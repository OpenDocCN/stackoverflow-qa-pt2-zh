# StackOverflow 问答 14049000-14049999

# powershell - 如何在powershell脚本中填写提示

> ID：14049002
> 
> 赞同：7
> 
> 时间：2012-12-27T03:25:52.827
> 
> 标签：powershell

我使用这样的命令：

```
获取 pfx 证书 C:\test.pfx

输入密码： *******

```

该命令要求我填写提示。但我不能在我的脚本中这样做（test.ps1 for ex）

我需要的是这样的：

```
获取-pfxcertificate C:\test.pfx -password "123456"

```

或类似的东西，这样我就可以运行我的脚本而无需每次都填写提示

我非常感谢任何回复

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-27T09:42:26.577

没有密码参数，您可以尝试使用 .NET 类：

```
$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2
$cert.Import('C:\test.pfx','123456','DefaultKeySet') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-02T17:41:19.070

另一种选择是扩展 的功能`Get-PfxCertificate`，本质上是允许输入密码。

```
# create a backup of the original cmdlet
if(Test-Path Function:\Get-PfxCertificate){
    Copy Function:\Get-PfxCertificate Function:\Get-PfxCertificateOriginal
}

# create a new cmdlet with the same name (overwrites the original)
function Get-PfxCertificate {
    [CmdletBinding(DefaultParameterSetName='ByPath')]
    param(
        [Parameter(Position=0, Mandatory=$true, ParameterSetName='ByPath')] [string[]] $filePath,
        [Parameter(Mandatory=$true, ParameterSetName='ByLiteralPath')] [string[]] $literalPath,

        [Parameter(Position=1, ParameterSetName='ByPath')] 
        [Parameter(Position=1, ParameterSetName='ByLiteralPath')] [string] $password,

        [Parameter(Position=2, ParameterSetName='ByPath')]
        [Parameter(Position=2, ParameterSetName='ByLiteralPath')] [string] 
        [ValidateSet('DefaultKeySet','Exportable','MachineKeySet','PersistKeySet','UserKeySet','UserProtected')] $x509KeyStorageFlag = 'DefaultKeySet'
    )

    if($PsCmdlet.ParameterSetName -eq 'ByPath'){
        $literalPath = Resolve-Path $filePath 
    }

    if(!$password){
        # if the password parameter isn't present, just use the original cmdlet
        $cert = Get-PfxCertificateOriginal -literalPath $literalPath
    } else {
        # otherwise use the .NET implementation
        $cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2
        $cert.Import($literalPath, $password, $X509KeyStorageFlag)
    }

    return $cert
} 
```

现在你可以调用它了

```
# tada: extended cmdlet with `password` parameter
Get-PfxCertificate 'C:\path\to\cert.pfx' 'password' 
```

此外，如果您仍然需要提示，您可以执行以下操作。

```
$pwd = Read-Host 'Please enter your SSL Certificate password.'
Get-PfxCertificate 'C:\path\to\cert.pfx' $pwd 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-05T20:24:40.793

现在`Get-PfxData`PowerShell 中有一个命令可以获取证书和链。该命令包含一个`-Password`采用 SecureString 对象的参数，因此您可以避免被提示。

该`EndEntityCertificates`属性包含证书链末尾的证书数组，并将包含由`Get-PfxCertificate`命令创建的相同证书对象。

以下示例将普通字符串转换为 SecureString 对象，从文件加载证书，然后将第一个/唯一结束证书分配给 $SigningCert 变量：

```
$SecurePassword=ConvertTo-SecureString -String "MyPassword" -AsPlainText -Force
$PfxData=Get-PfxData -FilePath ".\cert_filename.pfx" -Password $SecurePassword
$SigningCert=$PfxData.EndEntityCertificates[0] 
```

您现在可以在不提示输入密码的情况下应用 $SigningCert。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-01T14:23:39.387

感谢 Shay 为我指明了正确的方向。我需要从 PFX 文件中获取指纹，所以我使用了非持久性 DefaultKeySet。除非密钥集完全合格，否则 2012 PS3 下的测试将失败。此外，Import 和左括号之间的空格，即“$cert.Import^^(Sys...”会导致错误。挑剔，挑剔的解析器。

我的 PFX 密码在源代码中已加密。我在运行时解密它，所以它在源代码中不可见。

```
Set-StrictMode -Version Latest
[string] $strPW  = '123456'
[string] $strPFX = 'C:\MyCert.pfx'

$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2
$cert.Import($strPFX,$strPW,[System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]"DefaultKeySet")
$cert.Thumbprint 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-09-08T16:27:11.233

这也适用于使用本机 PowerShell 而不是 .NET：

```
$securePassword = ConvertTo-SecureString -String $strPW -Force -AsPlainText
$cert = Import-PfxCertificate -FilePath $strPFX cert:\LocalMachine\My -Password $securePassword

```

# permissions - 如何更改 redis dumpdb 文件的默认所有权？

> ID：14049007
> 
> 赞同：1
> 
> 时间：2012-12-27T03:26:21.077
> 
> 标签：permissions, redis, backup

默认`dump.rdb`文件创建redis保存到磁盘，默认所有权是`redis:redis`有`660`权限的。**每次**redis 执行自动备份时都会提到这一点。

我怎么能将所有权设置为，说`redis:admin`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:34:19.357

你怎么开始`redis`？我有一个`/etc/init.d/redis-server`脚本，它在下面。

您可以设置`$USER`and`$GROUP`来运行 redis 二进制文件。在进行转储时，Redis 将使用这些用户+组权限。

```
#!/bin/bash

#! /bin/sh
### BEGIN INIT INFO
# Provides:             redis-server
# Required-Start:       $syslog
# Required-Stop:        $syslog
# Should-Start:         $local_fs
# Should-Stop:          $local_fs
# Default-Start:        2 3 4 5
# Default-Stop:         0 1 6
# Short-Description:    redis-server - Persistent key-value db
# Description:          redis-server - Persistent key-value db
### END INIT INFO

PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
DAEMON=/usr/local/bin/redis-server
DAEMON_ARGS=/etc/redis.conf
NAME=redis-server
DESC=redis-server
PIDFILE=/var/run/redis.pid
USER=myuser
GROUP=mygroup

test -x $DAEMON || exit 0
test -x $DAEMONBOOTSTRAP || exit 0

set -e

case "$1" in
  start)
        echo -n "Starting $DESC: "
        touch $PIDFILE
        chown $USER:$GROUP $PIDFILE
        if start-stop-daemon --start --quiet --umask 007 --pidfile $PIDFILE --chuid $USER:$GROUP --exec $DAEMON -- $DAEMON_ARGS
        then
                echo "$NAME."
        else
                echo "failed"
        fi
        ;;
  stop)
        echo -n "Stopping $DESC: "
        if start-stop-daemon --stop --retry 10 --quiet --oknodo --pidfile $PIDFILE --exec $DAEMON
        then
                echo "$NAME."
        else
                echo "failed"
        fi
        rm -f $PIDFILE
        ;;

  restart|force-reload)
        ${0} stop
        ${0} start
        ;;
  *)
        echo "Usage: /etc/init.d/$NAME {start|stop|restart|force-reload}" >&2
        exit 1
        ;;
esac

exit 0 
```

# extjs - 如何在 extjs 4 中设置面板/窗口透明？

> ID：14049013
> 
> 赞同：7
> 
> 时间：2012-12-27T03:27:44.917
> 
> 标签：extjs, extjs4

如何设置面板或窗口透明（半）？通过 CSS 还是设置 html 代码？extjs 版本是 4.0.7。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T09:55:03.597

您可以使用 CSS 完成此操作。

将此配置添加到您的面板：

```
bodyStyle: 'background:transparent;' 
```

或者

```
bodyStyle: 'opacity:0.5;' 
```

# asp.net - 如何在gridview中将一个单元格分成正好2个相等的行

> ID：14049019
> 
> 赞同：-1
> 
> 时间：2012-12-27T03:29:18.290
> 
> 标签：asp.net, gridview

我有一个网格视图，我需要将一个单元格分成 2 个相等的行...

在这里我可以分割，但我不能分成相等的部分....

我怎样才能将一个单元格精确地分成 2 行....

这是我的代码..

**更新一个**

```
<Wizard:WizardGridView ID="gvresmgt" runat="server" AllowPaging="False"       AllowSorting="True" 
 AutoGenerateColumns="false" WizardCustomPager="False" EnableModelValidation="True"   CssClass="style1" ShowHeader="False" >
 <Columns>
 <asp:TemplateField >
 <ItemStyle Width="100px" HorizontalAlign="left" />
 <ItemTemplate>
 <asp:Label runat="server" ID="lblTitle" Text='<%# Eval("BGP_ID")%>' ></asp:Label>
 </ItemTemplate>
 </asp:TemplateField>
 <asp:TemplateField >
 <ItemStyle Width="100px" HorizontalAlign="Center" />
 <ItemTemplate>
  <asp:Label runat="server" ID="lblDescription" Text='<%# Eval("BGP_DESC")%>' >            </asp:Label>
 </ItemTemplate>
 </asp:TemplateField>
 <asp:TemplateField>
<ItemStyle Width="100px" HorizontalAlign="Center" />
<ItemTemplate>
**<div id="1" style="border-bottom: solid 1px #C0C0C0">
    <asp:Label runat="server" ID="lblPlanStart" Font-Bold="true" Text="Projects"></asp:Label>
                                                    <br/>
                                                    <br/>
               </div>
     <asp:Label runat="server" ID="Label3" Font-Bold="true" Text="SubTotal"></asp:Label>  **
 </ItemTemplate>
 </asp:TemplateField>
</Columns>
</Wizard:WizardGridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:30:56.217

Try with the height set to half

```
<ItemStyle Width="100px" Height="20px" HorizontalAlign="Center" />
<ItemTemplate>
 <table style="border: 1px solid black;">
   <tr>
    <td style="border: 1px solid black;">
      <asp:Label runat="server" ID="lblPlanStart" Font-Bold="true" Text="Unknown"></asp:Label>
    </td>
    </tr>
   <tr>
    <td style="border: 1px solid black;">
      <asp:Label runat="server" ID="lblPlanStart" Font-Bold="true" Text="Projects"></asp:Label>
    </td>
    </tr>
    <tr>
      <td style="border: 1px solid black;">
        <asp:Label runat="server" ID="Label3" Font-Bold="true" Text="SubTotal"></asp:Label>    
      </td>
    </tr>
 </table>
</ItemTemplate> 
```

# java - 从 java 调用存储过程时出错

> ID：14049023
> 
> 赞同：2
> 
> 时间：2012-12-27T03:30:31.967
> 
> 标签：java, postgresql, jdbc, prepared-statement

我在`postgres`数据库中编写了以下存储过程

```
create or replace function reviseTax(revisiondate date, taxrate decimal) returns         table(employeeid integer, month date, difference decimal) AS $$
declare
    thisrow record;
    newTaxAmt decimal;
    differenceAmt decimal;
begin 
for thisrow in select * from employee_salary where salarydate >= revisiondate loop
    newTaxAmt = thisrow.income * $2;
    differenceAmt = newTaxAmt - thisrow.tax;
    update employee_salary es set tax = newTaxAmt where es.employeeid = thisrow.employeeid;
    insert into taxrevision (employeeid , month , difference) values (thisrow.employeeid , thisrow.salarydate , differenceAmt);

end loop;
return query select * from taxrevision as something;
end $$ language plpgsql; 
```

从数据库调用时，这工作正常。问题是当我使用 JDBC 代码从 java 调用这个存储过程时

我的java代码如下

```
System.out.println("Enter the effective date(yyyy-mm-dd) for the tax revision");
dateString = scanner.next();
float newTaxRate = 0.3F;

SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
df.setLenient(false);
java.util.Date utilDate = df.parse(dateString);
java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime());

CallableStatement callable = DBConnection.prepareCall("{call revisetax(?,?)}");
callable.setDate(1,sqlDate);
callable.setFloat(2,newTaxRate);
callable.executeQuery();
DBConnection.commit(); 
```

我收到以下错误：

```
ERROR: function revisetax(unknown, real) does not exist
  Hint: No function matches the given name and argument types. You might need to add             explicit type casts.
  Position: 14 
```

我无法弄清楚为什么，请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:35:02.960

当您在数据库中调用存储过程/函数时要使用该`CallableStatement`对象。

```
CallableStatement callable = new CallableStatement("{call my_function(?)}"); 
```

请注意可调用语句中的花括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:39:30.213

用这个

```
 call reviseTax(?,?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:20:36.753

我得到了它！！问题在于存储过程标头中的十进制数据类型

```
create or replace function reviseTax(revisiondate date, taxrate decimal) returns         table(employeeid integer, month date, difference decimal) AS $$ 
```

宣布

而不是`decimal`我使用`real`它并且它有效！

所以函数头应该是

```
create or replace function reviseTax(revisiondate date, taxrate real) returns         table(employeeid integer, month date, difference decimal) AS $$ 
```

宣布

PS 代替`real`，`double precision`也可以

# macos - 如何强制 NSArrayController 重新加载 MOC 内容以反映最新数据

> ID：14049027
> 
> 赞同：2
> 
> 时间：2012-12-27T03:30:56.310
> 
> 标签：macos, core-data, icloud, cocoa-bindings, nsarraycontroller

我正在开发 Mac 和 iOS 应用程序，中间使用 iCloud CoreData 来同步数据。

当我从 iOS 应用程序更新某些东西时，更新已经在 Mac 应用程序运行时迁移到 Mac 应用程序中的 PersistentStore。问题是我找不到强制 NSArrayController 从存储区重新加载所有数据的有效方法。

试过 -(void) fetch:(id)sender; 只能看到删除或添加的实体，但更新的模型属性没有刷新...

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:16:38.297

我发现

```
[self.managedObjectContext reset];
[myArrayController fetch:self]; 
```

强制我的 NSTableView（带有 NSArrayController）重新填充并显示新处理的 NSManagedObjects。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T00:45:21.907

如果您在托管对象上下文中看到最新数据，但在数组控制器中看不到，您需要：

```
[_yourManagedObjectContext processPendingChanges];
[_yourArrayController fetchWithRequest:nil merge:YES error:&error];
[_yourArrayController rearrangeObjects]; 
```

当 iCloud 商店发生变化时，我在 Mac/iOS iCloud 应用程序中使用它来更新 Mac 应用程序的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T03:05:08.237

以下是苹果开发者技术支持的回复。它对我有用。感谢大家提供解决方案。

> 对于 OS X 应用程序，当调用 reloadFetchResults 时，您可以要求 NSManagedObjectContext 重置自身并再次执行获取。

```
- (void)reloadFetchedResults:(NSNotification *)note
{
NSDictionary *userInfoDict = [note userInfo];

NSManagedObjectContext *moc = self.coreDataController.mainThreadContext;

// this only works if you used NSMainQueueConcurrencyType
// otherwise use a dispatch_async back to the main thread yourself
//
[moc performBlock:^{
    [self mergeiCloudChanges:userInfoDict forContext:moc];

    [moc reset];
    [self.tableArrayController fetch:self];
}];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-01T10:36:39.450

以防其他人发现这个......在我的情况下，我是从用户交互（不是核心数据）构建数组，然后尝试在完成后显示 tableView（在同一个窗口上）......当然……什么也看不见！

[arrayController 重新排列对象];

就在我想显示 tableView 为我修复它之前。

# python - 用自我宣布[几乎]一切。好吗（Python）？

> ID：14049028
> 
> 赞同：3
> 
> 时间：2012-12-27T03:31:41.547
> 
> 标签：python, self

我有`self.`在前面声明新变量以使其可用于所有方法的习惯。这是因为有时我认为我不需要其他方法中的变量。但在进行到一半时，我意识到我需要它可以通过其他方法访问。然后我必须`self.`在所有变量前面添加。

所以我的问题是，除了每次使用变量时需要多输入 5 个字符之外，还有其他缺点吗？或者，你如何克服我的问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T03:34:46.407

`self`仅当值是整个对象状态的一部分时才设置属性。如果它只是方法状态的一部分，那么它应该是方法本地的，而不应该是`self`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T03:37:13.430

这不是真的没事。`self`使您的变量可用于全局对象范围。这样，您需要确保变量的名称在整个对象中是唯一的，而不是在本地化范围内，以及其他可能不需要也可能不需要的副作用。

在您的特定情况下，这可能不是问题，但总的来说这是一种非常糟糕的做法。

了解您的范围并明智地使用它。:)

# java - 从 xml 文件中读取数据并填充到 oracle 表中

> ID：14049040
> 
> 赞同：-1
> 
> 时间：2012-12-27T03:34:00.440
> 
> 标签：java, oracle, dom, sax

> **可能重复：**
> [xml 到 oracle 的转换](https://stackoverflow.com/questions/1227259/xml-to-oracle-conversion)

我有一些记录的 xml 文件。我希望它使用 Java 代码将此记录存储到 oracle 表中。实现这一目标的最佳方法是什么？

**更新**

xml 是

```
<Allitems>
    <Item>
        <Thumbnail> ... </Thumbnail>
        <URL> ... </URL>
        <Title> ... </Title>
        <Tag> ... </Tag>
        <Description> ... </Description>
    </Item>

    <Item>
        <Thumbnail> ... </Thumbnail>
        <URL> ... </URL>
        <Title> ... </Title>
        <Tag> ... </Tag>
        <Description> ... </Description>
    </Item>

    ...
    ...

</Allitems> 
```

表有类似的列

```
thumbnail  
url  
title  
tag and  
description 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:41:03.950

取决于你的数据结构，也许你不需要 DOM，只需要 SAX 来传递 XML。

当数据在 java 端时，您可以将其发送到数据库。

恕我直言：

> 最好的办法

是主观的，也取决于你的上下文。也许您在 xml 中的数据有 6Tb 的数据，这需要与 6 条记录不同的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T03:43:46.013

在`10g`和更高的地方有一种叫做`XMLType`

您可以将您的 XML 存储`XMLType`为`SQL * Loader`

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14259/xdb25loa.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14259/xdb25loa.htm)

# c++ - 将临时对象传递给 std::cout

> ID：14049043
> 
> 赞同：1
> 
> 时间：2012-12-27T03:34:35.890
> 
> 标签：c++, temporary

我有这段非常简单的测试代码：

```
std::string a = "A"
std::string b = "B"

std::cout << a + b << std::endl; 
```

虽然它在 GNU g++ 中工作，但我担心将临时传递给 是否是可移植的`a + b`，`std::cout`例如，std::cout 是否保证接收正确的内存？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T03:37:26.410

它是安全的。临时文件在被 处理之前不会被销毁`cout`。

有关更多详细信息，请参阅[作为函数调用的一部分创建的临时对象何时被销毁？](https://stackoverflow.com/questions/3041249/when-are-temporaries-created-as-part-of-a-function-call-destroyed)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T03:39:01.233

是——`a+b`创建一个临时`std::string`对象，该对象被传递给`std::cout`. 在创建它的完整表达式结束时，该临时对象将被销毁，但之前不会，因此它将保持有效直到表达式结束。

除此之外，临时对象与几乎任何其他`std::string`对象几乎相同，因此它是临时对象这一事实与`std::cout`.

# c++ - Unix C++：在不同的区域获取时间

> ID：14049047
> 
> 赞同：1
> 
> 时间：2012-12-27T03:34:48.490
> 
> 标签：c++, unix, timezone, unix-timestamp, timezone-offset

我正在尝试使用 C++ 获取不同时区 (PST) 的时间。

```
#define PST (-8);
char* Time::getSecondSystemTime() {
    time_t rawtime;
    struct tm * timeinfo;
    char buffer[80];

    time(&rawtime);
    timeinfo = gmtime(&rawtime);

    timeinfo->tm_hour = timeinfo->tm_hour + PST;

    strftime(buffer, 80, "%I:%M %p", timeinfo);

    std::string temp = std::string(buffer); // to get rid of extra stuff
    std::string extraInfo = " Pacific Time ( US & Canada )";

    temp.append(extraInfo);

    return (char*) (temp.c_str());

} 
```

这里的问题是，当 GMT 时间小于 8 小时时（例如，现在是凌晨 3 点），减去 8 小时是行不通的！

在 Unix 的不同时区获取时间的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T04:16:00.173

既然您说“UNIX”，这使用 TZ，但是，`TZ=[what goes here]`您需要找出系统上的 [这里发生了什么]。它可能是“America/LosAngeles”或 PST 的其他几个字符串之一。如果您的系统是 POSIX：TZ=PST8PST 保证可以工作。但它可能不是最优的。

原始非生产代码假定 TZ 当前未使用。这是在 C 中，而不是 C++，因为您的标签是 C：

```
setenv("TZ", "PST8PST", 1);   // set TZ
tzset();                // recognize TZ
time_t lt=time(NULL);   //epoch seconds
struct tm *p=localtime(&lt); // get local time struct tm
char tmp[80]={0x0};
strftime(tmp, 80, "%c", p);  // format time use format string, %c 
printf("time and date PST: %s\n", tmp); // display time and date
// you may or may not want to remove the TZ variable at this point. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T04:38:21.890

我隐藏了以下 C 代码来处理该问题。效率并不是第一个想到的词（两次调用`setenv()`，两次调用`tzset()`），但标准 C 库并不容易做得更好：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <unistd.h>

static void time_convert(time_t t0, char const *tz_value)
{
    char old_tz[64];
    strcpy(old_tz, getenv("TZ"));
    setenv("TZ", tz_value, 1);
    tzset();
    char new_tz[64];
    strcpy(new_tz, getenv("TZ"));
    char buffer[64];
    struct tm *lt = localtime(&t0);
    strftime(buffer, sizeof(buffer), "%Y-%m-%d %H:%M:%S", lt);
    setenv("TZ", old_tz, 1);
    tzset();
    printf("%ld = %s (TZ=%s)\n", (long)t0, buffer, new_tz);
}

int main(void)
{
    time_t t0 = time(0);
    char *tz = getenv("TZ");
    time_convert(t0, tz);
    time_convert(t0, "UTC0");
    time_convert(t0, "IST-5:30");
    time_convert(t0, "EST5");
    time_convert(t0, "EST5EDT");
    time_convert(t0, "PST8");
    time_convert(t0, "PST8PDT");
} 
```

在您的原始代码中，您必须担心在更改小时偏移后标准化时间结构。您可以使用该[`mktime()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/mktime.html)功能来做到这一点。这是一个基于问题中函数的程序，它是纯 C 语言，避免了返回指向局部变量的指针（并以`#define`分号结尾）的问题：

```
#include <assert.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <time.h>

#define PST (-8)

extern int getSecondSystemTime(char *buffer, size_t buflen);

int getSecondSystemTime(char *buffer, size_t buflen)
{
    time_t rawtime = time(0);;
    struct tm *timeinfo;
    char t_buff[32];

    timeinfo = gmtime(&rawtime);
    timeinfo->tm_hour = timeinfo->tm_hour + PST;

    time_t pst_time = mktime(timeinfo);
    assert(pst_time != (time_t)-1);
    int len = strftime(t_buff, sizeof(t_buff), "%Y-%m-%d %H:%M:%S", timeinfo);
    assert(len != 0);

    int rv = snprintf(buffer, buflen, "%ld = %s (%s)", (long)rawtime, t_buff, 
                      "Pacific Time (US & Canada)");
    assert(rv > 0);
    return rv;
}

int main(void)
{
    char buffer[128];

    getSecondSystemTime(buffer, sizeof(buffer));
    printf("%s\n", buffer);
    return(0);
} 
```

显然，更好的接口会将 UTC 时间值和时区偏移（以小时和分钟为单位）作为参数传递。尽管我的计算机默认运行在美国/太平洋（或美国/洛杉矶）时区，但我将 TZ 设置为各种值（包括美国/东部，IST-05:30）进行了测试，并得到了正确的值；根据过去的经验，我有理由相信计算是正确的。

我有另一个程序试图剖析`-1`返回`mktime()`是因为错误还是因为转换后的时间对应于`(time_t)-1`：

```
/* Attempt to determine whether time is really 1969-12-31 23:59:59 +00:00 */
static int unix_epoch_minus_one(const struct tm *lt)
{
    printf("tm_sec = %d\n", lt->tm_sec);
    if (lt->tm_sec != 59)
        return(0);
    printf("tm_min = %d\n", lt->tm_min);
    /* Accounts for time zones such as Newfoundland (-04:30), India (+05:30) and Nepal (+05:45) */
    if (lt->tm_min % 15 != 14)
        return(0);
    /* Years minus 1900 */
    printf("tm_year = %d\n", lt->tm_year);
    if (lt->tm_year != 69 && lt->tm_year != 70)
        return(0);
    printf("tm_mday = %d\n", lt->tm_mday);
    if (lt->tm_mday != 31 && lt->tm_mday != 1)
        return(0);
    /* Months 0..11 */
    printf("tm_mon = %d\n", lt->tm_mon);
    if (lt->tm_mon != 11 && lt->tm_mon != 0)
        return(0);
    /* Pretend it is valid after all - though there is a small chance we are incorrect */
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T17:48:54.390

这是一种更简洁的方法（此示例获取 GMT 时间，包括 DST 偏差）：

```
struct STimeZoneFromRegistry
{
   long  Bias;
   long  StandardBias;
   long  DaylightBias;
   SYSTEMTIME StandardDate;
   SYSTEMTIME DaylightDate;
};

static SYSTEMTIME GmtNow()
{
   FILETIME UTC;
   GetSystemTimeAsFileTime(&UTC); 

   SYSTEMTIME GMT;

   TIME_ZONE_INFORMATION tz = {0};
   STimeZoneFromRegistry binary_data;
   DWORD size = sizeof(binary_data);
   HKEY hk = NULL;
   TCHAR zone_key[] = _T("SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Time Zones\\GMT Standard Time");
   if ((RegOpenKeyEx(HKEY_LOCAL_MACHINE, zone_key, 0, KEY_QUERY_VALUE, &hk) == ERROR_SUCCESS) &&
      (RegQueryValueEx(hk, "TZI", NULL, NULL, (BYTE *) &binary_data, &size) == ERROR_SUCCESS))
   {
      tz.Bias = binary_data.Bias;
      tz.DaylightBias = binary_data.DaylightBias;
      tz.DaylightDate = binary_data.DaylightDate;
      tz.StandardBias = binary_data.StandardBias;
      tz.StandardDate = binary_data.StandardDate;
   }

   SystemTimeToTzSpecificLocalTime(&tz, &UTC, &GMT);

   return GMT;
 } 
```

# python - 如何配置pycharm/intellij idea运行tox测试

> ID：14049048
> 
> 赞同：3
> 
> 时间：2012-12-27T03:34:57.607
> 
> 标签：python, testing, intellij-idea, pycharm, pytest

是否可以配置 pycharm / intellij idea 来运行 tox 测试？我想在不同的 py 环境中针对不同的 python 版本测试我的代码。我试图配置它，但到目前为止我只设法配置单个 py.test 支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-25T13:58:16.283

请参阅此 PyCharm 问题：[PY-9727](https://youtrack.jetbrains.com/issue/PY-9727)

`Andrey Vlasovskikh`归功于PyCharm

作为一种解决方法，您可以在项目中创建一个 Python 文件来导入和启动 Tox：

```
import tox
tox.cmdline() 
```

然后通过你的项目解释器使用它的上下文菜单运行这个文件。

您将在控制台输出中获得堆栈跟踪的超链接，但仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:43:48.203

恐怕不支持，PyCharm 将使用配置的解释器来运行测试。

欢迎您[提交功能请求](http://youtrack.jetbrains.net/issues/PY)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-04T16:58:29.343

7 年过去了，现在您可以在 PyCharm 中运行 Tox。如果您使用 pytest 进行测试，它甚至会以与 PyCharm 在本地运行测试相同的方式显示测试结果。

要在 pycharm 中运行测试，我使用这样的配置

```
[tox]
envlist = py3.{7,8},codestyle,flake8,lint
minversion = 3.7

[testenv]
usedevelop = true
deps =
  pytest
  pytest-cov
commands = pytest --cov=src

[testenv:codestyle]
deps = pycodestyle
commands = pycodestyle src tests

[testenv:flake8]
deps = flake8
commands = flake8 src tests

[testenv:lint]
deps = pylint
commands = pylint src tests --rcfile=.pylintrc 
```

[在这里](https://lukeonpython.blog/2020/10/tox-pycharm-integration/)，我描述了为什么它看起来像这样。此外，它还与 GitHub CI 集成，可以在每次推送时运行它。

# c# - 如何让我的控制台应用程序在另一个线程上运行后台进程而不退出？

> ID：14049051
> 
> 赞同：5
> 
> 时间：2012-12-27T03:35:12.453
> 
> 标签：c#, .net, vb.net, timer

我知道在[.NET](http://en.wikipedia.org/wiki/.NET_Framework)中有三种计时器类型（请参阅*[Comparing the Timer Classes in the .NET Framework Class Library](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)*）。我选择了一个线程定时器，因为如果主线程很忙，其他类型可能会漂移，我需要它是可靠的。

这个计时器在计时器控制下的工作方式被放在另一个线程上，因此它总是可以在不忙时随着父线程上的工作开始完成而滴答作响。

控制台应用程序中这个计时器的问题是，当计时器在另一个线程上滴答作响时，主线程没有做任何事情，所以应用程序关闭。

我尝试添加一个`while true`循环，但是当计时器关闭时主线程太忙了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T04:12:54.610

我会使用一个等待所有线程完成的屏障。由于有一个主线程和一个计数线程，我有 2 个参与者。所以它看起来像这样：

```
 Module Module1
        Dim x As New Threading.Thread(AddressOf tick)
        Dim y As New Threading.Barrier(2)

        Sub Main()
            x.IsBackground = True
            x.Start()
            y.SignalAndWait()
        End Sub

        Sub tick()
            Threading.Thread.Sleep(10000)
            y.SignalAndWait()
        End Sub
    End Module 
```

# c# - 查找 GridView 列的字段类型

> ID：14049053
> 
> 赞同：0
> 
> 时间：2012-12-27T03:35:14.723
> 
> 标签：c#, asp.net, gridview, field, web-controls

我正在处理一个 ASP.NET 页面，该页面会变异为提供给它的 MDB 文件。它目前允许您选择要使用的表，并从那里选择要编辑的行，并用文本框填充页面并用数据填充它们。这一切都有效，但是当它不是基于字符串的字段类型时会出现问题，例如，我遇到的问题是确定目标单元格何时是 CheckBoxField 类型。

我的问题是，如何从填充的 GridView 中获取列 Web 控件值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:48:24.420

我认为您希望您的网格表现得像示例解释的那样：

[http://www.codeproject.com/Articles/37207/Editable-Gridview-with-Textbox-CheckBox-Radio-Butt](http://www.codeproject.com/Articles/37207/Editable-Gridview-with-Textbox-CheckBox-Radio-Butt)

下载源代码供您参考。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T03:45:38.490

您可以访问该表吗？您可以尝试从列集合中获取类型（table.Columns[name].DataType（从我的头顶）

然后，您可以使用列类型来选择控件。

# bash - Bash 在变量中展开变量

> ID：14049057
> 
> 赞同：70
> 
> 时间：2012-12-27T03:36:06.217
> 
> 标签：bash

我正在尝试设置`PS1`提示变量以动态选择颜色。为此，我定义了一堆带有颜色名称的局部变量：

```
$ echo $Green
\033[0;32m 
```

但我希望在动态分配变量时使用它们，但我不知道如何正确扩展它们：

```
> colorstr="\${$color}"
> echo $colorstr
${Green} 
```

我已经尝试了十几种, 和双引号的组合，但似乎都不起作用`eval`。`echo`扩展变量的逻辑方式（我认为）会导致错误：

```
> colorstr="${$color}"
-bash: ${$color}: bad substitution 
```

（为了清楚起见，我使用`>`而不是`$`提示字符，但我使用的是 bash）

如何扩展该变量？即，以某种方式获得“绿色”这个词的价值`\033[0;32m`？并且最好让 bash 或终端也将其解析`\033[0;32m`为绿色。

编辑：我以前误用过`${!x}`，`eval echo $x`所以我接受了这些作为解决方案。对于（也许是病态的）好奇，函数和`PS1`变量都在这个要点上：[https ://gist.github.com/4383597](https://gist.github.com/4383597)

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-27T06:09:16.697

Using`eval`是经典的解决方案，但`bash`有一个更好的（更容易控制，更少笨拙的）解决方案：

*   `${!colour}`

Bash（4.1）[参考手册](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)说：

> 如果参数的第一个字符是感叹号（！），则引入了变量间接级别。Bash 使用由其余参数形成的变量的值作为变量的名称；然后扩展此变量，并将该值用于替换的其余部分，而不是参数本身的值。这称为*间接扩展*。

例如：

```
$ Green=$'\033[32;m'
$ echo "$Green" | odx
0x0000: 1B 5B 33 32 3B 6D 0A                              .[32;m.
0x0007:
$ colour=Green
$ echo $colour
Green
$ echo ${!colour} | odx
0x0000: 1B 5B 33 32 3B 6D 0A                              .[32;m.
0x0007:
$ 
```

（该`odx`命令非常不标准，但只是以十六进制格式转储其数据，右侧显示可打印的字符。由于纯`echo`文本没有显示任何内容，我需要查看正在回显的内容，因此我使用了我写的一位老朋友大约 24 年前。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-27T03:55:23.400

使用 eval 应该这样做：

```
green="\033[0;32m"
colorstr="green"
eval echo -e "\$$colorstr" test           # -e = enable backslash escapes
test 
```

最后一个测试是绿色的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T01:16:41.247

Bash 支持关联数组。当你可以使用字典时不要使用间接。如果您没有关联数组，请升级到 bash 4、ksh93 或 zsh。显然 mksh 最终也会添加它们，所以应该有很多选择。

```
function colorSet {
    typeset -a \
        clrs=(black red green orange blue magenta cyan grey darkgrey ltred ltgreen yellow ltblue ltmagenta ltcyan white) \
        msc=(sgr0 bold dim smul blink rev invis)

    typeset x

    while ! ${2:+false}; do
        case ${1#--} in
            setaf|setab)
                for x in "${!clrs[@]}"; do
                    eval "$2"'[${clrs[x]}]=$(tput "${1#--}" "$x")'
                done
                ;;
            misc)
                for x in "${msc[@]}"; do
                    eval "$2"'[$x]=$(tput "$x")'
                done
                ;;
            *)
                return 1
        esac
        shift 2        
    done
}

function main {
    typeset -A fgColors bgColors miscEscapes
    if colorSet --setaf fgColors --setab bgColors --misc miscEscapes; then
        if [[ -n ${1:+${fgColors[$1]:+_}} ]]; then
            printf '%s%s%s\n' "${fgColors[${1}]}" "this text is ${1}" "${miscEscapes[sgr0]}"
        else
            printf '%s, %s\n' "${1:-Empty}" 'no such color.' >&2
            return 1
        fi
    else
        echo 'Failed setting color arrays.' >&2
        return 1
    fi
}

main "$@" 
```

尽管我们使用的是`eval`，但出于不同的原因，它是一种不同类型的间接。请注意所有必要的保证是如何确保安全的。

另见： http: [//mywiki.wooledge.org/BashFAQ/006](http://mywiki.wooledge.org/BashFAQ/006)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T03:47:15.340

您将需要为函数编写别名。查看[http://tldp.org/LDP/abs/html/functions.html](http://tldp.org/LDP/abs/html/functions.html)，不错的小教程和一些示例。

编辑：对不起，看起来我误解了这个问题。首先，您似乎使用了错误的变量，请查看[http://www.thegeekstuff.com/2010/07/bash-string-manipulation/](http://www.thegeekstuff.com/2010/07/bash-string-manipulation/)。另外，什么在调用这个脚本？您是将其添加到 .bash_profile 还是您的用户可以启动的脚本？使用导出应该使更改立即生效而无需重新登录。

```
var Green="\[\e[32m\]"
var Red="\[\e41m\]"

export PS1="${Green} welcome ${Red} user>" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-17T06:51:16.853

您的第一个结果显示了问题：

> ```
> $ echo $Green
> \033[0;32m 
> ```

变量 Green 包含一个字符串`a backlash, a zero, a 3, etc.`。

它是由：`Green="\033[0;32m"`. 因此，它不是颜色代码。
需要解释变量内的文本（使用 echo -e、printf 或 $'...'）。

让我用代码解释一下：

```
$ Green="\033[0;32m"    ;     echo "  $Green   test   "
  \033[0;32m   test 
```

你的意思是：

```
$  Green="$(echo -e "\033[0;32m" )"    ;     echo "  $Green   test   "
 test 
```

在伟大的颜色绿色。这可以打印颜色，但对 PS1 没有用：

```
$  Green="\033[0;32m"    ;     echo -e "  $Green   test   "
 test 
```

因为这意味着必须在字符串`echo -e`起作用之前对其进行解释。

一种更简单的方法（在 bash 中）是：

```
$ Green=$'\033[0;32m'    ;     echo "  $Green   test   "
  test 
```

请注意`` $'...' ``

解决了变量的问题后`Green`，通过 var colorstr 的值间接访问它是第二个问题，可以通过以下方式解决：

```
$ eval echo \$$colorstr testing colors
testing colors
$ echo ${!colorstr} testing colors
testing colors 
```

**注意**请不要使用未引用的值（就像我在这里所做的那样，因为这些值在我的控制之下）。学习正确引用，例如：

```
$ eval echo \"\$$colorstr testing colors\" 
```

有了这个，你可以写一个相当于：

```
export PS1="${Green} welcome ${Red} user>" 
```

和：

```
Green=$'\033[0;32m'    Red=$'\033[0;31m'
color1=Green           color2=Red
export PS1="${!color1} welcome ${!color2} user>" 
```

# matlab - 有什么方法可以在 Matlab 中整齐地显示大量输出？

> ID：14049064
> 
> 赞同：0
> 
> 时间：2012-12-27T03:37:14.880
> 
> 标签：matlab

假设我有很多输出，我希望它们显示如下

摩擦系数 = xxx

负载系数 = xxx

热系数 = xxxx

有没有办法让等号'='相互对齐？我尝试过将 'fprintf' 函数与 '\t' 一起使用。但是，我很难做到这样的安排。

衷心感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:40:53.330

您可以执行以下操作：

```
names = {'Friction Factor','Load Factor','Thermal Factor'};
values = [xx,yy,zz];

nameLength = cellfun(@numel,names);

format = sprintf('%%-%is = %%f\\n',max(nameLength));

for n = 1:length(names)
    fprintf(format,names{n},values(n));
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:10:09.777

那这个呢：

```
disp(['Friction factor = ' num2str(xxx)])
disp(['Load factor     = ' num2str(yyy)])
disp(['Thermal factor  = ' num2str(zzz)]) 
```

# data-structures - 分段树，延迟传播

> ID：14049065
> 
> 赞同：0
> 
> 时间：2012-12-27T03:37:14.380
> 
> 标签：data-structures, lazy-evaluation, propagation, segment-tree

我对这个结构如何工作以及如何更新它有一个很好的想法，但是当涉及到延迟传播时我不知道该怎么做，因为很多很多问题都需要在比赛中通过我想知道如何让它工作。

我在 spoj 上尝试这个问题：[http ://www.spoj.com/problems/CDC12_H/](http://www.spoj.com/problems/CDC12_H/)

如果有人可以向我解释惰性传播如何适应这种情况，我会接受并研究这个想法，我真的不想发布我的代码，因为我的想法是让我自己完成这项工作，但是帮助不大。

我希望有人能解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:55:48.567

这是我使用延迟传播实现的分段树片段。希望这会帮助你。

```
#define int long long
#define MAX 100005*3

int  stree[MAX],lazy[MAX];

void update(int  cur,int  cur_lft,int  cur_rgt,int  st,int  en,int  val)
{
    if(cur_lft>en || cur_rgt<st) return ;
    if(cur_lft>=st && cur_rgt<=en)
    {
        stree[cur]+=val*(cur_rgt-cur_lft+1);
        lazy[cur]+=val;
        return;
    }
    int  l=cur<<1,r=(cur<<1)+1,mid=(cur_lft+cur_rgt)>>1;
    update(l,cur_lft,mid,st,en,val);
    update(r,mid+1,cur_rgt,st,en,val);
    stree[cur]=stree[l]+stree[r]+lazy[cur]*(cur_rgt-cur_lft+1);
}

int  query(int  cur,int  cur_lft,int  cur_rgt,int  st,int  en,int  lzy)
{
    if(cur_lft>en || cur_rgt<st) return 0;
    if(cur_lft>=st && cur_rgt<=en) return stree[cur]+lzy*(cur_rgt-cur_lft+1);
    int  l=cur<<1,r=(cur<<1)+1,mid=(cur_lft+cur_rgt)>>1;
    int  left_tree=query(l,cur_lft,mid,st,en,lzy+lazy[cur]);
    int  right_tree=query(r,mid+1,cur_rgt,st,en,lzy+lazy[cur]);
    return left_tree+right_tree;
} 
```

**编辑** 要更新和查询段树，我们可以调用以下函数：

```
query(1,0,n-1,lower_range,upper_range,0));
update(1,0,n-1,lower_range,upper_range,v); 
```

# php - PHP 会话管理 + AWS ElastiCache 和 DynamoDB

> ID：14049067
> 
> 赞同：2
> 
> 时间：2012-12-27T03:37:22.620
> 
> 标签：php, session, memcached, amazon-dynamodb, amazon-elasticache

我正准备实施一个 AWS 远程会话管理解决方案，并且一直在阅读互联网上其他人的经验。

根据我的阅读，我了解到 ElastiCache 对于 PHP 会话管理的速度明显更快，但如果 ElastiCache 崩溃、空间不足、AWS 维护期等，所有会话都可能丢失，这将导致所有用户注销，这是过度需要的。

问题：是否可以同时使用 ElastiCache 和 DynamoDB？

我可以看到两者都有一个似乎易于设置的 php 处理程序，但是否可以（或现实）使用 ElastiCache 进行会话但同时备份到 DynamoDB，然后在不存在会话时检查 DynamoDB？

想法？

对 ElastiCache 和 DynamoDB for PHP 会话管理之间的速度差异有何看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T03:43:38.710

无需结合 ElasticCache 和 DynamoDB。只需[在 Redis 上使用 PHP 会话处理程序](https://web.archive.org/web/20130315202940/http://redis4you.com/articles.php?id=01..)。它非常快速、稳定，数据默认备份到磁盘。

# c# - NHibernate 在保存时实例化集合

> ID：14049070
> 
> 赞同：1
> 
> 时间：2012-12-27T03:37:49.093
> 
> 标签：c#, nhibernate

我正在使用 NHibernate 将我的实体保存在数据库中。MY 实体之间有一些关系，导致一些映射集合。在我的情况下，我使用 Iesi.ISet 接口来映射这些集合。我想知道 nhibernate 是否可以检查包含这些集合的属性是否在我执行 save 时自动设置（如果它们为空）。

这就是它应该如何工作的方式。在将其保存到数据库之前，我有一个名为“MyCollection”的集合的属性为空。我希望 NHibernate 为该属性设置一个集合，以便在保存时它不再为空。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:28:42.570

这就是您的构造函数的用途。

如果您非常想将此类初始化隐藏在 NHibernate 之后，您可以使用 NHibernate 拦截器或事件侦听器为此注入代码。

# c - OpenCV - C 库在我的 Ubuntu11.10 中不起作用

> ID：14049073
> 
> 赞同：0
> 
> 时间：2012-12-27T03:38:36.817
> 
> 标签：c, image-processing, opencv, error-handling, header

Resently 我在我的机器上安装了 Opencv。它在python中运行良好（我刚刚通过一些例如程序检查了它）。但由于缺乏python教程，我决定转向c。[我刚刚从http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/](http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/)运行一个 Hello world 程序

编译时出现以下错误

```
hello-world.c:4:16: fatal error: cv.h: No such file or directory
compilation terminated. 
```

我是opencv的新手

Qn：您能否报告可能是什么问题 - 以及我如何在 c 中运行我的 helloworld 程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:52:44.750

您的编译器找不到您的`cv.h`包含文件。如果您是从包管理器安装的，它可能位于`/usr/include/opencv/`. 您需要添加您的包含搜索路径。如果您从命令行编译，请使用`-I`指定其他包含目录。它会是这样的 -

```
gcc -I /usr/include/opencv/ -o helloworld helloworld.c 
```

如果您使用的是 Eclipse，

*   右键单击项目并选择属性。
*   选择 C/C++ 常规 -> 路径和符号。
*   选择包括选项卡。
*   在语言列表中，根据您使用的语言选择“GNU C”或“GNU C++”。
*   按“添加...”按钮并添加 /usr/include/opencv/
*   保存并重建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:44:44.090

您需要显示 cv.h 文件的编译器路径。找到它的快速方法是（在 Ubuntu 上）：

```
find /usr -name "cv.h"
/usr/local/include/opencv/cv.h 
```

只需将其添加到编译器：

```
gcc -I/usr/local/include/opencv -o helloworld helloworld.c 
```

既然你问了这个问题，你的编译器也可能在将你的程序链接到 opencv 库时遇到问题。只对库文件做同样的事情：

```
find /usr -iname "libopencv*"
/usr/local/lib/libopencv_flann.so
... 
```

以相同的方式添加此文件夹并指定要使用的库：

```
gcc helloworld.c -I/usr/local/include/opencv -L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui -o helloworld 
```

那可能应该编译。您还可以采取一条捷径，而不是所有这些步骤，只需使用以下命令

```
gcc helloworld.c `pkg-config --cflags --libs opencv` -o helloworld 
```

这应该会为您处理查找所需文件的所有工作，并让您专注于有趣的编码部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:57:51.760

也许你刚刚安装了 opencv 包。但是，当你想在你的 C 程序中使用 opencv 时，你也可以安装命名为 opencv-devel 的包。如果还没有，请安装它，然后像@iagreen 所说的那样使用它。向您致以最良好的祝愿。

# ember.js - 是否有从 ember 数据存储中获取模型及其属性定义的 api？

> ID：14049075
> 
> 赞同：2
> 
> 时间：2012-12-27T03:39:05.960
> 
> 标签：ember.js, ember-data

假设您有这样的模型：

```
Recipe = DS.Model.extend({
  title: DS.attr("string"),
  description: DS.attr("string"),
}); 
```

是否有从 ember 数据存储中获取模型及其属性定义的 api？

会返回类似的东西

```
{
  Recipe: {
    title: "string"
    description: "string"
  }
} 
```

我问的原因是我对构建一个通用的 FormView 感兴趣，它将根据属性和类型添加适当的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:14:31.920

自己找到了答案，以防万一它对其他人有帮助：

```
EmberCookbook.Recipe.eachComputedProperty(function(p, m) { 
  if (m.isAttribute) { console.log(m); } 
}); 
```

这会遍历所有计算的属性，并且对于那些属性输出包含类型和其他信息的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T18:55:38.013

在 ember-data 2.3.0（可能更早）中，您可以获取`attributes`Model 类的属性。它是按属性元数据的属性名称的映射。请参阅[http://emberjs.com/api/data/classes/DS.Model.html#property_attributes](http://emberjs.com/api/data/classes/DS.Model.html#property_attributes)。

# c# - Linq - 获取最后一个非零数组的索引

> ID：14049077
> 
> 赞同：6
> 
> 时间：2012-12-27T03:39:23.820
> 
> 标签：c#, .net, arrays, linq

是否有一个 Linq 表达式返回数组中最后一个非零值的索引？我对扩展不感兴趣，只对一个简单的 linq 表达式感兴趣。

我在想象这样的伪代码：

```
int index = {0, 2, 1}.LastOrDefaultAt(i => i > 0); 
```

返回值应为 2；

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T04:03:53.873

您可以使用以下[`Array.FindLastIndex<T>`](http://msdn.microsoft.com/en-us/library/s5s03t6d.aspx)方法：

```
int index = Array.FindLastIndex(myIntArray, item => item > 0); 
```

我注意到您在问题文本中提到“非零”而不是“大于零”。你的谓词应该是：`item => item != 0`？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T03:59:50.680

`List<T>`对此有一个扩展方法，称为`FindLastIndex`

```
var index = new int[] { 0, 2, 1}.ToList().FindLastIndex(x => x > 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T04:11:42.673

```
class Program
{
    static void Main(string[] args)
    {
        int[] index = { 0, 2, 1 };

        var query = from p in index
                    where p != 0
                    orderby p descending
                    select p;

        Console.WriteLine(query.FirstOrDefault());
        Console.ReadKey();
    }
} 
```

输出：2。如果需要，可以用方法语法编写：

```
var index = new int[] { 0, 2, 1 }.Where(a => a != 0).OrderByDescending(a => a).FirstOrDefault(); 
```

# c# - 从数据库中提取地址并使用 c# 将地址放入谷歌地图

> ID：14049078
> 
> 赞同：-1
> 
> 时间：2012-12-27T03:39:33.320
> 
> 标签：c#, mysql, google-maps-api-3

你好，我是 C# 新手，我被要求集成谷歌地图并将其连接到数据库，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:38:30.273

基于您最初的帖子和您的评论，老实说，假设您同时了解 C# 和地图 API（因此这是您需要帮助的集成）。

您将需要：

1：设置你的连接字符串。

2：在数据库中查询您需要的地址。

3：将此地址传递给包含您的地图的 JavaScript，我个人使用数据读取器从信息中构造数组（如果您需要多个地址），然后使用

```
ScriptManager.RegisterArrayDeclaration 
```

全部在更新面板中。

4：接下来，您需要从前端的数组中提取信息，然后使用 Google Geocoding API 对其进行地理编码，最终获得您的可绘制点。

这些步骤中的每一个的信息都可以很容易地用谷歌搜索，所以我再次假设这是你不确定的组合。

不过，关于地理编码 API 的几点说明（假设是免费许可证）：

1：您每天的请求数限制为 2.5k。

2：请求限制也是有限的，我看到有人猜测这是每秒 5 次左右（或每 200 毫秒 1 次），但根据我的经验，它似乎更像是每秒 2 次。

顺便说一句，您提供的信息越多，人们就越容易提供帮助，而且您很可能会使用 SQL（与 SQL Server 一起）而不是 mySQL。

希望有些帮助。

# php - PHP 5.4.9 MySQL 5.5.28.3 - 选择带有 Unicode 字符的字段返回空白结果

> ID：14049079
> 
> 赞同：0
> 
> 时间：2012-12-27T03:39:38.920
> 
> 标签：php, mysql, select, unicode

我已经在网上搜索了几个小时，但我发现似乎没有任何帮助。这在我使用 PHP 5.3 和 MySQL 5.1 时运行良好。当我升级这两个时，我意识到对其中包含 Unicode 字符的字段进行的选择会给出空白结果。

该表设置为 UTF8，特别是字段也设置为 UTF8，以防万一。我的文档的标题区域中有一个 charset=utf-8 。

我在我的论坛上发了两篇测试帖子，一篇是纯文本，另一篇是卷曲引号。然后我创建了一个简单的 PHP 查询来获取这两行。代码的要点是这样的：

```
<?php

$con = mysql_connect("XXXXX","XXXXX","XXXXX");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("XXXXX", $con);

echo "<br />";
echo "<br />";
echo "PHP 5.4.9 having issues displaying UniCode characters. MySQL 5.5.28.3\. FastCGI has been removed. IIS.";
echo "<br />";
echo "<br />";

$result1 = mysql_query("SET NAMES 'utf8'");

$result = mysql_query("SELECT post_body from ubbt_posts where post_id = 358826");

while($row = mysql_fetch_array($result))
  {
  echo "Post Body without unicode: " . $row['post_body'];
  echo "<br />";
  echo "<br />";
  }

$result = mysql_query("SELECT post_body from ubbt_posts where post_id = 358825");

while($row = mysql_fetch_array($result))
  {
  echo "Post Body with unicode: " . $row['post_body'];
  echo "<br />";
  echo "<br />";
  }

mysql_close($con);

?> 
```

行为是非 unicode 帖子正确显示。另一个根本不显示。不是它显示一个正方形或块而不是引号 - 它不显示*任何东西*。

我尝试将 mysql_fetch_array 更改为 mysql_fetch_assoc。那没有帮助。我出于沮丧尝试了 utf8_encode ，但这也无济于事。

我读到有些人对 IIS / PHP 5.4.9 / FastCGI 的组合有问题，所以我卸载了 FastCGI。至少我尽了最大努力——文件都不见了，IIS 再次指向 php-cgi.exe 文件。但是 PHP 仍然报告它正在使用 FastCGI。我认为它必须在注册表中看到一些东西？但无论如何，文件都不见了，所以它真的不可能。它没有帮助。

在这一点上，我什至会尝试一些疯狂的想法来让它发挥作用。有什么想法吗？

更新：

我现在已经用 PHP 和 ASP 对此进行了测试。两种语言都给出相同的行为。我的更新代码的结果集给出了以下结果：

没有 unicode 的帖子主题：没有 unicode 的测试帖子

没有 unicode 的帖子正文：测试帖子中只包含普通字符，以及用于测试的 xyzzy。

体场长度：74

使用 unicode 发布主题：使用 unicode 测试帖子

使用 unicode 发布正文：

正文字段长度：0

因此，在检查长度后，ASP 和 PHP 都报告该字段的长度为零。

可能是 ODBC 有问题吗？即使我试图删除它，它是否仍然会干扰 FastCGI？

更新 2 -

为了解决这个问题，我必须做的是从备份中重新加载数据，将数据重新加载到已经设置为 UTF8 的表中，并将字段设置为 UTF8。然后我必须在连接后立即在代码中执行 set names utf8 命令。我认为这里没有涉及 FastCGI - 当我重新安装 FastCGI 时，一切都还可以。我仍然有一些琐碎的问题，但我认为表设置和重新加载处理了我的大部分问题。

丽莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:43:53.077

尝试以另一种方式设置 utf8 -

```
mysql_set_charset('utf8', $con); 
```

取而代之的是——

```
mysql_query("SET NAMES 'utf8'"); 
```

使用方法`$con`创建的连接在哪里`mysql_connect()`

注意 - 尝试使用`PDO`或`mysqli`

# jquery - 向下滚动时显示 Nav Div

> ID：14049084
> 
> 赞同：3
> 
> 时间：2012-12-27T03:41:24.910
> 
> 标签：jquery, html, css, scroll

当用户向下滚动传递一个名为的 div 类时，我希望一个 div 出现在顶部`.header1`（这个 div 里面有 3 个其他 div）

我希望导航出现在其中`.fixedDiv`。我在**[这里](https://stackoverflow.com/questions/7905670/how-to-make-div-appear-from-the-top-when-scrolling-down)**找到了答案，但我无法在我的网站上实现它。这是我得到的

```
<script type="text/javascript">
    var startY = $('.header1').position().top + $('.header1').outerHeight();
    $(window).scroll(function () {
        if( $(this).scrollTop() > startY ){
            $('.fixedDiv').slideDown();
        }else{
            $('.fixedDiv').slideUp();
        }
    });
</script> 
```

我`.fixedDiv`在我的网站上调用了一个 div，上面写着 topnav，我的问题是 div 总是在那里。向下滚动时它不会隐藏或出现。

[这](http://www.ehowtodrywall.com)是我网站的链接。

对于 css，我没有任何设置，`.header1`因为其他 div 在里面，它们应该是`.fixedDiv`出现所需的高度。并且`.fixedDiv`有 css

```
.fixedDiv {
    position:fixed;
    top:0px;
    left:0px;
    background:orange;
} 
```

我知道我已经接近完成这项工作，但我似乎无法弄清楚我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:59:47.427

测试`$(".header1").position()`给出`TypeError: undefined is not a function`.

由于 WordPress ，您似乎处于[无冲突模式。](https://stackoverflow.com/questions/7975093/typeerror-undefined-is-not-a-function-evaluating-document)

试试这个：

```
jQuery(document).ready(function($) {
    var startY= $('.header1').position().top + $('.header1').outerHeight();
    $(window).scroll(function () {
        if($(this).scrollTop() > startY ){
            $('.fixedDiv').slideDown();
        }else{
            $('.fixedDiv').slideUp();
        }
    });
}); 
```

* * *

**编辑：**你有一个额外的`<script>`标签（至少，Chrome 看到它）。它似乎在 Firefox 中运行良好。

![在此处输入图像描述](../Images/5bb98dbf49c0d1685719e6d9a8d00efa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:10:11.390

为什么不在滚动时使用带有 setInterval 的 fadeIn 和 fadeOut？类似于...的东西

```
.scroll( function()
{
    if($(".fixedDiv").css('display', 'none'))
    {
        $(".fixedDiv").fadeIn("normal", function()
        {
            setInterval( function() { $(".fixedDiv").fadeOut("normal"); }, 1500 );
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:28:56.530

所以终于弄明白了，我喜欢它，它看起来很棒

```
jQuery(document).ready(function() {
var startY= jQuery('.header1').position().top + jQuery('.header1').outerHeight();
jQuery('.fixedDiv').html( jQuery('#nav').html());
jQuery(window).scroll(function () {
    if(jQuery(this).scrollTop() > startY ){
        jQuery('.fixedDiv').slideDown();
    }else{
        jQuery('.fixedDiv').slideUp();
    }
});
}); 
```

不确定额外的行（第 3 行）是做什么的，但缺少的是什么......谢谢

# objective-c - Why is static variable checked for nil and then assigned?

> ID：14049090
> 
> 赞同：1
> 
> 时间：2012-12-27T03:42:42.500
> 
> 标签：objective-c, ios, uitableview

The following code is present in Apple's iOS development guides (found [here](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CustomizingMasterView/CustomizingMasterView.html#//apple_ref/doc/uid/TP40011318-CH4-SW4)):

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"BirdSightingCell";

    static NSDateFormatter *formatter = nil;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc] init];
        [formatter setDateStyle:NSDateFormatterMediumStyle];
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    BirdSighting *sightingAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:sightingAtIndex.name];
    [[cell detailTextLabel] setText:[formatter stringFromDate:(NSDate *)sightingAtIndex.date]];
    return cell;
} 
```

Why set formatter equal to nil then check if it's nil? In which case would it not be?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T03:45:39.253

`formatter` is a **static** variable, which is only initialized once.. So

```
static NSDateFormatter *formatter = nil; 
```

will be executed only once for multiple execution of this function.

In short, they are making sure to **reuse** the `formatter` object, instead of creating it every time.

So Regarding your question,

> In which case would it not be?

the formatter object will be `nil` only for the first execution of the function, so the code

```
 formatter = [[NSDateFormatter alloc];
 [formatter setDateStyle:NSDateFormatterMediumStyle]; 
```

will be only executed once.

For a change the [wikipedia page](http://en.wikipedia.org/wiki/Static_variable) on static variable is easy to read, and help you understand the concept. They use a C programming language example, but the concept is similiar in objective C.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T03:49:29.380

It's because it's `static`. So, the first time `cellForRowAtIndexPath` is called, the `formatter` will indeed be `nil` and will therefore be initialized as a valid `NSDateFormatter` with a `dateStyle` of `NSDateFormatterMediumStyle`. The next time this method is called, `formatter` will no longer be `nil`, and you won't need to initialize it again. It's just a convenient (albeit, apparently confusing if you're not familiar with the `static` qualifier) way of having a variable that is initialized only once.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T03:51:07.260

formatter is static, so that it will only be initialized for one time only. Thus, it may not be nil in the next time this function is called.

see here: [http://mobiledevelopertips.com/objective-c/java-developers-guide-to-static-variables-in-objective-c.html](http://mobiledevelopertips.com/objective-c/java-developers-guide-to-static-variables-in-objective-c.html)

# php - 在mysql中计算从2009-12-26到现在有多少个月和几年

> ID：14049092
> 
> 赞同：0
> 
> 时间：2012-12-27T03:42:53.323
> 
> 标签：php, mysql

在 mySql 中，我如何计算从“给定日期”到现在的月份和年份。该“给定日期”将从表格中选择。或者这是我必须使用 php 来做的事情？

所以sql将是`select min(datecol) from table where userid = 12;`

我在这里遇到了这个，`select DATE_FORMAT(FROM_DAYS(DATEDIFF(NOW(), '2009-12-26')), '%c months and %Y years');`但这给了`1 months and 0003 years`

三年可以，但1个月是错误的。在这种情况下，应该是 36 个月以上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:15:31.593

查找月份

```
select 
  period_diff(date_format(now(), '%Y%m'), date_format(`date_field`, '%Y%m')) 
  as months from `your_table` 
```

或这个

```
 SELECT
        12 * (YEAR(now()) - YEAR('2012-02-26')) + 
        (MONTH(now()) - MONTH('2012-02-26')) AS months 
```

请参阅`Mevin Babu`链接以查找年份

# android - 带有无操作应用程序的主机数据库，因此精简版和专业版可以访问

> ID：14049095
> 
> 赞同：4
> 
> 时间：2012-12-27T03:43:21.713
> 
> 标签：android, database, packages

像许多其他人一样，我将拥有我的应用程序的“精简版”和“专业版”版本。他们使用一个数据库，该数据库将在内部存储中。我希望用户能够购买专业版并安装它而不会丢失数据库。

**部分解决方案：** 我看过其他关于如何让多个应用程序使用同一个数据库的帖子。本质上，这需要两件事：

> 1.  两个清单都在清单中声明了相同的 android:sharedUserId，
> 2.  其中一个应用程序必须使用另一个应用程序的上下文打开数据库。

我试过了，是的，它有效！

**问题：**卸载精简版会删除数据库。按照这个：用户安装精简版。精简版创建数据库，他很乐意在其中创建和保存数据。后来他决定安装pro。专业版访问由 lite 创建的数据库，一切正常。最后，他卸载了lite，因为他不再需要它了。现在，pro 将停止工作，因为卸载 lite 版本时，db 已被 Android 删除。

**什么解决方案？** 想到的一种解决方案是让第三个应用程序拥有数据库。这是一个“什么都不做”的应用程序，它可以简单地安装并且与包具有相同的名称。它没有 UI，实际上永远不会运行。然后，可以在不影响数据库的情况下安装或卸载 lite 和 pro 应用程序。

这是一个好主意吗？有没有更好的方法（除了为数据库创建提供者）？如果这是一种合理的方法，我如何创建一个没有 UI 的应用程序不是服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T00:08:47.917

听起来您决定使用专业应用的应用内购买，但这也可能是一个可行的解决方案。

从您的帖子中，您有一个包含数据库的精简版应用程序。当用户购买 pro 应用程序时，您可以让 pro 应用程序访问 lite 数据库以进行读/写。如果这些假设是真的，为什么不做以下事情：

1.  当 pro 应用程序启动时，让它创建一个数据库，因此 pro 应用程序现在有自己的数据库。

2.  创建该数据库后，检查 lite 应用程序数据库是否存在，我假设您已经这样做了，因为您正在您的专业应用程序中打开 lite 应用程序数据库。

3.  如果 lite app db 存在，将 lite app db 中的数据写入 pro app db。现在在您的 pro db 中，您将拥有所有 lite db 数据。在使用 pro 应用程序时，应用程序应该调用它自己的数据库，而不是 lite 数据库。现在，来自 lite 应用程序的数据已传输到 pro，用户可以卸载 lite 应用程序，而不必担心数据会丢失。

4.  如果 lite db 不存在，则不会发生任何事情，并且 pro 应用程序会加载自己的数据库、空白数据（或您可能需要预加载的任何内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T03:51:58.490

为什么您的服务器中没有数据库，并且无论何时安装应用程序（无论是精简版还是专业版）只需从服务器中提取数据库（如果存在，则覆盖存在的数据库），这对您的数据库安全也有好处，因为我可以简单地使用 zip 软件浏览 apk 文件并获取您的数据库。另一个好处是apk文件的大小会更小，更重要的是它将解决您的问题

# asp.net-mvc-4 - MVC4 Razor 下拉列表与外键绑定

> ID：14049098
> 
> 赞同：3
> 
> 时间：2012-12-27T03:43:46.173
> 
> 标签：asp.net-mvc-4, ef-code-first, foreign-keys, html.dropdownlistfor

所以我想有更深入的了解。我在 MVC4 上的 MSFT 教程中添加了更多功能，您可以在此处找到 ( [http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to -aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4) )

模型非常简单。你有电影和导演。每部电影最多有1位导演。

我希望用户能够从下拉列表中为电影分配导演并保存它，但不知何故，电影在数据库中以空 Director_ID 字段保存。

这是我的简单模型：

```
public class Movie
{
    public int ID { get; set; }
    [Required]
    public string Title { get; set; }
    public DateTime ReleaseDate { get; set; }
    [Required]        
    public string Genre { get; set; }
    public decimal Price { get; set; }        
    public string Ranking { get; set; }
    public Director Director { get; set; }        
}

public class Director
{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

生成电影表时，它带有 Director_ID 字段。甜的！

我希望用户在编辑电影时从下拉列表中选择导演，因此在电影编辑视图中，我设法将下拉列表绑定到从数据库获得的所有导演列表

```
 <div class="editor-field">
        @Html.DropDownListFor(model => model.Director.ID, ViewBag.Directors as List<SelectListItem>, "All")            
    </div> 
```

控制器：

```
 //GET
    public ActionResult Edit(int id = 0)
    {
        var DirectorsList = new List<SelectListItem>();

        var DirQuery = from d in db.Directors select d;
        foreach (var d in DirQuery)
        {
            DirectorsList.Add(new SelectListItem { Value = d.ID.ToString(), Text = d.Name });
        }
        ViewBag.Directors = DirectorsList;

        Movie movie = db.Movies.Find(id);
        if (movie == null)
        {
            return HttpNotFound();
        }
        return View(movie);
    } 
```

我在下拉列表中获得了所有董事的名单。好的！

现在当我保存电影时：

```
 [HttpPost]
    public ActionResult Edit(Movie movie)
    {
        if (ModelState.IsValid)
        {
            movie.Director = db.Directors.Find(movie.Director.ID); 
            db.Entry(movie).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(movie);
    } 
```

Edit 方法接收的参数电影带有一个 Director 属性（正如我在模型中指定的那样），当我浏览它时，我看到了两个属性 form director：“ID”：它带有用户选择表单的正确值下拉菜单和“名称”：设置为空。正如您在代码中看到的，我从数据库中选择与下拉值匹配的整个导向器对象并保存它

问题是在保存电影时，电影表 (Director_ID) 上的外键永远不会更新。

我究竟做错了什么？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T08:29:42.430

将 Director 的 ID 作为模型的一部分，例如

```
public class Movie
{
    public int ID { get; set; }
    [Required]
    public string Title { get; set; }
    public DateTime ReleaseDate { get; set; }
    ...
    public int DirectorId { get; set; } 

    public virtual Director Director { get; set; }    
 } 
```

然后在你的控制器中：

```
//GET
public ActionResult Edit(int id = 0)
{
    Movie movie = db.Movies.Find(id);
    if (movie == null)
    {
        return HttpNotFound();
    }

    ViewBag.DirectorId = new SelectList(db.Directors, "DirectorId", "Name", movie.DirectorId);
    ...
} 
```

在您看来：

```
<h2>Edit</h2>

@using (Html.BeginForm()) {
   @Html.ValidationSummary(true)

<fieldset>
    <legend>Movie</legend>
    ...
    <div class="editor-label">
        @Html.LabelFor(model => model.DirectorId, "Director")
    </div>
    <div class="editor-field">
        @Html.DropDownList("DirectorId", String.Empty)
        @Html.ValidationMessageFor(model => model.DirectorId)
    </div>
    ... 
```

# ruby-on-rails - Ruby on Rails 与新视图和编辑视图之间的 _form 冲突

> ID：14049102
> 
> 赞同：0
> 
> 时间：2012-12-27T03:43:58.967
> 
> 标签：ruby-on-rails, drop-down-menu

这是我的问题。假设我的域由两个模型组成，工厂和工人。现在，当用户在 _form 视图中创建 Worker 时，他们必须选择一个 Factory。为此，提供了一个基于工人状态的工厂列表，并且每当工人的状态发生变化时，下拉列表的内容都会通过 JS 进行更改。这就像一个魅力。

但是，当要编辑用户时，我似乎被卡住了作为填充和自动选择工人工厂的公认方式。似乎对于编辑视图，带有 options_for_select 指定的选择标签是要走的路。不幸的是，这会在添加新 Worker 时破坏我的 _form 视图，因为它们没有我可以填充集合的状态。

TL;DR 我可以使用 JS 在新的 _form 视图中填充下拉列表，相同的范例不适用于编辑 _form，因为我必须根据当前工厂和 Worker 的状态预先填充下拉列表。

任何帮助是极大的赞赏。

编辑：工厂下拉列表由 ajax 查询填充，该查询将选定状态传递给控制器​​以找出处于该状态的工厂。

```
$(document).ready(function(){
  $('.new-contact-select-state select').change(function() {
    var selected_state = $(this).val();
    $.ajax({
      type: 'POST',
      url:  '/factories/get_state_factories.json',
      data: 'state='+selected_state,
      success: function(msg){
  if(msg == 0) {
    //Query returned empty.
    } else {
    //Query Has values.
    var $el = $('.select-state-firm select');
    $el.empty(); // remove old options
    $.each(msg, function(key, value) {
    var firmname = value.firm_name;
    var firm_id = value.id;
    $el.append($("<option></option>").attr("value", firm_id).text(firmname));
}); 
```

在我尚未准备好的控制器中，下拉菜单将由这样的查询填充。

```
@state_factories = Factory.includes(:address).where(:addresses => {:state => state}) 
```

我是一个 Ruby 菜鸟，所以这一切都不会立即奏效，我只是想调和创建视图和编辑视图之间下拉列表的数据填充差异。我可能最终只创建了两个_forms。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:46:37.263

我知道问题是在创建新工作人员时呈现工作人员表单时出现错误，因为新工作人员没有可以根据该状态预先填充下拉列表的状态。

如果这是问题所在，那么您可以使用它`@worker.new_record?`来测试是否`@worker`是新记录，如果是，那么您可以呈现工厂选择框，除了告诉用户首先选择一个状态的提示之外没有任何选项。

# javascript - 与Node.js长连接，如何减少内存使用和防止内存泄漏？也与 V8 和 webkit-devtools 相关

> ID：14049109
> 
> 赞同：48
> 
> 时间：2012-12-27T03:44:48.693
> 
> 标签：javascript, linux, node.js, sockets, tcp

这是我正在尝试做的事情：我正在开发一个 Node.js http 服务器，它将保持长连接，以便在一台机器上从数万个移动客户端推送目的（与 redis 协作）。

测试环境：

```
1.80GHz*2 CPU/2GB RAM/Unbuntu12.04/Node.js 0.8.16 
```

第一次，我使用“express”模块，在使用交换之前我可以达到大约 120k 的并发连接，这意味着 RAM 是不够的。然后，我切换到原生“http”模块，并发量达到了 160k 左右。但是我意识到原生http模块中还有太多我不需要的功能，所以我将它切换到原生“net”模块（这意味着我需要自己处理http协议，但没关系）。现在，我可以达到每台机器大约 250k 的并发连接。

这是我的代码的主要结构：

```
var net = require('net');
var redis = require('redis');

var pendingClients = {};

var redisClient = redis.createClient(26379, 'localhost');
redisClient.on('message', function (channel, message) {
    var client = pendingClients[channel];
    if (client) {
        client.res.write(message);
    }
});

var server = net.createServer(function (socket) {
    var buffer = '';
    socket.setEncoding('utf-8');
    socket.on('data', onData);

    function onData(chunk) {
        buffer += chunk;
        // Parse request data.
        // ...

        if ('I have got all I need') {
            socket.removeListener('data', onData);

            var req = {
                clientId: 'whatever'
            };
            var res = new ServerResponse(socket);
            server.emit('request', req, res);
        }  
    }
});

server.on('request', function (req, res) {
    if (res.socket.destroyed) {            
        return;
    }

    pendingClinets[req.clientId] = {
        res: res
    };

    redisClient.subscribe(req.clientId);

    res.socket.on('error', function (err) {
        console.log(err);
    });

    res.socket.on('close', function () {
        delete pendingClients[req.clientId];

        redisClient.unsubscribe(req.clientId);
    });
});

server.listen(3000);

function ServerResponse(socket) {
    this.socket = socket;
}
ServerResponse.prototype.write = function(data) {
    this.socket.write(data);
} 
```

最后，这是我的问题：

1.  如何减少内存使用量以进一步提高并发性？

2.  我真的很困惑如何计算 Node.js 进程的内存使用量。我知道由 Chrome V8 提供支持的 Node.js，有**process.memoryUsage()** api，它返回三个值：rss/heapTotal/heapUsed，它们之间有什么区别，我应该更关注哪一部分，以及它们的确切组成是什么Node.js 进程使用的内存？

3.  即使我做了一些测试并且似乎没有问题，我也担心内存泄漏。有什么我应该关注的问题或任何建议吗？

4.  我找到了一个关于[V8 **hidden class**](https://developers.google.com/v8/design?hl=en#prop_access)的文档，正如它所描述的那样，这是否意味着每当我像上面的代码一样向我的全局对象**pendingClients添加一个由****clientId**命名的属性时，都会生成一个新的隐藏类？剂量是否会导致内存泄漏？

***   我使用[webkit-devtools-agent](https://github.com/c4milo/node-webkit-agent)来分析 Node.js 进程的堆映射。我开始这个过程并拍摄了一个堆快照，然后我向它发送了 10k 个请求并稍后断开它们，之后我再次拍摄了一个堆快照。我使用**比较**视角来查看这两个快照之间的差异。这是我得到的： ![在此处输入图像描述](../Images/70396623cb081d11831db8ad230d12c4.png) 有人可以解释一下吗？(array)/(compiled code)/(string)/Command/Array 的数量和大小增加了很多，这是什么意思？** 

 ****编辑**：我是如何运行加载测试的？
1\. 首先，我修改了服务端和客户端的一些参数（要实现60k以上的并发需要多台客户端，因为一台机器最多只有60k+端口（以16位表示））<br> 1.1\. 服务器和客户端机器之一，我修改了文件描述符，在将运行测试程序的 shell 中使用这些命令：

```
ulimit -Hn 999999
ulimit -Sn 999999 
```

1.2\. 在服务器机器上，我也修改了一些net/tcp相关的内核参数，最重要的是：

```
net.ipv4.tcp_mem = 786432 1048576 26777216
net.ipv4.tcp_rmem = 4096 16384 33554432
net.ipv4.tcp_wmem = 4096 16384 33554432 
```

1.3\. 至于客户端机器：

```
net.ipv4.ip_local_port_range = 1024 65535 
```

2\. 其次，我使用Node.js编写了一个自定义的模拟客户端程序，因为大多数负载测试工具，ab，siege等都是短连接，但我使用长连接并且有一些特殊要求。
3\. 然后我在一台机器上启动服务器程序，在另外三台分开的机器上启动三个客户端程序。

**编辑**：我确实在单台机器（2GB RAM）上达到了 250k 并发连接，但事实证明，这不是很有意义和实用。因为当连接连接时，我只是让连接挂起，没有别的。当我尝试向他们发送响应时，并发数下降到 150k 左右。正如我计算的那样，每个连接的内存使用量增加了大约 4KB，我猜这与我设置为**4096 16384 33554432的****net.ipv4.tcp_wmem**有关，但即使我将其修改为更小，也没有任何改变。我不知道为什么。

 ****编辑**：实际上，现在我对每个 tcp 连接使用多少内存以及单个连接使用的内存的确切组成更感兴趣？根据我的测试数据：

> 150k 并发消耗大约 1800M RAM（来自**free -m**输出），Node.js 进程大约有 600M RSS

然后，我假设：

> *   (1800M - 600M) / 150k = 8k，这是单个连接的内核TCP栈内存使用量，它由两部分组成：读缓冲区（4KB）+写缓冲区（4KB）（其实这个和我的设置不符上面的**net.ipv4.tcp_rmem**和**net.ipv4.tcp_wmem**，系统如何确定这些缓冲区使用多少内存？）
>     
>     
> *   600M / 150k = 4k，这是Node.js单个连接的内存使用量

我对吗？如何减少这两个方面的内存使用量？

如果有什么地方我没有描述好，请告诉我，我会完善它！任何解释或建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T18:42:20.463

1.  我认为您不应该担心进一步减少内存使用量。从您包含的读数来看，您似乎非常接近可以想象的最低限度（我将其解释为以字节为单位，这是未指定单位时的标准）。

2.  这是一个比我能回答的更深入的问题，但这就是[RSS](http://en.wikipedia.org/wiki/Resident_set_size)。据我所知，堆是 unix 系统中动态分配内存的来源。因此，堆总数似乎是在堆上分配给您使用的所有内容，而使用的堆是您已使用的分配量。

3.  您的内存使用情况非常好，而且看起来您实际上并没有泄漏。我还不会担心。=]

4.  不知道。

5.  这个快照似乎是合理的。我预计由于请求激增而创建的一些对象已被垃圾收集，而其他对象则没有。您会看到没有超过 10k 个对象，而且这些对象中的大多数都非常小。我称之为好。

不过，更重要的是，我想知道您是如何对此进行负载测试的。我以前尝试过像这样进行大规模负载测试，但由于打开文件描述符数量的限制（默认情况下每个进程通常大约一千个），大多数工具根本无法在 linux 上生成这种负载）。同样，一旦使用了套接字，它就不能立即再次使用。我记得，它需要一分钟的时间才能再次使用。在这一点和我通常看到系统广泛打开的文件描述符限制设置在 100k 以下的事实之间，我不确定是否有可能在未修改的盒子上接收这么多负载，或者在单个盒子上生成它。由于您没有提及任何此类步骤，我认为您可能还需要调查您的负载测试，以确保它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T20:57:51.217

只是一些注意事项：

您是否需要将 res 包装在对象 {res: res} 中，您可以直接分配它吗

```
pendingClinets[req.clientId] = res; 
```

**编辑**另一个可能有帮助的〜微优化

```
server.emit('request', req, res); 
```

将两个参数传递给“请求”，但您的请求处理程序实际上只需要响应“res”。

```
res['clientId'] = 'whatever';
server.emit('request', res); 
```

虽然您的实际数据量保持不变，但在“请求”处理程序参数列表中少 1 个参数将为您节省一个引用指针（几个字节）。但是当您处理数十万个连接时，几个字节可以加起来。您还将节省处理发出调用的额外参数的次要 CPU 开销。****

# .net - 正则表达式模式在 VB.NET 中无法正常工作

> ID：14049111
> 
> 赞同：1
> 
> 时间：2012-12-27T03:45:06.833
> 
> 标签：.net, regex, vb.net, winforms

**简短版本：我正在尝试构建正则表达式以找出字符串是否包含“0,0,0,0”。我所做的每一次尝试都只返回每个字符作为匹配项，而不是引号内的完整字符串。**

我试图在[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)的文本框内的字符串中查找某些文本。我的问题是，它不是返回一个匹配项，而是将字符串中的每个字符作为匹配项返回。现在通常我会认为这是我的正则表达式的问题，但由于我已经验证它应该可以使用几个在线工具，所以我不能 100% 确定。

我要匹配的字符串是：

```
0,0,0,0 
```

我试图在其中找到匹配项的字符串如下所示：

```
Image(0,0,0,0,"Path") 
```

我正在使用一个名为 FastColoredTextBox 的控件，它允许为特定字符串设置颜色样式和其他自定义样式的范围。下面是我通常如何添加样式范围。

目前，我已经添加了使单词可点击的功能，因此我试图让正则表达式为我想要使其可点击的字符串构建匹配项。例如：

这是正则表达式。

```
Private Sub tb_textchanged(ByVal sender As System.Object, ByVal e As TextChangedEventArgs)

    ' This is working code to make the word Path clickable in the above string:
    e.ChangedRange.SetStyle(ellipseStyle, "\bPath\b", RegexOptions.IgnoreCase)

    ' When I use these ones it returns each character as a match and not the full string. The mystery...
    e.ChangedRange.SetStyle(ellipseStyle, "0,0,0,0", RegexOptions.IgnoreCase)

    e.ChangedRange.SetStyle(ellipseStyle, "(0,){4}", RegexOptions.IgnoreCase)
End Sub 
```

当用户单击使用正则表达式设置为范围的单词时（上面的示例），它使单词可点击。当用户单击单词时，它会选择正则表达式中指定的整个范围。除了这个返回每个“0”和“，”作为它自己的匹配项，因此只返回/选择单个字符。

这是我的代码，用于单击该单词以更好地理解。这不包含正则表达式，上面的 textchanged 事件包含。

```
Private Sub tb_VisualMarkerClick(sender As Object, e As VisualMarkerEventArgs)
    Dim page As RadPageViewPage = RadPageView1.SelectedPage
    Dim txt As FastColoredTextBox = TryCast(page.Controls(0), FastColoredTextBox)
    txt.Invalidate()
    txt.Selection.Start = New Place((TryCast(e.Marker, RangeMarker).range).Start.iChar, (TryCast(e.Marker, RangeMarker).range).Start.iLine)
    txt.SelectionLength = (TryCast(e.Marker, RangeMarker).range).Text.Length
    Dim ClickedWord As String = (TryCast(e.Marker, RangeMarker).range.Text)
    If ClickedWord = "Path" Then
        Dim ofd As New OpenFileDialog
        ofd.FileName = ""
        ofd.Filter = "Image Files (*.bmp, *.jpg)|*.bmp;*.jpg"
        If ofd.ShowDialog = DialogResult.OK Then

            txt.InsertText(ofd.FileName)
        End If
    ElseIf ClickedWord = "0,0,0,0" Then
        'What I am going to do when found.
    End If
End Sub 
```

很抱歉这篇冗长的帖子，我只是希望有人能帮助我解开我的谜团。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:52:26.073

I have used *[My Regex Tester](http://www.myregextester.com/index.php)*. The code generated is:

```
Imports System.Text.RegularExpressions
Module Module1
    Sub Main()
        Dim sourcestring As String = "Replace with your source string"
        Dim re As Regex = New Regex("(0,){4}", RegexOptions.IgnoreCase)
        Dim mc As MatchCollection = re.Matches(sourcestring)
        Dim mIdx As Integer = 0
        For Each m As Match In mc
            For groupIdx As Integer = 0 To m.Groups.Count - 1
                Console.WriteLine("[{0}][{1}] = {2}", _
                                  mIdx, _
                                  re.GetGroupNames(groupIdx), _
                                  m.Groups(groupIdx).Value)
            Next
            mIdx = mIdx + 1
        Next
    End Sub
End Module 
```

Input text:

```
Image(0,0,0,0,"Path") 
```

Output Result:

```
[0][0] = 0,0,0,0,
[0][1] = 0, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:48:42.557

我不明白你想做什么。

要检查字符串是否包含模式，例如 0,0,0,0，您可以使用以下命令：

```
string input = "Image(0,0,0,0,\"Path\")";
string pattern = "0,0,0,0";
Regex regex = new Regex(pattern, RegexOptions.IgnoreCase);

Console.WriteLine(input.Contains(pattern)); //true
Console.WriteLine(regex.IsMatch(input)); //true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:28:23.847

查看此控制台应用程序。

```
class Program
{
    static void Main(string[] args)
    {
        string sPattern = "0,0,0,0";
        string s = "i am looking for  0,0,0,0";

        if (System.Text.RegularExpressions.Regex.IsMatch(
                s, sPattern, System.Text.RegularExpressions.RegexOptions.IgnoreCase))
        {
            System.Console.WriteLine("  (match for '{0}' found)", sPattern);
        }
        else
        {
            System.Console.WriteLine();
        }
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:01:17.587

我没有`RegEx`在您提供的代码块中了解您的使用方式。试试下面的语法（它在 C# 中）。

```
System.Text.RegularExpressions.Regex.Split("Input string", "([0.]+)") 
```

# bash - 如何在shell中按周和按月扩展日期？

> ID：14049112
> 
> 赞同：3
> 
> 时间：2012-12-27T03:45:20.207
> 
> 标签：bash, shell, date, sh

简而言之，我想要这样的东西：

1.  当我输入一个日期`2012-12-27`并希望按周扩展日期（从星期一开始）时，它输出：`2012-12-24,2012-12-25,2012-12-26,2012-12-27,2012-12-28,2012-12-29,2012-12-30`
2.  当我输入一个日期`2012-12-27`并希望按月扩展日期时，它会输出：`2012-12-01,2012-12-02 ... 2012-12-31`

或者，如何按周对一组日期进行分组？例如，当我输入`2012-12-01,2012-12-02 ... 2012-12-31`. 它输出：`2012-12-01,2012-12-02|2012-12-03 ... 2012-12-09|2012-12-10 ... 2012-12-16|...|2012-12-31`

我不知道如何完成这个，任何线索可能会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:27:13.693

```
DAYSECS=86400                          # seconds in a day
WEEKSECS=604800

echo "Expand on week:"

g_epoch=$(date +"%s" -d $1)            # given date as seconds from epoch
g_dayno=$(date +"%u" -d $1)            # given date as day of week
g_month=$(date +"%m" -d $1)            # given month
g_year=$(date +"%Y" -d $1)             # given year

s_epoch=$(($g_epoch - $DAYSECS * ($g_dayno - 1)))
e_epoch=$(($s_epoch + $WEEKSECS))
for etime in $(seq $s_epoch $DAYSECS $e_epoch); do
  date +"%Y-%m-%d" -d "@$etime"
done

echo "Expand on month:"

s_epoch=$(date +"%s" -d "$g_year-$g_month-01")
e_epoch=$(($s_epoch + 4 * $WEEKSECS))
for etime in $(seq $s_epoch $DAYSECS $e_epoch); do
  if [ $(date +"%m" -d "@$etime") -ne "$g_month" ]; then
    break;
  fi  
  date +"%Y-%m-%d" -d "@$etime"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:29:13.347

下面的脚本来自@perreal，我把它留在这里是因为：

1.  它显示了 GNU date 的强大功能。
2.  它使@perreal 的想法更加清晰和普遍。

谢谢你，佩雷亚尔！这里是

```
dd="2012-12-27"  # test date
DAYSECS=86400    # seconds in a day

echo "expand by week:"
s_epoch=$(date +%s -d "$dd -$(($(date +%u -d $dd) - 1)) day")                  # start date of the week
e_epoch=$(date +%s -d "1970-01-01 00:00:00 +0000 +${s_epoch} seconds +6 days")   # end date of the week
for etime in $(seq $s_epoch $DAYSECS $e_epoch); do
  date +"%Y-%m-%d" -d "@$etime";
done

echo "expand by month:"
s_epoch=$(date +%s -d "$dd -$(($(date +%d -d $dd) - 1)) day")                           # start date of the month
e_epoch=$(date +%s -d "1970-01-01 00:00:00 +0000 +${s_epoch} seconds +1 month -1 day")  # end date of the month
for etime in $(seq $s_epoch $DAYSECS $e_epoch); do
  date +"%Y-%m-%d" -d "@$etime";
done 
```

# javascript - 使用javascript从动态表单中删除表中的行

> ID：14049115
> 
> 赞同：1
> 
> 时间：2012-12-27T03:45:41.170
> 
> 标签：javascript, jquery, html, dynamic-forms

我想从使用动态表单创建的表中删除任何行，因此单击“添加”按钮时可以自动增加表的行数。我想从表中删除任何行。行数为1时删除该行，键不出现，但行数多于1时，会出现任意行的删除按钮。我已经制作了 html 和 javascript。

```
 <table class="table table-striped area-table tabel-form-makanan">
                <thead>
                    <tr>
                        <th>Nama Makanan</th>
                        <th>Jenis Makanan</th>
                        <th>Harga Makanan</th>                            
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <input type="text" name="nama-makanan[]" style="height: 30px; width: 300px;" class="nama-makanan" placeholder="ketikkan nama makanan"/>
                            <input type="hidden" name="id-makanan[]" class="id-makanan"/>
                        </td>
                        <td>
                            <input type="text" readonly name="nama-jenis-makanan[]" style="height: 30px; width: 300px;" class="nama-jenis-makanan" placeholder="nama jenis makanan"/>
                        </td>
                        <td>
                            <input type="text" readonly name="harga-makanan[]" style="height: 30px; width: 300px;" class="harga-makanan" placeholder="harga satuan makanan"/>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button class="btn tombol-reset-makanan" style="float: right;">Reset</button>
            <button class="btn btn-primary tombol-tambah-makanan" type="button" style="float: right; margin-right: 10px;">Tambah</button> 
```

和这个 javascript (jquery)

```
 $('.tombol-tambah-makanan').on('click', function(){
        var tr = '<tr>\n\
                    <td><input type="text" name="nama-makanan[]" style="height: 30px; width: 300px;" class="nama-makanan" placeholder="ketikkan nama makanan"/><input type="hidden" name="id-makanan[]" class="id-makanan"/></td>\n\
                    <td><input type="text" readonly name="nama-jenis-makanan[]" style="height: 30px; width: 300px;" class="nama-jenis-makanan" placeholder="nama jenis makanan"/></td>\n\
                    <td><input type="text" readonly name="harga-makanan[]" style="height: 30px; width: 300px;" class="harga-makanan" placeholder="harga satuan makanan"/></td>\n\
                </tr>';
        $("table.tabel-form-makanan tbody").append(tr);                  
    });

    $('.tombol-reset-makanan').on('click', function(){
        $('table.tabel-form-makanan tbody tr:not(:first)').remove();
    }); 
```

如何使用动态表单删除表格的任何行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:10:18.883

用于`on()`为动态添加的元素委托点击处理程序

```
$('.tabel-form-makanan').on( 'click', '.deleteButtonClass', function(){

   $(this).closest('tr').remove()
}) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T03:57:22.733

尝试

```
 $(document).on('click','.deleteButtonClass', function(){
        $('table.tabel-form-makanan tbody tr:not(:first)').remove();
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T04:02:05.077

这将允许您删除任何行

[http://jsfiddle.net/KRacz/](http://jsfiddle.net/KRacz/)

```
$("table.tabel-form-makanan tbody").find("button").on('click', function() {
      $(this).parent().parent().remove();
}); 
```

# jquery - 从服务器生成的成功显示消息上的 jquery 表单

> ID：14049117
> 
> 赞同：0
> 
> 时间：2012-12-27T03:45:53.403
> 
> 标签：jquery

我有

```
<div id="infoMessage" class="infoMessage"><?php echo $message;?></div> 
```

$message 将在 POST 时从服务器生成。

如果我想在 ajax 成功后显示 infoMessage 我该怎么做

```
 $.ajax({
   type: "POST",
   url: "the/form",
   data: $(\'.target\').serialize(),
   success: function() {
    alert("done");
    // how to show the infoMessage ?
    }
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:47:07.480

```
 $.ajax({
   type: "POST",
   url: "the/form",
   data: $(\'.target\').serialize(),
   success: function(data) { // data is a callback variable which stores info echoed in PHP file during transfer, so you have to $message there to get it here
    alert(data); // this will alert it
    }
  }); 
```

在这里，您可以使用任何变量而不是函数（数据）来存储 AJAX 响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T03:48:16.413

尝试使用以下代码而不是您拥有的代码。

```
$.ajax({
   type: "POST",
   url: "the/form",
   data: $(\'.target\').serialize(),
   success: function(data) {
    alert(data); //data contains the ajax response
    $("#infoMessage").html(data); //you set here where to ajax response will be displayed
    }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:49:01.180

```
$.ajax({
   type: "POST",
   url: "the/form",
   data: $(\'.target\').serialize(),
   success: function(data) {
    //alert("done");
    $('#infoMessage').html(data);
    }
  }); 
```

您必须在 ajax 文件（/表单）中回显消息

# node.js - 如何使猫鼬连接优雅地失败

> ID：14049118
> 
> 赞同：4
> 
> 时间：2012-12-27T03:45:55.120
> 
> 标签：node.js, mongodb, mongoose

当我的 Node 应用程序启动时，它会尝试像这样连接到数据库：

```
var db = mongoose.connect('mongodb://what:ever.com:1234/database', function(err) {
    if(err) console.log('MongoDB: connection error -> ' + err);
    else console.log('MongoDB: successfully connected');
}); 
```

当它失败时，我得到一个完全符合我预期的错误，但我的 Node 应用程序终止了。当连接返回错误时，如何让节点应用程序继续运行？

有人可以为我指出长期运行应用程序的 Mongoose 最佳实践的方向吗？我知道 Mongoose 的重试连接标志默认设置为 true，但我还应该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T04:39:31.233

嘿，有趣的是，你应该问这个问题。我几分钟前才写这个。我正在使用咖啡脚本变体，但它看起来是这样的。我还在使用colors.js 在控制台上提供漂亮的彩色反馈，但除此之外，这应该很好地捕捉到您的数据库错误而不会消失。

让我先说我不是专家，我几周前才开始学习这个。

```
mongoose = require "mongoose"
db_address = "localhost/nodesample-dev"

mongoose.connection.on "open", (ref) ->
  console.log "Connected to mongo server!".green

mongoose.connection.on "error", (err) ->
  console.log "Could not connect to mongo server!".yellow
  console.log err.message.red

try
  mongoose.connect("mongodb://#{db_address}")
  db = mongoose.connection
  console.log "Started connection on " + "mongodb://#{db_address}".cyan + ", waiting for it to open...".grey

catch err
  console.log "Setting up failed to connect to #{db_address}".red, err.message 
```

这是在编译的 JS 中：

```
var db, db_address, mongoose;
mongoose = require("mongoose");
db_address = "localhost/nodesample-dev";

mongoose.connection.on("open", function(ref) {
  return console.log("Connected to mongo server!".green);
});

mongoose.connection.on("error", function(err) {
  console.log("Could not connect to mongo server!".yellow);
  return console.log(err.message.red);
});

try {
  mongoose.connect("mongodb://" + db_address);
  db = mongoose.connection;
  console.log("Started connection on " + ("mongodb://" + db_address).cyan + ", waiting for it to open...".grey);
} catch (err) {
  console.log(("Setting up failed to connect to " + db_address).red, err.message);
} 
```

# c - C函数参数列表中的`...`参数是什么意思

> ID：14049119
> 
> 赞同：6
> 
> 时间：2012-12-27T03:45:59.907
> 
> 标签：c, function-parameter

> **可能重复：**
> [C/C++：传递可变数量的参数](https://stackoverflow.com/questions/205529/c-c-passing-variable-number-of-arguments-around)

按函数声明方式

`return-type function-name(parameter-list, ...) {body ...}`

下面的代码是一种重载吗？

（在 A_FILE.h 中）

`typedef VOID *FUNCTION(UINTN Number, ...);`

似乎我可以只将一个`Number`参数或多个参数传递给`FUNCTION`函数，那么参数的数量是否取决于函数的实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T03:55:23.527

*函数声明*中的省略号意味着它将接受许多参数，否则在运行时未知的变量参数，通过使用标准头文件`stdarg.h`，该头文件'stdarg.h'中的各个函数可以确定什么每个可变参数都构成传递给函数的参数。

考虑这个代码示例：

```
#define PANIC_BUF_LEN 256
void panic(const char *fmt, ...){
    char buf[PANIC_BUF_LEN];
    va_list argptr;
    va_start(argptr, fmt);
    vsprintf(buf, fmt, argptr);
    va_end(argptr);
    fprintf(stderr, buf);
    exit(errcode);
} 
```

典型的调用可以是示例之一：

```
panic("Error: %s failed! Due to unknown error, message is '%s'\n", "my_function", "Disk not ready"); 
```

将以这种方式在控制台上产生输出：

```
Error: my_function failed! Due to unknown error, message is 'Disk not ready' 
```

请注意函数的用法，`va_start(...)`更不用说`va_end(...)`在*提供*`vsprintf(...)`的“未知”参数中填充空白了，这些参数被初始化为*指向**在运行时未知*的变量**参数**。 *`va_list`*

 *******编辑：**只是为了强调，调用**假定**C 字符串格式形式的字符串参数小于`PANIC_BUF_LEN`上面**示例**中表示的最大大小，除了挑剔之外，这是为了说明函数如何接受使用的标准 C 格式字符串的数量，例如，可以`%d`在字符串格式中指定一个，并期望 a`int`与参数匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T04:20:45.820

它不是 C++ 意义上的重载，但它可以用于类似的效果。表示该`...`函数在命名参数之后接受任意数量的附加参数（必须至少有一个命名参数），并且*附加参数可以具有任何类型*（某种）。¹ 此类函数的实现必须能够在运行时推断其附加参数的数量和类型。例如，`printf`可以一次打印任何内置类型和任意数量的东西，但您必须以`%`与实际参数相对应的格式字符串为其提供代码。

用于模拟 C++ 风格重载的变量参数的一个值得注意的例子是[`open`](http://linux.die.net/man/2/open)系统调用，在 C++ 术语中它有两个重载：

```
int open(const char *pathname, int flags);
int open(const char *pathname, int flags, mode_t mode); 
```

并且手册页是这样写的，但是如果您查看一下，`<fcntl.h>`您会发现实际的声明是

```
int open(const char *, int, ...); 
```

如果在标志中设置了该位，则该实现仅查看第三个参数`O_CREAT`，并且记录了如果设置该位，则*必须提供第三个参数。*与 C 语言中的往常一样，如果你做错了，编译器会高兴地看着它在运行时对你造成影响。

¹由于称为“[默认参数提升](https://stackoverflow.com/questions/1255775/default-argument-promotions-in-c-function-calls)”的残留语言功能，当作为附加参数传递给采用可变数量参数的函数时，一些数字类型会变成其他更大的数字类型。如果您正在编写此类函数的主体，您只需要担心这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:59:16.743

不，“...”表示可变参数。

重载是当编译器混合名称以产生具有不同参数集的多个函数时。在 C 中，函数名称不会混合，但函数可以接受 1 个或多个参数。*****

# php - 使用 PHP 和 PDO 操作 MySQL 数据

> ID：14049121
> 
> 赞同：0
> 
> 时间：2012-12-27T03:46:24.777
> 
> 标签：php, mysql, pdo

我正在使用 PHP PDO 和 MySQL，并希望像这样转换 MySQL 表：

```
|Listing ID | Image ID |
|  1234     |     1    |
|  1234     |     2    |
|  1234     |     3    |
|  1235     |     1    |
|  1235     |     2    | 
```

进入一个像下面这样的 PHP 数组，我可以使用 PDO 解析并插入另一个 MySQL 表。

```
[url/path/1234-1:::url/path/1234-2:::url/path/1234-3, url/path/1235-1:::url/path/1234-2] 
```

这是我到目前为止编写的代码。我认为 while 循环的工作方式存在问题，因为它只获取第一个列表字符串并导致无限循环。

```
//Set folder path
$target_path = realpath($_SERVER['DOCUMENT_ROOT']). "\path\uploads\\";

//Query to download all listing IDs in Markers table 
$query = $db->query("SELECT * FROM image");
$row = $query->fetch(PDO::FETCH_ASSOC);
while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
$temp = $target_path.$row['L_ListingID']."-".$row['L_ImageID'].".jpg";
   //ListingID equals ListingID, append to array
   $LI = substr($temp, 40, 8);
   while($LI = $LI) {
    $temp = $temp.":::".$temp;
    echo $temp;
   }
} 
```

这是一个无限循环的输出。请注意，它从表中的第二项开始并挂在那里：

```
C:\path\uploads\40532208-2.jpg:::C:\path\uploads\40532208-2.jpgC:\C:\path\uploads\40532208-2.jpg...ad infinitum 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:58:51.957

`while($LI = $LI)`导致无限循环。

我想这就是你想要的

```
$target_path = realpath($_SERVER['DOCUMENT_ROOT']). "\path\uploads\\";
$query = $db->query("SELECT * FROM image");
while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
   $temp[] = $row;
}
foreach($temp as $i=>$v){
    $line = $v['L_ListingID']."-".$v['L_ImageID'].".jpg";
    $prod[] = $line.($temp[$i] == $temp[$i+1])?":::":",";
}

echo trim(implode($prod),","); 
```

代码没有经过测试，但我认为方向就像那里一样。

# c# - 如何将常规文本附加到已经与其文本属性绑定的 TextBlock？

> ID：14049122
> 
> 赞同：7
> 
> 时间：2012-12-27T03:46:40.377
> 
> 标签：c#, .net, wpf, xaml, microsoft-metro

我有一个文本块：

```
<TextBlock x:Name="someText" Text="{Binding ElementName=theList, Path=SelectedItem.Name, Mode=TwoWay}" /> 
```

如您所见，它绑定到另一个元素的选定项。现在，让我们假设，例如，所选项目说“你好，”。而且我想将我的名字附加到它（在 XAML 中，而不是代码隐藏中），以便它看起来像：“你好，箭头。”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T04:09:57.947

尝试这个：

```
<TextBlock x:Name="someText" TextWrapping="NoWrap">             
   <Run Text="{Binding ElementName=theList, Path=SelectedItem, Mode=TwoWay}" />
   <Run Text=" Arrow." />
</TextBlock> 
```

Metro XAML 上尚不可用的 XAML 解决方案：

您可以使用[StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)：

```
<TextBlock x:Name="someText" Text="{Binding ElementName=theList, Path=SelectedItem, Mode=TwoWay, StringFormat={}{0} Arrow.}" /> 
```

您也可以使用 MultiBinding 和[StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)：

```
<TextBlock>
     <TextBlock.Text>
          <MultiBinding StringFormat="{}{0} Arrow.">
               <Binding ElementName="theList" Path="SelectedItem.Name" />                    
          </MultiBinding>
     </TextBlock.Text>
</TextBlock> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T03:54:53.320

使用此配置，您唯一能做的就是在所选项目中包含该文本。所以，我推荐的是更多类似这些方面的东西：

```
<StackPanel Orientation="Horizontal">
    <TextBlock x:Name="someText"
        Text="{Binding ElementName=theList,
                       Path=SelectedItem.Name,
                       Mode=TwoWay}" />
    <TextBlock x:Name="suffixText"/>
</StackPanel> 
```

使用此配置，您可以提供所需的`suffixText`任何方式并获得所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:57:28.523

您需要为此创建一个连接两个字符串的 MultiValueConverter。您可以将这些字符串从 xaml 传递给转换器。更多详情见[文章](http://www.codeproject.com/Articles/328978/Introduction-to-multi-binding-and-multi-value-conv)

# matrix - 系列中的第 n 个数字是多少？

> ID：14049123
> 
> 赞同：0
> 
> 时间：2012-12-27T03:46:42.113
> 
> 标签：matrix, logic, series

考虑这个系列：

```
2 6 20 70 252 … 
```

现在考虑矩阵

```
1   1   1   1   1   1   …
1   2   3   4   5   6   …
1   3   6   10  15  21  …
1   4   10  20  35  56  …
1   5   15  35  70  126 …
1   6   21  56  126 252 …
… 
```

*   这是一个矩阵，可以**在 nXn 矩阵中找到从 (1,1) 到达 (n,n) 的多少种方式（您只能向右或向下移动）？**

*   该系列由矩阵的主要对角线元素组成

> 如何在没有矩阵的情况下生成系列中的第 n 个数字

有生成功能吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:52:53.790

对角线是中心二项式系数，具有封闭方程：C(2*n,n) = (2*n)!/(n!)^2

更多信息可以在这里找到：http: [//oeis.org/A000984](http://oeis.org/A000984)

# iphone - 如何使用陀螺仪使“彩弹”停留在增强现实应用程序中的位置？

> ID：14049124
> 
> 赞同：3
> 
> 时间：2012-12-27T03:46:55.243
> 
> 标签：iphone, ipad, augmented-reality

当我“射击”彩弹并撞击时，我需要撞击保持在它击中的相同相对位置。我意识到我必须指定某种距离因子才能使其正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T04:26:28.863

For augmented reality, you generally need azimuth and elevation. That can be found by using trigonometry to figure out the angles between your device and the target.

[http://www.invasivecode.com/blog/archives/1435](http://www.invasivecode.com/blog/archives/1435)

There is a simple set of code that shows how to do that. Now the big problem, which you mentioned was figuring out the distance. You could do a preset distance and figure out your azimuth and elevation that way, or another way it's possible to do would be take a picture and track the movement of that point, but that would be a bit more difficult.

There are some development kits that offer that sort of feature, of tracking a marker in the view, but I don't have experience implementing anything like that. Here is an example using Unity3D

[http://www.slideshare.net/aquarioverde/introduction-to-ar-with-unity3d](http://www.slideshare.net/aquarioverde/introduction-to-ar-with-unity3d)

# android - 周围布局的 dispatchTouchEvent 到包含按钮

> ID：14049125
> 
> 赞同：0
> 
> 时间：2012-12-27T03:46:58.693
> 
> 标签：android, onclick, dispatchevent

我有 5 个线性布局，每个包含一个单选按钮和一个 ImageView 以及一些填充。如果用户单击包含单选按钮的线性布局的任何部分，我希望单击单选按钮。为了获得单选按钮的按下状态，我认为从 ontouchlistener 调度触摸事件是最好的方法。

我的问题是如何最好地实现这一点？

这是我尝试手动设置按下状态的一种方法：

```
@Override
public boolean onTouch(View v, MotionEvent arg1) {
            //gets the index of which LinearLayout was touched
    int rb = lArray.indexOf(v);
            // uses this to identify the LinearLayout and RadioButton to control
    LinearLayout l = lArray.get(rb);
    RadioButton r = rbArray.get(rb);

    switch (arg1.getAction()) {
    case MotionEvent.ACTION_DOWN:
        Sy = arg1.getY();
        if (rb != -1) {
            r.setPressed(true);
        }
        break;
    case MotionEvent.ACTION_MOVE:
        My = arg1.getY();
        if (rb != -1 && Math.abs(Sy - My) > l.getHeight() / 2) {
            r.setPressed(false);
        }
        break;
    case MotionEvent.ACTION_UP:
        My = Sy = 0;
        if (rb != -1) {
            if (r.isPressed() && r.isEnabled()) {
                r.performClick();
            }
        }
        for (RadioButton b : rbArray) {
            b.setPressed(false);
        }
        break;
    }
    return true;
}
} 
```

这工作得相当好，但当用户有时将手指从布局中拖出时，会导致 onPressed 状态永久保留的偶尔打嗝。

另一种尝试是这样的：

```
@Override
public boolean onTouch(View v, MotionEvent event) {

    int rb = lArray.indexOf(v);
    RadioButton r = rbArray.get(rb);

        r.dispatchTouchEvent(event);

    return true;
            } 
```

但是，这仅在确实只是单击时才调用 onclick，但如果用户在布局上拖动手指则将其停用。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:21:14.417

如果他们单击线性布局，您是否正在尝试选择（或取消选择）单选按钮？为什么不在布局上设置一个点击监听器，然后以编程方式选择单选按钮？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:54:33.177

如果在按下线性布局时使用，然后在触摸监听器中将单选按钮设置为按下，并且还添加了一个 onclick 监听器。两者一起完美地工作！

# html - 在 Google Chrome 中强制/允许视频缓存

> ID：14049130
> 
> 赞同：5
> 
> 时间：2012-12-27T03:47:33.937
> 
> 标签：html, http, google-chrome

我正在编写一个动态加载视频的网络应用程序（在容器`<video>`内插入标签`<div>`）。
有少量视频反复播放。
假设我有 video1.mp4 和 video2.mp4。脚本将为 video1.mp4 插入一个`<video>`标签（带自动播放）等待一段时间（setTimeout），然后清除`<div>`容器的内容。后来 video2.mp4 得到同样的处理。一段时间后，video1.mp4 再次显示。
我遇到的问题是视频不会被缓存并且每次显示时都会下载。我想避免这种情况。
我已经在视频和包含的 html 页面的 http 响应中尝试了“过期”和“缓存控制”。还尝试将这些作为元添加到包含页面的 html 标头中。
有任何想法吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:45:57.690

也许您应该尝试应用程序缓存： [http](http://html5doctor.com/go-offline-with-application-cache/) ://html5doctor.com/go-offline-with-application-cache/ 并仅缓存视频...

# eclipse - Eclipse C 没有输出，我尝试了这个论坛上的所有解决方案，但没有一个有效

> ID：14049134
> 
> 赞同：1
> 
> 时间：2012-12-27T03:48:04.767
> 
> 标签：eclipse, console, eclipse-cdt, output

在成功构建 C++ hello word 程序后，我的 Eclipse CDT 没有从控制台输出，但它适用于 C。

我整天都在谷歌搜索试图找到解决方案，但它们都不适合我： 1\. 更改工作空间目录 - 我的工作空间位于 D:\workspace，所以我相信“空间问题”不适用于这里。2\. 将 64 位切换到 32 位。是的，我尝试了 Java 64 位 + Eclipse 64 位和 Java 32 位 + Eclipse 32 位。不工作。3\. 我也尝试了 Indigo 包而不是 Juno。问题仍然存在。

这是我当前的环境： 1\. Win 7 64 位 2\. MinGW（最新） 3\. Java 64 位 4\. Eclipse CDT Indigo 64 位

有谁能帮我解决这个问题吗？我整天都在研究这个问题。

谢谢！

# android - 从asynctask android获取字符串

> ID：14049136
> 
> 赞同：1
> 
> 时间：2012-12-27T03:48:57.100
> 
> 标签：android, jsoup, html-parser

如何从 AsyncTask 中获取字符串？我使用 jsoup 从 URL 中检索内容。在下面的例子中，我得到了内容，但我无法将该内容放入 getItembody 字符串中。代码是：

```
 private String content;
    private static final String HTML_HEADER = "<html><body>";
    private static final String HTML_HEADER = "</body></html>";

    private void SetView(){ 
            contentsWebView.loadData(HTML_HEADER + getItemBody(item) + HTML_FOOTER,
            "text/html", "utf-8");
    }      

    private String getItemBody(Item item) {
        String body = "";
        new LoadContent().execute("");
        return body;
    }

    private class LoadContent extends AsyncTask<String, Integer, String> {
        private ProgressDialog Dialog = new ProgressDialog(
                ViewItemActivity.this);

        @Override
        protected String doInBackground(String... params) {
            String url = "http://inet.detik.com/read/2012/12/21/205518/2124977/398/dosen-unibraw-bikin-aplikasi-pengubah-suara-ketulisan";
            Document doc;
            try {
                doc = Jsoup.connect(url).get();
                Elements element = doc.select(".text_detail");

                String content = element.toString();
                Log.v("LogContentView", content);
            } catch (IOException e) {
                e.printStackTrace();
            }

            return content;
        }

        protected void onPreExecute() {
            Dialog.setMessage("loading content...");
            Dialog.show();
        }

        protected void onPostExecute(Void unused) {
            Dialog.dismiss();
        }
    } 
```

我的问题是我希望将 doinbackground 中的字符串内容放入字符串名称为正文的 getItemBody 字符串中，并且我想在对话框关闭后得到结果。当前对话框不会自行关闭，但应该在点击键返回。这是来自 logcat Log.v("LogContentView", content);

```
12-27 10:12:10.979: V/LogContentView(2660): <div class="text_detail">
12-27 10:12:10.979: V/LogContentView(2660):  Malang - Indonesia memang memiliki developer aplikasi handal. Salah satunya dibuktikan Eko Sakti, dosen Universitas Brawijaya yang sukses menciptakan aplikasi di Windows Phone yang mampu membuat catatan tanpa harus menulis.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />Never Write -- demikian nama aplikasi tersebut -- bisa dibilang baru di Indonesia. Kemampuannya adalah mengubah 
12-27 10:12:10.979: V/LogContentView(2660):  <em>speech</em> (ucapan) bahasa Inggris menjadi bentuk teks. 
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />Eko mengaku, ide pembuatan aplikasi ini berawal saat mengikuti program Summer School di Bali yang bentuk pengajarannya menggunakan bahasa Inggris.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />&quot;Waktu itu saya ikut Summer School dan dosen yang mengajar menggunakan bahasa Inggris. Saya mencoba mencatat mungkin karena terlalu cepat berbicaranya, banyak yang tertinggal. Setelah di rumah saya coba buka kembali catatan saya, malah tambah bingung,&quot; cerita Eko kepada wartawan di Universitas Brawijaya, Jumat (21/12/2012).
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />Ditambahkannya, aplikasi Never Write bisa diupload di evernote. Selain itu aplikasi ini juga mempunyai kelebihan di antaranya bisa diakses di segala tempat dengan catatan file aplikasi sudah tersimpan pada perangkat genggam.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />Never Write tidak mempunyai batasan dalam memasukkan jumlah kata. Sehingga bisa digunakan sebagai sub title film yang nantinya bisa diubah dalam bahasa Indonesia.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />Sebagai bukti sahih kehebatannya, aplikasi ini pun sukses meraih gelar dalam kompetisi Nokia Lumia Apps Olympiad yang berlangsung dari pertengahan November 2012 lalu.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />Dalam kompetisi tersebut terdapat 428 developer peserta dari sekitar 40 kampus yang tersebar di seluruh Indonesia.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />Dari semuanya, terpilih 54 finalis dan 20 pemenang, dimana salah satunya adalah Eko Sakti.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />&quot;Salah satu pemilihan juri terhadap inovasi produk saya yaitu karena aplikasi yang saya ciptakan belum ada di pasaran. Penilaian yang lain juga ada pada fungsi atau kegunaan dari produk yang diciptakan,&quot; beber Eko. 
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <em>Nah</em>, setelah menang di ajang pembuatan aplikasi besutan Nokia tersebut, sang vendor asal Finlandia itu pun berencana untuk memasarkan aplikasi ciptaan Eko.
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660):  <br />
12-27 10:12:10.979: V/LogContentView(2660): </div>
12-27 10:12:40.059: V/LogContentView(2660): <div class="text_detail">
12-27 10:12:40.059: V/LogContentView(2660):  Malang - Indonesia memang memiliki developer aplikasi handal. Salah satunya dibuktikan Eko Sakti, dosen Universitas Brawijaya yang sukses menciptakan aplikasi di Windows Phone yang mampu membuat catatan tanpa harus menulis.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />Never Write -- demikian nama aplikasi tersebut -- bisa dibilang baru di Indonesia. Kemampuannya adalah mengubah 
12-27 10:12:40.059: V/LogContentView(2660):  <em>speech</em> (ucapan) bahasa Inggris menjadi bentuk teks. 
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />Eko mengaku, ide pembuatan aplikasi ini berawal saat mengikuti program Summer School di Bali yang bentuk pengajarannya menggunakan bahasa Inggris.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />&quot;Waktu itu saya ikut Summer School dan dosen yang mengajar menggunakan bahasa Inggris. Saya mencoba mencatat mungkin karena terlalu cepat berbicaranya, banyak yang tertinggal. Setelah di rumah saya coba buka kembali catatan saya, malah tambah bingung,&quot; cerita Eko kepada wartawan di Universitas Brawijaya, Jumat (21/12/2012).
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />Ditambahkannya, aplikasi Never Write bisa diupload di evernote. Selain itu aplikasi ini juga mempunyai kelebihan di antaranya bisa diakses di segala tempat dengan catatan file aplikasi sudah tersimpan pada perangkat genggam.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />Never Write tidak mempunyai batasan dalam memasukkan jumlah kata. Sehingga bisa digunakan sebagai sub title film yang nantinya bisa diubah dalam bahasa Indonesia.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />Sebagai bukti sahih kehebatannya, aplikasi ini pun sukses meraih gelar dalam kompetisi Nokia Lumia Apps Olympiad yang berlangsung dari pertengahan November 2012 lalu.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />Dalam kompetisi tersebut terdapat 428 developer peserta dari sekitar 40 kampus yang tersebar di seluruh Indonesia.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />Dari semuanya, terpilih 54 finalis dan 20 pemenang, dimana salah satunya adalah Eko Sakti.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />&quot;Salah satu pemilihan juri terhadap inovasi produk saya yaitu karena aplikasi yang saya ciptakan belum ada di pasaran. Penilaian yang lain juga ada pada fungsi atau kegunaan dari produk yang diciptakan,&quot; beber Eko. 
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <em>Nah</em>, setelah menang di ajang pembuatan aplikasi besutan Nokia tersebut, sang vendor asal Finlandia itu pun berencana untuk memasarkan aplikasi ciptaan Eko.
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660):  <br />
12-27 10:12:40.059: V/LogContentView(2660): </div>
12-27 10:14:25.989: V/LogContentView(3178): <div class="text_detail">
12-27 10:14:25.989: V/LogContentView(3178):  Malang - Indonesia memang memiliki developer aplikasi handal. Salah satunya dibuktikan Eko Sakti, dosen Universitas Brawijaya yang sukses menciptakan aplikasi di Windows Phone yang mampu membuat catatan tanpa harus menulis.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />Never Write -- demikian nama aplikasi tersebut -- bisa dibilang baru di Indonesia. Kemampuannya adalah mengubah 
12-27 10:14:25.989: V/LogContentView(3178):  <em>speech</em> (ucapan) bahasa Inggris menjadi bentuk teks. 
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />Eko mengaku, ide pembuatan aplikasi ini berawal saat mengikuti program Summer School di Bali yang bentuk pengajarannya menggunakan bahasa Inggris.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />&quot;Waktu itu saya ikut Summer School dan dosen yang mengajar menggunakan bahasa Inggris. Saya mencoba mencatat mungkin karena terlalu cepat berbicaranya, banyak yang tertinggal. Setelah di rumah saya coba buka kembali catatan saya, malah tambah bingung,&quot; cerita Eko kepada wartawan di Universitas Brawijaya, Jumat (21/12/2012).
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />Ditambahkannya, aplikasi Never Write bisa diupload di evernote. Selain itu aplikasi ini juga mempunyai kelebihan di antaranya bisa diakses di segala tempat dengan catatan file aplikasi sudah tersimpan pada perangkat genggam.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />Never Write tidak mempunyai batasan dalam memasukkan jumlah kata. Sehingga bisa digunakan sebagai sub title film yang nantinya bisa diubah dalam bahasa Indonesia.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />Sebagai bukti sahih kehebatannya, aplikasi ini pun sukses meraih gelar dalam kompetisi Nokia Lumia Apps Olympiad yang berlangsung dari pertengahan November 2012 lalu.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />Dalam kompetisi tersebut terdapat 428 developer peserta dari sekitar 40 kampus yang tersebar di seluruh Indonesia.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />Dari semuanya, terpilih 54 finalis dan 20 pemenang, dimana salah satunya adalah Eko Sakti.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />&quot;Salah satu pemilihan juri terhadap inovasi produk saya yaitu karena aplikasi yang saya ciptakan belum ada di pasaran. Penilaian yang lain juga ada pada fungsi atau kegunaan dari produk yang diciptakan,&quot; beber Eko. 
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <em>Nah</em>, setelah menang di ajang pembuatan aplikasi besutan Nokia tersebut, sang vendor asal Finlandia itu pun berencana untuk memasarkan aplikasi ciptaan Eko.
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178):  <br />
12-27 10:14:25.989: V/LogContentView(3178): </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:02:27.603

从上面的代码中，变量主体必须从 new LoadNews().execute("").get() 返回，因此您可以更改函数 getItemBody 如下

```
private void SetView(){ 
        // move uri here, and you can dinamyc uri.
        String uri = "http://inet.detik.com/read/2012/12/21/205518/2124977/398/dosen-unibraw-bikin-aplikasi-pengubah-suara-ketulisan";
        contentsWebView.loadData(HTML_HEADER + getItemBody(uri) + HTML_FOOTER,
        "text/html", "utf-8");
}

private String getItemBody(String uri) {
    String body = null;
    try {
        body = new LoadContent().execute(uri).get();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }
    return body;
} 
```

在类 asynctask 中，如下所示，

```
private class LoadContent extends AsyncTask<String, Integer, String> {
    private ProgressDialog Dialog = new ProgressDialog(
            ViewItemActivity.this);

    @Override
    protected String doInBackground(String... params) {
        String url = params[0];
        Document doc;
        try {
            doc = Jsoup.connect(url).get();
            Elements element = doc.select(".text_detail");

            content = element.toString();
            Log.v("LogContentView", content);
        } catch (IOException e) {
            e.printStackTrace();
        }

        return content;
    }

    protected void onPreExecute() {
        Dialog.setMessage("loading content...");
        Dialog.show();
    }

    protected void onPostExecute(String result) {
        Dialog.dismiss();
        super.onPostExecute(result);
    }

} 
```

让我知道是否有错误日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T04:19:02.523

试试这个，我希望它可以帮助你解决你的问题

```
 private String itemContent;
    private static final String HTML_HEADER = "<html><body>";
    private static final String HTML_HEADER = "</body></html>"; 
```

## 在`onCreate()`方法调用`getItemBody(item)`方法中

```
 private void SetView(){ 
            contentsWebView.loadData(HTML_HEADER + itemContent + HTML_FOOTER,
            "text/html", "utf-8");
    }      

    private void getItemBody(String item) {
        new LoadContent().execute(item);
    }

    private class LoadContent extends AsyncTask<String, Integer, String> {
        private ProgressDialog Dialog = new ProgressDialog(
                ViewItemActivity.this);

        @Override
        protected String doInBackground(String... params) {
            String url = "http://inet.detik.com/read/2012/12/21/205518/2124977/398/dosen-unibraw-bikin-aplikasi-pengubah-suara-ketulisan";
            Document doc;
            try {
                doc = Jsoup.connect(url).get();
                Elements element = doc.select(".text_detail");

                String content = element.toString();
                Log.v("LogContentView", content);
            } catch (IOException e) {
                e.printStackTrace();
            }

            return content;
        }

        protected void onPreExecute() {
            Dialog.setMessage("loading content...");
            Dialog.show();
        }

        protected void onPostExecute(String result) {
            Dialog.dismiss();
                    // You can get Item content from `doInBackgorund()` 
                    // to the  parameter result
                    itemContent = result;
                    SetView();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:51:19.270

```
@Override
        protected String doInBackground(String... params) {
            String url = "http://inet.detik.com/read/2012/12/21/205518/2124977/398/dosen-unibraw-bikin-aplikasi-pengubah-suara-ketulisan";
            Document doc;
            String content = null;
            try {
                doc = Jsoup.connect(url).get();
                Elements element = doc.select(".text_detail");

               content = element.toString();
                Log.v("LogContentView", content);
            } catch (IOException e) {
                e.printStackTrace();
            }
        return content;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T04:03:21.347

在您的 doInBackground 中，您返回内容，并且可以在 onPostExecute() 中访问此内容。试试这个：

```
 private String getItemBody(String passedContent) {
            String body = "";
if(passedContent != null && !passedContent.equals(""))
{
body = passedContent;
}
            new LoadContent().execute("");
            return body;
        }

    protected String doInBackground(String... params) {
                String url = "http://inet.detik.com/read/2012/12/21/205518/2124977/398/dosen-unibraw-bikin-aplikasi-pengubah-suara-ketulisan";
                Document doc;
                try {
                    doc = Jsoup.connect(url).get();
                    Elements element = doc.select(".text_detail");

                    String content = element.toString();
                    Log.v("LogContentView", content);
                } catch (IOException e) {
                    e.printStackTrace();
                }

                return content;
            }

    protected void onPostExecute(final String backgroundresult) {

    dialog.dismiss();

    String backgroundResult = backgroundresult;

    Stirng returnedString = getItemBody(backgroundResult); // But you are returning the same result over here and this makes the doInBackground() run again. 

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T04:03:55.603

```
private String getItemBody(Item item) {
        String body = "";

        new LoadContent(){

              protected void onPostExecute(String result) {
                super.onPostExecute(result);//Dialog.dismiss();
                body = result;
              }
        }.execute("");

    // this should wait until asynchron completes:
        return body;
    } 
```

# c# - 在登录视图内的详细信息视图中查找标签

> ID：14049139
> 
> 赞同：0
> 
> 时间：2012-12-27T03:49:11.697
> 
> 标签：c#, asp.net

我能够在 LoginView1 中找到 DetailsView

```
DetailsView DetailsView1 = (DetailsView)LoginView1.FindControl("DetailsView1"); 
```

上面的语句有效......但我无法在 DetailsView 中找到标签

```
Label id = (Label)DetailsView1.FindControl("id"); 
```

上面的语句返回我 null

这是我的aspx代码

```
<asp:LoginView ID="LoginView1" runat="server">
        <LoggedInTemplate>
            <asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" 
                DataKeyNames="FeeID" DataSourceID="SqlDataSource1" Height="50px" 
                Visible="False" Width="100%">
                <Fields>
                    <asp:TemplateField HeaderText="FeeID" InsertVisible="False" 
                        SortExpression="FeeID">
                        <EditItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Eval("FeeID")%>'></asp:Label>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="id" runat="server" Text='<%# Bind("FeeID") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
        </Fields>
                    </asp:DetailsView>
        </LoggedInTemplate>
            <AnonymousTemplate>
            Access Denied.
            </AnonymousTemplate>
        </asp:LoginView> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:31:53.610

> 第一的，

```
DetailsView view = (DetailsView)LoginView1.Rows[0].FindControl("DetailsView1"); 
```

> 然后，

```
Label id = (Label)view.rows[0].FindControl("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:54:58.953

在对控件进行 DataBinding 之后，您将使用：

```
DetailsView1.Rows[0].Cells[0].FindControl("id") 
```

尝试，它可能会起作用或相应地更改行或单元格索引。

# selenium - 如何在 selenium 中禁用 chrome 扩展

> ID：14049151
> 
> 赞同：6
> 
> 时间：2012-12-27T03:50:44.450
> 
> 标签：selenium, google-chrome-extension, chromium

我试图在启动我的 selenium chrome 时禁用所有 chrome 扩展。但是每次我运行代码时，所有扩展都会继续启动。有没有办法禁用扩展。

## 示例代码

```
public static void main(String[] args) throws IOException {
    System.setProperty("webdriver.chrome.driver", "C:\\Selenium\\chromedriver.exe");
    DesiredCapabilities capabilities = DesiredCapabilities.chrome();
    capabilities.setCapability("chrome.binary", "C:\\Users\\ngzhongqin\\AppData\\Local\\Google\\Chrome\\Application\\chrome.exe");
    WebDriver driver = new ChromeDriver(capabilities);
    driver.get("http://www.cnn.com");
    WebElement searchBox = driver.findElement(By.name("q"));
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T04:28:40.527

找到了解决办法。

```
 capabilities.setCapability("chrome.switches", Arrays.asList("--disable-extensions")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-11T19:40:51.677

设置功能*chrome.switches*对我不起作用（Chrome 版本 53.0.2785.143 m，ChromeDriver 2.18.343845）

而是使用选项有效：

```
ChromeOptions options = new ChromeOptions();
options.addArguments("--disable-extensions");
driver = new ChromeDriver(options); 
```

或根据[Chrome 驱动程序文档](https://sites.google.com/a/chromium.org/chromedriver/capabilities)将选项设置为功能

```
ChromeOptions options = new ChromeOptions();
options.addArguments("--disable-extensions");
caps.setCapability(ChromeOptions.CAPABILITY, options);
driver = new ChromeDriver(caps); 
```

ChromeDriver(capabilities) 已弃用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-26T09:51:11.623

使用以下设置 chrome 选项：

```
ChromeOptions options = new ChromeOptions();
options.addArguments("chrome.switches","--disable-extensions"); 
```

# android - 如何跟踪全景图中每一帧的相机移动（OpenCV // Android）

> ID：14049152
> 
> 赞同：4
> 
> 时间：2012-12-27T03:50:45.930
> 
> 标签：android, opencv, android-ndk, panoramas

在我的旧开发/测试平板电脑自己吃掉之后，我又回到了我的相机应用程序上，现在正在创建全景图。我希望能够使用四个屏幕上的箭头（向左/向右移动，向上/向下旋转，显示器周围的边框显示红色并突出显示适当的箭头，然后在关闭时为黄色，在关闭时为绿色）来引导用户在目标上并捕捉下一张图像，然后继续）。

问题是，我不知道如何使用 OpenCV 或 Android 功能来确定相机何时旋转了“正确”的量。做这个的最好方式是什么？或者有没有最好的方法？欢迎 RTFM 回答，但请指出有问题的 FM。:-)

谢谢，--吉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:09:49.190

你可以试试光流技术。使用光流，您可以量化相机相对于对象移动了多少。尝试以下[链接](http://robots.stanford.edu/cs223b05/notes/CS%20223-B%20T1%20stavens_opencv_optical_flow.pdf)

# java - 将字符串输入到 ArrayList

> ID：14049154
> 
> 赞同：-3
> 
> 时间：2012-12-27T03:51:03.300
> 
> 标签：java

我遇到了一个问题，我无法将值放入数组列表的某个位置。我有成功将字符串存储到变量中的用户输入，但我不知道如何将它们放入数组的特定单元格中。

代码：

```
 public void newAccount() {
     firstName = JOptionPane.showInputDialog("What's your first name?");
     nLastName = JOptionPane.showInputDialog("What's your last name?");
     nAddress = JOptionPane.showInputDialog("What's your current address?");
     nCity= JOptionPane.showInputDialog("What's your current city?");
     nState = JOptionPane.showInputDialog("What's your current State?");
     nZipCode = JOptionPane.showInputDialog("What's your current Zip Code?");
     account.add( accountNumber, firstName);
     account.add( accountNumber, nLastName);
     account.add( accountNumber, nAddress);
     account.add( accountNumber, nCity);
     account.add( accountNumber, nState);
     account.add(accountNumber, nZipCode); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:59:38.273

您想使用 ArrayList 的以下[add 方法](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)，执行以下操作可以将条目放置在指定的索引处：

```
ArrayList al = new ArrayList();  
al.add(index, object); 
```

还要注意，Java 中的索引是基于 0 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T03:54:52.937

`account`变量的类型是什么？如果它是一个 ArrayList，那么您的设计就会关闭，因为您不想将字符串添加到 ArrayList 以表示单个 Account 对象。这充满了错误，其中最重要的是添加乱序的风险。相反，您应该创建一个 Account 类，其中包含您当前尝试添加到数组列表中的值的字段。

```
public class Account {
  private String firstName;
  private String lastName;
  // .... etc

  public Account(String firstName, String lastName, .... etc...) {
    this.firstName = firstName;
    this.lastName = lastName;
    // .... etc...

  } 
```

然后，您可以创建一个 Account 对象，将上面的值传递到其构造函数中。

```
Account newAccount = new Account("John", "Smith", ..... etc...); 
```

然后，您可以拥有一个 Account 对象的 ArrayList，或者更好地表示为`ArrayList<Account>`并将单个 Account 对象轻松添加到此列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:56:21.640

正如我假设您使用和 ArrayList... 使用第二种方法，`add()`其中第一个参数接受将添加新值的索引

```
account.add(index,value); 
```

其中 is`index`是一个整数，它将定义`value`将存储在 ArrayList 中的索引

可以`value`是一个对象，那么您可以创建一个类对象并将其保存到`value` 例如

```
List<AccountItem> = new ArrayList<AccountItem>();

class AccountItem(){
   public String firstname;
   public String lastname;
}

AccountItem ai = new AccountItem();
ai.firstname= "you";
ai.lastname = "me";

account.add(2,ai); //where i save the new object in index 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T04:07:42.777

如果变量 account 是一个 Arraylist，那么你使用它是错误的。您仅将 ZipCode 添加到位置帐号的数组列表中。

您应该创建一个帐户对象，其中包含名字和姓氏、邮政编码等。

然后把这个账户对象放到Arraylist中。这样，您将拥有一个填充了帐户对象的 Arraylist。

# highcharts - 如何制作相同的范围

> ID：14049158
> 
> 赞同：0
> 
> 时间：2012-12-27T03:51:42.140
> 
> 标签：highcharts

我的图表的数据范围从 1 到 200。

我想做固定范围：

```
tickPositioner: function(min, max) {
    return [1,10,20,30,200];
} 
```

但范围比其他范围多 30 到 200。[图表](http://jsfiddle.net/elias2012/b5Kkk/6/)

我想以相同的高度查看每个颜色范围？ ![在此处输入图像描述](../Images/358a6e8ba024bb3588691b6856903a23.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:21:27.637

`X`据我了解，您需要`Y`在`Plotbands`.

```
plotBands: [{ 
                     color: 'rgba(1, 143, 189, 1)',
                     from: 0,
                     to: 50
                 }, 
```

检查[这](http://jsfiddle.net/b5Kkk/7/)是否是你需要的。

***对于具有不规则间隔***的多个绘图带，不可能实现相等的颜色范围面积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:51:29.340

实际上，您不可能想要显示数据的表示，数据`[ 20 - 30 ]`不能等于`[ 30 - 200 ]`。所以它的高度总是不同的。

# javascript - 鼠标滚轮事件区别

> ID：14049162
> 
> 赞同：1
> 
> 时间：2012-12-27T03:52:13.147
> 
> 标签：javascript, jquery, mouseevent, mousewheel

## 请看下面的代码：

```
<script type="text/javascript">
var scrollFunc=function(e){
    var direct=0;
    e=e || window.event;

    if(e.wheelDelta){//IE/Opera/Chrome 
        userMouse(e.wheelDelta);
    }else if(e.detail){//Firefox
        userMouse(e.wheelDelta);
    }
}

if(document.addEventListener){
    document.addEventListener('DOMMouseScroll',scrollFunc,false);
}//W3C

window.onmousewheel=document.onmousewheel=scrollFunc;//IE/Opera/Chrome/Safari

function userMouse(flage){
    if(flage == 3){
        alert("firefox UP！");
    }else if(flage == -3){
        alert("firefox DOWN！");
    }else if(flage == 120){
        alert("IE UP！");
    }else if(flage == -120){
        alert("IE DOWN！");
    }
}
</script> 
```

问题是：如果我滚动一次鼠标滚轮，它会在 Firefox 中提示一次，但在 IE/Chrome/Opera 中会提示两次。我认为这是内核问题，对吧？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T04:34:50.953

这是你的罪魁祸首：

`window.onmousewheel=document.onmousewheel=scrollFunc;`

在 IE、Chrome、Opera 和 Safari 中，您正在处理`onmousewheel`.`document`和`window`.

您只能在 Firefox 中看到一个警报，因为您只在此行处理`document`'事件：`onmousewheel`

```
 if(document.addEventListener){
      document.addEventListener('DOMMouseScroll',scrollFunc,false);
 } 
```

# c# - 我们可以从母版页访问内容页控件吗？

> ID：14049163
> 
> 赞同：-1
> 
> 时间：2012-12-27T03:52:46.850
> 
> 标签：c#, asp.net, controls

我有一个用于多个内容页面的母版页。在每个内容页面上都有一个用户控件。我想在单击母版页中的按钮时调用该控件的方法。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:00:20.160

您可以这样做以访问内容页面控件

```
protected void Button1_Click(object sender, EventArgs e)
{
    UserControl_Type uc1 = 
    (UserControl_Type)ContentPlaceHolder1.FindControl("UserControlId");
    if (uc1 != null)
    {
        uc1.Method();
    }
} 
```

我认为您应该将 UserControl 移动到母版页并在母版页 cs 文件中单击按钮访问 usercontrol 方法。如果有您不想显示此用户控件的任何内容页面，您可以执行以下操作

使用内容占位符：

在母版页中：添加：

```
<asp:contentplaceholder id="UcControlPlaceHolder" runat="server">
<!-- User control here -->
</asp:contentplaceholder> 
```

在您不想显示 UserControl 的内容页面中，**添加**以下标签并从您希望 UserControl 显示的所有内容页面中删除此标签：

```
<asp:Content ID="UcControlContent1" 
ContentPlaceHolderID="UcControlPlaceHolder" Runat="Server">    
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T03:57:38.510

> 我想在单击母版页上的按钮时调用该控件的方法。可以吗？？？

是和不是。如果您在谈论客户端，那么可以，您可以通过 JavaScript 调用控件上的方法。如果您在谈论服务器端，那么没有。

* * *

但是，我确实要问，如果控件在*每个内容页面上都可用，那么它是存在于***母**版页上的一个很好的候选者，是吗？如果您在特定内容页面中不需要它，您可以隐藏它。

# spring - 为什么spring mvc不能发送邮件

> ID：14049165
> 
> 赞同：0
> 
> 时间：2012-12-27T03:53:01.917
> 
> 标签：spring, model-view-controller, email

我将通过 spring mvc 发送电子邮件，但我收到以下错误。

感谢我能得到的所有帮助。

```
java.lang.ClassCastException: service.MailService$1 cannot be cast to org.springframework.mail.SimpleMailMessage
at service.MailService.sendEmail(MailService.java:69)
at sendPasswordToUser(SendPasswordController.java:44) 
```

我的代码是：

```
public class EmailMessage
   {

private String receiverEmailAddress;
private String subject;
private String messageBody;

public EmailMessage()
{
}
    //+setters and getters

} 
```

这是服务类

```
@Service
public class EmailSenderService implements EmailSenderRepository
{

private MailSender mailSender;
private SimpleMailMessage mailMessage;

public void setMailMessage(SimpleMailMessage mailMessage) {
this.mailMessage = mailMessage;
}

public void setMailSender(MailSender mailSender) {
    this.mailSender = mailSender;
}

public void sendEmail(EmailMessage emailMessage)
{
    SimpleMailMessage message = new SimpleMailMessage(this.mailMessage);

    message.setTo(emailMessage.getReceiverEmailAddress());
    message.setSubject(emailMessage.getSubject());
    message.setText(emailMessage.getMessageBody());
    //sending the message
    mailSender.send(message);

}

 } 
```

和控制器：

```
@Controller
@RequestMapping
public class SendPasswordController
{

@Autowired
private static UserService us = new UserService();
@Autowired
private static MailService mailService = new MailService();

@RequestMapping(value = "/getPassword", method = RequestMethod.GET)
public String showForm()
{

    return "index";
}

@RequestMapping(value = "sendPassword", method = RequestMethod.POST)
public String sendPasswordToUser(@RequestParam("email") String email, ModelMap model,    HttpServletRequest req, HttpServletResponse response)
{
    String subject = "Sending your password to you ";

    User user = us.findUserByAnyParameter(email);

    if (email.equals(user.getEmail()))
    {
        mailService.sendEmail(user.getPassword(), subject, email);
        model.addAttribute("message", user);

        return "confirmNewPassword";
    }
    else
    {
        return "redirect:/index";

    }

}

} 
```

jsp页面是：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1" import="java.util.*" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4  /loose.dtd">
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Log In</title>
<link href="<%=request.getContextPath()%>/resources/css/layout.css"
rel="stylesheet" type="text/css" />
<link href="<%=request.getContextPath()%>/resources/css/menu.css"
rel="stylesheet" type="text/css" />
 <link href="<%=request.getContextPath()%>/resources/css/styles.css"
rel="stylesheet" type="text/css" />

 </head>
<body>

    <c:if test="${not empty error}">
    <div class="errorblock">
        Your login attempt was not successful, try again.<br /> Caused :
        ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
    </div>
</c:if>  

    <div id="formContainer">
        <form id="login" method="post" action="<c:url  value='j_spring_security_check' />">
            <a  href="<c:url value="http://localhost:8080/guard_weblayer/getPassword/" /> id="flipToRecover" class="flipLink">Forgot?</a> 
                <input type="text" name="j_username" id="loginUsername" required="required" maxlength="45" placeholder="username"  /> 
                <input type="password" name="j_password" id="loginPass"  required="required" maxlength="45" placeholder="pass"/>
                <input type="submit" name="submit" value="Login" />
        </form>
        <form id="recover" method="post" action="sendPassword">
            <a href="<c:url value="http://localhost:8080/guard_weblayer/getPassword/" /> id="flipToLogin" class="flipLink">Forgot?</a> 
            <input type="text" name="email" id="recoverEmail" required="required" maxlength="45" placeholder="mail"   /> 
            <input type="submit" name="submit" value="Recover" onClick="window.location='confirmNewPassword';" />
        </form>
    </div>

    <!-- JavaScript includes -->
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="<%=request.getContextPath()%>/resources/js/script.js"></script>
</div> 
```

和 emailConfiguration.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="http://www.springframework.org/schema/beans  http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="${mail.host}" />
    <property name="username" value="${mail.username}" />
    <property name="password" value="${mail.password}" />
    <property name="port" value="${mail.port}" />
    <property name="protocol" value="smtp" />

    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">${mail.smtp.auth}</prop>
            <prop key="mail.smtp.connectiontimeout">5000</prop>
            <prop key="mail.smtp.sendpartial">${mail.smtp.sendpartial}</prop>
            <prop key="mail.smtp.userset">${mail.smtp.userset}</prop>
            <prop key="mail.mime.charset">UTF-8</prop>
            <prop key="mail.smtp.isSecure">${mail.smtp.isSecure}</prop>
            <prop key="mail.smtp.requiresAuthentication">${mail.smtp.requiresAuthentication}</prop>
            <prop key="mail.smtps.auth">${mail.smtps.auth}</prop>
            <prop key="mail.smtp.port">${mail.port}</prop>
            <prop key="mail.smtp.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
            <prop key="mail.smtp.socketFactory.fallback">${mail.smtp.socketFactory.fallback}</prop>
            <prop key="mail.smtp.starttls.enable">${mail.smtp.starttls.enable}</prop>
            <prop key="mail.debug">${mail.debug}</prop>
        </props>
    </property>
</bean>

<bean id="messageTemplate" class="org.springframework.mail.SimpleMailMessage"
    scope="prototype">
    <property name="from" value="mygmail@gmail.com" />
</bean>

<!-- <bean id="emailSenderBean" class="org.convey.example.email.EmailSender"> -->
<!-- <property name="mailSender" ref="mailSender" /> -->
<!-- </bean> -->
</beans> 
```

和 mail.properties

```
mail.host=smtp.gmail.com
mail.port=465
mail.protocol= smtps
mail.username=mygmail@gmail.com
mail.password=************
mail.transport.protocol=smtp
mail.smtp.auth=true
mail.smtp.starttls.enable=true
mail.debug=true
mail.smtps.host=true
mail.smtps.auth=true
mail.smtp.isSecure=true
mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
mail.smtp.socketFactory.fallback=false
mail.smtp.requiresAuthentication=true
mail.smtp.userset=true
mail.smtp.sendpartial=true 
```

这是服务类：

```
 public class MailService implements MailRepository
 {
@Autowired
private MailSender mailSender;
@Autowired
private SimpleMailMessage messageTemplate;
@Autowired
private JavaMailSender javamailSender;

public void setMailSender(JavaMailSender mailSender)
{
    this.mailSender = mailSender;
}

public void sendMail(String mailFrom, String mailTo, String subject, String mailBody)
{
    SimpleMailMessage message = new SimpleMailMessage(this.messageTemplate);
    message.setFrom(mailFrom);
    message.setTo(mailTo);
    message.setText(mailFrom +  mailTo + mailBody);
    this.mailSender.send(message);

}

public void sendEmail(EmailMessage emailMessage)
{
    SimpleMailMessage message = new SimpleMailMessage(this.messageTemplate);

    message.setTo(emailMessage.getReceiverEmailAddress());
    message.setSubject(emailMessage.getSubject());
    message.setText(emailMessage.getMessageBody());
    // sending the message
    this.mailSender.send(message);
}

public boolean sendEmail(final String message, final String subject, final String emailAddress)
{
    MimeMessagePreparator preparator = new MimeMessagePreparator()
    {

        public void prepare(MimeMessage mimeMessage) throws Exception
        {

            mimeMessage.setRecipient(Message.RecipientType.TO, new InternetAddress(emailAddress));
            mimeMessage.setFrom(new InternetAddress("mygmail@gmail.com"));
            mimeMessage.setText(message, "ISO-8859-1");
            mimeMessage.setSubject(subject, "ISO-8859-1");
        }
    };

    try
    {
        this.mailSender.send((SimpleMailMessage) preparator);
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
        return false;
    }

    return true;
}

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:31:20.407

The autowired `static` fields in your controller may be the root cause of the issue. Try to update them as follows.

```
@Autowired
private UserService us;

@Autowired
private MailService mailService; 
```

Also, how is the service's `mailMessage` field set?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:13:28.413

嗨，问题已通过修复在 OS X 上运行 OpenJDK 7 时出现的 trustAnchors 问题得到解决

如果您在 OS X 上运行 OpenJDK 7 并看到此异常，则有一个简单的修复，只需链接到 Apple 的 JDK 1.6 使用的同一个 cacerts 文件：

```
cd $(/usr/libexec/java_home -v 1.7)/jre/lib/security
ln -fsh /System/Library/Java/Support/CoreDeploy.bundle/Contents/Home/lib/security/cacerts 
```

欲了解更多信息，请参阅以下链接：

[http://architecturalatrocities.com/post/19073788679/fixing-the-trustanchors-problem-when-running-openjdk-7](http://architecturalatrocities.com/post/19073788679/fixing-the-trustanchors-problem-when-running-openjdk-7)

# javascript - Javascript 在 Wordpress 中不起作用

> ID：14049166
> 
> 赞同：3
> 
> 时间：2012-12-27T03:53:15.197
> 
> 标签：javascript, wordpress, header, wordpress-theming

我的网站是用 Wordpress 构建的，最近我一直在向它添加一些基本的 javascript：[RossPW.com](http://rosspw.com)

但是，我添加的所有 javascript 似乎都不起作用，而且我一生都无法弄清楚为什么！

例如，我在标题中添加了以下简单片段，以淡入 -- 但这不起作用：

```
<script type="text/javascript">
$('body').hide();
$('body').fadeIn(3000);
</script> 
```

到目前为止，为了尝试解决这个问题，我尝试了两件事：

1) 将 wp_enqueue 正确添加到 header.php （过去已知这会导致 wordpress 出现一些问题：

```
<?php wp_enqueue_script("jquery"); ?>
<?php wp_head(); ?> 
```

[2）我还尝试在此处](http://rosspw.com/wp-content/themes/rosspw2013/js/rosspw.js)将 javascript 作为外部 .js 文件包含在内，并使用一些基本的 JS 来为标题设置动画或滚动到顶部——这也没有奏效。

任何帮助将不胜感激 - 谢谢！

**更新：** 为了确保正确加载 js/jquery。我已经尝试过这个基本警报——它确实有效！

```
<script type="text/javascript">
       alert('ALERT!')
</script> 
```

但是，我编写的所有其他 javascript 都没有——而且我不知道为什么。我编写的 javascript 似乎很好，如下所示：jsfiddle.net/v9NSR/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T04:00:10.593

两件事要解决 -

*   错误：SyntaxError：非法字符源文件： [http](http://rosspw.com/wp-content/themes/rosspw2013/js/rosspw.js) ://rosspw.com/wp-content/themes/rosspw2013/js/rosspw.js行：21，列：5 源代码：});​ ;â€‹</李>
*   尝试在关闭 body 标记之前添加此 JS 代码。

让我知道它是否适合您。

尝试`Firebug`用于调试。

为了更好地理解检查这个截图 -

正如您在加载之前使用 jquery 一样。

![jQuery](../Images/b4a4a39bcf76599e7b1446017eeae7a4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-05T17:46:30.073

您在代码中出错的第一件事是使用`$`符号调用 jQuery。当您在 WordPress 中编写 jQuery 代码时，您必须确保与代码库没有冲突，因为 WordPress 可能会使用其他库并且可能会搞砸。

`jQuery();`在 WordPress中使用 jQuery 的正确方法`$();`是：

```
<script type="text/javascript">
$('body').hide();
$('body').fadeIn(3000);
</script> 
```

另一种方法是使用 jQuery`$.noConflict()`函数包装 jQuery 代码，例如：

```
jQuery.noConflict();
   (function( $ ) {
       $(function() {
          // your code here
       });
   })(jQuery); 
```

查看[这里](https://api.jquery.com/jquery.noconflict/)以获取有关 noConflict 函数的更多信息和完整文档。

希望这对你有用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T04:03:42.247

看起来您在加载 jquery.js 的脚本标记之前调用了 jquery 函数。

第 70-71 行：

```
$('body').hide();
$('body').fadeIn(3000); 
```

这给出了一个例外： Uncaught ReferenceError: $ is not defined

但是 jquery.js 直到第 94 行才被加载：

```
<script type='text/javascript' src='http://rosspw.com/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script> 
```

您可以执行以下两项操作之一：

1.  将您的 jquery.js 引用移动到页面顶部。
2.  加载文档后调用您的 jquery 函数。就像是：

    函数fadeInBody() { $('body').hide(); $('body').fadeIn(3000); } window.onload = fadeInBody;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T04:01:01.763

尝试在页脚之前添加 jquery，`wp_footer()`然后是脚本

```
<?php
    wp_enqueue_script('jquery');
    wp_enqueue_script('myscript', 'myscript.js', array('jquery'));
    wp_footer();
?> 
```

然后在你的外部脚本上：

```
$(document).ready(function () {
    $('body').hide();
    $('body').fadeIn(3000);
}); 
```

# php - 更新创建简单 PHP、MySql 投票系统的问题

> ID：14049168
> 
> 赞同：0
> 
> 时间：2012-12-27T03:53:23.693
> 
> 标签：php, mysql, sql, mysqli

好的，所以我所做的是制作了一个显示数据库的脚本，并且我加入了一个应该更新作品的投票系统，如果有人点击作品，它会在 mysql 数据库中将作品的值从 3 更改为 4，如果单击，则将 4 更改为 5对于 dworks 部分再次进行相同的操作，但它不会更新数据库，请帮助我

```
<?php require "manybr.htm" ?>
<style>
body
{
background-image:url('images/bg.png');
}
</style>
<?php

$host="host"; // Host name 
$username="username"; // Mysql username 
$password="pass"; // Mysql password 
$db_name="Db"; // Database name 
$tbl_name="passes"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// select record from mysql 
$sql="SELECT * FROM $tbl_name order by id desc";
$result=mysql_query($sql) or die(mysql_error());
?>
<table background='images/view.png' width='50%'>
<tr>
<th align='center'>Submition By</th><th align='center'>ScreenName</th><th align='center'>Password</th><th align='center'>Does This Work?</th><th align='center'>Vote</th>
</tr>
<tr>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
</tr>
<?php
while($rows=mysql_fetch_array($result)…
?>

<tr>
<td background='transparent' align='center'><i><b><? echo $rows['yname']; ?> </b></i></td>
<td background='transparent' align='center'><i><b><? echo $rows['username']; ?></b></i></td>
<td background='transparent' align='center'><i><b><? echo $rows['password']; ?></b></i></td>
<td background='transparent' align='center'><i><b><? echo $rows['works']; ?>% Yes <font color='transparent'>||||</font>  <? echo $rows['dworks']; ?>% No</b></i>
<td background='transpatent' align='center'><i><b>
<!--PROBLEMS HERE--><?php

if ( isset( $_POST['works'] ) )
{
// query YES +1
//UPDATE tylted SET works = works + 1
$sql="UPDATE `Db`.`Users` SET `works` = '+ 1' WHERE `passes`.`id` =$id LIMIT $id ;";
} 
else if (isset( $_POST['dworks'] ))
{
// query NO +1
//UPDATE tylted SET dworks = dworks + 1
$sql="UPDATE `Db`.`Users` SET `dworks` = '+ 1' WHERE `passes`.`id` =$id LIMIT $id ;";
}

?>

<form method='POST'>
<input type='submit' value='works' name='works'>
<input type='submit' value='no works' name='dworks'>
</form>
<!--THEY END HERE-->
</td> 
</tr>

<?php
// close while loop 
}
?>

</table>

<?php
// close connection; 
mysql_close();
?>
<center> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:55:07.570

该`UPDATE`语句不是这样工作的，如果你想增加列的值，它应该是这样的。

```
UPDATE `Db`.`Users` 
SET `works` = `works` + 1 
WHERE `tylted`.`id` = $id 
// LIMIT $id 
```

# objective-c - ASIHTTPRequest 需要身份验证错误

> ID：14049170
> 
> 赞同：0
> 
> 时间：2012-12-27T03:53:41.330
> 
> 标签：objective-c, ios, youtube-api, asihttprequest, gdata-api

我做了很多谷歌搜索，但我找不到任何可以理解的 ASIHttpRequest 和 Youtube API 教程。我还在 Stackoverflow 和其他论坛上问了很多问题，但没有人能提供帮助。我尝试从 youtube 获取最喜欢的视频列表。我已成功登录并获得了访问令牌。我使用密钥授权将其设置为请求标头，但 Youtube 总是返回错误：

> 响应失败并显示消息：错误域 = ASIHTTPRequestErrorDomain 代码 = 3“需要身份验证”用户信息 = 0x933b980 {NSLocalizedDescription = 需要身份验证}

这是我的代码：

```
#define CONNECTION_GET_FAVORITE_LIST @"https://gdata.youtube.com/feeds/api/users/default/favorites"

- (void) getFavoriteList{

  NSURL *url = [NSURL URLWithString:CONNECTION_GET_FAVORITE_LIST];
    ASIHTTPRequest *request = [[ASIHTTPRequest alloc] initWithURL:url];
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [request addRequestHeader:@"Authorization" value:[@" Bearer "  stringByAppendingString:<accesstoken goes here>];
    request 
    [request startAsynchronous];
    [request setCompletionBlock:^{
        NSString* respondMessage = [request responseString];
        NSLog(@"Respond complete with message: %@",respondMessage);
    }];
    [request setFailedBlock:^{
        NSString* respondMessage = [request error];
        NSLog(@"Respond failed with message: %@",respondMessage);
    }];
    [request release];
} 
```

更新：当我尝试使用方法 GET 并将链接上的访问令牌设置为：`https://gdata.youtube.com/feeds/api/users/default/favorites?v=2&access_token=<accesstoken>`时，youtube 会抛出错误：

> 令牌无效 - AuthSub 令牌的范围错误
> 
> 错误 401

请帮我解决这个问题。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:17:32.963

首先不要使用`ASIHTTPRequest`use `AFNetworking`。但在这里你不需要任何人。

现在您的请求`authentication and authorization`需要`gdata`请求`feed`进入`youtube`。

**编辑**：参考[gtm-oauth2](http://code.google.com/p/gtm-oauth2/wiki/Introduction)链接。

请参阅[GData Youtube API 文档](https://developers.google.com/youtube/v3/)链接。

# magento - Magento 重复产品而忽略了特定属性

> ID：14049175
> 
> 赞同：0
> 
> 时间：2012-12-27T03:54:07.817
> 
> 标签：magento, attributes, duplicates, product

我希望能够使用默认的 Magento Duplicate 选项来复制产品，但省略了几个需要为空的属性，以便用户在保存之前被迫更改它们。**示例：**复制后，我的属性*Table-Depth*总是不同的，如果不留空，用户输入正确的新值可能不会被注意到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:22:53.957

您可以为`catalog_model_product_duplicate`

查看[更改重复产品的 Magento 默认状态](https://stackoverflow.com/questions/12677971/change-magento-default-status-for-duplicated-products)

然后在您的观察者中，将字段值设置为 NULL、'' 或它们的默认值。

例如。

```
class MagePal_ResetDuplicateProductValues_Model_Observer 
{

   public function productDuplicate(Varien_Event_Observer  $observer)
   {
      $newProduct = $observer->getEvent()->getNewProduct();
      $newProduct->setTableDepth('');
      ... 
```

# php - 使用 cURL 访问 Url，然后提交数据

> ID：14049183
> 
> 赞同：0
> 
> 时间：2012-12-27T03:55:47.413
> 
> 标签：php, post, curl

我在尝试着：

1.  使用权`$url`
2.  将两个索引的 (2) 值插入相应的输入字段（用户名、密码），然后提交。
3.  最后从#2中的输入和提交中获取响应并输出响应。

我有以下代码：

```
 <?php
# get url to form
$url = "http://localhost/exploitme2/index.php?page=login.php";
$ch = curl_init($url); # initialize that form

#run value of $_POST variable in form fields from above url.
$params = array("'' or '1'='1'", "'' or '1'='1'");

curl_setopt($ch, CURLOPT_POST, 1);  
curl_setopt($ch, CURLOPT_POSTFIELDS, $params);  #set parameter $_POST fields
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
$result = curl_exec($ch);

## echo the result from cURL 'ing
echo $result;

curl_close($ch);
?> 
```

我收到此错误：

```
 syntax error, unexpected '=', expecting ')' 
```

在这条线上：

```
$params = array($_POST['username']=>'' or '1'='1', 
                $_POST['password']=>'' or '1'='1'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:14:49.973

从技术上讲，这只是 1 步操作，而不是 3 步。您已经完成了所有这 3 步。当您将这些值发布到上述 url 时，您的结果将根据您的代码存储在您的 $result 变量中，只需返回/显示它。对于 cURL，您不必先访问一个 url，然后再提交，如果您知道字段名称和操作 url，那么您可以像您已经完成的那样在 1 步中完成所有这 3 件事

试试这个变量的回声

```
$result = curl_exec($ch);
**echo $result;**
curl_close($ch); 
```

好的，让我在这里澄清一些困惑

**1)**您不必在 $_POST 数组中指定变量。您的 cURL POST 变量可以是任何变量。他们不必在 $_POST 中。

**2）**您必须将数据发布到表单的**操作**网址而不是其自己的网址，（除非两者都相同）

**所以对于 1 你的代码应该像**

```
$params = array("'' or '1'='1'", "'' or '1'='1'"); 
```

# postgresql - PostgreSQL Evolutions：“PSQLException：致命：抱歉，已经有太多客户端”

> ID：14049185
> 
> 赞同：10
> 
> 时间：2012-12-27T03:55:54.277
> 
> 标签：postgresql, scala, playframework-2.0

我正在尝试设置一个开发 PostgreSQL 服务器。它正在运行，我可以从命令行创建角色、表等。但是，当我尝试使用 Play 应用进化时，我收到以下错误：

```
org.postgresql.util.PSQLException: FATAL: sorry, too many clients already 
```

我能够连接，如果我故意输入语法错误，它会返回语法错误，所以我知道 Play 能够连接到数据库。但是，在成功应用进化后，我得到了上面显示的错误。

我不太精通 PostgreSQl 管理，所以我不确定问题是出在 Play 还是我的 PostgreSQL 安装上。我刚刚在运行 Mountain Lion 的 Mac 上使用 Heroku 的 Postgres.app 安装了它。

以下是写入控制台的内容：

```
! @6cnb0blpp - Internal server error, for request [GET /] ->

play.api.db.evolutions.InvalidDatabaseRevision: Database 'default' needs evolution! [An SQL script need to be run on your database.]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1$$anonfun$apply$1.apply$mcV$sp(Evolutions.scala:427) ~[play_2.9.1.jar:2.0.4]
    at play.api.db.evolutions.EvolutionsPlugin.withLock(Evolutions.scala:448) ~[play_2.9.1.jar:2.0.4]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:414) ~[play_2.9.1.jar:2.0.4]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:412) ~[play_2.9.1.jar:2.0.4]
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.3]
    at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.3]
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 10\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 9\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 8\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 7\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 6\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 5\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 4\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 3\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 2\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 1\. Exception: null
[error] application - 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T05:16:25.100

允许的连接数`postgresql.conf`使用 GUC（“大统一配置”）设置[`max_connections`](http://www.postgresql.org/docs/current/interactive/runtime-config-connection.html#GUC-MAX-CONNECTIONS)。默认值为 100。

但是在你修改设置之前，你必须问自己：在你的集群达到限制之前，所有其他 100 个连接是从哪里来的？这通常指向您的安装或程序中的错误！

您可能还对[连接池](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling#Connection_Pooling_and_Acceleration)和这篇关于Postgres Wiki 中[的连接数的文章感兴趣。](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T00:44:39.957

Postgres.app 默认为 max_connections = 10。请参阅`~/Library/Application Support/Postgres/var/postgresql.conf`.

我通过将 max_connections 增加到 50 来解决这个问题。在 Mountain Lion 上，我还必须将 shared_buffers 减少到 500kB 才能启动 Postgres。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T12:37:17.933

您可以减少应用程序使用的连接数。在 mac 安装上也有同样的错误。如[官方文档](http://www.playframework.org/documentation/2.0.4/SettingsJDBC)所示：

```
db.default.partitionCount=2

# The number of connections to create per partition. Setting this to 
# 5 with 3 partitions means you will have 15 unique connections to the 
# database. Note that BoneCP will not create all these connections in   
# one go but rather start off with minConnectionsPerPartition and 
# gradually increase connections as required.
db.default.maxConnectionsPerPartition=5

# The number of initial connections, per partition.
db.default.minConnectionsPerPartition=5 
```

# solr - 试图让java读取用solr创建的lucene索引

> ID：14049187
> 
> 赞同：2
> 
> 时间：2012-12-27T03:56:07.827
> 
> 标签：solr, lucene

我有一个用 solr 创建的 lucene 索引。lucene 版本是 3.6.1。

我在网上找到了一个读取 lucene 索引的 java 程序：

[http://www.javacodegeeks.com/2010/05/introduction-to-apache-lucene-for-full.html](http://www.javacodegeeks.com/2010/05/introduction-to-apache-lucene-for-full.html)

我为我的本地环境修改了程序，但它总是告诉我没有找到在索引中有结果的查询。在对程序没有运气之后，我修改了代码以使用 StandardAnalyzer 而不是 SimpleAnalyzer。没运气。

这是代码：

```
package com.javacodegeeks.lucene;

import java.io.File;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

public class StandardSearcher {

    public static void main(String[] args) throws Exception {

        File indexDir = new File("/path/to/solr/data/index/");
        String query = "science";
        int hits = 100;

        StandardSearcher searcher = new StandardSearcher();
        searcher.searchIndex(indexDir, query, hits);

    }

    private void searchIndex(File indexDir, String queryStr, int maxHits)
        throws Exception {

        StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);

        Directory directory = FSDirectory.open(indexDir);

        IndexSearcher searcher = new IndexSearcher(directory);
        Query query = new QueryParser(Version.LUCENE_36, "title", analyzer).parse(queryStr);

        TopDocs topDocs = searcher.search(query, maxHits);

        ScoreDoc[] hits = topDocs.scoreDocs;
        for (int i = 0; i < hits.length; i++) {
            int docId = hits[i].doc;
            Document d = searcher.doc(docId);
            System.out.println(d.get("filename"));
        }

        System.out.println("Found " + hits.length);

    }

} 
```

我究竟做错了什么？浏览 solrconfig.xml 我无法分辨 solr 默认使用哪个分析器。这就是我尝试 SimpleAnalyzer 和 StandardAnalyzer 的原因。

关于如何调试的建议将不胜感激。

更新：这是我的架构中的字段：

```
<field name="metaDataUrl" type="string" indexed="true" stored="true" required="true"/>
<field name="title" type="text" stored="true" indexed="true"/>
<field name="snippet" type="text" indexed="true" stored="true"/>
<field name="rest" type="string" stored="true" indexed="false" multiValued="true"/>
<field name="date_indexed" type="date" indexed="true" stored="true" default="NOW" multiValued="false"/>
<field name="all" type="text" stored="false" indexed="true" multiValued="true"/> 
```

而且，这里是来自 schema.xml 的 fieldType 文本的 XML：

```
<!-- A text field that uses WordDelimiterFilter to enable splitting and matching of                                                                                                             
    words on case-change, alpha numeric boundaries, and non-alphanumeric chars,                                                                                                                 
    so that a query of "wifi" or "wi fi" could match a document containing "Wi-Fi".                                                                                                             
    Synonyms and stopwords are customized by external files, and stemming is enabled.                                                                                                           
    -->
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <!-- in this example, we will only use synonyms at query time                                                                                                                               
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>                                                                                  
    -->
    <!-- Case insensitive stop word removal.                                                                                                                                                    
      add enablePositionIncrements=true in both the index and query                                                                                                                             
      analyzers to leave a 'gap' for more accurate phrase queries.                                                                                                                              
    -->
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="stopwords.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="stopwords.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
  </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:18:46.153

您需要使用索引时使用的标记器和过滤器构建自定义分析器（如 fieldType xml 的索引部分中所定义）。将该自定义分析器作为参数传递给搜索器，然后搜索应该可以正常工作。SnowballPorterFilter 是否源于“科学”？也许 ..

有关构建自定义分析器的详细信息，请参阅[http://whiteboardjunkie.wordpress.com/tag/custom-analyzer/](http://whiteboardjunkie.wordpress.com/tag/custom-analyzer/)。您只需要在 tokenstream() 中一个接一个地调用一个过滤器

此外，您可以使用 luke (http://code.google.com/p/luke/) 检查索引，看看是否有任何文档在标题字段中包含“科学”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T04:37:45.783

一位同事稍微更改了我的代码，使其看起来像下面的代码。他还建议我搜索词干。这种方法奏效了，我现在从针对 solr 构建的 Lucene 索引的搜索中得到结果。此代码仍然需要工作，但我将其作为概念验证发布，希望对其他人有用。

```
import java.io.File;

import java.util.List;
import org.apache.lucene.document.Fieldable;
import org.apache.lucene.document.Field;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

public class SimpleSearcher {

    public static void main(String[] args) throws Exception {

        File indexDir = new File("/path/to/solr/data/index/");
        int hits = 100;

        SimpleSearcher searcher = new SimpleSearcher();
        searcher.searchIndex(indexDir, args[0], hits);
    }

    private void searchIndex(File indexDir, String queryStr, int maxHits)
            throws Exception {

        Directory directory = FSDirectory.open(indexDir);

        IndexSearcher searcher = new IndexSearcher(directory);
        QueryParser parser = new QueryParser(Version.LUCENE_35,
         "title", new SimpleAnalyzer());
        Query query = parser.parse(queryStr);

        TopDocs topDocs = searcher.search(query, maxHits);

        ScoreDoc[] hits = topDocs.scoreDocs;
        for (int i = 0; i < hits.length; i++) {
            int docId = hits[i].doc;
            Document d = searcher.doc(docId);
            List<Fieldable> fields = d.getFields();

            System.out.println( (i+1) + ". ==========================================================");
            for ( Fieldable field : fields ) {
               if (field.isStored()) {
                 System.out.println(" >> " + field.name() + " - " + d.get(field.name()));
               }
            }
        }

        System.out.println("Found " + hits.length);
    }
} 
```

# javascript - 在 node.js 中运行 mongodb 而不运行 mongod

> ID：14049198
> 
> 赞同：1
> 
> 时间：2012-12-27T03:57:42.067
> 
> 标签：javascript, node.js, mongodb

我只想用这个在 node.js 中运行一个 Mongodb 服务器

```
var Db = require('mongodb').Db;
var Server = require('mongodb').Server;

var client = new Db('pixgalery00002', new Server('127.0.0.1', 27017, {}), {safe:false});

 for (var i ; i = i; i) {

   client.open(function(err, pClient) {

   if (err) throw err;

  });

 } 
```

当我使用 Mac OS X Lion 时，这很有效。但是今天我升级到Mountain Lion，突然，这不起作用！如果我想使用 mongodb，我必须运行`mongod`，但我不想那样！Mountain Lion中的mongodb有问题吗？对此有什么解决方案...？

我使用 connect-mongodb 作为会话存储，但现在它也不起作用了！

# php - 从 PHP 类返回变量到另一个类

> ID：14049200
> 
> 赞同：0
> 
> 时间：2012-12-27T03:58:10.660
> 
> 标签：php, class

```
class department {
    function get($department,$info) {
        //do something
    }
}

class employment {
    function get($user_id,$info) {
        //do something
    }
}

$dept = new department();
$emp = new employment();

$dept->get($emp->get($_SESSION['i'],'dept'), "open"); 
```

我正在尝试从`$emp->get()`函数中获取输出变量并将其放入`$dept->get()`函数中，但来自的输出`$emp->get()`未由 `$dept->get()`.

我应该如何将返回的值传递给`$emp->get()`to `$dept->get()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:02:12.280

类没有像这样初始化

```
$dept = new $department();
$emp = new $employment(); 
```

正确的语法是

```
$dept = new department;
$emp = new employment; 
```

[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T01:36:20.373

原来的输出`$emp->get()`是 a `echo`，而不是 a `return`，所以它没有被`$dept->get()`. 我的错！

# php - PHP Traits 命名约定？

> ID：14049201
> 
> 赞同：8
> 
> 时间：2012-12-27T03:58:21.937
> 
> 标签：php, zend-framework, naming-conventions, traits

在 Zend Framework 项目中使用特征的命名约定是什么？

`My_Form_Element_Traits`还是`My_Form_Element_Trait`？

我正在考虑复数，因为它是方法和属性的集合，但另一方面它*是*一个特征。

我还认为也许我想使用不同的特征，所以也许应该是`My_Form_Element_Traits_Preference`

听到这个新功能的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-16T19:03:04.697

您可能对[PHP-FIG](http://www.php-fig.org/)使用的约定感兴趣： [https ://github.com/php-fig/fig-standards/blob/master/bylaws/002-psr-naming-conventions.md](https://github.com/php-fig/fig-standards/blob/master/bylaws/002-psr-naming-conventions.md)

而且在我看来，即使你使用 ZF1，也不应该遵循这个约定。我建议你使用[PSR-2](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md)

# php - Netbeans 中 Alt+Shif+F 后函数末尾的注释移至新行

> ID：14049204
> 
> 赞同：1
> 
> 时间：2012-12-27T03:58:58.760
> 
> 标签：php, netbeans, code-formatting

我想将**函数名称**作为注释放在函数大括号的末尾。
但是，当我在 netbeans 中使用自动格式时，注释会移到新行.....

对这个案子有什么建议吗？

虽然我想发布前后的屏幕截图供您参考，但不允许新用户使用....
如果问题中有任何不清楚的地方，请随时要求我澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:04:25.837

这是链接

[http://php.net/manual/en/language.basic-syntax.comments.php](http://php.net/manual/en/language.basic-syntax.comments.php)

尝试这样评论：

```
 /* This is a multi line comment
       yet another line of comment */ 
```

你用评论做什么？

# c# - Microsoft.Office.Interop.Excel.dll 未包含在构建文件夹中

> ID：14049206
> 
> 赞同：7
> 
> 时间：2012-12-27T03:59:22.013
> 
> 标签：c#, excel

我用 C#、.NET Framework 4.0 编写了一个控制台应用程序。

本项目参考`Microsoft.Office.Interop.Excel.dll`。

当我构建项目成功，但在构建文件夹中不包括 Microsoft.Office.Interop.Excel.dll。

当我更改为 .NET 2.0 并构建它时，`Microsoft.Office.Interop.Excel.dll`包括在内！

但我想在 .NET 4.0 中构建和运行我的程序。

我使用VS 2010。

告诉我如何修复。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T04:12:18.863

检查引用的 DLL 的 Copy Local 是否设置为 true。

您首先需要将“嵌入互操作类型”属性设置为 false。然后您可以将“复制本地”属性设置为 true。

![在此处输入图像描述](../Images/3d9d3b947b078e686422d7823169598c.png)

[VS 2010 中引入了](http://blogs.msdn.com/b/samng/archive/2010/01/24/the-pain-of-deploying-primary-interop-assemblies.aspx) Embed Interop Types 属性，以消除部署 PIA 的依赖性。

# ruby - 在 Mac OSX 10.8.2 上安装 ruby 1.9.3

> ID：14049214
> 
> 赞同：2
> 
> 时间：2012-12-27T04:01:39.847
> 
> 标签：ruby, macos

我正在尝试在我的新 Mac 上安装 Ruby，但遇到了一些问题，想知道是否有人可以提供帮助？

主要错误是：

```
Right now Ruby requires gcc to compile, but Xcode 4.2 and later no longer ship with gcc.
Instead they ship with llvm-gcc (to which gcc is a symlink) and clang, neither of which are
supported for building Ruby. Xcode 4.1 was the last version to ship gcc, which was
/usr/bin/gcc-4.2. 
```

我尝试使用这篇文章“[由于符号链接错误而无法在 Mac OSX 10.8.1 中安装 ruby​​-1.9.2](https://stackoverflow.com/questions/12578220/cannot-install-ruby-1-9-2-in-mac-osx-10-8-1-due-to-symlink-error) ”中的建议来解决错误，但即使在通过自制软件安装 gcc 之后，我仍然会收到上述错误。

当我输入时`gcc - v`，我收到以下消息：

```
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

最后，我检查了我的 /usr/bin 文件夹，我看到了一个大约 104KB 的 gcc-4.2 unix 可执行文件。这是我应该拥有的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:26:43.607

试试这个让`rvm`知道`gcc`使用哪个：

```
CC=/usr/bin/gcc-4.2 rvm install 1.9.3 
```

或者，如果您想使用 Homebrew-installed `gcc`：

```
CC=/usr/local/bin/gcc-4.2 rvm install 1.9.3 
```

这取决于`gcc-4.2`口译员在哪里。

两种选择：

```
rvm install 1.9.3 --with-gcc=clang 
```

或使用[`ruby-build`](https://github.com/sstephenson/ruby-build).

**编辑 2013 年 9 月 7 日**：我非常喜欢安装红宝石的另一种选择是[ruby](https://github.com/postmodern/ruby-install) ​​-install 。它本着同一作者的[顽固](https://github.com/postmodern/chruby)精神。简单并且可以很好地完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T13:28:36.480

我还没有发表评论的声誉，但我只想指出，基于 Telemachus 的评论，这对我有用 rvm install 1.9.3 --with-gcc=clang

我正在运行 os x 10.8.4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T08:51:53.573

您应该先安装 xcode 命令行工具，您可以在 xcode 首选项的下载选项卡中找到。

![在此处输入图像描述](../Images/aef93ee4a558d70050f2433bc2df5b0f.png)

然后安装 homebrew，它是 centos 中类似 yum 的包管理器，你可以用它来安装 git 等。

然后安装 rvm，然后使用`rvm install ruby`.

# jquery - 按钮不在 Internet Explorer 中居中

> ID：14049217
> 
> 赞同：4
> 
> 时间：2012-12-27T04:02:03.317
> 
> 标签：jquery, html, css

我这里有一个 jsFiddle，请在 Internet Explorer 和其他主要浏览器中打开：

[http://jsfiddle.net/6bv7j/1/](http://jsfiddle.net/6bv7j/1/)

现在在 jsFiddle 中，只需单击“添加问题”按钮，它就会在下面添加一行。在该行中显示两个按钮，一个称为“选择所有答案”，另一个称为“删除所有答案”。

现在在主要浏览器中，按钮在表格中居中，这很好。但是在 Internet Explorer 中它不是居中的，它仍然是向左对齐的。是否有一段代码导致它不在 Internet Explorer 中居中，或者我是否需要添加一些内容才能使其在 Internet Explorer 中居中？

我试过`float:center`了，但这没有用。我不确定是否最好使用该`align`方法。

下面是代码的 CSS 和 jQuery/HTML：

```
.allBtnsRow{
    text-align:center;
    cursor:pointer;
    font-size:85%;
}

.allRemoveBtnsRow{
    text-align:center;
    cursor:pointer;
    font-size:85%;
} 
```

下面是 jQuery/HTML 代码：

```
$BtnsClass = $("<input class='allBtnsRow btnsAll' type='button' value='Select All Answers' onClick='selectAll(this);' /><br/><input class='allRemoveBtnsRow btnsRemove' type='button' value='Remove All Answers' onClick='removeAll(this);' />"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:31:07.423

您不需要`tr and td`在`div`. 删除`$row`并附加到：`$cell`_`$BtnClass``$answer`

```
// $row = $("<tr/>").appendTo($answer);
// $cell = $("<td/>").appendTo($row);

$BtnsClass = $("<input class='allBtnsRow btnsAll' type='button' value='Select All Answers' onClick='selectAll(this);' /><br/><input class='allRemoveBtnsRow btnsRemove' type='button' value='Remove All Answers' onClick='removeAll(this);' />");

$BtnsClass.appendTo($answer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:39:25.093

我不太确定您创建的结构是否“理想”，但`.answer`鉴于您现有的结构，我对 CSS 进行了一些更改：

### CSS

```
.answer
{
    width: 110px;
    margin: 0 auto;
    border: 1px solid red;
} 
```

测试：http: [//jsfiddle.net/6bv7j/4/](http://jsfiddle.net/6bv7j/4/)

# asp.net - 如何将参数从代码传递到asp.net

> ID：14049224
> 
> 赞同：0
> 
> 时间：2012-12-27T04:02:54.650
> 
> 标签：asp.net, webforms

我有一个aspx页面，其中有一个gridview，在这个gridview中我添加了一个datalist，所以对于每一行我想要一个datalist，基本上该行包含一个图像，并且在datalist中我想显示有关图片的某些详细信息，例如，一张卡车的照片，我想在数据列表中显示价格、年份等……所有这些数据都在数据库表中。

表库存设计：

```
Image,
Make,
Model,
Price,
Year, 
ID--primary key 
```

此时我在gridview中显示图像，但datalist显示网格每一行的表中的所有行我想要的只是显示描述当前行图像的数据. 例如，第一行应该只显示 ID = "15" 的数据列表中的数据，第二行 ID = "16" 的数据，依此类推。

在填充数据列表的 SQLDataSource 的 SelectCommand 中，我试图传递“WHERE ID = @ID”参数并从代码隐藏页面获取它，以便我可以操作数据并仅显示与图像相对应的数据而不是每行中的所有数据一遍又一遍。

```
<asp:GridView ID="GridView1" runat="server" 
  <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                 SelectCommand="SELECT [ID], [Make], [Model], [Year], [Price] FROM [Inventory] 
                 WHERE ID = @ID" OnLoad = "SqlDataSource1_Load" 
                 OldValuesParameterFormatString="original_{0}" 
                 ConnectionString="<%$ ConnectionStrings:testConnectionString %>">
</asp:SqlDataSource> 
```

这就是我想要的，代码隐藏

```
 public partial class Inventory : System.Web.UI.Page
   {
     protected System.Web.UI.WebControls.DataList DataList1;
     protected void Page_Load(object sender, EventArgs e)
       {
        }

     public void SqlDataSource1_Load(object sender, EventArgs e)
      {
          SqlDataSource1.SelectParameters.Add(new Parameter("ID", this would be where my ID 
                   should = the id of the image);
      }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:54:44.007

您采用的方法将导致每个网格视图行的数据库之旅。更好的解决方案是在一次行程中获取所有相关数据，然后将子数据列表与过滤后的项目绑定。例如，对将返回两个表的存储过程（或具有两个查询的批处理）进行数据库调用 - 第一个带有可以绑定到网格视图的图像和 id，而第二个表将包含来自所有 id 的其他信息第一张桌子。现在，您可以将数据列表与过滤所需 id 的 DataView 绑定。

有关嵌套数据绑定控件的各种示例，请参阅此 MSDN 文章 - [http://msdn.microsoft.com/en-us/library/aa478959.aspx](http://msdn.microsoft.com/en-us/library/aa478959.aspx)

另一方面，我也不确定数据列表信息（品牌、型号、价格、年份）是否具有给定 ID/图像的多个值。如果不是这种情况，那么您根本不需要使用数据列表，而是使用使用模板字段的自定义模板来实现您想要实现的垂直布局。

# android - 应用程序意外停止。请重试强制关闭

> ID：14049234
> 
> 赞同：-1
> 
> 时间：2012-12-27T04:04:27.420
> 
> 标签：android, android-emulator

当我尝试运行我的应用程序时，我收到错误，因为应用程序 SV (process.com.app) 已意外停止。请重试强制关闭错误。Logcat错误如下

```
12-27 08:57:05.779: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 866 objects / 60952 bytes in 87ms
12-27 08:57:07.480: E/dalvikvm-heap(278): 11186176-byte external allocation too large for this process.
12-27 08:57:07.480: E/GraphicsJNI(278): VM won't let us allocate 11186176 bytes
12-27 08:57:07.480: E/dalvikvm-heap(278): 11186176-byte external allocation too large for  this process.
12-27 08:57:07.480: E/GraphicsJNI(278): VM won't let us allocate 11186176 bytes
12-27 08:57:07.489: D/AndroidRuntime(278): Shutting down VM
12-27 08:57:07.489: W/dalvikvm(278): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
12-27 08:57:07.528: E/AndroidRuntime(278): FATAL EXCEPTION: main
12-27 08:57:07.528: E/AndroidRuntime(278): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.app/com.app.ScreenActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-27 08:57:07.528: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
12-27 08:57:07.528: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
12-27 08:57:07.528: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-27 08:57:07.528: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-27 08:57:07.528: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
12-27 08:57:07.528: E/AndroidRuntime(278): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
12-27 08:57:07.528: E/AndroidRuntime(278):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-27 08:57:07.528: E/AndroidRuntime(278):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.Activity.setContentView(Activity.java:1647)
12-27 08:57:07.528: E/AndroidRuntime(278):  at com.app.ScreenActivity.onCreate(ScreenActivity.java:20)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-27 08:57:07.528: E/AndroidRuntime(278):  ... 11 more
12-27 08:57:07.528: E/AndroidRuntime(278): Caused by: java.lang.reflect.InvocationTargetException
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.widget.ImageView.<init>(ImageView.java:108)
12-27 08:57:07.528: E/AndroidRuntime(278):  at java.lang.reflect.Constructor.constructNative(Native Method)
12-27 08:57:07.528: E/AndroidRuntime(278):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
12-27 08:57:07.528: E/AndroidRuntime(278):  ... 22 more
12-27 08:57:07.528: E/AndroidRuntime(278): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.Bitmap.nativeCreate(Native Method)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.content.res.Resources.loadDrawable(Resources.java:1709)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.view.View.<init>(View.java:1885)
12-27 08:57:07.528: E/AndroidRuntime(278):  at android.widget.ImageView.<init>(ImageView.java:112)
12-27 08:57:07.528: E/AndroidRuntime(278):  ... 26 more 
```

请帮忙。如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:08:46.570

您有内存泄漏，Android 操作系统无法创建新布局。- 或大图像。

正是关于这一点，我之前在几个答案中说过。

“原因：java.lang.OutOfMemoryError：位图大小超出 VM 预算”

[Android - 在哪里保存全局数据？](https://stackoverflow.com/questions/14048722/android-where-to-keep-global-data/14048752#14048752)

如何检测内存泄漏以及如何删除它有多种可能性：

搜索：“解除绑定 Android 组件”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T04:12:22.067

下面是由一个视图引起的。

```
 Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>

Caused by: java.lang.reflect.InvocationTargetException

Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

Your bitmap size is making it to run out of memory. Check these and try to avoid these. If you still can't get it done on these specific things, you could post your respective code snippets where these errors occur. So that others could edit answers.

# perl - Perl - 与 fork/exec'ed 进程通信

> ID：14049237
> 
> 赞同：1
> 
> 时间：2012-12-27T04:05:17.600
> 
> 标签：perl, exec, fork, communication

我正在设计一个服务器，它将通过**fork** / **exec** 'ing 四个“管理器”（它们自己的服务器进程）进行初始化，然后接受来自客户端的连接，**fork** / **exec** 'ing “奴隶”与客户端进行通信。在它们的生命周期中，slave 将与管理器建立连接并向它们发送工作请求。

我的问题是关于启动管理器。每个都可能需要一些时间来初始化（几分钟），我不希望主服务器在初始化之前继续接受客户端。最好的方法是什么？我应该探索让经理在准备好后向主服务器发出信号吗？我是否应该让管理人员与主服务器建立套接字连接 - 可能在与客户端连接的端口不同的端口上 - 并在准备好时发送消息？或者是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:54:34.050

在分叉四个管理器之前，我很想创建一个管道。当管理器准备好时，它可以将其 PID 写入管道并关闭它。主服务器可以延迟打开其侦听端口，直到至少有一个管理器表明它已准备好。如果它在所有管理器报告已准备好执行现役之前从管道中获取 EOF，那么它知道至少有一个管理器未能启动并且可以采取适当的措施（记录错误并退出？）。写入管道的消息通常被原子处理；也就是说，如果消息足够短，一个进程所写的内容不会与另一个进程所写的内容交错。

对于某些变体，您可以每个经理有一个管道；然后你必须决定你将如何轮询或选择哪个管道有消息等待。你可以决定经理们在表明他们已经准备好之后不关闭管道；他们可以保持打开状态，并在准备好时写入适当的“PID 准备就绪”，以及稍后的其他状态消息（“PID 退出”、“PID 太忙”、“PID 正在喝咖啡休息时间”……）。

还有很多其他的 IPC 机制可以使用，每一种都有自己的优点和缺点。很大程度上取决于管理者需要与主人沟通什么（以及主人是否需要与特定管理者沟通）。可以肯定使用套接字；消息队列也可以。如果您的通信需求很简单，信号量集可能会起作用。而这样的例子不胜枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:07:35.680

您正在考虑的是*FIFO*管道。*mknod*传统上用于创建它们。管道有*2 个*文件描述符，一个用于读取，一个用于写入......如果需要，它们可以阻止它......

# django - Django 数据库错误

> ID：14049238
> 
> 赞同：0
> 
> 时间：2012-12-27T04:05:31.050
> 
> 标签：django

在过去的一个小时里，我一直在尝试解决这个问题，但我不知道我遗漏了什么。这是第一次没有以前的数据的项目。但是，当我尝试通过管理面板添加数据时，出现以下错误：

```
DatabaseError at /admin/judge/event/

relation "judge_event" does not exist
LINE 1: SELECT COUNT(*) FROM "judge_event"
                             ^

Request Method:     GET
Request URL:    http://127.0.0.1:8012/admin/judge/event/
Django Version:     1.4.3
Exception Type:     DatabaseError
Exception Value:    

relation "judge_event" does not exist
LINE 1: SELECT COUNT(*) FROM "judge_event" 
```

我的模型供参考：

```
class Event(models.Model):
    competition_start = models.DateTimeField() 
    competitors = models.ManyToManyField('Picture')
    results = models.CommaSeparatedIntegerField(max_length=20)

class Picture(models.Model):
    uploader = models.ForeignKey(UserProfile)
    upload_date = models.DateTimeField()
    image = models.ImageField(upload_to="media")
    score = models.DecimalField(max_digits=10,decimal_places=10)
    score_RD = models.DecimalField(max_digits=10,decimal_places=10)
    rated = models.BooleanField()
    last_competed = models.DateTimeField() 
    competition = models.OneToOneField(Event) 
```

我三次检查了所有笔记，并没有注意到我做了什么不同的事情。

“judge_event”应该是“judge_Event”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:39:29.527

您对模型进行了*破坏性*的更改（例如添加外键）。`syncdb`不会对架构进行任何破坏性更改。

因此，您需要删除表，然后执行 syncdb 以便正确应用新架构。

有些应用程序支持此类更改，*称为迁移*。

其中最受欢迎的之一是[`south`](http://south.aeracode.org/). 一旦你对 django 更加熟悉了，你就可以开始使用它了。

# android - 关于来自多个应用程序的 GCM

> ID：14049239
> 
> 赞同：1
> 
> 时间：2012-12-27T04:05:38.863
> 
> 标签：android, android-c2dm

嗨，我在我的应用程序中使用了 C2DM 来推送消息。现在我已经迁移到 GCM，通过它我可以将消息推送到 android 应用程序。

此外还有 GCM 的一项功能，通过它，两个或多个服务器应用程序可以将消息推送到 android 应用程序。如何实现此功能。例如，我有一个来自一个提供商的新闻提要应用程序。现在，随着新闻更新，一些第三方本地优惠供应商也可以推送优惠更新。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:28:24.327

为 Gcm 创建 google Api 项目后，您将获得项目的 id。

此 id 对于您的项目是唯一的（您可以在许多应用程序中使用它）。

使用这个项目ID，您可以将您的设备注册到GCM；在Gcm上注册成功后，Gcm会返回一个**注册ID**（也称为PUSH_TOKEN）。

使用此**注册 id 和项目 id**，许多服务器可以向设备发送通知。

要从服务器接收通知，您需要实现**GCMIntentService 类**。

你会收到你的消息的`onMessage(Context arg0, Intent arg1)`方法。

我强烈建议您查看[GCM 入门](http://developer.android.com/google/gcm/gs.html)

文档还说，Gcm 允许多个发件人作为一个意图额外传递在一个逗号分隔的列表中作为，

```
Intent intent = new Intent(GCMConstants.INTENT_TO_GCM_REGISTRATION);
intent.setPackage(GSF_PACKAGE);
intent.putExtra(GCMConstants.EXTRA_APPLICATION_PENDING_INTENT,
PendingIntent.getBroadcast(context, 0, new Intent(), 0));
String senderIds = "968350041068,652183961211";
intent.putExtra(GCMConstants.EXTRA_SENDER, senderIds);
ontext.startService(intent); 
```

# vb.net - AxWebBrowser 整页快照

> ID：14049240
> 
> 赞同：0
> 
> 时间：2012-12-27T04:06:08.897
> 
> 标签：vb.net, screenshot, axwebbrowser

我目前使用 AxWebBrowser 控件增强旧软件。假设我导航到 www.yahoo.com 并且页面太长，它是可滚动的。我已经完成了屏幕截图的部分，但它无法以整页内容捕获页面。现在我想有一个选项让用户选择是全页捕获还是仅捕获查看部分（可滚动）。可能吗？

# android - 安卓支付网关

> ID：14049242
> 
> 赞同：3
> 
> 时间：2012-12-27T04:06:25.783
> 
> 标签：android, payment-gateway

我刚刚完成了一个 android 应用程序，并想在该应用程序中添加一个订阅按钮，以便每月订阅以使用该应用程序。最好的支付集成是什么？我可以使用 paypal 并仍然将应用程序放在 google play store 上吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T04:24:51.407

不可以，根据 Google 开发者内容政策，如果您在 Play 商店中发布您的应用程序，则不允许您通过贝宝销售应用程序内容：

[http://play.google.com/about/developer-content-policy.html](http://play.google.com/about/developer-content-policy.html)

## 应用购买：

从 Google Play 对应用程序和下载收费的开发人员必须使用 Google Play 的支付系统进行收费。

## 应用内购买：

在从 Google Play 下载的应用程序中提供额外内容、服务或功能的开发人员**必须使用 Google Play 的支付系统**作为付款方式，但以下情况除外：价格还包括纸质订阅）；或者支付可能在应用程序本身之外消费的数字内容或商品（例如购买可以在其他音乐播放器上播放的歌曲） 开发人员不得误导用户他们销售的应用程序或任何应用程序内服务，他们销售的商品、内容或功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:23:11.160

您可以使用 ： -

1.  贝宝

2.  安卓应用内购买API

两者都易于集成，因为它们都提供了 API。

尽管在 Paypal 中，您不会像在应用内购买中那样向用户收取总金额的 30%。

但我不确定您是否会在贝宝中获得一个选项来维护每个用户的购买，并且您可能需要您的服务器端来维护所有购买（以防用户卸载并重新安装您的应用程序或清除应用程序数据）。

简而言之：- 应用内购买更易于维护，因为您始终可以知道哪个用户支付了哪些费用。但是你向谷歌支付 30%。

贝宝为您节省 30%，但您必须自己维持购买

# java - Netty 大型消息未通过。INTEREST_CHANGED 事件被抛出两次

> ID：14049260
> 
> 赞同：0
> 
> 时间：2012-12-27T04:10:01.423
> 
> 标签：java, netty

我有一台在 Netty 上工作的服务器。客户端发送一些握手消息和服务器回复。这些是小消息，这些没有问题。

但是，当服务器尝试发送一些大消息（每个大小为 131139 字节）时，似乎它们正在被发送`ChannelFuture`，`isSuccess()`返回`true`和`getCause()`返回`null`。但是，客户端永远不会得到完整的消息，只有第一`4097`条消息的第一个字节。在 4 或 5 条消息之后，netty 停止尝试发送新消息。

我`isWritable()`在发送消息之前正在阅读频道（它总是返回`true`）。仅当 的 被触发时才会尝试下一条`operationComplete`消息`ChannelFutureListener`。将消息写入通道后，日志显示“INTEREST_CHANGED”事件被抛出两次，并且`isWritable`更改为`false`，然后立即更改为`true`。但是消息永远不会到达客户端。

```
 INFO [New I/O worker #7] (HashSender.java:33) - Attempting send a message: 0
 INFO [New I/O worker #7] (HashSender.java:68) - Is channel writable: true
 INFO [New I/O worker #7] (FrameLengthPrepender.java:46) - outgoing packet lenght: 131139
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: true
 INFO [New I/O worker #7] (HashSender.java:16) - Message Successfully sent. Channel isDone: true, success: true, cancelled: false, error: null
 INFO [New I/O worker #7] (HashSender.java:33) - Attempting send a message: 1
 INFO [New I/O worker #7] (HashSender.java:68) - Is channel writable: true
 INFO [New I/O worker #7] (FrameLengthPrepender.java:46) - outgoing packet lenght: 131139
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: false
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: true
 INFO [New I/O worker #7] (HashSender.java:16) - Message Successfully sent. Channel isDone: true, success: true, cancelled: false, error: null
 INFO [New I/O worker #7] (HashSender.java:33) - Attempting send a message: 2
 INFO [New I/O worker #7] (HashSender.java:68) - Is channel writable: true
 INFO [New I/O worker #7] (FrameLengthPrepender.java:46) - outgoing packet lenght: 131139
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: false
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: true
 INFO [New I/O worker #7] (HashSender.java:16) - Message Successfully sent. Channel isDone: true, success: true, cancelled: false, error: null
 INFO [New I/O worker #7] (HashSender.java:33) - Attempting send a message: 3
 INFO [New I/O worker #7] (HashSender.java:68) - Is channel writable: true
 INFO [New I/O worker #7] (FrameLengthPrepender.java:46) - outgoing packet lenght: 131139
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: false
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: true
 INFO [New I/O worker #7] (HashSender.java:16) - Message Successfully sent. Channel isDone: true, success: true, cancelled: false, error: null
 INFO [New I/O worker #7] (HashSender.java:33) - Attempting send a message: 4
 INFO [New I/O worker #7] (HashSender.java:68) - Is channel writable: true
 INFO [New I/O worker #7] (FrameLengthPrepender.java:46) - outgoing packet lenght: 131139
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: false
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: true
 INFO [New I/O worker #7] (HashSender.java:16) - Message Successfully sent. Channel isDone: true, success: true, cancelled: false, error: null
 INFO [New I/O worker #7] (HashSender.java:33) - Attempting send a message: 5
 INFO [New I/O worker #7] (HashSender.java:68) - Is channel writable: true
 INFO [New I/O worker #7] (FrameLengthPrepender.java:46) - outgoing packet lenght: 131139
 INFO [New I/O worker #7] (ClientHandler.java:32) - [id: 0xdbb48b90, /192.168.0.3:60105 => /192.168.0.4:25025] INTEREST_CHANGED
 INFO [New I/O worker #7] (ClientHandler.java:33) - Is channel writable: false 
```

谁能告诉我为什么消息没有通过？

**更新：它实际上是第一条消息的 4097 字节。我没有计算标记数据包长度的前 4 个字节。**

**更新：如果传出数据包长度小于或等于 4097 字节，则一切正常。仅当数据包大于 4097 字节时，Netty 才会中断。它是 4097，而不是 4096。它会响铃吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:08:01.163

好吧，我的错。问题出在客户端。读取套接字的线程存在无限循环，因此未处理传入数据。

# cocos2d-iphone - 在 cocos2d 中滚动精灵？

> ID：14049264
> 
> 赞同：0
> 
> 时间：2012-12-27T04:10:14.657
> 
> 标签：cocos2d-iphone

我正在做一个小游戏，在这个游戏中，我有两个 menuitem 按钮，一个用于跳跃，一个用于滚动，我使用 ccjump 实现了跳跃功能但无法实现滚动功能，为此我使用了 ccrotate 功能，它可以部分工作，可以任何人都可以帮助我解决这个问题...在此先感谢

这是我的滚动代码

```
id action= [CCRotateBy actionWithDuration: 0.2 angle:-130];
[mysprite runAction:action]; 
```

谁能给我确切的解决方案？？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:14:17.067

好的，要模拟精灵“滚动”的效果，您必须结合旋转和平移。为了令人信服，您必须获得正确的平移量，以使身体不会出现与平移不同步的旋转，例如旋转过快或过慢而无法移动量。您可以通过反复试验来确定移动的距离，或者如果精灵几乎是圆形的，您可以相当精确地计算它。

对于一个完美的圆（最简单的情况），当它沿着地面滚动时，滚动的距离等于半径乘以旋转的弧度。所以对于一个完整的旋转，移动的水平距离将是 2*pi*r。对于部分旋转，在您的情况下为 130 度，对于圆形精灵，行进的水平距离将为 -130 * (pi/180) * sprite.contentSize.width/2。pi/180 用于将度数转换为弧度。对于一个不完美的圆圈，这个公式会让你接近，但你可能需要调整它才能得到正确的外观。所以回顾一下，连同一些示例代码，你的方法可能是这样的：

```
float radius = mySprite.contentSize.width/2;
float radians = CC_DEGREES_TO_RADIANS(-130);
float distance = radians * radius;

CCRotateBy *rotateAction = [CCRotateBy actionWithDuration:0.2 angle: -130];
CCMoveBy *moveAction = [CCMoveBy actionWithDuration:0.2 position:ccp(distance, 0)];
CCSpawn *spawnAction = [CCSpawn actionOne:rotateAction two:moveAction];

[mySprite runAction:spawnAction]; 
```

# collections - 有没有直接将所有元素一次性添加到集合对象的方法？

> ID：14049266
> 
> 赞同：1
> 
> 时间：2012-12-27T04:10:39.087
> 
> 标签：collections, excel, vbscript, vba

我知道`Add method`向`dictionary`对象和对象添加元素`ArrayList`。所以有没有办法使用 VBScript 一次性将元素添加到此类集合中，而不是一个一个。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:11:52.403

您可以使用 split 从字符串创建数组，但它非常有限：

```
Split("a,b,c,d",",") 
```

同样，数组

```
Array("a","b","c") 
```

最后，您可以将文本文件读入记录集中，但这可能是多余的，除非您有大量的值。

# spring - 自动装配的对象返回 null

> ID：14049269
> 
> 赞同：0
> 
> 时间：2012-12-27T04:11:13.120
> 
> 标签：spring, servlets, dao, autowired

> **可能重复：**
> [Servlet 中的 Spring @Autowired 使用 Servlet](https://stackoverflow.com/questions/4184159/spring-autowired-in-servlet)
> [配置 Spring Ioc](https://stackoverflow.com/questions/13461809/configurating-spring-ioc-with-servlets)

我想将 dao 注入 servlet，但它返回为 null。

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-2.5.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <!-- Enable @Required @Autowired @PreDestroy @PostConstruct @Resource -->
    <context:annotation-config />

    <!-- Scan class file in class path for annotated component -> @Component, @Repository, @Service, and @Controller  -->
    <context:component-scan base-package="com.breeze.bis.core.service.jdbcTemplate" />

    <!-- Enable load time weaving for @Configurable -->
    <context:load-time-weaver aspectj-weaving="autodetect" />

    <!--  -->
    <tx:annotation-driven proxy-target-class="false" transaction-manager="transactionManager"/>

    <!-- ==================================================================================================== -->

    <!-- Alternate method to enable @Autowired -->
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/vbossdb" />
        <property name="driverClass" value="com.mysql.jdbc.Driver" />
        <property name="user" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <constructor-arg type="javax.sql.DataSource" ref="dataSource"></constructor-arg>
    </bean>

    <bean id="genericDaoImpl" class="com.breeze.bis.core.service.jdbcTemplate.GenericDAOImpl">
        <property name="jdbcDao" ref="jdbcTemplate"></property> 
    </bean>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"></property> 
    </bean>
</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>BISDAO</display-name>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>WEB-INF/applicationContext.xml</param-value>
  </context-param>
  <listener>
    <display-name>contextLoaderListener</display-name>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
</webapp> 
```

DAO.java

```
@Component 
@Transactional(propagation=Propagation.REQUIRED, isolation=Isolation.DEFAULT, rollbackFor={Exception.class, SQLException.class}, timeout=9999)
public class GenericDAOImpl implements GenericDAO {

    private JdbcTemplate jdbcDao;
    /**
     * 
     */
    public GenericDAOImpl() {

    }

    /**
     * @return the jdbcDao
     */
    public JdbcTemplate getJdbcDao() {
        return jdbcDao;
    }

    /**
     * @param jdbcDao the jdbcDao to set
     */
    public void setJdbcDao(JdbcTemplate jdbcDao) {
        this.jdbcDao = jdbcDao;
    }

    /* (non-Javadoc)
     * @see com.breeze.bis.core.service.jdbcTemplate.GenericDAO#createObject(java.lang.String, java.lang.Object)
     */
    @Override
    @SuppressWarnings("unchecked")
    public int createObject(String sql,  Map<Integer, Object> paramMap) {

        boolean hasResult = true, hasKey = true;

        IStatementExecutor stmtExecutor = new UpdateStatementExecutor(hasKey);
        IExtractor integerExtr = new IntegerExtractor(null, hasResult);

        GenericDatabaseExecutor executor = new GenericDatabaseExecutor(stmtExecutor, integerExtr);
        GenericPreparedStatementCreator stmtCreator = new GenericPreparedStatementCreator(hasKey, sql, paramMap);

        GenericPreparedStatementCallback stmtCallback = new GenericPreparedStatementCallback(executor);

        return (Integer) this.jdbcDao.execute(stmtCreator, stmtCallback);   
    }

} 
```

Servlet.java

```
@Configurable
public class GenericServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Autowired
    GenericDAO dao;
} 
```

请帮忙。

谢谢。

# ios - 如何确定应该在主线程上运行什么进程？iOS

> ID：14049276
> 
> 赞同：0
> 
> 时间：2012-12-27T04:12:25.790
> 
> 标签：ios, multithreading, uikit, grand-central-dispatch

> **可能重复：**
> [将 UIVIew 渲染到后台线程上的图像的安全方法？](https://stackoverflow.com/questions/6348962/safe-way-to-render-uiview-to-an-image-on-background-thread)

我正在尝试实现一些 HUD 代码。HUD 是和活动指示器，当然可以在长时间操作期间向用户提供一些反馈。据我了解，HUD 必须在主线程上运行，因为它是 UI 操作，但我也明白，如果其他操作是 UI 操作，它们也需要在主线程上运行。我假设**运行 CoreImage 过滤器**（例如）将是**可以从主线程运行**的示例，但是将生成的 UIImages 图像添加到 UIImageView 需要在主线程上运行。**我对么？**怎么样`[[aView layer] renderInContext:UIGraphicsGetCurrentContext()]`？这可以从主线程运行吗？

如何准确确定需要在主线程上运行哪些操作？

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:19:22.013

> 怎么样`[[aView layer] renderInContext:UIGraphicsGetCurrentContext()]`？这可以从主线程运行吗？

什么是视图？它是界面的一部分。什么是层？它是界面的一部分。除主线程外，请勿触摸界面。

# string - unity 3d 中的字体问题

> ID：14049277
> 
> 赞同：1
> 
> 时间：2012-12-27T04:12:30.537
> 
> 标签：string, fonts, unity3d, monodevelop, unityscript

嗨，我导入了一种字体并在 GUISkin 中使用它作为按钮。但我收到警告

```
Font size and style overrides are only supported for dynamic fonts.
UnityEngine.GUI:Button(Rect, String) 
```

如何摆脱这种情况？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:47:44.197

我猜您正在为尚不支持动态字体的移动平台制作。这对于 Unity android 和 iOS 来说是一个长期存在的问题。

有一个简单的解决方案可以解决这个问题，即不在 GUI 样式中设置字体大小，而是在字体中设置。

如果您希望在不同位置更改字体大小，一种解决方案是复制导入的字体文件并根据需要多次更改大小。您不必担心文件的大小，因为字体文件通常以 KB 为单位。

如果您不想复制字体，另一种解决方案是采用更大尺寸的字体，例如 100 左右。使用字体制作文本网格，并使用文本网格游戏对象上的比例值控制文本的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T04:33:48.440

```
private float guiDiff;

public GUIStyle scoreStyle;

// in start function

guiDiff = screenResolution.x / 480f;  (480 is my testing equipment width)

scoreStyle.fontSize = Mathf.CeilToInt(15 * guiDiff); 
```

它在所有设备上对我来说都很好。

# c++ - 类中的结构

> ID：14049280
> 
> 赞同：1
> 
> 时间：2012-12-27T04:12:55.027
> 
> 标签：c++, class, struct, member

我对将结构作为类成员的语法有一些疑问。

我有这个结构：

```
/*  POS.H   */
#ifndef POS_H
#define POS_H
struct pos{
    int x;
    int y;

    pos operator=(const pos& a){
        x=a.x;  y=a.y;
        return a;
    }

    pos operator+(const pos& a)const {
        return (pos){a.x+x,a.y+y};
    }

    bool operator==(const pos& a)const {
        return (a.x==x && a.y== y);
    }
};
#endif /* POS_H */ 
```

在另一个文件中有主要功能：

```
/* MAIN.CPP */
#include "pos.h"
#include "clase.h"
int main(){
    pos pos;
    pos.x=0;
    pos.y=0;
    clase clase();
} 
```

然后包含类 clase 的文件 case.h 有 3 个不同的内容。

这编译得很好：

```
#include "pos.h"
class clase{
    private:
        pos posi;
    public:
        clase(pos pos):posi(pos){};
}; 
```

这不会编译（只是更改成员的名称）：

```
#include "pos.h"
class clase{
    private:
        pos pos;
    public:
        clase(pos pos):pos(pos){}; 
```

这也可以很好地编译（使用 pos 作为 neme 但使用关键字 struct）：

```
#include "pos.h"
class clase{
    private:
        struct pos pos;
    public:
        clase(struct pos pos):pos(pos){};
}; 
```

我的问题是：**为什么这些代码编译或不编译？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:19:21.793

传统上，将成员命名为与结构名称相同的名称并不是一个好的编码习惯，除非您强制执行结构类型，否则当您尝试声明一个名为 pos 的私有成员时，看起来编译器会感到困惑。

简而言之，这只是命名冲突，您应该养成命名成员与结构或对象名称略有不同的习惯。也许在 TitleCase 中命名您的结构和对象，然后在您的成员上使用 camelCasing。在此示例中，将结构命名为 POS，然后在 clase 中命名为：POS mPos;

# c++ - 使 QGroupBox::title 展开

> ID：14049290
> 
> 赞同：2
> 
> 时间：2012-12-27T04:15:08.303
> 
> 标签：c++, qt, user-interface, stylesheet, groupbox

![图片](../Images/23bf2c369cf9e79622e9bad567ebd526.png)

使用样式表，我设法设置标题元素的背景，如上图 (1.) 所示，使用：

```
QGroupBox::title
{
    background-color: rgb(255, 255, 0);
    subcontrol-origin: margin;
    subcontrol-position: bottom center;
} 
```

现在我希望标题扩展到托管 QGroupBox 的最大大小，如图 2 所示。我该如何做到这一点？

谢谢！

编辑：我希望只使用样式表来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T08:12:43.077

事实证明，由于搜索字词不正确，我在 Google 上寻找解决方案的努力失败了……

[http://www.qtcentre.org/threads/43232-customizing-QGroupbox-title](http://www.qtcentre.org/threads/43232-customizing-QGroupbox-title)目的设置

```
QGroupBox::title
{
  padding-left: 2000px;
  padding-right: 2000px;
} 
```

不是很漂亮，但至少它可以只使用样式表来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-04T02:44:01.570

您可以设置背景图像来扩展标题。

![在此处输入图像描述](../Images/b53fca16cb9778275491f225cf4e4b49.png)

```
QGroupBox {
    border: 1px solid #90c6dd;
    border-radius: 0px;
    margin: 8px 8px 7px 7px;
    padding: 56px 10px 10px 10px;
    background-image: url(:/res/svg/group-bg.svg);
    background-repeat: repeat-x;
    background-position: top left;
}

QGroupBox::title {
    font-size: 24px;
    font-weight: bold;
    subcontrol-origin: padding;
    subcontrol-position: top left;
    min-height: 39px;
    padding: 0 10px 0 10px;
}
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:51:13.257

如果您可以获得 QGroupBox 父级上的指针，您可以获得它的宽度并知道它的参数，请执行以下操作：

```
this->setWidth(pOnParent->width()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-16T00:01:41.820

```
padding-left: 100%;
padding-right: 100%; 
```

# android - `focusable` 和 `clickable` 之间的区别

> ID：14049292
> 
> 赞同：67
> 
> 时间：2012-12-27T04:15:21.893
> 
> 标签：android, focus, clickable

`clickable`和`focusable`android有什么区别？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-27T04:19:37.767

`Clickable`表示它可以被指针设备点击或被触摸设备轻敲。`Focusable`意味着它可以从键盘等输入设备获得焦点。像键盘这样的输入设备无法根据输入本身决定将其输入事件发送到哪个视图，因此它们将它们发送到具有*焦点*的视图。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-27T04:23:27.323

`Focusable`表示将发生 ACTION_UP 事件。它会得到它，它不会释放它。

`Clickable`表示先是 ACTION_DOWN，最后是 ACTION_UP。它会在最后获得并释放它。

# image - 在 Python 3 和 GTK 3 中检查 Gtk.Image 对象的大小

> ID：14049293
> 
> 赞同：1
> 
> 时间：2012-12-27T04:15:22.317
> 
> 标签：image, python-3.x, size, gtk3

我有一个需要在 Gtk 窗口中显示对象图像的应用程序，但我想让窗口大小符合图像大小。本质上是这样的：

```
. . .
image = Gtk.Image.new_from_file(filename)
width, height = image_dimension(image)
window.set_size_request(width, height)
. . . 
```

我需要的是像上面的“image_dimension”功能这样的能力。遗憾的是，python 3 没有 PIL（python 图像库），使用起来非常简单。

恐怕我是一个新手程序员，不想进行头文件解析（例如 jpg 文件），部分原因是我希望它适用于任何文件。

谢谢，

纳尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T06:59:42.523

用于`GdkPixbuf.Pixbuf`加载图像文件。这使您可以获取图像的高度和宽度以及许多其他属性。然后使用 . 创建您的图像小部件`Gtk.Image.new_from_pixbuf()`。

# node.js - 在 Express 中更改 cookie 过期时间

> ID：14049294
> 
> 赞同：16
> 
> 时间：2012-12-27T04:15:30.983
> 
> 标签：node.js, session, cookies, express, connect

`expressServer.use(express.session({params}))`因为我在调用cookie的过期设置为“Session”时没有定义maxAge 。

我想在登录时添加“记住我”功能。如果选择“记住我”，有效期将延长至一个月。

我该怎么做呢？我尝试简单地扩展maxAge，但这似乎没有做任何事情......

```
expressServer.get '/blah', (request, response) =>
    request.session.cookie.maxAge = 2592000
    response.end 'hello there' 
```

谢谢您的帮助！

****编辑****

我尝试制作一个简单的服务器来测试更新用户的 cookie。我正在使用 Express 3.0.4

当我访问 127.0.0.1:9000/blah 时，浏览器 cookie 的“过期”字段仍然是“会话”...

```
express = require 'express'

expressServer = express()
expressServer.use express.cookieParser()
expressServer.use express.session
    secret: 'supersecret'
    cookie:
        path: '/'
        httpOnly: true

expressServer.get '/', (request, response) =>
    response.end 'hello'

expressServer.get '/blah', (request, response) =>
    request.session.cookie.maxAge = 3600000
    response.end 'hello again'

expressServer.listen 9000
console.log 'server running' 
```

呜呜呜……

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T04:55:24.557

我在 /login 页面上有一个复选框，上面写着“记住我”：

```
<p class="remember">
  <input type="checkbox" id="remember" name="remember" value="1" />
  <label for="remember">Remember me</label>
</p> 
```

然后在我到 /login 的 POST 路由中，我进行了一些健全性检查并设置会话（如果`req.body.remember`已设置），否则它只是一个窗口会话：

```
 //user is authenticated
  //set session length
  if ( req.body.remember ) {
    var hour = 3600000;
    req.session.cookie.maxAge = 14 * 24 * hour; //2 weeks
  } else {
    req.session.cookie.expires = false;
  }

  req.session.userid = user._id; 
```

在 app.js 中添加以下几行（我使用 redis）：

```
 app.use(express.cookieParser('secret-word'));
  app.use(express.session({
    store: new RedisStore({
      host: cfg.redis.host,
      db: cfg.redis.db
    }),
    secret: 'another-secret'
  })); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-25T12:52:48.737

如果要在 express 4 中使用[cookie-sessions实现滚动会话，请像这样配置中间件：](https://github.com/expressjs/cookie-session)

```
app.use(cookieSession({
    secret: your_secret,
    maxAge: your_maxAge,
    key: 'sessionId'
})); 
```

请注意，您不需要设置该`expires`选项。

为了扩展您的会话，只需像这样更改它：

```
app.get('*', function (req, res, next) {
    req.session.foobar = Date.now();
    next();
} 
```

请注意，在快递 4 中没有`req.session.touch()`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-21T09:20:52.013

将 cookie 名称设置为 value，其中可能是转换为 JSON 的字符串或对象。路径选项默认为`"/"`.

```
res.cookie('rememberme', '1', 
                { expires: new Date(Date.now() + 900000), httpOnly: true }); 
```

如需进一步参考，可使用以下链接

[http://expressjs.com/api.html#res.cookie](http://expressjs.com/api.html#res.cookie)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-14T11:11:06.007

我找到了一个似乎对我有用的[答案；](https://stackoverflow.com/a/14529888)将其添加到您的路线顶部。

```
app.all '*', (req,res,next) ->
  if req.method is 'HEAD' or req.method is 'OPTIONS'  
    next()
  else
    req.session._garbage = Date();
    req.session.touch();
    next(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-20T16:10:47.327

或者你可以试试这个，它对我有用：

```
if ( req.body.remember ) 
{
    var oneWeek = 7 * 24 * 3600 * 1000; //1 weeks                    
    req.session.cookie.expires = new Date(Date.now() + oneWeek);
    req.session.cookie.maxAge = oneWeek; 
} 
```

# python - Python：如何从 python 中的分组列表中返回相对数量

> ID：14049297
> 
> 赞同：1
> 
> 时间：2012-12-27T04:15:59.547
> 
> 标签：python, math

假设我有一个事物列表，它们的频率（按频率排序）和项目总数（为了清楚起见，我在这里使用 dict，但实际上它们是具有频率属性的对象）：

```
items = {"bananas":12, "oranges":12, "apples":11, "pears":2} 
```

现在，我想`max_results`从我的 37 ( `total_frequency`) 个项目中挑选出 10 个 ( )，但与它们的频率成正比（例如，任何项目中最多 3 个 - `max_proportion`）。在这个例子中，我最终会得到 3 个香蕉、橙子和苹果，以及 1 个梨。

```
def get_relative_quantities(total_frequency, items, max_results, max_proportion):
    results = {}
    num_added = 0
    for freq, the_group in it.groupby(items, lambda x: x.frequency):
        if num_added == max_results:
            break

        the_group_list = list(the_group)
        group_size = len(the_group_list)
        shuffle(the_group_list)

        for item in the_group_list:
            if num_added == max_results:
                break

            rel_freq = min(math.ceil((freq/total_frequency)*max_results), max_proportion)
            results[item] = rel_freq
            num_added += rel_freq

    return results 
```

我担心的一件事是，如果使用这种方法，如果只有 1 个项目，我将无法获得足够的结果。我只会得到 3（假设`max_proportion`10 分中有 3 分）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:48:33.040

这将取决于哪种策略更适合您的需求。假设 your `max_results`is`10`和 your `max_proportion`is `2`。应该退回什么？第一次迭代将得到`2`每个。

*   如果你放弃你的结果并重做所有事情，增加到`max_proportion`，`3`梨的数量将下降到`1`（即结果将像你的例子一样）；
*   如果您保留结果并进行新的迭代，使用`max_results = 2`and `max_proportion = 1`，您将增加一个香蕉和一个橙子；
    *   如果`max_proportion`保持在`2`，您可能会得到 2 个香蕉或 2 个橙子，而其他一个都没有。

无论您想要的输出是什么，我的建议都是一样的：检查是否有足够的结果，如果有必要，`get_relative_quantities`再次调用，或者减少`max_results`（获取剩余元素）或增加`max_proportion`（丢弃初始结果并接受越来越多的每个项目）。根据需要多次执行此操作以达到所需数量或耗尽可能性。[（这与迭代深化](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)背后的原理相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:45:21.843

首先，建立一个具有成比例元素数量的项目列表：

```
items = {"bananas":12, "oranges":12, "apples":11, "pears":2}

choices = []
[choices.extend([k] * v) for k, v in items.items()] 
```

接下来，使用每个（每个可能的项目之一）的最小数量设置最终结果：

```
selected = list(items.keys()) 
```

最后，对于您要选择的其余项目，从按比例复制的项目列表中选择一个随机项目：

```
import random as rnd
[selected.append(rnd.choice(choices)) for i in xrange(10 - len(items))] 
```

所有这些片段组合在一起：

```
import random as rnd

items = {"bananas":12, "oranges":12, "apples":11, "pears":2}

choices = []
[choices.extend([k] * v) for k, v in items.items()]

selected = list(items.keys())
[selected.append(rnd.choice(choices)) for i in xrange(10 - len(items))] 
```

以及运行的输出：

```
>>> pp.pprint(selected)
['pears',
 'bananas',
 'oranges',
 'apples',
 'bananas',
 'bananas',
 'oranges',
 'apples',
 'apples',
 'apples'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T23:55:51.080

您可以使用[d'Hondt 方法](https://en.wikipedia.org/wiki/D%27Hondt_method)（或 Jefferson 方法）来执行此操作。

```
import heapq, collections, itertools

def fruit_divided(fruit, weight, max_proportion):
    for div in range(1, min(weight, max_proportion) + 1):
        yield (- weight / div, fruit)

def pick(items, max_results, max_proportion):
        fruits = heapq.merge(*(fruit_divided(fruit, frequency, max_proportion)
                               for fruit, frequency in items.items()))
        fruits = itertools.islice(fruits, max_results)
        return collections.Counter(fruit for _, fruit in fruits) 
```

样品运行：

```
>>> items = {"bananas":12, "oranges":12, "apples":11, "pears":2}
>>> max_results = 10
>>> max_proportion = 3
>>> print(pick(items, max_results, max_proportion))
Counter({'oranges': 3, 'bananas': 3, 'apples': 3, 'pears': 1}) 
```

如果只能采到少于`max_results`一个水果，将返回可能的最大数量。

```
>>> print(pick(items, max_results, max_proportion))
Counter({'oranges': 3, 'bananas': 3, 'apples': 3, 'pears': 2}) 
```

# android - 如何在flash builder上提取obb文件？

> ID：14049306
> 
> 赞同：1
> 
> 时间：2012-12-27T04:16:51.740
> 
> 标签：android, air, flash-builder

```
var zip:FZip = new FZip();
zip.load(new URLRequest("xx.obb")); 
```

此代码不起作用。它抛出“未知记录签名：”错误。

你是如何提取 .obb 文件的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T16:06:06.363

如果您的`obb`文件与任何其他`zip`文件一样，那么您可以这样对待它。首先，您需要一个要提取的文件列表（可能是您知道的所有文件）。

这是获取文件的一种方法：

```
 private function obbFileUnpackingRoutine(event:Event):void{
    addChild(obbUnpackScreen);
    obbUnpackScreen.obbProgress.scaleX = zipCount/filesToUnpack.length;
    setChildIndex(obbUnpackScreen, numChildren -1);
    for (var i:uint = 0; i<24; i++){
        if (zipCount == filesToUnpack.length){
            zipDone = true;
            removeEventListener(Event.ENTER_FRAME, obbFileUnpackingRoutine);
            removeChild(obbUnpackScreen);
            var fr:FileStream=new FileStream();
            var str:String = File.applicationStorageDirectory.nativePath;
            var cacheDir= new File(str +"/YourSettings");
            fr.open(cacheDir.resolvePath("isObbUnpacked.pnr"),FileMode.WRITE);
            fr.writeObject([zip.getFileCount(),zipCount]);
            fr.close();
            return
        }
        var file:FZipFile = zip.getFileByName(filesToUnpack[zipCount])
        var cacheDir:File= null;
        var str:String = File.applicationStorageDirectory.nativePath;
        cacheDir= new File(str);
        var fileContents = file.content
        var fr:FileStream=new FileStream();
        fr.open(cacheDir.resolvePath(file.filename),FileMode.WRITE);
        fr.writeBytes(fileContents);
        fr.close();
        zipCount++;
    }   

} 
```

如果内存允许，您可能希望直接从 zip 文件加载文件，这样您就不必解压缩它们。任何只能通过 urlRequest 访问的文件当然都必须被提取但是您可以使用 byteArrays 加载 png 文件、mp3 文件和您自己的自定义文件

我的 obb 文件有数千个微小的 mp3 文件，在 allWinner A10 处理器上提取最多可能需要 3 分钟。直接加载意味着它可以立即获取文件。而且几乎没有延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:01:33.123

那你需要读吗？如果要加载游戏，我认为这是加载它的好方法，因此最好从特定路线加载它

例如：sdcard/android/obb/filename.obb

# iphone - 处理远程通知

> ID：14049307
> 
> 赞同：1
> 
> 时间：2012-12-27T04:16:53.667
> 
> 标签：iphone, objective-c, notifications

我的应用程序中有四个屏幕，即**A,B,C,D**。**A**是我**在应用程序启动时出现的第一个应用程序屏幕。**假设 C 和 D 屏幕显示了一些数据，这些数据在两个不同的通道中订阅了远程通知。具有相同的客户端密钥和应用程序 ID。

1.  当远程通知到来时，当我点击通知时它显示第一个屏幕 ieA。我想根据通知类型显示屏幕 C 或 D。

2.  方法中 NSDictionary userInfo 的内容是什么

    **应用程序：（UIApplication *）应用程序didReceiveRemoteNotification：（NSDictionary *）userInfo**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:32:01.103

当您想查看目录的内容时，只需使用 NSLog。在这种情况下，将以下代码添加到 -application:didReceiveRemoteNotification: 方法。

```
NSLog("UserInfo: %@", userInfo); 
```

这会将目录的内容打印到日志中。对不起，我没有给出更具体的答案，这个问题有点模糊。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:05:40.107

要显示屏幕 C 或 D，请在 didReceiveRemoteNotification 方法中检查应用程序状态。

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
   if (application.applicationState == UIApplicationStateInactive) {
       // 检查屏幕 C 或 D 的条件，并根据您的条件将用户重定向到该屏幕。
   }
}

```

# linux - Linux：程序的内存使用摘要

> ID：14049310
> 
> 赞同：0
> 
> 时间：2012-12-27T04:18:16.023
> 
> 标签：linux, trace, proc

我需要一些命令行实用程序能够运行指定的命令并测量峰值和平均进程组内存使用情况（RSS、虚拟和共享）。据我了解，这应该是 ptrace(2) 和 libprocps 的组合，但我找不到类似的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:25:00.670

```
/usr/bin/time -f "max RSS: %MKb" <command> 
```

有关更多详细信息，请参阅 man time。

# php - wordpress 页面的条件标签

> ID：14049312
> 
> 赞同：1
> 
> 时间：2012-12-27T04:18:39.717
> 
> 标签：php, wordpress, conditional

我正在尝试让标题图像在某些类别页面上以不同方式显示。例如，足球运动员的图像将显示在所有具有足球类别的帖子上。

这也需要显示在存档页面上，所以我使用了条件标签

```
is_category('football') 
```

例如，这很好用。虽然它没有在实际的帖子页面本身上显示标题图像。有没有办法让我以某种方式完成这项工作？也许在某个地方还有另一个条件标签？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:49:46.047

Actually in `WordPress` you can use a conditional tags in many ways. In your question you mentioned you want to check if it's in the category/archive page and you know that how to do it but in a comment you mentioned you want to check `if a post belongs to a category` and in this case it could be on a single post page.

To check in the single post page you can use

```
if(is_single() && in_category('football')) 
```

You may check these links [in_category](http://codex.wordpress.org/Function_Reference/in_category), [is_object_in_term](http://codex.wordpress.org/Function_Reference/is_object_in_term) and [is_single](http://codex.wordpress.org/Function_Reference/is_single).

# database - 如何为 Windows Phone 8 移动应用程序创建持久数据库

> ID：14049314
> 
> 赞同：3
> 
> 时间：2012-12-27T04:19:04.083
> 
> 标签：database, visual-studio-2012, windows-phone-8

我想为 windows phone 8 sdk 创建静态数据库。我不知道在 windows phone 中，无论是 sqlite 还是 sql server，都必须使用什么数据库。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T23:33:37.800

SQLite 是向 Windows Phone 应用程序添加进程内数据库的流行选项。

您可能想阅读这篇文章以了解更多信息：

[将 SQLite 数据库引擎与 Windows Phone 8 应用程序一起使用](http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/03/12/using-the-sqlite-database-engine-with-windows-phone-8-apps.aspx)

如果您愿意，@rs 在上面指出，您也可以考虑 SQL Server Compact Edition。来自总是很棒的 ErikEj 的这篇文章应该会让你走上正确的道路：

[从现有数据库生成 Windows Phone 8 本地数据库 DataContext](http://erikej.blogspot.com/2013/04/generate-windows-phone-8-local-database.html)

HTH。

# ios - 链接不会在 iOS 独立 Web 应用程序的 iframe 目标中打开

> ID：14049315
> 
> 赞同：1
> 
> 时间：2012-12-27T04:19:09.837
> 
> 标签：ios, css, html, iframe, iphone-standalone-web-app

我遇到了泡菜。当我通过 iOS 6 在移动 Safari 中查看我的网络应用程序时，我能够成功地将我的基本目标链接打开 `<a href="link.html" target="mainframe"`到我的回顾 iframe中`<iframe src="http://www.linkexample.org/" name="mainframe"></iframe>`

尽管通过独立打开应用程序时，所有链接都会退出应用程序并进入 Mobile Safari。[您可以在http://lacitilop.com/m2](http://lacitilop.com/m2)看到一个工作示例

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:55:06.083

您需要编写一些 javascript 来更改`src`iframe 的。

首先，让您的应用程序正常工作，这样链接就不会通过使用以下内容打开 Safari（顺便说一下，它使用的是 jquery）：

```
if (window.navigator.standalone) {

    $(document).on(
        "click",
        "a",
        function (event) {

            event.preventDefault();

            var aurl = $(event.target).attr("href");
            if (aurl) {
                location.href = $(event.target).attr("href");
            }
            else {
                location.href = this;
            }
        }
    );
} 
```

那么您也需要对其进行修改以使用 iframe。

有关更多 iphone 应用程序的内容，您需要查看以下内容：

[http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

# coffeescript - coffeescript 自动生成的命名空间导致引用错误 jasmine test

> ID：14049320
> 
> 赞同：0
> 
> 时间：2012-12-27T04:19:37.907
> 
> 标签：coffeescript, jasmine

我尝试用 Coffeescript 和 Jasmine 编写一些简单的测试。

```
# greet.coffee    
greet = (message, person) ->
  "#{message}, #{person}!" 
```

这是我的茉莉花规格文件：

```
# greetSpec.coffee
describe 'greet', ->

  it 'should greet with message and name', ->
    result =  greet 'Hello', 'John'
    expect(result).toBe 'Hello, John!' 
```

当我在 Jasmine 中启动 SpecRunner 时，我得到： **ReferenceError: greet is not defined**

我猜这与咖啡脚本自动生成的命名空间有关，因此从 Spec 文件中看不到 greet 函数。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:05:11.290

好的，可以用一个简单的全局变量来解决它（但不确定这是否是一个好方法）：

问候咖啡：

```
@greet = (message, person) ->
  "#{message}, #{person}!" 
```

greetSpec.coffee：

```
describe 'greet', ->

  it 'should greet with message and name', ->
    result =  greet 'Hello', 'John'
    expect(result).toBe 'Hello, John!' 
```

# c++ - 静态全局函数的静态局部成员？

> ID：14049322
> 
> 赞同：4
> 
> 时间：2012-12-27T04:19:41.527
> 
> 标签：c++, c++11

如果我在静态全局函数中有一个静态局部变量（不是类静态，全局静态）......

foo.cpp：

```
static void f()
{
    static T x;
    ...
} 
```

x 实例是否保证在整个应用程序中是单例的？

如果两个翻译单元`static void f()`如上定义。他们每个人都有自己的 x 实例，还是共享？为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T04:22:26.153

`static`函数具有*内部链接*，因此每个`f`翻译单元中的每个函数都是不同的独立函数，并且每个翻译单元都有一个实例`x`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T04:35:57.737

> x 实例是否保证在整个应用程序中是单例的？

它保证在第一次`f()`被调用时被创建。它是一个`static storage duration object`，这意味着它将与另一个一起被销毁`static storage duration object`（以相反的创建顺序）。

此变量`x`仅在函数内部可见`f()`。

> 如果两个翻译单元如上所述定义静态 void f() 会怎样。他们每个人都有自己的 x 实例，还是共享？为什么？

因为这是一个静态函数。它位于翻译单元的本地。定义此函数的每个翻译单元都将拥有自己的函数及其内部变量的副本。这不会暴露在翻译单元之外，因此它只能来自翻译单元内部。

# android - 将SQLite数据库转换为excel的Android程序

> ID：14049323
> 
> 赞同：4
> 
> 时间：2012-12-27T04:20:23.683
> 
> 标签：android, excel, android-sqlite

**`I want to change the sqlite database .db file to excel.`**

但我无法找到我到底要做什么。谁能以简单的方式详细说明我必须执行什么才能完成此任务。

通过在谷歌上搜索，出现了很多链接，但我无法理解如何一步一步地做到这一点。

**我已经关注了这些链接：**

**1.** [如何在android中将excel表格转换为sqlite的数据库](https://stackoverflow.com/questions/7412293/how-to-convert-excel-sheet-into-database-of-sqlite-in-android)

**2.SQlite** [数据库在Android中以编程方式转换为Excel文件格式](https://stackoverflow.com/questions/13068774/sqlite-database-problematically-convert-into-excel-file-format-in-android)

**3\.** [http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-21T22:37:08.927

我的解决方案是在第一步将 sqlite 数据库转换为 csv，然后在第二步将 csv 文件转换为 xls，它对我来说很好，你需要 2 个库（opencsv-1.7.jar; poi-3.8-20120326.罐）

```
 public class ExportDatabaseCSVTask extends AsyncTask<String, Void, Boolean>

{

private final ProgressDialog dialog = new ProgressDialog(DatabaseExampleActivity.this);

 @Override

protected void onPreExecute()

{

    this.dialog.setMessage("Exporting database...");

    this.dialog.show();

}

protected Boolean doInBackground(final String... args)

{

    File dbFile=getDatabasePath("database_name");
    //AABDatabaseManager dbhelper = new AABDatabaseManager(getApplicationContext());
    AABDatabaseManager dbhelper = new AABDatabaseManager(DatabaseExampleActivity.this) ;
    System.out.println(dbFile);  // displays the data base path in your logcat 

    File exportDir = new File(Environment.getExternalStorageDirectory(), "");        

    if (!exportDir.exists()) 

    {
        exportDir.mkdirs();
    }

    File file = new File(exportDir, "excerDB.csv");

    try

    {

        if (file.createNewFile()){
            System.out.println("File is created!");
            System.out.println("myfile.csv "+file.getAbsolutePath());
          }else{
            System.out.println("File already exists.");
          }

        CSVWriter csvWrite = new CSVWriter(new FileWriter(file));
      //SQLiteDatabase db = dbhelper.getWritableDatabase();

        Cursor curCSV=db.getdb().rawQuery("select * from " + db.TABLE_NAME,null);

        csvWrite.writeNext(curCSV.getColumnNames());

        while(curCSV.moveToNext())

        {

            String arrStr[] ={curCSV.getString(0),curCSV.getString(1),curCSV.getString(2)};

         /*curCSV.getString(3),curCSV.getString(4)};*/

            csvWrite.writeNext(arrStr);

        }

        csvWrite.close();
        curCSV.close();
        /*String data="";
        data=readSavedData();
        data= data.replace(",", ";");
        writeData(data);*/

        return true;

    }

    catch(SQLException sqlEx)

    {

        Log.e("MainActivity", sqlEx.getMessage(), sqlEx);

        return false;

    }

    catch (IOException e)

    {

        Log.e("MainActivity", e.getMessage(), e);

        return false;

    }

}

protected void onPostExecute(final Boolean success)

{

    if (this.dialog.isShowing())

    {

        this.dialog.dismiss();

    }

    if (success)

    {

        Toast.makeText(DatabaseExampleActivity.this, "Export succeed", Toast.LENGTH_SHORT).show();

    }

    else

    {

        Toast.makeText(DatabaseExampleActivity.this, "Export failed", Toast.LENGTH_SHORT).show();

    }
}} 
```

将 CSV 导出到 XLS 部分

```
 public class CSVToExcelConverter extends AsyncTask<String, Void, Boolean> {

private final ProgressDialog dialog = new ProgressDialog(DatabaseExampleActivity.this);

@Override
protected void onPreExecute()
{this.dialog.setMessage("Exporting to excel...");
 this.dialog.show();}

@Override
protected Boolean doInBackground(String... params) {
    ArrayList arList=null;
    ArrayList al=null;

    //File dbFile= new File(getDatabasePath("database_name").toString());
    File dbFile=getDatabasePath("database_name");
    String yes= dbFile.getAbsolutePath();

    String inFilePath = Environment.getExternalStorageDirectory().toString()+"/excerDB.csv";
    outFilePath = Environment.getExternalStorageDirectory().toString()+"/test.xls";
    String thisLine;
    int count=0;

    try {

    FileInputStream fis = new FileInputStream(inFilePath);
    DataInputStream myInput = new DataInputStream(fis);
    int i=0;
    arList = new ArrayList();
    while ((thisLine = myInput.readLine()) != null)
    {
    al = new ArrayList();
    String strar[] = thisLine.split(",");
    for(int j=0;j<strar.length;j++)
    {
    al.add(strar[j]);
    }
    arList.add(al);
    System.out.println();
    i++;
    }} catch (Exception e) {
        System.out.println("shit");
    }

    try
    {
    HSSFWorkbook hwb = new HSSFWorkbook();
    HSSFSheet sheet = hwb.createSheet("new sheet");
    for(int k=0;k<arList.size();k++)
    {
    ArrayList ardata = (ArrayList)arList.get(k);
    HSSFRow row = sheet.createRow((short) 0+k);
    for(int p=0;p<ardata.size();p++)
    {
    HSSFCell cell = row.createCell((short) p);
    String data = ardata.get(p).toString();
    if(data.startsWith("=")){
    cell.setCellType(Cell.CELL_TYPE_STRING);
    data=data.replaceAll("\"", "");
    data=data.replaceAll("=", "");
    cell.setCellValue(data);
    }else if(data.startsWith("\"")){
    data=data.replaceAll("\"", "");
    cell.setCellType(Cell.CELL_TYPE_STRING);
    cell.setCellValue(data);
    }else{
    data=data.replaceAll("\"", "");
    cell.setCellType(Cell.CELL_TYPE_NUMERIC);
    cell.setCellValue(data);
    }
    //*/
    // cell.setCellValue(ardata.get(p).toString());
    }
    System.out.println();
    }
    FileOutputStream fileOut = new FileOutputStream(outFilePath);
    hwb.write(fileOut);
    fileOut.close();
    System.out.println("Your excel file has been generated");
    } catch ( Exception ex ) {
    ex.printStackTrace();
    } //main method ends
    return true;
}

protected void onPostExecute(final Boolean success)

{

    if (this.dialog.isShowing())

    {

        this.dialog.dismiss();

    }

    if (success)

    {

        Toast.makeText(DatabaseExampleActivity.this, "file is built!", Toast.LENGTH_LONG).show();

    }

    else

    {

        Toast.makeText(DatabaseExampleActivity.this, "file fail to build", Toast.LENGTH_SHORT).show();

    }

}

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-14T14:47:20.370

我知道这个问题有点老了，但它为我提供了同一个问题的答案。我已经稍微清理了代码，并通过让我的数据库帮助程序类返回一个 ArrayList 来完全消除编写 csv 文件的需要。不过仍然使用 Apache POI。

```
File folder =new File(Environment.getExternalStorageDirectory()+APP_FILES_PATH);
    if(!folder.exists())
    {
        folder.mkdir();
    }
    DatabaseHelper dbHelper = DatabaseHelper.getInstance(context);
    ArrayList<String[]> exts = dbHelper.getExtinguisherArray(1);

       HSSFWorkbook hwb = new HSSFWorkbook();
        HSSFSheet sheet = hwb.createSheet("extinguishers");
        for(int x = 0; x < exts.size(); x++)
        {
            String[] arr = exts.get(x);
            HSSFRow row = sheet.createRow(x);
            for(int i = 0; i< arr.length; i++)
            {
                HSSFCell cell = row.createCell(i);
                String data = arr[i];
                cell.setCellValue(data);

            }
        }
        FileOutputStream fileOut = new FileOutputStream(Environment.getExternalStorageDirectory()+APP_FILES_PATH+"file.xls");
        hwb.write(fileOut);
        fileOut.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-25T07:20:57.793

## 将 Android SqliteDb 导出为 CSV 格式

### 你需要做这些步骤...

1.  添加这个 jar 文件**opencsv-1.7.jar** [http://www.java2s.com/Code/Jar/o/Downloadopencsv17jar.htm](http://www.java2s.com/Code/Jar/o/Downloadopencsv17jar.htm)

2.  然后使用此代码

```

公共类 ExportDatabaseToCSV{

    上下文上下文；
    公共 ExportDatabaseToCSV（上下文上下文）{
        this.context=上下文；
    }

    公共无效 exportDataBaseIntoCSV(){

       CredentialDb db = new CredentialDb(context);//这里 CredentialDb 是我的数据库。你可以创建你的数据库对象。
       文件 exportDir = new File(Environment.getExternalStorageDirectory(), "");        

       如果（！exportDir.exists（））
          {
              exportDir.mkdirs();
          }

      文件 file = new File(exportDir, "csvfilename.csv");

      尝试
      {
          文件.createNewFile();                
          CSVWriter csvWrite = new CSVWriter(new FileWriter(file));
          SQLiteDatabase sql_db = db.getReadableDatabase();//这里创建一个方法，返回SQLiteDatabaseObject.getReadableDatabase();
          光标 curCSV = sql_db.rawQuery("SELECT * FROM "+CredentialDb.TABLE_NAME,null);
          csvWrite.writeNext(curCSV.getColumnNames());

          而（curCSV.moveToNext（））
              {
                 //你想导出哪一列你可以在这里添加...
                  字符串 arrStr[] ={curCSV.getString(0),curCSV.getString(1), curCSV.getString(2)};
                  csvWrite.writeNext(arrStr);
              }

          csvWrite.close();
          curCSV.close();
      }
      捕获（异常 sqlEx）
      {
          Log.e("错误:", sqlEx.getMessage(), sqlEx);
      }
    }   
}

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-16T09:19:12.127

除了@user2324120 的回答，而且我们在 Android 中，您可以直接将库添加到 gradle（因此您不需要下载 jar）：

```
compile 'com.opencsv:opencsv:3.7'
compile 'org.apache.poi:poi:3.14' 
```

我也采用了不同的方式，一种更可定制的方式（并且没有无用的 CSV 转换）。在这里，有一些评论：

```
 public static Pair<Boolean, String> exportToXLS(Context context, boolean byAuthor) {
        try {
            HSSFWorkbook workbook = new HSSFWorkbook();
            HSSFSheet sheet = workbook.createSheet(context.getString(R.string.sheet_name)); // Good for localization
            initSheetColumns(context, workbook, sheet, byAuthor);
            addBooksToSheet(sheet, byAuthor);
            setColumsWidth(sheet);
            OutputStream outputStream = new FileOutputStream(new File(Methods.getDownloadsDirectory(), byAuthor ? context.getString(R.string.mylibrary_by_author_xls) : context.getString(R.string.mylibrary_xls)).getAbsolutePath());
            workbook.write(outputStream);
            outputStream.flush();
            outputStream.close();
            return new Pair<>(true, context.getString(R.string.database_saved));

        } catch (Exception e) {
            e.printStackTrace();
            return new Pair<>(false, context.getString(R.string.an_error_has_occured_during_xls_file_creation));
        }
    }

    private static void initSheetColumns(Context context, HSSFWorkbook workbook, HSSFSheet sheet, boolean byAuthor) {
        HSSFRow row = sheet.createRow(0);
        HSSFCell cell = row.createCell(0);
        cell.setCellValue(byAuthor ? context.getString(R.string.db_author) : context.getString(R.string.db_title));
        cell = row.createCell(1);
        cell.setCellValue(byAuthor ? context.getString(R.string.db_title) : context.getString(R.string.db_author));
        cell = row.createCell(2);
        cell.setCellValue(context.getString(R.string.db_publisheddate));
        /*
        etc.
        */
        boldHeaders(workbook, row);
    }

    private static void boldHeaders(HSSFWorkbook workbook, HSSFRow row) {
        HSSFCellStyle style = workbook.createCellStyle();
        /* Do your own style
        ...
        */
        for (int i = 0; i < 8; i++) {
            row.getCell(i).setCellStyle(style);
        }
    }

    // Allow data personalisation and localisation if needed
    private static void addBooksToSheet(HSSFSheet sheet, boolean byAuthor) {
        int i = 1;
        List<Book> books = Book.listAll(Book.class); // I use Sugar library here, if you're not just make a simple db query to get your objects
        Collections.sort(books, byAuthor ? Book.bookAuthorComparator : Book.bookNameComparator);
        for (Book book : books) {
            HSSFRow row = sheet.createRow(i);
            HSSFCell cell = row.createCell(0);
            cell.setCellValue(byAuthor ? getBookValue(book, true) : book.getTitle());
            cell = row.createCell(1);
            cell.setCellValue(byAuthor ? book.getTitle() : getBookValue(book, false));
            cell = row.createCell(2);
            cell.setCellValue(book.getPublishedDate());
            /*
            etc.
            */
            i++;
        }
    }

    private static void setColumsWidth(HSSFSheet sheet) {
        for (int i = 0; i < 8; i++) {
            sheet.setColumnWidth(i, 255 * getMaxNumCharacters(sheet, i)); // Autosize not working on Android
        }
    }

    // My method to get the max num char, if it can hekp
    public static int getMaxNumCharacters(Sheet sheet, int column) {
        int max = 0;
        for (int rowIndex = 0; rowIndex <= sheet.getLastRowNum(); rowIndex++) {
            Row row = sheet.getRow(rowIndex);
            if (row == null) {
                continue;
            }
            Cell cell = row.getCell(column);
            if (cell != null) {
                int nb = cell.getStringCellValue().length();
                if (nb > max) {
                    max = nb;
                }
            }
        }
        max = (int) (max * 1.1);
        if (max > 255) {
            return 255; // max 255 char for width
        }
        return max;
    } 
```

希望能帮助到你！

# android - Android 使用 layout_weight 以完美的比例在 LinearLayout 中排列小部件

> ID：14049328
> 
> 赞同：-1
> 
> 时间：2012-12-27T04:21:04.237
> 
> 标签：android, android-layout, android-widget

在我的应用程序中，我必须以适当的比例（宽度）排列我的小部件。我有 6 个小部件，我想以`2:2:4:4:1:1`仅考虑宽度的比例对齐。我试过这个，但我没有得到正确的解决方案。

```
<LinearLayout
            android:id="@+id/register_header12"
            android:layout_width="fill_parent"
            android:layout_height="55dp"
            android:layout_alignParentBottom="true"
            android:layout_marginTop="5dp"
            android:weightSum="14"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/register_title_image"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:contentDescription="@string/app_icon_desc"
                android:src="@drawable/logo_blue" />

            <TextView
                android:id="@+id/register_title_name"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:text="Name"
                android:textStyle="bold" />

            <Button
                android:id="@+id/bbb"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:background="@drawable/bar_button"
                android:text="BBB"
                android:textStyle="bold" />

            <Button
                android:id="@+id/aaa"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:background="@drawable/bar_button"
                android:text="AAA"
                android:textStyle="bold" />

            <ImageView
                android:id="@+id/setting"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="4"
                android:src="@drawable/ic_menu_manage"
                android:onClick="showSettings"

              />

            <ImageView
                android:id="@+id/signout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="4"
                android:src="@drawable/ic_menu_blocked_user"
                android:onClick="doSignOut"
                />
        </LinearLayout> 
```

请给我最好的方法..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T04:23:37.290

将所有`android:layout_width`s 更改为 0。这将允许 weight 属性确定宽度，应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T05:07:11.733

首先将 weightSum=(在您的情况下所有布局权重的总和为 14) 在您的线性布局中，

然后根据您的比例制作子视图宽度 wrap_content 和 weight 属性。

希望这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T04:25:53.123

layout_weight 不决定小部件的大小。在布局中，每个小部件都会测量其大小并需要父布局的空间。然后父母根据layout_weight的比例将剩余空间分配给所有孩子。因此，在您的情况下，您可以指定 layout_width=0。这样，widgets 不需要任何空间，然后父布局可以根据 layout_weight 分配空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T04:32:51.667

拉尔加的回答是正确的。对于代码，您可以参考下面的代码。

请检查代码：

```
<LinearLayout
        android:id="@+id/register_header12"
        android:layout_width="fill_parent"
        android:layout_height="55dp"
        android:layout_alignParentBottom="true"
        android:layout_marginTop="5dp"
        android:weightSum="14"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/register_title_image"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="2"
            android:contentDescription="@string/app_icon_desc"
            android:src="@drawable/logo_blue" />

        <TextView
            android:id="@+id/register_title_name"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="2"
            android:text="Name"
            android:textStyle="bold" />

        <Button
            android:id="@+id/bbb"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="@drawable/bar_button"
            android:text="BBB"
            android:textStyle="bold" />

        <Button
            android:id="@+id/aaa"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="@drawable/bar_button"
            android:text="AAA"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/setting"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="4"
            android:src="@drawable/ic_menu_manage"
            android:onClick="showSettings"

          />

        <ImageView
            android:id="@+id/signout"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="4"
            android:src="@drawable/ic_menu_blocked_user"
            android:onClick="doSignOut"
            />
    </LinearLayout> 
```

希望这会帮助你。

# java - 使用纯 java 的 Android 直播视频

> ID：14049338
> 
> 赞同：4
> 
> 时间：2012-12-27T04:23:31.237
> 
> 标签：java, android, video, live-streaming

我正在尝试在 android 中做一个实时流媒体应用程序，我的问题是使用 http 和 rtsp 有什么区别有没有办法只使用 java 代码来做到这一点，我指的是已经完成的很多项目都在使用 java 和其他语言组合，有没有什么方法可以仅使用 java 以有效的方式进行流式传输

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T04:30:52.583

RTSP means *Real Time Streaming Protocol*, is a protocol specifically designed for streaming purpose, with RTSP you can control absolute positioning within the media stream, recording and possibly device control etc

*   RTSP introduces a number of new methods and has a different protocol identifier.
    *   An RTSP server needs to maintain state by default in almost all cases, as opposed to the stateless nature of HTTP.
    *   Both an RTSP server and client can issue requests.
    *   Data is carried out-of-band by a different protocol.

If you want to use video streaming you have to use RTSP

See this [LINK](http://www.ietf.org/rfc/rfc2326.txt) for more details about the protocol RTSP

NB

To show the video content in Android you can use the VideoView

```
myVideoView = (VideoView) findViewById(R.id.myview);
myVideoView.setVideoPath("rtsp://SERVER_IP_ADDR:5544/");
myVideoView.setMediaController(new MediaController(this)); 
```

As described [HERE](http://developer.android.com/guide/appendix/media-formats.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:29:18.767

我建议您使用 RTMP（实时消息传递协议）而不是 RTSP，市场上有许多可用的开源插件，例如著名的“flowplayer”，它能够按照工业标准使用RTMP 协议。它使用现有的 Flowplayer 源插件迅速发展了在 Apple 设备上流式传输视频的能力。希望这可以帮助

Flowplaye：[flowplayer 网站](http://www.flowplayer.org) 我们目前正在使用 Akamai 流媒体功能和 flowplayer 插件，以获得完美的流媒体体验。

# delphi - 保持面板始终位于 mdi 应用程序底部

> ID：14049341
> 
> 赞同：1
> 
> 时间：2012-12-27T04:23:42.517
> 
> 标签：delphi

我想知道，如何让面板始终位于我拥有的所有 mdi 表单的底部。

```
 procedure TPanel.Loaded;
      begin
      Windows.SetParent(Handle, MainForm.ClientHandle);
      end;  

       procedure TPanel.WMWindowPosChanging(var Message: TWMWindowPosChanging);
         begin
           inherited;
           Message.WindowPos^.hwndInsertAfter := HWND_BOTTOM;
         end; 
```

但是，当我使用系统菜单的表单和下一个命令更改 MDI 表单时，面板放在上面谢谢和抱歉我的英语

# jquery - 通过ajax拉取html时丢失数据图标

> ID：14049347
> 
> 赞同：0
> 
> 时间：2012-12-27T04:24:35.713
> 
> 标签：jquery, html, jquery-mobile

我有一个生成网格数据的 php 函数，看起来类似于：

```
<div id="_gridData">
            <div class="ui-grid-b">
                <div class="ui-block-a mobile-grid-header">&nbsp;</div>
                <div class="ui-block-b mobile-grid-header date-block">Time</div>
                <div class="ui-block-c mobile-grid-header number-block">Meal Type</div>
                <div class="ui-block-a ">
                <a id="delete_id_84" class="mp-delete-link ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-btn-icon-notext" data-iconpos="notext" data-icon="delete" data-role="button" href="" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" title="Delete"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Delete</span><span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span></span></a></div>
                <div class="ui-block-b  date-block  "><a id="edit_id_84" class="mp-edit-link ui-link" data-ajax="false" href="">02:00 AM</a></div>
                <div class="ui-block-c  date-block ">Lunch</div>
            </div>
</div> 
```

但是，当我使用 ajax 调用相同的函数来获取相同的数据时，它看起来像这样：

```
<div id="_gridData">
            <div class="ui-grid-b">
                <div class="ui-block-a mobile-grid-header">&nbsp;</div>
                <div class="ui-block-b mobile-grid-header date-block">Time</div>
                <div class="ui-block-c mobile-grid-header number-block">Meal Type</div>
                <div class="ui-block-a ">
                <a id="delete_id_84" class="mp-delete-link" data-iconpos="notext" data-icon="delete" data-role="button" href="">Delete</a></div>
                <div class="ui-block-b  date-block  "><a id="edit_id_84" class="mp-edit-link" data-ajax="false" href="">02:00 AM</a></div>
                <div class="ui-block-c  date-block ">Lunch</div>
            </div>
</div> 
```

请注意，我丢失了附加到锚标记的所有额外类。

它使这个网格： ![在此处输入图像描述](../Images/550effdefc45db4386124ec2009bd7f8.png)

看起来像这样： ![在此处输入图像描述](../Images/51cc17593c8dc48f406e14aa9e2d990d.png)

所以我的删除数据图标不见了。

我知道我在按钮和选择菜单等对象上调用“刷新”：

```
$('#_mealTime').val('');
$('#_mealTime').selectmenu("refresh"); 
```

我需要对锚标签进行类似的调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:53:45.520

是的，有一个用于页面刷新的类似调用，它将在您的情况下为您提供帮助：

```
$('#_gridData').trigger('create'); 
```

这是从您的代码创建的工作示例：http: [//jsfiddle.net/Gajotres/f2BYn/](http://jsfiddle.net/Gajotres/f2BYn/)。我缺少您的自定义 CSS，因此缺少您的部分样式。还是***trigger('create');*** 将为 jQM 元素设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:32:40.277

检查您的 CSS url，当您在与初始 php 脚本执行以呈现页面不同的路径上使用 ajax 时，您的路径可能会被抛出。如果可能，请尝试使用根相对路径。

/images/delete_button

代替

图像/删除按钮

# java - 如何将 Maven 添加到现有的 IntelliJ Android 项目

> ID：14049351
> 
> 赞同：7
> 
> 时间：2012-12-27T04:25:36.473
> 
> 标签：java, android, maven

我一直在做一些关于将 Maven 添加到现有 Android 项目的研究，但我正在努力了解它是如何工作的。我曾经在使用 Netbeans 的基于 Web 的项目中使用过 Maven，但是对于这个项目，我希望使用 IntelliJ。我可以创建一个新的“Maven 模块”，但我已经有一个 Android 项目，所以我不完全确定这是我应该采取的路线。

我发现[这篇文章](https://stackoverflow.com/questions/7452771/is-it-possible-to-setup-intellij-android-project-to-work-with-maven)确实提供了一些细节，但不是一步一步的 Windows 集成指南（至少我所看到的）。

我可以在 Android 项目中使用 Maven 吗？

**编辑：**我希望在 Windows 环境中执行此操作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T05:11:22.170

最后一句回答你的问题：是的，你可以使用 Maven 来构建一个 Android 项目。

您应该在 Maven 项目中使用 maven-android-plugin。开始的最佳位置是[https://code.google.com/p/maven-android-plugin/wiki/GettingStarted](https://code.google.com/p/maven-android-plugin/wiki/GettingStarted)。需要阅读一下，但绝对值得努力。

如果我有想要切换到 Maven 的现有 IDE 特定 Android 项目，而不是尝试“将 Maven 支持添加到现有 IntelliJ 项目”，我会：

1.  使用适当的原型创建一个新的基于 Maven 的项目[https://github.com/akquinet/android-archetypes](https://github.com/akquinet/android-archetypes)

2.  将现有源/资源复制到 Maven 项目目录。

如果操作正确，您可以在 IntelliJ 中打开这个 (Android) Maven 项目 (pom.xml) 并像使用 Android 项目（包括 GUI 编辑器）一样使用它。IntelliJ 自动从 Maven 的 pom.xml 生成一个 IntelliJ 项目并检测 Android 方面。

这样，您的项目也与 IDE 无关 - 您也可以从命令行执行所有操作（构建/测试/部署） - Maven 项目应该如何成为恕我直言。:D

# iphone - How to get timezone in GMT Form in iOS6

> ID：14049354
> 
> 赞同：2
> 
> 时间：2012-12-27T04:26:31.957
> 
> 标签：iphone, objective-c, ios, ios6

In my iPhone app I want to get system timezone in GMT. Am Using the following code.

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateFormat = @"zzz";
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
    NSString *timeStamp = [dateFormatter stringFromDate:[NSDate date]];
    NSString *timeZoneString=[timeStamp substringFromIndex:3];
    [dateFormatter release]; 
```

Am getting timezone in GMT form in iOS5 but not in iOS6\. How to get timezone in GMT form in iOS6? Please Help!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:37:32.180

你可以检查，

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
```

代替，

```
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:35:53.243

我已经修改了@ACB 的代码，因为有一些拼写错误，尝试`[dateFormatter setTimezone:[NSTimeZone timeZoneForSecondsFromGMT:0]];`而不是`[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];`. 这似乎对我有用。

我想将这个答案归功于@ACB。他/她想出了这种技术，我只是确认了它。

# actionscript-3 - AS3 URLVariables Unescaping Data

> ID：14049360
> 
> 赞同：0
> 
> 时间：2012-12-27T04:27:59.360
> 
> 标签：actionscript-3

I have a PHP file that is queried for information, and it passes a couple of variables back. One variable contains a JSON string with a variable in the object called message, which comes escaped to prevent it from causing issues if the message has an ampersand, single quote, etc in it.

```
&data={"message":"star%27s"} 
```

Obviously the data sent is more complicated, this is just an example. After I take the data passed back by the PHP file and use URLVariables to decode it and access the "data" variable, it ends up looking like:

```
{"message":"star's"} 
```

At this point I can't parse the JSON string, it will throw an error because of the single quote. Encoding it wouldn't work, it would encode more than just everything after the colon.

Is there a way to keep it from converting it? I was thinking I could manually parse the PHP returned string, but it seems unnecessary and I don't want risk running into issues later on because of it. I looked at the AS3 API and I couldn't find anything documenting this or how to disable it.

Any ideas or suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:16:19.957

你试试

Actionscript API escape() 和 unescape() 更多细节参见[Escape 和 unescape](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000614.html#162679)

另请查看 JSON.parse 和 JSON.stringify [working-with-native-json-in-flash-player-11](http://blog.infrared5.com/2011/07/working-with-native-json-in-flash-player-11/)

动作脚本中的 JSON 解码参见[decode-json](https://stackoverflow.com/questions/9667291/how-to-decode-json-using-native-json-or-actionjson-in-flex-3)

# ios - 如何创建自定义导航栏

> ID：14049363
> 
> 赞同：1
> 
> 时间：2012-12-27T04:28:47.703
> 
> 标签：ios, xcode, xcode4

我正在尝试创建一个自定义底部导航栏，但我不希望它是矩形样式。我只想要一个大圆圈（它将是一个图像），用户可以单击它作为按钮。

我知道我可以自定义底部栏的外观，但我不确定如何在中心添加图像并使其溢出栏的原始边界。现在我有这样的东西

```
UIBarButtonItem *item3 = [[UIBarButtonItem alloc]
                          initWithBarButtonSystemItem:UIBarButtonSystemItemOrganize
                          target:self
                          action:nil];

NSArray *items = [NSArray arrayWithObjects:item1, flexibleSpace, item2, flexibleSpace, item3, nil];

self.toolbarItems = items;` 
```

这是一张用于说明的图片。谢谢！ ![在此处输入图像描述](../Images/4c163af465357e1df892a16799f18bfa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:01:58.543

制作自定义导航栏需要做很多工作，因此您可以在图像上创建一个自定义按钮，当用户单击它时，它将更改图像或操作（用户“点击”图像警报弹出:)：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    IBOutlet UIImageView *onlyImageVIew;
    BOOL firstImage;
}
@property (nonatomic, retain) UIImageView *onlyImageVIew;
-(IBAction)buttonClicked;
@end 
```

视图控制器.m

```
@implementation ViewController
@synthesize firstImage, secondImage;

- (IBAction)buttonClicked {
    if (firstImage == YES) {
        onlyImageView.image = [UIImage imageNamed:@"yourImage.png"];
        firstImage == NO
    }
    else {
        onlyImageView.image = [UIImage imageNamed:@"yourSecondImage.png"];
        firstImage == YES
    }
}

- (void)viewDidLoad {
    [super viewDidLoad];

    // when view loaded, load the first image only.
    firstImage = YES;
    onlyImageView.image = [UIImage imageNamed:@"yourLaunchImage.png"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:01:05.310

尝试这些我通常接受定制的步骤`UINavigationBar`

1.在整个项目中隐藏导航栏，在 appdelegate 类中。

2.`UIImageView`在 的位置添加所需的图像`UINavigationBar`。

3.`UIButton`在图片视图需要的位置添加s，您可以根据需要添加按钮图片。

4.点击按钮，推动`UIViewController`自己。

这是创建自定义导航栏的唯一方法，唯一的不便是，您需要自己推送和弹出`UIViewControllers`。

问候

# php - 如何显示大段落的前几行？

> ID：14049370
> 
> 赞同：2
> 
> 时间：2012-12-27T04:30:24.903
> 
> 标签：php, mysql, while-loop, echo

请看图片：

![在此处输入图像描述](../Images/8a33ea3af3e57bd9119db1871f053cef.png)

这是我的社区论坛页面。我在第一行使用#、标题、回复和发布日期。现在我想添加另一个名为 Description 的列，它将显示整个主题的前几行。例如，这里的第二个标题为“计算机组件”，但我想将其显示为“......的组件”。你明白了吗？

无论如何，我将所有数据存储在数据库中。在这里获得更多帮助是我的这个页面的代码。

```
echo "<table border='0' width='100%' id='table-3'>
<tr><td>#</td><td>Title</td><td>Replies</td><td>Post Date</td></tr>";
$sql = mysql_query("SELECT * FROM topics ORDER BY id DESC");
while ($row = mysql_fetch_array($sql)) {
    $replies = mysql_num_rows(mysql_query("SELECT * FROM replies WHERE
               topic_id='" . $row['id'] . "'"));
    echo "<tr><td>" . $row['id'] . "</td><td><a href='show_topic.php?id=" . $row['id']                                                                                          
          . "'> <b>" . $row['title'] . "</b></a></td><td>" . $replies . "</td><td>" .  
          date("d M Y", $row['date']) . "  </td></tr>";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T04:39:15.890

如果您要查找完整的单词，这是一个简单的函数，如果内容长于指定的单词数，它将放置“...”：

```
function excerpt($content,$numberOfWords = 10){     
    $contentWords = substr_count($content," ") + 1;
    $words = explode(" ",$content,($numberOfWords+1));
    if( $contentWords > $numberOfWords ){
        $words[count($words) - 1] = '...';
    }
    $excerpt = join(" ",$words);
    return $excerpt;
} 
```

那么您只需要使用以下方法调用该函数：

```
excerpt($row['description'],10) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T04:47:57.267

如果有空格，此功能将修剪文本而不剪切任何单词。否则，它会在长度限制后立即将其切断。

```
function trim_text($input, $length, $ellipses = true)
{
    if (strlen($input) <= $length) {
        return $input;
    }

    // find last space within length
    $last_space = strrpos(substr($input, 0, $length), ' ');
    if ($last_space === FALSE) {
        $last_space = $length;
    }

    $trimmed_text = substr($input, 0, $last_space);

    // add ellipses
    if ($ellipses) {
        $trimmed_text .= '...';
    }

    return $trimmed_text;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T04:33:07.360

使用[substr](http://php.net/manual/en/function.substr.php)

```
substr($row['description '], 0, $length_you_want); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T15:12:19.330

尝试这样的事情：

```
<?php 
    $news = strip_tags($row['apal_news']);
    $snews = substr($news,0,50);
    echo $news;
?> 
```

# android - 应用程序在手机上运行良好，在平板电脑上崩溃

> ID：14049371
> 
> 赞同：0
> 
> 时间：2012-12-27T04:30:31.600
> 
> 标签：android, android-logcat

我的应用程序在平板电脑上启动时手机崩溃时运行良好。它在我运行 2.3.7 的手机和我姐姐运行 4.0.3 的手机上运行良好。但它在我运行 4.0.4 的 10.1" 平板电脑上崩溃了。我在运行 4.2 的 Nexus 7 AVD 上尝试过它，它也在那里崩溃。

这是日志

```
12-26 23:11:55.350: E/Trace(845): error opening trace file: No such file or directory (2)
12-26 23:11:55.350: W/Trace(845): Unexpected value from nativeGetEnabledTags: 0
12-26 23:11:55.350: W/Trace(845): Unexpected value from nativeGetEnabledTags: 0
12-26 23:11:55.350: W/Trace(845): Unexpected value from nativeGetEnabledTags: 0
12-26 23:11:55.560: W/Trace(845): Unexpected value from nativeGetEnabledTags: 0
12-26 23:11:55.560: W/Trace(845): Unexpected value from nativeGetEnabledTags: 0
12-26 23:11:56.741: D/dalvikvm(845): GC_CONCURRENT freed 217K, 12% free 2635K/2984K, paused 70ms+14ms, total 139ms
12-26 23:11:56.751: D/dalvikvm(845): WAIT_FOR_CONCURRENT_GC blocked 4ms
12-26 23:11:56.813: D/dalvikvm(845): GC_FOR_ALLOC freed 68K, 14% free 2666K/3084K, paused 52ms, total 53ms
12-26 23:11:56.821: I/dalvikvm-heap(845): Grow heap (frag case) to 3.333MB for 635812-byte allocation
12-26 23:11:56.881: D/dalvikvm(845): GC_FOR_ALLOC freed <1K, 12% free 3286K/3708K, paused 57ms, total 57ms
12-26 23:11:56.931: D/dalvikvm(845): GC_CONCURRENT freed <1K, 12% free 3287K/3708K, paused 9ms+3ms, total 52ms
12-26 23:11:56.931: D/dalvikvm(845): WAIT_FOR_CONCURRENT_GC blocked 12ms
12-26 23:11:56.931: I/dalvikvm-heap(845): Grow heap (frag case) to 3.811MB for 500416-byte allocation
12-26 23:11:57.011: D/dalvikvm(845): GC_FOR_ALLOC freed <1K, 11% free 3775K/4200K, paused 49ms, total 49ms
12-26 23:11:57.223: D/AndroidRuntime(845): Shutting down VM
12-26 23:11:57.223: W/dalvikvm(845): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-26 23:11:57.231: E/AndroidRuntime(845): FATAL EXCEPTION: main
12-26 23:11:57.231: E/AndroidRuntime(845): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.brandsonicinc.brandsonic.web.mobile/com.brandsonicinc.brandsonic.web.mobile.MainActivity}: java.lang.NullPointerException
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.os.Looper.loop(Looper.java:137)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-26 23:11:57.231: E/AndroidRuntime(845):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 23:11:57.231: E/AndroidRuntime(845):  at java.lang.reflect.Method.invoke(Method.java:511)
12-26 23:11:57.231: E/AndroidRuntime(845):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-26 23:11:57.231: E/AndroidRuntime(845):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-26 23:11:57.231: E/AndroidRuntime(845):  at dalvik.system.NativeStart.main(Native Method)
12-26 23:11:57.231: E/AndroidRuntime(845): Caused by: java.lang.NullPointerException
12-26 23:11:57.231: E/AndroidRuntime(845):  at com.brandsonicinc.brandsonic.web.mobile.MainActivity.onCreate(MainActivity.java:84)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.Activity.performCreate(Activity.java:5104)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-26 23:11:57.231: E/AndroidRuntime(845):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-26 23:11:57.231: E/AndroidRuntime(845):  ... 11 more
12-26 23:12:02.487: W/chromium(845): external/chromium/net/disk_cache/backend_impl.cc:1835: [1226/231202:WARNING:backend_impl.cc(1835)] Destroying invalid entry.
12-26 23:12:02.500: E/chromium(845): external/chromium/net/disk_cache/backend_impl.cc:1107: [1226/231202:ERROR:backend_impl.cc(1107)] Critical error found -8
12-26 23:12:02.820: W/chromium(845): external/chromium/net/disk_cache/storage_block-inl.h:119: [1226/231202:WARNING:storage_block-inl.h(119)] Failed data load.
12-26 23:12:02.820: W/chromium(845): external/chromium/net/disk_cache/storage_block-inl.h:119: [1226/231202:WARNING:storage_block-inl.h(119)] Failed data load.
12-26 23:12:02.840: W/chromium(845): external/chromium/net/disk_cache/storage_block-inl.h:119: [1226/231202:WARNING:storage_block-inl.h(119)] Failed data load.
12-26 23:12:02.881: W/chromium(845): external/chromium/net/disk_cache/storage_block-inl.h:119: [1226/231202:WARNING:storage_block-inl.h(119)] Failed data load.
12-26 23:12:02.966: E/chromium(845): external/chromium/net/disk_cache/entry_impl.cc:904: [1226/231202:ERROR:entry_impl.cc(904)] Failed to save user data
12-26 23:12:02.971: E/chromium(845): external/chromium/net/disk_cache/entry_impl.cc:904: [1226/231202:ERROR:entry_impl.cc(904)] Failed to save user data
12-26 23:12:04.361: I/Process(845): Sending signal. PID: 845 SIG: 9 
```

请帮助这是非常令人沮丧的。它曾经在平板电脑上运行良好。它可能与布局有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:43:06.420

尝试将所有 xml 文件放在`layout`文件夹中，如果它已经存在，则无需将其从其他文件夹中删除。

如果 xml 文件位于类似文件夹中，`layout-sw600dp`那么如果屏幕宽度小于 600dp，设备将无法加载指定的 xml 文件。这只是您的示例，可能会有所不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:03:24.420

我已经阅读了您的日志，查找目录时存在错误，您是否使用某种目录方法从特定位置检索文件，平板电脑具有内部存储而不是 sd 卡可能是问题所在。

但是，如果您发布代码，我会更好地理解。

# sharepoint - SharePoint 2010 - Need suggestion

> ID：14049375
> 
> 赞同：0
> 
> 时间：2012-12-27T04:30:56.060
> 
> 标签：sharepoint, sharepoint-2010

I have one datasheet like mentioned below

```
WorkWeek Person1 Person2 
WW1      X       Y
WW2      Z       A
WW3      X       Z

```

Where A,X,Y & Z are members of the sharepoint group. Required I want display a webpart like this

```
WW1
Image1       Image2
X            Y

```

Next Week the webpart should get updated like this dynamically.

```
WW2
Image3      Image4
Z           A

```

Where this requirement is possible, If possible then pls suggest how to accomplish this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:13:14.080

这在 SharePoint 中称为每周更新 Webpart。

### 我的想法：

您可以将`CurrentDate`DateTime.Today 之类的一个值设置为 Current Web properties。还可以为 WorkWeek 用户设置另一个属性。现在检查

```
 SPWeb web = SPContext.Current.Web;
         if (string.isnullorEmpty(web.Properties["CurrentDate"]))
            {
                 web.Properties["CurrentDate"] = DateTime.Today.Tostring();
                 // do the stuff for displying data.
            }
        else 
          {
             if(IFChangeNeeded())
              {
                 // do the stuff for displying data.
              }
            else
              {
                 web.Properties["CurrentDate"] = DateTime.Today.Tostring();
                 // do the stuff for displying data.

            }
         } 
```

`IfChangeNeeded()`是返回布尔值的函数。此功能检查员工本周需要更换。

```
 public bool IFChangeNeeded()
      {
           DateTime PropDate = Convert.ToDateTime(web.Properties["CurrentDate"]);
           DateTime TDate = DateTime.Today;

           if(WeekNo(TDate) == WeekNo(PropDate)) // WeekNo is function return weekno from current date.
             {
                return true;

             }
           else
             {
                 return false;
             }
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:58:10.573

我可以为您提供一些可以帮助您完成此要求的逻辑。

根据您的要求，使用具有 html 的用户控件创建一个 Visual Web 部件，

要从数据表中获取数据，请使用代码从数据表中读取数据

当您要显示第一周的数据时，请创建一个变量并对其进行维护以识别从数据表中获取的周顺序。

第一次访问数据表时，请将此变量设置为一年中的第几周。

使用此变量（例如 IF 变量为空）来调节数据表的读取，然后将其分配为一年中的第几周。，

下次你遇到这个逻辑时检查这个变量，如果变量小于周没有当前周没有年份然后取数据表最后你得到 + 1 表示数据表 2 等等..

对不起英语不好

```
variable : one for DaasheetNo, WeekNo,CurrentWeekNo

assign datasheetNo = Sheet1

If(WeekNo== Null)
{
first time getdata from DaasheetNo (First Sheet)
}
else if(WeekNo < CurrentWeekNo)
{
Get data from datasheetNo +1
} 
```

希望对你有帮助

# iphone - How to show number small custom icon like mail, iphone

> ID：14049386
> 
> 赞同：0
> 
> 时间：2012-12-27T04:32:48.203
> 
> 标签：iphone, cocoa-touch

I have a social networking app. I have a button and based on the click on the button I need to show a small icon on the top right corner of the button. it is a custom color and text. I know to show the default system number icon for like the one for unread mail you can get it from the shared application badge count. But I am trying to do something custom here.

I am thinking of building my own imageview (its background will be a custom png) and then within it a small text to show the number.

Anyone has experience with this and can recommend a better way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:37:44.733

您可以添加带有徽章图像的 imageView 作为该按钮的子视图。

有很多自定义徽章控件可用。

请检查以下链接。

1.  [工作标签视图](http://www.smashingmykeyboard.com/2012/01/05/custom-ios-badges-with-jobadgeview/)
2.  [自定义徽章](https://github.com/ckteebe/CustomBadge)
3.  [徽章](http://www.spaulus.com/2011/04/custombadge-2-0-retina-ready-scalable-light-reflex/?lang=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:37:31.373

除了应用程序图标、名称和徽章值之外，您无法更改主屏幕上的任何内容。你的意思是在主屏幕上还是在标签栏上？

**更新**

如果您指的是应用程序中的徽章，而不是主屏幕上的徽章，请查看@MidhunMP 的答案以找到有关如何执行此操作的链接。我之前成功使用过[http://www.spaulus.com/2011/04/custombadge-2-0-retina-ready-scalable-light-reflex/?lang=en 。](http://www.spaulus.com/2011/04/custombadge-2-0-retina-ready-scalable-light-reflex/?lang=en)

# php - How to validate the price in jquery and php?

> ID：14049391
> 
> 赞同：0
> 
> 时间：2012-12-27T04:34:08.407
> 
> 标签：php, javascript, regex

Can any body help how to validate the price field in jquery and php the sample currency is

```
 120
120.25
12,23,000
1,000.89 
```

I am using this expression but it does not accept comma(,)

it is in jquery

```
value.match(/^[+]?\d+(?:\.\d{1,3})?$/);

and in php i am using 
return (bool) preg_match('/^[0-9]+(\.[0-9]{0,2})?$/', $str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:47:40.553

filter_var($int, FILTER_VALIDATE_INT) 用于整数和 filter_var($float, FILTER_VALIDATE_FLOAT) 用于浮点过滤器变量过滤并验证您的输入 (http://php.net/manual/en/function.filter-var.php)。

# iphone - 如何向情节提要中制作的 UI 添加功能？

> ID：14049397
> 
> 赞同：0
> 
> 时间：2012-12-27T04:34:44.183
> 
> 标签：iphone, objective-c, ios, xcode

我在情节提要上制作了一个非常小的 UI，但我对 XCode 和 Objective C（来自 Java）还很陌生，而且我在添加功能时遇到了一些麻烦。我知道我应该创建 UITableViewController (storeTableViewController) 的子类并将情节提要控制器的类设置为该类。问题是，当我这样做时，我在情节提要中的所有辛勤工作都被抹去了，我可以看到代码与我的 UI 显示冲突的地方（例如，tableView:numberOfRowsInSection 总是返回 0），我认为有足够的时间和耐心，我可以对 UI 进行编程，但是有什么方法可以使用我的所有这些工作吗？已经在情节提要上完成并且仍然能够添加功能？我想在顶部设置一个文本框作为第一响应者，并能够以编程方式更改命令中的图像和标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:41:24.560

您可能应该使用 IBOutlets。将 StoryBoard UI 对象连接到 IBOutlets，您可以从代码中修改 UI 对象的属性您可以声明 IBOutlet link this

```
 IBOutlet type variableName 
```

查看此教程视频，这将对您有很大帮助。

[视频链接](http://www.youtube.com/watch?v=z1VSqaRL8xc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:57:53.777

我使用故事板作为画布。我插入我想要的插座和所有小细节，然后我四处走动并构建类。话虽如此，您需要声明一个 urtext 字段出口（取决于您希望它做什么）然后添加必要的委托并允许它在选择器上执行。然后就可以声明函数了。通过控制和拖动可以很容易地将它链接到情节提要中。就图像而言，您可以使用 uiimage 并声明其功能以及它如何根据代码的变化而变化。我的建议是拍摄您的故事板的屏幕截图并将其与您的问题一起发布，以便我/我们可以帮助您编写代码。但就你的问题而言，我希望这个答案能让你满意。快乐编码。:)

# html - 为什么更改 Bootstrap Twitter 模态 fade.in 类最高百分比会动态禁用转换？

> ID：14049399
> 
> 赞同：2
> 
> 时间：2012-12-27T04:34:50.730
> 
> 标签：html, css, twitter-bootstrap

我目前有一个 Twitter Bootstrap 模式，我正在尝试将`top`百分比更改为，因为内容很长。当我`top`动态更改百分比时，不再发生淡入淡出的过渡。我是否缺少任何代码来使其正常工作？谢谢！

动态更改模式与页面顶部的距离的代码：

```
$('test_modal.fade.in').css('top', '36%'); 
```

html:

```
<a data-toggle="modal" data-target="#test_modal" data-keyboard="true" href="">Open Test Modal</a>
<div id="test_modal" class="modal fade hide in">
  <div id='modal-body'>test content</div>
</div> 
```

不通过正常的引导程序 twitter css 覆盖动态地执行此操作。模态通过过渡备份存在：

```
#test_modal.fade.in {
  top:36%;
} 
```

# jquery - 通过父 div 访问跨度？

> ID：14049401
> 
> 赞同：1
> 
> 时间：2012-12-27T04:35:00.517
> 
> 标签：jquery, jquery-selectors

我如何`<span>`通过其父级访问特定对象，`<div>`如下所示：

```
<div>
<!--parent div-->
 <div>
   <span>...</span>
   <span>...</span>
 </div>
 <div>
   <span>...</span>
   <span>.. through parent div i can access this span ..</span>
 </div>
<!--close parent div-->
</div> 
```

编辑：有一个变量假设**项。**.在这个**项目变量中有两个值**显示即**（项目=名称大小）** 我**通过jquery将这个变量分解为部分..ie.item [0] =名称; 项目[1]=尺寸；** 现在我**在父 div 跨度中打印名称...并通过 jquery 打印子 div 中的大小...**

```
<div>
    <!--parent div-->
     <span>...Print Name...</span>
     <div>
       <span>...</span>
       <span>...</span>
     </div>
     <div>
       <span>...</span>
       <span>.. Print Size.. ..</span>
     </div>
    <!--close parent div-->
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T04:44:02.950

如果您尝试从父 div 中选择特定跨度，则需要以下内容：

```
parentDiv = $(element); // assuming you know which parent you're talking about
$('> div:eq(1) > span:eq(1)', parentDiv); 
```

但是给你`<span>`一个类名会容易得多，例如

```
<span class="my-span">hello</span> 
```

在这种情况下，选择它将类似于：

```
parentDiv.find('.my-span'); 
```

[**例子**](http://jsbin.com/azoyuh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:40:28.933

我认为这是您要寻找的地方

> $("div span").click(function () {
> 
> ```
>  }); 
> ```

或者如果您需要使用 css 获取它

```
div span{

} 
```

并只选择一个跨度

```
<div>
    <!--parent div-->
     <div>
       <span>...</span>
       <span>...</span>
     </div>
     <div>
       <span>...</span>
       <span id="someid">.. through parent div i can access this span ..</span>
     </div>
    <!--close parent div-->
    </div> 
```

首先添加一个ID

```
$("#someid").click(function () {

          }); 
```

# jenkins - 标准错误：致命：找不到远程参考 $GERRIT_REFSPEC

> ID：14049402
> 
> 赞同：10
> 
> 时间：2012-12-27T04:35:34.383
> 
> 标签：jenkins, continuous-integration, hudson, jenkins-plugins, hudson-plugins

在有人开枪打倒我之前..我已经查看了所有有此错误的消息，但它们似乎来自不同的问题，我无法获得任何实质性信息。以下是我在 git 轮询日志中遇到的错误...

1.  我没有关于错误 #1 的线索，请提供输入

2.  为此，我阅读了其他问题，当有 gerrit 触发器时，$GERRIT_REFSPEC 会动态填写，但我不明白为什么我一直在 git poll 日志中看到这个。我怎样才能解决这个问题 ？

* * *

错误信息：

1.  错误：从原点/原点获取问题 - 可能不可用。无论如何继续

2.  hudson.plugins.git.GitException：命令“/usr/bin/git fetch -t ssh://company.com:29418/platform/vendor/proprietary/mla.git $GERRIT_REFSPEC”返回状态码 128：stdout：stderr：致命：找不到远程参考 $GERRIT_REFSPEC

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-12T12:15:16.167

*   转到 Job 的 Configure 页面并搜索以选中*This build is parameterized*框。
*   然后将*Name*设置为*GERRIT_REFSPEC*
*   和*默认值*refs */heads/master*。

我花了一些时间搜索如何添加 Gerrit Trigger 插件手册中提到的这个字符串参数。我将 Jenkins 1.567 与 Gerrit Trigger 2.11.1 一起使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-15T16:11:50.027

截至 2016 年 5 月，此错误可能是Jenkins 2.3 或 1.651.2 中引入*的 SECURITY-170 修复的结果。*

[来自维基](https://wiki.jenkins-ci.org/display/JENKINS/Plugins+affected+by+fix+for+SECURITY-170)：

> 在 2016 年 5 月的安全公告中，宣布了一个漏洞 (SECURITY-170 / CVE-2016-3721)，攻击者可以利用该漏洞利用某些 Jenkins 插件允许定义任意构建参数的事实——这些参数又被注入构建环境.
> 
> 这个问题的修复——最初包含在 Jenkins 版本 1.651.2 和 Jenkins 2.3 中——意味着只有在作业配置中明确定义的构建参数才会在构建时默认可用。默认情况下，插件添加到构建中的任何其他任意参数都将不可用。
> 
> 由于有许多插件依赖于旧 Jenkins 版本中的行为，升级到 1.651.2 或 2.3 意味着某些构建行为可能会被破坏。

Gerrit Trigger 是受影响的插件之一。您应该注意更新的问题[在这里](https://issues.jenkins-ci.org/browse/JENKINS-34753)。

但是请注意，如果您只从 Gerrit 构建一个分支，Rado 的`GERRIT_REFSPEC`在构建配置中手动定义参数的解决方案可以暂时解决此问题。

* * *

通过将以下 JAVA_ARGS 添加到 ubuntu 上的 /etc/default/jenkins 可以找到一种解决方法

```
JAVA_ARGS="$JAVA_ARGS -Dhudson.model.ParametersAction.keepUndefinedParameters=true" 
```

您还可以添加应该允许哪些变量

```
JAVA_ARGS="$JAVA_ARGS -Dhudson.model.ParametersAction.safeParameters=GERRIT_REFSPEC,GERRIT_BRANCH 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T22:24:58.053

看起来您手动运行了 Jenkins Gerrit Trigger 构建？触发页面说，

```
Using "Build Now"
[..]
Add a String parameter called GERRIT_REFSPEC with the default value refs/heads/master 
```

[https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-11-16T12:19:58.917

解决此问题后，如果**Jenkins**仍未拉取最新的代码提交（未合并），则需要添加**附加行为**->**选择构建内容的策略**-> **Gerrit 触发器**

参考：[感谢Fabian](https://stackoverflow.com/a/11121935/452708)

[![在此处输入图像描述](../Images/24b1bb71772626422a7856490552886d.png)](https://i.stack.imgur.com/plc9K.png)

# php - 在 mysql 和 PHP 中检查字段是否具有属性 `UNIQUE`

> ID：14049407
> 
> 赞同：14
> 
> 时间：2012-12-27T04:36:31.077
> 
> 标签：php, mysql, indexing, unique-index

如何检查表中的字段是否设置为**UNIQUE**？

例如，我有一个名为的表`users`，其中一个字段`email`设置为`UNIQUE`，一个字段`picture`未设置为`UNIQUE`，我想在选择之前检查该字段是否设置为`UNIQUE`好像不是，然后不要执行`SELECT`.

然后我尝试`SELECT`计算返回的行数，如果超过 1 则不是`UNIQUE`，

```
"SELECT * FROM table WHERE email='$email'"
//...some mysql php line later
if($count > 1){
    //return nothing
} 
```

但效率不高，如果没有重复怎么办。

检查字段是否设置为的最佳方法是`UNIQUE`什么`PHP`？

编辑：没有重复并不意味着它`UNIQUE`有财产

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T05:08:34.360

从[SHOW INDEX 的文档](http://dev.mysql.com/doc/refman/5.0/en/show-index.html)（由@diEcho 找到）：

> SHOW INDEX 返回以下字段：
> 
> Non_unique -- 如果索引不能包含重复项，则为 0，如果可以，则为 1。
> 
> Column_name -- 列名。

尝试：

```
SHOW INDEXES
FROM $tablename
WHERE Column_name='$field'
AND NOT Non_unique 
```

请注意，这假定没有跨多个列的唯一索引。如果可以，那么您可能希望使用子查询排除这些。

另请注意，此查询中还会显示禁用索引（该`Comment`列的文档中提到了禁用索引的可能性）。似乎没有一列反映这一点，因此`Comment`如果您禁用了索引，您可能需要解析该列。

无需与`Non_unique`数字进行比较 - [MySQL 无论如何都使用 0 和 1 作为布尔值](http://dev.mysql.com/doc/refman/5.0/en/logical-operators.html#operator_not)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T04:59:39.990

好的，感谢@diEcho，我找到了

```
public function isUniqueField($tablename, $field, $connection){
        $query = $connection->query("SHOW INDEXES FROM $tablename WHERE Column_name='$field' AND Non_unique=0");
        $query->execute();
        if(!$query->fetchAll()){
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T04:39:58.193

您可以检查所有索引列

[`SHOW INDEX`](http://dev.mysql.com/doc/refman/5.0/en/show-index.html)

> 如果有一个**UNIQUE**索引，那么它不能是同一个表中的重复值但是一个 UNIQUE 索引允许可以包含 NULL 的列的多个 NULL 值

## 更新

在列上创建唯一约束（让电子邮件）使用下面的查询

```
 ALTER TABLE  `table_name` ADD UNIQUE (`email`); 
```

# c - 无法处理内核空指针取消引用

> ID：14049412
> 
> 赞同：0
> 
> 时间：2012-12-27T04:37:30.607
> 
> 标签：c, oop, linux-kernel, kernel-module, kernel

使用内核模块时出现无法处理内核空指针取消引用错误。这是我想要做的

```
inputfile = filp_open(kernel_args->infile, O_RDONLY, 0); //Open a file

if(inputfile == NULL) //Check if the file exists
{
    printk("\nInput file not found on drive\n");
    error = -ENOENT;
    goto quit;
} 
```

但是内核在检查空值时给了我一个“哎呀”。我不知道如何避免它，因为我正在检查 null 并做我应该做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:03:36.870

看起来您怀疑指针错误，唯一可能在您的代码中生成此类 oops 的指针是 kernel_args。

更多提示： - 内核是受信任的代码，您不应该检查 NULL 指针（除非您正在编写内核模块测试等） - 您的 printk 使用错误，您缺少 printk 日志级别，例如： printk(KERN_ALERT "Hello世界\n");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:58:32.947

检查内核空间参数的有效性。

喜欢 ：

```
if (!kargs)
    if(kargs->infile == NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-09T03:26:23.800

由于 filp_open 在出现问题时不会返回 NULL，因此您应该使用 IS_ERR 来检查错误是否发生。

喜欢：

```
if(IS_ERR(inputfile))
    goto quit; 
```

# blackberry - 将 FieldManager 置于 BlackBerry 应用程序的屏幕中心

> ID：14049418
> 
> 赞同：0
> 
> 时间：2012-12-27T04:38:21.550
> 
> 标签：blackberry, horizontalfieldmanager, fieldmanager

我知道如何将字段水平和垂直放置在屏幕的中心。

但是我在该领域取得了成功，但我想将 VerticalFieldManager 或 Horizo​​ntalFieldManage 设置为屏幕的中心。

我的代码如下所示，但我无法将其设置在屏幕中心。

```
 final Bitmap scale = new Bitmap(Display.getWidth(),Display.getHeight());
    _backgroundBitmap.scaleInto(scale, Bitmap.FILTER_LANCZOS);

    //==============================
    // this manager is used for the static background image
    mainManager = new VerticalFieldManager(Manager.USE_ALL_HEIGHT | Manager.USE_ALL_WIDTH | Manager.VERTICAL_SCROLL) {
        public void paint(Graphics graphics) {
            graphics.clear();
            graphics.drawBitmap(0, 0, deviceWidth, deviceHeight,scale, 0, 0);
            super.paint(graphics);
        }
    };

    // this manger is used for adding the componentes
    subManager = new VerticalFieldManager(Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR) {

        /*protected void sublayout(int maxWidth, int maxHeight) {
            int displayWidth = deviceWidth;
            int displayHeight = deviceHeight;
            super.sublayout(displayWidth, displayHeight);
            setExtent(displayWidth, displayHeight);
        }*/
    };

    VerticalFieldManager dataManager = new VerticalFieldManager(){};

    dataManager.setMargin(20, 20, 20, 20);
    //CategoryListLayout 
    //===============================================================================
    //====================================
    HorizontalFieldManager categoryLayout = new HorizontalFieldManager(FIELD_VCENTER | USE_ALL_WIDTH | FIELD_HCENTER){
        protected void paint(Graphics graphics) {
            graphics.setColor(0xFFFFFFFF);
            super.paint(graphics);
        }
    };

    LabelField cateName = new LabelField("Category", FIELD_VCENTER){
        protected void layout(int width, int height) {
            super.layout(width, height);
            this.setExtent(150, this.getHeight());
        }
    };
    categoryLayout.setBorder(myBorder);
    //choice_country.setMinimalWidth(30);
    choice_country.setMargin(10, 10, 10, 10);
    categoryLayout.add(cateName);
    categoryLayout.add(new BitmapField(Bitmap.getBitmapResource("vertical_line.png"), FIELD_VCENTER));
    categoryLayout.add(choice_country);
    dataManager.add(categoryLayout);
    //===============================================================================

    //DistanceListLayout 
    //===============================================================================
    HorizontalFieldManager distanceLayout = new HorizontalFieldManager(FIELD_VCENTER |  USE_ALL_WIDTH | FIELD_HCENTER){
        protected void paint(Graphics graphics) {
            graphics.setColor(0xFFFFFFFF);
            super.paint(graphics);
        }
    };

    LabelField distName = new LabelField("Distance", FIELD_VCENTER){
        protected void layout(int width, int height) {
            super.layout(width, height);
            this.setExtent(150, this.getHeight());
        }
    };
    distanceLayout.setBorder(myBorder);
    //choice_distance.setMinimalWidth(300);
    choice_distance.setMargin(10, 10, 10, 10);
    distanceLayout.add(distName);
    distanceLayout.add(new BitmapField(Bitmap.getBitmapResource("vertical_line.png"), FIELD_VCENTER));
    distanceLayout.add(choice_distance);
    dataManager.add(distanceLayout);
    //===============================================================================

    listNames = new Vector();
    listImage = new Vector();
    //new GetList().execute(null);

    ButtonField b_search = new ButtonField("Search", ButtonField.CONSUME_CLICK | ButtonField.FIELD_HCENTER);

    b_search.setMargin(10,10,10,10);

    b_search.setChangeListener(new FieldChangeListener() {
        public void fieldChanged(Field field, int context) {
            if (choice_country.getSelectedIndex() != 0
                    || choice_distance.getSelectedIndex() != 0) {
                new SubmitSearch().execute(null);
            } else {
                Dialog.alert("Select atleast One of Two(Category/Distance).");
            }
        }
    });

    dataManager.add(b_search);
    removeAllScreen();
    subManager.add(dataManager);

    mainManager.add(subManager);
    add(mainManager); 
```

我的代码有什么问题？

## 更新

这里我使用 mainManager 来显示应用程序的背景。subManager 仅用于容器。datamanager 是包含mane Horizo​​ntalFieldManager。

现在我想要的是数据管理器要垂直显示在屏幕的中心。它不依赖于我要添加的 Horizo​​ntalLayout。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:37:44.827

`VerticalManager`将忽略任何垂直修饰符，如`FIELD_VCENTER`.

你必须实现你自己的`Manager`，它将放在`submanager`屏幕的中心。像这样的东西：

```
protected void sublayout(int maxWidth, int maxHeight) {
        submanager.sublayout(displayWidth, displayHeight);
        //after sublayout submanager knows his real dimensions
        int submanagerWidth = submanager.getWidth();
        int submanagerHeight = submanager.getHeight();
        int x = (displayWidth - submanagerWidth) >> 1;
        int y = (displayHeight - submanagerHeight) >> 1;
        setPositionChild(submanager, x, y);
        setExtent(displayWidth, displayHeight);
} 
```

在示例中，我假设这`submanager`只是一个孩子。但是有几个很清楚如何修改的例子。

**更新**

如果有多个孩子（例如 2 个）：

```
protected void sublayout(int maxWidth, int maxHeight) {
        int  height = 0;
        for (int i = 0; i < 2; i++) {
            submanager[i].sublayout(displayWidth, displayHeight);
            height += submanager[i].getHeight(); 
        }

        int y = (displayHeight - height) >> 1;
        if (y < 0)
            y = 0;
        for (int i = 0; i < 2; i++) {
            int submanagerWidth = submanager[i].getWidth();
            int submanagerHeight = submanager[i].getHeight();
            int x = (displayWidth - submanagerWidth) >> 1;
            setPositionChild(submanager[i], x, y);
            y += submanagerHeight;
        }
        setExtent(displayWidth, max(height, submanagerHeight));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:23:50.800

你为什么不使用这样的东西？

```
mainManager = new VerticalFieldManager(Manager.USE_ALL_HEIGHT | 
                                       Manager.USE_ALL_WIDTH |
                                       Manager.VERTICAL_SCROLL | 
                                       DrawStyle.HCENTER /* or DrawStyle.VCENTER */) 
```

# javascript - Jquery 读取从 JSON 循环创建的输入字段

> ID：14049420
> 
> 赞同：0
> 
> 时间：2012-12-27T04:38:24.340
> 
> 标签：javascript, jquery, json, input

我一生都无法弄清楚为什么这行不通。我正在尝试从 json 文件中提取使用循环创建的文本字段的值。

在这段代码中，在最底部我只是做一个简单的 click(function() {alert()} 只是为了看看我是否可以提取一个值并返回未定义的值。但是如果我删除 '#name' 并放入 'input ' 它会捕获它，但仅限于几个输入字段中的第一个。

非常感谢任何帮助

JSON

```
{
"Controls": [{
    "Button":[{ "Name":"Button", "x": "1","y": "2","width": "3","height": "4","Transition":"" }],

    "Image":[{"x": "5","y": "6","width": "7","height": "8"}],

    "TextField":[{"x": "9","y": "10","width": "11","height": "12","Rows":""}]
}] 
```

}

代码（上面有一些 getJSON 的东西）

```
//Slide In Attributes Panel Based on Selected Object
$(document).on('click', '#code li', function () {
    var index = $('#code li').index(this);
    var selected = $(this).text();
    switch (selected) {
        case selected:
            $('#options').hide();
            hidePanels();
            $('#temp').remove();
            $('#objectAttributes').show("slide", 200);
            break;

        //If it does work show what variable is being used
        default:
            alert(selected);
            break;
    }

    //Shows Selected LI Index
    $('#codeIndex').text("That was div index #" + index);

    //Pull list of Attributes for selected Object
    $.getJSON('controls.json', function (data) {
        //Build Attributes List
        var attributeList = '<div id="temp">';
        //Target based on selected object
        var target = selected;
        attributeList += '<div>' + target + '<div>';
        $.each(data.Controls[0][target][0], function (kk, vv) {
            attributeList += '<div style="float:right">' + kk + ':' + '<input type="text" id='+ kk + '>' + '</input>' + '</div>';
        });
        attributeList += '</div></div>';
        attributeList += '</div>';
        $('#objectAttributes').append(attributeList);
        $('#temp').append('<div id="editIndex">'+"Modifying index" + " " +index+'</div>');

        $(document).on('click', '#saveAttributes', function () {
            var $x = $('#name').val();
            alert($x);
        })
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:06:20.357

好的，所以在使用 jsfiddle 进行了一些修改之后，答案比我最初想象的要简单得多。从 HTML 4.01 类名和 ID 开始区分大小写（[参考](https://developer.mozilla.org/en-US/docs/Case_Sensitivity_in_class_and_id_Names)），这意味着您的选择器`$('#name')`与 JSON 不匹配`Name`。

所以一个简单的改变，比如在[这个简化的 jsfiddle 中](http://jsfiddle.net/ARFUq/)似乎可以按需要工作。希望这会有所帮助！

# .net - 将 .Net Framework 2.0 升级到 4.5

> ID：14049422
> 
> 赞同：13
> 
> 时间：2012-12-27T04:38:32.097
> 
> 标签：.net

我已经使用 Visual Studio 2012 将我的 asp.net 2.0 项目升级到 4.5。它构建得很好，但是我必须在浏览器中测试每个 webform 还是会自动 100% 转换？如果没有 .Net Framework 2.0，转换后的项目可以正常工作吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T04:50:27.603

如果您已升级到 3.5，您会很好，因为 3.5 只是构建在 2.0 之上。NET 4.5 不是 2.0 的完美超集。存在一些差异，并且没有看到您的所有代码，甚至[Jon Skeet](http://msmvps.com/blogs/jon_skeet/)都无法告诉您转换是否会“正常工作”。

我建议研究[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff602939.aspx)，尝试找出升级中可能受到的影响（如果有的话），然后集中精力进行测试。这种方法实际上可能比逐页测试更有效，后者不可避免地会遗漏一些东西。从 2.0 到 4.5 的更改也可能根本不会影响您的代码库。这是[从 3.5 到 4.0 的详尽更改列表](http://msdn.microsoft.com/en-us/library/ee941656%28v=VS.100%29.aspx)。特别注意 ASP.NET 部分，有很多。

从最后一个链接实际上有一个示例（可能更多），可能让您单独检查每个页面：

> **页面解析**
> 
> ASP.NET 网页（.aspx 文件）和用户控件（.ascx 文件）的页面解析器在 ASP.NET 4 中比在早期版本的 ASP.NET 中更严格，并且它比在早期版本中将更多标记标记为无效。
> 
> 检查页面运行时产生的错误消息并修复无效标记导致的错误。

由于存在标记差异，因此您应该真正检查每个页面并控制是否正确呈现。

# css - 在 CSS 中，在元素上使用“display:none”，但保留它的“:after”

> ID：14049423
> 
> 赞同：45
> 
> 时间：2012-12-27T04:38:36.070
> 
> 标签：css

是否可以不显示元素，如*display:none*，但继续显示*:before*和/或*:after*？

我试过

```
#myspan       {display:none}
#myspan:after {display:inline; content:"*"} 
```

但这没有用。我试图让 CSS 用星号替换跨度的内容，而不引入 jQuery。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-27T04:42:15.073

不，这是不可能的。

伪元素呈现为子元素：

```
<span id="myspan">whatever<after></span> 
```

并`display:none`隐藏包含所有子元素的元素。

### 编辑 1

在我看来，JavaScript 是你最好的选择。即使没有 jQuery 更改文本也不难：

```
document.getElementById("myspan").innerHTML = "*";​ 
```

[演示](http://jsfiddle.net/2jgj2/1/)

### 编辑 2

但是，如果你真的想用 CSS 来做，你可以使用负数`text-indent`来隐藏文本和`relative`定位以显示星号：

```
#myspan {    
    text-indent: -9999px;
    display: block;
}

#myspan:before {
    content: '*';
    position: absolute;
    top: 0;
    left: 9999px;
} 
```

[演示](http://jsfiddle.net/2jgj2/2/)

​</p>

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-06T19:53:58.333

这绝对是可能的。使用`font-size: 0px`代替`display: none`：

```
#myspan {
    /* display: none; */
    font-size: 0px;
}

#myspan:after {
    /* display: inline; */
    font-size: 16px;
    content: "*"
} 
```

[演示在这里](http://jsfiddle.net/bardirian/nzgxLwzg/)。

在这种情况下，您只能将 px/pt 用于显示文本字体单位。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-28T20:32:48.257

我认为一个非常简单的方法是利用*可见性*属性。但请注意，“隐藏”元素**仍会占用空间**。但是，如果您对此感到满意，只需将父元素设置为“隐藏”，将伪元素设置为“可见”即可：

```
#myspan        {visibility:hidden}
#myspan: after {visibility:visible} 
```

处理好能见度后，请随意摆弄这个位置，以避免多余的空间。

就像是，

```
myspan {
    visibility: hidden;
    position: relative;
}

myspan:after {
    visibility: visible;
    position: absolute;
    left: 10px;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-06T16:18:16.073

采用：

```
#myspan       {font-size:0}
#myspan:after {font-size:16px; content:"*"} 
```

如果您指定了最小字体大小，它将不起作用（浏览器设置）。我只会将此方法用于上一个和下一个按钮，以便屏幕阅读器将读取“上一个”，但您想用 \276e 替换它。因此，请计划文本显示时的*外观*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T06:26:47.993

正如@bookcasey 所解释的，`display: none`在元素上进行设置也不可避免地隐藏了`:after`or`:before`伪元素（因为它们实际上并不是在元素之后或之前显示的东西，而是在元素*内部*、在其真实内容之后或之前添加的内容）。

但是，根据旧的 (2003) [CSS3 Generated and Replaced Content Module](http://www.w3.org/TR/css3-content/)草案，通过简单地设置元素，用生成的内容*替换*元素的真实内容的目标原则上是可能的，例如`content`

```
#myspan { content: "*"; } 
```

到目前为止，只有 Opera 支持这一点。但是 WebKit 浏览器也支持替换内容是图像的特殊情况：

```
#myspan { content: url(asterisk.png); } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-31T12:40:22.870

这是可能的，但您需要使用`visibility:hidden`而不是`display:none`.

有关详细信息，请参阅以下问题中的答案： *[如何用 CSS 替换文本？](https://stackoverflow.com/questions/7896402/how-can-i-replace-text-through-css)*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T04:48:33.880

您需要将它们分成多个内容 DIV 块，因为样式是由子元素继承的。因此，一旦定义了父显示样式，就不可能了。

# algorithm - 找到重叠的轴对齐矩形

> ID：14049436
> 
> 赞同：0
> 
> 时间：2012-12-27T04:40:41.823
> 
> 标签：algorithm

我正在解决[这个问题](https://stackoverflow.com/q/3324880/1082727)- 如何找到重叠的轴对齐矩形。我对这个问题的标准解决方案有疑问。

在某些时候，我们需要构建二叉搜索树来获取落入区间的点，特别是我们正在处理的当前左边缘的 y 区间。但是当大矩形完全包含较小的矩形时，我们无法捕获交叉点。当我们点击小矩形的左边缘时，大矩形的 y 边界不会落入小矩形的 y 边界范围内。有人可以解释我如何在我们处理一些左边缘（在扫描过程中）的那一刻找到重叠的矩形。谢谢！

# cakephp-2.0 - Cakephp - 找不到类“DboSource”

> ID：14049438
> 
> 赞同：0
> 
> 时间：2012-12-27T04:41:24.953
> 
> 标签：cakephp-2.0

第一个代码块抛出错误`Fatal error: Class 'DboSource' not found`，而第二个代码块工作得很好。这打败了我，两者都使用同一行来保存创建的字段...块 1

```
public function add() {
    if ($this->request->is('post')) {
        $this->request->data['created'] = DboSource::expression('NOW()');
        $this->EbayAccount->create();
        if ($this->EbayAccount->save($this->request->data)) {
            //$this->EbayAccount->id = $this->EbayAccount->getLastInsertID();
            //$this->EbayAccount->saveField('created', DboSource::expression('NOW()'));
            $this->Session->setFlash(__('The ebay account has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The ebay account could not be saved. Please, try again.'));
        }
    }
    $this->set('userId', $this->Auth->user('id'));      
} 
```

第 2 座

```
public function add() {
    if ($this->request->is('post')) {
        //$this->request->data['created'] = DboSource::expression('NOW()');
        $this->EbayAccount->create();
        if ($this->EbayAccount->save($this->request->data)) {
            $this->EbayAccount->id = $this->EbayAccount->getLastInsertID();
            $this->EbayAccount->saveField('created', DboSource::expression('NOW()'));
            $this->Session->setFlash(__('The ebay account has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The ebay account could not be saved. Please, try again.'));
        }
    }
    $this->set('userId', $this->Auth->user('id'));      
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T09:00:27.933

好吧，表达式不是静态方法，所以 Douglesm 的解决方案是更好的方法。但是，由于表达式不访问任何属性并且 PHP 允许，因此您的代码也应该可以工作。

但请确保包含 DboSource：

```
App::uses('DboSource', 'Model/DataSource'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:20:40.783

表达式的语法是：

```
$db = ConnectionManager::getDataSource('default');

$this->request->data['created'] = $db->expression('SYSDATE()'); 
```

如果你想使用`SYSDATE()`, `NOW()`, 和其他表达式

它在蛋糕 2.2.x 中工作

# javascript - 使用javascript动态修改url

> ID：14049439
> 
> 赞同：0
> 
> 时间：2012-12-27T04:41:37.740
> 
> 标签：javascript, jquery, url, browser

当用户选择要访问的另一个页面时，我想更改页面的 url。该 url 是动态替换原始的。

例如。

如果用户访问第 1 页，则 url 将是`book.html?page=1`

如果是第 30 页，则`book.html?page=30`依此类推。

但是，当我使用 javascript 更改链接时，它会陷入无限循环。

看来我一直访问->更改链接->访问->更改链接->....如何解决此问题？

例如。当链接改变时，不要访问该页面。

```
var currURL = $(location).attr('href');
var index = currURL.indexOf('?');
currURL = currURL.substring(0, index != -1 ? index : currURL.length);
// fall into loop
$(location).attr('href', currURL + '?page=' + pageNo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:51:34.633

只需使用标准的 javascript，您就可以很容易地做到这一点。

```
if(location.href.indexOf('?') !== -1 && location.href.indexof('?page=') === -1)
{
    var urlArray = location.href.split('?');
    var newURL = urlArray[0] + "?page=" + urlArray[1];
    location.href = newURL;
} 
```

# r - 从混合模型 (lme4) 公式中提取组件

> ID：14049440
> 
> 赞同：11
> 
> 时间：2012-12-27T04:41:54.847
> 
> 标签：r, formula

我正在尝试在 R 中编写一个接受如下公式的函数：

```
y ~ 1 + sex + age + (1 | school) + (1 | school:section) 
```

有没有一种简单的方法可以提取该公式的各个组成部分以用于我的函数？例如，我希望能够获得左侧、每个变量、随机效应变量以及它们的嵌套方式等。

有比走公式解析树更简单的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T06:11:23.810

如果您想要一个不需要正则表达式的解决方案，我建议您考虑`terms`.

```
form <- y ~ 1 + sex + age + (1 | school) + (1 | school:section)
terms(form)

## y ~ 1 + sex + age + (1 | school) + (1 | school:section)
## attr(,"variables")
## list(y, sex, age, 1 | school, 1 | school:section)
## attr(,"factors")
##                    sex age 1 | school 1 | school:section
## y                    0   0          0                  0
## sex                  1   0          0                  0
## age                  0   1          0                  0
## 1 | school           0   0          1                  0
## 1 | school:section   0   0          0                  1
## attr(,"term.labels")
## [1] "sex"                "age"                "1 | school"         "1 | school:section"
## attr(,"order")
## [1] 1 1 1 1
## attr(,"intercept")
## [1] 1
## attr(,"response")
## [1] 1
## attr(,".Environment")
## <environment: R_GlobalEnv> 
```

此外，您可以使用以下方法从中提取属性`attributes`：

```
attributes(terms(form))$term.labels

## [1] "sex"                "age"                "1 | school"         "1 | school:section" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-31T16:38:51.150

要扩展@Ben Bolker 的建议：

```
f1 <- formula(y ~ 1 + sex + age + (1 | school) + (1 | school:section)) 
```

左侧（假设左侧有一个变量）：

```
all.vars(terms(f1))[1] # character 
```

变量：

```
all.vars(delete.response(terms(f1))) # character 
```

随机效应：

```
lme4:::findbars(f1) # returns list of language items 
```

还有这个[`formula.tools`](http://cran.r-project.org/web/packages/formula.tools/index.html)包，虽然它没有专门用于混合效果模型的方法：

```
library(formula.tools)
lhs(f1)
r1 <- rhs.vars(f1) # gives fixed and random effects as character
r1[grepl("\\|", r1)] # character vector of random effects 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T04:50:38.727

也许是这样的：

```
x <- as.formula("y ~ 1 + sex + age + (1 | school) + (1 | school:section)")
x[[2]]
x[[3]][2] 
```

你也可以使用`strsplit`：

```
strsplit(as.character(x[[3]][2]), "\\+") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:15:31.923

```
> form <- y ~ 1 + sex + age + (1 | school) + (1 | school:section)
> form[1]
`~`()
> form[2]
y()
> form[3]
1 + sex + age + (1 | school) + (1 | school:section)() 
```

所以基本上你应该将 LHS 和 RHS 作为列表元素来处理。要拆分 RHS，您可以使用 TylerRinker 的答案。

# ios - UItableview 屏幕截图

> ID：14049441
> 
> 赞同：2
> 
> 时间：2012-12-27T04:42:04.100
> 
> 标签：ios

```
UIGraphicsBeginImageContext(self.reportList.frame.size);
CGRect tableViewFrame = self.reportList.frame;
self.reportList.frame = CGRectMake(0.0, 0.0, self.reportList.frame.size.width, self.reportList.contentSize.height);
[self.reportList.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *attachmentImage = UIGraphicsGetImageFromCurrentImageContext();
self.reportList.frame = tableViewFrame;
UIGraphicsEndImageContext(); 
```

通过使用上面的代码，我得到了 tableview 的屏幕截图，我的问题是 tableview 的屏幕截图具有单元格附件类型的披露指示器，但我不需要该单元格类型。有什么方法可以删除该附件类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T04:43:59.907

在截屏前将附件指示灯设置为`UITableViewCellAccessoryNone`，然后将其设置回`UITableViewCellAccessoryDisclosureIndicator`。

```
cell.accessoryType = UITableViewCellAccessoryNone; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T04:43:52.067

您可以将单元格类型设置为无，在这种情况下您将没有，但不仅在屏幕截图中，而且在应用程序中

# symfony - 如何在控制器之外获取 $view

> ID：14049443
> 
> 赞同：0
> 
> 时间：2012-12-27T04:42:21.113
> 
> 标签：symfony

我知道可以在渲染的模板文件中访问 $view，但我想知道是否有任何其他地方可以获取它？

原因是我在经典/旧系统之上构建 SF2，并且某些模板无法使用普通渲染方法进行渲染。但是，我仍然希望能够访问这些模板中的视图助手，所以我想初始化一个可以在这些旧模板中使用的全局 $view

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:24:18.130

这些帮助器在`PhpEngine`模板组件 ( [docs](http://symfony.com/doc/current/components/templating.html) ) 的类中提供。您可以使用该服务访问此类`templating.engine.php`（您需要启用 PHP 作为模板引擎）。

从控制器来看，它看起来像这样：

```
// ...
public function fooAction(...)
{
    // ...
    $template = $this->get('templating.engine.php')->render(...);
} 
```

如果您使用其他类，则应使用 DI：

```
// src/Acme/DemoBundle/Foo.php
namespace Acme\DemoBundle;

use Symfony\Component\Templating\EngineInterface;

class Foo
{
    private $templating;

    public function __construct(EngineInterface $templating)
    {
        $this->templating = $templating;
    }

    public function bar()
    {
        // ...
        $template = $this->templating->render(...);
    }
} 
```

```
// app/config.yml
services:
    acme_demo:
        foo:
            class: Acme\DemoBundle\Foo
            arguments: [@templating.engine.php] 
```

更多关于 DI[的文档](http://symfony.com/doc/2.0/book/service_container.html)。

# ruby-on-rails - 将渲染视图作为电子邮件发送

> ID：14049445
> 
> 赞同：6
> 
> 时间：2012-12-27T04:42:41.630
> 
> 标签：ruby-on-rails, email

我想发送通常是视图作为电子邮件正文的内容。

最简单的方法是什么？

例如：我有 pages/reports.html.erb，我想发送您在访问该路径时看到的页面作为电子邮件的正文。

有没有办法获取呈现的 html 并将其分配给电子邮件的 body 变量？

此外，我想将 PDF 版本作为附件包含在内。（我正在使用 wicked_pdf）

```
def reports
  @email = params[:email]
  #something here?
  respond_to do |format|
    format.html
    format.pdf do
      render :pdf => "usage_report"
    end
  end
end 
```

注意：如果有帮助，我在数据库中使用带有 mongoid 2 的 rails 3.1 和 heroku 上的 sendgrid

# 编辑：我最终做了什么：

在这里替换#something？和：

```
email_obj = {}
email_obj.to = params[:email]
email_obj.from = 'reports@company.com'
email_obj.subject = 'Report'
email_obj.body = render_to_string(:template => "pages/reports", :layout => false)
ReportsMailer.deliver_report(email_obj).deliver 
```

并在邮件类 mailers/reports_mailer.rb

```
class ReportsMailer < ActionMailer::Base
    default from: "from@example.com"
    def deliver_report(email)
        @email = email
        mail( :to => @email.to,
        :subject => @email.subject, 
        :from => @email.from)
    end
end 
```

在reports_mailer/deliver_report.html.erb

```
<%= render :inline => @email.body %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T06:37:06.967

rails 邮件程序视图按邮件程序的名称存储在视图的子文件夹中，就像控制器视图一样。很难说这是否完全适用于您不知道该方法的视图/控制器是什么样的，但您可以做的是对该页面进行渲染并将其转换为[部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)，然后您可以在两个控制器视图和[邮件程序视图](http://guides.rubyonrails.org/action_mailer_basics.html#mailer-views)如下：

给出部分：`_my_partial.html.erb`

在意见范围内：

```
render "my_partial" 
```

使用部分，您甚至可以传递视图呈现给它所需的任何变量：

```
render "my_partial", :variable => variable 
```

更新：这可能也很有趣：[Rendering a Rails view to string for email](https://stackoverflow.com/questions/2021740/rendering-a-rails-view-to-string-for-email)

# python-sphinx - 我可以在另一个指令中插入一个指令吗 - reStructuredText/Sphinx

> ID：14049455
> 
> 赞同：3
> 
> 时间：2012-12-27T04:45:00.297
> 
> 标签：python-sphinx, restructuredtext

我想在我的警告指令中插入一个图像：

```
.. admonition:: John

   Social Network
     .. image: './_static/images/social/facebook.png'
        :target: `facebook`_ 
```

但这不起作用。页面内没有显示图片。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T00:11:24.037

您的图像指令中有两个错误。首先，您需要一个额外的冒号 ( `:`) 跟随`.. image`。`'`其次，图像文件路径不需要引号 ( )。如果文档中的其他地方有有效的`facebook`参考，则以下代码适用于我：

```
.. admonition:: John

   Social Network
     .. image:: /path/to/facebook.png
        :target: `facebook`_ 
```

如果没有第二个冒号，图像只是一个注释（例如，可能在 HTML 输出中显示为这样）。有关详细信息，请参阅[图像指令](http://docutils.sourceforge.net/docs/ref/rst/directives.html#image)文档。

# javascript - 我对 Ember.View 的解释感到困惑

> ID：14049460
> 
> 赞同：2
> 
> 时间：2012-12-27T04:45:44.887
> 
> 标签：javascript, ember.js

当我在 emberjs.com 上阅读下面的解释时，我感到困惑。

我输入了与下面的代码相同的代码，但它没有给我与解释所示相同的结果。

我认为下面的解释在某种程度上被省略了，让我产生了误解和困惑。

我想知道完整的代码以获得下面显示的相同结果，以完全理解解释的含义。

如果有人可以向我展示完整的代码以获得如下所示的结果，我真的很感激。

非常感谢你！

> 正如您已经看到的，您可以通过将属性的值包含在 Handlebars 表达式或一系列大括号中来打印属性的值，如下所示：
> 
> > 我的新车是{{color}}。
> 
> 这将查找并打印视图的颜色属性。例如，如果您的视图如下所示：
> 
> > App.CarView = Ember.View.extend({ color: 'blue' });
> 
> 您的视图将像这样出现在浏览器中：
> 
> > 我的新车是蓝色的。
> 
> 您还可以指定全局路径：
> 
> > 我的新车是 {{App.carController.color}}。

顺便说一句，这是我尝试过的代码，它没有得到与上面解释中相同的结果。

```
/*----------
app.js
----------*/

var App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

App.CarView = Ember.View.extend({
    color: 'blue',
    templateName: 'car'
});

App.CarController = Ember.Controller.extend();

App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/'
        })
    })
})

App.initialize();

/*----------
index.html
----------*/

<script type="text/x-handlebars" data-template-name="application">
    <h1>Hello from Ember.js</h1>
</script>

<script type="text/x-handlebars" data-template-name="car">
    My new car is {{color}}.<br />
    My new car is {{App.carController.color}}.
</script> 
```

**编辑：**

**索引.html**

```
<script type="text/x-handlebars" data-template-name="application">

<!-- This Works -->  
{{#view App.CarView}}
    (1)My new car is {{view.color}}.<br />
{{/view}}

<!-- These don't Work -->
(2)My new car is {{view.color}}.<br />
(3)My new car is {{App.CarView.color}}.<br />

(4)My new car is {{App.CarController.color}}.<br />
(5)My new car is {{App.carController.color}}.<br />

<!-- this outlet-area shows what I have in my "car" template -->
{{outlet}}

</script>

<script type="text/x-handlebars" data-template-name="car">

<!-- This color property is defined in App.CarView.-->
(6)My new car is {{view.color}}.<br />

<!-- This color property is defined in App.CarCotroller.-->
(7)My new car is {{color}}.<br />

<!-- These don't work-->
(8)My new car is {{App.CarCotroller.color}}.<br />
(9)My new car is {{App.carCotroller.color}}.<br />

</script> 
```

**应用程序.js**

```
var App = Ember.Application.create();
App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

App.CarController = Ember.ObjectController.extend({ 
    color:'blue'
});

App.CarView = Ember.View.extend({   
    color:"blue",
    templateName: 'car'
});

App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets:function(router){
                router.get('applicationController').connectOutlet('car');
            }     
        })
    })
}) 
```

应用程序.initialize();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:10:10.777

呵呵，文档中好像有错误。我会看的，谢谢指点：）

通常，当在 CarView 模板中使用 {{color}} 时，它会查找视图的上下文，默认情况下这是它的控制器。颜色属性应该在控制器中定义。

如果要从视图中定义和引用属性，则必须`view`在模板中使用关键字。在您的示例中， {{view.color}} 应该可以工作。

编辑：关于文档，有大量的 WIP 参见：[https](https://github.com/emberjs/website/tree/doc-refactor) ://github.com/emberjs/website/tree/doc-refactor 。特别是您的用例不再存在：[https ://github.com/emberjs/website/blob/doc-refactor/source/guides/templates/handlebars-basics.md](https://github.com/emberjs/website/blob/doc-refactor/source/guides/templates/handlebars-basics.md)

更新：我认为这里的所有问题都包含在这个很好的说明中： http: [//trek.github.com/](http://trek.github.com/)。

我认为理解您的观点应该足够了，但我可以做出简短的回答，可能会对您有所帮助。

**1**有效，因为您在此处使用 {{view}} 帮助器显式创建 CarView，因此使用 view.color 是有效的。

**2**不起作用，因为您在 ApplicationView 的范围内，它没有颜色属性

**3**不起作用，因为颜色是不在 CarView 类上的 CarView 实例的属性

**4**同 3

**5** Ember.js 为你实例化了控制器，但它们不是 App 的属性，而是应用程序路由器的属性。所以 {{App.router.carController.color}} 可以工作（**但不要使用它，非常**糟糕的做法）

**6**有效，因为您在 CarView 的模板中，并且在 CarView 类中定义了一个颜色属性（然后可以在当前的 CarView 实例中访问）

**7**有效，因为它引用了 CarController 类中定义的颜色属性。正如我所说，Ember.js 在应用程序初始化时实例化控制器。稍后在您的代码中，调用`router.get('applicationController').connectOutlet('car');`Ember.js 时将创建 CarView 类的实例，将其连接到 router.carController 实例，并将其显示在 ApplicationView 模板的 {{outlet}} 中（因为您正在调用 connectOutlet()在 applicationController 上。因此，CarView 模板的渲染上下文是 carController，所以当使用 {{aProperty}} 时，它意味着`controller.aProperty`，在你的情况下`carController.color`，它是“蓝色”

**8**同 3

**9**同 5

正如我所说，对于您的最后一个问题，您绝不能从模板静态访问 carController 实例:)

呵呵，我觉得就这些

# php - 准备好的语句和转义

> ID：14049463
> 
> 赞同：0
> 
> 时间：2012-12-27T04:45:54.577
> 
> 标签：php, mysql, database, mysqli

我已经读了很多遍了-只是想澄清一下（我想我很困惑）

我今天切换到 mysqli，并开始使用准备好的语句。

*我准备好的陈述的例子*

```
function read($table, $var) {
    if($stmt = mysqli_prepare($link, "SELECT * FROM ? WHERE `uid`=?")) {
        mysqli_stmt_bind_param($stmt, "si", $table, $var);
        mysqli_stmt_execute($stmt);
        return mysqli_fetch_assoc($stmt);
    } else {
        echo '<script type="text/javascript>">alert("Something went wrong");</script>';
    }
}

$info = read("users", $_SESSION['uid']);
$char = read("characters", $_SESSION['uid']); 
```

我还需要逃避什么吗？我知道，我知道，我在任何地方都读过，使用准备好的语句时不需要逃避，但是有这样的问题[让](https://stackoverflow.com/questions/9181160/pdo-mysql-prepared-statements-not-escaping-characters)我[担心](https://stackoverflow.com/questions/7176683/prepared-statement-not-escaping-apostrophe)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T04:47:35.177

您查询的唯一问题是您不能将 tableName 作为参数传递。*只有值可以参数化*。所以另一种方法是将 tableName 与您的查询连接起来。

```
"SELECT * FROM `" . $tableNameHere . "` WHERE `uid`=?" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T05:03:07.717

好吧，首先这些代码是行不通的。

所以，实际上有2个问题

> 1.  我是否需要对绑定参数进行任何额外的转义

不。

> 2.  如何安全地将标识符插入查询？

这取决于。只要您在代码中硬编码了表名 - 就可以按原样插入它。
但如果它来自不受信任的来源，则必须使用白名单将其过滤掉。我已经在我的其他答案中解释了它[https://stackoverflow.com/a/8255054/285587](https://stackoverflow.com/a/8255054/285587)

至于您链接到的问题，第二个无关紧要，第一个几乎没有意义。LIKE*应该*返回许多行，因此，一个人要么根本不使用 LIKE，要么不用担心它（在安全方面）。尽管就返回正确结果而言，您可能希望转义在 LIKE 中具有特殊含义的字符，但我根本不会将 LIKE 用于搜索目的。

# c - argv[0] 的工作原理

> ID：14049467
> 
> 赞同：1
> 
> 时间：2012-12-27T04:46:33.010
> 
> 标签：c, command-line-arguments

我知道它`argv[0]`代表可执行文件名，但我不明白它是如何实现的——它如何在**源代码级别**获取文件名和选项。一开始以为是依赖linux自带的函数，后来发现windows也支持，让我相信可能是编译器做的吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T04:52:19.053

它实际上是[C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)的一部分，因此跨编译器和操作系统的实现相同。从*5.1.2.2.1 程序启动*（第 12 页）开始：

> 如果 的值`argc`大于零，则 指向的字符串`argv[0]`代表*程序名*；`argv[0][0]`如果主机环境中没有程序名，则应为空字符。如果 的值`argc`大于 1，则`argv[1]`through指向的字符串`argv[argc-1]`表示*程序参数*。

编辑：跟进 Waleed Khan 的评论，您可以通过以下方式检索这些值：

*   Linux -[`/proc/self/cmdline`](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)
*   OSX - [`_NSGetArgc`/`_NSGetArgv`](http://www.opensource.apple.com/source/Libc/Libc-825.25/include/crt_externs.h)或[`[NSProcessInfo arguments]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSProcessInfo_Class/Reference/Reference.html#//apple_ref/occ/instm/NSProcessInfo/arguments)
*   窗户 -[`GetCommandLine()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156.aspx)有[`CommandLineToArgvW()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776391.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T02:24:53.673

当执行二进制文件时，glibc 调用函数 __libc_start_main，它将球传递给系统调用 execve，其中 argv/argc 被推入堆栈。

内核解析堆栈以为您填充 argv .. 所以如果您有兴趣修改或理解解析部分，您应该查看内核 execve 代码，如果您在 lxr 中遵循它，您将到达这一行，我相信您正在寻找的是：http: [//lxr.linux.no/linux+v3.0/fs/exec.c#L1541](http://lxr.linux.no/linux+v3.0/fs/exec.c#L1541)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T05:28:21.040

[http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=fs/exec.c#l1376](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=fs/exec.c#l1376) 搜索 sys_execve() ，阅读内核代码，你可以找到它。

# c++ - MFC 为 OPOS 添加 Typelib 或 ActiveX

> ID：14049468
> 
> 赞同：0
> 
> 时间：2012-12-27T04:46:57.110
> 
> 标签：c++, mfc, activex, typelib, opos

所以在工作中，我已经为一些不同的事情在 OPOS 驱动程序上工作了几个月。我没有创建这个项目，但我已经接管了它并且是唯一一个开发它的人。所以今天我对它的完成方式感到好奇，我认为它可能一开始就走错了路。我不得不做一些挖掘来发现它使用了一家名为 MCS（Monroe Consulting Services）的公司的 OPOS 驱动程序，我下载了 1.13 并安装了 MSI 版本。我启动了 VS 创建了一个新的 mfc dll。然后我去添加一个类。这就是我感到困惑的地方。

不管我选择 Typelib 还是 ActiveX，它通常都会给我相同的接口列表，我可以从中添加/扩展（除了 MSR 想到的一个例外，它有一个我可以扩展的事件接口）而且它们都制作相同的头文件（在 msr 的情况下是 COPOSMSR.h），但一个扩展 CCmdTarget，另一个扩展 CWnd。这是我的第一个问题。我应该选择哪个？什么是 typelib/什么是 ActiveX 组件，它们之间有何不同。

我一直在研究的扩展 CCmdTarget。对于我的生活，我无法弄清楚驱动程序如何知道使用其中一个文件（USNMSRRFI​​D），但这就是所有开发的地方。（我把它分解了一下，所以它不仅仅是一个大文件）但是那个文件没有扩展 COPOSMSR..它也扩展了 CCmdTarget。我唯一一次看到提到 USN 文件的内容是在 MSRRFI​​D.idl 中（这让我更加困惑）有人对此有清楚的了解吗？

我的一部分认为这可能会在部署时产生非常大的影响。一些使用此驱动程序编写的测试应用程序需要一个有点混乱的设置过程，包括注册不同的驱动程序、将文件复制到特定文件夹、设置注册表等等。我认为，如果我能掌握这一切意味着什么，以及如何制作一个很好的应用程序来正确扩展这些 OPOS 设备之一，那么我可以在未来为自己节省更多的悲伤。

任何提示或指针？？？对不起，如果这是一个新手问题..但我是 C++ 新手。我从 Java 开始，然后转移到 C#，所以其中一些东西在我头上……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:56:17.453

好吧，所以我已经完成了大量的挖掘工作，这就像在寻找恐龙一样。不容易，也难找。我最终会写一个很好的小方法，但现在我会提出我的发现。虽然我仍然没有这个 100% 我知道我很接近。

原来 typelib 和 activeX 的东西不是一个大问题，但在你开始之后就会发挥作用。ActiveX 用于控制对象，Typelib 用于服务对象。最重要的是正确开始。我在一些中文网站上找到了一篇文章，在找出翻译错误后提供了一些 OK 提示。首先，您需要使用自动化创建一个 C++ 项目。它可以是 ATL 或 MFC。我的首选是 MFC。在附录 A 第 8 节的 UPOS 1.13 pdf（或更新版本）中，它描述了服务对象的职责。它具有您需要实现的主要方法。您必须添加 16 种方法，以及至少 4 种获取/设置 OPOS 设备属性的方法。

因此，要开始使用，您需要打开添加类向导（用于 MFC 类）并单击添加 MFC 类。你会希望你的基类是 CCmdTarget。想出一个优雅的类名（我选择了 PinpadSOCPP）然后在自动化单选按钮中选择 Creatable by type ID。它应该将您的类型 ID 填写为 [Project Name].[Class name]，所以我的是 PinpadSO.PinpadSOCPP。打完。这是一个很好的接口文件，您可以使用类视图向其添加方法等。

至于添加方法，有两件事需要注意，其中之一我还没有 100% 弄清楚。首先是您必须使用正确的参数和返回值来实现该部分中的所有方法。它们中的大多数返回 LONG（32 位有符号数）。两个最常见的参数是 LONG 和 BSTR。（当你有“out”参数时偶尔会有指针）这是我认为我目前失败的部分，因为我不知道我是否正确实施了它们，这就是为什么我得到错误 104/ 305（来自中文文章说我的方法遗漏了一些东西）我不确定它是否区分大小写，我' 我不确定看起来需要获取/设置哪些属性需要实现的 7 个属性，因为我正在工作的 MSR SO 并没有全部使用它们并且 SO 正在工作。另一个是在您实现基本 OPOS 方法之后，您还必须从您的特定 OPOS 设备实现额外的方法。因为我在做 PINPad，所以我必须实现另外 6 种方法。

现在这是一项非常耗时的工作，因为您必须打开类视图，导航到项目类的名称。展开它并转到界面部分。我的项目名称是 PinpadSO，我在其中实现它的文件是 PinpadSOCPP（这意味着接口名称是 IPinpadSOCPP）右键单击 IPinpadSOCPP 并单击添加 > 添加方法。这将带您进入一个两步过程。你填写你的返回值，你的函数名，添加你所有的参数。点击下一步并填写一些帮助字符串信息（如果需要）并点击完成。现在，在您这样做 20 多次之后，它会变得又旧又慢……如果您像我一样键入 Computer 而不是 Compute 和触发器字母，或者忘记点击添加所有参数。一个人可以制作一个不错的小程序来编辑每次添加方法时都会更改的 3 个文件，这将大大加快速度。如果你犯了一个错误，你将需要打开`[project name].idl`, `[class name].h`, 和`[class name].cpp`那些是直接将方法添加到其中的 3 个文件。我建议不要犯错误。

所以现在所有的辛苦工作都已经过去了。编译你的程序。如果你想为自己节省一个额外的步骤，你可以在链接器项目设置中打开自动注册（注意：如果你这样做，如果你在 vista 或更高版本中编程，你需要以管理员身份运行 Visual Studio）这会节省你不必打开命令窗口（管理员）导航到您的 DLL 并在该 DLL 上使用命令 regsvr32。好处是您不必一遍又一遍地这样做，一次就可以了。我没有确凿的事实表明它每次都这样工作，但是我正在处理的 MSR SO，我将对它进行更改，编译它，然后打开我的 OPOS 测试程序，并且更改已经生效。

之后，您需要添加注册表。导航到 HKLM\software\OLEforRetail\ServiceOPOS （~~注意，如果你有 x64 机器，你会这样做两次。一个在那里，然后在 HKLM\software\Wow6432Node\OLEforRetail\ServiceOPOS~~）

您需要为正在使用的任何 OPOS 设备添加密钥。我正在制作一个密码键盘，所以我制作了一个名为 PINPad 的密钥（检查你的 UPOS 文档，看看你应该给它起什么名字）最后为你的设备选择一个名字。我从供应商那里选择了型号类型作为我的设备名称（C100），并在 PINPad 中创建了一个子密钥。默认 REG_SZ 值需要是您注册的 SO 设备类型 ID。就我而言，它是 PinpadSO.PinpadSOCPP

如果您没有 OPOS 测试程序（我只是自己制作了一个控制台程序），那么您可以使用 Microsoft OPOS 测试应用程序（我无法让它在我的 x64 机器上工作......但也许你'会有更好的运气）如果您决定制作自己的 OPOS 测试应用程序，请确保为 x86 机器编译它（即使您有 x64）OPOS 出于某种原因不喜欢 x64（可能是指针长度我会假设）..无论如何。完成所有设置后，运行您的测试应用程序（就我而言，我只是在运行`OPOSPinpadClass pin = new OPOSPinpadClass(); Console.WriteLine(pin.Open("C100"));`并希望为 0 :)

我目前得到 104 (E_NOSERVICE) .. 就像我之前所说的，我认为这是因为我的所有方法都不正确。如果事实证明是这样，我将编辑此回复，或者我会报告并说出它的真实情况。任何人，我希望这可以帮助那些决定自己制作 SO 的人。祝你好运

**更新**

当您调用 Open 命令时，OPOS 会检查几个属性。必须实现的属性之一是 GetPropertyNumber 中的 ，它是`PIDX_ServiceObjectVersion`. 您需要将此数字设置为返回`(1000000 * majorVersion) + (1000 * minorVersion) + revision`，因为我正在使 OPOS 1.13 兼容所以我返回的 ServiceObjectVersion 是 1013000。您还需要在 GetPropertyString 中实现 3 个属性：

*   `PIDX_DeviceDescription`
*   `PIDX_DeviceName`
*   `PIDX_ServiceObjectDescription`

对于所有其他值，您可以返回一个空字符串或 0，直到您开始连接所有这些东西。

作为旁注，如果您不想在 C++ 中制作它，则不必这样做。您可以使用任何可以编写 ActiveX 对象的语言来制作它（例如 COM 可见的 .NET 类库）

# c# - 将 If 语句转换为 Switch

> ID：14049469
> 
> 赞同：3
> 
> 时间：2012-12-27T04:46:57.733
> 
> 标签：c#, if-statement, switch-statement

我有这个 If 语句，我想将它们移到 Case-Switch

这是我的 if 状态：

```
if (rResponse.ErrorCode[0] == 0x20 && rResponse.ErrorCode[1] == 0x03)
    ErrorMsg = "COMM_FRAME_ERROR";
if (rResponse.ErrorCode[0] == 0x20 && rResponse.ErrorCode[1] == 0x04)
    ErrorMsg = "JAM";
if (rResponse.ErrorCode[0] == 0x20 && rResponse.ErrorCode[1] == 0x05)
    ErrorMsg = "NO_CARD"; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T04:49:11.090

```
if (rResponse.ErrorCode[0] == 0x20) {
  switch(rResponse.ErrorCode[1]) {
    case 0x03:
      ErrorMsg = "COMM_FRAME_ERROR";
      break;
    case 0x04:
      ErrorMsg = "JAM";
      break;
    case 0x05:
      ErrorMsg = "NO_CARD";
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T04:54:01.260

如果你想要两个都在 switch 案例中：

```
switch(rResponse.Errorcode[0])
case 0x20:
    switch(rResponse.ErrorCode[1]) {
        case 0x03:
            ErrorMsg = "COMM_FRAME_ERROR";
            break;
        case 0x04:
            ErrorMsg = "JAM";
            break;
        case 0x05:
            ErrorMsg = "NO_CARD";
            break;
    }
    break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T04:56:59.457

可以省略或更改异常，

```
if (rResponse.ErrorCode[0] == 0x20)
        {
            switch (rResponse.ErrorCode[1])
            {
                case 0x03:
                    ErrorMsg = "COMM_FRAME_ERROR";
                    break;
                case 0x04:
                    ErrorMsg = "JAM";
                    break;
                case 0x05:
                    ErrorMsg = "NO_CARD";
                    break;
                default:
                    throw new InvalidOperationException();
                    break;
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T04:54:58.767

```
switch(rResponse.Errorcode[0])
{
 case 0x20:
  switch(rResponse.ErrorCode[1]) 
  {
    case 0x03:
        ErrorMsg = "COMM_FRAME_ERROR";
        break;
    case 0x04:
        ErrorMsg = "JAM";
        break;
    case 0x05:
        ErrorMsg = "NO_CARD";
        break;
  }
  break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T04:59:36.507

你可以试试这样的..

```
 switch (rResponse.ErrorCode[0] + rResponse.ErrorCode[1])
       {
        case (0x20 + 0x03):
              ErrorMsg = "COMM_FRAME_ERROR";
              break;
       case (0x20 + 0x04):
              ....
      } 
```

虽然这可能不适合所有情况，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T05:07:47.503

尽管根据提供的信息，Itay 的反应可能是最好的。但是，如果这个错误部分的规模更大，那么下面的内容可能值得一试。（类似的方法，只是使它易于添加。

```
private string GetError(byte response1, byte response2)
{
    var ErrorMessage = "";
    switch (response1)
    {
        case 0x20:
            ErrorMessage = ParseCardErrors(response2);
            break;
        case 0x21:
            ErrorMessage = ParseDeviceErrors(response2);
            break;
        default:
            ErrorMessage = "Unknown Error";
    }

    return ErrorMessage;
}

private string ParseCardErrors(byte response)
{
  switch(response)
    {
        case 0x03:
          return "COMM_FRAME_ERROR";
        case 0x04:
          return "JAM";
        case 0x05:
          return "NO_CARD";
        default:
            return "Unknown card Error";
    }
}

private string ParseDeviceErrors(byte response)
{
  switch(response)
    {
        case 0x03:
          return "COMM_FRAME_ERROR";
        case 0x04:
          return "Unplugged";
        case 0x05:
          return "No device";
        default:
            return "Unknown device Error";
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T06:21:37.693

我可能会发布一个非常不同的解决方案这个问题，但它可以回答@Robert 问题：

```
class Program
{
    //This can be included in Seprate class also
    public enum ErrorMessages
    {
        //Store any Values as Key and Pair
        // Provide and easy way to update answers
        Error1 = 1,
        Error2 = 2,
        Error3 = 3,
        Error4 = 4
    }

    public static void Main()
    {
        ICollection<EnumValueDto> list = EnumValueDto.ConvertEnumToList<ErrorMessages>();

        foreach (var element in list)
        {
            Console.WriteLine(string.Format("Key: {0}; Value: {1}", element.Key, element.Value));
        }
        Console.Read();

        /* OUTPUT:
           Key: 1; Value: Error1
           Key: 2; Value: Error2
           Key: 3; Value: Error3 
           Key: 4; Value: Error4
        */
    }

    public class EnumValueDto
    {
        public int Key { get; set; }

        public string Value { get; set; }

        public static ICollection<EnumValueDto> ConvertEnumToList<T>() where T : struct, IConvertible
        {
            if (!typeof(T).IsEnum)
            {
                throw new Exception("Type given T must be an Enum");
            }

            var result = Enum.GetValues(typeof(T))
                             .Cast<T>()
                             .Select(x => new EnumValueDto
                             {
                                 Key = Convert.ToInt32(x),//values are arbitary here any datatype will work
                                 Value = x.ToString(new CultureInfo("en"))
                             })
                            .Where(err => err.Key==3) //Instead of 3 as key here use Response variable instead
                            .ToList()
                            .AsReadOnly();

            return result;
        }
    }

} 
```

# objective-c - 方法中间的可选块：安全吗？

> ID：14049470
> 
> 赞同：1
> 
> 时间：2012-12-27T04:47:02.390
> 
> 标签：objective-c, cocoa-touch, cocoa, objective-c-blocks

我有一个看起来像这样的方法：

```
- (void)doSomething:(void(^)(MyItem *item))optionalBlock {

    // 1\. Do the regular stuff with the item
    item.regularStuff = @"something_regular";

    // 2\. Run the optional block
    // which may or may not make some extra modifications to the item
    if (optionalBlock) optionalBlock(item);

    // 3\. Save the modified item into the Core Data
    // etc

} 
```

我打算这样称呼

```
[self doSomething:nil]; 
```

或者：

```
[self doSomething:^(MyItem *item) {

    // Make some extra modifications to the item before it’s saved
    item.custom = @"custom";

}]; 
```

是否可以安全地假设在第三步我总是会得到`item`已经被方法和（可能）可选块修改的，或者我是否需要实现某种方法来准确找出块何时完成执行所以我可以从那里继续？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:04:42.257

它是安全的。您不需要任何特殊检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T06:43:18.087

是和不是。

是的，这是安全的，因为如果块仅包含用于修改您的 的顺序代码`item`，则所有这些修改将在时间控制返回您的`doSomething`方法时完成。

但是，如果您允许方法的调用者传入任意块，则不知道它会做什么以及何时执行。它可以设置计时器、产生线程、使用`dispatch_async`或做任何其他事情，这可能会导致它在某种意义上在它返回时还没有真正“完成”。你在这里交出车钥匙——没有什么能阻止来电者兜风。

确实，这是超出语言范围的事情，更多关于您在 API 文档中定义的合同类型：如果您希望调用者仅在执行该块期间修改对象，只需告诉他们这就是您期望他们做的事情，并且不期望您的 API 以其他方式工作。

# iphone - 根据服务器响应更新应用程序

> ID：14049472
> 
> 赞同：0
> 
> 时间：2012-12-27T04:47:26.633
> 
> 标签：iphone, ios, xcode, versioning

我想让我的 iOS 应用程序检查其服务器请求是否正在通过，以便根据他们使用的 API 版本在数据库中注册用户数量。

然后，我将使用这些统计信息来选择合适的时间推出应用程序的更高版本，并通知用户新版本。

是否可以获得执行此类分析所需的代码示例？

# sqlite - 适用于不同环境的 System.Data.SQLite

> ID：14049478
> 
> 赞同：0
> 
> 时间：2012-12-27T04:48:23.787
> 
> 标签：sqlite

前往[.Net SQLite (System.Data.SQLite) 下载页面](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)，每个 .Net 框架和 CPU 架构 (32/64) 都有不同的版本。我有一个可以在我的机器上正常运行的 WPF/NHibernate 应用程序。我的机器是带有 .Net 4.5 的 Windows 8 x64。应用程序位于 .Net 4.0 中，我在其中使用 SQLite x32 for .Net 4.0。

问题是应用程序何时部署到客户的机器上。其中一些有 Windows XP，一些有 Vista，一些有 Windows 7 和 8。其中许多无法加载数据库驱动程序，我不得不使用另一个 System.Data.SQLite。例如它们上面的 x64 或 .Net 2.0。我想知道为什么会发生这种情况以及如何纠正它。特别是当所有客户的机器上都安装了 .Net 4.0 时。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:57:49.427

如[本页](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)所述，`System.Data.SQLite`.NET Framework 2.0 的程序集二进制文件应该与 .NET Framework 4.0 一起使用，但反之则不然。所以如果你需要向后兼容旧版本的框架，你应该使用旧的 2.0 程序集。

还有其他复杂性，例如如何正确使用 x64 的混合模式程序集，因此您应该仔细阅读该页面。

# javascript - AngularJS 中范围原型/原型继承的细微差别是什么？

> ID：14049480
> 
> 赞同：1049
> 
> 时间：2012-12-27T04:48:31.323
> 
> 标签：javascript, angularjs, inheritance, prototype, prototypal-inheritance

[API 参考范围页面](http://docs.angularjs.org/api/ng.$rootScope.Scope)说：

> 范围*可以*从父范围继承。

[开发人员指南范围页面](http://docs.angularjs.org/guide/scope)说：

> 范围（原型）从其父范围继承属性。

*   那么，子作用域是否总是从其父作用域原型继承？
*   有例外吗？
*   当它继承时，它总是正常的 JavaScript 原型继承吗？

* * *

## 回答 #1

> 赞同：1756
> 
> 时间：2012-12-27T04:48:31.323

**快速回答**：
子作用域通常从其父作用域原型继承，但并非总是如此。这条规则的一个例外是一个指令`scope: { ... }`——它创建了一个不典型继承的“隔离”范围。创建“可重用组件”指令时经常使用此构造。

至于细微差别，范围继承通常是直截了当的......直到您需要在子范围中进行**2路数据绑定**（即，表单元素，ng-model）。如果您尝试从子作用域内绑定到父作用域中的**原语（例如，数字、字符串、布尔值），那么 Ng-repeat、ng-switch 和 ng-include 可能会绊倒您。**它不像大多数人期望的那样工作。子作用域拥有自己的属性，该属性隐藏/隐藏同名的父属性。您的解决方法是

1.  在模型的父对象中定义对象，然后在子对象中引用该对象的属性：parentObj.someProp
2.  使用 $parent.parentScopeProperty （并非总是可能，但比 1 更容易。如果可能的话）
3.  在父作用域上定义一个函数，并从子作用域调用它（并不总是可能的）

新的 AngularJS 开发人员通常没有意识到 , `ng-repeat`,`ng-switch`和`ng-view`都`ng-include`创建`ng-if`了新的子作用域，所以当涉及到这些指令时问题经常出现。（有关问题的快速说明，请参见此[示例](http://plnkr.co/edit/zZfUQN?p=preview)。）

[通过遵循始终使用“.”](http://www.youtube.com/watch?v=ZhfUv0spHCY&feature=youtu.be&t=30m)的“最佳实践”，可以轻松避免原语的这个问题。[在您的 ng 模型中](http://www.youtube.com/watch?v=ZhfUv0spHCY&feature=youtu.be&t=30m)- 观看 3 分钟。Misko 演示了`ng-switch`.

有一个 '。' 在您的模型中将确保原型继承发挥作用。所以，使用

```
<input type="text" ng-model="someObj.prop1">

<!--rather than
<input type="text" ng-model="prop1">`
--> 
```

* * *

**长答案**：

## JavaScript 原型继承

**也放在 AngularJS wiki 上：** [https ://github.com/angular/angular.js/wiki/Understanding-Scopes](https://github.com/angular/angular.js/wiki/Understanding-Scopes)

首先对原型继承有一个扎实的理解很重要，特别是如果您来自服务器端背景并且您更熟悉类继承。所以让我们先回顾一下。

假设 parentScope 具有属性 aString、aNumber、anArray、anObject 和 aFunction。如果 childScope 原型继承自 parentScope，我们有：

![原型继承](../Images/c7c42e4ec30213e832a25794a7955036.png)

（请注意，为了节省空间，我将`anArray`对象显示为具有三个值的单个蓝色对象，而不是具有三个单独的灰色文字的单个蓝色对象。）

如果我们尝试从子作用域访问定义在 parentScope 上的属性，JavaScript 会先在子作用域中查找，而不是找到该属性，然后在继承的作用域中查找，然后找到该属性。（如果它没有在 parentScope 中找到该属性，它将继续原型链......一直到根范围）。所以，这些都是真的：

```
childScope.aString === 'parent string'
childScope.anArray[1] === 20
childScope.anObject.property1 === 'parent prop1'
childScope.aFunction() === 'parent output' 
```

假设我们然后这样做：

```
childScope.aString = 'child string' 
```

不参考原型链，在 childScope 中添加了一个新的 aString 属性。 **这个新属性隐藏/隐藏同名的 parentScope 属性。** 当我们在下面讨论 ng-repeat 和 ng-include 时，这将变得非常重要。

![属性隐藏](../Images/efd19fe1472afa8765b773cee899183c.png)

假设我们然后这样做：

```
childScope.anArray[1] = '22'
childScope.anObject.property1 = 'child prop1' 
```

查询原型链是因为在 childScope 中找不到对象（anArray 和 anObject）。在 parentScope 中找到对象，并且在原始对象上更新属性值。没有向 childScope 添加新属性；不会创建新对象。（请注意，在 JavaScript 中，数组和函数也是对象。）

![遵循原型链](../Images/a7800454991c3c3946d27d1dc681ad62.png)

假设我们然后这样做：

```
childScope.anArray = [100, 555]
childScope.anObject = { name: 'Mark', country: 'USA' } 
```

不参考原型链，并且子作用域获得了两个新的对象属性，它们隐藏/隐藏了具有相同名称的 parentScope 对象属性。

![更多属性隐藏](../Images/66360a84c0e0746b752d671c2cc3b89e.png)

要点：

*   如果我们阅读childScope.propertyX，而childScope有propertyX，那么原型链就不用参考了。
*   如果我们设置 childScope.propertyX，原型链就不会被查询。

最后一种情况：

```
delete childScope.anArray
childScope.anArray[1] === 22  // true 
```

我们先删除了 childScope 属性，然后当我们再次尝试访问该属性时，会查询原型链。

![删除子属性后](../Images/c66d043a0d412855362bece92a5d4f84.png)

* * *

## 角度范围继承

竞争者：

*   以下创建新的范围，并继承原型：ng-repeat、ng-include、ng-switch、ng-controller、directive with `scope: true`、directive with `transclude: true`。
*   以下创建了一个不继承原型的新范围：带有`scope: { ... }`. 这会创建一个“隔离”范围。

请注意，默认情况下，指令不会创建新范围——即默认为`scope: false`.

### ng-包括

假设我们的控制器中有：

```
$scope.myPrimitive = 50;
$scope.myObject    = {aNumber: 11}; 
```

在我们的 HTML 中：

```
<script type="text/ng-template" id="/tpl1.html">
<input ng-model="myPrimitive">
</script>
<div ng-include src="'/tpl1.html'"></div>

<script type="text/ng-template" id="/tpl2.html">
<input ng-model="myObject.aNumber">
</script>
<div ng-include src="'/tpl2.html'"></div> 
```

每个 ng-include 都会生成一个新的子作用域，其原型继承自父作用域。

![ng-include 子范围](../Images/c59b0d46ca9213bf5746abfd12e261fb.png)

在第一个输入文本框中键入（例如“77”）会导致子范围获得一个新的`myPrimitive`范围属性，该属性隐藏/隐藏同名的父范围属性。这可能不是您想要/期望的。

![ng-include 与原语](../Images/eee21152c17e410bdf11a54b7def9863.png)

在第二个输入文本框中键入（例如“99”）不会产生新的子属性。因为 tpl2.html 将模型绑定到对象属性，所以当 ngModel 查找对象 myObject 时，原型继承就会启动——它在父范围内找到它。

![ng-include 与一个对象](../Images/c094b93e9828b430137db3502bbca507.png)

如果我们不想将模型从原始模型更改为对象，我们可以重写第一个模板以使用 $parent：

```
<input ng-model="$parent.myPrimitive"> 
```

在此输入文本框中键入（例如“22”）不会产生新的子属性。该模型现在绑定到父范围的属性（因为 $parent 是引用父范围的子范围属性）。

![ng-include 与 $parent](../Images/cdcc0c38ce2f5d2d39cfed6142866e24.png)

对于所有范围（原型或非原型），Angular 总是通过范围属性 $parent、$$childHead 和 $$childTail 跟踪父子关系（即层次结构）。我通常不会在图表中显示这些范围属性。

对于不涉及表单元素的场景，另一种解决方案是在父作用域上定义一个函数来修改原语。然后确保孩子总是调用这个函数，由于原型继承，这个函数对孩子范围是可用的。例如，

```
// in the parent scope
$scope.setMyPrimitive = function(value) {
     $scope.myPrimitive = value;
} 
```

这是一个使用这种“父函数”方法的[示例小提琴。](http://jsfiddle.net/mrajcok/jNxyE/)（小提琴是作为这个答案的一部分写的：[https](https://stackoverflow.com/a/14104318/215945) ://stackoverflow.com/a/14104318/215945 。）

另请参阅[https://stackoverflow.com/a/13782671/215945](https://stackoverflow.com/a/13782671/215945)和[https://github.com/angular/angular.js/issues/1267](https://github.com/angular/angular.js/issues/1267)。

### ng-开关

ng-switch 范围继承就像 ng-include 一样工作。因此，如果您需要将 2 路数据绑定到父范围内的原语，请使用 $parent，或者将模型更改为对象，然后绑定到该对象的属性。这将避免子范围隐藏/隐藏父范围属性。

另请参阅[AngularJS，绑定 switch-case 的范围？](https://stackoverflow.com/questions/12405005/angularjs-bind-scope-of-a-switch-case/12414410)

### ng-重复

Ng-repeat 的工作方式略有不同。假设我们的控制器中有：

```
$scope.myArrayOfPrimitives = [ 11, 22 ];
$scope.myArrayOfObjects    = [{num: 101}, {num: 202}] 
```

在我们的 HTML 中：

```
<ul><li ng-repeat="num in myArrayOfPrimitives">
       <input ng-model="num">
    </li>
<ul>
<ul><li ng-repeat="obj in myArrayOfObjects">
       <input ng-model="obj.num">
    </li>
<ul> 
```

对于每个项目/迭代，ng-repeat 创建一个新范围，该范围在原型上继承自父范围，**但它还将项目的值分配给新子范围上的新属性**。（新属性的名称是循环变量的名称。）以下是 ng-repeat 的 Angular 源代码实际上是：

```
childScope = scope.$new();  // child scope prototypically inherits from parent scope
...
childScope[valueIdent] = value;  // creates a new childScope property 
```

如果 item 是基元（如在 myArrayOfPrimitives 中），则本质上将值的副本分配给新的子范围属性。更改子作用域属性的值（即，使用 ng-model，因此使用子作用域`num`）不会**更改**父作用域引用的数组。所以在上面的第一个 ng-repeat 中，每个子作用域都有一个`num`独立于 myArrayOfPrimitives 数组的属性：

![使用原语重复 ng-repeat](../Images/09094f2b7caaf09f037545a90f97f1d0.png)

这个 ng-repeat 不起作用（就像你想要/期望的那样）。键入文本框会更改灰色框中的值，这些值仅在子范围内可见。我们想要的是输入影响 myArrayOfPrimitives 数组，而不是子范围的原始属性。为此，我们需要将模型更改为对象数组。

因此，如果 item 是一个对象，则将对原始对象（而不是副本）的引用分配给新的子范围属性。更改子范围属性的值（即，使用 ng-model，因此`obj.num`）**确实会**更改父范围引用的对象。所以在上面的第二个 ng-repeat 中，我们有：

![ng-repeat 对象](../Images/0a0205de697e286b0eb4093cf65567dc.png)

（我将一条线涂成灰色，以便清楚它的去向。）

这按预期工作。在文本框中键入会更改灰色框中的值，这些值对子范围和父范围都可见。

另请参阅[ng-model、ng-repeat 和输入的难度](https://stackoverflow.com/questions/13714884/difficulty-with-ng-model-ng-repeat-and-inputs)和 [https://stackoverflow.com/a/13782671/215945](https://stackoverflow.com/a/13782671/215945)

### ng-控制器

使用 ng-controller 嵌套控制器会导致正常的原型继承，就像 ng-include 和 ng-switch 一样，因此适用相同的技术。但是，“两个控制器通过 $scope 继承共享信息被认为是一种不好的形式” ——http: [//onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/](http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/) 应该使用服务来共享数据而是控制器。

（如果您真的想通过控制器范围继承共享数据，则无需执行任何操作。子范围将可以访问所有父范围属性。另请参见[加载或导航时控制器加载顺序不同](https://stackoverflow.com/questions/13825419/controller-load-order-differs-when-loading-or-navigating/13843771#13843771)）

### 指令

1.  default ( `scope: false`) - 该指令不创建新范围，因此这里没有继承。这很容易，但也很危险，因为例如，指令可能认为它正在作用域上创建新属性，而实际上它正在破坏现有属性。对于编写旨在作为可重用组件的指令，这不是一个好的选择。
2.  `scope: true`- 该指令创建一个新的子范围，该子范围在原型上继承自父范围。如果多个指令（在同一个 DOM 元素上）请求一个新范围，则只会创建一个新的子范围。因为我们有“正常”的原型继承，这就像 ng-include 和 ng-switch，所以要小心 2-way 数据绑定到父作用域原语，以及子作用域隐藏/隐藏父作用域属性。
3.  `scope: { ... }`- 该指令创建一个新的隔离/隔离范围。它不是原型继承的。这通常是创建可重用组件时的最佳选择，因为该指令不会意外读取或修改父范围。但是，此类指令通常需要访问一些父范围属性。对象哈希用于在父作用域和隔离作用域之间建立双向绑定（使用'='）或单向绑定（使用'@'）。还有 '&' 绑定到父范围表达式。因此，这些都创建了从父范围派生的本地范围属性。请注意，属性用于帮助设置绑定——您不能只在对象哈希中引用父范围属性名称，您必须使用属性。例如，如果您想绑定到父属性，这将不起作用`parentProp`在孤立的范围内：`<div my-directive>`和`scope: { localProp: '@parentProp' }`。必须使用属性来指定指令要绑定到的每个父属性：`<div my-directive the-Parent-Prop=parentProp>`和`scope: { localProp: '@theParentProp' }`。
    隔离作用域的`__proto__`引用对象。隔离作用域的 $parent 引用父作用域，因此尽管它是隔离的并且没有从父作用域原型继承，但它仍然是子作用域。
    对于下面的图片，我们
    `<my-directive interpolated="{{parentProp1}}" twowayBinding="parentProp2">`还
    `scope: { interpolatedProp: '@interpolated', twowayBindingProp: '=twowayBinding' }`
    假设指令在其链接功能中执行此操作：`scope.someIsolateProp = "I'm isolated"`
    ![隔离范围](../Images/c1a683a8bd4a1a020247cd12d08e9e65.png)
    有关隔离范围的更多信息，请参见[http://onehungrymind.com/angularjs-sticky-notes-pt-2-isolated-scope/](http://onehungrymind.com/angularjs-sticky-notes-pt-2-isolated-scope/)
4.  `transclude: true`- 该指令创建了一个新的“transcluded”子范围，其原型继承自父范围。嵌入的和隔离的范围（如果有的话）是同级的——每个范围的 $parent 属性引用相同的父范围。当一个转入和隔离范围都存在时，隔离范围属性 $$nextSibling 将引用转入范围。我不知道嵌入范围的任何细微差别。
    对于下图，假设与上面添加的指令相同：`transclude: true`
    ![内含范围](../Images/8263b814abb109dd98850c48d37d2123.png)

这个[小提琴](http://jsfiddle.net/mrajcok/7g3QM/)有一个`showScope()`功能，可以用来检查一个孤立的和嵌入的范围。请参阅小提琴评论中的说明。

* * *

## 概括

范围有四种类型：

1.  正常的原型范围继承——ng-include、ng-switch、ng-controller、指令`scope: true`
2.  带有复制/分配的普通原型范围继承——ng-repeat。ng-repeat 的每次迭代都会创建一个新的子作用域，并且这个新的子作用域总是会获得一个新属性。
3.  隔离范围 - 带有`scope: {...}`. 这不是原型，但 '='、'@' 和 '&' 提供了一种通过属性访问父范围属性的机制。
4.  嵌入范围 - 带有`transclude: true`. 这也是普通的原型范围继承，但它也是任何隔离范围的兄弟。

对于所有范围（原型或非原型），Angular 总是通过属性 $parent 和 $$childHead 和 $$childTail 跟踪父子关系（即层次结构）。

图表是使用[github上的](https://github.com/mrajcok/angularjs-prototypal-inheritance-diagrams)[graphviz](/questions/tagged/graphviz "显示标记为“graphviz”的问题") "*.dot" 文件生成的。Tim Caswell 的“ [Learning JavaScript with Object Graphs](http://howtonode.org/object-graphs) ”是使用 GraphViz 绘制图表的灵感。

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2014-05-16T15:22:25.543

我绝不想与马克的答案竞争，而只是想强调一下最终让一切都成为[Javascript 继承及其原型链的](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain)新手。

**只有属性读取搜索原型链，而不是写入。**所以当你设置

```
myObject.prop = '123'; 
```

它不查找链，但是当你设置

```
myObject.myThing.prop = '123'; 
```

**在写入操作**中进行了一个微妙的读取，它试图在写入它的 prop 之前查找 myThing。所以这就是为什么从孩子写入 object.properties 会得到父母的对象。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-11-08T22:45:01.883

我想在@Scott Driscoll 答案中添加一个使用 javascript 进行原型继承的示例。我们将使用带有 Object.create() 的经典继承模式，它是 EcmaScript 5 规范的一部分。

首先我们创建“父”对象函数

```
function Parent(){

} 
```

然后将原型添加到“父”对象函数

```
 Parent.prototype = {
 primitive : 1,
 object : {
    one : 1
   }
} 
```

创建“子”对象函数

```
function Child(){

} 
```

分配子原型（使子原型继承父原型）

```
Child.prototype = Object.create(Parent.prototype); 
```

分配适当的“子”原型构造函数

```
Child.prototype.constructor = Child; 
```

将方法“changeProps”添加到子原型中，这将重写子对象中的“原始”属性值并更改子对象和父对象中的“object.one”值

```
Child.prototype.changeProps = function(){
    this.primitive = 2;
    this.object.one = 2;
}; 
```

启动 Parent (dad) 和 Child (son) 对象。

```
var dad = new Parent();
var son = new Child(); 
```

调用 Child（子）changeProps 方法

```
son.changeProps(); 
```

*检查结果。*

父原语属性没有改变

```
console.log(dad.primitive); /* 1 */ 
```

子原始属性已更改（重写）

```
console.log(son.primitive); /* 2 */ 
```

Parent 和 Child object.one 属性已更改

```
console.log(dad.object.one); /* 2 */
console.log(son.object.one); /* 2 */ 
```

这里的工作示例[http://jsbin.com/xexurukiso/1/edit/](http://jsbin.com/xexurukiso/1/edit/)

有关 Object.create 的更多信息在这里[https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/create](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/create)

# ssl - Glassfish SSL 错误 - SSL 连接错误

> ID：14049487
> 
> 赞同：3
> 
> 时间：2012-12-27T04:49:08.100
> 
> 标签：ssl, glassfish

我正在使用以下指南在 EC2 中托管的 glassfish 服务器上设置 SSL。我在浏览 8181 页面时不断收到 SSL 连接错误，并且服务器日志上没有任何警告或错误。

[http://aliok.wordpress.com/2011/06/04/using-your-ssl-certificate-on-glassfish-3/](http://aliok.wordpress.com/2011/06/04/using-your-ssl-certificate-on-glassfish-3/)

1.  keytool -keysize 2048 -genkey -alias yourdomain.com -keyalg RSA -dname "CN=www.yourdomain.com,O=Your Organization,L=Your City,S=Your State,C=Your Country Code like US, CH or TR" -keystore keystore.jks -keypass changeit -storepass changeit

2.  keytool -certreq -alias yourdomain.com -keystore keystore.jks -storepass changeit -keypass changeit -file server.csr

从 godaddy 下载 2 个证书文件。

1.  keytool -importkeystore -srckeystore ~/ssl-stuff/keystore.jks -destkeystore $GLASSFISHHOME/domains/yourdomain/config/keystore.jks

2.  cd $GLASSFISH_HOME/domains/yourdomain/config keytool -import -v -trustcacerts -alias root -file gd_bundle.crt -keystore keystore.jks -keypass changeit -storepass changeit

3.  keytool -import -v -trustcacerts -alias yourdomain.com -file yourdomain.com.crt -keystore keystore.jks -keypass changeit -storepass changeit

然后我将服务器配置 SSL 部分，证书昵称更改为 yourdomain.com

# wordpress - wordpress 发布链接错误

> ID：14049490
> 
> 赞同：0
> 
> 时间：2012-12-27T04:49:19.353
> 
> 标签：wordpress, wordpress-theming

我刚刚升级到 wordpress 3.5 版并使用宾馆主题。它曾经与 wp 以前的版本一起正常工作。但是，升级后。无论单击帖子链接，我都会收到此错误。

```
Fatal error: Call to a member function options() on a non-object in C:\xampp\htdocs\wordpress\wp-content\themes\guesthouse\ait-cache\_Nette.FileTemplate\_Templates.main-single-ait-room.php-16702044d886e338830f0567f9043065.php on line 74 
```

任何人都知道这有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:00:36.560

您是否将 GuestHouse 主题更新到最新版本？它可能与 WP3.5 存在兼容性问题

[http://themeforest.net/item/guesthouse-hotel-sport-center-2in1-premium-theme/1453399](http://themeforest.net/item/guesthouse-hotel-sport-center-2in1-premium-theme/1453399)

# php - 带有 jquery ajax 的自动完成输入框，但希望将对应的 id 存储在任何其他字段中

> ID：14049496
> 
> 赞同：0
> 
> 时间：2012-12-27T04:51:15.497
> 
> 标签：php, jquery, ajax, autocomplete

我有一个输入框（名称：state_name id：state_name），它使用 jquery 和 ajax 自动完成。我正在使用“bsn.AutoSuggest_2.1.3”jquery 插件。这是html。

```
<input type="text" name="state_name" id="state_name" />
<input type="text" name="s_n_state" id="s_n_state"  value="<?=$letter_1?>"/> 
```

这是jquery代码

```
<script type="text/javascript">
var options = {
        script:"includes/search_state.php?json=true&limit=6&",
        varname:"state_name",
        json:true,
        shownoresults:false,
        maxresults:6,
        callback: function (obj) { document.getElementById('s_n_state').value = obj.id; }
};
var as_json = new bsn.AutoSuggest('state_name', options);
</script> 
```

下面是 search_state.php 代码 -

```
<?
include_once 'connection.php';
header("Content-Type: application/json");
    $state_name = $_GET['state_name'];
        echo "{\"results\": [";
        $arr = array();
        $result = mysql_query("select * from states where state_name like '%$state_name%'") or die(mysql_error());
                while($row = mysql_fetch_array($result))
                {
            $arr[] = "{\"id\": \"".$row['state_id']."\", \"value\": \"".$row['state_name']."\"}";
                }
        echo implode(", ", $arr);
        echo "]}";
?> 
```

当我在浏览器的控制台中看到它时，我得到了来自 ajax 的响应，但它在网页中不可见，而且我想将 state_id 从响应存储到**s_n_state**输入框，以便我可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:56:04.167

我在自动完成方面遇到了类似的问题。我的解决方法是使用与其他值连接的分隔字符来存储 state_id。例如“key:value”。在服务器端，只需将其解析出来。据推测，您的键或值中没有其他分隔符。它不是最优雅的，但在我的大多数情况下都很好用。

# android - 行尾不正确：发现回车符 (\r) 没有对应的换行符 (\n)

> ID：14049508
> 
> 赞同：39
> 
> 时间：2012-12-27T04:55:04.647
> 
> 标签：android

我在我的 xml 文件中收到错误。“行尾不正确：发现回车符 (\r) 没有对应的换行符 (\n)。

```
<Button
     android:id="@+id/btn_login"
     android:layout_width="100dip"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignRight="@+id/et_un"
     android:layout_marginBottom="15dp"
     android:layout_marginRight="22dp"
     android:text="Login"
     android:textColor="#AA0000"
     android:textSize="10pt" /> 
```

如何解决它。谁能帮忙

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-27T04:57:54.707

在 Windows 上使用 Eclipse？

1.  打开布局文件
2.  Ctrl+Shift+F（MacOSX 中的 Command+Shift+F）
3.  保存布局文件并关闭它。
4.  删除`.out`构建器可能创建的所有文件。
5.  清洁项目。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-02-04T12:52:45.160

看起来很愚蠢，但它对我有用

1.  全选（`ctrl`+ `a`）
2.  切（`ctrl`+ `x`）
3.  再次粘贴 ( `ctrl`+ `v`)
4.  保存它（`ctrl`+ `s`）

它真的对我有用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-30T10:21:18.367

它比其他答案更容易：

**Ctrl + 1 -> 修复行**

;)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-27T04:58:12.543

昨天，我收到了同样的错误消息。

我的解决方法是简单地删除之后的每个换行符

```
/> 
```

所以，如果你有

```
<Button
    />

<Button
    /> 
```

把它改成

```
<Button
    />
<Button
    /> 
```

可能不是最好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-09T05:35:54.080

如果您在打开 android 活动文件时不时遇到这个烦人的错误，`xml`只需按下**`ctrl+shift+f`**以重新格式化您的文本，您就可以开始了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T04:26:59.873

为了在我的一个布局 XML 文件中解决此问题，我在 ADT 中执行了以下操作：

*   右键单击包资源管理器中的文件
*   选择打开方式 -> 文本编辑器

现在，有问题的行用一个大的红色 X 突出显示。

*   然后我删除了行尾（合并了两行），然后点击“return”将其重新添加。在某些情况下，我发现这不太有效，所以我复制了一条没有问题的类似行，并且将其粘贴到违规行的顶部（突出显示坏行，然后粘贴）。有时，真正的问题似乎在于它之前或之后的线路。

然后在保存后它会显示下一条坏线，所以泡沫-冲洗-重复直到全部完成。

*   完成后，使用右键单击，打开方式 -> Android 公共 XML 编辑器返回可视化设计视图。

（ADT v21.0.1，在 Mac OSX Lion 上）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-30T17:27:43.467

关闭 Eclipse 中的 xml 文件，在文本编辑器（记事本或记事本++等）中打开它，保存。在 eclipse 中重新打开 menu->Project->clean 项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-12T07:41:50.753

只需清理项目。在 Eclipse 中进入项目菜单：

```
Project-> Clean 
```

它将解决问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-07T07:30:14.473

剪切整个代码，保存 xml，再次将代码粘贴到文件中并保存。有时也能解决。虽然不是标准方式，但有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-03T05:23:25.643

清理项目项目 -> 清理

为我工作

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-24T11:59:37.103

首先刷新项目然后清理 (Ctrl+shift+F)。

这为我解决了这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-09-17T05:08:51.920

1.  打开布局文件
2.  如果任何布局被冻结，则冻结的布局删除 3.ctrl + A 4.ctrl + shift + f
3.  节省

它会起作用的

# ruby - 如何让红宝石兑现本地主机文件？

> ID：14049514
> 
> 赞同：1
> 
> 时间：2012-12-27T04:56:27.037
> 
> 标签：ruby, testing, rspec, hosts

我有一个 rspec 测试套件，用于测试我们的内部和面向公众的 API。通常我测试服务所要做的就是设置我的参数（例如测试url），然后测试从那里连接到所需的服务并做他们的事情。

我的问题是，如何让 ruby​​ 兑现我的主机文件条目？在这个特定的场景中，我试图访问我们的实时服务器，它们使用与我们的实时环境相同的 url，但显然位于完全不同的 IP 集群上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:37:52.620

除非您正在做一些非常低级的事情，否则 Ruby 不会*自行*执行 DNS 名称解析，它只会调用适当的 OS API。因此，您需要弄清楚如何配置您的操作系统以使用本地主机文件。

# jquery - 在其他浏览器中隐藏/显示作品；不是 IE

> ID：14049516
> 
> 赞同：0
> 
> 时间：2012-12-27T04:56:34.823
> 
> 标签：jquery, internet-explorer

（*原来真正的问题是我正在测试本地文件。这在 chrome 和 firefox 中运行良好，但在 IE 中运行良好。一旦我通过 IE 实际访问实时版本，它运行良好。感谢大家的帮助，并感谢 bipen向我展示切换和缓慢！*）

我看过一些关于这个主题的帖子，但还没有看到明确的解决方案。我刚开始使用 jquery/javascript 的东西，似乎无法弄清楚如何在 IE 中完成这项工作。我正在使用 IE9。这适用于 jsfiddle、firefox 和 chrome。如果有任何方法可以压缩此代码而不是使用隐藏/显示，我很想听听它们。谢谢。

以下是我在头部使用的脚本：

```
 $(document).ready(function() {
    $('#crossfitcontent').hide();
    $('.hidecrossfit').hide();
    $('.showcrossfit').click(function() {
        $('#crossfitcontent').show();
        $('.hidecrossfit').show();
        $('.showcrossfit').hide();
        return false;
        });
    });
   $('.hidecrossfit').click(function() {
       $('.showcrossfit').show();
       $('#crossfitcontent').hide();
       $('.hidecrossfit').hide();

    return false;
}); 
```

以下是html：

```
<div id="crossfit">
Crossfit 
<div class="toggleplus">
<div><a href="" class="showcrossfit" >Thing someone clicks to show div</a></div>
<div><a href="" class="hidecrossfit" >Thing someone clicks to hide div</a></div>
</div> 
<div id="crossfitcontent">  
<div>Stuff about crossfit</div>
</div>
</div> 
```

所有的 div 可能没有意义，但这是因为它适合更大的元素，并且其他元素也会被添加进去。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:34:00.107

您可以使用[jquery toggle()](http://api.jquery.com/toggle/) .. 来显示或隐藏 div... 而不是为每次点击创建函数...

```
$(document).ready(function() {
  $('#crossfitcontent').hide();
  $('.showcrossfit').click(function() {
      $('#crossfitcontent').toggle('slow');
      return false;
  });
}); 
```

这是jsfiddle ..你可以看看..

[http://jsfiddle.net/49VdM/](http://jsfiddle.net/49VdM/)

# ruby - 为什么这两个变量最终相等？

> ID：14049517
> 
> 赞同：0
> 
> 时间：2012-12-27T04:56:52.107
> 
> 标签：ruby

我正在尝试用单词和句子制作一个二维数组，然后制作另一个与之匹配但翻译成英文的二维数组。

这是我创建新课程时发生的课程模型的回调：

```
before_create do |lesson|
  require 'rmmseg'
  require "to_lang"
  require "bing_translator"

  lesson.parsed_content =[]
  lesson.html_content = []
  RMMSeg::Dictionary.load_dictionaries

  text = lesson.content
  text = text.gsub("。","^^.")
  text = text.gsub("？","~~?")
  text = text.gsub("！", "||!")

  text = text.split(/[.?!]/u) #convert to an array
  text.each do |s|
    s.gsub!("^^","。")
    s.gsub!("~~","？")
    s.gsub!("||","！")
  end

  text.each_with_index do |val, index|
    algor = RMMSeg::Algorithm.new(text[index])
    splittext = []
    loop do
      tok = algor.next_token
      break if tok.nil?
      tex = tok.text.force_encoding('UTF-8')
      splittext << tex
      text[index] = splittext
    end
  end

  lesson.parsed_content = text
  textarray = text
  translator = BingTranslator.new(BING_CLIENT_ID, BING_API_KEY)
  ToLang.start(GOOGLE_TRANSLATE_API)
  textarray.each_with_index do |sentence, si| #iterate array of sentence
    textarray[si] = []
    sentence.each_with_index do |word,wi| #iterate sentence's array of words
      entry = DictionaryEntry.find_by_simplified(word) #returns a DictionaryEntry object hash
      if entry == nil #for cases where there is no DictionaryEntry
        textarray[si] << word
      else
        textarray[si] << entry.definition
      end
    end
    lesson.html_content = textarray
  end
end 
```

为什么我的变量`lesson.parsed_content`和`lesson.html_content`最终彼此相等？

我期待`lesson.parsed_content`成为中国人和`lesson.html_content`英国人，但他们最终都是英国人。我可能太累了，但我不明白为什么`lesson.parsed_content`也会以英语结束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:14:46.387

您在它们中都引用了相同的数组：

```
lesson.parsed_content = text
textarray = text
# Various in-place modifications of textarray...
lesson.html_content = textarray 
```

只是做`lesson.parsed_content = text`不重复`text`，它只是复制引用，所以你最终会得到四个指向同一条数据的东西：

```
text ------------------=-+--+--+----> [ ... ]
lesson.parsed_content -=-/  |  |
lesson.html_content ---=----/  |
textarray -------------=-------/ 
```

每个赋值只是简单地将另一个指针添加到同一个底层数组。

你不能用一个简单的方法来解决这个问题，`lesson.parsed_content = text.dup`因为`dup`只做一个浅拷贝并且不会复制内部数组。由于您知道您有一个数组数组，因此您可以手动获取外部和内部数组以获得完整副本，或者您可以使用标准的深度复制方法之一，例如通过[Marshal](https://ruby-doc.org/core/Marshal.html)`dup`往返。或者完全跳过复制，迭代但修改一个单独的数组。`textarray`

# java - 带有eclipse的春季项目

> ID：14049522
> 
> 赞同：4
> 
> 时间：2012-12-27T04:57:46.687
> 
> 标签：java, eclipse, spring, hibernate, spring-tool-suite

我正在使用 Spring Tool Suite (STS) [Version: 3.1.0.RELEASE] 使用 Spring 3 + Hibernate 制作 Spring 项目。我想为此使用eclipse。

该怎么办？制作 Spring 项目应该在 eclipse 中安装什么 eclipse 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:11:02.933

通过 Eclipse 市场：

1.  打开 eclipse --> 帮助 --> Eclipse Marketplace
2.  按关键字“STS”搜索
3.  单击“Spring Tool Suite (STS) for Eclipse Indigo (3.7)”部分上的安装按钮
4.  按照日食指令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:25:51.107

如果您已经使用 STS，您可以轻松创建 Spring 项目 - 无需额外的插件。 *STS 是添加了 Spring 插件的 Eclipse - 不要浪费时间手动操作。*

1.  在主菜单中选择文件 > 新建 > 其他...
2.  在搜索栏中输入“弹簧”。
3.  选择“Spring 模板项目”，点击“下一步”
4.  打开“Persistence”节点并选择“Simple Spring Hibernate Utility Project”并按照向导进行操作。

向导完成后，您将在工作区中拥有简单的 Spring/Hibernate 项目。

**更新：**

Spring 项目是简单的 java 项目，只需使用 Maven 即可轻松创建。如果您还没有 m2e 插件，请添加它，并在您的 pom.xml 文件中添加所需的 spring jar 作为依赖项。

M2E 预装了 STS，但可以安装到任何 Eclipse 安装中。有关使用 m2e 的更多信息，[请访问 http://www.sonatype.org/m2eclipse](http://www.sonatype.org/m2eclipse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:29:24.237

以下是经典方式：

在 Eclipse IDE 中：单击“帮助”->“安装新软件...”。键入“http://springide.org/updatesite”以访问 Spring IDE 更新站点。

选择要安装的所有 Spring IDE 功能。并等待它需要 - 就是这样

# mysql - 左外连接无法正常工作

> ID：14049523
> 
> 赞同：-1
> 
> 时间：2012-12-27T04:57:47.523
> 
> 标签：mysql, select, left-join

我正在尝试返回上传次数最多的前三名用户。然后，我计算了 3 个顶级用户中每个用户的上传次数。现在它只返回一个用户并且计数计算所有上传，即使上传不属于该用户。

这是我的表设置：

上传：（id、userID、姓名、位置、类型）

用户：（id、fname、lname、用户名、头像、国家、密码）

```
SELECT u.id, u.userID, COUNT(us.id) as top_nums, us.username, us.avatar, us.country 
FROM upload u LEFT OUTER JOIN user us ON us.id=u.userID 
ORDER BY top_nums DESC LIMIT 3 
```

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:03:53.427

我认为此查询可以解决您的问题：

```
SELECT us.id, us.username, us.avatar, us.country, COUNT(u.id) top_nums 
FROM `user` us 
LEFT JOIN upload u ON us.id = u.userId 
GROUP BY u.userID 
ORDER BY top_nums DESC LIMIT 3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:03:24.477

您的查询中缺少`GROUP BY`子句，

```
SELECT  u.id, u.userID, COUNT(us.id) as top_nums, us.username, us.avatar, us.country 
FROM    upload u 
        LEFT OUTER JOIN  user us 
            ON us.id=u.userID 
GROUP BY u.id, u.userID, us.username, us.avatar, us.country 
ORDER BY top_nums DESC 
LIMIT 3 
```

但请记住，此查询不会处理关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:03:25.360

我想你想这样做：

```
select      u.id, u.fname, u.lname, count(*)
from        user u
left outer join upload up on u.id = up.userid
group by    u.id, u.fname, u.lname
order by    count(*) desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:05:32.430

```
select us.username, us.avatar, us.country ,
(select count(*) from upload u where u.id=us.id) as no_of_uploads 
from users us order by 4 desc limit 3; 
```

# javascript - Javascript - 如何从给定索引的数组中删除项目

> ID：14049526
> 
> 赞同：1
> 
> 时间：2012-12-27T04:57:51.523
> 
> 标签：javascript, splice

> **可能重复：**
> [在某些索引处删除/删除数组中的值](https://stackoverflow.com/questions/12311467/strip-remove-values-in-array-at-certain-indices)

如何使用 Javascript 从给定索引处的数组中删除一组元素。

假设我有一个索引数组：

`var indices = [0, 1, 3]`.

我想从另一个数组中删除这些给定的元素`indices`。另一个数组恰好是：

`var cars = ["Cow", "Dog", "Ferrari", "Monkey", "Ford"]`.

所以，删除后我想从`cars`数组中删除“Cow”、“Dog”、“Monkey”

我试过这样的`splice`方法：

```
for(var i = 0; i < indices.length; i++){
   cars.splice(indices[i], 1);
} 
```

但是这段代码碰巧`cars`每次拼接一个项目时都会改变数组的索引！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:28:41.220

尝试这个

```
var cars = ["Cow", "Dog", "Ferrari", "Monkey", "Ford"];
console.log(cars);

cars.each(function(val, index){
    // You can use jQuery inArray also.  
    //For Ex: if(jQuery.inArray(index, indices)){........}
    if(val=="Cow" || val=="Dog" || val=="Monkey" ){
        cars.splice(index, 1);
    }
});
console.log(cars); 
```

JAVASCRIPT：然后使用`.forEach`代替`.each`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:01:23.730

您可以从最后一个元素开始：

```
for(var i = indices.length-1; i >= 0; i--){
   cars.splice(indices[i], 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:31:10.787

您可以`delete`在不修改索引的情况下删除元素。

```
var a = [1, 2, 3, 4, 5];
delete a[2]; // deletes '3'
console.log(a); // prints [1, 2, undefined, 4, 5] 
```

您可以使用`splice()`删除元素并移动其余元素以填充已删除的索引

```
var b = [1, 2, 3, 4, 5];
b.splice(2, 1); // deletes '3' and shifts the rest to left
console.log(b); // prints [1, 2, 4, 5] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-27T05:06:30.870

Splice 方法完全删除项目，所以正如你所说“但是每次拼接项目时，这段代码都会改变汽车对象的索引！” 它将严格删除元素。如果要保持相同的数组索引，您可以使用命名约定 id 作为“已删除”或任何熟悉的命名 id 而不是删除（删除）元素

for(var i = 0; i < indices.length; i++){ car​​s[indices[i]] = "Deleted"; }

有了这个，您可以根据需要维护相同的数组索引。

请你解释为什么 -1 ？它不是应得的，或证明它是正当的。

# c# - Windows Phone 8 上的绑定列表

> ID：14049530
> 
> 赞同：1
> 
> 时间：2012-12-27T04:58:13.327
> 
> 标签：c#, .net, windows-phone-8, bindinglist

BindingList 是 Windows Phone 8 的 .NET 框架的一部分吗？我正在使用 Visual Studio 2012 Ultimate，但找不到该类。我正在使用`System.ComponentModel`它应该位于的命名空间，但 Visual Studio 给我错误提示“找不到类型或命名空间名称 'BindingList'（您是否缺少 using 指令或程序集引用？）”

我在互联网上进行了广泛搜索，但找不到任何其他类似问题的记录。

我想使用 BindingList 的原因是因为我有一个使用 List 作为其数据源的 ListBox，并且当从 ListBox 添加或删除对象时，屏幕上显示的列表不会自动更新。根据我对 Google 的研究，使用 BindingList 而不是 List 应该可以解决这个问题。

谢谢

# java - android中是否有任何用于ms office word(.doc/.docx)到(image/html/xml/pdf)转换的API

> ID：14049531
> 
> 赞同：1
> 
> 时间：2012-12-27T04:58:12.250
> 
> 标签：java, android, c++, c, java-native-interface

我正在尝试制作 android 应用程序，它应该将**ms word 文件**ie( `.doc/.docx`) 文件作为输入并将其转换为 pdf 作为最终输出。我在android中搜索了pdf转换，但我得到的输出不正确。我试过了`jWordConvert(Qoppa software library)`，它可以很好地将java中的word转换为pdf，但是如果我们在android中尝试它会出错，

`conversion to dalvik format failed with error 1`.

我也尝试过使用`apache poi`库，但如果我的 word 文件包含图像或表格，它再次没有显示正确的输出。如果我们尝试使用**apache tika**和 apache poi，同样的结果。

**Itext**也在那里，但它的主要用途是从图像/html 转换为 pdf，但输出再次与 outr 期望不同..

所以我的要求是，如果我的 word 文件包含 tyables、图像等，是否有任何 api 应该支持 android 应用程序以正确输出 word 到 html/pdf/image 转换。我也可以去 JNI，还有其他方法吗？它。

请回复。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:30:02.433

[这](https://play.google.com/store/apps/details?id=cz.awk.android.docconv&hl=en)是一个可以实现您想要实现的应用程序。

如果应用商店中已经有一个应用，对我来说很容易知道它的用途和使用方式......

我希望它对你有点帮助！

# c++ - 使用 OpenMP 将线程绑定到特定的 CPU 内核

> ID：14049532
> 
> 赞同：2
> 
> 时间：2012-12-27T04:58:18.507
> 
> 标签：c++, linux, parallel-processing, cpu, openmp

我知道**GOMP_CPU_AFFINITY**将线程绑定到特定内核。

但在他们在[这里](http://gcc.gnu.org/onlinedocs/libgomp/GOMP_005fCPU_005fAFFINITY.html)给出的例子中，它给出了：

**GOMP_CPU_AFFINITY="0 3 2 1"**

这里，

**thread0**连接到---> **cpu0**

**thread1**连接到---> **cpu3**

**thread2**连接到---> **cpu2**

**thread3**连接到---> **cpu1**

这很清楚。

**但是如何同时将 thread0 设置为 core0 和 core2 呢？它的环境变量“GOMP_CPU_AFFINITY”的值是多少？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T09:44:17.090

这份[GOMP 参考资料](http://gcc.gnu.org/onlinedocs/libgomp/GOMP_005fCPU_005fAFFINITY.html)可能会对您有所帮助。要回答您的具体问题 `GOMP_CPU_AFFINITY="0-2:2 ..." 会这样做 - 这意味着“在任何处理器 0-2 上运行，可被 2 整除（即 0 和 2）”。

至少如果您问如何让 thread0 在 core0 或 core2 中的任何一个上运行 - 您实际提出的问题的答案是“您不能”，因为线程只能在任何精确时刻在一个核心上运行，所以 Thread0 不能同时在两个核心上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:52:24.673

我猜 CPU 0 和 2 是同一个物理内核的超线程，以及 CPU 1 和 3。英特尔的 OpenMP 库允许将每个线程绑定到两个超线程，设置类似于：

```
KMP_AFFINITY="granularity=core,compact" 
```

不幸的是，GCC（通过`libgomp`）和 Sun/Solaris Studio 都不允许一对多或多对多线程到 cpu 的绑定样式。设置`GOMP_CPU_AFFINITY`(GCC) 或`SUNW_MP_PROCBIND`(Sun/Solaris Studio) 允许每个线程绑定到特定 CPU，但不能绑定到一组 CPU。

对于不支持类似于英特尔 OpenMP 支持的绑定样式的 OpenMP 运行时，可以改用操作系统调度程序调用来修改每个线程的关联掩码。这会创建不可移植的应用程序，但允许实现一对多的绑定样式。在 Linux 上，必要的调度程序调用是[sched_getaffinity(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_getaffinity.2.html)和[sched_setaffinity(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setaffinity.2.html)。

# jquery-ui - 当我使用 jQuery UI 1.9 选项卡时，选项卡可以引用其他上下文元素（面板）而不是选项卡的上下文

> ID：14049533
> 
> 赞同：0
> 
> 时间：2012-12-27T04:58:41.970
> 
> 标签：jquery-ui

我想像这样使用 jQuery UI 1.9 标签：

**HTML**：</p>

```
<!-- this is the tab's context -->
<div id="tabs">
    <ul id="tabs-ul">
        <li id="tabs-email"><a href="#Email" title="Email">Email</li>
        <li id="tabs-setting"><a href="#Settings" title="Settings">Setting</li>
    </ul>
</div>

<!-- this is the other context -->
<div id="Email">someting</div>
<div id="Settings">someting</div> 
```

**JS**：</p>

```
$("#tabs").tabs({}); 
```

当我喜欢打击并单击一个选项卡时，将会有：

```
Uncaught Error: jQuery UI Tabs: Mismatching fragment identifier. 
```

我想要的是选项卡（`"li#tabs-email"/"li#tabs-setting"`）可以自动引用其他 div 上下文的面板（`"div#Email"/"div#Settings"`）。但是我找不到更改面板上下文的方法。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:59:22.147

如果没有大量工作，我认为这是不可能的。主要是因为整个“globalPanels”的东西在语义上是错误的，这就是它被删除的原因。

它现在的工作方式意味着所有选项卡内容都与选项卡隐式相关。

# c++ - Unix C++ 启动子进程并监视其 stdio

> ID：14049544
> 
> 赞同：0
> 
> 时间：2012-12-27T05:00:25.337
> 
> 标签：c++, multithreading, unix, process, pthreads

在我的 C++ 程序中，我需要启动一个运行时间很长的新进程并监视它的 I/O。我无法修改相关程序的源代码。

我正在考虑创建一个新线程并在其中启动进程并将输出连续（将异步输出）发送到主线程。

我用于创建流程的代码目前如下所示：

```
std::string SysExec::exec(char* cmd) {
    FILE* pipe = popen(cmd, "r");
    if (!pipe)
        return "ERROR";
    char buffer[128];
    std::string result = "";
    while (!feof(pipe)) {
        if (fgets(buffer, 128, pipe) != NULL)
            result += buffer;
    }
    pclose(pipe);
    return result;
} 
```

但是，如果从主线程调用，它将使主程序停止（因为`while (!feof(pipe))`）。我应该如何修改这个？或者有没有更好的方法来做到这一点？

# ruby-on-rails - 子域路由似乎不起作用

> ID：14049547
> 
> 赞同：0
> 
> 时间：2012-12-27T05:00:43.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, subdomain

想知道为什么我的路线不适用于[rails guide](http://guides.rubyonrails.org/3_1_release_notes.html)中描述的内容。`http://admin.foo.dev:3000/`带我去`root_path`，而不是`admin::pages#home`。

第一种方法虽然有效。取自[Railscast](http://railscasts.com/episodes/123-subdomains-revised)。

```
# WORKS!

match '', to: 'pages#home', constraints: lambda { |r| r.subdomain.present? && r.subdomain != 'www' }

# does NOT work!

namespace :admin do
  constraints :subdomain => "admin" do
    root :to => 'pages#home'
  end
end 
```

我已经在`/etc/hosts`. 看起来像：

```
127.0.0.1 localhost
127.0.0.1 api.foo.dev admin.foo.dev foo.dev www.foo.dev 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:05:34.863

由于您的路线位于命名空间内，因此带您前往的正确页面`admin::pages#home`将是`http://admin.foo.dev:3000/admin/`. 删除命名空间以正确连接。

一般来说，如果您对正在生成哪些路线以及如何到达这些路线感到困惑，请使用`rake routes`. 有关命名空间路由的更多信息（以及在这种情况下您可能不想使用命名空间的原因），请查看[Rails 路由指南](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)。

# php - 将数组从控制器传递到 codeigniter 中的模型

> ID：14049554
> 
> 赞同：4
> 
> 时间：2012-12-27T05:01:09.213
> 
> 标签：php, arrays, codeigniter

我正在 Codeigniter 中做一个项目。在这里，我使用 imap 从我的 gmail id 获取最新的 10 封邮件。在这里，我想获取已获取邮件的 from 字段，并且我想检查已获取邮件的 from 字段是否在我的数据库`table('clients')`中。在这里，我将 10 from field of fetched mail 存储到数组并将其传递给模型，在那里进行检查并返回匹配的字段名称。但这对我不起作用。

我的控制器功能是：

```
if ($mbox = imap_open($authhost, $user, $pass)) {
                $emails = imap_search($mbox, 'ALL');
                $some = imap_search($mbox, 'SUBJECT "Suspicious sign in prevented"', SE_UID);
                $MC = imap_check($mbox);
                $inbox = $MC->Nmsgs;
                $inboxs = $inbox - 9;
                if ($emails) {
                    $data['overview'] = imap_fetch_overview($mbox, "$inboxs,$inboxs:$inbox", 0);
                    $i = 0;
                    foreach ($data['overview'] as $i => $val) {

                        $from[$i] = $val->from;
                        $i++;
                    }

                    $data['result'] = $this->crm_model->get_names($from);
                    foreach ($data['result'] as $row) {
                        echo $row->name;echo "<br/>";
                    }

                }
                imap_close($mbox);
            } 
```

我的模型函数是：

```
function get_names($from) {

    $this->db->select('name');
    $this->db->from('clients');
    $this->db->where_in('name', $from);
    $query = $this->db->get();
    return $query->result();
} 
```

但是当我使用上面的模型函数时，它会返回值

```
function get_names() {
                  $options = array(
                         '0' => 'Job Openings',
                         '1' => 'Offers',
                         '2' => 'Techgig',
                         '3' => 'Australia',
                        );

        $this->db->select('name');
        $this->db->from('clients');
        $this->db->where_in('name', $options);
        $query = $this->db->get();
        return $query->result();
    } 
```

我认为问题在于将值从控制器传递到模型。谁能帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:33:20.570

使用 where_in（逗号分隔值列表）在数据库中执行任何查询时，值列表应类似于以下数组：

```
$options = array('Hello', 'World!', 'Beautiful', 'Day!'); 
```

不像这样：

```
 $options = array('0' => 'Job Openings','1' => 'Offers','2' => 'Techgig','3' =>'Australia',); 
```

要做到这一点，你应该内爆这个数组！

```
$opt=implode(",",$options); 
```

并将这个 $opt 数组传递给 WHERE_IN()

希望这能解决您的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:31:37.820

你不必使用`$i`..

```
if ($emails) {
                $data['overview'] = imap_fetch_overview($mbox, "$inboxs,$inboxs:$inbox", 0);
               // $i = 0;
                foreach ($data['overview'] as $val) {

                    $from[] = $val->from;
                    //$i++;
                }

                $data['result'] = $this->crm_model->get_names($from);
                foreach ($data['result'] as $row) {
                    echo $row->name;echo "<br/>";
                }

            } 
```

做这些改变并检查

# wordpress - 更改 Wordpress 标签页的标题

> ID：14049555
> 
> 赞同：1
> 
> 时间：2012-12-27T05:01:15.563
> 
> 标签：wordpress, tags, title

我想更改我的 wordpress 博客标签页的标题。我想要做的是将标签名称保留为标题。

例如：如果标签名称是“ *Wordpress Tag Pages Tutorial* ”，那么该标签应该具有相同的标题“Wordpress Tag Pages Tutorial”而不是“ *Blog Name - Wordpress Tag Pages Tutorial* ”那么在此代码中要更改什么？我已经尝试过，但在 wordpress 标题中只显示了变量名称等错误。

```
<title>
<?php if (is_home () ) { bloginfo('name'); }elseif ( is_category() ) {
single_cat_title(); echo ' - ' ; bloginfo('name'); }
elseif (is_single() ) { single_post_title();}
elseif (is_page() ) { bloginfo('name'); echo ': '; single_post_title();}
else { wp_title('',true); } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:53:06.693

你不见了`is_tag()`。

例子：

```
if ( is_tag() ) {
    $tag = single_tag_title("", false);
    echo $tag;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T12:23:27.140

如果站点中安装了任何 SEO 插件，它将覆盖“wp_title”功能。因此，您可以在该插件设置中管理标题字符串。

如果没有这样的插件，您可以使用以下代码：

```
 add_filter('wp_title', 'hs_tag_titles',10);

function hs_tag_titles($orig_title) {

    global $post;
    $tag_title = 'Test Title';
    if ( is_tag() ) {
        return $tag_title;
    } else {
        return $orig_title;
    }
} 
```

# javascript - 如何从本机代码调用 JavaScript

> ID：14049558
> 
> 赞同：0
> 
> 时间：2012-12-27T05:01:26.453
> 
> 标签：javascript, ios, uiwebview

> **可能重复：**
> [iOS JavaScript 桥](https://stackoverflow.com/questions/9473582/ios-javascript-bridge)

我有一个 webview 和一个 UIButton 。我想从本机代码进行 javascript 调用。我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:05:17.203

按照这些链接。 [使用 html 按钮调用 javascript 函数](https://stackoverflow.com/questions/1947263/using-an-html-button-to-call-a-javascript-function)

[http://devlicio.us/blogs/sergio_pereira/archive/2009/02/09/javascript-5-ways-to-call-a-function.aspx](http://devlicio.us/blogs/sergio_pereira/archive/2009/02/09/javascript-5-ways-to-call-a-function.aspx)

[http://www.webmasterworld.com/javascript/3749371.htm?highlight=msg3753441](http://www.webmasterworld.com/javascript/3749371.htm?highlight=msg3753441)

这些可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:27:19.340

```
NSString *param =@"Mango";       
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"JSMethod('%@')", param]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:05:25.833

这可能会帮助您解决您的查询：

```
[webView stringByEvaluatingJavaScriptFromString:@"myJSFunction()"]; 
```

# .htaccess - Url mod_rewrite remove consequtive trailing slashes on clean urls

> ID：14049560
> 
> 赞同：0
> 
> 时间：2012-12-27T05:01:40.767
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

Hello I would like to remove any trailing slashes from my clean urls so far my htaccess has the following code:

```
#php_flag display_startup_errors on
#php_flag display_errors on
#php_flag html_errors on

RewriteEngine on

<IfModule mod_gzip.c>
    mod_gzip_on       Yes
    mod_gzip_dechunk  Yes
    mod_gzip_item_include file      \.(html?|txt|css|js|php|pl|jpg|png|gif)$
    mod_gzip_item_include handler   ^cgi-script$
    mod_gzip_item_include mime      ^text/.*
    mod_gzip_item_include mime      ^application/x-javascript.*
    mod_gzip_item_exclude mime      ^image/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule>

Options -Indexes

RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)(.*)$ /index.php?page=$1&request=$2

#GAMW TON OHANAH
RedirectMatch 301 ^/component/(.*)$ http://www . evented . gr

ErrorDocument 404 /error.php?e=404
ErrorDocument 400 /error.php?e=400
ErrorDocument 401 /error.php?e=401
ErrorDocument 403 /error.php?e=403
ErrorDocument 405 /error.php?e=405
ErrorDocument 408 /error.php?e=408
ErrorDocument 410 /error.php?e=410
ErrorDocument 411 /error.php?e=411
ErrorDocument 412 /error.php?e=412
ErrorDocument 413 /error.php?e=413
ErrorDocument 414 /error.php?e=414
ErrorDocument 415 /error.php?e=415
ErrorDocument 500 /error.php?e=500
ErrorDocument 501 /error.php?e=501
ErrorDocument 502 /error.php?e=502
ErrorDocument 503 /error.php?e=503
ErrorDocument 506 /error.php?e=506 
```

You may observe the strange behaviour if you like by visiting www . evented . gr

PS. I want consequtive slashes that have nothing in between to be replaced with 0 slash for example www.domain.com////// to www.domain.com or www.domain.com/events////// to www.domain.com/events

I have tryed the following but with no luck

```
RewriteCond %{REQUEST_URI} ^(.*?)(?:/){2,}$
RewriteRule . $1/ [R=301,L] 
```

and

```
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:08:16.377

You can't do this with mod_rewrite. By the time your rules get applied, apache has already normalized the URI, all duplicate slashes are removed. If you make a request for:

```
http://www.evented.gr//////a////////b/////c/////d/////// 
```

The URI that mod_rewrite sees is this:

```
/a/b/c/d/ 
```

You'll have to come up with a different solution. The best thing to do is to fix this at the source, don't deploy with URLs that have duplicate slashes in the first place.

# junit4 - junit 检查方法返回列表

> ID：14049561
> 
> 赞同：1
> 
> 时间：2012-12-27T05:01:45.577
> 
> 标签：junit4, easymock

需要编写 junit 来检查以下返回文件列表的方法。

```
 public List<pdffiles> noticesPerform (Account account, fromDate, ToDate)
       {
         List<pdffiles> notices = new Arraylist();
            ............
            ..
         return notices;
       } 
```

如何在junit签入

1.  如何检查返回列表不为空？是否需要使用asserThat之类的？有没有最好的方法呢？

2.  如何通过测试对象account,fromDate,Todate来测试方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:07:08.270

使用 AssertNull() 方法检查空值。创建对象，或模拟它们（如果您决定采用模拟方法，您可以创建初始化这些参数对象的方法，然后您可以通过为它们的创建提供替代方法来模拟这些对象。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:14:07.783

使用[fest assert 2.0](https://github.com/alexruiz/fest-assert-2.x/wiki/Using-fest-assertions) 然后你可以这样做：

```
XXX returnedList = noticesPerform (...)
assertThat(returnedList).containsOnly(A, B, C); 
```

# javascript - 如何在 ipad 文本框中只输入数值？

> ID：14049565
> 
> 赞同：-3
> 
> 时间：2012-12-27T05:02:16.413
> 
> 标签：javascript, jquery, html, ios

我在将文本框限制为仅数值时遇到问题。我使用了普通方法，但它只适用于 Windows，不适用于 ipod，它允许用户输入字符串和特殊字符。，如果您知道如何在 iOS 上限制这一点，请帮助，

核实....

```
if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || event.keyCode == 116 ||
            (event.keyCode == 65 && event.ctrlKey === true) ||
            ((event.keyCode >= 35 && event.keyCode <= 45) || event.keyCode == 190 || event.keyCode == 100 || event.keyCode == 110)) {
                if ((event.keyCode == 190 || event.keyCode == 100 || event.keyCode == 110) && $(this).val().indexOf('.') != -1) {
                    event.preventDefault();
                }
                else {return;}
        }
        else {
            // Ensure that it is a number and stop the keypress
            if ((event.keyCode >= 219 && event.keyCode <= 222) || (event.keyCode >= 106 && event.keyCode <= 109) || event.keyCode == 111
             || event.keyCode == 32 || event.keyCode == 59 || (event.keyCode >= 186 && event.keyCode <= 189) || event.keyCode == 191 || event.keyCode == 192 ||
        event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || (event.keyCode > 105 && event.keycode < 190 )) ){
            /*
             if (checker.apple) {
                // alert('Hh');
                 alert(event.keyCode);
        //$.browser.apple=true;
        event.shiftKey || (event.keyCode <= 48 || event.keyCode >= 57) && (event.keyCode < 96 || (event.keyCode > 105 && event.keycode < 190 ))
        event.preventDefault();
    }*/
                //alert(event.keyCode);
                /*event.preventDefault();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:27:59.280

您可以`onkeypress()`在用户按下任何按钮并触发 checkAlpha() 函数时使用。

并使用以下代码来检测它是数字还是字母

```
function checkAlpha() {
x = event.charCode;
if (( x >= 65  && x <=90) || (x >= 97 && x <=122))
{
alert("Yes, it is alphabet");
}
else
{
alert("Sorry, only alphabet allowed");
event.preventDefault();
}
} 
```

工作正常最新的 android 和桌面请在苹果设备上确认并让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:32:00.193

请按照此代码在文本框中仅输入数值。确保这些`DELEGATE`方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
char *x = (char*)[string UTF8String];
//if(DEBUG_MODE) NSLog(@"char index is %i",x[0]);
if([string isEqualToString:@"0"] || [string isEqualToString:@"1"] ||  [string isEqualToString:@"2"] ||  [string isEqualToString:@"3"] ||  [string isEqualToString:@"4"] ||  [string isEqualToString:@"5"] ||  [string isEqualToString:@"6"] ||  [string isEqualToString:@"7"] ||  [string isEqualToString:@"8"] ||  [string isEqualToString:@"9"] || x[0]==0 ) {

    NSUInteger newLength = [textField.text length] + [string length] - range.length;
    return (newLength > 6) ? NO : YES;
} else {
    return NO;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:35:54.483

限制用户只输入数字：

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
        if ([string length] == 0 && range.length > 0)
        {
            textField.text = [textField.text stringByReplacingCharactersInRange:range withString:string];
            return NO;
        }

        NSCharacterSet *nonNumberSet = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet];
        if ([string stringByTrimmingCharactersInSet:nonNumberSet].length > 0)return YES;

        return NO;
    } 
```

# .htaccess - Codeigniter 中的 .htaccess 错误

> ID：14049567
> 
> 赞同：2
> 
> 时间：2012-12-27T05:02:38.987
> 
> 标签：.htaccess, codeigniter

我是 Codeigniter 的新手，我在 codeigniter 2.1.3 的根文件夹中放了一个 .htaccess。我已经在 xampp 和 wamp 服务器上尝试了我的 .htaccess 文件，但这并没有删除我的 index.php。我也设置了

```
 $config['index_page'] = 'index.php'; 
```

到

```
 $config['index_page'] = ''; 
```

这是我的 .htaccess 代码

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond $1 !^(index\.php|js|images|system\/plugins|robots\.txt|css\/)
  RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我不知道为什么这不会从 url 中删除我的 index.php 页面。帮我！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:33:10.940

打开 config.php 确保更改 $config['uri_protocol']= 'REQUEST_URI';

并将此代码放在 .htaccess 文件中

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond $1 !^(index\.php|indexcp\.php?|resources|robots\.txt)
RewriteRule ^([A-Za-z0-9_/.-]+)$ index.php?/welcome/$1 
```

这就是它对我有用的全部。如果您仍然面临任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:22:57.107

检查**rewrite_module**是否配置为**on**

并尝试从您的代码中删除条件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|js|images|system\/plugins|robots\.txt|css\/)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:14:49.540

我在我的项目中使用了这段代码，它对我有用，

.htaccess :-

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

config.php :-

```
$config['index_page'] = '';

$config['base_url'] = 'http://www.example.com/'; 
```

我希望这能帮到您

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-16T12:23:00.897

另一个可以解决的愚蠢问题是包含应用程序的文件夹不是 755。

为了更确定问题是什么，请查看 linux /var/log/apache/error.log 中的 apache 日志文件

# javascript - 用于在滚动时加载数据（来自数据库）的 JQuery 插件

> ID：14049568
> 
> 赞同：0
> 
> 时间：2012-12-27T05:02:41.533
> 
> 标签：javascript, jquery, ajax, infinite-scroll

我想知道是否有任何 JQuery 插件可以在滚动到网页底部时加载数据（来自数据库），就像 Facebook 和 Twitter 的工作方式一样。我尝试在整个 Google 中查找，但没有发现任何有用的信息。任何链接或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:25:42.020

我认为您正在寻找无限滚动。这里有一些 Jquery 插件可能会对您有所帮助。

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

[https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

希望这是你正在寻找的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:14:23.203

```
$(window).scroll(function(){
if ($(window).scrollTop() == $(document).height() - $(window).height()){
// do something
}
}); 
```

# c++ - 确定时间复杂度

> ID：14049579
> 
> 赞同：0
> 
> 时间：2012-12-27T05:04:02.013
> 
> 标签：c++, big-o

我正在读一本书，它告诉外循环时间复杂度是 O(nm) 而对于内循环，这些书给出了解释

> " 内部 while 循环最多运行 m 次，并且在模式匹配失败时可能要少得多。这加上另外两个语句位于外部 for 循环中。外部循环最多运行 n-m 次，因为没有一旦我们离文本的右边太远，完全对齐是可能的。嵌套循环的时间复杂度成倍增加，所以这给出了 O((n - m)(m + 2)) 的最坏情况运行时间。

我不明白为什么内循环的时间复杂度是 O(m+2) 而不是 O(m)？请帮忙。

```
int findmatch(char *p, char *t)
{
    int i,j; /* counters */
    int m, n; /* string lengths */
    m = strlen(p);
    n = strlen(t);

    for (i=0; i<=(n-m); i=i+1) {
        j=0;
        while ((j<m) && (t[i+j]==p[j]))
            j = j+1;
        if (j == m) return(i);
    }

    return(-1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:18:30.783

while 循环：

```
 while ((j<m) && (t[i+j]==p[j]))
        j = j+1; 
```

是 O(m)，那么你从 ( `other statements`) 得到 +2：

```
 j=0;                     // + 1
    // loop
    if (j == m) return(i);   // + 1 
```

# backbone.js - this.保存在主干

> ID：14049580
> 
> 赞同：0
> 
> 时间：2012-12-27T05:04:09.937
> 
> 标签：backbone.js, backbone-model

我正在学习backbonejs。我正在使用流行的待办事项列表教程。

我有一些我有点困惑的问题：

1.  在一个模型中，我发现了这个功能：

    ```
    toggle: function() {  this.save({completed: !this.get(’completed’)});} 
    ```

    我不明白的是 this.save 函数。它是如何工作的？它实际上保存了什么以及保存在哪里。而这个函数里面的代码是什么意思：`completed: !this.get`等等。

2.  在其中一个视图中，我发现了这行代码：

    ```
    this.input = this.$(’#new-todo’); 
    ```

    现在是什么`this.input`意思？而且我也不明白语法`this.$('#new-todo');`

让我知道是否需要更多代码来理解。此外，如果有人能向我指出伟大的骨干学习资源，那将是非常棒的。目前我正在学习 addyosmani 的“Backbone Fundamentals”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:44:10.263

Backbone Model 和 Collection 都有 url 属性。

正确设置时，第一次保存时，主干将使用模型作为有效负载向 url 发出 HTTP POST 请求（id 属性尚未设置）。我你调用 save 并且模型 id 已经设置，主干默认情况下会向 url 发出 PUT 请求。模型 fetch 函数生成一个 GET 请求并删除一个 DELETE 请求。

这就是如何使主干与 RESTfull JSON 接口一起工作。

保存模型时，您可以定义要保存的实际模型，就像在示例中所做的那样。

阅读 Backbone.js 文档。没关系！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:21:54.740

[http://backbonejs.org/#View-dollar](http://backbonejs.org/#View-dollar)

```
this.$('#new-todo') // this.$el.find('#new-todo') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T07:21:47.827

:)

我也是一个骨干新手，我一直在寻找很好的教程，这些教程可以很好地了解基础知识，经过大约 3-4 天的搜索后我找到了。浏览backbonetutorials.com，有一个编译的视频准确地给出了我们需要了解的关于路由器、集合、视图和模型的知识。

可以在以下位置找到示例工作： http: [//backbonetutorials.com/videos/beginner/](http://backbonetutorials.com/videos/beginner/)

虽然本教程是一个非常基础的教程，但你需要具备基本的 jquery、javascript 知识。浏览示例代码时，也要在另一个选项卡中打开http://www.jquery.com [。](http://www.jquery.com)文档非常有用。

一旦你对 jquery 有了很好的了解，那么如果你阅读这些教程，你就会更好地理解和掌握它。一旦你掌握了主干的 MV* 模式，你就会爱上它。

ps : 需要学习的不要复制粘贴代码或函数，直接输入吧！！！

干杯

罗伊

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:36:29.230

切换：函数（）{ this.save（{完成：！this.get（'完成'）}）；}

它基本上将反值保存到模型的“已完成”属性。所以如果模型的当前属性为真，它会将其保存为假！

关于 this.input = this.$('#new-todo');

它基本上从当前 VIEW 的“el”中保存/缓存 id 为“new-todo”的 DOM，以查看实例的“输入”属性。这样我们将来需要时就不必调用 jQuery 方法来获取相同的元素。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T14:53:13.580

切换：函数（）{ this.save（{完成：！this.get（'完成'）}）；}

Backbone 模型有一个 url 属性，当您设置属性时，主干向该 url 发出 HTTP 请求以将该值保存到数据源。这里是设置“完成”属性的值与之前的“完成”值相反，它将被保存到数据源

# sql-server - 大于多列

> ID：14049585
> 
> 赞同：0
> 
> 时间：2012-12-27T05:04:49.750
> 
> 标签：sql-server, sql-server-2012

这适用于 SQL Server 2012。我有一个要求，我需要为 a 赋值，`composite primary key`并且我需要返回所有`greater than`比给定值集的记录。

例如，如果我的键列是`K1, K2 and K3`，并且给定了 values `A, B, C`，我需要返回这样的行`(K1 = A and K2 = B and K3 > C) OR (K1 = A and K2 > B) OR K1 > A`。

是否有更简单的方法将大于应用于多个列？如果可能的话，出于性能原因，我想避免连接字符串。该解决方案需要相当通用，因为我需要将其应用于大量表。

谢谢你的帮助。

# java - 将值传递给 Channel System.in

> ID：14049586
> 
> 赞同：3
> 
> 时间：2012-12-26T20:45:36.430
> 
> 标签：java, shell, ssh, jsch

我的目标是通过ssh shell执行远程命令。所以我曾经`jsch`建立连接并尝试过

```
Channel channel=session.openChannel("exec"); 
```

但它没有执行一些命令，例如`dir`.

所以我尝试使用 shell 但无法将值传递给`System.in`，因为我只需要通过 GUI 发出命令

```
Channel channel=session.openChannel("shell");
channel.setInputStream(System.in);
channel.setOutputStream(System.out); 
```

在上面的代码中，我需要通过 GUI 中的字符串而不是 System.in 传递值。

所以我尝试了类似的东西

```
String cmd="help";
InputStream is = new ByteArrayInputStream(cmd.getBytes());
System.setIn(is);
channel.setInputStream(System.in); 
```

但即使那样我也无法获得输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-02T17:12:35.177

原始海报提供了这个答案：

> 我做了一些工作并找到了答案。我会在这里分享。
> 
> 要在 ssh shell 中以字符串形式提供输入，您可以使用以下代码。

```
Channel channel=session.openChannel("shell");

OutputStream ops = channel.getOutputStream();
PrintStream ps = new PrintStream(ops, true);

channel.connect();
ps.println("ping localhost"); 
ps.close();

InputStream in=channel.getInputStream();
byte[] bt = new byte[1024];

while(true) {
    while(in.available() > 0) {
        int i=in.read(bt, 0, 1024);
        if(i < 0) {
            break;
        }
        String str=new String(bt, 0, i);
        System.out.print(str); //displays the output of the command executed.
    }
    if(channel.isClosed()) {
        break;
    }
    Thread.sleep(1000);
    channel.disconnect();
    session.disconnect();    
} 
```

# ruby-on-rails - Rails：将 Time.now 改成别名 Time.current

> ID：14049587
> 
> 赞同：1
> 
> 时间：2012-12-27T05:04:54.147
> 
> 标签：ruby-on-rails, ruby, activerecord, timezone

我刚刚更改了我的应用程序以使用 PST 时区。但是，我的很多应用程序都使用`Time.now`了仍然停留在 UTC 中的代码：

```
irb(main):012:0> Time.now
=> 2012-12-27 05:03:16 +0000 
```

`Time.current`另一方面，似乎有正确的时区用法：

```
irb(main):013:0> Time.current
=> Wed, 26 Dec 2012 21:03:42 PST -08:00 
```

与其遍历我的整个应用程序并更改 Time.now 的每个实例，不如以某种方式将 Time.now 别名为使用 Time.current 是否有意义？有没有更好的方法在我的应用程序中处理这个问题，所以我不必修改我使用的任何地方，`Time.now`因为它没有使用我的应用程序配置的时区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:22:17.847

从我的角度来看，应该避免这种猴子修补：使用“替换路径中的所有内容” Time.now => Time.current 在几乎任何编辑器中都不难做到，但是您可以在以后的搜索中节省调试时间第 3 方或与您在同一个项目上工作的人中的一些奇怪的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:50:57.120

如果您使用的是 ubuntu，请尝试使用 perl 查找/替换

```
perl -pi -e 's/Time\.now/Time\.current/' * 
```

# java - 我放置在 div 标签内的任何内容都不会被打印出来

> ID：14049588
> 
> 赞同：-2
> 
> 时间：2012-12-27T05:04:55.207
> 
> 标签：java, jquery, ajax, jsp, google-api

我遇到了一个代码，据说它只更新放置在标签内的那段`div`代码。我需要打印剩下的秒数`1-1-2013`。但我什么也看不见。放置在`div`标签内的任何东西都是不可见的。由于我无法使用`JQuery`and `Ajax`，因此我无法发现我的错误。

```
<body bgcolor="#73AF59">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js">

    </script>

    <audio  preload="auto" src="tones/Time-In-A-Bottle.mp3" loop autoplay> 

    </audio>

    <%! 
      GregorianCalendar newYear =  new GregorianCalendar(2013, 0, 1);  
      /*
       * 0 : January
       * 1 : 1st January
       * 2013 : year
       */           
    %>

<table width="100%">
<tr> 
  <td width="40%"> </td>
  <td> <img src="images/animations/pyear.gif" /> </td>
</tr>

<tr>
  <td width="40%"> <center> <font face="Chiller" size="+6"> <br /> Countdown </font> </center> </td>
  <td>  <center> <font face="Chiller" size="+6"> <br /> 
      <script type="text/javascript">
        var auto_refresh = setInterval(
        function ()
        {
            $('#load_tweets').load('record_count.php').fadeIn("slow");
        }, 1000); // refresh every 10000 milliseconds
        <div id="load_tweets">

         <%= ( newYear.getTimeInMillis() - new GregorianCalendar().getTimeInMillis() ) / 1000 %>

        </div>
      </script>
      </font> </center>
</td>
</tr>

<tr>
  <td colspan="2" style="height:400px"  valign="bottom"> <img src="images/animations/3D_balloons.gif" /> 
        <em>This poor design and animations compiled by Suhail Gupta.</em>
            <audio style="visibility: hidden" > </audio>
  </td>
</tr>
<!-- !--> 
```

声明`<%= ( newYear.getTimeInMillis() - new GregorianCalendar().getTimeInMillis() ) / 1000 %>`，应该打印 2013 年到来所剩的秒数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:29:17.080

有几件事要考虑：

1.  您缺少`doc ready`jQuery 的处理程序
2.  您已将 div 放在`<script/>`标签内
3.  尝试删除`fadeIn`

所以你的代码必须是这样的：

```
<body bgcolor="#73AF59">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>

    <audio  preload="auto" src="tones/Time-In-A-Bottle.mp3" loop autoplay></audio>

    <%! 
      GregorianCalendar newYear =  new GregorianCalendar(2013, 0, 1);  
      /*
       * 0 : January
       * 1 : 1st January
       * 2013 : year
       */           
    %>

<table width="100%">
<tr> 
  <td width="40%"> </td>
  <td> <img src="images/animations/pyear.gif" /> </td>
</tr>

<tr>
  <td width="40%"> <center> <font face="Chiller" size="+6"> <br /> Countdown </font> </center> </td>
  <td>   
      <script type="text/javascript">
      $(document).ready(function(){ // try to put in doc ready handler
        var auto_refresh = setInterval(function (){
            $('#load_tweets').load('record_count.php');
        }, 1000); // refresh every 10000 milliseconds
      });
      </script>
      <center> 
      <font face="Chiller" size="+6"> <br />
        <div id="load_tweets">
         <%= ( newYear.getTimeInMillis() - new GregorianCalendar().getTimeInMillis() ) / 1000 %>
        </div> 
         </font> 
      </center>
</td>
</tr>

<tr>
  <td colspan="2" style="height:400px"  valign="bottom"> <img src="images/animations/3D_balloons.gif" /> 
        <em>This poor design and animations compiled by Suhail Gupta.</em>
            <audio style="visibility: hidden" > </audio>
  </td>
</tr>
<!-- !--> 
```

或者你可以把它移到jQuery下面：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){ // try to put in doc ready handler
        var auto_refresh = setInterval(function (){
            $('#load_tweets').load('record_count.php');
        }, 1000); // refresh every 10000 milliseconds
      });
     </script> 
```

试试这个，看看这是否对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:04:52.890

要以给定的时间间隔在网页上打印结果（减去两个日期的 Mills），您需要创建一个`servlet`产生 Mills 的减法并在 JSP 中编写 Ajax 例程来请求它`servlet`。

**小服务程序**

* * *

```
@WebServlet(name = "TestServlet", urlPatterns = {"/test"})
public class TestServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
       double value=((double)(new GregorianCalendar(2013, 0, 1).getTimeInMillis() - new GregorianCalendar().getTimeInMillis()))/1000;
       PrintWriter pw=response.getWriter();
       response.setContentType("text/plain");
       pw.print(value);
       pw.flush();
    }
} 
```

和使用`$.ajax`方法请求 servlet 的页面：

**测试页面.jsp**

* * *

```
 <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $(function(){
            setInterval(function(){  
                $.ajax({
                    url: 'test',
                    type: 'get',
                    dataType: 'text',
                    success: function(data){
                        $("#result").html(data);
                    }
                });
            },1000);
        });
    </script>
</head>
<body>
    <div id="result"></div>
</body> 
```

# objective-c - NSStringFromClass([MyEntityClass class]) 是否生成安全的核心数据实体名称？

> ID：14049592
> 
> 赞同：10
> 
> 时间：2012-12-27T05:05:23.477
> 
> 标签：objective-c, core-data, nsstring

大多数（我所见过的）Core Data 教程都使用以下`@"MyEntityClass"`硬编码的代码片段：

```
NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"MyEntityClass"]; 
```

**`NSStringFromClass()`用作实体名称是否安全？**

```
NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:NSStringFromClass([MyEntityClass class])]; 
```

在重构等方面，这似乎更容易处理。特别是因为我让 Xcode 创建我的`NSManagedObject`子类。我问是因为我以前从未见过这个，所以也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T05:13:24.767

是的，*如果*您的实体的类`MyEntityClass`在您的模型中设置为，那么该代码很好。

我更喜欢给实体类一个返回实体名称的类方法：

```
+ (NSString *)entityName {
    return NSStringFromClass(self);
} 
```

并这样称呼它：

```
NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:[MyEntityClass entityName]]; 
```

这样，如果我想更改类名而不更改模型中的实体名称，我可以在类方法中进行更改：

```
+ (NSString *)entityName {
    return @"NewEntityName";
} 
```

我为什么要这么做？好吧，我可能会为该实体决定一个更好的名称。更改类名不会破坏与现有 Core Data 持久存储的兼容性，但更改模型文件中的实体名称会。我可以更改类名和`entityName`方法，但在模型中保持实体名称不变，然后我不必担心迁移。（轻量级迁移支持重命名的实体，因此无论哪种方式都没什么大不了的。）

您可以更进一步，实际上让该`entityName`方法在运行时从托管对象模型中查找实体名称。假设您的应用程序委托有一条返回托管对象模型的消息：

```
+ (NSString *)entityName {
    static NSString *name;
    static dispatch_once_t once;
    dispatch_once(&once, ^{
        NSString *myName = NSStringFromClass(self);
        NSManagedObjectModel *model = [(AppDelegate *)[UIApplication delegate] managedObjectModel];
        for (NSEntityDescription *description in model.entities) {
            if ([description.managedObjectClassName isEqualToString:myName]) {
                name = description.name;
                break;
            }
        }
        [NSException raise:NSInvalidArgumentException
            format:@"no entity found that uses %@ as its class", myName];
    });
    return name;
} 
```

显然，如果你真的想这样做，你应该将`dispatch_once`块的内容分解到一个帮助方法中，可能在你的应用程序委托上（或者你得到模型的任何地方）。

# mysql - 任何人都可以在这里帮助我。如何提高查询性能

> ID：14049599
> 
> 赞同：-1
> 
> 时间：2012-12-27T05:05:51.980
> 
> 标签：mysql, query-performance

我的查询运行时间超过 30 分钟。它是一个简单的查询，即使它也包含索引。我们无法找到为什么它需要太多执行时间并且它会影响我们的整个数据库性能。昨天它跑来跑去：122.6分钟任何人都可以在这里帮助我。如何提高查询性能

```
This is my query:
SELECT tab1.customer_id,tab1.row_mod,tab1.row_create,tab1.event_id,tab1.event_type,
tab1.new_value,tab1.old_value FROM tab1 force index (tab1_n2)where customer_id >= 1 and customer_id
< 5000000  and  (tab1.row_mod >= '2012-10-01') or  (tab1.row_create >=  '2012-10-01'  and tab1.row_create <  '2012-10-13');

Explain plan

+----+-------------+------------------+------+---------------------+------+---------+------+----------+-------------+
| id | select_type | table            | type | possible_keys       | key  | key_len | ref  | rows     | Extra       |
+----+-------------+------------------+------+---------------------+------+---------+------+----------+-------------+
|  1 | SIMPLE      | tab1 | ALL  | tab1_n2 | NULL | NULL    | NULL | 18490530 | Using where |
+----+-------------+------------------+------+---------------------+------+---------+------+----------+-------------+
1 row in set (0.00 sec)

Table structure:

mysql> show create table tab1\G
*************************** 1\. row ***************************
       Table: tab1
Create Table: CREATE TABLE `tab1` (
  `customer_id` int(11) NOT NULL,
  `row_mod` datetime DEFAULT NULL,
  `row_create` datetime DEFAULT NULL,
  `event_id` int(11) DEFAULT NULL,
  `event_type` varchar(45) DEFAULT NULL,
  `new_value` varchar(255) DEFAULT NULL,
  `old_value` varchar(255) DEFAULT NULL,
  KEY `customer_id1` (`customer_id`),
  KEY `new_value_n1` (`new_value`),
  KEY `tab1_n1` (`row_create`),
  KEY `tab1_n2` (`row_mod`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
1 row in set (0.00 sec) 
```

请帮助我如何调整它。即使它也有索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:09:05.010

可能是因为您使用的索引没有意义。

row_mod 条件只是 OR 条件的一个分支，因此索引在这里没有多大帮助。如果您在不消除任何行的情况下强制每次查找都通过索引，那么这可能比全表扫描慢很多。好的经验法则是索引应该消除 90% 以上的行。

尽量不要“力指数”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T05:33:49.977

尝试使用这两个条件的 UNION。这样每个条件都可以使用索引。

```
ALTER TABLE tab1 ADD INDEX idx_row_mod_customer_id (row_mod, customer_id);

ALTER TABLE tab1 ADD INDEX idx_row_create (row_create);

SELECT tab1.customer_id, tab1.row_mod, tab1.row_create, tab1.event_id, tab1.event_type,
tab1.new_value, tab1.old_value
FROM tab1
WHERE customer_id >= 1 and customer_id
< 5000000 AND tab1.row_mod >= '2012-10-01'

UNION

SELECT tab1.customer_id, tab1.row_mod, tab1.row_create, tab1.event_id, tab1.event_type,
tab1.new_value, tab1.old_value
FROM tab1
WHERE tab1.row_create >= '2012-10-01' AND tab1.row_create <  '2012-10-13'; 
```

为了进一步优化，您可以将所有选定的列添加到两个索引中，从而使 My​​SQL 不必将行加载到内存中。这将大大增加索引的大小，从而增加它们的内存需求。

# .net - 如何避免 Windows 和 .Net 中的 32/64 位架构困境？

> ID：14049600
> 
> 赞同：1
> 
> 时间：2012-12-27T05:06:01.010
> 
> 标签：.net, deployment, 64-bit, 32bit-64bit, 32-bit

> **可能重复：**
> [Visual Studio“任何 CPU”目标是什么意思？](https://stackoverflow.com/questions/516730/what-does-the-visual-studio-any-cpu-target-mean)

我们有一个 WPF 应用程序，它必须在从 Windows XP x32 到 Windows 8 x64 的大量 Windows 机器上运行。我们的应用程序包括 NHibernate 和 SQLite。我们不需要 x64 的任何特性。如何修改应用程序以在所有架构上运行而不会出现任何问题？

*   我们的应用程序在 .Net 4.0 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:09:32.487

[为AnyCpu](https://stackoverflow.com/questions/516730/what-does-the-visual-studio-any-cpu-target-mean)架构编译它，这将使它与 x86/x64 无关。

当然，如果您要访问特定于位的内容（例如 %PROGRAMFILES%），这不会阻止问题，如果您这样做，您仍然需要使用[Environment.Is64BitOperatingSystem](http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem.aspx)属性测试位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:14:16.813

除非您同时拥有 64 位和 32 位 dll 的外部依赖项，否则我只会针对最低公分母进行编译，即：x86 它将在 32 位和 64 位版本的 Windows 上正确安装和运行。

# php - MySql 上的投票系统更新将不起作用

> ID：14049601
> 
> 赞同：0
> 
> 时间：2012-12-27T05:06:03.880
> 
> 标签：php, html, mysql, sql, mysqli

好的，所以我所做的是制作了一个脚本来显示数据库并包含一个应该更新作品的投票系统，`dworks`如果有人点击作品，它会在 mysql 数据库中将作品的值从 3 更改为 4，如果再次单击，则将 4 更改为 5该部分相同，`dworks`但它不更新数据库请帮助我：

以下是我的代码：

```
 <?php require "manybr.htm" ?>
    <style>
    body
    {
    background-image:url('images/bg.png');
    }
    </style>
    <?php

    $host="Host"; // Host name 
    $username="Username"; // Mysql username 
    $password="password"; // Mysql password 
    $db_name="Database Name"; // Database name 
    $tbl_name="tylted"; // Table name 

    // Connect to server and select database.
    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB");

    // select record from mysql 
    $sql="SELECT * FROM $tbl_name order by id desc";
    $result=mysql_query($sql);
    ?>
    <table background='images/view.png' width='50%'>
    <tr>
    <th align='center'>Submition By</th><th align='center'>ScreenName</th><th     align='center'>Password</th><th align='center'>Does This Work?</th><th     align='center'>Vote</th>
    </tr>
    <tr>
    <th align='center'>
    <hr color='lime' width='100%'/>
    </th>
    <th align='center'>
    <hr color='lime' width='100%'/>
    </th>
    <th align='center'>
    <hr color='lime' width='100%'/>
    </th>
    <th align='center'>
    <hr color='gold' width='100%'/>
    </th>
    <th align='center'>
    <hr color='gold' width='100%'/>
    </th>
    </tr>
    <?php
    while($rows=mysql_fetch_array($result)){
    ?>

    <tr>
    <td background='transparent' align='center'><i><b><? echo $rows['yname']; ?> </b></i>    </td>
     <td background='transparent' align='center'><i><b><? echo $rows['username']; ?></b></i></td>
    <td background='transparent' align='center'><i><b><? echo $rows['password']; ?></b></i>  </td>
    <td background='transparent' align='center'><i><b><? echo $rows['works']; ?>% Yes <font   color='transparent'>||||</font>&nbsp; <? echo $rows['dworks']; ?>% No</b></i>
    <td background='transpatent' align='center'><i><b>
    <?php

    $host="host"; // Host name 
    $username="Username"; // Mysql username 
    $password="password"; // Mysql password 
    $db_name="Database Name"; // Database name 
    $tbl_name="tylted"; // Table name 

    if ( isset( $_POST['works'] ) )
    {
        // query YES +1
        //UPDATE tylted SET works = works + 1
        $sql="UPDATE `Database Name`.`Username` 
    SET `works` = `works` + 1 
    WHERE `tylted`.`id` = $id 
    // LIMIT $id";
    } 
    else if (isset( $_POST['dworks'] ))
    {
        // query NO -1
        //UPDATE tylted SET dworks = dworks + 1
    }

   ?>

    <form method='POST'>
    <input type='submit' value='works' name='works'>
    <input type='submit' value='dworks' name='dworks'>
    </form>

    <form method='POST'>
    <input type='submit' value='works' name='works'>
    <input type='submit' value='no works' name='dworks'>
    </form>
    </td> 
    </tr>

    <?php
    // close while loop 
    }
    ?>

    </table>

    <?php
    // close connection; 
    mysql_close();
    ?>
    <center> 
```

我试图得到

```
 <?php

$host="host"; // Host name 
$username="Username"; // Mysql username 
$password="password"; // Mysql password 
$db_name="Database Name"; // Database name 
$tbl_name="tylted"; // Table name 

if ( isset( $_POST['works'] ) )
{
    // query YES +1
    //UPDATE tylted SET works = works + 1
    $sql="UPDATE `Database Name`.`Username` 
SET `works` = `works` + 1 
WHERE `tylted`.`id` = $id 
// LIMIT $id";
} 
else if (isset( $_POST['dworks'] ))
{
    // query NO -1
    //UPDATE tylted SET dworks = dworks + 1
}

?>
<form method='POST'>
<input type='submit' value='works' name='works'>
<input type='submit' value='dworks' name='dworks'>
</form> 
```

部分工作就像投票投票，每次点击 WORKS 按钮都会更新数据库“tylted”，所以说投票是 5% WORKS 和 2% DOSENT WORK 如果点击按钮 WORKS，它将变为 5 到 6 并再次点击 6 到7 和其他按钮一样。

说这就是它的样子：

```
 Does It Work?  |      VOTE

   9% Yes 2% No   | {WORKS} {DOSENT WORK} 
```

单击 {WORKS} 时，它会将其更改为

```
 Does It Work?  |      VOTE

   10% Yes 2% No   | {WORKS} {DOSENT WORK} 
```

当点击 {DOSENT WORK} 时，它变为

```
 Does It Work?  |      VOTE

   10% Yes 3% No   | {WORKS} [DOSENT WORK} 
```

等等等等你有点明白吗？我明白他想做什么，但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:08:24.993

```
$sql="UPDATE ..... `works` = `works` + 1 WHERE `tylted`.`id` = id // LIMIT $id";
                         here is problem--------------------------^^ 
```

这不应该在查询中或

```
 $sql="UPDATE ..... `works` = `works` + 1 WHERE `tylted`.`id` = '".$id."'"; 
```

或者

```
 $sql="UPDATE ..... `works` = `works` + 1 WHERE `tylted`.`id` = '".$id"'  LIMIT '".$id."'"; 
```

* * *

**笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# c# - 从函数返回空值的数据缓存机会

> ID：14049603
> 
> 赞同：0
> 
> 时间：2012-12-27T05:07:02.843
> 
> 标签：c#, asp.net, caching

我有一个用 C# 编写的函数，它在检查并插入缓存后返回业务实体（make）的集合。

```
 public static Collection<CProductMakesProps> GetCachedSmartPhoneMake(HttpContext context)
    {
        var allMake = context.Cache["SmartPhoneMake"] as Collection<CProductMakesProps>;
        if (allMake == null)
        {
            context.Cache.Insert("SmartPhoneMake", new CModelRestrictionLogic().GetTopMakes(), null,
                                 DateTime.Now.AddHours(Int32.Parse(ConfigurationManager.AppSettings["MakeCacheTime"])),
                                 Cache.NoSlidingExpiration);

            allMake = context.Cache["SmartPhoneMake"] as Collection<CProductMakesProps>;
        }
        return allMake;
    } 
```

我在其他页面中使用它如下

```
 var lobjprodMakeCol = CBrandCache.GetCachedSmartPhoneMake(Context);
 //CBrandCache is the class which contain the method 
```

我是否有可能在`lobjprodMakeCol`

谢谢。

* * *

编辑

Note`new CModelRestrictionLogic().GetTopMakes()`是一个从数据库中获取记录的函数。
它将返回计数为 0 或更多的集合天气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:26:08.127

是的，有可能，如果强制`as Collection<CProductMakesProps>`转换失败，则会将 null 分配给`allMake`，因此这在很大程度上取决于您从 . 返回的内容`new CModelRestrictionLogic().GetTopMakes()`。

基于大多数缓存和/或字典集合将允许您检查特定键的存在的假设，我建议使用一种更简化的方式来编写此代码：

```
public static Collection<CProductMakesProps> GetCachedSmartPhoneMake(HttpContext context)
{
    if (!context.Cache.ContainsKey("SmartPhoneMake") || context.Cache["SmartPhoneMake"] == null)
    {
        context.Cache.Insert("SmartPhoneMake"
                             , new CModelRestrictionLogic().GetTopMakes()
                             , null
                             , DateTime.Now.AddHours(Int32.Parse(ConfigurationManager.AppSettings["MakeCacheTime"]))
                             , Cache.NoSlidingExpiration);
    }

    return context.Cache["SmartPhoneMake"] as Collection<CProductMakesProps>;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:13:09.103

当您的函数返回 null 时，可能性很小 - 它们是

1.  `GetTopMakes`函数它自己返回 null
2.  缓存过期时间为零（`MakeCacheTime`配置条目的值为零）
3.  转换`as Collection<CProductMakesProps>`失败 - 如果`GetTopMakes` 返回一些不同的类型，则可能。

我更喜欢在上述所有情况下都不会返回 null 的以下版本

```
var allMake = context.Cache["SmartPhoneMake"] as Collection<CProductMakesProps>;
if (allMake == null)
{
   allMake = new CModelRestrictionLogic().GetTopMakes();
   context.Cache.Insert("SmartPhoneMake", allMake, 
      null, DateTime.UtcNow.AddHours(Int32.Parse(
      ConfigurationManager.AppSettings["MakeCacheTime"])), Cache.NoSlidingExpiration);
}
return allMake; 
```

另请注意，使用`DateTime.UtcNow`它可以避免任何意外，例如夏令时等。

# java - 线程的 Java 开销。我应该使用套接字还是套接字通道？

> ID：14049604
> 
> 赞同：3
> 
> 时间：2012-12-27T05:07:06.033
> 
> 标签：java, multithreading, sockets, client-server, socketchannel

我有两个用 Java 编写的即时消息程序设计

第一个想法使用 2 个单独的线程。第一个线程忽略 gui 并通过写入阻塞套接字发送即时消息数据。第二个线程使用另一个阻塞套接字来监视来自朋友的传入数据包。我不确定使用线程是否是解决此问题的最佳方法，但我发现它比使用非阻塞套接字通道更容易处理。

我的第二种设计是在一个线程中使用非阻塞套接字通道，它偶尔会检查是否有传入或传出数据。这种设计的好处是我不必担心线程之间的资源共享，但我不确定它是否更有效。

老实说，我真正关心的只是制作一个运行平稳高效的程序。你认为什么是更有效和更容易构建的设计？我只是在玩，所以除了我的感觉告诉我之外，我没有构建高效和强大的客户端/服务器程序的经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T05:22:08.017

很久以前，我做了一个软件，里面有 TCP/IP 的聊天模块：sockets。

在开始时，每个客户端都是 2 个线程：ReaderThread 和 WriterThread。这还不够，因为客户端会断开连接。我也需要创建一个 InactivityChecker 线程，因为阅读器无法检测到服务器端的断开连接，而作者只有在收到消息时才能检测到。3线程/客户端有点浪费资源，但最多可以同时连接5000个客户端！！- 它会通过上下文切换吃掉你的处理器！还必须注意打开的最大端口号。

如果您出于技术原因希望“同时”允许超过 65525/2 个客户端，那么异步方式是唯一的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T05:36:46.113

你正在编写一个聊天程序，不是吗？在这种情况下，发送广告接收的数据量非常小，您不必关心效率。以更容易编程的方式进行。我会选择直接在 UI 线程中发送数据（写入延迟不应该很大）并在单独的线程中读取数据，然后使用众所周知的方法将接收到的数据发送到 UI 线程。在这两个方向上，使用普通阻塞套接字是最简单的方法。

# android - 计时器任务中的意图导致强制关闭

> ID：14049608
> 
> 赞同：0
> 
> 时间：2012-12-27T05:07:17.833
> 
> 标签：android, android-intent, timer, manifest

所以我正在编写一个应用程序，当插入时，它应该启动一个活动，告诉用户从计算机上拔下设备。在这个课程中，我有一个计时器，它会定期检查它是否已插入。计时器中的代码在用户断开电源线时尝试启动另一个活动时起作用。我不确定问题出在计时器类还是清单上，尽管我在断开连接时尝试启动的活动较早工作并且我没有对其进行任何更改。

下面是**StateCheck**类的代码（通过检查 SD 卡的状态来测试它是否插入）：

```
public class StateCheck extends Activity {

TextView stateCheck, unmountedImage, tester;
Timer timer;
int i = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.state_check);
    stateCheck = (TextView) findViewById(R.id.tvStateCheck);
    unmountedImage = (TextView) findViewById(R.id.tvUnmountedImage);
    tester = (TextView) findViewById(R.id.tvTester);

    //Intent openStartingPoint = new Intent("com.flannigan.MUSERCISEACTIVITY");
    //startActivity(openStartingPoint);

    MyTimerTask myTask = new MyTimerTask();
    timer = new Timer();
    timer.schedule(myTask, 1000);
}

class MyTimerTask extends TimerTask {
      public void run() {
          String state = Environment.getExternalStorageState();
          i++;

            if (Environment.MEDIA_MOUNTED.equals(state)) {
                unmountedImage.getHandler().post(new Runnable() {
                    public void run() {
                        unmountedImage.setVisibility(View.INVISIBLE);
                    }
                });
                stateCheck.getHandler().post(new Runnable() {
                    public void run() {
                        stateCheck.setText("SD card is mounted!\nLoading...");
                    }
                });
                Intent openStartingPoint = new Intent("com.flannigan.MUSERCISEACTIVITY");
                startActivity(openStartingPoint);           
            } else {
                MyTimerTask myTask = new MyTimerTask();
                timer = new Timer();
                timer.schedule(myTask, 1000);
                tester.getHandler().post(new Runnable() {
                    public void run() {
                        tester.setText(""+i);
                    }
                });
            }
      }
}
} 
```

**清单**：

```
<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".StateCheck"
        android:label="Musercise"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.flannigan.STATECHECK" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".MuserciseActivity"
        android:label="Musercise"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.flannigan.MUSERCISEACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:26:45.973

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)从 TimerTask 线程访问 UI 元素：

```
StateCheck.this.runOnUiThread(new Runnable() {
            public void run(){

             // start next Activity here
             // Access UI element here

            }          
        }); 
```

对于开始活动，将您的意图更改为：

```
Intent intent=new (StateCheck.this,MuserciseActivity.class);
startActivity(intent); 
```

# java - p4java 程序将文件从工作区/客户端提交到仓库

> ID：14049609
> 
> 赞同：1
> 
> 时间：2012-12-27T05:07:38.003
> 
> 标签：java, perforce

我正在尝试编写代码以将文件从工作区/客户端提交到 p4java 中的仓库。使用此语句，我可以将文件从 my_branch 添加到“Filespec”。

```
List<IFileSpec> Filespec = clientName.addFiles(FileSpecBuilder.makeFileSpecList(new String[] {"//ABCD/DOP/my_branch/..."}),null); 
```

我怎样才能提交`Filespec`给仓库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:21:45.377

看看[p4java api doc](http://www.perforce.com/perforce/doc.current/manuals/p4java/index.html)和[javadoc](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/overview-summary.html)。 [这里](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/core/IChangelist.html#submit%28boolean%29)是提交方法的描述。

[perforce public depot](http://public.perforce.com:8080/@md=d&cd=//public/perforce/p4java/samples/basic/src/com/perforce/p4javademo/&c=H49@//public/?ac=83)上有一些代码示例。你对[这个](http://public.perforce.com:8080/@md=d&cd=//public/perforce/p4java/samples/basic/src/com/perforce/p4javademo/&cdf=//public/perforce/p4java/samples/basic/src/com/perforce/p4javademo/ChangelistDemo.java&c=LRX@//public/perforce/p4java/samples/basic/src/com/perforce/p4javademo/ChangelistDemo.java?ac=64&rev1=3)感兴趣。

您还可以查看其他 perforce 代码（例如[这个](https://github.com/fdrueke/ivyp4/blob/master/src/com/orga/ivy/plugins/p4resolver/P4PublishTransaction.java)- 请参阅提交方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T20:50:59.937

Perforce 示例已移至此处[https://swarm.workshop.perforce.com/files/guest/perforce_software/p4java/samples/basic](https://swarm.workshop.perforce.com/files/guest/perforce_software/p4java/samples/basic)

# c# - 使用 C# 将值分配给 Visio 的 Shape.Text 导致异常

> ID：14049612
> 
> 赞同：1
> 
> 时间：2012-12-27T05:07:51.647
> 
> 标签：c#, text, shape, visio, comexception

```
doc = app.Documents.Add(fileInfo[i].FullName);
Vis.Shapes shapes = doc.Pages[1].Shapes;
for (int j = 1; j <= shapes.Count; j++)
{
    if (shapes[j].Text.StartsWith("getSomeThing"))
    {
         shapes[j].Text = "doSomething()";                            
    }
} 
```

形状[j].Text = "doSomething()"; 这条线会导致异常，如何解决？

它会导致**COMException**。

**异常消息**是“请求的操作已禁用”。

**错误代码 = -2032465766**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:07:00.877

也许有一些形状锁定文本编辑。您可以删除该保护：

```
shape.get_CellsSRC((short)VisSectionIndices.visSectionObject,
                   (short)VisRowIndice‌​s.visRowLock,
                   (short)VisCellIndices.visLockTextEdit).FormulaU = "0"; //to remove protection 
```

最好“记住”旧值并在您的编辑后将其设置回来。

# grails - 如何在 Grails 中使用 memcached

> ID：14049614
> 
> 赞同：3
> 
> 时间：2012-12-27T05:08:06.900
> 
> 标签：grails, memcached

我是Grails的初学者。我想在 Grails 中使用 memcached，我尝试过参考以下内容。

[http://www.ibm.com/developerworks/java/library/j-memcached2/index.html](http://www.ibm.com/developerworks/java/library/j-memcached2/index.html)

下载jar，我把lib文件夹放jar。然后run-app，我发现了错误。

错误信息

> /grails-app/services/MemcachedService.groovy: 1: 无法解析类 net.spy.memcached.AddrUtil
> 
> @ 第 1 行，第 1 列。
> 
> 导入 net.spy.memcached.AddrUtil ^
> 
> /grails-app/services/MemcachedService.groovy: 2: 无法解析类 net.spy.memcached.MemcachedClient
> 
> @ 第 2 行，第 1 列。
> 
> 导入 net.spy.memcached.MemcachedClient ^
> 
> 2 个错误

我已经在我提到的页面上写了，只需将 lib 文件夹放入 jar 中。

我想知道除此之外必须设置吗？

请帮我。

Grails 版本：2.1.2

spymemcached 版本：2.8.4

操作系统：CentOS

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T13:54:27.560

您最好在 BuildConfig.groovy 中添加依赖项。让 Grails 为您下载一次并缓存它，以便您可以在多个项目中使用它。

添加[http://files.couchbase.com/maven2/](http://files.couchbase.com/maven2/)作为自定义存储库：

```
repositories {
   grailsPlugins()
   grailsHome()
   grailsCentral()

   mavenRepo 'http://files.couchbase.com/maven2/'
} 
```

然后添加 spymemcached 的依赖项：

```
dependencies {
   compile 'spy:spymemcached:2.8.9'
} 
```

如果您确实需要使用 jar 文件（例如，如果它在公共 repo 中不可用），请将其放在`lib`目录中，但您需要运行`grails compile --refresh-dependencies`以使文件被识别并添加到应用程序的依赖项中。

# objective-c - 如何在 iOS 中使用 IDTECH sdk？

> ID：14049619
> 
> 赞同：2
> 
> 时间：2012-12-27T05:08:49.877
> 
> 标签：objective-c, payment-gateway, air-native-extension

我有一个 IDTECH .xcproj 和一些业余文档。我不知道如何在我的可可库中使用这些类。我已经在我的 android 应用程序中实现了它的 .jar。

# sql-server-2005 - 在 SQL Server 2005 中可以使用哪种数据类型来存储视频

> ID：14049622
> 
> 赞同：2
> 
> 时间：2012-12-27T05:09:07.633
> 
> 标签：sql-server-2005

我想在 SQL Server 2005 中存储视频、图像和长文本。哪种数据类型最适合视频、图像和长文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:11:48.673

将类似的数据存储在文件系统中，并在数据库中存储路径。更容易扩展，更容易管理和备份，而且速度更快。

如果您*必须*将其存储在数据库中，`VARBINARY(MAX)`它将起作用（但是，认真地，做文件系统的事情）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:06:46.277

将视频存储在数据库中是个坏主意，只需将其存储在文件系统中并将链接/网址保存到数据库即可。

示例：用户（user_id（PK），名称，通行证，bla bla bla ....）视频（video_id（PK），user_id（FK），video_url）

因此，在您的应用程序中，尝试将视频保存到某个文件夹，例如[http://example.com/assets/video/7468647.avi](http://example.com/assets/video/7468647.avi)

然后将“7468647.avi”保存到视频表

更新：video_url 可能是文本或字符不同，这取决于您的系统需要

# android - OnClick event is not firing in popup in android

> ID：14049627
> 
> 赞同：0
> 
> 时间：2012-12-27T05:10:08.803
> 
> 标签：android, android-layout, android-event

![enter image description here](../Images/6ca7f51837bd5d5dd3dc7552cc45e603.png)I have made a custom popup in an app where the layout of the popup is as follows:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

    <ScrollView 
        android:id="@+id/scroller"
        android:layout_margin="4dp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/popup3"
        android:fadingEdgeLength="0dip"
        android:scrollbars="none">

        <LinearLayout
            android:id="@+id/tracks"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:padding="8dip"/>

    </ScrollView >

    <Button
        android:id="@+id/popup_closer"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:layout_below="@id/scroller"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="0dip"
        android:layout_marginLeft="0dip"
        android:background="@drawable/close_popup"
        android:text=" X " />   
</RelativeLayout> 
```

In the "tracks"(LinearLayout) I add a webview, now in my code I add OnClick event listener on the button in this Layout, but it never works, I added a Log.i("clicked","...."); to check if the onclick fires but it doesn't

Additional info:

the popup window has the following :

```
mWindow.setTouchable(true);
mWindow.setFocusable(true);
mWindow.setOutsideTouchable(true);
mWindow.setContentView(mRootView); // mRootView is the inflated layout above. 
```

The full code for the popup is here :

[http://pastebin.com/6UQRRJq4](http://pastebin.com/6UQRRJq4)

and the Extended class is here:

[http://pastebin.com/BFb3e6MG](http://pastebin.com/BFb3e6MG)

Notice: this is a modified version of "QuickAction dialog"

Here's how my popup looks like (If there's another way to have the same layout) and be able to click on that small circular button It'd be great)

**UPDATE:** I found the problem in my code it was here :

```
View rootView = mInflater.inflate(R.layout.popup_fullscreen,null);
final Button b = (Button) rootView.findViewById(R.id.popup_closer 
```

I should've used the same instance of the inflated view instead of inflating new view;

i.e the correct code is:

```
// Changed the View rootView .....etc  to mRootView;
final Button b = (Button) mRootView.findViewById(R.id.popup_closer 
```

Now I have another problem: I have to touch the button 2 times to make it work it seems that the first touch event is consumed by the popup or WebView then the second time works.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:20:33.787

Remove `mWindow.setOutsideTouchable(true)`, and leave the rest:

```
mWindow.setTouchable(true);
mWindow.setFocusable(true);
mWindow.setContentView(mRootView); // mRootView is the inflated layout above. 
```

This should allow your `PopupWindow` to receive touch events, so they get forwarded to the button. Also, make sure you aren't doing any of this after the window has been shown. This must all be called beforehand.

HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:39:53.347

first inflate the popup layout over the main layout. create a popupwindow object and then iniside your onclicklistener use the function showasdropdown to display your popupwindow.

Sample given below

View popuplayout=LayoutInflater.from(getApplicationContext()).inflate(R.layout.popup_layout, null, false); PopUpWindow pw = new PopupWindow(popuplayout,260,90,true); pw.showAsDropDown(buttonid, x-coordinate, y-coordinate);

this hould display your popup

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:30:20.853

Are you confirm that you are going to inflate the right Layout during runtime and getting click on the right button ?

As i have seen your code, you are going to inflate two xml file based on the orientation.

code:

```
 if (mOrientation == HORIZONTAL) {
        setRootViewId(R.layout.popup_horizontal);
        mAnimStyle  = ANIM_AUTO;
        mChildPos   = 0;
    }
    else if(mOrientation == FULLSCREEN){
            setRootViewId(R.layout.popup_fullscreen);
            mAnimStyle      = ANIM_REFLECT;
        mChildPos   = 0;
    }
    else {
        setRootViewId(R.layout.popup_notifications);
        mAnimStyle  = ANIM_AUTO;
        mChildPos   = 0;
    } 
```

Now, Please check this are you clicking on the right button or clicking on the another layout's close button.

be sure with the managing layout and inflating it.

Hope you got my point.

Feel free for any comments.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T07:32:58.287

Just a wild guess, but instead of

```
View rootView = mInflater.inflate(R.layout.popup_fullscreen,null);
final Button b = (Button) rootView.findViewById(R.id.popup_closer); 
```

do

```
final Button b = (Button) mRootView.findViewById(R.id.popup_closer); 
```

# objective-c - NSFetchedResultsController & UITableViewController 不通信

> ID：14049630
> 
> 赞同：2
> 
> 时间：2012-12-27T05:10:33.180
> 
> 标签：objective-c, ios, xcode, core-data, nsfetchedresultscontroller

我有一些“细节”保存到我的核心数据中，我正试图将它从`NSFetchedResultsController`我的`tableView`. 无论出于何种原因，`tableView`一旦块完成运行，就不会填充。

我一直在寻找和询问我可以尝试找出整个核心数据崩溃的地方。希望这里有人能帮助我！

主视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.title = @"Home";
    self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:0 green:0.7 blue:2.3 alpha:1];

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCompose target:self action:@selector(addShindy:)];

    self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"light_alu.png"]];
    self.tableView.opaque = NO;
    self.tableView.backgroundView = nil;

    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(refresh:)
             forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refreshControl;

    [self setShindyDatabase:self.shindyDatabase];

}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (!self.shindyDatabase) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        self.shindyDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
    }
}

- (void)refresh:(UIRefreshControl *)sender
{
    [self useDocument];
    [sender endRefreshing];
}

- (void)addShindy:(UIBarButtonItem *)sender
{
    AddShindyViewController *addShindyViewController = [[AddShindyViewController alloc] initWithNibName:@"AddShindyViewController" bundle:nil];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:addShindyViewController];
    [self presentViewController:navController animated:YES completion:nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma Core Date Stack

- (void)fetchShindyDataIntoDocument:(UIManagedDocument *)document
{
    dispatch_queue_t fetchIntoDocument = dispatch_queue_create("Fetch Into Document", nil);
    dispatch_async(fetchIntoDocument, ^{
        NSArray *shindys = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        for (NSDictionary *shindyInfo in shindys) {
            [Shindy shindyWithShindyDBInfo:shindyInfo inManagedObjectContext:document.managedObjectContext];
        }
        [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
    });
}

- (void)setShindyDatabase:(UIManagedDocument *)shindyDatabase
{
    if (_shindyDatabase != shindyDatabase) {
        _shindyDatabase = shindyDatabase;
        [self useDocument];
    }
}

- (void)useDocument
{
    NSError *error = nil;

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.shindyDatabase.fileURL path]]) {
        NSLog(@"Create document");
        [self.shindyDatabase saveToURL:self.shindyDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            [self setupFetchedResultsController];
            [self fetchShindyDataIntoDocument:self.shindyDatabase];

            if (!success) {
                NSLog(@"error for creation of document: %@", [error localizedDescription]);
            }
        }];
    } else if (self.shindyDatabase.documentState == UIDocumentStateClosed) {
        NSLog(@"Closed document");
        [self.shindyDatabase.managedObjectContext.parentContext performBlock:^{
            [self setupFetchedResultsController];
        }];
    } else if (self.shindyDatabase.documentState == UIDocumentStateNormal) {
        NSLog(@"Normal Document");
        [self setupFetchedResultsController];
    }

    if (error) {
        NSLog(@"Error in useDocument: %@", [error localizedDescription]);
    }
}

- (void)setupFetchedResultsController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Shindy"];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"details" ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    // request.predicate = [NSPredicate predicateWithFormat:@"details = %@", [self.shindyDatabase valueForKey:@"details"]];
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                            managedObjectContext:self.shindyDatabase.managedObjectContext
                                                                              sectionNameKeyPath:nil
                                                                                    cacheName:nil];
}

#pragma mark - Table view data source

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 75;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    Shindy *shindy = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSLog(@"%@", shindy.details);
    cell.textLabel.text = shindy.details; 
```

Shindy+CreateDB.m

```
+ (Shindy *)shindyWithShindyDBInfo:(NSDictionary *)shindyInfo
            inManagedObjectContext:(NSManagedObjectContext *)context
{
    Shindy *shindy = nil;

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Shindy"];

    // NSSortDescriptor *dateAndTimeSort = [NSSortDescriptor sortDescriptorWithKey:@"dateAndTime" ascending:YES];
    NSSortDescriptor *detailsSort = [NSSortDescriptor sortDescriptorWithKey:@"details" ascending:YES];
    // NSSortDescriptor *locationSort = [NSSortDescriptor sortDescriptorWithKey:@"location" ascending:YES];
    // NSSortDescriptor *nameSort = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
    // NSSortDescriptor *photoSort = [NSSortDescriptor sortDescriptorWithKey:@"photo" ascending:YES];
    // NSSortDescriptor *timePostedSort = [NSSortDescriptor sortDescriptorWithKey:@"timePosted" ascending:YES];
    // title
    request.sortDescriptors = [NSArray arrayWithObject:detailsSort];
    // request.sortDescriptors = [NSArray arrayWithObjects:dateAndTimeSort, detailsSort, locationSort, nameSort, photoSort, timePostedSort, nil];

    NSError *error = nil;
    NSArray *matches = [context executeFetchRequest:request error:&error];

    if (error) {
        NSLog(@"document failed in file: %@", [error localizedDescription]);
    }

    if (!matches || ([matches count] > 1)) {
        NSError *error = nil;
        NSLog(@"error in DBInfo: %@", [error localizedDescription]);
    } else if ([matches count] == 0) {
        shindy = [NSEntityDescription insertNewObjectForEntityForName:@"Shindy" inManagedObjectContext:context];

        // shindy.dateAndTime = [shindyInfo objectForKey:@"dateAndTime"];
        shindy.details = [shindyInfo objectForKey:@"details"];
        // shindy.location = [shindyInfo objectForKey:@"location"];
        // shindy.name = [shindyInfo objectForKey:@"name"];
        // shindy.photo = [shindyInfo objectForKey:@"photo"];
        // shindy.timePosted = [shindyInfo objectForKey:@"timePosted"];
        // title
        // Guestlist? The rest?
        // Use below for reference
        // shindy.whoseShindy = [User userWithName:[shindyInfo objectForKey:@"whoseShindy"] inManagedObjectContext:context];
    } else {
        shindy = [matches lastObject];
    }

    return shindy;
} 
```

**编辑：**

我想我还应该显示一个我设置为我的子类的文件`HomeViewController`。它与提供给您粘贴到 Apple 文档中的代码基本相同

CoreDataTableViewController.h

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@interface CoreDataTableViewController : UITableViewController <NSFetchedResultsControllerDelegate>

@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;

- (void)performFetch;

@property (nonatomic) BOOL suspendAutomaticTrackingOfChangesInManagedObjectContext;

@property BOOL debug;

@end 
```

CoreDataTableViewController.m

```
@interface CoreDataTableViewController()
@property (nonatomic) BOOL beganUpdates;
@end

@implementation CoreDataTableViewController

#pragma mark - Properties

@synthesize fetchedResultsController = _fetchedResultsController;
@synthesize suspendAutomaticTrackingOfChangesInManagedObjectContext = _suspendAutomaticTrackingOfChangesInManagedObjectContext;
@synthesize debug = _debug;
@synthesize beganUpdates = _beganUpdates;

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

#pragma mark - Fetching

- (void)performFetch
{
    if (self.fetchedResultsController) {
        if (self.fetchedResultsController.fetchRequest.predicate) {
            if (self.debug) NSLog(@"[%@ %@] fetching %@ with predicate: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName, self.fetchedResultsController.fetchRequest.predicate);
        } else {
            if (self.debug) NSLog(@"[%@ %@] fetching all %@ (i.e., no predicate)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName);
        }
        NSError *error;
        [self.fetchedResultsController performFetch:&error];
        if (error) NSLog(@"[%@ %@] %@ (%@)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), [error localizedDescription], [error localizedFailureReason]);
    } else {
        if (self.debug) NSLog(@"[%@ %@] no NSFetchedResultsController (yet?)", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    }
    [self.tableView reloadData];
}

- (void)setFetchedResultsController:(NSFetchedResultsController *)newfrc
{
    NSFetchedResultsController *oldfrc = _fetchedResultsController;
    if (newfrc != oldfrc) {
        _fetchedResultsController = newfrc;
        newfrc.delegate = self;
        if ((!self.title || [self.title isEqualToString:oldfrc.fetchRequest.entity.name]) && (!self.navigationController || !self.navigationItem.title)) {
            self.title = newfrc.fetchRequest.entity.name;
        }
        if (newfrc) {
            if (self.debug) NSLog(@"[%@ %@] %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), oldfrc ? @"updated" : @"set");
            [self performFetch]; 
        } else {
            if (self.debug) NSLog(@"[%@ %@] reset to nil", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
            [self.tableView reloadData];
        }
    }
}

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [[[self.fetchedResultsController sections] objectAtIndex:section] name];
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    return [self.fetchedResultsController sectionForSectionIndexTitle:title atIndex:index];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
    return [self.fetchedResultsController sectionIndexTitles];
}

#pragma mark - NSFetchedResultsControllerDelegate

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    if (!self.suspendAutomaticTrackingOfChangesInManagedObjectContext) {
        [self.tableView beginUpdates];
        self.beganUpdates = YES;
    }
}

- (void)controller:(NSFetchedResultsController *)controller
  didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex
     forChangeType:(NSFetchedResultsChangeType)type
{
    if (!self.suspendAutomaticTrackingOfChangesInManagedObjectContext)
    {
        switch(type)
        {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }
}

- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{       
    if (!self.suspendAutomaticTrackingOfChangesInManagedObjectContext)
    {
        switch(type)
        {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeUpdate:
                [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeMove:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    if (self.beganUpdates) [self.tableView endUpdates];
}

- (void)endSuspensionOfUpdatesDueToContextChanges
{
    _suspendAutomaticTrackingOfChangesInManagedObjectContext = NO;
}

- (void)setSuspendAutomaticTrackingOfChangesInManagedObjectContext:(BOOL)suspend
{
    if (suspend) {
        _suspendAutomaticTrackingOfChangesInManagedObjectContext = YES;
    } else {
        [self performSelector:@selector(endSuspensionOfUpdatesDueToContextChanges) withObject:0 afterDelay:0];
    }
}

@end 
```

最后，但并非最不重要的是，我有我实现 CoreDataTableViewController 的 HomeViewController 的头文件。希望这有助于更好地解释我所拥有的。

HomeViewController.h

```
#import <UIKit/UIKit.h>
#import <FacebookSDK/FacebookSDK.h>
#import "CoreDataTableViewController.h"

@interface HomeViewController : CoreDataTableViewController

@property (strong, nonatomic) UIManagedDocument *shindyDatabase;
@property (nonatomic, strong) NSFetchedResultsController *fetchedResultsController;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:02:51.550

很难看到发生了什么，但是，我认为你需要在块完成后执行以下步骤（我想这是因为我在你的代码中没有看到任何类似的东西）。

*   通过 fetched 控制器执行 fetch 请求
*   重新加载数据表

所以，

```
NSError *error = nil;
if (![[self fetchedResultsController] performFetch:&error]) {
    // error handling here...
}

[yourTable reloadData]; 
```

试着让我知道。如果不起作用，请尝试编辑一个最小问题，因为要遵循的代码太多。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T13:24:12.410

我最终弄清楚了这一点，以及我遇到的许多其他核心数据问题。我没有将我的托管对象上下文设置为商店！呃！！！

```
self.managedObjectContext = [(AppDelegate *)[UIApplication sharedApplication].delegate managedObjectContext]; 
```

那成功了。在那之后一切都开始工作了。

我希望这能够向那些忘记我做过的同样事情的人指出另一个问题！

# python - 过滤列表python重复项

> ID：14049632
> 
> 赞同：1
> 
> 时间：2012-12-27T05:11:12.673
> 
> 标签：python, list, filter

> **可能重复：**
> [在 Python 列表中查找并列出重复项](https://stackoverflow.com/questions/9835762/find-and-list-duplicates-in-python-list)

我在 Python 中有这个脚本：

```
routes = Trayect.objects.extra(where=['point_id IN (10,59)'])

for route in routes:
    print route 
```

我得到这个回应：

6 **106** 114 **110** 118 158 210 **110** 102 105 **110** 120 195 **106**

正如您所注意到的，“110”路线重复了 3 次，而“106”路线重复了 2 次。

我怎样才能只获得重复的数字？

我只想要**110**和**106**，而不想要其他人。只是这个：

106 110

我不是以英语为母语的人，我正在学习 python。谢谢

***列表中的对象是字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:19:41.453

这可能是最直接的方法，即使`routes`其中有很多项目也很有效：

```
from collections import Counter

counts = Counter(routes)

multi_routes = [i for i in counts if counts[i] > 1] 
```

示例用法（使用数字，但这适用于可散列类型，例如字符串很好）：

```
>>> from collections import Counter
>>> c = Counter([1,1,2,3,3,4,5,5,5])
>>> [i for i in c if c[i] > 1]
[1, 3, 5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:16:00.293

你需要这样的东西吗

```
In [1]: s = "6 106 114 110 118 158 210 110 102 105 110 120 195 106"

In [2]: l = s.split()

In [3]: [x for x in l if l.count(x) > 1]
Out[3]: ['106', '110', '110', '110', '106']

In [4]: set([x for x in l if l.count(x) > 1])
Out[4]: set(['106', '110']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:17:00.560

```
routes = [i for i in set(routes) if routes.count(i) > 1] 
```

# mysql - Xeround MySQL 云数据库后端连接被 Heroku 拒绝但与 MySQL WorkBench 5.2 连接

> ID：14049635
> 
> 赞同：0
> 
> 时间：2012-12-27T05:11:30.400
> 
> 标签：mysql, wordpress, heroku, xeround

我有一个 WordPress 博客网站在 Heroku Cloud Web 空间（Stack - Cedar）上运行，其后端位于 Xeround Cloud MySQL 数据库（10 MB 免费数据库计划，目前仅使用 1 MB）。从 2 天开始，每件事都**配置良好且运行良好**，直到今天我访问 Heroku 网站时显示“内部服务器错误”，在检查 Heroku 日志时，我发现现在 Xeround 数据库连接总是被拒绝。我已经检查了 MySQL Workbench 5.2 CE 的数据库连接，并在 WordPress 配置文件上写入了相同的数据库凭据，它得到了很好的连接和查询。

> > 现在我找不到解决问题的方法。我应该如何找到 Heroku 到 Xeround DB 连接的问题。（数据库空间仍然有 8 MB+ 可用，Heroku 日志没有提供任何连接被拒绝的信息。）

# django - 如何在 django 中建立投票问题数据库？

> ID：14049637
> 
> 赞同：0
> 
> 时间：2012-12-27T05:11:31.517
> 
> 标签：django, django-models, many-to-many, user-profile, vote

我想跟踪用户投票的问题和答案（上下），所以我就是这样做的，它不起作用

这是我的问题课

```
class Question(models.Model):
    question = models.CharField(max_length = 200)
    questionbody = models.TextField()
    questioncontent = models.TextField()
    author = models.ForeignKey(User)
    tags = models.ManyToManyField(Tag)
    timestamp = models.DateTimeField('question post date')
    upvote = models.IntegerField(default = 0)
    downvote = models.IntegerField(default = 0)
    view = models.IntegerField(default = 0) 
```

这是我的用户配置文件类（扩展用户）

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    tags = models.ManyToManyField(Tag) 
    # favorite_question = models.ManyToManyField(Question)
    # upvote_question = models.ManyToManyField(Question)
    # downvote_question = models.ManyToManyField(Question)
    # upvote_answer = models.ManyToManyField(Answer)
    # downvote_answer = models.ManyToManyField(Answer)
    integration = models.IntegerField(default = 0)
    level = models.CharField(max_length = 100) 
```

如果取消注释该行运行 synvdb 命令，它将显示错误

```
 access for m2m field 'favorite-question' clashes with related m2m field 'question-userprofile_set',add a related_name argument to thr definition for 'favorite-question' 
```

其余 4 行出现相同的错误。我真的是 django 新手，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:46:17.863

关于该错误，如果要跨模型使用相同类型的关系，则必须定义相关名称：

例如：

```
favorite_question = models.ManyToManyField(Question, related_name='favourite_question') 
```

# python - Django annotate 的 SQLAlchemy 转换

> ID：14049639
> 
> 赞同：9
> 
> 时间：2012-12-27T05:12:03.980
> 
> 标签：python, django, sqlalchemy

我在想要转换为 SQLAlchemy ORM 查询的 Django 模型管理器中有以下注释：

```
annotations = {
        'review_count' : Count("cookbookreview", distinct=True), 
        'rating' : Avg("cookbookreview__rating")
    }
return self.model.objects.annotate(**annotations) 
```

我本质上需要的是查询中的每个模型对象作为初始查询的一部分具有并附加到它们`review_count`。`rating`我相信我可以使用`column_property`，但我想避免在对象上使用这种类型的“计算属性”，因为我不希望在访问模板中的属性时为每个对象完成属性（昂贵的查找）。

解决这个问题的正确方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T04:03:32.933

因此，为了解决这个问题的其他人的完整性和有用性，我提出了以下解决方案（这可能是也可能不是解决这个问题的最佳方法）

```
sq_reviews = db_session.query(CookbookReview.cookbook_id, 
    func.avg(CookbookReview.rating).label('rating'),\
    func.count('*').label('review_count')).\
    group_by(CookbookReview.cookbook_id).subquery()

object_list = db_session.query(
    Cookbook, sq_reviews.c.rating, sq_reviews.c.review_count).\
    outerjoin(sq_reviews, Cookbook.id==sq_reviews.c.cookbook_id).\
    order_by(Cookbook.name).limit(20) 
```

这里的关键是[SQLAlchemy 子查询](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#using-subqueries)的概念。如果您将我原来的 Django 查询中的每个注释都视为一个子查询，那么这个概念就更容易理解了。还值得注意的是，这个查询非常快——比它（更简洁/神奇）Django 对应的查询要快许多数量级。希望这有助于其他对这个特定的 Django/SQLAlchemy 查询模拟感到好奇的人。

还要记住，您需要自己执行 ORM 对象的实际注释。在将对象列表发送到模板之前调用这样的简单函数就足够了：

```
def process(query):
    for obj, rating, review_count in query:
        obj.rating = rating
        obj.review_count = review_count
        yield obj 
```

# android - 如何使用媒体播放器在 android 应用程序中运行 .pls 文件？

> ID：14049644
> 
> 赞同：0
> 
> 时间：2012-12-27T05:12:14.333
> 
> 标签：android, android-mediaplayer

我有一个`.pls`在线文件，但是当我在代码中创建媒体播放器时，它会出错。

```
MediaPlayer mp = new MediaPlayer();
mp=MediaPlayer.create(getApplicationContext(),Uri.parse("PLS file link"));
mp.prepare();
mp.start(); 
```

请帮我运行`.pls`文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:36:12.173

Android`MediaPlayer`类不能直接处理 .pls 文件 - 它只能播放单个媒体文件。

如果您想使用 .pls 文件，您需要下载它，阅读代码中的内容并一次将每个 URL 传递给`MediaPlayer`一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T19:48:25.110

```
mediaPlayer = MediaPlayer.create(this, Uri.parse(link));
mediaPlayer.start(); 
```

这段代码将帮助您直接通过 MediaPlayer 类运行 .pls 链接。

# amazon-web-services - 厨师独奏解释

> ID：14049645
> 
> 赞同：2
> 
> 时间：2012-12-27T05:12:21.407
> 
> 标签：amazon-web-services, chef-infra

有人可以帮我理解厨师独奏吗？我仍然不明白我是否必须在我的机器上运行 chef-solo 来运行配置机器，或者我需要先配置一台机器并在我配置的新机器上安装 solo。我需要了解端到端流程。请帮助我更好地理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:39:07.620

您还可以使用 chef-solo 和 vagrant 来测试目标 linux 发行版在本地机器上的行为；但是，您的问题更多是关于 AWS 的端到端 - 所以我们开始吧。

端到端，您至少需要在目标机器上具有以下依赖项：

ruby、gem chef、ssh、git 或其他将您的代码获取到 vm 的方式。

你 ssh 进入机器，你得到你想在目标机器上使用的食谱，你运行 chef-solo 并使用一些参数至少指定一些属性，你的食谱的位置，以及一个包含一些食谱的运行列表或要应用于目标机器的角色。下面是获取 apt 食谱和 mongo 食谱的示例（[https://github.com/opscode-cookbooks/apt](https://github.com/opscode-cookbooks/apt)和[https://github.com/edelight/chef-mongodb](https://github.com/edelight/chef-mongodb)）...我将它们克隆到 /目标机器上的 opt/devops 位置。

```
chef-solo -c solo.rb -j node.json 
```

solo.rb 内容

```
file_cache_path "/opt/devops/log"
cookbook_path "/opt/devops/cookbooks" 
```

node.json 内容

```
{ 
"node": {
"vm_ip": [ "192.168.33.10" ],
"myProject": {
  "git_revision":"bzrDevel",
}
},
"run_list": ["recipe[apt]","recipe[mongodb]" ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:59:11.367

[Integrating AWS CloudFormation With Opscode Chef.pdf](https://s3.amazonaws.com/cloudformation-examples/IntegratingAWSCloudFormationWithOpscodeChef.pdf)中有关于如何在 AWS 环境中使用 Chef-Solo 的详细说明

> Chef Solo 可用于部署 Chef 食谱和角色，而不依赖于 Chef 服务器。Chef Solo 可以通过 Ruby Gem 包安装；但是，它需要安装许多其他依赖包。通过使用资源元数据和 AWS CloudFormation 帮助程序，您可以通过 Cloud-init 在基础 AMI 上部署 Chef Solo。

您可以使用上面 PDF 中提供的云形成，也可以自己创建文件并运行脚本（嵌入在此模板中）。

# batch-file - 驱动器所需的 DOS 批处理文件，如果

> ID：14049646
> 
> 赞同：0
> 
> 时间：2012-12-27T05:12:24.147
> 
> 标签：batch-file, dos

任何人都可以帮我处理批处理文件吗？

我有一个映射驱动器 Z:，这是我的批处理文件：

```
z:
cd Z:\KiwiTEMP\
ERASE /S /Q log12*.log 
```

我的问题是，如果由于某种原因映射驱动器不可用，则`ERASE`在 c: 驱动器上执行该命令，这会删除我所需的日志文件。

我试图弄清楚：

如果 Z: 存在：

```
cd Z:\KiwiTEMP\ 
ERASE /S /Q log12*.log
else exit or terminate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:40:31.817

使用此命令，它不应该转到 c: 驱动器，如果您在 c: 驱动器中也有相同的文件夹，请尝试重命名该文件夹的名称

z:

cd Z:\KiwiTEMP\

擦除 /S /Q log12*.log

# sql - ActiveRecord::Base.connection.execute(sql) 的结果 - PostgreSQL

> ID：14049653
> 
> 赞同：7
> 
> 时间：2012-12-27T05:14:13.680
> 
> 标签：sql, ruby, postgresql, activerecord

使用 ActiveRecord::Base Connection 类执行 SQL 语句后，如何查找 PostgreSQL 处理的记录数？

```
temp_sql = "UPDATE table_a SET column_a ='abc' WHERE column_b = 1"
result = ActiveRecord::Base.establish_connection(@db).connection.execute(temp_sql) 
```

或者你能建议更好的方法来做到这一点。请记住，上面的更新声明是一个简单的保持问题简短的声明。我真正的查询是“基于集合”的，涉及复杂的创建临时表、更新、插入语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T06:02:29.260

在 PG::Result 类中找到了答案。是`cmd_tuples` 方法；

```
temp_sql = "UPDATE table_a SET column_a ='abc' WHERE column_b = 1"
result = ActiveRecord::Base.establish_connection(@db).connection.execute(temp_sql)
number_of_records = result.cmd_tuples 
```

# html - 现场直播问题

> ID：14049657
> 
> 赞同：-5
> 
> 时间：2012-12-27T05:14:22.760
> 
> 标签：html

我写的不用担心，但在我的实时网站上显示的文字是“交易”。为什么？即使在本地它显示正确但在现场它不工作是什么原因请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:19:41.387

# upload - 有人能告诉我如何让这个脚本在开始上传过程之前而不是在文件上传之后检查密码吗？

> ID：14049665
> 
> 赞同：1
> 
> 时间：2012-12-27T05:15:52.447
> 
> 标签：upload, passwords

有人能告诉我如何让这个脚本在开始上传过程之前而不是在文件上传之后检查密码吗？我需要上传的一些文件很大，等到文件上传到它告诉我密码错误之前，这很糟糕。

感谢您的任何帮助，您可以提供。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
      <title>ES Simple Uploader</title>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
      <meta name="generator" content="handmade" />
        <style type="text/css">
        <!--
            body {
                font-family: Arial, Helvetica, sans-serif;
                font-size: 14px;
                background-color: #DDDDDD;
            }
            .cnt {
                text-align: center;
            }
            .cnt_welcome {
                font-size: 16px;
                font-weight: bold;
                text-align: center;
            }
            .cnt_powered {
                font-size: 14px;
                font-weight: bold;
                text-align: center;
            }
            .cnt_small {
                font-size: 12px;
                text-align: center;
                padding-top: 50px;
            }
            .head_line {
                background-color: #BBBBBB;
            }
            .main_table {
                border: solid 1px #9D9992;
                font-size: 13px;
            }
            h4 {
                font-size: 12px;
                color: #DD0000;
                text-align: center;
            }
            .button {
                border: 1px solid #55555;
                font-weight: bold;
            }
    -->
    </style>
    </head>

    <body>
    <?
    include("config.php");

    function path_options()
    {
     global $upload_dirs;
      $option = "";
      foreach ($upload_dirs as $path => $pinfo)
      {
        $option .= '<option value="'.$path.'">'.$pinfo["name"].'</option>';
      }
     return $option;
    }

    function check_vals()
    {
     global $upload_dirs, $err;
        if (!ini_get("file_uploads")) { $err .= "HTTP file uploading is blocked in php configuration file (php.ini). Please, contact to server administrator."; return 0; }
        $pos = strpos(ini_get("disable_functions"), "move_uploaded_file");
        if ($pos !== false) { $err .= "PHP function move_uploaded_file is blocked in php configuration file (php.ini). Please, contact to server administrator."; return 0; }
      if (!isset($_POST["path"]) || (strlen($_POST["path"]) == 0)) { $err .= "Please fill out path"; return 0; }
      if (!isset($upload_dirs[$_POST["path"]])) { $err .= "Incorrect path"; return 0; }
      if (!isset($_POST["pwd"]) || (strlen($_POST["pwd"]) == 0)) { $err .= "Please fill out password"; return 0; }
      elseif ($_POST["pwd"] != $upload_dirs[$_POST["path"]]["password"]) { $err .= "The upload password is incorrect"; return 0; }
      if (!isset($_FILES["userfile"])) { $err .= "Empty file"; return 0; }
      elseif (!is_uploaded_file($_FILES['userfile']['tmp_name'])) { $err .= "Empty file"; return 0; }
     return 1;
    }

    $err = ""; $status = 0;
    if (isset($_POST["upload"])) {
      if (check_vals()) {
        if (filesize($_FILES["userfile"]["tmp_name"]) > $max_file_size) $err .= "Maximum file size limit: $max_file_size bytes";
        else {
          if (move_uploaded_file($_FILES["userfile"]["tmp_name"], $upload_dirs[$_POST["path"]]["dir"].$_FILES["userfile"]["name"])) {
                    $status = 1;
                }
          else $err .= "There are some errors!";
        }
      }
    }

    if (!$status) {
      if (strlen($err) > 0) echo "<h4>$err</h4>";
    }
    else {
      echo "<h4>&quot;".$_FILES["userfile"]["name"]."&quot; was successfully uploaded.</h4>";
    }
    ?>
    <p class="cnt_welcome">Welcome to ES Simple Uploader v 1.1.</p>
    <p class="cnt">&laquo; <a href="http://www.energyscripts.com/Products/product2.html">Back to Product page</a> &laquo;</p>
    <p class="cnt">(Select folder, set it's password, then select a file to upload and click "Upload" button).
        <br />Note: 
            Folder: &quot;Images folder&quot;, Password: &quot;images&quot;;
            Folder: &quot;Docs&quot;, Password: &quot;docs&quot;;
            Folder: &quot;Common files&quot;, Password: &quot;common&quot;;
            Maximum file size: <?=$max_file_size/1024?> Kb.</p><br />
    <form enctype="multipart/form-data" action="index.php" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="<?=$max_file_size?>" />
    <table class="main_table" align="center">
      <tr>
        <td colspan="2" class="head_line">&nbsp;</td>
      </tr>
      <tr>
        <td>Folder:</td>
        <td><select name="path"><?=path_options()?></select></td>
      </tr>
      <tr>
        <td>Password:</td>
        <td><input type="password" name="pwd" style="width: 217px;" /></td>
      </tr>
      <tr>
        <td>Choose file:</td>
        <td><input type="file" name="userfile" style="width: 222px;" /></td>
      </tr>
      <tr>
        <td colspan="2" align="right"><input type="submit" name="upload" value="Upload" class="button" /></td>
      </tr>
    </table>
    </form>
    </p>
    <p class="cnt_powered">Powered by <a href="http://www.energyscripts.com" target="_blank">EnergyScripts</a></p>
    <p class="cnt_small">Find more power solution: <a href="http://www.energyscripts.com/Products/product1.html" target="_blank">ES File Upload &amp; Download Manager</a></p>
    </body>
    </html> 
```

# php - MySQL - 搜索精确的单词匹配和排序

> ID：14049669
> 
> 赞同：0
> 
> 时间：2012-12-27T05:16:42.447
> 
> 标签：php, mysql, database, web

**我的桌子上有以下内容**

最佳莱昂纳多迪卡普里奥电影

最佳塞缪尔·杰克逊 (Samuel L Jackson) 电影

最佳爱德华诺顿电影

动画电影

印度电影

印度食谱

印度市场

电影

我想搜索“印度电影”，结果应该是这样的

**印度电影**

**印度**食谱 **印度**市场

**最佳莱昂纳多**迪卡普里奥****电影****

 ****最佳塞缪尔·杰克逊 (Samuel L Jackson)**电影**

最佳爱德华诺顿**电影**

动画**电影**

我如何为此编写 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:51:27.620

您需要在这里使用全文索引搜索。

但仅表支持全文搜索`MyISAM`。

将`FULLTEXT`索引添加到您的列，然后使用以下查询：

**询问：**

```
SELECT * FROM table_name
WHERE MATCH (column_name)
AGAINST ('Indian Movies' IN BOOLEAN MODE) 
```

**结果：**

> **印度**电影
> **印度**食谱**印度**市场
> **电影**最佳莱昂纳多迪卡普里奥**电影**
> 最佳塞缪尔杰克逊**电影**
> 最佳爱德华诺顿**电影**
> 动画**电影**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T05:25:23.433

you need to split the string...

```
$raw_results = mysql_query("SELECT * FROM movie WHERE `title` LIKE '%".$query."%' OR `title` LIKE '%".$query1."%'") or die(mysql_error());

// movie is the name of our table

// '%$query%' and '%$query1%' is what we're looking for, % means anything, for example if $query is Indian Movies
// it will match "Indian Movies", "Indian Recipes Indian Market", "Movies Best Leonardo DiCaprio Movies", if you want exact match use `title`='$query' 
```****

# asp.net - 根据角色显示所有 HTML 元素 - 需要优化的解决方案

> ID：14049671
> 
> 赞同：0
> 
> 时间：2012-12-27T05:16:51.810
> 
> 标签：asp.net, html, database, controls, visible

我正在使用 ASP.Net 进行 Web 开发。我这里有情况。假设我的页面上有许多 HTML/ASP.Net 控件，并且我必须根据登录用户的角色设置每个控件的可见性。为此，我正在执行以下操作：

1.  存储每个 Function-Name 和 Role 组合是 DB
2.  在渲染期间，检查每个 HTML/ASP.Net 控件的角色权限。

例如：显示如下内容：

```
<asp:Label runat="server" id="Lbl1" visible='<%=CheckVisibility("Display","Admin")%>'>

public bool CheckVisibility(string FunctionName, string RoleName){
  // checks for db entry and returns bool value
} 
```

问题是，我必须为所有控件执行此操作。有没有其他优化的方法可以做到这一点？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:25:14.660

Given only your description of what you're trying to solve, I would suggest you create your own controls which inherit from the built-in ones and add some properties to them. Then the controls can do the visibility check themselves. Something like

```
namespace StackOverflowTest
{
  public class Label : System.Web.UI.WebControls.Label
  {
    public string DisplayRoles { get; set; }

    protected override void OnPreRender(EventArgs e)
    {
      base.OnPreRender(e);

      Visible = PermissionHelper.CheckPermission("Display", DisplayRoles.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries));
    }
  }

  public static class PermissionHelper
  {
    public static bool CheckPermission(string function, string[] allowedRoles)
    {
      // TODO: hit some sort of cache, so you don't make a bajillion queries to the DB
      return true;
    } 
  }
} 
```

And then if you put this in your web.config (sorry, can't figure out how to do proper XML formatting here): `<system.web> <pages> <controls> <add tagPrefix="sot" assembly="StackOverflowTest" namespace="StackOverflowTest"/> </controls> </pages> </system.web>`

You can add this to your markup: `<sot:Label ID="AdminLabel" runat="server" Text="Bind this in OnLoad/!IsPostback or something" DisplayRoles="Admin,Management" />`

This is just one of the many ways you can do this. It all depends on the requirements, of course. But I'm pretty sure you'll need your own classes for controls to have the possibility of making it manageable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:27:46.217

C# code:

```
public enum previlageType
{
    superAdminPrevilages=1,
    partnerPrevilages = 2,
    dealerPrevilages = 3,
    customerPrevilages=4

}

if ((previlageType)Enum.Parse(typeof(previlageType), Session["previlageType"].ToString())== previlageType.partnerPrevilages)
{
    accordion.Visible = false;
} 
```

ASP code:

```
<div id="accordion" runat="server">
Hello World, I'l be Hidden if a person with partner previlages is logged in. BUt will be visible if superadmin or any person except Partner logs in.
</div> 
```

Hope it helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T14:57:12.480

如果您使用的是母版页，则可以在加载时获取所有子页面控件（获取 contentplaceholders，然后获取 contentplaceholder 控件）。

然后，当您拥有所有控件名称时，在您的表上进行查找并在需要时将其可见性设置为 false。

（下面是vb，但翻译应该很容易。）

```
 For Each cp As String In Me.ContentPlaceHolders
            For Each ctl As Control In Me.FindControl(cp).Controls
                If adminonly.Contains(ctl.ID) Then
                    ctl.Visible = False
                End If
            Next
        Next 
```

# android - 避免编辑文本中没有填写整数时出现异常

> ID：14049673
> 
> 赞同：0
> 
> 时间：2012-12-27T05:16:58.803
> 
> 标签：android, android-edittext

我正在使用 Android 应用程序，我有 5 个编辑文本和 1 个按钮来对这些编辑文本中的整数求和。有时用户可以让几个编辑文本空白。问题是当用户让它空白时，会出现异常，我不知道如何处理它。这些是我的代码

```
try
    {
        if (qty1 != null)
        {
            int jml1 = Integer.parseInt(qty1.getText().toString());
            item1 = hrg1 * jml1;
        }
        else 
        {
            qty1.setText("0");
        }
        if (qty2 != null)
        {
            int jml2 = Integer.parseInt(qty2.getText().toString());
            item2 = hrg2 * jml2;
        }
        else 
        {
            qty2.setText("0");
        }
        if (qty3 != null)
        {
            int jml3 = Integer.parseInt(qty3.getText().toString());
            item3 = hrg3 * jml3;
        }
        else 
        {
            qty3.setText("0");
        }
        if (qty4 != null)
        {
            int jml4 = Integer.parseInt(qty4.getText().toString());
            item4 = hrg4 * jml4;
        }
        else 
        {
            qty4.setText("0");
        }
        if (qty5 != null)
        {
            int jml5 = Integer.parseInt(qty5.getText().toString());
            item5 = hrg5 * jml5;
        }
        else 
        {
            qty5.setText("0");
        }
int hasil = item1 + item2 + item3 + item4 + item5;
        Toast.makeText(getApplicationContext(), "Berhasil", Toast.LENGTH_LONG).show();
        total.setText(String.valueOf(hasil));
    }
    catch(Exception e)
    {
        Toast.makeText(getApplicationContext(), "Quantity can't be empty. Please type item quantity", Toast.LENGTH_LONG).show();
    } 
```

我尝试使用 if 设置条件，但这并没有太大帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:18:57.383

试试这个，

```
if (qty1.getText().toString() != null && !(qty1.getText().toString().equals("")))
        {
            int jml1 = Integer.parseInt(qty1.getText().toString());
            item1 = hrg1 * jml1;
        } 
```

代替，

```
if (qty1 != null)
        {
            int jml1 = Integer.parseInt(qty1.getText().toString());
            item1 = hrg1 * jml1;
        } 
```

此条件 if`(qty1 != null)`检查您的 editText 是否为空，但不检查其中包含的数据。

对所有其他 editText 值重复相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:20:01.490

把这个条件

```
String s1= qty5.getText().toString().trim();

if(TextUtils.isEmpty(s1)) ///// isEmpty() <-----
{
 // error message
}
else
{
 // your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:19:14.130

如果`qty1`你是edittext，那么你需要从你的edittext中获取字符串来检查它是否是`null`。

所以像这样改变你所有的edittexts代码

```
 if (qty1.getText().toString() != null && qty1.getText().toString().equals(""))
    {
        int jml1 = Integer.parseInt(qty1.getText().toString());
        item1 = hrg1 * jml1;
    }
    else 
    {
        qty1.setText("0");
    } 
```

# android - Android Systemproperties.set 不起作用

> ID：14049675
> 
> 赞同：3
> 
> 时间：2012-12-27T05:16:59.873
> 
> 标签：android, android-camera

我想在*framework/base/core/Java/Android/hardware/Camera.Java*中添加一个属性 cam.sound以便我可以用来打开或关闭相机快门声音，但似乎该`Systemproperties.set`功能没有工作。以下是我的测试步骤：

*   导入 Android.os.SystemProperties；
*   调用函数 whit SystemProperties.set("cam.sound", "on");

之后， 的值`cam.sound`没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-14T02:28:44.370

我认为您需要前缀名称“persist.sys”。

然后 AndroidManifest.xml 添加 (android:sharedUserId="android.uid.system")

然后添加 Android.mk (LOCAL_CERTIFICATE :=platform)

# javascript - 将新内容加载到 HTML 页面

> ID：14049676
> 
> 赞同：1
> 
> 时间：2012-12-27T05:17:02.590
> 
> 标签：javascript, html

我有一个带有一些 HTML 内容的 javascript 变量。

我想用这个新的 HTML 内容替换当前的 html 页面。

**示例**：`var html = '<html> <p> new content </p> </html>'`

我想将变量的内容加载到我的 HTML 中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:18:26.503

```
document.body.innerHTML = html; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T05:20:30.730

```
var html = "<p>Hi</p>";
document.getElementsByTagName("body")[0].innerHTML = html; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T05:21:26.630

要加载新内容，请使用：-

```
document.body.innerHTML = html; 
```

# matlab - Matlab预分配，猜大矩阵还是小矩阵？

> ID：14049677
> 
> 赞同：4
> 
> 时间：2012-12-27T05:17:06.127
> 
> 标签：matlab, memory-management, matrix

根据这个[问题](https://stackoverflow.com/questions/14021238/how-can-i-sort-the-elements-of-a-cell)，我应该尝试使用 Preallocation is Matlab。

现在我有一种情况，我无法计算要预分配的矩阵的确切大小。我能猜出大小。

假设矩阵的实际大小是 100，但我不知道。嘘

哪种方案更有效：

1.  我应该奢侈吗？我猜是一个大矩阵，最后我删除了多余的行。
2.  我应该小气吗？我猜尺寸很小，如果错了，我会添加新行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T07:31:02.733

在我看来，答案比@natan 描述的要复杂一些。我认为他的回答没有考虑两个因素：

1.  可能需要的内存副本：当您低估矩阵大小并重新分配它时，应将其所有旧值复制到新分配的位置。

2.  内存块的连续性：有时 Matlab 能够在旧矩阵的末尾连续分配新内存。原则上，在这种情况下，不需要将旧值复制到新位置 - 因为它与旧值相同，只是更大。**但是**，如果将**行**添加到 2D 矩阵，即使在这种情况下也需要复制内容，因为 Matlab 在内存中以行优先方式存储矩阵。

所以，我的回答是这样的：

首先，您究竟不知道矩阵的大小：如果您知道一维 - 将其设为矩阵的行数，因此您只需要更改列数。这样，如果您已经存储的数据需要被复制，它将被复制到更大的块中。

其次，这取决于您拥有多少可用 RAM。如果您不缺 RAM，那么高估也没有错。

但是，如果您缺少 RAM，请考虑低估。**但是**当你重新分配时，在每次迭代时增加新的块大小：

```
BASIC_SIZE = X;  % first estimate
NEW_SIZE = Y;    % if need more, add this amount
factor = 2;      
arr = zeros( m, BASIC_SIZE ); % first allocation, assuming we know number of rows
while someCondition
    % process arr ...
    if needMoreCols
        arr(:, size(arr,2) + (1:NEW_SIZE) ) = 0; % allocate another block
        NEW_SIZE = round(NEW_SIZE * factor);  % it seems like we are off in estimation, try larger chunk next time factor should be > 1
    end
end
arr = arr(:, 1:actualNumOfCols ); % resize to actual size, discard unnecessary columns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T06:22:59.777

+1 for the interesting question.

**EDITED Answer:** From a little experimental study at first it seems better to add rows later, but it now seems more efficient overesrimated and preallocate again when you have the info of the correct size . I started with matrix size 3000 and guessed an error of 10% in the size estimation, see below:

```
 clear all
    clc
    guess_size=3000;
    m=zeros(guess_size);
    %1\. oops overesrimated, take out rows
    tic
    m(end-300:end,:)=[];
    toc

    %1b. oops overesrimated,  preallocate again
    tic
    m=zeros(guess_size-300,guess_size);
    toc

    %2\. oops overesrimated, take out cols
    m=zeros(guess_size);
    tic
    m(:,end-300:end)=[];
    toc

    %2b. oops overesrimated,  preallocate again
    m=zeros(guess_size);
    tic
    m=zeros(guess_size,guess_size-300);
    toc

    %3\. oops underesrimated, add rows
    m=zeros(guess_size);
    tic
    m=zeros(guess_size+300,guess_size);
    toc

    %4\. oops underesrimated, add cols
    m=zeros(guess_size);
    tic
    m=zeros(guess_size,guess_size+300);
    toc

Elapsed time is 0.041893 seconds.
Elapsed time is 0.026925 seconds.
Elapsed time is 0.041818 seconds.
Elapsed time is 0.023425 seconds.
Elapsed time is 0.027523 seconds.
Elapsed time is 0.029509 seconds. 
```

Option 2b and 1b are slightly faster than underestimating, so if you can, better **overestimate** and then preallocate again. It is never efficient to delete rows from an array. Also adding columns seems slightly more efficient, but this is just a quick and dirty job. See @Shai detailed answer for the inner workings...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T08:48:36.943

除了其他教育性答案外，简短的简短版本：有三种情况：

1.  数组的大小相对较小（最多千字节）-> 这并不重要。
2.  数组很大，但您不受系统内存量的限制 -> 高估。
3.  数组很大，并且您受系统内存量的限制 -> 执行 Shai 的建议。

# testing - 如何在仅使用一台机器的情况下模拟在不同硬件上运行的代码？

> ID：14049679
> 
> 赞同：5
> 
> 时间：2012-12-27T05:17:32.247
> 
> 标签：testing, resources, benchmarking, performance-testing, emulation

正如标题所说，我正在寻找一段代码在不同硬件设置上的近似性能。有什么工具可以做到这一点吗？

我希望通过限制进程可用的资源来运行我的代码并执行测量。我想控制诸如可用总内存以及 cpu 使用率之类的东西，但如果我有更多的粒度会更好。是否有任何工具可以让我模拟不同速度的 RAM、限制 cpu 的速率（比如 X gigaflops）、减慢磁盘读取速度等？

我已经在查看 linux 中的 setrlimit 命令，但我认为它不会让我模拟延迟之类的东西。我考虑过使用虚拟机来运行代码并调整内存和 CPU，但我不确定它是否足够精细。我还考虑了一些事情，比如挂钩一些系统调用并在允许读/写系统调用之前旋转 x 纳秒，但感觉有点笨拙。另一个问题是此代码主要在 Windows 上运行，如果可能的话，最好在 Windows 上执行此操作。

只是为了一些背景，我试图提供一些相当准确的估计，比如不同硬件设置上的运行时间和资源利用率，而不必实际购买、组装和测试所述硬件。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:03:13.540

If you wish to get very detailed control of every possible part of a machine, use a software emulated machine [such as Bochs](http://bochs.sourceforge.net/). Bochs will emulate, in software, an x86 CPU, hard drive, video card, network card, everything.

In order to do what you want to do you would need to build your own version of Bochs with changes to the emulator to control the speed of the different pieces.

# ios - UIViewController removeFromSuperview 错误

> ID：14049682
> 
> 赞同：4
> 
> 时间：2012-12-27T05:18:05.003
> 
> 标签：ios, uiviewcontroller

我有一个`UIViewController`然后当我长按`self.view`它时会弹出一个弹出窗口（`MenuViewController`）。但是当我尝试删除弹出窗口时，`removeFromSuperview`它仍然出现

[您可以通过此http://www.youtube.com/watch?v=nVVgmeJEnnY](http://www.youtube.com/watch?v=nVVgmeJEnnY)查看我的问题的更多详细信息

视图控制器.m

```
#import "MenuViewController.h"
@interface ViewController () {
    MenuViewController *menu;
}
....
- (void)viewDidLoad
{
    ....
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(albumButtonPressed : ) name:@"albumButtonPressed" object:nil];
    ....
}

....

-(void)albumButtonPressed : (NSNotification*) notification {
    UIImagePickerController *photoPicker = [[UIImagePickerController alloc] init];
    photoPicker.delegate = self;
    photoPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    [self presentModalViewController:photoPicker animated:YES];
}

...

-(void)handleLongPress:(UILongPressGestureRecognizer*)recognizer {
    menu = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];
    if (self.imageView.image != nil) {
        menu.imageAdded = YES;
    }
    [self.view addSubview:menu.view];
} 
```

菜单视图控制器.m

```
-(IBAction)albumButtonPressed:(id)sender {
    [self.view removeFromSuperview];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"albumButtonPressed" object:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:32:43.203

```
[self.view removeFromSuperview]; 
```

你这是什么意思？？？？？？删除主视图！！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T05:34:03.133

撇开我对不应用正确的视图控制器包含的保留不谈，问题是你`handleLongPress`将被多次调用不同的`recognizer.state`值，一次`UIGestureRecognizerStateBegan`又一次地调用`UIGestureRecognizerStateEnded`. 您应该检查手势的状态，例如：

```
-(void)handleLongPress:(UILongPressGestureRecognizer*)recognizer {
    if (recognizer.state == UIGestureRecognizerStateEnded) {
        menu = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];
        if (self.imageView.image != nil) {
            menu.imageAdded = YES;
        }
        [self.view addSubview:menu.view];
    }
} 
```

* * *

**原答案：**

我建议`NSLog`在你的代码中放置一个或断点，`removeFromSuperview`看看你是否能到达那段代码。

这里有一些明显的问题。具体来说，您没有添加正确关联的`MenuViewController`视图`handleLongPress`。如果你想要一个带有它自己的控制器的子视图，你必须使用容器（这只适用于 iOS 5 和更高版本）。在遏制中，您有关键方法，例如[`addChildViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)，等等。请参阅*View Controller Programming Guide*中的[Creating Custom Container View Controllers](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)或参阅[WWDC 2011 - Implementing UIViewController Containment](https://developer.apple.com/videos/wwdc/2011/?id=102)。而且，顺便说一句，您还保持对 的强引用，因此即使您成功删除了它的视图，您也会泄漏控制器。*`MenuViewController`*

 *花一点时间浏览收容文件/视频，我想你会想重新审视你是如何展示你的菜单的。这是密集阅读，但值得真正理解。遏制是强大的，但必须做对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T06:43:34.303

而不是直接使用

```
[self.view removeFromSuperview]; 
```

采用

```
 [[self.view.superview subviews] makeObjectsPerformSelector:@selector(removeFromSuperview) withObject:self.view]; 
```*

# mysql - MySQL 非运算符

> ID：14049687
> 
> 赞同：0
> 
> 时间：2012-12-27T05:18:28.283
> 
> 标签：mysql, syntax, phpmyadmin, where, xeround

我正在使用 Xeround 将本地托管的 MySQL 数据库迁移到基于云的 MySQL 数据库。我正在运行一个测试脚本，它使用左连接来形成一个表，然后运行两个选择语句

-- 一个 VAL 和 KVAL 字段相等，一个返回这个集合的补码（VAL 和 KVAL 集合不相等）。

使用 (VAL=KVAL) 作为 where 语句来获取 VAL 和 KVAL 匹配的记录没有问题。我能够在两种设置中获取 VAL=KVAL 的记录。我可以使用 where 语句在本地设置中获得补码：VAL!=KVAL OR (KVAL IS NULL)。

但是，当我在 Xeround 设置中运行相同的 Select/Where 语句时，它返回一个 NULL 集。如果有帮助，Xeround 数据库使用 PHP MyAdmin。我也玩过 <>，在原始 where 语句之外放置一个感叹号或 not 语句。这应该是相当直截了当的。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:11:57.830

的补码条件

```
WHERE ( val = kval ) 
```

是：

```
WHERE ( val <> kval  OR  val IS NULL  OR  kval IS NULL ) 
```

# css - 按钮图像无法正常工作

> ID：14049689
> 
> 赞同：2
> 
> 时间：2012-12-27T05:18:34.337
> 
> 标签：css, yii, yii-events, cbuttoncolumn

我最近在`YII`.I 中的编辑按钮中添加了一个图像。我执行以下操作，

```
'class'=>'CButtonColumn',
        'header' => 'Edit',
        'template' => '{Edit}',
        'buttons' => array(
            'Edit' =>array(
            'label' => 'Edit',
            'imageUrl'=>Yii::app()->request->baseUrl.'/images/Actions-document-edit.ico',
           )); 
```

按钮的 css 是这样的，

```
td.button-column a img {
    max-height:25px;
    max-width:25px;
    } 
```

**图片Actions-document-edit.ico**的实际大小为**25*25。** 我在这里有一个情况，我在**Google Chrome**中有一个**25*25**的图像，在**mozilla firefox中有一个****2*2**的图像。帮助我在两种浏览器中实现正确的图像格式。

 ******![谷歌浏览器](../Images/e53f1a8428278e91919278aa30edeaf3.png) ![火狐浏览器](../Images/5943e4331bf28e7f8037956330d6c62a.png)

并提出分页问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:29:24.113

分页问题已解决

```
.pager ul.yiiPager li.page:after{display: inline-block !important} 
```

但是仍然遇到图像问题...请帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:46:20.770

而不是 .ico 尝试使用 .JPEG 或 .png 或 .gif 图像******

# c# - 使用 .net 发送电子邮件或在 SQL 表中触发哪个更好

> ID：14049691
> 
> 赞同：0
> 
> 时间：2012-12-27T05:18:52.547
> 
> 标签：c#, .net, sql, sql-server

我们有这个模块，用户可以在其中注册，他们需要确认他们的电子邮件地址。

目前我使用 .NET 发送电子邮件。因此，添加记录后，我现在将调用我的电子邮件方法。但我注意到有时电子邮件功能确实会收到超时错误，并且由于我捕获了所有异常，因此该错误会呈现给用户。

我想要的是在后台发送电子邮件。如果有任何邮件连接超时，电子邮件方法将重试发送电子邮件可能一两分钟。我正在考虑使用 SQL 邮件来实现这一点。但我不确定它是否是最好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T05:35:14.727

你有几个选择：

1.  使用[SQL Server 数据库邮件](http://msdn.microsoft.com/en-us/library/ms175887%28v=sql.105%29.aspx)来执行有关电子邮件排队和发送的繁重工作。应用程序仍将负责构建消息并将其发送到数据库。通过单独的 SMTP 服务器进行中继（直接在 SQL 机器上安装 SMTP 服务可能不是一个好主意）。

2.  使用来自您的 Web 应用程序的[异步电子邮件方法](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)`SmtpMail.SendAsync()`，例如. 这将允许您在不阻止用户（或与用户交互）的情况下处理错误，但它并不持久。如果您的 Web 进程重新启动，则操作将丢失。

3.  使用 Windows 服务。这将是一个简单的、独立的应用程序，它只是监视数据库中的新电子邮件任务和/或从 Web 应用程序发送需要执行任务的消息。

使用选项#2`SendAsync()`将是最快的实现。根据您的需要，这可能就足够了。

选项#1 不应该需要更多的努力。当您需要围绕收件人列表和电子邮件内容实施复杂的业务逻辑时，选项 #3 真的很出色。也可以将选项 #1 和 #3 组合起来（请参阅评论中@RemusRusanu 和我之间的对话）。

使用选项 #1 和 #3，如果环境出现故障、服务重新启动或发生错误，您将不会丢失任何数据或无法发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:33:24.147

而是管理 .net 应用程序中的超时。如果触发器中存在问题或超时，您的数据可能不会被提交。而是让数据库完成数据事务，并从您的 .net 应用程序中检查状态。

我不认为有一个明确的答案，但这将是我的偏好。

# .net - 当目标 CPU 是“Any”并且程序集有两个版本 x32 和 x64 时会发生什么？

> ID：14049693
> 
> 赞同：3
> 
> 时间：2012-12-27T05:19:01.507
> 
> 标签：.net, visual-studio, sqlite, .net-assembly, cpu-architecture

假设我们有一个针对*Any CPU*的应用程序，但该应用程序使用了具有 32 位和 64 位两种风格的第三方程序集。必须使用它们上的哪一个？

如果“任何”选项在 32 位和 64 位中运行应用程序，我怎样才能给它两个版本的程序集？

我的具体需要是一个 .NET [SQLite](http://en.wikipedia.org/wiki/SQLite)驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:37:21.997

真的很简单：

*   如果您将应用程序定位为“任何 CPU”，在所有条件相同的情况下，该应用程序可以在 32 位或 64 位系统上运行。

*   如果您的“任何 CPU”应用程序依赖于 32 位或 64 位 dll，如果它试图在缺少依赖项的系统上运行，它将失败。

*   如果您想“到处运行”，那么您最好的选择可能是针对 32 位（而不是“任何 CPU”）。除非您对 64 位有特殊要求，否则您真的不需要 64 位。

*   如果您在 64 位环境中运行您的应用程序时遇到“BadImageExceptions”，您可能希望考虑“自定义操作”：

    [http://adamhouldsworth.blogspot.com/2010/10/64bit-custom-actions.html](http://adamhouldsworth.blogspot.com/2010/10/64bit-custom-actions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:35:22.373

因为您最有可能静态引用程序集，所以您将需要两个版本的应用程序 - 一个编译为 x86，一个编译为 x64。

我不是特别了解 Sqllite 驱动程序，但通常使用 x86 版本的驱动程序就足够了，它仍然可以通过 WOW32 仿真机制在 x64 系统上运行。这意味着您可以只编译一个版本 (x86) 以安装到 x86 和 x64 系统上（正如 Mark Hall 在上[一个问题](https://stackoverflow.com/a/14049654/109702)中提到的那样）。如果您要使用 x64 特定功能（如更大的数据类型、更多可用的 RAM 等），您只需要针对 x64 进行编译。

# artificial-intelligence - 在哪里可以找到为聊天机器人创建 AIML 文件的资源？

> ID：14049695
> 
> 赞同：1
> 
> 时间：2012-12-27T05:19:07.613
> 
> 标签：artificial-intelligence, chatbot, aiml

我正在尝试构建一个自定义聊天机器人，但在寻找 AIML 创建指南和资源时遇到了困难。我想要的是一种使用标签和谓词的手册。任何建议！真的很赞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:34:14.600

[**从alicebot.org**](http://www.alicebot.org/documentation/)上的“马口”或更确切地说是 Alice 的口中获取它；-)
您可能会发现[***AIML Tag 参考手册***](http://www.alicebot.org/documentation/aiml-reference.html)与您的任务特别相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-19T20:19:27.710

如果你是一个完全的初学者，那么请参考[TutorialsPoint](http://www.tutorialspoint.com/aiml/)的网站了解基本的标签。

如果现在完成它，您可以查看其他人的代码以供参考并创建自己的聊天机器人。您可以[在此处查看一些文件](http://www.mitsuku.com/)。

转到免费的目标文件并参考它们。

您可以使用以下命令开始构建您的机器人

*   使用 pyaiml 解释器，您可以从 sourceforge 网站下载它
*   您可以使用程序从 GitHub 下载其 zip 文件
*   您也可以使用 pandorabot 网站进行构建。它托管聊天机器人。

祝你好运。

# android - Leadbolt 和 admob 中介的问题

> ID：14049698
> 
> 赞同：0
> 
> 时间：2012-12-27T05:19:29.940
> 
> 标签：android

我正在尝试将铅螺栓的自定义横幅与 admob 中介集成。我按照[横幅教程](https://developers.google.com/academy/apis/ads/mobile-ads-sdk/mediation/custom-events/banners)中的说明创建了一个 CustomAd 类，并将参数设置为横幅 Leadbolt 仪表板中的 ID # 部分。我将 xml 中的广告单元 ID 从我的发布商 ID 更改为中介 ID。我在 AdMobCustomEvent 中将中介设置为 100%，但出现错误：

```
Invalid unknown request error: Cannot determine request type. Is your ad unit id correct? 
```

基本上我是否需要更改 CustomAd 类中的任何代码或向我的其他类添加任何额外代码才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:21:57.130

您是否集成了来自leadbolt的sdk？如果不下载 sdk/.jar 文件并像使用 admob 一样集成它。[https://developers.google.com/mobile-ads-sdk/ad-network-mediation](https://developers.google.com/mobile-ads-sdk/ad-network-mediation)

# iphone - Xcode 无法在所选设备上运行项目

> ID：14049699
> 
> 赞同：1
> 
> 时间：2012-12-27T05:19:29.583
> 
> 标签：iphone, xcode, macos

我从我的团队那里得到了这个项目，当我重新启动系统时，我正在处理它，我的 Xcode 没有运行该项目，但我能够轻松运行其他项目....给我看

“无法在选定的目标上运行 - 选定的目标不支持构建选定软件的体系结构。切换到支持该体系结构的目标以运行选定的软件。” 如果我运行原始项目它运行良好，那么我必须再次复制并粘贴我在项目中所做的代码，然后它运行良好，但是当我第二天打开我的 Mac 时它没有运行，我必须再次从原始项目开始，发生了什么我不知道为什么在重新启动或关闭后项目无法运行。

我在 iMac 21.5 英寸上使用 Xcode 4.5.2 - 软件 OS X 10.8.2 (12C60)(Mountain Loin)

处理器 2.5 Ghz Intel Core i5，内存 4 GB 1333 MHz DDR3。

项目目标是 iOS SDK 6.0（在 iOS 6 模拟器上）。

不在模拟器和设备上运行。

有时只是在模拟器上运行，而不是在设备上运行。

我试过：重新启动Mac。清除派生数据。重新安装 Xcode。

但仍然无法弄清楚..没有任何帮助..请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:42:41.870

我认为，如果项目发现一些缓存内存问题，那么在重新启动系统后，它有时会开始正常工作，或者如果相同的项目具有不同的目标并且您正在运行一些微小的更改，那么它有时会挂在设备或模拟器中我们必须关闭设备并重新启动，然后才能正常工作。如果**项目代码在 iOS 5.0 中，并且 IPod/iPhone 设备操作系统是 6.0，则它不会显示在设备部分以供运行。为此，您首先必须使用 ios 6.0 将设备运行到 xcode，然后它才能正常工作。但是在这里，您必须注意，每次关闭后，您都必须先使用 xcode 6.0 运行设备。**但在你的情况下，一些我不清楚的构建目标问题。因此，如果您提供错误的详细信息，那么它将很容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:29:47.317

检查 Build Settings > Architectures 并将所有配置文件的 Architectures 设置为 Standard (armv7) 或 ${ARCHS_STANDARD_32_BIT}。

将 Base SDK 设置为最新的 iOS()。

对于所有配置文件，将“仅构建活动架构”设置为“否”。

将所有配置文件的有效架构设置为 armv6 armv7。您可能需要添加任何一个，具体取决于已经可用的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T08:52:54.177

我已经使用以下步骤解决了这个问题。

关闭 Xcode

从设备中删除应用程序

重启设备

然后重新运行应用程序

它工作正常..

# android - print `this` variable in android

> ID：14049706
> 
> 赞同：9
> 
> 时间：2012-12-27T05:20:14.090
> 
> 标签：android, logging, this

sometimes printf("%p", this) helps to see different instances.

What's the equivalent of that in android?
(to print out address of `this` variable or something unique(it may not be `address`) to the instance)

It seems I can `new` interface like `OnTouchListener` then, how do I print something to differentiate the different instances of them?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T05:25:00.240

Something like this should do it:

```
android.util.Log.i("Instance", "This is: " + this); 
```

By default, the `toString` implementation of `Object` will print the class type plus a hash code which can be considered somewhat equivalent to the *this pointer* in C++.

> The `toString` method for class `Object` returns a string consisting of the name of the class of which the object is an instance, the at-sign character `'@'`, and the unsigned hexadecimal representation of the hash code of the object. In other words, this method returns a string equal to the value of:
> 
> ```
> getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

If an object provides a different implementation of `toString()`, like for instance `String` does, then you can use the above canonical implementation of the base `toString()` method to get the same results.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:54:30.397

To get something distinct to the instance, you should use `System.identityHashCode(this)`. It returns what the default implementation of `.hashCode()` in `Object` returns (which may have been overridden in subclasses, so that's why you shouldn't use `.hashCode()` directly), which, according to the documentation, is "As much as is reasonably practical" distinct for distinct objects.

# objective-c - How to Query Facebook uid's for User Friends' Likes

> ID：14049717
> 
> 赞同：1
> 
> 时间：2012-12-27T05:21:19.997
> 
> 标签：objective-c, facebook-graph-api, facebook-fql

I have created an application in Xcode 4.5\. It incorporates a Facebook login process, a query of my friends and their basic info and some newsfeed publishing processes successfully. However, I am having an issue in trying to query which of my friends have "liked" a certain Facebook object, in this case, a photo. Here is what I have done thus far:

1.  Requested the following permissions in the - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI method:user_about_me, read_friendlists, friends_likes, read_stream, friends_likes, user_likes, friends_photos,user_photos.

2.  I went on Facebook and found a photo that has been liked by some of my Facebook friends. I then investigated the id of the photo by going to [https://graph.facebook.com/?ids=https://www](https://graph.facebook.com/?ids=https://www).*urlToFBPhoto*

3.  I used the following query code (as per the facebook developer page regarding such queries: [url](https://developers.facebook.com/docs/reference/fql/like/)) SELECT user_id FROM like WHERE object_id="10152365284110475".

4.  I was expecting that when I did an NSLog of the resulting data from this query, I would get uids of the few friends who I know like the photo. But instead, the query returned no results whatsoever.

For clarity, here is the full query code I used:

```
- (IBAction)getFriendLikes:(id)sender 

NSString *objectID = @"10152365284110475"; //object id of a friend's FB photo

NSString *query = [NSString stringWithFormat:

@"{"
@"'friendlikes':'SELECT user_id FROM like WHERE object_id=%@'," //no data
//@"'friends':'SELECT uid2 FROM friend WHERE uid1 = me()'," //returns data
//@"'friendinfo':'SELECT uid, name, sex, pic_big, pic_square FROM user WHERE uid IN 
//(SELECT uid2 FROM #friends)'," //returns data
                   @"}",objectID];

NSDictionary *queryParam = [NSDictionary dictionaryWithObjectsAndKeys:
                            query, @"q", nil];

[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:queryParam
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) {
                          if (error) {
                              NSLog(@"Error: %@", [error localizedDescription]);
                          }     else {
                               NSLog(@"Result: %@", result);
                          }

                          NSArray *friendInfo =  (NSArray *) [[[result 
                                                        objectForKey:@"data"]
                                                               objectAtIndex:1]

                                                objectForKey:@"fql_result_set"];

                          [DataController dc].fbArray = nil;
                          [DataController dc].fbArray = friendInfo;

                          //post callback tasks

                      } ];
           } 
```

If anyone can offer any assistance I would greatly appreciate it!

# asp.net - user control doesn't get displayed in another user control

> ID：14049720
> 
> 赞同：0
> 
> 时间：2012-12-27T05:21:26.230
> 
> 标签：asp.net, vb.net

i have made a user control as report .Now this control has a button on whose click another user control is being called.the values gets passed correctly,also gets binded to the grid ..but finally the second control doesn't get displayed on the screen .I can't paste my code here since it is very long.am i missing out nothing for interaction between two user controls?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:21:35.487

尝试检查 BringToFront 方法，看看这个[链接](http://social.msdn.microsoft.com/forums/en-us/winforms/thread/B977EB66-D8A5-4CC6-AB83-38E0C80C71D3)

# c# - BlockingCollection Producer Consumer 中的 Finalize 与 IDisposable

> ID：14049721
> 
> 赞同：0
> 
> 时间：2012-12-27T05:21:27.300
> 
> 标签：c#, multithreading, producer-consumer

我有一个基于 BlockingCollection 的带有生产者消费者模式的简单记录器（代码如下）。

```
public class Logger
{
    public Logger()
    {
        _messages = new BlockingCollection<LogMessage>(int.MaxValue);
        _worker = new Thread(Work) {IsBackground = true};
        _worker.Start();
    }

    ~Logger()
    {   
        _messages.CompleteAdding();
        _worker.Join();                 // Wait for the consumer's thread to finish.
        //Some logic on closing log file
    }

    /// <summary>
    /// This is message consumer thread
    /// </summary>
    private void Work()
    {
        while (!_messages.IsCompleted)
        {
            //Try to get data from queue
            LogMessage message;
            try
            {
                message = _messages.Take();
            }
            catch (ObjectDisposedException) { break; }    //The BlockingCollection(Of T) has been disposed.
            catch(InvalidOperationException){ continue; } //the BlockingCollection(Of T) is empty and the collection has been marked as complete for adding.

            //... some simple logic to write 'message'
        }
    }
} 
```

问题是应用程序并没有立即结束。结束一个应用程序需要 20-40 秒，如果我在中间使用调试器暂停它，我会看到：
1\. GC.Finalize 线程设置在 _worker.Join();
2\. _worker 线程在 _messages.Take() 上。

我会等待 _messages.Take() 在 _messages.CompleteAdding(); 之后结束。但看起来不是。

这种终结有什么问题，在这种情况下如何更好地终结工作线程？

PS 我可以简单地删除 _worker.Join() 但随后 Work() 可以向关闭的文件写入一些内容。我的意思是，这是并发的不确定情况。

**更新**
作为概念证明，我已将 ~Logger() 重命名为 Close() 并在某个时候调用它。它立即关闭记录器。所以 _messages.Take() 在 _messages.CompleteAdding() 之后结束，正如在这种情况下所预期的那样。

我在 GC 线程的高优先级中看到的 ~Logger 中 20-40 秒延迟的唯一解释。能不能有别的解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:51:41.973

在 C# 中，**终结**器（又名析构函数）是不确定的，这意味着您无法预测何时调用它们或以何种顺序调用它们。例如，在您的代码中，_worker 的终结器完全有可能在*Logger*的终结器之后。出于这个原因，您永远不应该在终结器中访问托管对象（例如 FileStreams 等），因为其他托管资源的终结器可能已经完成，从而使它们的引用无效。此外，直到 GC 确定需要收集（由于需要额外的内存）之后，才会调用终结器。在您的情况下，GC 可能需要 20-40 秒才能进行所需的收集。

您想要做的是摆脱终结器并改用 IDisposable 接口（可选地使用可能提供更好可读性的 Close() 方法）。

然后，您只需`logger.Close()`在不再需要时调用。

```
void IDisposable.Dispose()
{   
     Close();
}

void Close() 
{
    _messages.CompleteAdding();
    _worker.Join(); // Wait for the consumer's thread to finish.
    //Some logic on closing log file
} 
```

通常，只有在需要清理**非托管**资源时才使用终结器（例如，如果您正在使用 P/Invoke WinAPI 函数调用等）。如果您只使用 .Net 类等，您可能没有任何理由使用一个。IDisposable 几乎总是更好的选择，因为它提供了**确定性**清理。

有关终结器与析构函数的更多信息，请查看此处： [在 C# 中使用 IDisposable 与析构函数有什么区别？](https://stackoverflow.com/questions/339063/what-is-the-difference-between-using-idisposable-vs-a-destructor-in-c)

我将对您的代码进行的另一项更改是使用 TryTake 而不是 Take。这消除了对 try/catch 的需要，因为当集合为空并调用 CompleteAdding 时它不会抛出异常。它只会返回false。

```
private void Work()
{
    //Try to get data from queue
    LogMessage message;
    while (_messages.TryTake(out message, Timeout.Infinite))
       //... some simple logic to write 'message'       
} 
```

您在代码*中*捕获的两个异常仍然可能由于其他原因发生，例如在处理它之后访问它或修改 BlockingCollection 的基础集合（有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd287184.aspx)）。但是这些都不应该出现在您的代码中，因为您不持有对基础集合的引用，并且您不会在 Work 函数完成之前处理 BlockingCollection。如果您仍然想捕获这些异常，以防万一，您可以在 while 循环*之外*放置一个 try/catch 块（因为您不想在任何一个异常发生后继续循环）。

最后，为什么要指定 int.MaxValue 作为集合的容量？除非您希望定期向集合中添加接近那么多的消息，否则您不应该这样做。

所以总的来说，我会重写你的代码如下：

```
public class Logger : IDisposable
{
    private BlockingCollection<LogMessage> _messages = null;
    private Thread _worker = null;
    private bool _started = false;

    public void Start() 
    {
        if (_started) return;
        //Some logic to open log file
        OpenLogFile();      
        _messages = new BlockingCollection<LogMessage>();  //int.MaxValue is the default upper-bound
        _worker = new Thread(Work) { IsBackground = true };
        _worker.Start();
        _started = true;
    }

    public void Stop()
    {   
        if (!_started) return;

        // prohibit adding new messages to the queue, 
        // and cause TryTake to return false when the queue becomes empty.
        _messages.CompleteAdding();

        // Wait for the consumer's thread to finish.
        _worker.Join();  

        //Dispose managed resources
        _worker.Dispose();
        _messages.Dispose();

        //Some logic to close log file
        CloseLogFile(); 

        _started = false;
    }

    /// <summary>
    /// Implements IDiposable 
    /// In this case, it is simply an alias for Stop()
    /// </summary>
    void IDisposable.Dispose() 
    {
        Stop();
    }

    /// <summary>
    /// This is message consumer thread
    /// </summary>
    private void Work()
    {
        LogMessage message;
        //Try to get data from queue
        while(_messages.TryTake(out message, Timeout.Infinite))
            WriteLogMessage(message); //... some simple logic to write 'message'
    }
} 
```

如您所见，我添加了启用/禁用队列处理的方法`Start()`。`Stop()`如果需要，您可以从构造函数调用 Start()，但通常，您可能不希望在构造函数中进行昂贵的操作（例如线程创建）。我使用 Start/Stop 而不是 Open/Close，因为它似乎对记录器更有意义，但这只是个人喜好，任何一对都可以正常工作。正如我之前提到的，您甚至不必使用 Stop 或 Close 方法。只需添加 Dispose() 就足够了，但某些类（如`Stream`s 等）使用 Close 或 Stop 作为 Dispose 的别名，只是为了使代码更具可读性。

# ios - 适用于 iOS 6 的新 Facebook SDK 在 iOS 5 中存在崩溃问题

> ID：14049722
> 
> 赞同：5
> 
> 时间：2012-12-27T05:21:38.633
> 
> 标签：ios, facebook, ios5

在 iOS 6 中，新的 Facebook SDK 正在运行，但在 iOS 5 上崩溃

错误是这样的，

```
dyld: Library not loaded:/System/Library/Frameworks/AdSupport.framework/AdSupport
Reason: image not found 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T05:25:15.217

通过转到项目文件摘要并向下滚动到链接的框架和库，将给您带来问题的框架设置为“可选”而不是“必需”。

# java - 如何在java中翻译带有不可打印字符的字符串

> ID：14049726
> 
> 赞同：1
> 
> 时间：2012-12-27T05:22:28.517
> 
> 标签：java, string

我想将带有不可打印字符（反斜杠、左箭头、右箭头等）的字符串翻译成 java 编程中的可打印字符串。

> 例如 -
> 
> 输入字符串 = "rn -r\b\b\b\b -r[K\b\b\bm -r\b\b\b"
> 
> 输入字符串的字节数组 = [114, 110, 32, 45, 114, 8, 8, 8, 8, 32, 45, 114, 27, 91, 75, 8, 8, 8, 109, 32, 45, 114 , 8, 8, 8]
> 
> 输出字符串应该是 = "rm -r"

如何将此字符串转换为可打印字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:31:07.100

如果您的意思是删除不可打印的字符

```
System.out.println("rn -r\b\b\b\b -r[K\b\b\bm -r\b\b\b".replaceAll("\\P{Print}", "")); 
```

输出

```
rn -r -r[Km -r 
```

**更新**

这个版本维护了一个光标并支持退格、左箭头和右箭头

```
 String s = "rn -r\b\b\b\b -r[K\b\b\bm -r\b\b\b";
    StringBuilder sb = new StringBuilder();
    int cursor = 0;
    for (char c : s.toCharArray()) {
        if (c == '\b') {
            if (cursor > 0) {
                sb.deleteCharAt(--cursor);
            }
        } else if (c == 37) {   // left arrow
            if (cursor > 0) {
                cursor--;
            }
        } else if (c == 39) {   // right arrow
            if (cursor < sb.length()) {
                cursor++;
            }
        } else if (!Character.isISOControl(c)) {
            sb.insert(cursor++, c);
        }
    }
    System.out.println(sb); 
```

打印`r -m`。

它与你的不同，`rm -r`但我认为我的是正确的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:36:19.013

如果要删除不可打印的字符，可以执行以下操作。

```
String input = "rn -r\b\b\b\b -r[K\b\b\bm -r\b\b\b";
String output = input.replaceAll("\\p{Cntrl}", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:55:07.323

要转换具有不可打印字符的字符串，请遍历字符串的字节数组表示并将每个字符（1 个字节）转换为其等效的十六进制。

请记住，每个字节的整数表示范围从 0 到 255，这意味着十六进制等效值的范围可以从 00 到 FF。因此，每个字节对应两个十六进制字符。

上面的逻辑给一个字符串一个十六进制字符串，它总是包含可打印的字符（0,1,2..A,B..,F）。

# mysql - MySQL：每天的总和

> ID：14049729
> 
> 赞同：10
> 
> 时间：2012-12-27T05:23:02.720
> 
> 标签：mysql, sql, select

我有一张如下表：

```
datetime (datetime)  count (int)
2012-12-27 09:22:15    5
2012-12-27 18:20:15    4
2012-12-27 23:19:15    3
2012-12-26 13:45:15    8
2012-12-26 04:56:15    7
2012-12-25 01:50:15    2
2012-12-25 12:02:15    1 
```

在 MySQL 中，我如何查询我是否希望每天返回 sum(count)，结果如下：

```
2012-12-27    12
2012-12-26    15
2012-12-25    3 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-27T05:24:13.400

您需要`DATE`在 columnName 周围使用函数`DateTime`。

```
SELECT    DATE(datetime) as DATE, SUM(`count`) totalCOunt
FROM      tableName
GROUP BY  DATE(datetime) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/68bef/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T05:31:54.140

干得好：

```
SELECT SUM(`count`) as date_count 
FROM table_name 
GROUP BY date_format( `datetime`, '%Y-%m-%d'); 
```

注意：如果可能，请避免使用关键字（计数）作为列名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:28:23.943

尝试以下方法以包括总和：

```
SELECT    DATE(datetime) day, 
SUM(`count`) Count_for_day 
FROM      tableName
GROUP BY  DATE(datetime) 
```

# php - SOAP Web 服务不返回任何值

> ID：14049735
> 
> 赞同：1
> 
> 时间：2012-12-27T05:24:42.967
> 
> 标签：php, soap, nusoap

这是我的代码：

```
require_once('library/nusoap/nusoap.php');

$NAMESPACE = 'http://domain.com/';

$server = new nusoap_server();
$server->configureWSDL('cm', $NAMESPACE, 'http://domain.com/webservice.php');

$server->wsdl->addComplexType(
    'Contacts',
    'complexType',
    'struct',
    'all',
    '',
    array(
        'contact_pid' => array('name'=>'contact_pid','type'=>'xsd:int'),
        'contact_pfname' => array('name'=>'contact_pfname','type'=>'xsd:string'),
        'contact_plname' => array('name'=>'contact_plname','type'=>'xsd:string')
    )
);

$server->wsdl->addComplexType(
    'ContactsArray',
    'complexType',
    'array',
    '',
    'SOAP-ENC:Array',
    array(),
    array(
        array('ref'=>'SOAP-ENC:arrayType','wsdl:arrayType'=>'tns:Contacts[]')
    ),
    'tns:Contacts'
);

$server->register(
    'fetchAllContacts',
    array('auth_user'=>'xsd:string','auth_pass'=>'xsd:string'),
    array('return'=>'tns:ContactsArray'),
    $NAMESPACE);

function fetchAllContacts($auth_user,$auth_pass)
{
    $authenticate_query = "select * from users_master where user_email='".$auth_user."' and user_password='".md5($auth_pass)."' and user_status='1'";
    $authenticate_user = mysql_query($authenticate_query) or die(mysql_error());
    if(mysql_num_rows($authenticate_user) > 0)
    {
        $row_data = mysql_fetch_array($authenticate_user);
        $select_all_contacts = mysql_query("select * from contacts_master where contact_userid='".$row_data['user_pid']."'") or die(mysql_error());
        if(mysql_num_rows($select_all_contacts) > 0)
        {
            $contact_loop = 0;
            while($row_contacts = mysql_fetch_array($select_all_contacts))
            {
                $contact_array[]['contact_pid'] =   $row_contacts['contact_pid'];
                $contact_array[]['contact_pfname'] =    $row_contacts['contact_pfname'];
                $contact_array[]['contact_plname'] =    $row_contacts['contact_plname'];

                $contact_loop++;
            }
            return $contact_array;
        }
        else
        {
            return array("error" => "No records found!");
        }
    }
    else
    {
        return array("error" => "Error in authentication!");
    }
}

if (!isset($HTTP_RAW_POST_DATA)){
    $HTTP_RAW_POST_DATA = file_get_contents('php://input');
}

$HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';
$server->service($HTTP_RAW_POST_DATA); 
```

我遇到的问题是它没有返回任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:19:25.057

设置数组值时，您不使用索引。

改变这个：

```
$contact_array[]['contact_pid']    = $row_contacts['contact_pid'];
$contact_array[]['contact_pfname'] = $row_contacts['contact_pfname'];
$contact_array[]['contact_plname'] = $row_contacts['contact_plname']; 
```

进入：

```
$contact_array[$contact_loop]['contact_pid']    = $row_contacts['contact_pid'];
$contact_array[$contact_loop]['contact_pfname'] = $row_contacts['contact_pfname'];
$contact_array[$contact_loop]['contact_plname'] = $row_contacts['contact_plname']; 
```

应该做的伎俩。

# c++ - C ++如何停止使用std :: cout输出5.0等数字的小数和零

> ID：14049736
> 
> 赞同：1
> 
> 时间：2012-12-27T05:24:44.900
> 
> 标签：c++, cout

正要问[这个](https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout)问题，又找了几个要问。

然后（根据最佳答案）我将如何继续只显示一次调用 cout 的精度，然后再禁用它？

假设我想显示前三个调用的精度，但不是最后一个：

（为了实验，我命名了一个与“固定”格式说明符同名的变量）

```
#include <iostream>
int main(){
   using namespace std;
   int spam = 5;
   double flak = 5.0;
   double result = spam * flak;
   double fixed = 42;
   cout.precision(1);
   cout << std::fixed << spam + flak << endl;
   cout << result << endl;
   cout << flak << endl;
   cout << fixed;
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:25:46.520

您可以再次调用精度函数以重新应用它，如下所示：

```
int main(){
   using namespace std;
   int spam = 5;
   double flak = 5.0;
   double result = spam * flak;
   double fixed = 42;
   cout.precision(1);
   cout << std::fixed << spam + flak << endl;
   cout << result << endl;
   cout << flak << endl;
   cout.precision(3);
   cout << fixed;
   return 0;
} 
```

另一种方法是使用`<iomanip>`标头来使用[`std::setprecision()`](http://en.cppreference.com/w/cpp/io/manip/setprecision)函数并将其传递给`std::cout`，所以它类似于这样做：

```
#include <iomanip>
#include <iostream>

int main() {
   int spam = 5;
   double flak = 5.0;
   double result = spam * flak;
   double fixed = 42;
   std::cout << std::fixed << spam + flak << std::endl;
   std::cout << std::setprecision(1) << result << '\n' << flak << std::endl;
   std::cout << std::setprecision(0) << fixed;
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T05:38:26.223

不确定你想要什么。但是 C++ 提供了一些方法来控制流的状态。

```
std::streamsize prec = cout.precision(); // store current precision setting
// some print here
std::cout.precision(prec)                // Roll-back 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:30:00.217

如果您不想看到小数位，一种（丑陋的）方法是将其投射到`int`之前。`cout`

类似的东西（C风格 - 对于原始类型仍然可以）

```
cout << (int)flak << endl; 
```

或（[C++ 风格](http://www.cplusplus.com/doc/tutorial/typecasting/)- 推荐，特别是对于非原始类型，如类）

```
cout << static_cast<int>(flak) << endl; 
```

这只会改变所`cout`看到的，而不是变量本身。

# shell - 如何确保 UNIX 脚本连续运行？

> ID：14049738
> 
> 赞同：0
> 
> 时间：2012-12-27T05:25:01.283
> 
> 标签：shell, unix

我编写了以下脚本来运行 Java 类：

```
#!/bin/sh

# Set this to the directory where the JDK is installed
JAVA_HOME=/opt/weblogic-9.2mp1/java1.5

# Set this to the path to the JAR file containing the JMS classes
# (for example, the path to the weblogic.jar file)
JMS_JAR=/opt/weblogic-9.2mp1/weblogic92/server/lib/weblogic.jar

# Specify the name of the <ServerNode> node in ASC
SERVER_NODE_NAME=TDCPublisher

# If you have custom save beans and load beans in your own JAR file,
# append your JAR file to this variable.
CLASSPATH=$JMS_JAR:$JAR_DIR/ClfyCore.jar:$JAR_DIR/awsi.jar:$JAR_DIR/acfglib.jar:$JAR_DIR/jaxen-1.1-beta-9.jar:$JAR_DIR/Amdocs
Aif.jar:$JAR_DIR/AmdocsProcMgrBase.jar:$JAR_DIR/AmdocsSvcCommon.jar:/apps/fasigw/test/fasigwApp/custom/FASIGWLink.jar
export CLASSPATH

# Set the path for accessing the JDK directory
PATH=$JAVA_HOME/bin:$PATH
export PATH

checkJDK()
{
  if [ ! -f $JAVA_HOME/bin/java ]; then
    echo "Error: $JAVA_HOME/bin/java not found."
    echo "Please edit this script so that the JAVA_HOME variable"
    echo "points to the root directory of your JDK installation."
    return 1
  fi
  return 0
}

checkClassPath()
{
  if [ ! -f $JAR_DIR/ClfyCore.jar ]; then
    echo "Error: $JAR_DIR/ClfyCore.jar not found."
    echo "Please edit this script so that the JAR_DIR variable"
    echo "points to the directory where ClfyCore.jar and the other"
    echo "ClarifyCRM JAR files are located."
  return 1
  fi
  return 0
}

main()
{
  checkJDK
      if [ $? != 0 ]; then
        return 1
      fi
  checkClassPath
      if [ $? != 0 ]; then
        return 1
      fi

$JAVA_HOME/bin/java -Djava.security.auth.login.config=/apps/fasigw/test/AmdocsCRM7.5/AmdocsCRMApplication/conf/auth.conf  -
cp ${CLASSPATH} com.clarify.daevtpub.ClarifyEventProcessor sa cleartest -pl ${SERVER_NODE_NAME} -ShowStatus -Debug -OutFile /
apps/fasigw/test/logs/DataChangeLog.log

  return 0
}

main $* 
```

但面临的问题是 - 一旦我退出服务器并再次登录，虽然我可以看到该进程正在使用命令**ps -ef**运行，但该类没有被执行。我需要再次手动开始运行脚本。如何避免这种情况并确保脚本在后台持续运行？脚本名称是 startEventProcessor，我执行以下命令来运行脚本：

```
./startEventProcessor & 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:29:05.660

使用[nohup](http://www.manpagez.com/man/1/nohup/)：

```
nohup ./startEventProcessor & 
```

# lua - Gmod 13 Lua Error

> ID：14049740
> 
> 赞同：0
> 
> 时间：2012-12-27T05:25:17.573
> 
> 标签：lua, garrys-mod

I am trying to learn Lua and I decided that for my first project I would try to fix a broken script. I have fixed a few of the bugs but I'm stuck now. Can you help me?

```
 function SWEP:PrimaryAttack()
     if( CurTime() < self.NextStrike ) then return; end
     self.Weapon:EmitSound("player/skick/sparta.mp3")
     self.NextStrike = ( CurTime() + 3.5 );
     timer.Simple( 1.80, function() self:AttackAnim() end)
                        -Next line broken-
         timer.Simple( 2.40, function() self.Weapon:SendWeaponAnim( ACT_VM_IDLE ) end);
     timer.Simple( 2.00, function() self.ShootBullets( self ) end)
     self.Owner:SetAnimation( PLAYER_ATTACK1 );
end 

function SWEP:ShootBullets()
    -Next line Broken-
         local trace =Owner:GetEyeTrace();
    if trace.HitPos:Distance(self.Owner:GetShootPos()) <= 130 then
        if( trace.Entity:IsPlayer() or trace.Entity:IsNPC() or trace.Entity:GetClass()=="prop_ragdoll" ) then
                timer.Simple(0, game.ConsoleCommand, "host_timescale 0.1\n")
                timer.Simple(0.5, game.ConsoleCommand, "host_timescale 1\n")
            self.Owner:EmitSound( self.FleshHit[math.random(1,#self.FleshHit)] );
        else
            self.Owner:EmitSound( self.Hit[math.random(1,#self.Hit)] );
        end
                bullet = {}
                bullet.Num    = 5
                bullet.Src    = self.Owner:GetShootPos()
                bullet.Dir    = self.Owner:GetAimVector()
                bullet.Spread = Vector(0.04, 0.04, 0.04)
                bullet.Tracer = 0
                bullet.Force  = 250
                bullet.Damage = 1000000
            self.Owner:FireBullets(bullet)
    end 
```

I'm getting an error saying `Attempting to index field 'Weapon' (a nil value)`. Can anyone explain how to fix this?

Im not allowed to post imagesthis is what im getting [Error image](http://img27.imageshack.us/img27/9093/74855130.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:24:54.107

您收到该错误的原因是“武器”（特别是 self.Weapon）未初始化。self.Weapon 没有指向任何东西，所以你不能在它上面调用任何函数。

你能告诉我们错误消息引用的行吗？看起来文件是`shared.lua`第 84、85 和 90 行。周围的代码也会很有帮助。我猜您将其作为原始问题的一部分发布，但是没有任何行号就没有帮助！

# android - 如何在运行每个测试用例时卸载和重新安装应用程序

> ID：14049746
> 
> 赞同：1
> 
> 时间：2012-12-27T05:26:13.057
> 
> 标签：android, unit-testing, junit4, uninstallation

我`junit`用来测试我的 android 应用程序。在`TestCase1.java`我单击“同意”按钮以接受协议，然后断言一些可能性。

接下来`TestCase2.java`，我想再次单击“同意”按钮并断言一些可能性。

每次运行测试用例时，我都必须卸载应用程序并重新安装它。如果我运行整个程序包，大多数情况下都会失败，因为我在重复相同的路径。

示例代码。
**TestCase1.java**

```
 @Test
  public void testdA_Case2() throws Exception {
  solo.assertCurrentActivity("my test  active", Myproj.class);
    solo.clickOnButton("I Agree");
    assertEquals(Getresponce(),"1");
} 
```

**TestCase2.java**

```
 @Test
  public void testdA_Case2() throws Exception {
  solo.assertCurrentActivity("my test  active", Myproj.class);  
  solo.clickOnButton("I Agree");
    assertEquals(register(), true);` 
```

如何运行测试，以便应用程序在每个测试用例之前重新安装。如何自动化它。（我尝试清除应用程序数据并尝试使用 Uri 卸载

```
packageURI = Uri.parse("package:"+"myproj.com");
        Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        ctx.startActivity(uninstallIntent);
    `  But my test stops running if I tried this. 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:59:15.750

看起来您无法从测试用例中重新安装您的 apk，因为它们都在应用程序中运行。

但是您可以从外部实现所需的流量控制。

从批处理/shell 脚本中，您可以根据需要调用 adb install -r .... 并运行单独的测试项目。以下是如何运行一个：[从命令行运行 Android Junit 测试](https://stackoverflow.com/questions/11144466/running-android-junit-tests-from-command-line)

# gd - 电子邮件文件使用php邮件功能发送电子邮件两次

> ID：14049750
> 
> 赞同：3
> 
> 时间：2012-12-27T05:27:07.267
> 
> 标签：gd, html-email, php, php-gd

我的三个担忧，尝试了不同的组合但没有结果，谷歌搜索但很少或没有帮助 -

1.  我收到了两次电子邮件，更改`myemail@emailserver.com`为电子邮件 ID 以查看结果。
2.  在执行此文件时，我正在获取图像，但是我想要文本“已发送电子邮件”。
3.  传递带有标签的完整 HTML 内容，而不是电子邮件中的 HTML 呈现。

我的工作代码 -->

```
<?php
    header('Content-type: image/jpeg');
    $jpg_image = imagecreatefromjpeg('http://dummyimage.com/600x400/f5f5f5/fff.jpg');
    $black = imagecolorallocate($jpg_image, 1, 1, 1);
    $font_path = 'myfont/arial.ttf';
    $text = "Swapnesh Sinha!";
    imagettftext($jpg_image, 24, 0, 175, 85, $black, $font_path, $text);
    $tip = imagejpeg($jpg_image);
    $imageData = base64_encode($tip);
    //$src = 'data: '.mime_content_type($jpg_image).';base64,'.$imageData;
    imagedestroy($jpg_image);
?>

<html>
<head></head>
<body>
<p>

<?php

$to = 'myemail@emailserver.com';
$subject = "Thisa is a email test to find image work";
$message = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>MY SITE TITLE</title>
</head><body><table><tr><td>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</td></tr><tr><img src="'.'http://mysiteurl/addtext.php'.'" /></tr></table></body></html>';
$headers = 'From: myemail@emailserver.com' . "\r\n" .
           'Reply-To: myemail@emailserver.com' . "\r\n" .
           'X-Mailer: PHP/' . phpversion();

$bool = mail($to, $subject, $message, $headers);

if($bool)
echo "Email Sent"; 
else
echo "Email Not Sent";

?>

</body>
</html> 
```

**注意**- 在`<img src="'.'http://mysiteurl/addtext.php'.'" />`

`http://mysiteurl/addtext.php`与我们拥有上述所有内容的情况相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:35:48.707

我要做的第一件事是检查您的 apache/IIS 日志以确保该 URL 没有被调用两次（只是一个健全性检查）。

*如果*您添加到 OP 的 PHP 页面是`http://mysiteurl/addtext.php`，那么它将被调用两次，一次渲染 HTML，然后浏览器将在渲染`<img ...>`标签时再次调用它。

要解决此问题，您需要将其拆分为两个 PHP 文件（推荐），或传递一个 GET 参数来切换图像处理。

您还需要添加`$headers .= "Content-type: text/html\r\n";`，以便将电子邮件呈现为 html 而不是纯文本。

# iphone - UIActionSheet 中的 UIView

> ID：14049751
> 
> 赞同：0
> 
> 时间：2012-12-27T05:27:17.030
> 
> 标签：iphone, xcode4.5, uiactionsheet

我正在添加一个`UIView`in `UIActionSheet`，我需要在视图上添加四个标签和一个关闭按钮。但我需要 UIactionSheet 从屏幕中心开始。当我调整尺寸时，我无法得到它。

```
-(IBAction)buttontapped:(id)sender{

     UIView    *showDetailsView = [[UIView alloc]initWithFrame:CGRectMake(0,10, 320, 260)];

        showDetailsView.backgroundColor = [UIColor whiteColor];

        UILabel  *name =[[UILabel alloc] init];
        [name setFrame:CGRectMake(10, 40,250, 50)];
        name.textAlignment = UITextAlignmentLeft;
        name.backgroundColor = [UIColor clearColor];
        name .font=[UIFont fontWithName:@"arial" size:12];
        name.text=@"Name";
        [showDetailsView addSubview:name];

        UIActionSheet *aac = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil  otherButtonTitles:@"Close", nil];
        aac.actionSheetStyle = UIActionSheetStyleAutomatic;
        [aac addSubview:showDetailsView];
        [aac setFrame:CGRectMake(0,0,320,400)];
        [aac showInView:self.view];

} 
```

我可以看到它是从底部添加的，但它没有像下图那样扩展到屏幕中心：我需要增加它的高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:51:39.337

从 SO 的一个答案中，我得到了这种方法，它的作用就像魅力:)

```
-(void)setActionSheetHeight
{
    CGRect actionSheetRect = self.myActionSheet.frame;
    CGFloat orgHeight = actionSheetRect.size.height;
    actionSheetRect.origin.y -= 214; //height of picker
    actionSheetRect.size.height = orgHeight+214;
    self.myActionSheet.frame = actionSheetRect;

    [self.myPicker setShowsSelectionIndicator:YES];

    CGRect pickerRect = self.myPicker.frame;
    pickerRect.origin.y = orgHeight;
    self.myPicker.frame = pickerRect;
} 
```

这`myActionSheet`是一个`UIActionSheet`iVar。
这`myPicker`是一个`UIPickerView`iVar。
您可以设置所需的值，而不是`214`静态值，并根据该值设置`UIActionSheet`.

**注意**
必须在显示操作表之后调用，即在`[self.myActionSheet showFromTabBar:self.tabBarController.tabBar];`代码行之后。表示在调用`show`操作表上的方法之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:26:50.440

When you present the actionsheet, you need to send appropriate message to present it. Refer to

[showFromRect:inView:animated:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html#//apple_ref/occ/instm/UIActionSheet/showFromRect%3ainView%3aanimated%3a)

[showInView:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html#//apple_ref/occ/instm/UIActionSheet/showInView%3a)

For showInView:, you can have an invisible view with the bottom at mid-height of the view controller and top aligned to the top of viewcontroller.

For showFromRect:inView:animated:, if you have any UIView to which the actionsheet needs to be anchored, you can used it there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:35:20.477

用这个：

```
[aac setBounds:CGRectMake(0,0,320,400)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:53:11.833

UIActionSheet 设计为从屏幕底部呈现。

您只能在 ipad 的中心显示它......不能在 iphone 中显示。

您可以根据您的要求使用自定义警报视图。

[https://github.com/alokard/BlockAlertView](https://github.com/alokard/BlockAlertView)

# java - 获取图像模糊百分比

> ID：14049763
> 
> 赞同：2
> 
> 时间：2012-12-27T05:28:27.273
> 
> 标签：java, image-processing, colors, percentage

![两张图片](../Images/7f33db8f7f1e121f0c0404415c7ed3a3.png)

嗨，所以我必须制作一个脚本（不管是什么编程语言，但我会在这里使用 Java），一个比较两张黑白图像并判断哪一张最模糊的脚本。

所以我必须做一个这样的功能：

```
function int getImageBlurPercentage()
{
    ArrayList<Integer> ColorList = new ArrayList<Integer>();

    //Part 1: fill ColorList with color values (0=black, 255=white)

    go through Y axis
        go through X axis
            ColorList -> add colorValue of each pixel; [ie: 0 to 255]

    //Part 2: process (This is the part where I need help !)

    int lastColor = 0;

    for(int color : ColorList)
    {
        // Something has to be done here
        // To compare pixel by pixel
        // and get noise result or difference result
        // and convert it to a percentage (0% - 100%)
        // This is where I need your help !
    }
} 
```

所以这就是我需要你们帮助的地方，我真的不知道如何处理这个问题。我认为这需要一些我不擅长的数学公式。

如果有人帮助或提供可以引导我走上正确道路的提示，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:29:55.527

当您模糊图像时（假设您使用高斯模糊），您实际上对图像的像素进行了一些“平均”，这意味着您使边缘“更平滑”。

因此，要检查一个图像是否比其他图像具有“更平滑”的边缘，您可以像 Jan Dvorak 建议的那样查看图像的渐变，但不要忘记通过图像中的像素数量对其进行归一化（否则会得到更大的图像更大的结果）。

如果要检查两个完全不同的图像，测试会复杂得多，因为不同的场景自然有不同的平滑度

# java - 覆盖子类中的方法

> ID：14049764
> 
> 赞同：0
> 
> 时间：2012-12-27T05:28:54.217
> 
> 标签：java, class, methods, subclass, minecraft

我正在尝试对 minecraft src 进行一些更改。我正在尝试覆盖类中的方法，因此我不必编辑原始类。

在常规课程中，我想更改此方法：

```
public void sendChatMessage(String par1Str)
{
    this.sendQueue.addToSendQueue(new Packet3Chat(par1Str));
} 
```

所以在我的子类中我有这个代码：

```
package cobalt.gui;

import cobalt.hacks.*;
import net.minecraft.client.Minecraft;
import net.minecraft.src.EntityClientPlayerMP;
import net.minecraft.src.NetClientHandler;
import net.minecraft.src.Session;
import net.minecraft.src.World;

public class Console extends EntityClientPlayerMP {

    public Console(Minecraft par1Minecraft, World par2World,
            Session par3Session, NetClientHandler par4NetClientHandler) {
        super(par1Minecraft, par2World, par3Session, par4NetClientHandler);
    }

    @Override
    public void sendChatMessage(String par1Str) {

        if (par1Str.startsWith(".help")) {
                    //Do stuff
            return;
        }
    }
} 
```

据我了解，任何时候调用方法，都应该“重定向”给子类来处理？（如果我错了请告诉我哈）

如果我修改原始类，if 语句确实可以正常工作。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:33:46.427

这只有**在我的世界代码的其余部分以某种方式开始使用你的类**时才有效，`Console`，它打算使用的地方`EntityClientPlayerMP`。**没有它**，您的函数**将不会被调用**。

如果你想改变游戏的行为，最简单的方法就是改变`EntityClientPlayerMP`它自己。如果您想`Console`在代码的其他地方使用修改后的类，那么您所做的就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:36:45.350

这取决于实际的对象类型。如果对象是`Console`eg类型`EntityClientPlayerMP obj = new Console(..)`，`obj.sendChatMessage(..)`它将起作用。但是如果对象本身是 EntityClientPlayerMP 类型的，`new EntityClientPlayerMP(..)`它就行不通了

# ruby - 不使用端口时使用的端口

> ID：14049765
> 
> 赞同：8
> 
> 时间：2012-12-27T05:28:53.873
> 
> 标签：ruby, sinatra

我正在尝试运行以下 Sinatra 应用程序并收到一条错误消息，告诉我无法启动服务器，原因可能是端口已在使用中，或者因为我没有 root 权限。在启动 Sinatra 应用程序之前，我从未遇到过这个问题。几天前，我为我的 mac 更新了 Mountain Lion，想知道这是否是问题的原因。我也使用 RVM。谁能给个建议...

```
require "sinatra"

class MyApp < Sinatra::Base
 get '/' do
    "Hello from MyApp"

 end

end 

== Sinatra/1.3.3 has taken the stage on 4567 for development with backup from Thin
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:4567, CTRL+C to stop
/Users/me/.rvm/gems/ruby-1.9.2-p290@global/gems/eventmachine-1.0.0/lib/eventmachine.rb:526:in `start_tcp_server': no acceptor (port is in use or requires root privileges) (RuntimeError) 
```

更新：我仍然可以在我的机器上运行 rails 服务器，所以我认为问题是 Sinatra 特有的。此外，直到几天前，当我开始玩这个 [Rack Tutorial](http://rubylearning.com/blog/a-quick-introduction-to-rack/)时，我才能够很好地运行 Sinatra 应用程序，它指示我明确设置端口。我想知道这是否会产生永久性的变化。

```
>> Rack::Handler::WEBrick.run my_rack_proc, :Port => 9876
[2011-10-24 11:32:21] INFO  WEBrick 1.3.1
[2011-10-24 11:32:21] INFO  ruby 1.9.2 (2011-07-09) [i386-mingw32]
[2011-10-24 11:32:21] INFO  WEBrick::HTTPServer#start: pid=480 port=9876 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-30T15:55:46.273

注意：我之前有不同的答案。我已经用一个新的、更集中的答案代替了它，但我把旧答案留在了底部，供仍在寻找它的人使用。

### 新答案：

此错误是由于您上次运行服务器时关闭终端而没有终止服务器造成的。我相信这被称为“无头奔跑”，就像一只被砍头的鸡。因此，即使周围没有人在看，服务器仍在运行并占用称为端口 9393 的“空间”。当您尝试启动新服务器时，已经有一个服务器在运行。这有点像一个停车位：因为那里已经有一辆车，所以你不能在同一个地方分开一辆新的。

这是我重现错误的方式。我启动了一个 sinatra 服务器，关闭了终端而没有先杀死服务器，打开一个新终端，然后尝试启动另一台服务器。

`Taras-MacBook-Air:SurveyDBCGroupProject tlroys$ shotgun == Shotgun/Thin on http://127.0.0.1:9393/ Thin web server (v1.6.1 codename Death Proof) Maximum connections set to 1024 Listening on 127.0.0.1:9393, CTRL+C to stop /Users/tlroys/.rvm/gems/ruby-1.9.3-p484/gems/eventmachine-1.0.3/lib/eventmachine.rb:526:in `start_tcp_server': no acceptor (port is in use or requires root privileges) (RuntimeError) #deleted stack trace`

如果一辆车停在你的位置，你会怎么做？你可以打电话给拖车，告诉司机这辆车的车牌号，让他们把它拖走。

要找出汽车的车牌号，请运行[我在 Stack Overflow 上找到的以下命令集](https://stackoverflow.com/a/11973828/1344732)

`ps aux | grep ruby`

这会找到进程 ID，也就是占用“停车位”的“汽车”的车牌号。注意：占据我“位置”的服务器实际上是使用编程语言 ruby​​ 编写的服务器：有点像某些汽车是雪佛兰。我可以告诉查车牌的人去找雪佛兰，只要周围没有其他车，他就会找到合适的车。由于这个“僵尸服务器”是我计算机上运行的唯一 ruby​​ 进程，因此告诉 grep 命令查找 ruby​​ 将给出正确的进程 ID/车牌号。如果我想更具体一点，我可能会说

`ps aux | grep shotgun`

并得到相同的结果。

- 输出应该是这样的：列表中应该有两件事

`27235 ?? S 0:00.72 /Users/tlroys/.rvm/gems/ruby-1.9.3-p484/bin/shotgun 27393 s000 S+ 0:00.00 grep ruby`

第一个是您正在寻找的实际“僵尸服务器”。第二件事很有趣，因为您正在查找包含单词 ruby​​ 的所有进程，因此它会找到正在查找包含单词 ruby​​ 的所有进程的进程。哈哈。

杀死第一个进程。使用以下命令。确保将数字更改为实际的进程 ID：

`kill -9 27235`

您必须将 27235 更改为您看到的实际进程 ID，但您明白了。拖车来了，把车拖到垃圾场，把那个地方留给我用。

### 老答案：

我遇到了完全相同的问题，据我所知，这是因为在我运行 sinatra 应用程序的端口上运行了一个 ruby​​ 进程。下面是错误（为简洁起见删除了堆栈跟踪）和我运行的命令以找出问题所在并修复它。

简而言之，我试图启动我的 sinatra 应用程序，它说端口正在使用中或需要 root 权限。然后我使用 Tin Man 的 lsof 命令（如上所示）找出正在使用的端口。

它表明 ruby​​ 正在端口 9393 上运行。我用 killall 杀死了它。我尝试再次启动我的 sinatra 应用程序。有效。

```
Taras-MacBook-Air:sinatra_sandbox tlroys$ bundle exec shotgun config.ru 
The source :rubygems is deprecated because HTTP requests are insecure.
Please change your source to 'https://rubygems.org' if possible, or 'http://rubygems.org' if not.
== Shotgun/Thin on http://127.0.0.1:9393/
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 127.0.0.1:9393, CTRL+C to stop
/Users/tlroys/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/eventmachine-1.0.0/lib/eventmachine.rb:526:in `start_tcp_server': no acceptor (port is in use or requires root privileges) (RuntimeError)
Taras-MacBook-Air:sinatra_sandbox tlroys$ lsof -i TCP | grep LISTEN
ruby      59176 tlroys    9u  IPv4 0xffffff8012fbdc00      0t0  TCP localhost:9393 (LISTEN)
Taras-MacBook-Air:sinatra_sandbox tlroys$ killall ruby
Taras-MacBook-Air:sinatra_sandbox tlroys$ bundle exec shotgun config.ru 
The source :rubygems is deprecated because HTTP requests are insecure.
Please change your source to 'https://rubygems.org' if possible, or 'http://rubygems.org' if not.
Shotgun/Thin on http://127.0.0.1:9393/
Thin web server (v1.5.0 codename Knife)
Maximum connections set to 1024
Listening on 127.0.0.1:9393, CTRL+C to stop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:01:12.350

只有 root 才能打开“众所周知的端口#s”的限制与 Ruby 无关 - 这是操作系统的事情。一般来说，这也是一件好事。

查看“[无法启动 sinatra 进程 - eventmachine 'no acceptor'](https://stackoverflow.com/questions/12661941/cannot-start-sinatra-process-eventmachine-no-acceptor) ”。

链接中有两个建议：

1.  他遇到的配置问题很可能会解决你的问题
2.  如果没有别的，该链接还向您展示了如何更改端口号（更改为不同的 - 并且可能更高）号码。

# java - Cassandra 的节俭运输异常

> ID：14049767
> 
> 赞同：1
> 
> 时间：2012-12-27T05:29:08.980
> 
> 标签：java, exception, cassandra, thrift

我有一个例外，使用 cassandra 和节俭。我想插入一些数据。这是java代码：

```
package pacan.java.eee;
import java.nio.ByteBuffer;
import org.apache.cassandra.thrift.Cassandra;
import org.apache.cassandra.thrift.Column;
import org.apache.cassandra.thrift.ColumnParent;
import org.apache.cassandra.thrift.ConsistencyLevel;
import org.apache.cassandra.thrift.InvalidRequestException;
import org.apache.cassandra.thrift.NotFoundException;
import org.apache.cassandra.thrift.TBinaryProtocol;
import org.apache.cassandra.thrift.TimedOutException;
import org.apache.cassandra.thrift.UnavailableException;
import org.apache.thrift.TException;
import org.apache.thrift.protocol.TProtocol;
import org.apache.thrift.transport.TFramedTransport;
import org.apache.thrift.transport.TSocket;
import org.apache.thrift.transport.TTransport;

public class Main {

    private static final String UTF8 = "UTF8";

    /**
     * @param args
     * @throws TException 
     * @throws InvalidRequestException 
     * @throws NotFoundException 
     * @throws TimedOutException 
     * @throws UnavailableException 
     */
    public static void main(String[] args) throws InvalidRequestException, TException, NotFoundException, UnavailableException, TimedOutException {
        TTransport tr = new TFramedTransport(new TSocket("localhost", 7199));
        TProtocol protocol = new TBinaryProtocol(tr);
        Cassandra.Client client = new Cassandra.Client(protocol);
        tr.open();
        client.set_keyspace("keyspace");
        ColumnParent colParent = new ColumnParent("User");
        ByteBuffer rowid = ByteBuffer.wrap("100".getBytes());
        Column column = new Column();
        column.setName("description".getBytes());
        column.setValue("some value".getBytes());
        column.setTimestamp(System.currentTimeMillis());
        client.insert(rowid, colParent, column, ConsistencyLevel.ONE);
        tr.flush();
        tr.close();
    }

} 
```

这是我得到的例外：

```
Exception in thread "main" org.apache.thrift.transport.TTransportException
    at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:132)
    at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
    at org.apache.thrift.transport.TFramedTransport.readFrame(TFramedTransport.java:129)
    at org.apache.thrift.transport.TFramedTransport.read(TFramedTransport.java:101)
    at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
    at org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:378)
    at org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:297)
    at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:204)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:69)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_set_keyspace(Cassandra.java:493)
    at org.apache.cassandra.thrift.Cassandra$Client.set_keyspace(Cassandra.java:480)
    at pacan.java.eee.Main.main(Main.java:37) 
```

请帮忙！=) 我已经用谷歌搜索过了，但找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:05:35.553

*   您是否定义/创建了一个名为“keyspace”的键空间？

*   你确定你在端口 7199 上运行 thrift/rpc（默认是 9160）。

# mysql - MYSQL Innodb：复合主键和反向搜索

> ID：14049771
> 
> 赞同：3
> 
> 时间：2012-12-27T05:29:19.297
> 
> 标签：mysql, innodb, composite-primary-key

我正在使用 Innodb 搜索引擎为用户查找表创建一个事件。

表事件_用户

```
event_id
user_id

Index (PRIMARY) -> event_id, user_id
Index (secondary) -> user_id, event_id ?? 
```

该应用程序将搜索用户到事件和事件到用户。如果主键是聚集的，如何定义第二个索引？应该是这样`user_id`，然后 MYSQL 会发现 event_id 已经存在于 PK 中，还是我应该是多余的并包含`user_id, event_id`在二级索引中？

另外，这对聚集索引有用吗？任何有关 Innodb 聚集索引的指导和帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:59:33.593

MySQL 应该能够将 PK 中的字段用作覆盖索引，而无需制作复合二级索引。

所以：

表（引擎 = INNODB）

```
column_a  (int)
column_b  (int)

Primary Key -> column_a, column_b 
```

如果您想通过`column_b`简单地添加 index:进行搜索`column_b`。

由于表使用了 Innodb 引擎，所以 PK 会存在于`column_b`索引中。mysql就能使用索引（using index）。无需创建索引`column_b, column_a`，因为这将是多余的。- 请记住，inndob 集群按 PK 和所有索引都引用 PK。

对于这种设计，代理键是一个糟糕的选择，因为必须进行额外的工作以确保`column_a, column_b`不存在。

# java - 单击按钮时 Activity 中的 NullPointerException

> ID：14049772
> 
> 赞同：0
> 
> 时间：2012-12-27T05:29:20.973
> 
> 标签：java, android, nullpointerexception, android-activity

我有 2 个活动屏幕。第一个有 2 个按钮。Button1 根据用户输入处理数据，而 Button2 根据处理结果将用户引导至下一个活动屏幕。

每当我单击 Button1 时，什么都没有发生，并且

*当我单击 Button2 时，该应用程序停止工作并给出“不幸...”消息。*起初，一切都很顺利，但后来我添加了一些代码，然后应用程序将无法运行。

**主要活动**

```
public class MainActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    //for the header
        View title = getWindow().findViewById(android.R.id.title);
        if (title != null)
        { 
            ViewParent titleBar = title.getParent();
            if (titleBar != null && (titleBar instanceof View))
            { 
                View parentView = (View)titleBar; 
                parentView.setBackgroundColor(Color.RED); 
            }
        }

    //for button2
        Button next = (Button) findViewById(R.id.DGButton);
        next.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view)
            {
                Intent myIntent = new Intent(view.getContext(), Activity2.class);
                startActivityForResult(myIntent, 0);
            }

        });
    } 

    public void calculateClickHandler(View view)
    {
        //handle the click of button1

        if (view.getId() == R.id.CalculateButton)
        {
         //some codes

    //the next activity screen uses the calculated value for some outputs
         Intent intent1 = new Intent(MainActivity.this, Activity2.class);
        Bundle b = new Bundle();
        b.putDouble("key", bmiValue);
        intent1.putExtras(b);
        startActivityForResult(intent1,0);
    }
    } 
```

**活动2：**

```
public class Activity2 extends Activity
{ 
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

        Button next = (Button) findViewById(R.id.BackToBMI);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();
            }
        });
//some codes

        Bundle b = getIntent().getExtras(); //the nullpointerexception is here
        double bmival = b.getDouble("key");
}
} 
```

**日志猫：**

```
12-27 05:15:03.263: E/AndroidRuntime(1091): FATAL EXCEPTION: main
12-27 05:15:03.263: E/AndroidRuntime(1091): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bmicaldg/com.example.bmicaldg.Activity2}: java.lang.NullPointerException
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.os.Looper.loop(Looper.java:137)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at java.lang.reflect.Method.invoke(Method.java:511)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at dalvik.system.NativeStart.main(Native Method)
12-27 05:15:03.263: E/AndroidRuntime(1091): Caused by: java.lang.NullPointerException
12-27 05:15:03.263: E/AndroidRuntime(1091):     at com.example.bmicaldg.Activity2.onCreate(Activity2.java:33)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.Activity.performCreate(Activity.java:5104)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-27 05:15:03.263: E/AndroidRuntime(1091):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-27 05:15:03.263: E/AndroidRuntime(1091):     ... 11 more 
```

这也是 MainActivity 的 XML 文件：

按钮1：

```
<Button
        android:id="@+id/CalculateButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView4"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="14dp"
        android:background="#FF0000"
        android:minHeight="30dip"
        android:minWidth="65dip"
        android:onClick="calculateClickHandler"
        android:text="@string/CalculateButton"
        android:textColor="#FFFFFF"
        android:textSize="14sp" /> 
```

按钮2：

```
<Button
        android:id="@+id/DGButton"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="#FF0000"
        android:minHeight="30dip"
        android:onClick="calculateClickHandler"
        android:text="@string/DGButton"
        android:textColor="#FFFFFF" /> 
```

我是 Android 移动编程的初学者，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:33:08.423

尝试替换以下代码：

```
//for button2
        Button next = (Button) findViewById(R.id.DGButton);
        next.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view)
            {
                Intent myIntent = new Intent(view.getContext(), Activity2.class);
                startActivityForResult(myIntent, 0);
            }

        }); 
```

有了这个：

```
//for button2
        Button next = (Button) findViewById(R.id.DGButton);
        next.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view)
            {
                Intent myIntent = new Intent(MainActivity.this, Activity2.class);
                startActivityForResult(myIntent, 0);
            }

        }); 
```

EDIT1：在 logcat 日志后更新..

在方法的最后一行中，`double bmival = b.getDouble("key");`您尝试从包中读取值。[根据getExtras()](http://developer.android.com/reference/android/content/Intent.html#getExtras%28%29)方法的以下 javadoc ：

> 它返回之前添加的所有额外内容的映射，`putExtra()`如果没有添加，则返回 null。

现在，由于您没有在`MainActivity`by using中设置任何值，因此`putExtra()`您在对`getExtras()`. 因此，您需要调用`putExtra()`以`MainActivity`将一些值传递给`Activity2`以下代码：

```
//for button2
        Button next = (Button) findViewById(R.id.DGButton);
        next.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view)
            {
                Intent myIntent = new Intent(view.getContext(), Activity2.class);
                 //Assuming bmival is a class variable that has the value that you want to pass on to Activity2
                  myIntent.putExtra("key",bmival);

                startActivityForResult(myIntent, 0);
            }

        }); 
```

另外，请在从捆绑包中读取值之前进行空检查，如下面的代码：

```
if(b!=null){
   double bmival = b.getDouble("key");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:33:09.660

最好使用`startActivity()`而不是`startActivityForResult(intent1,0)`

并且在您的接收方检查您是否获得额外费用

所以试试这样

```
 Bundle extras = getIntent().getExtras();
 if(extras != null)
 {
    double bmival = extras.getDouble("key");
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:39:17.843

发生此错误是因为您没有在下一个按钮的单击事件中传递双精度值。

写下面的代码

```
Intent intent1 = new Intent(MainActivity.this, Activity2.class);
intent1.putExtra("key", bmiValue);
startActivity(intent1); 
```

而不是下面关于下一个按钮的单击事件和方法的意图代码的代码`calculateClickHandler()`。

```
Intent myIntent = new Intent(view.getContext(), Activity2.class);
startActivityForResult(myIntent, 0); 
```

它会解决你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T05:41:12.463

我想你在找这个，试试这个

```
 //for button2
    Button next = (Button) findViewById(R.id.DGButton);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(MainActivity.this, Activity2.class);
            Bundle b = new Bundle();
            b.putDouble("key", bmiValue);
            intent1.putExtras(b);
            startActivityForResult(myIntent, 0);
        }

    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T05:46:54.267

错误可能很少，

*   第一个也是最可能的情况可能是您没有在清单文件中定义第二个活动。因此，首先检查您是否已在清单文件中定义了所有活动。

*   下面的说法是完全错误的。

    `Intent myIntent = new Intent(view.getContext(), Activity2.class);`

在这里，您使用`View`的是 Buttin's `onClickListener`，但您应该使用`Activity Context`, like`MyActivity.this`或 the `Application's Context`, like this `getApplicationContext()`。

*   尝试使用

    `startActivity(myIntent);`

代替

```
startActivityForResult(myIntent, 0); 
```

*   如果你的问题根本没有解决，最后一个不太可能的情况可能是，

尝试向意图添加标志，像这样

```
myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

*   您没有在 Intent Extras 中设置任何值，尽管它会在下一个 Activity 中给您一个错误，

    `myIntent.putExtra("key", bmiValue);`

# javascript - 由于 javascript 变量导致的 JSON 文件解析问题

> ID：14049774
> 
> 赞同：0
> 
> 时间：2012-12-27T05:29:36.580
> 
> 标签：javascript, iphone, objective-c, json, parsing

我得到了一个 json 文件来在 tableview 中显示结果。但是当我使用在线 json 文件编辑器尝试 json 文件验证时，我收到“构建树失败”错误。

我向我的客户发布了这条关于错误 json 文件的消息，然后他发布了一些我完全不知道的奇怪描述。

**是的，json 不是纯 json。它具有带有 json 变量的 javascript 变量。现在你可以使用 webview 来评估 javascript 变量并使用 json 值。例如：dp_f：对应于出发列车列表是一个javascript数组变量。U 可能必须评估变量并将每个数组元素存储为一个新的 json，其中键为 dp_f 和这些值的数组值**

请告诉我如何使用这个不纯的 json 文件。解析此类文件的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:52:02.943

评估 JavaScript（这实际上是你所拥有的，而不是 JSON）的唯一真正方法是评估 JavaScript。

您将不得不使用某种形式的`eval()`. 如果您可以使用，我建议您尝试使用 JavaScript 沙箱。当然，最好的选择是修复数据。

# c - 为什么全局变量总是初始化为'0'，而不是局部变量？

> ID：14049777
> 
> 赞同：57
> 
> 时间：2012-12-27T05:29:50.777
> 
> 标签：c, variables, global, local

> **可能重复：**
> [为什么将全局变量和静态变量初始化为其默认值？](https://stackoverflow.com/questions/2091499/why-global-and-static-variables-are-initialized-to-their-default-values)

看代码，

```
#include <stdio.h>

int a;
int main(void)
{
    int i;
    printf("%d %d\n", a, i);
} 
```

**输出**

```
0 8683508 
```

这里'a'用'0'初始化，但'i'用'垃圾值'初始化。为什么？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-12-27T05:31:38.237

因为根据*C 标准*，情况就是这样。原因是效率：

*   *静态*变量在*编译时*初始化，因为它们的地址是已知且固定的。将它们初始化为`0`不会产生运行时成本。

*   *自动*变量对于不同的调用可以有不同的地址，并且每次调用函数时都必须在*运行时*进行初始化，从而产生可能不需要的运行时成本。如果您确实需要该初始化，请请求它。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-12-27T10:11:12.120

`global`变量在初始化时存储在数据段 (DS) 中，`static`在未初始化时存储在数据段 (BSS) 中。

这些变量有一个固定的内存位置，内存是在编译时分配的。

因此`global`，`static`变量具有`'0'`它们的默认值。

而`auto`变量存储在堆栈中，并且它们没有固定的内存位置。

内存在运行时分配给`auto`变量，而不是在编译时。因此`auto`变量的默认值是垃圾。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-27T05:40:32.543

您选择了简单的变量，但请考虑：

```
void matrix_manipulation(void)
{
    int matrix1[100][100];
    int matrix2[100][100];
    int matrix3[100][100];

    /* code to read values for matrix1 from a file */
    /* code to read values for matrix2 from a file */
    /* code to multiply matrix1 by matrix2 storing the result in matrix3 */
    /* code to use matrix3 somehow */
} 
```

如果系统将数组初始化为 0，那么努力就会白费；初始化被函数的其余部分覆盖。C 尽可能避免隐藏成本。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-27T05:31:51.190

全局变量在`main`函数启动之前分配和初始化，而局部变量在程序实例运行时在堆栈上生成。

# html - HTML, 引导 CSS

> ID：14049780
> 
> 赞同：1
> 
> 时间：2012-12-27T05:30:03.890
> 
> 标签：html, css, twitter-bootstrap

IE8 及以下版本不包含 Bootstrap css。

我在我们的文件中包含了引导响应 css。并为特色产品赋予类名“row-fluid”。对于特色产品中的每个包装图像，我将类名命名为“span3 prod-new features-list”。

看[这里](http://demo2.softsolutions4u.com/newts4u/includes/templates/ts4u/css/stylesheet_bootstrap.css)

IE8 的开发工具中包含但未添加样式。因此，图像包装器在 IE8 及以下版本中显示为块级元素。请检查[此](http://demo2.softsolutions4u.com/newts4u/)链接，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:22:44.590

作为记录，这是使用 IE7 和 IE8 获得响应行为的一种方法。如上所述，问题在于这些旧浏览器不支持@media 请求。

解决方案是在较旧的 IE7 和 IE8中使用[respond.js 。](https://github.com/scottjehl/Respond)

您可以通过下载 respond.js，将其安装在您的网站上并将以下内容放在页面顶部来完成此操作

```
<!--[if (lt IE 9) & (!IEMobile)]>
<script src="path-to/respond.js"></script>
<![endif]--> 
```

或者您可以使用[Modernizr](http://modernizr.com)来测试访问者的浏览器是否支持媒体查询以及是否不加载 respond.js。下载并将respond.js保存到您的站点，如上，将以下内容放在您的页面头部

```
<script>
Modernizr.load([
{
// test if browser supports medial queries
test : Modernizr.mq('only all'),
// If not, load the respond.js file
nope : 'path-to/respond.js'
}
]);
</script> 
```

如果您无法让上述任何一种方法为您工作，您可以尝试使用[CSS3-mediaqueries.js](http://code.google.com/p/css3-mediaqueries-js/)而不是 respond.js。他们都运作良好。

祝你好运......这是网页设计的有趣时刻！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:37:54.427

响应式 Bootstrap 使用 HTML5 和**CSS3**，这是一个可悲的事实，但 IE8 和更低版本不支持。请检查 IE9 中的页面，您不会发现这种差异。您必须覆盖现有的响应式 CSS3 才能处理 IE8 版本。尝试使用媒体或屏幕宽度和高度以及其他属性。

希望这可以帮助您理解为什么它在 IE8 中不起作用

# android - 通过 android 应用程序修改 HTML

> ID：14049782
> 
> 赞同：0
> 
> 时间：2012-12-27T05:30:30.030
> 
> 标签：android, html, web-deployment

这可能看起来像一个简单的问题，但它已经困扰了我很长一段时间。

无论如何，是否可以通过连接到 Internet 的 android 应用程序修改 HTML 代码或 HTML 代码本身中的变量？

例如，如果我有一个网站[http://count.com](http://count.com)，我可以用一个按钮制作一个 android 应用程序，单击该按钮时，网站上的计数会增加（[http://count.com](http://count.com)）。网站上的 HTML 代码可以是一个变量，然后递增，或者简单的数字，发现递增。

我了解如何从 android 应用程序上的网站读取 HTML 代码，但不了解如何（或如果可能）编写它。

如果您无法提出替代方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:34:47.860

您可以在 Android 或桌面中修改 HelloWord.html（Android 通过 teamviewer 连接到桌面）。保存并 FTP 到虚拟主机并完成。

问题是：如果您不知道这一点，即使我告诉您，您也不知道该怎么做。

# php - PHP -- 需要用 2 个不同的分隔符分解一个字符串

> ID：14049783
> 
> 赞同：2
> 
> 时间：2012-12-27T05:30:38.563
> 
> 标签：php, string, explode

我有一个字符串`$newstring`，其中包含如下所示的行：

```
<tt>Thu 01-Mar-2012</tt> &nbsp; 7th of Atrex, 3009 <br> 
```

我想`$newstring`使用`<tt>`和`<br>`作为分隔符进行爆炸。

我怎样才能使用`preg_split()`或其他任何东西来爆炸它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:48:56.780

好吧，我在我的 Nexus 7 上，我发现在平板电脑上回答问题并不太优雅，但无论如何你都可以[`preg_split`](http://php.net/manual/en/function.preg-split.php)使用以下正则表达式来做到这一点：

```
<\/?tt>|</?br> 
```

请参阅此处的正则表达式：[http ://www.regex101.com/r/kX0gE7](http://www.regex101.com/r/kX0gE7)

PHP代码：

```
$str = '<tt>Thu 01-Mar-2012</tt>  7th of Atrex, 3009<br>';
$split = preg_split('@<\/?tt>|</?br>@', $str);

var_export($split); 
```

该数组`$split`将包含：

```
array ( 
    0 => '', 
    1 => 'Thu 01-Mar-2012', 
    2 => ' 7th of Atrex, 3009', 
    3 => '' 
) 
```

（见[http://ideone.com/aiTi5U](http://ideone.com/aiTi5U)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:28:48.797

```
function multiExplode($delimiters,$string) {
    return explode($delimiters[0],strtr($string,array_combine(array_slice($delimiters,1),array_fill(0,count($delimiters)-1,array_shift($delimiters)))));
} 
```

**例如：** $values = multiExplode(array("","
"),$your_string);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:57:21.187

你应该试试这个代码..

```
<?php
$keywords = preg_split("/\<tt\>|\<br\>/", "<tt>Thu 01-Mar-2012</tt> &nbsp; 7th of Atrex, 3009 <br>");
print_r($keywords);
?> 
```

查看[**CodePad**](http://codepad.org/qYVwnEZi)示例。

如果您还想包含，请`</tt>`使用`<\/?tt>|<br>`... 请参阅[**示例**](http://codepad.org/imFAt4Fy)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T06:21:26.560

如果`<tt>`and`<br/>`标签是字符串中唯一的标签，那么像这样的简单正则表达式就可以了：

```
$exploded = preg_split('/\<[^>]+\>/',$newstring, PREG_SPLIT_NO_EMPTY); 
```

表达式：分隔符分别以and
开始和结束 在这些字符之间至少需要 1 个（这是除结束符之外的*任何*字符`<``>`
`[^>]`*`>`*

 *`PREG_SPLIT_NO_EMPTY`
这是一个常量，传递给`preg_split`避免数组值为空字符串的函数：

```
$newString = '<tt>Foo<br/><br/>Bar</tt>';
$exploded = preg_split('/\<[^>]+\>/',$newstring);
//output: array('','Foo','','Bar',''); or something (off the top of my head)
$exploded = preg_split('/\<[^>]+\>/',$newstring, PREG_SPLIT_NO_EMPTY);
//output: array('Foo', 'Bar') 
```

但是，如果您要处理的不仅仅是这两个标签或变量输入（如用户提供的），您最好还是解析标记。查看 php 的`DOMDocument`类，请参阅[此处的文档](http://www.php.net/manual/en/class.domdocument.php)。

PS：看实际输出，试试`echo '<pre>'; var_dump($exploded); echo '</pre>';`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T05:54:15.157

试试这个代码..

```
 <?php

 $newstring = "<tt>Thu 01-Mar-2012</tt> &nbsp;7th of Atrex, 3009<br>";

 $newstring = (explode("<tt>",$newstring));
                   //$newstring[1] store Thu 01-Mar-2012</tt> &nbsp;7th of Atrex,      3009<br>  so do opration on that.

 $newstring = (explode("<br>",$newstring[1]));
 echo $newstring[0];
?> 

output:-->

 Thu 01-Mar-2012</tt> &nbsp;7th of Atrex, 3009 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-27T05:41:43.810

这是一个带有示例的自定义函数。

[http://www.phpdevtips.com/2011/07/exploding-a-string-using-multiple-delimiters-using-php/](http://www.phpdevtips.com/2011/07/exploding-a-string-using-multiple-delimiters-using-php/)*

# vb.net - 使用 WP 远程登录请求进行身份验证时遇到问题

> ID：14049785
> 
> 赞同：1
> 
> 时间：2012-12-27T05:31:01.390
> 
> 标签：vb.net, wordpress, login-control

好的，所以我打算在我得到的最后 3 个错误上发布这个，但我修复了所有这些（谢天谢地）。我不再收到任何类型的 cookie 阻止消息，但是现在无论我输入的是正确密码还是无效密码，我都会收到登录错误。我认为它要么 A. cookie 存储错误。B. 或重定向问题。

```
Imports System.Text
Imports System.Net
Imports System.IO

Public Class Form1

Dim logincookie As CookieContainer
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)         Handles Button1.Click
    Dim postData As String = "log=" & TextBox1.Text & "&pwd=" & TextBox2.Text & "wp-  submit=Log+In&redirect_to=""http://csvlife.com/wp-admin/" & "&wordpress_test_cookie=1"
    Dim tempcookies As New CookieContainer()
    Dim encoding As New UTF8Encoding
    Dim byteData As Byte() = encoding.GetBytes(postData)
    Dim postreq As HttpWebRequest = DirectCast(HttpWebRequest.Create("http://csvlife.com/wp-login.php"), HttpWebRequest)
    postreq.Method = "POST"
    postreq.KeepAlive = True
    postreq.AllowAutoRedirect = True
    postreq.CookieContainer = tempcookies
    postreq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0b6pre) Gecko/20100903 Firefox/4.0b6pre"
    postreq.ContentType = "application/x-www-form-urlencoded"
    postreq.Referer = "http://csvlife.com/wp-login.php"
    postreq.ContentLength = byteData.Length
    Dim postreqstream As Stream = postreq.GetRequestStream()
    postreqstream.Write(byteData, 0, byteData.Length)
    postreqstream.Close()
    Dim postresponse As HttpWebResponse
    postresponse = DirectCast(postreq.GetResponse, HttpWebResponse)
    tempcookies.Add(postresponse.Cookies)
    logincookie = tempcookies
    Dim postreqreader As New StreamReader(postresponse.GetResponseStream())
    Dim thepage As String = postreqreader.ReadToEnd
    If thepage.Contains("ERROR") Then
        MsgBox("Error logging in!")
    Else
        MsgBox("Lets Start Blogging!")
    End If
End Sub
End Class 
```

我打开了我的提琴手，我已经登录到页面，并注意到当我通过常规浏览器定期登录时，提琴手会显示：

![在此处输入图像描述](../Images/43bc0c90781955d98d25fc636f907f34.png)

然后结果进来，它看起来像这样：

![在此处输入图像描述](../Images/e13b7e74be56954d0049a0bb820042fd.png)

**澄清：上面的图片是网络流量当我从计算机上的任何基本浏览器登录时，信息看起来像**

这是我从程序登录的样子： ![在此处输入图像描述](../Images/e25461fa9e6ff30edaf28f01b6cbb628.png)

总是错误。 ![在此处输入图像描述](../Images/bf526ff240dbfa0102c59bc86513948b.png)

并且请求编号只是 200 没有 302 之前或之后。

但是，当我尝试通过我的程序时，请求编号始终保持为 200，即已发布。它就像它永远不会重定向，我不知道为什么。注意：这是我的网站，不适用于任何类型的恶意软件或其他任何东西。它只是用于博客自动化。如果我能在这件事上找到其他任何东西，我会的。在这一点上，我别无选择。感谢您的帮助和考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:56:57.000

在第 9 行：

Dim postData As String = "log=" & TextBox1.Text & "&pwd=" & TextBox2.Text & "wp- submit=Log+In&redirect_to=""http://csvlife.com/wp-admin/" & "&wordpress_test_cookie =1"

与帖子一起发送的参数需要用＆符号分隔，因为密码参数附加了“wp-submit=Log+In&redirect_to=http://csvlife.com/wp-admin/”。

假设 wp 是一个参数： Dim postData As String = "log=" & TextBox1.Text & "&pwd=" & TextBox2.Text & "&wp- submit=Log+In&redirect_to=""http://csvlife.com/wp-管理员/" & "&wordpress_test_cookie=1"

# css - JQgrid：数据显示奇怪

> ID：14049789
> 
> 赞同：0
> 
> 时间：2012-12-27T05:31:25.247
> 
> 标签：css, jqgrid

尝试将表格附加到 html 页面后，我遇到了这个问题： ![在此处输入图像描述](../Images/37ab1ec457d4055053a584e7dd8529e0.png) 并且页面具有 css 样式：

```
<meta http-equiv="refresh" content="300">
<link href="development-bundle/themes/redmond/jquery.ui.theme.css" rel="stylesheet" type="text/css" media="all">
<link href="development-bundle/themes/redmond/jquery.ui.all.css" rel="stylesheet" type="text/css" media="all">
<link href="development-bundle/themes/redmond/jquery.ui.tabs.css" rel="stylesheet" type="text/css" media="all">
<link href="development-bundle/themes/redmond/jquery.ui.dialog.css" rel="stylesheet" type="text/css" media="all">
<link href="development-bundle/themes/redmond/jquery.ui.datepicker.css" rel="stylesheet" type="text/css" media="all">
  <script type="text/javascript" language="javascript" src="js/jquery-1.8.3.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="jqGrid/css/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen" href="jqGrid/plugins/ui.multiselect.css" />
    <script src="jqGrid/js/i18n/grid.locale-en.js" type="text/javascript"></script>
    <script src="jqGrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script type="text/javascript" language="javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript" language="javascript" src="development-bundle/ui/jquery.ui.tabs.js"></script>
    <script type="text/javascript" language="javascript" src="development-bundle/ui/jquery.ui.dialog.js"></script>
    <script type="text/javascript" language="javascript" src="jquery-validate/jquery.validate.min.js"></script>
    <script type="text/javascript" language="javascript" src="development-bundle/ui/jquery.ui.datepicker.js"></script>

<style type="text/css">
    #container{ height: 700px;}
    #center_container{ 
                      background:#DDD;
                      height:700px;
                      width: 1100px;
                      margin: 0 auto;
                      }
    .ui-widget {font-size: 14px;}
    .ui-widget-content{float:left; width:1030px; margin-left:35px;background:#CEF6F5;}
    .ui-tabs .ui-tabs-panel {padding:1em 0em; width:700px; margin: 10px 10px;}
    .ui-jqgrid tr.jqgrow td {
                             white-space: normal !important;
                             font-size:0.8em;
                             height: auto;
                             }
    .ui-jqgrid-titlebar {font-size:2em; color: yellow;}
    .ui-state-highlight { background: yellow !important; }
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:57:38.023

看看这个：

```
.ui-widget-content{float:left; width:1030px; margin-left:35px;background:#CEF6F5;} 
```

删除这部分：

```
.ui-widget-content{/*float:left;*/ width:1030px; /*margin:20px auto;*/background:#CEF6F5;}
 div#gbox_list{margin-left:15px;} 
```

# android - 为BT和arduino控制的遥控车编码左右功能？

> ID：14049792
> 
> 赞同：1
> 
> 时间：2012-12-27T05:31:42.030
> 
> 标签：android, eclipse

这是我用于正向和反向的代码

```
// Drive forward

 forward_button.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if ((event.getAction() == MotionEvent.ACTION_DOWN) | (event.getAction() == MotionEvent.ACTION_MOVE)) {
                forward_button.setPressed(true);
                Arduino = (byte) (Arduino | 16);
                write(Arduino);
                return true;

            }else if (event.getAction() == MotionEvent.ACTION_UP) {
                forward_button.setPressed(false);
                Arduino = (byte) (Arduino & 236);
                write(Arduino);
                return true;
            }
            forward_button.setPressed(false);
            return false;
        }
    });

   // Back up

 reverse_button.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if ((event.getAction() == MotionEvent.ACTION_DOWN) | (event.getAction() == MotionEvent.ACTION_MOVE)) {
                reverse_button.setPressed(true);
                Arduino = (byte) (Arduino | 32);
                write(Arduino);
                return true;

            }else if (event.getAction() == MotionEvent.ACTION_UP) {
                reverse_button.setPressed(false);
                Arduino = (byte) (Arduino & 220);
                write(Arduino);
                return true;
            }
            reverse_button.setPressed(false);
            return false;
        }
    }); 
```

我正在考虑对左右功能使用相同的方式，例如；

```
 left_button.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if ((event.getAction() == MotionEvent.ACTION_DOWN) | (event.getAction() == MotionEvent.ACTION_MOVE)) {
                left_button.setPressed(true);
                Arduino = (byte) (Arduino | 8);
                write(Arduino);
                return true;

            }else if (event.getAction() == MotionEvent.ACTION_UP) {
                left_button.setPressed(false);
                Arduino = (byte) (Arduino & 244);
                write(Arduino);
                return true;
            }
            left_button.setPressed(false);
            return false;
        }
    }); 
```

这是一种方法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T01:56:45.347

```
 mLButton = (Button) findViewById(R.id.button_l);
        mLButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // Send a message using content of the edit text widget
                String message = "D," + left + "," + stop + "\n";
                sendMessage(message);
            }
        });

        });
        mRButton = (Button) findViewById(R.id.button_r);
        mRButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // Send a message using content of the edit text widget
                String message = "D," + right + "," + stop + "\r\n";
                sendMessage(message);
            } 
```

这是一个例子。

# .htaccess - 如何将对文件夹/位置的直接访问限制为特定 IP 地址

> ID：14049795
> 
> 赞同：0
> 
> 时间：2012-12-27T05:31:49.217
> 
> 标签：.htaccess, protection, restrictions, ip-restrictions

O. 这个网站对我来说就像毒品。我希望有人可以指导我完成这项任务。

我需要一个脚本/解决方法，以限制对特定文件夹或文件的直接文件访问，并仅允许通过预授权的 IP 地址访问它。

我想要完成的是能够通过我的网站上的 iframe 访问文件，并且只能访问我们的网站，但阻止访问者直接访问它的任何其他尝试。基于 IP 的限制（将我网站的 IP 地址添加到允许访问者池中并阻止其他所有人）。

www.mysite.com/public/ 通过 iframe 打开 www.mysite.com/private/FILEA.html

但 www.mysite.com/private/FILEA.html 它不能直接访问

这甚至可能吗？几天来，我一直在阅读 SO，试图找到解决方案。

如果有人能想到一个解决方案，我将永远感激不尽。

非常感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:16:40.083

> 这甚至可能吗？几天来，我一直在阅读 SO，试图找到解决方案。

不是你想的那样。您不能通过 IP 进行限制，因为当您将内容放入`www.mysite.com/private/FILEA.html`iframe 时，它*​​仍然*由客户端的浏览器加载，因此访问它的远程 IP*仍然*是客户端的 IP。您不能通过 IP 拒绝/授予访问权限。

您可以做的是阻止引用者的访问。您可以确保引用者是并且仅在请求具有该引用者`www.mysite.com/public/`时才加载文件。`FILEA.html`但是，人们可以欺骗引用者并规避这一点，因此如果他们是持久的，仍然可以直接访问文件。您可以通过放置在**文档根目录**中的 htaccess 文件中的一些重写规则来执行此操作：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !www.mysite.com/public/ [NC]
RewriteRule ^/?private/FILEA.html$ - [L,F] 
```

这意味着如果引用者*不包含* `www.mysite.com/public`并且如果请求是 for `/private/FILEA.html`，则返回 403 禁止。

当有人访问并通过 php 脚本（或其他脚本）`/public/`路由所有请求时发出临时会话 cookie 会更复杂一些，该脚本在提供私有文件​​之前验证会话 cookie 是否有效。`FILEA.html`

# iphone - 如何捕获 UIView 顶部 UIView

> ID：14049796
> 
> 赞同：2
> 
> 时间：2012-12-27T05:31:50.723
> 
> 标签：iphone, ios, uiview, uiimage

我有`UIView`它显示图表..现在我需要将它捕获到`UIImage`并用谷歌搜索它并得到下面的代码。但是如果我在我的代码中使用它它不起作用。即使我使用断点编译器也无法达到这一点。我在我的`UIView`.where 中使用这个我哪里出错了？

```
+ (UIImage *) imageWithView:(UIView *)view
{
UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

return img;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:34:28.270

您可以使用以下方法截取 iPhone 应用程序的任何视图或整个屏幕的屏幕截图

```
- (UIImage *)captureView {

//hide controls if needed
CGRect rect = [self.view bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;

} 
```

并像下面这样称呼它......

```
UIImage *tempImageSave=[self captureView]; 
```

你也可以用下面这条线保存这张图片作为相册..

```
UIImageWriteToSavedPhotosAlbum(tempImageSave,nil,nil,nil); 
```

您还可以使用下面的文档目录行保存此图像。

```
NSData *imageData = UIImagePNGRepresentation(tempImageSave);
NSFileManager *fileMan = [NSFileManager defaultManager];

NSString *fileName = [NSString stringWithFormat:@"%d.png",1];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];
[fileMan createFileAtPath:pdfFileName contents:imageData attributes:nil]; 
```

如果视图包含图层图像或一些图形相关数据，则使用以下方法。

```
-(UIImage *)convertViewToImage:(UIView *)viewTemp
{
    UIGraphicsBeginImageContext(viewTemp.bounds.size);
    [viewTemp drawViewHierarchyInRect:viewTemp.bounds afterScreenUpdates:YES];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;

} 
```

并使用这种方法，如下所示。

```
UIImage *tempImageSave = [self convertViewToImage:yourView]; 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:37:42.073

您可以像这样保存视图的图像并将图像存储到文档目录中：-

```
-(void)SaveViewAsImage
{
    UIGraphicsBeginImageContext(self.view.bounds.size);

        UIImage *saveImage = UIGraphicsGetImageFromCurrentImageContext();
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIGraphicsEndImageContext();
        NSData *imageData = UIImagePNGRepresentation(saveImage);
        NSFileManager *fileMan = [NSFileManager defaultManager];

        NSString *fileName = [NSString stringWithFormat:@"%d.png",1];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];
        [fileMan createFileAtPath:pdfFileName contents:imageData attributes:nil];

} 
```

您的图像保存在文档目录中:)

**下载此演示**

[http://www.sendspace.com/file/gjxa82](http://www.sendspace.com/file/gjxa82)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:56:05.963

尝试使用此代码可能会对您有所帮助

```
- (UIImage *)captureView:(UIView *)view {
    CGRect screenRect = [[UIScreen mainScreen] bounds];

    UIGraphicsBeginImageContext(screenRect.size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor clearColor] set];
    CGContextFillRect(ctx, screenRect);

    [view.layer renderInContext:ctx];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return newImage;
} 
```

# java - displaying contents of text in XML in java

> ID：14049801
> 
> 赞同：1
> 
> 时间：2012-12-27T05:32:05.280
> 
> 标签：java, xml

```
<iata:DepartureAirport CodeContext="3">
BOM
</iata:DepartureAirport> 
```

Now for aiat:DepartureAirport as element , code context as attribute and 9W as Text , i am not able to extract 9W from the XML , but only able to extract Code Context Value

```
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
                tempVal = "";
        if(qName.equalsIgnoreCase("iata:Airline")) {
            //create a new instance of employee
            tempEmp = new employee();
            tempEmp.setType(attributes.getValue("CodeContext"));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:54:38.653

You will get the values in the [characters](http://docs.oracle.com/javase/1.4.2/docs/api/org/xml/sax/HandlerBase.html#characters%28char%5B%5D,%20int,%20int%29) method. You have to basically do as below,

```
boolean isDepartureAirportElement = false;
StringBuffer value = new StringBuffer();

void startElement(...) {
    if (qName.equals("iata:DepartureAirport")) {
        isDepartureAirportElement = true; // set true when your element started 
        String codeContext = attributes.getValue("CodeContext")
    }
}

void characters(char[] buffer, int start, int length) {
    if (isDepartureAirportElement) {
        value.append(buffer, start, length);
    }
}

void endElement(...) {
    if (qName.equals("iata:DepartureAirport")) {
        isDepartureAirportElement = false; // set false when your element ends
    }
} 
```

Its messy using SAX. I recommend using DOM. But saying that, they have their own advantages and disadvantages. DOM is easier to code up but is generally slower and more memory expensive than SAX.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:10:42.873

First load the XML document using schema file of your xml

```
/**
     * This method reads in the xmlFile, validates it against the
     * schemaFile, and if valid, loads it into a WhitespaceFreeXMLDoc
     * and returns it, which helps because that's a much easier
     * format for us to deal with.
     * 
     * @param xmlFile Path and name of xml file to load.
     * 
     * @param schemaFile Path and name of schema file to use for validation.
     * 
     * @return A normalized Document object fully loaded with the data found
     * in the xmlFile.
     * 
     * @throws InvalidXMLFileFormatException Thrown if the xml file validation fails.

     */
    public Document loadXMLDocument(String xmlFile, String xsdFile)
            throws InvalidXMLFileFormatException
    {
        // FIRST VALIDATE
        boolean isValid = validateXMLDoc(xmlFile, xsdFile);
        if (!isValid)
        {
            throw new InvalidXMLFileFormatException(xmlFile, xsdFile);
        }

        // THIS IS JAVA API STUFF
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try
        {            
            // FIRST RETRIEVE AND LOAD THE FILE INTO A TREE
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document xmlDoc = db.parse(xmlFile);
            xmlDoc.getDocumentElement().normalize();

            // LET'S RETURN THE DOC
            return xmlDoc;
        }
        // THESE ARE XML-RELATED ERRORS THAT COULD HAPPEN DURING
        // LOADING AND PARSING IF THE XML FILE IS NOT WELL FORMED
        // OR IS NOW WHERE AND WHAT WE SAY IT IS
        catch(ParserConfigurationException | SAXException | IOException pce)
        {
            throw new InvalidXMLFileFormatException(xmlFile);
        }           
    } 
```

after having the xml in Document format, you can get that specific node using this method

```
 /**
     * This method extracts the data found in the doc argument that 
     * corresponds to the tagName and returns it as text. If no data
     * is found, null is returned. Note that this method is only good 
     * for elements that are unique to an XML file, meaning there is only 
     * one of them.
     * 
     * @param doc Fully-loaded DOM Document corresponding to a loaded
     * XML file from which we are loading the data.
     * 
     * @param tagName Name of the tag (i.e. field name) we are looking
     * to load data for.
     * 
     * @return The data in the doc that corresponds to the tagName element.
     * Note that if no data is found, null is returned.
     */
    public String getTextData(Document doc, String tagName)
    {
        // IT WAS FOUND, SO GET THE DATA
        Node node = getNodeWithName(doc, tagName);
        if (node == null)
        {
            return null;
        }
        else
        {
            String data = node.getTextContent();
            return data;   
        }
    } 
```

If you want to get the node itself instead of data in the node which is BOM

```
 /**
     * This method can be used to get the node in the document
     * that is an element of type tagName. null is returned
     * if none is found.
     * 
     * @param doc The XML document to search
     * 
     * @param tagName The name of the XML element/tag to
     * search for.
     * 
     * @return The first node found named tagName. If none is
     * found in the document, null is returned.
     */
    public Node getNodeWithName(Document doc, String tagName)
    {
         // GET THE NODE FOR THE tagName ELEMENT
        NodeList nodeList = doc.getElementsByTagName(tagName);

        // IF NOT FOUND, DON'T GO ON
        if (nodeList.getLength() == 0)
        {
            return null;
        }

        // IT WAS FOUND, SO GET THE DATA
        Node node = nodeList.item(0);
        return node;
    } 
```

let me know if you have any further questions

# google-chrome - 是否有任何 chrome 插件可以启动本地进程

> ID：14049803
> 
> 赞同：0
> 
> 时间：2012-12-27T05:32:15.197
> 
> 标签：google-chrome

我想要一个可以启动我的本地进程的插件，是否有任何现有的解决方案可用？该插件应该能够接受参数并正确启动本地 .exe 文件。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:33:46.747

不可以。插件在不允许访问本地文件系统中正在执行的程序的沙箱中执行。

# javascript - 记住饼干

> ID：14049805
> 
> 赞同：0
> 
> 时间：2012-12-27T05:32:47.550
> 
> 标签：javascript

我想制作一个 cokkie，它可以在用户在地图上选择区域时保存我在 netsoltech.com 上选择的区域，它可以保存 cookie，并且当下次用户进入域时自动转到第一次单击区域页面我制作此代码但问题是当用户下次打开时，第一个区域选择器页面来了，然后它可以刷新并转到区域页面..不是自动的......

```
<script>
/*
    Cookie script - Scott Andrew
    Popup script, Copyright 2005, Sandeep Gangadharan
*/

function newCookie(name,value,days) {
 var days = 10;   // the number at the left reflects the number of days for the cookie to last
                 // modify it according to your needs
 if (days) {
   var date = new Date();
   date.setTime(date.getTime()+(days*24*60*60*1000));
   var expires = "; expires="+date.toGMTString(); }
   else var expires = "";
   document.cookie = name+"="+value+expires+"; path=/"; }

function readCookie(name) {
   var nameSG = name + "=";
   var nuller = '';
  if (document.cookie.indexOf(nameSG) == -1)
    return nuller;

   var ca = document.cookie.split(';');
  for(var i=0; i<ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
  if (c.indexOf(nameSG) == 0) return c.substring(nameSG.length,c.length); }
    return null; }

function eraseCookie(name) {
  newCookie(name,"",1); }

function toMem(region) {

    newCookie('region', region);    
    window.location= "http://www.netsoltech.com/"+region+"/index";
}

function remCookie() {

window.location= "http://www.netsoltech.com/"+readCookie("region")+"/index";

}

function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
}

addLoadEvent(function() {
  remCookie();
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:32:15.063

Try this

```
function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;

    //redirect here
}

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
}

function checkCookie() {
    var region = getCookie("region");
    if (region != null && region != "") {
        alert("redirect to " + region); //replace this with redirect
    }
}

checkCookie();  //check this on page load 
```

and the **HTML**

```
<a href="#" onclick="setCookie('region', 'europe', 365); return false;">europe</a> 
```

**JSFiddle**

[http://jsfiddle.net/YtF2B/6/](http://jsfiddle.net/YtF2B/6/)

# mysql - MySQL Inner Join 两个表上第二个表的最大值

> ID：14049806
> 
> 赞同：2
> 
> 时间：2012-12-27T05:32:54.543
> 
> 标签：mysql, sql, select, subquery

我有两个表“列表”和“出价”。我有一个查询将返回特定用户出价的所有列表，其中 end_date 已过去。不过，我需要做的是进一步限制结果，以仅查找用户出价并且是最后出价者的列表。这是我到目前为止的查询...

```
SELECT listings.end_date, listings.user_id, listings.title, listings.auc_fp, listings.id, listings.auc_image1 
FROM listings INNER JOIN bids ON listings.id = bids.listing_id 
WHERE bids.user_id=$userid 
AND listings.end_date < NOW() 
ORDER BY list_ts DESC" 
```

我不擅长子查询，我假设我需要在这里找到“bids”表中的所有用户出价，其中bid_ts（出价时间戳）是出价中相应listing_id的最新时间戳桌子。我的bids 表中的列是：listing_id、user_id、bid、bid_ts。

```
+------------+---------+------+---------------------+
| listing_id | user_id | bids | bid_ts              |
+------------+---------+------+---------------------+
|  1         | 10      | 100  | 2012-11-16 00:54:03 |
|  1         | 11      | 101  | 2012-11-16 00:54:04 |
|  2         | 10      | 33   | 2012-11-16 00:54:03 | 
|  2         | 11      | 34   | 2012-11-16 00:54:04 |
|  2         | 12      | 35   | 2012-11-16 00:54:05 |
+------------+---------+------+---------------------+ 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:55:40.527

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT listing_ID, user_ID, MAX(bid_ts) maxDate
            FROM tableName
            GROUP BY listing_ID, user_ID
        ) b ON  a.listing_ID = b.listing_ID AND
                a.user_ID = b.user_ID AND
                a.bid_ts = b.maxDate 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d8226/3)

# php - 将数据传递给 AJAX 调用

> ID：14049809
> 
> 赞同：0
> 
> 时间：2012-12-27T05:32:58.850
> 
> 标签：php, jquery, mysql, ajax

嘿，所以我试图通过 AJAX 调用将数据放入这个 div

```
 <div class="scroll-pane2 blue small" style="">
            <p id="bulletinBodyArea" style="margin-right:20px;"></p>    
        </div> 
```

当单击从数据库提供的链接之一时，将触发 AJAX

```
 <div class="bulletinSectionAccordion rounded">
            <p class="blue" style="font-size:19px;margin-left:23px;margin-top:15px;margin-bottom:10px;">Archives</p>
        <?php

            $query = "SELECT * FROM `bulletin`  LEFT JOIN `bulletininschool` ON `bulletin`.`id`=`bulletininschool`.`bulletin` WHERE `school` = 2 ";
            $result=$connection->query($query);

          while($row = $result->fetch_array()) {
            echo  '<p class="medium titi" style="margin-left:23px;">'.$row['title'].'</p>';
          }
        ?>
        </div> 
```

它被调用然后传递数据

```
 $(".titi").click(
        getBody
  );

    function getBody(){
      $("#bulletinBodyArea").load('update/getBody.php');
    }; 
```

这是 AJAX 功能

```
<?php
$section='bulletin';
$table="bulletin";
$schoolSelectorTable="bulletininschool";
$schoolSelector="bulletin";

    $db_host = "localhost";
    $db_user = "root";
    $db_pass = "";
    $db_name = "isl";

mysql_connect($db_host, $db_user, $db_pass, $db_name);
mysql_select_db("isl") or die(mysql_error());

$states = mysql_query("SELECT * FROM `bulletin` LEFT JOIN `bulletininschool` ON `bulletin`.`id`=`bulletininschool`.`bulletin` WHERE `school` = 2" );

while($state = mysql_fetch_array($states)){
    echo "<p>".$state['body']."</p>";
}
?> 
```

现在，从数据库提供的单击链接实际上是文章标题，然后当单击特定标题时，AJAX 调用应该去获取与该文章关联的正文文本。但我无法理解我应该如何度过难关。我正在做正确的查询并获取标题和正文，但我无法弄清楚如何将它们关联起来。我是否将变量传递给 AJAX 调用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:06:17.540

```
 $(document.ready( function() {
        $(".titi").click( function() { // you had a syntax error here also
             getBody();
        });
  });
  function getBody(){
        $("#bulletinBodyArea").load('update/getBody.php');
  }; 
```

您的代码中有语法错误，它应该是 getBody(); 不仅getBody！使用文件准备功能！

# javascript - SSE 未捕获错误：SECURITY_ERR：DOM 异常 18，服务器提供服务器发送事件 (SSE)

> ID：14049810
> 
> 赞同：6
> 
> 时间：2012-12-27T05:33:03.727
> 
> 标签：javascript, html, server-sent-events

我正在尝试将浏览器与提供服务器发送事件 (SSE) 的服务器连接。此服务器具有与原始服务器不同的域。例如，如果您调用`http://d1.example.com/page`此页面将尝试连接到上的 SSE 频道`http://d2.example.com/subscribe`。尝试这样做会提示以下错误：

`Uncaught Error: SECURITY_ERR: DOM Exception 18`

在线上：

`var source = new EventSource("http://d2.example.com/subscribe")`

我该如何解决？

**更新（我尝试过的解决方案）：**

1-CORS

我通过添加到我的 web 服务的标头来尝试[CORS](http://enable-cors.org/)。它没有解决问题，即使来自页面的调用现在工作正常！我认为 SSE 适用于正常的 HTTP 请求，那么为什么它不适用于 Chrome？`Access-Control-Allow-Origin:*``d2.example.com``EventSource``$.get("http://d2.example.com")``d1.example.com`

2-重定向

我正在使用 httpd 服务器，因此我在`d1.example.com`虚拟主机中创建了一个重定向规则，将 SSE 请求传递到`d2.example.com`. 它与 Firefox 完美配合。另一方面，Chrome 没有提示任何错误，也没有连接到 SSE 服务器。看起来它转储了整个`EventSource`命令。看起来这个解决方案永远不会起作用，所以让我们继续......

3-反向代理

连接的两个浏览器`d1.example.com/subscribe`基本上都是`d2.example.com`通过反向代理连接的。但是`on_close`即使浏览器关闭，事件也永远不会被捕获。这是有道理的，因为 d2 服务器现在正在与代理服务器建立通道。如何将`on_close`事件从代理服务器转发到 d2？

是否有任何不同的方法可以使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T06:23:08.230

这是一个跨域资源共享问题的可能性很高，您必须在相关域上启用它。

[http://enable-cors.org/](http://enable-cors.org/)

正如[MDN](https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events)所说：

> 注意：虽然它还不是标准的一部分，但 EventSource 在 Firefox 11 及更高版本中支持 CORS。预计这将很快成为标准。

# javascript - 在 ASP.NET MVC 中：从 Razor 视图调用控制器操作方法的所有可能方式

> ID：14049817
> 
> 赞同：57
> 
> 时间：2012-12-27T05:33:29.403
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, razor

我知道这是一个非常基本的问题。

但是你能告诉我***所有可能的选项***， ***从 Razor 视图***
调用控制操作方法[通常是任何服务器端例程]，以及 在哪些***场景中最适合***使用。

 **谢谢。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-27T06:02:40.477

**方法一：**使用jQuery Ajax Get 调用（**部分页面更新**）。

适用于需要从数据库中检索 json 数据的情况。

**控制器的动作方法**

```
[HttpGet]
public ActionResult Foo(string id)
{
    var person = Something.GetPersonByID(id);
    return Json(person, JsonRequestBehavior.AllowGet);
} 
```

**jQuery GET**

```
function getPerson(id) {
    $.ajax({
        url: '@Url.Action("Foo", "SomeController")',
        type: 'GET',
        dataType: 'json',
        // we set cache: false because GET requests are often cached by browsers
        // IE is particularly aggressive in that respect
        cache: false,
        data: { id: id },
        success: function(person) {
            $('#FirstName').val(person.FirstName);
            $('#LastName').val(person.LastName);
        }
    });
} 
```

**人物类**

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

**方法2：**使用jQuery Ajax Post 调用（**部分页面更新**）。

适用于需要将部分页面发布数据到数据库时。

Post 方法也和上面一样，只是将 `[HttpPost]`Action 方法和类型替换`post`为 jquery 方法。

有关更多信息，请[**在此处查看将 JSON 数据发布到 MVC 控制器**](http://lozanotek.com/blog/archive/2010/04/16/posting_json_data_to_mvc_controllers.aspx)

**方法三：**作为表单发布场景（**整页更新**）。

适用于需要将数据保存或更新到数据库中时。

**看法**

```
@using (Html.BeginForm("SaveData","ControllerName", FormMethod.Post))
{        
    @Html.TextBoxFor(model => m.Text)

    <input type="submit" value="Save" />
} 
```

**动作方法**

```
[HttpPost]
public ActionResult SaveData(FormCollection form)
    {
        // Get movie to update
        return View();
   } 
```

**方法四：**作为Form Get场景（**整页更新**）。

适用于需要从数据库获取数据的时候

Get 方法也和上面一样，只是替换 `[HttpGet]`Action 方法和`FormMethod.Get`View 的 form 方法。

我希望这对你有帮助。**

# ruby-on-rails - Rails 试图将字符串转换为日期时间，但它没有保存到 db

> ID：14049818
> 
> 赞同：1
> 
> 时间：2012-12-27T05:33:40.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试使用文本字段作为用户将生日编辑为日期的地方。有了这个例子，我正在研究，还没有生日。我要添加的生日是`03/21/1986`.

这是控制器方法：

```
# PUT /contacts/1/edit
    # actually updates the users data
    def update_user

        @userProfile = User.find(params[:id])
        @userDetails = @userProfile.user_details

        respond_to do |format|

            if @userProfile.update_attributes(params[:user]) 

                format.html {
                    flash[:success] = "Information updated successfully"
                    redirect_to(edit_profile_path)
                }
            else 

                format.html {
                    flash[:error] = resource.errors.full_messages
                    render :edit
                }
            end
        end
    end 
```

这是模型方法。您可以看到我在 :birthday 上调用验证方法将其转换为日期。一切似乎都正常，但没有任何东西保存到数据库中，我也没有收到任何错误。

```
# validate the birthday format
  def birthday_is_date
    p 'BIRTHDAY = '
    p birthday_before_type_cast

    new_birthday = DateTime.strptime(birthday_before_type_cast, "%m/%d/%Y").to_date
    p new_birthday

    unless(Chronic.parse(new_birthday).nil?)
        errors.add(:birthday, "is invalid")
    end

    birthday = new_birthday
  end 
```

这是我的模型验证方法中 p 语句的打印输出

```
"BIRTHDAY = "
"03/21/1986"
1986-03-21 12:00:00 -0600 
```

我也刚刚注意到，如果我做一个日期`10/10/1980`，它工作得很好，如果我做一个日期`21/03/1986`，我得到一个`invalid date`错误。

**编辑** 这里有一些可能有帮助的信息：

看法：

```
<%= form_for(@userProfile, :url => {:controller => "contacts", :action => "update_user"}, :html => {:class => "form grid_6 edit_profile_form"}, :method => :put ) do |f| %>
...
<%= f.fields_for :user_details do |d| %>
<%= d.label :birthday, raw("Birthday <small>mm/dd/yyyy</small>") %>                         
<%= d.text_field :birthday %>
...
<% end %> 
```

用户模型

```
class User < ActiveRecord::Base
 ...

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :login, :home_phone, :cell_phone, :work_phone, :birthday, :home_address, :work_address, :position, :company, :user_details_attributes

  validates_presence_of :email

  has_one :user_details, :dependent => :destroy
  accepts_nested_attributes_for :user_details
end 
```

user_details 模型

```
require 'chronic'

class UserDetails < ActiveRecord::Base
  belongs_to :user

  validate :birthday_is_date

  attr_accessible :first_name, :last_name, :home_phone, :cell_phone, :work_phone, :birthday, :home_address, :work_address, :position, :company
# validate the birthday format
      def birthday_is_date
        p 'BIRTHDAY = '
        p birthday_before_type_cast

        new_birthday = DateTime.strptime(birthday_before_type_cast, "%m/%d/%Y").to_date
        p new_birthday

        unless(Chronic.parse(new_birthday).nil?)
            errors.add(:birthday, "is invalid")
        end

        birthday = new_birthday
      end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:53:52.990

```
def birthday_is_date
    begin
        birthday = DateTime.strptime(birthday_before_type_cast, "%m/%d/%Y").to_date
    rescue
        errors.add(:birthday, "is invalid")
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:45:24.900

我最终使用了一个虚拟属性，它现在似乎可以工作了。

我将此添加到我的模型中

```
attr_accessible :birthday_string

def birthday_string
    @birthday_string || birthday.strftime("%d-%m-%Y")
  end

  def birthday_string=(value)
    @birthday_string = value
    self.birthday = parse_birthday
  end

  private

  def birthday_is_date
    errors.add(:birthday_string, "is invalid") unless parse_birthday
  end

  def parse_birthday
    Chronic.parse(birthday_string)
  end 
```

# javascript - 与 onmouseover 和 onmouseout 斗争

> ID：14049824
> 
> 赞同：2
> 
> 时间：2012-12-27T05:34:11.463
> 
> 标签：javascript, onmouseover, onmouseout

我正在与 onmouseover 和 onmouseout 作斗争。

我去过的每个网站几乎都显示了这种语法。我实际上是从 Mozilla 复制粘贴的。我遇到的问题是它立即调用 largeDiv 和 smallDiv 函数。（最终，我希望在鼠标悬停事件期间将新类应用于 div，并在鼠标悬停时返回旧类。）我很确定我的鼠标事件是罪魁祸首。我也想知道我的 onload 函数是否引起了任何问题，但是当我将其注释掉时，唯一改变的是小 div 没有按预期加载。

我尝试使用事件侦听器，以为我没有正确调用事件，但这根本不起作用，尽管我不确定我是否正确编码，并且在这该死的东西上没有花费超过一个小时！我已经尝试了很多调整，camelcasing onmouseover，使用括号等......无论如何，这里是代码：

```
var introEl = document.getElementById("intro");

//display large div by default and 
//use small div with js enabled
window.onload = function(){
    introEl.className = "small";
}

    function largeDiv(){
    console.log("It Worked");
};

    function smallDiv(){
    console.log("Mouse Out!");
};

introEl.onmouseover = largeDiv();
introEl.onmouseout = smallDiv(); 
```

我在浏览器中对此进行了编码，当我将其复制到[jsFiddle](http://jsfiddle.net/hGQL7/)以提出这个问题时，它不会在加载时加载小 div，但它确实记录了语句。我把它放在[CodePen](http://codepen.io/joe/pen/GxeaC)上，它就像我描述的那样工作。不知道是什么原因造成的，但这是第二次发生这种情况。

顺便说一句，如果你去 CodePen 或 jsFiddle，我知道我的设计能力是欠缺的。我这样做只是为了一个游乐场，以及一个保存有效代码的地方，比如笔记本。我向你保证，情况会变得更糟。

一如既往，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:58:09.597

```
var introEl = document.getElementById("intro");

//display large div by default and 
//use small div with js enabled
window.onload = function(){
    introEl.className = "small";
}

    function largeDiv(){
    console.log("It Worked");
};

    function smallDiv(){
    console.log("Mouse Out!");
};

introEl.onmouseover = largeDiv; // here you don't need "()" with your defined functions
introEl.onmouseout = smallDiv; // here you don't need "()" with your defined functions 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T05:58:13.417

请转到以下小提琴，我做了一些小改动，对我来说效果很好

[小提琴](http://jsfiddle.net/hGQL7/1/)

你也可以用

```
<div id="intro" onmouseover="largeDiv();" onmouseout="smallDiv();">
    Mouse over this text
</div> 
```

请参阅此处的工作示例[小提琴 2](http://jsfiddle.net/hGQL7/2/)

# javascript - 尝试将节点中的值转换为数组，克隆特定元素并将数组项附加到具有类的该节点

> ID：14049830
> 
> 赞同：0
> 
> 时间：2012-12-27T05:34:42.957
> 
> 标签：javascript, jquery

```
<body>
    <section id="que-container">
        <div class="num" style="display: none">1000</div>
        <section id="numberContainer">
            <span class="number"></span>
        </section>

        <br class="clear">
    </section>
    <script src="components/jquery/jquery.min.js"></script>
    <script src="components/bootstrap/js/bootstrap-button.js"></script>
    <script src="components/bootstrap/js/bootstrap-carousel.js"></script>
    <script src="js/scripts.js"></script>
    <script>
    $(document).ready(function(){
        var numbers = $('.number');
        var num = $(".num").html();
        var arr = num.split('');

        for (var i = 1; i < arr.length ; i++) {
            $('#numberContainer').append(numbers.clone());
            $('.number').append(arr[i]);
        }

        $('.number').each(function(i, val) {
            $(this).addClass('numStyle');
        })
    });
    </script>
</body> 
```

我正在尝试获取 '.num' div 中的值，将其转换为数组并将数组的项目附加到具有 'number' 类的跨度内的 '#numberContainer' 中。我在控制台上没有收到任何错误，但代码似乎不起作用。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:15:03.550

您的代码必须是这样的，因为数组是`0`基于索引的：

小提琴：http: [//jsfiddle.net/DZJ6p/](http://jsfiddle.net/DZJ6p/)

```
var numbers = $('.number');
var num = $(".num").html();
var arr = num.split('');

for (var i = 0; i < arr.length; i++) {
   $('#numberContainer').append(numbers.clone().append(arr[i]));
}

$('.number').each(function(i, val) {
   $(this).addClass('numStyle');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:38:00.340

你这里有一个错误的选择器

```
$('.numbers').append(arr[i]); // i didn't find any element with numbers class 
```

它应该是

```
 $('.number').append(arr[i]); 
```

**或者**

```
 numbers.append(arr[i]); 
```

**更新**

你的 for 循环以 var i 作为 1 开头...所以它缺少 arr 的第一个索引，即 arr[0]，我在你的代码中使用了这个。

```
$('#numberContainer').append(numbers.clone().append(arr[i]));  // u can use text(arr[i])) here 
```

这是小提琴...

[http://jsfiddle.net/zLHxV/](http://jsfiddle.net/zLHxV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:49:42.570

我不确定你为什么使用`$('#numberContainer').append(numbers.clone());`. 你能看看我把你的代码放在那里的[js fiddle吗？](http://jsfiddle.net/5LBMz/)

# c - 在C中的UART中接收未定义大小的消息

> ID：14049835
> 
> 赞同：3
> 
> 时间：2012-12-27T05:35:20.197
> 
> 标签：c, arm, uart, lpc

我正在为 LPC2148 编写自己的驱动程序，我想到了一个问题。如何在 UART 中接收未指定大小的消息？

唯一想到的两件事是： 1 - 配置看门狗并在时间用完时结束接收。2- 使得无论何时向其发送消息，都必须有消息结束字符。

在我看来，第一个选择似乎更好，但我想知道是否有人有更好的答案，我知道肯定有。

非常感谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T06:40:18.347

只需给调用者到目前为止您收到的任何字节。UART 驱动程序不应该尝试实现应用程序协议，应用程序应该这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T06:04:57.087

看门狗似乎是错误的用途。我最终为这个问题提供了三种解决方案：

1.  使用固定大小的数据包和 DMA；因此，您每次交易都会收到一个数据包。显然，在你的情况下这是不可能的。
2.  逐个字符地接收消息，直到收到消息结束字符。容易出错，因为 EOM 字符可能会出现在数据中。
3.  在每个数据包之前使用固定大小的标头。在标头中，存储有效负载大小和/或消息类型 ID。

第三种方法可能是最好的方法。您可以将它与第一个相结合，即使用 DMA 接收标头，然后接收数据（在第二个事务中，在从标头中知道数据大小之后）。它也是最灵活的方法之一。

还要担心的另一件事是保持字节流同步。UART输入缓冲区中可能有垃圾，可能会被读取为数据，或者在MCU上电后您只能获得一部分数据包（即此时数据包的开头已经发送）。为避免这种情况，您可以在数据包标头中添加魔术字节，可能还有 CRC。

**编辑**

好的，还有一个选项 :) 只需将收到的所有内容存储在不断增长的缓冲区中以备后用。这基本上就是 PC 驱动程序所做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T06:48:16.450

真正的嵌入式 uart 驱动程序通常使用[环形缓冲区](http://en.m.wikipedia.org/wiki/Circular_buffer)。字节按顺序存储，客户端承诺在缓冲区满之前从缓冲区中读取。然后状态机可以多次处理消息，而无需看门狗告诉它接收结束

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T07:19:00.230

最好选择选项 2）将传输字符的结尾附加到传输字符串。

但我建议添加传输开始也以验证您正在接收实际传输。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T07:25:52.733

看门狗定时器用于在设备出现意外行为时重置系统。我认为最好使用可以存储应用程序所需数据大小的缓冲区。

# android - 警告：无法序列化 1.0

> ID：14049838
> 
> 赞同：1
> 
> 时间：2012-12-27T05:35:45.327
> 
> 标签：android, web-services, soap, wsdl, android-ksoap2

我是安卓新手。我正在创建一个使用 Web 服务的计算器应用程序。Web 服务是 SOAP。所以我包含一个带有依赖项的 Ksoap2.jar 文件。我从双数据类型的编辑文本中获取输入并将其传递给 Web 服务。此 Web 服务调用也将参数作为 double 并从服务器调用函数添加，该添加完成并返回结果。

我的 android equal button 调用 web 服务的代码是：

```
private void onEqualsButtonClick() {        
    secondNumber = Double.parseDouble(editTextInput.getText().toString());
    //secondNumber = Integer.parseInt(editTextInput.getText().toString());
    editTextInput.setText("");
    if(flag==1){            
        //Initialize soap request + add parameters
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

        //Use this to add parameters
        request.addProperty("number1",firstNumber);
        request.addProperty("number2",secondNumber);

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        try {
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
              androidHttpTransport.debug = true;
              //this is the actual part that will call the  
              androidHttpTransport.call(SOAP_ACTION, envelope);
              // Get the SoapResult from the envelope body.
              SoapObject result = (SoapObject)envelope.bodyIn;
              if(result != null){
                    //Get the first property and change the label text
                    editTextInput.setText(""+result.getProperty(0).toString());
              } else{
                    Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
              }
        } catch (Exception e) {
              e.printStackTrace();
        } 
```

Web服务的wsdl是：

```
<definitions
 name="Calculate_WebService"
 targetNamespace="http://calculatorapplication.ocs.com/"
 xmlns="http://schemas.xmlsoap.org/wsdl/"
 xmlns:tns="http://calculatorapplication.xxx.com/"
 xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"
 xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
>
<types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://calculatorapplication.ocs.com/"
         elementFormDefault="qualified" xmlns:tns="http://calculatorapplication.xxx.com/"
         xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:soap11-enc="http://schemas.xmlsoap.org/soap/encoding/">
        <element name="getAddition" type="tns:getAddition"/>
        <complexType name="getAddition">
            <sequence>
                <element name="number1" type="double"/>
                <element name="number2" type="double"/>
            </sequence>
        </complexType>
        <element name="getAdditionResponse" type="tns:getAdditionResponse"/>
        <complexType name="getAdditionResponse">
            <sequence>
                <element name="return" type="double"/>
            </sequence>
        </complexType>
    </schema>
</types>
<message name="Calculate_WebService_getAddition">
    <part name="parameters" element="tns:getAddition"/>
</message>
<message name="Calculate_WebService_getAdditionResponse">
    <part name="parameters" element="tns:getAdditionResponse"/>
</message>
<portType name="Calculate_WebService">
    <operation name="getAddition">
        <input message="tns:Calculate_WebService_getAddition"/>
        <output message="tns:Calculate_WebService_getAdditionResponse"/>
    </operation>
</portType>
<binding name="Calculate_WebServiceSoapHttp" type="tns:Calculate_WebService">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="getAddition">
        <soap:operation soapAction=""/>
        <input>
            <soap:body use="literal"/>
        </input>
        <output>
            <soap:body use="literal"/>
        </output>
    </operation>
</binding>
<service name="Calculate_WebService">
    <port name="Calculate_WebServiceSoapHttpPort" binding="tns:Calculate_WebServiceSoapHttp">
        <soap:address location="http://xxx.xxx.x.xxxx/Calculator_Application_WebServices-Calculator_Application-context-root/Calculate_WebServiceSoapHttpPort"/>
    </port>
</service> 
```

我收到警告，输出为：

```
12-27 10:40:22.221: W/System.err(331): java.lang.RuntimeException: Cannot serialize: 1.0
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:708)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:692)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:661)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:645)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:702)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:618)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:198)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.transport.Transport.createRequestData(Transport.java:111)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:119)
12-27 10:40:22.241: W/System.err(331):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
12-27 10:40:22.241: W/System.err(331):  at com.ocs.calculatorapplication.Acivity.CalculatorActivity.onEqualsButtonClick(CalculatorActivity.java:189)
12-27 10:40:22.251: W/System.err(331):  at com.ocs.calculatorapplication.Acivity.CalculatorActivity.onClick(CalculatorActivity.java:122)
12-27 10:40:22.251: W/System.err(331):  at android.view.View.performClick(View.java:2485)
12-27 10:40:22.251: W/System.err(331):  at android.view.View$PerformClick.run(View.java:9080)
12-27 10:40:22.251: W/System.err(331):  at android.os.Handler.handleCallback(Handler.java:587)
12-27 10:40:22.251: W/System.err(331):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-27 10:40:22.251: W/System.err(331):  at android.os.Looper.loop(Looper.java:123)
12-27 10:40:22.251: W/System.err(331):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-27 10:40:22.261: W/System.err(331):  at java.lang.reflect.Method.invokeNative(Native Method)
12-27 10:40:22.261: W/System.err(331):  at java.lang.reflect.Method.invoke(Method.java:507)
12-27 10:40:22.271: W/System.err(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-27 10:40:22.271: W/System.err(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-27 10:40:22.271: W/System.err(331):  at dalvik.system.NativeStart.main(Native Method) 
```

我应该在代码中做哪些更改。请尽快给我建议...

还有其他 API 方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:58:18.000

是的，我解决了这个问题。我使用 Marshal Class 来解决这个问题。marshal类的代码如下：

```
import org.ksoap2.serialization.Marshal;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlSerializer;

public class MarshalDouble implements Marshal {
    public Object readInstance(XmlPullParser parser, String namespace, String name,
                           PropertyInfo expected) throws IOException, XmlPullParserException {
        return Double.parseDouble(parser.nextText());
    }

    public void register(SoapSerializationEnvelope cm) {
        cm.addMapping(cm.xsd, "double", Double.class, this);
    }

    public void writeInstance(XmlSerializer writer, Object obj) throws IOException {
        writer.text(obj.toString());
    }
} 
```

该类的实现如下：

```
//Marshal class.
MarshalDouble marshaldDouble = new MarshalDouble();
marshaldDouble.register(envelope); 
```

希望这对大家有很大帮助。

# css - 在 body 元素上使用 ID 属性选择器（不是 #id）来命名 CSS 文件是否容易出错？

> ID：14049851
> 
> 赞同：2
> 
> 时间：2012-12-27T05:36:34.270
> 
> 标签：css, css-selectors, sass, erb, css-specificity

我正在使用 Sass 将我的 SCSS 样式表编译成单个`assembled.css`以减少 HTTP 请求。为了命名单个页面的样式，我将每个页面特定的 CSS 文件包装在该页面`<body>`元素的 ID 选择器中 - 例如：

```
body#support {

    .introduction {
        @extend %dropcap;
    }

} 
```

在 nanoc（使用 ERB）中，我有一个帮助程序，它根据 HTML 文件夹结构为每个页面的正文分配一个以破折号分隔的唯一 ID，因此根页面将是`#support`或`#products`，而它们的子页面将具有类似 `#products 的 ID -巨型空间激光”。

我想制定一组仅适用于这些“产品”子页面（不包括根级`#products`页面本身）的 SCSS 规则。如果我为此使用属性选择器而不是 ID，有什么我应该注意的关于特异性的，如下所示？

```
body[id^="products-"] {

    .introduction {
        @extend %dropcap;
    }

} 
```

我真的不想使用`!important`，但我确实想确保这些特定于页面的规则优先于在 @import 顺序中位于它们之前的 '_base.scss' 部分中设置的样式。鉴于我可以完全控制 HTML 结构，理论上我也可以在 Sass 文件中使用 Erb 来替换以逗号分隔的 ID 列表，如下所示：

```
body#products-giantspacelaser,
body#products-laboratorycamouflage,
body#products-resurrecteddinosaur {

    .introduction {
        @extend %dropcap;
    }

} 
```

- 但这似乎很不雅。提前致谢。

**编辑：**

我以非常依赖级联的方式编写了其他样式：

1.  规范化 CSS
2.  HTML5 Boilerplate 和我自己的明智的家规
3.  CSS 库（在本例中为 Bourbon & Neat）
4.  一个“_source.scss”，它依次导入自己的 mixins 和占位符选择器。
5.  一个“_base.scss”，用于设置每个页面的默认布局框架。
6.  一系列 .scss 文件用于每个页面的单独内容样式 - 我希望在必要时*覆盖*base.scss 布局决策（如果页面需要严重偏离规范）。

无论哪种方式，这些单独的页面样式表肯定需要*比*早期的默认设置具有更高的特异性，因为它们是为特定目的和页面编写的。我故意不使用任何 ID 选择器，除了这个特定目的 - 命名空间页面样式表。

使用，说

```
.services .sharktraining .introduction .disarmingJoke {}  --0,0,4,0 
```

在“_base.scss”中会超过

```
body[id^="products-"] .disarmingJoke {}                   --0,0,2,1 
```

在更进一步的级联“products.scss”中，不是吗？（注意，我知道需要使用四个类是一种糟糕的做法，我只是不想担心某些东西会从命名空间中溜走）。

我想还有另一个 - 非常肮脏的 - 选项：多次重复 `body[id^="products-"]`选择器，甚至超过最具体的班级强度规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:11:26.597

这将不得不取决于您如何编写其他样式以及它们是否应该优先（参见：[http ://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-应该知道/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/) )。

如果您完全匹配选择器，但将其中一个与您的主体选择器相匹配，则前缀一个将足够具体，无论如何都可以优先考虑（即使顺序颠倒了）：

```
body[id^="products-"] .widget {
    color: green;
}

.widget {
    color: red;
} 
```

将`.widget`是绿色的，因为第一个选择器比第二个选择器更具体。

在 id 上使用属性选择器的唯一*问题*是您是否关心 IE6。如果您对此感到担忧，Dean Edwards 的 IE7 JS 库可以为您提供帮助： [http ://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)

如果可以选择更改页面信息附加到 body 元素的方式，我的建议是让父目录为 id，子页面为类：

```
<body id="products" class="giantspacelaser" /> 
```

这样您就可以保留 id 的特异性：

```
// excludes the body#products page, which wouldn't have a class set at all
body[class]#products { 
    // styling here
} 
```

# ajax - 异步加载网站内容

> ID：14049855
> 
> 赞同：1
> 
> 时间：2012-12-27T05:36:57.627
> 
> 标签：ajax, asynchronous, web, loading

我认为我的问题很简单......我有一些元素，为了论证，单独的加载时间为 1 秒。假设我有 10 个。与其等待 10 秒来加载所有元素以获取内容，有没有什么办法可以在内容准备好时一个一个地加载所有内容？

作为记录，我正在使用应用程序引擎（python）。

我要问的一个很好的例子如下：

现在我有一个包含 12 个缓慢加载元素的 iframe。iframe 在页面加载后加载，但 iframe 需要 10 秒才能加载。我想要做的只是让每个元素在可用时加载（它不必在 iframe 中）。对不起，如果那非常模糊。

如果这个问题是半愚蠢的，谢谢和抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:12:09.827

答案是 Ajax，请查看 jquery 以获取简化此类操作的框架。

# jsf - java.lang.UnsupportedOperationException：无法设置 ServletRequest 参数

> ID：14049856
> 
> 赞同：2
> 
> 时间：2012-12-27T05:37:00.007
> 
> 标签：jsf, jsf-1.2, http-request-parameters

我正在开发一个 JSF 1.1 项目。

JSP：

```
<h:column>
        <f:facet name="header"> <h:outputText value="Edit" />     </f:facet>

        <h:commandLink rendered="#{(Table1_var.status == 'CONFIRMED') or (Table1_var.status == 'CHECKED_IN')}"
            action="#{Table1_var.onEditReservation}">
            <h:graphicImage id="view-details-link" alt="Drill Down on the Dynamic Link!"
                    url="images/editReservationSmall.png" styleClass="view-details-img"/>
           <f:param
                name="VastuId"
                value="#{Table1_var.id}" />                 
        </h:commandLink>

        <f:facet name="footer"><h:outputText value="Edit" /> </f:facet>                
    </h:column> 
```

在 中`<f:param>`，`VastuId`参数被分配了`id`。因为`var=Table1_var`我不知道它与类映射在哪里。但是我通过手动搜索来获得类/方法，该值可以从哪里获得：

```
public void navReservationDetail(final ActionEvent e) {
    Calendar cal1 = Calendar.getInstance();
    String rowId = FacesHelper.getRequestParameter("VastuId");
    System.out.println("ID :"+rowId);
} 
```

`FacesHelper.getRequestParameter`是

```
public static String getRequestParameter(String parameter) {
    return (String) FacesContext.getCurrentInstance().getExternalContext()
            .getRequestParameterMap().get(parameter);
} 
```

我想在不使用 UI 的情况下通过 Java 手动设置该参数。我尝试使用这个：

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().put("#{VastuId}", reservationBean.getParentReservationProperty());              
String rowId = FacesHelper.getRequestParameter("VastuId");
System.out.println("selectedVastuId = "+rowId); 
```

它在抛出异常`getRequestParameterMap().put()`

```
java.lang.UnsupportedOperationException: Cannot set ServletRequest Parameter
at org.apache.myfaces.context.servlet.RequestParameterMap.setAttribute
(RequestParameterMap.java:44)
at org.apache.myfaces.context.servlet.AbstractAttributeMap.put(AbstractAttributeMap.java:104) 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T09:40:43.800

[参数映射](http://docs.oracle.com/cd/E17802_01/j2ee/j2ee/javaserverfaces/1.1/docs/api/javax/faces/context/ExternalContext.html#getRequestParameterMap%28%29)是只读的。在 servlet 环境中，此数据结构表示 URL 的查询部分中的值（例如`http://foo/bar?queryValue=queryKey`。）服务器只能通过向浏览器发出重定向调用来更改这些值。

在基本 JSF 1.1/1.2 实现中可用的每用户读/写范围是[request](http://docs.oracle.com/cd/E17802_01/j2ee/j2ee/javaserverfaces/1.1/docs/api/javax/faces/context/ExternalContext.html#getRequestMap%28%29)和[session](http://docs.oracle.com/cd/E17802_01/j2ee/j2ee/javaserverfaces/1.1/docs/api/javax/faces/context/ExternalContext.html#getSessionMap%28%29)。

将数据放入范围时，您应该使用文字名称而不是 EL 表达式：

```
FacesContext.getCurrentInstance()
            .getExternalContext()
            .getRequestMap()
            .put("VastuId", reservationBean.getParentReservationProperty()); 
```

然后可以使用表达式`#{VastuId}`或在视图中解析此值`#{requestScope.VastuId}`。

# python - TypeError: zip 参数 #1 必须支持迭代

> ID：14049860
> 
> 赞同：17
> 
> 时间：2012-12-27T05:37:36.923
> 
> 标签：python, python-2.7, iterator, typeerror, python-zip

```
for k,v in targets.iteritems():
    price= str(v['stockprice'])

    Bids = str(u''.join(v['OtherBids']))
    Bids = Bids.split(',')

    # create a list of unique bids by ranking
    for a, b in zip(float(price), Bids):
        try:
            del b[next(i for i, e in enumerate(b) if format(e, '.4f')  == a)]
        except StopIteration:
            pass 
```

我正在从我的字典中提取数据，但似乎所有这些数据都是 unicode。我怎样才能摆脱 unicode 的废话？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-27T10:56:36.803

我认为您的代码正在给您错误消息，**TypeError: zip argument #1 must support iteration**。由于表达式，您会收到此错误`zip(float(price), Bids)`。这个简化的代码演示了错误：

```
>>> price = str(u'12.3456')
>>> bids = ['1.0', '2.0']
>>> zip(float(price), bids)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: zip argument #1 must support iteration 
```

[Python 2.x`zip()`内置库函数](http://docs.python.org/2/library/functions.html#zip)要求其所有参数都是可迭代的。`float(price)`不是可迭代的。

如果要使元组`float(price)`与数组的每个元素相结合`Bids`，可以[`itertools.repeat()`](http://docs.python.org/2/library/itertools.html#itertools.repeat)在第一个参数表达式中使用。

```
>>> import itertools
>>> price = str(u'12.3456')
>>> bids = ['1.0', '2.0']
>>> zip(itertools.repeat(float(price),len(bids)), bids)
[(12.345599999999999, '1.0'), (12.345599999999999, '2.0')] 
```

我看不出您对 Unicode 数据类型的使用与`TypeError`.

# android - 直接将“免费”Android 应用程序作为 .apk 文件分发

> ID：14049861
> 
> 赞同：5
> 
> 时间：2012-12-27T05:37:37.267
> 
> 标签：android, google-play, apk

我已经在 Google Play 上发布了 android 应用程序。希望将应用程序甚至离线作为 .apk 文件直接分发。我的应用程序是完全免费的，我们希望它应该传播给尽可能多的人。

我不确定提供 .apk 文件的优点和缺点是什么？

问题是：

1.  当连接到互联网时，Google Play 会将直接 .apk 安装计为下载吗？
2.  直接安装 .apk 的用户会得到以后发布的任何更新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:54:51.070

要回答您的问题：

1.  `.apk`是的，如果您在 Android 中单击 ，您将收到下载提示。当您打开已完成的下载时，它将提供安装（请参阅下面的警告）
2.  如果您`.apk`在 Google Play 之外提供直接下载，则不会获得“更新检查”——您必须自己进行。不完全确定如果`.apk`在 Play 商店中可用并通过直接下载会发生什么。

* * *

更容易谈论分配`.apk`自己的方法的缺点。

1.  你必须自己做所有的跟踪，如果你发布到游戏商店你会得到一些统计数据
2.  同样，您必须自己进行所有“更新检查”（通过将其写入您的应用程序或其他方式。）
3.  没有安全的方式分发您的应用程序。内置 Android 浏览器不支持通过需要身份验证的 HTTPS 流下载**
4.  Easier for users to get the source code of your app. They can download the `.apk` from your site, open it in 7zip (or similar) and have at the underlying class files. Whether or not this is a concern is really for you to decide.

**The most important reason**

Your users will have to check "Allow installation of packages from unknown sources". Your average person might not know how to do this, and may be hesitant to do so. So, it may limit your ability to gain a a wide market share.

So, in summary, ask yourself if *not* being in Google Play/Android Market is really worth the hassle that comes for both you and your users.

** Not sure if this is true with Chrome on Android -- it is certainly true with the older default browser

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T05:43:47.470

1.  Google play 收集**仅通过 Play 商店安装**的应用程序的统计信息，并使用 Google 帐户登录。[阅读有关应用程序统计信息的文档](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628)。
2.  较新版本的 Play Store 应用程序可以自动检测**是否**有任何已安装的应用程序在 Play 商店中也可用，并会通知更新。

此外，除了 Play 商店之外，还有许多第三方应用市场。您也可以在那里上传您的应用程序（并非所有应用程序都提供自动更新）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:41:46.280

1.  好像没有，如果我错了，请纠正我:)
2.  可以，前提是包名相同，并且你上传到google play的apk文件版本号大于设备中安装的版本号。

# php - PHP用谷歌图表制作图表

> ID：14049863
> 
> 赞同：1
> 
> 时间：2012-12-27T05:37:48.343
> 
> 标签：php, google-visualization

我正在尝试为我的网站每天获得的浏览量创建一个[谷歌折线图。](https://developers.google.com/chart/interactive/docs/gallery/linechart)我不太确定该怎么做。

这是使一切正常的代码：

```
<html>
<head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      5412]
    ]);

    var options = {
      title: 'Company Performance'
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

现在我想将其更改为列出每天对我的网站的总浏览量，然后将其与每天对我的网站的唯一浏览量进行比较。

查询看起来像：

```
$total = mysql_query("SELECT id, userID, ip, date FROM views WHERE userID!='1'");
$unique = mysql_query("SELECT id, userID, ip, date FROM views GROUP BY ip"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:59:53.133

总数是错误的，要每天获得它，您应该执行类似的操作

```
SELECT count(*) as nr, date FROM views WHERE userID!='1' GROUP BY date 
```

您的唯一身份访问者不是那么容易计算的。我将创建一个视图以在我的查询中使用，该视图类似于

```
SELECT count(*) as nr, data, ip FROM views WHERE userID!='1' GROUP BY date, ip ORDER BY date 
```

假设您将视图命名为 unique_views。nr 列实际上并没有使用，但它可以用于其他用途。

要获得唯一身份访问者，您应该这样做

```
SELECT count(*), date FROM unique_views GROUP BY date ORDER BY date 
```

上面的两个查询应该有相同数量的记录，因为它们都基于同一个表，所以如果你同时运行它们，你应该能够

```
$total_per_day = mysql_query("SELECT count(*) as nr, data, ip FROM views WHERE userID!='1' GROUP BY date, ip ORDER BY date");
$unique_per_day = mysql_query("SELECT count(*) as nr, date FROM unique_views WHERE userID!='1' GROUP BY date ORDER BY date"); 
```

然后你可以做一个

```
for($i=0;$i<count($total_per_day);$i++) {
   $result[] = "['" . $total_per_day[$i]["date"] . "'," . $total_per_day[$i]["nr"] . "," . $unique_per_day[$i]["nr"] . "]"
}
$str = implode(",", $result); 
```

# c# - 将 href 设置为超链接文本

> ID：14049867
> 
> 赞同：2
> 
> 时间：2012-12-27T05:37:55.910
> 
> 标签：c#, javascript, html

我从数据库中获取以下文本，`href`为空。

> 您还必须单击此链接。

我在页面加载时分配给标签的文本。我的要求是当我单击“链接”时，我需要重定向到某个页面。我应该在哪里分配`href`价值以及如何分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:40:38.857

```
<script>
var s = document.getElementByTagName("a");
s.href = ""; // here give the href value
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:50:14.053

如果您使用的是**jQuery**，则可以使用以下代码设置 href：

```
$("a").attr("href", "http://stackoverflow.com"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:54:03.240

```
document.getElementById('myAnchor').href="http://www.google.com"; 
```

很简单:)

如果您还想更改超链接的 URL 和文本...

```
<html>

<head>
<script type="text/javascript">
function myHref(){
    document.getElementById('myAnchor').innerHTML="Visit Google"
    document.getElementById('myAnchor').href="http://www.google.com"
}
</script>
</head>

<body>
    <a id="myAnchor" href="http://www.java2s.com">Visit Java2s</a>
    <form>
        <input type="button" onclick="myHref()" value="Change URL and text">
    </form>
</body>

</html> 
```

来源：[java2s](http://www.java2s.com/Code/JavaScript/HTML/ChangeURLandtextofahyperlink.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:17:30.723

在 aspx 页面中，您可以编写以下行来创建占位符

```
<div><%= linkValue %></div> 
```

并在后面的代码中创建一个全局变量

```
 string linkValue = "You also have to click on is <a href='' target='_blank'> link </a>"; 
    /* Set the page URL where you want to redirect the page. in your case get the value from database. */"; 
```

我认为这就是你想要做的。这个问题并不完全清楚。

**更新：** 如果页面中有多个链接，则需要创建链接和标签。请参阅下面的代码

```
HyperLink link1 = new HyperLink();
link1.Text = "LINK HERE";
link1.NavigateUrl = "http://somedomain.com"; 
```

并像这样添加到容器中

```
container.Controls.Add(link1); 
```

# eclipse - svn资源路径

> ID：14049869
> 
> 赞同：0
> 
> 时间：2012-12-27T05:38:06.717
> 
> 标签：eclipse, svn, subclipse

subeclipse on Eclipse4.2 我想去创建一个标签v1.1，但是路径`/tags/v1.1/xxxxx`不是`/tags/v1.1` 为什么？

![在此处输入图像描述](../Images/a9d279b264c707fab87e671c6bb24766.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:28:33.597

过去一周左右我遇到了同样的问题，但是我刚刚通过帮助安装了一个新的更新 - >检查更新，这已经为我解决了。

# macos - ZSH RPROMPT 奇怪的间距？

> ID：14049870
> 
> 赞同：9
> 
> 时间：2012-12-27T05:38:09.010
> 
> 标签：macos, command-prompt, zsh, iterm, zshrc

这是我的 ZSH 提示主题

```
function git_prompt_info() {
  ref=$(git symbolic-ref HEAD 2> /dev/null) || return
  echo "$(parse_git_dirty)$ZSH_THEME_GIT_PROMPT_PREFIX$(current_branch)$ZSH_THEME_GIT_PROMPT_SUFFIX"
}

PROMPT='$fg[yellow]%}⚡︎ $fg[cyan]%~ $(git_prompt_info)
%{$reset_color%}→ '

ZSH_THEME_GIT_PROMPT_PREFIX="[git:"
ZSH_THEME_GIT_PROMPT_SUFFIX="]$reset_color"
ZSH_THEME_GIT_PROMPT_DIRTY="$fg[red]+"
ZSH_THEME_GIT_PROMPT_CLEAN="$fg[green]"

RPROMPT='%T' 
```

看起来像

> ![这个](../Images/bc7d108da9853c6a3e630583c00b2ab2.png)

当我移动`$(git_prompt_info)`到`RPROMPT`

```
function git_prompt_info() {
  ref=$(git symbolic-ref HEAD 2> /dev/null) || return
  echo "$(parse_git_dirty)$ZSH_THEME_GIT_PROMPT_PREFIX$(current_branch)$ZSH_THEME_GIT_PROMPT_SUFFIX"
}

PROMPT='%T $fg[yellow]%}⚡︎ $fg[cyan]%~
%{$reset_color%}→ '

ZSH_THEME_GIT_PROMPT_PREFIX="[git:"
ZSH_THEME_GIT_PROMPT_SUFFIX="]$reset_color"
ZSH_THEME_GIT_PROMPT_DIRTY="$fg[red]+"
ZSH_THEME_GIT_PROMPT_CLEAN="$fg[green]"

RPROMPT='$(git_prompt_info)' 
```

看起来像

> ![在此处输入图像描述](../Images/3dbdb9d4dcd8f7de92cd0c39d2559ee6.png)

看到右边的间距了吗？箭头也开始在错误的地方？

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T18:17:32.497

我相信`$fg[color]`包含类似的东西`\e[32m`？如果是这样，则必须将其括起来`%{…%}`以表明该序列没有宽度。但是，如果您忘记整个事情并使用`%F{color}`前景，`%K{color}`背景和`%f`/`%k`取消它们来代替`$reset_color`. 你必须做

```
setopt promptsubst
setopt promptpercent 
```

为了让它工作（你可能已经有了这个）。

该间隙是颜色的宽度，它们是光标位置错误的原因。这里的问题是 zsh 无法通过“嘿，我输出了一些文本，它的宽度是多少？”这个问题来查询终端。而是必须自己计算宽度。

# c# - 使用C#在局域网中下载大文件

> ID：14049875
> 
> 赞同：1
> 
> 时间：2012-12-27T05:38:28.467
> 
> 标签：c#, networking, download, microsoft-bits, bits-service

我正在制作一个应用户要求安装软件的应用程序。我将 zip 文件保存在服务器上以进行软件安装。在请求批准后，我使用 Microsoft BITS 服务将文件下载到请求的机器上。但是有几个问题，因为我的应用程序在管理员权限下运行并且 BITS 不支持“运行方式”。还有其他方法可以通过网络下载大文件吗？？？请帮忙..

# z3 - Z3 按位计算？

> ID：14049877
> 
> 赞同：5
> 
> 时间：2012-12-27T05:38:42.583
> 
> 标签：z3

我编写了以下 Z3 python 代码

```
x, y = Ints('x y')
F = (x == y & 16)      # x has the value of (y & 16)
print F 
```

但我得到以下错误：

```
TypeError: unsupported operand type(s) for &: 'instance' and 'int' 
```

如何在 Z3 方程中进行按位算术（在本例中为 &）？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T05:50:58.280

`x`并且`y`应该是位向量：

```
x, y = BitVecs('x y', 32)
F = (x == y & 16)      # x has the value of (y & 16)
print F 
```

请参阅[http://rise4fun.com/Z3/tutorial/guide下的位向量部分](http://rise4fun.com/Z3/tutorial/guide)

# c# - 如何简化一组静态对象之间的类似方法调用？

> ID：14049879
> 
> 赞同：4
> 
> 时间：2012-12-27T05:39:04.633
> 
> 标签：c#, static

我在我的程序中使用了一些静态“形状”类，并且由于每个静态类都需要执行相同类型的操作，我想知道是否有一种方法可以泛化方法调用。**如果这些类不是静态的，我会简单地使用一个接口。**

这是我的情况的要点：

```
public static Triangle
{

  public int getNumVerts()
  {
    return 3;
  }

  public bool isColliding()
  {
    return Triangle Collision Code Here
  }

}

public static Square
{

  public int getNumVerts()
  {
    return 4;
  }

  public bool isColliding()
  {
    return Square Collision Code Here
  }

} 
```

我更喜欢做的是简单地调用`Shape.getNumVerts()`，而不是我当前的 switch 语句：

```
switch (ShapeType)
{
  case ShapeType.Triangle:
      Triangle.GetNumVerts();
  case ShapeType.Square:
      Square.GetNumVerts();
} 
```

如果我使用单例而不是静态类，我可以简单地使用多态性，但是要避免单例，并且我需要传递大量引用，以便我可以根据需要对各个形状进行处理。

有没有办法对这些静态类进行分组，或者 switch 语句是否和它一样好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:47:46.940

目前尚不清楚您是否需要单独`Triangle`的`Square`课程。您可以消除它们，并且只有`Shape`带有接受`ShapeType`参数的方法的类。但它实际上也带有`switch`。

```
public static class Shape
{
    public static int GetNumVerts(ShapeType type)
    {
        switch (type)
        {
            case ShapeType.Triangle:return 3;
            case ShapeType.Square:return 4;
            //...
        }
    }
} 
```

至于`switch`，我想这样使用它是很常见和正常的。

然而，您可能有单独的`Triangle`和`Square`类，并在`Shape.GetNumVerts`方法中进行切换。它会让你调用`Shape.GetNumVerts(ShapeType.Triangle);`，即被`switch`封装在`Shape`类中并且只在那里使用一次。

```
public static class Shape
{
    public static int GetNumVerts(ShapeType type)
    {
        switch (type)
        {
            case ShapeType.Triangle:return Triangle.GetNumVerts();
            case ShapeType.Square:return Square.GetNumVerts();
            //...
        }
    }
} 
```

# javascript - 如何在 JADE 模板中使用 JSON 变量作为逻辑？

> ID：14049882
> 
> 赞同：0
> 
> 时间：2012-12-27T05:39:23.847
> 
> 标签：javascript, json, node.js, backbone.js, pug

太好了，我有这个 JADE 模板：

```
//views/user.jade

div
-if ( typeof(user) !== undefined ) {
    span <%= id %>
-else {
    span nothing to see here
-} 
```

这就是页面的呈现方式以及我在逻辑中传递“用户”变量的方式

```
//routes/user.js

exports.user = function(req, res){
    res.render('pages/user', {
        user: req.user
    });
}; 
```

'<%= id %>' 通过 .JSON 文件传入，并呈现与 'user' 变量无关的 ID 号。我想在我的逻辑中使用 '<%= id %>' 的值，如下所示：

```
-if ( ( typeof(user) !== undefined ) && ( user.id === <%= id %> ) ) { 
```

这当然会导致页面中断，以及我成为一名体面的软件工程师的希望。我在这里做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:50:11.103

所以让我做一些猜测：

*   “通过 JSON 文件传递​​”是指以 JSON 格式在 HTTP 请求正文中发送。

如果这个猜测是正确的，你需要做一些事情：

1.  确保您拥有`app.use(express.bodyParser());`将解析 JSON 请求正文并使其`req.body`可用的
2.  将值传递给模板

.

```
res.render('pages/user', {
    id: req.body.id,
    user: req.user
}); 
```

然后`id`直接作为本地 javascript 变量引用

```
-if ( ( typeof(user) !== undefined ) && ( user.id === id ) ) { 
```

# php - 集成 UPS Xml 肥皂饲料 (PHP)

> ID：14049889
> 
> 赞同：2
> 
> 时间：2012-12-27T05:39:56.343
> 
> 标签：php, xml, api, soap, ups

我正在尝试从 UPS 获取 xml 速率肥皂馈送。

目前我收到错误“错误版本”（__Soapcall Exeption）或“0FailureHard10002XML 文档格式正确但文档无效1”（来自服务器或 php 的响应）。

我采用了开发人员工具包中提供的示例。我尝试了一切=>

*   将肥皂版本更改为 1.2
*   从远程 url 获取 wsdl，而不是在磁盘上
*   我仔细检查了端点和用户 ID、访问密钥、通过、...

有没有人有一个工作脚本？，或者更好的人可以纠正我的错误:)

代码：

```
<?php

class UpsRate{
    private $access,$userid,$passwd,$wsdl,$operation,$endpointurl;

    public function  __construct() {
        $this->setConfig();
    }

    public function setConfig($is_test = true){
      $this->access = sfConfig::get('app_shipping_ups_access');
      $this->userid = sfConfig::get('app_shipping_ups_userid');
      $this->passwd = sfConfig::get('app_shipping_ups_password');

      $this->wsdl = sfConfig::get('sf_data_dir').'/wsdl/ups/RateWS.wsdl';
      $this->operation = "ProcessRate";

      $this->endpointurl = $is_test?'https://wwwcie.ups.com/ups.app/xml/Rate':'https://onlinetools.ups.com/ups.app/xml/Rate';
    }

  private function processRate(){
      //create soap request
      $option['RequestOption'] = 'Shop';
      $request['Request'] = $option;

      $pickuptype['Code'] = '01';
      $pickuptype['Description'] = 'Daily Pickup';
      $request['PickupType'] = $pickuptype;

      $customerclassification['Code'] = '01';
      $customerclassification['Description'] = 'Classfication';
      $request['CustomerClassification'] = $customerclassification;

      $shipper['Name'] = 'Trutec';
      $shipper['ShipperNumber'] = 'Y5562A';
      $address['AddressLine'] = array
      (
          'Ter rivierenlaan 176',
          '',
          ''
      );
      $address['City'] = 'Antwerp';
      //$address['StateProvinceCode'] = 'MD';
      $address['PostalCode'] = '2100';
      $address['CountryCode'] = 'BE';
      $shipper['Address'] = $address;
      $shipment['Shipper'] = $shipper;

      $shipto['Name'] = 'Imani Imaginarium';
      $addressTo['AddressLine'] = '21 ARGONAUT SUITE B';
      $addressTo['City'] = 'ALISO VIEJO';
      //$addressTo['StateProvinceCode'] = 'CA';
      $addressTo['PostalCode'] = '92656';
      $addressTo['CountryCode'] = 'US';
      $addressTo['ResidentialAddressIndicator'] = '';

      $shipto['Address'] = $addressTo;
      $shipment['ShipTo'] = $shipto;

      $shipfrom['Name'] = 'Trutec';
      $addressFrom['AddressLine'] = array
      (
          'Ter rivierenlaan 176',
          '',
          ''
      );
      $addressFrom['City'] = 'Deurne';
      //$addressFrom['StateProvinceCode'] = 'MD';
      $addressFrom['PostalCode'] = '2100';
      $addressFrom['CountryCode'] = 'BE';
      $shipfrom['Address'] = $addressFrom;
      $shipment['ShipFrom'] = $shipfrom;

      $service['Code'] = '03';
      $service['Description'] = 'Service Code';
      $shipment['Service'] = $service;

      $packaging1['Code'] = '02';
      $packaging1['Description'] = 'Rate';
      $package1['PackagingType'] = $packaging1;
      $dunit1['Code'] = 'IN';
      $dunit1['Description'] = 'cm';
      $dimensions1['Length'] = '5';
      $dimensions1['Width'] = '4';
      $dimensions1['Height'] = '10';
      $dimensions1['UnitOfMeasurement'] = $dunit1;
      $package1['Dimensions'] = $dimensions1;
      $punit1['Code'] = 'KG';
      $punit1['Description'] = 'KG';
      $packageweight1['Weight'] = '4';
      $packageweight1['UnitOfMeasurement'] = $punit1;
      $package1['PackageWeight'] = $packageweight1;

      $shipment['Package'] = array( $package1 );
      $shipment['ShipmentServiceOptions'] = '';
      $shipment['LargePackageIndicator'] = '';
      $request['Shipment'] = $shipment;

      return $request;
  }

  public function getRate(){

       try {
        //nitialize soap client
    $client = new SoapClient($this->wsdl , array('soap_version' => 'SOAP_1_1','trace' => 1));

    //set endpoint url
    $client->__setLocation($this->endpointurl);

        //create soap header
        $usernameToken['Username'] = $this->userid;
        $usernameToken['Password'] = $this->passwd;
        $serviceAccessLicense['AccessLicenseNumber'] = $this->access;
        $upss['UsernameToken'] = $usernameToken;
        $upss['ServiceAccessToken'] = $serviceAccessLicense;

        $header = new SoapHeader('http://www.ups.com/XMLSchema/XOLTWS/UPSS/v1.0','UPSSecurity',$upss);
        $client->__setSoapHeaders($header);

        //get response
        return $client->__soapCall($this->operation ,array($this->processRate()));
      }

      catch(Exception $ex)
      {
          echo '<pre>';
          return print_r($client->__getLastResponse());
          echo '</pre>';
      }
  }

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:02:26.017

该错误通知您的 XML 格式正确，但您包含了一个或多个不兼容的元素。你能转储发送的 XML 吗？这可能更容易确定检测到错误的位置。我不建议根据 UPS 文档中的示例来工作，它们仅用于说明目的，并且自第一次发布以来可能尚未更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:19:26.663

我有同样的问题，并解决了这个问题：

当我拨打测试电话时，它们会起作用。我用于测试调用的端点是

```
https://wwwcie.ups.com/webservices/Rate 
```

但是，当我更改为实时通话时，我会收到错误的版本错误。该端点是：

```
https://onlinetools.ups.com/webservices 
```

我查看了 wsdl 文档，发现接近结尾的部分如下所示：

```
<wsdl:port name="RatePort" binding="tns:RateBinding">
    <!-- Production URL -->
    <!-- <soap:address location="https://onlinetools.ups.com/webservices/Rate"/> -->
    <!-- CIE (Customer Integration Environment) URL -->
    <soap:address location="https://wwwcie.ups.com/webservices/Rate"/>
</wsdl:port> 
```

我注意到 live 版本的端点被注释掉了，所以我将部分更改如下：

```
<wsdl:port name="RatePort" binding="tns:RateBinding">
    <!-- Production URL -->
    <soap:address location="https://onlinetools.ups.com/webservices/Rate"/>
    <!-- CIE (Customer Integration Environment) URL -->
    <!--<soap:address location="https://wwwcie.ups.com/webservices/Rate"/>-->
</wsdl:port> 
```

我不确定这对其他人是否有帮助，但这最终解决了我的问题。

# c++ - 没有无参数构造函数 C++ 的类

> ID：14049891
> 
> 赞同：1
> 
> 时间：2012-12-27T05:40:03.810
> 
> 标签：c++

我的程序中有一个类，它是一个文件解析器，可为我提供输出。由于这是一个文件解析，因此必须传递文件名才能使用此类。

**文件阅读器.h**

```
class FileReader{
public:
FileReader(std::string filePath);
//other member functions
private:
//private variables
}; 
```

**主程序.h**

```
class MainProgram{
public:
FileReader reader; //this gives error
private:
}; 
```

**主程序.cpp**

```
MainProgram::setup()
{
public:
    reader = new FileReader("files/something.xml") //intended to use like this
} 
```

**错误：** src/MainProgram.h|57|错误：没有用于调用“FileReader::FileReader()”的匹配函数|

如何在初始化期间为类保留强制参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:42:02.420

代替：

```
FileReader(std::string filePath)();  // not valid way of providing function definition 
```

和：

```
FileReader(std::string filePath){} 
```

您还需要在 MainProgram 构造函数中初始化 FileReader `member initialzer list`。

如果要`new FileReader`在 setup 函数中使用，那么 reader 需要是指针类型。

```
class MainProgram{
public:
  MainProgram(const std::string& file):reader(file){} // init reader in member initializer
private:
  FileReader reader; 
};

int main(int argc, char* argv[])
{
  MainProgram test("files/something.xml");
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T05:47:34.517

如果这是您的全部`setup`功能，请取消它并改用构造函数 - 这就是它们的用途！

```
MainProgram::MainProgram() : reader("files/something.xml"){} 
```

使用提供的字符串进行*初始化*（如调用其构造函数）。`reader`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:44:38.467

```
FileReader * reader; // This line should not create a FileReader object on stack, a pointer is enough 
```

这里的 C++ 语法与 Java/C# 不同。您需要在语句中声明显式指针类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:47:23.800

试试`FileReader *reader;`？

# jboss - 当项目部署在 jboss 上时，我想用 jboss 单独运行一些 main() 方法

> ID：14049892
> 
> 赞同：0
> 
> 时间：2012-12-27T05:40:05.657
> 
> 标签：jboss, jar

我的问题与下面的相同。

## （Jboss 5.0 版，以防万一。）

我的一个 Web 应用程序中有一个库，在使用之前需要使用特定于机器的许可证进行配置。我不想把这个库放在 shared/lib 中，因为在某些时候我可能想用不同版本的库运行多个 Web 应用程序。

现在 .jar 文件存储在 WEB-INF/lib 中。因此，当我构建 .war 文件并将其上传到服务器时，.jar 文件仍将是绑定到我的 PC 的文件。我想在 webapp 中的某个位置放置一个 bash 脚本，Tomcat 在部署 .war 文件时会自动运行该脚本 - 然后该脚本将运行配置脚本并将服务器的许可证文件绑定到 .jar。这可能吗？有没有更好的方法来做我想做的事？

* * *

一件事是不同的。我的 jar 应该与其他进程 ID 一起运行。这意味着它必须独立运行，由 jboss 分开。即使这

```
 String command = "cmd /C java -jar C:\\test\\WEB-INF\\lib\\teststart.jar";
        oProcess = new ProcessBuilder(command).start(); 
```

工作，我会很高兴。那个 jar 是可运行的 jar。

你有什么主意吗？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:14:12.160

像[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)这样的东西呢？

创建一个实现这一点的类，并在 contextInitialized 方法（contextInitialized 将在战争部署期间运行）创建一个 ProcessBuilder 来运行您的 bash 命令。

# vb.net - 发送传真时如何选择特定的调制解调器？

> ID：14049894
> 
> 赞同：1
> 
> 时间：2012-12-27T05:40:23.333
> 
> 标签：vb.net, fax, winfax

我正在编写一个应用程序来通过 FAXCOMEXLib 发送传真。我使用了这段代码：

```
Dim objFaxServer As New FAXCOMEXLib.FaxServer
Dim objFaxDocument As New FAXCOMEXLib.FaxDocument
Dim JobID As Object

Try
    objFaxServer.Connect(txtFaxServer.Text)

    objFaxDocument.Body = Me.txtFile.Text
    objFaxDocument.DocumentName = "My First Fax"
    objFaxDocument.Recipients.Add(Me.txtNumber.Text, "")
    objFaxDocument.AttachFaxToReceipt = True
    objFaxDocument.Note = "Here is the info you requested"
    objFaxDocument.Subject = Me.txtFaxID.Text
    objFaxDocument.ReceiptAddress = "test@tin.it"
    objFaxDocument.CoverPageType = FAXCOMEXLib.FAX_COVERPAGE_TYPE_ENUM.fcptNONE
    objFaxDocument.Priority = FAXCOMEXLib.FAX_PRIORITY_TYPE_ENUM.fptNORMAL
    objFaxDocument.ReceiptType = FAXCOMEXLib.FAX_RECEIPT_TYPE_ENUM.frtMAIL
    objFaxDocument.ScheduleType = FAXCOMEXLib.FAX_SCHEDULE_TYPE_ENUM.fstNOW

    JobID = objFaxDocument.ConnectedSubmit(objFaxServer)

    objFaxServer.Disconnect()

    'MessageBox.Show("The Job ID is :" & JobID(0), "Information")
Catch ex As Exception
    MessageBox.Show(ex.ToString, "Error")
End Try 
```

我有两个调制解调器（调制解调器 1 或调制解调器 2）。当使用此代码发送传真时，由第一个可用的调制解调器执行。

但是根据我的规则，我需要使用 Modem1 或 Modem2 发送传真。如何选择特定的调制解调器来发送传真？

# mingw32 - 在 Windows 上的 git bash 中为 ls 设置颜色

> ID：14049896
> 
> 赞同：33
> 
> 时间：2012-12-27T05:40:29.790
> 
> 标签：mingw32, github-for-windows

我最近安装了适用于 Windows 的 GitHub，并且正在使用 git bash 提示符 - 现在困扰我的一件事是当我键入 LS 时，所有目录都以蓝色列出。

如何更改我的 git bash shell，以便当我键入 LS 时，目录以与蓝色不同的颜色列出？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-15T07:17:38.373

这不是具体的 git 问题，而是您正在使用的 shell。在使用 Git 2.9+ 的 MINGW32 上：

1.  C:\Program Files\Git\etc\ **bash.bashrc**

> ```
> # Uncomment to use the terminal colours set in DIR_COLORS        
> eval "$(dircolors -b /etc/DIR_COLORS)" 
> ```

2.  C:\Program Files\Git\etc\ **DIR_COLORS**

`DIR 01;37 # Attribute=bold; Text color=white`

**DIR_COLORS 文件：**

> ```
> # Below are the color init strings for the basic file types. A color init
> # string consists of one or more of the following numeric codes:
> # Attribute codes:
> # 00=none 01=bold 04=underscore 05=blink 07=reverse 08=concealed
> # Text color codes:
> # 30=black 31=red 32=green 33=yellow 34=blue 35=magenta 36=cyan 37=white
> # Background color codes:
> # 40=black 41=red 42=green 43=yellow 44=blue 45=magenta 46=cyan 47=white
> #NORMAL 00    # no color code at all
> #FILE 00      # regular file: use no color at all 
> RESET 0       # reset to "normal" color 
> DIR 01;37     # directory 
> LINK 01;36    # symbolic link.  (If you set this to 'target' instead of a
>               # numerical value, the color is as for the file pointed to.) 
> ```

另请参阅以下帖子：

*   [http://linux-sxs.org/housekeeping/lscolors.html](http://linux-sxs.org/housekeeping/lscolors.html)
*   [http://www.kernel.org/doc/man-pages/online/pages/man5/dir_colors.5.html](http://www.kernel.org/doc/man-pages/online/pages/man5/dir_colors.5.html)
*   [http://linux.about.com/library/cmd/blcmdl1_dircolors.htm](http://linux.about.com/library/cmd/blcmdl1_dircolors.htm)

对于旧版本的 Git，`bash_profile`in`Git_Installation\etc`文件夹的颜色会改变：

```
LS_COLORS='di=1:fi=0:ln=31:pi=5:so=5:bd=5:cd=5:or=31:mi=0:ex=35:*.rpm=90'
export LS_COLORS
alias ls='ls -F --color --show-control-chars' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-16T20:44:08.267

检查您是否有文件：%USERPROFILE%\.minttyrc
在该文件中，您可以配置控制台颜色的 RGB 值。
我使用以下方法使颜色在深色背景中易于阅读：

```
BoldBlack=128,128,128
Red=255,64,40
BoldRed=255,128,64
Green=64,200,64
BoldGreen=64,255,64
Yellow=190,190,0
BoldYellow=255,255,64
Blue=0,128,255
BoldBlue=128,160,255
Magenta=200,64,255
BoldMagenta=255,128,255
Cyan=64,190,190
BoldCyan=128,255,255
White=200,200,200
BoldWhite=255,255,255 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-31T16:00:36.250

我可以`DIR_COLORS`通过`/c/Program\ Files/Git/etc`添加`;47`到第 49 行来修改：

曾是

```
DIR 01;34 
```

现在是

```
DIR 01;34;47 
```

所以现在目录以白色背景列出，更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T05:43:22.207

我从未尝试在 Windows 上使用 GIT ...但您应该能够使用“git-config”调整文本颜色：

*   [http://git-scm.com/book/en/Customizing-Git-Git-Configuration](http://git-scm.com/book/en/Customizing-Git-Git-Configuration)

还有一个（隐藏的？） .gitconfig 文件，您应该可以直接编辑：

*   [http://mohundro.com/blog/2010/02/04/some-tips-on-using-git-with-windows/](http://mohundro.com/blog/2010/02/04/some-tips-on-using-git-with-windows/)

最后，这个链接有一些很好的提示：

*   [在 Windows 7 上的 Git Bash 中，运行 Cucumber 或 rspec 时颜色显示为代码](https://stackoverflow.com/questions/5921556/in-git-bash-on-windows-7-colors-display-as-code-when-running-cucumber-or-rspec)

# c# - 如何在 ASP.NET 中上传没有任何回发的图像文件

> ID：14049905
> 
> 赞同：3
> 
> 时间：2012-12-27T05:41:17.007
> 
> 标签：c#, asp.net

我正在使用`<asp:FileUpload>`和`<asp:button>`控件上传文件，但我想在没有回发的情况下进行。单击按钮时，我执行以下代码。

```
protected void btnUpload_Click(object sender, EventArgs e)
{
    string strFileName = Path.GetFileName(FileUpload1.FileName);  //fileupload1 is the <asp:fileupload ID
    FileUpload1.SaveAs(Server.MapPath("~/UploadFile/" + strFileName + ""));
    imgUpload.ImageUrl = "../UploadFile/" + strFileName + "";  //imgupload is the <img ID on which I am showing the image after upload
    imgUpload.Visible = true;
} 
```

上传文件后，我在项目解决方案中显示指定文件夹中保存的图像，但是在单击上传按钮时，整个页面都会被加载，我不希望在单击上传按钮时回发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:57:09.160

```
just add the script

    <script language="javascript">
        function Change(obj) {
             __doPostBack("<%= btnUpload.ClientID %>", "");
        }

      </script>

Call the script in your button click event like this 
<pre>
onchange="Change(this);"
</pre>   

Your image control added in the update panel with contentTemplate 

    <asp:FileUpload ID="imgFileUploader" runat="server"   />
             <asp:Button ID="btnUpload" runat="server"  
         Text="Upload" onclick="btnUpload_Click" onchange="Change(this);" />
      <br />
        <br />
     <asp:ScriptManager ID="ScriptManager1" runat="server">
     </asp:ScriptManager>
  &nbsp;<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>    
               <img id="imgOrginal" runat="server" style="height: 200px; width: 200px;" />
              </ContentTemplate>
      </asp:UpdatePanel> 
```

[更多细节](http://www.codeproject.com/Tips/558327/Show-uploaded-image-without-postback)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:49:46.780

我认为您是在询问有关通过部分请求上传文件的问题。使用 ASP.NET 文件上传控件是不可能的。即使它被包裹在更新面板中，它也不起作用。它需要有同步触发器才能使其工作，这意味着它会完全回发。

如果您使用的是 ASP.NET AJAX，请检查 asyncfileload 控件和新添加的“Ajax 文件上传”控件。这些控件存在于 Ajax 控件工具包中。请仔细阅读文档，因为每个文档都有其局限性。

如果它们不适合您的需求，请尝试使用开源 Ajax 文件上传控件，如整洁上传等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:52:04.207

如果您使用的是 ASP.Net 文件上传器，那么这是不可能的.. 您可以为此目的使用 Ajax 文件上传器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T05:53:15.733

无需任何回发即可上传图片的最佳方式，您可以尝试在 Asp.net Ajax 中使用 AsyncFileUpload 控件。一个很好的例子是这里:-

[http://www.aspsnippets.com/Articles/Using-ASP.Net-AJAX-Control-Toolkits-AsyncFileUpload-Control.aspx](http://www.aspsnippets.com/Articles/Using-ASP.Net-AJAX-Control-Toolkits-AsyncFileUpload-Control.aspx)

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T05:52:54.030

您不能使用简单的 ASP.NET WebForms 来做到这一点。

对所谓的[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)进行一些研究。您所包含的方法背后的代码是 / 只能作为回发或服务器端操作的一部分执行。

如果您想要*没有*回发的客户端-服务器交互，那么您需要使用 javascript。您可以在 ASP.NET 旁边使用 javascript，我相信在 .NET 框架中有一个 Microsoft 实现的“AJAX”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-20T07:35:09.487

为此，您需要使用 ajax。互联网上有很多例子。只是谷歌它。

# java - 从 Mongo DB Cursor 获取信息

> ID：14049910
> 
> 赞同：0
> 
> 时间：2012-12-27T05:41:55.353
> 
> 标签：java, mongodb

我正在使用带有 Java 的 Mongo DB。

我试图找出在 Mongo DB 中是否存在具有给定字符串的符号，如下所示。这是有效的，但问题是它对 MOngo DB 进行了两次调用，这非常昂贵。有什么办法可以将它减少到一个电话并使其更加注重性能。

这是我的代码

```
public class Test
{
    public static void main(String args[])
    {
        DBCursor cursor  = null;
        DBCollection coll = null;
        BasicDBObject query = new BasicDBObject();
        String symbol = args[0];
        query.put("symbol", "" + symbol);
        cursor  = coll.find(query);
        int count = coll.find(query).count();

        /* Here is want to avoid the count call , is there anyway by which
           the cursor the obtained cursor tells , that there exists the symbol
           in Mongo DB */

        if(count>=1)
        {
            // If found then do 
            if (cursor != null) {

            }
        }
        else
        {
            // If Not  found then do 
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:02:22.613

你为什么要使用`count`？您可以只使用 的`hasNext()`方法`DBCursor`来测试是否获取了某些内容。

```
cursor  = coll.find(query);

if (cursor.hasNext()) {
    // Found
    System.out.println(cursor.next());
} else {
    // Not found
} 
```

* * *

但是，如果您想使用`count()`方法，那么您也不必触发新查询。因为只`db.collection.find()`返回一个`DBCursor`。因此，`count`您使用的方法是在返回的`DBCursor`. 因此，只需调用`count()`相同的`cursor`引用：-

```
cursor  = coll.find(query);
int count = cursor.count();

if (count >= 1) {
    // Found
    System.out.println(cursor.next());
} else {
    // Not found
} 
```

但是，如果要获取下一个元素（如果存在），则应该使用第一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T06:48:55.540

您无需进行显式调用即可获取计数。

`cursor.hasNext()`将返回光标中是否有任何元素。

```
 cursor  = coll.find(query);
    while(cursor.hasNext()){
     // found
    }else{
     // not found
    } 
```

你也可以使用 `cursor.count()`

```
The count() method counts the number of documents referenced by a cursor. 
```

将该方法附加`count()`到 find() 查询以返回匹配文档的数量，如以下原型所示：

```
db.collection.find().count()
   or 
db.collection.count() 
```

此操作实际上并不执行，`find();`而是计算将由`find()`.

[参考](http://docs.mongodb.org/manual/reference/method/cursor.count/)

# java - 网站中的小程序问题 (AccessControlException)

> ID：14049912
> 
> 赞同：0
> 
> 时间：2012-12-27T05:41:59.137
> 
> 标签：java, security, applet, accesscontrolexception

所以当我尝试从我的网站加载我的小程序时，我得到

```
AccessControlException
access denied ("java.io.FilePermission" "cursor.gif" "read") 
```

这对应于我的小程序中的代码。

```
//Modify the cursor when inside the Applet
Toolkit toolkit = Toolkit.getDefaultToolkit();
Image cursorIcon = toolkit.getImage("cursor.gif");
Point center = new Point(16, 16);
Cursor cursor = toolkit.createCustomCursor(cursorIcon, center, "Cursor");
setCursor(cursor); 
```

我已经用*谷*歌搜索并尝试过诸如

*   签署`.jar`
*   创建一个策略的东西，但我不完全理解如何制作它以及如何处理它（有人可以向我详细解释如何做这个策略的东西吗？）

当我在我的 Eclipse 中运行它时，我的小程序工作得非常好此外，如果我注释掉上面的代码，我的小程序工作，所以只是这部分给了我一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:13:07.930

您必须将代码包装在特权代码中，例如：

```
final String location = locationVal;

File f = (File) AccessController.doPrivileged(new PrivilegedAction()
{
    public Object run()
    {
        System.out.println("Getting File : " + location);
        File outputFile1 = new File(location);
        return outputFile1;
    }
}); 
```

此代码复制自：[需要客户端访问资源权限的我的小程序的策略文件位置在哪里？](https://stackoverflow.com/questions/1417271/where-policy-file-location-for-my-applet-that-needs-clients-permission-to-access)

还有有用的链接：

[http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html)关于java 策略的实现。

[http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/policytool.html#Usage](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/policytool.html#Usage)使用 GUI 策略文件编辑器

# objective-c - 更新从文本字段绑定的属性，无需按 Enter

> ID：14049913
> 
> 赞同：2
> 
> 时间：2012-12-27T05:41:59.110
> 
> 标签：objective-c, cocoa, cocoa-bindings, nstextfield

我有一个文本字段，并将它绑定到一个`NSString`实例变量。

当我在文本字段中输入时，它不会更新变量。它一直等到我按下 Enter 键。我不想每次都按 Enter 键。

为了立即使绑定更改值，我需要更改什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T07:28:05.633

默认情况下，an 的值绑定`NSTextField`不会持续更新。要解决此问题，您需要在选择文本字段后，检查绑定检查器中值标题下的“持续更新值”框：

![NSTextField 值绑定与持续更新值选中。](../Images/67815d7763ed883ba09f4a84b94e3c2a.png)

* * *

**但是**，大多数情况下，您真正​​想要做的是在用户完成编辑并按下按钮（例如“保存”或“确定”）时更新文本字段绑定到的属性。为此，您无需如上所述不断更新属性，只需结束编辑即可。 [Daniel Jalkut 为这种方法提供了一个非常有用的实现](http://www.red-sweater.com/blog/229/stay-responsive)：

```
@interface NSWindow (Editing)

- (void)endEditing;

@end

@implementation NSWindow (Editing)

- (void)endEditing
{
    // Save the current first responder, respecting the fact
    // that it might conceptually be the delegate of the 
    // field editor that is "first responder."
    id oldFirstResponder = [oMainDocumentWindow firstResponder];
    if ((oldFirstResponder != nil) &&
        [oldFirstResponder isKindOfClass:[NSTextView class]] &&
        [(NSTextView*)oldFirstResponder isFieldEditor])
    {   
        // A field editor's delegate is the view we're editing
        oldFirstResponder = [oldFirstResponder delegate];
        if ([oldFirstResponder isKindOfClass:[NSResponder class]] == NO)
        {
            // Eh ... we'd better back off if 
            // this thing isn't a responder at all
            oldFirstResponder = nil;
        }
    } 

    // Gracefully end all editing in our window (from Erik Buck).
    // This will cause the user's changes to be committed.
    if([oMainDocumentWindow makeFirstResponder:oMainDocumentWindow])
    {
        // All editing is now ended and delegate messages sent etc.
    }
    else
    {
        // For some reason the text object being edited will
        // not resign first responder status so force an 
        /// end to editing anyway
        [oMainDocumentWindow endEditingFor:nil];
    }

    // If we had a first responder before, restore it
    if (oldFirstResponder != nil)
    {
        [oMainDocumentWindow makeFirstResponder:oldFirstResponder];
    }
}

@end 
```

因此，例如，如果您有一个针对视图控制器方法的“保存”按钮`-save:`，您可以调用

```
- (IBAction)save:(id)sender
{
    [[[self view] window] endEditing];
    //at this point, all properties bound to text fields have the same
    //value as the contents of the text fields.

    //save stuff...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-21T22:09:46.973

前面的答案很漂亮，我从中学到了如何欺骗 Window/View/Document 系统以按照程序员的意愿对所有内容进行最终编辑。

然而，默认的响应者链行为（包括在用户将注意力转移到其他东西之前保留第一响应者）是 Mac 的“外观和感觉”的基础，我不会轻易搞砸它（我发誓我做了非常响应链操纵中的强大功能，所以我不会出于恐惧而这么说。）

此外 - 还有一种更简单的方法 - 不需要更改绑定。在 Interface-builder 中，选择文本字段，然后选择“Attribute Inspector”选项卡。您将看到以下内容： [![Interface-Builder 属性检查器选项卡](../Images/726a7d2634b0471e9150118d2dadfa87.png)](https://i.stack.imgur.com/zZZEw.png)

检查红色圆圈的“连续”就可以了。这个选项是基本的，甚至比绑定更老，它的主要用途是允许验证器对象（一个全新的故事）验证文本并在用户键入时动态更改它。当文本字段调用验证器调用时，它也会更新绑定值。

# google-drive-api - HTTPerror 400 无效的上传请求：尝试将文件上传到 Google Drive 的示例代码

> ID：14049915
> 
> 赞同：0
> 
> 时间：2012-12-27T05:42:05.253
> 
> 标签：google-drive-api

我正在尝试 Google Drive API 的 Quickstart 部分中的示例代码，但出现以下错误：\

```
Traceback (most recent call last):
  File "quickstart.py", line 60, in <module>
    file = drive_service.files().insert(body=body, media_body=media_body).execute()
  File "/usr/local/lib/python2.7/dist-packages/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/apiclient/http.py", line 656, in execute
    _, body = self.next_chunk(http=http)
  File "/usr/local/lib/python2.7/dist-packages/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/apiclient/http.py", line 789, in next_chunk
    return self._process_response(resp, content)
  File "/usr/local/lib/python2.7/dist-packages/apiclient/http.py", line 816, in _process_response
    raise HttpError(resp, content, uri=self.uri)
apiclient.errors.HttpError: <HttpError 400 when requesting https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable&alt=json returned "Invalid Upload Request"> 
```

我正在使用示例代码，没有任何更改。同样的代码昨天工作，但今天它不工作..这是服务器端错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:21:14.993

当指定不存在的文件时，我遇到了同样的错误。请尝试指定上传文件的完整路径。

# jquery - 相当于 HTML 占位符的 Jquery

> ID：14049919
> 
> 赞同：1
> 
> 时间：2012-12-27T05:42:56.823
> 
> 标签：jquery, forms, validation, submit, placeholder

在制作等效的 jquery 占位符时，我遇到了表单提交的问题。现在焦点/焦点输出的值发生变化，但我遇到的问题是字段不能留空，但表单验证将默认值读取为值，因此它允许它。我尝试检查 submit() 和 onclick()。Onclick 提交按钮并提交表单本身。都没有奏效。如果值是默认值，我需要检查它何时提交。如果是的话，希望能在提交之前使值变为空白。这样，内置错误系统的 drupal 将触发而不是构建我自己的。

占位符文本的当前代码。

```
if ($.browser.msie) {
    // for name field
    $('#edit-submitted-name').focus(function(){
        if ( $('#edit-submitted-name').val() == 'Name...' ) {
            $(this).val('');
            $(this).css('color', '#000');
        }
    });
    $('#edit-submitted-name').focusout(function(){
        if ( !$('#edit-submitted-name').val() ) {
            $(this).val('Name...');
            $(this).css('color', '#abadb3');
        }
    });
    //for email address field
    $('#edit-submitted-email-address').focus(function(){
        if ( $('#edit-submitted-email-address').val() == 'Email Address...' ) {
            $(this).val('');
            $(this).css('color', '#000');
        }
    });
    $('#edit-submitted-email-address').focusout(function(){
        if ( !$('#edit-submitted-email-address').val() ) {
            $(this).val('Email Address...');
            $(this).css('color', '#abadb3');
        }
    });
    // for email field
    $('#edit-submitted-email').focus(function(){
        if ( $('#edit-submitted-email').val() == 'Email...' ) {
            $(this).val('');
            $(this).css('color', '#000');
        }
    });
    $('#edit-submitted-email').focusout(function(){
        if ( !$('#edit-submitted-email').val() ) {
            $(this).val('Email...');
            $(this).css('color', '#abadb3');
        }
    });

    $('#edit-submitted-name').val('Name...');
    $('#edit-submitted-name').css('color', '#abadb3');
    $('#edit-submitted-email-address').val('Email Address...');
    $('#edit-submitted-email-address').css('color', '#abadb3');
    $('#edit-submitted-email').val('Email...');
    $('#edit-submitted-email').css('color', '#abadb3');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:00:13.863

Jquery Watermark 是占位符的好例子：-

[http://code.google.com/p/jquery-watermark/](http://code.google.com/p/jquery-watermark/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:55:42.227

您可以使用 jquery 占位符插件： [jquery.placeholder.js](https://github.com/mathiasbynens/Placeholder-jQuery-Plugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:12:26.657

我认为你不需要这样的插件。这似乎可能是矫枉过正。

你是说你做过类似的事情......

```
$('#formId').submit(function () {
    //check all inputs in the form, if their values match the placeholders then remove the values

    //returning true or false here will either continue form submission or stop it (i think)
}); 
```

当您检查元素时，您是否在标签上看到任何事件侦听器？谷歌浏览器的检查器在 CSS 下方的一个元素上有一个部分，它将向您显示事件侦听器。这将帮助您验证是否将任何内容添加为 `onSubmit`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T03:50:55.623

这对我很有用。

```
$('form.webform-client-form input#edit-submit').click(function(){
        if ($('#edit-submitted-name').val() == 'Name...') {
            $('#edit-submitted-name').val('');
            $('form.webform-client-form').submit();
        }
        if ($('#edit-submitted-email-address').val() == 'Email Address...') {
            $('#edit-submitted-email-address').val('');
            $('form.webform-client-form').submit();
        }
        if ($('#edit-submitted-email').val() == 'Email...') {
            $('#edit-submitted-email').val('');
            $('form.webform-client-form').submit();
        }
    }); 
```

# iphone - 如何查看以模态方式呈现的视图控制器

> ID：14049923
> 
> 赞同：2
> 
> 时间：2012-12-27T05:43:22.190
> 
> 标签：iphone, objective-c, ios

我正在尝试对我的一个应用程序中的所有内容进行 TDD，有没有办法查看 ViewController 是否以模态方式弹出？

如，如果在逻辑分支中我调用：

```
[self presentModalViewController:myModalControl]; 
```

有没有办法在呈现的视图控制器上测试这个？

我试过了：

```
[mainVC_SUT presentedViewController] 
```

和

```
[mainVcSUT modalViewController] 
```

但两者都返回为零。mainVC_SUT 是执行呈现的视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:56:05.050

像这样检查：

```
 if ([self.parentViewController.modalViewController isEqual:self])
    NSLog(@"I'm modal view controller!");
else 
    NSLog(@"I'm a push view controller!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:24:27.557

```
-(BOOL)isModal {

    BOOL isModal = ((self.parentViewController && self.parentViewController.modalViewController == self) || 
                    //or if I have a navigation controller, check if its parent modal view controller is self navigation controller
                    ( self.navigationController && self.navigationController.parentViewController && self.navigationController.parentViewController.modalViewController == self.navigationController) || 
                    //or if the parent of my UITabBarController is also a UITabBarController class, then there is no way to do that, except by using a modal presentation
                    [[[self tabBarController] parentViewController] isKindOfClass:[UITabBarController class]]);

    //iOS 5+
    if (!isModal && [self respondsToSelector:@selector(presentingViewController)]) {

        isModal = ((self.presentingViewController && self.presentingViewController.modalViewController == self) || 
                   //or if I have a navigation controller, check if its parent modal view controller is self navigation controller
                   (self.navigationController && self.navigationController.presentingViewController && self.navigationController.presentingViewController.modalViewController == self.navigationController) || 
                   //or if the parent of my UITabBarController is also a UITabBarController class, then there is no way to do that, except by using a modal presentation
                   [[[self tabBarController] presentingViewController] isKindOfClass:[UITabBarController class]]);

    }

    return isModal;        

} 
```

*图片来源：* [http ://www.allenwei.cn/ios-determine-current-view-is-a-modal/](http://www.allenwei.cn/ios-determine-current-view-is-a-modal/)

# http - 通过 curl/raw http 从 JSF 页面访问启用 js 的“链接”

> ID：14049924
> 
> 赞同：0
> 
> 时间：2012-12-27T05:43:29.930
> 
> 标签：http, jsf, session, curl

我正在尝试了解如何访问此站点上的内容：[https ://handbook.unimelb.edu.au/](https://handbook.unimelb.edu.au/)

我可以通过浏览器手动进行搜索，并且我正在通过 HTTP live Headers 跟踪原始 http 请求，但是在弄清楚系统实际上如何进行搜索时遇到了无穷无尽的问题。

特别是，通过以下方式使用高级搜索：[https ://handbook.unimelb.edu.au/faces/htdocs/user/search/AdvancedSearch.jsp](https://handbook.unimelb.edu.au/faces/htdocs/user/search/AdvancedSearch.jsp)

发送类似于以下内容的数据： `POST /faces/htdocs/user/search/AdvancedSearch.jsp HTTP/1.1 AdvancedSearchForm%3Akeywords=&AdvancedSearchForm%3ACourseOrSubjectSelection=SUBJECT_ALL&AdvancedSearchForm%3AGraduateLevelSelection=POSTGRADUATE_ALL&AdvancedSearchForm%3AfacultyList=&AdvancedSearchForm%3AdepartmentList=&AdvancedSearchForm%3Alevel=ALL&AdvancedSearchForm%3Asemester=ALL&AdvancedSearchForm%3AallStudyAreas=t&oracle.adf.faces.FORM=AdvancedSearchForm&oracle.adf.faces.STATE_TOKEN=_id51018%3A_id51019&source=AdvancedSearchForm%3AsearchButton`

服务器立即响应“HTTP/1.1 302 临时移动”并将我重定向到“位置：[https](https://handbook.unimelb.edu.au/faces/htdocs/user/search/SearchResults.jsp) ://handbook.unimelb.edu.au/faces/htdocs/user/search/SearchResults.jsp ”

这实际上显示了搜索结果。

据我所知，搜索本身必须使用会话来存储帖子和后续获取之间的搜索项。

这是正常的 JSF 行为吗？访问这样的系统有技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:43:32.990

> *这是正常的 JSF 行为吗？*

这种行为不“正常”。然而，这种方法对于遗留 JSF 1.x 应用程序是可以解释的；这是因为 JSF 1.x 本身不支持 GET 表单。然而，我认为这种方法的设计相当糟糕，并建议用于`<managed-property>`注入 GET 请求参数。webapp 架构师/开发人员很可能没有真正考虑清楚。请注意，自从推出 3 年多一点的 JSF 2.0 以来，由于新标签，原`<form>`生支持使用纯 HTML 的GET 表单。`<f:viewParam>`

* * *

> *访问这样的系统有技巧吗？*

告诉您的 HTTP 客户端维护会话（读取：cookie）并自动跟踪重定向。默认情况下，JSF 已经严重依赖会话，因为它也在其中存储视图状态。这又与 webapp 的设计方式无关。

### 也可以看看：

*   [如何以编程方式将文件上传到网站？](https://stackoverflow.com/questions/8623870/how-can-i-programmatically-upload-a-file-to-a-website/8625286#8625286)- 有关如何正确以编程方式提交基于 JSF 的表单的相关答案。

# iphone - 用于向后编程的 iOS 版本？

> ID：14049926
> 
> 赞同：0
> 
> 时间：2012-12-27T05:43:55.413
> 
> 标签：iphone, ios, xcode, release

在我使用 StackOverflow 的那段时间里，我注意到一些用户在发布他们的代码时所有版本仍然存在，尽管发布已被弃用。通过释放，我的意思是：

```
[self.data release]; 
```

为什么用户仍然这样做？我对旧版本的 iOS 编程一无所知，并且很想这样做，但是当我尝试在我正在构建的应用程序中发布某些内容时，我会收到弃用错误或警告。如果我刚才说的是正确的，我该如何为旧版本编程？另外，如何防止这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:49:46.737

好吧，有点宽泛的问题，直截了当的答案是：去阅读文档。

来自文档[高级内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

> Objective-C 提供了两种应用程序内存管理方法。
> 
> 1) 在本指南中描述的方法中，称为“手动保留释放”或 MRR，您通过跟踪您拥有的对象来显式管理内存。这是使用称为引用计数的模型实现的，该模型是 Foundation 类 NSObject 与运行时环境一起提供的。
> 
> 2) 在自动引用计数或 ARC 中，系统使用与 MRR 相同的引用计数系统，但它会在编译时为您插入适当的内存管理方法调用。强烈建议您将 ARC 用于新项目。如果您使用 ARC，通常不需要了解本文档中描述的底层实现，尽管它在某些情况下可能会有所帮助。有关 ARC 的更多信息，请参阅过渡到 ARC 发行说明。

好吧，您使用的是第二种方法，但是在过去，程序员使用手动保留释放..而一些老派人士（将我算作一个）仍在使用它们..

[向 ARC 发行说明的过渡](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)将经历此过渡。

**编辑**：一些补充（首先作为评论发布，但认为最好在答案中添加它..）

如果您首先从 ARC 开始，那么这就是您要走的路。手动引用计数一开始很难/令人困惑，但一旦学会，将帮助您深入了解如何在核心级别管理内存（相信我，这将提高您作为 iOS 程序员的信心水平）。请记住，**ARC 所做的是在编译时自动添加此保留/释放调用**。**所以保留释放调用仍然存在，只是你不必担心它**。

您可以在不了解 Manual Retain Release 范式的情况下成为一名 iOS 开发人员，但如果您学习它们，不会有什么坏事（也不会发生很多好事）。您可以在睡前阅读一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:49:17.733

最近 XCode 的新功能是 ARC（自动资源计数）。如果 ARC 已打开，就像您的情况一样，那么您不能也不会释放自己的对象。如果您选择关闭 ARC，那么您将负责释放您自己的对象。建议将 ARC 保持打开状态，除非您出于其他原因需要将其关闭。

快速谷歌搜索显示此站点以获取更多信息：[http ://www.drdobbs.com/mobile/automatic-reference-counting-on-ios/240000820](http://www.drdobbs.com/mobile/automatic-reference-counting-on-ios/240000820)

# php - Concrete5 多个文件上传错误：Firefox 中的 404

> ID：14049928
> 
> 赞同：0
> 
> 时间：2012-12-27T05:44:22.427
> 
> 标签：php, firefox, file-upload, concrete5

多个文件上传错误： `404 in Firefox browser`.

检查此[链接](http://my.jetscreenshot.com/14061/20121227-qnug-29kb.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:08:01.647

我会像詹姆斯建议的那样打开控制台。这可能与您的服务器配置方式有关。您是否验证过它可以在其他浏览器（例如 Chrome）中运行？

关于此类问题，concrete5 论坛上有很多有用的帖子。这是一个可能有帮助的：

[http://www.concrete5.org/community/forums/installation/solved-uploads-not-working/](http://www.concrete5.org/community/forums/installation/solved-uploads-not-working/)

以下是其他一些可能也有帮助的帖子：

[http://www.concrete5.org/community/forums/installation/multiple-file-uploading-not-working/](http://www.concrete5.org/community/forums/installation/multiple-file-uploading-not-working/) [http://www.concrete5.org/community/forums/usage/file-manager-multiple-upload-不工作/](http://www.concrete5.org/community/forums/usage/file-manager-multiple-upload-not-working/) [http://www.concrete5.org/community/forums/usage/error_trying_to_upload_multiple_files_take_2/](http://www.concrete5.org/community/forums/usage/error_trying_to_upload_multiple_files_take_2/)

我需要更多信息才能为您提供更有帮助的答案。我会留下评论，但没有足够的声誉。

# block - 通过 Iptalbes/防火墙阻止 sqlmap 注入请求

> ID：14049929
> 
> 赞同：0
> 
> 时间：2012-12-27T05:44:37.297
> 
> 标签：block, iptables, sqlmap

我正在检查我的服务器 RHEL-5 的安全性。我正在运行 sqlmap，它通过 iptables 防火墙顺利通过。

我想通过防火墙阻止 sqlmap 注入。因此，如果有人会尝试相同的方法，它会被防火墙阻止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:42:44.843

那可能做不到。

您可以阻止使用包含字符串“sqlmap”的用户代理进行的任何连接尝试。但是，sqlmap 带有 --random-agent 选项，这使它看起来就像任何其他浏览器一样。

如果您正在运行 Web 服务器，则很难区分 sqlmap 和合法请求。

您需要的是 IDS 或 mod_security（如果您使用 apache）。

# android - 滚动两个listview并处理点击事件

> ID：14049940
> 
> 赞同：0
> 
> 时间：2012-12-27T05:45:39.413
> 
> 标签：android, listview, scroll, onclicklistener

我通过将触摸事件传递给它们来滚动两个列表视图。

```
 OnTouchListener touchListener = new OnTouchListener() {
                    boolean dispatched = false;                                                                                                                                                                                                                             

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                            if (v.equals(m_lv1) && !dispatched) {
                                    m_listAdapter1.setEnabled(true);                                                                                                                                                                                                        
                                    m_listAdapter2.setEnabled(false);                                                                                                                                                                                                       
                                    dispatched = true;                                                                                                                                                                                                                      
                                    m_lv2.dispatchTouchEvent(event);                                                                                                                                                                                                        
                            } else if (v.equals(m_lv2) && !dispatched) {
                                    m_listAdapter1.setEnabled(false);                                                                                                                                                                                                       
                                    m_listAdapter2.setEnabled(true);                                                                                                                                                                                                        
                                    dispatched = true;                                                                                                                                                                                                                      
                                    m_lv1.dispatchTouchEvent(event);                                                                                                                                                                                                        
                            }
                            dispatched = false;                                                                                                                                                                                                                             
                            return false;                                                                                                                                                                                                                                   
                    }
            }; 
```

效果很好。

我也有两个列表视图的 OnItemClickListener，它也可以正常工作

```
 m_lv1.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> adapter, View view, int position, long arg) {
..
}
}); 
```

现在我将 clickListener 添加到列表视图单元格的子布局中。

```
 if(viewHolder.layout_author != null) {
            viewHolder.layout_author.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Intent profileIntent = new Intent(ImageListAdapter.this.activity, ProfileActivity.class);
                        profileIntent.putExtra("JsonUser", jsonAlbumImage.jsonUser);
                        ImageListAdapter.this.activity.startActivity(profileIntent);
                    }
                });
        } 
```

然后，我发现滚动有时不起作用。我猜是因为新的 clickListener 正在消耗触摸事件。

欢迎任何建议/指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:01:13.857

```
You should implement interface OnItemClickListener and then use its Overrided method 
```

onItemClick。在ItemClickListeners 上设置你的listViews。现在在重写方法“onItemClick”中将其参数“parent”与您的 listViews 进行比较。例如：

```
if (parent.equals(listView1)) {
    /* your code here */
} else if(parent.equals(listView2){
    /* your code here */
} 
```

# android - Android 2.3.3 & 4.1.2 android:configChanges 用于检测方向变化

> ID：14049942
> 
> 赞同：1
> 
> 时间：2012-12-27T05:45:39.863
> 
> 标签：android, android-orientation

我正在使用 Android 2.3.3 API 构建一个应用程序。我需要识别方向的变化并执行一些操作。所以我在Android Manifest中添加了以下内容，

```
android:configChanges="orientation|keyboardHidden 
```

我重写了方法

```
public void onConfigurationChanged(Configuration newConfig) 
```

它在 Android 2.3.3 上完美运行。但是当我在 4.1.2 上安装相同的应用程序（使用 2.3.3 API 构建）时，不会调用 onConfigurationChanged()。我在网上搜索了解决方案，人们建议在 android manifest 中添加以下内容。

```
 android:configChanges="orientation|keyboardHidden|screenSize" 
```

如果我使用上述语句构建应用程序并使用 4.1.2 API 构建，它可以在 4.1.2 设备上完美运行。但我无法在 2.3.3 上安装它。2.3.3 API 没有“screenSize”选项。所以要支持两者，我该怎么办？

谢谢， 卡提克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:52:55.180

嗨看看我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" 
    android:maxSdkVersion="16"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity 
        android:name=".ConfigrationTask"
        android:configChanges="orientation|keyboardHidden"
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>

    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:02:50.583

仅仅因为您针对给定的 API 级别进行编译或定位并不意味着您不能明确支持较低的 API 级别。尝试在清单中添加类似以下内容。我从您问题中提到的版本中获取了级别。

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="16"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T07:09:49.140

仅供参考，请看下面我使用的代码：

```
 @Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    if(newConfig.orientation==Configuration.ORIENTATION_LANDSCAPE){
        Toast.makeText(getBaseContext(),"On Config Change LANDSCAPE", Toast.LENGTH_LONG).show();
    }else{
        Toast.makeText(getBaseContext(),"On Config Change PORTRAIT", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T06:23:55.467

请注意您的情况： [配置更改](http://developer.android.com/guide/topics/manifest/activity-element.html#config) 屏幕方向已更改-用户已旋转设备。注意：如果您的应用程序以 API 级别 13 或更高级别为目标（由 minSdkVersion 和 targetSdkVersion 属性声明），那么您还应该声明“screenSize”配置，因为当设备在纵向和横向之间切换时它也会改变。

谢谢

# c# - C# - 当来自 DataTable 的路径字符串的一部分时找不到文件

> ID：14049943
> 
> 赞同：0
> 
> 时间：2012-12-27T05:45:40.143
> 
> 标签：c#, datatable, path

好的，我的问题是，当我尝试访问文件时，路径的文件名来自 DataTable，它只是找不到该文件。

当我从文本文件中解析文件名或只是在字符串中硬编码时，我已经对其进行了测试......当然这项工作>_<

当我从数据表中字符串文件名时，只是不知道差异在哪里。

它构建的字符串如下所示：

**C:\Server\system/somefile.dat**

这是代码：

```
 string accountConnectionString = ConfigurationManager.ConnectionStrings["connstring"].ConnectionString;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        LoadFileChecks();
    }

    public SqlConnection GetAccountConnection()
    {
        SqlConnection connection = new SqlConnection(accountConnectionString);
        connection.Open();
        return connection;
    }

    public DataTable getFilecheck()
    {
        using (var con = GetAccountConnection())
        {
            SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM tFilecheck", con);
            DataTable ds = new DataTable("Filecheck");
            da.Fill(ds);
            con.Close();
            return ds;
        }
    }

    public void LoadFileChecks()
    {
        DataTable table = getFilecheck();
        string localPath = Application.StartupPath;

        foreach (DataRow row in table.Rows)
        {
            string line = row["sFilename"].ToString();

            string FilePath = localPath + "\\" + line;
            if (!File.Exists(FilePath))
            {
                MessageBox.Show("File not found");
                continue;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:44:05.263

首先，`Application.StartupPath`取决于您如何部署应用程序 exe。

```
string localPath = Application.StartupPath; 
```

调试时将是当前执行路径（例如 project\bin\Debug）

其次，您不需要使用转义每个反斜杠`\\`

样品，而不是..

```
string path = "C:\\Server\\system"; 
```

尝试转义字符串`@`

```
string path = @"C:\Server\system"; 
```

然后 Path.Combine 与文件名

```
string fileName = row["sFilename"].ToString();
string filePath = Path.Combine(path, fileName); 
//Path.Combine(@"C:\Server\system", "somefile.dat"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:50:25.763

这是一个 .net 网络应用程序吗？如果是，您应该使用更改服务器路径的路径

```
path = Server.MapPath(path); 
```

# windows - 递归地使文件可写

> ID：14049944
> 
> 赞同：4
> 
> 时间：2012-12-27T05:45:43.873
> 
> 标签：windows, command-line, batch-file, cmd

我正在尝试使用此方法使每个文件在某些​​文件夹下都可写

> 对于 /d /r 。%%d in (nbproject) do @if exists "%%d" dir "%%d" /S | 属性 -R /S /D "%%d"

在文件夹中时

> 目录 "%%d" /S | 属性-R

工作得很好。但是从批处理脚本运行时，它无法正确执行操作。请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T14:47:37.077

使用这样的嵌套循环：只需将文件夹名称更改为您选择的文件夹。

```
@echo off
for /D /R %%D in (nbproject Folder2 Folder3) do if exist "%%~fD" (
    pushd "%%~fD"
    for /R %%F in (*) do if exist "%%~fF" attrib -R "%%~fF" /D
    popd
) 
```

一个班轮：

```
for /D /R %%D in (nbproject Folder2 Folder3) do @if exist "%%~fD" @cd /D "%%~fD" && for /R %%F in (*) do @if exist "%%~fF" attrib -R "%%~fF" /D 
```

让我们也分解你的第一行代码，因为它可能会失败。

1.  您正在将输出通过管道传输`dir`到`attrib`并使用该`d`变量。只需要一个。如果使用变量，则使用`&`符号，否则删除变量。`d``attrib``d`
2.  将`/b`选项与`dir`命令一起使用，尤其是在管道输出时。
3.  `.`for 命令中不需要。未指定时假定为当前目录。
4.  引用循环变量时，使用波浪号`~`删除现有的周围引号，这样就不会出现双引号。
5.  在 中使用时`/S`不需要该选项。`attrib``dir`

例子：

```
for /d /r %%d in (nbproject) do @if exist "%%~d" dir "%%~d" /B /S | attrib -R /D 
```

# linux - Raspbain G++ 编译器在 --m 命令上停止

> ID：14049950
> 
> 赞同：0
> 
> 时间：2012-12-27T05:46:28.360
> 
> 标签：linux, g++, scons, raspbian

> 块引用

您好，我正在尝试编译 The Powder Toy 的最新源代码，但我的编译器（带有 scons 的 G++）每次遇到带有 --m 的命令时都会崩溃。

崩溃日志：

```
scons --lin --release --sse2
scons: Reading SConscript files ...
Checking for C library fftw3f... (cached) yes
Checking for C library bz2... (cached) yes
Checking for C library z... (cached) yes
Checking for C header file bzlib.h... (cached) yes
Checking for C library lua... (cached) no
Checking for C library lua5.1... (cached) yes
scons: done reading SConscript files.
scons: Building targets ...
^[[Ag++ -o build/src/Format.o -c -w -std=c++98 -fkeep-inline-functions -sse2 -O3 -ftree-vectorize -funsafe-math-optimizations -ffast-math -fomit-frame-pointer -funsafe-loop-optimizations -Wunsafe-loop-optimizations -D_GNU_SOURCE=1 -D_REENTRANT -DLUACONSOLE -DGRAVFFT -D_GNU_SOURCE -DUSE_STDINT -D_POSIX_C_SOURCE=200112L -DUSE_SDL -DLIN -DX86 -DX86_SSE2 -I/usr/include/SDL -I/usr/include/lua5.1 -Ibuild/src -Ibuild/data -Ibuild/generated build/src/Format.cpp
g++: error: unrecognized option â-msse2â
scons: *** [build/src/Format.o] Error 1
scons: building terminated because of errors. 
```

为什么会发生这种情况？我还必须删除 -m32 命令才能编译它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:29:07.120

我强烈怀疑这是因为 -sse2 选项告诉 g++ 生成[SSE2](http://en.wikipedia.org/wiki/SSE2)，这是英特尔 x86 架构的 SIMD 指令。Raspberry Pi 板是完全不同的计算机架构 (ARM)，不支持 SSE2。SSE2 的 ARM 等效项是 NEON，但 NEON 可用于 RPi 中使用的 ARM。

我认为对于 g++ 无法识别的选项，它会尝试使用另一个标志（在本例中为 -m，但我之前见过 -f）作为前缀，以查看它是否是同义词。

在您的情况下， sse2 在 Raspberry Pi 上没有任何意义，对于上面的示例，这就是问题所在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T05:48:47.030

什么是 ^[[A ？你的makefile中有不可打印的字符吗？能不能一一回显所有参数，识别出哪些包含这些奇怪的字符？

# php - 使用 symfony 1.4 注销带有分页的大数据列表

> ID：14049953
> 
> 赞同：0
> 
> 时间：2012-12-27T05:46:37.173
> 
> 标签：php, mysql, symfony-1.4

我有一个纯粹基于 Symfony 1.4 和 MySQL 构建的应用程序。

我必须处理带有分页的大约 25.000 个项目的列表，并且由“存储过程（SP）”完成。

该列表工作正常，但在加载页面后发生注销。所以不能去页面中的任何其他选项。而不是 SP，我为表条目创建了视图并进行了检查，但问题仍然存在。

会是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:59:26.790

这不是与我的存储过程有关的问题。

运行 SP 后，我曾经连接结果集中的 id 并将字符串存储在会话变量中。由于字符串的大小很大，会话变量会发生错误。

现在我找到了解决方案，将查询条件设置为会话变量，在我需要的地方，我可以用相同的条件调用 SP。因此解决了。

# iphone - 在 iPhone 应用程序设置中下载应用程序图像

> ID：14049956
> 
> 赞同：1
> 
> 时间：2012-12-27T05:47:22.520
> 
> 标签：iphone, objective-c, ios, settings.bundle

在我的应用程序中，我下载图像并将其保存在应用程序中。我想要使​​用 Settings.bundle 在 iPhone 应用程序设置中的下载选项。我不知道这是否可能，并希望得到其他人的帮助。

提前致谢

# java - java & ruby 中的规则引擎（建议我一个好方法）

> ID：14049958
> 
> 赞同：2
> 
> 时间：2012-12-27T05:47:26.903
> 
> 标签：java, ruby-on-rails, ruby-on-rails-3, jakarta-ee, rule-engine

我需要在 java 或 ruby​​（一个独立项目）中实现一个规则引擎，我必须将其集成到 Java EE web 应用程序中，所以我应该在 java 中实现它，因为它很容易集成，还是应该使用 ruby在铁轨上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:52:52.287

如果您尝试将其集成到 Java EE Web 应用程序中，那么我绝对建议您使用基于 Java 的选项。您希望尽可能减少不同应用程序堆栈的扩散，而跨不同堆栈的集成总是很痛苦。

我想你也会发现这方面的Java库（规则引擎/工作流）更加成熟。我建议看看[Drools](http://www.jboss.org/drools/)：它是开源的并且经过充分验证。

或者，如果您真的想使用 Ruby 但仍想与 Java 集成/使用 Drools 等 Java 库，那么[JRuby](http://jruby.org/)可能是一个不错的选择。

# android - 如何使用 API 请求仅在 Android 应用中显示我的 Facebook 群组？

> ID：14049966
> 
> 赞同：0
> 
> 时间：2012-12-27T05:48:24.210
> 
> 标签：android, facebook, android-layout, facebook-graph-api, android-intent

我只想`Facebook groups`在我的`android apps`.

我尝试使用`API Requests`

> 任何人都可以发布任何线程或示例示例/代码吗？
> 
> 有更好的方法来执行我的任务吗？

谢谢我是android开发的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:55:04.530

您可以发出图形 API 请求

[您可以使用 Android SDK 发出这些请求，如此处](https://developers.facebook.com/docs/reference/androidsdk/request/)所示。

您将收到 JSON 作为返回值，您可以使用它，但您认为适合您的 Android 应用程序。

然后您可以使用图形 API 访问这样的组

```
{
 "id": "195466193802264",
 "version": 1,
 "owner": {
    "name": "Ravi Grover",
    "id": "202875"
   },
 "name": "Facebook Developers",
 "description": "Description.",
 "venue": {
    "street": ""
 },
 "privacy": "OPEN",
 "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yI/r/0pjqWL1NfkE.png",
 "updated_time": "2011-03-12T02:43:05+0000",
 "email": "195466193802264\u0040groups.facebook.com" 
} 
```

[从图形 API 开始](https://developers.facebook.com/docs/getting-started/graphapi/)

[API 参考](https://developers.facebook.com/docs/reference/api/)

# javascript - 向上滚动时显示，向下滚动时隐藏

> ID：14049968
> 
> 赞同：-2
> 
> 时间：2012-12-27T05:48:45.473
> 
> 标签：javascript, jquery, html, css

我希望 div 在我向上滚动时显示，当我向下滚动到页面时它会出现。

请帮助我，我是 jquery 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:54:27.933

```
function MyUpDownFunction(){

    var top-height= $('header-div-element').position().top + <any-other-custom-height>;

    if( $(window).scrollTop() > top-height ){
        $('#your-div').slideDown();
    }else{
        $('#your-div').slideUp();
    }
} 
```

# junit - 通过 ant 从命令提示符向 junit 传递参数

> ID：14049974
> 
> 赞同：0
> 
> 时间：2012-12-27T05:49:22.803
> 
> 标签：junit

我正在执行一个`Junit`接受用户输入的测试用例。

`Junit`通过 执行`ANT`，但脚本突然退出说明

```
java.lang.NumberFormatException: null 
```

是否可以通过这种方式传递动态输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T06:24:21.307

您可能可以为此使用[Java System Properties](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)。但我认为你的单元测试不应该依赖于任何用户输入。它应该始终以相同的方式执行，以确保您的代码正常工作。

# java - 如何在 Android 或 Java 中对日期从当前日期到旧日期进行排序？

> ID：14049975
> 
> 赞同：6
> 
> 时间：2012-12-27T05:49:38.793
> 
> 标签：java, android, date

我需要用户定义的函数，它可以将日期从当前时间排序到旧时间。

我有 10 个日期的列表，我想从最近的日期开始对这些日期进行排序。

目前我有一个逻辑，如果我们可以**以毫秒为单位转换日期，**那么将它与当前毫秒进行比较，最小毫秒将是最近的日期。那是，

```
CURRENT_MILLI_SECOND - A_DATE_CONVERTED_TO_MILLI_SECONDS = MILLI-SECONDS 
```

如果有人可以在这个逻辑或任何其他逻辑上帮助我，请建议我......！！！

这是我从服务器获得的甲酸盐：

```
Thu Dec 27 11:02:43 GMT+05:30 2012 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T05:53:09.513

您可以使用[**Comparator**](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)并可以使用[compare()对数据进行排序](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)

```
Collections.sort(dateList, new Comparator<Date>(){
           public int compare(Date date1, Date date2){
          return date1.after(date2);
        }
      }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T06:08:12.217

试试这个：

```
 Comparator date_comparator = new Comparator() {
    @Override
    public int compare(Date date1, Date date2){
    return date1.compareTo(date2);
    }
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:55:45.970

你可以使用`Calendar`or`Date`类来做到这一点。使用日历和日期，您可以比较两个日期，例如**date1.compare(date2)**或**date.before(date2)**或**date1.after(date2)**此类 API 可用于您的案例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-14T01:13:34.540

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T06:00:22.383

Java 中的[Date](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Date.html)和[Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)类已经有一个很好的 API 来比较日期。

您可以使用它来编写自己的函数来对日期进行排序。

你可以参考[这个链接](http://www.mkyong.com/java/how-to-compare-dates-in-java/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-18T06:57:04.173

有我的[要点](https://gist.github.com/Gkemon/3dc6cf0ab33fcf677ef73b0dc352e96b)可以帮助你。您只需要在`SortedDateGenerator.getSortedDates(List<String> unSortedDate,String datePattern)` 函数的参数中传递未排序的日期字符串和日期模式，然后您将获得排序日期的字符串。如果您需要`Date`对象，那么您可以根据您的要求修改我的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-01T10:01:48.410

只需调用`getSortedDateList`方法即可根据您的要求对日期进行排序

```
private ArrayList<Date> getSortedDateList(ArrayList<Date> dateList) {
        //Replace year with current year to sort in jan to dec order
        for(int i = 0; i < dateList.size(); i++) {
            Calendar calendar = Calendar.getInstance();
            calendar.setTime(dateList.get(i));
            calendar.set(Calendar.YEAR, Calendar.getInstance().get(Calendar.YEAR));
            dateList.set(i, calendar.getTime());
        }
        //Sort all dates in ascending order
        Collections.sort(dateList);
        //Get final index of past dates
        int index = 0;
        for (int i = 0; i < dateList.size(); i++) {
            Calendar calendar = Calendar.getInstance();
            calendar.setTime(dateList.get(i));
            calendar.set(Calendar.YEAR, Calendar.getInstance().get(Calendar.YEAR));
            Calendar today = Calendar.getInstance();
            today.set(Calendar.DATE, Calendar.getInstance().get(Calendar.DATE) - 1);
            if (calendar.getTime().after(today.getTime())) {
                index = i;
                break;
            }
        }
        //New list for storing upcoming dates
        ArrayList<Date> newList = new ArrayList<>();

        //Store upcoming dates in new list
        for (int i = index; i < dateList.size(); i++) {
            newList.add(dateList.get(i));
        }
        //Store past dates in new list
        for (int i = 0; i < index; i++) {
            newList.add(dateList.get(i));
        }
        Collections.copy(dateList, newList);
        return dateList;
    } 
```

例如，将一些示例日期存储到数组列表并调用`getSortedDateList`方法

```
SimpleDateFormat formatter = new SimpleDateFormat("E MMM dd HH:mm:ss z yyyy"); // Your date format

ArrayList<Date> dateList = new ArrayList<>();
dateList.add(formatter.parse("Thu May 25 00:00:00 GMT+05:30 2000"));
dateList.add(formatter.parse("Tue Apr 18 00:00:00 GMT+05:30 2021"));
dateList.add(formatter.parse("Wed Jan 27 00:00:00 GMT+05:30 1997"));
dateList.add(formatter.parse("Sat Feb 22 00:00:00 GMT+05:30 2020"));
dateList.add(formatter.parse("Mon Dec 20 00:00:00 GMT+05:30 2001"));
dateList.add(formatter.parse("Thu Jun 14 00:00:00 GMT+05:30 2009"));
dateList.add(formatter.parse("Sat Mar 01 00:00:00 GMT+05:30 1999"));
dateList.add(formatter.parse("Sat Nov 07 00:00:00 GMT+05:30 2005"));

dateList = getSortedDateList(dateList);

for(Date date: dateList) {
    System.out.println(date.toString());
} 
```

如果当前日期是`Feb 01 2021`，那么最终输出将如下所示

```
Mon Feb 22 00:00:00 IST 2021
Mon Mar 01 00:00:00 IST 2021
Sun Apr 18 00:00:00 IST 2021
Tue May 25 00:00:00 IST 2021
Mon Jun 14 00:00:00 IST 2021
Sun Nov 07 00:00:00 IST 2021
Mon Dec 20 00:00:00 IST 2021
Wed Jan 27 00:00:00 IST 2021 
```

# objective-c - 如何在 CorePlot 中只选择一些点？

> ID：14049979
> 
> 赞同：0
> 
> 时间：2012-12-27T05:49:51.620
> 
> 标签：objective-c, ios, core-plot

我在我的项目中使用*CorePlot*。我有一个包含大量数据点的散点图。**我的一些**观点（**但不是全部**）需要能够响应用户点击。我怎样才能做到这一点？

我已设置`plotSymbolMarginForHitDetection`为 15.0f，但它适用于所有点，而不适用于我需要选择的一些点。是否可以为不同的点设置变量`plotSymbolMarginForHitDetection`值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:12:02.510

否。要么忽略您不想要的点上的命中，要么将图分成两个单独的图——一个响应用户交互，一个不响应。

# iphone - 如果用户没有更新应用程序，如何显示警报

> ID：14049981
> 
> 赞同：0
> 
> 时间：2012-12-27T05:50:08.967
> 
> 标签：iphone, ios, xcode, ipad

我正在对我的应用程序进行重大更新，并想知道是否可以检测到用户是否没有更新应用程序以向用户发送警报，例如在 Chrome 中，如果您不更新应用程序，它会显示警报。

图片： ![在此处输入图像描述](../Images/7e9cfbe4d03a2ff2918cc5253019a110.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:05:26.843

我认为 Chrome 会在服务器上查找新发布的版本，然后显示该消息。要通知您的应用程序有关更新，请尝试向您的应用程序发送 PUSH 通知。处理来自 PUSH 通知的信息，以便您可以使用它来检查应用程序是否已更新。可能您可以在消息正文中添加版本号。在 App Store 上准备好新版本后，向为您的应用注册的设备发送 PUSH 通知，这应该告诉用户有可用更新。随后，您可以使用计时器检查应用程序是否更新到最新版本。

但是，这里的主要要求是有一个 Web 服务器来存储有兴趣获取更新的设备的 APNS 令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:55:38.423

检测后使用 NSTimer 方法并给它特定的时间并抛出一个方法

您提供警报视图和消息以进行警报。当用户更新停止 NSTimer。

# python - Selenium Webdriver 在子元素中查找元素

> ID：14049983
> 
> 赞同：81
> 
> 时间：2012-12-27T05:50:10.713
> 
> 标签：python, xpath, selenium

我正在尝试使用 Selenium（版本 2.28.0）在子元素中搜索元素，但 selenium des 似乎并未将其搜索限制在子元素中。我做错了还是有办法使用 element.find 搜索子元素？

例如，我使用以下代码创建了一个简单的测试网页：

```
<!DOCTYPE html>
<html>
    <body>
        <div class=div title=div1>
            <h1>My First Heading</h1>
            <p class='test'>My first paragraph.</p>
        </div>
        <div class=div title=div2>
            <h1>My Second Heading</h1>
            <p class='test'>My second paragraph.</p>
        </div>
        <div class=div title=div3>
            <h1>My Third Heading</h1>
            <p class='test'>My third paragraph.</p>
        </div>
    </body>
</html> 
```

我的 python（2.6 版）代码如下所示：

```
from selenium import webdriver

driver = webdriver.Firefox()

# Open the test page with this instance of Firefox

# element2 gets the second division as a web element
element2 = driver.find_element_by_xpath("//div[@title='div2']")

# Search second division for a paragraph with a class of 'test' and print the content
print element2.find_element_by_xpath("//p[@class='test']").text 
# expected output: "My second paragraph."
# actual output: "My first paragraph." 
```

如果我运行：

```
print element2.get_attribute('innerHTML') 
```

它从第二个部门返回 html。所以 selenium 并没有将它的搜索限制在 element2 上。

我希望能够找到 element2 的子元素。这篇文章建议我的代码应该可以工作[Selenium WebDriver 访问子元素](https://stackoverflow.com/questions/8836712/selenium-webdriver-access-a-sub-element)，但他的问题是由超时问题引起的。

谁能帮我理解这里发生了什么？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-12-27T06:38:35.750

如果以 开头的 XPath 表达式`//`，它将从文档的根开始搜索。要相对于特定元素进行搜索，您应该在表达式前面加上`.`：

```
element2 = driver.find_element_by_xpath("//div[@title='div2']")
element2.find_element_by_xpath(".//p[@class='test']").text 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-03T09:44:05.403

使用以下内容：

```
element2 = driver.find_element_by_cssselector("css=div[title='div2']")
element2.find_element_by_cssselector("p[@class='test']").text 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-27T14:07:13.630

这是您在 CSS 子类中搜索元素或标签的方式，我相信它也适用于多级情况：

示例 HTML：

```
<li class="meta-item">
 <span class="label">Posted:</span>
 <time class="value" datetime="2019-03-22T09:46:24+01:00" pubdate="pubdate">22.03.2019 u 09:46</time>
</li>
```

例如，这就是您获取`pubdate`标签值的方式。

```
published = driver.find_element_by_css_selector('li>time').get_attribute('datetime') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-07T08:45:13.360

Chrome 网络驱动程序：

```
element = driver.find_element_by_id("ParentElement")
localElement = element.find_element_by_id("ChildElement")
print(localElement.text) 
```

# java - 使用“移动选择”快捷方式取消选择树上的某些内容时，无法知道取消选择的项目

> ID：14049986
> 
> 赞同：1
> 
> 时间：2012-12-27T05:50:25.503
> 
> 标签：java, zk

我正在使用 ZK 6.5.1。

有时一棵树可能包含一些逻辑，比如当用户选择/取消选择一个项目时，这可以通过像这样的监听事件轻松完成。

```
@Listen("onSelect = #tree")
public void onSelect(SelectEvent<Treeitem, String> event) {
    Treeitem ref = event.getReference();
    if (ref.isSelected()) {
        // do things when item is selected
    } else {
        // do things when item is deselected
    }
} 
```

另一方面，ZK 提供了用户可以在树上使用`up`, `down`, `Page Up`, `Page Down`, `Home`,来“[移动选择](http://books.zkoss.org/wiki/ZK_Component_Reference/Data/Tree#Mouseless_Entry_Tree)”的功能。此操作还将发送有关新选定项目的选择事件，**但不会发送取消选定项目的事件**。因此，当用户使用这些键时，以前的代码片段不起作用。`End`

 **我的问题是：

1.  我应该怎么做才能确切知道用​​户“移动选择”时取消选择了哪些项目？
2.  如果没有，我可以禁用这些键吗？

如果有人想知道，这是一个 SSCCE 示例。[或者在 ZKFiddle](http://zkfiddle.org/sample/3ppvrj9/1-Move-Selection-hot-key-dosen-t-sent-event-for-deselect-items)

**作曲家：**

```
public class TestComposer extends SelectorComposer<Div> {

    @Listen("onSelect = #tree")
    public void onSelect(SelectEvent<Treeitem, String> event) {
        Treeitem ref = event.getReference();
        if (ref.isSelected()) {
            Clients.log("Selected " + ref.getLabel());
        } else {
            Clients.log("Deselected " + ref.getLabel());
        }
    }
} 
```

**祖尔：**

```
<div apply="mytest.TestComposer">
    <tree id="tree" multiple="true" checkmark="true">
        <treechildren>
            <treeitem label="A" />
            <treeitem label="B" />
            <treeitem label="C" />
        </treechildren>
    </tree>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:12:20.543

这是合乎逻辑的，因为在事件驱动编程中，
每个用户操作只发送一个事件是一种很好的做法。但是您需要的所有信息
都在活动中。[在 zk fiddle 上](http://zkfiddle.org/sample/3eh404v/1-How-to-findout-Items-deselected-by-key-in-Tree)
查看我如何改进您的示例。 我只是在事件方法中添加了几行。

```
@Listen("onSelect = #tree")
    public void onSelect(SelectEvent<Treeitem, String> event) {
        Treeitem ref = event.getReference();
        Set<Treeitem> newSelection = new HashSet<Treeitem>(event.getSelectedItems());
        if (ref.isSelected()) {
            if (selected != null) {
                Set<Treeitem> deselected = new HashSet<Treeitem>(selected);
                deselected.removeAll(newSelection);
                for (Treeitem t : deselected) {
                    Clients.log("Deselected " + t.getLabel());
                }
            }
            Clients.log("Selected " + ref.getLabel());
        } else {
            Clients.log("Deselected " + ref.getLabel());
        }
        selected = newSelection;
    } 
```

我使用 java`Set`和集合论逻辑来计算`Set`取消选择的项目。**

# iphone - 在目标 c 中传递一个数组

> ID：14049987
> 
> 赞同：-1
> 
> 时间：2012-12-27T05:50:37.577
> 
> 标签：iphone, objective-c, ios, ipad

我
在 A 类 中有 4 种方法

```
-(void)Method1
{

} 
```

B类

```
-(void)Method2
{  
     //calling method3 here  
}  
-(void)Method3
{  
  //calling method4 here    
}  
-(NsMutablearray*)Method4
{  
  return array;  
} 
```

我从method1调用method2，它上升到method4，method4返回一个nsmutablearray。如何在我的方法 1 中获取该数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:54:25.720

更改您的方法，例如：

```
-(void)Method1
{ 
   NSMutableArray *tempArray = [classbObj method2]; 
} 
```

B类

```
-(NSMutablearray *)Method2
{  
    return [self method3];  
}  
-(NSMutablearray *)Method3
{  
  return [self method4]; 
}  
-(NSMutablearray*)Method4
{  
  return array;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:53:10.570

你有这样的调用方法2。在 method4Ary 中，您将返回值

```
NSMutableArray * method4Ary = [method1_obj Method2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:54:15.190

在课堂上使用**委托**进行反向消息传递。

有关更多参考，请参阅[Basic Delegate Example](http://coderchrismills.wordpress.com/2011/05/05/basic-delegate-example/)链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T05:54:58.133

只需将返回类型从更改**`void`**为**`NsMutablearray`**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T07:04:09.493

您有几种方法可以完成此任务：

首先：需要更改您的方法签名，并用作：

```
-(void)method1{ 
  ClassB *classBObj=[ClassB new];
   NSMutableArray *tempArray = [classBObj method2]; 
} 
```

B类

```
-(NSMutableArray *)method2{  
    return [self method3];  
}  
-(NSMutableArray *)method3{  
  return [self method4]; 
}  
-(NSMutableArray *)method4{  
  ...
  return array;  
} 
```

第二：如果您想要与method1中的method4相同的数组而不进行任何修改，请发布通知，并在ClassA中观察它。

第三：您可以为此使用委托，因为这是一对一的，这将比通知更好。

第四：如果您不想更改方法签名，请创建一个具有 NSArray 类型属性的共享类，并使用该属性在方法和类中传递您的数组。

# iphone - 从 iPhone 中的 My App 打开 Native Map 应用程序

> ID：14049988
> 
> 赞同：2
> 
> 时间：2012-12-27T05:50:54.863
> 
> 标签：iphone, ios, ipad, mapkit

我想通过单击按钮从我的应用程序中打开本机地图应用程序。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:58:58.860

```
NSString *mapUrl= [NSString stringWithFormat:@"https://maps.google.com/maps?ll=%f,%f",Latitude ,Longitude];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:mapUrl]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:00:32.040

看看下面的代码，它会满足你的需要。

```
NSString *title = @"title";
float latitude = 35.4634;
float longitude = 9.43425;
int zoom = 13;
NSString *stringURL = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@@%1.6f,%1.6f&z=%d", title, latitude, longitude, zoom];
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T05:55:25.417

```
NSString *title = @"any title";
float latitude = 75.4634;
float longitude = 69.43425;
int zoom = 13;
NSString *stringURL = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@@%1.6f,%1.6f&  z=%d", title, latitude, longitude, zoom];
NSURL *url = [NSURL URLWithString:stringURL];   
[[UIApplication sharedApplication] openURL:url]; 
```

# data-structures - 高效查询任意位置的字典数据结构

> ID：14049989
> 
> 赞同：2
> 
> 时间：2012-12-27T05:50:56.523
> 
> 标签：data-structures, dictionary, nlp, bioinformatics

任何人都可以建议一个适当的数据结构来保存一个字典，让我可以查询在特定位置具有特定字母的单词（项目）的存在吗？例如，确定哪些单词（如果有）在 x、y、z 位置具有字母 a、b、c。插入不必特别有效。

这基本上是拼字游戏的问题（我也有与字母相关的分数，但这不需要我们关心）。[我怀疑生物信息学家以序列比对](http://en.wikipedia.org/wiki/Sequence_alignment)的名义研究了同样的问题。就速度而言，最先进的技术是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:41:06.207

如果您正在尝试构建一个非常快速的拼字游戏播放器，您可能需要查看专门为此目的设计的**[GADDAG数据结构。](http://en.wikipedia.org/wiki/GADDAG)**从本质上讲，GADDAG 是一个压缩的 trie 结构（具体来说，它是一个修改后的 DAWG），它可以让您向外探索并找到可以由一组特定字母组成的所有单词，这些单词的哪些字母必须在什么位置受到限制，以及找到的字符串的总长度。

有关 GADDAG 的 Wikipedia 文章更深入地介绍了结构并链接到有关该主题的原始论文。您可能还想将 DAWG 作为起点。

希望这可以帮助！

# android - 在某些任务杀手杀死应用程序后如何恢复android应用程序？

> ID：14049994
> 
> 赞同：0
> 
> 时间：2012-12-27T05:51:38.993
> 
> 标签：android, android-activity, android-2.3-gingerbread

在我的应用程序中，我有几个显然相互关联的活动。每当我进行某些活动并且用户使用任何任务杀手杀死我的应用程序时。我想做两件事

> 1.  清除我在用户登录时添加的通知..
> 2.  完成除第一个活动以外的所有活动，即登录活动

现在，如果用户从最近的任务或从启动器再次启动我的应用程序，我想从第一个活动开始，即登录活动......

目前，如果我使用 android**管理进程**并结束活动或从**android 任务管理器**强制关闭应用程序，我的代码工作得非常好。但是，如果我正在使用其他一些任务杀手应用程序，即高级任务杀手，当我从最近的应用程序重新启动应用程序时关闭应用程序后，它会尝试从上次使用的 Activity 而不是 Login Activty 重新启动，并给出一个丑陋的强制关闭错误。 . 在这种情况下，通知也不会被清除。

我如何处理第三方任务杀手？

我已经阅读了关于 SO 的几个线程，但无法获得指针，其中很少......

[与任务杀手有关](https://stackoverflow.com/questions/3461951/how-does-the-android-advanced-task-killer-app-work)

[通知相关](https://stackoverflow.com/questions/3461743/how-to-cancel-android-notifications)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:08:35.767

首先，让您的应用程序作为服务而不是活动运行。并将您的服务绑定为 STICKY 以便在杀死您的应用程序后它会立即重新启动，并且只有您的应用程序可以停止您自己的服务。有关更多信息，请参阅 [http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

# f# - F# 区分联合枚举使用反射而不是枚举

> ID：14049999
> 
> 赞同：6
> 
> 时间：2012-12-27T05:51:58.437
> 
> 标签：f#, f#-3.0

我正在使用反射枚举 F# 中的一些可区分联合中的值（例如[，如何在 F# 中枚举可区分联合？](https://stackoverflow.com/questions/6997083/how-to-enumerate-a-discriminated-union-in-f)）。我想使用从使用反射获得的值来生成不同的记录类型，这些记录类型由我正在枚举的有区别的联合组成，但我不确定如何将类型 UnionCaseInfo 转换为实际的联合案例。有可能进行这样的演员吗？下面的代码正是我想要做的（区分联合中的值不同，变量名也不同）。我知道我可以使用枚举，但我宁愿不使用它们而不是区分联合。

```
open System
open Microsoft.FSharp.Collections
open Microsoft.FSharp.Reflection

let GetUnionCaseName (x:'a) = 
    match FSharpValue.GetUnionFields(x, typeof<'a>) with
    | case, _ -> case.Name  

type shape =
    | Square
    | Circle
    | Triangle
    | Other

type color =
    | Black
    | Red
    | Blue
    | Green
    | White

type coloredShape = { Shape: shape; Color: color }

let shapeCases = FSharpType.GetUnionCases typeof<shape>
let colorCases = FSharpType.GetUnionCases typeof<color>

let boardOfRelevantPossibilities = Microsoft.FSharp.Collections.Array2D.init<coloredShape> 5 3 (fun x y -> {Shape = Other; Color = Black})

let OtherShape = GetUnionCaseName(shape.Other)
let rand = Random()

for shapeCase in shapeCases do
    // Is there a way to do the following comparison this without using string comparisons
    if not (shapeCase.Name.Equals OtherShape) then
        for colorCase in colorCases do
            let mutable addedToBoard = false

            while not addedToBoard do
                let boardRowIndex = rand.Next(0,4)
                let boardColumnIndex = rand.Next(0,2)

                if boardOfRelevantPossibilities.[boardRowIndex,boardColumnIndex].Shape.Equals shape.Other then
                    addedToBoard <- true

                    // I want to utilize colorCase instead of other and shapeCase instead of black
                    boardOfRelevantPossibilities.[boardRowIndex,boardColumnIndex] <- {Shape = Other; // Shape should be determined by shapeCase instead of Other  
                        Color = White } // Color should be determined by colorCase instead of White

Console.ReadKey() |> ignore 
```

我将我的代码重新分解为以下内容：

```
open System
open Microsoft.FSharp.Collections
open Microsoft.FSharp.Reflection

let allUnionCases<'T>() =
    FSharpType.GetUnionCases(typeof<'T>)
    |> Array.map (fun case -> FSharpValue.MakeUnion(case, [||]) :?> 'T)

type shape =
    | Square
    | Circle
    | Triangle
    | Other

type color =
    | Black
    | Red
    | Blue
    | Green
    | White

type coloredShape = { Shape: shape; Color: color }

let shapeCases = FSharpType.GetUnionCases typeof<shape>
let colorCases = FSharpType.GetUnionCases typeof<color>

let numberOfRows = 5
let numberOfColumns = 3
let boardOfRelevantPossibilities = Microsoft.FSharp.Collections.Array2D.init<coloredShape> numberOfRows numberOfColumns (fun x y -> {Shape = Other; Color = Black})

let rand = Random()

for shapeCase in allUnionCases<shape>() do
    // No string comparison anymore
    if shapeCase <> shape.Other then
        for colorCase in allUnionCases<color>() do
            let mutable addedToBoard = false

            while not addedToBoard do
                let boardRowIndex = rand.Next(0,numberOfRows)
                let boardColumnIndex = rand.Next(0,numberOfColumns)

                if boardOfRelevantPossibilities.[boardRowIndex,boardColumnIndex].Shape.Equals shape.Other then
                    addedToBoard <- true
                    // utilizing colorCase and shapeCase to create records to fill array
                    boardOfRelevantPossibilities.[boardRowIndex,boardColumnIndex] <- {Shape = shapeCase; Color = colorCase } 

printfn "%A" boardOfRelevantPossibilities
Console.ReadKey() |> ignore 
```

这种新的重构结合了反射以枚举可区分联合，同时允许我生成由这些可区分联合组成的不同记录类型。我还发现了两个错误，它们在重构代码中得到修复。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T09:52:18.097

*老实说，我更喜欢在静态方法中手动枚举所有联合案例，而不是通过反射创建它们。*

正如@John 所说，您还需要使用[FSharpValue.MakeUnion](http://msdn.microsoft.com/en-us/library/ee340309.aspx)一步：

```
let allUnionCases<'T>() =
    FSharpType.GetUnionCases(typeof<'T>)
    |> Array.map (fun case -> FSharpValue.MakeUnion(case, [||]) :?> 'T) 
```

在`while`循环中，您应该使用`=`而不是使用没有完全限定名称的`Equals`联合案例 ( )。`shape.Other`

```
/// Use type params for clarity; type inference should work fine without them
for shapeCase in allUnionCases<shape>() do
    for colorCase in allUnionCases<color>() do
        let mutable addedToBoard = false
        while not addedToBoard do
            let r = rand.Next(0,4)
            let c = rand.Next(0,2)
            if boardOfRelevantPossibilities.[r, c].Shape = Other then
                addedToBoard <- true
                boardOfRelevantPossibilities.[r, c] <- { Shape = shapeCase; 
                                                         Color = colorCase } 
```