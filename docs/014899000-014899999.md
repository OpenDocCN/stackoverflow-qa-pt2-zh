# StackOverflow 问答 14899000-14899999

# c# - ASP.NET MVC 和 MemoryCache - 我如何使用它？

> ID：14899006
> 
> 赞同：7
> 
> 时间：2013-02-15T16:28:04.817
> 
> 标签：c#, asp.net, asp.net-mvc, memorycache

我的 Application_Start 中有这个：

```
var crumbsCache = new MemoryCache("breadCrumbsNames");
var crumbsList = new List<CacheItem>
                    {
                        //list of new CacheItem();
                    };
foreach (var cacheItem in crumbsList)
{
    crumbsCache.Add(cacheItem, new CacheItemPolicy());
} 
```

现在，在我的控制器中，我正在这样做：

```
var cache = new MemoryCache("breadCrumbsNames");
var cacheItem = cache.GetCacheItem("nameOfCacheItem"); 
```

但是 cacheItem 总是为空，我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T16:50:33.167

我认为对您来说更好的选择是使用`Ninject`或其他一些依赖注入框架根据`MemoryCache`需要将您注入控制器。

您将从向 ASP.NET MVC 项目中添加`Ninject`和`Ninject.Mvc3`（以及任何其他相关位）开始。如果您在 Visual Studio 中工作，则可以使用 NuGet 来执行此操作。它非常轻松且自动化程度很高。

下一步将把你包装`MemoryCache`到某种界面中，例如：

```
public interface IMemoryCacheService
{
    MemoryCache MemoryCache
    {
        get;
        set;
    }
} 
```

和：

```
public class MemoryCacheService : IMemoryCacheService
{
    public MemoryCacheService()
    {
        MemoryCache = new MemoryCache();
    }

    public MemoryCache MemoryCache
    {
        get;
        set;
    }
} 
```

然后在 Ninject 中定义一个绑定，以便 Ninject 知道当您需要某种类型时`IMemoryCacheService`，它应该为您提供`MemoryCacheService`.

我将在这里粘贴我自己的 Ninject 配置类。将在您的项目中创建的一个将非常相似，并将位于一个名为的文件夹中`App_Start`（如果您使用 NuGet，它将自动创建）。Ninject 默认创建的类称为`NinjectWebCommon`.

```
public static class NinjectConfig
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    public static void Start()
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));

        bootstrapper.Initialize(CreateKernel);
    }

    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();

        kernel.Bind<Func<IKernel>>()
              .ToMethod(context => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>()
              .To<HttpApplicationInitializationHttpModule>();
        kernel.RegisterServices();

        return kernel;
    }

    private static void RegisterServices(this IKernel kernel)
    {
        kernel.Bind<IMemoryCacheService>()
              .To<MemoryCacheService>()
              .InSingletonScope();
              // InSingletonScope() is important so Ninject knows
              // to create only one copy and then reuse it every time
              // it is asked for

        // ignore the stuff below... I have left it in here for illustration
        kernel.Bind<IDbTransactionFactory>()
              .To<DbTransactionFactory>()
              .InRequestScope();
        kernel.Bind<IDbModelContext>()
              .To<DbModelContext>()
              .InRequestScope();
        kernel.Bind<IDbModelChangeContext>()
              .To<DbModelChangeContext>()
              .InRequestScope();
        kernel.Bind<IUserContext>()
              .To<UserContext>()
              .InRequestScope();

        kernel.BindAttributeAndFilter<IgnoreNonAjaxRequestsFilter, IgnoreNonAjaxRequestsAttribute>();
        kernel.BindAttributeAndFilter<ProvideApplicationInfoFilter, ProvideApplicationInfoAttribute>();
        kernel.BindAttributeAndFilter<ProvideSessionInfoFilter, ProvideSessionInfoAttribute>();
        kernel.BindAttributeAndFilter<UseDialogLayoutFilter, UseDialogLayoutAttribute>();
        kernel.BindAttributeAndFilter<CheckResourceAccessFilter, CheckResourceAccessAttribute>();
        kernel.BindAttributeAndFilter<CheckResourceStateFilter, CheckResourceStateAttribute>();
    }

    private static void BindAttributeAndFilter<TFilter, TAttribute>(this IKernel kernel)
    {
        kernel.BindFilter<TFilter>(FilterScope.Action, null)
              .WhenControllerHas<TAttribute>();
        kernel.BindFilter<TFilter>(FilterScope.Action, null)
              .WhenActionMethodHas<TAttribute>();
    }
} 
```

最后，您的控制器将从：

```
public class HomeController : Controller
{
    public ActionResult Foo()
    {
        ...
    }

    ...
} 
```

至：

```
public class HomeController : Controller
{
    private IMemoryCacheService memoryCacheService;

    public HomeController(IMemoryCacheService memoryCacheService)
    {
        this.memoryCacheService = memoryCacheService;
    }

    public ActionResult Foo()
    {
        // use this.memoryCacheService in your controller methods...
    }

    ...
} 
```

假设您`IEmailService`按照上述策略创建了另一项服务，并且您希望`IEmailService`也可以使用`HomeController`，那么：

```
public class HomeController : Controller
{
    private IMemoryCacheService memoryCacheService;
    private IEmailService emailService;

    public HomeController(IMemoryCacheService memoryCacheService, IEmailService emailService)
    {
        this.memoryCacheService = memoryCacheService;
        this.emailService = emailService;
    }

    public ActionResult Foo()
    {
        // use this.memoryCacheService in your controller methods...
        // and also use this.emailService in your controller methods...
    }

    ...
} 
```

Ninject 将更改 ASP.NET MVC 控制器工厂以自动将注入的参数提供给控制器构造函数。

我认为从长远来看，这种方法比保留全局变量等更好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-15T16:32:34.483

`MemoryCache`您正在每个控制器中创建一个新实例。由于它是新的，因此其中没有任何内容，这就是为什么您的值始终为空的原因。您需要访问您在 中创建的同一实例`Application_Start`。研究使用`MemoryCache.Default`.

# sql - 如何从 sql 表中删除不需要的行值？

> ID：14899013
> 
> 赞同：0
> 
> 时间：2013-02-15T16:28:14.420
> 
> 标签：sql, sql-server, tsql

我有一个奇怪的问题。我在公司的 sql 数据库中添加了一些不需要的值。如何从我的 sql 表中删除。

```
columnA   ColumnB   ColumnC   ColumnD   ColumnE 
   1         22      3332
   2         11      5543
   3         11      4444
   4         11      1234
   4         11      1344
   4         11      5666 
```

一定是

```
columnA   ColumnB   ColumnC  ColumnD   ColumnE 
   1        22       3332
   2        11       5543
   3        11       4444
   4        11       1234 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:30:39.917

所以你要删除最后两行？只需创建符合您要删除的条件的删除语句（因为看起来您没有复制任何现有数据）：

```
DELETE FROM MyTable
WHERE ColumnA = 4 
AND ColumnB = 11 
AND ColumnC = 1344

DELETE FROM MyTable
WHERE ColumnA = 4 
AND ColumnB = 11 
AND ColumnC = 5666 
```

（当然，用您没有提供的表的实际名称替换“MyTable”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T16:31:24.077

具有CTE和`ROW_NUMBER`功能

```
WITH CTE AS
(
    SELECT columnA, ColumnB, ColumnC, ColumnD, ColumnE,
        RN = ROW_NUMBER()OVER(PARTITION BY columnA, ColumnB ORDER BY ColumnC)
   FROM dbo.TableName
)
DELETE FROM CTE WHERE RN > 1 
```

这假设重复项由前两列确定，并且您希望将其保留`ColumnC`为样本中的最低值。

这是一个[**演示**](http://sqlfiddle.com/#!6/b9b83/5/2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:36:46.027

因为我们不知道您要保留哪些记录，所以很难回答您的问题。如果您想保留按前两列分组的第一条记录，那么这将是关闭的——尽管不能保证：

```
WITH CTE AS (
SELECT *, ROW_NUMBER() OVER (PARTITION BY col1,col2 ORDER BY (SELECT NULL)) RN
FROM YourTable
  ) 
DELETE FROM CTE WHERE RN<>1 
```

如果您有另一个字段（例如在 Tim Schmelter 的回答中），请使用该字段而不是 SELECT NULL。

这是一个小提琴，展示了剩下的内容：[http ://sqlfiddle.com/#!3/29aec/4](http://sqlfiddle.com/#!3/29aec/4)

# javascript - 角度输入格式化程序/解析器指令和插值属性？

> ID：14899017
> 
> 赞同：1
> 
> 时间：2013-02-15T16:28:26.777
> 
> 标签：javascript, angularjs, angularjs-directive

我正在尝试编写一个可配置的指令，该指令应用于需要 ngModel 的输入元素，并为 ngModel 添加解析器和格式化程序函数。

我遇到的问题是我似乎无法将插值传递到指令中，同时支持 ngModel 绑定。例如，我希望能够以两种方式之一使用我的指令：

传递文字参数：

```
<input ng-model="foo" my-directive="120" /> 
```

或从当前范围传递插值参数：

```
<input ng-model="foo" my-directive="{{bar}}" />

...
function MyCtrl($scope) {
  $scope.bar = "120";
} 
```

如果我在指令定义中读取链接函数的属性参数，我可以在第一次使用中获取 attributes.myDirective 的值，但在第二次使用中 myDirective 的值是未定义的。

现在，如果我在指令定义中添加一个隔离范围：

```
scope: { myDirective: '@' } 
```

然后在上面的场景中定义并插值了 scope.myDirective，但是现在 ngModel 坏了。我的解析器/格式化程序函数的输入参数未定义。发生了什么事，我该如何实现我想要的行为？

指示：

```
module.directive('myDirective', function () {
        return {
            restrict: 'A',
            require: 'ngModel',
            replace: false,
            link: function (scope, elm, attrs, ctrl) { // attrs.myDirective not interpolated 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:08:52.597

添加隔离范围时，您正在创建全新的子范围，它不会从具有`ngModel`' 值的范围继承。这就是为什么您的解析器和格式化程序变得不确定的原因。

此外，在您的示例中，要获得 的值`bar`，您不需要在花括号中使用它：

```
<input ng-model='foo' my-directive='bar' /> 
```

在您的链接功能中：

```
link: function(scope, element, attr, ctrl) {
  attr.myDirective == 'bar'.
  scope.$eval(attr.myDirective) == // whatever the value of 'bar' is in the current scope
} 
```

所以你不需要隔离范围。只需用于`scope.$eval`评估传递给您的指令的表达式。

[这是一个快速的小提琴](http://jsfiddle.net/uAkQs/)。

# c# - 尝试根据表单输入将信息输入数据库列

> ID：14899026
> 
> 赞同：0
> 
> 时间：2013-02-15T16:28:45.100
> 
> 标签：c#, asp.net, entity-framework

我什至不知道如何表达这个问题，所以请多多包涵。如果需要，我会编辑。

让我们从我的代码开始：

```
var assetMonth = "assest."+Month;
var billableAssests = (from s in db.Assets
                              where s.SystemPosition == 1
                              select s).ToList();
        try {

            foreach (var assests in billableAssests)
            {
                    assests.PreviousDateBilled = assests.LastDateBilled;
                    assests.LastDateBilled = today;
                    assetMonth = assests.MonthlyChargeRate; <===HERE
                    assests.RunnungLeaseTotal = assests.RunnungLeaseTotal + assests.MonthlyChargeRate;
                    if (assests.MonthBilled == null)
                    {
                        assests.MonthBilled =  1;
                    }
                    else
                    {
                        assests.MonthBilled = assests.MonthBilled + 1;
                    }

                    //db.Entry(billableAssests).State = EntityState.Modified;
                    db.SaveChanges();

                }
         } 
```

我从用户那里得到了他们想要计费的月份，并希望将每月收费率插入该月份列中。我无法弄清楚如何为我的生活做到这一点。有什么建议或告诉我从哪里开始寻找？

谢谢！

编辑*** 表模型

```
public class Asset
{
    [Key]
    public string AssetTag { get; set; }

    public string SerialNumber { get; set; }
    public int WarrantyPeriod { get; set; }
    public string DeviceApprover { get; set; }
    public int Dept_id { get; set; }
    public string AssetLocation { get; set; }
    public string DeliveryLocation { get; set; }
    public int SectionKey { get; set; }
    public int VendorKey { get; set; }
    public int DeviceInformationKey { get; set; }
    public int EmployeeKey { get; set; }
    public decimal PurchasePrice { get; set; }
    public decimal? BaseLeaseRate { get; set; }
    public decimal? MonthlyChargeRate { get; set; }
    public decimal? LeaseTotal { get; set; }
    public int? MonthBilled { get; set; }
    public DateTime? LeaseStartDate { get; set; }
    public DateTime? LeaseEndDate { get; set; }
    public decimal? RunnungLeaseTotal { get; set; }
    public int deliveryEmployeeKey { get; set; }
    public DateTime? InstallDate { get; set; }
    public Boolean? Confirm { get; set; }
    public string Status { get; set; }
    public int? SystemPosition { get; set; }
    public DateTime? LastDateBilled { get; set; }
    public DateTime? PreviousDateBilled { get; set; }
    public DateTime? ReturnedDate { get; set; }
    public int Account { get; set; }
    public decimal? Jan { get; set; }
    public decimal? Feb { get; set; }
    public decimal? Mar { get; set; }
    public decimal? Apr { get; set; }
    public decimal? May { get; set; }
    public decimal? June { get; set; }
    public decimal? July { get; set; }
    public decimal? Aug { get; set; }
    public decimal? Sept { get; set; }
    public decimal? Oct { get; set; }
    public decimal? Nov { get; set; }
    public decimal? Dec { get; set; }

    public virtual Section Section { get; set; }
    public virtual Vendor Vendor { get; set; }
    public virtual DeviceInformation DeviceInformation { get; set; }
    public virtual Employee Employee { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:35:25.110

好吧，你有几个选择。

第一个是重构您的模型和可能的数据库，这样您就拥有了月份值的集合，而不是 12 个月的 12 个字段。这会更容易更新，因为您可以只使用传入的月份来确定您想要的条目（如果存在），或者如果不存在则添加它。

```
 public class AssetMonth
 {
     string AssetTag { get;set;}
     DateTime Month { get;set;} // DateTime would *probably* be the best choice for this
     Decimal? MonthlyChargeRate { get;set;}
 } 
```

二是利用好老套的`switch`说法：

```
 switch(Month) // I don't know what type this is; I'm assuming string.
 {
    case "Jan":
         model.Jan = assets.MonthlyChargeRate;
         break;
    case "Feb":
         model.Feb = assets.MonthlyChargeRate;
    // etc.
} 
```

第三，如果你真的很喜欢，你可以使用反射来设置值。

```
 PropertyInfo prop = typeof(Asset).GetProperty(Month); // again, assuming string
 prop.SetValue(model, assets.MonthlyChargeRage); 
```

但我会鼓励你重构模型。这将为您提供最佳设计，并消除对选项 2 和 3 等变通方法的需求。

# ruby - 未定义的方法“to_i”：符号

> ID：14899029
> 
> 赞同：-1
> 
> 时间：2013-02-15T16:28:56.190
> 
> 标签：ruby, ruby-on-rails-3, object, symbols

RoR新手在这里，感谢任何帮助。

我有以下错误：

```
undefined method `to_i' for :funding_level:Symbol 
```

我正在尝试将**funding_level**和**investment_id**参数从link_to 传递到我的控制器中的**新**方法中。

据我了解，100 值作为符号而不是对象传递，当我尝试将其分配给整数变量**@funding_level时会导致问题。**

谢谢！

HTML：

```
<div id="investment-status">        
    <%= link_to "$100", new_project_funding_path(funding_level: 100,investment_id: @project.id), class: 'btn' %>
</div> 
```

控制器：

```
def new
  @investment = Project.find(params[:investment_id])
  @funding_offered = :funding_level
  @project_funding = current_user.project_fundings.new(investment: @investment, funding_offered: @funding_offered)
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:31:58.047

不应该是这个吗？

```
@funding_offered = params[:funding_level] 
```

# android - Android 中的导航样式

> ID：14899033
> 
> 赞同：0
> 
> 时间：2013-02-15T16:29:06.720
> 
> 标签：android, android-activity, transitions

这应该是一个非常简单的问题，我一生都无法通过谷歌或文档找到。如何更改我的活动的过渡风格？

据我所知，呈现和解除活动有增长、左/右和上/下转换，但我不知道如何实现它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:37:29.773

当你在做：

```
startActivity(intent); 
```

只是说：

```
startActivity(intent);
overridePendingTransition(animIn, animOut); 
```

animIn 和 animOut 是您可以在动画资源文件夹中定义的整数，例如：

slideInLeft.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="100%p" android:toXDelta="0%p"
    android:duration="@android:integer/config_longAnimTime" /> 
```

slideOutLeft.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0" android:toXDelta="-100%p"
    android:duration="@android:integer/config_longAnimTime" /> 
```

当你想返回第一个活动时，你需要做同样的事情，但在活动的完成方法中：

```
finish();
overridePendingTransition(animIn, animOut); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:31:44.657

您可以使用 activity.overridePendingTransition。它需要一个进入和退出动画资源ID。

# drupal - 使用 Drupal 的 user_save 发送邮件

> ID：14899035
> 
> 赞同：0
> 
> 时间：2013-02-15T16:29:15.527
> 
> 标签：drupal, drupal-7, drupal-6, drupal-modules

我有一个必须在 Drupal 数据库中插入用户的网站。我包含 Drupal 引导文件并调用该`user_save()`函数。

我传递给的参数`user_save`是：第一个是属性为'status'=1 的stdClass，第二个参数是（预期发送什么，因为插入工作得很好）。

我遇到的问题是用户没有收到确认电子邮件。我认为`user_save`应该向用户发送电子邮件，但事实并非如此。也许我在这里遗漏了一些东西，因此非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:23:24.027

第二个参数应该是一个数组：

```
 user_save($account, array('status' => 1)); 
```

您可以随时查看[http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_save/6](http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_save/6)来详细了解 user_save 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:23:27.527

只是为了确保，您已经检查了注册时发送电子邮件的设置？管理员/配置/人员/帐户

有时在蹩脚的服务器上存在电子邮件问题/某些主机限制了 php 邮件功能。这是一个简单的 php 邮件调用，如果您不确定邮件功能是否在您的服务器上运行没有问题，您可以尝试。

```
<?php
    $to = 'youremail@yourhost.com';
    $subject = 'the subject';
    $message = 'hello';
    $headers = 'From: youremail@yourhost.com' . "\r\n" . 'Reply-To: youremail@yourhost.com' . "\r\n" . 'X-Mailer: PHP/' . phpversion();
    mail($to, $subject, $message, $headers);
?> 
```

# .htaccess - htaccess 重写规则 - 允许所有形式的大写

> ID：14899036
> 
> 赞同：0
> 
> 时间：2013-02-15T16:29:17.027
> 
> 标签：.htaccess, mod-rewrite

目前在我的 .htaccess 中，我有以下内容：

```
RewriteRule ^register$ ./Secure/register.php
RewriteRule ^Register$ ./Secure/register.php 
```

显然，如果他们去 /Register 或 /register 它会重定向他们，但有没有办法让它只采用任何大写字母，例如 /ReGiStEr 并在不为每个可能的结果编写规则的情况下进行重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:23:57.240

你可以使用[`nocase|NC`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteflags)标志

```
RewriteRule ^register$ ./Secure/register.php [NC] 
```

# php - 使用 PHP 执行 Curl

> ID：14899037
> 
> 赞同：4
> 
> 时间：2013-02-15T16:29:16.710
> 
> 标签：php, curl, latex, markdown, docverter

我正在尝试使用[Docverter](http://www.docverter.com/)将 LaTeX/markdown 文件转换为 PDF，但在使用 PHP 执行 CURL[以通过其 API 访问 Docverter](http://www.docverter.com/api.html)时遇到问题。我知道我不是一个彻头彻尾的白痴 b/ci 可以[让它在这个 Docverter 示例中](https://github.com/Docverter/docverter/blob/master/doc/examples/html_to_pdf/convert.sh)适应 shell 脚本并从命令行（Mac OSX）运行。

使用 PHP 的`exec()`：

```
$url=$_SERVER["DOCUMENT_ROOT"];
$file='/markdown.md';
$output= $url.'/markdown_to_pdf.pdf';
$command="curl --form from=markdown \ 
               --form to=pdf \ 
               --form input_files[]=@".$url.$file." \
               http://c.docverter.com/convert > ".$output;
exec("$command"); 
```

这不会给出错误消息，但不起作用。某处有路径问题吗？

**更新**根据@John 的建议，这里有一个使用 PHP`curl_exec()`改编自[此处](http://davidwalsh.name/curl-post)的示例。不幸的是，这也不起作用，但至少它会给出错误消息。

```
$url = 'http://c.docverter.com/convert';
$fields_string ='';
$fields = array('from' => 'markdown',
        'to' => 'pdf',
        'input_files[]' => $_SERVER['DOCUMENT_ROOT'].'/markdown.md',
    );

    //url-ify the data for the POST
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string, '&');

    //open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL, $url);
    curl_setopt($ch,CURLOPT_POST, count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

    //execute post
    $result = curl_exec($ch);

    //close connection
    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T23:14:16.057

我解决了我自己的问题。上面的代码有两个主要问题：

1)`$fields`数组的格式不正确`input_files[]`。它需要一个`@/`mime 类型的声明（见下面的代码）

2)`curl_exec()`需要返回输出（实际新创建的文件内容），而不仅仅是`true/false`该函数的默认行为。这是通过设置 curl 选项来完成的`curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);`（参见下面的代码）。

**完整的工作示例**

```
//set POST variables
$url = 'http://c.docverter.com/convert';
$fields = array('from' => 'markdown',
    'to' => 'pdf',
    'input_files[]' => "@/".realpath('markdown.md').";type=text/x-markdown; charset=UTF-8"
    );

//open connection
$ch = curl_init();

//set options 
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-type: multipart/form-data"));
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); //needed so that the $result=curl_exec() output is the file and isn't just true/false

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);

//write to file
$fp = fopen('uploads/result.pdf', 'w');  //make sure the directory markdown.md is in and the result.pdf will go to has proper permissions
fwrite($fp, $result);
fclose($fp); 
```

# c++ - 如何减少 C++ 中数据的内存大小？

> ID：14899041
> 
> 赞同：2
> 
> 时间：2013-02-15T16:29:33.410
> 
> 标签：c++, memory

我正在研究 C++ 并使用 multimap 来存储数据。

```
 struct data
 {
      char* value1;
      char* value2;

      data(char* _value1, char* _value2)
      {
           int len1 = strlen(_value1);
           value1 = new char[len1+1];
           strcpy(value1,_value1);

           int len2 = strlen(_value2);
           value2 = new char[len2+2];
           strcpy(value2,_value2);
      }
      ~data()
      {
           delete[] value1;
           delete[] value2;
      }
 }

 struct ltstr
 {
     bool operator()(const char* s1, const char* s2) const
     {
          return strcmp(s1, s2) < 0;
     }
 };

 multimap <char*, data*, ltstr> m; 
```

样本输入：

```
 Key               Value
  ABCD123456        Data_Mining Indent Test Fast Might Must Favor List Myself Janki Jyoti Sepal Petal Catel Katlina Katrina Tesing Must Motor blah blah.
  ABCD123456        Datfassaa_Minifasfngf Indesfsant Tfdasest Fast Might Must Favor List My\\fsad\\\self Jfasfsa Katrifasdna Tesinfasfg Must Motor blah blah.
  tretD152456       fasdfa fasfsaDfasdfsafata_Mafsfining Infdsdent Tdfsest Fast Might Must Favor List Myself Janki 
```

输入中有 2700 万个条目。输入大小 = 14GB

但我注意到内存消耗达到 56 GB。我可以知道如何减少内存大小吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:38:13.800

如果您无法减少实际存储的数据量，您可能想尝试使用开销较小的不同容器（map 和 multimap 有很多），或者找到一种方法只保留部分数据记忆。

您可能想看看这些库：

*   STXXL：[http ://stxxl.sourceforge.net/](http://stxxl.sourceforge.net/)

*   谷歌 CPP-Btree：[https ://code.google.com/p/cpp-btree/](https://code.google.com/p/cpp-btree/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T17:02:13.717

一种可能性是使用 a`std::map<char *, std::vector<data> >`而不是 multimap。在多重映射中，您将密钥字符串存储在每个条目中。使用地图，您将只有一个密钥字符串的副本，并附有多个`data`项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T16:47:15.960

第一个优化是存储`data`对象而不是指针

```
std::multimap <char*, data, ltstr> m; 
```

因为 using`data*`为分配增加了额外的内存开销。

另一种是使用[池分配器/内存池](http://en.wikipedia.org/wiki/Memory_pool)来减少动态内存分配的占用空间。

如果您有许多相同的密钥字符串，您也可以改进它，如果您可以重复使用这些密钥。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T07:46:33.323

我仍然不完全确定这里发生了什么，但似乎内存开销至少是问题的一部分。但是，总体内存消耗大约是结构所需的 4 倍`data`。如果有 27M 条记录占用 14GB，则每条记录大约有 500 字节，但占用的空间为 56GB。对我来说，这表明存储的数据比我们这里显示的要多，或者至少有一些数据被存储了不止一次。

而且“堆存储的额外数据”并没有真正为我做。在 linux 中，内存分配至少需要大约 32 个字节的数据。16 字节的开销，而自己分配的内存占用了 16 字节的倍数。

因此，对于`data *`存储在 multimap 中的一条记录，我们需要：

```
 16 bytes of header for the memory allocation
 8 bytes for pointer of `value1`
 8 bytes for pointer of `value2`
 16 bytes of header for the string in value1
 16 bytes of header for the string in value2
 8 bytes (on average) "size rounding" for string in value 1
 8 bytes (on average) "size rounding" for string in value 2

 ?? bytes from the file. (X)

 80 + X bytes total. 
```

然后我们`char *`在多图中：

```
 16 bytes of header for the memory allocation. 
 8 bytes of rounding on average. 

 ?? bytes from the file. (Y)

 24 + Y bytes total. 
```

多重映射的每个节点都有两个指针（我假设它是某种二叉树）：

```
 16 bytes of header for the memory allocation of the node. 
 8 bytes of pointer to "left"
 8 bytes of pointer to "right"

 32 bytes total. 
```

因此，这使得文件中的每个条目产生 136 个字节的“开销”。对于 2700 万条记录，也就是刚刚超过 4GB。

正如我所说，该文件每个条目包含 500 个字节，因此为 14GB。

总共有 18GB。

所以，在某个地方，有些东西要么泄漏，要么数学错误。我在这里的计算可能不正确，但即使上面的所有内容都占用了我计算出的两倍空间，仍然有 20GB 下落不明。

我们当然可以做一些事情来节省内存：

1）不要在`data`. 先计算两个长度，分配一块内存，然后紧接着存储字符串：

```
 data(char* _value1, char* _value2)
  {
       int len1 = strlen(_value1);
       int len2 = strlen(_value2);
       value1 = new char[len1 + len2 +2];
       strcpy(value1,_value1);

       value2 = value1 + len1 + 1; 
       strcpy(value2,_value2);
  } 
```

这将平均为每个条目节省 24 个字节。我们可以通过巧妙地一次性为数据、value1 和 value2 分配内存来节省更多。但这可能有点“太聪明了”。

2) 分配一大块`data`物品，一次分发一个，也会有所帮助。为此，我们需要一个空的构造函数和一个“setvalues”方法：

```
struct data
{
    ...
    data() {};
    ... 
    set_values(char* _value1, char* _value2)
    {
         int len1 = strlen(_value1);
         int len2 = strlen(_value2);
         value1 = new char[len1 + len2 +2];
         strcpy(value1,_value1);

         value2 = value1 + len1 + 1; 
         strcpy(value2,_value2);
    }
}

std::string v1[100], v2[100], key[100];

for(i = 0; i < 100; i++)
{
    if (!read_line_from_file(key[i], v1[i], v2[i]))
    {
        break;
    }
}    

data* data_block = new data[i]; 

for(j = 0; j < i; j++)
{
    data_block[j].setValues[v1[j].c_str(), v2[j].c_str());
    m.insert(key[i].c_str(), &data_block[j]);
} 
```

同样，这不会节省大量内存，但每个 16 字节区域可以节省一些内存。以上当然不是完整的代码，更多的是“如何完成的说明”。

3）我仍然不确定多重映射中的“键”来自哪里，但是如果键是 value1 和 value2 条目之一，那么您可以重用其中一个，而不是存储另一个副本[假设是这样目前完成]。

如果这不是一个真实的答案，我很抱歉，但我确实相信这是一个答案，即“在某个地方，在你对你正在做的事情的解释中，有些东西是下落不明的”。

了解您的程序中进行了哪些分配肯定会有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T17:30:49.430

在没有看到一些数据的情况下，有几件事可以提高项目的内存使用率。

首先，正如 Olaf 建议的那样，将数据对象存储在 multimap 中，而不是指向它的指针。不过，我不建议为您的数据结构使用池，与直接将其存储在地图中相比，它只会使事情复杂化而不会节省内存。

不过，您可以做的是为您的地图分配`std::pair<char*, data>`对象的专用分配器。这可以节省一些开销和堆碎片。

接下来，您应该关注的主要事情是尝试摆脱`char*`数据中的两个指针。有 14 个演出的数据，必须有一些重叠。根据它是什么数据，您可以以不同的方式存储它。

例如，如果数据是名称或关键字，那么将它们存储在中央哈希中是有意义的。是的，有更复杂的解决方案，如上面建议的 DAWG，但我认为应该首先尝试简单的解决方案。

通过简单地将其存储在 a 中`std::set<std::string>`并将迭代器存储到其中，您可以压缩所有重复项，从而节省大量数据。这假设您不删除字符串。删除字符串需要你做一些引用计数，所以你会使用类似`std::map<std::string, unsinged long>`. 我建议您编写一个继承自 / 包含此哈希的类，而不是将引用计数逻辑放入您的数据类中。

但是，如果您存储的数据没有太多重叠，例如因为它是二进制数据，那么我建议您将其存储在 a `std::string`or中`std::vector<char>`。原因是因为现在您可以摆脱数据结构中的逻辑，甚至可以将其替换为`std::pair`.

我还假设您的密钥不是您存储在数据结构中的指针之一。如果是，请务必摆脱它并在您的多图中使用 的`first`属性`std::pair`。

根据您存储的数据类型，可能会进一步改进。

因此，如果有很多可能不适用于您的数据的假设，您可能只有这样：

```
typedef std::set<std:string> StringMap;
typedef StringMap::const_iterator StringRef;
typedef std::multimap<StringRef, std::pair<StringRef, StringRef>> DataMap; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-15T17:31:00.457

我怀疑您正在泄漏或不必要地复制密钥中的内存。关键`char *`字符串从何而来，你如何管理它们的记忆？

如果它们与数据对象中的字符串相同，请考虑使用 a`multiset<data *, ltdata>`而不是 a `multimap`。

如果有很多重复字符串，请考虑在 a 中合并字符串`set<char *,ltstr>`以消除重复。

# actionscript-3 - 如何从 flex 运行 MovieClip（谁是外部 swf）功能

> ID：14899042
> 
> 赞同：0
> 
> 时间：2013-02-15T16:29:33.897
> 
> 标签：actionscript-3, apache-flex, flash, movieclip

我尝试从 flex 调用 swf 函数（ setPoints(nr:int):void; ）。

```
[Embed(source="img/anim/x2.swf")]
[Bindable]
public static var points:Class;

public function strikeAnimation(area:SpriteVisualElement, strike:int):void{
  var mc:MovieClip  =  new points() as MovieClip;
  area.addChild(mc);
  //how to run?
  area.mc.setpoints(strike);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:49:54.840

> 我试过这样的调用函数 - area.getChildIndex(area.getChildIndex(mc)).setpoints(strike);

您收到上述代码行错误的原因是[getChildIndex](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getChildIndex%28%29)需要一个 DisplayObject 并返回一个 Integer。

所以，这可能有效：

```
area.getChildIndex(mc) 
```

但是，它返回了一个整数，您不能将其用作另一个 getChildIndex 调用的输入，因为整数与孩子不同。

这样的事情应该给你一个你孩子的实例：

```
var myChild :MovieClip = area.getChildAt(area.getChildIndex(mc)) 
```

然而， setpoints 方法不是一个[movieclip](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html)的文档化方法；因此，要在您的自定义影片剪辑上执行 setpoints 方法，您必须将其转换为您的自定义类型。概念上是这样的：

```
(myChild as myCustomType).setpoints(strike); 
```

# c# - 如何在 C# 中使用 PGP Hex ID 和 PGP 名称而不是公钥文件来加密文件

> ID：14899047
> 
> 赞同：1
> 
> 时间：2013-02-15T16:29:40.947
> 
> 标签：c#, bouncycastle, pgp

我目前正在开发一个应用程序，该应用程序将创建一个文本文件，使用 PGP 公钥（不是文件，而是十六进制数字和 pgp 名称）加密文件，并按计划将其发布到 FTP。我发布信息的人需要对文件进行 PGP 加密并共享公钥（不是文件，而是十六进制数字和 pgp 名称）。

我卡住的地方是PGP加密部分。我看到了有关如何使用 bouncy castle 库使用公钥文件或公钥环（我理解为一组密钥）加密文本文件的示例。但我拥有的信息是一个 32 位十六进制密钥和一个 PGP 名称。我不确定如何使用这些信息来加密文件。我应该要求对方给我发送公钥文件吗？是否可以根据我拥有的信息创建公钥文件？我对 PGP 加密非常陌生，并且在经过大量谷歌搜索后发布了这个，但没有提供任何信息，所以请帮忙。

这是我迄今为止加密文件的代码。如您所见，代码将文件作为公钥的输入，而不是十六进制代码和名称。我的问题真的是，是否甚至可以使用 pgp 名称和十六进制数字进行 pgp 加密？

```
public class PGPHelper
{
    private PgpEncryptionKeys m_encryptionKeys;
    private const int BufferSize = 0x10000;
    /// <summary>
    /// Instantiate a new PgpEncrypt class with initialized PgpEncryptionKeys.
    /// </summary>
    /// <param name="encryptionKeys"></param>
    /// <exception cref="ArgumentNullException">encryptionKeys is null</exception>
    public PGPHelper(PgpEncryptionKeys encryptionKeys)
    {
        if (encryptionKeys == null)
        {
            throw new ArgumentNullException("encryptionKeys", "encryptionKeys is null.");
        }
        m_encryptionKeys = encryptionKeys;
    }
    /// <summary>
    /// Encrypt and sign the file pointed to by unencryptedFileInfo and
    /// write the encrypted content to outputStream.
    /// </summary>
    /// <param name="outputStream">The stream that will contain the
    /// encrypted data when this method returns.</param>
    /// <param name="fileName">FileInfo of the file to encrypt</param>
    public void Encrypt(Stream outputStream, FileInfo unencryptedFileInfo)
    {
        if (outputStream == null)
        {
            throw new ArgumentNullException("outputStream", "outputStream is null.");
        }
        if (unencryptedFileInfo == null)
        {
            throw new ArgumentNullException("unencryptedFileInfo", "unencryptedFileInfo is null.");
        }
        if (!File.Exists(unencryptedFileInfo.FullName))
        {
            throw new ArgumentException("File to encrypt not found.");
        }
        using (Stream encryptedOut = ChainEncryptedOut(outputStream))
        {
            using (Stream literalOut = ChainLiteralOut(encryptedOut, unencryptedFileInfo))
            using (FileStream inputFile = unencryptedFileInfo.OpenRead())
            {
                WriteOutput(literalOut, inputFile);
            }
        }
    }

    private static void WriteOutput(Stream literalOut,
        FileStream inputFile)
    {
        int length = 0;
        byte[] buf = new byte[BufferSize];
        while ((length = inputFile.Read(buf, 0, buf.Length)) > 0)
        {
            literalOut.Write(buf, 0, length);
        }
    }

    private Stream ChainEncryptedOut(Stream outputStream)
    {
        PgpEncryptedDataGenerator encryptedDataGenerator;
        encryptedDataGenerator =
            new PgpEncryptedDataGenerator(SymmetricKeyAlgorithmTag.TripleDes, new SecureRandom());
        encryptedDataGenerator.AddMethod(m_encryptionKeys.PublicKey);
        return encryptedDataGenerator.Open(outputStream, new byte[BufferSize]);
    }

    private static Stream ChainLiteralOut(Stream encryptedOut, FileInfo file)
    {
        PgpLiteralDataGenerator pgpLiteralDataGenerator = new PgpLiteralDataGenerator();
        return pgpLiteralDataGenerator.Open(encryptedOut, PgpLiteralData.Binary, file);
    }

}

public class PgpEncryptionKeys
{

    public PgpPublicKey PublicKey { get; private set; }

    /// <summary>
    /// Initializes a new instance of the EncryptionKeys class.
    /// Two keys are required to encrypt and sign data. Your private key and the recipients public key.
    /// The data is encrypted with the recipients public key and signed with your private key.
    /// </summary>
    /// <param name="publicKeyPath">The key used to encrypt the data</param>
    /// <exception cref="ArgumentException">Public key not found. Private key not found. Missing password</exception>
    public PgpEncryptionKeys(string publicKeyPath, string privateKeyPath, string passPhrase)
    {
        if (!File.Exists(publicKeyPath))
        {
            throw new ArgumentException("Public key file not found", "publicKeyPath");
        }
        PublicKey = ReadPublicKey(publicKeyPath);
    }

    #region Public Key

    private PgpPublicKey ReadPublicKey(string publicKeyPath)
    {
        using (Stream keyIn = File.OpenRead(publicKeyPath))
        using (Stream inputStream = PgpUtilities.GetDecoderStream(keyIn))
        {
            PgpPublicKeyRingBundle publicKeyRingBundle = new PgpPublicKeyRingBundle(inputStream);
            PgpPublicKey foundKey = GetFirstPublicKey(publicKeyRingBundle);
            if (foundKey != null)
            {
                return foundKey;
            }
        }
        throw new ArgumentException("No encryption key found in public key ring.");
    }

    private PgpPublicKey GetFirstPublicKey(PgpPublicKeyRingBundle publicKeyRingBundle)
    {
        foreach (PgpPublicKeyRing kRing in publicKeyRingBundle.GetKeyRings())
        {
            PgpPublicKey key = kRing.GetPublicKeys()
                .Cast<PgpPublicKey>()
                .Where(k => k.IsEncryptionKey)
                .FirstOrDefault();

            if (key != null)
            {
                return key;
            }
        }
        return null;
    }

    #endregion 
```

# linux - 在 Linux 中删除文件名的 10 个字符

> ID：14899048
> 
> 赞同：2
> 
> 时间：2013-02-15T16:29:46.687
> 
> 标签：linux, shell, ubuntu, file-rename, batch-rename

我刚刚从我的服务器下载了大约 600 个文件，需要从文件名中删除最后 11 个字符（不包括扩展名）。我使用 Ubuntu，我正在寻找一个命令来实现这一点。

一些例子如下：

`aarondyne_kh2_13thstruggle_or_1250556383.mus`应该改名为`aarondyne_kh2_13thstruggle_or.mus`

`aarondyne_kh2_darknessofunknow_1250556659.mp3`应该改名为`aarondyne_kh2_darknessofunknow.mp3`

执行此操作后似乎可能存在一些重复项，但如果命令无法完成并告诉我重复项是什么，我总是可以手动删除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:36:08.820

尝试使用`rename`命令。它允许您根据正则表达式重命名文件：

以下行应该适合您：

```
rename 's/_\d+(\.[a-z0-9A-Z]+)$/$1/' * 
```

将发生以下变化：

```
aarondyne_kh2_13thstruggle_or_1250556383.mus renamed as aarondyne_kh2_13thstruggle_or.mus
aarondyne_kh2_darknessofunknow_1250556659.mp3 renamed as aarondyne_kh2_darknessofunknow.mp3 
```

您可以`rename`通过指定`-n`标志来检查将执行的操作，如下所示：

```
rename -n 's/_\d+(\.[a-z0-9A-Z]+)$/$1/' * 
```

有关如何使用的更多信息，`rename`只需通过以下方式打开手册页：`man rename`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:35:45.357

不是最漂亮的，但非常简单：

```
echo "$filename" | sed -e 's!\(.*\)...........\(\.[^.]*\)!\1\2!' 
```

您仍然需要编写脚本的其余部分，但这很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:40:03.233

```
find . -type f -exec sh -c 'mv {} `echo -n {} | sed  -E -e "s/[^/]{10}(\\.[^\\.]+)?$/\\1/"`' ";" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:39:11.630

一种方法：

你得到你的文件列表，每行一个（`ls`可能）然后：

```
ls....|awk  '{o=$0;sub(/_[^_.]*\./,".",$0);print "mv "o" "$0}' 
```

这将打印`mv a b`命令

例如

```
kent$  echo "aarondyne_kh2_13thstruggle_or_1250556383.mus"|awk  '{o=$0;sub(/_[^_.]*\./,".",$0);print "mv "o" "$0}'
mv aarondyne_kh2_13thstruggle_or_1250556383.mus aarondyne_kh2_13thstruggle_or.mus 
```

要执行，只需将其传送到`|sh`

我假设您的文件名中没有空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T16:41:07.680

该脚本假定每个文件只有一个扩展名。例如，它将“foo.something.mus”重命名为“foo.mus”。要保留所有扩展，请从循环主体的第一行删除一个井号 (#)。它还假设每个文件名的基数至少有 12 个字符，因此删除 11 不会给您留下一个空名称。

```
for f in *; do
    ext=${f##*.}
    new_f=${base%???????????.$ext}
    if [ -f "$new_f" ]; then
        echo "Will not rename $f, $new_f already exists" >&2
    else
        mv "$f" "$new_f"
    fi
done 
```

# android - 使用 AbstractModule 进行 Proguard

> ID：14899050
> 
> 赞同：1
> 
> 时间：2013-02-15T16:29:52.157
> 
> 标签：android, maven, module, proguard

当我的 android 应用程序启动时引发以下异常；

```
can't instantiate class com.project.modules.ClientServicesModule; no empty constructor 
```

我的模块类如下所示；

```
public class ClientServicesModule
    extends AbstractModule
{

    private Context context;

    public ClientServicesModule(Context context)
    {
        this.context = context;
    }

    @Override
    protected void configure(){

       ....

      bind(new TypeLiteral<Dao<City, Integer>>()
        {
        }).toProvider(new DaoProvider<City, Integer>(OpenHelperManager.getHelper(context, DatabaseHelper.class).getConnectionSource(), City.class))
            .in(Singleton.class);

       ...
       }
} 
```

我的 Proguard 文件：

```
-target 1.6

-verbose
-dump ../bin/class_files.txt
-printseeds ../bin/seeds.txt
-printusage ../bin/unused.txt
-printmapping ../bin/mapping.txt

-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
-ignorewarnings
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable,*Annotation*,Signature

-dontwarn org.apache.**
-dontwarn org.joda.**
-dontwarn roboguice.**
-dontwarn com.google.**
-dontwarn org.slf4j.**
-dontwarn twitter.**
-dontnote
-dontwarn **CompatHoneycomb

# roboguice's jar has testing classes in it which don't resolve because the Android testing classes aren't available for non-testing
-dontwarn roboguice.test.RoboActivityUnitTestCase
-dontwarn roboguice.test.RoboUnitTestCase

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.app.Fragment
-keep public class * extends android.support.v4.app.Fragment
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends com.google.inject.AbstractModule
-keep public class com.android.vending.licensing.ILicensingService
-keep class com.google.inject.** { *; }
-keep class javax.inject.** { *; }
-keep class javax.annotation.** { *; }
-keep class roboguice.** { *; }

-keepclasseswithmembers class * { native <methods>; }
-keepclasseswithmembers class * {  
    public <init> (android.content.Context, android.util.AttributeSet); 
}
-keepclasseswithmembers class * { 
    public <init> (android.content.Context, android.util.AttributeSet, int); 
}
-keepclassmembers class * implements android.os.Parcelable { static android.os.Parcelable$Creator *; }
-keepclassmembers class **.R$* { public static <fields>; }
-keepclasseswithmembernames class * { native <methods>; }
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}
-keepclassmembers class * extends android.app.Activity { 
    public void *(android.view.View); 
}
-keepclassmembers class * { 
    @com.google.inject.Inject <init>(...);
    @com.google.inject.Inject <fields>;
    @javax.annotation.Nullable <fields>;
}
-keepclassmembers class * {
    void *(net.eworldui.videouploader.events.*);
}
-keepclassmembers class * {
    void *(roboguice.activity.event.*);
} 
```

如果我添加一个空的构造函数，我的 ProGuard 配置可以工作，但是 dao 不会加载，因为 null 被传递到数据库帮助程序中。

如果我从 pom.xml 中删除 ProGuard 步骤，一切都会按预期工作。

问题是如何启用 proguard 以便模块类可以在传入的上下文中启动。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:34:04.633

尝试将以下行添加到您的 Proguard.config：

```
-keep public class * extends com.project.modules.ClientServicesModule { 
    <fields>;
    <methods>;
 } 
```

看看错误是否仍然存在

编辑：

您可以通过定义来保留整个命名空间：

```
-keep class com.project.modules.** {*;} 
```

如果可行，您可以尝试排除之后不需要的其他人。也看看我的第一次编辑

# parsing - 构建助手插件不解析项目版本

> ID：14899057
> 
> 赞同：1
> 
> 时间：2013-02-15T16:30:31.080
> 
> 标签：parsing, maven, build, version, helper

我有一个项目，我需要在构建清单文件时分解版本号并访问它的组件。在做了一些搜索之后，我找到了 build-helper-maven-plugin 并认为我的问题已经解决了。我将插件添加到主 POM，如下所示。

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <phase>validate</phase>
        <id>parse-version</id>
        <goals>
          <goal>parse-version</goal>
        </goals>
        <configuration>
            <propertyPrefix>parsedVersion</propertyPrefix>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

此时的项目版本是 3.0.0-SNAPSHOT。我想查看所有部分（尽管在最终版本中我可能不会全部使用它们）所以我将这些行添加到我的清单文件中。

```
<value name="majorVersion">${parsedVersion.majorVersion}</value>

<value name="minorVersion">{$parsedVersion.minorVersion}</value>

<value name="incrementalVersion">${parsedVersion.incrementalVersion}</value>

<value name="versionQualifier">${parsedVersion.qualifier}</value>

<value name="parsedBuildNumber">${parsedVersion.buildNumber}</value> 
```

建成后我得到了这个。

```
<value name="majorVersion">0</value>

<value name="minorVersion">{$parsedVersion.minorVersion}</value>

<value name="incrementalVersion">0</value>

<value name="versionQualifier">3.00.0-SNAPSHOT</value>

<value name="parsedBuildNumber">0</value> 
```

值标签实际上是一个 XML 标签，并且清单文件中有一个结束值标签，我不得不删除它们，因为它们弄乱了显示。

所以增量版本似乎是正确的，虽然我不是那么有信心，因为主要版本不正确，它没有找到次要版本，并且限定符作为整个版本号返回，而不仅仅是 SNAPSHOT 片段我曾预料到。我可以看到内部版本号为零的位置是正确的，因为我们没有 Maven 认为的内部版本号。

关于为什么版本号似乎没有被解析的任何想法？我是否错误地实现了这个插件？

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T16:44:24.270

更改`{$parsedVersion.minorVersion}`为`${parsedVersion.minorVersion}`

* * *

你什么时候检查属性值？确保您在`validate`示例中的阶段之后执行此操作，或者如果您希望它在同一阶段进行，请确保在`build-helper-maven-plugin`您用于检查属性值的插件之前发生。如果我有这个：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <tasks>
                            <echo>Major: ${parsedVersion.majorVersion}</echo>
                            <echo>Minor: ${parsedVersion.minorVersion}</echo>
                            <echo>Incremental: ${parsedVersion.incrementalVersion}</echo>
                            <echo>Qualifier: ${parsedVersion.qualifier}</echo>
                            <echo>BuildNumber: ${parsedVersion.buildNumber}</echo>
                        </tasks>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

之后`build-helper-maven-plugin`，我在输出中看到了这个`mvn validate`：

```
[INFO] --- build-helper-maven-plugin:1.7:parse-version (parse-version) @ so-example ---
[INFO] 
[INFO] --- maven-antrun-plugin:1.1:run (default) @ so-example ---
[INFO] Executing tasks
     [echo] Major: 1
     [echo] Minor: 0
     [echo] Incremental: 0
     [echo] Qualifier: SNAPSHOT
     [echo] BuildNumber: 0

anew@buddha:~/dev/so-example$ grep "<version>" pom.xml | head -1
    <version>1.0.0-SNAPSHOT</version> 
```

# asp.net - 如何从 asp.net 中的代码将原始 html 写入浏览器

> ID：14899059
> 
> 赞同：0
> 
> 时间：2013-02-15T16:30:32.800
> 
> 标签：asp.net, .net, visual-studio-2010, code-behind

我想向浏览器写一个原始的 html 页面。我认为这可以做到这一点，但是这会写入当前页面：

```
Dim html as New StringBuilder
html.append("<html><body>A new html page</body></html>"
Response.Clear()
Response.Output.Write(html.ToString) 
```

我知道这可以做到 我只是不记得怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:34:27.677

你必须得到上下文对象，然后你可以使用这样的东西：

```
context.Response.Clear();

//Response.Charset = "UTF-8";
context.Response.ContentType = "text/html"

context.Response.AddHeader("Content-Length", length);

context.Response.OutputStream.Write((byte[])buffer, 0, filesize); 
```

# php - 从另一个类访问一个类

> ID：14899064
> 
> 赞同：1
> 
> 时间：2013-02-15T16:30:43.177
> 
> 标签：php, oop, class

我有一个想法，需要在另一个类中加载。假设我有包含一次的 index.php（database.php）。在一个类中，创建一个未被该类扩展的新对象**是否可以接受？**换句话说，改为在全球范围内引入内容？这就是我的意思...

```
index.php:
----------------------
include_once ('./core/dataAccess.php');

....

class home {
    private function getUsers() {
        $dataAccess = new DataAccess();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:05:39.417

这是可接受且广泛使用的做法，但在大多数情况下它不是*最佳*解决方案。高级方法是使用*依赖注入*，这意味着您的类所需的任何其他对象都将从外部“注入”，使它们可以互换。这可能发生在构造函数中、setter 方法中或直接作为需要它们的参数。

唯一使用`new`关键字的方法是工厂方法，除了创建对象之外什么都不做。

# ruby-on-rails-3 - 在 Rails 3 堆栈中，基于 cookie_store 的会话在哪里得到验证？

> ID：14899066
> 
> 赞同：0
> 
> 时间：2013-02-15T16:30:51.543
> 
> 标签：ruby-on-rails-3

假设一个正在使用`:cookie_store`，rails 会话在客户端存储在 cookie 中的签名（但未加密）字符串中。

[相关文档](http://guides.rubyonrails.org/security.html#sessions)暗示每个请求都在服务器上验证此签名，但我无法追踪实际发生的位置。在 Rails 堆栈中的哪个位置验证了会话哈希？有什么我需要打开或检查的吗？

这与 不同 `protect_from_forgery`，据我了解，它用于保护非 GET 请求（例如表单提交），对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:53:55.347

它是 actionpack gem 的一部分。文件 action_dispatch/middleware/cookies.rb，第 291 行

# php - 写入 csv 文件

> ID：14899073
> 
> 赞同：1
> 
> 时间：2013-02-15T16:31:22.700
> 
> 标签：php, fputcsv

getHistory 从 Yahoo Finance API 下载 CSV 文件，我正在尝试获取 CSV 文件，并在文件中每个条目的前面插入符号。完成后，我想将 CSV 文件写回 $symbol.csv。我的数据是我想要的方式，我似乎无法将其写入 CSV 文件。我究竟做错了什么？还是有更好的方法来解决这个问题？

```
$row = 1;
if (($handle = fopen(getHistory("T","2010-06-1"), "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        if($row = 1){array_unshift($data,"Symbol"); }
        else  { array_unshift($data, "T"); }
        $fp = fopen('t.csv', 'w');
        fputcsv($fp, $data);
        fclose($fp);
        $row++;
    }
}
fclose($handle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:42:54.050

*在您的循环中，您将在每次*迭代时打开和关闭文件。您应该在循环之前打开 csv 文件，添加到其中，然后在循环完成后关闭它。

此外，您应该使用`===`or`==`进行比较。

```
$row = 1;
if (($handle = fopen(getHistory("T","2010-06-1"), "r")) !== FALSE) {
    // This truncates the file to zero length
    // so, we only need to do this once, before the loop
    $fp = fopen('t.csv', 'w');
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        if($row === 1){array_unshift($data,"Symbol"); }
        else  { array_unshift($data, "T"); }
        fputcsv($fp, $data);
        $row++;
    }
    // Close it once we're all done
    fclose($fp);
}
fclose($handle); 
```

# perl - Perl Net::Telnet 在大型命令输出上超时

> ID：14899077
> 
> 赞同：4
> 
> 时间：2013-02-15T16:31:27.750
> 
> 标签：perl, telnet, perl-module

我正在编写一个使用的程序`Net::Telnet`，但是当我尝试`$tel->cmd`在第 41 行使用时，出现错误。

> CoyoteBridge4000.pl 第 41 行命令超时

该命令有效，但输出很大，这就是我认为发生超时的原因。我能做些什么来解决这个问题？由于我尝试更改超时并没有解决问题。

```
#!/usr/bin/perl
use Net::Telnet ();
$tel = new Net::Telnet();

print "\nFile Name\n\n";
my $name = <>;
chomp $name;

my @equipament;
my $i        = 0;
my $username = "admin";
my $passwd   = "zhone";
my $certo    = 0;
$co = "bridge show vlan 4000";

open(arquivo, "ip.txt");
my $i = 0;
while (<arquivo>) {
  $equipament[$i] = $_;
  chomp $equipament[$i];
  $i++;
}
close(arquivo);

open(resp, ">$name.csv");
foreach (@equipament) {
  eval { $tel->open($_); };
  if ($@) {
    chomp $_;
    print resp "$_, UNREACHABLE\n";
  }
  else {
    open(re, ">temp.txt");
    $tel->login($username, $passwd);
    ###ERROR###
    @lines = $tel->cmd(String => "$co", Timeout => 600);
    #####ERROR#####
    print re @lines;
    close(re);
    open(re, "temp.txt");
    $encontrar = ":";
    while (<re>) {
      if ($_ =~ /$encontrar/) {
        chomp $_;
        print resp $_;
      }
    }
    close(re);
  }
}
close(resp);

print "\n\n DONE \n\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T18:27:38.833

Have you tried using the timeout option in your constructor?

From the POD:

`Net::Telnet->new(-timeout => 20);`

The value is in seconds. I suspect that you might just be having the command time out waiting for a response from that command. The default timeout is 10 seconds.

# java - Java中的第一次序列化尝试很慢？

> ID：14899079
> 
> 赞同：2
> 
> 时间：2013-02-15T16:31:35.437
> 
> 标签：java, serialization, io

考虑一个使用“ObjectOutputStream”序列化给定数量对象的简单程序（在下面发布）。它多次调用相同的函数将对象序列化为文件。第一次调用比后续调用花费更长的时间（差异取决于被序列化的对象数量）：

```
Serializing 10000 objects...
Time elapsed: 498ms
Time elapsed: 168ms
Time elapsed: 186ms

Serializing 100000 objects...
Time elapsed: 1815ms
Time elapsed: 1352ms
Time elapsed: 1338ms

Serializing 500000 objects...
Time elapsed: 8341ms
Time elapsed: 7247ms
Time elapsed: 7051ms 
```

造成这种差异的原因是什么？我试图在没有序列化的情况下做同样的事情，即写一个字节数组，并没有这样的区别。

**更新：**如果程序没有多次调用相同的方法而是在for循环中序列化对象然后调用该方法，则会发生同样的事情：后续方法调用更快：

```
"manual" serialization, time elapsed: 535
Time elapsed: 170ms
Time elapsed: 193ms
Time elapsed: 139ms 
```

所以 JIT 编译不会导致这种差异。

代码：

```
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

public class SerializationTest {
    static final int COUNT = 10000, TRIES = 3;

    static class Simple implements Serializable {

        String name;
        int index;

        Simple(String name, int index) {
            this.name = name;
            this.index = index;
        }
    }

    public static void main(String[] args) throws IOException {
        int count = COUNT;
        if (args.length > 0) {
            count = Integer.parseInt(args[0]);
        }
        List<Simple> objects = new ArrayList<Simple>();
        for (int i = 0; i < count; i++) {
            objects.add(new Simple("simple" + i, i));
        }
        String filename = args.length > 1 ? args[1] : "objects";

        System.err.println("Serializing " + count + " objects...");
        for(int i = 0; i < TRIES; i++) {
            System.err.println("Time elapsed: " + 
                               serializeOneByOne(objects, filename + i + ".bin", false) + "ms");
        }
    }

    static long serializeOneByOne(List<?> objects, String filename, boolean buffered)
                                                                    throws IOException {
        OutputStream underlying = new FileOutputStream(filename);
        if (buffered) {
            underlying = new BufferedOutputStream(underlying);
        }
        ObjectOutputStream output = new ObjectOutputStream(underlying);
        // take started after the output stream is open
        // although it does not make a big difference
        long started = System.currentTimeMillis();

        try {
            for (Object s : objects) {
                output.writeObject(s);
            }
        } finally {
            output.close();
        }
        long ended = System.currentTimeMillis();
        return ended - started;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:07:18.310

完整的答案是：

1.  ObjectOutputStream 对正在序列化的几种类型的对象有一些内部静态缓存（请参阅[ObjectStreamClass](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectStreamClass.html)），因此相同类型对象的后续序列化比第一个更快。

2.  `ObjectOutputStream.writeObject`如果考虑编译（而不是另一个答案中提到的用户定义的方法），JIT 编译可能会影响性能。感谢所有在回答中提到 JIT 编译的人。

这些也解释了为什么在写入字节数组而不是序列化对象时没有区别：a）没有静态缓存和 b）`FileOutputStream.write(byte [])`调用本机`writeBytes`并且几乎没有 JIT 编译发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:42:14.670

在 Java 中，JIT（即时编译器）在它经常调用的方法（有些人建议调用它 10.000 次）时进行编译。

但是众所周知，java 序列化很慢并且使用大量内存。
当您使用 DataOutputStream 序列化自己时，您可以做得更好。

如果用于快速演示项目，Java 内置序列化，开箱即用，没有错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:43:17.833

JVM`call count`为程序中的每个方法维护一个。每次在程序中调用相同的方法时，它都会`call count`增加。其一`call count`到`JIT compilation threshold`，此法`compiled`即为`JIT`。下次调用这个方法时，它的执行速度会更快，因为现在解释器不是解释方法，而是执行本机代码。因此，相同方法的第一次调用比后续调用花费更多时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:39:34.923

第一次运行它时会产生很多成本，JIT 编译、类加载、反射等。这是正常的，而且大多数时候不需要担心，因为对生产应用程序的影响可以忽略不计。

# javascript - 如何使用 jQuery 更改域地址变量？

> ID：14899080
> 
> 赞同：0
> 
> 时间：2013-02-15T16:31:35.237
> 
> 标签：javascript, jquery, variables, redirect

我需要能够更改域变量（如果尚未设置，则设置它）然后重新加载页面。我不在乎页面是否没有重新加载，事实上我需要它来重新加载。

例如，如果用户在页面上：sample.com/demo?theme=theme1 并且他们从下拉列表中选择了一个新主题我想更改主题变量以将浏览器导航到具有新域变量的同一页面，所以在本案例 sample.com/demo?theme=newtheme。

我不能只做一个标准的重定向，因为我不希望他们只是去主页我希望他们留在当前页面上只是改变了变量。例如，如果他们在这里：`sample.com/demo/aboutus?theme=theme1`那么他们将被发送到这里：`sample.com/demo/aboutus?theme=newtheme`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:33:26.983

一个简单的正则表达式可以：

```
window.location = window.location.url.replace(/(\?|&)theme=[^&]+/, '$1theme=newtheme'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T16:36:48.877

只需使您的锚标签相对：

```
<a href="?theme=theme1">Theme 1</a>
<a href="?theme=theme2">Theme 2</a>
<a href="?theme=theme3">Theme 3</a> 
```

唯一的缺点是当前的查询字符串将被新的查询字符串完全替换，如果这甚至是一个问题的话。

这当然也可以用 javascript 来完成：

```
window.location = "?theme=theme1";
//window.location = "?theme=theme2";
//window.location = "?theme=theme3"; 
```

# php - 从数组中提取我想要的东西？

> ID：14899083
> 
> 赞同：-1
> 
> 时间：2013-02-15T16:31:48.893
> 
> 标签：php, yaml

我有一个需要解析为数组的 yaml 文件，然后我完成了。现在这个数组很大。我只想要几个值...

X1，Y1，X2，Y2，所有者，这就是我想要的。如果我能让它们很好地吐出成阵列，那对我来说就意味着世界。（所有者必须是与那些 X1、y1、x2、y2 值相关的所有者......

（它们都是相互关联的）数组中有很多x1，y1，但它们都在标题下......等等我不知道如何得到它们......

这是数组吐出的内容...（由于文件大小限制而缩短） [http://pastebin.com/PyH18mZv](http://pastebin.com/PyH18mZv)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:08:07.540

要解析 YAML，您可以使用各种可用的 PHP 解析器。我使用[Online YAML Parser](http://yaml-online-parser.appspot.com/)解析了您的 YAML，并以 JSON 格式输出字符串。最后，可以通过解码 JSON 来访问所需的数组值。

*请注意，我将字符串剪短只是为了举例*

```
$arr='{
"Residences": {
"WorkArea": {"BlackList": {"Type": "BLACKLIST", "ItemList": []}, 
  "EnterMessage": "Welcome %player to %residence, owned by %owner.", 
  "Areas": {
    "main": {
      "Y1": 217, 
      "X1": -6301, 
      "X2": -6306, 
      "Y2": 205, 
      "Z1": 3001, 
      "Z2": 2981
    }
  }, 
  "Permissions": {"Owner": "cal9897","World": "VivaWorld"}
}, 
"caylyn55": {
  "BlackList": {
    "Type": "BLACKLIST", 
    "ItemList": []
  }, 
  "EnterMessage": "Welcome %player to %residence, owned by %owner.", 
  "StoredMoney": 0, 
  "IgnoreList": {
    "Type": "IGNORELIST", 
    "ItemList": []
  }, 
  "LeaveMessage": "Now leaving %residence.", 
  "Subzones": {}, 
  "Areas": {
    "main": {
      "Y1": 67, 
      "X1": 1220, 
      "X2": 1210, 
      "Y2": 64, 
      "Z1": 369, 
      "Z2": 360
    }
  }, 
  "Permissions": {
    "Owner": "caylyn55",
    "PlayerFlags": {}, 
    "GroupFlags": {}, 
    "World": "VivaWorld"
  }
}
}, 
 "Version": 1, 
 "Seed": 1337068141
  }'; 
```

解码 JSON

```
$a= json_decode($arr,true); 
```

第一区域价值通过

```
$a['Residences']['WorkArea']['Areas']['main']['Y1']; 
```

和第二区域值

```
$a['Residences']['caylyn55']['Areas']['main']['Y1']; 
```

如果 ['WorkArea'] AND ['caylyn55'] 动态，您可以使用此代码

```
$b=array_values($a);
foreach($b as $values)
{
if(is_array($values)) {

    foreach(array_keys($values) as $c){

     echo  $a['Residences'][$c]['Areas']['main']['Y1'];

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:38:51.383

您只需要添加对您尝试输出的数据的完整引用。

例子：`echo $data['Residences']['WorkArea']['Permissions']['Owner'];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:50:27.590

像这样的东西

```
$extracted = array_map(function ($residence) {
    $r = $residence['Areas']['main'];
    $r['owner'] = $residence['Permissions']['Owner'];
    return $r;
}, $data['Residences']); 
```

# c - UINT_MAX + 1 等于什么？

> ID：14899088
> 
> 赞同：15
> 
> 时间：2013-02-15T16:31:56.377
> 
> 标签：c, standards, portability

C 中定义的行为是`UINT_MAX + 1u`什么？假设它为零有多安全？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T16:35:54.400

从标准（C11，6.2.5/9，强调我的）：

> [...] 涉及无符号操作数的计算永远不会溢出，因为无法由**结果无符号整数类型表示的结果会以比结果类型可以表示的最大值大一的数字为模减少**。

如果`UINT_MAX`是`10`：

```
(10 + 1) % (10 + 1) == 0 
```

所以，是的，假设它为零是安全的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-15T16:37:56.793

值得强调的是，虽然*无符号*行为是明确定义的，但有*符号*整数溢出却不是：

*   [http://en.wikipedia.org/wiki/Integer_overflow](http://en.wikipedia.org/wiki/Integer_overflow)

> 在 C 编程语言中，有符号整数溢出会导致未定义的行为，而无符号整数溢出会导致数字以 2 的幂为模减少

关于这个主题的一篇非常好的论文：

*   [http://www.cs.utah.edu/~regehr/papers/overflow12.pdf](http://www.cs.utah.edu/~regehr/papers/overflow12.pdf)

C/C++ 整数运算及其结果示例

```
Expression             Result
----------             ------
UINT_MAX+1             0
LONG_MAX+1             undefined
INT_MAX+1              undefined
SHRT_MAX+1             SHRT_MAX+1 if INT_MAX>SHRT_MAX, otherwise undefined
char c = CHAR_MAX; c++ varies
-INT_MIN               undefined
(char)INT_MAX          commonly -1
1<<-1                  undefined
1<<0                   1
1<<31                  commonly INT_MIN in ANSI C and C++98; undefined in C99 and C++11
1<<32                  undefined
1/0                    undefined
INT_MIN%-1             undefined in C11, otherwise undefined in practice 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-15T16:35:16.537

它是安全的。C 标准保证无符号整数~~溢出~~环绕结果为零。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T16:35:22.573

应该是安全的：

[关于无符号溢出的 Wiki](http://en.wikipedia.org/wiki/Integer_overflow)

注意 unsigned int 溢出是明确定义的。

另外，这是一个[完整的问题](https://stackoverflow.com/questions/988588/is-using-unsigned-integer-overflow-good-practice)。

# database - 如果手动删除了已部署的数据库，则无法将 VS 2010 数据库解决方案部署到数据库

> ID：14899091
> 
> 赞同：0
> 
> 时间：2013-02-15T16:31:58.300
> 
> 标签：database, visual-studio-2010, deployment, dac

我正在努力创建一个 Visual Studio 数据库解决方案，以便我可以以更受管理的方式部署数据库。以下是我在解决方案中添加一些示例表和 SP 后执行的步骤。

1.  将数据库部署到我的本地计算机（并创建一个新数据库）。
2.  在 SSMS 中的表中添加一些模拟数据。
3.  在 VS 2010 解决方案中的一个表中添加几列。
4.  构建解决方案并再次部署数据库（这次它只部署对架构所做的更改）。
5.  确认现有数据完好无损，并且新列已添加到表模式中。

到目前为止，一切都按预期工作。

1.  现在我手动删除了部署创建的数据库。
2.  转到 VS 2010 并部署解决方案（期望它应该对数据库进行干净的部署），但是我收到以下错误：

    ------ 部署开始：项目：MyDatabase，配置：调试任何 CPU ------

    预部署：开始执行脚本……</p>

    Pre-Deploy：完成脚本执行。

    MyDatabase.dacpac(0,0)：错误：-->无法升级数据库 MyDatabase 的 DAC，具有该名称的数据库不存在。指定一个有效的数据库名称。

如果数据库不存在，我的解决方案中是否有任何设置可以指定部署应该进行全新安装？

或者

如果数据库不存在，我是否需要编写单独的（数据库创建）脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T22:57:46.750

我也遇到了这个问题。我删除了数据库，无法再次部署。然后我找到了这个链接。DAC 应用程序需要在 SQL Server Management Studio 中删除。

[http://msdn.microsoft.com/en-us/library/ee240822.aspx](http://msdn.microsoft.com/en-us/library/ee240822.aspx)

删除 DAC 应用程序 在 SQL Server Management Studio 中连接到数据库 展开管理节点。展开数据层应用程序节点。右键单击要删除的 DAC，然后选择 Delete Data-tier Application... 完成向导对话框：

我删除了应用程序并能够再次部署。我仍在学习 DAC 是应用程序。

# c# - MVC - 分页列表：使用文本框、复选框和下拉列表将我的所有值保存在内存中

> ID：14899094
> 
> 赞同：0
> 
> 时间：2013-02-15T16:32:03.963
> 
> 标签：c#, asp.net-mvc, pagedlist

我正在构建一个 MVC 应用程序，它将在屏幕上显示一些数据。我最终可能会拥有数百甚至数千个数据。

所以我在本教程之后使用 PagedList 格式：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

这对我有帮助。分页列表有效。但是我有一个问题，我似乎无法弄清楚如何解决。在本教程中，只有 1 个参数，一个文本框，本教程通过保留和归属 ViewBag 参数将值“保存在内存中”，这样更改页面就不会“刷新”文本框中的文本。

现在我正在构建一个类似搜索引擎的东西，现在有 23 个参数和计数。这些参数包括复选框、文本框和下拉列表。

我的问题：有什么办法可以将这些保存在内存中？我该如何进行？我必须像教程一样将它们全部保存在内存中吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:06:51.897

如果您使用 AJAX 技术，那么您可以在控制器中创建 2 个操作方法。

第一个应该返回整个视图，第二个应该返回部分视图。

第一个将包含您的搜索控件（全部 23 个）。这些将仅在第一次呈现。

第二个将返回部分视图，并将由您对搜索查询拥有的 23 个奇数参数进行参数化。将它们全部填充到 ViewModel 类中并让默认模型绑定器在运行时绑定它可能是一个想法。

最后，您可以通过 AJAX 调用使用 JavaScript/jQuery 的第二个方法来加载搜索结果页面的结果部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:05:48.797

好吧，在本教程中，它们在请求之间并没有真正“保存在内存中”。在每个请求中，该值被传递给 action 方法，然后该方法将其传递给视图，在该视图中用于创建分页和排序链接。

以前，当分页时，我没有单独添加每个参数，而是有一个方法来读取查询字符串并使用每个提供的参数构建链接：

```
NameValueCollection queryString = helper.ViewContext.HttpContext.Request.QueryString;

foreach (string key in queryString)
{
   if (key != null)
   {
       if (!newValues.ContainsKey(key))
       {
           if (!string.IsNullOrEmpty(queryString[key]))
           {
                newValues[key] = queryString[key];
           }
        }
   }
} 
```

然后，要创建链接，我使用：

```
 string link;

            if (!string.IsNullOrEmpty(routeName))
            {
                link = helper.RouteLink(text, routeName, newValues).ToString();
            }
            else
            {
                actionName = actionName ?? values["action"].ToString();
                controllerName = controllerName ?? values["controller"].ToString();

                link = helper.ActionLink(text, actionName, controllerName, newValues, null).ToString();
            }

            return string.Concat(" ", link); 
```

# android - Python 和 Android 应用程序

> ID：14899096
> 
> 赞同：1
> 
> 时间：2013-02-15T16:32:11.583
> 
> 标签：android, python

我已经使用 Python 大约一年了，并且很想开始使用 Python 编写一些 Android 应用程序。

我一直在研究 Kivy 和 SL4A，但我对某些事情有点困惑。

当您使用 Python 和上述之一开发 Android 应用程序时，Android 设备的用户是否需要下载任何特殊的东西才能运行？还是对用户透明？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:37:37.620

用户不需要安装任何东西，这对用户来说都是透明的，但请记住，`.apk`它将包含完整的 python 安装，因此您根本不能编写占用少于 10MB 的应用程序。

在 Google Play 上有一些使用 kivy 制作的示例应用程序，例如，您可以下载一个[touchtracer](https://play.google.com/store/apps/details?id=org.kivy.touchtracer)应用程序以查看 kivy 是否可以在您的设备上运行。

kivy 需要 OpenGL ES 2.0 来处理图形，尽管大多数现代智能手机都支持它，但并不总是支持它（我有一个中文 B63M，kivy 可以很好地使用它）。Android 2.2+ 中提供了 OpenGL ES 2.0 支持。

[您可以在此](https://stackoverflow.com/a/8353523/510937)答案中找到有关 Android 打包的其他信息。

# objective-c - 从可可应用程序上传文件到 FTP

> ID：14899097
> 
> 赞同：0
> 
> 时间：2013-02-15T16:32:15.913
> 
> 标签：objective-c, cocoa, ftp, file-transfer

我很想找到一种从我的应用程序内部将文件上传到 ftp 服务器的方法。我已经`easy FTP sample`通过了苹果，试图将它从 IOS 移植到 OSX，但没有成功。我也试过`connectionKit`但下载后无法编译。（我已经尝试过它的每个分支）我一直在研究这里和其他地方发布的关于 ftp 上传的所有问题，其中大多数已经过时或无法理解。是否有一个易于理解的好教程，用于在 Mac 上为 Xcode 传输 FTP 文件？很多人都需要这个，而如此重要的话题却缺乏如此多的信息，而且每周都有一个关于同一个问题的新话题，这是荒谬的。是否有可能在这里得到一个答案，帮助我和未来需要这个的人找到一个好的，甚至更重要的最新信息？

我在 OSX 10.8

感谢愿意回答这个问题的人。

此致

# sql - 有没有办法在 SQL> 中应用移动限制

> ID：14899099
> 
> 赞同：2
> 
> 时间：2013-02-15T16:32:21.563
> 
> 标签：sql, ruby-on-rails, limit, distinct

我有一个用于绘图和数据检查的大型数据库。为简单起见，假设它看起来像这样：

```
|    id    |    day    |    obs    |
+----------+-----------+-----------+
|    1     |    500    |    4.5    | 
|    2     |    500    |    4.4    | 
|    3     |    500    |    4.7    | 
|    4     |    500    |    4.8    | 
|    5     |    600    |    5.1    | 
|    6     |    600    |    5.2    | 
                ... 
```

这可能是股票市场数据，我们每天有很多点可以测量。

我想要做的是查看更长的趋势，每天的多个点被不必要地解决，并阻塞我的绘图应用程序。（我想看 30000 天，每个都有大约 100 个观察值）。

有没有办法做类似的事情`SELECT ... LIMIT 1 PER "day"`

我想我可以执行一些`SELECT DISTINCT`查询来找到正确的 ID，但如果它是内置的，我宁愿做一些简单的事情。

它是每天的第一个、最后一个还是平均值都没有关系。只是一个值。我只喜欢最快的。

另外，我想为 Postgres、MySQL 和 SQLite 执行此操作。我的应用程序是为使用所有这三个而构建的，我经常在它们之间切换。

谢谢！

背景：这是针对 Ruby on Rails 绘图应用程序的，因此使用 ActiveRecord 的技巧也可以。[https://github.com/ZachDischner/Rails-Plotter](https://github.com/ZachDischner/Rails-Plotter)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:39:26.187

您需要使用您正在使用的 RDBMS 品牌来标记您的问题。Rails 开发人员经常使用 MySQL，但您的问题的答案取决于此。

对于除 MySQL 之外的所有品牌，正确和标准的解决方案是使用*窗口函数*：

```
SELECT * FROM (
  SELECT ROW_NUMBER() OVER (PARTITION BY day) AS RN, *
  FROM stockmarketdata
) AS t
WHERE t.RN = 1; 
```

对于尚不支持窗口函数的 MySQL，您可以使用会话变量以一种笨拙的方式模拟它们：

```
SELECT * FROM (SELECT @day:=0, @r:=0) AS _init,
(
  SELECT IF(day=@day, @r:=@r+1, @r:=0) AS RN, @day:=day AS d, *
  FROM stockmarketdata
) AS t
WHERE t.RN = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:46:04.880

你的陈述留下了很大的选择空间：

> 它是每天的第一个、最后一个还是平均值都没有关系。只是一个值。我只喜欢最快的。

因此，我将把 id 排除在外，并首先建议将每个组的 obs 平均值作为最简单且可能最实用的方法，尽管可能不是运行 stat 函数与 limit 的最快速度：

```
MyModel.group(:day).average(:obs) 
```

如果你想要最低限度：

```
MyModel.group(:day).minimum(:obs) 
```

如果你想要最大值：

```
MyModel.group(:day).maximum(:obs) 
```

（注意：以下 2 个示例比仅输入 SQL 效率低，但可能更便携。）

但你可能想要所有三个：

```
ActiveRecord::Base.connection.execute(MyModel.select('MIN(obs), AVG(obs), MAX(obs)').group(:day).to_sql).to_a 
```

或者只是没有哈希的数据：

```
ActiveRecord::Base.connection.exec_query(MyModel.select('MIN(obs), AVG(obs), MAX(obs)').group(:day).to_sql) 
```

如果您想要中位数，请参阅[这个更具体的 DB 问题](https://stackoverflow.com/q/3735252/178651)，如果您搜索 ，还有其他相关[帖子。](http://okbob.blogspot.com/2009/11/aggregate-function-median-in-postgresql.html)

更重要的是，像 postgres 这样的一些 DB 具有[内置的](http://www.postgresql.org/docs/9.1/static/functions-aggregate.html#FUNCTIONS-AGGREGATE-STATISTICS-TABLE)`variance(...)`,`stddev(...)`等。

最后，查看Rails 指南和[ARel中的](https://github.com/rails/arel)[查询部分](http://guides.rubyonrails.org/active_record_querying.html)，了解有关构建查询的更多信息。例如，您可以通过或在 ActiveRecord 关系中进行限制，而在 ARel 中，您可以进行限制。子查询也是可能的，如[对该问题](https://stackoverflow.com/q/5483407/178651)的回答所示，group by 等也是如此。如果您与其他人共享此项目，请尝试限制您正在使用的不可移植 SQL 的数量，除非您计划添加对您自己的其他数据库并维护它。`first``limit``take`

# c++ - Person 对象向量的哈希表 c

> ID：14899106
> 
> 赞同：0
> 
> 时间：2013-02-15T16:32:58.860
> 
> 标签：c++, object, hash, vector, hashtable

我一直在为我的一门课做一个非常深入的项目。它应该读入 Person 对象并将它们放入哈希表中。我仍在尝试了解哈希表的概念，因此将不胜感激。它将基于姓氏进行散列，并且由于某些人可能具有相同的姓氏，因此我打算将每个存储桶设为 Person 对象的向量。我正在尝试通过将一个人添加到散列函数然后返回它来测试该类。我的代码编译成功，但在这一行的 put 函数中出现线程错误：table[index].push_back(p);

谁能帮我弄清楚出了什么问题？谢谢！

```
int main()
{
    HashTable ht(10);
    ht.put(p1, p1->lName);
    ht.getName("Booras");
}

HashTable:
#include "Person.h"
#include <vector>

class HashTable: public DataStructures
{
private:
    vector<vector<Person>> table;
public:
    HashTable(int tableSize);
    ~HashTable();
    int tableSize;
    void getName(string str); //prints out friends with matching name
    void put(Person p, string str);
    void remove(Person *p, string str);
    int hash(string str);

};
HashTable::HashTable(int tableSize)
{
    vector< vector<Person> > table(tableSize, vector<Person>(tableSize));
    for (int i = 0; i < tableSize; i++) {
        table.push_back(vector<Person>()); // Add an empty row
    }
}

HashTable::~HashTable()
{

}

//Find a person with the given last name
void HashTable::getName(string key)
{
    int index = hash(key);
    for(int i=0; i<table[index].size(); i++)
    {
        if(table[index][i].lName.compare(key) == 0)
            std::cout << "Bucket: " << index << "Bin: " << i;
            table[index][i].print();
    }
    //create exception for person not found
}

void HashTable::put(Person p, string str)
{
    int index = hash(str);
    table[index].push_back(p);
}

void HashTable::remove(Person *p, string str)
{
    int index = hash(str);
    int i=0;
    while(&table[index][i] != p && i<table[index].size())
        i++;
    for(int j=i; j<table[index].size()-1; j++)
        table[index][j] = table[index][j+1];
    table[index].pop_back();
}

int HashTable::hash(string str)
{
    int hashValue = 0;
    for(int i=0; i<str.length(); i++)
    {
        hashValue = hashValue + int(str[i]);
    }
    hashValue %= tableSize;
    if(hashValue<0) hashValue += tableSize;
    return hashValue;
} 
```

主要的：

```
int main() {
    Person *p1 = new Person("Kristy", "Booras", "Reston", "03/15");
    HashTable ht(10);
    ht.put(*p1, p1->lName);
    ht.get("Booras");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:57:58.407

您没有向我们展示`HashTable::hash(string)`成员函数，但我假设您的问题源于`HashTable`构造函数：您没有初始化`tableSize`成员变量，您需要计算有效的散列索引。

在查看构造函数时：

```
HashTable::HashTable(int tableSize)
{
    vector< vector<Person> > table(tableSize, vector<Person>(tableSize)); 
```

这已初始化`table`为具有`tableSize`非空元素，总共`tableSize * tableSize`默认构造的`Person`对象。

```
 for (int i = 0; i < tableSize; i++) {
        table.push_back(vector<Person>()); // Add an empty row
    }
} 
```

现在您已经添加了更多行，因此，`table.size() == 2*tableSize`前半部分条目非空（如上所述），后半部分包含空向量。

这可能不是你想要的。

在所有这些中，您还没有初始化 member `tableSize`。如果您使用隐藏成员名称的局部变量或参数名称，它很容易混淆。

# .htaccess - 无法在 .htaccess 的重写规则中获取 URL 的第二个参数

> ID：14899108
> 
> 赞同：0
> 
> 时间：2013-02-15T16:33:04.790
> 
> 标签：.htaccess, mod-rewrite

我在获取路线的第二个获取参数时遇到另一个问题我无法获取第二个参数这是我写的规则：

```
RewriteRule ^knowledgebase/topics/([0-9]+)-([A-Za-z0-9-]+)\?page=([0-9]+)?$ topic.php?id=$1&page=$3 [NC,L] 
```

预期的网址是

```
knowledgebase/topics/6457-microsoft-office-application-information?page=2 
```

这`6457`是第一个获取变量，`-`然后是标题`microsoft-office-application-information`，然后`?page=`是我的第二个获取参数， `2`但无法获取该页面变量

什么是正则表达式有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:06:46.300

查询字符串不包含在重写 url 模式中。来自[RewriteRule 指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

> **什么是匹配的？**
> 如果您希望匹配主机名、端口或查询字符串，请分别使用带有 %{HTTP_HOST}、%{SERVER_PORT} 或 %{QUERY_STRING} 变量的 RewriteCond。

您必须单独提取该部分

```
RewriteCond %{QUERY_STRING} page=([0-9]+)
RewriteRule ^knowledgebase/topics/([0-9]+)-[A-Za-z0-9-]+ topic.php?id=$1&page=%1 [NC,L] 
```

# primefaces - 如何使用 pe:inputNumber 和 BigDecimal

> ID：14899112
> 
> 赞同：2
> 
> 时间：2013-02-15T16:33:21.457
> 
> 标签：primefaces, primefaces-extensions

什么是`pe:inputNumber`用于精确大小数的正确/最佳方法？我必须接受最多可以有 4 位小数的货币输入，并且不能四舍五入。现在我正在做以下事情：

```
public void withdraw(Number amount) {
 BigDecimal d = new BigDecimal(amount.doubleValue());
 // process 
} 
```

和

```
<pe:inputNumber roundMethod="S" decimalPlaces="4" symbol="#{applicationBean.currentCurrencySymbol}" required="true" value="#{flowScope.Amount}"/>

<p:commandButton value="Proceed" type="submit" ajax="true" actionListener="#{myBean.withdraw(flowScope.Amount)}"
</p:commandButton> 
```

我担心的是值会在内部转换为`Double`内部转换`InputNumber`，当我将其转换为`BigDecimal`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-06T08:47:42.817

PrimeFaces Extensions`InputNumber`不久前已移至 PrimeFaces。[渲染器](https://github.com/primefaces/primefaces/blob/master/primefaces/src/main/java/org/primefaces/component/inputnumber/InputNumberRenderer.java)的源是开放的。在那里您会发现[提交的值直接用于实例化 a`BigDecimal`](https://github.com/primefaces/primefaces/blob/f9f4a260ca82d4cf1931196f50ba1f4d18d05da3/primefaces/src/main/java/org/primefaces/component/inputnumber/InputNumberRenderer.java#L89)：

```
BigDecimal value = new BigDecimal(submittedValue); 
```

另请参阅带有示例的展示柜`BigDecimal`：[https ://www.primefaces.org/showcase/ui/input/inputNumber.xhtml](https://www.primefaces.org/showcase/ui/input/inputNumber.xhtml)

# c++ - 安装 Carmel 时的问题（使用 Boost？）

> ID：14899113
> 
> 赞同：0
> 
> 时间：2013-02-15T16:33:23.120
> 
> 标签：c++, boost, installation

我正在尝试安装[Carmel](https://github.com/graehl/carmel/blob/master/README)，这会导致一些问题。我在我的机器上运行 OSX 10.7.5，我认为先决条件 boost 安装会导致问题。

我已经安装了 boost，但是在尝试安装 Carmel 时，出现如下错误：

```
In file included from ../../graehl/carmel/src/fst.h:4,
                 from ./src/fst.cc:3:
../../graehl/carmel/src/config.hpp:8:25: error: fst/compat.h: No such file or directory
../../graehl/carmel/src/config.hpp:32:29: error: fst/vector-fst.h: No such file or directory
In file included from ../../graehl/carmel/src/fst.h:4,
                 from ./src/carmel.cc:33:
../../graehl/carmel/src/config.hpp:8:25: error: fst/compat.h: No such file or directory
../../graehl/carmel/src/config.hpp:32:29: error: fst/vector-fst.h: No such file or directory
../../graehl/carmel/src/config.hpp:36:26: error: fst/minimize.h: No such file or directory
../../graehl/carmel/src/config.hpp:37:27: error: fst/rmepsilon.h: No such file or directory
../../graehl/carmel/src/config.hpp:38:29: error: fst/determinize.h: No such file or directory
../../graehl/carmel/src/config.hpp:39:25: error: fst/connect.h: No such file or directory
../../graehl/carmel/src/config.hpp:42:27: error: fst/lib/util.cc: No such file or directory
../../graehl/carmel/src/config.hpp:43:26: error: fst/lib/fst.cc: No such file or directory
../../graehl/carmel/src/config.hpp:44:28: error: fst/lib/flags.cc: No such file or directory 
```

有人能指出这些错误的正确方向吗？我不是到哪里去，或者去哪里看。

谢谢！

# ruby - “puts”语句在 Ruby 中是如何工作的？

> ID：14899116
> 
> 赞同：0
> 
> 时间：2013-02-15T16:33:36.760
> 
> 标签：ruby, ruby-1.9.3

# 我知道这总是让 return`nil`本身。

但是我已经知道这个事实，我已经开始玩弄它了。这里是：

```
>> puts

=> nil # Good, you are doing what I expected.

>> puts 15
15
=> nil # nil is for puts and 15 it printed,as it is assigned to do. perfect still.

>> puts a = 5 + 2
7
=> nil # still good. 
```

现在我会做更多的事情`puts`来看看它有多强大。

```
>> puts a= 5 + 2;b= 2+3
7
=> 5 #ahh! where is nil?

>> puts a= 5 + 2;b= 2+3;c= 4+8
7
=> 12 # again no nil. Another confusion created here that why 12 and 7 only, how 5 has been skipped? 
```

***价值如何`puts` `nil`被压制？***

好的，让我们测试另一种方式`nil`。

```
>> x=puts a= 5 + 2;b= 2+3;c= 4+8
7
=> 12

>> puts x

=> nil # humm, nil is there. but why not nil => nil? Confusion here again goes up. whose nil is it? 
```

`puts`任何人都可以通过说出Ruby世界中的实际行为来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:37:32.370

我假设repl`irb`正在评估您输入的语句并显示最后评估的语句的值。

考虑一下：

```
>> p = puts "hello"; 5
hello
 => 5 
>> p
 => nil 
```

`puts`仍在返回`nil`，但 repl 正在显示最后一条语句的结果，`5`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:37:57.787

这与puts没有太大关系。

分号分隔多个表达式。`irb`在这种情况下，将只显示最后一个表达式的计算结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:40:54.140

您的问题不在于`puts`，而是提示符对包含多个语句（以分号分隔）的命令的作用。

想想这个例子：

```
irb(main):001:0> "first";"second"
=> "second" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T16:48:25.990

`puts`呼吁`to_s`它的论点，这就是为什么`puts 1`有效。`puts nil`与 相同`puts nil.to_s`，也与`puts ""`（注意 IRB 输出中的空白行）相同。

其余的只是 irb 在等待新输入之前输出最后执行的行的结果。

# asp.net - 带有 FormsAuthenticationTicket 的 asp.net 记住我系统

> ID：14899121
> 
> 赞同：0
> 
> 时间：2013-02-15T16:33:50.873
> 
> 标签：asp.net, formsauthenticationticket

我正在尝试在 asp.net 项目上做记住我的系统。我做了用户注册和登录 FormsAuthenticationTicket。我想要的是当用户登录时，我按预期设置了一个持久性 cookie，我验证我可以添加 cookie 但 FormsAuthenticationTicket 不处理记忆的事情。这是我的代码

```
ticket = new FormsAuthenticationTicket(1,
                                            (String)(drUserInfo["Email"]),
                                            DateTime.Now,
                                            DateTime.Now.AddMinutes(30),
                                            Login1.RememberMeSet,
                                            (String)(drUserInfo["UserType"]));
                encryptedStr = FormsAuthentication.Encrypt(ticket); 
```

你能帮我解决这个问题吗？FormsAuthenticationTicket 是否处理记住我的系统或我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:58:21.707

查看 asp:Login 的源代码，我看到 cookie 是通过以下调用进行的：

从 System.Web.UI.WebControls.Login.AttemptLogin 调用

```
if (authenticateEventArgs.Authenticated)
{
    FormsAuthentication.SetAuthCookie(this.UserNameInternal, this.RememberMeSet);
    this.OnLoggedIn(EventArgs.Empty);
    this.Page.Response.Redirect(this.GetRedirectUrl(), false);
    return;
} 
```

`FormsAuthentication.SetAuthCookie(this.UserNameInternal, this.RememberMeSet);`是电话

# java - Android 在 getSupportFragmentManager() 崩溃

> ID：14899122
> 
> 赞同：1
> 
> 时间：2013-02-15T16:34:02.597
> 
> 标签：java, android, android-fragments

我决定从多个活动切换到一个在片段之间切换的活动，但是应用程序现在崩溃了。

这是我将片段添加到的活动

公共类 MainActivity 扩展 SherlockFragmentActivity{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MyFragment fragment = new MyFragment();

    fragment.setArguments(getIntent().getExtras());

    getSupportFragmentManager().beginTransaction()
    .add(R.id.fragment_container, fragment).commit();

} 
```

这是它的观察者的片段，并且具有功能，但为了节省空间，我只展示了创作

```
public class MyFragment  extends SherlockFragment implements Observer{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.my_fragment, container, false);
    } 
```

继承人 my_fragment.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/my_fragment"
android:layout_width="match_parent"
android:layout_height="match_parent" >

... HAS SOME TEXT VIEWS HERE!
</RelativeLayout> 
```

我得到的崩溃是

```
02-15 16:17:41.079: E/AndroidRuntime(18668): FATAL EXCEPTION: main
02-15 16:17:41.079: E/AndroidRuntime(18668): java.lang.RuntimeException: 
Unable to start activity ComponentInfo{com.example.myapp/com.example.myapp.MainActivity}: 
java.lang.IllegalArgumentException: 
No view found for id 0x7f040036 for fragment MyFragmentt{41a05910 #0 id=0x7f040036} 
```

有谁可以帮我离开这里吗？我真的无法弄清楚是什么原因造成的。我知道如果我在主要活动（这篇文章的顶部代码块）中注释掉 getSupportFragmentManager() 它将运行，只是不会在我的片段中绘制任何内容。

**更新**

我不知道该放在哪里的 frame_container

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/fragment_container"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:53:41.993

因此，您可以`Fragments`在应用程序中使用的方式有两种。第一种方法是，如果您在 xml 文件中声明片段，如下所示：

```
<fragment android:name="com.example.news.ArticleReaderFragment"
        android:id="@+id/viewer"
        android:layout_weight="2"
        android:layout_width="0dp"
        android:layout_height="match_parent" /> 
```

第二种方法是，如果您将 Fragments 动态添加/替换到您的容器中，在大多数示例中是`FrameLayout`. 您可以这样做：

在你的主要`FragmentActivity`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myFragmentContainer);
} 
```

在你的 xml`myFragmentContainer.xml`中是你放置你的地方`fragment_container`，它看起来像：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/fragment_container"
     android:layout_width="match_parent"
     android:layout_height="match_parent" /> 
```

你正在添加和替换你的`Fragments`这样的：

```
 if (findViewById(R.id.fragment_container) != null) {

        if (savedInstanceState != null) {
            return;
        }

        // Create an instance of ExampleFragment
        HeadlinesFragment firstFragment = new HeadlinesFragment();
        // if there are any extras
        firstFragment.setArguments(getIntent().getExtras());

        // Add the fragment to the 'fragment_container' FrameLayout
        getSupportFragmentManager().beginTransaction()
                .add(R.id.fragment_container, firstFragment).commit();
    } 
```

对于您要展示的下一个片段，只需执行以下操作：

```
getSupportFragmentManager().beginTransaction()
                    .replace(R.id.fragment_container, secondFragment).commit(); 
```

# makefile - 如何从 g++ 编译器选项中排除文件

> ID：14899129
> 
> 赞同：1
> 
> 时间：2013-02-15T16:34:18.760
> 
> 标签：makefile, g++, compiler-warnings

我想用 -Wconversion -Werror 编译我的大部分代码。

问题是我使用了一个开源的 .cpp 文件并且不应该被修改，并且使用这些标志编译它会失败，因为该特定的 .cpp 文件存在一些“可能会改变值的隐式转换”的问题。

我可以以某种方式指示构建使用 -Wconversion -Werror 编译所有其他文件，但在没有这些标志的情况下编译该文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:22:27.977

该`make`实用程序提供了一组丰富的工具，用于自定义构建和默认为常规逻辑事物的隐式过程。如果有与 gcc 工具链相关的问题，[GNU`make`教程](http://www.gnu.org/software/make/manual/make.html#Introduction)是一个很好的起点。

本质上，makefile 包含用于构建项目的自定义逻辑。规则由一个明显的*目标*组成，在一行上用冒号将其与*依赖*项分开，然后（可能零个或多个）在随后的行上由一个制表符缩进的*配方组成，解释了构建该**目标*的步骤。虚假目标，例如。`clean`, 也可以为了方便维护项目而定义。

如果存在特定于目标的规则，则将优先使用该规则而不是任何隐式规则来构建该目标。可能 OP 只需要向现有的 makefile 添加一个特定于目标的规则，该规则将控制编译器选项的使用（从源构建对象）。

# php - var.$logged 在 global.php 中定义，没有被 index.php 拾取

> ID：14899130
> 
> 赞同：0
> 
> 时间：2013-02-15T16:34:19.237
> 
> 标签：php, mysql, logged

我试图按照 youtube chanel 上的教程进行操作

> [帮助发展](http://www.youtube.com/watch?v=__qEvukd5og)

当我遇到一些问题时。第一个是他在教程 #5 中的注销代码由于更改而不再起作用

```
 if(session_is_registered() 
```

我想我已经用

```
 if( isset($_SESSION[$username])){ 
```

但是现在我收到一条错误消息，上面写着“注意：未定义的变量：在第 2 行登录 C:\xampp\htdocs\membership\index.php”

当我检查索引的第 2 行时，它显示我首先包含 global.php

```
 <?php include_once('scripts/global.php');
     if($logged==1){
    header("Location:home.php");
        exit();
    }
    ?> 
```

所以然后我检查 global.php 有 $logged=1 所以它应该被定义......除非我错过了什么。我真的很想在这里学习更多，所以在解释什么是错误的以及为什么......谢谢你的帮助。

```
 <?php
    session_start();
    include_once('scripts/connect.php');

     //checking if the sessions are set
    if(isset($_SESSION['username'])){
               $session_username=$_SESSION['username'];
               $session_pass=$_SESSION['pass'];
               $session_id=$_SESSION['id'];

               //checking the member data
               $query=mysql_query("SELECT * FROM members WHERE
     id='id' AND password='pass' LIMIT 1")or die("Could not check member");
               $count_count=mysql_num_rows($query);
               if(count_count>0){
                //logged in stuff here
                $logged=1;

               }else{
                   header('Location:logout.php');
                   exit();
               }

               }elseif(isset($_COOKIE['id_cookie'])){
                $session_id=$_COOKIE['id_cookie'];
                $session_pass=$_COOKIE['pass_cookie'];

                //checking the member data
               $query=mysql_query("SELECT * FROM members WHERE    
    id='$session_id' AND password='$session_pass' LIMIT 1")or die("Could not check member");
               $count_count=mysql_num_rows($query);
               if(count_count>0){
                    while($row=mysql_fetch_array($query)){

    $session_username=$row['username'];
                    }
                   //create sessions
                   $_SESSION['username']=$session_username;
                   $_SESSION['id']=$session_id;
                   $_SESSION['pass']=$session_pass;

                //logged in stuff here
                    $logged=1;

               }else{
                   header('Location:logout.php');
                   exit();
                   }
               }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:33:05.200

$logged 设置在一个条件内，因此追溯以了解您如何可能不会遇到随机重定向（让我想起了我们过去经历的疯狂的“goto”日子）并最终没有设置 $logged。或者在包含的脚本的开头初始化 $logged。

# c# - 如何在 C# WPF 应用程序中使用动态复选框进行管理？

> ID：14899136
> 
> 赞同：1
> 
> 时间：2013-02-15T16:34:38.630
> 
> 标签：c#, wpf, events, dynamic, checkbox

我创建了一个复选框列表，其中动态添加了 8 个复选框。我的程序的想法是：当一个框被选中时，我的绘图仪上会出现一个图表，当我取消选中它时，它就会消失。

我的问题是我不知道如何管理事件来做到这一点，因为我动态添加了复选框，并且我需要 8 个不同的事件来处理 8 个不同的图表。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:38:12.997

您可以为所有这些事件使用一个事件。在事件内部，您将获得触发事件的控件的名称。像这样的东西：

```
 private void CheckBox_Click(object sender, RoutedEventArgs e)
 {
     CheckBox senderChk = sender as CheckBox;
     switch (senderChk.Name)
     {
         case "checkBox1":  //do something 
         case "checkBox2":  //do something 
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:44:55.873

这里的答案建议使用 .Name 属性，但对于现在可能运行良好的动态创建的复选框。

```
CheckBox chx;
chx.Tag = "Chart 1"; // put these tags in an enum or at least constants
chx.Click += chx_Click; 

void chx_Click(object sender, RoutedEventArgs e)
{
    CheckBox chx = sender as CheckBox;
    if (chx != null && chx.Tag != null)
    {
        switch (chx.Tag)
        {
            case "Chart 1": 
                        myChart1.Visibility = chx.IsChecked? Visibility.Visible: Visibility.Collapsed;  
                break;
            case "Chart 2": //...
                break;
            default:
                break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:38:53.653

事件处理程序的“sender”参数指示哪个控件引发了事件。

在某处，您创建了一个控件。确保在某处保留对它的引用，作为成员变量，在字典中或其他任何地方。

然后，在您的事件处理程序中，执行以下操作：

```
If(sender==myControl)
{
   ...do something...
}
Elseif (sender==myOtherControl)
{
    ...do something else...
} 
```

# python - 如何在python中找到矩阵指数的积分

> ID：14899139
> 
> 赞同：1
> 
> 时间：2013-02-15T16:35:00.547
> 
> 标签：python, matrix, numpy, integration, exponential

我有一个形式的矩阵，说`e^(Ax)`哪里`A`是方阵。如何将它从给定值集成`a`到另一个值`b`，以便输出是相应的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:38:15.900

如果 A 具有正确的属性，您可以通过计算其特征向量和特征值将其转换为对角线形式 A0。在对角线形式中，解是`sol = [exp(A0*b) - exp(A0*a)] * inv(A0)`，其中`A0`是具有特征值的对角矩阵，并且`inv(A0)`仅包含其对角线中特征值的逆矩阵。最后，通过将解与左侧特征值和右侧特征值的转置相乘来转换解`transpose(eigvecs) * sol * eigvecs`：

# javascript - 同步 SoundCloud 音频和 Vimeo/Youtube 视频一起播放

> ID：14899142
> 
> 赞同：0
> 
> 时间：2013-02-15T16:35:10.513
> 
> 标签：javascript, jquery, html, audio, soundcloud

好吧，我正在处理一个涉及 html5 音频的项目，此外还在播放音频时显示视频（只有视频，没有控件等）。视频是正在播放的音频的可视化（有时称为均衡器），预先在 adobe 中制作后效果。两个文件（视频和音频）的长度相同，例如 3 分 20 秒。我需要一种同步两者的方法，因为视频加载速度可能比音频慢，反之亦然。因此，我需要这样做，以便在互联网连接速度较慢的计算机上，如果视频在某个时间停止加载并开始缓冲，我需要暂停音频，并且一旦视频恢复再次开始音频，两者都在完全相同的时间，也当用户跳到歌曲中的某些部分，视频也应该跳到那部分，我将使用自定义 api 制作的播放器播放视频，因此不会对视频进行控制，只有在 soundcloud 播放器上。就好像我在使用 soundcloud 自定义播放器来控制视频一样。我正在努力在任何地方找到有关此的任何资源，并且真的很想知道如何实现此功能。最好使用 javascript 或 jQuery 解决方案。

更复杂的是我使用 SoundCloud 的自定义播放器来播放歌曲：http: [//developers.soundcloud.com/docs/custom-player#](http://developers.soundcloud.com/docs/custom-player#)

并将视频上传到 Vimeo/YouTube（所有这些都是为了减少网站的负载）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:37:26.420

在这里查看：http: [//html5demos.com/two-videos](http://html5demos.com/two-videos)

该示例用于同步 2 个视频，但通过一些黑客攻击，您可能可以设法同步音频和视频。

其次，不要使用自定义播放器，制作你自己的 HTML5 音频元素，检查[SoundCloud API](http://developers.soundcloud.com/docs/api/reference#tracks)有一个属性 stream_url 用于 soundcloud 上的每个可流式轨道，只需将该 URL 作为源放在你的 html5 音频标签上。

请记住，这将在一段时间内不适用于 Firefox 和 Opera。Firefox 将在 v20 中集成原生 mp3 支持，Opera 不确定

# linq - 如何找到出现在 Sql Server Sloq 查询日志中的 linq 生成的 Sql 查询？

> ID：14899144
> 
> 赞同：0
> 
> 时间：2013-02-15T16:35:13.097
> 
> 标签：linq, sql-server-2008, linq-to-entities

我的一些查询存在一些性能问题。当我[向 Sql Server 查询慢查询列表时](http://blog.brianhartsock.com/2008/12/16/quick-and-dirty-sql-server-slow-query-log/)，我发现了一些由 Linq-To-Entities 生成的查询。

例如：

```
SELECT 
[Project12].[OrderId] AS [OrderId], 
[Project12].[OrderDate] AS [OrderDate], 
[Project12].[OrderStatusId] AS [OrderStatusId], 
[Project12].[Name] AS [Name], 
[Project12].[C1] AS [C1], 
[Project12].[ClientId] AS [ClientId], 
[Project12].[ClientCode] AS [ClientCode], 
[Project12].[TwoLetterCode] AS [TwoLetterCode], 
[Project12].[Identifier] AS [Identifier], 
[Project12].[StartDate] AS [StartDate], 
[Project12].[Code] AS [Code], 
[Project12].[C2] AS [C2], 
[Project12].[C3] AS [C3], 
[Project12].[C4] AS [C4], 
[Project12].[C5] AS [C5]
FROM ( SELECT 
    [Project11].[OrderId] AS [OrderId], 
    [Project11].[ClientId] AS [ClientId], 
    [Project11].[StartDate] AS [StartDate], 
    [Project11].[Identifier] AS [Identifier], 

.... 
```

我尝试使用不同的字段来查找我在哪里查询这些字段，但我找不到在哪里。

可以使用什么技术来查找哪个 Linq 查询生成了一些 sql？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:50:15.937

我相信您可以对 Linq to SQL 使用 DataContext.Log 方法（我相信这也适用于 Linq to Entities）：http: [//msdn.microsoft.com/en-us/library/system.data.linq。数据上下文.log.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)

将其与 StreamWriter 连接起来，您就可以看到您的 Linq 在做什么。然后，您可以使用此日志与您从 SQL 探查器日志中获得的内容进行比较，并查看究竟在做什么来比较两者。

我也更喜欢在直接使用 SQL 进行调试时使用 LinqPad。您甚至可以将实体框架的 DLL 直接导入其中以进行查询。

[http://www.linqpad.net/](http://www.linqpad.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:17:13.580

[我在ThinqLinq](http://www.thinqlinq.com/Post.aspx/Title/LINQ-to-Database-Performance-hints)发布了许多可能有助于隔离您的 LINQ 性能问题的技术。

# ruby-on-rails-3 - Rails 3如何呈现.json.erb文件

> ID：14899150
> 
> 赞同：0
> 
> 时间：2013-02-15T16:35:20.797
> 
> 标签：ruby-on-rails-3

我正在将一个相当大的项目迁移到 Rails 3。

这是我的控制器操作：

```
def recent
  @account = Account.find(session[:account_id])
  render :layout => false
end 
```

这是我最近的.json.erb 文件

```
formatted_account = 
{
  :code = 1,
  :id = @account.id,
  :prefix = 2
}   
formatted_account.to_json() 
```

我正在使用 jQuery.getJSON 来获取这些数据，当我得到响应时，这就是我得到的：

```
[{&quot;code&quot;:1,&quot;id&quot;:&quot;1 &quot;prefix&quot;:2}] 
```

代替

```
[{code:1, id:1, prefix:2}] 
```

我不得不在其他一些代码中使用 safe_html 来解决这样的转义问题，但在这种情况下，如果不删除 .json.rb 文件并以正确的方式呈现 json 对象，我无法弄清楚如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:37:11.190

html_safe 成功了：

```
formatted_account = 
{
  :code = 1,
  :id = @account.id,
  :prefix = 2
}   
formatted_account.to_json.html_safe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:37:14.683

如果您想从模板构建 json，则需要使用某种构建器，因为 ERB 不会真正削减它。

JBuilder 在新的 Rails 3.2 Gemfile 中被注释掉了。我自己没有使用过它，但它似乎是经过深思熟虑的干净的 DSL。JBuilder github 页面上的 README 底部还有一个链接列表。

RABL 是另一种构建 JSON 的工具，并且支持多种其他格式。

[JBuilder](https://github.com/rails/jbuilder)
[RABL](https://github.com/nesquena/rabl)

# google-maps - 谷歌地图apiv3标记替换旧

> ID：14899154
> 
> 赞同：0
> 
> 时间：2013-02-15T16:35:26.337
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一个小功能，可以在单击时添加标记和信息窗口。但是，当我单击新位置时，旧位置仍然存在。我希望它被新的取代。这是我的代码：

```
function MapInitialize() {

            var mapOptions = {
            zoom: 4,
            center: new google.maps.LatLng(43,-77),
            mapTypeId: google.maps.MapTypeId.ROADMAP
            }

            var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        google.maps.event.addListener(map, 'click', function(event) {
            var marker = new google.maps.Marker({
                position: event.latLng,
                map: map
        })
        var infowindow = new google.maps.InfoWindow({
                content: 'Content Here'
            });
            infowindow.open(map,marker);
});
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:43:28.667

在创建新标记之前删除旧标记：

```
var marker = null;
function MapInitialize() {

            var mapOptions = {
            zoom: 4,
            center: new google.maps.LatLng(43,-77),
            mapTypeId: google.maps.MapTypeId.ROADMAP
            }

            var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        google.maps.event.addListener(map, 'click', function(event) {
            if (marker && marker.setMap) marker.setMap(null);
            marker = new google.maps.Marker({
                position: event.latLng,
                map: map
        })
        var infowindow = new google.maps.InfoWindow({
                content: 'Content Here'
            });
            infowindow.open(map,marker);
});
} 
```

# css - 非粗体文本占用粗体文本空间

> ID：14899159
> 
> 赞同：7
> 
> 时间：2013-02-15T16:35:57.003
> 
> 标签：css

我正在使用 CSS 将一些单选按钮设置为选项卡。我希望“选定”选项卡的字体粗细为粗体。当然，这会导致选项卡的大小增加，因为文本占用更多空间。我想找到一种方法让文本从粗体变为非粗体，而“标签”不会改变大小

![选项卡 1 已选择](../Images/55e00c60ae048c1c51136fc5c26e1963.png)

![选项卡 2 已选择](../Images/043f5fb67edc6159ec5be4f847e5c8a7.png)

如果没有设置固定宽度，是否有一种巧妙而干净的方法可以使文本占据粗体文本的大小而实际上不加粗？

我能想到的唯一方法是存在粗体文本（导致文本在 HTML 中存在两次），但使用`visibility: hidden`.

### 标记：

```
<label class="tab active"><input type="radio" name="someTabs" value="someValueA" />Tab 1</label>
<label class="tab"><input type="radio" name="someTabs" value="someValueB" />Tab 2 (with longer text)</label> 
```

### 现在的相关CSS：

```
.tab {
  display: block;
  font-size: 1.2em;
  height: 2em;
  line-height: 2em;
  margin-right: 1px;
  padding: 0 2em;
  position: relative;
  text-align: center;
  float: left;
}
.tab.active,
.tab:hover {
  font-weight: bold;
}
.tab input[type=radio] {
  display: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:21:07.640

还有一个使用*幽灵*元素的解决方案。只需使用位于可见区域下方的粗体样式的相同文本：

HTML：

```
<div class="link">
    <div class="text">Sample Text</div>
    <div class="ghost">Sample Text</div>
</div> 
```

CSS：

```
.link {
    border: 1px #000 solid;
    display: inline-block;
}

.link .ghost {
    color: transparent;
    font-weight: bold;
}

.link .text {
    position: absolute;
    text-align: center;
}

.link .text:hover {
    font-weight: bold;
} 
```

这是一个[**jsFiddle**](http://jsfiddle.net/adqqC/)来检查一下！

唯一需要注意的是可见文本不在外部 div 中居中。也许有人可以从这里接？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:03:49.270

那 CSS`letter-spacing`呢？结果将接近所需的结果：

```
.tab
{
    letter-spacing: 1.5px;
}

.tab.active, .tab:hover 
{
    letter-spacing: normal;
} 
```

[jsfiddle 示例](http://jsfiddle.net/N5y68/2/)

# excel - Excel：如何创建一个依赖于下拉列表选定项的单元格？

> ID：14899165
> 
> 赞同：0
> 
> 时间：2013-02-15T16:36:12.573
> 
> 标签：excel, vba

我必须在 Excel 2003 中创建简单的用户界面：

用户在下拉列表中选择一个客户，应填充客户地址单元格。

我在一个特殊的工作簿电子表格上创建了​​客户列表，如下表：

```
 1           2
======================= 
1 Customer1   Address1
2 Customer2   Address2 
3 Customer3   Address3 
```

我选择了“客户列”（Customer1、Customer2、Customer3）并创建了一个命名列表“客户”。然后我回到我的用户电子表格并放置了下拉列表，其中包含来自“客户”命名列表的值。

用户可以愉快地选择 Customer1、Customer2 或 Customer3。

当用户从下拉列表中选择客户时，我应该在我的工作簿中添加什么以自动填充地址单元格？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:43:06.793

您应该使用示例中的完整列表创建“地址簿”，也许在单独的工作表上（`Sheet2`例如）。

然后代替`Address1`（我认为是 cell `B1`）添加以下公式：

```
=IFERROR(VLOOKUP(A1,Sheet2!A:B,2,0),"Address not found!") 
```

在这里，我假设您的地址簿位于 Sheet2 的 A 和 B 列中。这还将包括对丢失地址的错误检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T16:48:30.550

您应该制作一个包含所有客户姓名和地址的单独表格。然后使用 vlookup 在您的界面中查找输入的客户名称的地址：

![示例 1](../Images/056d5623c563483e504f87aa36810035.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T16:40:01.883

这很简单 - 在您想要填充地址的字段中，只需使用`Vlookup`基于此表的简单函数即可。

# css - 溢出：隐藏在 iOS 上不起作用

> ID：14899166
> 
> 赞同：4
> 
> 时间：2013-02-15T16:36:13.500
> 
> 标签：css, overflow

[http://www.andrewsmorris.co.uk/blog/](http://www.andrewsmorris.co.uk/blog/)

当您单击左侧的按钮时，我有一个侧边栏会滑出，但是问题是，在 iOS 上，当我单击它时，页面上会出现水平滚动条。当我在桌面浏览器上单击它时，我不会这样做，因为它会在 body 类中添加一个带有 overflow:hidden 的类。

从理论上讲，这也应该防止在 iPhone 上出现同样不需要的水平滚动，但这不是因为我无法解决的原因。

我可以将 overflow-x:hidden 应用于 html 元素，但无论您身在何处，这似乎都会将页面跳到顶部，这是不受欢迎的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T19:21:25.157

您需要应用溢出：隐藏；和位置：相对；对两者和它们也不能显示：表，显示：块工作。指定高度和宽度也可能有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-24T22:56:43.957

我不知道可以让您使用溢出的解决方案：隐藏；根据您提供的信息。但是，我可以建议您使用 iScroll 进行移动滚动！

[在cubiq 的网站](http://cubiq.org/iscroll-4)上查看它

# c# - c# 使文本框不可选择

> ID：14899173
> 
> 赞同：0
> 
> 时间：2013-02-15T16:36:32.887
> 
> 标签：c#, winforms, textbox

我想获得相同的功能，`Textbox.Enabled = false;`以便文本框中的文本根本不可选择，但文本不会变为浅灰色。它应该保持不变。

`Textbox.ReadOnly = true;`仍然让您选择它，所以这不好。

不，不幸的是，它必须是文本框而不是标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:41:32.490

这是在 WPF 中吗？如果是这样，您应该使用 Textbox.Enabled = false; 并更改样式，使这个禁用的文本框看起来像你想要的样子。

# perl - 如何在工具提示中显示 Perl 变量的值

> ID：14899183
> 
> 赞同：-1
> 
> 时间：2013-02-15T16:37:03.667
> 
> 标签：perl, hover, cgi, tooltip

我有一个 CGI perl 脚本，它处理大型应用程序配置文件并以表格格式显示提取的配置数据。

其中一列显示了从配置文件中提取的给定服务器的主机名。

我想做的是`$alias`当用户将鼠标悬停在主机名上时显示别名（存储在 中） - 就像工具提示一样。

每个表行都有不同的主机名和别名，我通过遍历数组来创建表。

我正在使用面向对象的 CGI Perl 方法。

我尝试使用以下内容：

```
print $cgi->start_td({class=>'primpeer',title=>'$aliasName'}),"$hostName"; 
```

但这只是回应了工具提示中的 $aliasName 而不是 $aliasName 的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:49:00.527

将您的值`$alias`放入一个[`title`属性](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.4.3)（可能是一个`td`元素）。它将为您生成一个工具提示，就像元素的`alt`属性一样。`img`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:34:36.770

单引号内的变量不会被轮询。
只需使用双引号而不是单引号：

```
print $cgi->start_td({class=>'primpeer',title=>"$aliasName"}),"$hostName";  
                                        here __^   here __^ 
```

或不带任何引号：

```
print $cgi->start_td({class=>'primpeer', title=>$aliasName}), $hostName; 
```

# struts2 - 如何在Struts2中将对象的自定义值设置为文本字段标签

> ID：14899191
> 
> 赞同：0
> 
> 时间：2013-02-15T16:37:31.903
> 
> 标签：struts2, textfield

我想在文本字段中使用自定义对象的值。它是通过EL表达式还是其他方式完成的？如下所述，Scriplets 不起作用

```
<s:textfield label="Login" name="loginName" value=<%=temp.getLoginName()%>/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:43:21.680

您需要从您的操作中为自定义对象提供一个 getter，并为其“值”提供一个 getter，然后执行以下操作：

```
<s:textfield value="%{customObject.value}"/> 
```

# python - 简单的python列表理解

> ID：14899194
> 
> 赞同：1
> 
> 时间：2013-02-15T16:37:36.450
> 
> 标签：python, list, list-comprehension

我觉得这个问题有一个简单的答案，但是我很难得到答案，而无需编写很多行代码。我希望有人能给我一些东西，让我在 python 中的列表理解方面更轻松。

我所拥有的是：

```
highest_peak = sorted([(self.Y[x]-self.background_model[x]) for x in peaks_index_list])[0] 
```

如何从发生这种情况的 peaks_index_list 中获取最高峰值的索引 (x)？

```
index_of_highest_peak = sorted(???)[0]
index_of_second_highest_peak = sorted(???)[1] 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:41:00.153

如果你使用 numpy 你可以

```
import numpy as np
highest_peak = np.asarray(highest_peak)

max_index = highest_peak.argmax() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T16:44:12.030

我认为峰高是`self.Y[i] - self.background_model[i]`峰指数`i`？如果您想要的只是最高峰的索引：

```
max(peaks_index_list, key=lambda i: self.Y[i] - self.background_model[i]) 
```

同样，如果您真的想要排序列表，请使用上面的键[进行排序`peaks_index_list`](http://docs.python.org/2/library/functions.html#sorted)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T16:40:27.053

您应该对 (value,index) 形式的元组列表进行排序——

```
info = sorted((self.Y[x]-self.background_model[x],x) for x in peaks_index_list) 
```

现在你的最高峰指数是：

```
info[-1][1] 
```

或者你可以更好地解压它：

```
highest_peak_value,highest_peak_index = info[-1] 
```

（因为我们没有指定，所以最高峰在排序列表中的最后一个`reverse=True`）

第二高峰指数为：

```
info[-2][1] 
```

等等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T16:42:05.470

（注：根据评论编辑）

将索引添加到正在排序的对象：

```
highest_peak, index = sorted([(self.Y[x]-self.background_model[x], x)
    for x in peaks_index_list])[0] 
```

（最初我建议使用 enumerate()，这在您想要枚举元素的索引时非常有用。在这种情况下，peaks_index_list 已经是海报所追求的索引。）

```
highest_peak, index = sorted([(self.Y[x]-self.background_model[x], i)
    for i, x in enumerate(peaks_index_list]))[0] 
```

# java - GWAN 无法识别 Java

> ID：14899196
> 
> 赞同：0
> 
> 时间：2013-02-15T16:37:43.680
> 
> 标签：java, cpu-architecture, g-wan, x86

我遵循了常见问题解答，但我正在运行 Ubuntu 10 服务器，所以 J6 是我能得到的最好的。当我启动 gwan 4.2.13 (sudo ./gwan) 我得到“hello.java: to use .java scripts, install Java”

```
 echo $JAVA_HOME
/usr/lib/jvm/java-6-openjdk

echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/jvm/java-6-openjdk/bin

java -version
java version "1.6.0_27"
OpenJDK Runtime Environment (IcedTea6 1.12.1) (6b27-1.12.1-2ubuntu0.10.04.2)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

我尝试了常见问题解答中的 Java 清除并重新安装了 J6，但仍然没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:05:48.243

根据您的报告，错误是：

*“java.lang.ClassLoader 中不支持的 major.minor 版本 51.0”*

这不是崩溃，这是[在加载 JVM 的第一步中触发的 Java 版本不兼容](https://stackoverflow.com/questions/12028166/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0-un)，如此处所述。

您的服务器运行的 Java 版本低于用于编译 Servlet 的 Java 版本，反之亦然。Java 文档解释说，显示的版本号是类文件兼容的 JRE 版本：

```
J2SE 7 = 51,
J2SE 6.0 = 50,
J2SE 5.0 = 49,
JDK 1.4 = 48,
JDK 1.3 = 47,
JDK 1.2 = 46,
JDK 1.1 = 45 
```

该错误与 G-WAN 无关：这是 Java 版本问题。要解决它，只需安装对应的 JVM 和 JDK。

任何使用 Java 的程序都可能发生此错误：混合版本会导致 Java 不兼容，而 G-WAN 对此无能为力。

# r - 计数事件组合在数据框列中发生的次数

> ID：14899197
> 
> 赞同：2
> 
> 时间：2013-02-15T16:37:44.117
> 
> 标签：r, dataframe, combinations

我有一个数据框，我想计算两列中每个事件组合发生的次数（以任何顺序）。

例如说我有

```
df <- data.frame('x' = c('a', 'a', 'b', 'c', 'c', 'c'), 
                 'y' = c('b', 'c', 'c', 'a', 'a', 'b')) 
```

所以

```
x y  
a b  
a c  
b c  
c a  
c a  
c a  
c b 
```

`a`并`b`一起出现一次（第一行），`a`四次`c`（第 2、4、5、6 行）`b`和`c`两次（第 3 行和第 7 行），所以我想返回

```
x-y num  
a-b 1  
a-c 4  
b-c 2 
```

我希望这是有道理的？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:43:42.270

这应该有效：

```
table(apply(df,1,function(x) paste(sort(x),collapse='-')))

a-b a-c b-c 
  1   3   2 
```

# sql - 将同一个表中的子表转换为列

> ID：14899199
> 
> 赞同：0
> 
> 时间：2013-02-15T16:37:50.960
> 
> 标签：sql, database, plsql, pivot

我有一张这样的桌子：

```
+-------+-------+-------+-------+
|  ID   | City  | Param | Value |
+-------+-------+-------+-------+
| id1   | city1 | a     | value |
| id2   | city1 | b     | value |
| id3   | city1 | c     | value |
| id4   | city2 | a     | value |
| id5   | city2 | b     | value |
| id6   | city2 | c     | value |
| ...   | ...   | ...   | ...   |
| idN   | cityN | a     | value |
| idN+1 | cityN | b     | value |
| idN+2 | cityN | c     | value |
+-------+-------+-------+-------+ 
```

如您所见，它为每个城市都有一个子表，例如：

```
+-------+-------+
| Param | Value |
+-------+-------+
| a     | value |
| b     | value |
| c     | value |
+-------+-------+ 
```

所以我想加入所有子表并得到一个这样的表：

```
+-------+-------+-------+-----+-------+
| Param | city1 | city2 | ... | cityN |
+-------+-------+-------+-----+-------+
| a     | value | value | ... | value |
| b     | value | value | ... | value |
| c     | value | value | ... | value |
+-------+-------+-------+-----+-------+ 
```

任何想法我怎么能得到它？

先感谢您！

注1：城市数量不定。

注意 2：解决方案可以是 PL/SQL 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:02:29.330

为了获得您想要的结果，您需要对数据进行*透视*。虽然您说 plsql 可能是一个选项，但您没有指定您使用的 Oracle 版本。从 Oracle 11g 开始，该`PIVOT`功能可用。

如果您不使用 Oracle 119，则可以使用带有`CASE`表达式的聚合函数：

```
select param,
    max(case when city = 'city1' then value end) City1,
    max(case when city = 'city2' then value end) City2
from yourtable
group by param 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/23d0a/1)。

由于您声明您将拥有未知数量的`city`值，因此您将需要创建此查询的动态 sql 版本。您可以创建类似于此的过程：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(1000) := 'select param ';

    begin
        for x in (select distinct city from yourtable order by 1)
        loop
            sql_query := sql_query ||
                ' , max(case when city = '''||x.city||''' then value else null end) as '||x.city;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from yourtable group by param order by param';
        dbms_output.put_line(sql_query);

        open p_cursor for sql_query;
    end;
/ 
```

然后要得到你的结果，你可以使用以下（*注意：我在 TOAD 中使用了这个*）：

```
variable x refcursor
exec dynamic_pivot(:x)
print x 
```

您的查询结果将是：

```
| PARAM | CITY1 | CITY2 |
-------------------------
|     a | value | value |
|     b | value | value |
|     c | value | value | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:17:54.587

如果你有 10G，你可以使用 new `pivot`in 11G 或`model`从句。检查文档。

# ios - 如何在IOS中添加、旋转和拖线？

> ID：14899200
> 
> 赞同：0
> 
> 时间：2013-02-15T16:37:52.307
> 
> 标签：ios, objective-c, cocoa-touch

实现这一目标的最佳方法是什么？假设我有一个方法（未定义），它允许在屏幕上绘制一条具有固定大小和颜色的线条。然后这条线需要接受旋转手势和平移手势才能在屏幕上移动。它不会调整大小，只需要旋转和平移。

解决这个问题的最佳方法是什么？行应该是父视图的子视图还是子层？ios中画线的方法是什么？如何处理屏幕上的多行？我只是希望有人带领我在 ios 图形丛林中走上正确的道路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:55:20.477

首先，您需要考虑整个绘图的复杂程度。根据您的描述，听起来任务相对简单。如果是这样的话，那么 Core Graphics 将是正确的选择。如果绘图明显更复杂，您应该查看 OpenGL ES 和 GLKit，尽管使用 OGL 涉及更多工作

假设 Core Graphics，我将存储线的中心点、角度和长度，并使用手势识别器更改角度和大小，并使用基本触发计算要绘制的点。循环点以在视图`-drawRect`方法中绘制，并使用适当的 CG 函数绘制每个点 - 调用`[view setNeedsDisplay]`或`[view setNeedsDisplayInRect:areaToRedraw]`触发重绘。（第二种方法只重绘您指定的视图部分，可用于提高性能）。

Core Graphics 系列教程中的第一篇在[这里](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients).-“画线”部分将是最相关的。我没有做过这个（我使用了[这本书](http://www.amazon.co.uk/s/ref=nb_sb_ss_i_0_14/276-0850059-7547526?url=search-alias=aps&field-keywords=beginning%20ios%206%20development%20exploring%20the%20ios%20sdk)[的旧版](https://rads.stackoverflow.com/amzn/click/com/1430236051)），但我已经关注了这个网站上的很多其他人，发现他们很有帮助

作为旁注，如果屏幕上有多个线条，您可能需要一种方法来关注特定线条 - 一种简单的方法是找到最接近用户触摸点的线条中心点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:47:52.157

似乎您想要的绘制线条的最佳 API 是使用 Core Graphics。将此代码放在 UIView 的 drawRect 方法中：

```
/* Set the color that we want to use to draw the line */ 
[[UIColor redColor] set];
/* Get the current graphics context */ 
CGContextRef currentContext =UIGraphicsGetCurrentContext();
/* Set the width for the line */
CGContextSetLineWidth(currentContext,5.0f);
/* Start the line at this point */ 
CGContextMoveToPoint(currentContext,50.0f, 10.0f);
/* And end it at this point */ 
CGContextAddLineToPoint(currentContext,100.0f, 200.0f);
/* Use the context's current color to draw the line */
CGContextStrokePath(currentContext); 
```

对于手势识别，使用[UIGestureRecognizers](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)。使用以下方法

```
- (IBAction)handleRotate:(UIRotationGestureRecognizer *)recognizer
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer 
```

# c# - MVC4 .NET 4.5 异步操作方法不重定向

> ID：14899204
> 
> 赞同：4
> 
> 时间：2013-02-15T16:38:04.797
> 
> 标签：c#, asp.net-mvc, .net-4.5, async-await

我正在尝试在我的 MVC 4 应用程序中实现一个任务操作方法。一切都在后面工作，但它没有重定向。

```
public class AccountController : AsyncController 
{
    [HttpPost]
    [AllowAnonymous]
    public async Task<ActionResult> Login(LoginModel model, string returnUrl)
    {
        var client = new ClientHelper("login");
        account = await client.CallActionType<LoginModel, Account>(EnumHelpers.HttpType.Post, model);

        if (account != null)
        {
            validLogin = true;
        }

        return Redirect(returnUrl); // This is called but the page does not redirect, just sits a load
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T19:47:01.127

在做出我将它定向到异步操作的操作之后，我能够让它工作。我猜如果您有任何异步操作方法重定向到另一个，那么该重定向也必须是异步的。

这里只是一个简单的例子

```
public async Task<ActionResult> Login(LoginModel model) {
    //You would do some async work here like I was doing.

    return RedirectToAction("Action","Controller");//The action must be async as well
}
public async Task<ActionResult> Action() {//This must be an async task 
    return View();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-22T16:27:27.400

```
[Authorize]
    public class AccountController : Controller
    {
  [AllowAnonymous]
        public ActionResult Login(string returnUrl)
        {
            ViewBag.ReturnUrl = returnUrl;
            return View();
        }

        //
        // POST: /Account/Login
        [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public async Task<ActionResult> Login(LoginViewModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {

                // find user by username first
                var user = await UserManager.FindByNameAsync(model.Email);

                if (user != null)
                {
                    var validCredentials = await UserManager.FindAsync(model.Email, model.Password);

                    // When a user is lockedout, this check is done to ensure that even if the credentials are valid
                    // the user can not login until the lockout duration has passed
                    if (await UserManager.IsLockedOutAsync(user.Id))
                    {
                        ModelState.AddModelError("", string.Format("Invalid credentials. Please try again, or contact support", 60));
                    }
                    // if user is subject to lockouts and the credentials are invalid
                    // record the failure and check if user is lockedout and display message, otherwise,
                    // display the number of attempts remaining before lockout
                    else if (await UserManager.GetLockoutEnabledAsync(user.Id) && validCredentials == null)
                    {
                        // Record the failure which also may cause the user to be locked out
                        await UserManager.AccessFailedAsync(user.Id);

                        string message;

                        if (await UserManager.IsLockedOutAsync(user.Id))
                        {
                            message = string.Format("Invalid credentials. Please try again, or contact support", 60);
                        }
                        else
                        {
                            int accessFailedCount = await UserManager.GetAccessFailedCountAsync(user.Id);

                            int attemptsLeft = (5 - accessFailedCount);

                            message = string.Format("Invalid credentials. Please try again, or contact support.", attemptsLeft);
                        }

                        ModelState.AddModelError("", message);
                    }
                    else if (validCredentials == null)
                    {
                        ModelState.AddModelError("", "Invalid credentials. Please try again, or contact support.");
                    }
                    else
                    {
                        await SignInAsync(user, model.RememberMe);

                        // When token is verified correctly, clear the access failed count used for lockout
                        await UserManager.ResetAccessFailedCountAsync(user.Id);

                        return RedirectToLocal(returnUrl);
                    }
                }
                else
                {
                    ModelState.AddModelError("", string.Format("Invalid credentials. Please try again, or contact support", 60));
                }
            }
            // If we got this far, something failed, redisplay form
            return View(model);
        }

  [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public async Task<ActionResult> ForgotPassword(ForgotPasswordViewModel model)
        {
            if (ModelState.IsValid)
            {
                var user = await UserManager.FindByNameAsync(model.Email);
                if (user == null || !(await UserManager.IsEmailConfirmedAsync(user.Id)))
                {
                    // Don't reveal that the user does not exist or is not confirmed
                    //ModelState.AddModelError("", "The user either does not exist or is not confirmed.");
                    return RedirectToAction("ForgotPasswordConfirmation", "Account");
                }
                else
                {
                    var code = await UserManager.GeneratePasswordResetTokenAsync(user.Id);
                    var callbackUrl = Url.Action("ResetPassword", "Account",
                    new { UserId = user.Id, code = code }, protocol: Request.Url.Scheme);

                    string Data = System.IO.File.ReadAllText(Server.MapPath(@"~/documents/email_password_reset.txt"));

                    AspNetUser oUser = dbPortal.AspNetUsers.Find(user.Id);
                    // can't use string.format becuase of CSS                
                    Data = Data.Replace("{0}", oUser.Name);  // user name
                    Data = Data.Replace("{1}", callbackUrl); // URL to click
                    Data = Data.Replace("{2}", DateTime.Now.Year.ToString()); // copyright year
                    await UserManager.SendEmailAsync(user.Id, "Reset Password", Data);
                    return RedirectToAction("ForgotPasswordConfirmation", "Account");
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);

        }

        //
        // GET: /Account/ForgotPasswordConfirmation
        [AllowAnonymous]
       public async Task<ActionResult> ForgotPasswordConfirmation()
        {
            return View();
        }
} 
```

上述解决方案对我不起作用

# typo3 - TypoScript 中 SQL 到 Userfunc 的结果

> ID：14899211
> 
> 赞同：0
> 
> 时间：2013-02-15T16:38:42.927
> 
> 标签：typo3, typoscript

我对 Typo3/TypoScript 非常陌生，我想知道是否以及如何将 TypoScript 中的 sql 语句的结果提供给 php 函数。

到目前为止，我已经管理了 userFunc，但我对其余部分感到困惑。这是我的尝试：

```
temp.pidList = CONTENT
temp.pidList {
  table = tx_eepcollect_sessions
  #table = tt_content
  select {
    pidInList < plugin.tx_eepcollect_pi1.pid_list
   where {
      stdWrap.cObject = TEXT
      stdWrap.cObject {
        data = global : _COOKIE | tx_eepcollect_pi1
        wrap = ses_id='|'
      }
    }
  }
  renderObj = COA
  renderObj {
    10 = TEXT
    10.field = ses_data
    #30 = TEXT
    #30.data = debug:data
  }
}

includeLibs.user_idList = fileadmin/services/user_IdList.php
temp.ListOfIds = USER
temp.ListOfIds.userFunc = user_IdList->get_IdList
#temp.pidList = TEXT
#temp.pidList = {"1275":{"id":"1275","tx_eepcollect_pi1":{"prozess":"add","pid":"1275","ctrl":"1360858765"},"cHash":"e90b62584f3f0e4f71bf1100faf39d83"}}
temp.ListOfIds.userFunc.jsonList < temp.pidList

temp.mainContent = COA_INT
temp.mainContent.10 = TEXT
temp.mainContent.10.stdWrap.cObject < temp.ListOfIds 
```

输出是一个包含很多东西的数组，但不是数据库查询的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:59:12.977

TypoScript 不是一种编程语言，因此它不会以任何意义执行。您应该将 TS 视为 Core 的一组指令。因此，以下行：

```
temp.ListOfIds.userFunc.jsonList < temp.pidList 
```

不会将 temp.pidList 的结果**放入**temp.ListOfIds.userFunc.jsonList **，**正如您对编程语言所期望的那样 - 它只会复制一组指令，因此最后您将具有以下结构：

```
temp.ListOfIds = USER
temp.ListOfIds.userFunc = user_IdList->get_IdList
temp.ListOfIds.userFunc.jsonList = CONTENT
temp.ListOfIds.userFunc.jsonList.table = tx_eepcollect_sessions
[...] 
```

由于**jsonList**是您的自定义属性，您需要通过以下方法将[stdWrap带到它：](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Stdwrap/Index.html)

**打字稿**

```
temp.ListOfIds.userFunc.jsonList.cObject < temp.pidList 
```

**PHP**

```
$jsonList = $this->cObj->stdWrap($conf['jsonList'], $conf['jsonList.']); 
```

我假设，您是从**user_IdList**类的**get_IdList**方法调用它，并带有两个参数：*$content*和*$conf*。

作为额外的措施，您可以使用[kickstarter](http://typo3.org/extensions/repository/view/kickstarter)或[扩展构建器](http://typo3.org/extensions/repository/view/extension_builder)将其作为扩展，因此您可以更轻松地进行配置。

另一件事是，您的代码在这里有潜在的 SQL 注入漏洞：

```
 where {
      stdWrap.cObject = TEXT
      stdWrap.cObject {
        data = global : _COOKIE | tx_eepcollect_pi1
        wrap = ses_id='|'
      }
    } 
```

因此，您可以考虑阅读有关[标记的内容](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Select/Index.html)

# php - 加入 mysql 表与更新多个表

> ID：14899214
> 
> 赞同：0
> 
> 时间：2013-02-15T16:38:51.550
> 
> 标签：php, mysql, join

假设我在 mysql 中有两个表。
1\. 人（id、name、lastname） -[图片](http://i.stack.imgur.com/e8lHA.png)
2\. someothertable（id、name、lastname、action、数量） -[图片](http://i.stack.imgur.com/ZX6pU.png)

我想问一下，如果它真的很糟糕，一次更新两个表？例如，如果有人将 Robert Jackson 的姓氏更新为“Smith”，则执行 2 个查询：

```
mysql_query("UPDATE person SET lastname = '$lastname' WHERE id = '$id'");
mysql_query("UPDATE someothertable SET lastname = '$lastname' WHERE name = '$name' AND lastname = '$oldlastname'"); 
```

假设现在，你不会遇到 2 个相同的名字和姓氏（这只是一个例子）。是否**强烈**建议在显示表中的数据时加入这两个表，并仅在表中更改姓氏`person`？

我以前不需要使用`join`（从来没有足够大的数据库），我刚开始想知道是否有另一种方法可以做到这一点（而不是 2 个查询）。使用`join`将需要更改一些代码，但我已准备好这样做，如果它是正确的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:42:34.653

使用 a`join`与数据库的大小无关，它与规范化和数据完整性有关。您只能`lastname`在一张表中使用的原因是无需担心保持值同步。在您的示例中，如果这些调用在单个事务中，那么它们应该保持同步。除非其中一个在其他地方被更改，或者在数据库中手动更改。

因此，您可以选择拥有这些表格：

```
person (id, name, lastname)
someothertable (id, person_id, action, quantity) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:41:23.907

一种选择`someothertable`是`lastname`在`Person`. 您可以应用更新触发器，使其自动级联。

下面是一个例子：

```
Alter table someothertable add constraint foreign key (lastname) references Person (lastname) on delete cascade on update cascade; 
```

其通用版本如下所示：

```
Alter table [table-name] add constraint foreign key (field-in-current-table) references [other-table-name] (field-in-other-table) on delete cascade on update cascade; 
```

这可以应用于任何表中的任何字段。然后，您可以设置适合您的触发器。[这](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)是一个参考链接。

**你考虑过标准化吗？**

另一种选择是为`person`表中的每个分配`Person`一个唯一ID（即`PersonID`）。现在，在您引用的所有其他表中，您`person`通过唯一 ID 引用它们。这增加了许多优点：

1) 保持数据规范化 2) 保持数据完整性 3) 无需更新、触发器或级联 4) 只需要在一个地方进行更改

希望这可以帮助。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:41:39.663

您可以使用触发器，而不是使用 2 更新：[Tutorial here](http://www.sitepoint.com/how-to-create-mysql-triggers/)

# ios4 - iPhone 应用程序在获取内容更新期间会短暂冻结。这可以解决吗？

> ID：14899218
> 
> 赞同：0
> 
> 时间：2013-02-15T16:39:04.060
> 
> 标签：ios4

我有一个显示博客文章的 iPhone 应用程序。您可以深入研究一篇文章并查看它的整个故事。故事的底部是其他用户的评论。

该应用程序每 15 秒从服务器获取最新评论。如果有更多评论返回，应用程序会将它们添加到列表顶部。这一切都很好。

问题是，每当应用程序执行获取（每 15 秒）时，应用程序都会“冻结”大约 1 秒，有时是 2 秒。如果您正在滚动浏览评论，则此延迟会变得非常明显，因为在更新过程中滚动会停止。

此 iPhone 应用程序由远程的第三方开发团队开发。我已要求开发团队阻止“冻结”的发生，但他们坚持认为这是在 iPhone 中更新表格时的正常功能。

我不是 iPhone 开发人员，没有在那种环境中工作的知识或经验，所以我无法真正反对这一点。但是，我不得不想象有一些方法可以在后台获取和更新表，而不会导致用户体验滞后。

有人对此有任何想法吗？开发人员是否可以采用一些技术在更新过程中创造流畅的体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:04:46.947

他们在同步模式下获取评论，在这种模式下 UI 将挂起，直到它完全下载。告诉他们以异步模式下载内容，这样它将在后台获取评论，然后 UI 滚动将变得流畅。

示例代码：

```
[connection startAsynchronous];

https://gist.github.com/fspeirs/106457

http://allseeing-i.com/ASIHTTPRequest/How-to-use 
```

如果您发现任何困难，请告诉我。

# java - 根据java中的本地化更改语言

> ID：14899220
> 
> 赞同：4
> 
> 时间：2013-02-15T16:39:16.737
> 
> 标签：java, javascript, jsp

我有一个使用两种不同语言的项目。当我单击另一种语言时，语言文件可以正常工作并且消息会被翻译。我在我的 portlet 之上添加了语言 portlet，以便用户可以随时更改语言。到目前为止一切都很完美。问题：当用户是portlet 的某个页面并单击另一种语言时，他\她被重定向到portlet 的第一页（view.jsp）。更改语言后，如何使 portlet 保持在同一页面（jsp 文件）上？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T10:22:45.197

您可以尝试使用 jstl 资源包进行翻译。

这是参考。[堆栈溢出](https://stackoverflow.com/questions/12470928/jstl-resource-bundle-for-internationalization-and-localization)

# ember.js - 如何从 JSON 响应中自动序列化和加载 Ember Data 对象？

> ID：14899224
> 
> 赞同：1
> 
> 时间：2013-02-15T16:39:32.030
> 
> 标签：ember.js, ember-data

我有一个这样定义的 UserSession 模型：

```
App.UserSession = DS.Model.extend({
  authToken: attr('string'),
  firstName: attr('string'),
  lastName: attr('string')
}); 
```

当用户登录时，我正在向我的后端发出 AJAX POST 请求，该请求返回 JSON 表示，例如：

```
{
  "user_session": {
    "id": 1,
    "auth_token": "token_here",
    "first_name": "John",
    "last_name": "Doe"
  }
} 
```

现在通常，如果我要执行以下操作，Ember Data 会自动序列化 JSON 并添加对象：

```
App.UserSession.find(<session-id>); 
```

但是，当我进行手动 AJAX 调用时，是否有一种简单的方法可以将返回的 JSON 加载到 Ember 数据存储对象中，而无需手动反序列化它？

**为清楚起见进行了编辑：**

以下**不起作用**，但我希望找到一些执行上述操作的函数，它可能看起来类似于下面的调用。

```
App.UserSession.load(<session-json>); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T22:24:50.007

如果您使用的是最新版本 (11) 的 ember-data，则加载数据会发生重大变化。

> **加载数据中**
> 
> 以前，store 的某些功能，例如 load()，假定使用单个适配器。
> 
> 如果您想在应用程序不要求的情况下从后端加载数据（例如，通过 WebSockets 流），请使用此 API：
> 
> ```
> store.adapterForType(App.Person).load(store, App.Person, payload); 
> ```
> 
> 此 API 还将处理侧载和嵌入数据。我们计划在未来添加这个 API 的更方便的版本。

[https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md#loading-data](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md#loading-data)

您将要获取商店的实例。如果您在控制器中，您可以执行以下操作：

```
@get('store') 
```

你也可以这样做：

```
App.__container__.lookup('store:main') 
```

不建议这样做，因为它使用的是内部 API（由围绕容器调用的 __ 指出），不能保证不会更改。

拥有商店实例后，您可以在 UserSession 中加载：

```
@get('store').adapterForType(App.UserSession).load(@get('store'), App.UserSession, sessionJson['user_session']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T20:09:49.897

先前的答案已过时，但概念仍然相同。

我相信处理这个问题的正确方法是`this.get('store').pushPayload({data: ...})`

# javascript - 强制浏览器缩放到固定纵横比

> ID：14899226
> 
> 赞同：0
> 
> 时间：2013-02-15T16:39:36.283
> 
> 标签：javascript, jquery, html

如果用户正在缩放浏览器窗口，是否有可能强制具有固定的纵横比。例如

```
$('window').on('resize', ... fixed aspect ratio) 
```

或者这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:57:23.450

window.resizeTo(w,h) 是您应该寻找的。但是，到目前为止，对于未使用 window.open 打开的窗口，这在 Firefox 和 Chrome 中不起作用。令人惊讶的是，IE 10 仍然允许此方法在其基本窗口上运行。

MDN：[https ://developer.mozilla.org/en-US/docs/DOM/window.resizeTo](https://developer.mozilla.org/en-US/docs/DOM/window.resizeTo)

# angularjs - 使用动态类名从自定义指令中的 Angular 元素获取 CSS

> ID：14899233
> 
> 赞同：1
> 
> 时间：2013-02-15T16:40:12.287
> 
> 标签：angularjs, angularjs-directive

我有一个自定义指令，它使用链接函数中元素的背景颜色：

```
.directive('ktMouseover', function($log) {
  return {
    restrict: "AC",
    link: function(scope, elm, attrs) {
      if ($(".ie8, .ie7").length === 0) {
        console.log(elm.attr("class"));
        var oldBackgroundColor = elm.css("background-color") || elm.css("background")
          , colors = attrs["ktMouseover"].split("|")[0] || "#fec|#f55"
          , timings = attrs["ktMouseover"].split("|")[1] || "75|150"
          , newBackgroundColor = colors.split(":")[0] || "#fec"
          , newDangerColor = colors.split(":")[1] || "#f55"
          , fadeInTime = parseInt(timings.split(":")[0]) || 75
          , fadeOutTime = parseInt(timings.split(":")[1]) || 150;

        elm.mouseenter(function() {
          if (elm.hasClass("inactive")) return;
          $(this).animate({
            "backgroundColor":($(this).hasClass("danger") ? newDangerColor : newBackgroundColor)
          }, fadeInTime);
        }).mouseleave(function() {
          $(this).animate({
            "backgroundColor": (oldBackgroundColor ? oldBackgroundColor : "transparent")
          }, fadeOutTime);
        });
      }
    }
  };
}) 
```

HTML 片段：

```
 <li class="{{child.type()}}"
            ng-include="'/partials/tree.html'"
            id="container_{{child.id()}}" 
            kt-mouseover=":#f55|75:150" 
            ng-click="getChildren(child)" 
            ng-repeat="child in vault.children()">
        </li> 
```

当我最初编写此代码时，我为标签使用了一个静态类名（这就是我在 CSS 中设置背景颜色的方式）。现在我需要这些指令有一个动态的类名，这突然使得无法从元素中获取背景颜色，因为类名尚未应用于它。

如何在 AngularJS 中以惯用方式完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:13:00.793

只需声明 oldBackgroundColor 变量而不初始化它，并在第一次将其设置在 mouseenter 中。我不知道这是否真的是最好的方法，但它有效：

```
.directive('ktMouseover', function($log) {
  return {
    restrict: "AC",
    link: function(scope, elm, attrs) {
      if ($(".ie8, .ie7").length === 0) {

        // ***NOT INITIALIZED***
        var oldBackgroundColor
          , colors = attrs["ktMouseover"].split("|")[0] || "#fec|#f55"
          , timings = attrs["ktMouseover"].split("|")[1] || "75|150"
          , newBackgroundColor = colors.split(":")[0] || "#fec"
          , newDangerColor = colors.split(":")[1] || "#f55"
          , fadeInTime = parseInt(timings.split(":")[0]) || 75
          , fadeOutTime = parseInt(timings.split(":")[1]) || 150;

        elm.mouseenter(function() {
          if (elm.hasClass("inactive")) return;

          // ***INITIALIZED HERE INSTEAD***
          if (!oldBackgroundColor) oldBackgroundColor  = elm.css("background-color") || elm.css("background");
          $(this).animate({
            "backgroundColor":($(this).hasClass("danger") ? newDangerColor : newBackgroundColor)
          }, fadeInTime);
        }).mouseleave(function() {
          $(this).animate({
            "backgroundColor": (oldBackgroundColor ? oldBackgroundColor : "transparent")
          }, fadeOutTime);
        });
      }
    }
  };
}) 
```

# actionscript-3 - 使用 ActionScript 修改 flex hslider 上的标签

> ID：14899242
> 
> 赞同：0
> 
> 时间：2013-02-15T16:40:30.303
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个 HSlider，它有两个标签，一个开始年份和结束年份。每年结束时，结束年份都会增加，我希望滑块上的标签显示最新的结束年份。

我尝试更改 slider.labels[1] 并且当我在调试中查看它时它会更改值，但不是在屏幕上。我尝试了一个可绑定变量，我再次可以看到标签 [1] 在调试中发生了变化，但该值未显示在屏幕上。

```
hsStart.labels[0] = acResult[0].RATE_MIN;
hsStart.labels[1] = acResult[0].UP_RANGE; 
```

或者

```
_aryLabels[0] = acResult[0].RATE_MIN;
_aryLabels[1] = acResult[0].UP_RANGE;
hsStart.invalidateDisplayList();

<mx:HSlider minimum="1981" maximum="2000" snapInterval="1" id="hsStart" tickInterval="4" liveDragging="true" labels="{_aryLabels}" 
    width="527" thumbCount="2" change="updateYear(event);" dataTipFormatFunction="formatSlider" allowThumbOverlap="true" horizontalCenter="190" top="118"
    sliderThumbClass="Classes.Input.BigThumbClass"  fillColors="[0xff0000, 0x00ff00, 0xff0000, 0x00ff00]"/> 
```

这看起来很简单，有人有什么想法吗？

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:36:54.783

你可以这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" 
            layout="absolute" minWidth="955" minHeight="600" creationComplete="init()">
<mx:Script>
    <![CDATA[
        [Bindable]private var lastYear:int = 2008;

        private function init():void
        {
            updateLabels();
        }

        protected function onIncYear(event:MouseEvent):void
        {
            lastYear++;
            hsStart.maximum = lastYear;
            updateLabels();
        }

        private function updateLabels():void
        {
            hsStart.labels = [hsStart.minimum, hsStart.maximum];
        }
    ]]>
</mx:Script>

<mx:HSlider 
    id="hsStart"
    minimum="1981" 
    maximum="{lastYear}" 
    snapInterval="1"  
    tickInterval="4" 
    liveDragging="true" 
    width="527" 
    thumbCount="2" 
    allowThumbOverlap="true" 
    horizontalCenter="190" 
    top="118"
    fillColors="[0xff0000, 0x00ff00, 0xff0000, 0x00ff00]"/>

<mx:Button x="698" y="36" label="Increment Year" click="onIncYear(event)"/>

</mx:Application> 
```

# css - SVG 未在 Google 地图的可见区域之外绘制

> ID：14899244
> 
> 赞同：4
> 
> 时间：2013-02-15T16:40:34.957
> 
> 标签：css, html, google-maps, svg, d3.js

我使用 Mike Bostok 的[示例](http://bl.ocks.org/899711)将 d3 与 Google Maps 一起使用来显示等高线图。这是我的代码：

[http://bl.ocks.org/4959573](http://bl.ocks.org/4959573)

一切似乎都很好，除了等高线图没有绘制在谷歌地图的可见区域之外。我设法通过使用地图的尺寸​​来解决这个问题：

```
#map {
  width: 100%;
  height: 3000px;
  top: -1000px;
} 
```

这不是最优的，也不能完全解决问题，因为如果我放大太多，绘图的大小将迅速超过地图的大小，并且平移地图会使其可见。

有没有其他方法可以解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T23:53:05.030

*OP对自己问题的解决方案，从评论中引用并重新格式化：*

我将地图样式更改为：

```
#map {
  width: 100%;
  height: 100%;
} 
```

轮廓层的样式修改如下：

```
cont_layer
    .attr("width","8000px")
    .attr("height","8000px")
    .style("position","absolute")
    .style("top","-4000px")
    .style("left","-4000px"); 
```

SVG 路径的 x 和 y 坐标必须移动 +4000px 以进行补偿。

# database - 在java中创建和连接数据库

> ID：14899249
> 
> 赞同：0
> 
> 时间：2013-02-15T16:40:46.570
> 
> 标签：database, glassfish-3, netbeans-6.9

我正在使用 Netbeans 6.9.1 和 GlassFish Server 3。

这是我第一次尝试使用 Java 中的数据库进行编程。

我已经为我的数据库绘制了一个 ER 图。我想在 java 中创建一个数据库，包括表和字段。然后，我想将我的数据库与服务器连接。我应该将它与 GlassFish 服务器连接吗？我想提交查询并获得结果。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:47:17.773

首先，您应该阅读 JDBC。那是用于访问数据库的 Java 语言库。听起来您希望自动创建表。我建议你研究一下 Hibernate 或 Apache Cayenne。这两个都是 ORM 框架，它们将大量 SQL 排除在流程之外，让您专注于编写 Java 类。

# php - PHP，如果 A 则 B 和 C 否则 D 和 E

> ID：14899253
> 
> 赞同：0
> 
> 时间：2013-02-15T16:41:06.160
> 
> 标签：php, if-statement, conditional

如何正确编写条件语句，如果 A 为真，则执行 B AND C，否则执行 D 和 E。

```
if (empty($A)) { B=0 AND C=0; }
  else {D=X AND E=Y; } 
```

一般来说，这看起来对吗？

这是我的实际代码：

```
if (empty($_FILES['file']['name'])) {
$filelink = '' AND $filetext = '';
} else {
$filelink = mysql_real_escape_string($location) AND
$filetext = 'Open File';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:41:57.367

这就是大括号的用途；他们创建了一个块。该块中的任何内容都将执行。您可以在同一个块中放置任意数量的语句：

```
if (empty($_FILES['file']['name'])) {
    $filelink = '';
    $filetext = '';
} else {
    $filelink = mysql_real_escape_string($location);
    $filetext = 'Open File';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:42:14.513

```
if (empty($_FILES['file']['name'])) {
    $filelink = '';
    $filetext = '';
} else {
    $filelink = mysql_real_escape_string($location);
    $filetext = 'Open File';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:42:34.543

你不需要`AND`语句之间的

```
if (empty($_FILES['file']['name'])) {
    $filelink = '';
    $filetext = '';
} else {
    $filelink = mysql_real_escape_string($location)l
    $filetext = 'Open File';
} 
```

如果该`if`语句的计算结果为真，则将运行下一个匹配的大括号之间的所有代码。如果为 false，则将运行 else 之后匹配的大括号之间的所有代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:45:50.943

AND 是一个运算符。

它是一个逻辑运算符，有两个操作数。左右或 L+R。

它首先计算左侧操作数 L，然后将其转换为布尔值。如果值为 false，则 R 永远不会执行，并且运算符返回 false。如果为真，则评估 R 并将其转换为布尔值。如果 bool 为真，则运算符返回真，否则返回假。

因此，从您所说的内容来看，您希望使用 AND 运算符执行语句以实现永远不会使用的临时布尔值。

从这个角度来看，你的逻辑是错误的。而是使用“;” 用于分隔语句的标记。而不是说 (A AND B) 说 {A;B;} 然后 A 和 B 都将被评估。

# kohana-3 - Kohana 3.3 & Kostache - 无法在表单中显示 ORM 验证错误

> ID：14899257
> 
> 赞同：0
> 
> 时间：2013-02-15T16:41:24.563
> 
> 标签：kohana-3, kohana-orm, kostache

我正在尝试使用 Kohana 3.3 和 Kostache 作为我的模板系统为我的网站创建一个用户注册页面。我很难使用表单验证来在同一页面上显示验证错误。现在，当我单击表单提交按钮并在表单中发送所有空值（用户名、电子邮件和密码）时，我得到的只是要刷新的表单，当我应该收到验证错误时，例如用户名为空，电子邮件为空等（我使用 Model_Auth_User）。

我不知道我做错了什么。

模型：

```
class Model_User extends Model_Auth_User
{
    public function rules()
    {
        return array(
            'username' => array(
                array('not_empty'),
                array('alpha_dash'),
                array('min_length', array(':value', 4)),
                array('max_length', array(':value', 20)),
                array(array($this, 'unique'), array('username', ':value')),
            ),
            'email' => array(
                array('not_empty'),
                array('min_length', array(':value', 4)),
                array('max_length', array(':value', 127)),
                array('email'),
            ),
        );
    }
} 
```

控制器：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_User extends Controller {

    public function action_index()
    {
    }

    public function action_login()
    {
        $renderer = Kostache_Layout::factory();
        $this->response->body($renderer->render(new View_FrontEnd_User, 'frontend/login'));
    }

    public function action_signup()
    {
        $renderer = Kostache_Layout::factory();
        $this->response->body($renderer->render(new View_FrontEnd_User, 'frontend/signup'));
    }

    public function action_createuser()
    {
        $signupView = new View_FrontEnd_User();

        try {
            $user = ORM::factory('User');
            $user->username = $this->request->post('username');
            $user->password = $this->request->post('password');
            $user->email = $this->request->post('email');
            $user->save();
        }
        catch (ORM_Validation_Exception $e)
        {
            $errors = $e->errors();
            $signupView->errors = $errors;
        }

        $renderer = Kostache_Layout::factory();
        $this->response->body($renderer->render(new View_FrontEnd_User, 'frontend/signup'));
    }
} 
```

看法

```
<?php defined('SYSPATH') or die('No direct script access.');

class View_FrontEnd_User extends View_Main
{
    public $errors = array();

} 
```

注册.mustache

```
<p>

<form action="user/createuser" method="post">
  <fieldset style="width: 20em;">

    <legend>User Registration</legend>

    <label>Enter your username</label>
    <input type="text" name="username" />

    <label for="username" class="error">
        {{#errors}}{{username}}{{/errors}}
    </label>

    <label>Enter your password</label>
    <input type="password" name="password" />

    <label for="password" class="error">
        {{#errors}}{{password}}{{/errors}}
    </label>

    <label>Email</label>
    <input type="text" name="email" />

    <input type="submit" value="Submit" class="nice blue radius button" />

  </fieldset>
</form>

{{#errors}}{{.}}{{/errors}}

</p> 
```

非常感谢您能给我的任何指示。我已经花了几个小时在这上面，但仍然无法让它工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:47:52.823

改变

`$this->response->body($renderer->render(new View_FrontEnd_User, 'frontend/signup'));`

到

`$this->response->body($renderer->render($signupView, 'frontend/signup'));`

# powershell - Powershell 中的 Remove-QADObject 需要交互。需要一条出路

> ID：14899258
> 
> 赞同：-1
> 
> 时间：2013-02-15T16:41:27.710
> 
> 标签：powershell

我正在尝试编写一个 powershell 脚本来删除非常旧的 AD 帐户。

它可以工作，但是当我从 PowershellGUI 运行它时，它会提示您单击是/否。我查看了[PowerGUI 的 Remove-QADObject 文档](http://wiki.powergui.org/index.php/Remove-QADObject)，但没有提到静默模式。有谁知道解决方法？

```
# Get the date that is about 6 months ago from today.
$dateObj = (Get-Date).AddDays(-180)

$oldADUsers = Get-QADUser -SearchRoot "OU=expired_test,OU=Students,DC=..." -AccountExpiresBefore $dateObj

foreach ($user in $oldADUsers)
{
    Remove-QADObject $user
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:02:33.247

尝试使用`-Force`和`-Confirm:$false`。`-Confirm:$false`告诉 cmdlet 不提示确认。`-Force`可能不需要，但有时需要。我没有 QAD 模块来测试这里是否需要它，但包含它不会造成任何伤害。

```
# Get the date that is about 6 months ago from today.
$dateObj = (Get-Date).AddDays(-180)

$oldADUsers = Get-QADUser -SearchRoot "OU=expired_test,OU=Students,DC=..." -AccountExpiresBefore $dateObj

foreach ($user in $oldADUsers)
{
    Remove-QADObject $user -Force -Confirm:$false
} 
```

# java - 如何根据位置输入使图像移动？

> ID：14899265
> 
> 赞同：0
> 
> 时间：2013-02-15T16:41:53.590
> 
> 标签：java, android

试图使图像代表人的位置，但不确定如何将变量 x 和 y 传递到 onDraw ...

我让它检索我的位置，然后绘制符号，它以前在我只有数字时工作

```
package com.corey.navigationtest;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.FrameLayout.LayoutParams;
import android.widget.Toast;

public class MainActivity extends Activity {

private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 5; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

protected LocationManager locationManager;
protected Button retrieveLocationButton;
protected Button buttonSend;

Canvas canvas; //Your canvas to draw on
LinearLayout myLayout; //The layout that holds the surfaceview
SurfaceView surface;
SurfaceHolder surfaceHolder;

public double oldlat = 0;
public double oldlong = 0;
public double newlat;
public double newlong;
public int count = 0;

DisplayMetrics metrics;
int width;
int height;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);

    String provider = locationManager.getBestProvider(criteria, true);

    locationManager.requestLocationUpdates(
            provider,
            MINIMUM_TIME_BETWEEN_UPDATES,
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );
    buttonSend = (Button) findViewById(R.id.buttonSend);
    retrieveLocationButton.setOnClickListener(onClickListener);
    buttonSend.setOnClickListener(onClickListener);   
    myLayout = (LinearLayout) findViewById(R.id.myLayout);

    LinearLayout.LayoutParams params_surfaceCanvas = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);

    surface = new SurfaceView(this);
    surface.setLayoutParams(params_surfaceCanvas);

          //Assign a surfaceholder to the surface
    surfaceHolder = surface.getHolder();

    myLayout.addView(surface);
    canvas = new Canvas();

    metrics = this.getResources().getDisplayMetrics();
    width = metrics.widthPixels;
    height = metrics.heightPixels;

}   

private OnClickListener onClickListener = new OnClickListener () {
    @Override
    public void onClick(final View v) {
        switch(v.getId()) {
            case R.id.buttonSend:
                Location location = locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);
                String phoneNo = "8473027766";
                 String sms = String.format(
                            "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                            location.getLongitude(), location.getLatitude()
                 );
                 try {
                    SmsManager smsManager = SmsManager.getDefault();
                    smsManager.sendTextMessage(phoneNo, null, sms, null, null);
                    Toast.makeText(getApplicationContext(), "SMS Sent!",
                                Toast.LENGTH_SHORT).show();
                 } catch (Exception e) {
                    Toast.makeText(getApplicationContext(),
                        "SMS failed, please try again later!",
                        Toast.LENGTH_SHORT).show();
                    e.printStackTrace();
                 }
            break;
            case R.id.retrieve_location_button:             
                    showCurrentLocation();              
            break;
        }

    }
};

protected void showCurrentLocation() {
    Location location = locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);
    if (location != null) {

         String message = String.format(
                "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
         );
         Toast.makeText(MainActivity.this, message,
                Toast.LENGTH_SHORT).show();
    }
}  
private class MyLocationListener implements LocationListener {
    public void onLocationChanged(Location location) {
        newlat = location.getLatitude();
        newlong = location.getLatitude();
        String message1 = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
         );
         Toast.makeText(MainActivity.this, message1,
                Toast.LENGTH_SHORT).show(); 
```

这些是我想要制作图像坐标的变量：

```
 double x;
        double y;
        x = ((newlong - (-81.366553))/.003803)*width;
        y = ((newlat - 41.273816)/.001709)*height; 
```

这是其余的代码

```
 if ((newlat < 41.274871 & newlong > -81.3659) & (oldlong < -81.3659 || oldlat > 41.274871)) {
            String phoneNo = "8473027766";
            count++;
            String sms = String.format(
                    "You are behind enemy lines \n Longitude: %1$s \n Latitude: %2$s \n Count: %3$s",
                    location.getLongitude(), location.getLatitude(), count
            );
            try {
                SmsManager smsManager = SmsManager.getDefault();
                smsManager.sendTextMessage(phoneNo, null, sms, null, null);
                Toast.makeText(getApplicationContext(), "SMS Sent!",
                Toast.LENGTH_SHORT).show();
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                "SMS failed, please try again later!",
                Toast.LENGTH_SHORT).show();
                e.printStackTrace();
            }

        }
        onDraw();
        oldlat = newlat;
        oldlong = newlong;    
    }
    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(MainActivity.this, "Provider status changed",
                Toast.LENGTH_SHORT).show();
    }
    public void onProviderDisabled(String s) {
        Toast.makeText(MainActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_SHORT).show();
    }
    public void onProviderEnabled(String s) {
        Toast.makeText(MainActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_SHORT).show();
    }
}

public void onDraw() {
    //Starts a thread
    new Thread(new Runnable() {
        public void run() {
            while(true) {
                //Loops until surfaceHolder is valid to use
                if (surfaceHolder.getSurface().isValid()) {
                    Log.i("Drawing","Drawing"); 
                    //Always lock the canvas if you want to draw in surfaceview
                    canvas = surfaceHolder.lockCanvas();

                    Bitmap image2 = BitmapFactory.decodeResource(getResources(), R.drawable.vertical);
                    Bitmap image1 = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
                    canvas.drawColor(Color.WHITE); //The background color of the canvas
                    canvas.drawBitmap(image2,0,0, null);                        
                    canvas.drawBitmap(image1, x, y, null);

                    //Don't forget to unlock it after you draw in the surfaceview
                    surfaceHolder.unlockCanvasAndPost(canvas);

                    //breaks the while and end the thread.
                    break;
                }   
            }   
        }
    }).start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:16:30.900

您应该为每个图像使用[ImageView 。](http://developer.android.com/reference/android/widget/ImageView.html)这将使一切变得简单，因为您只需调用`setX(...)`and `setY(...)`，您的应用程序就会自动在正确的位置重绘您的图像。

它还将大大减少您的`onDraw()`方法执行所需的内存和时间 - 因为它当前每次都在创建新的位图（而不是破坏旧的位图），您的应用程序不会持续太多的点击。

# pointers - Fortran2003：指向函数的过程指针返回指向多态类型的指针

> ID：14899268
> 
> 赞同：6
> 
> 时间：2013-02-15T16:41:57.733
> 
> 标签：pointers, polymorphism, fortran, fortran2003

对于一个新项目，我正在考虑使用 Fortran2003 的面向对象功能。我尝试过的一件事涉及指向一个函数（不是子例程）的过程指针，该函数返回一个指向多态类型的指针。我想知道这样的构造是否合法，因为我从不同的编译器得到混合结果（见下文）。

作为一个具体的例子，考虑下面的函数接口：

```
abstract interface
   function if_new_test(lbls) result(t)
      import :: test_t
      class(test_t),pointer       :: t
      character(len=*),intent(in) :: lbls(:)
   end function if_new_test
end interface 
```

并且使用代码应该有一个过程指针，可以指向具有此接口的函数：

```
procedure(if_new_test),pointer :: nt 
```

我在问这是否合法，因为 gfortran (4.7.2) 抱怨此过程指针声明并带有以下消息：

> 错误：(1) 处的 CLASS 变量“nt”必须是虚拟的、可分配的或指针

我不明白这个错误信息，因为`nt`它本身就是一个指针，它指向的函数返回的也是一个指针。

作为参考，示例的完整源代码如下。拳头，包含我的派生类型、接口和函数/子例程的模块：

```
module test_m

   implicit none

   type :: test_t
      character(len=10) :: label
      contains
      procedure :: print => print_test
   end type test_t

   type,extends(test_t) :: test2_t
      character(len=10) :: label2
      contains
      procedure :: print => print_test2
   end type test2_t

   abstract interface
      function if_new_test(lbls) result(t)
         import :: test_t
         class(test_t),pointer       :: t
         character(len=*),intent(in) :: lbls(:)
      end function if_new_test
      subroutine if_make_test(t,lbls)
         import :: test_t
         class(test_t),pointer       :: t
         character(len=*),intent(in) :: lbls(:)
      end subroutine if_make_test
   end interface

   contains

   subroutine print_test(self)
      implicit none
      class(test_t),intent(in) :: self
      print *, self%label
   end subroutine print_test

   subroutine print_test2(self)
      implicit none
      class(test2_t),intent(in) :: self
      print *, self%label, self%label2
   end subroutine print_test2

   function new_test(lbls) result(t)
      implicit none
      class(test_t),pointer       :: t
      character(len=*),intent(in) :: lbls(:)
      call make_test(t,lbls)
   end function new_test

   function new_test2(lbls) result(t)
      implicit none
      class(test_t),pointer       :: t
      character(len=*),intent(in) :: lbls(:)
      call make_test2(t,lbls)
   end function new_test2

   subroutine make_test(t,lbls)
      implicit none
      class(test_t),pointer       :: t
      character(len=*),intent(in) :: lbls(:)
      allocate(test_t::t)
      t%label = lbls(1)
   end subroutine make_test

   subroutine make_test2(t,lbls)
      implicit none
      class(test_t),pointer       :: t
      character(len=*),intent(in) :: lbls(:)
      allocate(test2_t::t)
      select type(t) ! so the compiler knows the actual type
         type is(test2_t)
            t%label  = lbls(1)
            t%label2 = lbls(2)
         class default
            stop 1
      end select
   end subroutine make_test2  

end module test_m 
```

以及使用这个模块的主程序：

```
program test

   use test_m
   implicit none

   class(test_t),pointer           :: p
   procedure(if_make_test),pointer :: mt
   procedure(if_new_test),pointer  :: nt

   mt => make_test
   call mt(p,["foo"])
   call p%print
   deallocate(p)

   mt => make_test2
   call mt(p,["bar","baz"])
   call p%print
   deallocate(p)

   p => new_test(["foo"])
   call p%print
   deallocate(p)

   p => new_test2(["bar","baz"])
   call p%print
   deallocate(p)

   nt => new_test
   p => nt(["foo"])
   call p%print
   deallocate(p)

   nt => new_test2
   p => nt(["bar","baz"])
   call p%print
   deallocate(p)

end program test 
```

**该程序首先通过子例程** `make_test`和创建对象`make_test2`，并且在我的测试中，这适用于我尝试过的所有编译器。接下来，通过直接调用**函数** `new_test`和创建对象`new_test2`，这在我的测试中也适用。最后，对象应该再次通过这些函数创建，但间接通过过程指针创建`nt`。

如上所述，gfortran (4.7.2) 不编译`nt`.

ifort (12.0.4.191) 在行上产生内部编译器错误`nt => new_test`。

pgfortran (12.9) 在没有警告的情况下编译，并且可执行文件产生预期的结果。

那么，根据 Fortran2003，我试图做的事情是非法的，还是编译器对这些功能的支持仍然不足？我应该只使用子程序而不是函数（因为这似乎有效）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:56:54.657

您的代码似乎很好。我可以用 Intel 13.0.1 和 NAG 5.3.1 编译它而没有任何问题。较旧的编译器可能会因 Fortran 2003 的“花哨”功能而存在问题。

根据问题，您还可以使用可分配类型而不是指针。另一方面，应该是更多的内存泄漏证明，您将无法作为函数的结果返回多态类型：

```
module test_m
  implicit none

  type :: test_t
    character(len=10) :: label
  contains
    procedure :: print => print_test
  end type test_t

  type,extends(test_t) :: test2_t
    character(len=10) :: label2
  contains
    procedure :: print => print_test2
  end type test2_t

  abstract interface
    function if_new_test(lbls) result(t)
      import :: test_t
      class(test_t), allocatable :: t
      character(len=*),intent(in) :: lbls(:)
    end function if_new_test

    subroutine if_make_test(t,lbls)
      import :: test_t
      class(test_t), allocatable :: t
      character(len=*),intent(in) :: lbls(:)
    end subroutine if_make_test
  end interface

contains

  subroutine print_test(self)
    class(test_t), intent(in) :: self
    print *, self%label
  end subroutine print_test

  subroutine print_test2(self)
    class(test2_t), intent(in) :: self
    print *, self%label, self%label2
  end subroutine print_test2

  subroutine make_test(t,lbls)
    class(test_t), allocatable :: t
    character(len=*),intent(in) :: lbls(:)
    allocate(test_t::t)
    t%label = lbls(1)
  end subroutine make_test

  subroutine make_test2(t,lbls)
    class(test_t), allocatable :: t
    character(len=*),intent(in) :: lbls(:)
    allocate(test2_t::t)
    select type(t) ! so the compiler knows the actual type
    type is(test2_t)
      t%label  = lbls(1)
      t%label2 = lbls(2)
    class default
      stop 1
    end select
  end subroutine make_test2

end module test_m

program test
   use test_m
   implicit none

   class(test_t), allocatable :: p
   procedure(if_make_test), pointer :: mt

   mt => make_test
   call mt(p, ["foo"])
   call p%print
   deallocate(p)

   mt => make_test2
   call mt(p, ["bar","baz"])
   call p%print
   deallocate(p)

end program test 
```

One more remark: The implicit none statement on the module level is "inherited" by the module procedures, so you do not have to issue it in every subroutine extra.

# windows - 如何获取 RDP 会话的 Windows 主机密钥？

> ID：14899269
> 
> 赞同：11
> 
> 时间：2013-02-15T16:41:59.323
> 
> 标签：windows, windows-7, rsa, rdp

我的公司管理员刚刚在我写这个问题的时候找到了答案，所以我在这里为其他人发布它：

* * *

我使用 xfreerdp 通过 RDP 从 Linux 连接到 Windows 7 机器。通常，我提供我的凭据和机器的 IP 地址，一切正常。有一天，我进来尝试连接，结果却收到了这样的信息：

```
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the host key sent by the remote host is
xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx 
```

（x 是实际数字。）我检查了我正在连接的机器的 Linux known_hosts 文件，是的，确实，机器的 RSA 指纹确实发生了变化。因此，我询问了我公司的管理员，他是否进行了一些更新或任何会改变 Windows 用于 RDP 会话的关键操作。他说他所知道的一切都没有改变。在这一点上，常识和我的安全知识告诉我，我不应该连接，直到我物理登录机器并检查确实存在用于 RDP 的新 RSA 主机密钥。（如果没有，那么很可能发生了中间人攻击。）

问题是，当我登录物理机查看 RSA 密钥是否已更改时，我不知道去哪里查看它。我在网上搜索并无法在 Windows 7 中找到任何方法来查看关键 RDP 会话使用的 RSA 指纹。有谁知道我在哪里可以查看密钥？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T16:41:59.323

以下是有关如何在 Windows 7 中获取 RDP 会话的 RSA 主机密钥指纹的分步指南：

首先，单击开始按钮（或按键盘上的 Windows 键）。在搜索中键入“mmc”，然后选择“mmc.exe”（Microsoft 管理控制台）。

![步骤1](../Images/53551dd78c3d463b3fff71cf16b61edb.png)

当它打开时，单击文件->添加/删除管理单元... 从左侧列表（可用管理单元）中，选择“证书”并单击“添加 >”

![第2步](../Images/5a71ddbd7c61e76360e234fb48d78858.png)

选择“计算机帐户”单击下一步。确保选择“本地计算机”，然后单击“完成”。单击“确定”退出添加/删除管理单元屏幕。

![第 3 步](../Images/e1876de23bc200406b9616c78c98e0a5.png)

现在您应该回到 MMC 主窗口，但左侧列表中应该有一个名为“证书（本地计算机）”的管理单元。展开它并展开“远程桌面”，然后展开“证书”。窗口的中间区域应该至少出现一个证书。双击它，然后选择“详细信息”选项卡。向下滚动到底部，将会有关于证书中指定的密钥的详细信息，包括“Thumbprint”字段，它对应于 Linux 的 xfreerdp 在您尝试连接到机器时报告的主机密钥指纹。

![第4步](../Images/a0b1b92d31670f0af19cf3b8425721ff.png)

您还会注意到“指纹”字段中还有另外两个十六进制数字。（xfreerdp 报告的指纹长度为 38 个十六进制数字，而指纹字段有 40 个）。去掉指纹中的前两个十六进制数字以获得 RDP 主机密钥的 RSA 指纹（我不知道这些数字是什么）。

# sql-server - SSRS 中的动态字段名称

> ID：14899272
> 
> 赞同：4
> 
> 时间：2013-02-15T16:42:01.367
> 
> 标签：sql-server, variables, dynamic, reporting-services

我正在尝试检索字段的值，但该字段的名称需要是动态的。

IE

```
=iif(Fields!Year1.Value = 1, 0, 1) 
```

但我需要`Year1`从另一个数据集返回的部分，所以它`Year1`是动态的（可能是`Year2`，`Year3`等等....）

我有一个返回数据的字段

```
 =First(Fields!YearCount.Value, "YearColumn"). 
```

这个表达式本身将返回`Year1`, `Year2`etc.. 部分，但是我正在努力将它与 if 语句连接起来。

我试过了：

```
=iif(Fields!(First(Fields!YearCount.Value, "YearColumn")).Value = 1, 0, 1) 
```

例如。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T17:06:32.427

在 SSRS 中引用字段的符号是：

```
=Fields!FieldName 
```

或者然后

```
=Fields(FieldName) 
```

所以在你的情况下，试试这个：

```
=Fields(First(Fields!YearCount.Value, "YearColumn")).Value 
```

因为*内部*函数应该返回`Year1`（或另一个值），所以你应该得到如下表达式：

```
=Fields("Year1").Value 
```

这应该会给你你需要的价值。

# java - 新的 Operator 和 String 在这个程序中做了什么？

> ID：14899275
> 
> 赞同：2
> 
> 时间：2013-02-15T16:42:08.963
> 
> 标签：java, string, char

我是 Java 的初学者，我正在阅读 Oracle 教程中的数组。

我的问题涉及这段代码：

```
class ArrayCopyDemo {
    public static void main(String[] args) {
        char[] copyFrom = { 'd', 'e', 'c', 'a', 'f', 'f', 'e',
            'i', 'n', 'a', 't', 'e', 'd' };
        char[] copyTo = new char[7];

        System.arraycopy(copyFrom, 2, copyTo, 0, 7);
        System.out.println(new String(copyTo));
    }
} 
```

具体来说，

```
 System.out.println(new String(copyTo)); 
```

new String(copyTo) 究竟做了什么，或者更确切地说，为什么要使用 new 和 String？他们在一起做什么？（我知道他们会打印出“咖啡因”，但只是在一般意义上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T16:44:16.633

[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28char%5B%5D%29)是您的朋友：

> **公共字符串（字符 [] 值）**
> 
> 分配一个新的 String 以便它表示当前包含在字符数组参数中的字符序列。字符数组的内容被复制；随后对字符数组的修改不会影响新创建的字符串。
> 
> **参数：**
> 
> value - 字符串的初始值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:44:29.290

> new String(copyTo) 究竟做了什么，

它创建一个新的 String 对象。String 类有一个构造函数，它接受一个 char 数组，它将 char 数组转换为字符串文字。

[**新字符串(char[] arr) 源**](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.%3Cinit%3E%28char%5B%5D%29)

> 分配一个新的 String 以便它表示当前包含在字符数组参数中的字符序列。字符数组的内容被复制；随后对字符数组的修改不会影响新创建的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:45:39.037

它创建一个新`String`对象，其中包含`char`您作为参数传递的数组定义的文本。它只是`String`类中定义的另一个构造函数，看一下：

```
public String(char value[]) {
    this.offset = 0;
    this.count = value.length;
    this.value = StringValue.from(value); //returns a copy of the char array
                                          //by using Array.copyOf
} 
```

除了查看[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28char%5B%5D%29)之外，深入研究`String`的代码可以帮助您理解它是如何工作的。`this.value`是用于分配`char`符合 . 的 s的内部数组`String`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:50:18.870

该函数`println`只接受 type `String`。你所拥有的是一个`char`数组。

`new`关键字表示它`String`是类的构造函数（`String`如构造新`String`对象）。

在 Android Developers 站点中，您有所有可能的构造函数的列表：http: [//developer.android.com/reference/java/lang/String.html](http://developer.android.com/reference/java/lang/String.html)

具体来说，您正在使用的是：

```
String(char[] data) 
```

# python - CherryPy：如果您想将字典作为参数传递，那么 html 命令行语法是什么？

> ID：14899280
> 
> 赞同：0
> 
> 时间：2013-02-15T16:42:21.900
> 
> 标签：python, cherrypy

所以我构建了一个简单的cherrypy函数，叫做'echo'来尝试找出cherrypy发送给我的python函数的内容。例子：

```
http://djotjog.com/cp/echo/692-gg_org_id-2013-02-05.json/
RETURNS:
{'kw': {}, 'args': (), 'param_1': '692-gg_org_id-2013-02-05.json', 'param_2': None} 
```

现在，这可能看起来很奇怪，但我想传递一本字典。这是一个 html 的噩梦吗？例子：

这个函数需要两个参数。参数是可选的：

```
def some_function(filename, params = {'db':'bh-localhost','h':'sparse','branching':7}) 
```

通过cherrypy发送...

```
http://djotjog.com/cp/echo/692-gg_org_id-2013-02-05.json/{h:'branchy','branching':7,'db':'bh-localhost'}
RETURNS    
{'kw': {}, 'args': (), 'param_1': '692-gg_org_id-2013-02-05.json', 'param_2': "{h:'branchy','branching':7,'db':'bh-localhost'}"} 
```

但是当我通过实际功能而不是回声时，它告诉我：

404 未找到。没有任何内容与给定的 URI 匹配。

这是因为字典现在是字符串而不是字典吗？我可以做些什么来传递字典？或者只是将其保留为个别论点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:48:47.233

尝试设置 echo 以接收可变数量的参数...

```
@cherrypy.expose
def echo(self, *args, **kwargs):
    return kwargs['param_1'] 
```

希望这可以帮助。

安德鲁

# pdf - 将多个带有 PDF 链接的 Markdown 文件转换为 PDF

> ID：14899283
> 
> 赞同：31
> 
> 时间：2013-02-15T16:42:30.160
> 
> 标签：pdf, markdown

我在 Markdown 中写了很多技术文档。我选择将其用于版本控制，因此我们可以在 GitHub 上查看。

我们现在需要与外部用户（对 Markdown 不太熟悉）共享它，所以我想将它转换为 PDF。

[Gimli](https://github.com/walle/gimli)似乎是我为转换找到的最佳工具（它使用与 GitHub 相同的样式表，因此看起来相同），但它也不会转换链接。有什么可以做到这一点的吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-16T08:06:20.680

我不知道您对哪种类型的链接有问题（内联链接、参考链接、HTML 链接、图片链接、自动链接...），但您可以尝试使用[Pandoc](http://johnmacfarlane.net/pandoc/)：

```
pandoc *.md -o result.pdf 
```

这会将具有`*.md`文件扩展名的所有文件转换为单个 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T14:19:30.367

我在 Markdown 文档中使用命名的锚标记。我会链接到这些名字。例如，

```
<a name="#1-overview"></a>
##1\. Overview

......

Reference: [1\. Overview](#1-overview) 
```

然后我使用[Typora](https://typora.io/)打开 markdown 文档并将其导出为 PDF。生成的 PDF 会正确保留这些内部链接。

* * *

## 回答 #3

> 赞同：-11
> 
> 时间：2017-08-30T04:30:20.990

不！！！你真的不必这样做！！！只需“ cat *.md > allpages.md ”（您可能想要手动组织订单或以正确的名称设置每个文件以让 cat 工作）然后打开 allpages.md 然后在任何降价编辑器中选择打印/导出！ ！！

您不必安装任何东西！！！！

# c# - 检查我是否对 Silverlight 5 中的文件夹具有写入权限，超出了浏览器提升的信任

> ID：14899286
> 
> 赞同：0
> 
> 时间：2013-02-15T16:42:36.650
> 
> 标签：c#, silverlight, filesystems, silverlight-5.0

如果我可以写入某个用户选择的文件夹，如何签入具有提升信任的 Silverlight 5 OoB 应用程序？目前我试图创建和删除一个文件夹，如果没有发生异常，我有写权限。

```
 try {
     CreateSubDirectory(path, newDir);
     DeleteSubDir(path, newDir);
     writeAccess = true;
   } catch(Exception) {
     writeAccess = false;
   } 
```

我在文档中进行了搜索，并没有发现任何不那么骇人听闻的方法。你怎么推荐？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:47:35.670

根据我的发现，您没有太多选择，尝试/捕获是要走的路。

但是你应该更精确地捕捉。您希望能够区分 IOException、SecurityException 和其他异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:53:41.360

您可以检查您的应用程序是否具有提升的权限。

```
if (Application.Current.HasElevatedPermissions)
{
    // Do File IO here
} 
```

这些文章包含更多信息： [如何：在受信任的应用程序中访问本地文件系统受](http://msdn.microsoft.com/en-us/library/ee721082%28v=vs.95%29.aspx) [信任的应用程序](http://msdn.microsoft.com/en-us/library/ee721083%28v=vs.95%29.aspx)

# ubuntu - 错误：libvpx 解码器版本必须 >=0.9.1

> ID：14899290
> 
> 赞同：2
> 
> 时间：2013-02-15T16:42:52.840
> 
> 标签：ubuntu, ffmpeg

嘿嘿！我正在尝试使用以下教程在我的服务器上安装 ffmpeg： [https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuideLucid](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuideLucid) 当我到达 ffmpeg 部分并运行 ./configure 命令时，它会给出以下错误：

```
ERROR: libvpx decoder version must be >=0.9.1 
```

我必须提到我的服务器有 Ubunto 10.10 64bit 我是 linux 的新手，所以请考虑一下 :) 非常感谢！

按照 LordNeckBeard 解决方案，我在 checkinstall 后收到以下错误：

```
root@348588:~/libvpx# sudo checkinstall --pkgname=libvpx --pkgversion="$(date +%Y%m%d%H%M)-git" --backup=no--default --deldoc=yes

checkinstall 1.6.2, Copyright 2009 Felipe Eduardo Sanchez Diaz Duran
           This software is released under the GNU GPL.

no--default is an invalid value for --backup

Use --help or -h to get more information 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:54:25.057

这表明 libvpx 没有正确安装，或者您有旧版本的 libvpx，即版本 <0.9.1。

您的第一步是检查是否安装了 libvpx。如果安装后得到以下信息：

```
$ dpkg -s libvpx | grep Status
Status: install ok installed 
```

如果没有安装：

```
$ dpkg -s libvpx | grep Status
Status: unknown ok not-installed 
```

如果存在则删除可能是个好主意，`libvpx-dev`这样它就不会干扰 ffmpeg 检测您编译的 libvpx：

```
sudo apt-get remove libvpx-dev 
```

然后尝试再次安装 libvpx：

```
cd ~/libvpx
make clean
git pull
./configure
make
sudo checkinstall --pkgname=libvpx --pkgversion="$(date +%Y%m%d%H%M)-git" --backup=no --default --deldoc=yes 
```

现在再次尝试 ffmpeg：

```
cd ~/ffmpeg
make distclean
git pull 
```

然后按照从 ffmpeg`./configure`行开始的指南继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:57:12.400

查看 ./ffmpeg/config.log 的尾部以仔细检查问题到底是什么，并排除报告的错误消息中的任何歧义。

如果是 vpx 上的版本错误，您可以手动转到 git 并将更新的 vpx 版本签出到 vpx 文件夹中..

请参阅[此处](http://git.chromium.org/gitweb/?p=webm/libvpx.git)了解您可以使用 git 查看的各种较新标签。

然后，根据您的原始进程重新运行 vpx 文件夹中的 config/make/install 步骤

重新运行 ffmpeg/configure 以解决 orig 错误

# java - Apache poi - 打印布局，同一张纸上有多个打印区域

> ID：14899293
> 
> 赞同：4
> 
> 时间：2013-02-15T16:42:57.833
> 
> 标签：java, apache-poi

我正在尝试开发一个复杂的报告，我需要为 excel 文件设置打印区域。我必须将 xls 文件分成 3 部分，但如果我执行 setPrintArea(..) 新区域订阅旧区域，结果是我在打印预览中只有最后一页。如何设置多个打印区域？这是代码：

```
protected void createCustomerSheet(String label) {
    createSheet(label);
    getCurrentSheet().getPrintSetup().setPaperSize(PrintSetup.A4_PAPERSIZE);
    getCurrentSheet().getPrintSetup().setFitHeight((short)1);
    getCurrentSheet().getPrintSetup().setFitWidth((short)1);
    getCurrentSheet().setAutobreaks(true);
    getCurrentSheet().setFitToPage(true);
} 
```

然后我打了 3 次电话

```
 wb.setPrintArea(activeSheetIndex, startColumn, endColumn, startRow, endRow); 
```

我也尝试添加中断行，但它不起作用..

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T17:42:28.420

Excel 只为电子表格保留一个[打印区域](http://www.howtogeek.com/howto/10451/print-only-selected-areas-of-a-spreadsheet-in-excel-2007-2010/)。所以 Apache POI 的 Excel API 提供了[设置一个打印区域](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Workbook.html)的能力。

听起来您可能正在尝试定义报告的不同页面。如果是这样，您需要在要完成此操作的每个工作表中设置行和/或列分隔符。使用[Sheet](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Sheet.html)的以下方法，假设`sheet`是您的`Sheet`实例：

```
sheet.setAutobreaks(false);
sheet.setRowBreak(rowIndex);
sheet.setColumnBreak(columnIndex); 
```

您可以多次调用最后 2 个方法中的每一个来建立多个中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-18T09:59:12.970

您可以像这样设置多个打印范围：

```
try (final Workbook wb = new HSSFWorkbook(new FileInputStream("in.xls"))) {
    wb.setPrintArea(0,  "$E$6:$F$12,$H$16:$I$25,$J$18:$L$26");
    wb.write(new FileOutputStream("out.xls"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-24T14:47:28.757

这就是我为工作表设置打印区域的方式。

```
// set print area
workbook.setPrintArea(
    workbook.getSheetIndex(sheet.getSheetName()), //sheet index
    0, //start column
    x, //end column
    0, //start row
    i  //end row
); 
```

# sdk - 如何使用 JS SDK 动态嵌入“小”版本的 Soundcloud 播放器？

> ID：14899299
> 
> 赞同：2
> 
> 时间：2013-02-15T16:43:13.143
> 
> 标签：sdk, soundcloud, oembed

我正在为音乐作曲家建立一个网站。他想通过 Soundcloud 发布他的作品样本，并将其中一些样本嵌入到他的网站上。他有一个高级帐户。

我想让这对他来说尽可能简单（他不是极客）。基本上，我想让他从浏览器的地址栏中复制并粘贴歌曲的 URL，然后让我的应用程序为他完成其余的工作。

这实际上相对容易做到——而且我成功地让它与标准版本的播放器一起工作。但我找不到以编程方式嵌入播放器的微型版本的工作方式。Soundcloud oEmbed 参考资料中没有提到小播放器，仅将 maxheight 参数设置为 18 对我来说并不适用。

问题是，我需要在每个页面上实际*生成*嵌入，因为嵌入在主页上的同一首歌曲应该使用微型播放器呈现，而在子页面上它应该是完整的标准播放器 - 因此我不能只是允许他将嵌入代码从 soundcloud 复制并粘贴到我的应用程序中，因为这样我要么有一个小播放器嵌入代码，要么有一个标准播放器代码可用，而不是两者都可用。为同一首歌曲复制和粘贴两个不同的嵌入代码对于这么简单的事情来说似乎太麻烦了。

另一件事是我无法正确测试这一点，因为我自己没有高级帐户，也无权访问他的帐户。如果开发人员有办法“模拟”高级帐户，那就太酷了开发目的...

感谢您的任何帮助！

担

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T18:12:30.060

不幸的是，`/oembed`目前仅适用于常规小部件（Flash 的 HTML5）。

但是，您可以自己为其中任何一个构建 html。这是嵌入小部件的模板：

```
<object height="18" width="100%">
  <param name="movie" value="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F{trackId}&player_type=tiny{widgetParams}"></param>
  <param name="allowscriptaccess" value="always"></param>
  <param name="wmode" value="transparent"></param>
  <embed wmode="transparent" allowscriptaccess="always" height="18" width="100%" src="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F{trackId}&player_type=tiny{widgetParams}"></embed>
</object> 
```

以及常规小部件的模板：

```
<iframe width="100%" height="166" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F{trackId}{widgetParams}"></iframe> 
```

您应该将它们放入字符串（没有换行符）并在这些字符串上执行变量插值。我不确定你使用的是什么语言，但大多数语言都内置了这个。

对于我大部分时间都在编写的 JavaScript，您可以使用 Douglas Crockford 的[`supplant`function](https://stackoverflow.com/a/1408373/236135)。

变量`trackId`的值应该是正整数`widgetParams`，而值应该是类似的`&color=ff6600&auto_play=false`，即以 为`key=value`前缀的对`&`。在我的示例中，我使用`{`and`}`作为变量的分隔符以进行插值，但它当然可以是您的语言或模板引擎要求的任何内容。

为了让您的客户能够只为您提供跟踪 URL，您需要向`/resolve`端点发出 API 请求以从跟踪 URL（永久链接）中检索跟踪 ID。您需要注册为开发人员`client_id`才能授权对 API 的请求。[我已经在此处的另一个答案](https://stackoverflow.com/a/14676358/236135)中描述了如何在 JavaScript 中执行此操作。

如果您不想向 API 发出请求，您还可以要求您的客户提供嵌入代码，他们可以通过点击“共享”按钮从 SoundCloud 上的任何声音或设置中轻松检索，然后提取声音或设置ID 使用正则表达式。

这是一个如何插入小部件的示例（也使用 SoundCloud JS SDK）[http://jsbin.com/OLUloX/1/edit](http://jsbin.com/OLUloX/1/edit)

# stage - CreateJS - 更改对象的颜色

> ID：14899305
> 
> 赞同：0
> 
> 时间：2013-02-15T16:43:26.170
> 
> 标签：stage, createjs

我有一个 .fla 文件，其中有用于在男孩画中更改皮肤、头发和衬衫颜色的符号。当我用 CreateJS 导出它时，我得到了这个：

```
// 1Hair
this.shape_226 = new cjs.Shape();
this.shape_226.graphics.f("#FCDEC4").s().p("AA").cp();
this.shape_226.setTransform(0.1,-95.3);` 
```

在那里你可以看到代表头发颜色的颜色（#FCDEC4），我尝试将颜色替换为一个变量（boyHair），就像这样

```
// 1Hair
this.shape_226 = new cjs.Shape();
this.shape_226.graphics.f(boyHair).s().p("AA").cp();
this.shape_226.setTransform(0.1,-95.3);` 
```

这是生成文件的init函数

```
//Modified from exported file of Flash Toolkit for CreateJS
var canvas, stage, exportRoot;
function init() {
    canvas=document.getElementById("canvas");
    exportRoot=new lib.characters();

    stage=new createjs.Stage(canvas);
    stage.addChild(exportRoot);
    stage.update();

    createjs.Ticker.setFPS(24);
    createjs.Ticker.addListener(stage);
} 
```

我在我的主 JavaScript 文件上设置值，如下所示：

```
var boyHair="#000000"; 
```

并且第一次工作（我猜是在初始化阶段）但是如果我稍后在代码中修改该值，它对画布绘制没有影响，我尝试过`stage.update()`但它什么也没做。

你知道是否有办法动态地改变这些颜色吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T04:38:38.693

尝试做这样的事情

```
 var canvas, stage, exportRoot;
function init() 
{
canvas=document.getElementById("canvas");
exportRoot=new lib.characters();
stage=new createjs.Stage(canvas);
stage.addChild(exportRoot);
createjs.Ticker.setFPS(24);
createjs.Ticker.addEventListener ("tick", tick);
}
 tick =function()
 {
     var boyHair="#000000";
     stage.update();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:04:06.680

目前没有办法 - 当颜色发生变化时，您必须重建您的形状。

# r - 在新数据中转换拆分的 data.frame。框架

> ID：14899306
> 
> 赞同：0
> 
> 时间：2013-02-15T16:43:27.990
> 
> 标签：r

我有一个如下所示的 data.frame：

> ```
>  Element1     Element2        Value           Index   
>          a         cf            0.14             1           
>          a         ng            0.25             1           
>          a         ck            0.12             1         
>          a         rt            0.59             1      
>          a         pl            0.05             1          
>          b         gh            0.02             2          
>          b         er            0.91             2
>          b         jk            0.87             2
>          c         qw            0.23             3
>          c         po            0.15             3 
> ```

我想要以下输出：

> ```
>  Element_a1     Element_a2    Value_a       Element_b1   Element_b2  Value_b
>          a         cf            0.14             b            gh       0.02      
>          a         ng            0.25             b            er       0.91   
>          a         ck            0.12             b            jk       0.87
>          a         rt            0.59             NA           NA       NA
>          a         pl            0.05             NA           NA       NA 
> ```

等等...

我应用“split”函数根据“Index”列拆分初始data.frame，但`data.frame`由于单个数据的长度，我无法根据需要将拆分后的data.frame（即data.frames列表）转换为单个数据.frames 不相等。我试图申请（来自 ply 包）

> x = do.call(rbind.fill, spl)

与另一篇文章一样，但会返回一个像最初的那样的 data.frame 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:18:08.803

这是一种方法：

```
nRow <-  max(table(dat$Element1))          # maximum number of rows in a group
spl2 <- by(dat, dat$Element1, FUN = function(x) {           
  if (nRow > nrow(x)) {                    # insufficient number of rows?
    subdat <- dat[seq_len(nRow - nrow(x)), ]  # create a data frame
    subdat[ , ] <- NA                      # fill it with NAs
    return(rbind(x, subdat))}       # bind it to the subset and return the result
  return(x)                                # return the subset as it is
})
result <- do.call(cbind, spl2)             # bind all subsets together 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:59:29.017

我会使用它们，`split`然后将`cbind`它们放在一起，后填充。我借用了[组合两个不同长度的数据帧的](https://stackoverflow.com/questions/6988184/combining-two-data-frames-of-different-lengths)`cbindPad`功能：

```
cbindPad <- function(...){
  args <- list(...)
  n <- sapply(args,nrow)
  mx <- max(n)
  pad <- function(x, mx){
    if (nrow(x) < mx){
      nms <- colnames(x)
      padTemp <- matrix(NA,mx - nrow(x), ncol(x))
      colnames(padTemp) <- nms
      return(rbind(x,padTemp))
    }
    else{
      return(x)
    }
  }
  rs <- lapply(args,pad,mx)
  return(do.call(cbind,rs))
}

## assume your data is in a data.frame called dat
dat_split <- split(dat, dat$Element1)
out <- do.call( cbindPad, dat_split ) 
```

# asp.net - ASP 数组元素为 null 并将字符串转换为 long

> ID：14899309
> 
> 赞同：1
> 
> 时间：2013-02-15T16:43:38.527
> 
> 标签：asp.net, vb.net

我继承了一个 ASP 项目，我是一个没有 ASP 知识的 PHP 编码器。对不起，如果这篇文章很长，我只想提供尽可能多的信息。

我正在为这一块代码而苦苦挣扎。

```
Dim resultArray As String()
For Each resultitem In resultArray
    ' Do something with each element of the array
    hash.Add(dllFunctionObj.ReturnTemplateField(i), resultitem)
    i = i + 1
Next 
```

错误：

```
Exception!!: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index 
```

解决方案似乎很简单。检查是否`resultitem`为空，然后中断或跳到下一个元素。

所以我尝试了这个：

```
If IsNull(resultitem) Then
    Break
End If 
```

错误：

```
BC30451: Name 'IsNull' is not declared. 
```

我尝试了在网上找到的其他几种替代方法：

*   `IsEmpty(resultitem)`- IsEmpty 未声明
*   `String.IsNullOrEmpty(resultitem)`- 索引越界错误，似乎没有效果
*   `resultitem Is Nothing`- 索引超出范围
*   `Not (Len(resultitem) > 0)`- 索引超出范围
*   `Len(resultitem) = 0`- 出界索引

唯一似乎接近的是：

```
If Not resultitem Then
    Break
End If 
```

错误：

```
Exception!!: Conversion from string "some_string_here" to type 'Long' is not valid. 
```

如果我使用`Next`而不是`Break`我得到这个错误：

```
If Not resultitem Then
    Next
End If 
```

错误：

```
BC30081: 'If' must end with a matching 'End If'. 
```

帮助！

我将包含完整的代码块以防万一

```
Dim isResultArray As Boolean
isResultArray = methodInf.ReturnType.IsArray()
If isResultArray Then
    Dim resultArray As String()
    '*** Invoke the dll function
    resultArray = methodInf.Invoke(REMem, args.ToArray)
    Dim i As Integer = 0
    For Each resultitem In resultArray

        If Not resultitem Then
            Response.Write("Found null value.")
            Exit For
        End If

        Response.Write("i: " & i & "<br />")

        hash.Add(dllFunctionObj.ReturnTemplateField(i), resultitem)
        i = i + 1
        ' i = 6 will cause Get Constituent Name to work
        'If i = 6 Then
        '   Exit For
        'End If
    Next
    outputArray.Add(hash)
Else
    '*** could be boolean, string, long etc.
    Dim result As String
    '*** Invoke the dll function
    result = methodInf.Invoke(REMem, args.ToArray)
    hash.Add(dllFunctionObj.ReturnTemplateField(0), result)
    outputArray.Add(hash)
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:20:13.617

在我看来，数组可能定义不正确。

改变这个：

```
Dim resultArray As String()
For Each resultitem In resultArray
    ' Do something with each element of the array
    hash.Add(dllFunctionObj.ReturnTemplateField(i), resultitem)
    i = i + 1
Next 
```

对此：

```
Dim resultArray() As String
For Each resultitem In resultArray()
    ' Do something with each element of the array
    hash.Add(dllFunctionObj.ReturnTemplateField(i), resultitem)
    i = i + 1
Next 
```

* * *

此外，您可能需要定义数组的长度，例如：

```
Dim resultArray(0 to 9) As String 
```

如果数组的长度是未知的，你可以定义它没有最小和最大索引，但`ReDim`以后需要使用来分配最小和最大索引。一种方法是创建没有长度的数组，计算您知道将添加到数组中的项目，然后`ReDim`将该计数用作数组的长度。例如：

```
Dim resultArray() As String
Dim iCount as integer 'Keep track of the count with this variable.

'Enter custom counting script here...Use a loop to count the items that will be used in the array. 

ReDim resultArray(0 to iCount - 1) 'Subtract one from the iCount to match the 0-based index. 
```

如果您尝试调用没有设置长度的数组的索引（或使用大于/小于数组大小的索引），您很可能会遇到“索引超出范围”或“子字符串超出范围”范围”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:20:30.757

您需要确保您没有溢出您正在访问的集合的索引。像这样的东西应该工作：

```
If i < dllFunctionObj.ReturnTemplateField.Length Then

    hash.Add(dllFunctionObj.ReturnTemplateField(i), resultitem) 

End If 
```

基本上，您需要在此 if 块中包装对“hash.Add”的调用，以防止访问不存在的值。

当然，我不明白代码的目的，所以你可能需要处理“else”的情况。但这应该会停止错误。

# linux - 杀死管道中的前一个命令

> ID：14899310
> 
> 赞同：5
> 
> 时间：2013-02-15T16:43:40.153
> 
> 标签：linux, bash, awk, waf, ns-3

我正在运行这样的模拟

```
./waf --run scratch/myfile | awk -f filter.awk 
```

`waf`一旦`filter.awk`检测到发生了某些事情（例如在读取特定行之后），我如何才能终止命令？

我不能改变`waf`或`myfile`。我只能更改`filter.awk`, 和上面的命令（显然）。

***评论后更新：***

*   `waf`收到后不会终止`SIGPIPE`（应该吗？）
*   它产生需要清理的子进程。

这是[我自己的答案](https://stackoverflow.com/a/14911916/828193) *（和挑战）*。

* * *

在处理了@thatotherguy 和@Chris 的答案之后，我简化了一点，得到了这个：

```
tmp=$(mktemp)
{ ./waf --run scratch/myfile & echo $! > "$tmp"; } | { awk -f filter.awk; pkill -P $(<$tmp); kill $(<$tmp); } 
```

不幸的是，我无法摆脱该`tmp`文件，每次尝试将其`PID`作为变量传递都失败了。

我不会更改已接受的答案（因为它是在*真正*需要时才起作用的答案），但对于任何可以简化更多的人来说都是 +1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:50:22.587

使用`awk`'`exit`语句。`waf`应在连接它的管道`awk`关闭后立即退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:12:33.667

让这件事变得棘手的是，`waf`当管道破裂时不退出会导致行为不端，并且它会产生第二个过程，我们也必须摆脱它：

```
tmp=$(mktemp)
cat <(./waf --run scratch/myfile & echo $! > "$tmp"; wait) | awk -f filter.awk; 
pkill -P $(<$tmp)
kill $(<$tmp) 
```

*   我们使用在后台`<(process substitution)`运行`waf`并将其 pid 写入临时文件。
*   我们`cat`用作中介，将来自该进程的数据中继到 awk，因为`cat`当管道损坏时将正确退出，从而允许管道完成。
*   管道完成后，我们杀死所有`waf`产生的进程（通过父 PID）
*   最后我们自杀`waf`了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:15:08.033

`awk`退出时，在下次尝试写入输出时`waf`获取 a ，这应该导致它退出，除非编写者故意将其设置为忽略s 告诉它退出，在这种情况下，您必须手动杀死它或类似的东西. 就像是：`SIGPIPE``waf``SIGPIPE``kill`

```
./waf --run scratch/myfile | ( awk -f filter.awk; killall waf ) 
```

如果忽略所有退出信号，您可能需要一个`-KILL`选项。`killall``waf`

# java - 方法参数必须是实现某个接口的某个类的obj

> ID：14899314
> 
> 赞同：6
> 
> 时间：2013-02-15T16:43:55.563
> 
> 标签：java, android, generics, methods, constructor

如何声明一个带有参数的方法，该参数必须同时是实现某个接口的某个类而不为此声明一个特殊类？
假设我已经声明了类 ImageX 并且还声明了接口标记。所以我需要创建一些其他类或方法，它必须只接收实现标记接口的 ImageX 实例。如何声明这样的方法？就像是

```
private void someMethod (ImageX<Tagging> obj){} 
```

但这当然是不正确的。是的，如果它实现了所需的接口，我可以检查 obj，但我想要检查参数。如果它不是某种方法而是构造函数怎么办……
我问的是泛型吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T16:45:50.557

您可以使用类型交集使该方法成为通用方法，并且只接受既是 ImageX 又是 Tagging 的对象：

```
private <T extends ImageX & Tagging> void someMethod (T obj){} 
```

# php - 在Paypal付款之前将订单信息存储在MySQL中并使用IPN进行验证

> ID：14899316
> 
> 赞同：1
> 
> 时间：2013-02-15T16:44:02.400
> 
> 标签：php, mysql, paypal, e-commerce

使用 Paypal 标准付款时，在付款前将客户与订单联系起来的最佳方式是什么？当客户点击“结帐”时，该网站会将有关订单的信息存储在数据库中，状态为“待处理”，然后将用户发送到 Paypal 以完成购买。购买后，我计划使用 IPN 验证付款并将客户运输信息存储在单独的表格中。我应该如何将原始订单信息与运输信息联系起来？我可以在将用户发送到 Paypal 之前询问他们的 Paypal 电子邮件地址并将其与订单信息一起存储，但也许有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:21:40.340

使用 PayPal 的网站支付标准，您可以将挂单的标识符（标题）作为 CUSTOM 变量发送到您的表单中。PayPal 将在 IPN 消息中将其返回给您。请参阅[https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables)表 2 了解可在 IPN 消息中到达的其他项目。

# c# - 从转发器控件选择中动态创建的texbox中检索文本

> ID：14899317
> 
> 赞同：1
> 
> 时间：2013-02-15T16:44:06.300
> 
> 标签：c#, asp.net

我正在尝试将用户选择从由转发器（复选框、下拉列表、文本框）生成的控件传递到数据表，并将其用作网格视图的数据源以进行测试，并最终将其作为表变量参数传递给存储过程。

当某些复选框没有选择时，不会生成相应的文本框并且代码会抛出异常 ( `check to determine if the object is empty before calling the method`)。

似乎导致问题的部分是当我将文本从 texboxes 传递到数据表时。当我通过复选框名称时，它工作正常；我试图通过检查是否生成了文本框控件来克服这个问题，但它仍然抛出相同的异常。

有没有更好的方法来检查是否生成了动态文本框？

```
protected void Button2_Click(object sender, EventArgs e)
{
    DataTable Frs = new DataTable("udtMParameters");
    Frs.Columns.Add("MName", typeof(string));
    Frs.Columns.Add("IsNum", typeof(string));
    Frs.Columns.Add("MValue1", typeof(string));
    Frs.Columns.Add("MValue2", typeof(string));
    try
    {

        foreach (RepeaterItem i in Repeater1.Items)
        {
            CheckBox fn = i.FindControl("chk") as CheckBox;
            CheckBox isn = i.FindControl("ChkboxIsNumeric") as CheckBox;
            PlaceHolder plc = i.FindControl("PlcMFilter") as PlaceHolder;
            TextBox s = i.FindControl("start") as TextBox;
            TextBox l = i.FindControl("end") as TextBox;
            DropDownList d = i.FindControl("value") as DropDownList;

            if (fn.Checked)
            {
                TextBox1.Text = fn.Text;
                if (isn.Checked)
                {
                    DataRow dr = Frs.NewRow();
                    dr["MName"] = fn.Text;
                    dr["IsNum"] = "Y";
                    if (String.IsNullOrEmpty(s.Text))
                    {
                        dr["MValue1"] = s.Text;
                    }
                    else
                    {
                        dr["MValue1"] = " ";
                    }
                    if (String.IsNullOrEmpty(s.Text))
                    {
                        dr["MValue2"] = l.Text;
                    }
                    else
                    {
                        dr["MValue2"] = " ";
                    }

                   Frs.Rows.Add(dr); 
                }

                else
                {
                    DataRow dr = Frs.NewRow();
                    dr["MName"] = fn.Text;
                    dr["IsNum"] = "N";
                    dr["MValue1"] = "MValue1";
                    dr["MValue2"] = "MValue2";
                    Frs.Rows.Add(dr);

                }
            }

            this.GridView1.Visible = true;
            GridView1.DataSource = Frs;
            GridView1.DataBind();

            panel2.Enabled = true;
            panel2.Visible = true;
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:32:59.113

用括号替换你实现的转换，以便本地化你的空对象

```
TextBox s = (TextBox)i.FindControl("start");
TextBox l = (TextBox)i.FindControl("end"); 
```

在转换失败的情况下，使用括号进行强制转换会引发异常，而使用 as 进行强制转换会产生 null。

# php - 通过 HTTP 将字节数组从 Android 发送到服务器端 PHP 脚本

> ID：14899319
> 
> 赞同：0
> 
> 时间：2013-02-15T16:44:12.663
> 
> 标签：php, android, post, encryption, aes

我有一个使用 AES 加密来加密密码的 Android 应用程序。我的应用程序中有一个密钥，我为每次加密生成一个随机 IV，我将使用这个 IV 来解密 php 文件中的密码。

在 android 应用程序中，IV 是一个 byte[]，我不知道如何通过 http 请求发送它。

我想我必须对其进行编码，因为生成的 byte[] 不能在 String 中转换以轻松发送，但我不知道如何。

我想用 ByteArrayEntity 发送它，但我不能给这个 POST 参数命名，所以我不能从我的 PHP 文件中接收它。

如果你有任何想法，你能帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:48:26.910

使用 base64 编码。android 和 java 都提供了将 bae64 字符串编码和解码为它们各自加密机制的可用格式的机制。

# javascript - 如何测试指令控制器功能？

> ID：14899333
> 
> 赞同：0
> 
> 时间：2013-02-15T16:45:02.750
> 
> 标签：javascript, angularjs, angularjs-directive, karma-runner

我的指令控制器中有一个函数，我正在尝试测试但找不到任何资源。我在每个之前

```
 before each  {
                    scope = $rootScope ;
                    $compile(element)(scope);
                    scope.$digest();
                    }

          it('should update days when datepicker is changed', function () {
                scope.seldate = new Date('4/11/2014');
                scope.stdate = new Date('4/1/2014');
                scop`enter code here`e.days = 10;
                scope.$digest();
                scope.$apply(function() {
                    scope.seldate = new Date('4/12/2014');
                    scope.datePickerChange(); // This is a function in my directive controller
                });
                expect(scope.days).toBe(11);

            });

 app.directive('mydirective',function(){
      return {
              restrict:'E',
               scope:{
                days: '=',
                selectedDate: '=',
                startDate: '=' 

                 },
                $scope.datePickerChange = function () {
                    //Sod is helper for start of the day with hours/mins/seconds set to 0
                $scope.days = moment(new Date($scope.selectedDate)).sod().diff($scope.getStartDate(), 'days');
                };
             };

          }); 
```

这是抛出一个错误 TypeError: Object # has no method 'datePickerChange'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:01:19.333

您的指令声明无效：

```
app.directive('mydirective',function(){
      return {
              restrict:'E',
              scope:{
                days: '=',
                selectedDate: '=',
                startDate: '=' 
              },
              link: function(scope, elem, attrs) {
                scope.datePickerChange = function () {
                    //Sod is helper for start of the day with hours/mins/seconds set to 0
                    scope.days = moment(new Date($scope.selectedDate))
                                 .sod().diff($scope.getStartDate(), 'days');
                };
              }
      }
}); 
```

除此之外，为了测试你的指令，你应该遵循你可以在 Angular 的 github repo 中看到的例子。[ngSwitch 是一个很好的例子，IMO](https://github.com/angular/angular.js/blob/master/test/ng/directive/ngSwitchSpec.js)

基本思想是你使用 $compile 来执行你的指令并检查它。

```
it('should do something', inject(function($rootScope, $compile) {
     var scope = $rootScope.$new();
     var element = $compile('<my-directive></my-directive>')(scope);

     //assert things.
     expect(scope.days).toEqual(somethingHere);
     scope.datePickerChange();
     expect(scope.days).toEqual(somethingElse);
}); 
```

# django - 我如何更新 django 外键？

> ID：14899334
> 
> 赞同：-1
> 
> 时间：2013-02-15T16:45:06.383
> 
> 标签：django, django-models

我有一个模型`OrderItem`，它有一个外键`order`。我还有一个像这样创建 OrderItem 的函数，

```
OrderItem.objects.create(shopping_id=_shopping_id(request),
                                          quantity=quantity,
                                          item=i,
                                          created_by=anon_user,
                                          modified_by=anon_user) 
```

如您所见，我没有包括在内`order`，因为我无法理解我如何能够做到这一点。我得到了错误`order_items.order_id may not be NULL`

这是我的模型`OrderItem`

```
class OrderItem(SmartModel):
    shopping_id = models.CharField(max_length=50,db_index=True)
    quantity = models.IntegerField(default=0)
    item = models.ForeignKey(Item)
    order = models.ForeignKey(Order) 
```

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:50:28.243

为什么添加与添加`order`有任何不同`item`？它们都是 ForeignKey，在这两种情况下，您只需将相关对象作为关键字参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:53:44.603

这不起作用吗？

```
order, created = Order.objects.get_or_create(...) 
```

然后

```
OrderItem.objects.create(order=order, shopping_id=_shopping_id(request),
                                          quantity=quantity,
                                          item=i,
                                          created_by=anon_user,
                                          modified_by=anon_user) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:40:30.267

如果没有创建它，则必须检查它是否存在，然后创建 OrderItem 对象。代码应如下所示：

```
 try:
         order = Order.objects.get(pk=order_id)
     except:
           order = Order.objects.create(name=name)

     OrderItem.objects.create(shopping_id=_shopping_id(request),
                                      quantity=quantity,
                                      item=i,
                                      order=order
                                      created_by=anon_user,
                                      modified_by=anon_user) 
```

# web-services - wsimport 对 jax-ws-catalog.xml 有什么作用？

> ID：14899338
> 
> 赞同：2
> 
> 时间：2013-02-15T16:45:25.340
> 
> 标签：web-services, wsdl, jax-ws, wsimport

我在网上找到的所有关于 wsimport 的文档似乎都对使用目录文件 (jax-ws-catalog.xml) 的一个方面有些模糊。我的问题是：

当我使用 wsimport 和 -catalog 选项生成 Web 服务客户端时，wsimport 是否仅**在构建期间**使用我的目录来查找它用于创建 Web 服务的 WSDL？或者它是否还以某种方式将目录捆绑到生成的 Web 服务中，以便可以在运行时使用目录来定位资源？

我猜 wsimport 只在构建时使用目录文件来解析资源，如果我想在运行时使用目录文件来解析资源，我必须将 jax-ws-catalog.xml 与我的 web 捆绑客户，但同样，到目前为止我发现的文档似乎有点不清楚，我希望听到更了解的人明确证实这一点。

**更新：**我正在使用 Maven 插件来生成我的 Web 服务类（[http://mojo.codehaus.org/jaxws-maven-plugin/wsimport-mojo.html](http://mojo.codehaus.org/jaxws-maven-plugin/wsimport-mojo.html)）。

如果此问题中的任何内容不清楚，请告诉我，我将进行编辑以添加更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:11:48.043

@dbisdorf --> 是的，当您使用带有 *catalog.xml 文件的 -catalog 选项时，该文件将被复制到 Java EE 项目的 WEB-INF 或 META-INF 目录中。这将用于查找引用@Runtine。如果您不想使用它，则应指定 genRuntimeCatalog=false。

这清楚地记录在以下链接中： http: [//docs.oracle.com/cd/E13222_01/wls/docs103/webserv_adv/xml.html](http://docs.oracle.com/cd/E13222_01/wls/docs103/webserv_adv/xml.html)

# java - Java eclipse - 活动目录，属性修改

> ID：14899339
> 
> 赞同：1
> 
> 时间：2013-02-15T16:45:25.557
> 
> 标签：java, eclipse, attributes, active-directory

我想用 Java (Eclipse) 在我的活动目录上获取属性。

我找到了这段代码：

```
Hashtable<String, Object> env = new Hashtable<String, Object>();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, "ldap://localhost:389/o=JNDITutorial");

// Authenticate as S. User and password "mysecret"
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, 
        "cn=S. User, ou=NewHires, o=JNDITutorial");
env.put(Context.SECURITY_CREDENTIALS, "mysecret");

// Create the initial context
DirContext ctx = new InitialDirContext(env); 
```

但我从这个开始知道是否有联系：

```
String ldapUrl = "ldap://"+serverAddress+":389";
//Prepare the environment with the username and password.
Hashtable env = new Hashtable();
DirContext ctx = null;
env.put(Context.SECURITY_PRINCIPAL, DOMAIN+username);
//env.put(Context.SECURITY_PRINCIPAL, username);
env.put(Context.SECURITY_CREDENTIALS, password);

ctx = LdapCtxFactory.getLdapCtxInstance(ldapUrl, env); // To test the connection 
```

那么如何创建 InitialDirContext 呢？我应该为此投入什么`env.put(Context.INITIAL_CONTEXT_FACTORY, "?????????")`？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:07:42.613

在您找到的示例中，当您执行以下操作时，连接已建立：

```
// Create the initial context
DirContext ctx = new InitialDirContext(env); 
```

为此，您需要设置所有必需的环境属性，例如

```
SECURITY_CREDENTIALS
SECURITY_PRINCIPAL
SECURITY_AUTHENTICATION
PROVIDER_URL
INITIAL_CONTEXT_FACTORY
(possibly others depending on if you have encryption set in your Active Directory) 
```

上下文工厂是 Java 将用来创建该连接的。如果您不指定它，java 将使用默认值`com.sun.jndi.ldap.LdapCtxFactory`，如果我没记错的话。

# regex - .htaccess：重定向包含 / ../ 的 URL

> ID：14899340
> 
> 赞同：1
> 
> 时间：2013-02-15T16:45:28.087
> 
> 标签：regex, .htaccess, redirect

我有几个这样的网址：

`http://site.com/knowndir/../somedir/page.html`

我需要将它们重定向到

`http://site.com/somedir/page.html`

基本上，我需要`knowndir/../`从 URL 中删除粒子。我知道那`knowndir`部分。

到目前为止，我已经尝试过这条规则：

`RewriteRule knowndir\/\.\.\/(.*)$ http://site.com/$1 [R=301,L]`但没有任何运气。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:56:03.043

看来，客户端已经删除了`.`和`..`路径元素。当您`access.log`使用 firefox 或 wget 请求页面与使用 telnet 和`GET /knowndir/../somedir/page.html HTTP/1.0`.

尽管如此，当 Apache 收到带有路径元素的请求时`.`，`..`Apache 已经自行处理了这一点，而不需要任何重定向规则。这意味着它通过删除`.`or来解析这些段`subdir/..`，以获得明确的路径。

因此，最终您的 RewriteRule 永远不会看到`knowndir/../`，因此不会发送`301`重定向。

**更新**：

我终于找到了相关的[RFC 3986 - Uniform Resource Identifier (URI): Generic Syntax](https://www.rfc-editor.org/rfc/rfc3986#section-5.2)，它在[5.2.4 中描述。删除点段](https://www.rfc-editor.org/rfc/rfc3986#section-5.2.4)如何`.`以及`..`应该如何处理。

OT：永远不要在`301`启用的情况下进行测试，有关详细信息，请参阅此答案[调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)的提示。

# javascript - 根据数据将文本与圆圈的左右对齐

> ID：14899344
> 
> 赞同：0
> 
> 时间：2013-02-15T16:45:39.000
> 
> 标签：javascript, d3.js

嗨，我想知道是否有人知道一种合适的方法来根据它所拥有的数据在圆圈的右侧或左侧对齐文本。

目前我有这个并且它有效：

```
//creating the circles & text together
 var node = svg.selectAll("a.node")
 .data(json)
 .enter().append("a")
 .attr("class", "node")
 ;

  //returning the shape & colors variable & linking it with the relevance in DB
node.append('path') 
    .attr("d", d3.svg.symbol().type(circle))
    .attr("transform", "translate(0,0)")

   ;
//returning the names from the db
node.append("text")
   .text(function(d) { return d.Name; })
   .style("font-size", "8px")
   .style("font", "Arial")
   .attr('x',  function (d) { 

          if (d.Field === "Canda"&& d.Name.length > 40) {return -180 }
            else if (d.Field === "Canda") {return 9}
          else {return 2} 

        ;})
   .attr('y', 2); 
```

但是，由于我的 json 文本长度不同 - 当我说“-140”时，更短的文本甚至不接近圆圈。因此，无论长度是否变化，是否有一种动态方式使文本与圆的距离都相同？

编辑：刚刚添加了 .length .. 但这仍然意味着我需要做更多的 if 语句，因为文本的长度会有所不同。

[http://jsfiddle.net/xwZjN/66/](http://jsfiddle.net/xwZjN/66/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:10:00.050

涉及文本锚的解决方案：

```
force.on("tick", function() {

   // edit to include text-anchor
   text.attr("text-anchor", function(d) { 
       if( d.Country ==="USA" ) { return "end" } 
       else { return "start" }
   } )
   // edit to change x starting point
   text.attr("x", function(d) {

           if (d.Country ==="USA") { 
                return d.x - 10;
           }
           else {  
               return d.x + 6; 
           } 
   })

   .attr("y", function(d) { return d.y + 4; });           

 node.attr("cx", function(d) { return d.x; })
     .attr("cy", function(d) { return d.y; });
}); 
```

# android - Android - 离线分析

> ID：14899345
> 
> 赞同：1
> 
> 时间：2013-02-15T16:45:39.483
> 
> 标签：android, google-analytics, analytics

我正在寻找一种解决方案来在根本没有互联网连接的 Android 设备上实施分析。我知道有像谷歌分析这样的服务可以在没有互联网连接的情况下为分析提供支持。但是我们要部署的设备根本没有互联网连接。

这是一种不同的情况。有谁知道我们是否可以在设备上的日志文件中写入分析，然后将这些日志文件传输/导入某种分析工具。这是我正在考虑的事情。如果有人有不同的方法，请告诉我。

提前致谢。

# sql - 具有最新记录的嵌套查询

> ID：14899346
> 
> 赞同：0
> 
> 时间：2013-02-15T16:45:43.350
> 
> 标签：sql, sql-server, sql-server-2008

我正在开发一个 SQL Server 2008 数据库。我需要获取客户的特定订单及其最新订单 ID 和最新订单数据。我的挑战是，我需要一行中的数据。目前，我正在尝试以下查询：

```
 SELECT
  o.*,
  c.[FirstName],
  c.[LastName],
  c.[PlayerName],
  (SELECT TOP 1 o2.CreatedDate, o2.ID  FROM [Order] o2 ORDER BY [CreatedOn] DESC)
 FROM
  [Order] o,
  [Customer] c
 WHERE  
  o.[ID]=c.[CustomerID] 
```

当我执行此查询时，我收到以下错误：

```
Only one expression can be specified in the select list when the subquery is not introduced with EXISTS. 
```

您可以想象，在某些情况下，客户不会有以前的订单。我该如何做到这一点并将结果放入一行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:58:49.563

使用 CTE 的方式略有不同。

```
WITH LatestOrder AS (SELECT TOP 1 * FROM [Order] ORDER BY [CreatedOn] DESC) 
 SELECT
  o.*,
  c.[FirstName],
  c.[LastName],
  c.[PlayerName],
  lo.CreatedDate,
  lo.ID
 FROM [Order] o
 JOIN [Customer] c
    ON o.[ID]=c.[CustomerID]
 CROSS JOIN LatestOrder lo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:49:05.347

```
 SELECT
  o.*,
  c.[FirstName],
  c.[LastName],
  c.[PlayerName],
  (SELECT TOP 1 o2.CreatedDate FROM [Order] o2 ORDER BY [CreatedOn] DESC),
  (SELECT TOP 1 o2.ID FROM [Order] o2 ORDER BY [CreatedOn] DESC)
 FROM
  [Order] o,
  [Customer] c
 WHERE  
  o.[ID]=c.[CustomerID] 
```

错误是说您不能在子查询中选择两个字段。所以你必须分开做。

# tfs - 使用 TFS Team Build 自定义放置文件夹结构

> ID：14899351
> 
> 赞同：5
> 
> 时间：2013-02-15T16:45:54.320
> 
> 标签：tfs, msbuild, tfsbuild

我正在使用 TFS 2012 自动构建包含多个 Windows 服务和两个 Web 应用程序的解决方案。

我使用我在[此处](http://lajak.wordpress.com/2011/07/30/customize-binaries-folder-in-tfs-team-build-part-2/)找到的指南来自定义构建过程模板，以便将 Windows 服务放入我喜欢的文件夹结构中。具体来说：

1.  \dropserver\droproot\MyApp\BuildNumber\
    *   \服务1
    *   \服务2
    *   \服务3
    *   \服务4

这很好用，但不幸的是它不适用于网络应用程序。如果我对这些使用相同的策略，我只会获取每个 Web 应用程序的 /bin 内容，而不是完整的站点内容。

MSBuild 通常使用 Web 应用程序目标来处理此问题，但由于某种原因，当您像我一样自定义构建时，这不起作用。我不再在构建输出中获得 _PublishedWebSites 文件夹。（我猜那是因为我清除了 MSBuild 任务的 OutDir 属性。）

有没有人做过这样的事情并让它也可以与 Web 应用程序一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:33:53.187

我想我可以帮助解决这个问题，如果 OutDir 与 OutputPath 相同，那么在构建目标中似乎不会创建已发布的网站文件夹。

所以这并不完美，但如果您将以下内容添加到第一个属性组中的 csproj 文件中，您会将所有内容部署到“\bin\deploy\”中，包括 _PublishedWebsites 文件夹

```
<DeployOnBuild>True</DeployOnBuild>
<OutDir>bin\deploy\</OutDir> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:06:39.060

通过一些定制，这个解决方案最终为我工作：

[http://www.edsquared.com/2011/01/31/Customizable+Output+Directories+For+TFS+2010+Build.aspx](http://www.edsquared.com/2011/01/31/Customizable+Output+Directories+For+TFS+2010+Build.aspx)

基本上，按照该链接的建议进行操作，但也利用了新的解决方案配置（我称之为 TeamBuild），而不是条件属性定义。

我相信使这一切工作的关键是将 outputDirectory 作为 TeamBuildOutDir 参数传递给 MSBuild。将此变量引用嵌入 OutDir 或 OutputPath 变量允许 Team Build 构建到正确的暂存位置，然后自动将文件从该位置复制到放置文件夹。

我将更进一步，摆脱整个 _PublishedWebSites 的事情，但这将完全在构建工作流程中完成。

**编辑：** TFS 2013 通过简单的构建配置选项本机支持此功能：

![在此处输入图像描述](../Images/a2a337e95c3373fd381781ef53a73e42.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:00:56.640

看看这个线程和这篇文章。 [Team Build：使用 MSDeploy 在本地发布](https://stackoverflow.com/questions/4041836/team-build-publish-locally-using-msdeploy) 由于您需要 Web 项目的所有文件，因此您需要触发发布过程，并且通过调整该过程的目标，您可以将所有文件复制到您需要的位置。我认为他回答中的选项（2）对你有用。我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:29:40.750

正如我在您的参考[链接](http://lajak.wordpress.com/2011/07/30/customize-binaries-folder-in-tfs-team-build-part-2/)中看到的，它只会编译和打包二进制文件。它不会按照其中提到的步骤部署网站。

如果要获取`_PublishedWebSites`文件夹下的 .html、.css、.js 等，则需要进行**Web 部署**。这可以通过单击`publish`VS 项目的右键菜单中的选项并选择**Publish Method** as **File System**来手动完成。

但是，由于您需要在构建中自动执行此操作并将其放入自定义放置文件夹中，因此您可能需要通过调用`AspNetCompiler`任务来操作您的 MSBuild 脚本。您可以在[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms164291%28v=vs.100%29.aspx)上获得更多信息。通过指定`TargetPath`调用此目标的时间，您可以将 Web 文件部署在适当的自定义放置文件夹中。

快乐的脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-29T10:31:36.107

你检查过这个博客吗，这解决了我想要自定义 TeamBuild 输出目录的问题。 [使用 TFS 2013 可定制的 O/P](http://blog.stangroome.com/2014/02/10/override-the-tfs-team-build-outdir-property-in-tfs-2013/)

[使用 TFS 2012 和 .NET Framework 4.5 的可定制 O/P](http://blog.stangroome.com/2012/02/03/override-the-tfs-team-build-outdir-property/)

# c# - 从 .NET 调用时，从 SQL Server 2005 返回的 Xml 原始数据不正确

> ID：14899353
> 
> 赞同：1
> 
> 时间：2013-02-15T16:46:06.067
> 
> 标签：c#, .net, sql, sql-server-2005, .net-3.5

我有一个存储过程，它返回`FOR XML RAW`类似于以下格式的 XML 原始数据：

```
<row 
    codelistid="1" codelistname="LOCATION" 
    codeid="1557" codename="Hors Ile de France" languageid="1" /> 
```

当我在 Management Studio 中运行存储过程时，返回了 1765 行的数据，但是当我从 C# 代码调用该过程时，它似乎是 882 的一半左右。似乎如果两行具有相同的 codeid，那么只有一个是回来

我正在使用 xmlreader 逐行返回 XML，然后将每一行作为 XElement 附加到我的结果 XDocument 中。

这是我检索数据的方式：

```
 using (SqlConnection conn = new SqlConnection(con))
        {
            XDocument results = new XDocument(
           new XElement("results"));

            using (SqlCommand cmd = conn.CreateCommand())
            {
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "MyStoredProc";
                conn.Open();
                var count = 0;
                using (XmlReader reader = cmd.ExecuteXmlReader())
                {

                    while (reader.Read())
                    {

                        results.Root.Add(XElement.Parse(reader.ReadOuterXml()));
                        count += 1;

                    }
                }

                return results;

            }
        } 
```

如果我将 SPROC 更改为输出数据而不是 XML 并通过 SQLDataReader 读取它似乎工作正常。

任何人对为什么会发生这种情况有任何想法，因为我希望数据库返回 XML？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:48:36.050

`reader.Read()`并且`reader.ReadOuterXml()`在同一个循环中会跳过一行。试试这个 ：

```
using (XmlReader reader = cmd.ExecuteXmlReader())
            {
               reader.Read(); //For initial first read.
               while (!reader.EOF)
                {

                    results.Root.Add(XElement.Parse(reader.ReadOuterXml()));
                    count += 1;

                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:40:47.767

如果您将查询数据放入 DataSet 中，然后将该数据集写入 XML 会怎样？

```
public GetXmlFromDataSet()
{
    DataSet myDataSet = new DataSet();
    DbDataAdapter myDataAdapter = DatabaseFactory.CreateDataAdapter();
    DbConnection DatabaseConnection = new DatabaseConnection(/*put appropriate values here*/);
    XmlTextWriter myXmlTextWriter = new XmlTextWriter(/*put appropriate values here*/)

    myDataDapter.SelectCommand = DatabaseFactory.CreateCommand();
    myDataDapter.SelectCommand.CommandType = CommandType.StoredProcedure;
    myDataAdapter.CommentText = "EXEC MyStoredProc";
    myDataAdapter.SelectCommand.Connection = DatabaseConnection;
    myDataAdapter.Fill(myDataSet);
    myDataSet.WriteXml(myXmlWriter);
} 
```

# python - Python 多处理，ValueError：对已关闭文件的 I/O 操作

> ID：14899355
> 
> 赞同：3
> 
> 时间：2013-02-15T16:46:11.810
> 
> 标签：python, file, multiprocessing

我在使用 Python 多处理包时遇到问题。下面是一个简单的示例代码，说明了我的问题。

```
import multiprocessing as mp
import time

def test_file(f):
  f.write("Testing...\n")
  print f.name
  return None

if __name__ == "__main__":
  f = open("test.txt", 'w')
  proc = mp.Process(target=test_file, args=[f])
  proc.start()
  proc.join() 
```

当我运行它时，我收到以下错误。

```
Process Process-1:
Traceback (most recent call last):
  File "C:\Python27\lib\multiprocessing\process.py", line 258, in _bootstrap
    self.run()
  File "C:\Python27\lib\multiprocessing\process.py", line 114, in run
    self.target(*self._args, **self._kwargs)
  File "C:\Users\Ray\Google Drive\Programming\Python\tests\follow_test.py", line 24, in test_file
    f.write("Testing...\n")
ValueError: I/O operation on closed file
Press any key to continue . . . 
```

在创建新进程期间，文件句柄似乎以某种方式“丢失”。有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T17:11:13.157

我过去也有类似的问题。不确定它是在多处理模块中完成还是`open`默认设置 close-on-exec 标志，但我确定在主进程中打开的文件句柄在多处理子进程中*关闭*。

显而易见的解决方法是将文件名作为参数传递给子进程的 init 函数并在每个子进程中打开一次（如果使用池），或者将其作为参数传递给目标函数并在每个子进程中打开/关闭调用。前者需要使用全局来存储文件句柄（这不是一件好事）——除非有人能告诉我如何避免这种情况:)——后者可能会导致性能下降（但可以直接与 multiprocessing.Process 一起使用）。

前者的例子：

```
filehandle = None

def child_init(filename):
    global filehandle
    filehandle = open(filename,...)
    ../..

def child_target(args):
    ../..

if __name__ == '__main__':
    # some code which defines filename
    proc = multiprocessing.Pool(processes=1,initializer=child_init,initargs=[filename])
    proc.apply(child_target,args) 
```

# knockout.js - 剔除映射、初始值和计算值

> ID：14899356
> 
> 赞同：0
> 
> 时间：2013-02-15T16:46:12.347
> 
> 标签：knockout.js, knockout-mapping-plugin

我一直在构建模型系统，当时我发现使用映射插件可能会让我的生活更轻松，尽管我面临的问题很少。

问题是我在初始化时没有数据，但我仍然想向屏幕提供空属性。我通过在初始化时定义模型以及稍后用值更新模型来实现这一点。

```
App.Models.User = {
    name: null,
    username: null,
    gender: null,
    email: null,
    img: null
};
var me = ko.mapping.fromJS(App.Models.User); 
```

这工作得很好，虽然我不确定这是完成任务的最佳方式。

但是现在我想更新该`img`属性，我不确定是否要从中创建一个新属性或让该属性自行更新，想知道如何在这两种情况下完成。

我来自服务器的数据看起来有点像这样

```
{"me":
    {
        "username"      :"john",
        "email"         :"johndoe@gmail.com",
        "name"          :"John Doe",
        "gender"        :"male",
        "img"           :"profile_img_john.jpg"
    }
} 
```

我想更新 img 或从中创建一个新属性并制作它`images/profile_img_john.jpg`

希望这一切都有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:59:36.520

我会拆分淘汰视图模型创建和初始化部分。它将让您首先创建没有任何真实数据的视图模型，将其绑定到 HTML，然后使用真实数据进行更新。

请参阅我在这里为您创建的示例：http: [//jsfiddle.net/apuchkov/zscP2/](http://jsfiddle.net/apuchkov/zscP2/)

```
var data = { "me":
    {
        "username"      :"john",
        "email"         :"johndoe@gmail.com",
        "name"          :"John Doe",
        "gender"        :"male",
        "img"           :"profile_img_john.jpg"
    }
} 

var User = function(data) {
     this.name = ko.observable();
     this.username = ko.observable();
     this.gender = ko.observable();
     this.email = ko.observable();
     this.img = ko.observable();

     this.update(data);
 };

ko.utils.extend(User.prototype, {
    update: function(data) {
        this.name(data.name || "");
        this.username(data.username || "");
        this.gender(data.gender || "");
        this.email(data.email || "");
        this.img(data.img || "default-image-url.png");
    }
});

//firstly create viewmodel without any data
var user = new User({});
ko.applyBindings(user);

//then set data later 
user.update(data.me); 
```

# postgresql - Yii 与 PostGis，选择经度和纬度

> ID：14899359
> 
> 赞同：1
> 
> 时间：2013-02-15T16:46:18.190
> 
> 标签：postgresql, yii, postgis

我在我的应用程序中将 Yii 与 PostgreSQL 和 PostGIS 一起使用。我有一个带有“位置”字段的模型“用户”。位置字段的内容对人类来说毫无意义，但是 Postgres 可以转换位置字段的值并使用 ST_asText 方法将其转换为经度和纬度。我在我的模型中为经度和纬度创建了虚拟字段。当我保存我的模型时，我使用 beforeSave 和 afterSave 方法将位置设置为正确的值。

我现在的问题是我希望在模型创建时填充纬度和经度虚拟字段（使用数据库中的现有对象）。我在想可能有类似 beforeSelect 和 afterSelect 之类的东西，我可以使用它们来附加查询与额外的计算列，因此能够在查询运行后处理从该额外列返回的值。

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:12:10.310

我能够很容易地解决这个问题。当我应该一直在寻找 beforeFind 和 afterFind 时，我在 CActiveRecord 类中寻找 beforeSelect 和 afterSelect 方法。

我是这样做的。欢迎任何改进建议:)

```
public function beforeFind(){
    $criteria = new CDbCriteria;
    $criteria->select = "*,ST_asText(location) as location";
    $this->dbCriteria->mergeWith($criteria);
    return parent::beforeFind();
}

public function afterFind(){
    $location = str_replace('POINT(','',$this->location);
    $location = str_replace(')','',$location);
    $location = explode(" ", $location);

    $this->lon = $location[0];
    $this->lat = $location[1];
    return parent::afterFind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-15T10:49:24.950

我用 Yii2 遇到了这个问题，这就是我解决它的方法。

1.  覆盖`find()`AR 的方法并定义您自己的`ActiveQuery`类：

    ```
    public static function find()
    {
        $query =  new MyActiveQueryClass(get_called_class());
        return $query->select('*, ST_AsGeoJSON(location) AS location');
    } 
    ```

2.  在`afterFind()`你将有 geo-json 并且你可以得到 lat/lng：

    ```
    public function afterFind()
    {
        parent::afterFind();

        $geoJson = json_decode($this->location, true);
        $this->lat = $geoJson['coordinates'][0];
        $this->lng = $geoJson['coordinates'][1];
    } 
    ```

Yii2 就是这样。请记住在保存之前将您的 lat/lng 转换为正确的对象。我的是地理专栏。这是一个奖励：

```
public function beforeSave($insert)
{
    //create field as expression
    if(!empty($this->lat) && !empty($this->lng))
        $this->location = new \yii\db\Expression("'POINT({$this->lat} {$this->lng})'");

    return parent::beforeSave($insert);
} 
```

# php - Ajax 表单：发回的值错误

> ID：14899362
> 
> 赞同：0
> 
> 时间：2013-02-15T16:46:44.990
> 
> 标签：php, javascript, jquery, ajax, forms

我试图弄清楚为什么当 JavaScript 被激活时这个表单总是返回“错误”，但是当 JavaScript 被停用时它应该像它一样工作。
它与`echo "success"`and有关系`echo "error"`，但我真的无法找出问题所在。我试图回应`1`or `2`, `true`or `false`- 它永远不会起作用。为什么？

我的 jQuery 代码：

```
$("form").submit(function () {

        var name     = $( "input[name=name]" ),
            mail     = $( "input[name=email]" ),
            message  = $( "textarea[name=message]" );

        var data = "name=" + name.val() + "&mail=" + mail.val() + "&message="  + encodeURIComponent(message.val());

        $.ajax({
            url: "my_form.php",
            type: "POST",
            data: data,
                success: function ( data ) {
                    if ( data == "success" ) {
                        alert( "Everyhting is good." );
                    } else {
                        alert( "Error" );
                    }
                }
        });

        return false;
}) 
```

和 PHP 部分：

```
$name    = $_POST["name"];
$email   = $_POST["email"];
$message = $_POST["message"];

function checkEmail( $e ) {

    $isValid = true;

    if ( strlen( $e ) === 0 ) {
        $isValid = false;
    }

    if ( !preg_match( "/^((?:(?:(?:\w[\.\-\+]?)*)\w)+)\@((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/", $e ) ) {
        $isValid = false;
    }

    if ( $isValid == true ) {
        echo "success";
    } else {
        echo "error";
    }
}

checkEmail( $email ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:49:38.060

您`mail`在数据字符串中调用电子邮件并期望`$_POST['email']`在 php 中。

```
var data = "name=" + name.val() + "&mail=" + mail.val() + "&message="  + encodeURIComponent(message.val()); 
```

将上面的行更改`mail`为如下所示的电子邮件。

```
var data = "name=" + name.val() + "&email=" + mail.val() + "&message="  + encodeURIComponent(message.val()); 
```

# html - 文章>p+时间 - 文章是否太短？

> ID：14899367
> 
> 赞同：5
> 
> 时间：2013-02-15T16:47:08.440
> 
> 标签：html, semantic-markup

我写了一个标记：
![在此处输入图像描述](../Images/c0f2a515be33f711cf078c4d04e81c06.png)

像文章一样呈现每条推文是否正确或太短而我应该使用 ul 或其他东西？

```
<section>
    <h1>Recent tweets</h1>
    <article>
        <p>I'm looking...</p>
        <time>3 day ago</time>
    </article>
    <article>
        <p>@mediatemple will ...</p>
        <time>6 days ago</time>
    </article>
    <article>
        <p>Corpora Business</p>
        <time>10 days ago</time>
    </article>
</section> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:55:15.313

真的没关系。WHATWG 对此仍然很模糊。我的问题是h1。这是页面上唯一的东西吗？页面标题是否也是“最近的推文”？如果是这样，你很好。但我觉得这就像一个更大页面上的插件。如果是这样，出于语义/可访问性的原因，请考虑使用较低级别的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:57:39.807

是的，每个微博条目都应该是一个`article`，因为它符合[定义](http://www.w3.org/TR/html5/sections.html#the-article-element)：

> 该`article`元素表示文档、页面、应用程序或站点中的**自包含组合，并且原则上是****可独立分发或可重复使用**的，例如在联合中。这可以是论坛帖子、杂志或报纸文章、博客条目、用户提交的评论、交互式小部件或小工具，或任何其他**独立的内容项目**。

如果需要/适当，您也可以在`ul`/ （或者，根据上下文， ）中列出它们：`ol`

```
<section>
  <h1>Recent tweets</h1>
  <ul>
    <li><article>…&lt;/article></li>
    <li><article>…&lt;/article></li>
    <li><article>…&lt;/article></li>
  </ul>
</section> 
```

如果您想包含元数据（如作者姓名），`footer`则应使用该元素。那也是你的`time`元素应该放置的地方。如果作者姓名将链接到可以联系作者的个人资料，`address`则应使用该元素（因为它与该页面相关联，`article`而不是与整个页面相关联，这是使用该`article`元素进行微博条目的另一个原因）。

```
<article>
  <p>…&lt;/p>
  <footer>
    <time>…&lt;/time>
  </footer>
</article> 
```

# asp.net-mvc-3 - VS2010 在 RazorGeneratorMvcStart 中添加断点

> ID：14899373
> 
> 赞同：0
> 
> 时间：2013-02-15T16:47:16.020
> 
> 标签：asp.net-mvc-3, visual-studio-2010, debugging, breakpoints, razorgenerator

当我尝试调试我的 MVC 3 应用程序时，会在静态类中自动添加一个断点`RazorGeneratorMvcStart`

在该行的静态`Start()`方法中：

`ViewEngines.Engines.Insert(0, engine);`

当我在运行期间删除断点时，它仍然会回来，并且大多数页面在每次调用时都会多次点击此方法。

有没有办法可以防止添加此断点或导致此处添加断点的原因。我检查了文件，它没有在我能找到的任何地方显示断点。但是每次我点击视图时，它都会添加到课程中。不调试时文件不显示符号。我也尝试在那里添加然后删除断点，但这没有效果，下次视图命中时会在此处添加断点。

如果我禁用断点并在 VS 中打开文件，它似乎绕过了该操作。但是下一个动作调用断点返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:12:00.233

尝试调试 -> 删除所有断点（Ctrl + Shift + F9）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:48:53.053

尝试在应用程序未运行时删除断点

# java - Java 应用程序在调用 PreparedStatement 后挂起（针对 SQL Server DB）

> ID：14899379
> 
> 赞同：2
> 
> 时间：2013-02-15T16:47:41.837
> 
> 标签：java, sql-server-2008-r2, locking, prepared-statement, jtds

我试图掌握一个与 SQL Server 2008 R2 DB 对话的 Java 应用程序。该应用程序将数据导入数据库，并具有“测试模式”；数据库请求被包装在一个事务中，该事务在最后回滚。

对于特定数据集，该工具会禁用触发器，然后在导入后重新启用它。在测试模式下，第一次通过时，一切都按预期工作——“导入”的数据集没有问题。但是，如果我尝试重复该练习，应用程序会在尝试禁用触发器的位置挂起。

查看 SQL Profiler，我可以看到一个 RPC:Completed 跟踪项，这表明 SQL Server 已接收并成功处理了请求。在这一点上，我希望 Java 应用程序能够获得控制权并继续 - 除了它没有，我正在努力思考下一步该往哪里看。

**Java代码：**

```
String sql = "ALTER TABLE MyTable DISABLE TRIGGER ALL";
PreparedStatement stmt = mDBConnection.prepareStatement (sql);
stmt.execute(); 
```

**跟踪文本数据：**

```
declare @p1 int
set @p1=1
exec sp_prepare @p1 output,N'',N'ALTER TABLE MyTable DISABLE TRIGGER ALL',1
select @p1 
```

**问**：知道可能是什么问题吗？或者关于我如何进一步调查的任何建议？

**更新**：当然，上面的跟踪只显示了 sp_prepare。有相应的 sp_execute 语句 - 并且缺少 RPC:Completed 跟踪项，表明问题出在 SQL Server 端。修改后的跟踪显示 RPC:Starting 条目 ('exec sp_execute 1')，但没有匹配的 RPC:Completed。

正如预期的那样，我可以在 SSMS 中运行 sp_prepare 和 sp_execute （前提是我删除了 set 语句）——毕竟它在第一次通过时就可以执行。

**解决方案：** 使用 sp_who2（见下文），我可以看到第一个连接/spid 在第二个被阻止；在提交时，数据库连接已关闭，但在回滚时却没有。由于我在测试和回滚模式下运行，这是我问题的症结所在 - 关闭连接解决了问题。

**sp_who2：**

```
CREATE TABLE #sp_who2 
(
   SPID INT,  
   Status VARCHAR(1000) NULL,  
   Login SYSNAME NULL,  
   HostName SYSNAME NULL,  
   BlkBy SYSNAME NULL,  
   DBName SYSNAME NULL,  
   Command VARCHAR(1000) NULL,  
   CPUTime INT NULL,  
   DiskIO INT NULL,  
   LastBatch VARCHAR(1000) NULL,  
   ProgramName VARCHAR(1000) NULL,  
   SPID2 INT,
   RequestID int
) 
GO

INSERT INTO #sp_who2 EXEC sp_who2
GO

SELECT spid, status, blkby, command, ProgramName FROM #sp_who2 WHERE DBName = 'rio7_bch_test'
GO

DROP TABLE #sp_who2
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:49:04.037

不要`PreparedStatement`为此使用 a 。只使用一个普通的`Statement`.

```
Statement stmt = mDBConnection.createStatement(sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:14:38.827

“ALTER TABLE”语句是 DDL（数据定义语言）。DDL 必须等待所有 DML（数据操作语言）语句完成。如果您有一个未关闭的 ResultSet、Statement 或 PreparedStatement 正在查询该表或该表的视图，或者与该表连接，或者在关闭自动提交的情况下进行更新 - 那么这就是不完整的 DML。

在像这样更改表之前，请确保在其上打开的每个可能的结果集都已显式关闭，类似地任何语句。这将确保所有 DML 都是完整的，并且可以执行 DDL。

一般来说，使用 PreparedStatements 优于 Statements。PreparedStatement 编译一次。每次执行的语句。这意味着像您这样的未参数化语句没有区别，并且任何参数化一次都有潜在的好处。

假设一个受信任的 JDBC 实现，当 PreparedStatement 不起作用时，Statement 没有时间可以工作。

您可能还会发现[这个问题](https://stackoverflow.com/questions/2045330/disable-trigger-hangs)很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:51:34.043

这听起来很像您的锁未正确释放并阻止您的 DDL 执行。

当您的语句挂起时，运行存储过程`sp_who2`。

在该过程的结果中，您将确定哪个会话正在阻止您的 DDL，然后您可以采取适当的措施。

# c# - 如何在后面的代码中获取使用 Raduploader 动态创建的文本框的值？

> ID：14899380
> 
> 赞同：5
> 
> 时间：2013-02-15T16:47:44.597
> 
> 标签：c#, javascript, jquery, asp.net, telerik

我使用[AsyncUpload](http://demos.telerik.com/aspnet-ajax/asyncupload/examples/additionalfields/defaultcs.aspx)

* * *

```
 <telerik:RadAsyncUpload runat="server" ID="rada_attach" OnClientFileUploaded="onClientFileUploaded"
                                MultipleFileSelection="Disabled" InitialFileInputsCount="1" MaxFileInputsCount="1"
                                Width="100%" /> 
```

* * *

```
function onClientFileUploaded(radAsyncUpload, args) {
    var row = args.get_row(),
        inputName = radAsyncUpload.getAdditionalFieldID("TextBox"),
        inputType = "text",
        inputID = inputName,
        input = createInput(inputType, inputID, inputName),
        label = createLabel(inputID),
        br = document.createElement("br");

    row.appendChild(br);
    row.appendChild(input);
    row.appendChild(label);

}

function createInput(inputType, inputID, inputName) {
    var input = document.createElement("input");

    input.setAttribute("type", inputType);
    input.setAttribute("id", inputID);
    input.setAttribute("name", inputName);

    return input;
} 
```

* * *

我想访问 .cs 中的文本框（动态创建的）。

怎么做 ？

* * *

完整答案：

```
var $ = $telerik.$;

function onClientFileUploaded(radAsyncUpload, args) {
    var $row = $(args.get_row());
    var inputName = radAsyncUpload.getID("TextBox");
    var inputType = "text";
    var inputID = inputName;
    var input = createInput(inputType, inputID, inputName);
    var label = createLabel(inputID);
    $row.append("<br/>");
    $row.append(label);
    $row.append(input);
}

function createInput(inputType, inputID, inputName) {
    var input = '<input type="' + inputType + '" id="' + inputID + '" name="' + inputName + '" />';
    return input;
}

function createLabel(forArrt) {
    var label = '<label for=' + forArrt + '>info: </label>';
    return label;
} 
```

* * *

```
 foreach (UploadedFile UF in rada_attach.UploadedFiles)
                {
                    if (UF.GetFieldValue("TextBox") != null)
                    {
                        OBJ.File_name = UF.GetFieldValue("TextBox");
                    }
                    else
                    {
                        OBJ.File_name = UF.GetName();
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:36:08.907

在我看来，文档很清楚。检查您参考的页面上的描述选项卡。您可以在回发时使用以下代码访问动态文本框的值：

```
if (rada_attach.UploadedFiles.Count > 0) {
    for (var index = 0; index < rada_attach.UploadedFiles.Count; ++index) {
        var textBoxValue = rada_attach.UploadedFiles[index].GetFieldValue("TextBox");
    }
} 
```

顺便说一句，这个场景在这里很受欢迎：[向上传的文件添加信息](http://www.telerik.com/help/aspnet-ajax/asyncupload-adding-information.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T08:36:16.033

您需要检查回发时的`Request.Form`值（在已发布的表单中）并检查所有已回发的字段。

我猜如果它是在客户端动态创建的，您将不知道文本框的名称/ID？请注意，它将是.cs`name`中的对象将看到的表单字段。`Request`

只有在您回发后，您才能访问 .cs 中的该值

# php - 将选项值变量（javascript）传递给 php 查询。Joomla 网站

> ID：14899381
> 
> 赞同：1
> 
> 时间：2013-02-15T16:47:45.487
> 
> 标签：php, javascript-events

一段时间以来，我一直在为我的脚本而苦苦挣扎。

我需要找到一种方法将我的选项值变量 $varState(from dropdownbox) 传递/发送到 mysql 查询。我已经尝试过ajax，但我似乎无法让它工作。

[您可以在我的开发站点](http://model-engineering.nl/acceptatie/verkooppunten.html)上找到示例，我的代码如下：

```
<form name="klassiek" >
<select name="landen"  onChange="updateprovincie(this.selectedIndex)"  style="width: 250px"  >
<option value="">kies land</option>
<option value="NL">Nederland</option>
<option value="BE">Belgie</option>
<option value="ts">test</option>
</select>

<br />
<select name="provincie" id="provincie" action="/acceptatie/verkooppunten.html"  method="post"  size="4" style="width: 250px" onClick=" myVariable()" >
</select>

</form>
<br>

</head>
<body>

<script type="text/javascript">

var landenlist=document.klassiek.landen
var provincielist=document.klassiek.provincie

var provincie=new Array()
provincie[0]=""
provincie[1]=["Drenthe|drenthe", "Flevoland|flevoland", "Friesland|friesland", "Gelderland|gelderland", "Groningen|groningen", "Gelderland|gelderland", "Limburg|limburg","Noord Brabant|noordbrabant", "Noord Holland|noord holland", "Overijssel|overijssel", "Utrecht|utrecht", "Zeeland|zeeland", "Zuid Holland|zuidholland"]
provincie[2]=["Antwerpen|antwerpenvalue", "Limburg|limburgvalue", "Oost Vlaanderen|oostvlaanderenvalue", "Vlaams Brabant|vlaamsbrabantvalue", "West Vlaanderen|westvlaanderenvalue", "Waals Brabant|waalsbrabantvalue","Henegouwen|hennegouwenvalue","Luik|Luikvalue", "Luxemburg|Luxemburgalue","Namen|namenvalue"] 

function myVariable(){
var state=document.getElementById('provincie').value;
//get value and pass to php script
document.write(state);//need to pass this value to php query
}

function updateprovincie(selectedprovinciegroup)
{
provincielist.options.length=0
  if (selectedprovinciegroup>0)
  { 
  for (i=0; i<provincie[selectedprovinciegroup].length; i++)
  provincielist.options[provincielist.options.length]=new Option(provincie[selectedprovinciegroup][i].split("|")[0], provincie[selectedprovinciegroup][i].split("|")[1],provincie[selectedprovinciegroup][i].split("|")[2])
  }
}

</script>

<br /><br />
<?php
$varState= $_POST["provincie"];
//print_r($varState);

$query3="SELECT * FROM jos_contact_details WHERE catid=80 && state = '$varState'" ;
$result=mysql_query($query3);

$num=mysql_numrows($result);
while($rec = mysql_fetch_assoc($result))
?>
<table border="0" cellspacing="2" cellpadding="2">
<tr>
<td><font face="Arial, Helvetica, sans-serif">Naam</font></td>
<td><font face="Arial, Helvetica, sans-serif">Adres</font></td>
<td><font face="Arial, Helvetica, sans-serif">Postcode</font></td>
<td><font face="Arial, Helvetica, sans-serif">Land</font></td>
<td><font face="Arial, Helvetica, sans-serif">Productgroep</font></td>
</tr>

<?php

$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"name");
$f2=mysql_result($result,$i,"address");
$f3=mysql_result($result,$i,"state");
$f4=mysql_result($result,$i,"country");
$f5=mysql_result($result,$i,"productgroep");
?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f5; ?></font></td>
</tr>

<?php
$i++;
}

mysql_close();
//einde  code 
```

我希望有人能帮帮忙。

```
//ajaxcode in function myVariable()

function myVariable(str){ var
> state=document.getElementById('provincie').value; //get value and pass
> to php script //document.write(state);
> 
> 
> if (str=="")   {   document.getElementById("provincie").innerHTML=""; 
> return;   }  if (window.XMLHttpRequest)   {// code for IE7+, Firefox,
> Chrome, Opera, Safari   xmlhttp=new XMLHttpRequest();   } else   {//
> code for IE6, IE5   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");  
> } xmlhttp.onreadystatechange=function()   {   if
> (xmlhttp.readyState==4 && xmlhttp.status==200)
>     {
>     document.getElementById("provincie").innerHTML=xmlhttp.responseText;
>     }   } xmlhttp.open("GET","/acceptatie/verkooppunten.html?varState="+str,true);
> xmlhttp.send(); }
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:49:50.843

快速浏览一下，您的 PHP 脚本似乎`$varState= $_POST["provincie"]`在您的 AJAX 发送`"GET","/acceptatie/verkooppunten.html?varState="+str`.

更改您的 PHP 以查找`$_GET['varState']`它应该可以工作。

# asp.net - 如何修复 System.Data.SqlClient.SqlException：超时已过期

> ID：14899387
> 
> 赞同：5
> 
> 时间：2013-02-15T16:48:16.430
> 
> 标签：asp.net, sql, sql-server-2008

您好当我尝试通过 URL 访问我的应用程序时，我收到包含以下错误的错误屏幕。以前我通过在后端使用 dbcc 命令修复它..bt 现在这不起作用..

超时已过。在操作完成之前超时时间已过或服务器没有响应。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

这是我从 .NET 应用程序调用的存储过程的源代码。

```
 USE [TCO]
GO
      ALTER PROC [dbo].[SP_TCOV3] (@year INT) AS
DECLARE @rpt_year INT;
IF @year > 2011 
BEGIN
SET @rpt_year = 2011;
END
ELSE
BEGIN   
SET @rpt_year = @year;
END
DECLARE @From_Date DATETIME='01-01-2012'  -- mm/dd/yyyy
DECLARE @End_Date DATETIME=(SELECT TOP 1 DATEADD(dd, -DAY(DATEADD(m,1,dbo.ManpowerCost.payment_date)), DATEADD(m,1,dbo.ManpowerCost.payment_date)) as value
FROM dbo.ManpowerCost order by payment_date desc)  

(
SELECT
        allApps.[Application Name],          
        '$'+(CAST((CAST(allApps.[BAM Staff Support] AS DECIMAL(10,2))) as varchar(50)))AS [BAM Staff Support],
        '$'+(CAST((CAST(allApps.[BAM Non-Shell Support] AS DECIMAL(10,2))) as varchar(50)))AS [BAM Non-Shell Support] ,
        '$'+(CAST((CAST(allApps.[BSM DBA Support] AS DECIMAL(10,2))) as varchar(50)))AS [BSM DBA Support] ,
        '$'+(CAST((CAST(allApps.[Middleware Support] AS DECIMAL(10,2))) as varchar(50)))  AS [BSM Middleware Support],
        '$'+(CAST((CAST(allApps.[IRM Logical Access] AS DECIMAL(10,2))) as varchar(50)))AS [IRM Logical Access] ,
        '$'+(CAST((CAST(allApps.[Application Licensing and Maintenance] AS DECIMAL(10,2))) as varchar(50))) AS [Application License and Maintenance],
        '$'+(CAST((CAST(allApps.[Middleware Licensing and Maintenance] AS DECIMAL(10,2))) as varchar(50)))as [Middleware License and Maintenance],  
        '$'+(CAST((CAST(allApps.[Database Licensing and T-System DBA Maintenance] AS DECIMAL(10,2))) as varchar(50))) AS [TS DBA Maintenance],
        '$'+(CAST((CAST(allApps.[Hosting and Storage] AS DECIMAL(10,2))) as varchar(50)))AS [Hosting and Storage]  ,
        '$'+(CAST((CAST(allApps.[Telecom Connection Charge] AS DECIMAL(10,2))) as varchar(50))) AS [Telecom Connection Charges],
        '$'+(CAST((CAST(allApps.[Total Application TCO] AS DECIMAL(10,2))) as varchar(50)))AS [Total Application TCO] 
FROM
        --dbo.FN_TCOV3(@rpt_year)AS allApps 
        dbo.FN_TCOV3_Report(@From_Date,@End_Date)AS allApps 

)ORDER BY allApps.[Application Name] 
```

如果我不使用上面使用的开始日期和结束日期参数并调用**dbo.FN_TCOV3(@rpt_year)AS allApps**而不是 dbo.FN_TCOV3_Report(@From_Date,@End_Date)AS allApps，则相同的过程正在工作，唯一的区别. b/w 这两个函数是一个只需要一年作为参数，另一个需要 2 个参数，即开始和结束日期。

我需要同时使用这两个参数，请协助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T17:03:52.007

如果您的查询**确实**需要运行很长时间，您可以通过设置对象的`CommandTimeout`属性来延长 TimeOut 期限（ 5 分钟超时；也可以相应地设置相应页面的 Server TimeOut）`SqlCommand``myCom.CommandTimeout = 300;`

也就是说，如果您不知道为什么您的查询运行这么长时间，您**必须**调查并修复它。

搜索 ：

*   缺失索引
*   锁
*   低效的算法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T19:39:43.820

在 Sql Server Management Studio 中，突出显示查询并单击显示估计的执行计划。索引搜索很好。如果存在索引扫描，请在表上的列上创建索引。这解决了我的问题。

# android - 如何在 onPause 和 onResume 上静音和取消静音

> ID：14899395
> 
> 赞同：2
> 
> 时间：2013-02-15T16:48:34.240
> 
> 标签：android, audio, onresume, onpause, mute

当我将音频设置为静音时遇到问题，`onPause()`我`onResume()`尝试取消静音但没有成功。

代码：

```
 protected void onPause() {
            super.onPause();
            Log.d(TAG, "onPause");
            setStreamMute(true);        
         }

    protected void onResume() {
            super.onResume();
            Log.d(TAG, "onResume");
            setStreamMute(false);
        }

    public void setStreamMute (boolean state){
            Log.d(TAG,"SetMute: "+state);
            myAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
            myAudioManager.setStreamMute(AudioManager.STREAM_MUSIC, state);
      } 
```

欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:31:53.120

```
MediaPlayer ourSong;
int length; // To save the last seconds where the music has paused 
```

在你的**OnCreate**

```
ourSong = MediaPlayer.create(yourActivity.this, YourSong);
        ourSong.setLooping(true);
ourSong.start(); 
```

在你**暂停**功能

```
ourSong.pause();
length = ourSong.getCurrentPosition(); 
```

在你**恢复**功能

```
ourSong.seekTo(length);
ourSong.start(); 
```

### 笔记：

你应该做一个文件夹`row`，然后`YourSong`必须是这样的`R.raw.yoursong`

# ios - 如何将具有十六进制值的 NSString 转换为 Char - Objective C

> ID：14899399
> 
> 赞同：0
> 
> 时间：2013-02-15T16:48:54.380
> 
> 标签：ios, objective-c, nsstring, hex

我有一个 NSString @"460046003600430035003900" 代表十六进制颜色 FF6C59。

如何从上述格式的字符串中获取十六进制颜色：

例如：460046003500430032003000 = FF5C20

300030004200350033004500 = 00B53E

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:22:24.657

假设这确实是您所得到的，并且您没有做任何事情来进一步混淆它，请设置一个循环将字符串切割成 2 字节字符串。忽略每隔一个 2 字节的组合。将未忽略的值视为十六进制并转换为 int，从而产生 ASCII 字符的值。对 char 值执行标准十六进制转换以转换为 0..15 int 值。将 int 值累积为 int 中的 4 位量。

所以你必须进行两次 hex->int 转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:31:15.180

```
#import <Foundation/Foundation.h>

@interface WeirdFormatDecoder : NSObject
@end

@implementation WeirdFormatDecoder

+(NSString*) decode:(NSString*)string
{
    if (!string) return @"";
    NSAssert([string length]%2==0, @"bad format");
    NSMutableString *s = [NSMutableString new];
    for (NSUInteger i=0; i<[string length]-2; i=i+2) {
        char c = [[string substringWithRange:NSMakeRange(i, 2)] integerValue];
        if (c==0) continue;
        else if (c<41){
            [s appendFormat:@"%c",[@"0123456789" characterAtIndex:c-30]];
        } else {
            [s appendFormat:@"%c",[@"ABCDEF" characterAtIndex:c-41]];
        }
    }
    return s;
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSLog(@"%@",[WeirdFormatDecoder decode:@"460046003600430035003900"]); // FF6C59
        return EXIT_SUCCESS;
    }
} 
```

# asp.net-mvc - 使用 Razor 在 MVC 视图中引用集合内的属性

> ID：14899406
> 
> 赞同：0
> 
> 时间：2013-02-15T16:49:14.743
> 
> 标签：asp.net-mvc, razor

我有一个看起来像这样的模型：

```
public class MyClass {
   public string Id { get; set; }
   public List<SubItem> SubItems { get; set; }
}

public class SubItem {
   public string Key { get; set; }
   public string Value { get; set; }
} 
```

在我看来，我想将表单数据提交给 MyClass，这样我就可以创建一个 MyClass 的对象。它看起来像这样：

```
@model Models.MyClass

@using (Html.BeginForm()){

<div>
   @Html.DisplayFor(model => model.Id): @Html.EditorFor(model => model.Id)
</div>
<div>
   @Html.DisplayFor(model => ???): @Html.EditorFor( ??? )
</div>

<input type="submit" value="create"/>
} 
```

你看到我有疑问的问号（？？？）。我如何才能添加到这个集合？我知道它是一种子形式，但我如何做到这一点没有太多复杂性。如果我需要显示这些项目，我会做一个 foreach(var item in Model.SubItems) { ... }。但这是不同的。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:02:49.160

这实际上与单独显示每个项目没有什么不同：

```
@for (int i=0; i<Model.SubItems.Length; i++)
{
    <div>
        @Html.DisplayFor(m => m.SubItems[i].Key): @Html.EditorFor(m => m.SubItems[i].Key)
    </div>
    <div>
        @Html.DisplayFor(m => m.SubItems[i].Value): @Html.EditorFor(m => m.SubItems[i].Value)
    </div>
} 
```

**更新**

更改了上面的代码以确保正确生成名称和索引值。此外，这现在也适用于没有初始项目的情况。只需将`i<Model.SubItems.Length`条件更改为`i<3`，或您想要的任何迭代次数。

# dynatree - 如何在自定义节点上的 dynatree 内创建链接？

> ID：14899412
> 
> 赞同：0
> 
> 时间：2013-02-15T16:49:34.633
> 
> 标签：dynatree

我正在使用 dynatree 并添加了一个带有页面链接的自定义悬停菜单；但是，我无法弄清楚为什么我指向其他页面的链接没有触发..

这是我的树代码：

```
<script type="text/javascript">
        $(function() {
            $("#catTree2").dynatree({
                checkbox: false,
                selectMode: 3,
                 children: [
                    {title: "First Year", isFolder: true,
                            children: [
                        {title: "ESUNRS 110 (Intro to Nursing I)"},
                        {title: "ESUNRS 112 (Intro to Nursing II)"},
                        {title: "ESUNRS 120 (Pharmacology in Nursing)"} ]},     
                    {title: "Second Year", isFolder: true,
                            children: [
                        {title: "ESUNRS 200 (Seminar I)"},
                        {title: "ESUNRS 201 (Seminar II)"},
                        {title: "ESUNRS 220 (Nursing of Adults I)"},
                        {title: "ESUNRS 221 (Nursing of Adults II)"},
                        {title: "ESUNRS 224 (Child and Mental Health Nursing I)"},
                        {title: "ESUNRS 225 (Child and Mental Health Nursing II)"} ]},  
                    {title: "Third Year", isFolder: true,
                            children: [
                        {title: "ESUNRS 300 (Seminar III)"},
                        {title: "ESUNRS 320 (Maternal-Newborn Nursing)"},
                        {title: "ESUNRS 322 (Management in Nursing)", isFolder: true,
                            children: [
                            {title: "Example Questions"} ]}, ]},        
                    ],
                onCustomRender: function (node) {
                    var html = "<span class='dynatree-title' href='#'>";
                        html += "<span class='td'>";
                        html += node.data.title;
                        html += "</span>";
                        html += "<span class='td'>";
                        html += "<ul id='options'>";
                        html += "<li class='image'>";
                        html += "<img src='/Icons/cog.png' alt='Options Menu'/>";
                        html += "<ul class='optionsMenu' style='top:20px;right:-119px;'>";
                        html += "<li>";
                        html += "<a href='#' class='createFolderOpen'>";
                        html += "New Folder";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='#' class='editFolderOpen'>";
                        html += "Edit Folder";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='#' class='deleteFolderOpen'>";
                        html += "Delete Folder";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='#' class='shareFolderOpen'>";
                        html += "Share Folder";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "Create New Question";
                        html += "<ul style='top:136px;right:-120px;'>";
                        html += "<li>";
                        html += "<a href='http://74.39.250.15/questions_create.asp'>";
                        html += "Multiple Choice";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='questions_create_tf.asp'>";
                        html += "True/False";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='questions_create_essay.asp'>";
                        html += "Essay";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='questions_create_fitb.asp'>";
                        html += "Fill in the Blank";
                        html += "</a>";
                        html += "</li>";
                        html += "</ul>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='questions_import.asp'>";
                        html += "Import Questions";
                        html += "</a>";
                        html += "</li>";
                        html += "<li>";
                        html += "<a href='#' class='exportQuestionsOpen'>";
                        html += "Export Questions";
                        html += "</a>";
                        html += "</li>";
                        html += "</ul>";
                        html += "</li>";
                        html += "</ul>";
                        html += "</span>";
                        html += "<span class='td'>";
                        html += "55";
                        html += "</span>";
                        html += "</span>";
                        return html;
                },
                //children: treeData,
                onSelect: function(select, node) {
                    // Get a list of all selected nodes, and convert to a key array:
                    var selKeys = $.map(node.tree.getSelectedNodes(), function(node) {
                        return node.data.key;
                    });
                    $("#echoSelection4").text(selKeys.join(", "));

                    // Get a list of all selected TOP nodes
                    var selRootNodes = node.tree.getSelectedNodes(true);
                    // ... and convert to a key array:
                    var selRootKeys = $.map(selRootNodes, function(node) {
                        return node.data.key;
                    });
                    $("#echoSelectionRootKeys4").text(selRootKeys.join(", "));
                    $("#echoSelectionRoots4").text(selRootNodes.join(", "));
                },
                onDblClick: function(node, event) {
                    node.toggleSelect();
                },
                onKeydown: function(node, event) {
                    if (event.which == 32) {
                        node.toggleSelect();
                        return false;
                    }
                }
            });
        });
</script> 
```

为什么我的链接不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T09:20:47.307

有点旧，但我使用：

```
onCustomRender: function(node) {
var html = "<a href='xxxxx?FileId=" + node.data.key + "'>";                             
html += xxxxxxxxxxxx+"</a>";
return html;
} 
```

# networking - NSlookup - 非权威答案

> ID：14899415
> 
> 赞同：1
> 
> 时间：2013-02-15T16:49:53.127
> 
> 标签：networking, dns, firewall, ping, nslookup

当我在防火墙后面 nslookup 时，我得到了这样的非权威答案

* * *

非权威回答：

名称：situs.com

地址：173.44.39.70

* * *

但如果我从公共互联网访问 nslookup 我得到了这个

* * *

名称：situs.com

地址1：173.44.39.70 173.44.39.70.static.quadranet.com

* * *

我可以 ping 防火墙后的 sitius.com，但我无法访问他们的网站。我做了 tracert ，我在去目的地的路上停在了某个地方，但在我们的 ISP 之外。我收到这样的消息：

* * *

错误代码 10060：连接超时

背景：网关无法及时收到您尝试访问的网站的响应。这可能表明网络拥塞，或者网站遇到技术问题。

日期：2013 年 2 月 15 日下午 3:50:37 [格林威治标准时间]

服务器：xxxx-fw-01.xxxxxx.com

来源：防火墙

* * *

有没有人可以帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:04:39.713

我认为你有两个不同的问题。一是您的 ISP 的防火墙可能会阻止您访问外部站点的标准 DNS 端口 (53)，从而迫使您使用他们的 DNS。这可能是也可能不是一件好事，至少它解释了“非权威答案”，您*可能*仍然可以访问该站点本身。

另一件事是，为什么您无法访问远程网站（端口 80）。可能是该站点实际上已关闭或超载。

如果您的 ISP 的 DNS 不仅给您“非权威”，而且给您*错误*的答案，那么真正的邪恶将是。通过这种方式，他们可以有效地阻止您访问该网站。有一种解决方法，您可以手动重新配置 DNS，但这相当不方便。

我会询问您的 ISP，如果您对他们的回答不满意，请更改为另一个 ISP。

# python - 使用不同的参数重定向到相同的视图

> ID：14899418
> 
> 赞同：0
> 
> 时间：2013-02-15T16:49:57.180
> 
> 标签：python, django, redirect, apache

我有这个设置：

**网址.py**

```
url(r"^(?P<id1>\d+)/(?P<id2>\d+)/$", "project.views.view", name="view"), 
```

**匹配视图.py**

```
def view(request, id1, id2):
    if request.method == "POST":
        """a lot of processing"""
        return HttpResponseRedirect(reverse('view', args=(id1, different_id2))) 
```

不幸的是，当这种情况发生时，它实际上解决为：

```
return HttpResponseRedirect(reverse('view', args=(id1, id2))) 
```

所以我得到了与提交帖子相同的页面。

这是一个问题吗？调用重定向到相同的视图，但参数不同。

（我删除了原来的名字——这太令人困惑了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:52:29.023

不，这应该有效。您的代码中可能存在设置 id 的错误，或者返回`HttpResponseRedirect`太早。进入调试器，看看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:03:53.973

谢谢你们的帮助。你是对的。

问题是我有辅助功能（将视图拆分成更小的部分）并且忘记为辅助添加返回：

```
def helper(request, id1, id2):
    """a lot of processing"""
    return HttpResponseRedirect(reverse('view', args=(id1, different_id2)))

def view(request, id1, id2):
    if request.method == "POST":
        helper(request, ...)
    """process get""" 
```

应该

```
def view(request, id1, id2):
    if request.method == "POST":
        return helper(request, ...)
    """process get""" 
```

# python - 从 os.environ 获取 unicode 答案？

> ID：14899419
> 
> 赞同：1
> 
> 时间：2013-02-15T16:49:59.843
> 
> 标签：python, windows, environment-variables

我想调用`os.environ['UserProfile']`我的windows系统。该值可能是 unicode，但`os.environ`dict`str`仅返回类型，非 ascii 字符转换为问号。

```
>>> os.environ['UserProfile']
'C:\\Users\\????' 
```

如何`UserProfile`在Windows下获得正确的路径？

*   我正在使用 Python 2.7.3
*   我正在使用 Windows 7，但解决方案必须也适用于 XP、Vista 和 8。

# ruby-on-rails - 时间戳更改时如何跳过 before_save？

> ID：14899420
> 
> 赞同：0
> 
> 时间：2013-02-15T16:50:00.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, callback

更改时间戳时如何跳过触发`before_save`回调？

我试过

```
def before_save_callback
  unless created_at_changed?
    # do somethinh
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:04:02.777

```
before_save :my_method, :unless => :updated_at_changed? 
```

created_at 不会更改，除非您手动更改它。我建议手动更新 updated_at 然后使用上面的代码。

# c# - 如何向上导航几个文件夹？

> ID：14899422
> 
> 赞同：140
> 
> 时间：2013-02-15T16:50:04.427
> 
> 标签：c#, .net, console-application

一种选择是执行 System.IO.Directory.GetParent() 几次。有没有更优雅的方式从执行程序集所在的位置向上移动几个文件夹？

我要做的是找到一个文本文件，该文件位于应用程序文件夹上方的一个文件夹中。但程序集本身位于 bin 内，即应用程序文件夹深处的几个文件夹。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2015-06-17T21:29:16.487

其他简单的方法是这样做：

```
string path = @"C:\Folder1\Folder2\Folder3\Folder4";
string newPath = Path.GetFullPath(Path.Combine(path, @"..\..\")); 
```

**注意**这上升了两个级别。结果将是： `newPath = @"C:\Folder1\Folder2\";`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-09-30T08:45:59.337

如果 c:\folder1\folder2\folder3\bin 是路径，则以下代码将返回 bin 文件夹的路径基本文件夹

```
//string directory=System.IO.Directory.GetParent(Environment.CurrentDirectory).ToString());

string directory=System.IO.Directory.GetParent(Environment.CurrentDirectory).ToString(); 
```

即，c:\folder1\folder2\folder3

如果你想要文件夹 2 路径，那么你可以通过

```
string directory = System.IO.Directory.GetParent(System.IO.Directory.GetParent(Environment.CurrentDirectory).ToString()).ToString(); 
```

然后你会得到路径 c:\folder1\folder2\

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-15T16:52:29.427

您可以使用`..\path`上一层，`..\..\path`从路径上上两层。

你也可以使用`Path`类。

[C# 路径类](http://msdn.microsoft.com/en-us/library/system.io.path%28v=vs.90%29.aspx)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-05-21T09:54:28.253

这对我来说最有效：

`string parentOfStartupPath = Path.GetFullPath(Path.Combine(Application.StartupPath, @"../"));`

获得“正确”路径不是问题，添加“../”显然可以做到这一点，但在那之后，给定的字符串将不可用，因为它只会在末尾添加“../”。将其包围`Path.GetFullPath()`将为您提供绝对路径，使其可用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-11-07T07:46:52.050

```
public static string AppRootDirectory()
        {
            string _BaseDirectory = AppDomain.CurrentDomain.BaseDirectory;
            return Path.GetFullPath(Path.Combine(_BaseDirectory, @"..\..\"));
        } 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-15T16:56:44.157

如果要声明级别数并将其放入函数中，也许可以使用函数？

```
private String GetParents(Int32 noOfLevels, String currentpath)
{
     String path = "";
     for(int i=0; i< noOfLevels; i++)
     {
         path += @"..\";
     }
     path += currentpath;
     return path;
} 
```

你可以这样称呼它：

```
String path = this.GetParents(4, currentpath); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-11T18:26:02.113

以下方法搜索以应用程序启动路径（*.exe 文件夹）开头的文件。如果在那里找不到文件，则会搜索父文件夹，直到找到文件或到达根文件夹。`null`如果找不到文件，则返回。

```
public static FileInfo FindApplicationFile(string fileName)
{
    string startPath = Path.Combine(Application.StartupPath, fileName);
    FileInfo file = new FileInfo(startPath);
    while (!file.Exists) {
        if (file.Directory.Parent == null) {
            return null;
        }
        DirectoryInfo parentDir = file.Directory.Parent;
        file = new FileInfo(Path.Combine(parentDir.FullName, file.Name));
    }
    return file;
} 
```

注意：`Application.StartupPath`通常用于 WinForms 应用程序，但也适用于控制台应用程序；但是，您必须设置对程序集的引用`System.Windows.Forms`。如果您愿意，可以替换`Application.StartupPath`为。
`Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-01-28T18:17:31.650

C＃

```
string upTwoDir = Path.GetFullPath(Path.Combine(System.AppContext.BaseDirectory, @"..\..\")); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-08-23T17:34:45.983

在静态方法中隐藏对 Directory.GetParent(path) 的循环调用是可行的方法。

乱用“..”和 Path.Combine 最终会导致与操作系统相关的错误，或者由于相对路径和绝对路径之间的混淆而导致失败。

```
public static class PathUtils
{
    public static string MoveUp(string path, int noOfLevels)
    {
        string parentPath = path.TrimEnd(new[] { '/', '\\' });
        for (int i=0; i< noOfLevels; i++)
        {
            parentPath = Directory.GetParent(parentPath ).ToString();
        }
        return parentPath;
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-20T01:12:31.100

我有一些虚拟目录，我不能使用目录方法。所以，我为那些感兴趣的人做了一个简单的拆分/连接功能。虽然不那么安全。

```
var splitResult = filePath.Split(new[] {'/', '\\'}, StringSplitOptions.RemoveEmptyEntries);
var newFilePath = Path.Combine(filePath.Take(splitResult.Length - 1).ToArray()); 
```

因此，如果您想将 4 向上移动，您只需更改`1`to`4`并添加一些检查以避免异常。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-20T12:35:23.490

这可能会有所帮助

```
string parentOfStartupPath = Path.GetFullPath(Path.Combine(Application.StartupPath, @"../../")) + "Orders.xml";
if (File.Exists(parentOfStartupPath))
{
    // file found
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-05-06T19:07:56.127

如果您知道要导航到的文件夹，请找到它的索引，然后找到子字符串。

```
 var ind = Directory.GetCurrentDirectory().ToString().IndexOf("Folderame");

            string productFolder = Directory.GetCurrentDirectory().ToString().Substring(0, ind); 
```

# sql - #1111 - sql 中组函数错误的无效使用

> ID：14899430
> 
> 赞同：1
> 
> 时间：2013-02-15T16:50:23.893
> 
> 标签：sql, select, sum, mysql-error-1111

有谁知道这个错误的解决方案：#1111 - 组函数的无效使用

这是我的 SQL：

```
SELECT leerlingen.leerlingnummer, voornaam, tussenvoegsel, achternaam, klas, leerlingen.bestemming 
FROM betalingen, leerlingen, bestemmingen
WHERE leerlingen.leerlingnummer = betalingen.leerlingnummer AND SUM( betalingen.bedrag ) > bestemmingen.bedrag
GROUP BY leerlingen.leerlingnummer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:54:44.783

您不能在谓词查询 (WHERE) 中引用聚合函数 (SUM) 的结果，您必须在选择中指定聚合，然后使用“ [Having](http://msdn.microsoft.com/en-us/library/ms180199.aspx) ”子句过滤该集合。

# c - 在调用 fstat 之前调用 fsync 的任何理由

> ID：14899435
> 
> 赞同：1
> 
> 时间：2013-02-15T16:50:35.613
> 
> 标签：c, filesystems, fsync, fstat

我有一段遗留代码在调用以确定目标文件的文件大小`fsync`之前发出调用。`fstat`（特别是代码只是从 stat 结构中访问 st_size 。）

看过文档后，我不认为这是一个必要的电话，但我想要专家的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:47:23.190

在正确实现的文件系统上，发出调用`fsync`或`fdatasync`不应影响任何后续调用的结果`stat`//调用`fstat`。`lstat`它的唯一效果应该是任何未刷新的写入，以及在 的情况下`fsync`，任何修改的元数据都将提交到永久存储。`stat`无论实际数据是否已进入永久存储，它的变体都可以很好地处理缓存写入。

也就是说`fstat`，您正在研究的代码段中是否需要是语义问题，取决于如何使用结果`fstat`。例如：

*   如果由于`fsync`需要调用才能获得当前元数据的误解而使用它`stat`，那么您可能可以将其删除。

*   如果它用于例如写入某种检查点数据，那么它并不是完全不相关的，尽管调用顺序可能需要颠倒 - 对于一个不断增长的文件，检查点数据需要指示文件中肯定已经完成的部分永久存储，因此调用`fstat`，*然后*调用`fsync`* 然后写入检查点信息是有意义的。

*   如果它被用作 I/O 绑定操作的某种 UI 进度监视器，那么显示实际提交到磁盘的数据量可能是有意义的。但是，在这种情况下，监视器的精度并不重要，因此调用顺序可能没那么重要。

那么，在您的案例中使用*的*结果如何？`fstat`

*免责声明：*可能存在文件系统实现，例如网络/分布式实现，其中调用`fsync`可能会更新文件的本地客户端元数据缓存。在那种情况下，该`fsync`调用确实可以提高代码的可靠性。但是，如果是这种情况，那么您可能会遇到比*性能*问题更严重的问题...

# ios - 迁移大型 Core Data 数据库崩溃

> ID：14899436
> 
> 赞同：2
> 
> 时间：2013-02-15T16:50:35.927
> 
> 标签：ios, objective-c, xcode, core-data

我有一个将产品存储在核心数据文件中的应用程序。这些产品包括作为“可转换”数据的图像。现在我尝试使用轻量级迁移添加一些属性。当我用一个小型数据库对其进行测试时，它运行良好，但是当我使用一个接近 500 MB 的非常大的数据库时，应用程序通常会因为内存不足而崩溃。有谁知道如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T18:12:11.490

您必须使用其他迁移选项之一。自动轻量级迁移过程使用起来真的很方便。但它有一个缺点，即一次将整个数据存储加载到内存中。两份，真的，一份用于迁移前，一份用于迁移后。

首先，是否可以重新创建或重新下载这些数据？如果是这样，您也许可以使用从旧版本到新版本的自定义映射模型。使用自定义映射模型，您可以指示某些属性不会被迁移，从而通过丢弃该数据来减少内存问题。然后在迁移完成后，重新创建或重新下载该数据。

如果不是这种情况... Apple 建议使用多个映射模型的多通道技术。如果您有多种实体类型会影响大型数据存储大小，那么它可能会有所帮助。基本上，您最终会在不同的通道中迁移不同的实体类型，因此您可以避免一次加载所有内容的开销。

如果**不是**这种情况（例如，膨胀都来自同一实体类型的实例），那么是时候编写您自己的自定义迁移代码了。这将涉及设置两个 Core Data 堆栈，一个使用现有数据，一个使用新模型。运行现有数据存储，在新存储中创建新对象。如果您分批执行此操作，您将能够控制内存。一般的方法是：

1.  在新模型中创建新实例并*仅复制属性*。您还不能设置关系，因为新数据存储中可能不存在相关对象。保留一个从旧存储到新存储的可变字典映射`NSManagedObjectID`s，以供下一步使用。为了保持低内存使用：
    *   创建目标存储对象后，立即使用`refreshObject:mergeChanges`with`NO`作为第二个参数释放源对象的内存。
    *   每 10 个实例（或 50 个，或其他）保存目标托管对象上下文的更改，然后保存`reset`它。间隔是一种平衡行为——太频繁，你会不必要地放慢速度，太少，内存使用会增加。
2.  做第二遍，在目标商店中建立关系。对于每个源对象，
    *   使用您创建的对象 ID 映射找到相应的目标对象
    *   遍历源对象的关系。对于每一个，找到相应的目标对象，同样使用对象 ID 映射。
    *   根据结果​​设置目标对象的关系。

**当你在做的时候，**考虑一下为什么你的数据存储这么大。您是否在数据存储中存储了一堆二进制数据块？如果是这样，请确保您在新模型中使用“允许外部存储”选项。

# javascript - 达到一定高度时出现的项目（滚动效果）

> ID：14899437
> 
> 赞同：0
> 
> 时间：2013-02-15T16:50:38.063
> 
> 标签：javascript, jquery, scroll

我刚刚找到了这段代码：

脚本类型="文本/javascript">

```
$(document).ready(function() {

    $(window).scroll(function () {
          var height = $('body').height();
          var scrollTop = $('body').scrollTop();
          var opacity = 1;

          if(scrollTop > 400) {
              opacity = 0;
          }

       $('.social').css('opacity', opacity);
    });
}); 
```

虽然，我想扭转这些影响。我希望元素开始 opactiy : 0 并在达到一定高度时淡入（在本例中为 400）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:28:53.517

虽然我不确定你是否真的自己尝试过，但我会说：

```
$(document).ready(function() {

    $(window).scroll(function () {
          var height = $('body').height();
          var scrollTop = $('body').scrollTop();
          var opacity = 0;

          if(scrollTop > 400) {
              opacity = 1;
          }

       $('.social').css('opacity', opacity);
    });
}); 
```

（未经测试，但我非常有信心这就是您要寻找的。）

# c# - 如何在 C# 中单击按钮下载图像？

> ID：14899443
> 
> 赞同：0
> 
> 时间：2013-02-15T16:51:02.230
> 
> 标签：c#, asp.net, download

有没有办法下载用户上传的图像？我有以下内容：首先，用户单击马赛克中的图像以详细查看它；然后图像在 asp:image 标记中生成，在该步骤中，他们应该通过单击按钮来下载它。我遇到的问题是图像是在 asp:image 标签中生成的，而不是带有名称的实际图像本身。我必须下载的代码只获取存储在文件夹中的图像。下面是代码：

```
protected void btnDownload_Click(object sender, EventArgs e)
{
    string path = @"C:\inetpub\wwwroot\PSCSearchEngine\MemberPages\Images\live.jpg";        
    System.IO.FileInfo file = new System.IO.FileInfo(path);
    if (file.Exists)
    {
        Response.Clear();
        Response.ContentType = MimeType(Path.GetExtension(path));
        Response.AddHeader("Content-Disposition", 
            string.Format("attachment; filename = {0}",
            System.IO.Path.GetFileName(path)));
        Response.AddHeader("Content-Length", file.Length.ToString("F0"));
        Response.TransmitFile(path);
        Response.End();
    }
    else
    {
        Response.Write("This file does not exist.");
    } 
} 
```

下面是预览图像的代码：

```
@"~/MemberPages/UpdatePhoto.aspx?SiteKey=" + foo.Site_ID 
    + "&TimeStamp=" + foo.timestamp[n1 - 1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T11:02:56.657

在 C# 中单击按钮下载图像文件的代码

```
protected void btnDownload_Click(object sender, EventArgs e)
{
    string filename=MapPath("birds.jpg");
    Response.ContentType = "image/JPEG";
    Response.AddHeader("Content-Disposition", "attachment; filename=" + filename+ "");

    Response.TransmitFile(filename);
    Response.End();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-02T09:59:35.893

你可以试试这个：

```
using (var client = new System.Net.WebClient())
{
    var _imagebytes = client.DownloadData(string.Format(@"~/MemberPages/UpdatePhoto.aspx?SiteKey={0}&TimeStamp={1}", foo.Site_ID, foo.timestamp[n1 - 1]));
    Response.Clear();
    Response.ContentType = "image/jpg";
    Response.AddHeader("Content-Disposition", string.Format("attachment; filename = {0}", "MyImage.jpg"));
    Response.AddHeader("Content-Length", _imagebytes.Length.ToString("F0"));
    Response.OutputStream.Write(_imagebytes, 0, _imagebytes.Length);
    Response.End();
} 
```

# sql - 不带 MAX 函数的查询

> ID：14899444
> 
> 赞同：-1
> 
> 时间：2013-02-15T16:51:01.443
> 
> 标签：sql, oracle, function, max

我需要进行查询以获取没有 MAX 功能的薪水最高的员工。我搜索了执行此操作的方法，发现“rownum”与“order by”相结合，但要正确执行此操作，我们需要对 from 子句进行子查询，我不能这样做，因为老师禁止这样做。

有人知道解决方案吗？

谢谢并原谅我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:58:50.060

你可以使用一些不常用的 SEMI-JOIN：

```
WHERE employee.salary >= ALL (...subquery...) 
```

还有许多其他可能性，例如`NOT EXISTS`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:19:45.850

```
SELECT deptno, e1.empno, e1.sal
  FROM scott.emp e1
 WHERE e1.sal >= ALL (SELECT e2.sal
                 FROM   scott.emp e2
                 WHERE  e2.deptno = 20 -- or e2.deptno = e1.deptno
                 )
 ORDER BY deptno
 /

DEPTNO  EMPNO   SAL
------------------------
10     7839    5000
20     7788    3000
20     7902    3000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:40:55.933

```
Select employee FROM 
   (Select * FROM tblEmployees ORDER BY Salary DESC)
       Where rownum = 1; 
```

返回具有最高薪水的员工，而不使用等级或最大值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:45:27.440

```
with emp_data as (
    select empno,
           sal,
           deptno,
           row_number() over (order by sal desc) as rn
    from emp
) 
select * 
from emp_data 
where rn = 1; 
```

这既不`max()`是在子句中使用也不是使用子查询`from`（尽管有人可能会争辩说使用公用表表达式是一种绕过“无子查询”要求的方法）

# javascript - 如何使用 msdropdown 插件禁用选项

> ID：14899447
> 
> 赞同：1
> 
> 时间：2013-02-15T16:51:15.243
> 
> 标签：javascript, html, msdropdown

创建 msDropdown 插件后是否可以禁用选项？

我更好地解释了我的问题。我想将带有图标、文本和其他内容的 html 放入每个选项中，所以首先我创建一个空选择，然后使用**add**函数添加每个选项：

```
dropdown.add({text:$price.html(), value:'normal', className:'normal'}); 
```

问题是，如果发生某种情况，我必须禁用一个选项，但无法通过使用插件设置来设置*禁用选项。*

只有在调用**msDropdown**`disabled=disabled`函数之前将相关参数设置为*select*才能禁用选项，但我不能使用此解决方案，因为我必须将动态*html*放入选项文本中。

 ***还有另一种方法吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:24:07.290

我找到了解决方案。

我将选择创建为空，并像以前一样使用**添加**功能填充每个选项，但是当这种情况发生时，只需执行以下操作：

```
var dropdown = $('select[name="priceType"]').msDropdown().data("dd");

if(credits_error) { // option must be disabled
    dropdown.destroy(); // Make it a simple select
    $('select[name="priceType"] option').attr('disabled', 'disabled');
    dropdown = $('select[name="priceType"]').msDropdown().data("dd");
} 
```

这种方式首先我通过调用**destroy**函数使它成为一个简单的*选择*，然后我正确设置禁用属性并创建一个新的**msDropdown select**。

 ****它对我有用，我在 IE、FF 和 Chrome 上测试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:15:56.010

是的，这是可能的。它可以通过使用`disabled`选项标签的属性来完成：

```
<select id="payments" name="payments" style="width:250px;">
    <option value="" data-description="Choos your payment gateway">Payment Gateway</option>
    <option value="amex" data-image="http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/images/msdropdown/icons/Amex-56.png" data-description="My life. My card...">Amex</option>
    <option value="Discover" data-image="http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/images/msdropdown/icons/Discover-56.png" data-description="It pays to Discover...">Discover</option>
    <option value="Mastercard" data-image="http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/images/msdropdown/icons/Mastercard-56.png" data-title="For everything else..." data-description="For everything else...">Mastercard</option>
    <option value="cash" data-image="http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/images/msdropdown/icons/Cash-56.png" data-description="Sorry not available..." disabled="true">Cash on devlivery</option>
    <option value="Visa" data-image="http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/images/msdropdown/icons/Visa-56.png" data-description="All you need...">Visa</option>
    <option value="Paypal" data-image="http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/images/msdropdown/icons/Paypal-56.png" data-description="Pay and get paid...">Paypal</option>
</select> 
```

“现金”选项将被禁用。

这是一个工作小提琴：http: [//jsfiddle.net/NKQRj/1/](http://jsfiddle.net/NKQRj/1/)

编辑在第二个示例中，数据是从 JSON 数据加载的，使用：

```
$("#payments").msDropDown({byJson:{data:jsonData, name:'payments2'}}).data("dd"); 
```

填充元素。

您可以使用`disabled: true`属性在 JSON 数据中将选项定义为禁用：

```
{image:'http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/images/msdropdown/icons/Cash-56.png', description:'Sorry not available...', value:'cash', text:'Cash on devlivery', disabled:true}, 
```

这是一个工作小提琴：http: [//jsfiddle.net/NKQRj/3/](http://jsfiddle.net/NKQRj/3/)*******

# javascript - 嵌套资源路由触发父资源路由

> ID：14899451
> 
> 赞同：2
> 
> 时间：2013-02-15T16:51:26.097
> 
> 标签：javascript, ruby-on-rails, ruby, routes, ember.js

我的应用程序中有这样的**路由器**：

```
TravelApi.Router.map ->
  @resource 'stars', ->
    @resource 'star', { path: '/:star_id' } 
```

当我去时，`http://localhost/#/stars` 我在 Web 控制台中看到有一个请求

> 获取 http://localhost:3000/stars

当我去时，`http://localhost/#/stars/1` 我在 Web 控制台中看到有两个请求

> 获取 http://localhost:3000/stars
> 
> 获取 http://localhost:3000/stars/1

**问题：为什么第二种情况有两个请求？**

* * *

明星**路线**：

```
TravelApi.StarRoute = Ember.Route.extend(
  model: (params) ->
    TravelApi.Star.find(params.star_id)
)

TravelApi.StarsRoute = Ember.Route.extend(
  model: ->
    TravelApi.Star.find()
) 
```

还有我的**模板**：application.js.hbs.hamlbars

```
= hb "linkTo 'stars'" do
  stars
%div= hb 'outlet' 
```

星星.js.hbs.hamlbars

```
%ul
  =hb "each star in controller" do
    %li<
      =hb 'star.name' 
```

star.js.hbs.hamlbars

```
Star:
= hb 'name' 
```

**存储**.js.coffee

```
TravelApi.store = DS.Store.create(
  revision: 11
  adapter: DS.RESTAdapter.create()
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:36:44.233

嵌套资源的工作方式，如果第一个请求返回一个 Promise（ember 数据应该这样做），则在 ajax 请求完成之前不会调用嵌套资源/路由模型函数。

按照这个逻辑，应该只有 1 个 ajax 调用。

`TravelApi.Star.find()`应该创建一个 ajax 请求来获取所有记录 `TravelApi.Star.find(1)`不应该需要一个 ajax 请求，因为记录应该在那里。

但是，在您的情况下，`star`资源不会等待`stars`资源完成 ajax。原因是`TravelApi.Star.find()`立即返回结果（商店中的所有可用记录当然是空的），而不是承诺（我认为）。

为了解决这个问题，您可以通过在模型中编写以下内容来返回 findQuery 承诺： `TravelApi.Star.find({})`

这将导致`star`资源等待`stars`资源完成其 ajax 请求。

路线应如下所示：

```
TravelApi.StarsRoute = Ember.Route.extend
  model: ->
    TravelApi.Star.find({})

TravelApi.StarRoute = Ember.Route.extend
  model: (params) ->
    TravelApi.Star.find(params.star_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:00:45.410

加载 /star/:id 时，您似乎不想获取所有星星

直接访问 /star/1 会获取所有星星的原因是`star`路由嵌套在里面`stars`

您嵌套路由的原因是因为您的 UI 是嵌套的。这意味着当您查看一颗星星时，在您的 UI 中的某个位置（可能在侧边栏中），您正在显示星星列表。在这种情况下，您需要该请求`localhost:3000/stars`，因为即使您正在查看一颗星星，您也需要显示所有星星。这意味着请求的 ajax 是必要的，因此不是问题。

但是，如果您在查看一颗星星时没有显示所有星星的列表，那么您的路线首先不应该嵌套。在这种情况下，将您的路线修复为如下所示：

```
TravelApi.Router.map ->
  @resource 'stars'
  @resource 'star', { path: '/:star_id' } 
```

# javascript - How do I trigger a the _rearange method on a jqueryUI sortable

> ID：14899452
> 
> 赞同：0
> 
> 时间：2013-02-15T16:51:33.383
> 
> 标签：javascript, jquery, jquery-ui

I have implemented my own scrolling method on a jqueryui sortable list so that when the sortable helper gets close to the edge of the container the div is automatically scrolled even if the helper is stationary. This works beautifully and the behavior is exactly what I want and for this use case is far better than the built in 'scroll' functionality in jqueryUI's sortable widget itself.

However while scrolling the placeholder positions are not updated.

From delving into the jqueryui sourcecode I can see that the _rearange method is only called when the helper is being dragged. Since the container is scrolling and the helper itself is stationary, the method checking for helper/item intersects is not getting called and the placeholder position does not get updated until the user stops scrolling and then drags the helper again.

What I need to do is find a way to programmatically call the _rearange method from within my scroll interval so that the placeholder position gets updated while the container is scrolling.

How can I access these methods and properties externally?

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:19:48.850

To access a standard widget's private method, you need two things:

1.) a reference to the selector widget's instance data 2.) name of private method you need to invoke.

You didn't post any code, so I'm going to use sample code here. But to get at sortable's "_rearrange" method, you would do something like:

$('#your-target-selector').data('sortable')._rearrange();

# php - 将电子商务网站从 CoreCommerce 转移到 OpenCart

> ID：14899454
> 
> 赞同：0
> 
> 时间：2013-02-15T16:51:42.500
> 
> 标签：php, e-commerce, opencart, export-to-csv

我正在将 CoreCommerce 网站转换为 OpenCart。

CoreCommerce 是一个托管的电子商务应用程序。

我需要导出客户、订单、产品、类别和评论（或者尽可能多地导出）。corecommerce 导出的客户 CSV 文件不包含他们的密码。你知道这将如何解决吗？我应该为每个客户创建随机密码并通过电子邮件发送给他们并让他们知道吗？大约有16000名客户。

另外，您是否有任何可以推荐的 OpenCart CSV 导入工具的经验？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:54:56.683

只需要求您的客户在他们尚未尝试登录您的网站时重置密码即可。

我首先检查 CSV 文件，然后创建一个 php 函数以正确导入所有文件，因为我认为这两个应用程序没有相同的数据库字段。

# jquery - jQuery CuteTime 插件和 Ajax 数据 - IE + Safari 中的错误转换？

> ID：14899455
> 
> 赞同：1
> 
> 时间：2013-02-15T16:51:42.573
> 
> 标签：jquery, plugins, time

我有一个带有[liveticker](http://www.gute-mathe-fragen.de/liveticker)的站点，它加载新的论坛事件并将它们添加到 HTML 表中。

对于时间字段，我正在 ajax 加载每个事件的日期时间（例如`2013-02-15 17:28:03`），并通过[jquery 插件可爱](http://tpgblog.com/cutetime/)时间将它们转换为人类可读的格式，例如`22 minutes ago`.

CuteTime 的问题是[最近的版本](https://github.com/theproductguy/CuteTime)（从 2010 年开始）在处理动态加载的 AJAX 数据方面存在一些问题。

我**目前的解决方案**似乎有点工作：

1.首先ajax调用将整个论坛事件加载为html表，然后我分配了cutetime插件：

```
// initial load at page startup
$('#responsecontainer').load('./liveticker', {ajax:1}, function() {
    // convert datetime to readable date format
    $('.timestamp').cuteTime();
}); 
```

2.然后我每 30 秒检查一次新事件，并在每次加载的数据上分配 cuteTime：

```
$('#responseEvents').load('./liveticker', {ajax:lastevent}, function() {
    // stuff...
    // convert datetime to readable date format
    $('.timestamp').cuteTime();
}) 
```

这似乎适用于 Firefox 和 Chrome。但是，在 Internet Explorer 9 中，所有`$(.timestamp)`元素都分配了相同的文本：`just now`.

有谁知道这个错误/问题的解决方案？

--

注意：在cutetime-site 上，我发现了一条关于ajax的[评论。](http://tpgblog.com/cutetime/#comment-3594)那里有人陈述了他的解决方法：

> 我不得不破解我的应用程序来制作额外的字段，所以我首先将所有值复制到我所有的跨度中，然后调用cuteTime。

但我不确定这是否以任何方式与我现在面临的 Internet Explorer 错误有关......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:32:54.087

这不是 AJAX 调用。实际上，我使用了正常的日期时间格式（来自 mysql）并尝试使用可爱时间转换该格式。

阅读开发者的网站，我偶然发现了这句话：

> 时间戳必须是有效的 Date().parse 'able' 格式

也：

> 如果既不存在可爱时间属性也不存在有效对象文本，则假定时间戳为“现在”。

答对了！现在我将日期时间格式化为 ISO8601 日期格式服务器站点：

`$timeCode = date("c", strtotime( $row['datetime'] ));`

我得到这种格式的日期：`2013-02-17T15:26:21+01:00`它适用于所有浏览器中的 js-conversion！

# eclipselink - 获取用户创作的 EclipseLink DatabasePlatform 子类的正确方法是什么？

> ID：14899458
> 
> 赞同：2
> 
> 时间：2013-02-15T16:51:47.647
> 
> 标签：eclipselink

EclipseLink 2.3.2（可能更高版本）中的 Informix 支持有一个相当严重的错误，即未正确执行外连接。我想继承 EclipseLink`InformixPlatform`类来解决这个问题。

由于各种原因，我不想在我的`persistence.xml`. 我宁愿依靠 EclipseLink 发现要使用的适当平台的能力。

显然，开箱即用的 EclipseLink 不知道我的子类。我如何告诉 EclipseLink 我的子类存在，并且应该优先于通常自动发现的子类？

出于比较的目的，Hibernate 在“方言解析器”的标签下提供了一些机制，正是这样做的：交给它一个自定义方言解析器，它让*您*处理自动发现过程。EclipseLink 2.3.2 中的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:20:00.340

`DatabasePlatform`如果不遇到其他错误，就无法以编程方式安装子类。有关详细信息，请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=401388](https://bugs.eclipse.org/bugs/show_bug.cgi?id=401388)。

# magento - Magento 目录过滤器问题

> ID：14899459
> 
> 赞同：0
> 
> 时间：2013-02-15T16:51:47.917
> 
> 标签：magento, magento-1.7

我正在使用 Magento 1.7.0.2 并从头开始建立一个新商店。（以前用旧版本做过这个）

我一直试图在我的侧边栏中获取目录产品过滤器，但没有任何运气。我知道这已被反复询问，简单的答案是在类别设置中将“是锚”选项设置为“是”。对于我想用作过滤器的所有属性，我还将“在分层导航中使用”设置为“可过滤（带有结果）”。尽管如此，过滤器并没有出现在我的侧边栏中。

在我的其他商店中显示路径提示时，过滤器在“frontend/default/MY_THEME/template/catalog/layer/view.phtml”中呈现，但在新商店中，看起来这个模板在显示时根本没有出现路径提示。

如果有人能指出我在哪里寻找或如何开始找出正在发生的事情的正确方向，我将非常感激，因为我已经被困两天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:58:07.773

经过一段时间的研究以及反复试验，我发现在我的情况下，问题是由禁用`Flagbit_FactFinder`. `System > Configuration > Advanced > Disable Modules Output`因此，如果您遇到类似的问题，请转到您的 magento 管理面板并检查上述设置。

# sql - Rails 搜索自引用关系

> ID：14899460
> 
> 赞同：1
> 
> 时间：2013-02-15T16:51:49.960
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, rails-activerecord

我试图让用户通过电子邮件地址搜索自己的朋友。我想做类似的事情：

```
current_user.search('test@fake.com') 
```

并让它返回一组具有该电子邮件地址的当前用户朋友。

所以我在我的用户模型上建立了一个非常基本的友谊关系

```
user.rb
has_many :friendships
has_many :friends, through: :friendships, source: :friend
has_many :inverse_friendships, class_name: 'Friendship', foreign_key: 'friend_id'
has_many :inverse_friends, through: :inverse_friendships, source: :user

friendship.rb
belongs_to :friend, class_name: 'User', foreign_key: 'friend_id'
belongs_to :user 
```

我想在我的用户模型上设置一个方法，可以通过电子邮件地址搜索他们的朋友。它运行得不太好

```
def search(query)
  conditions = ['friends.user_id = ? AND email LIKE ? ', self.id, "%#{query}%"]
  User.includes(:friends).where(conditions)
end 
```

我想我只是不确定如何在这里格式化我的活动记录查询/SQL，因为我正在尝试搜索自引用模型的关系。有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:23:26.027

使用活动记录范围的好时机。[http://guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)

这是一个简单的例子

用户.rb

```
scope :followers, friends.where(:published => true).order("created_at DESC").limit(150) 
```

在你的控制器中

```
@followers = User.followers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:52:06.780

Digital Cake 正朝着正确的方向前进，但并不完全正确。范围是用户的方法，而不是用户。你需要的是：

```
def followers_by_email(email) 
   friends.where("email like ?", "%#{email}%")
end 
```

这将返回一个 ActiveRecord::Relation，您可以将其他条件、顺序、分页等链接到它，如

```
user.followers_by_email("me@example.com").order(:first_name).limit(10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:26:25.420

我似乎在以下方面取得了一些成功：

```
conditions = ['contacts.user_id = ? AND users.email LIKE ? ', self.id, "%#{query}%"]
User.includes(:inverse_friends).where(conditions) 
```

尽管它起作用很奇怪，但我不完全确定它为什么起作用。

# azure - 将元数据添加到 CloudBlob 时出现无效字符异常

> ID：14899461
> 
> 赞同：21
> 
> 时间：2013-02-15T16:51:51.737
> 
> 标签：azure, character-encoding, azure-storage, azure-blob-storage

## 任务

使用原始文件名上传文件，`Azure Blob Storage`并将文件名分配`meta-data`给`CloudBlob`

## 问题

名称中不允许使用这些字符，`meta-data`但可以接受这些字符`blob`：

```
š Š ñ Ñ ç Ç ÿ Ÿ ž Ž Ð œ Œ « » éèëêð ÉÈËÊ àâä ÀÁÂÃÄÅ àáâãäå ÙÚÛÜ ùúûüµ òóôõöø ÒÓÔÕÖØ ìíîï ÌÍÎÏ 
```

## 问题

*   有没有办法将这些字符存储在`meta-data`? 我们是否缺少某些导致此异常的设置？
*   这些字符中的大多数都是某些语言的标准字形，那么如何处理呢？
*   是否有任何可用的文档可以提供有关此问题的建议？我找到`blob`了`meta-data`命名约定，但没有关于数据本身！

## 代码

```
var dirtyFileName      = file.FileName;
var normalizedFileName = file.FileName.CleanOffDiacriticAndNonASCII();

// Blob name accepts almost characters that are acceptable as filenames in Windows
var blob = container.GetBlobReference(dirtyFileName);

//Upload content to the blob, which will create the blob if it does not already exist.
blob.Metadata["FileName"] = normalizedFileName;
blob.Attributes.Properties.ContentType = file.ContentType;

// ERROR: Occurs here!
blob.UploadFromStream(file.InputStream);

blob.SetMetadata();
blob.SetProperties(); 
```

## 错误

[![例外](../Images/4b050b740ccded199aa17a91fa64b67a.png)](https://i.stack.imgur.com/qdlBm.png)

## 参考

*   [命名和引用容器、Blob 和元数据](http://msdn.microsoft.com/en-us/library/dd135715.aspx)
*   [如何在 Azure Blob 存储中支持其他语言？](https://stackoverflow.com/questions/8968585/how-to-support-other-languages-in-azure-blob-storage)
*   [如何从 .NET 中的字符串中删除变音符号（重音符号）？](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)
*   [Azure CloudBlob SetMetadata 失败并显示“指定的元数据无效。它包含不允许的字符。”](https://stackoverflow.com/questions/6884073/azure-cloudblob-setmetadata-fails-with-the-metadata-specified-is-invalid-it-ha)
*   [替换 C# (ascii) 中的字符](https://stackoverflow.com/questions/5459641/replacing-characters-in-c-sharp-ascii/13154805#13154805)

* * *

## 解决方法

文件名中的非法字符只是冰山一角，仅为了这个问题而放大！更大的图景是我们使用索引这些文件[`Lucene.net`](http://lucene.apache.org/core/)，因此需要大量`meta-data`存储在`blob`. *请不要建议将它们全部单独存储在数据库中，只是不要！*到目前为止，我们很幸运只遇到了一个带有变音符号的文件！

因此，目前我们正在努力避免将文件名保存在 中`meta-data`作为解决方法！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T11:37:15.413

刚刚[`azure-sdk-for-net`在 GitHub 上得到团队的](https://github.com/WindowsAzure/azure-sdk-for-net)确认，只有[`ASCII`](http://www.asciitable.com/)字符在`blob meta-data`.

> joeg 评论：
> blob 元数据中支持的字符必须是 ASCII 字符。要解决此问题，您可以转义字符串（百分比编码）、base64 编码等。

[来源在 GitHub](https://github.com/WindowsAzure/azure-sdk-for-net/issues/178)

因此，作为一种解决方法，要么：

*   [按照joeg](https://github.com/joeg)的建议，转义字符串（百分比编码）、base64 编码等
*   使用我在[其他答案](https://stackoverflow.com/a/14899466/476786)中提到的技术。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T16:51:51.737

*除非我得到真正解决问题的答案，否则此解决方法是解决上述问题的方法！*

## 解决方法

为了让它工作，我使用以下方法的组合：

1.  将所有可能的字符转换为它们的 ascii/english 等价物
2.  逃脱此清理的无效字符实际上已从字符串中删除

但这并不理想，因为我们正在丢失数据！

## ASCII 变音符号

```
/// <summary>
/// Converts all Diacritic characters in a string to their ASCII equivalent
/// Courtesy: http://stackoverflow.com/a/13154805/476786
/// A quick explanation:
/// * Normalizing to form D splits charactes like è to an e and a nonspacing `
/// * From this, the nospacing characters are removed
/// * The result is normalized back to form C (I'm not sure if this is neccesary)
/// </summary>
/// <param name="value"></param>
/// <returns></returns>
public static string ConvertDiacriticToASCII(this string value)
{
    if (value == null) return null;
    var chars =
        value.Normalize(NormalizationForm.FormD)
             .ToCharArray()
             .Select(c => new {c, uc = CharUnicodeInfo.GetUnicodeCategory(c)})
             .Where(@t => @t.uc != UnicodeCategory.NonSpacingMark)
             .Select(@t => @t.c);
    var cleanStr = new string(chars.ToArray()).Normalize(NormalizationForm.FormC);
    return cleanStr;
} 
```

## 非 ASCII[燃烧器](https://meta.stackexchange.com/questions/121570/i-made-us-some-trogdor-graphics)

```
/// <summary>
/// Removes all non-ASCII characters from the string
/// Courtesy: http://stackoverflow.com/a/135473/476786
/// Uses the .NET ASCII encoding to convert a string. 
/// UTF8 is used during the conversion because it can represent any of the original characters. 
/// It uses an EncoderReplacementFallback to to convert any non-ASCII character to an empty string.
/// </summary>
/// <param name="value"></param>
/// <returns></returns>
public static string RemoveNonASCII(this string value)
{
    string cleanStr = 
           Encoding.ASCII
                   .GetString(
                              Encoding.Convert(Encoding.UTF8,
                                               Encoding.GetEncoding(Encoding.ASCII.EncodingName,
                                                                    new EncoderReplacementFallback(string.Empty),
                                                                    new DecoderExceptionFallback()
                                                                    ),
                                               Encoding.UTF8.GetBytes(value)
                                               )
                              );
    return cleanStr;
} 
```

* * *

我真的希望得到答案，因为解决方法显然并不理想，而且为什么这不可能也没有任何意义！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-07T07:53:50.737

为了扩展 bPratik 的答案，我们发现 Base64 编码元数据效果很好。我们使用这种扩展方法进行编码和解码：

```
 public static class Base64Extensions
    {
        public static string ToBase64(this string input)
        {
            var bytes = Encoding.UTF8.GetBytes(input);
            return Convert.ToBase64String(bytes);
        }

        public static string FromBase64(this string input)
        {
            var bytes = Convert.FromBase64String(input);
            return Encoding.UTF8.GetString(bytes);
        }
    } 
```

然后在设置 blob 元数据时：

```
blobReference.Metadata["Filename"] = filename.ToBase64(); 
```

并在检索它时：

```
var filename = blobReference.Metadata["Filename"].FromBase64(); 
```

对于搜索，您必须在将文件名呈现给索引器之前对其进行解码，或者假设您仍在使用原始文件名，则使用 blob 的实际文件名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T09:12:16.313

如果上面的列表很详尽，应该可以将元数据编码为 HTML，然后在需要时对其进行解码：

```
var htmlEncodedValue = System.Web.HttpUtility.HtmlEncode(value)
var originalValue = System.Web.HttpUtility.HtmlDecode(value) 
```

# silverlight - 如何确定 Dispatcher.BeginInvoke 何时完成？

> ID：14899463
> 
> 赞同：0
> 
> 时间：2013-02-15T16:51:52.457
> 
> 标签：silverlight

我有一个 Silverlight 5 应用程序，它使用[ImageTools for Silverlight](http://imagetools.codeplex.com/)将 a 保存`Canvas`到 PNG 图像。我知道我需要`Canvas`在 UI 线程上使用并具有以下代码，该代码有效：

```
if (saveFileDialog.ShowDialog() == true)
{
    var stream = saveFileDialog.OpenFile();

    writeableBitmap.Dispatcher.BeginInvoke(delegate
    {
        ExtendedImage extendedImage = writeableBitmap.ToImage();

        new PngEncoder().Encode(extendedImage, stream);
    });
} 
```

问题是，如果 Canvas 非常大，`BeginInvoke`完成中的代码可能需要相当长的时间。由于这是在 UI 线程上运行的，因此它会在执行期间冻结浏览器窗口。

在用户选择保存导出图像的位置后，我想弹出一些子窗口告诉用户“请稍候...”，然后运行上面发布的图像保存代码，然后隐藏子窗口窗口自动，但我没有太多的运气来做到这一点。

对于初学者来说，BeginInvoke 代码是异步运行的，那么我怎么知道它何时完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:19:21.367

如果您需要在 UI 线程上调用 ToImage() ，那很好，但这并不意味着您也必须对图像进行编码。

这样的事情将确保 UI 保持响应。

```
if (saveFileDialog.ShowDialog() == true)
{
    using (var stream = saveFileDialog.OpenFile())
    {
        writeableBitmap.Dispatcher.BeginInvoke(delegate
        {
            ExtendedImage extendedImage = writeableBitmap.ToImage();
            System.Threading.ThreadPool.QueueUserWorkItem(item =>
            {
                new PngEncoder().Encode(extendedImage, stream);
            });
        });
    }
} 
```

# c# - Entity Framework 4.0 映射问题

> ID：14899464
> 
> 赞同：0
> 
> 时间：2013-02-15T16:51:53.683
> 
> 标签：c#, entity-framework-4, edmx

尝试使用 Entity Framework 4.0 运行解决方案时出现以下错误，我想知道如何更改映射设置以更正它：

> *从第 588 行开始映射片段的问题：必须为 EntitySet UserDatas 的所有关键属性 (UserDatas.Id) 指定映射*

提供一些背景知识 - 我最初创建了如下所示的表格，其中每个表格中包含**Modified/Created Date/By**和**Id**列，但后来决定将它们拉出到抽象的**UserData 中**，然后改用继承。自从我改变了这个，一切都变了！

有人对我哪里出错有任何指示吗？我一直在使用下面显示的设计视图（GUI），感觉就像碰到了一堵砖墙。

我的 db.edmx 设计视图看起来像这样，单击错误会将我带到下面显示的变量表，但是对于继承此 Id 的所有其他表重复错误（请忽略所有指向其他表的链接 - 我没有'不想发布整个大数据库原理图）：

![在此处输入图像描述](../Images/59130730f84d84c80fc2867595331f70.png)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:14:55.597

听起来您在这里误用了 OO 继承。仅仅因为对象共享具有相同属性名称的项目并不意味着它们从基础继承。例如，在您的模型中问自己标签是否是用户数据？我怀疑您可以更好地表述为 Tag HAS A UserData 指向包含而不是继承。我建议设置一个通用的 IUserData 接口，其中每个对象都明确地实现该接口。在这种情况下，您的映射随后会将 UserData 接口的属性移回底层类（因为它们最初是配置的）。虽然您可以使您的映射与继承模型一起使用，但从 LINQ 和 TSQL 的角度来看，您的查询将变得非常复杂。

# php - 使用 preg_match_all 从 html 中获取文本

> ID：14899465
> 
> 赞同：0
> 
> 时间：2013-02-15T16:51:54.340
> 
> 标签：php, regex, preg-match-all

我有 html 代码如何使用 PHP 将 700 mAh 作为数组 [0]、BL-5CA 作为数组 [2]、诺基亚作为数组 [3]。像这样

```
preg_match_all('~<span>capacity(.*?)mAh~si', $result, $matches[0]);
preg_match_all('~<span>Model(.*?)</span></div>~si', $result, $matches[1]);
preg_match_all('~<span>Brand(.*?)</span></div>~si', $result, $matches[2]); 
```

它向我显示了空数组。请帮我修复它

```
<div class="b-goods-specifications mod_cutted"> <div class="b-goods-specifications-item"> <ul class="b-goods-specifications-list"> <li class = "b-goods-specifications-row g-clearfix "> <div class="b-goods-specifications-cell"> <span> **capacity** </ span> </ div> <div class="b-goods-specifications-cell"> **700 mAh** </ div> </ li> <li class="b-goods-specifications-row g-clearfix"> <div class="b-goods-specifications-cell"> <span> **Model** </ span> </ div > <div class="b-goods-specifications-cell"> **BL-5CA** </ div> </ li> <li class="b-goods-specifications-row g-clearfix"> <div class = "b-goods-specifications-cell "> <span> **Brand** </ span> </ div> <div class="b-goods-specifications-cell"> **Nokia** </ div> </ li> <li class =" b-goods -specifications-row g-clearfix "> <div class="b-goods-specifications-cell"> <span> Type </ span> </ div> <div class="b-goods-specifications-cell"> Li -ion ​​&lt;/ div> </ li> </ ul> </ div> </ div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:55:58.637

使用[PHP DOM](http://php.net/manual/en/book.dom.php)，它会比正则表达式更简单。

[http://php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

# ruby-on-rails-3 - Rspec控制器错误？期待 <"index"> 但使用 <""> 渲染或者它正在工作？

> ID：14899471
> 
> 赞同：2
> 
> 时间：2013-02-15T16:52:23.607
> 
> 标签：ruby-on-rails-3, rspec, controller

我是 rspec 测试的新手，也许有些东西我不明白。

如果可以帮助我，我真的很感激一些帮助。

文件结构：

```
app/models/booking.rb
app/models/user.rb
app/models/role.rb
app/models/ability.rb   

app/controllers/bookings_controller.rb

app/views/bookings/index.html.erb
app/views/dashboard/index.html.erb

app/spec/controllers/bookings_controller_spec.rb 
```

我读了这个链接有一个类似的问题，但没有解决

[Rspec 控制器错误，期望 <"index"> 但使用 <""> 呈现](https://stackoverflow.com/questions/13075972/rspec-controller-error-expecting-index-but-rendering-with)

是相似的，因为如果我改变这一行：

```
 it 'should not render index template from bookings' do
        get :index
=>      response.should_not render_template(:index)
    end 
```

对于这个其他：

```
 it 'should not render index template from bookings' do
        get :index
=>      response.should render_template(:index)
    end 
```

我在链接中遇到了同样的错误

期待 <"index"> 但使用 <""> 渲染

我不知道为什么？这是我的代码：

我的规格：

```
describe BookingsController do
context 'as guest' do
  before(:each) do
    @user = User.new(:email => 'mail_admin@test.com',
                :username => 'admin',
                :password => 'password_admin',
                :password_confirmation => 'password_admin')
    @user.save
    #when i save, with gem CanCan i assign a default role to @user
    #with the default role the user only can see the views/dashboard/index.html.erb
  end

  it 'should not render index template from bookings' do
    get :index
    response.should_not render_template(:index)
  end
end  
end 
```

控制器：

```
class BookingsController < ApplicationController
load_and_authorize_resource

 def index
  ...      
 end

 def show
  ...
 end
end 
```

我的模型：

```
class Booking < Activerecord::Base
paginates_per 20

 def 
  ...      
 end

 def 
  ...
 end
end 
```

用户：

```
Class User < ActiveRecord::Base
  after_save :set_default_role
  rolify
  .
  .
  .
  .
  def set_default_role
   self.add_role :default
  end
end 
```

角色：

```
class Role < ActiveRecord::Base
 ROLES = {"admin" => "Admin", "default" => "Default"}
 .
 .
 .
 . 
 scopify
end 
```

能力：

```
class Ability
  include CanCan::Ability

  def initialize(user)
  user ||= User.new
  if user.has_role? :admin
   can :manage, :all
  elsif user.has_role? :data_consistency
   can :read, Booking
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:18:14.647

CanCan 授权模型访问而不是控制器操作。对于大多数其他操作，这两者或多或少是同一件事，但对于索引则不同。在索引操作上，CanCan 将范围添加到包含您的授权限制的记录的查询中。

这意味着您的访客用户将根本无法看到任何记录，但视图仍将呈现。

您想要的是身份验证（即设计）并从需要经过身份验证的用户访问的每个控制器中的 before_filter 使用它。

```
class BookingsController < ApplicationController
  load_and_authorize_resource # Handles authorization
  before_filter !authenticate_user # Handles authentication (included with Devise)
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:52:50.277

就我而言，问题已在 before(:each) 块中解决！
我的代码是这样工作的：

```
before :each do
  @user = User.new(:email => 'mail_admin@test.com',
            :username => 'admin',
            :password => 'password_admin',
            :password_confirmation => 'password_admin')
  @user.confirm!
  sign_in @user
end 
```

# sql-server-2008 - 在 sql server 2008 中使用联接查询

> ID：14899478
> 
> 赞同：3
> 
> 时间：2013-02-15T16:52:43.327
> 
> 标签：sql-server-2008

我有这些表：

1.  顾客信息

    ```
    CustCode, Name , Address, CityID 
    ```

2.  大师城

    ```
    CityName, CityId 
    ```

3.  订单详细信息

    ```
    OrderDetails, CustCode , OrderNo, Somedetails , DeliveryStation 
    ```

`Deliverystation`是必须下订单的地方。在这里我发送`CityId` 和客户详细信息也包含`CityId`而**不是** `cityname`。

现在我想从中选择数据`OrderDetails`。我加入`OrderDetails`和`Customer Details`On `Customer Details.CustCode = OrderDetails.CustCod`e`Customer Details`和 MasterCity 在`MasterCity.CityId = Customer Details.CityId`.

这项工作很好，但我也想加入`OrderDetails`并`MasterCity`获得`DeliveryStation`城市名称。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:57:41.243

只需使用别名向 MasterCity 添加另一个连接，例如

```
Select a.CustCode, a.Name, a.Address, A.CityId,c.OrderNo, c.SomeDetails,d.CityName DeliveryStation
  from CustomerDetails a
  join MasterCity b
    on a.CityID=b.CityID
  join OrderDetail c
    on a.CustCode=c.CustCode
  join MasterCity d
    on d.CityId=c.DeliveryStation 
```

# java - 在 Java 中使用 delete() 方法删除文件

> ID：14899480
> 
> 赞同：7
> 
> 时间：2013-02-15T16:52:50.710
> 
> 标签：java, file

我对以下代码有点怀疑：

```
try {
    File file = new File("writing");
    file.createNewFile();
    System.out.println(file.delete());
    System.out.println(file.exists());

    PrintWriter pw = new PrintWriter(file);
    pw.print(324.2342);
    pw.flush();
    pw.close();
    FileReader fr = new FileReader(file);
    BufferedReader br = new BufferedReader(fr);
    System.out.println(br.readLine());
    br.close();
} catch(IOException ioE) {
    System.out.println("Indeed");
} 
```

为什么在这种情况下，方法 file.delete() 显然说它可以工作，因为它在执行时返回“true”，并且它也被`file.exists()`返回“false”的方法确认。但是在运行时我没有得到任何异常，例如*“IOException，文件“正在写入”不存在”*或类似的东西。

为什么即使物理删除文件仍保留在堆中？不应该在调用 delete 方法后立即自动收集垃圾吗？我知道不是因为我看到了输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:55:55.717

这是因为`File`代表抽象路径，请参阅 JavaDoc [http://docs.oracle.com/javase/6/docs/api/java/io/File.html](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)。它不代表操作系统中的文件句柄。
您的代码中的行：

```
PrintWriter pw = new PrintWriter(file); 
```

只需创建一个新文件。调用此函数后尝试删除文件...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:54:57.870

`File`object 表示文件系统上物理文件的路径存在或不存在。这就是为什么你必须`exists()`（检查它是否存在）和`createNewFile()`（如果找不到则创建文件）。

* * *

另请注意，[`PrintWriter(File file)`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.File%29)如果新文件不存在，则会创建一个新文件。

> **参数：**
> 
> file - 用作此 writer 目标的文件。如果文件存在，那么它将被截断为零大小；否则，将创建一个新文件。输出将被写入文件并被缓冲。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:01:17.070

File 是真实文件的句柄（存在与否）。正如您所说，您创建然后删除上面的文件 - 到目前为止一切都很好。

当您稍后使用 PrintWriter 时，它会在您使用它时再次创建文件 - 您之前删除它并不重要。

实际上，根据您的用例，这可能正是您想要的 - 例如，您可能想要删除旧的日志文件，然后再重新创建和写入它。

最后，在您的方法存在之前，您的代码中的任何内容都没有资格进行垃圾收集，即使这样，底层文件也将继续存在（如果您不再次删除它） - 在这种情况下，任何垃圾收集都不会影响底层文件。它会在删除调用后被删除，一旦你的 PrintWriter 完成它就会再次存在。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:56:54.973

该文件没有指向特定文件的链接，而是指向文件路径的任何文件指针。使用这一行，您将创建一个新文件：

```
PrintWriter pw = new PrintWriter(file); 
```

# wcf - WCF：已添加具有相同密钥的项目

> ID：14899486
> 
> 赞同：0
> 
> 时间：2013-02-15T16:52:58.963
> 
> 标签：wcf, linq, entity-framework-5

在使用 150 个用户测试 WCF 服务时，我遇到了这个异常。

注意：我正在使用 MS 测试项目对 WCF 服务进行负载测试。对 100 个用户运行负载测试时，也不例外。

在 System.Collections.Generic.Dictionary 的 System.ThrowHelper.ThrowArgumentException（ExceptionResource 资源）`2.Insert(TKey key, TValue value, Boolean add) at System.Linq.Dynamic.ClassFactory.GetDynamicClass(IEnumerable`1 属性）在 System.Linq.Dynamic.ExpressionParser.ParseNew() 在 System.Linq.Dynamic.ExpressionParser.ParseIdentifier() 在 System.Linq.Dynamic 的 System.Linq.Dynamic.DynamicExpression.CreateClass（IEnumerable`1 属性）。 ExpressionParser.ParsePrimaryStart() 在 System.Linq.Dynamic.ExpressionParser.ParsePrimary() 在 System.Linq.Dynamic.ExpressionParser.ParseUnary() 在 System.Linq.Dynamic.ExpressionParser.ParseMultiplicative() 在 System.Linq.Dynamic.ExpressionParser。 ParseAdditive() 在 System.Linq.Dynamic.ExpressionParser.ParseComparison() 在 System.Linq.Dynamic.ExpressionParser.ParseLogicalAnd() 在 System.Linq.Dynamic.ExpressionParser.ParseLogicalOr() 在 System.Linq.Dynamic.ExpressionParser.ParseExpression( ) 在 System.Linq.Dynamic.ExpressionParser.Parse(Type resultType) 在 System.Linq.Dynamic。DynamicExpression.ParseLambda(ParameterExpression[] parameters, Type resultType, String expression, Object[] values) at System.Linq.Dynamic.DynamicExpression.ParseLambda(Type itType, Type resultType, String expression, Object[] values) 在 System.Linq。 Dynamic.DynamicQueryable.Select(IQueryable source, String selector, Object[] values) at CustomEntities.Data.Repository.CustomEntitiesDataRepository.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Repository \CustomEntitiesDataRepository.cs: d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Manager\CustomEntitiesDataManager.cs: 中 CustomEntities.Data.Manager.CustomEntitiesDataManager.GetCustomEntityData(CriteriaDto criteriaDto) 的第 131 行：第 69 行System.Linq.Dynamic.DynamicExpression.ParseLambda(Type itType, Type resultType, String expression, Object[] values) at System.Linq.Dynamic.DynamicQueryable.Select(IQueryable source, String selector, Object[] values) 在 CustomEntities.Data.Repository.CustomEntitiesDataRepository.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Repository\CustomEntitiesDataRepository.cs:CustomEntities.Data 的第 131 行。 Manager.CustomEntitiesDataManager.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Manager\CustomEntitiesDataManager.cs:line 69System.Linq.Dynamic.DynamicExpression.ParseLambda(Type itType, Type resultType, String expression, Object[] values) at System.Linq.Dynamic.DynamicQueryable.Select(IQueryable source, String selector, Object[] values) 在 CustomEntities.Data.Repository.CustomEntitiesDataRepository.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Repository\CustomEntitiesDataRepository.cs:CustomEntities.Data 的第 131 行。 Manager.CustomEntitiesDataManager.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Manager\CustomEntitiesDataManager.cs:line 69Object[] values) at System.Linq.Dynamic.DynamicQueryable.Select(IQueryable source, String selector, Object[] values) at CustomEntities.Data.Repository.CustomEntitiesDataRepository.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services \Data\CustomEntities\CustomEntities.Data.Repository\CustomEntitiesDataRepository.cs: d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Manager 中 CustomEntities.Data.Manager.CustomEntitiesDataManager.GetCustomEntityData(CriteriaDto criteriaDto) 的第 131 行\CustomEntitiesDataManager.cs：第 69 行Object[] values) at System.Linq.Dynamic.DynamicQueryable.Select(IQueryable source, String selector, Object[] values) at CustomEntities.Data.Repository.CustomEntitiesDataRepository.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services \Data\CustomEntities\CustomEntities.Data.Repository\CustomEntitiesDataRepository.cs: d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Manager 中 CustomEntities.Data.Manager.CustomEntitiesDataManager.GetCustomEntityData(CriteriaDto criteriaDto) 的第 131 行\CustomEntitiesDataManager.cs：第 69 行Repository\CustomEntitiesDataRepository.cs：第 131 行位于 CustomEntities.Data.Manager.CustomEntitiesDataManager.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Manager\CustomEntitiesDataManager.cs:line 69Repository\CustomEntitiesDataRepository.cs：第 131 行位于 CustomEntities.Data.Manager.CustomEntitiesDataManager.GetCustomEntityData(CriteriaDto criteriaDto) 在 d:\Projects\SRM\Services\Data\CustomEntities\CustomEntities.Data.Manager\CustomEntitiesDataManager.cs:line 69

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:56:43.930

如果您查看您的代码，在`CustomEntitiesDataRepository.cs`第 131 行，此行会触发问题。您返回的自定义实体在某种程度上试图将值插入 a `Dictionary<T,U>`，但其使用的键已经存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-03T15:10:33.517

实际上，它看起来像存在并发问题`.Select()`。请参阅[http://www.webr2.com/system-linq-dynamic-select-new-does-not-appear-to-be-thread-safe/](http://www.webr2.com/system-linq-dynamic-select-new-does-not-appear-to-be-thread-safe/)

最简单的解决方法是在您的代码中围绕对 Select 的调用进行一些锁定

# ntlmv2 - 使用 Java 实现 NTLM 静默登录

> ID：14899487
> 
> 赞同：2
> 
> 时间：2013-02-15T16:53:13.033
> 
> 标签：ntlmv2

希望有人能纠正我在使用 NTLMv2 调用简单 URL 到应用程序（返回 XML）时的天真。

我已经阅读了几乎所有问题和页面，但我留下了一个压倒一切的好奇心。我目前正在使用 HTTPClient（尽管可以更改）以及最新的 JDK（在撰写本文时）。

这是一个似乎调用 JCIFS 库的示例页面：http: [//hc.apache.org/httpcomponents-client-ga/ntlm.html](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)

一切看起来都不错，尽管令人困惑，但这突出了我看到的许多示例提出的问题 - 提供 NTCredentials 的问题。

对我而言，NTLM 的全部意义在于我不必提供凭据。目标应用程序设置为使用 NTLM，因此肯定应该使用当前登录用户的用户凭据吗？为什么我要自己提供任何凭据？

抱歉，如果我在这里遗漏了一些明显的东西。我只需要最基础的可能使用 Java 的 NTLM SSO。我不在乎什么版本，我可以使用最新的任何东西。

抱着希望！谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:04:22.783

不幸的是，有办法在纯 Java 环境中进行单点登录。

NTLM 不是直接单点登录的解决方案。NTLM 是一种质询/响应身份验证机制，它需要用户密码的 NTLM 哈希。Windows 机器能够使用 NTLM 提供单点登录，因为 NTLM 哈希是持久的。然后，他们能够根据持久散列计算对质询的响应。

如果无法访问该哈希（据我所知，您不能简单地请求它），您需要自己计算它。这需要拥有用户的密码。

同样，您可以使用 SPNEGO 身份验证通过 Kerberos 票证进行单点登录（当然，如果远程系统设置为支持它），但不幸的是，Java 重新实现了 Kerberos，而不是使用系统 Kerberos 库。因此，即使您已经登录到该域，您也需要获取另一个用于 Java 的 Kerberos 票证。这意味着再次输入您的密码。

避免输入密码进行身份验证的唯一现实方法是调用本机方法。在 Windows 上，这是[SSPI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380493%28v=vs.85%29.aspx)，它将使您能够响应 NTLM 或 SPNEGO 质询。在非 Windows 平台上，这由非常相似的[GSSAPI](http://web.mit.edu/kerberos/krb5-current/doc/appdev/gssapi.html)处理并提供响应 SPNEGO (Kerberos) 的能力。

# php - 更新多个页面

> ID：14899489
> 
> 赞同：0
> 
> 时间：2013-02-15T16:53:26.933
> 
> 标签：php, javascript, html, updates

我正在为客户做一些自由职业，我需要重新编码旧菜单。整个站点是静态的，这将使这个过程非常缓慢和冗余，有没有人有自动更新多个页面的好技术？

老开发者使用“Allwebmenus”，这是一个自动菜单创建工具。它是通过使用将 HTML 写入 DOM 的 JavaScript 实现的。我将用一个干净的 html 菜单和一些简单的 jQuery 替换它。

现在我认为最好的方法是使用菜单代码创建一个单独的 .html 文件，并在所有页面上使用 PHP 包含，但这仍然需要我更新网站上的每个页面。谁能给我更好的主意？还是您认为这是最好的选择？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:55:11.827

在每个写入旧菜单的文件中创建 menu.php 和 include("menu.php")。它也会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:55:58.330

至于修复所有的静态页面，你必须自己进去做。

```
include("menu.html"); 
```

您可以使用包含，但也可以将它们放到像 Drupal 这样的 CMS 上。为你处理很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:56:06.323

使用 PHP 包含是一个很好的方法。如果“Allwebmenus”在每个页面上都有 Javascript 代码，那么无论如何您都必须编辑每个文件，因此添加包含没什么大不了的。

# jquery - 使用 jQuery 重新定位绝对定位的图像

> ID：14899491
> 
> 赞同：0
> 
> 时间：2013-02-15T16:53:27.460
> 
> 标签：jquery, image, html

我有一个相对定位的 div 来显示配置文件图标，并且图像将显示在此 div 中。图像是绝对定位的。顶部和左侧确定应该显示哪个部分。显示工作完美但问题是顶部和左侧没有改变在编辑图标后使用 ajax 时。编辑包括增加大小、更改背景等。有一个编辑图标的选项，用户可以在其中选择要显示的部分，编辑图标后我已经存储了宽度、高度、背景、顶部、左侧在数据库中，这将是图标的属性。通过使用 ajax，我从数据库中检索数据并更改了宽度、高度、背景、顶部、左侧。但只有宽度、高度和背景在变化。它只会在重新加载时改变，因为我在页面加载时使用 php 来设置属性。希望你能理解！

我的jQuery代码：

```
if(type=="picon")
        {
            $.post("changedDB.php", type, function(data, status){ 
            var spicture=data.split("|");
            $(".profile-picture").attr("src", spicture[0]);
            $(".profile-picture").css({"position":"absolute","width":""+spicture[1],"height":""+spicture[2],"background":""+spicture[3],"top":""+spicture[5],"left":""+spicture[6]});
            });
        } 
```

**来自服务器的数据**

```
The value in data is "image url|70|50|rgba(0, 0, 0, 0)|0|-10|-5"
The format corresponds to "image url|width|height|background|show full image|top|left 
```

但是顶部和左侧保持不变，它具有我在页面加载时使用 php 设置的值。

如何使用 jquery 更改顶部和左侧？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:06:04.227

您似乎没有指定单位。用“px”连接你的尺寸

将您的代码更改为：

```
$(".profile-picture").css({"position":"absolute","width":""+spicture[1] + "px","height":""+spicture[2] + "px","background":""+spicture[3],"top":""+spicture[5] + "px","left":""+spicture[6] + "px"}); 
```

# r - lm(y~x*g) 忽略 g 的一个值

> ID：14899492
> 
> 赞同：-1
> 
> 时间：2013-02-15T16:53:29.277
> 
> 标签：r, subset, linear-regression, lm

我第一次尝试使用 R。

在这种情况下，`y`是耗氧量，`x`是时间，g 是由最多三个字母（NYF、IR、F、M 或 NF）指示的状态。它将针对除 F 之外的每个状态运行回归。

[旁注：我还尝试使用子集函数通过多次回归来完成此操作。当我使用

```
lm(O2~time,subset(data,Status=="NYF")) 
```

它实际上并不遵循子集，并且无论我输入哪种状态，都可以为整个数据集提供回归。

如何根据`status`列中的代码从单个数据集中获得多个简单的线性回归？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:03:29.120

lm(y~x,子集(dd,g=='NYF'))

是适合单个状态的行的适当语法（尽管其他人为您提供了可行的变体）。我会检查以确保您的数据框确实被命名为“数据”并且您的状态变量被命名为“状态”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:13:07.533

你的问题不清楚。假设您有一个数据框 ,`dd`包含三列：`y`, `x`, `g`。变量`y`和`x`是数字，`g`取值`NYF`、`IR`、`F`、`M`或`NF`。要对特定状态执行简单的线性回归，则：

```
lm(y ~ x, data=dd[dd$g=="NYF",])
#Or
lm(y ~ x, data=dd[dd$g=="IR",]) 
```

要执行多元线性回归，请尝试

```
lm(y ~ x + g, data=dd) 
```

其中一个因素的存在与否由一个二元变量表示。

# git - 仅回滚其中一个已提交文件的更改

> ID：14899498
> 
> 赞同：1
> 
> 时间：2013-02-15T16:53:49.293
> 
> 标签：git

如果我同时提交了多个文件怎么办：file1.txt、file2.txt 和 file3.txt。然后我决定我需要回滚我对 file1.txt 所做的所有更改。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:55:54.000

您可以将文件返回到提交之前的状态。为此，您需要在更改之前提交的哈希并使用以下命令

```
git checkout hash file1.txt 
```

或者您可以撤消提交`git reset HEAD^`并在不添加 file1.txt 的情况下进行提交

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:00:49.190

这里有一个很好的链接，关于[在 git 中撤消操作](http://git-scm.com/book/en/Git-Basics-Undoing-Things)。

如果您刚刚提交并想撤消上次提交中的某些内容，则可以使用

```
git commit --amend 
```

如果您想撤消对文件所做的更改并将其恢复到提交之前的原始状态，您可以使用

```
git checkout <number> <file> 
```

# sql - 如何获得查询的前 10 个结果？

> ID：14899500
> 
> 赞同：0
> 
> 时间：2013-02-15T16:53:54.733
> 
> 标签：sql, postgresql

我有一个这样的postgresql查询：

```
with r as (
    select
        1 as reason_type_id,
        rarreason  as reason_id,
        count(*) over() count_all
    from 
        workorderlines 
    where 
        rarreason != 0
        and finalinsdate >= '2012-12-01'
)
select
    r.reason_id,
    rt.desc,
    count(r.reason_id) as num,
    round((count(r.reason_id)::float / (select count(*) as total from r) * 100.0)::numeric, 2) as pct
from r
    left outer join
        rtreasons as rt
    on
        r.reason_id = rt.rtreason
        and r.reason_type_id = rt.rtreasontype
group by
    r.reason_id,
    rt.desc
order by r.reason_id asc 
```

这将返回一个包含 4 列的结果表：原因 id、与该原因 id 关联的描述、具有该原因 id 的条目数以及该数字所代表的总数的百分比。

该表如下所示：

![在此处输入图像描述](../Images/ab580756efa1c19231b79a9c8a3793a1.png)

我想做的只是根据具有原因 ID 的条目总数显示前 10 个结果。但是，无论剩下什么，我都想编译成另一行，并带有名为“其他”的描述。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:59:06.623

如上所述限制和跳过并获得其余的使用偏移量......[试试这个网站](http://www.the-art-of-web.com/sql/select/#.UR5pg2Yo6Uk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:12:27.403

```
with r2 as (
  ...everything before the select list...
  dense_rank() over(order by pct) cause_rank
  ...the rest of your query...
)
select * from r2 where cause_rank < 11
union
select 
  NULL as reason_id, 
  'Other' as desc, 
  sum(r2.num) over() as num, 
  sum(r2.pct) over() as pct,
  11 as cause_rank
from r2
where cause_rank >= 11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:13:50.687

不确定 Postgre 但 SELECT TOP 10... 如果您正确排序应该可以解决问题

但是关于第二部分：您可以为此使用 Right Join。将 TOP 10 Result 与整个表数据连接起来，并仅使用未出现在左侧的记录。如果你计算这些的总和，你应该得到“其余的总和”结果。

我假设 vw_my_top_10 是显示前 10 条记录的视图。vw_all_records 显示所有记录（包括前 10 名）。

像这样：

```
SELECT SUM(a_field)
FROM vw_my_top_10
RIGHT JOIN vw_all_records
ON (vw_my_top_10.Key = vw_all_records.Key)
WHERE vw_my_top_10.Key IS NULL 
```

# java - 与春天一起休眠

> ID：14899503
> 
> 赞同：1
> 
> 时间：2013-02-15T16:54:03.230
> 
> 标签：java, spring, hibernate, jpa, classnotfoundexception

我在启动和运行 Hibernate 和 Spring 时遇到了一些问题。我有一个 Web 服务器项目，它利用了其他几个具有持久实体的项目。我遇到的问题是我得到了一个实体类的 ClassNotFoundException，该实体类存储在 WEB-INF/libs 内的另一个 jar 中。

我是否需要为每个包含实体类的 jar 提供一个 persistence.xml？

如果您需要查看任何配置文件，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:37:15.373

根据您的设置，可能有许多不同的方法可以解决这个问题 - 他们通常都没有想法（IMO）。

本质问题与 ClassLoader 隔离有关。关于 jar 中的文件可以访问什么是有规则的。

在您的特定情况下，解决它的最简单方法可能是将persistence.xml 放在父Web 项目中。如果你没有使用持久化 xml，你需要从 web 项目中引导 hibernate/spring。

父 Web 项目应该可以访问其 WEB-INF/lib 中的所有库，而 libs 文件夹中的每个 jar 可能无法相互访问。

您可以在每个 jar 中设置另一个 persistence.xml，但它们不会组合在一起成为一个持久性单元。您需要根据您想要的实体使用不同的 pu。

# bash - 用于向 netcat 发送标头的脚本

> ID：14899504
> 
> 赞同：1
> 
> 时间：2013-02-15T16:54:06.840
> 
> 标签：bash

我[使用的协议](https://wiki.asterisk.org/wiki/display/AST/Asterisk+Manager+Interface+%28AMI%29)很容易与[netcat](http://netcat.sourceforge.net/)一起使用。该协议以登录消息开始，所以我想我可以编写一个小脚本，将标准输入之前的登录消息通过管道传输到我的 netcat。

我能够接近，但有一个问题我无法弄清楚。以下脚本有效，因为它发送登录消息并允许我与 netcat 交互。但是如果 netcat 退出（因为服务器端关闭了连接），脚本就会挂在那里（可能是因为`cat`即使没有人再读取 stdout，它仍在读取 stdin）。

```
( echo "${LOGIN}"; cat ) | nc ${HOST} ${PORT} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:21:11.267

这是一个棘手的问题，你的原因是正确的。进程在实际尝试写入管道之前不会收到 NOPIPE 错误和 SIGPIPE。

如果不出意外，您可以使用交互脚本工具`expect`：

```
expect <(echo '
    spawn nc google.com 80
    send "GET / HTTP/1.0\n"
    send "Host: www.google.com\n"
    interact
') 
```

这将运行`nc`，发送一些 HTTP 标头，然后将控制权交给您。当 nc 退出时，命令也会退出。

# python - 显示比“无法解码 JSON 对象”更好的错误消息

> ID：14899506
> 
> 赞同：132
> 
> 时间：2013-02-15T16:54:12.483
> 
> 标签：python, json

从一些长而复杂的 JSON 文件中加载数据的 Python 代码：

```
with open(filename, "r") as f:
  data = json.loads(f.read()) 
```

（注意：最好的代码版本应该是：

```
with open(filename, "r") as f:
  data = json.load(f) 
```

但两者都表现出相似的行为）

对于许多类型的 JSON 错误（缺少分隔符、字符串中不正确的反斜杠等），这会打印一条非常有用的消息，其中包含发现 JSON 错误的行号和列号。

但是，对于其他类型的 JSON 错误（包括经典的“在列表中的最后一项上使用逗号”，以及其他诸如大写 true/false 之类的事情），Python 的输出只是：

```
Traceback (most recent call last):
  File "myfile.py", line 8, in myfunction
    config = json.loads(f.read())
  File "c:\python27\lib\json\__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "c:\python27\lib\json\decoder.py", line 360, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "c:\python27\lib\json\decoder.py", line 378, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

对于这种类型的 ValueError，如何让 Python 告诉您 JSON 文件中的错误在哪里？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-02-19T11:33:45.710

我发现`simplejson`在许多内置`json`模块含糊不清的情况下，该模块会给出更多描述性错误。例如，对于列表中最后一项后有逗号的情况：

```
json.loads('[1,2,]')
....
ValueError: No JSON object could be decoded 
```

这不是很具有描述性。与 相同的操作`simplejson`：

```
simplejson.loads('[1,2,]')
...
simplejson.decoder.JSONDecodeError: Expecting object: line 1 column 5 (char 5) 
```

好多了！同样对于其他常见错误，如大写`True`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-15T16:58:05.373

您将无法让 python 告诉您 JSON 不正确的位置。[您将需要在这样](http://jsonformatter.curiousconcept.com/)的地方在线使用 linter

这将在您尝试解码的 JSON 中显示错误。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-22T21:07:44.410

你可以试试这里的 rson 库：[http](http://code.google.com/p/rson/) ://code.google.com/p/rson/ 。我也在 PYPI 上：[https](https://pypi.python.org/pypi/rson/0.9) ://pypi.python.org/pypi/rson/0.9所以你可以使用 easy_install 或 pip 来获取它。

对于汤姆给出的例子：

```
>>> rson.loads('[1,2,]')
...
rson.base.tokenizer.RSONDecodeError: Unexpected trailing comma: line 1, column 6, text ']' 
```

RSON 被设计为 JSON 的超集，因此它可以解析 JSON 文件。它还有一种替代语法，**更**便于人们查看和编辑。我将它用于输入文件。

至于布尔值的大写：似乎 rson 将错误地大写的布尔值读取为字符串。

```
>>> rson.loads('[true,False]')
[True, u'False'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-24T06:20:33.327

我有一个类似的问题，这是由于单引号。JSON 标准 ( [http://json.org](http://json.org) ) 只讨论使用*双引号*，因此 python`json`库必须只支持双引号。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-22T01:29:51.790

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-02T08:28:48.883

As to me, my json file is very large, when use common `json` in python it gets the above error.

After install `simplejson` by `sudo pip install simplejson`.

And then I solved it.

```
import json
import simplejson

def test_parse_json():
    f_path = '/home/hello/_data.json'
    with open(f_path) as f:
        # j_data = json.load(f)      # ValueError: No JSON object could be decoded
        j_data = simplejson.load(f)  # right
    lst_img = j_data['images']['image']
    print lst_img[0]

if __name__ == '__main__':
    test_parse_json() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-09T12:25:31.950

I had a similar problem this was my code:

```
 json_file=json.dumps(pyJson)
    file = open("list.json",'w')
    file.write(json_file)  

    json_file = open("list.json","r")
    json_decoded = json.load(json_file)
    print json_decoded 
```

the problem was i had forgotten to `file.close()` I did it and fixed the problem.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-20T08:30:17.567

The accepted answer is the easiest one to fix the problem. But in case you are not allowed to install the simplejson due to your company policy, I propose below solution to fix the particular issue of **"using comma on the last item in a list"**:

1.  Create a child class "JSONLintCheck" to inherite from class "JSONDecoder" and override the **init** method of the class "JSONDecoder" like below:

    ```
    def __init__(self, encoding=None, object_hook=None, parse_float=None,parse_int=None, parse_constant=None, strict=True,object_pairs_hook=None)        
            super(JSONLintCheck,self).__init__(encoding=None, object_hook=None,      parse_float=None,parse_int=None, parse_constant=None, strict=True,object_pairs_hook=None)
            self.scan_once = make_scanner(self) 
    ```

2.  **make_scanner** is a new function that used to override the 'scan_once' method of the above class. And here is code for it：</li>

```
 1 #!/usr/bin/env python
  2 from json import JSONDecoder
  3 from json import decoder
  4 import re
  5
  6 NUMBER_RE = re.compile(
  7     r'(-?(?:0|[1-9]\d*))(\.\d+)?([eE][-+]?\d+)?',
  8     (re.VERBOSE | re.MULTILINE | re.DOTALL))
  9
 10 def py_make_scanner(context):
 11     parse_object = context.parse_object
 12     parse_array = context.parse_array
 13     parse_string = context.parse_string
 14     match_number = NUMBER_RE.match
 15     encoding = context.encoding
 16     strict = context.strict
 17     parse_float = context.parse_float
 18     parse_int = context.parse_int
 19     parse_constant = context.parse_constant
 20     object_hook = context.object_hook
 21     object_pairs_hook = context.object_pairs_hook
 22
 23     def _scan_once(string, idx):
 24         try:
 25             nextchar = string[idx]
 26         except IndexError:
 27             raise ValueError(decoder.errmsg("Could not get the next character",string,idx))
 28             #raise StopIteration
 29
 30         if nextchar == '"':
 31             return parse_string(string, idx + 1, encoding, strict)
 32         elif nextchar == '{':
 33             return parse_object((string, idx + 1), encoding, strict,
 34                 _scan_once, object_hook, object_pairs_hook)
 35         elif nextchar == '[':
 36             return parse_array((string, idx + 1), _scan_once)
 37         elif nextchar == 'n' and string[idx:idx + 4] == 'null':
 38             return None, idx + 4
 39         elif nextchar == 't' and string[idx:idx + 4] == 'true':
 40             return True, idx + 4
 41         elif nextchar == 'f' and string[idx:idx + 5] == 'false':
 42             return False, idx + 5
 43
 44         m = match_number(string, idx)
 45         if m is not None:
 46             integer, frac, exp = m.groups()
 47             if frac or exp:
 48                 res = parse_float(integer + (frac or '') + (exp or ''))
 49             else:
 50                 res = parse_int(integer)
 51             return res, m.end()
 52         elif nextchar == 'N' and string[idx:idx + 3] == 'NaN':
 53             return parse_constant('NaN'), idx + 3
 54         elif nextchar == 'I' and string[idx:idx + 8] == 'Infinity':
 55             return parse_constant('Infinity'), idx + 8
 56         elif nextchar == '-' and string[idx:idx + 9] == '-Infinity':
 57             return parse_constant('-Infinity'), idx + 9
 58         else:
 59             #raise StopIteration   # Here is where needs modification
 60             raise ValueError(decoder.errmsg("Expecting propert name enclosed in double quotes",string,idx))
 61     return _scan_once
 62
 63 make_scanner = py_make_scanner 
```

3.  Better put the 'make_scanner' function together with the new child class into a same file.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-07T18:33:01.873

Just hit the same issue and in my case the problem was related to `BOM` (byte order mark) at the beginning of the file.

`json.tool` would refuse to process even empty file (just curly braces) until i removed the UTF BOM mark.

What I have done is:

*   opened my json file with vim,
*   removed byte order mark (`set nobomb`)
*   save file

This resolved the problem with json.tool. Hope this helps!

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2019-02-21T03:06:27.007

When your file is created. Instead of creating a file with content is empty. Replace with:

```
json.dump({}, file) 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-02-26T09:26:26.617

你可以使用[cjson](https://pypi.python.org/pypi/python-cjson)，它声称比纯 python 实现快 250 倍，因为你有“一些很长的复杂 JSON 文件”并且你可能需要运行它几次（解码器失败并报告他们的第一个错误只遇到）。

# jquery - 从变化的输入中获取平均值

> ID：14899509
> 
> 赞同：1
> 
> 时间：2013-02-15T16:54:23.060
> 
> 标签：jquery

我想通过输入值获得平均值，并且我有 5 个输入字段。这是我发现的，但它不是使用 onchange 事件的输入，有人可以帮助我吗？

```
var total = 0,
    valid_labels = 0,
    average;

$('.td_input').each(function () {
    var val = parseInt(this.innerHTML, 10);
    if (val !== 0) {
        valid_labels += 1;
        total += val;
    }
});

average = total / valid_labels;
$('.average').val(average); 
```

jsfiddle [http://jsfiddle.net/Pqd8B/1/](http://jsfiddle.net/Pqd8B/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T16:59:40.407

您可以使用这样的`keyup`事件并在考虑之前检查输入值是否为数字

[http://jsfiddle.net/Pqd8B/2/](http://jsfiddle.net/Pqd8B/2/)

```
// Catch all inputs key events : recalculate average
$('.td_input').keyup(function () {

    // Init variables
    var total = 0,
        valid_labels = 0,
        average;

    $('.td_input').each(function () {
        // Retrieve input value
        // .innerHTML only retrieves the info between the HTML tags, and is
        // a non-jQuery call.  The jQuery version is .html(), but you want 
        // .val() with no parameters, which gets the current input value
        var val = parseInt($(this).val(), 10);

        //Test if it is a valid number with built-in isNaN() function
        if (!isNaN(val)) {
            valid_labels += 1;
            total += val;
        }
    });

    // Calculate the average
    // Note: This is done inside the keyup handler
    // When it is outside, it is only calculated once when the page loads
    $('.average').val(total / valid_labels);
}); 
```

# unit-testing - 使用 Visual Studio 2012 每晚运行单元测试

> ID：14899519
> 
> 赞同：2
> 
> 时间：2013-02-15T16:55:09.697
> 
> 标签：unit-testing, visual-studio-2012, scheduling

我正在与其他一些开发人员在 Visual Studio 2012 中开发一个项目。在我的项目中，每一个都与 TFS 2012 连接在一起。

我正在编写很多单元测试来测试我项目中的类。

**在一个完美的世界里，我希望：**

1.  **每晚**运行我所有的单元测试。如果我可以控制调度（例如，周日运行 X 测试和周一运行 Y 测试），那就太好了。
2.  每天获取测试失败/通过的报告。很高兴收到一封电子邮件给我。
3.  浏览运行历史：查看特定测试的运行历史。

**那可能吗？**

我已经查看了“*构建后运行测试*”解决方案，发现它无效。令人烦恼的是，在每个 [build -> build solution] 之后，它开始运行 100 多个单元测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:00:01.520

我建议您使用类似[TeamCity](http://www.jetbrains.com/teamcity/)的东西，这是持续集成服务，每次您签入时都会进行构建运行测试，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:28:04.670

[Jenkins](http://jenkins-ci.org/)是一台持续构建机器，听起来可以满足您的需求。您可能需要安装一些插件，但它可以完成您所说的 abotu

# iphone-4 - 在 iPhone 4S 上向（未解锁的）基带 3.0.04 发送 AT 命令

> ID：14899522
> 
> 赞同：1
> 
> 时间：2013-02-15T16:55:16.500
> 
> 标签：iphone-4

我想知道您是否可以使用 Minicom / sendmodem / igsm 将 AT 命令发送到我相信是 Qualcomm MDM6610 / MDM6600 的基带芯片？我尝试这个没有任何成功。此外，没有 /dev/*baseband*，但我使用了 /dev/tty.debug。和。不。成功。但是：在 iphone 上使用 minicom（它总是说它处于离线状态）并使用 AT ENTER AT ENTER AT ENTER 向基带发送垃圾邮件......导致同样打印两个点、一个问号和一些换行符。

好的，这是我的问题：对于没有为任何旧固件保存 SHSH blob 的我来说，是否有可能与调制解调器通信？Signal.app 真的可以在 4S 上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:00:58.247

如果您想使用新的 iOS 固件，则无需保存旧的 SHSH 文件。另[请查看此链接](http://dreamjb.net/2013/03/planetbeing-app-called-signal-2-download/)以获取更新的 Signal-2 应用程序，但也没有关于 iPhone 4s 支持的确认消息

# c - c语言中的一个月日历

> ID：14899525
> 
> 赞同：1
> 
> 时间：2013-02-15T16:55:28.773
> 
> 标签：c, calendar

我正在尝试用 C 制作一个一个月的日历。这种代码*很*有效，但是对于某些输入，间距是关闭的。我完全不知道如何解决它。

此外，如果你有办法制作一个包含比这更少代码的一个月日历，那将是很棒的，因为我必须在大约一个小时内进行测试。

谢谢！

```
int main() {

    int spaces, days_in_month, day_of_week, i;

    printf("Please enter the numier of days in the month:\n");
    scanf("%d", &days_in_month);

    printf("Please enter starting day of the week:\n");
    scanf("%d", &day_of_week);

    spaces = day_of_week - 1;

    printf("Here's your calendar:\n");

    for (i=0; i<spaces; i++)
        printf("   ");

    for (i=1; i<=(7-spaces); i++)
        printf("  %d", i);

    printf("\n");

    if ((i-spaces) >10 && (i-spaces) < 14-spaces)
        printf("   ");

    for (i=(8-spaces); i<=(10-spaces); i++)
        printf("  %d", i);
    for (i=(11-spaces); i<=(14-spaces); i++)
        printf(" %d", i);

    printf("\n");

    for (i=(15-spaces); i<=(21-spaces); i++)
        printf(" %d", i);

    printf("\n");

    for (i=(22-spaces); i<=(28-spaces); i++)
        printf(" %d", i);

    printf("\n");

    for (i=(29-spaces); i<=days_in_month; i++)
        printf(" %d", i);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:10:26.010

如果一天有数字 1...9，请使用printf`%2d`为您插入一个空格。`%d`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:19:33.503

你的考试怎么样？

这是一种更简单的方法（忽略输入验证）：

```
// Normalize day of week to be 0-6 rather than 1-7.
day_of_week -= 1;

// Pad the first line of the calendar.
for(i = 0; i < day_of_week; i++)
    printf("   ");

// For each day in the month...
for(i = 1; i <= days_in_month; i++)
{
    // Print the date for the current day_of_week.
    // '%3d' will print the value padding with spaces if necessary such that
    // at least 3 characters are written.
    printf("%3d", i);

    // Increment the day_of_week.
    // The modulo operator '% 7' will cause day_of_week to wrap around to 0
    // when day_of_week reaches 7.
    day_of_week = (day_of_week + 1) % 7;

    // if the new day_of_week is 0, output a newline to start at the
    // beginning of the next line.
    if(day_of_week == 0)
        printf("\n");
} 
```

示例运行产生以下输出：

```
$ ./calendar.exe 
Please enter the numier of days in the month:
28
Please enter starting day of the week:
6
Here's your calendar:
                 1  2
  3  4  5  6  7  8  9
 10 11 12 13 14 15 16
 17 18 19 20 21 22 23
 24 25 26 27 28 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T17:02:04.843

```
#include<stdio.h>

int main(void)
{
    int start_day, days_in_month, i, day_of_week;

    printf("Enter start day: ");
    scanf("%d", &start_day);

    printf("Enter days in month: ");
    scanf("%d", &days_in_month);

    for(i = 1 ; i < start_day; i++) {
        printf("   ");
    }

    for(i = 1; i <= days_in_month; i++) {
        printf("%2d ", i);
        if((i + start_day - 1)%7 ==0) {
            printf("\n");
        }
    }
    return 0;
} 
```

# iphone - 最佳做法是使用 .xib 文件吗？

> ID：14899532
> 
> 赞同：0
> 
> 时间：2013-02-15T16:56:00.507
> 
> 标签：iphone, ios

我想知道使用 .xib 文件来绘制/与用户界面交互是否是一种好习惯。使用 xib 文件有什么好处？如果我不使用它，只需初始化一个视图控制器并在硬代码上绘制/定位对象是最佳实践吗？有什么好处？我正在考虑它，因为有些配置无法在 .xib 中完成，只能使用硬代码。制作一个通用的应用程序，国际化是更好地使用 .xib 还是可以全部用硬代码完成？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:11:15.520

我不认为这是“最佳实践”的问题。如果您有一个相当复杂的布局，其中有许多子视图需要放置在彼此之间的特定关系中，那么在 xib 或故事板中做起来要容易得多。对于通用应用程序，您通常会为 iPad 和 iPhone 版本提供单独的 xib 或故事板。就国际化而言，许多与之相关的问题都可以通过布局约束来处理（例如自动更改标签的大小），并且在 WWDC 2012 演讲“Auto Layout By Example”中对此进行了讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:08:38.217

这取决于要求和需要。

大多数情况下，IB 都能满足您的要求，因此无需为所有 GUI 内容编写代码，但您应该知道如何从代码创建 GUI。

对于 iphone，您可以满足您的所有需求，但使用 macos，大型控件和嵌套控件会给您带来麻烦。

所以这取决于你，你觉得哪种方式更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:09:39.443

我认为这取决于您要完成的工作。现实情况是您想使用所有可用的工具。

与试图在代码中弄清楚它相比，使用故事板可以更快、更容易地创建 UI。您还可以立即获得有关其外观的反馈，而无需重新编译。有时，看到一些东西比想象它会是什么样子更容易。

这并不意味着你不应该知道如何在代码中做同样的事情。如果您不能在 xib/storyboard 中执行此操作，我会退回到代码。

您无法执行哪些配置？使用 IB 很容易实现国际化。有一些关于 IB、故事板和国际化的精彩 WWDC 视频。在排除你能做什么和不能做什么之前，我会先检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T17:13:17.850

我会亲自使用 Storyboard 创建它，而不是 xib。使用情节提要，您可以以编程方式生成界面、转场等。您还可以在情节提要中创建任何 UIElement，就像在 XIB 中一样。

# c# - WPF：未处理 XAML 解析异常

> ID：14899536
> 
> 赞同：3
> 
> 时间：2013-02-15T16:56:10.200
> 
> 标签：c#, wpf, xaml

我熟悉了 WinForms，我正在尝试学习一些 WPF 的东西。

当窗口正在初始化时，我遇到了这个 XAML 解析异常。这是我到目前为止所做的一些调查。

首先，我有 2 个名为“问题”和“答案”的课程。

当我尝试像这样初始化这两个类时出现错误：

```
public MainWindow()
{
    InitializeComponent();
}   

private string _firstName;

public string FirstName
{
    get { return _firstName; }
    set { _firstName = value; }
}

Question _question = new Question();
Answer _answer = new Answer();

private void MetroWindow_Initialized_1(object sender, EventArgs e)
{
}

private void MetroWindow_Loaded_1(object sender, RoutedEventArgs e)
{
    //some code here
}

private void btnStart_Click(object sender, RoutedEventArgs e)
{
    //some code here
} 
```

但是当我尝试删除问答的初始化时，它运行正常。

顺便说一句，我正在使用 MahApps。

有人可以给我一个提示我的问题吗？非常感谢！

[编辑]

它说

```
The invocation of the constructor on type 'Recitation_Game.MainWindow' that matches the specified binding constraints threw an exception.' Line number '4' and line position '9 
```

您可能想在这里查看我的 xaml：

```
<Controls:MetroWindow x:Class="Recitation_Game.MainWindow" ShowIconOnTitleBar="true"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        Title="Recitation Game" Height="350" Width="525" WindowStartupLocation="CenterScreen" ResizeMode="NoResize" Initialized="MetroWindow_Initialized_1" Loaded="MetroWindow_Loaded_1">
    <Grid>
        <Rectangle Fill="#FFF4F4F5" HorizontalAlignment="Left" Height="178" Margin="10,91,0,0" VerticalAlignment="Top" Width="497" Stroke="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
        <Label x:Name="lblWelcome" Content="Label" HorizontalAlignment="Left" Margin="30,109,0,0" VerticalAlignment="Top" Foreground="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" FontSize="14"/>
        <Label Content="Recitation Game" HorizontalAlignment="Left" Margin="366,23,0,0" VerticalAlignment="Top" FontSize="18">
            <Label.Foreground>
                <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.MenuHighlightColorKey}}"/>
            </Label.Foreground>
        </Label>
        <Label Content="v. 01.00.00" HorizontalAlignment="Left" Margin="432,57,0,0" VerticalAlignment="Top" FontSize="14">
            <Label.Foreground>
                <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.MenuHighlightColorKey}}"/>
            </Label.Foreground>
        </Label>
        <Button x:Name="btnStart" Content="Start Game" HorizontalAlignment="Left" Margin="400,275,0,0" VerticalAlignment="Top" Width="107" Click="btnStart_Click"/>
    </Grid>
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/FlatButton.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
</Controls:MetroWindow> 
```

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:02:45.293

我*怀疑*问题在于您的 XAML 尝试使用`Window.Loaded`事件处理程序，但没有一个（至少在发布的代码中没有）。

这是在 xaml 的第 4 行：

```
 Loaded="MetroWindow_Loaded_1" 
```

话虽如此，XAML Parse Exceptions 并未在其消息中提供大量信息。但是，您可以检查`InnerException`异常的原因，并且通常会获得有关 XAML 解析器失败原因的更多详细信息。

# c# - 回合双打操作

> ID：14899537
> 
> 赞同：0
> 
> 时间：2013-02-15T16:56:13.843
> 
> 标签：c#, double, rounding

假设我有三个双打，a、b 和 c。

```
double a = 1.234560123;
double b = 7.890120123;

double c = a * b;

c = 9.740827669535655129 
```

我想使用只有 5 个小数位的数字。因此，如果我使用 Math.Round(a, 5) 和 Math.Round(b, 5) 对 a 和 b 进行舍入，我会得到：

```
double a_r = Math.Round(a, 5);
double b_r = Math.Round(b, 5);

a_r = 1.23456
b_r = 7.89012

double c_r = a_r * b_r;

c_r = 9.7408265472 
```

但是当我计算 c 时，我仍然得到一个超过 5 位小数的数字（这将发生在每个乘法、除法、增强和类似操作中）。我可以在我的代码中舍入所有结果，但这是我想避免的艰苦工作。

由于我在其他操作中使用 c 并且在其他操作中使用此操作的结果，我不想每次都舍入所有中间结果，以免传播由不需要的小数位引起的错误。

有没有一种方法可以独立于操作来定义具有固定小数位数的双精度数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:58:05.020

通常，最好保留双精度，并使用自定义格式将值*显示*到小数点后 5 位：

```
double a = 1.234560123;
double b = 7.890120123;

double c = a * b;

Console.WriteLine("Result = {0:N5}", c); 
```

几乎所有将数值转换为字符串的例程都允许使用[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)以及[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:19:42.947

您不能定义具有有限小数位的双精度。您应该在显示数字时依靠格式化数字。看到[这个问题](https://stackoverflow.com/questions/2303256/set-the-number-of-digits-after-the-point-in-double)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T19:25:25.240

我找到了一种使用运算符重载解决问题的方法。

因此，我将所有运算重新定义为乘法、除法、复数乘法和矩阵运算，以将结果四舍五入到我想要的小数位数。

一个例子：

```
public static double operator *(double d1, double d2)
{
    double result;
    result = Math.Round(d1 * d2, 5);

    return result;
} 
```

# single-sign-on - 使用 PowerBuilder 6.5 进行 Kerberos 身份验证

> ID：14899538
> 
> 赞同：2
> 
> 时间：2013-02-15T16:56:16.050
> 
> 标签：single-sign-on, windows-authentication, kerberos, powerbuilder

我想使用 Kerberos (Active Directory) 设置 SSO。这意味着在 Powerbuilder 6.5 应用程序中获取 kerberos 票证。不可能升级 PB 版本（是的，真的……）。我的程序的所有用户都曾登录过 Windows Server（2003 或 2008）：RDP 会话。

是否可以使用此 PowerBuilder 版本获取和检查 Kerberos Ticket？如何 ？

我认为借助 Windows API 可以获得 Windows 当前用户名，但它不如 kerberos 身份验证安全。

我会很感激任何帮助。

# javascript - 为什么 .on() 不适用于页面上未预加载的链接？

> ID：14899540
> 
> 赞同：0
> 
> 时间：2013-02-15T16:56:25.903
> 
> 标签：javascript, jquery

在尝试 hashchange 并发现它在 Internet Explorer 中根本不起作用后，我决定尝试使用 click() 方法。下面应该做的是，当点击链接时，检查 url 是否包含页面，然后将 link_content 的 html 更改为 id 等于哈希的 div 内容。

它适用于与页面一起预加载的所有链接，但不会触发 link_content div 中的当前链接。为什么这不起作用？

```
$(document).ready(function() {          
    $('a').on("click", function(event){
        if (location.pathname.search("boh.html")){  
            hash=this.hash;
            if(hash=='#more'){
                $('#link_content').html($('#hiddenlist').html());
            }
            else if(hash){
                $('#link_content').html($(hash).html());
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:58:16.837

尝试：

```
$(document).on("click", "a", function (event) {
    // Your function stuff
}); 
```

这是该`on`方法的委托特性。它允许您将事件绑定到容器元素，但回调函数只会对您在第二个参数中提供的选择器指定的元素执行。在这种情况下用作主要选择器`document`可能不是最好的（尽管它应该可以正常工作），我认为您应该使用：

```
$("#page_container").on("click", "a", function () { 
```

尝试将主选择器缩小到您希望将此事件绑定到其包含元素的容器`<a>`元素。我想甚至`"body"`可以工作，我不确定`"body"`和之间哪个是首选`document`。这就是我的意思：

```
<body>
    <div id="main1">
        header stuff, no <a> elements
    </div>

    <div id="main2">
        main content, definitely contains <a> elements
    </div>
</body> 
```

在这种情况下，我会使用它，`$("#main2").on("click", "a", function () {`因为它缩小了事件可能发生的区域（并希望在点击事件发生时减少 jQuery 的处理）。

这是`on`签名：[http ://api.jquery.com/on/#on-events-selector-data-handlereventObject](http://api.jquery.com/on/#on-events-selector-data-handlereventObject)

之所以可行，是因为事件绑定到容器，它**不是**（不应该是）动态的，并且始终可用（因此事件将始终被绑定）。当特定事件（在您的情况下为“单击”）从容器内的元素触发时，它会使容器冒泡，这就是该事件发挥作用的地方。该事件将确定触发事件的元素是否与第二个参数选择器（如果提供）匹配，如果匹配，则在其上下文中执行事件。

# c# - 除非前一个实例完成，否则quartz.net 重复计划任务不会运行？

> ID：14899548
> 
> 赞同：0
> 
> 时间：2013-02-15T16:56:48.583
> 
> 标签：c#, scheduling, quartz.net

我刚刚开始使用 Quartz.net。我能够通过将以下内容添加到我的 app.config 来运行它

```
<configSections>
    <section name="quartz"
     type="System.Configuration.NameValueSectionHandler, 
         System, Version=1.0.5000.0,Culture=neutral, 
         PublicKeyToken=b77a5c561934e089" />
</configSections> 
```

```
<!-- Configure Thread Pool -->
<add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz" />
<add key="quartz.threadPool.threadCount" value="10" />
<add key="quartz.threadPool.threadPriority" value="Normal" />

<!-- Check for updates to the scheduling every 10 seconds -->
<add key="quartz.plugin.xml.scanInterval" value="10" />

<!-- Configure Job Store -->
<add key="quartz.jobStore.type" value="Quartz.Simpl.RAMJobStore, Quartz" />
<add key="quartz.plugin.xml.type" value="Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin, Quartz"/>
<add key="quartz.plugin.xml.fileNames" value="quartz.config" /> 
```

我添加了以下 Quartz.config：

```
<?xml version="1.0" encoding="UTF-8"?>
<job-scheduling-data xmlns="http://quartznet.sourceforge.net/JobSchedulingData"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                version="2.0">
  <processing-directives>
    <overwrite-existing-data>true</overwrite-existing-data>
  </processing-directives>

  <schedule>
    <job>
      <name>ResultProcessor</name>
      <group>Result</group>
      <description>Normalizes results.</description>
      <job-type>TestingNamespace.TestingJob,xxx</job-type>
    </job>

    <trigger>
      <simple>
        <name>ResultProcessorTrigger</name>
        <group>Result</group>
        <description>Trigger for result processor</description>
        <job-name>ResultProcessor</job-name>
        <job-group>Result</job-group>
        <misfire-instruction>SmartPolicy</misfire-instruction>
        <repeat-count>-1</repeat-count>
        <repeat-interval>60000</repeat-interval> <!-- Every 60 seconds -->
      </simple>
    </trigger>
  </schedule>
</job-scheduling-data> 
```

以下类正在执行：

```
namespace TestingNamespace
{
    class TestingJob: IJob
    {
        protected static readonly ILog logger = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

        public void Execute(IJobExecutionContext context)
        {
            try
            {
                logger.Info("Executing PROCESSING");
                Thread.Sleep(TimeSpan.FromMinutes(5));
            }
            catch (Exception ex)
            {
                logger.Error("Problem running Execute.", ex);
                throw;
            } // End of catch
        } // End of Run
    } // End of TestingJob
} // End of namespace 
```

正如你在工作中看到的那样，我有一个`Thread.Sleep(TimeSpan.FromMinutes(5));`让工作休眠五分钟。问题是，我不希望进程的多个实例同时运行。在当前设置中，我仍然`Executing PROCESSING`每 60 秒收到一条消息。

有没有办法使用 Quartz.net 让这个工作只在它的前一个实例完成后运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:13:16.957

这是你应该用*[DisallowConcurrentExecution]*属性标记你的工作的地方。这里解释了这背后的推理/行为[Quartz.net 调度程序和 IStatefulJob](https://stackoverflow.com/questions/6013166/quartz-net-scheduler-and-istatefuljob)（IStatefulJob 标记接口是 2.0 之前的方式）。

# java - 具有 Object 类型的 JAXB 属性引发空指针异常？

> ID：14899555
> 
> 赞同：6
> 
> 时间：2013-02-15T16:56:55.870
> 
> 标签：java, jaxb

我正在尝试注释一个 java 类以创建一个 JAXB 模式，其中包含一个具有 value 属性的元素。代码如下：

```
 @XmlAttribute(name="value")
    public Object getSettingValue() {
        return this.settingValue;
    }

    public void setSettingValue( final Object settingValue ) {
        this.settingValue = settingValue;
    } 
```

当我尝试生成模式（使用 Eclipse 的非 Moxy 实现）时，我得到了这个空指针异常：

```
Exception in thread "main" java.lang.NullPointerException
    at com.sun.xml.internal.bind.v2.runtime.reflect.TransducedAccessor.get(TransducedAccessor.java:154)
    at com.sun.xml.internal.bind.v2.runtime.property.AttributeProperty.<init>(AttributeProperty.java:56)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(PropertyFactory.java:93)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(ClassBeanInfoImpl.java:145)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:479)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:305)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1100)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:143)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:110)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:376)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
    at org.eclipse.jpt.jaxb.core.schemagen.Main.buildJaxbContext(Main.java:95)
    at org.eclipse.jpt.jaxb.core.schemagen.Main.generate(Main.java:76)
    at org.eclipse.jpt.jaxb.core.schemagen.Main.execute(Main.java:62)
    at org.eclipse.jpt.jaxb.core.schemagen.Main.main(Main.java:47) 
```

当我将其设为 @XmlElement 而不是属性时，生成的模式没有问题，因此它必须与此有关。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:45:13.360

您看到的`NullPointerException`似乎是由于 JAXB 参考实现中的错误。您可以使用以下链接输入错误。

*   [http://java.net/jira/browse/JAXB/](http://java.net/jira/browse/JAXB/)

[**使用EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)作为您的 JAXB 提供程序时，不会发生类似的异常。

**解决方法**

您可以改为将属性更改为类型`String`。类型的属性`Object`无论如何都不会往返，因为与元素不同，属性没有任何机制来包含类型信息。

* * *

> 当我将其设为 @XmlElement 而不是属性时，生成的模式没有问题，因此它必须与此有关。

**Java 模型（根）**

当映射到 XML 元素时，Object 是有效的属性类型。

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Root {

    private Object settingValue;

    public Object getSettingValue() {
        return settingValue;
    }

    public void setSettingValue(final Object settingValue) {
        this.settingValue = settingValue;
    }

} 
```

这是因为 XML 元素可以包含`xsi:type`属性形式的类型信息。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <settingValue 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:xs="http://www.w3.org/2001/XMLSchema" 
        xsi:type="xs:int">123</settingValue>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:21:26.650

属性类型必须映射到模式内置数据类型或模式简单类型。

Object 类型与这些条件不匹配。

[http://www.w3schools.com/schema/el_attribute.asp](http://www.w3schools.com/schema/el_attribute.asp)

[http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlAttribute.html](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlAttribute.html)

# c++ - protobuf 可以部分读取吗？

> ID：14899556
> 
> 赞同：4
> 
> 时间：2013-02-15T16:57:05.673
> 
> 标签：c++, protocol-buffers

我想将我的地形数据保存到一个文件中并仅加载其中的一部分，因为它太大而无法将其作为一个整体存储在内存中。实际上我什至不知道 protobuf 是否适合这个目的。

例如，我会有这样的结构（在语法上可能无效，我只知道简单的基础知识）：

```
message Quad {
    required int32 x = 1;
    required int32 z = 2;

    repeated int32 y = 3;
} 
```

**x**和**z**值在我的程序中可用，通过使用它们，我想找到具有相同**x**和**z**（在文件中）的正确 Quad 对象以获得**y**值。但是，我不能只用**ParseFromIstream()**解析文件，因为（我认为是这样）它将整个文件加载到内存中，但就我而言，文件太大了。

那么，protobuf 是否能够加载一个对象，发送给我检查它，如果对象错误，给我第二个对象？

实际上......我只能问：**ParseFromIstream()**是否将整个文件加载到内存中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T08:45:07.213

虽然有些库允许您部分读取文件，但 Google 推荐的技术是让文件包含多条消息：

[https://developers.google.com/protocol-buffers/docs/techniques](https://developers.google.com/protocol-buffers/docs/techniques)

> 协议缓冲区不是为处理大消息而设计的。作为一般经验法则，如果您要处理的消息均大于 1 兆字节，则可能是时候考虑另一种策略了。
> 
> 也就是说，Protocol Buffers 非常适合处理大型数据集中的单个消息。通常，大型数据集实际上只是小片段的集合，其中每个小片段都可能是结构化的数据片段。

因此，您可以将一长串`Quad`消息写入文件，由消息的长度分隔。如果您需要随机寻找特定`Quad`的 s，您可能需要添加某种索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T17:37:27.473

这取决于您使用的实现。有些具有“按序列读取”的 API。例如，假设您将其存储为“重复四边形”，那么使用 protobuf-net 将是：

```
int x = ..., y = ...;
var found = Serializer.DeserializeItems<Quad>(source)
            .Where(q => q.x ==x && q.y == y); 
```

关键是：它产生了一个假脱机（不是一次全部加载）和短路序列。

我不知道具体的 c++ api，但我希望它有类似的东西 - 但最坏的情况是你可以解析 varint 标头并准备一个长度上限的流。

# excel - excel : no vba : 引用或链接单元格到带有变量的远程服务器数据

> ID：14899557
> 
> 赞同：0
> 
> 时间：2013-02-15T16:57:09.080
> 
> 标签：excel, excel-formula, remote-server, excel-indirect

我有一个引用到远程服务器的单元格，其公式为：

```
=serv~10~0'!'23'*1 
```

10 应该是引用到同一工作表中的单元格的变量

我试过这个但没有用

```
=INDIRECT("serv~" & $A$1 & "~0'!'23'*1") 
```

知道怎么做！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:45:06.037

1个vba解决方案：

```
Private Sub ListBox1_Click()
Application.ScreenUpdating = False

Dim cmpCd As String
cmpCd = CStr(Cells(1, 1).Value)

'field title = company name
Cells(2, 3).FormulaR1C1 = "=serv~" & cmpCd & "~0'!'23'*1"

Application.ScreenUpdating = True
End Sub 
```

# c# - 导致 XML 文档警告的多行样式注释

> ID：14899558
> 
> 赞同：0
> 
> 时间：2013-02-15T16:57:10.793
> 
> 标签：c#, visual-studio-2010, xml-documentation

我在 C# 项目中有许多多行样式注释，当项目选项设置为输出 XML 文档文件时，它们都会触发警告*XML 注释未放置在有效语言元素上*。在 Visual Studio 2010 中观察到此行为。

如果没有将所有这些注释更改为单行样式注释，我该怎么做才能防止触发这些警告？

简化示例：

```
public class Foo
{
    /// <summary>
    /// Does something.
    /// </summary>
    public void DoSomething()
    {
        /**
         * Do something interest here.
         */
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T16:58:02.960

只需删除`*`评论第一行的第二个即可。

C 样式 XML 文档注释以`/**`.

# php - Facebook 应用程序注销

> ID：14899563
> 
> 赞同：0
> 
> 时间：2013-02-15T16:57:27.447
> 
> 标签：php, facebook, facebook-php-sdk

我为我的 php 应用程序使用了一个非常简单的代码，它实际上只显示用户 ID。我没有考虑任何安全措施，因为我只是在测试这个应用程序。

我允许用户单击链接登录，并在允许访问我的应用程序后，将用户重定向到主页并显示他/她的用户 ID。

但是，我包含的注销 url 会破坏用户的 facebook 会话。

我想要一些不同的东西。当用户单击注销时，我想撤销该用户对该应用程序的访问权限。可能吗？

```
<?php

require './src/facebook.php';

$config = array();
$config['appId'] = '542738299083506';
$config['secret'] = '********************************';
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config);

$loginUrl = $facebook->getLoginUrl(array(
    'scope' => 'publish_stream,publish_actions'
));

?>
<a href="<?php echo $loginUrl; ?>" target="_TOP">Login With Facebook</a>
<?php

$user = $facebook->getUser();

print_r($user);

$logoutUrl = $facebook->getLogoutUrl();

?>

<a href="<?php echo $logoutUrl; ?>" target="_TOP">Logout</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:59:56.753

你想要这样的东西...

```
$facebook->api('/me/permissions', 'DELETE'); 
```

调用它会撤销当前用户的应用权限。如果您想从其他用户撤消，请替换`me`为配置文件 ID。

> 您可以通过使用用户 access_token > 向 PROFILE_ID/permissions 发出 HTTP DELETE 请求来代表用户取消对应用程序的授权或撤销特定的扩展权限。
> 
> 参数 描述 类型 必需的权限 您要撤销的权限。如果您 > 不指定权限，那么这将完全取消对应用程序的授权。string >no 你得到以下结果。
> 
> 描述 如果删除成功，则输入 True，否则输入错误。布尔值

# sql-server-2008 - 如何从 .NET 4.0 Windows 服务执行 SSIS 2008 包？

> ID：14899567
> 
> 赞同：0
> 
> 时间：2013-02-15T16:57:36.447
> 
> 标签：sql-server-2008, .net-4.0, ssis

我有一个 .NET 4.0 Windows 服务应用程序（VS2010），我需要调用一个 SSIS 2008 包。

我知道创建 Web 服务并从 SSIS 调用该服务更容易，但我无权这样做。

所以，我认为我的下一个最佳选择是从我的 Windows 服务调用我的 SSIS 包。我知道在 .NET 2.0 中你可以调用 DTS 包，如果我安装了 SQL Server 2012。

但我无法为这种特定组合找到解决方案。.NET 4 和 SQL Server 2008 SSIS。

或者有没有一种方法可以使用相同的组合，我可以使用 SSIS 2008 启动和停止 Windows 服务。并确定 Windows 服务何时完成运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:03:16.497

请参阅*`Using a Web Service or Remote Component to Run a Remote Package Programmatically`*以下 MSDN 文档中的部分。

[*以编程方式加载和运行远程包*](http://msdn.microsoft.com/en-us/library/ms403355.aspx)

# html - 创建一个无论屏幕大小都可以缩小和放大的网站

> ID：14899572
> 
> 赞同：0
> 
> 时间：2013-02-15T16:57:46.290
> 
> 标签：html, css, aspect-ratio

我正在我的 13 英寸 mac book 上创建一个网站 我尝试使用的背景图像对于我的屏幕来说太大了，这是他们在我的屏幕上开发时保持纵横比相同的一种方式，因此它看起来与按比例放大或缩小比例

我已使用此代码缩放背景图像以填充整个屏幕

```
background: url(images/background.jpg) no-repeat center center fixed; 
    background-size: cover;
    background-size: cover;
    background-size: cover;
    background-size: cover; 
```

我使用了页面换行来包装内容

```
#wrapper {margin: 0 auto 0 auto; width:1070px;height:auto; 
```

但它只是在重叠图像上出现，这不会发生配给是关闭的，因为包装器的宽度与留给它的空间相同，但它与背景图像重叠的是 1772x1240，绿色框的宽度是 1070 是它们的一种设计和保持这些比率的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:15:57.503

采用，

```
background:url(images/background.jpg) 0 0 no-repeat; 
background-position:fixed;background-size:100%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:22:43.100

我不是特定于要求，但如果您真的在寻找可重用布局的东西，请遵循此。它适用于所有现代浏览器

HTML

```
 <div class="table">
    <div class='row'>
      <div class='cell'>1</div>
      <div class='cell'>2</div>
      <div class='cell'>3</div>
      <div class='cell'>4</div>
    </div>
  </div> 
```

CSS：

```
 .table{
     height: 50px;
     width:100%;
     background-color:Red;
     display:table;
     table-layout:fixed;
  }
  .row{
     display:table-row
  }
  .cell{
     display:table-cell;
     line-height:50px;
     text-align:center;
  } 
```

和一个[Demo](http://jsbin.com/icacev/1/)，尝试调整页面大小

# javascript - JSON.parse 导致 Chrome 选项卡崩溃（“Aw，Snap”），尽管使用了 try/catch

> ID：14899576
> 
> 赞同：1
> 
> 时间：2013-02-15T16:58:00.427
> 
> 标签：javascript, jquery, ajax, json, google-chrome

我正在从 AJAX 查询中加载一些 JSON 数据：

```
 $.ajax({'url': url, type: params.method, 'data': data, timeout: this.settings.timeout, success: function(d,a,x){
                console.log('request Complete',params.endpoint,params.params);
                var json = null;
                try {
                    json = JSON.parse(d);
                } catch(e) {
                    console.error(e);
                }
                console.log('json');

                // omitted for brevity...
            }
        }); 
```

我在 chrome 中看到偶尔的“Aw，Snap”崩溃，其中最后一个 console.log 是“请求完成”（错误或第二个日志永远不会显示）。

我想重要的是要注意数据可能很大（有时大到〜15Mb），这就是为什么我没有打印出`d`每个请求并寻找格式错误的JSON（但是......我可能会导致那个） . FWIW，我也试过`$.parseJSON`而不是`JSON.parse`

我对“Aw, Snap”错误所做的研究充其量是模糊的。我最好的猜测是这是一个OOM。不幸的是，我无法减少结果集的占用空间。

有什么方法可以让我至少优雅地失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:02:11.017

当你通过`dataType`属性告诉 jQuery 响应数据是 JSON 时会发生什么？这样做应该会导致 jQuery 预解析并只给你数据。如果您对正在发生的事情是正确的，那么这似乎也可能导致崩溃。不过，jQuery 在解析之前会进行一些完整性检查。

```
$.ajax({
    url: url,
    type: params.method,
    data: data,
    dataType: 'json',
    timeout: this.settings.timeout,
    success: function (d, a, x){
        // `d` should already be parsed into an object or array, and ready to use
    }
}); 
```

如果这没有帮助，请发布您的实际 JSON 响应以供我们查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T18:10:25.510

“@the system”成功了。返回的 15MB 信息对于您的浏览器来说太多了。我在试图了解为什么我的 64 字节编码图像字符串会导致 chrome 选项卡崩溃时绊倒了，而且它只有 200-500KB。

**要“优雅地失败”**，您似乎需要有适当的服务器端逻辑来防止这种情况发生；可能会限制 JSON 字符串的大小。在初始 JSON 字符串中只有 X 个长度的字符，并为“isFinishedSending: false”或“leftOff: [index/some marker]”添加一个属性，这样你就可以超时一段时间，然后用你离开的地方再次访问你的服务器离开。

# c# - 二进制数转十进制（效果不好，为什么？）

> ID：14899582
> 
> 赞同：2
> 
> 时间：2013-02-15T16:58:09.177
> 
> 标签：c#, binary, decimal

嘿伙计们！我已经写了这个，但是效果不好，这让我很生气。我试图找到解决方案，但没有发现任何错误。

```
 private string binaris_decimalis(string binaris_szam)
    {
        char[] binaris_karakterek = binaris_szam.ToCharArray();

        int decimalis_szam_int = 0;
        string decimalis_szam;

        for (int szam = 0; binaris_karakterek.Length > szam; szam++)
        {
            decimalis_szam_int = decimalis_szam_int * 2 + Convert.ToInt32(binaris_karakterek[szam]);
        }

        decimalis_szam = Convert.ToString(decimalis_szam_int);

        return decimalis_szam;
    } 
```

像这样使用：

```
 private void valtas_2_Click(object sender, EventArgs e)
    {
        binaris_szam_2 = binaris_2.Text.Split('.');

        for (int szam = 0; 4 > szam; szam++)
        {
            decimalis_szam_2[szam] = binaris_decimalis(binaris_szam_2[szam]);
        }

        decimalis_2.Text = decimalis_szam_2[0] + "." + decimalis_szam_2[1] + "." + decimalis_szam_2[2] + "." + decimalis_szam_2[3];
    } 
```

binaris_szam_2 和 decimalis_szam2 被声明为公共字符串 []：

```
string[] binaris_szam_2 = new string[4];
string[] decimalis_szam_2 = new string[4]; 
```

文本输入如下所示：

> 10000000.10000000.10000000.10000000

文本输出应如下所示：

> 128.128.128.128

但输出是：

> 12368.12368.12368.12368

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:02:28.263

我不知道您的代码有什么问题，但您可以直接使用 c# 来执行此操作。

```
Convert.ToInt32("10000000", 2).ToString(); // output  128 
```

# git - git push 到 git forked repo，但是到一个分支

> ID：14899583
> 
> 赞同：0
> 
> 时间：2013-02-15T16:58:10.427
> 
> 标签：git, github

我从一个 repo 克隆了 master 分支。
我对本地进行了一些更改。现在我的 repo 是 master 分支的副本。
从此以后，我想将我的代码提交给原始分支，而不是主分支，即“测试”分支。
当我执行 git pull 时，它会从主分支中提取更改，但我不希望这样。我想要测试分支的更改。
如果我`git checkout test`，因为它是分叉回购的一个分支，所以不会出现。我还能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:33:04.823

```
git push -u <remote> <localbranch>:<remotebranch> 
```

例如：

```
git push -u origin mybranch:mybranch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:49:43.600

如果您为远程分支设置本地跟踪分支`test`，那么我认为您可以执行以下操作（可能有语法错误）：

```
git pull origin/test test 
```

# excel - 搜索列中的每个单元格以查找某个值并从找到该值的行中的另一个单元格中复制值

> ID：14899584
> 
> 赞同：0
> 
> 时间：2013-02-15T16:58:15.590
> 
> 标签：excel, vba

我有一个表作为数据库放在一起。我正在尝试编写一个宏来搜索表中的系统大小列以查找“2500”，然后搜索标准列以查找“标准”，然后搜索类别列以查找“FL”然后我想从选择与在另一个工作表中找到这些值的行相关的项目列。例如，宏将在 E 列（系统大小）中搜索所有“2500”，然后在 F 列（标准）中搜索所有“标准”，然后在 G 列（类别）中搜索所有“FL”。然后，我希望它从 C 列（选择项目）中复制满足这些要求的每一行的值并将其粘贴到另一张表中。以下是我到目前为止的代码，但我只能让它搜索一个单元格而不是整个列。

```
Sub ImDoingMyBest()
'
' ImDoingMyBest Macro
'

'
    If Sheets("Database").Range("E2").Value Like "*2500*" Then
    Sheets("Database").Range("C2").Copy
    Sheets("Quote Sheet").Select
    Range("B26").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=True
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:58:25.597

搜索整列的方法是使用for循环；例如：

```
For i  = 1 To 10000

    If Sheets("Database").Range("E" & i).Value Like "*2500*" Then

        Sheets("Database").Range("C" & i).Copy
        ...
        ...

    End If

Next i 
```

或者（和我的偏好）使用 Cells( *row* , *column* ) 格式而不是 Range - 这避免了连接 Range 引用。这需要

```
Range("E" & i) 
```

并更改为

```
Cells(i, 5) 
```

这是更整洁的代码（IMO）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:29:59.563

跟进 Siddarth Rout 的评论，以下代码使用 Autofilter 来隔离“数据库”表中符合您的条件的行，然后将 C 列中的相应值复制到名为“报价表”的表的单元格 B26 开始的范围”。

```
Sub FilterAndCopy()

    Dim dataWs As Worksheet
    Dim copyWs As Worksheet
    Dim totRows As Long
    Dim lastRow As Long

    Set dataWs = Worksheets("Database")
    Set copyWs = Worksheets("Quote Sheet")

    With dataWs
        .AutoFilterMode = False
        With .Range("C:G")
             .AutoFilter Field:=3, Criteria1:="2500"
             .AutoFilter Field:=4, Criteria1:="Standard"
             .AutoFilter Field:=5, Criteria1:="FL"
        End With
    End With

    totRows = dataWs.Range("C:C").Rows.count
    lastRow = dataWs.Range("C" & totRows).End(xlUp).Row
    dataWs.Range("C2:C" & lastRow).Copy
    copyWs.Range("B26").PasteSpecial Paste:=xlPasteValues
    dataWs.AutoFilterMode = False

End Sub 
```

# ruby-on-rails - Bundler-Audit：如何实现 post-"bundle install" 钩子？

> ID：14899586
> 
> 赞同：2
> 
> 时间：2013-02-15T16:58:19.727
> 
> 标签：ruby-on-rails, bash, hook, bundler, gemfile

我最近发现了[bundler-audit](https://github.com/postmodern/bundler-audit) gem，我有兴趣创建一个在我所有正常的 bundler 命令（安装、更新等）之后运行 bundler-audit 的钩子。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:49:14.763

虽然可能有更好的方法，但我目前的解决方案是只使用 bash 函数/别名。

# c# - 不稳定的单元测试结果 - 模拟消息队列行为和并行循环

> ID：14899588
> 
> 赞同：0
> 
> 时间：2013-02-15T16:58:22.307
> 
> 标签：c#, unit-testing, task-parallel-library, moq

我正在构建一个类以使用并行循环来访问消息队列中的消息，为了解释我的问题，我创建了一个简化版本的代码：

```
public class Worker
{
    private IMessageQueue mq;
    public Worker(IMessageQueue mq)
    {
        this.mq = mq;
    }

    public int Concurrency
    {
        get
        {
            return 5;
        }
    }

    public void DoWork()
    {
        int totalFoundMessage = 0;

        do
        {
            // reset for every loop
            totalFoundMessage = 0;

            Parallel.For<int>(
                0,
                this.Concurrency,
                () => 0,
                (i, loopState, localState) =>
                {
                    Message data = this.mq.GetFromMessageQueue("MessageQueueName");

                    if (data != null)
                    {
                        return localState + 1;
                    }
                    else
                    {
                        return localState + 0;
                    }
                },
                localState =>
                {
                    Interlocked.Add(ref totalFoundMessage, localState);
                });
        }
        while (totalFoundMessage >= this.Concurrency);
    }
} 
```

这个想法是为工人类设置一个并发值来控制并行循环。如果在每个循环之后从消息队列中检索的消息数等于并发数，我假设队列中可能有更多消息并继续从队列中获取，直到消息数小于并发数。TPL 代码也受到[TPL 数据并行问题](https://stackoverflow.com/questions/14364374/tpl-data-parallelism-issue)帖子的启发。

我有消息队列和消息对象的接口。

```
public interface IMessageQueue
{
    Message GetFromMessageQueue(string queueName);
}

public class Message
{
} 
```

因此，我创建了单元测试代码并使用 Moq 来模拟`IMessageQueue`界面

```
 [TestMethod()]
    public void DoWorkTest()
    {
        Mock<IMessageQueue> mqMock = new Mock<IMessageQueue>();

        Message data = new Message();

        Worker w = new Worker(mqMock.Object);

        int callCounter = 0;
        int messageNumber = 11;
        mqMock.Setup(x => x.GetFromMessageQueue("MessageQueueName")).Returns(() =>
        {
            callCounter++;
            if (callCounter < messageNumber)
            {
                return data;
            }
            else
            {
                // simulate MSMQ's behavior last call to empty queue returns null
                return (Message)null;
            }
        }
        );

        w.DoWork();

        int expectedCallTimes = w.Concurrency * (messageNumber / w.Concurrency);
        if (messageNumber % w.Concurrency > 0)
        {
            expectedCallTimes += w.Concurrency;
        }

        mqMock.Verify(x => x.GetFromMessageQueue("MessageQueueName"), Times.Exactly(expectedCallTimes));
    } 
```

我使用[Moq 的想法来设置基于调用时间的函数返回](https://stackoverflow.com/questions/14368380/moq-to-set-up-a-function-return-based-on-called-times)来设置基于调用时间的响应。

在单元测试过程中，我注意到测试结果不稳定，如果你多次运行它，大多数情况下你会看到测试通过，但偶尔会因为各种原因测试失败。

我不知道是什么导致了这种情况，并寻求您的一些意见。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:30:24.253

问题是您的`GetFromMessageQueue()`模拟不是线程安全的，但是您同时从多个线程调用它。`++`本质上是线程不安全的操作。

相反，您应该使用锁定或[`Interlocked.Increment()`](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx).

此外，在您的代码中，您可能不会从并行性中受益，因为启动和停止`Parallel.ForEach()`会产生一些开销。更好的方法是在 内部有一个`while`（或`do`- `while`）`Parallel.ForEach()`，而不是相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:34:35.243

我的方法是重组。在测试诸如计时或并发之类的事情时，通常谨慎的做法是将您的调用（在本例中是使用 PLINQ）抽象为一个接受多个委托的单独类。然后，您可以测试对新类的正确调用。然后，因为新类要简单得多（只有一个 PLINQ 调用）并且不包含任何逻辑，所以您可以不对其进行测试。

我主张不要在这种情况下进行测试，因为除非你正在研究一些超级关键的东西（生命支持系统、飞机等），否则它会变得比值得测试的麻烦更多。相信框架会按预期执行 PLINQ 查询。您应该只测试那些对测试有意义并且为您的项目或客户提供价值的东西。

# java - 从数据库将图像写入jsp

> ID：14899591
> 
> 赞同：7
> 
> 时间：2013-02-15T16:58:31.860
> 
> 标签：java, jsp, spring-mvc

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T17:43:48.650

不幸的是，它不起作用。

您需要使用 Spring MVC 控制器方法，它将您的图像作为 byte[] 写入 HttpServletResponse 类。

例子：

```
@RequestMapping("/getImage/{id}")
public void getImage(HttpServletResponse response,@PathVariable("id") final String id) throws IOException {
    response.setContentType("image/jpeg");
    byte[] imageBytes = dao.getImage(id);
    response.getOutputStream().write(imageBytes);
    response.getOutputStream().flush();
} 
```

然后在客户端使用html代码：

```
<img src="getImage/222" ... /> 
```

**更新：**是的，您可以`@ResposneBody`从 Spring 3.1 开始使用注释

注册您的`ByteArrayHttpMessageConverter`

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter">
            <property name="supportedMediaTypes">
                <list>
                    <value>image/jpeg</value>
                    <value>image/png</value>
                </list>
            </property>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

然后使用你的控制器：

```
@RequestMapping("/getPhoto/{id}")
public @ResponseBody byte[] getPhoto(@PathVariable("id") final String id) throws IOException {
    byte[] imageBytes = dao.getImage(id);
    return imageBytes;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T17:26:32.783

诀窍是让另一个 servlet 直接将数据输出到`HttpServletResponse.getOutputStream()`，正如 SuKu 所说，使用适当的内容类型。`<img/>`然后在您的 JSP 中，您只需指向您的图像 servlet 在标记中映射到的 URL 。例如，如果图像 servlet 映射到`/imgServlet`，您将使用类似这样的东西

```
<img src="imgServlet?img=myimage" ... /> 
```

试试这样的[http://www.avajava.com/tutorials/lessons/how-do-i-return-an-image-from-a-servlet-using-imageio.html](http://www.avajava.com/tutorials/lessons/how-do-i-return-an-image-from-a-servlet-using-imageio.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T17:11:42.970

这是一个与我正在研究的问题类似的问题。但是，我使用的是长轮询而不是 servlet。这是链接[stackoverflow。](https://stackoverflow.com/questions/22946684/ng-src-remove-request-header-response-delimiter-from-image-application-jpg/22969256#22969256)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:10:38.000

如果您喜欢使用 ModelAndView，另一种选择是创建一个自定义 View 对象，该对象设置媒体类型并将图像的字节输出到输出流。这样，您可以使用 ModelAndView 轻松设置重定向或返回正常错误，甚至在出现错误时返回 JSP 错误页面，例如找不到图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-10T05:26:26.543

```
@RequestMapping(value="/imageDisplays/{imageId}")

public void getImage(@PathVariable int imageId,HttpSession session,HttpServletResponse response)  {
    OutputStream oImage;
    try{
            byte[] imageInByte = // get image in byte array
            response.setContentType("image/jpeg, image/jpg, image/png, image/gif");
            oImage=response.getOutputStream();
            oImage.write(imageInByte);
            oImage.flush();
            oImage.close(); 
    }catch(Exception e){
        LOGGER.debug("Request could not be completed at this moment. Please try again.");
        e.printStackTrace();
    }
    } 
```

# mysql - 在日期时间字段上按日期求和数量

> ID：14899593
> 
> 赞同：0
> 
> 时间：2013-02-15T16:58:34.413
> 
> 标签：mysql

我正在尝试对按日期、批次和 PartNum 分组的构建数量（PartNum）求和。

```
 Date      PartNum Lot  Qty
e.g. 2/15/13   1003    56   21  
     2/15/13   1007    23   12

SELECT
    `product_trans`.`PtID` AS `ID`,
    `product_trans`.`PtLot` AS `Lot`,
    `product_trans`.`PtRole` AS `Role`,
    `product_trans`.`PtPosted` AS `Posted`,
    `product_trans`.`PtStamp` AS `Stamped`,
    `product_trans`.`PtLine` AS `Line`,
    sum(`product_trans`.`PtQty`) AS `Qty`,
    `product_trans`.`PtPart` AS `Part`,
    `product_trans`.`PtPartNum` AS `PartNum`
FROM
    `product_trans`
GROUP BY
    `product_trans`.`PtStamp`,
    `product_trans`.`PtPartNum`,
    `product_trans`.`PtLot`
ORDER BY
    `product_trans`.`PtStamp`,
    `product_trans`.`PtPartNum` 
```

问题是 PtStamp 是一个日期时间字段。我需要它按日期分组，而不是日期时间。

我试过这个：

```
GROUP BY
    CURDATE(`product_trans`.`PtStamp`),
    `product_trans`.`PtPartNum`,
    `product_trans`.`PtLot` 
```

但没有快乐。

我知道这很简单，但我看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:00:13.440

尝试

```
DATE(`product_trans`.`PtStamp`) 
```

**[MYSQL 日期函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)**

# javascript - 为错误的答案创建一个带有拒绝状态的在线 JavaScript 调查

> ID：14899596
> 
> 赞同：0
> 
> 时间：2013-02-15T16:58:40.950
> 
> 标签：javascript, survey

我正在考虑为我的学生创建一个在线 JavaScript 调查作为测验。我希望这项调查与那些试图获得市场研究资格的人相似（即，如果他们得到一个不符合研究标准的答案，它会使用户失败，如果他们继续调查有资格达到这一点）。如果我实施此操作，是否有办法让我的学生确定要选择的适当答案，以确保他们获得所有正确答案并且永远不会点击拒绝页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:06:47.840

所有 JavaScript 都以纯文本形式提供给浏览器，用户（在这种情况下是您的学生）可以轻松查看。这意味着用户可以看到您对网页的任何指示；这实质上意味着您在代码中为他们提供正确的答案（如果他们足够聪明，可以找到它）。真正向他们隐藏答案的唯一方法是在浏览器之外处理他们的答案。

# git - Git：检索用于缓存破坏目的的短提交哈希

> ID：14899599
> 
> 赞同：1
> 
> 时间：2013-02-15T16:58:48.507
> 
> 标签：git, ubuntu-12.04, web-deployment

我想使用 git hash 来破坏缓存。

我的部署脚本将在 git 中查找特定文件，并使用上次更改文件的提交中的简短版本的哈希。这意味着每个文件的缓存清除字符串仅在必要时更改。

到目前为止，我有以下命令，它很接近但不太正确：

```
git log -n 1 --abbrev-commit --pretty=oneline htdocs/js/sample.js 
```

返回：

```
21b1991 Commit message here 
```

我可以为提交哈希解析该字符串，但如果可能的话，我宁愿不这样做。

我想让 git 返回：

```
21b1991 
```

如果 git 在发出命令时开始返回不同长度的哈希，我当然希望解决方案继续工作。我也不太反对使用完整的哈希，但我认为没有必要。

部署将基于 git，并在 Ubuntu 12.04 TLS 系统上进行。

建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T17:04:13.770

尝试`--pretty=format:%h`代替`--abbrev-commit --pretty=oneline`

例如

```
git log -n 1 --pretty=format:%h htdocs/js/sample.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:01:19.867

您可以为此使用 awk：

```
git log -n 1 --abbrev-commit --pretty=oneline htdocs/js/sample.js | awk '{print $1}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:47:05.287

您应该记住，短提交哈希的大小可能会有所不同，具体取决于您在历史记录中的提交次数——在代码中使用完整哈希所付出的代价很小，而使用完整哈希时，您始终可以放心参考正确的文件。

我认为短哈希是为我们可怜的小脑开发人员提供便利，而不是程序代码应该用来节省几个字节的东西。

# javascript - 如何在充满行的表格上使表格行淡出

> ID：14899604
> 
> 赞同：1
> 
> 时间：2013-02-15T16:59:05.960
> 
> 标签：javascript, jquery

嘿伙计们，我有一个由 php 填充的列表，这是布局：

```
<table>
     <tr>
        <td>
        ....
        <td>

    </tr>

    <tr class='firsttr' style='background:gray;'>
     <td>Remove selected</td>
     <td>First Name </td>
     <td>Last Name </td>
     <td>Email </td>
     <td>Phone </td>
     <td>Username </td>
     <td>Password </td>
     <td>Status </td>
     <td>Status Change Date</td>
     <td>#</td>
    </tr>

       <tr class='search-fade'> <!-- this is the part that I need to fade out based on which button was clicked for that user. -->
              <td>
        <input type='button' value='Remove employee'  name='cancelmember' class='cancelmember' />
      </td>
        //....table data    
               <td>
               $csvusername
    <input type='hidden' value='$csvusername'  name='username' class='removeemp-user'/>
    </td>                           
          </tr>                         
</table> 
```

这是我的jQuery：

```
$(".cancelmember").click(function () {
        remove_name = $(this).parent().parent().find(".removeemp-user");

        $.ajax({
        type: "POST",
        dataType: "json",
        url: '/pcg/removemem.php',
        data: {
            'username': remove_name.val()
        },
        success: function(){
            alert("Employee Removed"),
            $(this).find(".search-fade").fadeOut()
        }
      });
    }); 
```

上面的代码效果很好我只是不知道如何淡出`<tr class='search-fade'>` 如果你能帮我一把，我将不胜感激！

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:16:00.887

您需要缓存元素，以便可以在成功函数中使用它。您需要向上而不是向下遍历 dom 树才能找到表格行，因为按钮是 tr 的后代

```
$(".cancelmember").click(function () {
    remove_name = $(this).parent().parent().find(".removeemp-user");
    var $this = $(this); // <-- cache the current element

    $.ajax({
        type: "POST",
        dataType: "json",
        url: '/pcg/removemem.php',
        data: {
            'username': remove_name.val()
        },
        success: function () {
            alert("Employee Removed"),
            $this.closest(".search-fade").fadeOut(); // <-- use closest since button is descendant of table row
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:04:12.863

尝试这个，

```
$(".cancelmember").click(function () {
        remove_name = $(this).parent().parent().find(".removeemp-user");
        var $this = $(this); //Make sure this is parent element not button. You may have to adjust the element here

        $.ajax({
        type: "POST",
        dataType: "json",
        url: '/pcg/removemem.php',
        data: {
            'username': remove_name.val()
        },
        success: function(){
            alert("Employee Removed"),
            $this.find(".search-fade").fadeOut()
        }
      });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:04:43.887

`$(this)`指的是被点击的按钮，所以除非表格行是 DOM 中按钮的后代，`$(this).find(".search-fade")`否则不会找到它们。

您应该更改`$(this)`为表格行的父元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T17:15:09.580

```
$(".cancelmember").click(function () {
        remove_name = $(this).parent().parent().find(".removeemp-user");
        var thisEL = $(this).parent().parent();

        $.ajax({
        type: "POST",
        dataType: "json",
        url: '/pcg/removemem.php',
        data: {
            'username': remove_name.val()
        },
        success: function(){
            alert("Employee Removed"),
            thisEL.fadeOut();
        }
      });
    }); 
```

你需要升2级。
**tr.search-fade** *<- 这需要淡出*
---- **td**
--------- **input.cancelmember** *<-click 发生在这里*

# iphone - iOS 为所有方向启用旋转 iOS 5

> ID：14899607
> 
> 赞同：1
> 
> 时间：2013-02-15T16:59:15.760
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我编写了一个带有几个视图控制器的选项卡式应用程序，在 iOS 6 上，它可以在所有方向上愉快地旋转，因为我在应用程序摘要中都支持它们。

然而，我的部署目标是 iOS 5，我也希望能够在所有方向上旋转。我试过不同的组合：

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationPortrait | UIInterfaceOrientationLandscape;
} 
```

但是没有一个为 iOS 5 启用旋转。我需要将此方法放在应用程序委托中还是在所有视图控制器中？我做错了吗？？

干杯，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:04:47.070

您可以添加所有视图控制器

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationLandscape);
} 
```

或者你可以编辑你的 plist`Supported Interface orientations`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:12:04.480

使用：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return UIInterfaceOrientationPortrait | UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight | UIInterfaceOrientationPortraitUpsideDown;
} 
```

工作得很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:04:58.080

对于 iOS 5.0，还可以添加到您的视图控制器，您还可以在构建设置和信息 plist 文件中更改它，这是肯定的。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return YES;
} 
```

# jquery - jQuery slideUp 在 iOS 上闪烁

> ID：14899609
> 
> 赞同：3
> 
> 时间：2013-02-15T16:59:25.040
> 
> 标签：jquery, slideup

我有一个由无序列表组成的折叠导航菜单，它使用 .slideUp() 和 .slideDown() 隐藏和显示子菜单。这适用于所有桌面浏览器。我在 iOS（ipad 和 iphone）上遇到问题，其中子导航会向上滑动，然后在其他元素顶部闪烁子文本，然后它就会消失。您可以在 www.sweetrush.com 上看到一个示例。

关于可能导致此问题的原因或解决方法的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:06:39.717

你试过硬件加速吗？它通常可以解决我在 iOS 设备上的闪烁问题。

```
-webkit-transform: translate3d(0,0,0) 
```

对于 iOS 6，您可能必须添加：

```
-webkit-perspective: 1000;
-webkit-backface-visibility: hidden; 
```

# c# - WIF 提供哪些安全优势？

> ID：14899612
> 
> 赞同：1
> 
> 时间：2013-02-15T16:59:31.097
> 
> 标签：c#, security, wif

我们目前使用 WIF 来保护我们的应用程序和后端服务。我试图确定我们的解决方案中是否真的需要 WIF，或者它是否只是一个额外的层，它消耗资源而没有提供任何好处。

我们当前的应用程序分为 2 个独立的 Web 应用程序，一个客户端和管理员以及几个 WCF 服务。两个应用程序之间不共享身份（管理员和客户端的凭据不同）。身份只在客户端和 WCF 服务之间共享。这发生在机器之间，但从不跨越网络或企业边界。

我们使用第三方来执行身份验证，但是第三方不用作身份提供者。该功能在应用程序本身内部执行。

我们目前没有未来计划在其他应用程序或服务之间共享身份，或使用第 3 方身份提供者等。

鉴于我们的应用程序的设置方式，我们真的从使用 WIF 作为保护后端服务的额外手段中获得了很多好处吗？如果 WIF 被删除，我们会失去什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:28:55.577

*如果您*删除 WIF，则必须将其替换为. 除非您决定根本不需要用户身份验证和授权。请记住，除了身份验证之外，WIF 还为您提供了基于声明的授权模型。

WIF 的另一个好处是它正在成为一种众所周知的保护应用程序的标准方法，这意味着当您在未来引入新的开发人员时，他们可能会熟悉您的安全模型。这是一个很大的好处。将其与您必须培训新开发人员的自定义安全模型进行比较。

此外，WIF 是一项经过验证的技术，具有众所周知的安全优势。如果您按照建议实施 WIF，则您的应用程序是安全的。其他模型不一定如此，尤其是定制设计的安全模型。

另外，您说您*目前*没有使用 WIF 更高级功能的计划。目前没有计划和永远不会这样做之间有很大的区别。通过您当前的 WIF 实施，如果未来计划发生变化，您可以灵活地添加这些内容。如果你用其他东西替换 WIF，你就放弃了这种灵活性。或者至少让它变得更加困难。

如果是我的项目，我会问的第一个问题是：

1.  现有的 WIF 安全模型是否有效？如果不是，则修复或更换。如果是，那么...
2.  是否会引起任何问题（严重影响内存使用、应用程序响应或开发人员的工作效率）？如果没有，那就别管它了。如果是，那么...
3.  Are the benefits of replacing it worth the cost and the risk of breaking something or failing to implement some other feature?

If you have something that works and doesn't impede your ability to improve your application, then any time you spend working on that piece is at the cost of some other feature.

# c# - 编译器错误 CS0542 的解决方法：成员名称不能与其封闭类型相同

> ID：14899613
> 
> 赞同：1
> 
> 时间：2013-02-15T16:59:33.153
> 
> 标签：c#, visual-studio-2010, compiler-errors

我有一个相当大的 VB.NET 项目，它是由一位前雇员构建的。他得到了大部分工作，但不是全部。

我知道，它已经这样运行了 2 年。也许3。

现在，管理层正在推动恢复这个项目并完成从未完成的工作。

该项目已分配给我，我有一个月的时间来加快进度。

我正在用 C# 重新编写它，因为我的编码在该语言中更强大。

他使用的一个好主意是构造类，以便它们模仿数据库表：

*   **表名**变成**类名**
*   **列名**成为**属性名**
*   **列数据类型**成为**属性数据类型**

这是一个小例子：

```
Public Class Acct_Code
    Private _Acct_Code_ID As String = String.Empty
    Private _Acct_Code As String = String.Empty

    Public Property Acct_Code_ID() As String
        Get
            Return _Acct_Code_ID
        End Get
        Set(ByVal value As String)
            _Acct_Code_ID = value
        End Set
    End Property

    Public Property Acct_Code() As String
        Get
            Return _Acct_Code
        End Get
        Set(ByVal value As String)
            _Acct_Code = value
        End Set
    End Property

End Class 
```

[目前，由于错误 CS0542](http://msdn.microsoft.com/en-us/library/hdhfk2xk.aspx)显示，我无法将此 VB 代码放入 C# 中：

> **错误消息**
> “用户定义类型”：成员名称不能与其封闭类型
> 相同 在同一构造中多次使用名称。此错误可能是由于无意中将返回类型放在构造函数上造成的。

我知道应该重命名类或属性；但是，我想一次让这个项目工作，而不是在这里创建根本不起作用的代码。

## 有谁知道解决此编译器错误的方法 - 只是暂时的，直到我建立项目？

我知道有一些方法可以忽略警告和忽略异常，但我不知道忽略编译器错误的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-28T12:21:39.560

要解决编译器错误，只需将您的类拆分为基类和派生类，然后将有问题的成员移动到基类中。

```
class A
{
    public string B { get; set; } // <-- This compiles just right!
}

class B : A
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:03:26.513

你不能忽视违反语言规则的行为。您*必须*修改名称。

您可能很想在移植之前尝试*在 VB*中修复名称，因为这样您就可以随时拥有一个工作代码库......这将使您能够利用重构。然后，当您确定所有成员名称都与类型名称不同时，您可以移植到 C#。

顺便说一句，当您移植该代码时，您应该利用自动实现的属性，留下：

```
public class Account
{
    public string Id { get; set; }
    public string Code { get; set; }
} 
```

（然后尝试远离允许对象以所有可能的方式变异......这是另一回事:)

# windows - 如何在 Windows 7 中保护（或锁定）Apache Server 文件夹

> ID：14899615
> 
> 赞同：1
> 
> 时间：2013-02-15T16:59:41.460
> 
> 标签：windows, apache, windows-7

我在我的**Windows 7 PC上运行****PHP 5**和**MySQL**和**Apache 2****. 一切（在 localhost 中）工作正常，并且 localhost 在端口 80 中定义（它可以工作！）。但我想密码保护（或锁定）并隐藏服务器文件夹，包括 htdocs。我的意思是，我不希望其他用户访问服务器文件夹和文件。我知道我可以通过删除注册表项从添加/删除程序菜单中删除安装信息（希望它不会影响服务器框架）。但是如何防止用户访问服务器文件夹？服务器文件夹是一个主文件夹，我在其中安装了 Apache、PHP 和 MySQL。我在 C: 驱动器中制作了它（以确保安全）。我想锁定主文件夹（密码保护）。只有我可以访问它们（我的朋友使用我的电脑）。但是应该为每个人提供内容（本地主机）（我的意思是页面应该连同 PHP 和 MySQL 一起出现）。**

 **如何在运行服务器静默/隐藏时锁定和隐藏我的文件夹。这可能有或没有任何软件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:05:35.147

[http://www.devside.net/articles/windows/password](http://www.devside.net/articles/windows/password)

[http://www.brandx.net/support/buildingwebsites/passwords.shtml](http://www.brandx.net/support/buildingwebsites/passwords.shtml)

[http://www.thesitewizard.com/apache/password-protect-directory.shtml](http://www.thesitewizard.com/apache/password-protect-directory.shtml)

为 Apache 服务器实现用户/密码保护的目录**

# flash - 错误未知配置变量“高级遥测”

> ID：14899616
> 
> 赞同：3
> 
> 时间：2013-02-15T16:59:42.197
> 
> 标签：flash, apache-flex, flex4, flash-builder

我正在尝试将[Scout](http://gaming.adobe.com/technologies/scout/?promoid=KBQHD)与我的 Flex 项目一起使用，并且我听说您将 -advanced-telemetry 添加到编译器参数中。当我这样做时，会出现此错误：

错误未知配置变量“高级遥测”

我这样做是对的还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:01:49.653

引用[adobe docs](http://help.adobe.com/en_US/flashbuilder/using/WSe4e4b720da9dedb5-4798e7bb139e879b36f-8000.html#WSe4e4b720da9dedb5-4798e7bb139e879b36f-7ffe) ; “高级遥测选项仅适用于使用 ActionScript Compiler 2.0 (ASC 2.0) 的 ActionScript 项目和 ActionScript Mobile 项目”

ASC 2.0 编译器包含在最近的 AIR SDK 中（我认为是从 3.4 开始？） - 如果您将最新的 AIR SDK (3.6) 覆盖在 flex sdk 上，您应该能够在仅限 AS3 的项目中使用高级遥测。

不幸的是，ASC 2.0（还）不能与 MXML 一起工作，所以我们现在被卡住了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T16:43:19.000

我发现我可以在事后使用[Scout Enabler](http://renaun.com/blog/2012/12/enable-advanced-telemetry-on-flex-or-old-swfs-with-swf-scount-enabler/)工具添加高级遥测。

测试基于浏览器的应用程序：

1.  将 SWF 编译为发布版本后，我将其从项目发布文件夹中拖放到 Scout Enabler 上。Scout enabler 提供了一条消息，表明它已成功转换。注意：Scout Enabler 将添加前缀或后缀，如果您使用的 HTML 页面未引用该 project-suffix.swf 文件，则不会加载。我只是将后缀文本字段留空，因此我的项目 swf 始终是 myProject.swf（而不是 myProject-scout.swf）。
2.  如果 Scout 尚未打开，请打开它。
3.  在浏览器中加载 SWF（或者实际上是加载您的 swf 的 HTML 包装器页面）。
4.  返回 Scout，您会看到它已启用。

[更多信息](http://www.adobe.com/devnet/scout/articles/adobe-scout-getting-started.html)

注意：它似乎不适用于 iOS 模拟器，但适用于 AIR 模拟器。

**更新：**
正如其他人指出的那样，它现在可以与 Apache Flex 4.10 及更高版本一起使用，但存在[问题](https://stackoverflow.com/a/26918015/441016)。其他答案中的解决方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T01:02:07.750

如果您尝试将 FlashBuilder 与 Flex 一起使用来构建桌面 AIR 包，则会收到此错误，因为 Flex 编译器较旧并且不知道 -advanced-telemetry。问题是，您需要将 SWF 打包到 AIR 文件中，因此您需要在构建 SWF 之后但在打包之前获取该 SWF。这是一个技巧。

当您导出发布版本时，通过对话框继续操作，但在最后一个对话框中点击“完成”之前，请在项目中找到 bin-release-temp 文件夹并使用 SWFScoutEnabler 将高级遥测添加到该文件夹​​中的 swf。然后点击完成，您将获得一个带有启用 Scout 的 SWF 的 AIR 包。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-09T06:19:30.233

Apache Flex 4.10 添加了对高级遥测的支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-13T20:42:00.463

将`-advanced-telemetry`编译器选项添加到 Flash Builder（Bungler？）给我带来了两个奇怪的问题。

1.  导出发布版本时出现此错误“Flash Builder 无法发布项目源：null”
2.  代码提示，大纲视图，立即停止工作。

我能找到的唯一解决方案是 Grants 通过在 bin-debug 和 bin-release-temp 中的 swfs 上启用高级遥测，然后将其打包到 ipa 文件中来解决问题。

# openfire - Strophe 获得无效的 SID

> ID：14899619
> 
> 赞同：6
> 
> 时间：2013-02-15T16:59:50.520
> 
> 标签：openfire, strophe, sid

我正在使用 strophe 和 jquery 构建一个基于 Web 的客户端，并且我使用 openfire 作为服务器。几乎一切正常，我可以获取花名册列表，发送和接收消息，但是当我尝试将我的状态从可用更改为 xa 或 dnd 或其他任何其他服务器时，服务器停止响应并且我开始在我的服务器上收到 404 错误像这样的 POST 和无效 SID 消息：“NetworkError: 404 Invalid SID. - [http://myurl.com/](http://myurl.com/) ”。

我已经浏览过其他主题，这似乎是我可用凭据的问题，但我没有任何明确的证据证明出了什么问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-14T07:36:24.757

我也在使用 Strophe，对我来说一切都很好！我不知道你有什么问题，因为你没有与我们分享你的代码，所以我的回答可能对你没有帮助，但这是我更新我的存在的方法：

```
connection.send($pres().c('status').t('dnd or any status you want')); 
```

# mysql - 在具有不同列的同一个表上进行多个联接

> ID：14899620
> 
> 赞同：0
> 
> 时间：2013-02-15T16:59:53.003
> 
> 标签：mysql, sql, join

我在发出 SQL 请求时遇到问题。

这是我的桌子：

```
CREATE TABLE dates(  
  id INT PRIMARY KEY, 
  obj_id INT,
  dispo_date  text 
);  

CREATE TABLE option(
  id INT PRIMARY KEY, 
  obj_id INT,
  random_option INT
);

CREATE TABLE obj(  
  id INT PRIMARY KEY, 
); 
```

以及用户给我的随机日期和一些选项。

我想选择两个表上对应于其日期等于用户日期的 obj 的所有内容。

假设 DATE = "22/01/2013" 和 OPTIONS = 3。

```
SELECT * FROM obj 
INNER JOIN dates
ON dates.obj_id=obj.id
INNER JOIN option
ON option.obj_id=obj.id
WHERE dates.dispo_date="22/01/2013"
AND option.random_option=3; 
```

这只是为我提供了我的 obj 表中的所有内容，对于每个表格，都具有相同的日期和选项，而无需过滤任何内容。

有人可以给我一些关于我做错了什么的指示吗？

解决方案：

由于每个人似乎都得到了我想要的东西，我重新启动了我的 SQL 服务器，因为一切正常......

感谢您的帮助，很抱歉耽误您的时间:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:17:14.897

据我所知，查询没有任何问题。

当我尝试它时，它只返回有相应日期和相应选项的 obj 行。

```
insert into dates values
(1, 1, '22/01/2013'),
(2, 1, '23/01/2013'),
(3, 2, '22/01/2013'),
(4, 2, '23/01/2013'),
(5, 3, '23/01/2013'),
(6, 3, '24/01/2013');

insert into `option` values
(1, 1, 4),
(2, 1, 5),
(3, 2, 3),
(4, 2, 4),
(5, 3, 3),
(6, 3, 4);

insert into obj values
(1),
(2),
(3) 
```

有了这些数据，它应该过滤掉 obj 1，因为它没有选项 3，并且过滤掉 obj 3，因为它没有日期 22。

结果：

```
ID  OBJ_ID  DISPO_DATE  RANDOM_OPTION
-------------------------------------
2   2       22/01/2013  3 
```

演示：[http ://sqlfiddle.com/#!2/a398f/1](http://sqlfiddle.com/#!2/a398f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:08:22.793

改变你的线路

```
WHERE dates.dispo_date="22/01/2013" 
```

为了

```
WHERE DATE(dates.dispo_date)="22/01/2013" 
```

在文本字段中处理日期有点棘手（也是不好的做法）。确保两个日期的格式相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:09:17.823

首先，我对哪个 ID 映射到哪个表有点困惑。我可能会恭敬地建议将 DATES 中的 id 字段重命名为 date_id，将 OPTION 中的 id 重命名为 option_id，并将 obj 中的 id 重命名为 obj_id。对于通过钥匙孔看的人来说，使这些关系更加清晰。我要绕个圈子，确保我正确理解你们的关系。在此基础上，我可能错误地理解了您的问题。

我*认为*您有 obj.id->dates.obj_id 和 option.obj_id->dates.obj_id，所以在此基础上，我认为您的查询必须更复杂一些：

这为您提供了对象日期：

```
Select *
  from obj obj
  join dates d
    on obj.id=d.obj_id 
```

这为您提供了用户日期：

```
select *
  from option o
  join dates d
    on o.obj_id=d.obj_id 
```

要获得具有相同日期的对象和用户的结果，您需要将这两者挂钩：

```
select * 
  from (Select *
          from obj obj
          join dates d
            on obj.id=d.obj_id) a
  join (select *
          from option o
          join dates d
            on o.obj_id=d.obj_id) b
    on a.dispo_date=b.dispo_date
 where b.random=3 
```

我希望这很有用。祝你好运。

# windows-phone-7 - 部署时 Silverlight Windows Phone 7 应用程序中未使用 Opentype 字体

> ID：14899626
> 
> 赞同：0
> 
> 时间：2013-02-15T17:00:19.853
> 
> 标签：windows-phone-7, fonts, opentype

有没有办法在 Windows Phone 7 Silverlight 应用程序上使用 OpenType 字体？我想使用仅在 OpenType 格式的 AFAIK 中可用的 Lobster。它在 Blend 中呈现，但在我部署到模拟器时不呈现。

我已将 .otf 文件包含在我的项目中，并将属性设置为“内容”和“如果较新则复制”。

[该网站](http://www.markermetro.com/2011/06/technical/windows-phone-7-custom-fonts/)找到了 .ttf 字体的解决方案，但指定的技术不适用于 OpenType。Windows Phone 不支持 OpenType 吗？鉴于 MS 部分发明了这种格式，我觉得这很难相信！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:32:41.597

Windows Phone 要求您的字体为 TrueType (.ttf)。不支持 OpenType (.otf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T16:46:30.457

您需要将其添加到项目中，将构建操作设置为内容，并在 FontFamily 属性中输入一个链接到它的 uri，并带有哈希标记：

![将其添加到项目中](../Images/35941f9808d854723b138806929b347e.png)

![设置为构建操作“内容”](../Images/8cec0458049a7b27dea0c73593a57ece.png)

![将 Uri 添加到属性](../Images/9038f7c495000d63614158368ef5b71b.png)

字体家族的例子：

FontFamily="**字体/Lobster.ttf#Lobster** "

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:14:29.533

术语“OpenType”可能有些混淆。OpenType 是对格式的广泛描述，实际上包括用于描述字体轮廓的 2 个“风格”：TrueType 和 CFF（Adobe PostScript 的一种形式）。

带有 .otf 扩展名的字体绝对是 OpenType 字体，通常意味着它包含 CFF 轮廓。

但在大多数情况下，TrueType 字体通常也被认为是 OpenType 字体，因为 OpenType 格式实际上是 TrueType 和 CFF 风格的超集。

特别是关于龙虾：作为测试，我将该字体添加到我的 Google Webfonts 集合中，然后单击“下载集合”。生成的文件是一个 .ttf，因此，正如[Den Delimarsky](https://stackoverflow.com/a/14901138/1042788)的回答指出的那样，*应该*可以在 Windows Phone 中使用。您如何获得此文件的 .otf 版本？它是真正的 CFF 文件，还是只是带有 .otf 扩展名的 TrueType 文件？

另请注意，您可以直接从[Google 字体目录](http://code.google.com/p/googlefontdirectory/)获取 TrueType/.TTF，尽管目前通过浏览器这样做似乎有点不靠谱。

# objective-c - 常量的条件编译警告

> ID：14899628
> 
> 赞同：2
> 
> 时间：2013-02-15T17:00:23.020
> 
> 标签：objective-c, xcode, cocoa, constants, definition

# 问题

只有当我的 TESTING 为 YES 时，我才想触发警告。这可能吗？我现在所拥有的不起作用。我该怎么办？

```
BOOL const TESTING = NO;
#if TESTING == YES
    #warning don't forget to turn testing to NO before upload
#endif 
```

# 回答

根据下面的答案，这对我有用：

```
#define _TESTING // COMMENT THIS OUT TO DISABLE TESTING MODE
#ifdef _TESTING
    BOOL const TESTING = YES;
    #warning don't forget to turn testing to NO for production
#else
    BOOL const TESTING = NO;
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:05:57.503

尝试替换你所拥有的

```
#ifdef TESTING
  #warning //... warning here
  BOOL const testingBool = YES;
#else
  BOOL const testingBool = NO;
#endif 
```

然后，您需要在目标的构建设置中将 TESTING 添加为“预处理器宏”（有关如何执行此操作的更多详细信息，请参阅[此问题）。](https://stackoverflow.com/questions/7851152/how-do-i-define-preprocessor-macros-in-xcode-4)

# android - 如何以编程方式识别 Android 设备？

> ID：14899629
> 
> 赞同：19
> 
> 时间：2013-02-15T17:00:24.320
> 
> 标签：android, android-wifi

目前，我使用 MAC 地址作为 Android 设备的标识符。

```
WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
WifiInfo wInfo = wifiManager.getConnectionInfo();
String mac = wInfo.getMacAddress(); 
```

但是，我发现`mac`某些用户的设备是空的。我有点困惑为什么它可能是空的。

如果你能弄清楚原因，那就最好了！

否则，您能否提供一种替代方法来识别 Android 设备？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T17:21:35.547

您可以根据**`imei`**.

```
TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.getDeviceId(); 
```

将权限添加到您的 AndroidManifest.xml 中：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

在模拟器中，您可能会得到一个类似 0000... 的值。在设备上检查它以获取设备 ID。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T17:07:05.383

找到有关 Android 设备的独特之处的最佳选择是访问其序列号。还有其他几篇关于如何做到这一点的帖子，但观看次数最多的一篇在这里：

[如何找到Android设备的序列号？](https://stackoverflow.com/questions/2322234/how-to-find-serial-number-of-android-device)

# ibm-midrange - AS400.validateSignon() 不会将失败的登录尝试重置为 0。需要知道 PTF

> ID：14899630
> 
> 赞同：-1
> 
> 时间：2013-02-15T17:00:40.703
> 
> 标签：ibm-midrange

AS400.validateSignon() 不会将失败的登录尝试重置为 0。当用户使用不正确的密码登录时，我遇到问题，使用正确的密码登录后，无效密码输入的数量不会恢复为零。2012 年 12 月在网站上发布了一个答案，但没有提及为解决此问题而删除的 PTF 是什么。PTF 删除了什么？这是V6r1版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:02:36.087

失败的尝试是什么？如果用户正在连接 IFS，则在您执行 CHGUSRPRF 或重新启动 NETSERVER 之前，不会重置无效密码计数。您正在运行哪个版本的 iSeries？

# c - 您如何读取 CTRL-D 序列之前的所有输入？

> ID：14899631
> 
> 赞同：-2
> 
> 时间：2013-02-15T17:00:42.413
> 
> 标签：c

使用 C 中读取的系统调用，

```
#include <unistd.h>

int main()
{
    char data[128];
    while(read(0, data, 128) == 0){
    read = read(0, data, 128)+ read //counting the amount of chars read in 
 }

    exit(0);
} 
```

我希望输入在 ctrl+d 时终止，这样用户可以按 Enter 键，它只会转到新行。现在它不是那样运作的。

Read 返回一个整数，表示它读取的字节数。一旦用户按下 ctrl + d，我将如何停止阅读，换句话说，您可以在按下 enter 的同时继续阅读，但只有在按下 ctrl+d 时才会停止，然后返回我阅读了多少个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:08:17.847

听起来您需要研究非缓冲输入。[该站点](http://shtrom.ssji.net/skb/getc.html)建议使用 termios 函数禁用规范（缓冲）输入。这是我使用他们提供的示例代码编写的内容。这将允许用户输入文本，直到读取 Ctrl-D 信号 (0x40)，此时它将输出读取的字节数。

```
#include <unistd.h>
#include <termios.h>

void print_int(int num);

int main()
{
  struct termios old_tio, new_tio;
  unsigned char c;

  /* get the terminal settings for stdin */
  tcgetattr(STDIN_FILENO, &old_tio);

  /* we want to keep the old setting to restore them a the end */
  new_tio = old_tio;

  /* disable canonical mode (buffered i/o) and local echo */
  new_tio.c_lflag &=(~ICANON & ~ECHOCTL);

  /* set the new settings immediately */
  tcsetattr(STDIN_FILENO, TCSANOW, &new_tio);

  char buf[128] = {0};
  int curr = read(STDIN_FILENO, buf, 128);
  int nbyte = curr;
  while (curr && buf[0] != 0x04) {
    curr = read(STDIN_FILENO, buf, 128);
    nbyte += curr;
  }

  /* restore the former settings */
  tcsetattr(STDIN_FILENO, TCSANOW, &old_tio);

  write(STDOUT_FILENO, "Total bytes: ", 13);
  print_int(nbyte);
  write(STDOUT_FILENO, "\n", 1);

  return 0;
}

void print_int(int num) {
  char temp[16];
  int i = 0, max;
  while (num > 0) {
    temp[i++] = '0'+(num % 10);
    num /= 10;
  }
  max = i;
  for (i=(max-1); i>=0; i--) {
    write(STDOUT_FILENO, &temp[i], 1);
  }
} 
```

请注意，在他们的示例代码中，他们使用`~ECHO`，但我假设您希望在键入时看到输入，因此`~ECHOCTL`只会禁用回显控制字符（例如，输入末尾的 ^D）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:14:31.350

当与终端、套接字或管道等数据源一起使用时，`read`一旦有*一些*数据准备好就返回。终端驱动程序通常会逐行提供数据，这就是您的程序得到的。

如果要读取特定数量的数据，或者读取所有数据直到满足特定条件，则必须循环执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:07:13.233

```
int c;
while((c = getchar()) != EOF) {
   /*do something*/
} 
```

# notepad++ - 使用 VB.net 在 Notepad++ 中打开多个 TXT 文件

> ID：14899633
> 
> 赞同：0
> 
> 时间：2013-02-15T17:00:48.193
> 
> 标签：notepad++, vb.net-2010

我编写了一个 VB.net 程序，可以在 Notepad++ 中打开许多不同的 .txt 文件，但是，刚刚运行它，它会为每个 .txt 文件打开一个程序的新实例。

这是我使用的线...

`Dim p = Process.Start("Notepad++.exe", myFile1)`

...我如何告诉我的下一个文件在新选项卡中打开，而不是在新实例中打开...

`Dim p = Process.Start("Notepad++.exe", NewTab, myFile2)`?

另外，当我完成处理时，是否可以在 VB.net 中使用命令来关闭每个选项卡，然后最后关闭我启动的实例（因为可能已经有另一个 NotePad++ 正在运行）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:00:41.560

这似乎纯粹是一个时间问题，通过将每次对 NotePad++ 的调用延迟 1/2 秒，它现在可以正常工作了......比我的更快的 PC 可能没有这个问题！

# knockout.js - Knockout.js 模板和 jQuery-File-Upload

> ID：14899637
> 
> 赞同：4
> 
> 时间：2013-02-15T17:01:04.400
> 
> 标签：knockout.js, jquery-file-upload

我已将[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload "jQuery-文件-上传")代码添加到我使用 Knockout.js 的页面中。该代码使用 JavaScript 模板引擎，工作正常，但有人知道是否有使用 Knockout 模板的方法吗？

uploadTemplate 和 downloadTemplate 看起来像函数指针。

根据文档... uploadTemplate 和 downloadTemplate 方法应该返回 jQuery 集合对象或呈现的上传/下载模板的字符串表示。

我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T13:08:48.550

我们有同样的问题。我们将敲除与 jQuery 模板（我们很快将用 jsRender 替换）结合使用。JQuery-File-Upload (blueImp) 的下载/上传模板是[Django 模板](http://www.djangoproject.com/)。我将这些模板视为应用程序中的剔除模板。我们将 jQuery 文件上传功能封装在一个淘汰赛的自定义活页夹中：

```
ko.bindingHandlers.fileupload = {
    update: function (element, valueAccessor) {
        var options = valueAccessor() || {};

        //initialize
        $(element).fileupload(options);
    }
}; 
```

我们这样使用：

```
<div id="fileuploadcontrol" 
     data-bind="fileupload: { 
                    url: [UPLOAD URL],
        maxFileSize: [MAX FILE SIZE],
        acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
        completed: function (e, data) {
            $.each(data.files, function (index, file) {
                 //Stuff to do with uploaded files
            }
        }
                 }">

      <div class="fileupload-buttonbar">
    <!-- buttons -->
            //STUFF

            <!-- The global progress bar -->
            //STUFF
  </div>
</div> 
```

# php - 如何生成 SOAP 请求 XML？

> ID：14899639
> 
> 赞同：0
> 
> 时间：2013-02-15T17:01:15.997
> 
> 标签：php, soap, domdocument, soapui, soap-client

作为一个 SOAP 新手，我正在尝试用 PHP 构建一个 SOAP 服务的客户端。问题：[PHP SOAP 扩展](http://php.net/manual/en/book.soap.php)不能用于直接与服务交互，因为 HTTP 下载发生在应用程序之外 - 见下文*。*

现在，有*两个请求*需要按顺序执行：

1.  **登录：我使用**[PHP DOM 扩展](http://php.net/manual/en/book.dom.php)手动创建了**登录**请求的 XML 。我还发现了一种将响应反序列化为 XML 对象层次结构的[技巧，与 PHP SOAP 扩展返回的](https://stackoverflow.com/questions/9502098/parse-soap-response-using-simple-xml-php/14789752#14789752)*完全*一样。到目前为止，一切都很好。

**   **搜索**：根据我可以在 [soapUI](http://www.soapui.org/)中解析的定义，这个请求大得吓人：

    *   由于不清楚的原因，某些搜索参数必须指定两次。

    *   必须传递来自**SignIn**响应的大型 XML 块。一个这样的块是*SecurityToken*，它不是字符串，而是 XML 元素的复杂层次结构。* 

 *如何最好地构建**搜索**请求？我应该只使用 PHP DOM 扩展作为**SignIn**，还是有更聪明的方法？

*PS：*说明HTTP下载是如何实现的：PHP应用程序将HTTP请求写入数据库。*下载守护程序*然后获取请求，执行它，并将响应写入数据库。最后，PHP 应用程序的另一个实例从那里获取它。这是异步请求的一种实现。*

# objective-c - 视图控制器在点击时被关闭

> ID：14899641
> 
> 赞同：1
> 
> 时间：2013-02-15T17:01:16.440
> 
> 标签：objective-c, uiviewcontroller

我有一个登录视图控制器，其中包含用户名和密码文本字段、登录按钮、注册按钮和 UIImageView 来显示图像。在纵向模式下，当我点击用户名和密码字段时，它会显示键盘，我可以输入文本。但是当我的应用程序处于横向模式时，我遇到了这个问题。当我点击用户名字段输入文本时，视图控制器被关闭。我的编码方式是，当我点击背景时，视图控制器会被关闭，但现在，即使我点击视图控制器，它也会被关闭。但这在纵向模式下效果很好。这是我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:04:37.347

不要将手势直接添加到您的视图中。视图中的所有其他内容（您的按钮、文本字段等）也是您视图的一部分。您需要将手势添加到这些子视图的同级。

不是 ：

```
-- View                <--- gesture added to this view
---- Textfield
---- Button 
```

但：

```
-- View
---- BackgroundView   <--- gesture added to this view
---- Textfield
---- Button 
```

或者：

```
-- View
---- BackgroundView   <--- gesture added to this view
---- Containerview
------ Textfield
------ Button 
```

1.  创建一个子视图并将其添加为控制器中的背景视图
2.  将手势添加到此背景视图

# methods - java - 当一个方法在java中有不同的类型时，如何将一个方法用作另一个方法的参数？

> ID：14899643
> 
> 赞同：0
> 
> 时间：2013-02-15T17:01:18.773
> 
> 标签：methods, types, arguments

我需要在这个 add(null) 方法中添加一个方法，但是该方法有一个字符串参数，如下所示

```
private double mymethod(String writing) // This is the method which must replace  
                                  // the null value inside the add(null) method 
```

但由于它有一个 String 参数，这会产生错误！我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:16:04.850

从你所拥有的情况来看，我认为这些**特征**是双打的集合——对吗？

你想要做的是以下几点：

```
features.add(mymethod("some string")); 
```

如果是这样的话，我担心我看不到问题 - 错误在哪里被抛出？

如果您的**mymethod**返回一个有效的**双**精度，我看不出还有什么会导致您出现问题。

# javascript - Tablesorter 未对动态添加的内容进行排序

> ID：14899646
> 
> 赞同：2
> 
> 时间：2013-02-15T17:01:22.280
> 
> 标签：javascript, jquery, tablesorter

我在使用 Jquery Tablesorter 时遇到问题，我在其中将数据动态添加到预先存在的表中。

根据文档，在添加内容后，需要做的就是`$("table").trigger("update")`运行以告诉 tablesorter 是否添加了新内容，但实际上这似乎不起作用。

有关示例，请参见[http://jsfiddle.net/7Wurn/9/ 。](http://jsfiddle.net/7Wurn/9/)单击 HTML 表格标题将对列进行排序，但在添加新行后，新行不会被排序。

似乎有些小问题是错误的，因为 Tablesorter 网站上使用的示例使用的代码与我在 JSFiddle 上添加的代码几乎相同。唯一的区别是`$("table").trigger("update");`在 Ajax 调用之后作为回调的一部分运行。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:46:42.487

`datatables`我在使用in时也遇到了同样的问题`jQuery`。当您将其附加到 时，`table`您不会将数据附加到`same tbody element`. 相反，您的数据被添加到`new tbody`元素中。表格格式应该是`<thead></thead>`then `<tbody></tbody>`。

做这样的事情：

```
$("#tableId tbody").append(someContent); 
```

我已经更新了你的小提琴[http://jsfiddle.net/7Wurn/68/](http://jsfiddle.net/7Wurn/68/)。也请使用 jquery 1.9.1。它在 2.0b1 中不起作用。不知道为什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:21:18.163

我一直在玩这个，发现它与在 DOM 中如何呈现 tbody 标记有关。

我通过执行以下操作使其适用于第一个条目：

```
$("table tbody:first").before('<tr><td>Aaphod</td><td>Beeblebrox</td> <td>28</td> <td>$9.99</td> <td>20%</td><td>jul 6, 2006 8:14 am</td></tr>'); 
```

那是因为它将它粘贴到第一个 tbody 中，并且 tablesorter 可以识别它。但是，后续添加会导致它作为新的 tbody 标记插入。

我会继续玩它，如果我有什么东西会更新！

# api - 如何以编程方式打开 Pending Changes - Conflict 窗口？

> ID：14899647
> 
> 赞同：0
> 
> 时间：2013-02-15T17:01:24.807
> 
> 标签：api, sdk, tfs

我需要在 Pending Changes 窗口中打开冲突选项卡：

我已经有了：

```
 Object customIn = null;
  Object customOut = null;
  //Show TfsPendingChanges
  m_applicationObject.ExecuteCommand("View.TfsPendingChanges", "");
  //Refresh
  m_applicationObject.Commands.Raise("{FFE1131C-8EA1-4D05-9728-34AD4611BDA9}", 4808, ref customIn, ref customOut);
  customOut = null;

  //Get Conflicts
  m_applicationObject.Commands.Raise("{FFE1131C-8EA1-4D05-9728-34AD4611BDA9}", 4832, ref customIn, ref customOut); 
```

但是我没有找到打开 Conflict TAB 的方法！即使是获取冲突按钮 (4832) 也不会触发该 TAB ！

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:07:57.140

```
public void refreshPendingChanges()
{
  Object customIn = null;
  Object customOut = null;

  //Show TfsPendingChanges
  m_applicationObject.ExecuteCommand("View.TfsPendingChanges", "");

  //Refresh
  m_applicationObject.Commands.Raise("{FFE1131C-8EA1-4D05-9728-34AD4611BDA9}", 4808, ref customIn, ref customOut);

  //Activate Source Explorer
  m_applicationObject.DTE.Windows.Item("{99B8FA2F-AB90-4F57-9C32-949F146F1914}").Activate(); //I get this GUID recording a Macro.
  //Show Conflicts
  m_applicationObject.DTE.ExecuteCommand("File.TfsResumeConflictResolution"); 
} 
```

感谢乍得博尔斯！说我关于 TfsResumeConflictResolution DTE 命令。

# javascript - 单击 ajax 加载的按钮时调用 JavaScript 函数

> ID：14899648
> 
> 赞同：2
> 
> 时间：2013-02-15T17:01:45.753
> 
> 标签：javascript, ajax, dom

我有一个 html 表单，它通过 ajax 加载其内容并包含按钮，当单击这些按钮时，应该执行在 html 页面的脚本标记中定义的 JavaScript 函数。SO：按钮是通过 ajax 加载的（有效），但是当单击按钮时，它不会触发所需的操作，也不会触发 Firebug 中的 JavaScript 错误。如何获得通过 ajax 加载的一堆按钮的 onclick 信号以绑定到已经存在的 JavaScript 函数？

编辑：我也应该注意到我没有使用 JQuery。如果这是唯一的方法，我愿意这样做，但除此之外，我宁愿只使用本机 JavaScript。

EDIT2：我的问题涉及更多，但正如所选答案中所述，您应该能够在通过 ajax 发送数据之前在 php 脚本中设置 onclick 事件处理程序。如果您有大量数据响应并希望减少带宽，您可能会考虑在客户端执行所有操作，但我发现在大多数情况下，只需在 php 脚本中设置 onclick 属性会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:44:34.290

您的动态生成的按钮可能绑定了一个内联事件。生成按钮时，只需确保它有一个`onclick="alreadyExistingFunc();"`并且页面会愉快地执行它。

或者，当您的 AJAX 数据完成将自身写入文档时，找到新按钮并将事件绑定到它们：

```
function ajaxSuccess()
{
    document.getElementById('newButtonIdHere').onClick = function() {
        alreadyExistingFunc();
    }
} 
```

这应该够了吧。另请注意，如果您曾经“需要”一小部分 jQuery 来做某事（例如选择器或事件处理），您几乎总是[可以在不加载整个库的情况下完成它。](http://cubiq.org/do-you-really-need-jquery-for-mobile-dev)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:09:10.340

将 HTML（检索到的 AJAX 响应）附加/插入到 DOM 并将`click`事件绑定到它：

```
function alreadyExistingFunc() { 
    alert('button is clicked!'); 
}

var ajax_data ="<button id='my-button'>My Button</button>";

$('body').append(ajax_data).find('#my-button').on('click', function(e){
    alreadyExistingFunc();
    // some more code...
}); 
```

或者：

```
$('body').append(ajax_data).find('#my-button').on('click', alreadyExistingFunc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:23:42.853

您还可以使用回调：

```
function getAjaxContent(callback) {
    $.ajax({url: "url"}).done(function() {
      callback(data);
    });
}

getAjaxContent(function (data) {
    //ajax content has been loaded, add the click event here
} 
```

# c# - 包含在 {} 中的正则表达式

> ID：14899649
> 
> 赞同：0
> 
> 时间：2013-02-15T17:01:49.380
> 
> 标签：c#, regex

我有点卡住了，想知道是否有人可以提供帮助，我正在尝试使用正则表达式来查找值并检查 Funtion2 是否在以下字符串中的 {} 之间，请参见下文：

```
AA \\*Funtion1 {5 + \\*Funtion2 {3} {4} + 6 } BB 

CC \\*Funtion2 {3} {\\*Funtion2 {3} {4} + 4} DD \\*Funtion2 {3} {4} EE

AA \\*Funtion1 { \\*Funtion2 {3} {4} + \\*Funtion2 {3} {4} + 6 } BB 
```

应该返回 2 场比赛，但继续获得 3 场比赛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:45:13.787

大括号内是否会有大括号，例如`{3 + { whatever } }`？是否会有不属于函数名的反斜杠（例如`\\*Funtion2`）？如果这两个问题的答案都是否定的，那么您应该能够在不求助于平衡组的情况下解决这个问题。例如：

```
Regex r = new Regex(@"\{[^{}\\]*\\\\\*Funtion2(?:[^{}\\]+\{[^{}\\]+\})*[^{}\\]*\}");
foreach (Match m in r.Matches(source)
{
  Console.WriteLine(m.Value);
} 
```

结果：

```
{5 + \\*Funtion2 {3} {4} + 6 }
{\\*Funtion2 {3} {4} + 4} 
```

分解正则表达式，我们有：

```
\{              # the opening brace
[^{}\\]*        # optional stuff preceding the function name
\\\\            # the two backslashes
\*              # the asterisk
Funtion2        # and the name
(?:             # in a loop...
  [^{}\\]+        # stuff preceding the next opening brace
  \{[^{}\\]+\}    # a balanced pair of braces with non-braces in between
)*              # loop zero or more times
[^{}\\]*        # optional stuff preceding the closing brace
\}              # the closing brace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:43:15.597

尝试使用后视。

```
(?<=\{[^}]*)Funtion2 
```

这将找到前面有“{”但在左大括号和文本之间没有“}”的“Funtion2”。

但是请注意，这并不能平衡左大括号和右大括号。从您的示例文本中，我认为这不是问题。

如果发生以下情况，这将无法找到所有匹配项：

```
AA \\*Funtion1 { \\*Funtion2 {3} {4} + \\*Funtion2 {3} {4} + 6 } BB 
```

第二个“Funtion2”将被跳过，因为它和开头的“{”之间有一个“}”。

您可以使用平衡的正则表达式，但老实说，这对我来说看起来像是在解析。也许您应该考虑编写一个解析器，而不是过于依赖正则表达式。

# java - 使用 NGINX 进行开发

> ID：14899651
> 
> 赞同：0
> 
> 时间：2013-02-15T17:01:58.973
> 
> 标签：java, scala, nginx

我正在使用 scala 开发 Web 应用程序。现在它变得相当大，我将把它分成几个独立的服务，并将它与 nginx 粘合作为反向代理。

虽然它只是一个 scala 应用程序，但它能够以 jar 的形式分发和运行它，只需要很少的配置文件。但是现在有通常安装为系统应用程序的 nginx。以可移植方式使用 nginx 将所有应用程序集中在一个文件夹中的最佳方法是什么？我应该在主机上有 *.conf 文件并在启动脚本中包含重新加载 nginx 吗？或者也许拥有可移植的 nginx 二进制文件会很有用？

这仅用于测试和实验需要。使用预配置的 nginx 部署到服务器中的生产应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:34:30.207

因此，您在生产中使用 nginx 作为反向代理来分离服务。并且需要为测试环境适配 nginx ？
如果这是一两台机器设置，尽量不要过度设计设置，而只是根据需要（主机名、端口、路径等）手动调整 nginx 配置（和 scala 服务器文件）。
只是我的2c。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:44:26.457

在 Ubuntu 上使用过很多 Nginx，我发现将 .conf 文件保存在项目工作中是非常有效的，同时使用一两个 shell 脚本来安装和配置它们。

你没有提到你的操作系统，但如果有帮助，我可以分享我在 Ubuntu 上的经验。这更像是一个操作系统管理主题，而不是 Scala 本身。

例如，脚本可能会符号链接您的 scripts/myapp.conf 文件，如下所示：

```
#!/bin/bash -e
cd $(dirname $0)
TGT=$PWD
cd /etc/nginx/sites-enabled
sudo rm -f myapp.conf
sudo ln -vs $TGT/scripts/myapp.conf myapp.conf
sudo service nginx reload 
```

# c# - 内部错误：项目已添加。字典中的键：'tmp' 正在添加的键：'tmp'

> ID：14899652
> 
> 赞同：2
> 
> 时间：2013-02-15T17:02:07.727
> 
> 标签：c#, .net, key, hashtable, cruisecontrol

在过去的几年里，我一直在使用 Cruise Control .NET 持续集成服务器，它运行良好。最近，我在启动 WebDashboard 后开始收到此错误。有人对如何解决此错误有任何建议吗？我在 ccnet.cong 中犯了一些错误吗？TIA。

```
INTERNAL ERROR: Item has already been added. Key in dictionary: 'tmp' Key being added: 'tmp'
System.ArgumentException: Item has already been added. Key in dictionary: 'tmp'  Key being added: 'tmp'
   at System.Collections.Hashtable.Insert(Object key, Object nvalue, Boolean add)
   at System.Collections.Specialized.StringDictionary.Add(String key, String value)
   at System.CodeDom.Compiler.Executor.ExecWaitWithCaptureUnimpersonated(SafeUserTokenHandle userToken, String cmd, String currentDir, TempFileCollection tempFiles, String& outputName, String& errorName, String trueCmdLine)
   at System.CodeDom.Compiler.Executor.ExecWaitWithCapture(SafeUserTokenHandle userToken, String cmd, String currentDir, TempFileCollection tempFiles, String& outputName, String& errorName, String trueCmdLine)
   at Microsoft.CSharp.CSharpCodeGenerator.Compile(CompilerParameters options, String compilerDirectory, String compilerExe, String arguments, String& outputFile, Int32& nativeReturnValue, String trueArgs)
   at Microsoft.CSharp.CSharpCodeGenerator.FromFileBatch(CompilerParameters options, String[] fileNames)
   at Microsoft.CSharp.CSharpCodeGenerator.FromSourceBatch(CompilerParameters options, String[] sources)
   at Microsoft.CSharp.CSharpCodeGenerator.System.CodeDom.Compiler.ICodeCompiler.CompileAssemblyFromSourceBatch(CompilerParameters options, String[] sources)
   at System.CodeDom.Compiler.CodeDomProvider.CompileAssemblyFromSource(CompilerParameters options, String[] sources)
   at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
   at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)
   at System.Xml.Serialization.TempAssembly..ctor(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, String location, Evidence evidence)
   at System.Xml.Serialization.XmlSerializer.GenerateTempAssembly(XmlMapping xmlMapping, Type type, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializer..ctor(Type type)
   at ThoughtWorks.CruiseControl.Core.State.FileStateManager.LoadState(TextReader stateFileReader) in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\state\FileStateManager.cs:line 111
   at ThoughtWorks.CruiseControl.Core.State.FileStateManager.LoadState(String project) in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\state\FileStateManager.cs:line 95
   at ThoughtWorks.CruiseControl.Core.IntegrationResultManager.get_CurrentIntegration() in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\IntegrationResultManager.cs:line 76
   at ThoughtWorks.CruiseControl.Core.IntegrationResultManager.get_LastIntegrationResult() in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\IntegrationResultManager.cs:line 41
   at ThoughtWorks.CruiseControl.Core.IntegrationResultManager.get_LastIntegration() in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\IntegrationResultManager.cs:line 58
   at ThoughtWorks.CruiseControl.Core.Project.get_LastIntegration() in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\Project.cs:line 1367
   at ThoughtWorks.CruiseControl.Core.Project.CreateProjectStatus(IProjectIntegrator integrator) in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\Project.cs:line 1332
   at ThoughtWorks.CruiseControl.Core.IntegrationQueueManager.GetProjectStatuses() in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\IntegrationQueueManager.cs:line 111
   at ThoughtWorks.CruiseControl.Core.CruiseServer.<>c__DisplayClasse.<GetProjectStatus>b__d(ServerRequest ) in C:\Tools\CruiseControl.NET1.9.1.0.source\project\core\CruiseServer.cs:line 475
   at ThoughtWorks.CruiseControl.Core.CruiseServer.RunServerRequest(ServerRequest request, Nullable`1 permission, Nullable`1 eventType, Action`1 action) in C:\Tools\CruiseControl.NET-1.9.1.0.source\project\core\CruiseServer.cs:line 1512 
```

更新：这是我正在处理的代码——“action(request);” 是 CruiseServer.cs 第 1512 行：

```
 /// <summary>
    /// Encapsulates the code to process a request.
    /// </summary>
    /// <param name="request"></param>
    /// <param name="permission"></param>
    /// <param name="eventType"></param>
    /// <param name="action"></param>
    /// <returns></returns>
    private Response RunServerRequest(ServerRequest request,
        SecurityPermission? permission,
        SecurityEvent? eventType,
        Action<ServerRequest> action)
    {
        Response response = new Response(request);
        try
        {
            // Validate the request and check the security token
            ValidateRequest(request);
            if (permission.HasValue)
            {
                CheckSecurity(request.SessionToken,
                    null,
                    permission.Value,
                    eventType);
            }

            // Perform the actual action
            action(request);
            response.Result = ResponseResult.Success;
        }
        catch (Exception error)
        {
            // Security exceptions have already been logged, just need to log any other exception
            if (!(error is SecurityException))
            {
                Log.Warning(error);
            }

            // Tell the caller the request failed and include the error message (but not the stack trace!)
            response.Result = ResponseResult.Failure;
            response.ErrorMessages.Add(
                new ErrorMessage(
                    error.Message,
                    error.GetType().Name));
        }
        return response;
    } 
```

这是它最终要去的功能，然后我进入“data = integrationQueueManager ...”：

```
 /// <summary>
    /// Gets information about the last build status, current activity and project name.
    /// for all projects on a cruise server
    /// </summary>
    public virtual ProjectStatusResponse GetProjectStatus(ServerRequest request)
    {
        ProjectStatus[] data = null;
        ProjectStatusResponse response = new ProjectStatusResponse(RunServerRequest(request,
            null,
            null,
            delegate
                {
                data = integrationQueueManager.GetProjectStatuses();
                if (request.SessionToken != SecurityOverride.SessionIdentifier)
                {
                    data = this.FilterProjects(request.SessionToken, data);
                }
            }));
        if (data != null) response.Projects.AddRange(data);
        return response;
    } 
```

接下来我进入“projectStatusList.Add...”：

```
 /// <summary>
    /// Gets the project statuses.  
    /// </summary>
    /// <returns></returns>
    /// <remarks></remarks>
    public ProjectStatus[] GetProjectStatuses()
    {
        ArrayList projectStatusList = new ArrayList();
        foreach (IProjectIntegrator integrator in projectIntegrators)
        {
            IProject project = integrator.Project;
            projectStatusList.Add(project.CreateProjectStatus(integrator));
        }
        return (ProjectStatus[]) projectStatusList.ToArray(typeof (ProjectStatus));
    } 
```

最后，应用程序在“var lastIntegration = this.LastIntegration;”处引发异常 在这个函数中：

```
 /// <summary>
    /// Creates the project status. 
    /// </summary>
    /// <param name="integrator">The integrator.</param>
    /// <returns></returns>
    /// <remarks></remarks>
    public ProjectStatus CreateProjectStatus(IProjectIntegrator integrator)
    {
        var lastIntegration = this.LastIntegration;
        ProjectStatus status = new ProjectStatus(
            this.Name,
            this.Category,
            this.CurrentActivity,
            lastIntegration.Status,
            integrator.State,
            this.WebURL,
            lastIntegration.StartTime,
            lastIntegration.Label,
            lastIntegration.LastSuccessfulIntegrationLabel,
            this.Triggers.NextBuild,
            this.CurrentBuildStage(),
            this.QueueName,
            this.QueuePriority,
            this.Parameters);
        status.Description = this.Description;
        status.Messages = this.messages.ToArray();
        status.ShowForceBuildButton = this.ShowForceBuildButton;
        status.ShowStartStopButton = this.ShowStartStopButton;
        return status;
    } 
```

当我将鼠标光标悬停在“var lastIntegration = this.LastIntegration”上时，它显示“this.LastIntegration = 'this.LastIntegration' 引发了类型为 'System.ArgumentException' 的异常”。非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T09:10:53.503

我在一个用户处安装我的程序时遇到了同样的问题。原来问题是由 Cygwin 安装引起的，而不是我的程序引起的。链接在这里。

[https://github.com/git-tfs/git-tfs/issues/135](https://github.com/git-tfs/git-tfs/issues/135)

# java - 如何在 Eclipse 中克服类型安全警告而不忽略它？

> ID：14899654
> 
> 赞同：0
> 
> 时间：2013-02-15T17:02:13.560
> 
> 标签：java, eclipse, casting

我收到来自日食的警告

`Type safety: The expression of type TreeItem[] needs unchecked conversion to conform to TreeItem<AppleItem>[]`

在使用这个时：

```
TreeItem<AppleItem>[] friends = item.getChildren().toArray(new TreeItem[0]); 
```

我不想使用`@uncheck`或者我不想使用循环来一一插入。有没有办法做到这一点？

显然`getChildren`返回一个`ArrayList`喜欢`ArrayList<TreeItem<AppleItem>>`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:07:43.990

不，没有未经检查的演员表就没有办法做到这一点。@Ivaylo 的解决方案也不会让您免于投射。

# c# - C#：在 DHCP 中查询客户端名称

> ID：14899656
> 
> 赞同：-1
> 
> 时间：2013-02-15T17:02:25.193
> 
> 标签：c#, windows, dns, dhcp

为清楚起见进行最终编辑 - 在我的环境中，DNS 将只为每个客户端存储一条记录。如果一个客户端有多个网卡，或者更改了子网，那么原始 IP 会在 DNS 中注册，直到对应的 DHCP 记录过期（这是 DHCP 注册 DNS 地址的 AD 环境）。

在这种情况下，DNS 有一个不正确的客户端记录。我想通过客户端名称查询 DHCP，以查看租用给它的所有 IP。

我发现的唯一可能的解决方案是从 DHCP 转储所有子网信息（由下面的 API 支持）然后查询，但这在我的环境中是不可行的，因为多人会使用这个应用程序，我不想要DHCP 的额外压力。

我无法更改 DNS 或 DHCP 的任何配置。

谢谢，

* * *

这与[此](https://stackoverflow.com/questions/2224877/querying-a-dhcp-server-in-c-sharp)问题类似，但使用引用的 API [(here)](http://msdn.microsoft.com/en-us/library/aa363379(v=vs.85).aspx)，我只能通过 IP 进行查询。是否可以使用此 API 或任何其他 API 按主机名查询 DHCP？（问题是，DNS 为我提供了 MachineA 的旧 IP，我想从 DHCP 服务器检索 MachineA 租用的任何其他 IP）。

编辑：为了澄清，我想编写一个可以输入主机名的程序，然后它将在 DHCP 服务器中查询该 DHCP 服务器管理的任何子网中该主机名的所有 IP。这是为了解决具有多个 NIC 的机器注册一个对我无用的 IP（无线）的问题，例如 DNS 结果可能是 NICA（无线）但我想要 NICB（有线）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:26:09.387

From what I can tell, you've encountered the age-old problem of which IP address to use. Now-a-days many computers have multiple NICs, some virtual, some local-only, some with internet access, etc... For the application to choose is very difficult. Most of the time I simply **make the IP by which the application hosts things like sockets a configuration item**--simply because the application is incapable of really choosing which is the *right* ip address to use. e.g. two NICs both with the same network access, which do you choose? If you run the application twice, maybe one should use NIC 1 and the other should use NIC 2--how would the app make that determination? (i.e. it can't).

Having said that, depending your needs, you can go looking for the best NIC and get it's IP address. For example, if you want an IPv4 address on a non-wireless NIC, you can do something like:

```
var ips = from ni
                in NetworkInterface.GetAllNetworkInterfaces()
            where ni.NetworkInterfaceType == NetworkInterfaceType.Ethernet
            from ip in ni.GetIPProperties().UnicastAddresses
            where ip.Address.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork && ip.IsDnsEligible
            select ip;
IPAddress address = ips.First().Address; 
```

...error checking omitted for readability--apply whatever error checking suitable for your requirements.

You can even go so far as to check whether the address is link local (i.e. can communicate out of the local network segment--which usually means an address automatically assigned by Windows instead of DNS/DHCP) by seeing if the first two bytes of an IPv4 address are 169 and 254.

But, you need to specifically define what your requirements are. simply to say "undesirable wireless IP" doesn't provide unambiguous and verifiable criteria to tell what solution will always work for your needs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:15:41.967

如果您试图在网络上定位一台机器，那么查询 DNS 可能是您首先要做的事情。即想象一台在网络上具有**静态**IP 地址的机器。它只会在名称服务中注册其名称，如果机器的 IP 堆栈仅配置为静态地址，则它根本不会显示在 DHCP 中。

我不确定新机器或最近更改的 IP 地址需要多长时间才能显示在 DNS 中。但是，如果您想查看 DHCP 是否有不同（较新）的内容，请先从 DNS 尝试后查询 DHCP。

# sitecore - 在 sitecore 页面编辑器上禁用保存

> ID：14899659
> 
> 赞同：2
> 
> 时间：2013-02-15T17:02:29.343
> 
> 标签：sitecore, sitecore6, page-editor

我使用 Sitecore 已经有一段时间了，但这是我第一次使用页面编辑器。所以，我去我的子布局并放置一个sitecore标签而不是一个.net标签

```
<sc:Text ID="txtContent" Field="Content" runat="server"/> 
```

内容是站点核心页面上的正常内容字段。当我进入页面编辑器时，我可以看到正确的内容并进行一些编辑，但保存按钮被禁用，我的更改根本没有保存我在这里错过了一些非常基本的东西？

这是我正在做的事情的屏幕截图 [http://screencast.com/t/0itqgjGVQx8](http://screencast.com/t/0itqgjGVQx8)

更新：包含 jquery.noconflict 构造后，执行正确地移至功能区中的处理程序函数。但似乎按钮本身已被禁用。是否可以启用/禁用按钮？是否在特定情况下禁用？如果是这样，我该如何启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T10:46:08.880

可能会出现无效的 html。检查您的按钮提示等。页面上可能有非转义文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T15:34:01.107

我前段时间解决了这个问题……在 sitecore 的子布局定义中，有一个冗余/错误的兼容渲染定义。一旦我删除它，保存按钮就会出现，并且子布局开始按预期工作

# javascript - 访问被字段名称覆盖的本机表单属性？

> ID：14899661
> 
> 赞同：2
> 
> 时间：2013-02-15T17:02:34.747
> 
> 标签：javascript, forms, dom

这是一个相当令人烦恼的问题，但请耐心等待。javascript DOM 的一个众所周知的特性是，如果您有一个带有 的表单字段`name="something"`，则表单的 javascript DOM 表示将具有一个`something`属性，该属性是对该字段的 DOM 表示的引用。

现在，如果字段的名称（“某物”）等于表单的本机属性之一，它将在 javascript 对象中取代它的位置。例如，对于一个表单：

`<form id="Form"><input name="submit" /></form>`

我们会有：

`var s=document.getElementById("Form").submit; // s is the input`

代替

`var s=document.getElementById("Form").submit; // s is the native submit function`

在这种情况下，有没有办法访问本机属性？

谢谢。

**编辑：**只是为了澄清两点：

*   我希望能够访问任何属性，而不仅仅是函数
*   我的意思是这是一个普遍的问题。一个合乎逻辑的解决方案是首先不引发名称冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:25:15.190

以下应该可以解决问题：

```
HTMLFormElement.prototype.submit.call(document.getElementById("Form")) 
```

它将使用本机方法并在页面上元素的上下文中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:11:32.190

如果您有一个名为“提交”的输入，我认为没有办法访问本机函数。我*刚刚*在John Resig 和 Bear Bibeault 撰写[的 Javascript Ninja](http://www.manning.com/resig/)的秘密第 11 章中遇到了同样的话题。我想如果有人知道 JS 和 DOM 的来龙去脉，那就是他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:57:58.287

我试图将其发布为对 Ivo 答案的编辑，但被拒绝了。这条信息很神秘，但如果他们的意思是我在原件上添加了太多内容，那么我认为这是错误的，因为我只是想完成它。如果原因不同，请随时发表评论。有了这个编辑，我会接受 Ivo 的回答，但如果没有它，我认为它是不完整的。

Ivo 的答案适用于本机函数，但不适用于属性。对于属性，似乎有多种方法可以检索值，它们都很相似，但都不是完美的。我已经在**IE9**上测试了以下内容，这是我在此处可用的全部内容，但[http://www.quirksmode.org/dom/w3c_core.html#attributes](http://www.quirksmode.org/dom/w3c_core.html#attributes)表明行为通常（如果不是完全一致）是一致的：

```
form.attributes['name']       // node representing the 'name' attribute

form.getAttribute('name')     // input with name="name"

form.attributes['submit']     // null

form.getAttribute('submit')   // input with name="submit"

form.attributes['onsubmit']   // node representing the 'onsubmit' attribute, 
                              // whose value is a string

form.getAttribute('onsubmit') // input with name="submit" 
```

基于此，似乎（再次注意我没有彻底测试它）：

*   对于值属性，可以使用这种`attributes['attribute name']`方法，它应该适用于 IE6。
*   对于原型函数，可以使用以下`prototype.fn.call`方法
*   对于函数属性，也许可以检索属性的源代码并使用它，但我宁愿不必这样做。
*   由于`getAttribute`似乎返回命名输入而不是属性，至少在 IE 中，它似乎毫无用处。

回答我最初的问题，看起来在大多数情况下都会有访问属性的方法，但这将取决于属性，最终取决于浏览器。

# c# - 获取 BitmapImage PixelHeight 属性会导致初始化问题

> ID：14899664
> 
> 赞同：1
> 
> 时间：2013-02-15T17:02:53.243
> 
> 标签：c#, .net, wpf, graphics, imaging

我有一个 BitmapImage，我想获取 PixelHeight 和 PixelWidth 属性，以便确定它是横向还是纵向布局。在确定其布局后，我需要设置图像的高度或宽度，以使其适合我的图像查看器窗口，而不会扭曲高度：宽度比。但是，看来我必须调用 BeginInit() 才能对我的图像做任何事情。我必须调用 EndInit() 来获取 PixelHeight 或 PixelWidth 属性，并且我不能在同一个 BitmapImage 对象上多次调用 BeginInit()。那么我怎么可能设置我的图像，获取高度和宽度，确定它的方向，然后调整图像的大小呢？

这是我一直在使用的代码块：

```
image.BeginInit();
Uri imagePath = new Uri(path + "\\" + die.Die.ImageID + "_" + blueTape + "_BF.BMP");
image.UriSource = imagePath;
//image.EndInit();
imageHeight = image.PixelHeight;
imageWidth = image.PixelWidth;
//image.BeginInit();
// If the image is taller than it is wide, limit the height of the image
// i.e. DML87s and all non-rotated AOI devices
if (imageHeight > imageWidth)
{
    image.DecodePixelHeight = 357;
}
else
{
    image.DecodePixelWidth = 475;
}
image.EndInit(); 
```

当我运行它时，我得到了这个运行时异常：

> 无效操作异常：
> 
> BitmapImage 初始化未完成。调用 EndInit 方法完成初始化。

有人知道如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:35:47.283

据我所知，如果不对位图进行两次解码，您想要做的事情是不可能的。

我想将位图解码为其本机大小然后根据需要设置包含图像控件的大小会简单得多。位图被适当地缩放，[`Stretch`](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.stretch.aspx)设置为`Uniform`（因为图像控件的宽度和高度都设置了，`Stretch`也可以设置为`Fill`或`UniformToFill`）。

```
var bitmap = new BitmapImage(new Uri(...));

if (bitmap.Width > bitmap.Height)
{
    image.Width = 475;
    image.Height = image.Width * bitmap.Height / bitmap.Width;
}
else
{
    image.Height = 475;
    image.Width = image.Height * bitmap.Width / bitmap.Height;
}

image.Stretch = Stretch.Uniform;
image.Source = bitmap; 
```

# symfony - symfony2 在实体内创建自定义查询 - getEntityManager() 未定义

> ID：14899665
> 
> 赞同：1
> 
> 时间：2013-02-15T17:03:09.440
> 
> 标签：symfony, undefined-behavior

我希望在我的实体类中运行自定义查询。我不想对这个查询使用表映射我只想返回一个结果数组，但我希望查询仍然记录到记录器。我已经剥离了课程并重命名以尝试说明我想要实现的目标

```
// src/Name/ExampleBundle/Entity/ExampleEntity.php

namespace Name\ExampleBundle\Entity;

class ExampleEntity
{

    public function getArrayFromExample(){

        $results = $this->getEntityManager()
        ->createQuery("SELECT * FROM exmapleTable LIMIT 50")
        ->getResult();

        return $results;
    }

} 
```

以上返回类似

```
Fatal error: Call to undefined method {path}\ExampleEntity::getEntityManager() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:06:01.390

您的查询应该在实体存储库中，而不是实体本身。[http://mackstar.com/blog/2010/10/04/using-repositories-doctrine-2](http://mackstar.com/blog/2010/10/04/using-repositories-doctrine-2)

然后你可以做类似的事情：

```
public function getArrayFromExample(){
    $results = $this->_em
    ->createQuery("SELECT * FROM exmapleTable LIMIT 50")
    ->getResult();

    return $results;
} 
```

# c# - Message.Process() 上的 ImapX IndexOutOfRangeException

> ID：14899668
> 
> 赞同：0
> 
> 时间：2013-02-15T17:03:16.673
> 
> 标签：c#, wpf, xaml, indexing, mailing

我刚刚开始使用您的 ImapX 库来检索和阅读来自 gmail 的邮件。现在，一切正常，这是一个很棒的图书馆。

但是，当我尝试使用 Message.Process() 选项标记已读邮件时，它会返回 IndexOutOfRangeException。

```
private void Start()
    {
        int amountRead = 0;
        failedMessages.Clear();

        foreach(string origin Properties.Settings.Default.MailOrigins)
        {
            IMailOriginAdapter adapter = MailOriginFactory.CreateMailOriginContainer(origin);

            foreach (ImapX.Message message in adapter.Messages())
            {
                if (SendWebRequest(url))
                {
                    message.Process();
                    amountRead++;

                    Dispatcher.BeginInvoke(new MethodInvoker(delegate
                    {
                        this.btnStart.Content = &quot;Read [&quot; + amountRead + &quot;/&quot; + GmailUser.Instance.Messages.Count + &quot;]&quot;;
                    }));
                }
                else
                {
                    failedMessages.Add(message);
                }
            }

            System.Windows.MessageBox.Show(adapter.GmailFromEmail() + &quot; reading completed.&quot;);
        }
    } 
```

希望有人能够帮助我解决这个问题，我现在已经有一个多月了..

提前致谢。

此致， Larssy1

# qt - 如何将 JavaScript 函数连接到属性信号？

> ID：14899672
> 
> 赞同：3
> 
> 时间：2013-02-15T17:03:28.110
> 
> 标签：qt, qml

我是 Qml 的新手，在将 javascript 处理程序连接到属性的信号时遇到了一些麻烦。我有一个带有属性和信号的 C++ 对象。

```
class CppObject : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QVariant value READ getValue WRITE setValue NOTIFY valueChanged)

signals:
    void valueChanged(const QVariant &);
}; 
```

这些对象是通过 C++ 工厂方法创建的，我能够将值和更改绑定到 Qml 属性。这一切都有效。

```
property CppObject obj: cppProxy.PropertyFactory("foo");

Text
{
    x: 100;
    y: 100;
    text: parent.obj.value;
} 
```

对于某些属性，我想将 valueChanged 信号连接到 javascript 函数。我一直在阅读 Qml 文档并尝试了很多东西，但没有任何运气。我认为这样的事情应该有效，但没有

```
function objEventHandler()
{
    console.log('objEventHandler() ran')
}

Component.onCompleted:
{
    obj.value.valueChanged.connect(objEventHandler);
} 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T22:21:25.233

您也可以按照您在示例中尝试的方式进行连接，但形式为：

```
Component.onCompleted:
{
    obj.valueChanged.connect(objEventHandler);
} 
```

信号不是“value”对象的属性，而是“obj”的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:46:45.850

使用连接对象很简单。

```
Connections
{
    target: obj;
    onValueChanged: console.log('changed');
} 
```

# java - 使用从 Java 到 XML 文件的 Xpath 表达式创建基本换行符

> ID：14899674
> 
> 赞同：0
> 
> 时间：2013-02-15T17:03:38.830
> 
> 标签：java, xml, xpath, carriage-return

Throghout 学习如何编程 Stack Overflow 提供了丰富的信息，并且是学习如何找出不同事物的主要内容。但是对于这个问题，在搜索了几天并空手而归之后，我决定创建我的第一篇文章。

问题是，使用 Xpath 的 Node.setTextContent 从 Java 字符串在 XML 文件中创建多行值。它写入 Xpath 报告为元素节点的 XML 文件中的值标记。现在在将字符串值写入节点时，它确实将字符串值写入节点，但是它只是一个长字符串值，因为根据 API 的 setTextContent 方法不会解析字符串中的任何内容，而只是写入文本. 我正在尝试编写的数据示例是：（已编辑 2-16，只是注意到格式选项未显示主要帖子）格式如下所示，街道、城市状态和电话分解如下（行之间没有空格）以匹配第一个 xml 代码示例中列出的格式。

生动的大街 496 号。

一些城市，州，11111

111-222-3333

当将 java 字符串写入 xml 文件时，其输入为：496 Vivid Ave. Some City, State, 11111 111-222-3333

从父程序（不是我的 java 应用程序）创建的节点的示例是：

```
<field sid="ADDRESS">
     <itemlocation>
        <ae>
           <ae>absolute</ae>
           <ae>33</ae>
           <ae>168</ae>
        </ae>
     </itemlocation>
     <value>496 Vivid Ave.
Some City, State, 11111
111-222-3333</value>
     <borderwidth>0</borderwidth>
     <fontinfo>
        <ae>Times New Roman</ae>
        <ae>10</ae>
        <ae>plain</ae>
     </fontinfo>
     <scrollhoriz>wordwrap</scrollhoriz>
     <scrollvert>fixed</scrollvert>
     <format>
        <ae>string</ae>
        <ae>optional</ae>
     </format>
     <acclabel>6\.  leave address.
enter street, city, state, zip code and phone number.
</acclabel>
     <size>
        <ae>35</ae>
        <ae>3</ae>
     </size>
     <previous>FIELD5</previous>
     <next>ORDINARY</next>
  </field> 
```

当我运行我的应用程序时，原始 xml 数据的输出如下所示：

```
<field sid="ADDRESS">
     <itemlocation>
        <ae>
           <ae>absolute</ae>
           <ae>33</ae>
           <ae>168</ae>
        </ae>
     </itemlocation>
     <value>496 Vivid Ave. Some City, State, 11111 111-222-3333</value>
     <borderwidth>0</borderwidth>
     <fontinfo>
        <ae>Times New Roman</ae>
        <ae>10</ae>
        <ae>plain</ae>
     </fontinfo>
     <scrollhoriz>wordwrap</scrollhoriz>
     <scrollvert>fixed</scrollvert>
     <format>
        <ae>string</ae>
        <ae>optional</ae>
     </format>
     <acclabel>6\.  leave address.
enter street, city, state, zip code and phone number.
</acclabel>
     <size>
        <ae>35</ae>
        <ae>3</ae>
     </size>
     <previous>FIELD5</previous>
     <next>ORDINARY</next>
  </field> 
```

我试图在字符串中手动输入换行符和回车符的转义字符，它所做的只是打印代码值，而不是值。

当父程序读取我的 Java 代码时，它不会将地址和电话号码分成不同的行。

我正在使用的 java 看起来像：

```
public void setFieldValue(String sid, String value){
    Node resultNode = null;
    XPath xPath = XPathFactory.newInstance().newXPath();

    try{

        resultNode = (Node)xPath.evaluate(makeFieldString(sid), doc,XPathConstants.NODE);

    }catch(XPathExpressionException xpee){System.out.println(xpee + "Could not retrive node");}
     if (resultNode != null){

        resultNode.setTextContent(value);

    }
    else System.out.println("Epic fail");

    }

public String makeFieldString(String sid){
    String output=null;
    if (sid.equals("POPUP2")){
        output="//popup[@sid='" + sid + "']/value";
    }

    else{
       output=  "//field[@sid='" + sid + "']/value";
    }
    return output;
} 
```

如果有人对如何让 Java 字符串包含 setTextContent 将识别的换行符有任何想法，我会欣赏它。我已经放弃了尝试使用文本标准化和空白数据的想法，但不确定如何实现它，也不确定这些方法是否会从 setTextContent 方法中删除。

谢谢你的帮助！我希望我的问题足够清楚，不会被激怒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:09:45.010

[我在http://xpath.alephzarro.com/content/cheatsheet.html](http://xpath.alephzarro.com/content/cheatsheet.html)找到了一个 xpather cheetsheet，它显示了正则表达式中的特殊字符，而 Xpath 不会插入换行符的 unicocode 值，它确实识别 \n 为 new行，现在地址块的格式正确。

# android - 如何发布带有一些 cookie 的表单

> ID：14899675
> 
> 赞同：0
> 
> 时间：2013-02-15T17:03:39.683
> 
> 标签：android, httpclient, httpurlconnection

我在这个链接中发布了一个关于 htmlunit 的问题：[how to use htmlunit with my android project](https://stackoverflow.com/questions/14885422/how-to-use-htmlunit-with-my-android-project)

主要是我有一个链接，我在登录后获得（我通过网络视图登录）这个链接给了我一个简单的页面。在该页面中有一个文本区域和一个提交按钮。还有一些javascript（我认为这些javascript运行，当我按下提交按钮时）。我可以通过 webview 做到这一点，但由于某种原因我不想使用 webview。当我按下提交按钮时，它会提供 textarea 的值和带有现有 cookie 的隐藏字段的一些值（当我通过 webview 登录时获取） Post 方法。我需要在没有 webview 的情况下执行此操作。现在除了 htmlunit 还有其他选择吗？我听说过 HttpClient、HttpUrlConnection。但我不知道如何使用它们来解决我的问题，因为它们对我来说是全新的。我想如果我使用这些类，我必须在与 UI 踏板分开的线程中运行它们。还有一件事，提交后会将我重定向到另一个页面。我不需要对这个重定向页面做任何事情。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:58:49.420

这是我在[这里给出的相同答案](https://stackoverflow.com/questions/14925061/how-to-get-all-cookies-or-cookies-url-from-android-webkit-cookiemanager/#14927665)

我已经解决了这个问题。首先，我一直得到正确的饼干。那么问题是什么。要么我将 cookie 与 Jsoup 集成是错误的，要么 Jsoup 做错了什么。所以，首先我用 HttpUrlConnection 获取页面，然后用 Jsoup 解析它。像这样：

```
URL form = new URL(uri.toString());
HttpUrlConnection connection1 = (HttpURLConnection)form.openConnection();
connection1.setRequestProperty("Cookie", my_cookie);
connection1.setReadTimeout(10000);
StringBuilder whole = new StringBuilder();
BufferedReader in = new BufferedReader(
new InputStreamReader(new BufferedInputStream(connection1.getInputStream())));
String inputLine;
while ((inputLine = in.readLine()) != null)
      whole.append(inputLine);
in.close();
Document doc = Jsoup.parse(whole.toString()); 
```

任何有关此代码的建议将不胜感激。

# html - 具有填充和溢出的 div 上 Firefox 中 scrollHeight 的奇怪行为：自动

> ID：14899676
> 
> 赞同：3
> 
> 时间：2013-02-15T17:03:41.483
> 
> 标签：html, firefox, scrollbar, padding

在这里，[http://jsfiddle.net/YNKws/](http://jsfiddle.net/YNKws/)

```
<div id="div1" style="padding: 2px; overflow: auto;">
  <div style="height:30px;">lalala</div>
  <div style="height:30px;">lalala</div>
</div>

var d = $("#div1");
for (var i = 0; i < 5; i++) {
  console.log(d.height(),d[0].scrollHeight);
  d.height(d.height() - 1);
} 
```

有填充和溢出的div：自动。在 Firefox 中，div 的 scrollHeight 值有奇怪的行为。当我们将 div 的高度设置为小于它的原始高度时，很自然地期望滚动条立即出现并且 scrollHeight 值保持不变。Chrome适合这些期望但不适合firefox，最后一个不绘制滚动条，当原始高度的偏差小于div的padding时减小底部填充和scrollHeight。

它是一个错误吗？这个“错误”是否有修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:49:03.277

Firefox 的行为是 CSS 规范所要求的：用溢出填充事物本身不会导致溢出。

# mysql - 如何仅从 SQL 中选择唯一的 user_id

> ID：14899677
> 
> 赞同：1
> 
> 时间：2013-02-15T17:03:42.093
> 
> 标签：mysql, sql

这是我的 sql：

```
SELECT `activity`.* 
FROM `activity`,`exchange`  
WHERE `activity`.`id` != 0 
AND `activity`.`type` !=6 
AND (`activity`.`type` = 4 OR `activity`.`type` = 5)
AND (`exchange`.`id` = `activity`.`user_id`) 
AND (`exchange`.`photo` != 0) 
ORDER BY `activity`.`id` DESC  
LIMIT 4 
```

目前我在结果中得到重复的 user_id。我怎样才能从中获得不重复的 user_ids 以便它们是不同的？

Exchange 是用户表。

数据：

```
CREATE TABLE IF NOT EXISTS `activity` (
  `id` bigint(255) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(255) NOT NULL,
  `type` int(2) NOT NULL,
  `link` varchar(255) NOT NULL,
  `time` int(50) NOT NULL,
  `add_text` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=12583 ;

--
-- Dumping data for table `activity`
--

INSERT INTO `activity` (`id`, `user_id`, `type`, `link`, `time`, `add_text`) VALUES
(12567, 11615, 4, 'Aprender-EspaÃ±ol&lang=es&discussionID=1131&t=viewDiscussion', 1360941086, 'for everyone wants to learn spanish'),
(12560, 6091, 4, 'Random-topics&lang=&discussionID=1130&t=viewDiscussion', 1360936869, 'Valentine''s Day'),
(12542, 11603, 5, 'Aprender-EspaÃ±ol&t=viewDiscussion&discussionID=966&page=', 1360923369, 'AMIGA ALEMANA :)'),
(12541, 11603, 5, 'Aprender-EspaÃ±ol&t=viewDiscussion&discussionID=1036&page=', 1360923340, 'Want to re-learn Spanish'),
(12540, 11603, 5, 'Aprender-EspaÃ±ol&t=viewDiscussion&discussionID=1114&page=', 1360923203, 'Quiero practicar mi espanol!'),
(12539, 11603, 5, 'Cultura-y-Sociedad---EspaÃ±ol&t=viewDiscussion&discussionID=106&page=', 1360922991, 'Â¿EstÃ¡s de acuerdo con que se hagan corridas de toro?'),
(12532, 11604, 5, 'Apprendre-le-FranÃ§ais&t=viewDiscussion&discussionID=1112&page=', 1360920608, 'Looking for a French Penpal!'),
(12527, 11495, 5, 'Learning-English&t=viewDiscussion&discussionID=54&page=', 1360909410, 'Why are you learning English?'),
(12503, 11100, 5, 'Learning-English&t=viewDiscussion&discussionID=54&page=', 1360876079, 'Why are you learning English?'),
(12502, 11100, 5, 'Learning-English&t=viewDiscussion&discussionID=54&page=', 1360876051, 'Why are you learning English?'),
(12491, 9641, 5, 'Culture-and-Society---English&t=viewDiscussion&discussionID=1129&page=', 1360874309, 'Rock music groups from your country?'),
(12490, 1874, 4, 'Culture-and-Society---English&discussionID=1129&t=viewDiscussion', 1360870935, 'Rock music groups from your country?'),
(12478, 11609, 5, 'Apprendre-le-FranÃ§ais&t=viewDiscussion&discussionID=1112&page=', 1360856071, 'Looking for a French Penpal!'),
(12448, 11604, 4, 'Aide-demandÃ©e,-en-franÃ§ais&lang=es&discussionID=1128&t=viewDiscussion', 1360832732, 'Apprendre le franÃ§ais'),
(12442, 11604, 5, 'Apprendre-le-FranÃ§ais&t=viewDiscussion&discussionID=1123&page=', 1360832130, 'FranÃ§ais!'),
(12433, 11605, 5, 'Learning-English&t=viewDiscussion&discussionID=54&page=', 1360830795, 'Why are you learning English?'),
(12406, 887, 5, 'Learning-English&t=viewDiscussion&discussionID=1127&page=', 1360796193, 'silver'),
(12405, 11600, 4, 'Learning-English&lang=&discussionID=1127&t=viewDiscussion', 1360796100, 'silver'),
(12399, 11596, 4, 'Apprendre-le-FranÃ§ais&lang=es&discussionID=1126&t=viewDiscussion', 1360794605, 'Je voudrais apprendre le franÃ§aise'),
(12384, 11595, 5, 'Learning-English&t=viewDiscussion&discussionID=173&page=', 1360791086, 'What is your favourite song? '),
(12349, 11578, 5, 'Learning-English&t=viewDiscussion&discussionID=478&page=', 1360771365, 'What kind of music do you like and why?'),
(12306, 11578, 5, 'Culture-and-Society---English&t=viewDiscussion&discussionID=1012&page=', 1360708606, 'Why are you learning a foreign language?'),
(12292, 6091, 5, '&t=viewDiscussion&discussionID=330&page=', 1360693956, 'Which day of the week do you hate the most? Why?'),
(12262, 11567, 5, 'Aprender-EspaÃ±ol&t=viewDiscussion&discussionID=1114&page=', 1360661625, 'Quiero practicar mi espanol!'),
(12238, 11544, 5, 'Learning-English&t=viewDiscussion&discussionID=909&page=', 1360648815, 'What instrument(s) do you play?'),
(12195, 887, 5, 'Apprendre-le-FranÃ§ais&t=viewDiscussion&discussionID=1077&page=', 1360624305, 'Resources to Learn French'),
(12135, 6091, 5, 'Apprendre-le-FranÃ§ais&t=viewDiscussion&discussionID=471&page=', 1360599702, 'Connaissez-vous le Verlan?'),
(12134, 2933, 5, 'Travel,_Live_and_Study_Abroad_-_English&t=viewDiscussion&discussionID=1124&page=', 1360596914, 'Would you like to make an exchange?'),
(12131, 3934, 5, 'Apprendre-le-FranÃ§ais&t=viewDiscussion&discussionID=471&page=', 1360595290, 'Connaissez-vous le Verlan?'),
(12123, 11543, 5, 'Aprender-EspaÃ±ol&t=viewDiscussion&discussionID=1114&page=', 1360587427, 'Quiero practicar mi espanol!'); 
```

[SQL Fiddle 架构](http://sqlfiddle.com/#!2/693e5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:24:22.370

这应该很接近——获取与用户和活动关联的最长时间：

```
SELECT `activity`.* 
FROM `exchange`
    JOIN `activity` ON `exchange`.`id` = `activity`.`user_id`
    JOIN (
        Select User_Id, MAX(Time) timeMax
        FROM Activity
        WHERE `activity`.`id` != 0 
            AND `activity`.`type` !=6 
            AND (`activity`.`type` = 4 OR `activity`.`type` = 5)
        GROUP BY User_Id
    ) maxActivity ON `activity`.`user_id` = maxActivity.User_Id 
            AND `activity`.`Time` = maxActivity.timeMax
WHERE (`exchange`.`photo` != 0) 
ORDER BY `activity`.`id` DESC  
LIMIT 4 
```

这是你的小提琴背：[http ://sqlfiddle.com/#!2/693e5/10](http://sqlfiddle.com/#!2/693e5/10)

顺便说一句 - 不需要 Activity.Type != 6 - 只需使用 Activity.Type IN (4,5) - 或保留上面的 OR。

```
SELECT `activity`.* 
FROM `exchange`
    JOIN `activity` ON `exchange`.`id` = `activity`.`user_id`
    JOIN (
        Select User_Id, MAX(Time) timeMax
        FROM Activity
        WHERE `activity`.`id` != 0 
            AND `activity`.`type` IN (4, 5)
        GROUP BY User_Id
    ) maxActivity ON `activity`.`user_id` = maxActivity.User_Id 
            AND `activity`.`Time` = maxActivity.timeMax
WHERE (`exchange`.`photo` != 0) 
ORDER BY `activity`.`id` DESC  
LIMIT 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:08:44.680

如果用户 id 是唯一整数，您可以考虑将用户 id 作为表的主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:21:54.240

这会是你可以使用的东西吗？

```
 Select user_id, max(time), add_text FROM activity GROUP BY user_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T17:05:56.267

您可以使用 Distinct 或 Group BY 吗？或者在你的 FROM 中使用 Joins 来加入表格？也许如果你发布一些数据会更清楚

```
SELECT DISTINCT `activity`.* 
FROM `activity`,`exchange`  
WHERE `activity`.`id` != 0 
AND `activity`.`type` !=6 
AND (`activity`.`type` = 4 OR `activity`.`type` = 5)
AND (`exchange`.`id` = `activity`.`user_id`) 
AND (`exchange`.`photo` != 0) 
ORDER BY `activity`.`id` DESC  
LIMIT 4 
```

# c++ - C++ STL 列表函数使用空列表进行段错误

> ID：14899678
> 
> 赞同：1
> 
> 时间：2013-02-15T17:03:43.383
> 
> 标签：c++, list, stl

我有一个指针列表作为类的成员。我实例化了该类，当列表为空时，size() 和 empty() 等各种函数会因段错误而失败。当我在列表中添加一些东西时，它们很好。我试图抽象出我对测试文件所做的事情，并且效果很好。这就是我认为当我的代码失败时我正在做的事情（尽管显然不是）：

```
#include <list>
#include <iostream>

class Test {
  int i;
};

int main() {
  std::list<Test*> tlist;

  if (tlist.empty()) {
    std::cout << "List empty";
  } else {
    std::cout << "List not empty";
  }
} 
```

我不能真正发布导致问题的整个代码列表，因为它相当大并且包含一堆文件，但会尝试直接从代码中粘贴所有相关位：

player.h 中的类声明：

```
class Player : public ScreenObject {
private:
    std::list<Thing*> inventory; 
```

构造函数中没有对该列表执行任何操作。

失败的地方：

主.cpp：

```
Player pc(iname, w_choice, c_choice, 11, 11, WHITE, '@'); 
```

……

```
if (pc.addToInv(t)) {
    currentLevel.delObject(id);
} 
```

……

播放器.cpp：

```
int Player::addToInv(Thing& t) {
    if (inventory.size() <= 52) {
        inventory.push_back(&t);
    } else {
        shiplog("Cannot add to inventory, 52 item limit reached",10);
        return 0;
    }
} 
```

使用 gdb 运行它时出现的错误发生在对 size() 的调用上，并在此处结束：

```
Program received signal SIGSEGV, Segmentation fault.
0x0804eda6 in std::_List_const_iterator<Thing*>::operator++ (this=0xbfff9500)
at /usr/include/c++/4.4/bits/stl_list.h:223
223            _M_node = _M_node->_M_next; 
```

任何猜测都非常感谢！

* * *

完整的回溯是：

```
(gdb) bt
 0  0x0804e28a in std::_List_const_iterator<Thing*>::operator++ (
    this=0xbfff9500) at /usr/include/c++/4.4/bits/stl_list.h:223
 1  0x0804e64e in std::__distance<std::_List_const_iterator<Thing*> > (
    __first=..., __last=...)
    at /usr/include/c++/4.4/bits/stl_iterator_base_funcs.h:79
 2  0x0804e4d3 in std::distance<std::_List_const_iterator<Thing*> > (
    __first=..., __last=...)
    at /usr/include/c++/4.4/bits/stl_iterator_base_funcs.h:114
 3  0x0804e2e6 in std::list<Thing*, std::allocator<Thing*> >::size (
    this=0xbffff244) at /usr/include/c++/4.4/bits/stl_list.h:805
 4  0x0804df78 in Player::addToInv (this=0xbffff068, t=...) at player.cpp:551
 5  0x0804a873 in main (argc=1, argv=0xbffff494) at main.cpp:182 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:47:09.433

```
int Player::addToInv(Thing& t) {
if (inventory.size() <= 52) {
    inventory.push_back(&t);
} else {
    shiplog("Cannot add to inventory, 52 item limit reached",10);
    return 0;
} 
```

}

*事物*是通过引用传递的，但随后它的地址被传递给inventory.push_back()。尝试只传递't'。

# php - 来自数组的 PHP PDO 命名查询

> ID：14899679
> 
> 赞同：1
> 
> 时间：2013-02-15T17:03:47.393
> 
> 标签：php, pdo, prepared-statement

我一直在尝试切换到使用 PHP 进行数据库工作的 PDO 方式。在我的 Java 生活中，我能够将命名查询放入关联数组并使用索引调用准备好的语句。它比这要复杂一些，但是...

无论如何，我认为在 PHP 中做同样类型的事情会很酷。

```
$NamedQueries['SelectBlackBoxById'] = "select name, category, rating from blackbox where id = :blackbox_id"; 
```

所以我可以这样准备我的陈述：

```
$sth = $dbh->prepare($NamedQueries['SelectBlackBoxById']);
$sth->execute(array('blackbox_id' => '1'));
$sth->setFetchMode(PDO::FETCH_OBJ); 
return $sth->fetch(); 
```

而不是这种方式：

```
$sth = $dbh->prepare("select name, category, rating from blackbox where id = :blackbox_id");
$sth->execute(array('blackbox_id' => '1'));
$sth->setFetchMode(PDO::FETCH_OBJ); 
return $sth->fetch(); 
```

我确定我忽略了某些东西，因为我首选的方式返回 false。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:54:29.900

所以，你**真正的**问题是缺乏错误处理。它持续存在。

```
error_reporting(E_ALL); 
```

通知超出范围的变量。

```
$dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

连接后收到空查询和其他任何 PDO 错误的通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:15:37.003

```
$sth->execute(array('blackbox_id' => '1')); 
```

应该

```
$sth->execute(array(':blackbox_id' => '1')); 
```

你必须包括`:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:18:25.180

在使用它来准备查询之前，您是否尝试过转储您的 Array 值？总的来说，我认为 PDO 使用它的方式没有任何问题，您也可以在准备好 $sth 变量后使用 var_dump() 来查看其中可能包含的内容。

一般来说，正如其他人指出的那样，“：”是绑定变量时应该包含的内容，尽管在这种情况下，我不一定认为这是根本问题，正如您所说的第二个示例有效，它使用相同的语法，唯一的区别是使用数组中的查询而不是原始字符串。认为因为它只有 1 个要绑定的变量，所以没有 ':' 不会导致问题（尽管你应该添加它）

# php - ZF2 入门教程和 PHPUnit 的问题

> ID：14899683
> 
> 赞同：0
> 
> 时间：2013-02-15T17:03:54.257
> 
> 标签：php, phpunit, zend-framework2

在“ [Zend Framework 2 入门](http://zf2.readthedocs.org/en/latest/user-guide/overview.html)”教程中有一个应用程序基本单元测试的示例：http: [//zf2.readthedocs.org/en/latest/user-guide/unit-testing.html](http://zf2.readthedocs.org/en/latest/user-guide/unit-testing.html)我已经刚刚复制了代码（只需更改`include __DIR__ . '/../init_autoloader.php';`为`include __DIR__ . '/../../../init_autoloader.php';`），现在我收到了一个错误：

```
root@devmv:/var/www/sandbox/zf2sandbox/module/Application/test# phpunit 
PHPUnit 3.7.13 by Sebastian Bergmann.

Configuration read from /var/www/sandbox/zf2sandbox/module/Application/test/phpunit.xml

E

Time: 0 seconds, Memory: 3.75Mb

There was 1 error:

1) ApplicationTest\Controller\IndexControllerTest::testIndexActionCanBeAccessed
array_replace_recursive(): Argument #1 is not an array

/lib/ZendFramework/ZendFramework-2.1.0/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:144
/lib/ZendFramework/ZendFramework-2.1.0/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:173
/lib/ZendFramework/ZendFramework-2.1.0/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:193
/lib/ZendFramework/ZendFramework-2.1.0/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:236
/var/www/sandbox/zf2sandbox/module/Application/test/ApplicationTest/Controller/IndexControllerTest.php:18

FAILURES!
Tests: 1, Assertions: 0, Errors: 1. 
```

当我只使用像 assertEmpty(...) 这样的标准 PHPUnit 断言方法时，它可以正常工作。

这是我的 IndexControllerTest.php：

```
<?php
namespace ApplicationTest\Controller;

use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase;

class IndexControllerTest extends AbstractHttpControllerTestCase
{
    public function setUp()
    {
        $this->setApplicationConfig(
            include '/var/www/sandbox/zf2sandbox/config/test/application.config.php'
        );
        parent::setUp();
    }

    public function testIndexActionCanBeAccessed()
    {
        $this->dispatch('/');
        $this->assertResponseStatusCode(200);

        $this->assertModuleName('application');
        $this->assertControllerName('application_index');
        $this->assertControllerClass('IndexController');
        $this->assertMatchedRouteName('home');

//      $this->assertEmpty(null);
    }
} 
```

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:34:39.590

检查您的线路

```
include '/var/www/sandbox/zf2sandbox/config/test/application.config.php' 
```

实际上产生一个数组。到目前为止，我猜它正在生产`false`或不返回任何东西。

该文件应如下所示：

```
<?php

return array(
    // ...
); 
```

# java - 一个程序，2个窗口。如何使用观察者从 #1 通知 #2 更改？

> ID：14899690
> 
> 赞同：0
> 
> 时间：2013-02-15T17:04:29.253
> 
> 标签：java, observer-pattern

**编辑：**我真正想要的是：如何`update`从第二个窗口激活，但从第一个窗口激活。我已经添加了两个`update`（s）。

我有 2 个窗口，每个窗口都有一个观察者。当我用观察者更新该窗口中的任何内容时，它就起作用了！

但是我还想更新另一个窗口。我认为我的观察者不对，但不知道如何改变它

```
public class ObserverCtrl extends Observable {

    public ObserverCtrl(Secretariat window, ) {

        this.addObserver(window);
    }

    public ObserverCtrl(Comisie window) {

        this.addObserver(window);
    }

    public void refresh () {
        this.setChanged();
        this.notifyObservers();
    }

} 
```

**主文件**

```
Secretariat window = new Secretariat();
Comisie window2 = new Comisie(); 
```

**每个 JFrame（窗口）都有**

```
private ObserverCtrl observer;
this.observer = new ObserverCtrl(this) 
```

**第一个窗口，秘书处**

```
@Override
public void update(Observable arg0, Object arg1) {
    candidat_TextField.setText(null);
    sectie_TextField.setText(null);
    codSectie_TextField.setText(null);
    confirmare_TextArea.setText(null);
    listModelCandidati.clear();
    listModelSectii.clear();
    loadSectiiListModel();
    loadCandidatiListModel();
} 
```

**第二个窗口，Comisie**

```
@Override
public void update(Observable arg0, Object arg1) {
    this.loadSectiiListModel();

} 
```

**我有一个事件点击按钮`Secretariat`。它自己激活，`update()`我希望它也激活`update``Comisie`**

我应该如何实现，以便通过观察者从#1 通知窗口#2 是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:36:15.667

我制作了另一个类`extends Observable`，用它来通知 Window #2

# class - 带有 SCSS 的条件语句

> ID：14899695
> 
> 赞同：1
> 
> 时间：2013-02-15T17:04:43.900
> 
> 标签：class, conditional, sass

有谁知道这是否可能：

我希望我的品牌颜色是`$brand: #00cccc;`

但是，我只想在一个页面上更改它，并且该页面由其主体上的一个类定义。

```
body class="purple" 
```

现在我的想法是，这将是理想的：

```
body.$class { 
    @if $class == 'purple'
    { 
        $brand = #ff0033;
    }
    @else 
    {
        $brand = #00cccc;
    }
} 
```

但这根本不是正确的语法。

这是可以以类似方式完成的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:34:06.277

我相信你正在寻找这样的东西？

```
@each $class in purple, none {
  $brand: #00cccc;
  $selector: 'body';
  @if $class == purple {
    $brand: #ff0033;
    $selector: 'body.' + $class;
  }
  #{$selector}{
    /* Use $brand */
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:17:17.427

我不相信您可以为此创建@if 语句。在 LESS 中，您可以在内部重新声明相同的变量`body.purple`，它只适用于该块内，但在 Sass/Scss 中重新声明变量将全局更改它。这可能并不理想，但您可以重新声明变量两次，一次在顶部用于紫色，一次在底部将其设置回默认值。

**scss**

```
// Global Variables
$blue: #0cc;
$purple: #f03;
$brand: $blue;

body {
    color: $brand; // blue
}

.purple {
    $brand: $purple;

    color: $brand; // now purple
    // all other styles

    $brand: $blue;
}

.test {
    color: $brand; // back to blue
} 
```

**css 输出**

```
body {
  color: #00cccc;
}

.purple {
  color: #ff0033;
}

.test {
  color: #00cccc;
} 
```

这是一篇关于 LESS 和 Sass 之间的变量范围差异的文章。[http://blog.freeside.co/post/41774744757/less-vs-sass-variable-scopes](http://blog.freeside.co/post/41774744757/less-vs-sass-variable-scopes)

# php - 如何使用 for each 创建关联数组？

> ID：14899698
> 
> 赞同：0
> 
> 时间：2013-02-15T17:04:52.010
> 
> 标签：php, arrays

我正在选择复选框并希望将当前页码`$_GET['page_no']`作为索引保存在关联数组中，但只有 1 个值进入，为什么没有其他值？

```
$pageno = $_GET['page_no']; //Say page no is 1
$_SESSION['selected_vals'] = array();
foreach($_POST['record_num'] as $throw_rec_nums) {
    $_SESSION['selected_vals'][$pageno] = $throw_rec_nums;
} 
```

我的期望

```
$_SESSOION['selected_val'] (
   [1] => 24
   [1] => 46
   [1] => 56
) 
```

但即使选择了 3 个复选框，我也只能得到 24 个

> 注意：$_GET['page_no'] 作为数组返回

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:09:28.393

`$pageno`没有增加。为了将多个值添加到数组中，它需要在循环中递增。

解决方案类似于：

```
$_SESSION['selected_vals'][$pageno][] = $throw_rec_nums; 
```

这样，所有记录号都将保存到指定页码的数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T17:10:20.350

只有 1 个值进入，因为您要在 foreach 的每个循环中替换 $_SESSION['selected_vals'][$pageno] 值。

尝试创建一个计数器来索引它

这是一个选择

```
$_SESSION['selected_vals'] = array();
$_SESSION['selected_vals'][$pageno] = array();
foreach($_POST['record_num'] as $throw_rec_nums) {
    $_SESSION['selected_vals'][$pageno][] = $throw_rec_nums;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:08:21.150

您不能将数组用作数组索引。您也必须遍历 $pageno，例如使用 next()：

```
$array[current($pageno)] = ...;
next($pageno); 
```

请注意，这仅在您确保 rt $pageno 实际上是一个数组并包含足够的元素时才有效。

# sinatra - 在 Sinatra 中使用 Sprockets 从子目录提供资产

> ID：14899699
> 
> 赞同：1
> 
> 时间：2013-02-15T17:04:51.650
> 
> 标签：sinatra, sprockets

我有一个 Sinatra 应用程序，我从`/assets`. 工作得很好，但由于我有点完美主义者，为了尽可能保持整洁，我希望从它们各自的子目录中提供资产。
即我想`#{root}/app/assets/stylesheets/application.css.scss`成为`/assets/stylesheets/application.css`，而不是`/assets/application.css`像现在这样。

这可能吗？Middleman 做了类似的事情，但我不确定它实际上在多大程度上依赖 Sprockets。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:23:26.043

[Middleman](http://middlemanapp.com/)是一个*静态*站点生成器，因此资产被预编译并像在[公共目录](http://www.sinatrarb.com/intro#Static%20Files)中一样提供服务，这意味着您可以拥有一个子目录，`stylesheets`它将成为用于访问子目录中资产的 url 的一部分。

[Sprockets](https://github.com/sstephenson/sprockets)在访问资产时对其进行编译，然后缓存它们（据我所知），并使用[Rack 应用程序](https://github.com/sstephenson/sprockets/blob/master/lib/sprockets/server.rb)从它们的*逻辑路径*中提供资产。来自 Sprockets 自述文件：

> 逻辑路径是资产源文件相对于加载路径中包含目录的路径。例如，如果您的加载路径包含目录 app/assets/javascripts：
> 
> 资产源文件 | 逻辑路径
> app/assets/javascripts/application.js | application.js
> app/assets/javascripts/models/project.js | 模型/project.js

我没有在文档中看到明显的更改设置，除非您愿意查看源代码并稍微修改一下，否则我会说答案是否定的。也许您可以尝试缩短加载路径并查看它是否包含子目录？

# java - Java屏幕抓取，如何从重定向发布请求中获得响应

> ID：14899700
> 
> 赞同：0
> 
> 时间：2013-02-15T17:04:56.443
> 
> 标签：java, screen-scraping, jsoup

我只是在用java做数据提取的事情，在这个论坛搜索，发现它被称为屏幕抓取。我一直在寻找 java 的屏幕刮板库，并找到 JSoup 来解析结果。

我的问题是目标网站在提交搜索表单时使用 post 方法，它不容易重新生成它，我也使用 chrome 中的开发人员工具检查提交操作后的响应代码是 302 并重定向到某个页面，然后再次重定向到结果页面。

请有人给我一个提示或指向我如何使用 jsoup 的教程。就我而言，我尝试从 ai*ras*ia.*com 检索航班时刻表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:18:50.493

在 JSOUP 中有一个名为 .followRedirects(followRedirects) 的函数，它可以让您选择是否要跟踪重定向，默认情况下它设置为“true”。

这些是它允许重定向的 HTTP 代码：

*   301 - HTTP_MOVED_PERM
*   302 - HTTP_MOVED_TEMP
*   303 - HTTP_SEE_OTHER

# mysql - 包含加密数据的 BLOB 上的索引

> ID：14899704
> 
> 赞同：0
> 
> 时间：2013-02-15T17:05:06.957
> 
> 标签：mysql, encryption, indexing, blob, aes

我在一个表中有一堆 BLOB 类型的列。这些列中包含的数据使用 MySQL 的 AES_ENCRYPT() 函数进行加密。其中一些字段正在我正在构建的应用程序的搜索部分中使用。在经常访问的列上放置索引是否值得？我不确定它们是 BLOB 的事实或数据本身已加密的事实是否会使索引无用。

编辑：这里有一些关于我的具体案例的更多细节。有一个大约 10 列左右的表，每个 BLOB。插入此表的每条记录都将使用 AES_ENCRYPT() 函数进行加密。在我的应用程序的搜索部分，用户将能够输入他们的查询。我接受他们的查询并像这样解密它，`SELECT AES_DECRYPT(fname MYSTATICKEY) AS fname FROM some_table`以便我可以使用 LIKE 子句执行搜索。我很好奇的是索引是否会索引加密数据而不是解密返回的实际数据。我猜如果索引仅应用于加密的二进制字符串，那么它根本不会帮助性能。我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:22:01.333

请注意以下事项：

*   您不能将索引类型添加`FULLTEXT`到 BLOB 列（[http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)）
*   因此，您将需要使用另一种类型的索引。对于 BLOB，您必须指定前缀长度 ( [http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html) ) - 长度将取决于存储引擎（例如最多 1000 MyISAM 表为字节长，InnoDB 表为 767 字节）。因此，除非您存储的值很短，否则您将无法索引所有数据。
*   AES_ENCRYPT() 加密一个字符串并返回一个二进制字符串。这个二进制字符串将是被索引的值。

因此，IMO，您的猜测是正确的——索引无助于您的搜索性能。

请注意，“为加密列编制索引”是一个相当普遍的问题——网上关于它的文章很少。例如（虽然这已经很老了，对于 MS SQL 它确实涵盖了一些想法）：http: [//blogs.msdn.com/b/raulga/archive/2006/03/11/549754.aspx](http://blogs.msdn.com/b/raulga/archive/2006/03/11/549754.aspx)

另请参阅：[存储加密客户数据并仍为其编制索引的最佳方式是什么？](https://stackoverflow.com/questions/4961603/whats-the-best-way-to-store-and-yet-still-index-encrypted-customer-data)（最佳答案链接到我在上面找到的同一篇文章）

# sql-server - 在 SQL Server 中更新部分字符串

> ID：14899705
> 
> 赞同：1
> 
> 时间：2013-02-15T17:05:07.827
> 
> 标签：sql-server, sql-update

我需要更新 SQL Server 中的部分字符串。

我有：

```
ID   IDCityVisited   Names                    
1    10              Julya,Matheus,Donovan    
2    15              Mary,Donovan,Richard
3    20              John,Bob,Andy 
```

我需要更新仅更改并保持所有剩余字符串不变的`Names`列。`Donovan``Paul`

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T19:27:19.647

正如@Pondlife 指出的那样，这很有效：

```
UPDATE myTable
SET Names= REPLACE(Names, 'Donovan', 'Paul')
WHERE Names LIKE '%Donovan%' 
```

谢谢大家

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T17:09:18.090

你需要更新你的表

```
UPDATE tblName
SET Names = REPLACE(Names,'Donovan','Paul') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T17:07:38.920

```
UPDATE table SET names = REPLACE(names,'Donovan','Paul') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T17:07:12.660

我认为您需要非常认真地学习 SQL Server 入门课程。

这就是你想要做的。一个简单的替换功能将适用于您的问题。

此查询将过滤 Id = 2 的记录，然后替换函数将用 Paul 替换 Donovan。

```
Update TableName
set Names = replace(Names,'Donovan','Paul')
where Id = 2 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T17:09:32.833

尝试这个：

```
UPDATE
Tbl
SET Names = REPLACE(Names, 'Donovan','Paul')
WHERE PATINDEX('% Donovan %', Names) != 0 
```

**[替换 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186862.aspx)**

**[PATINDEX (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188395.aspx)**

或者这个，如果你有全文索引`Names`

```
UPDATE
Tbl
SET Names = REPLACE(Names, 'Donovan','Paul')
WHERE CONTAINS(Names, 'Donovan') 
```

**[包含 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187787.aspx)**

# linux - 使用 AWK 将 CSV 文件中的值除以某个数字

> ID：14899706
> 
> 赞同：2
> 
> 时间：2013-02-15T17:05:22.497
> 
> 标签：linux, bash, awk

我有一个这样的 CSV 文件（100 列）

```
 10,20,30,40,50,...,1000
  20,30,40,50,60,...,1010
  .
  .
  . 
```

我想将所有值除以 10，这样我就可以得到

```
 1,2,3,4,5,...,100
  2,3,4,5,6,...,101
  .
  .
  . 
```

我怎样才能用 AWK 做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:10:43.067

使用以下 awk 命令：

```
awk 'BEGIN {FS=OFS=","} {for (i=1; i<=NF; i++) $i/=10;}1' infile 
```

# c++ - Ncurses：面板的 doupdate() 和 refresh() 之间的区别

> ID：14899708
> 
> 赞同：3
> 
> 时间：2013-02-15T17:05:27.517
> 
> 标签：c++, c, ncurses

`doupdate()`和 和有什么不一样`refresh()`？

似乎`refresh ()`可以替换为，但是除非被调用`doupdate()`，否则不会出现文本。`refresh()`

此外，是否`refresh()`刷新所有窗口，或者应该`refresh()`为面板内的每个窗口调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:31:21.350

来自 Dan Gookin 的[*NCurses 程序员指南*](http://books.google.com/books/about/Programmer_s_Guide_to_NCurses.html?id=Htff8VRO-UEC&redir_esc=y)（第 513 页）：

> NCurses 中的刷新操作由两部分组成：
> 
> *   首先，NCurses 获取窗口中已更改或触摸的那些部分，并将这些部分从窗口数据
>     结构中写入内存中的虚拟屏幕。
> *   其次，在终端上显示自上次刷新后触摸的虚拟屏幕的内容。
> 
> 将信息从窗口数据结构复制到虚拟屏幕是由 wnoutrefresh() 函数执行的。将虚拟屏幕更新到终端由另一个函数 doupdate() 处理。它们一起构成了 refresh() 或 wrefresh() 调用的两个组成部分。
> 
> 更新多个窗口时，使用 wnoutrefresh() 的优势就来了。在这种情况下，重复调用 wnoutrefresh() 之后再调用一次 doupdate() 比调用一系列 wrefresh() 更有效，而且闪烁更少。

就面板而言，它们是窗口的一种包装器（因此每个面板只有一个窗口）。`update_panels()`调用（以面板给出的正确堆叠顺序将窗口写入虚拟屏幕）然后`doupdate()`将虚拟屏幕输出到终端就足够了。

如果您想进一步划分面板，请考虑使用子窗口。

# tortoisesvn - 查找签出的 svn 存储库的位置

> ID：14899709
> 
> 赞同：0
> 
> 时间：2013-02-15T17:05:30.017
> 
> 标签：tortoisesvn

我正在尝试编写一个 bash 脚本来创建存储库上特定文件夹的快捷方式。问题是我想在我自己以外的计算机上运行它，但是这个存储库的签出位置的位置因计算机而异。有没有办法找出每台计算机的位置。

视窗 7 专业版

TortoiseSVN 1.7.10，内部版本 23359 - 64 位，2012/10/08 11:46:26

颠覆 1.7.7，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:14:28.733

您可以通过右键单击计算机，单击“高级系统设置”并在结果对话框中选择“环境变量”按钮，在 Windows 7 上创建自定义环境变量，例如 MY_SVN_PROJECT_DIRECTORY。然后让您的 bash 脚本在创建快捷方式时检查该变量的值。

# javascript - 图像损坏或截断 Phonegap

> ID：14899712
> 
> 赞同：-1
> 
> 时间：2013-02-15T17:05:39.980
> 
> 标签：javascript, mysql, cordova, camera

我正在使用 Phonegap 开发一个 android 应用程序。用户拍照，照片存储在 mysql 数据库中（medium-blob 列）。我使用简单的 INSERT INTO 查询存储它们，而不更改数据。使用 REST 调用 (PUT) 将数据发送到服务器端

以下是本专栏内容的示例：

```
thumb = '/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDACgcHiMeG...' 
```

phonegap 文档上写着，通过相机捕获的图像以 base 64 编码。问题是，当我尝试在数据库中检索图像时，我无法使用以下 JS 代码显示它们：

```
$('#myImg').attr("src", "data:image/png;base64," + data 
```

关于这个“图像损坏和截断”来自哪里的任何想法？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:36:44.097

问题出在我发送图像的方式上。我通过字符串发送数据。我试图将它们嵌套在一个 json 对象中并且它起作用了。

# mysql - 使用 PostgreSQL 进行全文搜索是否需要thinking-sphinx？

> ID：14899716
> 
> 赞同：1
> 
> 时间：2013-02-15T17:05:52.320
> 
> 标签：mysql, ruby-on-rails-3, postgresql, thinking-sphinx

我在 Rails 3 应用程序中使用了thinking-sphinx（以及 Heroku 上的 fly-sphinx）和 mySQL。现在我迁移到 PostgreSQL，我想知道：

*   我需要thinking-sphinx 还是可以在PostgreSQL 上实现所有thinking-sphinx 函数？

*   什么thinking-sphinx 可以做我不能用PostgreSQL 做的，因为后者也支持全文搜索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T17:13:22.177

PostgreSQL 确实支持全文搜索索引，但 Sphinx 更快。它已经有几年的历史了，但您可以查看我的演示文稿[Full Text Search In PostgreSQL](http://www.slideshare.net/billkarwin/full-text-search-in-postgresql)，其中我比较了几种解决方案。

使用 PostgreSQL FTS 的优点：

*   它是内置的，无需运行其他技术。
*   索引自动与您的数据同步，无需定期将数据导入索引。
*   更容易支持增量更新。

使用 Sphinx 搜索的优势：

*   更好的底线查询性能。
*   索引更容易理解。
*   从 RDBMS 卸载搜索流量，因此理论上您可以更轻松地扩展。

# android - 如何将稀疏数组存储在包中

> ID：14899718
> 
> 赞同：7
> 
> 时间：2013-02-15T17:05:57.203
> 
> 标签：android, android-activity, bundle, sparse-array

我有一个`SparseArray<myObject>`并且想将它存储`onSaveInstanceState`在我的活动中的 bundle in 方法中并将其恢复为`oncreate`. 我找到`putSparseParcelableArray`了将 SparseArray 放入捆绑包中的方法，并在`onSaveInstanceState`方法中执行了此操作：

```
bundle.putSparseParcelableArray("mySparseArray", mySparseArray); 
```

但是 eclips 显示了这个错误：

```
The method putSparseParcelableArray(String, SparseArray<? extends Parcelable>) in the type Bundle is not applicable for the arguments (String, SparseArray<myObject>) 
```

快速解决方法是将参数`mySparsArray`转换为`SparseArray<? extends Parcelable>`，但如果我这样做并在 onCreate 方法中获取它：

```
mySparseArray = (SparseArray<myObject>) savedInstanceState.getSparseParcelableArray("mySparseArray"); 
```

它得到这个错误：

```
Cannot cast from SparseArray<Parcelable> to SparseArray<myObject> 
```

如果这种方式是错误的，将 mySparseArray 放入 bundle 的解决方案是什么？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-05T10:42:29.323

您可以扩展 SpasArray 以实现 Serializable 作为使用它：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import android.util.SparseArray;

/**
 * @author Asaf Pinhassi www.mobiledev.co.il
 * @param <E>
 *
 */
public class SerializableSparseArray<E> extends SparseArray<E> implements Serializable{

    private static final long serialVersionUID = 824056059663678000L;

    public SerializableSparseArray(int capacity){
        super(capacity);
    }

    public SerializableSparseArray(){
        super();
    }

    /**
     * This method is private but it is called using reflection by java
     * serialization mechanism. It overwrites the default object serialization.
     *
     * <br/><br/><b>IMPORTANT</b>
     * The access modifier for this method MUST be set to <b>private</b> otherwise {@link java.io.StreamCorruptedException}
     * will be thrown.
     *
     * @param oos
     *            the stream the data is stored into
     * @throws IOException
     *             an exception that might occur during data storing
     */
    private void writeObject(ObjectOutputStream oos) throws IOException {
        Object[] data = new  Object[size()];

        for (int i=data.length-1;i>=0;i--){
            Object[] pair = {keyAt(i),valueAt(i)}; 
            data[i] = pair;
        }
        oos.writeObject(data);
    }

    /**
     * This method is private but it is called using reflection by java
     * serialization mechanism. It overwrites the default object serialization.
     *
     * <br/><br/><b>IMPORTANT</b>
     * The access modifier for this method MUST be set to <b>private</b> otherwise {@link java.io.StreamCorruptedException}
     * will be thrown.
     *
     * @param oos
     *            the stream the data is read from
     * @throws IOException
     *             an exception that might occur during data reading
     * @throws ClassNotFoundException
     *             this exception will be raised when a class is read that is
     *             not known to the current ClassLoader
     */
    private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException {
        Object[] data = (Object[]) ois.readObject();
        for (int i=data.length-1;i>=0;i--){
            Object[] pair = (Object[]) data[i]; 
            this.append((Integer)pair[0],(E)pair[1]);
        }
        return;
    }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T17:32:50.890

你的类应该实现`Parcelable`并且应该有一个名为`CREATOR`type的静态最终成员变量`Parcelable.Creator<myObject>`。

# windows-phone-7 - 故事板不能执行两次

> ID：14899721
> 
> 赞同：0
> 
> 时间：2013-02-15T17:06:07.670
> 
> 标签：windows-phone-7, windows-phone-8

我尝试在我的应用程序中使用动画，我只使用两个页面来测试动画。

当应用程序第一次启动时，我想用滑动效果为我的应用程序标题设置动画。标题应该来自页面之外。

我使用了以下代码：

```
 <StackPanel x:Name="TitlePanel"
                Grid.Row="0"
                Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle"
                   Text="{Binding LocalizedResources.ApplicationTitle, Source={StaticResource LocalizedStrings}}"
                   Style="{StaticResource PhoneTextNormalStyle}" RenderTransformOrigin="0.5,0.5" >
            <TextBlock.RenderTransform>
                <CompositeTransform x:Name="ApplicationTitleTransIn" TranslateX="-200"/>
            </TextBlock.RenderTransform>
            <TextBlock.Triggers>
                <EventTrigger RoutedEvent="TextBlock.Loaded">
                    <BeginStoryboard>
                        <Storyboard BeginTime="00:00:0.5">
                            <DoubleAnimation Duration="00:00:0.7"
                        Storyboard.TargetName="ApplicationTitleTransIn" 
                        Storyboard.TargetProperty="TranslateX" 
                        From="-200" To="0">
                                <DoubleAnimation.EasingFunction>
                                    <BackEase EasingMode="EaseOut"/>
                                </DoubleAnimation.EasingFunction>
                            </DoubleAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </TextBlock.Triggers>
        </TextBlock>
    </StackPanel> 
```

而且效果很好。

当我单击一个按钮时，我的应用程序标题应该移动到我的页面的右侧，然后应该显示第二个页面。

我创建了以下故事板：

```
<phone:PhoneApplicationPage.Resources>
<Storyboard x:Name="ApplicationTitleTransOut">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="ApplicationTitle">
            <EasingDoubleKeyFrame KeyTime="0" Value="0">
                <EasingDoubleKeyFrame.EasingFunction>
                    <ExponentialEase EasingMode="EaseIn"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="600">
                <EasingDoubleKeyFrame.EasingFunction>
                    <ExponentialEase EasingMode="EaseIn"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</phone:PhoneApplicationPage.Resources> 
```

在后面的代码中，情节提要执行如下：

```
 ApplicationTitleTransOut.Completed += delegate
            {
                ApplicationTitleTransOut.Stop();

                var vm = DataContext as MainViewModel;

                if (vm != null)
                {
                    vm.OpenPageCommand.Execute(listBox.SelectedItem as TileItem);
                }
            };

        ApplicationTitleTransOut.Begin(); 
```

文本将移动到我页面的右侧，然后我将导航到第二页。

直到现在一切正常。

但是当我按下后退按钮（在电话上）时，我有一个例外。

```
ExceptionObject = {System.InvalidOperationException: Cannot resolve TargetName ApplicationTitleTransIn.} 
```

我错过了什么？这是实现这个动画的正确方法吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:53:01.163

在您的情况下，我会以不同的方式构建 XAML 布局。首先，您似乎不需要`CompositeTransform`，而只是`TranslateTransform`。在这种情况下，请将此代码段用于`RenderTransform`：

```
<TextBlock.RenderTransform>
        <TranslateTransform x:Name="ApplicationTitleTransIn" X="-200"/>
</TextBlock.RenderTransform> 
```

现在，当您将其绑定`DoubleAnimation`到它时，请使用相关属性约定：

```
<DoubleAnimation Duration="00:00:0.7"
Storyboard.TargetName="ApplicationTitle"
Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" 
From="-200" To="0"> 
```

同样适用于您的`DoubleAnimationUsingKeyFrames`：

```
<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"  Storyboard.TargetName="ApplicationTitle"> 
```

奇迹般有效。

# ruby-on-rails - 什么时候是测试与 Shoulda 关联的好时机？

> ID：14899726
> 
> 赞同：1
> 
> 时间：2013-02-15T17:06:28.047
> 
> 标签：ruby-on-rails, rspec, shoulda

使用 RSpec 和 Shoulda，您可以：

```
it { should belong_to(:product) } 
```

我被告知规范应该指定观察到的行为。该规范看起来也确实像可以在模型中编写的代码的重复。那么有没有时间和地点来实际使用这样的测试呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:29:26.277

更大的问题是，为什么测试这个不好？如果您被告知规范应该指定观察到的行为，并且具有`belongs_to`自动为它提供访问关联的方法的模型，那不是要观察的东西吗？您*可以*改为测试该`#product`方法，但该测试将如何进行？

```
it "has an association to a product" do
  product = Product.create
  model = Model.create(:product_id => product.id)
  model.product.should eq product
end 
```

这真的比仅使用单衬管更好吗？

```
it { should belong_to(:product) } 
```

如果代码在任何方面都很重要，您应该对其进行测试。

此外，如果您遵循 TDD，您将首先编写测试以指定必须存在关联，然后放入代码以维护该测试。

# c++ - 我可以使用 reinterpret_cast 将指向成员函数的指针转换为 char 数组并返回吗？

> ID：14899730
> 
> 赞同：1
> 
> 时间：2013-02-15T17:06:38.410
> 
> 标签：c++, c++11, reinterpret-cast

我有一些看起来像这样的代码：

```
char member_data[16];

template<typename T>
void set(void (T::*member)(void)) {
    memcpy(member_data, (char*) &member, sizeof(member));
}

template<typename T>
void (T::*)(void) get() {
    void (T::*member)(void);
    memcpy((char*) &member, member_data, sizeof(member));
    return member;
} 
```

^(在完整的上下文中，我可以确定`set`始终使用与以下相同的类型`get`。)

这可以安全地重写使用`reinterpret_cast`吗？

## 编辑：

这段代码和上面做的一样吗？

```
char member_data[16];

template<typename T>
using member_func = void (T::*)();

template<typename T>
void set(member_func<T> member) {
    reinterpret_cast<member_func<T>&>(member_data) = member;
}

template<typename T>
member_func<T> get() {
    return reinterpret_cast<member_func<T>&>(member_data));
} 
```

[似乎工作](http://ideone.com/UKWszH)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:24:55.290

您在编辑部分中拥有的版本无效：您不能像访问任何其他类型一样访问*任意数组。* `char`可以通过使用`std::aligned_storage<..>`而不是普通`char`数组以有效的方式实现类似的效果。

如果`member_data`声明为

```
std::aligned_storage<sizeof(member_func<T>), alignof(member_func<T>)>::type member_data; 
```

或（基本上等价）

```
alignas(member_func<T>) char member_data[sizeof(member_func<T>)]; 
```

那么你的`reinterpret_cast<..>`方法应该真的有效。您可以尝试使用任何固定`sizeof`的. 对于指向不同类的成员函数的指针，实现具有不同大小或对齐要求的可能性极小。如果您想真正安全，请使用静态断言进行检查。`alignof``member_func<some_class>`

> 这可以安全地重写以使用 reinterpret_cast 吗？

除了编辑中描述的内容外，您可以直接转换成员函数指针，例如`reinterpret_cast<SomeType>(member)`, only，如果`SomeType`也是指向成员的指针类型。因此，您**可以**选择一种指向成员函数的类型作为“通用成员函数指针存储”，如果您对该值所做的只是将其转换回原始成员指针类型。

您不能将指向成员的指针转换为指向对象的指针（反之亦然）。

在这两种情况下，您的代码都是不安全的，因为`member_data`如果`sizeof (void (T::*)()) > 16`.

顺便说一句：第一个代码示例已经*使用*了`reinterpret_cast`：旧式转换到`(char*)`from`void (T::**)()`已经等同于 a `reinterpret_cast`;-)

# sqlite - sqlite中的randomblob（N）

> ID：14899732
> 
> 赞同：0
> 
> 时间：2013-02-15T17:06:40.183
> 
> 标签：sqlite, byte, blob, uniqueidentifier

文档 ( [http://www.sqlite.org/lang_corefunc.html](http://www.sqlite.org/lang_corefunc.html) ) 说它生成一个 N 字节的 blob，然后给出了一个使用`randomblob(16)`with`hex()`生成**唯一 id**的示例。

但是对于大多数数据库来说，randomblob(8) 还不够。8 个字节给出 64 位，这将给出 2^64 个不同的可能值（将通过 转换为十六进制格式`hex(randomblob(8)`）。为什么要在这里浪费额外的 8 个字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:13:57.470

[GUID](http://en.wikipedia.org/wiki/GUID)被定义为具有 128 位。

# html - 使用 Lua 对数字 XML 实体进行转义

> ID：14899734
> 
> 赞同：3
> 
> 时间：2013-02-15T17:06:45.567
> 
> 标签：html, xml, lua, html-entities, xml-entities

什么是取消转义数字 HTML/XML 实体的好实现，例如`&#10;`并用 ASCII 等价物替换它们？

表示为单元测试：

```
local orig = "It&#039;s the &#34;end&#34; &ok;&#10;"
local fixd = unescape(orig) -- Implement this
assert( fixd == "It's the \"end\" &ok;\n" ) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T17:06:45.567

这是一个简单的实现，它也处理核心命名的 XML 实体：

```
function unescape(str)
  str = string.gsub( str, '&lt;', '<' )
  str = string.gsub( str, '&gt;', '>' )
  str = string.gsub( str, '&quot;', '"' )
  str = string.gsub( str, '&apos;', "'" )
  str = string.gsub( str, '&#(%d+);', function(n) return string.char(n) end )
  str = string.gsub( str, '&#x(%d+);', function(n) return string.char(tonumber(n,16)) end )
  str = string.gsub( str, '&amp;', '&' ) -- Be sure to do this after all others
  return str
end

print(unescape("&#34;Hello&quot; &apos;World&#39;")) --> "Hello" 'World' 
```

但是，请注意，这对于一种病态情况会失败：数字 & 实体后跟文本`amp;`：

```
print(unescape("Ampersand entity is &#38;amp;")) --> Ampersand entity is &
-- The result should actually be                     Ampersand entity is &amp; 
```

我们可以通过一次处理所有实体来解决这种极端情况，但是代码变得更丑陋了一点：

```
function unescape(str)
  local map={ ["lt"]="<", ["gt"]=">", ["amp"]="&", ["quot"]='"', ["apos"]="'" }
  str = string.gsub( str, '(&(#?x?)([%d%a]+);)', function(orig,n,s)
    return (n=='' and map[s])
           or (n=="#x" and tonumber(s,16)) and string.char(tonumber(s,16))
           or (n=="#" and tonumber(s)) and string.char(s)
           or orig
  end )
  return str
end

print(unescape("Ampersand entity is &#38;amp;")) --> Ampersand entity is &amp; 
```

最后，我们可以更快地打开它：

```
local gsub, char = string.gsub, string.char
local entityMap  = {["lt"]="<",["gt"]=">",["amp"]="&",["quot"]='"',["apos"]="'"}
local entitySwap = function(orig,n,s)
  return (n=='' and entityMap[s])
         or (n=="#" and tonumber(s)) and string.char(s)
         or (n=="#x" and tonumber(s,16)) and string.char(tonumber(s,16))
         or orig
end
function unescape(str)
  return (gsub( str, '(&(#?x?)([%d%a]+);)', entitySwap ))
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T13:36:42.053

对于在下载法语 html 内容时可能需要转义重音的少数程序员，这里是上述功能的更广泛版本。

```
local function unescape(str)
    str = string.gsub( str, '&nbsp;', ' ')
    str = string.gsub( str, '&iexcl;', '¡')
    str = string.gsub( str, '&cent;', '¢')
    str = string.gsub( str, '&pound;', '£')
    str = string.gsub( str, '&curren;', '¤')
    str = string.gsub( str, '&yen;', '¥')
    str = string.gsub( str, '&brvbar;', '¦')
    str = string.gsub( str, '&sect;', '§')
    str = string.gsub( str, '&uml;', '¨')
    str = string.gsub( str, '&copy;', '©')
    str = string.gsub( str, '&ordf;', 'ª')
    str = string.gsub( str, '&laquo;', '«')
    str = string.gsub( str, '&not;', '¬')
    str = string.gsub( str, '&shy;', '­')
    str = string.gsub( str, '&reg;', '®')
    str = string.gsub( str, '&macr;', '¯')
    str = string.gsub( str, '&deg;', '°')
    str = string.gsub( str, '&plusmn;', '±')
    str = string.gsub( str, '&sup2;', '²')
    str = string.gsub( str, '&sup3;', '³')
    str = string.gsub( str, '&acute;', '´')
    str = string.gsub( str, '&micro;', 'µ')
    str = string.gsub( str, '&para;', '¶')
    str = string.gsub( str, '&middot;', '·')
    str = string.gsub( str, '&cedil;', '¸')
    str = string.gsub( str, '&sup1;', '¹')
    str = string.gsub( str, '&ordm;', 'º')
    str = string.gsub( str, '&raquo;', '»')
    str = string.gsub( str, '&frac14;', '¼')
    str = string.gsub( str, '&frac12;', '½')
    str = string.gsub( str, '&frac34;', '¾')
    str = string.gsub( str, '&iquest;', '¿')
    str = string.gsub( str, '&Agrave;', 'À')
    str = string.gsub( str, '&Aacute;', 'Á')
    str = string.gsub( str, '&Acirc;', 'Â')
    str = string.gsub( str, '&Atilde;', 'Ã')
    str = string.gsub( str, '&Auml;', 'Ä')
    str = string.gsub( str, '&Aring;', 'Å')
    str = string.gsub( str, '&AElig;', 'Æ')
    str = string.gsub( str, '&Ccedil;', 'Ç')
    str = string.gsub( str, '&Egrave;', 'È')
    str = string.gsub( str, '&Eacute;', 'É')
    str = string.gsub( str, '&Ecirc;', 'Ê')
    str = string.gsub( str, '&Euml;', 'Ë')
    str = string.gsub( str, '&Igrave;', 'Ì')
    str = string.gsub( str, '&Iacute;', 'Í')
    str = string.gsub( str, '&Icirc;', 'Î')
    str = string.gsub( str, '&Iuml;', 'Ï')
    str = string.gsub( str, '&ETH;', 'Ð')
    str = string.gsub( str, '&Ntilde;', 'Ñ')
    str = string.gsub( str, '&Ograve;', 'Ò')
    str = string.gsub( str, '&Oacute;', 'Ó')
    str = string.gsub( str, '&Ocirc;', 'Ô')
    str = string.gsub( str, '&Otilde;', 'Õ')
    str = string.gsub( str, '&Ouml;', 'Ö')
    str = string.gsub( str, '&times;', '×')
    str = string.gsub( str, '&Oslash;', 'Ø')
    str = string.gsub( str, '&Ugrave;', 'Ù')
    str = string.gsub( str, '&Uacute;', 'Ú')
    str = string.gsub( str, '&Ucirc;', 'Û')
    str = string.gsub( str, '&Uuml;', 'Ü')
    str = string.gsub( str, '&Yacute;', 'Ý')
    str = string.gsub( str, '&THORN;', 'Þ')
    str = string.gsub( str, '&szlig;', 'ß')
    str = string.gsub( str, '&agrave;', 'à')
    str = string.gsub( str, '&aacute;', 'á')
    str = string.gsub( str, '&acirc;', 'â')
    str = string.gsub( str, '&atilde;', 'ã')
    str = string.gsub( str, '&auml;', 'ä')
    str = string.gsub( str, '&aring;', 'å')
    str = string.gsub( str, '&aelig;', 'æ')
    str = string.gsub( str, '&ccedil;', 'ç')
    str = string.gsub( str, '&egrave;', 'è')
    str = string.gsub( str, '&eacute;', 'é')
    str = string.gsub( str, '&ecirc;', 'ê')
    str = string.gsub( str, '&euml;', 'ë')
    str = string.gsub( str, '&igrave;', 'ì')
    str = string.gsub( str, '&iacute;', 'í')
    str = string.gsub( str, '&icirc;', 'î')
    str = string.gsub( str, '&iuml;', 'ï')
    str = string.gsub( str, '&eth;', 'ð')
    str = string.gsub( str, '&ntilde;', 'ñ')
    str = string.gsub( str, '&ograve;', 'ò')
    str = string.gsub( str, '&oacute;', 'ó')
    str = string.gsub( str, '&ocirc;', 'ô')
    str = string.gsub( str, '&otilde;', 'õ')
    str = string.gsub( str, '&ouml;', 'ö')
    str = string.gsub( str, '&divide;', '÷')
    str = string.gsub( str, '&oslash;', 'ø')
    str = string.gsub( str, '&ugrave;', 'ù')
    str = string.gsub( str, '&uacute;', 'ú')
    str = string.gsub( str, '&ucirc;', 'û')
    str = string.gsub( str, '&uuml;', 'ü')
    str = string.gsub( str, '&yacute;', 'ý')
    str = string.gsub( str, '&thorn;', 'þ')
    str = string.gsub( str, '&yuml;', 'ÿ')
    str = string.gsub( str, '&euro;', '€')
    str = string.gsub( str, '&#(%d+);', function(n) return string.char(n) end )
    str = string.gsub( str, '&#x(%d+);', function(n) return string.char(tonumber(n,16)) end )
    str = string.gsub( str, '&amp;', '&' ) -- Be sure to do this after all others
    return str
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-11T22:26:44.970

现在通过 LuaRocks 可以使用[htmlEntities-for-lua](https://github.com/TiagoDanin/htmlEntities-for-lua)模块，你应该使用它。它只在代码中使用了 3 次 string.gsub 迭代，因此它更快*更*完整。

```
htmlEntities = require('htmlEntities')

print(htmlEntities.decode(yourString)) 
```

或者将其用作当前功能的替代品：

```
myUnescape = require('htmlEntities').decode 
```

# java - JPA @JoinTable - 三个 ID 列

> ID：14899736
> 
> 赞同：2
> 
> 时间：2013-02-15T17:06:46.177
> 
> 标签：java, hibernate, unique-constraint, multiple-columns, jointable

我的情况与此问题图表中概述的情况非常相似：[JPA。JoinTable 和两个 JoinColumns](https://stackoverflow.com/questions/8572072/jpa-jointable-and-two-joincolumns)，虽然有不同的问题。

我有三个表：`Function`、`Group`和`Location`。`Location`目前，我在`Group`. `@JoinTable`它`@ManyToMany`在两侧，并且工作得很好。

我正在尝试添加 no`Location`应该与多个`Group`具有相同`Function`. 因此`Function`，我在我的 SQL 模式中为我的联接表添加了一个列，并在`Location`和`Function`列之间添加了唯一性约束，如下所示：

```
create table function_table (
  id varchar(50),
  primary key(id)
);

create table group_table (
  id varchar(50),
  function_id varchar(50) not null,
  primary key(id)
);

alter table group_table add constraint FK_TO_FUNCTION foreign key (function_id) references function_table;

create table location_table (
  id varchar(50),
  primary key(id)
);

create table group_location_join (
  location_id varchar(50) not null,
  group_id varchar(50) not null,
  function_id varchar(50) not null,
  primary key(location_id, group_id, function_id),
  unique(location_id, function_id)
);

alter table group_location_join add constraint FK_TO_LOCATION foreign key (location_id) references location_table;
alter table group_location_join add constraint FK_TO_GROUP foreign key (group_id) references group_table;
alter table group_location_join add constraint FK_TO_FUNCTION foreign key (function_id) references function_table; 
```

然后我尝试在我的模型实体中设置以下内容：

```
@Entity
@Table(name = "function_table")
public class Function {
  @Id
  @Column(name = "id", length = 50)
  private String id;
}

@Entity
@Table(name = "group_table")
public class Group {
  @Id
  @Column(name = "id", length = 50)
  private String id;

  @ManyToOne
  @JoinColumn(name = "function_id", referencedColumnName = "id", nullable = false)
  private Function function;

  @ManyToMany
  @JoinTable(name = "group_location_join",
    joinColumns = {@JoinColumn(name = "group_id", referencedColumnName = "id"),
                   @JoinColumn(name = "function_id", referencedColumnName = "function_id")},
    inverseJoinColumns = @JoinColumn(name="location_id", referencedColumnName = "id"))
  private Set<Location> locations;
}

@Entity
@Table(name = "location_table")
public class Location {
  @Id
  @Column(name = "id", length = 50)
  private String id;

  @ManyToMany
  @JoinTable(name = "group_location_join",
    joinColumns = @JoinColumn(name="location_id", referencedColumnName = "id")
    inverseJoinColumns = {@JoinColumn(name = "group_id", referencedColumnName = "id"),
                   @JoinColumn(name = "function_id", referencedColumnName = "function_id")})
  private Set<Group> groups;
} 
```

（显然，这些实体还有更多，但我将它们剥离为仅与此问题相关的部分。）

这不起作用。当我编写一个简单的测试来创建`Location`与 a`Group`关联的 a`Function`时，当我尝试刷新会话以提交事务时，Hibernate 给了我这个：

```
java.lang.ClassCastException: my.package.Group cannot be cast to java.io.Serializable 
```

我认为正在发生的事情是 Hibernate 感到困惑，举手说“我将序列化它，将它发送到数据库，并希望它知道发生了什么。”

当我添加`implements Serializable`并添加一个`serialVersionUID`to 时`Group`，我得到这个：

```
org.hibernate.exception.SQLGrammarException: user lacks privilege or object not found: FUNCTION_ID 
```

我现在不确定如何进行，或者我是否已经在错误的道路上走得太远了。也许我没有正确考虑 SQL，并且有一种更简单的方法可以确保这个约束不涉及所有这些荒谬。

**编辑：**在我的系统中，所涉及的表的 DAO 没有保存功能。这意味着只要在数据库中设置了我的约束，我的应用程序就不会关心；它不能插入违反约束的东西，因为它根本不能插入东西。

**编辑 2：**我最初从未解决过上述问题，而是在我的数据库模式中简单地添加了第三列，而不触及 Java 代码，如我上面的第一个**编辑**部分所述。但是我已经尝试使用`@Embedded`复合键创建一个显式连接表对象，并且它似乎有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:16:06.330

您正在尝试创建复合主键。在 Hibernate 中，您可以使用`@Embeddable`注释来完成。在下面的示例中，您可以找到对两个实体使用复合键的方法。

我相信您可以继续使用此示例并创建自己的主键版本。

[使用复合主键和注释映射 ManyToMany：](https://stackoverflow.com/questions/6405746/mapping-manytomany-with-composite-primary-key-and-annotation)

# c# - 使用问题，为什么我必须使用 global::MyName.SubName？

> ID：14899746
> 
> 赞同：1
> 
> 时间：2013-02-15T17:07:11.980
> 
> 标签：c#

我刚刚添加的解决方案中有一个库项目，每当我需要引用一个类/枚举时，我必须使用：

`using global::MyName.SubName;`

（Resharper 自动建议这一点）

为什么是这样？为什么我不能这样做：

```
using MyName.SubName; 
```

这是行不通的。即使这样做，我也会收到此错误：

```
Error   400 Member 'MyName.SubName.Enumerations.SomeEnum.SomeEnumName1' cannot be accessed with an instance reference; qualify it with a type name instead 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:34:20.890

我同意@kelsey 的观点，它看起来像是命名空间冲突。解决它的另一种方法是使用命名空间别名；

```
using MNSub = MyName.SubName

// ...else where in code
MNSub.MyType varName = new MNSub.MyType();    // etc. 
```

这至少给出了比`global::...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:13:58.873

我只能假设您`MyName.SubName`被其他东西隐藏（同名）。

有关详细信息，请参阅以下 MS 文章： [如何：使用全局命名空间别名](http://msdn.microsoft.com/en-us/library/c3ay4x3d.aspx)

我认为它解释了您遇到的情况。

> 当成员可能被另一个同名实体隐藏时，访问全局命名空间中的成员的能力很有用。

...

> 但是，在较大的项目中，命名空间重复很可能以一种或另一种形式发生。在这些情况下，全局命名空间限定符是您可以指定根命名空间的保证。

# c++ - 我得到分段错误而不是异常

> ID：14899749
> 
> 赞同：7
> 
> 时间：2013-02-15T17:07:15.270
> 
> 标签：c++, exception, exception-handling, segmentation-fault, try-catch

在下面的代码中，在第一次迭代中出现异常，在第二次迭代中出现分段错误，没有打印错误消息。似乎没有捕获异常：

```
int i = 0;
while(i++ < 10)
{
   try {
      cout << "Iteration: " << i << endl;
      // Code...
      cout << "OK" << endl;
   }
   catch(...)
   {
      cerr << "Error message" << endl;
      continue;
   }
}

Output:
Iteration 1
Error message
Iteration 2
Segmentation fault 
```

这是正常的，还是真的有什么不对劲？

如果它应该是相关的，在那个代码块中我重置了一个 MySQL 连接，当我检查连接是否关闭时会生成异常。

谢谢。

* * *

*平台：*
Linux - OpenSuse 11.4
C++ - GCC 4.5.1
Intel Xeon

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-15T17:33:56.293

由于段错误不是（直接）由软件引起的，而是由处理器检测到您正在尝试访问无效内存（或以无效方式访问内存 - 例如写入受写保护的内存，执行内存） t 应该被执行等），它不是“可捕获的” `try/catch`，它旨在捕获引发异常的软件。它们都称为异常，但它们起源于系统软件/硬件的不同级别。

从技术上讲，您可以使用`SIGSEGV`. 但是，正如 Ivaylo 解释的那样，如果您遇到段错误，通常不允许“重试”。的信号处理`SIGSEGV`程序允许`longjmp`or `exit`，但不应该只是返回。

Read more about signals here: [http://www.alexonlinux.com/signal-handling-in-linux](http://www.alexonlinux.com/signal-handling-in-linux)

Typical C++ exceptions (result of `throw`) can be retried without problem (of course, the same exception may be thrown again, of course.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T17:09:41.963

你无法捕捉到这样的分段错误。此错误通常是不可恢复的，通常的 try-catch 不会处理此错误。这意味着出现了**非常**错误的情况，可能是堆栈损坏或类似情况。尝试使用[valgrind](http://valgrind.org/)来检测导致分段错误的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:28:30.740

`catch``throw`子句捕获表达式抛出的异常。在标准 C++（以及任何正常的 C++ 实现中）中，它们**不会**捕获操作系统或硬件检测到的错误。否则，编写异常安全代码将变得非常困难。

# jquery - 特殊格式的有序列表

> ID：14899752
> 
> 赞同：-2
> 
> 时间：2013-02-15T17:07:23.137
> 
> 标签：jquery, html, css

我正在寻找一种智能方法来创建具有特定格式的嵌套有序列表：

```
1\. text
2\. text
 2.1 text
 2.2 text
 2.3 text
3\. text
4\. text
 4.1 text
 4.2 text
 4.3 text
5\. text 
```

我试图在那里使用类型 atrib ，但它没有让我到任何地方。我不需要缩进……但这会很好……

先谢谢了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:12:11.097

为此使用[计数器](http://www.w3.org/TR/CSS2/syndata.html#counter)

```
OL { counter-reset: item }
LI { display: block }
LI:before { content: counters(item, ".") " "; counter-increment: item } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:13:22.607

我们需要看到更多实际的 HTML。您可以使用 CSS 完成这种编号（子条款）。

```
ol.main > li {
   counter-increment: root;
}

ol.main > li > ol {
    counter-reset: subsection;
    list-style-type: none;
}

ol.main > li > ol > li {
    counter-increment: subsection;
}

ol.main > li > ol > li:before {
    content: counter(root) "." counter(subsection) " ";
} 
```

# android - Android：在动态创建的布局中查找片段

> ID：14899753
> 
> 赞同：1
> 
> 时间：2013-02-15T17:07:24.180
> 
> 标签：android, android-layout, android-fragments

我正在尝试获取我创建的 LinearLayout 中的片段：

**编辑：**这是在扩展的类中`ArrayAdapter<G>`

```
LinearLayout newView = new LinearLayout(getContext());
String inflater = Context.LAYOUT_INFLATER_SERVICE;
LayoutInflater li;
li = (LayoutInflater) getContext().getSystemService(inflater);
li.inflate(resource, newView, true); 
```

在布局中有一个名为 TableRowView 的片段：

**编辑：我更正了 XML 语法**

```
<fragment android:name ="mypackage.TableRowView"
    android:id="@+id/row"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

如何获取`newView`'s 片段？

在此先感谢，--大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:06:21.883

> 我正在尝试获取我创建的 LinearLayout 中的片段

片段不在`LinearLayout`. 片段不是 a`View`也不驻留在 a`ViewGroup`中。由`View`片段创建的`onCreateView()`将驻留在`ViewGroup`.

> 我正在尝试获取我创建的 LinearLayout 中的片段

尝试调用`findFragmentById()`，`FragmentManager`前提是您`newView`在充气操作之前设置了一个 ID。

# jquery - 检查我的 div 是否包含特殊图像

> ID：14899754
> 
> 赞同：0
> 
> 时间：2013-02-15T17:07:33.400
> 
> 标签：jquery, detect

如果此 div 包含特殊图像，我想向 div 添加背景图像。我给你一个例子

```
<ul>
 <li><img src="image1"/></li>
 <li><img src="image2"/></li>
</ul> 
```

if `img = image1`，改变第一个 li 的背景， if `img = image2`，改变第二个 li 的背景

我知道它存在于 jQuery 中：

```
$("li:has(img)") 
```

但我不知道如何检查这张图片是否有正确的名称。

先感谢您 ！

编辑：根据你的回答，我有这个

```
$("#scroller li img").each(function(){
         if ($(this).attr('src') == "theme/img/icons/moon.png"){
            $(this).parent().css("background-image", "url(../theme/img/weather-bg-rain.jpg)"); 
         }
    }) 
```

但我的背景没有改变......：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:09:55.493

您可以使用 jQuery 的 .each 浏览每个图像并检查 src。如果它与您要查找的内容相匹配，请像这样设置您的背景：

```
$("ul li img").each(function(){
     if ($(this).attr('src') == "image1.jpg"){
           $(this).parent().css('background', '#ff0000');
     }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T17:10:10.660

您可以在选择器中检查[`img`标签的`src`参数](http://api.jquery.com/attribute-equals-selector/)。

```
// Selects the 1st li
$("li:has(img[src='image1'])")

// Selects the 2nd li
$("li:has(img[src='image2'])") 
```

演示：http: [//jsfiddle.net/T7DD2/](http://jsfiddle.net/T7DD2/)

# jquery - flot.js：自定义图例

> ID：14899756
> 
> 赞同：2
> 
> 时间：2013-02-15T17:07:39.123
> 
> 标签：jquery, flot, pie-chart

如何自定义 flot.pie.js 上的图例？

我有以下代码：

```
var options = { 
            series: { 
                pie: {
                    show: true
                },
                legend: {
                    show: true,
                    label: {
                        show: true,
                        formatter: function(label, series){
                            return '<div style="font-size:8pt;text-align:center;padding:2px;">' + label + ' ' + Math.round(series.percent)+'%</div>';
                        }
                    }
                }
            }
        }; 
```

但这不起作用，我想我正在编造传说部分......我想要的是展示传说中的价值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:34:20.130

只需将数据值添加到您的系列标签。你没有显示你的数据，所以想象你的数据看起来像这样：

```
var data = [
    {
    label: "Good",
    data: 10},
{
    label: "Bad",
    data: 30 },
{
    label: "Ugly",
    data: 90},
]; 
```

然后您可以使用此代码将数据值附加到每个标签：

```
for (var i=0;i<data.length;i++){
    data[i].label+=' ('+data[i].data+')'
} 
```

这是它的外观：http: [//jsfiddle.net/ryleyb/p8fzS/](http://jsfiddle.net/ryleyb/p8fzS/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-24T19:32:55.313

这对我有用：

```
function legendFormatter(label, series) {
    return '<div ' + 
           'style="font-size:8pt;text-align:center;padding:2px;">' +
           label + ' ' + Math.round(series.percent)+'%</div>';
};

var options = { 
    series: { 
        pie: {
            show: true
        },
    },
    legend: {
        show: true,
        labelFormatter: legendFormatter
    }
}; 
```

工作示例链接：http: [//jsfiddle.net/Rnusy/322/](http://jsfiddle.net/Rnusy/322/)

# java - Linux 中的刚性设置 JAVA_HOME 变量

> ID：14899759
> 
> 赞同：4
> 
> 时间：2013-02-15T17:07:48.093
> 
> 标签：java, linux, unix, hadoop, environment-variables

我正在尝试使用命令运行所有 hadoop 守护进程

```
./start-all.sh 
```

从主主机集群。由于执行了几次

```
starting namenode, logging to /export/hadoop-1.0.1/libexec/../logs/hadoop--namenode-one.out
192.168.1.10: starting datanode, logging to /export/hadoop-1.0.1/libexec/../logs/hadoop-hadoop-datanode-myhost2.out
192.168.1.10: Error: JAVA_HOME is not set. 
```

甚至在虚拟机上执行到 192.168.1.10 命令的地址后也发生了几次

```
hadoop@myhost2:~$ export JAVA_HOME=/opt/jdk1.7.0_06 
```

告诉请一劳永逸地修复 JAVA_HOME 变量的严格程度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:11:15.880

将该行`export JAVA_HOME=/path/to/java`放在 start-all.sh 脚本的开头，这样就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:11:23.500

`$ vi ~/.bash_proflle`

将此行附加到文件中

`export JAVA_HOME=/opt/jdk1.7.0_06`

`JAVA_HOME`这将对环境变量进行永久性更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:12:52.010

你也应该在文件中设置**JAVA_HOME 。**`hadoop-env.sh`这是在`$HADOOP_INSTALL/hadoop/conf`hadoop的目录中。默认情况下 JAVA_HOME 设置行被注释

> **hadoop-env.sh** - 此文件包含 Hadoop 使用的一些环境变量设置。您可以使用这些来影响 Hadoop 守护程序行为的某些方面，例如存储日志文件的位置、使用的最大堆数量等。您应该在此文件中更改的唯一变量是 JAVA_HOME

或者您可以将其添加到 hadoop 帐户中的以下文件中。

```
~/.bash_proflle 
```

# c# - 在不使用软件的情况下检索视频的某些部分。可能吗？

> ID：14899761
> 
> 赞同：0
> 
> 时间：2013-02-15T17:07:59.260
> 
> 标签：c#, html, activex

我正在做一个与视频相关的项目。

我需要剪切一部分视频（我想检索从 00:30:00 到 00:40:00 的那部分视频）。我已经搜索过它，发现它可以通过使用 ffmpeg 来完成（这是一个用于编辑和转换视频的命令行工具。）但我不想使用任何工具。

是否可以使用代码而不是使用其他工具来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:23:05.447

如果您真正想要的是构建从现有视频材料中剪切样本到 .net 程序中的能力，那么[拼接器](http://splicer.codeplex.com/)项目可能就是您正在寻找的。

# asp.net - 在 AJAX 请求期间更改响应时出现 PageRequestManagerParserErrorException

> ID：14899762
> 
> 赞同：3
> 
> 时间：2013-02-15T17:08:09.640
> 
> 标签：asp.net, telerik, updatepanel, httpresponse, internet-explorer-10

单击按钮或在 AjaxPanel 中执行某种 ajax 操作后出现异常。

> SCRIPT5022：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。此错误的常见原因是通过调用 Response.Write()、响应过滤器、HttpModules 或启用了服务器跟踪来修改响应。详细信息：在 ' 附近解析错误
> 
> <!DOCTYPE html>。Telerik.Web.UI.WebResource.axd，第 15 行字符 16238

在 ASP.NET 4.0 上使用`Telerik`. 这只发生在 IE10 上。含义 - 在 chrome、Mozilla、以前的 IE 上完美运行。

我在服务器上应用了修补程序 KB2600088 和 KB2783767，但仍然没有。这是 Windows Server 2003 标准版 32 位。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:05:30.937

> 单击按钮或
> 
> 我能做些什么？

如果您正在修改**HttpResponse**状态，则必须**从**Telerik AjaxPanel/MS UpdatePanel中**移动**此“按钮” 。

 **有关更多信息，请参阅[Sys.WebForms.PageRequestManagerParserErrorException - 它是什么以及如何避免它](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)的博客文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T09:43:01.143

此问题与 ajax 请求周期有关，问题解决方案是 webresources 缓存对象被浏览器视为未处理的请求。

要解决此问题，必须使用任何 Web 资源监视器来捕获调用跟踪，并且始终建议使用带有时间戳或唯一标识符的请求。

浏览器下的非托管 ajax 请求有时会显示此类错误，这也会显示 500 错误。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T15:21:00.857

几个月前，当我从 IE 9 迁移到 IE 10 时，我遇到了这个错误。

ASP.NET AJAX 客户端库 4.x 和 IE 10 之间似乎存在（一些）不兼容问题。

我发现更改 IE 的兼容性设置可以解决我的问题。我添加了以下行：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

在我的页面顶部作为 html 头部部分的第一行，在所有其他标签之前（如下），

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    ... 
```

PageRequestManagerParserErrorException 再也没有发生过，但是由于更改了兼容性设置，一些 IE10 特定的 CSS3 规则没有影响。

我最近将这种情况写给[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/805516)，他们告诉他们正在调查。**

# javascript - javascript 表单验证 - 该函数无法执行验证

> ID：14899763
> 
> 赞同：-1
> 
> 时间：2013-02-15T17:08:10.170
> 
> 标签：javascript, validation

这是我的表格：

[我的 FORM 的 jsFiddle](http://jsfiddle.net/JbzPA/)

```
function formValidator(){
var a = document.getElementById('uname');
var b = document.getElementById('m_photo');
var c= document.getElementById('fname');
var d= document.getElementById('lname');
var e= document.getElementById('p_add');
var f= document.getElementById('c_add');
var g= document.getElementById('b_add');
var h= document.getElementById('country');
var i= document.getElementById('state');
var j= document.getElementById('city');
var k= document.getElementById('pcode');
var l= document.getElementById('id_proof');
var m= document.getElementById('quali_proof');
var n= document.getElementById('p_addproof');
var o= document.getElementById('c_addproof');
var p= document.getElementById('resume');
var q= document.getElementById('dob');
var r= document.getElementById('mobile');
var s= document.getElementById('email');
var t= document.getElementById('quali');
var u= document.getElementById('dsgn');
var v= document.getElementById('rep_person');
var w= document.getElementById('join');
var x= document.getElementById('p_hist');
var y= document.getElementById('sh_des');
var z= document.getElementById('app_by');
var A= document.getElementById('accept');

// Check each input in the order that it appears in the form!
if(lengthRestriction(a, 6, 8)){
    if(""==b.value)
        {alert("Please Upload the Member Photo");
            if(isAlphabet(c, "Please enter only Alphabets for First Name")){
                if(isAlphabet(d, "Please enter only Alphabets for Last Name")){
                    if(e==null || e=="")
                        {alert("Please Enter your Permanent Address");
                            if(f==null || f=="")
                                {alert("Please Enter your Current Address");
                                    if(g==null || g=="")
                                        {alert("Please Enter your Branch Address");
                                            if(h==null || h=="")
                                                {alert("Please Enter the Country Name");
                                                    if(i==null || i=="")
                                                        {alert("Please Enter the State Name");
                                                            if(j==null || j=="")
                                                                {alert("Please Enter the City Name");

    //if(isAlphanumeric(addr, "Numbers and Letters Only for Address")){
            if(isNumeric(k, "Please enter a valid 6 digit Pin Code")){
                if(l==null || l=="")
                    {alert("Please Upload the Id-Proof");
                        if(m==null || m=="")
                            {alert("Please Upload the Qualification Proof");
                                if(n==null || n=="")
                                    {alert("Please Upload the Permanent Address Proof");
                                        if(o==null || o=="")
                                            {alert("Please Upload the Current Address Proof");
                                                if(p==null || p=="")
                                                    {alert("Please Upload the Resume");
                                                        if(q==null || q=="")
                                                            {alert("Please Upload the D.O.B Proof");
                                                                if(lengthRestriction(r,10,10)){
                                                                    if(emailValidator(s, "Please enter a valid email address")){
                                                                        if(t==null || t=="")
                                                                            {alert("Please Enter the Qualification Details");
                                                                                if(madeSelection(u, "Please Choose a Designation")){
                                                                                    if(v==null || v=="")
                                                                                        {alert("Please Enter the name of the Reporting Person");
                                                                                            if(w==null || w=="")
                                                                                                {alert("Please Enter the Joining Date");
                                                                                                    if(x==null || x=="")
                                                                                                        {alert("Please Write Something about Past History");
                                                                                                            if(y==null || y=="")
                                                                                                                {alert("Please give some Description about the Member");
                                                                                                                    if(z==null || z=="")
                                                                                                                        {alert("Empty Field: APPOINTED BY");
                                                                                                                            if(madeSelection(A, "Please Accept the terms and conditions")){
                                                                                            return true;
                                                                    }}
                                                                }}
                                                            }}
                                                        }}
                                                    }}
                                                }}
                                            }}
                                        }}
                                    }}
                                }}
                            }}
                        }}
                    }}
                }

return false;

}
 function notEmpty(elem, helperMsg){
if(elem.value.length == 0){
    alert(helperMsg);
    elem.focus(); // set the focus to this input
    return false;
}
return true;
}

function isNumeric(elem, helperMsg){
var numericExpression = /^[0-9]+$/;
if(elem.value.match(numericExpression)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
}

function isAlphabet(elem, helperMsg){
var alphaExp = /^[a-zA-Z]+$/;
if(elem.value.match(alphaExp)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
}

function isAlphanumeric(elem, helperMsg){
var alphaExp = /^[0-9a-zA-Z]+$/;
if(elem.value.match(alphaExp)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
}

function lengthRestriction(elem, min, max){
var uInput = elem.value;
if(uInput.length >= min && uInput.length <= max){
    return true;
}else{
    alert("Please enter between " +min+ " and " +max+ " characters");
    elem.focus();
    return false;
}
}

function madeSelection(elem, helperMsg){
if(elem.value == "Select Designation"){
    alert(helperMsg);
    elem.focus();
    return false;
}else
    {
    return true;
}
}

function emailValidator(elem, helperMsg){
var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
if(elem.value.match(emailExp)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
} 
```

此处仅对前两种情况进行验证。我无法弄清楚问题所在。任何人都可以帮忙吗？

在用户移动到下一个字段之前，我需要验证当前字段，因此所有 if 语句都嵌套以遵循特定顺序。

另外，我希望将表单数据重定向到另一个文件。我用过`action="abc.html"`（例如）。单击提交按钮时，它直接转到`abc.html`而不是验证表单数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:52:46.977

```
if(lengthRestriction(a, 6, 8)){
    if(""==b.value)
        {alert("Please Upload the Member Photo");
            if(isAlphabet(c, "Please enter only Alphabets for First Name")){ 
```

如果字段有效，您有一些函数（例如上面显示的 lengthRestriction 和 isAlphabet）返回**true。**但是，如果该字段有效，则您的内联逻辑（如上面的 b）解析为**false。**我建议您编写一个“非空”函数（或者更改 if 语句中的逻辑），以便**if 字段有效时为 true**。

作为一个建议，我承认我不知道你对这个项目有多少控制权。您是否考虑过使用诸如 jquery 之类的 javascript 库？您可能会受益于使用其他人已经编写和测试过的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:44:13.677

好的。你真的应该组织起来:)

### 替代方法

既然你有这种长表格；你可以：

*   使用类名根据需要标记必要的字段。
*   使用 HTML5 自定义`data-`属性为*每个*字段分配验证逻辑和相应的错误消息。

例如：

```
<input id="fname" type="text" class="required" data-validation="alphanumeric"
        data-error="Please enter your first name." />

<input id="age" type="text" class="required" data-validation="numeric"
    data-error="Please enter your age." />

<input id="accept" type="checkbox" class="required" data-validation="check" 
    data-error="Please accept the terms of agreement." /> 
```

然后;

*   在循环中获取那些*“标记为必需”的字段。*
*   使用附加的逻辑验证它们。
*   要么在最后显示所有收集到的错误消息，要么处理并逐个中断（就像你做的那样）。

例如：

```
function validateForm() {
    // get the .required fields as NodeList
    var requiredElems = document.getElementsByClassName('required') || 
                            document.querySelectorAll('.required');
    // validate fields one-by-one
    for (var i = 0; i < requiredElems.length; i++) {
        var elem = requiredElems[i];
        if (validateField(elem) === false) {
            alert(elem.getAttribute('data-error')); //get the error message from the custom data attribute and alert.
            elem.focus();
            return false; //break;
        }
    }
    return true;
}

function validateField(elem) {
    var rxp, valid = true,
        // get the validation type from the custom data attribute.
        validationType = elem.getAttribute('data-validation');
    // all validation logic in one place
    switch (validationType) {
        case 'alphanumeric':
            rxp = /^[0-9a-zA-Z]+$/;
            valid = rxp.test(elem.value);
            break;
        case 'numeric':
            rxp = /^[0-9]+$/;
            valid = rxp.test(elem.value);
            break;
        case 'email':
            rxp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
            valid = rxp.test(elem.value);
            break;
        case 'check':
            valid = elem.type == 'checkbox' ? elem.checked : true;
            break;
    }

    return valid;
} 
```

这样做还有两个好处；

*   您可以添加额外的表单字段而无需更改您的 javascript。只需在 HTML 中插入带有`.required` 类`data-validation`和`data-error`属性的元素。
*   您可以通过`case`在`validateField()`方法中添加另一个来添加额外的验证逻辑。

## HTML5 表单验证

我们还可以使用适当的*HTML5 表单验证*；例如使用**`required`属性**而不是自定义`.required`类（以在线识别必填字段）。还有许多其他有用的功能，例如新`input`类型（`email`、`number`、`url`等）、占位符文本、自动对焦字段。但不幸的是，大多数主流浏览器版本还[**没有完全支持这些。**](http://caniuse.com/#feat=form-validation)

另一方面，“**数据-”属性；**[至少](https://stackoverflow.com/a/2413263/112731)**是可用的，包括[**IE6**](https://stackoverflow.com/a/2413263/112731)（即使它并不能被旧浏览器真正识别）。这就是为什么，我认为目前上述方法对浏览器更友好。**

 **有关 HTML5 表单的更多信息，请参阅[此页面](http://diveintohtml5.info/forms.html)。

无论如何，这只是为了演示您应该如何构建/组织您的流程。应该有比这个更合乎逻辑的方法，但至少，这应该给你一个想法。

***注意：**如果您考虑这种方法，请不要忘记相应地更改您的**DOCTYPE**。***

# ios - iOS首先自动旋转视图

> ID：14899775
> 
> 赞同：0
> 
> 时间：2013-02-15T17:08:53.237
> 
> 标签：ios, rotation, landscape-portrait

我正在开发一个 ios 应用程序，该应用程序必须在横向和纵向上工作，除了一个视图，它应该始终处于横向状态。所以我有：

```
-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) || (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

如果我在横向模式下午餐我的应用程序，并进入此视图并旋转设备（iPad），则调用此方法并返回 false，因此界面不会旋转，好东西。

但是，如果我处于纵向并进入此视图，则会调用此方法并返回 false，但是方向不会改变。在这种情况下，如果我将设备旋转到横向，该方法返回 true 并且界面正确旋转，如果我尝试再次旋转到纵向，此方法返回 false 并且界面保持横向。

第一次看到这个视图时，如果设备是纵向的，界面会变成横向，我该如何实现呢？

另外，我尝试过

```
- (NSUInteger)supportedInterfaceOrientations 
```

但它永远不会被调用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:17:05.943

`shouldAutorotateToInterfaceOrientation:`在 iOS 6.0 中已贬值。改写`supportedInterfaceOrientations`and`preferredInterfaceOrientationForPresentation`方法。

从文档开始`preferredInterfaceOrientationForPresentation`

> 如果您的视图控制器实现了此方法，那么当呈现时，它的视图会以首选方向显示（尽管稍后可以将其旋转到另一个受支持的旋转）。如果不实现此方法，系统将使用状态栏的当前方向呈现视图控制器。

# javascript - 用户期望什么类型的表单输入会在 javascript 中产生 null？

> ID：14899779
> 
> 赞同：3
> 
> 时间：2013-02-15T17:09:04.430
> 
> 标签：javascript, html

我不确定我的问题是否足够清楚，但请考虑以下功能：

```
function validateForm() {
    var x = document.forms["myForm"]["fname"].value;

    if (x == null || x == "") {
        alert("First name must be filled out");
        return false;
    }
} 
```

我没有得到的是“空”；我知道空字符串“”表示没有输入任何内容，但是用户的输入类型会暗示`null`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:20:12.980

元素的`value`属性`input`返回一个字符串，该字符串将包含用户输入的文本，否则为空（`""`）。没有也不应该有理由`null`在条件中进行检查，因为字符串（无论是否为空）*永远*不可能等于`null`。

# ruby-on-rails - Rails 3.2 资产管道和 RequireJS

> ID：14899780
> 
> 赞同：13
> 
> 时间：2013-02-15T17:09:06.097
> 
> 标签：ruby-on-rails, requirejs, asset-pipeline, amd

我将使用 Ruby on Rails 3.2 启动一个富客户端 Web 应用程序。我打算使用 RequireJS，但它似乎与 Asset Pipeline 发生冲突。据我所知，后者基本上做的是连接依赖资产，缩小和压缩它们（如果我错了，请纠正我），这似乎与异步加载 JavaScript 文件不太兼容。

乍一看，资产管道似乎有更好的性能。但是，RequireJS 允许您将 JavaScript 代码组织在易于重用和管理其依赖项的模块中。

有没有办法将两者结合起来？如果没有，你会选择哪一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T11:38:09.107

您可能想看看这个 gem [https://github.com/jwhitley/requirejs-rails/](https://github.com/jwhitley/requirejs-rails/)

似乎正在做你想做的事——即使用 requirejs 加载客户端，同时仍然利用一些资产管道。

我很想建议我猜在大多数情况下，资产管道会更快，因为它会加载单个缩小的 js 资源。依赖管理虽然不是很好，所以它在很大程度上取决于应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T17:21:31.803

我建议下载 RequireJS 库并将其折腾到`vendor/assets/javascripts`. 然后在你的`application.js`文件中：

```
//= require require 
```

（有趣，是吗？），这就足够了。

这是结合资产管道和模块化 js 库的最简单方法。我不知道这个特定的库需要任何额外的设置，但你可以看看[这个 Railscast](http://railscasts.com/episodes/405-angularjs?autoplay=true)，它描述了类似的东西。

# asp.net-mvc-4 - 在 MVC 4 中，如何在不使用查询字符串的情况下将数据传递给控制器

> ID：14899784
> 
> 赞同：1
> 
> 时间：2013-02-15T17:09:11.973
> 
> 标签：asp.net-mvc-4, parameters

我们有一个显示用户列表的用户信息的表单。我们有一个操作链接可以转到详细信息视图，以便用户更新信息。我们的应用程序是 ASP.Net 4.0 和 MVC 的混合体。我们通常使用加密来屏蔽我们在查询字符串中使用的变量，但是当我们尝试加密查询字符串时，MVC 会阻塞。我们正在使用 Microsoft Enterprise 5.0 Cryptogrophy 类。我们将如何加密查询字符串或在不使用查询字符串的情况下传递数据？我们将 MVC 4 与 Razor 一起使用。

我们目前正在做这样的事情：@Url.Action("Edit", "User", new {id = user.Id}

顺便说一句，我是 MVC 的新手，所以可能有一个我不知道的简单答案。

如果我们根本不能使用查询字符串，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:21:28.743

简单的答案：POST。使用表单或 AJAX 调用将值作为 POST 数据发送，并有一个控制器方法，其名称与现有方法相同，但标有`[HttpPost]`属性（也将现有方法标记为`[HttpGet]`）。这个新的 POST 方法的参数可以是任何你喜欢的；它们在发布时可能会变成字符串（特别是如果您使用 AJAX），但 MVC 足够聪明，可以再次将它们转换回来，前提是它们的名称相同。所以，一个类似这样的表格：

```
@using (Html.BeginForm("Edit", "User", FormMethod.Post, new { id = "mainForm" }))
{
    <input id="userId" type="text" />
    <input type="submit" />
} 
```

将整齐地对应于这样的控制器方法：

```
[HttpPost]
public ActionResult Edit(int userId)
{
    //do whatever
} 
```

前提是您已正确注册路线。如果您的 GET 方法有效，那么相同的路由将在这里有效，只要它不会对 URL 参数造成任何问题。

同样的方法也将接受来自 AJAX 调用的提交，如下所示：

```
$.ajax({
    type: "POST",
    url: '@Url.Action("Edit", "User")',
    data: { userId: @user.Id },
    success: function (data) {
        //do whatever
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:28:53.490

我同意 anaximander 的观点，但如果您要花很多精力来保护查询字符串信息，表单只需将信息移动到 HTML 字段而不是查询字符串参数。如果您需要保留现有的实现，您可以考虑从默认的 ModelBinder 继承，并提供您自己的自定义实现以在将其移交给基类的实现之前将其从加密的查询字符串转换为未加密的查询字符串。

# html - 使用服务器端包含 (SSI) 和 Maven 进行 HTML 原型设计

> ID：14899795
> 
> 赞同：1
> 
> 时间：2013-02-15T17:09:48.900
> 
> 标签：html, maven, ssi, prototyping

在开发静态 HTML 和 JavaScript 时，通常使用 Apache 网络服务器来玩转 JavaScript。我想知道是否有人在开发静态 HTML 原型时尝试使用 SSI 来定义和组装组件。

例如`<!--#include virtual="/footer.html" -->`

要将工件交付给客户端，需要像 Web 服务器完成的方式一样解析包含。

由于我们的构建过程基于 Maven，我正在寻找一种方法/插件来解决打包阶段的包含问题。

# c# - S3 捆绑下载

> ID：14899797
> 
> 赞同：3
> 
> 时间：2013-02-15T17:10:04.093
> 
> 标签：c#, .net, amazon-s3, zip

我的网站上有一个页面，允许用户选择他们想要下载的文件。提交后，它将这些文件即时捆绑到一个可以下载的 zip 文件中。

这很好用，但是这些文件都存储在服务器本地。我现在已将所有文件移至 S3。

我正在尝试一种方法，只需单击一下即可为用户提供所有文件并从 S3 提供它们。

该站点是在 asp.net/C# 中构建的。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:14:01.783

我之前遇到过这个问题，我最终做的是构建 zip 并在生成完成后将 zip 上传到另一个 s3 存储桶并从那里提供服务。然后只是“定期”从 s3 中删除拉链。

# typescript - TypeScript 0.8.2 在保存时编译 AMD 模块

> ID：14899801
> 
> 赞同：3
> 
> 时间：2013-02-15T17:10:15.207
> 
> 标签：typescript

注意：我在 Visual Studio 2010 下使用 TypeScript，所以很遗憾，不能使用 Web Essentials 2012 作为解决方案。

TypeScript 0.8.2 添加了一项[在保存时编译](http://typescript.codeplex.com/wikipage?title=Compile-on-Save)的功能，我按照该页面上的说明在我的项目中启用了该功能。我对项目文件所做的唯一额外更改是添加

```
<TypeScriptModuleKind>amd</TypeScriptModuleKind> 
```

每个组的属性，告诉 TypeScript 将我的文件构建为 AMD 模块。

当项目完全构建时，这可以正常工作，但是当我保存单个文件并触发自动编译时，它会在没有模块切换的情况下这样做，并且生成的 Javascript 不再有效。

无论如何强制编译保存功能将某些参数应用于 tsc 调用？

* * *

更新：

多一点搜索，我发现[这个工作项](http://typescript.codeplex.com/workitem/696)在其他人有同样的问题。它因无法复制而被关闭，所以任何人都可以确认它对他们有用，如果我应该接受这个报价：

> 项目文件中指定的保存时编译选项...

暗示有某种方法可以将保存时编译的选项分别设置为我在上面链接到的 wiki 页面上定义的调试和发布选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T08:04:03.467

此问题已在后续版本中修复；还有与为保存时编译指定输出文件的能力相关的问题。如果您使用的是 Visual Studio 2012 或 Visual Studio 2013，请考虑升级到更高版本。

您可以从以下网址试用 0.9.5 测试版：[https ://typescript.codeplex.com/wikipage?title=TypeScript%200.9.5%20beta](https://typescript.codeplex.com/wikipage?title=TypeScript%200.9.5%20beta)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T16:17:18.480

您可以在 .csproj 文件中定义自定义目标 - 或使用 Microsoft.TypeScript.targets 中定义的目标 - 然后将自定义工具与您的 .ts 文件相关联。

为此，只需将文件的“自定义工具”属性设置为 **MSBuild:***NameOfYourMSBuildTarget*

每次保存与自定义工具关联的文件时都会调用目标。

有关此方法的更多详细信息，请参阅我[对这个问题的回答](https://stackoverflow.com/questions/15651172/typescript-compile-to-single-file-on-save/16660417#16660417)。

# c# - 限制 HttpModule 只处理某些请求

> ID：14899806
> 
> 赞同：4
> 
> 时间：2013-02-15T17:10:36.097
> 
> 标签：c#, asp.net, httpmodule, ihttpmodule, directory-browsing

我们在网站的特定部分使用目录浏览，但我们的用户并不喜欢默认的 ASP.NET

目录浏览。老实说，我们也不是特别关心它。

我遇到了 mvolo 的自定义目录浏览模块并尝试使用它。但是，我发现如果我在我的根 web.config 中启用了它，它允许在没有默认页面的情况下浏览所有文件夹的目录（如您所料）。如果我在根目录中设置了 enabled="false"，它会抛出一个 HttpException，它被我的通用错误页面捕获，但是每个请求都会导致异常，例如当请求的页面在加载期间有额外的图像要请求时。

我相信（我可能是错的），默认目录浏览模块仅在没有默认文件夹并且您没有请求特定文件（例如，mysite.com/images/ 与 mysite. com/images/logo.gif)。

我已经重构了自定义模块的功能，但我无法弄清楚如何将模块限制为仅在启用目录浏览时需要完全执行的情况下——而不是针对每个请求。这是模块中的一段代码：

```
 public void Init(HttpApplication app)
    {
        app.PreRequestHandlerExecute += new EventHandler(this.OnPreRequestHandlerExecute);
    }

    public void OnPreRequestHandlerExecute(object source, EventArgs e)
    {
        HttpApplication application = (HttpApplication)source;
        HttpContext context = application.Context;
        config = (DirectoryListingConfigSection)WebConfigurationManager.GetSection("directoryBrowsing", context.Request.Path);

        if (this.config == null)
        {
            throw new Exception("Missing <directoryBrowsing> configuration section.");
        }

        /* I only want to check this if it's necessary, not for things 
           like mysite.com/images/logo.gif or mysite.com/about/history.aspx 
           -- those shouldn't give a 403 error */
        if (!config.Enabled)
        {
            context.Response.Status = "403 Forbidden";
        }

        /* The rest of the code goes below, and should only process 
           if Directory Browsing is necessary and enabled */
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:17:29.173

模块在通过 ASP.Net[的每个请求上执行](http://msdn.microsoft.com/en-us/library/zec9k340%28v=vs.85%29.aspx)，没有办法根据请求类型限制对模块的调用。

您需要在模块的代码中构建检查，以仅处理该模块感兴趣的请求。

根据阶段，您应该可以访问有关请求的大部分信息。在`PreRequestHandlerExecute`您获得有关传入请求的所有可能信息期间，包括 URL、标头和相关会话状态（如果存在）。

# android - 应用最小化时访问相机

> ID：14899810
> 
> 赞同：2
> 
> 时间：2013-02-15T17:10:43.070
> 
> 标签：android, android-intent, android-camera, android-service

在我的应用程序中，我通过检索相机对象来访问相机。然后我启动一个持续管理一些数据的服务。在某些情况下，服务会向 Activity 发送广播请求以使用相机对象。

因此，当我的应用程序最小化时，该服务无法再使用相机。为什么？当我回到我的应用程序时它崩溃了

> 02-15 18:06:56.100: E/AndroidRuntime(23686): 致命异常: main 02-15 18:06:56.100: E/AndroidRuntime(23686): java.lang.RuntimeException: 接收广播 Intent 时出错 { act=android com.mkyong.android.MainActivity$1@418e4730 中的 .intent.action.MAIN flg=0x10（有附加功能）}

整个堆栈跟踪[http://dpaste.com/933015/](http://dpaste.com/933015/)

因此`android.intent.action.MAIN`，服务发送了一个意图，但活动从未收到。

我在我的活动中捕捉到这样的意图：

```
 @Override
    protected void onResume() {

        super.onResume();

        IntentFilter intentFilter = new IntentFilter(
                "android.intent.action.MAIN");

        mBroadcastReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
               //access camera
            }
        };

        this.registerReceiver(mBroadcastReceiver, intentFilter);
    } 
```

那么当应用程序最小化时是否有机会捕捉到意图并访问相机？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:19:58.297

正如您的堆栈跟踪所示，您已经调用`release()`了`Camera`，之后该`Camera`对象不再有效。您不能`getParameters()`调用`Camera`after `release()`。

# excel - 如何使用单元格值来定义图表数据的范围？

> ID：14899814
> 
> 赞同：3
> 
> 时间：2013-02-15T17:10:49.990
> 
> 标签：excel, reference, range, cell

我有一组 500 个单元格，我使用以下范围定义从中创建了一个图表：

```
=Sheet1!$A$1:$A$500 
```

我有 2 个单元格`B1`，`B2`我想在其中定义图表的开始值和结束值（在 1-500 内）以仅显示我的数据的一个子集（比如说从 20 到 200）。

**如何引用单元格`B1`并在我的数据范围定义`B2`中替换`$1`和？`$500`**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T17:32:37.043

通常，您应该在定义图表系列的函数的帮助下使用具有**计算命名范围的动态图表。**`OFFSET``COUNTA``SERIES`

这里解释得差不多了，但这是我自己为员工培训创建的示例文件：[https ://www.dropbox.com/s/5enub45nn4y36gz/DynamicCharts4Types.xlsx](https://www.dropbox.com/s/5enub45nn4y36gz/DynamicCharts4Types.xlsx)

它包括 4 种不同类型的应用动态，例如显示最后 X 点、显示从 X 到 Y 的点等。要查看魔术，请转到 Ribbon`Formulas > Name Manager`并检查如何定义不同的范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T17:36:07.463

如果我正确理解了您的查询，那么您可以使用`.SetSourceData`并添加来自`B1`和的值`B2`

这是一个例子

```
Option Explicit

'~~> Please amend the code as applicable
Sub Sample()
    Dim objChrt As ChartObject
    Dim chrt As Chart
    Dim StartVal As Long, endVal As Long

    With Sheets("Sheet1")
        StartVal = .Range("B1").Value
        endVal = .Range("B2").Value

        Set objChrt = .ChartObjects("Chart 1")
        Set chrt = objChrt.Chart

        chrt.SetSourceData (.Range("A" & StartVal & ":A" & endVal))

    End With
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/1203b07ae18c48c8e462301342cb6cab.png)

# python - 为什么 Scrapy's Field 是一个字典？

> ID：14899815
> 
> 赞同：4
> 
> 时间：2013-02-15T17:10:56.407
> 
> 标签：python, scrapy

基本上我有一个真正的默认设置，一个蜘蛛子类`CrawlSpider`和一个具有三个字段的项目，如下所示：

```
class AppdexItem(Item):
    name = Field()
    url = Field()
    desc = Field() 
```

当我的蜘蛛解析响应时，它会填充这样的项目：

```
i = AppdexItem()
name = hxs.select("//h1[@class='doc-banner-title']/text()")
i['name'] = name.extract()[0] 
```

现在，当我读到 Field 实际上是什么时，我感到困惑。这实际上是[它的实现](https://github.com/scrapy/scrapy/blob/master/scrapy/item.py#L17)：

```
 class Field(dict):
     """Container of field metadata""" 
```

这很简单`dict`。我想知道为什么会这样，并盯着实现看了一会儿。它仍然没有任何意义。所以我`scrapy shell`在一个应该被解析成一个项目的页面上运行，这就是我得到的：

```
In [16]: item = spider.parse_app(response)

In [17]: item.fields
Out[17]: {'desc': {}, 'name': {}, 'url': {}}

In [18]: item['name']
Out[18]: u'Die Kleine Meerjungfrau' 
```

什么？要么我做错了（我做了所有像官方教程和示例告诉我的那样），要么完全没有意义`Field`。`dict`

有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T20:32:20.730

历史原因。曾经有元数据附加到存储在字典中的字段。我假设使用了 dict 因为它有一个方便的 (key=value) 构造函数。你可以看到最后一次使用 this 在[这个 commit](https://github.com/scrapy/scrapy/commit/951ba507f94cbdeb7b573020dc6fe730fdc61dbe)中被删除了。在这一点上，它几乎没有什么区别，它可能只是一个普通的对象（尽管如果仍然有代码出于某种原因假设它是一个字典，那么改变可能会很困难）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-01T20:00:04.800

Field用作 dict 来存储元数据*；*一种用例是为 ItemLoader 指定输入和输出处理器。检查[http://doc.scrapy.org/en/master/topics/loaders.html#declaring-input-and-output-processors](http://doc.scrapy.org/en/master/topics/loaders.html#declaring-input-and-output-processors)。

我个人认为 Scrapy 支持没有任何元数据的普通字典会很好，但这是另一个问题。

# ios - Xcode 行搜索/转储？

> ID：14899816
> 
> 赞同：1
> 
> 时间：2013-02-15T17:11:07.917
> 
> 标签：ios, xcode

有没有办法搜索我调用方法并将它们转储到文本文件中的所有时间？

就像我每次打电话一样

```
setTitle: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:40:53.027

是的，您需要：

*   突出显示方法（将光标放在其中）。
*   从左上角的菜单中选择*呼叫者*

![在此处输入图像描述](../Images/20ab268881621b704a63e231256c5fe5.png)

# python - 在 pandas to_html 中格式化输出数据

> ID：14899818
> 
> 赞同：11
> 
> 时间：2013-02-15T17:11:12.630
> 
> 标签：python, pandas

我使用 pandas 的 to_html 生成输出文件，当数据写入文件时，它们在小数点后有很多位。pandas 的 to_html float_format 方法可以限制数字，但是当我使用 'float_format' 时，如下所示：

```
DataFormat.to_html(header=True,index=False,na_rep='NaN',float_format='%10.2f') 
```

它引发了一个例外：

```
typeError: 'str' object is not callable 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T17:21:21.990

从`to_html`文档：

```
float_format : one-parameter function, optional
    formatter function to apply to columns' elements if they are floats
    default None 
```

你需要传递一个函数。例如：

```
>>> df = pd.DataFrame({"A": [1.0/3]})
>>> df
          A
0  0.333333

>>> print df.to_html()
<table border="1" class="dataframe">
    <tr>
      <th>0</th>
      <td> 0.333333</td>
    </tr>
[...] 
```

但

```
>>> print df.to_html(float_format=lambda x: '%10.2f' % x)
<table border="1" class="dataframe">
[...]
    <tr>
      <th>0</th>
      <td>      0.33</td>
    </tr>
[...] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-25T17:26:15.397

没有 a `lambda`，你可以直接传递一个`str.format`函数：

```
df = pd.DataFrame(...)
df.to_html(float_format='{:10.2f}'.format) 
```

# mysql - 单个字段的 MySQL 斜率（趋势）（最佳拟合线）

> ID：14899823
> 
> 赞同：2
> 
> 时间：2013-02-15T17:11:33.390
> 
> 标签：mysql, select, trend

我有一个名为 LOGENTRY 的简单表，其中包含名为“DATE”和“COST”的字段。例子：

```
+--------------+-------+
| DATE         | COST  |
+--------------+-------+
| MAY 1 2013   | 0.8   |
| SEP 1 2013   | 0.4   |
| NOV 1 2013   | 0.6   |
| DEC 1 2013   | 0.2   |
+--------------+-------+ 
```

我想找到 COST 字段随时间的斜率（选择的行范围），导致 SLOPE=-0.00216（这相当于 Excel 的 SLOPE 函数，又名线性回归）。

有没有一种简单的方法来选择 COST 的斜率？如果我用调用语言（php）进行数学计算，我可以找到斜率：

```
SLOPE =  (N * Sum_XY - Sum_X * Sum_Y)/(N * Sum_X2 - Sum_X * Sum_X); 
```

我看到发布了一些类似的问题，但它们更复杂。我试图将这个示例简化为最简单的情况 - 所以我可以理解答案:) 这和我得到的一样接近......但是 MYSQL 抱怨附近的语法：'float)) AS Sum_X, SUM(CAST( LOGENTRY.DATE 作为浮点数) * CAST(LOGENTRY.DATE'

```
SELECT 
  COUNT( * ) AS N, 
  SUM( CAST( LOGENTRY.DATE AS FLOAT ) ) AS Sum_X, 
  SUM( CAST( LOGENTRY.DATE AS FLOAT ) * CAST( LOGENTRY.DATE AS FLOAT ) ) AS Sum_X2, 
  SUM( LOGENTRY.COST ) AS Sum_Y, SUM( LOGENTRY.COST * LOGENTRY.COST ) AS Sum_Y2, 
  SUM( CAST( LOGENTRY.DATE AS FLOAT ) * LOGENTRY.COST ) AS Sum_XY
FROM LOGENTRY 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:50:23.387

似乎 MySQL 不能将日期转换为浮点数（根据 stackoverflow 中的其他示例）。也许其他示例引用另一个数据库。因此，通过将日期转换为 unix_timestamps，我能够得到答案......在 PHP 中进行最终计算。如果这是错误的...请发布，我将删除答案...

```
SELECT
        COUNT(*) AS N,
        SUM(UNIX_TIMESTAMP(LOGENTRY.DATE)) AS Sum_X,
        SUM(UNIX_TIMESTAMP(LOGENTRY.DATE) * UNIX_TIMESTAMP(LOGENTRY.DATE)) AS Sum_X2,
        SUM(LOGENTRY.COST) AS Sum_Y,
        SUM(LOGENTRY.COST*LOGENTRY.COST) AS Sum_Y2,
        SUM(UNIX_TIMESTAMP(LOGENTRY.DATE) * LOGENTRY.COST) AS Sum_XY
    FROM LOGENTRY 
```

# java - 为什么我在球衣中的方法被调用两次？

> ID：14899825
> 
> 赞同：3
> 
> 时间：2013-02-15T17:11:49.503
> 
> 标签：java, servlets, jersey

我有 HomeService.java，当我转到`/test`url 时它打印`HomeService::test`一次，但是当我转到`/play`url 时它打印`HomeService::play`两次。我怎样才能让我的`/play`方法只被调用一次？

我去的网址是

```
http://127.0.0.1:8080/Home/rest/main/test
http://127.0.0.1:8080/Home/rest/main/play 
```

家庭服务.java：

```
@Path("/main")
public class HomeService
{

  @GET
  @Path("/test")
  @Produces("text/plain")
  public String test()
  {
    System.out.println("HomeService::test");
    return "Running...";
  }

  @GET
  @Path("/play")
  @Produces("video/mpeg")
  public StreamingOutput play()
  {
    System.out.println("HomeService::play");
    return new StreamingOutput()
    {

    @Override
    public void write(java.io.OutputStream outputStream) {}
  }
} 
```

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?><web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
  <display-name>Home</display-name>

    <servlet>
        <servlet-name>jersey-servlet</servlet-name>
        <servlet-class>
                      com.sun.jersey.spi.container.servlet.ServletContainer
        </servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.home</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-servlet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

如果需要更多信息，请告诉我。

编辑：所以我运行了 tcpdump，这是输出：

```
# ./tcpdump -s 128 -A -v -i any port 8080|grep 'play'
tcpdump: listening on any, link-type LINUX_SLL (Linux cooked), capture size 128 bytes
...u...uGET /Home/rest/main/play HTTP/1.1
..  ... .GET /Home/rest/main/play HTTP/1.1 
```

然后再一次

```
........GET /Home/rest/main/play HTTP/1.1
........GET /Home/rest/main/play HTTP/1.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:57:32.917

这是因为客户要求它两次。您可能会在媒体（音频/视频）请求上看到这种行为。大多数媒体播放器会测试服务器是否支持范围请求，以便通过多个 HTTP 连接更有效地缓冲它。如果您仔细查看请求标头，您可能会看到标[`Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)头[`If-Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.27)。如果您的服务器支持它，那么客户端将发送多个范围请求，请求在指定范围开始和结束的媒体文件的较小块。此外，如果客户端快进到特定时刻（例如 1 分钟后），则媒体播放器可以中止请求并发送一个新请求，请求从该位置开始的范围。

您不能阻止客户多次请求它。如果您的服务不支持范围请求，您最好将其设为一个。servletcontainer 的内置默认 servlet 支持它。因此，如果您将媒体文件放在公共 Web 内容中并让客户端直接请求它而不是通过 Web 服务，那么它会担心这一点。

请注意，这个问题与泽西岛完全无关，尽管我有一些印象，即它对于媒体流的特定工作来说是错误的工具。

# objective-c - 如何让 CFNetwork 操作停止信任证书

> ID：14899826
> 
> 赞同：1
> 
> 时间：2013-02-15T17:12:03.077
> 
> 标签：objective-c, macos, cocoa

我已将我的应用程序设置为允许使用此处概述的机制基于 URL 打开和关闭 SSL 证书验证： [Objective-C/Cocoa：如何接受错误的服务器证书？](https://stackoverflow.com/questions/15266/objective-c-cocoa-how-do-i-accept-a-bad-server-certificate)

这基本上将客户端设置为接受来自服务器的“坏”证书。我的问题是对同一服务器的后续调用都正确完成，即使我将其设置为具有严格的证书检查。

我假设底层 CFNetwork 实现正在缓存证书及其“受信任”状态。我不想要这种行为。

有什么方法可以关闭证书缓存一般/针对特定请求，或者至少清除缓存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:32:02.867

尝试使用 OS X [Keychain Access 实用程序](http://en.wikipedia.org/wiki/Keychain_Access)检查您的登录钥匙串。您可以从那里删除或更改缓存证书的信任策略。还有一个命令行界面：`/usr/bin/security`.

# objective-c - 无论活动如何，仅从 VDKQueue 接收“文件写入”通知

> ID：14899829
> 
> 赞同：1
> 
> 时间：2013-02-15T17:12:06.837
> 
> 标签：objective-c, cocoa, vdkqueue

我正在尝试实现 VDKQueue，但无论监视文件夹中的文件活动如何，都只会将“VDKQueueFileWrittenToNotification”作为通知返回。删除、文件大小更改都报告为同一消息。

我认为一切都设置好了，但也许不是……</p>

```
[self.theQueueWatcher setDelegate:self];
self.theQueueWatcher.alwaysPostNotifications=YES;
[self.theQueueWatcher addPath:self.hotFolderPath notifyingAbout:VDKQueueNotifyDefault]; 
```

这是在 10.8.2 上。

有谁知道操作系统中的任何底层是否发生了变化，这会导致这种情况吗？或者我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:04:11.737

在联系了 VDKQueue 的作者后，他很有帮助地（似乎是个好人）指出了 kQueue 的目的，因此 VDKQueue 是为了监视单个文件的更改等，而不是像我一样查看文件夹。所以现在开始进入 FSEvents 的旅程，Bryan 推荐这是完成这项任务的最佳方式。

谢谢布莱恩。

希望其他人觉得这很有用。

# php - 链式选择 jquery php mysql 重复

> ID：14899834
> 
> 赞同：0
> 
> 时间：2013-02-15T17:12:26.687
> 
> 标签：php, jquery, mysql, select

示例 MySql 表（还有一个 id 列）：

```
+----------------------------------+
| one  | two | three | four | five |
+----------------------------------+
| v1   | v2  | v3    | v4   | v9   |
+----------------------------------+
| v1   | v2  | v6    | v8   | v9   |
+----------------------------------+
| v1   | v7  | v6    | v4   | v10  |
+----------------------------------+
| v11  | v7  | v12   | v4   | v10  |
+----------------------------------+
| v11  | v2  | v3    | v8   | v5   |
+----------------------------------+ 
```

[插件](http://www.appelsiini.net/projects/chained)是如何工作的。

我想使用 mysql 中的值制作 5 个链式选择框。我可以使用简单的查询进行这样的输出；

```
$result4 = mysql_query("SELECT * FROM table");
while($row4 = mysql_fetch_array($result4))
  {
  echo '<option value="'.$row4['four'].'" class="'.$row4['three'].'">'.$row4['four'].'</option>';
  } 
```

它给出了这个；

```
<select id="model" name="model">
  <option value="">--</option>   
  <option value="v4" class="v3">v4</option>
  <option value="v4" class="v6">v4</option>
  <option value="v4" class="v12">v4</option>
  <option value="v8" class="v6">v8</option>
  <option value="v8" class="v3 v6">v8</option>
</select> 
```

但是有些价值观会重复。例如，一个“三”有多个“二”。输出应该是这样的；

```
<select id="model" name="model">
  <option value="">--</option>   
  <option value="v4" class="v3 v6 v12">v4</option>
  <option value="v8" class="v6 v3">v8</option>
</select> 
```

我怎么能做这个？（基于表行的多个类名）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:25:53.220

如果你想使用这个类`v3 v6 v12`，并使用`GROUP by` 来获得你想要的结果，然后使用这个 sql

```
 $result4 = mysql_query("SELECT one ,two,group_concat(three SEPARATOR ' ') three, four , five FROM table_1 group by four "); 
```

[**演示 SQL 小提琴**](http://sqlfiddle.com/#!2/461d2/7)

# java - java泛型扩展类型错误

> ID：14899838
> 
> 赞同：0
> 
> 时间：2013-02-15T17:12:37.750
> 
> 标签：java, generics, types

我正在编写通用编码器/解码器并遇到扩展通用的问题。这个想法是我想要一个抽象的 Encodeable 类，它有一个“虚拟”静态方法 decode，它接受一个 Byte[] 并构造对象，类似于 Serializable。（我知道这在 java 中不能真正做到。）扩展 Encodeable 的每个类都将覆盖编码/解码方法。然后我想通用地使用这些 Encodeable 子类。这是试图说明我的意思：

```
public class Encodeable{

    // I'd like to write 
    // static abstract Encodeable decode(Byte[]);
    // similar to 
    // virtual Encodeable decode(Byte[]) = 0;  
    // in C++, but that seems to be illegal in java

    static Encodeable decode(Byte[] buf){return null};

}

public class EncodeableFoo extends Encodeable{

      static EncodeableFoo decode(Byte[] buf){
          // do actual decoding logic here
      }

}

public class Bar<T extends Encodeable>{

    public void messageReceived(MessageEvent e){
        Byte[] buf = e.getMessage();
        T messageObj = T.decode(buf);
        // do something with T
    }

} 
```

照原样，我收到一条错误消息，例如

```
error: incompatible types
    T messageObj = T.decode(objBuf);
                           ^
  required: T
  found:    Encodeable
  where T is a type-variable:
    T extends Encodeable declared in class EdgeClientHandler 
```

在编译时。但是如果我将解码线更改为

```
T messageObj = (T) T.decode(objBuf); 
```

它工作得很好。有人可以向我解释这个黑魔法吗？或者，更重要的是，给我一个更好的方法来编写我的通用 Bar 类，这样它就知道 T 有一个静态方法解码（和一个非静态方法编码）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T17:15:45.227

[首先，Java 中的静态方法不能是抽象的。](https://stackoverflow.com/questions/370962/why-cant-static-methods-be-abstract-in-java)

其次，如果您希望编译器了解您返回的是 a `T`，而不仅仅是a ，则需要将该方法声明为泛型`Encodeable`。我建议完全远离`static`这里。基本思想：

```
public interface Decoder<T> {
    T decode(Byte[] buf);
}

public class FooDecoder implements Decoder<Foo> {
    Foo decode(Byte[] buf){
        // do actual decoding logic here
    }
}

public class Bar<T extends Encodeable> {

    private Decoder<T> decoder; // you'll have to figure out where to get this

    public void messageReceived(MessageEvent e){
        Byte[] buf = e.getMessage();
        T messageObj = decoder.decode(buf);
        // do something with T
    }
} 
```

您的原始设置似乎混合了可编码类型和知道如何从 a 解码此类类型的东西`byte[]`，所以我重命名并摆弄了一下。

* * *

附带问题：为什么`Byte[]`是 s 而不是`byte[]`s？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T17:21:30.400

你的设计在我看来有点乱。我不会使用静态方法而是做这样的事情：

```
public interface Decoder<T extends Encodable> {
    T decode(Byte[] buf);
}

public class Bar<T extends Encodable> {
    private final Decoder<T> decoder;

    public Bar(Decoder<T> decoder) {
        this.decoder = decoder;
    }

    public void messageReceived(MessageEvent e) {
        Byte[] buf = e.getMessage();
        T messageObj = decoder.decode(buf);
        // do something with T
    }
} 
```

# jquery - jQuery UI 嵌套可排序放置区

> ID：14899840
> 
> 赞同：0
> 
> 时间：2013-02-15T17:12:56.160
> 
> 标签：jquery, jquery-ui, jquery-plugins, nested-sortable

我正在尝试使用 msjarfatti 的 nestedSortable 插件连接两个列表（[https://github.com/mjsarfatti/nestedSortable](https://github.com/mjsarfatti/nestedSortable)）

我在这里设置了一个测试[http://jsfiddle.net/gcWQQ/46/](http://jsfiddle.net/gcWQQ/46/)

HTML：

```
<h4>SELECTIONS</h4>
<ul id="selections">
    <li><div>Section 1.0</div></li>
</ul>
<br>
<h4>CONTENT SET</h4>
<ul id="content">
<li>
    <div><h4>Headline Here</h4><p>Metadata here</p><p>Article snippet goes here and it can get to be very long. Lorem ipsum dolor sit amet. Blah blah more text here.</p></div>
</li>
<li>
    <div><h4>Headline Here</h4><p>Metadata here</p><p>Article snippet goes here and it can get to be very long. Lorem ipsum dolor sit amet. Blah blah more text here.</p></div>
</li>
<li>
    <div><h4>Headline Here</h4><p>Metadata here</p><p>Article snippet goes here and it can get to be very long. Lorem ipsum dolor sit amet. Blah blah more text here.</p></div>
</li>
<li>
    <div><h4>Headline Here</h4><p>Metadata here</p><p>Article snippet goes here and it can get to be very long. Lorem ipsum dolor sit amet. Blah blah more text here.</p></div>
</li>
</ul> 
```

JS：

```
$("ul, li").disableSelection();

$('#selections').nestedSortable({
listType: 'ul',
toleranceElement: 'div',
items: 'li',
tolerance:"pointer",
});

$('#content').nestedSortable({
listType : "ul",
handle:"div",
toleranceElement:"div",
helper:'clone',
items: 'li',
connectWith:'#selections',
}); 
```

我可以从 CONTENT 区域拖动到 SELECTIONS 的顶层，但尝试拖动到嵌套位置并没有真正起作用。如果您一直向右拖动几乎离开页面，它有时会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T15:36:22.253

将您的 HTML 放入具有固定宽度的*DIV*中，然后您就可以上路了。

*您也可以在两个UL*上添加一个公共类，以简化您的 JS 代码。假设您在两个*UL*上添加类 « *.connected-lists* » ，您的所有 JS 都可以替换为以下内容：

 *```
$('#selections, #content').nestedSortable({
    listType: 'ul',
    items: 'li',
    handle:'div',
    toleranceElement: '> div',
    tolerance:'intersec',
    helper:'clone',
    connectWith:'.connected-lists'
}).disableSelection(); 
```

**注意：使用***占位符*相关设置更好地了解正在发生的事情可能是一件好事。

[http://api.jqueryui.com/sortable/#option-placeholder](http://api.jqueryui.com/sortable/#option-placeholder)

[http://api.jqueryui.com/sortable/#option-forcePlaceholderSize](http://api.jqueryui.com/sortable/#option-forcePlaceholderSize)*

# image - 比较两个链接并选择具有较高端号的链接

> ID：14899844
> 
> 赞同：-2
> 
> 时间：2013-02-15T17:13:09.793
> 
> 标签：image, cygwin, tumblr

所以我的问题是我尝试比较来自 tumblr 的两个链接并选择具有更高数字的链接，在这种情况下只需选择 _1280 而不是 _500。

[http://25.media.tumblr.com/393e9f295c4cac3af0a4b6d3a64c434d/tumblr_mi9e85iFwA1qavye5o1_500.jpg](http://25.media.tumblr.com/393e9f295c4cac3af0a4b6d3a64c434d/tumblr_mi9e85iFwA1qavye5o1_500.jpg) [http://25.media.tumblr.com/393e9f295c4cac3af0a4b6d3a64c434d/tumblr_mi9e_1qavye5o1_500.jpg](http://25.media.tumblr.com/393e9f295c4cac3af0a4b6d3a64c434d/tumblr_mi9e85iFwA1qavye5o1_1280.jpg)

我知道如何从 tumblr 获取图像链接，但我太愚蠢了，无法制作此代码。我什至不知道如何开始......这只是我尝试在 bash (cygwin) 中做某事的开始。

我将不胜感激任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:32:36.083

这里有一些字符串操作函数可以帮助您入门。

```
bash:~$ var1=http://25.media.tumblr.com/393e9f295c4cac3af0a4b6d3a64c434d/tumblr_mi9e85iFwA1qavye5o1_500.jpg
bash:~$ var2=${var1##*_} 
```

这为您提供了最后一个下划线之后的字符串部分

```
bash:~$ echo $var2

should output 500.jpg

bash:~$ var3=${var2%.*} 
```

这为您提供了点之前的部分

```
bash:~$ echo $var3

should output 500 
```

然后你可以比较数字。

# jquery - addClass 在 2 个按钮之间，例如使用 Jquery 的单选按钮

> ID：14899846
> 
> 赞同：0
> 
> 时间：2013-02-15T17:13:14.730
> 
> 标签：jquery, radio-button, addclass

我有 2 个`<span>`我想制作的单选按钮，但与单选按钮有点不同。

例如。

```
<span>Button1</span>
<span>Button2</span> 
```

当用户点击 Button1 时，点击`addClass '.active'`Button1 的跨度。同时，当用户单击 Button2 时，删除 Button1 的跨度`'.active'`并将其添加到 Button2 的跨度。到目前为止，这类似于单选按钮。`.active`但是当用户点击已经存在的同一个按钮时，我需要删除`.active`。

我的问题是我不知道如何在按钮之间切换活动类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:27:04.250

基于 Dumitru Chirutac 的回答：

您可以使用以下代码修复他的答案以具有正确的行为：

```
$(document).ready(function(){
    $('.btn').click(function(){ //use the correct selector for your html
        if($(this).hasClass('active')){
            $(this).removeClass('active');
        } else {
            $(this).addClass('active').siblings().removeClass('active');       
        }
    });
}); 
```

这样你检查当前是否已经激活。如果是，则删除活动。如果不使用它作为切换。

[更新的演示](http://jsfiddle.net/XUN6P/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:21:44.977

试试这个 ：

**HTML**

```
<span class="btn">Button 1</span>
<span class="btn">Button 2</span>
<span class="btn">Button 3</span>
<span class="btn">Button 4</span> 
```

**Javascript**

```
$(document).ready(function(){
   $('.btn').click(function(){
      $(this).addClass('active').siblings().removeClass('active');       
   });
}); 
```

[看演示](http://jsfiddle.net/XUN6P/)

# android - 禁止特定的 android 应用

> ID：14899853
> 
> 赞同：-1
> 
> 时间：2013-02-15T17:13:28.020
> 
> 标签：android, actionscript-3, air, adobe

我的问题是针对 android 操作系统（Galaxy Note 2，有根设备，4.0.1）。

我需要永久隐藏应用程序“三星智能相机应用程序”，即使它试图走在前面或在启动后运行。

有没有办法将应用程序转换为后台服务？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:17:13.430

转到设置，找到您想要的应用程序并点击`Disable`。

# jquery - 运行自定义插件 Jquery

> ID：14899854
> 
> 赞同：1
> 
> 时间：2013-02-15T17:13:40.323
> 
> 标签：jquery, jquery-plugins

我创建了一个 JQ 插件，它完全可以按照我的意愿工作，下面是调用插件的代码

```
 $('#tp').click(function() { 
                $('#tp').mainDiv({
                request     : 'open' ,
                secondary   : 'open'             
                });
         }); 
```

当用户单击 div 元素时，我的插件会调整 div 的大小和样式。我唯一的问题是我希望在不添加 id 元素的情况下运行我的插件，所以我的想法是我的代码会像这样调用插件

```
 JQ script etc 

         then call something like   **maindiv()**

         then more script 
```

我的问题是我可以这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:58:04.167

你可以制作一个静态jquery插件。然后你调用它就像`$.mainDiv()`你所要做的就是改变插件声明：

```
$.fn.mainDiv = function(){
  //plugin code here
} 
```

进入

```
$.mainDiv = function(){
  //plugin code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:52:14.680

我不知道我是否理解您的问题，但有几种方法可以获取当前单击的元素。一种方法是使用事件对象中的 delegateTarget。所以你不需要知道点击回调中的id。

```
 $('#tp').click(function (event) {
        var target = $(event.delegateTarget);
        target.mainDiv({
            request: 'open',
            secondary: 'open'             
        });
    }); 
```

文档：[http ://api.jquery.com/event.delegateTarget/](http://api.jquery.com/event.delegateTarget/)

# pyqt - 搜索所有连接到 PyQt4 对象的信号

> ID：14899855
> 
> 赞同：3
> 
> 时间：2013-02-15T17:13:46.407
> 
> 标签：pyqt, pyqt4

有没有办法轻松确定哪些插槽连接到 PyQt4 中的信号或对象？
主要用例是连接给定对象的所有默认插槽。例如，也许我想在`QTableView`with上启用排序，`setSortingEnabled()`但我想自己控制`horizontalHeader().sortIndicatorChanged`信号。我需要查看所有插槽都连接到`sortIndicatorChanged`信号并断开它们。

理想情况下，我想要一个如下功能：

```
def print_all_connected(qobject, signal=None):
    signals = qobject.signals() if signal is None: else [signal]
    for signal in qobject.signals():
        for slot in qobject.connectedSlots():
            print slot 
```

所以像这样的调用`print_all_connected(my_table_model, 'dataChanged')`将打印连接到插槽上`dataChanged`信号的所有`my_table_model`插槽。

我认为标准 Qt 将调用解释`disconnect()`为自动断开所有插槽的信号，以便调用它。不幸的是，我不认为 PyQt4 实现了这一点，信号必须一一断开。但是，我仍然希望能够搜索一个对象并查看它具有哪些插槽或信号并打印/断开它们等。

另外，我知道有一种`QObject.receviers()`方法可以返回连接到给定插槽的“接收器”数量。但是，这并不能告诉我这些接收者是谁/是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:15:30.770

断开连接就像在 Qt 中一样工作。请参阅[pyQt 中的断开连接文档](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html?highlight=disconnect#disconnect)。

我找不到做你想做的事的方法，但你可以检查 doku：

1.  [新型信号槽支持](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html)
2.  [旧式信号和插槽支持](http://pyqt.sourceforge.net/Docs/PyQt4/old_style_signals_slots.html)
3.  [需要注意的事项](http://pyqt.sourceforge.net/Docs/PyQt4/gotchas.html)

# c++ - Boost Wave 自定义输入策略

> ID：14899859
> 
> 赞同：0
> 
> 时间：2013-02-15T17:14:02.477
> 
> 标签：c++, boost, boost-spirit

我想要做的是，在 boost::wave 中的 c 类文件的预处理期间（我实际上正在处理 glsl 文件），而不是从磁盘加载包含的文件，我想从地图中“加载”它们，其中map.first 是文件名，map.second 是内容。

我需要为输入策略的内部类提供这些文件名/文件内容的映射。但是，我不确定如何才能真正将地图放入内部类......

上下文是这样创建的：

```
typedef boost::wave::context<
                std::string::iterator, 
                lex_iterator_type,
                custom_directives_hooks::load_file_or_string_to_string,
                custom_directives_hooks
            > context_type; 
```

自定义指令是这样的（在底部附近定义了自定义输入策略）：

```
#if !defined(BOOST_WAVE_CUSTOM_DIRECTIVES_HOOKS_INCLUDED)
#define BOOST_WAVE_CUSTOM_DIRECTIVES_HOOKS_INCLUDED

#include <cstdio>
#include <iostream>
#include <ostream>
#include <string>
#include <algorithm>
#include <map>

#include <boost/assert.hpp>
#include <boost/config.hpp>

#include <boost/wave/token_ids.hpp>
#include <boost/wave/util/macro_helpers.hpp>
#include <boost/wave/preprocessing_hooks.hpp>
#include <boost/wave/cpp_iteration_context.hpp>

#include <iterator>
#include <fstream>
#if defined(BOOST_NO_TEMPLATED_ITERATOR_CONSTRUCTORS)
#include <sstream>
#endif

#include <boost/wave/wave_config.hpp>
#include <boost/wave/cpp_exceptions.hpp>
#include <boost/wave/language_support.hpp>
#include <boost/wave/util/file_position.hpp>

namespace wave = boost::wave;

class custom_directives_hooks
:   public wave::context_policies::default_preprocessing_hooks
{
public:

    custom_directives_hooks(std::map<std::string, std::string> files) : files_(files) {
    }

    //custom_directives_hooks(std::set<std::string> &files_) : files(files_), include_depth(0) {
    //}

    template <typename ContextT, typename ContainerT>
    bool
    found_unknown_directive(ContextT const& ctx, ContainerT const& line, 
        ContainerT& pending)
    {
        typedef typename ContainerT::const_iterator iterator_type;
        iterator_type it = line.begin();
        wave::token_id id = wave::util::impl::skip_whitespace(it, line.end());

        if (id != wave::T_IDENTIFIER)
            return false;       // nothing we could do

        if ((*it).get_value() == "version" || (*it).get_value() == "extension") {
            // Handle #version and #extension directives
            std::copy(line.begin(), line.end(), std::back_inserter(pending));
            return true;
        }

        if ( (*it).get_value() == "type") {
            // Handle type directive
            return true;
        }

        // Unknown directive
        return false;
    }

#if BOOST_WAVE_USE_DEPRECIATED_PREPROCESSING_HOOKS != 0
    void opened_include_file(std::string const &relname, std::string const &filename, 
        std::size_t /*include_depth*/, bool is_system_include) 
#else
    template <typename ContextT>
    void opened_include_file(ContextT const& ctx, std::string const& relname, 
        std::string const& filename, bool is_system_include) 
#endif
    {
        std::cout << "opened_include_file: " << "relname: " << relname << " filename: " << filename << " is_system_include: " << is_system_include << std::endl;
        /*
        std::set<std::string>::iterator it = files.find(filename);

        if (it == files.end()) {
            // print indented filename
            for (std::size_t i = 0; i < include_depth; ++i)
                std::cout << " ";
            std::cout << filename << std::endl;

            files.insert(filename);
        }
        ++include_depth;
        */
    }

#if BOOST_WAVE_USE_DEPRECIATED_PREPROCESSING_HOOKS != 0
    void returning_from_include_file() 
#else
    template <typename ContextT>
    void returning_from_include_file(ContextT const& ctx) 
#endif
    {
        //--include_depth;
    }

#if BOOST_WAVE_USE_DEPRECIATED_PREPROCESSING_HOOKS != 0
    // old signature
    void 
    found_include_directive(std::string const& filename, bool include_next) 
    {}
#else
    // new signature
    template <typename ContextT>
    bool 
    found_include_directive(ContextT const& ctx, std::string const& filename, bool include_next) {
        std::cout << "found_include_directive:" << filename << std::endl;

        return false;    // ok to include this file
    }
#endif

    template <typename ContextT>
    bool 
    locate_include_file(ContextT& ctx, std::string &file_path, 
        bool is_system, char const *current_name, std::string &dir_path, 
        std::string &native_name) 
    {
        // Check if file is in the files map
        if (files_.find(file_path) != files_.end()) {
            std::cout << "locate_include_file: file_path:" << file_path << " dir_path:" << dir_path << " native_name:" << native_name << std::endl;
            native_name = file_path;
        } else {
            if (!ctx.find_include_file (file_path, dir_path, is_system, current_name))
                return false;   // could not locate file

            namespace fs = boost::filesystem;

            fs::path native_path(wave::util::create_path(file_path));
            if (!fs::exists(native_path)) {
                //BOOST_WAVE_THROW_CTX(ctx, preprocess_exception, bad_include_file, 
                //    file_path.c_str(), ctx.get_main_pos());
                std::cout << "error: doesn't exist" << std::endl;
                return false;
            }

            // return the unique full file system path of the located file
            native_name = wave::util::native_file_string(native_path);
        }

        typedef typename ContextT::iterator_type iterator_type;
        std::streambuf* buffer = nullptr;
        wave::language_support language();

        ctx.instring.assign(
            std::istreambuf_iterator<char>(buffer),
            std::istreambuf_iterator<char>());

        ctx.first = iterator_type(
            ctx.instring.begin(), ctx.instring.end(),
            PositionT(ctx.filename), language);
        ctx.last = iterator_type();

        return true;      // include file has been located successfully
    }

    struct load_file_or_string_to_string
    {       
        template <typename IterContextT>
        class inner
        {
        public:     
            template <typename PositionT>
            static void init_iterators(IterContextT &iter_ctx,
                PositionT const &act_pos, wave::language_support language)
            {
                static std::map<std::string, std::string> theFiles;

                typedef typename IterContextT::iterator_type iterator_type;

                std::cout << "init_iterators: " << iter_ctx.filename << std::endl;

                std::streambuf* buffer = nullptr;

                const char* cString = iter_ctx.filename.c_str();

                if (theFiles.find(std::string(cString)) != theFiles.end()) {
                    std::stringstream ss( theFiles[std::string(cString)] );
                    buffer = ss.rdbuf();
                } else {
                    // read in the file
                    std::ifstream instream(iter_ctx.filename.c_str());
                    if (!instream.is_open()) {
                        //BOOST_WAVE_THROW_CTX(iter_ctx.ctx, wave::preprocess_exception,
                        //  wave::bad_include_file, iter_ctx.filename.c_str(), act_pos);
                        std::cout << "error: not open" << std::endl;
                        return;
                    }
                    instream.unsetf(std::ios::skipws);
                    buffer = instream.rdbuf();
                }

                iter_ctx.instring.assign(
                    std::istreambuf_iterator<char>(buffer),
                    std::istreambuf_iterator<char>());

                iter_ctx.first = iterator_type(
                    iter_ctx.instring.begin(), iter_ctx.instring.end(),
                    PositionT(iter_ctx.filename), language);
                iter_ctx.last = iterator_type();
            }

        private:
            std::string instring;
        };
    };

    std::map<std::string, std::string> files_;
};

#endif // !defined(BOOST_WAVE_ADVANCED_PREPROCESSING_HOOKS_INCLUDED) 
```

有没有人有什么建议？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:17:56.730

我能够通过为内部类外部的文件创建一个静态映射，填充它，然后从`init_iterators`方法内引用该静态映射来解决这个问题。

首先，我将`inner`类声明/实现代码移到了`custom_directives_hooks`类中。

然后，我`files_`在自定义指令头文件中定义了一个变量，如下所示：

```
...
class custom_directives_hooks
:   public wave::context_policies::default_preprocessing_hooks
{
public:
    static std::map<std::string, std::string> files_;

    custom_directives_hooks(std::map<std::string, std::string> files) {
        custom_directives_hooks::files_ = files;
    }
... 
```

在我的自定义指令 cpp 文件中，我像这样初始化了地图：

```
std::map<std::string, std::string> custom_directives_hooks::files_ = std::map<std::string, std::string>(); 
```

就在主要方法之前。

在主要方法中，我添加了：

```
std::map<std::string, std::string> files;

files["oglre"] = "oglre SOURCE\n";
files["material"] = "material SOURCE\n";
files["light"] = "light SOURCE\n"; 
```

然后将`files`地图传递给自定义指令对象。

`files_`然后我可以像这样在`inner`类中引用变量：

```
...
if (custom_directives_hooks::files_.find(std::string(cString)) != custom_directives_hooks::files_.end()) {
    std::stringstream ss( custom_directives_hooks::files_[std::string(cString)] );
    iter_ctx.instring.assign(
        std::istreambuf_iterator<char>( ss.rdbuf() ),
        std::istreambuf_iterator<char>()
    );
}
... 
```

希望这对遇到此类问题的其他人有所帮助（尽管这是一个非常具体的问题:)）。

# asp.net - 如果一种语言没有语言代码怎么办？

> ID：14899861
> 
> 赞同：2
> 
> 时间：2013-02-15T17:14:04.657
> 
> 标签：asp.net, asp.net-mvc-4, localization, resources

当谈到 MVC 应用程序的本地化时......如何将应用程序本地化为一种语言，而该语言没有语言代码？至少[不在 MSDN中！](http://goo.gl/JSzbz)

有数百种这样的语言，但以[库尔德语](http://en.wikipedia.org/wiki/Kurdish_language)为例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:22:56.300

在这里看起来像一个类似的问题：

*   [创建自定义 CultureInfo](https://stackoverflow.com/questions/12916940/creating-custom-cultureinfo-for-country-language-combination)

该线程指向两个（希望）有用的资源：

*   [来自现有 CultureInfo 的新 CultureInfo](https://stackoverflow.com/questions/1304507/create-custom-culture-in-asp-net)
*   [自定义 CultureInfo 教程](http://en.csharp-online.net/Using_Custom_Cultures%E2%80%94Uses_for_Custom_Cultures)

# asp.net - 如何从 SSRS .rdlc 报告中获取报告 URL？

> ID：14899863
> 
> 赞同：0
> 
> 时间：2013-02-15T17:14:10.293
> 
> 标签：asp.net, reporting-services

我正在寻找一种从 SSRS 报告中获取报告 URL 的方法，该报告在 ASP.NET Web 应用程序中本地定义。我试过使用`Globals!ReportServerUrl`内置字段，但它没有给我任何有用的东西（当我将值放在文本框中时显示为 #ERROR ）。我想这是可以预料的，因为报告实际上并不存在于报告服务器上，而是在应用程序中本地定义的。任何输入将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:45:21.223

正如评论中所指出的，RDLC 是“本地”呈现的。这 - 令人困惑 -*可能*在服务器上，但仍然没有*报告*服务器 URL（这是错误的原因）。

**在报告**中，您**没有明显的方法可以找到任何 HttpContext 项目**，例如您似乎在寻找的请求 URL。

最简单的解决方案可能是[创建一个报告参数并将](http://msdn.microsoft.com/en-us/library/aa337432%28v=sql.105%29.aspx) [HttpRequest 中的某些](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.request%28v=vs.110%29.aspx)`@RequestUrl`内容传递给它。

（还有[Custom Code](http://msdn.microsoft.com/en-us/library/ms156028.aspx)，您可以尝试，但我怀疑它是否可以访问请求 URL。）

# image - 图像最大宽度（非浮动）使用浮动 div 旁边的空间？

> ID：14899868
> 
> 赞同：1
> 
> 时间：2013-02-15T17:14:48.360
> 
> 标签：image, css-float, responsive-design, css

我正在开发的网站将在屏幕上显示冗长的文章。该站点具有响应性，因此您在屏幕上看到的所有内容都会重新调整大小和重新排列以适应不同的屏幕。以前我们有一个两列布局，其中文章位于左侧浮动 div 中。一个较短内容的侧栏将在右手浮动 div 中。

决定由于右手内容太短，它下面有很多浪费的空白。我被要求尝试将右侧列合并到左侧 div 中，以便文本环绕它。

那部分很简单，我只是将现在嵌入的右侧栏浮动到文章中，并将书面文字包裹在它周围。

看到这个 JSFiddle：http: [//jsfiddle.net/TheMonkxx/2aucA/1/](http://jsfiddle.net/TheMonkxx/2aucA/1/)

这是页面的 HTML：

```
<div class="parent">
<div class="right_content" align="right"></div>

Lorem ipsum dolor sit amet, consectetur
adipiscing elit. Maecenas vitae nunc arcu. Cras tortor velit, consectetur
quis consectetur vel, ultrices eu nisl. Pellentesque convallis orci ligula,
id pharetra mauris. Vestibulum eleifend, turpis eget commodo dapibus, diam

magna nunc auctor elit, nec molestie libero quam quis mi. Donec interdum
velit non arcu sollicitudin eu ullamcorper lectus venenatis. Vivamus at
lacus magna. Proin in diam semper urna fermentum molestie sit amet sit
amet augue. Nulla sit amet massa eu risus laoreet laoreet eget sed erat.
Aliquam quis enim in odio porta consequat. Ut egestas urna et erat iaculis
et aliquam libero auctor.</div> 
```

这是CSS

```
.parent {
 border: 1px solid green;
 width: 200px;
 float: right;
}

.right_content {
 width: 25%;
 height: 150px;
 float: right;
 background-color: red;
 margin: 0 0 7px 7px;
} 
```

当我尝试将图像添加到文章内容时，问题就出现了。由于该网站是响应式的，我希望图像具有 max-width: 100% 应用。但是，当我这样做时，图像会 100% 进入父容器，并将图像下方的任何书面内容推送到右侧列之后。看到这个小提琴：

[http://jsfiddle.net/TheMonkxx/2a66J/](http://jsfiddle.net/TheMonkxx/2a66J/)

这是该页面的更新 HTML：

```
<div class="parent">
<div class="right_content" align="right"></div>
<img src="http://www.thetop22.com/wp-content/uploads/2012/01/Black-Keys-Banner-3.png"
/>
Lorem ipsum dolor sit amet, consectetur
adipiscing elit. Maecenas vitae nunc arcu. Cras tortor velit, consectetur
quis consectetur vel, ultrices eu nisl. Pellentesque convallis orci ligula,
id pharetra mauris. Vestibulum eleifend, turpis eget commodo dapibus, diam

magna nunc auctor elit, nec molestie libero quam quis mi. Donec interdum
velit non arcu sollicitudin eu ullamcorper lectus venenatis. Vivamus at
lacus magna. Proin in diam semper urna fermentum molestie sit amet sit
amet augue. Nulla sit amet massa eu risus laoreet laoreet eget sed erat.
Aliquam quis enim in odio porta consequat. Ut egestas urna et erat iaculis
et aliquam libero auctor.</div> 
```

和更新的 CSS：

```
img {
  max-width:100%;
}
.parent {
   border: 1px solid green;
   width: 200px;
   float: right;
}
.right_content {
   width: 25%;
   height: 150px;
   float: right;
   background-color: red;
   margin: 0 0 7px 7px;
} 
```

为图像提供预定义的宽度可以修复布局，但会导致网站的响应性问题。我也会有一些文章在文案的各个地方都有图像，所以我不能总是预测图像会出现在右侧栏旁边。

任何想法或建议如何获得所需的布局并保持响应方面的工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-17T19:58:36.827

虽然这很旧，但我刚刚找到了一个使用 jQuery 的好而简单的解决方案。

* * *

## CSS 部分

首先，我们需要将所有图像设置为小，以便它们可以放在浮动 div 旁边。假设 75%；

```
.parent img {
  max-width:100%;
  width: 75%;
} 
```

## jQuery 部分

然后我们要重置浮动div下方所有图片的宽度：

```
jQuery(document).ready(function(){
        var h = jQuery(".right_content").height(); //get floating div height (let's say it's dynamic).

        jQuery('.parent img').each(function(){ //loop through all images in content
            jQuery(this).removeAttr('style') //remove any disturbing inline styles. optional.
            var p = jQuery(this).position(); //get each .wp-caption position
            var top = p.top; //top position
            if(top > h){ //if img is below the floating div
                jQuery(this).css("width", "initial") //change img width to original (or anything you like)
            }
        });
}); 
```

希望它以某种方式有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:10:01.723

一种看待这一点的方法，但是如果您使用大量图像，它不是很有效并且会非常臃肿。

如果您在 jsFiddle 上发布的内容就是您必须使用的全部内容，那么我的建议是添加一个围绕所述文章图像的内容。然后，您将其限制为一个百分比，并使用次要类将其向左或向右浮动。

HTML

```
<div class="article_image article_image_flleft"><img src="http://www.thetop22.com/wp-content/uploads/2012/01/Black-Keys-Banner-3.png"
/></div> 
```

CSS

```
.article_image{
 width: 50%;
}
.article_image_flleft{
 float: left;
} 
```

小提琴：http: [//jsfiddle.net/D8ELj/1/](http://jsfiddle.net/D8ELj/1/)

正如 isherwood 指出的那样，从长远来看，将各种视口设置在更有利的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:25:45.380

如果没有用于进行某些计算的脚本，您可能不得不接受较小的图像。

[http://jsfiddle.net/2a66J/2/](http://jsfiddle.net/2a66J/2/)

```
img {
    max-width:72%;
    float: left;
} 
```

从技术上讲，您的网站不是“响应式”的。是“流体”。如果它是响应式的，您可以根据视口大小设置固定的最大宽度，并为所有场景设置 100% 的图像宽度。小缺点是您通常不会使用响应式设计的页面的 100% 可用视口宽度。

# jquery - 使用 jQuery 选择具有类的下一个元素

> ID：14899872
> 
> 赞同：1
> 
> 时间：2013-02-15T17:15:11.503
> 
> 标签：jquery, jquery-selectors

为了简单起见，我有两个“精选”块，第一个加载了`features-active`应用的类。

在计时器（在 jQuery 中）之后，我想`features-active`从第一个元素中删除该类，并将其应用于该类的**下一个**块`.features`。

这是我的 HTML：

```
<!-- Feature 1 -->

<div class="span3">
  <div class="features drop-shadow features-active">
    <h4><strong>SUPER</strong> RESPONSIVE</h4>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet...</p>
  </div>
</div>

<!-- Feature 2 -->

<div class="span3">
  <div class="features drop-shadow">
    <h4><strong>SUPER</strong> RESPONSIVE</h4>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet...</p>
  </div>
</div> 
```

**我唯一的问题（我今天感觉迟钝）是 - 在我的计时器触发后，我如何选择?`.features`之后的下一个元素`div.features-active`？**

这是我的 jQuery 不起作用：

```
var nextFeature = $('div.features-active').next('div.features'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:19:39.820

您需要`.next()`在节点的父节点上申请。

```
var nextFeature = $('div.features-active').parent('div.span3')
                                          .next('div.span3')
                                          .children('div.features'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:19:21.400

没有下一个`.features`，他们有不同的父母吗？

```
var nextFeature = $('div.features-active').closest('.span3')
                                          .next('.span3')
                                          .find('div.features') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:42:53.280

无需使用 .next()、.parent()、.children()、.find() 等来浪费所有开销，只需使用特征元素的索引即可。

```
var idx = 1;
setInterval(function () {
    $('div.features').removeClass('features-active');
    $('div.features').eq(idx).addClass('features-active');
    idx++;
}, 2000); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/g5Czy/2/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T17:29:59.993

我想你正在寻找这个：http: [//jsfiddle.net/umTPw/](http://jsfiddle.net/umTPw/)

```
setTimeout(function () {
   $('.features').removeClass('features-active').promise().done(function () {
      $(this).parent().next().find('.features').addClass('features-active');
   });
}, 2000); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T17:21:22.620

这个怎么样：

```
var nextFeature = $('div.features-active').next().find('div.features'); 
```

# javascript - Kendo UI ListView 拖放

> ID：14899874
> 
> 赞同：0
> 
> 时间：2013-02-15T17:15:35.773
> 
> 标签：javascript, listview, drag-and-drop, kendo-ui

我有两个 Kendo UI ListViews。我能够获取加载和显示值的可用选项列表。我还能够使拖动功能正常工作。问题是目的地的丢弃功能。我可以让第二个 ListView 注册为 dropTarget，但我无法确定如何将可拖动对象添加到目标 ListView。

以下是相关代码：

```
 var groupDataSource = getReadGroupsDataSourceFor(2819);

    try {
        var readgroups = $("#availableReadGroups").kendoListView({
            selectable: "single",
            navigatable: false,
            template: "#if(!IsSelectedGroup) {# <div style='font-size:13px;padding-left:5px;padding-top:5px;'>${GroupName}</div>#} else {# <div class=\"k-state-selected\" style=\"font-size:13px;padding-left:5px;padding-top:5px;\" aria-selected=\"true\">${GroupName}</div> #}#",
            dataSource: groupDataSource
        });

        var selectedGroups = $("#selectedGroupsValues").kendoListView({
            selectable: "single",
            navigatable: false,
            template: "#if(!IsSelectedGroup) {# <div style='font-size:13px;padding-left:5px;padding-top:5px;'>${GroupName}</div>#} else {# <div class=\"k-state-selected\" style=\"font-size:13px;padding-left:5px;padding-top:5px;\" aria-selected=\"true\">${GroupName}</div> #}#",
        });

        readgroups.kendoDraggable({
            filter: "div[role=option]",  
            hint: function (row) {
                return row.clone();
            }
        });

        selectedGroups.kendoDropTarget({
            drop: function (e) {
                var lvObject= selectedGroups.data();
                lvObject.kendoListView.dataSource.add(e.draggable);
            }
        });
    } catch (err) {
        alert(err);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:24:53.853

我终于想出了一个答案，让它在我的机器上的 IE 和 FireFox 中工作；不过，我无法让这个解决方案在 jsFiddle 中工作，而且我不知道为什么。

这是代码：

```
selectedGroups.kendoDropTarget({
        drop: function (e) {
            var lvObject= selectedGroups.data();
            lvObject.kendoListView.dataSource.add(readgroups.data("kendoListview").dataSource.getByUid(e.draggable.hint.data().uid));
        }
    }); 
```

提示属性显然包含 jQuery 对象，该对象又具有数据方法。当您执行 data 方法时，唯一返回的是具有属性 uid 的对象。使用它，您可以在可拖动对象的数据源的数据源中搜索数据项。数据项是您要提供给目标数据源的 add 方法的内容。

# javascript - 自动从 -9 旋转到 9 度

> ID：14899876
> 
> 赞同：1
> 
> 时间：2013-02-15T17:15:38.520
> 
> 标签：javascript, image, css, rotation

我目前有这个代码

```
-webkit-transition: 0.9s;
-webkit-transform: rotate(-9deg);
-moz-transition: 0.9s;
-moz-transform: rotate(-9deg);
-o-transition: 0.9s;
-o-transform: rotate(-9deg);
-ms-transition: 0.9s;
-ms-transform: rotate(-9deg); 
```

我希望它可以让我的图像旋转到 -9，然后旋转到 9，然后一遍又一遍地重复。因此，当有人在网站上时，它只会从 -9 度旋转到 9 度

编辑：我被告知需要 JavaScript 来执行此操作，所以我现在正在寻找一些 JavaScript 来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:24:32.623

你可以用[CSS 动画](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)来做到这一点，这取决于你需要[多少兼容性](http://caniuse.com/#feat=css-animation)。

```
div {
    -webkit-animation-duration: 0.9s;
    -webkit-animation-name: ninetonine;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: alternate-reverse;
    -webkit-animation-timing-function: ease-in-out;
}

@-webkit-keyframes ninetonine {
    from {
        -webkit-transform: rotate(9deg);
    }
    to {
        -webkit-transform: rotate(-9deg);
    }
} 
```

[在此处查看演示](http://jsfiddle.net/LBSHC/3/)

# c++ - 缩放位图输出扭曲图像

> ID：14899880
> 
> 赞同：0
> 
> 时间：2013-02-15T17:15:56.190
> 
> 标签：c++, image, mfc, bitmap

我有一个 2752x2200 的位图图像。我只能在我的 MFC 对话框中显示 1/3（对于明显的尺寸问题），所以如果我不缩放图像，我只会得到左上角的 917x733 块（左上角的 1/3 块）。我想将图像缩小 3 倍，以便整个图像显示在图像大小的 1/3 区域中。我已经像这样设置了灰度位图：

```
 //////////////////////////////////////////////////////////////////////////
    //////////  Setup Bitmap  ////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////

    //// FILEHEADER ////
    BITMAPFILEHEADER* bf = new BITMAPFILEHEADER;
    bf->bfType = 0x4d42;
    bf->bfSize = 6054400 + 54 + sizeof(BITMAPINFO);
    bf->bfOffBits = 54;

    //// INFOHEADER ////
    BITMAPINFOHEADER* bi = new BITMAPINFOHEADER;
    bi->biSize = 40;
    bi->biWidth = 2752;
    bi->biHeight = -2200;
    bi->biPlanes = 1;
    bi->biBitCount = 8;
    bi->biCompression = 0;
    //bi->biSizeImage = 6054400; //not required
    bi->biXPelsPerMeter = 2835;
    bi->biYPelsPerMeter = 2835;
    bi->biClrUsed = 0;
    bi->biClrImportant = 0;

    //// INFO ////
    BITMAPINFO* pbmi = (BITMAPINFO*)alloca( sizeof(BITMAPINFOHEADER) +   
        sizeof(RGBQUAD)*256);
    pbmi->bmiHeader.biSize = sizeof (pbmi->bmiHeader);
    pbmi->bmiHeader.biWidth = 2752;
    pbmi->bmiHeader.biHeight = -2200;
    pbmi->bmiHeader.biPlanes = 1;
    pbmi->bmiHeader.biBitCount = 8;
    pbmi->bmiHeader.biCompression = BI_RGB;
    pbmi->bmiHeader.biSizeImage = 0;
    pbmi->bmiHeader.biXPelsPerMeter = 14173;
    pbmi->bmiHeader.biYPelsPerMeter = 14173;
    pbmi->bmiHeader.biClrUsed = 0;
    pbmi->bmiHeader.biClrImportant = 0;
    //create grayscale color palette
    for(int i=0; i<256; i++)
    {
        pbmi->bmiColors[i].rgbRed = i;
        pbmi->bmiColors[i].rgbGreen = i;
        pbmi->bmiColors[i].rgbBlue = i;
        pbmi->bmiColors[i].rgbReserved = 0;
    }

    //// IMAGE DATA ////
    pFrame->GetImage(m_imageData);

    //////////////////////////////////////////////////////////////////////
    ////// Create image that's printed to dialog box /////////////////////
    //////////////////////////////////////////////////////////////////////
    HDC hdc = ::GetDC(NULL);  
    hbit = CreateDIBitmap(hdc, bi, CBM_INIT, m_imageData,
       pbmi, DIB_RGB_COLORS); 
```

然后我将位图绘制到我的对话框上，如下所示：

```
 BITMAP* bi = new BITMAP;
    CBitmap bmp;
    bmp.Attach(hbit);
    CClientDC dc(pWnd);
    CDC bmDC;
    bmDC.CreateCompatibleDC(&dc);
    CBitmap *pOldbmp = bmDC.SelectObject(&bmp);
    bmp.GetBitmap(bi);
    dc.StretchBlt(384,21,bi->bmWidth,bi->bmHeight,&bmDC,0,0,
        bi->bmWidth,bi->bmHeight,SRCCOPY);
    bmDC.SelectObject(pOldbmp); 
```

使用此代码，图像看起来不错，但它只是完整图像的左上角块：

![图像1](../Images/d3fd6641d1b175c6460b9157005b5350.png)

在我尝试缩小图像时，我改变了这一行：

```
 dc.StretchBlt(384,21,bi->bmWidth,bi->bmHeight,&bmDC,0,0,
            bi->bmWidth,bi->bmHeight,SRCCOPY); 
```

到：

```
 dc.StretchBlt(384,21,bi->bmWidth/3,bi->bmHeight/3,&bmDC,0,0,
            bi->bmWidth,bi->bmHeight,SRCCOPY); // 1/3 original size 
```

现在我的输出看起来缩小了，它显示了整个图像（好），但一切看起来都扭曲了（坏）：

![图2](../Images/7f417278f9e65995ddf1f845611e164c.png)

（注意图像边界周围的圆环。那些不应该在那里，当你真正看到我的图像流的实时视频时，它们会跳动并基本上破坏图像）。

**我的问题是：** *是什么导致了这种失真，有什么简单的方法可以解决吗？*

**编辑：**尝试 StretchDIBits() 后：

```
 StretchDIBits(dc.m_hDC, 384, 21, bi->bmWidth/3, bi->bmHeight/3, 0, 
            0,bi->bmWidth,bi->bmHeight, myObv->GetImageData(), 
            myObv->GetPBMI(), DIB_RGB_COLORS, SRCCOPY); 
```

我的输出看起来像这样：

i.imgur.com/DA49P8x.png

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T05:33:31.163

如果您正在缩放位图，windows api 可能在视觉上表现不佳，因为它旨在优化性能。在 StretchBlt 之前添加以下行以增强位图操作：

```
SetStretchBltMode(dc.m_hDC, HALFTONE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:21:47.387

而不是`StretchBLT`尝试[`StretchDIBits`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145121%28v=vs.85%29.aspx)：

```
StretchDIBits(dc.m_hDC, 384, 21, bi->bmWidth/3, bi->bmHeight/3, 0, 0,
              bi->bmWidth, bi->bmHeight, m_imageData, pbmi, DIB_RGB_COLORS, SRCCOPY); 
```

# sqlite - SQLite：如何模拟 POSITION 函数？

> ID：14899883
> 
> 赞同：1
> 
> 时间：2013-02-15T17:16:00.590
> 
> 标签：sqlite, position, locate

有没有办法在 SQLite 中模拟 POSITION、LOCATE、INSTR 等不受支持的函数？

# android - 更改 android FC 中的活动

> ID：14899889
> 
> 赞同：0
> 
> 时间：2013-02-15T17:16:19.773
> 
> 标签：android

当我想在我的应用程序中开始新活动时，它只是 FC，要更改的代码是：

```
 myIntent = new Intent( this,about.class);
        startActivity(myIntent); 
```

而关于类是

```
 package com.arash.rz.webtar;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

public   class about extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about);

} 
```

然后，当我在新的主代码中触摸执行代码的菜单时，我在模拟器和/或手机中得到了fc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:56:46.110

您必须在清单 ex 中添加您的第二个活动类：

```
<activity android:name=".SecondActivityClass"/> 
```

之后添加

```
</activity> 
```

# c# - Win 7 IIS 7.5 System.ComponentModel.BrowseableAttribute 的奇怪行为

> ID：14899899
> 
> 赞同：2
> 
> 时间：2013-02-15T17:17:11.137
> 
> 标签：c#, asp.net, iis-7.5

我只是想看看其他人是否会得到与我相同的行为。

我有一个名为 GridViewEx 的类，它扩展了 GridView。该类中的属性之一具有 Browsable(true) 作为注释。这允许（至少在 IIS 7.5 之前）在标记中设置属性。但在 Windows 7 IIS 7.5 上，它给出了解析器错误。请注意，在装有 IIS 7.5 的 Win 2008 服务器上，该应用程序运行良好。

所以我想知道是不是Win7中的一些IIS 7.5设置搞砸了。

## 重现步骤

a) 创建新的 ASP.Net 应用程序，框架版本使用 4.0

b) 创建一个名为 GridViewEx 的新类（get/set 只是虚拟代码，并不重要）：

```
namespace GUI.Controls
    {
        public class GridViewEx : GridView
        {
            [Browsable(true)]
            [Description("my test")]
            public int VirtualItemCount
            {
                get
                {
                    return 42;
                }
                set
                {
                    int x = value;
                    int y = x + x;
                }
            }

        }
    } 
```

c) 在 Default.aspx 中，注册标记前缀（将 WebApplication1 更改为您对项目的名称）。此行应位于 Page 指令的正下方。

```
<%@ Register TagPrefix="common" Namespace="GUI.Controls" Assembly="WebApplication1" %> 
```

d) 在 Default.aspx 中，将其添加到您的内容中：

```
<common:GridViewEx runat="server" ID="gv" VirtualItemCount="-1">

</common:GridViewEx> 
```

* * *

如果我在 IIS 7.0 或更早版本上运行此应用程序，则不会出现错误。但是，在 Win 7 IIS 7.5 上，它给出了以下错误：

```
Parser Error 
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: The 'VirtualItemCount' property cannot be set declaratively. 
```

我不明白为什么我在 Win 7 IIS 7.5 上得到错误，但在早期的 IIS 版本上没有，在 Win 2008 服务器上的 IIS 7.5 上没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:45:39.670

好的，我找到了一个 hack 来完成这项工作。将这些属性添加到`VirtualItemCount`：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
[EditorBrowsable(EditorBrowsableState.Always)]
[Bindable(true)] 
```

现在我不再收到解析器错误。我不明白为什么我必须添加这些才能在我的 Win 7 机器上工作，但在服务器上我测试了这些额外的属性是不需要的（我的 Win 7 机器和服务器都在 IIS 7.5 上） . 我想这仍然是一个谜。

非常感谢回答[这个问题](https://stackoverflow.com/questions/10180736/why-wont-my-custom-controls-text-property-show-up-in-the-properties-window)的人，因为它引导我朝着正确的方向前进。

# android - 片段内 ListView 上的 OnItemClickListener 不起作用

> ID：14899904
> 
> 赞同：14
> 
> 时间：2013-02-15T17:17:28.113
> 
> 标签：android, listview, fragment, onclicklistener

**编辑：已解决。如果项目的 XML 中有任何可聚焦的内容，它将破坏列表的触摸，换句话说，android:focusable=false 对所有复选框、开关或类似您列表的任何内容。并完成=)**

好的，这是我的问题。

我编写了一个使用**选项卡和片段**的应用程序，一切都按照我想要的方式进行，除了当我尝试在 listView 上捕获 onItemClick 时，**它甚至没有将行标记为触摸/按下/选择。**

我一直在阅读一些内容，很多人都有同样的问题，但我没有找到任何对我有帮助的回复。

我不想实现 ListFragment，事实上我什至不知道我应该如何/为什么应该，而且由于我所有的代码都已经在工作，我不知道实现一个是否会给我更多的工作要做，所以，这里是：

是否可以在片段内为单击 listView 实现侦听器？如果是，如何？

PD：minSDK=14，tatgetSDK=15

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-09T06:11:01.533

就放

```
android:focusable="false"
android:clickable="false" 
```

在布局中。对于所有文本视图、按钮等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T18:15:53.103

# 这是一个代码片段，可以做你想做的事。

```
ListView lv;

//code to get the listView instance using findViewByID etc

lv.setOnItemClickListener(new OnItemClickListener()
{
    @Override public void onItemClick(AdapterView<?> arg0, View arg1,int position, long arg3)
    { 
        Toast.makeText(EnclosingActivity.this, "Stop Clicking me", Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

# 人们通常会为此而旅行，看看你是否得到了这个覆盖：

所有点击和回调（例如：菜单/操作栏回调）都发送到片段绑定到的活动，因此它们必须在活动类而不是片段类中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-09T07:06:09.513

这可能有帮助 raghunanadan 在下面的链接中回答解决了我的问题

[listview OnItemClick 列表器在片段中不起作用](https://stackoverflow.com/questions/22420433/listview-onitemclick-listner-not-work-in-fragment)

将此添加到布局中

`android:descendantFocusability="blocksDescendants"`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-10T07:31:12.057

两个很棒的解决方案是，如果您从片段扩展 ListFragment，知道`mListView.setOnItemClickListener`在创建活动之前不会调用它，正如@dheeraj-bhaskar 暗示的那样。此解决方案确保在创建活动时设置它

```
@Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);
        mListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int position, long rowId) {
                // Do the onItemClick action

                Log.d("ROWSELECT", "" + rowId);
            }
        });
    } 
```

在查看 ListFragment 的源代码时，我遇到了这个

```
 public class ListFragment extends Fragment {
        ...........................................
     ................................................

        final private AdapterView.OnItemClickListener mOnClickListener
                = new AdapterView.OnItemClickListener() 
{
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
{
                onListItemClick((ListView)parent, v, position, id);
            }
        };
       .................................................................
    ........................................................................

    public void onListItemClick(ListView l, View v, int position, long id) 
{
        }
} 
```

附加了一个`onItemClickListener`对象，它调用`onListItemClick()` 了其他类似的解决方案，其工作方式完全相同，即覆盖`onListItemClick()`

```
 @Override
        public void onListItemClick(ListView l, View v, int position, long rowId) {
            super.onListItemClick(l, v, position, id);
           // Do the onItemClick action

                    Log.d("ROWSELECT", "" + rowId);
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T17:37:28.363

这是工作流程的概述，创建您的`ListView`及其对应的`Adapter`（用于将您的基础数据映射到 ListView 中的项目），将适配器设置为 ListView，然后添加`OnItemClickListener`到它。

更多细节和示例代码可以在以下位置找到：http: [//developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-08T03:35:44.163

如果您想将数据从片段传递到 Listview 单击上的任何活动，那么您可以修改您的代码，例如...

```
class HistoryFragment extends Fragment {  ListView historyListView;
public HistoryFragment() {
    // Required empty public constructor
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View v= inflater.inflate(R.layout.fragment_history, container, false);
    historyListView= (ListView) v.findViewById(R.id.historyDataListView);

    sendRequest();  //it is my meathod to load the listview and set the adapter
    return  v;
}

public void onStart() {
    super.onStart();
    historyListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {

            Intent intent=new Intent(getActivity(), DisplayDetails.class);

            intent.putExtra("text", historyListView.getItemAtPosition((int) l).toString());
            startActivity(intent);
          //  Toast.makeText(getActivity(),"Hello.. "+historyListView.getItemAtPosition((int) l).toString(),Toast.LENGTH_LONG).show();
        }
    });
}} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-01-06T11:30:20.443

按钮会影响监听器，尽量避免使用按钮并重新编译，它应该可以工作

# css - CSS 类特异性顺序

> ID：14899907
> 
> 赞同：2
> 
> 时间：2013-02-15T17:17:36.237
> 
> 标签：css, primefaces

我已经定义了自己的 CSS 类：

```
.my-ui-table td {
border-width: 1px;
border: 0;
padding: 5px 10px;
border-style: hidden;
border-color: inherit;
} 
```

默认 PrimeFaces css 定义了自己的类，该类被应用于：

```
.ui-panelgrid td {
border-width: 1px;
border-style: solid;
border-color: inherit;
padding: 4px 10px;
} 
```

这两个类都应用于表：

```
<table class="ui-panelgrid ui-widget my-ui-table" role="grid">...</table> 
```

当 Chrome 呈现所述表格时，来自 ui-panelgrid 类的边框样式优先于在 my-ui-table 类中定义的边框样式。我一直在阅读有关 CSS 特异性的内容，并且对于两个类定义而言，它似乎是特异性的方式是相同的，因此 class="" 属性中最后指定的那个应该会获胜。为什么没有发生这种情况？

编辑：HTML头标签：

```
<head>
 <link type="text/css" rel="stylesheet" href="/webapp/do/javax.faces.resource/my.css?ln=css">
 <link type="text/css" rel="stylesheet" href="/webapp/do/javax.faces.resource/primefaces.css?ln=primefaces">
</head> 
```

.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T17:19:33.563

重要的不是你的 class="..." 顺序中哪个排在第一位，重要的是你的 CSS 规则中哪个排在最后。这就是为什么它被称为级联样式表，因为最后一个相关的规则，具有相同或更高的特异性将被应用。因此，如果您的所有规则都在外部工作表中并且它们具有相同的特异性，则将应用最后一个。但是内联/内部样式优先于外部样式。（虽然这并不意味着你应该使用它们）

# ios - 配置文件状态为待处理

> ID：14899908
> 
> 赞同：2
> 
> 时间：2013-02-15T17:17:43.413
> 
> 标签：ios, iphone, provisioning-profile, ios-provisioning

创建配置文件后，状态仍为 PENDING。这需要多久？

它花费了大约 2 个小时，但状态仍在等待中。

![在此处输入图像描述](../Images/42cb8e7a5786f81342f52a4fdd2c0275.png)

我第一次遇到这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:24:48.387

我也遇到了，看来是苹果的问题。我的已经等待了 30 分钟。编辑：它是固定的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T18:07:46.260

苹果昨天显然进行了超过 24 小时的维护。有一条消息：

> “我们正在对 Provisioning 服务进行维护”

现在他们已删除此消息，并且配置服务仍然无法正常工作。它曾经是即时的，一旦您发送请求，它就会在您刷新页面后几秒钟后完成。

当我昨天再次注册该程序开始构建应用程序时，我感到非常愤怒。iPhone 模拟器由于某种原因不能用于视频编辑，我无法在没有配置的情况下部署到 iPhone，所以我无法测试我的代码。

苹果公司缺乏信息是荒谬的，因为他们很清楚存在问题，但甚至懒得通知用户，甚至删除了旧通知。对于任何第一次配置并且严重延迟我的应用程序开发的新手开发人员来说，这一定会非常困惑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T21:37:18.737

有同样的问题，但现在可以了。我尝试了很多东西，但没有任何帮助，而且我没有看到任何关于苹果维护的消息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T17:25:25.557

对我来说是的，这也发生了。请参阅同一页面中的苹果消息。

```
"We are performing maintenance on the provisioning service" 
```

也有人在[苹果论坛上报告了同样的问题。](https://devforums.apple.com/thread/180298?tstart=0)

# css - 溢出隐藏破 translateZ

> ID：14899911
> 
> 赞同：8
> 
> 时间：2013-02-15T17:17:58.897
> 
> 标签：css, overflow, css-transforms

## 设置

我`div`在一个容器内有三个在各个方向使用 CSS3 翻译的 s，该容器`div`本身就在一个外部的 fullscreen`div`中。最外面`div`的，全屏的，已经`perspective`设置好了。

**HTML**

```
<div class='outer'>
  <div class='container ofhidden'>
    <div class='item' id='item1'></div>
    <div class='item' id='item2'></div>
    <div class='item' id='item3'></div>
  </div>
</div> 
```

**CSS**

```
.outer {
  perspective: 1000;
  width: 100%;
  height: 100%;
  position: absolute;
  overflow: hidden;
}
.outer .container {
  background-color: grey;
  width: 130%;
  height: 100%;
  padding: 1em;
}
.outer .container.ofhidden {
  overflow: hidden;
}
.outer .container .item {
  border: 1px solid black;
  width: 50px;
  height: 50px;
}
.outer .container .item#item1 {
  background-color: green;
  transform: translate3d(10px, 10px, -10px);
}
.outer .container .item#item2 {
  background-color: goldenrod;
  transform: translate3d(10px, 10px, 0);
}
.outer .container .item#item3 {
  background-color: red;
  transform: translate3d(10px, 10px, 10px);
} 
```

## 问题

`div`包含已平移元素的 已在`overflow: hidden;`其上设置禁用或忽略 Z 方向上的平移，而不影响其他方向。

## 演示

请参阅此笔[http://codepen.io/aaron/pen/Ihrxj](http://codepen.io/aaron/pen/Ihrxj)的代码和一个用于切换`overflow: hidden;`以演示效果的按钮。

对于不熟悉 HAML、SCSS/Compass 或 CoffeeScript 的人，您可以单击 HTML、CSS 和 JS 旁边的预处理器名称，以在 codepen 中查看生成的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:45:44.360

我不知道为什么会这样，但我可以建议几个解决方法。

一个明显的解决方案是在项目上设置`overflow: hidden;`（如果你真的需要它）（使用`.item`或`.container > *`，而不是将其应用于容器。

另一种选择是绝对定位项目。它不是很方便，但它可能适合您的布局（您可以相对于容器绝对定位项目）。

在这两种情况下`transform3d`都不会被禁用/忽略。

# java - 布尔语句不起作用？

> ID：14899912
> 
> 赞同：2
> 
> 时间：2013-02-15T17:17:58.857
> 
> 标签：java, loops, boolean

下面的代码我采用两个数组并比较它们。当它们都相同时，我会显示正确的消息，但是当它为假时，两条消息都会显示。显示*System.out.println("identical");的最后一个 if 语句* 即使布尔值为假，似乎也总是显示。为什么是这样？？？？

```
public static void compareArrays(int[] a, int[] n){

  boolean b = false;
  for (int i = 0; i < n.length; i++) {
    if (n[i] == a[i]) {
        b = true;
    } else {
        b = false;
        System.out.println("different");
        break;
    }
  } 

  if (b = true){
    System.out.println("identical");
  } 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T17:19:09.480

改变这个：

```
if (b = true){
    System.out.println("identical");
} 
```

至：

```
if (b == true){
    System.out.println("identical");
} 
```

或更好

```
if (b){
    System.out.println("identical");
} 
```

您正在分配一个值而不是比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T17:18:53.443

[`=`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)是赋值运算符。[`==`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)是相等运算符。

```
if (b = true){ 
```

应该

```
if (b ==true){ 
```

或者`b`简单的布尔值：

```
 if(b) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:21:17.123

好吧，您不`b`与 true 进行比较，而是在执行 if 语句之前*设置*它。

将 if 语句更改为或者`if(b == true)`或简单地`if(b)`。

# regex - 在 php 正则表达式中使用 if-then-else 捕获

> ID：14899916
> 
> 赞同：0
> 
> 时间：2013-02-15T17:18:07.923
> 
> 标签：regex, pcre

我对正则表达式非常迷茫。这对我来说只是黑魔法。这是我需要的：

*   有一个文件名：some_file.jpg
*   它可能采用以下格式：some_file_p250.jpg
*   以简单格式匹配文件的正则表达式：/^([a-zA-Z_-0-9]+).(jpg|jpeg|png)$/
*   以高级格式匹配文件的正则表达式： /^([a-zA-Z_-0-9]+)(_[az]?[0-9]{2,3}).(jpg|jpeg|png )$/

我的问题如下：如何使 "(_[az]?[0-9]{3,4})" 部分可选？我尝试向第二组添加一个问号，如下所示：

```
/^([a-zA-Z_\-0-9]+)(_[a-z]?[0-9]{3,4})?\.(jpg|jpeg|png)$/ 
```

即使该模式有效，它总是会在第一组中捕获第二组的内容，而将第二组的内容留空。

我怎样才能使这项工作分别捕获文件名、高级部分（_p250）和扩展名？我认为这与第一组的贪婪有关，但我可能完全错了，即使我是对的，我仍然不知道如何解决它。

谢谢你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:27:03.013

我认为这就是你想要的：

```
/^([a-zA-Z_\-0-9]+)(|_[a-z]?[0-9]{3,4})?\.(jpg|jpeg|png)$/ 
```

或者

```
/^([\d\w\-]+)(|_[a-z]?[0-9]{3,4})\.(jpg|jpeg|png)$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:33:17.510

在第一个加号之后添加问号将使第一个捕获表达式非贪婪。使用您的测试用例，这对我有用：

```
/^([a-zA-Z_\-0-9]+?)(_[a-z]?[0-9]{3,4})?\.(jpg|jpeg|png)$/ 
```

我用 Javascript 测试，而不是 PHP，但这是我的测试：

```
"some_file_p250.jpg".match(/^([a-zA-Z_\-0-9]+?)(_[a-z]?[0-9]{3,4})?\.(jpg|jpeg|png)$/) 
```

和我的结果：

```
["some_file_p250.jpg", "some_file", "_p250", "jpg"] 
```

根据我的经验，使捕获表达式不贪婪会使正则表达式更加直观，并且通常会使它们按照我期望的方式工作。就您而言，它正在做您怀疑的事情；第一个表达式是捕捉一切，从不给第二个表达式捕捉任何东西的机会。

# java - 将 JTable 动态添加到 JScrollPane

> ID：14899918
> 
> 赞同：6
> 
> 时间：2013-02-15T17:18:11.883
> 
> 标签：java, swing, jtable, jscrollpane

当用户提示我这样做时，我有一个要填充的表。问题是，我无法预料表格最终会有多少行。在将显示表格的面板的构造函数中，我有

```
 // add empty scrollPane to JPanel which will later hold table
              scrollPane = new JScrollPane(); 
    add(scrollPane); 
```

此类包含一个方法，当我想最终显示表格时将调用该方法

```
 public void displayTable(String[] columnNames, String[][] dataValues)
{
    table = new JTable(dataValues, columnNames);
    table.setPreferredScrollableViewportSize(new Dimension(300, 80)); 
    table.setFillsViewportHeight(true); 
    scrollPane.add(table);

    this.setVisible(true);
    scrollPane.repaint();

} 
```

问题是，表格永远不会显示。我只看到了 ScrollPane 所在位置的轮廓，里面没有表格。为什么表格不显示，我该如何解决？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T17:29:16.927

您不应该将组件添加到 JScrollPane，而是添加到其 JViewport：

```
scrollPane.getViewport ().add (table); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T17:30:14.947

而不是将表格添加到 JScrollPane 创建滚动窗格的视口，然后将其视图设置为表格。改用以下代码：
`scrollPane.setViewportView(table)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T17:35:57.930

通常，您会一起创建 the`JTable`和 the `JScrollPane`，即使您还没有任何值。

最好将[DefaultTableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)或`TableModel`您扩展的用于动态表。

# windows - 如何为 Windows Phone 实现 GPS

> ID：14899923
> 
> 赞同：0
> 
> 时间：2013-02-15T17:18:30.127
> 
> 标签：windows, azure

我是 Windows Phone 开发的新手。我需要了解如何在 Windows Phone 8 中启用 GPS 功能。我需要在 MAP 上定位点

-马亨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:22:34.120

使用 Windows Phone 8，您可以创建利用手机物理位置的应用程序。位置感知应用程序的场景包括使用用户的即时位置将用户签入 Web 服务，并在用户位置随时间变化时跟踪用户位置。手机提供的位置数据来自多个来源，包括 GPS、Wi-Fi 和蜂窝网络。有两组不同的 API 可用于将位置数据合并到您的应用程序中。本主题将帮助您确定哪个位置 API 适合您的应用程序。Windows Phone 运行时位置 API

**Windows Phone 运行时位置 API 是 Windows Phone 8 中的新功能。它具有以下功能：**

可从托管代码和本机代码访问。如果您正在编写 Direct3D 应用程序，则必须使用此 API 进行定位。如果您正在创建托管应用程序，建议您也使用此 API。

跟踪位置时，应用程序可以请求在指定时间间隔后或设备从先前位置移动至少指定距离后接收位置更新。

与 Windows 8 融合。虽然两个平台之间存在细微差别，但如果您同时针对手机和桌面，此 API 将允许您重用大部分位置代码。

有关在应用程序中使用 Windows Phone 运行时位置 API 的信息，请参阅以下主题。

```
How to get the phone's current location for Windows Phone 8 
```

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206956(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206956(v=vs.105).aspx)

```
How to continuously track the phone's location for Windows Phone 8 
```

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj247548(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj247548(v=vs.105).aspx)

```
How to run location-tracking apps in the background for Windows Phone 8 
```

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935(v=vs.105).aspx)

若要下载演示获取手机当前位置、跟踪手机位置以及在后台跟踪位置的示例应用，请参阅 Windows Phone 8 的位置示例。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431800%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431800%28v=vs.105%29.aspx)

# grails - 依赖范围的确切含义是什么，例如构建、测试等

> ID：14899924
> 
> 赞同：1
> 
> 时间：2013-02-15T17:18:42.133
> 
> 标签：grails, scope

当我努力创建一个将安装到另一个项目中的插件时，我打开了几个线程。我得到了一些帮助，但我现在意识到我尝试解决的部分问题是猜测，而猜测游戏的一部分是我对构建、测试等的含义并不完全清楚。这是我的猜测：

`build - build the war file`

`runtime - running on the target platform, maybe run-app as well`

`compile - compiling Groovy/Java`

`test - running test-app`

`provided - not really sure`

其中一些范围还包括其他范围，但从我在一些 SO 答案中看到的情况来看，对此存在一些混淆。我认为用户指南中缺少对范围的明确定义以及示例和含义。这是一个公平的观察吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:53:31.460

*   构建 - 仅由构建系统使用。不分布在你的战争中。不适用于您的代码进行编译
*   运行时 - 运行应用程序所需，随您的战争一起分发。
*   编译 - 编译所需，随你的战争一起分发
*   测试 - 仅用于编译和运行测试，不随您的战争分发
*   提供 - 编译所需但不随您的战争分发 - 这对于可能在公共文件夹中包含依赖项并在分发不同版本时导致类路径问题的应用服务器很有用（某些版本的 tomcat 与 log4j 有此问题）

注意 - 这些并不是真正的 grails，它们来自 maven

# json - 使用 ASIHTTPRequest 的 iOS-POST 请求

> ID：14899928
> 
> 赞同：1
> 
> 时间：2013-02-15T17:18:52.480
> 
> 标签：json, ios6, asihttprequest

我已经通过我的 MAC 上的 MAMP 建立了一个服务器。有人在下面编写了 PHP 脚本：

```
header("Content-Type:text/html; charset=utf-8");
if(!isset($_COOKIE['hostname']))$hostname = "http://127.0.0.1";
    else $hostname = $_COOKIE['hostname'];
if(!isset($_COOKIE['username']))$username = "root";
    else $username = $_COOKIE['username'];
if(!isset($_COOKIE['password']))$password = "";
    else $password = $_COOKIE['password'];

if(!isset($_POST['operate'])){
    echo "Please Input:";
    print(json_encode("Error:Please Input:"));
    return false;
}
else{
    $operate = $_POST['operate'];
    switch ($operate){
        case "login":
            login($_POST['hostname'],$_POST['username'],$_POST['password']);
            break;
        case "clean":
            clean();
            break;
        case "search":
            search($_POST['form'], $_POST['field'], $_POST['value']);
            break;
        case "read":
            if(!isset($_POST['num']))read1($_POST['form']);
            else read2($_POST['$form'], $_POST['$base'], $_POST['$num']);
            break;
        case "alter":
            alter($_POST['form'], $_POST['field'], $_POST['id'],$_POST['value']);
            break;
        case "delete":
            delete($_POST['form'],$_POST['id']);
            break;
        case "insert":
            if(isset($_POST['device']))insert1($_POST['form'],$_POST['device'], $_POST['port'], $_POST['vlan'], $_POST['singleMulti'], $_POST['function'], $_POST['destDevice']);
            else insert2();
            break;
        default:
            echo "Please Input:";
            print(json_encode("Error:Please Input:"));
            return false;

    }
}

function login($hostname,$username,$password){
//Login
    $link = @mysql_connect($hostname,$username,$password);
    if(!$link){
        echo "Fail to connect the DataBase";
        print(json_encode("Error:Fail to connect the DataBase"));
        return false;
    }
    mysql_query("set names utf8");
    mysql_select_db("qrcode");

    setcookie("hostname", $hostname, time()+ 9999999);
    setcookie("username", $username, time()+ 9999999);
    setcookie("password", $password, time()+ 9999999);
    mysql_close();
    return true;
}
function search($form, $field, $value){
//query
    login($hostname,$username,$password);
    $sql="select * from $form where $field = '$value'";
    $result = @mysql_result($sql);

    if(!$result){
        echo "Fail to query the DataBase";
        print(json_encode("Error:Fail to query the DataBase"));
        return false;

    }
    while($e=mysql_fetch_assoc($result))
        $output[] =$e;  
    echo json_encode($output);  
    mysql_close();
    return true;
}

function read1($form){
    if(read2($form, 0, 5))return true;      
    else return false;
}

    //Clean ...............
//Load.................
    //Alter................
//Delete...............
//Insert............... 
```

而我使用ASIHTTPRequest，代码如下：

```
NSURL *url=[NSURL URLWithString:@"http://localhost/QRcode.php"];
ASIFormDataRequest *request=[[ASIFormDataRequest alloc]initWithURL:url];

[request setRequestMethod:@"POST"];
[request setDelegate:self];

[request setPostValue:@"login" forKey:@"operate"];
[request setPostValue:@"localhost" forKey:@"hostname"];
[request setPostValue:@"root" forKey:@"username"];
[request setPostValue:@"root" forKey:@"password"];

[request setPostValue:@"search" forKey:@"operate"];
[request setPostValue:@"5020" forKey:@"form"];
[request setPostValue:@"id" forKey:@"field"];
[request setPostValue:@"1" forKey:@"value"];

[request startSynchronous];
NSLog(@"%@",[request responseString]); 
```

我很确定“5020”表格已经存在于我的数据库中，但我得到了这个结果：

```
Fail to query the DataBase Error:\u6570\u636e\u5e93\u67e5\u8be2\u5931\u8d25" 
```

我尝试搜索其他表单，但仍然显示相同的错误。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T02:18:01.950

解决了.....类似：的字符串`u\6570\u5647\u......`是UTF-8编码，您只需将应用程序的语言设置更改为中文，然后所有奇怪的字符串都消失了.....

# javascript - 验证 javascript 表达式

> ID：14899932
> 
> 赞同：0
> 
> 时间：2013-02-15T17:19:09.007
> 
> 标签：javascript, testing

我做了一个性别表达测试——

```
function gender()
{
    var gender = document.form1.radio[0].checked;
    var gender1 = document.form1.radio[1].checked;  
        if(gender || gender1)
        {
        }
        else
        {
            errorMsg = errorMsg + "please select your gender\n" 
        }
} 
```

但我希望能够写出来，这样就不需要像这样空洞的积极结果-

```
if ((alphabetic.test(fname)== false) || (alphabetic.test(lname)== false))
{
alertmsg = alertmsg + "Name should be in alphabets:" + "\n";
} 
```

如果我看起来很愚蠢，我很抱歉，我是一个完全的初学者。任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:22:26.913

```
function gender()
{
var gender = document.form1.radio[0].checked;
var gender1 = document.form1.radio[1].checked;  
    if(!(gender || gender1))
    {
        errorMsg = errorMsg + "please select your gender\n" 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:22:32.933

如果我理解正确：

```
if(!gender && !gender1) {
    errorMsg = errorMsg + "please select your gender\n" 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:28:02.143

不太确定您要做什么，但请尝试使用逻辑非“！”：

```
function gender()
{
    var gender = document.form1.radio[0].checked;
    var gender1 = document.form1.radio[1].checked;  
    if !(gender || gender1)
    {
        errorMsg = errorMsg + "please select your gender\n" 
    }

} 
```

# java - 在 Struts 1.2 中使用 JavaScript 提交表单

> ID：14899934
> 
> 赞同：1
> 
> 时间：2013-02-15T17:19:16.953
> 
> 标签：java, javascript, struts-1, struts1

我在我的应用程序中使用 Struts。

我正在尝试使用 javascript 提交表单。因此我在 html 文件中做了这个：

```
<html:form name="returnForm" action="/returnMedia"> 
```

这在`<script>`标签中：

```
document.forms["returnForm"].submit(); 
```

这通常是我们在使用 javascript 提交表单时所做的。

但是在 struts 1.2 中，我遇到了一个异常，要求我也设置表单的类型。

检查文档，这似乎不是在 struts 1.2 中提交表单的正确方法。

请让我知道如何进行此操作。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:28:51.257

这个怎么样

```
{
document.forms[0].action = "UserAction.do?method=add"
document.forms[0].submit();

} 
```

看看这个链接 [http://www.dzone.com/tutorials/java/struts/struts-example/struts-dispatch-action-example-1.html](http://www.dzone.com/tutorials/java/struts/struts-example/struts-dispatch-action-example-1.html)

# android - 将 ADB 设置为 TCP/IP 模式：找不到设备？

> ID：14899935
> 
> 赞同：16
> 
> 时间：2013-02-15T17:19:20.293
> 
> 标签：android, ubuntu, adb

我之前已经使用过这个命令来设置 ADB 监听 TCP/IP，但这次我惊呆了。问题是它抛出的错误毫无意义：

```
$ adb tcpip 5555
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
error: device not found 
```

事实上，即使尝试将其置于 USB 模式也不起作用，并出现同样的错误：

```
$ adb usb
error: device not found 
```

只是为了提供信息，adb 帮助说：

```
adb usb                      - restarts the adbd daemon listening on USB
adb tcpip <port>             - restarts the adbd daemon listening on TCP on the specified port 
```

我没有对 Android SDK 进行任何更改（没有更新）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-15T17:33:27.630

问题是我必须通过 USB 连接 Android 设备（同一设备或其他设备）才能执行

```
$ adb tcpip 5555
restarting in TCP mode port: 5555 
```

然后我可以拔掉这个 USB 设备并通过 TCP 连接到 LAN 上的其他设备。

根本没有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-10T01:40:22.570

确保您的设备在开发人员工具下设置为调试，然后在主机的命令行中，键入：

```
$ adb tcpip 5555                  - restarts the adbd daemon listening on TCP on the specified port (typically 5555)

restarting in TCP mode port: 5555 
```

如果您收到“**错误：未找到设备**”，则需要通过 USB 数据线临时连接 Android。（这甚至不需要是同一台设备，也不需要保持连接）

然后，通过 IP 地址连接到 Android 设备。（确保您的 Android 已连接到您的本地网络，然后找到 IP 地址，单击 wifi 网络连接以查看连接详细信息。）

```
$ adb connect 192.168.0.10        - connects over network to remote device IP (replace 192.168.0.10 with your Android device's IP address)

connected to 192.168.0.10:5555 
```

根据您的连接，第一次建立可能需要一分钟左右的时间。

要切换回 USB 连接，请键入：

```
$ adb usb                         - restarts the adbd daemon listening on USB 
```

补充笔记：

*   您不需要 root 访问权限即可使用。
*   您可能需要在防火墙中打开端口 (5555)。
*   您可以使用“ping”来确保您的主机可以在网络上找到设备

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-29T15:52:34.120

你可能想要的是：

```
 connect <host>[:<port>]       - connect to a device via TCP/IP
                                 Port 5555 is used by default if no port number is specified. 
```

所以：

```
$ adb connect 192.168.1.38 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T19:55:38.053

`adb usb`和命令控制设备上运行的守护进程`adb tcpip <port>`的传输模式。`adbd`为了改变模式，当前的传输必须是功能性的。在您的情况下，`adbd`它在 USB 模式下运行 - 因此您必须连接 USB 电缆才能使模式更改请求到达守护进程。

如果您想避免为了启用 TCPIP 传输而必须连接 USB - 您可以更改默认设置或从设备本身的终端仿真器手动切换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-20T07:00:03.613

我也遇到了这个问题，并尝试在一周内解决。最后，当我更改设备中的设置以允许在充电时进行调试时，它在几分钟内就解决了。我还确保启用了允许USB调试，因为有时当您在充电时选择允许调试时，允许USB调试将被禁用。

在那之后，我再试`adb tcpip 5555`一次，瞧！没有更多的`no emulators...`消息。然后我连接使用`adb connect 'ip address':5555`，它就像魅力一样。

# thumbnails - 为什么 facebook 只显示通过 OG 标签调试检测到的多个图像中的 2 个？

> ID：14899938
> 
> 赞同：0
> 
> 时间：2013-02-15T17:19:28.770
> 
> 标签：thumbnails, meta-tags

从我创建的测试网站将 url 链接添加到 facebook 时，我上传了 3 张图片，facebook 将所有 3 个缩略图显示为选项。下次我将完全相同的 url 链接添加到 facebook 时，它现在只显示 2 张图片而不是可能的 3 张图片。

然后我注意到，对于很多网站来说，它只显示了多个可能图像中的 2 个。知道 facebook 发生了什么变化以及“规则”是什么吗？我的测试站点是 WordPress，但我也注意到非 WordPress 站点的这个问题。

我做了一堆研究，并尝试使用多个 OG 图像标签来强制它看到超过 2 个但同样，即使 facebook 调试器显示来自 OG 图像标签的所有可能的图片，facebook 也只显示多张图片中的 2 个。

我想验证所有 3 张图片都是有效的图片格式/大小，因此我删除了其中一个 OG 图像标签以强制它显示另外两个并且它确实显示了它们。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T13:58:56.337

您可能为您的帐户配置了 2 个 FB 应用程序。禁用一个，只保持一个活动，检查一下

# asp.net - 尝试删除当前成员时出错

> ID：14899945
> 
> 赞同：0
> 
> 时间：2013-02-15T17:19:46.203
> 
> 标签：asp.net, umbraco, profile-provider

我在 Umbraco 网站上运行了一个 .NET 用户控件，我希望能够从代码隐藏中删除当前成员（我意识到这听起来不是一个好计划，但这确实适用于普通的 ASP。 NET Forms 站点），但调用`System.Web.Security.Membership.DeleteUser(usernameToDelete, trueOrFalse);`给了我（在我重定向到的页面上）：

```
No member with username 'test10@test.test' exists
Exception Details: System.Configuration.Provider.ProviderException: No member with username 'test10@test.test' exists
[ProviderException: No member with username 'test10@test.test' exists]
   umbraco.providers.members.UmbracoProfileProvider.SetPropertyValues(SettingsContext context, SettingsPropertyValueCollection collection) +346
   System.Configuration.SettingsBase.SaveCore() +402
   System.Configuration.SettingsBase.Save() +109
   System.Web.Profile.ProfileBase.SaveWithAssert() +31
   System.Web.Profile.ProfileBase.Save() +72
   System.Web.Profile.ProfileModule.OnLeave(Object source, EventArgs eventArgs) +9025062
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

为什么在我删除用户并更改页面后尝试设置属性值？我看不到如何设置/删除当前的 Umbraco 成员。

* * *

编辑：我正在使用 umbraco v 4.11.1（程序集版本：1.0.4715.27659）

这是我尝试过的最长版本的注销代码，但仍然出现错误：

```
// sort out problems with umbraco caches:
Member.RemoveMemberFromCache(Member.CurrentMemberId());
Member.ClearMemberFromClient(Member.CurrentMemberId());

Roles.RemoveUserFromRole(Page.User.Identity.Name, JobShopRoles.RoleNames.Candidate.ToString());

//logout from: http://stackoverflow.com/questions/412300/formsauthentication-signout-does-not-log-the-user-out
FormsAuthentication.SignOut();
Page.Session.Clear();  // This may not be needed -- but can't hurt
Page.Session.Abandon();

// Clear authentication cookie
HttpCookie rFormsCookie = new HttpCookie(FormsAuthentication.FormsCookieName, "");
rFormsCookie.Expires = DateTime.Now.AddYears(-1);
Page.Response.Cookies.Add(rFormsCookie);

// Clear session cookie 
HttpCookie rSessionCookie = new HttpCookie("ASP.NET_SessionId", "");
rSessionCookie.Expires = DateTime.Now.AddYears(-1);
Page.Response.Cookies.Add(rSessionCookie);
// Invalidate the Cache on the Client Side

Page.Response.Cache.SetCacheability(HttpCacheability.NoCache);
Page.Response.Cache.SetNoStore();
//END logout

System.Web.Security.Membership.DeleteUser(currentUser.UserName, true);

//TODO: this will consistently give an error trying to update a property on a deleted member. Qs:
//http://stackoverflow.com/questions/14899945/error-trying-to-delete-current-member
//http://our.umbraco.org/forum/core/general/38455-Error-trying-to-delete-current-Member
Response.Redirect("/", false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:52:10.053

如果在删除代码隐藏之前从代码隐藏中注销当前用户会发生什么？

看起来已删除的用户仍处于登录状态并存在于当前会话中，因此 Umbraco profileprovider 尝试对其进行处理...

编辑：在 FormsAuthentication Logout 之后尝试这两种方法，看看它是否有帮助：

```
Member.RemoveMemberFromCache(Member.CurrentMemberId());
Member.ClearMemberFromClient(Member.CurrentMemberId()); 
```

编辑2：

我查看了 UmbracoProfileProvider 类以查看导致错误的原因：

```
 public override void SetPropertyValues(SettingsContext context,
 SettingsPropertyValueCollection collection) {

                string username = (string)context["UserName"];
                bool authenticated = (bool)context["IsAuthenticated"];

                if (String.IsNullOrEmpty(username) || collection.Count == 0)
                    return;

                Member m = Member.GetMemberFromLoginName(username);
                if (m == null)
                    throw new ProviderException(String.Format("No member with username '{0}' exists", username));

                foreach (SettingsPropertyValue spv in collection) {
                    if (!authenticated && !(bool)spv.Property.Attributes["AllowAnonymous"])
                        continue;

                    if (m.getProperty(spv.Name) != null)
                        m.getProperty(spv.Name).Value = spv.PropertyValue;
                }

            } 
```

在提供者尝试根据用户名检索当前成员后，您可以看到您的异常消息。无论哪种方式，您的上下文仍然包含 UserName 或 SettingsPropertyValueCollection 计数 > 0，因此您注销成员的代码似乎仍然留下一些东西。

尝试这部分而不是您拥有的所有注销代码：

```
 Member.RemoveMemberFromCache(Member.CurrentMemberId());
   Member.ClearMemberFromClient(Member.CurrentMemberId());
   FormsAuthentication.SignOut();
   Roles.DeleteCookie();
   HttpContext.Current.Session.Clear();
   System.Web.Security.Membership.DeleteUser(usernameToDelete, false); 
```

这将从缓存和客户端中删除并清除成员，注销，删除角色 cookie 并清除当前会话。最后，注销后，使用其用户名删除该成员。

# udp - 我想在关闭后重用一个临时端口

> ID：14899950
> 
> 赞同：0
> 
> 时间：2013-02-15T17:20:08.450
> 
> 标签：udp

我想打开一个临时端口，使用它一段时间，关闭它——但不允许任何其他进程抓取它——然后再次打开它。这一系列事件使我能够测试一个网络端点出现故障和恢复。在现实生活中，端口号不会是短暂的。

我想这样做来测试我的网络连接代码。我正在并行运行大量测试，它们使用临时端口以避免相互冲突（而且我宁愿没有端口的中央目录）。我的测试偶尔会失败，因为它无法重新获取相同的端口，大概是因为另一个测试已经抓住了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:01:38.387

只需记住它是什么并第二次显式绑定到它。但是你不能阻止其他人在两者之间抓住它。快点 ;-）

# android - androidsharingIntent 用于不同的操作

> ID：14899961
> 
> 赞同：3
> 
> 时间：2013-02-15T17:20:42.697
> 
> 标签：android, android-intent, share

对于以下 shareIntent：

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);         
sharingIntent.setType("text/plain");
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
startActivity(Intent.createChooser(sharingIntent, "to share this!")); 
```

该应用程序将弹出具有共享功能的应用程序列表：

我想问是否可以以客户选择的方式进行编码，例如。whatsapp 或 SMS 它会执行 Action A，但如果客户选择 Facebook，它会执行 Action B？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:11:56.573

您正在寻找的是类似于 using`startActivityForResult()`并希望目标应用程序将设置结果，以便您可以收到有意义`Intent data`的`onActivityResult`

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){} 
```

然而; 不幸的是，这**并不**可靠，并且不适用于大多数应用程序。

我已经用包括 SMS、Google+、Facebook、Gmail 和 ColorNote 在内的多个应用程序对其进行了测试；对于他们所有人，我都进入`data=nulll`了我的状态，`onActivityResult`除了`ColorNote`我得到了一个有效`Intent data`的动作，比如`content://note.socialnmobile.provider.colornote/notes/41`

所以它真的取决于目标应用程序，我知道没有其他可靠的方法可以让您的应用程序知道用户选择哪个应用程序来共享数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:18:33.213

这是我不久前所做的共享选项的一个示例

**更新：**

```
public class CustomShareDialogActivity extends Activity {

private ArrayList< AppToSendOption > appsOptions = new ArrayList< AppToSendOption >();

@Override
protected void onCreate( Bundle arg0 ) {
    super.onCreate( arg0 );
    setContentView( R.layout.show_share_dialog );
    final Button button = (Button)findViewById( R.id.button1 );
    button.setOnClickListener( new View.OnClickListener() {

        @Override
        public void onClick( View v ) {
            getListOfShareApps();
            showShareDialog();              
        }
    } );

}

private void getListOfShareApps() {
    if( !appsOptions.isEmpty() ){ return; }

    Intent sendOption = new Intent();
    sendOption.setType( "application/*" );
    sendOption.setAction( Intent.ACTION_SEND_MULTIPLE );
    List< ResolveInfo > ris = getPackageManager().queryIntentActivities( sendOption, 0 );

    for ( ResolveInfo ri : ris ) {
        Drawable icon = ri.loadIcon( getPackageManager() );
        String appname = ( String ) ri.loadLabel( getPackageManager() );
        String packagename = ri.activityInfo.packageName;
        String classname = ri.activityInfo.name;
        appsOptions.add( new AppToSendOption( icon, appname, packagename, classname ) );
    }
}

private void showShareDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder( this );
    ArrayAdapter< AppToSendOption > adapter01 = new SendOptionsAdapter( this, appsOptions );
    builder.setTitle( "Options" )
            .setSingleChoiceItems( adapter01, -1, new OnClickListener() {

        @Override
        public void onClick( DialogInterface dialog, int which ) {
            AppToSendOption app = appsOptions.get( which );
            String packagename = app.getPackagename();
            String classname = app.getClassname();
            // Right here, check the package name to see which app is selected, and do the appropriate
            // action.
            Toast.makeText( getApplicationContext(), packagename + ", " + classname, Toast.LENGTH_SHORT).show();
            dialog.dismiss();
        }
    } ).setNegativeButton( "Cancel", null ).show();

}

private class AppToSendOption {

    Drawable icon;
    String appname;
    String packagename;
    String classname;

    public AppToSendOption( Drawable icon, String appname, String packagename, String classname ) {
        this.icon = icon;
        this.appname = appname;
        this.packagename = packagename;
        this.classname = classname;
    }

    Drawable getIcon() {
        return icon;
    }

    String getAppname() {
        return appname;
    }

    String getPackagename() {
        return packagename;
    }

    String getClassname() {
        return classname;
    }
}

public class SendOptionsAdapter extends ArrayAdapter< AppToSendOption > {
    private List< AppToSendOption > apps;
    private LayoutInflater inflater;
    private static final int RESOURCE = R.layout.send_option_dialog;

    class ViewHolder {
        TextView text;
        ImageView icon;
    }

    public SendOptionsAdapter( Context context, List< AppToSendOption > objects ) {
        super( context, RESOURCE, objects );
        inflater = LayoutInflater.from( context );
        apps = objects;
    }

    @Override
    public View getView( int position, View convertView, ViewGroup parent ) {
        ViewHolder holder;
        if ( convertView == null ) {
            holder = new ViewHolder();
            convertView = inflater.inflate( RESOURCE, null );
            holder.text = ( TextView ) convertView.findViewById( R.id.textView_appname );
            holder.text.setTextColor( Color.BLACK );
            holder.icon = ( ImageView ) convertView.findViewById( R.id.imageView_appicon );
            holder.icon.setAdjustViewBounds( true );
            holder.icon.setScaleType( ScaleType.CENTER_INSIDE );
            convertView.setTag( holder );
        } else {
            holder = ( ViewHolder ) convertView.getTag();
        }
        holder.icon.setImageDrawable( apps.get( position ).getIcon() );
        holder.text.setText( apps.get( position ).getAppname() );

        return convertView;
    }
}

} 
```

这是 send_option_dialog 的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView
    android:id="@+id/imageView_appicon"
    android:layout_width="42dp"
    android:layout_height="42dp"
    android:layout_gravity="center"
    android:layout_marginBottom="15dp"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="15dp" >
</ImageView>

<TextView
    android:id="@+id/textView_appname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginLeft="2dp"
    android:lines="1"
    android:textColor="#fff"
    android:textSize="20sp" >
</TextView> 
```

**它并不完美，您可能会考虑改用 DialogFragment，但希望这会给您提供如何创建对话框的想法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:33:39.817

> 我想问是否可以以客户选择的方式进行编码，例如。whatsapp 或 SMS 它会执行 Action A，但如果客户选择 Facebook，它会执行 Action B？

不，有两个原因：

1.  An`Intent`只有一个动作，并且`startActivity()`（和`createChooser()`）只采取一个`Intent`。

2.  没有“whatsapp”。没有“短信”。没有“脸书”。有些应用程序具有不同的包名称，您无法可靠地确定特定包名称是“whatsapp”、“SMS”还是“Facebook”。例如，有数百甚至数千个 SMS 客户端。

如果您希望允许用户共享多种类型的内容（例如，短字符串或长字符串），请让用户选择要共享的内容。如果用户希望在 Facebook 中使用短字符串而不是较长的字符串，那是*用户的*决定，而不是您的决定。

# rest - 如何在 REST API 中创建堆栈？

> ID：14899967
> 
> 赞同：0
> 
> 时间：2013-02-15T17:20:56.133
> 
> 标签：rest, post, get, side-effects

我正在使用分布式执行服务器。我决定在服务器上使用基于 HTTP 的 REST API。客户端将连接到服务器并获取下一个要完成的任务。显然我需要“更新”检索到的任务以确保它只被处理一次。GET 不应该有任何副作用（例如更改检索到的资源的状态）。我可以使用 POST（更新资源），但我还需要检索它。我在想我可以有一个 URL，POST 将任务标记为“已声明”，然后 GET 将任务标记为已检索。不幸的是，我再次对 GET 产生了副作用。这只是在 REST 中不起作用吗？我可以有一个“功能”资源来做到这一点，但不想在没有一点研究的情况下放弃范式。

帕特奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:39:00.223

如果没有其他合适的，您应该使用 POST 请求。没有什么可以阻止您在 POST 请求中返回资源。但是很明显，该资源会发生某些事情（在这种情况下），而使用 GET 请求时不会发生这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T17:34:49.587

REST 实际上只是一个概念，您可以随心所欲地实现它。没有一种“正确的方法”，因为每个人的用例都不同。（是的，我知道那里有一个已定义的规范，但是您仍然可以随心所欲地进行操作）在这种情况下，如果您的 GET 需要产生副作用，它就会产生副作用。只需确保正确记录您所做的事情（以及可能的原因）。

但是，听起来您只是在尝试创建具有多个订阅者的队列，并且如果订阅者是自动化的（例如脚本或其他机器），您可能希望查看使用实际队列。( [http://www.rabbitmq.com/getstarted.html](http://www.rabbitmq.com/getstarted.html) )。

如果您使用它来支持 Web UI 或实际人员处理它的东西，您还可以使用队列，您的 GET 请求只需从队列中拉下一个项目。

请注意，在使用大多数消息传递系统时，您将无法保证从队列中提取消息的顺序，因此如果需要该顺序，您可能无法使用此方法。

# windows-ce - CallSnapshotEx、dwParams[4]中的四个参数是什么意思？

> ID：14899981
> 
> 赞同：1
> 
> 时间：2013-02-15T17:21:28.023
> 
> 标签：windows-ce

此结构用于存储有关堆栈帧的扩展信息。

```
typedef struct _CallSnapshotEx {
  DWORD dwReturnAddr;
  DWORD dwFramePtr;
  DWORD dwCurProc;
  DWORD dwParams[4];
} CallSnapshotEx; 
```

有人知道 dwParams 是关于什么的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T08:20:41.690

该结构由带有标志`CallSnapshotEx`的函数调用填充。包含函数的参数。我猜这只是使用四个参数的标准约定。因为，如果你观察另一个相关结构的文档，参数的数量是四个。除了必须始终分配至少四个双字的约定之外，我认为这背后可能没有任何其他强有力的理由。`GetThreadCallStack``STACKSNAP_EXTENDED_INFO``dwParams``CallSnapshot3`

# sql - 比较数字范围或字符以在 oracle 中获取结果

> ID：14899987
> 
> 赞同：0
> 
> 时间：2013-02-15T17:21:35.070
> 
> 标签：sql, database, oracle, plsql

RSC 通过比较 tab.col1 、 tab.col2 、tab.col3 、tab.col4 到 Result.INTR 的值

选项卡表有 1000 行

如果 col1 到 4 中的任何一个具有 NULL 则返回 1

```
Col1 will hold values pertaining to RID = 10
Col2 will hold values pertaining to RID = 20
Col3 will hold values pertaining to RID = 30
Col4 will hold values pertaining to RID = 40 
```

例如：

```
 if tab.col1 is 3 then 4 
    if tab.col2 is 'R' then 3       
    if tab.col3 is 1900 then it query should give 4
    if 1945 then 3
    if 1937 then 3 (lower bound is less than and upper bound is greater than equal to)
    if tab.col4 is 6 then 5

and so on.....

Result table
     RID     INTR       RSC
     -----    -----      ----- 
      10        1         0
      10        2         1
      10        3         4                         
      10        4         2
      20        I         4
      20        R         3
      20        U         1
      30     1900         5
      30     1900-1937    4
      30     1937-1967    3
      30     1967         3
      40      3-4         2
      40      1-3         1
      40      4           5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:14:16.870

尝试类似：

```
select t1.RSC, t2.RSC, t3.RSC, t4.RSC
from your_table tab join Result t1 on t1.RID=10 and t1.INTR=tab.col1
     join Result t2 on t2.RID=20 and t2.INTR=tab.col2
     join Result t3 on t3.RID=30 and t3.INTR >= regexp_substr(tab.col3, '^\d*') and t3.INTR <= regexp_substr(tab.col3, '\d*$')
     join Result t4 on t4.RID=40 and t4.INTR >= regexp_substr(tab.col4, '^\d*') and t4.INTR <= regexp_substr(tab.col4, '\d*$') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:04:42.727

你会这样做：

```
select (case when tab.col1 = 3 then 4
             when tab.col2 = 'R' then 3
             when tab.col3 = 1900 then 4
             when tab.col3 in (1945, 1937) then 3
             when tab.col4 = 6 then 5
        . . . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T17:46:57.187

检查 Oracle.Google 的 CASE 和 DECODE 函数并检查一些示例。您将能够使用它们实现您的要求。

例如检查这个[http://www.club-oracle.com/forums/case-and-decode-two-powerfull-constructs-of-sql-t181/](http://www.club-oracle.com/forums/case-and-decode-two-powerfull-constructs-of-sql-t181/)

# java - 在所有线程完成之前等待 FixedThreadPool 的未来返回

> ID：14899990
> 
> 赞同：0
> 
> 时间：2013-02-15T17:21:50.900
> 
> 标签：java, multithreading

我试图在使用 Future 执行另一个任务之前等待我的所有线程完成，但是出了点问题，因为我的未来只是在等待我的 for 循环的最后一个线程。

我的执行者方法：

```
public static Future<?> downloadImages(Executor e, MainViewController controller, String filePath, String dns, int port, int numImg,
            String offlineUuid, Map<String, String> cookies, String type, String outputFolder) throws SystemException, IOException, InterruptedException {

        String urlImages;
        String filePath2;
        Future future = null;

        if (numImg == 1) {

         //Some Code

        } else {

            type = "multimages";
            ExecutorService es = Executors.newFixedThreadPool(numImg);

            for (int i = 0; i < numImg; i++) {
                filePath2 = "";
                filePath2 = filePath + File.separator + "TargetApp" + File.separator + "TempImage" + i + "Download.zip";
                urlImages = "http://" + dns + ":" + port + Constants.TARGET_SERVICE_DOWNLOADIMAGES_PATH + offlineUuid + "/?pos=" + (i);

                future = es.submit(new DownloaderAndUnzipTask(controller, urlImages, filePath2, outputFolder, cookies, type));
            }

            return future;
        }
        return null;

    } 
```

我的等待方法：

```
Future future = fullDownloadSelected(tableViewFull.getSelectionModel().getSelectedIndex());
                        if (future != null) {
                            try {
                                future.get();
                                if (future.isDone());
                                System.out.println("Processamento de Imagens Acabou");
                            } catch (ExecutionException ex) {
                                Logger.getLogger(MainViewController.class.getName()).log(Level.SEVERE, null, ex);
                            } 
```

当第一个方法中创建的最后一个线程完成时会显示我的消息，但是当池中的所有线程都完成时它应该已经完成​​。我认为我在 for 循环中提交执行程序的地方出了点问题，但我该如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:27:04.603

您需要捕获每个返回的 Future，然后等待每个完成（使用 get on each）

或者，您可以执行以下操作：

```
ExecutorService es = Executors.newFixedThreadPool(numImg);
List<Callable> tasks = ...
for (int i = 0; i < numImg; i++) {
  tasks.add(your tasks);
}
List<Future<Object>> futures = es.invokeAll(tasks); 
```

仅当其中的所有任务完成后才会返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:25:04.207

你只是在等待最后一个`Future`完成。

```
 future = es.submit(...);
   ...
return future;
...
// in waiting method, wait for the last job to finish
future.get(); 
```

这只会等待提交给 executor-service 的最后一个作业完成——其他作业仍然可以运行。您应该改为`ExecutorService`从`downloadImages()`. 然后在您的等待方法中，您可以：

```
// you must always shut the service down, no more jobs can be submitted
es.shutdown();
// waits for the service to complete forever
es.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS); 
```

在调用方法中创建您`ExecutorService`的并将其传递给`downloadImages()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:27:34.797

您在每次迭代中重新分配未来。
您可以使用在所有提交的任务完成后返回的[invokeAll 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)

# javascript - javascript中的可扩展框

> ID：14899991
> 
> 赞同：0
> 
> 时间：2013-02-15T17:21:52.083
> 
> 标签：javascript, html, css, listbox, expandable

我在对齐四个 div 框彼此相邻时遇到了一些问题，或者更准确地说，我已经将我的两个“头”框彼此对齐，但我的问题是我将它们用作展开折叠容器和那些框将损坏第 2 行的其他可扩展框！因此，当您展开框“head 1”时，框“head 4”将向右浮动！

当您展开框 1 或 2 时，我希望框“head 4”和框“head 3”向下而不是左右浮动

> 伙计们也让我运行这个，以便他们更容易看到发生了什么，我很抱歉下次知道要减少代码，这是运行 [Demo的框](http://www.shoutoutoffice.com/instagram-followers/instagramfeed/)
> 
> 您可以通过简单地尝试扩展每个框来选中这些框，问题就会很清楚

这是我的代码作为参考有问题：

```
 <html>
    <head>
    <TITLE>Expandable and collapsible table - demo</TITLE>
    <script type="text/javascript">
    function toggle_visibility(tbid,lnkid)
    {
    var obj = document.getElementsByTagName("table");
    for(i=0;i<obj.length;i++)
    {
    if(obj[i].id && obj[i].id != tbid)
    {
     document.getElementById(obj[i].id).style.display = "none";
    x = obj[i].id.substring(3);
    document.getElementById("lnk"+x).value = "[+] Expand";
    }
    }
    if(document.all){document.getElementById(tbid).style.display =              document.getElementById(tbid).style.display == "block" ? "none" : "block";}
   else{document.getElementById(tbid).style.display =     `document.getElementById(tbid).style.display == "table" ? "none" : "table";}`
  document.getElementById(lnkid).value = document.getElementById(lnkid).value == "[-]        Collapse" ? "[+] Expand" : "[-] Collapse";
     }
    </script>
    <style type="text/css">
#tbl1,#tbl1 {display:none; text-transform: uppercase;}
#tbl2,#tbl2 {display:none; text-transform: uppercase;}
#tbl3,#tbl3 {display:none; text-transform: uppercase;}
#tbl4,#tbl4 {display:none; text-transform: uppercase;}
td {FONT-SIZE: 75%; MARGIN: 0px; COLOR: #000000;}
td {FONT-FAMILY: verdana,helvetica,arial,sans-serif}
a {TEXT-DECORATION: none;}
    </style>
    </head>

    <body>
 <table width="300px" border="0" style="float:left; margin-left:300px" cellpadding="5" cellspacing="0">
  <tr bgcolor="#4682B4" height="50">
   <td width="5%"></td>
   <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 1</strong>        </font></td>
   <td bgcolor="#4682B4" align="center" width="50%"><input id="lnk1" type="button" value="[+] Expand" onclick="toggle_visibility('tbl1','lnk1');"></td>
    </tr>
    <tr>
    <td colspan="3">
    <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl1">
<td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div>    </table>
     </td>
    </tr>
    </table>

    <table width="300px" border="0" style="float:right; margin-right:300px" cellpadding="5" cellspacing="0">
  <tr bgcolor="#4682B4" height="50">
   <td width="5%"></td>
   <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 2</strong>   </font></td>
   <td width="50%" bgcolor="#4682B4" align="center"><input id="lnk2" type="button" value="[+] Expand" onclick="toggle_visibility('tbl2','lnk2');"></td>
  </tr>
    <tr>
    <td colspan="3">
    <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl2">
     <tr>
     <td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div></table>
   </tr>
   </td>
 </table>

    <table width="300px" border="0" style="float:right; margin-right:300px" cellpadding="5" cellspacing="0">
  <tr bgcolor="#4682B4" height="50">
   <td width="5%"></td>
   <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 3</strong>  </font></td>
   <td width="50%" bgcolor="#4682B4" align="center"><input id="lnk3" type="button" value="[+] Expand" onclick="toggle_visibility('tbl3','lnk3');"></td>
  </tr>
  <tr>
   <td colspan="3">
    <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl3">
     <tr>
  <td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div></table>
   </tr>
   </td>
 </table>

    <table width="300px" border="0" style="float:left; margin-left:300px" cellpadding="5" cellspacing="0">
  <tr bgcolor="#4682B4" height="50">
   <td width="5%"></td>
   <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 4</strong></font></td>
   <td width="50%" bgcolor="#4682B4" align="center"><input id="lnk4" type="button" value="[+] Expand" onclick="toggle_visibility('tbl4','lnk4');"></td>
  </tr>
  <tr>
   <td colspan="3">
    <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl4">
     <tr>
  <td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div></table>
   </tr>
   </td>
 </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:21:28.140

你应该看看那个[jQuery 手风琴](http://jqueryui.com/accordion/)。这对你来说会简单得多。并且会让你的 html 更干净。还可以看看[jQuery library](http://jquery.com/)，它会大大简化你使用 JavaScript 的生活。此外，您应该将样式放在 css 样式表中，这样您的 css 会更加["DRY"](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

否则，您可以按照以下步骤进行修复：

1.  将您的表格两两分组在一个 div 中`float:left`。
2.  制作所有表格`float : left`，然后调整边距。
3.  `<div style="clear : both;" />`在每个 div 的第一个和第二个表之间插​​入 a 。

[这是显示行为的小提琴](http://jsfiddle.net/RcTgk/1/)

和源代码：

```
 <html>
        <head>
            <TITLE>Expandable and collapsible table - demo</TITLE>
            <script type="text/javascript">
            function toggle_visibility(tbid,lnkid)
            {
              var obj = document.getElementsByTagName("table");
              for(i=0;i<obj.length;i++)
              {
               if(obj[i].id && obj[i].id != tbid)
               {
                document.getElementById(obj[i].id).style.display = "none";
                x = obj[i].id.substring(3);
                document.getElementById("lnk"+x).value = "[+] Expand";
                }
               }
              if(document.all){document.getElementById(tbid).style.display = document.getElementById(tbid).style.display == "block" ? "none" : "block";}
              else{document.getElementById(tbid).style.display = document.getElementById(tbid).style.display == "table" ? "none" : "table";}
              document.getElementById(lnkid).value = document.getElementById(lnkid).value == "[-] Collapse" ? "[+] Expand" : "[-] Collapse";
             }
                </script>
                <style type="text/css">
                #tbl1,#tbl1 {display:none; text-transform: uppercase;}
                #tbl2,#tbl2 {display:none; text-transform: uppercase;}
                #tbl3,#tbl3 {display:none; text-transform: uppercase;}
                #tbl4,#tbl4 {display:none; text-transform: uppercase;}
                td {FONT-SIZE: 75%; MARGIN: 0px; COLOR: #000000;}
                td {FONT-FAMILY: verdana,helvetica,arial,sans-serif}
                a {TEXT-DECORATION: none;}
                    </style>
                </head>

                <body>
                   <div style="float : left">
                    <table width="300px" border="0" style="float:left;" cellpadding="5" cellspacing="0">
                        <tr bgcolor="#4682B4" height="50">
                            <td width="5%"></td>
                            <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 1</strong></font></td>
                            <td bgcolor="#4682B4" align="center" width="50%"><input id="lnk1" type="button" value="[+] Expand" onclick="toggle_visibility('tbl1','lnk1');"></td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl1">
                                    <td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div> </table>
                            </td>
                        </tr>
                    </table>
                    <div style="clear : both"></div>
                    <table width="300px" border="0" style="float:left;" cellpadding="5" cellspacing="0">
                        <tr bgcolor="#4682B4" height="50">
                            <td width="5%"></td>
                            <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 2</strong></font></td>
                            <td width="50%" bgcolor="#4682B4" align="center"><input id="lnk2" type="button" value="[+] Expand" onclick="toggle_visibility('tbl2','lnk2');"></td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl2">
                                    <tr>
                                        <td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div></table>
                        </tr>
                    </td>
                </table>
              </div>
              <div style="float: left; margin-left:50px;">
                <table width="300px" border="0" style="float:left;" cellpadding="5" cellspacing="0">
                    <tr bgcolor="#4682B4" height="50">
                        <td width="5%"></td>
                        <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 3</strong></font></td>
                        <td width="50%" bgcolor="#4682B4" align="center"><input id="lnk3" type="button" value="[+] Expand" onclick="toggle_visibility('tbl3','lnk3');"></td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl3">
                                <tr>
                                    <td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div></table>
                    </tr>
                </td>
            </table>
            <div style="clear: both"></div>
            <table width="300px" border="0" style="float:left" cellpadding="5" cellspacing="0">
                <tr bgcolor="#4682B4" height="50">
                    <td width="5%"></td>
                    <td width="45%"><font size="4" face="tahoma" color="white"><strong>Header 4</strong></font></td>
                    <td width="50%" bgcolor="#4682B4" align="center"><input id="lnk4" type="button" value="[+] Expand" onclick="toggle_visibility('tbl4','lnk4');"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <table width="103%" border="0" cellpadding="5" cellspacing="0" id="tbl4">
                            <tr>
                                <td colspan="3"><div style="width:300px;height:300px;-webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px;border:1px solid #A3A0A0;background-color:#F0F0F0;-webkit-box-shadow: #0A0A0A 3px 3px 3px;-moz-box-shadow: #0A0A0A 3px 3px 3px; box-shadow: #0A0A0A 1px 1px 1px;"> Just modify width and height values to get what you need...</div></table>
                </tr>
            </td>
        </table>
       </div>
    </body>
    </html> 
```

# python - 使用 SQLAlchemy 创建非持久对象：在关系中错误地使用 backref？

> ID：14899995
> 
> 赞同：1
> 
> 时间：2013-02-15T17:22:09.780
> 
> 标签：python, sqlalchemy

我想创建给定类任务的对象，将其中一些存储在使用 SQLAlchemy 的数据库中，并丢弃其他对象。目前这个类是通过以下方式创建的：

```
Base = declarative_base()

class Task(Base):
    __tablename__ = 'tasks'
    id = Column(Integer, primary_key=True)
    hostID = Column(Integer, ForeignKey('hosts.id'))
    name = Column(String)
    host = relationship("Host", backref="tasks", cascade_backrefs=False)

def __init__(self, host, name):
    self.host = host
    self.name = name

class Host(Base):
    __tablename__ = 'hosts'
    id = Column(Integer, primary_key=True)
    hostname = Column(String) 
```

当我表演

```
newTask1= GridTask(myHost, myName)
Session.add(newTask1)
Session.commit()

newTask2= GridTask(myHost, otherName)
Session.commit() 
```

第一个任务存储在第一次提交上——这没问题——第二个任务存储在第二次提交上，这是我想要避免的。

我的问题是，如何声明 Task 和 Host 类，以便仅在明确要求时才将给定实例保留在 DB 上？我正确地使用了“cascade_backrefs”？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:03:32.583

反过来（别担心，我什至不知道使用什么方向，直到我尝试一个简单的测试）：

```
class Task(Base):
    __tablename__ = 'tasks'
    id = Column(Integer, primary_key=True)
    hostID = Column(Integer, ForeignKey('hosts.id'))
    name = Column(String)
    host = relationship("Host", backref=backref("tasks", cascade_backrefs=False))

    def __init__(self, host, name):
        self.host = host
        self.name = name 
```

这是因为机制是：

1.  新任务
2.  Task.host = somehost
3.  backref 启动，具有 somehost.tasks.append(task) 的效果
4.  它的第 3 步使“任务”成为“主机”的子级，因此级联
5.  cascade_backrefs=False 在任务上的意思是，“如果此事件以反向引用开始（在此上下文中，“主机”是反向引用），请不要运行保存更新级联。

# python - Python 迭代器。在 __init__ 或 __iter__ 中初始化状态变量？

> ID：14899996
> 
> 赞同：9
> 
> 时间：2013-02-15T17:22:16.193
> 
> 标签：python, iterator

我对 Python 还很陌生，只是在看一些定义迭代器对象的例子。

我看的例子是：

```
class fibit:  # iterate through fibonacci sequence from 0,1...n<=max
    def __init__(self, max):       
        self.max = max

   def __iter__(self):
        self.a = 0
        self.b = 1
        return self

   def next(self):
        fib = self.a
        if fib > self.max:
            raise StopIteration
        self.a, self.b = self.b, self.a + self.b
        return fib 
```

但是，如果我将 self.a 和 self.b 的初始化从**iter**移到**init**似乎（以我的简单理解）以完全相同的方式工作。

```
class fibit:  # iterate through fibonacci sequence from 0,1...n<=max
    def __init__(self, max):
        self.a = 0
        self.b = 1        
        self.max = max

   def __iter__(self):
        return self

   def next(self):
        fib = self.a
        if fib > self.max:
            raise StopIteration
        self.a, self.b = self.b, self.a + self.b
        return fib 
```

那么哪一种是推荐的方法呢？

谢谢。:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T17:25:32.950

初始化应该在`__init__`. 这就是它在那里的原因。

Python 中的迭代器对象通常是“使用一次”——一旦你迭代了一个迭代器，就不能期望你能够再次迭代它。

因此，如果您尝试再次迭代对象，则重新初始化这些值是没有意义的。为了说明这一点，我稍微扩展了您的代码：

```
class fibit_iter:  # iterate through fibonacci sequence from 0,1...n<=max
    def __init__(self, max):
        self.max = max

    def __iter__(self):
        self.a = 0
        self.b = 1
        return self

    def next(self):
        fib = self.a
        if fib > self.max:
            raise StopIteration
        self.a, self.b = self.b, self.a + self.b
        return fib

class fibit_init:  # iterate through fibonacci sequence from 0,1...n<=max
    def __init__(self, max):
        self.a = 0
        self.b = 1
        self.max = max

    def __iter__(self):
        return self

    def next(self):
        fib = self.a
        if fib > self.max:
            raise StopIteration
        self.a, self.b = self.b, self.a + self.b
        return fib

iter_iter = fibit_iter(10)
iter_init = fibit_init(10)

print "iter_iter"

for item in iter_iter:
    print item
    break

for item in iter_iter:
    print item
    break

print "iter_init"

for item in iter_init:
    print item
    break

for item in iter_init:
    print item
    break 
```

本质上，我从您的 init 版本创建一个对象，并从您的 iter 版本创建一个对象。然后我尝试对它们进行两次部分迭代。注意你如何得到不同的结果：

```
iter_iter
0
0
iter_init
0
1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T17:30:42.420

`__init__`在初始化类的实例时使用。它用于设置类实例的属性。

`__iter__`用于定义可迭代的类的行为（返回一个交互器）。

@mgilson -`__iter__`通常返回一个与列表不同的迭代器（type() 在物理上不同），因为迭代器产生（破坏性地消耗）值。

尝试调用`__iter__()`xrange 实例的方法并尝试多次循环这些值。

```
 >>> foo = xrange(5)
 >>> bar = a.__iter__()
 >>> bar.next()
 0
 >>> bar.next()
 1
 >>> list(bar)
 [2, 3, 4] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-24T22:06:30.353

这实际上取决于您希望迭代器做什么。如果你有充分的理由多次迭代你的迭代器，每次都得到相同的结果，然后把初始化放在`__iter__`; 然而，这应该是例外而不是常态；`raise StopIteration`表现良好的迭代器应该在用尽时继续，而不是重新启动序列。事实上：在 a`StopIteration`被引发后返回更多值的迭代器被[认为是损坏](https://docs.python.org/2/library/stdtypes.html#iterator-types)的（尽管这更像是一个警告，要小心你如何使用它）。

所以，重申一下：

*   对于标准迭代器，将您的初始化放入`__init__`

*   对于自定义/重复行为，将您的初始化放入`__iter__`