# StackOverflow 问答 13492000-13492999

# ruby-on-rails - ActiveRecord 搜索构面计数

> ID：13492008
> 
> 赞同：1
> 
> 时间：2012-11-21T11:11:34.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我正在使用带有 postgres 的 Rails 3.2.8。假设我有一个可以按类型和标签过滤的 Book 模型。我很好奇如何为每个过滤器（类型、标签、...）实现构面计数以显示在搜索结果中。ui 看起来与此类似：

```
Book Type
Banking(30)
IT(20)

Tags
business(20)
rspec(2)
rails(3) 
```

我一直在用谷歌搜索试图找到不使用 Sphinx、Solr 或任何其他搜索引擎的方法。可以通过 postgres 或 activerecord 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:52:26.253

```
type_facet = Book.select('type, count(*)').where(:type => ["Banking","IT"]).group(:type)
tag_facet = Book.select('tag, count(*)').where(:tag => ["business","rspec","rails"]).group(:tag) 
```

在您的前端迭代上述方面..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:46:46.413

你正在寻找这样的东西吗？

```
Book Type
Banking (<%= Book.where(:type => "Banking").count %>)
IT (<%= Book.where(:type => "IT").count %>)

Tags
business (<%= Book.where(:tag => "business").count %>)
rspec (<%= Book.where(:tag => "rspec").count %>)
rails (<%= Book.where(:tag => "rails").count %>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:22:22.977

```
Book.count(:all, :group => 'type')
Book.count(:all, :group => 'tag') 
```

我认为它会为您返回计数和每个类型/标签。

# java - 如何在java中制作表格并将其与数据库连接

> ID：13492009
> 
> 赞同：1
> 
> 时间：2012-11-21T11:11:38.213
> 
> 标签：java

大家好，我有 dot net 的经验，但现在我想搬到 java 中。现在我想问我如何在 java 中制作表单并将其与 MS SQL SERVER 2008 连接并在按钮单击事件上显示数据。请帮我解决这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:26:36.570

不幸的是，我相信这个问题没有一个简单的答案，因为它在很大程度上取决于您正在使用或将使用的技术。

例如，如果您使用基于 Servlets 的纯 MVC，则必须在 JSP 中创建一个表单，然后在提交之后，在实体 bean 中设置适当的值时一一捕获所有参数，然后调用您的数据访问对象。

另一方面，如果您使用的是Struts或Spring MVC，大致只需要将表单与您的实体bean绑定并自动填充值，因此您只需要担心调用相应的数据访问对象。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:12:47.963

对于桌面摇摆应用程序，我建议您使用 netbeans。在创建表单时，右键单击一个对象，比如说一个 JButton，然后添加事件。另外，创建一个连接类。

这是一个示例连接函数

```
public static Connection connect(String sqlServer, String username, String password, String server, String dbName, String port) throws SQLException{

    String connString;

    switch (sqlServer) {
        case "MSSQL":
            connString = "jdbc:sqlserver://"+server+";database="+dbName+";"; 
            break;
        case "MySQL":
            connString = "jdbc:mysql://"+server+":"+port+"/"+dbName+"?zeroDateTimeBehavior=convertToNull";
            break;
        default:
            connString = "";
            break;
    }
    conn = DriverManager.getConnection(connString,username,password);
    conn.setAutoCommit(false);
    return conn;
} 
```

显示结果：

```
ResultSet rs = Conn.connect(<all the parameters>).createStatement().executeQuery("SELECT * FROM ATABLE");
while(rs.next()){
    textfield.setText(rs.getString("Field1"));
} 
```

这是一个非常粗略的代码。您可以访问很多为此提供教程的网站。

# java - 是否有用于执行备份和还原的 java 库“.jar”

> ID：13492013
> 
> 赞同：4
> 
> 时间：2012-11-21T11:11:52.730
> 
> 标签：java, backup, restore

是否有用于对文件和目录执行备份和恢复的 java 库“.jar”？从我的 java 应用程序中使用。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:45:53.987

有**Java Backup** ( [jBup](http://jbup.sourceforge.net) )，它希望成为一个专业的解决方案，但最后一次更新是在 2009 年。你也可以看看[**JFileSync**](http://jfilesync.sourceforge.net/)。

此外，请搜索与您类似的其他查询，例如[您推荐什么 Java 文件同步/备份库？](https://stackoverflow.com/questions/348255/what-java-file-synchronization-backup-library-do-you-recommend).

# ruby-on-rails - Rails delay_job 启动启动/停止 capistrano

> ID：13492014
> 
> 赞同：2
> 
> 时间：2012-11-21T11:11:57.627
> 
> 标签：ruby-on-rails, ruby, capistrano, delayed-job

正如我在某处读到的，要在服务器启动时启动延迟作业，我应该在 config/deploy.rb 中写入以下内容：

```
require "delayed/recipes"

set :rails_env, "production" #added for delayed job

namespace :delayed_job do
  desc "Start delayed_job process" 
  task :start, :roles => :app do
    run "cd #{current_path}; script/delayed_job start #{rails_env}" 
  end

  desc "Stop delayed_job process" 
  task :stop, :roles => :app do
    run "cd #{current_path}; script/delayed_job stop #{rails_env}" 
  end

  desc "Restart delayed_job process" 
      task :restart, :roles => :app do
        run "cd #{current_path}; script/delayed_job restart #{rails_env}" 
  end
end

after "deploy:start", "delayed_job:start" 
after "deploy:stop", "delayed_job:stop" 
after "deploy:restart", "delayed_job:restart" 
```

它不工作。事实上，我认为这个文件之前确实存在，但事实并非如此（我创建了它）。那么我应该怎么做才能让它继续工作呢？

还有更多问题，我应该怎么做才能在 Web 执行期间停止/重新启动作业处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:53:53.310

试试看嘛：

```
desc "Restart delayed_job process"
    task :restart, :roles => :app do
     run "cd #{current_path}; RAILS_ENV=production bundle exec script/delayed_job restart #{rails_env}"
end 
```

这应该有效。

# sql - Oracle 触发器更新同一张表

> ID：13492015
> 
> 赞同：2
> 
> 时间：2012-11-21T11:12:01.710
> 
> 标签：sql, oracle, triggers, oracle11g

我有一个触发器，我试图用它来更新它所听的同一个表。

但是，在提交创建或更新时，我收到以下错误：

```
ORA-04091: table [username].ADDRESSES is mutating, trigger/function may not see it ORA-06512: at "[username].ADDRESSES_T1", line 9 ORA-04088: error during execution of trigger '[username].ADDRESSES_T1' 
```

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:17:02.710

您正在更新触发器写入的同一张表。你需要这样的东西：

```
create or replace trigger "ADDRESSES_T1"
BEFORE
insert or update on "ADDRESSES"
for each row
begin
DECLARE
   l_lat NUMBER;
   l_lng NUMBER;
   l_postcode VARCHAR2(8) := :NEW.POSTCODE;

BEGIN
  brian.POSTCODE_TO_LAT_LNG_GM_API (l_postcode, l_lat, l_lng);
  :new.location = SDO_GEOMETRY(2001, --SDO_GTYPE
                               8307, --SDO_SRID
                               SDO_POINT_TYPE(l_lng, --X lng
                                              l_lat, --Y lat
                                              null),     --Z
                               null, --SDO_ELEM_INFO_ARRAY
                               null);
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:17:52.397

它会引发变异表错误，因为您的触发器在表 ADDRESSES 上被触发，并且在触发器主体内它更新同一个表“ADDRESSES”。

您可以通过使用而不是触发器（为表 ADDRESSES 创建视图）来避免这种情况。

## 这是示例代码

```
create or replace view addresses_vw as select * from addresses;

CREATE OR REPLACE TRIGGER ADDRESSES_T1
INSTEAD OF INSERT or UPDATE
ON addresses_vw
FOR EACH ROW
BEGIN
  UPDATE addresses
  SET <statements> ;
END ADDRESSES_T1; 
```

# mysql - 创建触发器中的语法错误，出了什么问题？

> ID：13492019
> 
> 赞同：4
> 
> 时间：2012-11-21T11:12:12.277
> 
> 标签：mysql, if-statement, triggers, sql-update

有人可以告诉我我的代码语法有什么问题吗？（这是我要突出显示和运行的确切且唯一的代码，因此行号应该匹配）

```
CREATE TRIGGER `trg_part_upd` AFTER UPDATE ON `tbl_sub_model_eng_trans_part`
 FOR EACH ROW 
    if NEW.engine_sk = 0 and NEW.trans_sk = 0
    then
        UPDATE tbl_sub_model tsm
        INNER JOIN tbl_fct_sub_eng_trans tfset ON tsm.sub_model_sk = tfset.sub_model_sk
        INNER JOIN tbl_sub_model_eng_trans_part tsmetp ON tfset.trans_sk = tsmetp.trans_sk
        SET tsm.last_modified_date = NOW()
        WHERE tsmetp.sub_model_sk=NEW.sub_model_sk;
    end if; 
```

我得到这两个错误：

错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 9 行的 '' 附近使用正确的语法

错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“end if”附近使用正确的语法

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T11:18:34.947

您忘记更改分隔符，所以 MySQL 认为您的第一条语句是这样的：

```
CREATE TRIGGER `trg_part_upd` AFTER UPDATE ON `tbl_sub_model_eng_trans_part`
 FOR EACH ROW 
    if NEW.engine_sk = 0 and NEW.trans_sk = 0
    then
        UPDATE tbl_sub_model tsm
        INNER JOIN tbl_fct_sub_eng_trans tfset ON tsm.sub_model_sk = tfset.sub_model_sk
        INNER JOIN tbl_sub_model_eng_trans_part tsmetp ON tfset.trans_sk = tsmetp.trans_sk
        SET tsm.last_modified_date = NOW()
        WHERE tsmetp.sub_model_sk=NEW.sub_model_sk; 
```

只需在代码前添加：

```
DELIMITER $$ 
```

...然后是：

```
$$ 
```

...所以 MySQL 可以将完整的触发器识别为单个语句。

您可以根据`$$`自己的选择进行更改。

[官方文档在定义存储程序](http://dev.mysql.com/doc/refman/5.5/en/stored-programs-defining.html)部分对此进行了详细说明。

* * *

请注意，此问题仅影响一次可以接受多个语句的 MySQL 客户端，因此它们实现了分隔符来区分它们。`DELIMITER`是mysql命令行工具的一个命令；它可能会或可能不会在其他客户端中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:20:24.147

试试这个：

```
DELIMITER $$
CREATE TRIGGER `trg_part_upd` AFTER UPDATE ON `tbl_sub_model_eng_trans_part`
 FOR EACH ROW BEGIN 
    IF NEW.engine_sk = 0 AND NEW.trans_sk = 0
    THEN
        UPDATE tbl_sub_model tsm
        INNER JOIN tbl_fct_sub_eng_trans tfset ON tsm.sub_model_sk = tfset.sub_model_sk
        INNER JOIN tbl_sub_model_eng_trans_part tsmetp ON tfset.trans_sk = tsmetp.trans_sk
        SET tsm.last_modified_date = NOW()
        WHERE tsmetp.sub_model_sk=NEW.sub_model_sk;
    END IF;
  END;
$$

DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:19:35.777

触发器是一个源对象，它有一个主体——一个或多个内部语句。

*   如果 body 中有一些语句，则 body 必须用 BEGIN...END 子句包裹。在这种情况下，您可能还需要对 CREATE TRIGGER 使用客户端 DELIMITER 命令。
*   如果正文中有一条语句，则可以使用不带 BEGIN...END 且不带 DELIMITER 命令的语法。

# android - NotificationCompat.Builder 通知问题

> ID：13492023
> 
> 赞同：1
> 
> 时间：2012-11-21T11:12:24.943
> 
> 标签：android, android-notifications

我正在尝试向我的应用程序添加通知。

API 级别是 8，所以，我需要使用 NotificationCompat 而不是 Notification，不是吗？

这是我的代码：

```
 NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
  NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this); 
```

但是，有一个错误，“不能作为一个类型解决”

错误在哪里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:15:32.537

确保您的导入语句是为了兼容性。

```
import android.support.v4.app.NotificationCompat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T07:11:26.867

*我必须在部分下的build.gradle*文件中添加 v4 支持库，`dependencies`以便能够导入所需的`android.support.v4.app.NotificationCompat`类：

```
dependencies {
    ...
    compile 'com.android.support:support-v4:23.1.1'
    ...
} 
```

假设您已经从 SDK 管理器安装了提到的存储库，这实际上是从 Android 支持存储库下载支持库。更多细节[在这里](http://developer.android.com/tools/support-library/setup.html)。

# c++ - 过滤 std::string 的 std::vector

> ID：13492025
> 
> 赞同：3
> 
> 时间：2012-11-21T11:12:33.383
> 
> 标签：c++, boost, c++98

如何生成一个输出向量，该输出向量根据输入向量是否以某个子字符串开头来过滤它。我正在使用 c++98 和 boost。

据我所知：

```
std::string stringToFilterBy("2");
std::vector<std::string> input = boost::assign::list_of("1")("2")("22")("33")("222");
std::vector<int> output;
boost::copy( input | boost::adaptors::filtered(boost::starts_with), std::back_inserter(output) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:44:38.640

您可以改用[std::remove_copy_if](http://en.cppreference.com/w/cpp/algorithm/remove_copy)：

```
#include <algorithm>
#include <iterator>
#include <vector>

struct filter : public std::unary_function<std::string, bool> {
    filter(const std::string &by) : by_(by) {}
    bool operator()(const std::string &s) const {
        return s.find(by_) == 0;
    }

    std::string by_;
};

std::vector<std::string> in, out;
std::remove_copy_if(in.begin(), in.end(), std::back_inserter(out),
                    std::not1(filter("2"))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T11:46:23.113

一种方法是：

```
#include <boost/algorithm/string/predicate.hpp>
#include <boost/range/algorithm/copy.hpp>
#include <boost/range/adaptor/filtered.hpp>
#include <boost/range/adaptor/transformed.hpp>
#include <boost/assign.hpp>
#include <boost/bind.hpp>
#include <boost/lexical_cast.hpp>
#include <string>
#include <iterator>
#include <vector>

int main() {
    std::string stringToFilterBy("2");
    std::vector<std::string> input =
        boost::assign::list_of("1")("2")("22")("33")("222");
    std::vector<int> output;
    boost::copy(
        input
      | boost::adaptors::filtered(
            boost::bind(
                boost::starts_with<std::string,std::string>, _1, stringToFilterBy))
      | boost::adaptors::transformed(boost::lexical_cast<int, std::string>),
        std::back_inserter(output));
} 
```

或不使用`boost::bind`（这种方式避免命名类型并避免需要函数指针，但需要添加一些一次性结构）：

```
#include <boost/algorithm/string/predicate.hpp>
#include <boost/range/algorithm/copy.hpp>
#include <boost/range/adaptor/filtered.hpp>
#include <boost/range/adaptor/transformed.hpp>
#include <boost/assign.hpp>
#include <boost/lexical_cast.hpp>
#include <string>
#include <iterator>
#include <vector>

template<typename Range1T>
struct StartsWith_T {
    StartsWith_T(Range1T const& test) : test(&test) {}
    template<typename Range2T>
    bool operator()(Range2T const& input) const {
        return boost::starts_with(input, *test);
    }
    Range1T const* test;
};

template<typename Range1T>
StartsWith_T<Range1T> StartsWith(Range1T const& test) {
    return StartsWith_T<Range1T>(test);
}

template<typename T>
struct LexicalCaster {
    typedef T result_type;
    template<typename Input>
    T operator()(Input const& input) const {
        return boost::lexical_cast<T>(input);
    }
};

int main() {
    std::string stringToFilterBy("2");
    std::vector<std::string> input =
        boost::assign::list_of("1")("2")("22")("33")("222");
    std::vector<int> output;

    using namespace boost::adaptors;
    boost::copy(
        input
      | filtered(StartsWith(stringToFilterBy))
      | transformed(LexicalCaster<int>()),
        std::back_inserter(output));
} 
```

# nunit - 如何断言多个实际值？

> ID：13492026
> 
> 赞同：1
> 
> 时间：2012-11-21T11:12:33.213
> 
> 标签：nunit

在 nunit 中，假设我们有多个实际值要返回特定函数，我应该如何构建 assert 函数？我应该使用哪个功能？

前任：

```
int function(..) {
.
.
.
    a = some_operation();
    if (a == 0)
       result = 0;
    else if (a == some_predefined_value)
       result = 1;
    else if (a == some_predefined_value)
       result = 2;
    else
       correct_usage();

     return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:11:08.777

我想你可能想要使用[`CollectionAssert`](http://www.nunit.org/index.php?p=collectionAssert&r=2.5). 这使您可以验证一个值或一组值是否包含在另一个值中。

```
CollectionAssert.Contains(new[] { 1, 2, 3 }, 2);
CollectionAssert.IsSubsetOf(new[] {1, 2 }, new[] {1, 2, 3, 4}); 
```

您可能会注意到第一个方法是检查第一个 IEnumerable 中的第二个参数，而第二个方法是断言第一个参数 ( `IEnumerable`) 是第二个参数的子集，也是一个`IEnumerable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-15T05:27:14.513

从 NUnit 2.4 开始，[约束模型](http://www.nunit.org/index.php?p=constraintModel&r=2.6.4)已经可用，它允许连接和分离。这允许对相同事物进行更具可读性的断言。

此外，它还包括许多有用的快捷方式，主要在`Is`和`Has`类中。

**使用流利风格的断言**

```
// These are equivalent
Assert.That(function(), Is.EqualTo(0) | Is.EqualTo(1) | Is.EqualTo(2));
Assert.That(function(), Is.AtLeast(0) & Is.AtMost(3)); 
```

# c# - 从同步思维模式转变为异步思维

> ID：13492027
> 
> 赞同：0
> 
> 时间：2012-11-21T11:12:38.767
> 
> 标签：c#, web-services, silverlight, asynchronous, synchronous

我正忙于一个当然使用silverlight 的windows phone 应用程序。这意味着调用任何 web 服务都必须异步完成，并且由于这对于防止整个应用程序在等待资源时挂起的最佳实践来说都是很好的，所以我仍然停留在“同步思维方式”中。 ..

因为我现在看到的方式是你最终有两种方法需要处理一个函数，例如：

1）实际调用webservice的方法：

```
public void myAsyncWebService(DownloadStringCompletedEventHandler callback)
{
    //Url to webservice
    string servletUrl = "https://deangrobler.com/someService/etc/etc"

    //Calls Servlet
    WebClient client = new WebClient();
    client.DownloadStringCompleted += callback;
    client.DownloadStringAsync(new Uri(servletUrl, UriKind.Absolute));
} 
```

2) 以及在数据最终返回时处理数据的方法：

```
private void serviceReturn(object sender, DownloadStringCompletedEventArgs e)
{
    var jsonResponse = e.Result;
    //and so on and so forth...
} 
```

因此，不必只创建和调用一个进入 Web 服务的方法，而是获取返回的结果并将其发送回给我，如下所示：

```
public string mySyncWebService(){
    //Calls the webservice
    // ...waits for return
    //And returns result
} 
```

我必须在一个类中调用 myAsyncWebService，**并在调用类中** *创建*另一个方法来处理 myAsyncWebService 返回的结果。在我看来，只是创建了混乱的代码。使用同步调用，您可以只调用一种方法并完成它。

我只是使用错误的异步调用吗？我的理解错了吗？我需要一些启发，我讨厌做这种混乱的异步调用。它使我的代码过于复杂，可读性简直……地狱。

感谢任何愿意改变我想法的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:28:35.560

你必须彻底改变你的想法才能异步编程。我根据经验说话。:)

> 我只是使用错误的异步调用吗？我的理解错了吗？

不。异步代码很难编写（不要忘记错误处理）并且极难维护。

这就是发明的`async`原因`await`。

如果您能够升级到 VS2012，那么您可以使用[Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async)（目前处于测试阶段）来编写您的代码，如下所示：

```
string url1 = "https://deangrobler.com/someService/etc/etc";
string jsonResponse1 = await new WebClient().DownloadStringTaskAsync(url1);

string url2 = GetUriFromJson(jsonResponse1);
string jsonResponse2 = await new WebClient().DownloadStringTaskAsync(url2); 
```

容易写。易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:21:18.017

异步就像当您拨打电话并获得答录机时，如果您想要回电，请留下您的号码。第一种方法是您要求数据的调用，第二种方法是您为返回调用留下的“号码”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:22:06.017

> 使用同步调用，您可以只调用一种方法并完成它。

当然可以，但是如果您从 UI 线程执行此操作，您将阻塞整个 UI。这在任何现代应用程序中都是不可接受的，尤其是在浏览器或手机中运行的 Silverlight 应用程序中。任何人都不想使用在 DNS 查找超时时 30 秒无响应的电话。

所以在 UI 线程上，可能是因为用户在 UI 中做了一些动作，你开始了一个异步调用。当调用完成时，在后台线程上调用一个方法来处理调用的结果。此方法很可能会使用异步调用的结果更新 UI。

随着 .NET 4.5 中 async 和 await 的引入，可以简化一些“拆分”代码。幸运的是，async 和 await 现在可用于 Windows Phone 7.5 的 beta 版本，使用 NuGet 包[Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async/1.0.12-beta)。

这是一个小（有点傻）的例子，展示了如何使用异步链接两个 Web 服务调用。这适用于 .NET 4.5，但使用上面链接的 NuGet 包，您应该能够在 Windows Phone 7.5 上执行类似的操作。

```
async Task<String> GetCurrencyCode() {
  using (var webClient = new WebClient()) {
    var xml = await webClient.DownloadStringTaskAsync("http://freegeoip.net/xml/");
    var xElement = XElement.Parse(xml);
    var countryName = (String) xElement.Element("CountryName");
    return await GetCurrencyCodeForCountry(countryName);
  }
}

async Task<String> GetCurrencyCodeForCountry(String countryName) {
  using (var webClient = new WebClient()) {
    var outerXml = await webClient.DownloadStringTaskAsync("http://www.webservicex.net/country.asmx/GetCurrencyByCountry?CountryName=" + countryName);
    var outerXElement = XElement.Parse(outerXml);
    var innerXml = (String) outerXElement;
    var innerXElement = XElement.Parse(innerXml);
    var currencyCode = (String) innerXElement.Element("Table").Element("CurrencyCode");
    return currencyCode;
  }
} 
```

但是，您仍然需要在 UI 线程和 async 之间架起一座桥梁`GetCurrencyCode`。您不能在事件处理程序中等待，但可以`Task.ContinueWith`在异步调用返回的任务上使用：

```
void OnUserAction() {
  GetCurrencyCode().ContinueWith(GetCurrencyCodeCallback);
}

void GetCurrencyCodeCallback(Task<String> task) {
  if (!task.IsFaulted)
    Console.WriteLine(task.Result);
  else
    Console.WriteLine(task.Exception);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T11:26:45.680

如果您改用 lambda，这一切都会变得更加容易和可读。这也使您能够访问在“父”方法中声明的变量，如下例所示：

```
private void CallWebService()
{
    //Defined outside the callback
    var someFlag = true;

    var client = new WebClient();
    client.DownloadStringCompleted += (s, e) =>
    {
        //Using lambdas, we can access variables defined outside the callback
        if (someFlag)
        {
            //Do stuff with the result. 
        }
    };

    client.DownloadStringAsync(new Uri("http://www.microsoft.com/"));
} 
```

编辑：这是另一个带有两个链式服务调用的示例。它仍然不是很漂亮，但恕我直言，它比 OPs 原始代码更具可读性。

```
private void CallTwoWebServices()
{
    var client = new WebClient();
    client.DownloadStringCompleted += (s, e) =>
    {
        //1st call completed. Now make 2nd call.
        var client2 = new WebClient();
        client2.DownloadStringCompleted += (s2, e2) =>
        {
            //Both calls completed.
        };
        client2.DownloadStringAsync(new Uri("http://www.google.com/"));
    };
    client.DownloadStringAsync(new Uri("http://www.microsoft.com/"));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T11:53:34.220

为了避免创建混乱的代码，如果您因为使用较旧的框架而无法使用*async / await*模式，您会在他们的[Caliburn Micr o 实现中找到有用的检查](http://caliburnmicro.codeplex.com/)[CoRoutines](http://caliburnmicro.codeplex.com/wikipage?title=IResult%20and%20Coroutines&referringTitle=Documentation)。使用这种模式，您可以创建一个可枚举的 yield 在每一轮执行一个新的异步段：从读者的角度来看，异步步骤显示为一个序列，但是在步骤之间行走（因此产生下一个）是通过异步等待外部完成的单任务。这是一个很好的模式，易于实现并且非常清晰易读。顺便说一句，如果你不想使用 Caliburn Micro 作为你的 MVVM 工具，因为你正在使用其他东西，你可以只使用协程工具，它在框架内是非常绝缘的。

让我从[这篇博文](http://devlicio.us/blogs/rob_eisenberg/archive/2009/07/10/asynchronous-execution-animation-and-more-in-mvvm-with-caliburn.aspx)中的一个示例中发布一些代码。

```
public IEnumerable<IResult> Login(string username, string password)
{
    _credential.Username = username;
    _credential.Password = password;

    var result = new Result();
    var request = new GetUserSettings(username);

    yield return new ProcessQuery(request, result, "Logging In...");

    if (result.HasErrors)
    {
        yield return new ShowMessageBox("The username or password provided is incorrect.", "Access Denied");
        yield break;
    }

    var response = result.GetResponse(request);

    if(response.Permissions == null || response.Permissions.Count < 1)
    {
        yield return new ShowMessageBox("You do not have permission to access the dashboard.", "Access Denied");
        yield break;
    }

    _context.Permissions = response.Permissions;

    yield return new OpenWith<IShell, IDashboard>();
} 
```

不是很容易阅读吗？但它实际上是异步的：每个`yield`步骤都以异步方式执行，`yield`并且在前一个任务完成后的语句之后再次执行流程。

# facebook - 用户进入您的应用程序时如何获取通知 ID

> ID：13492029
> 
> 赞同：5
> 
> 时间：2012-11-21T11:12:42.620
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook 请求对话框来显示我的朋友列表并邀请，这在 Facebook 网络应用程序中，使用这个：

```
 function sendRequestViaMultiFriendSelector() {
        FB.ui(
        {
            method: 'apprequests',
            message: 'Selección de amigos a los que invitar a KugaBar'
        }, requestCallback);
    }

    function requestCallback(data) {

        console.log(data);
} 
```

### 它工作（好的）。

但是我在进入我的APP时需要识别用户，你看到requestCallback数据并看到一个“请求”，但是当用户点击通知并进入APP时

*   我不知道如何识别请求以检测用户是否通过通知访问。

### 编辑：好的，我找到了。

GET vars 中的参数是“request_ids”，但是出现了一个问题，这个参数只有在用户之前已经接受了权限的情况下才会出现，如果用户点击通知，并接受权限，按 Enter：这个参数没有存在，如果用户再次输入（不需要接受任何内容）此参数存在于 URL 中。

有什么方法可以在用户第一次输入时获取此参数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:44:41.473

当用户第一次点击请求时，您应该从 URL 中获取 request_id 并将其存储在 cookie 中。当用户完成登录后，检查 cookie 是否存在，然后相应地更新您的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:58:30.397

**Facebook 上的通知**和**请求**不是一回事。在您的情况下，您正在谈论请求。请求 ID 作为 GET 参数“request_ids”传递给应用程序，该参数是一个逗号分隔的列表。

为了能够在登录对话框后访问此参数，您希望在重定向到 OAuth 对话框之前保存原始启动 URL 中的 GET 参数并在重定向 URL 中传递它们。通过这种方式，您为所有未来的 GET 参数解决了这个问题。

如果您使用的是 PHP，那么您正在寻找的函数是[http_build_query](http://php.net/manual/en/function.http-build-query.php)。我强烈反对使用 cookie 来存储一次性且易于访问的 URL 参数。

# regex - oracle db：更改列值中的指定字符串

> ID：13492034
> 
> 赞同：0
> 
> 时间：2012-11-21T11:12:49.420
> 
> 标签：regex, string, oracle, substring

我必须更改以下“操作”列中的值：

```
 action                                                  target
provisionning,deletion,deprecation,consultation                 target1
restrict,lock,unlock,consultation,deletion                      target2 
```

我必须将此列中的“咨询”替换为所有行上的“显示”值。

我没有解决方案，有人可以帮我吗？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:28:26.863

这对于甲骨文..

```
update table_name set action=replace(action,'consultation','display'); 
```

# visual-c++ - MSVC OpenGL 1.2 版在哪里找？

> ID：13492035
> 
> 赞同：0
> 
> 时间：2012-11-21T11:12:50.957
> 
> 标签：visual-c++, opengl

我需要为我的纹理设置一个“clamp-to-edge”包装参数模式：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); 
```

在我面向 Win32 平台的 Microsoft Visual Studio C++ 应用程序中。

这不起作用：

错误 C2065：“GL_CLAMP_TO_EDGE”：未声明的标识符

我理解原因：“C:\Program Files (x86)\Microsoft Visual Studio 8\VC\PlatformSDK”包含 OpenGL 1.1 版，而`GL_CLAMP_TO_EDGE`在 1.2 版中引入。

我试图将其定义为

```
#define GL_CLAMP_TO_EDGE 0x812F 
```

但它没有效果。

所以，我需要链接到一个更新的（至少 1.2 版）适用于 Windows 的 OpenGL 库。我的问题是：我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:10:11.043

要访问 OpenGL 1.2 或更高版本，您需要使用扩展加载机制。我建议你看看[这个问题](https://stackoverflow.com/questions/3272831/opengl-sdk-on-windows)或[这个](https://stackoverflow.com/questions/3309615/how-do-i-use-the-latest-opengl)问题，或 tl:dr，看看[GLEW](http://glew.sourceforge.net/)或[GLEE](http://www.opengl.org/sdk/libs/GLee/)。这些会在运行时自动加载 OpenGL 扩展，以允许您使用现代 OpenGL 功能。

# iphone - targetContentOffsetForProposedContentOffset:withScrollingVelocity 没有子类化 UICollectionViewFlowLayout

> ID：13492037
> 
> 赞同：104
> 
> 时间：2012-11-21T11:12:55.357
> 
> 标签：iphone, ios, uicollectionview

我的应用中有一个非常简单的 collectionView（只有一行方形缩略图）。

我想拦截滚动，以便偏移量始终在左侧留下完整的图像。目前它滚动到任何地方并会留下截断的图像。

无论如何，我知道我需要使用该功能

```
- (CGPoint)targetContentOffsetForProposedContentOffset:withScrollingVelocity 
```

要做到这一点，但我只是使用标准的`UICollectionViewFlowLayout`. 我没有继承它。

有没有办法在没有子类化的情况下拦截它`UICollectionViewFlowLayout`？

谢谢

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-21T12:52:10.330

好的，答案是否定的，没有子类化 UICollectionViewFlowLayout 就没有办法做到这一点。

但是，对于将来阅读本文的任何人来说，对其进行子类化都非常容易。

首先我设置了子类调用`MyCollectionViewFlowLayout`，然后在界面生成器中我将集合视图布局更改为自定义并选择了我的流布局子类。

因为您这样做是因为您无法在 IB 中指定项目大小等...所以在 MyCollectionViewFlowLayout.m 我有这个...

```
- (void)awakeFromNib
{
    self.itemSize = CGSizeMake(75.0, 75.0);
    self.minimumInteritemSpacing = 10.0;
    self.minimumLineSpacing = 10.0;
    self.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    self.sectionInset = UIEdgeInsetsMake(10.0, 10.0, 10.0, 10.0);
} 
```

这为我设置了所有尺寸和滚动方向。

然后 ...

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity
{
    CGFloat offsetAdjustment = MAXFLOAT;
    CGFloat horizontalOffset = proposedContentOffset.x + 5;

    CGRect targetRect = CGRectMake(proposedContentOffset.x, 0, self.collectionView.bounds.size.width, self.collectionView.bounds.size.height);

    NSArray *array = [super layoutAttributesForElementsInRect:targetRect];

    for (UICollectionViewLayoutAttributes *layoutAttributes in array) {
        CGFloat itemOffset = layoutAttributes.frame.origin.x;
        if (ABS(itemOffset - horizontalOffset) < ABS(offsetAdjustment)) {
            offsetAdjustment = itemOffset - horizontalOffset;
        }
    }

    return CGPointMake(proposedContentOffset.x + offsetAdjustment, proposedContentOffset.y);
} 
```

这确保了滚动在左侧边缘以 5.0 的边距结束。

这就是我需要做的。我根本不需要在代码中设置流布局。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-03-06T23:28:18.577

丹的解决方案是有缺陷的。它不能很好地处理用户轻弹。用户快速滑动和滚动并没有移动太多的情况下，会出现动画故障。

我提出的替代实现具有与之前提出的相同的分页，但处理用户在页面之间轻弹。

```
 #pragma mark - Pagination
 - (CGFloat)pageWidth {
     return self.itemSize.width + self.minimumLineSpacing;
 }

 - (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity
 {           
        CGFloat rawPageValue = self.collectionView.contentOffset.x / self.pageWidth;
        CGFloat currentPage = (velocity.x > 0.0) ? floor(rawPageValue) : ceil(rawPageValue);
        CGFloat nextPage = (velocity.x > 0.0) ? ceil(rawPageValue) : floor(rawPageValue);

        BOOL pannedLessThanAPage = fabs(1 + currentPage - rawPageValue) > 0.5;
        BOOL flicked = fabs(velocity.x) > [self flickVelocity];
        if (pannedLessThanAPage && flicked) {
            proposedContentOffset.x = nextPage * self.pageWidth;
        } else {
            proposedContentOffset.x = round(rawPageValue) * self.pageWidth;
        }

        return proposedContentOffset;
 }

 - (CGFloat)flickVelocity {
     return 0.3;
 } 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-03-04T14:14:25.673

已接受答案的 Swift 版本。

```
override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
    var offsetAdjustment = CGFloat.greatestFiniteMagnitude
    let horizontalOffset = proposedContentOffset.x
    let targetRect = CGRect(origin: CGPoint(x: proposedContentOffset.x, y: 0), size: self.collectionView!.bounds.size)

    for layoutAttributes in super.layoutAttributesForElements(in: targetRect)! {
        let itemOffset = layoutAttributes.frame.origin.x
        if (abs(itemOffset - horizontalOffset) < abs(offsetAdjustment)) {
            offsetAdjustment = itemOffset - horizontalOffset
        }
    }

    return CGPoint(x: proposedContentOffset.x + offsetAdjustment, y: proposedContentOffset.y)
} 
```

适用于**Swift 5**。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2018-04-02T19:08:15.047

这是我在**Swift 5**中针对基于单元的**垂直**分页的实现：

```
override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {

    guard let collectionView = self.collectionView else {
        let latestOffset = super.targetContentOffset(forProposedContentOffset: proposedContentOffset, withScrollingVelocity: velocity)
        return latestOffset
    }

    // Page height used for estimating and calculating paging.
    let pageHeight = self.itemSize.height + self.minimumLineSpacing

    // Make an estimation of the current page position.
    let approximatePage = collectionView.contentOffset.y/pageHeight

    // Determine the current page based on velocity.
    let currentPage = velocity.y == 0 ? round(approximatePage) : (velocity.y < 0.0 ? floor(approximatePage) : ceil(approximatePage))

    // Create custom flickVelocity.
    let flickVelocity = velocity.y * 0.3

    // Check how many pages the user flicked, if <= 1 then flickedPages should return 0.
    let flickedPages = (abs(round(flickVelocity)) <= 1) ? 0 : round(flickVelocity)

    let newVerticalOffset = ((currentPage + flickedPages) * pageHeight) - collectionView.contentInset.top

    return CGPoint(x: proposedContentOffset.x, y: newVerticalOffset)
} 
```

*一些注意事项：*

*   **不会出错**
*   **设置分页为假**！（否则这将不起作用）
*   允许您轻松设置**自己的轻弹速度**。
*   如果尝试此操作后仍然无法正常工作，请检查您是否`itemSize`实际匹配项目的大小，因为这通常是一个问题，尤其是在使用时`collectionView(_:layout:sizeForItemAt:)`，请改用带有 itemSize 的自定义变量。
*   这在您设置时效果最佳`self.collectionView.decelerationRate = UIScrollView.DecelerationRate.fast`。

这是一个**横向**版本（尚未彻底测试，所以请原谅任何错误）：

```
override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {

    guard let collectionView = self.collectionView else {
        let latestOffset = super.targetContentOffset(forProposedContentOffset: proposedContentOffset, withScrollingVelocity: velocity)
        return latestOffset
    }

    // Page width used for estimating and calculating paging.
    let pageWidth = self.itemSize.width + self.minimumInteritemSpacing

    // Make an estimation of the current page position.
    let approximatePage = collectionView.contentOffset.x/pageWidth

    // Determine the current page based on velocity.
    let currentPage = velocity.x == 0 ? round(approximatePage) : (velocity.x < 0.0 ? floor(approximatePage) : ceil(approximatePage))

    // Create custom flickVelocity.
    let flickVelocity = velocity.x * 0.3

    // Check how many pages the user flicked, if <= 1 then flickedPages should return 0.
    let flickedPages = (abs(round(flickVelocity)) <= 1) ? 0 : round(flickVelocity)

    // Calculate newHorizontalOffset.
    let newHorizontalOffset = ((currentPage + flickedPages) * pageWidth) - collectionView.contentInset.left

    return CGPoint(x: newHorizontalOffset, y: proposedContentOffset.y)
} 
```

此代码基于我在个人项目中使用的代码，您可以通过下载并运行示例目标[来查看它。](https://github.com/JoniVR/VerticalCardSwiper)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2018-03-26T15:27:49.240

对于任何寻求解决方案的人...

*   当用户执行短的快速滚动时不会出现故障（即它考虑正负滚动速度）
*   考虑到`collectionView.contentInset`（和 iPhone X 上的安全区域）
*   仅考虑在滚动点可见的单元格（用于性能）
*   使用命名良好的变量和注释
*   是斯威夫特 4

那么请看下面...

```
public class CarouselCollectionViewLayout: UICollectionViewFlowLayout {

    override public func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {

        guard let collectionView = collectionView else {
            return super.targetContentOffset(forProposedContentOffset: proposedContentOffset, withScrollingVelocity: velocity)
        }

        // Identify the layoutAttributes of cells in the vicinity of where the scroll view will come to rest
        let targetRect = CGRect(origin: proposedContentOffset, size: collectionView.bounds.size)
        let visibleCellsLayoutAttributes = layoutAttributesForElements(in: targetRect)

        // Translate those cell layoutAttributes into potential (candidate) scrollView offsets
        let candidateOffsets: [CGFloat]? = visibleCellsLayoutAttributes?.map({ cellLayoutAttributes in
            if #available(iOS 11.0, *) {
                return cellLayoutAttributes.frame.origin.x - collectionView.contentInset.left - collectionView.safeAreaInsets.left - sectionInset.left
            } else {
                return cellLayoutAttributes.frame.origin.x - collectionView.contentInset.left - sectionInset.left
            }
        })

        // Now we need to work out which one of the candidate offsets is the best one
        let bestCandidateOffset: CGFloat

        if velocity.x > 0 {
            // If the scroll velocity was POSITIVE, then only consider cells/offsets to the RIGHT of the proposedContentOffset.x
            // Of the cells/offsets to the right, the NEAREST is the `bestCandidate`
            // If there is no nearestCandidateOffsetToLeft then we default to the RIGHT-MOST (last) of ALL the candidate cells/offsets
            //      (this handles the scenario where the user has scrolled beyond the last cell)
            let candidateOffsetsToRight = candidateOffsets?.toRight(ofProposedOffset: proposedContentOffset.x)
            let nearestCandidateOffsetToRight = candidateOffsetsToRight?.nearest(toProposedOffset: proposedContentOffset.x)
            bestCandidateOffset = nearestCandidateOffsetToRight ?? candidateOffsets?.last ?? proposedContentOffset.x
        }
        else if velocity.x < 0 {
            // If the scroll velocity was NEGATIVE, then only consider cells/offsets to the LEFT of the proposedContentOffset.x
            // Of the cells/offsets to the left, the NEAREST is the `bestCandidate`
            // If there is no nearestCandidateOffsetToLeft then we default to the LEFT-MOST (first) of ALL the candidate cells/offsets
            //      (this handles the scenario where the user has scrolled beyond the first cell)
            let candidateOffsetsToLeft = candidateOffsets?.toLeft(ofProposedOffset: proposedContentOffset.x)
            let nearestCandidateOffsetToLeft = candidateOffsetsToLeft?.nearest(toProposedOffset: proposedContentOffset.x)
            bestCandidateOffset = nearestCandidateOffsetToLeft ?? candidateOffsets?.first ?? proposedContentOffset.x
        }
        else {
            // If the scroll velocity was ZERO we consider all `candidate` cells (regarless of whether they are to the left OR right of the proposedContentOffset.x)
            // The cell/offset that is the NEAREST is the `bestCandidate`
            let nearestCandidateOffset = candidateOffsets?.nearest(toProposedOffset: proposedContentOffset.x)
            bestCandidateOffset = nearestCandidateOffset ??  proposedContentOffset.x
        }

        return CGPoint(x: bestCandidateOffset, y: proposedContentOffset.y)
    }

}

fileprivate extension Sequence where Iterator.Element == CGFloat {

    func toLeft(ofProposedOffset proposedOffset: CGFloat) -> [CGFloat] {

        return filter() { candidateOffset in
            return candidateOffset < proposedOffset
        }
    }

    func toRight(ofProposedOffset proposedOffset: CGFloat) -> [CGFloat] {

        return filter() { candidateOffset in
            return candidateOffset > proposedOffset
        }
    }

    func nearest(toProposedOffset proposedOffset: CGFloat) -> CGFloat? {

        guard let firstCandidateOffset = first(where: { _ in true }) else {
            // If there are no elements in the Sequence, return nil
            return nil
        }

        return reduce(firstCandidateOffset) { (bestCandidateOffset: CGFloat, candidateOffset: CGFloat) -> CGFloat in

            let candidateOffsetDistanceFromProposed = fabs(candidateOffset - proposedOffset)
            let bestCandidateOffsetDistancFromProposed = fabs(bestCandidateOffset - proposedOffset)

            if candidateOffsetDistanceFromProposed < bestCandidateOffsetDistancFromProposed {
                return candidateOffset
            }

            return bestCandidateOffset
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2013-01-12T07:15:39.850

虽然[这个答案](https://stackoverflow.com/a/13493707/458193)对我有很大帮助，但是当您在一小段距离上快速滑动时会出现明显的闪烁。在设备上重现它要容易得多。

我发现这总是发生在不同的歌声中`collectionView.contentOffset.x - proposedContentOffset.x`。`velocity.x`

我的解决方案是确保速度`proposedContentOffset`大于`contentOffset.x`正速度，如果速度为负则减少。它在 C# 中，但转换为 Objective C 应该相当简单：

```
public override PointF TargetContentOffset (PointF proposedContentOffset, PointF scrollingVelocity)
{
    /* Determine closest edge */

    float offSetAdjustment = float.MaxValue;
    float horizontalCenter = (float) (proposedContentOffset.X + (this.CollectionView.Bounds.Size.Width / 2.0));

    RectangleF targetRect = new RectangleF (proposedContentOffset.X, 0.0f, this.CollectionView.Bounds.Size.Width, this.CollectionView.Bounds.Size.Height);
    var array = base.LayoutAttributesForElementsInRect (targetRect);

    foreach (var layoutAttributes in array) {
        float itemHorizontalCenter = layoutAttributes.Center.X;
        if (Math.Abs (itemHorizontalCenter - horizontalCenter) < Math.Abs (offSetAdjustment)) {
            offSetAdjustment = itemHorizontalCenter - horizontalCenter;
        }
    }

    float nextOffset = proposedContentOffset.X + offSetAdjustment;

    /*
     * ... unless we end up having positive speed
     * while moving left or negative speed while moving right.
     * This will cause flicker so we resort to finding next page
     * in the direction of velocity and use it.
     */

    do {
        proposedContentOffset.X = nextOffset;

        float deltaX = proposedContentOffset.X - CollectionView.ContentOffset.X;
        float velX = scrollingVelocity.X;

        // If their signs are same, or if either is zero, go ahead
        if (Math.Sign (deltaX) * Math.Sign (velX) != -1)
            break;

        // Otherwise, look for the closest page in the right direction
        nextOffset += Math.Sign (scrollingVelocity.X) * SnapStep;
    } while (IsValidOffset (nextOffset));

    return proposedContentOffset;
}

bool IsValidOffset (float offset)
{
    return (offset >= MinContentOffset && offset <= MaxContentOffset);
} 
```

此代码正在使用`MinContentOffset`，您可以轻松定义它`MaxContentOffset`。`SnapStep`就我而言，他们原来是

```
float MinContentOffset {
    get { return -CollectionView.ContentInset.Left; }
}

float MaxContentOffset {
    get { return MinContentOffset + CollectionView.ContentSize.Width - ItemSize.Width; }
}

float SnapStep {
    get { return ItemSize.Width + MinimumLineSpacing; }
} 
```

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2014-06-04T09:08:46.440

经过长时间的测试，我找到了使用自定义单元格宽度（每个单元格都有不同的宽度）捕捉到中心的解决方案，从而修复了闪烁。随意改进脚本。

```
- (CGPoint) targetContentOffsetForProposedContentOffset: (CGPoint) proposedContentOffset withScrollingVelocity: (CGPoint)velocity
{
    CGFloat offSetAdjustment = MAXFLOAT;
    CGFloat horizontalCenter = (CGFloat) (proposedContentOffset.x + (self.collectionView.bounds.size.width / 2.0));

    //setting fastPaging property to NO allows to stop at page on screen (I have pages lees, than self.collectionView.bounds.size.width)
    CGRect targetRect = CGRectMake(self.fastPaging ? proposedContentOffset.x : self.collectionView.contentOffset.x, 
                                   0.0,
                                   self.collectionView.bounds.size.width,
                                   self.collectionView.bounds.size.height);

    NSArray *attributes = [self layoutAttributesForElementsInRect:targetRect];
    NSPredicate *cellAttributesPredicate = [NSPredicate predicateWithBlock: ^BOOL(UICollectionViewLayoutAttributes * _Nonnull evaluatedObject,
                                                                             NSDictionary<NSString *,id> * _Nullable bindings) 
    {
        return (evaluatedObject.representedElementCategory == UICollectionElementCategoryCell); 
    }];        

    NSArray *cellAttributes = [attributes filteredArrayUsingPredicate: cellAttributesPredicate];

    UICollectionViewLayoutAttributes *currentAttributes;

    for (UICollectionViewLayoutAttributes *layoutAttributes in cellAttributes)
    {
        CGFloat itemHorizontalCenter = layoutAttributes.center.x;
        if (ABS(itemHorizontalCenter - horizontalCenter) < ABS(offSetAdjustment))
        {
            currentAttributes   = layoutAttributes;
            offSetAdjustment    = itemHorizontalCenter - horizontalCenter;
        }
    }

    CGFloat nextOffset          = proposedContentOffset.x + offSetAdjustment;

    proposedContentOffset.x     = nextOffset;
    CGFloat deltaX              = proposedContentOffset.x - self.collectionView.contentOffset.x;
    CGFloat velX                = velocity.x;

    // detection form  gist.github.com/rkeniger/7687301
    // based on http://stackoverflow.com/a/14291208/740949
    if (fabs(deltaX) <= FLT_EPSILON || fabs(velX) <= FLT_EPSILON || (velX > 0.0 && deltaX > 0.0) || (velX < 0.0 && deltaX < 0.0)) 
    {

    } 
    else if (velocity.x > 0.0) 
    {
       // revert the array to get the cells from the right side, fixes not correct center on different size in some usecases
        NSArray *revertedArray = [[array reverseObjectEnumerator] allObjects];

        BOOL found = YES;
        float proposedX = 0.0;

        for (UICollectionViewLayoutAttributes *layoutAttributes in revertedArray)
        {
            if(layoutAttributes.representedElementCategory == UICollectionElementCategoryCell)
            {
                CGFloat itemHorizontalCenter = layoutAttributes.center.x;
                if (itemHorizontalCenter > proposedContentOffset.x) {
                     found = YES;
                     proposedX = nextOffset + (currentAttributes.frame.size.width / 2) + (layoutAttributes.frame.size.width / 2);
                } else {
                     break;
                }
            }
        }

       // dont set on unfound element
        if (found) {
            proposedContentOffset.x = proposedX;
        }
    } 
    else if (velocity.x < 0.0) 
    {
        for (UICollectionViewLayoutAttributes *layoutAttributes in cellAttributes)
        {
            CGFloat itemHorizontalCenter = layoutAttributes.center.x;
            if (itemHorizontalCenter > proposedContentOffset.x) 
            {
                proposedContentOffset.x = nextOffset - ((currentAttributes.frame.size.width / 2) + (layoutAttributes.frame.size.width / 2));
                break;
            }
        }
    }

    proposedContentOffset.y = 0.0;

    return proposedContentOffset;
} 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2015-03-02T15:22:17.740

请参阅[Dan Abramov 的这个答案，](https://stackoverflow.com/a/14291208/2624884)这里是 Swift 版本

```
 override func targetContentOffsetForProposedContentOffset(proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
    var _proposedContentOffset = CGPoint(x: proposedContentOffset.x, y: proposedContentOffset.y)
    var offSetAdjustment: CGFloat = CGFloat.max
    let horizontalCenter: CGFloat = CGFloat(proposedContentOffset.x + (self.collectionView!.bounds.size.width / 2.0))

    let targetRect = CGRect(x: proposedContentOffset.x, y: 0.0, width: self.collectionView!.bounds.size.width, height: self.collectionView!.bounds.size.height)

    let array: [UICollectionViewLayoutAttributes] = self.layoutAttributesForElementsInRect(targetRect)! as [UICollectionViewLayoutAttributes]
    for layoutAttributes: UICollectionViewLayoutAttributes in array {
        if (layoutAttributes.representedElementCategory == UICollectionElementCategory.Cell) {
            let itemHorizontalCenter: CGFloat = layoutAttributes.center.x
            if (abs(itemHorizontalCenter - horizontalCenter) < abs(offSetAdjustment)) {
                offSetAdjustment = itemHorizontalCenter - horizontalCenter
            }
        }
    }

    var nextOffset: CGFloat = proposedContentOffset.x + offSetAdjustment

    repeat {
        _proposedContentOffset.x = nextOffset
        let deltaX = proposedContentOffset.x - self.collectionView!.contentOffset.x
        let velX = velocity.x

        if (deltaX == 0.0 || velX == 0 || (velX > 0.0 && deltaX > 0.0) || (velX < 0.0 && deltaX < 0.0)) {
            break
        }

        if (velocity.x > 0.0) {
            nextOffset = nextOffset + self.snapStep()
        } else if (velocity.x < 0.0) {
            nextOffset = nextOffset - self.snapStep()
        }
    } while self.isValidOffset(nextOffset)

    _proposedContentOffset.y = 0.0

    return _proposedContentOffset
}

func isValidOffset(offset: CGFloat) -> Bool {
    return (offset >= CGFloat(self.minContentOffset()) && offset <= CGFloat(self.maxContentOffset()))
}

func minContentOffset() -> CGFloat {
    return -CGFloat(self.collectionView!.contentInset.left)
}

func maxContentOffset() -> CGFloat {
    return CGFloat(self.minContentOffset() + self.collectionView!.contentSize.width - self.itemSize.width)
}

func snapStep() -> CGFloat {
    return self.itemSize.width + self.minimumLineSpacing;
} 
```

或要点在这里[https://gist.github.com/katopz/8b04c783387f0c345cd9](https://gist.github.com/katopz/8b04c783387f0c345cd9)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-07-28T23:58:10.603

这是我在水平滚动集合视图上的 Swift 解决方案。它简单，甜美，避免任何闪烁。

```
 override func targetContentOffsetForProposedContentOffset(proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
    guard let collectionView = collectionView else { return proposedContentOffset }

    let currentXOffset = collectionView.contentOffset.x
    let nextXOffset = proposedContentOffset.x
    let maxIndex = ceil(currentXOffset / pageWidth())
    let minIndex = floor(currentXOffset / pageWidth())

    var index: CGFloat = 0

    if nextXOffset > currentXOffset {
      index = maxIndex
    } else {
      index = minIndex
    }

    let xOffset = pageWidth() * index
    let point = CGPointMake(xOffset, 0)

    return point
  }

  func pageWidth() -> CGFloat {
    return itemSize.width + minimumInteritemSpacing
  } 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-12-26T09:53:37.563

我在使用 targetContentOffsetForProposedContentOffset 时遇到的一个小问题是最后一个单元格没有根据我返回的新点进行调整的问题。
我发现我返回的 CGPoint 的 Y 值大于允许的值，因此我在 targetContentOffsetForProposedContentOffset 实现的末尾使用了以下代码：

```
// if the calculated y is bigger then the maximum possible y we adjust accordingly
CGFloat contentHeight = self.collectionViewContentSize.height;
CGFloat collectionViewHeight = self.collectionView.bounds.size.height;
CGFloat maxY = contentHeight - collectionViewHeight;
if (newY > maxY)
{
    newY = maxY;
}

return CGPointMake(0, newY); 
```

只是为了更清楚，这是我的完整布局实现，它只是模仿垂直分页行为：

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity
{
    return [self targetContentOffsetForProposedContentOffset:proposedContentOffset];
}

- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset
{
    CGFloat heightOfPage = self.itemSize.height;
    CGFloat heightOfSpacing = self.minimumLineSpacing;

    CGFloat numOfPage = lround(proposedContentOffset.y / (heightOfPage + heightOfSpacing));
    CGFloat newY = numOfPage * (heightOfPage + heightOfSpacing);

    // if the calculated y is bigger then the maximum possible y we adjust accordingly
    CGFloat contentHeight = self.collectionViewContentSize.height;
    CGFloat collectionViewHeight = self.collectionView.bounds.size.height;
    CGFloat maxY = contentHeight - collectionViewHeight;
    if (newY > maxY)
    {
        newY = maxY;
    }

    return CGPointMake(0, newY);
} 
```

希望这可以节省一些时间和头痛

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2015-02-13T15:07:19.743

我更喜欢允许用户浏览多个页面。所以这是我的**垂直**布局版本`targetContentOffsetForProposedContentOffset`（基于 DarthMike 的回答） 。

 **```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity {
    CGFloat approximatePage = self.collectionView.contentOffset.y / self.pageHeight;
    CGFloat currentPage = (velocity.y < 0.0) ? floor(approximatePage) : ceil(approximatePage);

    NSInteger flickedPages = ceil(velocity.y / self.flickVelocity);

    if (flickedPages) {
        proposedContentOffset.y = (currentPage + flickedPages) * self.pageHeight;
    } else {
        proposedContentOffset.y = currentPage * self.pageHeight;
    }

    return proposedContentOffset;
}

- (CGFloat)pageHeight {
    return self.itemSize.height + self.minimumLineSpacing;
}

- (CGFloat)flickVelocity {
    return 1.2;
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-01-05T20:12:29.967

除非我滚动到行尾，否则 Fogmeisters 的回答对我有用。我的单元格不能整齐地放在屏幕上，所以它会滚动到最后并突然跳回来，这样最后一个单元格总是与屏幕的右边缘重叠。

为了防止这种情况，在 targetcontentoffset 方法的开头添加以下代码行

```
if(proposedContentOffset.x>self.collectionViewContentSize.width-320-self.sectionInset.right)
    return proposedContentOffset; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-01-31T10:43:29.597

**@André Abreu**的代码

**Swift3 版本**

```
class CustomCollectionViewFlowLayout: UICollectionViewFlowLayout {
    override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
        var offsetAdjustment = CGFloat.greatestFiniteMagnitude
        let horizontalOffset = proposedContentOffset.x
        let targetRect = CGRect(x: proposedContentOffset.x, y: 0, width: self.collectionView!.bounds.size.width, height: self.collectionView!.bounds.size.height)
        for layoutAttributes in super.layoutAttributesForElements(in: targetRect)! {
            let itemOffset = layoutAttributes.frame.origin.x
            if abs(itemOffset - horizontalOffset) < abs(offsetAdjustment){
                offsetAdjustment = itemOffset - horizontalOffset
            }
        }
        return CGPoint(x: proposedContentOffset.x + offsetAdjustment, y: proposedContentOffset.y)
    }
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-20T21:35:11.107

斯威夫特 4

具有一种尺寸的单元格（水平滚动）的集合视图的最简单解决方案：

```
override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
    guard let collectionView = collectionView else { return proposedContentOffset }

    // Calculate width of your page
    let pageWidth = calculatedPageWidth()

    // Calculate proposed page
    let proposedPage = round(proposedContentOffset.x / pageWidth)

    // Adjust necessary offset
    let xOffset = pageWidth * proposedPage - collectionView.contentInset.left

    return CGPoint(x: xOffset, y: 0)
}

func calculatedPageWidth() -> CGFloat {
    return itemSize.width + minimumInteritemSpacing
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-09-23T11:44:43.973

一个更短的解决方案（假设您正在缓存布局属性）：

```
override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
    let proposedEndFrame = CGRect(x: proposedContentOffset.x, y: 0, width: collectionView!.bounds.width, height: collectionView!.bounds.height)
    let targetLayoutAttributes = cache.max { $0.frame.intersection(proposedEndFrame).width < $1.frame.intersection(proposedEndFrame).width }!
    return CGPoint(x: targetLayoutAttributes.frame.minX - horizontalPadding, y: 0)
} 
```

把它放在上下文中：

```
class Layout : UICollectionViewLayout {
    private var cache: [UICollectionViewLayoutAttributes] = []
    private static let horizontalPadding: CGFloat = 16
    private static let interItemSpacing: CGFloat = 8

    override func prepare() {
        let (itemWidth, itemHeight) = (collectionView!.bounds.width - 2 * Layout.horizontalPadding, collectionView!.bounds.height)
        cache.removeAll()
        let count = collectionView!.numberOfItems(inSection: 0)
        var x: CGFloat = Layout.horizontalPadding
        for item in (0..<count) {
            let indexPath = IndexPath(item: item, section: 0)
            let attributes = UICollectionViewLayoutAttributes(forCellWith: indexPath)
            attributes.frame = CGRect(x: x, y: 0, width: itemWidth, height: itemHeight)
            cache.append(attributes)
            x += itemWidth + Layout.interItemSpacing
        }
    }

    override var collectionViewContentSize: CGSize {
        let width: CGFloat
        if let maxX = cache.last?.frame.maxX {
            width = maxX + Layout.horizontalPadding
        } else {
            width = collectionView!.width
        }
        return CGSize(width: width, height: collectionView!.height)
    }

    override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
        return cache.first { $0.indexPath == indexPath }
    }

    override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        return cache.filter { $0.frame.intersects(rect) }
    }

    override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
        let proposedEndFrame = CGRect(x: proposedContentOffset.x, y: 0, width: collectionView!.bounds.width, height: collectionView!.bounds.height)
        let targetLayoutAttributes = cache.max { $0.frame.intersection(proposedEndFrame).width < $1.frame.intersection(proposedEndFrame).width }!
        return CGPoint(x: targetLayoutAttributes.frame.minX - Layout.horizontalPadding, y: 0)
    }
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-04-23T00:08:56.053

为了确保它在 Swift 版本（现在是 swift 5）中工作，我使用了来自@André Abreu的[答案，我添加了一些更多信息：](https://stackoverflow.com/a/35798242/11229563)

当子类化 UICollectionViewFlowLayout 时，“覆盖 func awakeFromNib(){}”不起作用（不知道为什么）。相反，我使用了“覆盖 init(){super.init()}”

这是我放在类 SubclassFlowLayout: UICollectionViewFlowLayout {} 中的代码：

```
let padding: CGFloat = 16
override init() {
    super.init()
    self.minimumLineSpacing = padding
    self.minimumInteritemSpacing = 2
    self.scrollDirection = .horizontal
    self.sectionInset = UIEdgeInsets(top: 0, left: padding, bottom: 0, right: 100) //right = "should set for footer" (Horizental)

}

required init?(coder: NSCoder) {
    fatalError("init(coder:) has not been implemented")
}

override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
    var offsetAdjustment = CGFloat.greatestFiniteMagnitude
    let leftInset = padding
    let horizontalOffset = proposedContentOffset.x + leftInset // leftInset is for "where you want the item stop on the left"
    let targetRect = CGRect(origin: CGPoint(x: proposedContentOffset.x, y: 0), size: self.collectionView!.bounds.size)

    for layoutAttributes in super.layoutAttributesForElements(in: targetRect)! {
        let itemOffset = layoutAttributes.frame.origin.x
        if (abs(itemOffset - horizontalOffset) < abs(offsetAdjustment)) {
            offsetAdjustment = itemOffset - horizontalOffset
        }
    }

    let targetPoint = CGPoint(x: proposedContentOffset.x + offsetAdjustment, y: proposedContentOffset.y)
    return targetPoint

} 
```

子类化后，确保将其放入 ViewDidLoad() 中：

```
customCollectionView.collectionViewLayout = SubclassFlowLayout()
customCollectionView.isPagingEnabled = false
customCollectionView.decelerationRate = .fast //-> this for scrollView speed 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-13T15:54:56.503

对于那些在 Swift 中寻找解决方案的人：

```
class CustomCollectionViewFlowLayout: UICollectionViewFlowLayout {
    private let collectionViewHeight: CGFloat = 200.0
    private let screenWidth: CGFloat = UIScreen.mainScreen().bounds.width

    override func awakeFromNib() {
        super.awakeFromNib()

        self.itemSize = CGSize(width: [InsertItemWidthHere], height: [InsertItemHeightHere])
        self.minimumInteritemSpacing = [InsertItemSpacingHere]
        self.scrollDirection = .Horizontal
        let inset = (self.screenWidth - CGFloat(self.itemSize.width)) / 2
        self.collectionView?.contentInset = UIEdgeInsets(top: 0,
                                                         left: inset,
                                                         bottom: 0,
                                                         right: inset)
    }

    override func targetContentOffsetForProposedContentOffset(proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {
        var offsetAdjustment = CGFloat.max
        let horizontalOffset = proposedContentOffset.x + ((self.screenWidth - self.itemSize.width) / 2)

        let targetRect = CGRect(x: proposedContentOffset.x, y: 0, width: self.screenWidth, height: self.collectionViewHeight)
        var array = super.layoutAttributesForElementsInRect(targetRect)

        for layoutAttributes in array! {
            let itemOffset = layoutAttributes.frame.origin.x
            if (abs(itemOffset - horizontalOffset) < abs(offsetAdjustment)) {
                offsetAdjustment = itemOffset - horizontalOffset
            }
        }

        return CGPoint(x: proposedContentOffset.x + offsetAdjustment, y: proposedContentOffset.y)
    }
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-07-13T08:25:56.547

这是一个按单元格分页的演示（快速滚动时，不要跳过一个或多个单元格）：[https ://github.com/ApesTalk/ATPagingByCell](https://github.com/ApesTalk/ATPagingByCell)**

# iphone - 用于在foursquare中获取附近位置的场地的API

> ID：13492042
> 
> 赞同：1
> 
> 时间：2012-11-21T11:13:20.557
> 
> 标签：iphone, facebook-graph-api, foursquare

1）我想通过将纬度和经度传递给foursquare中的API来获取附近位置的场地。我得到了这个 url:-[这个](https://api.foursquare.com/v2/venues/search?ll=23.3456,72.4346&oauth_token=Q5PMJCAEZXD04H1SCOUTB0KJT0W3D0C3ADP32SSUVDNVXSMK&v=20121121)并且我得到了 peroper 的响应。

但是对于这个经纬度：- 32.3456,141.4346 ( [url](https://api.foursquare.com/v2/venues/search?ll=32.3456,141.4346&oauth_token=Q5PMJCAEZXD04H1SCOUTB0KJT0W3D0C3ADP32SSUVDNVXSMK&v=20121121) ) 我没有得到任何数据。

Facebook 也一样。我用这个：- [facebook API](https://graph.facebook.com/search?q=hotel&type=place&center=23.20,72.427&distance=50000&access_token=392518770824937%7C0378j76S-ye24_USAZZ0VibqTbA)

但我想要这个 API 的通用类别列表。这个 API 只给我酒店的数据。因为我通过 q=hotel。

2)如何获取foursquare的oauth_token？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:23:31.057

您没有获得该位置的任何数据的原因是因为该区域没有场地。如果您点击此[链接](https://maps.google.com/maps?hl=en&client=safari&q=-32.3456,141.4346%20maps&ie=UTF-8&ei=fqSuUNKfLdHW0gHU04D4Dg&ved=0CAoQ_AUoAA#bmb=1)，您将看到该位置位于澳大利亚的偏远地区。

如需帮助将用户连接到 Foursquare，您可以使用这些[说明](https://developer.foursquare.com/overview/auth)

# javascript - 动态数据图表

> ID：13492044
> 
> 赞同：0
> 
> 时间：2012-11-21T11:13:25.083
> 
> 标签：javascript, mysql, ajax, amcharts

我正在尝试使用库 amchart 我尝试遵循站点的示例，它适用于静态数据我想知道如何使用动态数据（即数据库实例）制作图表？谁可以帮助我 [http://www.amcharts.com/javascript-charts/stacked-column/](http://www.amcharts.com/javascript-charts/stacked-column/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:36:45.983

查看这个库：[http](http://amcharts-php.sourceforge.net/)
://amcharts-php.sourceforge.net/ 我相信还有更多的库，或者您可以自己编写一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:02:44.130

在您的 servlet 标头中定义 `response.setContentType("application/json");`

以 JSON 格式创建数据，例如

```
StringBuffer sb=new StringBuffer();
            sb.append("[");
            if(rs1.next()){
                sb.append("{");
                sb.append("\"country\": \"CH\",");
                sb.append("\"visits\":\""+rs1.getString(1)+"\",");
                sb.append("\"color\":\""+"#FF0F00"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"USA\",");
                sb.append("\"visits\":\""+rs1.getString(2)+"\",");
                sb.append("\"color\":\""+"#FF6600"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"UK\",");
                sb.append("\"visits\":\""+rs1.getString(3)+"\",");
                sb.append("\"color\":\""+"#FF9E01"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"AU\",");
                sb.append("\"visits\":\""+rs1.getString(4)+"\",");
                sb.append("\"color\":\""+"#FCD202"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"DK\",");
                sb.append("\"visits\":\""+rs1.getString(5)+"\",");
                sb.append("\"color\":\""+"#F8FF01"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"PK\",");
                sb.append("\"visits\":\""+rs1.getString(6)+"\",");
                sb.append("\"color\":\""+"#B0DE09"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"ML\",");
                sb.append("\"visits\":\""+rs1.getString(7)+"\",");
                sb.append("\"color\":\""+"#04D215"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"JP\",");
                sb.append("\"visits\":\""+rs1.getString(8)+"\",");
                sb.append("\"color\":\""+"#0D8ECF"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"IN\",");
                sb.append("\"visits\":\""+rs1.getString(9)+"\",");
                sb.append("\"color\":\""+"#0D52D1"+"\"");
                sb.append("},");
                sb.append("{");
                sb.append("\"country\": \"TW\",");
                sb.append("\"visits\":\""+rs1.getString(10)+"\",");
                sb.append("\"color\":\""+"#2A0CD0"+"\"");
                sb.append("}");

                }
            sb.append("]"); 
```

然后做`out.write(sb.toString());`

然后在 html 文件中从请求对象中获取数据 `var test=JSON.parse(xmlhttp.responseText);`

记得我在这个中使用过 Ajax ....

# silverlight - Silverlight 应用程序在 IE10 中的页面刷新时消失

> ID：13492045
> 
> 赞同：12
> 
> 时间：2012-11-21T11:13:29.200
> 
> 标签：silverlight, internet-explorer, windows-8, refresh, internet-explorer-10

更新：这个问题有一个解决方法。它是通过包含以下元标记之一来强制 IE10 进入兼容模式：

```
<meta http-equiv="x-ua-compatible" content="IE=7" />
<meta http-equiv="x-ua-compatible" content="IE=8" /> 
```

由于各种原因，这并不是一个真正完美的解决方案，但它至少消除了这个问题。

* * *

原始问题：
几个月前，我意识到我们的 Silverlight 应用程序在 Windows 8 上的 IE10 中存在问题（我还没有尝试过 Windows 7 的 IE10 预览版）。当托管我们的 SL 应用程序的 asp.net 页面首次加载时，一切正常，应用程序按预期加载。如果我立即刷新页面，它也会按预期重新加载。但是：如果我通过单击来聚焦 Silverlight 应用程序，然后按 F5，它就会变成空白。就像插件完全消失了一样。如果我使用 Fiddler 跟踪请求，我可以看到没有为 xap 文件发出请求。我一直希望这会在 IE10 的补丁版本中得到修复，但到目前为止没有任何改变。当我尝试谷歌搜索时，我找不到任何关于此的信息。我似乎不太可能成为第一个发现它的人，而且我很惊讶我没有找到更多信息。要重现该问题：

*   创建一个新的 Silverlight 应用程序
*   向 MainPage.xaml 添加某种内容，例如 Button 或其他
*   在 IE10 中运行应用程序（在 Win8 上）
*   单击 Silverlight 应用程序中的任意位置。这只是为了关注插件。
*   刷新页面 (F5)
*   结果：Silverlight 应用程序未加载且页面为空白。

几点观察：

*   完成上述步骤后，再多的刷新也不会使应用程序恢复原状。
*   完成上述步骤后，如果我在地址栏中重新输入 url 并按 Enter，应用程序将按预期加载。
*   如果我在 IE 中启用兼容性视图，该应用程序也会按预期加载。启用兼容性视图后，我所做的任何事情都不会重现该错误。

现在我的问题：

1.  有没有其他人观察到这种行为？
2.  如果是这样，您是否找到了解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T00:32:29.503

我在 IE 10 中的 Silverlight 应用程序中看到了同样的问题。

我尝试添加上面建议的 IE 8 兼容性元标记，但这并不能始终如一地解决问题。在说每 5 次刷新尝试之后，它似乎只是间歇性地工作？！

我可以看到解决此问题的唯一方法是强制浏览器模式进入“IE 10 兼容性视图”，我认为这不能通过页面内容（元标记等）来完成？我不得不删除 IE 8 兼容性元标记，以便地址栏中的“兼容性视图”按钮可用，然后要求用户单击兼容性按钮，然后网站会记住该按钮。这将导致浏览器进入浏览器模式：“IE 10 Compat View”和文档模式：“IE7 标准”。然后，刷新行为会按预期和以前一样始终如一地工作。

这对我们来说是个大问题。我们已经构建了 Silverlight 应用程序，以便使用浏览器刷新按钮来刷新应用程序内的页面/内容（用户保持登录状态等）。我们必须要求用户将我们的网站设置为在兼容模式下运行才能使刷新功能按预期工作，这真的很糟糕。

请注意，这仍然可以在 Chrome 中按预期工作。由于这个问题，我们可能需要建议我们的用户使用 Chrome，这似乎很愚蠢！

**更新：**

一种解决方法似乎是始终使用 JavaScript 将 Silverlight 对象动态加载到其托管页面中。

例如

```
function onLoad() {
  var silverlightControlHost = document.getElementById("silverlightControlHost");
  silverlightControlHost.innerHTML = "<object ... 
```

**更新 2：**

这是我用来解决此问题的最新代码：

```
...
        function unloadSilverlight() {
            document.getElementById("silverlightControlHost").innerHTML = "";
        }

        function focusOnSilverlight() {
            document.getElementById("silverlightObject").focus();
        }

        function onLoad() {
            window.onbeforeunload = unloadSilverlight;
            setTimeout(focusOnSilverlight);
        }
    </script>
</head>
<body onload=" onLoad() ">
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-16T23:54:39.370

我仍然对 Chris 提出的解决方案有疑问。

不过，这对我来说非常有效：

```
window.onbeforeunload = function () {
            var silverlightControlHost = document.getElementById("silverlightControlHost");
            silverlightControlHost.innerHTML = "";
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T01:49:21.297

我以一种非常简单的方式解决了这个问题。我在页面末尾（或在您的 silverlight 应用程序所在的对象标记之后）编写了一个 javascript 代码，并将焦点设置到另一个元素，例如链接。例子：

`<object id="silverlightHostControl">...bla bla bla</object> <script type="text/javascript" language="javascript"> var shc = document.getElementById("silverlightHostControl"); document.getElementById("myLink").focus(); </script>`

shc var 没用，我只是为了澄清。请记住：您的 javascript 代码必须在 silverlight 应用程序对象标记被解析后将焦点设置到另一个（但可聚焦）对象，这意味着您的 js 代码是在 silverlight 应用程序对象之后编写的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:16:44.860

在回答您的问题 1 时，我们的 Silverlight 应用程序也会发生这种情况。唯一的解决方法是 1) 重新启动浏览器或 2) 切换到兼容模式。

这显然是ie10中的一个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-03T02:00:07.017

感谢所有解决方法，但这显然是 Silverlight 插件的错误。

我们直接向 Internet Explorer 开发团队提出了一些问题，他们说问题来自外部问题。微软的回答不是很好。

无论如何，这次我们的开发人员通过 Silverlight 开发团队提出了票，仍在等待他们的回应。为了从他们那里得到好的回应，我们需要让更多的人面临这个问题。

您可以从 Microsoft 的官方错误报告平台 Connect 网站对这个问题进行投票。

我们票的链接是：[http ://connect.microsoft.com/VisualStudio/feedback/details/789004/ie10-shows-blank-page-upon-refreshing-silverlight-app](http://connect.microsoft.com/VisualStudio/feedback/details/789004/ie10-shows-blank-page-upon-refreshing-silverlight-app)

干杯

莫

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-05T14:11:21.680

是的，我的一个应用程序也面临同样的问题。如果我在 IE 10 中打开我的应用程序的帮助，那么我每次都必须刷新页面才能查看内容。

我有两个解决这个问题的方法： 1\. 按一次 ALT 键 2\. 在兼容模式下打开 IE

# asp.net - ASP.NET 中带有字母数字的正则表达式

> ID：13492050
> 
> 赞同：0
> 
> 时间：2012-11-21T11:13:53.443
> 
> 标签：asp.net, regex

我必须在我的新网页上应用正则表达式，它可以接受带空格的字母数字。这意味着任何人都不能只输入数字字符。如果他必须输入数字，他还必须输入字符串字符，并且可以在名称之间包含空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:18:53.033

```
<%@ language="C#" %>
<form id="form1" runat="server">
    <asp:TextBox ID="txtName" runat="server"/>
    <asp:Button ID="btnSubmit" runat="server" Text="Submit" />
    <asp:RegularExpressionValidator ID="regexpName" runat="server"     
                                    ErrorMessage="This expression does not validate." 
                                    ControlToValidate="txtName"     
                                    ValidationExpression="^a-zA-Z0-9\s" />
</form> 
```

该示例将检查 Alpha Number 和 Space。

为了将来参考，请查看：

[http://regexlib.com](http://regexlib.com)

[http://msdn.microsoft.com/en-us/library/ff650303.aspx](http://msdn.microsoft.com/en-us/library/ff650303.aspx)

# linux - 是否可以获取另一台 Linux 机器的 iSCSI 启动器 IQN？

> ID：13492055
> 
> 赞同：4
> 
> 时间：2012-11-21T11:14:12.627
> 
> 标签：linux, iscsi

在本地机器上，我可以做

```
cat /etc/iscsi/initiatorname.iscsi 
```

获取在建立 ISCSI 会话时发送到目标的 IQN。我试图找出的是是否可以在不使用 ssh 的情况下建立另一台机器的发起程序 IQN。这是因为，给定一组我无法控制的机器的 IP 或主机名，我需要设置目标以仅允许从这些机器进行 ISCSI 登录。

使用例如 iscsiadm 似乎是不可能的。我假设答案是否定的，但我不是 ISCSI 方面的专家，所以还是要问。如果答案是否定的，我们将不得不以其他方式处理该问题，可能通过要求使用已知池中的 IQN 设置启动器，或者甚至在所有这些机器上将 IQN 设置为相同（我怀疑后一种解决方法可能会产生不利后果，但我不确定）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:27:51.203

在远程机器尝试连接到您的目标之前，没有带内方法可以获取远程机器的启动器 IQN。最好给他们分配你知道的 IQN。绝对不要给他们相同的 IQN；以后只会让你头疼。如果您无法分配它们，则：

1.  只需让主机尝试连接到您的目标，并在目标拒绝登录尝试时将 IQN 从目标日志中取出。
2.  或者，如果您无法通过 ssh 访问它们，也许让主机通过 ssh 将其 IP 和 IQN 丢弃在您可以控制的集中位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:47:19.103

您可以设置 iSNS 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:09:05.740

在这种情况下，听起来您需要客户提前提交他们的 IQN，以便您可以将其添加到允许的发起者列表中。

# c++ - VS2012 C++ DLL 兼容性

> ID：13492056
> 
> 赞同：0
> 
> 时间：2012-11-21T11:14:13.067
> 
> 标签：c++, visual-studio-2010, windows-7, windows-xp, visual-studio-2012

我在 windows xp 32bit 上的 vs10 中编译了一个 DLL 然后我搬到 windows 7 32bit 并在 vs2012 中编译它，项目构建目标是 win32。当我在 Windows 7 上使用新编译的 DLL 时，它工作得很好，但是当我在 win xp sp3 上运行它时，它说程序找不到 dll 错误 0x8007007E

这怎么可能？我必须更改哪些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:12:41.537

一个简单的解决方法是使用 /MT 静态链接运行时模块

[http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx](http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx)

# css - Windows 现代应用程序是否支持 CSS 着色器？

> ID：13492059
> 
> 赞同：0
> 
> 时间：2012-11-21T11:14:26.527
> 
> 标签：css, windows-8, microsoft-metro

我可以在 Windows 8 Metro/现代 UI 应用程序中使用 CSS3 着色器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:55:01.217

我猜你说的 CSS3 着色器是指 CSS Filter Effects 草案中的自定义过滤器。由于 IE10 是现代应用程序的唯一浏览器，[因此甚至不支持股票效果](http://caniuse.com/css-filters)。事实上，AFAIK，着色器（和常规过滤器）仅在最近的 WebKit 中受支持，并且它具有高度的实验性和前缀。该标准也在不断变化，微软正在尽一切努力不标准化当前使用 GLSL 作为着色语言的建议。

值得注意的是，微软确实有自己的旧的、不兼容的[过滤器](http://msdn.microsoft.com/en-us/library/ie/ms530752%28v=vs.85%29.aspx)。

# android - 具有多个 ListView 的 ViewFlipper

> ID：13492060
> 
> 赞同：0
> 
> 时间：2012-11-21T11:14:32.677
> 
> 标签：android, listview, swipe, viewflipper

我想用多个 ListViews 填充 ViewFlipper。我从数据库中获取部分的计数，然后为每个部分创建一个 ListView。我添加了一个 Swipeimplementation 来浏览列表，这意味着向左滑动将显示下一个列表。现在的问题是每个列表都在其行中包含图像。每次我想显示另一个列表时，我都必须等到它加载完毕。

如何构建一个列表并在填充它之前已经用数据填充它，以便我可以流利地浏览它？是否有可能将前一个和下一个保存在缓存中？

**我构建 ListViews 的方法**

```
public static void prepareViewFlipper()
{   
    for(int i = 0; i<KundenActivity.namen.size(); i++)
    {
        ListView list = new ListView(KundenActivity.myref);
        menueAdapter = new MenueAdapter(KundenActivity.myref, ArtikelDatabaseHandler.getInstance(KundenActivity.myref).getArtikel(KundenActivity.namen.get(i)));
        list.setAdapter(menueAdapter);      
        switcher.addView(list);
    }
} 
```

**我的列表适配器**

```
public class MenueAdapter extends BaseAdapter{

private Activity activity;
private static LayoutInflater inflater= null;
public ArrayList<Artikel> artikel;
Bitmap bm = null;
URL newurl = null;

public MenueAdapter(Activity activity, ArrayList<Artikel> artikel)
{
    this.activity = activity;
    this.artikel = artikel;
    inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return artikel.size();
}

@Override
public Artikel getItem(int position) {
    // TODO Auto-generated method stub
    return artikel.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi = convertView;
    if(convertView == null)
    {
        vi = inflater.inflate(R.layout.menue_list_item, null);
    }

    ImageView image = (ImageView) vi.findViewById(R.id.menueimage);     
    Artikel artikel = getItem(position);

    Bitmap bm = Webservice.readBitmapImage(artikel.getItemFoto());
    image.setImageBitmap(bm);
    return vi;
} 
```

}

**Swipe实现**

```
SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener()
{
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
    {
        String swipe="";
        float sensitivity = 50;

        if(e1.getX() - e2.getX() > sensitivity)
        {
            swipe = "Swipe Links";

            if(canSwipeLeft())
            {
                MenueFragment.switcher.setInAnimation(getApplicationContext(), R.animator.slide_in_right);
                MenueFragment.switcher.setOutAnimation(getApplicationContext(), R.animator.slide_out_left);

                Log.d("==SWIPE==", "FORINDEX: "+MenueFragment.index);
                MenueFragment.switcher.showNext();              
                MenueFragment.index++;
                Log.d("==SWIPE==", "AFTERINDEX: "+MenueFragment.index);
            }
        }
        else if(e2.getX() - e1.getX() > sensitivity)
        {
            swipe = "Swipe Rechts";

            if(canSwipeRight())
            {
                MenueFragment.switcher.setInAnimation(getApplicationContext(), R.animator.slide_in_left);
                MenueFragment.switcher.setOutAnimation(getApplicationContext(), R.animator.slide_out_right);
                Log.d("==SWIPE==", "FORINDEX: "+MenueFragment.index);
                MenueFragment.switcher.showPrevious();                  
                MenueFragment.index--;
                Log.d("==SWIPE==", "AFTERINDEX: "+MenueFragment.index);

            }
        }
        Toast.makeText(getApplicationContext(), swipe, Toast.LENGTH_SHORT).show();
        return super.onFling(e1, e2, velocityX, velocityY); 
    }
};

GestureDetector gestureDetector = new GestureDetector(simpleOnGestureListener); 
```

我希望有人有解决方案。

# c# - API 控制器将数据传递给 mvc 控制器

> ID：13492066
> 
> 赞同：0
> 
> 时间：2012-11-21T11:14:46.180
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

在过去的 3 天里，我一直在努力尝试解决这个问题，如何将数据从 api 控制器传递到 mvc 控制器并使用这些数据来填充 selectlistitem。

我已经看到很多从网页调用 api 的例子，这一切都很好，但是如果用户禁用了 javascript，它将不会显示数据。

因此，任何有关此示例的帮助将不胜感激。

我的代码是：

```
web.api

    public IEnumerable<DisplayCurrencyInDDL> GetCurrencyForDDL()
                {
                    var s = _ICurr.InsetCurrencyIntoDataBase();
                    return s.AsEnumerable(); 
                } 
```

mvc 控制器

```
 WebClient wc = new WebClient();
    var s = wc.DownloadString("http://localhost:50687/api/Currency"); 
```

如何将 var s（货币和货币 ID）中的值获取到选择列表项中。

谢谢乔治

```
edit data returned as: [ { "strCountry": "Afghan Afghani", "strCountryCode": "AFN" },    { "strCountry": "Albanian Lek", "strCountryCode": "ALL" }, { "strCountry": "Algerian Dinar", "strCountryCode": "DZD" }, { "strCountry": "Andorra Euro1", 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:35:32.930

我不明白你为什么要这样做。

> 如果您想共享一些代码，您可以通过将代码移动到某个库中`WebAPI`并在您的`MVC Controller`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T22:20:38.920

好的，所以在阅读了关于[apiController 和控制器之间的 stackoverflow 差异的这篇文章之后](https://stackoverflow.com/questions/9494966/difference-between-apicontroller-and-controller-in-asp-net-mvc?rq=1)

我的理解是，如果我将数据返回到我自己的网站，则使用 mvc 控制器，但如果我允许第 3 方从我的网站使用数据，则将数据放入 api 控制器中。

此外，如果用户访问了我的网站/您的网站并禁用了 javascript，那么 json 将无法在客户端工作，因为需要 jQuery 等，所以我的理解是如果您确定访问者不会禁用 javascript，请使用 api。

请让我知道是否正确

# sql - 我应该如何修改表达式以获取引用当前字段的引用表和字段

> ID：13492067
> 
> 赞同：0
> 
> 时间：2012-11-21T11:14:49.480
> 
> 标签：sql, sql-server-2008-r2

我有那个表情

```
 SELECT sysobjects.name AS TableName,  
  c.name AS ColumnName,  
  st.name AS TypeName,  
  "Length"  
  = case st.name  
  when 'uniqueidentifier'  then 'nvm'  
  when 'bit'  then 'nvm'  
  when 'int'  then 'nvm'
  when 'image'  then 'nvm'  
  when 'datetime'  then 'nvm'  
  when 'xml'  then 'nvm'  
  else (cast(c.length as varchar))  
  end,  
  case c.isnullable     
  when '0' then 'No'  
  when '1' then 'Yes' end AS 'Nullable'  
  FROM   
  dbo.syscolumns c  WITH (NOLOCK)   
  INNER JOIN dbo.systypes st ON st.xusertype = c.xusertype   
  INNER JOIN dbo.sysobjects  WITH (NOLOCK) ON sysobjects.id=c.id   
  WHERE sysobjects.type in ('U')  
  ORDER BY TableName 
```

所以我得到这个输出：

```
 ACCREDITED_PROGRAMS   ID                  uniqueidentifier    nvm No  
  ACCREDITED_PROGRAMS   APPLICATION_FK          uniqueidentifier    nvm Yes  
  ACCREDITED_PROGRAMS   LICENCED_PROGRAM_FK uniqueidentifier    nvm Yes 
```

问题是有两个相邻的列指示哪些表和字段引用 APPLICATION_FK、LICENCED_PROGRAM_FK 和其他 FK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:50:49.173

这是您可以使用的示例：

```
SELECT o1.Name, c.Name, p.Name, rc.Name
FROM syscolumns c
INNER JOIN sysobjects o1 on o1.id = c.id --table
INNER JOIN sysobjects o2 on o2.parent_obj = o1.id and o2.type = 'F' --foreign key
LEFT JOIN sysreferences r on o2.id =  r.constid and c.colid = r.fkey1
LEFT JOIN sysobjects p on r.rkeyid = p.id
LEFT JOIN syscolumns rc on r.rkeyid = rc.id and r.rkey1 = rc.colid
WHERE o1.Name = 'TableName' 
```

结果：

```
Address AddressID           NULL            NULL
Address AddressLine1        NULL            NULL
Address AddressLine2        NULL            NULL
Address City                NULL            NULL
Address StateProvinceID     StateProvince   StateProvinceID
Address PostalCode          NULL            NULL
Address SpatialLocation     NULL            NULL
Address rowguid             NULL            NULL
Address ModifiedDate        NULL            NULL 
```

# java - Flyway - 不复制sql资源

> ID：13492070
> 
> 赞同：3
> 
> 时间：2012-11-21T11:15:04.330
> 
> 标签：java, database, maven, data-migration, flyway

我在我的 java web 项目中使用 flyway。

我的迁移放在 src/main/resources/db/migration

现在我想从目标战争中排除 sql 资源，所以我添加到我的 pom.xml：

```
<project>
    ...
    <build>
    ...
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <excludes>
                   <exclude>**/*.sql</exclude>
               </excludes>
            </resource>
        </resources>
    ...
    </build>
</project> 
```

但是随后 flyway 不起作用，因为从目标中获取迁移。

那么我如何使用 flyway 但避免将 sql 复制到我的战争中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:16:40.710

您可以提取迁移以将 maven 模块与`pom`打包分开，并使您的应用程序依赖于该模块。[您可以在此处](http://lwandersonmusings.blogspot.ru/2012/07/using-maven-to-integrate-flyway.html)查看迁移模块的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:10:46.643

我的解决方案是从复制到目标战争中排除文件，而不是从复制到目标类中排除资源。这是执行此操作的方法：

```
<project>
    ...
    <build>
        ...
        <plugins>
             <plugin>
                  <artifactId>maven-war-plugin</artifactId>
                  <version>2.2</version>
                  <configuration>
                      <warName>my</warName>
                      <packagingExcludes>**/*.sql</packagingExcludes>
                  </configuration>
             </plugin>
         ...
         </plugins>
        ...
     </build>
     ...
 </project> 
```

# objective-c - cocos2d中开发游戏的内存问题

> ID：13492073
> 
> 赞同：3
> 
> 时间：2012-11-21T11:15:15.913
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在为 iPad 开发游戏。当我在 ipad 上运行游戏并为 ipad 骑行场景存在时，由于内存不足会自动关闭应用程序。使用 TexturePacker 将图像转换为 pvr，但从一个场景到另一个场景无法释放内存。

```
[CCTextureCache sharedTextureCache] removeUnusedTextures];

[[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames]; 
```

我正在使用这些线路，但还不够。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:43:56.627

请考虑：

1.  使用仪器泄漏工具 - 尝试在同一特定时刻（例如，当您准备好运行场景时）制作快照，然后检查它们之间分配的内容。
2.  尝试在程序的特定部分打印应用程序使用的内存，以找出内存泄漏的位置。
3.  尝试找出删除场景时未调用哪些 dealloc，然后再深入。
4.  尝试调用通用函数而不是未使用的函数：

    `[[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];` `[[CCTextureCache sharedTextureCache] removeAllTextures];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:52:54.470

删除未使用的纹理后，使用：

```
[CCAnimationCache purgeSharedAnimationCache];
[[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];
[[CCDirector sharedDirector] purgeCachedData];

CCLOG(@"%@<applicationDidReceiveMemoryWarning> : after purge", self.class);
[[CCTextureCache sharedTextureCache] dumpCachedTextureInfo]; 
```

这将列出仍保留在缓存中的纹理，以及它们消耗的内存量。当您希望处理它时仍然存在的任何纹理可能都存在，因为沿线（代码;））的某处，您“以某种方式”保留了它们（例如，将它们添加到数组中）。

# css - CSS和HTML中的宽度和高度不同

> ID：13492074
> 
> 赞同：1
> 
> 时间：2012-11-21T11:15:19.680
> 
> 标签：css, layout, html

说我有一个`div`. 如果我在 HTML 代码中给它一个 500*500px 的高度和宽度，就像这样：`<div width="500px" height="500px">test</div>`它不会有 500*500px 的尺寸，除非它填充了足够的代码/文本以将其推送到这些尺寸。但是，如果我像这样使用 CSS（内联 CSS 或外部文档）设置完全相同的宽度和高度：`<div style="width:500px; height:500px;">test</div>`尺寸始终是我设置的。

为什么有区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:16:54.227

`div`标记没有属性`width`和`height`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:17:02.243

这样做不是有效的语法。您不能像向表格或图像标签一样向 DIV 添加宽度和高度属性。

```
<div width="500px" height="500px">test</div> 
```

这是有效的语法：

```
<div style="width:500px; height:500px;">test</div> 
```

# regex - 使用正则表达式的字符串的最后一个单词的第一个单词和第一个字母

> ID：13492075
> 
> 赞同：0
> 
> 时间：2012-11-21T11:15:20.950
> 
> 标签：regex

我想使用第三方工具将大量文件批量导入 SharePoint 并将它们与用户相关联。它需要一个正则表达式来进行文件名和帐户名之间的转换。

我们的文件格式为`firstname surname`或`firstname middlename surname`. 我们的帐户名称采用`firstname`then的形式`first inital of the surname`。

所以为了说明：

```
foo bar -> foob
foo bar qux -> fooq 
```

在搜索时，我确实找到了一些获取遗言的第一个字母的示例，但它们都在代码中结合正则表达式使用了函数，但在这种情况下我无法使用。是否可以单独使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:20:10.377

你可以试试这个：

```
^([a-zA-Z]+).*\s([a-zA-Z])[a-zA-Z]+$ 
```

[在 Regexr 上](http://regexr.com?32sop)查看

您会在第一个捕获组中找到名字，通常称为`$1`和姓氏的第一个字符`$2`

如果名称仅由字母 az 或 AZ 组成，这将起作用。为了给你一个更好的答案，你需要给出你的名字的规格和你使用的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:24:11.393

试试这个（Perl 风格）：

```
s/(\w+).*?\s(\w)(\w+)$/$1$2/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:14:09.583

将每个文件名与此模式匹配：

```
^(\w+)\s+(\w+\s+)?(\w)\w*$ 
```

并将匹配的字符串替换为以下模式以生成帐户名称：

```
$1$3 
```

# php - 使用 WHERE 2 条件选择数据

> ID：13492079
> 
> 赞同：1
> 
> 时间：2012-11-21T11:15:30.523
> 
> 标签：php, mysql, sql

t_msg

```
msg_id | message | user_id 
```

示例数据：

```
01 | hai how are you | 01
02 | will you marry me ? | 02 
```

t_users
示例数据：

```
uid | username | full_name
01 | greg | Greg Fish
02 | drown | Leon Drown 
```

t_friendship
示例数据：

```
uid | uid_fk | status
01 | 02 | friend
02 | 01 | friend 
```

我有 3 个表关系。现在我想要来自用户显示和其他用户（如果状态为好友）的消息。
例如，如果 uid 1 登录：
uid 1
hai 你好吗

uid 2（这个节目是因为uid 1和uid 2是朋友。
你愿意嫁给我吗？

这是我提出的查询：

```
$query = mysql_query("
        SELECT 
        M.msg_id, 
        M.uid_fk, 
        M.message, 
        M.created,
        U.full_name, 
        U.profile_pic, 
        U.username,
        U.uid, 
        F.status, 
        F.uid 

        FROM
        t_haps_wall M,
        t_users U, 
        t_join_user F 

        WHERE
        M.uid_fk=U.uid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:19:45.913

您必须与线程表一起使用`JOIN`三个表，如下所示：`ON f.uid_fk = u.uid`

```
SELECT 
  M.msg_id, 
  M.uid_fk, 
  M.message, 
  M.created,
  U.full_name, 
  U.profile_pic, 
  U.username,
  U.uid, 
  F.status, 
  F.uid 
FROM t_haps_wall M
INNER JOIN t_users U ON m.user_id = u.uid
INNER JOIN t_join_user F ON f.uid_fk = u.uid 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/60d99/4)

# android - 在驾驶/步行期间在谷歌地图上绘制路径

> ID：13492082
> 
> 赞同：3
> 
> 时间：2012-11-21T11:15:33.463
> 
> 标签：android, google-maps, path, routes

我正在开发需要在谷歌地图上绘制路径的应用程序。这里起点是用户的`current location`（纬度和经度），当用户改变地点时，`(walking/Driving)`然后根据移动位置获取用户的当前位置（纬度和经度）并根据用户的位置在谷歌地图上绘制路径。

我能够在固定点之间绘制路径。为此我参考这个[LINK](https://stackoverflow.com/a/2184239/1263679)。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:31:13.177

使用 Android Location API 的一个例子：[http ://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

当你得到你的位置时，例如将坐标发送到带有叠加层的谷歌地图。

# php - 如何创建浏览按钮以选择 php 或任何支持语言的文件夹？

> ID：13492086
> 
> 赞同：0
> 
> 时间：2012-11-21T11:15:52.190
> 
> 标签：php, file-upload, directory

如何在浏览按钮中选择文件夹。我的意思是，我想上传一个文件夹或文件。那么有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:18:17.710

> 刚刚尝试使用文件类型输入 html 标记

这都是关于 HTML 的，与 PHP 无关（至少在提交数据之前）。

HTML 没有提供选择要上传的文件夹的机制。

HTML 5 允许选择[多个](http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-multiple)文件。我假设这将在 PHP 中以与处理任何其他类型的多值响应相同的方式处理 - 确保名称`[]`以`$_POST`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:18:10.703

据我所知，这只有在 chrome 中才有可能（并且可能只有在夜间构建中）。

我可能是错的，但谷歌搜索太费力了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:22:41.960

您可以`<input name="myfile" type="file" />`在表单和`$_FILES`PHP 中使用来获取上传的文件。

我认为 Chrome 11+ 也支持上传文件夹，但没有适用于所有浏览器的纯 HTML 解决方案。

编辑：[FancyUpload](http://digitarald.de/project/fancyupload/)支持上传多个文件。也许这就是你要找的。:)

# iphone - 通过 gdata 获取 gmail 的所有电子邮件和联系人

> ID：13492087
> 
> 赞同：3
> 
> 时间：2012-11-21T11:15:53.433
> 
> 标签：iphone, objective-c, gdata

我正在申请在我的申请中获取 gmail 的所有电子邮件和联系人。我设法通过 gadata-objective c-client-1.11.0 在我的项目中获取 gdata。任何人都可以通过提供示例或教程来帮助我，因为我是 iphone 编程新手....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T07:36:38.050

我已经完成了为登录用户获取联系人。我将它们加载到表格中，其中包含该联系人的联系人姓名和电子邮件 ID。您可以尝试使用此链接在您的项目中设置 gdata xcode。 [http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/) 将它们集成到您的项目中后，打开 gdata 联系人示例并按照方法 - (IBAction )getFeedClicked:(id)sender ，因为他们要求获取组联系，但是您给出 - (void)fetchAllContacts 然后您在代码中添加该方法所需的方法，最后您可以获得联系人条目。是一个数组，那么您可以将它们加载到表中。

# http - 如何使喷雾罐客户端遵循重定向

> ID：13492088
> 
> 赞同：4
> 
> 时间：2012-11-21T11:15:52.783
> 
> 标签：http, scala, redirect, akka, spray

使用以下代码请求某些页面时：

```
HttpDialog(httpClient, IDN.toASCII(domain)).send(HttpRequest(uri = "/")).end 
```

spray-can 客户端返回响应并重定向到另一个 URL（例如 302 Found）。有没有一种标准的方法来告诉喷雾自动跟随重定向？如果没有，用akka期货自己实现这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T17:21:11.677

**更新 2：** PR 已合并，重定向文档如下是 spray-can 现在可以在[这里找到](http://spray.io/documentation/1.2.2/spray-can/http-client/#redirection-following)

**更新：**我决定尝试实现这一点并[发送了 PR](https://github.com/spray/spray/pull/560)。希望它会被合并。

* * *

目前没有办法告诉喷雾罐客户端遵循`3xx`重定向。有关更多详细信息，请参阅[此线程](https://groups.google.com/forum/#!topic/spray-user/VSqrUiTqtDg)。

有一张[公开的票](https://github.com/spray/spray/issues/132)，所以希望将来会发生这种情况。我相信捐款会受到欢迎。

# c# - 如何统一传递带有wwwform的json

> ID：13492089
> 
> 赞同：2
> 
> 时间：2012-11-21T11:15:53.440
> 
> 标签：c#, unity3d

我是团结的新手。

我想统一发送一个包含以下 json 数据的 post 请求

```
**url** = "http://index.php"

**sampple json** = {"id":"100","name":"abc"} 
```

我正在使用 C#

谁能为此提供解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T00:36:26.077

好吧，我正在处理这样的事情：

```
 public class RequestConnectionManager : Manager<RequestConnectionManager>
    {

    public int maxSubmissionAttempts = 3;

    public Coroutine post() {
                WWWForm playForm = new WWWForm();
                playForm.AddField("id", myJson.id);
                playForm.AddField("name", myJson.name);

                Post playPost = new Post("http://index.php", playForm, maxSubmissionAttempts, this);
                return StartCoroutine(PostWorker(playPost));
            }

    private IEnumerator PostWorker(Post playPost)
        {
            yield return null;
            yield return playPost.Submit();

            Debug.Log(playPost.Response);
            if (playPost.Error != null)
            {
                MessageBoxManager.Instance.Show("Error: " + playPost.Error, "Error", MessageBoxManager.OKCancelOptionLabels, MessageOptions.Ok);
            }
            else
            {
                try
                {
                    //do whatever you want in here
                    //Hashtable response = JsonReader.Deserialize<Hashtable>(playPost.Response);
                    //Debug.Log("UNITY LOG..." + response);

                }
                catch (JsonDeserializationException jsExc)
                {
                    Debug.Log(jsExc.Message);
                    Debug.Log(playPost.Response);
                }
                catch (Exception exc)
                {
                    Debug.Log(exc.Message);
                    Debug.Log(playPost.Response);
                }

            }
        }

    }

//As for the Manager class...

using UnityEngine;
using System.Collections;

// I wonder what the constraint where TManager : Singleton<TManager> would produce...
public class Manager<TManager> : SingletonW<TManager> where TManager : MonoBehaviour
{

    override protected void Awake()
    {
        base.Awake();
        DontDestroyOnLoad(this);
        DontDestroyOnLoad(gameObject);
    }

} 
```

希望这可以帮助！=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-30T09:13:53.607

我已经在下面这样做了。我们走吧：==>

```
using UnityEngine;
using UnityEngine.UI;
using System.Collections;
using System.Collections.Generic;
public class btnGetData : MonoBehaviour {
 void Start()
 {
     gameObject.GetComponent<Button>().onClick.AddListener(TaskOnClick);
 }
 IEnumerator WaitForWWW(WWW www)
 {
     yield return www;

     string txt = "";
     if (string.IsNullOrEmpty(www.error))
         txt = www.text;  //text of success
     else
         txt = www.error;  //error
     GameObject.Find("Txtdemo").GetComponent<Text>().text =  "++++++\n\n" + txt;
 }
 void TaskOnClick()
 {
     try
     {
         GameObject.Find("Txtdemo").GetComponent<Text>().text = "starting..";   
         string ourPostData = "{\"plan\":\"TESTA02\"";
         Dictionary<string,string> headers = new Dictionary<string, string>();
         headers.Add("Content-Type", "application/json");
         //byte[] b = System.Text.Encoding.UTF8.GetBytes();
         byte[] pData = System.Text.Encoding.ASCII.GetBytes(ourPostData.ToCharArray());
         ///POST by IIS hosting...
         WWW api = new WWW("http://192.168.1.120/si_aoi/api/total", pData, headers);
         ///GET by IIS hosting...
         ///WWW api = new WWW("http://192.168.1.120/si_aoi/api/total?dynamix={\"plan\":\"TESTA02\"");
         StartCoroutine(WaitForWWW(api));
     }
     catch (UnityException ex) { Debug.Log(ex.Message); }
 } 
} 
```

# javascript - 从数组中删除项目会导致 Uncaught TypeError

> ID：13492094
> 
> 赞同：0
> 
> 时间：2012-11-21T11:16:12.017
> 
> 标签：javascript, json

我制作了一些 jQuery 插件——它们都解析 JSON 提要并使用 Mustache.js 渲染它们；每个插件都采用一个整数值来表示要显示的项目数。

我`Uncaught TypeError: Cannot read property 'link' of undefined`在尝试使用以下代码解析 Stack Overflow JSON 提要时收到一条消息：

```
 $.ajax({
      type: 'GET',
      url: query,
      contentType: "jsonp",
      dataType: 'jsonp',
      success: function (jsonp) {

        /* loop through JSON items converting the time from UNIX timestamp
         ** format to readable words by parsing it through timeConverter() */
        var i;
        for (i = 0; i < jsonp.items.length; i++) {
          if (i > num-1){
            delete jsonp.items[i];
          } else {
            jsonp.items[i].creation_date = timeConverter(jsonp.items[i].creation_date);
          }
        }

        var output = Mustache.render(must_template, jsonp);
        element.html(output);
        return element;
      } //EOF CALLBACK
    }); //EOF AJAX 
```

作为一个快速修复，我通过简单地注释掉`delete`操作来禁用截断。该错误表明 Mustache.js 正在尝试访问不再存在的 JSON 对象的一部分；然而，该`delete`操作显然只影响超出用户定义限制的项目。

**发生此行为时，数组中仍有 20 个项目。**

**注意：** *是的，我自己回答了这个问题；但是 - 如果它显示最佳实践，更简洁的方式或以某种方式改进我的答案，我非常愿意接受另一个答案。:)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:16:12.017

经过多次谷歌搜索，我什么也找不到，甚至 StackOverflow 也让我失望了。*然后，偶然地，我遇到了我的“快速破解”*注释掉删除行的这种意想不到的副作用。

[![http://i50.tinypic.com/2ecgnxz.png](../Images/94066734a3bc9bd05d9523ff3a681982.png)](https://i.stack.imgur.com/HgdPl.png)

由于我没有注释掉整个`if/else`块，我的`timeConverter()`函数没有在通常会被删除的项目上运行。这证实了`for()`和的组合`if(){} / else{}`工作正常。所以看起来 Mustache.js 试图访问已经被删除的项目！几乎就像在删除项目时没有更新数组的`length`属性一样。`items[]`

我做了一个[jsFiddle](https://jsfiddle.net/Z54Wy/2/)测试用例，这证实了问题所在。这是代码和输出：

```
 $.ajax({
      type: 'GET',
      url: query,
      contentType: "jsonp",
      dataType: 'jsonp',
      success: function (jsonp) {

        /* loop through JSON items converting the time from UNIX timestamp
         ** format to readable words by parsing it through timeConverter() */
        var i;
        for (i = 0; i < jsonp.items.length; i++) {
          if (i > num-1){
              console.log("Deleting item. Current Count: "+jsonp.items.length);
            delete jsonp.items[i];
              console.log("Deleting item. New Count: "+jsonp.items.length);
          } else {
            jsonp.items[i].creation_date = timeConverter(jsonp.items[i].creation_date);
          }
        }
        console.log(jsonp);
        return element;
      } //EOF CALLBACK
    }); //EOF AJAX 
```

[![http://i45.tinypic.com/546kgj.png](../Images/e429bc9394460ff20809b3d642865a29.png)](https://i.stack.imgur.com/NQQ6y.png)

我尝试快速修复使用计数器来计算每次删除，然后从`length`属性（[jsFiddle](https://jsfiddle.net/Z54Wy/2/)）中减去删除计数器：

```
 $.ajax({
          type: 'GET',
          url: query,
          contentType: "jsonp",
          dataType: 'jsonp',
          success: function (jsonp) {

            /* loop through JSON items converting the time from UNIX timestamp
             ** format to readable words by parsing it through timeConverter() */
            var i, deleted = 0;
            for (i = 0; i < jsonp.items.length; i++) {
              if (i > num-1){
                delete jsonp.items[i];
                deleted++;
              } else {
                jsonp.items[i].creation_date = timeConverter(jsonp.items[i].creation_date);
              }
            }
            jsonp.items.length -= deleted;
            console.log(jsonp);
            return element;
          } //EOF CALLBACK
        }); //EOF AJAX 
```

这是生成的输出：

[![http://i45.tinypic.com/vg69vo.png](../Images/d542161427a4a252fdd84fbd912cae4a.png)](https://i.stack.imgur.com/B7F4j.png)

这段代码在放回测试环境并与 Mustache.js 一起使用时运行良好。**在数组上使用时，使用 delete 关键字不会影响长度属性**

来自 Java 背景，我认为这是一个属性而不是函数这一事实是理所当然的`length`——因此它不会在对数组进行任何更改时进行更新。一个愚蠢的错误让我花费了比它应该更多的时间！但是，我找不到任何其他关于此的帖子，所以我想我会发布它，希望它可以帮助处于类似位置的其他人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:41:39.303

`delete`与数组相比，是“低级”运算符。它直接删除*object 属性*，绕过所有特定的数组逻辑，因此不会更新数组的长度。

如果要从数组中删除元素，请使用[`.splice` ^([MDN])](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice) *，或者在您的情况下，您可以简单地设置数组的长度并在之后*迭代剩余的元素：

```
jsonp.items.length = Math.min(num, jsonp.items.length);
for (i = 0; i < jsonp.items.length; i++) {
  jsonp.items[i].creation_date = timeConverter(jsonp.items[i].creation_date);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:42:22.057

删除并没有像您已经发现的那样更改数组计数，它只是删除键。要从数组中删除项目，您可以使用 splice。例子：

```
var array2 = [ 1, 2, 3, 4 ];
array2.splice(2, 1);

console.log('---------------------------');
console.log(array2.length); // 3
console.log(array2[0]); // 1
console.log(array2[1]); // 2
console.log(array2[2]); // 4
console.log(array2[3]); // undefined 
```

工作样本：http: [//jsfiddle.net/qbXjp/1/](http://jsfiddle.net/qbXjp/1/)

# jquery - 从键盘右箭头 keydown 调用右键单击鼠标

> ID：13492099
> 
> 赞同：1
> 
> 时间：2012-11-21T11:16:23.733
> 
> 标签：jquery

```
$("#element").bind("keydown", function(e) {
    if (e.which === 39) { //if keyboard right arrow
        $("#element").trigger({
            type: 'mousedown',
            button: 2
        }).trigger({
            type: 'mouseup'
        });

        $("#element").bind('mousedown', function(ev) {
            if (ev.which === 2) {
                //call method - I need  pageX and pageY coordinates
                //methods.show.apply($this, [ev.pageX, ev.pageY, options.showAnimation]);
                alert("called");
            }
        });

    }
});​ 
```

我要做的是：按键盘右箭头键，然后模拟鼠标右键单击触发器，现在我需要一个处理程序，这样我就可以启动需要 X 和 Y 坐标的上下文菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:32:29.153

以下代码将记住鼠标光标在`#element`数据中的位置。然后它将使用`keydown`处理程序中存储的坐标：

```
$(document).on({
    keydown: function(e) {
        if (e.which === 39) {
            var $el = $("#element"),
                pos = $el.data("pos");

            $el.trigger({
                type: 'mousedown',
                which: 3,
                pageX: pos[0] || 0,
                pageY: pos[1] || 0
            });
        }
    },
    mousemove: function(e) {
        $("#element").data("pos", [e.pageX, e.pageY]);
    }
});

$("#element").on({
    mousedown: function(e) {
        if (e.which === 3) {
            alert(e.pageX + " / " + e.pageY);
        }
    }
});​ 
```

**演示：http:** [//jsfiddle.net/x4Bmw/2/](http://jsfiddle.net/x4Bmw/2/)

# java - 可以为失败的 JUnit 测试创建一个钩子吗？

> ID：13492101
> 
> 赞同：2
> 
> 时间：2012-11-21T11:16:28.877
> 
> 标签：java, junit

我们有一个单元测试父基类，以及一组扩展基类的单元测试。我希望每个失败的测试都调用一个特定的方法。是否可以在某处创建“钩子”或其他东西，即通过测试不会调用此方法，但失败的测试会在执行结束时调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:23:57.557

你应该看看 TestWatcher 类。创建您自己的扩展 TestWatcher 的类，覆盖 failed(Throwable e, Description description) 方法并向您的测试添加规则。

```
public class MyWatcher extends TestWatcher {
    @Override
    protected void failed(Throwable e, Description description) {
         callMyMethod();
    }
} 
```

你的测试：

```
public class MyTest {
      @Rule 
      public MyWatcher rule = new MyWatcher ();

      @Test
      public myTest(){...}
} 
```

TestWatcher 中也有有用的方法，比如starting() 和finished()

# c# - 带参数的线程失败

> ID：13492104
> 
> 赞同：1
> 
> 时间：2012-11-21T11:16:31.120
> 
> 标签：c#, multithreading

我有以下代码：

```
Thread userThread = new Thread(() => UserPasswordSpawn.InputBox(ref userName, ref password));
//UserPassWordSpawn.InputBox(ref userName, ref password);
/* do some calculations while user puts in data */

userThread.Join(); 
```

该线程不起作用，并且永远不会进入 InputBox() 函数（我在那里设置了一个断点，并且永远不会到达），而如果我执行注释部分它就可以正常工作（但是应该在系统运行时进行计算等待用户输入数据）。如何正确生成具有 2 个输入参数的线程（两次引用字符串）。

请注意，我得到的错误是关于 Thread.JoinInternal() 的，但主要的可能是该函数没有被调用。

使用 () => ThreadStart() 调用我从[如何将参数传递给 Thread 中的 ThreadStart 方法？](https://stackoverflow.com/questions/3360555/how-to-pass-parameters-to-threadstart-method-in-thread)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:20:31.150

这样：

```
Thread userThread = new Thread(() => UserPasswordSpawn.InputBox(ref userName, ref password)); 
```

您已经创建了新`thread`实例。
现在你应该以这样的方式开始它：

```
userThread.Start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T11:20:41.153

`userThread.Start();`在创建线程之后调用，在加入之前调用。

# python - 使用 shapefile 多边形查找一阶邻居

> ID：13492106
> 
> 赞同：5
> 
> 时间：2012-11-21T11:16:45.420
> 
> 标签：python, geometry, shapefile, nearest-neighbor, pysal

我正在寻找一种有效的方法来找到给定多边形的一阶邻居。我的数据是[shapefile](http://en.wikipedia.org/wiki/Shapefile)格式。

我的第一个想法是计算多边形质心的 x 和 y 坐标，以便找到邻居的质心。

```
import pysal
from pysal.common import *
import pysal.weights
import numpy as np
from scipy import sparse,float32
import scipy.spatial
import os, gc, operator

def get_points_array_from_shapefile(inFile):
    """
    Gets a data array of x and y coordinates from a given shape file

    Parameters
    ----------
    shapefile: string name of a shape file including suffix

    Returns
    -------
    points: array (n,2) a data array of x and y coordinates

    Notes
    -----
    If the given shape file includes polygons,
    this function returns x and y coordinates of the polygons' centroids

    Examples
    --------
    Point shapefile
    >>> from pysal.weights.util import get_points_array_from_shapefile
    >>> xy = get_points_array_from_shapefile('../examples/juvenile.shp')
    >>> xy[:3]
    array([[ 94.,  93.],
           [ 80.,  95.],
           [ 79.,  90.]])

    Polygon shapefile
    >>> xy = get_points_array_from_shapefile('../examples/columbus.shp')
    >>> xy[:3]
    array([[  8.82721847,  14.36907602],
           [  8.33265837,  14.03162401],
           [  9.01226541,  13.81971908]])

    (source: https://code.google.com/p/pysal/source/browse/trunk/pysal/weights/util.py?r=1013)

    """
    f = pysal.open(inFile)
    shapes = f.read()
    if f.type.__name__ == 'Polygon':
        data = np.array([shape.centroid for shape in shapes])
    elif f.type.__name__ == 'Point':
        data = np.array([shape for shape in shapes])
    f.close()
    return data

inFile = "../examples/myshapefile.shp"
my_centr = get_points_array_from_shapefile(inFile) 
```

这种方法可能对常规网格有效，但就我而言，我需要找到一个“更通用”的解决方案。该图显示了问题。考虑黄色多边形有裁判。邻居的多边形是灰色多边形。使用 centroids-neighbors 方法，清晰的蓝色多边形被认为是邻居，但它与黄色多边形没有共同的边。

最近从[有效地找到 200k 多边形的一阶邻居](https://gis.stackexchange.com/questions/17457/efficiently-finding-the-1st-order-neighbors-of-200k-polygons)修改的解决方案如下：

```
from collections import defaultdict
inFile = 'C:\\MultiShapefile.shp'

shp = osgeo.ogr.Open(inFile)
layer = shp.GetLayer()
BlockGroupVertexDictionary = dict()
for index in xrange(layer.GetFeatureCount()):
    feature = layer.GetFeature(index)
    FID = str(feature.GetFID())
    geometry = feature.GetGeometryRef()
    pts = geometry.GetGeometryRef(0)
    # delete last points because is the first (see shapefile polygon topology)
    for p in xrange(pts.GetPointCount()-1):
        PointText = str(pts.GetX(p))+str(pts.GetY(p))
        # If coordinate is already in dictionary, append this BG's ID
        if PointText in BlockGroupVertexDictionary:
            BlockGroupVertexDictionary[PointText].append(FID)
        # If coordinate is not already in dictionary, create new list with this BG's ID
        else:
            BlockGroupVertexDictionary[PointText] = [FID] 
```

使用此解决方案，我有一个以顶点坐标为键的字典和一个块组 ID 列表，这些 ID 在该坐标处具有一个顶点作为值。

```
>>> BlockGroupVertexDictionary
{'558324.3057036361423.57178': ['18'],
 '558327.4401686361422.40755': ['18', '19'],
 '558347.5890836361887.12271': ['1'],
 '558362.8645026361662.38757': ['17', '18'],
 '558378.7836876361760.98381': ['14', '17'],
 '558389.9225016361829.97259': ['14'],
 '558390.1235856361830.41498': ['1', '14'],
 '558390.1870856361652.96599': ['17', '18', '19'],
 '558391.32786361398.67786': ['19', '20'],
 '558400.5058556361853.25597': ['1'],
 '558417.6037156361748.57558': ['14', '15', '17', '19'],
 '558425.0594576362017.45522': ['1', '3'],
 '558438.2518686361813.61726': ['14', '15'],
 '558453.8892486362065.9571': ['3', '5'],
 '558453.9626046361375.4135': ['20', '21'],
 '558464.7845966361733.49493': ['15', '16'],
 '558474.6171066362100.82867': ['4', '5'],
 '558476.3606496361467.63697': ['21'],
 '558476.3607186361467.63708': ['26'],
 '558483.1668826361727.61931': ['19', '20'],
 '558485.4911846361797.12981': ['15', '16'],
 '558520.6376956361649.94611': ['25', '26'],
 '558525.9186066361981.57914': ['1', '3'],
 '558527.5061096362189.80664': ['4'],
 '558529.0036896361347.5411': ['21'],
 '558529.0037236361347.54108': ['26'],
 '558529.8873646362083.17935': ['4', '5'],
 '558533.062376362006.9792': ['1', '3'],
 '558535.4436256361710.90985': ['9', '16', '20'],
 '558535.4437266361710.90991': ['25'],
 '558548.7071816361705.956': ['9', '10'],
 '558550.2603156361432.56769': ['26'],
 '558550.2603226361432.56763': ['21'],
 '558559.5872216361771.26884': ['9', '16'],
 '558560.3288756362178.39003': ['4', '5'],
 '558568.7811926361768.05997': ['1', '9', '10'],
 '558572.749956362041.11051': ['3', '5'],
 '558573.5437016362012.53546': ['1', '3'],
 '558575.3048386362048.77518': ['2', '3'],
 '558576.189546362172.87328': ['5'],
 '558577.1149386361695.34587': ['7', '10'],
 '558579.0999636362020.47297': ['1', '3'],
 '558581.6312396362025.36096': ['0', '1'],
 '558586.7728956362035.28967': ['0', '3'],
 '558589.8015336362043.7987': ['2', '3'],
 '558601.3250076361686.30355': ['7'],
 '558601.3250736361686.30353': ['25'],
 '558613.7793476362164.19871': ['2', '5'],
 '558616.4062876361634.7097': ['7'],
 '558616.4063116361634.70972': ['25'],
 '558618.129066361634.29952': ['7', '11', '22'],
 '558618.1290896361634.2995': ['25'],
 '558626.9644156361875.47515': ['10', '11'],
 '558631.2229836362160.17325': ['2'],
 '558632.0261236361600.77448': ['25', '26'],
 '558639.495586361898.60961': ['11', '13'],
 '558650.4935686361918.91358': ['12', '13'],
 '558659.2473416361624.50945': ['8', '11', '22', '24'],
 '558664.5218136361857.94836': ['7', '10'],
 '558666.4126376361622.80343': ['8', '24'],
 '558675.1439056361912.52276': ['12', '13'],
 '558686.3385396361985.08892': ['0', '1'],
..................
.................
 '558739.4377836361931.57279': ['11', '13'],
 '558746.8758486361973.84475': ['11', '13'],
 '558751.3440576361902.20399': ['6', '11'],
 '558768.8067026361258.4715': ['26'],
 '558779.9170276361961.16408': ['6', '11'],
 '558785.7399596361571.47416': ['22', '24'],
 '558791.5596546361882.09619': ['8', '11'],
 '558800.2351726361877.75843': ['6', '8'],
 '558802.7700816361332.39227': ['26'],
 '558802.770176361332.39218': ['22'],
 '558804.7899976361336.78827': ['22'],
 '558812.9707376361565.14513': ['23', '24'],
 '558833.2667696361940.68932': ['6', '24'],
 '558921.2068976361539.98868': ['22', '23'],
 '558978.3570116361885.00604': ['23', '24'],
 '559022.80716361982.3729': ['23'],
 '559096.8905816361239.42141': ['22'],
 '559130.7573166361935.80614': ['23'],
 '559160.3907086361434.15513': ['22']} 
```

![在此处输入图像描述](../Images/b3cda68783d0238e8d9704c686375e71.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-16T22:37:59.940

以防这对于 OP 来说仍然是一个悬而未决的问题，或者其他人在这里绊倒。

```
import pysal as ps 
w = ps.queen_from_shapefile('shapefile.shp') 
```

[http://pysal.readthedocs.io/en/latest/users/tutorials/weights.html#pysal-spatial-weight-types](http://pysal.readthedocs.io/en/latest/users/tutorials/weights.html#pysal-spatial-weight-types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:30:54.697

我不熟悉所使用的具体数据格式，但无论如何，我认为以下想法可行。

在 Python 中，您可以从数字元组（即`(x,y)`和）中创建集合`(x1,y1,x2,y2)`，因此应该可以创建一个表示给定多边形中所有点或边的集合。之后，您将能够使用非常快速的集合交集操作来查找所有一阶邻居。

您也许可以使用某种琐碎的拒绝测试来加快该过程，以避免进一步处理不可能是邻居的多边形 - 也许使用您的多边形的质心想法。

这个解释有意义吗？

# php - 简单的 PHP 联系表：提交按钮不发送电子邮件

> ID：13492115
> 
> 赞同：0
> 
> 时间：2012-11-21T11:17:01.097
> 
> 标签：php, email, form-submit

我在网站上使用联系表格，但它没有发送电子邮件，请谁能告诉我这个代码哪里错了？
此表格是从另一个有效的站点复制的，所以我不明白它在哪里失败。我检查了语法，一切似乎都很好。

```
<?php 
/*
Template Name: Contact Page
*/

get_header();

$contact_show = true;

//If the form is submitted  
if(isset($_POST['submit'])) {  

 //Check to make sure that the name field is not empty  
 if(trim($_POST['contactname']) == '') {  
     $hasError = true;  
 } else {  
    $name = trim($_POST['contactname']);  
 }  
 //Check to make sure that the subject field is not empty  
if(trim($_POST['subject']) == '') {  
     $hasError = true;  
 } else {  
     $subject = trim($_POST['subject']);  
 }  

//Check to make sure sure that a valid email address is submitted  
if(trim($_POST['email']) == '')  {  
     $hasError = true;  
 } else if (!preg_match("/^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$/i",        trim($_POST['email']))) {  
     $hasError = true;
 } else {  
     $email = trim($_POST['email']);  
 }  

//Check to make sure comments were entered  
 if(trim($_POST['message']) == '') {  
     $hasError = true;  
} else {  
    if(function_exists('stripslashes')) {  
         $comments = stripslashes(trim($_POST['message']));  
   } else {  
        $comments = trim($_POST['message']);  
    }  
 }  

//If there is no error, send the email  
 if(!isset($hasError)) {  
    $contact_show = false;
    $emailTo = get_option('of_email_address'); 
    $body = "Name: $name \r\nEmail: $email \r\nSubject: $subject \r\nComments:\r\n $comments";          
    $headers = 'From: <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;  

    mail($emailTo, $subject, $body, $headers);  
    $emailSent = true;  
 }  
}  
?> 
<div id="top">
<h1><?php the_title(); ?></h1>
</div>
</div>
<div id="main_content">
<div id="contact">
<?php while ( have_posts() ) : the_post(); ?>
<?php endwhile; // end of the loop. ?>
<?php if ($contact_show == true) { ?>
<?php } ?> 

        <?php if(isset($hasError)) { //If errors are found ?>
            <div class="redbox">
                <p><?php _e('Please check if you\'ve filled all the fields with valid information. Thank you.') ?></p>
            </div>
        <?php } ?>

        <?php if(isset($emailSent) && $emailSent == true) { //If email is sent ?>
            <div class="greenbox">
                <p>
                    <?php _e('Your message has been sent!') ?><br />
                    <?php echo $name; _e(' thank you for emailing us! We will get in touch with you soon.'); ?>
                </p>
            </div>
        <?php } ?> 
        <form action="" method="post" id="contactForm"><!-- start contact form -->
            <fieldset class="contact-fieldset">
                <ul>
                    <li>
                        <label for="contactname"><?php _e('Name:') ?></label>
                        <input type="text" name="contactname" id="name" class="contact-input requiredContact" />
                    </li>
                    <li>
                        <label for="email"><?php _e('Email:') ?></label>
                        <input type="text" id="email" name="email" class="contact-input     requiredContact cEmail" />
                    </li>     
                    <li>
                        <label for="subject"><?php _e('Subject:') ?></label>
                        <input type="text" name="subject" id="subject" class="contact-input requiredContact" />
                    </li>
                    <li>
                        <label for="message"><?php _e('Message:') ?></label>
                        <textarea rows="6" style="overflow: hidden;" cols="40" id="message" name="message" class="contact-textarea 

requiredContact"></textarea>
                    </li>
                    <li>
                        <input type="submit" value="<?php _e('send message'); ?>"     name="submit" class="contact-submit" 

/>
                    </li>                      
                </ul>
            </fieldset>
        </form></div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:06:37.093

我检查了您的编码，因为没有错误，并且无法正常工作的原因可能是函数调用。

在您的编码中，存在几个函数调用。检查所有功能是否存在，以及该功能中是否存在任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:10:45.737

同样，PHP 看起来不错；检查您的 php.ini 文件并确保将邮件功能配置为为 PHP 提供 sendmail 的路径或 SMTP 连接；另外，请确保您的防火墙设置没有阻止端口 25（或您的配置的 SMTP 中继端口）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:19:31.153

如果您从另一个确实有效的站点复制它，则表明 PHP 代码有效，并且实际上是您的服务器设置错误，因为这是您更改的内容（而不是 PHP 代码，我认为如果它没有显示错误以前工作）。确保这些设置正确：

[http://php.net/manual/en/mail.configuration.php](http://php.net/manual/en/mail.configuration.php)

# java - Eclipse：删除 Eclipse 生成的 .class 和 .project 文件

> ID：13492124
> 
> 赞同：0
> 
> 时间：2012-11-21T11:17:25.200
> 
> 标签：java, eclipse

我有一个带有 SVN 版本控制系统的 Java 项目。我的IDE是eclipse。最初，当我打开项目时，我编辑了一些东西。因为这是团队项目。其他人将他自己的 .class 和 .project 文件提交到 svn 中。当我指出时，他在一些特定的子项目中删除了 .class 和 .project 。无论如何，我在所有子项目中都有 .class 和 .project 。现在我想要一个干净的环境，我想删除所有 .class 和 .project 文件。这个论坛有一些脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:23:59.790

你没有提到你使用的是什么操作系统......如果它是 linux 你可以在命令行中这样做：

```
find /the/path/to/your/project -name ".class" -exec rm {} \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:29:10.153

如果您有类似 unix 的环境，则可以从命令行“查找”。首先 cd 到项目目录，然后找到 . ( -name *.class -or -name .project ) -delete

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:35:14.483

您是否使用 Maven 作为构建工具？你的目录结构是什么。

任何 bin、out、target 等目录都应该在 SVN 的忽略列表中。您可以在 Tortoise SVN 中使用“添加到忽略列表”或编辑文件夹属性并设置“svn:ignore”属性。您可以递归地执行此操作。请注意，这也会影响其他开发人员。

如果您不使用 Maven，删除 .project 和 .classpath 可能会引起一些麻烦。可能设置了一些特定于项目的设置。盲目删除 .project 文件不是解决方案。如果您使用 Maven，您可以定义删除 .project、.classpath 和 .settings，将它们添加到忽略列表并使用 m2e 插件重新导入所有项目。

# c# - 是否可以将值直接绑定到文件“应用程序设置”到 css 样式表中？

> ID：13492126
> 
> 赞同：4
> 
> 时间：2012-11-21T11:17:27.633
> 
> 标签：c#, css, asp-classic, bind

我想知道是否可以直接在样式表“.css”中引用我的“appSetting”文件的值？像这样：

```
body
{
    background-color: <%$ AppSettings:myColorValue %>;
} 
```

这简直太美了^^非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:22:19.933

开箱即用的 ASP 脚本 ISAPI 引擎仅解析配置了支持的扩展名 ( `.asp`) 的文件。此外，`.css`文件是静态的，通常由浏览器缓存。

您可以将`body`样式移动到.asp 代码中的`<style>` [标记](http://www.w3.org/TR/html4/present/styles.html#edef-STYLE)`#include`中（例如，在 中），引擎将在其中解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:20:03.857

你不能。应用程序设置文件是 ASP.Net 特定的，CSS 文件不是。

但是，您可以定义自己的令牌方案并返回经过处理的、去令牌化的文件，然后缓存该文件。

# codeigniter - 避免以垃圾邮件/垃圾邮件形式发送电子邮件

> ID：13492127
> 
> 赞同：1
> 
> 时间：2012-11-21T11:17:32.397
> 
> 标签：codeigniter, email

我的 CI 应用程序我想在收件箱中发送电子邮件。

[我在http://www.mxtoolbox.com/Public/Tools/Blacklists.aspx](http://www.mxtoolbox.com/Public/Tools/Blacklists.aspx)上检查了我的服务器 IP，它不在任何黑名单中，但是如果我向 hatmail 发送电子邮件，它会变成**垃圾**邮件，有什么办法可以通过电子邮件发送给收件箱？

我已经测试了 CI 电子邮件库和 PHP 邮件功能，但都在垃圾邮件/垃圾邮件中发送电子邮件也只是从我的 gmail id发送文本**Hello 。**

# c# - 查找网络中的所有 IP 地址

> ID：13492134
> 
> 赞同：12
> 
> 时间：2012-11-21T11:17:54.970
> 
> 标签：c#, windows, networking, ping, tcp-ip

我正在尝试做这个 C#。我需要找到在我的网络中活动的所有 IP 地址并将它们显示在列表中。我可以 ping 网络中所有可用的 (1...255) ip 地址。但我想让这个过程更快。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T12:35:20.020

此代码在大约 1 秒内扫描了我的网络 255 个 D 级网段。我在 VB.net 中编写它并将其翻译成 C#（如果有任何错误，请致歉）。将其粘贴到控制台项目中并运行。根据需要进行修改。

注意：代码还*没有*准备好生产，需要改进，尤其是实例计数（尝试`TaskFactory`用 a`BlockingCollection`来实现）。

如果结果不稳定，请修改 ttl（生存时间）和超时。

运行代码会得到如下结果：

```
Pinging 255 destinations of D-class in 192.168.1.*
Active IP: 192.168.1.100
Active IP: 192.168.1.1
Finished in 00:00:00.7226731\. Found 2 active IP-addresses. 
```

C#代码：

```
using System.Net.NetworkInformation;
using System.Threading;
using System.Diagnostics;
using System.Collections.Generic;
using System;

static class Module1
{
    private static List<Ping> pingers = new List<Ping>();
    private static int instances = 0;

    private static object @lock = new object();

    private static int result = 0;
    private static int timeOut = 250;

    private static int ttl = 5;

    public static void Main()
    {
        string baseIP = "192.168.1.";

        Console.WriteLine("Pinging 255 destinations of D-class in {0}*", baseIP);

        CreatePingers(255);

        PingOptions po = new PingOptions(ttl, true);
        System.Text.ASCIIEncoding enc = new System.Text.ASCIIEncoding();
        byte[] data = enc.GetBytes("abababababababababababababababab");

        SpinWait wait = new SpinWait();
        int cnt = 1;

        Stopwatch watch = Stopwatch.StartNew();

        foreach (Ping p in pingers) {
            lock (@lock) {
                instances += 1;
            }

            p.SendAsync(string.Concat(baseIP, cnt.ToString()), timeOut, data, po);
            cnt += 1;
        }

        while (instances > 0) {
            wait.SpinOnce();
        }

        watch.Stop();

        DestroyPingers();

        Console.WriteLine("Finished in {0}. Found {1} active IP-addresses.", watch.Elapsed.ToString(), result);
        Console.ReadKey();

    }

    public static void Ping_completed(object s, PingCompletedEventArgs e)
    {
        lock (@lock) {
            instances -= 1;
        }

        if (e.Reply.Status == IPStatus.Success) {
            Console.WriteLine(string.Concat("Active IP: ", e.Reply.Address.ToString()));
            result += 1;
        } else {
            //Console.WriteLine(String.Concat("Non-active IP: ", e.Reply.Address.ToString()))
        }
    }

    private static void CreatePingers(int cnt)
    {
        for (int i = 1; i <= cnt; i++) {
            Ping p = new Ping();
            p.PingCompleted += Ping_completed;
            pingers.Add(p);
        }
    }

    private static void DestroyPingers()
    {
        foreach (Ping p in pingers) {
            p.PingCompleted -= Ping_completed;
            p.Dispose();
        }

        pingers.Clear();

    }

} 
```

和 VB.net 代码：

```
Imports System.Net.NetworkInformation
Imports System.Threading

Module Module1

    Private pingers As New List(Of Ping)

    Private instances As Integer = 0
    Private lock As New Object

    Private result As Integer = 0

    Private timeOut As Integer = 250
    Private ttl As Integer = 5

    Sub Main()

        Dim baseIP As String = "192.168.1."
        Dim classD As Integer = 1

        Console.WriteLine("Pinging 255 destinations of D-class in {0}*", baseIP)

        CreatePingers(255)

        Dim po As New PingOptions(ttl, True)
        Dim enc As New System.Text.ASCIIEncoding
        Dim data As Byte() = enc.GetBytes("abababababababababababababababab")

        Dim wait As New SpinWait
        Dim cnt As Integer = 1

        Dim watch As Stopwatch = Stopwatch.StartNew

        For Each p As Ping In pingers
            SyncLock lock
                instances += 1
            End SyncLock

            p.SendAsync(String.Concat(baseIP, cnt.ToString()), timeOut, data, po)
            cnt += 1
        Next

        Do While instances > 0
            wait.SpinOnce()
        Loop

        watch.Stop()

        DestroyPingers()

        Console.WriteLine("Finished in {0}. Found {1} active IP-addresses.", watch.Elapsed.ToString(), result)
        Console.ReadKey()

    End Sub

    Sub Ping_completed(s As Object, e As PingCompletedEventArgs)

        SyncLock lock
            instances -= 1
        End SyncLock

        If e.Reply.Status = IPStatus.Success Then
            Console.WriteLine(String.Concat("Active IP: ", e.Reply.Address.ToString()))
            result += 1
        Else
            'Console.WriteLine(String.Concat("Non-active IP: ", e.Reply.Address.ToString()))
        End If

    End Sub

    Private Sub CreatePingers(cnt As Integer)

        For i As Integer = 1 To cnt
            Dim p As New Ping
            AddHandler p.PingCompleted, AddressOf Ping_completed
            pingers.Add(p)
        Next
    End Sub
    Private Sub DestroyPingers()

        For Each p As Ping In pingers
            RemoveHandler p.PingCompleted, AddressOf Ping_completed
            p.Dispose()
        Next

        pingers.Clear()

    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:23:02.570

请参阅有关异步客户端套接字的[此链接](http://msdn.microsoft.com/en-us/library/bbx2eya8.aspx)以了解如何更快地 ping。

**编辑：**有关如何完成此操作的快速片段：

```
private static void StartClient() {
        // Connect to a remote device.
        try {
            // Establish the remote endpoint for the socket.
            // The name of the 
            // remote device is "host.contoso.com".
            IPHostEntry ipHostInfo = Dns.Resolve("host.contoso.com");
            IPAddress ipAddress = ipHostInfo.AddressList[0];
            IPEndPoint remoteEP = new IPEndPoint(ipAddress, port);

            // Create a TCP/IP socket.
            Socket client = new Socket(AddressFamily.InterNetwork,
                SocketType.Stream, ProtocolType.Tcp);

            // Connect to the remote endpoint.
            client.BeginConnect( remoteEP, 
                new AsyncCallback(ConnectCallback), client);
            connectDone.WaitOne();

            // Send test data to the remote device.
            Send(client,"This is a test<EOF>");
            sendDone.WaitOne();

            // Receive the response from the remote device.
            Receive(client);
            receiveDone.WaitOne();

            // Write the response to the console.
            Console.WriteLine("Response received : {0}", response);

            // Release the socket.
            client.Shutdown(SocketShutdown.Both);
            client.Close();

        } catch (Exception e) {
            Console.WriteLine(e.ToString());
        }
    } 
```

取自[此 Microsoft 文档。](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:40:25.533

如果你想走 ARP 路由，你可以简单地发送所有地址的 ARP 请求，稍等一下，然后查看你主机的 ARP 表

这可能会有所帮助

[http://www.codeguru.com/cpp/in/internet/internetprotocolip/article.php/c6153/How-to-Get-an-ARP-Table-with-an-IP-Helper-API.htm](http://www.codeguru.com/cpp/i-n/internet/internetprotocolip/article.php/c6153/How-to-Get-an-ARP-Table-with-an-IP-Helper-API.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:10:07.497

```
 public static void NetPing()
    {            
        Ping pingSender = new Ping();
        foreach (string adr in stringAddressList)
        {
           IPAddress address = IPAddress.Parse(adr);
           PingReply reply = pingSender.Send (address);

           if (reply.Status == IPStatus.Success)
           {
                //Computer is active
           }
           else
           {
                //Computer is down
           }
        }  
    } 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-21T11:33:34.853

[http://www.advanced-ip-scanner.com/](http://www.advanced-ip-scanner.com/)。这是一个工具，您可以使用它来查看您的网络上哪些 ip 处于活动状态。以及PC使用什么类型的网络硬件。

# excel - 在 SSIS 中导致“外部表不是预期格式”的工作簿保护

> ID：13492137
> 
> 赞同：0
> 
> 时间：2012-11-21T11:18:00.540
> 
> 标签：excel, ssis

我有一个 SSIS 包，它应该将文件从 excel 加载到 SQL Server 中。

当 Excel 工作簿没有密码保护时，过程顺利进行。但是当我用密码保护这个工作簿时，我开始收到错误**External table is not in the expected format**。可以在 SSIS 中完成以使 SSIS 能够读取此内容的任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:56:42.957

万能的互联网搜索引擎建议无法做到：http: [//msdn.microsoft.com/en-us/library/ms139836.aspx](http://msdn.microsoft.com/en-us/library/ms139836.aspx)

> 笔记
> 
> 您无法连接到受密码保护的 Excel 文件。

但是，您可以使用另一种语言创建一个小工具（建议使用 powershell），该工具将能够使用密码（您必须提供此工具）为您打开 excel，并为您的 SSIS 保存一个没有密码的工作簿版本采用。

或者：不要对用于 SSIS 的 Excel 进行密码保护。为了保护您可能会考虑为所有用户设置一个受限/受限/禁止访问的位置，但运行 SSIS 的用户除外。

# html - 奇怪的定位行为

> ID：13492139
> 
> 赞同：0
> 
> 时间：2012-11-21T11:18:05.227
> 
> 标签：html, css, positioning

我一直在玩弄定位（相对和绝对），但遇到了一个奇怪的问题。

**HTML：**

```
​&lt;div class="one">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam tincidunt sem ac      lacus varius ullamcorper. Sed sed tincidunt lorem. Integer volutpat mauris eu elit condimentum vehicula. Vestibulum vitae urna id risus ornare porta. Praesent quis tortor nunc. Donec ut aliquam orci. Mauris cursus quam mauris. Aliquam iaculis, augue malesuada egestas blandit, erat lectus vestibulum magna, sed pharetra arcu orci nec ligula. Proin non sem dui. Integer viverra viverra est sit amet fermentum. Pellentesque egestas tristique eros vel interdum. Nam vel neque odio, et mollis nulla. Vestibulum fermentum augue vel justo ullamcorper molestie. Sed eget enim urna, a elementum mi. Aenean ornare viverra dictum.

 </p>
<div class="inner"></div>

</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：**

```
.one{
    position: relative;   
}
.one p{
    margin-top: 60px;          
}
.inner{
  width: 100%;
  height: 50px;
  background:red;   
  position:absolute;
  top:0;
  right:0;
}​ 
```

正如您[在此处](http://codepen.io/anon/pen/wqpfb)看到的，我将边距应用于`<p>`标签，但它会推动整个包装 div 并因此也影响定位的元素。

这是它应该表现的方式还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:22:53.330

试试`overflow: auto;`你的 .one 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:25:01.237

`Overflow:auto`为此工作

**[演示](http://jsfiddle.net/DMrNe/1/)**

原因：这是对此[http://www.brunildo.org/test/OverflowR.html的解释](http://www.brunildo.org/test/OverflowR.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:21:21.373

将 padding-top 应用到包含的 div 而不是 margin-top 到

元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:28:32.087

`Div`有`class="one"`这个 CSS 规则

`position:relative`

将其所有内容向下推。

请记住，一旦您编写了`position:absolute`，这`absolute`将引用它的“容器”。如果您从中**删除***相对定位*，您将获得所需`one`的wat`one p`

**[演示](http://jsfiddle.net/6TKn9/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T11:30:50.710

绝对位置应用于父相对。如果您希望绝对定位的 div 位于页面顶部，请不要使用相对 at`one`或`one p`。

这是你要找的吗？ [http://jsfiddle.net/DYBpg/](http://jsfiddle.net/DYBpg/)

# osgi - Java EE 6 和 JAXRPCSecurity

> ID：13492143
> 
> 赞同：1
> 
> 时间：2012-11-21T11:18:15.407
> 
> 标签：osgi, jax-ws, java-ee-6, glassfish-3

我正在尝试将我的 Java EE 5（GlassFish v2，Metro 2.1.1）应用程序转换为 Java EE 6（GlassFish 3.1.2，Metro 2.2.1-1）。我的 web 服务客户端有问题，它的安全性基于 JAXRPCSecuirty。JAXRPCSecurity 配置：

```
private final static String SECURITY_CONFIG =
    "<?xml version=\"1.0\" encoding=\"UTF-8\"?> "+
    "<xwss:JAXRPCSecurity xmlns:xwss=\"http://java.sun.com/xml/ns/xwss/config\">                " +
    "   <xwss:Service>                                                                          " +
    "       <xwss:SecurityConfiguration dumpMessages=\"true\">                      " +
    "           <xwss:Sign includeTimestamp=\"false\">                                          " +
    "               <xwss:X509Token certificateAlias=\"certificate_alias\" />                       " +
    "               <xwss:CanonicalizationMethod disableInclusivePrefix=\"true\" />             " + 
    "               <xwss:SignatureTarget type=\"xpath\" value=\"//SOAP-ENV:Body\">             " +
    "                 <xwss:Transform algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"     " +
    "                                 disableInclusivePrefix=\"true\" />                        " +
    "               </xwss:SignatureTarget>                                                     " +
    "           </xwss:Sign>                                                                    " +
    "       </xwss:SecurityConfiguration>                                                       " +
    "   </xwss:Service>                                                                         " +
    "   <xwss:SecurityEnvironmentHandler>                                                       " +
    "      SecurityCallbackHandler                                                              " +
    "   </xwss:SecurityEnvironmentHandler>                                                      " +
    "</xwss:JAXRPCSecurity>"; 
```

以及我如何将此配置设置为 web 服务客户端：

```
public void configureSecurity() throws SITAWebServiceException {        
    String JAXRPCSecurityXML = completeJAXRPCSecurityXML(alias, keyStore, callbackHandler, dumpMessage);

    byte[] JAXRPCSecurityXMLBytes = convertJAXRPSecurityXMLToBytes(JAXRPCSecurityXML);

    XWSSecurityConfiguration sc = createXWSSecurityConfiguration(JAXRPCSecurityXMLBytes);

    ((BindingProvider) port).getRequestContext().put(XWSSecurityConfiguration.MESSAGE_SECURITY_CONFIGURATION, sc);      
}

private XWSSecurityConfiguration createXWSSecurityConfiguration(final byte[] JAXRPCSecurityXML) throws SITAWebServiceException {
    InputStream is = new ByteArrayInputStream(JAXRPCSecurityXML);
    try {
        return new SecurityConfiguration(is);
    } catch (XWSSecurityException e) {
        throw new SITAWebServiceException("XWSSecurityConfiguration problem.", e);
    } finally {
        closeInputStream(is);
    }
} 
```

使用 GlassFish v2 和 Metro 2.1.1，一切正常。但是 GlassFish 3 使用基于 OSGi 的 Metro（webservices-api-osgi 和 webservice-osgi），并且*com.sun.xml.xwss*包中的类不再可见（未导出），因此我经常收到此异常：

```
java.lang.NoClassDefFoundError: com/sun/xml/xwss/XWSSecurityConfiguration 
```

是否有一些解决方案如何导出包*com.sun.xml.xwss*或如何将 JAXRPCSecurity 更改为其他/更好的东西？

谢谢。

# android - 在Android中图像的不同位置添加文本

> ID：13492144
> 
> 赞同：0
> 
> 时间：2012-11-21T11:18:16.857
> 
> 标签：android, imageview, android-imageview

我有一个图像视图。我需要在图像上显示各种文本。对于每个图像，文本的位置都不同。我将使用 x,y 的坐标给出位置值`ImageView`。

任何猜测如何执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:22:11.993

将图像和文本封装在布局中，然后为其父视图中的视图提供坐标，然后使用封装的视图组，如您的图像视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:22:34.283

1.  创建位图
2.  创建画布
3.  画出你需要的东西
4.  将其发布到图像视图

像这样：

```
Bitmap drawingSurface = Bitmap.createBitmap(picBitmap.getWidth(), picBitmap.getHeight(), Bitmap.Config.ARGB_4444);

Canvas canvas = new Canvas(drawingSurface);
canvas.drawBitmap(picBitmap, 0, 0, null);

canvas.drawText("Hi!", 10, 10, new Paint());

myImageView.setImageBitmap(drawingSurface); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T11:26:38.157

```
Options options = new BitmapFactory.Options();
                    options.inScaled=false;
                    Bitmap original;
                    Bitmap mutable = null;
                    try{
                    original = BitmapFactory.decodeResource(this.getResources(), R.drawable.,null);
                    mutable = original.copy(Bitmap.Config.ARGB_8888, true);
                    }catch (Exception e) {
                        // TODO: handle exception
                    }
                    Paint paint=new Paint();
                    paint.setAntiAlias(true);
                    Canvas c= new Canvas(mutable);
                    Log.d("density",""+dm.density);
                    paint.setColor(Color.WHITE);
                    paint.setTypeface(Typeface.DEFAULT_BOLD);
                    paint.setTextAlign(Align.CENTER);   
                    paint.setTextSize(42);
                    c.drawText("text", (mutable.getWidth()/2)-x,(mutable.getHeight()/2)+y, paint);
                    BitmapDrawable bitmap = new BitmapDrawable(mutable)

                    imageView set background drawable bitmap 
```

# objective-c - 如何在 AVPlayer 中更改实时视频源的音量？

> ID：13492147
> 
> 赞同：1
> 
> 时间：2012-11-21T11:18:27.747
> 
> 标签：objective-c, ios, ipad, video-streaming, live-streaming

我正在开发一个应用程序，它一次在屏幕上显示 3 个实时视频源。为此，我在 AVFoundation 框架中使用 AVPlayer。

但是，要求视频仅在单击并选择后才输出音频。目前，我可以同时播放视频和音频。

因此，我试图创建一种方法来使每个 AVPlayer 上的音频静音。

我已经搜索了各种线程来寻找答案，但到目前为止还没有找到任何答案。

我最接近创建它的是通过 AVAssestTrack 获取提要中的音轨，并通过 AVMutableAudioMix 更改音量。

但是，我在我的音轨数组中取回了 0 个项目！

请有人看看我的代码，看看我在哪里犯了错误，或者是否有更好的方法来做到这一点？

谢谢你的帮助！

```
- (IBAction)touchVolumeButton:(id)sender {

float volume = 0.0f;

AVPlayerItem *currentItem = self.player.currentItem;
NSArray *audioTracks = [currentItem.asset tracksWithMediaType:AVMediaTypeAudio];

NSMutableArray *allAudioParams = [NSMutableArray array];

for (AVAssetTrack *track in audioTracks) {
    AVMutableAudioMixInputParameters *audioInputParams =
    [AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:volume atTime:kCMTimeZero];
    [audioInputParams setTrackID:[track trackID]];
    [allAudioParams addObject:audioInputParams];
}

if ([allAudioParams count] > 0) {
    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    [audioMix setInputParameters:[NSArray arrayWithObject:allAudioParams]];
    [currentItem setAudioMix:audioMix];

    AVAssetExportSession *session = [AVAssetExportSession exportSessionWithAsset:currentItem.asset presetName:@"current"];
    session.audioMix = audioMix;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-14T23:13:00.037

请注意，根据 Apple，您只能使用基于*文件*的资产`AVMutableAudioMix`以这种方式控制音量。这不适用于流媒体。

 *请参阅以下技术说明：

[https://developer.apple.com/library/content/qa/qa1716/_index.html](https://developer.apple.com/library/content/qa/qa1716/_index.html)

我已经在 iOS 11 上确认这不适用于流媒体，结果相同（返回一个空的轨道数组）。*

# php - 在这样的目录中没有错误，虽然它有

> ID：13492148
> 
> 赞同：-1
> 
> 时间：2012-11-21T11:18:30.907
> 
> 标签：php

*我是一名学生，我的英语不好，但我会尽我所能解释我的问题。*

我刚刚下载了一个 PHP 示例程序供我个人参考，我只想运行这个 PHP 文件。我使用下面的屏幕截图以及整个文件发布了我遇到的错误。

运行 PHP 文件时出错：

![在此处输入图像描述](../Images/d0e58880124d876a97a54e9582beeafa.png)

[PHP程序](http://www.mediafire.com/download.php?4g3gvt20rcd6gny)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:32:50.560

您在 windows 中运行示例，但您需要的路径不是 windows 路径。

从您的屏幕截图中，`config.php`似乎`initalize.php`在同一目录中，因此您需要将第 16 行更改`initalize.php`为以下方式：

```
require_once(dirname(__FILE__).'/config.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:24:34.347

这是因为您试图将文件插入不存在的文件`config.php`中，因此它会抛出错误检查您的包含文件夹`intialize.php`

# map - openlayers 不显示地图周围的空白区域

> ID：13492154
> 
> 赞同：0
> 
> 时间：2012-11-21T11:18:48.143
> 
> 标签：map, openlayers

我有一张简单的地图。当我缩小到地图最小缩放级别（整个地图概览）时，我会在地图周围看到很多空白区域？可以不显示吗？我是否需要以某种方式应用 pan locker 或设置界限或我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:15:55.410

您可以使用该`restrictedExtent`属性来限制一定程度的平移。这是一个示例：[Openlyers restrictedExtent 示例](http://openlayers.org/dev/examples/restricted-extent.html)

您还可以使用以下属性限制缩放级别：

```
minZoomLevel
maxZoomLevel
numZoomLevels 
```

# php - 如何对有限制的数组进行排序？

> ID：13492157
> 
> 赞同：1
> 
> 时间：2012-11-21T11:18:55.677
> 
> 标签：php, arrays, sorting, asort

`asort()`我想使用并限制要返回的元素数量对数组进行排序。

让我举个例子：

```
$words = array (
["lorem"]=>
int(2)
["sssss"]=>
int(2)
["dolor"]=>
int(4)
["ipsum"]=>
int(2)
["title"]=>
int(1) ); 
```

=limit = 2 我希望得到回报：

```
 $words = array (
    ["dolor"]=>
    int(4)    
    ["lorem"]=>
    int(2)); 
```

换句话说，我必须仅根据以下条件排序并返回第一次出现`$limit`

任何的想法 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T11:22:34.133

你可以使用[array_slice](http://php.net/manual/en/function.array-slice.php)

```
asort($words);
$result = array_slice($words, 0, $limit); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:26:44.410

您不能对 asort() 应用限制，但这是一种解决方法。

```
<?php 
   $words = array("Cat", "Dog", "Donkey");
   $sorted = asort($words);
   $limit = 2;
   $final = array();
   for ($i = 0; $i <= ($limit - 1); $i++) {
       $final[] = $words[$i];
   }
   var_dump($final);
?> 
```

希望这可以帮助。

# windows - 使用Rundll32复制SUBST的功能

> ID：13492160
> 
> 赞同：2
> 
> 时间：2012-11-21T11:19:05.100
> 
> 标签：windows, winapi, command, subst

我一直在尝试使用 rundll32 复制函数 subst.exe（用于映射驱动器的 Windows 应用程序）。

我知道它`DefineDOSDevice`被使用了，我知道要传递什么参数，但我就是无法让它工作。

可以说我希望 C:\Program Files 映射为 Z：

```
rundll32.exe kernel32.dll, DefineDosDeviceA * * * 
```

我尝试以我认为正确的形式传递所有参数，但没有成功。

如果有人可以为我提供将程序文件映射到 Z 的工作语法：使用 rundll32 我会非常高兴。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:43:20.877

Rundll32 不是通用的“运行导出函数”实用程序，它需要以特定方式对目标调用进行原型化（例如，将其命令参数作为字符串接收）。

由于`DefineDOSDevice`不遵守此要求，因此无法按您的意愿调用。

# r - R - 将值添加到符合特定条件的数据框

> ID：13492161
> 
> 赞同：9
> 
> 时间：2012-11-21T11:19:07.517
> 
> 标签：r, dataframe, match

我有以下两个数据框：

```
d <- data.frame(c1 = c("A","A","B","C","A","C","D","D"))

map <- data.frame(c1 = c("A","B","C","D"), c2 = c(12,14,16,25)) 
```

如何将另一个名为“匹配”的列添加到包含数据框映射中找到的相应值的数据框 d？所以数据框 d 应该如下所示：

```
A 12
A 12
B 14
C 16
A 12
C 16
D 25
D 25 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T11:22:23.913

使用调用的函数`match`：

```
d$match <- map$c2[match(d$c1,map$c1)] 
```

由于这些级别的指定方式，您还可以执行以下操作：

```
d$match <- map$c2[d$c1] 
```

但这只有在每一行都按顺序完全匹配因子`match`的水平时才有效。`c1`

# dll - 如何在 C# 中读取存储在外部 DLL 资源中的文本文件

> ID：13492164
> 
> 赞同：0
> 
> 时间：2012-11-21T11:19:17.300
> 
> 标签：dll, resources, external

我正在尝试读取存储在外部 DLL 中的文本文件 (.xml)。我可以通过这种方式获取存储在 DLL 中的文件：[Get Folder Address In DLL](https://stackoverflow.com/questions/13319576/get-folder-address-in-dll)。

但是当我想使用以下方法读取文本文件时遇到问题：

```
File.OpenRead(Uri.AbsoluteUri); 
```

Uri 就像：

```
pack://application:,,,/Library;component/catalog.xml 
```

我的 DLL 上有更多元素，例如图像。当我尝试加载它们时，它运行良好。

```
BitmapImage bmp = new BitmapImage(new Uri("pack://application:,,,/Library;component/image.png")); 
```

图像显示得很好。

为什么它不适用于我的文本文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:00:12.267

我已经通过使用这样的 StreamResourceInfo 解决了这个问题：

```
System.Windows.Resources.StreamResourceInfo streamResourceInfo = System.Windows.Application.GetResourceStream("pack://application:,,,/Library;component/catalog.xml"); 
```

感谢这篇文章：[Open a file from a pack URI in WPF](https://stackoverflow.com/questions/2532381/opening-a-file-from-a-pack-uri-in-wpf)

# wordpress - 在 Wordpress 插件子菜单页面中包含 jquery

> ID：13492165
> 
> 赞同：0
> 
> 时间：2012-11-21T11:19:24.073
> 
> 标签：wordpress

我为 Wordpress 管理面板创建了一个插件。它创建一个菜单和一个子菜单。在子菜单页面中，我想添加 jquery。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:37:11.267

在 add_submenu_page 为该子菜单调用的函数中使用类似的东西

例子：

```
public function function_called_from_add_submenu_page() {
     $jquery_path = 'https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js';
     wp_register_script('cdnjquery', $jquery_path);
     wp_enqueue_script('cdnjquery');
} 
```

请参阅：[http ://codex.wordpress.org/Function_Reference/add_submenu_page](http://codex.wordpress.org/Function_Reference/add_submenu_page)

请参阅：[http ://codex.wordpress.org/Function_Reference/wp_register_script](http://codex.wordpress.org/Function_Reference/wp_register_script)

请参阅：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

希望这可以帮助。

# paypal-sandbox - paypal payment advanced (PPA) - 测试 Intigration - 错误来了

> ID：13492169
> 
> 赞同：-1
> 
> 时间：2012-11-21T11:19:40.847
> 
> 标签：paypal-sandbox

我们刚刚设置了启用 PPA 的贝宝帐户。我们设置了 php 代码，以便我获得访问令牌。[我已经完成了这里](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-payments-advanced-hosted-pages)提到的所有更正 。

我们在 iframe 中正确获取了 payflow 表单。一旦我们输入详细信息`4111111111111111`，`12 12`我们就会从贝宝收到以下错误。测试模式已打开，我们添加了正确的沙盒帐户。

一些必需的信息丢失或不正确。请更正以下字段，然后重试。

```
Error: Information entered incorrect. Try again. 
```

谁能指导我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:17:30.447

这是由于错误的 API 凭据传递而出现的问题。只是修剪了值，它正在发送响应。

# c# - 数据表上的 Linq C# Groupby

> ID：13492172
> 
> 赞同：1
> 
> 时间：2012-11-21T11:19:49.053
> 
> 标签：c#, linq, group-by, linq-to-dataset

我想编写一个`Linq`查询来应用 group-by on `DataTable`，它将结果输出为`DataTable`.

我试过这段代码，它返回一个`var`类型的结果，但我想要结果`DataTable`

```
var query = from row in dt.AsEnumerable()
            group row by row.Field<DateTime>("ExpDate").Year into grp
            select new
            {
                Years = grp.Key,
                RSF = grp.Sum(r => r.Field<decimal>("SpaceRSF"))
            }; 
```

请你能帮助我找到一个正确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:26:48.280

查看[如何：实现 CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb669096.aspx) - 本主题描述如何实现两个自定义 CopyToDataTable 扩展方法，它们接受 DataRow 以外的类型的泛型参数 T。

只需使用该文章 ( `ObjectShredder<T>`) 中的代码即可获得以下结果：

```
DataTable table = query.CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:26:17.377

好的，所以根据这个

```
select new
            {
                Years = grp.Key,
                RSF = grp.Sum(r => r.Field<decimal>("SpaceRSF"))
            }; 
```

`code which return result as var type`有效地返回具有两个属性的对象集合：`Years`和`RSF`。
如果您想改用数据表，请编写将所有数据放入数据表的代码。基本上，它可能看起来类似于以下内容：

```
DataTable table = new DataTable();
table.Columns.Add("Years");
table.Columns.Add("RSF");
foreach(var item in query)
{
     table.Add(item.Years, items.RSF)
} 
```

希望这可以帮助。

# php - 将php变量设置为二维数组键

> ID：13492173
> 
> 赞同：1
> 
> 时间：2012-11-21T11:19:51.673
> 
> 标签：php, arrays, json, multidimensional-array

我是 php 新手，我正在尝试使用 json 数据和二维数组。

我已经将一个 json 对象从谷歌距离矩阵 API 转换为一个数组。我想将起点和终点地址作为二维矩阵中的键，然后是数组中的距离。

实际上，它看起来像：

```
 origin1   origin2
dest1      2         3
dest2     10         1 
```

我也有单独变量中的位置。我以为我可以将这些变量设置为二维数组中的键，但这似乎不起作用。

我想我应该只能从我转换为数组的 json 中完成所有这些工作，但我不确定如何。结果我可能把事情复杂化了。

任何帮助都会很棒。谢谢！

```
<?php

    include_once('dbHandle.php');

    $pcSet1 = getString();

    $url="http://maps.googleapis.com/maps/api/distancematrix/json?origins=London,UK|Leeds,UK&destinations=London,UK|Leeds,UK&mode=driving&language=en-UK&UNITS=imperial&sensor=false"; 

    $json = file_get_contents($url); // get the data from Google Maps API
    $result = json_decode($json, true); // convert it from JSON to php array

    $origin_addresses = array();

    for($i=0; $i<sizeof($result); $i++){
        $origin_addresses = $result['origin_addresses'];

    }

    $dist = array_flip($origin_addresses);

    //2d array to look like this but with Origin replaced with location and distances from the json
    $arr = array("origin1" => array("dest1" => "1 mile", "dest2"=>"5 miles", "dest3"=>"10 miles" ),

                 "origin2" => array("dest1" => "8 mile", "dest2"=>"6 miles", "dest3"=>"11 miles" )  

                );

?> 
```

# asp.net-mvc-3 - 此版本的 SQL Server 不支持没有聚集索引的表

> ID：13492175
> 
> 赞同：21
> 
> 时间：2012-11-21T11:19:56.917
> 
> 标签：asp.net-mvc-3, c#-4.0, azure, entity-framework-4.1, azure-sql-database

我正在使用**SQL Server 数据库开发****vs 2010 和 EF 4.1**。下面提到的代码适用于本地 SQL 服务器 DB。（SQL 2008）。

 **但是当我发布适用于**Windows AZURE 云**和**SQL Azure**的 MVC 应用程序时，它给出了**下面提到的错误**。

1.  为什么此错误**仅返回 SQL Azure**（使用桌面 SQL Server 2008）？
2.  如何摆脱这个？

我的存储库**代码示例如下。调用****Catalog.SaveChanges()**方法时出现下面提到的错误 。

```
using (var catalog = new DataCatalog())
{
    var retailSaleReturn = new RetailSaleReturn
    {
        ReturnQuantity = returnQuantity,
        Product = saleDetailObj.Product,
        Owner = owner,
        Provider = provider,
    };

    //add to context
    Catalog.RetailSaleReturns.Add(retailSaleReturn);

    //save for db
    Catalog.SaveChanges();
} 
```

**DbUpdateException**如下所示：

```
{"An error occurred while saving entities that do not expose foreign key properties for their relationships. The EntityEntries property will return null because a single entity cannot be identified as the source of the exception. Handling of exceptions while saving can be made easier by exposing foreign key properties in your entity types. See the InnerException for details."} 
```

**InnerException**如下所示：

```
{"Tables without a clustered index are not supported in this version of SQL Server. Please create a clustered index and try again."} 
```

**StackTrace**如下所示

```
at System.Data.Entity.Internal.InternalContext.SaveChanges()
   at PawLoyalty.Data.Repositories.CustomersRepository.ReturnRetailOnlySales(Guid saleDetailId, Int32 returnQuantity, String providerKey, String ownerKey) in D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Data\Repositories\CustomersRepository.cs:line 550
   at PawLoyalty.Web.Areas.Providers.Controllers.CustomersController.ReturnRetailOnlySales(String providerKey, String ownerKey, String petKey, Guid saleDetailId, Int32 returnQuantity) in D:\PawLoyalty Module\PawLoyalty\PawLoyalty\PawLoyalty.Web\Areas\Providers\Controllers\CustomersController.cs:line 942
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClassd.<InvokeActionMethodWithFilters>b__a()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-21T11:25:25.890

*您需要在SQL Azure*中要添加行的所有表上创建聚集索引；否则插入语句总是失败。

`CREATE UNIQUE CLUSTERED INDEX Idx_TableName ON TableName(yourGUIDColumn);`

以下是针对这些索引的一般准则和限制的参考：[MSDN Link](http://msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx#cir)

这是另一篇文章，解释了这背后的原因：[link](http://blogs.msdn.com/b/sqlazure/archive/2010/05/12/10011257.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-03T06:22:41.880

我发现升级到 v12 更容易。

我必须备份（因为我很聪明！），然后将我所有的数据库（使用旧的控制台 manage.windowszaure.com）从 Web 升级到基本层。然后按照此处的说明进行升级（[https://azure.microsoft.com/en-us/documentation/articles/sql-database-v12-upgrade/](https://azure.microsoft.com/en-us/documentation/articles/sql-database-v12-upgrade/)）

简单的说：

*   打开 portal.azure.com
*   选择 Sqlserver
*   运营
*   最新的 SQL 数据库更新

使用 azure powershell 监控进度：

```
Add-AzureAccount
Switch-AzureMode -Name AzureResourceManager
Get-AzureSqlServer -ServerName '<<yoursqlservername>>' -ResourceGroupName '<<sqlserverresourcegroupname>>' 
```**

# facebook - 某些用户无法使用 Facebook 应用程序

> ID：13492178
> 
> 赞同：0
> 
> 时间：2012-11-21T11:20:05.260
> 
> 标签：facebook

我在我的 Facebook 应用程序中遇到了一个奇怪的问题。它显示“应用程序不可用”错误，但仅适用于某些用户（实际上，大多数情况下）。我是该页面的唯一管理员，并且我认为我可以看到它因此而工作。但是，我的两个正在测试的朋友可以看到它，而其他人则看不到。

我使用 Facebook 的调试工具检查是否有任何问题，但似乎没问题。

应用页面是：[http ://apps.facebook.com/taggeoapp/](http://apps.facebook.com/taggeoapp/)

在此先感谢您的任何提示...我真的不知道发生了什么...

# php - xml如何在php中解析

> ID：13492180
> 
> 赞同：0
> 
> 时间：2012-11-21T11:20:19.170
> 
> 标签：php, xml, xml-parsing

我有这个xml

[http://www.scorespro.com/rss/live-soccer.xml](http://www.scorespro.com/rss/live-soccer.xml)

结构是这样的：

```
 <rss>
 <channel>
 <item>
 <title>
 </title>
 </item>
 </channel>
 </rss> 
```

我想获取有关标题的信息，所以我正在尝试这样做，但没有成功。

```
 $xml = simplexml_load_file('http://www.scorespro.com/rss/live-soccer.xml');
foreach($xml->item as $item)
 {
 echo $item->title;
 } 
```

我已经做了 print_r($xml) 来查看是否正确解析了我提供的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:24:13.860

`$xml`有根节点，在这种情况下`<rss>`：

```
foreach($xml->channel->item as $item) 
```

您还可以使用[XPath](http://php.net/manual/en/simplexmlelement.xpath.php)来获取项目：

```
$items = $result = $xml->xpath('/rss/channel/item'); 
```

# ruby-on-rails - 使用 Active Directory 进行 Rails 身份验证

> ID：13492183
> 
> 赞同：8
> 
> 时间：2012-11-21T11:20:28.187
> 
> 标签：ruby-on-rails, authentication, active-directory

在我的 Rails 应用程序中，我想使用活动目录进行身份验证。我已经看过 Adauth，但我不知道该怎么做

我可以用我的学校广告测试 AD：exchange.nhl.nl

有人可以帮助我进行身份验证，或者有一个好的教程或更好的宝石吗？广告中是否有密码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T11:34:12.967

你在用设计吗？然后[https://github.com/cschiewek/devise_ldap_authenticable](https://github.com/cschiewek/devise_ldap_authenticatable)应该可以帮助您入门。因为 Active Directory 是一个 LDAP 服务器。

有一个较旧的 gem，基于专门为 Active Directory 提到的另一个：[https](https://github.com/ajrkerr/devise_active_directory_authenticatable) ://github.com/ajrkerr/devise_active_directory_authenticatable它似乎没有被维护，但它仍然可能有用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T19:38:21.347

看一下[adauth](https://github.com/Arcath/Adauth) gem。它自称

> 基于 ruby​​-net-ldap 的 Microsoft Active Directory 的 Ruby 接口。

它带有一个生成器，可以与[cancan](https://github.com/ryanb/cancan)集成。

# php - 我想从 SQL 表中选择前 50 行并显示它们最新到最旧

> ID：13492186
> 
> 赞同：-3
> 
> 时间：2012-11-21T11:20:36.510
> 
> 标签：php, sql

```
 <?php
mysql_select_db("mgshuheb") or die("No such database");
$str = "SELECT * FROM posts ORDER BY id DESC";
$rs = mysql_query($str);
while($row = mysql_fetch_array($rs)) {

      echo '<span class="name">' . $row["name"] . '</span>'."<br />";
      echo $row["post"] . "<br />";
      echo $row["time"] . "<br /><br />";
      }
?> 
```

这是我目前所拥有的。当我输入它时，`SELECT TOP 50 * FROM posts ORDER BY id DESC;`它不断出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:21:42.507

在 MySQL 中，使用`limit`代替`top`：

```
SELECT  * 
FROM    posts 
ORDER BY 
        id DESC
LIMIT   50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:23:01.147

你应该限制查询

```
<?php
    $str = "SELECT * FROM posts ORDER BY id DESC LIMIT 0,50";
 ?> 
```

# neo4j - neo4j 中的死锁异常

> ID：13492189
> 
> 赞同：1
> 
> 时间：2012-11-21T11:20:48.083
> 
> 标签：neo4j

因此，在尝试将数据导入新数据库时，我遇到了大量死锁异常，我想知道如何避免它们以及哪些阈值会导致这些死锁。

导入脚本调用 REST 批处理 API 来添加关注者，单个批处理中每个节点的所有关注关系。

```
START left=node:node_auto_index(uname={from}), 
right=node:node_auto_index(uname={to})
CREATE left-[r:FOLLOWS]->right 
```

我正在 2200 个节点上创建 5340 个关系。大多数节点只跟随其他几个节点，但一些活动节点跟随大约一百个其他节点。

我想死锁正在发生，因为我试图在一批中批量插入特定节点的所有以下关系。是因为它包含在批处理 api 事务中而导致死锁吗？如果我把它从批次中取出，它不会死锁吗？

这种死锁是否会在生产中以及正常使用下发生？在日常使用中，我们不会批量导入单个节点的所有关系，但我想两个人可以尝试同时关注同一个人。

无论如何，我该怎么做才能避免，我怎样才能确保这不会在每天的生产使用中发生？

# ios - 如何将 albuffer 数据 (ObjectAL) 保存到磁盘文件

> ID：13492192
> 
> 赞同：1
> 
> 时间：2012-11-21T11:21:08.690
> 
> 标签：ios, openal

我正在尝试使用 ObjectAL 实现一些语音效果。我成功地应用了效果及其在 alsource 的 albufferdata 中可用。但是在将 ObjectAL 缓冲区保存到磁盘文件时出现了问题。尝试保存文件，但由于缓冲区数据格式与音频文件格式不同，无法打开保存的文件。请帮助我找到一种将数据保存到文件的方法。

# paas - Appfog 错误“错误（JSON 500）：未找到”

> ID：13492197
> 
> 赞同：2
> 
> 时间：2012-11-21T11:21:32.700
> 
> 标签：paas, appfog

当我使用 af update [appname] 将我的网站内容更新为 appfog 时，会返回如下错误

```
Uploading Application: 
```

检查可用资源：错误 (JSON 500): 500 Intern...

任何人都知道这些由 Appfog PaaS 服务器引起的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:04:22.753

尝试`af login`再次发出命令，然后尝试更新，它对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:49:53.237

他们在 AWS 欧盟地区的格林威治标准时间凌晨 5 点到 6 点遇到了问题，看起来像是连锁反应。假设您的应用程序在此服务器上，那么这是 Appfog 的问题。[https://console.appfog.com/](https://console.appfog.com/)也关闭了。

在 Twitter 上关注他们以获取服务更新；[http://twitter.com/appfogstatus](http://twitter.com/appfogstatus)

# html - 定义海报属性和预加载时视频消失

> ID：13492198
> 
> 赞同：6
> 
> 时间：2012-11-21T11:21:36.957
> 
> 标签：html, video, webkit, preload, poster

我有一个具有以下属性的视频标签：

```
 <video width="xx" height="xx" poster="image.jpg" preload="auto"> 
```

我需要显示海报图像，并且我希望预加载视频。
我不显示浏览器的控件，而是使用自定义控件（CSS 和 Javascript）手动控制视频。视频应该在我点击它时开始。

在 Firefox 中，这按预期工作：我单击海报图像，视频开始播放。我点击视频，视频停止。

在当前的 webkit 浏览器（Safari 6.0.2、Chrome 23.0.1271.64）上，但这不起作用：
只要我点击海报图像，**视频就会变得不可见**，留下一个空白（白色）框。我听到声音但可以看到视频。当我点击那个框时，声音停止了。

如果我设置`preload="none"` **或**离开海报图像，这将再次在 webkit 浏览器中工作。

是否有任何已知的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T14:16:01.023

我有一个类似的问题。现在在 Safari 中似乎还可以，但 Chrome 27 仍然表现不佳。这是我正在使用的解决方案（借用这个问题的公认答案：[Video element removed in Chrome when not using controls](https://stackoverflow.com/questions/9565363/video-element-disappears-in-chrome-when-not-using-controls)）。

**JS**

```
$(document).ready(function(){
    $("#video").on('play',function(){
        if (this.getAttribute('controls') !== 'true') {
            this.setAttribute('controls', 'true');                    
        }
        this.removeAttribute('controls');
    });
}); 
```

**HTML**

```
<video id="video" preload="auto" loop="loop" autoplay="autoplay" poster="picture.png">
    <source src="video.mp4" type="video/mp4" />
    <source src="video.webm" type="video/webm" />
    Your browser sucks.
</video> 
```

其中“picture.png”是您的海报图片，“video.mp4”和“video.webm”是您的视频。

这是一个有效的 js 小提琴：http: [//jsfiddle.net/2n5Yj/1/](http://jsfiddle.net/2n5Yj/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-07T17:55:52.550

我遇到了同样的问题，但是在使用 videojs 时有一个更简单的解决方法——

[http://www.videojs.com/](http://www.videojs.com/)

它们为海报包含一个单独的 div —— 我刚刚添加了一些 css 来覆盖它们的默认值：

```
.vjs-poster {
  width: 100%;
  position: absolute;
  top: 0;
  z-index: 20;
} 
```

我意识到 videohtml 库的额外开销可能不是最佳解决方案。只是发布以防万一它被认为是值得的/所以那些已经使用它的人可以利用它。

# linq - 如何加入两个实体

> ID：13492207
> 
> 赞同：2
> 
> 时间：2012-11-21T11:22:15.987
> 
> 标签：linq, linq-to-entities, entity-framework-4.1, linq-to-objects

## 如何加入两个实体

我的实体名称客户

```
Public Class Customer
{
   Name string {get;set;}
   Address string {get;set;}
} 
```

## 我得到了结果

```
Customer customer = this.customerService.GetAll();
Customer person = this.supplierService.GetAll(); 
```

如何在使用
单个实体预期的 linq 输出时加入两个实体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:24:05.750

编辑

根据评论，您想将其加入一个名为 output 的实体中，因此您可以在匿名类型的帮助下完成并加入

```
 var data = from c in customer 
               join p in person 
               on p.ID equals c.ID
               select new 
                {
                       PersonName = p.Name,
                       CustomerName - c.Name
                       PersonAdd = p.Add
                       CustomerAdd = c.Add
                  }; 
```

* * *

加入将像这样工作

检查更多细节：[**SQL to LINQ (Visual Representation)**](http://pranayamr.blogspot.ca/2010/12/sql-to-linq-visual-representation.html)

```
var data = from c in customer 
           join p in person 
           on p.ID equals c.ID
           select c; 
```

图像预设 ![在此处输入图像描述](../Images/e0fb387848515c12530a0811aa88393d.png)

或者

[**Linq加入多列**](http://pranayamr.blogspot.ca/2011/10/linq-join-on-mutiple-columns-using.html)

```
var cust = from c in Customers
           join p in persons on
             new { Name= c.Name, Address= c.Address }    
           equals
             new { Name= p.Name, Address= p.Address }    
           select c; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:29:19.973

首先

```
Customer customer = this.customerService.GetAll();
Customer person = this.supplierService.GetAll(); 
```

我的东西`GetAll()`必须返回集合或可枚举的客户。不是吗？然后，我觉得你需要联合而不是加入！

# java - Autowire 应用程序上下文

> ID：13492211
> 
> 赞同：4
> 
> 时间：2012-11-21T11:22:30.857
> 
> 标签：java, spring, spring-mvc

我正在尝试在我的 Spring MVC 项目中将 a 自动装配到我创建`WebApplicationContext`的类中。`ImageCreatorUtil`在使用应用程序上下文的类中执行方法时，我总是收到 NPE。需要注意的是，此方法是由`ApplicationListener`另一个配置文件中定义的调用。我不确定为什么自动装配不起作用。任何人都可以提供任何建议吗？

**servlet-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing 
        infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven>
        <mvc:argument-resolvers>
            <bean class="org.springframework.data.web.PageableArgumentResolver" />
        </mvc:argument-resolvers>
    </mvc:annotation-driven>

    <!-- Intercept request to blog to add paging params -->
    <mvc:interceptors>
        <mvc:interceptor>
            <mvc:mapping path="/blog/**"/>
            <bean class="org.tothought.spring.interceptors.PageableRequestHandlerInterceptor" />
        </mvc:interceptor>
        <mvc:interceptor>
            <mvc:mapping path="/**"/>
            <bean class="org.tothought.spring.interceptors.LookupHandlerInterceptor" />
        </mvc:interceptor>
    </mvc:interceptors>

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources in the ${webappRoot}/resources directory -->
    <mvc:resources location="/resources/" mapping="/resources/**" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <property name="maxUploadSize" value="5000000"/>
    </bean>

    <context:component-scan base-package="org.tothought.spring.**" />

</beans> 
```

**ImageCreatorUtil.java**

```
@Component
public class ImageCreatorUtil {

    static Logger logger = LoggerFactory.getLogger(ImageCreatorUtil.class);
    static final String IMAGE_PATH_FRAGMENT = "/resources/images/resume/skills/uploaded-icons/";

    @Autowired
    private WebApplicationContext context;

    /**
     * Creates the provided file in the resources directory for access by the
     * web application.
     * 
     * @param appContext
     * @param image
     */
    public void storeImage(Image image) {
        if (image != null) {
            String realPath = ((WebApplicationContext)context).getServletContext().getRealPath("/");
            File tmpFile = new File(realPath + IMAGE_PATH_FRAGMENT + image.getName());

            try {
                logger.info("Saving image to :" + tmpFile.getAbsolutePath());
                FileUtils.writeByteArrayToFile(tmpFile, image.getFile());
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

} 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:property-placeholder location="classpath:META-INF/db/db.properties" />
    <context:annotation-config/>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/to_thought" />
        <property name="username" value="${db.user}" />
        <property name="password" value="${db.password}" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="toThought" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <jpa:repositories base-package="org.tothought.repositories"/>

    <!-- Application Listeners -->
    <bean id="lookupLoader" class="org.tothought.spring.listeners.LookupLoaderApplicationListener" /> 
    <bean id="imageLoader" class="org.tothought.spring.listeners.ImageLoaderApplicationListener" /> 
</beans> 
```

**控制台错误**

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.NullPointerException
    at org.tothought.spring.utilities.ImageCreatorUtil.storeImage(ImageCreatorUtil.java:34)
    at org.tothought.spring.listeners.ImageLoaderApplicationListener.onApplicationEvent(ImageLoaderApplicationListener.java:29)
    at org.tothought.spring.listeners.ImageLoaderApplicationListener.onApplicationEvent(ImageLoaderApplicationListener.java:1)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:324) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:59:11.433

我试过你的代码。上下文的自动装配适用于任何控制器类中的上下文，但当我使用类的对象调用方法时它不起作用。因此，如果您执行以下操作：

**你的控制器：**

```
@Autowired
private ImageCreatorUtil icu;

public String controllerMethod(....) {
    icu.storeImage();
} 
```

**您的 application-context.xml ：**

```
<bean id="icu" class="****.controller.ImageCreatorUtil"/> 
```

然后自动装配就可以正常工作了。我会尝试向您更新这种行为的原因。

# vb.net - 我的 INSERT INTO 语句有错误

> ID：13492212
> 
> 赞同：0
> 
> 时间：2012-11-21T11:22:30.730
> 
> 标签：vb.net, winforms, ms-access, insert

这是我的代码：

```
Imports System.Data
Imports System.Data.OleDb

Public Class frmAdd
Dim con As New OleDbConnection
Dim com As New OleDbCommand
Dim ins As New OleDbCommand
Dim upd As New OleDbCommand
Dim strcon = ("Provider=Microsoft.Jet.OLEDB.4.0;Data Source = Supplies.mdb")

Private Sub frmAdd_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    con.ConnectionString = strcon
    con.Open()
End Sub

Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
    ins.CommandText = "INSERT INTO [product info] ([Product Name:],[Description:],[Quantity:],[Type:],[Date Received:],[Barcode:],[Price:]) VALUES ('" & txtItemName.Text & "', '" & txtDescription.Text & "', " & txtItemCount.Text & ", '" & cmbItemType.Text & "', " & txtDate.Text & ", '" & txtBarcode.Text & "', '" & txtPrice.Text & "',);"
    ins.Parameters.AddWithValue("@name", txtItemName.Text)
    ins.Parameters.AddWithValue("@desc", txtDescription.Text)
    ins.Parameters.AddWithValue("@count", Convert.ToInt32(txtItemCount.Text))
    ins.Parameters.AddWithValue("@type", cmbItemType.Text)
    ins.Parameters.AddWithValue("@dt", Convert.ToDateTime(txtDate.Text))
    ins.Parameters.AddWithValue("@code", txtBarcode.Text)
    ins.Parameters.AddWithValue("@price", txtPrice.Text)

    ins.CommandType = CommandType.Text
    ins.Connection = con
    ins.ExecuteNonQuery()
    ins.Dispose()

    con.Close() 
```

填满所有文本框后，我点击了保存按钮，当我点击保存按钮时，出现错误“INSERT INTO 语句中的语法错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:29:03.697

您的插入代码：

```
 ins.CommandText = "INSERT INTO product info (Product Name:,Description:,Quantity:,Type:,Date Received:,Barcode:,Price:) VALUES (" & txtItemName.Text & ", '" & txtDescription.Text & ", " & txtItemCount.Text & ", " & cmbItemType.Text & ", " & txtDate.Text & ", " & txtBarcode.Text & ", " & txtPrice.Text & ",);" 
```

列之间有“：”。不知道是不是故意的。

此外，您的 insert into 语句是错误的。它应该是这样的：

```
INSERT INTO ProductInfo(ProductName, Description, Quantity,.....etc) 
```

不确定如何处理表格，如果它确实有空格，即产品信息，也许使用 [产品信息]

最后确保从控件中获取值时，insert into 语句中没有非法字符。

也许考虑使用 SP 并将值参数化或清理输入。

只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:30:12.537

```
ins.CommandText = "INSERT INTO product info (Product Name:,Description:,Quantity:,Type:,Date Received:,Barcode:,Price:) VALUES (" & txtItemName.Text & ", '" & txtDescription.Text & ", " & txtItemCount.Text & ", " & cmbItemType.Text & ", " & txtDate.Text & ", " & txtBarcode.Text & ", " & txtPrice.Text & ",);" 
```

请更正您的**陈述**，即您的查询中有一个额外的撇号 (')。只需删除那个撇号。我想我会工作得很好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:36:00.683

Whats with the : 在每列名称之后，请随时在评论中解释。我的猜测是它是错误的......

`" & txtItemName.Text & "`需要封装在 ' 中，因为它是文本。

`" & cmbItemType.Text & "`需要封装在 ' 中，因为它是文本。

`" & txtDate.Text & "`需要转换成日期。

`" & txtBarcode.Text & "`需要封装在 ' 中，因为它是文本。

`",);"`最后一个逗号需要删除。

我不完全确定您可以在表名和/或列名中包含空格，请随时对此发表评论。

然而，我的猜测是，这是某种学校任务，因为这个查询的错误比正确的要多......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T11:49:58.253

带空格的表名应该用方括号括起来（产品信息的名称中有空格），列名也是如此（产品名称，接收日期）。
然后，如果您确实`:`在所有列名称中都有一个，那么在任何地方都使用方括号，否则`:`从 sql 文本（和数据库字段）中删除。

```
ins.CommandText = "INSERT INTO [product info] ([Product Name:], [Description:], " + 
                 "[Quantity:],[Type:],[Date Received:],[Barcode:],[Price:]) " + 
                 "VALUES (?,?,?,?,?,?,?)" 
```

就是说，永远不要使用字符串连接来构建 sql 文本以传递给数据库引擎。
您避免了日期和文本解析的问题（例如，如果您的输入文本之一包含引号，一切都会失败），此外您还**[避免了 Sql 注入攻击](http://www.unixwiz.net/techtips/sql-injection.html)**

```
ins.Parameters.AddWithValue("@name", txtItemName.Text)
ins.Parameters.AddWithValue("@desc", txtDescription.Text)
ins.Parameters.AddWithValue("@count", Convert.ToInt32(txtItemCount.Text))
ins.Parameters.AddWithValue("@type", cmbItemType.Text)
ins.Parameters.AddWithValue("@dt", Convert.ToDateTime(txtDate.Text)
ins.Parameters.AddWithValue("@code", txtBarcode.Text)
ins.Parameters.AddWithValue("@price", Convert.ToDecimal(txtPrice.Text) 
```

我假设**Quantity**是一个数字列，**Date Received**是一个 DateTime 列，**Price**是一个数字列。

# python - 更新后熊猫应用功能的问题

> ID：13492226
> 
> 赞同：0
> 
> 时间：2012-11-21T11:23:14.440
> 
> 标签：python, pandas, apply

`0.9.1`我无法使用以前版本的新版本 Pandas（在 Python 2.7 下）运行某段代码。我运行的代码如下：

```
myfunc = lambda x: makeDfCurve(frame,x)
dates = Series(frame.index, index = frame.index) # new Time series filled temporarily 
# with dates taken from a certain dataframe 'frame' index
# and here's where the code crash:
frame['curve'] = dates.apply(myfunc) 
```

我收到以下错误：

> TypeError：输入类型不支持 ufunc 'subtract'，并且根据转换规则 'safe' 无法安全地将输入强制转换为任何支持的类型

我尝试递归该函数以查看在 lambda 定义中作为 x 参数传递的某些日期是否有错误，但我在任何时候都得到了正确的结果。但是该方法不再起作用，我不知道为什么。我会很感激你的帮助和想法。

谢谢

PS我想用以下内容编辑我的问题，因为事实上，经过进一步调查：

这个错误是由于新版本的 Pandas 引起的：TimeSeries 的索引属于“类'pandas.lib.Timestamp'”类型，因此它给我的函数带来了一个问题，它需要一个日期时间对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:03:47.790

我终于通过检查新版本的文档解决了我的问题，其中解释了索引现在如何被视为时间戳[，](http://pandas.pydata.org/pandas-docs/dev/whatsnew.html)因此使用 .to_pydatetime() 方法将索引值转换为正确的日期时间对象，这是我的函数所要求的。

# ios - 更改地图注释视图的图像来源？

> ID：13492231
> 
> 赞同：8
> 
> 时间：2012-11-21T11:23:35.217
> 
> 标签：ios, mapkit, mkannotationview

常规注释引脚的原点位于底部的中间，因此引脚始终指向同一个位置。

但是当我添加我的自定义图像时，它的原点是图像的中心，所以每次放大或缩小，我的图像底部都会指向不同的位置。

![在此处输入图像描述](../Images/4317f1e0b8b2d6193f1b8c748ccff2c4.png)

这里我的别针应该指向巴黎的中心但是

![在此处输入图像描述](../Images/bb3276357e9e97da17b4b9a3b980b12b.png)

但是当我放大时，我的图钉底部并没有指向巴黎的中心。

我正在尝试，`CGRect.origin`但没有得到任何有用的东西。

这是我的代码：

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKAnnotationView * customPinView = [[MKAnnotationView alloc] init];
    UIImage * img = [UIImage imageNamed:@"waterPin.png"] ;
    CGRect resizeRect;
    resizeRect.size.height = 40;
    resizeRect.size.width = 40;
    resizeRect.origin = (CGPoint){0.0f, 0.0f};
    UIGraphicsBeginImageContext(resizeRect.size);
    [img drawInRect:resizeRect];
    UIImage *resizedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    customPinView.image = resizedImage;
    return customPinView;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T14:28:37.820

`MKAnnotationView`有一个`centerOffset`属性，您可以尝试设置它来调整图像偏移：

```
customPinView.centerOffset = CGPointMake(xOffset,yOffset); 
```

不相关，但您应该使用`initWithAnnotation`而不是仅仅`init`用于创建`MKAnnotationView`. 使用和实现注释视图重用以提高性能
也没有什么坏处。`dequeueReusableAnnotationViewWithIdentifier`

我还建议不要在委托方法中以编程方式调整图像大小，而是使用已经调整大小的图像开始。然后，您`customPinView.image = [UIImage imageNamed:@"resizedWaterPin.png"];`无需每次都在运行时调整注释图像的大小。

# opengl - 大于 246 的统一 int 数组的 GLSL 性能问题

> ID：13492249
> 
> 赞同：1
> 
> 时间：2012-11-21T11:24:16.730
> 
> 标签：opengl, graphics, glsl, shader

我只是想在片段着色器中实现 Perlin Noise。因此，我需要将大小为 512 的统一 int 数组传递给片段着色器。现在这导致我不太旧的 Mac 上的性能很糟糕（1FPS）。我试图减小数组的大小，这会导致数组中有 246 个元素的硬限制，这仍然会产生交互式帧速率。所以我的问题是：

*   这个限制从何而来？操作系统？显卡？OpenGL版本？
*   有没有解决的办法？我尝试使用整数纹理，但我的操作系统不支持这些！

有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:21:24.540

> 因此，我需要将大小为 512 的统一 int 数组传递给片段着色器。

您可以改用一维纹理。您甚至不需要整数，浮点数同样适用于 Perlin Noise。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:42:26.260

它必须是硬件或着色器版本限制。你可以用纹理代替吗？

# tomcat - 哈德逊日志进入标准错误，也没有翻滚

> ID：13492254
> 
> 赞同：0
> 
> 时间：2012-11-21T11:24:27.103
> 
> 标签：tomcat, logging, log4j, hudson

有一个奇怪，尴尬的问题

**a)** Hudson 操作日志进入 tomcat7-stderr.xdatex.log

**b）**它没有滚动，这意味着当日志变得太大时清理日志的cron作业不起作用

一直在尝试使用更新的 jars，不同的 log4j.properties 设置，更改 tomcat7w 中的设置，但都无济于事。这是我的设置：

**Tomcat7w：**

```
Level: Info
Log Path: C:\Program Files\Apache Software Foundation\Tomcat 7.0\logs
Log Prefix: tomcat_logging
Redirect Stdout: auto
Redirect Stderror: auto
Java Options:-Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 7.0
-Dcatalina.base=C:\Program Files\Apache Software Foundation\Tomcat 7.0
-Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 7.0\endorsed
-Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 7.0\temp
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
-Djava.util.logging.config.file=C:\Program Files\Apache Software Foundation\Tomcat 7.0\log4j.properties 
```

**在tomcat 7.0/conf/**

```
logging.properties has been renamed to logging.properties.off to disable it 
```

**在tomcat 7.0/lib/**

```
log4j.jar, tomcat-juli.jar (from extras) and tomcat-juli-adapters.jar are present, as is log4j.properties 
```

我的 log4j.properties 文件： http: [//pastebin.com/7gk4hbMy](http://pastebin.com/7gk4hbMy)

还有一片标准错误： http: [//pastebin.com/C0UtY09x](http://pastebin.com/C0UtY09x)

任何帮助将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:38:08.900

所有日志都写入

```
{catalina.base} 
```

这就是为什么在 tomcat 日志中生成的所有日志

# javascript - javascript数组基础

> ID：13492260
> 
> 赞同：0
> 
> 时间：2012-11-21T11:24:46.540
> 
> 标签：javascript, arrays

我试图改进我的 javascript 在这里遇到了一些死胡同。

```
var schemes = {
    "own" : {
        "creatures" : ["creature1","creature2","creature3","creature4"],
        "spells" : ["spell1","spell2","spell3","spell4"],
        "items" : ["item1","item2","item3","item4"]
    },
    "enemy" : {
        "creatures" : ["creature1","creature2","creature3","hidden"],
        "spells" : ["spell1","spell2","hidden","hidden"],
        "items" : ["item1","item2","item3","hidden"]
    }
}; 
```

这是我的阵列。

然后我尝试为每个（我从 php 知道）做一个，但似乎 javascript 认为方案是一个对象，因此无法做一个：

```
for (var i=0;i<schemes.length;i++) {
 //code 
} 
```

我错过了什么？scheme.length 说未定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:26:24.293

`schemes`确实是一个“对象”，因此没有`.length`.

您可以使用`Object.keys(schemes)`来获取键的数组，或者：

```
for (var key in schemes) {
    var el = schemes[key];
     ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:26:13.497

您错过了实际上`schemes`是一个对象而不是数组的事实。

考虑以下：

```
myobject = { 'a' : 1, 'b' : 2, 'c' : 3 } // this is an object

myarray = [ 1, 2, 3 ] // this is an array 
```

你可以用这些变量做什么：

```
for (var key in myobject) {
    console.log(key + ": " + myobject[key]);
}

for (var i = 0; i < myarray.length; i++) {
    console.log('Value at index ' + i + ':' + myarray[i]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T11:26:31.127

Schemes 是一个对象。我想你想让它成为一个对象数组。

```
var schemes = [{
    "own" : {
        "creatures" : ["creature1","creature2","creature3","creature4"],
        "spells" : ["spell1","spell2","spell3","spell4"],
        "items" : ["item1","item2","item3","item4"]
    },
    "enemy" : {
        "creatures" : ["creature1","creature2","creature3","hidden"],
        "spells" : ["spell1","spell2","hidden","hidden"],
        "items" : ["item1","item2","item3","hidden"]
    }
}]; 
```

然后，您可以按如下方式遍历数组：

```
for (var i=0;i<schemes.length;i++) {
  alert(schemes[i].creatures[1]); //alerts creature1 (2x)
} 
```

# scala - 玩2.1-RC1反向路由不编译

> ID：13492262
> 
> 赞同：4
> 
> 时间：2012-11-21T11:24:51.687
> 
> 标签：scala, playframework-2.1

更新到玩 2.1-RC1 并且反向路由似乎有问题 In

```
routes.ControlPanel.CPanel.index 
```

**编译错误**：值 ControlPanel 不是对象 controllers.ControlPanel.routes 的成员

导入也会产生警告

```
import controllers.routes 
```

导入的“路由”被 ControlPanel 包中的对象路由定义永久隐藏

2.0.4 一切正常。我的控制器结构是这样的：

```
 -- app  
    -- controllers
        -- ControlPanel
            --CPanel.scala 
```

[在迁移指南](https://github.com/playframework/Play20/wiki/Migration)中找不到任何内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:50:08.887

```
ControlPanel.routes.CPanel.index 
```

解决它

# ios5.1 - 如何自定义facebook sdk3.1的FBFriendPickerViewController

> ID：13492263
> 
> 赞同：1
> 
> 时间：2012-11-21T11:24:52.063
> 
> 标签：ios5.1, ios6

![图片显示朋友列表](../Images/4b444840b30ec0ee41111d25f100df84.png)

我在我的应用程序中成功使用了 facebook sdk 3.1，并将 FBFriendPickerViewController 作为子视图添加到我的视图中，它显示了我的朋友列表，我可以一次选择一个朋友，当我点击完成按钮时，我会在我的下一个显示选定的朋友个人资料图片使用 pushviewcontroller 查看现在我希望在 didselectrow 而不是检查标记行和完成按钮上执行相同的操作。请提出一些指导方针，因为我需要尽快解决它......提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:26:16.823

只需使用`[friendPickerController setAllowsMultipleSelection:NO]`.

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:37:06.047

在您的 .h 文件中注册并使用我上面提供的代码。

这将关闭 FBfriendPicker 对话框并将您重定向到上一个页面。因此只允许进行单一选择。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:26:44.253

```
-(void)friendPickerViewControllerSelectionDidChange:(FBFriendPickerViewController *)friendPicker{
    self.selectedFriends = friendPicker.selection;
   [self.navigationController popViewControllerAnimated:YES];
} 
```

# jquery - 在 mouseup 事件上的 Jquery Slider

> ID：13492267
> 
> 赞同：1
> 
> 时间：2012-11-21T11:25:01.067
> 
> 标签：jquery, slider

我正在使用 jquery-1.7.1.js 和 jquery.slider.js

```
 jQuery('#Slider1').slider({ from: 0, to: maxAmount, smooth: true, step: 100,round: 0,
          onstatechange: function( value ){
    ....
    } 
```

当滑块被鼠标滑动时调用此函数。我想要具有事件滑动释放（如 mouseup）而不是 onstatechange 的相同滑块功能。

请建议..

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:39:32.923

对 mouseup 事件使用回调

```
jQuery('#Slider1').slider({ from: 0, to: maxAmount, smooth: true, step: 100,round: 0,
      callback: function( value ){
....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-25T23:17:09.807

滑块有一个`stop`事件来处理这个：

```
$('#slider').slider({ ..., stop: function(event, ui){ }, ... }); 
```

# java - 在运行的 Java 应用程序中查找并显示带有所选包（通过正则表达式）的线程跟踪

> ID：13492274
> 
> 赞同：1
> 
> 时间：2012-11-21T11:25:28.190
> 
> 标签：java, debugging, remote-debugging

我的问题来自实际实践：我有一个应用程序，它依赖于外部（网络）服务。如果某些服务无法访问，我的应用程序将冻结，我不明白问题出在哪里。

我自己不编写应用程序，如果出现问题，源代码也不会使用日志记录。

我运行**jconsole**并查看所有带有跟踪的线程（例如在我之前的 Windows 本机应用程序工作中使用**procexp执行此操作）。**但是有120个线程！！

所以我想在跟踪中找到一些类（或包/类的正则表达式模式）的线程并打印该跟踪。所以我找到了发生网络等待的地方。

**jconsole**应用程序表明这在理论上是可行的（但我真的不希望点击**jconsole**界面中的所有 120 个线程，我通过眼睛搜索我的包）。

我需要运行完整的调试器**jdb**吗？我是否需要使用一些选项来启动我的应用程序（实际上是 Jboss 应用程序服务器中的 Spring 应用程序）以允许检索此类信息？

我是 Emacs 的老用户，所以通过命令行实用程序将所有线程与本地运行的应用程序的痕迹一起转储也解决了我的问题。

我更喜欢连接到正常（没有任何调试调整）运行的应用程序，因为这似乎没有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:51:40.473

我运行**jvisualvm**访问*“线程”*选项卡并按*“线程转储”*按钮并获得询问信息！

所以我可以将报告保存到文件并使用正则表达式在*Emacs中执行搜索。*

我只是忘记了**jconsole** *已被弃用*，因为最近才回到 Java 世界（从低级 C 世界）。

但是请免费将我指向非交互式命令行解决方案...

**UPDATE** `kill -QUIT $pid`使 Java 进程将线程跟踪转储到标准输出。`jps -l`帮助查找Java进程。如果重新定义了标准输入（Tomcat AS 等） - 请查看 AS 日志！

# android - setDisplayHomeAsUpEnabled 和 setHomeButtonEnabled 有什么区别？

> ID：13492280
> 
> 赞同：45
> 
> 时间：2012-11-21T11:26:04.413
> 
> 标签：android, android-actionbar

我想在操作栏中启用主页按钮。我正在使用这段代码：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            actionbar.setHomeButtonEnabled(true);
            actionbar.setDisplayHomeAsUpEnabled(true);
} 
```

在此我使用`setHomeButtonEnabled`并`setDisplayHomeAsUpEnabled`在 ActionBar 中的图标处添加一个后退标记。如果我只使用`setDisplayHomeAsUpEnabled`then 也可以吗？是否需要设置`setHomeButtonEnabled`为true？

两者有什么区别？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-21T11:38:00.133

对于你想做的，`actionBar.setDisplayHomeAsUpEnabled(true)`就足够了。

区别在于：
`actionBar.setHomeButtonEnabled(true)`只会使图标可点击，图标背景的颜色作为点击的反馈。
`actionBar.setDisplayHomeAsUpEnabled(true)`将使图标可点击并在`<`图标左侧添加 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-21T11:41:58.440

正如安卓所说：

```
- setDisplayShowHomeEnabled(boolean showHome)
  // Set whether to include the application home affordance in the action bar.
  // (and put a back mark at icon in ActionBar for "up" navigation)

 -setHomeButtonEnabled(boolean enabled)
  // Enable or disable the "home" button in the corner of the action bar.
  // (clickable or not) 
```

我认为应该很清楚

# sql - 处理报表生成器中的动态列更改

> ID：13492283
> 
> 赞同：0
> 
> 时间：2012-11-21T11:26:14.057
> 
> 标签：sql, service, report, builder

我在 Report Builder 中建立了一个报告，但它仅适用于某些值，即我传入的参数。我想我知道它为什么会发生，但我不确定如何解决它。返回的 4 个列是动态命名的，具体取决于我传入的参数是什么。

如果我为不同的参数运行报表，我会得到 4 个不同的列名，它们不会映射到报表生成器使用的列名。似乎报表生成器仅映射我第一次测试查询时使用的列。

有没有办法指定某些列可能有不同的名称，并告诉报表生成器期待它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:06:14.097

而不是直接在主查询中使用列名参数。

制作另一个参数，例如 COND，并将此参数填充到报告触发器中，例如 after_parameter_form。

```
if  :p_col  is not null then
    :COND := 'AND  :p_col  = :p_token_id' ;
end if; 
```

并在主查询中用作

```
&COND 
```

# blackberry - 有人对 RIM 提供的 gzip 压缩有疑问吗？

> ID：13492286
> 
> 赞同：1
> 
> 时间：2012-11-21T11:26:17.833
> 
> 标签：blackberry, java-me, compression, gzip

我是 Java ME 和 BlackBerry 开发的新手。我正在尝试使用`GZIPOutputStream`包中的类压缩字节数组`net.rim.device.api.compress`。

如果我压缩一个字节数组，它可以工作，但如果我尝试使用 解压缩结果`GZIPInputStream`，它就不起作用。

我还编写了一个简单的 Java 应用程序，通过使用 Java JDK 提供的对象来压缩和解压缩字节数组，它工作正常。

如果我使用我用 Java 编写的应用程序压缩字节数组，我可以使用我为 BlackBerry 编写的解压缩方法解压缩它。问题是我用黑莓提供的方法压缩的东西不能解压。

有没有人遇到过类似的问题？我正在使用他们的官方文档[http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/compress/GZIPInputStream.html](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/compress/GZIPInputStream.html)和 SDK 7.1 中的压缩方法。

# php - php 显示来自 txt 文件的最后一次出现

> ID：13492289
> 
> 赞同：0
> 
> 时间：2012-11-21T11:26:25.087
> 
> 标签：php, while-loop

当行是相同的序列号时，我只需要显示**最后一次出现。**

这些是我的 txt 文件的行：

```
ID| NAME | SERIAL
1;  John;  00001;
2;  Mike;  00002;
3;  John;  00001; 
```

```
 // open file
  $file = fopen("Data.txt","r");

  // loop lines
  while(!feof($file)){
      $line =  fgets($file);
      $explode_line = explode(";",$line);
      $id = $explode_line[0];
      $serial = $explode_line[1];

      if ($serial == $_POST['serial'])) {
          echo $id . ' - ' . $serial;
      }
  }

  fclose($file); 
```

结果必须是：
3；约翰; 00001;

而不是：
1；约翰; 00001;
3；约翰; 00001;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:33:33.840

最简单的方法是将数据存储在行数组中；或者，如果您只需要一行，则需要一个元组：

```
$file = fopen("Data.txt","r");

$result = false;

// loop lines
while(!feof($file))
{
  // Use trim here
  $line =  trim(fgets($file));

  $explode_line = explode(";",$line);
  $id = $explode_line[0];
  $serial = $explode_line[1];
  if ($serial == $_POST['serial']))
  {
      $result = array('id' => $id, 'serial' => $serial);
  }
}
fclose($file);

if ($result)
{
  echo $result['id'] . ' - ' . $result['serial'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:33:48.463

只需覆盖`$myId`在循环之外定义的变量。这将始终包含循环完成后的最后一次出现。

```
 $file = fopen("Data.txt","r");

  $myId = '';

  while(!feof($file)){
      $line =  fgets($file);
      $explode_line = explode(";",$line);
      $id = $explode_line[0];
      $serial = $explode_line[1];

      if ($serial == $_POST['serial'])) {
          $myId = $id;
      }
  }

  fclose($file);

  if($myId != '')
  {
      echo htmlspecialchars($myId). ' - ' . htmlspecialchars($_POST['serial']);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:34:25.087

尝试这个/那是您的变体，尽可能少地修改/：

```
 // open file
  $file = fopen("Data.txt","r");
 $str = '';     

  // loop lines
  while(!feof($file)){
      $line =  fgets($file);
      $explode_line = explode(";",$line);
      $id = $explode_line[0];
      $serial = $explode_line[1];

      if ($serial == $_POST['serial'])) {
          $str = $id . ' - ' . $serial;
      }
  }

  echo $str;

  fclose($file); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:37:22.150

你可以试试；

```
 // open file
  $file = fopen("Data.txt","r");

  // loop lines
  while(!feof($file)){
      $line =  fgets($file);
      $explode_line = explode(";",$line);
      $id = $explode_line[0];
      $serial = $explode_line[1];
      if ($serial == $_POST['serial'])) {
        $ret_id = $id;
        $ret_serial = $serial;
        }         
      }
   fclose($file);
   echo $ret_id . ' - ' . $ret_serial; 
```

# java - REST 服务：如何在不使用注释的情况下指定 annotatedMethod

> ID：13492290
> 
> 赞同：10
> 
> 时间：2012-11-21T11:26:26.007
> 
> 标签：java, web-services, rest, jaxb, jax-rs

我们正在尝试从我们的类中取出所有注释并将其配置在`spring-config.xml`.

`spring-config.xml`好像

```
<jaxrs:server id="restServer" address="/rest/">
        <jaxrs:model id="restModel">
            <jaxrs:resource name="com.csc.fs.rest.contact.RetrieveContactHistoryBP" path="retrieveContactHistoryBP">
                <jaxrs:operation name="retrieve" path="{partyId}" consumes="application/json" produces="application/json" verb="GET">
                    <jaxrs:param name="req" type="CONTEXT"/>
                    <jaxrs:param name="partyId" type="PATH"/>
                </jaxrs:operation>
            </jaxrs:resource>
            <jaxrs:resource name="com.csc.fs.rest.contact.StartContactBP" path="startContactBP">
                <jaxrs:operation name="startContact" path="/" consumes="application/json" produces="application/json" verb="PUT">
                    <jaxrs:param name="req" type="CONTEXT"/>
                    <jaxrs:param name="startContact" type="REQUEST_BODY"/>
                </jaxrs:operation>
            </jaxrs:resource>
        </jaxrs:model>
        <jaxrs:serviceBeans> 
```

现在当我点击暴露的服务时： ![在此处输入图像描述](../Images/32cf01face3c74603f8c0d3c24098cc2.png)

我得到以下跟踪：

```
HTTP Status 500 - 
________________________________________
type Exception report
message 
description The server encountered an internal error () that prevented it from fulfilling this request.
exception 
java.lang.RuntimeException: org.apache.cxf.interceptor.Fault
    org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:102)
    org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:315)
    org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)
    org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:105)
    org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)
    org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)
    org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:108)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
root cause 
org.apache.cxf.interceptor.Fault
    org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:67)
    org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:315)
    org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)
    org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:105)
    org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)
    org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)
    org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:108)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
root cause 
java.lang.NullPointerException
    org.apache.cxf.jaxrs.model.wadl.WadlGenerator.handleOperation(WadlGenerator.java:310)
    org.apache.cxf.jaxrs.model.wadl.WadlGenerator.handleResource(WadlGenerator.java:253)
    org.apache.cxf.jaxrs.model.wadl.WadlGenerator.handleRequest(WadlGenerator.java:185)
    org.apache.cxf.jaxrs.impl.RequestPreprocessor.checkMetadataRequest(RequestPreprocessor.java:189) 
```

我确实调试到 cxf-jaxrs 源代码和在线

```
java.lang.NullPointerException
        org.apache.cxf.jaxrs.model.wadl.WadlGenerator.handleOperation(WadlGenerator.java:310) 
```

该方法搜索`annotatedMethod`但对象具有`annotatedMethod`字段 as`null`因此引发错误。

我可以使用方法上方的类中的注释让它工作。但我希望它通过 xml 配置工作。

我已经指定

```
<jaxrs:operation name="retrieve" path="{partyId}" consumes="application/json" produces="application/json" verb="GET"> 
```

这`retrieve`是要调用的操作。还需要设置哪些其他属性？还是只是 xml 配置的限制？

PS：如果您觉得需要添加或澄清更多信息，请发表评论。RESTful 服务的新手，不确定在此上下文中需要什么所有信息。

更新 ：

服务等级

```
//@Path("/startContactBP")
public class StartContactBP {
    //@PUT  
    //@Consumes(MediaType.APPLICATION_JSON)
    //@Produces(MediaType.APPLICATION_JSON)
    //@Path ("/")   
    //public com.csc.fs.ws.contact.StartContactResult startContact(@Context HttpServletRequest req, com.csc.fs.ws.contact.StartContact startContact){
    public com.csc.fs.ws.contact.StartContactResult startContact(HttpServletRequest req, com.csc.fs.ws.contact.StartContact startContact){

        //call login
            //call actual service
            //call logoff
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:51:13.747

从我所见，CXF 不一定期望方法被注释，`WadlGenerator`只是在`OperationResourceInfo`恰好被调用的类的实例上调用方法`getAnnotatedMethod`。这可能是因为开发人员只是懒惰并且没有适当地命名该方法。

我的建议是在堆栈跟踪中进行更高级别的调试，以查看创建类实例的内容`OperationResourceInfo`，从中您应该能够查看此创建是否出错。

另外，您使用的是什么版本的 CXf？确保它是最新的。

出于好奇，您为什么要使用 XML 配置而不是注释？

# c++ - 改变 OpenGL 顶点值

> ID：13492297
> 
> 赞同：2
> 
> 时间：2012-11-21T11:26:44.650
> 
> 标签：c++

我想在openGL中更改顶点值，我找到了一种更改它的方法，但是有一个错误，程序绘制了一个三角形，当我在运行时更改顶点值时，我看到了矩形，有什么问题？？

编码

```
#include "stdAfx.h"
#include <stdio.h>
#include <stdlib.h>
#include <glut.h>
void DataSource();
void showObject();
void cont();

void inti(int argcp,char **argv)
{
glutInit(&argcp,argv);
glutInitWindowSize(500,500);
glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
glutCreateWindow("square");
glClearColor(0.0,0.0,0.0,0.0);

glutDisplayFunc(showObject);
glutIdleFunc(cont);
}

 int main(int argcp,char **argv)
 {
inti(argcp,argv);
DataSource(0.1);
glutMainLoop();
return 0;
 }

void DataSource(float adding)
 {
GLfloat triangle1[]={(-0.9+adding),0.3+adding,(-0.9+adding),0.8+adding,      (-0.4+adding),0.8+adding,  -0.9,0.3,-0.4,0.8,-0.4,0.3};

   glEnableClientState(GL_VERTEX_ARRAY);

glVertexPointer(2,GL_FLOAT,0,triangle1);
  }

void showObject()
{

 glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    glDrawArrays(GL_TRIANGLES,0,3);

glutPostRedisplay();
glutSwapBuffers();
     }

    void cont()
      {
glutPostRedisplay();
     } 
```

# java - 如何快速测试 Hibernate 数据库是否正常

> ID：13492300
> 
> 赞同：0
> 
> 时间：2012-11-21T11:26:49.253
> 
> 标签：java, database, hibernate, h2, c3p0

当我启动我的应用程序时，我测试我的内部数据库是否正常，如下所示：

```
HibernateUtil.beginTransaction(); 
```

这是一个 H2 数据库。我在顶部使用 Hibernate 和 c3p0 池。

问题是需要**一分钟**才能确定它不能成为交易，我希望它在 10 秒内重试。我查看了 c3p0 属性，看不到任何这样做的东西。

*** 更新 *** 评论让我意识到 HibernateUtil.beginTransaction() 隐藏了我正在做的事情，替换为：

```
System.out.println("Get Session"+new Date());
Session session = com.jthink.songlayer.hibernate.HibernateUtil.getSession();
System.out.println("Get Txn"+new Date());
Transaction t = session.getTransaction();
System.out.println("Set Timeout"+new Date());
t.setTimeout(10);
System.out.println("Begin Txn"+new Date());
session.beginTransaction();
System.out.println("Commit"+new Date());
t.commit(); 
```

输出是

```
Get SessionWed Nov 21 12:15:56 GMT 2012
Get TxnWed Nov 21 12:16:27 GMT 2012
Set TimeoutWed Nov 21 12:16:27 GMT 2012
Begin TxnWed Nov 21 12:16:27 GMT 2012
FailedWed Nov 21 12:16:46 GMT 2012 
```

因此，似乎花费了 30 秒来获取 Session（由于数据库已损坏，不清楚如何获取 Session），然后 19 秒尝试开始事务

而当数据库正常时，时间是几秒钟

```
Get SessionWed Nov 21 12:23:57 GMT 2012
Get TxnWed Nov 21 12:23:59 GMT 2012
Set TimeoutWed Nov 21 12:23:59 GMT 2012
Begin TxnWed Nov 21 12:23:59 GMT 2012
CommitWed Nov 21 12:23:59 GMT 2012 
```

所以主要问题似乎是当数据库损坏时（某种程度上）获得一个会话需要很长时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:27:15.687

我想您没有`acquireRetryAttempts`为您的 C3P0 进行配置，它尝试连接到数据库 30 次，这是默认值。减少这个值，你会更快地得到它。

还有一些您可能想要调整的选项：

*   `acquireRetryDelay`（默认：1s）
*   `breakAfterAcquireFailure`（默认：假）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T12:32:18.200

试试这个： HibernateUtil.getsessionfactory().opensession();

代替：HibernateUtil.getSession();

# python - 如何处理来自控制台应用程序的密钥

> ID：13492304
> 
> 赞同：4
> 
> 时间：2012-11-21T11:27:06.427
> 
> 标签：python

我正在使用 Python 2.6，我想知道如何使用控制台中的向上键。我现在不想使用 Tkinter 或其他 GUI 库。

下面是我的代码。

```
history=[]    
while(1): 
    try:
        cmd = self.get_cmd()
        history.append(cmd)   # append user command
        # if i press UP key, just display history. 
        # i'll you for statement to disaply history.
        print "%s" %history 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:48:45.700

对于您的目标，您可以查看[readline](http://docs.python.org/2/library/readline.html)模块，它是为历史处理等而设计的。它是标准的 python 库，所以它可以是你所需要的。使用其他模块，[rlcompleter](http://docs.python.org/2.6/library/rlcompleter.html)你甚至可以处理自动完成。

# c++ - 生成不同格式的图像字节数据

> ID：13492305
> 
> 赞同：0
> 
> 时间：2012-11-21T11:27:27.547
> 
> 标签：c++, image, image-processing, opencv

我有一个应用程序可以接受许多不同格式的图像作为字节数据。在幕后，该应用程序使用自定义代码和 opencv 转换方法将这些图像转换为我们可以使用的格式。

我正在尝试编写一些单元测试，以将许多不同格式的图像添加到我们的库中，以确保应用程序正常工作并且应用程序性能不会受到不同格式的负面影响。

为此，我想我会创建一个可以加载 JPEG 的工具，然后使用 opencv 的转换方法将图像从 opencv 加载的 BGR 格式转换为我们接受的所有不同输入格式。不幸的是，OpenCV 似乎支持转换为 RGB 空间，但在另一个方向上没有那么多支持（比如 RGB 到 YUV_NV21）。

我可以使用其他任何库或应用程序来执行此操作吗？

如果我可以将转换作为单元测试的一部分进行，并且只迭代所有不同的格式，那就太好了，但是如果我需要提前将输入生成为二进制数据文件，那也可以。

提前致谢。

编辑：当我说图像格式时，我不是指压缩图像格式，如 JPEG 或 PNG。我的意思是不同的原始图像格式，如 RGB、RGBX、YUV（在所有不同的公式中）等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:20:32.870

您可能对[英特尔的 IPP](http://software.intel.com/en-us/intel-ipp)感兴趣。它有大量的[颜色转换程序](http://software.intel.com/sites/products/documentation/hpc/ipp/ippi/ippi_ch6/ch6_Intro.html)。不过，它不是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:59:15.643

Imagemagick 是一种可能性：

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

它被许多流行的应用程序使用。

您还可以搜索支持所需格式的特定库。

编辑：由于您想要原始格式，因此这是一个不错的项目，可以满足您的需求。将 RGB 转换为 YUV，反之亦然并不困难。你只需要使用公式。

[http://www.codeproject.com/Articles/402391/RGB-to-YUV-conversion-with-different-chroma-sample](http://www.codeproject.com/Articles/402391/RGB-to-YUV-conversion-with-different-chroma-sampli)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:34:54.330

以一种对每个人都有贡献的方式，考虑只使用 netpbm 来处理现有的内容，并为您需要的其他内容添加转换例程。netpbm.sourceforge.net

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:31:50.177

试试VTK。他们有不同的形象作家

# ios - IOS：获取目录中的文件名

> ID：13492306
> 
> 赞同：0
> 
> 时间：2012-11-21T11:27:32.227
> 
> 标签：ios, path

> **可能重复：**
> [获取 URL 的所有文件夹](https://stackoverflow.com/questions/5567711/get-all-folders-of-url)

我有这个目录：

```
NSString *tmp = @"http://192.168.0.13/dev/doc/"; 
```

在这个目录中有一个名为“file_01.pdf”的pdf文件，如果我只有路径，有没有办法知道名称文件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:30:40.180

你的问题在这里可能会更清楚一点。

1)

该文件的名称是否已经是路径的一部分？

NSString 有一个非常方便的方法，叫做[" `lastPathComponent`"](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/lastPathComponent)在这里可能很适合你。

2)

或者，如果您有父文件夹路径但还没有文件名，则需要获取包含该文件夹中文件名的数组。

[您可以通过名为" `contentsOfDirectoryAtPath:error:`"](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/contentsOfDirectoryAtPath%3aerror%3a)的 NSFileManager 方法来获取该文件夹的内容。

# trigger.io - 触发 io 添加默认授权标头

> ID：13492307
> 
> 赞同：1
> 
> 时间：2012-11-21T11:27:35.470
> 
> 标签：trigger.io

只是想了解使用触发器 io 为所有 ajax 请求添加授权标头的最佳方法是什么。目前，我在每个请求上手动添加标头。很高兴知道这样的功能是否可用或未记录，如果没有，那么最好的方法是什么。类似于 AFNetworking 的东西，它允许您添加持久标头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:01:54.477

目前没有设置默认值的方法，您可以自己编写一个简单的辅助函数，例如：

```
var username = "myuser";
var password = "skldjghslg";
function myAjax(options) {
    options.username = username;
    options.password = password;
    forge.request.ajax(options);
} 
```

然后，每当您通常使用 forge.request.ajax 时，只需使用 myAjax。

# c# - 如何测试类型是否是某种 List<>？

> ID：13492311
> 
> 赞同：0
> 
> 时间：2012-11-21T11:27:41.733
> 
> 标签：c#, class, inheritance

> **可能重复：**
> [检查一个类是否派生自一个泛型类](https://stackoverflow.com/questions/457676/check-if-a-class-is-derived-from-a-generic-class)

如果某种类型，我如何测试类型`List<>`？例如。正如下面的三个类。

```
public class Words : List<string>
{
}

public class Numbers : List<double>
{
}

public class BigWords : Words
{
} 
```

我试过了

```
 typeof(List<DateTime>).IsSubclassOf(typeof(List<>))
    typeof(Words).IsSubclassOf(typeof(List<>))
    typeof(Numbers).IsSubclassOf(typeof(List<>))
    typeof(BigWords).IsSubclassOf(typeof(List<>)) 
```

但这又回来`False`了四次。我期望`True`每个。

我希望这个问题已经在其他地方得到解答，但我没有找到它，因为我发现继承、多态和泛型的语言可能会令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:30:34.207

看`Type.IsAssignableFrom`方法。

# php - 无法在 IE9 上授权 FB 应用程序

> ID：13492316
> 
> 赞同：0
> 
> 时间：2012-11-21T11:28:17.247
> 
> 标签：php, facebook, sdk

在测试我创建的 FB 应用程序时，我能够在所有浏览器上授权该应用程序，但 IE9 浏览器在单击“转到应用程序”按钮时再次显示附加屏幕。

我正在使用最新版本的 PHP FB SDK。

在 FF 和 Chrome 中测试并且正在工作，有什么想法吗？

**编辑**：这似乎是FB的一个错误：http: [//developers.facebook.com/bugs/434269633305911 ?browse=search_50acc066047f50931832838](http://developers.facebook.com/bugs/434269633305911?browse=search_50acc066047f50931832838)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:48:29.710

这是 JavaScript 问题。使用无js授权。最好在服务器端进行授权，因为它独立于浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:44:31.183

这是FB的一个错误，今天早上解决了。

# bash - 将进程的输出写入文件名中包含进程 ID 的文件

> ID：13492317
> 
> 赞同：6
> 
> 时间：2012-11-21T11:28:22.120
> 
> 标签：bash, background-process, pid, io-redirection

这就是我想要实现的目标：

*   在后台运行命令/进程并将其输出重定向到以后台进程的进程 ID 命名的临时文件。
*   例子：
    *   top & // 这个后台进程的进程ID是1123
    *   top 的输出应该存储在文件 1123.temp 中

这可能吗？因为要真正在后台运行它，我们是否必须在将其标记为后台进程之前进行重定向？还是有一些技术可以解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:42:48.470

您可以重定向到一个临时文件，然后`mv`将该文件重定向到所需的名称，例如

```
process > /tmp/process.log &
mv /tmp/process.log /tmp/$!.log 
```

`$!`是先前后台进程的 pid。请注意， mv 只是重命名该文件。它不会中断对它的写入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:43:02.840

在 bash 中运行`exec`命令会将当前进程（执行 bash 的进程）替换为您正在执行的进程。所以像

```
bash -c "exec top > ${BASHPID}.temp" & 
```

应该管用。

# iphone - 通讯簿中的统一信息无法获取电话

> ID：13492318
> 
> 赞同：0
> 
> 时间：2012-11-21T11:28:22.900
> 
> 标签：iphone, objective-c, xcode, ios6

对于统一信息联系人（iOS6 - Facebook 和云以及任何狗和猫的统一）使下面的代码不断返回 [None]。任何帮助使其再次工作将不胜感激。感谢你！

```
 NSString* phone = nil;
    ABMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty);
    if (ABMultiValueGetCount(phoneNumbers) > 0) {
        phone = (NSString*)ABMultiValueCopyValueAtIndex(phoneNumbers, 0);
    } else {
        phone = @"[None]";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:54:33.503

发现这里的解决方案效果很好： [iOS 6 通讯簿为空 kABPersonPhoneProperty](https://stackoverflow.com/questions/13032565/ios-6-address-book-empty-kabpersonphoneproperty) “要检索所有电话号码，您需要获取所有链接的联系人，然后在该联系人中查找电话号码。”

# mysql - 内连接mySQL

> ID：13492332
> 
> 赞同：1
> 
> 时间：2012-11-21T11:29:06.260
> 
> 标签：mysql, sql, join, inner-join

我有 3 张桌子

**登录**- user_id，用户名

**项目**- 项目 ID、项目名称

**任务**- task_id、project_id、task_giver、task_receiver、task_content

*其中 task_giver 和 task_receiver 具有登录表中的 user_id *

我的查询：

```
SELECT login.username, project.project_name, tasks.task_content, tasks.task_giver
  FROM tasks
  JOIN login ON login.user_id = tasks.task_receiver 
  JOIN project ON tasks.project_id = project.project_id
 ; 
```

但我没有`task_givers`得到只有 id 的名字。
我怎样才能知道他的名字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:32:02.503

`JOIN`桌子再`login`一次像这样：

```
SELECT 
  receivers.username 'Task receiver',
  givers.username 'Task giver', 
  p.project_name, 
  t.task_content
FROM tasks t
INNER JOIN login   receivers ON receivers.user_id = t.task_receiver 
INNER JOIN login   givers    ON givers.user_id    = t.task_giver
INNER JOIN project p         ON t.project_id      = p.project_id 
```

## [带有一些示例数据的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/1dbdc/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:31:28.557

您必须`JOIN`登录表两次（到 task_receiver 和到 task_giver）

# mongodb - Mongoid 在 ruby 1.9.3 上失败

> ID：13492337
> 
> 赞同：8
> 
> 时间：2012-11-21T11:29:18.077
> 
> 标签：mongodb, heroku, mongoid, mlab

所以我在玩 mongo 的东西。创建了一个新的 heroku 应用程序，为其添加了一个 mongolab 选项，但是每个 mongoid 方法都失败了。

我四处搜索，看起来这个问题在 1.9.3 之前的 ruby​​ 中很常见，但我正在运行 1.9.3。

这是最简单的失败示例：

```
require 'sinatra'
require 'mongoid'
require 'json'
require "sinatra/reloader" if development?

Mongoid.load!("mongoid.yml")

class Company
    include Mongoid::Document

    field :code, type: String
    field :sector, type: String
    field :share_id, type: Integer
    field :jse_code, type: Integer
end

get '/' do
    "Hello" 
end

get '/company' do
    Company.exists?
end 
```

无论我在本地（针对 mongolab db）还是在 heroku 上运行它，我都会得到同样的错误：

```
12:22:33 web.1  | NoMethodError - undefined method `match' for nil:NilClass:
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions/mongo_uri.rb:49:in `initialize'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions/factory.rb:103:in `new'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions/factory.rb:103:in `parse'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions/factory.rb:62:in `create_session'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions/factory.rb:43:in `default'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions.rb:109:in `default'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions.rb:378:in `__session__'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions.rb:213:in `mongo_session'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/sessions.rb:157:in `collection'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/contextual/mongo.rb:216:in `initialize'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/contextual.rb:47:in `new'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/contextual.rb:47:in `create_context'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/contextual.rb:30:in `context'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/contextual.rb:20:in `rescue in exists?'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/contextual.rb:18:in `exists?'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/mongoid-3.0.13/lib/mongoid/finders.rb:43:in `exists?'
12:22:33 web.1  |   app.rb:22:in `block in <main>'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `block in compile!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `[]'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (3 levels) in route!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:851:in `route_eval'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (2 levels) in route!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:872:in `block in process_route'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `catch'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `process_route'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:834:in `block in route!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `each'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `route!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:936:in `dispatch!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `block in call!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `block in invoke'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `catch'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `invoke'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `call!'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:755:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb:16:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb:17:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/logger.rb:15:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/commonlogger.rb:20:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:136:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:129:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/showexceptions.rb:21:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:99:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `block in call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:1471:in `synchronize'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/thin-1.5.0/lib/thin/connection.rb:81:in `block in pre_process'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/thin-1.5.0/lib/thin/connection.rb:79:in `catch'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/eventmachine-1.0.0/lib/eventmachine.rb:1037:in `call'
12:22:33 web.1  |   /Users/sdx/.rvm/gems/ruby-1.9.3-p327/gems/eventmachine-1.0.0/lib/eventmachine.rb:1037:in `block in spawn_threadpool'
12:22:33 web.1  | 127.0.0.1 - - [21/Nov/2012 12:22:33] "GET /__sinatra__/500.png HTTP/1.1" 200 31056 0.0062 
```

我究竟做错了什么 ？

**更新这里是我的 mongoid.yml **：****

 **```
production:
    sessions:
        default:
            uri: <%= ENV['MONGOLAB_URI'] %>
            options:
                skip_version_check: true
                safe: true
development:
    sessions:
        default:
            uri: <%= ENV['MONGOLAB_URI'] %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T14:18:21.270

根据堆栈跟踪，看起来构造函数`mongo_uri`被传递了一个空值。我会检查您的以下内容`mongoid.yml`：

*   它在正确的位置/`load!`指向正确位置的参数
*   它配置正确
*   如果它引用了`MONGOLAB_URI`在您的环境中设置的任何环境变量（例如，对于 MongoLab Heroku 插件）

来自[mongo_uri.rb:49](https://github.com/mongoid/mongoid/blob/05a70d889f6ed1e6a09f1e50067ffcd1d1e676be/lib/mongoid/sessions/mongo_uri.rb)的相关行，其中抛出异常：

```
 # Create the new uri from the provided string.
  #
  # @example Create the new uri.
  #   MongoUri.new(uri)
  #
  # @param [ String ] string The uri string.
  #
  # @since 3.0.0
  def initialize(string)
    @match = string.match(URI)
  end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T07:39:40.710

这与 heroku 在编译资产时不使用环境变量有关。

使用 heroku 的这个实验室功能将有助于解决这个问题：[https ://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)**

# nhibernate - nHibernate - 如何对连接数据进行 HQL

> ID：13492339
> 
> 赞同：1
> 
> 时间：2012-11-21T11:29:19.367
> 
> 标签：nhibernate, hql

我在为给定的 nHibernate 映射文件（nHibernate 1.2）制作 HQL 时遇到了一些麻烦。这个[SQL Fiddle](http://sqlfiddle.com/#!3/e0cf5/1/0)示例显示了我想要的表结构和结果。基本上，我会传递一个管辖权，我想要所有没有管辖权或特定管辖权的标题。当前流程将所有内容拉回并在代码中过滤；我正在努力改进它，以便它在 SQL 级别进行过滤。

映射文件看起来与此非常相似。

```
<?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
        assembly="MyApp.Business"
        namespace="Ap.Bus.Entity"
        default-access="field.camelcase-underscore"
        default-cascade="save-update" >

        <class name="Titles" table="dbo.Titles"  mutable="true" lazy="true">
            <!--Primary Key-->
            <id column="TitleID" name="Id" unsaved-value="0">
                <generator class="identity">
                </generator>
            </id>

        <property column="TITLE" name="Title"/>
        <property column="Enabled" name="Enabled" />

        <bag name="Jurisdictions" table="dbo.Jurisdictions" lazy="false" cascade="none">
            <key column="TitleID" />
            <many-to-many class="Ap.Shared.Jurisdiction, Ap.Shared" column="JurisdictionID"/>
        </bag>
</class> 
```

我尝试了很多不同的 HQL，但当我开始加入司法管辖区时，我永远无法让它发挥作用。当仅返回已启用的标题而没有加入时，它正在工作。

那么，我该如何编写 HQL 来实现这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:25:10.553

```
select t
from Title t left outer join t.Jurisdictions as j
where j is null or j = :someJurisdiction 
```

可能您应该将“.JurisdictionID”添加到上面的最后两个“j”。

# agda - 隐式参数并将函数应用于固定大小向量的尾部

> ID：13492342
> 
> 赞同：4
> 
> 时间：2012-11-21T11:29:43.420
> 
> 标签：agda, dependent-type

我编写了一个 Agda 函数`applyPrefix`，将一个固定大小向量函数应用于向量大小为的较长向量的初始部分`m`，`n`并且`k` 可能保持隐式。这是定义和辅助函数`split`：

```
split : ∀ {A m n} → Vec A (n + m) → (Vec A n) × (Vec A m) 
split {_} {_} {zero}  xs        = ( [] , xs )
split {_} {_} {suc _} (x ∷ xs) with split xs 
... | ( ys , zs ) = ( (x ∷ ys) , zs )

applyPrefix : ∀ {A n m k} → (Vec A n → Vec A m) → Vec A (n + k) → Vec A (m + k)
applyPrefix f xs with split xs
... | ( ys , zs ) = f ys ++ zs 
```

我需要一个对称函数`applyPostfix`，它将固定大小的向量函数应用于较长向量的尾部。

```
applyPostfix ∀ {A n m k} → (Vec A n → Vec A m) → Vec A (k + n) → Vec A (k + m)
applyPostfix {k = k} f xs with split {_} {_} {k} xs
... | ( ys , zs ) = ys ++ (f zs) 
```

正如`applyPrefix`已经表明的定义，`k`-Argument 在使用时不能保持隐含`applyPostfix`。例如：

```
change2 : {A : Set} → Vec A 2 → Vec A 2
change2 ( x ∷ y ∷ [] ) = (y ∷ x ∷ [] )

changeNpre : {A : Set}{n : ℕ} → Vec A (2 + n) → Vec A (2 + n)
changeNpre = applyPrefix change2

changeNpost : {A : Set}{n : ℕ} → Vec A (n + 2) → Vec A (n + 2)
changeNpost = applyPost change2 -- does not work; n has to be provided 
```

有谁知道一种技术，如何实现`applyPostfix`以使`k`- 参数在使用时保持隐式`applyPostfix`？

我所做的是校对/编程：

```
lem-plus-comm : (n m : ℕ) → (n + m) ≡ (m + n) 
```

并在定义时使用该引理`applyPostfix`：

```
postfixApp2 : ∀ {A}{n m k : ℕ} → (Vec A n → Vec A m) → Vec A (k + n) → Vec A (k + m)
postfixApp2 {A} {n} {m} {k} f xs rewrite lem-plus-comm n k | lem-plus-comm k n |     lem-plus-comm k m | lem-plus-comm m k = reverse (drop {n = n} (reverse xs))  ++ f (reverse (take {n = n} (reverse xs))) 
```

不幸的是，这没有帮助，因为我使用`k`-Parameter 来调用引理:-(

任何更好的想法如何避免`k`明确？也许我应该在 Vectors 上使用 snoc-View？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T14:01:55.927

您可以做的是提供`postfixApp2`与`applyPrefix`.

问题的根源在于，只有已知的自然数`n`才能统一。这是因为是通过对第一个参数的归纳定义的。`p + q``p``+`

所以这个有效（我在 上使用标准库版本的交换性`+`）：

```
+-comm = comm
  where
    open IsCommutativeSemiring isCommutativeSemiring
    open IsCommutativeMonoid +-isCommutativeMonoid

postfixApp2 : {A : Set} {n m k : ℕ}
            → (Vec A n → Vec A m)
            → Vec A (n + k) → Vec A (m + k)
postfixApp2 {A} {n} {m} {k} f xs rewrite +-comm n k | +-comm m k =
  applyPostfix {k = k} f xs 
```

是的，我在`applyPostfix`这里重用了原版，只是通过重写两次来赋予它不同的类型。

和测试：

```
changeNpost : {A : Set} {n : ℕ} → Vec A (2 + n) → Vec A (2 + n)
changeNpost = postfixApp2 change2

test : changeNpost (1 ∷ 2 ∷ 3 ∷ 4 ∷ []) ≡ 1 ∷ 2 ∷ 4 ∷ 3 ∷ []
test = refl 
```

# vb.net - ExcelDNA 中的 URL 帮助主题

> ID：13492343
> 
> 赞同：0
> 
> 时间：2012-11-21T11:29:48.250
> 
> 标签：vb.net, excel, excel-dna

我有以下用 VB .Net 编写的方法：

```
<ExcelFunction(Description:="Test", HelpTopic:="http://www.google.co.za")>
   Public Shared Function HelloWorld2(<ExcelArgument(Name:="First parameter",       Description:="Cool Function")> ByVal sString As String) As String
    Return "Hello World2, from a DLL... " & sString
End Function 
```

如您所见，HelpTopic 设置为 URL，当我运行该程序并单击“此功能的帮助”时，它说帮助参考无效。

是否可以在互联网上有一个帮助主题，excel 中的函数可以访问它。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:39:54.947

Excel 在 Excel 2010 中添加了对此的支持，您还需要[Excel-DNA](http://exceldna.codeplex.com) v. 0.30 来支持 Internet URL。Excel 在早期版本中不支持此功能。

# sql - VB.net 从目录读取文件名以运行 SQL 查询

> ID：13492347
> 
> 赞同：2
> 
> 时间：2012-11-21T11:30:04.363
> 
> 标签：sql, vb.net

我被要求创建一个轮询活动目录的控制台应用程序。(C.\Temp\输入)

当文件带有 时`(filename).SUCCESS`，将检索文件名以运行 SQL 查询。所以

```
IF fileextension = SUCCESS 
```

使用文件名运行 SQL 查询以更改 SQL 表中的值。将原始文件移动到`c:\temp\Input\Processed`

任何帮助或提示将不胜感激。

更新：

嗨，通过对各种网站的一些看法，我想出了以下内容。现在忘记 SQL，我只是在文件名和文件移动之后，但我得到一个文件已经在使用中的 IO 异常：

导入 System.IO 导入 System.String 模块 Module1

```
Dim fileName As String = "C:\temp\Input\NR12345.success"
Dim pathname As String = "C:\temp\Input\"
Dim result As String
Dim sourceDir As String = "C:\temp\Input\"
Dim processedDir As String = "C:\temp\Input\Processed\"
Dim fList As String() = Directory.GetFiles(sourceDir, "*.success")

Sub Main()
    result = Path.GetFileName(fileName)
    Console.WriteLine("GetFileName('{0}') returns '{1}'", fileName, result)
    result = Path.GetFileName(pathname)
    Console.WriteLine("GetFileName('{0}') returns '{1}'", pathname, result)

    Call MySub()

End Sub

Sub MySub()
    'Move Files

    For Each f As String In fList
        'Remove path from the file name. 
        Dim fName As String = f.Substring(sourceDir.Length = 0)
        Dim sourceFile = Path.Combine(sourceDir, fName)
        Dim processedFileDir = Path.Combine(processedDir, fName)

        ' Use the Path.Combine method to safely append the file name to the path. 
        ' Will overwrite if the destination file already exists.
        File.Copy(Path.Combine(sourceDir, fName), Path.Combine(processedDir, fName), True)
        'File.Copy(sourceFile, processedFileDir)

    Next f
End Sub 
```

端模块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:38:47.680

我以前用过这个：

[FileWath 类](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.90%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

对于轮询目录以了解结构和文件详细信息等的更改非常有用。

然后，您可以使用[它](http://msdn.microsoft.com/en-us/library/system.io.path.getextension%28v=vs.90%29.aspx)来获取文件的扩展名，如果它符合您的条件，则执行一些操作。

这些链接带有示例，请尽情享受！

```
Sub MySub()
    'Move Files

    For Each f As String In fList

        Dim fInfo As FileInfo = New FileInfo(f)

        Dim fName As String = fInfo.Name

        Dim processedFileDir = Path.Combine(processedDir, fName)

        ' Use the Path.Combine method to safely append the file name to the path. 
        ' Will overwrite if the destination file already exists.
        File.Copy(fInfo.FullName, processedFileDir, True)

    Next f
End Sub 
```

# mediawiki - wikipedia api 结果因列表和生成器查询而异

> ID：13492351
> 
> 赞同：3
> 
> 时间：2012-11-21T11:30:23.490
> 
> 标签：mediawiki, wiki, wikipedia-api, mediawiki-api

我正在探索 wiki api...

根据下面的帖子，我有一些疑问。 [Wikipedia list=search REST API：如何检索匹配文章的 URL](https://stackoverflow.com/questions/8930867/wikipedia-list-search-rest-api-how-to-retrieve-also-url-of-matching-articles/13492215#13492215)

我需要获取 wiki URL 以进行搜索。所以我用`generator=search`而不是`list=search`

但是从这两种方法得到的结果在它们返回的顺序上有所不同。

有人可以根据生成器方法中排序结果的因素告诉我吗？

样品尝试：

*   生成器：[http ://en.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=sachin+tendulkar&format=jsonfm&prop=info&inprop=url|displaytitle](http://en.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=sachin+tendulkar&format=jsonfm&prop=info&inprop=url|displaytitle)
*   列表：[http ://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=sachin+tendulkar&format=jsonfm](http://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=sachin+tendulkar&format=jsonfm)

# c# - 改变结构中的价值

> ID：13492358
> 
> 赞同：1
> 
> 时间：2012-11-21T11:30:45.150
> 
> 标签：c#, types, struct

为什么下面的代码是合法的

```
Point point = new Point();
point.X = 6;
point.Y = 5; 
```

但这会产生错误？

```
myButton.Location.X = 6;
myButton.Location.Y = 5; 
```

我知道结构是值类型，我们得到副本，所以我们不能`Location.X`间接修改，我们必须分配给`myButton.Location`一个全新的结构 as `new Point(6,5)`，但为什么`point.X = 6`有效？

我不明白区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:33:31.057

来自[MSDN：如何：Windows 窗体上的位置控件](http://msdn.microsoft.com/en-us/library/tkzw7bw7.aspx)

> 使用该`Location`属性同时设置控件的 X 和 Y 位置。要单独设置位置，请使用控件的 Left (X) 或 Top (Y) 子属性。不要试图隐式设置表示按钮位置的 Point 结构的 X 和 Y 坐标，**因为该结构包含按钮坐标的副本**。

[控制。**地点**](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)：

> 因为 Point 类是值类型，所以它是按值返回的，这意味着访问该属性会返回控件左上角的副本。因此，调整从该属性返回的 Point 的 X 或 Y 属性不会影响控件的 Left、Right、Top 或 Bottom 属性值。要调整这些属性，请单独设置每个属性值，或使用新点设置 Location 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:33:38.973

> 但为什么 point.X = 6 有效？

因为`point`是变量。您只是在修改变量值的一部分。这是允许且有用的（尽管我个人会尽可能避免使用可变值类型）。

因此，例如，您可以编写：

```
Point point = myButton.Location;
point.X = 6;
myButton.Location = point; 
```

...这将有效地改变 for 的`X`值`myButton.Location`。

更改被复制然后丢失的值的一部分是*没有*用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:37:04.323

因为当你说`myButton.Location` `Location`已经是副本时，你没有任何参考。任何物体的改变和失去它都没有意义。

# c++ - 特征库，将矩阵的列乘以方阵

> ID：13492360
> 
> 赞同：0
> 
> 时间：2012-11-21T11:30:51.163
> 
> 标签：c++, matrix-multiplication, eigen

我想通过运算符 N 转换矩阵 M 的每一列。Eigen 允许用预乘法来表达这一点：

```
M.colwise() *= N; 
```

但是乘法`M_j * N`在数学上是不确定的。

有什么方法可以避免编写循环吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T07:37:02.137

如果你想从左边乘以每一列`M`，`N`只需执行一个普通的矩阵-矩阵-乘法：

```
M = N * M; 
```

这将评估`N*M`为一个临时的，然后移动到`M`. 如果您经常这样做并希望为此重新使用分配的内存，请`M_temp`在之前的某处声明一个临时矩阵并编写

```
M_temp.noalias() = N * M;
M.swap(M_temp);  // M_temp has the old memory of M; Swapping is O(1) 
```

如果你害怕太多的内存消耗，你可以写这样的东西

```
for(long i=0; i<M.cols()-3; i+=4)
    M.middleCols<4>(i) = N * M.middleCols<4>(i);
M.rightCols(M.cols()%4) = N * M.rightCols(M.cols()%4); 
```

# ruby-on-rails - 如何将此 ActiveRecord::Observer 转换为 Service 对象？

> ID：13492362
> 
> 赞同：2
> 
> 时间：2012-11-21T11:31:09.830
> 
> 标签：ruby-on-rails, ruby, activerecord, observers, sidekiq

如何将以下 ActiveRecord::Observer 转换为 Service 对象（或者可能是多个对象）？

通过`PushService`WebSocket 更新所有连接的浏览器的所有更改。它通过 POST 到外部进程来做到这一点。自从迁移`Thread.new`到 Sidekiq 后，观察者就破产了。在 :after_create 中启动的 Sidekiq 作业可以在事务实际提交之前运行，因此它会引发 ActiveRecord::NotFound 错误。

建议使用 :after_commit 钩子，但是这样所需的信息`PushService`将`record.changes`不可用。

这个观察者实现的有趣用例是，当创建一条新消息时，它是对另一条消息的回复。它将自动运行两个回调。一个 :after_create 用于回复消息，一个 :after_touch 用于线程消息。

我有兴趣了解如何通过使用显式服务对象来运行此行为。

```
class PushObserver < ActiveRecord::Observer
    observe :message

  def after_create(record)
    Rails.logger.info "[Observe] create #{record.inspect}"
    PushService.new(:create, record).publish
  end

  def after_update(record)
    Rails.logger.info "[Observe] update #{record.changed.inspect}"
    PushService.new(:update, record).publish
  end

  def after_touch(record)
    Rails.logger.info "[Observe] touched #{record.changes.inspect}"
    PushService.new(:touch, record).publish
  end

  def after_destroy(record)
    Rails.logger.info "[Observe] destroy #{record.inspect}"
    PushService.new(:destroy, record).publish
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T23:18:43.547

[您可以使用名为wisper](https://github.com/krisleech/wisper)的 gem 设置订阅者和侦听器。

因此，在您的 PushService 类中，您将包括`Wisper::Publisher`Github 页面上有一个将其用作服务的确切示例。这样，事件的触发将由实际对象处理。

因此，每当 PushService 执行需要更新已连接浏览器的操作时

```
def some_action
  #some code
  publish(:done_something, self)
end 
```

然后服务对象可以使用该`subscribe`方法监听这个事件。

# android - 从应用程序在 Android 的网络浏览器中打开一个 URL

> ID：13492364
> 
> 赞同：1
> 
> 时间：2012-11-21T11:31:11.800
> 
> 标签：android

如何在单击按钮时从我的应用程序中打开 android Web 浏览器中的 url。

我试过这个：

```
Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(strURL));

startActivity(myIntent); 
```

但我得到了例外：

但我有一个例外：

```
 "No activity found to handle Intent{action=android.intent.action.VIEW data =www.google.com" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:34:07.630

你做的基本正确，你只需要包含完整的网址。

```
String strURL="http://www.google.com";
Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(strURL));
startActivity(myIntent); 
```

基本上，`http`就是协议。这是计算机试图弄清楚你想如何打开它的方式。`https`如果您想通过 SSL 建立安全连接，您可能还对 感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:59:27.567

几乎看起来[这](http://mobile.tutsplus.com/tutorials/android/launch-android-browser/)对从页面阅读......很有用：

```
Uri uri = Uri.parse("http://androidbook.blogspot.com");
Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uri);
startActivity(launchBrowser); 
```

还有第二种方法，涉及[WebView](http://j.mp/bsWWyA)，但这似乎不是你的问题。希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:38:20.413

```
String url = "http://www.example.com";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:39:08.523

关注此[了解更多详情](http://glorious-arvind.blogspot.in/2012/11/open-url-in-android-web-browser.html)

尝试这个：

```
String strURL = "http://www.google.com";
        Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(strURL));

        startActivity(myIntent); 
```

至于丢失的“http://”，我会做这样的事情：

```
if (!url.startsWith("http://") && !url.startsWith("https://"))
   url = "http://" + url; 
```

# c - 如何将两个windows vc静态库合并为一个

> ID：13492365
> 
> 赞同：6
> 
> 时间：2012-11-21T11:31:26.653
> 
> 标签：c, visual-studio, merge, static-libraries, visual-c++

我有一个使用 VC6 (Visual Studio 6.0) 生成的两个静态库`a.lib`和`b.lib`（C 语言）。

我想将这两个库合并到一个静态库`c.lib`中。如何在 CLI 模式下执行此操作？

我已经看到了[*nix static libs 的合并](https://stackoverflow.com/questions/3821916/how-to-merge-two-ar-static-libraries-into-one)。我想在 CLI 模式下对 VC6 静态库做同样的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T11:46:16.277

**LIB.EXE /OUT:c.lib a.lib b.lib**

LIB.EXE 在 < VC6_InstalledFolder >/VC98/BIN 中可用。这个 LIB.EXE 在所有版本的 Visual Studio 中都可用。

# c++ - 代码中的分段错误

> ID：13492366
> 
> 赞同：0
> 
> 时间：2012-11-21T11:31:27.853
> 
> 标签：c++, csv, vector, segmentation-fault

我是 C++ 的新手，我想做的是从 .csv 文件中读取并将其存储在向量中然后显示，我的问题是代码在最后一个 reqd 条目显示后崩溃从终端运行时文件，但在 ide（代码块）中，当我尝试调试它时，它说 sigsegv 错误...

ps：我想要将文件读入向量的原因是以后能够进入mysqldb

```
#include <vector>
#include <string>
#include <sstream>
#include<fstream>
#include <iostream>

using namespace std;
vector<string> split_at_commas(const string& row)
{
    vector<string> res;
    istringstream buf(row);
    string s;
    while (getline(buf, s, ','))
        res.push_back(s);
    return res;
 }

int main()
{
    string line;
    ifstream  data("Book1.csv" ,ios::out);
    while(!data.eof())
    {
        getline(data,line,'\n');
        vector<string> v = split_at_commas(line);
        /*ide points error to this line*/ 
        cout << v[0] << '\t' << v[1] <<'\t' << v[2]<< '\t'<<endl;                  
    }
    data.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:40:27.543

不能保证 'v' 包含三个或更多元素。在调用 split_at_commas 之后和在调试器中打印之前检查 'v' 的内容，以验证 v 是否包含 3 个或更多项目。

# objective-c - 可以使用为自动合成属性创建的实例变量吗？

> ID：13492368
> 
> 赞同：4
> 
> 时间：2012-11-21T11:31:27.963
> 
> 标签：objective-c, properties

目前我可以写一个这样的类：

```
@interface Foo
@property(assign) float bar;
@end

@implementation Foo

- (void) someMethod
{
    _bar = 4;
}

@end 
```

我可以省略`@synthesize`样板列表很方便，如果我能习惯下划线表示法，我会得到一个很好的可读规则，即所有命名`_foo`都是实例变量。像这样使用自动生成的实例变量可以吗？我的意思是，也许他们甚至对班级作者来说应该是不可见的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:37:02.763

是的，使用这些变量是绝对可以的。

完全放弃`@synthesize`要求是一种方便：`@synthesize xyz`现在隐式插入 - 这是唯一的区别。编译器的设计者推断，由于他们可以明确识别您想要合成访问器的情况与您提供自定义实现时的情况，因此停止要求您提供显式的`@synthesize`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:46:36.343

> 可以使用为自动合成属性创建的实例变量吗？

绝对地

> 我可以省略@synthesize 样板列表很方便，如果我能习惯下划线表示法，我会得到一个很好的可读规则，即所有名为 _foo 的东西都是一个实例变量。

当然，您也可以使用 指定名称`@synthesize foo = f00;`。

> 像这样使用自动生成的实例变量可以吗？我的意思是，他们不应该对班级作者不可见吗？

没有。*它们必须*是内部可访问的。如果您使用 ARC，那么这种情况不太常见，但您直接访问它们的常见情况是初始化和销毁​​（不应该使用访问器方法的情况）。

# python - 在 Ubuntu 上通过 pyODBC 连接到 Microsoft SQL Server

> ID：13492369
> 
> 赞同：8
> 
> 时间：2012-11-21T11:31:27.300
> 
> 标签：python, sql-server, linux, ubuntu, pyodbc

`pyODBC`从机器内连接到 Microsoft SQL Server 实例时遇到问题`Ubuntu (12.10)`。

我回来的错误是：

```
pyodbc.Error: ('IM002', '[IM002] [unixODBC][Driver Manager]Data Source name not found, and no default driver specified (0) (SQLDriverConnect)') 
```

用于 pyodbc 的连接字符串是：

```
self.corpus_cnxn = pyodbc.connect('DRIVER={FreeTDS};SERVER=UKEDN-06880;DATABASE=db1;UID=user;PWD=pass') 
```

这似乎在 Windows 中的 pyODBC 上运行良好（只需将驱动程序更改为“SQL Server”而不是“FreeTDS”），当我尝试使用终端中的**tsql** [工具](http://linux.die.net/man/1/tsql)从 Ubuntu 机器连接时，它运行良好，使用以下命令：

```
tsql -S UKEDN-06880 -p 1433 -U user -P pass 
```

我可以毫无问题地选择任何表，它似乎在 pyODBC 中不起作用。

任何帮助或建议将不胜感激，我的 Linux 技能非常薄弱并且完全被卡住了，尽管因为它可以从 tsql 工作，我感觉非常接近！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T21:39:03.940

看起来你已经让 freeTDS 正常工作，因为你可以使用 tsql。您是否尝试过连接 isql？

看看这个[howto](http://tryolabs.com/Blog/2012/06/25/connecting-sql-server-database-python-under-ubuntu/)进行详细的演练。我认为您需要的部分是在页面下方设置 unixodbc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T12:32:19.290

第一个阶段 $ sudo apt-get install libmdbodbc1

像这样编辑文件 /etc/odbcinst.ini

```
[Microsoft Access Driver (*.mdb)]
Description = Microsoft Access Driver (*.mdb)
Driver      = /path/to/file/libmdbodbc.so
Setup       = /path/to/file/libtdsS.so
CPTimeout   = 
CPReuse     = 
```

和文件 /etc/odbc.ini

```
[Microsoft Access Driver (*.mdb)]
Description         = SQL Server
Driver              = Microsoft Access Driver (*.mdb)
Trace               = No
TraceFile           = /tmp/mssodbc.log 
```

# java - 想要访问选择查询的单元格的值

> ID：13492370
> 
> 赞同：0
> 
> 时间：2012-11-21T11:31:31.350
> 
> 标签：java, jdbc, resultset

在我的应用程序中，我将颜色存储在我的表中`emp`，如下所示：

```
+---------+------------------+
| emp     |  id      | color |
+---------+------------------+
| hary    | 123      |  red  |
+---------+------------------+
| lary    | 125      | green |
+---------+------------------+
| gary    | 038      |  red  |
+---------+------------------+
| Kris    | 912      | blue  |
+---------+------------------+
| hary    | 123      |  red  |
+---------+------------------+
| Ronn    | 334      | green |
+---------+------------------+ 
```

现在为了计算颜色代码出现的次数，我写了这个：

```
select color,count(*) Count
from emp where (color like '%bl%' or color like '%ree%')
group by color 
```

所以我得到这样的结果

```
+---------------
| color |Count |
+---------------
|   red |   3  | 
+---------------
|  blue |   1  | 
+---------------
| green |   2  | 
+--------------- 
```

现在我想访问每个颜色代码的计数，即单元格值，那么我必须如何根据 java(jdbc) 来处理它。我已经在 jsp 页面中写了这个：

```
<html
<body>
<div>
<table>
<% while(rs.next()){ %>

    <tr>
      <th>HDYK Stat</th><th>NUMBER</th>
     </tr>

    <tr style="color: #0DA068">
      <td><%=rs.getString("color") %></td><td><%= rs.getInt("Count")%></td>
    </tr>

    <tr style="color: #194E9C">
      <td><%=rs.getString("color") %></td><td><%= rs.getInt("Count")%></td>
    </tr>
   <tr style="color: #ED9C13">
   <td><%=rs.getString("color") %></td><td><%= rs.getInt("Count")%></td>
   </tr>

<%      
} 
%>
</table>
</div>
</body>
</html> 
```

但它重复了 3 次：如红色：3，蓝色：3，绿色：1，红色：1，蓝色：1，绿色：1，红色：2... 任何有关这方面的输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:36:39.683

您需要遍历结果集并提取每个列的值。

```
public static void viewTable(Connection con)
    throws SQLException {

    Statement stmt = null;
    String query =
        "select color,count(*) Count from emp where (color like '%bl%' or color like'%ree%') group by color";

    try {
        stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery(query);
        while (rs.next()) {
            String color = rs.getString("color");
            int count = rs.getInt("Count");
            System.out.println("Color: " + color + " Count: " + count);
        }
    } catch (SQLException e ) {
        //Something
    } finally {
        if (stmt != null) { stmt.close(); }
    }
} 
```

虽然，我不建议通过 JSP 访问您的结果集，但可以按如下方式完成：

**首先遍历所有行并设置它们的`class`属性。**

```
<% while(rs.next()){ %>

    <tr>
      <th>HDYK Stat</th><th>NUMBER</th>
     </tr>

    <tr class="<%=rs.getString("color") %>">
      <td><%=rs.getString("color") %></td><td><%= rs.getInt("Count")%></td>
    </tr>
<%      
} 
%> 
```

**为 CSS 中的每种颜色定义样式**

```
.red{
  color: #0DA068;
}

.blue{
  color:#194E9C;
}

.green{
  color: #ED9C13;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:33:43.457

实际上就像您想要的那样`emp`，`id`或者`color`-您只需按名称查找列`Count`。也就是说，您`ResultSet`的大小为 3，每行将有两列：`color`和`Count`.

我假设您已经知道如何在 Java 中使用 JDBC？

干杯，

# c# - 将日期插入数据库的 FormatException

> ID：13492374
> 
> 赞同：2
> 
> 时间：2012-11-21T11:31:54.233
> 
> 标签：c#

每当我尝试在数据库中插入日期时，我都会收到 formatException。

我将日期转换为字符串并尝试插入数据库。我已经尝试了所有方法，但它被视为例外。找到下面的代码：

```
$ DateTime date =  Convert.ToDateTime(rows["Limit_maturity_date"].ToString());
string newdate = date.ToShortDateString();//.Replace("/","");
DateTime dd = DateTime.ParseExact(newdate, "M/d/yyyy", CultureInfo.InvariantCulture);
queryString = "INSERT INTO Table (CODE, NUM, CCODE, LCODE, SACCODE, LIM, L_DATE)" +
                    " VALUES ('" + int.Parse(rows["code"].ToString()) + "','" + int.Parse(rows["number"].ToString()) + "','" + int.Parse(rows["Ccode"].ToString()) + "','" + int.Parse(rows["Lcode"].ToString()) + "','" + int.Parse(rows["Sacode"].ToString()) + "','" + int.Parse(rows["limit"].ToString()) + "','" + newdate "')"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:38:10.150

从根本上说，您正在解决将数据错误地插入数据库的问题。

您将所有内容都转换为字符串，并将这些字符串包含在 SQL 中。**不要那样做。**请改用参数化 SQL，只需将值直接放入参数中，而无需先转换为字符串。这解决了三个问题：

*   [SQL注入攻击](http://bobby-tables.com)
*   混合代码 (SQL) 和数据（参数值）
*   有问题的字符串转换

看起来您正在进行*很多*字符串转换，我怀疑它们中的*任何*一个都不需要。每当您想将值转换为字符串时，问问自己是否真的必须这样做。每当您编写将值转换为字符串然后转换为另一种类型的代码时，如下所示：

```
int.Parse(rows["code"].ToString()) 
```

......你应该*真的很*怀疑。的执行时间类型是`rows["code"]`什么？你可以只使用演员表吗？

# asp.net - 使用 post 方法将参数从一页传递到另一页

> ID：13492382
> 
> 赞同：0
> 
> 时间：2012-11-21T11:32:31.853
> 
> 标签：asp.net

我有一个页面“Demo.aspx”。我需要使用 post 方法设置一些参数并将页面重定向到“DemoTest.aspx”。

有没有办法在asp.net的post方法中设置参数？由于安全建议，我不想设置“Querystring”。

我也需要服务器端代码。我不能同样使用“Javascript”或“Jquery”。这是相同的更多描述。

现在我正在使用 Response.Redirect("www.ABC.Com/DemoTest.aspx?P1=2")。所以页面只是重定向到给定的 URL。

现在我不想在“Querystring”中传递那个“P1”。我想使用 Post 方法而不是查询字符串。

请注意，重定向页面不在我自己的应用程序中。所以我无法维护会话或“视图状态”。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:33:57.390

使用`session`变量并`response.redirect`转到下一页。

```
Session["MyVariable"] = "someThing";

Response.Redirect("DemoTest.aspx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:38:57.323

存储在 Session 变量中的值将可以跨应用程序访问。您可以像这样存储在会话中：

```
Session["id"] = "anyID"; 
```

要获取值在另一个页面上，您需要编写

```
string id = Convert.ToString(Session["Id"]); 
```

但是默认情况下，在 .NET 页面中 post() 会自动执行这些操作。你需要做这样的事情：

```
Server.Transfer("DemoTest.aspx", True) 
```

# python - python：进入嵌入式文档

> ID：13492384
> 
> 赞同：1
> 
> 时间：2012-11-21T11:32:39.053
> 
> 标签：python, mongodb, integer

我在它的类型文档中有一个数据库“记录”：

```
{ ..., ..., "grades" : {"good": "40.0", "bad":"22.0"}} 
```

1.  我需要进入文档并将变量定义为“好”和“坏”成绩的总和。
2.  我不知道如何进入嵌入式文档，

我试过 ：

```
for i in records:
    variable = i['grade.good'] 
```

但这似乎不起作用。

其次，成绩是字符串，我需要将它们转换为整数/再次尝试

```
total = int(i['grade.good']) + int(i['grade.bad']) 
```

但那也错了。请注意，我的字符串是浮点数帮助非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:38:54.267

而不是`i['grade.good']`尝试`i['grade']['good']`

正确地从字典中检索数据

```
In [11]: d = {"grades" : {"good": "40", "bad":"22"}}

In [12]: d['grades']['good']
Out[12]: '40'

In [13]: total= int(d['grades']['good']) + int(d['grades']['bad'])

In [14]: total
Out[14]: 62 
```

对于浮点数

```
In [21]: d = {"grades" : {"good": "40.0", "bad":"22.0"}}

In [22]: print float(d['grades']['good']) + float(d['grades']['bad'])
62.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:38:24.377

最优雅的解决方案是：

```
good_grades=[grades['good'] for grades in records] 
```

这将返回一个包含所有好成绩的数组，对坏的做同样的事情。

或者，您可以简单地更改此行：

```
variable = i['grade']['good'] 
```

# javascript - 如何将内联 Javascript 从 HTML 移动到 .js 文件

> ID：13492387
> 
> 赞同：0
> 
> 时间：2012-11-21T11:33:01.110
> 
> 标签：javascript, javascript-events

我正在使用 HTML5 画布和 JavaScript 创建一个基于 Web 的基本游戏。虽然我之前对 HTML5 画布做过一些工作，但它并没有太广泛，因此不需要太多的 JavaScript——这意味着我在我的 .html 文件的脚本标签中编写了 JavaScript。

有了我目前正在处理的文件，我现在需要将 JavaScript 与 HTML 分开，因为当我在浏览器中查看页面并单击画布上的“开始”按钮时，尽管它确实执行了它应该执行的功能，但它需要很长时间才能完成......我假设是因为我的 .html 文件的大小（其中大部分是 JavaScript）。

我已将所有 JavaScript 移动到单独的文件中，每个文件中只有一两个函数，但我不确定如何在我的 HTML 页面中使用这些函数？

我的 HTML 文件目前如下所示：

```
<!DOCTYPE html>
<html>
<head>
<title>Home</title>

<section hidden>
<img id="StartButton" src="StartButton.png" alt="Start Button" width="179" height="180" href="javascript:drawLevelOneElements();"/>
</section>

<script src = "drawLevelOneElements.js" type = "text/javascript"></script>
<script src = "layers&analytics.js" type = "text/javascript"></script>
<script src = "startGameDrawGameElementsDrawStartButton.js" type = "text/javascript"></script>
<script src = "variables&preloadingImages.js" type = "text/javascript"></script>

</head>

<body onLoad="startGame()">
    <h1>Home</h1>
    <p1>The purpose of this website is to teach users the basic principles of running a business by playing the game below. <br /><br /></p1>
    <p2>

    <canvas id="gameCanvas" width="1000" height="500" style="border:1px solid">
    Your browser does not support the canvas element.
    </canvas>

    <br /><br /></p2>
    <p3>Use this paragraph to enter text that provides the user with instructions for how to play the game. <br />
        Update the instructions so that they're appropriate to whatever level the user is currently playing.</p3>
</body> 
```

脚本 src 行引用了我想使用的 JS 文件，但是当我在浏览器中查看页面时，我只是得到一个空白画布。有人可以向我指出我在这里做错了什么吗？我不确定在将 JS 写入单独的文件时如何将其“附加”到 HTML。

干杯!

**编辑 21/11/2012 12:00**

进行了建议的更改后，我尝试再次在 Firefox 中查看该页面，并在 Firebug 控制台中，当页面加载时，它说我的一个 JS 文件中有一个“未终止的正则表达式文字。它抱怨的文件包含此 JS 代码：

```
 /* Create a canvas layer to display text */
    function displayText(textLayer, message){
        var textLayerContext = textLayer.getContext();
        textLayer.clear();
        textLayerContext.font = "18pt Calibri";
        textLayerContext.fillStyle = "black";
        textLayerContext.fillText(message, 10, 10);
    }

    /* Create a canvas layer to display the button */
    window.onload = function(){
        var stage = new Kinetic.Stage({
            container: "container",
            width: 179,
            height: 180
        });
        var buttonLayer = new Kinetic.Layer();
        var textLayer = new Kinetic.Layer();
    }
</script>

<script type="text/javascript">
/*Google analytics code for tracking website. */
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-31216545-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })(); 
```

它抱怨的那条线是`</script>`

它现在可以工作了，但是在单击开始按钮后加载图像所需的时间方面，进行此更改似乎并没有提高性能......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:36:17.377

你按原样做对了，可能是你的脚本太大了，需要一段时间才能渲染。浏览器从上到下解释 HTML，当它遇到一个 javascript 文件时，它开始渲染它。

在您的情况下，我会尝试将 javascript 文件移动到您的页面底部，然后再试一次。此外，您必须确保以正确的顺序加载脚本文件。

此外，当想要使用 javascript 无效时，您应该将 body 放置`<section></section>`在 body 内部而不是 the 中`<head>`，并且`<p>`应该在图像上有一个`id="#n"`和最后但并非最不重要的 a ，请改用该属性:)`href``onClick`

[在此处](http://validator.w3.org/check)使用 W3C 验证器服务来验证您的 HTML。

然后使用你想要你“简单”的函数把它们放在你的`onLoad()`或者如果你热衷于使用 jQuery 你可以做

`$(document).ready(function(){ //perform your functions as normal here });`

您是否尝试过在 Firebug 中调试您的应用程序？

# python - Django Web 应用程序中的服务器错误

> ID：13492408
> 
> 赞同：0
> 
> 时间：2012-11-21T11:34:21.320
> 
> 标签：python, django

我正在按照本教程解决缓存问题，因为我使用的是谷歌分析。尝试代码后，我得到了

```
A server error occurred.  Please contact the administrator. 
```

中间件.py

```
from django.middleware.cache import UpdateCacheMiddleware

import re

class SmartUpdateCacheMiddleware(UpdateCacheMiddleware):
      STRIP_RE=re.compile(r'\b(_[^=]+=.+?(?:; |$))' )

      def process_request(self,request):
          cookie=self.STRIP_RE.sub(",request.META.get('HTTP_COOKIE',")) #error
          request.META['HTTP_COOKIE']=cookie 
```

在我的 cmd 终端中，我收到此错误

```
 File "C:\Python27\Scripts\env\Scripts\meek\meek\middleware.py", line 9
  cookie=self.STRIP_RE.sub(",request.META.get('HTTP_COOKIE',")) 
```

我尝试修复它，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:38:21.617

你似乎有一个错字剪切和粘贴。它应该是：

```
cookie = self.STRIP_RE.sub('', request.META.get('HTTP_COOKIE', '')) 
```

您将双单引号折叠成一个双引号：

```
cookie=self.STRIP_RE.sub(",request.META.get('HTTP_COOKIE',"))
                         ^                                ^ 
```

# java - Hibernate 无法初始化代理 - 没有会话

> ID：13492410
> 
> 赞同：15
> 
> 时间：2012-11-21T11:34:28.183
> 
> 标签：java, hibernate, persistence, lazy-evaluation, lazy-initialization

我的代码检索与用户相关的所有信息：

```
SessionFactory sessionFactory = HibernateUtilities.configureSessionFactory();
Session session = sessionFactory.openSession();
UserDetails ud = null;
Set<Address> userAddress = null;

try {
    session.beginTransaction();
    ud = (UserDetails) session.get(UserDetails.class, 1);
    userAddress = ud.getAddresses();
    session.getTransaction().commit();
} catch (HibernateException e) {
    e.printStackTrace();
    session.getTransaction().rollback();
} finally {
    session.close();
}

System.out.println(ud.getName());

for(Address addr: userAddress){
    System.out.println("State " + addr.getState());
} 
```

简单地返回用户的`ud.getAddresses()`一组`Address`es。

我的问题是：为什么`ud`即使会话已经关闭，对象仍然具有它的值（例如，名称）？`getAddresses()`是`UserDetails`类的实例变量。但是为什么我不能检索它的值，但我可以检索`UserDetails`该类的常规实例变量？

`ud.getAddresses()`是一个`@EmbeddedCollection`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-08-03T02:09:06.573

我在 JPA/Hibernate 中遇到了同样的问题，有两种方法可以解决这个问题：

1/默认关闭LAZY，如下：

```
@Entity
@Proxy(lazy = false)
public class Project {
...
} 
```

当然，由于性能问题，不推荐这种方式，可以采用第二种方式。

2/你可以把@Transactional放在你方法的开头，它可以帮助你保持会话，或者另一种理解，它将会话的职责传递给Hibernate，如下：

```
@Test
@Transactional
public void testSaveGroup() {
    Department g = new Department();
    g.setName("XDG");
    assertNull(g.getId());
    this.groupRepo.save(g);
    assertNotNull(g.getId());
    System.out.println(g.getId());
    Project dummyPrj = new Project(123L, "KSTA", new Date(), "NEW", "Helm AG", g);
    this.projectRepo.save(dummyPrj);
    // verify
    List<Department> lst = this.groupRepo.findAll();
    Project savedPrj = this.projectRepo.getOne(123L);
    Assert.assertEquals("XDG", savedPrj.getGroup().getName());
} 
```

我的回答迟了，但希望能帮助别人:)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-21T11:45:24.787

```
userAddress = ud.getAddresses();
session.getTransaction().commit();
for(Address addr: userAddress) { 
```

[使用惰性关联](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching-lazy)的休眠文档清楚地将这种访问称为错误。只有在会话仍处于打开状态时，您才能与延迟关联的对象进行交互。文档的该部分还提供了访问对象的此类惰性关联成员的替代方法，我们更喜欢在我们的应用程序中使用的标准中将获取模式指定为 JOIN。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T11:59:15.393

类的所有原始属性都会立即加载，除非您使用字节码增强功能，否则它们不能偷懒。只有像你的收藏这样真正的关联才能变得懒惰。

# mysql - Mysql Select with LIKE 子句不工作汉字

> ID：13492411
> 
> 赞同：10
> 
> 时间：2012-11-21T11:34:50.910
> 
> 标签：mysql, select

我将数据存储在英文和中文的单列中。

数据由分隔符分隔，例如中文

```
<!--:zh-->日本<!--:--> 
```

英语

```
<!--:en-->English Characters<!--:--> 
```

我会根据用户选择的语言显示内容。

我做了这样的查询

```
SELECT * FROM table WHERE content LIKE '<!--:zh-->%<!--:-->' 
```

上面的查询有效，但返回空结果集。

`Collation`列`content`是`utf8_general_ci`

我也尝试过使用如下`convert`功能

```
SELECT * FROM table WHERE CONVERT(content USING utf8) 
                           LIKE CONVERT('<!--:zh-->%<!--:-->' USING utf8) 
```

但这也行不通。

我也尝试运行查询`SET NAMES UTF8`，但仍然无法正常工作。

`PhpMyAdmin`如果它确实重要，我正在运行查询。

* * *

qTranslate 没有更改 WordPress 使用的数据库。翻译数据存储在原始字段中。因此，每个字段都包含该特殊字段的所有翻译，数据如下

```
<!--:en-->English Characters<!--:--><!--:zh-->日本<!--:--> 
```

[http://wpml.org/documentation/related-projects/qtranslate-importer/](http://wpml.org/documentation/related-projects/qtranslate-importer/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:21:07.560

内容的测试表数据

```
<!--:zh-->日本<!--:--><!--:en-->English Characters<!--:-->
<!--:en-->English Characters<!--:--><!--:zh-->日本<!--:-->
<!--:zh-->日本<!--:-->
<!--:en-->English Characters<!--:--> 
```

其次是

> 我将数据存储在英文和中文的**单列中**

你的选择应该是这样的

```
SELECT * FROM tab
WHERE content LIKE '%<!--:zh-->%<!--:-->%' 
```

[SQL Fiddle DEMO](http://sqlfiddle.com/#!2/caf58/17/1)（还附有演示如何从内容中获取特殊语言部分）

```
SET @PRE = '<!--:zh-->', @SUF = '<!--:-->';

SELECT
  content,
  SUBSTR( 
    content, 
    LOCATE( @PRE, content ) + LENGTH( @PRE ), 
    LOCATE( @SUF, content, LOCATE( @PRE, content ) ) - LOCATE( @PRE, content ) - LENGTH( @PRE ) 
  ) langcontent
FROM tab
WHERE content LIKE CONCAT( '%', @PRE, '%', @SUF, '%' ); 
```

如[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html#operator_like)中所述，并遵循以下示例

```
SELECT 'David!' LIKE '%D%v%'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:39:52.317

正如其他人所指出的那样，您的查询似乎很好，所以我会寻找其他地方。这是你可以尝试的：

我不确定中文输入，但是对于日语，许多符号有全角和半角变体，例如：“hello”和“helllo”看起来相似，但它们的字符的代码点不同，因此获胜'不比较平等。在全角输入错误非常容易，而且很难检测到，*尤其是*对于空格。比较“”和“”。

您可能以半角存储数据并以全角查询它。即使一个字符不同（尤其是空格很难检测），查询也不会找到您想要的数据。

有很多方法可以检测到这一点，例如尝试将数据和查询逐字复制到文本文件中，并使用十六进制编辑器查看它们。如果相关部分有一点差异，您可能正在处理这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T07:33:17.470

由于您存储数据的方式，搜索失败。您正在使用 utf8_general_ci 排序规则，该排序规则专为快速搜索*某些*欧洲语言而设计。其中一些甚至不是那么完美。人们倾向于使用它只是因为它速度快，而且他们不在乎某些搜索不准确，比如斯堪的纳维亚语言。将此更改为 big5_chinese_ci 或其他一些经过中文调整的排序规则。

UPD。另一件事。我明白了，您在数据库记录中使用了一种标记。

```
<!--:zh-->日本<!--:-->
<!--:en-->English Characters<!--:--> 
```

因此，如果您要搜索中文，则可以使用

```
SELECT * FROM table WHERE content LIKE '<!--:zh-->%' 
```

代替

```
SELECT * FROM table WHERE content LIKE '<!--:zh-->%<!--:-->' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T07:00:44.240

假设您使用的是 MySQL，您可以在 LIKE 中使用通配符：

*   % 匹配任意数量的字符，包括零个字符。
*   _ 只匹配一个字符

下面是一个搜索`content`表列中包含字符 日 的值的示例：

```
SELECT * FROM table WHERE `content` LIKE '%日%' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T07:27:30.857

我试图重现这个问题。查询没问题，我得到了结果，即使使用`SET NAMES latin1`.

检查字段的内容，可能有开头/结尾的空格，先删除它们，或者试试这个查询 -

```
SELECT * FROM table
WHERE TRIM(content) LIKE '<!--:zh-->%<!--:-->' 
```

* * *

您的字符串示例 -

```
CREATE TABLE table1(
  column1 VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci
);

INSERT INTO table1 VALUES
  ('<!--:en-->English Characters<!--:--><!--:zh-->日本<!--:-->');

SELECT * FROM table1 WHERE column1 LIKE '%<!--:zh-->%<!--:-->';

=>  <!--:en-->English Characters<!--:--><!--:zh-->日本<!--:--> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T18:53:45.747

请问你用的是什么版本的MySQL？从我看到你的代码看起来不错，这让我觉得你没有运行最新版本的 MySQL。

# algorithm - 解决：某个时间有多少家商店开门？

> ID：13492417
> 
> 赞同：-1
> 
> 时间：2012-11-21T11:35:55.293
> 
> 标签：algorithm, scheduling

我在一次采访中被提出了这个问题，但从未真正想出一个很好的解决方案。有人有“最佳”解决方案吗？目标是效率并能够处理大量输入。

**提供材料：**

我得到了一长串商店及其开/关时间（比如 1000）。

**问题：**

在一天中的给定时间，返回有多少家商店营业

**示例数据：**

```
Sainsburys 10:00 23:00
Asda 02:00 18:00
Walmart 17:00 22:00 
```

**示例输入/输出**

```
Input | Output
12:00 | 2
22:00 | 1 (walmart shut @ 22:00)
17:30 | 3 
```

问题的两个部分是如何存储数据以及如何有效地获得答案，我猜你如何读取输入等并不重要。

感谢您的时间和洞察力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:48:46.557

让我们试一试：

```
//First, we turn the time input into an int and then compare it to the open and
//closing time ints to determine if the shop is open. We'l use 10:00 in this example.
//get magic time int
int magicTimeInt = CInt("10:00".Replace(":",""));
int openstorecount = 0;
foreach(var shoptime in ShopTimesList)//SHopTImesList is the list of shop names and times
{
    string[] theShop = shoptime.Split(" ");
    if( CInt(theshop[1].ToString().Replace(":", "")) < magicTimeInt 
    && 
    CInt(theshop[2].ToString().Replace(":", "")) > magicTimeInt)
    {
        openstorecount++;
    }
}
Console.WriteLine("10:00 | " + openstorecount.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:20:48.877

I would do it Java:

```
class Shop {
    String name;
    Time opening, closing;

    Shop(String name; Time opening, Time closing){
        this.name = name;
        this.opening = opening;
        this.closing = closing;
    }

    public boolean isOpen(Time time){
        return opening.before(time) && closing.after(time)
    }
} 
```

Add code to trim date information from the time values, and just make a collection of all the stores, iterate through, and incerment your count for each open one.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:54:33.830

我会使用一个数据库：

```
TABLE shops (
 name VARCHAR,
 open TIME,
 close TIME
)

SELECT count(*) AS number_of_shops FROM shops WHERE [input_time] BETWEEN open AND close 
```

为了防止查询计算沃尔玛（在您的示例中），您可以添加一秒来打开并从关闭中减去一秒（或者几分钟让任何人有机会购买东西）。

# c++ - 将 char 数组添加到 LoadLibrary

> ID：13492419
> 
> 赞同：1
> 
> 时间：2012-11-21T11:35:59.297
> 
> 标签：c++, winapi, dll

我需要使用静态库加载 dll 我知道如何加载 dll 但我无法锻炼如何将我的字符数组添加到加载库。我曾尝试使用 for 循环，但它不会在加载库括号内运行。我不能使用字符串，因为它违反了我给出的规范。

```
int PlayARound(int &score, int &numAsked, char roundName[])
{
    HINSTANCE hinstLib;
    getQuesPnt ProcAdd;
    BOOL fFreeResult, fRunTimeLinkSuccess = FALSE;

    hinstLib = LoadLibrary();
} 
```

我应该说这是家庭作业，所以我不是在寻找一个完整的解决方案，只是为了指向正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:58:33.417

正如在评论中发现的那样，您只需将数组转换为`LPCTSTR`

```
hinstLib = LoadLibrary((LPCTSTR)roundName); 
```

但是，正确的方法是更改​​声明

```
int PlayARound(int &score, int &numAsked, LPCTSTR roundName); 
```

然后使用`TEXT`宏使您的程序具有 unicode 意识

```
PlayARound(score, numAsked, TEXT("demo.dll")); 
```

# database - 多值字段的 JOIN 子句

> ID：13492431
> 
> 赞同：1
> 
> 时间：2012-11-21T11:36:30.747
> 
> 标签：database, ms-access, join, ms-access-2010, multivalue

在我的 MS Access 应用程序中，我需要提取一个字段（它是多值的）并在表单的文本框中显示其内容。

我已经确定对于多值字段有两件事：tableName.[FieldName]（具有多值属性的字段）和 tableName.[fieldName].Value（单值字段）。

我的疑问是：

1.  为什么同一个字段有两种不同的表示？

2.  为什么我们不能在多值字段上使用 JOIN 子句？

3.  有没有办法在多值字段上使用 JOIN 子句？

# magento - 如何在 magento Admin 中的产品列表上添加类别过滤？

> ID：13492433
> 
> 赞同：0
> 
> 时间：2012-11-21T11:36:41.137
> 
> 标签：magento, filter, filtering

我正在开发 Magento 1.5。我的商店中有两个主要类别，比如说产品和实用程序。

```
Products
   - Product 1
   - Product 2
Utilities
   - Utility 1
   - Utility 2 
```

我需要添加一个下拉列表，允许我使用产品列表表上的这两个类别进行过滤，就像产品类型下拉列表允许我使用产品类型进行过滤一样。

我想在管理面板中实现。有人有什么主意吗？请帮忙...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T12:25:48.697

您可以在模板中添加一个下拉列表，并将 onChange 事件绑定到 changed `window.location.href`。可以像在分层导航中一样生成目标 URL（在产品列表的左侧，您可以单击类别）。

示例网址：`/furniture.html?cat=22`

# android - Android：点击时无法切换到新活动

> ID：13492434
> 
> 赞同：0
> 
> 时间：2012-11-21T11:36:42.960
> 
> 标签：android, android-intent

我有一个带有两个按钮的主页。Button1 加载 Activity2.class（显示地图）和 Button2 加载 Login.class（显示登录表单）。

Button1 正在工作，但 Button2 在单击时不执行任何操作。我只是看不出区别，我对两个按钮使用完全相同的代码结构。也许我错过了不同文件中的某些内容？

这个android的东西对我来说是全新的，希望有人能帮忙！

这是我的代码（没有错误）

主要活动。

```
public class AppActivity extends Activity {

Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    addListenerOnButton();
}

public void addListenerOnButton() {

    final Context context = this;

    button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(context, App2Activity.class);
            startActivity(intent);   

        }

    });

}

public void addListenerOnButton2() {

    final Context context = this;

    button = (Button) findViewById(R.id.button2);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(context, Login.class);
            startActivity(intent);   

        }

    });

}
} 
```

这是我想要访问的登录活动

```
public class Login extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setting default screen to login.xml
        setContentView(R.layout.login);

    }
} 
```

登录.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:fillViewport="true">
  <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:background="#ffffff">

    <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:padding="10dip">

      <!--  Email Label -->
      <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#372c24"
            android:text="Student Number"/>
      <EditText android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:layout_marginBottom="20dip"
            android:singleLine="true"/>
      <!--  Password Label -->
      <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#372c24"
            android:text="Password"/>
      <EditText android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:singleLine="true"
            android:password="true"/>
      <!-- Login button -->
      <Button android:id="@+id/btnLogin"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:text="Login"/>
    <!-- Login Form Ends -->
    </LinearLayout>

  </RelativeLayout>
</ScrollView> 
```

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mkyong.android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".AppActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:label="@string/app_name"
        android:name=".App2Activity" >
    </activity>
    <activity
        android:label="@string/app_name"
        android:name=".Login" >           
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:38:28.713

你不打电话`addListenerOnButton2();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:39:38.510

在 AppActivity 类的 createMethod 上添加`addListenerOnButton2(`）就像你添加 `addListenerOnButton()`；

```
public class AppActivity extends Activity
{

Button button;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    addListenerOnButton();
    addListenerOnButton2();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:39:47.057

缺少方法调用 addListenerOnButton2()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:40:22.283

将您的代码块更改为以下内容

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
addListenerOnButton();
addListenerOnButton2();// you are not calling this method in your code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T11:40:28.100

您永远不会在 onCreate() （或您发布的代码中的其他任何地方）中调用 addListenerOnButton2() 方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T06:18:14.607

试试下面的代码。

```
 public class AppActivity extends Activity {

    Button button,button1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                button = (Button) findViewById(R.id.button1);
            button1 = (Button) findViewById(R.id.button2);

            button.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {

                    Intent intent = new Intent(AppActivity.this, App2Activity.class);
                    startActivity(intent);   

                }

            });

            button1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {

                    Intent intent = new Intent(AppActivity.this, Login.class);
                    startActivity(intent);   

                }

            });
 } 
```

# google-maps-api-3 - markermanager 停止工作 - 没有错误

> ID：13492441
> 
> 赞同：1
> 
> 时间：2012-11-21T11:37:15.300
> 
> 标签：google-maps-api-3, markermanager

几天前，markermanager 停止使用谷歌地图正常工作。我在控制台视图中没有错误。

它打破了在线：

```
var div = this.getProjection().fromLatLngToDivPixel(latlng) 
```

这是整个方法：

```
ProjectionHelperOverlay.prototype.LatLngToPixel = function (latlng, zoom) {
alert('p1');//displays alert
var map = this._map;//object
alert('p2');//displays alert
alert(latlng);//displays object
var div = this.getProjection().fromLatLngToDivPixel(latlng);
alert('p3');//NO ALERT and NO error in console
var abs = {x: ~~(0.5 + this.LngToX_(latlng.lng()) * (2 << (zoom + 6))), y: ~~(0.5 + this.LatToY_(latlng.lat()) * (2 << (zoom + 6)))};
alert('p4');//never gets to that line
return abs;
}; 
```

之前一切都很好，我没有做任何改变。新的谷歌地图 API 代码会出错吗？我找不到更新版本的markermanager。这个脚本有替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:30:39.797

您使用的是夜间/实验版本 (v3.exp)、v3 还是旧版本？

[版本控制](https://developers.google.com/maps/documentation/javascript/basics#Versioning)

如果是这样，您页面下方的地图 API 版本可能已更改。Google Maps API 团队建议您在生产页面上对版本号进行硬编码，并在使用新版本之前对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T08:08:57.483

我遇到了同样的错误，为加载的事件添加了一个监听器为我做了：

```
 var mgr = new MarkerManager(map)
 google.maps.event.addListener(mgr, 'loaded', function(){
    mgr.addMarkers(markers, 5,6)
  }); 
```

# iphone - 如何自定义 QLPreviewController 的 navBar 和工具栏 tintColor

> ID：13492447
> 
> 赞同：4
> 
> 时间：2012-11-21T11:37:37.403
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, uitoolbar

```
QLPreviewController * preview = [[QLPreviewController alloc] init];
preview.dataSource = self;
preview.currentPreviewItemIndex = sender.tag;
preview.editing= YES; 
[self presentModalViewController:preview animated:YES];
[preview release]; 
```

这两行对我不起作用。所以在写这些行之前要小心。

```
[preview.tabBarController.tabBar setTintColor:[UIColor blackColor]];
[preview navigationController].navigationBar setTintColor: [UIColor blackColor]]; 
```

![问题截图在这里](../Images/ce2143b3eefdabfc8692ae75f3f27c56.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T01:34:46.857

从 iOS5 开始，您可以基于实例、全局或包含在特定容器类中时为控件设置主题。从 iOS6 开始，前一种子类化 QLPreviewController 来设置 UINavigationBar 的 tintColor 的方法停止工作。

考虑以下之一作为与 iOS5 和 iOS6 兼容的解决方法示例：

QLPreviewController 中包含的任何 UINavigationBar：

```
[[UINavigationBar appearanceWhenContainedIn:[QLPreviewController class], nil]
        setTintColor:[UIColor blackColor]]; 
```

或全局设置应用程序中所有 UINavigationBar 实例的 tintColor：

```
 [[UINavigationBar appearance] setTintColor:[UIColor blackColor]]; 
```

同样的策略也适用于 UITabBarController。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:02:07.557

用这条线设置样式`UINavigationController`..

```
self.navigationController.navigationBar.barStyle = UIBarStyleBlack; 
```

`viewWillAppear`并且要更改 TabBar 的颜色，只需在您的类中添加以下代码

```
CGRect frame = CGRectMake(0.0, 0.0, self.view.bounds.size.width, 48);
UIView *v = [[UIView alloc] initWithFrame:frame];
[v setBackgroundColor:[UIColor colorWithRed:0.1 green:0.2 blue:0.6 alpha:0.8]];
[v setAlpha:0.5];
[[self.tabBarController tabBar] insertSubview:v atIndex:0];
[v release]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T12:16:30.760

如果您想更改导航栏的 tintColor，您可以推送您的 QLPreviewController，而不是模态显示它：

```
//i assume that you already have a navigationController
[[self navigationController] pushViewController:previewer animated:YES];
[self.navigationController.navigationBar setTintColor:[UIColor blackColor]]; 
```

对于底部栏，我认为这是 UIToolbar 而不是 UITabBar，可能您无法更改颜色（我不知道），但您肯定不能调用`preview.tabBarController.tabBar`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-12T11:23:01.047

我找到了一个解决方案，虽然它不是正确的方法，但它有效：

制作子类`QLPreviewController`

MyQLPreviewController.h

```
@interface MyQLPreviewController : QLPreviewController

@end 
```

并在该新子类的 .m 中，复制以下代码

```
@implementation MyQLPreviewController

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    UIToolbar *toolbar = [self getToolBarFromView:self.view]; //NOTE: Not the correct apperoach! could not think better solution, as iOS does not allow to access the toolbar properties in QLPreviewController

    toolbar.barTintColor = [UIColor redColor];

}

- (UIToolbar *)getToolBarFromView:(UIView *)view
{
    for (UIView *subView in view.subviews)
    {
        if ([subView isKindOfClass:[UIToolbar class]])
        {
            return (UIToolbar *)subView;
        }
        else
        {
            UIToolbar *toolBar = [self getToolBarFromView:subView];

            if (toolBar)
            {
                return toolBar;
            }
        }
    }
    return nil;
} 
```

# ruby-on-rails - watir-webdriver phantomjs 和 ghostdriver

> ID：13492449
> 
> 赞同：7
> 
> 时间：2012-11-21T11:37:39.783
> 
> 标签：ruby-on-rails, watir-webdriver, phantomjs

我目前有一个使用 rspec 和 watir-webdriver 进行集成测试的 Rails 应用程序。我想在无头浏览器中运行我的集成测试（出于速度目的）。由于我的开发是在 mac 上完成的，所以无头 gem 对我不起作用。我正在寻找 phantomjs 作为解决方案。虽然 phantomjs 与 rspec/capybara（通过 poltergeist）很好地配合，并且有很多关于如何使其工作的示例，但我找不到太多让它与 watir-webdriver 和 ghostdriver 一起工作的方法。

我已经构建了 ghostdriver 需要的“特殊”phantomjs，但在那之后我迷路了。有没有人使用过这个设置（rails/watir-webdriver/ghostdriver）？

我的主要目标是加快我的集成测试。因此，如果有人有比我在这里描述的更好的建议，我很灵活:)

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T12:20:10.130

Watir-WebDriver 现在完全支持它并且易于运行：

**开始在 OSX 上工作的步骤**

*   首先确保您安装了自制软件
*   酿造更新
*   酿造安装 phantomjs
*   运行 irb 并开始使用 GhostDriver！

> ```
> require 'watir-webdriver'
> b = Watir::Browser.new :phantomjs
> b.goto "www.google.com"
> b.url #"http://www.google.com.au/"
> b.title #"Google" 
> ```

请参阅此博客文章的完整详细信息：[http ://watirmelon.com/2013/02/05/watir-webdriver-with-ghostdriver-on-osx-headless-browser-testing/](http://watirmelon.com/2013/02/05/watir-webdriver-with-ghostdriver-on-osx-headless-browser-testing/)

# dart - Rikulo 不是使用 JQuery 构建的吗？

> ID：13492450
> 
> 赞同：-3
> 
> 时间：2012-11-21T11:37:53.957
> 
> 标签：dart, rikulo

我在想，

在定义 Rikulo

> Rikulo 是一个免费的开源 Dart 框架，用于使用 HTML5 创建令人难以置信的跨平台 Web 和原生移动应用程序。

但是为什么 web 是由 JQuery 而不是自己构建的呢？

Rikulo 是不是太年轻了，所以它是用 JQuery 构建的？

顺便说一句，“编译器” Dart Editor 使用大量 RAM ~500M 它花费了很多！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:17:07.047

Rikulo 是用 Dart 编写的，而不是 JS，所以这里不适用 jQuery。IMO，Dart 的 API 很好地涵盖了 jQuery 提供的功能，尽管 Dart 还很年轻，还不如 jQuery 稳定。

# playframework - 在模型中通过验证

> ID：13492454
> 
> 赞同：0
> 
> 时间：2012-11-21T11:38:03.037
> 
> 标签：playframework, playframework-1.x

我在某些字段上有一个带有注释的模型，但在某些情况下，当我使用下面的命令时，我想通过此验证。

```
"validation.valid(object);". 
```

我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:03:50.270

您必须`@Required`从类中删除注释并在其他地方验证字段，例如在您的控制器方法中，如下所示：

```
public class MyController extends Controller {

public static void method(
        @Required value) {
          ....
    }
} 
```

# facebook-graph-api - {expires_at: 0} 是什么意思是 debug_token 响应？

> ID：13492455
> 
> 赞同：7
> 
> 时间：2012-11-21T11:38:03.907
> 
> 标签：facebook-graph-api

这是对我尝试验证用户的`access_token`.

```
{
    "data": {
        "app_id": 409277239141609,
        "is_valid": true,
        "application": "Les \u00e2mes vagabondes",
        "user_id": 100003752867359,
        "issued_at": 1353410808,
        "expires_at": 0,
        "scopes": ["create_note", "email", "manage_pages", "photo_upload", "publish_actions", "publish_stream", "share_item", "status_update", "user_birthday", "user_interests", "user_likes", "user_photos", "video_upload"]
    }
} 
```

它说这`access_token`是有效的，但没有给出`expires_at`时间戳。那我怎么得到`expires_at`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-11T11:58:48.587

派对迟到了.. 但我想这意味着`access_token`它不会过期（例如，你是 Facebook 应用程序的开发者）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-13T11:29:21.823

这意味着您拥有的访问令牌由于密码更改等原因无法再使用，因此您应该获得一个新的访问令牌。

# windows - 我如何在 windows phone 中的 dataTemplate 中获得控件？

> ID：13492463
> 
> 赞同：0
> 
> 时间：2012-11-21T11:38:30.490
> 
> 标签：windows, windows-phone-7, listboxitem

我想改变每个 listboxitem 增加的边框的颜色 os 背景。

```
 <ListBox.ItemTemplate>
            <DataTemplate>
                <border x:name: border>
                   <ListBoxItem ItemSource={Binding Example}>
                   </ListBoxItem>
                </border> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:23:03.527

首先查看[此链接](http://compiledexperience.com/blog/posts/useful-calue-converters)，了解如何使用转换器。

然后在你的 XAML 中，像这样写你的边框

```
<Border BorderBrush="{Binding Converter=ColorConverter}">
 ....
<Border> 
```

将您的转换器代码修改为这样的

```
public class ColorConverter : IValueConverter
{
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    //Define some random colors
    Color[] colors = { Colors.Blue, Colors.Brown, Colors.Cyan, Colors.Green, Colors.Magenta, Colors.Orange, Colors.Purple, Colors.Yellow, Colors.LightGray };

    return colors[(new Random()).Next(8)];
}

public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{

}
} 
```

因此，此代码动态返回其中一种颜色。并且有机会连续获得相同的颜色。顺便说一句，我没有测试上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:52:19.033

“IValueConverter”的 TypeConverter 不支持转换

当我像上面那样放置边框时会导致此错误。

这是我的完整代码

```
<ItemsControl x:Name="listaAdd" ItemsSource="{Binding sample}"  Grid.Row="0" Margin="0,221,0,0" Foreground="White" Background="#FF5B5B5B" >
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid HorizontalAlignment="Stretch" Grid.Row="1" Width="480" >
                    <Border x:Name="borda" BorderBrush="{Binding Converter=ColorConverter}"  >
                        <ListBoxItem x:Name="listSelected" Foreground="White" IsSelected="True"  VerticalAlignment="Center"  FontSize="{StaticResource PhoneFontSizeLarge}" Content="{Binding Nome}"  Background="{x:Null}" HorizontalContentAlignment="Left" Height="80" DoubleTap="listSelected_DoubleTap">
                        </ListBoxItem>
                    </Border>
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu x:Name="subMenulist">
                            <Button Grid.Column="1" Content="delete"   BorderThickness="0" Margin="0"  Background="White" Foreground="#FF1A739D" FontSize="32" HorizontalContentAlignment="Left">
                            </Button>
                            <Button Grid.Column="1" Content="compartilhar" Margin="0,0,0,0" x:Name="btnShare" BorderThickness="0"  Background="White" Foreground="#FF1A739D" FontSize="32" HorizontalContentAlignment="Left">
                            </Button>
                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu>
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

# php - php参数化SQL查询特殊运算符

> ID：13492464
> 
> 赞同：3
> 
> 时间：2012-11-21T11:38:31.043
> 
> 标签：php, sql, operators, sql-injection, parameterized-query

我只是碰巧看到了以下编写参数化 SQL 查询的方法：

```
function select_user($uid)
{
    // what is '<<<'?  
    // I can't google any document about it
    // (or I don't know how to search symbol)

    $sqlStr = <<< SQL_STR

         SELECT * FROM user WHERE uid = ?

SQL_STR; // must put in the begin of the line
         // and it must match the word at the right hand side of '= <<<'

    // Code Igniter Database Class
    return $this->db->query($sqlStr, array($uid));
} 
```

在这里改写我的问题：

*   符号“ `<<<`”有什么作用？
*   我的同事说' `SQL_STR`'必须匹配，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:42:11.573

Heredoc 用于定义字符串，通常是因为不必在整个字符串中转义引号，这与字符串文字不同。

从[手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)：

> Heredoc 文本的行为就像一个双引号字符串，没有双引号。这意味着不需要对heredoc 中的引号进行转义，但仍然可以使用上面列出的转义码。变量是扩展的，但是在 heredoc 中表达复杂变量时必须像使用字符串一样小心。

```
$str = <<<EOD
Example of string
spanning multiple lines
using heredoc syntax.
EOD; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:39:56.307

您要查找的内容称为[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。

对于它的价值，SQL 查询与字符串分配无关：

```
$html = <<<HTML
    Imagine some HTML here with interspersed $variables
HTML; 
```

当然也不限于 HTML。对于大块文本，它有很多有用的属性。也就是说，您可以以愉快的方式将变量插入其中，而不必转义单引号或双引号。（根据手册：“Heredoc 文本的行为就像一个双引号字符串，没有双引号。”）

# windows - C# WinForms：FUSLOGVW.exe

> ID：13492470
> 
> 赞同：0
> 
> 时间：2012-11-21T11:39:00.630
> 
> 标签：windows, sdk

我的应用程序有问题。我正在虚拟机 Windows 7 中对其进行测试，并且我已经通过 Windows SDK 包安装了 FUSLOGVW.exe。虚拟机没有安装任何其他软件。当我执行 FUSLOGVW.exe 并单击设置按钮时，出现的对话框窗口显示所有选项已禁用，并且当我想放置日志时无法设置日志目录。有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:39:54.357

确保以管理员权限运行它。

# asp.net - GridView 更新和删除语句损坏

> ID：13492474
> 
> 赞同：1
> 
> 时间：2012-11-21T11:39:17.417
> 
> 标签：asp.net, gridview

我对 asp.net 和对 GridView 比较陌生，而且我很难完成以下任务：我的数据库中有三个表：

```
 Bookings    
    --------------------------------------------------------
    id  |   start_date  |   end_date   |  user_id  | pet_id
    ----|---------------|--------------|-----------|--------
    1   |   01/04/2011  |  01/04/2011  |     1     |    2
    --------------------------------------------------------

    Pets    
    ---------------------------------------------------------
     id  |  name       | species  |  owner_id  | caretaker_id
    -----|-------------|----------|------------|-------------
      1  |  samplename |   dog    |      1     |     2
    ---------------------------------------------------------

    Users    
    ------------------------------------------------------------------------
      id  |  email               | first_name  |  last_name   | password
    ------|----------------------|-------------|--------------|-------------
       1  |  test@test.gmail.com |   Name      |      Surname | passwordhere
    ------------------------------------------------------------------------ 
```

我试图做的是使用数据网格来显示预订表中的信息，使其可编辑，以便用户可以编辑他的宠物的预订。使用自动 sql 语句的初始尝试运行良好，`SELECT * from [bookings]`返回了 bookings 表，我能够删除和更新行。我决定使用新的选择查询，以便用户可以清楚地看到他的宠物的名字和他作为主人的名字，而不是数字。我使用了以下选择查询，效果很好：

```
 select start_date, end_date, usr.first_name AS 'Owner', pets.name AS 'Pet name' from  
    bookings AS bookings left join users AS usr ON bookings.user_id=usr.id left join
    pets AS pets ON pets.id=bookings.pet_id

    Output    
        ----------------------------------------------------------
           start_date  |  end_date   | Owner       |  Pet name   | 
        ---------------|-------------|-------------|-------------|
           01/04/2011  |  01/04/2011 |   Name      |  samplename | 
        ---------------------------------------------------------- 
```

* * *

现在问题来了：从我将 GridView 中的选择查询更新到提到的那个时，删除和更新语句都不起作用。当然我会提供自定义的，但无论我尝试什么，它总是返回一个错误`incorrect syntax near nvarchar`。我也不确定 pet_id 列是整数还是应该是字符串，因为它在新的连接选择中显示宠物的名称而不是它的 id？

我不知道我在这里做错了什么。我很感激任何帮助。下面是 GridView 的代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
            <asp:BoundField DataField="start_date" HeaderText="start_date" SortExpression="start_date" />
            <asp:BoundField DataField="end_date" HeaderText="end_date" SortExpression="end_date" />
            <asp:BoundField DataField="Owner" HeaderText="Owner" SortExpression="Owner" />
            <asp:BoundField DataField="Pet name" HeaderText="Pet name" SortExpression="Pet name" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:pph_database %>" SelectCommand="select start_date, end_date, usr.first_name AS 'Owner', pets.name AS 'Pet name' from bookings AS bookings left join users AS usr ON bookings.user_id=usr.id left join pets AS pets ON pets.id=bookings.pet_id" UpdateCommand="UPDATE [bookings] SET [start_date] = @start_date, [end_date] = @end_date, [user_id] = @user_id, [pet_id] = @pet_id WHERE [id] = @id" DeleteCommand="DELETE FROM [bookings] WHERE [id] = @id" InsertCommand="INSERT INTO [bookings] ([start_date], [end_date], [user_id], [pet_id]) VALUES (@start_date, @end_date, @user_id, @pet_id)">
        <DeleteParameters>
            <asp:Parameter Name="id" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter DbType="Date" Name="start_date" />
            <asp:Parameter DbType="Date" Name="end_date" />
            <asp:Parameter Name="user_id" Type="Int32" />
            <asp:Parameter Name="pet_id" Type="Int32" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter DbType="Date" Name="start_date" />
            <asp:Parameter DbType="Date" Name="end_date" />
            <asp:Parameter Name="user_id" Type="Int32" />
            <asp:Parameter Name="pet_id" Type="Int32" />
            <asp:Parameter Name="id" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:29:37.017

也许你会这样做：

```
<asp:GridView ID="GridView1" runat="server" DataMember="Table"
   EnableModelValidation="True" CssClass = "GridViewStyle" 
   OnRowDeleting = "dataViewRowDeleting" AutoGenerateDeleteButton="True"
   OnRowEditing = "dataViewRowEditing" AutoGenerateEditButton="True"
   OnRowUpdating = "dataViewRowUpdating"> 
    <Columns>
    ...
    </Columns>           
</asp:GridView> 
```

您可以将事件 dataViewRowDeleting 与行删除和 dataViewRowEditing 与行编辑相关联。

# list - Prolog 在列表中搜索元素并添加符号

> ID：13492475
> 
> 赞同：-2
> 
> 时间：2012-11-21T11:39:17.370
> 
> 标签：list, numbers, prolog

例如，我有这个号码列表：

```
[1,2,3,4,5,6,7,8,9,10]. 
```

例如，我必须搜索一个数字`7`并插入`"$"`BEFORE 和 AFTER `7`：

```
[1,2,3,4,5,6,$,7,$,8,9,10]. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:58:23.823

我使用 swi prolog，您可以使用替换谓词（在其他堆栈溢出问题中找到），并结合列表上的 flatten 运算符：

```
:- use_module(library(lists)).

replace(_, _, [], []).
replace(O, R, [O|T], [R|T2]) :- replace(O, R, T, T2).
replace(O, R, [H|T], [H|T2]) :- H \= O, replace(O, R, T, T2). 
```

现在：

```
replace(1,[$,1,$],[4,3,2,1],NewList),flatten(NewList,FlattendList).
NewList = [4, 3, 2, [$, 1, $]],
FlattendList = [4, 3, 2, $, 1, $] ; 
```

当然，您可以为此构建漂亮的谓词。

# android - 在 org.apache.harmony.xml.ExpatParser.parseFragment（ExpatParser.java:515）

> ID：13492478
> 
> 赞同：1
> 
> 时间：2012-11-21T11:39:28.650
> 
> 标签：android

我正在使用 Road Provider 类来指示方向

这是代码：

```
public class RoadProvider {

    public static Road getRoute(InputStream is) {
        KMLHandler handler = new KMLHandler();
        try {
            SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
            parser.parse(is, handler);
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return handler.mRoad;
    }

    public static String getUrl(double fromLat, double fromLon, double toLat,
            double toLon) {// connect to map web service
        StringBuffer urlString = new StringBuffer();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");// from
        urlString.append(Double.toString(fromLat));
        urlString.append(",");
        urlString.append(Double.toString(fromLon));
        urlString.append("&daddr=");// to
        urlString.append(Double.toString(toLat));
        urlString.append(",");
        urlString.append(Double.toString(toLon));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
        return urlString.toString();
    }
} 
```

和 DefaultHandler

```
class KMLHandler extends DefaultHandler {

    Road mRoad;
    boolean isPlacemark;
    boolean isRoute;
    boolean isItemIcon;
    private Stack mCurrentElement = new Stack();
    private String mString;

    public KMLHandler() {
            mRoad = new Road();
    }

    public void startElement(String uri, String localName, String name,
                    Attributes attributes) throws SAXException {
            mCurrentElement.push(localName);
            if (localName.equalsIgnoreCase("Placemark")) {
                    isPlacemark = true;
                    mRoad.mPoints = addPoint(mRoad.mPoints);
            } else if (localName.equalsIgnoreCase("ItemIcon")) {
                    if (isPlacemark)
                            isItemIcon = true;
            }
            mString = new String();
    }

    public void characters(char[] ch, int start, int length)
                    throws SAXException {
            String chars = new String(ch, start, length).trim();
            mString = mString.concat(chars);
    }

    public void endElement(String uri, String localName, String name)
                    throws SAXException {
            if (mString.length() > 0) {
                    if (localName.equalsIgnoreCase("name")) {
                            if (isPlacemark) {
                                    isRoute = mString.equalsIgnoreCase("Route");
                                    if (!isRoute) {
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString;
                                    }
                            } else {
                                    mRoad.mName = mString;
                            }
                    } else if (localName.equalsIgnoreCase("color") && !isPlacemark) {
                            mRoad.mColor = Integer.parseInt(mString, 16);
                    } else if (localName.equalsIgnoreCase("width") && !isPlacemark) {
                            mRoad.mWidth = Integer.parseInt(mString);
                    } else if (localName.equalsIgnoreCase("description")) {
                            if (isPlacemark) {
                                    String description = cleanup(mString);
                                    if (!isRoute)
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;
                                    else
                                            mRoad.mDescription = description;
                            }
                    } else if (localName.equalsIgnoreCase("href")) {
                            if (isItemIcon) {
                                    mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
                            }
                    } else if (localName.equalsIgnoreCase("coordinates")) {
                            if (isPlacemark) {
                                    if (!isRoute) {
                                            String[] xyParsed = split(mString, ",");
                                            double lon = Double.parseDouble(xyParsed[0]);
                                            double lat = Double.parseDouble(xyParsed[1]);
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
                                    } else {
                                            String[] coodrinatesParsed = split(mString, " ");
                                            mRoad.mRoute = new double[coodrinatesParsed.length][2];
                                            for (int i = 0; i < coodrinatesParsed.length; i++) {
                                                    String[] xyParsed = split(coodrinatesParsed[i], ",");
                                                    for (int j = 0; j < 2 && j < xyParsed.length; j++)
                                                            mRoad.mRoute[i][j] = Double
                                                                            .parseDouble(xyParsed[j]);
                                            }
                                    }
                            }
                    }
            }
            mCurrentElement.pop();
            if (localName.equalsIgnoreCase("Placemark")) {
                    isPlacemark = false;
                    if (isRoute)
                            isRoute = false;
            } else if (localName.equalsIgnoreCase("ItemIcon")) {
                    if (isItemIcon)
                            isItemIcon = false;
            }
    }

    private String cleanup(String value) {
            String remove = "<br/>";
            int index = value.indexOf(remove);
            if (index != -1)
                    value = value.substring(0, index);
            remove = "&#160;";
            index = value.indexOf(remove);
            int len = remove.length();
            while (index != -1) {
                    value = value.substring(0, index).concat(
                                    value.substring(index + len, value.length()));
                    index = value.indexOf(remove);
            }
            return value;
    }

    public Point[] addPoint(Point[] points) {
            Point[] result = new Point[points.length + 1];
            for (int i = 0; i < points.length; i++)
                    result[i] = points[i];
            result[points.length] = new Point();
            return result;
    }

    private static String[] split(String strString, String strDelimiter) {
            String[] strArray;
            int iOccurrences = 0;
            int iIndexOfInnerString = 0;
            int iIndexOfDelimiter = 0;
            int iCounter = 0;
            if (strString == null) {
                    throw new IllegalArgumentException("Input string cannot be null.");
            }
            if (strDelimiter.length() <= 0 || strDelimiter == null) {
                    throw new IllegalArgumentException(
                                    "Delimeter cannot be null or empty.");
            }
            if (strString.startsWith(strDelimiter)) {
                    strString = strString.substring(strDelimiter.length());
            }
            if (!strString.endsWith(strDelimiter)) {
                    strString += strDelimiter;
            }
            while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                            iIndexOfInnerString)) != -1) {
                    iOccurrences += 1;
                    iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
            }
            strArray = new String[iOccurrences];
            iIndexOfInnerString = 0;
            iIndexOfDelimiter = 0;
            while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                            iIndexOfInnerString)) != -1) {
                    strArray[iCounter] = strString.substring(iIndexOfInnerString,
                                    iIndexOfDelimiter);
                    iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
                    iCounter += 1;
            }

            return strArray;
    } 
```

这是日志猫：

```
11-22 16:46:55.817: W/System.err(25038): org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 798: not well-formed (invalid token)
11-22 16:46:55.817: W/System.err(25038):    at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:515)
11-22 16:46:55.817: W/System.err(25038):    at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:474)
11-22 16:46:55.827: W/System.err(25038):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:321)
11-22 16:46:55.827: W/System.err(25038):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:279)
11-22 16:46:55.827: W/System.err(25038):    at com.example.testdirection.RoadProvider.getRoute(RoadProvider.java:35)
11-22 16:46:55.827: W/System.err(25038):    at com.example.testdirection.MainActivity$2.run(MainActivity.java:143) 
```

这里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:44:52.273

看起来您的输入流由于某种原因无效，或者可能是错误的 XML 代码。该错误似乎在您的 中`MainActivity`，但您没有包括在内。请参阅日志猫底部的行以了解从哪里开始查找（或至少在此处发布该代码）

# c# - 在 C# 中将 HTML 实体转换为 Unicode 字符

> ID：13492497
> 
> 赞同：44
> 
> 时间：2012-11-21T11:40:32.873
> 
> 标签：c#, windows-runtime, html-entities, html-encode

我发现了 Python 和 Javascript 的类似问题和答案，但没有发现 C# 或任何其他 WinRT 兼容语言。

我认为我需要它的原因是因为我正在显示从 Windows 8 商店应用程序中的网站获取的文本。例如`&eacute;`应该变成`é`.

或者，还有更好的方法？我没有显示网站或 rss 提要，而只是显示网站及其标题的列表。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-21T11:57:55.553

我推荐使用**[System.Net.WebUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/system.net.webutility.htmldecode.aspx)**而**不是** `HttpUtility.HtmlDecode`。

这是因为该`System.Web`引用在 Winforms/WPF/Console 应用程序中不存在，您可以使用此类（已在所有这些项目中添加为引用）获得完全相同的结果。

**用法：**

```
string s =  System.Net.WebUtility.HtmlDecode("&eacute;"); // Returns é 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-21T11:43:59.127

[在此处](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)使用`HttpUtility.HtmlDecode()`.Read on msdn

```
decodedString = HttpUtility.HtmlDecode(myEncodedString) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-07-01T16:34:45.763

这可能很有用，用它们的 unicode 等价物替换所有（就我的要求而言）实体。

```
 public string EntityToUnicode(string html) {
        var replacements = new Dictionary<string, string>();
        var regex = new Regex("(&[a-z]{2,5};)");
        foreach (Match match in regex.Matches(html)) {
            if (!replacements.ContainsKey(match.Value)) { 
                var unicode = HttpUtility.HtmlDecode(match.Value);
                if (unicode.Length == 1) {
                    replacements.Add(match.Value, string.Concat("&#", Convert.ToInt32(unicode[0]), ";"));
                }
            }
        }
        foreach (var replacement in replacements) {
            html = html.Replace(replacement.Key, replacement.Value);
        }
        return html;
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-05T09:15:45.627

Metro App 和 WP8 App 中 HTML 实体和 HTML 数字的不同编码/编码。

# 使用 Windows 运行时 Metro 应用程序

```
{
    string inStr = "ó";
    string auxStr = System.Net.WebUtility.HtmlEncode(inStr);
    // auxStr == &#243;
    string outStr = System.Net.WebUtility.HtmlDecode(auxStr);
    // outStr == ó
    string outStr2 = System.Net.WebUtility.HtmlDecode("&oacute;");
    // outStr2 == ó
} 
```

# 使用 Windows Phone 8.0

```
{
    string inStr = "ó";
    string auxStr = System.Net.WebUtility.HtmlEncode(inStr);
    // auxStr == &#243;
    string outStr = System.Net.WebUtility.HtmlDecode(auxStr);
    // outStr == &#243;
    string outStr2 = System.Net.WebUtility.HtmlDecode("&oacute;");
    // outStr2 == ó
} 
```

为了解决这个问题，在 WP8 中，我在调用[HTML ISO-8859-1 参考](http://www.w3schools.com/tags/ref_entities.asp)`System.Net.WebUtility.HtmlDecode()`之前实现了表格。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-29T18:53:02.347

这对我有用，替换了常见和 unicode 实体。

```
private static readonly Regex HtmlEntityRegex = new Regex("&(#)?([a-zA-Z0-9]*);");

public static string HtmlDecode(this string html)
{
    if (html.IsNullOrEmpty()) return html;
    return HtmlEntityRegex.Replace(html, x => x.Groups[1].Value == "#"
        ? ((char)int.Parse(x.Groups[2].Value)).ToString()
        : HttpUtility.HtmlDecode(x.Groups[0].Value));
}

[Test]
[TestCase(null, null)]
[TestCase("", "")]
[TestCase("&#39;fark&#39;", "'fark'")]
[TestCase("&quot;fark&quot;", "\"fark\"")]
public void should_remove_html_entities(string html, string expected)
{
    html.HtmlDecode().ShouldEqual(expected);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-25T13:39:10.730

改进的 Zumey 方法（我不能在那里发表评论）。最大字符大小在实体中：&exclamation; (11)。实体中的大写也是可能的，例如。À（来自[维基](https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)）

```
public string EntityToUnicode(string html) {
        var replacements = new Dictionary<string, string>();
        var regex = new Regex("(&[a-zA-Z]{2,11};)");
        foreach (Match match in regex.Matches(html)) {
            if (!replacements.ContainsKey(match.Value)) { 
                var unicode = HttpUtility.HtmlDecode(match.Value);
                if (unicode.Length == 1) {
                    replacements.Add(match.Value, string.Concat("&#", Convert.ToInt32(unicode[0]), ";"));
                }
            }
        }
        foreach (var replacement in replacements) {
            html = html.Replace(replacement.Key, replacement.Value);
        }
        return html;
    } 
```

# cocoa - 使 NSView 具有适合内容的固定宽度和可变高度

> ID：13492501
> 
> 赞同：1
> 
> 时间：2012-11-21T11:40:46.537
> 
> 标签：cocoa, layout, nsview, nslayoutconstraint

我想创建一个宽度固定但高度可变的视图。这意味着视图应根据其内容高度自动调整大小，但同时应保持相同的宽度。

我怎样才能以*编程*方式实现这一目标？

例如，我有下一段代码来创建标签和按钮：

```
NSTextField *label = [[NSTextField alloc] initWithFrame:[self frame]];
[label setEditable:NO];
[label setBackgroundColor:[NSColor clearColor]];
[label setBezeled:NO];
[label setFont:[NSFont fontWithName:@"Lucida Grande" size:13.0]];
[label setStringValue:@"Sample label text"];

NSButton *button = [[NSButton alloc] initWithFrame:primaryBounds];
[button setBezelStyle:10];
[button setTitle:@"Sample button text"];
[button setBounds:NSInsetRect([button bounds], -8.0, 0)];
[button sizeToFit];

[[self contentView] addSubview:label];
[[self contentView] addSubview:button]; 
```

它们被设置为填充整个`contentView`框架。如何设置 my`label`具有*固定*宽度和*可变*高度（基于自身的文本内容），并将 my`button`附加到底部`label`？

* * *

好的，我已经设法`label`像这样自动调整大小：

```
NSTextView *label = [[NSTextView alloc] initWithFrame:NSMakeRect(0, 0, [self frame].size.width, 0)];
[label setEditable:NO];
[label setBackgroundColor:[NSColor clearColor]];
[label setFont:[NSFont fontWithName:@"Lucida Grande" size:13.0]];
[label setString:@"Sample label text"];
[label setHorizontallyResizable:NO];
[label sizeToFit]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T05:09:25.550

在 Autolayout using Mountain Lion 下，您将告诉文本字段其首选宽度应该是多少：

```
[textField setPreferredMaxLayoutWidth:200] 
```

现在文本字段将测量其内容的大小，就好像它在 200 磅处换行一样，一旦内容达到该宽度，文本字段将倾向于垂直增长。

要将按钮附加到标签的底部，您将添加一个约束，说明标签的底部等于按钮的顶部，加上 22：

```
[parentView addConstraint:
   [NSLayoutConstraint constraintWithItem:label
                                attribute:NSLayoutAttributeBottom
                                relatedBy:NSLayoutRelationEqual
                                   toItem:button
                                attribute:NSLayoutAttributeTop
                               multiplier:1
                                 constant:22]]; 
```

或使用视觉格式语言和标准 Aqua 间距：

```
NSDictionary *viewsDict = NSDictionaryOfVariableBindings(label, button);
[view addConstraints:
     [NSLayoutConstraint constraintsWithVisualFormat:@"V:[label]-[button]"
                                             options:0
                                             metrics:nil
                                               views:viewsDict]]; 
```

# c# - Umbraco 的会员提供者

> ID：13492502
> 
> 赞同：6
> 
> 时间：2012-11-21T11:40:50.360
> 
> 标签：c#, umbraco, membership-provider

我正在尝试创建一个自定义成员资格提供程序，以将 Umbraco 中的用户验证到 Umbraco 之外已经存在的数据库。根据我目前所学到的知识，创建一个继承 `umbraco.providers.members.UmbracoMembershipProvider`并覆盖*ValidateUser() 函数*的类应该不会做更多的工作。

我想知道的是，当我希望将此类包含到我的 Umbraco 项目中而不是在 web.config 文件中指定它时，我应该怎么做？是否可以以这种方式扩展 Umbraco 而无需重新编译源代码？

编辑 - 我写了一篇关于我如何在[http://marcus-abrahamsson.se/post/Membership-Provider-in-Umbraco上实现它的文章](http://marcus-abrahamsson.se/post/Membership-Provider-in-Umbraco)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:57:07.220

您可以创建和构建自己的模块，然后将 .dll 复制到 Umbraco 安装的 bin 文件夹中。无需重新编译 Umbraco 本身。

我有一个非常相似的问题，但可能要求较小。我试图实现 Umbraco TV 视频中描述的“最后登录”功能，以显示成员的最后登录日期。由于代码库已更改，所描述的方法不再有效。我发现有两种通用方法可以让它工作：

创建您自己的会员提供商。从 UmbracoMembershipProvider 继承并更新 Web 配置以使用您的提供程序。我覆盖了一种方法，我的提供程序代码如下所示：

```
using umbraco.BusinessLogic;
using System.Web.Profile;
using System;

namespace zo.Umb.LastLogin
{
    // this approac works, and it may be necessary to extend the membership provider in the future, so that's why I'm
    // leaving it here. But for now I'm using the ApplicationStartupHandler event subscription method
    // in MemberEvent.cs

    /// <summary>
    /// Inherit the default membership provider and substitute my own method that's fired when a member tries
    /// to log in. Note that you must also replace the UmbracoMembershipProvider reference in the web.config 
    /// with a reference to this one. eg:
    /// <add name="UmbracoMembershipProvider" type="zo.Umb.LastLogin.MyMembershipProvider" enablePasswordRetrieval="false" enablePasswordReset="false" requiresQuestionAndAnswer="false" defaultMemberTypeAlias="Another Type" passwordFormat="Hashed" />
    /// 
    /// also note that, to have custom profile properties appear, they must also be added in the web.config
    /// like so:
    /// <profile defaultProvider="UmbracoMemberProfileProvider" enabled="true">
    ///  <providers>
    ///    <clear />
    ///    <add name="UmbracoMemberProfileProvider" type="umbraco.providers.members.UmbracoProfileProvider, umbraco.providers" />
    ///  </providers>
    ///  <properties>
    ///    <clear />
    ///    <add name="lastLogin" allowAnonymous ="false" provider="UmbracoMemberProfileProvider" type="System.DateTime" />
    ///  </properties>
    ///</profile>

    /// </summary>
    public class MyMembershipProvider : umbraco.providers.members.UmbracoMembershipProvider
    {
        public override bool ValidateUser(string username, string password)
        {
            var success = base.ValidateUser(username, password);
            if (success)
            {
                var user = GetUser(username, true);
                var profile = ProfileBase.Create(user.UserName);
                profile["lastLogin"] = DateTime.Now;
                profile.Save();
            }
            return success;
        }
    }
} 
```

当用户尝试访问受保护的内容时会触发 ValidateUser。

请注意，您现在必须更新 web.config 以指向您的自定义成员资格提供程序。

虽然这行得通，但我不喜欢离开默认提供程序、编辑 web.config 等，并希望使用以前版本的更“标准”的方法。所以我使用了方法2：

连接到 ApplicationStartupHandler，并订阅 Member.BeforeSave

```
using System;
//using umbraco.BusinessLogic;
using umbraco.businesslogic;
using umbraco.cms.businesslogic.member;

namespace zo.Umb.LastLogin
{
    public class MemberEvent : ApplicationStartupHandler
    {
        public MemberEvent()
        {
            Member.BeforeSave += new Member.SaveEventHandler(Member_BeforeSave);
        }

        void Member_BeforeSave(Member sender, umbraco.cms.businesslogic.SaveEventArgs e)
        {
            //Log.Add(LogTypes.Debug, sender.Id, "Member_AfterAddToCache");
            sender.getProperty("lastLogin").Value = DateTime.Now;
        }
   }
} 
```

如果我记得， member.beforesave*不是*在创建用户并将其保存到会员商店时触发的东西。它实际上是在用户登录时触发的。

# javascript - Dropkick.js - 改变下拉菜单的高度

> ID：13492503
> 
> 赞同：0
> 
> 时间：2012-11-21T11:40:50.413
> 
> 标签：javascript

我已经安装了 Dropkick 以便能够创建漂亮的下拉菜单 [ [http://jamielottering.github.com/DropKick/](http://jamielottering.github.com/DropKick/) ]

我的测试安装在这里：
[http ://test.mobilkul.se/dropkick/](http://test.mobilkul.se/dropkick/)

宽度是根据下拉菜单中最长的元素计算的。

我想增加这个下拉菜单的高度。

如果我点击按钮，现在会显示 8 个选项。

这是可能的还是浏览器问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:55:14.593

如果您查看 dropkick 的 CSS 文件，您会在一行中找到以下内容`132`-*使用 Firebug 或 Chrome 开发检查器检查它*。

```
.dk_options_inner, .dk_touch .dk_options {
    max-height: 250px;
} 
```

您可以：

将其更改`250px`为您需要的任何内容 - 例如，`350px`

*或者*

覆盖 CSS 文件中的样式（推荐）：

```
body .dk_options_inner, .dk_touch .dk_options { /* see body prefix for more specificity */
    max-height: 350px;
} 
```

# iphone - 使用 Base64 编码图像的空值

> ID：13492505
> 
> 赞同：-2
> 
> 时间：2012-11-21T11:40:53.073
> 
> 标签：iphone, objective-c, ios

我正在尝试将图像加密为 Base64 字符串。请找到所需的代码。我得到空值作为响应

```
fullpath = /Users/srt/Library/Application Support/iPhone Simulator/5.1/Applications//Documents/image.png

UIImage *sImage=[UIImage imageNamed:fullPath];
    [fileManager createFileAtPath:fullPath contents:imageData attributes:nil];
    NSLog(@"image saved");
    NSLog(@"%@",fullPath);
   NSData* data = UIImageJPEGRepresentation(sImage, 1.0f);

    NSString *strEncoded = [self Base64ImageEncode:data];
     NSLog(@"This is the encryption %@ ",strEncoded);

-(NSString *)Base64ImageEncode:(NSData *)data{
    //Point to start of the data and set buffer sizes
    int inLength = [data length];
    int outLength = ((((inLength * 4)/3)/4)*4) + (((inLength * 4)/3)%4 ? 4 : 0);
    const char *inputBuffer = [data bytes];
    char *outputBuffer = malloc(outLength);
    outputBuffer[outLength] = 0;

    //64 digit code
    static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    //start the count
    int cycle = 0;
    int inpos = 0;
    int outpos = 0;
    char temp;

    //Pad the last to bytes, the outbuffer must always be a multiple of 4
    outputBuffer[outLength-1] = '=';
    outputBuffer[outLength-2] = '=';

    /* http://en.wikipedia.org/wiki/Base64
     Text content   M           a           n
     ASCII          77          97          110
     8 Bit pattern  01001101    01100001    01101110

     6 Bit pattern  010011  010110  000101  101110
     Index          19      22      5       46
     Base64-encoded T       W       F       u
     */

    while (inpos < inLength){
        switch (cycle) {
            case 0:
                outputBuffer[outpos++] = Encode[(inputBuffer[inpos]&0xFC)>>2];
                cycle = 1;
                break;
            case 1:
                temp = (inputBuffer[inpos++]&0x03)<<4;
                outputBuffer[outpos] = Encode[temp];
                cycle = 2;
                break;
            case 2:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xF0)>> 4];
                temp = (inputBuffer[inpos++]&0x0F)<<2;
                outputBuffer[outpos] = Encode[temp];
                cycle = 3;
                break;
            case 3:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xC0)>>6];
                cycle = 4;
                break;
            case 4:
                outputBuffer[outpos++] = Encode[inputBuffer[inpos++]&0x3f];
                cycle = 0;
                break;
            default:
                cycle = 0;
                break;
        }
    }
    NSString *pictemp = [NSString stringWithUTF8String:outputBuffer];
    free(outputBuffer);
    return pictemp;
} 
```

编码结果是`This is the encryption` 请纠正我的错误和原因，如果需要或任何其他**更好的方法**来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:50:52.217

您无法使用该`imageNamed:`方法从文档目录加载图像。此方法用于从应用程序包中加载图像。其中参数应该是图像的名称。

像：

```
UIImage *tempImage = [UIImage imageNamed:@"myImage.png"]; 
```

这就是图像变空的原因。

使用`imageWithContentsOfFile:`方法。

```
UIImage *sImage = [UIImage imageWithContentsOfFile:fullPath]; 
```

# c++ - 托管 C++ 包装器中的悬空指针

> ID：13492506
> 
> 赞同：-1
> 
> 时间：2012-11-21T11:41:02.980
> 
> 标签：c++, c++-cli, wrapper

我有几个相互引用的非托管 c++ 类。为了避免在释放实例时出现悬空指针，我使用了 boost 智能指针，主要是 shared_ptr。到现在为止还挺好。

但是，我在 C++/CLI 中也有一个包装器，其中几乎每个非托管类都有其托管等效项，以将其公开给 .NET 应用程序。包装器非常简单，但是我被迫使用不安全的指针从 ManagedClass 中引用 UnmanagedClass*。我不能将 boost::shared_ptr 用作 ManagedClass 的成员，因为 CLR 不支持将非托管类型作为类成员（仅指向它们的指针）。

示例：包含 4 个 Wheel 类实例的 Car 类。5 个非托管实例中的每一个都有 5 个托管等效实例。Unmanaged Car 可能需要更换它的轮子，它会删除 4 个 unmanaged Wheel 实例并创建 4 个新实例。Managed Car 要求新的非托管 Wheel 创建 4 个新的 Wheel 托管实例。

但是，Wheel 的 4 个旧托管实例仍在托管世界的范围内，现在包含一个指向旧非托管实例的悬空指针。任何想法如何实现包装器的本机等价物已被处置？使用智能指针轻松完成任务。我可以在托管代码中使用它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:04:05.483

为什么不使用内部实例计数？创建一个基础原生类：

```
class Base
{
    int refCount = 0;

public:
    void AddRef() { refCount++; }
    void Release() { refCount--; if (refCount == 0) delete this; }
} 
```

然后将它用作所有这些的基类，并记住在获取类的实例时调用 AddRef 并在不再需要它时调用 Release()（例如在析构函数中）。你必须在你的 C++/CLI 类中做同样的事情；实现 IDisposable 接口并在 Dispose() 方法中清理持有的本机类实例。使用它应该不会有太大问题，因为您只需要在构造函数中调用一次 AddRef 并在析构函数/Dispose 中调用一次 Release。

# asp.net-mvc - 使用 viewModel 测试编辑操作

> ID：13492514
> 
> 赞同：1
> 
> 时间：2012-11-21T11:41:51.207
> 
> 标签：asp.net-mvc, unit-testing, nunit, moq, automapper

我有以下控制器动作

```
public ActionResult EditFocus(int id)
    {
        var Focus = focusService.GetFocus(id);
        Mapper.CreateMap<Focus, FocusFormModel>()
        FocusFormModel editFocus = Mapper.Map<Focus, FocusFormModel>(Focus);
        if (Focus == null)
        {
            return HttpNotFound();
        }
        return View("EditFocus", editFocus); 
```

我正在使用 Nunit 进行测试。测试是

```
 [Test]
public void Edit_Get_ReturnsView()
{

    FocusFormModel group = new FocusFormModel() { FocusId = 1, FocusName = "Test" };
    Mapper.CreateMap<Focus, FocusFormModel>().ForAllMembers(opt => opt.Ignore());
    Focus focusViewModel = Mapper.Map<Focus, FocusFormModel>(group);
    Mapper.AssertConfigurationIsValid();
    focusRepository.Setup(x => x.GetById(1)).Returns(focusViewModel);

    FocusController controller = new GroupController(focusService);
    ViewResult actual = controller.EditFocus(1) as ViewResult;
    Assert.IsNotNull(actual, "View Result is null"); 
```

}

但测试失败在 NUnit GUI 中出现以下错误：

```
Missing Mapping type Configuration& Unsupported Mapping 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:44:57.440

您正在创建两次映射。**对于web**和**测试**，它应该只执行一次。

**web**：仅在应用程序启动时创建一次地图，可能使用[配置文件](http://blog.velir.com/index.php/2012/08/27/organizing-automappers-map-configurations-in-mvc/)。

**测试**：在特定测试中的 TestFixtureSetUp 中创建地图，如果有的话，可以在基础测试类中创建地图。

# asp.net - 将 WebSecurity 与 NHibernate 和 Postgresql 一起使用？

> ID：13492518
> 
> 赞同：4
> 
> 时间：2012-11-21T11:42:12.420
> 
> 标签：asp.net, asp.net-mvc, nhibernate, asp.net-membership, roleprovider

由于我想在我的 ASP.NET MVC4 项目中使用 Postgresql 和 NHibernate，我想知道是否可以将 WebMatrix.WebData.WebSecurity 用于安全和身份验证功能？NHibernate 和 Postgres 已经一起工作了，但是当我想设置 WebSecurity 类时：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "Id", "UserName", autoCreateTables: true); 
```

我收到以下错误消息：

```
Unable to find the requested .Net Framework Data Provider. It may not be installed. 
```

创建 DbProviderFactory 也不起作用：

```
<system.data>
  <DbProviderFactories>
    <add name="Npgsql - .Net Data Provider for PostgreSQL" invariant="Npgsql"
      description=".Net Data Provider for PostgreSQL" type="Npgsql.NpgsqlFactory" />
  </DbProviderFactories>
</system.data> 
```

原则上是否可以在不使用 EntityFramework 的情况下使用 WebSecurity 类？或者你有什么解决问题的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T00:41:06.517

安装此包[http://www.nuget.org/packages/Microsoft.AspNet.Providers.Core 并重](http://www.nuget.org/packages/Microsoft.AspNet.Providers.Core)试。

# c# - WINRT_NOT_PRESENT 的目的是什么？

> ID：13492520
> 
> 赞同：1
> 
> 时间：2012-11-21T11:42:13.370
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

在一些 Windows 8 应用程序代码示例中，我看到了这些预处理器指令封装的代码块

```
#if !WINRT_NOT_PRESENT
#endif 
```

WinRT 不是*始终*存在于 Windows 8 应用商店应用程序中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:01:45.093

这由 Microsoft 的 NotificationsExtensions 库使用。如果要使用 ASP.NET 将推送通知发送到 Windows 推送通知服务 (WNS)，则需要指定此构建符号。

从[快速入门：在代码中使用 NotificationsExtensions 库 (Windows)](http://msdn.microsoft.com/en-us/library/windows/apps/hh969156.aspx)：

> 如果您使用 ASP.NET 将推送通知发送到 Windows 推送通知服务 (WNS)，您还可以在应用服务器代码中使用 NotificationsExtensions。唯一需要注意的是，您必须在 NotificationsExtensions 项目属性中添加 WINRT_NOT_PRESENT 编译构建符号。

# python - 如何按子索引对齐 Pandas 数据框列？

> ID：13492530
> 
> 赞同：4
> 
> 时间：2012-11-21T11:42:53.570
> 
> 标签：python, matplotlib, pandas

我有一个熊猫数据框，`df`其中包含两只股票的财务比率数据：

```
>>> df
                  ROIC    ROE
STK_ID RPT_Date              
600141 20110331  0.012  0.022
       20110630  0.031  0.063
       20110930  0.048  0.103
       20111231  0.063  0.122
       20120331  0.017  0.033
       20120630  0.032  0.077
       20120930  0.050  0.120
600809 20110331  0.536  0.218
       20110630  0.734  0.278
       20110930  0.806  0.293
       20111231  1.679  0.313
       20120331  0.666  0.165
       20120630  1.039  0.257
       20120930  1.287  0.359 
```

我尝试在相同的“RPT_Date”上绘制股票“600141”和“600809”的比率“ROIC”和“ROE”来衡量它们的表现。

`df.plot(kind='bar')`下面给出

![在此处输入图像描述](../Images/a404d556fef37f122523966b5d0c9bd8.png)

该图表在左侧绘制“600141”，在右侧绘制“600809”。在同一报告日比较两只股票的“ROIC”和“ROE”有些不便`'RPT_Date'`。

我想要的是将由相同“RPT_Date”索引的“ROIC”和“ROE”条并排放置在同一组中（每组 4 个条），并且 x 轴仅标记“RPT_Date”，这将清楚地告诉两只股票的差异。

怎么做 ？

如果 I `df.plot(kind='line')`，它只显示两行，但应该是四行（2 个股票 * 2 个比率）： ![在此处输入图像描述](../Images/da608d6c79320ccbb1eab35771665dc7.png)

这是一个错误，还是我可以做些什么来纠正它？谢谢。

我正在使用熊猫 0.8.1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T18:15:40.913

如果您取消堆叠 STK_ID，您可以创建每个 RPT_Date 的并排图。

```
 In [55]: dfu = df.unstack("STK_ID")

 In [56]: fig, axes = subplots(2,1)

 In [57]: dfu.plot(ax=axes[0], kind="bar")
 Out[57]: <matplotlib.axes.AxesSubplot at 0xb53070c>

 In [58]: dfu.plot(ax=axes[1])
 Out[58]: <matplotlib.axes.AxesSubplot at 0xb60e8cc> 
```

![在此处输入图像描述](../Images/f8aef9cd29ce6b10787fbb2e597fa9c2.png)

# delphi - 火猴中的GetKeyState

> ID：13492531
> 
> 赞同：4
> 
> 时间：2012-11-21T11:42:56.593
> 
> 标签：delphi, keyboard, firemonkey, delphi-xe3, firemonkey-fm2

在 VCL (Delphi 2010) 中，我使用这个函数来检查是否按下了控制键：

```
function IsControlKeyPressed: Boolean;
begin
  Result := GetKeyState(VK_CONTROL) < 0;
end; 
```

GetKeyState 是 Windows 库中的函数，我不想将它包含到我的项目中。

如何检查是否在 XE3 中为 firemonkey 应用程序按下了 control 或 shift 键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T12:00:22.810

如果它对其他人有帮助，这是我的单位：

```
unit uUtils;

interface

uses
{$IFDEF MSWINDOWS}
  Winapi.Windows;
{$ELSE}
  Macapi.AppKit;
{$ENDIF}
function IsControlKeyPressed: Boolean;
function IsShiftKeyPressed: Boolean;

implementation

function IsControlKeyPressed: Boolean;
begin
{$IFDEF MSWINDOWS}
  Result := GetKeyState(VK_CONTROL) < 0;
{$ELSE}
  Result := NSControlKeyMask and TNSEvent.OCClass.modifierFlags = NSControlKeyMask;
{$ENDIF}
end;

function IsShiftKeyPressed: Boolean;
begin
{$IFDEF MSWINDOWS}
  Result := GetKeyState(VK_SHIFT) < 0;
{$ELSE}
  Result := NSShiftKeyMask and TNSEvent.OCClass.modifierFlags = NSShiftKeyMask;
{$ENDIF}
end;

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-27T05:41:15.523

请记住在单元**uUtils**中添加以下内容才能正常工作：

`System.UITypes` 和 `Macapi.CoreGraphics`。

```
uses
System.UITypes,
{$IFDEF MSWINDOWS}
  Winapi.Windows;
{$ELSE}
  Macapi.AppKit, Macapi.CoreGraphics;
{$ENDIF} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T20:35:56.530

我已经根据上面的代码扩展了这个，检查是否有任何键基于 vkKeyCode （以及 Mac 的一些翻译）

```
function KeyIsDown(KeyInQuestion:Integer):Boolean;
begin
{$IFDEF MSWINDOWS}
   result:=GetAsyncKeyState(KeyInQuestion) AND $FF00 <> 0;
{$ENDIF MSWINDOWS}
{$IFDEF MACOS}
  {$INCLUDE WinVKeyToMacVKey.Inc}
  case KeyInQuestion of
  vkLButton: result:= Macapi.AppKit.TNSEvent.OCClass.pressedMouseButtons = 1;
  vkRButton: result:= Macapi.AppKit.TNSEvent.OCClass.pressedMouseButtons = (1 SHL 1);
  vkMButton: result:= Macapi.AppKit.TNSEvent.OCClass.pressedMouseButtons = (1 SHL 2);
 else
   result:=(CGEventSourceKeyState(0, KeyInQuestion) <> 0);
 end;
{$ENDIF MACOS}
//This is so it's not left/right-centric vkShift will return true
//if either vkShift or vkRShift is down
  if not result then
   case KeyInQuestion of
    vkShift:result:=KeyIsDown(vkRShift);
    vkControl:result:=KeyIsDown(vkRControl);
    vkMenu:result:=KeyIsDown(vkRMenu);
   end;
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T20:41:05.037

这是 WinVKeyToMacVKey.Inc 文件的文本

```
case KeyInQuestion of
   vkReturn: KeyInQuestion := $24;
   vkTab: KeyInQuestion := $30;
   vkSpace: KeyInQuestion := $31;
   vkBack: KeyInQuestion := $33;
   vkEscape: KeyInQuestion := $35;
   vkLWin: KeyInQuestion := $37;
   vkRWin: KeyInQuestion := $37;
   vkShift: KeyInQuestion := $38;
   vkMenu: KeyInQuestion := $3A;
   vkControl: KeyInQuestion := $3B;
   vkRShift: KeyInQuestion := $3C;
   vkRMenu: KeyInQuestion := $3D;
   vkRControl: KeyInQuestion := $3E;
   vkF17: KeyInQuestion := $40;
   vkVolumeUp: KeyInQuestion := $48;
   vkVolumeDown: KeyInQuestion := $49;
   vkF18: KeyInQuestion := $4F;
   vkF19: KeyInQuestion := $50;
   vkF20: KeyInQuestion := $5A;
   vkF5: KeyInQuestion := $60;
   vkF6: KeyInQuestion := $61;
   vkF7: KeyInQuestion := $62;
   vkF3: KeyInQuestion := $63;
   vkF8: KeyInQuestion := $64;
   vkF9: KeyInQuestion := $65;
   vkF11: KeyInQuestion := $67;
   vkF13: KeyInQuestion := $69;
   vkF16: KeyInQuestion := $6A;
   vkF14: KeyInQuestion := $6B;
   vkF10: KeyInQuestion := $6D;
   vkF12: KeyInQuestion := $6F;
   vkF15: KeyInQuestion := $71;
   vkHelp: KeyInQuestion := $72;
   vkHome: KeyInQuestion := $73;
   vkPrior: KeyInQuestion := $74;
   vkDelete: KeyInQuestion := $75;
   vkF4: KeyInQuestion := $76;
   vkEnd: KeyInQuestion := $77;
   vkF2: KeyInQuestion := $78;
   vkNext: KeyInQuestion := $79;
   vkF1: KeyInQuestion := $7A;
   vkLeft: KeyInQuestion := $7B;
   vkRight: KeyInQuestion := $7C;
   vkDown: KeyInQuestion := $7D;
   vkUp: KeyInQuestion := $7E;
end; 
```

# asp.net-mvc - 如何将记录从一个列表视图拖放到另一个 kendoUI

> ID：13492533
> 
> 赞同：0
> 
> 时间：2012-11-21T11:43:02.100
> 
> 标签：asp.net-mvc, kendo-ui

我有不同的列表视图，我想将记录从一个列表视图拖放到另一个。我已经看到了一个关于这个的链接，“http://jsfiddle.net/MZxQu/36/”我已经在列表视图中实现了这个，我可以拖动列表视图的内容，但是我不能删除它在另一个列表视图中。

你能帮我吗

谢谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T12:37:28.423

使用它而不是网格它会更好我猜：

```
http://demos.kendoui.com/web/treeview/dragdrop.html 
```

# objective-c - 在objective-c中更改按钮的背景图像？

> ID：13492540
> 
> 赞同：0
> 
> 时间：2012-11-21T11:43:28.780
> 
> 标签：objective-c, ios, uibutton

我的VC 中有一个`UIButton`这样的单元格`UITableView`

```
arrowBtnUp = [UIButton buttonWithType:UIButtonTypeCustom];
arrowBtnUp.frame = CGRectMake(50,(65-19)/2,31, 31);
[arrowBtnUp setBackgroundImage:[UIImage imageNamed:@"arrow_up.png"] forState:UIControlStateNormal];
[arrowBtnUp addTarget:self action:@selector(slideAction) forControlEvents:UIControlEventTouchUpInside];
[cell.contentView addSubview:arrowBtnUp]; 
```

这是我的`slideAction`

```
-(void) slideAction
{
    [arrowBtnUp setBackgroundImage:[UIImage imageNamed:@"arrow_down.png"] forState:UIControlStateNormal];
    // also tried  with UIControlStateSelected/Highlighted
} 
```

但它没有用。我找到[了这个](https://stackoverflow.com/questions/6479301/change-background-image-of-a-button-without-extra-buttons)链接但没有帮助。任何建议或样品将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:52:56.173

您的代码应该可以工作。无论如何更改您的代码并尝试

```
-(void) slideAction:(id)sender
{
   [sender setBackgroundImage:[UIImage imageNamed:@"arrow_down.png"] forState:UIControlStateNormal];
} 
```

和

```
[arrowBtnUp addTarget:self action:@selector(slideAction:) forControlEvents:UIControlEventTouchUpInside]; 
```

并确保您的 app bundle 中有 arrow_down.png

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T11:58:08.657

问题是您正在重用`arrowBtnUp`UIButton 的实例。因此，在该`slideAction`方法中，您不会获得按下的按钮参考。

要在方法中获取引用，`slideAction`您需要将其作为参数传递。

因此，将代码更改为：

```
[arrowBtnUp addTarget:self action:@selector(slideAction:) forControlEvents:UIControlEventTouchUpInside];

-(void) slideAction:(UIButton *)myButton
{
   [myButton setBackgroundImage:[UIImage imageNamed:@"arrow_down.png"] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T10:29:11.297

If you're trying to change the button image after a touch, you should use the UIButton's control states. You can assign a background image for each "state" and let UIButton determine which to show.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:59:05.707

背景图像与按钮上的图标不同。试试这个：

```
[_buttonConfirm setImage:[UIImage imageNamed:@"s.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T12:09:13.490

If you're trying to change the button image after a touch, you should use the UIButton's control states. You can assign a background image for each "state" and let UIButton determine which to show.

```
[myButton setBackgroundImage:[UIImage imageNamed:@"arrow_up.png"] forState:UIControlStateNormal];
[myButton setBackgroundImage:[UIImage imageNamed:@"arrow_down.png"] forState:UIControlStateSelected]; 
```

There is no need to manually switch the background images in your slideAction: target method.

# ajax - 单击当前页面链接时重新加载页面，使用 jQuery 地址插件

> ID：13492541
> 
> 赞同：0
> 
> 时间：2012-11-21T11:43:31.850
> 
> 标签：ajax, jquery, jquery-plugins

我正在使用 jQuery Address 插件，我所有的 ajax 导航都基于它，更准确地说是基于类似的 internalChange 或 externalChange 事件

```
$(document).ready(function() {
    initDeepLinking();
});

function linkClicked(e){        
    var request = $.ajax({
          url: e.path,
          data: e.queryString,
          type: "GET",
          dataType: "json",
    });

    request.done(handleResponse);
    return false;    
}

function handleResponse(response, textStatus, jqXHR){
    $('#main').html(response.responseText);
};

function initDeepLinking(){
    $.address.internalChange(function(event){
        linkClicked(event);
    });
    $.address.externalChange(function(event){
        linkClicked(event);
    });
} 
```

所以当我点击指向当前页面的链接时，什么也没有发生。当我这样做时，我希望页面重新加载。有什么简单的选择吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:50:28.520

我很难理解你的问题到底是什么：

*   您不知道如何将处理程序附加到链接
*   你不知道用什么语句可以刷新当前页面

为了设置处理程序，您可以使用一些选择器。例如，按类获取元素。[更多关于 jquery 选择器的信息在这里。](http://api.jquery.com/category/selectors/)

拥有元素后，您可以为[“点击”事件附加一个](http://api.jquery.com/click/)[事件处理程序](http://api.jquery.com/category/Events/)并执行以下操作：

```
window.location.reload(true); 
```

# php - 在 WordPress 插件的下拉列表中插入选项

> ID：13492542
> 
> 赞同：1
> 
> 时间：2012-11-21T11:43:47.050
> 
> 标签：php, html, wordpress

我目前正在修改插件中的注册页面，我想在其中添加一个下拉列表，该列表将插入各州的名称。

我正在根据 PHP 中的 ID 从数据库中导入州名。
这是代码：

```
$localVar = '';
$query=$wpdb->get_results("
    SELECT * FROM wp_state
    ");

if (isset($_POST['user_state']))
    $localVar = $_POST['user_state'];
    $registerFilterArray2['name20'] = '
        <p class="user_state'.$errorVar.'">
        <label for="user_state">'. __('State', 'profilebuilder') .$errorMark.'</label>
        <select name="state">
        <option value="default">Choose Your State</option>';
    $count=0;

    foreach($query as $res)
    {
        '<option value="'.$query[$count]->state_id.'">"'.$query[$count]->state_name.'"</option>';
        $count++;                                    
    } 

    '   </select>;

        <input class="text-input" name="user_state" type="text" id="user_state" value="'.trim($localVar).'" />
        </p><!-- .user_state -->';

    $registerFilterArray2['name20'] = apply_filters(
        'wppb_register_content_name20', 
        $registerFilterArray2['name20'], 
        trim($localVar), 
        $errorVar, 
        $errorMark
    ); 
```

WordPress中是否有任何预定义的功能可以将下拉列表添加到注册页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:08:37.103

是的，WordPress 具有以下`wp_dropdown_*`功能。

![wordpress 下拉功能](../Images/8fe923301334fcda94cfb681fcad2591.png)

*   `wp_dropdown_roles`（无证）

*   [`wp_dropdown_categories`](http://codex.wordpress.org/Function_Reference/wp_dropdown_categories)

*   [`wp_dropdown_pages`](http://codex.wordpress.org/Function_Reference/wp_dropdown_pages)

*   [`wp_dropdown_users`](http://codex.wordpress.org/Function_Reference/wp_dropdown_users)

# c# - 如何使用 C# 创建非托管 DLL？

> ID：13492543
> 
> 赞同：8
> 
> 时间：2012-11-21T11:43:51.730
> 
> 标签：c#, dll

我想使用 C# 创建一个 DLL，然后可以通过以下方式从 VBA 调用它 -

```
Private Declare Function invokePath Lib "\\shared_computer\Projects\somedll\myDLL.dll" (ByVal strUName As String, ByVal strSFile As String) As String 
```

想法是，如果更改 DLL 的路径，我只需要更新 Private Declare 函数行中的路径....

我已经搜索了很多，也不确定这种安排是否可行——我们可以从网络路径调用 DLL 函数而无需引用或注册。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-14T07:35:56.503

其实你可以。查看[unmanagedexports](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports) 这是一个完整的演练，您将能够像这样创建入口点：

```
[DllExport("GenerateSomehting", CallingConvention = CallingConvention.Cdecl)]
public static int GenerateSomehting(int somevalue, ref IntPtr pointer) 
```

并像任何其他非托管 dll 一样调用它。

```
[DllImport("MyGenerator.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int GenerateSomehting(int somevalue, ref IntPtr pointer); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T11:44:34.123

您不能使用 C# 创建非托管 DLL，因为 C# 是一种仅限 .NET 的语言。使用 C++。

从非托管代码（例如 VBA）中使用 .NET DLL 的唯一方法是使用 COM 互操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:46:02.930

在此处查看 P/Invoke，该文章包含一个有用的表格，说明如何将托管类型转换为非托管类型、简短代码示例（在 C# 中）、提示和资源列表。

[基本 P/Invoke](http://www.codeproject.com/Articles/12121/Essential-P-Invoke)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T11:51:30.137

C# Dll 不能导出可以由任何其他非 CLR 代码调用的函数。

这是不可能的。

# java - 正则表达式：在 Java 中拆分复杂列表（两列）

> ID：13492549
> 
> 赞同：0
> 
> 时间：2012-11-21T11:44:05.863
> 
> 标签：java, regex, file, readline

我试图弄清楚如何将文件（两列）拆分为**readLine();** 通过考虑很多分隔符（见下文）。

这是我的定界符的所有可能性（见评论）

```
+--------+---------+
+ ##some text      + //some text which starts with (##) I want to exclude this row
+ 341,     222     + //comma delimited
+ 211      321     + //space delimited
+ 541      1231    + //tab delimited
+ ##some text      + //some text which starts with (##) I want to exclude this row
+ 11.3     321.11  + //double values delimited by tab
+ 331.3    33.11   + //double values delimited by space
+ 231.3,   33.1    + //double values delimited by comma
+ ##some text      + //some text which starts with (##) I want to exclude this row
+--------+---------+ 
```

我想获得这张表：

```
+--------+---------+
+ 341        222   + 
+ 211        321   +
+ 541        1231  +
+ 11.3      321.11 +
+ 331.3     33.11  +
+ 231.3      33.1  +
+--------+---------+ 
```

我很高兴找到解决此问题的方法

更新：

现在我有**([,\s\t;])+**（用于逗号、制表符、空格、分号...），但我不知道如何处理##some 文本。我试过 \##\w+ 但没有用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:41:30.487

你可以试试这个......
我已经试过了，它工作正常。

`(\\d+\\.?\\d*),?\\s*?(\\d+\\.?\\d*)`

并替换为`$1`和`$2`。

编辑：

试试下面的代码...

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

class regcheck
{
    private static Pattern twopart = Pattern.compile("(\\d+\\.?\\d*),?\\s*?(\\d+\\.?\\d*)");

    public static void checkString(String s)
    {
        Matcher m = twopart.matcher(s);
        if (m.matches()) {
            System.out.println(m.group(1) +" " + m.group(2));
        } else {
            System.out.println(s + " does not match.");
        }
    }

    public static void main(String[] args) {
        System.out.println("Parts of strings are ");
        checkString("##some text");
        checkString("123,     4567");
        checkString("123,   342");
        checkString("45.45   4.3");
        checkString("3.78,  23.78");

  }  
} 
```

输出 ：

```
Parts of strings are
##some text does not match.
123 4567
123 342
45.45 4.3
3.78 23.78 
```

`m.group(1)` will give you the first part.
`m.group(2)` will give you the second part.

In your code use `checkstring()` method for single line....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:09:02.930

假设 ASCII 不是输入的一部分，你可以试试这个：

```
##[a-z\s]+|([\d\.]+)[,\s\t]+([\d\.]+) 
```

然后替换为：

```
\1   \2     (or $1    $2) 
```

请注意，这不允许在数字中使用逗号

# c# - 如何使用 c# 从 iframe 访问父元素？

> ID：13492558
> 
> 赞同：7
> 
> 时间：2012-11-21T11:44:56.620
> 
> 标签：c#, asp.net, iframe

我在一个网站上工作`asp.Net`，我正在使用`iframe`加载一个单独的页面。名为 的单独页面`Districting.aspx`包括一个`asp button`，它`onClick()`调用 C# 中的一个函数，名为`DoneClicked()`。这是asp按钮控件：

```
<asp:Button ID="LinkButtonDone" CssClass="button button-yellow" runat="server" OnClick="DoneClicked" Text="Done" /> 
```

在后面的代码中，DoneClicked 函数：

```
protected void Doneclicked(object sender, EventArgs e)
    {
        // Some code here
        // Calling a function from Default page
    } 
```

我需要做的是在函数结束时，必须调用页面中`DoneClicked`的函数。`Default.aspx`

那么如何从`Default.aspx.cs`后面的 iframe 页面代码中访问函数呢？

谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:19:29.047

在下面试试对我有用

在代码后面

```
protected void Doneclicked(object sender, EventArgs e)
    {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "scriptid", "window.parent.location.href='ParentPageName.aspx';", true);  
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:47:58.813

您不能直接访问它（至少不是以可取的方式）。

您应该将 Default.aspx 中的公共代码抽象为一个可供两个页面使用的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:59:51.623

您不能直接执行此操作，但您可以使用 javascript 间接执行此操作。

因此，您在默认页面上创建了一个隐藏按钮，该按钮可以调用该`DoneClicked`函数：

```
<div style="display:none">
    <asp:Button ID="Done" runat="server" ClientIDMode="Static" OnClick="DoneClicked " />
</div> 
```

在加载的`iframe`地方`Districting.aspx`，您可以通过单击使用javascript的按钮来调用“DoneClicked”：

```
<script type="text/javascript">
   window.parent.document.getElementById('Done').click();
<script> 
```

请注意，`ClientIDMode="Static"`因为从其他页面您无法知道呈现的 id 是什么，所以保持静态。如果您不使用具有静态 id 的 dot net 4，那么您还需要使用 javascript 将呈现的 id 发送到页面，或其他方式来定位按钮。

另请注意`window.parent.`，从 iframe 中“可以看到”包含 iframe 的页面的控件的 DOM 结构。

# joomla - joomla 将 JTable 属性设置为 null

> ID：13492561
> 
> 赞同：2
> 
> 时间：2012-11-21T11:45:09.783
> 
> 标签：joomla, joomla2.5

到目前为止，我如何将 JTable 属性设置为 null 并将其保存为我的代码，但没有成功：

```
$table = JTable::getInstance($type='detalegrupy', $prefix='FootsalTable', $config = array());
$table->load($id);
$table->promotion = NULL;
$id_group = $table->id_group;
$table->store(); 
```

或如何将其恢复为默认值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:50:48.033

我找到了答案，

```
$table->store(TRUE); 
```

完成了工作。抱歉垃圾邮件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-29T15:08:03.633

编辑文件`administrator/components/YOUR_COMPONENT/tables/NAME_OF_YOUR_TABLE.php`并在表类中添加这个函数：

```
public function store($updateNulls = true)
{
    return parent::store($updateNulls);
} 
```

# c# - 如何在我的 winform 应用程序中获取 Excel 工作表的行和列 ID

> ID：13492562
> 
> 赞同：0
> 
> 时间：2012-11-21T11:45:20.697
> 
> 标签：c#, winforms, excel

在我的 Winform 应用程序中，我正在从 Excel 工作表中读取数据。

如果数据（即字符串）无效，我必须将其在 Excel 文件中的位置发送给用户（例如 A12）

任何人都可以帮助我，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:49:20.750

如果您正在使用互操作并且具有单元格的行和列，则可以使用以下内容：

```
Excel.Range range = (Excel.Range)CurrentWorksheetObject.Cells[row, col];
   string cellAddress = range.get_AddressLocal(false, false, Excel.XlReferenceStyle.xlA1, Type.Missing, Type.Missing); 
```

然后，您可以将该字符串传递给用户。

# c++ - 解析从 Microsoft excel 导出的 csv 文件

> ID：13492563
> 
> 赞同：1
> 
> 时间：2012-11-21T11:45:19.717
> 
> 标签：c++, csv, excel-2007

我有一个从 Microsoft excel 2007 导出的 csv 文件，其中包含以下几行：

```
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
2;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
000055555;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
5;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8
20;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8 
```

我使用[这个库](https://code.google.com/p/csv-parser-cplusplus/)来解析文件，但遇到了一些问题：

*   如果有空行，程序将崩溃。
*   如果有一个空字段，程序也会崩溃。

> ```
> ;12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8 // will crash
> 20;12;25;25;;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8 // will crash
> 
> 20;12;25;25; ;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8 // putting a space in empty field to help parser to not crash 
> ```

一个简单的程序：

```
#include <iostream>
#include <fstream>
#include <string>
#include "csv_parser.h"
#include <cstdio>

#define FMT "%-20.20s%-12.12s%-25.25s%-25.25s%-8.8s%-3.3s%-1.1s%-10.10s%-3.3s%-1.1s%-10.10s%-3.3s%-1.1s%-10.10s%-3.3s%-1.1s%-10.10s%-12.12s%-8.8s%-8.8s\n"

using namespace std;

int main(int argc, char **argv)
{
    std::string sCol1, sCol2, sCol3, sCol4, sCol5, sCol6, sCol7, sCol8, sCol9, sCol10, sCol11, sCol12, sCol13, sCol14, sCol15, sCol16, sCol17, sCol18, sCol19, sCol20;

    const char * filename = "Book2.csv";
    const char field_terminator = ';';
    const char line_terminator  = '\n';
    const char enclosure_char   = '"';

    csv_parser file_parser;

    /* Specify the file to parse */
    file_parser.init(filename);

    /* Here we tell the parser how to parse the file */
    file_parser.set_enclosed_char(enclosure_char, ENCLOSURE_OPTIONAL);
    file_parser.set_field_term_char(field_terminator);
    file_parser.set_line_term_char(line_terminator);
    unsigned int row_count = 1U;

    FILE *hFile = fopen("Book2.txt", "w"); 

    /* Check to see if there are more records, then grab each row one at a time */
    while(file_parser.has_more_rows())
    {
        unsigned int i = 0;

        /* Get the record */
        csv_row row = file_parser.get_row();

        fprintf(hFile, FMT, row[0].c_str(), row[1].c_str(), row[2].c_str(), row[3].c_str(), row[4].c_str(), row[5].c_str(), row[6].c_str(), row[7].c_str(), row[8].c_str(), row[9].c_str(), row[10].c_str(), row[11].c_str(), row[12].c_str(), row[13].c_str(), row[14].c_str(), row[15].c_str(), row[16].c_str(), row[17].c_str(), row[18].c_str(), row[19].c_str());
        row_count++;
    }

    fclose(hFile);
    return 0;
} 
```

在 Unix/Linux 中，解析器工作得很好，但在 Windows 中，库错误解析行/字段。是否有任何解析器支持可以解析以分号作为字段分隔符的 csv 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:53:28.263

一个可能的解决方案是使用[`boost::tokenizer`](http://www.boost.org/doc/libs/1_52_0/libs/tokenizer). 例如：

```
#include <string>
#include <iostream>
using std::cout;
using std::string;

#include <boost/tokenizer.hpp>
using boost::tokenizer;
using boost::escaped_list_separator;

typedef tokenizer<escaped_list_separator<char> > so_tokenizer;

int main()
{
    string a[] = { ";12;25;25;8;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8",
                   "20;12;25;25;;3;1;10;3;1;10;3;1;10;3;1;10;12;8;8" };

    for (int i = 0; i < 2; i++)
    {
        std::cout << a[i] << "\n";
        so_tokenizer tok(a[i], escaped_list_separator<char>('\\', ';', '\"'));
        for(so_tokenizer::iterator beg=tok.begin(); beg!=tok.end(); ++beg)
        {
            cout << "  tok=[" << *beg << "]\n";
        }
    }

    return 0;
} 
```

有关在线演示，请参见[http://ideone.com/aWwAXK](http://ideone.com/aWwAXK)。

使用[`std::ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)and[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)从文件中读取行并继续进行标记化。

# ios - NSURLConnection 没有调用连接：didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:

> ID：13492565
> 
> 赞同：1
> 
> 时间：2012-11-21T11:45:25.173
> 
> 标签：ios, nsurlconnection

这是我的代码

```
theDownloadConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

它正在调用这些 NSURLConnection 委托方法

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data;

- (void)connectionDidFinishLoading:(NSURLConnection *)connection; 
```

但它没有调用

```
- (void)connection:(NSURLConnection *)connection   didSendBodyData:(NSInteger)bytesWritten
                                                 totalBytesWritten:(NSInteger)totalBytesWritten
                                         totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite; 
```

当我这样做时，NSURLConnection 委托调用的这个方法

```
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

我不明白为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:03:31.350

didSendBodyData 仅在请求具有包含消息数据的正文时调用，例如 POST 请求。您很可能正在执行 GET。

来自苹果文档：

> connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite：作为请求的主体（消息数据）发送（例如在 http POST 请求中）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T12:14:34.943

那是因为它在*NSURLConnectionDataDelegate*中定义并且您正在设置*NSURLConnection* 委托。

# ios - ios中的CILineOverlay过滤器

> ID：13492569
> 
> 赞同：2
> 
> 时间：2012-11-21T11:45:38.633
> 
> 标签：ios, filter, ios6

如何在 ios 中创建类似 CILineOverlay 的过滤器

我知道它适用于 Mac OS

但我想在我的 ios App 上创建这个过滤器

有什么方法可以在 ios 中使用 Mac os CILineOverlay 过滤器

就像在 Mac OS 中创建效果并将其用作 ios 上的库

或任何其他方式？

# php - Wordpress Q 和 A 主题的最新帖子中的图像

> ID：13492570
> 
> 赞同：0
> 
> 时间：2012-11-21T11:45:46.393
> 
> 标签：php, wordpress

我正在使用 Instant-QA 主题，需要使用`widget`提出问题的用户的图像来更新最近的帖子。我在网站`functions.php`的子域中使用以下代码`wordpress`。目前它显示的是简单的帖子——下面的代码有什么猜测吗？

```
function print_requested_template_part() {
    // Respond only to requests from the same address... 
    if ( $_SERVER['REQUEST_METHOD'] == 'GET' && isset($_GET['including_template_part']) && isset($_GET['load_part']) && $_GET['load_part'] != '' ) {
        $part = $_GET['load_part'];
        $func = 'render_' . str_replace('-', '_', $part); // if you have declared a function called "render_footer_include", then "?load_part=footer_include"
        if ( function_exists($func) ) {
            // Allow for passing parameters to the function
            if ( isset($_GET['params']) ) {
                $params = $_GET['params'];
                $params = ( strpos($params, ',') !== false )? explode(',', $params) : array($params);
                call_user_func_array($func, $params);
            } else {
                call_user_func($func);
            }
        }
        exit; // if we don't exit here, a whole page will be printed => bad! it's better to have empty footer than a footer with the whole main site...
    }
}
add_action('init', 'print_requested_template_part', 1);

function render_my_recent_posts( $numberposts = 5 ) { ?>

    <ul>
    <?php
        $args = array( 'numberposts' => '5' );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ) {
            echo '<li><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> </li> ';
        }
    ?>
    </ul><?php
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:21:37.993

不要浪费时间沉迷于上面的代码。在插件下方使用并获得即时输出。

[http://wordpress.org/extend/plugins/recent-comments-with-avatars/](http://wordpress.org/extend/plugins/recent-comments-with-avatars/)使用这个插件

谢谢

# android - GingerBread (2.3) 上的 SherlockPreferenceActivity 中未显示图标

> ID：13492575
> 
> 赞同：3
> 
> 时间：2012-11-21T11:46:02.850
> 
> 标签：android, actionbarsherlock, android-preferences, android-2.3-gingerbread

我有一个使用 ActionBarSherlock 的应用程序，并且我有一个从 SherlockPreferenceActivity 延伸出来的首选项屏幕：

```
public class SettingsActivity extends SherlockPreferenceActivity 
```

我的偏好 XML 看起来像：

```
<Preference
    android:icon="@drawable/settings_prefs_call_settings"
    android:key="pref_btn_call_settings"
    android:summary="Change call settings"
    android:title="Call Settings" />

<Preference
    android:icon="@drawable/call_settings_prefs_my_phone_number"
    android:key="pref_btn_my_phone_number"
    android:summary="Change settings relating to your phone number"
    android:title="My Phone Number" /> 
```

当我在 Android 2.3 上运行它时，图标 (`@drawable/call_settings_prefs_my_phone_number`和`@drawable/settings_prefs_call_settings`) 永远不会显示在首选项屏幕上，但会在 ICS 和 JB 上正常显示。

谁能告诉我如何让图标显示在 GB 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:05:26.620

Preferences 的图标仅受 Api 11+ 支持。ActionBarSherlock 也是如此。

# java - 在 liferay 6.1.1 中部署主题没有任何变化

> ID：13492579
> 
> 赞同：2
> 
> 时间：2012-11-21T11:46:19.087
> 
> 标签：java, velocity, liferay-6, liferay-theme

我是 liferay CMS 的新手。我正在 liferay 6.1.1 中开发一个主题。我的问题是当我对主题进行任何更改时，它在部署后没有得到反映。请检查我是否在正确的流程中：

1.  首先新建 --> liferay 项目 --> 选定主题
2.  部署了创建 -diffs 文件夹的主题以及主题内 docroot 文件夹中剩余的所有文件夹。
3.  从我的主题的模板文件夹中复制 portlet_normal.vm 并进行更改。
4.  将 portlet_normal.vm 粘贴到我的主题中的 docroot(folder) --> _diffs(folder) --> templates(folder)。
5.  重新部署了主题，但没有反映任何变化。

我的 portlet_normal.vm 文件是：

```
<!DOCTYPE html>

#parse ($init)

<html class="#language("lang.dir")" dir="#language("lang.dir")" lang="$w3c_language_id">

<head>
    <title>$the_title - $company_name</title>

    $theme.include($top_head_include)
</head>

<body class="$css_class">

$theme.include($body_top_include)

#if ($is_signed_in)
    #dockbar()
#end

<div id="wrapper">
    <a href="#main-content" id="skip-to-content">#language("skip-to-content")</a>

    <header id="banner" role="banner">
        <div id="heading">
            <h1 class="site-title">
                <a class="$logo_css_class" href="$site_default_url" title="#language("go-to") $site_name">
                    <img alt="$logo_description" height="$site_logo_height" src="$site_logo" width="$site_logo_width" />
                </a>

                #if ($show_site_name)
                    <span class="site-name" title="#language("go-to") $site_name">
                        $site_name
                    </span>
                #end
            </h1>

            <h2 class="page-title">
                <span>$the_title</span>
            </h2>
        </div>

        #if (!$is_signed_in)
            <a href="$sign_in_url" id="sign-in" rel="nofollow">$sign_in_text</a>
        #end

        #if ($has_navigation || $is_signed_in)
            #parse ("$full_templates_path/navigation.vm")
        #end
    </header>

    <div id="content">
        **/*<nav class="site-breadcrumbs" id="breadcrumbs">
            <h1>
                <span>#language("breadcrumbs")</span>
            </h1>
            #breadcrumbs()
        </nav>*/**

        #if ($selectable)
            $theme.include($content_include)
        #else
            $portletDisplay.recycle()

            $portletDisplay.setTitle($the_title)

            $theme.wrapPortlet("portlet.vm", $content_include)
        #end
    </div>

    <footer id="footer" role="contentinfo">
        <p class="powered-by">
            #language("powered-by") <a href="http://www.liferay.com" rel="external">Liferay</a>
        </p>
    </footer>
</div>

$theme.include($body_bottom_include)

</body>

$theme.include($bottom_include)

</html> 
```

实际上我想隐藏主页中显示的面包屑。所以我已经评论了 portlet_normal.vm 中的特定部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:22:01.613

您有两种可能性：
如果您正在开发，您可以将门户设置为开发模式，并将其添加
`include-and-override=portal-developer.properties`
到您的 portal-ext.properties 中，该属性应该位于门户根目录下。
如果您在生产中，则应禁用此选项，您应检查以下内容

尝试打开 SDK 中主题文件夹下的 XML 文件 build-common-theme.xml 并删除所有`preservelastmodified="true"`（或将它们设置为 false）。

preservelastmodified，如果为 true，则不会更新主题项目中的文件时间戳。因此，您的应用程序服务器不会检测到更改并重新部署主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:30:38.597

从第 1 步开始，您似乎正在使用 Eclipse 创建 Liferay 主题项目。当您创建项目时，您将获得

![在此处输入图像描述](../Images/ab4c23ece80d68457b981963d5e5a654.png)

现在您需要做的就是更改 _diffs 目录中的文件并使用 ant 文件 build.xml 构建主题，其余部分将由构建文件处理。我不确定为什么需要第 3 步和第 4 步。

如果问题仍然存在，需要注意的几点是：

> velocity.engine.resource.manager.cache.enabled=false

在您的 portal-ext.properties 中设置此属性并重新启动服务器。

# ios - 我们什么时候使用 ACAccountStore 类的 saveAccount:(ACAccount *)account？

> ID：13492580
> 
> 赞同：7
> 
> 时间：2012-11-21T11:46:18.093
> 
> 标签：ios, objective-c, iphone, facebook

请澄清一下我们什么时候使用这种方法？ `- (void)saveAccount:(ACAccount *)account withCompletionHandler:(ACAccountStoreSaveCompletionHandler)completionHandler`

据我所知，我们可以通过 OAuth 访问该帐户，但我们没有获得用户的凭据。那么我们如何创建一个帐户呢？我发现 ACAccount 只有一种创建方法： `- (id)initWithAccountType:(ACAccountType *)type` 当我们以这种方式创建帐户时，实际会发生什么？我们现在可以保存它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T14:19:09.717

好的，我终于找到了有关它的信息。考虑这种情况：我们的应用程序已经被用户授权，并且我们已经获得了访问令牌和秘密。现在我们要支持新的 iOS 6 功能并在设置中创建 twitter（例如）帐户。为此，我们需要将这些令牌迁移到中央帐户存储。就是这样：

```
- (void)storeAccountWithAccessToken:(NSString *)token secret:(NSString *)secret {
    //We start creating an account by creating the credentials object
    ACAccountCredential *credential = [[ACAccountCredential alloc] initWithOAuthToken:token tokenSecret:secret];
    ACAccountType *twitterAcctType =[self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    ACAccount *newAccount = [[ACAccount alloc] initWithAccountType:twitterAcctType];
    //Here we assign credentials and now can save account
    newAccount.credential = credential;

    [self.accountStore saveAccount:newAccount withCompletionHandler:^(BOOL success, NSError *error) {

        if (success) {
            NSLog(@"the account was saved!");
        }
        else {
            //Handle error here
        }
    }];
} 
```

有关它的更多信息，请在此处阅读[如何迁移令牌](https://dev.twitter.com/docs/ios/migrating-tokens-core-accounts)

# css - 在jquery mobile中设置页眉和页脚的有效方法

> ID：13492582
> 
> 赞同：0
> 
> 时间：2012-11-21T11:46:23.757
> 
> 标签：css, jquery-mobile

我的 jquery 移动页面有一个很长的滚动列表，当我向下滚动列表时，它们有固定的页眉和页脚，滚动时页眉和页脚消失，​​滚动停止时它们出现。无论如何要在屏幕的顶部和底部进行页眉和页脚的硬核固定？谢谢。

注：我用过`data-position=fixed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:49:29.473

试试这个： [移动浏览器中的固定定位](http://bradfrostweb.com/blog/mobile/fixed-position/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:49:47.973

Afaik，data-position=fixed 转换为 position:fixed，恐怕这个刷新“错误”是某些移动浏览器的限制。

# python - 找出 PyObject 方法需要多少个参数

> ID：13492585
> 
> 赞同：1
> 
> 时间：2012-11-21T11:46:30.773
> 
> 标签：python, python-c-api, pyobject

我们可以使用以下方法提取指向 python 方法的 PyObject

```
PyObject *method = PyDict_GetItemString(methodsDictionary,methodName.c_str()); 
```

我想知道该方法需要多少个参数。所以如果函数是

```
def f(x,y):
    return x+y 
```

我如何找出它需要 2 个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:04:00.327

跟随乔恩提供的链接。假设您不想（或不能）在您的应用程序中使用 Boost，以下应该为您提供数字（很容易改编自[How to find the number of parameters to a Python function from C?](https://stackoverflow.com/questions/1117164/how-to-find-the-number-of-parameters-to-a-python-function-from-c)）：

```
PyObject *key, *value;
int pos = 0;
while(PyDict_Next(methodsDictionary, &pos, &key, &value)) {
    if(PyCallable_Check(value)) {
        PyObject* fc = PyObject_GetAttrString(value, "func_code");
        if(fc) {
            PyObject* ac = PyObject_GetAttrString(fc, "co_argcount");
            if(ac) {
               const int count = PyInt_AsLong(ac);
               // we now have the argument count, do something with this function
               Py_DECREF(ac);
            }
            Py_DECREF(fc);
        }
    }
} 
```

如果您使用的是 Python 2.x，那么上述内容肯定有效。在 Python 3.0+ 中，您似乎需要在上面的代码段中使用`"__code__"`而不是`"func_code"`。

我很欣赏无法使用 Boost（我的公司不会允许它用于我最近一直在从事的项目），但总的来说，如果可以的话，我会尽量使用它，因为我发现当你尝试做这样复杂的事情时，Python C API 通常会变得有点繁琐。

# java - 滑动标签 - 两个带有 listview + 适配器的标签

> ID：13492587
> 
> 赞同：0
> 
> 时间：2012-11-21T11:46:34.687
> 
> 标签：java, android

我尝试在我的 android 项目中实现一个带有 SWIPE 选项卡的应用程序栏。假设我有两个选项卡（tab1 和 tab2）。我想在这些选项卡上显示不同的内容。（实际上这就是我想做的所有事情）。

Tab1 包括一个列表，Tab2 包括“另一个”列表和一些文本。是否可以为两个选项卡使用两个“活动”？（这就是我现在正在做的）

我使用自定义适配器来设置列表内容。

```
 final ListView lv = (ListView)findViewById(R.id.tab1_list);
 lv.setAdapter(new CustomListAdapter(this, tab1Items)); 
```

但我无法正确显示标签内容。它们要么根本不显示，要么显示相同的内容。

有没有人对我有一些好主意，或者一些小代码示例，如何使用带有选项卡和列表的应用栏（使用适配器）？

我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:30:07.520

这是您想要“滑动标签”的示例：

```
<?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        <TabHost
            android:id="@android:id/tabhost"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
            <LinearLayout
                android:orientation="vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                >
                <TabWidget
                    android:id="@android:id/tabs"
                    android:orientation="horizontal"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="0"
                    />

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="0dp"
                    android:layout_height="0dp"
                    android:layout_weight="0"/>

                <android.support.v4.view.ViewPager
                    android:id="@+id/viewpager"
                    android:layout_width="fill_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    />
            </LinearLayout>
        </TabHost>
    </LinearLayout> 
```

定义 PagerAdapter ：

```
package com.andy.fragments.viewpager;

import java.util.List;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

public class PagerAdapter extends FragmentPagerAdapter {

    private List<Fragment> fragments;

    public PagerAdapter(FragmentManager fm, List<Fragment> fragments) {
        super(fm);
        this.fragments = fragments;
    }

    @Override
    public Fragment getItem(int position) {
        return this.fragments.get(position);
    }

    @Override
    public int getCount() {
        return this.fragments.size();
    }
} 
```

定义 Tab FragmentActivity：

```
package com.andy.fragments.tabs;

import java.util.HashMap;
import java.util.List;
import java.util.Vector;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.widget.TabHost;
import android.widget.TabHost.TabContentFactory;

import com.andy.R;
import com.andy.fragments.viewpager.PagerAdapter;

public class TabsViewPagerFragmentActivity extends FragmentActivity implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {

    private TabHost mTabHost;
    private ViewPager mViewPager;
    private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabsViewPagerFragmentActivity.TabInfo>();
    private PagerAdapter mPagerAdapter;

    private class TabInfo {
         private String tag;
         private Class<?> clss;
         private Bundle args;
         private Fragment fragment;
         TabInfo(String tag, Class<?> clazz, Bundle args) {
             this.tag = tag;
             this.clss = clazz;
             this.args = args;
         }

    }

    class TabFactory implements TabContentFactory {

        private final Context mContext;

        public TabFactory(Context context) {
            mContext = context;
        }

        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }

    }

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tabs_viewpager_layout);

        this.initialiseTabHost(savedInstanceState);
        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); 
        }

        this.intialiseViewPager();
    }

    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); 
        super.onSaveInstanceState(outState);
    }

    private void intialiseViewPager() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Tab1Fragment.class.getName()));
        fragments.add(Fragment.instantiate(this, Tab2Fragment.class.getName()));
        fragments.add(Fragment.instantiate(this, Tab3Fragment.class.getName()));
        this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);

        this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
        this.mViewPager.setAdapter(this.mPagerAdapter);
        this.mViewPager.setOnPageChangeListener(this);
    }

    private void initialiseTabHost(Bundle args) {
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();
        TabInfo tabInfo = null;
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab1").setIndicator("Tab 1"), ( tabInfo = new TabInfo("Tab1", Tab1Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab2").setIndicator("Tab 2"), ( tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab3").setIndicator("Tab 3"), ( tabInfo = new TabInfo("Tab3", Tab3Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        mTabHost.setOnTabChangedListener(this);
    }

    private static void AddTab(TabsViewPagerFragmentActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {

        tabSpec.setContent(activity.new TabFactory(activity));
        tabHost.addTab(tabSpec);
    }

    public void onTabChanged(String tag) {

        int pos = this.mTabHost.getCurrentTab();
        this.mViewPager.setCurrentItem(pos);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {

    }

    @Override
    public void onPageSelected(int position) {

        this.mTabHost.setCurrentTab(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:11:17.510

为什么不使用布局方法？创建一个布局，其中放置一个选项卡主机，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:android1="http://schemas.android.com/apk/res/android"
android1:id="@android:id/tabhost"
android1:layout_width="match_parent"
android1:layout_height="match_parent" >

<TabWidget
    android1:id="@android:id/tabs"
    android1:layout_width="match_parent"
    android1:layout_height="wrap_content" >
</TabWidget>

<FrameLayout
    android1:id="@android:id/tabcontent"
    android1:layout_width="match_parent"
    android1:layout_height="match_parent" >

    <LinearLayout
        android1:id="@+id/tab1"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent" >
    </LinearLayout>

    <LinearLayout
        android1:id="@+id/tab2"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent" >
    </LinearLayout>

    <LinearLayout
        android1:id="@+id/tab3"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent" >
    </LinearLayout>
</FrameLayout> 
```

因此，在 ID 为*tab1*的 LinearLayout 中，您可以添加第一个列表（等等）。

# android - Android：将 AsyncTask 与 View 结合使用（画布）

> ID：13492595
> 
> 赞同：1
> 
> 时间：2012-11-21T11:46:59.150
> 
> 标签：android, view, android-asynctask, android-canvas

我正在尝试从数组中绘制不同的随机值，但是将它们与线链接起来，因此它看起来像 continue 函数的值。我用这个应用程序做得很好：

```
package android.nacho.Graphic2D;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;

import java.util.Random;//included random

public class Graphic2D extends Activity{

    DrawView drawView;

    //private Button btnAsyncTask;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);           

int randomInt;

                    //note a single Random object is reused here
                    Random randomGenerator = new Random();
                    int Maxsize=800;
                    int[] randomNumbers= new int[Maxsize];

                    for (int idx = 1; idx < Maxsize-1; ++idx){

                        randomInt = randomGenerator.nextInt(100);
                        randomNumbers[idx]=randomInt;

                        System.out.println("Random number: "+randomInt);
                    }

                         drawView = new DrawView(Graphic2D.this, randomNumbers, Maxsize);
                         drawView.setBackgroundColor(Color.WHITE);
                         setContentView(drawView);

    }

}

package android.nacho.Graphic2D;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

public class DrawView extends View {
    Paint paint = new Paint();
    int[] values;
    int Size, Offset;

    public DrawView(Context context,  int[] datainBytes, int size) {
        super(context);
        values=datainBytes;
        Size=size;
        paint.setColor(Color.BLACK);

    }

    @Override
    public void onDraw(Canvas canvas) {

        int cont2;

        for(int cont=0; cont<Size-(1); cont++)
        {
            cont2=cont+1;
            canvas.drawLine(cont, 500-(values[cont]) , cont+1, 500-(values[cont2]), paint);         

        }

    }

} 
```

问题是，现在我想画更多的点，但是以一种动态的方式，所以新值是最右边的一个，其余的值向左移动一个像素，而最左边的一个像素就不要了不出现。我计划在主 Activity 中使用一个循环来实现这一点，因此在每次迭代中，随机值都相同，但最后一个是相同的，而其他随机值在数组中向左移动了一个位置。最终效果应该类似于视频。

但是有一个问题，App 不动态地绘制这个，它只是绘制循环的最后一次迭代。¿ 谁能帮我解决这个问题？

我正在考虑为此使用 AsyncTask，在背景中生成点并将结果发送到更新中，所以请输入，但脚本是一团糟，无法正常工作，所以我宁愿不上传它。

非常感谢您的任何建议。

# c# - PixelSense Surface 2.0 - 将 UserControl 拖放到 ScatterView 上，反之亦然

> ID：13492598
> 
> 赞同：2
> 
> 时间：2012-11-21T11:47:38.247
> 
> 标签：c#, wpf, xaml, pixelsense

以前我尝试将对象从 a 拖放`LibraryContainer`到 a 上`ScatterView`，反之亦然，这很简单，默认情况下`LibraryContainer`,`LibraryStack`和`LibraryBar`支持拖放事件。结合`DragDropScatterView.cs`Surface 2.0 SDK 提供的 ShoppingCart 示例非常简单。

现在我希望能够将 a 拖放`UserControl`到`ScatterView`4 上，反之亦然，即像这样：http: [//goo.gl/zZIdg](http://goo.gl/zZIdg)。

根据我的研究，有一种方法可以做到这一点，可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ff727736.aspx](http://msdn.microsoft.com/en-us/library/ff727736.aspx)。但是，这里他们不使用`DragDropScatterView.cs`，它以不同的方式完成。您有两个`ObservableCollections`（一个源和一个目标）， the`ScatterViewItems`和`SurfaceListBox`.

在这个示例中我不喜欢的一件事是，`ScatterViewItems`可以拖动的 并没有真正的缩放属性，因为当用户单击 时`ScatterViewItem`，它会创建视觉样式并隐藏`ScatterViewItem`并且当您放下它时，它会更新坐标和方向，`ScatterViewItem`并使其可见。我决定不走这条路，因为我想要一个正常的`ScatterViewItem`行为。

我想要做的基本事情是拥有，例如 a `Label`，并且在 a 侧，`ScatterView`并且能够拖动它`Label`（创建一个视觉光标 - 已经完成）并将其放在 上`ScatterView`，创建`ScatterViewItem`具有相同属性的a原创`Label`。我尝试使用 the 来执行此操作，`DragDropScatterView.cs`但是当我使用`Label`my `droppingCursor.Data`(on the `DragDropScatterView.cs`) is`null`时，我认为发生这种情况是因为`draggedElement.DataContext`(on the `LabelView.xaml.cs`) is also `null`，但是`null`当我使用`SurfaceListBox`.

我在这里提供了一个代码示例：http: [//sdrv.ms/VDuHq5](http://sdrv.ms/VDuHq5)。在`SurfaceWindow1.xaml`里面有`TagVisualization`和 的容器，在`ScatterView`里面`LabelView.xaml`调用了``TagVisualization`。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:54:23.633

我设法解决了我的问题，这里简要解释一下我是如何做到的：

我搜索并找到[了这个](http://goo.gl/N0IjW)。然后我将它`SurfaceListBox`与这些拖放事件一起使用，并将其与`DragDropScatterView`类结合起来，因此每次`ScatterViewItem`创建新对象时，我都会对我的自定义对象进行正常`ScatterView`控制。使用这种方法，您还必须创建一个视觉光标，即当您从`SurfaceListBox`.

令我困惑的是 Serge Calderara（来自 MSDN Surface 论坛）帮助我解决的问题是，我一直试图将这些拖放事件与一个`Label`例子或一个`UserControl`偶数相关联，但我看错了方式。在大多数情况下，对您来说最好的解决方案是拥有一个容器，在该容器中放置`UserControls`您想要的，并且您只将拖放事件与该容器相关联，而不是与每个单独的项目相关联。考虑到这一点，把东西放在一起很容易，我创建了我的`UserControls`并用 an 填充了`SurfaceListBox`（这是我的容器），`ItemTemplateSelector`我使用了相同的 Selector `ScatterView`（即从容器中接收项目）。在我的对象类中，我刚刚定义了一个变量来保存哪种类型`UserControl`我将拥有并`DataTemplate`相应地返回。

有了这个，我用两个自定义的用户控件创建了一个`SurfaceListBox`，我可以将它们拖放到 a`ScatterView`和返回。可以在此处找到具有 MVVM 模式的工作示例：http: [//sdrv.ms/10SjKaH](http://sdrv.ms/10SjKaH)。

我希望它可以帮助别人，它帮助了我。如果您有任何问题或建议，请随时询问/告知。

# wso2 - WSO2 ESB：所有样本都不起作用

> ID：13492599
> 
> 赞同：0
> 
> 时间：2012-11-21T11:47:41.653
> 
> 标签：wso2, wso2esb

问题：我无法运行 WSO2 ESB（版本 4.5.1）的任何示例 详细信息：按照安装指南和 ESB 示例设置完成配置 WSO2 ESB 后。我可以通过以下链接访问 ESB 控制台：

`https://localhost:9443/carbon/`

它运行良好，但是当我尝试通过命令运行第一个示例时：

```
ant stockquote
-Daddurl=http://127.0.0.1:9000/services/SimpleStockQuoteService
-Dtrpurl=http://localhost:8280 -Dsymbol=IBM -Dmode=quote 
```

我得到了错误代码：

> ERROR_CODE = 101504
> 
> ERROR_MESSAGE = 连接超时对于：127.0.0.1:9000 对于请求：Axis2Request [消息 ID：urn:uuid:0b3c9526-289f-4e65-a525-93ecb32f323d] [状态已完成：假]

我认为问题可能与有关，`axis2Server`但我不确定，因为我确实遵循了说明

问题：

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:07:39.590

It seems StockQuote service not visible to the Axis client. can you check whether you can see stockquote service wsdl once you started esb and axis2 server properly.link [1] will open stockquote service wsdl.

```
1\. http://127.0.0.1:9000/services/SimpleStockQuoteService?wsdl 
```

# jquery - 时间选择器滑块未获得设定值

> ID：13492602
> 
> 赞同：2
> 
> 时间：2012-11-21T11:47:48.513
> 
> 标签：jquery, datepicker, timepicker

您好，我使用 timepicker.js 创建了一个带有小时和分钟滑块选择的日历。一切正常，但是当我保存数据时，假设我选择了 14-10-2012 12:33PM，当我在输入字段中调用该值时它会显示它，但是当我单击输入以显示时间选择器时对话框中，时间和滑块始终为零。我可以自己编码以显示正确的时间，但我相信时间选择器中应该有一个选项可以做到这一点。

```
 ![function Timepicker() {
        this.regional = \[\]; // Available regional settings, indexed by language code
        this.regional\[''\] = { // Default regional settings
            currentText: 'Now',
            closeText: 'Done',
            ampm: false,
            amNames: \['AM', 'A'\],
            pmNames: \['PM', 'P'\],
            timeFormat: 'hh:mm tt',
            timeSuffix: '',
            timeOnlyTitle: 'Choose Time',
            timeText: 'Time',
            hourText: 'Hour',
            minuteText: 'Minute',
            secondText: 'Second',
            millisecText: 'Millisecond',
            timezoneText: 'Time Zone'
        };
        this._defaults = { // Global defaults for all the datetime picker instances
            showButtonPanel: true,
            timeOnly: false,
            showHour: true,
            showMinute: true,
            showSecond: false,
            showMillisec: false,
            showTimezone: false,
            showTime: true,
            stepHour: 1,
            stepMinute: 1,
            stepSecond: 1,
            stepMillisec: 1,
            hour: 0,
            minute: 0,
            second: 0,
            millisec: 0,
            timezone: '+0000',
            hourMin: 0,
            minuteMin: 0,
            secondMin: 0,
            millisecMin: 0,
            hourMax: 23,
            minuteMax: 59,
            secondMax: 59,
            millisecMax: 999,
            minDateTime: null,
            maxDateTime: null,
            onSelect: null,
            hourGrid: 0,
            minuteGrid: 0,
            secondGrid: 0,
            millisecGrid: 0,
            alwaysSetTime: true,
            separator: ' ',
            altFieldTimeOnly: true,
            showTimepicker: true,
            timezoneIso8609: false,
            timezoneList: null,
            addSliderAccess: false,
            sliderAccessArgs: null
        };][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T12:23:51.980

要在时间范围内仅使用时间，请使用 $.timepicker.timeRange()：

```
var startTimeTextBox = $('#range_example_3_start');
var endTimeTextBox = $('#range_example_3_end');

$.timepicker.timeRange(
    startTimeTextBox,
    endTimeTextBox,
    {
        minInterval: (1000*60*60), // 1hr
        timeFormat: 'HH:mm',
        start: {}, // start picker options
        end: {} // end picker options
    }
); 
```

# python - 具有多个装饰器的芹菜任务不自动注册任务名称

> ID：13492603
> 
> 赞同：13
> 
> 时间：2012-11-21T11:47:51.600
> 
> 标签：python, celery, decorator, django-celery, python-decorators

我有一个看起来像这样的任务

```
from mybasetask_module import MyBaseTask

@task(base=MyBaseTask)
@my_custom_decorator 
def my_task(*args, **kwargs):
    pass 
```

我的基本任务看起来像这样

```
from celery import task, Task

class MyBaseTask(Task):
    abstract = True
    default_retry_delay = 10 
    max_retries = 3 
    acks_late = True 
```

我遇到的问题是芹菜工人正在使用名称注册任务

```
'mybasetask_module.__inner' 
```

当我从任务中删除 @my_custom_decorator 或者像这样为任务提供显式名称时，任务注册良好（即包+模块+函数）

```
from mybasetask_module import MyBaseTask

@task(base=MyBaseTask, name='an_explicit_task_name')
@my_custom_decorator 
def my_task(*args, **kwargs):
    pass 
```

这种行为是预期的吗？当我有多个装饰器但没有明确的任务名称时，我是否需要做一些事情以便在第一种情况下使用默认的自动注册名称注册我的任务？

谢谢，

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-21T11:51:42.643

使用[`functools.wraps()`装饰器](http://docs.python.org/2/library/functools.html#functools.wraps)确保返回的包装器`my_custom_decorator`具有正确的名称：

```
from functools import wraps

def my_custom_decorator(func):
    @wraps(func)
    def __inner():
        return func()
    return __inner 
```

任务名称取自`task`装饰器包装的函数调用，但通过在两者之间插入装饰器，您`task`可以`__inner`改为使用包装函数。装饰器将`functools.wraps()`所有必要的元数据复制`func`到包装器中，以便`task()`获取正确的名称。

# junit - powermock @PrepareForTest 不适用于通配符值

> ID：13492604
> 
> 赞同：2
> 
> 时间：2012-11-21T11:47:54.460
> 
> 标签：junit, annotations, powermock

**版本：** powermock-core 1.4.12

**问题：** 根据[API 文档](http://powermock.googlecode.com/svn/docs/powermock-1.4.12/apidocs/org/powermock/core/classloader/annotations/PrepareForTest.html)，@PrepareForTest 应该能够采用通配符，例如：

@PrepareForTest("com.smin.*")

但就我而言，它只是不编译，编译错误：

*`Type mismatch: cannot convert from String to Class<?>[]`*

我看了一下 PrepareForTest 的源代码，我只是不明白这个注解如何将通配符作为它的值。有任何想法吗？

```
@Target( { ElementType.TYPE, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
public @interface PrepareForTest {
    Class<?>[] value() default IndicateReloadClass.class;

    String[] fullyQualifiedNames() default "";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T21:07:54.233

是的 - 文档似乎与现实不符。尝试：

```
@PrepareForTest(fullyQualifiedNames={"com.smin.*"}) 
```

如果您想深入挖掘，我*认为*通配符名称的解析将发生在`MockClassLoader`或其超类中。`DeferSupportingClassLoader`

# wpf - 为什么我使用 Label 时 Visual Studio 会在 XAML 中提示错误？

> ID：13492605
> 
> 赞同：5
> 
> 时间：2012-11-21T11:47:55.573
> 
> 标签：wpf, xaml, visual-studio-2012

我使用 Visual Studio 2012，并编写了一些 XAML(of WPF) 代码，就像这样：

```
<StackPanel>
    <Label Target="txt">UserName:</Label>
    <TextBox Name="txt"></TextBox>
</StackPanel> 
```

然后，编译失败。它对**Label related-code**说，

> 值不能为空。参数名称：上下文。

我不知道它的意思。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:03:43.157

这是一个设计者独有的错误。代码应该可以毫无问题地编译。

**编辑：**此异常是由于 Silverlight 不支持此语法：`Target="txt"`。此语法仅受 WPF 支持。这是设计器中的一个已知错误，即使您的项目是 WPF 项目，也是由 MS 希望支持 Silverlight 的设计时检查引起的。

如果您不希望出现异常，则必须使用完整的绑定语法（由 WPF 和 Silverlight 支持）

```
<Label Target="{Binding ElementName=txt}">UserName:</Label> 
```

# rtc - 如何将快照组件加载到工作区

> ID：13492608
> 
> 赞同：1
> 
> 时间：2012-11-21T11:48:04.430
> 
> 标签：rtc

我正在将流的快照添加到存储库工作区。

如何将快照组件加载到存储库中？

目前我只有带有快照的存储库工作区，但工作区还应该包含快照的组件。

要将快照添加到我使用的存储库：

```
scm snapshot promote -r <repositry url> <repository workspace> <snapshot> 
```

也许我应该使用不同的 scm 命令将快照的组件而不是快照本身添加到存储库？

我使用了`'<repository workspace name' & 'snapshot name'`. 我不需要使用他们的身份证。

没有返回错误，我可以查看创建的快照： ![在此处输入图像描述](../Images/615e534f14beda103f720bc00f26196f.png)

但是此快照的组件不会添加到存储库工作区。

我想我解决了这个问题。运行命令（包括 --stream 参数）：

```
scm create workspace -r <repository url> <repository workspace> --stream <stream name> 
```

创建工作区并将组件添加到这个新创建的工作区。刚刚创建的工作空间中的这些组件具有与流中定义的相同基线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:29:18.113

[您所做](https://stackoverflow.com/questions/13458554/how-to-create-a-repository-workspace-which-contains-all-of-the-components-of-a-s)的是在流上创建快照（以链接所有组件）

当您将快照添加到存储库工作区时，您会升级快照：

```
scm snapshot promote -r <repositry url> <repository workspace> <snapshot> 
```

您提到的应该可以工作（不确定您是否需要 repo 工作区的 id 以及快照的 id）

实际上，[Ralf Hohendorf](https://stackoverflow.com/users/3894714/ralf-hohendorf)评论说**此命令 ( `scm snapshot promote`) 仅将快照从流移动到存储库工作区。**
快照*不会*被使用，只会被*移动*。

* * *

不过，这个想法是填充另一个空流，以便 repo 工作区反映组件列表。

如果组件已经在流中，那么[正如 OP 所提到的](https://stackoverflow.com/questions/13492608/how-to-load-snapshot-components-into-workspace/25053918#comment18467115_13492608)，这就足够了：

```
scm create workspace -r <repository url> <repository workspace> --stream <stream name> 
```

在这种情况下无需创建或提升快照（因为流已经反映了您想要的组件）。

您应该在工作区的“组件”部分看到这些组件。
请注意，您仍然需要*加载*该 repo 工作区才能查看磁盘上的文件。

# bash - tcpdump：仅输出源地址和目标地址

> ID：13492611
> 
> 赞同：7
> 
> 时间：2012-11-21T11:48:36.310
> 
> 标签：bash, sed, awk, tcpdump

**问题描述：**

我只想打印来自 tcpdump[1] 的源地址和目标地址。

有一个可行的解决方案，但相信它可以改进很多。一个捕获 5 个数据包的示例，就像我正在寻找的示例一样：

```
tcpdump -i eth1 -n -c 5 ip | \
cut -d" " -f3,5 | \
sed -e 's/^\([0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\)\..* \([0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\).*$/\1 > \2/' 
```

**问题：**

这可以以更简单的方式完成吗？性能也是这里的一个问题。

[1] 测试的一部分是否正确定义了 snort home_net，或者我们是否看到 home_net 中未定义流量。

* * *

**解决方案：**

好的，感谢所有回复此问题的人。有两个与答案相关的问题，一个是不同 linux 版本的兼容性，第二个是速度。

这是我做的速度测试的结果。首先是grep版本：

```
time tcpdump -l -r test.dmp -n ip 2>/dev/null | grep -P -o '([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+).*? > ([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)' | grep -P -o '[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+' | xargs -n 2 echo >/dev/null

real    0m5.625s
user    0m0.513s
sys     0m4.305s 
```

然后是 sed 版本：

```
time tcpdump -n -r test.dmp ip | sed -une 's/^.* \(\([0-9]\{1,3\}\.\?\)\{4\}\)\..* \(\([0-9]\{1,3\}\.\?\)\{4\}\)\..*$/\1 > \3/p' >/dev/null
reading from file test.dmp, link-type EN10MB (Ethernet)

real    0m0.491s
user    0m0.496s
sys     0m0.020s 
```

最快的是 awk 版本：

```
time tcpdump -l -r test.dmp -n ip | awk '{ print gensub(/(.*)\..*/,"\\1","g",$3), $4, gensub(/(.*)\..*/,"\\1","g",$5) }' >/dev/null
reading from file test.dmp, link-type EN10MB (Ethernet)

real    0m0.093s
user    0m0.111s
sys     0m0.013s 
```

不幸的是，我无法测试它们的兼容性，但是由于 gensub 功能，awk 需要 gnu awk 才能工作。无论如何，这三种解决方案都适用于我测试过的两个平台。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T12:51:07.820

这是一种使用方法`GNU awk`：

```
tcpdump -i eth1 -n -c 5 ip | awk '{ print gensub(/(.*)\..*/,"\\1","g",$3), $4, gensub(/(.*)\..*/,"\\1","g",$5) }' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:36:27.870

尝试这个：

```
 tcpdump -i eth1 -n -c 5 ip 2>/dev/null | sed -r 's/.* ([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+).* > ([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+).*/\1 > \2/' 
```

如果从 .sh 脚本运行，请记住根据需要转义 \1 和 \2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:59:07.797

＆这里是一个 grep 唯一的解决方案：

```
tcpdump -l -i eth1 -n -c 5 ip 2>/dev/null | grep -P -o '([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+).*? > ([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)' | grep -P -o '[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+' | xargs -n 2 echo 
```

请注意`-l`，如果您不想限制使用`-c`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T13:51:22.907

**警告**您必须使用*无缓冲*或*行缓冲*输出来监视另一个命令的输出，例如`tcpdump`.

但是您的命令似乎是正确的。

为简化起见，您可以：

```
tcpdump -i eth1 -n -c 5 ip | 
  sed -une 's/^.* \(\([0-9]\{1,3\}\.\?\)\{4\}\)\..* \(\([0-9]\{1,3\}\.\?\)\{4\}\)\..*$/\1 > \3/p' 
```

**注意在`u`**`-c 5`没有tcpdump的情况下有用的**开关**

```
tcpdump -ni eth1 ip | 
  sed -une 's/^.* \(\([0-9]\{1,3\}\.\?\)\{4\}\)\..* \(\([0-9]\{1,3\}\.\?\)\{4\}\)\..*$/\1 > \3/p' 
```

# python - Python 正则表达式搜索时间过长

> ID：13492612
> 
> 赞同：0
> 
> 时间：2012-11-21T11:48:39.443
> 
> 标签：python, regex

以下正则表达式比较耗时过长（> 2 分钟）。

```
re.search('^(\S+){2,50}/(\S+){2,50}\-trailing/$', 'test-request/this-is-crashing/') 
```

删除长度限制 ({2-50})，解决了这个问题。

模式中的错误是什么？

环境：Ubuntu i5 4GB Python 2.7.3

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T11:49:40.923

```
(\S+){2,50} 
```

你确定你需要这个吗？`\S+`表示出现一次或多次。然后你想要它出现 2-50 次？

为什么不：

```
\S{2,50} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:00:47.810

为什么不让它更简单...

```
re.match('([^/]+)/([^/]+)-trailing/', 'test-request/this-is-crashing/') 
```

虽然在这种情况下它没有找到任何东西......

我想您只想捕获与此类似的字符串：

`'<SOME-TEXT>/<SOME-TEXT>-trailing/'`

# java - Java：HTTP异步非阻塞远程日志服务器？

> ID：13492614
> 
> 赞同：0
> 
> 时间：2012-11-21T11:48:44.857
> 
> 标签：java, http

我正在寻找一种实现简单 API 以接收日志消息的方法（针对各种系统中的各种事件）。

我们已经得出结论，对于需要发布到此服务器的不同代码库和系统，HTTP 获取请求是最开放的（进入门槛最低）。

服务器本身需要提供一个 HTTP GET api，我将在其中发送消息，例如`logging.internal/?system=email&message=An email failed`

但是，我们希望这是非阻塞的，因此任何应用程序都可以向该服务器发送信息，而不必等待（不会减慢任何生产系统的速度）。

有谁知道在 Java 中实现这一点的任何框架或适当的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:59:56.037

在java中，对于服务器，您可以使用任何JAX-RS的实现来实现Restful部分，并且在处理消息时，只需调用一个异步EJB方法（[http://docs.oracle.com/javaee/6/tutorial/ doc/gkkqg.html](http://docs.oracle.com/javaee/6/tutorial/doc/gkkqg.html)），它将进行更长的处理。这将允许 RESTful 请求尽快返回。

在这种情况下，唯一的阻塞部分将是 http 请求/响应。

如果您想减少阻塞，也可以使用异步方法（或者如果使用 Java EE 5，则使用消息驱动 Bean）从客户端发出 RESTful 请求。

# c# - C# 动态 getter 和 setter 取决于应用程序上下文

> ID：13492617
> 
> 赞同：4
> 
> 时间：2012-11-21T11:48:47.587
> 
> 标签：c#, asp.net, winforms, function, dll

我们有一个函数库，一些实用程序变量根据应用上下文桌面应用程序/网站以两种不同的方式存储

在网站中，我们使用 Sessions 和桌面静态变量，我们希望统一并自动化这些变量的 getter//setter，而不会对性能产生太大影响

例子：

```
public static class Cons
{
   public static bool webMode;
}

public static class ConsWEB
{
     public static string Username
     {
       get{ return HttpContext.Current.Session["username"].ToString();}
       set{ HttpContext.Current.Session["username"]=value;}
     }
}

public static class ConsAPP
{    
     private static string _username;
     public static string Username
     {
       get{ return _username;}
       set{ _username=value;}
     }
} 
```

我们认为的解决方案 1，使用 IF（似乎对性能不利，考虑多次访问变量，并且在某些情况下，变量是具有复杂内容的自定义类）：

```
public static class Cons
{
   public static bool webMode;

   public static string Username
   {
       get{ return webMode? ConsWEB.Username : ConsAPP.Username; }
       set
       { 
           if(webMode) { ConsWEB.Username = value; }
           else        { ConsAPP.Username = value; }
       }
   }
} 
```

解决方案 2 使用委托，在静态类构造函数中，根据具体情况将委托方法关联到每个 get 和 set。如果是webMode 指向ConsWEB 的get/set 方法，否则指向ConsAPP 的get/set 方法...

解决方案 2 在性能方面是最好的吗？这种情况还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:00:25.967

两者都不是最佳...

首先，忘记性能首先考虑*设计*。

您应该通过界面或类似的方式进行操作：

```
public interface IConsProvider
{
  string UserName { get; set; }
} 
```

现在您的实现（注意：您不应该在同一个程序集中同时为桌面和 Web 进行编译。例如，System.Web 在客户端配置文件中不可用 - 您*应该*真正将其用于桌面应用程序）。

```
public class WebConsProvider : IConsProvider
{
  public string UserName
  {
    // DON'T USE .ToString()!  If it's null you get NullReferenceException!
    get{ return HttpContext.Current.Session["username"] as string; }
    set{ HttpContext.Current.Session["username"]=value; }
  }
}

public class DefaultConsProvider : IConsProvider 
{
   public string UserName 
   {
     get; set;
   }
} 
```

然后你的环境是静态的：

```
public static class Cons 
{
  //initialise to default as well - only web apps need change it
  private static IConsProvider _provider = new DefaultConsProvider();
  public static IConsProvider Provider 
  {
    get { return _provider; }
    set { _provider = value; /* should check for null here and throw */ }
  }

  //if you really want you can then wrap the properties
  public static string UserName 
  {
    get {
      return _provider.UserName;
    }
    set {
      _provider.UserName = value;
    }
  }
} 
```

现在你有了一个可扩展的提供者，你不需要担心它的实现。

我个人也有包装的问题`HttpContext.Current`- 但是在大多数情况下都可以正常工作 - 但是，如果你有任何异步发生，那么你必须小心。

此外 - 正如我在评论中提到的 - 您现在不再需要将属性包装为静态数据`Cons`。事实上，通过像这样更改代码，您可以获得大量的可测试性和可扩展性：

```
public void TraceUserName()
{
  Trace.WriteLine(Cons.UserName ?? "[none]");
} 
```

对此：

```
public void TraceUserName(IConsProvider provider)
{
  Trace.WriteLine(provider.UserName ?? "[none]");
} 
```

相信我，在您的代码中有时您会希望*“只是为了这个调用，我想覆盖 UserName - 但我不能，因为它是一个静态属性”*。

最后，您现在可以使用另一种可扩展性机制，而 statics 则没有：扩展方法。

假设您为字符串的接口添加了一个通用存储机制：

```
string this[string key] { get; set; } 
```

这是一个字符串索引器，允许我们为不可预见的值实现类似字典的功能。假设它们都已被实现，其中 a 包含在`Dictionary<string, string>`)中。`DefaultConsProvider``Session``WebConsProvider`

现在，如果我正在为您的项目编写一个需要一些额外字符串值的附加模块 - 我可以这样做：

```
public static MySettingsExtensions 
{
  public static string GetMySetting(this IConsProvider provider) 
  {
    //TODO: argument null checks
    return provider["MySetting"];
  }

  public static void SetMySetting(this IConsProvider provider, string val) 
  {
    provider["MySetting"]=val;
  }
} 
```

（抱歉必须更新最后一点，因为出于某种原因我参数化了密钥 - 这是没有意义的！）

也就是说——我们现在可以开始扩展提供者通过扩展方法提供的强类型设置的范围——而无需更改任何原始代码。

# function - 在开始阶段需要明确的递归函数概念

> ID：13492618
> 
> 赞同：0
> 
> 时间：2012-11-21T11:48:48.740
> 
> 标签：function, recursion

今天我第一次尝试通过在线教程学习递归函数，但停留在开始阶段。我找到了下面的代码，但它为我提供了针对任何值的“输出：1”。所以，我需要更好的解释：

```
function factorial($n){
if($n==0){
return 1;
}
return fact($n, 1);
}
function fact($i, $j){
if($i<1){
return 1;}
else {
return fact($i-1, $i*$j);
}
}
echo factorial(5); 
```

还有一件事，我需要澄清以下返回方法：

> 返回事实($i-1, $i*$j);

将工作从两个参数传达单个值。any1 请给我一些关于这个问题的想法，以澄清我的概念。提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:09:07.273

这里有一个`factorial`调用递归函数的函数`fact`。递归函数总是这样工作：

*   如果你用“微不足道”的论点来称呼它，它可以立即给你答案。在您的代码中，这就是说的部分`if($i<1){ return $j; }`（根据@Sreenath 的评论）

*   如果参数更“复杂”，则该函数会简化参数（`$i-1`在您的示例中：平凡的情况是`$i<1`，因此`$i`在某种程度上使参数变小会使参数更容易），然后使用更简单的参数和可能的一些附加信息调用自身，这是`fact($i-1, $i*$j)`呼叫的来源。

所以`fact`这里的递归函数可以做以下事情：

```
fact(i, j) = fact(i-1, i*j)
 = fact(i-2, (i-1)*(i*j)) = fact(i-3, (i-2)*(i-1)*i*j)
 = ... = fact(1, (i-(i-1)) * (i-(i-2)) * ... * (i-1) * i * j)
 = fact(0, (i-i) * (i-(i-1)) * (i-(i-2)) * ... * (i-1) * i * j)
 = (i-i) * (i-(i-1)) * (i-(i-2)) * ... * (i-1) * i * j # Because 0<1
 = i! * j 
```

现在如果你只想要阶乘，你需要调用`fact`with`1`作为第二个参数，就像你在`return fact($n, 1);`.

```
function factorial($n){
  if($n==0){ # The trivial case
    return 1;
  }
  # Every other case is "complicated": call a specialized function.
  return fact($n, 1);
}

function fact($i, $j){
  # Helper function: returns i!*j, doing a recursive calculation.
  if($i<1){ # The trivial case
    return j;  # i!*j for i<1 is just j
  }
  else { # The "complicated" case:
    return fact(
        $i-1,  # Simplify the argument
        $i*$j  # Pass my current state down
      ); # And call myself with the simpler argument and the internal state.
  }
}

# Test it: This should return 5!=120
echo factorial(5); 
```

# android - Android GCMIntentService onMessage 问题

> ID：13492621
> 
> 赞同：0
> 
> 时间：2012-11-21T11:49:01.260
> 
> 标签：android, google-cloud-messaging

我是安卓新手。我正在尝试将消息（GCM）从我的服务器（Java）发送到 Android 手机。在调试服务器代码时，我发现消息已成功发送到安卓手机。但是我无法在电话中收到任何消息。我试图在 onMessage() 中设置一个断点，但没有用。

在收到来自服务器的每条消息后，我的手机只会收到一个警报框，例如：“**项目没有响应。你想关闭它吗？** ”它在警报框中有 2 个按钮：等待和确定。

谁能帮我解决这个问题。即使我的服务器成功发送消息，为什么我没有在电话中收到任何消息。我的客户端和服务器代码如下：

**服务器：**

```
public void sendPushNotification(String theRegistrationId, String thePushMsg)
    {
        //Used to transmit messages to the Google Cloud Messaging service.
        Sender aGcmSender = new Sender(API_KEY); 

        //Constructing message which need to be transmitted to android device.      
        Message aMessage = new Message.Builder().addData("message", thePushMsg).build(); 
        try 
        {
            Result result = aGcmSender.send(aMessage, theRegistrationId, 1); 
        }
        catch (Exception theException) 
        {

        }
    } 
```

**客户端：** AndroidManifest.xml：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<permission android:name="com.test.app.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.test.app.permission.C2D_MESSAGE" />

<uses-permission android:name="android.permission.INTERNET" />

<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />
<uses-permission android:name="android.permission.READ_OWNER_DATA" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<!-- Permission to vibrate -->
<uses-permission android:name="android.permission.VIBRATE" />

<uses-permission android:name="android.permission.SET_DEBUG_APP"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:name="MyApplication">
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".view.welcome.WelcomeView"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
      <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        <category android:name="com.test.app" />
      </intent-filter>
    </receiver>

    <service android:name="com.test.app.GCMIntentService" />

</application> 
```

**GCMIntentService：**

```
package com.test.app;

import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService
{
    private static final String TAG = "===GCMIntentService===";
    private static String GCM_SENDER_ID = "697532398835"; //Project id in Google API Console

    public GCMIntentService() 
    {
        super(GCM_SENDER_ID);
        Log.d(TAG, "GCMIntentService init");
    }

    @Override
    protected void onRegistered(Context theContext, String theRegistrationId) 
    {
        Log.i(TAG, "Device registered: regId = " + theRegistrationId);
    }

    @Override
    protected void onUnregistered(Context theContext, String theArg) 
    {
        Log.i(TAG, "unregistered = "+theArg);
    }

    @Override
    protected void onMessage(Context theContext, Intent theIntent) 
    {
        Log.i(TAG, "new message= ");

        String aMessage = theIntent.getStringExtra("message");
        sendGCMIntent(theContext, aMessage);
    }

    private void sendGCMIntent(Context theContext, String theMessage) 
    {
        Intent aBroadcastIntent = new Intent();
        aBroadcastIntent.setAction("GCM_RECEIVED_ACTION");
        aBroadcastIntent.putExtra("gcm", theMessage);
        theContext.sendBroadcast(aBroadcastIntent);
    }

    @Override
    protected void onError(Context theContext, String theErrorId) 
    {
        Log.i(TAG, "Received error: " + theErrorId);
    }

    @Override
    protected boolean onRecoverableError(Context theContext, String theErrorId) 
    {
        return super.onRecoverableError(theContext, theErrorId);
    }
} 
```

**我的活动：**

```
package com.test.app.view.welcome;

import java.net.MalformedURLException;
import java.net.URL;

import com.google.android.gcm.GCMRegistrar;

public class LoginView extends Activity implements Runnable {

    Typeface itsTypeFace;
    IntentFilter gcmFilter;
    String broadcastMessage = "No broadcast message";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.login);

        gcmFilter = new IntentFilter();
        gcmFilter.addAction("GCM_RECEIVED_ACTION");         

    }

    private BroadcastReceiver gcmReceiver = new BroadcastReceiver() 
    {
        @Override
        public void onReceive(Context context, Intent intent) 
        {
            broadcastMessage = intent.getExtras().getString("gcm");
            if (broadcastMessage != null) 
            {
                System.out.println(broadcastMessage);
            }
        }
    };

    /**
     * Method to avoid back key press for a higher api level 2.0 and above
     */
    @Override
    public void onBackPressed() {}

    /** If the user changes the orientation of his phone, the current activity
        is destroyed, and then re-created.  This means that our broadcast message
        will get wiped out during re-orientation.
        So, we save the broad cast message during an onSaveInstanceState()
        event, which is called prior to the destruction of the activity.
    */
    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) 
    {
        super.onSaveInstanceState(savedInstanceState);
        savedInstanceState.putString("BroadcastMessage", broadcastMessage);

    }

    /** When an activity is re-created, the os generates an onRestoreInstanceState()
        event, passing it a bundle that contains any values that you may have put
        in during onSaveInstanceState()
        We can use this mechanism to re-display our last broadcast message.
    */
    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) 
    {
        super.onRestoreInstanceState(savedInstanceState);
        broadcastMessage = savedInstanceState.getString("BroadcastMessage");
    }

    /** If our activity is paused, it is important to UN-register any
        broadcast receivers.
    */
    @Override
    protected void onPause() 
    {
        unregisterReceiver(gcmReceiver);
        super.onPause();
    }

    /** When an activity is resumed, be sure to register any
        broadcast receivers with the appropriate intent
    */
    @Override
    protected void onResume() 
    {
        super.onResume();
        registerReceiver(gcmReceiver, gcmFilter);
    }

    /** 
     * The call to GCMRegistrar.onDestroy()
     */
    @Override
    public void onDestroy() 
    {
        GCMRegistrar.onDestroy(this);
        super.onDestroy();
    }
} 
```

谁能帮我解决这个问题。即使我的服务器成功发送消息，为什么我没有在电话中收到任何消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:27:49.413

我找到了解决这个问题的方法。在部署我的应用程序（服务器端）时，我发现 json-simple.jar 存在一些问题。

我已将 jar 升级到**json-simple-1.1.1.jar**并且它有效！

并且正如 NickT 所建议的，我已将我的 canonicalid 更新如下：

```
Sender aGcmSender = new Sender(API_KEY);     
//Constructing message which need to be transmitted to android device.      
Message aMessage = new Message.Builder().addData("message", thePushMsg).build(); 

Result result = aGcmSender.send(aMessage, REG_ID, 1); //Transmitting message to android device
if(result != null)
{
    if(result.getMessageId() != null)
    {
        String aCanonicalRegistrationId = result.getCanonicalRegistrationId();
        if(aCanonicalRegistrationId != null)
        {
            //Updated my database with aCanonicalRegistrationId (replaced REG_ID)
        }
    }
    else 
    {  
        String error = result.getErrorCodeName();
        if (error.equals(Constants.ERROR_NOT_REGISTERED)) {    
            // application has been removed from device - unregister database
        }
    }
   }
} 
```

谢谢你。

# c# - 在 DataGrid.RowStyle 上设置 DataContext

> ID：13492623
> 
> 赞同：10
> 
> 时间：2012-11-21T11:49:06.557
> 
> 标签：c#, .net, wpf, mvvm, resharper

使用以下示例 R# (resharper) 无法找到 Row 样式的数据上下文，并警告错误绑定（在运行时工作正常）。似乎 Style 没有获取 ItemsSource 的 DataContext：

![在此处输入图像描述](../Images/e5cd454736029e443bc25240cd0f907b.png)

MainWindow.xaml：

```
<Window x:Class="TestDatacontext.MainWindow"

    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:testDatacontext="clr-namespace:TestDatacontext"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"

    mc:Ignorable="d"

    d:DataContext="{d:DesignInstance testDatacontext:MainWindowVM}"  >

<DataGrid ItemsSource="{Binding Items}" >
    <DataGrid.RowStyle>
        <Style TargetType="DataGridRow" >
            <Setter Property="Header" Value="{Binding Name}" />
        </Style>
    </DataGrid.RowStyle>
</DataGrid>
</Window> 
```

主窗口虚拟机：

```
using System.Collections.ObjectModel;

namespace TestDatacontext
{
    class MainWindowVM
    {
        public ObservableCollection<ItemVM> Items { get; private set; }
    }
} 
```

项目虚拟机：

```
namespace TestDatacontext
{
    class ItemVM
    {
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T12:22:54.563

你是对的，ReSharper 不知道如何`RowStyle`在这个特定的控件中使用（它是每个项目的样式`ItemsSource`吗？还是某种标题样式和绑定可以访问`ItemsSource`对象本身？），所以它停止遍历树寻找`DataContext`类型`Style`声明。

这个问题可以通过`Style`声明的附加注释来解决：

```
<Style TargetType="DataGridRow" d:DataContext="{d:DesignInstance vms:ItemVM}">
  <Setter Property="Header" Value="{Binding Name}" />
</Style> 
```

项目可以正常编译，VS 设计器和 R# 可以工作，但 VS xaml 支持会在错误窗口中产生 1 个错误 - “属性 'DataContext' 不能附加到 'Style' 类型的元素”。这有点烦人，但有效。另一种方法是像这样对属性类型进行 quilify：

```
<Style TargetType="DataGridRow">
  <Setter Property="Header" Value="{Binding (vms:ItemVM.Name)}" />
</Style> 
```

但它也会产生 VS xaml 支持错误:) 并且在运行时的行为略有不同 - 此绑定仅适用于类型的`Name`属性，`ItemVM`并且如果在运行时以某种方式将 VM 对象替换为具有属性的其他不同类型的对象，则此绑定将不起作用`Name`（所以绑定变成了“强类型”）。

我们仍在寻找更好的方法来解决 ReSharper 8.0 中的此类问题，并让 VS 设计师高兴，抱歉造成混淆！

# jsf - 启动 JSF 的问题

> ID：13492626
> 
> 赞同：0
> 
> 时间：2012-11-21T11:49:31.550
> 
> 标签：jsf

我试图创建一个基本的 JSF 应用程序，但似乎无法让它工作 - 我怀疑缺少某些东西，默认情况下在 faces-config.xml 文件中，但我不确定是什么。我收到此错误：

```
java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config 
```

我用谷歌搜索它，发现它是一个据称丢失的 jar 文件。我下载并添加到项目的“构建路径”中，刷新并重新启动服务器，但它仍然无法正常工作。外部 JAR 文件称为“jstl-1.2.jar”。

以下是报告的错误列表：

```
HTTP Status 500 - javax/servlet/jsp/jstl/core/Config

type Exception report

message javax/servlet/jsp/jstl/core/Config

description The server encountered an internal error that prevented it from fulfilling     
this request.

exception 

javax.servlet.ServletException: javax/servlet/jsp/jstl/core/Config
javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)

root cause 

java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config
com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:345)
com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

root cause 

java.lang.ClassNotFoundException: javax.servlet.jsp.jstl.core.Config
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:345)
com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.32 logs. 
```

有任何想法吗？这必须是一个简单的修复，因为从 JSF 应用程序中弹出一个简单的 HelloWorld 不会这么复杂。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:25:44.110

> *我下载并添加到项目的“构建路径”中，刷新并重新启动服务器，但它仍然无法正常工作。*

这不是正确的方法。您根本不应该触摸项目的*Build Path*属性。您应该直接将 JSTL JAR 文件放到`/WEB-INF/lib`项目的文件夹中。您应该确保**撤消**您在*构建路径*属性中所做的每一个更改，以粗心地尝试“修复”此问题，否则 Web 应用程序仍将在构建/部署时使用损坏的类路径/库结构。

为什么需要它是因为 JSF2 Facelets 需要 JSTL 依赖项才能运行[`<c:xxx>`此处列出的所有标记](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)。但是，您使用的是 Tomcat，它是一个准系统 JSP/Servlet 容器，它没有随 JSTL 一起提供。您必须单独下载并安装它。在像 Glassfish 这样成熟的容器上，您不需要这样做（顺便说一下，对于 JSF JAR 文件也不需要）。

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:57:18.690

将 jar 文件移动到 WEB-INF 文件夹中并没有解决问题，所以经过一番搜索后，我遇到了这个[教程](http://viralpatel.net/blogs/tutorial-creating-javaserver-faces-jsf-application-in-eclipse-jsf-project-jsf-tutorial/)。按照它的步骤后它也不起作用所以我必须做的是：

1.  从上面的网站下载 zip 文件夹
2.  把它解压到你方便的地方——对我来说就是桌面
3.  检查 lib 文件夹并将其中的 jar 文件放入另一个文件夹
4.  按照创建项目的正常步骤 -> 文件 -> 新建 -> 动态 Web 项目
5.  输入您的项目详细信息
6.  当您进入“JSF Capabilities”页面时，单击“Manage Libraries”图标，选择“New”并创建一个文件夹，随意调用它。将之前的 jar 文件添加到此，然后选择完成。

你现在应该可以走了！

感谢帮助

PS 这是 JAR 文件的列表，它们再次位于 zip 的 WEB-INF/lib 文件夹中

*   commons-beanutils-1.7.0.jar
*   commons-chain-1.1.jar
*   commons-collections.jar
*   commons-digester-1.8.jar
*   commons-logging-1.0.4.jar
*   jsf-api.jar
*   jsf-impl.jar
*   jstl.jar

# c# - 如何在 ASP.NET 中为我的 ListView 控件获取滚动条

> ID：13492628
> 
> 赞同：2
> 
> 时间：2012-11-21T11:49:37.520
> 
> 标签：c#, asp.net, listview, html, scrollbar

我已经构建了一个 ASP.NET 应用程序并使用了两个 div 和一个 ListView。我的 ListView 从数据库中获取数据，如果我有很多行，我会溢出，但我想要这个 ListView 的滚动条。

我的网站：

![在此处输入图像描述](../Images/8259ee40f9747dc72267f78fcf6c1fb3.png)

我的网站，如果我有很多行:(

![在此处输入图像描述](../Images/8116e2a52bb1ed7013f7fb78c016cd0b.png)

我的网站带有我想要的滚动条！

![在此处输入图像描述](../Images/2d05234dfdce17d39cf4399b2295ccb7.png)

我的代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="lw_content" runat="server">
    <div class="userlist">
        <div class="liste">

            <asp:ListView runat="server" ID="myListView">

                <LayoutTemplate>
                    <table id="UserList" border="0" cellpadding="0" cellspacing="0">
                        <tr style="background-color:#ccdaeb">
                            <th align="left">
                                <asp:Label ID="header_name" runat="server" Text="Name"></asp:Label></th>
                            <th align="left">
                                <asp:Label ID="header_firma" runat="server" Text="Firma"></asp:Label></th>
                            <th align="left">
                                <asp:Label ID="header_von" runat="server" Text="gültig ab"></asp:Label></th>
                            <th align="left">
                                <asp:Label ID="header_bis" runat="server" Text="gültig bis"></asp:Label></th>
                            <th align="left">
                                <asp:Label ID="header_ersteller" runat="server" Text="erstellt von"></asp:Label></th>
                        </tr>
                        <tr id="itemPlaceholder" runat="server"></tr>
                    </table>
                </LayoutTemplate>

                <ItemTemplate>
                    <tr>
                        <td align="left"><asp:Label ID="lblname" Text='<%# Eval("GanzerName") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblfirma" Text='<%# Eval("Firma") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblvon" Text='<%# Eval("GültigVon") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblbis" Text='<%# Eval("GültigBis") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblersteler" Text='<%# Eval("Ersteller") %>' runat="server"  /></td>
                    </tr>
                </ItemTemplate>

                <EmptyDataTemplate>
                    <h4>Es wurden keine Einträge gefunden</h4><br/>
                    <asp:Button runat="server" ID="btnAnlegen" Text="Benutzer Anlegen"/>
                </EmptyDataTemplate>

                <AlternatingItemTemplate>
                    <tr>
                        <td align="left"><asp:Label ID="lblname" Text='<%# Eval("GanzerName") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblfirma" Text='<%# Eval("Firma") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblvon" Text='<%# Eval("GültigVon") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblbis" Text='<%# Eval("GültigBis") %>' runat="server"  /></td>
                        <td align="left"><asp:Label ID="lblersteler" Text='<%# Eval("Ersteller") %>' runat="server"  /></td>
                    </tr>
                </AlternatingItemTemplate>

            </asp:ListView>

        </div>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:53:22.030

[**如果列出 div 并将溢出**](http://www.w3schools.com/cssref/pr_pos_overflow.asp)设置为可见或任何适合您的，您可以修复 hsight 。高度必须小于侧 div 中的数据所采用的高度才能看到滚动条。

改变

```
 <div class="liste"> 
```

至

```
<div class="liste" style="height:300px; overflow:scroll"> 
```

或者

```
<div class="liste" style="height:300px; overflow:visible"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:06:59.687

尝试将溢出设置为滚动：

```
<div class="liste" style="height:200px; overflow:scroll;"> 
```

# powershell - 查找下一个可用的计算机名称

> ID：13492635
> 
> 赞同：3
> 
> 时间：2012-11-21T11:49:50.563
> 
> 标签：powershell

我正在尝试在外域中查找下一个可用的计算机名称。我们的计算机使用命名格式 departmentName001

部门名称003

部门名称004

...

部门名称999

我可以找到现有的计算机帐户并添加 1，但我无法让它开始查看 001，我知道使用`"{0:d3}" -f`但我没有正确使用它。任何人都可以帮忙吗？

```
function GetComputerList($ComputerName)
{
$objSearcher = New-Object System.DirectoryServices.DirectorySearcher
$objSearcher.SearchRoot = “LDAP://dc=domain,dc=local”
$objSearcher.Filter = ("(&(objectCategory=computer)(name=$ComputerName))")
$colProplist = "name"
$objSearcher.PageSize = 1000
    foreach ($i in $colPropList){[void]$objSearcher.PropertiesToLoad.Add($i)}
$colResults = $objSearcher.FindAll()
foreach ($objResult in $colResults)
    {$objComputer = $objResult.Properties; $objComputer.name}
}

$HostName = Finance
$unit="{0:d3}" -f $_

$num = GetComputerList("$HostName*") | Foreach {[int]($_.Name)} | Sort-Object | Select-Object -Last 1 
$name = $HostName+($unit+($num+1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:22:54.983

试试这个，它会获取名称以“departmentName”开头的所有计算机，删除所有 az 字符，只留下数字，将数字转换为整数并对它们进行排序以找到最大的一个：

```
$searcher = [ADSISearcher]'(&(objectCategory=computer)(name=departmentName*))'
$searcher.PageSize = 1000
$last = $searcher.FindAll() | Foreach-Object { [int]($_.Properties.name -replace '\D').Trim() } | Sort-Object | Select-Object -Last 1
$digitLength = "$last".Length
$NewComputerName = "{0}{1:D$digitLength}" -f 'departmentName',($last+1)
$NewComputerName 
```

编辑：

```
# get next available number in a range of numbers. returns 5 for 1,2,3,4,6,7,9
$number = $searcher.FindAll() | Foreach-Object { [int]($_.Properties.name -replace '\D').Trim() } | Sort-Object    

for($i=0; $i -lt $number.length; $i++) {if( $number[$i+1]-$number[$i] -gt 1) {$number[$i]+1; break} } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:23:38.930

尝试这个：

```
$searcher = [ADSISearcher]'(&(objectCategory=computer)(name=Finance*))'
$searcher.PageSize = 1000
$last = $searcher.FindAll() | Foreach-Object {
[string]($_.Properties.name -replace '\D')  }  | Sort-Object     
$i = 0
$last | % { if ($i -ne [int]$_ ) { $new = $i.tostring().padleft(3,'0'); break } 
else 
{ $i++ }}

$newComputerName = "finance" + $new 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T10:07:46.787

根据这篇文章中的信息，我对我的环境的代码进行了一些更改和调整，以检查的不仅仅是 AD .. 并且还修复了它在范围开始时不填充空白.. 我在这里写了博客:[自动生成服务器名称](http://blog.wallis2000.co.uk/2015/04/auto-generating-server-names.html)

代码的副本也在这里，我知道它可以重构很多！

```
[CmdletBinding()]
param()

# ********************************************************
$startOfName = "xxxYYYZZWEB"
# ********************************************************

# VMWare Details
$ADVIServers = @("vsphere1.blah.local","vsphere2.blah.local","vsphere3.blah.local","vsphere4.blah.local")
$StandAloneHosts = @()

# DNS Details
$DNSServer = "xxxxxx.blah.local"

# SCCM 2012 Details
$SCCM2012SiteServer = "sccm2012.blah.local"
$SCCM2012SiteCode = 'SiteCode' 

# SCCM 2007 Details
$SCCM2007SiteServer = "sccm2007.blah.local"
$SCCM2007SiteCode = 'SiteCode2' 

# SCOM 2007 Details
$SCOMServer = "scom.blah.local"

# Create Empty Arrays
$VMNumbers = @()
$ADnumbers = @()
$DNSNumbers = @()
$SCCM2012Numbers = @()
$SCCM2007Numbers = @()
$SCOM2007Numbers = @()

# VMWare

    Write-Verbose "Processing VMware"
    Add-PSSnapin vmware.vimautomation.core -ErrorAction SilentlyContinue

    # Set options for certificates and connecting to multiple enviroments
    $null = Set-PowerCLIConfiguration -InvalidCertificateAction Ignore -Confirm:$False
    $null = Set-PowerCLIConfiguration -DefaultVIServerMode Multiple -Scope User -Confirm:$False

    # Connect to each AD Authenticated viServer
    foreach ($VIServer in $ADVIServers){$null = Connect-VIServer $VIServer -verbose:$false} 

    # Connect to standalone host
    foreach ($Host in $StandAloneHosts){$null = Connect-VIServer $Host -User 'usernamehere' -Password 'passwordhere' -verbose:$false} 

    # get next available number in a range of numbers.
    $VMNames = Get-VM -Name "$($startOfName)*" -verbose:$false |select Name
    $VMNames |select Name | Foreach-Object {Write-Verbose $_.Name} | Sort-Object
    $VMNumbers = $VMNames |select Name | Foreach-Object {[int]($_.Name -replace '\D').Trim() } | Sort-Object
    Write-Verbose "$($VMNumbers.Count) Matching entries found"

# Active Directory

    Write-Verbose "Processing Active Directory"

    # Issue Query
    $searcher = [ADSISearcher]"(&(objectCategory=computer)(name=$($StartOfName)*))"
    $searcher.PageSize = 1000

    # get next available number in a range of numbers. returns 5 for 1,2,3,4,6,7,9 From AD
    $ADNames = $searcher.FindAll() | Foreach-Object {[string]$_.Properties.name} | Sort-Object
    $ADNames | Foreach-Object {Write-Verbose $_} | Sort-Object  
    $ADnumbers = $ADNames | Foreach-Object {[int]($_ -replace '\D').Trim() } | Sort-Object  
    Write-Verbose "$($ADnumbers.Count) Matching entries found"

# Search DNS

    Write-Verbose "Processing DNS"

    # Import DNS module
    Import-Module dnsShell -Verbose:$false
    $DNSNames = get-dnsRecord -server $DNSServer -RecordType A -Zone blah.local | select Name |where {$_.Name -like "$($startOfName)*"} 
    $DNSNames | Foreach-Object {Write-Verbose $_.Name} | Sort-Object -Unique
    $DNSNumbers = $DNSNames | Foreach-Object {[int]($_.Name -replace '\D').Trim() } | Sort-Object -Unique
    Write-Verbose "$($DNSNumbers.Count) Matching entries found"

# Search SCCM

    Write-Verbose "Processing SCCM 2012"

    # Query SCCM2012 Env
    $SCCM2012Members = Get-WmiObject -ComputerName $SCCM2012SiteServer -Namespace  "ROOT\SMS\site_$SCCM2012SiteCode" -Query "SELECT * FROM SMS_FullCollectionMembership WHERE CollectionID='SMS00001' AND Name LIKE '$($startOfName)%' order by name" | select Name -Unique
    $SCCM2012Members |select Name | Foreach-Object {Write-Verbose $_.Name} | Sort-Object
    $SCCM2012Numbers = $SCCM2012Members |select Name | Foreach-Object {[int]($_.Name -replace '\D').Trim() } | Sort-Object
    Write-Verbose "$($SCCM2012Numbers.Count) Matching entries found"

    Write-Verbose "Processing SCCM 2007"

    # Query SCCM2007 Env
    $SCCM2007Names = Get-WMIObject -ComputerName $SCCM2007SiteServer -Namespace "root\sms\site_$SCCM2007SiteCode" -class "SMS_R_System" -filter "Name LIKE `"$startOfName%`"" |select Name | Sort-Object -Property Name -Unique
    $SCCM2007Names |select Name | Foreach-Object {Write-Verbose $_.Name} | Sort-Object
    $SCCM2007Numbers = $SCCM2007Names |select Name | Foreach-Object {[int]($_.Name -replace '\D').Trim() } | Sort-Object
    Write-Verbose "$($SCCM2007Numbers.Count) Matching entries found"

# Search Production SCOM 2007

    Write-Verbose "Processing SCOM 2007"

    #Initialize SCOM SnapIn
    Add-PSSnapin Microsoft.EnterpriseManagement.OperationsManager.Client -ErrorAction SilentlyContinue -verbose:$false

    #Connect to Production SCOM 2007 Env.
    $null = New-ManagementGroupConnection -ConnectionString $SCOMServer

    #Connect to SCOM Provider
    Push-Location 'OperationsManagerMonitoring::'

    # Get Agents Matching Name
    $SCOM2007Names = Get-ManagementServer |Get-Agent |Where {$_.Name -like "$($startOfName)*"}
    $SCOM2007Names | Foreach-Object {Write-Verbose $_.Name} | Sort-Object
    $SCOM2007Numbers = $SCOM2007Names | Foreach-Object {[int]($_.Name -replace '\D').Trim() } | Sort-Object
    Write-Verbose "$($SCOM2007Numbers.Count) Matching entries found"

    # Return to previous location
    Pop-Location

# Merge arrays adding a zero so we allways start issuing numbers from the beginning (ie 001)
$list = @(0) + $VMNumbers + $ADnumbers + $DNSNumbers + $SCCM2012Numbers + $SCCM2007Numbers + $SCOM2007Numbers

# Remove Duplicates numbers from the array and sort into numerical order
$list = $list | Sort-Object -Unique

Write-Verbose "Used numbers after sorting: $($list)"

# Determine if next server name is a gap in the sequence in the array
for($i=0; $i -lt $list.length; $i++) {
    if( $list[$i+1]-$list[$i] -gt 1) {
        # The gap between the current server number and the next element in the array is greater than 1
        # So we have an available number we can use.
        # TODO: - Add support for consecutive numbers IE build 6 servers with consecutive numbers.
        $num = "{0:000}" -f ($list[$i]+1)
        break
    }
}

# If no gap found in the sequence then use the next number from the sequence in the array
if ($num -eq $null) {
    $num = "{0:000}" -f (($list[-1]+1))
}

# Construct new name
$NewComputerName = "{0}{1}" -f $startOfName,$num

# Create DNS Record to 'reserve / mark the name as in use'
Write-Verbose "Creating DNS Reservation"
New-DnsRecord -Name $NewComputerName -IPAddress "127.0.0.1" -Zone blah.local -Type A -Server $DNSServer

write-output $NewComputerName 
```

# jquery - DataTables 服务器端处理

> ID：13492641
> 
> 赞同：0
> 
> 时间：2012-11-21T11:50:03.590
> 
> 标签：jquery

我有一个代码：

```
function prepareListCustomer() {
    var req;
    req = new AjaxAdapter;
    req.dataType = 'json';
    return req.query('GET', LIST_CUSTOMER_URL, {rowsOnPage: k, page: l}, function(responseServer, status, xhr) {
        listCustomer = responseServer.dataListCustomer;
        l = l + 1;
      }, function(jqXHR, textStatus, errorThrown) {
          var exception;
          exception = jQuery.parseJSON(jqXHR.responseText);
          return showError(exception);
        });
}

function prepareDataTable() {
    $('#displayData').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": LIST_CUSTOMER_URL
        "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
          oSettings.jqXHR = $.ajax( {
            "dataType": 'json',
            "type": "GET",
            "url": LIST_CUSTOMER_URL,
            "data": {rows: k, pages: l},
            "success": prepareListCustomer
          } );
        }
      } );
} 
```

函数 prepareListCustomer() 将数据写入 listCustomre。我想在prepareDataTable中显示这些数据，如何？我想使用服务器端处理。在 listCustomer 我有 JSON 像：

```
{
    "rowsPerPage": 10,
    "page": 1,
    "total": 100,
    "rows": [
        {
            "id": 1,
            "name": "nazwa1"
        },
        {
            "id": 2,
            "name": "nazwa2"
        },
        {
            "id": 3,
            "name": "nazwa3"
        }
    ]
} 
```

我正在阅读[http://datatables.net/examples/data_sources/server_side.html](http://datatables.net/examples/data_sources/server_side.html)但我不知道如何实现我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T10:51:25.907

您的 JSON 看起来不像默认值。

如果您使用该 JSON，则需要在 sAjaxSource 属性之后像这样在 javascript 调用中声明每一列。

```
"aoColumns": [
    { "mDataProp": "DBColumn1" , "bSortable":true, "bVisible": false },
    { "mDataProp": "DBColumn2" , "bSortable":true, "bVisible": false },
    { "mDataProp": "DBColumn3" , "bSortable":true, "bVisible": false }
] 
```

这部分 JSON 也不正确

```
"rowsPerPage": 10,
"page": 1,
"total": 100,
"rows": 
```

它应该看起来像这样

```
"sEcho": 1,
"iTotalRecords": 100,
"iTotalDisplayRecords": 10,
"aaData": 
```

如果您查看您发布的链接上的 PHP 示例，它会在此处生成此标题并将它们放入关联数组中。

```
/*
 * Output
 */
$output = array(
    "sEcho" => intval($_GET['sEcho']),
    "iTotalRecords" => $iTotal,
    "iTotalDisplayRecords" => $iFilteredTotal,
    "aaData" => array()
); 
```

然后开始将所有数据加载到该数组中，然后再编码为 JSON

```
while ( $aRow = mysql_fetch_array( $rResult ) )
{
    $row = array();
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( $aColumns[$i] == "version" )
        {
            /* Special output formatting for 'version' column */
            $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
        }
        else if ( $aColumns[$i] != ' ' )
        {
            /* General output */
            $row[] = $aRow[ $aColumns[$i] ];
        }
    }
    $output['aaData'][] = $row;
}

echo json_encode( $output ); 
```

你的 JSON 应该是这样的

```
{
   "sEcho":8,
   "iTotalRecords":1,
   "iTotalDisplayRecords":1,
   "aaData":[
      {
         "Entity_Id":840982,
         "External_Id":"1",
         "Family_Name":"A",
         "First_Name":"A",
         "Prefix_Title":null,
         "Suffix_Title":null
      }
   ]
} 
```

[DataTables.net](http://datatables.net/release-datatables/examples/server_side/server_side.html)上有完整的解释

# batch-file - 检查驱动器是否真的是使用批处理的 USB

> ID：13492642
> 
> 赞同：0
> 
> 时间：2012-11-21T11:50:03.997
> 
> 标签：batch-file, usb

我有一个随机数生成并放置在文本文件中。我希望该文件仅自动保存到 USB 驱动器。

有没有办法批量确保文件只保存到USB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:07:46.033

简单的答案是你不能。您将需要使用真正的编程语言，或者至少需要使用 vbscript，即使那样，也很难确保您实际上获得了真正的 USB 驱动器。

有关一些 vb 示例，请参见[此处](https://stackoverflow.com/questions/7022696/detecting-usb-and-floppy-drives-letters-via-vbscript)和[此处](https://stackoverflow.com/questions/8277765/finding-usb-drive-letter-with-vbscript)。

然后，如果你这样做，你可以使用批处理来调用脚本`cscript.exe`。

# javascript - 改变多个属性 来自 Javascript 的标签

> ID：13492646
> 
> 赞同：0
> 
> 时间：2012-11-21T11:50:35.447
> 
> 标签：javascript, html

我可以像这样在运行时更改 HTML5 视频的来源：

```
<video autoplay></video>
<script>
    var video = document.querySelector('video');
    video.src = "http://new/url";
</script> 
```

但是，如果我在页面上有多个视频，我如何在脚本中引用它们中的每一个并访问它们各自的属性？

我可以为视频实体提供名称字符串吗？我期待能够做这样的事情：

```
<video name="video0" autoplay></video>
<viedo name="video1" autoplay></video>
<script>
    video0.src = "http://first/url";
    video1.src = "http://second/url";
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:53:53.330

这将获得所有`video`标签的 HTMLCollection

```
var videos = document.querySelectorAll('video'); 
```

您可以使用以下方法按名称选择它们：

```
var videos = document.querySelector('video[name="video0"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:53:26.930

我建议使用纯 JS 按标签名称检索它们：

```
var videos = document.getElementsByTagName('video');
for (var i = 0; i < videos.length; i++) {
    videos[i] // the i-th video
} 
```

如果你对 jQuery 持开放态度，你可以对 jQuery 做同样的事情：

```
var videos = $('video');
videos.each(function (index, videoElement) {
    // this refers to the current video.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:54:16.073

要么为元素分配一个唯一`ID`属性并使用`document.getElementById()`，要么使用`document.getElementsByTagName('video')`检索`video`页面上的所有 s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:54:16.630

您可以提供一个`id`. 为了轻松访问我建议使用[**jQuery**](http://jquery.com/)的节点：

```
<video id="video0" autoplay></video>
<video id="video1" autoplay></video>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        var video0 = $('#video0');
        var video1 = $('#video1');
        video0.attr('src', 'http://first/url');
        video1.attr('src', 'http://second/url');
    });
</script> 
```

# android - 自定义对话框上的图像视图

> ID：13492651
> 
> 赞同：0
> 
> 时间：2012-11-21T11:50:55.957
> 
> 标签：android, android-layout, android-asynctask, imageview, android-alertdialog

我在android中的自定义对话框有一个问题，我在android中使用javainterface创建了自定义对话框，在我的类CustomizeDialog中我有一个线程在后台执行一些处理，之后我为这个自定义对话框设置了一个imgae我设置了OnPostExecute 中的图像，但出现以下错误

```
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

我知道我们无法从另一个线程访问主 ui，但我们在 OnPostExecuted 中访问主 ui 在我的情况下也不起作用，在我的另一个类（main.class）中，我将调用这个类

```
CustomizeDialog customizeDialog = new CustomizeDialog(mContext);
customizeDialog.show(); 
```

这是我创建对话框的代码

```
public class CustomizeDialog extends Dialog implements OnClickListener {
Button okButton;
ImageView img = null;
ImageView img2=null;
ImageView img3 = null;
ImageView img4= null;
 Bitmap bm;

public CustomizeDialog(Context context) {
super(context);

img2 = (ImageView) findViewById(R.id.imageView1);
img3 = (ImageView) findViewById(R.id.imageView3);
img4 = (ImageView) findViewById(R.id.imageView4);

WindowManager.LayoutParams params = getWindow().getAttributes();  
params.x = 30;  
params.height = 500;  
params.width = 500;  
params.y = 50;  

this.getWindow().setAttributes(params);  

setContentView(R.layout.test);
img = (ImageView) findViewById(R.id.imageView2);

img.setBackgroundResource(R.drawable.sample);

AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();

 //Start the animation (looped playback by default).
 frameAnimation.start();

new LongOperation1(context).execute("");

}

else
{
    Toast toast = Toast.makeText(getContext(), "Erorr",
            Toast.LENGTH_SHORT);
    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
    toast.show();
} }

private class LongOperation1 extends AsyncTask<String, String, String> {

    @Override
    protected String doInBackground(String... params) {
     //here i do some process
    return "Executed";
    }

    @Override
    protected void onPostExecute(String result) {

                 // here i do some process to get bm

            img2.setImageBitmap(bm);
            }

    @Override
    protected void onPreExecute() {
    }
    @Override
    protected void onProgressUpdate(String... values) {
        }
} 
```

AndroidHTMLActivity 类

```
 package com.example.hellogap;
import com.example.javainterface.R;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.os.Bundle;
import android.view.Gravity;
import android.webkit.WebView;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class AndroidHTMLActivity extends Activity {

WebView myBrowser;
private static final int TEXT_ID = 0;
 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     myBrowser = (WebView)findViewById(R.id.mybrowser);
     myBrowser.addJavascriptInterface(new MyJavaScriptInterface(this), "AndroidFunction");

     myBrowser.getSettings().setJavaScriptEnabled(true);
     myBrowser.loadUrl("file:///android_asset/mypage.html");

 }

public class MyJavaScriptInterface {
 Context mContext;

    MyJavaScriptInterface(Context c) {
        mContext = c;
    }

    public void showToast(String toast){
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }

    public void openAndroidDialog(){
        //CustomizeDialog.this.img2.setImageBitmap(bm);

        CustomizeDialog customizeDialog = new CustomizeDialog(AndroidHTMLActivity.this);
        customizeDialog.show();

    }

}
} 
```

测试.xml

```
 <AbsoluteLayout
         xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/widget0"
         android:layout_width="500dp"
         android:layout_height="520dp"

         android:background="@drawable/bg"
         android:clickable="false" >

         <ImageView
             android:id="@+id/imageView3"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_x="193dp"
             android:layout_y="315dp"
             android:src="@drawable/fb" />

         <ImageView
             android:id="@+id/imageView1"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_x="51dp"
             android:layout_y="318dp"
             android:src="@drawable/fa" />

         <ImageView
             android:id="@+id/imageView4"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_x="335dp"
             android:layout_y="316dp"
             android:src="@drawable/fc" />

         <ImageView
             android:id="@+id/imageView2"
             android:layout_width="200dp"
             android:layout_height="204dp"
             android:layout_x="298dp"
             android:layout_y="91dp" />

     </AbsoluteLayout> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"

   />
<WebView
   android:id="@+id/mybrowser"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
  />
</LinearLayout> 
```

我的页面.html

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width; user-scalable=0;" />
<title>My HTML</title>
</head>
<body>
<h1>MyHTML</h1>

<input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

<script type="text/javascript">
 function showAndroidToast(toast) {
     AndroidFunction.showToast(toast);
 }
</script>

<input type="button" value="Open Dialog" onClick="openAndroidDialog()" />

<script type="text/javascript">
 function openAndroidDialog() {
     AndroidFunction.openAndroidDialog();
 }
</script>

</body>
</html> 
```

有没有人知道如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:18:40.303

## 编辑

如果我很了解您要做什么，请用以下代码替换您的代码：

CustomizeDialog.java

```
import android.app.Dialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;

public class CustomizeDialog extends Dialog {

    Button okButton;
    ImageView imageAnim = null;

    Bitmap bm;

    Context ctx;

    AnimationDrawable frameAnimation;

    public CustomizeDialog(Context context) {
        super(context);     

        ctx = context;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);     

        WindowManager.LayoutParams params = getWindow().getAttributes();  
        params.x = 30;  
        params.height = 500;  
        params.width = 500;  
        params.y = 50;  

        getWindow().setAttributes(params);  

        setContentView(R.layout.test);

        frameAnimation =  new AnimationDrawable(); 

        frameAnimation.addFrame(ctx.getResources().getDrawable(R.drawable.fb1), 1000);
        frameAnimation.addFrame(ctx.getResources().getDrawable(R.drawable.fb2), 1000);
        frameAnimation.addFrame(ctx.getResources().getDrawable(R.drawable.fb3), 1000);
        frameAnimation.addFrame(ctx.getResources().getDrawable(R.drawable.fb4), 1000);

        // set false for loop animation
        frameAnimation.setOneShot(false);

        imageAnim = (ImageView) findViewById(R.id.img); 
        imageAnim.setBackgroundDrawable(frameAnimation);

        imageAnim.post(new Starter()); 

    }

    class Starter implements Runnable { 

        public void run() { 
            frameAnimation.start(); 
        } 

    } 
} 
```

文本.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Gallery animated" />

    <ImageView
        android:id="@+id/img"
        android:layout_width="154dp"
        android:layout_height="217dp" />

</LinearLayout> 
```

此代码显示一个对话框，其中每秒加载 4 张图像（循环中）。有用。顺便说一句，您的代码存在很多问题。

1）首先，您必须在 setContentView 之后而不是之前放置对 xml 布局的变量引用！

2）当你做了*AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground()*时，你不能将*AnimationDrawable*转换为*BitmapDrawable*

 *3) 我不明白您为什么尝试使用 NULL 位图变量设置*img.setImageBitmap(bm)* *（*从未设置过 bm）。

4）您必须在 onCreate 方法中初始化 contentView，而不是在 CustomDialog 构造函数中。

5）您必须使用 Thread 来停止 UI 加载。如果将动画循环放在代码对话框创建中，对话框可能会停止并无法正确显示。

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:06:02.350

尝试在您的 CustomizeDialog 类中实现一个静态方法来更改您的图像，当您想要更改图片时，只需调用 CustomizeDialog.thatStaticMethod()。这种方式是改变UI的原始类。*

# android - AudioRecord - 如何将数据放入缓冲区？

> ID：13492653
> 
> 赞同：9
> 
> 时间：2012-11-21T11:51:12.743
> 
> 标签：android, buffer

我在使用 AudioRecord 类时遇到了一些问题。我想将记录的数据存储在缓冲区中，但我不确定实现该目标的正确方法是什么。我经历了大量的例子，但其中大多数都很复杂，代表了许多不同的方法。我正在寻找一个简单的或简单的解释。

这是我的项目的音频设置：

```
int audioSource = AudioSource.MIC;
int sampleRateInHz = 8000;
int channelConfig = AudioFormat.CHANNEL_IN_MONO;
int audioFormat = AudioFormat.ENCODING_PCM_16BIT;
int bufferSizeInBytes = AudioRecord.getMinBufferSize(sampleRateInHz, channelConfig, audioFormat);

short[] buffer = new short[bufferSizeInBytes];

AudioRecord audioRecorder = new AudioRecord(audioSource,
                                            sampleRateInHz, 
                                            channelConfig, 
                                            audioFormat, 
                                            bufferSizeInBytes); 
```

我正在尝试创建一个录音功能:

```
public void Recording() {
    audioRecorder.startRecording();
    ...
    audioRecorder.stop();
    audioRecorder.release();
} 
```

我知道我应该使用 .read(short[] audioData, int offsetInShorts, int sizeInShorts) 函数。我的问题从这里开始。我不确定 audioData 缓冲区是如何工作的 - 我假设函数将录制的样本放入 audioData。如果它完全充满数据会发生什么？它从最早的位置开始重写？如果是这样，我相信我必须将所有收集的样本复制到其他地方。它提出了另一个问题 - 我如何检查 .read(...) 函数缓冲区是否已满？我需要测量时间并复制缓冲区内容还是有其他方法可以实现？我还需要为整个录制操作创建一个线程吗？

很抱歉在一个主题中问了这么多问题:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:01:32.243

**回答您的问题::**

recorder.read(...) 根本不需要读取任何数据。您可能应该重写该循环以在读取调用之间暂停一小段时间（例如，50 毫秒）。在缓冲区有数据之前，它也不应该对缓冲区进行排队。此外，由于缓冲区可能未满，您可能需要使用维护字节数计数的数据结构。一个 ByteBuffer 被认为是一个很好的候选者。您可以在读取循环中将字节填充到其中，当它足够满时，将其排队等待传输并开始另一个。

当然，您需要创建一个线程来循环它。如下面的代码所示。

这是记录循环的修改版本，可以进行正确的错误检查。它使用 a`Queue<ByteBuffer>`而不是 a `Queue<byte[]>`：

```
private void startRecording() {

    recorder.startRecording();
    isRecording = true;
    recordingThread = new Thread(new Runnable() {

        @Override
        public void run() {
            bData = ByteBuffer.allocate(BufferElements);
            bbarray = new byte[bData.remaining()];
            bData.get(bbarray);
            while (isRecording) {

                int result = recorder.read(bbarray, 0, BufferElements);
                System.out.println("READ DATA");
                if (result > 0) {
                    qArray.add(bData);

                    --your stuffs--
                    bData = ByteBuffer.allocate(BufferElements);
                } else if (result == AudioRecord.ERROR_INVALID_OPERATION) {
                    Log.e("Recording", "Invalid operation error");
                    break;
                } else if (result == AudioRecord.ERROR_BAD_VALUE) {
                    Log.e("Recording", "Bad value error");
                    break;
                } else if (result == AudioRecord.ERROR) {
                    Log.e("Recording", "Unknown error");
                    break;
                }
                try {
                    Thread.sleep(10);
                } catch (InterruptedException e) {
                    break;
                }
            }
        }
    }, "AudioRecorder Thread");
    recordingThread.start();
} 
```

当然，您需要在某个地方打电话`recorder.startRecording()`，否则您将无法获得任何数据。

对于工作示例，请查看[此示例](https://stackoverflow.com/questions/8499042/android-audiorecord-example/13487250#13487250)。

# html - 如何创建固定高度的第一列布局？

> ID：13492654
> 
> 赞同：2
> 
> 时间：2012-11-21T11:51:23.057
> 
> 标签：html, css, layout, height, fixed

如何创建固定高度的第一列布局？我看到了一个 kevinrose.com 博客，我喜欢它，简单而干净的布局，我想使用那个布局，所以我试图创建它，但我坚持这个固定高度，我可以轻松设置固定栏，如标题，但列，我不知道该怎么做示例：

```
#sidebar
{
    background-color: red;
    height: 700px;
    width: 100px;
    float: left;
}
#article
{
    background-color: blue;
    height: 400px;
    width: 200px;
    float: left;            
}
#like
{
    background-color: green;
    height: 100px;
    width: 200px;
    position: fixed;
    float: left;   

    z-index:-5;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:58:29.227

固定位置是您实现这一目标的方式。看看这里：http: [//jsfiddle.net/wpHMA/](http://jsfiddle.net/wpHMA/)

```
.wrap {
 width:100%;
 height:100%;
 overflow:auto;
 position:relative;
}
.sidebar {
 background:#333;
 color:#fff;
 width:25%;
 height:100%;
 position:fixed;
 top:0;
 left:0;
}
.content {
 width:75%;
 float:right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:54:04.813

使用位置：固定在侧边栏上，并使用边距偏移其余部分

```
#sidebar
{
    background-color: red;
    width: 100px;
    position: fixed;
}
#article
{
    background-color: blue;
    width: 200px;
    margin-left: 100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:03:37.713

根据您给定的示例“kevinrose.com”左侧面板是固定位置结构。您可以使用以下 css/html 代码结构

CSS

```
.leftPan{
    width:27%;
    background-color:#CCC;
    position:fixed;
    left:0;
    min-height:100%;
}
.rightPan{
    margin-left:27%;
    height:1000px;
    background-color:#999;
} 
```

html

```
<div class="leftPan">
Left Panel
</div>
<div class="rightPan">
Right Panel
</div> 
```

这是[jsFiddle 文件](http://jsfiddle.net/nvr39/1/)

# asp.net - 动态的 tag in asp.net inline code

I've got a bit of a weird issue that I'm trying to figure out how to get around. Basically, the company I work for uses a CMS that only allows inline code for ASP.net and uses

> ID：13492655
> 
> 赞同：1
> 
> 时间：2012-11-21T11:51:27.463
> 
> 标签：asp.net, inline-code

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:28:45.853

因此，如果我对您的理解正确，您想在服务器端代码中将标签添加到渲染页面的标签中`<title>`吗`<meta ...>`？`<head>`

如果您使用的是 ASP.NET 2.0 或更高版本，则可以通过添加到声明中来更改`<head>`服务器代码可以访问的元素。`runat="server"`然后，您可以通过 Pages 的`Title`属性设置标题值。

要添加`<meta>`标签，您需要运行 ASP.NET 4.0，它会向 Page 对象添加`MetaKeywords`和`MetaDescription`属性。

因此，要将所有这些放在一起，您的页面标记应包括：

```
<% Page ... %>
<html>
    <head runat="server">
    ...
    </head>
    <body>
    ... 
```

然后在您的服务器端代码中：

```
 Page.Title = "My course page";
 Page.MetaDescription = "My Page for Course x";
 Page.MetaKeywords = "course, education, learning"; 
```

这应该呈现为：

```
 <html>
     <head>
         <title>My course page</title>
         <meta name="description" content="My Page for Course X" />
         <meta name="keywords" content="course, education, learning" />
 .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:23:28.960

将占位符放在 head 标记中，并使用下面的代码从后面的代码添加元标记。

```
HtmlMeta meta = new HtmlMeta();
meta.Attributes.Add("property", "og:title");
meta.Attributes.Add("content", lblBannerTitle.Text.Length > 68 ? lblBannerTitle.Text.Substring(0, 68) : lblBannerTitle.Text);
MetaPlaceHolder.Controls.Add(meta); 
```

这样，您可以拥有任意数量的元标记。只需确保标题元标记最大长度为 68，描述元标记最大长度为 148。

让我知道它是否适用于您的情况。

# infinite-scroll - 如何捕获滚动事件？

> ID：13492656
> 
> 赞同：10
> 
> 时间：2012-11-21T11:51:27.703
> 
> 标签：infinite-scroll

我想实现无限滚动。下面是我的布局的简短形式。由于我有一些相对定位的元素，因此不会触发 javascript 滚动事件。

如何解决此问题以触发滚动事件并实现无限滚动？

我的主要布局是：

```
<div id="container">
    <div class="wrapper">
        <div id="header">
        ...
        </div> <%-- header --%>

        <div id="main">
        ...
        </div>

    </div> <%-- wrapper --%>
</div> <%-- container --%>
<div id="footer">
</div> 
```

我的CSS是：

```
#container {
    position: absolute;
    z-index: 1;
    top: 0;
    bottom: 35px;
    left: 0;
    right: 0;
    overflow-y: auto;      
    overflow-x: hidden;      
}

.wrapper {
    margin: 0 auto;
    width: 960px;
    position: relative;
}   

#header {
    position: relative;
}

#main {
}

#footer {
    z-index: 2;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 35px;
} 
```

为了实现无限滚动，我必须进行哪些更改才能接收带有布局的浏览器滚动事件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T00:01:11.040

实现它的正确方法是：

```
 <div id="container" onScroll="handleOnScroll();">

<script>
function handleOnScroll() {
        alert("scroll");
    };
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T00:17:16.507

**编辑：由于您最初用[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")标记了您的问题...**

* * *

`scroll`要使用 jQuery捕获事件...

HTML：

```
<div id="container">
    CONTENT
</div> 
```

jQuery：

```
$(document).ready(function() {

    $('#container').scroll(function() {
        alert('scroll');
        // presumably your infinite scrolling code here
    });

}); 
```

见： [http ://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T12:02:45.747

这是我在我的代码中使用的...

```
 <div id="DataDiv" style="overflow: auto; width: 280px; height:400px; margin-top: 10px;"
                    onscroll="Onscrollfnction();">
      my content here 
 </div> 
```

功能如下

```
function Onscrollfnction() {
            var div = document.getElementById('DataDiv');
            div.scrollLeft;
            return false;
        }; 
```

内容超过 400px 后，滚动将开始并且将无限......享受

# jquery - 如何使用 jQuery 从 div 中删除添加的图像？

> ID：13492658
> 
> 赞同：1
> 
> 时间：2012-11-21T11:51:32.177
> 
> 标签：jquery, image

我正在研究 jQuery，我有一个 html 页面。在 html 中，我有两个 div；第一个 div 包含图像、名称和价格现在我们必须将图像移动到另一个空 div

在这里，我已经完成（移动）将图像表单添加到第二个。现在我想使用添加图像的 jQuery 从第二个 div 中删除图像

这是我的标记和代码：

```
<div>              
    <span class="span1">
    <img src="~/Images/galaxy.jpeg" /></span> 
    <span class="span1">1232</span>
    <span class="span2">Cell Phone</span> 
    <span class="span1">3500</span>              
    <a href="#" class="pull-right" ><i class="icon-plus" onclick="AddToCart(this)" id="btnid" ></i></a>
</div>

<div class="span7" style="border:1px black" id="separat">
</div> 
```

这是我的 jQuery 代码：

```
function AddToCart() {
        var img = $(this).closest('div').find('img').first();
        var price = $(this).closest('span2').clone();
        alert(price);
        var image_id = $(img).attr('id');
        var newobj = $('<div>');
       newobj.prepend(img.clone());
       newobj.append('<span>' + image_id + '<a href="#"><i class="icon-remove" <span></i></a>');
         alert(image_id);        
        $('#separat').append(newobj);
}

$(function () {
        $('.icon-plus').click(AddToCart);
}); 
```

这是我的删除功能

```
function RemoveCart() {
    //var img = $this.find('img').RemoveCart();
    $(".separat").clone().find("img").remove();
}

$(function () {
    $('.icon-remove').click(RemoveCart);
}); 
```

在这里，我将图像添加到第二个 div 我需要从第二个 div 中删除图像 我有一个图标加图像按钮，它来自（分隔）div 当我点击它时，它应该从 div 中删除

请帮我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:02:34.537

你可以使用

```
img.remove(); 
```

# php - 在网页上组合多个图像并通过单击按钮单独更改它们

> ID：13492662
> 
> 赞同：1
> 
> 时间：2012-11-21T11:51:43.257
> 
> 标签：php, jquery, html, image, png

当谈到网页设计时，我是一个不成熟的人，我一直在尝试学习 ctrl+c > ctrl+v。目前我正在制作一个用于在沙发上选择靠垫的网络应用程序。我创建了一个页面，您可以在其中单击一种颜色以查看该特定颜色的靠垫，但我也想更改沙发底座的颜色。

简而言之：我想将 2 个 png 图像放在一起，并能够通过单击颜色来单独更改它们。

我现在的代码：

```
<body>
<div id="page">
    <div id="gallery">
        <div id="panel"><img id="largeImage" src="images/image_01_large.png"/>

            <div id="thumbs">
                <img src="images/image_01_thumb.png" alt="Lime Green"/>
                <img src="images/image_02_thumb.png" alt="Burgundy"/>
                <img src="images/image_03_thumb.png" alt="Cobalt Blue"/>
            </div>
            <script>
                $('#thumbs').delegate('img', 'click', function () {
                $('#largeImage').attr('src', $(this).attr('src').replace('thumb', 'large'));
                $('#description').html($(this).attr('alt'));
            }); 
```

# objective-c - 获取未找到体系结构 i368 的链接器错误符号

> ID：13492665
> 
> 赞同：1
> 
> 时间：2012-11-21T11:52:00.683
> 
> 标签：objective-c, ios4, ios6

我正在使用 iFrameExtractor，它在 iphone 设备上成功编译，但是当我在模拟器上使用它时，它显示以下错误。

```
 "_av_dict_set", referenced from:
      -[VideoFrameExtractor initWithVideo:usesTcp:] in VideoFrameExtractor.o
  "_avcodec_open2", referenced from:
      -[VideoFrameExtractor initWithVideo:usesTcp:] in VideoFrameExtractor.o
      -[VideoFrameExtractor setupAudioDecoder] in VideoFrameExtractor.o
  "_avformat_close_input", referenced from:
      -[VideoFrameExtractor dealloc] in VideoFrameExtractor.o
  "_avformat_find_stream_info", referenced from:
      -[VideoFrameExtractor initWithVideo:usesTcp:] in VideoFrameExtractor.o
  "_avformat_open_input", referenced from:
      -[VideoFrameExtractor initWithVideo:usesTcp:] in VideoFrameExtractor.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何人都可以通过明确的分步解决方案帮助我。因为我是 ios 新手。

谢谢钱德拉公关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:49:02.047

看起来它没有找到所需的 ffmpeg 库，可能是因为您的库是为设备编译的，但看起来您正在尝试在模拟器上构建。

# eclipse - 在 Eclipse 中为 Maven 项目运行 JUnit 测试用例

> ID：13492666
> 
> 赞同：0
> 
> 时间：2012-11-21T11:52:01.370
> 
> 标签：eclipse, maven, configuration, junit4

我使用 maven eclipse 插件（m2e）导入了 Maven 项目，一切都很好。但是当我运行 JUnit 测试用例时，我遇到了以下错误

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'be.belgacom.rosy.betty.manager.impl.ReservationManagerImplTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests.setDataSource(javax.sql.DataSource); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
 Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests.setDataSource(javax.sql.DataSource); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:589)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
... 26 more
 Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:920)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:789)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:547)
... 28 more 
```

我相信您可能会建议查看属性和其他 xml 文件配置是否正确。如果我将相同的项目作为普通项目导入 Eclipse，我可以运行 JUnit 测试。当我导入为 Maven 项目时，它会给出这样的错误。

任何想法，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:12:32.857

你的问题缺乏很多背景。你曾经用 Maven 从命令行运行过这个吗？例如，您是否在命令行上运行过“mvn test”？请先尝试此操作，然后让我们知道您是否收到相同的错误消息。

您的问题表明您的 POM 不包含适当的依赖项。

# cassandra - 在 cassandra 中读取最新更新的行

> ID：13492673
> 
> 赞同：1
> 
> 时间：2012-11-21T11:52:47.633
> 
> 标签：cassandra

我有一个用例，并希望对以下内容提出建议。

结构 ：

```
 Rowkey_1: 

                       Column1 = value1;
                       Column2 = value2;
            Rowkey_2: 

                       Column1 = value1;
                       Column2 = value2; 
```

“假设我将 1000 行写入 cassandra，每行有几列。有时我只更新 100 行并更改列值”。

-> 当我从 cassandra 读取数据时，我只想获取这 100 条更新的行，而不是整个行键信息。

有没有办法对 cassandra 说，比如给我从 start -> end 的所有行键，其中时间介于“Time_start”到“Time_end”之间

在 SQL Lingo --> 从 "" 到 "" 中选择 "time_start" 和 "time_end" 之间的时间。

PS我读了Cassandra的基本时间序列，它说你可以像下面这样注释行键

这里的列族有 TimeUUID 列。

我的问题是你能像这样用日期和时间注释你的行键吗：{ :key ==> 2012-11-18 16:00:15 }

或仅获取最近更新的行的任何其他方式。

任何建议/指导都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:23:51.020

除非您使用不应使用的 ByteOrderedPartitioner，否则您无法对键进行范围查询。做到这一点的方法是将已知的标记值作为键写入，例如表示一天开始的时间戳。然后你可以按时间做列切片。

# javascript - Facebook JS SDK 滚动

> ID：13492679
> 
> 赞同：4
> 
> 时间：2012-11-21T11:53:16.937
> 
> 标签：javascript, jquery, facebook-javascript-sdk

我有一些简单的代码，通过单击包含“top”类的每个链接以及我使用它们向下滚动到特定 div id 的一些其他代码，通过动画将页面滚动到顶部。

*但是当我通过添加FB.Canvas.setAutoGrow();*删除 facebook 应用程序页面中的垂直滚动条时；和 *FB.Canvas.setSize();* 那段代码在 facebook 应用程序页面中不再起作用，我无法上下滚动。我搜索了一下，似乎我们应该使用Facebook JS SDK 中的*FB.Canvas.scrollTo*。

顺便说一句，尽管我尝试这样做，但似乎我做不到。如果有人能在这方面指导我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:26:01.637

在设置中，它应该设置为流体。也只使用 setAutoGrow() 就足够了。

请注意，FB.Canvas.scrollTo 和 FB.Canvas.setSize 仅在屏幕高度固定时才起作用，因此您可以管理画布大小并将用户定位到您想要的位置。事实上 FB.Canvas.scrollTo 在流体模式下不起作用！顺便说一句，如果您计划使用固定高度，则通过以下方式管理屏幕高度变化很有用：

```
$(window).resize(function() {

    scrHeight = $(window).height();

    // now you can use FB.Canvas.scrollTo and FB.Canvas.setSize 
    // here to satisfy your purposes  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:06:35.550

在您的 FB 应用程序设置中，您有：

```
Canvas Width:Fluid
Fixed (760px)
Canvas Height: Fluid
Fixed at X px 
```

检查您是否选择了流体高度

# javascript - 在 iframe 中调用函数

> ID：13492680
> 
> 赞同：0
> 
> 时间：2012-11-21T11:53:17.343
> 
> 标签：javascript, jquery

我想在这里做点什么。我有一个文档，我设置了一个数组。然后，jquery 获取这个数组并为每个值附加一个 iframe：

```
<script>
  var containers = new Array("test1", "test2");
</script> 
```

这个结果是 2 个 iframe，由 id 和他的名字标识。行。完美，工作。然后，在每个 iframe 内部，它调用一个文档。在本文档中，我有一个名为`play()`.

我正在`play()`通过返回警报进行测试。每当我单击一个按钮时，它都会起作用：

```
$("#viewport .next").click(function(){
    document.getElementById(containers[current]).contentWindow.play();
}); 
```

这行得通。完美。但是我把这个功能放在文件准备好时触发，它不起作用。

```
$(function() {
    document.getElementById(containers[current]).contentWindow.play();
}); 
```

它返回给我：

`Uncaught TypeError: Object [object Window] has no method 'play'`

我做错了什么？谢谢！

**编辑**

试图在 iframe 上应用 onload。没用。

```
var initialFrame = containers[qual];

initialFrame.onload = function() {
    document.getElementById(initialFrame).contentWindow.play();
}; 
```

**编辑2**

由于某种原因，它开始工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:57:24.433

等待第一个`load`事件`iframe`。

```
initialFrame.addEventListener("load", function() {
    initialFrame.contentWindow.play();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:11:33.733

您通常会像这样监听 iframe 的加载事件：

```
$("#iframe").load(function(){
    // iframe is loaded
}); 
```

...但我最近遇到了麻烦，所以我一遍又一遍地检查 iframe 的内容，直到它加载完毕，如下所示：

```
function loadFrame() {
    if($('body', $('#iframe').contents()).length != 1) {
        setTimeout(loadFrame,500);
    }
    else {
        // iframe is loaded
    }
};
loadFrame(); 
```

不确定这是否是最好的解决方案，但它确实有效。

# internationalization - 将 ISO-3166-1 国家代码映射到电话号码前缀

> ID：13492687
> 
> 赞同：2
> 
> 时间：2012-11-21T11:53:37.507
> 
> 标签：internationalization, iso-3166

我正在寻找将国家代码翻译成电话号码前缀的最佳方式。例如，SE 应该映射到 +46，NO 到 +47，等等。有任何开源的 java 库可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:03:59.630

我会看看谷歌的[libphonenumber](http://code.google.com/p/libphonenumber/)。国际电话号码周围有很多东西。

# javascript - 选择一个选项并自动填充文本字段但无法进入第一种模式

> ID：13492689
> 
> 赞同：0
> 
> 时间：2012-11-21T11:53:47.327
> 
> 标签：javascript, jquery, html, jquery-plugins

这是我的 Jquery 和 html 表单代码：[http](http://www.mediafire.com/file/ik2735dykdk90io/test3.html) ://www.mediafire.com/file/ik2735dykdk90io/test3.html （下载这个）这个代码没有错误..这工作正常..当我选择一个选项
然后它的值自动设置为文本框和文本框变为只读...没关系..这是我的目标..但是当我选择一个选项（一、二或三）时我有一点问题..如果我再次选择默认值value "===select option===" 然后自动只读文本字段不会正常出现（表示读写模式）...如果我选择 "===select option===" option then text field将自动变为正常模式....任何人都可以通过编辑此代码来解决此问题...thanxx in advanced.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:17:56.143

这有效：

[http://jsfiddle.net/2zfdq/3/](http://jsfiddle.net/2zfdq/3/)

```
$(document).ready(function(e) {
    $("#myOption").change(function(){
        var textval = $(":selected",this).val(); 
        $('input[name=student_mark]').val(textval);
        myTestForm.student_mark.disabled=(!textval)?false:true;
    })
});​ 
```

# google-drive-api - 我需要构建一个从 Google 驱动器上传或获取文件的 php 脚本

> ID：13492690
> 
> 赞同：0
> 
> 时间：2012-11-21T11:53:49.930
> 
> 标签：google-drive-api

我遵循了快速入门示例[http://developers.google.com/drive/quickstart-php](http://developers.google.com/drive/quickstart-php)但这是一个两步操作，我想要一个简单的脚本，无需第二步即可自动获取授权代码，我的脚本应该是一个没有用户交互的函数。

有人有简单的样品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:26:14.923

这是不可能的。[OAuth2](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31)是一个多步骤操作，**需要**用户交互，至少在您的应用第一次尝试访问该用户的 Drive 时。

# html - 编写 PDF 转换器的最快 API？

> ID：13492692
> 
> 赞同：0
> 
> 时间：2012-11-21T11:53:54.937
> 
> 标签：html, pdf, pdflib

有很多 API 或 SDK 可供开发人员编写 PDF 转换器。PDFLib、TCPDF、DOMPDF 等

也有现成的 PDF 转换器，但它们没有我想要的所有选项。所以我认为最好只写我自己的转换器。

如果您自己使用 HTML 到 PDF 转换器，大约需要 10 分钟。需要多长时间？是否需要您在到达任何地方之前编写一个完整的 HTML 解析器？

我的应用程序所需的主要功能是具有自定义文档大小，以及包含文本和图像的绝对定位的 div。没有 iframe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:53:34.310

以下是您可能应该如何考虑此任务的方式 - 您不是将 HTML 转换为 PDF，而是您正在编写一个将 HTML 渲染为 PDF 的渲染器。

因此，如果您没有 HTML 渲染器的外壳，那么这是您的第一步。它应该接受 HTML 并给定一个“窗口大小”将调用一组您实现的方法来呈现基元（绘制线条、放置图像、放置文本、放置链接等）。毫无疑问，您会遇到 HTML 页面没有固定高度而 PDF 页面有的问题。

接下来，您将需要一个体面的 PDF 后端。体面，我的意思是它不会在大量图像上爆炸，以理智的方式处理资源等等。它还应该具有合理的 Unicode 支持，因此如果您向其发送 Unicode 字符串，它会自动执行 PDF 机制以正确呈现它，因此您不必手动执行该工作（相信我，您不需要）。然后是链接——你打算用这些做什么？理想情况下，您应该跟踪它们并确定它们是否进入同一文档的特定子部分（这将成为带有 goto-view 操作的链接），或者它们是否进入网络（这将成为一个链接带有打开的 URI 操作），或者如果您要转换多个文档，是否应该在文档上有一个基本 URI 和相对 URI'

此外，还有导航和文档结构的概念。理论上，您应该能够抓取`<H1>`和其他标题标签，并为每个标签构建一个带有 goto view 操作的大纲树。

您应该注意的其他事项 - PDF 模型对大型文档组件（如图像、字体、colo 空间等）采用基于资源的方法，以便可以共享它们。考虑到这一点来构建渲染器通常会产生更好的 PDF 并使用更少的内存。如果您的 PDF 生成器允许这样做，您真的应该能够为特定图像创建资源并尽早将其写入文档（或临时文件），然后在将其放置在页面上时通过资源句柄引用它。对同一图像的其他引用将使用句柄并且不再占用文件中的空间。字体也是如此——如果您使用特定的字体，提前了解它们并拥有一个引擎会在使用它们时自动对它们进行子集化会有所帮助。

If you have the HTML renderer and the PDF back end, then this task should take you two weeks, maybe three, again assuming that your HTML front end and PDF back end are half reasonable.

# php - 如何通过表单上的提交按钮传递参数

> ID：13492699
> 
> 赞同：5
> 
> 时间：2012-11-21T11:54:16.210
> 
> 标签：php, html, forms

我想创建一个可以更改 PHP 制作的 mySQL 中的产品数据的 from。
我有自动递增并指定每个产品的键列。当我单击编辑产品链接时，它将传递我从每个产品中获得的键值并链接到 editPage.php

```
$Key = $data['Key']; 
<a href=\"editPage.php?Key=".$Key."\">edit</a> 
```

在editPage.php中，我从上一页获取键值，我想通过提交表单按钮将此值传递到下一页。我在操作链接中附加键值。

```
<?$Key = $_GET["Key"];?>
<form id="form2" name="form1" method="post" action="editWeb.php?Key=".$Key." \"> 
```

它不起作用，我可以通过其他方式传递 Key 值吗？如果您需要更多信息，请告诉我谢谢！！:))

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T11:59:07.017

您需要回显该值。

```
<form id="form2" name="form1" method="post" action="editWeb.php?Key=<? echo $Key ?>"/> 
```

您还可以使用隐藏输入：

```
<form id="form2" name="form1" method="post" action="editWeb.php"/>
<input type="hidden" name="Key" value="<? echo $Key ?>" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T11:57:15.907

您需要创建一个`hidden`输入字段并将该值放入其中。然后提交表格

```
<input type="hidden" id="Key" name="Key" value="<?=$Key ?>"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T12:03:28.337

```
<form id="" name="form" method="get" action="page.php"/>
 <name="" input type="hidden" value="">
 <input type="submit" value="">
 </form> 
```

GET->在所需页面 url 上显示隐藏值。通常我们使用 GET 来传递值，这取决于您的要求。

# c# - 在已经提供响应后重新激活页面上的按钮

> ID：13492702
> 
> 赞同：0
> 
> 时间：2012-11-21T11:54:32.747
> 
> 标签：c#, asp.net, sharepoint, button, postback

我有一个按钮，单击该按钮时会响应新生成的 csv 文件（下面的代码）。

```
 Response.ContentType = "application/csv";
  Response.AddHeader("content-disposition", [FILENAME DETAILS]);
  Response.Write([DATA]);
  Response.End(); 
```

但是由于页面已经响应，所以按钮变为非活动状态。

我需要在不刷新浏览器的情况下“重新激活”这个按钮。

**我试过的：**

*   作为一种解决方法，我还添加`btnMyButton.Enabled = false;`了 click 事件，以使用户清楚地知道不接受第二次单击它（不是理想的方法）。

如果对 ajax 等有任何建议，请注意这是在 SharePoint 框架内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:03:48.490

由于响应是浏览器将下载的文件，并且响应不会修改原始 html 页面，因此解决方案是使用 javascript 禁用此按钮。我看不到 SharePoint 如何导致该解决方案出现问题。

# c# - “请求格式无效”

> ID：13492705
> 
> 赞同：1
> 
> 时间：2012-11-21T11:54:36.403
> 
> 标签：c#, objective-c, http, webserver, webmethod

尝试连接以下 Web 方法时，返回“请求格式无效”：

```
public string myWebMethod(string test)
{
    return "connected";
} 
```

这是目标 C 代码：

```
NSString *seshID = @"test-session";       
NSString *post = [NSString stringWithFormat:@"test=%@", seshID];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSString *comparisonURLString = SERVER_COMPARE_URL_STRING;
NSURL *comparisonURL = [NSURL URLWithString: comparisonURLString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:comparisonURL];

[request setHTTPMethod:@"POST"];
[request addValue:postLength forHTTPHeaderField:@"Content-Length"];

NSHTTPURLResponse *urlResponse = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];

NSString *response = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];    
NSLog(response); 
```

但是，如果我更改 web 方法使其不带参数：

```
public string myWebMethod() 
```

并将我的 obj-c 代码中的相应行更改为：

```
NSString *post = [NSString stringWithFormat:@""]; 
```

它有效，响应：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">connected</string> 
```

谁能解释为什么后者似乎有效但前者无效？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:21:08.753

我在 JAVA WebMethod 和 C# 之间也遇到了类似的问题。通过从 SoapHeader 创建一个继承自 SoapHeader 并包含一个字符串 [] 的类 string1 解决了这个问题。

然后对于你的例子，你可以试试这个

```
public string myWebMethod(string[] test)
{
    return "connected";
} 
```

或者

```
public string myWebMethod(char[] test)
{
    return "connected";
} 
```

您也可以使用 Fiddler 检查真正传递了哪些数据。

# php - 将 JSON 字符串传递给 PHP 时，返回值为 NULL

> ID：13492706
> 
> 赞同：0
> 
> 时间：2012-11-21T11:54:41.330
> 
> 标签：php, javascript, json

我正在学习 JSON。我已经四处阅读以找到解决我可能做错的方法，但我真的找不到它。我正在尝试将 JSON strnig 传递给 PHP 并查看它返回的内容......无论我做什么，我当前的代码总是返回 null。我觉得我正在尽一切努力让它发挥作用。但显然我一定错过了什么

谁能告诉我为什么`$arrayData`总是返回`NULL`？

我可以看到当前发布的是`mydata=%7B%22name%22%3A%22yes%22%2C%22regno%22%3A%22hola%22%7D` 如果我不使用`JSON.stringify()`，那么我会看到数据发送为`mydata=[object Object]`

PHP

```
<?php
$mydata = $_POST['mydata'];
$arrayData = json_decode($mydata);
var_dump($arrayData);
 ?> 
```

HTML

```
<script>
function lol () {
            var name = "yes";
            var regno = "hola";
            var arrayData = {"name":name,"regno":regno};
            console.log(arrayData);

            $.ajax({  
                      url: "algo2.php"
                      ,type: "POST"
                      ,headers: {'Content-Type': 'application/json',}
                      ,data: {'mydata=' : JSON.stringify(arrayData)}
                      ,success : function(response) {                            
                        alert(response);            
                      }
                      ,error: function (xhr, ajaxOptions, thrownError) {
                        alert(thrownError);
                      }
                });
}

</script>
</head>
<button onclick="lol()">Try it</button> 
```

选项 2

```
function lol () {
            var name = "yes";
            var regno = "hola";
            var arrayData = {"name":name,"regno":regno};
            console.log(arrayData);
            console.log(JSON.stringify(arrayData)); 
            $.ajax({  
                      url: "algo2.php"
                      ,type: "POST"
                      ,data: 'mydata=' + arrayData
                      ,success : function(response) {                            
                        alert(response);            
                      }
                      ,error: function (xhr, ajaxOptions, thrownError) {
                        alert(thrownError);
                      }
                });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:56:13.203

一个。删除标题
b. 将密钥更改为`mydata`不带等号

```
var name = "yes";
var regno = "hola";
var arrayData = {"name":name,"regno":regno};

$.ajax({  
      url: "index.php"
      ,type: "POST"
      ,data: {'mydata' : JSON.stringify(arrayData)}
      ,success : function(response) {                            
        //alert(response);            
      }
      ,error: function (xhr, ajaxOptions, thrownError) {
        //alert(thrownError);
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:12:50.417

如果要将 JSON 发送到 php，则需要读取原始输入，如下所示：

```
$input = file_get_contents("php://input");
if (!empty($input)) {
    $arrayData = json_decode($input, true);
    var_dump($arrayData);
} 
```

同样在 jquery 中，我将它用于 json 请求：

```
$.ajaxSetup({ dataType:"json", mimeType:"application/json", contentType:"application/json"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:01:22.753

`urldecode()`如果您将数据字符串化，则 需要先获取数据：

```
$mydata="%7B%22name%22%3A%22yes%22%2C%22regno%22%3A%22hola%22%7D";
$json= urldecode($mydata);
$array = json_decode($json, true); //use the argument true if you want the object to be returned as an Associative array
print_r($array); 
```

如果你不使用 json_decode() 中的第二个参数，它将作为对象返回：

```
$mydata="%7B%22name%22%3A%22yes%22%2C%22regno%22%3A%22hola%22%7D";
$json= urldecode($mydata);
$object = json_decode($json);
echo $object->name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:09:30.727

> ```
> mydata=%7B%22name%22%3A%22yes%22%2C%22regno%22%3A%22hola%22%7D 
> ```

这是`application/x-www-form-urlencoded`数据，不是`application/json`数据。然而，您在标题中指定它是 JSON 数据。PHP 不会解码该数据，也不会填充`$_POST`数组。

发送带有 JSON 标头的实际 JSON 数据并自己解码（来自`php://input`），或者省略标头，发送 urlencoded 数据（如您所愿）并让 PHP 填充`$_POST`数组。

# maven - 在 Maven 中查找单个模块的错误

> ID：13492711
> 
> 赞同：2
> 
> 时间：2012-11-21T11:55:09.327
> 
> 标签：maven, findbugs

我想为我的项目中的单个模块运行 findbugs。更新了 pom.xml，如 [http://mojo.codehaus.org/findbugs-maven-plugin/usage.html](http://mojo.codehaus.org/findbugs-maven-plugin/usage.html)

<项目>

```
 [...]
  < build>

  [...]
 < plugin>

    < groupId>org.codehaus.mojo</groupId>
    < artifactId>findbugs-maven-plugin</artifactId>
    < version>2.5.2</version>
        < configuration>
          < findbugsXmlWithMessages>true</findbugsXmlWithMessages>
          < onlyAnalyze>nafw.-</onlyAnalyze>
        < /configuration>
        < executions>
        < execution>
          < phase>verify</phase>
          < goals>
            < goal>check</goal>
            < /goals>
        < /execution>
        < /executions>
  < /plugin>
[...] 
```

但是，当我运行“mvn findbugs:findbugs”或“mvn verify”时，findbugs 会针对整个项目运行，而不是针对单个模块，即“nafw”。请帮助可能的答案以及我不正确的地方。

# jenkins - jenkins 和 sonar 与数据库的工作流程

> ID：13492715
> 
> 赞同：0
> 
> 时间：2012-11-21T11:55:28.337
> 
> 标签：jenkins, sonarqube, jenkins-plugins

我已经安装了声纳、詹金斯和声纳詹金斯插件。

在一个工作项目中，我添加了声纳作为后期构建操作。现在当我开始工作时，它失败了：

“当前批处理和配置的远程服务器不共享相同的数据库配置”

我发现了两个可能的原因：

```
1\. The database URL on the batch and the server side don’t match
2\. There are two Sonar servers using this database. 
```

我检查了 1\. 原因和 url 是正确的，所以它可能是 2\. rason。

在 jenkins 上的工作正在进行的同时，我开始在 shell 上进行声纳。但没有进一步使用它。所以我的问题：

```
1\. When I start sonar over the shell(so I can browse to localhost:9000) does it automatically work with the database? 
```

这对我来说很有意义，但这是否意味着

```
I cant use sonar on his own (when jenkins uses it)? and that

Jenkins starts sonar automatically when he needs it? 
```

我对此很陌生，所以试图了解工作流程..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:06:36.000

在这种情况下，您要问两个问题。Sonar 是独立于 Jenkins 的独立服务器。正如您所发现的，它可以从命令行启动。

默认情况下，Sonar 将启动它自己的网络服务器并使用嵌入式数据库运行。将 Sonar 配置为连接到更永久的数据库（如 MySQL）是正常的（其他选项）。

Jenkins 插件运行 Sonar 的客户端部分。这些是扫描构建源代码的实际源代码分析工具。在分析运行结束时，源代码指标直接加载到 Sonar 的数据库中（来自 Jenkins，这就是您需要配置数据库凭据的原因）。

# javascript - 带有方法和全局回调的 jQuery 插件

> ID：13492716
> 
> 赞同：0
> 
> 时间：2012-11-21T11:55:28.250
> 
> 标签：javascript, jquery, json, jquery-plugins, callback

我想创建一个同时具有方法和回调的 jQuery 插件，方法可以工作，但我无法让回调工作，回调的范围让我感到困惑，

```
(function($)
{
    var methods = {

        create: function(options) {

            var defaults = {
                width: 320,
                height: 240,
                background: '#000',
                onstop: function(){}
            };

            var options = $.extend(defaults, options);

            return $(this).each(function(i) {

                console.log('create');

            });

        },
        stop: function(options) {

            var defaults = {
                onstop: function(){}
            };

            var options = $.extend(defaults, options);

            return $(this).each(function(i) {

                console.log('stop');
                options.onstop.call();

            });
        }
    };

    $.fn.myplugin = function(option) {

        if (methods[option]) {
            return methods[option].apply( this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof option === 'object' || ! option) {
            return methods.create.apply(this, arguments);
        } else {
            $.error('Method ' +  option + ' does not exist in jQuery.plugin');
        }    
    };

})(jQuery); 
```

所以在`<script>`：

```
$(document).ready(function(){

    $('#start').click( function(){
        $('#myvideo').myplugin('create', { onstop: function(){ console.log('on stop'); } });
    });

    $('#stop').click( function(){
        $('#myvideo').myplugin('stop');
    });

}); 
```

基本上，我似乎想让 onstop: function(){} 对插件全局化

/* ======== 更新代码（见注释） ======== */

```
(function($)
{

    var callbacks = {
        onready: $.Callbacks("once memory unique").add(function() {
            //console.log('onready');
        }),
        ondeny: $.Callbacks("unique").add(function() {
            //console.log('ondeny');
        }),
        onerror: $.Callbacks("unique").add(function() {
            //console.log('onerror');
        }),
        onstop: $.Callbacks("unique").add(function() {
            //console.log('onstop');
        })
    };

    var methods = {

        construct: function(){
        },
        create: function(options) {

            var defaults = {
                width: 320,
                height: 240,
                background: '#000',
                onready: function(){},
                onstop: function(){}
            };

            var options = $.extend(defaults, options);

            return this.each(function(i, elements) {

                for (var prop in options) {
                    if (prop in callbacks) {
                        callbacks[prop].add(options.prop);
                    }
                }

                callbacks.onready.fire();

            });

        },
        stop: function() {

            return this.each(function(i, elements) {
                callbacks.onstop.fire();
            });
        }
    };

    $.fn.myplugin = function(option) {

        if (methods[option]) {
            return methods[option].apply( this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof option === 'object' || ! option) {
            return methods.construct.apply(this, arguments);
        } else {
            $.error('Method ' +  option + ' does not exist in jQuery.plugin');
        }    
    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:33:37.837

我建议使用一些成熟的[`jQuery.Callbacks`](http://api.jquery.com/jQuery.Callbacks/)对象：

```
var callbacks = {
    onready: $.Callbacks("once memory unique").add(function() {
        console.log('ready');
    }),
    ondeny: $.Callbacks("unique").add(function() {
        console.log('deny');
    }),
    onerror: $.Callbacks("unique").add(function() {
        console.log('error');
    }),
    onstop: $.Callbacks("unique").add(function() {
        console.log('stop');
    })
}; 
```

现在，当你得到一些新的选择时，你可以做

```
for (var prop in options)
    if (prop in callbacks)
        callbacks[prop].add(options[prop]); 
```

并调用它们只是做

```
callbacks.onstop.fire(/*args*/); 
```

或者，如果您关心回调的上下文，请使用[`fireWith`](http://api.jquery.com/callbacks.fireWith/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:40:29.670

我使用 globalOptions 变量将插件初始化选项存储为全局，

这是用于测试和用作模板的两个文件。

jquery.plugin.js (函数($){

```
 var pluginName = 'myPlugin';

    var globalOptions = '';

    var methods = {

        create: function(options) {

            var defaults = {
                backgroundColor: '#000',
                color: '#fff',
                oncreate: function(){},
                onchangecolor: function(){},
                onloadpage: function(page){}
            };

            globalOptions = $.extend(defaults, options);

            return $(this).each(function(i, elements) {

                $(elements).data('globalOptions', globalOptions);

                globalOptions.oncreate();

            });

        },
        changeColor: function(){

            return $(this).each(function(i, elements) {

                globalOptions = $(elements).data('globalOptions');
                if (!globalOptions) { $.error('Error: ' + pluginName + ' has not been initialized yet'); return false; }

                $(this).css('background-color', globalOptions.backgroundColor);
                $(this).css('color', globalOptions.color);

                globalOptions.onchangecolor();

            });
        },
        loadPage: function(options){

            return $(this).each(function(i, elements) {

                globalOptions = $(elements).data('globalOptions');
                if (!globalOptions) { $.error('Error: ' + pluginName + ' has not been initialized yet'); return false; }

                globalOptions.onloadpage(options.page);
                location.href = options.page;

            });
        }

    };

    $.fn.myPlugin = function(option) {

        if (methods[option]) {
            return methods[option].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof option === 'object' || ! option) {
            return methods.create.apply(this, arguments);
        } else {
            $.error('Error: Method "' + option + '" does not exist in ' + pluginName);
            return false;
        }    
    };

})(jQuery); 
```

索引.html

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Example</title>
        <script src="jquery.min.js"></script>
        <script src="jquery.plugin.js"></script>
        <script>
$(document).ready(function() {

    var myElement = $('.container').myPlugin({
        color: '#555',
        backgroundColor: '#ddd',
        oncreate: function(){
            console.log('Callback: create');
        },
        onchangecolor: function(){
            console.log('Callback: onchangecolor');
        },
        onloadpage: function(page){
            console.log('Callback: onloadpage = '+page);
        }
    });

    $('.color').click(function(event){
        myElement.myPlugin('changeColor');
    });

    $('.page').click(function(event){
        myElement.myPlugin('loadPage', { page: '#test' });
    });

});
        </script>
    </head>
    <body>
        <div class="container">
            <button class="color">changeColor</button> <button class="page">loadPage</button>
        </div>
    </body>
</html> 
```

如果有人有更好的方法和添加“私有”方法的方法，请分享。:)

# jquery - 单击任何其他链接时关闭toggleClass？

> ID：13492717
> 
> 赞同：0
> 
> 时间：2012-11-21T11:55:28.820
> 
> 标签：jquery, toggle, toggleclass

我有这个切换滑动打开一个菜单并添加一个活动类来让你知道它的打开，我把它拼凑在一起并且有一个小故障..

```
$(".parents-toggle > a").click(function () {
          $(this).toggleClass('active');
         $(".parents-toggle > ul.sub-menu").not($(this).siblings()).slideUp();
         $(this).siblings(".sub-menu").slideToggle();
      });

      $(".parents-toggle-inner > a").click(function () {
      $(this).toggleClass('active');
         $(".parents-toggle-inner > ul.sub-menu").not($(this).siblings()).slideUp();
         $(this).siblings(".sub-menu").slideToggle();
      });​ 
```

如果您也单击任何其他按钮，它也会保持活动状态，因此除非您关闭它，否则保持活动状态......

如果您单击页面上的任何其他链接，是否可以删除活动课程？因此，即使有另一个与此不同的切换菜单，理想情况下任何链接..？

[http://jsfiddle.net/24k5U/2/](http://jsfiddle.net/24k5U/2/)

如您所见，您会获得大量橙色/活动按钮

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:00:48.013

`$('.active').removeClass('active');`在点击事件中添加一个。那应该解决它。

这样，您的代码现在变为：

```
$(".parents-toggle > a").click(function () {
    $('.active').removeClass('active');  // <---- This line added
    $(this).toggleClass('active');
    $(".parents-toggle > ul.sub-menu").not($(this).siblings()).slideUp();
    $(this).siblings(".sub-menu").slideToggle();
}); 
```

基本上，您所做的是确保在单击链接`class=active`之前没有链接。`toggleClass()`

您可以对内部链接或子链接执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:58:46.770

在将其应用于任何其他元素之前，从同一级别的其他元素中删除该类：

```
 $(".parents-toggle > a").click(function () {
      $(".parents-toggle > a").removeClass('active');
      $(this).toggleClass('active');
      $(".parents-toggle > ul.sub-menu").not($(this).siblings()).slideUp();
      $(this).siblings(".sub-menu").slideToggle();
  }); 
```

# python - 如何忽略 Python 类属性？

> ID：13492723
> 
> 赞同：1
> 
> 时间：2012-11-21T11:56:02.500
> 
> 标签：python, python-2.7

如果我们有一个类有几个默认参数设置为 None，如果它们是 None，我们如何忽略它们，如果它们不是（或至少其中一个不是 None）使用它们？

```
class Foo:
def __init__(self, first=1, second=2, third=3, fourth=None, fifth=None):
    self.first = first
    self.second = second
    self.third = third
    self.fourth = fourth
    self.fifth = fifth
    self.sum = self.first + self.second + self.third + self.fourth + self.fifth
    return self.sum

>>> c = Foo()
Traceback (most recent call last):
File "<pyshell#120>", line 1, in <module>
c = Foo()
File "<pyshell#119>", line 8, in __init__
self.sum = self.first + self.second + self.third + self.fourth + self.fifth
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:13:35.680

```
def __init__(self, first=1, second=2, third=3, fourth=None, fifth=None):
    if first is None:
        first = 0
    else:
        self.first = first 
```

然后它将添加零而没有副作用，而不是`None`

您也可以更改添加它们的部分并`None`首先进行测试，但这可能会减少打字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:38:12.543

```
 class test(object):
    def __setitem__(self, key, value):
        if key in ['first', 'second', 'third', 'fourth', 'fifth']:
            self.__dict__[key]=value
        else:
            pass #or alternatively "raise KeyError" or your custom msg

    def get_sum(self):
        sum=0
        for x in self.__dict__:
            sum+=self.__dict__[x]
        return sum

nk=test()
nk['first']=3
nk['fifth']=5
nk['tenth']=10
print nk.get_sum() 
```

输出：

```
>>> 8 
```

# django - django-registration url 被包含但不正确

> ID：13492724
> 
> 赞同：0
> 
> 时间：2012-11-21T11:56:08.890
> 
> 标签：django, url, django-registration

我开发了一个名为 textModif 的应用程序。我现在正在扩展它以包括注册功能。为此，我使用 django-registration 模块。

我可以毫无问题地到达 127.0.0.1:8000/textModif/accounts/register/。但是，当我单击提交时，出现错误：

```
Using the URLconf defined in mysite.urls, Django tried these URL patterns, in this order:
^admin/doc/
^admin/
^textModif/
The current URL, accounts/register/, didn't match any of these. 
```

URL 127.0.0.1:8000/accounts/register/ 确实不存在，应该是 127.0.0.1:8000/textModif/accounts/register。我还没有设法解决这个问题，因此将不胜感激。这是我的 textModif 模块中的 urls.py：

```
#!/usr/bin/python
# -*- coding: UTF-8 -*-

from django.conf.urls import patterns, url
from django.conf.urls.defaults import *
from textModif import views
from django.contrib.auth.views import login, logout, password_change, password_change_done, password_reset, password_reset_done, password_reset_confirm, password_reset_complete

# name = indique la référence qu'on va utiliser dans le template {% url qqch%}

urlpatterns = patterns('',
    url(r'^(index)?$', views.index, name='index'),
    url(r'^demo$', views.demo, name='demo'),

    url(r'^login?$', login, name='login'),
    url(r'^logout$', logout, name='logout'),
    url(r'^password_change$', password_change, name='password_change'),
    url(r'^password_change/done$', password_change_done, name='password_change_done'),
    url(r'^password_reset$', password_reset, name='password_reset'),
    url(r'^password_reset/done$', password_reset_done, name='password_reset_done'),
    url(r'^reset/(?P<uidb36>[0-9A-Za-z]{1,13})-(?P<token>[0-9A-Za-z]{1,13}-[0-9A-Za-z]{1,20})/$',
        password_reset_confirm,
        name='password_reset_confirm'),
    url(r'^reset/done/$', password_reset_complete, name='password_reset_complete'),         
    url(r'^processLogin$', views.processLogin, name='processLogin'),

    url(r'^accounts/', include('registration.urls')),
    #url(r'^processSubscr$', views.processSubscr, name='processSubscr'),
    url(r'^subscribe$', views.subscribe, name='subscribe'),

    url(r'^process$', views.process, name='process'),    
    url(r'^thanks$', views.thanks, name='thanks'),
    url(r'^contact$', views.contact, name='contact'),
    url(r'^blog$', views.index, name='blog'),
    url(r'^send$', views.send, name='send'),
    url(r'^faq$', views.faq, name='faq'),
    # ex: http://127.0.0.1:8000/textModif/1/
    url(r'^(?P<textTask_id>\d+)/$', views.detail, name='detail'),
    #url(r'^static/(?P<path>.*)$', 'django.views.static.serve',
    #{'document_root': '/home/gbertran/virtualenv_1/djangoProj_1/mysite/textModif/static'})
)

#from django.contrib.staticfiles.urls import staticfiles_urlpatterns
# ... the rest of your URLconf here ...
#urlpatterns += staticfiles_urlpatterns() 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:20:45.753

答案是更正模板，如评论中所示。

# big-o - 用简单的英语解释算法证明

> ID：13492725
> 
> 赞同：3
> 
> 时间：2012-11-21T11:56:09.467
> 
> 标签：big-o, proof, formal-verification, induction

我是一名从未正式学习过算法的程序员，并且一直想填补我学习中的空白。我目前正在阅读一些书籍和在线资料，我从概念上理解大 O，即它的用途，以及不同类别的性能，例如常数、线性、二次等。我可以编写问题并直观地理解不同方法的性能影响。

但是，我一直坚持的事情是**算法证明的符号**，我不确定在哪里可以找到这部分。我看过的所有书籍都假定这种知识水平。

例如，Skiena's *Algorithm Design Manual*中的这句话让我很难过：

***f(n) = O(g(n)) 表示 c* * *g(n) 是 f(n) 的上限。***

***因此存在某个常数 c，使得 f(n) 总是 ≤ c* * *g(n)，对于足够大的 n（即，对于某个常数 n0，n ≥ n0）。***

这是读者应该完成的推论练习：

***3n^2 − 100n + 6 = O(n^2)，因为我选择c = 3 且3n^2 > 3n^2− 100n + 6；***

我可以理解这两种说法，并且可以从逻辑上看出第二种说法是正确的。我也理解上限的概念，即这是最坏的情况。

但是我被困在简单的事情上，比如上面的内容是什么？

*   ***g(n)***

*   ***对于某个常数 n0，n ≥ n0***

总的来说，我无法将各个部分拼凑在一起来理解整个证明。

**谁能帮我用简单的英语解析上述陈述，并以对非技术人员有意义的方式展示它们与练习的关系**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:58:04.390

我希望您仍然可以使用答案:)。

**g(n)**是您要比较的函数**f(n)**，它是真正的运行时。例如，你会说冒泡排序是**O(n^2)**，使得**g(n)=n^2**。但是，直观地说，您的算法不会完全采用**n^2**时间单位（无论您想在此处插入什么时间单位）；但是，它可能需要**3n^2 - 100n + 6**（即**f(n)**）时间单位。

现在，Big-Oh 表示法的作用是比较两个函数的增长速度；请注意，这是一个*非常*粗略的比较。例如，它不区分需要**f(n)=n^2**时间单位的算法与其他需要**f(n)=5n^2**的算法，也不区分具有**f(n)=n^2**和其他时间单位的算法与**f(n)=n^2+n**。这就是**c**发挥作用的地方——如果你能找到任何可以与**g(n)**相乘的常数**c** ，那么结果函数对于每个**n**都返回一个大于**f(n)**的值，那么**f(n) = O(g(n))**。

 ********Big-Oh 表示法还关注的是f(n)**中增长最快的部分。假设您想比较**f(n) = n+100**和**g(n) = n**。直观地说，**f(n) = O(g(n))**，但是没有**c**可以与**g(n)**相乘，因此它总是大于**f(n)**；但是，**n**的增长速度显然快于**100**，而 100 根本没有增长。这就是最终**n0**发挥作用的地方：如果 a 对于*有限*数量的**n** ，则 Big-Oh 符号“容忍”它，**c*g(n)**不大于**f(n)**，只要它对于*无限*数量的**n**都更大。这个有限数用**n0**给出例如，对于所有**n < 1**（这是一个有限量：正好是数字 0），**f(n)=n+100**可以大于**c*g(n) = c*n**只要对于所有其他**n**（无限量：所有数字**>=1**，使**n0=1**）**f(n)**更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T17:53:55.823

这里的主要问题是你不习惯数学中使用的习语。

让我们逐句进行：

1.  **f(n) = O(g(n)) 表示 c * g(n) 是 f(n) 的上限。**

    *简单的英语*：嘿，写**c * g(n) 是 f(n) 的上限**对我来说工作量太大，从这里开始我会经常使用它。从现在开始，每次我想说的时候，我都会写**f(n) = O(g(n))**。此外，*f(n)*和*g(n)*只是函数，我不在乎是哪一个，只要它们以整数*n*作为参数并返回一些实值即可。*c*只是一些常数，因此我在上面所做的肯定是正确的。请记住，我并没有说任何关于复杂性、关于*f*或关于*g*的内容，我只是在创建一个快捷方式来说明**c * g(n) 是 f(n) 的上限**。

2.  **因此存在某个常数 c，使得 f(n) 总是 ≤ c * g(n)，对于足够大的 n（即，对于某个常数 n0，n ≥ n0）。**

    *简单的英语*：以防万一你不知道，我会回想一下函数的上限是什么。如果你能找到一个常数（我们称之为*c*）使得 f(n) ≤ c * g(n) 对于*足够大的 n ，***函数*g(n)就是**f(n)*****的上限**。你肯定想知道*足够大*意味着什么，是吗？我们只是说 f(n) ≤ c * g(n) 对于所有大于某个数的*n都必须为真。*我们不知道它是哪个数字，我们也不想知道，因为对我们来说唯一重要的是那个数字存在！我们将其称为*n0*以便我们可以说如果*n ≥ n0则**n*足够大*******.*******

****   **3n^2 − 100n + 6 = O(n^2)，因为我选择c = 3 且3n^2 > 3n^2− 100n + 6；**

    *简单的英语*：现在让我们尝试一个例子来展示它是如何工作的。当我写**3n^2 - 100n + 6 = O(n^2)**时，我们有 f(n) = 3n^2 - 100n + 6 和 g(n) = n^2。看看我在那里做了什么？我之前没有说*f(n)*和*g(n)*是什么，这一事实让我可以用任何函数代替。

    正如你所看到的，我在这里的意思是短语 c * n^2 是 3n^2 − 100n + 6 的上限。这是一个可以是真假的肯定。上限的定义将让我们知道如何判断它是否为真。证明这个肯定是真的一种方法是找到一些数字*c*和一些数字*n0*使得 3n^2 - 100n + 6 ≤ c * n^2，对于所有 n ≥ n0。如果我们尝试使用 c = 3，我们必须证明 3n^2 − 100n + 6 ≤ 3 * n^2 对于所有 n > n0，这等效于证明 -100n + 6 ≤ 0，对于某些 n > n0。最后我们可以说，要使其为真，我们需要 n0 ≥ 6/100。我们找到了我们的 n0 并且我们证明了整个肯定是真的*** 

 **在我看来，您的问题是您希望事情变得具体。另一方面，数学试图抽象。这就是为什么它提到函数*f*和*g*而没有说明它们实际上是什么。您只需要知道它们是函数，并且作为函数它们具有某些属性。这个想法是你想推理函数的属性而不是一些具体的函数。*同样的事情对n0*也是有效的，你只关心它的存在，而不是它的价值。如果存在，您可以将其考虑到您的推理中。

希望我的回答对你有所帮助。********

# windows - 为什么 Internet Explorer 不对 url 进行 url 编码？

> ID：13492727
> 
> 赞同：0
> 
> 时间：2012-11-21T11:56:12.220
> 
> 标签：windows, internet-explorer, url

我按如下方式启动 IE（第 7 版）：

```
"C:\Program Files\Internet Explorer\iexplore.exe" "http://somewhere.com/q=фыва" 
```

除了“фыва”部分被“????”替换 在`cmd`.

当 IE 启动时，它会在地址栏中显示预期的 url，但如果我查看实际流量，`????`则会发送 ( `3f3f3f3f`)。我希望它会对它进行 url 编码（实际上，它会将*空格*url 编码为“%20”）。

有没有办法让它向服务器发送正确的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:01:58.633

url 中禁止使用 Unicode 字符，请参阅

[URL 中的 Unicode 字符](https://stackoverflow.com/questions/2742852/unicode-characters-in-urls)

**%自己**将 unicode 字符编码为 - [http://somewhere.com/q=%D1%84%D1%8B%D0%B2%D0%B0](http://somewhere.com/q=%D1%84%D1%8B%D0%B2%D0%B0)

它可能会将它们作为一项*功能删除*

# ember.js - 使用 ember.js，如何在重新呈现 CollectionView 时收到通知？

> ID：13492736
> 
> 赞同：3
> 
> 时间：2012-11-21T11:56:49.660
> 
> 标签：ember.js

假设我`CollectionView`在 ember.js 中有一个。

最初，假设该`content`属性绑定到一个包含几个元素的数组。CollectionView 将渲染这些元素，一旦它们在 DOM 中，`didInsertElement`就应该首先为每个 childViews 调用，最后为它`CollectionView`自己调用。

让我们假设`content`发生了变化（例如添加了新项目，或者完全替换了数组）。将`CollectionView`追加新的孩子，或完全替换孩子。DOM 会相应地更新。但是没有`didInsertElement`要求`CollectionView`.

在对 DOM 进行所有更改后，我想运行一些自定义 JS。类似于 didRerenderElement 或 didUpdateElement 钩子。

**我尝试了什么但不起作用？**

1.  我不能将此代码放入`didInsertElement`CollectionView 中，因为每次数组更改和 DOM 更新时都不会触发该代码。
2.  我尝试观察`content`，但观察者总是会在实际 DOM 更新发生*之前触发。*
3.  我尝试观察`childViews`，但情况类似。

对我有用的一个晦涩的解​​决方案是：

```
App.MyCollectionView = Ember.View.extend({
  childrenReady: 1, // anything, value doesn't matter

  itemViewClass: Ember.View.extend({
    didInsertElement: function () {
      this.get('parentView').notifyPropertyChange('childrenReady');
    }
  }),

  childrenGotReady: function () {
    if (this.get('childViews').everyProperty('state', 'inDOM')) {
      // run that custom JS code here (e.g. apply jQuery masonry to the elements)
    }
  }.observes('childrenReady')      

}); 
```

但这太模糊了，也容易出现其他问题。

我读过这篇文章：[如何在重新渲染 Ember 视图的一部分时运行代码？](https://stackoverflow.com/questions/12119561/how-can-i-run-code-any-time-part-of-an-ember-view-is-rerendered)但这不适用于`CollectionView`s。

我在我的应用程序的很多地方都遇到了这个问题，我真的希望 emberjs 有一个标准的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T14:18:38.827

这是一个观察子元素数组的示例观察者，并在所有子元素触发其 didInsertElement 时回调。

```
addOnDidInsertObserver: function(children, callback) {
    var options = {
        willChange: function() {},
        didChange: function(children, removing, adding) {
            var insertedChildren = [];
            adding.forEach(function(added) {
                var onInsertElement = function() {
                    // remove this call back now (cleanup)
                    added.off('didInsertElement', onInsertElement)
                    // capture the child
                    insertedChildren.push(added);
                    // if all of the new children are rendered, fire
                    if (insertedChildren.length == adding.length) {
                        callback(insertedChildren);
                    }
                };

                added.on('didInsertElement', onInsertElement);
            });
        }
    };

    children.addEnumerableObserver(this, options);
    return {'context':this, 'children':children, 'options':options};
}

removeOnDidInsertObserver: function(observer) {
    observer.children.removeEnumerableObserver(observer.context, observer.options);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:34:50.037

didInsertElement 也应该适用于 collectionView。[来源](http://emberjs.com/api/classes/Ember.CollectionView.html#event_didInsertElement)。但是不能直接操作 CollectionView 的 childViews 属性。相反，从其内容属性中添加、删除、替换项目。这将触发对其呈现的 HTML 的适当更改。也调用 didInsertElement。

# http - 如何为 ServiceStack 自定义 HTTP-500 错误页面？

> ID：13492739
> 
> 赞同：3
> 
> 时间：2012-11-21T11:57:05.587
> 
> 标签：http, razor, error-handling, servicestack, internal-server-error

如果我的 ServiceStack 应用程序遇到未处理的异常并返回 HTTP-500，我想自定义显示的错误页面。

我正在使用 ServiceStack.Razor ( [http://razor.servicestack.net/](http://razor.servicestack.net/) ) 并尝试按照他们的示例进行操作（请参阅*在代码中轻松配置自定义错误页面*）。这是我尝试过的：

应用主机.cs：

```
SetConfig(new EndpointHostConfig
{
    CustomHttpHandlers = {
        { HttpStatusCode.InternalServerError, new RazorHandler("/ErrorInternal") }
    }
}); 
```

视图/ErrorInternal.cshtml：

```
An error has occured. 
```

但我仍然得到标准的 ServiceStack 错误页面“...的快照由 ServiceStack 在...上生成”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:02:03.343

The cshtml pages under the views folder are used to provide an HTML representation of your response DTOs. What you probably want are the "Dynamic pages without Controllers" for a 500 error. Move your ErrorInternal.cshtml to the root folder of your solution and your "/ErrorInternal" hander should work.

# .net - 序列化 WCF JSON 中的键/值

> ID：13492741
> 
> 赞同：1
> 
> 时间：2012-11-21T11:57:19.097
> 
> 标签：.net, json, wcf

我有以下代码

```
[DataContract]
    public class DeviceParam 
    {
        public long ID { get; set; }
        [DataMember]
        public string Key { get; set; }
        [DataMember(EmitDefaultValue = false)]
        public string Value { get; set; }
        [DataMember(Name = "param", EmitDefaultValue = false)]
        public List<DeviceParam> Param { get; set; }
    } 
```

问题是，它会产生：

```
{"Key":"Param1","param":[{"Key":"ParamChild1","Value":"1"}]}] 
```

我正在努力实现所需的格式：

```
{"Param1": {"ParamChild1" : "1" }} 
```

我无法做到这一点，因为该类包含自身的类。并且似乎 WCF 不喜欢我为实现它所做的所有修改。

使用 WCF 输出 JSON 实现这一点的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:37:18.630

按如下方式划分您的班级：

```
[DataContract]
    public class DeviceParam 
    {
        public long ID { get; set; }
        [DataMember]
        public string Key { get; set; }
        [DataMember(EmitDefaultValue = false)]
        public string Value { get; set; }
    }
 [DataContract]
  public class DeviceParamsList
  {
        [DataMember(Name = "param", EmitDefaultValue = false)]
        public List<DeviceParam> Param { get; set; }
  } 
```

我还没有尝试过，但这应该可以

# html - IE8、9、10 中的 HTML 和 GUID

> ID：13492742
> 
> 赞同：2
> 
> 时间：2012-11-21T11:57:21.303
> 
> 标签：html, internet-explorer, guid

我有一个 UL 列表，其中每个 LI 子标签都有一个名为“value”的属性，它的值是一个 GUID。我发现对于一个特定的 GUID，IE 只呈现 GUID 的第一部分（例如：如果 guid 是 93365457-30bc-45e4-a85a-b74728ec83fc 那么“值”属性的值就是 93365457。对于其他 GUID该值正确呈现。

您可以通过打开这个简单的 html 进行测试：

```
<!DOCTYPE html>
<html>
   <head>
      <title>Guid on IE test</title>
      <meta charset="utf-8">
    </head>
    <body>
      <ul>
         <li value="79c8c2b5-ea63-4a4e-8b2e-c55c8f814e83">1</li>
         <li value="93365457-30bc-45e4-a85a-b74728ec83fc">2</li>
         <li value="352c32a6-596e-4897-b297-7b5fb4a06bb1">3</li>
      </ul>
   </body>
</html> 
```

第一个和第三个 li 得到正确渲染，但第二个没有。我已经通过使用 IE 的开发人员工具和使用 javascript 读取值来检查这一点。

我已经在 Win2008 上的 IE 8,9 和 Win 8 上的 IE 10 上测试并复制了这个问题

是否有任何已知的解决此问题的方法？

我在使用 MS Project Server 2010 和 Sharepoint 2010 时遇到了这个问题（PJS 2010 查找类型自定义字段被呈现为包含 ul 的 iframe，其中 LI 标记是查找项和“值” " 属性具有每个查找项的唯一 ID）。

**稍后编辑：**

显然，所有第一部分为数字的 GUID / UUID 都会被截断。第一部分是字母数字的那些不

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:24:39.597

根据 html5 草案，您确实可以为 li 设置 value 属性，但仅限于**有序**列表 ( `<ol>`) 中的那些：

> 如果元素是 ol 元素的子元素：值

*资料来源：[关于 w3c 的 li 规范](http://dev.w3.org/html5/spec/single-page.html#the-li-element)*

此外：

> value 属性，如果存在，必须是一个有效的整数，给出列表项的序数值。

*来源：[w3c 上 li 的 value 属性](http://dev.w3.org/html5/spec/single-page.html#attr-li-value)*

那么，这可能就是 IE 无法正确检索该值的原因：在这种情况下它不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:26:18.210

该标准要求元素的`value`属性是数字。`li`您将看到其第一部分仅由数字组成的任何 GUID 都将以相同的方式运行。我认为 IE 所做的是它试图将其解析为一个数字，如果它不成功，那么它要么保持原样，要么如果第一部分是一个数字，那么它只保留那个。

如果你说源是由 MS 软件生成的，那么我想你无能为力（除了使用另一个浏览器）。否则，您可以简单地使用自定义属性而不是`value`.

# javascript - 这种方式是什么意思？

> ID：13492743
> 
> 赞同：1
> 
> 时间：2012-11-21T11:57:36.327
> 
> 标签：javascript

我有一个 JavaScript 源代码，但我不明白其中的一些内容。你能帮我吗，这是什么意思？

```
Partnerek = (function () {

    Partnerek = function () { }

    //there are functions in this way
    //I think this is a public function
    Partnerek.foo = function foo()
    {
      //code
    }

    //there are functions in this way
    //this is a non public function
     function foosecondway()
    {
      //code
    }

    return Partnerek;
})() 
```

这似乎是一堂课，但这不是一堂课。

1.  这是什么？
2.  为什么程序员会这样写？
3.  这是一个好方法吗？
4.  返回值是多少？
5.  代码中的两个函数“参数”是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:02:53.297

我不确定，但对我来说，它看起来像是一个类构建，它自己执行。所以如果你打电话

```
var test = new Partnerrek() 
```

这个变量将成为这个类的一个实例（这是由返回完成的）和构造函数

```
Partnerek = function(){} 
```

将被调用。

# sql - 创建存储过程的最佳方法

> ID：13492744
> 
> 赞同：0
> 
> 时间：2012-11-21T11:57:41.670
> 
> 标签：sql, ms-access, ms-access-2007

创建存储SQL过程的唯一方法是编写如下VBA函数是否正确？

```
Public Function CreateProc()
   Dim strProc As String
   strProc = "Create Procedure qryCustByCity " & _
             "(prmCity varchar) as " & _
             "select * from Customers where City = prmCity"
   CurrentProject.Connection.Execute strProc
End Function 
```

还是有更方便的方法？像交互式命令提示符这样的东西会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:01:08.277

以上可以简单地使用查询设计窗口创建，在 SQL 视图中稍作编辑，或者简单地从右键菜单中选择参数。另请参阅[如何在 MS Access 中创建存储过程？](https://stackoverflow.com/questions/3287545/how-do-i-make-a-stored-procedure-in-ms-access)

![参数查询](../Images/7531d11bc10a59767761a179733c8e4a.png)

# python - Python 内存异常

> ID：13492750
> 
> 赞同：0
> 
> 时间：2012-11-21T11:58:06.660
> 
> 标签：python, out-of-memory

我编写了一个函数来查找通过表的所有路径。

```
#'X' is a full cell, ' ' is an empty cell
test1 = ["  X  X XX ",
         " X   XX  X",
         " X X X   X",
         "     X X  ",
         "  X  X    "]

def numAllPercs(table, numStreams):
    indeksiInVrsticeSplittani = [map(lambda x,y:(x,y), sorted(range(0,len(table))*len(table[0])),range(0,len(table[0])) * len(table))[i:i+len(table[0])] for i in range(0,len(map(lambda x,y:(x,y), sorted(range(0,len(table))*len(table[0])),range(0,len(table[0])) * len(table))),len(table[0]))]

def Poti(tockaX,seznamPoti,table,vejitveniSeznam):
    if(tockaX[0]+1>=len(table) or table[tockaX[0]+1][tockaX[1]] == 'X') and (tockaX[1]+1>=len(table[0]) or table[tockaX[0]][tockaX[1]+1] == 'X') and (tockaX[1]-1<0 or table[tockaX[0]][tockaX[1]-1] == 'X') :
        return (seznamPoti if len(vejitveniSeznam)==0 else seznamPoti.append(vejitveniSeznam.pop()))

    if(tockaX[0]+1<len(table) and table[tockaX[0]+1][tockaX[1]] != 'X') and (tockaX[1]-1>=0 and table[tockaX[0]][tockaX[1]-1] != 'X') and (tockaX[1]+1<len(table[0]) and table[tockaX[0]][tockaX[1]+1] != 'X'):
        vejitveniSeznam.append(seznamPoti[-1])

    elif(tockaX[0]+1<len(table) and table[tockaX[0]+1][tockaX[1]] != 'X') and (tockaX[1]+1<len(table[0]) and table[tockaX[0]][tockaX[1]+1] != 'X'):
        vejitveniSeznam.append(seznamPoti[-1])

    elif(tockaX[1]+1<len(table[0]) and table[tockaX[0]][tockaX[1]+1] != 'X') and (tockaX[1]-1>=0 and table[tockaX[0]][tockaX[1]-1] != 'X'):
        vejitveniSeznam.append(seznamPoti[-1])

    elif(tockaX[0]+1<len(table) and table[tockaX[0]+1][tockaX[1]] != 'X') and (tockaX[1]-1>=0 and table[tockaX[0]][tockaX[1]-1] != 'X'):
        vejitveniSeznam.append(seznamPoti[-1])

    if(tockaX[0]+1<len(table) and table[tockaX[0]+1][tockaX[1]] != 'X'):
       seznamPoti.append(seznamPoti[len(seznamPoti)-1]+[indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]]])
       Poti(indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]],seznamPoti,table[:indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]][0]] + [table[indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]][0]][:indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]][1]] + "X" + table[indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]][0]][indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]][1]+1:]] + table[indeksiInVrsticeSplittani[tockaX[0]+1][tockaX[1]][0]+1:],vejitveniSeznam)

    if(tockaX[1]+1<len(table[0]) and table[tockaX[0]][tockaX[1]+1] != 'X'):
        seznamPoti.append(seznamPoti[len(seznamPoti)-1]+[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1]])
        Poti(indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1],seznamPoti,table[:indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1][0]] + [table[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1][0]][:indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1][1]] + "X" + table[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1][0]][indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1][1]+1:]] + table[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]+1][0]+1:],vejitveniSeznam)

    if(tockaX[1]-1>=0 and table[tockaX[0]][tockaX[1]-1] != 'X'):
       seznamPoti.append(seznamPoti[len(seznamPoti)-1]+[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1]])
       Poti(indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1],seznamPoti,table[:indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1][0]] + [table[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1][0]][:indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1][1]] + "X" + table[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1][0]][indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1][1]+1:]] + table[indeksiInVrsticeSplittani[tockaX[0]][tockaX[1]-1][0]+1:],vejitveniSeznam)

    return seznamPoti

def resujem(table,seznami):
    vsePoti = filter(lambda x:x[-1][0]==len(table)-1,filter(lambda x:x[0][0]==0,reduce(lambda x,y:x+y,map(lambda x: Poti(x,[[x]],[table[0][:x[1]]+"X"+table[0][x[1]+1:]]+table[1:],[]),map(lambda x: (0,x), map(lambda x:x[1],filter(lambda x:x[0]==' ',map(lambda x,y: (x,y), map(lambda x: list(x), table)[0], range(0,len(table[0]))))))))))
    vsePoti.sort()

    def mojPresek(kombinacija):
        return (0 if len(set(reduce(lambda x,y:x+y,kombinacija))) != len(reduce(lambda x,y:x+y,kombinacija)) else 1)

    return (len(list(vsePoti for vsePoti,_ in itertools.groupby(vsePoti))) if (numStreams == 1) else  sum(map(lambda x:mojPresek(x),[list(x) for x in itertools.combinations(list(vsePoti for vsePoti,_ in itertools.groupby(vsePoti)), numStreams)])))

return (0 if numStreams <= 0 else
        0 if len(filter(lambda x: x == 'X'*len(table[0]),table)) != 0 else
        0 if numStreams >  len(map(lambda x:x[1],filter(lambda x:x[0]==' ',map(lambda x,y: (x,y), map(lambda x: list(x), table)[0], range(0,len(table[0])))))) else
        resujem(table,[])) 
```

该函数的参数是：我们在其中搜索所有可能路径的表以及可以同时流过该表的流的数量。

该程序适用于流的值，但如果参数为 5 `0-4`，则返回内存异常。`numStreams`

这个问题有没有不需要我改变算法的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:17:56.277

不，这种方式没有解决方案。改变你的算法。好吧，好吧，如果您添加足够的内存，也许会有，但确实如此。你可以改变算法。如果这是令人失望的消息，我表示哀悼。

# avr - CVAVR 引导加载程序无法启动

> ID：13492758
> 
> 赞同：1
> 
> 时间：2012-11-21T11:58:38.500
> 
> 标签：avr

*Codevision avr v2.60 评测*

*   尝试使用向导创建新项目。
*   将所有`init`值设置为`0`（未使用）。
*   `BOOTRST`位设置为`0`（从复位`0x7000`（从字节地址
*   项目选项设置为*“bootloader 2048w”*（mega32）。
*   用*avrisp mk2编程*
*   如果我将此项目编译为*引导加载程序*，它将无法正常工作，但是当作为*应用程序*时，它可以正常工作
*   *保险丝*并`init`保持不变或改变，因此并不重要。

我在尝试为我的一些运行良好的项目制作*引导加载程序时遇到了这个问题。*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T12:11:50.063

除了重置之外，您还必须根据引导大小`BOOTRST`更改位。`BOOTSZx`

# php - 在字符串 php 中查找第二次出现的字符

> ID：13492759
> 
> 赞同：9
> 
> 时间：2012-11-21T11:58:41.823
> 
> 标签：php, string

想象一下我有这个字符串：

```
$info="portugal,alemanha,belgica,porto 1-0 alemanha, belgica 2-0"; 
```

我想知道第二个字符“-”的位置，所以我想要结果 2-0 而不是结果 1-0。

我正在使用这个函数，但它总是返回第一个位置，

```
$pos = strpos($info, '-'); 
```

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-21T12:00:04.510

对于这种特定情况，最简单的解决方案是使用[offset](http://php.net/manual/en/function.strpos.php)参数：

```
$pos = strpos($info, '-', strpos($info, '-') + 1); 
```

不过，您可能想研究使用[正则表达式](http://php.net/manual/en/function.preg-match.php)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-21T13:13:09.193

试试这个

```
preg_match_all('/-/', $info,$matches, PREG_OFFSET_CAPTURE);  
echo $matches[0][1][1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:12:08.810

您必须使用偏移参数

```
$pos = strpos($info, '-', [offset]); 
```

它将完美地工作。

# css - 带有图像边框和正文背景颜色的 div

> ID：13492761
> 
> 赞同：0
> 
> 时间：2012-11-21T11:58:49.960
> 
> 标签：css, html, jquery-mobile

我有一个徽标，我想在我的 jq-mobile 网站的标题中居中，我希望图像的其余部分是动态的，所以我制作了一个 div 使其完整。但我无法通过图像获得它。如果我设置绝对位置，它就消失了。我为此做了一个jsfiddle：http: [//jsfiddle.net/nMR85/52/](http://jsfiddle.net/nMR85/52/)。

我的 div 是

```
#example1 {
-moz-border-top-left-radius: 15px;
border-top-left-radius: 15px;
-moz-border-top-right-radius: 15px;
border-top-right-radius: 15px;
background-color: #fff;
height:3em;
} 
```

这是一张我希望它看起来像[http://www.imagebanana.com/view/f69uguue/final.png的图片](http://www.imagebanana.com/view/f69uguue/final.png)

怎么做到呢？我的另一个问题是我找不到将内容的背景颜色更改为白色的属性。jqmobile.com 的 ThemeRoller 也无法正常工作。是什么属性？！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:14:57.990

嘿，`background-color:white;`你可以`jquery.mobile.min.css`用下面提到的**CSS**属性更新你的

**CSS**

```
 .ui-mobile .ui-page-active {
    background:white;
    display: block;
    overflow: visible;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:05:49.953

您可以在 #example1 样式上使用负边距顶部：

```
#example1 {
    -moz-border-top-left-radius: 15px;
    border-top-left-radius: 15px;
    -moz-border-top-right-radius: 15px;
    border-top-right-radius: 15px;
    background-color: #fff;
    height:3em;
    margin-top:-2.8em;
}​ 
```

结果在这里：http: [//jsfiddle.net/nMR85/57/](http://jsfiddle.net/nMR85/57/)

改变背景颜色的属性是`background-color`：

> 背景颜色：白色；

您还可以使用`background`which 将覆盖任何其他背景属性，以防有一些图像。

# php - 使用 post 方法发送跨域请求

> ID：13492762
> 
> 赞同：1
> 
> 时间：2012-11-21T11:58:49.960
> 
> 标签：php, javascript

如何使用 Post 方法将跨域请求从 Javascript 发送到具有大量请求数据的 Php 文件？

我尝试过使用 $.ajax ， $.post 但与警告 POST 失败的问题相同。

这是我在桌面上使用 Javascript 的 HTML 文件 [call.html]::

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/
libs/jquery/1.3.0/jquery.min.js"></script>

</head>
<body>
<script type="text/javascript">
$.ajax({
    type: 'POST',
    url: 'http://localhost/GP/ALternate/file.php',
    crossDomain: true,
    data: '{"l":2}',
    dataType: 'json',
    success: function(responseData, textStatus, jqXHR) {
        var value = responseData.someKey;
    alert(value);
  //document.getElementById('w').innerHTML = value.d;
        },
    error: function (responseData, textStatus, errorThrown) {
        alert('POST failed.');
    }
});
</script>

<div id ='w'></div>
</body>
</html> 
```

这是我在本地主机上的 php [file.php] 脚本：

```
<?php
    header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']);
    header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
    header('Access-Control-Max-Age: 1000');
    header('Access-Control-Allow-Headers: Content-Type');

 $f= $_GET["l"]; 

 echo "{'d' : '".$f."'}";

?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T12:02:16.633

如果您想向不同的域发出 POST 请求，则必须使用[跨域资源共享。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

您将需要您的目标服务器添加一些响应标头才能使其正常工作。

您可以使用[JSONP进行 GET](http://en.wikipedia.org/wiki/JSONP)

您可以使用 jQuery 库为您处理大部分客户端复杂性。$.post(...)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T12:07:18.153

使用 jQuery 的[getJSON](http://api.jquery.com/jQuery.getJSON/)，启用回调。

# php - 使用 Tera-WURFL 无法获得正确的手机屏幕尺寸

> ID：13492763
> 
> 赞同：2
> 
> 时间：2012-11-21T11:58:52.510
> 
> 标签：php, android, web-services, mobile, wurfl

在我的 PHP 脚本中，我使用**Tera-WURFL** api 来获取移动手机的屏幕分辨率，但我得到的结果不正确......这是一个代码......

```
**<?php
require_once('Tera-Wurfl/TeraWurfl.php');

$wurflObj = new TeraWurfl(); 

$wurflObj->getDeviceCapabilitiesFromAgent();

echo "Markup: ".$wurflObj->getDeviceCapability("preferred_markup");

// see the display resolution
$width = $wurflObj->getDeviceCapability("resolution_width");
$height = $wurflObj->getDeviceCapability("resolution_height");
echo $_SERVER['HTTP_USER_AGENT'];
echo "<br/>Resolution: $width x $height<br/>";
?>** 
```

我在这里做错了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:50:36.363

您可以从以下网址下载和使用免费的 51Degrees.mobi Lite 数据和文档：http: [//sourceforge.net/projects/fiftyone/ ?source=directory](http://sourceforge.net/projects/fiftyone/?source=directory)

您可以使用以下代码使用 51Degrees.mobi 属性：

```
 <?php
require_once('51Degrees.mobi.php');

$ScreenPixelsHeight = $_51d["ScreenPixelsHeight"];
$ScreenPixelsWidth = $_51d["ScreenPixelsWidth"];

?> 
```

注意：存储在 $_51d 数组中的所有数据都存储为字符串，您可能需要将 $ScreenPixelsHeight 和 $ScreenPixelsWidth 转换为数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:41:59.957

您正在正确使用该库。该问题可能与您正在测试的设备的用户代理有关。例如，如果您正在使用桌面 Web 浏览器进行测试，则无法判断分辨率是多少，因为此信息不会在用户代理中传达，也无法推断。

请注意，我是 Tera-WURFL 的作者。

# python - 打印具有给定值的行

> ID：13492764
> 
> 赞同：1
> 
> 时间：2012-11-21T11:59:03.250
> 
> 标签：python

我正在尝试在 python 中运行一些简单的代码来读取文本文件并仅打印最后一列中具有特定值的行。

这是文本文件：

```
234 324 4
124 35 5
13 434 7
34 465 1
41 46 2 
25 62 2 
```

我尝试的代码是

```
data = np.loadtxt('SelectValueTest.txt')

line = range (0,5)
for line in data:
    for n in data[:,2]:
        if n ==1:
            print line 
```

我知道我需要更改`print line`位，因为这只是打印每一行（如果其中任何一行包含到 value `1`），但我不知道该放什么？

对不起，这个非常基本的问题！我刚刚开始并努力掌握它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:07:00.150

只需在空间上分割每一行，并检查获得的列表的最后一个元素是否等于所需的值：-

```
with open('SelectValueTest.txt', 'rb') as data:
    for line in data:
        if line.strip().split(" ")[-1] == '1':
             print line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:07:06.397

```
with open('SelectValueTest.txt', 'rb') as f:
    for line in f:
        if line.strip().endswith('1'):
            print line 
```

这将打印出所有以 1 结尾的行。您需要使用 strip() 删除行尾的换行符等。这将适用于您向我们展示的数据。但是，如果您在行尾有 2 位或更多位的值，那么您将需要使用 Rohit 的方法。

麦克风

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:05:16.570

所以，发生的事情是你在任何地方打印任何包含 1 的行。

更好的解决方案是使用 cvs 阅读器阅读它，如下所示：

```
with open(file, 'rb') as csvfile:
    data= csv.reader(csvfile, delimiter=' ')
    for line in data:
        if line[-1] ==1:
            print line 
```

# mysql - 用多列mysql更新一列值

> ID：13492771
> 
> 赞同：1
> 
> 时间：2012-11-21T11:59:35.207
> 
> 标签：mysql, codeigniter, sql-update

嗨，我的数据库中有一张表。

```
ShopID | ParentID | SELL 

1          0        2,3
2          1        1,2,3
3          1        2,3,4
4          0        5,6
5          4        5,6,7
6          4        6,7,8 
```

我想将子 `SELL`值添加到父商店的`SELL`值中，但不想添加重复值，

最后我想要一张这样的桌子

```
ShopID | ParentID | SELL 

1          0        1,2,3,4
2          1        1,3
3          1        2,4
4          0        5,6,7,8
5          4        5,7
6          4        6,8 
```

这可能吗`MySQL`，请帮忙。提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:35:09.940

试试这个：

```
SELECT s1.shopid, s1.parentid, IFNULL( s2.sales, s1.SELL ) SELL
FROM shop s1
LEFT JOIN (
  SELECT parentid, GROUP_CONCAT( sell ) sales
  FROM shop
  GROUP BY parentid
)s2 ON s1.ShopId = s2.parentid; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/780b0/8)

更新查询：

```
 update shop
    SET SELL=s.SELL 
    from shop join (select s1.shopid,s1.parentid,ifnull(s2.sales,s1.SELL) SELL from shop s1 left join 
    (select parentid,group_concat(sell) sales from shop
    group by parentid) s2
    on s1.ShopId=s2.parentid) s
    on shop.shopid = s.shopid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:11:31.050

我建议您创建一个新列。

像 ：

```
ShopID | ParentID | SELL | Total Sell 
```

但最好的方法是为每条记录存储一个值，例如：

```
ShopID | ParentID | SELL 

1          0        2
1          0        3 
```

比您能够轻松地操纵数据...

```
CREATE TABLE IF NOT EXISTS `sellforce` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ShopID` int(11) NOT NULL,
  `ParentID` int(11) NOT NULL,
  `Sell` int(11) NOT NULL,
  PRIMARY KEY (`id`)
)

INSERT INTO `sellforce` (`ShopID`, `ParentID`, `Sell`) VALUES
( 1, 0, 2),
( 2, 1, 1),
( 1, 0, 3),
( 2, 1, 3);

CREATE VIEW `sellforce1` AS select `sellforce`.`ShopID` AS `ShopID`,`sellforce`.`ParentID` AS `ParentID`,group_concat(distinct `sellforce`.`Sell` separator ',') AS `GROUP_CONCAT( DISTINCT ``Sell`` )` from `sellforce` group by `sellforce`.`ShopID`; 
```

# sql-server - SQL Server 2005 在索引扫描之前进行全表排序

> ID：13492774
> 
> 赞同：7
> 
> 时间：2012-11-21T11:59:59.620
> 
> 标签：sql-server, performance, entity-framework

我的 SQL Server 2005 数据库中的排序性能有问题。可以说我有以下查询：

```
select 
    id, versionId, orderIndex
from Forms_Page
where
    versionId = 'AFCF4921-31B4-44C1-B3A7-913910F7600E'
order by
    orderIndex 
```

此查询将返回 7 行，执行时间约为 23 秒。这个查询的执行计划如下（还不能发图）：

**选择（成本：0%）-> 排序（成本：11%）-> 聚集索引扫描（成本：89%）**

如果我删除“order by”子句，查询将在约 4 毫秒内完成，如预期的那样。

为什么 SQL Server 在获取请求的行之前进行排序？这对我来说没有意义。为什么不先获取 7 行并只对那些进行排序？我是否缺少某些东西，例如数据库配置，或者这是预期的行为？

我可以使用内部选择，如下所示，强制引擎先获取行然后排序，这将在约 6 毫秒内返回行，但由于我们使用的是 EF，这不是一个好的解决方案我们（我们可以在内存中对结果进行排序，但是我们对一些生成带有排序的 SQL 代码的实体使用 LoadWith 选项，并且该代码也遇到了相同的“排序依据”问题）。

```
select *
from(
    select 
        id, versionId, orderIndex
    from Forms_Page
    where
        versionId = 'AFCF4921-31B4-44C1-B3A7-913910F7600E'
) T
order by
    T.orderIndex 
```

我已经测试了一些索引是排序的列，它固定的东西，但只是因为列已经排序。似乎是一个笨拙的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:40:51.973

首先，我不知道它为什么这样做！话虽如此，这里有几件事你可能已经尝试过了。

*   查询提示：您是否尝试过使用此处记录的各种查询提示？[http://msdn.microsoft.com/en-us/library/ms181714.aspx](http://msdn.microsoft.com/en-us/library/ms181714.aspx)。特别是`RECOMPILE`选项。

*   [DBCC FREEPROCCACHE](http://msdn.microsoft.com/en-us/library/ms174283.aspx)和[DBCC DROPCLEANBUFFERS](http://msdn.microsoft.com/en-us/library/ms187762.aspx)的常用步骤呢？这些是我通常尝试的事情。

*   更新统计信息：通过运行`UPDATE STATISTICS tablename`或`EXEC sp_updatestats`更新整个数据库的统计信息。

最后，也许与您的情况无关，但这里有一个很好的表提示解释：http: [//blog.sqlauthority.com/2009/11/19/sql-server-understanding-table-hints-with-examples/](http://blog.sqlauthority.com/2009/11/19/sql-server-understanding-table-hints-with-examples/)

# java - Hibnernate 插入或更新日期时间 mysql 总是得到 12:00:00 或 00:00:00

> ID：13492775
> 
> 赞同：1
> 
> 时间：2012-11-21T12:00:00.603
> 
> 标签：java, hibernate, struts2

我是冬眠新手

我用hibernate和struts2写了一个小应用程序

我的问题是

当我更新日期时间时，我的时间将是 00:00:00 或 12:00:00 它与我选择的时间不正确，例如 04:50:10 或 18:20:11

我尝试了很多次，但它直到不起作用

在我的表单中，我有一个字段是字符串，然后我将其转换为日期，然后使用休眠更新它

我的转换代码

```
public Date convertStringToDate(String str) {
        Date date = null;
        SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss a");
        try {
            date = formatter.parse(str);
        } catch (ParseException ex) {
            Logger.getLogger(NewsAdminAction.class.getName()).log(Level.SEVERE, null, ex);
        }
        return date;
    }

    public String convertDateToString(Date date) {
        SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss a");
        String str = formatter.format(date);
        return str;
    } 
```

我的更新代码休眠

```
//create session begin transaction

    String sqlNoThumb = "UPDATE News set title = :title, info = :info, publicdate = :publicdate, active = :active, titleviet = :titleviet where idnews = :idnews";

    Query query = session.createQuery(sqlNoThumb);
                    query.setString("title", news.getTitle());
                    query.setString("info", news.getInfo());
                    query.setDate("publicdate", news.getPublicdate());
                    query.setInteger("active", news.getActive());
                    query.setString("titleviet", news.getTitleviet());
                    query.setInteger("idnews", news.getIdnews());
                    result = query.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:25:45.233

您需要使用 a `java.sql.Timestamp`，而不是 a`java.sql.Date`

[从 JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)：

> *为了符合 SQL DATE 的定义，由 java.sql.Date 实例包装的毫秒值必须通过将小时、分钟、秒和毫秒设置为零来“规范化”*

# xcode - UIImageView 和 UIWebView 在一个视图控制器中

> ID：13492776
> 
> 赞同：0
> 
> 时间：2012-11-21T12:00:01.557
> 
> 标签：xcode, uiwebview

是否可以在一个 UIViewController 中同时拥有 UIImageView 和 UIWebView？或者如何将 UIImageView 作为 SubView 添加到 UIWebView。我试图在情节提要中创建它，但是当我运行程序时，UIImageView 中的图像没有显示，只有 UIWebview 的 htmlstring。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:40:31.370

您可以让它们都由单个视图控制器处理，方法是使它们成为视图控制器主视图的子视图并将它们安排在其中。

我不太确定创建 UIWebView 的子视图，因为它不仅是一个简单的视图，而且已经由它自己的子视图组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:40:58.373

在根 UIView 中包含 UIImageView 和 UIWebView。定义属性以从 UIViewController 控制两个视图。

# indexeddb - 获取添加到 indexedDB 对象存储的对象的 id

> ID：13492785
> 
> 赞同：6
> 
> 时间：2012-11-21T12:00:32.163
> 
> 标签：indexeddb

给定一个 indexeddb 数据库，其中一个声明的 objectstore 为：

```
var objectStore = thisDb.createObjectStore("table", {keyPath: "id", autoIncrement: true}) 
```

当我使用添加请求添加新项目时：

```
var resp = objectStore.add(row) 
```

**如何在 onsuccess 函数中获取此添加项的新 id？**

```
resp.onsuccess = function(e) { /* code to get the id of the added item */} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T14:37:24.247

您可以在 e.target.result 中找到插入的密钥。

# silverlight - Silverlight Pivot 和 CxmlCollectionSource：获取单个项目 URL

> ID：13492786
> 
> 赞同：1
> 
> 时间：2012-11-21T12:00:34.393
> 
> 标签：silverlight, pivot, deepzoom

我有一个 CXML 文件，它描述了一个包含许多对象的 Pivot 集合。每个对象都由一个标签描述，例如：

```
<I Id="0" N="0" Source="tiles/684.xml">
  <Size Width="2604" Height="3140"/>
</I> 
```

`CxmlCollectionSource`我使用连接到控件的 CXML 加载 CXML `PivotViewer`。这一切都很好。

现在我想显示对应于集合中任何对象的图像`PivotViewer`。我已经`MultiScaleImage`在我的应用程序中添加了一个控件来做到这一点。它有一个`Source`属性，可以接受指向 DeepZoom XML 文件（即`Source`CXML 中的属性引用的文件）的 URL。

但我不知道如何获得该值，因为似乎没有任何方法可以`PivotViewerItem`通过`CxmlCollectionSource`. `PivotViewerItem`有一个`VisualImageId`属性，它是项目集合的索引，但这并没有多大帮助，因为我无法从该 ID 获取`Source`属性。

同样，最终目标只是显示与 Pivot 集合中的对象相对应的图像。如果有更好/更简单的方法来做到这一点，我很想听听！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:07:15.680

它背后的文档不多，但这是在项目模板中绑定到图像源的方式：

```
<pivot:PivotViewerItemTemplate x:Key="smallTemplate" MaxWidth="300">
        <pivot:PivotViewerMultiScaleSubImageHost VerticalAlignment="Top" CollectionSource="{Binding [VisualCollectionSource][0] }" ImageId="{Binding [VisualImageId][0]}"/>
    </pivot:PivotViewerItemTemplate>
<pivot:PivotViewerItemTemplate x:Key="largeTemplate">
    <Grid Width="900" Height="1000" Background="LightGray">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <pivot:PivotViewerMultiScaleSubImageHost  CollectionSource="{Binding [VisualCollectionSource][0] }" ImageId="{Binding [VisualImageId][0]}"/>
        <Grid Margin="20" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <TextBlock Text="{Binding [Name][0]}" FontSize="28" TextWrapping="Wrap"/>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding [Description][0]}" FontSize="20" TextWrapping="Wrap" Margin="0,20, 0, 0"/>
                <StackPanel Orientation="Vertical" Margin="20,20,20,0" Grid.Column="1" Width="300">
                    <TextBlock Text="Speakers" FontSize="24"/>
                    <ListBox ItemsSource="{Binding [Speakers]}" FontSize="22"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</pivot:PivotViewerItemTemplate> 
```

请注意，您可能只需要上面的“smallTemplate”，除非您在交易卡中添加一些花哨的东西。您需要在后面的代码中设置模板：

```
pv.ItemTemplates = new PivotViewerItemTemplateCollection()
            {
                (PivotViewerItemTemplate) Resources["smallTemplate"],
                (PivotViewerItemTemplate) Resources["largeTemplate"]
            }; 
```

# jquery - 表单是 submitimg 即使我正在使用 return false

> ID：13492788
> 
> 赞同：0
> 
> 时间：2012-11-21T12:00:46.123
> 
> 标签：jquery

表单是 submitimg 即使我调用 return false 我的代码

```
$(document).ready(function() {
    $('.submit').click(function() {
        $('.hour').each(function() {
            var $hours = $(this).val();
            if ($hours == "") {
                alert(" Active Time is required");
                return true;
            }
        });
    });
});​ 
```

提交按钮

```
 <input type="submit" class="submit" name="Submit" id="Submit" value="Submit" 
onclick="return validateForm();"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:02:54.870

您需要在`.each`回调函数之外返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:03:10.440

```
$('.submit').click(function() {
var r = false;
 $('.hour').each(function() {
            var $hours = $(this).val();
            if ($hours == "") {
                alert(" Active Time is required");
                r = true;
            }
        });
return r;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:08:15.813

您不会从绑定到提交按钮的单击事件处理程序返回任何内容。`.filter()`您可以通过使用将元素集减少到没有值的方法来显着缩短代码`.hour`，并且您可以从事件处理程序返回对结果元素集长度的检查结果，以允许/阻止表单提交：

```
$(".submit").click(function () {
    // This return statement returns from the click event handler
    return $(".hour").filter(function () {
        // This one returns from the filter callback (once for each element)
        return this.value === "";
    }).length === 0;
});​ 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/APyE7/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:23:33.393

```
<script>

    $(document).ready(function(){
        $('.submit').click(function(e){ 
    var flag = false;
            $('.hour').each(function() {
                var $hours =  $(this).val();
                if (!flag && $hours == "")
                {
                    flag = true;
                    alert(" Active Time is required"); 
                    e.preventDefault();
                } 
            });   
        });
    });

</script> 
```

提交按钮

```
<input type="submit" class="submit" name="Submit" id="Submit" value="Submit" /> 
```

# java - GWT如何在表单内提交日期框

> ID：13492798
> 
> 赞同：2
> 
> 时间：2012-11-21T12:01:31.183
> 
> 标签：java, forms, gwt

在我的 gwt 应用程序中，我有一个 FormPanel，里面有一个 DateBox。问题是 DateBox 没有“名称”属性，那么如何使用表单的 POST 请求将 DateBox 值提交给服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:38:38.373

> 问题是 DateBox 没有“名称”属性：

您可以将 name 属性设置为`DateBox`，因为它具有`TextBox`：

```
DateBox dateBox = new DateBox();
dateBox.getTextBox().setName(name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:37:15.673

要获取 a 的值`DateBox`，请使用[DateBox.getValue()](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/datepicker/client/DateBox.html#getValue%28%29)方法获取[Date](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)对象。一旦你引用了`Date`对象，你可以使用`Date`对象的各种方法来获取和格式化日期值，或者简单地调用[Date.toString()](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)。

```
Date date = dateBox.getValue();
String dateValue = date.toString(); 
```

编辑：误解了这个问题。设置`DateBox`提交表单的名称

```
dateBox.getTextBox().setName("dateBox"); 
```

# xcode - 使用 AVCaptureSessionPreset 640x480 录制视频给我 480x640

> ID：13492801
> 
> 赞同：0
> 
> 时间：2012-11-21T12:01:42.707
> 
> 标签：xcode, video, ios6, avfoundation, avcapturesession

我正在使用录制视频，`avfoundation`并`captureSession`使用`AVCaptureSessionPreset640x480`. 但录制后，当我看到我的视频时，它的尺寸变为 480x640。

**编辑：**使用纵向模式录制的问题是您将始终获得 480X640。由于设备的方向，因此需要根据方向大小旋转视频。

我已经解决了这个问题，但它根本不是题外话。

```
- (CGAffineTransform)transformFromCurrentVideoOrientationToOrientation:(AVCaptureVideoOrientation)orientation
{

    CGAffineTransform transform = CGAffineTransformIdentity;

    // Calculate offsets from an arbitrary reference orientation (portrait)
    CGFloat orientationAngleOffset = [self angleOffsetFromPortraitOrientationToOrientation:orientation];
    CGFloat videoOrientationAngleOffset = [self angleOffsetFromPortraitOrientationToOrientation:self.videoOrientation];

    // Find the difference in angle between the passed in orientation and the current video orientation
    CGFloat angleOffset = orientationAngleOffset - videoOrientationAngleOffset;
    transform = CGAffineTransformMakeRotation(angleOffset);

    return transform;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:54:36.833

您是否垂直握住手机（人像方向）？

视频是在使用加速度计检测到的设备方向上捕获的。您可以[强制它使用横向](https://stackoverflow.com/a/3663172/1450993)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:11:08.187

使用纵向模式录制的问题是您将始终获得 480X640。由于设备的方向，因此需要根据方向大小旋转视频。

我已经解决了这个问题，但它根本不是题外话。

```
- (CGAffineTransform)transformFromCurrentVideoOrientationToOrientation:(AVCaptureVideoOrientation)orientation
{
    CGAffineTransform transform = CGAffineTransformIdentity;

    // Calculate offsets from an arbitrary reference orientation (portrait)
    CGFloat orientationAngleOffset = [self angleOffsetFromPortraitOrientationToOrientation:orientation];
    CGFloat videoOrientationAngleOffset = [self angleOffsetFromPortraitOrientationToOrientation:self.videoOrientation];

    // Find the difference in angle between the passed in orientation and the current video orientation
    CGFloat angleOffset = orientationAngleOffset - videoOrientationAngleOffset;
    transform = CGAffineTransformMakeRotation(angleOffset);

    return transform;
} 
```

# multithreading - 同步对象与非同步对象

> ID：13492802
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:01:43.877
> 
> 标签：multithreading, object, optimization, compiler-construction, synchronization

> 对于现代编译器来说，“非同步对象通常比同步对象执行得更好”这句话并不总是正确的。

这是我今天多次听到的断言。我对断言有两种不同的解释：

1.  随着现代编译器的进步，强加在同步对象上的开销可能非常小，以至于可以忽略不计。如果是这样的话，现代编译器是如何实现这个目标的呢？

2.  在某些情况下，同步对象和非同步对象的性能相同，甚至在某些情况下，同步对象的性能优于非同步对象。我不认为这是可能的，但谁知道呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:52:22.993

*一种情况是编译器可以通过线程间转义分析*静态确定一个对象永远不会被多个线程访问。然后编译器可以使用非同步版本的方法初始化“vtable”（或任何适当的方法分派机制）。

PS。以上是关于声明的第一种解释。

# java - 如何计算出我的系统可以表示的最大斐波那契数？

> ID：13492807
> 
> 赞同：3
> 
> 时间：2012-11-21T12:01:58.277
> 
> 标签：java, fibonacci

我被要求找出可以在我的系统上显示的最大斐波那契数。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T12:33:59.617

> 确定可以在我的系统上显示的最大斐波那契数

为此，您需要使用 BigInteger

运行此程序，直到您的应用程序因资源不足而停止。

```
public static void main(String... args) {
    BigInteger a = BigInteger.ONE;
    BigInteger b = BigInteger.ONE;
    String last = null;
    try {
        for (long count = 1; ; count++) {
            BigInteger c = a.add(b);
            last = c.toString();
            a = b;
            b = c;
            if (count % 10000 == 0)
                System.out.println("... " + count);
        }
    } catch (Throwable e) {
        System.out.println("The largest value which was calculated was");
        System.out.println(last);
    }
} 
```

我会先尝试使用少量内存，例如`-mx16m`

更新：即使有 16 MB 的限制，它也计算了 13K 项并且仍在运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T12:22:29.687

`int`Java中最大的斐波那契数：

```
public class FibonacciTest
{
    public static void main(String[] args)
    {
        System.out.printf("%d\n", largestFibonacciInt());
    }

    public static int largestFibonacciInt()
    {
        int temp;
        int last = 1;
        int fib = 1;

        while (fib + last > fib) {
            temp = fib;
            fib += last;
            last = temp;
        }

        return fib;
    }
} 
```

您也可以`long`通过简单地替换所有出现的 来做到这一点`int`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T12:18:49.707

If your goal is to find the largest fibonacci number that can be represented as an `int` in Java, you could simply calculate the next number until it overflows:

```
public static void main(String[] args) {
    System.out.println("Largest integer Fibonacci number: " + maxFibonacci());
}

public static int maxFibonacci() {
    int n = Integer.MAX_VALUE;
    int fib = 1;
    int temp = 0;

    for (int i = 2; i < n; i++) {
        int last = fib;
        fib += temp;
        if (fib < 0) return last; //overflow, we are done
        temp = last;
    }
    return 0; //unreachable
} 
```

Now obviously, your system is able to calculate a much higher number, for example by using a BigInteger. In that scenario, the limit will be one of:

*   processing time
*   available memory or
*   (if you have a lot of memory and a lot of time) limitation of BigInteger which is backed by an `int[]` and therefore limited to an array size of 2^31.

* * *

Finally, it is probably worth saying that your problem can be better solved mathematically.

If you need to find the largest Fibonacci number that is less than a certain number `N`, you can also use [the rounding calculation](http://en.wikipedia.org/wiki/Fibonacci_number#Computation_by_rounding):

```
phi^n / sqrt(5) < N 
```

which gives you:

```
n < log(N x sqrt(5)) / log(phi) 
```

Then you can calculate the right hand side part for your chosen `N`, round it down to find `n`, and calculate the corresponding Fibonacci number with:

```
F(n) = floor(phi^n / sqrt(5)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-28T20:09:45.237

您可以计算 100K 甚至更多。对于我电脑里的100k，计算结果只需要1.4s。

```
private static final Map<Integer, BigInteger> fbNumbers = new HashMap<>();

public static void main(String[] args) {
    fbNumbers.put(0, BigInteger.valueOf(1));
    fbNumbers.put(1, BigInteger.valueOf(1));
    long start = System.currentTimeMillis();
    System.out.println(fbCalculationForBigNumbers(100000));
    System.out.println(String.format("%d ms", System.currentTimeMillis() - start));
}

private static BigInteger fbCalculationForBigNumbers(int num) {
    return IntStream.rangeClosed(0, num).mapToObj(i -> fbCalculation(i)).max((x,y) -> x.compareTo(y)).get();
}

private static BigInteger fbCalculation(int num) {

    if (fbNumbers.containsKey(num)) {
        return fbNumbers.get(num);
    }

    BigInteger result = fbCalculation(num - 1).add(fbCalculation(num - 2));
    fbNumbers.put(num, result);
    return result;

} 
```

# java - 使用 Java 中的 DocumentBuilder/Document 在 XML 文件中查找“未标记”内容

> ID：13492811
> 
> 赞同：1
> 
> 时间：2012-11-21T12:02:11.023
> 
> 标签：java, xml, document

我必须解析一个 XML 文档。我正在使用 javas DocumentBuilder 类来创建一个文档。xml 文件的结构如下所示：

```
<text>
    <something>
        <word>
            Someword
        </word>
    </something>
    <something>
        <word>
            Someotherword
        </word>
    </something>
    .
    <something>
        <word>
            Someword
        </word>
    </something>
</text> 
```

我需要提取文本。我从提取这样的单词开始：

```
 final NodeList nl = dom.getElementsByTagName("word"); 
```

...并遍历给定的列表，以重建文本。问题是“。”。我无法用我的方法重建句子结构。有没有一种优雅的方式来做到这一点？如何访问“。”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:07:42.113

您可以在 xml 文件中添加新标签：

```
<fullstop /> 
```

您可能想查看此[文档](http://www.d.umn.edu/cs/thesis/nachiket_kamat_ms.pdf)，但它的可信度如何，我不能说。

而且，重新设计或重新构建文档还为时不晚。以免以后出现此类问题。

# android - 我想以字符串数组的形式发送结果

> ID：13492814
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:02:28.933
> 
> 标签：android, arrays

我想以字符串数组而不是文本形式发送结果。这是以文本形式发送结果的代码。但我想以字符串数组形式发送结果。

```
ChannelSftp sftpChannel = (ChannelSftp) channel;

try {
    Vector ls=sftpChannel.ls("/home/abc/Desktop");

    for(int i = 0; i < ls.size(); i++) {
        text += sftpChannel.pwd() + "/" + (((LsEntry)ls.get(i)).getFilename()) + "\n";
    }

    t.post(new Runnable() {
        public void run() { t.setText(text); }
    });

    } catch (SftpException e1) { } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:16:03.027

```
ChannelSftp sftpChannel = (ChannelSftp) channel;

try {
    Vector ls=sftpChannel.ls("/home/abc/Desktop");
    String[] strings = new String[ls.size];

    for(int i = 0; i < ls.size(); i++) {
        strings[i] = sftpChannel.pwd() + "/" + (((LsEntry)ls.get(i)).getFilename());
    }

    t.post(new Runnable() {
        public void run() { t.setText(strings.toString()); }
    });

    } catch (SftpException e1) { } 
```

# javascript - PhantomJS/CasperJS 站点登录，PhantomJS 不接受 cookie

> ID：13492821
> 
> 赞同：11
> 
> 时间：2012-11-21T12:02:47.450
> 
> 标签：javascript, login, phantomjs, casperjs

我最近尝试登录一个强制我接受 cookie 的网站。我正在使用 phantomJs 和 casperJs。我编写了一个小脚本来处理登录，但它会将我重定向到一个告诉我必须接受 cookie 的站点。电子邮件和密码只是占位符。

我要登录的网站是`https://de.buyvip.com/`. 但我需要单击按钮`Anmelden mit Amazon`，以便我可以使用我的亚马逊帐户登录。其他登录表单不起作用。（这导致了这个长网址，我只是从浏览器中复制了它）

有人能帮我吗？

这是脚本：

```
 var casper = require("casper").create()
    var fs = require('fs');
    var page = "https://www.amazon.de/ap/signin?openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&pageId=quarterdeckde&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&clientContext=280-1158662-4507036&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.mode=checkid_setup&marketPlaceId=A38GABX06X24K&openid.assoc_handle=quarterdeckde&openid.return_to=https%3A%2F%2Fde.buyvip.com%2Fsignin&openid.pape.max_auth_age=0&siteState=http%3A%2F%2Fde.buyvip.com%2Fhomepage%3Fhash%3DM";

    phantom.cookiesEnabled = true;

    casper.start(page, function()
    {
        console.log("started");
        this.fill('form#ap_signin_form', {
            'email' : 'myMail',
            'password' : 'myPass'
        }, true);
    });

casper.then(function()
{
    fs.write("test.html", this.getHTML(), "w");
});

    casper.run(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-15T17:31:50.027

也许稍后，但这是答案：

```
casper.userAgent('Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)'); 
```

cookie 失败是因为亚马逊不喜欢默认 casper 的用户代理，在我的情况下：“Mozilla/5.0 (Macintosh; Intel Mac OS X) AppleWebKit/534.34 (KHTML, like Gecko) CasperJS/1.0.2+Phantomjs/1.7 .0 Safari/534.34"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-21T14:32:43.117

我的任务是制作将登录到亚马逊网站的 Phantom 脚本。

如果您运行 Phantom`phantom.javascriptEnabled = true;`并尝试使用`username`and登录 Amazon `password`，您将收到 JavaScript disabled 消息，这意味着 Javascript 无法执行。未启用 JS 时，您将无法登录亚马逊，因为 cookie 不起作用。

亚马逊在登录前执行小JS代码设置和删除cookie，这里是部分源代码：

```
function setCookie(c_name,value,expiredays)
    {
        var exdate=new Date();
        exdate.setDate(exdate.getDate()+expiredays);
        document.cookie=c_name+ "=" +escape(value)+
            ((expiredays==null) ? "" : ";expires="+exdate.toGMTString());
    }

function checkCookieEnabled(nodeId)
        {
            setCookie('amznTest','1',null);
            if(getCookie('amznTest')){
                deleteCookie('amznTest');
            }else{
                document.getElementById(nodeId).style.display = 'block';
            }
        }
        checkCookieEnabled('message_warning'); 
```

经过数小时的解决方法，您不仅必须进行设置`page.settings.javascriptEnabled = true;`，`phantom.javascriptEnabled`而且一切正常（对我而言）。

`phantom`为对象启用 javascript 执行：

```
phantom.cookiesEnabled = true; 
```

`page`为您的对象启用 javascript 执行（**重要**）：

```
 var webPage = require('webpage');
    var page = webPage.create();
    page.settings.javascriptEnabled = true;
page.settings.userAgent = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.157 Safari/537.36'; 
```

`username`现在，只需使用您的and提交表单`password`，您就可以登录了。

## 更新：

这是[如何使用 PhantomJS 登录亚马逊](http://code-epicenter.com/how-to-login-amazon-using-phantomjs-working-example/)的非常好的资源。相同的模式可用于登录任何其他网站。

# android - 对话框中的 Android EditText

> ID：13492822
> 
> 赞同：0
> 
> 时间：2012-11-21T12:02:48.930
> 
> 标签：android, android-edittext

在我的应用程序中，我有一个带有 EditText 的对话框。我想自动获取编辑框的键盘。即，当显示对话框时，应该显示键盘。有什么方法可以在不触摸 EditText 的情况下显示键盘。

我添加了对话框代码

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(APP_NAME);
    builder.setMessage(message);
    // Use an EditText view to get user input.
    final EditText inputDevice = new EditText(this);
    final EditText inputTester = new EditText(this);

    if (id == DLG_ID_TESTER) {
        inputTester.setInputType(InputType.TYPE_TEXT_FLAG_CAP_SENTENCES);
        // inputTester.setThreshold(1);
        inputTester.setSelectAllOnFocus(true);
        inputTester.requestFocus();
        inputTester.setId(TXT_ID);
        builder.setView(inputTester);
    } else {
        inputDevice.setId(TXT_ID);
        inputDevice.setSelectAllOnFocus(true);
        builder.setView(inputDevice);
    }
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int whichButton) {

            if (id == DLG_ID_TESTER) {
                String val = inputTester.getText().toString();
                testerName = val;
                txtTesterName.setText(testerName);
            } else if (id == DLG_ID_DEVICE) {
                String value = inputDevice.getText().toString();
                deviceId = value;
                txtDeviceId.setText(deviceId);

            }
            return;
        }

    });

    builder.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    return;

                }
            });

    return builder.create();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:09:29.083

尝试此[链接以打开 Dailog 而无需触摸 Edittext](http://glorious-arvind.blogspot.in/2012/11/show-or-hide-soft-keyboard-on-opening.html)

```
**YOUR_VIEW**.postDelayed(new Runnable() {
            @Override
            public void run() {
                InputMethodManager keyboard = (InputMethodManager)
                getSystemService(Context.INPUT_METHOD_SERVICE);
                keyboard.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
            }
        },200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:24:52.910

您可以重写 OnFocusChange() 方法以查看整个对话框何时获得焦点，然后使用“始终可见”输入模式调用 getWindow().setSoftInputMode()。

# php - 将配方读取到数组

> ID：13492823
> 
> 赞同：1
> 
> 时间：2012-11-21T12:02:51.007
> 
> 标签：php, javascript-events

我正在尝试创建一个食谱网站，但我碰壁了。我在一个目录中的 .txt 文件中有食谱，我需要扫描目录，读取并将成分（面粉、鸡蛋、牛奶等）存储在一个数组中，并且还包括每种成分的数量，以便将它们与什么进行比较由用户请求。我有一个部分可以扫描目录并列出可用食谱的缩略图，但我不知道如何设置数组，以便我可以将每个项目列出到一个 Onclick 事件中，该事件将每个项目添加到一个碗中。我不希望显示数量，它们仅用于最后的交叉参考。

扫描并显示我拥有的可用食谱

"

```
 $count = 0;
    $recipes = opendir('Recipes'); 
    while (false !== ($recipe = readdir($recipes))) {
        if($recipe != "." && $recipe != "..") {
            $value = str_replace(".txt","",$recipe);

            echo  '<td> <img src="../Recipe/Images/'; 
            echo $value;
            echo '.jpg" width="50" height="50" onclick="show(\'';
            echo $value;
            echo '\'); $recipe; return false"; alt="';
            echo $value;
            echo '" /></td>';
            $count++;
        }
    }
    echo '</tr></table>';

    echo '<p>You have '.$count .' recipes to chose from</p>';
    closedir($recipes); 
```

?>

任何人都可以指点我吗？

# python - Python中从十六进制到补码

> ID：13492826
> 
> 赞同：10
> 
> 时间：2012-11-21T12:02:52.940
> 
> 标签：python, bit-manipulation, ones-complement

有没有一种简单的方法可以在 python 中产生一个补码？

例如，如果您采用十六进制值`0x9E`，我需要将其转换为`0x61`.

我需要将二进制 1 换成 0，将 0 换成 1。感觉这应该很简单。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-21T12:04:05.610

只需对 0xFF使用[XOR 运算符：`^`](http://docs.python.org/2/reference/expressions.html#binary-bitwise-operations)

```
>>> hex(0x9E ^ 0xFF)
'0x61' 
```

如果您需要使用大于一个字节的值，您可以从您的值的[`int.bit_length()`方法](http://docs.python.org/2/library/stdtypes.html#int.bit_length)创建掩码：

```
>>> value = 0x9E
>>> mask = (1 << value.bit_length()) - 1
>>> hex(value ^ mask)
'0x61'
>>> value = 0x9E9E
>>> mask = (1 << value.bit_length()) - 1
>>> hex(value ^ mask)
'0x6161' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-26T04:59:15.793

哈。刚刚发现python`bin()`返回一个字符串！

这样我们就可以玩得开心了！

```
for x in numbers: # numbers is a list of int
    b = bin(x)
    #print b # e.g. String 0b1011100101
    b = b.replace('0', 'x')
    b = b.replace('1', '0')
    b = b.replace('x', '1')
    b = b.replace('1b', '0b')
    #print b # String 0b0100011010
    print int(b, 2) # the decimal representation 
```

# javascript - javascript/html/php 捕获 textarea 中的换行符

> ID：13492828
> 
> 赞同：1
> 
> 时间：2012-11-21T12:02:53.937
> 
> 标签：javascript, textarea, line-breaks

我拼命地试图捕捉文本区域中的换行符。我想将 textarea 的内容存储在数据库中，然后在从数据库中提取时将其显示在 textarea 中。textarea 应该作为一个编辑框。在任何时候我都不需要在 html 中显示。

我能够让它在一个普通的 html 页面上工作，该页面通过将 textarea 中的文本转换为行数组、在字符 \r\n 上爆炸并将其分解为逗号分隔来将 textarea 内容发布到服务器行列表。然后，当我想重新显示这些行时，我将逗号替换为 \n 并获取可以在文本区域内显示的带有换行符的文本。有点破解，但它的工作原理。

但是，当我没有使用 html 将 textarea 内容发布到服务器时，它似乎不起作用，而是使用 javascript 中的 getElementByID 将它们拉出来，然后用 javascript 发布到服务器。

当我使用 html 获取 textarea 内容并在 \r\n 上展开时，我得到一个包含与行一样多的元素的数组。

但是，当我在 javascript 中使用 getElementByID 拉取 textarea 内容并在 \r\n 上展开时，我只会在行运行的数组中获得一个元素。换句话说，我没有得到换行符

任何人都知道为什么在 javascript 中拉取文本时换行符会消失，并对如何在 javascript 中保留换行符有任何建议？

谢谢。

缩写代码：javascript

```
getText() {

var textobj = document.getElementById("text");
var text = textobj.value;

...some code for AJAX

    document.getElementById("droptext").innerHTML=xmlhttp.responseText;
... some more code for Ajax

xmlhttp.open("GET","savetext.php?text="+text,true);
xmlhttp.send();
} 
```

html

```
<div id="droptext"><textarea id="text"><textarea></div>
<a href="javascript:void(0);" onclick="getText();">Save Text</a> 
```

php

```
$text = $_GET['text'];
$textarray = explode("\r\n", $text);
$text = implode(",",$textarray); //converts to comma delimited list

...store in database

...fetch from database and echo text back for editing

$text = $row['text'];
$text = str_replace( ",", "\n", $text);

echo '<textarea>'.$text.'</textarea>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:06:44.450

在另一个问题上找到了答案。

[JavaScript：如何向 HTML 文本区域添加换行符？](https://stackoverflow.com/questions/863779/textarea-line-breaks-javascript)

Javascript 在向服务器提交请求时不会对换行符进行 urlencode。他们基本上消失了。因此，您需要在请求之前在 javascript 中进行自己的 urlencoding。

```
var text2 = text.replace("\n\r","&#13;&#10;"); 
```

请注意，在其他讨论中有一些建议，即 POST 和 GET 请求的 urlencoding 在不同语言中的处理方式不同，但是当我测试时，我没有发现两者之间有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:03:04.187

存储未修改的整个内容有什么问题？我不知道您使用的是什么数据库，但大多数应该支持带有换行符的文本字段。

如果这仍然是一个问题，可能问题是使用“\r\n”，你能告诉我们发送到服务器的内容吗？

此外，您的 php 返回的 textarea 是错误的 id，这应该会阻止您多次执行 getText。

# c# - 打印对象数组

> ID：13492831
> 
> 赞同：1
> 
> 时间：2012-11-21T12:03:13.387
> 
> 标签：c#, arrays, object

```
class Bil
{
    public string regnr
    {
        get { return regnr; }
        set { regnr = value; }
    }

    public string maerke
    {
        get { return maerke; }
        set { maerke = value; }
    }

    public int vaegt
    {
        get { return vaegt; }
        set { vaegt = value; }
    }

    public bool traek
    {
        get { return traek; }
        set { traek = value; }
    }

    public Bil(string regnr, string maerke, int vaegt, bool traek)
    {
        this.regnr = regnr;
        this.maerke = maerke;
        this.vaegt = vaegt;
        this.traek = traek;
    }

    public double StatsAfgift(int vaegt, bool traek)
    {
        this.vaegt = vaegt;
        this.traek = traek;
        double statsAfgift = 0;
        if (vaegt <= 800)
            statsAfgift = vaegt * 50;
        else if (vaegt > 800)
            statsAfgift = 800 * 50 + 75 * vaegt - 800;
        if (traek == true)
            statsAfgift = statsAfgift + 200;
        return statsAfgift;
    }
}

Bil Honda = new Bil("225689", "Honda", 500, true);
Console.WriteLine("Statsafgiften på bilen er afsat til: {0:C}", Honda.StatsAfgift(500, true));
Bil Citroen = new Bil("985632", "Citroen", 400, false);
Bil Peugeot = new Bil("125697", "Peugeot", 650, true);

Bil[] bilSamling = new Bil[3];
bilSamling[0] = Honda;
bilSamling[1] = Citroen;
bilSamling[2] = Peugeot;

foreach (Bil b in bilSamling)
{
    Console.WriteLine("Statsafgift på {0} er {1}", b.maerke, b.StatsAfgift(b.vaegt, b.traek))
} 
```

澄清一下，bil = 汽车。Statsafgift = 税。Vaegt = 重量，maerke = 品牌，regnr = 注册号。

我需要打印出数组中的对象以及每个对象计算的税。尝试编译代码时，我也遇到了一些堆栈溢出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:15:21.883

问题在于

```
public string regnr 
            {
                get { return regnr; }
                set { regnr = value; }
            } 
```

尝试改用自动属性

```
public string Regnr { get; set; } 
```

当您尝试为此目的分配时引发溢出`regnr = value;`，您应该使用类似的其他变量：

```
private string _regnr;

public string Regnr
{
      get { return _regnr; }
      set { _regnr = value; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:30:47.250

好吧，您的 stackoverflow 错误来自您的属性。您需要定义一个本地私有变量来保存它们（因为它们当前正在调用自己）或者更好地将它们定义为自动属性；

```
public bool traek { get; set; } 
```

看起来您也不需要传递参数，因为它们已经在对象上；

```
public double StatsAfgift() // don't need params heere
{
    double statsAfgift = 0;
    if (vaegt <= 800)
        statsAfgift = vaegt * 50;
    else if (vaegt > 800)
        statsAfgift = 800 * 50 + 75 * vaegt - 800;
    if (traek == true)
        statsAfgift = statsAfgift + 200;
    return statsAfgift;
} 
```

允许你做；

```
Console.WriteLine("Statsafgift på {0} er {1}", b.maerke, b.StatsAfgift()); 
```

你甚至可以在没有 foreach 循环的情况下使用它；

```
Console.WriteLine(String.Join("\n", bilSamling.Select(b => String.Format("Statsafgift på {0} er {1}", b.maerke, b.StatsAfgift())))); 
```

# java - Ant 脚本在执行 CVS 检出后找不到目标

> ID：13492832
> 
> 赞同：1
> 
> 时间：2012-11-21T12:03:14.277
> 
> 标签：java, ant, cvs

我有一个 Ant 脚本，它从 CVS 签出一个项目，然后构建和部署它。要求是脚本应该是“脚本”文件夹中代码的一部分，并且每次结帐完成时，文件都将被覆盖。当构建完成而不进行 CVS 签出时，一切正常。我的代码片段是

```
<target name="deploy.main"  depends="checkProperty" if="propertyExist">
    <echo message="${release.number}"/>
    <sequential>
    <parallel>
    <antcall target="tag.branch"/>
    <antcall target="checkout.main"/>
    </parallel>
    <antcall target="stopJboss" />
    <sleep seconds="10" />
    <antcall target="replaceTag"/>
    <antcall target="deploy" />
    <antcall target="moveConfigFiles" />
    <antcall target="promote"/>
    <antcall target="stopRemoteJboss"/>
    <parallel>
        <antcall target="startJboss" />
        <antcall target="startRemoteJboss"/>
    </parallel>
    </sequential>
</target> 
```

该文件在结帐期间总是被新文件覆盖，蚂蚁是否在开始时立即读取整个文件并将其保存在内存中？还是尝试在新文件中查找内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:45:53.663

任何（以及许多工具，如 make）都使用依赖信息的有向无环图。他们一次性构建依赖信息读取文件。（这样做是为了即使对同一个目标有多个依赖项，它也只会执行一次）。构建图表后，对“该”项目文件的修改将不会产生任何影响。

# facebook - 检查用户是否喜欢 Facebook 画布应用

> ID：13492833
> 
> 赞同：2
> 
> 时间：2012-11-21T12:03:19.790
> 
> 标签：facebook, facebook-like, facebook-fql, facebook-php-sdk

我有一个画布应用程序，它试图检查用户是否是这个代码的粉丝：

```
$params = array(
 'method' => 'fql.query',
  'query' => "SELECT uid FROM page_fan WHERE page_id='MY_APP_ID' and uid = me()",
);

$result = $facebook->api($params); 
```

$result[0] 没有设置，因此是空的，即使我喜欢这个应用程序。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:21:25.887

看来这里有两个可能的问题 -

1.  您尚未请求`user_likes`用户的许可。您将需要此权限才能访问用户“喜欢”的任何数据。

    无论您打算如何检索信息，服务器端或客户端，无论是否使用 SDK，都需要此权限。

2.  您已在 FQL 查询中指定了应用程序的 ID 而不是 a `PAGE_ID`。用户不能像不能“喜欢”另一个用户一样“喜欢”一个应用程序。

您可以在“应用程序详细信息”页面中为您的应用程序创建一个页面。您可以导航到`https://developers.facebook.com/apps/APP_ID/appdetails`并向下滚动到“联系信息”部分。在那里你会看到一个“创建 Facebook 页面”按钮。

![](../Images/6f71744c186eb68606d92506dd3b1052.png)

一旦你创建了一个应用页面，你就可以使用它`PAGE_ID`来让你的用户“喜欢”它，然后就可以在你的应用程序中验证喜欢的动作。

# php - Preg Patterns，忽略转义字符

> ID：13492840
> 
> 赞同：0
> 
> 时间：2012-11-21T12:03:35.353
> 
> 标签：php, regex, string, matching, expression

我想创建一个正则表达式来查找以单引号或双引号开头和结尾的字符串。

例如，我可以匹配这样的情况：

```
String: "Hello World"
RegEx: /[\"\'][^\"\']+[\"\']/ 
```

但是，当引号出现在字符串本身中时，就会出现问题，如下所示：

```
String: "Hello" World" 
```

我们知道上面的表达式是行不通的。

我想要做的是在字符串本身内进行转义，因为无论如何这都是必需的功能：

```
String: "Hello\" World" 
```

现在我可以想出一个长而复杂的表达式，其中包含一个组中的各种模式，其中一个是：

```
RegEx: /[\"\'][^\"\']+(\\\"|\\\')+[^\"\']+[\"\']/ 
```

然而，这对我来说似乎太过分了，我认为可能有一个更短、更优雅的解决方案。

预期语法：

```
run arg1 "arg1" "arg3 with \"" "\"arg4" "arg\"\"5" 
```

如您所见，引号实际上仅用于确保带有空格的字符串被计为单个字符串。别担心`arg1`，我应该能够匹配未引用的参数。

**我会让这更容易，参数只能使用双引号引起来。所以我从这个问题的要求中去掉了单引号。**

我修改了 Rui Jarimba 的例子：

```
/(?<=")(\\")*([^"]+((\\(\"))*[^"])+)((\\"")|")/ 
```

现在这对于大多数情况来说都很好，但是最后一种情况可以解决这个问题：

```
run -a "arg3 \" p2" "\"sa\"mple\"\\" 
```

在这种情况下，第二个参数 end with `\\"`which 是允许嵌套字符串末尾的反斜杠的常规方式，不幸的是，正则表达式认为这是一个转义的引号，因为模式`\"`仍然存在于模式的末尾。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:15:05.573

首先，请使用`'`字符串来编写您的正则表达式。这可以为你节省很多逃跑的时间。

然后我看到了两种可能性。您尝试的问题是，它只允许在字符串中的一个位置出现连续的转义引号。此外，这允许在开头和结尾使用不同的引号。您可以使用反向引用来解决这个问题。所以这将是a）稍微优雅和b）正确：

```
$pattern = '/(["\'])(\\"|\\\'|[^"\'])+\1/'; 
```

请注意，交替的顺序很重要！

这样做的问题是，您不想转义不用于分隔字符串的引号。因此，另一种可能性是使用环视（因为反向引用不能在字符类中使用）：

```
$pattern = '/(["\'])(?:(?!\1).|(?<=\\\\)\1)+\1/'; 
```

请注意，始终需要四个连续的反斜杠来匹配单个文字反斜杠。那是因为在实际字符串中`$pattern`，它们最终成为`\\`，然后正则表达式引擎“使用”第一个来转义第二个。

**如果它不是**起始引号，这将匹配任意字符。或者如果前一个字符是反斜杠，它将匹配起始引号。

[工作演示。](http://ideone.com/4iZnXd)

顺便说一句，这相当于：

```
$pattern = '/(["\'])(?:\\\\\1|(?!\1).)+\1/'; 
```

但是在这里您**必须**再次按此顺序编写交替。

[工作演示。](http://ideone.com/H9j6vB)

最后一点。您可以通过分别提供两个可能的字符串（单引号和双引号字符串）来避免反向引用：

```
$pattern = '/"(?:\\\\"|[^"])+"|\'(?:\\\\\'|[^\'])+\'/'; 
```

但是您说您正在寻找简短而优雅的东西；）（尽管最后一个**可能**更有效……但是您必须对其进行描述）。

请注意，我所有的正则表达式都没有考虑一种情况：在带引号的字符串之外转义引号。即`Hello \" World "Hello" World`会给你`" World"`。您可以使用另一个负面的lookbehind来避免这种情况（以我提供了一个工作演示的第二个正则表达式为例；它对所有其他的都一样）：

```
$pattern = '/(?<!\\\\)(["\'])(?:\\\\\1|(?!\1).)+\1/'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:17:21.630

试试这个正则表达式：

```
['"]([^'"]+((\\(\"|'))*[^'"])+)['"] 
```

给定以下字符串：

```
"Hello" World 'match 2' "wqwqwqwq wwqwqqwqw" no match here oopop "Hello \" World" 
```

它会匹配

```
"Hello"
'match 2'
"wqwqwqwq wwqwqqwqw"
"Hello \" World" 
```

# android - 我将如何增加或减少选项卡按钮中的文本大小

> ID：13492847
> 
> 赞同：0
> 
> 时间：2012-11-21T12:04:02.767
> 
> 标签：android

任何人请告诉我如何减少或增加 Tab 按钮中文本的大小。有可能这样做吗？我想在 App 中使用一些大文本。请帮助我.....提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:20:27.410

当我们向 TabHost 添加选项卡时，我们使用 TabHost.newTabSpec() 创建一个 TabSpec 对象。使用默认的选项卡外观，我们将在 TabSpec 上调用 setIndicator(String, Drawable)（传递我们希望在选项卡上显示的文本和图像），然后在 TabSpec 上调用 setContent(intent)，传递我们的 Activity 意图希望用作该选项卡的内容。但是，在这种情况下，我们希望为选项卡使用自定义布局，并且我们希望简单地将 tab_activity_layout.xml 中定义的视图用于内容，而不是单独的活动。

对于自定义选项卡，首先，我们必须将选项卡的自定义布局定义为布局资源文件。然后我们将使用该布局以编程方式对 View 对象进行膨胀，设置我们想要的任何属性，并将其传递给 TabSpec.setIndicator(View)。这是一个非常简单的示例布局，以及一些使用它的代码：请查看链接

[选项卡的自定义视图](http://www.speakingcode.com/2011/12/01/creating-custom-views-for-tabs-in-an-android-activity-using-tabhost-and-tabwidget/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:16:28.393

如果您使用代码`yourEditText.setTextSize(16);` 或使用 .xml`android:textSize="16sp"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:22:20.373

您只需制作自定义选项卡按钮，这非常简单明了：

为选项卡创建一个普通的类似 xml 布局。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:id="@+id/rlayout"
    android:gravity="center_vertical|center_horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView 
        android:id="@+id/icon4"
        android:src="@drawable/somedrawable"
        android:layout_height="42dp" 
        android:layout_width="42dp"/>

    <TextView 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="News" 
        android:textSize="12dp"
        android:textStyle="bold"
        android:textColor="#FFFFFF"
        android:paddingBottom="1dp"
        android:layout_below ="@+id/icon4"/>

</LinearLayout> 
```

然后在您的选项卡活动类中添加此布局，如下所示：

```
LayoutInflater inflater0 = LayoutInflater.from(this);
View view0 = inflater0.inflate(R.layout.tabbuttonlayout, null); 
```

之后只需在选项卡主机中正常使用它：

```
th = getTabHost();
th.addTab(th.newTabSpec("tag0").setIndicator(view0).setContent(intent0)); 
```

我希望这有助于更好地自定义您的标签。

# jquery - 使用url参数触发jQuery点击事件？

> ID：13492850
> 
> 赞同：1
> 
> 时间：2012-11-21T12:04:11.673
> 
> 标签：jquery

我的页面上有一个 jQuery 单击功能，它触发了反馈表单 div 的打开。基本上，我想指定一个无需单击即可触发此事件的 url。比如 foo.com?formopen

这可能吗？我想我需要通过 url 传递一些数据，但不知道如何去做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T12:07:39.357

在您的 URL 中使用哈希，例如：

```
foo.com#formopen 
```

然后在加载时找到该哈希，例如：

```
$(function(){

   if (window.location.hash){
      var hash = window.location.hash.substring(1);
      if (hash == "formopen"){
         openFeedbackForm();
      }
   }

}); 
```

* * *

**演示：**

代码：http: [//jsfiddle.net/J5cxc/](http://jsfiddle.net/J5cxc/)

没有哈希的演示：http: [//fiddle.jshell.net/J5cxc/show](http://fiddle.jshell.net/J5cxc/show)（无警报）

带哈希的演示：http: [//fiddle.jshell.net/J5cxc/show/#foobar](http://fiddle.jshell.net/J5cxc/show/#foobar)（警报调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:06:24.447

嘿，有很多方法可以做到这一点。

方法一 - 使用查询字符串参数

在您的 url 中传递一个查询字符串值，该值指示应打开表单。

所以你的网址是

```
www.foo.com?feedback=true 
```

然后在JS中你可以这样做：

```
var params = {};
var ps = window.location.search.split(/\?|&/);
for (var i = 0; i < ps.length; i++) {
    if (ps[i]) {
        var p = ps[i].split(/=/);
        params[p[0]] = p[1];
    }
}
if(params.feedback){
     $(".feedback-div").show();
} 
```

方法二 - 在 url 中使用井号标签

您的网址将如下所示：

```
www.foo.com#feedback 
```

在你的 JS 中：

```
if(window.location.href.indexOf("#feedback") > -1) {
     $(".feedback-div").show();
} 
```

# android - 在 google play 中获取应用程序下载和活动设备统计信息

> ID：13492852
> 
> 赞同：1
> 
> 时间：2012-11-21T12:04:20.737
> 
> 标签：android, google-play, usage-statistics

我可以使用 Android Market 的开源 API 在 google play 商店中获取我的应用程序的评论。 [http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

但我需要 Google Play 中我的应用的设备活动安装和应用下载统计信息？有没有可用的API。

谢谢桑吉思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:06:12.650

不，没有 API。但是你可以查看Andlytics的来源：[https](https://github.com/AndlyticsProject/andlytics) ://github.com/AndlyticsProject/andlytics或者直接使用app。

# android - Mac OS X 上的 Android 开发工具

> ID：13492853
> 
> 赞同：0
> 
> 时间：2012-11-21T12:04:22.767
> 
> 标签：android, eclipse, macos, adt, osx-leopard

我正在尝试在 Eclipse 上安装 ADT 插件，但它似乎不起作用。我尝试使用[ADT Bundle for Mac](http://developer.android.com/sdk/index.html)但我总是收到错误

`dyld: unknown required load command 0x80000022`

在控制台上。我尝试了两者`Eclipse Juno`并`Eclipse Indigo`使用 eclipse `ADT plugin`，它下载并安装了后者，但是当我进入 Preferences 时，那里没有“Android”......我使用的是 iMac，使用 Mac OS X v.10.5.8（Leopard ）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:16:28.583

因为捆绑包中的某些内容是专门为 a 制作的`mac 10.6`，并且不向后兼容。

我有同样的问题。

这是我的java

```
Device-873EF9:~ Tahj182$ java -version
java version "1.5.0_30"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_30-b03-389-9M3425)
Java HotSpot(TM) Client VM (build 1.5.0_30-161, mixed mode, sharing)
Device-873EF9:~ Tahj182$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:42:52.193

找出您拥有的 Java 版本，可能是您的插件需要 Java 版本。

终端：

```
$java -version 
```

# android - tablelayout getchildat 滚动到那个孩子

> ID：13492854
> 
> 赞同：1
> 
> 时间：2012-11-21T12:04:29.347
> 
> 标签：android, scrollview, tablelayout, layout-inflater

我实际上尝试了一些非常简单的事情，但是 android 和 java 让我的生活变得不容易。这个想法是滚动到表格布局中的指定子项。

我正在使用 Layoutinflater 将条目添加到表格布局中，如下所示：

```
 TableLayout tl = (TableLayout)findViewById(R.id.myTableLayout3);  

     LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
     View itemView = inflater.inflate(R.layout.element_news, null);  

     TextView firstname = (TextView) itemView.findViewById(R.id.tvname);   
     firstname.setText(FN + " " + iLN);

     TextView date = (TextView) itemView.findViewById(R.id.tvdate);   
     date.setText(newPD);

     TextView post = (TextView) itemView.findViewById(R.id.tvpost);   
     post.setText(c.getString(iP));
     post.setFocusable(true);

     tl.addView(itemView, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
```

我尝试将 getChildAt() 用于表格布局，并且确实得到了孩子，但是当我使用孩子时，它会返回所有“0”。

示例代码：

```
LinearLayout row = (LinearLayout) tl.getChildAt(1);
TextView tv = (TextView) row.getChildAt(1);
tv.requestFocus();
Log.w("news", Integer.toString(tv.getHeight())); 
```

对于 TextView 高度，它返回“0”，即使它包含多行并且 requestfocus() 也不起作用。

那么如何在表格布局中滚动到子项？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:37:13.453

该代码示例不起作用，因为您可能在`onCreate`方法中使用了它，并且当时尚未绘制 UI，因此视图没有任何尺寸。如果是这种情况，您可以简单地`Runnable`在您的一个视图上发布一个，以将维度收集延迟一点，直到在这样的`onCreate`方法之后：

```
// post the Runnable
tl.post(new Runnable() {

        @Override
        public void run() {
            LinearLayout row = (LinearLayout) tl.getChildAt(1);
                            // get the top position relative to the parent  
            int top = tr.getTop();
                            // scroll to that top position the wrapping ScrollView 
            sv.scrollTo(0, top);                
        }

    }); 
```

您的代码有些奇怪（从我的角度来看），如果上面的代码不起作用，您应该发布有关您的布局文件和使用场景的更多详细信息。

# mysql - 在 phpMyAdmin 中创建没有超级权限的视图

> ID：13492857
> 
> 赞同：9
> 
> 时间：2012-11-21T12:04:41.203
> 
> 标签：mysql, phpmyadmin

我正在尝试通过 phpmyadmin 中的 SQL 选项卡来创建/导入这样的视图：

```
CREATE ALGORITHM=UNDEFINED DEFINER=`byname`@`localhost` SQL SECURITY DEFINER VIEW `wr_averages` AS select `nf_users`.`id` AS `id`,(`nf_users`.`points` / `nf_users`.`played`) AS `average_points` from `nf_users` where (`nf_users`.`played` > 24); 
```

我收到此错误：

```
#1227 - Access denied; you need the SUPER privilege for this operation 
```

我无法在我的托管公司获得超级特权，所以有什么办法可以解决这个问题吗？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-21T12:24:35.220

从文档中：

*如果您指定 DEFINER 子句，则不能将值设置为除您自己之外的任何用户，除非您具有 SUPER 特权。这些规则决定了合法的 DEFINER 用户值：*

*   *如果您没有 SUPER 权限，则唯一合法的用户值是您自己的帐户，可以按字面意思指定，也可以使用 CURRENT_USER 指定。您不能将定义者设置为其他帐户。*
*   *如果您有 SUPER 权限，您可以指定任何语法上合法的帐户名称。如果该帐户实际上不存在，则会生成警告。*

检查您的 MySQL 帐户，它不是`byname`@ `localhost`。

解决方案：

*   使用授予 SUPER 权限的帐户创建带有 DEFINER 子句的新视图。
*   不要在 CREATE VIEW 中使用 DEFINER 子句，在这种情况下 MySQL 将创建视图 DEFINER = CURRENT_USER。

# xmpp - 使用谷歌帐户作为 xmpp bot

> ID：13492859
> 
> 赞同：0
> 
> 时间：2012-11-21T12:04:49.537
> 
> 标签：xmpp, google-talk

我正在开发一个类似于任何实时聊天软件的聊天应用程序。我计划使用 google 帐户设置此应用程序，该帐户将充当管理从网络到我的用户的所有消息的机器人。

你知道谷歌是否有一些限制来设置这种可能会处理数千条消息和一个名册的帐户，比如说数百个联系人？

此机器人将从 Google Apps for Business 配置，而不是免费的 gmail 帐户。

感谢您的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:39:13.977

我开发了一个基于以“服务器用户”身份运行的 Google 帐户的 XMPP 机器人。

我的帐户没有任何问题，它已经完美运行了大约一年。本月“服务器用户”上的 129 个用户和大约 10K 条消息已被路由。

# c++ - 如何使用 GDI API 在 windows 桌面上绘图？

> ID：13492860
> 
> 赞同：4
> 
> 时间：2012-11-21T12:04:56.643
> 
> 标签：c++, winapi, bitmap, gdi

> **可能重复：**
> [使用类似于 Inspect 的 GDI+（或 GDI）在屏幕上绘图](https://stackoverflow.com/questions/9342570/draw-on-screen-with-gdi-or-gdi-similar-to-inspect)

我正在尝试编写一个没有窗口的蛇游戏，但会冻结前景并在其上绘制蛇。当游戏结束时，前景应该被解冻。

我已经编写了一些测试代码，应该在前景上绘制一个正方形，但它似乎所做的只是将桌面冻结一秒钟并将窗口冻结在前景中，直到我最小化、最大化、关闭它或带来另一个窗口进入前景，它不绘制任何东西。在代码中，我尝试存储桌面的位图，以便基本上可以将其重置为原始状态并将正方形绘制在不同的位置。任何人都可以发现我的代码的问题吗？

```
//Handle to the desktop window
HWND hDesktopWindow = GetDesktopWindow();

//Lock the window to prevent other applications drawing on it
if(!LockWindowUpdate(hDesktopWindow)){
    return 1;
}

//Calling GetDC with argument NULL retrieves the desktop's DC
HDC hdcDesktop = GetDCEx(hDesktopWindow, NULL, DCX_CACHE | DCX_LOCKWINDOWUPDATE);

//Create a compatible DC to allow us to store a bitmap of the desktop
HDC hdcCompatible;
if((hdcCompatible = CreateCompatibleDC(hdcDesktop)) == NULL){
    return 1;
}

//Create a compatible bitmap with the same dimensions as the desktop
HBITMAP hScrBitmap;
int cx = GetSystemMetrics(SM_CXSCREEN);
int cy = GetSystemMetrics(SM_CYSCREEN);
if((hScrBitmap = CreateCompatibleBitmap(hdcDesktop, cx, cy)) == NULL){
    return 1;
}

//Select the bitmap into the compatible DC
SelectObject(hdcCompatible, hScrBitmap);

//Copy the Desktop into the bitmap
if(!BitBlt(hdcCompatible, 0, 0, cx, cy, hdcDesktop, 0, 0, SRCCOPY)){
    return 1;
}

//Create a DC compatible with the bitmaps DC for drawing the rectangle
HDC hdcRectangle;
if(!CreateCompatibleDC((HDC)hScrBitmap)){
    return 1;
}

//Create a compatible bitmap for the rectangle to be drawn in
HBITMAP hRectangleBitmap;
if(!CreateCompatibleBitmap(hdcRectangle, 100, 100)){
    return 1;
}

//Fill the rectangle bitmap
if(!FloodFill(hdcRectangle, 0, 0, RGB(255,0,0))){
    return 1;
}

//Copy the rectangle onto the desktop bitmap
if(!BitBlt(hdcCompatible, 100, 100, 100, 100, hdcRectangle, 0, 0, SRCCOPY)){
    return 1;
}

//Copy the bitmap onto the actual desktop
if(!BitBlt(hdcDesktop, 0, 0, cx, cy, hdcCompatible, 0, 0, SRCCOPY)){
    return 1;
}

//Allow time to view the result
Sleep(1000);

//Allow other applications to draw on the desktop again
LockWindowUpdate(NULL);

//Cleanup
ReleaseDC(hDesktopWindow, hdcDesktop);
DeleteDC(hdcCompatible);
DeleteObject(hScrBitmap); 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T17:34:37.817

尝试直接在桌面上执行此操作会出现问题。最好拍一张桌面快照，然后创建一个与整个桌面大小相同的窗口，将快照复制到该窗口，然后在那里进行所有绘图。（这是旧屏幕保护程序中的一个常见技巧，它会执行诸如“侵蚀”桌面之类的操作。）

您不拥有桌面窗口，因此您总是会遇到失效和重绘的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T12:43:10.547

```
if(!CreateCompatibleDC((HDC)hScrBitmap)){
    return 1;
} 
```

当您编写这样的 C 代码时，单点返回往往非常重要。像这样的调用将返回 FALSE，无法将 HBITMAP 投射到 HDC，并且节目结束得很糟糕。没有诊断，也没有要求再次解锁。

支持 C++ RAII 模式以确保您始终解锁：

```
class DesktopLocker {
public:
    DesktopLocker() { LockWindowUpdate(GetDesktopWindow()); }
    ~DesktopLocker() { LockWindowUpdate(NULL); }
};

void foo() {
   DesktopLocker lock;
   // etc...
} 
```

直接在桌面窗口上绘画没有太多的智慧，几乎不能保证你画的任何东西都会持续下去。睡眠和锁定更新只是创可贴。看看[Rainmeter 的源码，](http://rainmeter.net/cms/Developers)做得很好。

# ruby-on-rails-3 - 在提交 rails 3 之前确认可用的电子邮件地址

> ID：13492863
> 
> 赞同：0
> 
> 时间：2012-11-21T12:05:10.800
> 
> 标签：ruby-on-rails-3, devise

我在我的应用程序中使用设计进行用户身份验证，我想做的事情是在用户键入他们的电子邮件地址后，字段的一侧会出现一个小图标，说明电子邮件地址是否可用，我知道这将在提交表单时得到确认，但我认为在提交之前进行确认会很不错。密码和确认密码字段也是如此。

我正在寻找一些关于从哪里开始寻找的资源，或者从以前做过这件事的人那里得到一些建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:13:17.317

看来我应该在问问题之前多用谷歌搜索一下，

查看

```
http://railscasts.com/episodes/263-client-side-validations?view=asciicast 
```

# javascript - 如何使用 jquery sortable 对表列表进行排序？

> ID：13492864
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:05:11.297
> 
> 标签：javascript, jquery, draggable, jquery-ui-sortable

所以我有很多表行，其中每行属于不同的组，我想要的是属于同一组的每一行都在不同的表中，并且可以在这个表中排序（这很容易做到)，但我也希望这些组表也可以排序，以便您可以拖动**整个**表并在其他表中重新排序..

我尝试制作一个主可排序表，其中包含包含可排序记录的组表。

这是我的意思的说明

```
Table 1
-----------------------------
Field 1 | Field 2 | Filed 3 |
-----------------------------
R1C1    | R1C2    | R1C3    |
-----------------------------
R2C1    | R2C2    | R2C3    |
-----------------------------

Table 2
-----------------------------
Field 1 | Field 2 | Filed 3 |
-----------------------------
R1C1    | R1C2    | R1C3    |
-----------------------------
R2C1    | R2C2    | R2C3    |
----------------------------- 
```

在这里，那些可以交换（重新排序）的表（表 1 和表 2）位置当然包括它们的所有内容。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:06:08.833

一个简单的解决方案是将各个表格包装在一个 div 中，`handle`并向该 div 添加一个元素。我假设您使用的是 jQueryUI 可排序的，它有一个`handle`可拖动和可排序的选项

HTML：

```
<uL>
   <li>
        <div>
            <div class="handle"></div>
            <table> </table>
        </div>
    </li>
</ul> 
```

jQuery：

```
$('table').sortable({items:'tr'});
$('ul').sortable({
    items:'li',
    handle:'.handle'
}); 
```

演示：http: [//jsfiddle.net/fYx4D/1/](http://jsfiddle.net/fYx4D/1/)

# oracle - 命名参数语句 - Oracle

> ID：13492866
> 
> 赞同：0
> 
> 时间：2012-11-21T12:05:17.880
> 
> 标签：oracle

是否可以对单个查询使用两个 NamedParameterStatement？

我需要使用一个 NamedParameterStatement 找到给定值的 id（主键和外键），然后从其他表中找到与 id 相关的所有其他详细信息。

例如

```
select code1, code2 code 3

from master table where id in (select id from master table where (date between or any other values)) 
```

**其他代码的描述在其他表中**

在这里，我需要将内部查询的结果传递给外部查询（我可能会得到很多 id）。而且我知道如何将结果传递给 JDBC 中的另一个查询？

# ios - 在 xcode 中，如何使用 Tesseract OCR 逐帧实时扫描相机预览

> ID：13492867
> 
> 赞同：1
> 
> 时间：2012-11-21T12:05:22.143
> 
> 标签：ios, camera, real-time, ocr, tesseract

众所周知，Tesseract 在静态照片或图像中进行字符识别。我正在为我的 iOS 应用程序使用 xcode，但我遇到了这个问题。如何使用 tesseract 扫描相机实时预览。执行此操作的应用程序是 Word Lens 应用程序，它对相机预览的文本进行逐帧实时识别和翻译。我正在尝试在没有翻译部分的情况下进行这种实时字符识别。最好的方法是什么？如何使用 Tesseract OCR 逐帧实时扫描相机预览？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:37:16.110

我已经测试过了，性能太低了。相机每秒输出八张图片，但 OCR 处理一张需要大约 2 秒。

iOS上的链接[A（准）实时视频处理](http://weblog.invasivecode.com/post/23153661857/a-quasi-real-time-video-processing-on-ios-in)

链接[tesseract-ios](https://github.com/ldiqual/tesseract-ios)

以及[如何让 iOS 上的 tesseract 更快](https://stackoverflow.com/questions/11630640/how-can-i-make-tesseract-on-ios-faster?rq=1)

也许我们需要使用 OpenCV。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-30T18:17:25.693

或者，您也可以使用其他免费产品，在相机预览中执行 OCR：[ABBYY Real-Time Recognition OCR](http://rtrsdk.com)。

免责声明：我为 ABBYY 工作。

# php - 意外的令牌非法 javascript + php

> ID：13492869
> 
> 赞同：2
> 
> 时间：2012-11-21T12:05:30.520
> 
> 标签：php, javascript

这是源代码：

```
 $(document).ready(function(){

        $.post("scan.php?dir=<?=$_POST['dir']?>", function(data){

            alert(data);

        });

    }); 
```

生成的代码是：

```
 $(document).ready(function(){

        $.post("scan.php?dir=C:\xampp\htdocs\windowsMedias\music", function(data){

            alert(data);

        });

    }); 
```

但它不起作用（谷歌浏览器返回标题中的错误）。

如果我手动添加生成的代码，没有 PHP，它就可以工作。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:08:53.863

您使用的变量包含字符 ( `:`, `/`, ...)，不能作为 URL 参数的一部分。

用于[`encodeURI()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)将路径转换为可在 URL 中传递的参数：

```
$(document).ready(function(){

    $.post("scan.php?dir=" + encodeURI( "<?=$_POST['dir']?>" ), function(data){

        alert(data);

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:10:34.977

您需要对参数进行 urlencode。

```
$.post("scan.php?dir=<?= urlencode($_POST['dir']) ?>", function(data){
  alert(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:16:48.700

问题出在反斜杠上，你必须像这样对你的路径进行 json_encode

```
$(document).ready(function(){
    $.post("scan.php?dir=C:\xampp\\htdocs\\windowsMedias\\music", function(data){
        alert(data);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:29:39.437

正如其他答案所说，您必须正确编码您的 URL 参数。为此，您可以使用[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)：

```
$.post("scan.php?dir=" + encodeURIComponent( "<?=$_POST['dir']?>" ), function(data){
    alert(data);
}); 
```

导致错误的是未编码的反斜杠。您的 URL 包含`\x`，这是一个特殊的十六进制转义序列标记。它期望后面的两个字符是有效的十六进制数字（即，`[0-9a-fA-F]`），否则会导致错误。

# algorithm - 映射排序索引

> ID：13492875
> 
> 赞同：1
> 
> 时间：2012-11-21T12:05:50.513
> 
> 标签：algorithm, sorting

作为更大算法的一部分，我遇到并解决了这个问题，但我的解决方案似乎不优雅，我将不胜感激。

我有一个可以被视为笛卡尔平面上的点的对列表。我需要生成三个列表：排序后的 x 值、排序后的 y 值和一个列表，该列表将排序后的 x 值中的索引映射到排序后的 y 值中的索引，该索引对应于最初配对的 y 值。

一个具体的例子可能有助于解释。给定以下点列表：

((3, 7), (15, 4), (7, 11), (5, 0), (4, 7), (9, 12))

x 值的排序列表将是 (3, 4, 5, 7, 9, 15)，y 值的排序列表将是 (0, 4, 7, 7, 11, 12)。

假设基于零的索引方案，将 x 列表索引映射到其配对 y 列表索引的索引的列表将是 (2, 3, 0, 4, 5, 1)。

例如，值 7 在 x 列表中显示为索引 3。映射列表中索引 3 处的值为 4，y 列表中索引 4 处的值为 11，对应于原始配对 (7, 11)。

生成此映射列表的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:56:00.103

这是一个简单的 O(nlog n) 方法：

1.  按 x 值对对进行排序：((3, 7), (4, 7), (5, 0), (7, 11), (9, 12), (15, 4))
2.  生成一个对列表，其中第一个分量是前一个列表中相同位置的 y 值，第二个从 0 开始增加：((7, 0), (7, 1), (0, 2), (11 , 3), (12, 4), (4, 5))
3.  按其第一个组件（y 值）对该列表进行排序：((0, 2), (4, 5), (7, 0), (7, 1), (11, 3), (12, 4))
4.  遍历这个列表。对于第 i 个这样的对 (y, k)，设置 yFor[k] = i。yFor[] 是将已排序 x 列表中的索引映射到已排序 y 列表中的索引的列表（嗯，数组）。
5.  只需从步骤 1 中生成的列表中删除第二个元素，即可创建已排序的 x 列表。
6.  通过对步骤 3 中生成的列表执行相同操作来创建已排序的 y 列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:41:28.560

我提出以下建议。生成未排序的 x 和 y 列表。

```
xs = [3, 15,  7, 5, 4, 9 ]
ys = [7,  4, 11, 0, 7, 12] 
```

将每个元素转换为一个元组 - 对中的第一个是坐标，第二个是原始索引。

```
xs = [(3, 0), (15, 1), ( 7, 2), (5, 3), (4, 4), ( 9, 5)]
ys = [(7, 0), ( 4, 1), (11, 2), (0, 3), (7, 4), (12, 5)] 
```

对两个列表进行排序。

```
xs = [(3, 0), (4, 4), (5, 3), (7, 2), ( 9, 5), (15, 1)]
ys = [(0, 3), (4, 1), (7, 0), (7, 4), (11, 2), (12, 5)] 
```

创建一个数组，`y_positions`. 数组的第 n 个元素包含最初位于索引 n 处的 y 元素的当前索引。

创建一个空的`index_list`. 对于 的每个元素`xs`，获取`original_index`元组的第二对。用于`y_positions`检索具有给定 的 y 元素的当前索引`original_index`。将当前索引添加到`index_list`.

`xs`最后，从和中删除索引值`ys`。

这是一个示例 Python 实现。

```
points = ((3, 7), (15, 4), (7, 11), (5, 0), (4, 7), (9, 12))

#generate unsorted lists
xs, ys = zip(*points)

#pair each element with its index
xs = zip(xs, range(len(xs)))
ys = zip(ys, range(len(xs)))

#sort
xs.sort()
ys.sort()

#generate the y positions list.
y_positions = [None] * len(ys)
for i in range(len(ys)):
    original_index = ys[i][1]
    y_positions[original_index] = i

#generate `index_list`
index_list = []
for x, original_index in xs:
    index_list.append(y_positions[original_index])

#remove tuples from x and y lists
xs = zip(*xs)[0]
ys = zip(*ys)[0]

print "xs:", xs
print "ys:", ys
print "index list:", index_list 
```

输出：

```
xs: (3, 4, 5, 7, 9, 15)
ys: (0, 4, 7, 7, 11, 12)
index list: [2, 3, 0, 4, 5, 1] 
```

`y_positions`和的生成`index_list`是O(n)时间，所以算法整体的复杂度主要由排序步骤决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T14:49:25.990

谢谢你的回答。就其价值而言，我的解决方案与概述的解决方案非常相似，但正如 j_random_hacker 指出的那样，不需要地图。让我震惊的是，这个小问题似乎比乍一看更复杂，我想知道我是否遗漏了一些明显的东西。我已经将我的解决方案重新散列到 Python 中进行比较。

```
points = ((3, 7), (15, 4), (7, 11), (5, 0), (4, 7), (9, 12))

N = len(points)

# Separate the points into their x and y components, tag the values with
# their index into the points list.

# Sort both resulting (value, tag) lists and then unzip them into lists of
# sorted x and y values and the tag information.

xs, s = zip(*sorted(zip([x for (x, y) in points], range(N))))
ys, r = zip(*sorted(zip([y for (x, y) in points], range(N))))

# Generate the mapping list.

t = N * [0]

for i in range(N):
    t[r[i]] = i

index_list = [t[j] for j in s]

print "xs:", xs
print "ys:", ys
print "index_list:", index_list 
```

输出：

```
xs: (3, 4, 5, 7, 9, 15)
ys: (0, 4, 7, 7, 11, 12)
index_list: [2, 3, 0, 4, 5, 1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T15:42:01.513

我刚刚理解了 j_random_hacker 通过最初对 x 中的点进行排序来删除间接级别的含义。这可以让事情得到很好的整理。谢谢。

```
points = ((3, 7), (15, 4), (7, 11), (5, 0), (4, 7), (9, 12))

N = len(points)

ordered_by_x = sorted(points)
ordered_by_y = sorted(zip([y for (x, y) in ordered_by_x], range(N)))

index_list = N * [0]

for i, (y, k) in enumerate(ordered_by_y):
    index_list[k] = i

xs = [x for (x, y) in ordered_by_x]
ys = [y for (y, k) in ordered_by_y]

print "xs:", xs
print "ys:", ys
print "index_list:", index_list 
```

# javascript - 更改文档时窗口事件会发生什么？

> ID：13492876
> 
> 赞同：14
> 
> 时间：2012-11-21T12:05:50.810
> 
> 标签：javascript, jquery, html, dom, browser-history

嘿，我`statechange`在窗口上设置了以下事件：

```
History.Adapter.bind(window,'statechange',function(e){ 
 console.log("statechange event occured ");
 //more code
    var newDoc = document.open();
    newDoc.write(file);
    newDoc.close();
}); 
```

我正在使用history.js，但在这种情况下这并不重要，因为它会定期绑定statechange，我得到`file`like 的值应该是并且工作正常。

现在我在外部 js 文件中有这段代码（和其他代码），在文件中我正在遍历所有`a`标签并应用以下点击事件：

```
 $(element).on("click",function(e){
    e.preventDefault();
    //more code

    History.pushState({file : file},title, fullHref);

}); 
```

现在，当我单击文档时，文档会按预期进行更改，但是当尝试使用后退/前进按钮时，`statechange`事件不会触发。

**我应该提一下，这个 js 也包含在我正在加载的文件中。**

所以我最初的想法是，当文档发生变化但窗口没有变化时，事件仍然存在。这是不正确的，因为它多次应用 statechange 事件。所以我尝试使用 cookie 应用一次事件，但仍然做同样的事情。

现在，如果我不更改文档，而是简单地使用 jQuery 应用它，那么 statechange`.html()`事件会按预期触发，所以我猜它与文档有关。

为什么会发生这种情况？我相信如果我更多地了解更改文档时窗口事件会发生什么，我可以解决这个问题。

**尝试：**

*   我现在也尝试`popstate`通过常规的 History API 绑定到事件，仍然给出或接受相同的结果。`pushState`不会触发 popstate 但后退按钮会触发但没有状态。
*   我得出的结论是，我不应该使用 history.js，因为我怀疑问题来自那里，所以我“解决”了我的 popstate 问题，这仍然导致问题，因为 document.open 似乎正在触发 popstate。仍在寻找更多信息
*   我试过使用`on`，同样的结果

**资料**：

*   **我们使用历史**的这个例子是因为 history.js，如果我使用常规的历史 API 仍然存在同样的问题。

我在 mdn 中读到：

> > {{ gecko_minversion_note("1.9.2", "从 Gecko 1.9.2 开始，document.open() 使用
> 
> 它使用其 URI 的文档的主体，而不是从堆栈中获取主体。因此，即使使用 WrappedJSObject，您也不能再将 document.write() 从 chrome 调用到不受信任的文档中。") }}

我不确定，但我认为可以解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:13:06.973

好吧，最后我发现虽然你只更改了文档，但窗口事件在文档中被删除了。

我认为我遇到了 History.js 的问题，因为我更改文档的事实在某些时候会破坏它。

我所做的是使用原生 HTML5 历史 API 并`popstate`在新文档中重新绑定事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:54:35.187

您是否尝试将元素与 LIVE 绑定？

```
$(element).click(function(e){
    e.preventDefault();
    //more code
    History.pushState({file : file},title, fullHref);
}); 
```

变成

```
$(element).live('click',function(e){
        e.preventDefault();
        //more code
        History.pushState({file : file},title, fullHref);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:55:46.643

您必须使用`iframe`来加载您的文档，并且可以轻松地更改其文档。然后，你可以监听这样的点击事件，

```
$("#iframe").load(function () {
    $(this.contentWindow).click(function () {
        // do your click events here
    });
}); 
```

`src`如果您将属性值更改为另一个文档，iframe 将重新加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:09:48.613

您是否尝试过在 document.open() 方法中设置目标（请参阅 [http://www.w3schools.com/jsref/met_doc_open.asp](http://www.w3schools.com/jsref/met_doc_open.asp)）？如果不是，您实际上是在写入一个空白窗口，您可能会丢失 History 对象。

# jquery - 如何在日期选择器下拉列表中显示从 1920 年到当前年份的正确年份

> ID：13492877
> 
> 赞同：4
> 
> 时间：2012-11-21T12:05:50.593
> 
> 标签：jquery, jquery-ui, datepicker

我在下面使用 jquery datepicker UI 插件：

```
 $(function() {
    $( "#dobDate" ).datepicker({minDate: new Date(1920, 1 - 1, 01), maxDate:0, 
                        dateFormat: "dd-mm-yy",
                        showOn: "button",
        buttonImage: "Images/calendar.gif",
        buttonImageOnly: true,
        changeMonth: true,
    changeYear: true
        });
}); 
```

这个插件的网址在[这里](http://jqueryui.com/datepicker/#dropdown-month-year)

现在我遇到的问题是我想显示月份和年份下拉菜单。现在它这样做了，但我希望它显示从 1920 年到当前年份的年份。目前它正在做的只是从 2002 年到今年显示它。我必须单击箭头进入 2002 年之前的一个月，然后才能在年份的下拉菜单中看到 1992 年到 2002 年。

所以我的问题是如何在年份下拉菜单中显示 1920 年到当前年份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:16:29.400

尝试使用`'c'`当前年份，例如：

```
$('#dobDate').datepicker({yearRange : '1920:c',changeYear: true}); 
```

也使用`changeYear: true`

工作演示[Fiddle.net](http://jsfiddle.net/h8VWW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:11:58.303

```
$( ".selector" ).datepicker( "option", "yearRange", "1920:c" ); 
```

`c`代表当前年份。默认是`c-10:c+10`

[http://api.jqueryui.com/datepicker/#option-yearRange](http://api.jqueryui.com/datepicker/#option-yearRange)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:09:30.820

您正在寻找[`yearRange`](http://api.jqueryui.com/datepicker/#option-yearRange)选项

像这样使用它：

```
$('.datepicker').datepicker({yearRange : '1920:2012'}); 
```

# javascript - 为什么在 iOS Safari Mobile（iPhone / iPad）中没有触发模糊事件？

> ID：13492881
> 
> 赞同：23
> 
> 时间：2012-11-21T12:06:12.823
> 
> 标签：javascript, iphone, html, ios, ipad

我有两个事件处理程序绑定到一个锚标记：一个用于焦点和模糊。

处理程序在桌面上触发，但在 iphone 和 ipad 中，只有焦点被正确触发。如果我在锚标记外部单击，则不会触发模糊（仅当我单击页面中的其他一些表单元素时才会触发模糊）：

```
 $("a").focus(function(){
        console.log("focus fired");
    });

    $("a").blur(function(){
        console.log("blur fired");
    }); 
```

HTML：

```
<html>
<form>
    <a href="#">test link</a>
    <div>
    <input type="text" title="" size="38" value="" id="lname1" name="" class="text">
    </div>
    <div style="padding:100px">
        <p>test content</p>
    </div>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T12:13:41.640

如果锚点附加了任何事件，在 iOS 中第一次点击它会导致锚点进入悬停状态并获得焦点。轻按一下即可删除悬停状态，但链接仍保持焦点。这是设计使然。要在 iOS 上正确控制应用程序，您需要实现基于触摸的事件并对这些事件而不是桌面事件做出反应。

有[一个在 iOS 上的 WebKit 中使用 Javascript 事件的完整指南](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-29T19:31:48.000

这是一个 hack，但您可以通过在每个 DOM 元素上注册一个点击处理程序来触发 .blur。这会从先前聚焦的元素中移除焦点。

```
$('*').click();
$('html').css('-webkit-tap-highlight-color', 'rgba(0, 0, 0, 0)'); 
```

当元素被点击时，第二行移除高亮。

我知道这是次优的，但它可能会让你继续前进。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-19T11:39:05.693

如果您使用的是触摸设备，您可以使用**touchleave**或**touchend**事件来处理用户在区域外点击的情况。

```
$("a").on('touchleave touchcancel', function () {
      // do something
}); 
```

为此，您需要更新焦点功能以侦听**单击**事件，如下所示

```
$("a").on("click", function (e) {
      if(e.handled !== true) {
            e.handled = true
      } else {
            return false
      }
      // do something
 }) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-27T13:07:34.983

我已经检查了@NicholasShanks 答案中的所有文档，但是测试所有事件有点沮丧。

安卓和iOS：

*   **在安卓**三星 S9上测试
*   在**iOS** iPad 5ºgen上测试

最后我得到了一个解决方案：似乎 iPad 听mouseout作为模糊，似乎android完美地听了模糊事件，我只是在这个案例上添加了一个三元来附加正确的事件（以前我的目标是移动或平板设备的一台电脑。

```
// element >> element you want to trigger
// os >> function that return operative system 'ios' or 'android' in my case

element.addEventListener(os === 'ios' ? 'mouseout' : 'blur', () => {
  // Do something
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-03T15:15:18.047

该`blur`事件不会触发，因为当您在不可点击元素上的锚标记之外单击时，iOS 会忽略该点击（并且该`click`事件不会触发）。

有几个关于此的线程（例如[.click 事件未在 iOS 上的 Chrome 中触发](https://stackoverflow.com/questions/17146889/click-event-not-firing-in-chrome-on-ios)）。您可以通过添加`cursor: pointer`到`<body>`将执行单击的元素或其他元素来修复它。

# ajax - XML 在 Firefox 中格式不正确，从服务器获取 xml 响应

> ID：13492887
> 
> 赞同：0
> 
> 时间：2012-11-21T12:06:34.043
> 
> 标签：ajax, jquery, jqgrid

我在我的项目中使用 jQGrid 最新版本。以下是我配置的完整配置。

```
jQuery("#list").jqGrid( {
        url : 'Link.do?method=findAllBrand',
        mtype : 'GET',
        height : 350,
        datatype : "xml",
        colNames : [ 'Name' ],
        colModel : [ {
            name : 'name',
            index : 'name',
            width : 620
        } ],
        rowNum : 10,
        rowList : [ 10, 20, 30 ],
        sortname : 'id',
        sortorder : "desc",
        viewrecords : true,
        multiselect : true,
        imgpath : 'themes/base/images',
        caption : "Brand (s) Summary Grid",
        pager : $('#pager'),
        cache : false,
        onSelectRow : function(id) {

        }
    }); 
```

我从服务器以 xml 的形式获取以下数据：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><rows><page>1</page><total>1</total><records>4</records><row id="BRD00003"><cell>Blanco</cell></row><row id="BRD00001"><cell>Bosch</cell></row><row id="BRD00004"><cell>Chef</cell></row><row id="BRD00002"><cell>F&P</cell></row></rows> 
```

我知道在最后一行的最后一个单元格中产生了问题，因为它包含 & char，在 xml 中具有特殊含义。但是我已经使用 Apache commons lang library 使用下面的函数对整个 xml 进行了转义。

```
toXml = StringEscapeUtils.escapeXml(toXml); 
```

结果字符串是

```
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;rows&gt;&lt;page&gt;1&lt;/page&gt;&lt;total&gt;1&lt;/total&gt;&lt;records&gt;4&lt;/records&gt;&lt;row id=&quot;BRD00003&quot;&gt;&lt;cell&gt;Blanco&lt;/cell&gt;&lt;/row&gt;&lt;row id=&quot;BRD00001&quot;&gt;&lt;cell&gt;Bosch&lt;/cell&gt;&lt;/row&gt;&lt;row id=&quot;BRD00004&quot;&gt;&lt;cell&gt;Chef&lt;/cell&gt;&lt;/row&gt;&lt;row id=&quot;BRD00002&quot;&gt;&lt;cell&gt;F&amp;P&lt;/cell&gt;&lt;/row&gt;&lt;/rows&gt; 
```

我仍然在 Mozilla firefox 最新版本和 chrome 中遇到同样的错误，即 7,8。

**我必须向您展示网格中的这个特殊字符，所以我该如何解决这个问题？**

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:16:58.107

> 我正在从服务器端生成 xml。

然后分别对每个文本节点和每个属性值进行转义，就这么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:25:25.883

我建议您尽可能使用 JSON 格式而不是 XML。

如果确实需要使用 XML 并且需要在 XML 中放置一些通用值，则需要使用 CDATA 构造 ( `<![CDATA["some common text"]]>`)。

此外，我建议您将其`autoencode: true`用作标准 jqGrid 选项。在这种情况下，您将能够在 jqGrid 单元格中放置任何文本。jqGrid 将对所有对 HTML 具有特殊意义的字符进行编码。

# linux - 重启 RHEL 服务器后，chef-server 无法启动

> ID：13492889
> 
> 赞同：0
> 
> 时间：2012-11-21T12:06:37.123
> 
> 标签：linux, linux-kernel, chef-infra, chef-recipe

“usr/sbin/setup-chef-server.sh”

厨师服务器启动时出错

正在检查 RabbitMQ...

启动 CouchDB...

正在启动 couchdb：已经在运行 [警告] 正在启用厨师服务...

开始厨师服务...

启动厨师服务器：[失败]

启动 chef-server-webui：[失败]

启动 chef-solr：/usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247:in`to_specs': Could not find chef-solr (>= 0) amongst [bunny-0.7.9, chef-10.16.2, erubis-2.7.0, highline-1.6.15, ipaddress-0.8.0, json-1.6.1, mime-types-1.19, mixlib-authentication-1.3.0, mixlib-cli-1.2.2, mixlib-config-1.1.2, mixlib-log-1.4.1, mixlib-shellout-1.1.0, moneta-0.6.0, net-ssh-2.2.2, net-ssh-gateway-1.1.0, net-ssh-multi-1.1, ohai-6.14.0, polyglot-0.3.3, rest-client-1.6.7, systemu-2.5.2, treetop-1.4.12, uuidtools-2.1.3, yajl-ruby-1.1.0] (Gem::LoadError)`

```
from /usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in 'to_spec'
from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:1210:in 'gem'
from /usr/bin/chef-solr:18 
```

[失败的]

启动厨师扩展器：/usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs'：在 [bunny-0.7.9, chef-中找不到厨师扩展器（> = 0） 10.16.2、erubis-2.7.0、highline-1.6.15、ipaddress-0.8.0、json-1.6.1、mime-types-1.19、mixlib-authentication-1.3.0、mixlib-cli-1.2.2、 mixlib-config-1.1.2、mixlib-log-1.4.1、mixlib-shellout-1.1.0、moneta-0.6.0、net-ssh-2.2.2、net-ssh-gateway-1.1.0、net- ssh-multi-1.1、ohai-6.14.0、polyglot-0.3.3、rest-client-1.6.7、systemu-2.5.2、treetop-1.4.12、uuidtools-2.1.3、yajl-ruby-1.1。 0]（宝石::加载错误）

```
 from /usr/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:1210:in `gem'
    from /usr/bin/chef-expander:18 
```

[失败的]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:41:36.427

我在服务器上的 chef gem 版本也有 0.10.6，它似乎安装了 chef-expander、chef-solr、chef-server、chef-server-webui 等。chef-10 不只是客户吗？– PatrickWalker 2 分钟前 编辑

[http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually](http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually)似乎表明是的 0.10.x 是服务器 gem，查看发行说明 10.X 似乎是客户端

# javascript - jQuery可拖动项目在放入“垃圾箱”时正在更改页面的href

> ID：13492890
> 
> 赞同：1
> 
> 时间：2012-11-21T12:06:42.413
> 
> 标签：javascript, jquery, jquery-ui

我有一个非常简单的 jQuery 可拖动/可排序/可放置组合，我正在对几个 div 进行排序，每个 div 都包含一个包含在带有 href 的锚元素中的图像。

问题是，当我将可排序项目拖动到“垃圾”可放置区域（以销毁它）时，页面有时会更改其位置并从可拖动项中转到 href URL！

我已经从页面中调试了地狱，这不是我的任何代码导致的。drop 事件正常发生并返回（我尝试返回 true 和 false）就好了。这是 jQuery UI 代码中的某些东西导致 href 被触发。

它不会每次都发生。我没有“点击”元素 - 只是拖动。

任何人都可以提供建议吗？

我的可放置代码示例：

```
var trash = this._area_trash.droppable({
    drop: this.eventtrashDrop,
    hoverClass: 'highlight'
});

// ...

this.eventtrashDrop = function(event,ui) {
    var o = ui.draggable;
    if( typeof(o)=='object' && o!=null ) {
        if( o.parents(obj._selector_stack_area).length>0 ) {
            var id = parseInt(o.attr('lang'));
            o.remove();
            obj.eventStateRemove(id);
        }
    }
    // Page location hasn't been changed yet!
    return true;
} 
```

**编辑：**原始问题仍然存在，我怀疑这是 jQuery UI 中的某种错误。然而，一种解决方法是在销毁可排序项目之前用 div 替换锚元素，这样它就不能更改为锚的 href：

```
 var anchor = jQuery(o).find("a");
        var img    = jQuery(anchor).html();
        jQuery(anchor).replaceWith("<div/>").html(img); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:33:04.053

在我看来，点击时会触发锚点。
您需要监听事件并防止默认操作。
像这样的东西：

```
$('a').click(function(event){
    event.preventDefault();
}); 
```

# file - LabVIEW 2009 在我不希望的情况下保留数据

> ID：13492892
> 
> 赞同：1
> 
> 时间：2012-11-21T12:06:45.660
> 
> 标签：file, vi, labview

我是 LabVIEW 新手，但一直在构建一个信号分析器代码，该代码获取所需数据并在获取数据后将其打印到文本文件中。我遇到的问题是，当它创建一个新文件时，它会保留上一次运行的数据并打印出我不想要的数据。我已附上 LabVIEW vi (ver.2009)，任何对此的帮助将不胜感激。

此外，如果有人知道在每次迭代后对数据进行 RMS 处理的方法比我乱七八糟的移位寄存器更好，我会很高兴看到它。

[频率分析仪（固定）.vi](http://www.mediafire.com/?dkoci48y9lr0sn9)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T22:28:25.340

要回答您的主要问题：每次重新运行 vi 时，构建字符串的代码部分（带有移位寄存器的 for 循环）都会存储先前的数据。您需要的是用空字符串初始化移位寄存器：

![六](../Images/e473fc1d815b43cecd9e4497ec4bf78b.png)

还有一些注意事项/建议：

*   在这种情况下，您可以避免使用移位寄存器。将代码的 DAQ 部分分为 3 个部分：在第一个 for 循环中获取数据（存储到数组中），修改数组（然后您可以使用内置的 RMS vi），在 UI 上可视化
*   以较小的块构建代码，使用 subVi
*   保持代码小、漂亮和整洁（检查编码标准），添加注释——这对你以后真的有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:37:54.867

由于您询问了有关您使用的 RMS 功能的建议，因此我更详细地查看了您的代码。而且我可能很粗鲁，但这没有意义（逐点）：

*   ![For循环计数器](../Images/96c750379d69e90222c8eb01dda7db31.png)

您要求最终用户进行多次运行，然后减去一次。为什么？我猜这是因为在 for 循环之前读取了数据。（删除那个）。

*   您使用的[频率 RMS 函数](http://zone.ni.com/reference/en-XX/help/371361F-01/lvwave/fft_power_spectrum/)支持平均，并且没有平均次数限制。指定以下配置： ![使用标准平均](../Images/a025b4e83e74f6974db26385fc9da1cf.png)

这将为您的输出数据添加 RMS 平均，并且您可以使用移位寄存器放弃所有自己的计算。

*   以下代码完全是错误的：

![不要改变频率](../Images/da8c4fc99b501488864d13b5576ae129.png)

您只移动数据，而不实际更改数据。通过增加起始频率，您可以移动 FFT。因此，在 55 Hz 处检测到的信号在 56 Hz 处绘制为 no。对于您的最终用户来说，这是一种误导。

您需要在代码中注意的一件事是您没有连续采样。你的每次循环你的数据采集都会开始和停止。您可以通过绘制捕获的波形的 t0 来验证这一点。您会注意到它们不是以恒定的间隔开始的。更好的方法是使用 Express VI 在第一次迭代中创建的任务：

![重用任务](../Images/a57113c39e44360c91f791b8feb5b134.png).

但是，您应该将采集模式更改为“连续样本”：

![连续样本](../Images/e5f92f2aea259c884067a149291618c1.png)

不要忘记在最后一次迭代中关闭任务：

![关闭任务](../Images/5a1fb071db4243465f314acdad07f556.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:28:38.683

您应该使用在每次运行之前清空的数组，而不是移位寄存器。

# python - some_string 中的 empty_string - 总是正确的？

> ID：13492893
> 
> 赞同：8
> 
> 时间：2012-11-21T12:06:48.153
> 
> 标签：python, python-2.7, string

> **可能重复：**
> [为什么每个字符串上都有空字符串？](https://stackoverflow.com/questions/5206466/why-empty-string-is-on-every-string)

我想知道为什么每当我检查空字符串是否在字符串中时 Python 返回 True，以及为什么它的索引为零。

例如：

*   `'' in ''`=> 真
*   `''.index('')`=> 0
*   `'' in 'notEmpty'`=> 真
*   `'notEmpty'.index('')`=> 0

我在编写 ROT13 函数时注意到了这一点，并对其进行测试时发现，当我在空字符串上调用它时，它会返回`'n'`（`'n'`在字母表中是 index13）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:08:31.363

另一种看待它的方法是，如果可以找到两个字符串并且满足以下条件，则`x in y`应该返回：`True``s1``s2`

```
s1 + x + s2 == y 
```

什么时候`x`是空字符串，它总是会给出`True`。这是因为您可以选择`s1 = ''`和`s2 = y`。

当然实际的实现`in`不是这样的，但是结果是一样的。它只是以更有效的方式获得结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T12:10:14.197

当且仅当存在这样的索引时，字符串`S`才是字符串的子字符串。什么时候你有空字符串，所以所有结果都是正确的。`T``i``T[i:i+len(S)] == S``S``T[i:i] = '' = S`

另请注意，`T.index('')`返回 0 因为`index`返回子字符串出现的第一个索引，`T[0:0] = ''`所以这绝对是正确的结果。

总之，空字符串是每个字符串的子字符串，所有这些结果都是由此产生的直接结果。

另请注意，这是字符串特有的，因为字符串是字符序列，它们本身就是长度为 1 的字符串。对于其他类型的序列（例如`list`s 或`tuple`s），您不会得到相同的结果：

```
>>> (1,2,3).index(())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: tuple.index(x): x not in tuple
>>> [1,2,3].index([1,2])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: [1, 2] is not in list
>>> [] in [1,2,3]
False 
```

那是因为`list`并且`tuple`仅检查成员，而不检查子`list`或子`tuple`，因为它们的元素可以是任意类型。想象一下这种情况`((1,2),1,2).index((1,2))`。应该`index`检查“子元组”（因此返回 1）、成员（因此返回 0）还是做一些丑陋的混合（例如，首先检查子元组，然后检查成员）？在 python 中，决定只搜索成员，因为它更简单，而且通常是你想要的。在一般情况下，仅检查子元组会产生非常奇怪的结果，而进行“混合”通常会产生不可预测的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:10:32.503

好吧，答案真的很简单。你正在寻找的`""`真的，根本不是一个角色......

并且第一次在字符串中没有字符，就在开头......在`[0]`

它变得令人困惑，因为您会认为这`[0]`是第一个字符的索引。这是真的，但你也必须认为，在这种情况下，字符之间的片段也是“有形的”，所以当然什么也没有，它也什么也没有。如果你要检查一个字符串的子集，你会在你选择的任何地方找到它，在第一个可能的位置。

# java - 找不到可运行的方法运行多个 JUnit4 testSuite

> ID：13492896
> 
> 赞同：1
> 
> 时间：2012-11-21T12:06:53.803
> 
> 标签：java, junit

我有以下测试套件

```
package com.swaserver.junit;

import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

import junit.framework.TestSuite;

public class MyTestSuite extends TestSuite
{
    @RunWith(Suite.class)
    @SuiteClasses( { BinarySearchTest.class })

    public class RunTestSuite
    {
    }
} 
```

但是，它告诉我我没有可运行的方法。我的单元测试本身在我的 IDE 中使用 Junit4 注释运行良好，因此其中包含一个有效的 JUnit 测试。但是，上面的测试套件在使用 IDE 和 ANT 运行时抱怨没有可运行方法

```
package com.swaserver.junit;

import org.junit.Test;

public class BinarySearchTest
{
    @Test
    public void test()
    {
    }
} 
```

我引用了这个在线示例 [http://selftechy.com/2011/04/16/junit-4-executing-multiple-test-cases](http://selftechy.com/2011/04/16/junit-4-executing-multiple-test-cases)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:09:48.573

`MyTestSuite`应该在类级别定义注释，如下所示：

```
@RunWith(Suite.class)
@SuiteClasses( { BinarySearchTest.class })
public class MyTestSuite
{
} 
```

如果您使用基于注释的方法，则不应该扩展`TestSuite`，也不需要构造函数。

# php - 用php中的图像替换flash

> ID：13492899
> 
> 赞同：1
> 
> 时间：2012-11-21T12:07:00.507
> 
> 标签：php, image, flash

我是 php 的新手，我有一个小问题。

我的索引 php 中有一个 flash，就像这样

```
<div class="flash">
        <script language="JavaScript" type="text/javascript">
        /* <![CDATA[ */
            if (AC_FL_RunContent == 0) {
                alert("This page requires AC_RunActiveContent.js.");
            } else {
               AC_FL_RunContent(
                    'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0',
                    'width', '903',
                    'height', '301',
                    'src', 'swf/whatever',
                    'quality', 'high',
                    'pluginspage', 'http://www.macromedia.com/go/getflashplayer',
                    'align', 'middle',
                    'play', 'true',
                    'loop', 'true',
                    'scale', 'showall',
                    'wmode', 'transparent',
                    'devicefont', 'false',
                    'id', 'whatever',
                    'bgcolor', '#ffffff',
                    'name', 'whatever',
                    'menu', 'true',
                    'allowFullScreen', 'false',
                    'allowScriptAccess','sameDomain',
                    'movie', 'swf/whatever',
                    'salign', ''
                    ); //end AC code
            }
        /* ]]> */
        </script>
</div> 
```

我想要一个无法显示 Flash 的图像，比如说 iOS 系统。前任。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:18:36.573

You can try with the following trick:

```
<script language="JavaScript" type="text/javascript">
        /* <![CDATA[ */
            if (AC_FL_RunContent == 0) {

                document.write("<img src='/path/to/image.png'>");

                } else {
    ...
                }
            /* ]]> */
        </script> 
```

If you show an alert window with the text "This page requires AC_RunActiveContent.js." using the original page code the previous example should work.

If don't show the warning nor the flash content you should change the line

```
 if (AC_FL_RunContent == 0) { 
```

for

```
 if (typeof AC_FL_RunContent === 'undefined') { 
```

The difference is that in the first piece of code the variable `AC_FL_RunContent` must be created to work properly. The second code checks if the variable actually exists.

You colud mix both methods.

Good luck.

# android - Android 谷歌地图 行车路线

> ID：13492904
> 
> 赞同：0
> 
> 时间：2012-11-21T12:07:31.510
> 
> 标签：android

我正在我的论文中开发一个安卓谷歌地图，我可以问一些关于安卓驾驶方向的问题吗？

这是我的问题。

“当一个按钮被点击时，我如何在安卓谷歌地图中生成一个随机的行车路线，它会随机给出从起点到目的地的路径。”

谢谢！。

我通过这个问了谷歌地图。

```
 private void parsing(GeoPoint start, GeoPoint end) throws ClientProtocolException, IOException, JSONException, URISyntaxException{
    HttpClient httpclient = new DefaultHttpClient();
    StringBuilder urlstring = new StringBuilder();
    urlstring.append("https://maps.googleapis.com/maps/api/directions/json?origin=")
    .append(Double.toString((double)start.getLatitudeE6()/1E6)).append(",").append(Double.toString((double)start.getLongitudeE6()/1E6)).append("&destination=")
    .append(Double.toString((double)end.getLatitudeE6()/1E6)).append(",").append(Double.toString((double)end.getLongitudeE6()/1E6))
    .append("&sensor=false");
    //urlstring.append("http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal&sensor=true");
    url = new URI(urlstring.toString());

    HttpPost httppost = new HttpPost(url);

    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    InputStream is = null;
    is = entity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    sb.append(reader.readLine() + "\n");
    String line = "0";
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    reader.close();
    String result = sb.toString();
    JSONObject jsonObject = new JSONObject(result);
    JSONArray routeArray = jsonObject.getJSONArray("routes");
    JSONObject routes = routeArray.getJSONObject(0);
    JSONObject overviewPolylines = routes.getJSONObject("overview_polyline");
    String encodedString = overviewPolylines.getString("points");
    List<GeoPoint> pointToDraw = decodePoly(encodedString);

    //Added line:
    mv_mapview.getOverlays().add(new RoutePathOverlay(pointToDraw));
} 
```

点在地图上。

```
 class MapOverlay extends Overlay {

        @Override
        public boolean onTap(final GeoPoint p, MapView mapView) {
            // TODO Auto-generated method stub

            geop_Tpoint = p;
            mcon_mapcontrol = mapView.getController();
            mcon_mapcontrol.animateTo(p);

            mv_mapview.invalidate();

            longitude = (int)(p.getLongitudeE6()*1E6);
            latitude = (int)(p.getLatitudeE6()*1E6);

            new AlertDialog.Builder(ShowMap.this)
                    .setTitle("Routes")
                    .setMessage("Display Routes?")
                    .setNegativeButton("NO",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub

                                    textlocation.setText("Tap in the Map for Destination!");
                                    dialog.dismiss();

                                }
                            })
                    .setPositiveButton("YES",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    try{
                                        textlocation.setText("");
                                        parsing(geop_startpoint,geop_Tpoint);
                                        geocodeExecuter(geop_startpoint,geop_Tpoint);
                                        showButton.setEnabled(true);

                                    }catch(Exception e){

                                        textlocation.setText(""+ e.getMessage());

                                    }

                                }

                            }).show();
            showButton.setEnabled(true);
            return true;
        } 
```

起点是通过 GPS，它会告诉我我在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:14:55.103

这将帮助您获得从 A 点到 B 点的路线。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr=" + startLatitude + "," + startLongitude + "&daddr=" + destlat + "," + destlon));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:47:57.500

这取决于你如何询问谷歌地图的方向。如果您使用指定源和目标的链接创建意图，您可以尝试调用如下内容：

```
https://maps.google.com/maps?saddr=START_POINT&daddr=MIDDLE_POINT+to:DESTINATION_POINT 
```

这也接受 GPS 坐标，所以你也可以这样调用：

```
https://maps.google.com/maps?saddr=START_POINT&daddr=XX.YYYYY,WW.ZZZZZ+to:DESTINATION_POINT 
```

如果起点和终点是固定的，您可以尝试执行以下操作：

*   获取起点的 GPS 坐标
*   获取目的地的 GPS 坐标
*   生成几个不超过源和目标定义的矩形的坐标（XY）

这应该在 A 和 B 之间的某处生成一个随机点。

如果您将中间点放在玉米地或类似的地方，谷歌地图足够聪明，可以选择最靠近道路的点来生成方向。

* * *

更新：阅读代码后：我认为获得结果的最快方法是找到 A 和 B 的 GPS 位置，然后在两者之间生成一个随机点并进行 2 次调用：A-RandomPoint B-RandomPoint。

总距离将是 AR 行程和 RB 行程之和，时间相同。

关于中点的计算： 第一：设置边界。如果你想计算 X：取 A 点的 X 和 B 点的 X。此时：minX 将是最低的，maxX 将是最高的（如果你的点很近，你可能要仔细考虑你在做什么绿女巫）。现在在你的最大值和最小值之间生成一个随机浮点数。这是一项微不足道的任务，并且有很多结果。只是一个例子：[如何在 Java 中生成特定范围内的随机整数？](https://stackoverflow.com/questions/363681/generating-random-number-in-a-range-with-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:27:04.583

这就是我在Java中转换它的方式。

```
 public List<GeoPoint> findCoordinatesInACircle(double lat, double longi,double radius){

        double newLat;
        double newLong;

        List<GeoPoint> searchpoints = new ArrayList<GeoPoint>();

        double rLat=(radius/6371)*(180/Math.PI);  
        double rLon= rLat/Math.cos(longi * (Math.PI/180));

        for(int i =0 ; i < 181; i++ ){

            double iRad = i*(Math.PI/180);
            newLat = lat + (rLat * Math.sin(iRad));
            newLong = longi + (rLon * Math.cos(iRad));

            GeoPoint onePoint = new GeoPoint((int)(float)(newLat),(int)(float)(newLong));

            if(i%pointInterval == 0){
                searchpoints.add(onePoint); 
            }

        }
        return searchpoints;

    } 
```

# opencart - 将变量发布到opencart中的文件

> ID：13492908
> 
> 赞同：1
> 
> 时间：2012-11-21T12:07:49.727
> 
> 标签：opencart

我想将一些变量发布到 opencart 中的特定文件。我的问题是我不确定如何指定将它们发布到的文件。这是我的 checkout.tpl 文件，在默认模板中。我正在尝试将变量发布到我的 confirm.tpl 文件中，也在默认模板中。这和我所得到的一样接近：

```
$('#button-account').live('click', function() {
                    var var1= $('#var1').val();
                    var var2= $('#var2').val();
                    $.post("catalog/view/theme/default/template/checkout/confirm.tpl", { quantity: quantity, total: total }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:18:20.517

由于 OpenCart 的 MVC 特性，您实际上需要将结果发布到配置为接受 ajax 发布的控制器中的特定函数，而不是模板。

尝试阅读[如何成为 OpenCart 大师的答案？](https://stackoverflow.com/questions/13478995/how-to-become-an-opencart-guru)杰伊·吉尔福德提供的。您可能会更好地了解系统以及所有内容如何组合在一起。

的`add()`功能`checkout/cart`是为json配置的，看看你能不能从中解决。

```
$.post("catalog/view/theme/default/template/checkout/confirm.tpl", { quantity: quantity, total: total }); 
```

可能应该是这样的：

```
$.post("index.php?route=checkout/confirm/<function here>", { quantity: quantity, total: total }); 
```

# sql - GROUP BY 和 catx 的 2 列计数给出不同的输出

> ID：13492909
> 
> 赞同：3
> 
> 时间：2012-11-21T12:08:02.897
> 
> 标签：sql, sas

我必须找到 2 个变量组合的不同计数。我使用以下 2 个查询来查找计数：

```
select count(*) from 
(   select V1, V2 
    from table1
    group by 1,2
) a 
```

```
select count(distinct catx('-', V1, V2)) 
from table1 
```

从逻辑上讲，上述两个查询都应该给出相同的计数，但我得到的计数不同。注意

*   V1 和 V2 都是整数
*   两个变量都可以有空值，尽管我的表中没有空值
*   没有负值

知道为什么我可能会得到不同的输出吗？哪个是查找 2 列或更多列的不同组合计数的最佳方法？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T12:46:27.427

当您运行第一个 sql 代码时，SAS 日志给出了答案。使用 'group by' 需要一个汇总函数，否则将被忽略。因此，该计数将返回总行数，而不是组合的 2 个变量的不同计数。只需将 count(*) 添加到子查询中，两种方法都会得到相同的答案。

```
select count(*) from 
(   select V1, V2, count(*) 
    from table1
    group by 1,2
) a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T13:28:07.137

在第一个查询的子查询中使用 distinct 。当您执行 group by 但不包含任何聚合函数时，它会丢弃 group by。所以你仍然会有 v1 和 v2 的重复组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:50:03.110

似乎 GROUP BY 在 SAS 中不起作用。除非您的查询中有聚合函数，否则您不能使用它来删除重复项。我在查询输出的日志中发现了这一点 -

> 注意： GROUP BY 子句已被丢弃，因为关联表表达式的 SELECT 子句和可选的 HAVING 子句均未引用摘要函数。

这回答了这个问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-10T07:07:22.867

您也可以按部分忽略分组，只需在子查询中添加一个不同的。您编写的第二个查询也更有效

# c# - 如何刷新绑定组？

> ID：13492911
> 
> 赞同：1
> 
> 时间：2012-11-21T12:08:14.373
> 
> 标签：c#, wpf, validation, listbox

我有一个 ListBox，其 ItemSource 绑定到实现 IDataErrorInfo 的对象集合。为了让 ListBox 中的项目单独验证，我使用了绑定组。

```
<ListBox.ItemBindingGroup>
    <BindingGroup>
        <BindingGroup.ValidationRules>
            <DataErrorValidationRule/>
        </BindingGroup.ValidationRules>
    </BindingGroup>
</ListBox.ItemBindingGroup> 
```

这很好用，但是验证只发生一次，我不知道如何让它再次发生。刷新 ItemsSource 绑定不会像我期望的那样导致刷新验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:43:50.293

我今天在玩绑定组并且有同样的问题，只是在连接数据网格中使用了这个规则。您必须使用其中一种方法（如 UpdateSources）来触发组验证：

```
 void StackPanel_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Return)
            (sender as StackPanel).BindingGroup.UpdateSources();
    } 
```

PS - 我使用的是 StackPanel，因此您可以尝试与您的 ListBox 相关的事件。

# asp.net-mvc - 人们真的使用 ASP.NET MVC 4 标准项目的标准登录/创建功能吗？

> ID：13492916
> 
> 赞同：3
> 
> 时间：2012-11-21T12:08:19.493
> 
> 标签：asp.net-mvc

我正在学习 ASP.NET MVC 4，一个基本组件是用户部分。我打算让文章有一个作者，也就是一个用户。但是，开箱即用 MVC 的标准用户内容（AccounModel/Controller/View）似乎非常复杂且难以扩展，所以我想知道它的优点是什么，如果人们真的使用它？

我的备份计划是删除整个事情，并实施我自己的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:29:34.213

您可以使用您的自定义帐户人员（模型/控制器/视图），但自定义内容应基于随附的授权系统（AuthorizeAttribute、角色、帐户、数据库模型模式），这在许多方面会更好：

*   使用默认授权系统更容易。

*   默认授权系统提供了管理角色、帐户等的全部功能。

开发您的授权系统非常复杂，因为失败的成本，您自己的授权组件中的错误可能会导致安全漏洞。我建议在极少数情况下开发您的自定义授权组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:12:13.457

这只是一个示例模板......如果你愿意，你可以扩展它，但很多人使用他们自己的。尤其是在使用实体框架并生成模型和视图时，使用自己的方法更容易也更合适。因为如果你不这样做，那将是你正在做的事情的一个例外，在编码中我们不喜欢例外:-)。

# c# - 模型上带有鼠标的橡皮筋不在屏幕位置上

> ID：13492922
> 
> 赞同：0
> 
> 时间：2012-11-21T12:08:51.943
> 
> 标签：c#, opengl

我正在尝试使用带有橡皮筋方法的鼠标绘制三角形或矩形。在屏幕位置有可用于橡皮筋方法的方法，但我希望它在模型位置上。任何人都可以提出一些方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:23:07.173

您应该始终在屏幕空间中绘制橡皮筋。执行选择后，将橡皮筋限制转换为模型空间平面（橡皮筋的线转换为一组 4 个平面，用于定义选择体积）。

# ruby-on-rails - 当我使用 redmine 的发票插件创建 pdf 时出现欧元字符问题

> ID：13492924
> 
> 赞同：1
> 
> 时间：2012-11-21T12:08:54.733
> 
> 标签：ruby-on-rails, utf-8, redmine-plugins, invoices

我为 redmine 安装了 crm-invoices 插件。我选择了我的货币：欧元并创建了我的第一张发票。但是后来我选择了pdf导出选项，并且欧元字符在pdf上没有正确显示（只是一个正方形）它似乎与utf-8和大虾有关。

# asp.net - 在 httphandler 中创建会话时如何在代码文件中获取会话值

> ID：13492932
> 
> 赞同：0
> 
> 时间：2012-11-21T12:09:15.150
> 
> 标签：asp.net

在 httphandler 中创建会话时如何在代码文件中获取会话值。它会给出错误，例如未将对象引用设置为对象的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:34:50.203

会话与页面请求相关联，工作需要从浏览器读取用户的 cookie，如果没有 cookie，则需要读取 url。

所以在asp.net session中如果没有httphandler，就不能有session，因为你无法知道当时是谁在调用，也看不到页面。

也许在自定义解决方案会话中，您可以在没有 httphandler 的情况下将会话 ID 发送到其他代码并使用该 ID 读取会话数据，但 asp.net 没有提供此选项。

# excel - Excel Row() 和 Column() 函数

> ID：13492934
> 
> 赞同：1
> 
> 时间：2012-11-21T12:09:23.973
> 
> 标签：excel, function, row, excel-formula

我有一个简单的问题：

如何引用与列组合的行，反之亦然？
例如
，我有一张这样的桌子：

```
 |A|B|C|D|
1 |1|0|1|
2 |4|4|2|
3 |7|2|3|
4 |5|7|2|
5 |3|9|1| 
```

         要引用 A1，我如何使用 Row() 函数引用它
         我希望列保持不变，但行可以根据我所在的行而变化。

例如，如果我在 D5 上，我想要类似的东西：`=SUM(ARow(), CRow())`这相当于`=SUM(A5, C5)`返回 4。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:15:07.030

...抱歉对于上一个答案，假设您想更改行但保持列不变，您可以使用`$`公式中的引用。

例如，如果您在 D5 中的公式是：

```
= Sum($A5, $C5) 
```

这将保持列不变，行会改变。

同样，`$A$5`将强制公式始终使用`A5`并`A$5`强制公式始终使用第 5 行，但更改列。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:24:37.560

`ROW()`and函数引用行`COLUMN()`和列，而不是单个单元格...您可能会得到该`ADDRESS()`函数的帮助，您可以在其中使用行号和列号作为参数。

对于引用列-行组合的基础知识，无需进一步解释函数的逻辑，您可以简单地使用单元格地址本身：

D5：`=SUM(A5, C5)`

# c# - 如何通知数组的项目已更新？

> ID：13492943
> 
> 赞同：1
> 
> 时间：2012-11-21T12:10:01.223
> 
> 标签：c#

假设我有一些数组。所有项目最初都是`null` Thread1 写入数组的。Thread2 阻塞，直到数组中的所有项目都被设置（然后处理）。

我是这样做的：我用`AutoResetEvent`. 在 Thread1 中，每次我更新数组项时，我都会调用`Set`相应的 AutoResetEvent，而在 Thread2 中，我只是`WaitHandle.WaitAll(events);`

但现在我确实认为这不是有效的。我认为我可能应该使用**一个**事件。因为我可以计算更新了多少项目，所以我可以在上次更新时引发事件。

这是一个简化的例子，在现实生活中事情有点难，但也许你可以提出更好的建议？

我也应该`Volatile.Read`在 Thread1 中使用吗？（我有双CPU机器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:12:07.897

什么不看一下[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)以便您可以以线程安全的方式添加您的项目？

您也可以考虑使用[线程安全的 ObserveableCollection](https://stackoverflow.com/questions/3899940/is-there-a-threadsafe-observable-collection-in-net-4)来获取通知。

# c# - 如何同步处理 filesystemwatcher 事件？

> ID：13492944
> 
> 赞同：1
> 
> 时间：2012-11-21T12:10:02.763
> 
> 标签：c#, .net, multithreading, locking, filesystemwatcher

我有以下同步问题。

线程循环运行，如果它检测到文件系统中尚未处理的文件夹（可能在应用程序未运行时已添加），则该文件夹将通过以下`Process`方法作为新文件夹处理：

```
void Loop()
{
 while (run)
 {
  lock(renameLock)
  {
    var newFolders = EnumerateNewFolders().ExceptThoseMarkedAsRenamed();
    Process(newFolders);
    MarkAsProcessed(newFolders);
  }
  Sleep();
 }
} 
```

重命名的文件夹不应作为新文件夹处理，而是作为重命名文件夹处理并标记为重命名文件夹，以便以后不会将它们作为新文件夹处理。

为了解决这个问题，我有一个事件`FileSystemWatcher`处理程序`Renamed`：

```
private void fsw_Renamed(object sender, RenamedEventArgs e)
{
  lock(renameLock)
  {
    ProcessRename(e);
    //mark folder as renamed so that ExceptThoseMarkedAsRenamed filters it out
    MarkAsRenamed(e);
  }
} 
```

通常这是有效的，当执行重命名时，文件夹首先被标记为重命名，`fsw_Renamed`然后在循环中被过滤掉，`ExceptThoseMarkedAsRenamed`而不是作为新的处理。

但有时会出现以下顺序：

1.  在 Windows 资源管理器和文件系统中重命名文件夹（当循环保持锁定时）
2.  fsw_Renamed 发生，但无法获取锁
3.  循环线程仍保持锁定并将文件夹拾取为新文件夹（尚未标记为重命名）
4.  循环线程释放锁
5.  发生重命名事件，获得锁，文件夹被标记为重命名。但是已经为时已晚，因为它已经作为新的处理了。

我无法弄清楚如何确保重命名的文件夹永远不会作为新文件夹处理。

重命名的文件夹是`Renamed`事件**发生或将在不久的将来发生**的文件夹，因为文件系统更改和事件之间存在固有的延迟`FileSystemWatcher.Renamed`（文件系统的实际更改和引发的事件不是原子的）。

**如何确保循环始终考虑 fsw_Renamed 所做的更改，即使事件发生在循环持有锁时？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:39:21.090

您要处理文件夹，根据文件夹是新文件夹还是简单重命名文件夹，有两种不同的处理方式。您正在使用 fs 监视对象，该对象在给定文件夹已重命名时触发事件。您应该对新文件夹使用类似的监控，并让这些事件创建绑定到该文件夹​​的任务。

捕获事件的线程不会有竞争条件问题，只会调度新任务，因此它不会被处理延迟，并且能够在新事件发生时对其进行处理。任务队列可以只是一个包含文件夹和要应用到它的任务的对列表。

当一个文件夹被安排处理时，发生在它们身上的任何事件都应该被监视器过滤掉，通过检查任务队列来查看文件夹是否存在。它甚至可以根据其他因素更改任务或将其删除（例如，如果文件夹在处理之前已被删除 - 也许监视该事件也会很好）。

一个任务可能是这样的：

*   锁定要处理的文件夹（这样可以避免文件夹受到外部影响）
*   处理它
*   将其标记为“已处理”（将其从列表中删除）
*   解锁它

您不能保留 renameLock，因为它首先是造成问题的原因。如果您无法锁定文件夹，也许您可​​以将其移动（我想这在技术上类似于重命名）以进行处理，然后将其移回原位。

这个[SO question](https://stackoverflow.com/questions/4692981/c-sharp-blocking-a-folder-from-being-changed-while-processing)处理 C# 中锁定文件夹的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:05:06.403

您可以尝试以下方法：

1.  **仅**在应用程序启动时运行该`Loop`方法。可能在订阅.**`FileSystemWatcher`**
***   在您订阅`FileSystemWatcher.Created`的目录上订阅`FileSystemWatcher.Renamed`。*   保持`FileSystemWatcher.Renamed`订阅不变。*   移除锁，因为这两个事件不应相互冲突。**

 ****第 1 步将处理在您的应用程序未**运行时创建/重命名的目录。

**第 2 步将在您的应用程序**运行时处理新目录。

**第 3 步将在您的应用程序**运行时处理重命名的目录。**

# ios - iOS 6 GKChallenge 生成唯一标识符？

> ID：13492949
> 
> 赞同：3
> 
> 时间：2012-11-21T12:10:20.833
> 
> 标签：ios, game-center

我目前正在编写一个很大程度上基于游戏中心参与度的游戏。我想实现游戏内挑战，但问题是我需要为每个发出的挑战提供某种唯一标识符，以便我可以在服务器上跟踪挑战。

我试图通过具有以下字段的[GKChallenge](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKChallenge_Ref/Reference/Reference.html#//apple_ref/doc/c_ref/GKChallenge)对象来实现这一点：

*   发行日期
*   发行PlayerID
*   接收玩家ID
*   信息
*   状态
*   完成日期

问题是这里唯一可用的（就我而言）唯一字段是 issueDate，但我无法在 issueChallenge 方法中检索 issueDate。

那么问题来了：**是否可以为游戏中心挑战生成任何类型的唯一 ID？如果没有，是否还有其他应对挑战的解决方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:27:05.697

您只能通过游戏中心发出 GKScoreChallenges 和 GKAchievementChallenges。而且我不明白您为什么要在服务器上跟踪它们。游戏中心处理挑战，您可以使用`loadReceivedChallengesWithCompletionHandler`.

它`GKScoreChallenge`有`GKScore`一个唯一的字段（uint64_t 上下文），允许游戏存储和检索与分数相关的附加数据。

如果您不想使用这些游戏中心功能并通过您自己的服务器处理挑战，您可以创建一个 GKChallenge 子类并实现您自己的挑战逻辑。

# cocos2d-iphone - cocos2d中非矩形CCNode的轮廓（笔画）

> ID：13492951
> 
> 赞同：5
> 
> 时间：2012-11-21T12:10:24.937
> 
> 标签：cocos2d-iphone, ccsprite, stroke, ccnode

我需要动态创建这样的大纲：

![红色 2px 轮廓](../Images/56db5230c685f95a095390b9390dcc8f.png)

不是针对一个 CCSprite，而是针对联合在一个 CCNode 中的多个动画 CCSprite。我在想：

1.  将 CCNode 的内容复制到纹理中（如`canvasBitmapData.draw(sourceDisplayObject)`在 AS3 中）
2.  使用生成的纹理创建 CCSprite
3.  给精灵着色以勾勒颜色并放大一点
4.  将精灵放在节点中其他精灵的后面

我不知道如何执行第 1 步。也许在第 3 步中围绕纹理的不透明像素而不是色调比例绘制“[真实笔触”会更快？](http://devblog.phillipspiess.com/2010/02/23/better-know-an-algorithm-1-marching-squares/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-10T01:40:05.417

我完全忘了发布这个问题的答案。这是非常平滑的笔划的代码。它并不快，但对于第一台 iPad 上的几个大精灵来说效果很好。

这个想法是在精灵周围绘制微小的彩色和模糊球，并将它们放置在自己的纹理上。它可以用于 CCNode 和 CCSprite。该代码还会移动锚点，因为生成的精灵将具有更大的宽度和高度。

生成的轮廓（身体和两只手，iPad1 上大约 0.3 秒）：

![大纲](../Images/660f6708638efd43c5e6146f2b5ca9a9.png)

白球示例：

*   5f：http: [//i.stack.imgur.com/e9kos.png](https://i.stack.imgur.com/e9kos.png)
*   10f：http: [//i.stack.imgur.com/S5goU.png](https://i.stack.imgur.com/S5goU.png)
*   20f：http: [//i.stack.imgur.com/qk7GL.png](https://i.stack.imgur.com/qk7GL.png)

CCNode 类别，适用于 Cocos2d-iPhone 2.1：

```
@implementation CCNode (Outline)

- (CCSprite*) outline
{
    return [self outlineRect:CGRectMake(0, 0, self.contentSize.width, self.contentSize.height)];
}

- (CCSprite*) outlineRect:(CGRect)rect
{
    NSInteger gap = dscale(4);
    CGPoint positionShift = ccp(gap - rect.origin.x, gap - rect.origin.y);
    CGSize canvasSize = CGSizeMake(rect.size.width + gap * 2, rect.size.height + gap * 2);

    CCRenderTexture* renderedSpriteTexture = [self renderTextureFrom:self shiftedFor:positionShift onCanvasSized:canvasSize];
    CGSize textureSize = renderedSpriteTexture.sprite.contentSize;
    CGSize textureSizeInPixels = renderedSpriteTexture.sprite.texture.contentSizeInPixels;

    NSInteger bitsPerComponent = 8;
    NSInteger bytesPerPixel = (bitsPerComponent * 4) / 8;
    NSInteger bytesPerRow = bytesPerPixel * textureSizeInPixels.width;
    NSInteger myDataLength = bytesPerRow * textureSizeInPixels.height;

    NSMutableData* buffer = [[NSMutableData alloc] initWithCapacity:myDataLength];
    Byte* bytes = (Byte*)[buffer mutableBytes];

    [renderedSpriteTexture begin];
    glReadPixels(0, 0, textureSizeInPixels.width, textureSizeInPixels.height, GL_RGBA, GL_UNSIGNED_BYTE, bytes);
    [renderedSpriteTexture end];

    //SEE ATTACHMENT TO GET THE FILES
    NSString* spriteFrameName;
    if (IS_IPAD) spriteFrameName = (CC_CONTENT_SCALE_FACTOR() == 1) ? @"10f.png" : @"20f.png";
    else spriteFrameName = (CC_CONTENT_SCALE_FACTOR() == 1) ? @"5f.png" : @"10f.png";

    CCSprite* circle = [CCSprite spriteWithSpriteFrameName:spriteFrameName];
    circle.anchorPoint = ccp(0.48, 0.48);
    float retinaScale = (CC_CONTENT_SCALE_FACTOR() == 1) ? 1.0 : 0.5;

    CCRenderTexture* strokeTexture = [CCRenderTexture renderTextureWithWidth:textureSize.width height:textureSize.height pixelFormat:kCCTexture2DPixelFormat_RGBA8888];
    [strokeTexture beginWithClear:0 g:0 b:0 a:0];
    for (NSInteger x = 0; x < textureSizeInPixels.width; x++)
    {
        for (NSInteger y = 0; y < textureSizeInPixels.height; y++)
        {
            NSInteger idx = y * bytesPerRow + x * bytesPerPixel + 3;
            NSInteger w = 1;
            if (bytes[idx] <= 254)
            {
                BOOL shouldBeStroked = NO;
                for (NSInteger nx = -w; nx <= w; nx++)
                {
                    for (NSInteger ny = -w; ny <= w; ny++)
                    {
                        if (x + nx < 0 || y + ny < 0 || x + nx >= textureSizeInPixels.width || y + ny >= textureSizeInPixels.height)
                            continue;

                        if (bytes[idx + nx * bytesPerPixel + ny * bytesPerRow] == 255)
                        {
                            shouldBeStroked = YES;
                            break;
                        }
                    }
                }

                if (shouldBeStroked == YES)
                {
                    circle.position = ccp(x * retinaScale, y * retinaScale);
                    [circle visit];
                }
            }
        }
    }
    [strokeTexture end];

    CCSprite* resultSprite = [CCSprite spriteWithTexture:strokeTexture.sprite.texture];
    [resultSprite.texture setAntiAliasTexParameters];
    resultSprite.flipY = YES;

    if ([self isKindOfClass:[CCSprite class]]) {
        CGPoint oldAnchorInPixels = ccp(roundf(self.contentSize.width * self.anchorPoint.x), roundf(self.contentSize.height * self.anchorPoint.y));
        resultSprite.anchorPoint = ccp((oldAnchorInPixels.x + gap) / resultSprite.contentSize.width, (oldAnchorInPixels.y + gap) / resultSprite.contentSize.height);
        resultSprite.position = self.position;
    } else { //CCNode
        resultSprite.anchorPoint = CGPointZero;
        resultSprite.position = ccpAdd(self.position, ccp(rect.origin.x - gap, rect.origin.y - gap));
    }
    return resultSprite;
}

- (CCRenderTexture*) renderTextureFrom:(CCNode*)node shiftedFor:(CGPoint)posShift onCanvasSized:(CGSize)size
{
    SoftAssertion(!CGSizeEqualToSize(size, CGSizeZero), @"node has zero size");

    BOOL isSprite = [node isMemberOfClass:[CCSprite class]];
    CGPoint apSave = node.anchorPoint;
    CGPoint posSave = node.position;
    BOOL wasVisible = node.visible;

    CCRenderTexture* rtx = [CCRenderTexture renderTextureWithWidth:size.width
                                                            height:size.height
                                                       pixelFormat:kCCTexture2DPixelFormat_RGBA8888];
    [rtx beginWithClear:0 g:0 b:0 a:0];

    node.anchorPoint = CGPointZero;
    node.position = posShift;
    node.visible = YES;

    if (isSprite) [node visit];
    else [[self cloneCCNode:node] visit];

    node.anchorPoint = apSave;
    node.position = posSave;
    node.visible = wasVisible;

    [rtx end];
    return rtx;
}

- (CCNode*) cloneCCNode:(CCNode*)source
{
    CCNode* clone = [CCNode node];

    void (^copyCCNodeProperties)(CCNode*, CCNode*) = ^(CCNode* source, CCNode* clone)
    {
        clone.visible = source.visible;
        clone.rotation = source.rotation;
        clone.position = source.position;
        clone.anchorPoint = source.anchorPoint;
        clone.zOrder = source.zOrder;
        clone.tag = source.tag;
    };

    for (CCNode* srcSubnode in source.children) {

        CCNode* subNode;

        if ([srcSubnode isMemberOfClass:[CCSprite class]]) {
            CCSprite* srcSprite = (CCSprite*)srcSubnode;
            subNode = [CCSprite spriteWithTexture:srcSprite.texture];
            CCSprite* subSprite = (CCSprite*)subNode;
            subSprite.flipX = srcSprite.flipX;
            subSprite.flipY = srcSprite.flipY;
            subSprite.displayFrame = srcSprite.displayFrame;
            subSprite.opacity = srcSprite.opacity;
        }
        else if ([srcSubnode isMemberOfClass:[CCLabelTTF class]]) {
            CCLabelTTF* srcLabel = (CCLabelTTF*)srcSubnode;
            subNode = [CCLabelTTF labelWithString:srcLabel.string fontName:srcLabel.fontName fontSize:srcLabel.fontSize dimensions:srcLabel.dimensions hAlignment:srcLabel.horizontalAlignment vAlignment:srcLabel.verticalAlignment];
            CCSprite* subLabel = (CCSprite*)subNode;
            subLabel.flipX = srcLabel.flipX;
            subLabel.flipY = srcLabel.flipY;
            subLabel.color = srcLabel.color;
        }
        else {
            subNode = [self cloneCCNode:srcSubnode];
        }

        copyCCNodeProperties(srcSubnode, subNode);
        [clone addChild:subNode];
    }
    copyCCNodeProperties(source, clone);

    return clone;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:29:58.567

我有一个从各种来源建立的通用功能（我很惭愧地说我不能在这里引用）。它的作用是获取一个 CCSprite，创建一个可以放在它后面的笔画，然后在 CCRenderTexture 中返回。如果传入的精灵有孩子（就像你的那样），我看不出它为什么不能做你想做的事，但我没有尝试过。

这是它的工作原理：

```
@implementation Cocosutil

+(CCRenderTexture*) createStrokeForSprite:(CCSprite*)sprite  size:(float)size  color:(ccColor3B)cor
{
    CCRenderTexture* rt = [CCRenderTexture renderTextureWithWidth:sprite.texture.contentSize.width+size*2  height:sprite.texture.contentSize.height+size*2];
    CGPoint originalPos = [sprite position];
    ccColor3B originalColor = [sprite color];
    BOOL originalVisibility = [sprite visible];
    [sprite setColor:cor];
    [sprite setVisible:YES];
    ccBlendFunc originalBlend = [sprite blendFunc];
    [sprite setBlendFunc:(ccBlendFunc) { GL_SRC_ALPHA, GL_ONE }];
    CGPoint bottomLeft = ccp(sprite.texture.contentSize.width * sprite.anchorPoint.x + size, sprite.texture.contentSize.height * sprite.anchorPoint.y + size);
    CGPoint positionOffset = ccp(sprite.texture.contentSize.width * sprite.anchorPoint.x - sprite.texture.contentSize.width/2,sprite.texture.contentSize.height * sprite.anchorPoint.y - sprite.texture.contentSize.height/2);
    CGPoint position = ccpSub(originalPos, positionOffset);

    [rt begin];
    for (int i=0; i<360; i+=30)
    {
        [sprite setPosition:ccp(bottomLeft.x + sin(CC_DEGREES_TO_RADIANS(i))*size, bottomLeft.y + cos(CC_DEGREES_TO_RADIANS(i))*size)];
        [sprite visit];
    }
    [rt end];
    [sprite setPosition:originalPos];
    [sprite setColor:originalColor];
    [sprite setBlendFunc:originalBlend];
    [sprite setVisible:originalVisibility];
    [rt setPosition:position];
    return rt;
}

@end 
```

这是我使用它的代码：

```
- (id) initWithSprite:(CCSprite*)sprite color:(ccColor3B)color strokeSize:(float)strokeSize strokeColor:(ccColor3B)strokeColor {
    self = [super init];

    if (self != nil) {
        strokeColor_ = strokeColor;
        strokeSize_ = strokeSize;
        CCRenderTexture *stroke = [CocosUtil createStrokeForSprite:sprite size:strokeSize color:strokeColor];
        [self addChild:stroke z:kZStroke tag:kStroke];
        [self addChild:sprite z:kZLabel tag:kLabel];
        [self setContentSize:[sprite contentSize]];
    }    

    return self;
} 
```

# android - 有没有办法在不使用新的 Activity 类的情况下创建新屏幕？

> ID：13492952
> 
> 赞同：0
> 
> 时间：2012-11-21T12:10:24.173
> 
> 标签：android, android-activity

我正在开发一个应用程序。因为我有太多的屏幕，所以我使用了太多的 Activity 类。我遵循的方法是非常差的方法。

所以我想知道有什么方法可以在不使用新的 Activity 类的情况下创建新屏幕。

还有一件事我可以让我的活动像我可以从另一个滑动的页面一样。

如果有人知道答案，请帮助我。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:25:36.873

要更改屏幕，您必须启动一个活动，但要使您的应用程序看起来更好，您可以使用[片段，也可以使用](http://developer.android.com/guide/components/fragments.html)[ViewPager](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)使页面滑动。

ViewPager 作为 Compatibility Package 修订版 3 的一部分发布，适用于 Android 1.6 以上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:24:14.553

您可以通过以下方式使用

```
class Activity{

method1();
method2();
..
void method1(){
setContentView(layout);
}
method2(){
if(case1)
{
setContentView(layout);
}
else if(case2){
setContentView(layout)}
...
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:54:43.133

您可以通过多种方式处理此问题。

这是[关于使用 Fragments 的培训课程](http://developer.android.com/training/basics/fragments/index.html)

这是[关于使用水平滑动和标签的培训课程](http://developer.android.com/training/implementing-navigation/lateral.html)

# sql - 在 SQL Server 中的列上创建索引时出错

> ID：13492955
> 
> 赞同：-1
> 
> 时间：2012-11-21T12:10:35.437
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在我的数据库中创建了以下函数

```
Create FUNCTION [dbo].[CountUseer](@couponid INT)
RETURNS INT
AS
 BEGIN
 RETURN
(
  SELECT Count(cu.id) NofUses  --- this can only return one column
  FROM   Coupon as  c
  JOIN CouponUse as cu
    ON c.id = cu.couponid
  WHERE cu.couponid = @couponid
 )
 END 
```

然后我运行这个查询

```
 ALTER TABLE dbo.Coupon
   ADD NofUses AS dbo.CountUseer(Id) 
```

现在，当我尝试在列上创建索引时`NofUses`：

```
CREATE INDEX Noofusesindex ON Coupon (NofUses) 
```

我收到此错误：

> *表 'Coupon' 中的列 'NofUses' 不能用于索引或统计信息或用作分区键，因为它是不确定的。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:15:29.563

好吧，错误信息真的说明了一切：因为这个函数是**不确定的**（例如，当你用相同的输入参数调用它时，不能保证每次都会得到相同的结果），它**不能被索引**。

解决此问题的唯一方法是将其设为常规列（不基于函数），并定期更新存储在该列中的值（例如，通过 SQL 代理作业或通过`CouponUse`表或其他一些机制）

# php - 如何使用 smarty 和 php 从 HTML 中解析和获取标签的 url？

> ID：13492956
> 
> 赞同：0
> 
> 时间：2012-11-21T12:10:36.130
> 
> 标签：php, smarty, smarty3

我有一个 smarty 变量，它将 HTML 内容保存为值。在 HTML 内容中有一个图像。我必须提取该图像的 url 以调整大小。

我知道有一种方法可以在 php 中解析它并分配给 smarty 变量。但我需要知道 smarty 中是否有任何方法，如正则表达式，可以`<img>`从 HTML 中获取标签的 url。

例子：

```
{$post_content|regex_replace:"/(<img>|<img [^>]*>|<\\/>)/":""} 
```

这是`<img>`单独转义标签的代码。同样，我需要从`$post_content`变量中获取图像的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:16:10.620

smarty 只是一个模板引擎。不是另一种语言。

所以你可以在php中做的任何事情也可以在smarty中完成。

所以使用 php dom 解析器 :)

[检查这个](https://stackoverflow.com/questions/4385382/php-functions-using-with-smarty-template)

并[检查这个](http://www.smarty.net/crash_course)

一个说你不能使用 php 函数，另一个说，但我说的是，你可以在将其分配给模板引擎之前使用 php 函数。

# android - 如何在不使用 ActvityGroup 的情况下在选项卡中启动新活动

> ID：13492958
> 
> 赞同：0
> 
> 时间：2012-11-21T12:10:54.483
> 
> 标签：android, tabs, android-activity, android-tabhost

我没有在我的项目中使用activityGroup。现在我不是一个使用活动组来实施整个项目的职位。

*   我必须在我的项目中实现 activityGroup 类吗？

如果是，请提供activityGroup实现的基本教程的链接。

这是我的 MainActvity.java，它在 4 个选项卡中加载了 4 个其他活动。

```
 public class MainActivity extends TabActivity {
        TabHost tabHost;
        Context context = MainActivity.this;
        Button btnGo;
        TabSpec spec;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main); 
            btnGo = (Button) findViewById(R.id.btn_GO);     
            tabHost = getTabHost();
            // Android tab
            Intent intentHome = new Intent();
            intentHome.setClass(this, Home.class);
            TabSpec tabSpecHome = tabHost
                    .newTabSpec("Home")
                    .setIndicator("Home",
                            getResources().getDrawable(R.drawable.home))
                    .setContent(intentHome);

            tabHost.addTab(tabSpecHome);

            Intent intentNowReading = new Intent().setClass(this, NowReading.class);
            TabSpec tabSpecNowReading = tabHost
                    .newTabSpec("Now Reading")

                    .setIndicator("Now Reading",
                            getResources().getDrawable(R.drawable.now_reading))
                    .setContent(intentNowReading);
            tabHost.addTab(tabSpecNowReading);

            Intent intentFavourite = new Intent().setClass(this, Favorites.class);
            TabSpec tabSpecFavourite = tabHost
                    .newTabSpec("Favourite")
                    .setIndicator("Favorites",
                            getResources().getDrawable(R.drawable.favorites))
                    .setContent(intentFavourite);
            tabHost.addTab(tabSpecFavourite);

            Intent intentProfile = new Intent().setClass(this, Profile.class);
            TabSpec tabSpecProfile = tabHost
                    .newTabSpec("Profile")
                    .setIndicator("Profile",
                            getResources().getDrawable(R.drawable.profile))
                    .setContent(intentProfile);
            tabHost.addTab(tabSpecProfile);
            tabHost.setCurrentTabByTag("Home");
...} 
```

![在此处输入图像描述](../Images/c4c1aab2a4d708a647febc4a36a21a58.png)

*   现在我想在“开始”按钮的单击事件上的“主页”选项卡区域中启动新活动。（见图）。
*   请注意，我不想影响 ActivityGroup 类，没有这个我该怎么做。
*   新的 Activity 必须加载到 HomeTab 的区域，而不是全屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:13:31.203

ActvityGroup 是个坏主意，这是旧的、已弃用的 API，不要使用它。

您必须使用[Fragments API](http://developer.android.com/guide/components/fragments.html)，只需创建一个 Fragment 并使用 FragmentTransaction 将其添加到布局中，这就是您所需要的。

# java - 为什么表达语言比 Scriplets 更受欢迎？

> ID：13492960
> 
> 赞同：3
> 
> 时间：2012-11-21T12:11:09.110
> 
> 标签：java, jsp, el, scriptlet

我一直听说我们应该在 JSP 中使用表达式语言而不是 scriplets。但没有人给出任何具体的理由。可读性是其背后的唯一原因吗？我想听听一些使用 EL 而不是 scriplets 的充分理由，这样我就可以说服自己和其他人。我个人觉得使用 scriplets 比 scriplets 更容易，可能我对 java 的控制比 EL 更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:22:30.697

您希望避免具有复杂逻辑（例如条件或循环）的小脚本，因为这只会导致意大利面条式代码。

表达式语言没有这些（它只是评估表达式）。

# php - Facebook Share &p[summary] 未预先填写分享摘要

> ID：13492961
> 
> 赞同：1
> 
> 时间：2012-11-21T12:11:12.540
> 
> 标签：php, facebook, share

我已经完成了对网上所有地方的搜索，但我找不到解决方案。我已经编写了 Facebook 分享代码，以便使用 Facebook 分享者代码在 Facebook 上分享帖子。它的`&u`and`&t`参数工作正常，但我无法更改相同的描述。`&p[summary]`似乎不起作用。这是我的代码：

```
<a
    rel="nofollow"
    href="http://www.facebook.com/share.php?s=100&amp;u=<?php echo curPageURL();?>&amp;&t=<?php echo $title;?>&amp;p[summary]=<?php echo $desc;?>"
    class="fb_share_button"
    onclick="return fbs_click()"
    target="_blank"
    style="text-decoration:none;"
>Share</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:17:59.863

据我所知，Facebook 不再支持 Facebook 的旧 sharer.php 发布机制。旧文档链接[https://developers.facebook.com/docs/share/](https://developers.facebook.com/docs/share/)自动重定向到[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)。

您可以使用 Facebook 调试器：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-23T17:15:31.603

您无法使用 Sharer 执行此操作，但您可以使用 Share Dialog 执行此操作。您可以用于*共享*器的唯一格式是...

```
https://www.facebook.com/sharer/sharer.php?u={url}
https://www.facebook.com/sharer.php?u={url} 
```

顶部格式是**[官方 Facebook 分享按钮文档](https://developers.facebook.com/docs/plugins/share-button/)**中指明的唯一格式。要对此进行测试，请单击[Facebook Share Button Configurator](https://developers.facebook.com/docs/plugins/share-button/#configurator)中的“Get Code” ，然后查看生成的 URL。

所以，不，您可能不会指出摘要。但是，如果您使用*Share Dialog*，您也许可以做到这一点。这是正确的！Facebook 有两个用于共享的 API！为什么？ *Sharer*只允许分享一个 URL，它是安全的，不需要 AppId 或在 Facebook 注册。 *Share Dialog*需要 AppId 并在 Facebook 注册，因此，您可以在`quote`此处设置类似的内容。查看其他选项：[Facebook 官方分享对话框文档](https://developers.facebook.com/docs/sharing/reference/share-dialog/)。

开发商也公开出面表示，除了Sharer，他们不会支持`u={url}`任何*东西*。引用[Facebook 团队 Ibrahim Faour 的博客文章，2014 年 4 月 24 日](https://developers.facebook.com/support/bugs/357750474364812/)...

> 我们已更改共享器插件的行为，以与我们平台上的其他插件和功能保持一致。
> 
> 共享者将不再接受自定义参数，facebook 将从 url OG 元标记中提取预览中显示的信息，就像它在 facebook 上显示为帖子一样。

# google-chrome-extension - 在 chrome 扩展中分离类

> ID：13492962
> 
> 赞同：0
> 
> 时间：2012-11-21T12:11:14.723
> 
> 标签：google-chrome-extension

我正在编写我的第一个 chrome 扩展程序，但我似乎找不到任何方法来以 RequireJS 类型的方式引入功能..

我只想能够在 1 个 JS 文件中编写一个类并将其功能拉入我的 background.js 文件并使用它，以保持整洁。

我用谷歌搜索，找不到任何东西！我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:47:09.160

# 1

如果您想将`class.js`功能拉入 background.js，您可以将其附加到 manifest.json 中的脚本数组中。

像这样，

```
{
  "name": "My extension",
  ...
  "background": {
    "scripts": ["class.js","background.js"]
  },
  ...
} 
```

这意味着 background.js 将在 class.js 加载后加载。这样您就可以使用 in 的所有`class.js`功能`background.js`。

* * *

# 2

如果你想这样做`require.js`，你应该使用 background.html 而不是`background.js`.

像这样，

## 清单.json

```
{
    "background": {
      "page": "background.html"
    },
    "description":  "Background example",
    "name":         "Background example",
    "version":      "0.0.1",
    "manifest_version": 2,
     "web_accessible_resources": [
       "scripts/require-jquery.js",
       "scripts/main.js"
    ],
} 
```

如您所见，您必须将要使用的脚本文件添加到[web_accesible_resource](http://developer.chrome.com/extensions/manifest.html#web_accessible_resources)数组。

## 背景.html

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQuery+RequireJS Sample Page</title>
        <!-- This is a special version of jQuery with RequireJS built-in -->
        <script data-main="scripts/main" src="scripts/require-jquery.js"></script>
    </head>
    <body>
    </body>
</html> 
```

# jquery - 在范围内设置文本

> ID：13492967
> 
> 赞同：75
> 
> 时间：2012-11-21T12:11:32.383
> 
> 标签：jquery

我有这个跨度

```
<a title="Prev" data-event="click" 
   data-handler="prev" class="ui-datepicker-prev   ui-corner-all">
     <span class="ui-icon ui-icon-circle-triangle-w">Prev</span>
</a> 
```

我需要将跨度的文本设置为`<<`而不是当前的文本`Prev`。

我在下面尝试了这个，但它并没有像我预期的那样改变文本。如何才能做到这一点？

```
 $(".ui-icon .ui-icon-circle-triangle-w").html('<<'); 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-21T12:12:57.473

改用`.text()`，并更改您的选择器：

```
$(".ui-datepicker-prev .ui-icon.ui-icon-circle-triangle-w").text('<<'); 
```

**[-- 查看演示 --](http://jsfiddle.net/bwhfD/)**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-21T12:12:47.810

这是因为你有错误的选择器。根据你的标记，`.ui-icon`应该`.ui-icon-circle-triangle-w"`指向同一个`<span>`元素。所以你应该使用：

```
$(".ui-icon.ui-icon-circle-triangle-w").html("<<"); 
```

或者

```
$(".ui-datepicker-prev .ui-icon").html("<<"); 
```

或者

```
$(".ui-datepicker-prev span").html("<<"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-21T12:13:11.437

您需要修复您的选择器。尽管 CSS 语法要求多个类以空格分隔，但选择器语法要求它们直接连接，并以点为前缀：

```
$(".ui-icon.ui-icon-circle-triangle-w").text(...); 
```

或更好：

```
$(".ui-datepicker-prev > span").text(...); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-21T12:13:08.043

```
$('.ui-icon-circle-triangle-w').text('<<'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-04T00:14:37.550

为您的跨度提供一个 ID，然后更改目标跨度的文本。

```
$("#StatusTitle").text("Info");
$("#StatusTitleIcon").removeClass("fa-exclamation").addClass("fa-info-circle"); 

<i id="StatusTitleIcon" class="fa fa-exclamation fa-fw"></i>
<span id="StatusTitle">Error</span> 
```

在这里，“错误”文本将变为“信息”，并且它们的字体图标也将被更改。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-14T10:07:32.110

试试吧。它会首先寻找包含类“ui-icon-circle-triangle-w”的span的锚标记，然后将span的文本设置为“<<”。

```
$('a span.ui-icon-circle-triangle-w').text('<<'); 
```

# jquery - Primefaces 推送编码

> ID：13492971
> 
> 赞同：4
> 
> 时间：2012-11-21T12:11:40.083
> 
> 标签：jquery, jsf-2, primefaces, character-encoding, atmosphere

我使用 primefaces push 在 ap:notificationBar 中写入消息。如果我推送带有特殊字符（如俄罗斯字符）的消息，我有'？在我的留言中。我该如何解决这个问题？谢谢你的帮助。

（配置：primefaces 3.4 和 jsf2。我所有的 html 页面都是 utf8 编码）。

这是我的视图代码：

```
<p:notificationBar id="bar"
                widgetVar="pushNotifBar"
                position="bottom"
                style="z-index: 3;border: 8px outset #AB1700;width: 97%;background: none repeat scroll 0 0 #CA837D;">
            <h:form prependId="false">
                <p:commandButton icon="ui-icon-close"
                            title="#{messages['gen.close']}"
                            styleClass="ui-notificationbar-close"
                            type="button"
                            onclick="pushNotifBar.hide();"/>
            </h:form>
            <h:panelGrid columns="1" style="width: 100%; text-align: center;">
                <h:outputText id="pushNotifSummary" value="#{growlBean.summary}" style="font-size:36px;text-align:center;"/>
                <h:outputText id="pushNotifDetail" value="#{growlBean.detail}" style="font-size: 20px; float: left;" />
            </h:panelGrid>
        </p:notificationBar>
        <p:socket onMessage="handleMessage" channel="/notifications"/>

        <script type="text/javascript">
            function handleMessage(data) {
            var substr = data.split(' %% ');
            $('#pushNotifSummary').html(substr[0]);
            $('#pushNotifDetail').html(substr[1]);
            pushNotifBar.show();

            }

        </script> 
```

和我的 Bean 代码：

```
public void send() { 
        PushContext pushContext = PushContextFactory.getDefault().getPushContext(); 
        String var = summary + " %% " +  detail;
        pushContext.push("/notifications", var); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T04:46:08.207

这是不依赖 Atmosphere 框架（Primefaces 使用）编码机制的解决方案，可能会导致您的问题。

这个想法是将消息作为 Base64 编码的字符串推送，并使用 java 脚本在用户端对其进行解码。

1.使用Base64编码您的消息字符串并推送它

```
public void send() { 
    PushContext pushContext = PushContextFactory.getDefault().getPushContext(); 
    String var = summary + " %% " +  detail;
    byte b[] = var.getBytes("UTF-8");
    byte b64[] = Base64.encodeBase64(b);
    String message = new String(b64);
    pushContext.push("/notifications", message);
} 
```

您可以在 org.apache.commons.codec 库中找到 Base64 编码器，并使用

```
import org.apache.commons.codec.binary.Base64; 
```

2.当消息到达客户端时，使用以下java脚本对其进行解码

```
<script type="text/javascript">
    function handleMessage(data) {
      var decodedmessage=b64_to_utf8(data);
      var substr = decodedmessage.split(' %% ');
      $('#pushNotifSummary').html(substr[0]);
      $('#pushNotifDetail').html(substr[1]);
      pushNotifBar.show();
    }

    function b64_to_utf8( str ) {
      return decodeURIComponent(escape(window.atob( str )));
    }
</script> 
```

请注意 Base64 解码功能 window.atob 不是独立于浏览器的解决方案。有关这方面的更多详细信息，您可以访问[此处](https://developer.mozilla.org/en-US/docs/Web/API/window.atob)。

# jquery - HTML 表单提交概念性问题

> ID：13492976
> 
> 赞同：2
> 
> 时间：2012-11-21T12:12:05.760
> 
> 标签：jquery, html, forms, form-submit, submission

我有一些非常初步的概念性问题要问你。我正在用 HTML/CSS 做一个非常简单的会议站点。它只有一些额外的 JavaScript/jQuery。现在我想实现一个提交表单，我知道它的“视觉”部分使用 HTML 很简单。问题是，我当然想从提交中收集数据，所以我想知道我是否绝对必须在服务器端有一个数据库来收集它？由于最多有 35 份提交，因此对我来说，将包含每个提交数据（加密）的电子邮件发送到会议电子邮件地址的解决方案就足够了。那么，我是否必须编写代码和 SQL 数据库（例如，加上使用 PHP 或 Ruby 之类的东西），还是可以跳过它？

非常感谢，若昂·费尔南德斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:15:26.300

> 问题是，我当然想从提交中收集数据，所以我想知道我是否绝对必须在服务器端有一个数据库来收集它？

不。数据库对于解决许多问题很有用，但它们不是强制性的。

> 由于最多有 35 份提交，因此对于我来说，将包含每个提交数据（加密）的电子邮件发送到会议电子邮件地址就足够了。

如果您要直接发送电子邮件，并且您只有少量数据集（因此不会产生太多的体力劳动），那么这听起来不错。

> 那么，我是否必须编写代码和 SQL 数据库（例如，加上使用 PHP 或 Ruby 之类的东西），还是可以跳过它？

你不需要数据库。您确实需要一些东西（可以用 Perl、PHP、Ruby、Java、Python 或任何其他编程语言编写）来处理提交的表单数据并发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:15:41.383

若昂，

最好的方法是使用 MySQL。例如，您可以使用 XML 或 txt 文件来保存此信息，但正确的方法是使用 MySQL。不过，您的信息会更有条理。

# r - WampServer、客户端头文件和库文件

> ID：13492984
> 
> 赞同：2
> 
> 时间：2012-11-21T12:12:51.110
> 
> 标签：r, installation, wamp, wampserver

[WampServer](http://www.wampserver.com "WampServer")安装在我的计算机上。

我希望安装**RMySQL**包。

后者的[在线文档](http://biostat.mc.vanderbilt.edu/wiki/Main/RMySQL%20%22RMySQL%20documentation)提到：

> 1.  [从http://www.mysql.com](http://www.mysql.com)或[http://dev.mysql.com](http://dev.mysql.com)安装 MySQL 客户端库。如果您已经安装了 MySQL 服务器，您可能需要重新运行安装以确保您还安装了**客户端头文件和库文件**。请注意，Xampp 不包括这些。

我很困惑，我不知道这些必需的“标题”和“库”文件是什么。而且，我怎么知道它们是否由 WampServer 提供？如果不是这种情况，我可以简单地将它们添加到 WampServer 文件夹的某个位置（而不是卸载 WampServer 并分别安装 Apache 及其朋友）吗？

谢谢，爱德华

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:16:08.790

好的，所以我刚刚经历了在 Windows 上安装 RMySQL 的生活地狱。但最后成功了。

不支持 Windows 上的二进制文件，所以说这是“简单”的其他答案是错误的。还有很多指南等已经过时，或者链接断开。

MYSQL 的最佳整体答案通常是看： [Using MySQL in R for Windows](https://stackoverflow.com/questions/5223113/using-mysql-in-r-for-windows) 基本上你必须安装 RTools 才能从源代码编译包。

但是，特别是对于 WAMPServer，它不会安装 .lib 和客户端文件。所以我所做的是去 MYSQL 找到与 Wampserver 安装的完全相同的 MYSQL 版本。我下载了 zip 文件版本。我将 lib 目录与视觉差异工具（Beyond Compare）进行了比较，并将丢失的文件复制到我的 WAMPServer MYSQL 安装中。根据上面的指南，然后我将 libmysql.lib 从 mysql/lib 复制到 mysql/lib/opt 以满足依赖关系。libmysql.dll 到 C:\Program Files\R\R-2.12.1\bin

最后 install.packages('RMySQL',type='source') 工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T02:47:04.730

对于在 Windows 中使用 WampServer 并想要安装 RMySQL 的人，我已经调整了[此处](https://stackoverflow.com/a/5230980/2338922)列出的说明。我假设您已经安装了 WampServer。我还将使用我在计算机上使用的文件路径，但请记住，您的文件路径可能会略有不同（由于版本、安装等不同）

1.  [从这里](http://www.murdoch-sutherland.com/Rtools/)安装最新的 RTools 。
2.  在**C:\Program Files\R\R-2.15.1\etc\**中创建一个名为**Renviron.site**的新文件，在文本编辑器中打开该文件，然后添加一行**MYSQL_HOME="C:/wamp/bin/mysql /mysql5.6.12"**（你的 mysql 文件的路径）。确保使用正斜杠并且不要忘记引号。
*****   单击您的 WampServer 图标并转到 MySQL，然后转到版本。这将告诉您 WampServer 发行版中包含的 MySQL 版本。*   转到[http://dev.mysql.com/downloads/mysql](http://dev.mysql.com/downloads/mysql)并下载并安装 WampServer 发行版中包含的相同版本的 MySQL。*   完成完整安装后，转到安装 MySQL 的文件夹并复制名为**libmysql.lib**的文件，该文件可以在**lib\**文件夹中找到。*   现在转到WampServer 目录中的**lib\文件夹（我的是****C:\wamp\bin\mysql\mysql5.6.12\lib**）并创建一个名为**opt\**的新文件夹。*   将刚刚复制的**libmysql.lib**文件粘贴到这个新的**opt**文件夹中。***   您现在可以卸载刚刚下载的 MySQL 服务器，因为我们只需要其中的一个文件（显然不包含在 WampServer 发行版中）。*   在**C:\wamp\bin\mysql\mysql5.6.12\lib\**下，您还会找到**libmysql.dll**。将其复制到**C:\Program Files\R\R-2.15.1\bin\i386\**（如果你像我一样有 36 位 Windows，这可以工作。我想如果你有 64 位，你可以把它放在**bin\**子目录而不是**bin\i386\**下，但请不要让我这样做。）我还将相同的文件（**libmysql.dll**）复制到**C:\windows\system32\**目录，但我不确定这是否是必要的。*   在 R 中，运行**install.packages('RMySQL',type='source')**并希望安装完成没有任何问题。然后，您可以像往常一样使用**library(RMySQL)**加载包。******

 ****注意：我正在运行 32 位 Windows、R-2.15.1 和包含 MySQL 5.6.12 的 WampServer 发行版。****

# jquery - JQuery 菜单的问题

> ID：13492992
> 
> 赞同：0
> 
> 时间：2012-11-21T12:13:20.990
> 
> 标签：jquery, menu, navigation

我有一个菜单。菜单选项卡是图像。我希望单击完成后图像会发生变化。

如果我单击另一个选项卡，则图像应转换为旧选项卡。我的想法是使用 .addClass() 和 .removeClass()。

这是HTML：

```
<div class="navigation">

        <ul>
            <li id="1">
                <div id="menuImage1" class="menuImage"></div>
                <div class="menuText"><p>1</p></div>
            </li>
            <li id="2">
                <div id="menuImage2" class="menuImage"></div>
                <div class="menuText"><p>2</p></div>
            </li>
            <li id="3">
                <div id="menuImage3" class="menuImage"></div>
                <div class="menuText"><p>3</p></div>
            </li>
            <li id="4">
                <div id="menuImage4" class="menuImage"></div>
                <div class="menuText"><p>4</p></div>
            </li>
            <li id="5">
                <div id="menuImage5" class="menuImage"></div>
                <div class="menuText"><p>5</p></div>
            </li>
            <li id="6">
                <div id="menuImage6" class="menuImage"></div>
                <div class="menuText"><p>6</p></div>
            </li>
        </ul>

    </div> 
```

JQuery（第一个菜单选项卡的示例）：

```
$(".navigation li").click(function() {
    $(".menuImage1").addClass('menuImageActive1');
    $(".menuImage1").not(this).removeClass('menuImageActive1');
}); 
```

请你帮帮我，因为我的 JavaScript 不是那么好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:20:20.533

我认为您正在寻找 jquery mouseup（鼠标按钮释放）和 mousedown（鼠标按钮按下）功能。

尝试如下代码：

```
$(".menuImage").mousedown(function() {
    $(this).addClass("class"); // new class on mouse button press
});

$(".menuImage").mouseup(function() {
    $(this).removeClass("class");  //remove class after mouse button release
}); 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:21:24.367

进行如下更改...

```
<img id="menuImage1" src="oldurl" class="menuImage"></img> 
```

js代码

```
$("p").mousedown( function() { $('#menuImage1').attr('src',newurl); } );
$("p").mouseout( function() {$('#menuImage1').attr('src',oldurl);} ); 
```

# valgrind - 启动-停止-守护进程和 Valgrind

> ID：13492994
> 
> 赞同：3
> 
> 时间：2012-11-21T12:13:23.063
> 
> 标签：valgrind, start-stop-daemon

我使用 start-stop-daemon 来启动程序，并希望将它与 Valgrind 一起使用。

这就是我使用 start-stop-daemon 的方式：

```
start-stop-daemon --start --background --exec ${BINPATH}/myPgm -- myPgm 
```

这就是我在独立应用程序（垃圾）上使用 Valgrind 的方式：

```
valgrind --tool=memcheck --leak-check=yes ./junk 
```

那行得通。

我想做类似的事情：

```
start-stop-daemon --start --background --exec valgrind --tool=memcheck --leak-check=yes --log-file=/usr/magnus/logFile ${BINPATH}/myPgm -- myPgm 
```

似乎 start-stop-daemon 接受 valgrind （如果我只有 valgrind 没有它的标志`--tool=memcheck --leak-check=yes --log-file=/usr/magnus/logFile`，它似乎被接受）但 start-stop-daemon 不会接受它。

我得到 start-stop-daemon:`unrecognized option '--tool=memcheck'`用于 valgrind 标志。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T16:32:37.860

那里的“--”用于将 start-stop-daemon 的参数与传递给可执行文件的参数分开。因此，“--”之后的 myPgm 实际上是作为 myPgm 可执行文件的参数提供的。我认为在您的第一个示例中这是无关紧要的。

您需要使用“--”来拆分 valgrind 的 args，如下所示：

```
start-stop-daemon --start --background --exec valgrind -- --tool=memcheck --leak-check=yes --log-file=/usr/magnus/logFile ${BINPATH}/myPgm 
```

# iphone - iphone有什么接口可以处理应用程序Documents文件夹中创建的sqlite数据库吗？

> ID：13492997
> 
> 赞同：0
> 
> 时间：2012-11-21T12:13:34.243
> 
> 标签：iphone, ios4, sqlite

我们是否有任何命令行可以查询 sqlite 数据库，该数据库是通过编码创建的，并存储在应用程序的默认 Documents 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:34:34.553

打开应用程序的文件共享，将数据库文件复制到您的 Mac，然后使用那里的命令行工具 (sqlite3)。

（前编辑请注意：我很欣赏编辑答案以提高准确性、改进格式和修复错别字……但是，如果您想提供完全不同的信息，我建议您提供自己的答案，而不是更改其他用户回复的含义.)