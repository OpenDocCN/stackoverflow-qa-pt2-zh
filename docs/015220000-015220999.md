# StackOverflow 问答 15220000-15220999

# javascript - HTML5、JavaScript 和在画布中绘制多个矩形

> ID：15220003
> 
> 赞同：9
> 
> 时间：2013-03-05T09:20:20.703
> 
> 标签：javascript, html, canvas, html5-canvas

为什么我的多个矩形不能在画布中绘制？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <script src="Scripts/jquery-1.9.1.min.js"></script>
  </head>
  <body>
    <canvas id="myCanvas" width="500" height="500" style="border:1px solid red">
      <p>Your browser doesn't support canvas.</p>
    </canvas>
  </body>
</html>

<script type ="text/javascript">  
  function Shape(x, y, w, h, fill) {
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
    this.fill = fill;
  }

  // get canvas element.
  var elem = document.getElementById('myCanvas');

  // check if context exist
  if (elem.getContext) {

    var myRect = [];

    myRect.push(new Shape(10, 0, 25, 25, "#333"))
    myRect.push(new Shape(0, 40, 39, 25, "#333"))
    myRect.push(new Shape(0, 80, 100, 25, "#333"))

    context = elem.getContext('2d');
    for (i in myRect) {

      //console.log(x);

      context.fillRect(i.x, i.y, i.w, i.h)
    }
    //// x, y, width, height
    //context.fillRect(0, 0, 50, 50);

    //// x, y, width, height      
    //context.fillRect(75, 0, 50, 50);
  }
</script> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T09:52:10.143

好的，所以你几乎就在那里。当您遍历矩形数组时，您是在遍历数组**键**而不是对象本身（请参阅[如何以对象为成员循环遍历纯 JavaScript 对象？](https://stackoverflow.com/questions/921789/how-to-loop-through-javascript-object-literal-with-objects-as-members)）。另外，正如@jimjimmy1995 指出的那样，您需要使用`.fillStyle`as 设置填充。`fillRect`没有填充参数。

此代码将起作用：

```
function Shape(x, y, w, h, fill) {
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
    this.fill = fill;
}

// get canvas element.
var elem = document.getElementById('myCanvas');

// check if context exist
if (elem.getContext) {

    var myRect = [];

    myRect.push(new Shape(10, 0, 25, 25, "#333"));
    myRect.push(new Shape(0, 40, 39, 25, "#333"));
    myRect.push(new Shape(0, 80, 100, 25, "#333"));

    context = elem.getContext('2d');
    for (var i in myRect) {
        oRec = myRect[i];
        context.fillStyle = oRec.fill;
        context.fillRect(oRec.x, oRec.y, oRec.w, oRec.h);

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:35:55.670

你不需要给它填充颜色吗？

```
context.fillStyle = i.fill;
context.fillRect(i.x,i.y,i.w,i.h); 
```

# jquery - 当处理程序已经存在并绑定时，.live() 上的 JQuery stopPropagation

> ID：15220007
> 
> 赞同：0
> 
> 时间：2013-03-05T09:20:29.770
> 
> 标签：jquery, event-bubbling, stoppropagation

我知道现场电话会通过文档冒泡，这就是我遇到问题的原因。

不幸的是，我正在使用绑定元素的第三方库，并希望创建一个点击事件不会冒泡到这些元素的案例。

将 .click() 与 eventStopPropogation 结合使用效果很好，但是由于内容的动态特性，我需要使用 live、on、delegate 等...这是我的问题的一个小问题。单击“内部” div 时，我需要防止触发“外部”单击。我**无法**更改“外部”处理程序。

在此先感谢您的帮助！！

[http://jsfiddle.net/99zQM/2/](http://jsfiddle.net/99zQM/2/)

HTML：

```
<div id="outer">
    outer
    <div id="inner">
        inner
    </div>
</div> 
```

Javascript：

```
$("#outer").bind('click',function(e){
   alert("outer clicked"); 
});

$("#inner").live('click',function(e){
   alert("inner clicked"); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:26:26.707

使用`on`绑定到`outer`并调用单击处理程序`e.stopPropagation()`的委托。这应该可以解决问题。`inner`

试试这个 **更新**

```
$("#outer").bind('click',function(e){
  alert("outer clicked"); 
});

$('#outer').on('click',"#inner",function(e){
  e.stopPropagation();
  alert("inner clicked"); 

}); 
```

[在这里更新小提琴](http://jsfiddle.net/bipen/99zQM/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:29:49.617

正如您已经说过的，事件委托取决于事件冒泡和静态元素的使用。这个问题很复杂，因为`<div id="inner">`和`<div id="outer">`元素之间没有任何东西，但我们可以解决这个问题。

`click`为绑定到的`#inner`元素上的事件设置动态事件处理程序`#outer`，并调用`event.stopImmediatePropagation()`以防止执行其他事件处理程序。缺点是这取决于绑定事件处理程序的顺序，因此您的委托事件处理程序`#inner`必须在静态事件处理程序之前绑定`#outer`。

```
$('#outer').on('click', '#inner', function(e) {
    console.log('inner');
    e.stopImmediatePropagation();
}).click(function(e) {
    console.log('outer');  
}); 
```

看看[这个 jsFiddle 演示](http://jsfiddle.net/2vBz6/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:44:52.737

你可以使用

```
$("#outer").bind('click',function(e){
   alert("outer clicked"); 
});
$('#outer').on('click',"#inner",function(e){
    e.stopImmediatePropagation();
    alert("inner clicked"); 

}); 
```

# winforms - 如何在窗口窗体应用程序中传递消息时获得警报？

> ID：15220008
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:20:30.803
> 
> 标签：winforms

```
private void buttonSend_Click(object sender, EventArgs e)
{
    InsertChatDetails();
    //textBoxChat.Text += System.DateTime.Now.ToLongTimeString() + "" + System.Environment.GetEnvironmentVariable("Computername") + Environment.NewLine;
    textBoxChat.Text += textBoxMessage.Text + Environment.NewLine;
    textBoxMessage.Text = "";
}

public void InsertChatDetails()                                                     //Inserting Values
{
    try
    {
        CommonCS CommonSample1 = new CommonCS();
        BusinessCS BFSample1 = new BusinessCS();

        CommonSample1.Id = "1";
        CommonSample1.FromUser = textBoxChat.Text += System.DateTime.Now.ToLongTimeString() + "-->" + Program.UserName + Environment.NewLine;
        //CommonSample1.FromUser = textBoxChat.Text += System.DateTime.Now.ToLongTimeString() + "" + System.Environment.GetEnvironmentVariable("Computername") + Environment.NewLine;
        CommonSample1.ToUser = "";
        CommonSample1.MessageText = textBoxMessage.Text;
        CommonSample1.SentOn = DateTime.Now;
        CommonSample1.StatusReport = 0;
        BFSample1.InsertChatDetails(CommonSample1);
    }
    catch (Exception)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:32:13.983

从您的代码中不确定您要尝试做什么，但如果它是同步的，您可以在之后跟踪它`SendMessageToWinMachine()`，否则您可以使用`CallBack`Method 进行异步调用。

# c# - 如何获取本地 WinNT 组的所有成员？

> ID：15220009
> 
> 赞同：3
> 
> 时间：2013-03-05T09:20:35.720
> 
> 标签：c#, .net, directoryservices, directoryentry

当我检索本地 WinNT 组的成员时，不知何故并非*所有*成员都返回。我确实补充说：

*   活动目录用户
*   活动目录组

两者都成功（见图），但之后*只有*用户出现。

![在此处输入图像描述](../Images/7a7777e5cb3922e6f2fb694b5097e95b.png)

问题是：

*   添加的组会怎样？
*   请参阅代码示例“GetMembers()”中的最后一个方法
*   这是一个已知的问题？
*   有什么可用的解决方法吗？

非常感谢！！

```
string _domainName = @"MYDOMAIN";
string _basePath = @"WinNT://MYDOMAIN/myserver";
string _userName = @"MYDOMAIN\SvcAccount";
string _password = @"********";

void Main()
{
   CreateGroup("lg_TestGroup");
   AddMember("lg_TestGroup", @"m.y.username");
   AddMember("lg_TestGroup", @"Test_DomainGroup");

   GetMembers("lg_TestGroup");
}

// Method added for reference.
void CreateGroup(string accountName)
{
   using (DirectoryEntry rootEntry = new DirectoryEntry(_basePath, _userName, _password))
   {
      DirectoryEntry newEntry = rootEntry.Children.Add(accountName, "group");
        newEntry.CommitChanges();
   }
}

// Add Active Directory member to the local group.
void AddMember(string groupAccountName, string userName)
{
    string path = string.Format(@"{0}/{1}", _basePath, groupAccountName);
    using (DirectoryEntry entry = new DirectoryEntry(path, _userName, _password))
    {
        userName = string.Format("WinNT://{0}/{1}", _domainName, userName);
      entry.Invoke("Add", new object[] { userName });
        entry.CommitChanges();
    }
}

// Get all members of the local group.
void GetMembers(string groupAccountName)
{
    string path = string.Format(@"{0}/{1}", _basePath, groupAccountName);
   using (DirectoryEntry entry = new DirectoryEntry(path, _userName, _password))
   {
      foreach (object member in (IEnumerable) entry.Invoke("Members"))
      {
         using (DirectoryEntry memberEntry = new DirectoryEntry(member))
         {
            string accountName = memberEntry.Path.Replace(string.Format("WinNT://{0}/", _domainName), string.Format(@"{0}\", _domainName));
            Console.WriteLine("- " + accountName); // No groups displayed...
         }
      }
   }
} 
```

**更新#1** 组成员的顺序似乎是必不可少的。一旦*GetMembers()*中的枚举器偶然发现Active Directory 组，其余项目也不会显示。因此，如果在此示例中首先列出了“Test_DomainGroup”，则*GetMembers()*根本不会显示任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-15T19:23:31.900

我知道这是一个老问题，你可能已经找到了你需要的答案，但以防万一其他人偶然发现这个......

您在 DirectoryEntry 中使用的 WinNT ADSI 提供程序 [即。WinNT://MYDOMAIN/myserver] 在处理未停留在旧 Windows 2000/NT 功能级别 ( [https://support.microsoft.com/en-us/kb/322692](https://support.microsoft.com/en-us/kb/322692) ) 的 Windows 域方面的功能非常有限。

在这种情况下，问题在于 WinNT 提供程序不知道如何处理全局或通用安全组（Windows NT 中不存在这些安全组，只要您将域级别提高到 Windows 2000 混合模式以上就会激活）。因此，如果这些类型的任何组嵌套在本地组下，您通常会遇到您所描述的问题。

我发现的唯一解决方案/解决方法是确定您要枚举的组是否来自域，如果是，则切换到 LDAP 提供程序，该提供程序将在调用“成员”时正确显示所有成员。

不幸的是，我不知道使用您已经绑定到 WinNT 提供程序的 DirectoryEntry 从使用 WinNT 提供程序切换到使用 LDAP 提供程序的“简单”方法。因此，在我从事的项目中，我通常更喜欢获取当前 WinNT 对象的 SID，然后使用 LDAP 搜索具有相同 SID 的域对象。

对于 Windows 2003+ 域，您可以将 SID 字节数组转换为通常的 SDDL 格式（S-1-5-21...），然后使用以下内容绑定到具有匹配 SID 的对象：

```
Byte[] SIDBytes = (Byte[])memberEntry.Properties["objectSID"].Value;
System.Security.Principal.SecurityIdentifier SID = new System.Security.Principal.SecurityIdentifier(SIDBytes, 0);

memberEntry.Dispose();
memberEntry = new DirectoryEntry("LDAP://" + _domainName + "/<SID=" + SID.ToString() + ">"); 
```

对于 Windows 2000 域，您不能通过 SID 直接绑定到对象。因此，您必须将 SID 字节数组转换为带有“\”前缀 (\01\06\05\16\EF\A2..) 的十六进制值数组，然后使用 DirectorySearcher 查找具有匹配的 SID。执行此操作的方法如下所示：

```
public DirectoryEntry FindMatchingSID(Byte[] SIDBytes, String Win2KDNSDomainName)
{
    using (DirectorySearcher Searcher = new DirectorySearcher("LDAP://" + Win2KDNSDomainName))
    {
        System.Text.StringBuilder SIDByteString = new System.Text.StringBuilder(SIDBytes.Length * 3);

        for (Int32 sidByteIndex = 0; sidByteIndex < SIDBytes.Length; sidByteIndex++)
            SIDByteString.AppendFormat("\\{0:x2}", SIDBytes[sidByteIndex]);

        Searcher.Filter = "(objectSid=" + SIDByteString.ToString() + ")";
        SearchResult result = Searcher.FindOne();

        if (result == null)
            throw new Exception("Unable to find an object using \"" + Searcher.Filter + "\".");
        else
            return result.GetDirectoryEntry();
    }
} 
```

# c# - 使用引导弹出框在 ASP.NET 网格视图中显示动态内容

> ID：15220016
> 
> 赞同：0
> 
> 时间：2013-03-05T09:20:47.487
> 
> 标签：c#, asp.net, twitter-bootstrap, popover

使用 asp.net / c# 我有一个可以正常工作的 gridview。我想在我的 ID 字段旁边有一个“i”图标，显示有关该项目的其他信息（由于宽度限制，我无法放入 gridview 的列）。

我正在为我的“外观和感觉”使用引导程序，并且弹出框可以很好地处理静态内容。

如何将动态内容放入控件的数据内容字段中？

到目前为止，我有这个：

```
 <asp:TemplateField HeaderText="ItemID" SortExpression="ItemID">
                <ItemTemplate>
                    <asp:Label runat="server" Text='<%# Eval("ItemID")%> '/>

                    <a href="#" rel="popover"
                        data-original-title='<%# Eval("ItemID")%>'
                        data-content='<a href="????">Item Details</a>'>

                        <i class='icon-info-sign'></i>

                    </a>
                </ItemTemplate>
            </asp:TemplateField> 
```

我假设这永远不会起作用，我必须在代码隐藏中使用 findcontrol 来做到这一点？

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:00:36.263

你为什么要在链接中添加链接？我刚才遇到了同样的问题，我所做和工作的是：

```
<asp:TemplateField HeaderText='Descrição'>
    <ItemTemplate>
        <a href="#" rel="popover" class="popoverDescricao"
            data-original-title='Descrição Completa'
            data-content='<%# Eval("YourDataContent")%>'>
            <i class='icon-info-sign'></i>
        </a>
    </ItemTemplate>
 </asp:TemplateField> 
```

# couchdb - 使用 ektorp 查询临时（临时）视图

> ID：15220020
> 
> 赞同：1
> 
> 时间：2013-03-05T09:20:54.360
> 
> 标签：couchdb, ektorp

如何使用 ektorp 的临时视图获取数据。我想将 map javascript 函数作为字符串传递给 couchdb 并获取结果。（这对于 CouchDB4J 来说绝对是可能的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:43:35.157

Fortunately CouchDB have well-documented API and you can do this using HttpURLConnection. That's not the easiest way, but that will work in any case

# c# - ListBox.Items 和 ListBox.SelectedItems 是否链接？

> ID：15220025
> 
> 赞同：3
> 
> 时间：2013-03-05T09:21:01.993
> 
> 标签：c#, winforms, enumeration

我正在开发一个 WinForms 项目，`TextBox`用户可以在其中输入搜索查询，并且`ListBox`所有项目都可见并突出显示匹配的项目。

当我迭代`ListBox.Items`和修改`ListBox.SelectedItems`时，我得到一个`InvalidOperationException: List that this enumerator is bound to has been modified. An enumerator can only be used if the list does not change.`

这是代码

```
private void SearchTextBox_TextChanged(object sender, EventArgs e)
{
    listBox.ClearSelected();

    foreach (var item in listBox.Items) // Exception happens here...
    {
        if (item.ToString().Contains(SearchTextBox.Text))
            listBox.SelectedItems.Add(item); // ... but I'm not modifying listBox.Items
    }
} 
```

我已经想到了一个更好的解决方案，但我仍然想知道为什么会发生异常。

**和 之间是否存在某种联系`ListBox.Items`，`ListBox.SelectedItems`或者为什么修改一个会使枚举另一个变得不可能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:29:21.997

每[MSDN ListBox.Items](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)， ~~您想通过以下代码添加项目：~~

> listbox.Items.Add();

编辑：（我打算在重读后添加以下内容？但我的笔记本电脑因电池电量不足而关闭）

```
 listBox1.SetSelected(<index>, true);
   listBox1.SetSelected(<index>, true);
   listBox1.SetSelected(<index>, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:37:57.997

项目不仅是 ListBox 中的对象，而且是它的状态，如选定状态。因此，无论您更改状态的方式如何，您都需要使用没有 Enumerator 的循环来更改项目的状态。如果您使用 SelectedItems、SelectedIndices、SetSelected 或其他什么，则没有区别。

# asp.net - UpdatePanel 外的中继器中的 AsyncPostBackTrigger

> ID：15220026
> 
> 赞同：4
> 
> 时间：2013-03-05T09:21:10.507
> 
> 标签：asp.net, updatepanel, repeater, webforms, asynchronous-postback

我正在尝试`cbxSupplement`触发 updatepanel 刷新，但不确定我是否使用错误`EventName`，或者无法使用`CheckBox`. 如果我用 替换`CheckBox`，`Button`它工作正常。

```
<asp:Repeater ID="repSupplements" runat="server">
    <ItemTemplate>
        <asp:CheckBox runat="server" ID="cbxSupplement" />
    </ItemTemplate>
</asp:Repeater>
<asp:UpdatePanel runat="server" ID="up1">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="repSupplements" EventName="CheckedChanged" />
    </Triggers>
    <ContentTemplate>
        //Get checked items
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T21:06:12.617

由于`CheckBox`中继器内的控件在设计时不可用，您应该使用[ScriptManager.RegisterAsyncPostBackControl](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerasyncpostbackcontrol.aspx)方法注册它们。此方法需要`ScriptManager`在页面或母版页上。

为事件创建一个处理程序`Repeater.OnItemCreated`并在那里注册新创建`CheckBox`的 . 代码如下（注意`CheckBox`应该将`AutoPostBack`属性设置为true）：

```
<asp:Repeater ID="repSupplements" runat="server" 
    OnItemCreated="repSupplements_ItemCreated">
    <ItemTemplate>
        <asp:CheckBox runat="server" ID="cbxSupplement" AutoPostBack="True" />
    </ItemTemplate>
</asp:Repeater>

<asp:UpdatePanel runat="server" ID="up1">
    <Triggers>

    </Triggers>
    <ContentTemplate>
        //Get checked items
    </ContentTemplate>
</asp:UpdatePanel> 
```

代码隐藏：

```
protected void repSupplements_ItemCreated(object sender, RepeaterItemEventArgs e)
{
    var control = e.Item.FindControl("cbxSupplement");
    ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(control);
} 
```

这应该做你想要的。

# html - 导航栏被以下文本覆盖

> ID：15220028
> 
> 赞同：1
> 
> 时间：2013-03-05T09:21:26.233
> 
> 标签：html, css

我有一个带有 img 和导航栏的简单标题。我想让导航栏出现在 img 下方（这就是发生的情况），但是导航栏显示在以下文本后面。我不知道如何获取导航栏下方的文本并停止覆盖它（已经尝试清除）。

我想提一下我是新来的，所以我可以看起来很简单。

精彩的 jsfiddle 链接：http: [//jsfiddle.net/k2qQN/](http://jsfiddle.net/k2qQN/)

然后这是我的html：

```
<

header role="banner">
        <img src="../assets/images/autologo.png" alt="A and B automotive logo" />
        <nav role="navigation">
            <ul>
                <li><a href="#about-us/about-us.html">Services</a></li>
                <li><a href="#getting-in-touch">Getting in Touch</a></li>
                <li><a href="about-the-shop/about-the-shop.html">About Us</a></li>
            </ul>
        </nav>
    </header>
    <div role="main">
        <section id="services" title="Small overview of service">
            <h1>Title for content</h1>
            <p> At <a href="getting-in-touch">Some shop</a> Some random text following infoome random text following infoome random text following infoome random text following infoome random text following infoome random text following infoome random text following infoome random text following infoome random text following infoome random text following info</p>

        </section> 
```

这是CSS：

```
 html, body, #container {
    height: 100%;
    width: 100%;
    border: 1px solid black;
    font-size: 1.1em;
    }

header {
    height: 20%;
    width: 100%;
    }

img {
    height: 100%;
    width: auto;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:28:29.727

标题内的图像使用标题的所有高度。因此，要么使用此 CSS 更改图像的高度：

```
header img {
    height:123px; /* or another value smaller than the header's height of 100% */
} 
```

或者不设置标题的高度：

```
header {
    width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:25:37.563

给`role="main"`上边距的 div。首先给它一个 id 或 class，以便您可以更轻松地引用它，然后执行以下操作：

```
#main-div {
    margin-top: 100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:27:41.193

header 有`height:20%`，这就是它与下面的 div 重叠的原因。使`img`高度为`max-height:100%`和标题为`height:auto`

```
header {
    height:auto;
    width: 100%; 
    }

img {
    max-height: 100%;
    width: auto;
    } 
```

**[演示](http://jsfiddle.net/k2qQN/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:28:41.043

这是因为您的标题具有固定的高度。导航溢出，但内容没有被下推。要么让标题采用它需要的高度，要么`overflow: hidden;`在其上设置以隐藏溢出的内容。

# qt - 如何获取以 Windows XP 为操作系统的笔记本电脑的序列号？

> ID：15220029
> 
> 赞同：1
> 
> 时间：2013-03-05T09:21:27.423
> 
> 标签：qt, windows-xp

我正在使用 QT 开发桌面应用程序。我正在使用以下代码获取笔记本电脑的序列号。它适用于 Windows 7 和 Windows Vista。它在 Windows XP 中不起作用。

代码：

```
QProcess process;
process.start("wmic bios");
process.waitForFinished(-1);
QByteArray out = process.readAllStandardOutput().simplified(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:54:24.453

First time when I did "wmic bios" on a new Windows XP VirtualBox instance it showed me "wait for installation end" and this tool restarted after successful installation (so the initial process was finished). Afterwards output is the same in Win7 and WinXP.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:50:12.637

根据[这个线程](https://stackoverflow.com/questions/988649/how-do-i-get-the-bios-manufacturer-and-model-in-c-without-using-wmi)，从命令“wmic bios”检索到的信息似乎在注册表中可用

```
HKEY_LOCAL_MACHINE/HARDWARE/DESCRIPTION/System 
```

您可以使用[QSettings](http://qt-project.org/doc/qt-4.8/qsettings.html)读取 windows 上的注册表

一个简单的例子就像

```
QSettings settings("HKEY_LOCAL_MACHINE\\HARDWARE\\DESCRIPTION\\System",
                   QSettings::NativeFormat);

QString value = settings.value("Identifier", "0").toString(); 
```

您将必须获取您要查找的实际密钥（使用 regedit.exe 浏览注册表）并相应地更新上述代码片段

# r - 根据 R 中的前一个值和下一个值删除 data.frame 的重复元素

> ID：15220036
> 
> 赞同：1
> 
> 时间：2013-03-05T09:21:35.203
> 
> 标签：r, function, if-statement, dataframe, plyr

首先，你好！这是我在这里的第一篇文章，我不得不承认我有点紧张

我有一个data.frame，其中每个元素都是一式三份并且有自己的价值，这是一个例子

```
test <-data.frame (id = c("a", "a", "a" , "b", "b", "b"),
        val = c(1,100,300,1,2,3)) 
```

我需要计算每个副本集中的值之间的差异，如果第一个 val 与第二个或第二个与第三个之间的差异小于数字，则将其删除。

我尝试创建自己的小函数并将其与 ddply 一起使用，但到目前为止我没有成功

这是我想要做的：

```
f<-function(x) if(x[1,2]-x[2,2] < 60 || x[2,2]- x[3,2] < 60) NULL else (x)
ddply(test, .(id), f) 
```

在这个例子中，我最后想要的是：

```
id    val
a    1
a    100
a    300 
```

"b" 被删除是因为 (1-2 < 60)

相反，我收到各种错误消息或奇怪的 data.frames，看起来很不对劲

我希望我足够清楚。

提前致谢

国会议员

编辑：差异是绝对值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:28:26.287

您在其中使用的函数`ddply`必须返回一个数据框（或者在这种情况下，当您希望从最终结果中删除该部分时）：

```
ddply(
  test,
  .(id),
  function(df_part, min_diff) {
    # Using abs() because I assume you want absolute differences
    diffs <- abs(diff(df_part$val))
    if (any(diffs < min_diff)) {
      return()
    } else {
      return(df_part)
    }
  },
  min_diff=60
) 
```

# c# - asp.net 调试编译 = false 抛出 javascript 错误

> ID：15220042
> 
> 赞同：0
> 
> 时间：2013-03-05T09:21:47.047
> 
> 标签：c#, asp.net, c#-3.0, c#-2.0, asp.net-2.0

修改 web.config [调试编译 = false ] 后出现 Javascript 错误

我使用 webResource 在我的代码中嵌入了 javascript

[程序集：WebResource("ClientModels.js", "text/javascript")]

以前它有调试编译=“真”，它工作正常，但修改后编译调试=“假”目标框架=“4.0”

谢谢

# c++ - 将 CV_IMAGE_ELEM 的结果视为 QString？

> ID：15220044
> 
> 赞同：0
> 
> 时间：2013-03-05T09:21:54.510
> 
> 标签：c++, visual-studio-2010, qt, opencv

我想在参数为 QString 的 LineEdit 中显示 10x10 窗口 CV_IMAGE_ELEM 的结果。

我应该考虑以下几点：

```
for (int y=0;y<10;y++)
{
    for (int x=0;x<10;x++) //width
    {
        QString qstr= CV_IMAGE_ELEM(img_crop_mat, uchar, y, x*3+ 2);
        QString ctot= qstr + ctot;
        lineEdit_mat->setText(ctot + " ");
    }
    lineEdit_mat->setText("\n");
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:18:53.350

尝试循环

```
myQString.append(QString("%1 ").arg((int) IPL_IMAGE_ELEM(...) )); 
```

这是假设您要以数字格式打印图像数据。

# php - 如何以编程方式创建 CakeRequest 的实例？

> ID：15220047
> 
> 赞同：0
> 
> 时间：2013-03-05T09:22:08.450
> 
> 标签：php, cakephp

我在 Lib 目录中有 Api 类。此类将“请求”作为唯一方法。此方法接受 CakeRequest 作为参数之一。这个 Api 方法是通过一个组件从 UI 调用的，它工作正常。

现在，我需要创建一个控制台 shell，并调用同一个 Api 方法 (Api::request)。如何创建 CakeRequest 的实例，以便它可以作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:18:10.457

不确定这是否是您正在寻找的，但您可以简单地使用：

```
$request = new CakeRequest(); 
```

然后您可以将`$request`变量作为参数传递。

这与 Cake 在使用`Dispatcher::dispatch(new CakeRequest(), new CakeResponse())`.

# asp.net - 如何禁用默认处理程序 HttpForbiddenHandler 以查看 .cs 文件？

> ID：15220054
> 
> 赞同：1
> 
> 时间：2013-03-05T09:22:26.870
> 
> 标签：asp.net, iis-7.5, httphandler, httpforbiddenhandler

我希望能够在开发阶段从浏览器查看文件背后的代码。为此，我将在 web.config 中禁用`.cs`文件的默认处理程序。`HttpForbiddenHandler`

由于我使用的是 IIS 7，因此我首先将`<remove>`元素放在这样的`<system.webServer>`部分中：

```
<system.webServer>
    <handlers>
        <remove path="*.cs" verb="*"/>
        <add verb="*" path="*.cspx" type="HandlersAndModules.CspxHandler, HandlersAndModules" name="CspxHandler"/>
    </handlers>
</system.webServer> 
```

运行应用程序时出现错误：

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid. 
```

这是因为 in `<system.webServer>`section 中的元素无法识别属性`verb`和`path`.

然后我尝试将 `<remove>`元素移动到`<system.web>`这样的部分：

```
<system.web>
    <httpHandlers>
        <remove path="*.cs" verb="*"/>
    </httpHandlers>
</system.web> 
```

运行应用程序时出现错误：

```
HTTP Error 500.23 - Internal Server Error
An ASP.NET setting has been detected that does not apply in Integrated managed pipeline mode. 
```

如何禁用`HttpForbiddenHandler`阻止`.cs`从浏览器查看文件的默认处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T18:27:35.973

你需要两件事：

首先，要将`.cs`文件用作内容，您需要添加以下内容：

```
<system.web>
    <httpHandlers>
        <remove path="*.cs" verb="*"/>
        <add verb="GET" path="*.cs" type="System.Web.StaticFileHandler" />
    </httpHandlers>
</system.web> 
```

其次，为避免`HTTP Error 500.23`，将其添加为解决方法：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
</system.webServer> 
```

`500.23`error 表示并非所有的处理程序和模块都在`system.webServer`section 中指定。如果您可以在此处指定它们，请执行此操作而不是解决方法。解决方法只是为您争取时间，直到您能够迁移设置。

# class - 使一个类成为另一个类的实例

> ID：15220061
> 
> 赞同：8
> 
> 时间：2013-03-05T09:22:55.263
> 
> 标签：class, haskell, instance

我有一个`Foo`拥有一个函数的类`gen :: Int -> [Foo]`。例如，我可以制作一个这样的实例`Foo`：

```
data FooTest = FooTest Int

instance Foo FooTest where
  gen n = replicate n (FooTest 0) 
```

现在，让我们假设我有另一个`Bar`定义了 function 的类`bar :: Bar -> IO ()`。的每个实例`Foo`都必须是 的实例`Bar`，**但**每个实例的`Bar`实现都完全相同。这是一个例子：

```
class Foo f where
  gen :: Int -> [f]

class Bar b where
  bar :: b -> IO ()

instance Bar Foo where -- obviously that doesn’t work
  bar _ = putStrLn "bar through any Foo instance"

instance (Foo f) => Bar f where -- this needs the FlexibleInstance GHC extension first, then it still throws shit saying that the constraint is not smaller that I don’t shit
  bar _ = putStrLn "bar through any Foo instance" 
```

这里的问题是我找不到任何方法让一个类成为另一个类的实例，以提及第一个类的任何实例都将共享相同的实现来实例化另一个类。

任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:33:08.663

*您可以使用带有两个*扩展名的最后一个实例完全完成您想要的操作：`FlexibleInstances`和`UndecidableInstances`.

就像名字所暗示的那样，第二个扩展允许您潜在地编写不终止的实例。这可能会导致编译时出现无限循环；但是，该实现被任意限制在某个递归深度，因此您实际上不应该有无限的编译时间。

我不知道有任何方法可以在没有任何扩展的情况下做到这一点。但是，除非您将来可能想使用其他编译器，否则使用扩展本身并不是坏事。

此外，随机样式注释：如果您只有一个约束，则括号是可选的。所以你可以把它写成：

```
instance Foo f => Bar f where ... 
```

这不是很重要，但我认为第二个版本看起来更好。

# maven - emme:emma 得到以下错误（詹金斯）

> ID：15220069
> 
> 赞同：0
> 
> 时间：2013-03-05T09:23:11.623
> 
> 标签：maven, jenkins, emma

我正在 jenkins 机器服务器上运行检测代码覆盖率的作业该作业正在运行命令：emme:emma 并在尝试从 maven repo 下载依赖项时一直失败：您可以看到以下日志：

```
 INFO] ------------------------------------------------------------------------
[WARNING] Failure to transfer org.apache.maven.plugins/maven-metadata.xml from http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of External-Central has elapsed or updates are forced.
          Original error: Could not transfer metadata org.apache.maven.plugins/maven-metadata.xml from/to External-Central (http://repo1.maven.org/maven2):
          Connection to http://repo1.maven.org refused
[WARNING] Failure to transfer org.apache.maven.plugins/maven-metadata.xml from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced.
          Original error: Could not transfer metadata org.apache.maven.plugins/maven-metadata.xml from/to central (http://repo.maven.apache.org/maven2):
          Connection to http://repo.maven.apache.org refused
[WARNING] Failure to transfer org.codehaus.mojo/maven-metadata.xml from http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of External-Central has elapsed or updates are forced.
          Original error: Could not transfer metadata org.codehaus.mojo/maven-metadata.xml from/to External-Central (http://repo1.maven.org/maven2):
          Connection to http://repo1.maven.org refused
[WARNING] Failure to transfer org.codehaus.mojo/maven-metadata.xml from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. 
          Original error: Could not transfer metadata org.codehaus.mojo/maven-metadata.xml from/to central (http://repo.maven.apache.org/maven2):
          Connection to http://repo.maven.apache.org refused
[WARNING] Failure to transfer org.codehaus.mojo:emma-maven-plugin/maven-metadata.xml from http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of External-Central has elapsed or updates are forced.
          Original error: Could not transfer metadata org.codehaus.mojo:emma-maven-plugin/maven-metadata.xml from/to External-Central (http://repo1.maven.org/maven2): 
          Connection to http://repo1.maven.org refused
[WARNING] Failure to transfer org.codehaus.mojo:emma-maven-plugin/maven-metadata.xml from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced.
          Original error: Could not transfer metadata org.codehaus.mojo:emma-maven-plugin/maven-metadata.xml from/to central (http://repo.maven.apache.org/maven2): 
          Connection to http://repo.maven.apache.org refused 
```

提前感谢尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:59:40.490

在此处发布评论作为关闭循环的答案：

请确保您不在拒绝连接到 Maven Central 的防火墙后面

# postgresql - PostgreSQL 和文字游戏

> ID：15220072
> 
> 赞同：9
> 
> 时间：2013-03-05T09:23:17.970
> 
> 标签：postgresql, permutation, plpgsql, string-matching, postgresql-8.4

在类似于 Ruzzle 或 Letterpress 的文字游戏中，用户必须从给定的一组字母中构造单词：

![在此处输入图像描述](../Images/4aa8fc6f94a0c58e52db7fc23cb4aa26.png)

我将字典保存在一个简单的 SQL 表中：

```
create table good_words (
        word varchar(16) primary key
); 
```

由于游戏持续时间很短，我不想通过调用 PHP 脚本来检查每个输入的单词，该脚本会在`good_words`表格中查找该单词。

相反，我想在回合开始之前通过一个 PHP 脚本调用下载所有可能的单词——因为所有字母都是已知的。

**我的问题是：**是否有一种很好的 SQLish 方法来查找此类单词？

即我可以运行一个更长时间的脚本一次向`good_words`表中添加一个列，该列将具有与列中相同的字母`word`，但按字母顺序排序......但我仍然想不出一种方法来匹配它给定一个集合的字母。

并且在 PHP 脚本内（与在数据库内）进行单词匹配可能会花费太长时间（因为带宽：必须将每一行从数据库获取到 PHP 脚本）。

请问有什么建议或见解吗？

将 postgresql-8.4.13 与 CentOS Linux 6.3 一起使用。

**更新：**

我的其他想法：

1.  创建一个持续运行的脚本（cronjob 或守护程序），它将用预编译的字母板和可能的单词预填充 SQL 表 - 但仍然感觉浪费带宽和 CPU，我更愿意在数据库中解决这个问题
2.  添加整数列`a`, `b`, ... ，`z`并且每当我将 a 存储`word`到时`good_words`，将出现的字母存储在那里。我想知道[是否可以为此在 Pl/PgSQL 中创建插入触发器](http://www.postgresql.org/docs/8.4/static/plpgsql-trigger.html)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:07:26.783

好问题，我投了赞成票。

您要做的是列出给定长度的给定字母的所有可能排列。如[PostgreSQL wiki](https://wiki.postgresql.org/wiki/Permutations)中所述，您可以创建一个函数并像这样调用它（匹配屏幕截图中突出显示的字母）：

```
SELECT * FROM permute('{E,R,O,M}'::text[]); 
```

现在，查询`good_words`使用类似：

```
SELECT gw.word, gw.stamp
  FROM good_words gw
  JOIN permute('{E,R,O,M}'::text[]) s(w) ON gw.word=array_to_string(s.w, ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:58:40.057

这可能是一个开始，除了它不检查我们是否有足够的字母，只检查他是否有正确的字母。

```
SELECT word from
(select word,generate_series(0,length(word)) as s from good_words) as q
WHERE substring(word,s,1) IN ('t','h','e','l','e','t','t','e','r','s')
GROUP BY word
HAVING count(*)>=length(word); 
```

[http://sqlfiddle.com/#!1/2e3a2/3](http://sqlfiddle.com/#!1/2e3a2/3)

编辑：

这个查询只选择有效的词，虽然它看起来有点多余。它并不完美，但肯定证明它是可以做到的。

```
WITH words AS 
(SELECT word, substring(word,s,1) as sub from
(select word,generate_series(1,length(word)) as s from good_words) as q
WHERE substring(word,s,1) IN ('t','e','s','e','r','e','r','o','r','e','m','a','s','d','s','s'))

SELECT w.word FROM
(
SELECT word,words.sub,count(DISTINCT s) as cnt FROM
(SELECT s, substring(array_to_string(l, ''),s,1) as sub FROM
(SELECT l, generate_subscripts(l,1) as s FROM 
 (SELECT ARRAY['t','e','s','e','r','e','r','o','r','e','m','a','s','d','s','s'] as l) 
 as q) 
as q) as let JOIN
words ON let.sub=words.sub
GROUP BY words.word,words.sub) as let
JOIN
(select word,sub,count(*) as cnt from words
 GROUP BY word, sub)
as w ON let.word=w.word AND let.sub=w.sub AND let.cnt>=w.cnt
GROUP BY w.word
HAVING sum(w.cnt)=length(w.word); 
```

摆弄该图像的所有可能的 3+ 字母单词 (485)：[http](http://sqlfiddle.com/#!1/2fc66/1) : //sqlfiddle.com/#!1/2fc66/1 摆弄 699 个单词，其中 485 个是正确的：[http ://sqlfiddle.com/# !1/4f42e/1](http://sqlfiddle.com/#!1/4f42e/1)

编辑2：我们可以像这样使用数组运算符来获取包含我们想要的字母的单词列表：

```
SELECT word as sub from
(select word,generate_series(1,length(word)) as s from good_words) as q
GROUP BY word
HAVING array_agg(substring(word,s,1)) <@ ARRAY['t','e','s','e','r','e','r','o','r','e','m','a','s','d','s','s']; 
```

所以我们可以用它来缩小我们需要检查的单词列表。

```
WITH words AS 
(SELECT word, substring(word,s,1) as sub from
(select word,generate_series(1,length(word)) as s from 
(
  SELECT word from
(select word,generate_series(1,length(word)) as s from good_words) as q
GROUP BY word
HAVING array_agg(substring(word,s,1)) <@ ARRAY['t','e','s','e','r','e','r','o','r','e','m','a','s','d','s','s']
)as q) as q)
SELECT DISTINCT w.word FROM
(
SELECT word,words.sub,count(DISTINCT s) as cnt FROM
(SELECT s, substring(array_to_string(l, ''),s,1) as sub FROM
(SELECT l, generate_subscripts(l,1) as s FROM 
 (SELECT ARRAY['t','e','s','e','r','e','r','o','r','e','m','a','s','d','s','s'] as l) 
 as q) 
as q) as let JOIN
words ON let.sub=words.sub
GROUP BY words.word,words.sub) as let
JOIN
(select word,sub,count(*) as cnt from words
 GROUP BY word, sub)
as w ON let.word=w.word AND let.sub=w.sub AND let.cnt>=w.cnt
GROUP BY w.word
HAVING sum(w.cnt)=length(w.word) ORDER BY w.word; 
```

[http://sqlfiddle.com/#!1/4f42e/44](http://sqlfiddle.com/#!1/4f42e/44)

我们可以使用 GIN 索引来处理数组，因此我们可能可以创建一个表来存储字母数组并让单词指向它（act、cat 和 tact 都指向数组 [a,c,t]）所以可能这会加快速度，但这有待测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:46:29.013

创建一个包含条目（id、char）的表，n 是您要查询的字符数。

```
select id, count(char) AS count from chartable where (char = x or char = y or char = z ...) and count = n group by id; 
```

或（用于部分匹配）

```
select id, count(char) AS count from chartable where (char = x or char = y or char = z ...) group by id order by count; 
```

该查询的结果具有符合规范的所有单词 ID。将结果缓存在 HashSet 中，并在输入单词时简单地进行查找。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T17:52:52.200

在 8.4 中不起作用。可能只有 9.1+。[SQL 小提琴](http://www.sqlfiddle.com/#!12/8b1be/1)

```
select word
from (
    select unnest(string_to_array(word, null)) c, word from good_words
    intersect all
    select unnest(string_to_array('TESTREROREMASDSS', null)) c, word from good_words
) s
group by word
having
    array_agg(c order by c) = 
    (select array_agg(c order by c) from unnest(string_to_array(word, null)) a(c)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T19:39:36.787

您可以使用格式为“%a%c%t%”的排序字母添加列。然后使用查询：

```
 select * from table where 'abcttx' like sorted_letters 
```

查找可以从字母“abcttx”构建的单词。我不知道性能，但简单性可能无法被击败:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T21:05:45.123

这是一个查询，可通过遍历相邻字段找到答案。

```
with recursive
input as (select '{{"t","e","s","e"},{"r","e","r","o"},{"r","e","m","a"},{"s","d","s","s"}}'::text[] as inp),
dxdy as(select * from (values(-1,-1),(-1,0),(-1,1),(0,1),(0,-1),(1,-1),(1,0),(1,1)) as v(dx, dy)),
start_position as(select * from generate_series(1,4) x, generate_series(1,4) y),
work as(select x,y,inp[y][x] as word from start_position, input
union
select w.x + dx, w.y + dy, w.word || inp[w.y+dy][w.x+dx]   
   from dxdy cross join input cross join work w 
   inner join good_words gw on gw.word like w.word || '%'
)
select distinct word from work
where exists(select * from good_words gw where gw.word = work.word) 
```

（其他答案没有考虑到这一点）。

Sql fiddle 链接：[http](http://sqlfiddle.com/#!1/013cc/14) ://sqlfiddle.com/#!1/013cc/ 14（注意您需要一个带有 varchar_pattern_ops 的索引才能使查询相当快）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T15:21:36.483

我自己的解决方案是创建[一个插入触发器](http://www.postgresql.org/docs/8.4/static/plpgsql-trigger.html)，它将字母频率写入数组列：

```
create table good_words (
        word varchar(16) primary key,
        letters integer[26]
);

create or replace function count_letters() returns trigger as $body$
    declare
        alphabet varchar[];
        i integer;
    begin

        alphabet := regexp_split_to_array('abcdefghijklmnopqrstuvwxyz', '');
        new.word := lower(new.word);

        for i in 1 .. array_length(alphabet, 1)
        loop
                -- raise notice '%: %', i, alphabet[i];
                new.letters[i] := length(new.word) - length(replace(new.word, alphabet[i], ''));
        end loop;
        return new;
    end;
$body$ language plpgsql;

create trigger count_letters
    before insert on good_words
    for each row execute procedure count_letters(); 
```

然后我为随机板字符串生成类似的数组，并使用[数组包含](http://www.postgresql.org/docs/8.4/static/functions-array.html)运算符`tesereroremasdss` 比较两个数组`@>`

任何新的想法或改进总是受欢迎的！

# c# - 在 1 个 url 下托管 2 个单独的 MVC 网站

> ID：15220078
> 
> 赞同：4
> 
> 时间：2013-03-05T09:23:30.950
> 
> 标签：c#, asp.net-mvc, url, iis-7

我已经在[https://mysite.co.uk](https://mysite.co.uk)托管了 1 个安全的 MVC 网站。本网站具有正常的区域、控制器和操作：

[https://mysite.co.uk/kitchen/create](https://mysite.co.uk/kitchen/create)

[https://mysite.co.uk/bathroom/edit](https://mysite.co.uk/bathroom/edit)

ETC

最初，我被告知我的第二个 MVC 网站将能够托管在一个新的 url 下：[https](https://mysite-newsite.co.uk) ://mysite-newsite.co.uk ，所以我有一个新的解决方案。
但是现在不幸的是部署团队已经表示需要在初始主 url 下进行部署：

[https://mysite.co.uk/newsite](https://mysite.co.uk/newsite)

我们正在使用 iis7，我尝试使用 Add Application 来实现这一点，但我只是遇到了很多路由问题、nhibernate dll 冲突等。

请问这实际上可以在iis7中以某种方式解决吗？或者是否需要以某种方式重写第二个 MVC 解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:06:19.383

我认为您最好的选择是在第一个应用程序的已部署目录中创建一个子目录并将第二个应用程序放在那里。

然后，您可以将子目录设置为 IIS 中自己的应用程序，它们将独立运行。

所以，你会有这样的网址：

```
https://mysite.co.uk/kitchen/create <-- first site

https://mysite.co.uk/[subdirectory]/controller/action <-- second site 
```

第二个应用程序中的路由 url 应该可以工作，但您需要检查这一点。

否则，您将不得不将两个应用程序合并到一个解决方案中。

# c++ - 在 C++ 中编写函数指针的 setter 和 getter

> ID：15220080
> 
> 赞同：4
> 
> 时间：2013-03-05T09:23:34.210
> 
> 标签：c++, function-pointers, setter, getter, getter-setter

我有一个带有函数指针的 pagePtr 类，看起来像这样

```
int (*FunPtr)(char*sz, unsigned int max_bytes, char* arg1, char* arg2, char* arg3,
char* arg4);//Function definition 
```

我像这样在构造函数中初始化它

```
pagePtr::pagePtr() : FunPtr(Null)
{
} 
```

现在我写了类似这样的setter我不知道它是否正确

```
void pagePtr::setFunPtr(int(*ptr2Fun)(char*sz, unsigned int max_bytes,
char* arg1, char* arg2, char* arg3, char* arg4))
{
    FunPtr = ptr2Fun;
} 
```

我不知道如何编写一个吸气剂（如果我做错了设置器）。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T09:24:26.827

```
typedef int (*FunPtr)(char*sz, unsigned int max_bytes, char* arg1, char* arg2, char* arg3,char* arg4);//Function definition   // magic word!

void pagePtr::setFunPtr(FunPtr func){m_func = func;} //so clean!!!
FunPtr getFunPtr(){return m_func;} 
```

总是`typedef`在这种情况下使用，让每个人的生活更轻松..

定义一个变量为`FunPtr m_func`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T09:05:32.323

为了完整起见，实际的语法是

```
int (*pagePtr::getFunPtr())(char*, unsigned int, char*, char*, char*, char*)
{
    return FunPtr;
} 
```

# image - 如何在VB6中读取图像文件流的结尾

> ID：15220081
> 
> 赞同：1
> 
> 时间：2013-03-05T09:23:34.673
> 
> 标签：image, file, sockets, vb6

有另一个程序员编写的代码我想改进。该模块的目的是从摄像头获取实时图像流并将其显示在图片窗口中。它是通过 TCP IP 连接进行的。这是如何完成的

```
Private Sub DataArrival(ByVal bytes As Long)

Dim str As String
' check the socket for data 
camera.GetData str
Dim str As String

While InStr(str, Terminator) <> 0

**Do some processing and put only the data in the variable str

 str = Mid(str, index, 1000)
 lImgSize = lImgSize + Len(str)
 strImg = strImg + str

  If lImageSize >= 1614414 Then
            Dim fileno As Integer
            fileno = FreeFile()
            Open ".\Imagefile.txt" For Output As #intFileNo
            Print #fileno , strImg
            Close #fileno 

  End If

End Sub 
```

我有一个输入图像流来并将其转换为字符串，我正在计算大小以检查图像的结尾以将其写入文件。但是硬编码值并不能保证文件总是结束。有时，如果图像大小略小于大小，我的图片框不会更新为实时图像。

编辑：这是 image.txt 文件包含的内容。

```
1
1575020 // file size header
424D36040C0000000000360400002800000000040000000300000100080000000000000000000000
--data--
--data--
020303030203010302010202030002030203020302020302030202030102
3BFB 
```

在VB6中有没有其他有效的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:52:39.860

您需要同意一个完整的协议，该协议指定您将如何通过 TCP 流传递图像数据和图像数据长度。

然后在您的接收器中，您开始将数据读入缓冲区，直到您获得足够的数据来包含您的标头。此时，您可以解析出数据长度，然后继续将数据读取到数据缓冲区中，直到您至少获得该数量的数据。当您最终获得所有数据时，您可以解码并保存图像数据，然后关闭流（如果它是一个关闭）或从头开始并解析文件头。

[您可以在#VB wiki](http://hashvb.earlsoft.co.uk/index.php/Designing_network_protocols#Receiving_data)上找到更多信息。

# html - 隐藏这个div的css代码是什么

> ID：15220082
> 
> 赞同：0
> 
> 时间：2013-03-05T09:23:35.290
> 
> 标签：html, css

隐藏这个div的css代码是什么

```
<div id="x_afc_x" class="section "> 
```

我需要隐藏它，因为它会自动添加到我的页面中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:25:08.100

你可以用

```
#x_afc_x { display: none; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:25:39.903

**只需定义您的** `#x_afc_x` `display:none;`

像这样

```
#x_afc_x{
display:none;
} 
```

## ----------

或者部分选项是这个

```
#x_afc_x.section{
display:none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:26:41.237

试试这个，

```
 <div id="x_afc_x" class="section " style="display:none;"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:26:11.707

```
#x_afc_x

{
  display:none
} 
```

或者

```
#x_afc_x

{
   visibility:hidden;

} 
```

# tcsh - 什么是 tcsh 相当于 bash $'\t'

> ID：15220084
> 
> 赞同：1
> 
> 时间：2013-03-05T09:23:41.507
> 
> 标签：tcsh

我正在尝试`column -t -s $'\t'`在 tcsh 中使用（在 bash 中有效），但我找不到让它工作的方法

```
echo "selected version\tnew version\nbbb\tccc\n" | column -t -s $'\t'
Illegal variable name 
```

那么 tcsh 中的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:42:55.787

tcsh 没有在字符串文字中包含非打印字符的机制，除了直接包含它们。

在 bash 中，您可以这样做（更改`echo`为，`printf`因为它的行为更一致）：

```
$ printf "selected version\tnew version\nbbb\tccc\n" | column -t -s $'\t'
selected version  new version
bbb               ccc 
```

在 tcsh 中，您可以将 替换`$'\t'`为文字制表符，通过键入输入`Ctrl-V``Tab`-- 但是当您阅读代码时，它与一系列空格无法区分。

这是一种解决方案，使用`printf`命令转换`\t`为制表符：

```
% printf "selected version\tnew version\nbbb\tccc\n" | column -t -s "`printf '\t'`"
selected version  new version
bbb               ccc 
```

您还可以将制表符存储在变量中；您可以在使用时使用双引号或`:t`后缀来保留文字值：

```
% set tab = "`printf '\t'`"
% printf "selected version\tnew version\nbbb\tccc\n" | column -t -s "$tab"
selected version  new version
bbb               ccc
% printf "selected version\tnew version\nbbb\tccc\n" | column -t -s $tab:q
selected version  new version
bbb               ccc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:51:20.427

通常，您只需使用“\t”作为选项卡。但是，column 似乎将其从字面上解释为反斜杠和字母 t。要解决此问题，您可以通过按 cntl-v 然后按制表符（用引号括起来）显式输入制表符。

但是请注意，在您的特定示例中，您根本不需要 -s 参数，因为默认情况下，列以空格分隔。

# c# - 在 Windows 8 上使用 .NET 4 运行 ILMerge 工具

> ID：15220093
> 
> 赞同：2
> 
> 时间：2013-03-05T09:24:13.200
> 
> 标签：c#, windows-8, ilmerge

我们将 ILMerge 作为后期构建步骤运行，并且在 Windows 8 机器上构建时遇到问题。

ILMerge.exe 是一个 .NET 2 应用程序，因此应该能够在 .NET 4 运行时中加载/托管。但是，一旦我们尝试在 Windows 8 构建机器上执行 ILMerge，Windows 功能对话框就会出现，说它无法自动安装 .NET 3.5 (inc 2.0)，并且命令失败。

如果我只是运行 ILMerge.exe /? 在命令行上。

我尝试添加一个带有supportedRuntime/requiredRuntime 的app.config 文件，但没有成功。有谁知道我如何在不安装 .net 3.5 的情况下解决这个问题。

谢谢

-- 更新 --- 正确添加了 app.config - ILMerge 开始执行但失败并显示“无法加载 DLL 'mscorsn.dll'：找不到指定的模块。

就在此消息之前，Windows8 再次提示安装 .NET 3.5 (inc 2.0)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:29:26.063

ILMerge 工具是用 .NET 4.0 兼容性重写的，他们称之为**Gilma**。这是链接： http: [//www.codeproject.com/Articles/17797/Gilma-GUI-for-the-ILMerge-Application-Revised-for](http://www.codeproject.com/Articles/17797/Gilma-GUI-for-the-ILMerge-Application-Revised-for)

我不太确定它是否可以在 Windows 8 上运行，但我希望它可以。:)

# jquery - jQuery DataTables：搜索过滤器忽略 0 值

> ID：15220107
> 
> 赞同：1
> 
> 时间：2013-03-05T09:24:40.763
> 
> 标签：jquery, search, filter, datatables

我们基于使用 json 结构作为输入的 jquery datatables 插件实现了一个简单的表。这非常有效，但我们注意到搜索过滤器功能似乎忽略了 0 输入，这意味着每当我输入 0 或双 00 时，表中的匹配文本值都不会被找到/过滤。如果我开始输入 1，所有内容都会被正确过滤，只有 0 值被忽略。任何想法可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T10:56:10.097

I had a similar issue, but the cause was in the server side code.

If your server side code is using the !empty() function to determine if there's a value to search for, then !empty(0) will return FALSE. (That's PHP code)

I modified my code like this:

```
if (isset($field_value) && $field_value != '') {
  //do the filtering
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:30:33.730

也许是对内容的测试，就像

```
var test = $('#myinput').val();
if(!test) return 'no filtre'; 
```

jQuery 代码中的某处。

# css - 容器高度不自动扩展

> ID：15220108
> 
> 赞同：0
> 
> 时间：2013-03-05T09:24:43.183
> 
> 标签：css

`div`当我将 a 添加到 container时，Container 不会扩展`div`。我的意思是当我添加一个`div`到容器时，`div`溢出容器`div`。谢谢你的帮助。

**main.css**：

```
body {
    font-family:Arial, Helvetica, sans-serif;
    font-size:small;
    margin:0px;
    background:repeat-x url(resimler/Bg.jpg) #57513e;
}
.Container {
    width:960px;
    margin:0 auto;
    background:white;
    **height:auto;
    ** overflow:hidden
}
.UstAlan {
    margin:auto;
    background-image:url(resimler/ConteinerUstBg.jpg);
    height:21px;
}
.Slider {
    margin:auto;
    height:280px;
    border:1px solid red;
    float:left;
    width:960px;
}
.TestAlan {
    margin:auto;
    width:960px;
    background:black;
    float:left
}
.BirTest {
    width:940px;
    margin:auto;
    padding:10px;
    border:1px solid blue;
    margin-top:10px;
    background:red;
    float:left;
    height:auto
}
.Sol {
    height:auto;
    width:450px;
    background:#d7e9ba;
    background:blue;
    float:left;
    margin-left:10px;
}
.Sag {
    height:auto;
    width:450px;
    background:yellow;
    float:right;
    margin-right:10px;
}
.Baslik {
    background:url(resimler/KutucukUst.jpg);
    height:24px;
    width:450px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:35:11.350

可能是因为你使用 float:right; 向左飘浮;

也显示你的html..

# java - Java中的分布式计算平台

> ID：15220112
> 
> 赞同：1
> 
> 时间：2013-03-05T09:24:54.760
> 
> 标签：java, sockets, rmi, distributed, grid-computing

我被要求创建一个平台来从 Twitter 流 API 下载推文。基本思想是让控制器生成任务，其中包含有关下载内容（关键字）以及如何序列化数据的信息。此任务被发送到远程服务器（相同或不同的网络）以执行任务并定期将推文保存在数据库中。我需要的是这个：

*   **控制器：**必须与 Fetcher 建立连接才能向它们发送任务。必须验证所有 fetchers 连接。
*   **Fetcher：**应该根据任务关键字从 Twitter 流 API 中检索推文。每个提取器只有一个任务。无需手动注册。只需执行它并运行收到的任务。
*   **DB：**必须定期存储推文的 JSON。由于会有很多 fetcher，我需要一些东西来避免瓶颈。

话虽如此，我正在寻找的是如何实现这一点的好主意。目前我正在使用 SSLSockets 进行验证过程。之后，我关闭套接字并使用 RMI 发布获取器并将注册表存储在服务器（控制器）中。它正在工作......或多或少......但我不确定这样做是否是个好主意。

您对如何实现分布式计算平台有任何想法吗？我应该使用什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:46:12.900

据我所知，RMI 只能让您执行 fetchers 端已经存在的代码。但听起来您想将代码发送到 Fetcher 以执行。

在这种情况下，我会考虑编写自己的`ClassLoader`字节码并将类字节码发送到提取器，然后加载并执行。

作为一个协议，我会推荐 HTTP，有一些相对稳定的实现也支持 TLS 和 SSL，它为你消除了很多与 Socket 相关的痛苦。

# android - 在空闲时间关闭应用程序

> ID：15220113
> 
> 赞同：0
> 
> 时间：2013-03-05T09:24:56.567
> 
> 标签：android

任何人都可以帮助我，我在android中。

我想在 10 分钟的空闲时间后关闭应用程序，我在网上搜索并找到了这个链接：

[应用程序空闲时间](https://stackoverflow.com/questions/4075180/application-idle-time)

但我对这部分代码有一点问题：

```
// soft stopping of thread
public synchronized void stop() {
    stop = true;
} 
```

出现此错误：

此行有多个标记 - 无法覆盖 Thread 的最终方法 - 覆盖 java.lang.Thread.stop

请帮助我理解它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:43:24.257

似乎`stop()`不需要解决问题。我建议这样做：

```
public class Waiter extends Thread {
    private static final String TAG=Waiter.class.getName();
    private long lastUsed;
    private long period;
    private boolean stop;
    private final WeakReference<Context> mContextRef;

    public Waiter(final long period, final Context context) {
        this.period = period;
        stop = false;
        mContextRef = new WeakReference<Context>(context);
    }

    public void run() {
        long idle = 0;
        this.touch();

        do {
            idle = System.currentTimeMillis()-lastUsed;
            Log.d(TAG, "Application is idle for " + idle + " ms");
            try {
                Thread.sleep(5000); //check every 5 seconds

                if(idle > period) {
                    final Context context = mContextRef.get();

                    if (context != null) {
                        // start activity
                        startActivity(context);
                    }

                    stop = true;
                }
            }
            catch (InterruptedException e) {
                Log.d(TAG, "Waiter interrupted!");
                // set stop, because smb has called interrupt() on the thread
                stop = true;
            }
        }
        while(!stop);
        Log.d(TAG, "Finishing Waiter thread");
    }

    private void startActivity(final Context context) {
        final Intent intent = new Intent(context, MyActivity.class);

        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        try {
            context.startActivity(intent);
        } catch (ActivityNotFoundException e) {
            // If there is nothing that can send a text/html MIME type
            e.printStackTrace();
        }
    }

    public synchronized void touch() {
        lastUsed=System.currentTimeMillis();
    }

    public synchronized void setPeriod(long period) {
        this.period=period;
    }

} 
```

[因此，它将是一次性线程（一旦空闲超时，您将需要创建新线程），您只需使用标准 API Thread.interrupt()](http://developer.android.com/reference/java/lang/Thread.html#interrupt%28%29)即可随时停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:35:05.513

```
 public class test extends Activity {

    ImageView _playButton;
    Handler h;
    Runnable r;
    LinearLayout mainLayout;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mainLayout=(LinearLayout)findViewById(R.id.mainLayout);
        h=new Handler();
        r=new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                finish();       
            }
        };

        mainLayout.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                shutIdleApp();
                return false;
            }
        });

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        h.removeCallbacks(r);
    }

    public void shutIdleApp()
    {
         h.removeCallbacks(r);
         h.postDelayed(r,10*1000);
    }
} 
```

这是我对问题的实现，以防人们在使用复杂代码时感到不舒服。

# c# - 使用 https 发布数据不起作用

> ID：15220114
> 
> 赞同：0
> 
> 时间：2013-03-05T09:24:58.547
> 
> 标签：c#, winforms, post, webclient

我正在尝试登录该网站并从标题中获取 Cookie，但它不起作用。所以这是我的代码

如果登录成功，则 fshare_userid 的值必须为 2312158

```
CookieContainer cookie = new CookieContainer();

        // Set Cookie

        string url = "https://www.fshare.vn/login.php";
        string parameters = "login_useremail=nguoivodanhbtallshare@yopmail.com&login_password=123456&url_refe=http://www.fshare.vn/";

        // create a request
        HttpWebRequest request = (HttpWebRequest)
        WebRequest.Create(url); request.KeepAlive = false;
        request.ProtocolVersion = HttpVersion.Version10;
        request.Method = "POST";

        byte[] postBytes = Encoding.ASCII.GetBytes(parameters);

        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = postBytes.Length;
        request.CookieContainer = cookie;
        Stream requestStream = request.GetRequestStream();

        requestStream.Write(postBytes, 0, postBytes.Length);
        requestStream.Close();

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        string responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();

        foreach (Cookie c in cookie.GetCookies(response.ResponseUri))
        {
            richTextBox1.Text += "Name : " + c.Name + "\n";
            richTextBox1.Text += "Value : " + c.Value + "\n\n";
        }

        webBrowser1.DocumentText = responseString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:30:23.947

使用这个[问题](https://stackoverflow.com/questions/2972643/how-to-use-cookies-with-httpwebrequest)

```
 CookieContainer cookieContainer = new CookieContainer();
    HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(...);
    httpWebRequest.CookieContainer = cookieContainer; 
```

然后在后续请求中重用这个 CookieContainer：

```
 HttpWebRequest httpWebRequest2 = (HttpWebRequest)WebRequest.Create(...);
    httpWebRequest2.CookieContainer = cookieContainer; 
```

# c# - 获取给定 XML 元素的所有有效属性

> ID：15220115
> 
> 赞同：4
> 
> 时间：2013-03-05T09:25:00.360
> 
> 标签：c#, .net, xml, .net-2.0

我在`XmlDocument`. `XmlReader`文档由绑定到给定模式（由`XmlReaderSettings`类）的 加载。

如何获取给定文档节点元素的允许属性列表？

XML 看起来像这样并且具有可选属性：

```
<row attribute1="1" attribute2="2" attribute3="something">
<row attribute1="3" attribute3="something">
<row attribute2="1" attribute3="something"> 
```

该列表应包含属性 1、属性 2、属性 3

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:28:30.623

我用过 VS2010 但 2.0 框架。因为您有一个架构，所以您知道属性的名称，我尝试使用您的 XML 示例创建了一个基本标记。

XML

```
<base>
      <row attribute1="1" attribute2="2" attribute3="something"/>
      <row attribute1="3" attribute3="something"/>
      <row attribute2="1" attribute3="something"/>
</base> 
```

代码隐藏

```
 XmlDocument xml = new XmlDocument();
        xml.Load(@"C:\test.xml");

        List<string> attributes = new List<string>();

        List<XmlNode> nodes = new List<XmlNode>();
        XmlNode node = xml.FirstChild;
        foreach (XmlElement n in node.ChildNodes)
        {
            XmlAttributeCollection atributos = n.Attributes;
            foreach (XmlAttribute at in atributos)
            {
                if(at.LocalName.Contains("attribute"))
                {
                    attributes.Add(at.Value);
                }
            }
        } 
```

它给出了一个包含所有属性的列表。

# django - 如何在 django 无休止的分页中删除下划线？

> ID：15220117
> 
> 赞同：0
> 
> 时间：2013-03-05T09:25:01.763
> 
> 标签：django, pagination, django-endless-pagination

我有这样的分页代码：

```
 <p> <span>{% get_pages %} {{ pages|length }} pages</span> </p>
        <button class="next_prev" onclick="">{{ pages.first }}</button>
        <button class="next_prev" onclick="">{{ pages.previous }}</button>
        </span> </p>
        <p> <span> <a href="" onclick="css()" id="bgnone" class="bgnone1">{% for page in pages %}
         {{ page|default_if_none:'<span class="endless_separator">...</span>' }}
            {% endfor %}</a></span> </p>
        <button class="next_prev" onclick="">{% get_pages %} {{ pages.next }}</button>

        <button class="next_prev" onclick="">{% get_pages %} {{ pages.last }}</button> 
```

它有两个缺陷： **一**：下划线显示在页码和我不想要的上一个和下一个按钮中。 **二**：想要显示`'|<' and '>|'`第一页和最后一页的符号，但它显示页码。尝试使用：

```
ENDLESS_PAGINATION_LAST_LABEL in `settings.py` but didn't work. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:18:55.570

您只需编辑模板“endless_pagination/templates/endless/page_link.html”即可完成此操作

查看“page_link.html”的示例，它可能会有所帮助。

```
{% if page.is_first %}
{% if page.label != "&lt;" %}

<a href="{{ page.path }}"
   class="endless_page_link" title="first page"><<</a>
<a href="{{ page.path }}"
   class="endless_page_link">{{ page.label|safe }}</a>|
{% else %}
<a href="{{ page.path }}"
   class="endless_page_link" title="previous page">{{ page.label|safe }}</a>
{% endif %}
{% elif page.is_last %}
{% if page.label != "&gt;" %}
<a href="{{ page.path }}"
   class="endless_page_link">{{ page.label|safe }}</a>
<a href="{{ page.path }}"
   class="endless_page_link" title="last page">>></a>
{% else %}
<a href="{{ page.path }}"
   class="endless_page_link" title="next page">{{ page.label|safe }}</a>
{% endif %}
{% elif page.label == "&gt;" %}
<a href="{{ page.path }}"
   rel="{{ querystring_key }}{% if add_nofollow %} nofollow{% endif %}"
   class="endless_page_link" title="previous page">{{ page.label|safe }}</a>
{% elif page.label == "&lt;" %}
<a href="{{ page.path }}"
   rel="{{ querystring_key }}{% if add_nofollow %} nofollow{% endif %}"
   class="endless_page_link">{{ page.label|safe }}</a>
{% else %}
<a href="{{ page.path }}"
   rel="{{ querystring_key }}{% if add_nofollow %} nofollow{% endif %}"
   class="endless_page_link">{{ page.label|safe }}</a>|
{% endif %} 
```

# iphone - 识别 iPhone 上的移动网络状态

> ID：15220121
> 
> 赞同：1
> 
> 时间：2013-03-05T09:25:08.387
> 
> 标签：iphone, ios, xcode, api, networking

我试图弄清楚是否可以在 iPhone 上获取移动网络状态。即：确定iPhone是否可以拨打电话或发送短信。

我已经浏览了所有可达性文档，我能找到的只是识别互联网连接状态的参考，而不是移动网络状态。

任何线索可能会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:45:02.843

你必须使用 CoreTelephone 框架：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)

您应该使用诸如`subscriberCellularProvider`获取有关蜂窝网络提供商的信息之类的方法。

# iphone - 在 iphone 中调用实例方法以通过在 iOS Xcode 中打印“（lldb）”来设置导致崩溃的值

> ID：15220124
> 
> 赞同：1
> 
> 时间：2013-03-05T09:25:18.573
> 
> 标签：iphone, ios, xcode, lldb

我通过单击类**SFAViewController中的按钮调用**

```
-(IBAction)uploadselector:(id)sender  // Notes and Attachments
{
    SFAUploadController *uploadcontroller = [[SFAUploadController alloc] initWithNibName:@"SFAUploadController" bundle:nil];
    //[SFAUploadController setRecordId:selectedrecordid];
    [self.view addSubview:uploadcontroller.view];
    [uploadcontroller setRecordId:selectedrecordid];
    NSLog(@"Okay uploading.. with record id %@",selectedrecordid);

} 
```

在类**SFAUploadController**中调用实例方法：-

```
-(void)setRecordId:(NSString *)value  // called by SFAViewController.m 
{
    self.receivedrecordid = [[NSString alloc]initWithString:@"Empty"];
    NSLog(@"Record value set");
    //receivedrecordid = value;
}

-(IBAction)selectfile:(id)sender // called when a button clicked in SFAUploadController class
{
    NSLog(@"Record in second class: %@",self.receivedrecordid); // causing program crash saying "(lldb)"
} 
```

请解释一下为什么会这样？我不太熟悉将值引用从一个类传递到 iphone 中的另一个类。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:42:34.040

您可能会在获得价值`selectfile`之前点击？`receivedrecordid`在打印之前检查 nil 可能是个好主意，这样可以避免崩溃，你如何声明你收到的recordid？`strong`如果您使用 ARC ，则可以设置此属性，否则`retain`，您还应该检查是否`selectfile`正确连接了 IBAction for 方法以进行内部事件修饰。从症状看来，您正在使用一个不可用或已释放/未分配的对象。您应该确保所有对象和实例都以正确的方式使用。

在其他类中使用 viewController 作为属性总是一个好主意，这样只要相应的类还活着，它就可以保留。

在您的特定情况下，因为您将值设置为字符串只是没什么大的，那么您可以直接执行此操作而无需使用显式方法

```
uploadController.receivedRecordId=@"stirng you want to assign"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:23:43.067

我认为您不需要创建 setter 方法来为类中的`receivedrecordid`变量设置值`SFAUploadController`。

`@property`您可以创建设置值，而不是创建 setter 方法，`receivedrecordid`如下所示：

`SFAUploadController.h`

```
@property (nonatomic, retain) NSSting *receivedrecordid; 
```

并在`SFAUploadController.m`合成它喜欢

```
@synthesize receivedrecordid; 
```

现在您可以像这样直接使用它：

```
-(IBAction)uploadselector:(id)sender  // Notes and Attachments
{
    SFAUploadController *uploadcontroller = [[SFAUploadController alloc] initWithNibName:@"SFAUploadController" bundle:nil];
    [uploadcontroller setSelectedrecordid:@"recordId"];
    [self.view addSubview:uploadcontroller.view];
} 
```

希望它会帮助你。

# c++ - 从 C++ 中的另一个数组初始化结构内的数组

> ID：15220126
> 
> 赞同：8
> 
> 时间：2013-03-05T09:25:19.587
> 
> 标签：c++, arrays, struct

```
struct sample {
    int x;
    int y;
    int arr[10];
};

int arr2[10] = {0, 1, 2, 4, 3, 2, 2, 1, 5, 5};

int a = 19; 
int b = 22;
struct sample* samp = new sample;
samp->x = a;
samp->y = b;
samp->arr = ?? 
```

在上面的示例中，我需要使用**arr2[10]**的元素初始化结构**arr[10]**内的数组。

 **如何在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:49:41.950

> 如何在 C++ 中做到这一点？

最简单的解决方案是`std::copy`按照其他人所说的那样使用。不要在 C++ 中*使用*，对于 POD 也是如此，但也适用于非 POD，只是做正确的事。如果您的数组中的类型有一天发生了变化，您将不得不重新访问您进行此类复制的所有地方并替换. （而且你*会*错过其中一个地方并且很难找到错误）。在 C++ 中使用没有任何好处，所以从一开始就使用。`memcpy``std::copy``memcpy`*`memcpy``std::copy`*

 *更好的解决方案是**使用 C++ 数据结构**，在这种情况下，使用`std::array`

```
#include <array>
struct sample {
      int x;
      int y;
      std::array<int, 10> arr; //C++ array instead of plain C array
    };

int main()
{
    std::array<int, 10> arr2 = {0, 1, 2, 4, 3, 2, 2, 1, 5, 5};

    int a = 19; 
    int b = 22;

    // 1: no need to say "struct sample*" since C++98
    // 2: prefer to use smart pointers..
    //sample* samp = new sample; 
    std::unique_ptr<sample> samp(new sample());
    samp->x = a;
    samp->y = b;
    samp->arr = arr2; //it's as easy as it should be!

    // 3: ... so ypu can't forget to delete!
    //delete samp;
} 
```

**编辑：** 我在这里使用了 unique_ptr，尽管在这个小例子中你根本不需要使用堆分配。还要引入 Grijesh 的初始化：

```
int main()
{
    std::array<int, 10> arr2 = {0, 1, 2, 4, 3, 2, 2, 1, 5, 5};

    int a = 19; 
    int b = 22;

    sample samp = {a, b, arr2}; //done!
} 
```

无需分配，无需清理，无需按元素分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:27:45.433

你可以使用 memcpy：

```
memcpy(sample->arr,arr2,sizeof(int) * 10) 
```

但我建议两者都使用 std::vector 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:34:25.640

使用 for 循环复制数组，

```
for(int i=0; i<10; i++) {
    samp->arr[i]=arr2[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:39:38.970

通常人们会为此使用[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)( `<algorithm>`) ：

```
std::copy(std::begin(arr2), std::end(arr2), std::begin(samp->arr)); 
```

请注意，[`std::begin()`](http://en.cppreference.com/w/cpp/iterator/begin)和[`std::end()`](http://en.cppreference.com/w/cpp/iterator/end)( `<iterator>`) 需要 C++11 支持。如果您的编译器不支持 C++11，您可以自己轻松地提供此函数或使用指针算法：

```
std::copy(arr2, arr2 + 10, samp->arr); 
```

可悲的是，您应该尝试将其`std::vector`用于动态数组或`std::array`(c++11) 用于固定大小的数组。***

# ios - TabBarController.selectedView 为空

> ID：15220142
> 
> 赞同：0
> 
> 时间：2013-03-05T09:26:18.970
> 
> 标签：ios

我在详细信息部分的 SplitViewController 中有一个 TabBarController。

在 TabBarController 的类中，我想获得对 TabController 中当前呈现的视图的引用。

我试过了`self.selectedViewController`，`self.presentedViewController`这些都是空的。我正在`viewDidLoad`为 TabBarController 测试它们。

这是正确的地方吗？我是否提前给他们打电话（即在设置所选选项卡的视图之前？）

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:10:27.650

首先，在这种情况下不要使用presentedViewController。这是为了获得对您以模态方式呈现的视图控制器的引用 - selectedViewController 是您所需要的。

是的，viewDidLoad 将是获取对所选视图控制器的引用的错误位置，因为它还不存在。

您分两步创建标签栏控制器：

首先，您创建您的实例。这是将调用 alloc、init 和您的视图生命周期方法的时间点。

其次，设置视图控制器数组。

如果您尝试在 viewDidLoad 中获取引用，则在为标签栏控制器分配视图控制器数组之前，您将尝试在第一步中获取引用。

您应该做的是创建一个自定义方法以在您的标签栏控制器中启动，您将从创建标签栏控制器的类中调用该方法。只需确保在将视图控制器数组分配给标签栏控制器后调用该方法即可。然后，您将能够在您的自定义方法中使用 selectedViewController 获得有效的参考。

编辑：对于情节提要，将代码移动到 viewDidAppear - viewDidLoad 在视图可见之前被调用，因此尚未选择视图控制器。在 viewDidAppear 中，使用 selectedViewController（不是 presentViewController），此时它将包含一个有效的引用。

# java - 使用 String.split(regex) 在空格和标点符号处分割一行

> ID：15220143
> 
> 赞同：3
> 
> 时间：2013-03-05T09:26:18.843
> 
> 标签：java, regex, file-io, split

所以我正在编写一个函数 parse() 来逐行读取指定的文件，并且我正在利用 String.split(regex) 函数将该行分解为一个字符串数组。此外，每个单词都将传递给另一个函数中包含的 HashMap，该函数作为参数传递给 parse()。虽然我浏览了 Stack Overflow 以寻求任何帮助，但我仍然不确定为什么我的函数会导致我的程序挂起。

这是函数本身：

```
public void parse(FrequencyCounter counter) throws IOException {

    BufferedReader fileReader = new BufferedReader(new FileReader(file));

    String searchExpression = "[\\p{Space}\\p{Punct}]"; 

    String line;
    String[] wordList;

    line = fileReader.readLine();

    while (!line.isEmpty()) {

        wordList = line.split(searchExpression); 

        System.out.println("First value of wordList: " + wordList[0]);

        for (String each : wordList) {
            if(each.isEmpty()) 
                break;

            if(counter.isAnElement(each)) {
                counter.incrementKey(each);
            } else {
                counter.addKey(each);
            }
        }
    }

    fileReader.close();
} 
```

所以我可以很好地进入 while 循环，但是当在 wordList 的假定构造之后添加 println() 语句时，程序会无限打印出一个空的 wordList 并且程序不会从函数中返回。从我的角度来看，我被引导相信我使用的正则表达式并没有达到我想要的目的。

为了详细说明我需要什么，正则表达式应该隔离仅由字母字符组成的单词。在完美的情况下，连词或连字词可以被整体识别并添加到 wordList 中。但是，我可以接受像“不会”和“二十二”这样的词变成“赢”、“t”、“二十”和“二”。

作为一个测试用例，我正在运行一个纯文本文件，其中包含 Lewis Carroll 的诗歌“Jabberwocky”，尽管它不包含很难拆分的非单词标记。

是什么导致了这个问题，我该如何改进这个函数完成的解析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:30:23.183

和`[]`你一起定义一个集合。一个集合本身不匹配任何东西。你必须在它后面加上一个量词。例如`[\\p{Space}\\p{Punct}]+`将匹配标点符号和空格加长 1 的任意组合。

这是一个很好的[教程](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:30:49.797

`line`您不会在 while 循环内更改字符串，因此`!line.isEmpty()`永远不会遇到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:31:53.267

无限循环的原因在于代码的这一部分：

```
 line = fileReader.readLine();
        while (!line.isEmpty()) { 
```

您需要确保每次循环时都阅读：

```
 line = fileReader.readLine();
        while (!line.isEmpty()) {
             ... your while loop
             line = fileReader.readLine();
        } 
```

# android - 使用 Air App 为移动设备创建共享对象

> ID：15220149
> 
> 赞同：1
> 
> 时间：2013-03-05T09:26:42.650
> 
> 标签：android, actionscript-3, air, shared-objects

我使用外部 AS3 类文件创建了一个应用程序，它可以在 PC 桌面上完美运行（导出为演示文件）。

但是，我现在需要移动同一个应用程序才能在移动平板电脑（Android 设备）上工作。

由于我需要存储信息（用户选择的视频播放列表），我需要能够保存播放列表（因为此播放列表必须在用户下次在移动设备上输入应用程序时播放。）我一直在使用该文件。参考到一个 txt 文档来保存播放列表，但我认为这将不再起作用:-(。

我对此进行了大量研究，但最终找不到这两个问题的答案

```
Will shard objects keep saved on Android Tablet device even if the app is closed 
and then restarted ? 
```

```
If so , how to I create shared Objects specifically for Android tablet ? 
```

我查看了[http://www.adobe.com/devnet/flash/articles/saving_state_air_apps.html](http://www.adobe.com/devnet/flash/articles/saving_state_air_apps.html) 但它适用于 iPhone，并不具体。

我也看过这个：[SharedObject not working on AIR mobile](https://stackoverflow.com/questions/14621498/sharedobject-not-working-on-air-mobile)，但同样没有大量帮助，并且仍然没有回答我关于在重新打开应用程序时存储共享对象的问题。

我不能真正使用 SQL 数据库，因为我必须在 Flex 中重新编码与我已经完成的 AS3 代码不同的所有内容。

我已经针对 Android 设备中的共享对象进行了大量研究和搜索，但没有明确的教程等。也许人们还没有完全了解它这样一个新事物

非常感谢所有的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:45:55.033

您可以毫无问题地使用 SharedObject。

从这里您可以看到空中手机不支持的内容：[链接](http://help.adobe.com/en_US/as3/iphone/WS789ea67d3e73a8b24b55b57a124b32b5b57-7fff.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T10:02:06.753

查看 Adob​​e 帮助页面 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)

这里有一些样本

```
private var mySo:SharedObject;

function test():void
{
     mySo = SharedObject.getLocal("application-name");
     mySo.data.savedValue = input.text;

     var flushStatus:String = null;
     try {
        flushStatus = mySo.flush(10000);
     } catch (error:Error) {
        trace("Error...Could not write SharedObject to disk\n");
     }

     if (flushStatus != null) {
        switch (flushStatus) {
           case SharedObjectFlushStatus.PENDING:
                trace("Requesting permission to save object...\n");
                mySo.addEventListener(NetStatusEvent.NET_STATUS, onFlushStatus);
                break;
           case SharedObjectFlushStatus.FLUSHED:
                trace("Value flushed to disk.\n");
                break;
        }
    }
}

private function onFlushStatus(event:NetStatusEvent):void {
        trace("User closed permission dialog...\n");
        switch (event.info.code) {
            case "SharedObject.Flush.Success":
                trace("User granted permission -- value saved.\n");
                break;
            case "SharedObject.Flush.Failed":
                trace("User denied permission -- value not saved.\n");
                break;
        }

        mySo.removeEventListener(NetStatusEvent.NET_STATUS, onFlushStatus);
    } 
```

# android - Android中的通知计数

> ID：15220150
> 
> 赞同：1
> 
> 时间：2013-03-05T09:26:48.397
> 
> 标签：android, notifications

我在android中开发了通知应用程序。但它没有显示通知的数量。

这是我的代码：

```
 int notificationCount = 0;

    private NotificationManager mgr=null;

    mgr=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    Notification note=new Notification(R.drawable.chatpingicon, message+" says...",System.currentTimeMillis());

    PendingIntent i = PendingIntent.getActivity(this, -1, new Intent(this, HomeActivity.class), PendingIntent.FLAG_UPDATE_CURRENT);

    Intent notifyIntent = new Intent(this, MyActivity.class);

    notifyIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

    notifyIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    note.number = notificationCount++;

    noti.defaults = Notification.DEFAULT_ALL;

    noti.flags|=Notification.FLAG_AUTO_CANCEL;

    mgr.notify(NOTIFY_ME_ID++, noti); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:48:45.273

```
Notification noti = new Notification.Builder(this)
        .setContentTitle("New mail from " + "test@gmail.com")
        .setContentText("Subject").setSmallIcon(R.drawable.ic_launcher)
        .getNotification();// deprecated in 4++

NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

// Hide the notification after its selected
noti.flags |= Notification.FLAG_AUTO_CANCEL;

notificationManager.notify(0, noti);
notificationManager.notify(1, noti); 
```

为我显示两个通知。通知计数应该是什么样的？

# java - 调整许多 JTextField 的高度

> ID：15220151
> 
> 赞同：0
> 
> 时间：2013-03-05T09:26:56.347
> 
> 标签：java, swing, jtextfield

我想知道是否可以创建一个 Java 类，允许设置 Java 框架中所有 JTextField 的高度，而不是手动更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:48:43.273

这取决于布局的结构。

基本上，您需要遍历框架（及其容器）的组件层次结构以查找`JTextField`

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class WalkComponentTree {

    public static void main(String[] args) {
        new WalkComponentTree();
    }

    public WalkComponentTree() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                List<JTextField> fields = getTextFields(frame.getContentPane());
            }

        });
    }

    public List<JTextField> getTextFields(Container container) {
        List<JTextField> fields = new ArrayList<JTextField>(25);
        for (Component comp : container.getComponents()) {
            if (comp instanceof JTextField) {
                fields.add((JTextField)comp);
            } else if (comp instanceof Container) {
                fields.addAll(getTextFields((Container)comp));
            }
        }
        return fields;
    }

    public class TestPane extends JPanel {
        public TestPane() {
            add(new JTextField());
        }
    }
} 
```

我应该注意，像这样修改任何组件的大小可能是一个非常糟糕的主意。除了可能涉及（多个）布局管理器这一事实之外，它会显着改变 UI 的当前外观，并可能导致更多问题而不值得（例如，这将选择可编辑的组合框；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:44:48.057

您可以修改外观来实现这一点：[修改外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html)

# visual-studio-2008 - 生成的 mfc 消息映射无效

> ID：15220152
> 
> 赞同：1
> 
> 时间：2013-03-05T09:26:57.163
> 
> 标签：visual-studio-2008, visual-c++, mfc

我在 MFC 中有一个简单的测试应用程序，但它不起作用。消息处理程序根本不会被调用。窗口接收消息，但不调用在消息映射中注册的处理程序。

它是一个标准的 mfc 单对话框应用程序，具有大量按钮，并在推送它们时对库进行各种调用。但它不调用处理程序。

我已经对其进行了跟踪，并且消息映射似乎已损坏。有标准声明，如：

```
BEGIN_MESSAGE_MAP(CommLib_test_x86Dlg, CDialog)
    ON_WM_SYSCOMMAND()
    ON_WM_PAINT()
    ON_WM_QUERYDRAGICON()
    ON_BN_CLICKED(IDCANCEL, &CommLib_test_x86Dlg::OnBnClickedCancel)
    ON_BN_CLICKED(IDOK, &CommLib_test_x86Dlg::OnBnClickedOk)
    ON_BN_CLICKED(IDC_BUTTON1, &CommLib_test_x86Dlg::OnBnClickedButton1)
    ON_BN_CLICKED(IDC_BUTTON2, &CommLib_test_x86Dlg::OnBnClickedButton2)
    ON_BN_CLICKED(IDC_BUTTON3, &CommLib_test_x86Dlg::OnBnClickedButton3)
    ON_BN_CLICKED(IDC_BUTTON4, &CommLib_test_x86Dlg::OnBnClickedButton4)
    ON_BN_CLICKED(IDC_BUTTON5, &CommLib_test_x86Dlg::OnBnClickedButton5)
    // many more buttons, but I commented the rest out for test
END_MESSAGE_MAP() 
```

而如果我在第一个`ON_WM_`*上下断点（即进入`GetThisMessageMap`静态方法），再看message map的内容，第一个入口是正确的，但其余大部分为0*且*数组大小与实际定义不符. 调试器将值报告为

```
[0] {nMessage=274 nCode=0 nID=0 ...}
[1] {nMessage=0 nCode=0 nID=0 ...}
[2] {nMessage=0 nCode=19 nID=4206192 ...}
[3] {nMessage=55 nCode=0 nID=0 ...}
[4] {nMessage=0 nCode=0 nID=0 ...}
[5] {nMessage=0 nCode=0 nID=0 ...}
[6] {nMessage=0 nCode=0 nID=0 ...}
[7] {nMessage=0 nCode=0 nID=0 ...}
[8] {nMessage=0 nCode=0 nID=0 ...}
[9] {nMessage=0 nCode=0 nID=0 ...}
[10] {nMessage=0 nCode=0 nID=0 ...}
[11] {nMessage=0 nCode=0 nID=0 ...}
[12] {nMessage=0 nCode=0 nID=0 ...}
[13] {nMessage=0 nCode=0 nID=0 ...}
[14] {nMessage=0 nCode=0 nID=0 ...}
[15] {nMessage=0 nCode=0 nID=0 ...} 
```

代码编译良好，没有警告或任何东西。

重要的是要注意，该应用程序是大量项目的一部分，并且这些项目共享编译器选项。我们实际上生成了 Visual Studio 项目，但在我们使用`.vsprops`文件之前。我有一段时间没有使用该项目，可以想象编译器标志同时发生了变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:03:21.330

好的，我找到了。编译器标志确实发生了变化。添加了可怕的`/vmg`标志（我们在其他一些库中使用它，并在重构期间传播到不正确的项目）。此标志与 MFC 不兼容，因为它更改了消息映射项的定义。

长话短说：为了节省一些空间，微软决定根据类是使用单继承、多继承还是虚拟继承来表示指向成员的指针。虽然理论上看起来不错，但实际上在以下情况下会出现问题：

*   声明了指向不完整类型成员的指针（这在 C++ 中是合法的）。

我怀疑它也会在以下情况下引起问题：

*   指向具有更复杂指针的类成员的指针需要转换为指向具有更简单指针的基类成员的指针。

文档没有提到这种情况，但这很明显。顺便说一句，这正是 MFC 所做的。

规范（ISO/IEC 14882-2011）只需要`static_cast`在基类不是虚拟继承的情况下指向基类的成员，但在微软编译器中，即使基类只有线性继承，但子类具有多重继承，它也不起作用和基地是非第一。好吧，每个人都知道编译器已经不符合标准了。

# html - iPad Safari mobile 似乎忽略了对象元素的 z 索引位置

> ID：15220154
> 
> 赞同：0
> 
> 时间：2013-03-05T09:27:01.473
> 
> 标签：html, ios, ipad, safari

我在 Safari 移动版和桌面版中都可以正常工作的页面上有一个对象元素。我有一个工作正常的半透明下拉菜单。问题是，当菜单位于 ipad safari 上的对象元素下时，在桌面 safari 上我可以看到菜单下的对象（根据需要），而在移动版本上，对象元素留在后面（丑陋）没有不管我告诉css什么。有什么解决方法吗？我想在 ipad safari 上的菜单下的对象元素。

HTML（来自下面的评论）

```
<object width="530" height="320">
    <param name="movie" value="youtube.com/v/aXSL0MZAdiM&amp;vq=hd720">;
    <param name="allowFullScreen" value="1">
    <param name="allowscriptaccess" value="always">
    <param name="wmode" value="transparent">
    <embed src="youtube.com/v/aXSL0MZAdiM&amp;vq=hd720"; type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="1" autostart="true" wmode="transparent" height="320" width="530">
</object> 
```

# c# - 通过使用 tryparse 而不是 parse 来避免 try-catch

> ID：15220155
> 
> 赞同：3
> 
> 时间：2013-03-05T09:27:02.127
> 
> 标签：c#, parsing, try-catch

在我的代码的很多地方我都有这个：

```
try
{
    price = double.Parse(sPrice.Replace(",", "."), CultureInfo.InvariantCulture);
}
catch
{
    price  = 0;
} 
```

我在某处读到，如果在 try 块中抛出异常，则需要很长时间才能被捕获。

所以，我想使用 tryparse 而不是 parse，像这样：

```
if (!double.TryParse(sPrice, out price))
{
     price  = 0;
} 
```

这是一个好习惯吗？会不会花更少的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:33:52.660

是的，`TryParse`速度更快。

但是，这对我来说听起来像是过早的优化，除非您希望`Parse`在包含许多无效输入字符串的紧密循环中被调用。

您不应该根据速度进行选择，而是根据要求和您期望获得的数据类型来选择。另外，考虑另一种选择：`Convert.ToDouble`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:33:11.477

我觉得使用的两个好处`TryParse`

1.  与`try.. catch...`
2.  您将始终在变量中具有值，无论是您要分配的值还是默认值。因此，一旦将变量传递给 TryParse，您就可以直接使用它

# c# - 如何从组合框绑定中获取值来自 List<>

> ID：15220156
> 
> 赞同：1
> 
> 时间：2013-03-05T09:27:04.200
> 
> 标签：c#, winforms

我有一个`combobox`与 List<> 类型数据绑定的。当我选择一些东西`combobox`并尝试从中找到`SelectedItem`时，`combobox`我什么也没找到。我怎么能得到这个我附上我的代码图片你可以理解。![在此处输入图像描述](../Images/4b7c109dc22cc4cb20dd61e402a79e72.png)

在这里，我想获得`SelectedItem` `FiscalYearName`用户从中选择的`combobox`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:30:31.583

```
 var item =  fiscalYearComboBox.SelectedItem as FiscalYear
 if(item!=null)
   _fPeriod.FiscalYear = item.FiscalYearName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:31:59.577

您将不得不按`ComboBox` `SelectedItem`原样`Type`投射

例子：

```
_fPeriod.FiscalYear = (fiscalYearComboBox.SelectedItem as FiscalPeriod).FiscalYearName; 
```

或者，如果您`ComboBox` `ValueMember`设置为，您可以按原样`FiscalYear`投射`SelectedValue``Type` `FiscalYear`

```
_fPeriod.FiscalYear = fiscalYearComboBox.SelectedValue as DateTime; 
```

# opencv - 将像素从一个图像重新投影到另一个图像

> ID：15220159
> 
> 赞同：9
> 
> 时间：2013-03-05T09:27:07.943
> 
> 标签：opencv, computer-vision, perspectivecamera, image-stitching, photogrammetry

我有许多校准过的相机拍摄平面场景的照片。为简单起见，我们假设有 3 个摄像头。这些相机正在进行一般运动，但主要是平移加上一些温和的旋转。[相机位置示例](https://i.stack.imgur.com/WZDFo.png)

任务是将它们完全缝合。我对 3D 坐标一无所知，只是使用校准相机拍摄的一组图像。

我所做的：

我通过在每对图像（1->2、2->3、1->3）之间使用**findHomography**来检测 OpenCV 中的 SURF/SIFT 实现的特征以获得初始单应性。从这些单应性中，我得到了每个相机姿势的初始估计[（与此类似的过程）](https://stackoverflow.com/a/10781165/2080818)

然后我尝试使用捆绑调整技术来最小化每个匹配对的重投影误差。优化的参数是三个平移值和三个旋转值（从 Rodrigues 的旋转公式获得），尽管我可以稍后添加内在参数（焦点、主点等）。

假设图像#2 将是参考帧（通过与其他两个图像有最多的匹配），它的旋转和平移矩阵分别是恒等矩阵和零矩阵。

我计算从图像#2到图像#1的关键点（在图像#2和图像#1中都可见）的重投影为（伪代码）

```
[x1_; y1_; z1_] = K1*R1*inv(K2)*[x2; y2; 1] + K1*T1/Z2;
x1 = x1_/z1_;
y1 = y1_/z1_; 
```

或者

```
x1 = ((f1/f2)*r11*x2 + (f1/f2)*r12*y2 + f1*r13 + f1*tx/Z2) / ((1/f2)*r31*x2 + (1/f2)*r32*y2 + r33 + tx/Z2)
y1 = ((f1/f2)*r21*x2 + (f1/f2)*r22*y2 + f1*r23 + f1*ty/Z2) / ((1/f2)*r31*x2 + (1/f2)*r32*y2 + r33 + ty/Z2) 
```

其中 r__ 是 R1 矩阵的元素，两个内在矩阵的形式为

```
[f 0 0]
[0 f 0]
[0 0 1] 
```

我假设参考系的 Z2 坐标为 1。

下一阶段是使用获得的相机矩阵（K1、R1、T1、K3、R3、T3）将图像#1 和#3 扭曲到图像#2 的公共坐标系中。

问题是我不知道正确重投影到图像#2的参考帧所需的Z1和Z3，因为从图像#1->#2的反转重投影看起来像这样：

```
x2 = ((f2/f1)*R11*x1 + (f2/f1)*R12*y1 + f2*R13 - f0/Z1*(R11*tx + R12*ty + R13*tz)) / ((1/f1)*R31*x1 + (1/f1)*R32*y1 + R33 - 1/Z1*(R31*tx + R32*ty + R33*tz))
y2 = ((f2/f1)*R21*x1 + (f2/f1)*R22*y1 + f2*R23 - f0/Z1*(R21*tx + R22*ty + R23*tz)) / ((1/f1)*R31*x1 + (1/f1)*R32*y1 + R33 - 1/Z1*(R31*tx + R32*ty + R33*tz)) 
```

其中 R__ 是 inv(R1) 矩阵的元素。

有没有更好的方法来计算束调整（2d->2d）的重投影误差，然后将图像扭曲到公共坐标系中？我注意到 OpenCV 在他们的拼接模块中有非常相似的框架，但它是在纯旋转运动的假设下运行的，这不是这里的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:10:03.053

我在我的帖子[如何从外部参数中获取立体图像中的点自动回答了这个问题](https://stackoverflow.com/questions/15475190/how-to-get-points-in-stereo-image-from-extrinsic-parameters/15495933#15495933)

请注意，我使用的方法（已测试且正在工作！）仅当 3D 坐标（现实世界！）中的对象是平面且位于 Z=0（您校准相机的外部参数的点）时才有效。在这种情况下，此方法与您的校准一样精确。注意：为了获得最佳校准检查 openCVs 圆形校准，它的复制误差为 0.018 像素（由在我大学工作的博士生测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T00:21:41.453

您可能已经发现了关于拒绝错误的错误。它与这一行有关：

```
[x1_; y1_; z1_] = K1*R1*inv(K2)*[x2; y2; 1] + K1*T1/Z2; 
```

点 [x2; y2; 1] 在比例常数 C*[x2; y2; 1] 在这里你设置 C=1 时通常是未知的。在第一种观点中，可能性的轨迹表现为一条*极线。*您可以使用最小二乘三角剖分沿着这条线找到最有可能存在 3D 点的点，然后将重新投影的点计算为：

```
[x1_; y1_; z1_] = K1*(R1*X + T1); 
```

并像上面一样从那里开始。点云中每个这样的点 X 的 3D 坐标可以使用其对应的归一化坐标 (x1,y1), (x2,y2),... 以及相应的旋转矩阵和平移向量来计算，通过格式化它们进入矩阵问题：

```
A X = b 
```

然后求解最小二乘：

```
min |A X - b|_2 
```

[此处](http://citeseerx.ist.psu.edu/viewdoc/download?rep=rep1&type=pdf&doi=10.1.1.124.5096)的第 3 页和第 4 页对此进行了说明。

# ios - ipad 左半边展示

> ID：15220161
> 
> 赞同：0
> 
> 时间：2013-03-05T09:27:14.110
> 
> 标签：ios, objective-c, ipad, cocoa

我想在我的应用程序右侧有一个按钮。当它被点击时，它必须从主视图的右侧拉出一个视图，并且它应该只有主视图的 1/3 大小。是否对此已经编写并开放使用有任何控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:48:39.977

如果您尝试在默认 Facebook 应用程序中执行类似操作，则可以按照此方法进行操作。

首先将新的添加`UIView`为子视图并在

```
-(void)viewDidAppear:(BOOL)animated
    {
        CGRect customeFrame = CGRectMake(// set the frame parameters to keep the view out of visible region)
        [newView setFrame:customeFrame];
    } 
```

然后在您的按钮操作中，您可以使用`UIView`动画将视图带到可见区域例如，

```
- (void)clickedButton
       {
        [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationCurveEaseInOut animations:^{
                        //set the frame of newView to visible region
         CGRect customeFrame = CGRectMake(// set the frame parameters to keep the view in the visible region)
         [newView setFrame:customeFrame];
          } completion:^{
    //add what you need to do on completion
    }];
} 
```

**注意：**我没有为可见和隐藏状态设置框架，`newView`因为我需要根据您的要求自行设置。`newView.frame.origin.y`除了财产，一切都将相同。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:33:39.487

您可能想使用 JTRevealSidebar：[在此处下载](https://github.com/mystcolor/JTRevealSidebarDemo)

虽然它在左侧有一个按钮。

# c# - 消息队列服务不可用

> ID：15220165
> 
> 赞同：1
> 
> 时间：2013-03-05T09:27:28.190
> 
> 标签：c#, tcp, cluster-computing, msmq

我有一个 TCP 服务器，在 Windows 集群中作为 Windows 服务运行。它接收消息并将它们放入队列 (MSMQ)。我创建了一个公共 MSMQ 队列。我收到此错误消息：

```
System.Messaging.MessageQueueException (0x80004005): Message Queue service is not available.
   at System.Messaging.MessageQueue.MQCacheableInfo.get_WriteHandle()
   at System.Messaging.MessageQueue.StaleSafeSendMessage(MQPROPS properties, IntPtr transaction)
   at System.Messaging.MessageQueue.SendInternal(Object obj, MessageQueueTransaction internalTransaction, MessageQueueTransactionType transactionType) 
```

我以这种方式将消息发送到队列：

```
static void SendHelper(UncookedMessage uncooked)
{
    var msg = new Message(uncooked);
    msg.Formatter = new XmlMessageFormatter(new[] { typeof(UncookedMessage) });

    // (PER MESSAGE)
    msg.UseJournalQueue = false;
    msg.AttachSenderId = false;
    msg.Recoverable = true;

    SingleQueue.Send(msg);
} 
```

队列安全性为服务器和集群中定义的每个用户提供了完全访问权限。我的队列名称是：**FormatName:DIRECT=OS:application9\uncooked_message_single**；但我已经测试了**application9\** uncooked_message_single 、**application9.domain.com\** uncooked_message_single和**FormatName:DIRECT=OS:application9.domain.com\uncooked_message_single**。没有人工作。

**注意：**此应用程序与非集群服务器上的私有队列完美配合。我对 Windows 集群了解不多，但我们的管理员说这是一个故障转移集群，它在 Windows Server 2012 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:33:00.420

由于错误消息告诉您它无法使用请求的 MSMQ 服务，我建议检查这些服务是否正确设置。

在深入了解集群配置之前，我建议您...

*   ...明确检查**集群服务器**上队列的**访问权限**（不在单个集群*节点*上）。

****   ...检查是否有防火墙阻止网络中的消息。*** 

 ***当您在非集群环境中成功尝试了您的方案时，集群环境中可能显然存在差异。

实际上，在集群服务器上设置 MSMQ 需要与在非集群服务器上不同的配置。

确保`MSMQ`服务和服务在*每个硬件节点*`Distributed Transaction Coordinator (DTC)`上启动并运行。

 *在**故障转移群集管理器**中，将 MSMQ 和 DTC 服务都设置为群集资源，然后将 MSMQ 配置为依赖群集 DTC 作为“ `dependendy`”右键单击`MSMQ -> Properties -> Dependencies`。

不要忘记再次检查您要在*集群服务器*上使用的队列的访问权限。在单个节点上设置队列不起作用。

我不知道这是否在所有情况下都是强制性的，但在我们的集群上，我们还有一个文件共享配置为 MSMQ 的依赖项。据我了解，这应该确保 MSMQ 所需的临时文件在节点切换后仍然可用。

此外，我发现这里有两篇文章对设置集群节点很有帮助。它们可能有助于逐步确认您的配置是否正确：

*   “[构建 MSMQ 集群](http://blogs.msdn.com/b/mismail/archive/2007/04/18/building-an-msmq-cluster.aspx)”。您会在该文章中找到其他几个链接，这些链接将进一步指导您。
*   微软也有一份详细的文档：《[Deploying Message Queuing (MSMQ) 3.0 in a Server Cluster](http://www.microsoft.com/downloads/details.aspx?FamilyID=349D6584-9510-46F5-904E-2C58FA16EB85&displaylang=en&displaylang=en)》。****

# regex - 不同目录中静态文件的 NGINX URL 重写

> ID：15220168
> 
> 赞同：0
> 
> 时间：2013-03-05T09:27:34.560
> 
> 标签：regex, nginx

可以请一些圆顶帮我解决这个问题。我想写下所有出现的

```
name.css.v=abc1234.css 
```

至

```
name.css 
```

和

```
name.js.v=abc123.js 
```

至

```
name.js 
```

我试过使用

```
rewrite /([a-z,\d]+.css)(.v=[a-z,\d]+.css$)/i $1  last; 
```

但它不起作用

顺便说一句，不同目录中有文件，例如

```
/a/b/c/something.css.v=sssaa1223.css 
/d/e/f/anotherfile.css.v=12333asss.css
/g/h/i/somejsfile.js.v=123sdsd.js
/j/k/l/alienfile.js.v=askdlsk12asd.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:03:13.437

不确定 nginx 语法，但是这个正则表达式应该可以很好地解决您的问题：

`rewrite /(\w+.(css|js))(.v=.*)/i $1 last;`

[http://regexr.com?340lv](http://regexr.com?340lv)

# set - Qlikview 集合分析

> ID：15220173
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:27:58.160
> 
> 标签：qlikview, set, analysis, dollar-sign, qlikview

我必须在[qlikview](/questions/tagged/qlikview "显示标记为“qlikview”的问题")比较两个不同年份的销售额。

像帮助建议那样完成的集合分析不起作用

```
=sum( {$<ID_Ac_EDIZIONE_WI={$(=only(ID_Ac_EDIZIONE_WI)-1)}>} ORC_Mo_ImponibileRiga_Attuale) 
```

它给了我一列零；

像这样修改它

```
=sum( {1<ID_Ac_EDIZIONE_WI={$(=only(ID_Ac_EDIZIONE_WI)-1)}>} ORC_Mo_ImponibileRiga_Attuale) 
```

它创建了两个不同的行，每年一个。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:41:13.017

如果不查看您的数据模型或至少一些示例数据，就很难进行诊断。如果您在内联脚本中提供几行示例数据，那么有人帮助您会容易得多。

我可以在没有看到您的数据的情况下提出的唯一建议是尝试将美元扩展表达式用单引号括起来：

例如，这个：

```
=sum( {$<ID_Ac_EDIZIONE_WI={'$(=only(ID_Ac_EDIZIONE_WI)-1)'}>} ORC_Mo_ImponibileRiga_Attuale) 
```

而不是这个：

```
=sum( {$<ID_Ac_EDIZIONE_WI={$(=only(ID_Ac_EDIZIONE_WI)-1)}>} ORC_Mo_ImponibileRiga_Attuale) 
```

# ruby - 如何删除数组中的元素

> ID：15220176
> 
> 赞同：0
> 
> 时间：2013-03-05T09:28:03.420
> 
> 标签：ruby, arrays, sorting

我有一个数组：

```
output = [["efg\r\n", "abc\r\n", "xyz\r\n", "mno\r\n", "end "]] 
```

我需要对下面的内容进行排序和列出，例如删除第一个和最后一个条目并删除`"\r"`and `"\n"`。

```
abc 
xyz
mno 
```

我尝试使用`pop`and `drop`，但它们没有帮助，因为整行被视为第一个数组（例如：`output[1][0]`will give `"efg\r\n"`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:30:38.790

你需要一些东西

```
a = output[0][1,outputs.size-2].map{|t| t.strip} 
```

现在 a 将是一个类型为 的数组`["abc", "xyz", "mno"]`。我没有对该数组进行排序，因为它似乎没有在您显示的输出中排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:30:27.337

你可以这样写：

```
output = arr.flatten[1..-1].map { |s| s.strip }.sort 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:40:44.177

我咬一口：

```
output = [["efg\r\n", "abc\r\n", "xyz\r\n", "mno\r\n", "end "]]
output[0][1..-2].map &:strip
#=> ["abc", "xyz", "mno"] 
```

# mongodb - 需要更好的模式来查询 mongodb 中的计划

> ID：15220185
> 
> 赞同：2
> 
> 时间：2013-03-05T09:28:38.550
> 
> 标签：mongodb

我需要在 mongodb 中设计一个调度模式，原始数据格式是这样的 **{"schedule_begin":Date,"schedule_end":Date,"schedule_days_runs":"1111100"}**

请注意，架构中有一个带有数据**"schedule_days_runs":"1111100"的属性****schedule_days_runs**。它是一周中的 7 天，其中“1”代表工作，“0”代表不工作。

 **基本上，应用程序所做的是查找在某个日期（例如星期一）工作的所有日程，这意味着我们需要查询日程，**schedule_start =< one_day <= schedule_end**，同时确保查询的日程也在星期一工作。

一个简单的解决方案是直接将“1111100”以String的形式存储到mongodb中，只使用schedule_start和schedule_end进行查询，然后使用应用逻辑获取结果。然而，这个解决方案可能并不方便，因为通常我会收到数千个查询，而一半的查询不是答案。例如，要获取特定日期“1111100”的工作计划（计划从周一到周五工作），查询结果给了我很多无用的信息，例如“0000011”（计划在周末工作）。

我正在尝试找出更好的解决方案，有人可以有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:34:03.683

我还在用 做我的第一步`mongodb`，但我认为使用具有不同值的数组更适合`mongodb`。这些方面的东西：

```
{ 
  "schedule_begin": Date,
  "schedule_end":Date,
  "schedule_days_runs": ["mo", "tu", "we", "th", "fr", "sa", "su"]
} 
```

然后你可以使用如下查询：

```
{ schedule_days_runs: "mo" } 
```

让所有的东西都在星期一运行。

据我所知，那里可能有一些错别字。此外，据我所见，使用 mongodb，我们必须摆脱使用关系数据库所学到的几乎所有东西，这是另一回事。使用全新的方法让我解决了一些使用关系方法难以解决的问题。

我用这个问题作为参考：[Querying array elements with Mongo](https://stackoverflow.com/questions/3308119/querying-array-elements-with-mongo)

要找出数组的长度，这个问题很有用：[In Mongo DB, how do I find documents where array size is greater than 1](https://stackoverflow.com/questions/7811163/in-mongo-db-how-do-i-find-documents-where-array-size-is-greater-than-1)

引用：

> 使用 $where
> 
> ```
> db.accommodations.find( { $where: "this.name.length > 1" } ); 
> ```

因此，基于此，您应该尝试：

```
{ $where : "this.schedule_days_runs.length > 1" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:34:38.800

我不确定您的应用程序如何向数组添加元素，但一种选择是仅在有人实际工作时才使用`$push`或`$addToSet`向数组添加天数。然后，您可以检查数组的长度，以了解每个人工作了多少天。

您还可以使用聚合框架（我认为这是更好的选择）来运行查询并生成报告。例如，使用以下文档结构：

```
{ 
  "userId":"user ID"
  "schedule_begin": "Date",
  "schedule_end": "Date",
  "schedule_days_runs": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
} 
```

您可以运行以下查询来找出谁在星期一工作。

```
db.schedule.aggregate([{$unwind:"$schedule_days_runs"},{$group:{"_id":{"working_days":"$schedule_days_runs", "name":"$userId"}}},{$match:{"_id.working_days":"Monday"}},{$sort:{"_id.name":1}}]) 
```

这将使用userId 和工作天数从数组的每个元素创建单独的文档，然后`$unwind`只使用那些在星期一工作的人。请注意点符号以进入嵌入式文档。聚合框架还允许您重新定义字段，例如. 此查询的示例结果是：`$group``$match``"name":"$userId"`

```
{
    "result" : [
            {
                    "_id" : {
                            "working_days" : "Monday",
                            "name" : "Charlie Sheen"
                    }
            },
            {
                    "_id" : {
                            "working_days" : "Monday",
                            "name" : "Donald Duck"
                    }
            },
            {
                    "_id" : {
                            "working_days" : "Monday",
                            "name" : "Superman"
                    }
            }
    ],
    "ok" : 1 
```

}

您可以使用聚合框架做更多事情，并且查询的每个部分都将信息传递到下一个部分。因此，在上面，$unwind 将信息通过管道传递给 $group，然后匹配文档。您可以继续 -[查看文档以获取更多详细信息](http://docs.mongodb.org/manual/reference/aggregation/)。**

# php - 如何从mysql中选择不同的行并在一个页面中更新它们

> ID：15220192
> 
> 赞同：0
> 
> 时间：2013-03-05T09:29:03.347
> 
> 标签：php, mysqli, multiple-columns

我想从 sql 数据库中选择一些行。第一个用户应该插入两个变量，我可以选择这些行。然后在此页面中有一个表将更新此行，但问题是当我选择没有输入的这些列时，我可以更新数据库，但是当我想使用输入变量时，它会显示表但无法更新它。我在哪里做错了？

选择数据库列而不使用输入：

```
<?php
include 'mytool.php';
        // username and password sent from form
    $myusername=$_SESSION["mys"];

    $host="localhost"; // Host name
    $username='username'; // Mysql username
    $password='password'; // Mysql password
    $db_name="db"; // Database name
    $tbl_name="test"; // Table name

    // Connect to server and select database.

     $link=mysql_connect($host,$username,$password)or die("cannot connect");
    $selected=mysql_select_db($db_name,$link)or die("cannot select DB");
    $sql="SELECT * FROM $tbl_name where classnum='106' and level='i4' ";

    $result=mysql_query($sql,$link);

    $count=mysql_num_rows($result);     

?> 
```

输入变量：

```
<form id="searchform" method="post" dir="rtl" action=""> 
                    level :<input name="level"  type="text" id="level" />
                    classnumber :<input name="classnum"  type="text" id="classnum" />

                           <input style="margin-top:10px; margin-left:120px; font-size: 14px;  padding: 5px 14px;" type="submit" value="search" name="enter"   />

                </form>

                <?php   
                    if(isset($_POST['enter'])){         
                    $sql="SELECT * FROM $tbl_name where classnum='106' and level='i4' ";

                    $result=mysql_query($sql,$link);

                    $count=mysql_num_rows($result);
                    }
                ?> 
```

在上面的代码之后更新表代码：

```
 <form name="form1" action="" method="POST">
                                <center>
                                    <div>
                                        <div align="center" width = 615>
                                            <table class="stats" cellspacing="0" width="615" border="1">
                                                <tr>
                                                    <th width="20" scope="col" >Id</th>
                                                    <th width="60" scope="col">Name</th>
                                                    <th width="60" scope="col">Last Name</th>
                                                    <th width="42" scope="col">Midterm</th> 
                                                    <th width="54" scope="col">Class mark</th>
                                                    <th width="42" scope="col">Final Quiz</th>
                                                    <th width="54" scope="col">State</th>
                                                    <th width="54" scope="col">Details</th>

                                                </tr>
                                                <?php
                                                while($rows=mysql_fetch_array($result)){
                                                    $id[]=$rows['id']; 
                                                 ?>
                                                <tr>
                                                    <td align="center">
                                                    <input name="id[]" type="text" id="id" value="<? echo $rows['id']; ?>" >
                                                    </td>
                                                    <td align="center"><input type="text" name="name[]" id="name" value= "<? echo $rows['name']; ?>"  /></td>
                                                    <td align="center"><input type="text" name="lastname[]" id="lastname" value= "<? echo $rows['lastname']; ?>"  /></td> 
                                                    <td align="center"><input type="text" name="midmark[]" id="midmark" /></td>
                                                    <td align="center"><input type="text" name="classmark[]" id="classmark" /></td>
                                                    <td align="center"><input type="text" name="finalmark[]" id="finalmark" /></td>
                                                    <td align="center"><input type="text" name="state[]" id="state" /></td>
                                                    <td align="center"><input type="text" name="details[]" id="details"  /></td>

                                                </tr>
                                                <?php
                                                 }
                                                 ?>
                                            </table>
                                        </div>

                                <input type="submit" value="ثبت" name="Submit"   />
                                </form>

                                <?php
                                // Check if button name "Submit" is active, do this 
                                if(isset($_POST['Submit']))
                                {
                                     for($i=0;$i<$count;$i++)
                                     {
                                    $sql1=mysql_query(" UPDATE `".$tbl_name."` SET midmark='".$_REQUEST['midmark'][$i]."' , classmark='".$_REQUEST['classmark'][$i]."' , finalmark='".$_REQUEST['finalmark'][$i]."' , state='".$_REQUEST['state'][$i]."' , details='".$_REQUEST['details'][$i]."'  WHERE id='".$_REQUEST['id'][$i]."' ");
                                    $result1=mysql_query($sql1);
                                    }
                                }

                                    if($result1){
                                    header("location:results.php");
                                    }
                                    mysql_close();
                                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:03:54.950

比较这些行。

```
if(isset($_POST['Submit']))
           {
                for($i=0;$i<$count;$i++)
                 {
                    **$sql1=mysql_query(" UPDATE `".$tbl_name."` SET midmark='".$_REQUEST['midmark'][$i]."' , classmark='".$_REQUEST['classmark'][$i]."' , finalmark='".$_REQUEST['finalmark'][$i]."' , state='".$_REQUEST['state'][$i]."' , details='".$_REQUEST['details'][$i]."'  WHERE id='".$_REQUEST['id'][$i]."' ");
                    $result1=mysql_query($sql1);**
                 }
           } 
```

与这些。

```
$sql1=" UPDATE `".$tbl_name."` SET midmark='".$_REQUEST['midmark'][$i]."' , classmark='".$_REQUEST['classmark'][$i]."' , finalmark='".$_REQUEST['finalmark'][$i]."' , state='".$_REQUEST['state'][$i]."' , details='".$_REQUEST['details'][$i]."'  WHERE id='".$_REQUEST['id'][$i]."' ";
$result1=mysql_query($sql1); 
```

# c++ - 您将如何使用 C++11 初始化函数结果的 const 向量？

> ID：15220199
> 
> 赞同：17
> 
> 时间：2013-03-05T09:29:26.933
> 
> 标签：c++, c++11, initialization, constants

是否可以使用诸如`generate_n`创建`const vector`随机数之类的东西？`vector`如果不在构造函数中派生和进行赋值，我想不出一种方法。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-05T09:33:23.793

如果您愿意，可以使用静态助手或 lambda；正如评论中指出的那样，移动语义/复制省略将使这非常便宜，因为所有体面的编译器都会省略助手返回的向量的完整副本。相反，他们只会创建代码来填充单个向量，然后使用该向量。

```
std::vector< int > Helper()
{
  const size_t n = 10;
  std::vector< int > x( n );
  std::generate_n( x.begin(), n, someGenerator );
  return x; 
}

const std::vector< int > my_const_vec( Helper() ); 
```

这是 lambda 版本：

```
const std::vector< int > my_const_vec( [] ()
  {
    const size_t n = 10;
    std::vector< int > x( n );
    std::generate_n( x.begin(), n, someGenerator );
    return x; 
  }() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:26:30.710

将您的初始化封装到一个函数中并将其声明为“constexpr”，以便您可以使用它来初始化一个 const 表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T14:27:52.990

`std::transform`你也可以使用

```
vector<int> vec(10,1);
transform(vec.begin(), vec.end(), vec.begin(), func); 
```

其中 func 是：

```
int func(int i)
{
//return a random generated number 
} 
```

# unit-testing - Python unittest 在不应该的时候失败了

> ID：15220200
> 
> 赞同：2
> 
> 时间：2013-03-05T09:29:26.990
> 
> 标签：unit-testing, python-2.7

我在下面的文件中运行了单元测试，其中一个测试用例失败了，它不应该失败。我得到了一个意外的结果 - 断言错误，我打算在 TestFormatInitMethodArgs 中测试 if `'"' == '"'`，但它测试了`'"' == None`- 它看起来像第二个测试用例中的测试检查不是它自己的 setUp() 的相等性：

```
#!/usr/bin/env python

import csv
import unittest

class Format:
    def __init__(self, file_path, header=False, flag='r', delimiter=',', quote_char=None):
        self.file_path = file_path
        self.header = header
        self.flag = flag
        self.delimiter = delimiter
        self.quote_char = None

class TestFormatInitMethodDefaults(unittest.TestCase):
    def setUp(self):
        self.file_path = 'C:/Privatus/eurusd.csv'
        self.header = False
        self.flag = 'r'
        self.delimiter = ','
        self.quote_char = None

    def test_attributes(self):
        f = Format('C:/Privatus/eurusd.csv')
        self.assertEqual(self.file_path, f.file_path)
        self.assertEqual(self.header, f.header)
        self.assertEqual(self.flag, f.flag)
        self.assertEqual(self.delimiter, f.delimiter)
        self.assertEqual(self.quote_char, f.quote_char)

class TestFormatInitMethodArgs(unittest.TestCase):

    def setUp(self):
        self.file_path = 'C:/Privatus/eurusd.csv'
        self.header = True
        self.flag = 'rb'
        self.delimiter = ';'
        self.quote_char = '"'

    def test_args(self):
        a = Format('C:/Privatus/eurusd.csv', header=True, flag='rb', delimiter=';', quote_char='"')
        self.assertEqual(self.file_path, a.file_path)
        self.assertEqual(self.header, a.header)
        self.assertEqual(self.flag, a.flag)
        self.assertEqual(self.delimiter, a.delimiter)
        self.assertEqual(self.quote_char, a.quote_char)

if __name__ == '__main__':
    unittest.main() 
```

测试结果：

```
F.
======================================================================
FAIL: test_args (__main__.TestFormatInitMethodArgs)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Privatus\repos\working\data.py", line 45, in test_args
    self.assertEqual(self.quote_char, a.quote_char)
AssertionError: '"' != None

----------------------------------------------------------------------
Ran 2 tests in 0.000s

FAILED (failures=1) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:33:10.253

您似乎没有`quote_char`在构造函数（`__init__`）中设置属性

尝试`self.quote_char = quote_char`代替`self.quote_char = None`

# php - symfony 1.4 中的 JSON 404

> ID：15220201
> 
> 赞同：0
> 
> 时间：2013-03-05T09:29:30.523
> 
> 标签：php, json, web-services, symfony-1.4

我正在构建一个 json api。通过 routing.yml 配置文件可以很好地管理格式：

```
user_info:
  url: /users/:user_id
  class: sfRequestRoute
  param: { module: user, action: details, sf_format: json }
  requirements:
    user_id: \d+
    sf_method: [GET] 
```

现在我想确保发送到我的应用程序的任何请求都将以 json 格式返回结果（例如：“/dummy”应该在 json 中返回错误）。我在同一个文件的末尾使用以下默认路线走上正轨：

```
default:
  url: /*
  param: { sf_format: json } 
```

当我路由到一个不存在的页面或模块时，这会正确呈现一个 json... 错误！生成的 html 页面是 404，现在使用此路由我得到 500（服务器错误）。如何保持与默认 html 页面中的行为类似的行为，只需将呈现更改为 json 输出？

## 编辑 - 遵循 1Ed 说明

所以我编辑了我的 factory.yml，在我的 api 项目中创建了一个默认模块，在我的默认操作中添加了下面提到的 executeError404 函数......然后我设置了相应的 Error404Success.php 页面......

出于某种原因，我仍然需要路由，我对其进行了修改以避免 :module 和 :action 关键字：

```
default_index:
  url:   /:a

default:
  url: /:a/:b/* 
```

我在这里！我的 404 页面为整个 api 的 json 格式 :) 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:40:15.960

此默认路由将执行模块的`index`操作`default`（默认情况下）。您应该将`indexSuccess.json.php`模板文件添加到默认模块或修改`default/index`操作以尽早返回 json 响应。

如果您只想在此默认路由匹配时每次返回 404，您可以将默认操作更改为`error404`in `factories.yml`：

```
all:
  routing:
    class: sfPatternRouting
    param:
      generate_shortest_url:            true
      extra_parameters_as_query_string: true
      default_action:                   error404 
```

或者您可以像这样将默认 404 操作的请求格式显式设置为 json

```
public function executeError404(sfWebRequest $request)
{
  $request->setRequestFormat('json');
} 
```

您可以删除默认路由。

我建议**不要使用**这些默认路由，因为它们很难跟踪到站点的所有可能的 URL。您应该为每个特定操作创建单独的路由或使用路由集合。

# javascript - best_in_place 使用 :display_as - 如何更新以及

> ID：15220202
> 
> 赞同：0
> 
> 时间：2013-03-05T09:29:35.760
> 
> 标签：javascript, ruby-on-rails, best-in-place

我有一个`best_in_place`表格，我正在对提交的数据进行一些后处理。这是一系列时间，我在保存之前将它们格式化为一致的格式。保存后如何让更新后的值显示在表单上？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T09:29:35.760

我只能找到一种稍微笨拙的方式来做到这一点。首先，将`display_as`表单助手上的参数设置为与正在显示的实际属性相同。

```
= best_in_place @post, :name, type: :input, :display_as => :name 
```

然后，为`best_in_place:success`

```
$(document).on('best_in_place:success', function(e, data) {
  $(this).data('bestInPlaceEditor').original_content = data['display_as'];
}); 
```

保存帖子并`name`更新属性后，新值将作为 JSON 返回：它看起来像`{"display_as": "updated post name"}`. 此 javascript 获取返回的值并将其设置为 BIP 编辑器的`original_content`属性。当 BIP 呈现输入时（当您单击帖子名称进行编辑时），将`original_content`显示 的值。

使用 best_in_place 2.1.0 测试。best_in_place.js 中的相关代码为：

```
if (response !== null && response.hasOwnProperty("display_as")) {
  this.element.attr("data-original-content", this.element.text());
  this.original_content = this.element.text();
  this.element.html(response["display_as"]);
} 
```

这`this.element`是未编辑字段时显示的内容。因此，它被设置为与什么`original_content`（渲染时得到的值）不同的值。我不确定这是有意的还是 best_in_place 中的错误。

# android - Achartengine 条形图标签

> ID：15220208
> 
> 赞同：3
> 
> 时间：2013-03-05T09:30:18.620
> 
> 标签：android, bar-chart, achartengine, labels

我正在使用 achartengine 制作条形图，我想在条形图上添加自定义值，而不是使用 setDisplayChartValues：这可能吗？

这是因为图表中的所有条形都是可点击的，所以即使高度为零，我也将条形设为可点击，添加 3 个单位：我不能显示 3，而是 0。

希望这很清楚，您可以提供帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:01:04.867

您可以添加注释而不是常规图表值：

```
// add an annotation for each bar
series.addAnnotation("text", x, y); 
```

[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含此功能的版本。

# javascript - 在 jquery 中添加类工作正常，但删除类不工作

> ID：15220210
> 
> 赞同：1
> 
> 时间：2013-03-05T09:30:21.540
> 
> 标签：javascript, jquery, ajax

```
window.addEvent('domready', function(){
            $('whois').addEvent('submit', function(e) {
            new Event(e).stop();
            var log = $('log_res').empty().addClass('ajax-loading');
            this.send({
                update: log,
                autoComplete: function() {
                    log.removeClass('ajax-loading');
                }
            });
            });     
        }); 
```

大家好，我是 jquery addclass 的新手，工作正常，但 removeclass 工作不正常。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:35:01.530

请尝试以下代码：

```
window.addEvent('domready', function(){
        $('whois').addEvent('submit', function(e) {
        new Event(e).stop();
        var log = $('log_res'); //Code Edit here
        log.empty().addClass('ajax-loading');
        this.send({
            update: log,
            autoComplete: function() {
                log.removeClass('ajax-loading');
            }
        });
        });     
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:31:58.647

```
var log = $('.log_res').empty().addClass('ajax-loading');

$('.log_res').removeClass('ajax-loading'); 
```

我觉得`log_res as class`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:33:03.670

```
window.addEvent('domready', function () {
        $('whois').addEvent('submit', function (e) {
            new Event(e).stop();
            var log = $('#log_res'); // or var log = $('.log_res'); if log_ref is class
            log.empty().addClass('ajax-loading');
            this.send({
                update: log,
                autoComplete: function () {
                    log.removeClass('ajax-loading');
                }
            });
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:33:13.170

我不知道什么是 log_res

如果是 id 那么

```
$('#log_res').empty().addClass('ajax-loading'); 
```

如果它是类，那么试试这个。

```
 $('.log_res').empty().addClass('ajax-loading'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T09:34:16.343

我认为您没有选择正确的元素。

> 如果 log_res 是类，则使用
> 
> ```
> $(".log_res") 
> ```
> 
> 如果它是一个 id 然后使用
> 
> ```
> $("#log_res") 
> ```

然后调用所需的 jquery 方法。

希望这可以帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T09:34:19.837

我认为你应该使用

```
var log = $('log_res').empty();
log.addClass('ajax-loading'); 
```

尝试这个：

```
window.addEvent('domready', function(){
    $('whois').addEvent('submit', function(e) {
        new Event(e).stop();
        var log = $('log_res').empty();
        log.addClass('ajax-loading');
        this.send({
            update: log,
            autoComplete: function() {
                log.removeClass('ajax-loading');
            }
        });
    });     
}); 
```

# cordova - android 项目 phonegap intellij cordova 导入无法识别

> ID：15220217
> 
> 赞同：0
> 
> 时间：2013-03-05T09:30:29.750
> 
> 标签：cordova, intellij-idea, import

我正在使用 EclipseIDE/Phonegap/cordova 开发一个移动应用程序（到 android/iphone），但是我已更改为 Intellij 12。似乎一切正常，除了无法识别cordova 导入。可能是什么问题/解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T14:46:45.193

您是否包括`cordova-2.9.0.jar`（libs 文件夹）并设置“添加为库”（右键单击）？

这些教程可能会帮助您：

[Android、Intellij IDEA 和 PhoneGap：入门](http://therockncoder.blogspot.co.uk/2012/07/android-intellij-idea-and-phonegap.html)。
[如何在 IntellijIDEA 中使用 PhoneGap](http://nick.perfectedz.com/2012/10/02/how-to-use-phonegap-with-intellijidea/)

您的 Activity 应如下所示：

```
package com.example.Androide;

import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;

public class MyActivity extends DroidGap {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

# ios5 - MKMapView NSInvalidArgumentException Invalid Region crash in ios

> ID：15220222
> 
> 赞同：2
> 
> 时间：2013-03-05T09:30:43.067
> 
> 标签：ios5, mapkit

我在我的一段代码中收到错误“由于未捕获的异常'NSInvalidArgumentException'，原因：'Invalid Region'而终止应用程序”。这是代码：

```
- (MKCoordinateRegion)region
{
    MKCoordinateSpan span;
    span.latitudeDelta = (maxLat + 90) - (minLat + 90);
    span.longitudeDelta = (maxLon + 180) - (minLon + 180);

    NSLog(@"value of lat delta %f",span.latitudeDelta);
    NSLog(@"value of long delta %f",span.longitudeDelta);

    if(span.latitudeDelta == 0.0f)
    span.latitudeDelta = 0.1f;
    if(span.longitudeDelta == 0.0f)
    span.longitudeDelta = 0.1f;

    CLLocationCoordinate2D center;
    center.latitude = minLat + span.latitudeDelta / 2;
    center.longitude = minLon + span.longitudeDelta / 2;

    return MKCoordinateRegionMake(center, span);
} 
```

这里 center.latitude 和 center.longitude 变为零并且它崩溃了。maxlat、maxlon、minlat 和 minlon 的值为 maxLat = -91、minLat = 91、maxLon = -181、minLon = 181 请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:05:22.060

我有一个类似的问题。在谷歌地图上绘制最大值（纬度，经度）和最小值（纬度，经度），基本上会超出范围。（我猜这在 iOS 6 的 MapKit 中没有得到很好的处理）

目前，我的解决方法（并且有效）是设置这些值 maxLat = -75，minLat = 75，maxLon = -175，minLon = 175

我的应用可以做到这一点，因为它主要为一些人口最稠密的地区绘制地图。如果您的地图必须显示包括北极/南极在内的整个星球，那么我不确定我的 hack 是否会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T09:47:12.837

我遇到了同样的问题并调查了纬度和经度的最大值可以设置为： **minLat** = -84 **maxLat** = 84 **minLong** = -179 **maxLong** = 179 否则您的位置将超出地图的范围并调用setRegion 可能会导致崩溃。

# jquery - 如何从基础表中获取值

> ID：15220226
> 
> 赞同：2
> 
> 时间：2013-03-05T09:30:51.473
> 
> 标签：jquery, html, infragistics, ignite-ui, iggrid

我需要从单元格表中获取值。如果您知道该怎么做，我将不胜感激。

尝试了几天，但我不知道如何获取 columnID 和 ROWID

我找到了这个，但它不起作用

```
.igGrid( "getCellValue", rowId:object, colKey:string ); 
```

这是代码（我如何从表中获取值）？

```
$.ig.loader(function () {
$("#grid2").igGrid({

autoGenerateColumns: false,
renderCheckboxes: true, 

columns:[                
            { headerText: "X", key: "x", dataType: "number", width: "40%"},
            { headerText: "Y", key: "y", dataType: "number", width: "40%"},
            { headerText: "Z", key: "z", dataType: "number", width: "40%"},

        ],

//dataSource: data,

height: "400px",
width: "100%",
features:[
            {
                name: "Filtering",
                allowFiltering: true,
                type: "local"
            },
            {
                name: "Selection",
                mode: "row"
            },
            {
                name: "Updating",
                enableAddRow: false,
                editMode: "row",
                // event raised after end row editing but before dataSource was updated
                editCellEnding: function (evt, ui) {
                    // get cell’s checkbox value when it is changed
                    if (ui.update) {
                        if (ui.columnKey === "nid") {
                            logEvent("editCellEnded event fired. Column Key = " +
                        ui.columnKey + "; Row Index = " +
                        ui.rowID + "; Cell Value = " +
                        ui.value + "; Update = " +
                        ui.update);
                        }
                    }
                },
                enableDeleteRow: false,
                columnSettings: [
                {
                    columnKey: "x",

                }, 
                {
                    columnKey: "y"
                }, 
                {
                    columnKey: "z"
                }]
            }

        ]
});

$.ajax({
    type: "POST",
    url: "http://cmsdemo.trueoffice.com/feature-json",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data){
        $("#grid2").igGrid({
        dataSource: data 
     });
    }
});
    $("#grid2").live("iggridupdatingdatadirty", function (event, ui) {
            $("#grid2").igGrid("commit");
            return false;
        });
    // show the raised event
        function logEvent(message) {
            var evntWrap = $("#eventList");
            $(evntWrap).append("<div>" + message + "<div>");
            $(evntWrap).prop("scrollTop", $(evntWrap).prop("scrollHeight"));
        }
 });

//Functions         
function Filter() {
      var columnSettings = $("#grid1").igGridFiltering("option", "columnSettings");

        var expr = $("#filterExpr").val(),
            condition = $("#cond_list").val(),
            filterColumn = $("#filterColumn").val();
        $("#grid1").igGridFiltering("filter", ([{fieldName: filterColumn, expr: expr, cond: condition}]));
    }

    function SetConditions() {
        var filterColumn = $("#filterColumn").val();
        $("#cond_list option:selected").removeAttr("selected");
        if (filterColumn === "title" || filterColumn === "nid") {
         $("#cond_list .stringCondition").attr("disabled", "disabled");
         $("#cond_list .numberCondition").removeAttr("disabled").eq(0).attr("selected", "selected");
        }
        else {
            $("#cond_list .stringCondition").removeAttr("disabled").eq(0).attr("selected", "selected");
            $("#cond_list .numberCondition").attr("disabled", "disabled");
        }
    }
    function buttonClickHandler(buttonId) {
    alert("Button with id " + buttonId + " was clicked");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T17:06:44.927

有时对 IG 感到非常沮丧。但是，您有几个选择。如果您只关心您可以看到的列...即，您隐藏了一些列但您不需要访问它们，那么您可以在`editRowEnd`or`editRowEnding`事件触发时访问 ui 对象。否则，您需要使用底层`dataSource`的`dataView`. 这是它的外观，包括网格：

```
 grid = $("#grid").igGrid({
   height: 400,
   width: null,     //if null, the grid should stretch to fit
   virtualization: false,
   autoGenerateColumns: false,
   columns: [
     ......
   ],
   autoupdate: false,
   features: [
    { name: "Updating",
        enableAddRow: true,
        enableDeleteRow: true,
        editMode: 'row',
        editMode: 'cell',
        enableDataDirtyException: false,
        rowAdded: function(evt, ui) {
          alert("this is a visible column (title): " + ui.values.title);
        },
        editRowEnded: function(evt, ui) {
          var row = ui.owner.grid.dataSource.dataView()[ui.owner._rowIndex];
          alert("this is my id column, which is hidden: " + row.id);                  
        },
        rowDeleted: function(e, ui) {
          ... do something
        }
    }, 
```

# debian - .splintrc 预处理器指令中的空白 -D

> ID：15220228
> 
> 赞同：6
> 
> 时间：2013-03-05T09:30:56.503
> 
> 标签：debian, whitespace, preprocessor-directive, splint, secure-coding

我想`splint`在 debian 稳定的环境中运行我的一些资源。
我需要给出预处理器指令`-DUINT16_T='unsigned short'`，因为我经常需要它。我想把它放在我的`.splintrc`文件中。
从命令行运行时，`splint -DUINT16_T='unsigned short' mysource.c`它运行良好。如果将此行移到我的`.splintrc`文件中

```
-DUINT16_T='unsigned short'
-I/usr/local/include/ 
```

`splint`通话结果

```
Cannot list files in .splintrc files:
                                 short' (probable missing + or -)
  A flag is not recognized or used in an incorrect way (Use -badflag to inhibit
  warning) 
```

有没有人有解决方案？（请不要使用别名）。

为了进一步讨论，我将提供一个 mnwe (minimal not working example) `hello.c`，这可能会有所帮助：

```
#include <stdio.h>

int main (void)
{
  UINT16_T returnvalue=0;
  printf ("Hello, world!\n");
  return returnvalue;
} 
```

该命令`gcc -DUINT16_T='unsigned short' hello.c`运行良好 - 当然也可以`splint -DUINT16_T='unsigned short' hello.c`声称

```
Return value type unsigned short int does not match declared type
                 int: returnvalue 
```

但同样，我怎样才能将这个 DEFINE 包含在我的`.splintrc`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T12:22:31.063

--新答案--

你所问的只是没有在夹板中实现。

如果您查看 rcfiles.c 第 124 行中的夹板 3.1.2 **rcfiles_loadFile**函数

```
124          while ((c = *s) != '\0')
125             { /* remember to handle spaces and quotes in -D and -U ... */
126               if (escaped)
127                 {
128                   escaped = FALSE;
129                 }
130               else if (quoted)
131                 {
132                   if (c == '\\')
133                     {
134                       escaped = TRUE;
135                     }
136                   else if (c == '\"')
137                     {
138                       quoted = FALSE;
139                     }
140                   else
141                     {
142                       ;
143                     }
144                 }
145               else if (c == '\"')
146                 {
147                   quoted = TRUE;
148                 }
149               else
150                 {
151                  if (c == ' ' || c == '\t' || c == '\n')
152                    {
153                      /*@innerbreak@*/ break;
154                    }
155                }
156 
157               s++;
158               incColumn ();
159             } 
```

您会看到第 125 行中的注释是您所要求的 TODO。

我将第 151 行更改为

```
151                  if (c == '\t' || c == '\n') 
```

编译、运行，然后您的最小不工作示例（.splintrc 中没有引号）正在顺利通过测试。

然而，这种修改有点粗糙，因为一些夹板单元测试失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T16:23:01.463

使用双引号而不是单引号。

```
-DUINT16_T="unsigned short" 
```

# javascript - 验证空元素并显示警报

> ID：15220232
> 
> 赞同：0
> 
> 时间：2013-03-05T09:31:22.323
> 
> 标签：javascript, jquery, validation

再会

这个脚本在表中查找空元素时遇到一些问题 -0 当表为空时，它将显示警报“空”。如果不是，它必须说“不是空的”。但是，我在这里的那个，每次都显示“不为空” - 桌子是否为空......

```
jQuery(document).ready(function () {
            var tds = jQuery("table.borderClass > tbody > tr > td");

            var anyEmpty = false;
            tds.each(function () {
                if (jQuery(this).text() == "")
                    anyEmpty = true;
            });

            if (anyEmpty == false || tds.length == 0) {
                alert('empty');
            }
            else {
                alert('NOT empty');
            }

        }); 
```

谢谢！

# android - 在 Horizo ntalScrollView 中获取子位置并滚动到它

> ID：15220233
> 
> 赞同：6
> 
> 时间：2013-03-05T09:31:23.640
> 
> 标签：android, button, scroll, position, horizontalscrollview

看起来我无法在我的简单布局中获取或设置任何位置或滚动量：

```
// Relative layout - main_layout
<HorizontalScrollView
    android:id="@+id/MenuScroll"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:scrollbars="none" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="48dp"
        android:orientation="horizontal"
        android:layout_gravity="center"
        android:padding="0dp" >

        <Button
            android:id="@+id/button1"
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:id="@+id/button2"
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:id="@+id/button3"
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:id="@+id/button4"
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:id="@+id/button5"
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

    </LinearLayout>
</HorizontalScrollView>
// End of RelativeLayout - main_layout 
```

我想要的`MainActivity`是获取内部任何按钮的位置`HorizontalScrollView`并滚动到该位置。目前我无法获得左值（它始终为 0），如果我尝试`scrollTo`它就`HorizontalScrollView`不会，无论 x 或 y 的值是什么。

```
// imports
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_layout);

        final Button button3 = (Button)findViewById(R.id.button3);
        Rect rectf = new Rect();
        button3.getLocalVisibleRect(rectf);
        Log.i("Left: ", String.valueOf(rectf.left)); // it is always 0

        HorizontalScrollView MenuScroll = (HorizontalScrollView)findViewById(R.id.MenuScroll);
        // Trying to scroll to X=100 but it doesn't
        MenuScroll.scrollTo(100, MenuScroll.getBottom());
    }
} 
```

因此，正如我所说，我无法获得按钮的左侧位置，并且可以滚动到我的`HorizontalScrollView`. 这可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T11:22:07.293

> （始终为 0）

请记住，视图在方法中没有尺寸，`onCreate`因为它们在`onCreate`回调返回后被放置在屏幕上。

> 我在 MainActivity 中想要的是获取 Horizo​​ntalScrollView 内任何按钮的位置并滚动到该位置。

看看下面的代码（放在`onCreate`方法中）：

```
 final HorizontalScrollView MenuScroll = (HorizontalScrollView) findViewById(R.id.MenuScroll);

    MenuScroll.post(new Runnable() {

        @Override
        public void run() {
            final Button button3 = (Button) findViewById(R.id.button3);
            int scrollTo = 0;
            final int count = ((LinearLayout) MenuScroll.getChildAt(0))
                    .getChildCount();
            for (int i = 0; i < count; i++) {
                final View child = ((LinearLayout) MenuScroll.getChildAt(0))
                        .getChildAt(i);                 
                if (child != button3) {
                    scrollTo += child.getWidth();
                } else {
                    break;
                }
            }
            MenuScroll.scrollTo(scrollTo, 0);
        }

    }); 
```

还要小心您在布局中使用的属性（我指的是`layout_gravity`如果我没记错的话可能会导致问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-21T11:12:01.033

可以直接这样做：

```
scrollTo = button3.getLeft(); 
```

# mysql - 查询需要很长时间才能执行大约 120 秒

> ID：15220234
> 
> 赞同：0
> 
> 时间：2013-03-05T09:31:23.593
> 
> 标签：mysql, sql, sql-server, performance

1.  我的查询需要很长时间才能执行大约 120 秒。
2.  任何人都可以帮助我重写这个查询。
3.  请从下面找到解释计划和表格结构。
4.  我们在慢速日志中经常收到此查询。

### 询问：

```
 select count(*) as col_0_0_  
   from tab4 tab3, 
        tab5 tab1, 
        tab6 tt2aghierar_ 
   where tab3.own_domain_id = 263 
     and tab3.id=tab1.resource_id  
     and tab1.hierarchy_id = 18 
     and tab2.id=tab1.pattern_id; 
```

### 解释计划：

```
 +----+-------------+--------------+--------+----------------------------------------------------------+---------------------+---------+----------------------------------+--------+-------------+
   | id | select_type | table        | type   | possible_keys                                            | key                 | key_len | ref                              | rows   | Extra       |
   +----+-------------+--------------+--------+----------------------------------------------------------+---------------------+---------+----------------------------------+--------+-------------+
   |  1 | SIMPLE      | tab1 | ref    | hierarcyHierarchyId,domain_id_hierarchy_id_resource_type | hierarcyHierarchyId | 4       | const                            | 111456 |             |
   |  1 | SIMPLE      | tab2 | eq_ref | PRIMARY                                                  | PRIMARY             | 4       | comp1.tab1.pattern_id  |      1 | Using index |
   |  1 | SIMPLE      | tab3   | ref    | id,own_domain_id                                         | id                  | 4       | comp1.tab1.resource_id |      1 | Using where |
   +----+-------------+--------------+--------+----------------------------------------------------------+---------------------+---------+----------------------------------+--------+-------------+
   3 rows in set (1.62 sec) 
```

### 表结构：

```
 mysql> show create table tab4\G
   *************************** 1\. row ***************************
          Table: tab4
   Create Table: CREATE TABLE `tab4` (
     `id` int(11) NOT NULL AUTO_INCREMENT,
     `keyword_name` varchar(255) DEFAULT NULL,
     `keyword_value` varchar(255) DEFAULT NULL,
     `type` int(11) DEFAULT NULL,
     `description` varchar(2000) DEFAULT NULL,
     `own_domain_id` int(11) DEFAULT NULL,
     `rank_check` int(11) DEFAULT NULL,
     `rank1` int(11) DEFAULT NULL,
     `rank2` int(11) DEFAULT NULL,
     `rank3` int(11) DEFAULT NULL,
     `yesterday_entrances` int(11) DEFAULT NULL,
     `week_entrances` int(11) DEFAULT NULL,
     `current_ctr` float(16,4) DEFAULT NULL,
     `monthly_search_volume` int(11) DEFAULT NULL,
     `avg_monthly_search_volume` int(11) DEFAULT NULL,
     `traffic_increase` int(11) DEFAULT NULL,
     `rank_improvement` int(11) DEFAULT NULL,
     `rank_update_date` date DEFAULT NULL,
     `top_rank_targeturl_id` int(11) DEFAULT NULL,
     `frequency` int(10) DEFAULT '1',
     `score` float DEFAULT NULL,
     `create_date` datetime DEFAULT NULL,
     `bing_rank1` int(10) DEFAULT NULL,
     `bing_rank2` int(10) DEFAULT NULL,
     `yesterday_bing_entrances` int(11) DEFAULT NULL,
     `bing_rank_improvement` int(11) DEFAULT NULL,
     KEY `id` (`id`),
     KEY `keyword_name` (`keyword_name`),
     KEY `own_domain_id` (`own_domain_id`,`rank_check`),
     KEY `rank_check` (`rank_check`)
   ) ENGINE=InnoDB AUTO_INCREMENT=720988063 DEFAULT CHARSET=utf8
   /*!50100 PARTITION BY RANGE (`rank_check`)
   (PARTITION p0 VALUES LESS THAN (0) ENGINE = InnoDB,
    PARTITION p1 VALUES LESS THAN (1) ENGINE = InnoDB,
    PARTITION p2 VALUES LESS THAN (2) ENGINE = InnoDB,
    PARTITION pEOW VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
   1 row in set (0.03 sec)

   mysql> show create table tab5\G
   *************************** 1\. row ***************************
          Table: tab5
   Create Table: CREATE TABLE `tab5` (
     `id` int(10) NOT NULL AUTO_INCREMENT,
     `domain_id` int(10) NOT NULL DEFAULT '0',
     `hierarchy_id` int(10) NOT NULL DEFAULT '0',
     `resource_id` int(10) NOT NULL DEFAULT '0',
     `resource_type` int(10) NOT NULL DEFAULT '0',
     `pattern_id` int(10) NOT NULL,
     `top_hierarchy_id` int(11) NOT NULL,
     PRIMARY KEY (`id`),
     UNIQUE KEY `domain_id_resource_id_resource_type_top_hierarchy_id` (`domain_id`,`resource_id`,`resource_type`,`top_hierarchy_id`),
     KEY `hierarcyHierarchyId` (`hierarchy_id`),
     KEY `domain_id_hierarchy_id_resource_type` (`resource_id`,`hierarchy_id`)
   ) ENGINE=MyISAM AUTO_INCREMENT=126564587 DEFAULT CHARSET=utf8
   1 row in set (0.00 sec)

   mysql> show create table tab6\G
   *************************** 1\. row ***************************
          Table: tab6
   Create Table: CREATE TABLE `tab6` (
     `id` int(10) NOT NULL AUTO_INCREMENT,
     `pattern` varchar(500) NOT NULL DEFAULT '0',
     `hierarchy_id` int(10) NOT NULL DEFAULT '0',
     `match_level` int(10) NOT NULL DEFAULT '0',
     `create_date` datetime DEFAULT NULL,
     `flg` int(10) DEFAULT NULL,
     `is_regular_expression` int(2) DEFAULT NULL,
     `is_case_sensitive` int(2) DEFAULT NULL,
     PRIMARY KEY (`id`),
     KEY `hierarchy_id` (`hierarchy_id`)
   ) ENGINE=MyISAM AUTO_INCREMENT=2293 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:45:26.473

您可能想尝试此查询而不是进行完全连接：

```
select count(*) as col_0_0_  
from tab4 tab3
inner join tab5 tab1
    on tab3.id = tab1.resource_id
inner join tab6 tab2
    on tab2.id = tab1.pattern_id
where 
    tab3.own_domain_id = 263 
    and tab1.hierarchy_id = 18 
```

此外，您可能需要以下列为索引：

```
tab4.own_domain_id
tab5.hierarchy_id
tab5.resource_id
tab5.pattern_id 
```

# mysql - 需要帮助从 wpf 数据网格更新 mysql 数据库使用双向绑定使用提交命令

> ID：15220238
> 
> 赞同：0
> 
> 时间：2013-03-05T09:31:34.507
> 
> 标签：mysql, c#-4.0, wpfdatagrid

基本上我是 C# 和 WPF 的新手，

我有一个与 DataTable 绑定的 WPF DataGrid

这里是 DataGrid 的 XAML

```
<DataGrid AutoGenerateColumns="True" CanUserAddRows="False" HorizontalAlignment="Left" 
           ItemsSource="{Binding Path=., Mode=TwoWay}" 
           Margin="10,99,0,56" Name="dataGrid1" 
           SelectionUnit="CellOrRowHeader" Width="1044">  
</DataGrid> 
```

这里是另一个类的公共方法，用于将 MySQL 数据加载到 DataTable

```
public DataTable dtQueries(string userQuery, string cnString = null)
{
    //##Open the connection
    if (cnString == null)
    {
        this.open_connection("localConnectionString");
    }
    else
    {
        this.open_connection(cnString);
    }

    //##Create Command
    MySqlCommand cmd = new MySqlCommand(userQuery, mysqlConn);

    //##Create a data reader and Execute the command

    DataTable table = new DataTable();
    MySqlDataAdapter da = new MySqlDataAdapter(cmd);
    da.Fill(table);

    return table;
} 
```

这里是将 DataTable 绑定到 DataGrid 的代码

```
DataSet ds = new DataSet();
string qGetDM = "SELECT * FROM mytable";

dataGrid1.BeginInit();

ds.Tables.Add(dboperation.dtQueries(qGetDM, "clientLegacyDM"));
dataGrid1.DataContext = ds.Tables[0];

dataGrid1.Items.Refresh();
dataGrid1.EndInit(); 
```

我有一个命令按钮作为 SubmitButton，可以根据 DataGrid 中的用户更改来更新 MySQL 数据库。

任何人有建议如何做到这一点？

thx，我真的很感谢任何帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:07:57.917

我想我解决了我自己的问题，这个解决方案可能不是最好的解决方案，但至少它对我有用。

**XAML**

```
<DataGrid AutoGenerateColumns="True" CanUserAddRows="False" HorizontalAlignment="Left" 
        ItemsSource="{Binding Path=., Mode=TwoWay}" 

        Margin="10,99,0,56" Name="dataGrid1" SelectionUnit="CellOrRowHeader" 
        Width="1044" 
</DataGrid> 
```

接下来，我重新创建

> 另一个类的公共方法将 MySQL 数据加载到 DataTable

现在我在`DataSet`这里使用的是方法，让我们命名这个类`MySQLOp`

```
public MySqlDataAdapter mysqlDA; //Member variable of class "MySQLOp"
public DataSet mysqlDS; //Member variable of class "MySQLOp"

//public method to return user query as a DataSet
public DataSet dsQueries(string userQuery, string cnString = null)
{
    //##Open the connection
    if (cnString == null)
    {
        this.open_connection("localConnectionString");
    }
    else
    {
        this.open_connection(cnString);
    }

    //##Create Command
    MySqlCommand cmd = new MySqlCommand(userQuery, mysqlConn);
    mysqlDA = new MySqlDataAdapter(cmd);

    mysqlDS = new DataSet();

    mysqlDA.Fill(mysqlDS);

    return mysqlDS;

} 
```

在 wpf 窗口上，我们将其命名为“FormCRUD”，我创建一个`commandbutton`来加载数据，代码如下：

```
MySQLOp dboperation;
public yourForm()
{
    InitializeComponent();

    dboperation = new MySQL();
}

private void btnClLoad_Click(object sender, RoutedEventArgs e)
{
    string tablename = "your_table_name";
    qGetDM = "SELECT * FROM " + tablename;

    //#### Bind the DataSet to the GridView ####
    dataGrid1.BeginInit();

    //## Get Clien Data and return as DataSet
    dboperation.dsQueries(qGetDM, "clientLegacyDM");

    //## Set DataGrid ItemSource
    dataGrid1.SetBinding(ItemsControl.ItemsSourceProperty, new Binding
    {
        Source = dboperation.mysqlDS.Tables[0]
    });
    dataGrid1.Items.Refresh();
    dataGrid1.EndInit();

} 
```

在 上`MySQLOp class`，我创建了另一种方法来保存`DataSet`以保存回 MySQL DB，方法如下：

```
public DataSet CreateCommandAndUpdate()
{            
    MySqlCommandBuilder myBuilder = new MySqlCommandBuilder(mysqlDA);
    mysqlDA.Update(mysqlDS);
    return mysqlDS;
} 
```

最后，我添加了另一个`commandbutton`作为`FormCRUD`，`SubmitUpdate`将数据更改提交回调用`CreateCommandAndUpdate()`方法的数据库，代码如下

```
private void btnClUpdate_Click(object sender, RoutedEventArgs e)
{
    dboperation.CreateCommandAndUpdate();
} 
```

对我来说这只是一个临时解决方案，我仍在寻找最佳和优雅的解决方案。也许你可以给我另一个解决方案。

# android - Android 上的 Chrome 不尊重链接点击的 z-index

> ID：15220242
> 
> 赞同：5
> 
> 时间：2013-03-05T09:31:41.357
> 
> 标签：android, css, google-chrome, mobile, z-index

**HTML**

```
<div class="container">

    <div class="child">
        <a href="http://www.google.com" target="_blank">Google</a>
    </div>
</div>
<a href="http://www.yahoo.com" target="_blank" class="y">Yahoo</a> 
```

**CSS**

```
.container{position: relative;display: block;width: 100px;height: 30px;background: #000;z-index: 7;}
.child{position: absolute;width: 100px;height: 100px;background: #CCC;padding-top: 30px;z-index:9;top: -999px;}
.child a{display: block;}
.container:hover .child{display: block;top: 0;}
.y{z-index: 6;} 
```

工作示例：http: [//jsfiddle.net/DemjR/6/](http://jsfiddle.net/DemjR/6/)

我在上面的例子中创建了 CSS 悬停菜单（在链接中），奇怪的是它没有像在 android 设备中的 chrome（v 25.0.1364.123）中那样工作。但它在我测试过的所有其他设备（ios、windows、mac等）中都能正常工作

问题是（在 android 中）：当您将​​鼠标悬停在黑框上时，会出现一个灰色 div，其中包含一个链接（google.com）。

当您单击该链接时，它实际上会触发 (yahoo.com) 而不是 (google.com) 后面的链接

这是 android 设备中的 chrome 错误吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:57:40.190

这似乎是 Android 上 Chrome 的 M25 中的一个错误，我向工程团队提出了一个问题。关注[https://code.google.com/p/chromium/issues/detail?id=180194](https://code.google.com/p/chromium/issues/detail?id=180194)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T12:24:23.633

Chrome，在这种情况下是在点击之前触发 mouseOUT ！

这是另一个显示 DIV 上的 HOVER 事件以及 LINKS 上的点击事件的小提琴：

[http://fiddle.jshell.net/gnv9n/18/](http://fiddle.jshell.net/gnv9n/18/) <-- 这应该适用于所有浏览器。仅使用 webkit 转换，因为您的问题仅发生在 Chrome 上。

如果添加css3过渡，点击触发正确！这是一种丑陋的修复，但它有效。

如果您希望 Chrome 在“悬停”之前无法点击，请尝试删除 css 转换并查看事件

感谢 Kinlan 将问题提交给 Chrome 团队！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T06:12:05.807

我想对 Anthony Gatti 的回答发表评论，但我没有足够的声誉：

比设置更好的选择`-website-transition-duration`是设置`-website-transition-delay`。

示例： http: [//fiddle.jshell.net/gnv9n/28/](http://fiddle.jshell.net/gnv9n/28/)

# jquery - 引用动态创建的元素

> ID：15220244
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:31:42.773
> 
> 标签：jquery

考虑以下代码

```
var $div = $('<div/>');

$('#blah').after($div); 
```

这行得通。但是，我想将其设为单线。像这样的东西：

```
var $div = $('<div/>')
                .closest('#wrapper')
                .find('#blah')
                .after(this); //<-- point to the div element 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:43:03.037

您是否考虑过使用该[**`insertAfter(target)`**](http://api.jquery.com/insertAfter/)方法？它返回原始的 jQuery 对象，而不是目标。

```
var $div = $('<div />').insertAfter('#blah'); 
```

## [jsFiddle 演示](http://jsfiddle.net/GeekyEggo/K3btf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:36:15.803

尝试添加 end();

```
var $div = $('<div/>')
                .find('#blah').end()
                .after(this); 
```

# android - 从另一个线程更改 UI

> ID：15220246
> 
> 赞同：0
> 
> 时间：2013-03-05T09:31:44.110
> 
> 标签：android, multithreading, user-interface

更新：我更新了一些日志输入，而不是你的帮助。

我正在应用以下代码：

```
@Override
public void run() {

     byte[] bytes = null;

     int TIMEOUT = 5000;

     int status = connection.bulkTransfer(ep, bytes, ep.getMaxPacketSize(), TIMEOUT);

     Log.d(TAG, "status: " + status);

     write_to_screen( bytes );

}

public void write_to_screen( byte[] bytes  ) {

    Log.d(TAG, "bytes: " + bytes);

    String str_non_final = null;

    try {

        str_non_final = new String( bytes, "UTF-8");
        Log.d(TAG, "str_non_final : " + str_non_final );

    } catch (UnsupportedEncodingException e) {

        e.printStackTrace();

    }   

    final String str = str_non_final;

    Log.d(TAG, "str: " + str);

    runOnUiThread(new Runnable() {@Override public void run()
    {
       textView7.setText( str );
       Log.d(TAG, "UI updated");
    }
    });

} 
```

logcat的结果如下：

D/EthernetActivity(15721)：打开成功

D/EthernetActivity(15721)：状态：-1

D/EthernetActivity(15721)：字节：空

所以在我看来，问题出在“str_non_final = new String(bytes, "UTF-8");”中。这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:06:42.317

在这份声明中

```
str_non_final = new String( bytes, "UTF-8"); 
```

您正在使用字节，并且在您的 logcat 中打印为空。所以它会抛出，`NullPointerException`而你的捕获只能处理`UnsupportedEncodingException`。

确保`bytes`在调用之前不应该为空

```
write_to_screen( bytes ); 
```

# javascript - JQuery Animate 背景位置 跨浏览器

> ID：15220251
> 
> 赞同：5
> 
> 时间：2013-03-05T09:31:53.390
> 
> 标签：javascript, jquery, html

似乎无法使其正常工作：

```
$("#animation").animate({backgroundPosition:"-100px 10px"}); 
```

我试过这个它有效，但不适用于 FFox：

```
$('#animation').animate({
  'background-position-x': '10%',
  'background-position-y': '20%'
}, 10000, 'linear'); 
```

分区：

```
<div id="animation" style="border: 0px solid rgb(153, 153, 153); margin: auto; width:550%;height: 100%;background-size:100% 100%; overflow:hidden; padding: 0px; background-image: url(images/pano.png); background-attachment: scroll; box-shadow: rgb(0, 0, 0) 0px 0px 40px inset; background-position: 180px 0px; background-repeat: no-repeat;display: none;"></div> 
```

JsFiddle： http: [//jsfiddle.net/sorfect/34psJ/1/](http://jsfiddle.net/sorfect/34psJ/1/) 我正在使用 JQuery 1.8。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T12:36:37.883

好的，所以如果您只想为`x`位置设置动画，那么您很幸运，因为动画`y`for`background-position`在 jQuery 中不起作用。所以`x`使用：

```
'background-position': '10%' 
```

但是如果你想增加位置以便为一系列帧设置动画，你需要增加：

```
'background-position': '+=10%' 
```

请参阅我的[jsFiddle](http://jsfiddle.net/raad/34psJ/3/)以获取带有停止/开始控件的工作示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T11:08:29.063

我认为[这会对你有所帮助](https://stackoverflow.com/questions/9653685/is-background-position-x-background-position-y-a-standard-w3c-css-property)，[这也是](https://stackoverflow.com/questions/13948617/backgroundpositionx-not-working-on-firefox)为什么它不能在 Firefox 中工作。我正在处理你的代码。以下代码块的行为方式与您的代码相同。

这种行为方式相同

```
$(document).ready(function() {
  $('#animation').animate({'background-position': '10%'}, 10000, 'linear');
}); 
```

到

```
$('#animation').animate({
 'background-position-x': '10%',
  'background-position-y': '20%'
}, 10000, 'linear'); 
```

这个代码块也可以在 Firefox 中运行。

```
 $(document).ready(function() {
    $('#animation').animate({'background-position': '10%'}, 10000, 'linear');
 }); 
```

如需进一步参考，只需检查上面给出的链接。这些会帮助你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-19T09:26:04.290

您可以使用此代码沿 x 和 y 方向为背景位置设置动画，并且 CPU 成本更低

```
var x=0;
window.setInterval(function(){
$('#animation').css('background-position',x+'px '+x+'px');
x=(x-4)%1100;//1100 is width of background image in px
},70); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-29T13:01:39.600

为什么不试试 Keith Wood 的[jQuery 背景位置动画插件](http://keith-wood.name/backgroundPos.html)？几年前，当我迟到一个项目并需要一个背景动画解决方案并且没有时间调查我的代码跨浏览器失败的原因时，我最终使用了它（又快又脏 - 嘿，最后期限迫在眉睫大！）老实说，它是我不断回归的少数插件之一。

链接页面上有示例，所以我不会费心重复它们，但向 Wood 先生致敬，因为他的插件从未让我失望。

# c# - C# 面板不可见

> ID：15220256
> 
> 赞同：4
> 
> 时间：2013-03-05T09:32:05.107
> 
> 标签：c#, winforms, panel

我有一个主菜单，当我单击其中一个按钮时，菜单面板应该隐藏并且单击的那个应该打开。这适用于一个按钮，但对于我的第二个按钮不起作用。好吧，它显示了我猜的面板，但它是空的，即使我在面板中有一些东西。

代码很简单，所以我看不出问题出在哪里

```
public Form1()
{
        InitializeComponent();
        menu_botStrip.Text = DateTime.Now.ToString("dd/mm/yyyy h:mm tt");
        panel_startMenu.Show();
        panel_informationService.Hide();
        panel_customerManagement.Hide();
}

private void btn_informationService_Click(object sender, EventArgs e)
{
    panel_startMenu.Hide();
    panel_informationService.Show();
}

    private void btn_customerManagement_Click(object sender, EventArgs e)
    {

        panel_startMenu.Hide();
        panel_customerManagement.Show();
    } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-05T09:37:44.970

确保您没有将第二个面板放在第一个面板内。如果您从工具箱中拖动面板，则很有可能发生这种情况。

为确保，打开`Document Outline`窗口（查看->其他窗口->文档大纲），查看面板之间的关系。确保它们不包含在彼此中。它们必须处于同一嵌套级别。

如果是这样：

![错误的](../Images/c02f4cd17d6f6b9048fbdb9a7fb7cc27.png)

然后选择内部面板并按窗口上方的左箭头按钮。然后它应该看起来像：

![正确的](../Images/d26c847f518e21b1778b4e5da4e0ee10.png)

这是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:36:53.753

不应该再次隐藏第一个面板（信息服务）吗？如果两者同时显示，可能会有一个难看的叠加层......

```
private void btn_informationService_Click(object sender, EventArgs e)
{
    panel_startMenu.Hide();
    panel_customerManagement.Hide();
    panel_informationService.Show();
}

private void btn_customerManagement_Click(object sender, EventArgs e)
{
    panel_startMenu.Hide();
    panel_informationService.Hide();
    panel_customerManagement.Show();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-05T20:13:30.877

我同意@MD.Unicorn，您必须小心在表单上订购这些面板（图层上下文）。这意味着如果您的面板包含另一个面板或多个面板 - 在隐藏特定父级后，您将隐藏所有子组件。

# java - 如何创建圆形水平滚动视图

> ID：15220259
> 
> 赞同：1
> 
> 时间：2013-03-05T09:32:16.697
> 
> 标签：java, android, image, scroll

我需要做的是在屏幕中间创建一个水平管道，其中正在填充图像。它就像一个移动的水平寻呼机。

困难在于我仍在寻找将水平滚动作为圆形图像滑块的想法。

但是，当它显示最后一张图像时，第一个应该在队列中的下一个。

任何人都可以提供任何逻辑来这样做。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:43:12.107

抱歉，没有可用的标准小部件，您需要获得一些您需要的开源实现。你可以在网上找到可能，挑一个体面记录的作品就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:10:36.297

您最好的选择是实施画廊（或 EcoGallery，如果您在网上找到它）或寻呼机。

对于该 ViewGroup，您将使用 CustomAdapter 扩展 BaseAdapter 但使用`ArrayList<>`保存您的数据。对于`getCount()`应该返回`Integer.MAX_VALUE`。一旦您调用`setAdapter()`ViewGroup，您还应该调用`setCurrent(Integer.MAX_VALUE/2);`（或类似的东西，实际上取决于您将使用哪个 ViewGroup。

最后，在您的 getView 中，您应该放置`while(position > mArray.size()) position = position - mArray.size();`然后您可以正常生成视图。

这不会是一个真正的循环（因为用户可能会以 0 或 Integer.MAX_VALUE 结束，但用户很难做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:47:18.380

只需在滑动图像时到达最后一个索引时将您的数组索引设置为零。

# oracle - Oracle 数据库：查询结果的顺序

> ID：15220260
> 
> 赞同：0
> 
> 时间：2013-03-05T09:32:16.777
> 
> 标签：oracle, oracle10g

假设有一个包含列的表：Id（主键）、myTime、myName

然后执行查询：

```
select * from mytable order by myTime 
```

但是在 myTime 中有几个具有相同值的条目。使用哪个顺序排列结果？我在几台机器上试过这个例子，结果不同。根据机器的不同，具有相同 myTime 值的结果排序不同（尽管两台机器都使用相同版本的 Oracle DDBB 10g）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:10:48.433

顺序将取决于表的访问方法，可能还有排序算法，但通常（我认为并非总是如此）你会看到隐式排序顺序将是 rowid 如果索引已经用于提供排序顺序。如果使用完整扫描和排序，那么我不想猜测。

如果需要确定性排序顺序，请按主键或唯一键添加顺序。在您有一个分页的应用程序的某些情况下，ROWID 的二级排序顺序可能会有所帮助。

# java - TestNG 报告中的自定义测试方法名称

> ID：15220262
> 
> 赞同：24
> 
> 时间：2013-03-05T09:32:23.360
> 
> 标签：java, testng

我正在开发一个需要以编程方式调用 TestNG（使用数据提供程序）的项目。一切都很好，只是在报告中，我们得到了 @Test 方法的名称，它是处理许多情况的通用方法。我们想要的是在报告中获得一个有意义的名称。

我正在研究这个并找到了 3 种方法，但不幸的是，对我来说都失败了。

**1) 实施 ITest**

我在[这里](https://groups.google.com/forum/?fromgroups=#!topic/testng-users/a6v0PkSVmM0)和[这里找到了这个](https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703)

我在输入@Test 方法后立即设置我想要的名称（对于我尝试的所有 3 种方法，这就是我设置名称的方式）。这个名称是从 getTestName() 返回的。我观察到的是 getTestName() 在我的@Test 之前和之后被调用。最初，它返回 null（为了处理 NullPointerException，我返回 "" 而不是 null），后来它返回正确的值。但我没有看到这反映在报告中

**编辑**：还尝试按照 artdanil 的建议从@BeforeMethod 设置名称

**2 和 3**

两者都基于[上面第二个链接中给出的解决方案](https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703)

通过在 XmlSuite 中覆盖 setName，我得到了

```
Exception in thread "main" java.lang.AssertionError: l should not be null
        at org.testng.ClassMethodMap.removeAndCheckIfLast(ClassMethodMap.java:58)
        at org.testng.internal.TestMethodWorker.invokeAfterClassMethods(TestMethodWorker.java:208)
        at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:114)
        at org.testng.TestRunner.privateRun(TestRunner.java:767)
        ... 
```

通过覆盖 toString()，我在日志中看到了这些（带有我的评论），但在报告中没有更新

```
[2013-03-05 14:53:22,174] (Main.java:30) - calling execute 
    [2013-03-05 14:53:22,346] GenericFunctionTest.<init>(GenericFunctionTest.java:52) - inside constructor
    [2013-03-05 14:53:22,372] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//this followed by 3 invocations before arriving at @Test method**
    [2013-03-05 14:53:22,410] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning 
    [2013-03-05 14:53:22,416] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning 
    [2013-03-05 14:53:22,455] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning 
    [2013-03-05 14:53:22,892] GenericFunctionTest.<init>(GenericFunctionTest.java:52) - inside constructor 
    [2013-03-05 14:53:23,178] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//again blank as i havent set it yet**
    [2013-03-05 14:53:23,182] GenericFunctionTest.getResult(GenericFunctionTest.java:69) - inside with test case:TestCase{signature=Signature{...}}**//I am setting it immedietely after this**
    [2013-03-05 14:53:23,293] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **//What i want**
    [2013-03-05 14:53:23,299] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **// again** 
```

**编辑：**通过硬编码一个值而不是在我的测试方法条目中设置它，再次尝试所有 3 个。但同样的结果

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T21:37:42.540

我遇到了同样的问题，发现在使用 注释的方法中设置存储测试用例名称的字段`@BeforeMethod`，使用[TestNG的本机注入](http://testng.org/doc/documentation-main.html#native-dependency-injection)来提供方法名称和测试参数是有帮助的。测试名称取自`DataProvider`. 如果您的测试方法没有参数，只需报告方法名称即可。

```
//oversimplified for demontration purposes
public class TestParameters {
    private String testName = null;
    private String testDescription = null;

    public TestParameters(String name,
                          String description) {
        this.testName = name;
        this.testDescription = description;
    }

    public String getTestName() {
        return testName;
    }
    public String getTestDescription() {
        return testDescription;
    }
}

public class SampleTest implements ITest {
    // Has to be set to prevent NullPointerException from reporters
    protected String mTestCaseName = "";

    @DataProvider(name="BasicDataProvider")
    public Object[][] getTestData() {
        Object[][] data = new Object[][] {
                { new TestParameters("TestCase1", "Sample test 1")},
                { new TestParameters("TestCase2", "Sample test 2")},
                { new TestParameters("TestCase3", "Sample test 3")},
                { new TestParameters("TestCase4", "Sample test 4")},
                { new TestParameters("TestCase5", "Sample test 5") }
        };
        return data;
    }

    @BeforeMethod(alwaysRun = true)
    public void testData(Method method, Object[] testData) {
        String testCase = "";
        if (testData != null && testData.length > 0) {
            TestParameters testParams = null;
            //Check if test method has actually received required parameters
            for (Object testParameter : testData) {
                if (testParameter instanceof TestParameters) {
                    testParams = (TestParameters)testParameter;
                    break;
                }
            }
            if (testParams != null) {
                testCase = testParams.getTestName();
            }
        }
        this.mTestCaseName = String.format("%s(%s)", method.getName(), testCase);
    }

    @Override
    public String getTestName() {
        return this.mTestCaseName;
    }

    @Test(dataProvider="BasicDataProvider")
    public void testSample1(TestParameters testParams){
        //test code here
    }

    @Test(dataProvider="BasicDataProvider")
    public void testSample2(TestParameters testParams){
        //test code here
    }

    @Test
    public void testSample3(){
        //test code here
    }
} 
```

**编辑：**根据下面的评论，我意识到报告中的样本会很有用。

从上面运行代码的报告中提取：

```
<testng-results skipped="0" failed="0" total="5" passed="5">
  <suite name="SampleTests" duration-ms="2818" started-at="<some-time>" finished-at="<some-time>">
    <test name="Test1" duration-ms="2818" started-at="<some-time>" finished-at="<some-time>">
        <test-method 
            status="PASS" 
            signature="testSample1(org.example.test.TestParameters)[pri:0, instance:org.example.test.TimeTest@c9d92c]"
            test-instance-name="testSample1(TestCase5)"
            name="testSample1" 
            duration-ms="1014"
            started-at="<some-time-before>" 
            data-provider="BasicDataProvider" 
            finished-at="<some-time-later>" >
            <!-- excluded for demonstration purposes -->
        </test-method>
        <!-- the rest of test results excluded for brevity -->
    </test>
  </suite>
</testng-result> 
```

请注意，`getTestName()`方法返回的值在`test-instance-name`属性中，而不是在`name`属性中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-11T18:49:48.293

我遇到了类似的问题。首先，我实施了已经提到的 ITest 策略。这是解决方案的一部分，但不是完全的。

出于某种原因，TestNG 在构建不同的报告时，会在构建报告时在测试上调用 getName()。如果您不使用数据提供程序来生成不同的运行并使用 ITest 策略为每次运行设置唯一名称，这很好。如果您使用数据提供程序来生成同一测试的多次运行并希望每次运行都有一个唯一的名称，那么就会出现问题。由于 ITest 策略将测试名称保留为上次运行设置的名称。

所以我必须实现一个非常自定义的 getName()。一些假设（在我的特定情况下）：

> 1.  只运行三个报告：TestHTMLReporter、EmailableReporter、XMLSuiteResultWriter。
> 2.  如果由于其中一位假定的记者没有调用 get name ，那么返回当前设置的名称就可以了。
> 3.  当记者运行时，它会按顺序调用 getName()，每次运行只调用 1 次。

```
public String getTestName()
{
    String name = testName;
    StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();//.toString();
    if(calledFrom(stackTrace, "XMLSuiteResultWriter"))
    {
        name = testNames.size()>0?testNames.get(xmlNameIndex<testNames.size()?xmlNameIndex:0):"undefined";
        xmlNameIndex++;
        if(xmlNameIndex>=testNames.size())
            xmlNameIndex = 0;
    }
    else if(calledFrom(stackTrace, "EmailableReporter"))
    {
        name = testNames.size()>0?testNames.get(emailNameIndex<testNames.size()?emailNameIndex:0):"undefined";
        emailNameIndex++;
        if(emailNameIndex>=testNames.size())
            emailNameIndex = 0;
    }
    if(calledFrom(stackTrace, "TestHTMLReporter"))
    {
        if(testNames.size()<0)
        {
            name = "undefined";
        }
        else
        {
            if(htmlNameIndex < testNamesFailed.size())
            {
                name = testNamesFailed.get(htmlNameIndex);
            }
            else
            {
                int htmlPassedIndex = htmlNameIndex - testNamesFailed.size();
                if(htmlPassedIndex < testNamesPassed.size())
                {
                    name = testNamesPassed.get(htmlPassedIndex);
                }
                else
                {
                    name = "undefined";
                }
            }
        }
        htmlNameIndex++;
        if(htmlNameIndex>=testNames.size())
            htmlNameIndex = 0;
    }
    return name;
}

private boolean calledFrom(StackTraceElement[] stackTrace, String checkForMethod)
{
    boolean calledFrom = false;
    for(StackTraceElement element : stackTrace)
    {
        String stack = element.toString();
        if(stack.contains(checkForMethod))
            calledFrom = true;
    }
    return calledFrom;
} 
```

在为运行设置名称时（我在遵循 ITest 策略定义的 @BeforeMethod(alwaysRun=true) 方法中执行此操作）我将名称添加到 ArrayList testNames。但随后的 html 报告不正确。大多数其他报告按顺序提取信息，例如 XMLSuiteResultWriter，但 TestHTMLReporter 通过首先获取失败测试的所有名称，然后获取通过测试的名称来获取名称。所以我必须实现额外的 ArrayLists: testNamesFailed 和 testNamesPassed 并在测试完成时根据它们是否通过来添加测试名称。

我会坦率地承认，这在很大程度上是一种黑客行为，而且非常脆弱。理想情况下，TestNG 在运行时将测试添加到集合中，并从该集合而不是原始测试中获取名称。如果您有 TestNG 来运行其他报告，您将必须弄清楚他们请求名称的顺序以及在线程堆栈跟踪中搜索的足够独特的字符串是什么。

--编辑 1

或者，使用 ITest 策略和工厂模式（@factory 注释）。

[TestNG 使用 @Factory 和 @DataProvider](https://stackoverflow.com/questions/22915267/testng-using-factory-and-dataprovider)

[http://beust.com/weblog/2004/09/27/testngs-factory/](http://beust.com/weblog/2004/09/27/testngs-factory/)

它确实需要一些小的改动。这包括创建一个与原始测试方法具有相同参数的构造函数。测试方法现在没有参数。您可以在新构造函数中设置名称，然后在 getTestName 方法中简单地返回它。确保从测试方法中删除数据提供者规范。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-27T21:09:01.960

请在 TestNG 报告中找到以下代码以设置测试用例的自定义名称。

此代码中提供了以下功能。

*   多次在同一测试用例上动态执行
*   为报告设置自定义测试用例名称
*   设置多个测试用例执行的并行执行

    ```
    import java.lang.reflect.Field;
    import org.testng.ITest;
    import org.testng.ITestResult;
    import org.testng.Reporter;
    import org.testng.annotations.AfterMethod;
    import org.testng.annotations.DataProvider;
    import org.testng.annotations.Factory;
    import org.testng.annotations.Test;
    import org.testng.internal.BaseTestMethod;
    import com.test.data.ServiceProcessData;

    public class ServiceTest implements ITest {

    protected ServiceProcessData serviceProcessData;
    protected String testCaseName = "";

    @Test
    public void executeServiceTest() {
        System.out.println(this.serviceProcessData.toString());
    }

    @Factory(dataProvider = "processDataList")
    public RiskServiceTest(ServiceProcessData serviceProcessData) {
        this.serviceProcessData = serviceProcessData;
    }

    @DataProvider(name = "processDataList", parallel = true)
    public static Object[] getProcessDataList() {

        Object[] serviceProcessDataList = new Object[0];
        //Set data in serviceProcessDataList
        return serviceProcessDataList;
    }

    @Override
    public String getTestName() {

        this.testCaseName = "User custom testcase name";

        return this.testCaseName;
    }

    @AfterMethod(alwaysRun = true)
    public void setResultTestName(ITestResult result) {
        try {
            BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod();
            Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField("m_methodName");
            f.setAccessible(true);
            f.set(baseTestMethod, this.testCaseName);
        } catch (Exception e) {
            ErrorMessageHelper.getInstance().setErrorMessage(e);
            Reporter.log("Exception : " + e.getMessage());
        }
    }} 
    ```

    谢谢

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-01T23:37:29.290

如果您想更改 HTML 报告中的名称，那将是一个彻头彻尾的黑客攻击。我是这样做的：

```
public class NinjaTest {
...
...
@AfterMethod (alwaysRun = true)
public void afterMethod(ITestResult result, Method method) {
    try {
        //I have XML test suites organized in directories. 
        String xmlFile = result.getTestContext().getCurrentXmlTest().getSuite().getFileName();
        String suiteName = xmlFile.substring(xmlFile.lastIndexOf("\\") + 1, xmlFile.lastIndexOf(".xml"));
        String pathToFile = xmlFile.substring(0, xmlFile.lastIndexOf("\\") );
        String directory = pathToFile.substring(pathToFile.lastIndexOf("\\") + 1);
        String testMethodName = String.format("%s/%s - %s", directory, suiteName, method.getName());

        //Total hack to change display name in HTML report  ＼(^o^)／ 
        Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField("m_methodName");
        methodName.setAccessible(true);
        methodName.set(result.getMethod(), testMethodName);
    } catch (Exception e) {
        // Eh....  ¯\_(ツ)_/¯
        e.printStackTrace();
    }
}
...
... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-08T13:39:05.320

artdanil 的回答并没有完全解决我的问题，测试名称没有在电子邮件报告中更新。

@jersey-city-ninja 发布的答案确实更新了 Emailable 报告中的名称，但它为所有 Dataprovider 值重复了上次更新的测试名称，因为 Pilotg2 发布的内容对于使用 Dataprovider 的测试是正确的，即 getTestName 方法不断返回最后一组方法的名称和数据提供者的所有测试名称都相同。

**所以这里的答案**是@pilotg2 和@jersey-city-ninja 发布的答案的组合，以及克服重复方法名称的额外步骤。

**请注意**，这会更新 Emailable 报告、XML 报告、HTML 报告、Junit 报告中的测试名称。我没有看到它在更新 Eclipse - TestNg 执行视图 - 如果我发现了什么，将会更新

```
import org.testng.Assert;
import org.testng.ITest;
import org.testng.ITestContext;
import org.testng.ITestResult;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

public class NewDataProviderTest implements ITest {
    //The Java ThreadLocal class enables you to create variables that can only be read and written by the same thread
    private ThreadLocal<String> testName = new ThreadLocal<>();

    /*
    * TestNG, for some reason, when building different reports, calls getName() on the test while building the report.
    * This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.
    * If you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem.
    * As the ITest strategy returns the name for the test as the name set by the last run.
    * */
    private int emailNameIndex = 0;
    private int htmlNameIndex = 0;
    private int xmlNameIndex = 0;
    private ArrayList<String> allTests = new ArrayList<String>();
    /*
    * TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests
    * Hence keeping them in 2 separate lists
    * */
    private ArrayList<String> passedTests = new ArrayList<String>();
    private ArrayList<String> failedTests = new ArrayList<String>();

    @BeforeClass(alwaysRun = true)
    public void initialize() {
        this.testName.set("");
    }

    @BeforeMethod(alwaysRun = true)
    public void setCustomTestcaseName(Method method, Object[] testData) {
        //Set the default name
        this.testName.set(method.getName());
        //Change the test name only if Dataprovider is used
        //Check if data provider is used in the test
        if (testData != null && testData.length > 0) {
            System.out.println("\n\nParameters "+testData[0]+" are passed to the test - "+method.getName());
            //Taking 1st field in the Dataprovider for updating testname - can be changed as desired maybe using a variable
            //I'm changing the name only if the Dataprovider field is String
            if (testData[0] instanceof String) {
                //Taking 1st field in the Dataprovider for updating testname - can be changed as desired
                System.out.println("I'm setting custom name to the test as "+method.getName() + "_" + testData[0]);
                this.testName.set(method.getName() + "_" + testData[0]);
            }

        }
        //Add the name to the collection that stores all list names
        allTests.add(testName.get());

    }

     @AfterMethod (alwaysRun = true)
     public void setTheTestcaseNameInResult(ITestResult result, Method method) {
        //Fill the Passed and Failed tests collections
         try {
             if(result.getStatus() == ITestResult.SUCCESS) {
                 System.out.println("Adding "+ result.getTestName() + " to passed tests collection");
                 passedTests.add(result.getTestName());
             }
             if(result.getStatus() == ITestResult.FAILURE) {
                 System.out.println("Adding " + result.getTestName() + " to FAILURE tests collection");
                 failedTests.add(result.getTestName());
             }
         } catch (Exception e) {
             e.printStackTrace();
         }
         // To change display name in HTML report
         //Only changing the name if the parameter is instance of String
         if(iTestResult.getParameters().length > 0) {
             if (iTestResult.getParameters()[0] instanceof String) {
                 System.out.println("Updating the name as Parameters are passed to the test-"+method.getName());
                 try {
                     /* This helps in setting unique name to method for each test instance for a data provider*/
                     Field resultMethod = TestResult.class.getDeclaredField("m_method");
                     resultMethod.setAccessible(true);
                     resultMethod.set(iTestResult, iTestResult.getMethod().clone());

                     Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField("m_methodName");
                     methodName.setAccessible(true);
                     methodName.set(iTestResult.getMethod(), this.getTestName());
                 } catch (Exception e) {
                     e.printStackTrace();
                 }
                 System.out.println("New Name is - " + iTestResult.getMethod().getMethodName());

             }
         }
     }

    @Override
    public String getTestName() {
        String name = testName.get();
        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();// .toString();
        //This is called
        if (isCalledFromMethod(stackTrace, "XMLSuiteResultWriter")) {
            //System.out.println("Got called from XMLSuiteResultWriter");
            if (allTestNames.size() > 0) {
                if (xmlNameIndex < allTestNames.size()) {
                    name = allTestNames.get(xmlNameIndex);
                } else {
                    name = allTestNames.get(0);
                }
            } else {
                name = "undefined";
            }
            xmlNameIndex++;
            if (xmlNameIndex >= allTestNames.size()) {
                xmlNameIndex = 0;
            }
            // System.out.println("Got called from XMLSuiteResultWriter returning name - "+name);
        } else if (isCalledFromMethod(stackTrace, "EmailableReporter")) {
            if (allTestNames.size() > 0) {
                if (emailNameIndex < allTestNames.size()) {
                    name = allTestNames.get(emailNameIndex);
                } else {
                    name = allTestNames.get(0);
                }
            } else {
                name = "undefined";
            }
            emailNameIndex++;
            if (emailNameIndex >= allTestNames.size()) {
                emailNameIndex = 0;
            }
            System.out.println("Got called from EmailableReporter returning name -"+name);
        }
        if (isCalledFromMethod(stackTrace, "TestHTMLReporter")) {
            if (allTestNames.size() <= 0) {
                name = "undefined";
            } else {
                if (htmlNameIndex < failedTestNames.size()) {
                    name = failedTestNames.get(htmlNameIndex);
                } else {
                    int htmlPassedIndex = htmlNameIndex - failedTestNames.size();
                    if (htmlPassedIndex < passedTestNames.size()) {
                        name = passedTestNames.get(htmlPassedIndex);
                    } else {
                        name = "undefined";
                    }
                }
            }
            htmlNameIndex++;
            if (htmlNameIndex >= allTestNames.size()) {
                htmlNameIndex = 0;
            }
            System.out.println("Got called from TestHTMLReporter returning name - "+name);
        }
        System.out.println("Returning testname as-"+name);
        return name;
    }

    private boolean isCalledFromMethod(StackTraceElement[] stackTrace, String checkForMethod) {
        boolean calledFrom = false;
        for (StackTraceElement element : stackTrace) {
            String stack = element.toString();
            // System.out.println("Rohit the called from value is:"+stack);
            if (stack.contains(checkForMethod))
                calledFrom = true;
        }
        return calledFrom;
    }

  @Test(groups= {"L1", "L2", "L3"}, dataProvider = "dp1")
  public void dataProviderTest(String username) {
      System.out.println("\n\nI'm in dataProviderTest with data-"+username);
      /* Fail the test if value is L2 - deliberately so that we have failed test in report */ 
      if(username.contains("L2")) {
          Assert.fail();
      }

  }

  @Test(dependsOnMethods = "dataProviderTest", groups= {"L1", "L2", "L3"}, dataProvider = "dp1")
  public void dataProviderDependentTest(String username) {
      System.out.println("\n\nI'm in dataProvider DEPENDENT Test with data-"+username);

  }

  //This test consumes data of type list so the name will not be updated in report
  @Test(groups= {"L1", "L2", "L3"}, dataProvider = "dp2")
  public void dataListProviderTest(List<String[]> list) {
      Object[] arr = list.get(0);
        List<Object> arrList = Arrays.asList(arr);
        Iterator<Object> iterator = arrList.iterator();
        while (iterator.hasNext()) {

        String[] data = (String[]) iterator.next();
        System.out.println("In list test - "+data[0]);
        }    

  }

  @DataProvider(name="dp1")
  public Object[][] getDataForTest(ITestContext iTestContext){
      Object[][] L1 = new Object[][] {
          {"L1"}, {"L2"}, {"L3"}
      };

      return L1;
  }

  @DataProvider(name="dp2")
  public Object[][] getDataListForTest(ITestContext iTestContext){
      List<Object[][]> list = new ArrayList<Object[][]>();
      Object[][] L1 = new Object[][] {
          new String [] {"L1", "l1"}, 
          new String [] {"L1", "l1"}
      };

     list.add(L1);
      return new Object[][] { { list } };
  }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-05T00:03:28.710

Try implementing the org.testng.ITest interface that requires a getTestName() method. This way reporting handles the returned value properly.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-16T20:33:56.423

遇到同样的问题，我们就是这样解决的：

问题是所有 ITestResult 结果对象共享一个 ITestNGMethod 对象实例，因此当方法名称更改时，它会影响所有结果。

来自：org.testng.reporters.XMLSuiteResultWriter#getTestResultAttributes

```
 attributes.setProperty(XMLReporterConfig.ATTR_NAME, testResult.getMethod().getMethodName()); 
```

name 属性正在从 testResult.getMethod().getMethodName() 中读取

基本上我们为每个结果克隆了方法对象，因此每个结果都可以有一个独立的 getMethod()。

我们添加了这段代码：

```
 @AfterMethod(alwaysRun = true)
public void setResultTestName(ITestResult result, ITestContext context) {
    try {
        BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod().clone();

        String featureName = StringUtils.substringBetween(result.getParameters()[1].toString(), "[", "]");
        String scenarioName = result.getParameters()[0].toString().replace("\"", "");
        Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField("m_methodName");
        f.setAccessible(true);
        f.set(baseTestMethod, featureName + " - " + scenarioName);

        f = result.getClass().getDeclaredField("m_method");
        f.setAccessible(true);
        f.set(result, baseTestMethod);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# python - 如何使用 python 识别到套接字的两个不同连接？

> ID：15220264
> 
> 赞同：1
> 
> 时间：2013-03-05T09:32:37.960
> 
> 标签：python, sockets

我首先环顾四周，但找不到任何东西可以回答我的问题。

问题是我正在制作一个小聊天程序。在观看了一些教程并遵循了一些文档之后，我设法制作了一个像这样工作的聊天程序：

我有一个客户端和一个客户端/服务器。客户端/服务器基本上将自己设置为服务器，也可以回复客户端。

因此，它侦听用户标识的某个端口，然后接受客户端连接。

问题是我决定我想改变这一切。

而不是拥有客户端/服务器。我想要两个客户端和一个充当两个客户端之间的交换机的服务器。基本上将所有聊天都定向到连接的地址。

这是我有点难过的地方：

```
HOST = input("Please define the host IP, if over local, name 'localhost': ")
PORT = int(input("Please define the port to be communicated over: "))
if PORT == False:
    PORT = 4010

s = socket(AF_INET,SOCK_STREAM)#AF_INET and SOCK_STREAM are standard. 
s.bind((HOST,PORT))# The socket is being bound, or assigned, the ip of the server, as well as the communicating port.
s.listen(2)#Accepting only a single connection. EDIT: Now two connections.
conn,addr = s.accept()

print("\nNetwork activity from address: ",addr,)

# Section two: Communications Loop. 
```

问题是`s.listen(2)`已被编辑为采用 2 个连接，但是我应该如何管理不同的连接连接，或者为它们分配变量，以便我可以让交换机工作？

如果你发现这是一个重复的线程，请发布链接，我会看看我是否可以删除这个并先去那里阅读。（抱歉，我之前在这里发帖的经历很糟糕，（因为我不明白的原因投了反对票））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:43:55.393

listen 参数告诉你有多少连接可以挂起，而不是有多少将被接受。

您必须使用 select 模块，它允许您插入文件描述符列表并检查哪些已准备好输入或输出。

然后你会有一个打开的连接列表（最初是空的），加上 socket s，传递给 select，然后你应该读取数据，将其写入所有其他连接，并永远循环。

```
import select

connections = []

while True:
    rlist,wlist,xlist = select.select(connections + [s],[],[])
    for i in rlist:
        if i == s:
            conn,addr = s.accept()
            connections.append(conn)
            continue
        data = i.recv(1024)
        for q in connections:
            if q != i and q != s:
                q.send(data) 
```

这段代码没有考虑使用非阻塞模式的复杂性，所以一个慢客户端也会减慢所有其他客户端，但总的来说它应该可以工作。

# jquery - 用于分层缩进选择元素的 Jquery 插件？

> ID：15220275
> 
> 赞同：0
> 
> 时间：2013-03-05T09:33:10.883
> 
> 标签：jquery, html

我尝试使用正常的选择来做到这一点，但大多数浏览器不支持选项上的任何 css 样式这一事实意味着我不会走得太远，我真的没有时间设计自己的。

我要做的基本上是选择分层的文件夹结构，并具有某种缩进功能，无论是图像（首选以便我可以以某种方式绘制关系）或填充或类似的东西。

我已经找到了一些插件，但没有一个支持我所追求的缩进。

# iphone - 如何设置 MNColorPicker 的框架？

> ID：15220282
> 
> 赞同：0
> 
> 时间：2013-03-05T09:33:23.987
> 
> 标签：iphone, ipad, frame, uipopovercontroller, color-picker

我在我的通用 iOS 应用程序中使用 MNColorPicker。我在 iPad 的 UIPopoverController 中展示它，它工作正常。

现在我需要在 iPhone 中实现类似的功能，但由于 iPhone 不支持 UIPopoverController 我正在使用第三方弹出，如控件[CMPopTipView](https://github.com/chrismiles/CMPopTipView)。Hen 我在没有手动设置 MNColorPicker 大小的情况下呈现弹出框，然后它被正确呈现，但是对于 iPhone，弹出框的大小变得非常大，当我尝试更改 MNColorPicker 的大小时，它没有正确呈现。贝娄是相同的屏幕截图。

![不正确的弹出](../Images/72b3861be9b457ead49bc9bdf8750864.png)

请给我一些关于如何调整 MNColorPicker 大小以便它可以正确显示在 CMPopTipView 中的指示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:03:54.177

您可以使用 iPhone 的 BFColorPickerPopover 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:11:13.343

我更改了函数中给出的框架

```
- (void)_layoutViewsForInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation 
```

在 MNColorPicker 类中，它起作用了。

# javascript - 将javascript函数作为对象中的键是否完全有效？

> ID：15220292
> 
> 赞同：16
> 
> 时间：2013-03-05T09:33:49.067
> 
> 标签：javascript

将javascript函数作为对象中的键是否完全有效？

以下工作，但我不确定它是否 100% (ecma 或任何管理此的机构) 兼容

```
var f = function(){

};

var obj = {};

obj[f] = "a";

console.log(obj[f]); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T09:42:12.977

它看起来可以正常工作，但它可能无法按您的预期工作。

当用作键时，该函数被强制转换为字符串：

```
var f = function(a) { return a; };
var obj = {};
obj[f] = 'abc';
console.log(JSON.stringify(obj));
//"{"function (a) { return a; }":"abc"}"
console.log(f.toString());
//"function (a) { return a; }"
var f2 = function (a) { return a; };
console.log(obj[f2]);
//"abc" 
```

因此，函数 f 和 f2 是不同的对象，但在转换为字符串时它们是相同的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T09:41:59.723

这样做的理由**为零，因为 ECMAscript 中的***对象键*可能**只是**字符串（目前，在 ECMAscript 262 第 3 版和第 5 版中，按规范）。

然而，在*ECMAscript 6*中情况会发生变化，我们将拥有*WeakMaps*并且*对象键*也可以是*对象*（我不确定*函数引用*）。

即使浏览器现在可以通过*函数引用*来区分对象键，它肯定是有问题的行为，很可能是实验性的，现在不应该使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:48:39.233

```
var f = function(){

};
var obj = {};
obj[f] = "a";
console.log(obj['function (){\r\n\r\n}']); 
```

# jquery - 串行和并行运行函数

> ID：15220294
> 
> 赞同：3
> 
> 时间：2013-03-05T09:33:54.423
> 
> 标签：jquery, ajax

我有 3 个函数：**func1**、**func2**和**func3**。

**func1**和**func2**用于`load()`动态获取内容。

**func3在****func2**加载的内容上运行并在其上显示动画。

我希望**func1**和**func2**并行运行（以获得更好的性能），然后我希望**func3**在前两个完成后运行。

```
 var funcList = ['func1','func2'];
    $.each(funcList, function(i,v){
            window[v]();
    })
    func3(); 
```

我注意到**func3()**的动画没有运行可能是因为**func2**的内容还没有被获取。加载页面后，我从控制台运行**func3()**并且动画运行良好。为什么会这样？不是`each()`同步的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:37:48.193

那是因为`$.ajax`是异步的..到`func3`被调用的时候，不能保证其他两个ajax调用已经成功完成..你可以使用[$.when](http://api.jquery.com/jQuery.when/)来检查返回的promise，一旦这两个函数被解决，运行第三个功能。

试试这个

```
$.when(funcList).then(func3) 
```

例子

```
var func1=function(){
  return $.get('url',function(data){....});
}

var func2=function(){
  return $.get('url2',function(data){....});
}

function func3(){
  // animation here
}

$.when(func1(),func2()).then(func3) 
```

# matrix - 在 Mathematica 9 中制作一个具有数字范围排列的矩阵

> ID：15220299
> 
> 赞同：0
> 
> 时间：2013-03-05T09:34:08.087
> 
> 标签：matrix, wolfram-mathematica, permutation

我开始学习 Mathematica 9。我需要用数字范围的排列制作一个 nx4 矩阵“m”，其中第一列是矩阵“A”，第二、第三、第四列是矩阵“B”。此外，我需要排除第一行。有谁能够帮我？

```
`t = 2; a = Range[0, t]; b = Range[0, t]; c = Range[0, t];
{A = MatrixForm[
   1/Sqrt[Flatten[
      Table[a^2 + b^2 + c^2, {a, 0, t, 1}, {b, 0, t, 1}, {c, 0, t, 
        1}]]]],
 B = MatrixForm[Tuples[{a, b, c}]]}` 
```

我需要这样的东西：

```
List[List[0, 0, 1, 1], List[0, 0, 2, Rational[1, 4]], 
 List[0, 1, 0, 1], List[0, 1, 1, Rational[1, 2]], 
 List[0, 1, 2, Rational[1, 5]], List[0, 2, 0, Rational[1, 4]], 
 List[0, 2, 1, Rational[1, 5]], List[0, 2, 2, \[Placeholder]], 
 List[1, 0, 0, \[Placeholder]], List[1, 0, 1, \[Placeholder]], 
 List[1, 0, 2, \[Placeholder]], List[1, 1, 0, \[Placeholder]], 
 List[1, 1, 1, \[Placeholder]], List[1, 1, 2, \[Placeholder]], 
 List[1, 2, 0, \[Placeholder]], List[1, 2, 1, \[Placeholder]], 
 List[1, 2, 2, \[Placeholder]], List[2, 0, 0, \[Placeholder]], 
 List[2, 0, 1, \[Placeholder]], List[2, 0, 2, \[Placeholder]], 
 List[2, 1, 0, \[Placeholder]], List[2, 1, 1, \[Placeholder]], 
 List[2, 1, 2, \[Placeholder]], List[2, 2, 0, \[Placeholder]], 
 List[2, 2, 1, \[Placeholder]], List[2, 2, 2, \[Placeholder]]] 
```

这就是我想[在 MathCad 中制作的 Mathematica 中做的事情](https://docs.google.com/file/d/0By3qYPAc-Upna21BTG9xUW9TeUE/edit?usp=sharing "这是 MathCad 文件")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:51:31.790

在转向解决您的问题之前，我可以看到您的代码存在一些问题，作为初学者，您应该了解并在未来避免：

*   您已将评估包装在一对中，`A =`因此结果将是一个列表，其中包含评估产生的两个表达式。这不会创建一个矩阵，它会创建一个包含两个s 的列表。`B =``{}``MatrixForm`

*   将表达式包装在`MatrixForm[]`其中并将其分配给变量通常是一个坏主意。 `MatrixForm[]`确实是为了使输出看起来不错，大多数适用于 Mathematica 列表的操作（数组和矩阵只是列表的列表）不适用于带有 head 的对象`MatrixForm[]`。

*   评估开始的表达式会`1/Sqrt[Flatten[`生成错误消息：`Power::infy: "Infinite expression 1/0 encountered."`when `a==0,b==0,c==0`。

最后，一些您没有要求的建议：使用仅在字母大小写上有所不同的变量名称，就像您使用`A`and`a`和使用`B`and一样`b`，是通往痛苦和绝望世界的必经之路。仅仅因为你可以并不意味着你应该。

**编辑**

您可以使用以下命令轻松生成结果的前 3 列：

```
Tuples[Range[0, 2], 3] 
```

现在这包括元素`{0,0,0}`，所以我们将删除它，就像这样

```
Drop[Tuples[Range[0, 2], 3],1] 
```

现在用替换规则计算第 4 列，如下所示：

```
Drop[Tuples[Range[0, 2], 3], 1] /. {x_, y_, z_} -> {x, y, z, 1/(x^2 + y^2 + z^2)} 
```

请注意，我没有将此表达式的结果指定为任何变量的值，您可能想要。另请注意，我没有创建任何中间变量，这使您的工作区（在 Mathematica-speak 中`Context`）保持整洁。

# html - CSS浮动侧边栏

> ID：15220300
> 
> 赞同：-3
> 
> 时间：2013-03-05T09:34:11.283
> 
> 标签：html, css, wordpress, wordpress-theming

我的一个页面中的侧边栏区域存在 CSS 问题，您可以在此处看到：[[单击此处]](http://goo.gl/M65Ip)

我已将 margin-top 更改为 –2470px，因为它目前是显示侧边栏的唯一方法。但是，一旦您调整窗口大小，它就会到处浮动。

我该如何解决这个问题？

谢谢！

编辑：现在整理好了！谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:01:47.263

您需要将侧边栏放在您的#container div 中，与#content div 处于同一级别，并为两者应用“float:left”和宽度，您可以在 css 框架（如 bootstrap 或 960gs）中看到它

```
<div id="container">
     <div id="content"></div>
     <div id="sidebar">your sidebar here</div>  
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:18:42.867

侧边栏“#primary”应该在“#container”内，没有顶部边缘，所以侧边栏和“#content”现在是兄弟，然后你可以使用你已经做过的“#content”和“#primary”左侧的浮动侧边栏。

```
body.single-property #container #content { 
  margin: 0; width: 68.4%%;
  float:left
}

body.single-property #primary.widget-area {
  float: right;
  margin-right: 70px;
  width: 16%;
}

body.single-property #container {
  margin: 0 -26.4% 0 0;
  width: 100%;
  min-width: 960px; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:19:09.623

不要从一开始就让你的内容宽度：100%。如果你这样做并添加 20% 的 margin-right 当然没有更多的东西可以放在那里 让你的内容和你的侧边栏浮动：left 并取出所有的 margin:20% ar 那里是什么。这是一个基于您所拥有的示例：

```
<div class="main">
<div class="content"></div>
<div class="primary"></div>
</div>

.main{width:100%;}
.main > div{float:left}
.main .content{width:70%:}
.main .primary{width:30%} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T09:59:14.067

我建议你从你的块中删除所有`float`ing 属性并使用 css 表来获得一个流畅和简单的解决方案：

```
#main {
    display: table;
    padding: 0.5em 15px 0;
}

body.single-property #container {
    display: table-cell;
    width: 80%;
}

body.single-property #primary.widget-area {
    display: table-cell;
    width: 20%;
} 
```

请记住从元素中删除所有浮动属性，甚至从它们的子块中删除。我使用firebug对其进行了测试，并且运行顺利。

# python - 两个不同版本的python之间的通信

> ID：15220307
> 
> 赞同：0
> 
> 时间：2013-03-05T09:34:24.267
> 
> 标签：python, winapi, python-2.7, python-3.x, win32com

我正在使用 python 3.2 来构建我的 Windows 应用程序，除了我的应用程序 exe 之外，还必须在其中创建一个 DLL。

我用谷歌搜索得到 py2exe 可以从 python 脚本创建一个 DLL，但支持到 python 2.7 或 3.1，不支持 python 3.2。

因此，我使用 python 2.7 py2exe 使用 pywin32 创建 DLL。在使用 python 3.2 测试我的应用程序脚本时，它也使用 pywin32(py3.2) 并向创建的使用 py2win32(py2.7) 的 DLL(py2.7) 发送一些参数。

> 得到如下执行错误
> “pythoncom 错误：PythonCOM 服务器 - 'win32com.server.policy' 模块无法加载。
> 回溯（最近一次调用）：
> 文件“C:\Python27\lib\site-packages\win32com__init__ .py"，第 5 行，在
> import win32api, sys, os
> ImportError: Module use of python32.dll conflict with this version of Python.
> pythoncom error: CPyFactory::CreateInstance failed to create instance. (80004005)"

**我的问题是**

1.  我们可以使用 python 3.2 从脚本创建一个 dll
2.  我们如何使用“pywin32”等相同模块的不同版本的python进行通信
3.  虚拟环境怎么样？在这种情况下它会有用吗？如果它是我们如何使用 tat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:48:26.230

[Pyro4](http://pythonhosted.org/Pyro4/)可用于在运行不同 Python 解释器的进程之间进行通信（甚至通过网络）。

# php - 过滤搜索查询的最佳方法是什么 - PHP MySQL

> ID：15220314
> 
> 赞同：1
> 
> 时间：2013-03-05T09:34:57.910
> 
> 标签：php, mysql, database, search

我正在建立一个用户可以搜索帖子的网站。每个帖子都存储在数据库中。当用户进行搜索时，例如 iPad Mini FOR SALE，查询将如下所示：

```
SELECT * FROM testtable WHERE title REGEXP 'iPad|Mini|FOR|SALE' 
```

然后查询将产生以下 3 项：

*   销售 iPad Mini
*   销售 iPad
*   寻找正宗的金表

前两项搜索成功，但第三项确实不属于该组。我想将其过滤掉，只显示相关项目进行搜索。我正在考虑去掉 for、is、are 等常用词，但也许你们有什么建议？

旁注：你们推荐“REGEXP”吗？我只是看到它，使用它，还没有深入研究它。（无需仅回答搜索过滤器问题，但如果您有一些很好的信息，那就太好了。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:37:20.813

您还应该看看`FULLTEXT`搜索。为了使`FULLTEXT`搜索工作，您需要`MyIsam`MySQL 表引擎类型，也有 innoDB 支持，但我对此知之甚少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:38:25.550

已经读过这个话题？[http://www.regular-expressions.info/mysql.html](http://www.regular-expressions.info/mysql.html) 或者这也是一个很好的教程/解释：[http ://www.tech-recipes.com/rx/484/use-regular-expressions-in-mysql -选择语句/](http://www.tech-recipes.com/rx/484/use-regular-expressions-in-mysql-select-statements/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:50:19.030

**是的，删除常用词**

这些被称为[停用词](http://en.wikipedia.org/wiki/Stop_words)。这些是通常无关紧要的词。

**考虑相关性**

标题为“ipad mini for sale”的帖子与搜索 [ipad mini for sale] 的用户非常相关。标题为“ipad for sale”的帖子不太相关。一篇名为“出售奶酪工厂”的帖子仍然不太相关。

考虑推导一种算法，用于计算您认为与您网站上的帖子和用户搜索的字词相关的内容。

该算法可能与查看搜索的术语以及文章标题中术语的出现一样简单。标题中是否存在所有搜索的字词？可能非常相关。标题中是否存在 10% 的搜索字词？可能非常无关紧要。

考虑如何计算相关性分数。设置一个阈值，低于该阈值的结果被认为太不相关而不会出现在结果中。根据经验，我建议将阈值设置得相当高，只针对高度相关的结果，也许只有在找不到高度相关的结果时才列出不太相关的结果

**使用词干**

顺便说一句，在搜索中使用词干提取。词干算法将把一个词减少为一个共同的词干。您将只搜索词干而不是完整的搜索词。阅读[词干](http://en.wikipedia.org/wiki/Stemming)。为您使用的语言找到一个 porter 词干算法的实现；这是一个长期存在的算法，从经验来看，它对于大多数应用程序来说速度很快并且非常好。

**正则表达式？**

如果您删除停用词并使用基于词干的方法，这将是一个不太相关的问题。无论如何，这是一个实施问题，并且可能过于主观，无法为您提供有意义的答案。试试看，检查性能。尝试另一种方法，检查性能。使用最适合您的。

# php - 在php中通过curl连接FB

> ID：15220322
> 
> 赞同：0
> 
> 时间：2013-03-05T09:35:14.173
> 
> 标签：php, facebook-graph-api, curl

我需要使用 curl 从 Facebook 获取用户提要，我已经通过 curl 发送请求并得到了

```
Facebook returned HTTP Error Code: 404 error, follow is my code to connect facebook through curl 
<?php

$curl = curl_init();
curl_setopt($curl, CURLOPT_ENCODING , 'gzip, deflate');
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_USERAGENT, "php-facebook-wall (https://github.com/dordotky/php-facebook-wall)");
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_URL, $url = "https://graph.facebook.com/".FACEBOOK_USER_NAME
    ."/".FACEBOOK_USER_OBJECT."?access_token=".FACEBOOK_APP_ID."|".FACEBOOK_APP_SECRET);

// Execute our curl request
$result = curl_exec($curl);

// Check that we didn't encounter any errors while processing
$http_code = curl_getinfo($curl, CURLINFO_HTTP_CODE);
if ((!curl_error($curl)) && ($http_code == 200))
{
    $json = json_decode($result, true);
} else
{
    die("Facebook returned HTTP Error Code: ".$http_code);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:01:57.560

在 Facebook 墙上查看此帖子图片示例。护理步骤：

1.  在您的服务器上启用 SSL。
2.  访问令牌在一段时间后更改，因此请使用最新的访问令牌。

    函数 facebook_upload($fb_oauth_token,$item_image) {

    ```
    $file = $item_image;

        $args = array(
            'access_token'=>urlencode($fb_oauth_token)
        );

        $args[basename($file)] = '@'.($file);

        $ch = curl_init();
        $url = 'https://graph.facebook.com/me/photos';
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
        $data = curl_exec($ch);
        //returns the photo id
        $response = json_decode($data,true);
        //print_r(curl_error($ch));

        //to check response
        //if($response[id]>0){
            // yes
        //}
        json_decode($data,true); 
    ```

    }

# node.js - 如果同一用户从不同的浏览器或机器登录，则强制注销。Node.js + Express + Socket.IO

> ID：15220324
> 
> 赞同：2
> 
> 时间：2013-03-05T09:35:21.207
> 
> 标签：node.js, authentication, express, socket.io, logout

**场景：**考虑一个登录系统（[Node.js](http://nodejs.org) + [Express](http://expressjs.com/api.html) + [Socket.IO](http://socket.io)），它匹配用户名和密码并允许用户访问经过身份验证的页面。登录系统将会话 ID 存储为客户端的 cookie，并在服务器上对每个经过身份验证的页面请求进行验证，并相应地允许/禁止。

**问题：**现在，假设同一个用户从不同的机器或浏览器登录，我希望以前的用户推送到会话过期页面并显示信息，例如：*“您可能从不同的浏览器或机器登录。请不要分享密码。有关更多信息，请访问：SomeLinkHere"*

**注意：**我只是不想使用户登录会话无效，当用户从不同的浏览器或机器登录时，即使用户没有单击任何链接或请求任何进一步的身份验证页面，我也想将用户推送到会话过期页面.

**这背后的主要意图：**为了避免出现以下情况，例如：*“如果用户正在观看一些敏感数据，例如实时报告（即[socket.io](http://socket.io)上的仪表板）并将他的密码分享给其他人。”*

**问题：**既然 socket.io 已经用于实时数据上报，如何在不重载现有 socket.io 连接的情况下实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:59:41.357

这可以使用来完成。

1.  由于应用程序中的用户经过身份验证，当客户端进行连接时，它们还会通过 connect 函数调用传递用户 ID（或任何其他唯一标识符）。像：

    ```
    socket.on('connect', function(){
      socket.emit('adduser', userID);
    }); 
    ```

2.  在服务器上保留一个 JSON 数组，用于保存与用户 ID 信息相关联的套接字。像：

    ```
    [{'USERID1':'SOCKETID1'},{'USERID2':'SOCKETID2'}....,{'USERIDN':'SOCKETIDN'}] 
    ```

3.  当新用户进行套接字连接时，我们检查用户 ID 是否已经存在于数组中。像

    ```
    socket.on('adduser', checking function here); 
    ```

4.  如果它已经存在，则强制现有的断开连接并使用新的更新 JSON 数组中的 socketid。

    这是一个[参考](https://github.com/LearnBoost/socket.io/issues/47)

# php - 重复字符的预匹配

> ID：15220326
> 
> 赞同：3
> 
> 时间：2013-03-05T09:35:24.743
> 
> 标签：php, regex, preg-match

我需要验证一个可以包含小写字符和破折号但不能在开头、结尾或重复的字符串。然后也可以有数字，但不是在开始时。

这是它应该如何工作的：

```
Match: ab9cd-a9bc-abbbc95
Not match: 5abcd
Not match: abbcd-
Not match: -abcd
Not match: abcd--abcd 
```

除了最后一种情况，我已经能够做所有事情，重复的破折号不应该匹配。

我有这个：

```
/^[a-z]+[a-z0-9\-]+[a-z0-9]$/ 
```

我尝试了这个，但没有按预期工作：

```
/^[a-z]+[a-z0-9\-?]+[a-z0-9]$/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:05:15.110

另一种方法：

`^[a-z](?:[a-z\d]|[a-z\d]\-)*[a-z\d]+$`

在这里解释演示：[http ://regex101.com/r/mE8pB8](http://regex101.com/r/mE8pB8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:42:17.950

```
/^[a-z](_?[a-z0-9])*$/ 
```

假人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:48:18.573

怎么样：

```
^[a-z][a-z0-9]*(?:-?[a-z0-9]+)*[a-z0-9]$ 
```

**例子：**

```
$arr = array('ab9cd-a9bc-abbbc95','5abcd','abbcd-','-abcd','abcd--abcd');
foreach($arr as $str) {
    if (preg_match('/^[a-z][a-z0-9]*(?:-?[a-z0-9]+)*[a-z0-9]$/', $str)) {
        echo "OK : $str\n";
    } else {
        echo "KO : $str\n";
    }
} 
```

**输出：**

```
OK : ab9cd-a9bc-abbbc95
KO : 5abcd
KO : abbcd-
KO : -abcd
KO : abcd--abcd 
```

**解释：（**来自 YAPE::Regex::Explain）

```
The regular expression:

(?-imsx:^[a-z][a-z0-9]*(?:-?[a-z0-9]+)*[a-z0-9]$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  [a-z]                    any character of: 'a' to 'z'
----------------------------------------------------------------------
  [a-z0-9]*                any character of: 'a' to 'z', '0' to '9'
                           (0 or more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  (?:                      group, but do not capture (0 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    -?                       '-' (optional (matching the most amount
                             possible))
----------------------------------------------------------------------
    [a-z0-9]+                any character of: 'a' to 'z', '0' to '9'
                             (1 or more times (matching the most
                             amount possible))
----------------------------------------------------------------------
  )*                       end of grouping
----------------------------------------------------------------------
  [a-z0-9]                 any character of: 'a' to 'z', '0' to '9'
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:56:15.947

我希望这个能解决你的问题

```
/^[a-z0-9]+((\-{0,1})[a-z0-9]+)+$/ 
```

编辑：

以下更适合

```
/^[a-z]+[a-z0-9]+((\-{0,1})[a-z0-9]+)+$/ 
```

# iphone - 自定义 UIView 中的 UIButtons 没有响应（再次）

> ID：15220327
> 
> 赞同：1
> 
> 时间：2013-03-05T09:35:26.173
> 
> 标签：iphone, ios, uiview, uibutton

我有一个带有一些按钮作为子视图的自定义 UIView。我阅读了很多关于我的问题的帖子，但发布的解决方案对我不起作用。

如果我将其中一个按钮的框架设置为 UIView 之外的某个坐标，则该按钮可以工作。当我将其中一个按钮的框架设置为自定义 UIView 和按钮重叠的某个坐标时，按钮仅在它们不重叠的区域响应。

这是我的代码：

**我在 viewDidLoad 方法中初始化了自定义 UIView：**

```
[super viewDidLoad];

DDButtonBar *ddButtonBar =  _ddButtonBar;

[ddButtonBar showButton1:TRUE];
[ddButtonBar showButton2:TRUE];
[ddButtonBar showButton3:TRUE];
[ddButtonBar showButton4:TRUE];
[ddButtonBar showBackButton:TRUE];
[ddButtonBar showSettingsButton:TRUE];

[ddButtonBar setButtonTitle1:@"1"];
[ddButtonBar setButtonTitle2:@"2"];
[ddButtonBar setButtonTitle3:@"3"];
[ddButtonBar setButtonTitle4:@"4"]; 
```

**这是我的 UIView 的 init 方法：**

```
 - (id)initWithFrame:(CGRect)frame

self = [super initWithFrame:frame];
if (self) {

    // Standardinitialisierung
    _drawButton1 = TRUE;
    _drawButton2 = TRUE;
    _drawButton3 = TRUE;
    _drawButton4 = TRUE;
    _drawBackButton = TRUE;
    _drawSettingsButton = TRUE;

    _buttonTitle1 = @"1";
    _buttonTitle2 = @"2";
    _buttonTitle3 = @"3";
    _buttonTitle4 = @"4";

    [self layoutSubviews];

}
return self; 
```

}

**我正在画我的按钮**

```
 UIButton *button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button1 addTarget:self
            action:@selector(aMethod:)
  forControlEvents:UIControlEventTouchUpInside];
[button1 setTitle:_buttonTitle1 forState:UIControlStateNormal];

button1.frame = CGRectMake(rechtsverschiebung, height, buttonWidth, height);

[button1 setBackgroundImage:_buttonBackground forState:UIControlStateNormal];
[button1 setTitleColor:[UIColor colorWithRed:255.0 green:255.0 blue:255 alpha:1.0] forState: UIControlStateNormal];
[button1 setTitleColor:[UIColor colorWithRed:247.0 green:165.0 blue:32 alpha:1.0] forState: UIControlStateHighlighted];

[self addSubview:button1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:52:39.420

检查下一个按钮的 y 位置。在您的代码中，您为所有按钮设置相同的 y 位置。

# c# - 在浏览器上显示 PDF 文件问题

> ID：15220328
> 
> 赞同：1
> 
> 时间：2013-03-05T09:35:32.583
> 
> 标签：c#, javascript, asp.net, pdf, iframe

我需要有关在浏览器中显示 pdf 的帮助。这是我真正而简单的议程，为什么我需要这样做。

*   单击页面中的某个按钮，准确地说，
    是 ajax 模式弹出窗口中的图像按钮。
*   将显示新窗口，并在窗口上呈现 pdf。

以下是我解决问题的尝试。

*   **使用 window.open**

    *   使用这个 javascript 函数是一个棘手的问题，但我仍然设法克服了一些但陷入了一定的困难，这在 IE9 64 位上不起作用（在 IE 32 位上它可以工作）。Pdf 没有显示并且总是要求下载文件。在弹出窗口中按预期显示其他浏览器 pdf。其他问题是，如果弹出窗口阻止程序在浏览器中打开并且可以解决，除非您禁用它，否则此窗口将阻止显示，但我的客户不想为了禁用或启用它而不是全部用户具有计算机知识以了解此案例。
*   **使用 Process.Start**

    *   使用这种方法似乎可以解决我的问题，但并没有持续很长时间。我决定当按钮被点击时，它将使用机器中的默认 pdf 查看器软件（Acrobat Reader）显示 pdf。在开发中，这种方法似乎可行，但是当我部署站点时，由于服务器上的一些安全问题，Process.Start 似乎无法正常工作，并且我不想配置服务器，因为我对它的访问权限有限。这里的另一件事是，当机器上没有安装 pdf 查看器软件时，会出现另一个问题。我对此有一些解决方案，但我知道 Process.Start 无法在服务器上运行，我放弃测试这个解决方案。
*   **使用 iframe**

    *   好的，所以 window.open 不起作用，所以我将创建一个弹出窗口以使其在所有浏览器中兼容。我需要来自 ajax 的 modalpop 作为 iframe 的占位符。我想要显示的 pdf 是首先生成的，所以我唯一需要做的就是将 iframe 的 src 属性指向服务器中生成的 pdf 的位置。这似乎在我想要的所有浏览器和弹出模式显示中都有效，但在 IE 浏览器上仍然出现问题。Pdf 似乎没有显示在 iframe 中，而是要求下载是我得到的。

在我尝试过的方法列表中，你们有一些可以解决我的问题的解决方案吗？我真的需要帮助，我会感谢你们的任何帮助。谢谢你。

# sql - 查询确实缺少一些数字

> ID：15220329
> 
> 赞同：1
> 
> 时间：2013-03-05T09:35:40.817
> 
> 标签：sql, sql-server, stored-procedures

我有程序应该根据客户 CategoryCode 计算计数，并且种族看起来像它工作但它缺少一些按类别代码计算的计数这是程序

```
alter PROCEDURE SelectTotalActiveClients
AS
declare @GrandTotal int 
set @GrandTotal = (select COUNT (clientID)from Clients where StatusID in (1,2))
BEGIN
    SET NOCOUNT ON;
    with native_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'Native'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode = 'N'
        and cl.StatusID in (1,2)
        group by c.Category
    ),
    asian_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'Asian'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode = 'A'
        and cl.StatusID in (1,2)
        group by c.Category
    ),
    black_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'Black'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode = 'B'
        and cl.StatusID in (1,2)
        group by c.Category
    ),
    pacific_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'Pacific'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode = 'P'
        and cl.StatusID in (1,2)
        group by c.Category
    ),
    white_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'White'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode = 'W'
        and cl.StatusID in (1,2)
        group by c.Category
    ),
    multy_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'Multy'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode not IN ('N', 'A', 'B', 'P', 'W', '0')
        and cl.StatusID in (1,2)
        group by c.Category
    ),
    unknown_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'Unknown'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode = '0'
        and cl.StatusID in (1,2)
        group by c.Category
    ),
        total_cte (cat, cnt)
    AS
    (
        select c.Category, count(e.EthnCode) 'Total'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and cl.StatusID in (1,2)
        group by c.Category
    )
    SELECT  Category, native_cte.cnt 'Native', asian_cte.cnt 'Asian', 
            black_cte.cnt 'Black', pacific_cte.cnt 'Pacific', white_cte.cnt 'White', multy_cte.cnt 'Multy',
            unknown_cte.cnt 'Unknown', total_cte.cnt as 'Total'
    FROM    Category 
    left outer  JOIN native_cte on Category.Category = native_cte.cat
    left outer  JOIN asian_cte on native_cte.cat = asian_cte.cat
        left outer  join black_cte on asian_cte.cat = black_cte.cat
                left outer join pacific_cte on black_cte.cat = pacific_cte.cat
                    left outer join white_cte on pacific_cte.cat = white_cte.cat
                        left outer join multy_cte on white_cte.cat = multy_cte.cat
                             left outer join unknown_cte on multy_cte.cat = unknown_cte.cat
                                left outer join total_cte on unknown_cte.cat  = total_cte.cat
END
GO 
```

它给出了结果：

```
Child     NULL  NULL    NULL    NULL    NULL    NULL    NULL    NULL
Infant    NULL  NULL    NULL    NULL    NULL    NULL    NULL    NULL
Newborn   NULL  NULL    NULL    NULL    NULL    NULL    NULL    NULL
Pregnant      2 NULL    NULL    NULL    NULL    NULL    NULL    NULL
Postpartum    1 NULL    NULL    NULL    NULL    NULL    NULL    NULL
Senior      220 188       36     11      485     12      44  996 
```

但是，当我自己运行这个 cte select 时，它会给出不同的响应，例如

```
select c.Category, count(e.EthnCode) 'White'
        from Category c, Ethnicity e, Clients cl
        where cl.CategCode = c.CategCode
        and cl.EthnCode = e.EthnCode
        and e.EthnCode = 'W'
        and cl.StatusID in (1,2)
        group by c.Category

Postpartum  4
Pregnant    2
Senior      485 
```

请帮我找出查询中的错误！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:49:34.890

我认为您的整个查询可以简化如下：

```
SELECT  c.Category,
        [Native] = COUNT(CASE WHEN cl.EthnCode = 'N' THEN cl.EthnCode END),
        [Asian] = COUNT(CASE WHEN cl.EthnCode = 'A' THEN cl.EthnCode END),
        [Black] = COUNT(CASE WHEN cl.EthnCode = 'B' THEN cl.EthnCode END),
        [Pacific] = COUNT(CASE WHEN cl.EthnCode = 'P' THEN cl.EthnCode END),
        [White] = COUNT(CASE WHEN cl.EthnCode = 'W' THEN cl.EthnCode END),
        [Multy] = COUNT(CASE WHEN cl.EthnCode NOT IN ('N', 'A', 'B', 'P', 'W', '0') THEN cl.EthnCode END),
        [Unknown] = COUNT(CASE WHEN cl.EthnCode = '0' THEN cl.EthnCode END),
        [Total] = COUNT(cl.EthnCode)
FROM    Category c, 
        LEFT JOIN Clients cl
            ON cl.CategCode = c.CategCode
            AND cl.StatusID IN (1, 2)
GROUP BY Category 
```

这应该产生相同的结果，应该表现得更好，并且（在我看来）更清晰。

我看不到您`@GrandTotal`稍后在查询中使用的位置，但如果您需要底部的 Total 行，您可以使用[WITH ROLLUP](http://msdn.microsoft.com/en-us/library/ms189305%28v=sql.90%29.aspx)：

```
SELECT  [Category] = ISNULL(c.Category, 'Total'),
        [Native] = COUNT(CASE WHEN cl.EthnCode = 'N' THEN cl.EthnCode END),
        [Asian] = COUNT(CASE WHEN cl.EthnCode = 'A' THEN cl.EthnCode END),
        [Black] = COUNT(CASE WHEN cl.EthnCode = 'B' THEN cl.EthnCode END),
        [Pacific] = COUNT(CASE WHEN cl.EthnCode = 'P' THEN cl.EthnCode END),
        [White] = COUNT(CASE WHEN cl.EthnCode = 'W' THEN cl.EthnCode END),
        [Multy] = COUNT(CASE WHEN cl.EthnCode NOT IN ('N', 'A', 'B', 'P', 'W', '0') THEN cl.EthnCode END),
        [Unknown] = COUNT(CASE WHEN cl.EthnCode = '0' THEN cl.EthnCode END),
        [Total] = COUNT(cl.EthnCode)
FROM    Category c, 
        LEFT JOIN Clients cl
            ON cl.CategCode = c.CategCode
            AND cl.StatusID IN (1, 2)
GROUP BY Category
WITH ROLLUP; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:40:45.973

试试这个，左连接应该使用类别：

```
FROM    Category 
left outer  JOIN native_cte on Category.Category = native_cte.cat
left outer  JOIN asian_cte on Category.Category = asian_cte.cat
left outer  join black_cte on Category.Category = black_cte.cat
left outer join pacific_cte on Category.Category = pacific_cte.cat
left outer join white_cte on Category.Category = white_cte.cat
left outer join multy_cte on Category.Category = multy_cte.cat
left outer join unknown_cte on Category.Category = unknown_cte.cat
left outer join total_cte on Category.Category  = total_cte.cat 
```

# android - Android 将 FrameLayout 设置为背景

> ID：15220335
> 
> 赞同：0
> 
> 时间：2013-03-05T09:36:09.090
> 
> 标签：android, image, android-framelayout

我有两张图片，我需要将它们一张放在另一张上，可以使用 来制作`FrameLayout`，正如我在[这个答案](https://stackoverflow.com/questions/9493855/android-how-to-put-an-image-over-another-image)中找到的那样。但是，我需要将该布局设置为我的 tabTitle 之一的背景，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:40:32.543

你可以以编程方式做到这一点，

```
myFrameLayout.setDrawingCacheEnabled(true);
myFrameLayout.buildDrawingCache();
Bitmap bitmap = myFrameLayout.getDrawingCache();

myAnotherLayout.setBackgroundDrawable(new BitmapDrawable(bitmap))); 
```

# javascript - 单击提交按钮后如何重定向用户？

> ID：15220339
> 
> 赞同：14
> 
> 时间：2013-03-05T09:36:16.463
> 
> 标签：javascript

单击提交按钮后如何重定向用户？我的 javascript 不工作：

**Javascript**

```
<script type="text/javascript" language="javascript">
function redirect()
{
    window.location.href="login.php";
}
</script> 
```

**表单页面**

```
<form  name="form1" id="form1" method="post">  
    <input type="submit" class="button4" name="order" 
        id="order" value="Place Order" onclick="redirect();" >
</form> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-05T09:44:36.237

您的提交将取消重定向，反之亦然。

我首先看不到重定向的原因，因为您为什么有一个什么都不做的订单。

也就是说，这是如何做到的。首先永远不要在提交按钮上放代码，而是在 onsubmit 中做，其次返回 false 以停止提交

**注意**此代码将忽略该操作并仅执行脚本，因为返回 false/preventDefault

```
function redirect() {
  window.location.replace("login.php");
  return false;
} 
```

使用

```
<form name="form1" id="form1" method="post" onsubmit="return redirect()">  
  <input type="submit" class="button4" name="order" id="order" value="Place Order" >
</form> 
```

或不显眼：

```
window.onload=function() {
  document.getElementById("form1").onsubmit=function() {
    window.location.replace("login.php");
    return false;
  }
} 
```

使用

```
<form id="form1" method="post">  
  <input type="submit" class="button4" value="Place Order" >
</form> 
```

jQuery：

```
$("#form1").on("submit",function(e) {
   e.preventDefault(); // cancel submission
   window.location.replace("login.php");
}); 
```

## -----

例子：

```
$("#form1").on("submit", function(e) {
  e.preventDefault(); // cancel submission
  alert("this could redirect to login.php"); 
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<form id="form1" method="post" action="javascript:alert('Action!!!')">
  <input type="submit" class="button4" value="Place Order">
</form>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T09:39:34.657

使用 jquery 你可以这样做

```
$("#order").click(function(e){
    e.preventDefault();
    window.location="login.php";
}); 
```

同样在 HMTL 中，您可以这样做

```
<form name="frm" action="login.php" method="POST">
...
</form> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T09:38:25.237

利用

```
window.location.replace("login.php"); 
```

或者`simply window.location("login.php");`

它比使用更好，`window.location.href =,`因为`replace()`它不会将原始页面放入会话历史记录中，这意味着用户不会陷入永无止境的后退按钮惨败中。如果要模拟某人单击链接，请使用`location.href`. 如果要模拟 HTTP 重定向，请使用`location.replace`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T09:39:05.367

你为什么不使用纯html？

```
<form action="login.php" method="post" name="form1" id="form1">
...
</form> 
```

在您的 login.php 中，您可以使用[header()](http://php.net/manual/de/function.header.php)函数。

```
header("Location: welcome.php"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T09:38:47.583

这将是

```
window.location="login.php"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-29T04:41:10.417

我希望这可能会有所帮助

```
<script type="text/javascript">
	function redirect() {
		document.getElementById("formid").submit();
	}
	window.onload = redirect;
</script>
```

```
<form id="formid" method="post" action="anypage.jsp">
  .........
</form>
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-05T09:39:44.287

```
// similar behavior as an HTTP redirect
window.location.replace("http://stackoverflow.com/SpecificAction.php");

// similar behavior as clicking on a link
window.location.href = "http://stackoverflow.com/SpecificAction.php"; 
```

# android - 如何在android中安排短信？

> ID：15220340
> 
> 赞同：1
> 
> 时间：2013-03-05T09:36:18.417
> 
> 标签：android, sms, datepicker, timepicker, android-calendar

我正在尝试在我的应用程序中安排短信。我正在通过 TimePicker 设置时间和通过 DatePicker 设置日期。但不知何故，代码不起作用。请告诉我哪里出错了。吨

主要代码：

```
 int Hour = Time_Picker.getCurrentHour();
                    int Minute = Time_Picker.getCurrentMinute();

                DatePicker Date_Picker = (DatePicker)findViewById(R.id.datePicker1);
                int day = Date_Picker.getDayOfMonth();
                 int month = Date_Picker.getMonth() + 1;
                 int year = Date_Picker.getYear();

                Intent myIntent = new Intent(ScheduleMessage.this, MyAlarmService.class);

                Bundle bundle = new Bundle();
                         bundle.putCharSequence("Number", Number.getText().toString());
                         bundle.putCharSequence("Message", Message.getText().toString());
                         myIntent.putExtras(bundle);

                pendingIntent = PendingIntent.getService(ScheduleMessage.this, 0, myIntent, 0);

AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

                 Calendar calendar = Calendar.getInstance();
                 calendar.setTimeInMillis(System.currentTimeMillis());
                 //calendar.add(Calendar.SECOND, 10);
                 calendar.set(year, month, day, Hour, Minute);

                 alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

                         Toast.makeText(ScheduleMessage.this,"Start Alarm with \n" + 
                         "smsNumber = " + Number.getText().toString() + 
                         "\n" + "smsText = " + Message.getText().toString() + "\nScheduled for :"
                         + Hour +" "+Minute,
                           Toast.LENGTH_LONG).show();

` 
```

这是服务：

```
public class MyAlarmService extends Service {
    String smsNumberToSend, smsTextToSend;

     @Override
     public void onCreate() {
      // TODO Auto-generated method stub

      Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG).show();
     }

     @Override
     public void onDestroy() {
      // TODO Auto-generated method stub
       super.onDestroy();
       Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG).show();
     }

     @Override
     public void onStart(Intent intent, int startId) {

         Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();
      // TODO Auto-generated method stub
      //super.onStart(intent, startId);

      Bundle bundle = intent.getExtras();
           smsNumberToSend = (String) bundle.getCharSequence("Number");
           smsTextToSend = (String) bundle.getCharSequence("Message");

      Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();
      Toast.makeText(this,
             "MyAlarmService.onStart() with \n" +
             "smsNumberToSend = " + smsNumberToSend + "\n" +
             "smsTextToSend = " + smsTextToSend,
             Toast.LENGTH_LONG).show();

      SmsManager smsManager = SmsManager.getDefault();
      smsManager.sendTextMessage(smsNumberToSend, null, smsTextToSend, null, null);

     }
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

有趣的是，当我添加该行时`calendar.set(Calendar.SECOND,10);`- 一切正常。但是当我使用相同的方法并设置特定的时间时，什么也没有发生。

请帮助我，我是Android新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T20:45:37.220

问题出在您的 BroadcastReceiver 中，您没有将捆绑包传递给服务！

```
public class ReceiveBroadcast extends BroadcastReceiver {

@Override
public void onReceive(Context arg0, Intent arg1) {
    // TODO Auto-generated method stub

    try {
        Intent ii = new Intent(arg0, AlarmService.class);
        Bundle bundle = arg1.getExtras();
        ii.putExtras(bundle);
        arg0.startService(ii);
    } catch (Exception e) {
        Toast.makeText(arg0, "There was an error somewhere, but we still received an alarm" + e, Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:40:45.787

您应该为此目的使用广播接收器，然后您可以从那里触发您的服务。

```
 int Hour = Time_Picker.getCurrentHour();
                    int Minute = Time_Picker.getCurrentMinute();

                DatePicker Date_Picker = (DatePicker)findViewById(R.id.datePicker1);
                int day = Date_Picker.getDayOfMonth();
                 int month = Date_Picker.getMonth() + 1;
                 int year = Date_Picker.getYear();

                Intent myIntent = new Intent(ScheduleMessage.this, recieve.class);

                Bundle bundle = new Bundle();
                         bundle.putCharSequence("Number", Number.getText().toString());
                         bundle.putCharSequence("Message", Message.getText().toString());
                         myIntent.putExtras(bundle);

                pendingIntent = PendingIntent.getBroadcast(ScheduleMessage.this, 0, myIntent, 0);

AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

                 Calendar calendar = Calendar.getInstance();
                 calendar.setTimeInMillis(System.currentTimeMillis());
                 //calendar.add(Calendar.SECOND, 10);
                 calendar.set(year, month, day, Hour, Minute);

                 alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

                         Toast.makeText(ScheduleMessage.this,"Start Alarm with \n" + 
                         "smsNumber = " + Number.getText().toString() + 
                         "\n" + "smsText = " + Message.getText().toString() + "\nScheduled for :"
                         + Hour +" "+Minute,
                           Toast.LENGTH_LONG).show(); 
```

此代码将设置触发广播接收器的警报。现在在您的接收者的 onRecieve 函数中调用您的服务。

```
public class mainRecieve extends BroadcastReceiver{

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub

        try {

                    Intent ii=new Intent(arg0,MyAlarmService.class);
                    arg0.startService(ii);
                }               
                }
             catch (Exception e) {
                Toast.makeText(arg0, "There was an error somewhere, but we still received an alarm"+e, Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }
    }

} 
```

# android - Android，片段列表视图 onItemclick / onitemselect 问题

> ID：15220341
> 
> 赞同：1
> 
> 时间：2013-03-05T09:36:19.483
> 
> 标签：android, android-listview, fragment, onitemclicklistener

**我的问题：**`SectionsPagerAdapter`我有主类和 3 个使用滑动（扩展）控制的片段`FragmentPagerAdapter`。

在所有片段上，我们使用 listview 来生成包含 SQLite 数据的列表。这工作正常，但是 onItemclick 方法不起作用 - 我们尝试了几种方法但没有成功。

我们使用自定义的 simpleCursorAdaptor 并通过 Adaptor 的 getView 方法设置视图。这再次工作得很好。我们从数据库中获得了包含内容的漂亮表格。

有没有人可以举个例子来解决我们的问题？没有 ListFragment 的示例。

我们的一些代码如下所示：

```
 public class TranssaktionFragment extends Fragment implements OnItemClickListener

    listview.setAdapter(transsaktionadaptor);

    listview.setOnItemClickListener(new OnItemClickListener() {
        private String TAG;
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Log.v(TAG, "*****************************Clicked************************* "  );                             
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:16:33.730

我有同样的问题，**onItemClick**没有调用。自定义 ListRow 中有一个带有 Image 的 Relativelayout。我已添加 `android:focusable="false"`到 Relativelayout，现在它又可以工作了。我想知道为什么，但它有效。感谢**Luksprog**！

# extjs4 - 禁用按钮组的单个按钮 - extjs

> ID：15220344
> 
> 赞同：0
> 
> 时间：2013-03-05T09:36:22.380
> 
> 标签：extjs4, disabled-control, buttongroup

我有按钮组，其中有 4 个按钮...我想在单击某些按钮时禁用特定按钮.. 我该怎么做？

我试过了 ：

```
 buttonItemID.disabled = true.  (radarbutton.disabled = true) 
```

但无法得到结果。

请给我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:42:53.270

```
Ext.ComponentQuery.query('button#buttonItemID')[0].disable(); 
```

# asp.net-mvc - 仅使用 jQuery POST Internet Explorer 时控制器参数属性为 NULL

> ID：15220347
> 
> 赞同：0
> 
> 时间：2013-03-05T09:36:41.640
> 
> 标签：asp.net-mvc, json, internet-explorer, jquery

我有一个关于 MVC 控制器的 jQuery 帖子。该调用在 Firefox 和 Chrome 中运行良好，但使用 IE 时对象属性为空？

知道是什么导致了 Internet Explorer

```
 var orderModel =
            {
                FirstName: this.address['name_first'],
                Surname: this.address['name_last'],
                Amount: this.finalTotal,
                Line1: this.address['line1'],
                Line2: this.address['line2'],
                City: this.address['city'],
                Code: this.address['code'],
                Region: this.address['region'],
                Country: this.address['country'],
                Shipping: shippingCost,
                Phone: this.address['phone'],
                EmailAddress: this.address['email_address'],
                OrderItems: items2
            };
        var form;
        $.ajaxSetup({ 'async': false });
        $.ajaxSetup({ cache: false });
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: this.url,
            data: JSON.stringify(orderModel),
            dataType: "json",
            success: function(response) {
                // Process result...
            }
        });

    [HttpPost]
    public ActionResult AddPurchaseDetails(OrderModel order)
    {
        //DO Something...
     } 
```

# c# - 文件路径和文件流之间的区别？

> ID：15220348
> 
> 赞同：2
> 
> 时间：2013-03-05T09:36:52.493
> 
> 标签：c#, silverlight-4.0

在silverlight 中，用户获取的是文件流而不是文件路径...请问您能说出两者之间的区别吗？有没有办法在silverlight 中找出文件路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:39:25.503

流是数据的管道，路径是*字符串*`.Name`……如果你真的有 a ，你也许可以从中获取路径`FileStream`，但如果你有`Stream`: 就没有那么多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:41:17.327

Stream 是一个插入源的管道，而 File Path 只是一个在不同操作系统中不同的字符串。

# c# - 推送通知在 Windows Phone 8 中不起作用

> ID：15220353
> 
> 赞同：2
> 
> 时间：2013-03-05T09:37:02.110
> 
> 标签：c#, windows-phone-8

通道 uri 未在 windows phone 8 模拟器中创建，代码如下：

```
 `private void OnChannelUriChanged(Uri value)
    {
        Dispatcher.BeginInvoke(() =>
        {
            txtURI.Text = value.ToString();
        });

        Debug.WriteLine("URI: " + value.ToString());
    }

    private static void BindToShell(HttpNotificationChannel httpChannel)
    {
        try
        {
            httpChannel.BindToShellToast();
        }
        catch (Exception)
        {
        }
    }
    void httpChannel_ShellToastNotificationReceived(object sender, NotificationEventArgs e)
    {
        Dispatcher.BeginInvoke(() =>
        {
            txtURI.Text = "Toast Notification Message Received: ";
            if (e.Collection != null)
            {
                Dictionary<string, string> collection = (Dictionary<string, string>)e.Collection;
                System.Text.StringBuilder messageBuilder = new System.Text.StringBuilder();
                foreach (string elementName in collection.Keys)
                {
                    txtURI.Text += string.Format("Key: {0}, Value:{1}\r\n", elementName, collection[elementName]);
                }
            }
        });
    }
    void httpChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
    {
        //You get the new Uri (or maybe it's updated)
        OnChannelUriChanged(e.ChannelUri);
    }

    private void SetupChannel()
    {
        HttpNotificationChannel httpChannel = null;
        string channelName = "DemoChannel";

        //if channel exists, retrieve existing channel
        httpChannel = HttpNotificationChannel.Find(channelName);

        if (httpChannel != null)
        {
            //If we cannot get Channel URI, then close the channel and reopen it
            if (httpChannel.ChannelUri == null)
            {
                httpChannel.UnbindToShellToast();
                httpChannel.Close();
                SetupChannel();
                return;
            }
            else
            {
                OnChannelUriChanged(httpChannel.ChannelUri);
            }
            BindToShell(httpChannel);
        }
        else
        {
            httpChannel = new HttpNotificationChannel(channelName);
            httpChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(httpChannel_ChannelUriUpdated);
            httpChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(httpChannel_ShellToastNotificationReceived);
            httpChannel.Open();
            BindToShell(httpChannel);
        }
    }

    private void btnCreateChannel_Click(object sender, RoutedEventArgs e)
    {
        SetupChannel();
    }` 
```

任何人都可以发送一些解决方案来解决这个问题谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T08:46:31.160

试试这个：

```
 public MainPage()
    {
        InitializeComponent();
        /// Holds the push channel that is created or found.
        HttpNotificationChannel pushChannel;

        // The name of our push channel.
        string channelName = "ToastSampleChannel";

        // Try to find the push channel.
        pushChannel = HttpNotificationChannel.Find(channelName);

        // If the channel was not found, then create a new connection to the push service.
        if (pushChannel == null)
        {
            pushChannel = new HttpNotificationChannel(channelName);

            // Register for all the events before attempting to open the channel.
            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

            // Register for this notification only if you need to receive the notifications while your application is running.
            pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

            pushChannel.Open();

            // Bind this new channel for toast events.
            pushChannel.BindToShellToast();

        }
        else
        {
            // The channel was already open, so just register for all the events.
            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

            // Register for this notification only if you need to receive the notifications while your application is running.
            pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

            // Display the URI for testing purposes. Normally, the URI would be passed back to your web service at this point.
            System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
            MessageBox.Show(String.Format("Channel Uri is {0}",
                pushChannel.ChannelUri.ToString()));

        }

    }

    void PushChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
    {

        Dispatcher.BeginInvoke(() =>
        {
            // Display the new URI for testing purposes.   Normally, the URI would be passed back to your web service at this point.
            System.Diagnostics.Debug.WriteLine(e.ChannelUri.ToString());
            MessageBox.Show(String.Format("Channel Uri is {0}",
                e.ChannelUri.ToString()));

        });
    }
    void PushChannel_ErrorOccurred(object sender, NotificationChannelErrorEventArgs e)
    {
        // Error handling logic for your particular application would be here.
        Dispatcher.BeginInvoke(() =>
            MessageBox.Show(String.Format("A push notification {0} error occurred.  {1} ({2}) {3}",
                e.ErrorType, e.Message, e.ErrorCode, e.ErrorAdditionalData))
                );
    }
    void PushChannel_ShellToastNotificationReceived(object sender, NotificationEventArgs e)
    {
        StringBuilder message = new StringBuilder();
        string relativeUri = string.Empty;

        message.AppendFormat("Received Toast {0}:\n", DateTime.Now.ToShortTimeString());

        // Parse out the information that was part of the message.
        foreach (string key in e.Collection.Keys)
        {
            message.AppendFormat("{0}: {1}\n", key, e.Collection[key]);

            if (string.Compare(
                key,
                "wp:Param",
                System.Globalization.CultureInfo.InvariantCulture,
                System.Globalization.CompareOptions.IgnoreCase) == 0)
            {
                relativeUri = e.Collection[key];
            }
        }

        // Display a dialog of all the fields in the toast.
        Dispatcher.BeginInvoke(() => MessageBox.Show(message.ToString()));

    }

     } 
```

# android - 三星 Galaxy Note 纵向模式的 Zxing 问题

> ID：15220355
> 
> 赞同：1
> 
> 时间：2013-03-05T09:37:07.283
> 
> 标签：android, zxing, galaxy

我正在开发一个可以扫描 QRCode 的应用程序，我希望实现两种屏幕模式（纵向和横向）。我正在使用谷歌提供的代码来正确打开我的相机： http: [//developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)
手机可以正常工作（摩托罗拉 Razr）并在两种屏幕模式下使用平板电脑（三星 Galaxy Tab）。但是对于三星 Galaxy Note，当我处于纵向模式时，屏幕上有线条，如下图所示（它在横向模式下工作正常）。![在此处输入图像描述](../Images/4594d7f41edf5bde855f05b45ba9cbb8.png)

有人已经遇到并纠正了这个问题吗？或者，也许有人有我可以遵循的线索来解决我的问题？

谢谢，seb

# ios - 直播 Azure 框架，是 url 问题吗？

> ID：15220357
> 
> 赞同：0
> 
> 时间：2013-03-05T09:37:10.253
> 
> 标签：ios, objective-c, azure, http-live-streaming, azure-media-services

*   使用 ios 应用程序。

    *   用于直播。

    *   使用 Azure 框架。

*我在运行时接收字节。但无法在 Azure 媒体播放器中播放。*

在演示应用程序中，我们可以从服务器播放静态 url。

[http://nimbuspartnerorigin.cloudapp.net/8260c015-abfb-4c8d-8c3a-689b1448e279/Contoso_93d705de-fe6b-4430-b0ab-4c291665b610-m3u8-aapl.ism/Manifest(format=m3u8-aapl](http://nimbuspartnerorigin.cloudapp.net/8260c015-abfb-4c8d-8c3a-689b1448e279/Contoso_93d705de-fe6b-4430-b0ab-4c291665b610-m3u8-) **)**

但是当我们直播时，我们必须像从服务器一样创建 url。

[http://nimbuspartnerorigin.cloudapp.net/8260c015-abfb-4c8d-8c3a-689b1448e279/Contoso_93d705de-fe6b-4430-b0ab-4c291665b610-m3u8-aapl.isml/Manifest](http://nimbuspartnerorigin.cloudapp.net/8260c015-abfb-4c8d-8c3a-689b1448e279/Contoso_93d705de-fe6b-4430-b0ab-4c291665b610-m3u8-) **_**

1.  我应该将清单文件转换为 .m3u8 格式吗？任何人都知道如何将该清单文件转换为 m3u8 文件格式？请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:41:21.473

[http://nimbuspartnerorigin.cloudapp.net/8260c015-abfb-4c8d-8c3a-689b1448e279/Contoso_93d705de-fe6b-4430-b0ab-4c291665b610-m3u8-aapl.isml/Manifest](http://nimbuspartnerorigin.cloudapp.net/8260c015-abfb-4c8d-8c3a-689b1448e279/Contoso_93d705de-fe6b-4430-b0ab-4c291665b610-m3u8-aapl.isml/Manifest)是一个平滑流式处理清单，无法使用Azure 框架。您将需要创建 HLS 直播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:55:32.140

**对于使用 Azure 框架的实时流媒体，我得到了“SmoothStreaming”网址。

我不能直接在iOS设备上玩。**正如Mingfei Yan在上面的回答中所说的****

所以，我们搜索了另一种方式，然后是 Azure

*   我们按照此链接设置 IIS 服务器。 [http://www.hanselman.com/blog/CommentView.aspx?guid=86968cd5-feeb-47f2-b02e-1eb4fa556379#commentstart](http://www.hanselman.com/blog/CommentView.aspx?guid=86968cd5-feeb-47f2-b02e-1eb4fa556379#commentstart)

*   我们让 Apple HLS 流在**Safari 或 WebView(iOS)**中播放。

如果配置正确，我仍在等待使用 Azure Frameork。

# python - 我应该重载什么功能来自定义打印输出？

> ID：15220359
> 
> 赞同：1
> 
> 时间：2013-03-05T09:37:11.697
> 
> 标签：python, numpy

我有一个来自 numpy.ndarray 的子类，它修改了按索引获取项目的行为。但是，当有人在我的子类上打印时，我想保留原始的 ndarray 输出格式。我尝试覆盖 __iter__ 函数，但似乎不起作用。鉴于 __getitem__ 已重载，是否可以按底层数组顺序打印输出数字？

```
import numpy as np

class imarray(np.ndarray):
    def __new__(cls, d, f):
        nd = np.asarray(d)
        return super(imarray, cls).__new__(cls,(nd.size,), dtype=nd.dtype, buffer=nd).view(imarray)
    def __init__(self, d, f):
        self.f = f
    def __array_finalize__(self, o):
        pass
    def __getitem__(self, i):
        return super(imarray, self).__getitem__(self.f(i))
    def __setitem__(self, i, y):
        return super(imarray, self).__setitem__(self.f(i), y)
    def __iter__(self):
        return super(imarray, self).__iter__

if __name__ == "__main__":
    a = imarray([1., 2., 3.1415], lambda i:i+1)
    print a[0] # print .2
    a[-1] =.4
    print a[-1] # print .4
    print a # print [ 2\. 3.1415 0.4 ] but want [ 0.4 2\. 3.1415 ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:38:32.357

打印返回对象`__str__`方法。

所以你需要 ovveride `__str__`。

```
>>> class ex():
    def __init__(self, value):
        self.val = value
    def __str__(self):
        return self.val * 2

>>> a = ex('A')
>>> print a
AA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:50:33.737

这实际上取决于。

如果您打印一个对象，`print`将调用它的`__str__`方法。

但是，如果您打印一个`list`（或`set`或`dict`），`print`将调用列表的`__str__`方法，该方法又将调用项目的**`__repr__`**方法。这很奇怪，但很容易观察到：

```
>>> class B():
...     def __repr__(self): return '__repr__'
...     def __str__(self): return '__str__'
...
>>> print B()
__str__
>>> print [B()]
[__repr__]
>>> print set([B()])
set([__repr__])
>>> print {B(): B()}
{__repr__: __repr__} 
```

# java - 如何在另一个 Activity 中检索 SharedPreference 文件的值？

> ID：15220363
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:37:28.977
> 
> 标签：java, sharedpreferences

```
Activity 1st..
Here this is my first activity to add data

preferences=PreferenceManager.getDefaultSharedPreferences(context);
                  preferences = getPreferences(MODE_PRIVATE);
                  editor = preferences.edit();
                 editor.putString("userid",et_username.getText().toString());//adduserid
                editor.putString("password",et_password.getText().toString());//add password
                  editor.commit(); 
```

Activity 2nd 这是我检索数据的第二个活动。

```
String userName=preferences.getString("userid","");
            String password=preferences.getString("password","");
            Log.d("user : second", ""+preferences.getString("userid",""));
            Log.d("password : second", ""+preferences.getString("password","")); 
```

由于空值，此处不显示日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T04:45:18.973

我只存储一个整数值，你必须在其中超过一个值..

```
PreferenceConnector.writeInteger(home.this, PreferenceConnector.com_id, homeComp_id); 
```

在要在其中使用的类下面`preferenceConnector`...

```
public class PreferenceConnector {

public static final String PREF_NAME = "Shared Preference";
public static final int MODE = Context.MODE_PRIVATE;

public static final String com_id = "com_id";

public static void writeBoolean(Context context, String key, boolean value) {
    getEditor(context).putBoolean(key, value).commit();
}

public static boolean readBoolean(Context context, String key, boolean defValue) {
    return getPreferences(context).getBoolean(key, defValue);
}

public static void writeInteger(Context context, String key, int value) {
    getEditor(context).putInt(key, value).commit();

}

public static int readInteger(Context context, String key, int defValue) {
    return getPreferences(context).getInt(key, defValue);
}

public static SharedPreferences getPreferences(Context context) {
    return context.getSharedPreferences(PREF_NAME, MODE);
}

public static Editor getEditor(Context context) {
    return getPreferences(context).edit();
}

} 
```

然后你也将共享偏好值用于其他活动，如下所示......

```
 int Pref = PreferenceConnector.readInteger(mainpage.this, PreferenceConnector.com_id, 0); 
```

希望上面的代码有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:47:14.033

检查您的`preferences`对象（可能是`null`）。这可能是问题所在，因为其他 String 变量永远不会为空，可以是空字符串 ( `""`)。

在这个例子中，你是否错过了`preferences`第二个中的初始化？`Activity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:49:17.103

```
String userName=preferences.getString("userid");
String password=preferences.getString("password");
Log.d("user : second", ""+userName);
Log.d("password : second", ""+password); 
```

你能不能试试这个方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:54:36.473

在这两个活动中，只需使用它来获取 SharedPreferences 对象：

`SharedPreferences prefs = getSharedPreferences("PREFS", Context.MODE_PRIVATE);`

可能是您尝试从不同的活动访问不同的首选项文件。

或者只是使用

```
PreferenceManager.getDefaultSharedPreferences(this); 
```

# java - JSONException：数据没有值

> ID：15220366
> 
> 赞同：0
> 
> 时间：2013-03-05T09:37:41.077
> 
> 标签：java, android, json

我想从此链接获取 json 数据：[link](https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,%20commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27https://www.facebook.com/BillionHands%27)

&这是我的代码：

```
private static String url = "https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,%20commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27https://www.facebook.com/BillionHands%27";

// JSON Node names
private static final String TAG_DATA = "data";
private static final String TAG_SHARE = "share_count";
private static final String TAG_LIKE = "like_count";
private TextView LikeTv;
public String like;

JSONArray data = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_about_us);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        data = json.getJSONArray(TAG_DATA);

        JSONObject c = data.getJSONObject(0);

        // Storing each json item in variable
        String share = c.getString(TAG_SHARE);
        like = c.getString(TAG_LIKE);
        Log.i("Like Count",like);

    } catch (JSONException e) {
        e.printStackTrace();
    }
    LikeTv = (TextView) findViewById(R.id.tvLike);
    LikeTv.setText(like); 
```

现在我收到“JSONException: no value for data”请帮助......我的代码有什么问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:15:58.740

好吧....
我得到了您的问题解决方案...
您编写的方法`getJSONFromUrl()`..
我确定它包含`HttpPost`对象..
将其更改为`HttpGet`它将开始工作...

**编辑**

这是我尝试过的代码

```
public class MainActivity extends Activity {

    private static String url = "https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,%20commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27https://www.facebook.com/BillionHands%27";

    // JSON Node names
    private static final String TAG_DATA = "data";
    private static final String TAG_SHARE = "share_count";
    private static final String TAG_LIKE = "like_count";
    private TextView LikeTv;
    public String like;

    JSONArray data = null;
    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONfromURL(url);

        try {
            // Getting Array of Contacts
            Log.d("JSON ","DATA "+json);
            data = json.getJSONArray(TAG_DATA);

            JSONObject c = data.getJSONObject(0);

            // Storing each json item in variable
            String share = c.getString(TAG_SHARE);
            like = c.getString(TAG_LIKE);
            Log.i("Like Count",like);

        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

class JSONParser
{
    public JSONObject getJSONfromURL(String url) {
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;

    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        HttpResponse response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        Log.e("log_tag get data string ",
                "Error converting result " + e.toString());
    }

    try {

        jArray = new JSONObject(result);
    } catch (JSONException e) {
        Log.e("log_tag create object ",
                "Error parsing data " + e.toString());
    }

    return jArray;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:59:07.997

JSON 中的“数据”元素不是数组，而是 JSON 对象。所以而不是：

```
JSONArray data = json.getJSONArray(TAG_DATA); 
```

试试这个：

```
JSONObject data = json.getJSONObject(TAG_DATA); 
```

从 JSONObject 中，您可以获得 TAG_SHARE 和 TAG_LIKE 等项目。

祝你好运！

# actionscript-3 - 如何使用 actionscript 3 使我的角色相对于鼠标位置移动？

> ID：15220373
> 
> 赞同：0
> 
> 时间：2013-03-05T09:37:59.683
> 
> 标签：actionscript-3

好的，所以我有一个名为 character_mc 的角色，当您按下向前箭头并相对于其直角扫射时，我希望它向鼠标移动。

我对actionscript很陌生，所以请您在我的原始代码中包含您的代码示例

这是我当前的代码：

```
import flash.events.MouseEvent;
//Event Listners
stage.addChild(crosshair_mc);
crosshair_mc.mouseEnabled = false;
crosshair_mc.addEventListener(Event.ENTER_FRAME, fl_CustomMouseCursor);

function fl_CustomMouseCursor(event:Event)
{
    crosshair_mc.x = stage.mouseX;
    crosshair_mc.y = stage.mouseY;
}
Mouse.hide();

stage.addEventListener(MouseEvent.MOUSE_MOVE,facecursor);
stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_KeyboardDownHandler);
//Functions
function facecursor(event):void
{
    character_mc.rotation = (180 * Math.atan2(mouseY - character_mc.y,mouseX - character_mc.x))/Math.PI + 90;

}

function fl_KeyboardDownHandler(event:KeyboardEvent):void
{
    trace("Key Code Pressed: " + event.keyCode);
    if (event.keyCode == 38)
    {
        character_mc.y = character_mc.y - 5;
    }
    if (event.keyCode == 40)
    {
        character_mc.y = character_mc.y + 5;
    }
        if (event.keyCode == 39)
    {
        character_mc.x = character_mc.x + 5;
    }
        if (event.keyCode == 37)
    {
        character_mc.x = character_mc.x - 5;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:24:05.283

我可以告诉你如何做到这一点的基本概念，但你必须将它应用到你自己的代码中。涉及将您的移动代码转换为使用矢量，然后修改矢量以获得面向鼠标的方向（或与该方向成直角）和一些数学运算。

现在，只有在每个按键情况下，角色才沿 x 和 y 轴直线移动。Left/Right 仅沿 X 移动，Up/Down 仅沿 Y 移动。

当按下向上/向下/向左/向右键时，要向鼠标移动需要角色同时沿着 X 和 Y 移动。很明显，你可以看到如果你将角色的两个 x/y 位置移动相同的量，比如 5，那么它会精确移动 45 度（尽管它实际上会移动 7.07 像素的步长，希望你能明白为什么） . 您可以将其表示为向量：(5,5)。您可以使用 Point 对象来表示此向量：

```
var movementVector:Point = new Point(5, 5);
trace(movementVector.x); // gives 5
trace(movementVector.y); // also gives 5 
```

考虑到这一点，您还可以使用向量来表示在 y 轴上直接上下移动：

```
// set the x to 0 and y to 5
movementVector.x = 0; // 0 would mean not to move the character along the x
movementVector.y = 5; // using -5 would move the character up 
```

并且仅沿 x 轴移动：

```
movementVector.x = 5; // using -5 would move the character right
movementVector.y = 0; // 0 would mean not to move the character along the y 
```

进行角色的实际移动与您现在所做的相同，除了您使用向量的值：

```
character_mc.x = character_mc.x + movementVector.x;
character_mc.y = character_mc.y + movementVector.y; 
```

现在要找出从角色位置到鼠标位置在对角线上移动的正确矢量非常简单。向量的x值是字符到鼠标的x距离，向量的y值是字符到鼠标的y距离。

假设角色在 125、100 处，鼠标在 225、150。这意味着角色和鼠标之间的距离是 100、50 x 和 y。因此，您最终会得到一个向量：

```
movementVector.x = 100;
movementVector.y = 50; 
```

如果您将该向量原样应用到角色的位置，它会立即到达鼠标（然后越过它），因为角色立即沿 x 移动 100 像素，沿 y 移动 50 像素. 步长将是 111.8 像素长 - 太大了。您需要将其缩小到角色的速度。你可以通过调用 Point 类的 normalise() 方法来缩小向量：

```
trace(movementVector.x); // gives 100
trace(movementVector.y); // gives 50

// assuming '5' is the max speed of the character
movementVector.normalise(5);

trace(movementVector.x); // gives 4.47213595499958
trace(movementVector.y); // gives 2.23606797749979 
```

这将导致现在的“步长”大小为 5。应用这将使您的角色向右侧 100 像素和从起始位置向下 50 像素的点移动 5 个像素。

要将向量精确地变换 90 度，一种快速简单的方法是交换 x 和 y 值。

如果您对 normalise() 方法在数学上的作用感到好奇，它是采用向量（或点）的 x 和 y 值并将其除以长度以获得单位向量（或步长为 1 的向量） )，然后乘以您给它的输入以将其缩放到所需的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:23:27.933

要将您`character_mc`的鼠标移向鼠标点，您只需要两者之间的方向向量：

```
var dir:Point = new Point(mouseX - character_mc.x, mouseY - character_mc.y); 
dir.Normalize();

// The following should be called when the 'up' or 'forward' arrow is pressed
// to move the character closer to mouse point
character_mc.x += dir.x; // dir can be multiplied by a 'speed' variable
character_mc.y += dir.y; 
```

围绕该点左右扫射有点棘手：

```
// Where radius is the distance between the character and the mouse
character_mc.x = mouseX + radius * Math.cos(rad);
character_mc.y = mouseY + radius * Math.sin(rad); 
```

您应该会发现本教程很有用，因为它可以完成您描述的所有内容以及更多内容： http: [//active.tutsplus.com/tutorials/actionscript/circular-motion-in-as3-make-one-moving-object-orbit-another/](http://active.tutsplus.com/tutorials/actionscript/circular-motion-in-as3-make-one-moving-object-orbit-another/)

# xpages - 在视图中单击计算的页面 url 打开空白页面（新页面）

> ID：15220381
> 
> 赞同：1
> 
> 时间：2013-03-05T09:38:33.303
> 
> 标签：xpages

我有以下视图面板。当用户点击计算的页面网址时，我想打开一个新页面。我只是似乎不明白这一点。

```
<xp:viewPanel rows="30" id="viewPanel9" showColumnHeader="false" var="rowData"viewStyle="width:auto" disableTheme="true">
<xp:this.data>
    <xp:dominoView var="view9" databaseName="product/picture.nsf"
    viewName="pictures3" keysExactMatch="true"
    keys="#{javascript:sessionScope.SelectedProduct;}">
    </xp:dominoView>
</xp:this.data>
    <xp:this.rendered><![CDATA[#{javascript:getComponent("viewPanel9").getRowCount() > 0}]]>
    </xp:this.rendered>
        <xp:viewColumn columnName="picDescr" id="viewColumn9" displayAs="link" openDocAsReadonly="true">
            <xp:this.iconSrc><![CDATA[#{javascript:thisid = rowData.getColumnValue("unid");
                thisdocument = rowData.getColumnValue("picName");
                calculatedlink = "servername/product/picture.nsf/O/"+thisid+"/$FILE/"+thisdocument;
                return calculatedlink}]]>
            </xp:this.iconSrc>
            <xp:this.pageUrl><![CDATA[#{javascript:thisid = rowData.getColumnValue("unid");
                thisdocument = rowData.getColumnValue("picName");
                picturename = thisdocument.replace("th_","");
                calculatedlink = "servername/product/picture.nsf/O/"+thisid+"/$FILE/"+picturename;
                return calculatedlink}]]></xp:this.pageUrl>
        <xp:viewColumnHeader value="Description" id="viewColumnHeader9">
        </xp:viewColumnHeader>
        </xp:viewColumn>
</xp:viewPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:34:48.297

一段时间前，我正在努力解决同样的问题。我为它创建了一个可行的解决方法，但我不知道这是否是最好的方法。

首先设置to的`displayAs`属性。所以它看起来像这样：`xp:viewColumn``hidden`

```
<xp:viewColumn columnName="picDescr" id="viewColumn9" displayAs="hidden" openDocAsReadonly="true"> 
```

现在在列中放置一个链接控件，您必须在源选项卡中执行此操作。然后，您可以将`target`属性设置`_blank`为 Link 控件。所以你的代码看起来像这样：

```
<xp:viewColumn columnName="picDescr" id="viewColumn9" displayAs="hidden" openDocAsReadonly="true">
    <xp:link escape="true" target="_blank">
        <xp:this.text><![CDATA[#{javascript:rowData.getColumnValue("picDescr");}]]></xp:this.text>
        <xp:this.value><![CDATA[#{javascript:thisid = rowData.getColumnValue("unid");
thisdocument = rowData.getColumnValue("picName");
picturename = thisdocument.replace("th_","");
calculatedlink = "servername/product/picture.nsf/O/"+thisid+"/$FILE/"+picturename;
return calculatedlink}]]></xp:this.value>
    </xp:link>
...
...
...
</xp:viewColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:27:46.860

我想我会改用重复控件。

在顶部附近建立与数据的链接，就像您所做的那样：

```
<xp:this.data>
    <xp:dominoView var="contactsView"
        viewName="TeamDirectoryNameLU">
    </xp:dominoView>
</xp:this.data> 
```

然后，你想要你的“视图”：

```
<ul>
    <xp:repeat id="contactRepeat" rows="30" value="#{contactsView}" var="dataRow" disableOutputTag="true">
        <li>
            <xp:link escape="true" id="link1">
                <xp:this.value><![CDATA[#{javascript:return "m_ContactDetails.xsp?action=OpenDocument&documentId=" + dataRow.getDocument().getUniversalID();}]]></xp:this.value>
                <xp:this.text><![CDATA[#{javascript:return dataRow.getColumnValue("Name");}]]></xp:this.text>
            </xp:link>
        </li>
    </xp:repeat>
</ul> 
```

我在 TeamStudio 最近的移动应用视频中了解了这方面的基础知识。它是 jQuery 驱动的联系人列表的一部分，可打开您单击的联系人的联系人详细信息 XPage。

# callback - 如何在序列图中显示回调 Visio 2013？

> ID：15220383
> 
> 赞同：1
> 
> 时间：2013-03-05T09:38:41.077
> 
> 标签：callback, visio, sequence-diagram

我想绘制一个包含回调的序列图。糟糕的 Visio 2013 将我的箭头/消息转换为虚线返回消息。如何禁用此行为？

这是一个最小的例子。所有消息都作为消息插入，其中两个被转换为返回消息，但只有一个正确。选择错误的箭头并将其更改为非虚线样式无效。

[https://skydrive.live.com/redir?resid=86263C7E45616D34!53626&authkey=!AA2V01jvNCiZ3TM](https://skydrive.live.com/redir?resid=86263C7E45616D34!53626&authkey=!AA2V01jvNCiZ3TM)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T10:30:29.863

我找到了解决方法。可以将连接器元件在 Z 轴上旋转大约 180°。这破坏了 PDF 导出时的矢量行为，并且仍然具有错误的语义，但似乎是一种美观的解决方案。

# c# - MSI 自定义操作安装程序状态交互

> ID：15220388
> 
> 赞同：2
> 
> 时间：2013-03-05T09:38:52.640
> 
> 标签：c#, wix, windows-installer, state, custom-action

我有一个在[.msi](http://en.wikipedia.org/wiki/Windows_Installer)部署文件后运行 UI 的自定义操作。此 UI 设置配置并将各种东西部署到各个地方（SQL 服务器等）。UI 本身在[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29) ( [.NET](http://en.wikipedia.org/wiki/.NET_Framework) 2.0) 中运行。我怎么可能获得安装程序的状态（即升级/安装/修复和静默/minimalUI/fullUI 等）？

基本上，我如何从基于 C#/.NET 2 的自定义 UI 访问安装程序所处的模式，以便我可以在我的代码中处理这些状态？

（这类似于堆栈溢出问题*[如何添加仅在卸载时发生的 WiX 自定义操作（通过 MSI）？，](https://stackoverflow.com/questions/320921/how-to-add-a-wix-custom-action-that-happens-only-on-uninstall-via-msi)*但不完全是。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:55:56.313

您可以尝试将属性值作为参数传递给为您提供此信息的自定义操作。仅当包在维护（修改或删除）中运行时才设置“ [Installed](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369297%28v=vs.85%29.aspx) ”属性。要区分修改和删除这些，您可以检查“ [REMOVE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371194%28v=vs.85%29.aspx) ”属性。这是一个列表，其中包含您需要在自定义操作中构建的条件。

1.  **安装**条件：未安装
2.  **卸载**条件：REMOVE="ALL"
3.  **维护**条件：安装并移除<>“全部”

对于升级，如果定义了旧版本，则需要使用定义要设置的属性。假设您已使用 Stack Oveflow 问题中的此方法*[如何实施 WiX 安装程序升级？](https://stackoverflow.com/questions/114165/how-to-implement-wix-installer-upgrade/4587685#4587685)*.

对于包的 UI 级别，您可以检查属性[UILevel](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372096%28v=vs.85%29.aspx)。

# sql-server - ALTER DATABASE 返回主要错误 0x80040E14，次要错误 25501

> ID：15220389
> 
> 赞同：0
> 
> 时间：2013-03-05T09:38:58.607
> 
> 标签：sql-server, sql-server-ce

我正在尝试从脚本重新创建 SQL Server Compact 数据库。我开始这样创建它：

```
CREATE DATABASE [MyDatabase]
GO 
```

这似乎奏效了。脚本中的下一个命令是：

```
ALTER DATABASE [MyDatabase] SET ANSI_NULL_DEFAULT OFF
GO 
```

以及大约两打类似的命令。我已经尝试了这些有代表性的样本，它们都返回错误：

> *主要错误 0x80040E14，次要错误 25501
> ALTER DATABASE [MyDatabase] SET ANSI_NULLS OFF
> 解析查询时出错。[令牌行号= 1，令牌行偏移量= 7，错误令牌= DATABASE]*

有谁知道这是怎么回事？

我在 Windows XP 上使用 Microsoft SQL Server Management Studio 2008 R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:51:42.400

如果您在此处查看 - [http://msdn.microsoft.com/en-US/library/ms174454(v=sql.90).aspx](http://msdn.microsoft.com/en-US/library/ms174454(v=sql.90).aspx)，我认为您无法`alter database`在 SQL Server CE 中执行此操作。

# html - KCfinder 返回的图像标签在 CKeditor 上不完整

> ID：15220391
> 
> 赞同：2
> 
> 时间：2013-03-05T09:39:00.277
> 
> 标签：html, ckeditor, image, inline-editing

KCfinder 返回的图像标签在 CKeditor 上不完整，并且未正确显示/保存。请注意，我正在使用内联 CKEditor 和 KCFinder 进行图像上传。

以下是集成代码：

ckeditor/config.js

```
 config.filebrowserBrowseUrl = base_url+'/js/kcfinder/browse.php?type=files';
    config.filebrowserImageBrowseUrl = base_url+'/js/kcfinder/browse.php?type=images';
    config.filebrowserFlashBrowseUrl = base_url+'/js/kcfinder/browse.php?type=flash';
    config.filebrowserUploadUrl = base_url+'/js/kcfinder/upload.php?type=files';
    config.filebrowserImageUploadUrl = base_url+'/js/kcfinder/upload.php?type=images';
    config.filebrowserFlashUploadUrl = base_url+'/js/kcfinder/upload.php?type=flash'; 
```

在页面 HTML

```
<div id="page_body" contenteditable="true" class="full">...</div> 
```

页面 JS

```
<script type="text/javascript">
            CKEDITOR.disableAutoInline = true;           
            var editor = CKEDITOR.inline( 'page_body', {
                on: {
                    focus: function(event){
                        var data = event.editor.getData();
                        alert(data);
                    },
                    blur: function( event ) {
                        var data = event.editor.getData();
                        var page_id = <?php echo $this->uri->segment(3) ?>;
                        var page_link =$("#page_link").val();
                        $.ajax({
                            type: 'POST',
                            url: '<?php echo site_url('admin/dashboard/ajaxChangePageData') ?>',
                            data: { page_id: page_id, page_body: data,page_link:page_link },
                            beforeSend:function(){},
                            success:function(data){},
                            error:function(){ alert("Error"); }
                        });      

                    }
                }
            } );

        </script> 
```

奇怪的是，我可以使用 KCFinder 浏览服务器/上传而不会出现任何错误，我什至可以从服务器中选择图像，并且图像在内容中成功显示。但重新加载后不存在代码宽度高度信息。我认为为图像创建的 html 不完整

在源代码模式下，我看到-

```
<img alt="" src="/gchalk/content/images/333(1).jpg"  300px; height: 224px;" /> 
```

如果我第二次对 div 进行一些更改，比如添加一些文本，情况就会变得更糟。图像丢失并被视为文本，上面的代码显示为

在源模式-

```
&lt;img alt=&quot;&quot; data-cke-saved-src=&quot;/gchalk/content/images/333(1).jpg&quot; src=&quot;/gchalk/content/images/333(1).jpg&quot; 300px;=&quot;&quot; height:=&quot;&quot; 224px;&quot;=&quot;&quot;&gt; 
```

它在浏览器/编辑器上显示为 -

```
<img alt="" data-cke-saved-src="/gchalk/content/images/333(1).jpg" src="/gchalk/content/images/333(1).jpg" 300px;="" height:="" 224px;"=""> 
```

我撕了一天的头发，找不到解决办法。请帮我弄清楚如何解决它。

哦，为了记录，文本通过 ajax 帖子在 MySQL 中保存为“TEXT”，我很确定这不是问题，但仍然只是说！

我注意到图像标签在默认的ckeditor（不是内联）中也被弄乱了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:29:48.813

可能影响代码输出的事情：

1-使用 PDO 时的[魔术引号。](http://php.net/manual/en/security.magicquotes.php)如果它们打开，请在您的 php.ini 中将它们关闭！它们已被弃用。我为什么要告诉你这些？将是因为在您的源模式下，您`300px; height: 224px;"` 在存储它并显示它时拥有`300px;="" height:="" 224px;"=""`

2-你的 CKeditor 包。尝试下载并重新上传您的 Ckeditor（如果可能，将其更新到最新版本）

除此之外，我认为您提供的代码没有任何问题。祝你好运！

# java - Maven包编译错误

> ID：15220392
> 
> 赞同：23
> 
> 时间：2013-03-05T09:39:00.790
> 
> 标签：java, maven, java-7

我在 Eclipse 中使用 Maven 创建了一个 webapp 项目。当我在命令提示符下运行命令 mvn package 时，它​​显示以下错误。

```
[ERROR] COMPILATION ERROR :
[INFO] -------------------------------------------------------------
[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.310s
[INFO] Finished at: Tue Mar 05 14:32:23 IST 2013
[INFO] Final Memory: 16M/218M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.0:compile (default-compile) on project  Compilation fa
ilure
[ERROR] ***No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?***
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我试图改变jdk和jre。但不工作。仍然显示相同的错误

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-19T22:06:42.373

在**Windows 7 - 64 位**中，存在权限问题，阻止安装程序将文件解压缩`C:\Program Files\Java\jdk1.6.xx\lib\tools.jar`到本地。这个 jar 文件是`maven-compiler-plugin`3.x 版本使用的，而不是通常的`javac`

**解决方案：** 以管理员身份运行 Java JDK 安装程序！并确保`tools.jar`坐在`C:\Program Files\Java\jdk1.6.xx\lib\`

如果您使用的是 m2e maven 集成插件，您希望通过 Eclipse 中的以下步骤查看该文件对 Eclipse 可见：

*   转到窗口 -> 首选项 -> Java -> 已安装的 JRE
*   选择您正在使用的 JDK (C:\Program Files\Java\jdk1.6.xx)
*   按 Edit 查看包含 tools.jar 的 jar 列表，您可以将其添加为 Add External JAR

然后通过以下步骤配置 maven 运行：

*   运行->运行配置->填写名称、基本目录和目标。
*   然后在同一窗口中移动到 JRE 选项卡并指向 JDK \jdk1.6.xx\

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-16T20:00:53.710

转到“运行时配置”并将 JRE 配置为 JDK。

[![为您的运行时选择正确的 JDK](../Images/addbb29ae4de3334fa7b543a2d1db008.png)](https://i.stack.imgur.com/WGAZi.png)

或者正如@PawanKumarBaranwal 建议的那样，设置您的默认JDK。但请注意您是否配置了多个 JRE。

[![选择默认 JRE](../Images/c6488056971ad438b3e7fbe01c7f4cb8.png)](https://i.stack.imgur.com/trpb7.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-17T19:14:10.240

对我有用的（32 位 Windows 7）是将以下内容添加到您的路径环境变量中：

%JAVA_HOME%\lib;

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-16T19:22:58.410

尝试这个。转到窗口 --> 首选项 --> Java --> 已安装的 JRE。

双击 JRE，它位于已安装的 JRE 中。

在 JRE Home 中提供JDK 路径（例如`C:\Program Files\Java\jdk1.7.0_80\`），并将 JRE 名称指定为 JDK。单击完成，然后单击确定。

对我来说，它奏效了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-11T11:23:34.877

> 转到 windows -> 首选项 -> Java -> 已安装的 JRE

可能已经添加了 jre [![在此处输入图像描述](../Images/24b3e38b7806f700cbacaf4ad4c3cadd.png)](https://i.stack.imgur.com/3wkJM.png)

> 单击添加 -> 标准 VM -> 下一步 -> 目录

并在我的案例路径中浏览 JDK 是`C:\Program Files\Java\jdk1.8.0_111`

> 然后点击完成。

你会看到这样的窗口

[![在此处输入图像描述](../Images/3ff72927f6ce9b95efb27f24d6f51528.png)](https://i.stack.imgur.com/qozSv.png)

> 选择 JDK -> 应用 -> 确定

你完成了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-15T17:18:18.257

就我而言，错误“此环境中未提供编译器。也许您在 JRE 而不是 JDK 上运行”是由于 JRE 安装在与 JDK 下的默认位置不同的位置。

在 64 位 linux 下运行，我将 Oracle 的 64 位 JDK SE 1.6.0_45 安装在`/opt/java`. 32 位和 64 位 JRE 安装在`/opt/java/jre32`和`/opt/java/jre64`，带有 jre 符号链接：（即`ln -s jre64 jre`），因此`jre ->`./jre64 `(meaning`/opt/jdk/jre `was a symlink referencing`/opt/jdk/jre64）。

一旦我将 jre64 重命名为 jre（即。`rm jre ; mv jre64 jre ; ln -s jre jre64`），这个问题就消失了；我能够使用 maven（在 netbeans 内部）进行构建。

Maven 似乎正在查看 JRE 路径，说“jre64 不是默认 JRE-inside-of-JDK 安装的正确名称，因此假设 ../ 处不存在 JDK”），这将阻止它从解析包含 tools.jar 等的 JDK lib 目录的位置。

尚未对其进行测试，但如果 JRE 不在默认位置（或者可能不在`%JAVA_HOME%\jre`目录中），则在 Windows 下可能会发生同样的事情。如果同时安装了 JDK 和 JRE，Oracle 的安装程序希望将 JRE 安装在`%JAVA_HOME%\jre6`，而不是`%JAVA_HOME%\jr`e。那可能是因为`\jre`JDK卸载过程需要该目录；如果 JRE 已经安装在 JDK 的 JRE`\jre`目录之上，而不是在`\jre`6 处，卸载 JRE 后卸载 JDK 将失败，除非复制 \jre 目录，卸载 JRE，并将`\jre`副本恢复为`\jre`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-27T10:07:27.340

去`preferences>installed JRE>`

然后点击`add`

选择 `C:\program files\java\`

按`enter`

它将搜索除 jdk 之外的其他 jre，然后选择未选择的

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-22T05:35:21.757

有几个选项可以指定。

步骤：在项目资源管理器中的项目上转到运行-> 运行配置-> 单击 Maven 构建-> 单击您的构建配置/或创建一个新配置。您将看到下面给定快照的窗口，单击那里的 JRE 选项卡。

您看到您有 3 个选项 1) 工作区默认 JRE 2) 执行环境 3) 备用 JRE 1) 工作区默认 JRE 是从顶部的“窗口”菜单设置的 -> 首选项 -> Java -> 已安装的 JRE -在这里您可以添加您的jdk 2) 执行环境 jdk 可以在 pom.xml 中设置

```
<build>
<plugins>
    <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.1</version>
        <configuration>
            <fork>true</fork>
        <executable>C:\Program Files\Java\jdk1.7.0_45\bin\javac.exe</executable>
    </configuration>
</plugin> 
```

3) 备用 JRE 可用于从您的目录中选择 jdk

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-25T22:56:36.223

1.  检查您的安装 JDK 及其路径 -[下载链接](https://www.oracle.com/technetwork/java/javase/downloads/index.html)

2.  检查环境变量的路径 -[检查](https://www.youtube.com/watch?v=bEroNNzqlF4&app=desktop)

3.  添加eclipse `windows->preferences->Java->installed JREs->add->standart VM -> JRE home (jdk path exmp:'C:\Program Files\Java\jdk1.8.0_221')`然后应用。

4.  右键单击您的`project -> properties -> select (Libraries -> JRE System libraries) -> edit -> choose workspace default JRE (JDK.1.8.0_221)`

5.  右键单击您的项目-> Maven update clean 并再次安装项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-22T14:15:03.643

[以以下方式设置路径](https://i.stack.imgur.com/yPibi.png)

将 jdk 的路径保留在路径变量中的第一位，这样其他 java 路径将被忽略。编译错误将得到解决。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-04T15:49:56.737

我正在为 Eclipse (V3.3) 使用 maven 插件，并且在一段时间内一直在努力解决这个错误。我终于找到了与陈旧的 java 源相关的解决方案：它与 JRE 或 JDK 无关（我使用 JRE 1.7）。

我在其他论坛上发现这是 maven-compiler-plugin 中的一个已知问题（V3.3 和 3.5.1 的结果相同）。

所以，我只是手动重新编译过时的源代码并再次运行目标，这次没有任何问题。

要找出陈旧的源，请使用选项 -X（调试）运行目标并查找以

```
[DEBUG] Stale source detected: 
```

表示一个java类文件（要手动重新编译......）。

希望这会很有用，因为 maven 编译器给出的消息让我在错误的方向上搜索（玩 JRE、JDK、JAVA-HOME 等）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-04T20:24:02.927

在创建第二个工作区以在单独的源代码分支中工作后，我遇到了一种奇怪的情况，我可以在新工作区的命令行中进行 Maven 构建，但不能在 Eclipse 中。我尝试按照其他人的描述将 JRE 配置设置为 JDK，但仍然没有运气。我最终不得不搜索新工作区的 .metadata 目录的全部内容，以找到拒绝重新配置的违规文件。罪魁祸首是

```
.plugins/org.eclipse.core.runtime/.settings/org.eclipse.jdt.launching.prefs 
```

尽管我的配置发生了变化，它仍然指向错误的目录。我进行了手动编辑以提供正确的 JDK 名称和位置。我还编辑了下的文件

```
.plugins/org.eclipse.debug.core/.launches 
```

这些同样都指向 JRE 而不是 JDK。完成这些编辑后，我可以在 Eclipse 中的第二个工作区中构建项目，而不仅仅是从命令行。

# android - GoogleAccountCredential + Google Play Services + Refresh Token - 这如何协同工作？

> ID：15220393
> 
> 赞同：3
> 
> 时间：2013-03-05T09:39:03.197
> 
> 标签：android, google-drive-api, google-play-services

大约 2 周前，我发布了一个非常成功的应用程序。但从昨天开始，用户不断向我发送有关 Drive 不再可用的电子邮件。经过快速调试，我发现对 Drive API 的请求现在返回“403 Forbidden”->“Access Not Configured”。

我认为这可能是刷新令牌未正确处理的问题。

我正在使用以下代码（来自 Android Drive SDK 示例）：

```
mCredentials = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);
String accountName = PreferenceManager.getDefaultSharedPreferences(this).getString(PREF_DRIVE_NAME, null);
if (accountName != null) {
     setupDrive(accountName);
} else {
     startActivityForResult(mCredentials.newChooseAccountIntent(), 0);
} 
```

`setupDrive(...)`看起来像这样：

```
 mCredentials.setSelectedAccountName(accountName);
 try {
        mCredentials.getToken();
 } catch (Exception e) {
        Log.w(AbstractDriveActivity.class.getSimpleName(), "Error getting auth token", e);
        if (e instanceof UserRecoverableAuthException) {
              Intent intent = ((UserRecoverableAuthException) e).getIntent();
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK).addFlags(Intent.FLAG_FROM_BACKGROUND);
        startActivity(intent);
        } else {
               Toast.makeText(AbstractDriveActivity.this, getString(R.string.toast_drive_setup_error),
                            Toast.LENGTH_SHORT).show();
               finish();
        }
  }
  drive = new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(),
                    mCredentials).build(); 
```

知道这里可能有什么问题吗？

据我了解，`GoogleAccountCredential`使用 Google Play 服务来管理 OAuth2 流程，您需要提供的只是用户名。我错了吗？我错过了什么？

顺便说一句：清除应用数据后，再次选择 Google 帐户，一切正常。这就是为什么我认为它与刷新令牌有关。

戈登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T22:48:31.053

没有保证，但问题可能来自这里：

```
mCredentials = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE); 
```

这种方法对我来说似乎已弃用。您应该升级您的 SDK 和环境并将其更改为：

```
mCredentials = GoogleAccountCredential.usingOAuth2(this, Arrays.asList(DriveScopes.DRIVE)); 
```

# java - Apache HttpClient - 在查询中使用 utf-8 字符向 ETools.ch 发布请求

> ID：15220396
> 
> 赞同：1
> 
> 时间：2013-03-05T09:39:11.130
> 
> 标签：java, apache, utf-8, http-post, apache-commons-httpclient

如果查询不包含任何 utf-8 字符，则代码可以正常工作。只要有一个 utf-8 字符，ETools 就会提供我没想到的结果。例如，对于`"trees"`我得到正确的结果，对于`"bäume"`（树木的德语单词），我得到奇怪的结果。看起来 ETools 接收查询 as`"b%C3%A4ume"`并查找具有精确那些字符而不是 for 的查询`"bäume"`。我认为如果我设置一些标头参数，问题可能会解决，但我不知道那里可能有哪些参数。

```
String query = "some+query+with+utf8+chars";

HttpClient client = new DefaultHttpClient();
HttpPost request = new HttpPost();

List<NameValuePair> parameters = new ArrayList<NameValuePair>();
parameters.add(new BasicNameValuePair("query", query));
parameters.add(new BasicNameValuePair("country", "web"));
parameters.add(new BasicNameValuePair("language", "all"));
parameters.add(new BasicNameValuePair("dataSourceResults", String.valueOf(40)));
parameters.add(new BasicNameValuePair("pageResults", String.valueOf(40)));
request.setEntity(new UrlEncodedFormEntity(parameters, "UTF-8"));
request.setHeader("Content-Type", "application/x-www-form-urlencoded");
request.setURI("http://www.etools.ch/searchAdvancedSubmit.do?page=2");

MyResponse myResponse = client.execute(request, myResponseHandler);

request.reset();
client.getConnectionManager().shutdown(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:50:05.500

您应该至少将您的字符集添加到 Content-Type 中（默认为 latin1）：

```
request.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"); 
```

如果这不起作用，则可能是服务器错误。您可能想尝试将表单提交为`multipart/form-data`( [RFC 2388](http://www.ietf.org/rfc/rfc2388.txt) ) 而不是 URL 编码。已经有一个[StackOverflow 答案](https://stackoverflow.com/questions/1378920/how-can-i-make-a-multipart-form-data-post-request-using-java)，其中包含您可以使用的示例。

# javafx-2 - 使用 mockito 捕获 javafx Change 事件会引发 IllegalStateException

> ID：15220397
> 
> 赞同：0
> 
> 时间：2013-03-05T09:39:11.360
> 
> 标签：javafx-2, mockito

我想使用 mockito 进行测试，当 javafx ObservableList 被修改时会触发一些事件。

我试过这样：

```
@Test
public void handleListChanged() throws Exception {
    // [given]
    ObservableList<String> list = FXCollections.observableArrayList();
    ListChangeListener<String> listener = mock(ListChangeListener.class);
    list.addListener(listener);

    // [when]
    list.add("test");

    // [then]
    ArgumentCaptor<Change> argument = ArgumentCaptor.forClass(Change.class);
    verify(listener).onChanged(argument.capture());
    assertTrue(argument.getValue().wasAdded());
} 
```

bu an`IllegalStateException`在最后一行加注：

```
java.lang.IllegalStateException
at com.sun.javafx.collections.NonIterableChange.checkState(NonIterableChange.java:101)
at com.sun.javafx.collections.NonIterableChange.getPermutation(NonIterableChange.java:81)
at javafx.collections.ListChangeListener$Change.wasPermutated(ListChangeListener.java:156)
at javafx.collections.ListChangeListener$Change.wasAdded(ListChangeListener.java:165)
at FXCollectionsTest.handleListChanged(FXCollectionsTest.java:28 
```

[wasAdded()](http://docs.oracle.com/javafx/2/api/javafx/collections/ListChangeListener.Change.html#wasAdded%28%29)方法的文档警告说，*“如果此更改处于初始状态”*`IllegalArgumentException`可能会抛出一个，但我不明白。

 ** * *

为什么我的代码不起作用？

是否有使用 mockito 测试此代码的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:31:37.623

您必须`next`先在`Change`对象上调用该方法，然后才能调用任何其他方法，例如`wasAdded`.

**单元测试**

```
assertTrue(argument.getValue().next());
assertTrue(argument.getValue().wasAdded()); 
```

**文档**

> 公共抽象布尔下一个（）
> 
> > 转到下一个更改。在初始状态下是无效的，需要在调用其他方法之前调用 next()。第一次 next() 调用将使该对象代表第一次更改。

[来源](http://docs.oracle.com/javafx/2/api/javafx/collections/ListChangeListener.Change.html#next%28%29)*

# android - 在android中调整谷歌地图（api v2）缩放级别

> ID：15220404
> 
> 赞同：2
> 
> 时间：2013-03-05T09:39:30.787
> 
> 标签：android, google-maps, android-fragments

我在我的应用程序中使用`maps api v2`。我必须在地图上显示我的当前位置和目标位置，以便这两个位置在屏幕上都是可见的（以最大可能的缩放级别）。这是我到目前为止所尝试的......

```
googleMap = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.mapFragment)).getMap();

 if(googleMap != null){

        googleMap.setMyLocationEnabled(true);
        LatLng targetLocationLatLng = new LatLng(modelObject.getLattitude(), modelObject.getLongitude());
        LatLng currentLocationLatLng = new LatLng(this.currentLocationLattitude, this.currentLocationLongitude);
        googleMap.addMarker(new MarkerOptions().position(targetLocationLatLng).title(modelObject.getLocationName()).icon(BitmapDescriptorFactory.fromResource(R.drawable.location_icon)));
        LatLngBounds bounds = new LatLngBounds(currentLocationLatLng, targetLocationLatLng);
        googleMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 3));

    } 
```

由于以下原因，应用程序被强制关闭： `java.lang.IllegalStateException:` `Map`大小不应为 0。最有可能的是，`layout`地图视图尚未发生。

我怎样才能获得最大可能的缩放级别？请帮我。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T14:05:01.537

在我的项目中，我使用[`com.google.android.gms.maps.model.LatLngBounds.Builder`](http://developer.android.com/reference/com/google/android/gms/maps/model/LatLngBounds.Builder.html)

适应您的源代码，它应该看起来像这样：

```
Builder boundsBuilder = new LatLngBounds.Builder();
boundsBuilder.include(currentLocationLatLng);
boundsBuilder.include(targetLocationLatLng);
// pan to see all markers on map:
LatLngBounds bounds = boundsBuilder.build();
googleMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T11:23:29.480

避免此问题的一个好方法是对包含地图片段和侦听器的布局使用 ViewTreeObserver，以确保首先使用 addOnGlobalLayoutListener 初始化布局（并且没有宽度=0），如下所示：

```
 private void zoomMapToLatLngBounds(final LinearLayout layout,final GoogleMap mMap, final LatLngBounds bounds){

    ViewTreeObserver vto = layout.getViewTreeObserver(); 
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() { 
        @SuppressWarnings("deprecation")
        @Override 
        public void onGlobalLayout() { 
          layout.getViewTreeObserver().removeGlobalOnLayoutListener(this); 
          mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds,OVERVIEW_MAP_PADDING));
        } 
    });

} 
```

# facebook - 在 facebook 墙上发布链接 - 图片不显示

> ID：15220410
> 
> 赞同：0
> 
> 时间：2013-03-05T09:39:52.850
> 
> 标签：facebook

当我在 FB 墙上发布视频链接时，缩略图第一次出现，然后我从框中删除链接，然后再写一遍，这就是现在的重击消散器。

例如，这是一个链接，facebook 第一次会显示它。

[http://reshet.tv/Shows/Dating_In_The_Dark/video/.aspx?vml=211830](http://reshet.tv/Shows/Dating_In_The_Dark/video/.aspx?vml=211830)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:14:01.687

关于上面的对话，是Facebook的机制。没办法。假设您是页面的作者，您已经将正确的 OG 标签放在页面头部，所以您无能为力。

# c# - 实体框架。删除表中的所有行

> ID：15220411
> 
> 赞同：329
> 
> 时间：2013-03-05T09:39:53.477
> 
> 标签：c#, sql, linq, entity-framework

如何使用实体框架快速删除表中的所有行？

我目前正在使用：

```
var rows = from o in dataDb.Table
           select o;
foreach (var row in rows)
{
    dataDb.Table.Remove(row);
}
dataDb.SaveChanges(); 
```

但是，执行需要很长时间。

有没有其他选择？

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2013-09-24T16:06:28.790

对于那些像我一样在谷歌上搜索并最终来到这里的人，这就是您目前在 EF5 和 EF6 中执行此操作的方式：

```
context.Database.ExecuteSqlCommand("TRUNCATE TABLE [TableName]"); 
```

假设上下文是`System.Data.Entity.DbContext`

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2014-07-01T22:09:46.943

***警告：****以下仅适用于小表（认为 < 1000 行）*

这是一个使用实体框架（不是 SQL）来删除行的解决方案，因此它不是特定于 SQL 引擎（R/DBM）的。

这假设您这样做是为了测试或类似情况。任何一个

*   数据量小*或*
*   性能无所谓

* * *

只需调用：

```
VotingContext.Votes.RemoveRange(VotingContext.Votes); 
```

* * *

假设这种情况：

```
public class VotingContext : DbContext
{
    public DbSet<Vote> Votes{get;set;}
    public DbSet<Poll> Polls{get;set;}
    public DbSet<Voter> Voters{get;set;}
    public DbSet<Candidacy> Candidates{get;set;}
} 
```

对于更整洁的代码，您可以声明以下扩展方法：

```
public static class EntityExtensions
{
    public static void Clear<T>(this DbSet<T> dbSet) where T : class
    {
        dbSet.RemoveRange(dbSet);
    }
} 
```

那么上面就变成了：

```
VotingContext.Votes.Clear();
VotingContext.Voters.Clear();
VotingContext.Candidacy.Clear();
VotingContext.Polls.Clear();
await VotingTestContext.SaveChangesAsync(); 
```

我最近使用这种方法为每个测试用例运行清理我的测试数据库（它显然比每次从头开始重新创建数据库要快，尽管我没有检查生成的删除命令的形式）。

* * *

**为什么会慢？**

1.  EF 将获得所有行 (VotingContext.Votes)
2.  然后将使用他们的 ID（不确定如何，没关系）来删除它们。

因此，如果您正在处理大量数据，您将终止 SQL Server 进程（它将消耗所有内存），而 IIS 进程也是如此，因为 EF 将以与 SQL Server 相同的方式缓存所有数据。如果您的表包含大量数据，请不要使用这个。

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2013-03-05T09:42:21.600

使用 SQL 的[`TRUNCATE TABLE`](http://msdn.microsoft.com/en-gb/library/ms177570.aspx)命令将是最快的，因为它对表而不是单个行进行操作。

```
dataDb.ExecuteStoreCommand("TRUNCATE TABLE [Table]"); 
```

假设`dataDb`是 a `DbContext`（不是`ObjectContext`），您可以将其包装并使用如下方法：

```
var objCtx = ((System.Data.Entity.Infrastructure.IObjectContextAdapter)dataDb).ObjectContext;
objCtx.ExecuteStoreCommand("TRUNCATE TABLE [Table]"); 
```

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2014-02-19T15:58:47.690

```
var all = from c in dataDb.Table select c;
dataDb.Table.RemoveRange(all);
dataDb.SaveChanges(); 
```

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2013-03-05T09:43:17.077

```
using (var context = new DataDb())
{
     var ctx = ((System.Data.Entity.Infrastructure.IObjectContextAdapter)context).ObjectContext;
     ctx.ExecuteStoreCommand("DELETE FROM [TableName] WHERE Name= {0}", Name);
} 
```

或者

```
using (var context = new DataDb())
{
     context.Database.ExecuteSqlCommand("TRUNCATE TABLE [TableName]");
} 
```

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2018-09-01T08:43:26.743

你可以在没有 Foreach 的情况下做到这一点

```
dataDB.Table.RemoveRange(dataDB.Table);
dataDB.SaveChanges(); 
```

这将删除所有行

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2015-11-16T20:49:47.280

这样可以避免使用任何 sql

```
using (var context = new MyDbContext())
{
    var itemsToDelete = context.Set<MyTable>();
    context.MyTables.RemoveRange(itemsToDelete);
    context.SaveChanges();
} 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-09-23T13:21:25.477

当我不得不处理一个特殊情况时，我遇到了这个问题：完全更新“叶”表中的内容（没有 FK 指向它）。这涉及删除所有行并放置新行信息，并且应该以事务方式完成（如果插入因任何原因失败，我不希望最终得到一个空表）。

我已经尝试过这种`public static void Clear<T>(this DbSet<T> dbSet)`方法，但没有插入新行。另一个缺点是整个过程很慢，因为行被逐一删除。

所以，我已经切换到`TRUNCATE`方法，因为它更快并且它也是[ROLLBACKable](http://blog.sqlauthority.com/2010/03/04/sql-server-rollback-truncate-command-in-transaction/)。它还重置身份。

使用存储库模式的示例：

```
public class Repository<T> : IRepository<T> where T : class, new()
{
    private readonly IEfDbContext _context;

    public void BulkInsert(IEnumerable<T> entities)
    {
        _context.BulkInsert(entities);
    }

    public void Truncate()
    {
        _context.Database.ExecuteSqlCommand($"TRUNCATE TABLE {typeof(T).Name}");
    }
 }

 // usage 
 DataAccess.TheRepository.Truncate();
 var toAddBulk = new List<EnvironmentXImportingSystem>();

 // fill toAddBulk from source system
 // ...

 DataAccess.TheRepository.BulkInsert(toAddBulk);
 DataAccess.SaveChanges(); 
```

当然，如前所述，外键引用的表不能使用此解决方案（TRUNCATE 失败）。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2020-09-19T20:12:08.690

```
context.TableName.RemoveRange(context.TableName);
context.SaveChanges(); 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-04-19T19:21:34.120

如果

```
using(var db = new MyDbContext())
{
    await db.Database.ExecuteSqlCommandAsync(@"TRUNCATE TABLE MyTable"););
} 
```

原因

> 无法截断表“MyTable”，因为它被 FOREIGN KEY 约束引用。

我用这个：

```
using(var db = new MyDbContext())
{
    await db.Database.ExecuteSqlCommandAsync(@"DELETE FROM MyTable WHERE ID != -1");
} 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-08-22T10:58:21.137

```
var data = (from n in db.users select n);
db.users.RemoveRange(data);
db.SaveChanges(); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-09-01T19:00:23.823

如果您想清除整个数据库。

由于外键约束，截断表的顺序很重要。这是一种暴力破解此序列的方法。

```
 public static void ClearDatabase<T>() where T : DbContext, new()
    {
        using (var context = new T())
        {
            var tableNames = context.Database.SqlQuery<string>("SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME NOT LIKE '%Migration%'").ToList();
            foreach (var tableName in tableNames)
            {
                foreach (var t in tableNames)
                {
                    try
                    {

                        if (context.Database.ExecuteSqlCommand(string.Format("TRUNCATE TABLE [{0}]", tableName)) == 1)
                            break;

                    }
                    catch (Exception ex)
                    {

                    }
                }
            }

            context.SaveChanges();
        }
    } 
```

用法：

```
ClearDatabase<ApplicationDbContext>(); 
```

请记住在此之后重新实例化您的 DbContext。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-10-14T16:13:55.770

以下适用于 SQLite 数据库（使用实体框架）。

似乎清除所有数据库表的最快方法是 using `context.Database.ExecuteSqlCommand("some SQL")`，正如上面的一些评论也突出显示的那样。在这里，我还将展示如何重置表的“索引”计数。

```
context.Database.ExecuteSqlCommand("delete from TableA");
context.Database.ExecuteSqlCommand("delete from sqlite_sequence where name='TableA'");//resets the autoindex

context.Database.ExecuteSqlCommand("delete from TableB");
context.Database.ExecuteSqlCommand("delete from sqlite_sequence where name='TableB'");//resets the autoindex 

context.Database.ExecuteSqlCommand("delete from TableC");
context.Database.ExecuteSqlCommand("delete from sqlite_sequence where name='TableC'");//resets the autoindex 
```

重要的一点是，如果你的表中使用外键，必须先删除子表，再删除父表，所以删除时表的顺序（层次结构）很重要，否则可能会出现SQLite异常。

笔记：`var context = new YourContext()`

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-01-29T10:34:19.357

在 EFCore（我使用的版本是 3.1）中，您可以使用以下内容删除所有行 -

```
context.Database.ExecuteSqlRaw("TRUNCATE TABLE [TableName]"); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-09-27T16:18:53.063

这在 EF 5 中正常工作：

```
YourEntityModel myEntities = new YourEntityModel();

var objCtx = ((IObjectContextAdapter)myEntities).ObjectContext;
objCtx.ExecuteStoreCommand("TRUNCATE TABLE [TableName]"); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-07-14T18:14:56.047

这对我有用... EF v3.1.5

```
context.ModelName.RemoveRange(context.ModelName.ToList());
context.SaveChanges(); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-10-04T13:36:46.010

在我的代码中，我并没有很好地访问 Database 对象，因此您可以在 DbSet 上执行此操作，您也可以在其中使用任何类型的 sql。它会像这样结束：

```
var p = await _db.Persons.FromSql("truncate table Persons;select top 0 * from Persons").ToListAsync(); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-05T09:28:28.510

删除所有记录。不要像“截断”那样重置主索引。

```
/// <summary>
/// SET - DELETE all record by table - no truncate - return deleted records
/// </summary>
public static int setListDelAllMYTABLE()
{
    // INIT
    int retObj = 0;
    using (MYDBEntities ctx = new MYDBEntities())
    {
        // GET - all record
        var tempAllRecord = ctx.MYTABLE.ToList();
        // RESET
        ctx.MYTABLE.RemoveRange(tempAllRecord);
        // SET - final save
        retObj += ctx.SaveChanges();
    }
    // RET
    return retObj;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-01-23T05:42:01.483

如果是 MVC，你可以这样做：

```
public async Task<IActionResult> DeleteAll()
{
    var list = await _context.YourClass.ToListAsync();
    _context.YourClass.RemoveRange(list);
    await _context.SaveChangesAsync();
    return RedirectToAction(nameof(Index));
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-30T04:03:46.507

确保当您尝试删除父级时，所有子级将在删除时级联。或者孩子有可以为空的外键。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-12-04T18:22:38.370

适用于 EF Core 3

```
public static class EntityExtensions
{
    public static async Task ClearAsync<T>(this DbSet<T> dbSet) where T : class
    {
        var command = dbSet.CreateDbCommand();
        command.CommandText = $"TRUNCATE TABLE {dbSet.EntityType.GetSchema()}.{dbSet.EntityType.GetTableName()}";
        await command.ExecuteNonQueryAsync();
    }
} 
```

但请注意 dbSet.CreateDbCommand 是一个扩展

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-07-28T15:55:19.077

这是 Ron 流行[解决方案](https://stackoverflow.com/a/18986676/529618)的一个变体，它通过利用堆栈溢出的另一种流行解决方案来确定实体框架类的基础表名，从而避免使用硬编码字符串表名。

使用这些扩展方法，解决方案如下所示：

```
_dbContext.TruncateTable<TheTableName>(); 
```

*（`this.TruncateTable<...`在 EF DBContext 类或部分类文件中编辑代码时使用）*

这是扩展类：

```
public static class EntityFrameworkExtensions
{
    private static string ParseTableNameFromSQL(string sql)
    {
        Regex regex = new Regex("FROM (?<table>.*) AS");
        Match match = regex.Match(sql);

        string table = match.Groups["table"].Value;
        return table;
    }

    public static string GetTableName<T>(this IObjectContextAdapter context) where T : class =>
        ParseTableNameFromSQL(context.ObjectContext.CreateObjectSet<T>().ToTraceString());

    public static void TruncateTable<T>(this DbContext dbContext) where T : class =>
        dbContext.Database.ExecuteSqlCommand($"TRUNCATE TABLE {dbContext.GetTableName<T>()}");

    public static void DeleteAllTableRows<T>(this DbContext dbContext) where T : class =>
        dbContext.Database.ExecuteSqlCommand($"DELETE FROM {dbContext.GetTableName<T>()}");
} 
```

`DeleteAllTableRows`如果您的表不能被截断（例如由于外键引用），最后一个扩展方法是一个有用的替代方法 - 这仍然比实体框架`RemoveAll`替代方法快得多。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-02-19T08:46:22.907

```
var list = db.Discounts.ToList().Select(x => x as Discount);
foreach (var item in list)
{
    db.Discounts.Remove(item);
}
db.SaveChanges(); 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-12-19T00:15:54.427

这里几乎所有的答案都有几个问题：

1]硬编码的sql。括号是否适用于所有数据库引擎？
2] 实体框架`Remove`和`RemoveRange`调用。这会将所有实体加载到受操作影响的内存中。哎呀。
3] 截断表。与外键引用中断，可能不适用于所有数据库引擎。

使用[https://entityframework-plus.net/](https://entityframework-plus.net/)，他们处理跨数据库平台的东西，将删除翻译成正确的 sql 语句并且不将实体加载到内存中，并且该库是免费和开源的。

*免责声明：我不隶属于 nuget 包。他们确实提供了一个付费版本，可以做更多的事情。*

# jquery - Jquery：获取具有完整路径的网站图标

> ID：15220412
> 
> 赞同：5
> 
> 时间：2013-03-05T09:39:53.820
> 
> 标签：jquery, google-chrome-extension, path, favicon

我想从带有 Jquery 的网站上获取网站图标的链接。我只是使用`$('link[rel="shortcut icon"]').attr('href');`它，它工作正常。

但是...我并不总是有完整的路径。例如我可以有类似的东西

```
http://mywebsite.com/myicon.ico 
```

或者只是一个相对路径

```
/myicon.ico 
```

我希望始终拥有完整路径，即使 Url 被编码为相对路径。有一个简单的解决方案吗？

*我将其用作 Google Chrome 扩展程序中的内容脚本。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T09:42:30.960

如果你使用`href`节点的属性，你应该总是得到一个绝对路径：

```
var url = $('link[rel="shortcut icon"]')[0].href; 
```

或者：

```
var url = $('link[rel="shortcut icon"]').prop('href'); 
```

或者，在纯 JavaScript 中：

```
var url = document.querySelector('link[rel="shortcut icon"]').href; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-25T04:07:35.620

大多数网站在链接标签中没有 rel 的通用名称。有些有

```
<link rel="icon" href="https://pages.ebay.com/favicon.ico">
<link rel="shortcut icon" href="https://cdn.sstatic.net/Sites/stackoverflow/img/favicon.ico?v=4f32ecc8f43d"> 
```

因此，如果在查询选择器中使用正则表达式，而不是匹配精确的 rel 标签，它会更好

```
$("link:regex(rel, .*icon.*)").prop('href') 
```

如果这给出了无与伦比的伪类：正则表达式异常，您可以使用它

```
$('link[rel~="icon"]').prop('href') 
```

# java - java线程在使用executorService执行oracle查询时挂起

> ID：15220417
> 
> 赞同：0
> 
> 时间：2013-03-05T09:40:19.333
> 
> 标签：java, multithreading, oracle, jdbc

```
"pool-11-thread-1" prio=10 tid=0x0a974c00 nid=0x7210 runnable [0x3f3ad000]
   java.lang.Thread.State: RUNNABLE
  at oracle.jdbc.driver.T2CStatement.t2cDefineExecuteFetch(Native Method)
  at oracle.jdbc.driver.T2CPreparedStatement.doDefineExecuteFetch(T2CPreparedStatement.java:878)
  at oracle.jdbc.driver.T2CPreparedStatement.executeForRows(T2CPreparedStatement.java:760)
  at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1062)
  at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1126)
  at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3339)
  at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3445)
  - locked <0x69579fb0> (a oracle.jdbc.driver.T2CPreparedStatement)
  - locked <0x66157d68> (a oracle.jdbc.driver.T2CConnection)
  at org.jboss.resource.adapter.jdbc.CachedPreparedStatement.execute(CachedPreparedStatement.java:216)
  at org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.execute(WrappedPreparedStatement.java:209)
  at com.ibatis.sqlmap.engine.execution.SqlExecutor.executeQuery(SqlExecutor.java:180)
  at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.sqlExecuteQuery(GeneralStatement.java:205)
  at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryWithCallback(GeneralStatement.java:173)
  at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryForObject(GeneralStatement.java:104)
  at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForObject(SqlMapExecutorDelegate.java:561)
  at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForObject(SqlMapExecutorDelegate.java:536)
  at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForObject(SqlMapSessionImpl.java:93)
  at org.springframework.orm.ibatis.SqlMapClientTemplate$1.doInSqlMapClient(SqlMapClientTemplate.java:273)
  at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:209)
  at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForObject(SqlMapClientTemplate.java:271)
  at com.alipay.bipgw.common.dal.bankchannel.ibatis.IbatisBipBusiOrderDAO.queryOrderOutTime(IbatisBipBusiOrderDAO.java:319)
  at sun.reflect.GeneratedMethodAccessor3333.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  at java.lang.reflect.Method.invoke(Method.java:597)
  at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)
  at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
  at com.alipay.bipgw.common.dal.monitor.DalMonitorInterceptor.invoke(DalMonitorInterceptor.java:60)
  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
  at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
  at $Proxy79.queryOrderOutTime(Unknown Source)
  at com.alipay.bipgw.prodcore.repository.impl.BusiOrderRepositoryImpl.queryOrderOutTime(BusiOrderRepositoryImpl.java:402)
  at com.alipay.bipgw.prodcore.listener.ProdStatusChangeTimeoutTaskListener.execute(ProdStatusChangeTimeoutTaskListener.java:148)
  at com.alipay.bipgw.prodcore.listener.ProdStatusChangeTimeoutTaskListener.access$000(ProdStatusChangeTimeoutTaskListener.java:60)
  at com.alipay.bipgw.prodcore.listener.ProdStatusChangeTimeoutTaskListener$1.run(ProdStatusChangeTimeoutTaskListener.java:104)
  at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
  at java.lang.Thread.run(Thread.java:662) 
```

像这样的java程序：

```
public void onUniformEvent(UniformEvent message, UniformEventContext uContext) {
    try {
        // single thread running
        service.execute(new Runnable() {
            public void run() {
                try{
                    execute();
                }catch(Exception e ){
                    logger.error("working error",e);
                }

            }
        });
    } catch (RejectedExecutionException e) {
        logger.error("ProdStatusChangeTimeoutTaskListener:error", e);
    } catch (Exception e) {
        logger.error("ProdStatusChangeTimeoutTaskListener:error", e);
    }

}
 //omit the body
 private void execute() {.....} 
```

并且执行方法不会启动任何线程。

在两天内我转储了几个线程转储 2013-03-04 16:54:12

```
- locked <0x695f91f0> (a oracle.jdbc.driver.T2CPreparedStatement)
- locked <0x6615a2d0> (a oracle.jdbc.driver.T2CConnection) 
```

2013-03-04 17:20:53

```
- locked <0x695f91f0> (a oracle.jdbc.driver.T2CPreparedStatement)
- locked <0x6615a2d0> (a oracle.jdbc.driver.T2CConnection) 
```

2013-03-05 10:58:30

```
- locked <0x6957bec8> (a oracle.jdbc.driver.T2CPreparedStatement)
- locked <0x66157e90> (a oracle.jdbc.driver.T2CConnection) 
```

2013-03-05 17:16:31

```
- locked <0x69579fb0> (a oracle.jdbc.driver.T2CPreparedStatement)
- locked <0x66157d68> (a oracle.jdbc.driver.T2CConnection) 
```

似乎 jdbc 客户端的锁定已更改，但前两个在 2013-03-04 16:54:12 和 2013-03-04 17:20:53，它们是相同的

我正在使用 Excutors.newSingleThreadExecutor() 在后台执行查询作业，以下任务将在 20 分钟间隔内提交到此执行程序服务，但工作线程在执行查询时似乎挂起，因此以下任务不会被执行。它持续了几天，没有发生异常，也没有任何日志输出，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:46:22.157

问题可能出在您的实际查询中 - 这是一项长期运行的任务吗？你知道平均需要多长时间才能完成吗？

可能（但这取决于查询本身）先前的查询正在锁定表，而这些表又会阻止以后的表。

我要做的第一件事是验证查询确实在 20 分钟内完成，并且始终如一地完成。在您知道它确实如此之后，您可以调查您所看到的悬挂行为的其他可能原因。

当查询运行时，我还建议您检查查询的解释计划（看看它在做什么 - 什么花费最多的时间等）。我还会检查相关统计数据是否是最新的（在较新版本的 Oracle 上可能不是问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:26:12.260

这个问题已经解决了~经过几次实时执行，out dba监控db server端，发现查询时间是210s，超过了query-out-time(180s)，但是可能没有取消该语句的取消请求有效并且数据库服务器可能不会响应该请求。因此执行原始查询的线程挂起。类似的情况参见[当我在 JDBC 应用程序中调用 PreparedStatement.cancel() 时，它实际上是否在 Oracle 数据库中杀死了它？

解决方法如下：在目标表中添加sqlprofile，并使用skip scan 生成sql，以缩短查询时间。

但是，为什么会发生挂起的最深层原因仍然是未知数。

# c++ - 为什么不会动？

> ID：15220418
> 
> 赞同：0
> 
> 时间：2013-03-05T09:40:21.700
> 
> 标签：c++, visual-studio-2010, c++11

这可能取决于编译器（使用 VS2010），也可能不是，但为什么以下操作不会调用预期的移动行为：

```
LargeObject x;
x = SomeFunc(x); 
```

我已将函数定义为对

```
LargeObject SomeFunc(const LargeObject& ob)
{
    LargeObject newOb;
    // perform operation on new object using old object
    return newOb;
}

LargeObject SomeFunc(LargeObject&& ob)
{
    // change object directly...
    return std::move(ob);
} 
```

我明确需要写

```
x = SomeFunc(std::move(x)); 
```

让它发生，我不喜欢那样...

编辑：使用 const-ref 的第一个功能是因为我还需要做类似的事情

```
LargeObject x;
LargeObject y = SomeFunc(x); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:44:00.060

`x`是一个左值，所以当你这样做时：

```
x = SomeFunc(x); 
```

选择接受左值引用的重载`const`，因为右值引用不能绑定到左值。如果您希望选择第二个重载，则必须以`x`某种方式变成右值。这就是这样`std::move`做的。

> ……我不喜欢那样……

如果将对象传递给函数隐含地意味着移动它，我相信你会更不喜欢它！

是否执行移动取决于*您*如何指示编译器。首先，在一般情况下，单独的编译器不会（**也不能**）对您的代码执行语义分析，以确定`x`在调用`SomeFunc(x)`.

此外，如果以下两条指令在传递参数时导致不同的行为，那就太奇怪了：

```
SomeFunc(x);         // Does not move
x = SomeFunc(x);     // Moves!? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:44:00.637

没有理由，为什么编译器应该在这里调用移动 ctor。Move-ctor 得到保证，作为参数传递的对象将不再被使用，而在你的情况下 x 是一个局部变量并且*可以*使用（bah，它*用于*以下赋值操作，可以重载ETC。）。如果您明确调用：

```
x = SomeFunc(std::move(x)); 
```

您冒着使用 x 进一步被移动操作损坏的风险（编译器不在乎，您再次将结果分配给同一个变量）。

尝试：

```
LargeObject ReturnsLargeObject()
{
    LargeObject x;
    return x;
}

SomeFunc(ReturnsLargeObject()); 
```

在这种情况下应该调用你的 move ctor。

# ruby-on-rails-3 - amazon-s3 中的 Errno::ENOENT（没有这样的文件或目录）

> ID：15220428
> 
> 赞同：5
> 
> 时间：2013-03-05T09:40:50.447
> 
> 标签：ruby-on-rails-3, heroku, ruby-on-rails-3.1, amazon-s3, ruby-on-rails-3.2

我有使用亚马逊 s3 将图像发布到存储桶的应用程序部署到 heroku。这工作得很好。但是在获取相同的图像时会出现错误：

```
Errno::ENOENT (No such file or directory showing path s3.amazonaws.com/bucket_name/app/public/messages/images/000/000/061/thumb/images.jpeg?1362410115) 
```

在浏览器的 url 中复制和粘贴相同的路径不起作用。如果我使用存储桶名称作为端点，它可以工作，即使用以下路径

```
/bucket_name.s3.amazonaws.com/app/public/messages/images/000/000/061/thumb/images.jpeg?1362410115. 
```

但我不知道如何在我的模型中配置这个 url。我正在按照 heroku 的方式配置 aws-sdk。

```
 https://devcenter.heroku.com/articles/paperclip-s3 
```

模型 has_attached_file 似乎我在这里遗漏了一些东西。对于其余配置，您可以查看上面的链接。

```
has_attached_file :image, :styles => { :medium => "100x100>", :thumb => "100x100>" } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:42:45.900

在 config/initializers/paper_clip.rb 中包含给定的代码解决了我的问题。

```
 Paperclip::Attachment.default_options.merge!(
        :url => ':s3_domain_url',
        :path => 'app/public/:class/:attachment/:id_partition/:style/:filename'
    ) 
```

# language-agnostic - 来访者与被访者之间的交流

> ID：15220429
> 
> 赞同：1
> 
> 时间：2013-03-05T09:40:51.230
> 
> 标签：language-agnostic, visitor-pattern

我当前的项目包含一个复杂的对象层次结构。以下结构是此层次结构的简化示例，用于演示目的：

> *   图书馆
>     *   “小说”类别
>         *   分类“科幻”
>             *   书A *（每本书包含页数，此处不显示）*
>             *   书 B
>         *   类别“犯罪”
>             *   C书
>     *   类别“非小说”
>         *   （许多子类别）

现在，每当我需要数据结构中的一些信息时，我想避免在我的代码中使用嵌套循环，因为当结构发生变化时，我必须更新所有循环。

所以我计划使用访问者模式，这似乎给了我所需的灵活性。它看起来像这样：

```
class Library
{
    void Accept(ILibraryVisitor visitor)
    {
        IterateCategories(this.categories, visitor);
    }

    void IterateCategories(
        IEnumerable<Category> categorySequence,
        ILibraryVisitor visitor)
    {
        foreach (var category in categorySequence)
        {
            visitor.VisitCategory(category.Name);

            IterateCategories(category.Subcategories, visitor);

            foreach (var book in category.Books)
            {
                // Could also pass in a book instance, not sure about that yet...
                visitor.VisitBook(book.Title, book.Author, book.PublishingDate);

                foreach (var page in book.Pages)
                {
                    visitor.VisitPage(page.Number, page.Content);
                }
            }
        }
    }
}

interface ILibraryVisitor
{
    void VisitCategory(string name);

    void VisitBook(string title, string author, DateTime publishingDate);

    void VisitPage(int pageNumber, string content);
} 
```

我已经看到了一些可能的问题，所以我希望你能给我一些建议。

### 问题 1

如果我想创建一个以它所属的（子）类别为前缀的书名列表（例如*Fiction » Science Fiction » Book A*），一个简单的访问者实现似乎可以解决问题：

```
// LibraryVisitor is a base implementation with no-op methods
class BookListingVisitor : LibraryVisitor
{
    private Stack<string> categoryStack = new Stack<string>();

    void VisitCategory(string name)
    {
        this.categoryStack.Push(name);
    }

    // Other methods
} 
```

这里我已经遇到了一个问题：我不知道什么时候出栈，因为我不知道一个类别什么时候结束。将 VisitCategory 方法拆分为两种方法是否是一种常用方法，如下所示？

```
interface ILibraryVisitor
{
    void VisitCategoryStart(string name);

    void VisitCategoryEnd();

    // Other methods
} 
```

或者有没有其他方法来处理这样的结构，它们有一个明确的范围和开始和结束？

### 问题2

假设我只想列出 1982 年出版的书籍。装饰器访问者会将过滤与列表逻辑分开：

```
class BooksPublishedIn1982 : LibraryVisitor
{
    private ILibraryVisitor visitor;

    public BooksPublishedIn1982(ILibraryVisitor visitor)
    {
        this.visitor = visitor;
    }

    void VisitBook(string title, string author, DateTime publishingDate)
    {
        if (publishingDate.Year == 1982)
        {
            this.visitor.VisitBook(string title, string author, publishingDate);
        }
    }

    // Other methods that simply delegate to this.visitor
} 
```

这里的问题是，对于 1982 年未出版的书籍，仍然会调用 VisitPage。所以装饰器需要以某种方式与访问的对象进行通信：

> 访客：*“嘿，这本书不是 1982 年的，所以请不要告诉我任何关于它的事情。”*
> 图书馆：*“哦，好吧，那我就不给你看它的页面了。”*

访问方法当前返回 void。我可以将其更改为返回一个布尔值，指示是否访问子项目，但这感觉有点脏。是否有让访问者知道它应该跳过某些项目的常见做法？或者也许我应该研究一种不同的设计模式？

PS如果您认为这应该是两个独立的问题，请告诉我，我很乐意将它们分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:26:10.070

GoF 书中描述的访问者模式处理*类*层次结构而不是*对象*层次结构。简单地说，添加一个新的访问者类型就像在基类和所有子类中添加一个新的虚函数，而无需触及它们的代码。

访问者的机制包括`Visitor::Visit`层次结构中的每个类一个函数，以及`Accept`父类和所有后代中的函数。它通过调用`Accept(visitor)`父类引用来工作。`Accept`在碰巧被引用的对象中的实现调用了正确的`Visitor::Visit(this)`. 它与根类的不同子类的实例之间可能存在的任何*对象*层次结构完全正交。

在您的情况下，`ILibraryVisitor`接口将具有一个`VisitLibrary(Library)`方法、一个`VisitCategory(Category)`方法、一个方法等，`VisitBook(Book)`而 、 等中的每一个都`Library`将继承一个公共基类并重新实现其方法。`Category``Book``Accept(ILibraryVisitor)`

到现在为止还挺好。但是从这一点开始，您的实现似乎有点迷失方向。访问者不调用自己的访问函数！层次结构的成员这样做，Visitor 实现这些功能是为了他们的利益。那么我们如何去分类树呢？

请记住，调用`Accept(FooVisitor)`替换`Foo`层次结构根中的方法，并`FooVisitor::VisitBar`替换`bar::Foo`. 当我们想对一个对象做某事时，我们调用它的方法。我们不是吗？所以让我们这样做（在伪代码中）。

```
class LibraryVisitor : ILibraryVisitor
{
  IterateChildren (List<ILibraryObject> objects) {
    foreach obj in objects {
      obj.Accept(this);
    }
  }
  IterateSubcategories (Category cat) {
    stack.push (cat);                 # we need a stack here to build a path
    IterateChildren (cat.children);   # both books and subcategories
    stack.pop();
  }
  VisitLibrary (Library) = abstract
  VisitCategory (Category) = abstract
  VisitBook (page) = abstract
  VisitPage (Page) = abstract
}

class MyLibraryVisitor : LibraryVisitor {
  VisitLibrary (Library l ) { ... IterateChildren (categories) ... }
  VisitCategory (Category c) = { ... IterateSubcategories (c) ... }
  VisitBook (Book) = { ... IterateChildren (pages) ... }
  VisitPage (Page) = { ... no children here, end of walk ... }
} 
```

`Visit`注意和之间的乒乓动作`Accept`。`Visitor`拜访`Accept`当前访问者的孩子，孩子们`Visitor::Visit`回电，访客拜访*他们的*`Accept`孩子等。

 *你的第二个问题是这样回答的：

类 BooksPublishedIn1982 : LibraryVisitor { VisitBook (Book b) { if b.publishedIn (1982) { IterateChildren(b.pages) } } }

再一次，很明显，树木行走和游客机器几乎没有任何关系。

`Visit`我已经决定在每个实现中完全迭代或不迭代子级。不必如此，您可以轻松地将每个函数拆分`VisitXYZ`为两个函数，`VisitXYZProper`并且`VisitXYZChildren`. 默认情况下，`VisitXYZ`将调用两者，并且每个具体访问者都可以覆盖该决定。*

# java - Java中的Coreman MergeSort实现没有产生正确的输出

> ID：15220433
> 
> 赞同：0
> 
> 时间：2013-03-05T09:41:08.643
> 
> 标签：java, algorithm, sorting, mergesort, divide-and-conquer

我正在尝试在 Java 中实现 Coreman 的 MergeSort 算法。但它总是给我错误的输出。

> 排序前：[86, 8, 60, 9, 49, 73, 37, 59, 98, 69]
> 
> 排序后：[8, 8, 9, 37, 37, 49, 49, 59, 69, 69]

以下是我的代码：

```
public class MergeSort {
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        MergeSort mergeSort = new MergeSort();
        int [] data = mergeSort.createRandomNumberArray();
        mergeSort.print("Before sorting", data);
        long startTime = System.currentTimeMillis();
        mergeSort.sort(data);
        long endTime = System.currentTimeMillis();
        mergeSort.print("After Sorting", data);
        mergeSort.time(startTime, endTime);

    }

    public void sort(int[] data) {
        if(data == null)
            throw new NullPointerException();
        if(data.length == 0 || data.length == 1) {
            System.out.println("Size is " + data.length);
            return;
        }

        int length = data.length;
        mergeSort(data, 0, length - 1);
    }

    /**
     * @param data
     * @param first
     * @param last
     */
    private void mergeSort(int[ ] data, int first, int last) {
        if(first < last) {
            int middle = (first + last) / 2;
            mergeSort(data, first, middle);
            mergeSort(data, middle + 1, last);
            merge(data, first, middle, last);
        }
    }

    private void merge(int[ ] data, int first, int middle, int end) {    
        int lSize = middle - first + 1;
        int rSize = end - middle;
        int [] left = new int[lSize + 1];
        left[lSize] = Integer.MAX_VALUE;
        int [] right = new int[rSize + 1];
        right[rSize] = Integer.MAX_VALUE;
        for(int i = 0; i < lSize; i++) {
            left[i] = data[first + i];
        }

        for(int j = 0; j < rSize; j++) {
            right[j] = data[middle + j + 1];
        }

        print("Left: ", left);
        print("Right: ", right);

        int lIndex = 0;
        int rIndex = 0;

        for(int k = first; k < end; k++) { 
            if(left[lIndex] <= right[rIndex]) {
                data[k] = left[lIndex];
                lIndex++;
            } else {
                data[k] = right[rIndex];
                rIndex++;
            }
        }
    }

    public void print(String message, int [] array) {
        System.out.println(message + " : " + Arrays.toString(array));
    }

    public int [] createRandomNumberArray() {
        int [] data = new int[] {86,8,60,9,49,73,37,59,98,69} ;
        /*int [] data = new int[SIZE];
        for(int i = 0; i < SIZE; i++) {
            data[i] = RANDOM.nextInt(RANGE);
        }*/
        return data;
    }

    public long time(long start, long end) {
        long time = end - start;
        System.out.println("Time taken in sorting ==> " + time);
        return time;
    }

} 
```

我尝试打印值并调试代码，但无法找出这里出了什么问题。请在这里提出什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:48:09.783

```
 for(int k = first; k < **=**end; k++) { 
                if(left[lIndex] <= right[rIndex]) {
                    data[k] = left[lIndex];
                    lIndex++;
                } else {
                    data[k] = right[rIndex];
                    rIndex++;
                }
            } 
```

# cookies - 什么是“友好的第三方”cookie？

> ID：15220435
> 
> 赞同：1
> 
> 时间：2013-03-05T09:41:09.933
> 
> 标签：cookies, web-analytics, adobe-analytics

我听说一些网络分析解决方案或顾问建议使用“友好的第三方 cookie”。

*   它们与“常规”第 3 方 cookie 有何不同？
*   与通常的第 3 方和第 1 方 cookie 相比，有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:50:13.593

*   区别仅在于 cookie 来自的域的名称。“友好”的第 3 方 cookie 的域名可能与第 1 方域相似 - 使其看起来“友好”，而不是潜在的“不友好”未知/不相关的第 3 方域。

*   对于浏览器，cookie 仍被视为“第三方”（即不是来自当前主机域）。对于用户来说，他们可能更愿意接受 cookie（如果他们有选择的话），或者如果域名看起来很熟悉，他们以后可能不太可能删除它。

*   第 3 方 cookie（如果浏览器/用户接受）可以跨多个域维护单个访问者的身份。这就是为什么它们被视为隐私问题。如果您在多个域上使用第一方 cookie，则访问者会在到达时从每个站点收到一个唯一的访问者 ID cookie（除非您在所有站点间链接上使用 Google Analytics 跨域跟踪之类的东西来将 ID 拼接在一起。）

# facebook - Facebook 注册和 JSF

> ID：15220438
> 
> 赞同：0
> 
> 时间：2013-03-05T09:41:19.483
> 
> 标签：facebook, jsf-2, primefaces

在我的 netbeans 7.2 中。我正在使用 JSF Primefaces 3.5，我正在尝试在应用程序中添加 facebook 注册，但我收到一条错误消息，提示“实体名称必须紧跟实体引用中的 '&'”

```
<iframe src="https://www.facebook.com/plugins/registration?
                        client_id=113869198637480&
                        redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fecho%2F&
                        fields=name,birthday,gender,location,email"
                        scrolling="auto"
                        frameborder="no"
                        style="border:none"
                        allowTransparency="true"
                        width="100%"
                        height="330">

                </iframe> 
```

我只是按照facebook的做法..请帮助...谢谢...这里是初学者...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:27:19.893

作为记录，你不能直接在xhtml中使用&，你需要像&这样的html实体。

# delphi - Delphi OLE 自动化冻结 GUI

> ID：15220440
> 
> 赞同：2
> 
> 时间：2013-03-05T09:41:25.503
> 
> 标签：delphi, ms-word, ole

我们在 Delphi 7 中使用一些 OLE 自动化来打开一个 word 文档，然后一旦加载，保存它，并将其加载到数据库中。

这工作正常，但部分要求是在 OLE 位发生时有一个进度条，如果 OLE 部分花费的时间太长，还有一个超时。

我们遇到的问题是整个 GUI 在 OLE 发生时冻结。进度条什么都不做，然后在最后就弹起来。

关于我们如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:51:39.367

我认为这将很难干净地做到。据我所知，Word 自动化不会让您有机会取消长时间运行的事件。它也不会通知您进度。

可能你能做的最好的事情是首先将自动化移动到一个单独的线程中。然后在长时间运行的自动化过程中弹出一个选框进度条。至少这会让用户知道发生了什么事。

至于取消，您可以让用户从您的进度对话框中取消，然后让您的程序继续。您可以终止自动化线程，但这会使 Word 处于不良状态。我只是让它继续完成，然后忽略结果。从用户的角度来看，这将相当好地满足您的目标，即使它在幕后有点脏。

# java - Java, JSON - 解码一个简单的二维整数数组

> ID：15220441
> 
> 赞同：2
> 
> 时间：2013-03-05T09:41:26.163
> 
> 标签：java, json, gson

我正在尝试解码我​​从 javascript 获得的一个简单的二维整数数组，但无法弄清楚。

我尝试使用 Gson，但无法弄清楚数组的类是什么：

```
int[][] newMap;
Gson gson = new Gson();
newMap = gson.fromJson (req.getParameter("map"), ?????); 
```

**更新**：更多信息

我正在从 javascript 发送一个简单的二维数组。这几乎是相关的代码：

```
var mapData = new Array(30);
for ( var i = 0; i < mapData.length; i++ ){
     mapData[i] = new Array(30);
}
......
$.post('/create_map', { map : JSON.stringify(mapData)  } ) 
```

在两者之间我填充整数。我只想发送到一个servlet并在java中有一个二维数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:50:49.243

如果你愿意，你可以尝试这样的事情： -

```
int[][] dummy = new int[0][0];  // The same type as your "newMap"
int[][] newMap;
Gson gson = new Gson();
newMap = gson.fromJson(req.getParameter("map"), dummy.getClass()); 
```

# c# - 如何在 C# 中传递引用的数据表？

> ID：15220442
> 
> 赞同：1
> 
> 时间：2013-03-05T09:41:37.593
> 
> 标签：c#, datatable, parameter-passing, ref

我从事 C# 项目

我有 2 节课是这样的：

```
public class A
{
    public DataTable dtA {get; set;}
}

public class B
{
    DataTable dtB{get;set;}

    public B(DataTable dt)
    {
        dtB = dt;
    }
}

static void Main()
{
    A a = new A();
    B b = new B(a.dtA);
} 
```

我希望 dtB 完全是 dtA（参考 dtA）。但是使用 Up Code dtB 是新的 DataTable，而不是 dtA。（我希望在更改 dtB 时，此更改也适用于 dtA）

如何解决我的问题？

* * *

**解决了：**

如果 dtA 为空并传递给 dtB，则 dtB 将始终为空。（即使当 dtA 填充数据时）但如果 dtA 不为空并传递给 dtB，则 dtB 和 dtA 将来自一个来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:53:03.840

您的代码按您的预期工作，因为 DataTable 是一种引用类型。但是你需要注意，因为你很容易陷入这种情况

```
void Main()
{
    A a = new A();
    a.dtA = new DataTable("TestTable");
    B b = new B(a.dtA);
    Console.WriteLine(b.TableName); // Same as A.dtA
    Console.WriteLine(a.dtA.TableName);  // Same as internal datatable in B
    a.dtA = new DataTable("SecondTable");
    Console.WriteLine(b.TableName);   // No more the same as A.dtA
    Console.WriteLine(a.dtA.TableName);
}

// Define other methods and classes here
public class A
{
    public DataTable dtA;
}

public class B
{
    DataTable dtB{get;set;}

    public B(DataTable dt)
    {
        dtB = dt;
    }
    public string TableName
    {
        get{ return dtB.TableName;}
        set{ dtB.TableName = value;}
    }
} 
```

如您所见，更改 A 中的 DataTable 将使 B 中的 DataTable 仍指向旧引用，因此两者不再相同。查看 Tim Schmelter 的答案以获得更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:44:30.193

尝试参考

```
public B(ref DataTable dt)
{
    dtB = dt;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:44:31.457

`A`和都`B`指向同一个`DataTable`，这是因为所有引用类型（as `DataTable`）都是通过引用传递的，所以你的代码应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:45:35.433

如果你想使用相同的`DataTable`，你应该使用相同的参考`A`：

```
public class A
{
    public DataTable dtA;
}

public class B
{
    public A a;

    public B(A a)
    {
        this.a = a;
    }
} 
```

现在两者都使用同一张表：

```
static void Main()
{
    A a = new A();
    B b = new B(a);
    Console.Write(a.dtA == b.A.dtA); //true
} 
```

如果这是您真正想要的，您也可以让`B`继承自：`A`

```
public class B: A
{      
}

static void Main()
{
    A a = new A();
    B b = new B();
    Console.Write(a.dtA == b.dtA); //true
} 
```

# asp.net-mvc-4 - MVC4 中的 WebGrid 下拉列表错误

> ID：15220446
> 
> 赞同：0
> 
> 时间：2013-03-05T09:41:48.410
> 
> 标签：asp.net-mvc-4, webgrid

我正在尝试使用下拉列表开发一个 WebGrid，默认情况下，选定的值[http://www.mikesdotnetting.com/Article/202/Inline-Editing-With-The-WebGrid](http://www.mikesdotnetting.com/Article/202/Inline-Editing-With-The-WebGrid)

//Controller 中的代码（抓取超过 1 组数据）：

```
ViewBag.material_codes = new SelectList(db.Master_Material, "material_code", "material_code"); 
```

//视图中的代码（WebGrid）：

```
grid.Column("material_code", MenuItemModel.translateMenuItem("MaterialCode"), format: 
                            @<text>
                                 @Html.DropDownList("material_code", (SelectList)ViewBag.material_code, item.material_code)
                            </text>), 
```

但是我得到了错误：

```
 Error  1   'System.Web.Mvc.HtmlHelper<IMv3.ViewModels.RMReceivingViewModels>' has no applicable method named 'DropDownList' but appears to have an extension method by that name. Extension methods cannot be dynamically dispatched. Consider casting the dynamic arguments or calling the extension method without the extension method syntax. 
```

我相信这是由“item.material_code”引起的，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:50:32.103

扩展方法（例如`DropDownList`）不能包含动态参数。因此，您需要将其`item.material_code`转换为基础类型：

```
@Html.DropDownList(
    "material_code", 
    (SelectList)ViewBag.material_code, 
    (string)item.material_code
) 
```

在这里，我将其转换为字符串，但如果基础类型不同，则应调整代码。

# javascript - 将 ASP.NET 助手返回的字符串存储到 javascript var 中：SyntaxError

> ID：15220448
> 
> 赞同：0
> 
> 时间：2013-03-05T09:41:56.957
> 
> 标签：javascript, asp.net

我想要做的是将此 ASP.NET 助手返回的字符串存储到 javascript var 中。

我的代码：

```
 function doSomething(id){
     var htmlString = '@Html.TextArea("test", new { @rows = "1" })';
    } 
```

生成的 javascript 以及 chrome 中的错误：

```
 var htmlString = '<textarea cols="20" id="test" name="test" rows="1">
 Uncaught SyntaxError: Unexpected token ILLEGAL
 </textarea>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:12:34.963

您收到错误，因为`Html.TextArea`返回`textarea`新行。这不仅仅是 chrome 问题，把它放在 firebug 控制台中：

```
var htmlString = '<textarea cols="20" id="test" name="test" rows="1">
</textarea>'; 
```

你会得到：

```
SyntaxError: unterminated string literal 
```

更多详细信息：[ASP.NET MVC Textarea HTML helper 在使用 AntiXssLibrary 时添加行](https://stackoverflow.com/questions/6472705/asp-net-mvc-textarea-html-helper-adding-lines-when-using-antixsslibrary)

# ruby-on-rails - 如何调试上限部署错误并查找 Net::SSH::ChannelOpenFailed 网络错误的日志文件？

> ID：15220453
> 
> 赞同：3
> 
> 时间：2013-03-05T09:42:11.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, capistrano, net-ssh

我在部署时遇到*Net::SSH::ChannelOpenFailed*错误（错误发生在 capistrano 的 assets:precompile 任务 - 请参阅下面的 assets.rb ）并且仅在两个服务器上。两台服务器都有类似的安装（Gentoo 内核 3.6、Ruby 1.9.3、rails gem 3.2.12、net-ssh gem 2.6.5），但只有一个给我这个错误。

```
> cap -vv deploy:update_code

  servers: ["31.131.19.xxx", "network.local"]
  [network.local] executing command
  [31.131.19.xxx] executing command
  command finished in 269ms
* executing "ls -x /home/deployer/apps/network/releases"
  servers: ["31.131.19.xxx"]
  /usr/local/lib64/ruby/gems/1.9.1/gems/net-ssh-2.6.5/lib/net/ssh/connection/channel.rb:524:in
  `do_open_failed': open failed (1) (Net::SSH::ChannelOpenFailed) 
```

`cap deploy:check`运行良好。全新部署（从生产服务器中删除所有以前的版本）没有问题。抛出错误后立即运行迁移（在 assets:precompile 处）。

我找不到任何日志或任何可以帮助我了解正在发生的事情的东西，特别`ls -x /home/deployer/apps/network/releases`是它的来源，它在 assets:precompile 任务中做了什么以及为什么会出现上述错误。

我知道 v8 和 therubyracer gem 不同步，但`bundle exec rake assets:precompile`在服务器上运行证明这些 gem 已更新。

我从哪里开始调试？

**assets.rb（摘录）**

```
 task :precompile, :roles => assets_role, :except => { :no_release => true } do
   logger.info "... Runs okay until this point ..."
   run <<-CMD.compact
     cd -- #{latest_release.shellescape} &&
     #{rake} RAILS_ENV=#{rails_env.to_s.shellescape} #{asset_env} assets:precompile &&
     cp -- #{shared_path.shellescape}/assets/manifest.yml #{current_release.shellescape}/assets_manifest.yml
   CMD
   logger.info "... Never gets here ..."
 end 
```

**部署.rb**

```
require 'bundler/capistrano'
load 'lib/deploy/seed'

set :application, "network"
set :rails_env, "production"

server "31.131.19.xxx", :web, :app, :db, primary: true
server "network.local", :web, :app, :db, primary: true

set :bundle_roles, [:app]
set :normalize_asset_timestamps, false

set :user, "deployer"
set :group, "deployer"

set :deploy_to, "/home/#{user}/apps/#{application}"

set :deploy_via, :remote_cache
set :copy_exclude, ".git/*"

set :use_sudo, false
set :scm, "git"

set :repository, "git@bitbucket.org:danchenkov/#{application}.git"

set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

set :unicorn_conf, "#{deploy_to}/current/config/unicorn.rb"
set :unicorn_pid, "#{deploy_to}/shared/pids/unicorn.pid"

after 'deploy:update_code', :roles => :app do
  run "rm -f #{current_release}/config/database.yml"
  run "ln -s #{deploy_to}/shared/config/database.yml #{current_release}/config/database.yml"
end

after "deploy", "deploy:cleanup"

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/vhosts/#{application}.upstream.conf"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    run "mkdir -p #{shared_path}/log"
    run "mkdir -p #{shared_path}/pids"
    run "mkdir -p #{shared_path}/sockets"
    put File.read("config/database.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

**宝石文件**

```
source 'https://rubygems.org'

gem 'rails'

gem 'pg'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'libv8-3.11.8.13-x86_64-linux', :platform => :ruby
  gem 'therubyracer', :platform => :ruby, :require => 'v8'
  gem 'uglifier'
  gem 'bootstrap-sass'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
gem 'bcrypt-ruby'

# Deploy with Capistrano
gem 'capistrano'

# Style
gem 'haml-rails'
gem 'simple_form'

# Templates
gem 'redcarpet'

# Attachments
gem 'rmagick'
gem 'carrierwave'

# Pagination
gem 'kaminari'

# Auth & Roles
gem 'devise'
gem 'cancan'

gem 'unicode'
gem 'unicorn', :platform => :ruby 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T06:38:37.127

这不是问题，但您最好将本地 ruby​​ 更新到与服务器上相同的版本，然后运行：

```
gem update --system (on both: server and local machines) 
```

对于您的问题，请尝试：

```
cat ~/.ssh/id_rsa.pub | ssh deployer@xxx.xxx.xxx.xxx 'cat >> ~/.ssh/authorized_keys' 
```

这将允许您在不输入密码的情况下通过 ssh 进入服务器，并将服务器 ssh 存储在您的本地计算机上。如果您以前这样做过，您可以尝试从 publickeys 中删除此 ssh，然后重新运行此命令。

# database - 运行 MS Access 查询的批处理文件和

> ID：15220462
> 
> 赞同：1
> 
> 时间：2013-03-05T09:42:25.160
> 
> 标签：database, ms-access, batch-file

我有一个 Access DB，它具有从 teradata 检索数据的查询。我想创建一个批处理文件来执行该特定查询。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T15:21:45.410

您可以创建一个宏来运行查询，然后退出 Access，然后使用命令行开关从批处理文件中自动运行它。

*例子：*

```
"C:\Program Files\Microsoft Office\Office11\msaccess.exe" "C:\Program Files\Microsoft Office\Office11\samples\northwind.mdb" /X mcrRunQueryAndQuit 
```

有关 Access 命令行开关的更多详细信息：http: [//support.microsoft.com/kb/209207](http://support.microsoft.com/kb/209207)

（应该适用于 Access 2000 - 2010）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:08:50.660

Microsoft Access 的 VBA 是您的关键。

视频教程：[http ://www.youtube.com/watch?v=G9pqmd2PSYk](http://www.youtube.com/watch?v=G9pqmd2PSYk)

# ruby - 如何使用页面对象模式清除我的水豚步骤？

> ID：15220470
> 
> 赞同：2
> 
> 时间：2013-03-05T09:42:44.983
> 
> 标签：ruby, cucumber, capybara, site-prism

我对页面对象模式 gem 'site_prism' 有以下步骤定义：

```
class Main < SitePrism::Page
  element :login_link, "a.log-in-link"
  element :login_field, "input[name='userLogin']"
  element :pass_field, "input[name='userPassword']"
  element :enter_button, ".button_pretty"
end

If /I'm log in as "([^"]*)" with password "([^"]*)"$/ do |login, pass|
    @main = Main.new
    @main.login_link.click
    @main.login_field.set login
    @main.pass_field.set pass
    @main.enter_button.click
end 
```

它工作正常，但看起来很重且不美观。有没有办法像 capybara 'within' 方法来写它？以下不起作用（错误：“无法将 Main 转换为字符串（TypeError）”）

```
within @main do
    login_link.click
    login_field.set login
    pass_field.set pass
    enter_button.click
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:39:14.713

你可以破解对`with`Ruby 语句的支持：

[http://www.ruby-forum.com/topic/128781#574402](http://www.ruby-forum.com/topic/128781#574402)

（我在 VBScript 中看到过这一点，不确定是否有其他语言开箱即用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:05:26.973

不，您不能将 capybara 的`within`功能与 site_prism 一起使用。

# class - 未找到我定义的方法的 VBA 提供方法或数据成员

> ID：15220471
> 
> 赞同：2
> 
> 时间：2013-03-05T09:42:49.110
> 
> 标签：class, vba

我一直在尝试在 VBA 中实现一个非常简单的树结构来满足一些基本的文本解析需求。相关代码如下。

```
Private pLeaves() As CTree
Private numLeaves As Integer
Private leavesLen As Integer
Private iterate As Integer
Private pParent As CTree
Public pValue As Object

Public Sub class_initialize()
    ReDim pLeaves(10)
    leavesLen = 10
    numLeaves = 0
    Set pParent = Nothing
    iterate = 0
    Set pValue = Nothing

End Sub
Public Sub Class_terminate()
    'We'll leave it empty for now
    'if it looks like it's not working right we might change it
End Sub

Public Property Get Parent() As CTree
    Parent = pParent
End Property

Public Property Get Leaves() As CTree
    Leaves = pLeaves
End Property
Private Property Set Parent(ByRef p As CTree)
    Set pParent = p
End Property

Private Property Set value(ByRef value As Object)
    Set pValue = value
End Property

Public Sub Add_Leaf(ByRef value As Object)
    Dim n As Integer
    n = numLeaves
    If numLeaves >= leavesLen Then
       ReDim Preserve pLeaves(leavesLen + 10)
       leavesLen = leavesLen + 10
    End If
   Set pLeaves(n) = New CTree
   Set pLeaves(n).Parent = Me
   Set pLeaves(n).value = value
End Sub

Public Function DFFind_Leaf(value As Object) As CTree
    Dim i As Integer

    If pValue = value Then
        Set DFFind_Leaf = Me
        Return
    End If

    If numLeaves = 0 Then
        Set DFFind_Leaf = Nothing
        Return
    End If

    For i = 0 To numLeaves
        Set DFFind_Leaf = pLeaves(i).DFFind_Leaf(value)
        If DFFind_Leaf <> Nothing Then
            Return
        End If
    Next i

    Set DFFind_Leaf = Nothing
    Return
End Function 
```

当我尝试使用对象调用 Add_Leaf 函数时，尽管我最终 在我尝试的行上从 VBA获得了*方法或数据成员未找到错误*

```
set pLeaves(n).Parent= me 
```

知道这可能是什么原因吗？

编辑：好的，我想出了如何解决这个问题。将 set 属性 Parent(...) 从 private 更改为 public 解决了这个问题。所以显然我不太明白 private 在 vba 中究竟做了什么。如果有人想解释如何做到这一点，而基本上不暴露任何人想要设置的变量，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:12:23.687

`Private`告诉 VBA 解释器变量的范围仅限于类/模块。因此，您只能在原始类内部访问它，而不能从外部访问它。`Public`另一方面，允许您从外部访问变量。

但是，请注意，在使用类时，强烈建议不要公开公开任何变量。`SET PROPERTY`相反，最好的做法是使用and`GET PROPERTY`关键字公开所谓的属性。

即代替

```
Public Amount as Double 
```

使用这种方法通常会更好：

```
Private mAmount as Double
Property Set Amount(amt as Double) 'Note that by default, properties are public
    If amt > 0 Then
        mAmount = amt
    Else
        mAmount = 0
    End If
End Property

Property Get Amount as Double
    Amount = mAmount
End Property 
```

正如您从这个示例中看到的那样，优点是您实际上可以添加额外的验证/修改，从而确保一致性。

在您的示例中，您可以考虑简单地提供一个*方法*，即一个公共子程序，它添加一个休假并处理所有设置，例如

```
Public Sub AddLeave(strName as String)
    Dim objLeave as New CTree
    objLeave.Init strName, Me
    mLeaves.Add objLeave, strName
End Sub

Public Sub Init(strName as String, objParent as CTree)
    Me.Name = strName
    Set Me.Parent = objParent
End Sub 
```

# c# - for循环中的数组边界检查优化

> ID：15220472
> 
> 赞同：4
> 
> 时间：2013-03-05T09:42:51.823
> 
> 标签：c#, arrays, for-loop, compiler-optimization, bounds-check-elimination

```
 var ar = new int[500000000];

        var sw = new Stopwatch();
        sw.Start();

        var length = ar.Length;
        for (var i = 0; i < length; i++)
        {
            if (ar[i] == 0);
        }

        sw.Stop(); 
```

sw.ElapsedMilliseconds：~2930ms

```
 var ar = new int[500000000];

        var sw = new Stopwatch();
        sw.Start();

        for (var i = 0; i < ar.Length; i++)
        {
            if (ar[i] == 0);
        }

        sw.Stop(); 
```

sw.ElapsedMilliseconds: ~3520ms

Win8x64, VS12, .NET4.5, Release build, "Optimize code" on.

据我所知，由于数组边界检查优化，第二种方法应该更快。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:46:12.290

我还在调试器之外使用 Win8 x64、.NET 4.5、Release build（这是一个重要的）；我得到：

```
0: 813ms vs 421ms
1: 439ms vs 420ms
2: 440ms vs 420ms
3: 431ms vs 429ms
4: 433ms vs 427ms
5: 424ms vs 437ms
6: 427ms vs 434ms
7: 430ms vs 432ms
8: 432ms vs 435ms
9: 430ms vs 430ms
10: 427ms vs 418ms
11: 422ms vs 421ms
12: 434ms vs 420ms
13: 439ms vs 425ms
14: 426ms vs 429ms
15: 426ms vs 426ms
16: 417ms vs 432ms
17: 442ms vs 425ms
18: 420ms vs 429ms
19: 420ms vs 422ms 
```

第一个支付 JIT /“融合”成本，但总体而言大致相同（每列中的一些看起来更快，但总体而言没什么可说的）。

```
using System;
using System.Diagnostics;
static class Program
{
    static void Main()
    {
        var ar = new int[500000000];

        for (int j = 0; j < 20; j++)
        {
            var sw = Stopwatch.StartNew();
            var length = ar.Length;
            for (var i = 0; i < length; i++)
            {
                if (ar[i] == 0) ;
            }

            sw.Stop();
            long hoisted = sw.ElapsedMilliseconds;

            sw = Stopwatch.StartNew();
            for (var i = 0; i < ar.Length; i++)
            {
                if (ar[i] == 0) ;
            }
            sw.Stop();
            long direct = sw.ElapsedMilliseconds;

            Console.WriteLine("{0}: {1}ms vs {2}ms", j, hoisted, direct);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T10:24:20.523

我对此进行了更多调查，发现很难做出一个真正显示边界检查消除优化效果的基准。

首先是旧基准的一些问题：

*   反汇编表明 JIT 编译器也*能够优化第一个版本*。这对我来说是一个惊喜，但拆卸并没有说谎。当然，这完全违背了这个基准的目的。**修复：**将长度作为函数参数。
*   数组太大，这意味着缓存未命中，这给我们的信号增加了很多噪声。**修复：**使用一个短数组但循环多次。

但现在真正的问题是：**它正在做一些非常聪明的事情**。内部循环中没有数组边界测试，即使循环的长度来自函数参数。生成的代码不同，但内部循环本质上是一样的。不完全（不同的寄存器等），但它遵循相同的模式：

```
_loop: mov eax, [somewhere + index]
       add index, 4
       cmp index, end
       jl _loop 
```

执行时间没有显着差异，因为生成的代码中最重要的部分没有显着差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:55:11.310

我认为答案是垃圾收集器正在运行并改变你的时间。

***免责声明**：我看不到 OP 代码的整个上下文，因为您没有发布可编译的示例；我假设您正在重新分配数组而不是重用它。如果不是，那么这不是正确的答案！*

考虑这段代码：

```
using System;
using System.Diagnostics;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var ar = new int[500000000];
            test1(ar);
            //ar = new int[500000000]; // Uncomment this line.
            test2(ar);
        }

        private static void test1(int[] ar)
        {
            var sw = new Stopwatch();
            sw.Start();

            var length = ar.Length;
            for (var i = 0; i < length; i++)
            {
                if (ar[i] == 0);
            }

            sw.Stop();                
            Console.WriteLine("test1 took " + sw.Elapsed);
        }

        private static void test2(int[] ar)
        {
            var sw = new Stopwatch();
            sw.Start();

            for (var i = 0; i < ar.Length; i++)
            {
                if (ar[i] == 0);
            }

            sw.Stop();
            Console.WriteLine("test2 took " + sw.Elapsed);
        }
    }
} 
```

在我的系统上打印：

```
test1 took 00:00:00.6643788
test2 took 00:00:00.3516378 
```

如果我取消注释标记的行，`// Uncomment this line.`则时间更改为：

```
test1 took 00:00:00.6615819
test2 took 00:00:00.6806489 
```

这是因为 GC 收集了先前的数组。

[编辑] 为了避免 JIT 启动成本，我将整个测试放入一个循环中：

```
for (int i = 0; i < 8; ++i)
{
    test1(ar);
    ar = new int[500000000]; // Uncomment this line.
    test2(ar);
} 
```

然后我注释掉第二个数组分配的结果是：

```
test1 took 00:00:00.6437912
test2 took 00:00:00.3534027
test1 took 00:00:00.3401437
test2 took 00:00:00.3486296
test1 took 00:00:00.3470775
test2 took 00:00:00.3675475
test1 took 00:00:00.3501221
test2 took 00:00:00.3549338
test1 took 00:00:00.3427057
test2 took 00:00:00.3574063
test1 took 00:00:00.3566458
test2 took 00:00:00.3462722
test1 took 00:00:00.3430952
test2 took 00:00:00.3464017
test1 took 00:00:00.3449196
test2 took 00:00:00.3438316 
```

并启用第二个数组分配：

```
test1 took 00:00:00.6572665
test2 took 00:00:00.6565778
test1 took 00:00:00.3576911
test2 took 00:00:00.6910897
test1 took 00:00:00.3464013
test2 took 00:00:00.6638542
test1 took 00:00:00.3548638
test2 took 00:00:00.6897472
test1 took 00:00:00.4464020
test2 took 00:00:00.7739877
test1 took 00:00:00.3835624
test2 took 00:00:00.8432918
test1 took 00:00:00.3496910
test2 took 00:00:00.6471341
test1 took 00:00:00.3486505
test2 took 00:00:00.6527160 
```

请注意，由于 GC，test2 始终需要更长的时间。

不幸的是，GC 使计时结果变得毫无意义。

例如，如果我将测试代码更改为：

```
for (int i = 0; i < 8; ++i)
{
    var ar = new int[500000000];
    GC.Collect();
    test1(ar);
    //ar = new int[500000000]; // Uncomment this line.
    test2(ar);
} 
```

随着该行被注释掉，我得到：

```
test1 took 00:00:00.6354278
test2 took 00:00:00.3464486
test1 took 00:00:00.6672933
test2 took 00:00:00.3413958
test1 took 00:00:00.6724916
test2 took 00:00:00.3530412
test1 took 00:00:00.6606178
test2 took 00:00:00.3413083
test1 took 00:00:00.6439316
test2 took 00:00:00.3404499
test1 took 00:00:00.6559153
test2 took 00:00:00.3413563
test1 took 00:00:00.6955377
test2 took 00:00:00.3364670
test1 took 00:00:00.6580798
test2 took 00:00:00.3378203 
```

并且没有注释：

```
test1 took 00:00:00.6340203
test2 took 00:00:00.6276153
test1 took 00:00:00.6813719
test2 took 00:00:00.6264782
test1 took 00:00:00.6927222
test2 took 00:00:00.6269447
test1 took 00:00:00.7010559
test2 took 00:00:00.6262000
test1 took 00:00:00.6975080
test2 took 00:00:00.6457846
test1 took 00:00:00.6796235
test2 took 00:00:00.6341214
test1 took 00:00:00.6823508
test2 took 00:00:00.6455403
test1 took 00:00:00.6856985
test2 took 00:00:00.6430923 
```

我认为这个测试的寓意是：与其他代码相比，这个特定测试的 GC 开销如此之大，以至于它完全扭曲了计时结果，并且不能相信它们意味着什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:45:23.463

你在第二个上调用一个属性，所以它会更慢`ar.Length`

# mysql - 从多个相关表中获取关系数据

> ID：15220475
> 
> 赞同：1
> 
> 时间：2013-03-05T09:43:01.570
> 
> 标签：mysql, select, join, relational

我正在为一个小型游戏开发数据库结构，该游戏使用“套件”作为盔甲套装。目前我有 4 张桌子：“kit”、“kit_armor”、“kit_item”和“kit_item_enchantment”。“kit”表保存工具包的 id 和名称，“kit_armor”表保存工具包的盔甲，“kit_item”表保存“kit_armor”列可以指向的项目，“kit_item_enchantment”表保存特定物品的附加附魔数据。

现在我一直在尝试查询以及搜索堆栈溢出和互联网重置以编写一个查询，该查询将从数据库中获取所有套件信息，但遗憾的是没有任何结果。

这是表结构：

```
mysql> describe kit;
+----------+-----------------+------+-----+---------+----------------+
| Field    | Type            | Null | Key | Default | Extra          |
+----------+-----------------+------+-----+---------+----------------+
| kit_id   | int(4) unsigned | NO   | PRI | NULL    | auto_increment |
| kit_name | varchar(32)     | NO   | UNI | NULL    |                |
+----------+-----------------+------+-----+---------+----------------+
2 rows in set (0.01 sec)

mysql> describe kit_armor;
+------------+-----------------+------+-----+---------+-------+
| Field      | Type            | Null | Key | Default | Extra |
+------------+-----------------+------+-----+---------+-------+
| kit_id     | int(4) unsigned | NO   | PRI | NULL    |       |
| helmet     | int(4) unsigned | YES  | MUL | NULL    |       |
| chestplate | int(4) unsigned | YES  | MUL | NULL    |       |
| leggings   | int(4) unsigned | YES  | MUL | NULL    |       |
| boots      | int(4) unsigned | YES  | MUL | NULL    |       |
+------------+-----------------+------+-----+---------+-------+
5 rows in set (0.01 sec)

mysql> describe kit_item;
+------------+-----------------+------+-----+---------+----------------+
| Field      | Type            | Null | Key | Default | Extra          |
+------------+-----------------+------+-----+---------+----------------+
| id         | int(4) unsigned | NO   | PRI | NULL    | auto_increment |
| item_id    | int(4) unsigned | NO   |     | NULL    |                |
| stack_size | int(4) unsigned | NO   |     | NULL    |                |
+------------+-----------------+------+-----+---------+----------------+
3 rows in set (0.01 sec)

mysql> describe kit_item_enchantment;
+----------------+-----------------+------+-----+---------+-------+
| Field          | Type            | Null | Key | Default | Extra |
+----------------+-----------------+------+-----+---------+-------+
| item_id        | int(4) unsigned | NO   | PRI | NULL    |       |
| enchantment_id | int(4) unsigned | NO   |     | NULL    |       |
| tier           | int(4) unsigned | NO   |     | NULL    |       |
+----------------+-----------------+------+-----+---------+-------+
3 rows in set (0.01 sec) 
```

和引用的列：

```
+---------------------------+--------------------+-------------------------------+-----------------
| TABLE_NAME                | COLUMN_NAME        | REFERENCED_TABLE_NAME | REFERENCED_COLUMN_NAME |
+---------------------------+--------------------+-------------------------------+-----------------
| kit_armor                 | kit_id             | kit                   | kit_id                 |
| kit_armor                 | helmet             | kit_item              | id                     |
| kit_armor                 | chestplate         | kit_item              | id                     |
| kit_armor                 | leggings           | kit_item              | id                     |
| kit_armor                 | boots              | kit_item              | id                     |
| kit_item_enchantment      | item_id            | kit_item              | id                     | 
```

我的问题是获取所有套件信息的最佳方法是什么，以及是否可以在单个查询（JOIN？）中这样做，还是我必须将其拆分为多个查询？

这对我有很大帮助，从昨天开始我一直在努力解决这个问题，同时我对从数据库中选择关系数据的最佳方法进行了大量研究，我只遇到了非常复杂的指南和查询令人难以置信的混乱。

提前致谢，

乔纳斯

# android - 实现自定义 Drawable 包含另一个 Drawable

> ID：15220479
> 
> 赞同：0
> 
> 时间：2013-03-05T09:43:07.627
> 
> 标签：android, drawable

我决定使用 Drawables 创建 ImageButton 的外观。那些 Drawable 不是原始的，所以我必须在代码中创建它们。自定义 Drawable 实现的简化版本如下。

现在我无法让它变得可见，所以我预计会有一些愚蠢的新手错误。

```
public class PlayButtonDrawable extends Drawable {

    private Drawable _defaultLook;

    public PlayButtonDrawable() {

        _defaultLook = createDefaultLook();
    }

    @Override
    public void draw(Canvas canvas) {
        _defaultLook.draw(canvas);
    }

    @Override
    public int getOpacity() {
        return PixelFormat.TRANSPARENT;
    }

    @Override
    public void setAlpha(int alpha) {
    }

    @Override
    public void setColorFilter(ColorFilter cf) {
    }

    private Drawable createDefaultLook() {
        GradientDrawable oval = new GradientDrawable(Orientation.BOTTOM_TOP, 
                new int[]{0xCDFFFFFF, 0xCDCCCCCC});
        oval.setGradientType(GradientDrawable.RADIAL_GRADIENT);
        oval.setShape(GradientDrawable.OVAL);
        oval.setBounds(0, 0, 100, 100);
        oval.setStroke(4, 0xFF4CFF00);
        oval.setGradientRadius(100);
        oval.setGradientCenter(25, 25);

        return oval;
    }
} 
```

这个 PlayButtonDrawable 被添加到 onCreate 中的一个活动中。

```
_playButton = (ImageButton)findViewById(R.id.playButton);
_playButton.setImageDrawable(new PlayButtonDrawable());
_playButton.setOnClickListener(_playButtonClickListener);
_playButton.invalidate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:20:52.480

您是如何在布局文件中设置 ImageButton(R.id.playButton) 的？重要的值是 layout_width 和 layout_height 参数。例如：

```
<ImageButton
      android:id="@+id/playButton"                    
      android:layout_width="100dp"
      android:layout_height="100dp"
 /> 
```

如果您将 layout_width 和 layout_height 设置为“wrap_content”，您只会看到一些像素。

# linux - Linux中的打印机API

> ID：15220482
> 
> 赞同：1
> 
> 时间：2013-03-05T09:43:14.757
> 
> 标签：linux, windows

我是 Linux 环境的新手，熟悉 Windows 中的打印机 API。那么 Linux 中`Start Doc`, `Openprinter`,的等效 API 是什么`EnumPrinters`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:40:37.490

[CUPS](http://www.cups.org/documentation.php/api-cups.html)是 Apple Inc. 为 Mac OS® X 和其他 UNIX 操作系统（如 Linux）开发的基于标准的开源打印系统。但它不包含任何文档描述 API。它可以处理现有格式的文档，如 PostScript、PDF 和 JPEG。因此，您可以使用任何您喜欢的格式创建文件，然后通过CUPS api`lpr`或[CUPS api](http://www.cups.org/documentation.php/api-cups.html)将其发送到 CUPS 。

您可能会发现[LP 和 CUPS 概述](http://www.linuxjournal.com/article/6729)很有用。

# javascript - 使用 indexOf() 组成一个唯一值数组

> ID：15220490
> 
> 赞同：2
> 
> 时间：2013-03-05T09:43:37.473
> 
> 标签：javascript, jquery, indexof

我正在遍历 XML。子元素之一是`GroupName`，它在 XML 字符串/文件中不是唯一的。因此，如果您愿意的话，我试图将这些标签的不同（唯一）出现的*innertext*`GroupName`放在一个数组中。

```
<GroupName></GroupName>
<GroupName></GroupName>
<GroupName>VIII</GroupName>
<GroupName>Date and signature</GroupName>
<GroupName>Date and signature</GroupName>
<GroupName>Date and signature</GroupName>
<GroupName>Date and signature</GroupName>
<GroupName>VII</GroupName> 
```

在这种特殊情况下，`GroupNames`是 [空字符串]、“VII”、“VIII”和“日期和签名”。

当我使用 jQuery 来提醒 ALL 时`GroupNames`，都会显示：

```
$xmlDoc.find('GroupName').each(function () {
    alert($(this).text();
}); 
```

但是，当我尝试使用`indexOf()`来组成一组唯一值时，其中一个似乎被跳过了！

```
$xmlDoc.find('GroupName').each(function () {
$groupName = ($(this).text().length == 0) ? 'empty' : $(this).text();
    if (groupnames.indexOf($groupName) < 0) {
        groupnames.push($groupName);
    }
}); 
```

在这种情况下，我得到“空”、“VIII”和“日期和签名”。'VII'不知何故丢失了，我不知道为什么。

# javascript - JS - 停止对象方法链而不会出错

> ID：15220494
> 
> 赞同：6
> 
> 时间：2013-03-05T09:43:51.527
> 
> 标签：javascript, oop

我们有一些 Foo 对象

```
var Foo = function() {

    this.bar = function(bazinga) {
        if (bazinga) {return this;}
        else {return false;}
    }
    this.show = function() {
        alert('bar');
    }
}; 
```

所以它允许我们做一些`foo.bar().bar().bar().bar();`链。

但是如果在链的中间，bar() 将返回 false，下一次 bar() 尝试将导致错误，即`undefined has no method bar()`whitch 是 ofc 的事情。

那么，当它的任何“环”返回 false 时，如何使所有链返回 false 而没有错误？

[小提琴](http://jsfiddle.net/MXgzx/2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:52:48.807

您将不得不更改 bar 的返回类型。我建议为此目的创建一种空对象，并在链的末尾添加一个终结方法，该方法为空对象返回 false：

```
var Foo = function() {

    var nullFoo = function() {
        this.finalize = function() { return false; }
        this.bar = function() { return this; }
    }
    this.finalize = function() { return this; }
    this.bar = function(bazinga) {
        if (bazinga) {return this;}
        else {return new nullFoo();}
    }
    this.show = function() {
        alert('bar');
    }
}; 

foo.bar().bar().bar().bar().finalize(); 
```

对于您的小提琴示例，我没有使用 finalize 方法，而是为 null 对象提供了一个 show 方法。否则你最后仍然会有`false.show()`：

**[小提琴](http://jsfiddle.net/pAVjZ/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:53:50.143

这是你想要的：http: [//jsfiddle.net/c24w/MXgzx/5/](http://jsfiddle.net/c24w/MXgzx/5/)

**JavaScript：**

```
var Foo = function() {

    var returnValue = true;

    this.bar = function(bazinga) {
        returnValue = returnValue && bazinga;
        return this;
    }
    this.show = function() {
        alert('bar');
        return returnValue;
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:13:08.870

方法链可能有点危险。这一切都与依赖关系有关。

使用方法链时，最好注意链中每个部分返回的对象。

如果它们不完全相同，例如它们不都是字符串，那么最好将链分解为单独的语句。或者也许将它们提取到一个单独的函数中。

假设您有一些链条，例如

```
somearray.pop().getATagWrapper().getTag().setSrc("http://www.stackoverflow.com") 
```

链的隐式依赖是 Array、Object1、TagWrapper、Tag、String

现在，您编写的函数现在已与所有这些对象耦合，对这些对象的任何更改都可能对您的代码造成严重破坏。

好像我们在哪里看

```
someString.trim().substr(12).trim().concat("with awesome") 
```

All 只处理 String 对象。

有关更多信息，请参阅[得墨忒耳定律](http://en.wikipedia.org/wiki/Law_of_Demeter)

# perl - 在 Perl 中转换 YYYY-MM-DD 中的日期？

> ID：15220498
> 
> 赞同：0
> 
> 时间：2013-03-05T09:43:57.340
> 
> 标签：perl, date

我已经在互联网上搜索了一段时间，但似乎找不到正确的答案（也许有，但我不明白）。

我有这段代码来读取文件并获取日期时间（来自任务计划程序查询）。

File.txt 包含任务计划程序查询。

```
"TaskName","Next Run Time","Status"
"CheckFile","20:33:00, 17/1/2013","" 
```

========================================

用于读取获取下一个运行时间值的脚本。

```
open (FILE, "<", $file) || print "WARN: Cannot open $file: $!";
@logLines = <FILE>;
if (@list = grep(/\b$keyword\b/, @logLines)) {
    foreach(@list){$result = $_;}
    my @sresult = split(/(?<="),(?=")/, $result);
    $name = $sresult[0];
    $name =~ tr/"//d;

    $next_run = $sresult[1];
    $next_run =~ tr/"//d;
    print $next_run;
}
@list=();
@dFormat=();
@logLines=();
close FILE; 
```

输出将是：

```
20:33:00, 17/1/2013 
```

我想将输出修改为：

```
20:33:00, 2013-1-17 #note that I can do this just by splitting up and rearranging the numbers. 
```

但问题是，任务计划程序查询中的 17/1/2013 取决于区域设置。它可能在以下位置：

1.  2013 年 1 月 17 日
2.  17/1/2013
3.  2013/1/17
4.  2013 年 1 月 17 日
5.  2013 年 17 月 1 日
6.  2017 年 13 月 1 日
7.  1-17-2013
8.  17-1-2013
9.  2013-1-17
10.  1-17-13
11.  17-1-13
12.  13-1-17
13.  1.17.2013
14.  17.1.2013
15.  2013.1.17
16.  1.17.13
17.  17.1.13
18.  13.1.17

有没有可以做我想做的任何 cpan 模块？你能给出一个关于如何实现这一目标的脚本吗？

请不要严厉评论。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:33:01.387

以下应该为您提供格式：

```
use Win32::OLE::NLS qw( GetLocaleInfo GetSystemDefaultLCID LOCALE_SSHORTDATE );
say GetLocaleInfo(GetSystemDefaultLCID(), LOCALE_SSHORTDATE);  # yyyy-MM-dd 
```

您可以尝试找到一个可以理解该格式的日期解析器，或者您可以使用类似下面的内容来创建许多解析器都可以理解的格式。

```
my %subs = (
   'yyyy' => '%Y',
   ...
);

my $pat = join '|', map quotemeta, sort { length($b) <=> length($a) } keys %subs;

$format =~ s{($pat)}{ $subs{$1} // $1 }eg; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:14:49.350

**更新：** [看到这个讨论](https://stackoverflow.com/questions/8127335/why-does-windows-task-scheduler-change-the-date-format-and-how-can-i-fix-it)。似乎日期格式可能是基于运行任务的用户的区域设置。如果是这样，您所要做的就是弄清楚如何获得该区域设置......

正如其他人指出的那样，没有办法解决潜在日期格式中的歧义。

我要探索的是用已知日期查询系统并查看它返回的格式的某种方式。例如，也许您可​​以在遥远的未来（明确的）日期安排一个假任务，查看该任务返回的格式，然后将其删除。

这将是一个有点混乱的解决方案，但也许有一种不那么笨拙的方式来做类似的事情。任务调度器的日期格式和系统日期格式一样吗？如果是这样，您可以从系统中查询一个已知日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T10:25:25.533

我可以告诉你关于你的问题的答案（算法）：

曾几何时

让我们考虑一下您的问题：
您想从每种格式中获取日期。
但这是不可能的，因为它可以`12-11-10`

好的，现在您必须确定（以某种方式）使用哪种格式。
如果你能做到这一点，你就可以统治世界。

让我们更深入地考虑您的问题：
首先您必须选择分隔符。（或者不，如果你不想要它）
可以使用这样的东西： `(\d{1,4})(\D)(\d{1,4})(\D)(\d{1,4})`

之后，您有：
`$1,$3,$5 # parts of data`
`$2,$4 # delimiters`

我拿了`4`是因为我不知道年份可以放在哪里。

之后，您必须了解，您拥有哪种格式：

*   dd-mm-yy
*   mm-dd-yy
*   年月日
*   年-日-月

您可以添加几天或几个月的检查，但是，正如我之前所说：
`12-11-10 = -9`<-无法确定，对吗？

所以，你必须有一些关于日期格式的外部信息，例如：

*   哪个国家
*   哪个科学分支
*   哪个家庭
*   ETC

它属于。

如果你能做到这一点，你可以（可能可以）确定格式和`12-11-10 = 12 nov 2010`

结束

# php - 网络套接字和 PHP

> ID：15220501
> 
> 赞同：4
> 
> 时间：2013-03-05T09:44:01.133
> 
> 标签：php, node.js, websocket

我开始考虑将 websockets 作为在我正在调试的新构建 PHP 应用程序中替换长轮询的解决方案。

我有几个问题，我想知道人们是否可以帮助我。

1.  Nodejs 服务器可以调用 PHP 吗？如果可以的话，它在连接方面不会像通过 Apache 那样遭受同样的缺点吗？我们都知道 nodejs 是非阻塞的，而 Apache 等不是，但是如果 Nodejs 只是在它自己的过程中调用 PHP 服务器，那不会以类似的方式出现瓶颈吗？
2.  PHP 和 websockets 是一个很好的匹配吗？
3.  除了显然只适用于 Nodejs 的 socketio 之外，还有什么好的 js 库吗？
4.  有没有人找到一个很好的教程，它使用 websockets 和 PHP 后端，可能使用类似 Ratchet PHP 库的东西，这可能会帮助我上路？

想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-16T00:11:32.407

请原谅我对您的问题的解释。

1：**Node.js能不能调用PHP，那岂不是和Apache有同样的缺点？**

调用一次运行的 PHP 脚本将具有与调用网页相同的一般缺点，除了您要删除额外的处理层。Apache 或任何 Web 服务器本身就是一个非常薄的层，虽然您可以节省一些时间，但节省的时间却微不足道。

无论出于何种原因，如果 PHP 在为您的客户端收集数据方面比 Node.js 更有效，那么在您的应用程序中包含 PHP 可能是明智的。

2：**PHP 和 WebSockets 是很好的搭配吗？**

传统的 PHP 脚本通常旨在每个请求运行一次。绝大多数 PHP 开发人员不熟悉事件驱动开发，而且 PHP 本身（还）不支持异步处理。

PHP 是一种快速、成熟的脚本语言，它只会变得越来越快，尽管它有许多缺点和缺点。（有人说它的弱打字是一个缺点。也有人说它的打字不够弱是一个缺点。）

也就是说，任何语言实现 WebSockets 所需的最低限度是打开基本 TCP 端口并监听请求的能力。对于 PHP，它被实现为 C 套接字库的精简包装器，并且还有其他可用的扩展和框架也可以改变使用 PHP 在 TCP 套接字中工作的感觉。

PHP 的垃圾收集器也已经成熟。内存泄漏要么来自对内存空间的严重漠视（我在看着你，Zend 框架），要么来自自认为聪明或想要证明击败GC。（剧透：如果你知道细节的话，每种语言都很容易！）

在 PHP 中设置守护进程（长时间运行的后台进程）是非常可能且非常容易的。甚至可以让它表现得足够好，以优雅地重新启动并将其连接移交给同一脚本的新版本，甚至是运行不同版本 PHP 的同一服务器上的同一脚本，尽管这超出了范围只是一个一点点。

至于是否匹配，*完全取决于开发者*。您是否愿意、有能力并且乐于使用 PHP 编写 WebSockets 服务器，或者使用现有的服务器之一？是的？那么*你就是*PHP 和 WebSockets 的好搭档。

3：**WebSockets 的 JS 库**

老实说，我没有研究过它们。

4：**使用 PHP 和 Websockets 的教程**

我个人很喜欢这个教程：[http ://www.phpbuilder.com/articles/application-architecture/optimization/creating-real-time-applications-with-php-and-websockets.html](http://www.phpbuilder.com/articles/application-architecture/optimization/creating-real-time-applications-with-php-and-websockets.html)

尽管我很有权威地认为该教程的细节对于该特定的 WebSockets 服务器很快就会过时。（不过，该服务器仍将有一个积极维护的遗留分支。）

如果链接失效：

使用 PHP-Websockets 服务器（在 Github 上可用，很快就会被托管），扩展基本`WebSocketServer`抽象类并实现抽象方法`process()`、`connected()`和`closed()`。

不过，上面的链接有更好的信息，所以只要链接存在，就跟着它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:57:53.197

1.  如果你通过 apache，它会遇到同样的瓶颈。这可以通过使用不同的 Web 服务器来解决，例如**lighthttpd**或**nginx**。你甚至根本不需要节点。
2.  PHP 没有**像样的共享内存**，这使得 WebSockets 的最大优势无关紧要。如果您**不想在用户之间进行交互**，它应该足够**体面**，但即使那样我也不得不对 PHP 的使用皱眉头。PHP 在很多方面都很棒，但实时通信不是其中之一。
***   您可能想查看[https://github.com/einaros/ws](https://github.com/einaros/ws)。*   PHP 不是一个好的后端。任何具有在其自己的沙箱中运行后遗忘的执行模型，例如**Node**、**.NET**、**C/C++**和**Java**都是很好的匹配。PHP 适用于短期运行的执行，例如实际的网站甚至 Web 服务——但不适用于实时连接。**

# ios - “重复”类型字段未在 Google 协议缓冲区目标 C 中编译

> ID：15220503
> 
> 赞同：3
> 
> 时间：2013-03-05T09:44:05.143
> 
> 标签：ios, objective-c, protocol-buffers

我正在使用[启用 ARC 的目标 c 版本的协议缓冲区](https://github.com/regwez/protobuf-objc-iOS5)，并且已将其与 XCode 4.5 集成。我编译了一个简单的 proto 文件，对其进行序列化和反序列化以检查它是否工作正常。现在我添加了一个“重复”类型字段，我收到以下错误 -

> **ARC 语义问题：** “PBAppendableArray”没有可见的@interface 声明选择器“objectAtIndex：”

**我的原型文件**-

```
message Person
{
required int32 id=1;
required string name=2;
repeated string email=3;
} 
```

**人.pb.h**

```
 // Generated by the protocol buffer compiler.  DO NOT EDIT!

    #import <ProtocolBuffers/ProtocolBuffers.h>

    @class Person;
    @class Person_Builder;
    #ifndef __has_feature
      #define __has_feature(x) 0 // Compatibility with non-clang compilers.
    #endif // __has_feature

    #ifndef NS_RETURNS_NOT_RETAINED
      #if __has_feature(attribute_ns_returns_not_retained)
        #define NS_RETURNS_NOT_RETAINED __attribute__((ns_returns_not_retained))
      #else
        #define NS_RETURNS_NOT_RETAINED
      #endif
    #endif

    @interface PersonRoot : NSObject {
    }
    + (PBExtensionRegistry*) extensionRegistry;
    + (void) registerAllExtensions:(PBMutableExtensionRegistry*) registry;
    @end

    @interface Person : PBGeneratedMessage {
    @private
      BOOL hasId_:1;
      BOOL hasName_:1;
      int32_t id;
      NSString* name;
      PBAppendableArray * emailArray;
    }
    - (BOOL) hasId;
    - (BOOL) hasName;
    @property (readonly) int32_t id;
    @property (readonly, strong) NSString* name;
    @property (readonly, strong) PBArray * email;
    - (NSString*)emailAtIndex:(NSUInteger)index;

    + (Person*) defaultInstance;
    - (Person*) defaultInstance;

    - (BOOL) isInitialized;
    - (void) writeToCodedOutputStream:(PBCodedOutputStream*) output;
    - (Person_Builder*) builder;
    + (Person_Builder*) builder;
    + (Person_Builder*) builderWithPrototype:(Person*) prototype;
    - (Person_Builder*) toBuilder;

    + (Person*) parseFromData:(NSData*) data;
    + (Person*) parseFromData:(NSData*) data extensionRegistry:(PBExtensionRegistry*) extensionRegistry;
    + (Person*) parseFromInputStream:(NSInputStream*) input;
    + (Person*) parseFromInputStream:(NSInputStream*) input extensionRegistry:(PBExtensionRegistry*) extensionRegistry;
    + (Person*) parseFromCodedInputStream:(PBCodedInputStream*) input;
    + (Person*) parseFromCodedInputStream:(PBCodedInputStream*) input extensionRegistry:(PBExtensionRegistry*) extensionRegistry;
    @end

    @interface Person_Builder : PBGeneratedMessage_Builder {
    @private
      Person* result;
    }

    - (Person*) defaultInstance;

    - (Person_Builder*) clear;
    - (Person_Builder*) clone;

    - (Person*) build;
    - (Person*) buildPartial;

    - (Person_Builder*) mergeFrom:(Person*) other;
    - (Person_Builder*) mergeFromCodedInputStream:(PBCodedInputStream*) input;
    - (Person_Builder*) mergeFromCodedInputStream:(PBCodedInputStream*) input extensionRegistry:(PBExtensionRegistry*) extensionRegistry;

    - (BOOL) hasId;
    - (int32_t) id;
    - (Person_Builder*) setId:(int32_t) value;
    - (Person_Builder*) clearId;

    - (BOOL) hasName;
    - (NSString*) name;
    - (Person_Builder*) setName:(NSString*) value;
    - (Person_Builder*) clearName;

    - (PBAppendableArray *)email;
    - (NSString*)emailAtIndex:(NSUInteger)index;
    - (Person_Builder *)addEmail:(NSString*)value;
    - (Person_Builder *)setEmailArray:(NSArray *)array;
    - (Person_Builder *)setEmailValues:(const NSString* *)values count:(NSUInteger)count;
    - (Person_Builder *)clearEmail;
    @end 
```

**人.pb.m**

```
// Generated by the protocol buffer compiler.  DO NOT EDIT!

#import "Person.pb.h"

@implementation PersonRoot
static PBExtensionRegistry* extensionRegistry = nil;
+ (PBExtensionRegistry*) extensionRegistry {
  return extensionRegistry;
}

+ (void) initialize {
  if (self == [PersonRoot class]) {
    PBMutableExtensionRegistry* registry = [PBMutableExtensionRegistry registry];
    [self registerAllExtensions:registry];
    extensionRegistry = registry;
  }
}
+ (void) registerAllExtensions:(PBMutableExtensionRegistry*) registry {
}
@end

@interface Person ()
@property int32_t id;
@property (strong) NSString* name;
@property (strong) PBAppendableArray * emailArray;
@end

@implementation Person

- (BOOL) hasId {
  return !!hasId_;
}
- (void) setHasId:(BOOL) value {
  hasId_ = !!value;
}
@synthesize id;
- (BOOL) hasName {
  return !!hasName_;
}
- (void) setHasName:(BOOL) value {
  hasName_ = !!value;
}
@synthesize name;
@synthesize emailArray;
@dynamic email;
- (id) init {
  if ((self = [super init])) {
    self.id = 0;
    self.name = @"";
  }
  return self;
}
static Person* defaultPersonInstance = nil;
+ (void) initialize {
  if (self == [Person class]) {
    defaultPersonInstance = [[Person alloc] init];
  }
}
+ (Person*) defaultInstance {
  return defaultPersonInstance;
}
- (Person*) defaultInstance {
  return defaultPersonInstance;
}
- (NSArray *)email {
  return emailArray;
}
- (NSString*)emailAtIndex:(NSUInteger)index {
  return [emailArray objectAtIndex:index];
}
- (BOOL) isInitialized {
  if (!self.hasId) {
    return NO;
  }
  if (!self.hasName) {
    return NO;
  }
  return YES;
}
- (void) writeToCodedOutputStream:(PBCodedOutputStream*) output {
  if (self.hasId) {
    [output writeInt32:1 value:self.id];
  }
  if (self.hasName) {
    [output writeString:2 value:self.name];
  }
  const NSUInteger emailArrayCount = self.emailArray.count;
  if (emailArrayCount > 0) {
    const NSString* *values = (const NSString* *)self.emailArray.data;
    for (NSUInteger i = 0; i < emailArrayCount; ++i) {
      [output writeString:3 value:values[i]];
    }
  }
  [self.unknownFields writeToCodedOutputStream:output];
}
- (int32_t) serializedSize {
  int32_t size = memoizedSerializedSize;
  if (size != -1) {
    return size;
  }

  size = 0;
  if (self.hasId) {
    size += computeInt32Size(1, self.id);
  }
  if (self.hasName) {
    size += computeStringSize(2, self.name);
  }
  {
    int32_t dataSize = 0;
    const NSUInteger count = self.emailArray.count;
    const NSString* *values = (const NSString* *)self.emailArray.data;
    for (NSUInteger i = 0; i < count; ++i) {
      dataSize += computeStringSizeNoTag(values[i]);
    }
    size += dataSize;
    size += 1 * count;
  }
  size += self.unknownFields.serializedSize;
  memoizedSerializedSize = size;
  return size;
}
+ (Person*) parseFromData:(NSData*) data {
  return (Person*)[[[Person builder] mergeFromData:data] build];
}
+ (Person*) parseFromData:(NSData*) data extensionRegistry:(PBExtensionRegistry*) extensionRegistry {
  return (Person*)[[[Person builder] mergeFromData:data extensionRegistry:extensionRegistry] build];
}
+ (Person*) parseFromInputStream:(NSInputStream*) input {
  return (Person*)[[[Person builder] mergeFromInputStream:input] build];
}
+ (Person*) parseFromInputStream:(NSInputStream*) input extensionRegistry:(PBExtensionRegistry*) extensionRegistry {
  return (Person*)[[[Person builder] mergeFromInputStream:input extensionRegistry:extensionRegistry] build];
}
+ (Person*) parseFromCodedInputStream:(PBCodedInputStream*) input {
  return (Person*)[[[Person builder] mergeFromCodedInputStream:input] build];
}
+ (Person*) parseFromCodedInputStream:(PBCodedInputStream*) input extensionRegistry:(PBExtensionRegistry*) extensionRegistry {
  return (Person*)[[[Person builder] mergeFromCodedInputStream:input extensionRegistry:extensionRegistry] build];
}
+ (Person_Builder*) builder {
  return [[Person_Builder alloc] init];
}
+ (Person_Builder*) builderWithPrototype:(Person*) prototype {
  return [[Person builder] mergeFrom:prototype];
}
- (Person_Builder*) builder {
  return [Person builder];
}
- (Person_Builder*) toBuilder {
  return [Person builderWithPrototype:self];
}
- (void) writeDescriptionTo:(NSMutableString*) output withIndent:(NSString*) indent {
  NSUInteger listCount = 0;
  if (self.hasId) {
    [output appendFormat:@"%@%@: %@\n", indent, @"id", [NSNumber numberWithInt:self.id]];
  }
  if (self.hasName) {
    [output appendFormat:@"%@%@: %@\n", indent, @"name", self.name];
  }
  for (NSString* element in self.emailArray) {
    [output appendFormat:@"%@%@: %@\n", indent, @"email", element];
  }
  [self.unknownFields writeDescriptionTo:output withIndent:indent];
}
- (BOOL) isEqual:(id)other {
  if (other == self) {
    return YES;
  }
  if (![other isKindOfClass:[Person class]]) {
    return NO;
  }
  Person *otherMessage = other;
  return
      self.hasId == otherMessage.hasId &&
      (!self.hasId || self.id == otherMessage.id) &&
      self.hasName == otherMessage.hasName &&
      (!self.hasName || [self.name isEqual:otherMessage.name]) &&
      [self.emailArray isEqualToArray:otherMessage.emailArray] &&
      (self.unknownFields == otherMessage.unknownFields || (self.unknownFields != nil && [self.unknownFields isEqual:otherMessage.unknownFields]));
}
- (NSUInteger) hash {
  NSUInteger hashCode = 7;
  NSUInteger listCount = 0;
  if (self.hasId) {
    hashCode = hashCode * 31 + [[NSNumber numberWithInt:self.id] hash];
  }
  if (self.hasName) {
    hashCode = hashCode * 31 + [self.name hash];
  }
  for (NSString* element in self.emailArray) {
    hashCode = hashCode * 31 + [element hash];
  }
  hashCode = hashCode * 31 + [self.unknownFields hash];
  return hashCode;
}
@end

@interface Person_Builder()
@property (strong) Person* result;
@end

@implementation Person_Builder
@synthesize result;
- (id) init {
  if ((self = [super init])) {
    self.result = [[Person alloc] init];
  }
  return self;
}
- (PBGeneratedMessage*) internalGetResult {
  return result;
}
- (Person_Builder*) clear {
  self.result = [[Person alloc] init];
  return self;
}
- (Person_Builder*) clone {
  return [Person builderWithPrototype:result];
}
- (Person*) defaultInstance {
  return [Person defaultInstance];
}
- (Person*) build {
  [self checkInitialized];
  return [self buildPartial];
}
- (Person*) buildPartial {
  Person* returnMe = result;
  self.result = nil;
  return returnMe;
}
- (Person_Builder*) mergeFrom:(Person*) other {
  if (other == [Person defaultInstance]) {
    return self;
  }
  if (other.hasId) {
    [self setId:other.id];
  }
  if (other.hasName) {
    [self setName:other.name];
  }
  if (other.emailArray.count > 0) {
    if (result.emailArray == nil) {
      result.emailArray = [[NSMutableArray alloc] initWithArray:other.emailArray];
    } else {
      [result.emailArray addObjectsFromArray:other.emailArray];
    }
  }
  [self mergeUnknownFields:other.unknownFields];
  return self;
}
- (Person_Builder*) mergeFromCodedInputStream:(PBCodedInputStream*) input {
  return [self mergeFromCodedInputStream:input extensionRegistry:[PBExtensionRegistry emptyRegistry]];
}
- (Person_Builder*) mergeFromCodedInputStream:(PBCodedInputStream*) input extensionRegistry:(PBExtensionRegistry*) extensionRegistry {
  PBUnknownFieldSet_Builder* unknownFields = [PBUnknownFieldSet builderWithUnknownFields:self.unknownFields];
  while (YES) {
    int32_t tag = [input readTag];
    switch (tag) {
      case 0:
        [self setUnknownFields:[unknownFields build]];
        return self;
      default: {
        if (![self parseUnknownField:input unknownFields:unknownFields extensionRegistry:extensionRegistry tag:tag]) {
          [self setUnknownFields:[unknownFields build]];
          return self;
        }
        break;
      }
      case 8: {
        [self setId:[input readInt32]];
        break;
      }
      case 18: {
        [self setName:[input readString]];
        break;
      }
      case 26: {
        [self addEmail:[input readString]];
        break;
      }
    }
  }
}
- (BOOL) hasId {
  return result.hasId;
}
- (int32_t) id {
  return result.id;
}
- (Person_Builder*) setId:(int32_t) value {
  result.hasId = YES;
  result.id = value;
  return self;
}
- (Person_Builder*) clearId {
  result.hasId = NO;
  result.id = 0;
  return self;
}
- (BOOL) hasName {
  return result.hasName;
}
- (NSString*) name {
  return result.name;
}
- (Person_Builder*) setName:(NSString*) value {
  result.hasName = YES;
  result.name = value;
  return self;
}
- (Person_Builder*) clearName {
  result.hasName = NO;
  result.name = @"";
  return self;
}
- (NSMutableArray *)email {
  return result.emailArray;
}
- (NSString*)emailAtIndex:(NSUInteger)index {
  return [result emailAtIndex:index];
}
- (Person_Builder *)addEmail:(NSString*)value {
  if (result.emailArray == nil) {
    result.emailArray = [[NSMutableArray alloc]init];
  }
  [result.emailArray addObject:value];
  return self;
}
- (Person_Builder *)setEmailArray:(NSArray *)array {
  result.emailArray = [[NSMutableArray alloc] initWithArray:array];
  return self;
}
- (Person_Builder *)clearEmail {
  result.emailArray = nil;
  return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:31:06.597

*将此答案留给以后可能会检查此问题的人。*

最好直接在 Xcode 中使用 C++ protobuf 文件。在提到的 ios 版本的 protobuf 中，必填字段根本不会编译。[检查此答案](https://stackoverflow.com/a/15246414/1383704)以在您的项目中添加 protobuf。

# nlp - Apache Stanbol 情绪分析和句子检测不起作用

> ID：15220508
> 
> 赞同：1
> 
> 时间：2013-03-05T09:44:22.490
> 
> 标签：nlp, sentiment-analysis, opennlp, apache-stanbol

我正在使用 Apache Stanbol。它适用于增强文本，但是当我尝试情绪分析和句子检测时，它不起作用。

我试过这段代码

```
curl -v -X POST -H "Accept: text/plain" -H "Content-type: text/plain; \
charset=UTF-8" --data "Some text for analysis" \
"http://localhost:8081/enhancer/engine/sentiment-wordclassifier" 
```

但它给出了空白`{ }`输出，我尝试更改标题属性但没有运气。

我错过了什么吗？我需要先做一些配置吗？

我什至尝试在增强器链中添加分析器，但相同的空白输出，也尝试了 REST API `opennlp-sentence`，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T22:49:49.670

我猜你正在将数据发送到错误的端点......通常需要对所有链执行对增强器的调用：

```
http://host/stanbol/enhancer 
```

或具体链：

```
http://host/stanbol/enhancer/chain/<name> 
```

增强器结果不能被序列化为纯文本，但可以在 Stanbol 支持的任何 RDF 序列化中。因此，Accept 标头需要是其中的任何一个，例如 text/turtle。

文档中的更多详细信息：[http ://stanbol.apache.org/docs/trunk/components/enhancer/#RESTful_API](http://stanbol.apache.org/docs/trunk/components/enhancer/#RESTful_API)

# javascript - 动态生成表格行内的表格

> ID：15220515
> 
> 赞同：2
> 
> 时间：2013-03-05T09:44:41.370
> 
> 标签：javascript, c#, html, html-table

我有一个 Web 应用程序，它使用 HTML 通用控件来生成表格。我在动态创建的每一行中都有一个按钮。我的问题是，如何在包含按钮的相应行下添加一个新表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:52:35.213

这是一个使用 jQuery 的示例，根据我的经验，在纯 JS 中操作表格有点笨拙。

[参见 jsFiddle](http://jsfiddle.net/8YNDr/)

**HTML**

```
<table>
    <tr>
        <td><button class="add-table">Add table</button></td>
    </tr>
    <tr>
        <td><button class="add-table">Add table</button></td>
    </tr>
</table> 
```

**jQuery**

```
$(document).ready(function () {
    $('.add-table').click(function () {
        $(this).after('<table>\
            <tr>\
            <td>New table</td>\
            </tr>\
            </table>');
    });
}); 
```

# php - 在比较活动记录代码点火器中的值时在 where 子句中使用斜杠

> ID：15220517
> 
> 赞同：0
> 
> 时间：2013-03-05T09:44:47.813
> 
> 标签：php, codeigniter, activerecord

我有以下查询

```
$query="DELETE FROM salesinvoiceitems WHERE invoiceNumber=".$this->put('invoiceNumber'); 
```

这里`$this->put('invoiceNumber');`总是有像“M\34\SD”这样的值。由于值中的斜线，它不能按预期工作。

**我研究并发现 mysql_escape_string 可用于此目的，但根据手册现在已弃用。那么我在这里最好的选择是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:48:37.233

为什么不改用 Codeingiter Active Record？一个例子：

```
$this->db->where('invoiceNumber', $this->put('invoiceNumber'));
$this->db->delete('salesinvoiceitems'); 
```

取自 Codeigniter 文档：

> 除了简单之外，使用 Active Record 功能的一个主要好处是它允许您创建独立于数据库的应用程序，因为查询语法是由每个数据库适配器生成的。它还允许更安全的查询，因为系统会自动转义这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:47:18.667

在 activerecord 中有一个方法叫做`escape`，所以你应该：

```
$invoice = $this->db->escape($yourVar);
$query = "DELETE FROM salesinvoiceitems WHERE invoiceNumber=$invoice"; 
```

这将防止 sql 注入，因为它逃脱了 var。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:47:25.140

试试这个

`$query="DELETE FROM salesinvoiceitems WHERE invoiceNumber=".addslashes($this->put('invoiceNumber'));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:48:03.083

尝试带斜杠

```
$query="DELETE FROM salesinvoiceitems WHERE invoiceNumber='".($this->put('invoiceNumber')). "'"; 
```

# asynchronous - 单击“删除”按钮时，剑道上传不会删除行

> ID：15220521
> 
> 赞同：1
> 
> 时间：2013-03-05T09:44:55.850
> 
> 标签：asynchronous, upload, asyncfileupload, unlink

上传程序正常工作，但是当我尝试“删除”任何上传的文件时，文件将被正确删除，但 html 页面中的行仍然像点击之前一样！单击“删除”按钮后如何删除行？

这是这里的代码：

```
<script>
  $(function() {

     $("#upload").kendoUpload({
         async: {
                    saveUrl: "modules/save.php",
                    removeUrl: "modules/remove.php",
                    autoUpload: true,
                    multiple: true
                }
            });

    });

</script> 
```

这是remove.php：

```
 <?php
           $targetdir = "../files/";
           $targetPath = $targetdir.$_POST["fileNames"];
           unlink($targetPath);
           echo "";
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T01:24:03.933

```
...
async: {
    saveUrl: "modules/save.php",
    removeUrl: "modules/remove.php",
    autoUpload: true,
    multiple: true,
    removeField: "fileNames[]"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T17:19:32.953

检查这个问题：[KendoUI Uploader Remove](https://stackoverflow.com/questions/16052758/kendoui-uploader-remove)

对我来说，改变返回类型就可以了。

从

```
public ActionResult RemoveFile(string[] fileNames)
{
    return Content("");
} 
```

至

```
public ActionResult RemoveFile(string[] fileNames)
{
    return Json("");
} 
```

我离开了我的 SaveFile() 函数`return Content("");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T09:42:05.910

`<?php $targetdir = "../files/"; $targetPath = $targetdir.$_POST["fileNames"]; unlink($targetPath); echo "{}"; ?>`

# javascript - 用于表单验证的引导工具提示

> ID：15220523
> 
> 赞同：0
> 
> 时间：2013-03-05T09:45:04.207
> 
> 标签：javascript, jquery, jquery-ui, twitter-bootstrap

我对引导程序相当陌生，似乎无法做到这一点。我在表单验证上使用工具提示 javascript 功能，当输入字段中存在验证错误时会弹出，我希望在输入字段 onBlur 中出现验证检查错误时出现工具提示并在焦点上消失

我的 HTML 是：

```
<input class="span2" id="formName" rel="tooltip" data-placement="top" type="text"  placeHolder="" onBlur="return validateName();" > 
```

我的 javascript 是

```
function validateName()
        {
        var x=document.getElementById("formName").value;
        if (x==null || x==""){
          $('#formName').tooltip({ 'title': 'Name Must Not Be Empty!' });
        } else { $('#formName').tooltip('hide') }   
    } 
```

目前它遵循鼠标悬停时出现的默认行为，我想让它在光标离开输入字段时出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:51:23.123

我想你应该通过这个[http://api.jquery.com/blur/](http://api.jquery.com/blur/)

```
<html>
  <head>
    <title>temp-stackoverflow</title>
    <script type="text/javascript" src="./jquery-1.9.1.min.js"></script>
  </head>
  <body>
    <input type="field" class="text-field">toggle cursor in and out of text box</input>
  </body>
  <script type="text/javascript">
    $('.text-field').blur(function() {
      $('body').attr('bgcolor', "#"+((1<<24)*Math.random()|0).toString(16))
    });
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:31:37.600

将事件触发器更改为`onkeyup`：

```
<input class="span2" id="formName" rel="tooltip" data-placement="top" type="text"  placeHolder="" onkeyup="return validateName();" > 
```

# ruby - Ruby 2.0 中的改进完全没用吗？

> ID：15220526
> 
> 赞同：-3
> 
> 时间：2013-03-05T09:45:23.820
> 
> 标签：ruby, ruby-2.0, refinements

Ruby 2.0 中引入了所谓的[改进。](https://www.google.com/search?q=ruby+refinements)我和他们一起玩，现在我完全被哄骗了：

— 声明的主要优点`refine`是它们不是全局范围的。呸。

```
module MyModule
  class ::String
    def my_locally_needed_func
      # do smth 
    end
  end
end

# here I need it
require 'mymodule'
"".my_locally_needed_func 
```

是孤立的，不是更糟。

— 改进不支持类方法。呸。当然，它们是通过 hack（记住，一切都是对象）：

```
module VoidRefinements
  refine String do
    def self.singleton_method_for_string_class
      puts "inside singleton_method_for_string_class"
    end 
  end 
end

module VoidRefinementsOK
  refine Class do
    def singleton_method_for_string_class
      err_msg = "NoMethodError: undefined method ‘#{__method__}’ for ‘#{self}:#{self.class}’"
      raise NoMethodError.new(err_msg) unless String == self
      puts "inside proper singleton_method_for_string_class"
    end 
  end 
end

using VoidRefinements
String.singleton_method_for_string_class rescue puts $!

using VoidRefinementsOK
String.singleton_method_for_string_class rescue puts $!

# undefined method `singleton_method_for_string_class' for String:Class
# inside proper singleton_method_for_string_class 
```

后者甚至不会导致性能损失，因为没有人会`Fixnum.substr`故意调用。

— 细化是通过 执行的`eval`。`refine`不是关键字。呸。（嗯，“呸！”再次。）

所以，我的问题是：我是否错过了什么或者每个人都认为新引入的功能没有优势？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-05T12:38:50.183

您完全忽略了细化不是全局范围的事实，但这正是引入它们的原因。当然，如果你只是忽略了某事物存在的原因，那么你显然不会看到它的任何价值。

但是，请参阅行动中的隔离。这是修改为使用细化的示例：

```
module MyModule
  refine String do
    def my_locally_needed_func
      # do smth 
    end
  end
end

module MyOtherModule
  # The monkeypatch is invisible:
  "".my_locally_needed_func
  # NoMethodError: undefined method `my_locally_needed_func' for "":String

  # I first have to use the Refinement:
  using MyModule
  "".my_locally_needed_func
end

# The monkeypatch is scoped. Even though we were able to use 
# it in MyOtherModule, we still cannot use it at the top-level:
"".my_locally_needed_func
# NoMethodError: undefined method `my_locally_needed_func' for "":String

# We have to call `using` again, for the top-level:
using MyModule
"".my_locally_needed_func 
```

这是*您*的比较示例：

```
module MyModule
  class ::String
    def my_locally_needed_func
      # do smth 
    end
  end
end

# here I need it
"".my_locally_needed_func 
```

注意：我删除了没有意义的调用，`using`因为你没有使用 Refinements。

在您的情况下，monkeypatch 是全局可用的，因为您只是修改了`String`类。此功能称为“开放类”，而这正是需要避免的细化。

# ruby-on-rails - 接受文件路径的 Ruby 模块方法

> ID：15220534
> 
> 赞同：-2
> 
> 时间：2013-03-05T09:45:47.123
> 
> 标签：ruby-on-rails, ruby, module, filepath

我是 Ruby 的新手，正在开发一个小程序，我需要创建一个模块，该模块的方法采用文件路径并读取文件内容。以下是该模块的代码。

```
module Model

def self.generate(file_path)
    file_name = File.basename("file_path")
    puts File.read(file_name)
  #return ex. Person class 

end
end 
```

当我尝试调用 Model.generate("/Users/myname/Rubyfolder/mytext.txt/") 之类的方法时，出现以下错误：

```
Errno::ENOENT: No such file or directory - file_path
from ./code_generation.rb:5:in `read'
from ./code_generation.rb:5:in `generate'
from (irb):34 
```

我想这可能是我如何描述路径的问题......但我不知道如何让它发挥作用。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:55:10.680

这是问题所在：

```
file_name = File.basename("file_path") 
```

将其更改为：

```
file_name = File.basename(file_path) 
```

`file_path`是一个参数，while`"file_path"`是一个字符串，它可能不是现有文件的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:56:47.160

`"file_path"`是一个字符串。您可能会`file_path`在此处使用变量（不带引号）。

# ruby-on-rails - Rails 是否为每个应用程序创建单独的数据库

> ID：15220535
> 
> 赞同：0
> 
> 时间：2013-03-05T09:45:48.183
> 
> 标签：ruby-on-rails, sqlite

我是 Rails 的初学者，在我的 Windows 7 机器上尝试了一些示例。

我收到以下错误：`SQLite3::SQLException: table "entries" already exists`

“条目”是已经在另一个 Rails 应用程序中创建的表，我正在尝试一个类似的示例，它试图再次创建“条目”。

Rails 是否在 sqlite 中为每个应用程序创建一个单独的数据库？（我也是 Sqlite 的新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:55:11.327

默认情况下，使用 sqlite 时，Rails 使用名为`development.sqlite3`,的数据库`test.sqlite3`，`production.sqlite3`它们是`db`Rails 项目目录中的文件。

因此，如果您的新应用程序与旧应用程序位于同一文件夹中，那么您最终将使用相同的数据库；或者如果您的`config/database.yml`文件指向数据库的某个公共位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:56:41.197

对于每个应用程序，应用程序`database.yml`的 config 文件夹中都有一个文件。您可以定义应用程序独有的数据库名称以及数据库设置。可能您`database.yml`的两个项目都具有相同的文件。因此，您当前的应用程序也在尝试创建已经存在的表（由`database.yml`您以前的应用程序的文件创建）。

解决方案是更改`database.yml`特定于您的应用程序。

之后，您可以运行：

```
rake db:create

rake db:migrate 
```

按照上面的顺序，一切都会好的。

您也可以`rake db:drop`在不修改任何文件的情况下只执行上述两个命令，`database.yml`但这将删除您以前的数据库并为此应用程序创建新的数据库。但这不推荐。

# json - Nsis：使用 NsJson 修改 Json 文件

> ID：15220538
> 
> 赞同：0
> 
> 时间：2013-03-05T09:45:55.640
> 
> 标签：json, nsis

我正在尝试修改桌面上的文件 abc.json 以将虚拟节点的值更改为 500。

```
{

"home": {

  "abcd":   {

          "dummy":100
}

}, 
```

我正在使用 nsJson 插件如下：代码：

```
var DESK

function JsonDemo

strcpy $DESK "C:\Users\zaidi.miraz\Desktop"

nsJSON::Set /file $DESK\abc.json

nsJSON::Set `homepage` `abcd` `dummy` /value `500`

functionend 
```

但这不起作用，因为提到的 json 文件仍然保留 dummy=100 的值。

我究竟做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:03:09.207

您永远不会真正将更改保存回文件！使用`nsJSON::Serialize`...

# c - fgets 的意外结果

> ID：15220545
> 
> 赞同：4
> 
> 时间：2013-03-05T09:46:19.933
> 
> 标签：c, fgets

```
int main(int argc, char** argv)
{
//Local Declaration
char last_name[20];
char first_name[20];
char phone_number[20];
char address[30];

//Statement
printf("Enter your last name: ");
fgets(last_name, 20, stdin);

printf("Enter your first name: ");
fgets(first_name, 20, stdin);

printf("Enter your phone number: ");
fgets(phone_number, 20, stdin);

printf("Enter your address: ");
fgets(address, 30, stdin);

printf("=====Address book=====\n");
printf("Name: %s%s\n", first_name, last_name);
printf("Phone Number: %s\n", phone_number);
printf("Address: %s\n", address);
return (EXIT_SUCCESS);
} 
```

结果并没有像我预期的那样出现......我的意思是名字和姓氏在一行中（例如马克扎克伯格）。但结果是这样的

标记

扎克伯格

这里有什么问题？为什么中间有一条新线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:49:31.143

见手册页

引用：

*fgets() 从流中最多读入一个小于 size 的字符，并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。如果读取了换行符，则将其存储到缓冲区中。终止空字节 (aq\0aq) 存储在缓冲区中的最后一个字符之后。*

[因此fgets](http://linux.die.net/man/3/fgets)读取的字符串末尾包含换行符。您将需要删除它。

**编辑**

要删除行尾（并允许 DOS），请执行

```
int end = strlen(first_name) - 1;
if (end >= 0 && '\n' == first_name[end])
{
   first_name[end--] = 0;
   if (end >= 0 && '\r' == first_name[end]) first_name[end] = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:00:09.840

正如 Ed 所建议的，请参阅手册，`'\n'`用`' '`(simple space) 替换的简单方法可能是：

```
first_name[strlen(first_name) - 1] = ' '; 
```

`strlen`使用`string.h`，不要忘记包含它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:05:42.443

`fgets()`, 将 '\n' 存储在变量 first_name 中，当您按 Enter 时，在您键入 Mark 后，因此存储在 first_name 中的字符串是 "Mark\n" ，`printf()`它将完成它的工作并打印换行符。

另一个不错的选择是使用`fscanf()`

```
fscanf (stdin, "%s", first_name); 
```

**编辑：**

检查`fscanf()`错误。

```
char str[50];
int bytes = -1;
fscanf (stdin, "%s%n",str,&bytes);
 if(bytes == -1)
    perror("\nIncomplete Bytes Parsed\n"); 
```

# php - PHP + JavaScript + MYSQL。将带有复选框值的文本提交到单独的数据库中

> ID：15220547
> 
> 赞同：0
> 
> 时间：2013-03-05T09:46:23.253
> 
> 标签：php, javascript, mysql, button, checkbox

只是在我正在开发的网页上遇到了一些问题。它是一个电影院座位预订系统。

目前我正在使用复选框来表示座位。这些复选框将通过此按钮和功能进行勾选和确认。它也将使用其发送的页面上的代码更新其表格中座位的状态。

```
<input type='button' value='Confirm Reservation' onclick='confirmReservation()'/>  

        function confirmReservation() {

        var selectedList = getSelectedList('Confirm Reservation');

        if (selectedList) {
            if (confirm('Do you want to CONFIRM this Reservation :  ' + selectedList + '?')) { 
                document.forms[0].statusA.value=0;
                document.forms[0].statusB.value=1;
                document.forms[0].action='bookingQueries.php';
                document.forms[0].submit();
            } else {
                clearSelection();
            }
        }
    } 
```

我的问题是我正在尝试添加一个文本表单，可以输入人员姓名并将其发送到存储预订信息的单独表格。我想使用与复选框相同的“确认按钮”来执行此操作。iv 环顾四周，仍然没有找到这样做的方法。有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:50:17.463

当您提交表单时

```
document.forms[0].submit(); 
```

两个表单标签之间的所有输入都发送到“bookingQueries.php”。因此，要保存名称，您必须对 PHP 文件进行一些处理。像这样的东西：

```
$query = "INSERT INTO yourtable (seatNumber, personName) VALUES ";
$separator ='';
for($i=0; $i<=$nbSeats; $i++) {
    $query .=" (".$i.",".$_POST['nameSeat'.$i].")".$separator;
    $separator = ',';
}
//Exec query 
```

# java - 为什么eclipse IDE中Java注释中的“XXX”字有特殊风格？

> ID：15220551
> 
> 赞同：4
> 
> 时间：2013-03-05T09:46:43.990
> 
> 标签：java, eclipse, coding-style, comments

当我 在 Eclipse IDE 中编写包含“XXX”字样的 Java 注释时

```
// Increment 
// XXX => Not like that [ x = x++; ]
// OK  => BUT like that [ x++; ] 
```

“XXX”字采用与普通评论风格不同的风格
它的颜色将是（蓝色）NOT（绿色）

注意
“XXX”的评论颜色和“TODO”的评论颜色
一样

```
// XXX color like TODO color 
```

为什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:48:16.340

XXX 有时被用作错误或其他坏东西的标记。Eclipse 可以识别注释中的各种标签，并突出显示它们。TODO 和 FIXME 是我想到的其他示例。

它在首选项中的 Java > Compiler > Task Tags 下进行配置。

一种利用它的方法是使用 Tasks 视图；这会列出代码中出现的所有此类标记，并让您跳转到它们。它作为一个超轻量级的微任务跟踪系统非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:48:15.800

在 Eclipse 中，您可以定义具有含义的特殊单词。`XXX`定义在与单词相同的位置`TODO`，它是 Eclipse 的默认设置，但您可以将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T09:48:50.133

> 需要注意的标记。常用于程序注释中，以指示被占用或需要被占用的区域。一些黑客将“XXX”比作名义上的重色情电影评级。比较 FIXME。

[引自行话文件](http://www.outpost9.com/reference/jargon/jargon_39.html#TAG2023)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T09:51:52.353

`XXX`在eclipse中作为任务标签用于评论，它的优先级为normal。其他标签包括`TODO`（正常）、`FIXME`（高）。它可用于标记代码中需要注意的部分，稍后进行审查并传达应该做什么，其中一些是您希望在稍后阶段处理的任务。更多[在这里](http://pipecuts.wordpress.com/2012/09/22/eclipse-task-tags-meaning/)

# oracle-adf - ADF 移动应用程序中的错误内容长度值弹出显示

> ID：15220554
> 
> 赞同：1
> 
> 时间：2013-03-05T09:46:46.747
> 
> 标签：oracle-adf

我正在开发 ADF 移动应用程序，它使用从原始 Web 项目生成的服务接口作为 Web 服务。

**我的 Web 服务配置**

*   “查找”只是视图实例中的基本操作
*   无查看条件

由于仅查找是基本操作，因此似乎需要“findCriteria”和“findControl”参数（如 AMX 页面中生成的“Panel From layout”中所示）

在AMX Page中拖动生成表单视图并部署到模拟器后，我发现弹出错误`Bad Content-Length value`如下图所示。

我该如何解决这个问题？因为我使用 HTTP Analyzer 并没有找到来自 ADF 移动应用程序的任何请求

![iOS 截图](../Images/2fd16009ee2bf2981d03a1238476cc41.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:37:24.017

谢天谢地，我发现了“控制台”日志记录的问题，发现 adf mobile 正在使用我的 OSX 代理设置，而不是在 jDeveloper 中使用配置的代理设置。

```
08.03.13 14:12:41,423 iDash2[3625]: All System Proxy Settings = {
ExceptionsList =     (
    "*.local",
    "169.254/16"
);
FTPPassive = 1;
HTTPEnable = 1;
HTTPPort = 80;
HTTPProxy = "144.1.100.xxx";
HTTPSEnable = 1;
HTTPSPort = 80;
HTTPSProxy = "144.1.100.xxx";
HTTPSUser = xxx;
HTTPUser = xxx;
"__SCOPED__" =     {
    en0 =         {
        ExceptionsList =             (
            "*.local",
            "169.254/16"
        );
        FTPPassive = 1;
        HTTPEnable = 1;
        HTTPPort = 80;
        HTTPProxy = "144.1.100.xxx";
        HTTPSEnable = 1;
        HTTPSPort = 80;
        HTTPSProxy = "144.1.100.xxx";
        HTTPSUser = xxxx;
        HTTPUser = xxx;
    };
};
} 
```

因此，在 OSX 网络设置中将当前 IP 地址添加到例外列表中即可解决此问题。

注意：我当前的开发机器连接在公司网络中，该网络应用每个客户端使用代理连接任何东西。

# c# - WinForms C# 按钮可见性

> ID：15220556
> 
> 赞同：1
> 
> 时间：2013-03-05T09:46:57.403
> 
> 标签：c#, button, visibility

我有一个面板，上面有 2 个按钮。我要做的是，当鼠标在面板区域内时，按钮可见，而当鼠标位置不在面板区域时，按钮不可见。

我正在使用面板上的`MouseEnter`and`MouseLeave`事件。

我`MouseEnter`做`button.Show()`，`MouseLeave`我做`button.Hide()`；

这看起来很简单，但是当按钮可见时（鼠标在面板区域内）它们是不可点击的（点击事件不会被触发）。

一些调试表明，当鼠标悬停在按钮上时，事件`MouseEnter`并`MouseLeave`不断被调用。

对此有什么建议吗？这应该很容易做到，以至于我实际上没有想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:51:23.773

发生这种情况是因为当您的鼠标悬停`MouseLeave`在面板上时，任何按钮事件都会触发，因此按钮再次不可见并且鼠标重新回到面板上，从而立即触发`MouseEnter`并显示它们。

如果您在属于该面板的任何控件上，则通过添加一些检查`MouseLeave`事件的标志来修复您的逻辑，如果是，请不要隐藏它们。

编辑：这里有一个示例来解决您的问题 -[来自 Panel 及其子控件的 MouseEnter 和 MouseLeave 事件](https://stackoverflow.com/questions/2576021/mouseenter-and-mouseleave-events-from-a-panel-and-its-child-controls)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:04:45.463

这是gzaxx引用的另一个主题中提出的解决方案

```
 protected override void OnMouseLeave(EventArgs e)
        {
            if (this.ClientRectangle.Contains(this.PointToClient(Control.MousePosition)))
                return;
            else
            {
                base.OnMouseLeave(e);
            }
        } 
```

# html - 出现在 YouTube 嵌入代码下的 Twitter Bootstrap 下拉菜单

> ID：15220559
> 
> 赞同：0
> 
> 时间：2013-03-05T09:47:05.287
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 下拉代码来构建我的导航，但是，我在导航栏下方有一个 Youtube 视频，当用户将鼠标悬停在导航项上时，下拉菜单出现在 YouTube iFrame 下方。我在两个元素上都使用了 Z-Index，但这似乎没有什么不同。任何帮助表示赞赏，示例可以在这里找到：http: [//bit.ly/YKXJEq](http://bit.ly/YKXJEq)

编辑：这似乎只是 IE 上某些版本的问题。在 IE9 上测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:52:24.817

添加`wmode=transparent`视频网址

```
http://www.youtube.com/embed/vmPm5aaU0dg?rel=0&amp;wmode=transparent 
```

```
<iframe style="z-index:-9999;" width="292" height="306" src="http://www.youtube.com/embed/vmPm5aaU0dg?rel=0&amp;wmode=transparent" frameborder="0" allowfullscreen=""></iframe> 
```

# api - 没有 OAuth 的 Twitter Rest API 1.1 搜索

> ID：15220562
> 
> 赞同：10
> 
> 时间：2013-03-05T09:47:11.823
> 
> 标签：api, rest, twitter, twitter-oauth

是否可以在没有 OAuth 的情况下使用新的 Twitter Rest API 进行搜索。

我只是想搜索带有给定主题标签的推文。

例如我调用： [https ://api.twitter.com/1.1/search/tweets.json?%23MyTag](https://api.twitter.com/1.1/search/tweets.json?%23MyTag)

其中 %23 是编码的“#”

但是我总是得到

```
{"errors":[{"message":"Bad Authentication data","code":215}]} 
```

我猜是因为我没有通过身份验证...

是否可以在没有 OAuth 的情况下运行搜索？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T18:01:38.670

The Twitter API docs specify that user-context authentication is required when making a call to search Tweets (see [https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)) so it looks like you will need to get your hands on Twitter OAuth tokens and sign your request.

If you log in to Twitter and go to the developer dashboard at [https://dev.twitter.com/apps](https://dev.twitter.com/apps), you can register a new application: after registering, viewing the application details will give you an "oAuth Tool" tab, where you'll find all the relevant oAuth values for that app: Consumer Key, Consumer Secret, Access Token, and Access Token Secret.

You can then use these credentials, in conjunction with a Twitter wrapper library, to do a Twitter search. There's no need to do the OAuth approval dance on a per-user basis: you should be able to hard-code the values from the Twitter dashboard.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T11:13:52.987

最初可以使用[这个](https://dev.twitter.com/console)来测试 Twitter 搜索 API ，这基本上是 Twitter 搜索 API 的控制台。

在这里，您还可能会收到“错误身份验证”的错误，但这可以使用将您链接到您的 Twitter 帐户的 OAuth 身份验证来解决。

OAuth 的选项位于控制台的顶部。

# html - Bash while 循环回显文件的内容作为下拉菜单形式

> ID：15220567
> 
> 赞同：0
> 
> 时间：2013-03-05T09:47:21.053
> 
> 标签：html, bash, loops

我有一个包含以下内容的文件。我希望能够编写一个 while 循环并回显 HTML 表单。

```
10.101.0.169
10.101.0.171
10.101.0.175
10.101.0.177
10.101.0.179
10.101.0.181
10.101.0.185
10.101.0.193

```

我想要这样的东西。

 `````
while (file1 has entries)
{ echo "option value=IP address1" }
end

````  `目标是发布一个 HTML 表单，用户可以使用该表单从下拉菜单中选择 IP 地址并单击提交，参数将传递给 CGI 脚本以进行进一步处理。

我相信专家应该能够帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:53:38.060

像这样的东西应该以 bash 的方式工作。

```
while read line
    echo "option value=$line"
done < file_name 
```

如果你希望它在 HTML 中，可能就像

```
echo "<select name=IP>"
while read line
    echo "<option value=$line>$line</option>"
done < file_name
echo "</select>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:57:09.273

您可以使用`sed`：

```
#! /bin/bash
{
    echo '<select name="ip">'
    sed -e 's|.*|  <option value="&">&</option>|' file
    echo '</select>'
} > out.html 
`````

# asp.net - 在不使用页脚模板或网格视图的页脚属性的情况下将新的可编辑行添加到网格视图

> ID：15220570
> 
> 赞同：0
> 
> 时间：2013-03-05T09:47:25.150
> 
> 标签：asp.net

我们有一个网格视图，我们通过 web.config 文件使用数据库连接动态绑定数据。现在我们想在单击按钮时向网格视图添加一个新的可编辑行，并且我们输入的任何数据都应该在网格视图中更新。

那可能吗？

如果是，请提供解决方案。如果没有，为什么？

# jpa - 双向关系中的 JPA 一对一实体删除

> ID：15220573
> 
> 赞同：2
> 
> 时间：2013-03-05T09:47:44.260
> 
> 标签：jpa, sql-delete, one-to-one, bidirectional

这是我的学生实体，

```
@Entity
@Access(AccessType.FIELD)
@Table(name="TBL_STUDENT")
public class Student  implements  Serializable{
  .....
  .....
  ....
  ..
  .
  @OneToOne(  targetEntity=StudentContact.class,
              fetch=FetchType.LAZY,
              cascade={CascadeType.ALL}
           )
  @JoinColumn(name="CONTACT_ID")
  private StudentContact contact;
  .....
  ...
  ..
} 
```

这是我的 StudentContact 实体，如下所示，

```
@Entity
@Table(name="TBL_STD_CONTACT")
public class StudentContact implements Serializable{
   ......
   ....
   ..
   @OneToOne(  mappedBy="contact",
               targetEntity=Student.class,
               cascade={
                         CascadeType.PERSIST,
                         CascadeType.MERGE
                       }
               fetch= FetchType.LAZY)
   private Student student;
   ........
   ......
   ....
   ..
   .
} 
```

我的 StudentTest.java 包含我尝试做的主要方法：

```
tx = em.getTransaction();   
tx.begin();  
StudentContact contact = em.find(StudentContact.class,38);
em.remove(contact);  
tx.commit(); 
```

上述操作不会删除 StudentContact 实体。当我检查日志时，它只显示了 StudentContact 和 Student 的 Select 查询，但它不打印 Delete 查询，也没有显示任何异常。

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:06:19.247

从 Student 到 StudentContact 可能存在参照完整性约束（外键）。所以你不能删除 StudentContact 因为学生会指向不存在的实体。

您必须首先摆脱此引用，例如：

```
tx = em.getTransaction();   
tx.begin();  
StudentContact contact = em.find(StudentContact.class,38);
Student student = contact.getStudent();
student.setContact(null);
contact.setStudent(null);
em.merge(student);
em.remove(em.merge(contact));
tx.commit(); 
```

# javascript - Javascript：将数据导出到 .txt 文件

> ID：15220574
> 
> 赞同：5
> 
> 时间：2013-03-05T09:47:44.380
> 
> 标签：javascript, jquery, web-applications

我是 javascript 新手，我想知道是否可以将数据导出到 txt 文件中。我可以将数据放入警报中，但我希望将其作为 txt 文件下载到客户端系统中。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:59:59.370

目前[File API: Writer](http://www.w3.org/TR/file-writer-api/)还没有准备好，所以你没有直接的接口来保存文件。

不过，您可以创建一个链接并将文本放在 url 中。

```
var link = document.createElement('a');
link.href = 'data:text/plain;charset=UTF-8,' + encodeURIComponent(yourTextGoesHere);
link.innerHTML = 'Open the text file';
//set default action on link to force download, and set default filename:
link.download = 'some file name.txt';     

//now put the link somewhere in the html document:
document.body.appendChild(link); 
```

手写，未经测试。应该可以工作，但可能需要调试。

编辑：添加`download`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-05T20:23:45.530

保存文本

```
function save(text){
    var link = document.createElement('a');
    link.href = 'data:text/plain;charset=UTF-8,' + escape(text);
    link.download = 'output.txt';
    link.click();
} 
```

# javascript - 如何传递原型函数并在 javascript 中使用

> ID：15220575
> 
> 赞同：2
> 
> 时间：2013-03-05T09:47:44.863
> 
> 标签：javascript, parameter-passing, prototype, function-parameter

我有一个`Graph`类，我想将它的原型函数传递给另一个函数。这是该类的一小段代码

```
function Graph(opts) {
    this.filled = opts.filled;
    this.max = opts.max || 50;
    this.min = opts.min || 0;
    this.fixed = 60; //px

    this.transitionArr = [];
    this.timeoutArr = [];
};

Graph.prototype.stopAnimation = function() {
    //stop any css3 transition by removing animation properties
    this.removeAnimProps();
    //stop if there is any timeout
    for (var i = 0; i < this.timeoutArr.length; i++) {
        clearTimeout(this.timeoutArr[i]);
    }

    for (var i = 0; i < this.transitionArr.length; i++) {
        this.transitionArr[i].stop();
    }
}; 
```

而我想要做的是传递`stopAnimation`函数来迭代所有对象以停止所有对象中的所有动画：

```
function iterateOverAll(userFunc){
    for (var i = 0; i < GraphArr.length; i++) {
        GraphArr[i].userFunc();
    }
}

iterateOverAll(Graph.prototype.stopAnimation); 
```

但是，我不知道该怎么做。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:57:39.513

如果你想使用函数作为参数，你可以像这样传递它：

```
function iterateOverAll(callFunc){
    for (var i = 0; i < GraphArr.length; i++) {
        callFunc.apply(GraphArr[i],[]);
    }
}

iterateOverAll(Graph.prototype.stopAnimation); 
```

这将在所有对象中调用您的函数，但没有任何参数。我认为您可以针对任何参数修改此函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:51:08.163

如果您已经有一个图表数组，则无需传递该函数。

```
function iterateOverAll(){
    for (var i = 0; i < GraphArr.length; i++) {
        GraphArr[i].stopAnimation();
    }
}

iterateOverAll(); 
```

# jquery - 在 IE8 中使用 switchClass 作为动画的 polyfill

> ID：15220577
> 
> 赞同：0
> 
> 时间：2013-03-05T09:47:47.787
> 
> 标签：jquery, jquery-ui, css, jquery-animate, frontend

[http://jqueryui.com/switchClass/](http://jqueryui.com/switchClass/)

我最近`switchClass`在 JqueryUI 下找到并在一个项目中使用它并取得了巨大成功（自定义构建 JQuery UI 到大约 8k） - 它帮助我解决了让动画以与使用 CSS3 动画时类似的方式工作的问题

IE。`addClass`, `removeClass`, 具有实际交换类的附加功能，然后在

不过我想知道，是否有一种很好的方法可以将它用作 polyfill，所以只有在现代化器需要时

现在已经考虑了几个小时，会对其他人的建议感兴趣

# android - 如何在我的代码中调用位图压缩功能

> ID：15220579
> 
> 赞同：0
> 
> 时间：2013-03-05T09:47:57.543
> 
> 标签：android

我如何压缩图像所以保存大图像我找到了代码但我在 R.drawable.my 中写了什么？

我的代码在这一行中保存捕获图像

```
 //this line yourSelectedImage = (Bitmap) imageReturnedIntent.getExtras().get("data");

@Override
   protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

            if (imageReturnedIntent.getExtras() != null) {
                // here is the image from camera

                yourSelectedImage = (Bitmap)  
   imageReturnedIntent.getExtras().get("data");

                ByteArrayOutputStream outStr = new  
    ByteArrayOutputStream();
                yourSelectedImage.compress(CompressFormat.JPEG, 100,  
   outStr);
                blob = outStr.toByteArray();
                imageView1.setImageBitmap(yourSelectedImage);

            } 
```

我找到了这段代码我如何在我的代码中调用它？我的代码在这个解码代码之上

```
 image =decodeSampledBitmapFromResource(getResources(), R.drawable.my, 100, 100);

    image.compress(Bitmap.CompressFormat.JPEG, 100, stream);
     imageInByte = stream.toByteArray();

  public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
    int reqWidth, int reqHeight) {

 // First decode with inJustDecodeBounds=true to check dimensions
 final BitmapFactory.Options options = new BitmapFactory.Options();
 options.inJustDecodeBounds = true;
 BitmapFactory.decodeResource(res, resId, options);

 // Calculate inSampleSize
 options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

// Decode bitmap with inSampleSize set
 options.inJustDecodeBounds = false;
 return BitmapFactory.decodeResource(res, resId, options);
  }

   public static int calculateInSampleSize(
    BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
  final int height = options.outHeight;
  final int width = options.outWidth;
 int inSampleSize = 1;

  if (height > reqHeight || width > reqWidth) {

// Calculate ratios of height and width to requested height and width
final int heightRatio = Math.round((float) height / (float) reqHeight);
final int widthRatio = Math.round((float) width / (float) reqWidth);

// Choose the smallest ratio as inSampleSize value, this will guarantee
// a final image with both dimensions larger than or equal to the
// requested height and width.
inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

  return inSampleSize;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:00:31.277

你可以使用下面的代码来压缩你的位图并保存它

```
Bitmap photo = (Bitmap) extras.get("data"); //here you will get your Bitmap
selectedImagePath = String.valueOf(System.currentTimeMillis())+ ".jpg"; //make random name for your compressed image
Log.i("TAG", "New selectedImagePath before file "+ selectedImagePath);
File file = new File(Environment.getExternalStorageDirectory(), selectedImagePath);
try {
    file.createNewFile();
    FileOutputStream fos = new FileOutputStream(file);
    photo.compress(Bitmap.CompressFormat.PNG, 100, fos);
    } catch (IOException e) {
    // TODO Auto-generated catch block
    Toast.makeText(this,"Sorry, Camera Crashed-Please Report as Crash A.",3).show();
   }

  selectedImagePath = Environment.getExternalStorageDirectory() + "/" + selectedImagePath;
  Log.i("TAG", "After File Created  " + selectedImagePath);
  Bitmap bm = decodeFile(selectedImagePath);
  mImageView.setImageBitmap(bm); 
```

希望它会有所帮助。

# php - 带有变量的标头重定向

> ID：15220580
> 
> 赞同：0
> 
> 时间：2013-03-05T09:47:58.930
> 
> 标签：php

我已经尝试了这段代码的各种不同的迭代，试图让浏览器显示一个新页面。

如果我`echo $location`；将值放入字符串并将其直接输入到标题函数中它将起作用 - 我相信这将是一个简单的修复！

```
 $location = "Location: ".$urlToGoTo;
 $location = "'".trim($location)."'";
 header($location); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:51:41.760

你可以简单地使用`header("Location:$urlToGoTo");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:52:35.330

正确的格式是：

```
<?php
header("location: http://linkTo/page.html");
?> 
```

在您的情况下，它将是：

```
<?php
header("location: " . $urlToGoTo);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:53:16.273

用这个

```
header("location: " . $urlToGoTo); 
```

**或者**

```
header("Location:$urlToGoTo"); 
```

# grails - 运行“grails activiti-quickstart”时显示依赖错误

> ID：15220582
> 
> 赞同：1
> 
> 时间：2013-03-05T09:48:04.290
> 
> 标签：grails, groovy, activiti

运行 grails activiti-quickstart 时显示错误

| 错误无法解决依赖关系（在 BuildConfig.groovy 中将日志级别设置为“警告”以获取更多信息）：

*   org.springframework:spring-test:3.1.2.RELEASE

我正在使用 Grails 版本：2.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:59:31.473

添加

```
 dependencies {
     compile ('org.activiti:activiti-engine:5.11') {
     excludes 'livetribe-jsr223'
     }
     runtime 'org.activiti:activiti-spring:5.11'
     } 
```

到 BuildConfig.groovy
[https://github.com/limcheekin/activiti/issues/11](https://github.com/limcheekin/activiti/issues/11)

# kendo-ui - NumericTextBox 中 18 位数字的值已更改

> ID：15220583
> 
> 赞同：1
> 
> 时间：2013-03-05T09:48:04.707
> 
> 标签：kendo-ui, kendonumerictextbox

我注意到在 NumericTextBox 中，当我在字段中添加 18 位或更多位时，数字会发生变化。

例如，当添加数字“11111111111111111”时，数字会自动更改为“11111111111111112”。

我在剑道演示网页中也注意到了同样的行为。[http://demos.kendoui.c​​om/web/numerictextbox/index.html](http://demos.kendoui.com/web/numerictextbox/index.html)。

为什么会这样？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:48:20.400

你`Number`的太大了。

> 所有大小不大于 2^53 的正整数和负整数都可以用 Number 类型表示（实际上，整数 0 有两种表示，+0 和 -0）。

阅读[ECMA 第 8.5 节 - 数字](http://ecma262-5.com/ELS5_HTML.htm#Section_8.5)了解更多信息。

# c# - 我可以在同一字段上多次使用 IMetadataAware 属性吗？

> ID：15220585
> 
> 赞同：7
> 
> 时间：2013-03-05T09:48:09.243
> 
> 标签：c#, asp.net-mvc-3, data-annotations, modelmetadata

我有不同的人应该以不同的名称看到的字段。

例如，假设我有以下用户类型：

```
public enum UserType {Expert, Normal, Guest} 
```

我实现了一个`IMetadataAware`属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
public class DisplayForUserTypeAttribute : Attribute, IMetadataAware
{
    private readonly UserType _userType;

    public DisplayForUserTypeAttribute(UserType userType)
    {
        _userType = userType;
    }

    public string Name { get; set; }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        if (CurrentContext.UserType != _userType)
            return;
        metadata.DisplayName = Name;
    }
} 
```

这个想法是我可以根据需要覆盖其他值，但当我不这样做时，可以使用默认值。例如：

```
public class Model
{
    [Display(Name = "Age")]
    [DisplayForUserType(UserType.Guest, Name = "Age (in years, round down)")]
    public string Age { get; set; }

    [Display(Name = "Address")]
    [DisplayForUserType(UserType.Expert, Name = "ADR")]
    [DisplayForUserType(UserType.Normal, Name = "The Address")]
    [DisplayForUserType(UserType.Guest, Name = "This is an Address")]
    public string Address { get; set; }
} 
```

问题是当我有多个相同类型的属性时，`DataAnnotationsModelMetadataProvider`只运行`OnMetadataCreated`第一个。
在上面的示例中，`Address`只能显示为“地址”或“ADR”——其他属性永远不会执行。

如果我尝试使用不同的属性 - `DisplayForUserType`, `DisplayForUserType2`, `DisplayForUserType3`，一切都会按预期工作。

我在这里做错什么了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-06T15:49:24.167

我知道我参加这个聚会有点晚了，但我一直在寻找同一个问题的答案，但在网上的任何地方都找不到。最后我自己解决了。

简短的回答是肯定的，您可以拥有多个相同类型的属性，这些属性在同一字段/属性上实现 IMetadataAware 接口。您只需要记住在扩展 Attribute 类时重写它的 TypeId 并将其替换为可以为每个派生属性的每个**实例提供唯一对象的东西。**

如果您不覆盖派生属性的 TypeId 属性，则该类型的所有属性都将被视为相同，因为默认实现将属性的运行时类型作为 id 返回。

因此，现在应该可以按需要执行以下操作：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
public class DisplayForUserTypeAttribute : Attribute, IMetadataAware
{
    private readonly UserType _userType;

    public DisplayForUserType(UserType userType)
    {
        _userType = userType;
    }

    public override object TypeId
    {
        get
        {
            return this;
        }
    }

    public string Name { get; set; }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        if (CurrentContext.UserType != _userType)
            return;
        metadata.DisplayName = Name;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:48:44.193

您的实现没有错，但是在创建元数据后， [AssociatedMetadataProvider](http://msdn.microsoft.com/en-us/library/system.web.mvc.associatedmetadataprovider%28v=vs.98%29.aspx)（和任何派生类型）将`IMetadataAware`应用实现的任何属性。要覆盖默认行为，您可以实现 custom 。`ModelMetadataProvider`

这是另一个替代的快速解决方案：

`IMetadataAware`从类中删除接口`DisplayForUserType`。

```
 [AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
    public class DisplayForUserTypeAttribute : Attribute//, IMetadataAware
    {
        //your existing code...
    } 
```

定义一个`IMetadataAware`将通过 UserType 应用显示逻辑的新属性，如下所示：

```
 [AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
    public class ApplyDisplayForUserTypeAttribute : Attribute, IMetadataAware
    {
        private readonly string _property;
        public ApplyDisplayForUserTypeAttribute(string property)
        {
            this._property = property;
        }

        public void OnMetadataCreated(ModelMetadata metadata)
        {
            var attribues = GetCustomAttributes(metadata.ContainerType
                                                        .GetProperty(this._property), typeof(DisplayForUserTypeAttribute))
                                                        .OfType<DisplayForUserTypeAttribute>().ToArray();
            foreach (var displayForUserTypeAttribute in attribues)
            {
                displayForUserTypeAttribute.OnMetadataCreated(metadata);
            }
        }
    } 
```

模型将是：

```
public class Model
    {
        [Display(Name = "Age")]
        [DisplayForUserType(UserType.Guest, Name = "Age (in years, round down)")]
        [ApplyDisplayForUserType("Age")]
        public string Age { get; set; }

        [Display(Name = "Address")]
        [DisplayForUserType(UserType.Expert, Name = "ADR Expert")]
        [DisplayForUserType(UserType.Normal, Name = "The Address Normal")]
        [DisplayForUserType(UserType.Guest, Name = "This is an Address (Guest)")]
        [ApplyDisplayForUserType("Address")]
        public string Address { get; set; }
    } 
```

# javascript - Onclick 被调用两次

> ID：15220591
> 
> 赞同：4
> 
> 时间：2013-03-05T09:48:23.627
> 
> 标签：javascript, onclick

这是代码：

```
<label onclick="event.stopPropagation(); alert(event.target.innerHTML);">
    <button>
        button
    </button> 
    <span>
        span
    </span>
</label> 
```

（和小提琴：http: [//jsfiddle.net/YsYKq/1/](http://jsfiddle.net/YsYKq/1/)）

如果单击按钮，则仅`button`会发出警报，但是当在 span 上时-两者都会`span`发出`button`警报-因此该`onclick`函数会被调用两次。

我怎样才能防止这种情况？我`onclick`只需要被叫一次。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T09:57:38.860

`event.preventDefault();`而不是仅在单击的元素上`event.stopPropagation();`触发。[jsFiddle](http://jsfiddle.net/bYVSc/)`onclick`的演示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T09:57:35.917

请尝试下面的代码，我正在编辑您的代码并将“stopPropagation”更改为“preventDefault”。

```
<label onclick="event.preventDefault(); alert(event.target.innerHTML);">
    <button>
        button
    </button> 
    <span>
        span
    </span>
</label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:08:49.877

@BenM 的建议非常完美但是如果您仍然想使用封闭按钮和跨度，那么这里有一种方法......

```
<label for="notExistingId" onclick="event.stopPropagation(); alert(event.target.innerHTML);">
<button>
    button
</button> 
<span>
    span
</span> 
```

**只需在 ID 不存在的标签中提供值“for”。**

希望能帮助到你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-26T14:09:24.537

...当用户单击 iscroll 中的任何项目时，单击事件会被触发两次...

[https://groups.google.com/forum/#!topic/iscroll/XL2Ny9gpKc0](https://groups.google.com/forum/#!topic/iscroll/XL2Ny9gpKc0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-12T15:35:14.787

我已经使用标签和复选框的不同 id 字段解决了这个问题 - 然后测试标签脚本的 event.target.label

功能选择图标元素（元素，事件）{

```
if(event.target.id.indexOf('label')>0){
    //do something if its label
}else{
    //do something if not label
} 
```

}

# jquery - 我可以从缓存中加载 jquery 数据表 fnRowCallback 吗？

> ID：15220593
> 
> 赞同：0
> 
> 时间：2013-03-05T09:48:29.297
> 
> 标签：jquery, datatables

我使用 fnRowCallback 函数在表中加载动态列。它工作正常。当分页到**下一页到上一页**时，我真的不想再次调用动态字段。因为它已经加载了。

如何停止从分页加载动态字段到上一页。请检查下面的代码

```
 tickerdashboardtable = $('#tickerdashboardtable').dataTable( {
                    "bProcessing": true,                        
                    "sAjaxSource": "/dashboard/getlisttickers",
                    "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {

                                        var loadtxt = "<img class='alert-bell'src='/image/temp/user_signal_icon.png'><span class='signal_count'><img src='/image/waiting-circle-lines.gif'></span>";            
                                        // no need to load 2nd time
                                         if(aData[5] == loadtxt) {
                                          $("#tickerdashboardtable_next").hide();
                                          var remainder = rowId % 10;
                                         $('td:eq(0)', nRow).html( '<span class=\'grid_collapse\'></span>'+aData[0]);
                                          $.ajax({
                                                type: "GET",                        
                                                url: "/dashboard/getSignalCount",
                                                data: { ticker: aData[0],mode: "discern" },                                
                                                success: function (data) {                                                    
                                                    $('td:eq(4)', nRow).html( '<img class=\'alert-bell\'src=\'/image/temp/discern_signal_icon.png\'><span class=\'signal_count\'>'+data+'</span>');                                            
                                                    }
                                              });
        },
                    "aoColumns": [
                        { "sClass": "align_left", "bSortable": true },
                        { "sClass": "cnter", "bSortable": false },
                        { "sClass": "cnter", "bSortable": false },
                        { "sClass": "cnter", "bSortable": false },
                        { "sClass": "cnter", "bSortable": false },
                        { "sClass": "cnter", "bSortable": false },
                        { "sClass": "cnter", "bSortable": false }
                    ]
                } ); 
```

# c# - 该进程无法使用 PdfWriter.GetInstance 访问该文件

> ID：15220597
> 
> 赞同：0
> 
> 时间：2013-03-05T09:48:38.220
> 
> 标签：c#, iis-7, file-in-use

我正在使用以下代码将 HTML 内容保存为 PDF：

```
public void SaveHTMLToPdf(string HTML, string FilePath)
{
    Document document = new Document(PageSize.A4, 10f, 10f, 100f, 0f);

    PdfWriter.GetInstance(document, new FileStream(Request.PhysicalApplicationPath + "\\Invoice_Statement.pdf", FileMode.Create));
    document.Open();
    iTextSharp.text.Image pdfImage = iTextSharp.text.Image.GetInstance(Server.MapPath(ImgCom.ImageUrl.ToString()));

    pdfImage.ScaleToFit(150, 100);

    pdfImage.Alignment = iTextSharp.text.Image.UNDERLYING; pdfImage.SetAbsolutePosition(40, 770);

    document.AddTitle("Invoice Details");
    document.Add(pdfImage);

    iTextSharp.text.html.simpleparser.StyleSheet styles = new iTextSharp.text.html.simpleparser.StyleSheet();
    iTextSharp.text.html.simpleparser.HTMLWorker hw = new iTextSharp.text.html.simpleparser.HTMLWorker(document);

    styles.LoadTagStyle("th", "color", "red");
    styles.LoadTagStyle("th", "frontsize", "5");

    document.Add(new Header(iTextSharp.text.html.Markup.HTML_ATTR_STYLESHEET, "Style.css"));

    hw.Parse(new StringReader(HTML));

    document.Close();
} 
```

但它给出了这个错误：

> 该进程无法访问文件“C:\inetpub\wwwroot\abc\Invoice_Statement.pdf”，因为它正被另一个进程使用。

在这一行：

```
PdfWriter.GetInstance(document, new FileStream(Request.PhysicalApplicationPath + 
                      "\\Invoice_Statement.pdf", FileMode.Create)); 
```

它只发生在使用 IIS-7 的服务器上，并且在本地使用 Visual Studio 时可以正常工作。

任何人都可以帮助..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T11:26:58.417

可能是因为您无权将文件写入该位置。请记住，当您使用 Visual Studio 在本地运行时，IIS 正在您当前登录的安全上下文中运行，并且您可能拥有读取/写入文件位置所需的权限。部署到服务器后，服务器通常会在网络服务帐户或本地系统帐户的安全上下文下运行 IIS。您想验证您的目录是否已授予这两个帐户的读/写权限。

# javascript - html5 如何清除此动画的画布？

> ID：15220600
> 
> 赞同：0
> 
> 时间：2013-03-05T09:48:40.667
> 
> 标签：javascript, html

如何清除动画，使其看起来像块在移动。现在他们只是扩大，我不能让它工作 `context.clearRect(0, 0, elem.width, elem.height);`

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <script src="Scripts/jquery-1.9.1.min.js"></script>
</head>
<body >

    <canvas id="myCanvas" width="500" height="500" style="border:1px solid red">
            <p>Your browser doesn't support canvas.</p>
        </canvas>

</body>
</html>

<script type ="text/javascript">

    var context;

    function Shape(x, y, w, h, fill) {
        this.speedX = 1;
        this.speedY = 1;
        this.x = x;
        this.y = y;
        this.w = w;
        this.h = h;
        this.fill = fill;
    }

    // get canvas element.
    var elem = document.getElementById('myCanvas');

    // check if context exist
    if (elem.getContext) {

        context = elem.getContext('2d');

        var myRect = [];

        myRect.push(new Shape(10, 0, 25, 25, "#333"))
        myRect.push(new Shape(0, 40, 39, 25, "#333"))
        myRect.push(new Shape(0, 80, 100, 25, "#333"))

            for (i in myRect) {

                //console.log(x);

                context.fillRect(myRect[i].x, myRect[i].y, myRect[i].w, myRect[i].h)

                //context.fillStyle = i.fill;
            }

            ////// x, y, width, height
            //context.fillRect(0, 0, 50, 50);

            //// x, y, width, height      
            //context.fillRect(75, 0, 50, 50);

    }

    function loop() {

        console.log('tick');

        for (i in myRect) {

            //console.log(x);

            context.fillRect(myRect[i].x, myRect[i].y, myRect[i].w, myRect[i].h)

            myRect[i].x += myRect[i].speedX;

            //context.fillStyle = i.fill;
        }

        context.clearRect(0, 0, elem.width, elem.height);  
        //context = elem.getContext('2d');

    }

    setInterval(loop, 25);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:11:12.433

在将矩形绘制到其中`canvas` *之前*，您需要清除：

```
context.clearRect(0, 0, elem.width, elem.height); 
for (i in myRect) {
    context.fillRect(myRect[i].x, myRect[i].y, myRect[i].w, myRect[i].h)
    myRect[i].x += myRect[i].speedX;
} 
```

# php - crud codeigniter 默认值

> ID：15220603
> 
> 赞同：0
> 
> 时间：2013-03-05T09:48:43.927
> 
> 标签：php, codeigniter, crud, grocery-crud

大家好，我有一个使用 crud 在 codeigniter 中开发的网站。在我的插入视图中，我有一个选择，我想在其中输入一个默认值，我已经完成了他的模式（文件的名称是 id_company）

```
$crud = new grocery_CRUD();
$state_crud = $crud->getState();
$crud->set_relation('id_company','company','name_company');
$crud->set_relation('id_plant','plant','name_plant');
$crud->set_relation('id_order','order','name_order');
$crud->field_type('id_plant','dropdown', array('0' => '') );
$crud->unset_print();
$crud->unset_export();
$crud->unset_delete();
$data['name_company'] = $company[0]['name_company'];
$data['id_company'] = $company[0]['id'];

$crud->callback_edit_field('id_company',array($this,'edit_field_callback_id_company_add')); 
```

回调是：

```
function edit_field_callback_id_company_add($value, $primary_key){
    $company = $this->Company_model->getCompany($value);
    return '<div id="field-id_company" class="readonly_label">'.$company->name_company.'</div>';
} 
```

我的模型函数

```
function getCompany($id_company, $select = ''){
        if( isset($id_company) && $id_company > 0 ) : 
            $this->CI =& get_instance();
            if( $select ) $this->CI->db->select($select);
            $this->CI->db->where('id', $id_company);
            $query = $this->CI->db->get_where($this->company_table);
            return $query->result_array();
        endif;
        return FALSE;
    } 
```

我已经看到 crud 插入了一个名为 field-id_company_czhn 的选择，我尝试插入它但没有。哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:12:45.960

**更新：**也许如果您尝试添加一个 if 语句，它应该可以工作。所以在你的情况下，这可能对你有用：

```
$crud = new grocery_CRUD();
$state_crud = $crud->getState();

if ($state_crud == 'edit' || $state_crud == 'update') {
    $crud->callback_edit_field('id_company',array($this,'edit_field_callback_id_company_add'));
} else {
    $crud->set_relation('id_company','company','name_company');
}

... 
```

* * *

您使用回调的逻辑是错误的。所以在你的情况下，你需要这样的东西：

```
 $crud->callback_edit_field('id_company',
                     array($this,'edit_field_callback_id_company_add')); 
```

进而：

```
 function edit_field_callback_id_company_add($value, $primary_key){

    $this->db->where('id',$value); //Where id is the primary key for company table
    $company = $this->db->get('company')->row();

    return '<div id="field-id_company" class="readonly_label">'.$company->name_company.'</div>';
 } 
```

文档中有一篇文章解释了如何使用回调：[http ://www.grocerycrud.com/documentation/tutorial_using_callbacks](http://www.grocerycrud.com/documentation/tutorial_using_callbacks)

如果您愿意，还可以使用 field_type 方法（[http://www.grocerycrud.com/documentation/options_functions/field_type](http://www.grocerycrud.com/documentation/options_functions/field_type)）和 field_type = readonly

至于默认值功能，github 上有一个问题：[https ://github.com/scoumbourdis/grocery-crud/issues/138](https://github.com/scoumbourdis/grocery-crud/issues/138)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-05T08:20:43.787

这里决定了这个问题。我希望它对你有帮助。[http://www.grocerycrud.com/forums/topic/1846-setting-default-value-for-field-type-and-set-relation/](http://www.grocerycrud.com/forums/topic/1846-setting-default-value-for-field-type-and-set-relation/)

# android - 更改菜单项的文本颜色

> ID：15220605
> 
> 赞同：0
> 
> 时间：2013-03-05T09:48:47.643
> 
> 标签：android, android-menu

我不知道菜单文本颜色的变化。它是默认的白色。我正在尝试更改 RED。这是我的代码：-

```
 MenuInflater menuInflater = getMenuInflater();
            menuInflater.inflate(R.layout.menu, menu);
            getLayoutInflater().setFactory(new Factory() {
                 public View onCreateView(String name, Context context,
                AttributeSet attrs) {

                if (name     .equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")) {
                try {
                LayoutInflater f = getLayoutInflater();
                final View view = f.createView(name, null, attrs);

                new Handler().post(new Runnable() {
                public void run() {

                // set the background drawable
            //  view     .setBackgroundResource(R.drawable.my_ac_menu_background);

                // set the text color
                ((TextView) view).setTextColor(Color.RED);
                }
                });
                return view;
                } catch (InflateException e) {
                } catch (ClassNotFoundException e) {
                }
                }
                return null;
                }

                });
                return super.onCreateOptionsMenu(menu); 
```

但这不起作用。工厂返回 NULL 值。

请任何人看一看。

谢谢你

# java - 如何匹配行首java

> ID：15220609
> 
> 赞同：0
> 
> 时间：2013-03-05T09:49:07.683
> 
> 标签：java, regex

我对java中的正则表达式完全陌生，

我正在逐行读取文件并尝试在行首使用`string.matches`3 个字符和 10 个数字。

在文本板中，我可以执行以下操作：

```
^[A-Z][A-Z][A-Z][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9] 
```

如何将其转换为 java 正则表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:51:23.903

你必须使用量词。所以，

`x{n}`**表示完全**匹配`n`x 的数量

 **`x{n,}`匹配x**多次**`n`_

 **`x{n,m}`将 x`n`与`m`时间匹配..

所以，你的正则表达式将是

```
^[a-zA-Z]{3}\\d{10} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:50:27.063

它是相同的，但经过优化：

```
"^[A-Z]{3}[0-9]{10}" 
```

或等于一

```
"^[A-Z]{3}\\d{10}" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-05T09:54:14.103

您可以使用方法 string.startsWith()。然后不需要第一个'^'。****

# git - 如何 git cherry-pick commit 声明我们的历史包含它

> ID：15220616
> 
> 赞同：6
> 
> 时间：2013-03-05T09:49:31.423
> 
> 标签：git, github, cherry-pick, git-cherry-pick

我做了以下事情：

```
git fetch upstream
git cherry-pick xyz 
```

选择的提交已被干净地应用，只是在其中一个文件中它具有与我在之前的提交中所做的完全相同的更改，因此不会重新应用这些更改。

代码方面的一切都很好，但我想在我的历史中拥有提交哈希。在我的历史中，它以一个新名字出现。这甚至可能吗？就我正在阅读 git merge “我们的” 策略而言，它似乎通常是可能的，但如何为单个提交做到这一点？

我想要这个，以便以后更容易识别提交所做`upstream`的事情我没有。目前在 github`network`视图中，我认为精心挑选的提交是我没有的独立的东西。

附加信息：@CharlesB 所说的对我来说很有意义。但是`merge -s ours`魔法是怎么做到的呢？在这种情况下，这对我来说并不重要`cherry-pick`。因为我想要进行的更改只是一个并且在`upstream/master`. 所以只是为了尝试一下，我做了：`git merge -s ours upstream/master`

现在`git log --graph --pretty=oneline --abbrev-commit`我看到了类似的东西：

```
*   9e8108b Merge remote-tracking branch 'mgencur/master' for better github netw
|\  
| * aa7117d Fix displaying watchers/watching for incorrect user // this commit magically appeared after merge -s ours
* | ff05f8c Fix displaying watchers/watching for incorrect user // this is commit from cherry-pick of aa7117d
* | b7ca8ec older commit in my fork
* | <more commits in my fork>
|/  
* 94d6870 Fix obtaining available users for testing purposes
* <older commits of upstream/master> 
```

**之前** 的相同命令`git merge -s ours`看起来像：

```
* ff05f8c Fix displaying watchers/watching for incorrect user // this is commit from cherry-pick of aa7117d
* b7ca8ec older commit in my fork
* <more commits in my fork>
* 94d6870 Fix obtaining available users for testing purposes
* <older commits of upstream/master> 
```

正如您在挑选提交 aa7117d 之后所看到的，没有迹象表明 aa7117d 已应用于我的 fork 存储库。但是在合并后它表明它在那里，尽管我的文件中没有任何变化。

这使我认为确实可以声明一个分支中包含的许多提交，尽管它们的应用与上游应用的**完全不同。**

update2：我看到了[如何在 Git 中合并特定提交](https://stackoverflow.com/questions/881092/how-to-merge-a-specific-commit-in-git)及其最佳答案的问题。因此，也将不胜感激解释为什么它不可能或未实施。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:54:21.233

根据定义，提交哈希对于每个提交都是唯一的。

挑选樱桃时，您正在创建一个新的提交，即使您应用了相同的修改，因为它具有不同的父提交。

但是，您可以添加 ask git 以将消息放入精心挑选的提交消息中：

> 从提交中挑选`<original-sha1>`

从[文档](http://git-scm.com/docs/git-cherry-pick)中：

> -X
> 
> 记录提交时，在原始提交消息中附加一行“(cherry pick from commit ...)”，以指示此更改是从哪个提交中挑选出来的。这仅适用于没有冲突的樱桃采摘。如果您从您的私人分支中挑选，请不要使用此选项，因为该信息对收件人无用。另一方面，如果您在两个公开可见的分支之间进行挑选（例如，将修复从开发分支向后移植到维护分支以获取旧版本），添加此信息可能很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:51:51.323

Git 不允许你这样做。Git 哈希唯一标识一个提交*及其所有历史*。这意味着，当您选择一个提交时，您将*补丁*应用到另一个历史记录，因此没有办法（除非在哈希冲突的某些异常情况下）哈希是相同的。

执行合并时仍然看到原始哈希数的原因是这里的情况完全不同。合并不是具有单个父提交的正常提交。相反，它有两个（甚至更多）父提交，将单独的开发链组合在一起。因此，保留了合并头的原始历史。

# highcharts - 列之间的空间

> ID：15220619
> 
> 赞同：10
> 
> 时间：2013-03-05T09:49:37.737
> 
> 标签：highcharts, space, two-columns

我有一个柱形图，其中每个 X 值都有两个系列。但该图显示每个 X 值之间的间距很大。

问：如何在 Highchart 中使列和 y 轴之间有 1px 的空间？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T18:55:58.740

更新`pointPadding :0.2 to pointPadding :0` 于

```
plotOptions: {
                column: {
                    pointPadding: 0,
                    borderWidth: 0
                }
            }, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T09:59:42.133

```
chart: {
    marginBottom: 1,
    marginLeft: 0,
    marginRight: 0,
    marginTop: 0,
    renderTo: container,
    type: 'column',
}, 
```

[演示](http://jsfiddle.net/gTaZ9/273/)

还要检查[GroupPadding](http://api.highcharts.com/highcharts#plotOptions.column.groupPadding)和[PointPadding](http://api.highcharts.com/highcharts#plotOptions.column.pointPadding)

# jquery - jQuery用事件分离内容？

> ID：15220626
> 
> 赞同：1
> 
> 时间：2013-03-05T09:50:02.820
> 
> 标签：jquery, events, append, detach

我的问题是，为什么在我分离元素并将它们附加回来之后，第三个 div 上的点击事件不再触发？事件未保存。

```
var test = (function($, undef) {
    var t = {};
    t.test = function(){
        var container = $('<div/>').appendTo('body');           
        $('<div/>', {
            'class' :   'some',
            'text'  :   'text'
        }).appendTo(container);         
        $('<div/>', {
            'class' :   'some',
            'text'  :   'text'
        }).appendTo(container);         
        $('<div/>', {
            'class' :   'some',
            'text'  :   'text',
            'click' :   function(){
                console.log("ahoy");
            }
        }).appendTo(container);         
        $('<div/>', {
            'class' :   'some',
            'text'  :   'text'
        }).appendTo(container);         
        var content = container.html();
        var detachedContent = $(content).detach();
        container.empty();          
        //setTimeout(function(){
            container.append(detachedContent);
        //}, 2000);         
    };      
    return t;
})(jQuery); 
test.test(); 
```

示例：http: [//jsfiddle.net/sCJfc/](http://jsfiddle.net/sCJfc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:01:16.657

[detach()](http://api.jquery.com/detach/)在这里不应该受到责备。

您正在执行容器元素内部标记的副本，并且正在分离从该副本创建的元素。这些元素一开始就不是 DOM 的一部分，并且确实不会在它们上注册任何处理程序。

试着写：

```
var detachedContent = container.children().detach(); 
```

代替：

```
var content = container.html();
var detachedContent = $(content).detach(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:01:04.520

尝试克隆子元素，删除它们，然后使用克隆将它们添加回来。

```
var detachedContent = $(container).children().clone(true);
console.log(detachedContent);
container.empty();

container.append(detachedContent); 
```

**工作示例：http:** [//jsfiddle.net/sCJfc/2/](http://jsfiddle.net/sCJfc/2/)

# php - PHP MYSQL 按钮

> ID：15220628
> 
> 赞同：0
> 
> 时间：2013-03-05T09:50:11.400
> 
> 标签：php, javascript, mysql, ajax, jquery

嗨，我为我拥有的评论提要制作了一个赞按钮，但每次我点击它时，它都会重新加载我想做的页面，这样它就不会重新加载页面。我无法在任何地方找到我的问题的答案。我知道我必须使用 javascript 或 AJAX，但因为我不知道如何编码，所以我被卡住了。

这是在我的评论提要所在的页面上。页面名称为 member-index.php

```
<a href=\"like-exec.php?id=".$rows['ID']."&members_id=".$_SESSION['SESS_MEMBER_ID']."\">like</a> 
```

这是在执行代码的页面上（like-exec.php）

```
<?php
require('../config/connect.php');
require('../config/config.php');

$sql = "UPDATE comments set `like` = `like`+1 where `ID` = '$_GET[id]'";
$result=mysql_query($sql);

$con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("likes", $con);

mysql_query("INSERT INTO likes (members_id, comm_id) VALUES(".$_SESSION['SESS_MEMBER_ID'].", $id)");

mysql_close($con);
header("location: success.php");

?> 
```

在该代码完成后，它被发送到 susses.php，然后将其重定向到 member-index.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:17:13.927

```
<a class="like" href=\"like-exec.php\" comment-id=".$rows['ID']." members-id=".$_SESSION['SESS_MEMBER_ID']."\">like</a> 
```

尝试使用 JQuery 在 AJAX 中调用 PHP。

```
$(".like").click(function(){

    $.ajax({
      url: $(this).attr("href"),
      type: "GET",
      data: { comment-id: $(this).attr("comment-id"), members-id: $(this).attr("members-id")},
      success:function(result){

         if(result.success) {
            // Success
         }else{
            // Not success
         }

      },
      error: function(request,status,error){
         // Request error
      }
    });    

}); 
```

`$_GET["comment-id"]`在 PHP 中，您可以使用和获取变量`$_GET["members-id"]`。当您的脚本成功时，您可以在数组中定义信息，并且可以将其编码为 JSON。之后，您必须使用`echo`来生成响应：

```
echo json_encode(array(
   "success" => true
)); 
```

如果您的脚本没有成功，您可以这样定义：

```
echo json_encode(array(
    "success" => false,
    "reason" => "some reason"
)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T10:20:57.407

如果您已`jquery`添加到您的网站，您可以像这样进行 ajax 调用。

首先，我们更新like 链接，使其调用javascript，而不是直接链接到网络服务器。因此，将您的链接更新为：

```
<a href=\"like-exec.php?id=".$rows['ID']."&members_id=".$_SESSION['SESS_MEMBER_ID']."\" onclick="updateLike($(this));return false;">like</a> 
```

然后我们添加 javascript 来处理 ajax 更新组件。我已将来自服务器的响应作为简单的警报，但您可以尝试直接更新 html 或放置一些内联更新。需要将以下 javascript 添加到页面中：

```
<script type="text/javascript">
function updateLike(elm)
{
$.ajax({
  type:'GET',
  url: elm.attr('href'),
  error: function(xhr, status, err) {
      // TODO : User friendly error message on ajax fail
      alert("Request Error :" + xhr + status + err);
  }

  success: function(resp) {
      // ajax operation was successful - confirm the like was okay
      if (resp.success) {
         window.location(resp.redirect);
      } else {
         // TODO : User friendly error message on update fail
         alert("Like failed : " + resp.error);
      }
  }
}
</script> 
```

`$.ajax()`函数执行ajax操作。该`error`属性处理客户端无法与服务器通信或未获得有效响应的问题。该`success`属性处理服务器响应的实例。 `success`将进一步需要检查更新是否成功。

以下是点赞更新的服务器端代码。你已经使用了`mysql_*`函数，所以我保留了这些函数。但是，请记住，这些函数现在已弃用，取而代之的是[MySQLi](http://php.net/manual/en/book.mysqli.php)。您应该考虑更新代码以反映这一点。

```
<?php
require('../config/connect.php');
require('../config/config.php');

$error = "";

$con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$con)
{
   $error = "Unable to connect to database.";
} else {

   // Check the database is available
   $db = mysql_select_db("likes", $con);

   if (!$db)
   {
      $error = "Unable to select like database.";
   } else {
      // Moved update to after connecting with database
      $sql = "UPDATE comments set `like` = `like`+1 where `ID` = '" . $_GET[id] . "'";
      $result = mysql_query($sql);
      if (!$result) { // Check query is successful
         $error .= "Error when updating comment likes.";
      }

      $result = mysql_query("INSERT INTO likes (members_id, comm_id)
      VALUES(".$_SESSION['SESS_MEMBER_ID'].", $id)");
      if (!$result) { // Check insert is successful
         $error .= "Error when inserting member likes.";
      }
   }

   mysql_close($con);
}

// Convert output to a JSON object for jquery to handle
$resp = new Object();
if ($error == "")
{
   $resp->success = true;
   $resp->redirect = "success.php";
} else {
   $resp->error = $error;
   $resp->success = false;
}

echo json_encode($resp);
?> 
```

上面的代码未经测试；所以可能会有错别字/错误/错误，但它应该足以让你开始。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T10:06:52.773

**PHP/HTML**

为您的“喜欢”链接添加一个类，以便我们可以更轻松地在 jQuery 中定位它并将链接的 id 设置为行 id。还值得检查您在页面上的其他地方没有数字 id，因为这些将是简单的 id，很容易在您的标记中的其他地方使用。

```
<a class="like" id="<?php echo $rows['ID']; ?>" href=\"like-exec.php?id=".$rows['ID']."&members_id=".$_SESSION['SESS_MEMBER_ID']."\">like</a> 
```

**jQuery**

```
$('a.like').click(function() {
    // triggered when like link is clicked

    // get the id of this link
    var id = $(this).attr('id');

    // make the AJAX request to the PHP script that updates the database table

    $.ajax({
        type: "GET",
        url: update_likes.php,
        dataType: 'html',
        data: ({ id: id }), // first id is the name, second is the actual id variable we just created
        beforeSend: function(data) {
            // you can do stuff in here before you send the data, display spinner gif etc
            alert('sending!');
        },
        success: function(data) {
            // same here but when the ajax request is successful
            // the data variable is coming from the echo of your PHP script
            alert(data);
        },
        complete: function(data) {
            // yet again but on completion
            alert('complete!');
        }

    });

    // stops the browser following the link (href) in the a tag
    return false;

}); 
```

**PHP**

我们将 ajax 请求发送到的新脚本，但它与您在问题中已有的代码相同。

**update_likes.php**

```
<?php
require('../config/connect.php');
require('../config/config.php');

// not sure if session_start(); is in your config but you will need it
// in this script somewhere to do your second query.

// $_GET['id'] is now coming via ajax

$sql = "UPDATE comments set `like` = `like`+1 where `ID` = '$_GET[id]'";
$result=mysql_query($sql);

$con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("likes", $con);

mysql_query("INSERT INTO likes (members_id, comm_id) VALUES(".$_SESSION['SESS_MEMBER_ID'].", $id)");

mysql_close($con);

// header("location: success.php");
// don't need this anymore

// only echo one string from an ajax request so if you need more do some
// concatenation
echo 'successfully updated db!';

?> 
```

最后一点，这些`mysql_`函数已被弃用，因此请查看 PDO 或 msqli。

PS我还没有测试过代码，但**希望**它应该可以正常工作。

**更新**

尝试将点击功能更改为：

```
$('a.like').click(function(e) {
    // triggered when like link is clicked

    // stops the browser following the link (href) in the a tag
    e.preventDefault();

    // get the id of this link
    var id = $(this).attr('id');

    // make the AJAX request to the PHP script that updates the database table

    $.ajax({
        type: "GET",
        url: update_likes.php,
        dataType: 'html',
        data: ({ id: id }), // first id is the name, second is the actual id variable we just created
        beforeSend: function(data) {
            // you can do stuff in here before you send the data, display spinner gif etc
            alert('sending!');
        },
        success: function(data) {
            // same here but when the ajax request is successful
            // the data variable is coming from the echo of your PHP script
            alert(data);
        },
        complete: function(data) {
            // yet again but on completion
            alert('complete!');
        }

    });
}); 
```

# android - Android：关于数据库中的开始和关闭时间，最后选择的值相同

> ID：15220644
> 
> 赞同：2
> 
> 时间：2013-03-05T09:50:50.707
> 
> 标签：android, database

*   我正在创建一个数据库`TIMES`。在其中，我创建了 3 个字段`id`：`starttime`和`closetime`。

    - 现在我的问题是，当我先单击开始时间然后单击时`closetime`，数据库仅存储`closetime`两个字段中的值。当我先选择关闭按钮然后选择开始按钮时，数据库会将`starttime`值存储在两个字段中。

    - 这是我的代码：

    ```
    btnOpenTime.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {  
            showStartTimePicker();
        }
    }); 
    ```

    在我调用 showStartTimePicker() 方法之后：

    私人无效 showStartTimePicker() { TimePickerDialog tdialog; if (mTimeStart == null) { final Calendar c = Calendar.getInstance();

    ```
     tdialog = new TimePickerDialog(this, mTimeStartSetListener,
                    c.get(Calendar.HOUR_OF_DAY), c.get(Calendar.MINUTE), true);

        } else {
            tdialog = new TimePickerDialog(this, mTimeStartSetListener,
                    mTimeStart.get(Calendar.HOUR_OF_DAY),
                    mTimeStart.get(Calendar.MINUTE), true);
        }
        tdialog.show();
    } 
    ```

# ruby-on-rails - Capybara 的 save_and_open_page 带有样式表和 javascripts 的绝对路径

> ID：15220645
> 
> 赞同：3
> 
> 时间：2013-03-05T09:50:51.800
> 
> 标签：ruby-on-rails, rspec, cucumber, capybara

我正在使用**rspec**功能和**capybara**来测试我的**rails 3.1**应用程序。有时保存我们正在访问的页面的静态 html 并浏览一下会很有用。这就是**save_and_open_page**方法的用途。

**但是 capybara 在名为tmp/capybara**的目录中生成一个 html 文件，所以如果我的样式表和 javascripts 的路径如下所示：

```
<script src="/javascripts/application.js?1362462583" type="text/javascript"></script> 
```

它们不会被找到，因为这个绝对路径假定我们在**/public**目录中。

保存页面并正确打开它的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:14:30.273

Asset pipeline support for `save_and_open_page` will be available in Capybara v2.1, see [https://github.com/jnicklas/capybara/pull/958](https://github.com/jnicklas/capybara/pull/958)

In the meantime you have to use the selenium driver and halt the test execution using methods `sleep` `gets` or `binding.pry` so that you can interact with the selenium browser

# c# - 使用负载均衡器的 ASP.NET 应用程序生命周期

> ID：15220650
> 
> 赞同：1
> 
> 时间：2013-03-05T09:51:17.540
> 
> 标签：c#, .net, azure, asp.net-mvc-4, load-balancing

当负载均衡器分配不同的机器来处理请求时会触发哪些事件。

假设客户端 A 第一次请求 page1，负载均衡器分配了 Server1 来处理该请求。整个应用程序/页面生命周期将被执行。

现在，如果客户端 A 发送另一个请求来获取 page2，但这次如果负载均衡器分配给 Server2 来服务该请求，那么整个应用程序/页面生命周期是否会被执行。如果不是，那么在这种情况下会触发哪些事件。

转向更具体的问题： - 它会再次执行 session_start 吗？

> 编辑：很抱歉忘记提及我正在使用 Azure 并且无法控制设置/更改平衡器的配置。此外，我们的管理员不会这样做。我们在应用程序开发方面。
> 
> 另请注意：我们***不允许***使用进程外会话。所以不能使用 sql azure 来管理会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:24:12.697

这些话来自微软自己：

> Microsoft 不会在 Azure 上发布负载平衡算法， **也不保证它将是循环的**. 在内部我们知道它不像循环那样简单。在制定最合适的资源来引导您的请求时，需要考虑多种因素。例如，考虑到网络邻近性，前提是该机器有能力处理此请求，因此您可能会在算法中看到某种偏差，具体取决于服务的位置。算法中包含一些内部优化，以利用内部结构、网络性能和可用容量、负载均衡器类型（软件/硬件）等方面的知识......负载均衡算法的目标是将您的请求路由到可用资源最有效的方式。产品团队称其为“大致循环”算法。
> 
> 唯一记录在案的负载平衡算法在[流量管理器](http://msdn.microsoft.com/en-gb/library/windowsazure/hh744833.aspx) 上，可用于控制用户流量分布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:30:08.713

Windows Azure 使用**循环**负载平衡方案，因此进程内会话在 Windows Azure（尤其是云服务）中是“不行的”。在上面提到的场景中，当客户端请求从“服务器 2”提供服务的“page2”时，将触发 session_start 事件。

您可能希望研究[Windows Azure 中的 Windows Azure 缓存](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)功能，并将其用作进程内会话管理的替代方法。事实上，有一个使用此缓存的自定义会话状态提供程序：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:32:05.803

如前所述，为了在 webfarms 中共享会话，必须在所有服务器之间共享机器密钥[http://msdn.microsoft.com/en-us/library/ff649308.aspx#paght000007_webfarmdeploymentconsiderations](http://msdn.microsoft.com/en-us/library/ff649308.aspx#paght000007_webfarmdeploymentconsiderations) 默认 Asp.net 会话，在 proc 中不允许有太大的可扩展性（直到您不移动到 sql 会话），但这可以很容易地更改为不在 proc 中，从而导致会话独立于您的应用程序并解决多个问题服务器[http://msdn.microsoft.com/en-us/library/ms972429.aspx](http://msdn.microsoft.com/en-us/library/ms972429.aspx)。

如果您需要扩展并有一些现金可以使用，请考虑使用 StateServer 会话（进程外）或 Memcached 之类的东西。

这就是说，asp.net 生命周期总是在每个请求中完全执行，无论场中有多少服务器。但是 asp.net 会话的工作方式保持不变（每个会话总是会触发一次 session_start），改变的是它的配置（sql、stateserver 等）。[看看这篇文章](http://www.codeproject.com/Articles/416137/Understanding-Session-Management-Techniques-in-ASP)，你会发现一些有用的信息。

# jquery - 在父 div 中拖放

> ID：15220658
> 
> 赞同：-5
> 
> 时间：2013-03-05T09:51:32.033
> 
> 标签：jquery

我必须在其父 div 中拖动搜索框，例如：-

父 div 子 div

我必须在父 div 中拖动子 div

请建议一些链接或答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:55:20.373

[**jQuery UI Draggable**](http://jqueryui.com/draggable/)具有您需要的功能。所以，基本上你需要有一个父母`.parent`和一个可拖动的孩子，`.child`.

```
<div class="parent">
    <div class="child">Drag Me!</div>
</div> 
```

然后调用该脚本，并确保将`containment: "parent"`其包含在其父级中：

```
$(function() {
    $( ".child" ).draggable({ containment: "parent" });
}); 
```

要查看运动，您可以添加一些边框和高度。

```
.parent {width: 200px; height: 200px; border: 1px solid #999;}
.child {width: 50px; height: 50px; border: 1px solid #ccc;} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/B2akk/](http://jsfiddle.net/praveenscience/B2akk/)

* * *

对于您的 HTML，父级是`#parent`，可拖动的子级是`#search`.

```
<div id="parent">
    <div id="search"> </div>
</div> 
```

相同的 jQuery 代码将是：

```
$(function() {
    $( "#search" ).draggable({ containment: "#parent" });
}); 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/ds4pv/](http://jsfiddle.net/praveenscience/ds4pv/)

# knockout.js - 在 Jquery 对话中编辑视图模型子项

> ID：15220660
> 
> 赞同：0
> 
> 时间：2013-03-05T09:51:39.900
> 
> 标签：knockout.js

我正在努力做到这一点，并想知道它是否是正确的方法。

我有一个像这样的视图模型

```
Foo()
     FooChildren()
     SelectedFooChild() 
```

我有一个 div，其中一个淘汰赛（在 FooChildren 上）输出一个模板。此模板中的每个项目都是 javascript 子视图模型 FooChildren()。在每个模板中，用户可以单击一行上的按钮，这是设置绑定到 Jquery 对话框中字段的 $parent.SelectedFooChild 可观察对象。

如何最好地将在 jqueryUI 对话框中修改的选定数据绑定回它所派生的父数据？

我有这样的东西

```
<div class="row" data-bind="foreach: FooThings">
  <button data-bind="onclick: open-JqueryUI-Dialogue-And-Set-The-selected-Item-To-This-Row/>
</div> 
```

我想知道我是否可以跳过整个选定的项目并将对话数据直接绑定到 SelectedFooChild？我认为如果以这种方式完成它会比它的价值更麻烦，因为我没有看到在绑定到 foreach 行中单击的行的对话上设置绑定的方法。不过，我习惯于在 Flex 中做这种事情。

我希望这很清楚:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:57:02.413

你有没有尝试过：

```
<button data-bind="click: parent.SelectedFooChild" /> 
```

您将单击的数据项设置为选定的子项，并将其绑定到您的对话框。我确实认为这是最好的方法。

# openlayers - openlayers中外部图形的偏移量

> ID：15220662
> 
> 赞同：0
> 
> 时间：2013-03-05T09:51:44.380
> 
> 标签：openlayers

我在图层上创建了一个点并向其添加了外部图形。现在我已经用 X 偏移和 y 偏移移动了外部图形图像。

现在我想在该图像集的中心显示一个带有外部图形的标签。目前它显示在图像的底部。为了移动标签，我更改了标签的 X 偏移量和 y 偏移量，并使用与移动外部图形相同的值。但仍然标签不在外部图形的中心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:17:37.360

试试这些样式属性：`labelXOffset`和`labelYOffset`

（删除了之前的答案）

# qt - 在 Mac 上将 qtwebkit 添加到 qtcreator

> ID：15220666
> 
> 赞同：1
> 
> 时间：2013-03-05T09:51:57.947
> 
> 标签：qt, webkit, qtwebkit, qwebkit

我已经在我的 Mac 上安装了 qt creator。我想使用 qtwebkit 创建一个移动 html5 项目。我不知道如何将 qtwebkit 添加到 qt creator。我试图用谷歌搜索它，但我找不到关于如何做到这一点的明确步骤。当我尝试创建项目时，它说没有找到有效的工具包。

我是qt的新手。感谢您的帮助。

# php - 将多维数组转换为列表的最快方法？

> ID：15220668
> 
> 赞同：0
> 
> 时间：2013-03-05T09:52:06.640
> 
> 标签：php

我有以下数组：

```
Array
(
    [0] => stdClass Object
        (
            [categoryid] => 60
            [categoryName] => Parent Category A
            [categoryParent] => 
        )

    [1] => stdClass Object
        (
            [categoryid] => 65
            [categoryName] => Parent Category B
            [categoryParent] => 
        )

    [2] => stdClass Object
        (
            [categoryid] => 68
            [categoryName] => Child Category A
            [categoryParent] => 65
        )

    [3] => stdClass Object
        (
            [categoryid] => 69
            [categoryName] => Super Child Category A
            [categoryParent] => 68
        )
) 
```

我需要最终得到一个这样的列表：

*   父类 A
*   父类 B
    *   子类别 A
        *   超级儿童A类

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:06:55.860

试试这个：

```
function htmlList($array, $parent = null){
    $str = '<ul>';
    foreach($array as $object){
        if(!$parent){
            if(!$object->categoryParent){ 
                $str .= '<li>' . $object->categoryName;
                $str .= htmlList($array, $object->categoryid);
                $str .=  '</li>';
            }
        }
    }
    return $str .= '</ul>';
}

echo htmlList($yourArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:58:24.133

```
function mylist( $a, $parent='') {
   $r = '' ;
   foreach ( $a as $i ) {
       if ($i['categoryParent'] == $parent ) {
          $r = $r . "<li>" . $i['categoryName'] . mylist( $a, $i['categoryid'] ) . "</li>";
       }
   }
   return ($r==''?'':"<ul>". $r . "</ul>");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:02:23.370

我建议保留一个包含父项的数组，并将子项添加到自己的元素数组中。（类似于你的树）

您可以通过以下示例阅读此元素：

```
<?php
BuildList($arrayParent, 0);

function BuildList($arrayElements, $depth)
{
    foreach($arrayElements as $element)
    {
        echo str_repeat("&nbsp;&nbsp;", $depth) . $element->categoryName;
        $depth++;
        if(count($element->subCategory) > 0)
            $depth = BuildList($element->subCategory, $depth);

        return $depth;
    }
}
?> 
```

# javascript - 画布的 setAttribute 宽度作为百分比值

> ID：15220678
> 
> 赞同：2
> 
> 时间：2013-03-05T09:52:30.387
> 
> 标签：javascript, canvas, setattribute

我正在开发一个 WebApp，用户可以使用他们的手机和平板电脑在画布上绘图。我的问题是，如果我在 CSS 中将画布的大小指定为百分比值，则 TouchDraw-Script（[http://www.codeproject.com/Articles/355230/HTML-5-Canvas-A-Simple-Paint-Program -Touch-and-Mou](http://www.codeproject.com/Articles/355230/HTML-5-Canvas-A-Simple-Paint-Program-Touch-and-Mou) ) 不再正常工作。这是可悲的，因为否则它是完美的。

所以我想我直接在脚本中指定画布的宽度和高度，如下所示：

```
sigCanvas.setAttribute('width', '320');
sigCanvas.setAttribute('height', '480'); 
```

当然我必须处理不同的屏幕分辨率，所以百分比值是最好的。有没有办法在我的代码中使用百分比值？导致这个

```
sigCanvas.setAttribute('width', '90%'); 
```

不管用。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:00:25.420

[好的，所以你可以通过附加到窗口调整大小事件](http://api.jquery.com/resize/)来做你想做的事情，如下所示：

```
$(window).resize(callbackFunc); 
```

这是我为使其正常工作所做的更改。

[参见 jsFiddle](http://jsfiddle.net/eE4en/)

```
$(document).ready(function () {
    initialize();

    updateSize();
});

$(window).resize(updateSize);

function updateSize() {
    var sigCanvas = document.getElementById("canvasSignature");
    var xOffset = 100;
    var yOffset = 100; // header height
    sigCanvas.setAttribute('width', window.innerWidth - xOffset);
    sigCanvas.setAttribute('height', window.innerHeight - yOffset);
} 
```

并且可以根据您的需要进行定制`xOffset`，`yOffset`我们需要从窗口的宽度和高度中减去，否则画布将离开页面。还要确保在页面加载时运行它，以便将大小调整为正确的大小。

# android - 单选按钮更改分段列表视图滚动时的状态

> ID：15220679
> 
> 赞同：1
> 
> 时间：2013-03-05T09:52:33.320
> 
> 标签：android, listview, adapter

我在我的应用程序中使用我拥有`Sectioned ListView`的行，所以 当我通常单击单选按钮时，它会被单击并且工作正常。但是，当我单击并滚动视图时，选定的视图也会消失并且未选中。`ListView``TextView``RadioGroup.`

这是我正在使用的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativelay"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_bg" >

    <TextView
        android:id="@+id/tvname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:maxLines="1"
        android:padding="10dp"
        android:textColor="#000000"
        android:textSize="18dp"
        android:textStyle="bold" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/check_present"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="20dp"
            android:onClick="onPresentClick" />

        <RadioButton
            android:id="@+id/check_absent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@id/check_present"
            android:onClick="onPresentClick" />
    </RadioGroup>

</RelativeLayout> 
```

这是我用于`Sectioned ListView`...的适配器。

这是我更新的代码....

```
public class NamesAdapter extends ArrayAdapter<Item> {

    private ArrayList<Item> items;
    private LayoutInflater vi;
    private Item objItem;
    private ArrayList<Items> presentSelected = new ArrayList<Items>();;
    private ArrayList<Items> absentSelected = new ArrayList<Items>();;
    private Map<Integer, Boolean> map = new HashMap<Integer, Boolean>();
    ViewHolderSectionName holderSection;
    ViewHolderName holderName;
    Items item;

    public NamesAdapter(Context context, ArrayList<Item> items) {
        super(context, 0, items);

        this.items = items;

        vi = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        objItem = items.get(position);

        if (objItem.isSectionItem()) {
            ItemsSections si = (ItemsSections) objItem;

            if (convertView == null
                    || !convertView.getTag().equals(holderSection)) {
                convertView = vi.inflate(R.layout.alphabet_separator, null);

                holderSection = new ViewHolderSectionName();
                convertView.setTag(holderSection);
            } else {
                holderSection = (ViewHolderSectionName) convertView.getTag();
            }

            holderSection.section = (TextView) convertView
                    .findViewById(R.id.alphabet_letter);

            holderSection.section
                    .setText(String.valueOf(si.getSectionLetter()));

        } else {
            Items ei = (Items) objItem;

            if (convertView == null || !convertView.getTag().equals(holderName)) {
                convertView = vi.inflate(R.layout.row, null);

                holderName = new ViewHolderName();

                holderName.name = (TextView) convertView
                        .findViewById(R.id.tvname);

                holderName.radioGroup = (RadioGroup) convertView
                        .findViewById(R.id.radioGroup1);
                holderName.checkAbsent = (RadioButton) convertView
                        .findViewById(R.id.check_absent);
                holderName.checkPresent = (RadioButton) convertView
                        .findViewById(R.id.check_present);

                Boolean present = map.get(position);

                Log.e("Names Adapter", "is Selected " + present);

                if (present != null && present.booleanValue()) {
                    // set present checkbox selected
                    holderName.checkPresent.setSelected(true);
                } else {
                    holderName.checkAbsent.setSelected(true);
                    // set absent checkbox selected
                }

                holderName.radioGroup
                        .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                            @Override
                            public void onCheckedChanged(RadioGroup group,
                                    int checkedId) {
                                // TODO Auto-generated method stub
                                switch (checkedId) {
                                case R.id.check_absent:
                                    item = (Items) holderName.checkAbsent
                                            .getTag();
                                    absentSelected.add(item);
                                    map.put(position, true);
                                    break;

                                case R.id.check_present:
                                    item = (Items) holderName.checkPresent
                                            .getTag();
                                    presentSelected.add(item);
                                    map.put(position, true);
                                    break;

                                default:
                                    break;
                                }
                            }
                        });

                /*
                 * holderName.checkAbsent .setOnCheckedChangeListener(new
                 * CompoundButton.OnCheckedChangeListener() {
                 * 
                 * @Override public void onCheckedChanged( CompoundButton
                 * buttonView, boolean isChecked) { // TODO Auto-generated
                 * method stub holderName.checkAbsent.setSelected(isChecked); //
                 * selected1.add();
                 * 
                 * } });
                 * 
                 * holderName.checkPresent .setOnCheckedChangeListener(new
                 * CompoundButton.OnCheckedChangeListener() {
                 * 
                 * @Override public void onCheckedChanged( CompoundButton
                 * buttonView, boolean isChecked) { // TODO Auto-generated
                 * method stub holderName.checkAbsent.setSelected(isChecked); //
                 * selected2.add();
                 * 
                 * } });
                 */
                convertView.setTag(holderName);

            } else {
                holderName = (ViewHolderName) convertView.getTag();
            }

            if (holderName.name != null)
                holderName.name.setText(ei.getName());
            convertView.setOnCreateContextMenuListener(null);
        }
        return convertView;
    }

    public static class ViewHolderName {
        public TextView name;
        public RadioGroup radioGroup;
        public RadioButton checkPresent;
        public RadioButton checkAbsent;
    }

    public static class ViewHolderSectionName {
        public TextView section;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:53:03.823

您应该维护/保留“已选中”单选按钮的状态，以使其在向上和向下滚动时保持检查状态，因为在向上/向下滚动列表视图时，列表适配器会重新创建每个列表项/视图。

您应该通过在单选按钮上设置监听器来保留选中单选按钮的位置/索引。

您可以使用 hashMap 将列表项保存为 KEY 并将“已检查”状态保存为值。当用户选中该框时，将键值添加到映射中，当用户取消选中该框时，则从映射中删除键。

在渲染列表视图中使用此地图。代码如下：

```
private Map<Integer, Boolean> map =  new HashMap<Integer, Boolean>();    

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

     Boolean present = map.get(position);
     if(present != null && present.booleanValue()){
       // set present checkbox selected
     } else {
       // set absent checkbox selected
     }

    holderName.radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {
       public void onCheckedChanged(RadioGroup group, int checkedId) {
               switch (checkedId) {
                   case R.id.check_absent:
                        map.put(position, false)
                        break;
                   case R.id.check_present:
                        map.put(position, true)
                        break;
               }
      }
   });
} 
```

# maven - 将 maven-shade-plugin 与 maven-assembly-plugin 一起使用

> ID：15220682
> 
> 赞同：4
> 
> 时间：2013-03-05T09:52:38.187
> 
> 标签：maven, maven-assembly-plugin, maven-shade-plugin

我有一个项目，它使用 maven-assembly-plugin 打包了几个（可执行 jar）程序集——基本上是相同的代码，但针对不同的客户端具有不同的数据集。

我需要在我的可执行 jar 中使用 spring，并且由于 spring 中的文件命名，我需要转而使用 maven-shade-plugin 来创建 jar。这工作正常，我可以创建可执行 jar，但我无法弄清楚如何将我的其他文件组装到这个新的阴影 jar 中，因为 shade 插件不提供组装插件中可用的许多功能。

阴影插件在程序集之前执行，所以我假设我可以在我的程序集中以某种方式使用阴影工件，但到目前为止我的所有尝试都失败了。是否可以创建一个程序集，该程序集采用现有的阴影 jar 并简单地将二进制文件和其他一些文件注入其中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-29T22:20:47.547

将 shadedArtifactAttached 设置为 true 将导致 maven 将着色工件而不是原始工件附加到项目。这应该可以解决您的问题。

```
<shadedArtifactAttached>true</shadedArtifactAttached> 
```

# php - php post弹出第二个按钮

> ID：15220695
> 
> 赞同：0
> 
> 时间：2013-03-05T09:53:22.733
> 
> 标签：php, jquery, post

我有一个包含五个字段和两个按钮的搜索表单。我想发布字段值以使用第二个按钮弹出。

我正在使用 get 方法，但它有编码问题； [php在ie上获取数据编码](https://stackoverflow.com/questions/14896349/php-get-data-encoding-on-ie)

```
window.name = 'SearchCustomer';
   function OpenPopup( url, winname, features )
   {
    if(winname==''){
     window.open( url, winname, features, false );
     return;
    }
    if ( !findWindow( url, winname, features ) )
    {
     var handle = window.open( url, winname, features, false );
     if ( handle != null ) handle.focus();
    }
   }

   function findWindow( url, winname, features )
   {
    var handle = window.open( '', winname, features, false );
    if ( handle != null )
    {
     if (( handle.location != 'about:blank' ) && ( handle.location != '' ))
     {
      handle.focus();
      return true;
     }
    }
    return false;
   }

function OpenCustomer(customerid){
    OpenPopup('Customer/new.php?id='+ customerid +'', 'CustomerForm', 'channelmode=0, directories=0, fullscreen=0, width=550, height=460, location=0, menubar=0, resizable=0, scrollbars=1, status=0, titlebar=1, toolbar=0', false);
} 
```

我无法添加 onSubmit 事件，因为搜索按钮应该在同一页面上工作。

我如何发布表单以弹出第二个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:49:41.477

@milesh您可以通过正确的URL编码来做到这一点，这样IE就不会中断或将表单字段值存储在与“窗口”对象相关联的javascript变量中。稍后，一旦您的弹出窗口被加载，然后从子窗口访问这些变量。

例如，在父窗口中，

```
window.myform = { field1:"searchtext", field2:"somecategory"} 
```

现在您可以在子窗口中获取这些变量，如下所示，

```
alert(opener.myform); 
```

注意：不是确切的代码。这是实现目标的一些通用想​​法。

# c# - 在异步方法中提示用户输入信息

> ID：15220696
> 
> 赞同：0
> 
> 时间：2013-03-05T09:53:26.367
> 
> 标签：c#, asynchronous

我正在使用这段代码，但遇到了一些关于使用 async 和 await 的问题。我之前制作了一个关闭“项目”的方法，我将它与异步委托异步使用，效果很好。我还创建了`deserializeAsync()`一种在其他情况下使用的方法，也可以像宣传的那样工作。但是，我现在想为我的应用程序实现一个开放项目功能。我开始使用我在其他委托中使用过的 Async 辅助方法编写该方法，但我意识到当我需要通过文件浏览对话框提示用户输入信息时，我不知道这是否是一个好的解决方案。显示文件浏览对话框将冻结该方法的执行，我想它因此不再是异步的。这里的最佳做法是什么？我是不是该`.Wait()`我的异步方法是这样的：

```
CloseProjectAsync().Wait(); 
```

并让 Open Project 方法同步执行所有内容，或者我会更好地等待我拥有的 Async 方法并使该方法“尽可能异步”？

```
private async Task OpenProjectAsync()
{
    //get folderPath
    if (m_OpenFileService.ShowDialog(null) != true)
       return;

    await CloseProjectAsync();

    await Task.Run(() => {
        string[] lines = File.ReadAllLines(m_OpenFileService.FileName);
    });

    await DeserializeAsync(something);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:41:35.883

我会做一切`async`。模态对话框有点不稳定；他们实际上在阻塞调用中执行一个嵌套的消息循环。这会使您的 UI 和其他异步操作保持响应，但可能会导致重入问题。但它是比 更好的选择`Wait`。

如果你尝试使用`Wait`，你会很快遇到[我在博客中描述的死锁问题](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)。

# android - 将多个参数传递给 AsyncTask

> ID：15220697
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:53:31.227
> 
> 标签：android

目前我正在开发一个应用程序，我正在尝试在后台做一些工作，我正在使用 AsyncTask。

我正在创建这样的 AsyncTask 类

```
class callingweb extends AsyncTask<String,Void,Void>
{

public callingweb(Context context,Object objects,String...strings) {

}
} 
```

并像这样在我的主类中调用这个类

```
callingweb cw=new callingweb(this,sampleDB,address,uname,pass);
cw.execute(); 
```

其中 sampleDB 是数据库对象，地址、uname 和 pass 是字符串变量

现在我想将另一个视图传递给构造函数，即 ListView lv

```
callingweb cw=new callingweb(login.this,sampleDB,lv,address,uname,pass); 
```

请告诉我我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:56:01.917

最简单的解决方案是添加另一个构造函数（构造函数重载）以证明`ListView`另一个参数是合理的。例如：

```
//constructor without listview
public callingweb(Context context,Object objects,String...strings) {

}

//constructor with listview
public callingweb(Context context, ListView lv, Object objects,String...strings){

} 
```

# java - 使用 JSTL 时出现异常

> ID：15220698
> 
> 赞同：0
> 
> 时间：2013-03-05T09:53:31.820
> 
> 标签：java, jstl

我在 JSTL 工作，在执行应用程序时，我遇到了关于 JSTL 的异常。任何人都可以帮助我，为什么我得到这个例外？

> HTTP 状态 500 - 绝对 uri： http: [//java.sun.com/jstl/core](http://java.sun.com/jstl/core) 无法在 web.xml 或随此应用程序部署的 jar 文件中解析

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:40:00.263

由于 jar 版本问题，我得到的异常。我已经下载了jstl-1.2.jar。在类路径中添加 jar 并重建 jar 并执行应用程序，然后应用程序开始正常工作。

# c++ - 如何在允许子类方法调用的同时在 C++ 中实现抽象类？

> ID：15220700
> 
> 赞同：1
> 
> 时间：2013-03-05T09:53:42.303
> 
> 标签：c++

我创建了一个名为的类`A`，它有一个虚拟方法`do_something`：

```
class A {
  virtual int do_something() = 0;
} 
```

`B`子类`A`：

```
class B {
  virtual int do_something() {
    return 42;
  }
} 
```

在我的主要功能的某个地方，我这样做了。

```
vector<A> arr;
arr.push_back(B());
int val = arr[0].do_something(); 
```

但是，我收到一个编译器错误，抱怨这`do_something`是一个纯虚函数。我相信这是因为我声明向量包含 type 的对象`A`，并且`A`是一个抽象类。因此，编译器不知道在类`B`中查看是否`do_something`已定义。

有没有解决的办法？我仍然可以存储不同类型的对象的向量（尽管声明了一个通用的虚函数，但具有一个通用的超类）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:56:30.353

通过以这种方式声明向量：

```
vector<A> arr; 
```

您正在尝试创建**直接类型** `A`的对象向量。这不仅不允许您在`B`其中存储类型的对象（如果`A`不是抽象的，您会得到[**slicing**](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)，这是您当然不想要的），而且它也无法编译，因为不`A`存在 的直接实例。

您在这里想要的是存储指向*（*`A`可能是智能指针）的指针：

```
#include <memory> // For smart pointer classes

vector<shared_ptr<A>> arr;
arr.push_back(make_shared<B>());
int val = arr[0]->do_something(); 
```

在这里，我决定使用`shared_ptr`，假设共享所有权，但如果对象的唯一所有者是容器`arr`，那`unique_ptr`将是一个更好的选择。

最后，如果你真的知道自己在做什么，并且准备好承担自动内存管理的麻烦，你可以使用原始指针，但我不鼓励你这样做（你必须确保你分配的`delete`每个对象都解除分配与`new`）：

```
vector<A*> arr;
arr.push_back(new B());
int val = arr[0]->do_something(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:55:46.577

> 有没有解决的办法？我仍然可以存储不同类型的对象的向量（尽管声明了一个通用的虚函数，但具有一个通用的超类）？

将智能指针与 std::vector 一起使用

```
std::vector<std::unique<A>> arr;
arr.emplace_back(new B()); 
```

或者

```
arr.emplace_back(std::make_shared<B>()); 
```

# php - 如何检测是否设置了 $_POST？

> ID：15220704
> 
> 赞同：29
> 
> 时间：2013-03-05T09:53:56.023
> 
> 标签：php, post

我想知道如何检测 $_POST 是否设置。

现在我像这样检测它：

```
if(isset($_POST['value'])) 
```

但我不再看是否设置了值。基本上，任何 POST 都可以。

```
if(isset($_POST)) 
```

我不确定 PHP 如何处理这个问题。也许 isset($_POST) 总是返回 true，因为它是 PHP 全局的？

基本上，我该怎么做？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-05T09:55:06.410

尝试：

```
if ( $_SERVER['REQUEST_METHOD'] == 'POST' ) {} 
```

检查您的脚本是否已发布。

如果传递了附加数据，`$_POST`则不会为空，否则将为空。

您可以使用`empty`方法检查它是否包含数据。

```
if ( !empty($_POST) ) {} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-05T09:57:39.590

`$_POST`是一个数组。您可以检查：

```
count($_POST) 
```

如果它大于零，则意味着发布了一些值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T09:55:58.163

一个简单的解决方案可能就是使用

```
if (!empty($_POST)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-05T09:57:18.153

只需如下使用它。因为它`super global`所以在检查`isset`and时它总是返回 true `empty`。

```
<?php
    if($_POST)
    {
        echo "yes";
    }
?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-18T15:16:04.110

我知道这个答案已经得到了回答，但这是我在我的一个课程中使用的一个简单方法来确定帖子是否已设置（也许有人会发现它很有用）：

```
public function isPost($key = null) {

    if ($_SERVER['REQUEST_METHOD'] != 'POST') {

        return false;

    }

    if (!empty($key)) {

        return isset($_POST[$key]);

    }

    return true;

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-04-04T15:40:40.010

检查 $_POST 的最佳方法

```
<?php 
if(count($_POST)){} 
```

# java - 如何在 Google App Engine 上获取应用的域名

> ID：15220706
> 
> 赞同：3
> 
> 时间：2013-03-05T09:53:58.640
> 
> 标签：java, google-app-engine

我有一个在 domainX 上的 Google App Engine 上运行的应用程序。这允许用户输入、存储和显示数据。

我也希望这个应用程序在 DomainY 上运行。我想使用 2 个应用程序的域名为 DataStoreService 生成一个密钥，这样数据就不会在 2 个域名之间共享。

我如何获得域名？我知道我可以使用 HttpServletRequest 来获取我的一个 servlet 的 DoPost 方法上的 url，但是如何获取域？我还需要在没有 HttpServletRequest 的 RemoteServiceServlet 上获取域来获取 url。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:17:34.930

您可以引入一个特殊的过滤器，映射到`/*`，它将从 HTTP 请求中获取当前域，并将其存储到请求存储中以供以后重用。

我建议使用`getServerName()`（它的`Host`标题），而不是 URL。

例如：

```
class RememberDomain implements Filter {
  doFilter(ServletRequest request, ServletResponse response, FilterChain chain) {  
    DomainHolder.getInstance().setDomain(request.getServerName());    
    chain.doFilter(request, response);
  }
  ... init and destroy
}

class DomainHolder {

  //store domain here
  pricate ThreadLocal<String> domain = new ThreadLocal<String>(); 

  DomainHolder getInstance() { ... sigleton ... }

  ... get/set domain name
} 
```

# excel - 是否可以在多个 excel 实例中使用相同的 RTDServer

> ID：15220708
> 
> 赞同：0
> 
> 时间：2013-03-05T09:54:14.833
> 
> 标签：excel, c#-4.0, real-time, com-interop, rtd

我有一个在一个 excel 实例中运行良好的 C# RTDServer。定义如下：

```
[Guid("1D50EF28-A1BE-4BE9-9214-46A48085ADFF")]
[ProgId("Acme.RtdServer")]
public class RTDServer : IRtdServer
{
   // IRtdServer members:
   // ...
} 
```

当服务器“连接”时 excel 调用

```
#region IRtdServer Members    
public int ServerStart(IRTDUpdateEvent CallbackObject)
{
    _callback = CallbackObject;
} 
```

带有一个回调对象，此后可用于通知 excel 可以收集更新：

```
_callback.UpdateNotify(); 
```

问题是，如果我有第二个、第三个等 excel 实例，`ServerStart`则永远不会被调用，这意味着我无法通知 excel 新更新已准备好。[此处](http://support.microsoft.com/kb/284883)的一篇 MS 知识库文章建议了进程外 RTDServer 的类似行为。我的实现是一个线程化的进程内 RTDServer。

我希望能够`Acme.RtdServer`跨多个实例使用同一服务器。这一定是可能的，因为 Bloomberg Excel API 似乎可以实现它。有谁知道如何做到这一点？

**编辑：**对 RTD() 的调用包含在 UDF 中：

```
public object ACME_UDF(string ItemID, string TopicName, bool OtherData = false)
{
    if (string.IsNullOrEmpty(ItemID) || string.IsNullOrEmpty(TopicName))
    return "...";

    try
    {
        return _xlApp.WorksheetFunction.RTD("acme.rtdserver", null, ItemID, TopicName, OtherData); 
    }
    catch (Exception)
    {
        return "Failed to retrieve [" + ItemID + "] with [" + TopicName + "]";
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:17:14.073

[似乎无法添加任何评论。当我尝试时，它说“还有 11 个……”] 版本是 2010，32 位

# postgresql - 如何对 PostgreSQL 进行批量更新

> ID：15220713
> 
> 赞同：0
> 
> 时间：2013-03-05T09:54:25.920
> 
> 标签：postgresql

```
UPDATE wlog 
  SET g_log = ( SELECT glog_id 
                FROM glog_wlog 
                WHERE w_id=wlog.id limit 5) 
WHERE g_log is NULL; 
```

我的旧数据库由映射表组成`"glog_wlog"`。现在我需要改变它的引用方式。上面的代码工作正常。但是limit 5真的什么都做不了。我在表格中有超过 100 万个重新编码。我不想一口气将它们全部转换。那么如何将其分解为任何给定的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:14:56.607

您可以使用 CTE 来限制您正在查看的记录以执行此类子集。

例如：

```
with wlog_targets as (
    select id from wlog
    where g_log is null
    limit 5)
update wlog
set
    g_log = g.glog_id
from wlog_targets w
inner join glog_wlog g
    on w.id = g.w_id
where 
    wlog.id = w.id; 
```

此方法使用 wlog_targets CTE 提取一小部分 wlog 记录进行处理。

如果选择的 5 条记录在 glog_wlog 中没有条目，则这确实存在问题，则不会更新任何内容。此外，CTE 未排序，因此可能返回任何 5 条记录。

# highcharts - 如何在 Highcharts 中扩展或突出显示水平线？

> ID：15220714
> 
> 赞同：9
> 
> 时间：2013-03-05T09:54:34.163
> 
> 标签：highcharts, line

我想在我的图表中创建一种基线，其中有多个列和一条值“1”的水平线，它从 y 轴开始并超出最后一列。看这个例子：

![在此处输入图像描述](../Images/69f7a2791fb54dc963c755cdb9664eb3.png)

现在，我创建了类似的东西，但还没有成功：

![在此处输入图像描述](../Images/1d6e8660baf4f43e99db618f0495def8.png)

系列代码很简单：

```
 series:
            [{
                type: 'column',
                data: [4.05,2.81,2.1,1.20,0.37]
            },
            {
                type: 'line',
                name: 'Globale Biokapazität',
                data: [1,1,1,1,1]
            }] 
```

我可以设置任何参数来延长线吗？或者有没有其他方法可以突出一行？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-05T10:10:28.093

有很多关于[plotLines的例子](http://api.highcharts.com/highcharts#xAxis.plotLines)

只需使用这样的东西：

```
yAxis: {
    plotLines:[{
        value:450,
        color: '#ff0000',
        width:2,
        zIndex:4,
        label:{text:'goal'}
    }]
}, 
```

其中之一：[DEMO](http://jsfiddle.net/wergeld/4R5HH/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T10:10:44.590

你有两个选择：

*   改用 plotLine：[http ://api.highcharts.com/highcharts#xAxis.plotLines](http://api.highcharts.com/highcharts#xAxis.plotLines)

*   更改数据格式，固定最小值和最大值：

    ```
     xAxis: {
             min: 0,
             max: 5
         },
         series:
        [{
            type: 'column',
            data: [4.05,2.81,2.1,1.20,0.37]
        },
        {
            type: 'line',
            name: 'Globale Biokapazität',
            data: [[-0.5, 1] , [5.5, 1]]
        }] 
    ```

# javascript - 在同一控件上刷新工具提示？

> ID：15220718
> 
> 赞同：1
> 
> 时间：2013-03-05T09:54:54.213
> 
> 标签：javascript, gwt

是否可以在将工具提示移到同一控件上时刷新它？

我想`tooltip`在`canvas`( `canvas.setTitle("text")`) 上显示一个。当鼠标停止时，工具提示会显示一次。然后我必须离开画布并重新进入以使工具提示重新出现。

但是我希望当我在画布内移动鼠标并再次停止时重新绘制工具提示（目标是根据稍后鼠标下方的内容提供动态工具提示）。

我可以看到 a`MouseOverEvent`只触发了一次，然后只要我在画布内移动，该事件就不会再次发生。这可以实现吗？

更新：

我尝试模拟 Hover 事件，但什么也没做：

```
 NativeEvent event = Document.get().createMouseOverEvent(-1, 915,528,915,422,
          false, false, false, false, NativeEvent.BUTTON_LEFT, canvas.getElement());
    canvas.getElement().dispatch(event); 
```

# php - php脚本未读取AJAX POST变量

> ID：15220721
> 
> 赞同：0
> 
> 时间：2013-03-05T09:55:10.700
> 
> 标签：php, jquery, ajax

为什么这对我不起作用？这是对 php 脚本的 AJAX POST 请求，该脚本已经过测试，可以与固定变量一起正常工作。

请求如下

```
 $.ajax({
type: "POST",
url: url,
data:{serial:id},
contentType:"application/json; charset=utf-8",
dataType: "json",
    success: function(data){} 
```

我的PHP是

```
 <?php
header("Access-Control-Allow-Origin: *");
header('Content-type: application/json');

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
echo 'POSTed'; 
 } //to test post

$account = $_POST['serial']; 
```

....ETC

接下来是我的 MySQL 请求。

从我的控制台看，一切看起来都很好，除了我得到“未定义索引：串行”作为我的响应。我尝试过许多不同的方式来构建我的 POST 变量。它来自查看时显示正确变量的源。

```
var id =  localStorage.userAccount; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:05:13.313

无需添加`contentType:"application/json; charset=utf-8",`。`jquery.ajax`只需删除它，然后尝试。

# javascript - 用于集合的主干自定义属性

> ID：15220728
> 
> 赞同：0
> 
> 时间：2013-03-05T09:55:17.237
> 
> 标签：javascript, backbone.js

所以我正在尝试按他们拥有的类别来计算我收藏中的模型。

这是我的代码：

```
App.Collections.channls = Backbone.Collection.extend({
    model:    App.Models.Channel,
    catCount: new Array(),

    initialize: function() {
      this.bind('add', this.onModelAddedd, this);
    },

    onModelAdded: function( model, collection ) {
         if (this.catCount[model.get('category_id')] == undefined) {
           this.catCount[model.get('category_id')] = 0;
         }
         this.catCount[model.get('category_id')]++;
    },

    returnCount: function() { return this.catCount }
}); 
```

我初始化了这个集合几次。

问题是当我得到`catCount`集合的属性时，数组就像一个全局变量。因此，它不仅计算了它自己的集合实例中的模型，而且数组还计算了添加到集合的*所有*实例中的所有模型。

任何人都知道如何使集合的属性只计入它自己的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:07:08.217

也许你需要移动 catCount 来初始化函数？

```
initialize: function( ) {
   this.catCount= new Array();
   this.bind( 'add', this.onModelAddedd, this );
} 
```

所以它将被初始化每个新的集合实例

# asp.net-mvc - 对 SimpleMembership 的困惑

> ID：15220733
> 
> 赞同：0
> 
> 时间：2013-03-05T09:55:34.017
> 
> 标签：asp.net-mvc, domain-driven-design, security, simplemembership

我对 SimpleMembership 及其在 ASP.NET MVC 网站中的使用有点困惑。

我的项目目前使用代码优先的 dbcontext，它位于一个名为“数据访问”的类库中。

我有另一个名为“DomainObjects”的类库，其中包括我在“数据访问”中声明的 dbcontext 使用的所有实体/对象。

我有另一个名为“DomainFactory”的项目，顾名思义，它公开了访问数据上下文、操作数据等的方法。

最后，我有一个名为“Web”的 MVC 4 应用程序（该应用程序实际上使用 IoC 来调用在“DomainFacotry”项目中声明的方法——但我认为这与我在这里想要实现的目标无关。）

我的 MVC 应用程序现在处于我希望为其添加安全性的阶段。

使用基本 Internet 应用程序模板，我可以看到 AccountModel.cs 文件中声明了一个 UsersContext，该上下文在整个应用程序中被大量使用。这不是我想要的行为。为了可测试性和关注点分离，我希望我的所有身份验证逻辑都由我的域类处理，但是，我不确定如何去做，希望能回答以下问题：

1.  因为我的 MVC 应用程序没有引用我创建的 dbcontext，我如何重新生成和重新植入数据库？我应该使用 WebActivator 吗？这是首选方法吗？

2.  将所有身份验证逻辑移至我的 DomainFactory 项目的最佳方法是什么？如果你这样做了，你是怎么做的？

3.  使用我上面描述的方法时有什么需要注意的吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:01:38.263

您最大的问题是有多个上下文。EF 不能很好地处理多个上下文，即使您让它们发挥作用，此时也只能迁移一个上下文，因此其他上下文只能引用现有的 DBO。

不过，除此之外，将身份验证移到类库中并没有什么复杂的。ASP 和 EF 关心您的模型所在的位置。只要您的 DbContext 可以获得对它们的引用，就可以了。在这方面，您*也可以*将 DbContext 存储在类库中，但请注意，EF 只会在启动项目中自动查看 DbContext 实例。如果你把它放在一个类库中，你必须告诉它每次你`add-migration`或`update-database`使用`-ProjectName 'MyClassLibrary'`.

# rabbitmq - RabbitMQ 管理插件 Web 服务器

> ID：15220736
> 
> 赞同：8
> 
> 时间：2013-03-05T09:55:47.327
> 
> 标签：rabbitmq

我在 EC2 节点上安装了 RabbitMQ 集群。集群已启动并正在运行。我正在尝试运行 rabbitmq_management 插件。我在所有集群节点上安装了 rabbitmq_management 插件。

RabbitMQ V 3.02，Ubuntu 服务器 12.04

启用插件：

```
[e] amqp_client                       3.0.2
[e] mochiweb                          2.3.1-rmq3.0.2-gitd541e9a
[E] rabbitmq_management               3.0.2
[e] rabbitmq_management_agent         3.0.2
[e] rabbitmq_mochiweb                 3.0.2
[e] webmachine                        1.9.1-rmq3.0.2-git52e62bc 
```

重启rabbitmq_server后，运行应用：

```
{running_applications,[{rabbit,"RabbitMQ","3.0.2"},
                        {os_mon,"CPO  CXC 138 46","2.2.7"},
                        {mnesia,"MNESIA  CXC 138 12","4.5"},
                        {sasl,"SASL  CXC 138 11","2.1.10"},
                        {stdlib,"ERTS  CXC 138 10","1.17.5"},
                        {kernel,"ERTS  CXC 138 10","2.14.5"}]}, 
```

`http://hostname:15672`不加载（端口在 EC2 安全组中打开）。

Web 服务器似乎没有运行。我在安装管理插件后重新启动了服务，并且在 startup_log 中没有看到任何错误。startup_err 为空。

关于从这里去哪里的建议？

更新：

重新启动节点完全有效。所以大概在第一次重新启动之前我没有正确关闭某些东西。

仍然欢迎任何见解。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-15T14:19:58.347

早就应该回答这个问题了，我发现这可以正确停止并重新启动 Rabbit。

```
sudo rabbitmqctl stop
sudo invoke-rc.d rabbitmq-server start 
```

# date - SQLITE 按日期排序不起作用

> ID：15220737
> 
> 赞同：2
> 
> 时间：2013-03-05T09:55:49.450
> 
> 标签：date, sqlite

我在 SQLite 中有以下 DDL：

```
CREATE TABLE money (
    id INTEGER PRIMARY KEY,
    'when' TIMESTAMP,
    amount INTEGER,
    note TEXT
) ; 
```

我试图查看按日期排序的行：

```
sqlite3 -line money.db "select * from money order by datetime('when') desc limit 5" 
```

但它不会返回按“when”倒序排列的行。也更改`desc`为`asc`给出完全相同的结果。也试过`order by 'when'`代替`order by datetime('when')`. 什么应该是正确的查询？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:15:06.573

在 SQL 中，字符串使用单引号，而表/列名可以用双引号引起来。

SQLite 接受这两种引号以与 MySQL 兼容，但这仅在预期含义不明确时才有效。在函数调用`datetime('when')`中，`when`被解释为字符串。

使用`datetime("when")`.

# iphone - 在 iPhone 应用程序中集成 Radio/FM 功能

> ID：15220744
> 
> 赞同：1
> 
> 时间：2013-03-05T09:56:04.117
> 
> 标签：iphone, ios, objective-c, ipad, radio

我正在做一个 iPhone 应用程序，它具有在我的应用程序中播放您所在位置的广播/调频电台的功能。你能指导我吗，有什么想法吗，博客？我只是问如何从你的 iPhone 应用程序中播放它。更清楚地说，我们如何从我们的 iPhone 应用程序中播放收音机或 FM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:58:37.690

由于 iOS 设备没有 FM 收音机接收器，因此您无法从您的应用程序播放 FM 收音机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:03:58.033

您可以在 google 和 github 上查看，它们有很多开源代码可以做到这一点。一个[例子](https://github.com/chirpradio/chirpradio-ios/tree/master/Classes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T11:58:57.237

实际上，iPhone 确实有一个集成的 FM 收音机接收器。请参阅 Broadcomm BCM4334 芯片详细信息。然而，自 2009 年推出以来，苹果一直不愿意解锁它。毫无疑问，这种不情愿对苹果来说是战略性的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:01:46.767

有**.mp3**或**.m3au**等许多可用的广播流 URL，您可以在 .mp3 或 .m3au 中播放`MPMoviePlayerController`。

# html - 什么是所有可能的 HTML 标签？

> ID：15220747
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:56:14.353
> 
> 标签：html

我知道（或发现）可能在 HTML 标记中的内容：

*   元
    *   字符集
    *   关键词
    *   描述
*   标题
*   关联
    *   快捷方式图标（所有浏览器的图标，使其适用于 IE 的快捷方式）
    *   样式表
    *   备用（原子/RSS）
    *   搜索
    *   下一个/上一个
    *   制作
    *   [来自 Google 的更多 rev/rel](https://developers.google.com/webmasters/state-of-the-web/2005/linkrels)
*   基础href

**还有哪些其他标签在这里有效且有用？**
我并不真正关心几年前流行的一些晦涩标签或仅在少数浏览器中有效的标签。相反，我很好奇在所有浏览器中工作的不太为人所知的有用的东西（或者可以被黑客入侵与所有浏览器一起工作）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:59:38.213

看看官方文档[html 4.0.1](http://www.w3.org/TR/html401/struct/global.html)和[html 5](http://dev.w3.org/html5/html-author/#the-head-element)你需要的所有信息都在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:06:06.710

[在 whatwg.org 上](http://developers.whatwg.org/)查看已处理的HTML 规范。您感兴趣的部分是[语义：头部元素](http://developers.whatwg.org/semantics.html#the-head-element)和[元数据内容](http://developers.whatwg.org/content-models.html#metadata-content)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:08:04.070

在所有浏览器中禁用缓存

> ```
>  <meta http-equiv="cache-control" content="max-age=0" />
>     <meta http-equiv="cache-control" content="no-cache" />
>     <meta http-equiv="expires" content="0" />
>     <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
>     <meta http-equiv="pragma" content="no-cache" /> 
> ```

在搜索引擎中获取索引

> ```
>  <meta name="robots" content="index, follow" />
>     <meta name="googlebot" content="index, follow" />
> <meta name="robots" content="ALL" /> 
> ```

确定不同设备的视口以运行响应式 css

> ```
>  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
> ```

# javascript - 无法弄清楚如何修改角度指令

> ID：15220748
> 
> 赞同：0
> 
> 时间：2013-03-05T09:56:15.193
> 
> 标签：javascript, jquery, angularjs, angularjs-directive

我想要做的是单击一个按钮，我试图让用户选择显示的 2 个图像之一并使所选图像可拖动。我的代码显示 2 张图片，其中 1 张是可拖动的。我无法弄清楚如何添加该功能以让用户选择 2 个图像之一并让所选图像可拖动

这是我的html代码

```
 <div ng-app="test">
    <button name="Add" type="buton" ng-click="showMarker = true">Show List</button>
<hello>

</hello>
</div> 
```

这是javascript代码

```
 angular.module('test', []).directive('hello', function() {
    return {
        restrict : 'E',
        template : '<div style="position: relative" ng-show="showMarker"><img id="mr" src="http://www.mbs.edu/i/gmap_marker_default.gif" /><img src="http://www.hypercosm.com/images/icons/add_marker_icon2.gif" /></div>',
        replace: true,
        link : function(scope, element, attrs) {
                 $("#mr").draggable();
        }
    };
}) 
```

这是[jsfiddle](http://jsfiddle.net/7fMCF/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:37:59.190

先提一些建议。除非绝对必要，否则不要创建自定义组件/指令。通常它倾向于创建自定义组件，因为人们仍然在思考 JQuery 或 DOM 操作。首先考虑数据，然后考虑数据+数据绑定将如何修改您的视图。我提出这个的原因是因为你的 hello 指令只是一个模板扩展器，不是吗？我将假设它只是用于演示目的，而不是您计划在生产中使用的东西。让我们来实现您想要实现的目标。

两个不同的标记，它们具有可拖动性，但可以打开或关闭此属性。

这是实现这一目标的指令。

```
.directive('drag', function() {
    return {
        restrict : 'A',
        link : function(scope, elm, attrs) {
            $(elm).draggable({ containment: "window",disabled:false});
            scope.$watch(attrs.drag,function(val){
                if(val === true){
                    $(elm).draggable('option','disabled',false);
                }
                else{
                    $(elm).draggable('option','disabled',true);
                }
            });
        }
    };
}) 
```

现在，一旦您编写了这样的指令，那么添加“拖动”能力就是小菜一碟。向任何元素添加一个 drag="dragVariable"，它将根据 dragVariable 是真还是假而变得可拖动。当然，这个实现是基于为我们提供拖动功能的 JQuery UI。

这是最后的小提琴，我们设置了两个复选框，可用于切换两个标记的拖动状态。当打开drag1时，您可以拖动标记1，当关闭时，拖动功能停止工作。

[http://jsfiddle.net/7fMCF/8/](http://jsfiddle.net/7fMCF/8/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T00:06:42.213

如果您将 id 更改为 classes 它应该可以工作，因为您的 id 仅引用第一个图像。

例如，如果您使用“图像”类，然后使用“可拖动”附加您想要选择的类，那么当您单击第二张图像时，您应该最终得到这个：

```
<div style="position: relative" ng-show="showMarker"><img class="image"  src="http://www.mbs.edu/i/gmap_marker_default.gif" /><img class="image draggable"  src="http://www.hypercosm.com/images/icons/add_marker_icon2.gif" /></div> 
```

为此，您的选择器将是

```
$("image.draggable") 
```

# c# - 如何解析 xml 序列化列表 在通过 OPENXML 的存储过程中？

> ID：15220752
> 
> 赞同：2
> 
> 时间：2013-03-05T09:56:28.267
> 
> 标签：c#, .net, sql-server, tsql, openxml

我正在序列化一个整数列表，如下所示：

```
List<int> Ids=new List<int>();
Ids.Add(3);
Ids.Add(98);
XmlSerializer xs = new XmlSerializer(typeof(List<int>));
MemoryStream ms = new MemoryStream();
xs.Serialize(ms,Ids);

string resultXML = UTF8Encoding.UTF8.GetString(ms.ToArray()); 
```

并传递`resultXML`给存储过程；

xml ( `resultXML`) 的形式为：

```
<?xml version="1.0"?>
<ArrayOfInt xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<int>3</int>
</ArrayOfInt> 
```

我试图在我的存储过程中解析它，如下所示：

```
insert into Table(did,pid)
(SELECT 1, id
FROM       OPENXML (@idoc, '/ArrayOfInt/int',)
        WITH (id int
              )) 
```

但我没有得到价值观；该`id`列始终是`null`：

```
 id
----------- -----------
1           NULL 
```

我怎样才能解决这个问题？我可以更改任何 SP/TSQL、xml 和 C#/.NET 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:11:55.157

我认为您只是缺少一个`.`：

```
SELECT 1, id
FROM OPENXML (@idoc, '/ArrayOfInt/int')
WITH (id int '.') 
```

结果：

```
 id
----------- -----------
1           3

(1 row(s) affected) 
```

（如您所料，添加额外`<int>42</int>`的 etc 值会导致额外的行等）

# oracle - 从 Oracle 表单调用 Jasperreports

> ID：15220758
> 
> 赞同：-1
> 
> 时间：2013-03-05T09:56:43.927
> 
> 标签：oracle, jasper-reports

任何可以建议如何从 Oracle 表单 6i 调用 .jasper 报告文件的人

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:21:34.927

我找到了以下解决方案

```
v_url := '<your url to the report>';
host ('cmd /c start '||v_url); 
```

但我不确定是否有更好的选择

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T10:21:44.770

几年前，我为 Oracle Forms 6i（终端版本）实现了类似的功能。

*   运行 Oracle Forms 6i 的应用程序通过电子邮件将 XML 数据发送到某个“邮件服务”。
*   这是作为 milter 过滤器执行的简单 Perl 脚本实现的。
*   该脚本然后执行 XEP 并从 XML 数据生成 PDF 文档
*   此 PDF 文档已通过电子邮件发送到用户邮箱

# mysql - MySQL：字符串中的值之间

> ID：15220761
> 
> 赞同：2
> 
> 时间：2013-03-05T09:56:49.060
> 
> 标签：mysql, sql-like, between

我正在尝试构建一个与遵循这些规则的行匹配的查询：

*   我的行内容 ID 像“MATCH_1”、“MATCH_2”、“MATCH_4”...
*   我想匹配 id 在 2 个边界之间的行：SELECT id FROM table WHERE id LIKE "MATCH_%", % must be between 2 and 5 例如。结果必须是：'MATCH_2'、'MATCH_4'、'MATCH_5'

有可能这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T10:00:14.937

你是这个意思？

```
 SELECT * 
   FROM table
  WHERE row 
BETWEEN 'MATCH_2' AND 'MATCH_5'; 
```

或转换为 int

```
 SELECT *
    FROM table
   WHERE CAST(SUBSTRING(row FROM 7) AS UNSIGNED)
 BETWEEN 2 AND 5; 
```

# javascript - 使用 JQuery 缩放照片

> ID：15220762
> 
> 赞同：1
> 
> 时间：2013-03-05T09:56:49.670
> 
> 标签：javascript, jquery, html, css

嗨，我正在尝试使用 jquery 缩放照片，它也可以正常工作。[演示](https://dl.dropbox.com/u/92126558/uddhab.me.pn/index.html)。但问题是我无法恢复以前的大小。这是代码 -

```
jQuery("#myimg").click(function () {
    $(this).replaceWith( "<img id='myimgBig' src='http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=420' width='420' height='420' title='that&#39;s me' alt='Uddhab' />" );
});
jQuery("#myimgBig").click(function () {
    $(this).replaceWith( "<img id='myimg' src='http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=120' width='120' height='120' title='that&#39;s me' alt='Uddhab' />" );
}); 
```

我想在#myimgBig 上单击返回#myimg。但是上面的代码不起作用:(哪里错了！！请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:02:22.250

您在#myimgBig 上的点击事件是在元素实际在您的文档中之前注册的（您只将此元素注入到原始图像的onclick 文档中。因此，您的#myimgBig 的点击函数和实际的点击函数之间没有链接图像元素。

在我的脑海中，我要么一开始就加载这两个元素（并且这样做，确保两个点击事件处理程序都注册在正确的元素上），要么在你的第二张图片上添加一个显式的 onclick 属性；或者更好的是，将图像元素包装在跨度或类似元素中并使用它来处理点击，然后将图像注入跨度内。

最初加载这两个元素你会得到类似的东西

```
...your html page here...
<img id="myimg" src="..." /><img id="myimgBig" src="..." /> 
```

你的 jQuery 可能是

```
$("#myimg").click(function() {
  $(this).toggle();
  $("#myimgBig").toggle();
}
$("#myimgBig").click(function() {
  $(this).toggle();
  $("#myimg").toggle();
}

$("#myimgBig").toggle(); 
```

这应该在页面加载后最初隐藏您的大图像，并在两者之间单击切换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T10:03:08.693

您需要为此使用[.on()](http://api.jquery.com/on/)功能。第二个图像是动态创建的，因此未附加处理程序。

```
$("body").on("click", "#myimg", function() {
    $(this).replaceWith("<img id='myimgBig' src='http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=420' width='420' height='420' title='that&#39;s me' alt='Uddhab' />");
});

$("body").on("click", "#myimgBig", function() {
    $(this).replaceWith("<img id='myimg' src='http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=120' width='120' height='120' title='that&#39;s me' alt='Uddhab' />");
}); 
```

[JSF](http://jsfiddle.net/6b84B/)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:03:00.347

使用 CSS 效果

```
.image{
    position:relative;
    width:100px;
    height:80px;
    left:0px;
    top:0px;
    border:1px solid black;
    /* Apply a CSS3 Transition to width, height, top and left properties */
    transition: width 0.3s ease,height 0.3s ease,left 0.3s ease,top 0.3s ease;
    -webkit-transition: width 0.3s ease,height 0.3s ease,left 0.3s ease,top 0.3s ease;
    -o-transition: width 0.3s ease,height 0.3s ease,left 0.3s ease,top 0.3s ease;
    -moz-transition: width 0.3s ease,height 0.3s ease,left 0.3s ease,top 0.3s ease;
}

.image:hover
{
    width:150px;
    height:120px;
    left:-25px;
    top:-25px;
    z-index:9999;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:03:09.137

我不确定，但我认为这是因为该`click()`事件仅在第一次调用时元素存在时才会起作用，但它实际上是由`replaceWith()`.

您可以通过将 click 替换为 来解决此问题`.live("click", function() {})`，例如：

```
jQuery("#myimg").live("click", function () {
    $(this).replaceWith( "<img id='myimgBig' src='http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=420' width='420' height='420' title='that&#39;s me' alt='Uddhab' />" );
});
jQuery("#myimgBig").live("click", function () {
    $(this).replaceWith( "<img id='myimg' src='http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=120' width='120' height='120' title='that&#39;s me' alt='Uddhab' />" );
}); 
```

尽管实际上您应该同时加载两个图像，并且只需使用单击处理程序来隐藏和显示它们 - 它的响应速度会更快。

* * *

## 编辑：

HTML：

```
<img src="image_small.jpg" class="images" id="#myimg" />
<img src="image_big.jpg" class="images" id="#myimgBig" /> 
```

JS：

```
$(document).ready(function() {
    $("#myimgBig").hide();
    $(".images").click(function() {
        $('.images').toggle();
    });
}); 
```

[http://jsfiddle.net/q9gB8/](http://jsfiddle.net/q9gB8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T10:26:32.003

也试试这个，

```
var zoomIn;
$("#myimg").click(function() {
var imgsrc = (zoomIn) ? "http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=120" : "http://www.gravatar.com/avatar/0f510b2337a6077896036f31d4f45eb7?s=420";
$(this).attr('src', imgsrc); 
$(this).animate({
    width: (zoomIn) ? "120px" : "420px",
    height: (zoomIn) ? "120px" : "420px"
}, 1000);
zoomIn = !(zoomIn);
}); 
```

演示：[jsfiddle](http://jsfiddle.net/6b84B/3/)

# eclipse - Eclipse 商店在哪里制作目标？

> ID：15220763
> 
> 赞同：1
> 
> 时间：2013-03-05T09:56:55.653
> 
> 标签：eclipse, makefile, eclipse-cdt

有谁知道 Eclipse 将 C makefile 项目的 make 目标存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:06:38.000

生成目标配置存储在`.cproject`位于项目根目录的 CDT 文件中。

# sql-server - SQL Server 优化查询

> ID：15220764
> 
> 赞同：0
> 
> 时间：2013-03-05T09:56:57.000
> 
> 标签：sql-server, query-optimization

有谁知道如何优化这个查询？如果我运行此查询并且生成 11 行需要超过 10 分钟

```
SELECT DISTINCT th.e_id,
                b_number,
                TQH.supplier_id AS VENDOR_ID,
                s.suppliername AS VENDOR_NAME,
                BUYER_POS,
                TQH.quotation_number AS QUOTATION_NO,
                TQH.contact_person AS CONTRACTOR_REP,
                TQD.tqd_currency_id AS CURRENCY_ID
FROM Tender_Header TH
INNER JOIN Tender_Quotation_Header TQH ON TH.e_id = TQH.e_id
INNER JOIN Tender_Quotation_Type TQT ON TQH.tqh_id = TQT.tqh_id
INNER JOIN Tender_Quotation_Detail TQD ON TQT.tqt_id = TQD.tqt_id
INNER JOIN EVPM.DBO.vwsupplier S ON TQH.supplier_id = S.supplierid
INNER JOIN Tender_Item TI ON TI.item_id = TQD.item_id
INNER JOIN Tender_Proposal TP ON tp.e_id = th.e_id
WHERE (TH.act_id = 46)
  AND (ISNULL(TQD.is_copied, '0') = '0')
  AND (tqd.tqd_result = 1
       OR tqh.resultpackage = 1)
  AND (b_number LIKE 'SM%'
       OR b_number_ref LIKE 'SM%')
  AND b_number NOT IN
    (SELECT eproc_id
     FROM newkimap.dbo.exp_mts_tender_main) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:09:56.933

如果不了解您的数据库（表、索引），就很难为您提供帮助。你应该考虑：

*   将“不在”更改为“不存在” [http://sqlinthewild.co.za/index.php/2010/02/18/not-exists-vs-not-in/](http://sqlinthewild.co.za/index.php/2010/02/18/not-exists-vs-not-in/)
*   你应该在列 b_number 和 _b_number_ref 上有索引

马辛·帕兹吉尔

# android - BitmapFactory.decodeResource() 没有从 drawable 中获取我的图像

> ID：15220767
> 
> 赞同：2
> 
> 时间：2013-03-05T09:57:03.463
> 
> 标签：android, bitmapfactory

`image`我想像这样进入`bitmap`：

```
bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.bug); 
```

但这向我显示了错误`R.drawable.bug`，`bug can not be resolve or is not a field`请告诉我在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:01:31.740

试试这个：

```
InputStream is = getResources().openRawResource(R.drawable.bug);
Bitmap pisc = BitmapFactory.decodeStream(new BufferedInputStream(is)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:01:15.033

只需将您的 Drawable 复制到项目中的所有可绘制文件夹中即可。像这样 **drawable-hdpi drawable-ldpi drawable-mdpi**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:01:25.440

文件夹中是否有`bug`图形文件`drawable`？您是否尝试过清理您的项目以便`R.drawable`正确生成？

# android - 使用 OpenCV 复制 APK 文件

> ID：15220771
> 
> 赞同：3
> 
> 时间：2013-03-05T09:57:23.490
> 
> 标签：android, opencv, build, duplicates

我有一个`App`引用 Android 库的 Android 应用程序`AndLib`。它们都有一些与 OpenCV 本机库链接的本机代码。

起初，我编译了 OpenCV 的本地代码，`App`并`AndLib`通过静态链接与 OpenCV 进行了编译，但由于 OpenCV 库出现了两次，因此生成了一个巨大的 .apk 文件。

然后我尝试通过将 OpenCV 链接为共享库来编译本机代码。在 的`libs`文件夹中`App`，我有两个 .so 库：`libapp.so`和`libopencv-java.so`. 在 的`libs`文件夹中`AndLib`，我有两个 .so 库：`libandlib.so`和`libopencv-java.so`.

当我尝试构建 .apk 时`App`，我收到此错误：

```
Found duplicate file for APK: lib/armeabi-v7a/libopencv-java.so
Origin 1: C:\workspace\android_body\App\libs\armeabi-v7a\libopencv-java.so
Origin 2: C:\workspace\android_body\AndLib\libs\armeabi-v7a\libopencv-java.so 
```

有什么办法可以解决我的问题吗？

如果还不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:47:48.163

Did you try to just compile the AndLib first and only then compile your App project?

# c++ - c ++在节点树中使用'this'

> ID：15220772
> 
> 赞同：0
> 
> 时间：2013-03-05T09:57:24.567
> 
> 标签：c++, tree, nodes

我在main中做根。然后在另一个 .cpp 我做类似的事情

```
TreeNode * current = this; 
```

那么如果我这样做

```
current = current->right; 
```

这样我就可以下树了。它会改变“this”的含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:09:32.163

> 它会改变“this”的含义吗？

**没有**。

`current`不是 的别名`this`，并且无论如何您都无法更改`this`指针。

这就是你正在做的事情。假设`this`指向某个对象，然后调用它`OBJECT1`。一开始，你有这种情况：

```
 [ this --------> OBJECT1 ] (this points to OBJECT1) 
```

在你这样做之后

```
 TreeNode * current = this; 
```

你有这种情况：

```
 [ this --------> OBJECT1 ] (this points to OBJECT1)
 [ current -----> OBJECT1 ] (current also points to OBJECT1) 
```

在你这样做之后...

```
 current = current->right; 
```

你有这种情况：

```
 [ this --------> OBJECT1 ] (this still points to OBJECT1)
 [ current -----> OBJECT2 ] (current now points to a different object) 
```

`OBJECT2`指向的对象在哪里或`OBJECT1->right`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:58:41.637

不，您正在*复制*`this`to的值`current`。改变`current`不会影响`this`。`this`无论如何，您都无法更改 in 的值。

# large-files - 我正在尝试通过 pendrive 直接将一个大型二进制文件作为 FPGA 的输入

> ID：15220773
> 
> 赞同：0
> 
> 时间：2013-03-05T09:57:28.763
> 
> 标签：large-files, fpga, usb-drive

该文件是一个大小约为 10 GB 的二进制文件，我不想通过计算机读取数据来发送数据。有没有办法做到这一点。我还没有购买 FPGA 板。那么哪个董事会更适合做这样的任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:26:56.283

一个带有 USB 主机接口 phy 和一个微处理器，该微处理器运行带有适当 USB 驱动程序的嵌入式操作系统。

这将是一个很好的起点。 [http://www.zedboard.org/content/key-features](http://www.zedboard.org/content/key-features)

当然，这也取决于您要将数据发送到哪里以及您需要什么接口。

# c# - TCP 连接只能以一种方式工作

> ID：15220781
> 
> 赞同：1
> 
> 时间：2013-03-05T09:57:45.117
> 
> 标签：c#, tcp

我正在构建一个客户端-服务器应用程序，它应该在文件出现后立即将文件从一台 PC（服务器）发送到另一台 PC（客户端）。如果我将客户端连接到正在运行的服务器，我会收到一个错误，因为服务器无法访问。但是，如果我在应该是服务器的 PC 上运行客户端，反之亦然，它会按预期工作。如果我在同一台 PC 上同时运行服务器和客户端，它也可以工作，所以我认为问题不在代码中。

是否需要启用 C# 或 Windows 中的某种配置（我在两台 PC 上运行 64 位 Windows 7）（目前仅在其中一台 PC 上启用）？或者端口可能存在某种问题？我为服务器使用固定端口，为客户端使用随机端口。

任何帮助将不胜感激，在此先感谢:)

# php - 使用 PHP 中的密钥加密和解密 php 文件

> ID：15220786
> 
> 赞同：2
> 
> 时间：2013-03-05T09:58:11.450
> 
> 标签：php

我需要加密我的 php 文件以防止查看其他人。我也是唯一解密它的人。php 中是否有任何方法可以使用某些密钥解密和加密文件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:00:30.153

不幸的是，没有办法做到这一点。我猜您仍然希望该文件在服务器上可以执行？在这种情况下，服务器至少需要能够解密它，因此无论如何都要拥有密钥。因此，任何能够访问服务器的人仍然可以解密该文件。

您可以像任何其他文件一样对其进行加密，但这会使其无法用作 PHP 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:00:45.663

正常的方法是使用编码器，ionCube 是最常见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:04:33.967

你可以试试 Zend Guard。[http://www.zend.com/en/products/guard/](http://www.zend.com/en/products/guard/)

php商业加密软件。

# php - 如何访问私有变量？

> ID：15220790
> 
> 赞同：0
> 
> 时间：2013-03-05T09:58:23.947
> 
> 标签：php, abstract-class, visibility, private-members

这是我的课

```
abstract class DataStore_Adapter {

    private $id;

    abstract function update();
    abstract function insert();

    function __construct() {
        $this-> id = 3;
    }
    function save() {
        if(! is_null($this->id)) {
            $this->update();
        } else {
            $this->insert();
        }
    }
}

class VS_DataStroe_Adapter extends DataStore_Adapter {

    function __construct() {
        parent:: save();
    }
    function update() {
        echo "successfully updated!";
    }
    function insert() {
        echo "successfully inserted!";
    }
}

$vs_data = new VS_DataStroe_Adapter(); 
```

运行此代码我得到结果

> 插入成功！

如果我删除

> $this-> id = 3;

从 DataStore_Adapter 的构造方法并将其放在函数 save() 中，它给了我结果；

> 成功更新！

我需要澄清这种行为。由于我已将 $id 声明为私有变量，因此我知道它只能通过 DataStore_Adapter 类访问。但是当我在 save() 方法中初始化它时，子类可以访问它的值。这怎么可能？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:03:11.963

私有属性只能在声明它的类的范围内访问。Save() 在父类（声明 ID）中定义，因此它可以访问它。

换句话说`private DataStore_Adapter::$id`，可以访问，`DataStore_Adapter::save()`因为两者都定义在同一个类中。如果您想通过继承共享属性或方法，您可以使用`protected`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:28:47.237

您可以在此处阅读有关私有关键字和其他关键字的更多信息[。](http://www.dreamsoftworks.blogspot.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:09:41.313

当您调用 parent:: save() 时，您正在调用 DataStore_Adapter 的 save() 方法，因此私有属性 $id 对 save() 是可见的，因为两者属于同一类

# javascript - dojotoolkit 中的 DOM 更新稍有延迟

> ID：15220794
> 
> 赞同：0
> 
> 时间：2013-03-05T09:58:34.877
> 
> 标签：javascript, dom, dojo, dojox.mobile

我有一个 dojox.mobile.IconMenu，上面有 6 个 dojox.mobile.IconMenuItems。当我按下 IconMenuItems 时，按钮应该被按下。我通过在正确的时间简单地切换按钮的图像来实现这种行为。

现在出现的问题如下：

在桌面 (Chrome) 上：当我单击按钮时，视图变化如此之快，以至于您看不到新的、按下的图形！我必须按住按钮大约半秒钟，然后释放它，直到按钮显示新图像。

在 Android/iOS 设备上（测试：Chrome、Firefox、Opera、Skyfire、Board Browser、Dolphin、Safari）：按钮更改图像但我看不到更改，因为图形更改太慢。

这是代码（html）

```
<ul data-dojo-type="dojox.mobile.IconMenu" id="portalMenu" style="border: none; outline: none; background-image: url('../deliverables_800x480/backgrounds/img_bg_portal.gif'); position: absolute; z-index: 900; background-repeat: no-repeat; background-size: cover; height: 100%; width: 100%; top: 26px;">
<li label="IconMenuItem" data-dojo-type="dojox.mobile.IconMenuItem" id="portalButton1" icon="../deliverables_800x480/buttons/portal/btn_portal_freetext_big_normal.gif" style="border-top-color: transparent; border-right-color: transparent; border-bottom-color: transparent; border-left-color: transparent; line-height: 0px; text-align: center;" moveTo="null" onmousedown="toggleImg1()" onmousdown="toggleView1()"></li> 
```

> [此处的其他按钮]

这是我调用的函数（javascript）：

onmousedown="toggleImg1()

```
// press button1
// press button1
function toggleImg1(){  
    portalButton1.set("icon", "../deliverables_800x480/buttons/portal/btn_portal_freetext_big_armed.gif");
}
function toggleView1() {   
    portalButton1.set("moveTo", "messaging");
    portalButton1.set("selected", true);
    portalButton1.set("icon", "../deliverables_800x480/buttons/portal/btn_portal_freetext_big_normal.gif");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:06:42.073

首先，您的标记中没有错误吗？我看到 onmousedown 然后 onmousdown，不应该是 onmousedown/onmouseup 吗？

但是我认为您应该使用 dojo/touch 并为此收听 touch.press/release 而不是 mousedown/up。这将确保您聆听触摸或鼠标的声音，具体取决于设备。

或者，也许您可​​以观察项目的“选中”状态，并在项目被选中时更改图标？就像是：

```
item.watch("selected", function(){
    this.set("icon", this.selected?"selected.png":"deselected.png");
}); 
```

然后，要让项目保持选中状态，您可以设置 _selEndMethod="timer"。如果需要，您还可以更改 _duration（默认 800，对您来说应该短一点？）。

# jquery - 在客户端动态更改 customvalidator 消息

> ID：15220797
> 
> 赞同：0
> 
> 时间：2013-03-05T09:58:41.267
> 
> 标签：jquery, asp.net, validation

我想通过 ClientValidationFunction 在客户端动态更改 customvalidator 消息。在java脚本中我有：

```
function valnationalid(source, arguments) {     
    if (arguments.Value == ""){         
        source.errormessage = "custom message here";
        arguments.IsValid = false;
    } else if (arguments.Value == "Something else"){
        source.errormessage = "another custom message here";
        arguments.IsValid = false;
    }
} 
```

和身体：

```
<input runat="server" id="txtnationalid" maxLength="10" name="txtnationalid" class='person ltr glow-onfocus customerCode required number' dir="ltr" />
<asp:CustomValidator ID="valnationalid1" runat="server" EnableClientScript="true" ClientValidationFunction="valnationalid"  ValidateEmptyText="True" Display="Dynamic" ControlToValidate="txtnationalid"> </asp:CustomValidator> 
```

但是我的页面中没有显示任何消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:47:11.347

以下对我有用：

代替

```
source.errormessage = "custom message here"; 
```

和

```
source.innerHTML = "custom message here"; 
```

# javascript - Chrome 中的所见即所得

> ID：15220805
> 
> 赞同：0
> 
> 时间：2013-03-05T09:58:58.483
> 
> 标签：javascript, jquery, google-chrome, wysiwyg

我的 WYSIWYG 编辑器有问题，它在 FF 中有效，但在 Chrome 中无效 :(

这是代码：

```
 $.fn.textEdit = function(){
        return this.each(function(){
            var $this = $(this), $div = $('<div class="textEdit"></div>');

                var $buttonObserve = function(cmd,b,val){

                    document.execCommand('styleWithCSS', 0, false);
                    document.execCommand(cmd, b||false, val||null);

                };
                $this.before($div);
                $this.attr({contentEditable:true})

                $($div).append(
                        $('<div/>').addClass('textEditBold').text('F').attr('title','Fett')
                            .click(function(){ $buttonObserve('bold') })
                    ).append(
                        $('<div/>').addClass('textEditItalics').text('K').attr('title','Kursiv')
                            .click(function(){ $buttonObserve('italic') })
                    ).append(
                        $('<div/>').addClass('textEditUnderline transparent').text('_').attr('title','Unterstrich').css('background', 'url(data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7) no-repeat 0 1px')
                            .click(function(){ $buttonObserve('underline') })
                    ).append(
                        $('<div/>').addClass('delete').text('Deactivate-Edit').attr('title','Stop-Edit')
                            .click(function(){  $this.parents('#page2').find('.editable').removeClass('editable').removeAttr('contentEditable');
                                                $this.parents('#page2').find('.textEdit').remove('.textEdit'); })
                );

        });

}; 
```

如果用户单击 p、div 元素等，此功能将被激活，它将创建 4 个按钮，用于制作文本：粗体、斜体、下划线、或删除按钮。

问题是：如果我选择文本并按下按钮，什么也没有发生，只有删除按钮有效。

我认为 Chrome 不接受我选择的文本。

我希望你们能帮助我！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:21:42.760

看起来`execCommand()`支持已从 Webkit 中删除。 [QuirksMode](http://www.quirksmode.org/dom/execCommand.html)甚至没有在支持矩阵中列出后来的浏览器。

[https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-extensions/QytGD5gCREY](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-extensions/QytGD5gCREY)

要获取所选文本，您可以按照此方法

[如何在 contenteditable 元素中用 html 替换选定的文本？](https://stackoverflow.com/questions/6251937/how-to-get-selecteduser-highlighted-text-in-contenteditable-element-and-replac)

# asp.net - 我的 asp.net 网站已停止给我控制未找到错误

> ID：15220807
> 
> 赞同：0
> 
> 时间：2013-03-05T09:59:00.670
> 
> 标签：asp.net

我在一个asp.net网站工作，如果我从我的页面中删除任何控件并且它在javascript中有类似这样的引用

```
$('#<%= txtName.ClientID %>') // just an example of use 
```

它曾经给我一个错误，比如“txtName 不存在”，显示问题所在的确切行，这有助于我找出原因并轻松纠正它。

但是从过去的很多天开始，它已经停止给我上述类型的错误，但它只是显示

```
XML parsing error: no element found
Location: 
Line number 1: ... 
```

这使得很难找到问题。知道为什么它停止了这种行为吗？

**编辑**

今天我刚刚在 <%@ Page 指令中错误地添加了两个 Title 元素，它开始给我 XML 解析错误，之前它曾经给我类似“Title cannot be defined multiple times”之类的错误！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:03:38.933

如果控件已被 javascript 客户端删除，则 $('<%= txtName.ClientID %>') 不会返回错误，它只会返回一个空数组。jQuery 的语法也是 $('#<%= txtName.ClientID %>') 。查看在 firebug 或类似内容中呈现给浏览器的内容。

# iphone - 如何将表情符号和文本一起保存到 sqlite 数据库中

> ID：15220809
> 
> 赞同：2
> 
> 时间：2013-03-05T09:59:00.883
> 
> 标签：iphone, objective-c, ios5, sqlite, uitextview

我试图将带有文本的表情符号保存到 sqlite 数据库（文本类型字段）中，并在完成后将它们取回。但我面临着将它们取回的问题。它在中间显示了一些特殊的字符，例如**你好，你好吗**

现在我的问题是如何在 UITextView 中以正确的格式检索并显示它，即表情符号+文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:04:47.337

你永远不会保存表情符号！！！

您可以保存图像，也可以将其保存为 unicode 值，例如“\U0001F621”。

如果您保存 unicode 值，那么您可以轻松地在应用程序中读取和显示它们。

[在这里](https://stackoverflow.com/questions/15171847/set-unicode-character-width-in-ios/15172015#15172015)查看我的答案

# ruby-on-rails - Rails active_admin：如何限制 admin_user 更改其他 admin_users 的密码？

> ID：15220812
> 
> 赞同：1
> 
> 时间：2013-03-05T09:59:08.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, activeadmin

我的 active_admin 上有以下内容，这只是 admin_user 模型的默认设置。这允许所有 admin_user 更改所有其他 admin_user 的密码。有谁知道我可以如何限制 admin_users 更改其他人的密码？

```
ActiveAdmin.register AdminUser do     
  index do                            
    column :email                     
    column :current_sign_in_at        
    column :last_sign_in_at           
    column :sign_in_count             
    default_actions                   
  end

  filter :email                       

  form do |f|                         
    f.inputs "Admin Details" do       
      f.input :email                  
      f.input :password               
      f.input :password_confirmation  
    end                               
    f.actions                         
  end                                 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:21:58.090

我不确定。不过可以试一试

```
ActiveAdmin.register AdminUser do

  actions :all, :except => [:new]

  controller do
    def action_methods
      if current_admin_user.role?(AdminUser::ADMIN_ROLE)
        super
      else
        super - ['edit', 'destroy']
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:06:20.380

另一种方法可能是从该表单中删除密码和密码确认字段并创建“更改密码”操作，甚至可能是“我的帐户”页面，您可以在其中更改密码。

第三种方法可能是仅在您编辑“自己”时显示密码字段，如下所示：

```
ActiveAdmin.register AdminUser do     
  index do                            
    column :email                     
    column :current_sign_in_at        
    column :last_sign_in_at           
    column :sign_in_count             
    default_actions                   
  end

  filter :email                       

  form do |f|                         
    f.inputs "Admin Details" do       
      f.input :email
      if(f.object == current_admin_user)
        f.input :password               
        f.input :password_confirmation
      end
    end                               
    f.actions                         
  end                                 
end 
```

未经测试，但它应该工作。

**更新** 如果您希望某个特定用户能够像您在问题评论中建议的那样更新所有其他用户的密码，您可以考虑这样做：

```
form do |f|                         
  f.inputs "Admin Details" do       
    f.input :email
    if(current_admin_user.is_super_admin?)
      f.input :password               
      f.input :password_confirmation
    end
  end                               
  f.actions                         
end 
```

`is_super_admin?`可以引用布尔值，`is_super_admin`也可以是模型中的方法，具体取决于`role`字段：

```
#  role                 :string(255)

class AdminUser < ActiveRecord::Base
  ROLES = ['normal', 'super']
  SUPER_ROLE = 'super'

  def is_super_admin?
    role == SUPER_ROLE
  end
end 
```

**更新 2** 您确实还希望防止用户更改帖子参数以更改其他人的密码。同样，有**选项 1**，在控制器中进行。我对 ActiveAdmin 的了解很浅，所以也许有更好的方法，但这应该可行：

```
ActiveAdmin.register AdminUser do
  controller do
    def create
      params.delete(:password)
      params.delete(:password_confirmation)
      super
    end
  end
end 
```

另一个（更优雅的）解决方案是确保您的 AdminUsers 的密码不能通过批量分配来更改。这种逻辑将进入模型：

```
class AdminUser < ActiveRecord::Base
  attr_accessible :login, :name, :email # .. and everything else you need to be able to edit through a normal form, but NOT password and password_confirmation
end 
```

然后，您可能希望创建自己的`change_password`方法，供个人用户更改密码。在保存该表单的控制器操作中，您将执行以下操作：

```
def submit_change_password
  @admin_user = current_admin_user
  @admin_user.password = params[:password]
  @admin_user.password_confirmation = params[:password_confirmation]
  if @admin_user.save
    ..
  else
    ..
  end
end 
```

这样他们就只能更改自己的密码。

# javascript - 维护用于在客户端映射服务器端抛出的 id 的代码的正确方法是什么？

> ID：15220817
> 
> 赞同：0
> 
> 时间：2013-03-05T09:59:20.010
> 
> 标签：javascript, jquery, titanium-mobile

我正在为 iPad 开发一个带有 javascript 的钛移动应用程序。客户端上的数据是从基于 REST 的服务请求的。结果 json 提供了不同类型的状态 ID，目前我通过将它们映射到客户端的数组来维护它们，以在前端显示它们，这在我的文件中产生了大量垃圾。我正在考虑通过将它们变成单独的 js 文件中的枚举来单独维护这些数组，然后要求它们。应该采取什么方法来实现相同的目标？

例如：当 json 将 ids 发送为 0 时，我在客户端文件上维护一个数组，如 var status = ['Approved-Procurable', 'Submitted to Partner', 'Full Receipt'] 并将它们显示为 Approved Procurable 作为状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:16:01.343

我更喜欢由您的 rest api 提供此数据的解决方案。如果这不可能，您应该创建一个单独的 JS 文件，其中包含所有请求逻辑 - 可能称为 RequestProvider。

在那里，您可以拨打所有请求电话并准备他们的答案。在您的“控制器”中，您只需调用`RequestProvider.doRequest(params, callbackSuccess, callbackError)`.

```
function RequestProvider(){}

RequestProvider.prototype.doRequest = function(params, success, error, scope) {
 var client = Ti.Network.createHTTPClient({
     // function called when the response data is available
     onload : function(e) {
         Ti.API.info("Received text: " + this.responseText);
         // prepare & modify answer
         var answer = JSON.parse(this.responseText);
         //modify array
         var modifiedAnswer = // replace parts in original answer;
         success.call(scope || this, modifiedAnswer);
     },
     // function called when an error occurs, including a timeout
     onerror : function(e) {
         Ti.API.debug(e.error);
         error.call(scope || this, errormessage);
     },
     timeout : 5000  // in milliseconds
   });
   // Prepare the connection.
   client.open("GET", url);
   // Send the request.
   client.send(); 
 }
 RequestProvider = new RequestProvider();
 module.exports = RequestProvider; 
```

主要概念是只做一次所有的请求逻辑！

# java - 解析 SuperCsv/beanreader 在第一行遇到异常并返回 NULL

> ID：15220818
> 
> 赞同：2
> 
> 时间：2013-03-05T09:59:20.213
> 
> 标签：java, supercsv

我尝试使用 Supercsv 解析 csv 文件。我使用一些“捕获异常”来消除结构或数据错误的行。

所有行都通过 do / while 循环处理。但是如果第一行导致异常（正则表达式...），则 read() 方法的返回值为 null，这会导致 while 循环停止。

我怎样才能通过保持坏线的消除来避免这种情况？

这是代码：

```
CsvPreference LSP_PREFERENCE = new CsvPreference.Builder(' ', ';', "\n").build();
beanReader = new CsvBeanReader(new InputStreamReader(new FileInputStream(fileToTreat), "ISO-8859-1"), LSP_PREFERENCE);
            CsvPreference LSP_PREFERENCE = new CsvPreference.Builder(' ', ';', "\n").build();
            beanReader = new CsvBeanReader(new InputStreamReader(new FileInputStream(fileToTreat), "ISO-8859-1"), LSP_PREFERENCE);
treatedOk = true;

ucdr = null;

do {
    try {
         ucdr = beanReader.read(ConvergeDataRow.class, headers, processors);
         if (ucdr != null) {
           rdata.add(ucdr);   // contains list of row data.
         }
     } catch (SuperCsvConstraintViolationException ex) {
          logger.log(Level.SEVERE, "NON CORRECT VALUE ENCOUNTERD ON ROW "+beanReader.getRowNumber(), ex);
          treatedOk = false;

     } catch (SuperCsvCellProcessorException ex){
         logger.log(Level.SEVERE, "PARSER EXCEPTION ON ROW "+beanReader.getRowNumber(), ex);
         treatedOk = false;
     } catch (org.supercsv.exception.SuperCsvException ex){
          logger.log(Level.SEVERE, "ERROR ON ROW "+beanReader.getRowNumber(), ex);
                    treatedOk = false;
     }

} while (ucdr != null);treatedOk = true; 
```

一个厄运的解决方案是强制 ucdr 为 null 的其他值。但肯定有更好的方法...

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:13:32.560

问题是由于 ucdr（已解析行的容器）在文件末尾或文件中的错误行可能为 null 的事实引起的。由于您的代码处理由坏行引起的所有异常，因此无法知道 ucdr 是否为空，因为已到达文件结尾或是否遇到坏行。我建议为循环使用另一种条件，仅当 ucdr 为空时才为假，因为到达了文件的末尾，如下所示：

```
boolean continueLooping = true;
do {
    try {
         ucdr = beanReader.read(ConvergeDataRow.class, headers, processors);
         if (ucdr != null) {
           rdata.add(ucdr);   // contains list of row data.
         }
         // this line will be skipped when an exception is thrown during 
         // parsing, but not if the line is successfully handled or on end of
         // file .
         continueLooping = ucdr != null;
     } catch (SuperCsvConstraintViolationException ex) {
          logger.log(Level.SEVERE, "NON CORRECT VALUE ENCOUNTERD ON ROW "+beanReader.getRowNumber(), ex);
          treatedOk = false;

     } catch (SuperCsvCellProcessorException ex){
         logger.log(Level.SEVERE, "PARSER EXCEPTION ON ROW "+beanReader.getRowNumber(), ex);
         treatedOk = false;
     } catch (org.supercsv.exception.SuperCsvException ex){
          logger.log(Level.SEVERE, "ERROR ON ROW "+beanReader.getRowNumber(), ex);
                    treatedOk = false;
     }

} while (continueLooping);
treatedOk = true; 
```

注意：`treatedOk`在循环外设置为 true 看起来有点可疑......

# tsql - 指定约束以防止两列中的任何一列在其他列不为空时为空？

> ID：15220819
> 
> 赞同：0
> 
> 时间：2013-03-05T09:59:21.027
> 
> 标签：tsql, constraints

假设我想在表中存储一个间隔，其中间隔可以指定为单个日期或范围，因此，字段将是：

```
| id | since | until | at_date | 
```

现在，我希望情况像`since is null and until is not null`或`since is not null and until is null`永远不会发生，但两者`since is null and until is null`都`since is not null and until is not null`很好（如果指定了第一个就很好`at_date`）。

也许“合并”`until`并`since`进入一列是有意义的，但在我的情况下，有时只选择一个或另一个是有意义的，所以我认为将它们分开是可以的。

编辑：

```
create table menu_availability
(menu_id int not null,
 daily_serving_start time null,
 daily_serving_end time null,
 weekly_service_off tinyint null,
 one_time_service_off date null,
 constraint ch_valid_week_day
    check ((weekly_service_off is null) 
        or (weekly_service_off <= 6 and weekly_service_off >= 0)),
 constraint ch_non_empty_schedule
    check ((daily_serving_start is not null and daily_serving_end is not null)
        or (daily_serving_start is null and daily_serving_end is null)),
 constraint ch_either_week_or_time_set
    check (daily_serving_start is not null 
        or weekly_service_off is not null 
        or one_time_service_off is not null),
 constraint ch_only_week_or_one_time
    check ((weekly_service_off is null and one_time_service_off is not null)
        or (weekly_service_off is not null and one_time_service_off is null))) 
```

这是我到目前为止所拥有的......但它真的很乱......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:09:26.820

我认为您应该删除`at_date`并仅在所有间隔中使用`since`and `until`。

`until`不包含在内，因此将`at_date`“2013-03-01”的值存储为

```
since      until
2013-03-01 2013-03-02 
```

**更新：**

您可以使用不允许空值的 case 语句创建持久计算位列。

```
create table YourTable
(
  id int identity primary key,
  since datetime,
  until datetime,
  at_date datetime,
  sn as case when since is null and until is null or
                  since is not null and until is not null then cast(1 as bit)
        end persisted not null
) 
```

或带有检查约束

```
create table T
(
  id int identity primary key,
  since datetime,
  until datetime,
  at_date datetime,
  constraint ch_sn check(since is null and until is null or
                         since is not null and until is not null)
) 
```

# node.js - mongodb 客户端 + Node.js

> ID：15220821
> 
> 赞同：3
> 
> 时间：2013-03-05T09:59:21.773
> 
> 标签：node.js, mongodb

[我遵循了（ http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html)）中的“MongoDB 基本介绍”

我从源安装**node-v0.8.21**到这个目录“ **/home/myuser/lib/node/** ”（我不是机器上的 root）

我为 npm 设置代理并启动此命令来安装“mongodb”驱动程序：“ `./npm install mongodb`”该命令成功返回并在“ **/home/myuser/lib/node/bin/node_modules/** ”中生成了一个 mongodb 目录。

我现在不知道如何使用驱动程序..我试过这个：

```
// Retrieve
var MongoClient = require('mongodb').MongoClient;

// Connect to the db
MongoClient.connect("mongodb://localhost:27017/exampleDb", function(err, db) {
if(!err) {
 console.log("We are connected");
}
}); 
```

但我总是有这个错误代码：“ **Uncaught ReferenceError: require is not defined** ”

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:58:22.883

您正在尝试在浏览器上运行服务器 JavaScript 代码。JavaScript 不再是客户端脚本语言。`nodeJS`使用 JavaScript 运行服务器框架，并且日益流行。

> 我现在不知道如何使用驱动程序..我试过这个：

不熟悉的人`nodeJS`会犯这个错误。您必须了解，这`nodeJS`就像任何其他提供 HTML 页面的服务器一样。在服务器上，您有执行的服务器端脚本和服务器提供的客户端内容。只有 JavaScript 在`nodeJS`. 在学习使用包`node`之前，您应该学习如何使用。`mongodb`以下是一些链接：

1.  [如何开始使用 Node.js](https://stackoverflow.com/questions/2353818/how-do-i-get-started-with-node-js)
2.  [什么是 Node.js？](https://stackoverflow.com/questions/1884724/what-is-node-js)

测试文件`nodeJS`

1.  您创建一个文件说`app.js`并将您提供的代码片段放入其中。`app.js`应该立即在您所做的文件夹中`./npm install mongodb`
2.  然后从同一位置运行应用程序，方法是`node app.js`

# php - 我的 jquery Ajax 方法每次都进入 else 部分

> ID：15220822
> 
> 赞同：0
> 
> 时间：2013-03-05T09:59:21.740
> 
> 标签：php, jquery, serialization, phpexcel

我的`jQuery`方法——

```
jQuery("#upload_button").click(function(){
    var exceldata = jQuery("#upload_button").serialize();
    var url = "module/controller/contrlrmethod/exceldata/" + exceldata;
    if( exceldata != "" )
    {
        jQuery.ajax({
            url: url,
            type: 'post',
            success: function(data)
            {
                alert(data);
            }
        })
    }
    else
    {
        alert("I am in else");
    }
}); 
```

控制器方法 -

```
public function contrlrmethodAction()
{
    //Get All Parameter data
    $params = $this->_getAllParams();
    echo "<pre>";print_r($params);die;
} 
```

我正在通过此按钮上传 Excel 表`upload_button`。但每次它进入其他部分时，无论我是否上传excel。让我知道我做错了什么。我正在使用 PHPExcel 库来进一步处理数据，但它总是在其他部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T10:02:05.527

不确定，但看起来你正在序列化按钮..

```
var exceldata = jQuery("#upload_button").serialize();
                        --^^^^^^----here 
```

它应该是您的表单 ID。

```
var exceldata = jQuery("#formID").serialize(); 
```

以及其他一些错误...因为您使用的是 ajax post ..您可以通过`data`选项发送数据，无需在 url 中传递序列化数据。

```
 var url = "module/controller/contrlrmethod/exceldata/";
 jQuery.ajax({
        url: url,
        type: 'post',
        data: exceldata,  //<--here
        success: function(data)
        {
            alert(data);
        }
    }) 
```

**注意：**如果您尝试使用 ajax post 上传文件..那么这是不可能的，您必须使用 iframe ...或使用其他一些 ajax 文件上传插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:12:33.627

您不能使用 AJAX 上传文件。您必须在表单上进行旧式 POST。

另一方面，如果您想使用 ajax 发送表单，则需要序列化整个表单，而不仅仅是提交按钮。

```
var serializedForm = $("form").serialize();
jQuery.ajax({
    url: 'module/controller/contrlrmethod',
        type: 'POST',
        data: serializedForm,
        success: function(data)
        {
            alert(data);
        }
    }); 
```

但正如我所说，这段代码不会上传文件。它只是修复您的表单帖子。

# magento - Magento 如何获得活跃的商店名称

> ID：15220827
> 
> 赞同：0
> 
> 时间：2013-03-05T09:59:38.593
> 
> 标签：magento

我需要知道如何获取活动的 Magento 商店名称。我正在使用它但没有结果：

`Mage::app()->getStore()->getIsActive()->getName();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:05:38.793

```
 /*It displays the current store name*/
        echo Mage::app()->getStore()->getName(); 
```

# sql - SQL 中的用户权限

> ID：15220838
> 
> 赞同：0
> 
> 时间：2013-03-05T10:00:00.933
> 
> 标签：sql, database, vb.net

我正在尝试为用户及其权限创建一个表。我这样做的方式是创建了一个名为 Users 的表，该表具有以下字段：

UserID：每个用户的身份。密码：用户登录时使用的密码。权限：这包括以下内容：

如果给用户的权限是1001，用户可以查看数据（会出现一个屏幕，有两个选项：第一个选项是查看当前项目的数据，第二个选项是查看过去项目的数据） . 如果授予用户的权限是1002，则用户可以插入和查看数据。如果给用户的权限是1003，用户可以查看、插入和更新数据。

通过我在SQL中搜索权限，我发现这种方式不是一个好方法，也就是说它不专业。请大家给我你对我所做的事情的看法吗？如果您认为这不是一个好方法，请给我一些专业的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:36:13.427

我将使用不同的方法。

添加另一个名为 Permissions 的表

```
CREATE TABLE Permissions
(
    PermissionID int Not null
    Description nvarchar(255) NOT NULL
)
CONSTRAINT [PK_permissions] PRIMARY KEY CLUSTERED 
(
[PermissionID] ASC
) ON [PRIMARY] 
```

还有一个叫做 UserPermissions

```
CREATE TABLE UserPermissions
(
    UserID int Not Null
    PermissionID int Not null
)
CONSTRAINT [PK_user_permissions] PRIMARY KEY CLUSTERED 
(
      [UserID]ASC,
[PermissionID] ASC
) ON [PRIMARY] 
```

这样，每个权限都有一个适当的记录，并且您可以通过这样的查询/存储过程获得特定用户允许的权限

```
SELECT u.UserID, p.PermissionID, p.Description 
FROM Users u INNER JOIN UserPermission up on up.UserID = u.UserID
    INNER JOIN Permissions p on up.PermissionID = p.PermissionID 
```

通过这种方式，您的代码可以检查各个权限，而无需使用位掩码来隔离适当的位，并且（虽然您的问题不需要）编写代码来搜索您的数据库以查找具有特定权限的用户将很容易

# python - 调用函数时用 **kwargs 记忆的 Python 似乎不起作用

> ID：15220840
> 
> 赞同：1
> 
> 时间：2013-03-05T10:00:05.720
> 
> 标签：python, memoization

对 GetData1 的调用运行良好并打印：

```
hello 67 8.3 
```

对 GetData2 的调用失败：

```
TypeError: __call__() got an unexpected keyword argument 'arg1' 
```

我的代码是

```
class Memoized(object):
    def __init__(self, func):
        self.func = func
        self.cache = {}

    def __call__(self, *args):
        print args
        with Locker:
            try:
                return self.cache[args]
            except KeyError:
                self.cache[args] = value = self.func(*args)
                return value

def GetData1(arg1, arg2, arg3) :
    print arg1, arg2, arg3

@Memoized
def GetData2(arg1, arg2, arg3) :
    print arg1, arg2, arg3

r = { 'arg1' : 'hello', 'arg2': 67, 'arg3' : 8.3 }
GetData1(**r)
GetData2(**r) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:13:19.510

你的`@Memoized`类替换（包装）`GetData2()`函数并用它自己隐藏它，是一个可调用的，它接受`*args`，但没有`**kwargs`。

一个可能的解决方案可能是

```
def __call__(self, *args, **kwargs):
    print args
    with Locker:
        kwitems = tuple(sorted(kwargs.items()))
        try:
            return self.cache[args, kwitems]
        except KeyError:
            self.cache[args, kwitems] = value = self.func(*args)
            return value 
```

但是如果你用它来调用它，它会对缓存产生影响

```
GetData2(1, 2, 3) 
```

或与

```
GetData2(arg1=1, arg2=2, arg3=3) 
```

或任何其他组合。

调用路径为：

```
 wrapped GetData2()
--> Memoized.__call__()
--> self.func()
--> original GetData2() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:11:55.407

至少在如何将参数传递给`__call__()`. 尝试将`*args`-function`__call()__`中的 更改为`**args`. 这意味着您将传递关键字参数作为字典，而不是传递任意参数元组。

```
class Memoized(object):
    def __init__(self, func):
        self.func = func
        self.cache = {}

    def __call__(self, **args):
        print args
        .... 
```

这将导致如下所示：

```
In [16]: GetData2(**r)
{'arg1': 'hello', 'arg2': 67, 'arg3': 8.3} 
```

但是，这可能会改变您期望缓存例程工作的方式。

# jquery - ASP.NET 与 JQuery 冲突

> ID：15220842
> 
> 赞同：0
> 
> 时间：2013-03-05T10:00:06.093
> 
> 标签：jquery, webforms

我正在使用 JQuery 和 JQuery UI 进行开发，实际上我正在使用 datepicker 小部件。我需要更改语言并为它下载一个语言库（它是意大利语）：

```
jQuery(function($){
  $.datepicker.regional['it'] = {
    /* ... */
  };
  $.datepicker.setDefaults($.datepicker.regional['it']);
}); 
```

在我的代码中，我以这种方式使用它：

```
$(function () {
  $("#TextBoxStartDate").datepicker();
  $("#TextBoxEndDate").datepicker();
}); 
```

这样我就有了这样的错误：

```
Object [object Object] has no method 'datepicker' 
```

我尝试使用相同形式的库来加载日期选择器：

```
jQuery(function($){
  $("#TextBoxStartDate").datepicker();
  $("#TextBoxEndDate").datepicker();
}); 
```

它有效！但我不明白为什么。谁能给我解释一下？

**更新：**我的问题是两个 jQuery 实例之间的冲突。它被加载了两次，因为我将它作为脚本管理器插入到 ASP.NET 应用程序中（我需要它来保持与 ASP.NET Web 表单的客户端控制一起工作）。ASP.NET把它加载到body里面，在view状态下，我把它加载到head里，所以它们自己崩溃了。我将 jquery-ui 和其他使用 jquery 的脚本移到正文中，它解决了问题。只有一件事仍然无法解释：为什么如果我使用它会起作用`jQuery(function($) {`？！？！

# jsf - 无法在 JSF 应用程序中呈现 selectManyCheckbox

> ID：15220851
> 
> 赞同：0
> 
> 时间：2013-03-05T10:00:26.627
> 
> 标签：jsf, jboss, ejb

我的问题是我无法在简单的 Jsf 应用程序中呈现 h:selectManyCheckbox 组件。尽管 h:selectBooleanCheckbox 和 h:commandButton 在输出中正常显示，但 selectManyCheckbox 不会。什么缺少以下代码来渲染组件？

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">

<h:form>
    <h:selectManyCheckbox value="#{hello.customers}"></h:selectManyCheckbox><br />
    <h:selectBooleanCheckbox value="#{hello.foo}" /><br/>
    <h:commandButton action="response.xhtml" value="Click me" />
</h:form>
</html> 
```

豆类：

```
@ManagedBean
@SessionScoped
public class Hello implements Serializable{

private static final long serialVersionUID = 1L;
private List<String> customers;
private boolean foo;

public Hello(){
    customers = new ArrayList<String>();
    customers.add("Cust1");
    customers.add("Cust3");
    customers.add("Cust2");
    customers.add("Cust4");
    //foo = true;
}

public List<String> getCustomers() {
    return customers;
}

public boolean isFoo() {
    return foo;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:26:54.533

检查下面的修改代码

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets">

<h:form>
 <h:selectManyCheckbox value="#{hello.customerSelected}">
    <f:selectItems value="#{hello.customers}" />
</h:selectManyCheckbox><br />
<h:selectBooleanCheckbox value="#{hello.foo}" /><br/>
<h:commandButton action="response.xhtml" value="Click me" />
</h:form>
</html> 
```

在 Bean 类中再添加一个字段来存储检查元素的结果。

```
@ManagedBean
@SessionScoped
public class Hello implements Serializable {

private static final long serialVersionUID = 1L;
public String[] customerSelected;
private List<String> customers;
private boolean foo;

public Hello() {
    customers = new ArrayList<String>();
    customers.add("Cust1");
    customers.add("Cust3");
    customers.add("Cust2");
    customers.add("Cust4");
    // foo = true;
}

public List<String> getCustomers() {
    return customers;
}

public boolean isFoo() {
    return foo;
}

String[] getCustomerSelected() {
    return customerSelected;
}

void setCustomerSelected(String[] customerSelected) {
    this.customerSelected = customerSelected;
}

} 
```

# mysql - 在催化剂中向模型添加多个项目

> ID：15220854
> 
> 赞同：2
> 
> 时间：2013-03-05T10:00:29.070
> 
> 标签：mysql, perl, catalyst

我正在使用 Catalyst 构建一个 Perl 网站。该站点将允许用户上传大型（100,000 行或更多）文本文件进行处理。我需要将每一行转换为 MySQL 数据库中的一行。

我一直在使用 Catalyst 非常好的`DBIC::Schema`模型，如[教程中所述](https://metacpan.org/module/Catalyst%3a%3aManual%3a%3aTutorial%3a:04_BasicCRUD)：

```
$c->model('DB::Book')->create({
        title   => $title,
        rating  => $rating,
    }); 
```

这会在适当的数据库中插入一行。但是，一次插入数万行的速度太慢了。有没有办法使用这个接口在一个查询中插入多行？

从文档中确定应该很简单，但我无法弄清楚`create()`记录在哪里。

我已经尝试了明显的哈希引用数组：

```
my @rows = (
    { foo=>1,bar=>2 },
    { foo=>2,bar=>3 }
);

$c->model('DB::MyTable')->create(@rows); 
```

但是，它不起作用。它只插入第一行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:19:39.113

创建的文档可以在[DBIx::Class::ResultSet docs](http://search.cpan.org/~abraxxa/DBIx-Class-0.08209/lib/DBIx/Class/ResultSet.pm#create)中找到。create 只插入一行，对于批量插入，您可以使用来自同一类[的填充。](http://search.cpan.org/~abraxxa/DBIx-Class-0.08209/lib/DBIx/Class/ResultSet.pm#populate)

# vba - 修改代码使其返回文件和子目录

> ID：15220859
> 
> 赞同：0
> 
> 时间：2013-03-05T10:00:35.613
> 
> 标签：vba, excel

我目前有这个代码：

```
Function GetSubDir(ByVal sPath As String, Optional ByVal sPattern As Variant) As Variant

Dim sDir As String
Dim sDirLocationForText As String

On Error GoTo Err_Clk

If Right$(sPath, 1) <> "\" Then sPath = sPath & "\"

If IsMissing(sPattern) Then
sDir = Dir$(sPath, vbDirectory)
Else
sDir = Dir$(sPath & sPattern, vbDirectory)
End If
Do Until LenB(sDir) = 0

If sDir <> "." And sDir <> ".." Then
sDirLocationForText = sDirLocationForText & ";" & sPath & sDir
End If
sDir = Dir$

Loop

If Left$(sDirLocationForText, 1) = ";" Then sDirLocationForText = 
Right(sDirLocationForText, Len(sDirLocationForText) - 1)
GetSubDir = sDirLocationForText

End Function 
```

目前，当我调用此函数时，它会返回所有文件夹名称，这就是它的用途。但是，是否有一种简单的方法可以对其进行返工以便它也返回文件名？先感谢您。

[我的工作簿](http://wikisend.com/download/806682/FileRename.xlsm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:22:41.470

如果你`vbNormal`在这些行中使用而不是 vbDirectory 你应该得到文件：

```
If IsMissing(sPattern) Then
   sDir = Dir$(sPath, vbDirectory)
Else
   sDir = Dir$(sPath & sPattern, vbDirectory)
End If 
```

# java - 我们如何使用 SortedMap 接口对地图进行排序？

> ID：15220860
> 
> 赞同：1
> 
> 时间：2013-03-05T10:00:37.547
> 
> 标签：java, collections, sortedmap

我有`UnsortedMap<String, CustomObject>.`Here 键，虽然 String 类型存储数值。

虽然有很多方法可以对 Map 进行排序，但我想使用 SortedMap 接口进行排序。

有什么办法可以做到这一点。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:04:50.640

请参阅[SortedMap](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)，特别是**所有已知的实现类**。

在您的情况下，使用[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)可能还不错：

```
SortedMap<String,CustomObject> map = new TreeMap<String,CustomObject>();
map.putAll( yourUnsortedMap ); 
```

附带说明一下，如果您知道您的键是数字的，为什么不让 Map 被擦除`<Integer,CustomObject>`呢？

干杯，

# c++ - 如何将小数点分隔符设置为逗号？

> ID：15220861
> 
> 赞同：10
> 
> 时间：2013-03-05T10:00:39.283
> 
> 标签：c++, formatting, iostream, comma, decimal-point

*我想用pi*而`3,141592`不是pi来读写`3.141592`，因为在许多欧洲国家使用逗号很常见。我怎样才能用`iostream`s 做到这一点？换句话说

```
cout << 3.141592; 
```

应该打印

```
3,141592 
```

到标准输出。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T10:25:23.190

您应该使用`basic_ios::imbue`设置首选语言环境。

看看这里：[http ://www.cplusplus.com/reference/ios/ios_base/imbue/](http://www.cplusplus.com/reference/ios/ios_base/imbue/)

语言环境允许您使用用户首选的方式，因此如果意大利的计算机使用逗号分隔十进制数字，则在美国仍使用点。使用语言环境是一个好习惯。

但是如果你想明确地强制使用逗号，看看这里： [http ://www.cplusplus.com/reference/locale/numpunct/decimal_point/](http://www.cplusplus.com/reference/locale/numpunct/decimal_point/)

这是我刚刚用 g++ 制作的一个小例子，它强制使用 char ',' （将分隔符作为模板参数传递只是为了好玩，不是真的必要）

```
#include <iostream>
#include <locale>

template <class charT, charT sep>
class punct_facet: public std::numpunct<charT> {
protected:
    charT do_decimal_point() const { return sep; }
};

int main(int argc, char **argv) {
    std::cout.imbue(std::locale(std::cout.getloc(), new punct_facet<char, ','>));
    std::cout << "My age is " << 3.1415 << " lightyears.\n";
} 
```

请注意，使用`cout.getloc()`我在当前设置的语言环境中仅覆盖一个方面，也就是说，在 cout 的当前语言环境设置中，我仅更改标点符号的完成方式。

`do_decimal_point``std::numpunct`是您可以重新定义以提供自定义分隔符的虚函数。`numpunct::decimal_point`打印您的号码时将使用此虚拟功能。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-05T10:47:41.463

正如@AkiRoss 所说，您需要使用语言环境。 *一般来说*，在您编写的任何程序中，首先要做的一个操作`main` 应该是将全局语言环境设置为用户的选择，方法是：

```
std::locale::global( std::locale( "" ) ); 
```

在与人类用户交互的*每个*程序中，这应该是系统的。在此之后打开的所有文件都将自动使用正确的语言环境。

或者，您可以明确指定要使用的语言环境：

```
std::locale::global( std::locale( locale_name ) ); 
```

问题在于语言环境名称没有标准。类似的东西`"it_IT.UTF-8"`对应于 Posix 标准，并且在 Internet 上使用；Windows 传统上使用不同的格式（尽管最近的 Windows 似乎也接受这种格式）。

哪个叶子`std::cin`和。这些是在您进入之前打开的，因此必须充满新的语言环境。（要获取当前全局语言环境的副本，请使用 的默认构造函数。）`std::cout``std::cerr``main``std::locale`

最后，如果您要打开任何二进制文件，请注意它们也将包含全局语言环境。哪个可以做代码翻译。在这种情况下，您应该显式地为它们灌输，或者通过将 的方面与全局语言环境的其他方面`std::locale::classic()`合并来创建新的语言环境。（为此具有特殊的功能和构造函数。）`codecvt``std::locale::classic()``std::locale`

# java - 如何通过有效的 SAML 2.0 断言登录？

> ID：15220863
> 
> 赞同：0
> 
> 时间：2013-03-05T10:00:40.153
> 
> 标签：java, android, single-sign-on, saml, shibboleth

我正在开发一个必须与受 SSO Shibboleth 身份验证保护的网站进行强烈交互的 Android 项目。因此，我必须创建一个 Java 类，以便做出有效的 SAML 断言并登录网站。

我用谷歌搜索了很多，我找到了这段代码：[http ://blog.keksrolle.de/2010/07/27/how-to-create-a-valid-saml-2-0-assertion-with-opensaml -for-java.html](http://blog.keksrolle.de/2010/07/27/how-to-create-a-valid-saml-2-0-assertion-with-opensaml-for-java.html) 实际上我发现它不是必需的，因为我能够通过一些 HttpConnection 请求获得 SAML 响应。

我编写的代码能够执行此列表的第 1-5 步：[http](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language#The_SAML_Use_Case) ://en.wikipedia.org/wiki/Security_Assertion_Markup_Language#The_SAML_Use_Case 它所做的最后一件事是获取 SAMLResponse 参数的值，它是 base64 编码的一个元素。然后它向断言消费者服务发出一个 POST 请求。这里的*伪代码*：

```
/* discover the IdP */
connect to the link (/idp/login/) which redirects to the form page (/Authn/UserPassword)
get cookies from the link in order to gain access to the form page
/* end */
/* get SAML response climbing the redirects */
set goTo var to the link of the form page
do {
    send POST data (+ cookies) to the goTo page
    get cookies of the new page and saves them with the others
    set goTo to connection.getHeaderField("Location");
} while (!(responseCode==200));
read the source of the last redirect 
get the specific SAMLResponse
/* end */
send it to website.com/Shibboleth.sso/SAML2/POST
get cookies, session data 
```

但随后服务器的响应是 500 错误代码，或页面错误代码（“出现问题。重试。”）。事实上，我无法访问会话，即使我有一个有效的 SAML 断言并将其发送（编码）到服务器。是会话问题吗？一旦我发出 POST 请求，我认为服务器通过 cookie (JSESSIONID) 和查询字符串 (/home.do;jsessionid=XXXFAEC60AXXX7A7B9XXXAA9EXXXE71X.jvm2c) 重新连接了我，但我认为这可能完全出错了。

*如何通过 Java 登录 SAML 认证网站？*

另一个（边际）问题：我在没有加密（https）的情况下执行了所有请求。从安全性（数据包嗅探等）的角度来看，这可能是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:46:37.860

不幸的是，我无法想象您的确切问题是什么。我只能将您重定向到[Shibboleth 网页](https://wiki.shibboleth.net/confluence/display/SHIB2/UnderstandingShibboleth)，它可以在 shibboleth 工作流程方面对您有所启发。还有SAML 配置[文件的文档（第 14 页 WB-SSO）。](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf)在使用 Single Logout Profile 扩展我的应用程序时，我发现它很有帮助

至于缺少 https ......这是一个重大的安全漏洞。完全使用 Shibbolethh 或 WBSSO 的目的是为资源和可靠的用户信息提供最大程度的保护。首先，您需要与 IdP 进行安全的登录凭据交换。其次，如果有人嗅探签名（甚至可能加密）的断言，idp 将其发送回您的应用程序，他可能无法从中获取用户信息（由于加密），但只要断言，他就可以访问您的安全服务有效（5 分钟、15 分钟甚至几个小时 - 取决于 IdP 配置）

编辑 1：至于示例代码，请查看[Guanxi](https://github.com/guanxi/)（Java 中的 Shibboleth 实现），也许它会对您有所帮助

# symfony - 将 Symfony1.4 迁移到 Symfony 2.2 - 重用什么以及如何重用

> ID：15220865
> 
> 赞同：4
> 
> 时间：2013-03-05T10:00:51.010
> 
> 标签：symfony, symfony1, migration

我即将将旧的 Symfony 1.4 应用程序迁移到 Symfony 2.2。我认为这至少应该有点计划。所以我有几个问题，也许你可以帮助我：

*   那里可能有一个很好的教程（我没有找到）
*   是否可以重用我的旧 schema.yml 和固定装置？
*   我知道，`doctrine:mapping:import`但我认为这不是一个好主意。你对这个命令有很好的经验吗？

迁移旧数据不是很重要，因为应用程序处于非活动状态，可以从头开始。但是我希望在创作中节省一些时间。所以更多的是关于功能迁移。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:08:37.857

依次回答您的问题：

> 那里可能有一个很好的教程（我没有找到）

没有关于在版本之间迁移的文档，因为它实际上是不可能的——这两个框架非常不同——我建议你几乎需要重新开始。[阅读这两个版本之间的差异](http://symfony.com/doc/current/cookbook/symfony1.html)

> 是否可以重用我的旧 schema.yml 和固定装置？

您可以直接从数据库导入您的数据库结构——但不能从 schema.yml 导入。您不能重复使用旧的固定装置 -[虽然固定装置仍然可用](http://symfony.com/doc/2.0/bundles/DoctrineFixturesBundle/index.html)

> 我知道教义：映射：导入，但我认为这不是一个好主意。你对这个命令有很好的经验吗？

当我将应用程序从 1.4 迁移到 2.1/2.2 时，它对我来说效果很好 - 一切都被拾取了对象、属性和关系 - 我建议使用它

然而，我想说 Symfony 的文档（1.4 和 2）非常好 - 书籍和食谱写得很好并且易于阅读。

# c# - GridView 查询不显示

> ID：15220866
> 
> 赞同：2
> 
> 时间：2013-03-05T10:00:51.573
> 
> 标签：c#, asp.net, linq

该页面打开到一个为用户加载的网格以编辑/删除数据。`LoadGrid()`它位于`!IsPostBack`.

```
private void LoadGrid()
{
try
{
    using (var db = new dbDataContext())
    {
        var loadGrid = from t in db.tbl_Providers
                        where t.provider_Deleted == false
                        orderby t.provider_Name.ToLower()
                        select new
                            {
                                t.ProviderId,
                                t.provider_Name,
                            };

        grd_Provider.DataSource = loadGrid;

        grd_Provider.DataBind();
    }
    // Set value of Edit/Delete columns on grid
    // ========================================
    grd_Provider.HeaderRow.Cells[0].Text = "Edit/Update";
    grd_Provider.HeaderRow.Cells[1].Text = "Delete";

}
catch (SystemException ex) 
```

所有这些代码都可以正常工作。我想要做的是显示字母表，用户点击链接，它会重新加载一个新的查询并加载网格。

据我所知，字母表工作正常。我已经加载了代码，`Page_Load`并且 Void 方法在页面下方。

```
for (char asciiValue = 'A'; asciiValue <= 'Z'; asciiValue++)
{
LinkButton lnkCharacter = new LinkButton();
lnkCharacter.ID = "lnkCharacter" + asciiValue;
lbl_Alphabet.Controls.Add(lnkCharacter);
lnkCharacter.CommandArgument = Convert.ToString(asciiValue);
lnkCharacter.Command += lnkCharacter_Command;

lnkCharacter.Text = Convert.ToString(asciiValue) + " ";
}

void lnkCharacter_Command(object sender, CommandEventArgs e)
{
    try
    {
        var lbtn = (LinkButton) lbl_Alphabet.FindControl("lnkCharacter" + e.CommandArgument);
        var id = lbtn.Text;

        using (var db = new dbDataContext())
        {
            var query = from n in db.tbl_Providers
                        where n.provider_Name.StartsWith(id) && n.provider_Deleted == false
                        select new
                            {
                               id = n.ProviderId,
                               name = n.provider_Name
                            };

            grd_Provider.DataSource = query;
            grd_Provider.DataBind();
        }
    }
    catch (SystemException ex)
    {
        var exceptionUtility = new genericExceptions();
        exceptionUtility.genericSystemException(
            ex,
            Server.MachineName,
            Page.TemplateSourceDirectory.Remove(0, 1) +   Page.AppRelativeVirtualPath.Remove(0, 1),
            ConfigurationManager.AppSettings["emailSupport"],
            ConfigurationManager.AppSettings["emailFrom"],
            string.Empty);
    }
} 
```

我已经在 LINQPad 中测试了查询，它可以工作并返回结果。当我在页面上运行它并单步执行`Datasource = query`says时`expanding the results will enumerate the query`。我这样做.. `Enumeration yielded no results` 页面重新加载并且网格永远不会显示？是否与在页面加载时加载的原始网格有关，并且有些冲突？

我已经改变了我的字母表，`IsPostBack`页面重新加载，字母表消失，网格仍然正常加载。字母查询是否需要不同的网格视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:29:40.007

这就是我的样子：

你有这个代码：

```
lnkCharacter.Text = Convert.ToString(asciiValue) + " "; 
```

然后你有这个代码：

```
var lbtn = (LinkButton) lbl_Alphabet.FindControl("lnkCharacter" + e.CommandArgument);
var id = lbtn.Text; 
```

最后，您有以下代码：

```
 var query = from n in db.tbl_Providers
                    where n.provider_Name.StartsWith(id) && n.provider_Deleted == false
                    select new
                        {
                           id = n.ProviderId,
                           name = n.provider_Name
                        }; 
```

当您到达 LINQ 查询时，***id****的值将在末尾有一个空格***。因此，如果您点击“A”链接按钮，您将不会搜索以 开头的所有内容`"A"`，而是搜索以 开头的所有内容`"A "`。**

 **您需要`lbtn.Text`在检索它时进行修剪，或者使用其他方法来确保字母超链接之间的空格，`Literal`例如在添加链接按钮之间添加实例。**

# java - 用户输入 Integer，用这个 Int 调用数组时总是返回 0？

> ID：15220867
> 
> 赞同：1
> 
> 时间：2013-03-05T10:00:51.930
> 
> 标签：java, arrays, input, integer

所以我想让用户输入一个数字；变成一个整数。这应该在数组中查找并调用数字，由于某种原因，int 总是变为 0。我做错了什么？

这是整个代码；前 20 行是问题所在。

```
 import java.util.*;

public class test {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);

        // data tabellen
        int[] dag = {0,31,28,31,30,31,30,31,31,30,31,30,31};

            //input begin       
            int datumbegmax = 0;
            System.out.println("Startdate in month? From 1 to 12.");
            int maandbeg = input.nextInt(); 
            dag[maandbeg] = datumbegmax;
            System.out.println(dag[maandbeg]);
            if (maandbeg < 1 || maandbeg > 12) {
                System.out.println("ERROR, Start over.");   }
            System.out.println("Startdate in days? From 1 to 31.");
            int datumbeg = input.nextInt();
            if (datumbeg < 1 || datumbeg > datumbegmax) {
                System.out.println("ERROR, Start over.");
             }
            int urenbeg = 0 ;
            System.out.println("Starting time in hours? From 0 to 24.");
            urenbeg = input.nextInt();
            if (urenbeg < 0 || urenbeg > 24) {
                System.out.println("ERROR, Start over.");
            }
            int minutenbeg = 0 ; 
            System.out.println("Starting time in minutes? From 0 to 60.");
            minutenbeg = input.nextInt();
            if (minutenbeg < 0 || minutenbeg > 60) {
                System.out.println("ERROR,  Start over.");
            }

            //input eind
            int datumeindmax = 0;
            System.out.println("Einddatum in maand? Van 1 tot 12.");
            int maandeind = dag[input.nextInt()];
            dag[maandeind] = datumeindmax;
            if (maandeind < 1 || maandeind > 12) {
                System.out.println("FOUT, Begin opnieuw.");
            }
            System.out.println("Einddatum in dagen? Van 1 tot 31.");
            int datumeind = input.nextInt();
            if (datumeind < 1 || datumeind > datumeindmax) {
                System.out.println("FOUT, Begin opnieuw.");
            }
            int ureneind;
            System.out.println("Eindtijd in uren? Van 0 tot 24.");
            ureneind = input.nextInt();
            if (ureneind < 0 || ureneind > 24) {
                System.out.println("FOUT, Begin opnieuw.");
            }
            int minuteneind;
            System.out.println("Eindtijd in minuten? Van 0 tot 60.");
            minuteneind = input.nextInt();
            if (minuteneind < 0 || minuteneind > 60) {
                System.out.println("FOUT, Begin opnieuw.");
            }
            int maand = maandeind - maandbeg;
            int datum = datumeind - datumbeg;
            if (datum < 0){datum = datum + dag[maandbeg];}
            int uren = ureneind - urenbeg;
            if (datum > 0) {uren = uren + datum*24;}
            int minuten = minuteneind - minutenbeg;
            if (minuten < 0){
                minuten = minuten + 60;
                uren = uren - 1;
            }
            System.out.println("Total time:  "+datum+" days, "+uren+" hours and "+minuten+" minutes.");

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:13:52.990

你做

```
dag[maandbeg] = datumbegmax; 
```

它用 0 覆盖数组值，因为 int`datumbegmax = 0;`

当然，`System.out.println(dag[maandbeg]);`然后打印 0

# java - 在 RMS 列中写入 byte[]

> ID：15220869
> 
> 赞同：1
> 
> 时间：2013-03-05T10:00:54.403
> 
> 标签：java, java-me, bytearray, rms

是否可以在 RecordStore 的列中写入一个 byte[]？例如，我想写一条记录，它由第一列中的 byte[]、第二列中的 String 和第三列中的 int 组成。

```
public void writeToRms(byte[] byteArray){
    RecordStore recordStore = RecordStore.openRecordStore("My recordStore", true);
    try{
        byte[] outputRecord;
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        DataOutputStream dos = new DataOutputStream(baos);
        // i want to write the parameter **byteArray** here. What method should I use?
        dos.writeUTF("Name");
        dos.writeInt(ctr);
        dos.flush();
        outputRecord = baos.toByteArray();
        recordStore.addRecord(outputRecord, 0, outputRecord.length);
        recordStore.closeRecordStore();
        baos.reset();
        baos.close();
        dos.close();
    }catch(Exception e){}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:55:42.160

当然。写出的基本代码`byte[]`是这样的：

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
    DataOutputStream dos = new DataOutputStream(baos);

    // i want to write **byteArray** here. What method should I use?
    dos.writeShort(byteArray.length);
    dos.write(byteArray);

    dos.writeUTF("Name");
    dos.writeInt(ctr);
    dos.flush();
    outputRecord = baos.toByteArray(); 
```

然后当你再次读回它们时，你必须先读取数组的长度，然后再读取数组。像这样：

```
 RecordStore recordStore = RecordStore.openRecordStore("My recordStore", false);
    RecordEnumeration records = recordStore.enumerateRecords(null, null, true);
    while (records.hasNextElement()) {
       byte[] recordData = records.nextRecord();

       ByteArrayInputStream bais = new ByteArrayInputStream(recordData);
       DataInputStream dis = new DataInputStream(bais);

       short arrayLength = dis.readShort();
       byte[] bytes = new byte[arrayLength];
       dis.read(bytes, 0, arrayLength); 
```

我认为这里有[来自 BlackBerry 的一个很好的 RMS 示例](https://github.com/blackberry/JDE-Samples/tree/master/com/rim/samples/device/rmsdemo)……看看`CD.java`. 我知道这是一个通用的 J2ME 问题，但我不认为 BlackBerry 在这里使用了任何 RIM 特定的库……它只是标准的 J2ME。

**注意：**这种通用技术适用于任何类型的数组，而不仅仅是`byte[]`. 为了将它保存到记录存储中，您首先写出 a `short`，指示数组的长度，然后写出数组本身。当您重新读入它时，您首先读取一个短值，告诉您预期有多少数组元素，然后您读入数组，知道它应该有多长。

这实际上是 RMS 本身使用`readUTF()`和读取和写入字符串的方式`writeUTF()`。它写入一个指示字符串长度的 2 字节`short`值，然后是字符数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:23:43.573

明白了，另一种解决方法。如果我想`byte[]`在 RMS 的一列中写入，我需要做的就是首先将其编码`byte[]`为字符串。[然后专门将Base64](http://en.wikipedia.org/wiki/Base64)写入`String`RMS。

```
public void writeToRms(byte[] byteArray){
    RecordStore recordStore = RecordStore.openRecordStore("My recordStore", true);
    try{
        byte[] outputRecord;
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        DataOutputStream dos = new DataOutputStream(baos);
        String encoded = Base64.encode(byteArray);
        dos.writeUTF(encoded);
        dos.writeUTF("Name");
        dos.writeInt(ctr);
        dos.flush();
        outputRecord = baos.toByteArray();
        recordStore.addRecord(outputRecord, 0, outputRecord.length);
        recordStore.closeRecordStore();
        baos.reset();
        baos.close();
        dos.close();
    }catch(Exception e){}
} 
```

当我检索它时，我只需要将编码解码`String`回`byte[]`.

# jquery - JSF - 带有“时间”值的范围滑块

> ID：15220870
> 
> 赞同：6
> 
> 时间：2013-03-05T10:00:59.523
> 
> 标签：jquery, jsf, time, primefaces, slider

我有带有 Primefaces 3.5 的 JSF webapp，我想有一个范围滑块，但有时间值（小时：分钟）.. 就像这张图片

[滑块 http://img547.imageshack.us/img547/3112/timeslider.jpg](http://img547.imageshack.us/img547/3112/timeslider.jpg)

这是具有整数值的范围滑块的代码：

```
<h:panelGrid columns="1" style="margin-bottom:10px">                    
    <h:outputText id="displayRange" value="Between #{sliderBean.number6} and #{sliderBean.number7}"/>                    
    <p:slider for="txt6,txt7" display="displayRange" style="width:400px" range="true" 
              displayTemplate="Between {min} and {max}"/>
</h:panelGrid>
<h:inputHidden id="txt6" value="#{sliderBean.number6}" />
<h:inputHidden id="txt7" value="#{sliderBean.number7}" /> 
```

其中sliderBean.number6 和sliderBean.number7 是整数.. 我认为我想做的是重新定义显示范围值并使用“分钟”而不是“小时”的jquery幻灯片函数。

```
 $(function() {
    $(".slider-range").slider({
        range: true,
        min: 0,
        max: 1440,
        step: 15,
        slide: function(e, ui) {
            var hours = Math.floor(ui.value / 60);
            var minutes = ui.value - (hours * 60);

            if(hours.length == 1) hours = '0' + hours;
            if(minutes.length == 1) minutes = '0' + minutes;

            $('#displayRange').html(hours+':'+minutes);
        }
    });
}); 
```

但是..老实说..我不知道该怎么做..（如果这是正确的方法..）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:25:59.870

我整理了一个使用[jQRangeSlider](http://ghusse.github.io/jQRangeSlider/)和[momentjs的小提琴](http://momentjs.com/)

[http://jsfiddle.net/tPMsv/7/](http://jsfiddle.net/tPMsv/7/)

```
$("#slider").dateRangeSlider({
    bounds: { 
        min: moment().startOf("day").toDate(), 
        max: moment().endOf("day").toDate() 
    },
    defaultValues: { 
        min: moment().startOf("day").add("hours",6).toDate(), 
        max: moment().endOf("day").subtract("hours",6).toDate()
    },
    formatter: function (value) {
        return moment(value).format("HH:mm");
    }
}); 
```

我使用 momentjs 是因为它是一个很棒的库来处理 javascript 上的日期时间值，但是如果您熟悉另一个库或者只想处理本机函数，则不必使用它。

请让我知道，如果你有任何问题。

# jquery - 当处理程序已经存在时，.live() 上的 JQuery stopPropagation

> ID：15220874
> 
> 赞同：1
> 
> 时间：2013-03-05T10:01:10.917
> 
> 标签：jquery, event-bubbling, stoppropagation

我知道现场电话会通过文档冒泡，这就是我遇到问题的原因。

不幸的是，我正在使用将事件处理程序绑定到元素的第三方库，并希望创建一个点击事件不会冒泡到这些元素的案例。

将 .click() 与 eventStopPropagation() 结合使用效果很好，但是由于内容的动态特性，我需要使用 live、on、delegate 等......这是我的问题的一个小问题。单击“内部” div 时，我需要防止触发“中间”单击。我**无法**更改“中间”处理程序（最好是您认为我什至无权访问它）。

在此先感谢您的帮助！！抱歉重复了，我认为这样会更整洁。

[http://jsfiddle.net/99zQM/9/](http://jsfiddle.net/99zQM/9/)

HTML：

```
<div id="outer">
    outer non dynamic element
    <div id="middle">
        middle dynamic
        <div id="inner">
            inner dynamic
        </div>
    </div>
</div> 
```

Javascript：

```
$("#middle").bind('click',function(e){
    //is rebound when content is loaded
   alert("middle clicked"); 
});
$('#inner').live('click',function(e){
    alert("inner clicked"); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:08:07.140

您将`.on`用于绑定点击事件。对于与#outer、#middle 和#inner 的每个绑定。使用 stopPropagation 来防止冒泡事件。

```
$("#outer").on('click', function(e){
    e.stopPropagation();
    alert("outer clicked"); 
});

$("#outer").on('click', '#middle', function(e){
    e.stopPropagation();
    alert("middle clicked"); 
});

$("#outer #middle").on('click', '#inner', function(e){
    e.stopPropagation();
    alert("inner clicked"); 
}); 
```

jsFiddle 示例：http: [//jsfiddle.net/99zQM/11/](http://jsfiddle.net/99zQM/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:13:01.063

使用此代码

```
$(document).bind('click',function(e) {
    if (e.target)
        target = e.target;
    else if (e.srcElement)
        target = e.srcElement;
    else
        target = e.currentTarget;

    if (target.id == 'middle') 
    {
    alert("middle clicked"); 
    }

       else if (target.id == 'inner')
       {
       alert("inner clicked"); 
       }
}); 
```

[http://jsfiddle.net/99zQM/12/](http://jsfiddle.net/99zQM/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:54:28.787

您可以尝试捕获单击处理程序并将其动态包装在另一个处理程序中，该处理程序测试事件冒泡，如下所示：

```
// Your code does not change

    $("#middle").bind('click',function(e){
        //is rebound when content is loaded
       alert("middle clicked"); 
    });

    $('#inner').live('click',function(e){
        alert("inner clicked"); 
    });

// capture the click handler on #middle and wrap it inside a test for bubbling
var handler = $._data($("#middle")[0], "events")["click"][0].handler;
$('#middle').unbind('click');

$("#middle").bind('click',(function(handlerVar){return function(e){
    if(e.target===this) // test for bubbling
    {
        handlerVar(e);
    }
}})(handler)); 
```

见：http: [//jsfiddle.net/99zQM/13/](http://jsfiddle.net/99zQM/13/)

希望这会有所帮助

# php - nginx - 返回后继续解析

> ID：15220875
> 
> 赞同：0
> 
> 时间：2013-03-05T10:01:14.930
> 
> 标签：php, nginx

我试图拒绝 bingbot 访问 /wp-admin 和 /wp-login.php，但我的 nginx 配置有问题。我从以下内容开始：

```
location ~ /(wp-admin|wp-login\.php) {
    if ($http_user_agent ~* "(alltheweb|baidu|bingbot|googlebot|msnbot|slurp)") {
        return 403;
        break;
    }
}

# Allow any php files to run
location ~ \.php$ {
    try_files $uri =404;
    include /etc/nginx/fastcgi.conf;
    fastcgi_pass unix:/var/lib/php/php.socket;
} 
```

这对于阻止 bingbot 非常有效，但它也不会执行`wp-login.php`；它把它当作一个静态文件。我想“好吧，你不会陷入更多的位置块”，所以我将 php 代码复制到更高的代码中：

```
location ~ /(wp-admin|wp-login\.php) {
    if ($http_user_agent ~* "(alltheweb|baidu|bingbot|googlebot|msnbot|slurp)") {
        return 403;
        break;
    }
    location ~ \.php$ {
        try_files $uri =404;
        include /etc/nginx/fastcgi.conf;
        fastcgi_pass unix:/var/lib/php/php.socket;
    }
}

# Allow any php files to run
location ~ \.php$ {
    try_files $uri =404;
    include /etc/nginx/fastcgi.conf;
    fastcgi_pass unix:/var/lib/php/php.socket;
} 
```

这使我能够再次登录而不是下载`wp-login.php`，但现在 bingbot 再次获得 HTTP 200 OK！如何有选择地正确返回 403 或 php 处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:11:05.177

你可以试试

```
if ($http_user_agent ~* "(alltheweb|baidu|bingbot|googlebot|msnbot|slurp)") {
    location ~ /(wp-admin|wp-login\.php) {
        return 403;
    }
} 
```

但是，您可能需要设置如下内容：

```
location /spider_blocked {
    return 403;
}

if ($http_user_agent ~* "(alltheweb|baidu|bingbot|googlebot|msnbot|slurp)") {
    rewrite ^/(wp-admin|wp-login\.php) /spider_blocked redirect;
} 
```

基本上，您所做的是为 nginx 设置一个特殊的 catch URL，并对特定用户代理访问的特定 url 进行重定向，并将其重定向到特殊的 catch URL 以被阻止。

# wordpress - 如何使用 wordpress 创建漂亮的列表？

> ID：15220877
> 
> 赞同：1
> 
> 时间：2013-03-05T10:01:16.183
> 
> 标签：wordpress, tinymce, html-lists

我想知道是否可以像这里演示的那样呈现漂亮的列表[http://designshack.net/articles/css/5-simple-and-practical-css-list-styles-you-can-copy-并粘贴/](http://designshack.net/articles/css/5-simple-and-practical-css-list-styles-you-can-copy-and-paste/)使用 wordpress 和 tinymce 编辑器，如果可能，请告诉我和世界其他地方如何。

内容管理者应该专注于编写内容，而不是标记！

理想情况下，我会有一个按钮，它根据 TinyMCE 编辑器中已经存在的列表按钮，从突出显示的文本行创建一个列表，但有一个或两个细微差别，它们在 li 标签之间添加一个 span 标签等？

希望有人可以提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:24:57.063

现在我做了一个非常简单的、不可扩展的 hack，但这并不理想，但对于任何有兴趣获得类似结果的人来说，这就是我所做的。

在负责输出的文件中，在我的例子中是 single.php，我简单地在输出变量中搜索了 li 标签，并使用 str_replace 将它们替换为 LI 和 span。

这是代码

```
echo str_replace("<ul>","<ul class=\"num\">",str_replace("</li>","</span></li>",str_replace("<li>","<li><span>",$content))); 
```

# html - 在 IE8 中，当高度高于窗口时，背景会消失。（出现滚动条时）

> ID：15220880
> 
> 赞同：2
> 
> 时间：2013-03-05T10:01:25.517
> 
> 标签：html, css, internet-explorer-8, background, gradient

在 IE8 中，当 div 高于 window 时，-ms-filter 背景消失。在 IE7 及以下工作正常。（我可以使用 1px 透明图像，但如果我需要使用透明颜色加上背景图像怎么办）

示例代码和小提琴：

```
<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="utf-8">
    <style>
        html,body{height:100%;margin:0;padding:0;}
        #one{
            float:left;
            height:100%;
            width:50%;
            background:rgba(0,0,0,0.5);
            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#CC917C6F,endColorstr=#CC917C6F)";
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#CC917C6F,endColorstr=#CC917C6F);
        }
        #two{
            float:right;
            height:101%;
            width:50%;
            background:rgba(255,0,0,0.5);
            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#CCAAAA6F,endColorstr=#CCAAAA6F)";
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#CCAAAA6F,endColorstr=#CCAAAA6F);
        }
    </style>
</head>
<body>
    <div id="one"></div>
    <div id="two"></div>
</body>
</html> 
```

[http://jsfiddle.net/9dmqg/4/](http://jsfiddle.net/9dmqg/4/) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:04:46.777

这是因为 p 标签的固定高度。将固定高度设为`min-height`并添加`height:auto`

```
#one p {
     height:auto; min-height:800px;
}
#two p {
    height:auto; min-height:800px;
} 
```

**[演示](http://jsfiddle.net/9dmqg/3/)**

# powershell - 使用 Invoke-SQLCMD、SMO 或 SQLConnection 哪个更好

> ID：15220883
> 
> 赞同：4
> 
> 时间：2013-03-05T10:01:35.310
> 
> 标签：powershell, smo, sqlconnection, sqlcmd

我一直在创建一些强大的 shell 脚本，我主要使用 Invoke-Sqlcmd 作为查询数据库或输入 .sql 文件的一种方式，但我在包含访问和终止进程方面遇到了一些麻烦。

我一直在使用 SMO 来终止进程

```
$SQlSvr1 = New-Object Microsoft.SqlServer.Management.Smo.Server $serverInstance
$SQlSvr1.KillAllprocesses($databaseMain) 
```

然后使用 Invoke-Sqlcmd 运行我的进程，它运行良好，直到我开始收到错误，例如

```
A transport-level error has occurred when sending the request to the server. (provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.) 
```

如果我没有杀死它返回的进程

> 无法获得独占访问权限，因为数据库正在使用中。

所以我的问题是，什么是重新生成或保持稳定连接的最佳过程？使用调用。

有问题的脚本首先备份我的数据库，使用 try/catch 中的补丁脚本运行和更新，如果有错误，脚本将在 catch 中备份，所有使用 Invoke-Sqlcmd，除了 kill 进程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:14:37.220

三者各有所用。

我喜欢`invoke-sqlcmd`快速和肮脏的查询，或者其他文件中已经存在的查询（因为您可以传入文件参数）。不过，我从来没有处理过引发问题的错误。

当我需要更多安全性时（例如，参数化查询）或想要保持更持久的连接时（当我快速连续运行大量查询时）我使用`SQLConnection`& ，这样我就不会用很多`SQLCommand`短时间内连接。

SMO 我还没有真正使用过，但我会保留它用于在“系统”级别进行管理 - 作业、备份等。你*可以*用 SMO 做几乎任何事情 - Wayne Sheffield 有添加和更改表和存储过程的示例他上个月[的博客（我无法链接到帖子，因为我的办公室防火墙出于未知原因阻止了它）。](http://blog.waynesheffield.com/)我通常会通过 T-SQL 查询来做到这一点，但它可以双向工作，而且我确信用 SMO 做这件事一定有一些优势。

# html - HTML - 可以在不在线托管的情况下显示图像吗？

> ID：15220884
> 
> 赞同：3
> 
> 时间：2013-03-05T10:01:35.970
> 
> 标签：html, image

**问题**

我最近开始学习基本的 HTML。

来自[w3 学校](http://www.w3schools.com/)

当我来到显示图像的部分时，它给出了一个 URL 必须给出。

我四处搜索并在一些论坛上搜索，我发现就我们在本地查看它而言，不需要在线托管（即在编写代码的同一台机器上）。我们可以使用以下语法：

```
<img src = "file:\\C:\Documents and Settings\example.jpg"> 
```

**我想做什么**

我想编写一个简单的 HTML 文档并将其分发给朋友和家人。即，我会将文件邮寄给他们或将其发布在保管箱上的公共文件夹中。为此，我想将我的照片包含在文档中。

**问题**

1.  在线托管图像是绝对必要的吗？
2.  有没有办法将图像与 HTML 文件捆绑在一起，而不必在线托管图像？（我不介意文件大小是否增加）
3.  如果必须进行托管，那么请建议一个可以轻松托管图像并且上传速度不错的网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-01T18:58:52.280

提问者实际上是在询问如何将图像嵌入 HTML 文件本身。如果嵌入了图像，则无需将其托管在其他地方。因此，此用例的最佳方法如下 -

1.  通过编码将图像转换为base64。
2.  在 HTML 文件中添加 base64 编码的图像数据。

例子：

```
<html><body><img src="data:image/png;base64,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" /></body></html>
```

所以OP的问题的答案：

> 1.  在线托管图像是绝对必要的吗？

不。

> 2.  有没有办法将图像与 HTML 文件捆绑在一起，而不必在线托管图像？（我不介意文件大小是否增加）

是的。请参阅上面的示例说明。在此处阅读更多内容：[如何将 base64 编码图像转换和集成到网页](http://picbase64.com/)中。另一种更简单的方法是将 HTML 文件转换为[MIME HTML](http://en.wikipedia.org/wiki/MHTML)（使用 Internet Explorer）。

> 3.  如果必须进行托管，那么请建议一个可以轻松托管图像并且上传速度不错的网站。

如前所述，“托管”在技术上不是必需的（取决于您的用例）。谷歌“免费图片托管”找到合适的主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:07:31.630

如果您想将其发送给其他电脑上的其他人，那么您必须将图像上传到网站并使用该链接，因为他们的电脑上没有图像。一个可以上传图片的好网站是[tinypic](http://www.tinypic.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:04:01.283

您可以从与 HTML 文件相同的位置提供图像。

如果您只是通过在浏览器中打开 HTML 文件在您自己的机器上向朋友和家人展示此内容，那么您可以链接到同一位置的图像。

```
<img src="myphoto.jpg" alt="Having fun in the park" /> 
```

或者您可以将图像放在相对于 HTML 文件的文件夹中

```
<img src="images/myphoto.jpg" alt="Having fun in the park" /> 
```

这是引用图像的正确方式，即使您在线推送 HTML 文件也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:06:14.247

无需托管图像。

但是，您必须将图像包含在发送的数据中。如果您有更多网站，这通常看起来像这样

```
rootfolder(MySite)
  -img(Folder)
    -img1.jpg
    -img2.jpg
  index.html 
```

然后你可以参考：

```
<img src="img/img1.jpg" alt="foo bar" /> 
```

如果您没有指定完整的“物理”路径，`C:/`或者`~/root/`路径将自动从当前位置（您显示的 html 站点所在的位置）设置。你也可以通过使用上目录`../`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T10:06:39.050

我会逐点回答：

1.  是的。您需要将它们链接到您的文件，因为它们无权访问您的电脑。
2.  您可以压缩整个包 > html、css、js、图像，无论您在其中有什么。
3.  如果您有保管箱，请开车然后使用它们。除此之外，您可以访问[photobucket.com/](http://beta.photobucket.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T10:06:40.643

这是你可以做的：

创建一个文件夹“mywebsite”，在该文件夹中包含 html 文件和图片。在您的 html 文件中，您的 img src 应该是

```
<img src = 'whateverpic.jpg' alt = 'whatever'> 
```

当您将文件文件发送给您的父母时，请压缩“mywebsite”文件夹，以便将 html 和图片保存在同一位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T10:05:38.920

这可能是不正确的，但我相信如果您在 HTML 结构中创建一个文件夹。存储所有在线使用的图像。

例如网站文件夹 -> 内容文件夹 -> 图像文件夹（所有图像都在此处）这是我过去几个月在学习时一直在做的事情。

# sql-server - 有人可以优化这个 SQL 查询吗

> ID：15220890
> 
> 赞同：0
> 
> 时间：2013-03-05T10:01:54.440
> 
> 标签：sql-server, query-optimization

我有一个 SQL 登录表“tblLogins”，它存储每个登录用户的 UserId 和 LoginDate。我需要生成一个图表来显示每天有多少登录。所以我在 [CLASSIC ASP] 下面使用这个脚本。

有没有办法在**没有循环**和每天查询数据库的情况下获取这些信息？如您所见，我正在使用 30 个查询访问数据库。预期的输出格式是这样的：

[[1, 26], [2, 16], [3, 16], [4, 26], [5, 0], [6, 0], [7, 25], [8, 21], [ 9, 90], [10, 12], [11, 11], [12, 21], [13, 0], [14, 18], [15, 17], [16, 21], [17, 23], [18, 19], [19, 0], [20, 0], [21, 12], [22, 17], [23, 12], [24, 7], [25, 11] , [26, 21], [27, 0], [28, 18], [29, 20], [30, 0]]

这是[每月的一天，登录]。我正在查看 SQL Server 中的 COALESCE，但不确定它是否可行并且不太了解其用法。

**编码：**

```
 i=1
    varStartDate =  DateAdd("m",-1, Date) 
    for i = 1 to DayCount
    intUserTotal = 0

    strSQL= "Select IsNull(Count(DISTINCT(userid)),0) as Logins from tblLogins where LoginDate >= '"& varStartDate &"' and LoginDate <= '"& DateAdd("d", 1, varStartDate) &"'

    rsTemp.Open strSQL,objConn,3,2
    if not rsTemp.EOF then
        if not isnull(rsTemp("Logins")) and trim(rsTemp("Logins")) <> "" then
          intUserTotal = trim(rsTemp("Logins"))
        else
          intUserTotal = 0
        end if
    else
        intUserTotal = 0
    end if
    rsTemp.close
    '' append in JSON FORMAT
    strData1= strData1 & "[" & i & ", "  & cInt(intUserTotal) & "], "
    ''' increment the date
    varStartDate =  DateAdd("d",1, varStartDate) 
    '' start with next date
    next 
```

**编辑：**某些日子可能没有登录，因此结果应该在该月的那一天的结果中报告 0。@alzaimar 很接近，但那里仍然存在一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:28:13.813

用你的结果创建一个表格怎么样？

```
declare @FirstOfMonth DateTime

set @FirstOfMonth = DateAdd(d, -DatePart(Day, GetDate())+1, getdate())
set @FirstOfMonth = Cast(floor(Cast(@FirstOfMonth as float)) as DateTime)

select datepart (day,LoginDate) as DayOfMonth, 
       Count(distinct UserID)
  from tblLogins 
 where LoginDate >= @FirstOfMonth
group by datepart (day,LoginDate)
order by 1 
```

如果您还想查看没有登录的日期，则必须创建一个包含当天所有日期的表，然后将上述结果加入该表。

然后，您可以将结果连接成一个字符串。[此处](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)显示了如何完成此操作的示例

编辑：正如詹姆斯决定要显示的日期范围;-) 这是显示从一个月前（同一天）到今天的所有内容的版本，按天数排序，但不包括没有登录的天数（即它们不是显示为 0)。

```
select LoginDay, 
       Logins
  from (
  select  Cast(floor(Cast(LoginDate as float)) as DateTime) as SortDate,
          max(DatePart(d,LoginDate)) as LoginDay,
          Count(distinct UserID) as Logins
     from tblLogins
    where LoginDate >= DateAdd(m,-1, GetDate())
 group by Cast(floor(Cast(LoginDate as float)) as DateTime)
 ) x
 order by [SortDate] 
```

# hibernate - 看不到属性“hibernate.dialect”（使用 Spring 数据）

> ID：15220893
> 
> 赞同：0
> 
> 时间：2013-03-05T10:02:04.983
> 
> 标签：hibernate, spring-data, dialect

我正在使用 Spring 数据。我在部署到 JBoss7 时出现“org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set”。但我确实在我的 app-context.xml 中设置了属性（databasePlatform -> org.hibernate.dialect.MySQL5Dialect）：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <context:component-scan base-package="com.myproj.persistence.jpa" />

    <jpa:repositories base-package="com.myproj.persistence.jpa" />

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://myhost:port/schema" />
        <property name="username" value="root" />
        <property name="password" value="123456" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="persistenceUnitName" value="quizPersistenceUnit"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="false"/>
                <property name="database" value="MYSQL"/>
                <property name="generateDdl" value="false"/>
                <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
            </bean>
        </property>
    </bean>

</beans> 
```

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="quizPersistenceUnit">
        <class>com.myproj.domain.Quiz</class>
        <class>com.myproj.domain.QuizAnswer</class>
    </persistence-unit>
</persistence> 
```

但是，当我像这样在 persistence.xml 中设置此属性时：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="quizPersistenceUnit">
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect"/>
        </properties>
        <class>com.myproj.domain.Quiz</class>
        <class>com.myproj.domain.QuizAnswer</class>
    </persistence-unit>
</persistence> 
```

一切都很好。当然我不想链接到persistence.xml中的DB实现。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:19:59.810

如果您使用`JpaVendorAdapter`不要在配置中指定持久性单元。

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="false"/>
                <property name="database" value="MYSQL"/>
                <property name="generateDdl" value="false"/>
                <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
            </bean>
        </property>
    </bean> 
```

更改此设置后，您将需要更改组件扫描以获取实体。

```
<context:component-scan base-package="com.myproj.persistence.jpa, com.myproj.domain" /> 
```

# php - 避免使用 Simplepie 合并/组合多个提要？

> ID：15220897
> 
> 赞同：0
> 
> 时间：2013-03-05T10:02:20.947
> 
> 标签：php, rss, simplepie

这是我的问题。我正在使用 Simplepie 获取 RSS 提要。在同一页面上，我试图显示两个 rss 提要（例如，在两个不同的列中）。这两个提要来自同一个域（但我不认为这是一个问题，即 domain.com/feed1、domain.com/anotherfeed）。

我的问题是 Simplepie**不断合并提要**。因此，在第一列中，我正确地看到了第一个提要，但第二列是我的两个提要的组合版本——这不是本意。

这就是我所做的：

```
$feed = new SimplePie();
$feed->set_feed_url($url1);
$feed->init();          
$rss = $feed->get_items();
$feed->__destruct(); // Do what PHP should be doing on it's own.
unset($feed); 

$feed = new SimplePie();
$feed->set_feed_url($url2);
$feed->init();          
$rss = $feed->get_items();
$feed->__destruct(); // Do what PHP should be doing on it's own.
unset($feed); 
```

最后两行试图摆脱第一个 $feed 实例，但似乎没有什么可以避免在第二轮中合并两个提要。

起初，我认为这与缓存问题有关，但禁用缓存并没有帮助。

搜索社区似乎没有给我任何答案 - 所以出于某种原因，我独自面对这个问题。这告诉我，我从根本上在这里遗漏了一些东西？**基本上很高兴知道我如何才能真正杀死第一个提要，因此它不会合并到第二个提要中？**

我真的希望我已经提供了足够的信息让你们能够回答。如果没有，那么对不起，我会尽力更新这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:23:36.043

将您的第二个提要称为 $feed 以外的其他内容，也许[在我的主页上](http://www.muschamp.ca)我会在头脑中这样做：

```
<?php 
include_once './news/php/autoloader.php'; 
$muskblogFeed = new SimplePie();
$muskblogFeed->set_feed_url('http://blog.muschamp.ca/feed/');
$muskblogFeed->init();
$quotationFeed = new SimplePie();
$quotationFeed->set_feed_url('http://quotations.muschamp.ca/qotdFeed.php');
$quotationFeed->init();
$miniatureFeed = new SimplePie();
$miniatureFeed->set_feed_url('http://musksminiatures.wordpress.com/feed/');
$miniatureFeed->init();
?> 
```

然后在正文中显示我有这个的提要：

```
 <h3>My Quotation of the Day <a href="<?php print $quotationFeed->subscribe_url(); ?>"><img src="CommonImages/SocialMediaIcons/rss_16.png" class="rss16" /></a></h3>
    <?php foreach ($quotationFeed->get_items(0, 1) as $item): ?>
            <?php print('<blockquote id="quotation">' . $item->get_content() . '<br/><a href="' . $item->get_permalink() . '" style="float: right; padding-top: 2px; margin-top: 5px;">' . $item->get_title() . '</a></blockquote>'); ?>
    <?php endforeach; ?>
    <br />
    <h3>Now on Muskblog <a href="<?php print $muskblogFeed->subscribe_url(); ?>"><img src="CommonImages/SocialMediaIcons/rss_16.png" class="rss16" /></a></h3>
    <ul>
    <?php foreach ($muskblogFeed->get_items(0, 3) as $item): ?>
        <li>
            <a href="<?php print $item->get_permalink(); ?>">
            <?php print $item->get_title(); ?></a>
        </li>
    <?php endforeach; ?>
    </ul>
    <h3>Now on Musk's Miniatures <a href="<?php print $miniatureFeed->subscribe_url(); ?>"><img src="CommonImages/SocialMediaIcons/rss_16.png" class="rss16" /></a></h3>
    <ul>
    <?php foreach ($miniatureFeed->get_items(0, 3) as $item): ?>
        <li>
            <a href="<?php print $item->get_permalink(); ?>">
            <?php print $item->get_title(); ?></a>
        </li>
    <?php endforeach; ?>
    </ul> 
```

以上工作正常，也许您需要将工作分解为头部和身体，我不是 PHP 人，我什至不假装自己是 Stack Overflow 上的人。显然，变量在 PHP 中的作用域不仅仅是一个代码块，但我永远不确定变量保持设置多长时间。你似乎急于 unset() 你的。

# mysql - MySQL 嵌套表选择 - 如果外部表与内部表不匹配，则不显示

> ID：15220900
> 
> 赞同：1
> 
> 时间：2013-03-05T10:02:24.910
> 
> 标签：mysql, select

我正在拉取目录的主列表并循环遍历，然后嵌套在循环中，我正在拉取一组与每个目录匹配的注释。

在下面的示例中，我如何不显示 dir 3 和 dir 4 列表？这些代表类别的徽标，如果结果为空，我不希望这些徽标出现。我阅读了 INNER JOIN ，但它似乎不符合这种需求，或者至少我不明白。

为了简化帖子，我删除了很多 html 表格和结构。这个想法是外部循环运行所有目录，但我无法真正检查内部（我知道）是否应该列出它。我将阅读下面由非常有用的海报发布的 LEFT JOIN 选项。

```
$sql_dir="SELECT dirid FROM lit_directories";
$result_dir=mysql_query($sql_dir);
   while ($row_dir=mysql_fetch_assoc($result_dir)) {
edit here-->  echo $row_dir['dirid'];

   $sql_notes="SELECT notes, dirid FROM lit_notes WHERE dirid='".$row_dir['dirid']."'";
   $result_notes=mysql_query($sql_notes);
      while ($row_notes=mysql_fetch_assoc($result_notes)) {
         echo $row_notes['notes'];
      }
   }

  dirid   notes
-----------------------
| dir 1 | notes 1
|       | notes 2
|       | notes 3
-----------------------
| dir 2 | notes 1
|       | notes 2
-----------------------
| dir 3 |               <---- I don't want these last 2 dir lists to show
|       |                     since they are empty
-----------------------
| dir 4 |               <---- 
|       |                     
----------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:06:48.177

试试这个：

```
$sql_dir="SELECT l.dirid, notes FROM lit_directories l LEFT JOIN lit_notes n  ON n.dirid = l.dirid WHERE n.notes IS NOT NULL";
$result_dir=mysql_query($sql_dir);
while ($row_dir=mysql_fetch_assoc($result_dir)) {
      echo $row_notes['notes'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:10:10.860

我会推荐[Preet Sangha](https://stackoverflow.com/users/30225/preet-sangha)的建议。否则，如果未找到注释，您可以跳过该行。

例如，

```
$sql_dir="SELECT dirid FROM lit_directories";
$result_dir=mysql_query($sql_dir);
   while ($row_dir=mysql_fetch_assoc($result_dir)) {

   $sql_notes="SELECT notes, dirid FROM lit_notes WHERE dirid='".$row_dir['dirid']."'";
   $result_notes=mysql_query($sql_notes);
      while ($row_notes=mysql_fetch_assoc($result_notes)) {
         if($row_notes['notes'] == ''){
             continue;
         }
         echo $row_notes['notes'];
      }
   } 
```

但在性能方面更好的方法，我认为应该使用 Preet Sangha 的解决方案。

# winapi - CRichEditCtrl::LimitText - 换行问题

> ID：15220903
> 
> 赞同：1
> 
> 时间：2013-03-05T10:02:49.233
> 
> 标签：winapi, mfc, cricheditctrl

我有一个大小为 500 的 DB 文本字段，使用`CRichEditCtrl`. 我打电话给`CRichEditCtrl::LimitText(500)`你，所以你不能输入比数据库可以处理的更多的文本，这工作得很好，*直到*你输入换行符。每个换行符将字符串的长度增加 2，但在 500 限制中仅计为 1...例如，如果我将编辑控件填充到限制并有 4 个换行符，`CString`则长度为 504。

我特别希望控件只允许用户输入最多 500 个字符的文本，而不是截断他们输入的内容。我怎样才能最好地做到这一点？请注意，我需要按原样保存内容，而不是在数据库中`CString`替换或类似的内容。`\r\n``\n`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:16:19.820

覆盖`OnChar`，计算文本中的换行数，然后设置`ctrl.LimitText(500 - count)`。这样您就可以避免破坏 DBs 500 字符的限制。

您还必须注意可能打破限制的粘贴事件，如下所述：[CRichEditCtrl 如何知道已执行粘贴操作？](https://stackoverflow.com/questions/2250759/how-does-a-cricheditctrl-know-a-paste-operation-has-been-performed)

# javascript - 在图像悬停时显示小弹出窗口

> ID：15220905
> 
> 赞同：-2
> 
> 时间：2013-03-05T10:02:52.407
> 
> 标签：javascript, hover

悬停图像时需要显示其他信息，作为 stackoverflow.com 上的头像。我会添加一张图片以使其更清晰，但缺乏声誉。如何实施？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:18:55.963

尝试这个：

CSS：

```
#image:hover ~ #extra {
    display: block;
}
#extra {
    display: none;
} 
```

和 HTML：

```
<img id="image" src="example_image.png" />
<div id="extra">Info for img.</div> 
```

# php - 带有默认占位符的 symfony2 路由

> ID：15220907
> 
> 赞同：2
> 
> 时间：2013-03-05T10:03:04.943
> 
> 标签：php, symfony, routing, placeholder

应用程序/config/routing_dev.yml：

```
people:
    resource: "@myPeopleBundle/Resources/config/routing.yml"
    prefix:   /people 
```

myPeopleBundle/Resources/config/routing.yml：

```
people_homepage:
    pattern:  /{name}
    defaults: { _controller: myPeopleBundle:Default:index, name: Foo }

people_homepage2:
    pattern:  /
    defaults: { _controller: myPeopleBundle:Default:index, name: Bar } 
```

myPeopleBundle：控制器：DefaultController.php：

```
...
public function indexAction($name) {
    return $this->render('myPeopleBundle:Default:index.html.twig', array('name' => $name));
}
... 
```

myPeopleBundle：默认：index.html.twig：

```
Hello {{ name }}! 
```

* * *

`web/app_dev.php/people ->`你好福！
`web/app_dev.php/people/ ->`酒吧你好！

为什么不一样？`people_homepage`路由为什么不匹配第二个 ( ) `web/app_dev.php/people/`url？

但是，如果我将其设置为`prefix`，`/`我会得到相同的输出：
`web/app_dev.php ->`Hello Foo！
`web/app_dev.php/ ->`你好福！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:46:56.247

如果你看`appdevUrlMatcher.php`你会看到这样的东西：

```
 // people_homepage
    if (preg_match('#^/people(?:/(?P<name>[^/]++))?$#s', $pathinfo, $matches)) {
        return $this->mergeDefaults(array_replace($matches, array('_route' => 'people_homepage')), array (  '_controller' => 'Acme\\DemoBundle\\Controller\\DefaultController::indexAction',  'name' => 'Foo',));
    }

    // people_homepage2
    if (rtrim($pathinfo, '/') === '/people') {
        if (substr($pathinfo, -1) !== '/') {
            return $this->redirect($pathinfo.'/', 'people_homepage2');
        }

        return array (  '_controller' => 'Acme\\DemoBundle\\Controller\\DefaultController::indexAction',  'name' => 'Bar',  '_route' => 'people_homepage2',);
    } 
```

您可以看到该路线`/people/`不能与 不匹配`people_homepage`，但它将与`/people`or`/people/test`

如果您更改路线的顺序，您正在做的事情会更有意义

```
people_homepage2:
    pattern:  /
    defaults: { _controller: myPeopleBundle:Default:index, name: Bar }

people_homepage:
    pattern:  /{name}
    defaults: { _controller: myPeopleBundle:Default:index, name: Foo } 
```

使用此配置，您将拥有：

`/people`== `/people/`--->`people_homepage2`

`/people/test`--->`people_homepage`

# css - SVG 作为 CSS 背景，Opera 中的缩放级别问题

> ID：15220910
> 
> 赞同：12
> 
> 时间：2013-03-05T10:03:06.863
> 
> 标签：css, svg, background, opera

我在 Opera 中使用 SVG 背景时遇到了困难。

当我缩小页面时，背景开始在 x 轴上重复，尽管有`background-repeat: repeat-y'

我创建了一个[代码笔](http://codepen.io/anon/pen/werLp)，展示了我发现的第一个在线 SVG 图像的问题。

```
body {
  background-image: url("http://www.anarchopedia.org/images/2/22/Heckert_GNU_white.svg");
  background-repeat: repeat-y;
} 
```

这是我电脑上 Opera 12.14 行为的截图：

![缩小时 Opera 开始在 x 轴上重复背景](../Images/6631388134eb3c10059c0c4a6b41fe69.png)

该行为适用于任何带有`width="W" height="H" viewBox="0 0 W H"`尺寸标注的 SVG 文档。

到目前为止，我尝试了,甚至根元素的各种值`width`，但没有取得多大成功。`height``viewBox``preserveAspectRatio``<svg>`

请问有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T07:00:24.490

它并不简单，因为 Opera 在调整大小后不会重绘图像，

参考这个[链接](https://github.com/dpvc/MathJax/commit/27d3b1ea80d52d8809427ab757ac40b5f8b2b1eb)

此链接解释了如何强制歌剧在缩放后重绘图像，

我尝试了简单的方法但没有工作，

所以我认为这是处理歌剧错误的唯一方法。似乎它正在使用 MathJax 框架，

我希望这可能会有所帮助..

# jquery - 如何在jquery数据表列中添加复选框和按钮

> ID：15220913
> 
> 赞同：1
> 
> 时间：2013-03-05T10:03:09.390
> 
> 标签：jquery, html, model-view-controller, datatables

我需要在 jquery 数据表的所有行中添加复选框和按钮。复选框需要添加第一列，按钮需要添加最后一列。使用 mvc 格式。我试试下面的代码。但它只显示按钮。如何在第一列中添加复选框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:25:53.110

像这样使用：

```
"aoColumnDefs": [{
                "aTargets": [0],
                "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
                    if (iCol == 0) {
                       $('<input type=\"checkbox\" value="' + sData + '">');
                    }
                }
            },
            {
            "aTargets": [7],
                "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
                    if (iCol == 7) {
                        var b = $('<button>test</button>');
                        b.on('click', function () {
                        });
                        $(nTd).empty();
                        $(nTd).prepend(b);
                    }
                }
            }], 
```

# javascript - 使用 jquery 更改媒体刷新图像大小

> ID：15220917
> 
> 赞同：0
> 
> 时间：2013-03-05T10:03:14.263
> 
> 标签：javascript, image, media, slide, image-size

```
function getItemWidth(){
    var slide_wi = 976;

    var window_width = $(window).width();

    if(window_width < 350){
        slide_wi = 300;
    }else if(window_width <= 568){
        slide_wi = 458;
    }else if(window_width <= 800){
        slide_wi = 746;
    }else if(window_width >= 1152){
        slide_wi = 976;
    }
    return slide_wi;
} ; 
```

这种尺寸的问题不能解决 ex 更换媒体的问题。iphone landsace 和 potratie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:06:13.293

使用功能`onorientationchange`

```
window.onorientationchange  = function(){
    //Your Code 
} 
```

也检测`landscape mode`or `potrait mode`，你可以试试这个

```
var screenWidth = window.innerWidth;
var screenHeight = window.innerHeight;
if(screenWidth>screenHeight)
{
    alert('landscape mode');
}
else
{
    alert('potrait mode');
} 
```

# c++ - std::vector 构造函数 - 为什么是 int 而不是 int*？

> ID：15220919
> 
> 赞同：1
> 
> 时间：2013-03-05T10:03:17.890
> 
> 标签：c++, templates, stl

我知道以下代码可以从数组中构建一个 stl 向量：

```
 // the iterator constructor can also be used to construct from arrays:
  int myints[] = {16,2,77,29};
  std::vector<int> fifth (myints, myints + sizeof(myints) / sizeof(int) ); 
```

（来源：[cppreference](http://www.cplusplus.com/reference/vector/vector/vector/)）

使用的构造函数应该是

```
template <class InputIterator>
         vector (InputIterator first, InputIterator last,
                 const allocator_type& alloc = allocator_type()); 
```

如果*<class InputIterator>*在上面的例子中是*<int>*，为什么*InputIterator 首先*不是一个整数指针？数组名“myints”衰减为指向第一个元素的指针，因为它等价于 &myints[0]

我认为正确的版本是

```
template <class InputIterator>
         vector (InputIterator *first, InputIterator *last,
                 const allocator_type& alloc = allocator_type()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T10:05:32.973

[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)声明如下：

```
template <class T, class Allocator = std::allocator<T>>
class Vector
{
  // ...
  typedef Allocator allocator_type;

  template <class InputIterator>
  vector(InputIterator first, InputIterator last,
         const allocator_type& = alocator_type());

  // ...
}; 
```

请注意，类本身和构造函数都有模板参数。创建时`std::vector<int>`，`int`模板参数用于类模板参数`T`，确定向量元素的类型，而不是构造函数的`InputIterator`.

您允许`InputIterator`由编译器推导（实际上，必须推导构造函数的模板参数）。您将`myints`作为第一个参数传递给要推断的函数`InputIterator`。正如您所说，由于`myints`衰减到数组的第一个元素，因此将推断为 an并且您将获得构造函数的以下实例化：`int*``InputIterator``int*`

```
vector (int* first, int* last,
        const allocator_type& alloc = allocator_type()); 
```

`InputIterator`不推断为`int`。它被推断为作为第一个参数传递的完整类型（当然，第二个参数必须匹配）。

这是有道理的，因为 an`int`不是有效的输入迭代器。推导的任何`InputIterator`内容都必须满足输入迭代器的要求。`int*`然而，是有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T10:07:28.633

您将向量的模板类型（`int`在您的情况下）与构造函数参数的模板类型混淆了。的构造函数采用-yielding-`std::vector<T>`类型的第一个参数。`InputIterator``T`

即——`<class InputIterator>`不是`int`；它是一个取消引用的迭代器`int`；如`int*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T10:08:24.500

这是因为迭代器并不总是指针。或者换一种说法：大多数迭代器*不是*指针，因此您提出的签名不适用于它们。

因此，在您的情况下，这`InputIterator`是`int*`完全可以理解的，因为迭代器的概念最初是作为“指针范围”的更广泛概念而发明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:06:23.547

`<class InputIterator>`不能是`<int>`因为你不能取消引用（应用`operator*()`）一个`int`.

# matlab - 通过与另一个数组进行比较来查找数组中的元素

> ID：15220920
> 
> 赞同：2
> 
> 时间：2013-03-05T10:03:18.290
> 
> 标签：matlab, matrix

我有一个矩阵

```
a = [ 1 'cancer'
      2 'cancer'
      3 'cancer'
      4 'noncancer'
      5 'noncancer' ] 
```

我有另一个带有值的矩阵

```
b = [ 4
      5
      2 ] 
```

现在我必须将 b 矩阵值与 a 值进行比较，输出应该是

```
output = [ 4  'noncancer'
           5  'noncancer'
           2  'cancer'] 
```

我怎样才能在 matlab 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T10:07:51.867

您可以使用[`ismember`](http://www.mathworks.de/de/help/matlab/ref/ismember.html)：

```
a = { 1 'cancer'
      2 'cancer'
      3 'cancer'
      4 'noncancer'
      5 'noncancer' };

  b = [ 4
      5
      2 ];

 a(ismember([a{:,1}], b),:) 
```

这导致

```
ans = 

    [2]    'cancer'   
    [4]    'noncancer'
    [5]    'noncancer' 
```

以`b`使用指定的顺序显示结果（按照后续问题中的要求：[以相同的顺序，通过与另一个数组比较来查找数组中的元素](https://stackoverflow.com/questions/15250510/in-the-same-order-finding-an-element-in-an-array-by-comparing-it-with-another-a)）

```
[logicIDX, numIDX]  = ismember(b, [a{:,1}]);
a(numIDX, :) 
```

这导致：

```
ans = 

   [4]    'noncancer'
   [5]    'noncancer'
   [2]    'cancer' 
```

# c# - 如何使用实体框架代码优先方法将双 [] 数组存储到数据库

> ID：15220921
> 
> 赞同：29
> 
> 时间：2013-03-05T10:03:21.130
> 
> 标签：c#, .net, entity-framework, ef-code-first, fluent-interface

如何使用 Entity Framework Code-First 将双精度数组存储到数据库，而不影响现有代码和架构设计？

我查看了 Data Annotation 和 Fluent API，我还考虑将双精度数组转换为字节字符串并将该字节存储到数据库中它自己的列中。

我无法`public double[] Data { get; set; }`使用 Fluent API 访问该属性，然后我得到的错误消息是：

> 该类型`double[]`必须是不可为空的值类型才能将其用作参数“T”。

存储的类`Data`成功存储在数据库中，以及与该类的关系。我只是错过了`Data`专栏。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-05T10:07:25.350

你可以做这样的事情：

```
 [NotMapped]
    public double[] Data
    {
        get
        {
            string[] tab = this.InternalData.Split(',');
            return new double[] { double.Parse(tab[0]), double.Parse(tab[1]) };
        }
        set
        {
            this.InternalData = string.Format("{0},{1}", value[0], value[1]);
        }
    }

    [EditorBrowsable(EditorBrowsableState.Never)]
    public string InternalData { get; set; } 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-05T12:07:23.143

感谢大家的投入，由于您的帮助，我能够找到解决此问题的最佳方法。这是：

```
 public string InternalData { get; set; }
 public double[] Data
 {
    get
    {
        return Array.ConvertAll(InternalData.Split(';'), Double.Parse);                
    }
    set
    {
        _data = value;
        InternalData = String.Join(";", _data.Select(p => p.ToString()).ToArray());
    }
 } 
```

感谢这些 stackoverflow 帖子： [String to Doubles array](https://stackoverflow.com/a/9524705/291356)和 [Array of Doubles to a String](https://stackoverflow.com/a/380712/291356)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T10:42:38.677

我知道它有点贵，但你可以这样做

```
class Primitive
{
    public int PrimitiveId { get; set; }
    public double Data { get; set; }

    [Required]
    public Reference ReferenceClass { get; set; }
}

// This is the class that requires an array of doubles
class Reference
{
    // Other EF stuff

    // EF-acceptable reference to an 'array' of doubles
    public virtual List<Primitive> Data { get; set; }
} 
```

现在，这会将单个实体（此处为“参考”）映射到您的 Primitive 类的“列表”。这基本上是为了让 SQL 数据库满意，并允许您适当地使用您的数据列表。

这可能不适合您的需求，但会是让 EF 满意的一种方式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-05T11:05:31.957

`List<double>`如果你使用而不是，那会容易得多`double[]`。您已经有一个存储您的`Data`值的表。您可能有从某个表到存储双精度值的表的外键。创建另一个模型来反映存储双精度的表，并在映射类中添加外键映射。这样您就不需要添加一些复杂的后台逻辑来检索或存储类属性中的值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-01T16:25:30.430

Nathan White 给出了最好的答案（得到了我的投票）。

这是对 Joffrey Kern 的回答的一个小改进，允许任何长度的列表（未经测试）：

```
 [NotMapped]
    public IEnumerable<double> Data
    {
        get
        {
            var tab = InternalData.Split(',');
            return tab.Select(double.Parse).AsEnumerable();
        }
        set { InternalData = string.Join(",", value); }
    }

    [EditorBrowsable(EditorBrowsableState.Never)]
    public string InternalData { get; set; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-21T19:55:10.267

不要使用 double[] 使用 List insted。

像这样。

```
public class MyModel{
    ...
    public List<MyClass> Data { get; set; }
    ...
}

public class MyClass{
    public int Id { get; set; }
    public double Value { get; set; }
} 
```

我看到的所有解决方案都很糟糕，因为：

1.  如果你创建表，你不想存储这样的数据：“99.5,89.65,78.5,15.5”那是无效的！首先它是一个字符串，这意味着如果您可以在其中输入字母，并且在您的 ASP.NET 服务器调用 double.Parse 的那一刻，它将导致 FormatException 并且您真的不想要！

2.  它更慢，因为您的服务器必须解析字符串。为什么要解析字符串而不是从 SQL Server 获取几乎准备好的数据以供使用？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-08T15:36:22.110

如果您的收藏可以是`null`或空的，并且您希望保留它，请执行以下操作：

```
[NotMapped]
public double[] Data
{
    get => InternalData != null ? Array.ConvertAll(Data.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries), double.Parse) : null;
    set => InternalData = value != null ? string.Join(";", value) : null;
} 
```

此外，`[Column(TypeName = "varchar")]`在字符串属性上指定更有效的存储数据类型。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-14T22:54:07.067

[@Jonas](https://stackoverflow.com/a/15223375/5385845)答案的完美增强将是添加必要的注释。所以，一个更干净的版本将是

```
[EditorBrowsable(EditorBrowsableState.Never)]
[JsonIgnore]
public string InternalData { get; set; }

[NotMapped]
public double[] Data
{
    get => Array.ConvertAll(InternalData.Split(';'), double.Parse);
    set 
    {
        InternalData = string.Join(";", value.Select(p => p.ToString(CultureInfo.InvariantCulture)).ToArray());
    }
} 
```

[ ***JsonIgnore]***注解将忽略 JSON 序列化和 Swagger UI 中的 InternalData 字段。

***[EditorBrowsable(EditorBrowsableState.Never)]***将从 IDE IntelliSense 隐藏公共方法

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-15T15:55:42.840

在我看来，几乎所有其他答案都与应有的相反。实体 EF 应该管理字符串，并且必须从中生成数组。因此，只有当 EF 访问该字符串时，该数组必须是整体读写的。

**涉及 Data[] 逻辑的解决方案是错误**的，因为正如我在评论中所写，您会遇到矛盾的情况。在所有其他条件下，变量必须保持为纯数组。正如我目前所见，通过将“get”和“set”逻辑放入 Data[] 中，会发生这种情况：

1 - 每次对数组进行索引访问时，都会自动从字符串**重新创建数组。**这是一个无用的工作，想想循环中的迭代......

2 - 当您设置单个元素时，它**不会被存储**，因为它通过“get”而不是“set”。如果您尝试声明`Data=new []{0,0,0}`然后设置`Data[1]=2`，则重新读取 Data[1] 结果为 0。

我的解决方案是彻底扭转逻辑。

```
 public string Data_string
    {
        get => string.Join(';', Data??Array.Empty());
        set => Data= value == null ? Array.Empty<double>() : Array.ConvertAll(value.Split(';',StringSplitOptions.RemoveEmptyEntries), double.Parse);
    }

    [NotMapped]
    public double[] Data {get;set;} 
```

显然，这只适用于在数据库上存储和检索数据，对 Data_string 的访问是 EF 独有的。

一旦从 DB 中读取字符串，它就会与*Data_string*相关联，后者通过 set 创建*Data*数组。此时，您可以处理*Data* **而不会以任何方式影响字符串，例如普通数组**。当您要求 EF 保存到 DB 中时，通过*Data_string*属性中的 get，字符串将根据*Data*元素完全重构，然后存储为字符串。

实际上，字符串只修改了两次，在从数据库读取时和保存时。

在我看来，这个解决方案比在字符串上连续运行要高效得多。

# html - 如何在运行时使用 CSS 在 HTML 元素之前插入一些内容

> ID：15220926
> 
> 赞同：3
> 
> 时间：2013-03-05T10:03:40.440
> 
> 标签：html, css

假设 HTML 定义为

```
<div>
  <div class="runtime"> Some Important Text.Insert "Important" Before This </div>
  <div class="normal"> General Text </div>

</div> 
```

所以通常输出会是

> 一些重要的文字。在此之前插入“重要”
> 
> 一般文本

但渲染后它应该向我们展示

> **重要生成内容**
> 
> 一些重要的文字。在此之前插入“重要”
> 
> 一般文本

我正在寻找唯一的CSS解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:06:26.063

```
.runtime:before {
    content: "Important Generated Content";
    font-weight: bold;
    display: block;
    margin-bottom: 15px;
} 
```

请看这个[**jsFiddle**](http://jsfiddle.net/b4prD/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T10:06:03.480

你正在寻找这个

```
.runtime:before{
    content: "Important Generated Content";
    font-weight: bold;
    display: block;
} 
```

*是的，您可以`margin-bottom`按照其他答案的建议添加一些。如果我直接更改我的代码，我会觉得抄袭。只是在这里注释。*

你可能会猜，有之前，有之后吗？
答案是肯定的！

你可以做类似的事情

```
.importantStuff:after{
    content: "!!!!!";
} 
```

这在课程`!`结束时添加了 s`importantStuff`

最后一件事，每个元素只能有**一个** `before`和**一个** `after`，所以要明智地使用它们。并享受使用 CSS。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T10:06:51.093

您可以将伪类`:before`与`content`属性一起使用。

```
.runtime:before { 
    content:"Important!";
    font-weight: bold;
} 
```

您可以在此处查看浏览器支持：http: [//caniuse.com/#feat=css-gencontent](http://caniuse.com/#feat=css-gencontent)

您可能想查看[本指南](http://css-tricks.com/css-content/)，以获取更多信息并更好地了解此属性！它解释了特殊字符的使用等。您应该注意它们不能被转换或动画。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T10:06:07.960

使用伪类

```
.wrap:before{
    content:"Important Generated Content";
    font-weight:bold
} 
```

**[演示](http://jsfiddle.net/2sM4k/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T10:27:51.257

CSS 无法更改页面上的内容，您需要 JavaScript。但是，您可以使用`:before`伪元素在元素之前创建一个“假”元素，并使用`content`CSS 规则向其添加内容。

```
.runtime:before{
    content: "Important Generated Content";
    font-weight: bold;
} 
```

[有些人](http://www.quirksmode.org/css/content.html)对此有疑问，因为 CSS 从来没有打算将内容插入页面，只是“样式”它。在 CSS 中执行此操作肯定比 JavaScript 更方便，它带来了一个重大挫折，**使用辅助技术的用户可能会遇到此**[博客文章](http://cssgallery.info/testing-the-accessibility-of-the-css-generated-content/)中的概述问题，并且不会读取伪元素中生成的内容。

另一种方法是使用 JavaScript 生成标签。`<p>`此示例在所有带有 class 的标签之上创建一个元素`.important`。

[参见 jsFiddle](http://jsfiddle.net/dcfQq/)

**HTML**

```
<div class="important">I'm very important</div>
<div>I'm not</div>
<div class="important">I'm very important</div> 
```

**jQuery**

```
$(document).ready(function () {
    $('.important').before('<div class="important-notice">Important!</div>');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T10:07:44.143

你也可以使用jquery...

```
$('.runtime').before('<p>Test</p>'); 
```

# java - 从原始帧缓冲区数据中获取 jpg 图像

> ID：15220927
> 
> 赞同：3
> 
> 时间：2013-03-05T10:03:41.407
> 
> 标签：java, android, framebuffer

我能够获得 android framebuffer。但我不知道如何将这些原始字节转换为 jpg 图像文件。如果我尝试使用 java bufferedImage.setpixel 方法在我的笔记本电脑上绘制图像。我得到不正确的彩色图像

```
Process sh = Runtime.getRuntime().exec("su", null,null);    
OutputStream  os = sh.getOutputStream();
os.write("/system/bin/cat /dev/graphics/fb0 > /sdcard/img.raw".getBytes());
os.flush();          
os.close();
sh.waitFor();` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T14:19:59.613

在 android 上，帧缓冲区中缓冲了 2 个或更多图像。因此，当您按上述方式复制 fb0 文件时，其中至少有 2 个屏幕图像。您可以通过执行以下操作来拆分它们：

```
dd if=/sdcard/img.raw bs=<width_of_your_screen> \
   count=<height_of_your_screen> of=/sdcard/img-1.raw
dd if=/sdcard/img.raw bs=<width_of_your_screen> \
   count=<times height_of_your_screen> skip=<previous count> of=/sdcard/img-2.raw 
```

例如，如果您的设备是 480x320，像素编码为 4 个字节，您可以通过以下方式提取 2 个连续帧：

```
dd if=/sdcard/img.raw bs=1920 count=320 of=/sdcard/img-1.raw
dd if=/sdcard/img.raw bs=1920 count=320 skip=320 of=/sdcard/img-2.raw 
```

`fb0`如果帧缓冲区中有 3 个图像：

```
dd if=/sdcard/img.raw bs=1920 count=320 skip=640 of=/sdcard/img-3.raw 
```

在哪里：

*   `dd`是一个 linux 实用程序，用于复制和转换带有参数的原始文件：

    *   `if`用于“输入文件”
    *   `of`用于“输出文件”
    *   `bs`用于“块大小”。在示例中 480x4=1920（480 像素高，每像素 4 个字节）
    *   `count``if`是计算要读取和写入多少“块大小” `of`（即在这里我们读/写宽度大小）
    *   `skip`第二张图片是要跳过的“块大小”的 nb（即`count`从第一张图像中跳过 nb）

您可以通过将块大小设置为 480x320x4=614400 和 count=1 来使用更简单的命令，但是如果您需要动态支持不同的屏幕尺寸，我发现拆分 bs 和计数，因为在我的示例中更容易使用参数进行编程。

另请注意，如果您从设备外壳运行上述命令，您的设备可能没有该`dd`命令。如果您安装了busybox，则可以替换`dd`为`busybox dd`

图像根据您的设备以 RGB32、BGR32、... 像素格式进行编码。您需要重新编码它们以获得 JPG 或 PNG...在 Stackoverflow 上有一些使用[ffmpeg](http://www.ffmpeg.org/)的示例，您可能会找到这些示例。一个简单的示例是（对于 RGB32 设备，屏幕为 480x320）：

```
ffmpeg -vframes 1 -vcodec rawvideo -f rawvideo -pix_fmt rgb32 -s 480x320 -i img-1.raw -f image2 -vcodec mjpeg img-1.jpg 
```

如果您使用 ffmpeg，stackoverflow 上也有帖子指出如何为 android 构建它（即[https://stackoverflow.com/a/9681231/1012381](https://stackoverflow.com/a/9681231/1012381)）

# ember.js - Ember 数据 - 按 ID 查找并使用过滤器

> ID：15220928
> 
> 赞同：0
> 
> 时间：2013-03-05T10:03:42.527
> 
> 标签：ember.js, ember-data

有没有办法使用`find`方法来请求这样的 URL？

`http://awesomedomain.com/api/models/1/?foo=bar`

现在，如果我使用`Model.find({id: 1, foo: 'bar'})`，它会自动使用`findQuery`并且请求的 URL 是`api/models/?id=1&foo=bar`，这会在后端触发不同的方法。

另一种选择是在后端路由中解决这个问题，但我想知道它是否可以在**Ember**中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:37:58.343

我同意你应该能够提供这样的东西：

```
Your.Model.find(1,{foo:"bar"}) 
```

现在，你唯一能做的就是：

```
Your.Model.find(1) 
```

然后在您的 RestAdapter 中，手动覆盖 ajax 请求以添加哈希/查询参数：

```
Your.RESTAdapter = DS.RESTAdapter.extend({
  url: 'http://awesomedomain.com/api/models',
  ajax: function(url, type, hash) {
    hash.url = url;
    hash.type = type;
    hash.dataType = 'json';
    hash.contentType = 'application/json; charset=utf-8';
    hash.context = this;
    hash.data = {foo:"bar"};
    jQuery.ajax(hash);
  }
}); 
```

# python - python程序从命令行接受字符串并打印文件夹中与该字符串匹配的所有文件

> ID：15220930
> 
> 赞同：0
> 
> 时间：2013-03-05T10:03:52.283
> 
> 标签：python, command-line, filesystems

如何编写程序以从命令行接受字符串并打印文件夹（也是子文件夹）中与该字符串匹配的所有文件名？

我正在寻找模式匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:25:41.857

您可以使用此技术

```
import os, fnmatch, sys
def all_files(root, patterns='*', single_level=False, yield_folders=False):
    # Expand patterns from semicolon-separated string to list
    patterns = patterns.split(';')
    for path, subdirs, files in os.walk(root):
        if yield_folders:
            files.extend(subdirs)
        files.sort( )
        for name in files:
            for pattern in patterns:
                if fnmatch.fnmatch(name, pattern):
                    yield os.path.join(path, name)
                    break
        if single_level:
            break

user_definedpath, filepattern = sys.argv[1], sys.argv[2]
# Invoking the all_files and putting them into list
#thefiles = list(all_files('/tmp', '*.py;*.htm;*.html'))
thefiles = list(all_files(user_definedpath, filepattern))
print thefiles 
```

现在您可以将这个文件保存为`sample.py`say`/tmp/abc/sample.py` 然后您可以执行为`python /tmp/abc/sample.py "/tmp/xyz/" "*.py;*.txt"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:33:24.233

```
 import sys, os, operator, re
    def filesMatching(pattern, top):
        return [f for f in os.listdir(top) if os.path.isfile(os.path.join(top,f)) and re.match(pattern, f)] + reduce (operator.__concat__, [filesMatching (pattern, os.path.join(top,f)) for f in os.listdir (top) if os.path.isdir(os.path.join(top,f))], [])

    print (filesMatching (sys.argv[1], sys.argv[2])) 
```

# sql - 从不同的结果中选择不同的结果

> ID：15220934
> 
> 赞同：0
> 
> 时间：2013-03-05T10:03:57.693
> 
> 标签：sql

下面是查询

```
select DISTINCT movie_master.MovieMasterID, MOVIE_VERSION.ReleaseDate, 
movie_master.displayorder,movie_classification.mc_code,
movie_master.title As Title,
movie_master.BioCast,movie_master.BioDirector,movie_master.LinkWord,
CASE WHEN ((DATEDIFF(day,MOVIE_VERSION.ReleaseDate,getdate())  <=7) and (DATEDIFF(day,MOVIE_VERSION.ReleaseDate,getdate()) >=0)) THEN 'JUST RELEASED' ELSE '' END AS RELEASETAG,
movie_master.Synopsis,movie_language.NAME as Language,
CASE WHEN movie_master.DistributorID = 8 THEN 0 ELSE 9999 END AS distributororder,
movie_distributor.name as distributor
from movie_master 
left join MOVIE_LANGUAGE on MOVIE_MASTER.Language = movie_language.languageid
left join movie_distributor on MOVIE_MASTER.distributorid = movie_distributor.distributorid
left join movie_version on MOVIE_MASTER.MovieMasterID = MOVIE_VERSION.MovieMasterID
left join movie_classification on MOVIE_MASTER.classification = movie_classification.classificationid
left join movie_itemdetails on MOVIE_MASTER.MovieMasterID = movie_itemdetails.MovieMasterID 
where MOVIE_VERSION.ReleaseDate <= convert(varchar, GETDATE(), 101) 
and MOVIE_VERSION.MovieMasterID = movie_master.MovieMasterID
and movie_master.classification = movie_classification.classificationid
and movie_master.MovieMasterID = movie_itemdetails.MovieMasterID and movie_itemdetails.fieldid = 1 and movie_itemdetails.Type ='TRAILER'
and ((MOVIE_VERSION.FilmCode in (SELECT DISTINCT FILMID FROM MOVIE_TEMP)) OR (MOVIE_VERSION.Title in (SELECT DISTINCT TITLE FROM MOVIE_TEMP)))  
AND LEFT(MOVIE_VERSION.FILMCODE,1) <> 6
and MOVIE_VERSION.Enabled = 1
AND MOVIE_MASTER.Enabled = 1
AND (MOVIE_MASTER.MovieMasterID in (SELECT DISTINCT MOVIE_MASTER.MovieMasterID FROM MOVIE_MASTER))
order by MOVIE_MASTER.displayorder, MOVIE_VERSION.ReleaseDate desc, distributororder, MOVIE_MASTER.TITLE 
```

和结果集

```
310 2013-03-01 00:00:00.000 9999    NA  test456             JUST RELEASED       NA  9999
310 2013-02-28 00:00:00.000 9999    NA  test456             JUST RELEASED       NA  9999
244 2013-02-10 00:00:00.000 9999    U   I Love Hong Kong 2013   Alan Tam, Veronica Yip, Natalis Chan, Eric Tsang, Stanley Fung, Bosco Wong, Michael Tse, Kate Tsui, Joyce Cheng Chung Shu-Kai           The story takes place in the 1970s until modern times, in which all families are happily prepare and welcome the Chinese New Year in Hong Kong. However, a traditional restaurant in Yau Ma Tei faces terrible problem. At last, everything solved with the neighbours’ kind support and assistance as happy ending.    CANTONESE   0 
```

我的问题是，如何进一步增强我的查询以区分相同的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:15:03.667

您可以选择最后日期，并在选择列表中按其他项目添加分组：

```
select DISTINCT movie_master.MovieMasterID, max(MOVIE_VERSION.ReleaseDate),
movie_master.displayorder, movie_classification.mc_code,
movie_master.title As Title,
movie_master.BioCast, movie_master.BioDirector, movie_master.LinkWord,
CASE WHEN ((DATEDIFF(day,max(MOVIE_VERSION.ReleaseDate),getdate())  <=7)
and (DATEDIFF(day,max(MOVIE_VERSION.ReleaseDate),getdate()) >=0))
THEN 'JUST RELEASED' ELSE '' END AS RELEASETAG,
movie_master.Synopsis,movie_language.NAME as Language,
CASE WHEN movie_master.DistributorID = 8 THEN 0 ELSE 9999 END AS distributororder,
movie_distributor.name as distributor
...
group by movie_master.MovieMasterID, movie_master.displayorder, movie_classification.mc_code,
movie_master.title, movie_master.BioCast, movie_master.BioDirector,
movie_master.LinkWord, movie_master.Synopsis,
movie_language.NAME, movie_master.DistributorID, movie_distributor.name
order by MOVIE_MASTER.displayorder, max(MOVIE_VERSION.ReleaseDate) desc, distributororder, MOVIE_MASTER.TITLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:29:23.177

我想到的第一件事：

```
    选择
    电影大师ID,
    MAX(ReleaseDate) 作为 ReleaseDate，
    显示顺序，
    mc_code,
    标题，
    生物铸造，
    生物导演，
    链接词，
    发布标签，
    概要，
    语言，
    分销商订单，
    经销商
    从（
    选择不同的
        movie_master.MovieMasterID,
        MOVIE_VERSION.ReleaseDate，
        movie_master.displayorder,
        movie_classification.mc_code,
        movie_master.title 作为标题，
        movie_master.BioCast,
        movie_master.BioDirector，
        movie_master.LinkWord，
        案子
        WHEN ((DATEDIFF(day,MOVIE_VERSION.ReleaseDate,getdate()) =0))
                然后“刚刚发布”
            别的 ''
        以 RELEASETAG 结束，
        movie_master.简介，
        movie_language.NAME 作为语言，
        案子
            当 movie_master.DistributorID = 8 THEN 0
            否则 9999
        结束为经销商订单，
        movie_distributor.name 作为经销商
    来自电影大师
    左加入MOVIE_LANGUAGE
        在 MOVIE_MASTER.Language = movie_language.languageid
    离开加入movie_distributor
        在 MOVIE_MASTER.distributorid = movie_distributor.distributorid
    左加入movie_version
        在 MOVIE_MASTER.MovieMasterID = MOVIE_VERSION.MovieMasterID
    左加入movie_classification
        在 MOVIE_MASTER.classification = movie_classification.classificationid
    离开加入movie_itemdetails
        在 MOVIE_MASTER.MovieMasterID = movie_itemdetails.MovieMasterID
    其中 MOVIE_VERSION.ReleaseDate 6
        和 MOVIE_VERSION.Enabled = 1
        AND MOVIE_MASTER.Enabled = 1
        AND (MOVIE_MASTER.MovieMasterID in (SELECT DISTINCT MOVIE_MASTER.MovieMasterID FROM MOVIE_MASTER))

    ) T
    GROUP BY MovieMasterID,displayorder,mc_code,Title,BioCast,BioDirector,LinkWord,RELEASETAG,Synopsis,Language,distributororder,distributor
按 displayorder、ReleaseDate desc、distributororder、TITLE 排序

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:43:03.980

试试这个查询

```
select DISTINCT movie_master.MovieMasterID, 
                m.ReleaseDate, 
                movie_master.displayorder,movie_classification.mc_code,
                movie_master.title As Title,
                movie_master.BioCast,movie_master.BioDirector,movie_master.LinkWord,
CASE WHEN ((DATEDIFF(day,m.ReleaseDate,getdate())  <=7) and (DATEDIFF(day,m.ReleaseDate,getdate()) >=0)) THEN 'JUST RELEASED' ELSE '' END AS RELEASETAG,
movie_master.Synopsis,movie_language.NAME as Language,
CASE WHEN movie_master.DistributorID = 8 THEN 0 ELSE 9999 END AS distributororder,
movie_distributor.name as distributor
from movie_master 
left join MOVIE_LANGUAGE on MOVIE_MASTER.Language = movie_language.languageid
left join movie_distributor on MOVIE_MASTER.distributorid = movie_distributor.distributorid
left join movie_version m on MOVIE_MASTER.MovieMasterID = m.MovieMasterID
left join movie_classification on MOVIE_MASTER.classification = movie_classification.classificationid
left join movie_itemdetails on MOVIE_MASTER.MovieMasterID = movie_itemdetails.MovieMasterID 
where m.ReleaseDate <= convert(varchar, GETDATE(), 101) 
and m.MovieMasterID = movie_master.MovieMasterID
and movie_master.classification = movie_classification.classificationid
and movie_master.MovieMasterID = movie_itemdetails.MovieMasterID and movie_itemdetails.fieldid = 1 and movie_itemdetails.Type ='TRAILER'
and ((m.FilmCode in (SELECT DISTINCT FILMID FROM MOVIE_TEMP)) OR (m.Title in (SELECT DISTINCT TITLE FROM MOVIE_TEMP)))  
AND LEFT(m.FILMCODE,1) <> 6
and m.Enabled = 1
AND MOVIE_MASTER.Enabled = 1
AND (MOVIE_MASTER.MovieMasterID in (SELECT DISTINCT MOVIE_MASTER.MovieMasterID FROM MOVIE_MASTER))
AND EXISTS (
            SELECT 1
            FROM movie_version m2
            WHERE MOVIE_MASTER.MovieMasterID = m2.MovieMasterID
            HAVING MAX(m2.ReleaseDate) = m.ReleaseDate
            )            
order by MOVIE_MASTER.displayorder, m.ReleaseDate desc, distributororder, MOVIE_MASTER.TITLE 
```

# masm32 - 需要有关 masm32 程序的帮助

> ID：15220937
> 
> 赞同：0
> 
> 时间：2013-03-05T10:04:01.000
> 
> 标签：masm32

我只是汇编编程的初学者。这是我正在尝试的代码，但它一直返回错误。

错误是：

```
F:\masm32\bin>ml PRINTSTRING.ASM
Microsoft (R) Macro Assembler Version 6.14.8444
Copyright (C) Microsoft Corp 1981-1997\.  All rights reserved.
Assembling: PRINTSTRING.ASM
PRINTSTRING.ASM(35) : fatal error A1010: unmatched block nesting : data 
```

我的程序是：

```
;Print a String

data segment
;add your data here
mymessage db"Enter your data $"
end

stack segment
dw 128 dup(0)
end

code segment
Start:

;Set Segment Registers
    mov     ax,OFFSET mymessage
    mov     ds,ax
    mov     es,ax
    lea     dx,mymessage
    mov     ah,mymessage
    mov     ah,9
    int     21h

    mov     ah,1
    int     21h

    mov     ax,4c00h
    int     21h

end
end Start 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:19:13.360

添加`.model small`为第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:57:20.103

首先，你为什么要做 16 位 DOS 汇编？32 位组装更容易一些！

这有效：

```
.model small
.stack 100h
.data
mymessage db 'Enter your data $'

.code
start:
    mov     ax, @data
    mov     ds, ax

    lea     dx, mymessage 
    mov     ah, 09h
    int     21h

    mov     ah, 1h
    int     21h

    mov     ax, 4c00h
    int     21h
end start 
```

组装和链接：

```
D:\Projects\DOS>ml /c prateek.asm
Microsoft (R) Macro Assembler Version 6.15.8803
Copyright (C) Microsoft Corp 1981-2000\.  All rights reserved.

 Assembling: prateek.asm

D:\Projects\DOS>link16 prateek.obj

Microsoft (R) Segmented Executable Linker  Version 5.60.339 Dec  5 1994
Copyright (C) Microsoft Corp 1984-1993\.  All rights reserved.

Run File [prateek.exe]:
List File [nul.map]:
Libraries [.lib]:
Definitions File [nul.def]:

D:\Projects\DOS> 
```

它在 DOSBox 中运行良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-01T13:03:41.303

尝试这个

```
data segment

;add your data here

mymessage db"Enter your data $"

data ends

stack segment

dw 128 dup(0)

stack ends

code segment

Start:

;Set Segment Registers

    mov     ax,OFFSET mymessage

    mov     ds,ax

    mov     es,ax

    lea     dx,mymessage

    mov     ah,mymessage

    mov     ah,9

    int     21h

    mov     ah,1

    int     21h

    mov     ax,4c00h

    int     21h

code ends

end 
```

# c# - 换行符替换c#？

> ID：15220939
> 
> 赞同：6
> 
> 时间：2013-03-05T10:04:13.127
> 
> 标签：c#, visual-studio, windows-phone-7, windows-phone-8, windows-phone

我有一个 Windows Phone 应用程序。在应用程序中，我有一个文本框，其接受返回属性设置为 true。

我想要做的是从文本框中创建一个字符串并用特定字符替换新行，例如`"NL"`

我尝试了以下方法，但都没有奏效。

```
string myString = myTextBox.Text.Replace(Environment.NewLine,"NL");
string myString = myTextBox.Text.Replace("\n","NL"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T10:07:52.893

我不熟悉 windows phone（或 silverlight），但尝试拆分`\r`：

```
string myString = myTextBox.Text.Replace("\r","NL"); 
```

[为什么 Silverlight 文本框使用 \r 代替 Environment.Newline (\r\n)？](https://stackoverflow.com/questions/3610400/why-does-a-silverlight-textbox-use-r-for-a-newline-instead-of-environment-newli)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T10:08:20.587

考虑更换不同类型的换行符以处理所有可能性

```
string myString myTextBox.Replace("\r\n", "NL").Replace("\n", "NL").Replace("\r", "NL"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T10:11:20.960

使用此代码

```
var myString = myTextBox.Text.Replace("\r","NL"); 
```

这是为了与每个操作系统兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:44:48.110

具有类似主题的[问题](https://stackoverflow.com/questions/3022571/how-to-deal-with-the-new-line-character-in-the-silverlight-textbox)有一个非常优雅的[答案](https://stackoverflow.com/a/3022843/674700)，您可能会认为使用起来很有趣：

```
using System.Text.RegularExpressions;

myTextBox.Text = Regex.Replace(myTextBox.Text, @"\r(?!\n)|(?<!\r)\n", "NL"); 
```

# visual-studio-2010 - Visual Studio 在调试中全部中断

> ID：15220940
> 
> 赞同：5
> 
> 时间：2013-03-05T10:04:14.643
> 
> 标签：visual-studio-2010, debugging

我有一个解决方案，客户端和服务器都在运行，有很多项目，前端是我的解决方案中的 Silverlight。当代码运行时，我点击 break all 并希望在当前运行的代码行中停止。相反，我收到“没有可用的源，当前位置没有可用的源代码”消息。这可能是什么解决方案？请注意，无论何时执行全部中断，都会发生这种情况。标准断点确实停止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T10:21:00.357

这听起来像是标准行为......请记住，在幕后你有框架 dll（ntdll.dll / windowsbase.dll /presentationframework.dll 等）在发挥它们的魔力（监听消息泵，使用操作系统等） ...

所以大多数时候，当你“Break All”时，你很有可能陷入其中之一。
您可以打开`Call Stack`窗口并查看您的确切位置（您可能需要右键单击和“ `Show External Code`”）...有时您可能还会在其中看到您的特定方法调用...

*在*代码中放置断点并在其中停止通常是在与您的特定应用程序相关的方法中停止的正确方法。

# blackberry - MapField 与其他屏幕重叠

> ID：15220941
> 
> 赞同：0
> 
> 时间：2013-03-05T10:04:19.620
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde

```
images = _appData.getImageAccoToScr("StoreLocaterMapView");
//Add Title Bar to Screen
addTitle();
// initializing the Map component
mMapField =  new CustomMapField(BLANK, null, _appData, getGraphics(), hFM);
// Adding button to toggle to store list view
addToggleButton();
/*// initializing the Map component
mMapField = new CustomMapField(BLANK, null, _appData, getGraphics(), hFM);    */

// Manager to add the components
_contentOne = new VerticalFieldManager(Color.WHITE | NO_HORIZONTAL_SCROLL | NO_VERTICAL_SCROLL | NON_FOCUSABLE);

// adding pins related to stores to map view
addPinsToMap();

//Add WaitingPopUp to screen
addPopup();

// adding manager to screen
_contentOne.add(mMapField);
add(_contentOne); 
```

这是添加地图和一个水平管理器的主要代码。当我滚动地图字段时，它与经理重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:42:57.543

您是否尝试将该地图添加到经理？

mainmanager.add（你的水平经理） mainmanager.add（你的经理，包括地图）

添加（主经理）

# asp.net-mvc - 将动态数据传递给 mvc3 中的 jqplot 饼图？

> ID：15220943
> 
> 赞同：0
> 
> 时间：2013-03-05T10:04:28.257
> 
> 标签：asp.net-mvc, jqplot, pie-chart

我想显示一个 jqplot 饼图，我能够用静态数据显示它，但我想用数据库中的动态数据显示..为此，我连接到我的数据库并将数据绑定到一个列表，现在我怎么能从我的角度调用该列表？

```
$(document).ready(function(){
var data = [
['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14], 
['Out of home', 16],['Commuting', 7], ['Orientation', 9]
];
 var plot1 = jQuery.jqplot ('chart1', [data], 
  { 
   seriesDefaults: {
    // Make this a pie chart.
    renderer: jQuery.jqplot.PieRenderer, 
    rendererOptions: {
      // Put data labels on the pie slices.
      // By default, labels show the percentage of the slice.
      showDataLabels: true
    }
  }, 
  legend: { show:true, location: 'e' }
  }
  );
  }); 
```

，现在我的要求是显示数据库中的相同数据，并且我将此数据绑定到我的控制器中的列表，现在我如何从我的视图中调用该列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:36:02.710

考虑到您使用的是 MVC，您可以将所有数据与键值对列表一起放入模型中，然后将其转换为 JSON，同时将其传递给 javascript。如果您希望通过 ajax 完成此操作，则可以将请求发送到 json 并从控制器的 Action 方法获取 JSON 结果。

在您的操作方法中使用 Javascript 序列化程序将模型转换为 Json

```
var data = somedata_with_KeyValuePair;
var model = new MyModel();
var serializer = new JavaScriptSerializer();
model.JsonData = serializer.Serialize(data);
return View(model); 
```

然后像这样使用它

```
var data = <%= Model.JsonData %> 
```

或者如果您使用的是 MVC 3，那么以下也可以工作

```
@Html.Raw(Json.Encode(YourObjectContaingListOfKeyValue)) seems to do the trick. 
```

# gdb - ARM (STM32fxx) 的 OpenOCD (Olimex) 最终启动序列出错

> ID：15220944
> 
> 赞同：0
> 
> 时间：2013-03-05T10:04:29.440
> 
> 标签：gdb, arm, microcontroller, stm32, openocd

我在 Eclipse 中为 arm STM32F10x 系列使用 openOCD，在编写整个代码并在程序中构建所有内容后，我将对其进行调试，完成 99% 的过程后出现以下错误：

> 最终启动序列中的错误 无法执行 MI 命令：
> -exec-run 来自调试器后端的错误消息：创建进程时出错

生成以下错误，我无法调试我的程序。所以请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:56:05.990

这是一个 gdb 错误（这里的“后端是指 gdb 后端，与与 Eclipse 集成的前端相反）。您需要根据您所说的使用 Eclipse 提供有关您的配置的更多信息使用 openOCD 和 GDB。您是否为您的目标正确编译了 openOCD？您使用的是哪个操作系统？

您似乎也对 openOCD 感到困惑，openOCD 是一个与您的目标进行 JTAG 通信的程序（在您的情况下，通过“Olimex”，我假设您的意思是来自 Olimex 的 Jtag 密钥？）。一旦 OpenOCD 启动并正常运行，您就可以使用 GDB 调试您的目标。

# c# - Entity Framework 5 POCO——创建和管理关系

> ID：15220945
> 
> 赞同：1
> 
> 时间：2013-03-05T10:04:31.020
> 
> 标签：c#, entity-framework

我正在使用 EF5，POCO 数据库优先方法。假设我需要创建一个新客户和一个新订单：-

```
var customer = new Customer();
var order = new Order();

order.Customer = customer;
order.CustomerId = customer.Id;

customer.Orders.Add(order); 
```

我真的必须包括最后三行来建立关系吗？这里要指出的是，我正在内存中创建实体层次结构，并可能长时间操纵它，直到用户点击“保存”。

让我困惑的是创建几个新客户对象的想法。每个最终都会以 0 的 ID 结束（在被持久化之前）。在我的代码中有很多地方我使用 Order 的 CustomerId 属性来做一些事情。如果有几个新客户（ID 0），那么我如何获得正确的客户？或者我应该总是使用`Order.Customer`并且从不使用`Order.CustomerId`（在这种情况下，摆脱上面代码中的 ID 分配是否安全）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:12:41.313

当您添加新客户时，将插入整个图表并正确设置关系。您不需要手动设置关系（请参阅[添加一对多实体](http://entityframeworktutorial.net/add-one-to-many-entities-in-entity-framework.aspx#.UTXG0DsTtEY)）：

```
var customer = new Customer();
customer.Orders.Add(new Order());
context.Customers.Add(customer);
context.SaveChanges(); 
```

当您调用`Customers.Add`客户实体时，将添加到上下文并放入`Added`状态。所有相关实体（订单）都会发生同样的情况 - 它们将具有`Added`状态。所有图表将在`SaveChanges`调用时插入数据库。

请记住，此技巧不适用于更新图形。

**顺便说一句：**有一篇很好的 MSDN 文章[定义和管理关系](http://msdn.microsoft.com/en-us/library/vstudio/ee373856%28v=vs.100%29.aspx)值得一读。

* * *

更新：使用 EF 时会发生以下情况：

```
var customer = new Customer();
var order = new Order();
customer.Orders.Add(order); // order.Customer is null 
```

此时EF完全没有参与。您可以手动设置订单对象的客户。通常我在`Add`or`Remove`方法中管理两种方式的关联。即添加订单到订单集合，并将所有者设置为`this`. 此时由您决定。默认情况下，订单所有者将为`null`. 下一个：

```
context.Customers.Add(customer); // order.Customer is customer, but no ids 
```

EF来了。没有任何东西被持久化到数据库中。**但是**EF 足够聪明，可以知道订单与客户有关，并且它会将客户（所有者）引用设置为该特定客户。现在不是`null`了。但是，因此没有任何东西被持久化，对象还没有 ID。

```
context.SaveChanges(); // ids updated 
```

瞧。现在 EF 已将对象插入数据库。它接收 ID，并使用正确的 ID 更新对象。

# tridion - 我们可以添加“全选”复选框以使用扩展选择 Tridion 组件上的多个复选框

> ID：15220947
> 
> 赞同：0
> 
> 时间：2013-03-05T10:04:40.870
> 
> 标签：tridion, tridion-2011, tridion-worldserver

只是为了确认一下，我们是否可以在 Tridion Translation 的组件上添加一个新的复选框“全选”，目标是我们有很多语言，并且业务用户希望单击一下即可全选。我知道这些字段是只读的，但是总是欢迎检查我们是否可以有某种类型的扩展来实现这一点或任何其他建议。

请看下面的屏幕截图，带有新的“全选”复选框。

![交易管理器组件](../Images/99184cd4d16ba001f0cf14f6c8f6460a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:01:24.173

来自 SDL 产品经理 Alexandra Popova：

嗨，马诺伊，

这个复选框非常有意义，因为目标语言列表可能非常大。该功能已被请求（注册为增强请求）但尚未实施。

可以创建一个插件，在加载屏幕时将复选框设置为未选中。还可以对插件进行编码以选择性地检查某些出版物而不是其他出版物（基于 tcmuri）。在插件之前需要应用一个修补程序 (Test Track #82766) - 如果您有兴趣，请与 SDL 支持联系。

顺便说一句，我看到您的出版物名称在中文（PRC）中显示不正确，例如：这个问题有一个解决方法：

列的宽度可以在 TranslationJob.aspx 中更改 - ID 为 TargetsTable 的表。请注意，所做的任何更改显然都将被我们提供的任何新修补程序/版本覆盖，因此不完全支持更改它:) 另请注意，当 IIS 缓存已编译的 ASPX 文件时，需要重置 IIS。

# hibernate - 使用 Hibernate 将大量数据插入数据库

> ID：15220952
> 
> 赞同：0
> 
> 时间：2013-03-05T10:04:54.253
> 
> 标签：hibernate

当插入大量数据时，我的应用程序内存不足，我尝试了两种解决问题的方法：

1）。如此处所述使用休眠批处理 - [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)

2）。进行批量提交：

```
split data into batches;
for each batch{
  session.beginTxn();
  persist();
  session.commitTxn()
} 
```

我测试了解决方案，保存的内存是一样的。

`Question:`你觉得这个结果合适吗？幕后发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:13:40.250

Hibernate 不是插入大量数据的正确工具，而是使用存储过程。

如果你喜欢，你可以很容易地通过hibernate调用你的存储过程。

# http - 是否可以在不干扰服务器的情况下使用 Charles 代理或任何其他工具故意生成错误 500

> ID：15220954
> 
> 赞同：2
> 
> 时间：2013-03-05T10:04:59.557
> 
> 标签：http, drupal-7, charles-proxy

我正在尝试为基于 drupal 的网站生成错误 500。我没有权限对服务器进行任何更改。有没有办法在不干扰服务器的情况下生成错误 500 - 内部服务器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:16:44.207

在这里尝试[Piskvor 的回答](https://stackoverflow.com/questions/3004407/php-force-apache-error)。我不确定什么是“扰乱服务器”，但您可以尝试将其作为页面回调放入模块中，或者放入启用 PHP 过滤器的节点主体中。我还没有测试它，但这就是我要开始的地方。

引用帖子中的代码：

```
<?php
header('HTTP/1.1 500 Internal Server Error');
echo <<<ERRORTEXT
The server encountered an unexpected condition which prevented it 
from fulfilling the request.
ERRORTEXT;
// also notify server operator, maybe?
exit;
?> 
```

# javascript - 为什么有时我的加载功能不起作用

> ID：15220955
> 
> 赞同：0
> 
> 时间：2013-03-05T10:05:09.747
> 
> 标签：javascript, jquery, html

所以在我的应用程序中，我打开一个对话框并将一些内容加载到其中。大多数时候它工作正常，但有时它只是不加载内容。这是我的做法。

```
$('#popup_background').css('z-index', 101);
    $('#popup').empty();  
    $('#popup').dialog('open');
    $('#popup').load('<?php echo site_url("popupContent"); ?>',{'id':new_id}, function()    
    {
        $('#popup').bind('dialogclose', function(event) {
            $('#popup_background').css('z-index', 99);
     });
    }

    ); 
```

如果我签入萤火虫，我总是会取回内容，但有时它只是没有显示在对话框中。如果发生这种情况，我的 popup_background 不会更改 z-index ，这意味着不会调用 dialogclose 。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:17:45.117

有时可能是您的`load`功能未完成..为什么不在功能完成`open`后保留对话框`load`..所以如果加载功能未执行..您至少没有打开空白对话框.. :) :)

```
$('#popup').load('<?php echo site_url("popupContent"); ?>',{'id':new_id}, function()    
{
    $('#popup').dialog('open');
    $('#popup').bind('dialogclose', function(event) {
        $('#popup_background').css('z-index', 99);
 });
} 
```

# spring - 在没有类属性的xml中定义bean

> ID：15220957
> 
> 赞同：4
> 
> 时间：2013-03-05T10:05:12.417
> 
> 标签：spring, class, attributes

我是春天世界的新手。在一次采访中，有人问我们是否可以在 XML 中创建一个 bean 而无需指定`class`（即 bean 将只有一个`id`属性）。我没有答案。请告知我们是否可以在不指定类属性的情况下在 Spring 中以 XML 格式创建 bean，以及我们通常会在哪些条件下这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:10:54.263

Spring[文档](http://static.springsource.org/spring/docs/3.0.x/reference/springbeansdtd.html)说得很清楚：

```
<!--
    Each bean definition must specify the fully qualified name of the class,
    except if it pure serves as parent for child bean definitions.
-->
<!ATTLIST bean class CDATA #IMPLIED> 
```

[本节](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-child-bean-definitions)详细解释它并提供有用的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:38:45.493

正如 Szymon 所描述的，bean 定义继承是一种方式。基于模式的配置是另一种方式，[请参阅](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/htmlsingle/#xsd-config-body-schemas-util). 例如，取自 Spring 的文档，

```
<!-- creates a java.util.List instance with the supplied values -->
<util:list id="emails">
    <value>pechorin@hero.org</value>
    <value>raskolnikov@slums.org</value>
    <value>stavrogin@gov.org</value>
    <value>porfiry@gov.org</value>
</util:list> 
```

# actionscript-3 - Flash AS3 错误：1106 增量操作数必须是引用

> ID：15220960
> 
> 赞同：-1
> 
> 时间：2013-03-05T10:05:15.913
> 
> 标签：actionscript-3

1106 增量操作数必须是引用。

```
this.format.size = Object(Number(this.format.size)--); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:54:23.117

第一：你在哪里创建格式变量？

第二行

```
 this.format.size = Object(Number(this.format.size)--); 
```

没有意义。当递减用作后缀运算符时，表达式的值在后缀运算符被处理之前返回。利用：

```
format.size -= 1; 
```

或者

```
format.size--; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:09:29.193

你可以试试

```
var tmpNum:Number = Number(this.format.size);
this.format.size  = Object(tmpNum--); 
```

！！但为什么不使用：

```
this.format.size--; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:18:10.823

转换/转换为数字是罪魁祸首。`--`是 的简写`-= 1`。所以它需要一些东西来存储新值。但是 Number 转换返回一个值，而不是一个引用，所以你在那里写的内容转换为：

```
//let's say this.format.size holds the value '5'
this.format.size = Object(5 -= 1); 
```

而且您显然不能将值存储在值中。

如果您不是 100% 确定 this.format.size 返回一个数字，那么简单的方法是：

```
this.format.size = parseInt( this.format.size ) -1; 
```

但显然最好预先验证存储在 format.size 中的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:16:04.293

this.format.size 为 null 或未定义或 size 不是格式的属性（即 this.format 为 null ）

# python - 使用 scikit-learn 时出现属性错误

> ID：15220961
> 
> 赞同：4
> 
> 时间：2013-03-05T10:05:20.323
> 
> 标签：python, nltk, scikit-learn, feature-extraction

我正在尝试使用 scikit 使用余弦相似度来查找类似的问题。我正在尝试互联网上提供的此示例代码。[链路 1](https://stackoverflow.com/questions/12118720/python-tf-idf-cosine-to-find-document-similarity)和[链路 2](https://stackoverflow.com/questions/11911469/tfidf-for-search-queries)

```
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.feature_extraction.text import TfidfTransformer
from nltk.corpus import stopwords
import numpy as np
import numpy.linalg as LA

train_set = ["The sky is blue.", "The sun is bright."]
test_set = ["The sun in the sky is bright."]
stopWords = stopwords.words('english')

vectorizer = CountVectorizer(stop_words = stopWords)
transformer = TfidfTransformer()

trainVectorizerArray = vectorizer.fit_transform(train_set).toarray()
trainVectorizerArray = vectorizer.
testVectorizerArray = vectorizer.transform(test_set).toarray()
print 'Fit Vectorizer to train set', trainVectorizerArray
print 'Transform Vectorizer to test set', testVectorizerArray
cx = lambda a, b : round(np.inner(a, b)/(LA.norm(a)*LA.norm(b)), 3)

for vector in trainVectorizerArray:
    print vector
    for testV in testVectorizerArray:
        print testV
        cosine = cx(vector, testV)
        print cosine

transformer.fit(trainVectorizerArray)
print transformer.transform(trainVectorizerArray).toarray()

transformer.fit(testVectorizerArray)
tfidf = transformer.transform(testVectorizerArray)
print tfidf.todense() 
```

我总是收到这个错误

```
Traceback (most recent call last):
File "C:\Users\Animesh\Desktop\NLP\ngrams2.py", line 14, in <module>
trainVectorizerArray = vectorizer.fit_transform(train_set).toarray()
File "C:\Python27\lib\site-packages\scikit_learn-0.13.1-py2.7-win32.egg\sklearn  \feature_extraction\text.py", line 740, in fit_transform
raise ValueError("empty vocabulary; training set may have"
ValueError: empty vocabulary; training set may have contained only stop words or min_df  (resp. max_df) may be too high (resp. too low). 
```

我什至检查了[此链接](http://pyevolve.sourceforge.net/wordpress/?p=1589)上可用的代码。我得到了错误`AttributeError: 'CountVectorizer' object has no attribute 'vocabulary'`。

如何解决这个问题？

我在 Windows 7 32 位和 scikit_learn 0.13.1 上使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T10:11:02.510

由于我正在运行开发（0.14 之前）版本，`feature_extraction.text`模块进行了大修，所以我没有收到相同的错误消息。但我怀疑您可以通过以下方式解决此问题：

```
vectorizer = CountVectorizer(stop_words=stopWords, min_df=1) 
```

该`min_df`参数导致`CountVectorizer`丢弃出现在太少文档中的任何术语（因为它没有任何预测价值）。默认情况下，它设置为 2，这意味着您的所有术语都会被丢弃，因此您会得到一个空的词汇表。

# html - 引导页面居中不起作用

> ID：15220963
> 
> 赞同：0
> 
> 时间：2013-03-05T10:05:21.943
> 
> 标签：html, css, twitter-bootstrap

我正在使用引导程序创建页面布局，但内容总是稍微偏左多于右侧。我注意到 row 类的边距为 -20px，我认为这是问题的原因，但肯定不是这样吗？

这是我的标记：

```
<div class="row header-wrap">
    <div class="container header">
        <div class="row">
            <div class="span6">
            test
            </div>
            <div class="span6">
            test
            </div>
        </div>
    </div>
</div> 
```

BTW Header 和 header-wrap 尚未定义。

外行 div 的目的是稍后为标题创建一个连续的背景。

* * *

![在此处输入图像描述](../Images/415fe82a58b5dd84b9106dd06cc1a033.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:27:05.453

有你的问题。您正在使用`.row`两次。`.row`从这里删除：

```
<div class="row header-wrap"> 
```

并做到：

```
<div class="header-wrap"> 
```

此外，将背景颜色赋予.`.header-wrap`而不是`.container`.

### 查看[jsFiddle的输出](http://jsfiddle.net/praveenscience/VCfP9/2/embedded/result/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:00:25.253

为什么使用没有父 div 的行 div 是一个坏主意？

它永远不会让您将内容居中，因为行类的左边距为-20px，也就是说，任何应用于该行的样式都将始终在左侧流出，因此不会将其中的元素居中. 因此，使用围绕它的 div 作为父级，可以解决问题。您使用行类的方式是错误的使用方式。

您可以通过以下方式实现您的设计：Jsfiddle [Demo](http://jsfiddle.net/shail/aBBsU/show)

```
<header>
<div class="container">

        <div class="row">
        <div class="span6">
        test
        </div>
        <div class="span6">
        test
          </div>

    </div>
   </div>
</header> 
```

# delphi - 为什么不显示 TDBGrid 上的垂直滚动条？

> ID：15220964
> 
> 赞同：5
> 
> 时间：2013-03-05T10:05:26.040
> 
> 标签：delphi, tdbgrid

我在一个表单上有两个数据库网格，一个有一个垂直滚动条，另一个没有，即使 DataSource 查询返回的结果多于网格的可见行。

为什么不显示垂直滚动条`TDBGrid`？

* * *

[更新] Delphi XE2 启动器，使用 AnyDac。

当我第一次启动程序时，数据库网格确实有一个垂直滚动条，但后来它消失了，我缩小了范围，但仍然不明白如何纠正这个问题。

我有两个 MySql 表和两个 DBgrids。一个是所有测试运行的概述，另一个包含在测试运行期间进行的测量的详细信息。当用户单击“摘要”网格的一行时，我会更新“详细信息”网格的查询参数。这有效并且不会删除滚动条。

当我开始新的 tets 运行并将新行插入“摘要”表时，问题就来了 - **“详细信息”**表的滚动条消失了！

```
mysql> describe test_runs;
+------------------+-------------+------+-----+-------------------+----------------+
| Field            | Type        | Null | Key | Default           | Extra          |
+------------------+-------------+------+-----+-------------------+----------------+
| run_id           | int(11)     | NO   | PRI | NULL              | auto_increment |
| start_time_stamp | timestamp   | NO   |     | CURRENT_TIMESTAMP |                |
| end_time_stamp   | timestamp   | YES  |     | NULL              |                |
| description      | varchar(64) | YES  |     | NULL              |                |
+------------------+-------------+------+-----+-------------------+----------------+
4 rows in set (0.02 sec)

mysql> describe measurements;
+------------------------+-----------+------+-----+-------------------+-------+
| Field                  | Type      | Null | Key | Default           | Extra |
+------------------------+-----------+------+-----+-------------------+-------+
| run_id                 | int(11)   | NO   | MUL | NULL              |       |
| measurement_time_stamp | timestamp | NO   |     | CURRENT_TIMESTAMP |       |
| ph                     | float     | NO   |     | NULL              |       |
| conductivity           | float     | NO   |     | NULL              |       |
| cod                    | float     | NO   |     | NULL              |       |
+------------------------+-----------+------+-----+-------------------+-------+
5 rows in set (0.04 sec)

mysql> 
```

AnyDac 查询分别是

```
SELECT 
   run_id,
   start_time_stamp,
   end_time_stamp,
   CONCAT(CONCAT(CONCAT(CONCAT(LPAD(EXTRACT(HOUR FROM timediff(end_time_stamp,start_time_stamp)), 2, '0'), ":"),LPAD(EXTRACT(MINUTE FROM timediff(end_time_stamp,start_time_stamp)), 2, '0'), ":"), LPAD(EXTRACT(SECOND FROM timediff(end_time_stamp,start_time_stamp)), 2, '0'))) AS duration,
   description    
FROM 
   test_runs 
ORDER BY 
   start_time_stamp 
DESC 
```

和

```
SELECT 
   run_id,
   measurement_time_stamp, 
   ROUND(ph, :float_precision) as ph, 
   ROUND(conductivity, :float_precision) as conductivity, 
   ROUND(cod, :float_precision) as cod    
FROM 
   measurements    
WHERE 
   run_id=:run_id
ORDER BY 
   measurement_time_stamp 
DESC 
```

如您所见，`measurements`表中有对`test_runs`表的引用

当我执行以下 SQL 时，测量表的滚动条消失了：

```
INSERT INTO 
   test_runs (start_time_stamp, description) 
VALUES 
   (CURRENT_TIMESTAMP, "<Currently running test>"); 

SELECT LAST_INSERT_ID() AS run_id 
```

谁能告诉我我做错了什么？感谢 0x000F4240

* * *

[更新] 再次问题是，当我在表格中添加一行时`test_runs`，反映`measurements`表格查询的DB网格的垂直滚动条消失了。

因此，不知何故，一个数据库网格/数据集/表正在影响另一个数据库网格。

实际MySql数据库中的数据是没问题的。无论我是否使用命令`INSERT INTO`和两个指定查询（在设计时固定 SQL 并且从未更改），或者如果我使用 @kobik 建议，都会出现问题`dataset.append`。

数据库内容很好，数据库内容正确，当我单击摘要`test_runs`数据库网格时，详细`measurements`数据库网格的内容已正确更新。

唯一的问题是在查询的表中插入一行`test_runs`会导致滚动条从 DB 网格的`measurements`DB 网格中消失。

当我将其注释掉时，我可以单击`test_runs`数据库网格并在**没有滚动条消失的情况下**在测试运行之间进行交换，但永远无法返回当前测试，因为数据库网格中没有它的条目。

当我第一次开始新测试`dataset`时，.RecordCount` 当然是零 - 这可能会导致滚动条消失？

但是，随着测量的进行（每隔一秒，基于计时器），我已经检查并且`dataset`.RecordCount` 的值会增加，所以这里应该是第二次测量后的滚动条吗？或者，一旦控件决定不需要它，我是否必须强制它出现？（使 DB 网格无效并不会导致出现丢失的滚动条）

* * *

[更新] 正如@kobik 所建议的，我已将 run_id 设为表上的主自动增量键和`test_runs`表上的索引`measurements`。我已经更新了上面给出的表格详细信息。我还将`mastersource`填充测试 drun 数据库网格的查询设置为测试运行“摘要”数据库网格查询的数据源。

我删除了数据库（我的代码在第一次运行时自动重新创建它）。起初，两个数据库网格都没有垂直滚动条，因为它们都是空的。当我添加第一个测试时，“摘要”数据库网格没有滚动条，因为它只有一个条目，“详细信息”数据库网格在 0 和条目处没有滚动条，滚动条出现在第二组测量中。

我添加了第二次测试运行，并且“sumamry”数据库网格有一个滚动条，因为它现在有两个条目，但是一旦我将第二个条目添加到摘要中，滚动条就从“详细信息”数据库网格中消失了（其中当有一个单一的测试运行时它**没有这样做**），无论它有多少条目（我在添加每组测量时设置断点并检查`measurementsQuery.RecordCount`并查看它是否为 0、1、2 ...）

值得指出的是，这只发生在我添加新的测试运行（**第一次**除外）时。如果我启动该程序，两个数据库网格都具有预期的滚动条（> 1 个条目）。我可以通过摘要单击或鼠标滚轮来显示相应测试运行的详细信息。滚动条永远不会消失——直到我添加一个新的测试运行，它将一行 i 插入到摘要数据库网格中。

[更新]
请参阅[https://stackoverflow.com/questions/15399769/why-is-the-vertical-scrollbar-on-a-tdbgrid-not-displayed-redux](https://stackoverflow.com/questions/15399769/why-is-the-vertical-scrollbar-on-a-tdbgrid-not-displayed-redux)

* * *

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T12:16:26.693

***在阅读了您的评论并查看了您的编辑***问题后，我很确定`TDBGrid`' 的“详细信息”在您的. 这就解释了为什么没有垂直滚动条 -只有当记录 > 1 时才会显示垂直滚动条。`DataSet`*`INSERT``TDBGrid`*

 *您可以通过检查`DataSet.RecordCount`链接到网格的 来进行简单的测试。它应该显示`1`。

* * *

显然，QC 中*有*[`TDBGrid vertical scrollbar dissappears`](http://qc.embarcadero.com/wc/qcmain.aspx?d=7527)一个已知问题： .
它从 D7..XE2 一路走来。（甚至可能适用于旧/新版本）。

> 当您有一个主/详细记录，并且使用 TDBGrid 显示详细信息时，垂直滚动条会随机消失，即使记录多于无法容纳也是如此！您可以看到滚动条的右边框轮廓，包括移动的拇指。就好像网格在滚动条上略微调整了大小。

这对于过滤的数据集也可能是正确的。
因此，您可能希望实施 QC 中建议的解决方法之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-04T20:01:30.960

我将滚动条设置为 ssBoth。它得到了修复*

# coffeescript - 如何在列表推导中使用变量？

> ID：15220968
> 
> 赞同：2
> 
> 时间：2013-03-05T10:05:33.980
> 
> 标签：coffeescript

我有以下 Coffeescript 代码：

```
result = ([number, process = number * 2, process] for number in [1, 2, 3]) 
```

编译成：

```
var number, process, result;

result = (function() {
  var _i, _len, _ref, _results;
  _ref = [1, 2, 3];
  _results = [];
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    number = _ref[_i];
    _results.push([number, process = number * 2, process]);
  }
  return _results;
})(); 
```

结果是一个多维数组：

```
[ [1, 2, 2], [2, 4, 4], [3, 6, 6] ] 
```

让我们假设`process`计算成本非常高，我想将该值用作几个不同函数的参数：

```
result = ([number, process = /* costly calculation */, function1(process), function2(process), function3(process)] for number in [1, 2, 3]) 
```

这实际上很好。但是，我不希望`process`自身的值成为结果数组的元素。它的值现在仍然是数组的第二个元素。当我查看编译后的 Javascript 时，我可以轻松地将定义`process`移出数组，如下所示：

```
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    number = _ref[_i];
    process = number * 2;
    _results.push([number, process]);
} 
```

**如何在 Coffeescript 中做到这一点？**

[在线](http://coffeescript.org/#try%3aresult%20=%20%28%5Bnumber,%20process%20=%20number%20%2a%202,%20process%5D%20for%20number%20in%20%5B1,%202,%203%5D%29%0A%0Aconsole.log%20result)尝试！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:45:16.087

在 CoffeeScript 块中也是表达式，所以你可以这样做：

```
result = (process = costlyCalculation(); [number, function1(process), function2(process), function3(process)] for number in [1, 2, 3]) 
```

或者，我建议不要使用分号来分隔语句，而是使用换行符：

```
result = for number in [1, 2, 3]
  process = costlyCalculation()
  [number, function1(process), function2(process), function3(process)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:19:22.683

执行此操作，这应该可以解决您的问题：

```
result = ([number = (process = /* costly calculation */) - process + number, function1(process), function2(process), function3(process)] for number in [1, 2, 3]) 
```

在这里，将为数组中的每个数字执行两个额外的操作（加法和减法）。但是，它不应该增加太多的计算成本。

可以进一步优化以降低计算成本。

更新：

当你不需要变量时使用`number`这个`process`：

```
result = ([function1(process = /* costly calculation */), function2(process), function3(process)] for number in [1, 2, 3]) 
```

# opencms - OpenCms 8 语言支持

> ID：15220970
> 
> 赞同：-1
> 
> 时间：2013-03-05T10:05:38.563
> 
> 标签：opencms

我正在尝试建立一个多语言网站（德语和英语）。我的第一个直观方法是在每篇文章和结构元素中使用语言选择器，以便以两种语言创建我的内容。

问题是我不知道如何切换语言。如何告诉 OpenCms 使用德文版的文章？我在哪里可以设置默认语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:24:26.663

OpenCms 使用资源的 locale-property 来了解内容应该以哪种语言显示。

要利用这一点，您可以在文件夹 /en/ 中创建内容（例如 /en/page1.html /en/about.html），并将 /en/ 文件夹的 locale-property 设置为“en”。

您也应该添加其他语言的内容。

要完成多语言设置，请将文件夹 /en/ 复制到 /de/

确保选择“不复制资源，只在文件夹中创建所有资源的兄弟姐妹”。

然后将 /de/ 文件夹的语言环境属性设置为“de”。

通过这种方式，OpenCms 知道必须以哪种语言提供内容。

当您创建一个新文件（在 /de/ 或 /en/ 中的任何一个中）时，不要忘记将其作为同级文件复制到另一个文件夹。

# ruby-on-rails - Ruby on Rails 中的 Facebook Omniauth 路由错误

> ID：15220974
> 
> 赞同：1
> 
> 时间：2013-03-05T10:05:41.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook, omniauth

我关注了[Rails Casts Episode #360](http://railscasts.com/episodes/360-facebook-authentication)，了解如何集成 facebook 登录。

当我单击“使用 Facebook 登录”时，出现以下错误：

```
Routing Error

No route matches [GET] "/auth/facebook" 
```

这是我的路线文件：

```
Frostfiress::Application.routes.draw do
  ActiveAdmin.routes(self)

  devise_for :admin_users, ActiveAdmin::Devise.config

  get "profiles/show"
  #get 'questions/:tag', to: 'questions#index', as: :tag
  #get 'places/:tag', to: 'places#index', as: :tag
  match 'auth/:provider/callback', to: 'sessions#create'
  match 'auth/failure', to: redirect('/')
  match 'signout', to: 'sessions#destroy', as: 'signout'

  resources :places

  devise_for :users

  devise_scope :user do 
      get 'register', to: 'devise/registrations#new', as: :register
      get 'login', to: 'devise/sessions#new', as: :login
      get 'logout', to: 'devise/sessions#destroy', as: :logout
      get 'password/change', to: 'devise/passwords#edit', as: :password
  end

  resources :answers

  resources :questions

  root :to => "questions#index"

  get '/:username', to: 'profiles#show' 
```

我必须在 RailsCast 中更改的所有其他文件都与教程中的完全相同。

我的 AppId 和 Secret 正在工作，但现在我收到路由错误。

有什么建议么？

谢谢

这是 rake 路由的结果：

```
profiles_show GET        /profiles/show(.:format)                  profiles#show
                                          /auth/:provider/callback(.:format)        sessions#create
                  auth_failure            /auth/failure(.:format)                   :controller#:action
                       signout            /signout(.:format)                        sessions#destroy
                        places GET        /places(.:format)                         places#index
                               POST       /places(.:format)                         places#create
                     new_place GET        /places/new(.:format)                     places#new
                    edit_place GET        /places/:id/edit(.:format)                places#edit
                         place GET        /places/:id(.:format)                     places#show
                               PUT        /places/:id(.:format)                     places#update
                               DELETE     /places/:id(.:format)                     places#destroy
              new_user_session GET        /users/sign_in(.:format)                  devise/sessions#new
                  user_session POST       /users/sign_in(.:format)                  devise/sessions#create
          destroy_user_session DELETE     /users/sign_out(.:format)                 devise/sessions#destroy
       user_omniauth_authorize            /users/auth/:provider(.:format)           devise/omniauth_callbacks#passthru {:provider=>/(?!)/}
        user_omniauth_callback            /users/auth/:action/callback(.:format)    devise/omniauth_callbacks#(?-mix:(?!))
                 user_password POST       /users/password(.:format)                 devise/passwords#create
             new_user_password GET        /users/password/new(.:format)             devise/passwords#new
            edit_user_password GET        /users/password/edit(.:format)            devise/passwords#edit
                               PUT        /users/password(.:format)                 devise/passwords#update
      cancel_user_registration GET        /users/cancel(.:format)                   devise/registrations#cancel
             user_registration POST       /users(.:format)                          devise/registrations#create
         new_user_registration GET        /users/sign_up(.:format)                  devise/registrations#new
        edit_user_registration GET        /users/edit(.:format)                     devise/registrations#edit
                               PUT        /users(.:format)                          devise/registrations#update
                               DELETE     /users(.:format)                          devise/registrations#destroy
                      register GET        /register(.:format)                       devise/registrations#new
                         login GET        /login(.:format)                          devise/sessions#new
                        logout GET        /logout(.:format)                         devise/sessions#destroy
                      password GET        /password/change(.:format)                devise/passwords#edit
                       answers GET        /answers(.:format)                        answers#index
                               POST       /answers(.:format)                        answers#create
                    new_answer GET        /answers/new(.:format)                    answers#new
                   edit_answer GET        /answers/:id/edit(.:format)               answers#edit
                        answer GET        /answers/:id(.:format)                    answers#show
                               PUT        /answers/:id(.:format)                    answers#update
                               DELETE     /answers/:id(.:format)                    answers#destroy
                     questions GET        /questions(.:format)                      questions#index
                               POST       /questions(.:format)                      questions#create
                  new_question GET        /questions/new(.:format)                  questions#new
                 edit_question GET        /questions/:id/edit(.:format)             questions#edit
                      question GET        /questions/:id(.:format)                  questions#show
                               PUT        /questions/:id(.:format)                  questions#update
                               DELETE     /questions/:id(.:format)                  questions#destroy
                          root            /                                         questions#index
                               GET        /:username(.:format)                      profiles#show 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T00:55:13.843

路由 /auth/facebook 不是自动生成的，如果它在那里，除非你将它映射到某个控制器函数，否则它实际上不会做任何事情。但是，您不需要这样做。

确保您实际上是在向 facebook 发送请求，否则omniauth 将无法执行任何操作。

[http://developers.facebook.com/docs/howtos/login/getting-started/](http://developers.facebook.com/docs/howtos/login/getting-started/)

您应该通过在成功时重定向到 /auth/facebook/callback 或在失败时重定向到 /auth/failure 来处理 facebook 对您的请求的响应。

# java - 如何使用 Java 从 Windows (MSCAPI) 上的智能卡获取用户身份？

> ID：15220976
> 
> 赞同：2
> 
> 时间：2013-03-05T10:05:50.077
> 
> 标签：java, windows, smartcard, pki, mscapi

我想使用 Sun 的 MSCAPIProvider 从 Windows 上的 Java 胖客户端的智能卡 (PKI) 获取用户的身份。目标是：

1.  用户打开应用
2.  提示卡
3.  提示输入 PIN
4.  我得到了 Java 中的 X509Certicate
5.  授予访问权限等

我根据[这个](https://stackoverflow.com/q/495392/696632)stackoverflow question sample 找到了列出 MY 商店中的所有证书，并且我能够使用 Microsoft Smartcard Provider PIN 提示符对一些字节进行签名。

这是我的代码：

```
Provider provider = Security.getProvider("SunMSCAPI");
KeyStore store = KeyStore.getInstance("Windows-MY", provider);
store.load(null, null);

System.out.println(store);
Enumeration<?> aliases = store.aliases();
while(aliases.hasMoreElements()) {
    String alias = aliases.nextElement().toString();
    Certificate[] signerKey = (Certificate[]) store.getCertificateChain(alias);
    Object entry = store.getKey(alias, null);
    System.out.println(alias + " " + Arrays.toString(signerKey));
    System.out.println(entry);
}

Signature sig = Signature.getInstance("SHA1withRSA",provider);
PrivateKey key = (PrivateKey) store.getKey("Michael-O", null);

sig.initSign(key);
sig.update("Test".getBytes());
System.out.println(Arrays.toString(sig.sign())); 
```

现在我面临两个问题：

1.  我不知道他的别名可能是什么（鸡鸡蛋问题）
2.  如何通过 HTTPS 建立 SSL 上下文来强制使用 X509Cert 进行 PIN 授权？

哪些是缺失的位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-26T12:24:37.837

对于 Windows 情况，通常智能卡供应商提供两个驱动程序。

*   *一种使用PKCS11*协议使用智能卡访问和签名。
*   另一个使用 Windows 加密服务提供商（又名*CSP*）访问和签名的服务

当您使用`SunMSCAPI`提供程序时，您可以访问本地用户 windows 密钥库，如果上面安装了一些 CSP 智能卡驱动程序；您还可以通过它查看智能卡证书（但您无法知道本地和智能卡证书之间的区别，因为 Windows 密钥库充当接口）。

如果您尝试通过*sunMSCAPI*访问智能卡的公共证书，则您正在访问公共密钥，因此无需引入 PIN。但是，如果您尝试执行签名，则 Windows 密钥库会将操作委托给智能卡*CSP*，它将提示您*输入 PIN*。

现在尝试回答您的两个具体问题：

1.  ***我不知道他的别名可能是什么（鸡鸡蛋问题）***

一个选项可以是在弹出窗口中打印所有证书（例如主题或序列号）的信息（保持别名和您显示的描述之间的关系），让用户选择要使用的证书，然后在内部您可以使用引用所选证书的别名；这就像任何`https`需要客户端身份验证的身份验证一样；浏览器向您显示可能的证书进行身份验证。

您可以在`https`服务器中制作一些过滤器以仅显示符合某些标准的证书（例如，您可以从某些标准过滤证书；例如为特定 CA 颁发的证书），但最终用户必须选择所需的证书来执行验证。

您还可以执行某种过滤器，例如从密钥库获取证书属性或证书链，并仅显示您认为符合要求的那些...但最后，如果您必须让过滤器之后有多个用户决定要选择哪一个。

2.  **如何通过 HTTPS 建立 SSL 上下文来强制使用 X509Cert 进行 PIN 授权？**

如果您通过*sunMSCAPI*提供商将私钥访问操作委托给智能卡*CSP* ，我认为您可以不关心*PIN*，让*CSP*为您处理。

 ***如果由于某种原因您需要保留*PIN*，`SunPKCS11`那么一个可能的*选择*是使用不同的提供程序`CallbackHandler`( . 但是恕我直言，如果在这种情况下所有客户端都在 Windows 上，我建议您照常使用`sunMSCAPI`，以避免来自某些不同智能卡的不同*PKCS11驱动程序实现出现问题。****

# c# - 如何更改文本框特定的文本颜色？

> ID：15220980
> 
> 赞同：3
> 
> 时间：2013-03-05T10:05:55.347
> 
> 标签：c#

如果链接不起作用，我想更改 Not working Links 的文本颜色，它的颜色应该是红色。我的链接在文本框中

```
if (!IsLinkWorking(link))
{
     //Here you can show the error. You don't specify how you want to show 
     TextBox2.Text += string.Format(
         "{0}\nNot working\n\n ", link); 
     // this should be in red which is in textbox2.text
}
else
{
    TextBox2.Text += string.Format("{0}\n working\n\n", link);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:08:38.227

您需要查看该`ForeColor`属性：

```
TextBox2.ForeColor = Color.Red; 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.forecolor.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.forecolor.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T10:12:53.637

`TextBox`您可以使用属性更改文本颜色`ForeColor`，但不能以不同颜色显示部分文本。为此，您将需要一个`RichTextBox`或类似的东西。

要更改`TextBox`控件的文本颜色：

```
TextBox2.ForeColor = System.Drawing.Color.Red;
TextBox2.Text += string.Format("{0}\nNot working\n\n ", link); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T10:09:09.617

设置文本框的 ForeColor 属性：

```
TextBox2.ForeColor = System.Drawing.Color.Red; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T10:10:10.573

您可以使用

```
TextBox2.ForeColor = Color.Red; 
```

或用于richTextBox1

```
this.TextBox2.SelectionColor = Color.Red; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T10:11:52.280

[您可以使用ForeColor](http://msdn.microsoft.com/en-us/library/ez1ywchy%28v=VS.71%29.aspx)更改字体颜色

*获取或设置控件的前景色。*

```
TextBox2.ForeColor = System.Drawing.Color.Red; 
```

# eclipse-rcp - 在 RAP 应用程序中使用 IEclipseContext

> ID：15220983
> 
> 赞同：0
> 
> 时间：2013-03-05T10:06:03.637
> 
> 标签：eclipse-rcp, rcp, eclipse-rap

我们尝试在 RCP/RAP 应用程序中使用单一来源。RCP 应用程序工作正常，我们现在尝试将 RAP 用于 Web 前端。

例如下面的类

```
public class NavigationProcessor {
    //...
    @Inject
    private IEclipseContext context;

    @Inject
    private MApplication application;

    @Inject
    private EModelService modelService;
    //...
} 
```

使用 IEclipseContext。但是在将目标设置为 RAP 后，`org.eclipse.e4.core.contexts.IEclipseContext`无法解析命名空间。

将目标设置为 RAP 后如何访问 IEclipseContext？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:42:58.667

目前，RAP 仅支持 Eclipse 3.x 工作台。有一些[关于在 RAP 上运行 Eclipse 4 应用程序](http://eclipsesource.com/blogs/2012/07/16/eclipse-4-applications-on-rap/)的实验。不幸的是，Eclipse 4 仍然存在[许多问题](https://bugs.eclipse.org/bugs/show_bug.cgi?id=392977)，无法在多用户环境中使用它。

# hibernate - Hibernate 不使用 Maven 和 Spring-mvc 创建表

> ID：15220987
> 
> 赞同：1
> 
> 时间：2013-03-05T10:06:10.027
> 
> 标签：hibernate, postgresql, maven, spring-mvc

我有一个使用 TomCat 6 构建`maven2`并在其`Spring3MVC`上运行的简单项目。如果它们不存在，我希望休眠以在运行时创建表。但是我没有成功。这是我的文件：

`hibernate.cfg.xml:`

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory name="DKB">
    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.password">dbk</property>
    <property name="hibernate.connection.url">jdbc:postgresql:dbk</property>
    <property name="hibernate.connection.username">dbk</property>
    <property name="hibernate.default_catalog">dbk</property>
    <property name="hibernate.default_schema">dbk</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    <property name="hibernate.hbm2ddl.auto">validate</property>
  </session-factory>
</hibernate-configuration> 
```

`servlet-context.xml:`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">
<mvc:annotation-driven />
<mvc:resources
mapping="/resources/**"
location="/resources/" />

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property
    name="prefix"
    value="/WEB-INF/views/" />
    <property
    name="suffix"
    value=".jsp" />
</bean>
<bean
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    id="entityManagerFactory">
    <property
    name="persistenceUnitName"
    value="jtdb" />
    <property
    name="dataSource"
    ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property
            name="showSql"
            value="true" />
            <property
            name="generateDdl"
            value="true" />
            <property
            name="databasePlatform"
            value="org.hibernate.dialect.PostgreSQLDialect" />
        </bean>
    </property>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean>
    <context:component-scan base-package="pl.spot.dkb" />
</beans> 
```

和一个示例实体类：

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "Roles")
public class Role {
    @Id
    @GeneratedValue
    @Column(name = "id_r")
    int    id_r;
    @Column(name = "name")
    String name;

    public int getId_r() {
        return id_r;
    }

    public void setId_r(int id_r) {
        this.id_r = id_r;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

和`persistence.xml`这个类的一部分：

```
<persistence-unit name="Role">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>foo.bar.Role</class>
</persistence-unit> 
```

有什么我错过的吗？

**编辑：** 这是 TomCat 日志：

```
Using CATALINA_BASE:   "C:\Projekty\SpringMVC\Tomcat6"
Using CATALINA_HOME:   "C:\Projekty\SpringMVC\Tomcat6"
Using CATALINA_TMPDIR: "C:\Projekty\SpringMVC\Tomcat6\temp"
Using JRE_HOME:        "C:\Program Files\Java\jdk1.6.0_26\jre\"
Using CLASSPATH:       "C:\Projekty\SpringMVC\Tomcat6\bin\bootstrap.jar"
2013-03-05 11:19:23 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C
:\Program Files\Java\jdk1.6.0_26\jre\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;D:\app\K.Olejniczak\product\11.2.0\dbhome_1\bin;D:\app
\K.Olejniczak\product\11.2.0\dbhome_2\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Progr
am Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DT
S\Binn\;"C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\";"C:\Program Files (x86)\GtkSharp\2.12\bin";"C:\Program Files (x86)\Java\jdk
1.6.0_38\bin";C:\Program Files\TortoiseSVN\bin;D:\app\K.Olejniczak\product\11.2.0\dbhome_1\BIN;C:\Program Files (x86)\msls;C:\Program Files (x86)\Subv
ersion\bin;C:\Program Files (x86)\gource;C:\Program Files\apache-ant-1.8.4\bin;D:\Research\PhoneGap\DevEnv\adt-bundle-windows-x86\sdk\tools;C:\Program
 Files (x86)\ant\bin;D:\Research\PhoneGap\DevEnv\Cordova\android\bin;"C:\Program Files (x86)\Tail for Win32";"C:\Program Files (x86)\apache-maven-3.0.
4\bin";.
2013-03-05 11:19:23 org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
2013-03-05 11:19:23 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 759 ms
2013-03-05 11:19:23 org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
2013-03-05 11:19:23 org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.36
2013-03-05 11:19:23 org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor host-manager.xml
2013-03-05 11:19:23 org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor manager.xml
2013-03-05 11:19:24 org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive dbk.war
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Tue Mar 05 11:19:25 CET
 2013]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/root
-context.xml]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.suppor
t.DefaultListableBeanFactory@41759d12: defining beans []; root of factory hierarchy
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 324 ms
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'springServlet': initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'springServlet-servlet': star
tup date [Tue Mar 05 11:19:25 CET 2013]; parent: Root WebApplicationContext
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spri
ngServlet/servlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for compone
nt scanning
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supporte
d for autowiring
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.suppor
t.DefaultListableBeanFactory@3d5b89c: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springf
ramework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,
org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,
org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionRe
solver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springfra
mework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.se
rvlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.view.InternalResourceViewResolver#0,adminController,homeController,org.springf
ramework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.s
pringframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.spr
ingframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.Def
aultListableBeanFactory@41759d12
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/admin],methods=[GET],params=[],headers=[],consu
mes=[],produces=[],custom=[]}" onto public java.lang.String foo.bar.admin.AdminController.adminHome(java.util.Locale,org.springframework.ui.Model)

INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[
],produces=[],custom=[]}" onto public java.lang.String foo.bar.HomeController.home(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet
.resource.ResourceHttpRequestHandler#0'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'springServlet': initialization completed in 8123 ms
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'adminServlet': initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'adminServlet-servlet': start
up date [Tue Mar 05 11:19:33 CET 2013]; parent: Root WebApplicationContext
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spri
ngServlet/adminServlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for compone
nt scanning
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supporte
d for autowiring
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.suppor
t.DefaultListableBeanFactory@1b609c13: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.spring
framework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0
,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0
,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionR
esolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springfr
amework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.s
ervlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.view.InternalResourceViewResolver#0,adminController,org.springframework.conte
xt.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework
.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.c
ontext.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBe
anFactory@41759d12
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/admin],methods=[GET],params=[],headers=[],consu
mes=[],produces=[],custom=[]}" onto public java.lang.String foo.bar.admin.AdminController.adminHome(java.util.Locale,org.springframework.ui.Model)

INFO : org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet
.resource.ResourceHttpRequestHandler#0'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'adminServlet': initialization completed in 190 ms
2013-03-05 11:19:33 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory docs
2013-03-05 11:19:33 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory examples
2013-03-05 11:19:33 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
2013-03-05 11:19:33 org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
2013-03-05 11:19:33 org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
2013-03-05 11:19:33 org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/24  config=null
2013-03-05 11:19:34 org.apache.catalina.startup.Catalina start
INFO: Server startup in 10451 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:24:37.703

在`hibernate.cfg.xml`您需要设置`hibernate.hbm2ddl.auto`为`create`. 有关该属性的可能值及其确切含义的更多信息，请参阅[这篇文章。](https://stackoverflow.com/a/1689769/1276804)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:23:57.173

```
 <property name="hibernate.hbm2ddl.auto">create</property> 
```

# html - 仅 CSS 菜单，IE7 问题

> ID：15220989
> 
> 赞同：1
> 
> 时间：2013-03-05T10:06:12.910
> 
> 标签：html, css, internet-explorer, internet-explorer-7, web-standards

我一直在努力让我的纯 CSS 菜单在所有版本的 IE 中工作，我想我几乎已经把它弄下来了，除了 IE7。

在[有问题的网站上](http://www.roleplaygateway.com)，我使用以下 CSS：

```
.header-bar {
  position:fixed;
  top: 0;
  left: 0;
  right: 0;
  padding: 0;
  background: #333;
  font-size: 1.2em;
  font-weight: bold;
  z-index: 1000;
}
.header-bar a:hover {
  text-decoration: none;
}
.header-bar a {
  display: inline-block;
  padding: 7px 10px 7px 10px;
  color: #2C8FAA;
  font-size:1.1em;
}
.header-bar ul {
  list-style-type: none;
  display: inline-block;
  position: relative;
  height: auto;
}
.header-bar ul li {
  background: #333;
}
.header-bar ul li:hover {
  background: #444;
  color: #34AACB;
}
.header-bar ul.nav > li {
  display: inline-block;
}
.header-bar ul ul {
  display: none;
}
.header-bar ul ul li {
  border-top: 1px solid black;
}
.header-bar ul li:hover > ul {
  margin: 0;
  display: block;
  position: absolute; /* overrides other settings */
  /* top: 28px; */
  height: 28px;
  min-width: 200px;
}
.header-bar ul ul li:hover ul {
  top: 0; /* match position of parent, which should be position: relative; */
  position: absolute;
  margin-left: 199px; /* 150px min-width -1 px border */
  border-left: 1px solid black;
}
.header-bar ul li a { 
  display: block;
}
.header-bar ul li ul li {
  position: relative;
}
.header-bar ul ul li:hover ul ul {
  position: absolute;
  top: -48px; /* 28 + 1 for border */
  margin-left: 199px; /* 150px min-width -1 px border */
  border-left: 1px solid black;
}
.header-bar ul ul li:hover ul ul {
  top: 0;
} 
```

要设置如下所示的 HTML 样式：

```
<div class="header-bar">
  <div class="container">
    <ul class="nav">
      <li>
        <a href="#">Menu Item 1</a>
        <ul>
          <li>
            <a href="#">Menu Item 1, Submenu 1</a>
            <ul>
              <li><a href="#">Menu Item 1, Submenu 1, Sub-submenu 1</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</div> 
```

这似乎适用于子菜单，但父菜单项似乎采用块布局，而不是`inline-block`. 在这一点上，我已经束手无策，试图与 IE 作斗争，并且希望能多看几双眼睛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:22:25.563

尝试`li`正确关闭标签：

```
<div id="header-bar">
  <div class="container">
    <ul class="nav">
      <li><a href="#">Menu Item 1</a></li>
        <ul>
          <li><a href="#">Menu Item 1, Submenu 1</a></li>
            <ul>
              <li><a href="#">Menu Item 1, Submenu 1, Sub-submenu 1</a></li>
            </ul>
        </ul>
    </ul>
  </div>
</div> 
```

**- 编辑 -**

在你的 css 中使用它：

```
.header-bar ul.nav > li {
      display: inline-block;
      *float:left
} 
```

它应该成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:09:07.617

**一些东西。**

1.  标签未`<LI>`正确关闭。
2.  `display: inline-block;`不支持。

去做：

1.  正确关闭所有`<li>`标签。
2.  使用这个 CSS：

    ```
    .header-bar ul.nav > li {
        display: inline-block;
        *display: inline;
        *zoom: 1;
    } 
    ```

* * *

**验证问题**

如果您仍然真的担心没有 hack，您可以这样做。以这种方式使用 Paul Irish 的条件 HTML 类：

```
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]--> 
```

在 CSS 中，您可以给出：

```
.ie6 .header-bar ul.nav > li,
.ie7 .header-bar ul.nav > li {
    display: inline;
    zoom: 1;
} 
```

现在您的 HTML 和 CSS 都是**有效**的。

# windows - 离线时 dns 查找不起作用

> ID：15220993
> 
> 赞同：5
> 
> 时间：2013-03-05T10:06:18.610
> 
> 标签：windows, subdomain, offline, hosts, virtual-hosts

我已经设置了我的[丙烯酸 dns 代理](http://mayakron.altervista.org/wikibase/show.php?id=AcrylicHome)以包含一些要重定向到本地主机的地址-因此我可以将特定域名重定向到我的本地计算机，而无需在互联网上查找任何内容（我在某些地方没有互联网连接我在哪里发展，说来话长）。

无论如何，**当我连接到互联网时一切正常**

但是，当我尝试在我的互联网连接关闭时访问本地域时（这在我的情况下很常见），网络浏览器将简单地忽略 dns，甚至不会检查它，立即将我写下“没有互联网连接”错误消息。

浏览器似乎检查 Windows 主机文件的本地地址，但忽略了我的 dns 代理，包含更复杂的重定向，Windows 主机文件根本无法关闭。现在我不知道如何破解 firefox/chrome 来检查 dns，即使我的互联网连接已关闭。

有人有这方面的经验吗？

dns 代理设置详细信息（如果有人感兴趣）：

> *.my.dev.local 转换为 127.0.0.1
> 
> 然后我使用 .htaccess 将 user1.my.dev.local、user2.my.dev.loca 等重定向到我网站的特定用户配置文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T15:42:26.913

我也使用丙烯酸 dns 代理。问题是您需要一个活动的网络接口才能使 DNS 查询正常工作。仅使用环回接口 (localhost) 丙烯酸 dns 查询将不起作用。

我认为windows会检查活动的网络接口：如果没有找到接口，即使不尝试，所有的DNS查询都会失败。就我而言，插入以太网电缆并激活以太网接口就足够了，无论是否有互联网连接。

因此，即使您没有连接到互联网，也请尝试启用 wifi 或其他网络接口并在其上设置有效 IP。

确保接口已将 DNS 配置为 127.0.0.1 并具有有效的 ip，以使丙烯酸 dns 代理正常工作。

如果你没有任何有效的网络接口，你可以尝试安装一个虚拟接口，但我没有测试过这个解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T02:38:15.663

在使用我指向它的 DNS 服务器之前，我已经破解了 chrome 网络浏览器。

对于 Chrome 网络浏览器，它默认使用 getaddrinfo() 进行名称解析。即它要求操作系统解析主机。

如果您想破解 Chrome 以使用某个名称服务器（不是操作系统检测到的名称服务器），那么您需要下载 chromium src 代码并修改 DnsConfig 类中的几行 - 放置自定义 DNS 主机的 IP 地址，成功构建后，启用“chrome://flags”中的“Built-in Asynchronous DNS”——在 chrome 浏览器中输入即可查看。您现在将拥有一个 chrome 浏览器，它可以使用独立于操作系统使用的 DNS 的自定义 DNS 服务器。

我相信这可以解决您的问题，但是，您需要构建一个自定义 chrome 浏览器，所以不确定它是否适合您的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-24T08:17:06.807

创建环回适配器。

`hdwwiz.exe`从命令行运行命令并添加新的网络适配器。选择**Microsoft**制造商和**Microsoft Loopback Adapter**设备（在 Windows 10 上它具有相似但不同的名称）。

现在打开新网络适配器的属性并手动分配任何 IP 地址。当然，将 DNS 设置为您的代理。

# iphone - WebView 字符串自定义

> ID：15220996
> 
> 赞同：1
> 
> 时间：2013-03-05T10:06:21.557
> 
> 标签：iphone, json, ios6, uiwebview

在我的应用程序中，我通过**JSON**使用 Web 服务，在检索它时包含一些 URL 链接，例如：

```
 Enfim, aqui vai a review![youtube]http:\/\/youtu.be\/HFn_IRLEAOA<\/a>[\/youtube] 
```

我想将特定的你管链接显示为：

```
 "Please click here to see" 
```

由于我使用代码删除了您，如下所示：

```
 NSString *replac1=[replac stringByReplacingOccurrencesOfString:@"[youtube]" withString:@""];
   NSString *replac2=[replac1 stringByReplacingOccurrencesOfString:@"[/youtube]" withString:@""];
   NSString *replac3=[replac2 stringByReplacingOccurrencesOfString:@"[youtube ]" withString:@""]; 
```

如何添加**“请单击此处查看”**而不是该链接值？请帮我解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:36:26.507

这可能会帮助您：

```
 NSString *html = @"<a href=\"http://www.youtube.com/watch?v=pii4G8FkCA4/\">Please click here to see</a>";
[webview loadHTMLString:html baseURL:nil]; 
```