# StackOverflow 问答 15943000-15943999

# jquery - nth-child not working using jQuery

> ID：15943000
> 
> 赞同：1
> 
> 时间：2013-04-11T07:28:28.797
> 
> 标签：jquery

Hello Fellas i am trying to use nth-child in my code but its not working following is my code

**HTML**

```
<ul class="colour" >
    <li>one</li>
    <li>two</li>
    <li>three</li>
    <li>one</li>
    <li>two</li>
    <li>three</li>
  </ul> 
```

jQuery

```
$(document).ready(function(e) {
    $('.colour ul li:nth-first-child(1)').css('color','pink');
}); 
```

I don't know why its not working plz help guys

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:29:06.017

`nth-first-child` is not a pseudo-selector, `nth-child` is.

You're also selecting `.colour ul` which looks for a `ul` that is a descendant of an element with the class `.colour`. That won't work with your markup. You'd want just `.colour` or `ul.colour`.

[Demo](http://jsfiddle.net/7Vsc2/)

In response to your comment, you'd want to use `nth-last-child` in that scenario, which does exist. [Demo](http://jsfiddle.net/UtDns/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:15:18.330

除了上面已经很棒的答案之外，[`eq`](http://api.jquery.com/eq-selector/)如果这些`li`项目的数量保持不变，您还可以使用 。

```
<ul class="color">
    <li>one</li>
    <li>two</li>
    <li>three</li>
    <li>one</li>
    <li>two</li>
    <li>three</li>
</ul> 
```

和 JS：

```
//The indexing starts from 0, like in arrays
$('.color li:eq(0)').css('color', 'pink'); 
```

因此，倒数第二个可以访问为：

```
$('.color li:eq(5)').css('color', 'pink'); 
```

只是我的2美分！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:35:18.753

您应该使用以下内容：

```
$(document).ready(function(e) {
    $('.colour ul li:nth-last-of-type(2)').css('color','pink');
}); 
```

这将选择倒数第二个元素。这是[更多教程。](http://api.jquery.com/nth-last-of-type-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:33:13.813

如果要对倒数第二个进行风格化`<li>`，可以使用：

```
$(document).ready(function(e) {
    $('.colour li:nth-last-child(2)').css('color','pink');
}); 
```

`[**Working Demo**](http://jsfiddle.net/UqH87/)`

# backbone.js - collection.fetch({add:true}) 是如何工作的？

> ID：15943008
> 
> 赞同：6
> 
> 时间：2013-04-11T07:29:11.330
> 
> 标签：backbone.js, fetch

我在我的集​​合中添加了一个模型并做了 model.save 数据保存在服务器上。

在此之后，我调用 collection.fetch({add:true})。理想情况下，服务器应该只返回一个模型，即新添加的模型，但我看到整个集合都在 chrome 开发人员工具中传播回来。

我很困惑。这实际上是如何工作的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T08:33:04.613

作为 Cyril N. 答案的附加内容（它基本上描述了默认行为，我猜应该足够了），我想更彻底地解释 3 个标志的作用：

*   `add`: Backbone 是否应该创建尚不存在的模型并将其添加到集合中（即，其 id 不在集合中）
*   `remove`: Backbone 是否应该从集合中删除没有从服务器带回的模型（即，其 id 不是带回的数据）
*   `merge`: Backbone 是否应该更新不在前两个类别中的模型（已经在集合中，并从服务器带回来）

但是，我想进一步扩展该方法的一般行为（它使用该`Collection#set`方法作为回调，所以它更像是`Collection#set`的行为）。Backbone**准备**模型，这意味着它会在方法开始时创建虚假的、易失的模型（如果不添加它们，它们只会是易失的）。这可能会导致意想不到的行为：因为它创建了模型，所以*执行*了这些模型的初始化方法。

另外，作为旁注，从 Backbone 1.0 开始，`Collection#reset`如果您想在获取时重置您的集合，则引入了该标志（因此它使用此方法作为回调）。在此之前，这是该`Collection#fetch`方法的默认行为。

好吧，有了这两个答案，我猜你应该有你需要的所有信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T08:03:59.287

当您调用 时`collection.fetch({add:true}`，Backbone 将使用集合中项目的完整列表向服务器请求（因此您在 Chrome 开发人员工具中看到的整个集合），但随后，而不是在 Backbone 中的集合对象中重新加载整个集合（Javascript） , Backbone 将对*集合执行“智能”更新*。

> set 方法使用传递的模型列表对集合执行“智能”更新。如果列表中的模型尚未在集合中，它将被添加；如果模型已经在集合中，它的属性将被合并；如果集合包含列表中不存在的任何模型，它们将被删除。发生这种情况时，所有适当的“添加”、“删除”和“更改”事件都会被触发。如果您想自定义行为，可以使用以下选项禁用它：{add: false}、{remove: false} 或 {merge: false}。

来源：[http ://backbonejs.org/#Collection-set](http://backbonejs.org/#Collection-set)

所有的智能工作都是在客户端，在 Javascript 中完成的，但为此，Backbone 从服务器请求整个集合，以将其与本地（客户端）中的集合进行比较。

（我希望我很清楚；））。

# css - CSS高度之间的差异：100％与高度：自动

> ID：15943009
> 
> 赞同：201
> 
> 时间：2013-04-11T07:29:16.280
> 
> 标签：css

`height:100%`我在一次采访中被问到一个问题，“css和之间有什么区别`height:auto`？”

谁能解释一下？

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2013-04-11T07:32:22.247

`height: 100%`为元素提供其父容器的 100% 高度。

`height: auto`表示元素高度将取决于其子元素的高度。

考虑这些例子：

**高度：100%**

```
<div style="height: 50px">
    <div id="innerDiv" style="height: 100%">
    </div>
</div> 
```

`#innerDiv`会有`height: 50px`

**高度：自动**

```
<div style="height: 50px">
    <div id="innerDiv" style="height: auto">
          <div id="evenInner" style="height: 10px">
          </div>
    </div>
</div> 
```

`#innerDiv`会有`height: 10px`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T07:31:57.110

*100%*的高度大概是*浏览器内部窗口*的高度，因为那是**其父**页面的高度。*`auto`高度*将是*包含 所需的**最小*高度。

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-27T21:35:49.900

height:100% 如果父容器具有指定的高度属性，则有效，否则无效

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-29T09:51:22.373

默认值`height: auto`在浏览器中，但`height: X%`以包含块的百分比定义高度。*

# magento - Magento: Same price but different tax for oversea customers

> ID：15943012
> 
> 赞同：1
> 
> 时间：2013-04-11T07:29:42.493
> 
> 标签：magento

I'm configuring a Magento site for international sales. My requirement is to calculate tax based on the geographical location of the user but the final price of the product will remain same.

Tax is applicable to local customers only. Overseas customers will get tax-free product. Whatever be the tax amount, the final price will be fixed for all the customers.

An example:

I want to sell a Item A for $100. Our local Tax is 10%.

*   So local customers pay $90.91 + $9.09 of tax
*   Oversea customers will pay $100 + $0 of tax.

Is there anyway to configure this in Magento? Because after having tried in Magento many times, I can only make

*   local customers paying $90.91 + $9.09 of tax,
*   but overseas customer always pay $90.91 + $0 of tax (not $100).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-13T06:41:04.913

好吧，假设所有显示的价格包括税：本地10％，海外免税（由送货地址决定）

为您的国家/地区创建一个税区和税率规则，例如 10% 税的澳大利亚。

关键设置是“启用跨境价格一致性”（仪表板 > 系统 > 配置 > 销售 > 税收 > 计算设置 > 启用跨境贸易）

当设置为是时

注意：跨地区和地域经营的商家可以向其客户显示单一价格。无论国家与国家之间的税收结构和税率如何，定价都是干净整洁的。

```
- Local customers pay $90.91 + $9.09 of tax
- Oversea customers will pay $100 + $0 of tax. 
```

当设置为否

```
- Local customers paying $90.91 + $9.09 of tax,
- Overseas customer will pay $90.91 + $0 of tax (not $100). 
```

# php - 如何在类别页面中显示弹出图像

> ID：15943023
> 
> 赞同：0
> 
> 时间：2013-04-11T07:30:22.683
> 
> 标签：php, opencart

我正在尝试加载`image popup`类别页面，现在只有`image thumb`我可以访问。

```
<div class="image">
  <a href="<?php echo $product['popup']; ?>">
   <img src="<?php echo $product['thumb']; ?>" title="<?php echo $product['name']; ?>" />
  </a>
</div> 
```

我从产品复制代码

```
if ($category_info['image']) {
    $this->data['popup'] = $this->model_tool_image->resize($category_info['image'], $this->config->get('config_image_popup_width'), $this->config->get('config_image_popup_height'));
} else {
    $this->data['popup'] = '';
} 
```

并粘贴在 controller/product/category.php 下，但我只是收到错误消息

```
<b>Notice</b>: Undefined index: popup in <b>/home ... 
```

*Opencart 版本：v1.5.5.1*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:59:44.377

Finally i found the solution,

go to controller\product\category.php line 212 paste

```
if ($result['image']) {
    $popup = $this->model_tool_image->resize($result['image'], $this->config->get('config_image_popup_width'), $this->config->get('config_image_popup_width'));
} else {
    $popup = false;
} 
```

then line 244 after

```
$this->data['products'][] = array(
    'product_id'  => $result['product_id'],
    'thumb'       => $image, 
```

paste

```
'popup'       => $popup, 
```

# php - 如何更新自和日期(1970-01-01)

> ID：15943024
> 
> 赞同：0
> 
> 时间：2013-04-11T07:30:29.290
> 
> 标签：php, javascript, jquery, html, ajax

这是一个 oscommerce 代码。我使用了引导日期选择器。但是这个日期选择器是可以工作的。我选择了开始日期和结束日期，模式也只选择了它的工作。否则，它会显示默认日期 1970/01/01。

```
<tr>
    <td width="100%" style="padding: 10px">
        <b><?php  echo TEXT_BEGINDATE;?></b>
        (yyyy-mm-dd):
        <input name="startdate" id="start_date" type="text" value="<? 

            if(date("Y-m-d",$report->begindate)==1970-01-01) { 
                echo date("Y-m-d",$report->begindate/*, $report->begindate*/);
            } else {
                echo date("Y-m-d",$report->begindate/*, $report->begindate*/);}
        ?>" />

        <b><?php  echo TEXT_ENDDATE;?></b>
        (yyyy-mm-dd):
        &nbsp;&nbsp;&nbsp;
        <input name="enddate" id="end_date" type="text"
            value="<?echo date("Y-m-d",$report->enddate/*, $report->enddate*/); ?>" />

<script>
$(function(){
   $('#start_date').datepicker({ dateFormat: "yy-mm-dd" });
   $('#end_date').datepicker({ dateFormat: "yy-mm-dd" });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:46:24.360

PHP date 函数根据两个参数返回一个格式化的日期：

*   第一个是显示格式
*   第二个（可选）是时间戳

如果第二个参数小于对应于 01/01/1970 的参数，则 dat() 返回的日期仍然是 01/01/1970。

**来自 php doc**： *时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 GMT 到 2038 年 1 月 19 日星期二 03:14:07 GMT。（这些日期对应于 32 位有符号整数的最小值和最大值）。但是，**在 PHP 5.1.0 之前，此范围**在某些系统（例如 Windows）上被限制为 01-01-1970 到 19-01-2038。*

也许您的变量 $report->begindate 不包含适当的数据

# visual-studio-2010 - F# 与 Visual Studio Express/Professional/etc

> ID：15943026
> 
> 赞同：4
> 
> 时间：2013-04-11T07:30:30.973
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, f#

我要学习F#。在我的讲义中，他们只是要求打开 VS 2010，打开项目，选择其他语言并选择 F#！我有 VS 2010 express，一切都被分成不同的软件，如 Visual C++、Visual C# 等，没有 F#！

在这个线程中（[Visual Studio 2010 专业版是否提供 F# 3.0？](https://stackoverflow.com/questions/13975644/is-f-3-0-available-on-visual-studio-2010-professional)）我发现它在 VS 2012 express 中，所以我下载了它。但是，我又找不到 F#！

如何在 VS express 中制作 F# 项目？请帮忙！

**编辑**

至少，这在 Visual Studio 2010 Professional 中可用吗？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:36:42.833

下载 Visual Studio Express 2012 for Web（重要的是，您不能将 F# 与 Visual Studio Express 2012 for Desktop 或其他一起使用），然后安装[F# Tools for Visual Studio Express 2012 for Web](http://www.microsoft.com/en-us/download/details.aspx?id=34675)。完整的描述如何做到这一点在[msdn 博客上](http://blogs.msdn.com/b/fsharpteam/archive/2012/09/12/announcing-the-release-of-f-tools-for-visual-studio-express-2012-for-web.aspx)

# jquery - 自定义样式复选框不加载样式与动态加载内容

> ID：15943030
> 
> 赞同：0
> 
> 时间：2013-04-11T07:31:01.013
> 
> 标签：jquery, ajax, checkbox

我正在使用[http://boedesign.com/blog/2008/06/08/imagetick-for-jquery/](http://boedesign.com/blog/2008/06/08/imagetick-for-jquery/)来设置复选框的样式。我的 div 结构是这样的：

```
<table>
  <thead>
    <tr>
     <th>Check1</th>
     <th>Check2</th>
     <th>Name</th>
   </tr>
  </thead>

  <tbody>
  <tr>
     <td><input class="accept" type="checkbox" value="check_1" name="accept_1" id="accept1"></td>

     <td><input class="process" type="checkbox" value="check_2" name="process_1" id="process1"></td>
     <td>donald</td>
  </tr>
  </tbody>
  </table> 
```

在我的 jQuery 中：

```
$（函数（）{
                  $("input[name='accept_1']").imageTick({
                        滴答图像路径：{
                            check_1: "/public/images/checkbox_full.png"
                            //"default": "images/gender/default_checked.jpg" //可选默认可以使用
                        },
                        no_tick_image_path：{
                            check_1: "/public/images/checkbox_empty.png",
                            //"default": "images/gender/default_unchecked.jpg" //可选默认可以使用
                        },
                        image_tick_class：“接受_1”，
                    });
                });

            $（函数（）{
                   $("input[name='process_1']").imageTick({
                       滴答图像路径：{
                           check_1: "/public/images/checkbox_full.png"
                           //"default": "images/gender/default_checked.jpg" //可选默认可以使用
                       },
                       no_tick_image_path：{
                           check_1: "/public/images/checkbox_empty.png",
                           //"default": "images/gender/default_unchecked.jpg" //可选默认可以使用
                       },
                       image_tick_class: "process_1",
                   });
               });

```

我将通过 .load() 方法加载表的内容。但是复选框没有与图像一起设置样式。它仅在第一次页面加载时显示图像。之后现在显示。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:54:12.937

您需要在 .load 函数回调中调用您的插件：

```
$('#your_item').load(title, function(){
    $("input[name='accept_1']").imageTick({
        tick_image_path: { check_1: "/public/images/checkbox_full.png"},
        no_tick_image_path: { check_1: "/public/images/checkbox_empty.png"},
        image_tick_class: "accept_1",
    });

    $("input[name='process_1']").imageTick({
        tick_image_path: { check_1: "/public/images/checkbox_full.png"},
        no_tick_image_path: { check_1: "/public/images/checkbox_empty.png"},
        image_tick_class: "process_1",
    });
}); 
```

# java - 为什么 TreeSet 会抛出 ClassCastException？

> ID：15943031
> 
> 赞同：19
> 
> 时间：2013-04-11T07:31:03.280
> 
> 标签：java, exception, collections, set, treeset

我正在尝试将两个“员工”对象添加到 TreeSet：

```
Set<Employee> s = new TreeSet<Employee>();
s.add(new Employee(1001));
s.add(new Employee(1002)); 
```

但它会抛出一个 ClassCastException：

```
Exception in thread "main" java.lang.ClassCastException: Employee cannot be cast to java.lang.Comparable
    at java.util.TreeMap.put(TreeMap.java:542)
    at java.util.TreeSet.add(TreeSet.java:238)
    at MyClient.main(MyClient.java:9) 
```

但是如果我只向 TreeSet 添加一个对象：

```
Set<Employee> s = new TreeSet<Employee>();
s.add(new Employee(1001)); 
```

或者，如果我使用 HashSet 代替：

```
Set<Employee> s = new HashSet<Employee>();
s.add(new Employee(1001));
s.add(new Employee(1002)); 
```

然后就成功了。为什么会发生异常，我该如何解决？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-11T07:33:06.850

要么`Employee`必须实现，[要么](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#TreeSet%28java.util.Comparator%29)[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)您需要在创建.[`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)

这在文档中有详细说明[`SortedSet`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)：

> 插入有序集合的所有元素都必须实现`Comparable`接口（或被指定的比较器接受）。此外，所有这些元素必须是相互可比的：（`e1.compareTo(e2)`或`comparator.compare(e1, e2)`）不能`ClassCastException`为任何元素`e1`和`e2`排序集中的元素抛出 a。尝试违反此限制将导致有问题的方法或构造函数调用抛出`ClassCastException`.

如果您不满足这些要求，排序集将不知道如何比较其元素并且将无法运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:34:17.437

`TreeSet`如果未设置自定义，则需要元素来实现`Comparable`接口。改用/合约。`Comparator``HashSet``equals``hashCode`

您可以只添加一个`TreeSet`未实现的元素，`Comparable`因为它不需要与其他元素进行比较。

查看`TreeMap.put(K key, V value)`源代码，您将清楚地看到所有问题背后的原因（`TreeSet`基于`TreeMap`，因此是源代码参考）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:35:46.493

从[TreeSet#add(E)](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#add%28E%29) JavaDoc：

> **抛出**：ClassCastException - 如果指定的对象无法与当前在此集合中的元素进行比较

基本上你需要的是让`Employee`实现`Comparable`或提供一个`Comparator`对象`TreeSet`。

如果您检查`TreeMap`代码，您会看到如果在对象中找不到比较器`Map`，它将尝试将键（您的`Employee`对象）直接转换为`Comparator`：

```
...
Comparable<? super K> k = (Comparable<? super K>) key;
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:35:06.867

`TreeSet`是一个实现`SortedSet`。您可以让`Employee`实现`Comparable`接口或提供适合`Comparator`您的接口`TreeSet`：

```
Set<Employee> s = new TreeSet<Employee>(new EmployeeComparator()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T07:33:03.430

因此，当您使用 TreeSet 时，需要为 Employee 对象实现 Comparable 接口，因为 TreeSet 想要保持元素排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-03T09:38:11.550

```
//class Employee
    public class Employee implements Comparable<Employee>{
    int id;

    Employee(int id){
    this.id=id;
    }

    public int compareTo(Employee e){ //implementing abstract method.
    if(id>e.id){
    return 1;
    }
    return 0;
    }

//class TreeSet

    Set<Employee> emp =new TreeSet<Employee>();

    Employee eobj1 = new Employee(2);
    Employee eobj2 = new Employee(3);
    emp.add(eobj1);
    emp.add(eobj2);

    for (Student ss:emp) {
    System.out.println(ss.rollno);
    }
}
//output: 2
//        3 
```

# sas - 从 sas 中的字符值创建数值

> ID：15943032
> 
> 赞同：1
> 
> 时间：2013-04-11T07:31:07.140
> 
> 标签：sas, numeric

我想将“13232C”之类的代码转换为数值。也许为 A 到 Z 分配值 1 到 26。那么新代码将是“132323”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:06:44.303

如果代码中只有 1 个字母，则此代码将起作用。如果还有更多，那么您将需要扫描每个以获取值。我通过从 ASCII 值 (A=65) 中减去 64 来计算字母值 (1-26)，确保在必要时将字母转换为大写。我还假设该字母始终出现在字符串的末尾

```
data have;
input code $;
datalines;
132323C
24578D
5147896G
;
run;

data want;
set have;
new_code=input(cats(compress(code,,'dk'),rank(compress(upcase(code),,'ak'))-64),best12.);
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:25:25.603

Keith 的解决方案可能更适合大多数用途，但我不禁将其视为使用 PROC FCMP（函数编译）的好机会。这在您只有 AI 的情况下非常有效；从 J 开始它不起作用，因为我只允许一个字符的空间。如果它可以有 2 位数字，则需要更改 FCMP 以执行 Keith 的解决方案。

```
proc fcmp outlib=work.funcs.trial;
function cton(charvar $) $;
  do n = 1 to length(charvar);
   if 48 le rank(char(charvar,n)) le 57 then ;
   else substr(charvar,n,1) = put(rank(upcase(char(charvar,n)))-64,1.);
   put charvar;
  end;
return (charvar);
endsub;

quit;
options cmplib=work.funcs;

data test;
x="23456CAB";
y = cton(x);
put x= y=;
run; 
```

我也将它作为一个字符返回，但这并不重要——如果你愿意，你可以将它作为一个数字返回（我在原始问题中看到了“”）。

# vbscript - VbScript 使用 mod97 验证 IBAN（数字太大）

> ID：15943037
> 
> 赞同：2
> 
> 时间：2013-04-11T07:31:30.620
> 
> 标签：vbscript, modulo, iban

所以我正在用 VbScript 编写一个应用程序，并且我正在尝试验证一个 IBAN 号码。但问题是，我必须修改的数字太大了。

例如：734027177486111478 mod 97

这就是我想要做的，但我似乎找不到用于执行此操作的类型。下面是我目前正在使用的代码。在本例中，最后一点的 vCheckCode 是 734027177486111478。

```
Function checkIBAN(ByVal vIban)
vLandcode = Mid(vIban, 1, 2)    

Select Case vLandcode
    Case "BE"
        vIban = Replace(vIban, " ", "")

        If Len(vIban) = 16 Then
            vPrefix = Mid(vIban, 1, 4)
            vCheckCode = Replace(vIban, vPrefix, "")
            vSuffix = Replace(vPrefix, "BE", "1114")
            vCheckCode = vCheckCode + vSuffix
            vCheckCode = CDbl(vCheckCode)
            vResult = vCheckCode Mod 97             
        End If
End Select
End Function 
```

关于如何做到这一点的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T12:54:19.513

如果您需要更广泛的功能（受 Schnouki 启发）：

```
Public Function VALIDATEIBAN(ByVal IBAN As String) As String

' Created by : Koen Rijnsent (www.castoro.nl)
' Inspired by : Chris Fannin (AbbydonKrafts)
' Inspired by : bonsvr (http://stackoverflow.com/users/872583/bonsvr)
' Inspired by : schnouki http://stackoverflow.com/users/113325/schnouki

On Error GoTo CatchError

Dim objRegExp As Object
Dim IBANformat As Boolean
Dim IBANNR As String
Dim ReplaceChr As String
Dim ReplaceBy As String
Dim LeftOver As Long
Dim digit As Integer
Dim i As Long

'Base format clean - uppercase and remove spaces
IBAN = Replace(UCase(IBAN), " ", "")
'Check format, length 15-31 characters, first countrycode, then two digits, then number
Set objRegExp = CreateObject("vbscript.regexp")
objRegExp.IgnoreCase = True
objRegExp.Global = True
objRegExp.Pattern = "[a-zA-Z]{2}[0-9]{2}[a-zA-Z0-9]{11}([a-zA-Z0-9]?){0,16}"
IBANformat = objRegExp.Test(IBAN)

'Validity of country code will not be checked!
If IBANformat = False Then
    VALIDATEIBAN = "FORMAT NOT RECOGNIZED"
Else
    'Flip first 4 characters to the back
    IBANNR = Right(IBAN, Len(IBAN) - 4) & Left(IBAN, 4)

    'Replace letters by the right numbers
    For i = 10 To 35
        ReplaceChr = Chr(i + 55)
        ReplaceBy = Trim(str(i))
        IBANNR = Replace(IBANNR, ReplaceChr, ReplaceBy)
    Next i

    'Loop through the IBAN, as it is too long to calculate at one go
    LeftOver = 0
    For i = 1 To Len(IBANNR)
        digit = CInt(Mid(IBANNR, i, 1))
        LeftOver = (10 * LeftOver + digit) Mod 97
    Next

    If LeftOver = 1 Then
        If Len(IBAN) = IBANLEN(Left(IBAN, 2)) Then
            VALIDATEIBAN = "IBAN OK"
        ElseIf IBANLEN(Left(IBAN, 2)) = 0 Then
            VALIDATEIBAN = "COUNTRYCODE UNKNOWN, 97 CHECK OK"
        Else
            VALIDATEIBAN = "LENGTH INVALID WITH COUNTRYCODE"
        End If
    Else
        VALIDATEIBAN = "97 CHECK FAILED"
    End If
End If

Exit Function

CatchError:
    VALIDATEIBAN = "ERROR: " & Err.Description
    MsgBox "Module: MODULE - VALIDATEIBAN function" & vbCrLf & vbCrLf _
    & "Error#:  " & Err.Number & vbCrLf & vbCrLf & Err.Description

End Function 
```

以及国家代码/长度的函数：

```
Function IBANLEN(CountryCode As String) As Integer

    ' Created by : Koen Rijnsent (www.castoro.nl)
    If Len(CountryCode) <> 2 Then
        IBANLEN = 0
    Else

        'List of country codes, based on http://en.wikipedia.org/wiki/International_Bank_Account_Number
        Select Case CountryCode
            Case "AL": IBANLEN = 28
            Case "AD": IBANLEN = 24
            Case "AE": IBANLEN = 23
            Case "AO": IBANLEN = 25
            Case "AT": IBANLEN = 20
            Case "AZ": IBANLEN = 28
            Case "BH": IBANLEN = 22
            Case "BE": IBANLEN = 16
            Case "BA": IBANLEN = 20
            Case "BF": IBANLEN = 27
            Case "BI": IBANLEN = 16
            Case "BJ": IBANLEN = 28
            Case "BR": IBANLEN = 29
            Case "BG": IBANLEN = 22
            Case "CH": IBANLEN = 21
            Case "CI": IBANLEN = 28
            Case "CM": IBANLEN = 27
            Case "CR": IBANLEN = 21
            Case "CV": IBANLEN = 25
            Case "CY": IBANLEN = 28
            Case "CZ": IBANLEN = 24
            Case "DE": IBANLEN = 22
            Case "DK": IBANLEN = 18
            Case "DO": IBANLEN = 28
            Case "EE": IBANLEN = 20
            Case "ES": IBANLEN = 24
            Case "FO": IBANLEN = 18
            Case "FI": IBANLEN = 18
            Case "FR": IBANLEN = 27
            Case "GB": IBANLEN = 22
            Case "GE": IBANLEN = 22
            Case "GI": IBANLEN = 23
            Case "GR": IBANLEN = 27
            Case "GL": IBANLEN = 18
            Case "GT": IBANLEN = 28
            Case "HR": IBANLEN = 21
            Case "HU": IBANLEN = 28
            Case "IE": IBANLEN = 22
            Case "IL": IBANLEN = 23
            Case "IR": IBANLEN = 26
            Case "IS": IBANLEN = 26
            Case "IT": IBANLEN = 27
            Case "KZ": IBANLEN = 20
            Case "KW": IBANLEN = 30
            Case "LB": IBANLEN = 28
            Case "LI": IBANLEN = 21
            Case "LT": IBANLEN = 20
            Case "LU": IBANLEN = 20
            Case "LV": IBANLEN = 21
            Case "MC": IBANLEN = 27
            Case "MD": IBANLEN = 24
            Case "ME": IBANLEN = 22
            Case "MG": IBANLEN = 27
            Case "MK": IBANLEN = 19
            Case "ML": IBANLEN = 28
            Case "MT": IBANLEN = 31
            Case "MR": IBANLEN = 27
            Case "MU": IBANLEN = 30
            Case "MZ": IBANLEN = 25
            Case "NL": IBANLEN = 18
            Case "NO": IBANLEN = 15
            Case "PK": IBANLEN = 24
            Case "PS": IBANLEN = 29
            Case "PL": IBANLEN = 28
            Case "PT": IBANLEN = 25
            Case "RO": IBANLEN = 24
            Case "RS": IBANLEN = 22
            Case "SA": IBANLEN = 24
            Case "SE": IBANLEN = 24
            Case "SI": IBANLEN = 19
            Case "SK": IBANLEN = 24
            Case "SM": IBANLEN = 27
            Case "SN": IBANLEN = 28
            Case "TN": IBANLEN = 24
            Case "TR": IBANLEN = 26
            Case "UA": IBANLEN = 29
            Case "VG": IBANLEN = 24

            Case Else: IBANLEN = 0
        End Select

    End If

End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T07:55:48.510

734027177486111478 太大了，不能用 32 位整数表示，所以不能这么用`Mod 97`。

一个简单的解决方案是使用一些[基本的数学](http://en.wikipedia.org/wiki/Modulo_operation#Equivalencies)：

*   (a + b) mod n = ((a mod n) + (b mod n)) mod n
*   (a * b) mod n = ((a mod n) * (b mod n)) mod n

从中您可以逐位计算模数：

```
Function Mod97(ByVal vIban)
    Dim i, m, digit
    m = 0
    For i = 1 To Len(vIban)
        digit = CInt(Mid(vIban, i, 1))
        m = (10*m + digit) Mod 97
    Next
    Mod97 = m
End Function 
```

`Mod97("734027177486111478")`返回 1，[看起来是正确](http://wolfr.am/155f2ZN)的。

# iphone - 如何在后台线程上执行异步请求？

> ID：15943040
> 
> 赞同：2
> 
> 时间：2013-04-11T07:31:44.843
> 
> 标签：iphone, ios, objective-c

我有一个`foo:`在后台线程上调用的方法。此方法只是向服务器发送一个请求，并在检索到数据后，对这些数据执行一些计算并返回。在这种情况下，我更喜欢使用`sendSynchronousRequest`: 因为这种方法很方便，而且线程被阻塞也没关系。但是，响应包含将重定向到另一个页面的“位置”标头字段。我想在重定向之前阅读响应以获取那些“Set-Cookie”标头字段。似乎同步方法不允许我这样做。

我尝试使用异步方法并实现 a `NSURLConnectionDataDelegate`，但是在调用委托的这些方法之前线程已完成。（我想Apple实现异步的方式是在新线程上执行那些耗时的工作）

有没有办法解决这个问题？由于在主线程上执行异步请求可能会增加我的程序的复杂性。

foo: 方法有点像这样

```
- (Result *)foo
{
    NSURLMutableRequest * request = blablabla;
    //Do something to initialize the request
    NSData *data = [NSURLConnection sendSynchronousRequest:request 
                                         returningResponse:&response
                                                     error:&error];

    //Do something with the data

    Result *result = [[Result alloc] init] autorelease];
    //fill the result

    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:21:08.250

您可以使用 Grand Central Dispatch 信号量来等待异步请求返回：

```
- (Result *)foo
{
    NSMutableURLRequest * request = [[NSMutableURLRequest alloc] init];
    // set request's properties here

    __block Result *result;
    dispatch_semaphore_t holdOn = dispatch_semaphore_create(0);
    [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        if (error)
        {
            //  handle error
        }
        else
        {
            result = [[Result alloc] initWithData:data];
        }
        dispatch_semaphore_signal(holdOn);
    }];

    dispatch_semaphore_wait(holdOn, DISPATCH_TIME_FOREVER);

    return result;
} 
```

**注意：**此代码需要 iOS 4.0+ 和 ARC！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:45:24.067

您可以创建自己的`NSRunLoop`并在那里完成您的请求。完成请求后停止运行循环。

或者，如果您像我一样懒惰并且不想弄乱运行循环，只需将您的连接放在主线程上：

```
dispatch_async(dispatch_get_main_queue(), ^(void){
    self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:41:08.787

查看`[NSCondition]`哪些使您能够等待和信号线程

基本上你`NSCondition`在你将拥有的块中分配一个 and ，`[condition wait];`这将导致线程等待。然后，当异步操作完成时，您调用`[condition signal];`它将发出等待线程继续的信号。

[http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/NSCondition_class/Reference/Reference.html](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/NSCondition_class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:30:20.363

[你可以在github](https://github.com/dhoerl/NSOperation-WebFetches-MadeEasy)上找到一个小而简单的类，让你这样做。它提供了两个主要对象 - 一个 NSOperationsQueue 管理器和 NSOperation 子类，旨在运行后台获取。如前所述，如果您所做的只是获取，您可以在主线程上执行此操作。但是如果你也想做数据处理，那么这个项目会让你用一个**完整**的方法来做。

OperationsRunner 类的一个很好的属性是您可以随时取消操作（例如，当用户点击后退按钮时），所有内容都可以快速删除，不会出现停滞或泄漏。

但是，如果您所做的只是一次获取和一个进程，那么您可以像其他人所说的那样仅在主线程上获取数据，一旦拥有它，然后将“处理”块分派给并发系统线程之一，当该处理完成后，向主线程发送另一条消息，告诉您工作已完成。

# sql - 具有不同 sysdate 值的 SQL 插入

> ID：15943049
> 
> 赞同：1
> 
> 时间：2013-04-11T07:32:07.707
> 
> 标签：sql, insert, vertica, sysdate

我正在做这样的插入：

```
INSERT INTO TABLE 
(
 ID, 
 SOURCE_ID, 
 DATE_FIELD
) 
SELECT 
 ID,
 *,
 SYSDATE
FROM 
(
 AN SQL QUERY
); 
```

当我单独运行 SELECT 部分时，我得到如下值：

```
1, 1234, 11.04.2013 15:00:00
1, 1235, 11.04.2013 15:00:00
1, 1236, 11.04.2013 15:00:00
1, 1237, 11.04.2013 15:00:00
1, 1238, 11.04.2013 15:00:00 
```

这正是我要插入的内容。

但是在运行整个插入后，我得到如下值：

```
1, 1234, 11.04.2013 15:00:01
1, 1235, 11.04.2013 15:00:02
1, 1236, 11.04.2013 15:00:03
1, 1237, 11.04.2013 15:00:04
1, 1238, 11.04.2013 15:00:05 
```

有谁知道为什么 sysdate 会这样，什么是好的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:31:15.990

我不知道为什么 sysdate 会这样，但解决方法是

```
DECLARE @now datetime
SELECT @now = SYSDATE

INSERT INTO TABLE 
(
 ID, 
 SOURCE_ID, 
 DATE_FIELD
) 
SELECT 
 ID,
 *,
 @now
FROM 
(
 AN SQL QUERY
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:02:15.703

这并不能解释为什么 SYSDATE 没有返回您所期望的（实际上，根据文档，它应该是稳定的），但也许您可以使用 NOW() 代替？

SYSDATE 将始终在一个语句中返回相同的值，NOW() 将始终在事务中返回相同的值。也许在后台 INSERT .. SELECT 被分成多个语句（这会让我感到惊讶，但这符合你看到的行为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:21:53.527

至少根据 6.1 文档，每个日期/时间函数应为给定事务提供相同的时间戳。因此，如果您得到不同的结果，我会假设一次将数据从派生表中提取出来。

尝试将 sysdate 放入派生表中，看看是否能解决您的问题。

# html - 网站中的 Powerpoint 2010 查看器

> ID：15943050
> 
> 赞同：0
> 
> 时间：2013-04-11T07:32:13.123
> 
> 标签：html, powerpoint

当最终用户单击指向它的链接时，我想在新窗口中查看 PowerPoint 演示文稿，我不希望它被下载，

# java - 在java中将带有空格的char数组转换为String时如何删除该S tring中的空格？

> ID：15943053
> 
> 赞同：1
> 
> 时间：2013-04-11T07:32:18.247
> 
> 标签：java

```
String output = new String(encryptText);
output = output.replaceAll("\\s", "");
return output; 
```

`replaceAll("\\s", "");`不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:33:35.460

```
String output = new String(encryptText);
output = output.replaceAll(" ", "");
return output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T23:20:55.507

我遇到了同样的问题，然后我搜索了很多，发现它不是空格字符，而是从字符数组转换为字符串的空值。这为我解决了这个问题 -

```
output.replaceAll(String.valueOf((char) 0), ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:35:24.097

您的代码对我来说很好，请参见[此处](http://ideone.com/mNTPN3)

无论如何，您可以使用Spring[框架中的](http://www.springsource.org/spring-community-download)[StringUtils.trimAllWhitespace](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/util/StringUtils.html#trimAllWhitespace%28java.lang.String%29)：

```
output = StringUtils.trimAllWhitespace(output); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:46:32.983

使用`String.replaceAll(" ","")`，或者如果您想在没有 lib 调用的情况下自己做，请使用它。

```
 String encryptedString = "The quick brown fox ";
        char[] charArray = encryptedString.toCharArray();
        char [] copy = new char[charArray.length];
        int counter = 0;
        for (char c : charArray)
        {
            if(c != ' ')
            {
                copy[counter] = c;
                counter++;
            }
        }
        char[] result = Arrays.copyOf(copy, counter);
        System.out.println(new String(result)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T07:38:47.420

您可以使用非正则表达式替换来完成这项工作：

```
output = output.replace(" ", ""); 
```

# mysql - 如何使我的选择查询在 mysql 中更快？

> ID：15943057
> 
> 赞同：1
> 
> 时间：2013-04-11T07:32:24.017
> 
> 标签：mysql, select, optimization

我在mysql中有一个表：

```
CREATE TABLE `pdd_data` (
    `pdd_id` INT(16) NOT NULL primary key auto_increment,
    `vin` varchar(32) NOT NULL,
    `time` TIMESTAMP NOT NULL,
    `cmd` varchar(16) NOT NULL,
    `data` varchar(128) NOT NULL
 )ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我在 中插入 1,000,000 条记录`pdd_data`，以后会经常使用查询，如下所示：

```
select * from pdd_data where cmd = 4599;
select * from pdd_data where vin = 400;
select * from pdd_data where vin = 400 and cmd = 4599; 
```

目前查询时间约为1.20sec~1.90sec。谁能给我一些关于如何使这个查询更快的建议？

**ps**我使用索引创建了一个表：

```
CREATE TABLE `pdd_data1` (
    `pdd_id` INT(16) NOT NULL primary key auto_increment,
    `vin` varchar(32) NOT NULL,
    `time` TIMESTAMP NOT NULL,
    `cmd` varchar(16) NOT NULL,
    `data` varchar(128) NOT NULL,
    index idx_vin_cmd (vin(32), cmd(16))
)ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

但查询没有任何改进`select`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T09:37:35.733

我的建议是不要使用`select *`. 而不是使用`select *`use `select pdd_id, vin,time, cmd, data`。这肯定会减少您的执行时间。

# lisp - 为什么 (list + 1 2) 在 Common Lisp 中计算为 ('(+ 1 2) 1 2)

> ID：15943060
> 
> 赞同：5
> 
> 时间：2013-04-11T07:32:38.317
> 
> 标签：lisp, common-lisp

为什么`(list + 1 2)`在 Common Lisp (CCL REPL) 中进行评估会返回`('(+ 1 2) 1 2)`？

* * *

更多：好的，我看到它`+`实际上评估了最后一个 REPL 结果，但我仍然有一个问题：**这是一个标准的 CL REPL 东西，`+`等于最后一个结果，还是 Clozure 特定的？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T08:03:26.970

您会发现，在 REPL 中，变量`*`保存了最后的结果，并`+`保存了最后的评估形式。

例如：

```
> (+ 1 2)
  => 3
> +
  => (+ 1 2)
> (+ 2 3)
  => 5
> *
  => 5 
```

是的，这些是标准的，并且在[HyperSpec 中。](http://www.lispworks.com/documentation/HyperSpec/Body/25_aa.htm)

如果您希望创建一个包含符号`+`而不是其值的列表，则需要引用它，例如：`'+`或`(quote +)`。

# php - PHP 登录 & MySql 查询

> ID：15943069
> 
> 赞同：-2
> 
> 时间：2013-04-11T07:33:09.790
> 
> 标签：php, mysql, login

我的登录功能有些问题。我一直在寻找几个小时，我找不到任何问题。我希望你们能帮助我。我想获取用户的登录信息并检查它是否存在于我的数据库中。问题是它一直返回我：“密码可能不正确！”。我尝试了一个“echo ($count)”，它没有返回任何东西。“回声（$result）”也是如此。

我很迷茫，我不明白为什么这不起作用......

PS：我是法国人，所以你可能会看到一些法语单词。

这是我的登录表单：

```
<?php
   session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>  
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Applications</title>
    <!--Chargement des feuilles de style-->
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <link rel="stylesheet" type="text/css" href="./css/styleLogin.css" />
    <script src="./js/login/modernizr.custom.63321.js"></script>    
</head>
<body>
    <div class="container">

        <header></header>

        <section class="main">
            <form class="form-2" id="loginForm" action="./controller/checkLogin.php" method="post">
                <h1><span class="log-in">Se connecter</span></h1>
                <p class="float">
                    <label for="loginLabel"><i class="icon-user"></i>Nom d'utilisateur</label>
                    <input type="text" name="login" id="login">
                </p>
                <p class="float">
                    <label for="passwordLabel"><i class="icon-lock"></i>Mot de passe</label>
                    <input type="password" name="password" class="showpassword" id="password">
                </p>
                <p class="clearfix">    
                    <input type="submit" name="submit" value="Se connecter">
                    <input type="button" name="submitVisit" value="Accès utilisateur">
                </p>
            </form>​​
        </section>

    </div>
</body> 
```

这是我的 checkLogin.php ：

```
<?php

session_start();

try {           
    $bdd = new PDO('mysql:host=localhost;dbname=stage','root','');
  }
  catch (Exception $e){ //en cas d'erreur de connexion, afficher le message           
    die('Erreur : '.$e->getMessage());
  }

if(isset($_POST['submit'])){
    // username and password sent from form 
    $login = $_POST['login'];
    $pass = $_POST['password'];

    $qry = "SELECT login FROM users WHERE login = 'admin'";
    $result = mysql_query($qry);

    // Mysql_num_row is counting table row
    $count = mysql_num_rows($result);

    if($count == 0){
        die("Password was probably incorrect!");
    }
    // If result matched $myusername and $mypassword, table row must be 1 row
    elseif($count == 1){

        // Register $myusername, $mypassword and redirect to file "login_success.php"
        $_SESSION['login'] = $login;
        header("location: ./login_success.php");
    }

    else {
        echo "Wrong Username or Password";
    }
}

mysql_close($bdd);
?> 
```

* * *

我想用这对夫妇登录：admin/admin。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:44:25.090

您的脚本存在一些问题。

首先，您首先使用 PDO 连接到数据库，然后使用`mysql_*`函数（已弃用，坚持使用 PDO ！！！）。另外，您没有正确地转义数据，并且您的代码可能容易受到 SQL 注入的攻击。

其次，您使用的查询是......不好。

```
// this is not checking for either the user input data !!!
$qry = "SELECT login FROM users WHERE login = 'admin'"; 
```

你的验证码应该是这样的：

```
$ps = $bdd->prepare("SELECT COUNT(*) FROM users WHERE login = :login AND pass = :password");
$params = array("login" => $_POST['login'], "password" => $_POST['password']);
$ps->execute($params);

$status = (bool) $ps->fetchColumn(0);

if ($status) {
    // login successful
} else {
    // login failed
} 
```

**阅读[PDO](http://www.php.net/manual/en/class.pdo.php)和[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)**（它们会自动转义您的数据，因此您不必这样做）。

**笔记：**

如果您在以后的代码中不使用准备好的语句，请记住始终避免来自用户和几乎任何其他信息源的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:43:53.547

1）您正在混合使用 mysql 和 PDO，这是一场灾难。不推荐使用 mysql_ 接口 请使用 mysqli 或 pdo...

2)

```
"SELECT login FROM users WHERE login = 'admin'"; 
```

只找到登录管理员的用户......所以你必须

```
"SELECT login FROM users WHERE login = '$login'"; 
```

3) $_POST 变量不安全。用户可以注入恶意代码...

例如如果你使用 mysqli 那么

```
$login = mysqli_real_escape_string($_POST['login']); 
```

清理登录条目并对密码执行相同操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:52:22.723

因为每个人都对一般问题提出了建议，所以我切入正题

改变：

```
 $login = $_POST['login'];
    $pass = $_POST['password'];

    $qry = "SELECT login FROM users WHERE login = 'admin'"; 
```

假设密码 ist 保存到名为“passwort”的数据库字段中：

```
 $login = $_POST['login'];
        $pass = $_POST['password'];

        $qry = "SELECT login FROM users WHERE login = '".mysql_real_escape_string($login)."' and password= '".mysql_real_escape_string($password)."'"; 
```

mysql_real_escape_string 可防止您被黑客入侵，并且数据库查询现在使用帖子中的值...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T07:51:08.260

问题是，您正在混合使用 mysql_* 函数和 PDO.. 代码应如下所示：

注意将参数绑定到 SQL 查询的 prepare 函数——它可以防止 SQL 注入。

```
session_start();

try {           
    $pdo = new PDO('mysql:host=localhost;dbname=stage','root','');
  }
  catch (Exception $e){ //en cas d'erreur de connexion, afficher le message           
    die('Erreur : '.$e->getMessage());
  }

if(isset($_POST['submit'])){
    // username and password sent from form 
    $login = $_POST['login'];
    $pass = $_POST['password'];

    $sql = "SELECT login FROM users WHERE login = :login AND password = :password";
    $params = array( 'login' => $login, 'password' => $pass );
    $sqlprep = $pdo->prepare($sql);

    if($sqlprep->execute($params)) {
        $count = $sqlprep->rowCount();
        if($count != 1){
            die("Incorrect login!");
        } else {
            $_SESSION['login'] = $login;
            header("location: ./login_success.php");
        }
    }
} 
```

# cpanel - 无法从 webmail cpanel 向 google 发送电子邮件

> ID：15943075
> 
> 赞同：0
> 
> 时间：2013-04-11T07:33:26.057
> 
> 标签：cpanel, webmail

我将主机用于网络邮件。我可以发送电子邮件到 yahoo 和其他网络邮件，但我不能发送到 Gmail 或谷歌应用程序。错误：

```
Mail delivery failed: returning message to sender
tinhphaistc@gmail.com
    SMTP error from remote mail server after end of data:
    host gmail-smtp-in.l.google.com [74.125.129.26]:
    550-5.7.1 [103.3.245.71       1] Our system has detected an unusual rate of
    550-5.7.1 unsolicited mail originating from your IP address. To protect our
    550-5.7.1 users from spam, mail sent from your IP address has been blocked.
    550-5.7.1 Please visit http://www.google.com/mail/help/bulk_mail.html to review
    550 5.7.1 our Bulk Email Senders Guidelines. hb2si3576957pac.234 - gsmtp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T01:18:40.530

您的服务器必须在黑名单中，并且 Google 拒绝来自您 IP 的电子邮件。简单的解决方法是更改​​ IP :( 并确保您的 CMS（通常是 Joomla 或 wordpress）已打补丁并且是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:37:02.500

根据邮件标头，由于您的 IP 已在 gmail 中阻止，因此似乎从您的服务器发送了大量邮件。如果您要发送批量邮件，请查看[批量发件人指南](https://support.google.com/mail/answer/81126)，或者如果您不发送批量邮件，请检查是否从您的服务器发送了垃圾邮件。

# jquery - CSS 选择器和 jQuery eq() 匹配错误的元素

> ID：15943076
> 
> 赞同：3
> 
> 时间：2013-04-11T07:33:27.430
> 
> 标签：jquery, css, preventdefault

我有一个关于 jQuery 的清晨问题。以下代码适用于`eq(1)`or`eq(0)`但如果我尝试将它放在上面`eq(2)`或`eq(3)`它只是停止，因为它根本不会将类添加到这些元素中，只有`eq(0)`and `eq(1)`。

此外，它似乎也阻止了对孩子的默认操作，这不应该发生。还应该明确一点，我将课程添加到某些课程中`<li>`是有原因的，请记住这一点。这就是为什么我需要将类添加到 eq 3 等。任何人都可以阐明这个问题吗？

代码：

```
$(document).ready(function(){
    $('ul#nav li:eq(2)').addClass('removeLink');
    $('.removeLink').click(function(e){
       e.preventDefault();
    });
}); 
```

小提琴 - [http://jsfiddle.net/andyjh07/6HAvV/](http://jsfiddle.net/andyjh07/6HAvV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:43:04.950

*您当前的代码将从列表中所有*s（父母和孩子）中选择的第³ 个中删除链接，因为您使用的是 CSS[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)。`<li>`*`<li>`*

 *将`ul#nav li`找到每一个`<li>`. 由于您只想从第一级（CSS 子级）中删除链接默认操作，因此您可以使用 CSS[子级选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)。

从顶级*父级删除操作* `<li>`

```
$('ul#nav > li > a').click(function(e){
   e.preventDefault();
}); 
```

**编辑：**仍然使用子选择器，这*只会*选择`About Us`链接

```
$('ul#nav > li:eq(2) > a') 
```

**Edit2：**我对需要多个选择器并不完全满意，`eq()`那么使用原生 CSS`nth-child`来选择一个范围怎么样？这在本机支持的浏览器中会更快`nth-child`。

方便的测试页面 - [http://nthmaster.com/](http://nthmaster.com/)

这也应该只是红色（用于演示目的）`Our Projects`并`About Us`使用以下代码。

**CSS**

```
$('#nav > li:nth-child(n+2):nth-child(-n+3) > a').css({color: 'red'}) 
```

**HTML**

```
<ul id="nav">
    li class=""><a href="home.htm">Home</a></li>
    <li class="nav_parent"><a href="our-projects.htm">Our Projects</a>
        <ul class="nav_child">
            <li class=""><a href="the-palms-at-corozal.htm">The Palms At Corozal</a></li>
            <li class=""><a href="the-lakes-at-consejo.htm">The Lakes At Consejo</a></li>
        </ul>
    </li>
    <li class="nav_parent"><a href="about-us.htm">About Us</a>
        <ul class="nav_child">
            <li class=""><a href="who-we-are.htm">Who We Are</a></li>
            <li class=""><a href="other-projects.htm">Other Projects</a></li>
            <li class=""><a href="partners.htm">Partners</a></li>
        </ul>
    </li>
    <li class="nav_parent"><a href="about-belize.htm">About Belize</a>
        <ul class="nav_child">
            <li class=""><a href="general-info.htm">General Info</a></li>
            <li class=""><a href="investing-in-belize.htm">Investing In Belize</a></li>
            <li class=""><a href="useful-links.htm">Useful Links</a></li>
        </ul>
    </li>
    <li class=""><a href="news.htm">News Articles</a></li>
    <li class=""><a href="contact-us.htm">Contact Us</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:42:36.767

您可能只需要阻止点击其中包含的那些`li`s `ul`。

```
$(document).ready(function(){
    $('ul#nav > li').has('ul').addClass('removeLink');
    $('.removeLink').click(function(e){
       e.preventDefault();
    });
}); 
```

[小提琴](http://jsfiddle.net/nzVSv/3/)*

# python - 我应该将 python 2.7.3 升级到 2.7.4

> ID：15943084
> 
> 赞同：2
> 
> 时间：2013-04-11T07:34:15.520
> 
> 标签：python

我问的原因是我安装的一些包是特定于 2.7.3 作为来自 PyPI 的 Windows 安装程序。

这些需要重新安装还是 pip 更新这些？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:40:54.463

Python 的版本号采用`x.y.z`格式，例如：`2.7.4`.

*   `x`意味着major release，它经常会破坏很多东西。
*   `y`意味着小版本，它经常改变一些API。
*   `z`表示bug-fix release，只是修复了一些bug，所有API都与早期版本兼容。

**因此，快速回答是：Python 2.7.4 只是 2.7 系列的一个错误修复版本，您*可以*而且*应该*升级到该版本而不会破坏任何东西。通常，您也不需要做任何额外的工作。**

`y`不幸的是，如果 Python几天前发布了一个不同编号的版本，虽然早期版本的模块应该可以通过一些修改（如果你足够幸运，你不需要修改代码），但是模块应该重建以使用最新的 Python。

这意味着您必须等待新的构建，这大约需要一个月，这取决于维护者和打包者。或者你必须自己从源代码构建。所以，你可以只保留你使用的当前版本的 Python，然后再升级它。

如果他们发布了不同`x`编号的版本，那么 Python 可能会更改很多 API，从而破坏几乎所有内容。你需要仔细考虑。祝你好运。

# android - 如何使用存储在一个活动中的 SharedPreference 值到另一个活动

> ID：15943088
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:34:31.433
> 
> 标签：android

我的代码是：

```
 SharedPreferences myPrefs = this.getSharedPreferences("MYPREF'USERID",
        Context.MODE_PRIVATE);
int uid = myPrefs.getInt("USERID", 0); 
```

我想在另外两个活动中使用 USERID 来获取记录请帮助我怎么做 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:56:32.517

您可以按如下方式设置值

```
SharedPreferences pref = PreferenceManager
                .getDefaultSharedPreferences(this);
        SharedPreferences.Editor editor = pref.edit();
        editor.putInt ("USERID", 0);
        editor.commit(); 
```

您可以将数据表单首选项检索为

```
final SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor editor = pref.edit();
final int userId= pref.getInt("USERID", -1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:52:35.910

您可以使用以下方法在您的应用程序中获取 SharedPreferences：

```
SharedPreferences sharedPreferences = Context.getApplicationContext().getSharedPreferences("pref", Context.MODE_PRIVATE); 
```

您还希望将您的值放在这个全局 sharedPreference 中。

# javascript - 如何为网站创建颜色选择器？

> ID：15943089
> 
> 赞同：-2
> 
> 时间：2013-04-11T07:34:32.530
> 
> 标签：javascript, html, css

如何为网站创建颜色选择器，类似于 Photoshop 的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T07:47:05.863

HTML5 引入了许多新的表单元素，包括类型为“颜色”的输入。在现代浏览器中，这会弹出一个类似于（但不完全相同）Photoshop 提供的颜色选择器。

```
<input type="color" /> 
```

这是工作草案：[http ://www.w3.org/TR/html-markup/input.color.html#input.color](http://www.w3.org/TR/html-markup/input.color.html#input.color)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:46:42.880

有很多很棒的 jquery 插件可以做到这一点。我建议你看看[这个](http://www.jquery4u.com/plugins/10-color-pickers-plugin/)网站。如果没有更具体的信息，我无法提供更多帮助，抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:35:01.463

使用 JavaScript 的颜色选择器

[http://www.dematte.at/colorPicker/](http://www.dematte.at/colorPicker/)

带有示例和代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:47:19.237

你可以在这里找到一些插件：http:
[//jqueryui.pbworks.com/ColorPicker](http://jqueryui.pbworks.com/ColorPicker)

# unit-testing - 在 Jenkins 中使用 xUnit 插件增强单元测试不起作用

> ID：15943091
> 
> 赞同：4
> 
> 时间：2013-04-11T07:34:36.303
> 
> 标签：unit-testing, boost, jenkins, jenkins-plugins, xunit

我不是 C 程序员，但我必须在我的 Jenkins 上运行 boost 测试。现在我已经在 J​​enkins 中安装了 xUnit 插件。

我添加了一个构建后操作：“发布 xUnit 测试结果报告”然后，在这个构建后步骤中，我添加了：“BoostTest-1.x（默认）”

现在我可以设置以下选项：

[https://www.dropbox.com/s/wxcny55rz2bqk6r/boost_jenkins_options.png](https://www.dropbox.com/s/wxcny55rz2bqk6r/boost_jenkins_options.png)

我设置的选项是随机的，所以请帮助我，我什么都不懂，也没有找到一些教程。

我没有使用过 boost 单元测试，也没有使用过 xUnit Jenkins 插件。

谁能帮我？

编辑：詹金斯对我说：

```
make[1]: Leaving directory `/var/lib/jenkins/workspace/southernd_test'
[xUnit] [INFO] - Starting to record.
[xUnit] [INFO] - Processing BoostTest-1.x (default)
[xUnit] [INFO] - [BoostTest-1.x (default)] - No test report file(s) were found with the pattern 'boost/*.xsl' relative to '/var/lib/jenkins/workspace/southernd_test' for the testing framework 'BoostTest-1.x (default)'.  Did you enter a pattern relative to the correct directory?  Did you generate the result report(s) for 'BoostTest-1.x (default)'?
[xUnit] [ERROR] - No test reports found for the metric 'BoostTest' with the resolved pattern 'boost/*.xsl'. Configuration error?.
[xUnit] [INFO] - Setting the build status to FAILURE
[xUnit] [INFO] - Stopping recording.
Build step 'Publish xUnit test result report' changed build result to FAILURE
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:49:27.083

错误是因为没有生成的输出文件`boost::test`。需要使用正确的选项调用测试脚本：

```
unit_test --report_level=detailed --report_format=xml 2> xunit.xml 
```

不幸的是，boost::test 生成的 XML 输出文件格式不正确（请参阅：[SO Converting boost::test logs](https://stackoverflow.com/questions/2969131/anyone-have-an-xsl-to-convert-boost-test-xml-logs-to-a-presentable-format) & [Boost Users Help with XUnit plugin](http://jenkins.361315.n4.nabble.com/Can-anyone-help-with-Boost-C-unit-tests-and-the-xUnit-plugin-tt4194052.html#none)）

JUnit 插件期望 XML 测试输出采用以下格式：

```
<testsuites>
  <testsuite time="0.0000" timestamp="0.000" errors="0" failures="0" tests="13" hostname="localhost" name="my_test_suite">
    <testcase id="65536" class="test" name="test_case_1" time="0.0000" />
    <testcase id="65537" class="test" name="test_case_2" time="0.0000" />
    <testcase id="65538" class="test" name="test_case_3" time="0.0000" />
  </testsuite>
</testsuites> 
```

有几种方法可以解决这个问题，例如：

1.  通过以下方式转换 XML 输出`boost::test`
2.  直接自定义输出`boost::test`以便生成正确的格式。

我选择了选项 2 - ss 您不是“C/C++”程序员，您可以让您尝试运行的测试套件的作者遵循这种方法，以下步骤应该有助于他们入门：

1.  创建一个测试访问者以对测试运行的结果进行后处理。
2.  创建一个 BOOST_GLOBAL_FIXTURE 类，在其析构函数中遍历测试结果，以正确格式输出测试结果。
3.  在主测试模块中实例化夹具类。

IE：

```
struct JUnitVisitor : public boost::unit_test::test_tree_visitor
{
    void visit( boost::unit_test::test_case const& tc )
    {
        // output <testcase> xml in JUnit format
    }

    bool test_suite_start( boost::unit_test::test_suite const& ts )
    {
        // output <testuite> xml in JUnit format
    }

    void test_suite_finish( boost::unit_test::test_suite const& ts )
    {
        // output </testuite> xml in JUnit format
    }
};

struct MyJUnitOpFixture
{
    MyJUnitOpFixture() {}

    ~MyJUnitOpFixture()
    {
        // open results file

        /// output <testsuites> start tag

        // use a visitor to walk the test results tree       
        JUnitVisitor visitor ( out );
        boost::unit_test::traverse_test_tree(
                 boost::unit_test::framework::master_test_suite(),
                 visitor
                 );

        /// output </testsuites> end tag

    }
} 
```

然后通过添加以下内容在主测试文件中实例化全局夹具：

```
BOOST_GLOBAL_FIXTURE( MyJUnitOpFixture ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T17:12:55.077

就我而言，xUnit 不喜欢 Boost Test 的格式，`"--report_format=XML"`但它确实需要`"--log_format=XML --log_sink=test.xml"`

# symfony - 验证非模型属性

> ID：15943093
> 
> 赞同：2
> 
> 时间：2013-04-11T07:34:43.453
> 
> 标签：symfony, validation, propel, symfony-2.2

**环境：Symfony2.2 + Propel 1.6**

我尝试验证链接到模型（客户）的“客户”表单以管理“创建帐户”（表格 1）和“登录帐户”（表格 2）。用户需要选中“我接受协议条款”复选框，并且此字段未链接到模型。**我正在使用全局“validation.yml”文件来管理验证规则。**

**我不知道如何使用validation.yml 文件检查复选框。**

我尝试了几种技术：

1/ 在validation.yml中加入规则，在模型中添加getter/setter：

验证.yml：

```
MyProject\Model\Customer:
properties:
    email:
        - NotBlank:
            groups:     [login, create]
            message:    Champ obligatoire.
        - Email:
            groups:     [login, create]
            message:    La valeur saisie doit être un email.
    cgv:
        - Symfony\Component\Validator\Constraints\True:
            groups:         [login, create]
            message:        Vous devez accepter les CGV.
constraints:
    - Propel\PropelBundle\Validator\Constraints\UniqueObject:
        groups:         [create]
        fields:         email
        message:        Cet email est déjà inscrit.
    - Callback:
        groups:         [login]
        methods:
            -    [MyProject\Model\CustomerQuery, isCustomerEmail] 
```

我的项目\模型\客户：

```
class Customer extends BaseCustomer {
    private $cgv;

    (...)

    public function setCgv($cgv) {
        $this->cgv = (Boolean) $cgv;
    }

    public function getCgv() {
        return $this->cgv;
    }
} 
```

**结果：即使未选中复选框，规则“True”也是可以的。如果我添加“NotBlank”规则，则在选中/取消选中的情况下验证都会失败。**

2/ 尝试在“CustomerType”对象中添加特定的验证规则（如[本文所述](http://www.richsage.co.uk/2011/07/20/adding-non-entity-fields-to-your-symfony2-forms/)）

```
/*
 * 
 *
 * @author
 */
class CustomerLoginType extends AbstractType {
    /**
     * 
     * @param \Symfony\Component\Form\FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('email', 'text', array('required' => true));
        $builder->add('fill', 'checkbox', array('mapped' => false, 'required' => false, 'data' => true));
        $builder->add('cgv', 'checkbox', array('data' => true, 'mapped' => false, 'required' => true, 'validation_groups' => array('login'), 'constraints' => new True(array('message' => 'Vous devez accepter les Conditions Générales de Vente.'))));
   }

    /**
     * 
     * @return string
     */
    public function getName()
    {
        return 'customer_login';
    }    

    /**
     * 
     * @param \MyProject\FrontBundle\Form\Type\OptionsResolverInterface $resolver
     */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'MyProject\Model\Customer',
            'validation_groups' => array('login')
        ));
    }

} 
```

**结果：如果存在“validation.yml”文件，则不考虑这些规则，如果我删除文件中的“客户”条目，它可能会起作用，但我希望尽可能保留它。**

3/由于我找不到“yml”解决方案，我终于在控制器内添加了一个“手动”验证，如下所示：

```
 $form_request = $this->getRequest()->get('customer_login');
    if (!isset($form_request['cgv'])) {
        $form_customer_login->get('cgv')->addError(new \Symfony\Component\Form\FormError('Vous devez accepter les Conditions Générales de Vente.'));
    } 
```

**知道如何在validation.yml 文件中添加我的“接受条款”复选框规则吗？**

# asp.net-mvc-3 - 使用 JsonStore 和提供数据的 C# mvc 控制器创建 dijit.Tree

> ID：15943094
> 
> 赞同：1
> 
> 时间：2013-04-11T07:34:44.873
> 
> 标签：asp.net-mvc-3, jsonstore, dijit.tree

如何在客户端添加通过 JSON 从服务器获取的实体树？

我在 VS2012 有一个用 C# 编写的基本 asp.net mvc3 站点。现在，我正在本地计算机上的 Windows 7 上的 IIS 7 Express 中运行该站点。

我找到了一个 dijit.Tree 元素，可用于在客户端表示具有底层模型和 JsonStore 的实体。我试图将该 JSONStore 连接到服务器的控制器。但是树在浏览器中仍然不可见。我检查了 Chrome 版本 26.0.1410.64 m 和 IExplorer x64 版本。9.

我需要一些带有基本（C#）实体的完整示例，例如：

```
class RestfulEntity
{
  public string id;
  public string name;
  public string description;
} 
```

我看过： http: [//livedocs.dojotoolkit.org/dijit/Tree-examples](http://livedocs.dojotoolkit.org/dijit/Tree-examples)

[MVC3 RESTful API 路由和 Http 动词处理](https://stackoverflow.com/questions/8610451/mvc3-restful-api-routing-http-verb-handling)

[ [http://blog.respondify.se/2011/09/using-dijit-tree-with-the-new-dojo-object-store/]](http://blog.respondify.se/2011/09/using-dijit-tree-with-the-new-dojo-object-store/]) [// [http://lozanotek.com/blog/archive/2010 /04/16/posting_json_data_to_mvc_controllers.aspx]](http://lozanotek.com/blog/archive/2010/04/16/posting_json_data_to_mvc_controllers.aspx]) [// [http://www.codeproject.com/Articles/331920/Connecting-Dojo-DataGrid-to-Entity-Framework-4-1-u]](http://www.codeproject.com/Articles/331920/Connecting-Dojo-DataGrid-to-Entity-Framework-4-1-u]) [// [http:// /livedocs.dojotoolkit.org/dojox/data/JsonRestStore]](http://livedocs.dojotoolkit.org/dojox/data/JsonRestStore])

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T16:49:58.033

看看这个： [使用 Dojo 树、实体框架、SQL Server、ASP.NET MVC、JsonRest 的“CRUD 操作”、“拖放 (DnD)”和“延迟加载”的树视图](http://www.codeproject.com/Articles/337439/Tree-View-with-CRUD-operations-drag-and-drop-DnD-a) 我希望它有所帮助。

# javascript - 为什么我们不能在 jquery 中按值获取对象

> ID：15943105
> 
> 赞同：4
> 
> 时间：2013-04-11T07:35:23.470
> 
> 标签：javascript, jquery

`X`我正在尝试为具有值和`small`类的所有输入设置红色。

但这段代码不起作用。

```
$('.small[value="X"]').css('border','1px solid #F00'); 
```

html

```
 <input type="text" value="<?php echo trim($order['dns1']); ?>" class="wd-150 en small"  /><br />
    <input type="text" value="<?php echo trim($order['dns1']); ?>" class="wd-150 en small"  /><br />
    <input type="text" value="<?php echo trim($order['dns1']); ?>" class="wd-150 en small"  /><br /> 
```

有什么小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:38:47.067

使用属性选择器，`[...]`您正在检查*属性* `value`，它是创建时输入的值，而不是它的实际值，它是输入字段的*属性*。

您必须退回到过滤器：

```
$('.small')
    .filter(function() { return this.value == 'X'; })
    .css('border', '1px solid #F00'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T07:38:19.907

属性选择器 ( `[]`) 只会选择在页面加载或设置时在标记中具有给定属性值的元素，`.attr()`在大多数情况下（用户输入的值）将不起作用。

还没有属性选择器这样的东西，所以你需要一个手册[`filter`](http://api.jquery.com/filter/)。

```
$('.small').filter(function() {
    return this.value === "X";
}).css('border','1px solid #F00'); 
```

# c# - 如何编写 VBA 代码以添加数字签名以保护 VBAProject？

> ID：15943108
> 
> 赞同：0
> 
> 时间：2013-04-11T07:35:28.457
> 
> 标签：c#, excel, vba, vsto

我搜索了 MSDN，它只给出了一个如何添加数字签名来保护整个工作簿的示例：

```
ActiveWorkbook.Signatures.AddNonVisibleSignature "{00000000-0000-0000-0000-000000000000}" 
```

但是 VBAProject 不包含任何添加签名的方法，唯一的方法是：

手动操作步骤：

1.  打开 excel 文件 --> Alt + F11 (打开 VBA 项目)
2.  工具 --> 数字签名 --> 选择 --> 选择证书 --> 确定
3.  节省

有什么方法可以务实地做到这一点，或者有任何其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:42:37.550

我认为你必须使用 c#.net 或 vb.net 来使用 VSTO，因为 vba 是有限的，不会做你想做的一切，所以看看 vsto...

# wpf - Windows 8 region.active 上的 WPF+PRISM 崩溃

> ID：15943113
> 
> 赞同：1
> 
> 时间：2013-04-11T07:35:52.543
> 
> 标签：wpf, windows-8, prism

我正在使用 Prism 4.0 在 WPF .net 4 上工作 om 项目，在我将机器从 Windows 7 升级到 Windows 8 后，项目在到达活动视图时崩溃

```
object view = s.GetView(viewName);

if (view != null)
{
  theRegion = (Region)s;
  s.Activate(view);
} 
```

异常发生在 s.Activate(view) 行，异常详情为“Value cannot be null.Parameter name: view”

这很奇怪，因为我检查了视图是否为空。
在 Windows 7 上它正在工作

有什么建议吗？

谢谢

亚尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:51:06.633

嗯，这对我来说似乎是一个线程问题。是否有另一段代码可能并行运行并获取视图，并在 if 语句和您的 Activate 方法被调用之间修改它？

如果是这样，[仔细检查锁定模式](http://en.wikipedia.org/wiki/Double-checked_locking)将解决您的问题。

```
if (view != null) 
{ 
    lock (myLock)    // myLock is just a static object
    {
        if (view != null) 
        { 
            theRegion = (Region)s;
            s.Activate(view);
        }
    }
} 
```

当然，您还需要在修改视图的其他地方锁定 myLock。

# .htaccess - RewriteCond 和 RewriteRule 排除特定文件夹

> ID：15943117
> 
> 赞同：1
> 
> 时间：2013-04-11T07:36:29.423
> 
> 标签：.htaccess, rewrite

我`.htacces`在我的域根目录中使用以下文件。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt|admin|cache)
RewriteRule ^(.*)$ index.php [L] 
```

一个问题是，当我尝试打开位于`cache/themes/theme1/global.css`

但由于某些原因，它不会将该文件夹排除`cache`在`RewriteRule`

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:38:56.660

我没有对此进行测试，但应该可以；

```
RewriteEngine on
RewriteRule ^(cache.*)$ $1 [L]
RewriteCond $1 !^(index\.php|images|robots\.txt|admin|cache)
RewriteRule ^(.*)$ index.php [L] 
```

# css - CSS粗体字体抗锯齿

> ID：15943119
> 
> 赞同：2
> 
> 时间：2013-04-11T07:36:31.973
> 
> 标签：css, fonts, webkit

我在 Safari 上遇到了粗体字体的问题。仅当您使用 Windows + Safari 时才会出现此问题。

我得到了一个粗体文本，它非常难看，因为在 WebKit 浏览器中是否有仅为 WebKit 浏览器更改字体大小？

*   无需创建新的 Safari 相关样式表
*   无需更改其他浏览器的字体

以下技巧不起作用，因为它是在 Windows 上使用的 Safari。

```
-webkit-font-smoothing: antialiased; 
```

知道如何仅为 Windows Safari更改`fontSize`/吗？`fontWeight`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:41:21.690

如果是 Safari，您可以使用 PHP 链接一个单独的 CSS 页面。

```
<?php
$browser= get_browser();
if($browser->browser == 'Safari') {
    echo '<link href="SafariCSSPage.css" rel="stylesheet" type="text/css" />';
} 
?> 
```

# java - 为什么输出在 SOPLN 中被转换为浮点数？

> ID：15943122
> 
> 赞同：1
> 
> 时间：2013-04-11T07:36:45.287
> 
> 标签：java, type-conversion, core

```
int x = 5;
System.out.println((x>5)?2.3:2); // OP-> 2.0
System.out.println((x==5)?10:20);// OP-> 10 
```

为什么在第一种情况下，OP 从 2 转换为 2.0？

蒂亚！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:39:22.617

`(x>5)?2.3:2`因为您要返回**2.3**或**2**。

它们应该来自同一类型。（因为返回类型*应该相同*）

由于`2.3`是双精度，`2`因此被转换为双精度。

例如，如果您更改为：

`(x>5)?1:2`

然后输出将是`2`. 因为两者都是整数，不需要进行强制转换。

用它编写它`if`看起来像这样：

```
if(x > 5) 
   return 2.3
else
   return 2 
```

如果包含此代码的方法的返回类型是，`int`您将收到错误消息。

但如果它是双倍的，那么你就可以了，因为`2`将被强制转换为`2.0`.

阅读[更多](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:39:51.290

好吧，您有三元运算符`?:`：`(x>5) ? 2.3 : 2` 该运算符只有一种返回类型-必须匹配两种情况->因此返回类型`float`为`2.3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:43:47.303

在[Java 语言规范 15.25](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)中，您可以看到它发生的原因。三元运算符有一个类型。在这种具体情况下，第二个和第三个操作数具有可转换为数字类型的类型，因此应用了[二进制数字提升](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)。

# android - PreferenceScreen：如何设置 setDisplayHomeAsUpEnabled 和自定义图标？

> ID：15943133
> 
> 赞同：0
> 
> 时间：2013-04-11T07:37:45.140
> 
> 标签：android, preference, up-navigation

我当前的 PreferenceActivity 在左上角显示 HomeAsUp 图标（我不必向你解释这个左角;-)）

```
this.getSupportActionBar().setDisplayHomeAsUpEnabled(true);
this.getSupportActionBar().setIcon(R.drawable.ic_menu_preferences); 
```

当我使用这样的“子偏好”屏幕时，就会出现大问题：

```
<PreferenceCategory android:title="Detail Screens">
        <PreferenceScreen
            android:title="My Preference Screen"
            android:summary="The icon is sown in this page and that's great">
            <CheckBoxPreference
                android:title="This is an other screen"
                android:summary="Unfortunately, no custom icon or HomeAsUp here!."
            />
        </PreferenceScreen> 
```

在第二个屏幕中，默认图标与默认标题一起显示。如何以编程方式设置图标和 HomeAsUp？

我知道我可以创建第二个活动（如果没有答案，这就是我打算做的），但如果我只能保留一个偏好屏幕，那真的会更好。

有什么想法//建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:52:49.200

那是安卓的bug！

[https://code.google.com/p/android/issues/detail?id=4611](https://code.google.com/p/android/issues/detail?id=4611)

听起来我必须开始一个新的活动！

# c++ - Qt QList C3892：无法分配给常量变量

> ID：15943137
> 
> 赞同：0
> 
> 时间：2013-04-11T07:37:47.113
> 
> 标签：c++, qt, constants, const-correctness, qlist

我对 QList 有 const 正确性问题。

我有一个方法`getValue`，其签名我无法更改返回 const double 和这里

```
double vs = MinInput->getValue(0, 0); 
```

vs 是常量。

我想用这种方法的结果构建 QList，我得到错误 C3892。

由于我的列表是 QList，因此无法添加 const double (?)

代码是这样的

```
 QList<double> minmax;
    for (int i = 0; i < 2*(3+othercutoffs_var_len) ; i++  )
        minmax.append( 0.0 );

    QSP< const VarInterface<double> > MinInput = ctx.getInputVar<double>(ctx.input(Id::fromString(QL1s("Min")))[0] );
    const double vs = MinInput->getValue(0, 0);
    minmax.at(0) = vs; 
```

最后一行代码让我遇到了麻烦。（使用其他此类 const 双打填充列表时的其他错误）

getValue 的签名是这样的

```
const TYPE & VarData<TYPE>::getValue( uint r, uint c ) const 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:44:10.503

我猜正确的代码是：

```
minmax[0] = vs; 
```

更新：

`QList::at`返回`const`引用，不能修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:48:56.430

`QList::at(int i)`是一个吸气剂函数。它返回一个`const`引用，你不能给它分配任何东西。

使用`QList::operator[](int i)`或`QList::replace(int i, const & T value)`设置位置的值`i`。

# jsrender - JsRender 访问嵌套模板中的父索引

> ID：15943139
> 
> 赞同：0
> 
> 时间：2013-04-11T07:37:54.943
> 
> 标签：jsrender

我在访问嵌套模板中的父索引时遇到问题。尝试在模板中发送 #index 作为参数，但它不起作用（[http://jsfiddle.net/Xsrdb/](http://jsfiddle.net/Xsrdb/)）。

```
<script id="firstTemplate" type="text/x-jsrender">
     {{for segments}}
        <b>{{:#index}}</b>
    {{/for}}
    {{for segments tmpl='#secondTemplate' ~parent_index=#index}}
        <b>{{:#index}}</b>
    {{/for}}
</script>

<script id="secondTemplate" type="text/x-jsrender">
    <div>
        {{>~parent_index/}}
        <i>{{>name/}}</i>
    </div>
</script> 
```

有谁知道如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:27:52.987

在您提供的示例中，您可以简单地`{{>#index}}`在 secondTemplate 中使用来获取元素的索引。

```
<script id="secondTemplate" type="text/x-jsrender">
    <div>
        <b>{{>#index}}</b>
        <i>{{>name/}}</i>
    </div>
</script> 
```

这是 jsFiddle 中的示例：http: [//jsfiddle.net/Xsrdb/1/](http://jsfiddle.net/Xsrdb/1/)

请注意，如果您需要父节点的索引，您可以使用：

```
{{>#parent.index}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:49:17.580

您可以编写的第二个模板`{{for segments tmpl='#secondTemplate' ~parent_index=#index/}}`在该点将 ~parent_index 设置为#index，但此时的#index 是未定义的，因为您不在重复模板中（即“项目”视图）。

如果您使用以下数据，则会显示索引：

```
var data = [{
   segments: [
       {name: 'a'},
       {name: 'b'}
   ]
},{
   segments: [
       {name: 'x'},
       {name: 'y'}
   ]
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:43:51.680

还有一种语法可以向上走。

[http://borismoore.github.io/jsrender/demos/step-by-step/11_accessing-parent-data.html](http://borismoore.github.io/jsrender/demos/step-by-step/11_accessing-parent-data.html)

# java - 排列数组升序

> ID：15943141
> 
> 赞同：0
> 
> 时间：2013-04-11T07:37:59.600
> 
> 标签：java

目的是获取一个数组并将其排列，然后打印

```
package habeeb; 
import java.util.*;
public class Habeeb {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        int[] num = new int[10];
        int i, count=0, m;
        System.out.println("Enter the integers, with 0 to end the array" );
        for( i=0; i<num.length; i++){
            num[i]= input.nextInt(); 
```

零在这里打破了数组

```
 if(num[i]==0)
            break;
            count++; 
```

在这里调用函数\

```
 }
        Sorting(num, count); 
```

功能排序在这里

```
 }
    public static void Sorting(int[] sort, int con){
        if(con<0)
            return;
        int j, max=0, coun=0, temp;
        for(j=0; j<con; j++){
            if(sort[j]>max)
                max=sort[j];
            coun=j;
        } 
```

这里将数组中的最后一个值交换为最高的任何索引

```
 temp=sort[con];
        sort[con]=sort[coun];
        sort[coun]=temp; 
```

在这里再次调用函数（递归）

```
 Sorting(sort, con-1); 
```

正在打印，为什么不打印

```
 for(j=0; j<con; j++){
            System.out.println(sort[j]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:50:04.880

有理由不使用[Arrays.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)吗？

你所要做的就是打电话

```
Arrays.sort(num); 
```

请小心，因为这会**修改**您的数组并且不会创建它的排序副本！

# git - 用于拉取请求的 git 外部

> ID：15943143
> 
> 赞同：1
> 
> 时间：2013-04-11T07:38:01.577
> 
> 标签：git, github

直到今天我都在使用 SVN，所以我对 git 的高级功能不是很熟悉。

我想克隆一个包含我在项目中使用的一些文件的存储库。我的项目在它自己的存储库中，所以当我提交文件时，它们会放在我的项目下。如果我更改它们，它们也会在我的项目中提交。

但是，我希望它们被视为对我从中获取的存储库的拉取请求。

在 SVN 中，我为此使用了 svn-externals。我怎样才能在 git 中做到这一点，所以它很容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:54:49.867

你可以使用[`git submodule`](http://git-scm.com/docs/git-submodule)它。

最新版本的 git 现在允许 git 子模块跟踪子模块 repo 的最新提交。
[Git1.8.2](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.txt)：

> " `git submodule`" 开始学习一种与远程分支的尖端集成的新模式（而不是与超级项目的 gitlink 中记录的提交集成）。

```
# add submodule to track master branch
git submodule add -b master [URL to Git repo];

# update your submodule
git submodule update --remote 
```

从手册页：

```
--remote 
```

> 此选项仅对`update`命令有效。
> 不要使用超级项目记录的 SHA-1 来更新子模块，而是使用子模块的远程跟踪分支的状态。

这接近于`svn external`通常的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T18:45:12.983

还有[子树](http://blogs.atlassian.com/2013/05/alternatives-to-git-submodule-git-subtree/)。

我在子树中发现子模块的主要优点是可以修改文件夹中的内容并将其从同一个父仓库推回上游，尽管在子树中正确推送文件的命令是不同的（git subtree push -P ... )

此外，克隆父 repo 的其他人无需自己处理子树命令即可获得所有内容。我认为对于子模块，每个人都需要单独设置和管理它们。

# java - Groovy 类中@Rule(JUnit) 声明和赋值的逻辑是什么

> ID：15943145
> 
> 赞同：1
> 
> 时间：2013-04-11T07:38:07.967
> 
> 标签：java, groovy, junit, junit-rule, junit-runner

尝试在 groovy 文件中创建规则的一些变体，我想到@Rule 不描述声明，而是描述分配。因此，跑步者在加载测试时，会尝试每条规则以正确分配。

```
//Correct variants:
@Rule
public ErrorCollector collector1= new ErrorCollector();

public ErrorCollector collector2= null;
@Rule
collector2= new ErrorCollector();

public ErrorCollector collector3;
@Rule
collector3= new ErrorCollector();

// incorrect variants:
@Rule
public ErrorCollector collector4= null;

@Rule
public ErrorCollector collector5;

@Rule
public ErrorCollector collector5=somethingThatIsNotRule;

@Rule
public ErrorCollector collector5=anotherRule; 
```

但是，后来我遇到了一些自相矛盾的变体：

```
//these lines are not only taken by the runner, but also passed without errors:
public ErrorCollector collector6;
{
  @Rule
  collector6= null;
}

public ErrorCollector collector7=null;
{
  @Rule
  collector7= null;
} 
```

它的逻辑是什么？

这似乎是 Runner 中的一个错误 - runner 在构建测试之前进行了过多的检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:00:21.723

在 Java 中，JUnit 运行器检查`@Rule`注释是否应用于公共非静态字段或返回[TestRule](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/TestRule.java)或[MethodRule](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/MethodRule.java)的公共非静态方法。

如果`@Rule`字段或方法上有注释，则该值必须是非空值，否则您将在执行测试期间收到 NullPointerException。

您的示例比这更复杂，因为 Groovy 是一种动态语言，因此它在运行时而不是编译时进行检查。我怀疑collector2 和collector3 实际上并没有做任何事情。`@Rule`注释不适用于该字段。

```
collector4 => NullPointerException
collector5 => same as collector5
collector5a => when you execute, I suspect Groovy doesn't find the
               expected methods on your somethingThatIsNotRule, or
               you're getting a ClassCastException or something similar.
collector5b => same as 5b for anotherRule 
```

同样，对于您的悖论，`@Rule`注释实际上并未应用于该领域。

我怀疑您的困惑来自这样一个事实，即 Groovy 不会抱怨在`@Rule`不是字段或方法的东西上的使用（而 Java 会）。它可能不会抱怨，但 JUnit 会忽略这样的注释。

# django - 管理员中的自定义用户模型

> ID：15943146
> 
> 赞同：8
> 
> 时间：2013-04-11T07:38:11.340
> 
> 标签：django

我尝试创建一个自定义用户模型来向用户添加一些自定义字段。我使用了 django 1.5 中引入的基于 AbstractBaseUser 的新方法。一切（登录）工作，除了管理面板。登录管理界面时，出现以下错误：

```
AttributeError at /admin/
'ShopUser' object has no attribute 'is_superuser' 
```

这是我的模型：

```
from django.db import models
from django.contrib.auth.models import BaseUserManager, AbstractBaseUser
from django.contrib import auth

class ShopUserManager(BaseUserManager):

  def create_user(self, email, password=None):
    if not email:
      raise ValueError("We need an e-mail here...")

    user = self.model(
      email = ShopUserManager.normalize_email(email),
    )

    user.set_password(password)
    user.save(using=self._db)
    return user

  def create_superuser(self, email, password):
    user = self.create_user(
      email,
      password = password,
    )
    user.is_admin = True
    user.is_staff = True
    user.save(using=self._db)
    return user

class ShopUser(AbstractBaseUser):
  email = models.EmailField(
    verbose_name = 'e-mail address',
    max_length = 255,
    unique = True,
    db_index = True,
  )

  is_active = models.BooleanField(default=True)
  is_admin = models.BooleanField(default=False)
  is_staff = models.BooleanField(default=False)

  objects = ShopUserManager()

  USERNAME_FIELD = 'email'
  # REQUIRED_FIELDS = ['']

  def __unicode__(self):
    return self.email

  def has_perms(self, perm_list, obj=None):
    """
    Returns True if the user has each of the specified permissions. If
    object is passed, it checks if the user has all required perms for this
    object.
    """
    for perm in perm_list:
        if not self.has_perm(perm, obj):
            return False
    return True

  def has_module_perms(self, app_label):
    """
    Returns True if the user has any permissions in the given app label.
    Uses pretty much the same logic as has_perm, above.
    """
    # Active superusers have all permissions.
    if self.is_active and self.is_superuser:
        return True

    return _user_has_module_perms(self, app_label) 
```

对此有何建议？谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-02-25T22:48:31.643

您不必让您的类从 PermissionsMixin 继承。

我遇到了同样的问题，我通过向我的用户类（在您的情况下为 ShopUser）添加一些必需的方法来修复它。

```
class ShopUser(AbstractBaseUser):

  ...

  def get_full_name(self):
    return self.fullname

  def get_short_name(self):
    return self.shortname

  @property
  def is_superuser(self):
    return self.is_admin

  @property
  def is_staff(self):
    return self.is_admin

  def has_perm(self, perm, obj=None):
    return self.is_admin

  def has_module_perms(self, app_label):
    return self.is_admin 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T00:35:18.007

让类`ShopUser`继承`PermissionsMixin`如下：

```
class ShopUser(AbstractBaseUser, PermissionsMixin): 
```

这将添加该`is_superuser`字段，并且应该与管理 UI 很好地配合使用。

你的`create_superuser`方法应该设置`user.is_superuser = True`.

最后，您应该为您的班级实施`get_full_name`和。`get_short_name``ShopUser`

更多信息：[在 Django 中自定义身份验证](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/)

# ios - UIScrollView 在视图启动时不起作用，但在旋转后起作用

> ID：15943148
> 
> 赞同：3
> 
> 时间：2013-04-11T07:38:14.217
> 
> 标签：ios, uiscrollview

我必须`UIScrollView`显示更长的文本视图、字段和图像列表。在`viewDidAppear`我适当地设置了 contentSize 并且我还添加了这个代码，`didRotateFromInterfaceOrientation`以便`UIScrollView`contentSize 根据方向调整大小。

问题是，当视图第一次出现时`UIScrollView`没有响应（我无法滚动），但在旋转设备后`didRotateFromInterfaceOrientation`调用代码并且一切正常。（如果我以横向启动应用程序，我只能滚动一点以查看通常以纵向模式显示的内容，而不是扩展内容 - 忽略我定义的 scrollView）

代码是一样的`viewDidAppear`，`didRotateFromInterfaceOrientation`为什么`scrollView`轮换后唯一的响应？任何帮助表示赞赏。

`NSLog`两种方法中消息的输出是相同的。

```
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;

- (void) viewDidAppear:(BOOL)animated{
   //If not an iPad set the scrollview to allow scrolling of view
   if (!([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)) {
      self.scrollView.contentSize= CGSizeMake(self.view.frame.size.width,1000);
      [self.scrollView setUserInteractionEnabled:YES];
   }
   if(self.scrollView.userInteractionEnabled){
    NSLog(@"DEBUG scrollview height : %f",self.scrollView.contentSize.height);
    NSLog(@"DEBUG scrollview width : %f",self.scrollView.contentSize.width);    
   }
}

-(void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
//If not an iPad set the scrollview

    if (!([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)) {
        self.scrollView.contentSize= CGSizeMake(self.view.frame.size.width,1000);
    }
    if(self.scrollView.userInteractionEnabled){
       NSLog(@"DEBUG scrollview height : %f",self.scrollView.contentSize.height);
       NSLog(@"DEBUG scrollview width : %f",self.scrollView.contentSize.width);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:15:06.767

你最好改变`contentSize`in `viewDidLayoutSubviews`，它在出现*和*改变方向时被调用。

但别忘了先打电话`super`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T08:07:44.557

嘿，请尝试此代码，我认为您的问题可以使用此代码解决。

尝试 didRotate 方法来获取您的设备方向是横向或纵向。并以此为基础设置框架。

```
 - (void)viewDidAppear:(BOOL)animated {    
        if (!([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)) {
            self.scrollView.contentSize= CGSizeMake(self.view.frame.size.width,1000);
            [self.scrollView setUserInteractionEnabled:YES];
        } else {
            [_scrollView setScrollEnabled:YES];
            _scrollView.contentSize = CGSizeMake(_scrollView.frame.size.width, 2320);
        }
        if(self.scrollView.userInteractionEnabled){
            NSLog(@"DEBUG scrollview height : %f",self.scrollView.contentSize.height);
            NSLog(@"DEBUG scrollview width : %f",self.scrollView.contentSize.width);
        } }

    -(void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
    {
        if (fromInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || fromInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {
            [_scrollView setContentSize:CGSizeMake(736, 1000)];

        } else {
            [_scrollView setContentSize:CGSizeMake(414 , 1200)];

        }
    } 
```

快乐编码。

# mysql - 通过 cakephp 从组中获取最后一条记录

> ID：15943149
> 
> 赞同：3
> 
> 时间：2013-04-11T07:38:15.310
> 
> 标签：mysql, cakephp, phpmyadmin

我有 2 个表： User 和 LoginLogs 以及 User 和 LoginLog 有“有很多”关系。我必须从 LoginLog 表中获取用户的最后一次登录。我必须使用 group by 查询上次登录用户的详细信息。这是查询：

```
SELECT * FROM `login_logs` 
AS `LoginLog` 
LEFT JOIN `users` 
AS `User` 
ON (`LoginLog`.`user_id` = `User`.`id`) 
WHERE 1 = 1 GROUP BY `LoginLog`.`user_id` 
ORDER BY `LoginLog`.`login_datetime` DESC LIMIT 20 
```

此查询返回第一个登录记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:31:53.910

为什么你使用限制 20 ？使用限制 0,1 通过 login_datetime DESC 查找第一个记录顺序

尝试这个

```
SELECT * FROM `login_logs` 
AS `LoginLog` 
LEFT JOIN `users` 
AS `User` 
ON (`LoginLog`.`user_id` = `User`.`id`) 
WHERE 1 = 1  ORDER BY `LoginLog`.`login_datetime` DESC LIMIT 0 ,1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T07:44:12.667

在伪代码中：

```
 SELECT * FROM LoginLog 
 WHERE MAX(LoginLog.primary_id) AND user.id = loginLog.userId 
```

假设 LoginLog 中有自动递增的 PK 列

不要忘记索引 userId 列以获得更好的性能

# trigger.io - trigger.io 窄铬预览

> ID：15943150
> 
> 赞同：0
> 
> 时间：2013-04-11T07:38:15.957
> 
> 标签：trigger.io

创建新的空白 trigger.io 项目。当通过“移动”（在iphone模拟器中）预览它时，它很好。然后在chrome中添加预览按钮。单击该按钮预览窗口时显示 [http://www.imagehosting.cz/?v=screengeg.png](http://www.imagehosting.cz/?v=screengeg.png)但太窄。

在实际稳定版本中运行在 macos、triggertoolkit 和 chrome 上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:57:12.360

尝试在弹出标记中添加“宽度”属性：

```
<style type="text/css">
    html {
        width: 500px;
    }
</style> 
```

# c# - 函数重载如何节省内存

> ID：15943155
> 
> 赞同：-7
> 
> 时间：2013-04-11T07:38:29.133
> 
> 标签：c#, c++, oop, c#-4.0

函数重载如何节省内存？

以下两种函数定义有什么区别，应该使用哪一种？

1)

```
ADD(a,b)
ADD(a,b,c)
ADD(a,b,c,d) 
```

2)

```
AddTwoNumbers(a,b)
AddThreeNumbers(a,b,c)
AddFourNumbers(a,b,c,d) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T07:42:51.490

> 函数重载如何节省内存。

在运行时，它不会。**重载在编译时解决**，因此对性能没有影响。

> 以下两种类型的函数定义有什么区别，

它们是重载函数，采用多个参数，IMO 将更具可读性

> 应该使用哪一个？

重载将更具可读性，（您也可能会看到[Member Overloading - MSDN](http://msdn.microsoft.com/en-us/library/ms229029.aspx)）但如果您使用的是 C# 4.0 或更高版本，那么您也可以使用[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

像这样定义它：

```
public int ADD(int a, int b, int c = 0, int d = 0)
{
    //..... your code
    return result;
} 
```

像这样称呼它：

```
ADD(2, 3);
ADD(2, 3, 4);
ADD(2, 3, 4, 5); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T07:42:03.877

函数重载不会节省内存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T07:42:44.160

当我们编写重载方法时，它不会节省任何空间，也不会提高性能。它仅用于更好的可读性和实现多态性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T07:43:36.927

好吧，区别在于名称;-)。关于你应该使用哪一个...长名称使用更多字节的内存，但这在任何可以运行 C#-4 的系统中都应该可以忽略不计，所以只使用你最喜欢的。

我个人会使用：

```
Add(a,b);
Add(a,b,c);
Add(a,b,c,d); 
```

参数列表是多余的`XXXNumbers`，所以它什么也没提供。

而且全大写的版本很丑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T07:44:45.517

顺便说一句，这些只是函数调用，而不是它们的原型/定义

1)

```
ADD(a,b)
ADD(a,b,c)
ADD(a,b,c,d) 
```

这些将充当重载函数

2)

```
AddTwoNumbers(a,b)
AddThreeNumbers(a,b,c)
AddFourNumbers(a,b,c,d) 
```

这三个将像三个不同的功能（不重载）。

重载的函数具有相同的函数名称和不同数量的参数。在内部发生“名称修改”，编译器必须创建三个不同的函数。它在节省内存方面没有多大帮助，但提高了可读性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T07:52:19.623

函数重载永远不会节省空间，内部编译器会创建两个不同版本的函数，并且根据调用它会调用不同版本的函数。

函数重载使您的代码更具可读性。

```
1)

ADD(a,b)
ADD(a,b,c)
ADD(a,b,c,d)

2)

AddTwoNumbers(a,b)
AddThreeNumbers(a,b,c)
AddFourNumbers(a,b,c,d) 
```

这类似于重载，但上面的代码更具可读性。

# hadoop - 将数据从网站加载到 hdfs

> ID：15943159
> 
> 赞同：1
> 
> 时间：2013-04-11T07:38:43.003
> 
> 标签：hadoop

我需要将存在于网络链接上的数据上传 到**hdfs** **，例如“博客”**。

 **现在我正在寻找完成此操作的选项，可以找到以下链接：

[http://blog.cloudera.com/blog/2012/09/analyzing-twitter-data-with-hadoop/](http://blog.cloudera.com/blog/2012/09/analyzing-twitter-data-with-hadoop/)

但是通过阅读**水槽文档**，我不清楚如何设置**水槽源** 以指向博客内容所在的网站。

根据我对 Fluem 文档的理解，需要有一个网络服务器，我需要在其中部署应用程序，然后将生成网络博客，这些博客将由 Flume 传输到 hdfs。

但我不想要网络服务器日志，实际上我正在寻找非结构化数据的博客内容（**即所有数据+博客上**的评论），然后我正在考虑使用 java map-reduce 进一步处理这些数据。

但不确定我是否朝着正确的方向前进。

我也经历了 pentaho 。但不清楚是否使用 PDI 我可以从网站获取数据并将其上传到 hdfs 。

上面的任何信息都会非常有帮助。

提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:06:02.553

Flume 可以提取数据（如 Twitter 的情况），也可以将数据推送到 Flume，如使用[FlumeAppender](http://logging.apache.org/log4j/2.x/log4j-flume-ng/apidocs/org/apache/logging/log4j/flume/appender/FlumeAppender.html)的服务器日志的情况。

将博客数据导入 HDFS

a) 博客应用程序应该将数据推送到 HDFS，就像 FlumeAppender 的情况一样。必须对博客应用程序进行更改，这在大多数情况下并非如此。

或者

b) Flume 可以像 Twitter 一样使用适当的 API 来拉取博客数据。[Blogger](https://developers.google.com/blogger/)提供了一个 API 来拉取代码，可以在 Flume 源码中使用。Cloudera[博客](http://blog.cloudera.com/blog/2012/09/analyzing-twitter-data-with-hadoop/)[参考](https://github.com/cloudera/cdh-twitter-example/tree/master/flume-sources/src/main/java/com/cloudera/flume/source)了Flume 代码以从 Twitter 中提取数据。**

# c# - 每次执行程序时使用 StreamWriter 创建新文件

> ID：15943167
> 
> 赞同：0
> 
> 时间：2013-04-11T07:39:25.110
> 
> 标签：c#, streamwriter

我正在制作用于处理数据库中图像的简单工具。我想在 txt 文件中显示输出结果，因为每次结果可能不同，我希望每次执行数据时都用新数据重写文件。

此外，即使我有一个`App.Config`文件，我也希望（如果可能）使用一些默认位置来创建 txt 文件，这也是一个选项。

我遇到的问题是这段代码：

```
string Resultfile = 
    System.Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + 
    "\\PictureStatus.txt";

FileStream strm = new FileStream(Resultfile , FileMode.Create);

TextWriter tw = new StreamWriter(strm); 
```

这`PictureStatus.txt`仅填充一次，然后我一遍又一遍地得到相同的文本。我注意到，如果我使用一些随机目的地，文件就会更新。不确定这是否只是随机行为还是与 using 有关`MyDocuments`，但我需要一种方法来确保我每次都会用新数据重写文件，如果可能的话，使用一些可以工作的默认目标为其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-07T01:14:43.363

你可以试试这样的

```
public partial Form2 : Form 
{

public string path = Environment.CurrentDirectory + "/" + "Name.txt";

   public Form2()
   {

       InitializeComponent();

       if (!File.Exists(path))
       {
            File.Create(path);
       }

   }

     private void button2_Click(object sender, EventArgs e)
     {

        using (StreamWriter sw = new StreamWriter(path, true))
        {
          sw.WriteLine("This text will be writen in the txt file", true);
          sw.Close();
        }
     }
} 
```

我已经添加到按钮，当我按下它时，每次都会写在下一行。如果你从代码中删除“true”，它每次都会被覆盖。

# android - 无法使用 httpclient Android 设置 Cookie

> ID：15943169
> 
> 赞同：1
> 
> 时间：2013-04-11T07:39:28.067
> 
> 标签：android, cookies, httpclient

cookie 没有被设置，下面是代码。

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpPost httpPostRequest = new HttpPost(URL);

CookieStore cookieStore = new BasicCookieStore(); 
BasicClientCookie cookie = new BasicClientCookie("Name", "value");
cookieStore.addCookie(cookie); 

HttpContext localContext = new BasicHttpContext();

localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
httpPostRequest.setEntity(fileentity);

HttpResponse response = (HttpResponse) httpclient.execute(httpPostRequest,localContext); 
```

也试过

```
httpclient.setCookieStore(cookieStore); 
```

但没有任何效果。

# unit-testing - Javacc 的有效单元测试

> ID：15943172
> 
> 赞同：1
> 
> 时间：2013-04-11T07:39:31.203
> 
> 标签：unit-testing, javacc

我有一个 javacc 文件，我正在尝试为其编写单元测试。对 .jj 文件或 jj 文件在编译时生成的 java 文件进行单元测试是否更有效。我知道这是[在这里](https://stackoverflow.com/questions/5531903/unit-tests-for-javacc)问的，但是答案上的很多链接都死了。任何帮助，提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:16:04.477

我开发了一个框架来测试可能有用的编译器。每个测试都是一个要解析的文件，其中包含（作为注释）预期结果。有关详细信息，请参阅[http://www.engr.mun.ca/~theo/Publications/compiler-testing.pdf](http://www.engr.mun.ca/~theo/Publications/compiler-testing.pdf)。如果您愿意，我可以将测试框架的代码发送给您。

对于您的具体问题，我不确定您如何直接测试 .jj 文件。我看到的唯一选择是测试生成的词法分析器和解析器，看看它们是否按预期运行。当然，这是假设自从上次更改 .jj 文件后有人重新生成了 .java 文件。

# php - Yii 数据库连接

> ID：15943173
> 
> 赞同：1
> 
> 时间：2013-04-11T07:39:37.593
> 
> 标签：php, sqlite, yii

是否有任何动态方式来放置 sqlite 数据库连接而不是使用`sqlite:f:\\wamp\\www\\qdr\\protected\\data\\testdrive.db in main.php`？

```
'db'=>array(
          'connectionString'=>'sqlite:f:\\wamp\\www\\qdr\\protected\\data\\testdrive.db',
), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:02:58.423

这取决于您在模糊术语*dynamic*下的理解。但是您可以例如创建您的自定义`DBConnection`类并`init()`在那里覆盖：

```
class DbConnection extends CDbConnection
{
    public function init()
    {
        // Set $this->connectionString to whatever you want, maybe
        // $this->connectionString = 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db';
        parent::init();
    }
} 
```

`db`如果添加，您可以将此组件用作组件

```
'class' => 'DbConnection', 
```

到你的`main.php`.

但请注意，该`init()`方法仅在第一次`db`访问组件时被调用。因此，您设置的任何内容`connectionString`都将用于当前请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:45:08.877

Sql lite 是关于单个文件的，因此您可以像这样保留它。不需要动态。我确定你正在使用 wamp。就这样保持吧。这是最适合您的解决方案。当您将项目移动到实时服务器时，请进行相应更改。Sqlite 是一个单独的文件，所以不要那么麻烦。

# c++ - C++ 日期和时间，以毫秒为单位

> ID：15943182
> 
> 赞同：5
> 
> 时间：2013-04-11T07:40:21.790
> 
> 标签：c++, date, time

**要求**

我需要在 Windows 上以 C++11 检索日期和时间，包括毫秒。如果可能，从 1970 年之前开始。

我还需要能够从日期/时间变量中提取年、月、日、小时、秒和毫秒。

**我试过的**

*   `time()`只返回秒。
*   `clock()`不返回日期，只返回自上次系统启动以来的时间。非常适合测量经过的时间。

注意：它仅适用于 Windows。Linux 不是必需的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T07:44:39.033

如果您使用的是 c++11，则应使用[chrono](http://en.cppreference.com/w/cpp/chrono)，它可以让您更轻松地管理时间。它为您提供了一些方法来以您想要的任何单位（秒到毫秒，...）“投射”您的时间，并且还可以管理 ctime 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:42:22.777

看来您正在寻找[`gettimeofday`](http://pubs.opengroup.org/onlinepubs/009695399/functions/gettimeofday.html).

有关Windows 的实现，请参见[此处。](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/430449b3-f6dd-4e18-84de-eebd26a8d668/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:36:41.237

您也可以尝试查看 boost::posix_time。boost::posix_time::ptime 有许多方法可以为您提供以秒、毫秒和微秒为单位的时间值。您也可以直接对 ptime 对象进行操作。如果您可以在项目中自由使用 boost。我建议看看它。 [http://www.boost.org/doc/libs/1_53_0/doc/html/date_time/posix_time.html](http://www.boost.org/doc/libs/1_53_0/doc/html/date_time/posix_time.html)

# linq - 如何在 LINQ 中获取单行中多列的最大值？

> ID：15943187
> 
> 赞同：1
> 
> 时间：2013-04-11T07:40:36.573
> 
> 标签：linq

说我有这张桌子

我的表

**ID**     **NumValue1**    **NumValue2**    **NumValue3**    **NumValue4**    **NumValue5**
1 12.17 23.97                *null*                  0.07                *null如何使用***LINQ**语法 从该单行

获取最大值**23.97 ？** 在 SQL (MS SQL) 中，我可以这样写：

 **```
SELECT MaxNum = case 
when MyTable.NumValue1 is not null and
(MyTable.NumValue1 >= MyTable.NumValue2 or MyTable.NumValue2 is null) and
(MyTable.NumValue1 >= MyTable.NumValue3 or MyTable.NumValue3 is null) and
(MyTable.NumValue1 >= MyTable.NumValue4 or MyTable.NumValue4 is null) and
(MyTable.NumValue1 >= MyTable.NumValue5 or MyTable.NumValue5 is null) 
then MyTable.NumValue1
when MyTable.NumValue2 is not null and
(MyTable.NumValue2 >= MyTable.NumValue1 or MyTable.NumValue1 is null) and
(MyTable.NumValue2 >= MyTable.NumValue3 or MyTable.NumValue3 is null) and
(MyTable.NumValue2 >= MyTable.NumValue4 or MyTable.NumValue4 is null) and
(MyTable.NumValue2 >= MyTable.NumValue5 or MyTable.NumValue5 is null) 
then MyTable.NumValue2
when MyTable.NumValue3 is not null and
(MyTable.NumValue3 >= MyTable.NumValue1 or MyTable.NumValue1 is null) and
(MyTable.NumValue3 >= MyTable.NumValue2 or MyTable.NumValue2 is null) and
(MyTable.NumValue3 >= MyTable.NumValue4 or MyTable.NumValue4 is null) and
(MyTable.NumValue3 >= MyTable.NumValue5 or MyTable.NumValue5 is null) 
then MyTable.NumValue3
when MyTable.NumValue4 is not null and
(MyTable.NumValue4 >= MyTable.NumValue1 or MyTable.NumValue1 is null) and
(MyTable.NumValue4 >= MyTable.NumValue2 or MyTable.NumValue2 is null) and
(MyTable.NumValue4 >= MyTable.NumValue3 or MyTable.NumValue3 is null) and
(MyTable.NumValue4 >= MyTable.NumValue5 or MyTable.NumValue5 is null) 
then MyTable.NumValue4
when MyTable.NumValue5 is not null and
(MyTable.NumValue5 >= MyTable.NumValue1 or MyTable.NumValue1 is null) and
(MyTable.NumValue5 >= MyTable.NumValue2 or MyTable.NumValue2 is null) and
(MyTable.NumValue5 >= MyTable.NumValue3 or MyTable.NumValue3 is null) and
(MyTable.NumValue5 >= MyTable.NumValue4 or MyTable.NumValue4 is null) 
then MyTable.NumValue5
else null
end
FROM MyTable WHERE MyTable.ID=1; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:59:21.270

鉴于你的`DataTable`样子是这样的：

```
var t = new DataTable();
t.Columns.Add("ID", typeof(Int32));
t.Columns.Add("NumValue1", typeof(decimal));
t.Columns.Add("NumValue2", typeof(decimal));
t.Columns.Add("NumValue3", typeof(decimal));
t.Columns.Add("NumValue4", typeof(decimal));
t.Columns.Add("NumValue5", typeof(decimal)); 
```

你的行看起来像这样：

```
var row = t.Rows.Add(new object[] {1, 
                                   12.17m, 
                                   23.97m, 
                                   DBNull.Value,
                                    0.07m, 
                                   DBNull.Value}); 
```

您可以使用此查询获得最大值：

```
// get all values:
var max = row.ItemArray 
           // only values that are not DBNull:
           .Where(o => o != DBNull.Value) 
                  // convert to decimal and get the max value:
                  .Max(o => Convert.ToDecimal(o)); 
```

`max`就是现在`23.97`**

# ios - NSPredicate 用于查询中的位置

> ID：15943188
> 
> 赞同：2
> 
> 时间：2013-04-11T07:40:49.057
> 
> 标签：ios, core-data, nspredicate

## 设置

有一个核心数据对象`foo` 与另一个核心数据对象“条”具有多对多关系。这`bar`具有`barid`type的属性`int32`。

我有一个由 NSNumbers 表示的整数的 NSArray（让我们命名它`intlist`）。我有一个`foo`对象。

## 问题

我需要知道有多少`bar`与此`foo`实例相关的对象`barid`包含在`intlist`.

我想我可以为此使用谓词。但是我的谓词应该有什么格式？在 SQL 中它会是`SELECT count(*) FROM fooBarLinkTable WHERE fooid = x AND barid IN intlist`，但我不知道如何将该语句转换为谓词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:39:44.617

我相信你有一个反向关系 bar<->foo ，这`intlist`是 NSArray 或 NSNumber 对象的 NSSet 类型。如果是这样，请执行以下操作：

```
NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"bar"];
[request setPredicate:[NSPredicate predicateWithFormat:@"barid IN %@ && ANY relationshipToFoos == %@", intlist, foo]];
NSError* error = nil;
NSUInteger count = [[self.fetchedResultsController managedObjectContext] countForFetchRequest:request error:&error]; 
```

# php - 使用 preg_replace 将最后一个字符串剪切为点字符后的一个字母

> ID：15943190
> 
> 赞同：0
> 
> 时间：2013-04-11T07:41:02.803
> 
> 标签：php

我有一个 php 脚本示例，但在这种情况下，我的脚本我只想将最后一个单词剪成一个字母，单词“一二三”的示例变成了 'one.two.t' 我该如何解决？请帮忙。

我的 php 脚本示例

```
<?php

$str = 'arya dwi pangga';
$str = preg_replace( '/ /', '.', $str );
echo $str;

?> 
```

上面的示例将输出： arya.dwi.pangga 但我想要输出 arya.dwi.p ，我该如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:48:34.733

```
$str = 'arya dwi pangga';
$str = str_replace(' ', '.', $str);
$cut = strrpos($str, '.')+2;
$str = substr($str, 0, $cut);

echo $str; 
```

输出：arya.dwi.p

您不需要`preg_match()`像查找空格和替换点这样的简单替换，`str_replace()`如果您没有要查找的复杂模式，只需使用即可。

我只是`strrpos()`找到针的最后一次出现（在这种情况下为“。”），添加+2（点本身和下一个字母）并知道在哪个位置切割字符串，然后用来`substr()`切割它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:52:27.283

```
$str = 'arya dwi pangga'; 
$str1 = preg_replace( '/ /', '.', $str ); 
$str2 = substr(strrchr($str1, '.'), 1,1);
$string = explode('.', $str1);
array_pop($string);
$string1 = implode('.', $string);
echo "<br>";
echo $string1.".".$str2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:55:50.137

```
$str = 'arya dwi pangga'; 
$str = preg_split('/\s+/', $str); //Split string by space characters

$last = count($str) - 1 ;
$str[$last] = substr($str[$last], 0, 1);  //Leave only the first character of last element
$str = implode(".", $str);        //Get the full string back with dots instead of spaces.

echo $str ; 
```

# java - Struts2 / Struts1 动作调用

> ID：15943191
> 
> 赞同：2
> 
> 时间：2013-04-11T07:41:05.500
> 
> 标签：java, jsp, struts2, integration, struts1

我在一个使用 Struts2 和 Struts1 的应用程序上工作。现在我想为不同的操作实现身份验证。我想用 an`interceptor`检查`namespace`an`action`属于哪个。我用 Struts2 动作包装了所有 Struts1 动作。所以所有 strut1-action 都通过拦截器运行。

```
<action name="contactsList" class="com.opensymphony.xwork2.ActionSupport">
    <result name="success">contactsList.do</result>
</action> 
```

问题是如果用户在浏览器中输入 struts1-action 拦截器将不会被调用。

我的问题：来自浏览器的操作调用和通过 Struts 配置调用的操作调用之间是否有区别。如果可能，是否可以禁止浏览器中的 Struts1 操作，但允许在 struts 中执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:30:52.950

你想错了方向。Struts2 中有一个[Struts1 插件](https://struts.apache.org/plugins/struts-1/)，它实际上包装了 Struts1 动作。所以，代码看起来像

```
<action name="contactsList" class="org.apache.struts2.s1.Struts1Action">
  <param name="className">com.mycompany.myapp.ContactsListAction</param>
  <result>contactsList.jsp</result>
</action> 
```

对于您的问题，即使您的操作什么都不做，Struts2 返回的结果也会重定向或分派到 servlet。您可以对浏览器做任何事情，但 Struts 将接受请求，直到您将其映射到负责对浏览器请求作出反应的 url。

# javascript - Angular.js 更复杂的条件循环

> ID：15943193
> 
> 赞同：2
> 
> 时间：2013-04-11T07:41:10.060
> 
> 标签：javascript, loops, angularjs, angularjs-ng-repeat

目标是创建这个

```
<h3>11.4.2013</h3>
<ul>
 <li>entry 1</li>
 <li>entry 2</li> 
 <li>entry 3</li>
</ul>

<h3>10.4.2013</h3>
<ul>
 <li>entry 4</li>
 <li>entry 5</li> 
 <li>entry 6</li>
</ul> 
```

由此

```
[
    {
        "name": "entry1",
        "date": "11.4.2013"
    },
    {
        "name": "entry2",
        "date": "11.4.2013"
    },
    {
        "name": "entry3",
        "date": "11.4.2013"
    },
    {
        "name": "entry4",
        "date": "10.4.2013"
    },
    {
        "name": "entry5",
        "date": "10.4.2013"
    },
    {
        "name": "entry6",
        "date": "10.4.2013"
    }
] 
```

问题是 ng-repeat 必须打开，`li`所以我永远无法使用 ng-repeat 执行此操作，对吗？我从 Mark Rajnoc那里找到了这个[http://jsfiddle.net/mrajcok/CvKNc/示例，但它仍然非常有限..](http://jsfiddle.net/mrajcok/CvKNc/)

我还有什么其他选择？编写我自己的 ng-repeat 指令？或者有没有另一种方法可以做到这一点而不写一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T08:59:51.200

您可以编写自己的过滤器来过滤掉外部 ng-repeat 的唯一日期，例如：

```
filter('unique',function(){
  return function(items,field){
    var ret = [], found={};
    for(var i in items){
      var item = items[i][field];
      if(!found[item]){
        found[item]=true;
        ret.push(items[i]);
      }
    }
    return ret;
  }
}); 
```

带有以下标记：

```
<div ng-repeat="dateItem in items | unique:'date' | orderBy:'date'">
<h3>{{dateItem.date}}</h3>
<ul>
  <li ng-repeat="item in items | filter:dateItem.date">
    {{item.name}}
  </li>
</ul>  
</div> 
```

看看[这个有效的 plnkr 示例](http://plnkr.co/edit/KUkp2PFJQsB1RO4Kjz9t?p=preview)——或者这个[更新的添加项目的示例](http://plnkr.co/edit/81knnd8KeUdYcMPW9foa?p=preview)

但是，如果您要拥有很多项目（数百或数千），则此解决方案不是最佳解决方案。另一种方法是创建更优化的数据结构。您甚至可以通过添加 $watch 来使其与原始数据结构一起使用 - 例如：

```
$scope.$watch('items',function(){
  var itemDateMap = {};

  for(var i=0; i<$scope.items.length; i++){
    var item = $scope.items[i], key = item.date;
    if(!itemDateMap[key]){
      itemDateMap[key] = [];
    }
    itemDateMap[key].push(item);
  }

  $scope.itemDateMap=itemDateMap;

},true); 
```

使用此标记：

```
<div ng-repeat="(date,subItems) in itemDateMap">
<h3>{{date}}</h3>
<ul>
  <li ng-repeat="item in subItems">
    {{item.name}}
  </li>
</ul>  
</div> 
```

[这是一个示例](http://plnkr.co/edit/Mg4he9DJXRxhoXkzOHWH?p=preview)，您可以在其中添加大量随机项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:29:39.853

当我有和你一样的需求时，我使用 Object 而不是 Array。

```
<div ng-repeat="item in data">
  <h1>{{item.date}}</h1>
  <ul ng-repeat="name in item.names">
    <li>{{name}}</li>
  </ul>
</div> 
```

[http://jsfiddle.net/shoma/DqDsE/1/](http://jsfiddle.net/shoma/DqDsE/1/)

这个问题页面会帮助你。

[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)

# java - 可以失败一个 compareTo 吗？

> ID：15943196
> 
> 赞同：0
> 
> 时间：2013-04-11T07:41:11.273
> 
> 标签：java, comparator

我有一个将一些文本文件转换为其他测试和 csv 文件的应用程序（对于每 3 个文本文件，我生成一个文本文件和一个类似的 csv 文件）。它是根据一种`compareTo`方法订购一些营地，文本文件和 cvs 文件之间的区别在于，在文本文件中我有例如 27 个营地，而在 csv 文件中只有 25 个，但其他信息是相同的，这两个我通常有一些订单。

例如，在原始文本文件中，我有：姓名、姓氏、电话号码、邮政编码和一些标识。

在应用程序返回的文本文件中，我有：姓名、邮政编码和身份证号码。

在 csv 文件中，我有：姓名、邮政编码和身份证号码。

问题是我必须使用下一个代码按邮政编码重新排序：

```
public int compareTo(Comunicado otro) {
    int cod1=Integer.parseInt(this.codigoPostal);
    int cod2=Integer.parseInt(otro.codigoPostal);
    if(this.codigoPostal.startsWith("28") && otro.codigoPostal.startsWith("28")==false)
        cod1=0;
    else if(this.codigoPostal.startsWith("08") && otro.codigoPostal.startsWith("08")==false)
        cod1=1;
    if(otro.codigoPostal.startsWith("28") && this.codigoPostal.startsWith("28")==false)
        cod2=0;
    else if(otro.codigoPostal.startsWith("08") && this.codigoPostal.startsWith("08")==false)
        cod2=1;
    if(this.codigoPostal.equalsIgnoreCase("00000")){
        cod1=2;
    }
    if(otro.codigoPostal.equalsIgnoreCase("00000")){
        cod2=2;
    }
    return cod1-cod2;
 } 
```

我返回的两个文件是否有可能具有不同的顺序？

我已经更改了我的代码，添加了下一行：

```
 public int compareTo(Comunicado otro) {
    int cod1=Integer.parseInt(this.codigoPostal);
    int cod2=Integer.parseInt(otro.codigoPostal);

    if(this.codigoPostal.startsWith("28") && otro.codigoPostal.startsWith("28")==false)
        cod1=0;
    else if(this.codigoPostal.startsWith("08") && otro.codigoPostal.startsWith("08")==false)
        cod1=1;
    if(otro.codigoPostal.startsWith("28") && this.codigoPostal.startsWith("28")==false)
        cod2=0;
    else if(otro.codigoPostal.startsWith("08") && this.codigoPostal.startsWith("08")==false)
        cod2=1;

    if(this.codigoPostal.equals(otro.codigoPostal))
    {
        if(this.codicoCliente.compareToIgnoreCase(otro.codicoCliente) == 0) 
        {
            return this.codicoCliente.compareToIgnoreCase(otro.codicoCliente);
        }
    }

    if(this.codigoPostal.equalsIgnoreCase("00000")){
        cod1=2;
    }
    if(otro.codigoPostal.equalsIgnoreCase("00000")){
        cod2=2;
    }
    return cod1-cod2;

 } 
```

这足以确定没有问题吗？

最后我用下一个代码解决了我的问题：

```
 if(this.codigoPostal.startsWith("28") && otro.codigoPostal.startsWith("28")==false)
        cod1=0;
    else if(this.codigoPostal.startsWith("08") && otro.codigoPostal.startsWith("08")==false)
        cod1=1;
    if(otro.codigoPostal.startsWith("28") && this.codigoPostal.startsWith("28")==false)
        cod2=0;
    else if(otro.codigoPostal.startsWith("08") && this.codigoPostal.startsWith("08")==false)
        cod2=1;

    if(this.codigoPostal.equalsIgnoreCase("00000")){
        cod1=2;
    }
    if(otro.codigoPostal.equalsIgnoreCase("00000")){
        cod2=2;
    }

    if(this.codigoPostal.equals(otro.codigoPostal))

    {
        int i = this.codicoCliente.compareTo(otro.codicoCliente);
        if (i != 0) return i;
    }

    return cod1-cod2;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:24:30.220

一件事（除非我误解了您的代码）-如果两个邮政编码以相同的两位数字开头，那么您的 compareTo 表示它们具有相同的顺序。因此，您最终可能会以两种不同的顺序获得邮政编码。例如 08123 和 08321 最终可能是：

```
08123
08321 
```

或者

```
08321
08123 
```

理想情况下，如果您想避免这种情况，您的 compareTo 不应返回 0。要测试这是否能解决问题，请尝试：

```
return ((cod1-cod2)==0 ? (this.codigoPostal.compareTo(otro.codigoPostal)) : (cod1-cod2)); 
```

而不是您当前的退货声明。注意我并不是说这是很好的代码，我怀疑整个方法可以重构，但想看看是否能解决问题。

# javascript - 如何延迟for循环

> ID：15943201
> 
> 赞同：0
> 
> 时间：2013-04-11T07:41:27.560
> 
> 标签：javascript, jquery, ajax, internet-explorer

我想将请求延迟几毫秒。

我在 for 循环中执行 3 个 ajax 调用哪个 jquery。for 循环的长度最大为 20。

意味着我在几秒钟内完成了近 60 个请求。在 chrome、firefox、safary 和 opera 中它没有问题，但在 IE 中它中止了请求。

我的 For 循环

```
for (index in personScoreCollection.collection) {
        //Get the 4th and 5th score simultaniously.
        $.when(UserSearch(index), UsabilityScore(index), UserConnection(index)).done();
    } 
```

所有方法都有一个 ajax 请求。

您可以在此处查看错误，即如何中止请求

[图片 http://s24.postimg.org/q0zj3vwhg/Error_Message.jpg](http://s24.postimg.org/q0zj3vwhg/Error_Message.jpg)

如何使用 java 脚本延迟或保留请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:49:56.007

您应该使用`.done`调用本身来触发下一批 AJAX 调用：

```
var keys = Object.keys(personScoreCollection.collection);

(function next() {
    if (keys.length) {
       var index = keys.shift();
       $.when(UserSearch(index),
              UsabilityScore(index),
              UserConnection(index)
       ).done(function(a, b, c) {
                  // process results
       }, next);  // recurse
    }
})();  // start loop immediately 
```

该代码创建了一个包含所需键的数组，一次只从该数组中移动一个键，然后进行三个所需的 AJAX 调用。只有在所有三个都完成后，它才会开始下一批。

为了循环，它利用了如何`.done`传递*多个*回调，每个回调将被依次调用。如果您要反转这两个回调，您实际上可以在处理当前结果集的同时开始下一批（异步）获取。

请注意，如果任何 AJAX 调用失败，则此循环将中止，因为`.done`不会调用该函数的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:57:04.253

您可以使用 setTimeout 函数来延迟一些工作。一个例子 ：

```
var ms_pause = 50; // time between request in milliseconds
var counter = 1;

for (index in personScoreCollection.collection) {
    //Get the 4th and 5th score simultaniously.
    setTimeout((function(context_index){
        return function(){
            $.when(UserSearch(context_index), UsabilityScore(context_index), UserConnection(context_index)).done();
        }
    })(index), ms_pause * counter);
    counter += 1;
} 
```

# html - html/css 边框仅在行中

> ID：15943204
> 
> 赞同：2
> 
> 时间：2013-04-11T07:41:34.937
> 
> 标签：html, css, rows

我已经在这段代码上工作了一段时间，但遇到了一堵墙。我敢肯定，这只是因为我已经盯着它看了足够长的时间，以至于在我看来，我觉得我已经尝试了所有解决方案，但我似乎无法在每个解决方案的顶部和底部找到一个边框此表中的行。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
 <style>

 #data_table {
    td {    
            border-bottom: solid;
            background-color: #000099;
            font-family: arial;
            font-size: 12px;
    }
    th {
            background-color: #cccccc;
            font-family: arial;
            font-size: 12px;
            font-weight: bold;

 }
  border-top-width: 1px;
border-top-style: solid; /* double, dashed, dotted... */
border-top-color: #000;

    border-bottom-width: 3px;
border-bottom-style: solid; /* double, dashed, dotted... */
border-bottom-color: #000;

    margin: 8px;
padding: 0px;
padding-left: 10px;
padding-right: 10px;

word-wrap: break-word;
table-layout: fixed;
width: 700px;
background-color: #f5f5f5

 }
 </style>
</head>
<body>

    <form action="testreport.php" method="post">
 First Name: <input type="text" name="FirstName">
 Last Name: <input type="text" name="LastName">
 Start Date(YYYY-MM-DD): <input type="text" name="StartDate">
 End Date(YYYY-MM-DD): <input type="text" name="EndDate">
 <input type="submit">
 </form>

     <table id="data_table"><tr><th align=left>Date</th><th align=left>Description</th><th align=left>Amount</th></th><th align=left>Balance</th><tr><td>2009-08-01</td><td>YDP 09/10: Registration Fee for Lauren Stone</td><td>25.00</td><td>Balance</td></tr><tr><td>2009-08-01</td><td>YDP 09/10: Tuition for Lauren Stone (Quarter 1)</td><td>1275.75</td><td>Balance</td></tr><tr><td>2009-10-01</td><td>YDP 09/10: Tuition for Lauren Stone (Quarter 2)</td><td>1275.75</td><td>Balance</td></tr><tr><td>2009-12-01</td><td>YDP 09/10: Tuition for Lauren Stone (Quarter 3)</td><td>1275.75</td><td>Balance</td></tr><tr><td>2010-02-01</td><td>YDP 09/10: Tuition for Lauren Stone (Quarter 4)</td><td>1275.75</td><td>Balance</td></tr><tr><td>2010-08-01</td><td>YDP 10/11: Registration Fee for Lauren Stone</td><td>25.00</td><td>Balance</td></tr><tr><td>2010-08-01</td><td>YDP 10/11: Tuition for Lauren Stone (Quarter 1)</td><td>1084.81</td><td>Balance</td></tr><tr><td>2010-10-01</td><td>YDP 10/11: Tuition for Lauren Stone (Quarter 2)</td><td>1084.81</td><td>Balance</td></tr><tr><td>2010-12-01</td><td>YDP 10/11: Tuition for Lauren Stone (Quarter 3)</td><td>1084.80</td><td>Balance</td></tr><tr><td>2011-02-01</td><td>YDP 10/11: Tuition for Lauren Stone (Quarter 4)</td><td>1084.81</td><td>Balance</td></tr></table>        

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:46:38.667

你错过了一些东西。因为这段 CSS 代码不太好。由我修改使用它。

```
<style>

 #data_table {
    border-top-width: 1px;
border-top-style: solid; /* double, dashed, dotted... */
border-top-color: #000;

    border-bottom-width: 3px;
border-bottom-style: solid; /* double, dashed, dotted... */
border-bottom-color: #000;
 margin: 8px;
padding: 0px;
padding-left: 10px;
padding-right: 10px;

word-wrap: break-word;
table-layout: fixed;
width: 700px;
background-color: #f5f5f5

 }

#data_table td {    
            border-bottom: solid;
            background-color: #000099;
            font-family: arial;
            font-size: 12px;
    }
   #data_table th {
            background-color: #cccccc;
            font-family: arial;
            font-size: 12px;
            font-weight: bold;

 }
 </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:55:04.790

[http://jsfiddle.net/dolours/s25jN/](http://jsfiddle.net/dolours/s25jN/)这个小提琴将解决问题

```
#data_table {
   border-top-width: 1px;
border-top-style: solid;
border-top-color: #000;
border-bottom-width: 3px;
border-bottom-style: solid;
border-bottom-color: #000;
margin: 8px;
padding: 0px;
padding-left: 10px;
padding-right: 10px;
word-wrap: break-word;
table-layout: fixed;
width: 700px;
background-color: #f5f5f5;
border-spacing: 0px;

 }

#data_table td {    
            border-bottom: solid;

            font-family: arial;
            font-size: 12px;
    border-bottom:1px solid #ddd;
    }
   #data_table th {
            background-color: #cccccc;
            font-family: arial;
            font-size: 12px;
            font-weight: bold;

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:49:09.473

您需要单独调用`#data_table td {}`and`#data_table th{}`而不是当前使用的嵌套格式。

在这里查看：http: [//jsfiddle.net/aCjMn/](http://jsfiddle.net/aCjMn/)

# c# - 在测试场景中进程意外退出后执行方法？

> ID：15943207
> 
> 赞同：0
> 
> 时间：2013-04-11T07:41:48.053
> 
> 标签：c#, mstest

执行过程意外退出后，有没有办法在 C# 中执行方法？

我当前的场景是：一个MSTest单元测试项目，在单元测试的执行过程中（在这种情况下只有Thread.Sleep）我停止调试过程，我可以指定一个必须调用的方法吗？

（在这种情况下可能是一个 MSTest 属性？）我已经尝试过：完成并实现 IDisposable

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:10:00.910

如果您手动停止任何进程（即通过终止 IDE 中的调试进程，或通过终止任务管理器中的进程），您将绕过代码的正常运行。一切都被积极终止，您`Dispose`或其他关闭方法都不会触发：所有代码执行都已停止。

请注意，如果您改为从进程中*分离*，您的代码将继续运行，但不会要求您的进程停止。（另外，作为参考：如果您从任务管理器的“应用程序”选项卡中“结束任务”，这实际上*要求*应用程序停止 - 这允许关闭代码触发，但不保证应用程序将在及时。）

简而言之：如果您停止调试过程，则不会按照定义执行任何代码。我怀疑您需要查看另一种方法：您希望调用您的方法可能是有原因的，并且您可能可以尝试另一种解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:47:17.843

如果您正在收听的进程不是*您*启动的进程（在您的情况下似乎是这样），我看不到很多其他选项，例如简单的`Timer`实现，并且在每个刻度上控制指定的进程是否在系统中可用的进程中记忆。

# ios - 如何使用 Telnet 在 IBM iSeries AS/400 上登录

> ID：15943210
> 
> 赞同：0
> 
> 时间：2013-04-11T07:42:01.317
> 
> 标签：ios, telnet

我正在尝试开发一个应用程序，例如 IBM iSeries AS/400 的终端仿真。我正在使用 AsyncSocket 连接到服务器。连接很好，但是在建立连接后，我应该如何使用用户名和密码在 telnet 服务器上登录。是否有任何格式或命令或方式我应该将用户名和密码发送到服务器以登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:58:21.890

听起来您需要非常仔细地研究[RFC 4777 - RFC 4777 - IBM 的 iSeries Telnet 增强功能。](https://www.rfc-editor.org/rfc/rfc4777)

请特别注意“标准 Telnet 选项协商”部分：

```
Telnet server option negotiation [RFC855] typically begins with the
issuance, by the server, of an invitation to engage in terminal type
negotiation with the Telnet client (DO TERMINAL-TYPE) [RFC1091].  The
client and server then enter into a series of sub-negotiations to
determine the level of terminal support that will be used.  After the
terminal type is agreed upon, the client and server will normally
negotiate a required set of additional options (EOR [RFC885], BINARY
[RFC856], SGA [RFC858]) that are required to support "transparent
mode" or full screen 5250/3270 block mode support.  As soon as the
required options have been negotiated, the server will suspend
further negotiations and begin with initializing the actual virtual
device on the iSeries.  A typical exchange might start as follows:

iSeries Telnet server             Enhanced Telnet client
--------------------------        -------------------------
IAC DO TERMINAL-TYPE        -->
                            <--   IAC WILL TERMINAL-TYPE
IAC SB TERMINAL-TYPE SEND
IAC SE                      -->
                                  IAC SB TERMINAL-TYPE IS
                            <--   IBM-5555-C01 IAC SE
IAC DO EOR                  -->
                            <--   IAC WILL EOR
                            <--   IAC DO EOR
IAC WILL EOR                -->

Actual bytes transmitted in the above example are shown in hex below.

iSeries Telnet server             Enhanced Telnet client
--------------------------        -------------------------
FF FD 18                    -->
                            <--   FF FB 18
FF FA 18 01 FF F0           -->
                                  FF FA 18 00 49 42 4D 2D
                                  35 35 35 35 2D 43 30 31
                            <--   FF F0
FF FD 19                    -->
                            <--   FF FB 19
                            <--   FF FD 19
FF FB 19                    --> 
```

因此，您实际上会想要查找那些字节码并发送适当的响应。

# codeigniter - 代码点火器。控制器无法接收会话数据

> ID：15943215
> 
> 赞同：1
> 
> 时间：2013-04-11T07:42:04.293
> 
> 标签：codeigniter, session

我成功设置了会话，因为输出分析器向我显示了会话名称和值。但是当我 POST 数据控制器无法接收会话数据时。库已加载，$config['sess_expire_on_close'] = TRUE 我已更改 TRUE-FALSE，但没有任何成功。还尝试重写代码。还有一个问题，我使用两台 PC，在 Linux 机器上我收到错误“标头已发送...”，但在 Win 机器上我没有收到此消息。如何在 Win PC 上启用它。通知和警告已启用。

所以 ...

控制器kmgld：

```
 function authorisation_user()
     {
          ......
          $data['set_cookie']       = "Surname";
          ......
          $this->load->view('vheader', $data);
          $this->load->view('vuser_kmgld');
          $this->output->enable_profiler(TRUE); //show me only session name and value which I set
     } 
```

看法：

```
 if ($set_cookie!=NULL)
   {
        $this->session->set_userdata('surname',$set_cookie);

    }
  <!Doctype...>

  <form action="<?php echo base_url()?>index.php/kmgld/update_kmgld" method="post" name=""> 
```

再次控制器 kmgld

```
 function update_kmgld()
      {
       ...update DB
      $test=$this->session->userdata('surname');
        echo $test; //it is NULL
       $this->output->enable_profiler(TRUE); // show me only now session id, ip, user agent
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:25:33.333

您必须在控制器中设置用户数据，视图不适合它。所以你可能会在你的控制器中做这样的事情：

```
$surname = "Surname";
$this->session->set_userdata('surname',$surname);
$data['set_cookie'] = $surname;
...
$this->load->view('vheader', $data); 
```

不知道你是否自动加载会话库。否则你必须在你需要的每个函数中加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:12:38.500

从视图中删除会话设置并在控制器中执行：

```
function authorisation_user()
     {

          $data['set_cookie']       = "Surname";

          $this->session->set_userdata('surname',$set_cookie);
          $this->load->view('vheader', $data);//are you sure here is where $data should go ?
          $this->load->view('vuser_kmgld');//not $data here?
          $this->output->enable_profiler(TRUE); //show me only session name and value which I set
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:22:05.450

控制器：

```
 <?php

 class Kmgld extends CI_Controller {

function index()
    {   
        $data['flag'] = "first";
        $this->load->model('Mkmgld');   
        $this->load->view('vheader');
        $this->load->view('vauthorisation',$data);
        $this->load->view('vfooter');

    }

function get_kmgld()
    {
        $this->load->model('Mkmgld');   
        $this->Mkmgld->get_kmgld();
        $this->load->view('vheader');
        $this->load->view('kmgld');
        $this->load->view('vfooter');
    }

function authorisation_user()
    {
        $this->load->model('Mkmgld');
        $surname_session            = $this->session->userdata('surname');
        $data['surname_post']       = mb_convert_case($this->input->post('surname'), MB_CASE_TITLE, "UTF-8"); 
        $data['user_id']            = $this->Mkmgld->valid_user($data['surname_post']);
        $surname                    = (isset($data['user_id'][0]->surname)? $data['user_id'][0]->surname: "");

        if(isset($surname) and $surname !=NULL)
            {   
                $data['query']              = $this->Mkmgld->get_kmgld($data['surname_post']);
                $data['get_trip_target_id'] = $this->Mkmgld->get_trip_target_id();
                $data['set_cookie']         = $data['surname_post'];
                $this->session->sess_destroy();

                $this->load->view('vheader', $data);
                $this->load->view('vuser_kmgld');
                $this->load->view('vfooter');

            }else if (isset($surname_session) and $surname_session!= NULL)
                    {   
                        //echo "you are in session";
                        $data['query']              = $this->Mkmgld->get_kmgld($surname_session);
                        $data['get_trip_target_id'] = $this->Mkmgld->get_trip_target_id();

                        $this->load->view('vheader', $data);
                        $this->load->view('vuser_kmgld');
                        $this->load->view('vfooter');

                    } else
                            {
                                    $data['flag']   =   "wrong";
                                    $this->load->view('vheader');
                                    $this->load->view('vauthorisation',$data);
                                    $this->load->view('vfooter');
                            }

                //echo "<pre>";
                //var_dump($data);
           $this->output->enable_profiler(TRUE); 
    }//end authorisation_user()

function update_kmgld()
    {
        $this->load->model('Mkmgld');
        $data['get_trip_target_id'] = $this->Mkmgld->get_trip_target_id();
        $trip_target_id             = $data['get_trip_target_id'][0]->Auto_increment;
        $this->Mkmgld->update_kmgld($this->input->post('day')
                                    ,$this->input->post('mon')
                                    ,$this->input->post('year')
                                    ,$this->input->post('spd_before')
                                    ,$this->input->post('spd_after')
                                    ,$this->input->post('total')
                                    ,$this->input->post('target')
                                    ,$this->input->post('approved')
                                    ,$this->input->post('user_id')
                                    ,$trip_target_id);
        $a=$this->session->userdata('surname');
        if ($a==NULL)
            {
                echo $a;
                //redirect('kmgld/authorisation_user');
                $this->output->enable_profiler(TRUE); 
            }

    }
     }//end class kmgld
     ?> 
```

模型：

```
enter code here<?php 
```

类 Mkmgld 扩展 CI_Model {

```
function __construct()
{
    parent::__construct();
}

function get_kmgld($surname){
        $query = $this->db->query("SELECT
                                            *
                                    FROM `user`
                                    INNER JOIN `user_has_trip`
                                    ON `user`.`user_id` = `user_has_trip`.`user_id`
                                    INNER JOIN `trip_target`
                                    ON `user_has_trip`.`user_has_trip_id` = `trip_target`.`trip_target_id`
                                    WHERE `user`.`surname` = '$surname'
                                ");
        return $query->result(); 

}

function valid_user($surname)
    {
        $user_id = $this->db->query("SELECT
                                            *
                                    FROM `user`
                                    WHERE `user`.`surname`='$surname'
                                ");
        return $user_id->result();
    }

function get_trip_target_id()
    {
        $get_trip_target_id = $this->db->query("SHOW TABLE STATUS LIKE 'trip_target'");
        return $get_trip_target_id->result();

    }

function update_kmgld($day, $mon, $year, $spd_before, $spd_after, $total, $target, $approved, $user_id, $trip_target_id)
    {
        $date = $year."-".$mon."-".$day;
            $this->db->query("INSERT INTO `trip_target` (`trip_target_id`
                                                  ,`date`
                                                  ,`speedometer_before`
                                                  ,`speedometer_after`
                                                  ,`duration`
                                                  ,`target`
                                                  ,`approved`)
                             VALUES (NULL
                                     ,'$date'
                                     ,'$spd_before'
                                     ,'$spd_after'
                                     ,'$total'
                                     ,'$target'
                                     ,'$approved')
                            ");

            $this->db->query("INSERT INTO `user_has_trip` 
                                            (`user_has_trip_id`
                                                ,`user_id`
                                                ,`trip_target_id`
                                            )
                                      VALUES  (NULL
                                               ,'$user_id'
                                               ,'$trip_target_id'
                                               ) 
                             ");

    }

}//end class

?> 
```

查看授权：

```
<?php
    $surname_value = $this->session->userdata('surname');
?>

   <?php
   if ($flag =="wrong")
{
    echo "...Bad very bad. Try use another language ";
}

?> 
```

html: 表单方法="post" action="authorisation_user" 输入类型="text" name="surname"

查看视频头：

```
<?php
 if ($set_cookie!=NULL)
{
    $this->session->set_userdata('surname',$set_cookie);
    echo "cookie set".$set_cookie;

}

?> 
```

查看 vuser_kmgld：

html: form action="update_kmgld" 输入 name=day, name=mon, name=year, name=spd_before...等。php代码后：

```
if (isset($user_id[0]->user_id))
  {
     foreach ($query as $row)
{ 
    echo "<tr>
                                <td>".(isset($row->date)? date("d.m.Y",     strtotime($row->date)): "")."</td>
                    <td>". (isset($row->speedometer_before)? $row->speedometer_before : "")."</td>
                    <td>". (isset($row->speedometer_after)? $row->speedometer_after : "")."</td>
            <td>". (isset($row->duration)? $row->duration : "")."</td>
            <td>". (isset($row->target)? $row->target : "")."</td>
            <td>". (isset($row->aproved)? $row->aproved : "")."</td>
        </tr>";
    }

   } //else redirect('kmgld/index');
   ?> 
```

# c - 结构中的指针

> ID：15943217
> 
> 赞同：0
> 
> 时间：2013-04-11T07:42:19.727
> 
> 标签：c, pointers, struct

我有以下情况。我的目标是使 a 和 b 都指向相同的内存。但条件是它们都是指针。我该怎么做？

```
struct myStruct
{
struct anotherStruct* anoStrct;
};
main()
{
   struct myStruct *a=( struct myStruct*)malloc(sizeof( struct myStruct));
   struct myStruct *b=( struct myStruct*)malloc(sizeof( struct myStruct));
   a=b;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T07:43:53.487

例如，您可以为一个指针分配空间，`a`如

```
struct myStruct *a= malloc(sizeof( struct myStruct)); 
```

并将此指针分配给`b`as

```
struct myStruct *b = a; 
```

**编辑：**当您复制指针并将它们用于某些操作时，您还必须小心复制，即复制是浅复制还是深复制。请参考[深拷贝和浅拷贝有什么区别？](https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy)更多细节。

在上述代码段中，如果用 初始化后执行以下语句`b`，`a`则会遇到分段错误，因为原始指针已被释放。

```
free(b);
a->anoStrct = malloc(sizeof(struct anotherStruct)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T07:42:51.450

```
struct myStruct *a=malloc(sizeof(*a));
struct myStruct *b=a; 
```

请注意，由于`a`和`b`都指向相同的内存，因此对其中一个的更新（显然）也会影响另一个。此外，您只能稍后调用`free`其中一个指针。

您建议的代码还使两个变量都指向相同的内存。但是，它会泄漏最初分配的内存`a`。

# google-visualization - 谷歌图表 x 轴标签被截断

> ID：15943226
> 
> 赞同：2
> 
> 时间：2013-04-11T07:42:40.470
> 
> 标签：google-visualization

问题是，当我将 x 轴标签设置为垂直时，它们会被截断，尝试设置更多高度 -> 然后图表改变大小，但标签仍然被截断。有没有办法/破解设置 x 轴标签在溢出时不截断。

还有一些奇怪的行为，一些 x 轴标签有一些填充 - >我在 x 轴标签下面放了红线，你可以看到标签有不同的起始位置

谢谢。

柱状图属性：

```
var options = {
                      title: 'title',
                      strictFirstColumnType: true,
                      lineWidth: 1,
                      isStacked: true,
                      legend: { position: 'bottom', alignment: 'left', textStyle: { color: 'black', fontSize: 15, italic: false, bold: true }, maxLines: 5 },
                      vAxes: { 1: { title: 'y1TitleText'e,  titleTextStyle: { italic: false, bold: true }, minValue:0, gridlines: { count: 6 } } },
                      hAxis: {slantedText: true, slantedTextAngle: 90, title: 'titleText'},
                      fontSize: 15,
                      colors: colors
                  }; 
```

图表输出：

[输出图像](http://oi46.tinypic.com/2cqxrwl.jpg)

# oop - 根据数学群论设计对象好不好

> ID：15943233
> 
> 赞同：3
> 
> 时间：2013-04-11T07:42:58.957
> 
> 标签：oop, abstract-algebra

例如，假设您正在设计一个名为 的对象类`Car`，它支持用符号 表示的二元运算`+`，即您可以执行`car1 + car2`where`car1`和`car2`are 的实例`Car`

当您刚刚完成抽象代数课程时，您尝试`Car`根据数学群论将课程设计为一个“群”，因此该课程`Car`具有以下属性：

*   `car1 + car2`返回另一个实例`Car`
*   `(car1 + car2) + car3 == car1 + (car2 + car3)`
*   对于任何实例`carx`，都有`car0`这样一个实例`carx + car0 == car0 + carx == carx`
*   每个实例`carx`都有它的逆`carx_inv`，使得`carx + carx_inv == carx_inv + carx == car0`

**你能给我一个例子，这种实现是必要的，或者至少是有益的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:29:46.920

OOP 概念是以设计类的形式表示现实世界的概念。因此，如果您想找到群论在 OOP 概念中的应用，请寻找群论在现实生活中的应用。

理论上，我们可以将这个概念应用于 OOP 世界中创建的所有内容。

该对象只是存储一些值的属性包的快捷方式。当我们创建一个对象时，我们收集这些属性并用名称将它们括起来以简化通信。

由于对象由具有价值的属性组成。我们可以使用代数来处理它们。作为概念的对象保持不变，只是属性的值发生了变化。属性的值是对象的真实表示。

所以不要和汽车一起去，这将是它的结构

```
Car {
 numberOfSeats
} 
```

我们有一个名为的结构`Car`，只有一个属性`numberOfSeats`。

我们的工作数据将是一辆有 2 个座位的汽车和有 4 个座位的汽车，分别称为 car2 和 car4。

```
Object car2 = Create Car with 2 seats.
Object car4 = Create Car with 4 seats. 
```

所以我们有两个对象。现在不要做数学了。

`Object car6 = car2 + car4.`

在幕后，我们创建了一个新的 Car 对象并添加了`numberOfSeats`. 产品为六座新车。

* * *

这就是这个概念的运作方式。所以根据这个理论，我们可以对任何东西进行操作。由于汽车不是最好的例子，在现实生活中真的很难做到这一点。

事实是，这种行为取决于开发人员的负责人。当我们从单个正方形对象开始时，当我们与另一个正方形发生碰撞时，我们可以设计一个游戏。我们的起始方块随着碰撞方块的大小而增加。另一个很好的例子是 type `Money`，除了它的值，我们总是有货币。所以数字更复杂，但我们可以用它来完成我们可以用数字执行的每一个操作。

# javascript - ajax响应后HTML结构受到干扰

> ID：15943239
> 
> 赞同：0
> 
> 时间：2013-04-11T07:43:14.867
> 
> 标签：javascript, jquery, python-2.7, django-1.5

我正在使用**django 1.5、python 2.7 和 jquery 1.9**。虽然这个问题主要与**javascript**有关。

我的html代码如下。这形成了一个对象列表，例如：

```
<div class="item cls">
<div class="item cls">
<div class="item cls">
<div class="item cls">
<div class="item cls">
<div class="item cls">
<div class="item cls">
<div class="item cls"> 
```

现在，当我通过 ajax 获取更多数据时，形成的结构是这样的：

```
<div class="item cls">
<div class="item cls">
<div class="item cls">
<div class="item cls">
    <div class="item cls"> #new div
        <div class="item cls"> #new div
                <div class="item cls"> #new div
                        <div class="item cls"> #new div 
```

**HTML：**

```
{% for obj in objs %}        
        <div class="item cls">
            <div class="alpha"><a href="#"><img src="{{ STATIC_URL }}img/107.png" /></a></div>
            <div class="span6" id="abc_{{ obj.id }}">
            <h2 class="Title"><a href="#">{{ obj.t }}</a></h2>
            <p>{{ obj.a }}</p>

            <div class="tags">
            <a href="#"><i class="icon"></i> Intel</a>
            <a href="#"><i class="icon"></i> Architecture</a>
            </div>

           <a href="#" class="btn"><i class="icon"></i> Upload </a>
           <a href="#" class="btn"><i class="icon"></i> Download </a>
          </div>
        </div>
{% endfor %} 
```

**AJAX 成功：**

```
for(var i = 0; i < response.length; i++){
    var divs = document.getElementsByClassName('item');
    divs[parseInt(divs.length)-1].innerHTML = '<div class="item cls"><div class="alpha"><a href="#"><img src="{{ STATIC_URL }}img/107.png" /></a></div><div class="span6" id="abc_' + response[i].id + '"><h2 class="Title"><a href="#">' + response[i].t + '</a></h2><p>' + response[i].a + '</p><div class="tags"><a href="#"><i class="icon"></i> Intel</a><a href="#"><i class="icon"></i> Architecture</a></div><a href="#" class="btn"><i class="icon"></i> Upload </a><a href="#" class="btn"><i class="icon"></i> Download </a></div></div>' 
```

我在 innerHTML 中附加代码的那一行存在一些问题。不明白那是什么。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:12:55.310

我通过在我的 django 模板之外添加一个 div 来解决这个问题

```
<div class="itemContainer">
        #previous HTML code
</div> 
```

现在在我写的ajax成功函数中

```
for(var i = 0; i < response.length; i++){
    var divs = $('.itemContainer')[0].innerHTML;
    $('.itemContainer')[0].innerHTML = divs.concat('//structure to concatenate');
} 
```

我对这种方法不满意，但仍然对我有用。任何更好的答案/修复将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:10:37.073

您正在将 ajax 响应“插入”到最后一个 div 中。这就是为什么您的结构被水洗的原因。由于您使用的是 jQuery，因此请利用“.insertAfter”方法。例如：

```
var div = jQuery('<div/>', {
    html: '<innerhtmlhere>'
});
div.insertAfter($('.item').last()); 
```

试一试，让我知道你的结果。

或者为了更快的实施：（如果您的响应文本是干净的）

```
$("<responsetexthere>").insertAfter($('.item').last()); 
```

文档：[http ://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)

# cocoa - NSArrayController，以编程方式创建 CoreData 实体，以及 KVO

> ID：15943240
> 
> 赞同：2
> 
> 时间：2013-04-11T07:43:15.600
> 
> 标签：cocoa, core-data, cocoa-bindings, key-value-observing

我有一个 NSTableView，其 NSTableColumn 的值绑定到 NSArrayController。arrayController 控制我的核心数据托管对象上下文中的一组实体。

它运行良好，当通过 UI 操作将新实体插入 arrayController 时，tableView 会选择新项目。

但是我会以编程方式在 moc 中创建新实体，然后在 arrayController 中选择新对象。

我尝试了以下方法：

```
Image *newImage = [Image newImage]; // convenience method to insert new entity into mod.
newImage.title = [[pathToImage lastPathComponent] stringByDeletingPathExtension];
newImage.filename = [pathToImage lastPathComponent];

[self.primaryWindowController showImage:newImage]; 
```

showImage: 方法如下：

```
- (void)showImage:(Image *)image
{
    [self.imagesArrayController fetch:self];
    [self.imagesArrayController setSelectedObjects:@[image]];
} 
```

但是，arrayController 不会更改其选择。

我做错了吗？我假设我在 moc 中创建的 newImage 对象与 arrayController 控制的对象相同。如果这是真的，为什么 arrayController 不改变它的选择？

嗯 - 测试这个假设，我现在已经在运行时检查了 arrayController 的内容。新图像不存在 - 我认为这意味着我已经通过手动插入 moc 来“躲在后面”绑定...

我的 newImage 方便方法是这样的：

```
+ (Image *)newImage
{
    Image *newImage = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:[[CoreDataController sharedController] managedObjectContext]];
    return newImage;
} 
```

这不符合 KVO 吗？

嗯 - 编辑 2...

我假设它符合 KVO，因为新图像出现在 UI 中。我现在认为将实体插入 moc 和通知 arrayController 之间存在延迟。

我从这个问题中看到[新的核心数据对象没有出现在 NSArrayController 安排的对象中](https://stackoverflow.com/questions/4538704/new-core-data-object-doesnt-show-up-in-nsarraycontroller-arrangedobjects?rq=1)（帮助显示在这个问题的右侧），要求 arrayController 获取：应该有助于更新 arrayController，但实际的获取：不会直到下次运行循环运行时才会发生。

我应该使用计时器延迟选择新对象吗？这似乎有点不雅...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:06:58.327

对 - 解决了这个问题，感谢这个问题：[New Core Data object doesn't show in NSArrayController mappedObjects](https://stackoverflow.com/questions/4538704/new-core-data-object-doesnt-show-up-in-nsarraycontroller-arrangedobjects?rq=1)

插入新对象后，我必须直接在 moc 上调用 processPendingChanges:。

所以，我现在的新创建方便方法是：

```
+ (Image *)newImage
{
    Image *newImage = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:[[CoreDataController sharedController] managedObjectContext]];
    [[[CoreDataController sharedController] managedObjectContext] processPendingChanges];
    return newImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T11:47:52.103

如果你想以编程的方式做到这一点，最简单的方法是直接将新的实体对象添加到 NSArrayController 中，就像这样简单：

```
[self.imagesArrayController addObject:newImage]; 
```

这将完成将对象添加到控制器并选择它的技巧。

虽然有一个小故障——我不知道你使用什么视图（NSView、UIView）来呈现 NSArrayController 的内容——但是 NSTableView 不会自动滚动以显示新添加的项目。

我不得不推迟这个（因为添加发生在后来的一些运行循环中），如下所示：

```
 NSUndoManager *um = self.managedObjectContext.undoManager;
[um beginUndoGrouping];
[um setActionName:NSLocalizedString(@"New Sample", NULL)];
PMWaterSample *sampleToAdd = [self createNewSample];
[self.samplesController addObject:sampleToAdd];

// Actual addition is deferred, hence we delay the scrolling too, on the main-thread's queue.
dispatch_async(dispatch_get_main_queue(), ^{
    [self.samplesController rearrangeObjects];

    // bring last row (newly added) into view
    NSUInteger selectedIdx = [self.samplesController selectionIndex];
    if (selectedIdx != NSNotFound) {
        [self.samplesTable scrollRowToVisible:selectedIdx];
    }
    [um endUndoGrouping];
}); 
```

希望这会有所帮助。我从来不用强迫 MOC 处理 PendingChanges。我仍然觉得有更好的方法可以做到这一点，并让数组控制器使其嵌入的 UI 元素滚动并显示新项目，但我不知道如何。

# ruby-on-rails - 为什么 .present 与 capybara 的集成 minitest 规范返回 true？当数据库中没有行时

> ID：15943241
> 
> 赞同：0
> 
> 时间：2013-04-11T07:43:19.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, minitest

我正在运行 Rails 3.2.11，并相信我已经安装了 minitest 规范和 capybara，并且通过我的 gem 文件和 test_helper.rb 正常工作

我有以下集成测试：

```
describe "Products integration" do
fixtures :users, :businesses
  it "shows product's name" do
    visit root_path
    fill_in "email", :with => users(:fu).email
    fill_in "password", :with => "secret"
    click_button "Log In"

    assert_equal products_path, current_path
  end
end 
```

使用浏览器，一旦用户登录，他们就会被重定向到 products_path，其中显示了他们所有的产品。

我的示例用户夹具没有任何产品设置。因此，在我的 index.html.erb 中，该行`<% if @products.present? %>`应该为 false，并且不应尝试显示任何行数据。情况并非如此，我的测试失败了`Error: undefined method type_name for nil:NilClass`，因为它似乎试图写入表数据`<td><%= product.product_type.type_name %></td>`

导致 index.html.erb 的动作只包含`@products = Product.includes(:product_type)`

为什么对 products.present 的测试返回 true？并因此失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:51:23.407

啊，但不知何故至少有一种产品，否则你的错误将是

```
Error: undefined method product_type for nil:NilClass 
```

因此，返回了一个具有 nil product_type 的非 nil 产品。

尝试放一个

```
puts @products.inspect 
```

在您的规范中，也许这会提供一个线索，该产品是在哪里创建的。

此外，如果 product_type 永远不应为 nil，请在 db 中的该列上放置一个 NOT NULL 约束，以真正确保此类恶作剧是不可能的。ActiveRecord 级别的验证很有用，但可以通过多种方式规避，并且不能依赖于实际的数据完整性目的。

# android - 从 Html.fromHtml 跨越，但自定义 ClickableSpan 用于自定义方案

> ID：15943244
> 
> 赞同：4
> 
> 时间：2013-04-11T07:43:37.373
> 
> 标签：android, html, textview, spanned

我有一个显示一些 HTML 代码（包括图像，ImageGetter）的 TextView。html 不是我的，但我可以要求他们包含自定义方案链接，甚至可能是标签。

目的：显示一些动态生成的内容，而无需使用嵌套的 Android 布局。
问题：必须在应用程序中处理某些链接（加载了新的 Fragment）。
不能[为 action.VIEW 使用接收器](https://stackoverflow.com/a/3452944)，因为它是一个 Activity Intent，而不是广播，并且它的使用将是非常上下文相关的，因此只有以编程方式注册的接收器才可以。

我正在使用`textView.setText(Html.fromHtml(content.content, imageGetter, null)`. 需要一切都保持不变，除了一些跨度应该有我自己`onClick`的。我对 Spanned 不是很熟悉，所以我看到了这些选项：

1.  编辑从返回的 SpannableStringBuilder `Html.fromHtml`，并用自定义 ClickableSpan 替换我想要的 URLSpan（如何？）
2.  如上所述，但将所有内容复制到新的构建器，将 URLSpan 交换为我自己的（如何？`append`只需要一个 CharSequence，我得到 RelativeSizeSpan、StyleSpan、ImageSpan、URLSpan ......）
3.  手动创建一个 Spaned。我可以为自定义方案做到这一点，但是如何复制`Html.fromHtml`（或足够接近）其他所有的效果？

[编辑] 感谢 MH。信息。我以前尝试过，但失败了。现在我回到它，我发现我犯了一个错误，将错误的项目传递给 setSpan 的第一个参数。
如果有人感兴趣，我现在使用这个：

```
public static interface OnSpanClickListener {
    void onClick(String url);
}
public static SpannableStringBuilder getSpannable(String source, ImageGetter imageGetter, String scheme, final OnSpanClickListener clickHandler){
    SpannableStringBuilder b = (SpannableStringBuilder) Html.fromHtml(source, imageGetter, null);
    for(URLSpan s : b.getSpans(0, b.length(), URLSpan.class)){
        String s_url = s.getURL();
        if(s_url.startsWith(scheme+"://")){
            URLSpan newSpan = new URLSpan(s_url.substring(scheme.length()+3)){
                public void onClick(View view) {
                    clickHandler.onClick(getURL());
                }
            };
            b.setSpan(newSpan, b.getSpanStart(s), b.getSpanEnd(s), b.getSpanFlags(s));
            b.removeSpan(s);
        }
    }
    return b;
} 
```

(...)

```
body.setText(getSpannable(content.content, imageGetter, getResources().getString(R.string.poster_scheme), new OnSpanClickListener(){
public void onClick(String url) {
    // do whatever
}
})); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:52:06.243

选项 1 可能是最直接的，并且之前已经完成了大部分艰苦的工作。您的总体思路是正确的：处理 HTML 后，您可以请求所有生成的`URLSpan`实例并循环遍历它们。然后，您可以将其替换为自定义的可点击跨度，以完全控制任何跨度点击。

在下面的示例中，我只是将 every 替换`URLSpan`为该类的一个简单扩展，该类采用原始 url（实际上，我可能应该说 'uri'）并替换其方案部分。我没有`onClick()`实现实际的逻辑，但我会把它留给你的想象。

```
SpannableStringBuilder builder = ...
URLSpan[] spans = builder .getSpans(0, builder .length(), URLSpan.class);
for (URLSpan span : spans) {
    int start = builder .getSpanStart(span);
    int end = builder .getSpanEnd(span);
    s.removeSpan(span);
    span = new CustomURLSpan(span.getURL().replace("http://", "scheme://"));
    s.setSpan(span, start, end, 0);
}
textView.setText(builder); 
```

如前所述，这里的`CustomURLSpan`类是一个简单的扩展，`URLSpan`它接受一个 url 并覆盖`onClick()`方法，因此我们自己的逻辑可以在那里执行。

```
public class CustomURLSpan extends URLSpan {

    public CustomURLSpan(String url) {
        super(url);
    }

    @Override public void onClick(View widget) {
        // custom on click behaviour here
    }
} 
```

一些基本做类似事情的相关问答（可能有助于获得更多灵感）：

*   [使用 Linkify 后可以更改 TextView 链接文本吗？](https://stackoverflow.com/questions/3983409/can-i-change-textview-link-text-after-using-linkify)
*   [从 TextView 中的链接中删除下划线 - Android](https://stackoverflow.com/questions/4096851/remove-underline-from-links-in-textview-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-14T10:00:08.740

由于您将使用**TextView.setMovementMethod(LinkMovementMethod.getInstance())**使其响应部分点击，您可以实现自定义的***LinkMovementMethod***来拦截点击事件并处理您自己的逻辑。

```
public class CustomLinkMovementMethod extends LinkMovementMethod {

    private HashMap<Class, SpanProxy> spansProxy = new HashMap<>();

    public CustomLinkMovementMethod setSpanProxy(Class spanClazz, SpanProxy proxy) {
        spansProxy.put(spanClazz, proxy);
        return this;
    }

    public CustomLinkMovementMethod removeSpanProxy(Class spanClazz) {
        spansProxy.remove(spanClazz);
        return this;
    }

    @Override
    public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent event) {

        int action = event.getAction();

        if (action == MotionEvent.ACTION_UP ||
                action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            ClickableSpan[] link = buffer.getSpans(off, off, ClickableSpan.class);
            if (link.length != 0) {
                if (action == MotionEvent.ACTION_UP) {
                    SpanProxy spanProxy = spansProxy.get(ClickableSpan.class);
                    if(spanProxy != null) {
                        spanProxy.proxySpan(link[0], widget);
                    } else {
                        link[0].onClick(widget);
                    }
                    return true;
                }
            }
        }
            return super.onTouchEvent(widget, buffer, event);
    }

    public interface SpanProxy {
        void proxySpan(Object span, View widget);
    }
} 
```

并像这样使用：

```
textView.setMovementMethod(new CustomLinkMovementMethod().setSpanProxy(ClickableSpan.class,
        new CustomLinkMovementMethod.SpanProxy() {
            @Override
            public void proxySpan(Object span, View widget) {
                if (span instanceof URLSpan) {
                    URLSpan urlSpan = (URLSpan) span;
                    String url = urlSpan.getURL();

                    // do what you want with the link
                    // tbd
                    return;
                }

                if (span instanceof ClickableSpan) {
                    ((ClickableSpan) span).onClick(widget);
                }
            }
        })); 
```

# android - 如何使用 VOICEMAIL 接收广播

> ID：15943245
> 
> 赞同：0
> 
> 时间：2013-04-11T07:43:38.550
> 
> 标签：android

[http://developer.android.com/reference/android/provider/VoicemailContract.html](http://developer.android.com/reference/android/provider/VoicemailContract.html)

我不知道如何用 VOICEMAIL 制作广播接收器。当您收到语音邮件时，您会在通知中看到“NEW VOICEMAIL”，图标就像磁带一样。

这是我的代码：

AndroidManifest.xml

```
<receiver android:name=".VoiceBrocast" >
        <intent-filter>
            <action android:name="android.intent.action.NEW_VOICEMAIL" />
        </intent-filter>
 </receiver>

<uses-permission android:name="com.android.voicemail.permission.ADD_VOICEMAIL" /> 
```

我试图在 xx.java 中注册，但它没有用。

MainActivity.java：

```
 protected VoiceBrocast mUiBroadcastReceiver;

       mUiBroadcastReceiver = new VoiceBrocast();
    IntentFilter mIntentFilter = new IntentFilter();
    mIntentFilter.addAction("android.intent.action.ACTION_NEW_VOICEMAIL");

 MainActivity.this.registerReceiver(mUiBroadcastReceiver, mIntentFilter); 
```

VoiceBrocast.Java

公共类 VoiceBrocast 扩展 BroadcastReceiver {

```
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
        System.out.println("voicemail");
    } 
```

}

当我收到语音邮件时，没有可打印的内容，我在 LogCat 中看不到“语音邮件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:55:37.080

> 访问此内容提供者所需的最低权限是 ADD_VOICEMAIL

你有这样的权限吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:25:46.833

不确定 else 是错误的，但一个问题是：意图动作没有被调用`"android.intent.action.ACTION_NEW_VOICEMAIL"`但是`"android.intent.action.NEW_VOICEMAIL"`。

也许您将它与 VoicemailContract 类上的常量名称（即`VoicemailContract.ACTION_NEW_VOICEMAIL`.

# php - 使用数组获取所有信息时如何突出显示表格行？

> ID：15943254
> 
> 赞同：2
> 
> 时间：2013-04-11T07:43:59.677
> 
> 标签：php, css, mysql, html-table

我正在获取 mysql 数据库中的所有行，`mysql_fetch_array()`然后在表中显示它们。

```
while($row = mysql_fetch_array( $data )) { 
  echo "<td>" . $row['name']."</td>";
} 
```

在这种情况下，如果用户使用我的 php 表单更新表上的记录，我想突出显示该表行。（改变背景颜色就足够了。）我该怎么做？或者我可以只为一条记录干预 while 循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:51:04.537

如果您在脚本顶部插入，则

```
//insert to mysql here
$id = mysql_insert_id($resource);
...
while($row = mysql_fetch_array( $data )) { 
  if ($id == $row['id']) {
    echo '<td style="color:red">' . $row['name'] . "</td>";
  } else {
    echo "<td>" . $row['name']."</td>";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:49:06.943

尝试这样的事情来比较表单中的数据（那部分是 $_POST['id'] - 用你的代码改变它），用户使用当前行数据发送他的更新（我想你有类似 id 的东西sql 行结果）并更改行的样式。

```
while($row = mysql_fetch_array( $data )) { 
  $style = ($row['id'] == $_POST['id']) ? 'style="background-color: red;"' : '';
  echo "<td $style>" . $row['name']."</td>";
} 
```

# python - 在 Cosm 中检测冷冻饲料

> ID：15943255
> 
> 赞同：0
> 
> 时间：2013-04-11T07:44:01.753
> 
> 标签：python, cosm

使用 Cosm 数据记录。

是否可以创建一个触发器，在提要冻结时发送警报（即，数据停止接收超过 15 分钟）。

当我的无线传感器网络停止工作时，这会提醒我。

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:59:41.827

您可以通过 API 或网站在数据流上创建此类触发器。

请参阅[api 文档以获取触发器](http://cosm.com/docs/v2/trigger/)或访问[cosm.com上的供稿页面之一](https://cosm.com)

# mysql - 我能否获得使用 SSL 支持构建的 Windows MySQL Community 5.6 二进制文件？

> ID：15943256
> 
> 赞同：1
> 
> 时间：2013-04-11T07:44:02.150
> 
> 标签：mysql, windows, ssl, binaries

我从 Oracle 获得了 Windows Community MySQL 5.6 安装包。令我沮丧的是，SSL 已禁用。Oracle 站点上的文档是不透明的。

(1) 是否存在用于下载和安装的 Windows Community MySQL 5.6 二进制文件是否正确？(2) 或者，正如一些文档所建议的那样，是否可以通过安装适用于 Windows 的 OpenSSL，然后将 MySQL 服务器 (Windows) 配置为使用 SSL 来将该功能添加到我的安装中？(3) 或者以上都不是？请注意，我不是在询问有关使用 SSH 建立连接的问题。

> mysql> 显示变量，如“have_ssl”；
> 
> have_ssl 已禁用
> 
> 一组中的 1 行（0.00 秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:25:02.933

# php - 是否存在一个将常见的社交网络 api 聚集在一起的 php 项目/类？

> ID：15943259
> 
> 赞同：-3
> 
> 时间：2013-04-11T07:44:12.073
> 
> 标签：php, facebook, social-networking

我目前正在运行一个在线社区，并希望扩展它的功能，即人们可以在特定操作上更新 SNS 状态。一年前我有使用Facebook、Twitter和微博的API的经验，但我厌倦了不断更新它们，代码也不太一致。

我希望有一个更高级别的端口，它具有具有通用 SNS 的 API 来为我处理用户身份验证、重新授权权限、连接切换等。我知道 SO 不是一个适合研究的地方，但我没能在谷歌上找到它，我想这对很多人来说是一个非常有价值的资源。打扰一下，但有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:09:29.200

你应该看看[Temboo](http://www.temboo.com)。

Temboo 规范了对 100 多个 API（包括许多社交网络 API）的访问，以便您可以使用统一的语法与所有这些 API 进行交互。Temboo 通过 SDK 提供此功能，该 SDK 支持多种语言，包括 PHP。

查看[示例](https://www.temboo.com/examples)页面，了解 Temboo 简化的基于 API 的行为的概述。

（全面披露：我在 Temboo 工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:42:29.150

> HybridAuth 使开发人员能够轻松构建社交应用程序，通过实现社交登录、社交分享、用户资料、朋友列表、活动流、状态更新等，在社交层面上吸引网站访问者和客户。
> 
> HybridAuth 的目标是充当您的应用程序与各种社交 api 和身份提供商（如 Facebook、Twitter、MySpace 和 Google）之间的抽象 api。

我发现这效果更好。 [http://sourceforge.net/projects/hybridauth/](http://sourceforge.net/projects/hybridauth/)

# java - .wav 到数组的转换

> ID：15943263
> 
> 赞同：1
> 
> 时间：2013-04-11T07:44:20.987
> 
> 标签：java, arrays, wav

```
import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.UnsupportedAudioFileException;

public class Audio_to_bytes {

    public static void main(String args[]) throws IOException
{
    File WAV_FILE = new File("/home/cybersecurity/Desktop/scream.wav");
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    AudioInputStream in = null;
    try {
        in = AudioSystem.getAudioInputStream(WAV_FILE);
    } catch (UnsupportedAudioFileException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }

    int read,i;
    byte[] buff = new byte[1024];
    while ((read = in.read(buff)) > 0)
    {
        out.write(buff, 0, read);
    }
    out.flush();
    byte[] audioBytes = out.toByteArray();
    for(i=0;i<audioBytes.length;i++)
        System.out.println(audioBytes[i]);
}
} 
```

上面的代码是将 .wav 文件转换为字节数组。当我执行程序时，我得到很多值为 -128 或 -127，我想知道这些值是精确值还是成为边界值如果它超出了字节的范围（-128 到 128），如果是这样，我可以将音频文件转换为整数数组，因为它的范围更广。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:50:34.710

原始文件无关紧要，因为 WAVE 文件是使用块构建的。我建议首先了解这些块[`RIFF`File Format](http://en.wikipedia.org/wiki/Resource_Interchange_File_Format)，以了解 WAVE 文件。

# ruby-on-rails - ROR 2.3.8 中的内联附件

> ID：15943266
> 
> 赞同：1
> 
> 时间：2013-04-11T07:44:26.243
> 
> 标签：ruby-on-rails, inline, attachment, ruby-on-rails-2

我可以发现 attachments.inline 可用于在电子邮件中呈现内联附件，但我无法做到这一点，因为我们使用的是 rails 2.3.8。有没有办法让我仍然可以做到这一点？我非常希望这个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T08:39:19.413

经过一番研究，发现我的宝贝。这对我很有效。

[http://shortround.net/2010/11/24/multipart-alternative-multipart-related-email-with-actionmailer/](http://shortround.net/2010/11/24/multipart-alternative-multipart-related-email-with-actionmailer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:17:09.663

[这可能会有所帮助](https://stackoverflow.com/questions/8356924/rails-attachments-inline-are-not-shown-correctly-in-gmail) [，或者您可以尝试这个](http://edgeapi.rubyonrails.org/classes/ActionMailer/Base.html)

# javascript - 使用 Express 进行 AJAX 调用

> ID：15943271
> 
> 赞同：0
> 
> 时间：2013-04-11T07:44:43.033
> 
> 标签：javascript, ajax, node.js, express

我正在尝试使用 Express 框架在我的服务器提供的静态 HTML 文件中动态附加 HTML。我找到了完全符合我要求的cheerio 模块，但我想知道系统是否有更便宜的方法，而不是加载整个HTML 并附加一个字符串。

我搜索了 AJAX 以及如何与客户端进行通信，但我没有设法使其工作。我与cheerio 一起使用的代码是：

```
exports.modify = function(req, res){

  var html = fs.readFileSync(__dirname + '/../public/index.html', 'utf8'); 
  var $ = cheerio.load(html);
  var scriptNode = '<p>Source code modified</p>';
  $('body').append(scriptNode);

  fs.writeFile(__dirname + '/../public/index.html', $.html(), function (err) {
    if (err) throw err;
    console.log('It\'s modified!');
    });

  res.send($.html());

}; 
```

我怎样才能以更“正确”的方式做到这一点（也许使用 AJAX 调用）？任何建议都会受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:47:22.353

假设您想将 JSON 作为数据类型处理，那么您可以设置另一个特定路由，或者您可以在当前路由处理程序中过滤请求类型：

```
exports.index = function(req, res) {
  var data = someData.fetch();
  switch(req.format) {
    case 'json':
      res.json(data);
      break;
    default:
      res.render('template', {
      data:data
    });
  }
}; 
```

# ruby - 意外的 tLBRACE

> ID：15943275
> 
> 赞同：1
> 
> 时间：2013-04-11T07:44:49.293
> 
> 标签：ruby, hash

这可能是 Ruby 专业人士的一个答案。我收到语法错误：

```
unexpected tLBRACE  at line 1 
```

[我相信这与此处描述](https://stackoverflow.com/questions/2134702/ruby-1-9-hash-with-a-dash-in-a-key)的问题密切相关，但我无法弄清楚我的情况有什么问题。

有人可以指出什么问题吗？感谢您的时间。

```
def user_profile_picture(user,  size: [50, 50], type: :square, style: 'img-polaroid', opts: {})
    tag :img,
        { width: ("#{size[0]}px" if size),
          height: ("#{size[1]}px" if size),
          src: facebook_profile_picture(user, type),
          alt: '',
          class: [('verified' if user.class == User.model_name && user.facebook_verified?), style].compact.join(' ')
        }.merge(opts)
  end 
```

ruby 1.9.3p327（2012-11-10 修订版 37606）[x86_64-darwin11.4.0]

****堆栈跟踪****

```
 SyntaxError - /Developer/rails-workspace/roommate/app/helpers/users_helper.rb:7: syntax error, unexpected tLABEL
...er_profile_picture(user,  size: [50, 50], type: :square, sty...
...                               ^
/Developer/rails-workspace/roommate/app/helpers/users_helper.rb:7: syntax error, unexpected ',', expecting keyword_end
..._picture(user,  size: [50, 50], type: :square, style: 'img-p...
...                               ^
/Developer/rails-workspace/roommate/app/helpers/users_helper.rb:7: syntax error, unexpected ',', expecting keyword_end
...:square, style: 'img-polaroid', opts: {})
...                               ^
/Developer/rails-workspace/roommate/app/helpers/users_helper.rb:10: syntax error, unexpected ',', expecting keyword_end
/Developer/rails-workspace/roommate/app/helpers/users_helper.rb:11: syntax error, unexpected ',', expecting keyword_end
/Developer/rails-workspace/roommate/app/helpers/users_helper.rb:12: syntax error, unexpected ',', expecting keyword_end
/Developer/rails-workspace/roommate/app/helpers/users_helper.rb:15: syntax error, unexpected '}', expecting keyword_end
        }.merge(opts)
         ^
/Developer/rails-workspace/roommate/app/helpers/users_helper.rb:127: syntax error, unexpected keyword_end, expecting $end:
  app/helpers/users_helper.rb:7:in `'
  (gem) activesupport-3.2.9/lib/active_support/dependencies.rb:469:in `block in load_file'
  (gem) activesupport-3.2.9/lib/active_support/dependencies.rb:639:in `new_constants_in'
  (gem) activesupport-3.2.9/lib/active_support/dependencies.rb:468:in `load_file' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:13:34.460

我敢打赌，您使用的是早于 2.0 的 Ruby 版本。

在第一行，您使用[关键字 arguments](http://blog.brycekerley.net/post/46557214732/ruby-2-0-keyword-arguments)定义了方法。您获得的错误通常是在使用早期 Ruby 版本（例如 1.9）时出现的错误。哈希语法 'size:' 在这些版本的参数列表中，这是一个意外的语法。

在 Ruby 1.9 中，您应该如下定义方法：

```
def user_profile_picture(user,  size=[50, 50], type=:square, style='img-polaroid', opts={})
  #...
end 
```

# symfony - Symfony2 Capistrano 部署到 CDN

> ID：15943276
> 
> 赞同：2
> 
> 时间：2013-04-11T07:45:01.167
> 
> 标签：symfony, deployment, capistrano, cdn, capifony

我有一个 Symfony2 应用程序，我正在使用 Capistrano 将其部署到开发、登台和生产服务器。但是，我还希望设置一个 CDN 来提供静态内容，例如图像、css、js 文件等。例如，CDN 的 URL 是 static.example.com。我读过我只需将以下内容添加到我的 config_prod.yml 文件中：

```
framework:
     templating:
         engines: ['twig']
         assets_base_urls:
         http: [http://static.example.com] 
```

但是，当使用 capistrano 进行部署时，我是否需要将整个应用程序部署到 CDN 以及将托管网站的服务器，或者我可以仅将资产（即图像、js 文件等）部署到 CDN 并将动态文件部署到服务器/s?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:57:44.113

您的 CDN 只需要提供静态资产。

另见： [自动推送到 CDN 部署策略](https://stackoverflow.com/questions/2786540/automatic-push-to-cdn-deployment-strategy)

# c++ - calloc(), malloc() vs new-ing 一个内部有一个 unordered_map 的结构

> ID：15943278
> 
> 赞同：0
> 
> 时间：2013-04-11T07:45:03.010
> 
> 标签：c++, memory-management, malloc, calloc

我正在创建一个结构，该结构在堆上具有一个 unordered_map 字段。当我使用 new 时，我可以毫无问题地添加它。但是使用 calloc 时，由于存储桶大小为 0，因此插入时出错。在调用 Reserve 后它工作正常。

那么，在结构上调用 calloc 时，unordered_map 构造函数不会运行吗？我很困惑为什么如果它在一个新的结构中，它似乎有一个非零的桶大小。除了打电话给保护区外，还有更好的方法吗？（在这种情况下我不能使用 delete，所以我需要坚持 calloc 调用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:47:06.930

你是对的，`malloc()`等人不运行构造函数，而运行`new`。

您不能依赖调用`reserve()`after`calloc()`似乎可以解决问题的事实。它没有。你的代码的行为仍然是[undefined](http://en.wikipedia.org/wiki/Undefined_behavior)，它可以在任何时候以它喜欢的任何方式爆炸。

解决此问题的一种方法是使用[放置`new`](https://stackoverflow.com/questions/6783993/placement-new-and-delete)来调用`unordered_map`的构造函数。

或者，您可以将字段转换为指针，`calloc()`，`struct`然后用于`new`分配和构造`unordered_map`. 如果这样做，则必须手动执行`delete`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:47:39.903

C 内存分配函数通常不调用构造函数。请参阅[malloc 与 new](https://stackoverflow.com/questions/184537/in-what-cases-do-i-use-malloc-vs-new)。第一个答案很好地总结了它：*不要*`malloc`在 C++ 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:47:53.413

`calloc`不做任何事情来初始化你的对象作为对象。它基本上是给你一个指向一些用零填充的内存的指针。所以任何需要初始化的内部字段，比如你的地图，都不会得到它。**您不应该将 calloc 与对象一起使用。**（实际上，您可能根本不需要它。）

# wix - WiX 3.7 UI 未正确链接

> ID：15943287
> 
> 赞同：1
> 
> 时间：2013-04-11T07:45:23.913
> 
> 标签：wix, wix-extension, wix3.7

WiX 新手在这里...我已经创建了我的 WiX 安装程序包，它可以正确安装所有功能。然后我尝试使用以下内容向其添加 UI：

```
<UIRef Id="WixUI_Minimal" /> 
<UIRef Id="WixUI_ErrorProgressText" /> 
```

我链接到“light -ext WixUIExtension -cultures:en-us”。它找到了这个扩展，因为如果我用一个不存在的名称尝试它会出错，但生成的 msi 包只有 30kb。如果 UI 扩展正确链接，我认为这应该稍大一些？

当我运行 msi 时，它只提供正常的进度条，没有我期望 WixUI_Minimal 提供的其他 UI。

所有参考资料似乎都声称，当包正确链接时，您只需要一个简单的 UIRef 即可获得 UI……是否有一种已知的方法可以使链接无法正确发生而不会引发错误（即使我与-迂腐）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:19:11.153

添加 UI 时，MSI 可能不会明显变大。默认提供的图形不多。但是，如果您在安装过程中没有看到 UI，这确实意味着该 UI 没有被链接。

`UIRef`需要在引用的部分中。链接器开始的第一部分是`Product`元素。如果你`UIRef`是它的孩子，`Product`那么它肯定会被链接进来。链接器然后遍历`Product`元素中的所有引用（以 a 结尾的任何东西`Ref`都是引用，就像许多其他属性一样）在其他元素中寻找所需的`Fragment`元素。然后链接器会拉入这些`Fragment`元素中的所有内容。例如：

```
<Product>
   <DirectoryRef Id='TARGETDIR' />
</Product>

<Fragment>
    <Directory Id='TARGETDIR' Source='SourceDir' />

    <BinaryRef Id='icon' />
<Fragment>

<Fragment>
    <Binary Id='icon' Source='path\to\my.ico' />
</Fragment>

<Fragment>
   <UIRef Id='WixUI_Minimal' />
</Fragment> 
```

在上面的示例中，前三个部分将包含在链接器中。然而，这部分`UIRef='WixUI_Minimal'`被省略了，因为没有任何东西引用它。要修复它，`UIRef`可以将其移动到任何其他`Fragment`元素。

要进行测试，请尝试将您的元素移至`UIRef`您的`Product`元素。如果这不起作用，请在您的问题中提供更多详细信息，`UIRef`以便我们进一步提供帮助。

# jquery - 用于 WP8 (Lumia 920) 设备的 jQuery / HTML5 / gwt 应用程序：垂直 css 滚动修复

> ID：15943291
> 
> 赞同：0
> 
> 时间：2013-04-11T07:45:40.640
> 
> 标签：jquery, css, gwt, windows-phone-8, cordova

**问题：**

我试图解决这个关于滚动出应用程序边界的现象：

![滚动问题](https://i.stack.imgur.com/M2MBO.png)

*（图片来源：[防止在 Cordova for Windows Phone 8 中滚出 CordovaView](https://stackoverflow.com/questions/15126629/prevent-scrolling-out-of-cordovaview-in-cordova-for-windows-phone-8/15126970#15126970)）*

**方法#1**

```
body {
 overflow: hidden;      
 -ms-content-zooming: none;
} 
```

这个css片段应该修复滚动，以便在滚动内容时应用程序是稳定的，它做得很好，但它会使应用程序不稳定。应用程序手不时没有任何明显的原因。在行中显示三个不同的视图会冻结应用程序。

*（来源：[防止在 Cordova for Windows Phone 8 中滚出 CordovaView](https://stackoverflow.com/questions/15126629/prevent-scrolling-out-of-cordovaview-in-cordova-for-windows-phone-8)）*

**方法#2**

这固定了水平方向：

```
@-ms-viewport{width:device-width} 
```

这需要java脚本：

```
 if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var msViewportStyle = document.createElement("style");
        msViewportStyle.appendChild(
        document.createTextNode(
        "@-ms-viewport{width:auto!important}"
    )
 ); 
```

*（来源[WP8 IE10 视口问题](https://stackoverflow.com/questions/14536211/wp8-ie10-viewport-issue)）*

**寻求解决方案：**

如何使案例 1 不会使手机不稳定或使案例 2 垂直工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:50:24.050

成功案例是应用**方法 #1**，因此您可以改为标记为 css

```
 div.wp8ScrollFix {
    -ms-touch-action: none;
 } 
```

并提供`class="wp8ScrollFix"`给页面上的主 div，您不希望平移发生。

这是 IE10 浏览器的新功能，可以检查一下

```
@if user.agent ie10 {

} 
```

围绕css文件中的修复，该修复仅适用于ie10。

# javascript - 如何使用 d3.js 拖动行为拖动 svg 组？

> ID：15943292
> 
> 赞同：12
> 
> 时间：2013-04-11T07:45:42.930
> 
> 标签：javascript, dom, svg, d3.js

我正在使用[D3js 拖动](https://github.com/mbostock/d3/wiki/Drag-Behavior#wiki-on)。单个元素被拖得很好。但我想拖动一组元素。如何完成。这是我的[Js Fiddle 链接](http://jsfiddle.net/xnjGD/1/)上的内容：

```
 function onDragDrop(dragHandler, dropHandler) {
        var drag = d3.behavior.drag();

    drag.on("drag", dragHandler)
    .on("dragend", dropHandler);
    return drag;
    }

    var g = d3.select("body").select("svg").append("g")
    .data([{ x: 50, y: 50 }]);

    g.append("rect")
    .attr("width", 40)
    .attr("height", 40)
    .attr("stroke", "red")
    .attr("fill","transparent")
    .attr("x", function (d) { return d.x; })
    .attr("y", function (d) { return d.y; })
    .call(onDragDrop(dragmove, dropHandler));

    g.append("text")
    .text("Any Text")
    .attr("x", function (d) { return d.x; })
    .attr("y", function (d) { return d.y; })
    .call(onDragDrop(dragmove, dropHandler));

    function dropHandler(d) {
       // alert('dropped');
    }

    function dragmove(d) {
        d3.select(this)
      .attr("x", d.x = d3.event.x)
      .attr("y", d.y = d3.event.y);
    } 
```

我想同时拖动矩形和文本。这是我[尝试过](http://jsfiddle.net/xnjGD/2/)的，但没有运气。我认为缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-11T08:24:24.507

首先， <g> 元素不关心`x`和`y`属性（如：它们只是被忽略）。你可以`transform="translate(x,y)"`改用。

其次，您需要检查您在 dragmove 处理程序中获得的元素实际上是 <g> 元素，而不是它的子元素。这是因为 <g> 元素本身没有实际的命中区域。不过，他们的孩子会这样做，鼠标事件首先传递给孩子，然后冒泡传递给父母。您可以检查`evt.target`并`evt.currentTarget`看到这一点。`target`是最初被击中的元素，`currentTarget`是当前正在处理事件的事件目标（例如，如果事件冒泡，则为 <g> 元素）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-13T23:33:28.570

对于 d3 v4：

```
var drag_this = d3.drag().subject(this)
    .on('start',function (d) {
        if (d.x1){
            d.x1 =  d3.event.x - d.xt;
            d.y1 =  d3.event.y - d.yt;
        }else{
            d.x1 = d3.event.x;
            d.y1 = d3.event.y;
        }
    })
    .on('drag',function(d){
        d3.select(this)
        .attr("transform", "translate(" + (d3.event.x - d.x1)  + "," + (d3.event.y - d.y1) + ")");

        d.xt = d3.event.x - d.x1;
        d.yt = d3.event.y - d.y1;
    });

my_group.call(drag_this); 
```

这假设您将数据绑定到该组。

# android - 检测列表视图行的事件中的问题

> ID：15943302
> 
> 赞同：0
> 
> 时间：2013-04-11T07:46:10.790
> 
> 标签：android, listview, gesture, ontouchlistener

我已经尝试创建像 iphone 这样的列表视图，如果你轻扫让/向右，它会显示你删除按钮，如果你点击行，它会进入下一个活动，但我遇到了一些问题，我在检测列表视图行舔事件时遇到问题被点击或滑动

我的代码是

```
gestureListener = new View.OnTouchListener() {
        private int padding = 0;
        private int initialx = 0;
        private int currentx = 0;
        private  adapHolder viewHolder;
        public boolean onTouch(View v, MotionEvent event) {
            if ( event.getAction() == MotionEvent.ACTION_DOWN)
            {
                padding = 0;
                initialx = (int) event.getX();
                currentx = (int) event.getX();
                viewHolder = ((adapHolder) v.getTag());
            }
            if ( event.getAction() == MotionEvent.ACTION_MOVE)
            {
                currentx = (int) event.getX();
                padding = currentx - initialx;
                if(viewHolder != null)
                {
                    if(Math.abs(padding)>HORIZONTAL_MIN_DISTANCE){
                        viewHolder.btnDelete.setVisibility(View.VISIBLE);
                        viewHolder.imgArrow.setVisibility(View.GONE);
                        v.setPadding(padding, 0,0, 0);
                        //return true;
                    }
                }

            }

            if ( event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL)
            {
                padding = 0;
                initialx = 0;
                currentx = 0;
                v.setPadding(10, 0,0, 0);
            }

             return true;

        }}; 
```

和我的列表视图点击事件，

```
 listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View rowView, int positon,long id) {

                System.out.println("position :"+positon);

            }
        }); 
```

我在 getview 方法中为每一行设置了触摸监听器

```
 convertView.setOnTouchListener(this.listener); 
```

我的列表视图点击事件没有触发，我如何管理这两个事件

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:17:32.867

尝试计算运动时间（在运动开始和结束之间）。如果`timeOfMotion<delta`= `click`。如果`time>delta`= 另一个事件。仍然选择正确的增量。希望有帮助。

# asp.net - Dynamic directory authorisation asp.net

> ID：15943308
> 
> 赞同：0
> 
> 时间：2013-04-11T07:46:33.993
> 
> 标签：asp.net, dynamic, directory, authorization

My site is using forms authentication with both users and roles. I use small web.config files to deny/allow access to directories for specific users or roles.

Those file look similar to this:

```
<?xml version="1.0"?>
<configuration>
    <system.web>

      <authorization>
        <allow roles="Admins, Coaches, Athletes"/>
        <deny users="*, ?"/>
      </authorization>

    </system.web>
</configuration> 
```

The above works.

My site has two groups of users; athletes and coaches.The configuration of which user is a coach of which athlete is done in the database.

I now need to create the following: My site will generate athlete specific reports. Those reports should only be visible for that specify athlete and also to his/her coach. Each athlete will get its own directory on the server.

To accomplish this i could place a web.config file into each directory with the following content:

```
<?xml version="1.0"?>
<configuration>
    <system.web>

      <authorization>
        <allow users="AthleteName"/>
        <allow users="CoachName"/>
        <deny users="*, ?"/>
      </authorization>

    </system.web>
</configuration> 
```

This would probably work. My problem is: New users can be added to the site at any time through a membership page. The coach/athlete configuration is done in the database and can change at any time. It can also change through a back-end system which is not part of my site.

Instead of having a static web.config i was looking for a more dynamic way of access authorisation to directories. Does anybody have a good idea?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:59:16.950

You can use `WebConfigurationManager.OpenWebConfiguration()` to write in web.config at runtime.

Example:

```
Dim myConfiguration As Configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~")
myConfiguration.AppSettings.Settings.Item("myKey").Value = myNewVaule
myConfiguration.Save() 
```

IIS should detects when `web.config` changes but I am not sure if changes in `urlAuthorizationModule` configuration happens instantly.

Anyway, you could use ASP.NET membership. In [this tutorial](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx) you can see how use and configure it. ASP.NET membership roles integrates with urlAuthorizationModule so you can create a new user in BD with roles and keep `<allow roles="Admins, Coaches, Athletes"/>` for resource authorization.

# java - 如何在java中将HashMap的键视为可选

> ID：15943309
> 
> 赞同：4
> 
> 时间：2013-04-11T07:46:34.640
> 
> 标签：java, map, hashmap, linkedhashmap

使用 Map 作为函数参数时，仅填充 3 个键的值。但是，当在另一个函数中调用此函数时，用户会填充初始 2 个键的值，并且他不需要为第 3 个键分配任何值。但是，如果第 3 个键未分配任何值，则第 3 个键显示空值。

有什么办法可以避免这种情况。如果用户没有为第三个键分配任何值，则它必须为空而不是空值。

```
 public String setMapValues(Map<String,String> testMap) throws Exception
  {
    String str="";

    str= testMap.get("a");
    str+=testMap.get("b");
    str+=testMap.get("c");

    info(str);

    return str;
  }

    public void run() throws Exception 
    {
    LinkedHashMap<String,String> myMap = new LinkedHashMap<String,String>();
    myMap.put("a", "James");
    myMap.put("b", "Bond");
    this.setMapValues(myMap);
} 
```

函数调用将 JamesBondnull 显示为输出，而应仅通过忽略/跳过最后的 null 将 JamesBond 显示为输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:51:30.247

您可以使用类似的功能

```
static String nullAsEmpty(Object o) {
   return o == null ? "" : o.toString();
}

public String setMapValues(Map<String,String> testMap) {
    String str = nullAsEmpty(testMap.get("a")) +
                 nullAsEmpty(testMap.get("b")) +
                 nullAsEmpty(testMap.get("c"));

    info(str);

    return str;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:48:44.573

怎么样：

```
String temp = testMap.get("c");
str+= (temp == null : "" : temp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:55:33.547

您可以实现您的地图版本：

```
import java.util.HashMap;

class MyMap<K, V> extends HashMap<K, V> {  
    @Override
    public V get(Object key) {
        V val = super.get(key);
        if (val != null) {
            return val;
        } else {
            return "";
        }
    }
} 
```

然后只需使用 MyMap 而不是 Map

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T08:35:51.030

要完整：

如果您使用 Vadchens 答案 - 更好 - 您可以做两件事：

通过将通用值参数直接设置为 String 来扩展您的地图

```
 class MySecMap<K> extends LinkedHashMap<K, String>{
    @Override
    public String get(Object key) {
        String val = super.get(key);
        if (val != null) {
            return val;
        } else {
           return "";
        }
    }
} 
```

或者创建一个具有额外接口和默认值提供者的类：

```
interface IDefaultValueProvider<V>{
    V getDefaultValue();
}

class MyMap<K, V, D extends IDefaultValueProvider<V>> extends LinkedHashMap<K, V>{

    private IDefaultValueProvider<V> provider;

    public MyMap(IDefaultValueProvider<V> p){
        super();
        provider = p;
    }

    @Override
    public V get(Object key) {
        V val = super.get(key);
        if (val != null) {
            return val;
        } else {
            return this.provider.getDefaultValue();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T08:02:26.780

或者，如果您知道所有可能为空的键，则使用默认值初始化您的地图

```
Map getInstance(){

    Map<String,String> myMap = new LinkedHashMap<String,String>();

    myMap.put("a", "");
    myMap.put("b", "");
    myMap.put("b", "");

   return myMap;
} 
```

通过放置重复键，旧值被新值替换。

# c++ - VS Express 2010 KernelBase.dll _com_error DirectX11SDK

> ID：15943312
> 
> 赞同：0
> 
> 时间：2013-04-11T07:46:48.437
> 
> 标签：c++, visual-studio-2010, directx

昨天我尝试在重置系统后重新安装 VS2010 Express。我安装了 VS2010 Express Windows SDK 7.1 和 x64 编译器以及 DirectX SDK（2010 年 6 月）。

起初我得到一个错误，他找不到 Winmm.lib。我通过将 windows sdk 目录添加到库目录来解决此问题。

现在 Tutorial00 创建了一个窗口，但是每当我启动 Tutorial01 时，窗口就会出现并关闭，我收到以下错误消息：

`"First-chance exception at 0x000007fefd239e5d (KernelBase.dll) in Tutorial01.exe: Microsoft C++ exception: _com_error at memory location 0x001feca0.."`

我认为这是 DirectX SDK 的问题，因为 Tutorial00 没有使用任何 DirectX 功能。

任何建议如何解决这个问题？

# sql - 加入两个表之前的总和

> ID：15943313
> 
> 赞同：1
> 
> 时间：2013-04-11T07:46:49.547
> 
> 标签：sql, join

```
CREATE TABLE Daily
    ([DATE] datetime, [sales] int)
;

INSERT INTO Daily
    ([DATE], [sales])
VALUES
    ('2012-01-01 00:00:00', 1),
    ('2012-01-02 00:00:00', 2),
    ('2012-01-03 00:00:00', 3),
    ('2012-01-04 00:00:00', 4),
    ('2012-01-05 00:00:00', 5),
    ('2012-01-06 00:00:00', 6),
    ('2012-01-06 00:00:00', 5),
    ('2012-01-07 00:00:00', 7),
    ('2012-01-08 00:00:00', 8),
    ('2012-01-09 00:00:00', 9),
    ('2012-01-10 00:00:00', 10),
    ('2012-01-11 00:00:00', 11),
    ('2012-01-12 00:00:00', 12),
    ('2012-01-13 00:00:00', 13),
    ('2012-01-14 00:00:00', 14),
    ('2012-01-15 00:00:00', 15),
    ('2012-01-16 00:00:00', 16)
;

CREATE TABLE Weekly
    ([Weekly] datetime)
;

INSERT INTO Weekly
    ([Weekly])
VALUES
    ('2012-01-07 00:00:00'),
    ('2012-01-14 00:00:00'),
    ('2012-01-21 00:00:00')
; 
```

我想要最终的输出

```
Sales       
1/7/2012        33
1/14/2012       77 
```

对此的任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:31:04.247

我强烈建议不要将其存储在表中，如果您的任何每日数据发生更改，您的每周数据将需要更改，否则会出错，而是创建如下视图：

```
CREATE VIEW Weekly 
AS
    SELECT  WeekEnd = DATEADD(WEEK, DATEDIFF(WEEK, 0, [DATE]) + 1, -2),
            Sales = SUM(Sales)
    FROM    Daily
    GROUP BY DATEADD(WEEK, DATEDIFF(WEEK, 0, [DATE]) + 1, -2); 
```

您可以像创建表一样使用它，但这将始终与每日数据同步。如果您想更改您的一周开始/结束日期（即周一至周日），您可以更改函数`-2`中的`DATEADD`来改变它。

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/6c61a/1)**

*（根据`[]`周围的列名，我猜这是 SQL-Server。）*

# excel - 宏在一列中创建多个小计

> ID：15943321
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:47:13.923
> 
> 标签：excel, excel-formula, excel-2010, vba

谁能帮我用这个宏在一列中创建多个小计？任何帮助都会很棒。我在 Y 列中有一组数字。从第 16 行开始。数据每三行列出一次，直到该部分结束，然后有大约 30 行的间隙，然后又出现了。我想创建一个宏来计算每个部分中有多少个 >45 的数字。将总共​​ 2 行放在每个部分的最后一个数据点下方。在同一行的 X 列中，编号>45

```
Sub Sample()
    Dim result As Long, firstrow As Long, lastrow As Long
    Dim ws As Worksheet
    Dim rng As Range

    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Find Lastrow in Col Y
        lastrow = .Range("Y" & .Rows.Count).End(xlUp).Row
        '~~> Set First row
        firstrow = 16

        '~~> Set your range
        Set rng = .Range("Y" & firstrow & ":Y" & lastrow)

        '~~> Put relevant values
        .Range("x" & lastrow + 2).Value = "Total>45"
        .Range("y" & lastrow + 2).Value = _
        Application.WorksheetFunction.CountIf(rng, ">45")

    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:25:47.720

尝试以下程序

并像这样向后循环到 ROW=1：

```
Sub setTotals()
Dim iRow As Integer
Dim iLastRow As Integer
Dim sFormulaTargetAddress As String

iLastRow = ActiveSheet.Range("Y" & ActiveSheet.Rows.Count).End(xlUp).Row

iRow = iLastRow
Do Until iRow = 1
If Range("Y" & iRow).Value <> "" Then
    '
    ' define the section
    sFormulaTargetAddress = "Y" & Range("Y" & iRow).End(xlUp).Row & ":Y" & iRow & ""
    '
    ' Put in the COUNTIF > 45 of the current section...
    '
    Range("Y" & iRow + 2).Formula = "=COUNTIF(" & sFormulaTargetAddress & ","">45"")"
    '        '
    'Range("X" & iRow + 2).Formula = "=COUNTIF(" & sFormulaTargetAddress & ","">45"")"
    Range("X" & iRow + 2).value="Numbers > 45"
    '
    ' find the next section
    iRow = Range("Y" & iRow).End(xlUp).Row
    If Range("Y" & iRow) <> "" Then iRow = Range("Y" & iRow).End(xlUp).Row
Else
    iRow = Range("Y" & iRow).End(xlUp).Row
End If
Loop

End Sub 
```

![截图](https://i.stack.imgur.com/vyaol.png)

高温高压

菲利普

# css - 媒体查询：谷歌地图未在窗口调整大小时正确显示

> ID：15943326
> 
> 赞同：0
> 
> 时间：2013-04-11T07:47:23.940
> 
> 标签：css, google-maps, media-queries

我通过使用媒体查询在我的网站上使用自适应布局。

现在，当我通过某个媒体查询调整浏览器窗口的大小时，**谷歌地图显示错误（见图）**

我所做的：

CSS：

```
#googleMap2{display: none;}

@media screen and (min-width: 919px){
   #googleMap{display: none;}
   #googleMap2{display: block;}
} 
```

HTML：

```
<div id="googleMap">[google-map-v3 width="920" height="550" .......]</div>
<div id="googleMap2">[google-map-v3 width="768" height="320" .......]</div> 
```

![**在此处输入图片描述**](https://i.stack.imgur.com/gjtHT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:26:19.930

您需要让地图知道它已调整大小：

```
google.maps.event.trigger( map, 'resize' ); 
```

在页面或容器的调整大小事件上调用它。

使用这种方法，您可以使用单个地图并根据需要调整其大小，而不必在两个或多个固定大小的地图之间切换。

这个[小提琴](http://jsfiddle.net/geary/rDnmq/1/)有一个工作示例。我不知道页面布局的其余部分会是什么样子，但为了说明一种常见的布局，我在页面中放置了一个顶部栏和侧边栏，地图填充了右下角的剩余空间。尝试调整页面大小，您将看到它的实际效果。

# regex - 我需要避免全零的正则表达式

> ID：15943337
> 
> 赞同：-2
> 
> 时间：2013-04-11T07:48:11.383
> 
> 标签：regex

我需要一个避免所有零的正则表达式，包括hypen。下面是图案

000-000-0000

我想避免输入上述数字，除了任何形式的组合都可以。

例子

001-000-0000
000-008-0000
000-000-5000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:50:29.967

在这里，我为自己的查询找到了解决方案。

避免 000-000-0000 模式的正则表达式如下

"^(?![0]{3}[-]{1}[0]{3}[-]{1}[0]{4}).*$"

谢谢

# r - 去除数据表中的 NA 单向方差分析

> ID：15943341
> 
> 赞同：2
> 
> 时间：2013-04-11T07:48:30.020
> 
> 标签：r, na, anova, oneway

我目前正在为学校开展一个项目，我需要对每个州按地区划分的未投保驾驶者进行单向方差分析。我正在尝试从表中删除 NA，但遇到了麻烦。

```
 > motor
 MW   NE   SE    W
 1  0.11 0.09 0.25 0.16
 2  0.13 0.11 0.20 0.16
 3  0.12 0.04 0.13 0.22
 4  0.10 0.07 0.10 0.32
 5  0.09 0.09 0.08 0.10
 6  0.13 0.15 0.16 0.08
 7  0.12 0.07 0.25 0.09
 8  0.13 0.09 0.06 0.15
 9  0.07 0.11 0.28 0.30
 10 0.07 0.09 0.18 0.12
 11 0.13   NA 0.12 0.09
 12 0.17   NA 0.21 0.15
 13 0.06   NA   NA 0.07
 14 0.18   NA   NA   NA
 15 0.08   NA   NA   NA
 16 0.11   NA   NA   NA

 > aov(motor)
 Error in terms.default(formula, "Error") : 
   no terms component nor attribute 
```

我尝试过使用 na.omit、complete.cases 和 na.rm，但我的数据的一部分被删除了，或者我收到了相同的错误消息。我也试过

```
summary(lm(motor)) 
```

这给了我 0.77 的 P 值，这与我在 excel 中运行数据时收到的 P 值不同 (P = 0.007859928)

我知道我只是错过了一些小东西，但是在过去的两个小时里试图寻找它却无济于事。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-12T12:12:27.030

Hye，你的公式不好，你需要有一个列作为因子（例如，驾驶者）并进行绘图。您的数据中缺少此列。假设您包括此列“驾驶者”

```
motorist<-c("A","B","C","B","B","B","B","A","A","A","A","C","C","A","B","C")
motor<-cbind(motorist,motor)
aov(w~motorist,motor) 
```

将工作

# ipython - Enthought Canopy ipython 配置：错误的解释器没有这样的文件或目录

> ID：15943345
> 
> 赞同：1
> 
> 时间：2013-04-11T07:48:39.407
> 
> 标签：ipython, enthought

我正在尝试使用以下命令从 Mac OS 10.8.3 中的终端启动 Enthought Canopy 的 ipython：

```
/Applications/Canopy.app/appdata/canopy-1.0.0.1160.macosx-x86_64/Canopy.app/Contents/bin/ipython 
```

但我收到以下错误：

```
/Applications/Canopy.app/appdata/canopy-1.0.0.1160.macosx-x86_64/Canopy.app/Contents/bin/ipython: /Library/Frameworks/Python.framework/Versions/7.1/Resources/Python.app/Content: bad interpreter: No such file or directory 
```

这个（7.1）框架以前安装过，但很久以前就被删除了，所以我不太清楚 Canopy 的 IPython 是从哪里获得这个链接的。我也检查了我的 ./ipython/profile_default 目录，但这没有帮助。

知道如何从终端启动 ipython 吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:58:21.037

Canopy 使用虚拟环境来设置与应用程序本身运行的环境隔离的用户环境。这可以防止用户对环境所做的任何更改导致应用程序本身崩溃。

要运行 IPython 终端，可以访问您可能通过包管理器安装的任何包，您应该从用户环境运行 IPython——`~/Library/Enthought/Canopy_64bit/User/bin/ipython`

# spring - 在 JUnit 测试中使用具有依赖注入的 Mock 类

> ID：15943346
> 
> 赞同：0
> 
> 时间：2013-04-11T07:48:42.013
> 
> 标签：spring, junit, dependency-injection, mockito

我有一个基本接口，另一个类正在实现。

```
package info;

import org.springframework.stereotype.Service;

public interface Student 
{
    public String getStudentID();
} 
```

`

```
package info;

import org.springframework.stereotype.Component;
import org.springframework.stereotype.Service;
import org.springframework.beans.factory.annotation.Autowired;

@Service
public class StudentImpl implements Student
{
    @Override
    public String getStudentID() 
    {
        return "Unimplemented";
    }
} 
```

然后我有一个服务可以将该类注入

```
package info;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Service;

@Service
public class InfoService {

    @Autowired
    Student student;

    public String runProg()
    {
            return student.getStudentID();
    }
} 
```

我想知道的是，如何设置 JUnit 测试，以便 Student 接口的 Mock 类使用存根方法而不是 StudentImpl 中的方法介入。注入确实有效，但我想使用 amock 类来模拟结果，而不是为了测试。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T07:58:04.757

在我看来，单元测试中的自动装配表明它是一个集成测试而不是单元测试，所以我更喜欢像你描述的那样做我自己的“装配”。它可能需要您对代码进行一些重构，但这应该不是问题。在您的情况下，我会在`InfoService`该 get 的`Student`实现中添加一个构造函数。如果您愿意，您也可以创建此构造函数`@Autowired`，并`@Autowired`从`student`字段中删除 。然后 Spring 仍然可以自动装配它，而且它也更具可测试性。

```
@Service
public class InfoService {
    Student student;

    @Autowired
    public InfoService(Student student) {
        this.student = student;
    }

} 
```

然后在您的测试中在您的服务之间传递模拟将是微不足道的：

```
@Test
public void myTest() {
    Student mockStudent = mock(Student.class);
    InfoService service = new InfoService(mockStudent);
} 
```

# iphone - 如何沿 y 轴 iphone 向下移动按钮操作

> ID：15943347
> 
> 赞同：0
> 
> 时间：2013-04-11T07:48:42.377
> 
> 标签：iphone, ios, uibutton, uitextfield

我有一个带有出口 btnAdd 的按钮操作，当它按下它时添加文本字段，我想将按钮操作也移动到文本字段下方，并且同样希望在按下按钮 BtnRemove 时恢复，

```
 - (IBAction)btnAddTxtField:(id)sender {

    textField = [[UITextField alloc] initWithFrame:CGRectMake(76, ([txtFieldArray count] * 30), 191, 25)];
    [textField setBorderStyle:UITextBorderStyleLine];
    textField.font = [UIFont systemFontOfSize:20];
    textField.placeholder = @"Enter text";
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    textField.delegate = self;
    [myScrollview addSubview:textField];
    [txtFieldArray addObject:textField];

    CGRect frame = bottomView.frame;
    frame.origin.y += textField.frame.size.height + 5;

    btnAdd = [[UIButton alloc] initWithFrame:CGRectMake(210, ([txtFieldArray count] *30), 20, 20)];
   frame.origin.y += btnAdd.frame.size.height +5;
    bottomView.frame = frame;
    textField.hidden = NO;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:19:52.660

修改`frame`变量后，将其设置为动画块中的按钮：

```
 [UIView animateWithDuration:0.2 animations:^{
     [btnAdd setFrame:frame];
 } 
 completion:^(BOOL finished){
      //Do something on completion if you want
 }]; 
```

显然，您可以将动画持续时间 (0.2) 更改为您想要的任何内容。要反转它，请执行相同操作，设置 CGRect 的`frame`origin.y，并将其设置为上面动画块中的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:54:11.493

```
[UIView animateWithDuration: delay: options: animations: completion:]; 
```

会是你的选择。[您可以在此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)查看文档。

# php - WPCF7-表单填写

> ID：15943353
> 
> 赞同：0
> 
> 时间：2013-04-11T07:48:55.650
> 
> 标签：php, javascript, html, webforms

有没有办法从http地址填写wpcf7表单......让我们说javascript。我有一个带有 wpcf7 控件的 HTML 表单：

```
<span class="wpcf7-form-control-wrap text-700">
<input class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" type="text" aria-required="true" size="30" value="" name="NameText">
</span> 
```

例如网页地址是 www.example.com/examplefrom 有没有办法通过运行类似的东西来自动填充文本字段中的文本：www.example.com/examplefrom;javascript::getElementByID....不是网络开发人员，但我需要解决这个问题...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:58:57.967

我看到你的问题是用 php 标记的。所以我会给你一个使用 php.ini 的选项。首先，您需要检查 URL 中是否有 POST 数据发送

```
<?php
    if($_POST) {
        // Here you should take all your data and put it into a variable or an array
        $NameText = $_POST['NameText'];
        // The URL would look something like this:
        // www.example.com/exampleform?NameText=SomeText
    }
?> 
```

现在在 html 中，您可以检查变量是否为空，如果可用则填写文本。

```
<span class="wpcf7-form-control-wrap text-700">
    <input class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" type="text" aria-required="true" size="30" value="<?php echo (isset($NameText))?$NameText:''; ?>" name="NameText">
</span> 
```

编辑：`<?php echo (isset($NameText))?$NameText:''; ?>`在表单字段的每个`value`属性中使用您要填写数据表单的 url。

请注意：这是一个简单的示例，不检查保存后的值。如果需要，您应该检查数据。但是我认为单击表单的提交按钮后会有一些安全性。所以可能不需要..

希望对你有所帮助。

# php - 请求 失败是因为 是一个过程对象。SQL 错误 37000

> ID：15943360
> 
> 赞同：2
> 
> 时间：2013-04-11T07:49:23.533
> 
> 标签：php, sql, sql-server, odbc, procedure

我正在尝试将 SDK 用于 123insight MRP 系统。在 SDK 中，有一个特定的例程称为`SDK.BOMInsertSDK`. 每当我尝试通过 ODBC 驱动程序从 PHP 执行 SQL 查询时，都会失败并出现错误。

```
Warning: odbc_exec(): SQL error: [Microsoft][ODBC SQL Server Driver][SQL Server]
The request for procedure 'BOMInsertSDK' failed because 'BOMInsertSDK' is a 
procedure object., SQL state 37000 
```

这个错误让我感到困惑：我可以在 Microsoft SQL Server Management Express 中输入查询，查询将成功执行。此外，其他一些例程喜欢工作`ProductionSDK. SubOperationTestResultBooking`，但*其他**一些*`SDK.PartInsertSDK`例程则不工作。我能执行什么和不能执行什么似乎几乎是随机的。什么可能导致这种情况？

 *以下是相关 SDK 文档的截图：

![在此处输入图像描述](https://i.stack.imgur.com/3TTi5.png)

这是我的查询，以防万一：

```
EXECUTE [SDK].[BOMInsertSDK]    @strParentPartNumber = "20-01-702", 
                                @nSequenceNumber = 1234, 
                                @strChildPartNumber = "01-07-001-R", 
                                @decScrapPercentage = 0, 
                                @decQuantity = 1, @blnIsPrime = 1,
                                @strMethodType = "Manufactured", 
                                @strVersionNumber = "0001", 
                                @blnInheritSerial = 0, 
                                @strComments = "no comment" 
```

任何建议表示赞赏。*

# c# - Visual Studio 2008 保存或备份异常中断

> ID：15943365
> 
> 赞同：0
> 
> 时间：2013-04-11T07:49:53.803
> 
> 标签：c#, .net, visual-studio-2008

嗨，我已经打开了未处理的异常，并关闭了我希望作为代码的一部分发生的异常。

但是每隔一段时间（通常在重新启动时，Visual Studio 会将我所有的 Debug->Exceptions 重置为所有未选中的

我想备份这些值，或者手动复制文件，这样我就可以把它放回去，而不必重新选择我想要的那些。

有谁知道如何做到这一点？

我已经尝试在堆栈溢出上找到答案，但找不到任何答案，我已经搜索谷歌并且也出现空，我真的被卡住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T07:59:09.550

我解决这个问题的方法是升级到 VS2010 或 VS2012，因为导出设置保存了例外列表，而 vs2008 似乎没有这样做。

# jsf - 更改欢迎文件位置会导致部署失败

> ID：15943368
> 
> 赞同：0
> 
> 时间：2013-04-11T07:49:58.310
> 
> 标签：jsf, servlets, web.xml, welcome-file

我得到以下错误。

> FAIL - 无法启动上下文路径 /sampleJSF 中的应用程序

我想更改我的欢迎文件位置。我在 有一个`index.jsp`页面`WEB-INF/pages/index.jsp`。如何修改 servlet 映射和欢迎文件列表来实现这一点？

这是我的`servlet-mapping`和`welcome-file-list`来自`web.xml`。

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>WEB-INF/*</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>WEB-INF/pages/index.jsp</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:04:16.080

您似乎误解了欢迎文件设置和`/WEB-INF`文件夹的目的。

当请求文件夹而不是 URL 中的文件时，欢迎文件必须代表服务器应从当前文件夹提供的文件的名称。例如`/`, `/foo/`,`/bar/`等。因此，当您将其设置为时`index.jsp`，它将在被请求时提供服务，以及在被请求时提供服务，等等。`/index.jsp``/``/foo/index.jsp``/foo/`

该`/WEB-INF`文件夹用于存放不应独立公开访问的文件。例如，包含文件、模板文件、错误文件、标记文件、配置文件等。映射 Faces Servlet完全没有意义，因为当最终用户有意在 URL 中输入文件夹时`/WEB-INF`，servlet 容器已经限制了对文件夹的直接（公共）访问。`/WEB-INF``/WEB-INF`

撤消您对示例 Web 应用程序所做的所有更改。他们根本没有意义。无论您想到什么功能要求，您错误地认为这是正确的解决方案，都必须以不同的方式解决。

* * *

**与具体问题**无关，您似乎刚刚开始使用 JSF，但您知道自 2009 年的 JSF 2.0 起 JSP 已被弃用？**您是否绝对肯定您正在学习基于正确和最新资源的 JSF？我强烈建议您这样做，否则您最终会遇到混乱头痛和代码灾难。从[我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)开始。**

# ruby-on-rails - 当资源名称与模型/控制器名称不同时，Cancan 的 load_and_authorize_resource

> ID：15943369
> 
> 赞同：3
> 
> 时间：2013-04-11T07:49:58.527
> 
> 标签：ruby-on-rails, resources, cancan

在我的应用程序中，我有工作表控制器，型号名称是工作表，但我的路线如下

```
routes.rb
 namespace :magazine do
  resources :pages, :controller => "sheets" do
    resources :articles do
     resources :comments 
```

这样 url 将是杂志/页面/1/文章...

在我的文章控制器中，如何为工作表调用 load_and_authorize_resource 以便我可以访问相关工作表的文章。我试过了

```
load_and_authorize_resource :sheet, :class => 'Sheet', :parent => false
load_and_authorize_resource :through => :sheet 
```

无法访问@sheet.articles......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T07:52:50.647

要么你有：

```
 load_and_authorize_resource :page, :class => 'Sheet', :parent => false 
```

你访问你的数据`@pages`

或者您替换为：

```
 load_and_authorize_resource :sheet, :class => 'Sheet', :parent => false 
```

你访问你的数据`@sheets`

* * *

在 ArticlesController 中，同时获取`sheet`和`articles`：

```
load_and_authorize_resource :sheet, :class => 'Sheet'
load_and_authorize_resource :article, :through => :sheet 
```

# windows - windows批处理命令将目录中所有想要的子文件夹递归移动到新文件夹

> ID：15943370
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:50:00.567
> 
> 标签：windows, command-line, batch-processing

我有一个本地文件夹-A，它有许多子文件夹（svn-repository），这些子文件夹都有一个名为 .svn 的子文件夹。现在我想将所有 .svn 文件夹移动到文件夹-B，但是有一天我希望 .svn 文件夹回到原来的位置，这样我就可以 SVN 更新它们，所以“.svn”文件夹的父文件夹信息必须退出文件夹-B

**像这样开始：**

```
Folder-A
 |_DR1
   |_.svn
   |_s1
      |_.svn
      |_s1_s1folder
        |_.svn
        |_file1
      |_file1  
   |_s2
      |_.svn
      |_file1
      |_file2
 |_DR2 ... etc 
```

**所需的 MOVE 结果：**

```
Folder-A only have actual sub-folders and data but without .svn folder

Folder-B
 |_DR1
   |_.svn
   |_s1
      |_s1_s1folder
        |_.svn
      |_.svn
   |_s2
      |_.svn
 |_DR2 ... etc 
```

**所需的恢复结果：**

文件夹-A & 文件夹-B 回到我们开始的地方。

请帮助编写命令行来完成 MOVE 和 RESTORE 任务，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:00:53.297

```
@ECHO OFF
SETLOCAL
:: establish source and destination directorynames; ensure dest exists
SET source=c:\folder-a
SET dest=u:\folder-b
MD %dest% 2>NUL
:: delete a tempfile if it exists
DEL "%temp%\svntmp2.tmp" 2>nul
:: create a dummy directory
MD c:\dummy
:: go to root of tree containing SVN directories
PUSHD "%source%" 
XCOPY /L /s . c:\dummy |find /i "\svn\" >"%temp%\svntmp1.tmp"
POPD
:: goto destination directory
PUSHD "%dest%"
FOR /f "delims=" %%i IN ('type "%temp%\svntmp1.tmp"') DO CALL :moveit "%%i"
FOR /f "delims=" %%i IN (
 'TYPE "%temp%\svntmp2.tmp"^|sort /r'
 ) DO RD "%%i" /S /Q
POPD

:: delete tempfiles 
del "%temp%\svntmp1.tmp"
del "%temp%\svntmp2.tmp"

:: delete the dummy directory
RD /s /q c:\dummy

GOTO :eof

:moveit
:: get filename, remove quotes, then remove leading '.'
SET sourcefile=%~1
SET sourcefile=%sourcefile:~1%
FOR %%i IN ("%sourcefile%") DO (
MD ".%%~pi" 2>nul
MOVE "%source%%%~i" ".%%~pnxi"
>>"%temp%\svntmp2.tmp" ECHO %source%%%~pi
)

GOTO :eof 
```

*   设置源目录和目标目录。
*   创建一个虚拟的空目录
*   转到您的源并生成要移动的文件列表， `XCOPY/L`并过滤包含的行`\svn\`
*   转到您的目标目录
*   移动每个文件
    *   删除前导 '.' 从`XCOPY`输出
    *   创建目标子目录；忽略“它已经存在”错误
    *   移动文件
    *   在第二个临时文件中记录目录名称
*   对第二个临时文件进行反向排序，将最深的子目录放在首位
*   删除目录，忽略“它不存在”错误
*   删除临时文件和虚拟目录。

**请**注意，实际执行移动/目录创建/删除的命令只是`ECHO`编辑。这样您就可以验证例程是否按照您的要求执行。您需要验证它是否正确，然后从语句中删除 ECHO 关键字以实际激活移动。为了安全起见，首先对一个小的虚拟区域进行测试。

至于恢复 - 它相对容易。

```
xcopy /s/e/v "...folder-b\dr1\svn\" "\folder-a\dr1\svn\" 
```

应该做你想做的，将恢复的项目文件保存在文件夹-b 中（如果你喜欢删除 - 这是你的系统），你可以逐个项目地恢复。

（我一直在使用`SVN`，因为现在这个点对我来说有点小了......）

# c# - 如何在调试器中查看异常详细信息而不将变量分配给异常？

> ID：15943373
> 
> 赞同：57
> 
> 时间：2013-04-11T07:50:11.470
> 
> 标签：c#, visual-studio, exception

我想在 Visual Studio 调试器中查看异常详细信息，而无需将变量分配给异常。目前我必须写这样的东西：

```
try 
{
    //some code
}
catch (SecurityException ex)
{
   //some code or ever no any code 
} 
```

Visual Studio 抛出一个错误，表明从未使用过 ex 变量，但我需要这个变量来在调试时查看异常详细信息。

更新：我知道如何抑制 VS 错误“从不使用变量”，问题是在没有这个变量的情况下在 watch 中看到异常。

* * *

@VladimirFrolov 的 $exception 变量或@MarcGravell 的异常助手是一个答案。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-11T07:52:11.753

您可以在 Locals 列表中查看您的例外或`$exception`在 Watch 列表中使用：

```
try
{
    // some code
}
catch (SecurityException)
{ // place breakpoint at this line
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T08:04:59.947

您无需执行任何操作：只需在块内`catch`（或在 a 上`catch`并单步执行一次）放置一个断点，您应该会看到查看异常帮助程序的邀请。这适用于裸块`catch`或特定类型的`catch(SecurityException)`块：

![在此处输入图像描述](https://i.stack.imgur.com/xZwQU.png)

这给了你一切：

![在此处输入图像描述](https://i.stack.imgur.com/I234u.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-06-12T22:51:33.707

在您遇到异常的任何时候，您都可以检查监视窗口并添加变量：`$exception`。这将使您可以使用所有异常元数据。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-11T07:53:11.897

您可以使用 Visual Studio 中的功能。

调试 => 异常 => 检查“公共语言运行时异常”

而已。希望能帮助到你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-11T07:55:41.983

利用

```
catch (SecurityException /*without variable*/)
{/*break Point*/
   //some code or ever no any code 
} 
```

或者

```
catch /*without parameter*/
{/*break Point*/
   //some code or ever no any code 
} 
```

但我认为这就是你的意思

```
catch (SecurityException ex)
    {
       MessageBox.Show(ex.ToString()); //for Winforms
       Console.WriteLine(ex); //for console
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-11T07:52:58.323

写吧

```
 catch
{//set breakpoint here
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T07:53:25.650

为避免在 catch 语句中出现警告：“变量 'ex' 已声明但从未使用”，请执行以下操作：

```
 try
 {
 }
 catch (Exception)
 {
   // set break point 
 } 
```

或使用 [System.Diagnostics.Debug.WriteLine()](http://msdn.microsoft.com/en-us/library/9z9k5ydz.aspx)或启用跟踪或调试以使用[跟踪侦听](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx)器。

# javascript - 将ajax响应解码为下拉后出现的空下拉字段

> ID：15943374
> 
> 赞同：1
> 
> 时间：2013-04-11T07:50:19.070
> 
> 标签：javascript, json, forms, drop-down-menu

在使用 ajax 调用 Web 服务后，我得到了一个这样的 json，我已经解码了 json，以将每个值作为员工和临时的一个接一个地提醒，现在我想将这些值带入一个下拉字段带有 id 超的表单，我得到 2 个空字段用于下拉 + 值；我已经解码了。我在项目中的 json 响应是

```
["Employee","Temporary"] 
```

我的 ajax 调用和解码结果并提醒返回 json 中的每个元素的 codd

```
function ajax(){
 var loc=document.getElementById('category_id1').value;
alert(loc);
var req;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
req=new XMLHttpRequest();
}
 else
 {// code for IE6, IE5
 req=new ActiveXObject("Microsoft.XMLHTTP"); 
}
req.open("POST", "ajax.php?&loc="+loc+"", true);
req.send();
var html
req.onreadystatechange=function(){
   if(req.readyState==4&&req.status==200){
       //$(".error").hide();
       result=req.responseText
       //alert(result);
       var items = JSON.parse(result);
       //alert(items.length)
       for(var i=0; i<items.length; i++)
        {
            var item = items[i];
            //alert(item);
            html=html+"<option value="+item+">"+item+"<option>"
        }

       }
       document.getElementById("Ultra").innerHTML=html
   }
 }
<form>
<label for="subcategory">Sub Category</label>
<select style="width:305px" name="subcategory" id="Ultra" onchange="run()"> 
<option value="">Select</option>
</select>
</form> 
```

在同一页面上之后的表单字段是我在这里没有得到空字段我做错了什么谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:31:43.387

首先，您在模板（未闭合标签）中犯了错误，我建议使用引号来定义选择值。你正在使用

```
html=html+"<option value="+item+">"+item+"<option>" 
```

代替

```
html=html+"<option value='"+item+"'>"+item+"</option>" 
```

我创建了简单的 jsfiddle 来演示它是如何工作的：http: [//jsfiddle.net/KPGhY/](http://jsfiddle.net/KPGhY/)

还为那些感兴趣的人添加代码：

HTML是一样的，JS是：

```
var items = [ "Employee", "Temporary" ];
var html = '<option value="">Select</option>';
for ( var i = 0; i < items.length; i++ ) {
    html += "<option value='" + items[ i ] + "'>" + items[ i ] + "</option>"
}

document.getElementById("Ultra").innerHTML = html; 
```

# objective-c - 按第二个单词的字母顺序对 NSArray 进行排序

> ID：15943375
> 
> 赞同：0
> 
> 时间：2013-04-11T07:50:26.543
> 
> 标签：objective-c, xcode, arrays, sorting

我的项目有一个小问题。我必须按字母顺序显示品牌列表。我从按字母顺序返回的服务中获取列表。

问题是，它没有返回按第二个单词按字母顺序排序的字符串列表。按第二个单词排序应该以编程方式完成。

**例如：**

Beacon、 **Beat Kangz、Beat Goes On、** Behringer

我必须按第一个和第二个单词的字母顺序对上述列表进行排序。

**注意：**上面提到的列表已经按第一个单词排序。

请帮我摆脱它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:06:53.280

按升序或字母排序数组

```
NSArray *arr = [NSArray arrayWithObjects:@"Behringer", @"Beat Goes On", @"Beacon", @"Beat Kangz", @"Apple", @"001" , nil];
NSLog(@"Before %@",arr);
NSArray *sortedArray = [arr sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];    
NSLog(@"After %@",sortedArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:54:38.460

以下对比较所有字符串/字符的数组进行排序....

```
NSArray *sortedArray=[array sortedArrayUsingSelector(compare:)]; 
```

# java - 如何将字符串 args[0] 转换为 char

> ID：15943382
> 
> 赞同：0
> 
> 时间：2013-04-11T07:51:14.400
> 
> 标签：java, string, char

例如，如果在命令行中将字符串作为参数输入（不使用扫描仪），您如何从字符串转换为字符。例如，您将如何转换`"abcd"`为 char？

```
String input = args[0]
String [] part = input.split(""); 

//splits string into 2 parts (action and characters to encode)
String action = part[0];
// action is what is done to letter i.e. decrypt or encrypt
String plainText = part[1];
char [] letters = plainText.toCharArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:57:02.567

如果要将`String`超过 2 个字符的 a转换为`char`数组：

```
String hello = "Hello";
char[] char_array = hello.toCharArray(); 
```

否则，如果您只需要一个特定的字符，请使用`hello.charAt(0)`.

请注意，您只能在数据类型中存储一个 16 位 Unicode 字符`char`。这就是为什么您需要一个超过 2 个字符的数组的原因。

# java - 在标准hibernate java中查找属性名称的引用

> ID：15943386
> 
> 赞同：0
> 
> 时间：2013-04-11T07:51:50.643
> 
> 标签：java, eclipse, hibernate

我正在使用带有 Java 6 和 Eclipse Juno 的 Hibernate 3.0。我有一个名为 Teacher.java 的 POJO，描述如下：

**教师.java**

```
public class Teacher {
    private String userName;

    public String getUserName() {
    return userName;
    }

    public void setUserName(String userName) {
    this.userName = userName;
    }
} 
```

现在，我在某个类中编写了一个对用户名有限制的条件，以获取用户名 = 'test' 的教师类的对象。可能还有其他使用用户名的标准。

我的问题是：有什么方法可以让我在我的应用程序中找到所有这些标准吗？

# sql-server-2008-r2 - SQL Server 2008 R2 Management Studio：在智能感知中配置自动完成

> ID：15943388
> 
> 赞同：1
> 
> 时间：2013-04-11T07:52:00.010
> 
> 标签：sql-server-2008-r2, ssms

我有一个数据库，其中一些表以 SQL 命令开头，例如：

*   `COUNTries`

*   `TOPics`

等等。我想以某种方式配置智能感知，因此当我写入`cou...`国家/地区时它不会自动完成，而是例如计数。

我该如何配置？

# c# - 将 Dapper 与 Oracle 用户定义类型一起使用

> ID：15943389
> 
> 赞同：5
> 
> 时间：2013-04-11T07:52:00.003
> 
> 标签：c#, .net, oracle, orm, dapper

有没有办法将 Dapper 与存储过程返回的 Oracle 用户定义类型一起使用？Dapper 似乎适用于存储过程（请参阅[将 Dapper 与返回游标的 Oracle 存储过程一起使用](https://stackoverflow.com/questions/7390015/)）。

```
var p = new OracleDynamicParameters();
p.Add("param_list", null, OracleDbType.Object, ParameterDirection.Output);
p.Add("param_reco", null, OracleDbType.Object, ParameterDirection.Output); 
```

在我的示例中，我添加了一个 UDT 集合对象作为输出参数 ( `param_list`)。我正在使用[Dapper – Micro ORM for Oracle and Microsoft .NET](http://blog.vijay.name/index.php/2012/07/11/dapper-micro-orm-for-oracle-and-microsoft-net/)`OracleDynamicParameters`中发布的自定义。

我阅读与 ORM 相关的内容越多，就越将 Oracle UDT 对象视为障碍。在这种情况下，纯 ADO.NET 和生成的 C# 实体类似乎是唯一的方法。也许[automapper.org](http://automapper.org/)可能有助于将域对象映射到 UDT 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-21T11:16:32.450

研究使用 OracleCustomTypeMapping 属性和 OracleObjectMapping 属性。不记得我从哪里得到这个想法，但是......

```
public interface INullableOracleCustomType: INullable,  IOracleCustomType
    {
    }

[OracleCustomTypeMapping("<YOUR_SCHEMA_NAME>.<UDT_OBJECT_NAME>")]
    public class ParameterObject : INullableOracleCustomType
    {
        private bool objectIsNull;

        #region constructor

        public ParameterObject()
        { }

        public ParameterObject(string parameterName, string parameterValue)
        {
            this.ParameterName = parameterName;
            this.ParameterValue = parameterValue;
        }

        #endregion

        #region properties
        [OracleObjectMappingAttribute("PARAMETERNAME")]
        public string ParameterName { get; set; }

        [OracleObjectMappingAttribute("PARAMETERVALUE")]
        public string ParameterValue { get; set; }

        public static ParameterObject Null
        {
            get
            {
                ParameterObject parameterObject = new ParameterObject();
                parameterObject.objectIsNull = true;
                return parameterObject;
            }
        }

        #endregion

        #region INullable Members

        public bool IsNull
        {
            get { return objectIsNull; }
        }

        #endregion

        #region IOracleCustomType
        public void FromCustomObject(Oracle.DataAccess.Client.OracleConnection con, IntPtr pUdt)
        {
            // Convert from the Custom Type to Oracle Object
            if (!string.IsNullOrEmpty(ParameterName))
            {
                OracleUdt.SetValue(con, pUdt, "PARAMETERNAME", ParameterName);
            }
            if (!string.IsNullOrEmpty(ParameterValue))
            {
                OracleUdt.SetValue(con, pUdt, "PARAMETERVALUE", ParameterValue);
            }
        }

        public void ToCustomObject(Oracle.DataAccess.Client.OracleConnection con, IntPtr pUdt)
        {
            ParameterName = (string)OracleUdt.GetValue(con, pUdt, "PARAMETERNAME");
            ParameterValue = (string)OracleUdt.GetValue(con, pUdt, "PARAMETERVALUE");
        }

        #endregion
    } 
```

示例用法...

```
public static OracleParameter CreateCustomTypeArrayInputParameter<T>(string name, string oracleUDTName, T value)
            where T : INullableOracleCustomType
        {
            OracleParameter parameter = new OracleParameter();
            parameter.ParameterName = name;
            parameter.OracleDbType = OracleDbType.Array;
            parameter.Direction = ParameterDirection.Input;
            parameter.UdtTypeName = oracleUDTName;
            parameter.Value = value;
            return parameter;
        } 
```

Oracle 似乎对 ALLCAPS 中的架构/类型/对象名称很挑剔

# regex - 如何使用 find 和 awk 以及正则表达式将大写更改为小写

> ID：15943391
> 
> 赞同：0
> 
> 时间：2013-04-11T07:52:03.277
> 
> 标签：regex, awk, find

我需要更改给定文件夹中的所有文件名。如果有大写，则需要将其更改为 _lowercase，但第一个始终为小写。例子：
`/folder/FileNameOneTwo.txt -> /folder/file_name_one_two.txt`

无需保存文件名，只需打印到控制台即可。编码：

```
find $1 -type f -print | awk '
BEGIN {
FS = "/"; } 
{ 
split($NF,nazwa,".");
}
{
if(nazwa[1] ~ /([[:upper:]])[[:alnum:]]*/ ){

gsub(/[A-Z]/,"_&");
sub(/_/,"");
print tolower($nazwa[1])
}
}
' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:32:31.823

```
$ ls -1
FileNameOneTwo.txt

$ find -maxdepth 1 -type f -exec basename {} \; | sed 's/[A-Z]/_&/g2;s/.*/\L&/'
file_name_one_two.txt 
```

与`awk`：

```
awk '{gsub(/[[:upper:]]/,"_&");sub(/^_/,"");print tolower($0)}' 
```

# html - HTML noob 中的 iframe

> ID：15943393
> 
> 赞同：0
> 
> 时间：2013-04-11T07:52:08.290
> 
> 标签：html, iframe

到目前为止，我的（粉丝）网站有此代码。我想要我指定的裁剪（顶部 -360px 和 -50px 应用于每个 iframe，但无论我做什么，其他三个 iframe 都没有裁剪）。有没有办法让裁剪适用于所有 iframe？我完全迷路了。:(

```
<div style="overflow: hidden; 
margin-top: -360px; 
margin-left: -50px;">
<iframe src="http://dragcave.net/view/XD" frameborder="0" width="750" height="450" " scrolling="no"></iframe>
<iframe src="http://dragcave.net/locations/XD" frameborder="0" width="750" height="450" " scrolling="no"></iframe>
<iframe src="http://dragcave.net/locations/XD" frameborder="0" width="750" height="450" " scrolling="no"></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:05:46.890

iFrame 只显示整个页面，实际上没有任何方法可以让您只在 iframe 中显示页面的一部分。

你需要做的是一些 jquery 技巧，你可以在这里找到：[iframe to Only Show a certain Part of the Page](https://stackoverflow.com/questions/3272071/iframe-to-only-show-a-certain-part-of-the-page)

# php - php在linux上太慢了？

> ID：15943395
> 
> 赞同：-3
> 
> 时间：2013-04-11T07:52:13.627
> 
> 标签：php, linux, windows

我在 linux 服务器上的 php 太慢了，但在我的 127.0.0.1（windows 本地主机）上更快。有什么提高Linux服务器速度的想法吗？我正在我的 php 代码中进行文件读取、文件写入过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:53:11.337

`127.0.0.1`使用起来并不太慢`Localhost`

这是因为当我们使用主机名（如 localhost ）时，mysql 客户端首先使用 ipv6 主机名尝试此操作，如果失败则使用 ipv4 回退

# c# - 使用 Framework 2.0 和 Framework 4.5 进行 XML 序列化

> ID：15943403
> 
> 赞同：1
> 
> 时间：2013-04-11T07:52:31.000
> 
> 标签：c#, xml, xml-serialization

最近我将我的项目从框架 2.0 转移到了框架 4.5。我有一个 xml 文件，它将被反序列化并执行一些操作。xml 反序列化在框架 2.0 中可以正常工作。但是相同的 xml 文件没有更改任何代码，它没有反序列化它的任何 xml 文件给我的错误是“根级别的数据无效。第 31 行，第 27 位。”。我为此浪费了 30 分钟。这是我的 XML 文件

```
<SpreadResultData>
<SpreadToList>
<Spread>
<GroupName>A</GroupName>
<CellPos>B</CellPos>
<CellValue>0~</CellValue>
<Color>Green</Color>
<CellLinePos>3</CellLinePos>
<IsSetColor>true</IsSetColor>
<IsClear>false</IsClear>
</Spread>
<Spread>
<GroupName>B</GroupName>
<CellPos>C</CellPos>
<CellValue>0~</CellValue>
<Color>Yellow</Color>
<CellLinePos>3</CellLinePos>
<IsSetColor>true</IsSetColor>
<IsClear>false</IsClear>
</Spread>
<Spread>
<GroupName>C</GroupName>
<CellPos>D</CellPos>
<CellValue>0~</CellValue>
<Color>Red</Color>
<CellLinePos>3</CellLinePos>
<IsSetColor>true</IsSetColor>
<IsClear>false</IsClear>
</Spread>
</SpreadToList>
</SpreadResultData> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:13:03.160

编辑：上传原始文件内容后，问题变得更加清晰。如果您将最后 10 个字节视为十六进制，我们会得到：

```
6C-74-44-61-74-61-3E-EF-BB-BF 
```

这是：

```
l  t  D  a  t  a  > 
```

其中最后 3 个字节是[零宽度不间断空间](http://www.fileformat.info/info/unicode/char/feff/index.htm)。

修复文件末尾的坏数据，你应该被排序。它应该结束：

```
6C-74-44-61-74-61-3E 
```

* * *

无法复制；这适用于我针对.NET 4.5，根据您的帖子使用xml文件；你确定文件后面没有别的东西吗？您可以在某处上传**确切的文件吗？**可能有一些内容在 SO 上的文本转储中不可见：

```
static class Program
{
    static void Main()
    {
        var ser = new XmlSerializer(typeof(SpreadResultData));
        SpreadResultData data;
        using(var file = File.OpenRead("my.xml"))
        {
            data = (SpreadResultData)ser.Deserialize(file);
        }
    }
}

public class SpreadResultData
{
    public List<Spread> SpreadToList {get;set;}
}
public class Spread
{
    public string GroupName { get; set; }
    public string CellPos { get; set; }
    public string CellValue { get; set; }
    public string Color { get; set; }
    public int CellLinePos { get; set; }
    public bool IsSetColor { get; set; }
    public bool IsClear { get; set; }
} 
```

# twitter-bootstrap - Wix - 使用 Burn 引导 MSI 安装正常，卸载失败。MSI 自行安装/卸载 好的

> ID：15943405
> 
> 赞同：1
> 
> 时间：2013-04-11T07:52:33.643
> 
> 标签：twitter-bootstrap, installation, wix, burn

几天来，我一直在尝试使用网络上的 .Net 4.0 生成我们的 MSI 安装程序的引导 EXE，我需要一些帮助。

我们有一个简单的 MSI，需要将它与 .Net4 捆绑。我们有 MSI 的 2 个变体 - x64/x86，它们在 Bundle 中以通常的方式处理。

如果存在 .Net4，则 MSI 可以正常安装和卸载。惊人的。启动后，EXE 安装正常（如果需要，确实会修补 .Net4）并且我们的应用程序会启动（如预期的那样）。问题是卸载。它失败并显示以下日志。

我难住了。有任何线索吗？

**捆绑包.wxs**

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" 
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">

  <?ifdef env.BuildNumber ?>
    <?define VersionNumber= $(env.BuildNumber) ?>
  <?else ?>
    <?define VersionNumber="1.0.0.0" ?>
  <?endif ?>
  <?define UpgradeCode="{5C7CB098-A9BB-4ABC-9496-68B96C357270}"?>

  <!-- leaving name off Bundle would stop it appearring in Control Panel-->
  <Bundle Name="App.Net Desktop Bootstrapper" 
          Version="$(var.VersionNumber)" 
          Manufacturer="App.Net" 
          UpgradeCode="$(var.UpgradeCode)"
          Condition="((VersionNT >= v5.1) AND (ServicePackLevel >= 3)) OR ((VersionNT >= v5.2) AND (ServicePackLevel >= 2)) OR (VersionNT >= v6.0)"
          IconSourceFile="..\..\assets\App.NetDesktopIcon.ico">

    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.HyperlinkLicense"> <!-- hyperlink license form -->
      <!-- leave hyperlink url blank to prevent display -->
      <bal:WixStandardBootstrapperApplication 
        LicenseUrl=""
        SuppressOptionsUI="yes" 
        ThemeFile="..\..\assets\wixTheme\PipeInstaller.xml" 
        LocalizationFile="..\..\assets\wixTheme\MyTheme.wxl" />  <!-- setup custom theme -->
      <PayloadGroupRef Id="installPayload"/>   <!-- payload for images used in theme -->
    </BootstrapperApplicationRef>

  <PayloadGroup Id ="installPayload">
     <!-- Images referred to by name in theme -->
      <Payload Id="image1" Name ="header.png" SourceFile="..\..\assets\wixTheme\header.png" />
      <Payload Id="image2" Name ="install-smaller.png" SourceFile="..\..\assets\wixTheme\install-smaller.png" />
    </PayloadGroup>
    <Chain>
      <PackageGroupRef Id="NetFx40Web" />   <!-- bootstrap the /Net install from the web. This is build into Wix -->

      <!-- Set NOT Visible so it's viewable in Control Panel-->
      <MsiPackage
         Id="x86"
          SourceFile="..\..\bin\Win\x86\msi\App.Net.msi"
         InstallCondition="NOT VersionNT64"
         Visible="no">
        <!-- Override property values in the MSI -->
        <MsiProperty Name="AUTOUPDATEENABLED" Value="1" />
        <MsiProperty Name="AUTOSTART" Value="1" />
        <MsiProperty Name="CALLEDFROMEXE" Value="1" />
      </MsiPackage>

      <MsiPackage
          Id="x64"
          SourceFile="..\..\bin\Win\x64\msi\App.Net.msi"
          InstallCondition="VersionNT64"
          Visible="no">
        <!-- Override property values in the MSI -->
        <MsiProperty Name="AUTOUPDATEENABLED" Value="1" />
        <MsiProperty Name="AUTOSTART" Value="1" />
        <MsiProperty Name="CALLEDFROMEXE" Value="1" />
      </MsiPackage>
    </Chain>
    </Bundle>
</Wix> 
```

**安装错误日志**

```
[0FAC:0348][2013-04-11T00:29:11]: Burn v3.6.3303.0, Windows v6.1 (Build 7601: Service Pack 1), path: C:\ProgramData\Package Cache\{c7e4c719-a2f5-46ab-8875-3bc46f059503}\App.Net.Setup.exe, cmdline: '/uninstall -burn.unelevated BurnPipe.{0ED581A2-B6CE-473D-AADF-46CF51E7DF81} {20A283F6-897C-4CFC-9718-89B0E4BD138E} 3888'
[0FAC:0348][2013-04-11T00:29:11]: Setting string variable 'WixBundleLog' to value 'C:\Users\IEUser\AppData\Local\Temp\App.Net_Desktop_Bootstrapper_20130411002911.log'
[0FAC:0348][2013-04-11T00:29:11]: Condition '((VersionNT >= v5.1) AND (ServicePackLevel >= 3)) OR ((VersionNT >= v5.2) AND (ServicePackLevel >= 2)) OR (VersionNT >= v6.0)' evaluates to true.
[0FAC:0348][2013-04-11T00:29:11]: Detect 3 packages
[0FAC:0348][2013-04-11T00:29:11]: Setting string variable 'NETFRAMEWORK40' to value '1'
[0FAC:0348][2013-04-11T00:29:11]: Condition 'NETFRAMEWORK40' evaluates to true.
[0FAC:0348][2013-04-11T00:29:11]: Detected package: NetFx40Web, state: Present, cached: Complete
[0FAC:0348][2013-04-11T00:29:11]: Detected package: x86, state: Present, cached: Complete
[0FAC:0348][2013-04-11T00:29:11]: Detected package: x64, state: Absent, cached: None
[0FAC:0348][2013-04-11T00:29:11]: Detect complete, result: 0x0
[0FAC:0348][2013-04-11T00:29:59]: Plan 3 packages, action: Uninstall
[0FAC:0348][2013-04-11T00:29:59]: Setting string variable 'WixBundleRollbackLog_x86' to value 'C:\Users\IEUser\AppData\Local\Temp\App.Net_Desktop_Bootstrapper_20130411002911_0_x86_rollback.log'
[0FAC:0348][2013-04-11T00:29:59]: Setting string variable 'WixBundleLog_x86' to value 'C:\Users\IEUser\AppData\Local\Temp\App.Net_Desktop_Bootstrapper_20130411002911_0_x86.log'
[0FAC:0348][2013-04-11T00:29:59]: Skipping dependency registration on package with no dependency providers: NetFx40Web
[0FAC:0348][2013-04-11T00:29:59]: Planned package: x64, state: Absent, default requested: Absent, ba requested: Absent, execute: None, rollback: None, cache: No, uncache: No, dependency: Unregister
[0FAC:0348][2013-04-11T00:29:59]: Planned package: x86, state: Present, default requested: Absent, ba requested: Absent, execute: Uninstall, rollback: Install, cache: No, uncache: Yes, dependency: Unregister
[0FAC:0348][2013-04-11T00:29:59]: Planned package: NetFx40Web, state: Present, default requested: None, ba requested: None, execute: None, rollback: None, cache: No, uncache: No, dependency: None
[0FAC:0348][2013-04-11T00:29:59]: Plan complete, result: 0x0
[0FAC:0348][2013-04-11T00:29:59]: Apply begin
[0F30:0F50][2013-04-11T00:29:59]: Creating a system restore point.
[0F30:0F50][2013-04-11T00:29:59]: Could not create system restore point, error: 0x80070422\. Continuing...
[0F30:0F50][2013-04-11T00:29:59]: Removed dependency: {c7e4c719-a2f5-46ab-8875-3bc46f059503} on package provider: {129A003A-2370-4378-B0FA-10509C76FE2E}, package x86
[0F30:0F50][2013-04-11T00:29:59]: Applying execute package: x86, action: Uninstall, path: C:\ProgramData\Package Cache\{129A003A-2370-4378-B0FA-10509C76FE2E}v1.0.0.0\App.Net.msi, arguments: ' ARPSYSTEMCOMPONENT="1" MSIFASTINSTALL="7" AUTOUPDATEENABLED="1" AUTOSTART="1" CALLEDFROMEXE="1"'
[0F30:0F50][2013-04-11T00:30:00]: Error 0x80070643: Failed to uninstall MSI package.
[0F30:0F50][2013-04-11T00:30:00]: Error 0x80070643: Failed to execute MSI package.
[0FAC:0348][2013-04-11T00:30:00]: Error 0x80070643: Failed to configure per-machine MSI package.
[0FAC:0348][2013-04-11T00:30:00]: Applied execute package: x86, result: 0x80070643, restart: None
[0FAC:0348][2013-04-11T00:30:00]: Error 0x80070643: Failed to execute MSI package.
[0F30:0F50][2013-04-11T00:30:00]: Applying rollback package: x86, action: Install, path: C:\ProgramData\Package Cache\{129A003A-2370-4378-B0FA-10509C76FE2E}v1.0.0.0\App.Net.msi, arguments: ' ARPSYSTEMCOMPONENT="1" MSIFASTINSTALL="7" AUTOUPDATEENABLED="1" AUTOSTART="1" CALLEDFROMEXE="1"'
[0F30:0F50][2013-04-11T00:30:01]: Registering package dependency provider: {129A003A-2370-4378-B0FA-10509C76FE2E}, version: 1.0.0.0, package: x86
[0FAC:0348][2013-04-11T00:30:01]: Applied rollback package: x86, result: 0x0, restart: None
[0F30:0F50][2013-04-11T00:30:01]: Registering dependency: {c7e4c719-a2f5-46ab-8875-3bc46f059503} on package provider: {129A003A-2370-4378-B0FA-10509C76FE2E}, package: x86
[0FAC:0348][2013-04-11T00:30:02]: Apply complete, result: 0x80070643, restart: None, ba requested restart:  No 
```

**更新**

回应 Rob 的回答（非常感谢）

Rob 非常感谢 - 奇怪的是 MSI 可以自行安装/卸载。我检查了日志，但没有看到“错误”，但确实看到了：

```
MSI (s) (F0:E4) [05:36:30:999]: No System Restore sequence number for this installation.
MSI (s) (F0:E4) [05:36:30:999]: Unlocking Server
MSI (s) (F0:E4) [05:36:30:999]: PROPERTY CHANGE: Deleting UpdateStarted property. Its current value is '1'.
MSI (s) (F0:E4) [05:36:30:999]: Doing action: LaunchApplication
MSI (s) (F0:E4) [05:36:30:999]: Note: 1: 2205 2:  3: ActionText
Action ended 5:36:30: InstallFinalize. Return value 1.
MSI (s) (F0:F0) [05:36:30:999]: Invoking remote custom action. DLL: C:\Windows\Installer\MSI1A6F.tmp, Entrypoint: WixShellExec
Action start 5:36:30: LaunchApplication.
WixShellExec:  Error 0x80070002: ShellExec failed with return code 2
WixShellExec:  Error 0x80070002: failed to launch target
CustomAction LaunchApplication returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)
Action ended 5:36:31: LaunchApplication. Return value 3.
Action ended 5:36:31: INSTALL. Return value 3.
MSI (s) (F0:E4) [05:36:31:015]: Note: 1: 1725
MSI (s) (F0:E4) [05:36:31:015]: Product: TheApp -- Removal failed. 
```

这几乎就像它试图在卸载时启动应用程序......谢谢，我认为 Bundle 是正确的，但我正在为此苦苦挣扎。收到任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:24:25.623

x86 MSI 无法卸载。`0x80070643`是“此安装包由于某种原因失败”的一般错误。

查看 .MSI 日志文件：`'C:\Users\IEUser\AppData\Local\Temp\App.Net_Desktop_Bootstrapper_20130411002911_0_x86.log'`您可以看到该日志文件被引用为“WixBundleLog_x86”变量中的日志文件。日志文件显示您的`LaunchApplication`自定义操作失败（请参阅这篇[旧博客文章](http://robmensching.com/blog/posts/2010/8/2/the-first-thing-i-do-with-an-msi-log)我是如何发现错误的）。

您需要查看`LaunchApplication`自定义操作的条件，因为这似乎是在卸载时启动您的应用程序（这看起来很奇怪）。难道是`AUTOSTART`属性总是与`"1"`从Bundle的值一起传递到导致问题的MSI的事实吗？

PS：您不需要明确设置`MsiPackage/@Visible='no'`. 这是默认设置。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T01:28:58.123

将 Permanent="no" 属性添加到您的 MsiPackage。

PS：默认情况下，它说永久属性值为否，但我遇到了同样的问题，并且在添加属性后能够修复它。

# .net - MVC、EF、WCF、Repository 和 UOW 模式的示例源

> ID：15943407
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:52:36.760
> 
> 标签：.net, asp.net-mvc, wcf, entity-framework, repository-pattern

我想开始一个 MVC 项目，如果您有任何适用于中等规模应用程序的示例源，请您指导我吗？

我想要包含 EF、WCF、存储库和工作单元模式的 MVC 的东西。请建议。

另外请告知这是我可以用来创建 MVC 应用程序的良好结构（带有 EF、WCF、存储库和工作单元模式的 MVC）吗？另外，后来我必须让这个应用程序也可以作为移动应用程序工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:55:29.447

[查看Programming Entity Framework, 2nd Edition](http://shop.oreilly.com/product/9780596807252.do)第 24 章的源代码

它可以在这里免费获得：

第 2 版：第 27 章 [ASP.NET WebForms 和 MVC 应用程序使用第 24 章中的 POCO 和存储库](http://learnentityframework.com/LearnEntityFramework/downloads/#2ed)（C#，2010 年 10 月 3 日添加）

我认为它涵盖了 EF、UoW、MVC 和存储库模式。

如果您阅读这本书肯定会更有意义，但探索代码可能会对您有所帮助。

# itextsharp - 使用 itextSharp 的页脚超链接

> ID：15943417
> 
> 赞同：0
> 
> 时间：2013-04-11T07:53:07.507
> 
> 标签：itextsharp

我需要在使用 iTextSharp 生成的 PDF 的页脚处放置一个超链接。

我知道如何使用 PdfPageEventHelper 在页脚中打印一些文本但不放置超链接。

```
 public class PdfHandlerEvents: PdfPageEventHelper
    {
        private PdfContentByte _cb;
        private BaseFont _bf;

        public override void OnOpenDocument(PdfWriter writer, Document document)
        {
            _cb = writer.DirectContent;
        }

        public override void OnEndPage(PdfWriter writer, Document document)
        {
            base.OnEndPage(writer, document);

            _bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
            Rectangle pageSize = document.PageSize;

            _cb.SetRGBColorFill(100, 100, 100);

            _cb.BeginText();
            _cb.SetFontAndSize(_bf, 10);
            _cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, "More information", pageSize.GetRight(200), pageSize.GetBottom(30), 0);
            _cb.EndText();
        }
    } 
```

如何使文本“更多信息”成为超链接？

编辑：

在下面克里斯的回答之后，我也弄清楚了如何在页脚打印图像，这里是代码：

```
 Image pic = Image.GetInstance(@"C:\someimage.jpg");
            pic.SetAbsolutePosition(0, 0);
            pic.ScalePercent(25);

            PdfTemplate tpl = _cb.CreateTemplate(pic.Width, pic.Height);
            tpl.AddImage(pic);
            _cb.AddTemplate(tpl, 0, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:31:40.227

该`Document`对象通常可以让您使用抽象的东西`Paragraph`，`Chunk`但这样做会失去绝对定位。`PdfWriter`and对象为您提供绝对定位，`PdfContentByte`但您需要使用较低级别的对象，如原始文本。

幸运的是，有一个快乐的中间对象，称为`ColumnText`它应该可以满足您的需求。您可以将其`ColumnText`视为基本上是一个表格，大多数人将其用作单列表格，因此您实际上可以将其视为添加对象的矩形。如有任何问题，请参阅下面代码中的注释。

```
public class PdfHandlerEvents : PdfPageEventHelper {
    private PdfContentByte _cb;
    private BaseFont _bf;

    public override void OnOpenDocument(PdfWriter writer, Document document) {
        _cb = writer.DirectContent;
    }

    public override void OnEndPage(PdfWriter writer, Document document) {
        base.OnEndPage(writer, document);

        _bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
        iTextSharp.text.Rectangle pageSize = document.PageSize;

        //Create our ColumnText bound to the canvas
        var ct = new ColumnText(_cb);
        //Set the dimensions of our "box"
        ct.SetSimpleColumn(pageSize.GetRight(200), pageSize.GetBottom(30), pageSize.Right, pageSize.Bottom);
        //Create a new chunk with our text and font
        var c = new Chunk("More Information", new iTextSharp.text.Font(_bf, 10));
        //Set the chunk's action to a remote URL
        c.SetAction(new PdfAction("http://www.aol.com"));
        //Add the chunk to the ColumnText
        ct.AddElement(c);
        //Tell the ColumnText to draw itself
        ct.Go();

    }
} 
```

# c# - 检查具有完整数字的字符串或数字和字符串的组合

> ID：15943420
> 
> 赞同：-2
> 
> 时间：2013-04-11T07:53:14.083
> 
> 标签：c#, asp.net

我想检查一个字符串是只是数字还是字母数字。

例如 ：

```
string test = "2323212343243423333";
string test1 = "34323df23233232323e"; 
```

我想检查是否只有数字的测试。如果整个字符串有数字意味着它返回true。否则返回false。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:57:58.497

```
bool allDigits = text.All(c => char.IsDigit(c)); 
```

或者

```
bool allDigits = text.All(char.IsDigit); 
```

除非“数字”包括十六进制数字？当然，我的答案仅适用于仅包含数字的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:02:28.493

如果字符串长度不太长，您可以尝试`int.TryParse(string here)`，或者您可以通过检查字符串中的每个字符来自己编写函数，例如

```
if(MyString[i]-'0'<= 9 && MyString[i]-'0'>= 0)
//then it's a digit, and check other characters this way 
```

# typo3 - 奇怪的行为编辑 tt_news_template

> ID：15943421
> 
> 赞同：0
> 
> 时间：2013-04-11T07:53:16.337
> 
> 标签：typo3, typoscript, tt-news, typo3-4.5

我正在使用 ttnews 插件开发我的网页，并且我编辑了 tt_news_v3_template.html，以便它在我的主页中显示前 3 个新闻。我想要这种格式，所以我更新了###TEMPLATE_LIST3###。那是新代码

```
 <!-- ###TEMPLATE_LIST3### begin
    This is the template for the list of news in the archive or news page or search
-->
<div class="news-list3-container">
###NEWS_CATEGORY_ROOTLINE###
    <!-- ###CONTENT### begin
          This is the part of the template substituted with the list of news:
    -->
        <!-- ###NEWS### begin -->
        <article class="box">
            <div class="image-border">
                <a href="#" class="image image-left">

                    <!--###LINK_ITEM###-->###NEWS_IMAGE###<!--###LINK_ITEM###-->

                </a>
            </div>
            <h2><!--###LINK_ITEM###-->###NEWS_TITLE###<!--###LINK_ITEM###--></h2>

            <p class="subtitle">###NEWS_SUBHEADER###</p>
            <p>###NEWS_CONTENT###</p>
            <p>###CATWRAP_B### ###TEXT_CAT### ###NEWS_CATEGORY### ###NEWS_CATEGORY_IMAGE### ###CATWRAP_E###</p>
            <p>
                <a href="#" class="button">Ver M&aacute;s</a>
            </p>
        </article>

        <!-- ###NEWS### end-->
        <!-- ###NEWS_1### begin -->

    <div class="row" style="margin-top:15px; display: inline-block; width:100%">

            <section class="box" style="width:49%; float:left">
                <h2><!--###LINK_ITEM###-->###NEWS_TITLE###<!--###LINK_ITEM###--></h2>
                <p class="subtitle">###NEWS_SUBHEADER###</p>
                <div class="image-border">
                    <a href="#" class="image image-full">
                        <!--###LINK_ITEM###-->###NEWS_IMAGE###<!--###LINK_ITEM###-->
                    </a>
                </div>
                <p>###NEWS_CONTENT###</p>
                <p>###CATWRAP_B### ###TEXT_CAT### ###NEWS_CATEGORY### ###NEWS_CATEGORY_IMAGE### ###CATWRAP_E###</p>
                <p>
                    <a href="#" class="button">Ver M&aacute;s</a>
                </p>    
            </section>

    <!-- ###NEWS_1### end-->
    <!-- ###NEWS_2### begin -->

            <section class="box" style="width:49%; float:left">
                <h2><!--###LINK_ITEM###-->###NEWS_TITLE###<!--###LINK_ITEM###--></h2>
                <p class="subtitle">###NEWS_SUBHEADER###</p>
                <div class="image-border">
                    <a href="#" class="image image-full">
                        <!--###LINK_ITEM###-->###NEWS_IMAGE###<!--###LINK_ITEM###-->
                    </a>
                </div>
                <p>###NEWS_CONTENT###</p>
                <p>###CATWRAP_B### ###TEXT_CAT### ###NEWS_CATEGORY### ###NEWS_CATEGORY_IMAGE### ###CATWRAP_E###</p>
                <p>
                    <a href="#" class="button">Ver M&aacute;s</a>
                </p>    
            </section>

    <!-- ###NEWS_2### end-->
<!-- ###CONTENT### end -->
    </div>
</div> 
```

但是当我看到页面时，两个第一个新闻显示得很好，带有我分配的 div 和标签，但是最后一个 new 复制了第一个 new 的结构，而不是使用它自己的结构。这是生成的代码

```
<div class="news-list3-container">

    <article class="box">
        <div class="image-border">
            <a href="#" class="image image-left">

                </a><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=13&amp;cHash=449d2b3903b9c25c182967aa9c3f3e17" title="Noticia 3"></a>

        </div>
        <h2><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=13&amp;cHash=449d2b3903b9c25c182967aa9c3f3e17" title="Noticia 3">Noticia 3</a></h2>

        <p class="subtitle"></p><p>subtitle noticia 3<span class="news-list-morelink"><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=13&amp;cHash=449d2b3903b9c25c182967aa9c3f3e17" title="Noticia 3">[Leer más]</a></span></p><p></p>
        <p>texto noticia 3</p>
        <p></p><div class="news-list-category"> Categoría: News  </div><p></p>
        <p>
            <a href="#" class="button">Ver Más</a>
        </p>
    </article>

    <div class="row" style="margin-top:15px; display: inline-block; width:100%">

            <section class="box" style="width:49%; float:left">
                <h2><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=11&amp;cHash=e5904ef7f7a76b00a2333b7054fa3684" title="dsadasdasd">dsadasdasd</a></h2>
                <p class="subtitle"></p><p>dasdasdasdas<span class="news-list-morelink"><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=11&amp;cHash=e5904ef7f7a76b00a2333b7054fa3684" title="dsadasdasd">[Leer más]</a></span></p><p></p>
                <div class="image-border">
                    <a href="#" class="image image-full">
                        </a><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=11&amp;cHash=e5904ef7f7a76b00a2333b7054fa3684" title="dsadasdasd"></a>

                </div>
                <p><span style="font-family: sans-serif; line-height: 17.265625px; background-color: rgb(249, 249, 249); ">Lorem ipsum ad his scripta blandit partiendo, eum fastidii accumsan euripidis in, eum liber hendrerit an. Qui ut wisi vocibus suscipiantur, quo dicit ridens inciderint id. Quo mundi lobortis reformidans eu, legimus senserit definiebas an eos. Eu sit tincidunt incorrupte definitionem, vis mutat affert percipit cu, eirmod consectetuer signiferumque eu per. In usu latine equidem dolores. Quo no falli viris intellegam, ut fugit veritus placerat per. Ius id vidit volumus mandamus, vide veritus democritum te nec, ei eos debet libris consulatu. No mei ferri graeco dicunt, ad cum veri accommodare. Sed at malis omnesque delicata, usu et iusto zzril meliore. Dicunt maiorum eloquentiam cum cu, sit summo dolor essent te. Ne quodsi nusquam legendos has, ea dicit voluptua eloquentiam pro, ad sit quas qualisque. Eos vocibus deserunt quaestio ei. Blandit incorrupte quaerendum in quo, nibh impedit id vis, vel no nullam semper audiam. Ei populo graeci consulatu mei, has ea stet modus phaedrum. Inani oblique ne has, duo et veritus detraxit. Tota ludus oratio ea mel, offendit persequeris ei vim. Eos dicat oratio partem ut, id cum ignota senserit intellegat. Sit inani ubique graecis ad, quando graecis liberavisse et cum, dicit option eruditi at duo. Homero salutatus suscipiantur eum id, tamquam voluptaria expetendis ad sed, nobis feugiat similique usu ex. Eum hinc argumentum te, no sit percipit adversarium, ne qui feugiat persecuti. Odio omnes scripserit ad est, ut vidit lorem maiestatis his, putent mandamus gloriatur ne pro. Oratio iriure rationibus ne his, ad est corrumpit splendide. Ad duo appareat moderatius, ei falli tollit denique eos. Dicant evertitur mei in, ne his deserunt perpetua sententiae, ea sea omnes similique vituperatoribus. Ex mel errem intellegebat comprehensam, vel ad tantas antiopam delicatissimi, tota ferri affert eu nec. Legere expetenda pertinacia ne pro, et pro impetus persius assueverit. Ea mei nullam facete, omnis oratio offendit ius cu. Doming takimata repudiandae usu an, mei dicant takimata id, pri eleifend inimicus euripidis at. His vero singulis ea, quem euripidis abhorreant mei ut, et populo iriure vix. Usu ludus affert voluptaria ei, vix ea error definitiones, movet fastidii signiferumque in qui. Vis prodesset adolescens adipiscing te, usu mazim perfecto recteque at, assum putant erroribus mea in. Vel facete imperdiet id, cum an libris luptatum perfecto, vel fabellas inciderint ut. Veri facete debitis ea vis, ut eos oratio erroribus. Sint facete perfecto no vel, vim id omnium insolens. Vel dolores perfecto pertinacia ut, te mel meis ullum dicam, eos assum facilis corpora in. Mea te unum viderer dolores, nostrum detracto nec in, vis no partem definiebas constituam. Dicant utinam philosophia has cu, hendrerit prodesset at nam, eos an bonorum dissentiet. Has ad placerat intellegam consectetuer, no adipisci mandamus senserit pro, torquatos similique percipitur est ex. Pro ex putant deleniti repudiare, vel an aperiam sensibus suavitate. Ad vel epicurei convenire, ea soluta aliquid deserunt ius, pri in errem putant feugiat. Sed iusto nihil populo an, ex pro novum homero cotidieque. Te utamur civibus eleifend qui, nam ei brute doming concludaturque, modo aliquam facilisi nec no. Vidisse maiestatis constituam eu his, esse pertinacia intellegam ius cu. Eos ei odio veniam, eu sumo altera adipisci eam, mea audiam prodesset persequeris ea. Ad vitae dictas vituperata sed, eum posse labore postulant id. Te eligendi principes dignissim sit, te vel dicant officiis repudiandae. Id vel sensibus honestatis omittantur, vel cu nobis commune patrioque. In accusata definiebas qui, id tale malorum dolorem sed, solum clita phaedrum ne his. Eos mutat ullum forensibus ex, wisi perfecto urbanitas cu eam, no vis dicunt impetus. Assum novum in pri, vix an suavitate moderatius, id has reformidans referrentur. Elit inciderint omittantur duo ut, dicit democritum signiferumque eu est, ad suscipit delectus mandamus duo. An harum equidem maiestatis nec. At has veri feugait placerat, in semper offendit praesent his. Omnium impetus facilis sed at, ex viris tincidunt ius. Unum eirmod dignissim id quo. Sit te atomorum quaerendum neglegentur, his primis tamquam et. Eu quo quot veri alienum, ea eos nullam luptatum accusamus. Ea mel causae phaedrum reprimique, at vidisse dolores ocurreret nam.</span></p>
                <p></p><div class="news-list-category"> Categoría: News  </div><p></p>
                <p>
                    <a href="#" class="button">Ver Más</a>
                </p>    
            </section>

    <article class="box">
        <div class="image-border">
            <a href="#" class="image image-left">

                </a><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=6&amp;cHash=32f082d69ad6a8b17770e4af154b37f2" title="Noticia 2"></a>

        </div>
        <h2><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=6&amp;cHash=32f082d69ad6a8b17770e4af154b37f2" title="Noticia 2">Noticia 2</a></h2>

        <p class="subtitle"></p><p>subtitulo de la noticia 2<span class="news-list-morelink"><a href="index.php?id=52&amp;tx_ttnews%5Btt_news%5D=6&amp;cHash=32f082d69ad6a8b17770e4af154b37f2" title="Noticia 2">[Leer más]</a></span></p><p></p>
        <p>Contenido de la noticia 2</p>
        <p></p><div class="news-list-category"> Categoría: News, Blog  </div><p></p>
        <p>
            <a href="#" class="button">Ver Más</a>
        </p>
    </article>

    </div>
</div> 
```

请注意，第 3 个 new 像第一个 new 一样包装在文章 class="box" 中，而不是使用它自己的结构。我搜索了很多并检查了标签，但我不知道如何解决它。有人可以给我一些建议或提示吗？

我正在使用typo3 4.5和tt_news 3.0.1

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:58:34.937

你必须设置

```
plugin.tt_news.alternatingLayouts = 3 
```

在您的排版设置中。默认情况下，tt_news 将仅使用 2 个交替布局。

# c# - 在同一解决方案中 vdproj 的预构建事件中更改 csproj 程序集信息中的产品名称

> ID：15943426
> 
> 赞同：2
> 
> 时间：2013-04-11T07:53:32.233
> 
> 标签：c#, .net, visual-studio, build, build-process

我工作的公司有一个被多个客户使用的产品。不幸的是，其中一位客户不喜欢我们为产品命名的名称，并已付费为其分配了不同的名称。由于我们支持具有两个名称的同一产品，因此我们管理此问题的最佳方法是更改​​ WinForms 项目的 AssemblyInfo.cs 文件中的 AssemblyTitle 和 AssemblyProduct。

由于安装项目也需要提供产品名称，为了防止开发人员忘记更改名称的问题，我创建了 2 个单独的安装项目，每个产品名称一个，但它们在其他方面相同并引用相同的 WinForms 项目。

为了确保 AssemblyInfo.cs 文件正确，我正在考虑通过每个安装项目的 PreBuild 事件来自动执行此操作。有谁知道这样做的有效方法？我的大部分研究都让我找到了显示如何在安装项目中更改信息的链接。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:11:49.017

[MSBuild Community Tasks](https://github.com/loresoft/msbuildtasks)有一个 AssemblyInfo 任务，可让您生成 AssemblyInfo 文件。在 PreBuild 事件中调用这个任务，你就可以开始了！

**编辑，一些细节......**

假设您已经安装了社区任务，请在您的 *.csproj 顶部添加此 Import 语句：

```
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/> 
```

接下来取消注释`<Target Name=BeforeBuild">`项目文件末尾的部分并添加 AssembyInfo 任务，因此您最终会得到如下内容：

```
 <Target Name="BeforeBuild">
    <AssemblyInfo OutputFile="Properties\AssemblyInfo.cs"
                      CodeLanguage="CS"
                      AssemblyCompany="My Company"
                      AssemblyCopyright="(C) My Company, 2013"
                      AssemblyFileVersion="1.0.0.0" 
                      AssemblyInformationalVersion="1.0.0.0"
                      AssemblyTitle="My Assembly Title"
                      AssemblyProduct="My Product"
                      AssemblyVersion="1.0.0.0"
                      />
  </Target> 
```

重新加载您的项目并构建，您应该会看到附加到程序集的值。

# r - R中的滑动窗口

> ID：15943428
> 
> 赞同：5
> 
> 时间：2013-04-11T07:53:42.307
> 
> 标签：r, dataframe, sliding-window

我有一个数据框 DF，两列 A 和 B 如下所示：

```
A                    B                  
1                    0             
3                    0               
4                    0                   
2                    1                    
6                    0                    
4                    1                     
7                    1                 
8                    1                     
1                    0 
```

如下所示执行滑动窗口方法。平均值是在大小为 3 的滑动窗口中计算 B 列的平均值，滑动窗口使用：rollapply(DF$B, width=3,by=1)。每个窗口的平均值显示在左侧。

```
 A:         1    3    4    2    6    4    7    8    1                                          
    B:         0    0    0    1    0    1    1    1    0                                
              [0    0    0]                                              0
                    [0    0    1]                                        0.33
                          [0    1    0]                                  0.33
                                [1    0    1]                            0.66
                                      [0    1    1]                      0.66
                                            [1    1    1]                1
                                                 [1    1    0]           0.66
output:        0   0.33 0.33 0.66   0.66    1     1    1   0.66 
```

现在，对于 A 列中的每一行/坐标，包含该坐标的所有窗口都被考虑并应保留最高平均值，该平均值给出了“输出”列中所示的结果。

我需要获得如上所示的输出。输出应该像：

```
A                   B                  Output   
1                   0                      0
3                   0                      0.33
4                   0                      0.33
2                   1                      0.66
6                   0                      0.66
4                   1                      1
7                   1                      1
8                   1                      1
1                   0                    0.66 
```

R中的任何帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:59:06.367

尝试这个：

```
# form input data
library(zoo)
B <- c(0, 0, 0, 1, 0, 1, 1, 1, 0)

# calculate
k <- 3
rollapply(B, 2*k-1, function(x) max(rollmean(x, k)), partial = TRUE) 
```

最后一行返回：

```
[1] 0.0000000 0.3333333 0.3333333 0.6666667 0.6666667 1.0000000 1.0000000
[8] 1.0000000 0.6666667 
```

**如果有`NA`值**你可能想试试这个：

```
k <- 3
B <- c(1, 0, 1, 0, NA, 1)
rollapply(B, 2*k-1, function(x) max(rollapply(x, k, mean, na.rm = TRUE)), partial = TRUE) 
```

最后一行给出了这个：

```
[1] 0.6666667 0.6666667 0.6666667 0.5000000 0.5000000 0.5000000 
```

将其扩展为：

```
c(mean(B[1:3], na.rm = TRUE), ##
max(mean(B[1:3], na.rm = TRUE), mean(B[2:4], na.rm = TRUE)), ##
max(mean(B[1:3], na.rm = TRUE), mean(B[2:4], na.rm = TRUE), mean(B[3:5], na.rm = TRUE)),
max(mean(B[2:4], na.rm = TRUE), mean(B[3:5], na.rm = TRUE), mean(B[4:6], na.rm = TRUE)),
max(mean(B[3:5], na.rm = TRUE), mean(B[4:6], na.rm = TRUE)), ##
mean(B[4:6], na.rm = TRUE)) ## 
```

如果您不希望`k-1`每一端的组件（`##`上面标有） drop `partial = TRUE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T15:32:17.623

R 库 TTR 具有许多用于计算滑动窗口平均值的函数

SMA = 简单移动平均线

```
data$sma <- SMA(data$B, 3) 
```

更多文档在这里[http://cran.r-project.org/web/packages/TTR/TTR.pdf](http://cran.r-project.org/web/packages/TTR/TTR.pdf)

# java - android通知中的倒计时

> ID：15943432
> 
> 赞同：2
> 
> 时间：2013-04-11T07:54:03.650
> 
> 标签：java, android, eclipse, android-asynctask

我正在尝试在应用程序的通知中进行倒计时：当应用程序收到通知时，通知有 20 秒的时间消失。这是我的代码，但是我的应用程序在收到通知后立即中断，希望有人可以帮助我，谢谢：

```
 package com.taxicell;

    import java.util.ArrayList;

    import android.app.Notification;
    import android.app.NotificationManager;
    import android.app.PendingIntent;
    import android.content.Context;
    import android.content.Intent;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.util.Log;
    import android.widget.Toast;

    /**
     *Falta por descubrir
     * @author sergio
     */
    public class Notifica  { 
    private Context context;

    private String data[];
    public timer timer;

        public void Nueva(Context con,String dat){
            Log.v("app", "nueva notificacion con los datos: "+dat);
            context = con;
            NotificationManager notificador =(NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
           // Notification notifica=new Notification(R.drawable.taxicell,"TaxiCell !",System.currentTimeMillis());
            Notification notifica=new Notification(R.drawable.taxicell,"TaxiCell !",30000);

            notifica.defaults |= Notification.DEFAULT_SOUND;
            notifica.defaults |= Notification.DEFAULT_LIGHTS;
            notifica.flags |= Notification.FLAG_AUTO_CANCEL;
            notifica.defaults |= Notification.DEFAULT_SOUND;
            notifica.defaults |= Notification.DEFAULT_VIBRATE;

            String mensajin="";
            Intent intentoNotifica;
            data=dat.split(",");

            if(Validacion(dat)){
               intentoNotifica=new Intent(context,Mensaje.class);
               Bundle datos = new Bundle();
               datos.putString("msj",dat );
               datos.putInt("tipo", 0);
               intentoNotifica.putExtras(datos);
               mensajin="Solicitud de Servicio !";
            }else{
               intentoNotifica=new Intent(context,Mensaje.class);
               Bundle datos = new Bundle();
               datos.putString("msj",dat);
               datos.putInt("tipo", 1);
               intentoNotifica.putExtras(datos);
               mensajin="Asignación de Saldo !";

            }
            Log.v("pm", "1");
            timer = new timer();

            Log.v("pr", "2");
            timer.execute("ejecucion");
            PendingIntent penIntent = PendingIntent.getActivity(context, 0, intentoNotifica,android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
            notifica.setLatestEventInfo(context,"TaxiCell",mensajin, penIntent);
            notificador.notify(1,notifica);

        }
....

....         
         private class timer extends AsyncTask<String, Integer, Integer>{

                @Override
                 protected void onPreExecute() {
                     Log.v("loop","0");
                  }

                  protected Integer doInBackground(String... urls) {
                     Log.v("loop","1");
                      int i=10;
                      while( i > 0) {

                            if(isCancelled()){break;}
                            else{
                              try {Thread.sleep(1000); }
                              catch (InterruptedException e) {}
                              publishProgress(i); //Actualizamos los valores
                              Log.v("loop","2  es: "+i);
                              i--;
                            }
                        }
                      return i;
                  }
                @Override
                  protected void onProgressUpdate (Integer... valores) {
                  }

                @Override
                  protected void onPostExecute(Integer res) {
                    rechazarServ();  
                }

         }

    } 
```

# git - 如何使用 git 将一个分支重置为另一个分支？

> ID：15943434
> 
> 赞同：82
> 
> 时间：2013-04-11T07:54:09.523
> 
> 标签：git

假设我们有一个`hotfixes`从`master`. 我们添加了对 的提交`hotfixes`，但这些提交没有用，所以现在我们想从一个新的副本`master`重新开始。

为了更好地澄清，这是参考工作流程： http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

假设我们推`hotfixes`送到`origin`远程是因为我们的设置很糟糕，这是测试某些东西的唯一方法，所以我们也需要在远程服务器上重置分支。

如何重置`hotfixes`为副本`master`？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-04-11T08:03:38.997

这就是我使用基本 Git 命令的方式：

```
git checkout hotfixes
git reset --hard master
git push --force origin hotfixes 
```

当然，重要的是通知每个从事`hotfixes`. 他们很可能不得不删除他们的本地副本并从一个新副本开始。另一种侵入性较小的想法是创建一个新分支：

```
git checkout master
git branch -tb hotfixes-2 # this creates branch `hotfixes-2` from a copy of `master`
git push origin HEAD # this creates `hotfixes-2` on the remote server 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-04-11T07:56:16.247

你的意思是你想把你的本地推`master`送到远程`hotfixes`分支？像这样：

```
git push origin +master:hotfixes 
```

但是，这需要允许您在远程端重写历史记录。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-11T07:57:18.887

如果我正确理解了您的问题，那么您正在寻找的是一种移动分支指针`origin/hotfixes`以指向`origin/master`.

如果是这种情况，这些命令集应该可以工作（假设您`hotfixes`过去任何时候已经在本地 git repo 中签出）：

```
# git branch -f does not allow modifying the currently checked out
# branch, so checkout any other branch than hotfixes
git checkout <SOME_OTHER_BRANCH_THAN_HOTFIXES>

# Move the branch pointer of hotfixes to the commit currently
# pointed by origin/master
git branch -f hotfixes origin/master

# Force push the history rewrite in the hotfixes branch
# into origin
git push -f origin hotfixes 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-23T21:55:55.587

这里的答案是可靠的。在将我的暂存分支重置为 master 时，我需要这个确切的更改。在这种情况下，我既想重置原点以匹配主控，也想重置我的本地以匹配它。所以这里有一个 git 别名，它允许您传入分支名称并一次执行两个命令。（有点危险）

```
reorient = "!f() { git push origin +master:$1 && git reset --hard origin/$1 ; }; f" 
```

然后像这样使用它：

```
git reorient hotfixes 
```

上面的答案是完全正确的。但这只会允许更少的击键和更快的周转！希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-15T17:16:22.863

基于此线程中的一些答案，我使用一些提示执行了以下脚本，以降低搞砸的风险：

```
#!/bin/bash
# Questions for loop:
for value in {1..3}
do
  # Asking if user wants to reset hotfix:
  if [ "$value" == "1" ] ;then
    echo -n "Are you sure you want to hard reset the hotfix branch (y/n)? "
    read answer
    if [ "$answer" == "${answer#[Yy]}" ] ;then
        echo 'Okay, maybe next time.'
        exit
    fi
  fi
  # Asking if user is in void:
  if [ "$value" == "2" ] ;then
    echo -n "Are you in the void branch (y/n)? "
    read answer
    if [ "$answer" == "${answer#[Yy]}" ] ;then
        echo 'You should checkout to the void branch.'
        exit
    fi
  fi
  # Asking if user has any uncommited changes:
  if [ "$value" == "3" ] ;then
    echo -n "Do you have any uncommited changes (y/n)? "
    read answer
    if [ "$answer" == "${answer#[Nn]}" ] ;then
        echo 'You should commit your changes to avoid losing them.'
        exit
    fi
  fi
done

echo 'Resetting...'
git checkout void
git branch -f hotfix origin/master
git push -f origin hotfix 
```

100% 接受任何反馈以改进此脚本。

# java - ConcurrentHashMap 是否类似于 CopyOnWriteArrayList

> ID：15943436
> 
> 赞同：5
> 
> 时间：2013-04-11T07:54:19.637
> 
> 标签：java

我用`CopyOnWriteArrayList`的蛮多的。当

*   线程执行大量读取
*   线程执行一点写操作

但是，我会`Collections.synchronizedList()`在何时使用

*   线程执行一点读取
*   线程执行大量写入

这是因为根据[CopyOnWriteArrayList Java Doc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)

> ArrayList 的线程安全变体，其中所有可变操作（添加、设置等）都是通过制作底层数组的新副本来实现的。
> 
> 这通常太昂贵了，...

说到这里`ConcurrentHashMap`，我想知道我是否仍然可以在选择`ConcurrentHashMap`时应用相同的逻辑`Collections.synchronizedMap()`？

**`ConcurrentHashMap`每次我执行写操作时都会制作底层数据结构的新副本吗？如果写操作多于读操作，它的性能会比 Collections.synchronizedMap 差吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T08:00:57.537

不，`ConcurrentHashMap`不会制作底层数据结构的新副本。

`ConcurrentHashMap`是分段映射，分段数基于并发级别。当你写入一个段时，它会被锁定直到写入完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:55:57.847

`ConcurrentHashMap``check-then-set`几乎总是正确使用它，因为它比同类产品具有更好的性能和更有用的 API（您可以避免线程问题）。
它使用*锁剥离*来进行更细粒度的访问，并且不复制映射。**唯一**不应该使用 a
的应用程序是当您需要锁定地图以进行**独占访问**时。**`ConcurrentHashMap`**

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:02:45.713

写入时。`ConcurrentHashMap`它只在内部锁定正在写入的 Map 部分。所以通过这种行为，我们可以很容易地看到它不会生成新副本，而是在同一个副本中进行更改。
因此，当我们尝试写入时，`ConcurrentHashMap`这意味着我们正在尝试写入任何段，然后它只是锁定该段并仅更新该段。所以简单来说，它**永远不会**制作任何新副本。所以你的问题的答案是**否定的。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-10T02:13:37.140

我发现的主要区别是 ConcurrentHashMap 中的自定义“并发级别”。我们可以询问 JVM 需要多少块（段）来划分 Map。将创建许多锁。CopyOnWriteArrayList 使用简单的创建克隆并更新它的简单过程。（这后来被 JVM 与原始数组列表合并。）****

# javascript - 在 IE 9 中加载和操作一个大尺寸的 html 文件

> ID：15943439
> 
> 赞同：0
> 
> 时间：2013-04-11T07:54:35.383
> 
> 标签：javascript, html, css, internet-explorer-9

我在 IE 9 中加载**了 500kb 到 900kb**的 HTML 文件。将 CSS 转换应用于页面以更改缩放大小并在我的自定义应用程序中重新定位页面。我注意到文件越大，执行速度越慢。

在其他浏览器中，它执行得很好。有什么方法可以优化和加速 IE 9 的 CSS 转换操作？

这是 HTML 文件：[https ://www.dropbox.com/s/m22ex5r39blqguu/stocks.html](https://www.dropbox.com/s/m22ex5r39blqguu/stocks.html)

# android - 使用soap web服务注册和登录Android

> ID：15943442
> 
> 赞同：0
> 
> 时间：2013-04-11T07:54:40.723
> 
> 标签：android, soap

任何人都可以帮助我使用 SOAP Web 服务编写注册页面的代码。我开发了一个患者检查应用程序，第一个用户必须在其中注册。请帮助我任何人对此有任何想法。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:48:05.523

您可以使用`Ksoap2`将数据发送到您的网络服务并记录您的用户。这里是关于使用这个库从 web 服务获取数据的初学者教程（了解基础知识）[在 asp net webservice 和使用 ksoap2 的 android 应用程序之间进行通信](http://programmertoolbox.wordpress.com/2013/04/07/communicate-between-asp-net-webservice-and-android-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T07:29:30.490

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);        

        request.addProperty("userFirstname",sFirstName);
        request.addProperty("userLastname",sLastName);
        request.addProperty("dob",sBOD );
        request.addProperty("gender",spinnersex.getSelectedItem().toString());
        request.addProperty("address",sAddress);
        request.addProperty("city",sCity);
        request.addProperty("state", sState);
        request.addProperty("pincode",sAreaCode);
        request.addProperty("mobile",sPhoneNo );
        request.addProperty("mailid",sEmailId );
        request.addProperty("bg",spinnerBloodgroup.getSelectedItem().toString());
       // request.addProperty("date",Date.getText().toString());
        request.addProperty("weight",sweight); 

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);     
        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;
        try {

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            //this is the actual part that will call the webservice
             androidHttpTransport.call(SOAP_ACTION1, envelope);
            Log.e("ressult","data"+ re);

        SoapObject result = (SoapObject)envelope.getResponse();  
            Log.e("value of result", " result"+result);
            if(result!= null)
            {
                Toast.makeText(getApplicationContext(), "successfully register ", 2000).show()  ;
            }
            else {

                Toast.makeText(getApplicationContext(), "Try Again..", 2000).show() ;   
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null; 
```

> 我认为您的问题将通过此代码解决，否则我将简要说明

# javascript - 使用 javascript 动态生成文本字段的日期选择器

> ID：15943447
> 
> 赞同：1
> 
> 时间：2013-04-11T07:54:50.060
> 
> 标签：javascript, jquery-ui-datepicker, dynamic-text

我有一个小 html 文件，其中包含一个文本字段，用户可以在其中输入要生成的其他文本字段的数量。例如，如果用户输入 3，则会自动显示另外 3 个文本字段。然后我使用 JQuery datepicker 将 datepicker 附加到生成的文本字段。不幸的是，我无法在该文本字段中附加日期选择器，请告知

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="jquery-ui-1.7.2/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="jquery-ui-1.7.2/js/jquery-ui-1.7.2.min.js" type="text/javascript"></script>
<link href="jquery-ui-1.7.2/css/base/ui.core.css" rel="stylesheet" type="text/css" />
<link href="jquery-ui-1.7.2/css/base/ui.datepicker.css" rel="stylesheet" type="text/css" />
<link href="jquery-ui-1.7.2/css/base/ui.theme.css" rel="stylesheet" type="text/css" />
<link href="jquery-ui-1.7.2/css/base/ui.datepicker.images.css" rel="stylesheet" type="text/css" />
<style type="text/css">
/* BeginOAWidget_Instance_2137022: #datepicker */

        #datepicker .ui-widget {
            font-family: inherit;
        }

        #datepicker .ui-datepicker {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
        }

        #datepicker .ui-datepicker-title {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
            font-size: 1.1em;
            color: #000;
            font-weight: normal;
            line-height: 1.8em;
        }

        #datepicker .ui-state-default, .ui-widget-content .ui-state-default {
            border-color: #330099;
            background-color: #330099;
            color: #330099;
        }

        #datepicker .ui-state-default, .ui-state-default a {
            color: #330099;
        }   

        #datepicker .ui-state-highlight, .ui-widget-content .ui-state-highlight {
            border-color:#66ccff;
            background-color:#66ccff;
            color:#330099;
        }       

        #datepicker .ui-state-active, .ui-widget-content .ui-state-active { 
            border-color: #ffcc00;
            background-color: #ffcc00;
            color: #330099; 
        }

        #datepicker .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus    
        {
            border-color: #ff9900;
            background-color: #ff9900;
            color: #330033;
        }

        #datepicker .ui-widget-header   
        {
            border-color: #5F5F5F;
            background-color: #808080;
            border-width: 1px;
        }

        /* Text attributes for the Days of Week Text */ 
        #datepicker .ui-datepicker table th
        {
            font-size: .8em;
            color: #000;
            font-weight: bold;
        }

/* EndOAWidget_Instance_2137022 */
</style>
<script type="text/xml">
<!--
<oa:widgets>
  <oa:widget wid="2137022" binding="#datepicker" />
</oa:widgets>
-->
</script>
</head>

<body>
   <h3>Company Store Information</h3><br />
<input class="datepicker" name="commercial_license_issue_date" type="text"  /><br />

 <p>
  No. of Store <input type="text" onkeyup="BuildFormFields('FieldsStore',parseInt(this.value, 10), 'Store', 'store');" />
            <div id="FieldsStore" style="margin: 20px 0px;"></div>
            </p>

</body>
<script type="text/javascript">
function BuildFormFields($divName, $amount, $type1, $type2)
            {
                var
                    $container = document.getElementById($divName),
                    $item, $field, $i;

                $container.innerHTML = '';
                for ($i = 0; $i < $amount; $i++) {
                    $item = document.createElement('div');
                    $item.style.margin = '3px';

                    t = document.createElement('table');

                    $field = document.createElement('span');
                    $field.innerHTML = $type1 + ' Rent Issue Date';
                    $field.style.margin = '0px 10px';
                    $item.appendChild($field);

                    $field = document.createElement('input');
                    $field.name = $type2 + '_rent_issue_date[' + $i + ']';
                    $field.type = 'text';
                    $field.className = 'datepicker hasDatepicker';
                    //$("field").attr("class", "datepicker");
                    //$field.className = 'datepicker';
                    //$field.class = 'datepicker'
                    //$field.addClass('datepicker');
                    $item.appendChild($field);
                    var br = document.createElement("br");
                    $item.appendChild(br);

                    $field = document.createElement('span');
                    $field.innerHTML = $type1 + ' Rent Expiry Date';
                    $field.style.margin = '0px 10px';
                    $item.appendChild($field);

                    $field = document.createElement('input');
                    $field.className = 'datepicker hasDatepicker';
                    $field.ID = $type2 + '_rent_expiry_date[' + $i + ']';
                    $field.name = $type2 + '_rent_expiry_date[' + $i + ']';
                    $field.type = 'text';

                    $item.appendChild($field);
                    var br = document.createElement("br");
                    $item.appendChild(br);

                    var br = document.createElement("br");
                    $item.appendChild(br);
                    var br = document.createElement("br");
                    $item.appendChild(br);

                    $container.appendChild($item);
                }
            }

                    // BeginOAWidget_Instance_2137022: #datepicker
$('.datepick').each(function(){
    $(this).datepicker();
});
$(function() {
                    $(".datepicker").datepicker({ 
                    showOtherMonths: false, 
                    changeMonth: true,
                    changeYear: true,
                    dateFormat: 'yy-mm-dd',
                    showOn: "button",
                    buttonImage: "/hrss/calendar.gif",
                    buttonImageOnly: true
                     });
                });

            </script>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:01:58.900

后：

```
 $field = document.createElement('input');
    $field.className = 'datepicker hasDatepicker';
    $field.ID = $type2 + '_rent_expiry_date[' + $i + ']';
    $field.name = $type2 + '_rent_expiry_date[' + $i + ']';
    $field.type = 'text';

    $item.appendChild($field); 
```

添加：

```
 $($field).datepicker(); 
```

另外，我认为您不需要将`hasDatepicker`类添加到字段中，日期选择器小部件会在初始化时添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:10:26.947

这应该为您完成工作：

[http://jsfiddle.net/urdLx/](http://jsfiddle.net/urdLx/)

```
<input type="text" id="numFields" />
<button id="makeFields">Make new fields</button>
<div id="FieldsStore" style="margin: 20px 0px;"></div>

<script>

(function ($) {
    $("#makeFields").bind("click", function () {
        for (var i = 0; i < parseInt($('#numFields').val()); i++) {
            $("#FieldsStore").append('<p><input class="datepicker" name="commercial_license_issue_date" type="text" /></p>');
            makeDatepickers();
        }

    })

    var makeDatepickers = function () {
        $(".datepicker").datepicker({
            showOtherMonths: false,
            changeMonth: true,
            changeYear: true,
            dateFormat: 'yy-mm-dd',
            showOn: "button",
            buttonImage: "/hrss/calendar.gif",
            buttonImageOnly: true
        });
    }
})(jQuery);

</script> 
```

# android - android:- 如何将图像从资产复制到 SD 卡？

> ID：15943448
> 
> 赞同：2
> 
> 时间：2013-04-11T07:54:56.157
> 
> 标签：android

我有一些图像要显示在应用程序中（当用户从​​中选择图像时，例如从图库中选择）。

问题是如何将我放在代码中资产文件夹中的图像复制到 SD 卡上的文件夹中。

*   编辑：我试过这个例子：[http ://www.technotalkative.com/android-copy-files-from-assets-to-sd-card/](http://www.technotalkative.com/android-copy-files-from-assets-to-sd-card/)

*   我已授予应用程序读写权限

    `<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /><uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:59:47.467

```
AssetManager assetManager = context.getAssets();
InputStream is = assetManager.open(fileName); 
```

使用要复制的文件名作为参数获取`AssetManager`并调用。`open`然后就可以这样简单的复制了

```
File out = new File(Environment.getExternalStorageDirectory(), fileName);
byte[] buffer = new byte[BUFFER_LEN];
FileOutputStream fos = new FileOutputStream(out);
int read = 0;

 while ((read = is.read(buffer, 0, BUFFER_LEN)) >= 0) {
        fos.write(buffer, 0, read);
  }

fos.flush();
fos.close()
is.close() 
```

记得在你的文件中添加`WRITE_EXTERNAL_STORAGE`权限`AndroidManifest.xml`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:39:05.937

```
private void copyFileAssets() {
        AssetManager assetManager = getAssets();            
        InputStream in = null;
        OutputStream out = null;
        try {
          in = assetManager.open("ceo.jpg");
          out = new FileOutputStream(Environment.getExternalStorageDirectory()+File.separator+ "abc.jpg");
          copyFile(in, out);
          in.close();
          in = null;
          out.flush();
          out.close();
          out = null;
        } catch(IOException e) {
            Log.e("tag", "Failed to copy asset file: " + filename, e);
        }       

} 
```

* * *

```
private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
      out.write(buffer, 0, read);
    }
} 
```

您必须添加此权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:11:18.687

*   使用多种方式之一获取位图资源。

前任：

```
Bitmap bitmap = BitmapFactory.decodeResource(resource, id); // get your bitmap that you want to save on SD card. 
```

*   获取存储资源的路径。

`String compressedFilePath = Environment.getExternalStorageDirectory() + File.separator + "FOLDERNAME" + File.separator + "FILENAME.jpg";`

*   使用压缩方法保存。（根据[文档](http://developer.android.com/reference/android/graphics/Bitmap.html)保存图像的快捷方式）

`bitmap.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File(pathToStore))); // use 100 to make sure image quality is not reduced(Read the docs)`

注意：您需要写入（将来可能会读取）权限才能写入 SDCARD。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# c# - C#：执行 XSLT 时：进程无法访问文件

> ID：15943452
> 
> 赞同：0
> 
> 时间：2013-04-11T07:55:10.890
> 
> 标签：c#, xml, xslt, csc, system.xml

我正在使用 C# 实现 XSLT。

在我的工作目录中，我有data.xml file.xsl，我想在data.xml 上应用file.xsl 定义的XSLT，以获取data.html

**xslt.cs：**

```
using System;
using System.Xml.Xsl;

class XSLT__
{
    static void Main(string[] args)
    {

        XslCompiledTransform xslt = new XslCompiledTransform();
        xslt.Load(args[0]);
        xslt.Transform(args[1], args[1].Replace("xml","html"));
    } 
} 
```

我有一个包含以下命令的脚本：

```
calculations_script > data.xml
csc xslt.cs
xslt.exe file.xsl data.xml 
```

我正在即时生成 xslt.exe，因为可执行文件无法在该脚本将运行的每个平台上运行。

我总是收到以下错误：

**未处理的异常：System.IO.IOException：进程无法访问文件/my/folder/data.xml，因为它正被另一个进程使用**

我能做些什么？

# javascript - javascript正则表达式匹配排除空格和特殊字符

> ID：15943453
> 
> 赞同：0
> 
> 时间：2013-04-11T07:55:18.400
> 
> 标签：javascript, regex

我有一组受限关键字

在我的评论/消息发布块中不应允许我定义的受限词。

例如：关键字是“facebook”。

facebook, FaceBook, facebook, f*a*c*e*b*o*o*k, facebook, (facebook),'facebook' 这些词不应该允许发布。

任何在 java 脚本中使用正则表达式的想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:57:35.103

我不确定这是一个好主意，但您显示的所有单词都可以使用

```
var isFacebook = /f\W*a\W*c\W*e\W*b\W*o\W*o\W*k/i.test(str); 
```

请注意，您可以轻松地从单词中生成这样的模式，这使得使用字典进行扩展变得容易：

```
var r = new RegExp("facebook".split('').join('\\W*'), 'i'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:17:11.630

如果您的意思是要过滤给定的单词，该单词被单词边界包围，并且可能使用特殊字符分隔单词的字母：

```
var keyword="facebook",
    specialCharClass="[*-]",
    regex;
regex= new RegExp("\\b" + keyword.replace(/(?:)/g,specialCharClass+'?') + "\\b",'g');

"hi(facebo-ok)pie".replace(regex,"__________"); //returns "hi(__________)pie" 
```

但是，总有一些方法可以绕过单词过滤器（例如 faceb00k）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:05:39.457

试试这个正则表达式：

```
f[^a-zA-Z0-9]?a[^a-zA-Z0-9]?c[^a-zA-Z0-9]?e[^a-zA-Z0-9]?b[^a-zA-Z0-9]?o[^a-zA-Z0-9]?o[^a-zA-Z0-9]?k 
```

它将匹配以下内容：

```
facebook
f a c e b o o k
f-a-c-e-b-o-o-k
f*a*c*e*b*o*o*k 
```

但不会匹配以下内容：

```
facesbooks
ffaceebbookss 
```

您可以使用类似于提供的正则表达式来检测此类单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T08:18:01.530

如果您的目标是阻止而不是剥离，我会将其实施为两步过程。

1.  去掉所有非文本，将 1337 翻译成普通文本（比如 leet）等
2.  检查违禁词，如果有问题则阻止

这样，您就可以将您对阻止某个单词列表的担忧分开，并确保您正在检查实际文本。

# vb.net - 如果 Datagridview 中已经存在，则不要添加值

> ID：15943460
> 
> 赞同：1
> 
> 时间：2013-04-11T07:55:40.700
> 
> 标签：vb.net, sql-server-2008, vb.net-2010

我有一个“table_info”表，在添加新 ID、名称时有一列 ID、NAME。我想检查它是否已经存在。如果存在，则生成一个 MessageBox。

如何才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:48:46.623

实现这一目标的方法不止一种。如果您没有太多行，您可以检查数据源/集或实际的 datagridview 本身。如果是后者，那么您可以这样做：

如果满足条件，检查函数返回 true：

```
 Function IsInDatagridview(ByVal cell1 As String, ByVal cell2 As String, ByVal rowCell1_ID As Integer, ByVal rowCell2_ID As Integer, ByRef dgv As DataGridView)

    Dim isFound As Boolean = False

    For Each rw As DataGridViewRow In dgv.Rows
        If rw.Cells(rowCell1_ID ).Value.ToString = cell1 Then
            If rw.Cells(rowCell2_ID ).Value.ToString = cell2 Then

                isFound = True
                Return isFound

            End If
        End If
    Next

    Return isFound

End Function 
```

.

然后在满足条件时使用 Function 显示 MessageBox：

```
 If (IsInDatagridview("id", "name", 0, 1, DataGridView1)) Then

        ''// Code to display message.
        MsgBox("Record Exists!", MsgBoxStyle.Information)

    End If 
```

您可能需要将 ID 更改为整数，但我认为它应该可以工作。没有测试过。

好的，这将做的是遍历您指定的datagridview中的每一行'rw'，检查单元格列的字符串匹配'，如果找到匹配'isFound'设置为true，则返回'isFound'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-26T09:52:49.603

Ypu 必须将 use`rowCell_ID`作为字符串引用，因为它是 datagridivew 中的列名：

```
Function IsInDatagridview(ByVal cell1 As String, ByVal cell2 As String, ByVal rowCell1_ID As Integer, ByVal rowCell2_ID As Integer, ByRef dgv As DataGridView)

    Dim isFound As Boolean = False

    For Each rw As DataGridViewRow In dgv.Rows
        If rw.Cells("rowCell1_ID" ).Value.ToString = cell1 Then
            If rw.Cells("rowCell2_ID" ).Value.ToString = cell2 Then

                isFound = True
                Return isFound

            End If
        End If
    Next

    Return isFound

End Function 
```

# android - 如何访问页脚 xml 布局内的视图？安卓

> ID：15943462
> 
> 赞同：0
> 
> 时间：2013-04-11T07:55:45.730
> 
> 标签：android, xml, android-layout, footer

在我的代码中一切正常，直到我将此处显示的这段代码放在其他代码中的任何位置以访问 xml 页脚布局中的 TextView：

```
 TextView totalTextView = (TextView) footer.findViewById(R.id.total_text);
  totalTextView.setText(totalPrice); 
```

`total_text`是一个 TextView，它位于我用作页脚的 xml 文件中。

这个名为alternative.xml 的页脚xml 布局显示在ListView 的底部，其中填充了适配器使用不同的xml 布局填充的其他项目。这个页脚布局文件中唯一的东西是名为`total_text`.

如何在页脚 xml 布局中访问这个`TextView`调用？`total_text`

这是来自 Logcat 的堆栈跟踪：

```
FATAL EXCEPTION`: main
java.lang.RuntimeException: Unable to start activityComponentInfo{com.forever.scrollcheck/com.forever.scrollcheck.MainActivity}:
android.content.res.Resources$NotFoundException: String resource ID #0x543a8
    E/AndroidRuntime(8208): at adroid.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    E/AndroidRuntime(8208): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    E/AndroidRuntime(8208): at android.app.ActivityThread.access$600(ActivityThread.java:123)
    E/AndroidRuntime(8208): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    E/AndroidRuntime(8208): at android.os.Handler.dispatchMessage(Handler.java:99)
    E/AndroidRuntime(8208): at android.os.Looper.loop(Looper.java:137)
    E/AndroidRuntime(8208) :at android.app.ActivityThread.main(ActivityThread.java:4424)
    E/AndroidRuntime(8208): at java.lang.reflect.Method.invokeNative(Native Method)
    E/AndroidRuntime(8208): at java.lang.reflect.Method.invoke(Method.java:511)
    E/AndroidRuntime(8208): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
```

这是 Activity 类中的代码：

```
 listView = (ListView) findViewById(R.id.listView);

  View footer = getLayoutInflater().inflate(R.layout.alternative, null);

  TextView totalTextView = (TextView) footer.findViewById(R.id.total_text);
  totalTextView.setText(totalPrice);

  listView.addFooterView(footer); 

  MobileArrayAdapter adapter = new MobileArrayAdapter(this, R.layout.row_layout, ckbInfo);
  listView.setAdapter(adapter); 
```

ArrayAdapter 类中嵌套在 Activity 类中的代码：

```
 public class MobileArrayAdapter extends ArrayAdapter<CheckBoxInfo>{
      CheckBoxInfo[] objects;
      Context context;
      int textViewResourceId;

    public MobileArrayAdapter(Context context, int textViewResourceId,
    CheckBoxInfo[] objects) {
       super(context, textViewResourceId, objects);
       this.context = context;
       this.textViewResourceId = textViewResourceId;
       this.objects = objects;

       }

 @Override
 public View getView(final int position, View convertView, ViewGroup parent) {
 View row_layout_view = convertView;

 if ((row_layout_view == null)){

  LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  row_layout_view = inflater.inflate(R.layout.row_layout, null);
            }               
 //CheckBoxInfo item = objects.get(position);  // for arrayList
 CheckBoxInfo item = objects[position];

 if(item != null){

 TextView textView = (TextView) row_layout_view.findViewById(R.id.textView1);
 final CheckBox checkBox = (CheckBox) row_layout_view.findViewById(R.id.checkBox1);
 TextView priceTextView = (TextView) row_layout_view.findViewById(R.id.price1);

 checkBox.setOnClickListener(new OnClickListener() {

 @Override
    public void onClick(View arg0) {
    final boolean isChecked = checkBox.isChecked();
    if(isChecked==true){
 Toast.makeText(MainActivity.this,"box is checked for position " + position, Toast.LENGTH_SHORT).show();
 }else if(isChecked==false){
 Toast.makeText(MainActivity.this,"box is NOT checked for " + position, Toast.LENGTH_SHORT).show();
     }
   }
      });

   if(item !=null){
      textView.setText(item.checkBoxName);
      checkBox.setChecked(item.checkBoxState);
      priceTextView.setText(String.valueOf(item.price));
    }
      }
    return row_layout_view;
    }

  } 
```

编辑：这里要求的是来自alternative.xml的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical"
  android:gravity="center" >

  <TextView
    android:id="@+id/total_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="XXXXXX"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:09:20.320

根据堆栈跟踪，您似乎正在尝试调用`totalTextView.setText()`传递`int`参数。如果是这种情况，则参数被[视为资源 id](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)。你可能需要使用

```
totalTextView.setText(Integer.toString(totalPrice)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:13:29.217

这应该为您解决问题，基本上 TextViews setText 方法需要一个字符串。

```
totalTextView.setText(String.valueOf((totalPrice)); 
```

# html - 构建我的 AngularJS 应用程序

> ID：15943465
> 
> 赞同：33
> 
> 时间：2013-04-11T07:55:52.823
> 
> 标签：html, module, angularjs

我在使用 AngularJs 方面完全是新手，虽然我已经完成了教程，但我仍然有很多未解决的问题。我现在主要关心的是我应该如何将我的应用程序分成模块？

基本上我需要构建一个应用程序，它将充当各种应用程序的门户，每个应用程序都代表一个业务功能（有时彼此之间几乎没有关系）。

在本教程中，他们展示了如何创建一个具有多个视图的应用程序。我需要的是一个具有多个模块的应用程序，每个模块都有自己的视图（我可能也会有共享视图）。

有没有人开发过具有这种结构的应用程序？你能分享你的经验和你是如何组织事情的吗？

AngularJS Seed 项目（[https://github.com/angular/angular-seed](https://github.com/angular/angular-seed)）很好，但它并没有真正展示如何构建复杂的应用程序。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-18T08:30:58.830

**[编辑]** 我在我的博客上写了一篇文章来更详细地解释事情：

[在 sam-dev.net 上阅读它](http://www.sam-dev.net/2013/10/structuring-your-angularjs-application/) ，您现在可以[阅读第二部分](http://www.sam-dev.net/2014/02/structuring-your-angularjs-application-part-ii/)，以及代码示例。

我会回答我自己的问题。不是因为我认为这是最好的方法，而是因为这是我决定采用的方法。

这就是我将业务模块划分为文件夹的方式

*   应用程序
    *   业务模块
        *   控制器
            *   index.js
            *   第一个Ctrl.js
            *   第二个Ctrl.js
        *   指令
        *   服务
        *   意见
        *   过滤器
    *   另一个业务模块
    *   共享
    *   应用程序.js
    *   索引.html

每个模块都有自己的文件夹结构，用于控制器、指令等......

每个文件夹都有一个 index.js 文件，然后是其他文件来分隔每个控制器、每个指令等......

index.js 文件包含模块的定义。例如上面的 businessModule 的控制器：

```
angular.module('myCompany.businessModule.controllers', []); 
```

这里没有依赖关系，但可能有任何依赖关系。

然后在 firstCtrl.js 中，我可以重用该模块并将控制器添加到它：

```
angular.module('myCompany.businessModule.controllers').controller('firstCtrl',     

        function(){
}); 
```

然后 app.js 通过将它们添加到依赖项数组来聚合我想要用于我的应用程序的所有模块。

```
 angular.module('myApp', ['myCompany.businessModule', 'myCompany.anotherBusinessModule']); 
```

共享文件夹包含指令和其他不特定于业务模块并且可以在任何地方重用的东西。

同样，我不知道这是否是最好的方法，但它绝对适合我。也许它可以激励其他人。

**编辑**

由于 index.js 文件包含模块声明，因此必须在任何其他应用程序脚本之前在 html 页面中引用它们。为此，我使用了 ASP.NET MVC 4 的 IBundleOrderer：

```
 var bundle = new ScriptBundle("~/bundles/app") { Orderer = new AsIsBundleOrderer() };
 bundles.Add(bundle.IncludeDirectory("~/app", "*.js", true));

public class AsIsBundleOrderer : IBundleOrderer
{
    public IEnumerable<FileInfo> OrderFiles(BundleContext context, IEnumerable<FileInfo> files)
    {
        files = files.OrderBy(x => x.Name == "index.js" ? 0 : 1);
        return files;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T00:12:55.313

在大多数情况下，Sam 的方法似乎是可行的方法。当前的 Angular 文档将其设置为每个控制器、服务等的模块，但这与谷歌的 Miško 本人相矛盾。

在 Miško 最近的**[Angularjs 最佳实践](http://www.youtube.com/watch?feature=player_detailpage&v=ZhfUv0spHCY#t=2060s)**视频中，他展示了如何布局模块的结构以便于测试和轻松扩展。请记住，您构建模块的方式不应影响 Angular 应用程序中的性能。

从开发角度应用程序开始，出于上述原因，我建议使用最佳实践方法。您可能希望暂时制作自己的节点脚本来生成您的控制器等，其中可能包括您希望在其中创建控制器的模块和名称，然后自动生成您的控制器和正确的测试规范创建。

如果您想详细了解设置，这里有一篇关于根据您认为项目的发展方向设置项目**[的优秀文章。](http://codingsmackdown.tv/blog/2013/04/19/angularjs-modules-for-great-justice/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T09:39:20.357

你应该去 yeoman [https://github.com/yeoman/yeoman](https://github.com/yeoman/yeoman)和 yeoman 生成器结构：[https](https://github.com/yeoman/generator-angular) ://github.com/yeoman/generator-angular ，它成为设置应用程序比 angular-seed 更好的解决方案。对于不同的业务模块，你应该创建不同的应用程序并共享服务和指令

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-04T06:19:29.850

对于那些感兴趣的人，我制作了一个更符合 Misko 最佳实践的“模块化”版本的 Angular Seed： [https ://github.com/sanfordredlich/angular-brunch-seed-modularized](https://github.com/sanfordredlich/angular-brunch-seed-modularized)

它与早午餐一起设置，因此您可以非常快速地重新加载页面、测试运行等等。您可以快速开发，如果您遵循代码中的模式，您的应用程序应该可以很好地扩展。享受！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T02:52:50.833

我发现 yeoman 生成器采用的方法的缺点是它并没有真正与角度模块对齐，所以对我来说感觉不是很有凝聚力。因此，随着项目变得越来越大并且您正在处理特定组件，我发现自己在源代码树中翻来覆去。

我最近在[这里](https://github.com/angular-app/angular-app/tree/master/client)遇到了一种不同的方法。这种方法按角度模块对文件进行分组，让我感觉更有凝聚力。这样做的一个可能的缺点是您需要构建站点，而不能只是在适当的位置运行它。不过，该项目中的 grunt watch 任务对此有所帮助。

# xml - ActionScript 3.0 将 XML 格式转换为字符串

> ID：15943468
> 
> 赞同：0
> 
> 时间：2013-04-11T07:56:02.527
> 
> 标签：xml, actionscript

对不起，这里的新手。

这是我的代码：

```
var xmlLoader:URLLoader =  new URLLoader();
xmlLoader.load(new URLRequest("faculty_data.xml"));

xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);
                                               function xmlLoaded(event:Event):void
{   
var xml:XML = XML(event.target.data);

var result1:String = xml.faculty.(@Wordlookup.match(/Sanchez/)).college.toString();
trace(result1); 
trace output ---> <college>COB</college>
             ---> <college>COE</college> 
```

但我想要这样的输出：COB COE

希望有人可以帮助我...我确实尝试过谷歌...

抱歉，这是我的 XML

```
 <facultylist> 
    <faculty Wordlookup="Maria Rosario"> 
        <id>1</id> 
        <fullName>Maria Rosario</fullName> 
        <college>CED </college>
        <department>ELMD</department>
    </faculty> 
   <faculty Wordlookup="Liza Sanchez"> 
        <id>2</id>   
        <fullName>Lysa Sanchez</fullName>  
        <college>CED </college>
        <department>Marketing</department>
    </faculty> 
   <faculty Wordlookup="Melany Sanchez"> 
        <id>3</id>     
        <fullName>Melany Sanchez</fullName>
        <college>CLA </college>
        <department>Marketing</department>
    </faculty> 
</facultylist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:24:27.183

我不知道您的 XML 是什么样子，但我认为您还过滤了 @Wordlookup == "Sanchez"。

你能试试这个：

```
var xmlLoader:URLLoader =  new URLLoader();
xmlLoader.load(new URLRequest("faculty_data.xml"));

xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);

function xmlLoaded(event:Event):void
{   
    var xml:XML = XML(event.target.data);

    var lstXML:XMLList = xml.faculty.(@Wordlookup.match(/Sanchez/)).college;

    for each(var child:XML in lstXML)
    {
        trace(String(child));
    }
} 
```

# google-app-engine - 索引属性的上限

> ID：15943470
> 
> 赞同：1
> 
> 时间：2013-04-11T07:56:09.970
> 
> 标签：google-app-engine

我能找到的最新信息似乎是手动和自动的 5000 个索引。但是这些信息已经过时并且可能已经过时了。

[每个实体的索引属性的新上限](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/1fTct9AO1MY)

> 作为提醒，我们最近对单个实体可能拥有的索引属性值的总数添加了上限。这包括普通属性值（不包括 Text 和 Blob）和应用索引生成的索引行。目前上限为5000。

在这里，最新的信息[Google App Engine Datastore 索引上限](https://stackoverflow.com/questions/5131247/google-app-engine-datastore-index-cap)也可能已过时，因为最受好评的答案给出了一个现在有效的示例失败。

还是此限制仅适用于已配置的索引而不适用于属性索引？我知道这个限制适用于实体而不是种类。大多数情况下，我想知道 ListProperty 可以拥有的元素数量是否有硬性限制（只有常规属性索引）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:12:01.893

根据 AppEngine 数据存储区文档的[配额和限制](https://developers.google.com/appengine/docs/python/datastore/overview#Quotas_and_Limits)部分，当前上限为 20,000

# objective-c - 无法在 UINavigationController 中设置标题或按钮

> ID：15943473
> 
> 赞同：0
> 
> 时间：2013-04-11T07:56:22.327
> 
> 标签：objective-c, cocoa-touch

我从现在继承`UINavigationController`我想设置一个按钮和我的标题`ViewDidLoad`。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.toolbar.barStyle = UIBarStyleBlackOpaque;
    self.navigationBar.barStyle = UIBarStyleBlackOpaque;

    [self.navigationItem setTitle:@"TEST"];

    [self setToolbarHidden:YES];
} 
```

但我不工作，我认为这是我想念的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:19:39.593

For set title of UINavigationBar

use

```
self.title = @"TESTING"; 
```

and BarButton on NavigationBar

```
self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(showActionsheet)] autorelease]; 
```

# python - 如何通过 HTTP 在 Python 中接收文件？

> ID：15943475
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:56:25.733
> 
> 标签：python, http

我需要通过 HTTP 接收一些文件并保存它们。

**如果没有**Django 或 Flask 等框架，我如何在 Python 上做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:00:36.907

使用[urllib2](http://docs.python.org/2/library/urllib2.html)。例子：

```
import urllib2
f = urllib2.urlopen("http://download.thinkbroadband.com/5MB.zip")

with open("5MB.zip", "wb") as local_file:
    local_file.write(f.read()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:58:33.930

Django 或 Flask 用于服务 Web 应用程序。你只是想通过http下载一些东西？

如果你这样做了，试试 urllib2： http: [//docs.python.org/2/library/urllib2.html](http://docs.python.org/2/library/urllib2.html)

此处的示例代码：http: [//docs.python.org/2/howto/urllib2.html](http://docs.python.org/2/howto/urllib2.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:44:46.867

一个好方法是使用 urllib。确保正确解析 URL。

```
import urllib
f = urllib.urlretrieve('http://audio.com/2010/mp3/goodSong.mp3','a.mp3') 
```

# mercurial - 如何轻松退出变更集的一部分？

> ID：15943477
> 
> 赞同：1
> 
> 时间：2013-04-11T07:56:30.560
> 
> 标签：mercurial

我以前（即之前的几个变更集）提交了一个相当大的变更集，其中包含我想保留的好更改和一些我想撤消的更改。是的，无论如何我都不应该在一个变更集中打包这么多，但现在损害已经造成。

AFAIK，Mercurial 的退出命令只能在整个变更集上工作。我当然可以通过几个步骤弄清楚如何手动执行此操作，但我想知道：是否有一种简单的方法可以只反转*部分变更集？*

（如果重要的话，我想撤消的更改是文件删除。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:05:36.387

我应该在发布之前尝试过，但这对其他人也可能有用：

退出不会自动提交。所以对我有用的方法是运行 hg backout，然后简单地恢复我不想被改回来的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:21:29.747

根据条件（两种情况下“必须回退”和“必须保留”或文件模式的数量），您可以使用`hg backout`-I （包括掩码）或 -X （排除掩码）选项

*   `hg backout -r CSET -I FILE`**仅对**FILE进行回退更改
*   `hg backout -r CSET -X FILE`撤消**除**FILE之外的所有更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:24:09.180

如果要撤消文件删除，那么最好使用`hg revert`而不是`hg backout`：

```
hg status --change CSET --removed -n0 | xargs -0 hg revert --rev CSET^1 
```

# c# - WPF 故事板作为资源

> ID：15943479
> 
> 赞同：2
> 
> 时间：2013-04-11T07:56:35.047
> 
> 标签：c#, wpf, animation, storyboard

我正在尝试淡入然后淡出标签，它似乎适用于我的代码的某些部分，但不适用于其他部分..

所以，对于 xaml 我有：

```
<Page x:Class=""Gtec2.MindBeagle.ChoosePatient"   .. .bla bla bla>
    <Page.Resources>
        <Resources Dictionary>
            <Storyboard x:Key="fadeInStory" Storyboard.TargetName="noPatientsLabel" Storyboard.TargetProperty="Opacity">
                <DoubleAnimation From="1" To="0" Duration="0:0:0.300"/>
            </Storyboard>
            <!-- Other resources as imagesources, styles and stuff -->
        </Resources Dictionary>
     </Page.Resources>
     <Grid>
         <!-- A lot of things -->
         <!-- And the guy I want to fadeIn and Out-->
         <TextBlock Name="noPatientsLabel" TextAlignment="Center" VerticalAlignment="Center" Grid.Column="1" Grid.Row="1" IsHitTestVisible="False">
        No Patients found <LineBreak/>
        please check the filters
         </TextBlock>
         <!-- A lot of things -->
     </Grid>
</Page> 
```

对于背后的代码（C#），我有很多东西和一个像这样的方法：

```
public void FadeIn()
{
    Storyboard sb = FindResource("fadeInStory") as Storyboard;
    sb.Begin();
} 
```

IT 似乎在同一个 cs 文件中工作，但是当其他操作调用此方法以显示标签时，它会抱怨说“在 'Gtec2.MindBeagle.ChoosePatient' 的名称范围内找不到'noPatientsLabel' 名称。”

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T11:39:11.357

我终于创建了一个名为 AnimationHelper 的静态类，其中包含一些有用的功能。这里有一个例子

```
public static void FadeOut(UIElement target, int milliseconds)
    {
       DoubleAnimation da = new DoubleAnimation();
       da.From = target.Opacity;
       da.To = 0.0;
       da.Duration = TimeSpan.FromMilliseconds(milliseconds);
       da.AutoReverse = false;

       System.Windows.Media.Animation.Storyboard.SetTargetProperty(da, new PropertyPath("Opacity"));
       System.Windows.Media.Animation.Storyboard.SetTarget(da, target);

       System.Windows.Media.Animation.Storyboard sb = new System.Windows.Media.Animation.Storyboard();
       sb.Children.Add(da);

       sb.Begin();
   } 
```

淡入或其他什么都一样。您还可以返回情节提要（ public static `System.Windows.Media.Animation.Storyboard FadeIn (UIElement target) { ... }`.

如果这样做，您可以附加到已完成的事件:)

非常有用:)

# jquery - css("position") 在窗口调整大小时返回 undefined

> ID：15943481
> 
> 赞同：3
> 
> 时间：2013-04-11T07:56:45.750
> 
> 标签：jquery, css

我有以下代码来捕获浏览器调整大小事件。

```
 window.onresize = function(){
 var style = $('#button-selection').position();
 if(style == "relative"){
 $("#button-section").css("position"," ");
 }else if(style == "fixed"){
    $("#button-section").css("position","relative");
 }              
 };

 window.onresize = function(){
            var style = $('#button-selection').css('position');
            if(style == "relative"){
                $("#button-section").css("position"," ");
            }else if(style == "fixed"){
                $("#button-section").css("position","relative");
            }               
        }; 
```

样式返回未定义。当文档准备好时，我正在运行它。我尝试使用窗口就绪，但结果是一样的。上述两种方法都返回未定义！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:58:19.273

改变这个：

```
var style = $('#button-selection').position(); 
```

对此：

```
var style = $('#button-selection').css('position'); 
```

[`.position()`](http://api.jquery.com/position/)用于获取元素的坐标。

### 从文档：

> 获取匹配元素集中第一个元素相对于偏移父元素的当前坐标。

* * *

## 更新：

改为使用`$(window).resize()`。我在这里有一个测试用例场景：[**在这个小提琴**中。](http://jsfiddle.net/fty7C/)

```
$(window).resize(function () {
  var style = $('button').css('position');
  if (style == "relative") {
    alert('relative');
  } else if (style == "fixed") {
    alert('fixed');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:59:12.970

jQuery 文档说 .position() 是：

> 描述：获取匹配元素集合中第一个元素相对于偏移父元素的当前坐标。

你应该使用：

```
 var style = $('#button-selection').css('position'); 
```

# asp.net - 端点的 Sparql 查询

> ID：15943482
> 
> 赞同：0
> 
> 时间：2013-04-11T07:56:50.080
> 
> 标签：asp.net, c#-4.0, sparql

我想在端点运行以下 sparql 查询：

```
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
SELECT DISTINCT ?name WHERE{?person foaf:name ?name.FILTER regex(str(?name), "+ns+","i")} 
```

我在 Visual Studio 上使用 C# 进行编码，并将此查询发送到端点。它应该在不区分大小写的情况下检查结果，但是以这种方式编写查询会在 Visual Studio 中产生错误。我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:16:25.027

更新（基于作者澄清“i”是问题所在）：

您需要正确转义 " 符号，以便将其包含在 SPARQL 查询字符串中。目前 [i] 之前的 ["] 表示文本字符串的结尾。难怪您会收到错误消息。

请参阅MSDN：转义规则的[字符串文字：](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)

*   “转义为\”或使字符串成为C#逐字文字并转义为“”

* * *

查看 DotNetRdf 文档以[使用 SPARQL 示例进行查询](https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Querying%20with%20SPARQL)。

它展示了如何运行 SPARQL 查询（使用 DotNetRdf）以及如何将变量值注入查询（您尝试使用“+ns+”和“i”执行的操作）。

还：

*   [answers.semanticweb.com](http://answers.semanticweb.com)是询问语义网/RDF/SPARQL 问题的好地方
*   请描述您遇到的错误（Ren 在上面的评论中提出的问题）

# jquery - 如何使用 $.when 序列化 jQuery 请求

> ID：15943483
> 
> 赞同：0
> 
> 时间：2013-04-11T07:57:00.377
> 
> 标签：jquery, callback

我已经在 jQuery 中对此进行了编码。但是，回调没有按我想要的顺序调用（完成分支中的回调在 when 分支中的回调之前调用）。如果我将`internalOrderRequest`和定义`rejectionReasonRequest`为简单变量（instea od 函数），一切正常。有人可以建议吗？

```
 var self = this;
                    debugger;
                    var internalOrderRequest = function() {
                        $
                                .ajax({
                                    type : "GET",
                                    url : internalOrderServiceURL,
                                    contentType : "application/json; charset=utf-8",
                                    dataType : "json",
                                    success : self.retrieveInternalOrderSuccess,
                                    error : self.retrieveInternalOrderError
                                })
                    };

                    var rejectionReasonRequest = function() {

                        $
                                .ajax({
                                    type : "GET",
                                    url : rejectionReasonServiceURL,
                                    contentType : "application/json; charset=utf-8",
                                    dataType : "json",
                                    success : self.retrieveRejectionReasonSuccess,
                                    error : self.retrieveRejectionReasonError
                                })
                    }

                        $
                                .when(internalOrderRequest(),
                                        rejectionReasonRequest())
                                .done(
                                        function(result1, result2) {
                                            $
                                                    .ajax({
                                                        type : "GET",
                                                        url : salesOrderInfoServiceURL,
                                                        contentType : "application/json; charset=utf-8",
                                                        dataType : "json",
                                                        success : function(
                                                                oResult) {
                                                            self
                                                                    .retrieveServiceItemSuccess(oResult);
                                                        },
                                                        error : function(
                                                                oResult) {
                                                            self
                                                                    .retrieveServiceItemError(oResult);
                                                        },
                                                    })
                                        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:21:10.893

根据*jQuery.when()*文档， when() 期待延迟对象，但您在 internalOrderRequest() 和 rejectReasonRequest() 方法中不返回任何对象。来自*jQuery.ajax()*文档：

> 从 jQuery 1.5 开始，由 $.ajax() 返回的 jqXHR 对象实现了 Promise 接口，为它们提供了 Promise 的所有属性、方法和行为（有关更多信息，请参阅延迟对象）。

只需在您的方法中返回您的 ajax 请求，这应该可以工作。

# php - JSON 格式在 PHP 中丢失

> ID：15943488
> 
> 赞同：0
> 
> 时间：2013-04-11T07:57:07.147
> 
> 标签：php, json, actionscript-3

当我使用 将动作脚本 3 中的 json 数据发送到 php`URLVariables`时，json 字符串会发生变化，并且不能用作 php 中的 json。如何防止这种情况发生？或者如何解决？

来自 Flash 的跟踪（发送方法`POST`，变量名`myObject`）：

```
[{"data1":"value1","data2":"value2",...},{...},...] 
```

`echo $_POST['myObject']`来自 PHP：

```
[{\"data1\":\"value1\",\"data2\":\"value2\",...},{...},...] 
```

`echo json_decode($_POST['myObject'])`从 PHP 什么都不是，当`var_dump(json_decode($_POST['myObject'])`：

```
NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:59:11.177

服务器自动转义`POST`数据（我记得它是 中的一个选项`php.ini`）。要取消转义，使用`stripslashes`函数，并在解码字符串后；）

```
 json_decode(stripslashes($_POST['myObject'])); 
```

基于@therefromhere 的评论，一个更好的`magic_quotes_gpc`出发解决方案。如果您对服务器具有 root 访问权限，或者您有权在运行时设置 php 标志，则可以执行此操作。这里有一些帮助： http: [//php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

如果你想解决这个问题，基于@nl-x 的评论，不依赖于你的服务器配置：

```
$myObject = get_magic_quotes_gpc() ? //Examine: is magic quotes gpc on?
               stripslashes($_POST['myObject']) : //if true: unescape the string
               $_POST['myObject'];                //if false, do nothing
json_decode($myObject);
//When php 5.3 or earlier installed on server 
```

# android - Android 从 Onitemclick 侦听器上的数据库获取 ID

> ID：15943491
> 
> 赞同：0
> 
> 时间：2013-04-11T07:57:18.507
> 
> 标签：android, listview

嗨，我已经搜索了与此相关的各种问题，但我无法解决问题。

我是 Android 新手，我正在开发一个板球应用程序。在这里，我从数据库中显示一个包含 TeamId 和 TeamName 的团队。TeamId 是一个自动生成的值。当我单击特定团队时，我想从数据库中获取选定的 TeamId，并且我想将此 TeamID 作为捆绑包传递以处理下一个功能。但我没有从数据库中获取团队 ID。

下面是我目前正在尝试的代码，

```
 Intent intent = getIntent();
    teamName=(ArrayList<String>)getIntent().getSerializableExtra("Teams");
   ArrayAdapter<String> adapter=new ArrayAdapter<String>(getApplicationContext(), 

     android.R.layout.simple_list_item_1,teamName);
    teamList.setAdapter(adapter); 
```

ListView OnITEMCLICk

```
 teamList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int id,long position) {
            // TODO Auto-generated method stub
             textOfSelectedItem  =((TextView) v).getText().toString();
             Log.v("Clicked item id", " "+ id); 

            Toast.makeText(getApplicationContext(), "Clicked is " + id, Toast.LENGTH_SHORT).show();
            oncreated = false;
            Intent intent=new Intent(TeamOneActivity.this,TeamPlayersTeamOne.class);
            intent.putExtra("selected teamname", textOfSelectedItem);
            startActivity(intent);
            ///g.setSelectedTeamOne(textOfSelectedItem);
        }
    }); 
```

这是我的数据库

```
 public ArrayList<String> getTeamID() {
    // TODO Auto-generated method stub

    ArrayList<String> TeamList=new ArrayList<String>();         
    String selectQuery="SELECT * FROM " + TABLE_NAME;       
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor=db.rawQuery(selectQuery, null);       
    if(cursor.moveToFirst())
    {
        do
        {
            //String TeamName=cursor.getString(cursor.getColumnIndex("TeamName"));
            String TeamID=cursor.getString(cursor.getColumnIndex("TeamID"));
            //TeamList.add(TeamName);
            TeamList.add(TeamID);

        }while(cursor.moveToNext());        
        cursor.close();
    }
    return TeamList; 
} 
```

任何人都可以帮助如何从数据库中获取 ID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:35:48.507

当我查看您的代码时，我看到您将 的值传递给意图`textOfSelectedItem`，但是您的变量填充了您从 TextView 获得的文本，这绝不是您需要的 ID。您应该只编写一个函数来根据 teamName 从数据库中提取 teamID（如果这是您想要的）。因此，您可以使用类似的功能，而是将查询设置为 lile `"SELECT ID FROM"+TABLE_NAME+"WHERE teamName="+nameOfTeam;`，然后将该结果传递给您的新意图。

# java - 将同一张表的两列数据合并为一列

> ID：15943501
> 
> 赞同：1
> 
> 时间：2013-04-11T07:57:39.780
> 
> 标签：java, sql

我有一个表，sql 查询返回 2 个不同的列。但我希望这两列的结果在一列中，而且也只有唯一的结果。

如果我可以在 Java 代码中做一些事情以获得所需的结果，您也可以提出任何建议，即在从查询中获取结果之后，我可以通过任何 Java 代码操作来解决这个问题。

我也不想附加/连接两列的值。我只希望一列中的结果只有唯一值。

例子：

```
Column limitN    Column limitR
     3500            3500
     6500            6500
    10000            7500
    50000           50000 
```

所以在这种情况下，我想要所需的列值：

```
 3500
     6500
     7500
    10000
    50000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:31:31.747

您可以使用`UNION`查询来创建具有以下`DISTINCT`值的列：

```
SELECT limitN AS limitJoined
FROM  YOUR_TABLE
UNION
SELECT  limitR AS limitJoined
FROM  YOUR_TABLE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:59:56.283

怎么样

```
SELECT  DISTINCT SingleValue
FROM    (
         SELECT  col1 + ' ' + col2 AS SingleValue
         FROM    YourTable
         ) 
```

内部选择将您的两列连接在一起，外部选择仅获得唯一值。此连接假定值是 varchar / string，否则您需要将`CAST`它们连接到 varchars 才能连接

# c++ - 我们应该使用什么作为 std::strcpy 的第二个参数？

> ID：15943514
> 
> 赞同：0
> 
> 时间：2013-04-11T07:58:24.093
> 
> 标签：c++, pointers, std, strcpy

我有以下示例，取自此处：

```
// strings and c-strings
#include <iostream>
#include <cstring>
#include <string>

int main ()
{
  std::string str ("Please split this sentence into tokens");

  char * cstr = new char [str.length()+1];
  std::strcpy (cstr, str.c_str());

  // cstr now contains a c-string copy of str

  char * p = std::strtok (cstr," ");
  while (p!=0)
  {
    std::cout << p << '\n';
    p = strtok(NULL," ");
  }

  delete[] cstr;
  return 0;
} 
```

据我了解`str`是一个字符串，`str.c_str()`是一个指针，指向一个数组的第一个元素，其中包含的字符`str`作为其元素。然后使用`std::strcpy`我们将给定地址的值作为它的第二个参数，并将这个值分配给作为第一个参数 ( `cstr`) 给出的指针。

但是，我有以下示例，取自[此处](http://en.cppreference.com/w/cpp/string/byte/strcpy)：

```
#include <iostream>
#include <cstring>

int main()
{
    char *str = new char[100];
    std::strcpy(str, "I am string!");
    std::cout << str;
    delete[] str;
} 
```

现在作为第二个参数，我们有一个字符串（而不是第一个示例中的指向数组的指针）。

有人可以澄清这种不一致吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:00:13.267

```
std::strcpy(str, "I am string!"); 
```

> “我是弦！”

是字符串文字。真的是（在传递函数时`const char[13]`衰减到）。`const char*`

n3376 2.14.5/8

> **普通字符串文字**和 UTF-8 字符串文字**也称为窄字符串文字。窄字符串文字的类型为“n const char 数组”，其中 n 是字符串的大小，定义如下**，并且具有静态存储持续时间 (3.7)。

n3376 4.2/1 隐式数组到指针的转换。

> “NT 数组”或“T 的未知边界数组”类型的左值或右值可以转换为“指向 T 的指针”类型的纯右值。结果是指向数组第一个元素的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T08:01:34.930

> 使用 std::strcpy 时，我们将给定地址的值作为其第二个参数，并将该值分配给作为第一个参数 (cstr) 给出的指针。

```
char * strcpy ( char * destination, const char * source ); 
```

没有 strcpy 实际上读取源指向的每个字符并将它们写入目标，当它读取终止的空字符时它会停止。

在您的第二个示例中，您的源参数是一个字符串文字，其类型为 const char[]。此字符串可以衰减为 const char* 以传递给 strcpy。

字符串文字只不过是指向只读位置的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:00:09.833

> 现在作为第二个参数，我们有一个字符串（而不是第一个示例中的指向数组的指针）

在第二个示例中，您有一个 C 字符串，它是一个指向以 NUL 结尾的字符数组的指针。没有不一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T08:03:03.317

`char *strcpy( char *dest, const char *src );`需要 const char 的源指针，并将内存复制到 char 类型的目标指针。该函数从源复制字符串长度，直到找到以空字符结尾的源字符串。`"I am string!"`是一个 const char* const`，它是一个字符串文字，主要存储在只读标记的内存中。

# sql-server - 显示总计的详细记录

> ID：15943515
> 
> 赞同：1
> 
> 时间：2013-04-11T07:58:30.530
> 
> 标签：sql-server

我正在尝试查询以显示员工工资的详细信息以及总数。但是显示错误，因为它没有使用“分组依据”。有什么办法可以显示。我的查询是：

```
select EmpName,BasicSalary,GradePay,TA,DA,HRA,Gross,sum(Gross) from tblSalary 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:06:27.080

您可以在 SQL Server 2005 及更高版本中使用[OVER()](http://msdn.microsoft.com/en-nz/library/ms189461.aspx)窗口子句

```
select EmpName,BasicSalary,GradePay,TA,DA,HRA,Gross,sum(Gross) over () TotalGross
from tblSalary 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:01:07.777

```
Select EmpName,BasicSalary,GradePay,TA,DA,HRA,Gross,SUM(Gross) OVER() TOTAL from tblSalary 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:53:26.400

如果您使用 SQL Server 2012，您可以尝试使用`GROUPING SETS`子句执行此操作。

```
SELECT EmpName, SUM(Gross) 
FROM tblSalary
GROUP BY GROUPING SETS
    (
        ()
        ,(EmpName)
    ) 
```

它将添加一行总值。

# php - PHP：Curl 未调用 URL 并得到错误编号 =0

> ID：15943519
> 
> 赞同：0
> 
> 时间：2013-04-11T07:58:41.450
> 
> 标签：php, curl

我正在开发一个 SMS 应用程序。我必须调用一个链接，例如[http://sendsms.com/send.php?mobile=45455&msg=hello](http://sendsms.com/send.php?mobile=45455&msg=hello)来发送短信

所以我使用 CURL 概念来发送短信。

```
$ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    $options = array(
        CURLOPT_RETURNTRANSFER => true, // return web page
        CURLOPT_HEADER => false, // don't return headers
        CURLOPT_FOLLOWLOCATION => true, // follow redirects
        CURLOPT_ENCODING => "", // handle all encodings
        CURLOPT_AUTOREFERER => true, // set referer on redirect
        CURLOPT_CONNECTTIMEOUT => 15, // timeout on connect
        CURLOPT_TIMEOUT => 15, // timeout on response
        CURLOPT_MAXREDIRS => 10, // stop after 10 redirects
    );

    curl_setopt_array($ch, $options);
    $content = curl_exec($ch);
    $err = curl_errno($ch);
    $errmsg = curl_error($ch);
    $header = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);

    $output ="Error:".$err." ErrMsg:".$errmsg." Header:".  json_encode($header); 
```

问题是消息未发送。我检查了 SMS API 服务器。而且也没有收到请求。所以唯一的问题是 CURL 可能不会调用服务器。我试图打印错误消息，我得到了`curl_errno($ch) is 0`

请给我最好的方法来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:08:08.050

尝试通过 POST 发送请求：

```
curl_setopt($ch, CURLOPT_POST      ,1); 
```

# ios - 虚假的 UIApplicationDidBecomeActiveNotification 通知

> ID：15943520
> 
> 赞同：1
> 
> 时间：2013-04-11T07:58:46.493
> 
> 标签：ios, objective-c

我能够注册 UIApplicationDidBecomeActiveNotification 并正确接收事件。但有时我会在应用程序仍在运行时收到这些**通知**。我怀疑内存问题会触发应用程序辞职/恢复，但无法确认是这种情况（我曾同时看到内存警告）。为什么在应用程序运行时会调用这些方法（没有调用、没有锁定等）？

我正在注册这些通知：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appDidBecomeActiveNotif:) name:UIApplicationDidBecomeActiveNotification object:nil];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appWillResignActiveNotif:) name:UIApplicationWillResignActiveNotification object:nil]; 
```

（这在使用 dispatch_once 的单例构造函数中完成一次）

对应的功能：

```
-(void)appDidBecomeActiveNotif:(NSNotification*)notif
{
  NSLog(@"appDidBecomeActiveNotif called");
}

-(void)appWillResignActiveNotif:(NSNotification*)notif
{   
  NSLog(@"appWillResignActiveNotif called");
} 
```

以下是一些日志：

```
2013-04-11 09:28:11.401 App[1499:907] appWillResignActiveNotif
2013-04-11 09:28:13.505 App[1499:907] appDidBecomeActiveNotif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:16:08.267

这就是文档对这些通知的描述：

> **UIApplicationDidBecomeActiveNotification** 当应用程序激活时发布。应用程序在接收事件时处于活动状态。一个活跃的应用程序可以说是有焦点的。它在启动后获得焦点，在弹出覆盖窗口或设备锁定时失去焦点，并在设备解锁时获得焦点。
> 
> **UIApplicationWillResignActiveNotification** 当应用程序不再处于活动状态并失去焦点时发布。应用程序在接收事件时处于活动状态。一个活跃的应用程序可以说是有焦点的。它在启动后获得焦点，在弹出覆盖窗口或设备锁定时失去焦点，并在设备解锁时获得焦点。

那么，是否有任何覆盖窗口弹出，或者您是否锁定了设备或类似的东西？

另外，为什么不使用 AppDelegate 中的方法来监听这些事件呢？

**编辑**

问题似乎在于 MapKit 的弹出窗口要求用户使用它的位置。

# python - 根据文件名而不是数据类型读取文件

> ID：15943521
> 
> 赞同：-4
> 
> 时间：2013-04-11T07:58:51.313
> 
> 标签：python, file, names

我对python很陌生。我想根据文件名而不是数据类型读取文件。假设我在一个文件夹中有 Hello.txt_1、Hello.txt_2、Hello.txt_3，这些文件是由外部代码自动创建的，Hello.txt_3 是最新文件。现在，我想阅读最新创建的文件 Hello.txt_3 并检查其内容。如何在 python 中完成？我已经找到了具有通用数据类型的文件，但没有找到通用文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:04:20.170

使用 glob 执行通配符匹配。以下示例将查找所有按您声明命名的文件，`last_file`并将包含按创建时间（或者`None`如果未找到文件）最新的名称。

```
import glob
import os

last_file = None
time=0
for i in glob.glob("Hello.txt_*"):
    if os.path.getctime(i) > time: 
        last_file = i 
```

PS：这个问题是在非常初学者的水平，但是应该很容易通过谷歌搜索解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:52:34.053

根据我对问题的理解，您可能想忽略文件类型，因为您不能依赖它们来告诉您您想知道的内容。如果文件类型包含数字/字母数字，“排序”将按相反顺序对其进行排序。然后你可以简单地阅读第一个：

```
#!/usr/bin/python
from os import listdir
from os.path import isfile, join

#this is where you declare you directory
directory_2_look = '/var/tmp/lee/'

#This creates a list of the contents of your directory
files = [ f for f in listdir(directory_2_look) if isfile(join(directory_2_look,f)) ]

#this sorts the files for you in reverse order
files = sorted(files, reverse=True)
print files[0]

#this allows you to read the last file and print it out. If you want to write to it simply change the 'r'
file_to_read = open(join(directory_2_look,files[0]), 'r')

print file_to_read.read() 
```

结果看起来有点像这样：

> ['script.py', 'file.txt_99', 'file.txt_4', 'file.txt_3', 'file.txt_22', 'file.txt_21', 'file.txt_2', 'file.txt_1', ' file.txt_0'] script.py
> 
> # !/usr/bin/python from os import listdir from os.path import isfile, join directory_2_look = '/var/tmp/lee/' files = [ f for f in
> 
> listdir(directory_2_look) if isfile(join(directory_2_look,f)) ] print sorted(files, reverse=True) files = sorted(files, reverse=True) print files[0] file_to_read = open(join(directory_2_look,files[0 ]), 'r')
> 
> 打印 file_to_read.read()

# sql - 需要帮助从 SQL 查询中创建函数

> ID：15943523
> 
> 赞同：2
> 
> 时间：2013-04-11T07:59:05.620
> 
> 标签：sql, sql-server, sql-server-2008

我对每个国家都使用下面的查询。我如何制作一个函数来生成传递给它的每个国家/地区的平均值？

```
-- pepsi drink database
select avg(monthly_sales)
from world_sales
where product name like '%juice%'
and country = 'germany' -- this can be japan, usa, china etc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:00:49.057

```
create function dbo.getAverageMonthlySaleForCountry(@country varchar(100))
returns decimal(20,4)
as
begin
  return (
    select avg(monthly_sales)
    from world_sales
    where product name like '%juice%'
    and country = @country
  )
end
GO 
```

但是请注意，像这样的 SCALAR 函数在性能方面的用途有限（阅读：它对性能*非常不利*）。小心使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:01:02.537

它没有回答您的直接问题，但为什么不按国家/地区分组？

```
select avg(monthly_sales), country
from world_sales
where product name like '%juice%' group by country; 
```

# java - 将选定的文本作为图像复制到 java swing 应用程序

> ID：15943527
> 
> 赞同：1
> 
> 时间：2013-04-11T07:59:20.497
> 
> 标签：java, swing, outlook, clipboard

我需要将选定的文本从 Outlook (2010) 复制到 java swing 应用程序。它不会在该图像上显示内容，而是创建一个黑色图像。

```
final BufferedImage image = (BufferedImage) clipboard.getData(DataFlavor.imageFlavor); 
```

上面的代码适用于图像。但是，当我从 Outlook 2010 中选择文本（Swings 将其视为图像）或者如果我从 Outlook 中选择文本 + 图像时，它会显示文本部分的黑屏（如果图像也在剪贴板中，则打印效果很好）

# deployment - 部署 kmdf 驱动程序的问题

> ID：15943530
> 
> 赞同：1
> 
> 时间：2013-04-11T07:59:31.887
> 
> 标签：deployment, driver, kmdf

我一直在尝试使用 Visual Studio 2012 工具编译和部署 Microsoft 提供的示例键盘过滤器。我通过串行电缆设置了目标计算机（带有串行电缆的虚拟盒似乎正在工作，因为设置过程设法在目标计算机上安装了所有东西）。

示例代码编译得很好，但是当我尝试部署它时，它首先告诉我它正在部署，需要一段时间，然后声明它失败并出现以下错误：

错误：驱动程序部署任务失败：默认驱动程序包安装任务（可能重新启动）

有谁知道可能出了什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:35:10.297

我不知道如何解决这个问题。但我猜你的部署设置是在驱动程序包的包属性页面中：

在**Package Property Pages**窗口的左窗格中， **Configuration Properties > Driver Install > Deployment**，您在右窗格的**Driver Install Options**部分中选择了**Install and Verify 。**如果我点击，那么您应该选择**硬件 ID 驱动程序更新**并输入您的驱动程序的硬件 ID。您可以在 vs2012 生成的驱动程序的 inf 文件中找到它。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T13:39:28.007

您可能会发现**此** [http://msdn.microsoft.com/en-us/library/hh439665(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/hh439665(v=vs.85).aspx)对您很有用，尤其是该站点的**部署和安装驱动程序**部分。****

# java - 在 CentOS 上启动 Pentaho Spoon 时出现 JDK 致命错误

> ID：15943531
> 
> 赞同：2
> 
> 时间：2013-04-11T07:59:35.173
> 
> 标签：java, pentaho

我刚刚安装了一个centOS并在上面放了pentaho。

当我启动spoon.sh（PDI 4.4）时出现此错误

> /home/xxx/Bureau/data-integration WARN 10-04 18:14:46,513 - 无法从“file:///home/joris/Bureau/data-integration/plugins/pentaho-big-data- 加载 Hadoop 配置”插件/hadoop 配置/mapr”。有关更多信息，请启用调试日志记录。INFO 10-04 18:14:46,685 - Pentaho 数据集成 - Connexion... file:///tmp/spoon_c318b172-a1f9-11e2-a78b-efa532dd0cb0.log
> 
> # Java 运行时环境检测到致命错误： # SIGSEGV (0xb) at pc=0x000000320480e00c, pid=3295, tid=140101661157120 # JRE 版本：6.0_41-b02 Java VM: Java HotSpot(TM) 64-Bit Server VM（20.14-b01 混合模式 linux-amd64 压缩 oops）有问题的帧：C [ld-linux-x86-64.so.2+0xe00c]
> 
> 包含更多信息的错误报告文件保存为：/home/xxx/Bureau/data-integration/hs_err_pid3295.log # 如果您想提交错误报告，请访问：http: [//java.sun.com/webapps /bugreport/crash.jsp](http://java.sun.com/webapps/bugreport/crash.jsp) ./spoon.sh: line 163: 3295 Abandon (core dumped) "$_PENTAHO_JAVA" $OPT $STARTUP -lib $LIBPATH "${1+$@}" [xxx@xxx-pentaho data-集成]$ java -version java version "1.6.0_41" Java(TM) SE Runtime Environment (build 1.6.0_41-b02) Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01, mixed mode) [xxx@ xxx-pentaho 数据集成]$ clear
> 
> [xxx@xxx-pentaho data-integration]$ ./spoon.sh -v /home/xxx/Bureau/data-integration WARN 10-04 18:22:28,889 - 无法从“file:/// 加载 Hadoop 配置” home/xxx/Bureau/data-integration/plugins/pentaho-big-data-plugin/hadoop-configurations/mapr”。有关更多信息，请启用调试日志记录。INFO 10-04 18:22:28,904 - Pentaho 数据集成 - Connexion... file:///tmp/spoon_d69c761f-a1fa-11e2-81c8-bb0cb3f99e89.log # Java 运行时环境检测到致命错误：# SIGSEGV (0xb) at pc=0x000000320480e00c, pid=3393, tid=139688929707776 # JRE version: 6.0_41-b02 Java VM: Java HotSpot(TM) 64-Bit Server VM (20.14-b01 mixed mode linux-amd64 compressed oops) 有问题frame: C [ld-linux-x86-64.so.2+0xe00c] # 一个包含更多信息的错误报告文件保存为： [http://java.sun.com/webapps/bugreport/crash.jsp](http://java.sun.com/webapps/bugreport/crash.jsp) ./spoon.sh: line 163: 3393 Abandon (core dumped) "$_PENTAHO_JAVA" $OPT $STARTUP -lib $LIBPATH "${1+$ @}"

我尝试更改 jdk，我尝试了不同的 Sun JDK 和 Open JDK，但我仍然遇到这个问题我尝试了一些我在互联网上找到的东西，但它不起作用（下面的命令）

```
ulimit -c unlimited
./spoon.sh -XX:-UseCompressedOops 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-15T16:18:35.777

我知道这是事后的事，但我刚刚在使用 Java 7 的 centos 上遇到了这个问题，并通过执行以下操作来修复它：

禁用 ~/.kettle/.spoonrc 中的欢迎屏幕

ShowWelcomePageOnStartup=N

来源：[http ://forums.pentaho.com/archive/index.php/t-81923.html](http://forums.pentaho.com/archive/index.php/t-81923.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T02:33:18.053

基本上，只需使用以下命令启动您的spoon.sh：

```
$ export OPT="-Dorg.eclipse.swt.browser.XULRunnerPath=/dev/null" ./spoon.sh 
```

[这里的解决方案示例](https://jira.talendforge.org/browse/TDI-24139)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:03:39.557

在对 JDK 进行了多次更改后，我（再次）安装了 sun jdk 1.6 64bit 并定义了 java 路径

```
export JAVA_HOME="/usr/java/jdk1.6.0_43" 
```

现在它起作用了。我不再有致命错误，但现在我在启动 BIServer 时遇到了一些错误

**编辑：通过将 chmod -R 777 放在文件数据集成上解决了问题

新问题：当我以 root 用户（超级用户）启动它时，spoon.sh 工作，但我仍然遇到普通用户的问题另一个问题：即使我以 root 启动它，当我关闭它时它再次给我致命错误

# android - 在极少数情况下出现“android.database.sqlite.SQLiteException：没有这样的表”错误

> ID：15943534
> 
> 赞同：14
> 
> 时间：2013-04-11T07:59:42.730
> 
> 标签：android, android-widget, android-sqlite

我目前在应用商店中有一个应用程序可用，但有一种类型的错误报告我似乎无法完全弄清楚。我的应用程序使用内部 sqlite 数据库，但在某些设备上（当然不是大多数设备）有时会出现以下错误：

> android.database.sqlite.SQLiteException: no such table: image_data (code 1): , while compile: SELECT Min(stamp) FROM image_data WHERE category = 'Astronomy' AND stamp >= 1357426800 and coalesce(title_nl, '') = ' '

我确信这个表存在并且我确信这个查询是正确的。我知道这个错误只发生在应用程序的小部件和 AlarmManager 触发的 BroadcastReceiver 中（应用程序偶尔会尝试下载新条目，因为它是当天应用程序的图片）。

我认为这与我在访问数据库时所处的上下文有关。我有一个名为 AppContextHelper 的类，它扩展了 Application 并有一个静态成员用于存储上下文。访问数据库时始终使用该上下文。

我的问题：在某些情况下，在获取小部件中的数据库或上述由 AlarmManager 触发的 BroadcastReceiver 时，上下文是否无效，在这种情况下，我应该使用提供的上下文来支持“应用程序”上下文？如果是这样，为什么该上下文无效或更好，提供的是哪个上下文？

提前致谢！

根据要求，导致问题的代码再次仅在某些设备上且仅在小部件或 AlarmManager 类中。我将在 AlarmManager 类中发布导致错误的代码（即行数最少的代码）

1.  初始化警报的代码：

    ```
     Intent myIntent = new Intent(AppContextHelper.getContext(), ApodDownloader.class);
        mPendingIntent = PendingIntent.getBroadcast(AppContextHelper.getContext(), 0, myIntent, 0);

        AlarmManager alarmManager = (AlarmManager)AppContextHelper.getContext().getSystemService(Context.ALARM_SERVICE);
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());

        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis() + 10000, AlarmManager.INTERVAL_HOUR, mPendingIntent); 
    ```

2.  AppContextHelper.java

    ```
    public class AppContextHelper extends Application {

        private static Context mContext;

        @Override
        public void onCreate() {
            super.onCreate();
            mContext = this;
        }

        public static Context getContext(){
            return mContext;
        }
    } 
    ```

3.  （部分）ApodDownloader.java（这包含抛出异常的行）

    ```
    @Override
    public void onReceive(Context arg0, Intent arg1) {
        (new AsyncTaskThreadPool<Integer, Void, Boolean>() {

            @Override
            protected Boolean doInBackground(Integer... params) {
                Helpers.logMessage("Checking new entries.");

                SQLiteDatabase db = FrescoDatabase.acquireReadableDatabase(AppContextHelper.getContext());
                try {
                    >>> THIS LINE THROWS THE EXCEPTION <<<
                    maxStamp = Helpers.executeScalarLong(db, "SELECT Min(stamp) FROM image_data WHERE category = 'Astronomy' AND stamp >= 1357426800 and coalesce(title_nl, '') = ''");

                    [...]
                } finally {
                    FrescoDatabase.releaseReadableDatabase();
                }

                [...] more code

            }
            [...] onPostExecute
        }).executeOnExecutor(AsyncTaskThreadPool.THREAD_POOL_EXECUTOR, 0); 
    ```

4.  FrescoDatabase.java 数据库由应用程序在启动时自动生成，此代码在触发异常的设备上也有效。我不能足够强调数据库存在于有问题的设备上，因为除了小部件和 AlarmManager 的 BroadcastReceiver 之外，应用程序运行完美，所以请不要告诉我数据库未正确初始化:)

    ```
    public class FrescoDatabase extends SQLiteOpenHelper {

        public static final String[] OBSOLETE_DATABASE_FILE_NAMES = new String[] { "Fresco.v1.sqlite", "Fresco.v2.sqlite", "Fresco.v3.sqlite", "Fresco.v4.sqlite", "Fresco.v5.sqlite" };
        public static final String DATABASE_FILE_NAME = "Fresco.v6.sqlite";
        public  static final int DATABASE_FILE_SIZE = 15302656;
        private static final int DATABASE_VERSION = 7;

        private static final Lock writeLock = new ReentrantLock();
        private static SQLiteDatabase currentDB = null;

        public static final SQLiteDatabase acquireWritableDatabase(Context c) {
            writeLock.lock();
            currentDB = new FrescoDatabase(c).getWritableDatabase();
            return currentDB;
        }

        public static final void releaseWritableDatabase() {
            currentDB.close();
            currentDB = null;
            writeLock.unlock();
        }

        public static final SQLiteDatabase acquireReadableDatabase(Context c) {
            writeLock.lock();
            currentDB = new FrescoDatabase(c).getReadableDatabase();
            return currentDB;
        }

        public static final void releaseReadableDatabase() {
            currentDB.close();
            currentDB = null;
            writeLock.unlock();
        }

        private FrescoDatabase(Context context) {
            super(context, InitializeFrescoDatabaseTask.getDatabaseFileName(context), null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // database is automatically generated, this should not be called
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    } 
    ```

5.  （部分）Helpers.java

    ```
     public class Helpers {
            [...]
            public static long executeScalarLong(SQLiteDatabase db, String query) {
                return executeScalarLong(db, query, new String[] { });
            }
            public static long executeScalarLong(SQLiteDatabase db, String query, String... parameters) {
                (line 85, see stack trace down below) Cursor cursor = db.rawQuery(query, parameters);
                try {
                    cursor.moveToNext();
                    long val = cursor.getLong(0);
                    return val;
                }   
                catch (Exception e) {
                    ;
                }
                finally {
                    cursor.close();
                }
                return -1;
            }
        } 
    ```

异常日志（根据要求）：

```
 java.lang.RuntimeException: An error occured while executing doInBackground()
                at nl.tagpulse.utils.AsyncTaskThreadPool$3.done(AsyncTaskThreadPool.java:329)
                at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
                at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
                at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
                at java.util.concurrent.FutureTask.run(FutureTask.java:137)
                at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
                at java.lang.Thread.run(Thread.java:856)
                Caused by: android.database.sqlite.SQLiteException: no such table: image_data (code 1): , while compiling: SELECT Min(stamp) FROM image_data WHERE category = 'Astronomy' AND stamp >= 1357426800 and coalesce(title_nl, '') = ''
                at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
                at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:1012)
                at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:623)
                at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
                at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
                at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
                at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
                at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
                at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
                at nl.tagpulse.fresco.other.Helpers.executeScalarLong(Helpers.java:85)
                at nl.tagpulse.fresco.other.Helpers.executeScalarLong(Helpers.java:82)
                at nl.tagpulse.fresco.business.FrescoDatabase.retrieveNewEntries(FrescoDatabase.java:64)
                at nl.tagpulse.fresco.business.ApodDownloader$1.doInBackground(ApodDownloader.java:192)
                at nl.tagpulse.fresco.business.ApodDownloader$1.doInBackground(ApodDownloader.java:1)
                at nl.tagpulse.utils.AsyncTaskThreadPool$2.call(AsyncTaskThreadPool.java:317)
                at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
                ... 4 more 
```

我在 Helpers.java 块中添加了第 85 行标记。

希望这可以帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:10:03.710

这是正在发生的事情：

ApodDownloader 是一个 BroadcastReceiver，在它的 onReceive() 中，你启动了某种不允许的 AsyncTask。该文档指出：

> BroadcastReceiver 对象仅在调用 onReceive(Context, Intent) 期间有效。一旦您的代码从此函数返回，系统就会认为该对象已完成且不再处于活动状态。
> 
> 这对你在 onReceive(Context, Intent) 实现中可以做的事情有重要的影响：任何需要异步操作的东西都不可用，因为你需要从函数返回来处理异步操作，但此时 BroadcastReceiver 是不再活动，因此系统可以在异步操作完成之前自由地终止其进程。
> 
> [http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle](http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle)

当进程被杀死时，应用程序上下文不再可用。您仍然可以访问 AppContextHelper.getContext() 但这将是一个新加载的类，因为旧的类在消除进程时被杀死。换句话说，返回的上下文将为空。这仅在极少数情况下才会发生，即 Android 实际上会杀死一个在我的经验中并不常见的进程。

如果您的 AppContextHelper 提供的上下文尚未初始化，那么您的 InitializeFrescoDatabaseTask.getDatabaseFileName(context) 调用将返回一个空字符串，它自然会打开错误的数据库。因为您在 FrescoDatabase 类的 onCreate() 中什么都不做，所以数据库没有正确初始化并且找不到表。但是，即使您创建了表，它也会是错误的数据库，尽管崩溃已经消失，但它不会显示任何数据。

为了防止这种情况发生，您需要在 onReceive() 正在运行的同一线程中完成所有工作，或者如果这需要太长时间启动服务来完成繁重的工作。

我在分析代码时注意到的另一件事是，您在创建警报时使用应用程序上下文来创建意图（new Intent(AppContextHelper.getContext(), ApodDownloader.class);）。执行此操作时，您需要设置 FLAG_ACTIVITY_NEW_TASK 或者您可能会收到“android.util.AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是您想要的吗？” 这可能会或可能不会使应用程序崩溃。

# android - 在 Android 中使用不同语言的大型文本文件

> ID：15943540
> 
> 赞同：1
> 
> 时间：2013-04-11T08:00:08.703
> 
> 标签：android, multilingual

在我正在构建的应用程序中，我使用了多种语言。通过添加新文件夹（例如：values-fr）并在其中添加新的 strings.xml 文件，可以轻松地将不同的语言添加到应用程序中。但是我需要添加相当大的文本文件（完整的文章）。这些文章也用不同的语言编写。将它们添加到我的应用程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:21:25.807

我会考虑使用`res/raw-<qualifiers>`作为资产的替代品。该`raw`文件夹可以存储任意文件 - 你猜对了 - 原始形式。例如，用法语和英语编写的“Hello World”文章将存储在：

*   `res/raw-fr`
*   `res/raw-en`

然后可以通过调用[`openRawResource(int id)`](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource%28int%29)资源对象来打开原始资源，类似于它对其他资源（如可绘制对象、字符串等）的工作方式。框架生成的 id 将采用熟悉的格式`R.raw.filename`（没有文件扩展名）。

使用这种方法的好处是您可以充分利用 Android 的本地化系统，这意味着作为开发人员您基本上不必担心任何这些。您还可以轻松添加更多限定符以进一步过滤设备特性（例如屏幕尺寸、密度、平台版本等 -[请参阅此处以获取完整概述](http://developer.android.com/guide/topics/resources/providing-resources.html#table2)）。缺点是它在原始文件名/扩展名方面施加了一些限制，并且不支持正确的文件夹/文件层次结构。

“更好”的方法（/raw vs /assets）可能取决于您项目的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:10:40.620

我可能会使用资产——也就是说，创建*assets/data/fr/*并将*fr*文件存储在那里。请注意，资产需要显式提取——这可能很好，因为您可以只安装一组文章来节省内存。

另一种可能性是将所有内容放在http服务器上，从而使保存和访问文章成为别人的问题:)。

顺便说一句，如果您的文件真的很大，您将不得不在没有它们的情况下安装应用程序，然后再下载文章。（apk 大小有限制。）

# javascript - 我正在尝试在我的页面上添加 nivo 滑块，但它与灯箱冲突。有什么办法可以避免这种冲突吗？

> ID：15943542
> 
> 赞同：0
> 
> 时间：2013-04-11T08:00:10.567
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试在我的页面上添加 nivo 滑块，但它与灯箱冲突。它给出了对象不支持的“$”错误。有什么办法可以避免这种冲突吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:00:36.283

您可以使用[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)jQuery 放弃对`$`变量的控制。

包含 jQuery 后，调用 jQuery，`jQuery.noConflict();`然后在您想使用 jQuery 的任何时候使用，`jQuery`而不是`$`这样：

```
$("div p").hide(); 
```

变成：

```
jQuery("div p").hide(); 
```

我上面链接的页面有更多示例。

# php - 我在使用 trransperent 上传 png 图像时得到黑色背景图像

> ID：15943545
> 
> 赞同：0
> 
> 时间：2013-04-11T08:00:18.390
> 
> 标签：php, image-processing, gd

我在上传透明的png图像时得到黑色背景图像。你能帮我吗？我的代码粘贴在这里

```
$temp_image_path = $_FILES['img_recipe']['tmp_name'];
$temp_image_name = $_FILES['img_recipe']['name'];

$img_arr = getimagesize( $temp_image_path );
$ext = '';

switch($img_arr['mime'])
{
case 'image/gif': $ext = 'gif';  break;

case 'image/png': $ext = 'png';  break;

case 'image/jpeg': $ext = 'jpg'; break;

case 'image/pjpeg': $ext = 'jpg'; break;

case 'image/x-png': $ext = 'png'; break;

default: return false;
}

$temp_image_name = genToken( $len = 32, $md5 = true );
$temp_image_name .= "." . $ext;

$uploaded_image_path = UPLOADED_IMAGE_DESTINATION . $temp_image_name;

move_uploaded_file( $temp_image_path, $uploaded_image_path );

$recipe_image_path = RECIPE_IMAGE_DESTINATION . $temp_image_name;
$recipe_thumb_image_path = RECIPE_THUMB_IMAGE_DESTINATION . $temp_image_name;

$result_recipe = generate_image_resize( $uploaded_image_path, $recipe_image_path, RECIPE_MAX_WIDTH, RECIPE_MAX_HEIGHT );
$result_recipe_thumb = generate_image_resize( $uploaded_image_path, $recipe_thumb_image_path, RECIPE_THUMB_MAX_WIDTH, RECIPE_THUMB_MAX_HEIGHT );

unlink($uploaded_image_path); 
```

函数 generate_image_resize( $source_image_path, $thumbnail_image_path, $width, $height ) { list( $source_image_width, $source_image_height, $source_image_type ) = getimagesize( $source_image_path );

```
 switch ( $source_image_type )
            {
                case IMAGETYPE_GIF:
                $source_gd_image = imagecreatefromgif( $source_image_path );
                break;

                case IMAGETYPE_JPEG:
                $source_gd_image = imagecreatefromjpeg( $source_image_path );
                break;

                case IMAGETYPE_PNG:
                $source_gd_image = imagecreatefrompng( $source_image_path );
                break;
            }

            if ( $source_gd_image === false ){  return false;   }

            $thumbnail_image_width = $width;
            $thumbnail_image_height = $height;

            $source_aspect_ratio = $source_image_width / $source_image_height;
            $thumbnail_aspect_ratio = $thumbnail_image_width / $thumbnail_image_height;             
            if ( $source_image_width <= $thumbnail_image_width && $source_image_height <= $thumbnail_image_height )
            {   $thumbnail_image_width = $source_image_width;   $thumbnail_image_height = $source_image_height; }
            elseif ( $thumbnail_aspect_ratio > $source_aspect_ratio )
            {   $thumbnail_image_width = ( int ) ( $thumbnail_image_height * $source_aspect_ratio );    }
            else
            {   $thumbnail_image_height = ( int ) ( $thumbnail_image_width / $source_aspect_ratio );    }               
            $thumbnail_gd_image = imagecreatetruecolor( $thumbnail_image_width, $thumbnail_image_height );              
            imagecopyresampled( $thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0, $thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height );                
            imagejpeg( $thumbnail_gd_image, $thumbnail_image_path, 90 );                
            imagedestroy( $source_gd_image );               
            imagedestroy( $thumbnail_gd_image );

            return true;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:08:25.920

让我们调用源图像 $si，缩略图 $ti（这么长......）

在加载的图像中启用透明度：

```
imagealphablending($si, true); 
```

获取加载图像的原始透明颜色：

```
$tc = imagecolortransparent($si);

$tc = ($tc != -1)? $tc = imagecolorsforindex($si, $tc):'hopeless'; 
```

这将创建一个黑色：

```
$ti = imagecreatetruecolor( $ti_width, $ti_height ); 
```

然后在创建之后：

```
if($tc !='hopeless'){ // do we have transparent color?
     // calculate new transparent color
     $tn = imagecolorallocate( $ti, $tc['red'], $tc['green'],$tc['blue']);
     // we need it as index from now on
     $tn = imagecolortransparent( $ti, $tn );
     // fill target with transparent color
     imagefill( $ti, 0,0, $tn);
     // assign the transparent color in target
     imagecolortransparent( $ti, $tn );
} 
```

现在重新采样可能会改变原始图像上的颜色索引。所以文物会存在。

```
imagecopyresampled($ti,$si, 0,0,0,0,$ti_width,$ti_height,$si_width,$si_height ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T10:54:52.043

在这两行之间添加图像透明度代码：

$thumbnail_gd_image = imagecreatetruecolor($thumbnail_image_width, $thumbnail_image_height);

imagecopyresampled($thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0,$thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height);

所以新代码将是：

$thumbnail_gd_image = imagecreatetruecolor($thumbnail_image_width, $thumbnail_image_height);

// 保持透明度

if($ext = 'gif' || $ext = 'png') {

```
imagecolortransparent($thumbnail_gd_image, imagecolorallocatealpha($thumbnail_gd_image, 0, 0, 0, 127));
imagealphablending($thumbnail_gd_image, false);
imagesavealpha($thumbnail_gd_image, true); 
```

}

imagecopyresampled($thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0, $thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:18:22.170

我没有答案（我认为@Ihson 已经给出了答案），而是一个建议。

代替 ：

```
switch ($img_arr['mime'])
{
    case 'image/gif': $ext = 'gif';
        break;

    case 'image/png': $ext = 'png';
        break;

    case 'image/jpeg': $ext = 'jpg';
        break;

    case 'image/pjpeg': $ext = 'jpg';
        break;

    case 'image/x-png': $ext = 'png';
        break;

    default: return false;
}

// (...)

switch ($source_image_type)
{
    case IMAGETYPE_GIF:
        $source_gd_image = imagecreatefromgif($source_image_path);
        break;

    case IMAGETYPE_JPEG:
        $source_gd_image = imagecreatefromjpeg($source_image_path);
        break;

    case IMAGETYPE_PNG:
        $source_gd_image = imagecreatefrompng($source_image_path);
        break;
} 
```

我建议你使用：

```
$string = file_get_contents($source_image_path);
$img = @imagecreatefromstring($string);
if ($img === false) {
     // something went wrong...
} else {
     // do what you want with $img
} 
```

这是讨论使用`@`运算符，但在这种情况下，至少有两个原因：

*   编写/测试/维护的代码更少
*   mime 类型可能是错误的（如果我将 a 重命名`.jpg`为 a `.png`）。

# c++ - Windows 中的 gethostname()

> ID：15943546
> 
> 赞同：1
> 
> 时间：2013-04-11T08:00:22.107
> 
> 标签：c++, winsock

我发现 gethostname() 函数返回本地计算机的标准主机名，但我对“主机名”这个术语有点困惑，它是调用函数的计算机的名称还是计算机在网络中连接的服务器的名称...

```
 char szPath[128] = "";
          gethostname(szPath, sizeof(szPath)); 
```

如果我想找出本地主机的IP地址，我该怎么办......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:12:51.613

gethostname ：返回本地计算机名称。

要获取 IP 地址，请使用：

```
 struct hostent *ent = gethostbyname(hostname);
   struct in_addr ip_addr = *(struct in_addr *)(ent->h_addr);
   printf("Hostname: %s, was resolved to: %s\n",
           hostname, inet_ntoa(ip_addr)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:03:11.613

从[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms738527%28v=vs.85%29.aspx)中：

> 该`gethostname`函数检索**本地计算机**的标准主机名。

# android - Android 设备无法使用 HttpURLConnection 连接到网页

> ID：15943548
> 
> 赞同：0
> 
> 时间：2013-04-11T08:00:30.793
> 
> 标签：android, android-asynctask, httpurlconnection

我正在开发一个 android 应用程序，它会从网页中获取源代码，然后对其进行解析。

只要我的设备连接到开发它的电脑，我就可以让它工作，但是，当我尝试在与电脑断开连接的情况下运行它时，它似乎无法检索信息。有人可以告诉我我做错了什么吗？

要获取源代码，我通过 AsyncTask 使用以下代码：

```
private String downloadUrl(String myurl) throws IOException {
    InputStream is = null;

    try {
        URL url                 = new URL(myurl);
        HttpURLConnection conn  = (HttpURLConnection) url.openConnection();
        conn.setReadTimeout(20000 /* milliseconds */);
        conn.setConnectTimeout(25000 /* milliseconds */);
        conn.setRequestMethod("GET");
        conn.setDoInput(true);

        // Starts the query
        conn.connect();
        response = conn.getResponseCode();
        Log.d(DEBUG_TAG, "The response is: " + response);

        if (response == 200) {

            is = conn.getInputStream();

            BufferedReader buffer = new BufferedReader(new InputStreamReader(is, "ISO-8859-1"));

            // Convert the InputStream into a string
            String s = "";
            while ((s = buffer.readLine()) != null) {
                myTextView.append(s);
                myTextView.append("\n");

            }

            conn.disconnect();
            is.close();
            return myTextView.getText().toString();
        } else {
            conn.disconnect();
            return "";
        }

    } finally {
        if (is != null) {
            is.close();

        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:10:50.800

似乎在我对 ASyncTask 的调用中，以下行是让设备等待计算机连接。

```
android.os.Debug.waitForDebugger(); 
```

# c# - ldapUser 对应于 Active Directory 中的哪个文件？

> ID：15943550
> 
> 赞同：0
> 
> 时间：2013-04-11T08:00:34.913
> 
> 标签：c#, active-directory

我正在使用以下代码在活动目录中查找用户

```
DirectoryEntry dirEntry = null;
using (dirEntry = new DirectoryEntry(ldapPath, ldapUser, ldapPassword))
{
    try
    {
        Object adsiObject = dirEntry.NativeObject;
        result = true;
    }
    catch (Exception exception)
    {
        errorInfo.ErrorCode = -1;
        errorInfo.ErrorMessage = exception.Message;
    }
} 
```

我对“ldapUser”有疑问。

它对应于 Active Directory 中的哪个字段？是“用户登录名”还是“2000 年前的用户登录名”？

而且我需要知道可以为“ldapUser”字段提供的字符数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:01:51.460

您所说的“用户登录名”实际上是***用户主体名称***(UPN)，Windows 2000 之前的版本是***sAMAccountName***。您可以在属性编辑器中找到两者（您需要高级功能）。

编辑的属性是`dirEntry.Username`sAMAccountName。

如果您更改用户名，我建议您也编辑您的 UPN。我更喜欢直接使用`DirectoryEntry`对象的属性：

```
dirEntry.Properties["sAMAccountName"].Value = newName_;
dirEntry.Properties["userPrincipalName"].Value = newName_ + "@yourdomain.com"; 
```

关于所需的字符数，这取决于您的 GPO（对于最小值以及是否需要特殊/大写字符）。对于最大值，它是 20 个字符。几个月前我遇到了这个问题。

希望有帮助。

# javascript - 将不同的值限制为单个输入类型

> ID：15943552
> 
> 赞同：0
> 
> 时间：2013-04-11T08:00:42.083
> 
> 标签：javascript

我在我的一个脚本中使用了该脚本，这很棒，我以为我解决了问题，但是每当我更改选项时，页面上的每个按钮都会更改为相同的选项值。我可以将我的值限制为单一输入类型吗？这是有问题的脚本

```
<select>
  <option text="ok">1</option>
  <option text="hello">2</option>
  <option text="test">3</option>
</select>
<input type="text" />

$(function(){
 $('select').on('change', function(){
    $('input').val($('option:selected', this).attr('text'));
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:02:55.483

当然，只需将 an`id`应用于特定的输入并更改

```
$('input').val(...) 
```

进入

```
$('#your-input-id').val(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:04:00.487

这就是为什么：

```
$('input') 
```

您选择的每一次更改，都是针对页面中的所有输入。您可以通过使选择器特定来进行限制，例如：

```
$('input[type=text]')   //all inputs of type "text"
$('input[type=submit]') //all inputs of type "submit"
$('input.customButton') //all inputs of class "customButton" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:08:31.607

如果每个`SELECT`菜单`INPUT`下方都有您要更新的菜单，您可以执行以下操作：

```
$("select").change(function() {
    $(this).next("input[type='text']").val($('option:selected', this).attr('text'));
}); 
```

# autocad - 安装 Auto Cad 应用软件时遇到错误 1606

> ID：15943553
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:00:48.617
> 
> 标签：autocad

我正在使用windows 8 64位，在安装autocad软件时，在安装开始时
出现错误1606，如何在windows 8 64位中安装autocad，为什么会出现这个问题谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-25T08:02:32.320

我在 Win8.1 x64 上使用 Acad 2010。我所做的是我关闭了 Windows Defender，然后我使用了一个使用 64 位文件的 32 位设置文件……我在删除 Acad 64 位设置后将 32 位设置文件粘贴到了 64 位文件中。为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:12:34.530

AutoCAD 2014 之前的版本与 Win8 不兼容，请参阅[此处了解 Autodesk 产品兼容性列表](https://www.google.fr/search?aq=f&oq=autocad+windows+8+compatibility&sourceid=chrome&ie=UTF-8&q=autocad+windows+8+compatibility)

既然您知道这一点，我已经在 win 8 上安装了 acad 2012，安装后没有任何问题。

您的问题与此处描述的问题非常相似：[http ://usa.autodesk.com/adsk/servlet/ps/dl/item?siteID=123112&id=8164400&linkID=9240617](http://usa.autodesk.com/adsk/servlet/ps/dl/item?siteID=123112&id=8164400&linkID=9240617)

我希望这有帮助。

# php - 从 db 获取链接并在另一个 div 中显示它们

> ID：15943562
> 
> 赞同：-7
> 
> 时间：2013-04-11T08:01:13.690
> 
> 标签：php, html, mysql, css, connection

我正在考虑开始一个新的网站项目。但我有一个问题！我想要两个表格布局，例如：

```
|-------------|
|     |       |
|     |       |
|     |       |
|     |       |
|     |       |
|-------------| 
```

在左侧，我想要列出的项目和链接，例如（page.php?id=1 等）当用户单击左侧的链接时，数据将显示在右侧列中。这对 HTML、CSS 和 PHP 可行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:06:39.887

对的，这是可能的。为此，您需要使用 AJAX。

这是一个初学者教程：[http ://www.tizag.com/ajaxTutorial/](http://www.tizag.com/ajaxTutorial/)

在您阅读并了解基础知识（如果您不了解 javascript，您可能需要查看更多教程）之后，您可以继续学习 jQuery（一个 Javascript 框架）。例如，您可以使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)。这样做有很多选择，主要是开始。

如果您想学习，反复试验是您可以使用的最重要的方法。祝你好运 ！

**PS：**

由于有 2 个选项可以做你想做的事（iFrames 和 AJAX） - 你应该阅读这个问题：[iframes vs ajax](https://stackoverflow.com/questions/768222/iframes-vs-ajax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:08:28.830

您可以使用 AJAX 或使用右侧的 iframe

```
<iframe name="frname"></iframe> 
```

并将您的链接定位到它

```
 <a href="http://site.com" target="frname">Link</a> 
```

# scala - Scala 集合，用于在保持顺序的同时进行分组

> ID：15943563
> 
> 赞同：3
> 
> 时间：2013-04-11T08:01:19.530
> 
> 标签：scala, scala-collections

我有这样的东西

```
case class Job(workId: Int, users: List[String])
val jobs = IndexedSeq(Job(1, List("a", "b")), Job(2, List("b", "c")), Job(3, List("a", "c" )), Job(4, List("d", "b"))) 
```

我想将其转换为：

```
Map(c -> Vector(2, 3), a -> Vector(1, 3), d -> Vector(4), b -> Vector(1, 2, 4)) 
```

我基本上想保持原来的顺序中的 Job.workId 的顺序。因此，由于 workId 为 1 的作业位于 workId 为 3 的作业之前，因此地图中的 a 条目的 JobId 1 在 JobId 3 之前。

我找不到这样做的直接方法。现在我有：

```
((for (job <- jobs;
   user <- job.users)
   yield { (user, job.work) }) groupBy { tuple => tuple._1 }) map { tuple => (tuple._1 -> (tuple._2 map { _._2 })) } 
```

这首先创建：

```
Map(c -> Vector((c,2), (c,3)), a -> Vector((a,1), (a,3)), d -> Vector((d,4)), b -> Vector((b,1), (b,2), (b,4))) 
```

然后将其转换为：

```
Map(c -> Vector(2, 3), a -> Vector(1, 3), d -> Vector(4), b -> Vector(1, 2, 4)) 
```

这似乎相当冗长。我想知道是否有更简单的方法可以在保留订单的同时做到这一点。我也不喜欢它需要多次迭代初始序列。

我有另一个更长的解决方案：

```
val mapping =  scala.collection.mutable.Map[String, IndexedSeq[Int]]()

 for (job <- jobs;
       user <- job.users)
   yield{
     if (mapping.contains(user)) {
       val entry = mapping(user)
       mapping.put(user, entry :+ job.work)
     } else {
       mapping += user -> mutable.IndexedSeq(job.work)
     }
  } 
```

现在的映射是：

```
Map(c -> ArrayBuffer(2, 3), a -> ArrayBuffer(1, 3), d -> ArrayBuffer(4), b -> ArrayBuffer(1, 2, 4)) 
```

这共享了初始的理解，但不需要使用 groupBy 然后映射的额外迭代。

使用标准收集方法是否有更惯用和简洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:31:03.767

与列表处理的几乎所有问题一样，这可以通过折叠来解决！

```
(for {
  job <- jobs.view;
  user <- job.users
} yield (job, user)).foldLeft (Map[String, Vector[Int]]()) { case (acc, (a,b)) =>
  acc + (b -> (acc.getOrElse(b, Vector()) :+ a.workId))
} 
```

不幸的是，Scala 的类型推断器无法确定初始“映射”的类型，因此您必须明确指定它。

在初始集合上使用 'view' 方法会使这个变得懒惰，并且只会在初始列表中执行一次传递。

# c - 使用C设置apache环境变量，函数类似于PHP apache_setenv函数

> ID：15943564
> 
> 赞同：0
> 
> 时间：2013-04-11T08:01:33.193
> 
> 标签：c, apache

我想在 ac 程序的 apache 环境变量中设置一些信息，我想登录到自定义日志文件。我正在寻找一些类似于 PHP 函数的 c`apache_setenv`函数。

指针将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:06:59.217

看看howto write CGI program，这可能是要走的路。无论如何，我不确定是否可以以这种方式设置 apache vars。

[http://httpd.apache.org/docs/2.2/howto/cgi.html](http://httpd.apache.org/docs/2.2/howto/cgi.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T12:42:51.457

你可以通过调用这个函数来做到这一点

```
apr_table_addn(r->subprocess_env, "env_name", "env_value"); 
```

其中`env_name`和`env_value`分别是环境变量的名称和值。并且`r`是`request_rec`结构指针对象

# asp.net - 浏览已部署的 asp.net 网站时出现编译器错误

> ID：15943566
> 
> 赞同：0
> 
> 时间：2013-04-11T08:01:35.973
> 
> 标签：asp.net, windows-7, iis-7.5

```
CS0016 compiler error when browsing a deployed asp.net website IIS 7.5 WIN7 
```

我在尝试浏览我的网站时遇到了这个问题。我在互联网上搜索了很多，但即使我在几个临时文件夹的安全选项卡中完全控制每个人，我也无法做到。关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T10:39:34.087

我终于通过使用cmd在IIS7.5中卸载并安装asp.net解决了这个问题。希望这对其他人有帮助。

# javascript - 背后的asp.net代码和javascript

> ID：15943567
> 
> 赞同：0
> 
> 时间：2013-04-11T08:01:46.803
> 
> 标签：javascript, asp.net, code-behind

我的代码隐藏中有两个从两个不同的 onclick 事件调用的脚本。我想它工作正常，但现在我的一个函数没有被调用。我正在使用以下方式调用我的脚本函数：

```
ClientScript.RegisterStartupScript(this.GetType(), "hwa", "ShowPopup1('" + PopUpContent +     "');", true);

ClientScript.RegisterStartupScript(this.GetType(), "hwa", "ShowPopUp();", true); 
```

第一个被调用。但是，当我单击第二个脚本中的第二个按钮时，警报不会弹出。

# c# - 一个接口与 DI 的多种实现

> ID：15943569
> 
> 赞同：25
> 
> 时间：2013-04-11T08:02:02.030
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, autofac

现在，我正在尝试使用 Autofac 的 IOC 容器自学依赖注入模式。我想出了一个非常简单的例子，如下所示。虽然这个例子很简单，但我无法让它正常工作。

这是我的类/接口：

两个怪物，都实现了 IMonster 接口：

```
interface IMonster
{
  void IntroduceYourself();
}

class Vampire : IMonster
{
  public delegate Vampire Factory(int age);

  int mAge; 

  public Vampire(int age)
  {
    mAge = age;
  }

  public void IntroduceYourself()
  {
    Console.WriteLine("Hi, I'm a " + mAge + " years old vampire!");
  }
}

class Zombie : IMonster
{
  public delegate Zombie Factory(string name);

  string mName;

  public Zombie(string name)
  {
    mName = name;
  }

  public void IntroduceYourself()
  {
    Console.WriteLine("Hi, I'm " + mName + " the zombie!");
  }
} 
```

然后是我的墓地：

```
interface ILocation
{
  void PresentLocalCreeps();
}

class Graveyard : ILocation
{
  Func<int, IMonster>    mVampireFactory;
  Func<string, IMonster> mZombieFactory;

  public Graveyard(Func<int, IMonster> vampireFactory, Func<string, IMonster> zombieFactory)
  {
    mVampireFactory = vampireFactory;
    mZombieFactory  = zombieFactory;
  }

  public void PresentLocalCreeps()
  {
    var vampire = mVampireFactory.Invoke(300);
    vampire.IntroduceYourself();

    var zombie = mZombieFactory.Invoke("Rob");
    zombie.IntroduceYourself();
  }
} 
```

最后是我的主要内容：

```
static void Main(string[] args)
{
  // Setup Autofac
  var builder = new ContainerBuilder();
  builder.RegisterType<Graveyard>().As<ILocation>();
  builder.RegisterType<Vampire>().As<IMonster>();
  builder.RegisterType<Zombie>().As<IMonster>();
  var container = builder.Build();

  // It's midnight!
  var location = container.Resolve<ILocation>();
  location.PresentLocalCreeps();

  // Waiting for dawn to break...
  Console.ReadLine(); 
  container.Dispose();
} 
```

这是我的问题：在运行时，Autofac 在这一行抛出异常：

```
var vampire = mVampireFactory.Invoke(300); 
```

看来 mVampireFactory 实际上是在尝试实例化一个僵尸。当然这不会起作用，因为僵尸的构造函数不会采用 int。

有没有简单的方法来解决这个问题？还是我理解 Autofac 的工作方式完全错误？你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-11T08:14:07.070

您的控制容器反转本身不是工厂。您的机箱非常适合工厂模式。

创建一个新的抽象工厂，用于创建你的怪物：

```
public interface IMonsterFactory
{
    Zombie CreateZombie(string name);
    Vampire CreateVampire(int age);
} 
```

然后在 Autofac 中注册它的实现。

最后在您的班级中使用工厂：

```
class Graveyard : ILocation
{
  IMonsterFactory _monsterFactory;

  public Graveyard(IMonsterFactory factory)
  {
    _monsterFactory = factory;
  }

  public void PresentLocalCreeps()
  {
    var vampire = _monsterFactory.CreateVampire(300);
    vampire.IntroduceYourself();

    var zombie = _monsterFactory.CreateZombie("Rob");
    zombie.IntroduceYourself();
  }
} 
```

如果你愿意，你当然也可以使用特定的怪物工厂。尽管如此，使用接口将使您的代码更具可读性。

# 更新

> 但是我将如何实现工厂？一方面，工厂不应该使用 IOC 容器来创建怪物，因为这被认为是邪恶的（将 DI 模式降级为服务定位器反模式）。

我已经厌倦了听说 SL 是一种反模式。它不是。与所有模式一样，如果您使用不当，则会给您带来不利影响。这适用于所有模式。[http://blog.gauffin.org/2012/09/service-locator-is-not-an-anti-pattern/](http://blog.gauffin.org/2012/09/service-locator-is-not-an-anti-pattern/)

但在这种情况下，我不明白为什么不能直接在工厂中创建实现？这就是工厂的用途：

```
public class PreferZombiesMonsterFactory : IMonsterFactory
{
    public Zombie CreateZombie(string name)
    {
        return new SuperAwesomeZombie(name);
    }

    public Vampire CreateVampire(int age)
    {
        return new BooringVampire(age);
    }
} 
```

它并不比这更复杂。

> 另一方面，工厂不应该自己创建怪物，因为那样会绕过 IOC 容器并将工厂和怪物紧密耦合。还是我又走错了路？;-)

工厂与怪物实现紧密耦合并不重要。因为这就是工厂的目的：抽象出对象的创建，这样代码中的其他任何东西都不会知道具体的内容。

您可以创建`SuperDeluxeMonsterFactory`，`MonstersForCheapNonPayingUsersFactory`等等。您的应用程序中的所有其他代码都不会意识到您正在使用不同的怪物（通过使用不同的工厂）。

每次您必须更改混凝土时，您要么切换工厂，要么只修改现有工厂。只要你的怪物实现不违反 Liskovs 替换原则，其他代码都不会受到影响。

# 工厂与 IoC 容器

那么工厂和 IoC 容器有什么区别呢？IoC 非常擅长解决类的依赖关系并维护生命周期（例如，容器可以在 HTTP 请求结束时自动处理所有一次性用品）。

另一方面，工厂擅长为您创建对象。它做到了这一点，没有别的。

**概括**

因此，如果您在代码中的某个地方需要获得特定类型的实现，您通常应该使用工厂。工厂本身可以在内部使用 IoC 作为服务定位器（以解决依赖关系）。没关系，因为它是工厂中的实现细节，不会影响应用程序中的任何其他内容。

如果您想解析服务（并且不关心您获得哪个实现，或者您是否获得以前创建的实例），请使用 IoC 容器（通过依赖注入）。

# objective-c - 为什么Xcode总是使用超类的方法而不是子类的方法

> ID：15943573
> 
> 赞同：1
> 
> 时间：2013-04-11T08:02:24.780
> 
> 标签：objective-c, xcode, design-patterns, inheritance, factory-pattern

我在objective-c中使用工厂模式，但由于某种原因它从不调用子类的方法。我将通过代码解释：

```
// MailBoxViewController.m -- file using the factory:
SearchWorker* searchWorker = [SearchWorkerFactory getSearchWorker:param];
// whenever I call this method, it's always the one belonging to SearchWorker, 
// rather than any of it's children classes, even if on breakpoint here, searchWorker
// is of class type AllSearchWorker
[searchWorker search:[searchParams objectForKey:@"query"] withDelegate:self withSnippedDelims:snippetDelims startWithDB:dbNum];

// searchWorkerFactory.m
#import "SearchWorkerFactory.h"
#import "SearchWorker.h"
#import "AllSearchWorker.h"    
@implementation SearchWorkerFactory    
+(id)getSearchWorker:(SearchWorkerType)syncType {        
    if (syncType == SearchWorkerTypeAll) {
        AllSearchWorker* searchWorker = [[AllSearchWorker alloc] init];
        return searchWorker;
    }
    return nil;
}    
@end

// SearchWorker.h
@interface SearchWorker : NSObject
-(void)search:(NSString *)query withDelegate:(id)delegate withSnippedDelims:(NSArray *)snippedDelims startWithDB:(int)dbIndex;    
@property (assign) volatile BOOL cancelled; // flag for when we cancel a search op
@property (nonatomic,readwrite,retain) NSOperationQueue *operationQueue;
@end

// SearchWorker.m
@implementation SearchWorker
..
-(void)search:(NSString *)query withDelegate:(id)delegate withSnippedDelims:(NSArray *)snippedDelims startWithDB:(int)dbIndex {
    [NSException raise:NSInternalInconsistencyException
                format:@"You must override %@ in a subclass", NSStringFromSelector(_cmd)];
}
@end

// AllSearchWorker.h
@interface AllSearchWorker : SearchWorker
-(void)search:(NSString *)query withDelegate:(id)delegate withSnippetDelims:(NSArray *)snippetDelims startWithDB:(int)dbIndex; 
@end

// AllSearchWorker.m
@implementation AllSearchWorker 
..
- (void)search:(NSString*)query withDelegate:(id)delegate withSnippetDelims:(NSArray *)snippetDelims startWithDB:(int)dbIndex {
    // implementation
}
@end 
```

所以我总是收到错误消息：

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“您必须在子类中覆盖 search:withDelegate:withSnippedDelims:startWithDB:”***首先抛出调用堆栈：

知道为什么会这样吗？另外，如果我控制单击该方法`search:withDelegate:withSnippedDelims:startWithDB`，xcode 会立即跳转到`SearchWorker.m`（即它没有给我一个存在此方法的文件列表）.. 如果我从中删除该方法`SearchWorker.m`，它会抱怨该方法不存在。 . 想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:04:54.547

Those are two different methods. You have used `snipped` in the superClass and `snippet` in the subClass

```
-(void)search:(NSString *)query withDelegate:(id)delegate withSnippetDelims:(NSArray *)snippetDelims startWithDB:(int)dbIndex; 
                                                                    ^

-(void)search:(NSString *)query withDelegate:(id)delegate withSnippedDelims:(NSArray *)snippedDelims startWithDB:(int)dbIndex {
                                                                    ^ 
```

# c# - 下拉列表值不会改变

> ID：15943576
> 
> 赞同：0
> 
> 时间：2013-04-11T08:02:41.703
> 
> 标签：c#, webbrowser-control, html-select

我希望我的应用程序更改站点上下拉列表的值。这是网站上的下拉列表的代码：

```
<select name="filterPPage">
    <option value="20"></option>
    <option value="30"></option><option value="40"></option>
    <option value="50"></option><option value="60"></option>
    <option value="70"></option><option value="80"></option>
    <option value="90"></option><option value="100"></option>
</select> 
```

我在我的应用程序中使用此代码来更改值：

```
int buff = 100;

foreach (HtmlElement he in webBrowser1.Document.GetElementsByTagName("select"))
{
    if (he.GetAttribute("name").Equals("filterPPage"))
    {
        he.SetAttribute("value", buff.ToString());
    }
} 
```

但是它只在一秒钟内将值更改为 100，然后页面刷新，默认值变为 20。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:08:25.360

您必须遍历`select tag`孩子：

试试这个：

```
 void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            foreach (HtmlElement selecttag in webBrowser1.Document.GetElementsByTagName("select"))
            {
                if (selecttag.GetAttribute("name").Equals("filterPPage"))
                {
                    foreach (HtmlElement child in selecttag.All)
                    {
                        child .InnerText = "something";
                    }

                }
            }
        } 
```

**已编辑**

完整代码：

```
private void Form1_Load_1(object sender, EventArgs e)
        {
            webBrowser1.DocumentText = File.ReadAllText(@"E:\\file.html");
            webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
        }

        void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {

            foreach (HtmlElement he in webBrowser1.Document.GetElementsByTagName("select"))
            {
                if (he.GetAttribute("name").Equals("filterPPage"))
                {
                    foreach (HtmlElement el in he.All)
                    {
                        el.InnerText = "1==";
                    }

                }
            }
        } 
```

# android - 尝试插入 SQLiteDatabase 时出错

> ID：15943577
> 
> 赞同：0
> 
> 时间：2013-04-11T08:02:42.097
> 
> 标签：android, sqlite

所以我再一次对我的神奇宝贝相关应用程序的数据库内容有一点问题，现在我正在重新审视应用程序开发的那部分......一个相对较新的（数据库类可能是问题所在几乎是最新的[参见下面提到的修复]）我的 Eclipse 项目的版本在这里：[http ://www.filehosting.org/file/details/429262/PokeUtility.zip](http://www.filehosting.org/file/details/429262/PokeUtility.zip)

所以，问题是，我将此代码添加到我的 mainactivity 中只是为了测试我是否可以将数据放入数据库中：

```
DatabaseHandler db = new DatabaseHandler(this) ;
db.addPokemon(new Pokemon(001, "Bulbasaur", "Grass", "Poison")) ; 
```

但是会发生什么，它似乎像这样抛出 SQLiteException ( [http://oi47.tinypic.com/332v49c.jpg](http://oi47.tinypic.com/332v49c.jpg) ) 似乎是说我的数据库中的表中没有“type2”列？:/ 我没有在 DatabaseHandler 类中设置正确吗？哦，顺便说一句，我认为这很重要：鉴于我链接了一个稍微过时的项目版本，需要进行一个更正：`DatabaseHandler's`onCreate 应该读作：

```
String CREATE_POKEMON_TABLE = "CREATE TABLE " + TABLE_POKEMON + "("
            + KEY_DEX_NO + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_TYPE + " TEXT," + KEY_TYPE2 + "TEXT" + ")";
    db.execSQL(CREATE_POKEMON_TABLE); 
```

我相信链接的 zip 文件中的版本在 SQL 中缺少逗号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:05:10.887

您的问题是您的创建查询，`type2`列后面缺少空格。其实你有这个：

```
+ KEY_TYPE2 + "TEXT" + ")"; 
```

添加空间，它应该可以工作（现在你需要重新创建你的数据库）。更正查询：

```
String CREATE_POKEMON_TABLE = "CREATE TABLE " + TABLE_POKEMON + "("
            + KEY_DEX_NO + " INTEGER PRIMARY KEY, "
            + KEY_NAME + " TEXT, "
            + KEY_TYPE + " TEXT, "
            + KEY_TYPE2 + " TEXT" + ")"; 
```

# sorting - JSF2 Richfaces 4.3.1，使用ExtendedDataModel和Arrangeable时多次调用walk方法

> ID：15943584
> 
> 赞同：1
> 
> 时间：2013-04-11T08:03:06.217
> 
> 标签：sorting, jsf-2, richfaces, richdatatable

我正在尝试加载带有分页和排序的数据表。使用 ExtendedDataModel 和 Arrangeable 来实现这一点，它工作正常。然后我添加了 Phase Listener 来检查行为并注意到

1\. Pagination 工作正常，只有一个 DB Hit。
2\. 但是，虽然 Sorting DB Hit 发生了两次，第一次在第 2 阶段，第二次在第 6 阶段。

另请注意，如果我没有立即 =“true”，则 DB HIT 在第 2、3、4 和 6 阶段各发生 4 次。

我不确定为什么会这样。你能帮忙吗？

### xhtml 片段

 `````
 <rich:column sortBy="#{item.busName}" sortOrder="#{sortBean.order}">
                    <f:facet name="header">
                        <a4j:commandLink value="BUSINESS NAME" action="#{sortBean.sortByBus}" immediate="true"
                             render="riskData" />
                    </f:facet>
                    <h:outputText value="#{item.busName}">
                    </h:outputText>
                </rich:column>

                <rich:column sortBy="#{item.regionName}" sortOrder="#{sortBean.orderRegion}">
                    <f:facet name="header">
                        <a4j:commandLink value="REGION NAME"
                             action="#{sortBean.sortByRegion}"  immediate="true"
                             render="riskData" />
                    </f:facet>
                    <h:outputText value="#{item.regionName}">
                    </h:outputText>
                </rich:column> 
````  `### ----------带有SYSOUTS的阶段监听器日志----------

### 具有未排序值的页面初始视图只有一个 DB HIT 来获取数据###

START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE RENDER_RESPONSE 6
Get Sort -> Order business -> unsorted
Get Sort -> Order region -> unsorted
Get Sort -> Order PolicyDt -> unsorted
Arrange Not Available
Total Count DB HIT
Data Creation
Get Sort -> Order business -> unsorted
Get Sort -> Order region -> unsorted
Get Sort -> Order PolicyDt -> unsorted
Arrange Not Available
Walk -> Start
**DB HIT**
First -> 0Last -> 3
Before Sort -> [com.entity. BusItem@514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8] SortList
之前
排序后 -> [com.entity.BusItem@514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8]
步行 -> 结束
END PHASE RENDER_RESPONSE 6

### BusinessName Unsorted Ascending Sort 有两个 DB HIT -> Phase2 中的第一个和 Phase 6 中的第二个 ###

START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
Get Sort -> Order business -> unsorted
Get Sort -> Order region -> unsorted
Get Sort -> Order PolicyDt -> unsorted
Arrange Not Available
Walk -> Start
**DB HIT**
First - > 0Last -> 3
排序前 -> [com.entity.BusItem@514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8] SortList
前 排序
后 -> [com.entity.BusItem@514cef, com .entity.BusItem@1921eac, com.entity.BusItem@1bcdc8]
步行 -> 结束
排序业务 -> 切换 -> 降序到升序
集排序 -> 订单业务 -> 升序
集排序 -> 订单 PolicyDt ->未分类
Set Sort -> Order region -> unsorted
END PHASE APPLY_REQUEST_VALUES 2
START PHASE RENDER_RESPONSE 6
Get Sort -> Order business ->升序
Get Sort -> Order region -> unsorted
Get Sort -> Order PolicyDt -> unsorted
Arrange Available
/test.xhtml @53,74 sortBy="#{item.busName}"ascending
获取排序 -> 订单业务 -> 升序
获取排序 -> 订单区域 -> 未排序
获取排序 -> 订单 PolicyDt -> 未排序
可用
/test.xhtml @53 ,74 sortBy="#{item.busName}"ascending
Walk -> Start
**DB HIT**
First -> 0Last -> 3
Before Sort -> [com.entity.BusItem@514cef, com.entity.BusItem@1921eac,com.entity.BusItem@1bcdc8]
在SortList 之前 排序
之后 -> [com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8, com.entity.BusItem@514cef]
步行 -> 结束
END PHASE RENDER_RESPONSE 6

### BusinessName 升序到降序 -> 在 Phase2 中有两个 DB HIT，第 2 个在 Phase2 ###

START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
获取排序 -> 订单业务 -> 升序
获取排序 -> 订单区域 -> 未排序
获取排序 -> 订单 PolicyDt -> 未排序
可用
/test.xhtml @53,74 sortBy ="#{item.busName}"ascending
Walk -> Start
**DB HIT**
First -> 0Last -> 3
Before Sort -> [com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8, com.entity.BusItem@ 514cef]排序
前SortList
后排序 -> [com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8, com.entity.BusItem@514cef]
Walk -> End
Sort Business -> Toggle -> Ascending to Descending
Set Sort - >订单业务 -> 降序
Set Sort -> Order PolicyDt -> unsorted
Set Sort -> Order region -> unsorted
END PHASE APPLY_REQUEST_VALUES 2
START PHASE RENDER_RESPONSE 6
Get Sort -> Order business -> descending
Get Sort -> Order region -> unsorted
Get Sort -> Order PolicyDt -> unsorted
Arrange Available
/test.xhtml @53,74 sortBy="#{item.busName}"descending
Get Sort -> Order business -> descending
Get Sort -> Order region -> unsorted
Get Sort -> Order PolicyDt -> unsorted
Arrange Available
/test.xhtml @53,74 sortBy="#{item.busName}"descending
Walk -> Start
**DB HIT**
First -> 0Last -> 3
排序前 -> [com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8, com.entity.BusItem@514cef] SortList
前 排序
后 -> [com.entity.BusItem@514cef, com.entity.BusItem@ 1921eac，com.entity.BusItem@1bcdc8]
步行 -> 结束
END PHASE RENDER_RESPONSE 6

### 删除立即数，然后对业务名称进行排序，在 Phase2、3、4 和 6 中各有四个 DB HIT

START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
Get Sort -> Order business -> unsorted
Get Sort -> Order region -> unsorted
Get Sort -> Order PolicyDt -> unsorted
Arrange Not Available
Walk -> Start
**DB HIT**
First - > 0Last -> 3
排序前 -> [com.entity.BusItem@514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8] SortList
前 排序
后 -> [com.entity.BusItem@514cef, com .entity.BusItem@1921eac, com.entity.BusItem@1bcdc8]
Walk -> End
END PHASE APPLY_REQUEST_VALUES 2
START PHASE PROCESS_VALIDATIONS 3
Walk -> Start
**DB HIT**
First -> 0Last -> 3
排序前 -> [com.entity.BusItem@514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8] SortList
前 排序
后 -> [com.entity.BusItem@514cef, com.entity.BusItem@ 1921eac，com.entity.BusItem@1bcdc8]
步行 -> 结束
END PHASE_VALIDATIONS 3
开始阶段 UPDATE_MODEL_VALUES 4
步行 -> 首先开始
**DB HIT**
-> 0Last -> 3
排序前 -> [com.entity.BusItem@514cef，com. entity.BusItem@1921eac, com.entity.BusItem@1bcdc8]排序
前SortList 排序
后 -> [com.entity.BusItem@514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8]
步行 -> 结束
END PHASE UPDATE_MODEL_VALUES 4
开始阶段 INVOKE_APPLICATION 5
Sort Region-> Toggle -> Descending to Ascending
Set Sort -> Order region -> ascending
Set Sort -> Order business -> unsorted
Set Sort -> Order PolicyDt -> unsorted
END PHASE INVOKE_APPLICATION 5
START PHASE RENDER_RESPONSE 6
Get Sort -> Order业务 -> 未排序
获取排序 -> 订单区域 -> 升序
获取排序 -> 订单 PolicyDt -> 未排序
可用
/footer.xhtml @62,83 sortBy="#{item.regionName}"ascending
获取排序 -> 订单业务 - > unsorted
获取排序 -> 排序区域 -> 升序
获取排序 -> Order PolicyDt -> unsorted
Arrange Available
/footer.xhtml @62,83 sortBy="#{item.regionName}"升序
步行 -> 开始
**DB HIT**
First -> 0Last -> 3
Before Sort -> [com.entity.BusItem@514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8]
在SortList 之前 排序
之后 -> [com.entity.BusItem @514cef, com.entity.BusItem@1921eac, com.entity.BusItem@1bcdc8]
步行 -> 结束

## 结束阶段 RENDER_RESPONSE 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T19:58:24.093

看看[这个问题](https://issues.jboss.org/browse/RF-12891?focusedCommentId=12780548&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12780548)。

显然，这种行为是该`walk`方法所期望的。您应该编写一个[幂等方法](https://stackoverflow.com/questions/19320115/what-does-idempotent-method-mean-and-what-are-the-side-effects-in-case-of-callin)，即您应该采取适当的措施来只查询一次数据库。

但是请注意，不仅在对结果进行分页时调用此方法，而且例如在调用将结果作为参数的方法时也会调用此方法。我为解决这个问题所做的是验证查询的参数是否已更改，如果是，我执行查询并遍历调用`visitor.process`它们的方法的结果，否则我只是遍历当前结果。``

# jsf - JSF 数据表绑定无法正常工作

> ID：15943587
> 
> 赞同：0
> 
> 时间：2013-04-11T08:03:17.103
> 
> 标签：jsf, binding, datatable

我正在创建一个简单的 JSF 应用程序，它只有一个 JSP 页面（1 个下拉菜单、1 个数据表和 1 个提交按钮）。

当我从下拉列表中选择值时，我用数组列表填充表格以显示表格数据。该表是可编辑的。现在，当我单击提交时，我需要将整个表格放入列表中。为此，我使用了数据表的绑定属性。但问题是从 getValue 返回 null。

请帮我解决这个问题，因为我浪费了很多时间。

```
class UserBean {

..... 
private HtmlDataTable _dataTable;

  public void setDataTable(HtmlDataTable dataTable)
  {
    this._dataTable = dataTable;
  }

  public HtmlDataTable getDataTable()
  {
    return _dataTable;
  }

 ...................

public String submit() {
    List<User> userDetails = (ArrayList<User>)((HtmlDataTable)getDataTable()).getValue();
    System.out.println(userDetails);
    return "";
}

} 
```

// JSP 页面

```
<h:dataTable id="erdatatable"
                    var="row" value="#{UserBean.userDetails}"
                    binding="#{UserBean.dataTable}">

....
</h:dataTable>

<h:commandButton value="Submit" action="#{UserBean.submit}"></h:commandButton> 
```

//faces.config

```
<managed-bean>
        <managed-bean-name>UserBean</managed-bean-name>
        <managed-bean-class>com.datatable.UserBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean> 
```

// web.xml

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:17:58.597

您可以尝试将 managed-bean-scope 更改为 session。当您调用操作（下拉选择）并填充数据表时，UserBean 类的请求范围结束。当您再次按下提交按钮时，将创建一个新的 UserBean 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:52:32.727

1.  如果您只需要表中的数据，则根本不需要（并且可能不应该）绑定它。您`userDetails`将包含用户编辑的所有数据，无需任何额外工作。

2.  如果您使用会话范围，一旦有人在两个选项卡中打开您的应用程序，从其中一个选项卡的下拉列表中选择某些内容，然后按下第二个选项卡上的按钮，您就会遇到错误。一个常见的解决方案是使用视图范围（它不适用于绑定，但是 - 正如我所说 - 你根本不应该使用它）

# nuget - Nuget VS Web 部署

> ID：15943590
> 
> 赞同：3
> 
> 时间：2013-04-11T08:03:28.957
> 
> 标签：nuget, webdeploy

我们目前正在使用 web deploy 为我们的 .net web 应用程序创建包。它有一些优点和缺点。现在我们将使用 nuget 进行依赖管理，但考虑到在 nuget 中打包的便利性。我正在讨论我应该仍然使用 web 部署 + 远程服务还是尝试使用 nuget 来捆绑我的 web 应用程序并使用 powershell 或类似 octupus 的东西部署 ？？

对于我的 web 部署来说，即使尝试做一些简单的事情，比如 include 、 exlcude 、 gac 或 registry 或 iis 配置（这又不是很灵活），也变得不那么复杂了。

但另一方面，它带有远程服务，我需要做的就是通过包到服务，我就完成了..

请在此比较中提供您的意见。

-raj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T17:18:51.280

我正在设置一个使用 NuGet 和 Webdeploy 的系统。

NuGet 用作存储库格式，因此构建系统发布 NuGet 打包的工件。

部署系统使用 NuGet 从 NuGet 存储库获取正确的打包工件。

构建工件恰好是 WebDeploy，以便于安装。

我还在考虑是否要使用 puppet、chef 或 octupus 来协调部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:49:40.503

NuGet 是一个依赖管理器，因此适合在开发/构建时使用，而不是在部署时使用。从部署的角度来看，它并没有为您提供比 zip 文件更多的功能……除了尝试在此过程中适应 NuGet 的所有开销。

看看 Inedo 的[BuildMaster](http://inedo.com/buildmaster)。它可以处理从源代码控制到生产部署的整个过程。还有一个免费版本肯定能满足您的要求，它还有一个模块来管理您的配置文件，因此您无需担心进行转换。

（免责声明：我为 Inedo 工作）

# jquery - Jquery解析json并获取特定值

> ID：15943595
> 
> 赞同：0
> 
> 时间：2013-04-11T08:03:43.570
> 
> 标签：jquery, json

这是我的回应

```
["{\"id\":1,\"name\":\"JOHN\"}","{\"id\":2,\"name\":\"MICHEAL\"}"]
var json = JSON.parse(demp);
console.log(json[0].id); says undefined. 
```

如何获取 id 和 name ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:06:47.060

周围不应该有引号`{}`，否则它不是可解析对象的列表，而只是字符串列表。这就是你的 json 应该是这样的：

```
[{"id":1,"name":"JOHN"}, {"id":2,"name":"MICHEAL"}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:17:45.903

遍历数组，然后将数组值转换为 JSON。

```
var obj = ["{\"id\":1,\"name\":\"JOHN\"}","{\"id\":2,\"name\":\"MICHEAL\"}"];

for(var i = 0, len = obj.length; i<len;i++) {
   var json = JSON.parse(obj[i]);
   console.log(json.id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:06:47.730

```
var res                  =   [{"id":1,"name":"JOHN"}, {"id":2,"name":"MICHEAL"}];
var response             =   JSON.stringify(res);
response                 =   JSON.parse(response);
console.log(response[0].id);
console.log(response[0].name); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T08:30:28.737

我的建议是使用循环在数组中进行迭代，正如您在问题中所建议的那样。

对我来说，您的响应是一个数组，因此您应该`JSON.parse()`只使用数组`var demp`：

```
var DEMP = ["{\"id\":1,\"name\":\"JOHN\"}", "{\"id\":2,\"name\":\"MICHEAL\"}"];
for (var i = 0, syze = DEMP.length; i < syze; i++) {
   var json = JSON.parse(DEMP[i]);
   console.log('Response ID is --> '+json.id + 
               ' Response name is --> ' + json.name);
} 
```

### [演示小提琴](http://jsfiddle.net/bUKjf/)

# java - 在 Neo4j 中使用 cypher 进行遍历

> ID：15943597
> 
> 赞同：0
> 
> 时间：2013-04-11T08:04:00.300
> 
> 标签：java, neo4j, cypher

我有一个节点与多个节点有外部关系的情况。在到达叶节点之前，这些子节点依次可以与其他节点具有向外和向内的关系。

是否有一种编写密码查询的好方法，其中基于起始节点，我可以遍历节点子节点，然后遍历它们的相关（向内和向外）节点等等，直到我到达叶子。结果应返回找到的所有关系和节点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:17:56.627

也许这太贪心但你可以试试

```
START a=node(id) //replace with the id of the node you want to start 
MATCH p=a-[r*]->x //get all the paths to all nodes
WHERE NOT(x-->()) //exclude nodes with Direction Out Relationships
RETURN p,a,x,r //return whatever you need 
```

# java - 使用 Java 从 Azure API 获取 CPU 使用率

> ID：15943602
> 
> 赞同：1
> 
> 时间：2013-04-11T08:04:20.170
> 
> 标签：java, api, azure, cpu

我有一个简单的 Java 程序，我想从 Windows Azure 服务管理 REST API 参考中获取一些信息：实例数和 CPU 使用率。

对于实例数量，我找到了我想要的，但不是 CPU 使用率。

对于实例数量，我执行 Https Get 请求，API 向我发送 XML 响应，然后我处理此文件以获取我需要的信息（[获取托管服务属性](http://msdn.microsoft.com/en-us/library/ee460806.aspx)）。我不知道CPU使用率是否也可能。目前，我在 msdn 站点或 Google 中没有找到任何内容。

有人可以帮助我吗？

一句话：我无法测试有关 Azure API 的任何内容，因为我的帐户已被禁用，因此我必须信任您，直到我的帐户再次可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:24:02.050

为了检索 CPU 利用率或其他性能计数器，您需要访问设置为存储诊断数据的存储帐户中的 WADPerformanceCountersTable。

这是帮助将 Java 连接到表存储的帮助页面：http: [//www.windowsazure.com/en-us/develop/java/how-to-guides/table-service/](http://www.windowsazure.com/en-us/develop/java/how-to-guides/table-service/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:08:41.700

看看[SIGAR - System Information Gatherer And Reporter](http://support.hyperic.com/display/SIGAR/Home)，它似乎是一个得到很好支持和记录的库来收集系统信息。

它有一个[getCpuUsage](http://www.hyperic.com/support/docs/sigar/org/hyperic/sigar/CpuTimer.html#getCpuUsage%28%29)函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:58:58.800

Windows Azure SDK for Java 实际上是开源的，如果您真的希望内置此功能，您可能需要考虑按照其指南为它做出贡献。[http://windowsazure.github.io/guidelines.html#contributing](http://windowsazure.github.io/guidelines.html#contributing)

# java - 在 Android 中为不同类（活动、片段等）的多个事件侦听器实现侦听器

> ID：15943606
> 
> 赞同：1
> 
> 时间：2013-04-11T08:04:27.113
> 
> 标签：java, android, listener

`fetchUpdates`MyApplication 应用程序类有一个监听器，它在调用方法时通知事件监听器（MainActivity - 片段活动） 。

**设置（仅显示相关部分）：**

(1) 我的应用程序

```
public class MyApplication extends Application {

   OnFetchStartListener mCallbackFetchStart = null;

   public void setOnFetchStartListener(Activity activity) {
       try {
           mCallbackFetchStart = (OnFetchStartListener) activity;
       } catch (ClassCastException e) {
           throw new ClassCastException(activity.toString()
                    + " must implement OnFetchStartListener");
       }
   }

   public interface OnFetchStartListener {
       public void onFetchStartListener();
   }

   public synchronized void fetchUpdates() {
       // Informing listeners on fetchUpdates() start
       if (mCallbackFetchStart != null) {
           mCallbackFetchStart.onFetchStartListener();
       }
       String[] mURLs = getURLs();
       new DownloadDataAsyncTask().execute(mURLs[0], mURLs[1]);
   }
} 
```

(2) MainActivity - FragmentActivity：

```
 public class MainActivity extends SherlockFragmentActivity implements
      MyApplication.OnFetchStartListener

   static MyApplication myApp;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      myApp = (MyApplication) getApplication();
   }

   @Override
   protected void onResume() {
      myApp.setOnFetchStartListener(this);
      super.onResume();
   }

   @Override
   public void onFetchStartListener() {
      //Some stuff
   }
} 
```

**问题**

如何在应用程序类中设置监听器以通知多个事件监听器？事件侦听器可能属于不同的类，而不仅仅是 FragmentActivities。

我可以在应用程序类中创建不同的侦听器以在调用时通知不同的事件侦听器（应用程序类中的每个事件侦听器的侦听器） `fetchUpdates`，但这并没有让我觉得非常有效。

**关于我**

我刚开始编程。非常感谢详细的解释。

**进步**

[Rciovati](https://stackoverflow.com/users/321354/rciovati)建议使用[EventBus](https://github.com/greenrobot/EventBus)。此解决方案可能有效，但必须在项目中引入一个新的（第三方）库。

我仍在寻找无需使用第三方库的解决方案。

# javascript - 动画 javascript 框架

> ID：15943609
> 
> 赞同：1
> 
> 时间：2013-04-11T08:04:33.947
> 
> 标签：javascript, html, canvas

我想在 html Canvas 中为只有 4 帧的精灵设置动画。我遇到了如下方法。来自 AS3 和 c# 背景，我真的不喜欢下面的代码，因为它很复杂。我会在这里待上几个小时，试图解决这个代码。有没有更简单的方法来为几帧设置动画，或者 JS 只是有点“旧”。

[http://codeutopia.net/blog/2009/08/21/using-canvas-to-do-bitmap-sprite-animation-in-javascript/](http://codeutopia.net/blog/2009/08/21/using-canvas-to-do-bitmap-sprite-animation-in-javascript/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:43:27.633

这可能对您有所帮助：[http ://creativejs.com/2012/01/day-11-sprite-sheets/](http://creativejs.com/2012/01/day-11-sprite-sheets/)

它基本上是一个每 x 毫秒调用一次的循环，清除画布并从序列中绘制新图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:21:03.470

看看这个库[http://www.spritely.net/documentation/](http://www.spritely.net/documentation/)，它很容易使用，这里是一个例子

[http://jsfiddle.net/VxMwN/](http://jsfiddle.net/VxMwN/)

```
$('#bird')
    .sprite({
    fps: 9,
    no_of_frames: 3
})
    .spRandom({
    top: 50,
    bottom: 200,
    left: 300,
    right: 320
}); 
```

# html - 使用隐藏输入通过 Ajax 发送额外数据

> ID：15943618
> 
> 赞同：0
> 
> 时间：2013-04-11T08:05:27.537
> 
> 标签：html, ajax, forms, hidden-field

目前，当用户提交表单时，我正在使用隐藏输入通过 Ajax 发送一些额外的值。我使用隐藏值的原因是因为我可以有一个带有文本字段的长列表，并为每个文本字段分配一个按钮。每次单击按钮时，我都必须发送文本字段中的值以及一些额外的值。

问题是任何人都可以检查 Chrome 中的代码（例如）并更改隐藏字段中的值。有没有更好的方法来做到这一点？

* * *

编辑：添加了一些代码以更好地说明我的问题

**HTML**

```
<div>
    <input type="textfield" name="value1" value="Default value for textfield" />
    <input type="hidden" class="hiddenValue" name="hiddenSuperSecretValue" value="superSecret" />
    <button class="submitButton">Submit</button>

    <input type="textfield" name="value2" value="Default value for textfield" />
    <input type="hidden" class="hiddenValue" name="hiddenSuperSecretValue" value="superSecret" />
    <button class="submitButton">Submit</button>
    ... more fields ...
</div> 
```

**JS**

```
$('.submitButton').click(function(){
    dataVar = "someValue" = $(this).closest('.hiddenValue').val();
    $.ajax({
        type: "POST",
        url: "/submitAjaxStuff.php",
        data: dataVar,
        cache: false,
        success: function(response){
            doSomething(response);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:58:08.313

如果您使用像 PHP 这样的服务器端语言，那么更好的选择是将隐藏的值存储在会话中，这样用户就无法访问它们。

# java - JProgressBar 不确定线程

> ID：15943621
> 
> 赞同：0
> 
> 时间：2013-04-11T08:05:46.050
> 
> 标签：java, swing, nullpointerexception, jprogressbar, swingutilities

我在创建一个`JProgressBar`设置为不确定的时遇到问题。以下代码是我的实现，`JProgressBar`并从另一个类调用/构造：

```
public class Progress implements Runnable
{
  private JFrame frameProgress;
  private JProgressBar progressBar;

  public Progress(String title, String message)
  {
    try
    {
      UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    }
    catch (Exception e)
    {
      GlobalVariables.LOGGING_logger.error("Error instatiating progress bar.",
          e);
    }

    UIManager.put("ProgressBar.selectionForeground", Color.black);
    UIManager.put("ProgressBar.selectionBackground", Color.black);

    this.frameProgress = new JFrame(title);
    this.frameProgress.setIconImage(GlobalVariables.GUI_icon.getImage());
    this.frameProgress.setSize(300, 60);
    this.frameProgress.setLocation(16, 16);
    this.progressBar = new JProgressBar();
    this.progressBar.setStringPainted(true);
    this.progressBar.setString(message);
    this.progressBar.setIndeterminate(true);
    this.frameProgress.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.frameProgress.add(this.progressBar);
    this.frameProgress.setResizable(false);
    this.frameProgress.setVisible(true);
  }

  public void start()
  {
    new Thread(this).start();
  }

  public void close()
  {
    this.frameProgress.dispose();
    this.frameProgress = null;
    this.progressBar = null;
  }

  @Override
  public void run()
  {
    SwingUtilities.invokeLater(new Runnable()
    {
      public void run()
      {
        // do nothing, because progress bar is indeterminate
      }
    });
  }
} 
```

这个 JProgressBar 的调用者是下面的代码片段：

```
 Progress p = new Progress("bla", "blub");
    p.start();
    boolean successfull = xmlWriter.writeCommonSettingsFromGUI(this);
    p.close(); 
```

现在我希望`xmlWriter.writeCommonSettingsFromGUI(this);`在做某事的`JProgressBar`同时向用户显示并在算法运行时工作。

我怎样才能做到这一点？我不太了解线程和在许多其他论坛中搜索，但我没有找到任何问题的答案。

请帮助我，并提前谢谢你;）

编辑： Progress JFrame 打开时没有内容，算法正在运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:40:06.690

您可能正面临 Swing 的并发问题。假设以下代码在 EDT（事件调度线程）上运行：

```
Progress p = new Progress("bla", "blub"); 
```

最终，这将打开一个带有进度条的 JFrame。

*   我会考虑使用 a`JDialog`而不是 a`JFrame`
*   我不会强制的大小`JFrame`，而是调用`pack()`

然后，仍然在 EDT 上运行（并因此阻止所有 UI 事件，例如重绘、鼠标点击等），您调用`p.start()`which 启动一个`new Thread()`which 将调用`run()`which 本身调用

```
SwingUtilities.invokeLater(new Runnable()
{
  public void run()
  {
    // do nothing, because progress bar is indeterminate
  }
}); 
```

除了在 EventQueue 上推送一个附加事件之外，这基本上不会做任何事情，它将在所有当前未决事件之后运行。此事件将运行...“无”，因为您的 Runnable 只是空的。新线程几乎立即死亡。所以所有这些代码都是无用的。

您仍然在 EDT 上追求`boolean successfull = xmlWriter.writeCommonSettingsFromGUI(this);`（顺便说一句，“成功”仅以一个“l”结尾）。这将继续阻塞 EDT，防止重绘发生并防止其`JProgressBar`本身进行绘制。最终您将处理 JFrame，但由于所有这些代码都在 EDT 上运行，用户将看不到太多进度条，并且 UI 看起来会冻结。

考虑阅读[Swing 标签 wiki](https://stackoverflow.com/tags/swing/info)（尤其是最后一部分，其中包含 3 个重要链接）。

使用 a`SwingWorker`应该可以帮助您解决这个问题。

# .htaccess - 使用 htaccess 将所有 https://www.mydomain.com 重定向到 https://mydomain.com（cpanel 中的 2 SSL HOST）

> ID：15943622
> 
> 赞同：4
> 
> 时间：2013-04-11T08:05:46.493
> 
> 标签：.htaccess

我需要重定向一个`https://www.mydomain.com to https://mydomain.com.`使用此 .htaccess 的域，但它对我不起作用。

以前我有 ssl 证书`https://www.mydomain.com`，但它坏了，我们为主机注册新的 ssl`https://mydomain.com`

在 WHM 中只有一台 ssl 主机，但在 cpanel 中有两台主机，一台是旧的`www.mydomain.com`并且`mydomain.com`（这对重定向有影响吗？）

.htaccess 如下。

```
RewriteEngine on

RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^www\.mydomain\.com$ [NC]
RewriteRule ^(.*)$ https://mydomain.com/$1 [R=301,L]

RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$ [NC]
RewriteRule ^(.*)$ https://mydomain.com/$1 [R=301,L] 
```

我在输入时总是收到安全警报`https://www.mydomain.com`。

我在这里犯了什么错误？

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-11T08:14:17.443

> 这里有什么错误？

错误是*没有*变量`%{HTTPS_HOST}`。这`%{HTTP_HOST}`是作为 HTTP 协议一部分的请求标头（主机）。您不需要第 3 行，您要做的是使用`%{HTTPS}`变量检查请求是否为 HTTPS，就像您在第一个条件下所做的那样：

```
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$ [NC]
RewriteRule  ^(.*)$ https://mydomain.com/$1 [L,R=301]

RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^www\.mydomain\.com$ [NC]
RewriteRule  ^(.*)$ https://mydomain.com/$1 [L,R=301] 
```

# node.js - NodeJS + ExpressJS，无法读取环境变量

> ID：15943624
> 
> 赞同：5
> 
> 时间：2013-04-11T08:05:57.253
> 
> 标签：node.js, express

我在 Express.js 中设置了一个变量，如下所示`app.set('HOST', 'demo.sample.com');`：但是，如果我尝试读取这个变量，我会得到`undefined`输出。我正在使用`process.env.HOST`. 不过，如果我尝试使用 读取它`app.get('HOST')`，我会得到正确的值。

我不能使用`app.get('HOST')`，因为我也在另一个文件中读取变量——一个不包含对 Express.js 应用程序变量的引用的文件。

如何使用 获得价值`process.env.HOST`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T08:18:49.823

`app.set()`不设置环境变量，它只是 Express 提供的一种方便的方法，可以与`app.get()`.

如果要在 JS 代码中设置环境变量，请使用以下命令：

```
process.env.HOST = 'demo.sample.com'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:08:27.890

更新： process.env 仅读取您的操作系统环境设置。要设置 express vars，请使用 app.get() 和 app.set()，就像在另一个答案中一样。

您的 HOST 变量是否已设置？它通常设置为 HOSTNAME。

```
[zlatko@droplet ~]$ node
> process.env.HOST
undefined
> process.env.HOSTNAME
'droplet.zlayer.net'
> 
```

不过，您可以在 Bash 中手动设置它（我假设您使用 bash）：

```
[zlatko@droplet ~]$ export HOST=$HOSTNAME
[zlatko@droplet ~]$ node
> process.env.HOST
'droplet.zlayer.net' 
```

>

导出行可能是文字，即：

```
export HOSTNAME=myhostname.myserver.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:36:43.333

如果您使用的是 Linux，则需要为 bash/shell 设置环境变量，以便从 APP 中调用它。尝试使用 export NODE_ENV='production' 或 'development' 设置环境变量，然后使用 app.configure 'production',() -> 配置您的应用程序，然后重试

# html - 为什么垂直对齐：中间不像文本对齐：中心

> ID：15943625
> 
> 赞同：-5
> 
> 时间：2013-04-11T08:05:58.230
> 
> 标签：html, css

有人可以告诉我*为什么* `vertical-align:middle`不工作`text-align:center`吗？

我的意思是，为什么让它工作这么难？

我想知道为什么那些 W3 人不做`text-align:middle`

我在问为什么做这样的事情这么`vertical-align:middle`难`text-align:center`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:10:08.223

垂直对齐属性仅适用于内联元素。它对块级元素没有影响，例如 div 或段落。如果您想将内联元素垂直对齐到中间，只需使用它。

请参阅此链接： http: [//phrogz.net/CSS/vertical-align/index.html](http://phrogz.net/CSS/vertical-align/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:10:00.567

```
text-align:center 
```

意味着将文本放在`<p>`标签宽度的中心，例如

```
vertical-align:middle 
```

方法。例如，将 放在`<p>`父标签高度的中心（中间）`<div>`。这意味着您需要增加父级的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:11:43.450

垂直对齐像这样按高度对齐：

```
___________________________
Some text aligned top

Some text aligned middle

Some text aligned bottom
__________________________ 
```

可以在此处找到有关水平对齐的帮助：http: [//www.w3schools.com/css/css_align.asp](http://www.w3schools.com/css/css_align.asp)

# enterprise-architect - 转换包后标记值和模式值更改为真

> ID：15943628
> 
> 赞同：0
> 
> 时间：2013-04-11T08:06:08.940
> 
> 标签：enterprise-architect

我正在使用 Enterprise Architect，当我想使用转换模板将包从逻辑层转换为物理层时，标记值更改如下： ![在此处输入图像描述](https://i.stack.imgur.com/4J74W.jpg)

我应该在转换模板中修改什么以在输出中具有相同的值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:22:59.237

标准 DDL MDA 转换不直接支持标记值，因此在转换模板中，我添加了一些标记值替换宏，例如：

```
%if attTag:"length" != ""%
      Tag
      {
       name = "length"
       value=%qt%%attTag:"length"%%qt%
       }
    %endIf%
    %if attTag:"minLength" != ""%
       Tag
      {
       name = "minLength"
       value=%qt%%attTag:"minLength"%%qt%
       }
    %endIf%
    %if attTag:"maxLength" != ""%
       Tag
      {
       name = "maxLength"
       value=%qt%%attTag:"maxLength"%%qt%
       }
    %endIf% 
```

# mysql - 如何通过时差删除MySQL数据库中的重复项

> ID：15943633
> 
> 赞同：0
> 
> 时间：2013-04-11T08:06:37.820
> 
> 标签：mysql, sql

我已经查看了另一个具有类似主题的问题，但它并没有解决我目前遇到的问题。

我有两张桌子：

```
users (id, name)

projects (id, user_id, image, inserted) 
```

由于“项目”表中的 Flash 应用程序出现错误，因此存在许多重复项（一个项目被添加了多次）。连续副本之间存在几秒钟的时间差（小于 10 秒），这是确定重复项的唯一方法（用户可以添加无限数量的项目，但创建一个项目至少需要一分钟）。

如何选择和删除副本（并保留原始副本）？

**编辑：**

Robin Castlin 在下面发布的解决方案几乎就在那里，但是这个查询：

```
SELECT p2.id
FROM project AS p
INNER JOIN project AS p2
ON p.id != p2.id AND p.user_id = p2.user_id AND 
    ABS(TIME_TO_SEC(TIMEDIFF(p.inserted, p2.inserted))) <= 10
GROUP BY p2.id 
```

选择所有副本（如果用户添加项目 5 次，它会给我 5 个 ID）。所以让我们反过来问题：如何从该组中选择除第一个/最后一个之外的所有内容？还是只有第一个/最后一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:18:26.380

```
CREATE TEMPORARY TABLE tmp_project (
    p1_id INT,
    p2_id INT
)
SELECT p.id, p2.id
FROM project AS p
INNER JOIN project AS p2
ON p.user_id = p2.user_id AND 
    ABS(TO_SECONDS(TIME_DIFF(p.inserted, p2.inserted))) <= 10;

SELECT p2_id
FROM tmp_project
WHERE p2_id NOT IN (SELECT p2_id
                    FROM tmp_project
                    GROUP BY p1_id)
GROUP BY p2_id; 
```

I made it a bit more complex now. Since we would need to use the same rows 2 times to filter the 1st occurence, I create a temporary table and handle it from there after. I join all the cases, even on the same id, and then filter it by using `NOT IN` and `GROUP BY p1_id`.

**This solution could also be used if image data where identical for duplicates:**

Shouldn't the `image` field be identical in these cases?

```
SELECT id
FROM project
WHERE id NOT IN (   SELECT id
                    FROM projects
                    GROUP BY image, user_id) 
```

This would make get you a list of all the duplicates that isn't the first one in the table.

* * *

Then take those IDs and simply

```
DELETE FROM project WHERE id IN (id1, id2, id3, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:13:46.730

取两个连续时间之间的差。

如果差异为 10 秒 [根据您的帖子]，则不要添加它。

这是一个可以帮助您准确计算时间差异的问题。

[如何在 sql server 2005 中拆分时间并计算时差？](https://stackoverflow.com/questions/7721984/how-to-split-time-and-calculate-time-difference-in-sql-server-2005)

# javascript - 将地图与选择相关联

> ID：15943637
> 
> 赞同：1
> 
> 时间：2013-04-11T08:06:43.350
> 
> 标签：javascript

我有一张不同地区的地图。我需要的是当我在地图上的区域上单击（js 中的.click 函数）时，它与我的选择有关：

```
<label class="b-map__form__region">
                    Region
                    <span class="value custom-select">Choose region</span>
                    <select class ="region_load" id="region_load" name="r_id">
                        <?php foreach($this->regions as $region): ?>
                        <option><?php echo $region['r_name'] ?></option>
                        <?php endforeach; ?>
                    </select>
                </label> 
```

我的地图和 onclick 功能有这个 js，这里的区域已经与标题相关联，所以我也需要它与 select 相关联：

```
 var
                $mapItem = $('.b-map__item'),
                $mapHighlight = $('.b-map__item__highlight'),

                $mapFormRegion = $('.b-map__form__region'),
                $currentRegion = $mapFormRegion.find('.value'),

                .on({
                    click: function() {
                        var
                            $this = $(this),
                            regionCode = $this.attr('href').replace('#', ''),

                        $currentRegion.html($this.attr('title'));
                        $mapCity.html('');

                        $mapHighlight.attr('class', 'b-map__item__highlight ' + regionCode);
                    }
                }, 'area'); 
```

$currentRegion - 它是变量，是选择区域的答案，你可以看到它放在我的区域标题上，我也需要把它放在选择中。

我在我的 js 中为我的地图找到了一些关于坐标的代码。谢谢你的帮助！

我的地图有很多区域，这里我只显示一个：

```
 <div class="b-map">

        <div class="b-map__city"></div>

        <div class="b-map__item">
            <img class="mapImage" src="/images/map-light.png" width="701" height="408" border="0" usemap="#map" />

            <map name="map">
                <area shape="poly" coords="615,0,554,20,548,87,558,93,554,106,557,112,571,118,592,112,592,104,611,88,618,96,628,93,632,77,639,78,640,52,621,55,614,35,631,20" title="<?php echo isset($this->region['chu']) ? $this->region['chu']['r_name'] : "region name for  chu" ?>" href="#chu" />
</map>

                <div class="b-map__item__highlight"></div>
                <div class="b-map__item__pin"></div>

            </div> 
```

区域不只是一个，它大约有60个区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:07:13.020

好吧，这是一种完全不同的方法，但也许这个方法会给你想要的结果或提示。:)

**HTML**

```
<select id="region-select" name="region-select" size="1">
    <option value="-1">...</option>
    <option value="1">Region #1</option>
    <option value="2">Region #2</option>
    <option value="3">Region #3</option>
</select>
<div id="map">
    <a href="#" title="Title of region #1" id="region-1" class="area">Region #1</a>
    <a href="#" title="Title of region #2" id="region-2" class="area">Region #2</a>
    <a href="#" title="Title of region #3" id="region-3" class="area">Region #3</a>
</div> 
```

**CSS**

```
#map {
    width:800px;
    height:370px;
    background:transparent url('http://upload.wikimedia.org/wikipedia/commons/c/c3/World_Map_FIVB.png') top left no-repeat;
    position:relative;
}

#map .area {
    position:absolute;
    display:block;
    text-indent:-9999px;
}

#region-1 {
    top: 40px;
    left:50px;
    height:30px;
    width:100px;
    background-color:#990000;
}

#region-2 {
    bottom: 40px;
    right:400px;
    width:20px;
    height:30px;
    background-color:#009900;
}

#region-3 {
    top:50px;
    right:500px;
    width:40px;
    height:70px;
    background-color:#000099;
}

.area.highlight {
    box-shadow: 0px 0px 4px 8px #333333;
    -webkit-box-shadow: 0px 0px 4px 8px #333333;
    -moz-box-shadow: 0px 0px 4px 8px #333333;
    -o-box-shadow: 0px 0px 4px 8px #333333;
    -ms-box-shadow: 0px 0px 4px 8px #333333;
    opacity:0.75;
    -webkit-opacity:0.75;
    -moz-opacity:0.75;
    -o-opacity:0.75;
    -ms-opacity:0.75;
} 
```

**JavaScript**

```
$(document).ready(function() {
    selectRegion = function(ev) {
        if($(this).find('option:selected').val() > 0) {
            $('.area').removeClass('highlight').filter('#region-'+$(this).find('option:selected').val()).addClass('highlight');   
        }
        ev.preventDefault();
    };
    $('#region-select').on('change',selectRegion);
}); 
```

[http://jsfiddle.net/qhKLR/](http://jsfiddle.net/qhKLR/)

另外......如果您有不同区域的透明图像并且不希望这些透明区域是可选的（我假设在读取给定区域的多边形坐标时），您可以尝试我使用 jquery 制作的脚本。它允许您将选择限制在图像的非透明区域，并触发透明区域后面的元素。（fe点击）[http://www.cw-internetdienste.de/pixelselection/](http://www.cw-internetdienste.de/pixelselection/)

# c# - C#文件访问错误

> ID：15943642
> 
> 赞同：2
> 
> 时间：2013-04-11T08:06:49.700
> 
> 标签：c#, ftp, file-access

我有以下 C# 代码：

```
string selectedFile = "D:\..\IMGP2695.JPG";
MyImage myImage = new MyImage();
Image image = Image.FromFile(selectedFile);
string thumbnail_name = CreateThumbnail(image);
myImage.height = image.Height + "px";
myImage.width = image.Width + "px";
ftp.upload(myImage.internalName, selectedFile, directory);

 The process cannot access the file `'D:\..\IMGP2695.JPG'` because it is being used by another process. 
```

当代码尝试运行时出现此错误`ftp.upload`。我知道错误的含义，但我不知道如何关闭打开文件的句柄。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:09:43.303

尝试`dispose`通过包装来成像 `Image.FromFile`对象`using`：

```
string selectedFile = "D:\..\IMGP2695.JPG";
MyImage myImage = new MyImage();
string thumbnail_name = string.empty;
using(Image image = Image.FromFile(selectedFile)){
   thumbnail_name = CreateThumbnail(image);
   myImage.height = image.Height + "px";
   myImage.width = image.Width + "px";
}
ftp.upload(myImage.internalName, selectedFile, directory); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:09:29.023

`Image image = Image.FromFile(selectedFile);` *因为你在上传之前*打电话，出于某种原因。

如果您查看 [Image.FromFile](http://msdn.microsoft.com/it-it/library/4sahykhd%28v=vs.110%29.aspx)文档，您将看到以下字符串：

> 该文件保持锁定状态，直到图像被释放。

这意味着，根据提供的代码，即使*在*上传完成后，您也可以初始化 Image。

```
ftp.upload("NAME_OF_THE_FILE_RECOVERED_FROM_FILE_ITSELF", selectedFile, directory);

Image image = Image.FromFile(selectedFile); 
```

# java - Mockito 模拟任何 I18n 实例创建的运行时

> ID：15943644
> 
> 赞同：0
> 
> 时间：2013-04-11T08:06:55.500
> 
> 标签：java, mockito

我有一个场景，就像我在代码中动态创建 i18n 对象实例一样。我正在使用以下代码：

```
public String getLocaleString(Locale locale, SlingHttpServletRequest request){
    final ResourceBundle bundle = request.getResourceBundle(locale);
    I18n i18n = new I18n(bundle);
    return i18n.get("local");
} 
```

在这里语言环境，我嘲笑过的请求。但是 i18n 是动态创建的。所以我无法嘲笑`i18n.get("local")`。

我尝试使用：

```
when(any(I18n.class).get("local")).thenReturn("localizedString") 
```

但我做不到。我在这一行得到 NullPointerException 。

我想使用 Mockito 来模拟这个场景。你们能帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:04:19.333

Mockito 建议重构以解决此问题[https://code.google.com/p/mockito/wiki/MockingObjectCreation?ts=1332544670&updated=MockingObjectCreation](https://code.google.com/p/mockito/wiki/MockingObjectCreation?ts=1332544670&updated=MockingObjectCreation)

我通常避免测试该方法的内部结构。

但在某些情况下，当我真的需要时，我会使用 PowerMockito [https://code.google.com/p/powermock/wiki/MockConstructor](https://code.google.com/p/powermock/wiki/MockConstructor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:21:06.753

我认为不可能以`any()`这种方式使用，因为它是一个参数匹配器，你应该只指定一个`mock`带有方法调用的对象，例如：

```
when(mock(i18n).get("local")).thenReturn("localizedString"); 
```

我认为这可能是您的`NullPointerException`.

但是要解决您的问题，我认为您有两种选择：

首先是使用工厂创建`I18n`对象，然后mock工厂：

```
...
private I18nFactory factory;
...

public String getLocaleString(Locale locale, SlingHttpServletRequest request){
    final ResourceBundle bundle = request.getResourceBundle(locale);
    I18n i18n = factory.get(bundle);
    return i18n.get("local");
} 
```

然后在您的测试中，设置工厂以生产您想要的对象：

```
// Mock I18n, locale, request etc...

final I18nFactory factory = mock(I18nFactory.class);
when(factory.get(bundle)).thenReturn(i81n);

// Assign 'factory' to your Controller(?)
controller.setI18nFactory(factory);

// act, assert etc... 
```

第二种方法是以创建满足您期望的有效对象的方式设置`locale`和`request`模拟/对象。`new I18n(...)`

总的来说，我认为我更喜欢使用第二种方法，特别是如果`I18n`是第 3 方课程。尽管没有关于您的测试目的的更多信息，但这个答案有点投机。无论如何，我希望这会有所帮助。

# wpf - WPF Datagrid Items Refresh失去焦点

> ID：15943645
> 
> 赞同：2
> 
> 时间：2013-04-11T08:06:57.697
> 
> 标签：wpf, datagrid, focus, refresh

当我的 observableCollection 在视图模型中更新时刷新我的数据网格是一场噩梦。在我发现 DataGrid 不会响应 ObservableCollection 引发的事件后，我发现了 DataGrid.Items.Refresh。它确实刷新，但随后 DataGrid 失去焦点。我有一个简单的列表，我想在按下一个键然后更新时更改一个值。用户在使用键盘快捷键时必须再次选择鼠标是不可接受的......这是一个简单的例子：

```
 <DataGrid x:Name="MyDataGrid" SelectionMode="Single" AutoGenerateColumns="False" IsReadOnly="True" KeyUp="MyDataGrid_KeyUp">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="First Name" Binding="{Binding Path=First}"/>
                    <DataGridTextColumn Header="Last Name" Binding="{Binding Path=Last}"/>
                </DataGrid.Columns>
            </DataGrid> 
```

以及背后的代码：

```
 private void MyDataGrid_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.Key.Equals(Key.Space))
        {
            MyDataGrid.Items.Refresh();
        }
    } 
```

ps 在这个例子中，我在后面的代码中设置了 ItemsSource，而不是绑定到 ObservableCollection。另外我只使用代码隐藏而不是 ViewModel，但问题是一样的。

编辑：最初的问题是我没有在课堂上使用 NotifyPropertyChanged。但是，这里提出的问题仍然是“开放的”，当我执行 Refresh() 时，我无法真正理解失去焦点的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:26:50.853

*当我的 observableCollection 在视图模型中更新时刷新我的数据网格是一场噩梦。*- 为什么这是一场噩梦？不过应该很容易。

关于你的问题。请尝试以下

```
private void MyDataGrid_KeyUp(object sender, KeyEventArgs e)
{
    if (e.Key.Equals(Key.Space))
    {
        MyDataGrid.Items.Refresh();
        MyDataGrid.Focus();
    }
} 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.uielement.focus.aspx)找到相关文档。

**编辑**
让我们试试这个

```
private void MyDataGrid_KeyUp(object sender, KeyEventArgs e)
{
    if (e.Key.Equals(Key.Space))
    {
        MyDataGrid.Items.Refresh();
        FocusManager.SetFocusedElement(MyDataGrid);
    }
} 
```

欲了解更多信息，请查看[此处](http://msdn.microsoft.com/de-de/library/system.windows.input.focusmanager.setfocusedelement.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-31T10:45:26.023

通过调度程序安排刷新对我有用（使用 TreeView）。

所以不要这样做（失去焦点）：

```
tree.Items.Refresh(); 
```

我这样做（不会失去焦点）：

```
Dispatcher.BeginInvoke(new Action(() => tree.Items.Refresh())); 
```

不知道为什么，但它对我有用。

# ios - 使用 UIButton 传递多个标签

> ID：15943648
> 
> 赞同：2
> 
> 时间：2013-04-11T08:07:02.870
> 
> 标签：ios, objective-c, uibutton

好的，我有一个具体的情况。我正在使用自定义类来创建一些按钮，并且可以使用唯一的数字设置它们的标签属性，例如：

```
button.tag =[NSNumber numberWithInt:[10]]; 
```

这在我程序的另一部分非常有用，因为我可以访问这个独特的标签，例如：

```
UIButton *clicked= (UIButton *) sender;

ButtonTag = [NSString stringWithFormat:@"%d", clicked.tag]; 
```

现在我想再传递一个像这样的独特属性。我正在编造这个，但这就是我的设想

```
button.tagCREATED_BY_ME =[NSNumber numberWithInt:[9000]]; 
```

这个问题可能措辞不好，但我不知道更好，所以我称之为“标签”。（正确的措辞可能是元素/属性等）我如何创建一个类似的属性来像.tag一样工作？

非常感谢！阿尔达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:18:07.150

你想达到什么目标？

有可能添加关联引用。这样做的好处是您不需要对它进行子类化。因此，首先为以下内容创建一个类别`UIButton`：

```
@interface UIButton (ExtraTag)

@property (nonatomic, retain) id extraTag;

@end 
```

还有他们：

```
static char const * const ExtraTagKey = "ExtraTag";

@implementation UIButton (ExtraTag)
@dynamic extraTag;

- (id)extraTag {
    return objc_getAssociatedObject(self, ExtraTagKey);
}

- (void)setExtraTag:(id)newExtraTag {
    objc_setAssociatedObject(self, ExtraTagKey, newExtraTag, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
} 
```

[您可以查看我使用的文章](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-19T21:37:20.967

# CALayer实际上允许[Key-Value 编码。](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/Key-ValueCodingExtensions/Key-ValueCodingExtensions.html)

您实际上可以这样做（在任何**UI**对象上）：

`[button.layer setValue:@(9000) forKey:@"tagCREATED_BY_ME"];`

并阅读它只是使用

`[button.layer valueForKey:@"tagCREATED_BY_ME"]`

* * *

* * *

* * *

# *强制性的，以上就是您启动和运行所需的全部内容，您可以开始了。*

对于其他人，更高级的/或/特定的东西如下：

如果您需要这些键在尚未分配任何内容时具有默认值...如果您根据模式命名它们，则可以将这些自定义“标签” **（** eh *）设置为具有默认返回值。*例如，我以“customKey_”开头所有图层键名称。所以上面应该是@“customKey_tagCREATED_BY_ME”，然后你可以让你的 .m 文件返回任何标准键的默认键值，`masksToBounds`但然后为你的键（也就是以“customKey_”开头的键）返回一个非常具体的值以下方法：

```
+(id)defaultValueForKey:(NSString *)key {
    if ([key hasPrefix:@"customKey_"]) {
        return @(0);
    }
    return [CALayer defaultValueForKey:key];
} 
```

你必须有一个命名模式（比如总是有前缀“customKey_”）的原因是你不会干扰 CALayer 的自然属性，比如`.size`and`.backgroundColor`等。你想要返回的默认值只会在属性上返回（键) 以“customKey_”或您使用的任何命名模式开头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T08:13:14.927

在您的子类/自定义按钮中，您可以添加一个字符串属性，甚至是一个整数属性，无论您感觉如何。

```
@interface CustomButton: ....
       ...
       @property(strong) NSString *createdBy;

@end 
```

然后你可以访问那些`aButton.createdBy`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T08:17:05.040

您还可以使用关联引用而不是标签操作

```
#import <objc/runtime.h>

static char kThumbnailButtonAssociatedPhotoKey;

// ...

- (void)setAssociatedPhoto:(Photo *)associatedPhoto
        forThumbnailButton:(UIButton *)thumbnailButton
{
    objc_setAssociatedObject(thumbnailButton,
                             &kThumbnailButtonAssociatedPhotoKey,
                             associatedPhoto,
                             OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (Photo *)associatedPhotoForThumbnailButton:(UIButton *)thumbnailButton
{
    return objc_getAssociatedObject(thumbnailButton,
                                    &kThumbnailButtonAssociatedPhotoKey);
} 
```

现在我们可以轻松地设置/获取按钮的关联照片：

```
- (void)configureThumbnailButtonForPhoto:(Photo *)photo
{
    // ...
    [self setAssociatedPhoto:photo
          forThumbnailButton:thumbnailButton];
    // ...
}

- (void)thumbnailButtonTapped
{
    Photo *photo = [self associatedPhotoForThumbnailButton:thumbnailButton];
    // ...
} 
```

[关于标签和相关参考的博客文章](http://doing-it-wrong.mikeweller.com/2012/08/youre-doing-it-wrong-4-uiview.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T08:15:12.230

您可以查看[KVC](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)。

或者，如果您想坚持 KISS 原则 - 继承 UIButton 并创建一个属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T08:12:47.960

您可以子类化`UIButton`.

在您的子类中，添加一个新属性：

```
@property (strong, nonatomic) NSNumber *tagCREATED_BY_ME; 
```

# python - django cms 自定义应用程序页面无限重定向

> ID：15943649
> 
> 赞同：1
> 
> 时间：2013-04-11T08:07:33.017
> 
> 标签：python, django, django-cms

我正在使用 Django-cms 构建网站并编写自己的 Django 应用程序 (request_quote)

我遇到的错误是，当我尝试访问在 request_quote.urls.py 中定义的 url 时，它陷入了无限循环，但 Django-cms 创建的页面运行良好

我做了一切，如[http://docs.django-cms.org/en/develop/extending_cms/extending_examples.html](http://docs.django-cms.org/en/develop/extending_cms/extending_examples.html)

重定向：

> ```
> [11/Apr/2013 09:55:32] "GET / HTTP/1.1" 302 0
> [11/Apr/2013 09:55:36] "GET /en-us/ HTTP/1.1" 200 279593
> [11/Apr/2013 09:55:42] "GET /request_quote/new/ HTTP/1.1" 302 0
> [11/Apr/2013 09:55:44] "GET /en-us/request_quote/new/ HTTP/1.1" 302 0
> [11/Apr/2013 09:55:45] "GET /en-us/en-us/request_quote/new/ HTTP/1.1" 302 0
> [11/Apr/2013 09:55:46] "GET /en-us/en-us/en-us/request_quote/new/ HTTP/1.1" 302 0
> [11/Apr/2013 09:55:47] "GET /en-us/en-us/en-us/en-us/request_quote/new/ HTTP/1.1" 302 0
> [11/Apr/2013 09:55:48] "GET /en-us/en-us/en-us/en-us/en-us/request_quote/new/ HTTP/1.1" 302 0
> [11/Apr/2013 09:55:49] "GET /en-us/en-us/en-us/en-us/en-us/en-us/request_quote/new/ HTTP/1.1" 302 
> ```
> 
> 0 [2013 年 4 月 11 日 09:55:50] “GET /en-us/en-us/en-us/en-us/en-us/en-us/en-us/request_quote/new/HTTP/ 1.1" 302 0

我的'request_quote.urls'

```
from django.conf.urls import patterns, url

from request_quote import views

urlpatterns = patterns('',
                       url(r'^new$', views.new, name='new'),
) 
```

'request_quote. cms_app'

```
from cms.app_base import CMSApp
from cms.apphook_pool import apphook_pool
from django.utils.translation import ugettext_lazy as _

class RequestQuote(CMSApp):
    name = _("RequestQuote")
    urls = ["request_quote.urls"]

apphook_pool.register(RequestQuote) 
```

编辑：部分错误是找不到 url/view（应该是 404）通过在 url 中放置随机内容找到它（生成相同的无限循环）

EDIT2：由于 andrews barret [django-cms app hook at homepage error部分修复](https://stackoverflow.com/questions/9141867/django-cms-app-hook-at-homepage-error/9142118#9142118)

> 我基本上在 /home 中添加了一个名为 /films 的子页面，**确保它** **不在 navigation**中，并在那里添加了 app-hook。

这不起作用

```
 urlpatterns = patterns('',
                           url(r'^new$', views.new, name='new'),
    ) 
```

这项工作：

```
urlpatterns = patterns ('',
                       url(r'^.*$', 'request_quote.views.new', name='new'),
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:44:37.437

可以通过在 settings.py 中仅使用后备语言中的“en”来修复

```
CMS_LANGUAGES = {
    'default': {
        'fallbacks': ['en',],
        'redirect_on_fallback':True,
        'public': False,
        'hide_untranslated': False,
    }
} 
```

并设置 LANGUAGE_CODE = 'en'

# java - 创建“机器人”的多个实例

> ID：15943651
> 
> 赞同：2
> 
> 时间：2013-04-11T08:07:38.640
> 
> 标签：java

我正在大学学习编程（我们正在使用 Learning to program with Robots Book/Package -becker.robots）并且我们被分配了一个项目，我们必须在其中创建一个可以逃离房间的机器人。我已正确完成该部分并正常工作。

然后我们必须创建 10 个随机生成的机器人并找到离开房间的路。老实说，我不知道如何创建多个机器人（我之前的代码适用于在任何地方产生的机器人，所以没问题）。

我的教授提到代码应该包含在这部分的 main 中，我们应该以某种方式使用 Math.Random。就是这样...

我们还必须添加一个计数器来计算这些机器人的平均移动次数。

我不是在寻找答案或任何东西，只是朝着正确的方向伸出援助之手，因为我非常非常卡住。抱歉，如果这不清楚。我觉得很难解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:18:12.530

您可以使用循环来创建多个机器人实例，并在循环中随机化每个机器人的初始条件（位置和方向？）
此外，如果要同时运行机器人，则必须使用多线程（其中我认为如果超出此类练习的范围）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:20:45.937

In java when you need to create a new object of something you use the `new` keyword

the code will look something like this

```
Robot r = new Robot(<paramaters>); 
```

java also has a function called `math.random()` that will return a double value between 0.0 and 1.0\. you can get this to give you a value from 0 to n by multiplying the value returned by math.random() with n. i.e.

```
//Returns value from 0 - n
n*math.random 
```

you can use this to give random locations at which to initialize the robots.

By doing this in a loop, you can declare a new robot and have it escape the maze multiple times

Hope this helps

# node.js - Node.js 中的生成器——Fiber 还是纯 JavaScript？

> ID：15943653
> 
> 赞同：0
> 
> 时间：2013-04-11T08:07:52.530
> 
> 标签：node.js, memory-leaks, closures, node-fibers

我正在尝试在 Node.js 中实现生成器。我遇到了[node-fiber](https://github.com/laverdet/node-fibers)和[node-lazy](https://github.com/pkrumins/node-lazy/)。Node-lazy 处理数组和流，但本质上不会生成惰性事物（数字除外）。

虽然使用 Fiber 看起来更干净，但它也有[其缺点](https://stackoverflow.com/a/10287442/73398)，因此，我更喜欢带有闭包的纯 Javascript，因为它更明确。我的问题是：**使用闭包生成迭代器是否存在内存或性能问题**？

例如，只要调用者要求，我就尝试以深度优先方式遍历树。我想首先找到`'waldo'`并停止。

纤维：

```
var depthFirst = Fiber(function iterate(tree) {
    tree.children.forEach(iterate);
    Fiber.yield(tree.value);
});

var tree = ...;
depthFirst.run(tree);
while (true) {
    if (depthFirst.run() === 'waldo')
        console.log('Found waldo');
} 
```

带有闭包的纯 JavaScript：

```
function iterate(tree) {
    var childIndex = 0;
    var childIter = null;
    var returned = false;
    return function() {
        if (!childIter && childIndex < tree.children.length)
            childIter = iterate(tree.children[childIndex++]);

        var result = null;
        if (childIter && (result = childIter()))
            return result;

        if (!returned) {
            returned = true;
            return tree.value;
        }
    };
}

var tree = ...;
var iter = iterate(tree);
while (true) {
    if (iter() === 'waldo')
        console.log('found waldo');
} 
```

# c# - 我如何获得选择行和行数

> ID：15943664
> 
> 赞同：0
> 
> 时间：2013-04-11T08:08:30.440
> 
> 标签：c#, sql-server, ado.net

大家好，我正在尝试为某些实体创建分页，我有这样的签名功能`public static List<someClass> somePageingFunc(int curentPage,int pageSize,int out maxCount)` 我不能使用存储过程我是 sql 新手请告诉我我做错了什么

```
string comandStr = "DECLARE @MaxCount int SELECT @MaxCount= Count (*) FROM tbMediaItems"+
                                    " SELECT top(@NumOfRows) * FROM ( SELECT RowNum = ROW_NUMBER() OVER ("+
                                    "ORDER BY Artist), * FROM tbMediaItems) AS a WHERE RowNum > (@NumOfRows * (@CurrentPage - 1)) RETURN @MaxCount";
                conn.Open();
                SqlCommand cmd = conn.CreateCommand();
                cmd.CommandText = comandStr;
                cmd.CommandType = CommandType.Text;
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.Add("@NumOfRows", SqlDbType.Int).Value = pageSize;
                cmd.Parameters.Add("@CurrentPage", SqlDbType.Int).Value = curentPage;
                cmd.Parameters.Add("@Result", SqlDbType.Int).Direction = 

ParameterDirection.ReturnValue;
try
                {
                    //SqlDataReader reder = cmd.ExecuteReader();
                    SqlDataReader reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        var ss = reader[0];
                        var bb = reader[1];
                    }
                    maxCount = Convert.ToInt32(cmd.Parameters["@Result"].Value);
                }
                catch (Exception ex)
                {

                } 
```

我得到 Exeption Message = A RETURN statement with a return value cannot be used in this context。当我删除 RETURN @MaxCount 一切正常但我没有得到 MaxCount

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:11:39.427

更新您的代码并用于`ParameterDirection.Output`获取返回值：

```
cmd.Parameters.Add("@Result", SqlDbType.Int).Direction = 
ParameterDirection.ReturnValue; 
```

至

```
 cmd.Parameters.Add("@Result", SqlDbType.Int).Direction  = 
 ParameterDirection.Output; 
```

## 编辑1：

您可以按如下方式创建存储过程：

```
CREATE PROC [dbo].[procGetMaxCount]
@NumOfRows int,
@CurrentPage int,
@Result int OUTPUT  
AS    
BEGIN   
    SELECT @Result= Count (*) FROM tbMediaItems
                      SELECT top(@NumOfRows) * FROM ( SELECT RowNum = ROW_NUMBER() OVER (ORDER BY Artist), * FROM tbMediaItems) AS a WHERE RowNum > (@NumOfRows * (@CurrentPage - 1))                                       
END 
```

并将您的 .cs 文件更新为：

```
 string comandStr="procGetMaxCount"; 
```

和`cmd.CommandType = CommandType.StoredProcedure;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:23:03.000

[RETURN](http://msdn.microsoft.com/en-nz/library/ms174998.aspx)在存储过程中用于退出并同时指示状态。您**不能**仅在查询批处理中使用它。

对于您的用例，我可能会做以下两件事之一：

1.  批量使用两个查询。您可以使用 reader.NextResult 批量在多个结果集之间移动。
2.  使用两个独立的SqlCommands

稍微复杂一点，但您也可以在结果集中添加一个额外的列，例如

```
SELECT top(@NumOfRows) B.*, A.TotalRows
FROM (SELECT TotalRows = COUNT(*) FROM tbMediaItems) A
CROSS JOIN ( SELECT RowNum = ROW_NUMBER() OVER (ORDER BY Artist) ... 
```

尽管如果您的表非常大，可以用[sys.partitions 表上的这种类型的查询](https://stackoverflow.com/a/6069288/573261)`COUNT(*)`替换此处或您原来的内容。除了非常高的事务性表之外，它大部分是准确的。

# php - 发送电子邮件时如何在 php 邮件程序“发件人”属性中添加“通过域”？

> ID：15943669
> 
> 赞同：0
> 
> 时间：2013-04-11T08:08:43.507
> 
> 标签：php, phpmailer

我希望我的收件人收到一封带有“FROM”的电子邮件，就像这种格式

```
sasori <sasori@blablah.com> via blahblah.com 
```

问题是，当 php 邮件程序的“发件人”属性仅接受电子邮件地址时，如何添加“通过 blahblah.com”。如果我连接“通过 blablah.com”，它会引发错误

# ios6 - 发送推送通知时如何从 APN 获取反馈

> ID：15943671
> 
> 赞同：5
> 
> 时间：2013-04-11T08:08:53.443
> 
> 标签：ios6, push-notification, push, feedback, passbook

现在我可以从已经安装通行证的设备发送推送令牌，但我不知道此时反馈是如何工作的。从苹果文档中，苹果推送通知服务 (APNs) 向服务器提供反馈，以判断 pushToken 是否有效。如何获得此反馈？我尝试了这段代码，但有很多错误。这是代码：

```
<?php
$cert = '/Applications/MAMP/htdocs/passesWebserver/certificates.pem';
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', $cert);
stream_context_set_option($ctx, 'ssl', 'verify_peer', false);

$fp = stream_socket_client('ssl://feedback.sandbox.push.apple.com:2196', $error,            $errorString, 60, STREAM_CLIENT_CONNECT, $ctx);
// production server is ssl://feedback.push.apple.com:2196

if (!$fp) {
error_log("Failed to connect feedback server: $err $errstr",0);
return;
}
else {
   error_log("Connection to feedback server OK",0);
}
    error_log("APNS feedback results",0);
    while ($devcon = fread($fp, 38))
    {
   $arr = unpack("H*", $devcon); 
   $rawhex = trim(implode("", $arr));
   $feedbackTime = hexdec(substr($rawhex, 0, 8)); 
   $feedbackDate = date('Y-m-d H:i', $feedbackTime); 
   $feedbackLen = hexdec(substr($rawhex, 8, 4)); 
   $feedbackDeviceToken = substr($rawhex, 12, 64);
   error_log ("TIMESTAMP:" . $feedbackDate, 0);
      error_log ( "DEVICE ID:" . $feedbackDeviceToken,0);
    }
fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T08:39:59.767

这应该有效。您不需要对每个推送请求都运行它。根据更新频率和设备数量，您可以设置每日或每周 cron 作业。

```
$cert_file = '/path/to/combined/cert.pem';
$cert_pw = 'top secret';

$stream_context = stream_context_create();
stream_context_set_option($stream_context, 'ssl', 'local_cert', $cert_file);
if (strlen($cert_pw))
    stream_context_set_option($stream_context, 'ssl', 'passphrase', $cert_pw);

$apns_connection = stream_socket_client('feedback.push.apple.com:2196', $error_code, $error_message, 60, STREAM_CLIENT_CONNECT, $stream_context);

if($apns_connection === false) {
    apns_close_connection($apns_connection);

    error_log ("APNS Feedback Request Error: $error_code - $error_message", 0);
}

$feedback_tokens = array();

while(!feof($apns_connection)) {
    $data = fread($apns_connection, 38);
    if(strlen($data)) {
        $feedback_tokens[] = unpack("N1timestamp/n1length/H*devtoken", $data);
    }
}
fclose($apns_connection);

if (count($feedback_tokens))
    foreach ($feedback_tokens as $k => $token) {
         // code to delete record from database
    } 
```

# c# - 如何检查登录是否失败

> ID：15943672
> 
> 赞同：0
> 
> 时间：2013-04-11T08:08:57.300
> 
> 标签：c#, httpwebrequest, webclient

以下代码已由 Fiddler 生成，并在 button_Click 事件中调用。

```
 //Create request to URL.
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://forums.codeguru.com/login.php?do=login");

 //Set request headers.
 request.UserAgent = "Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0";
 request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
 request.Headers.Set(HttpRequestHeader.AcceptLanguage, "en-US,en;q=0.5");
 request.Headers.Set(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
 request.Referer = "http://forums.codeguru.com/";
 request.KeepAlive = false;
 request.ContentType = "application/x-www-form-urlencoded";

 //Set request method
 request.Method = "POST";

 // Disable 'Expect: 100-continue' behavior. More info: http://haacked.com/archive/2004/05/15/http-web-request-expect-100-continue.aspx
            request.ServicePoint.Expect100Continue = false;

 //Set request body.

 **// Fail**
  string body = @"vb_login_username=**userid**&vb_login_password=&vb_login_password_hint=Password&s=&securitytoken=guest&do=login&vb_login_md5password=a35cef11bdd55e36423f8d3b1ed69dea&vb_login_md5password_utf=a35cef11bdd55e36423f8d3b1ed69dea";

  byte[] postBytes = System.Text.Encoding.UTF8.GetBytes(body);
  request.ContentLength = postBytes.Length;
  Stream stream = request.GetRequestStream();
  stream.Write(postBytes, 0, postBytes.Length);
  stream.Close();

 //Get response to request.
 response = (HttpWebResponse)request.GetResponse();
 Stream responseStream = response.GetResponseStream();

 var reader = new System.IO.StreamReader(responseStream, Encoding.UTF8);
 string srcString = reader.ReadToEnd();

 }
 catch (WebException e)
 {
            //ProtocolError indicates a valid HTTP response, but with a non-200 status code (e.g. 304 Not Modified, 404 Not Found)
            if (e.Status == WebExceptionStatus.ProtocolError) response = (HttpWebResponse)e.Response;
            else return false;
 }
 catch (Exception)
 {
            if (response != null) response.Close();
            return false;
 }

return true; 
```

}

button_Click 事件中的代码

```
 HttpWebResponse response;

        if (Request_forums_codeguru_com(out response))
        {
            //Success, possibly use response.

            HttpStatusCode status = response.StatusCode;

            // Status is alway OK

            response.Close();

            MessageBox.Show("Succesful login");

        }
        else
        {
            //Failure, cannot use response.

            MessageBox.Show("Unsuccesful login");
        } 
```

但即使我输入了错误的密码，我也会得到 HttpStatus 为 OK。如何检查登录失败。

在最后阶段，我将从 Python 服务器接收数据，所以以上只是一个测试。

编辑 ：

当用户输入错误的用户名/密码组合时，他/她会看到以下内容：-

![错误的用户名/密码组合](https://i.stack.imgur.com/BXDf4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:17:33.913

使用上面的代码，您基本上是在模仿浏览器的行为。该网站必然会返回错误的 HTTPStatus 只是因为您输入了错误的密码 - 看看目标网站如何处理错误的密码。

如果您尝试访问安全页面，您可能会收到未经授权的访问错误并重定向到登录屏幕。取决于网站的设置方式。

有几种可能性：

1.  登录，然后尝试访问安全页面，检查响应中返回的非授权访问错误或页面文本
2.  检查响应的 url - 它是否已更改为您期望成功登录的 url？
3.  检查响应文本并查找“密码错误”、“密码无效”等内容。

最终，除了可能的选项 2 之外，没有可扩展或统一的方式来执行此操作。您将编写特定于站点的代码。

# shell - 在 Vagrant 中安装 Jenkins 后，无法从浏览器连接

> ID：15943674
> 
> 赞同：5
> 
> 时间：2013-04-11T08:09:01.413
> 
> 标签：shell, ubuntu, jenkins, continuous-integration, vagrant

我正在尝试为我的开发环境在 Vagrant 上安装 Jenkins。

我为我的盒子选择了 Ubuntu [http://cloud-images.ubuntu.com/precise/current/precise-server-cloudimg-vagrant-amd64-disk1.box](http://cloud-images.ubuntu.com/precise/current/precise-server-cloudimg-vagrant-amd64-disk1.box)。这是我用来配置我的盒子的外壳。一切正常，但是当我尝试从端口 80 甚至 :8080 访问该盒子时，它只是没有响应。浏览一直在旋转。不知道我在这里做错了什么。

这是我的脚本。

```
 sudo apt-get update

echo "APT::Cache-Limit "100000000";" >> /etc/apt/apt.conf.d/70debconf

wget -q -O - http://pkg.jenkins-ci.org/debian/jenkins-ci.org.key | sudo apt-key add -
sudo sh -c 'echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list'

sudo apt-get -y --force-yes install jenkins

sudo apt-get -y --force-yes install apache2
sudo a2enmod proxy
sudo a2enmod proxy_http
sudo a2enmod vhost_alias
sudo a2dissite default

echo '
        ServerAdmin webmaster@localhost
        ServerName ci.company.com
        ServerAlias ci
        ProxyRequests Off

                Order deny,allow
                Allow from all

        ProxyPreserveHost on
        ProxyPass / http://localhost:8080/
' >> /etc/apache2/sites-available/jenkins

sudo a2ensite jenkins
sudo sh -c 'echo "ServerName localhost" >> /etc/apache2/conf.d/name' && sudo service apache2 restart
sudo apache2ctl restart 

```

我`vagrant ssh`也跑

```
curl 'http://localhost:8080' 
```

它返回了 Jenkins 页面，所以我认为 Jenkins 已经正常运行。我只是无法从外部访问它。

这是我的流浪文件

```
 Vagrant.configure("2") do |config|
  config.vm.provision :shell, :path => "install-jenkins.sh"
  config.vm.provider "virtualbox" do |v|
    v.customize ["modifyvm", :id, "--memory", "2024"]
  end

  # Every Vagrant virtual environment requires a box to build off of.
  config.vm.box = "ubuntu64"

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine. In the example below,
  # accessing "localhost:8080" will access port 80 on the guest machine.
  config.vm.network :forwarded_port, guest: 80, host: 8080
end 

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:19:37.260

我通过向 Vagrant 框提供 IP 来完成这项工作，如下所示：

```
config.vm.network :hostonly, "33.33.33.10" 
```

# vb.net - XP中我的应用程序图标错误

> ID：15943677
> 
> 赞同：0
> 
> 时间：2013-04-11T08:09:24.130
> 
> 标签：vb.net, visual-studio, windows-xp, designer, ctype

我已经用 VS2012 在 Win7 x64 中完成了两个应用程序，但是当我尝试在 XP 中运行它时，我在尝试打开应用程序时遇到了未知错误。

最后我发现了问题，并且在**Main.Designer.vb**中的设计师生成的这一行中：

```
Me.Icon = CType(resources.GetObject("$this.Icon"), System.Drawing.Icon) 
```

（如果我删除该行，那么在 XP 中一切正常）

我总是通过单击表单属性中的“图标”属性字段来选择 TitleBar 图标。

我对此有一些疑问...

1.  如何修改该行以仍然显示我的图标并在 XP 中工作？

2.  每次我在表单的标题栏上放一个图标时，我需要手动修改该行以在 XP 中工作吗？

3.  为什么微软这么傻，不兼容 XP 的设计者自己生成的代码？（这个不需要回答）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:11:58.073

您可以在运行时设置表单图标来尝试解决这个问题。

*   添加一个您的项目资源调用它的图标`ApplicationIcon`

*   补充`Form_Load`：

*   `Me.Icon = My.Resources.ApplicationIcon`

# jquery - AJAX 联系表格问题

> ID：15943679
> 
> 赞同：1
> 
> 时间：2013-04-11T08:09:28.690
> 
> 标签：jquery, ajax

我对基于 AJAX 的联系表单有疑问。我被困在PHP代码上。该代码不会发送电子邮件，也不会通知用户遇到问题。这是HTML：

```
<div class="contact_form">
     <form method="post" action="mail.php" name="contact-form" id="contact-form">
         ...
            <div id="response"></div>
         ...
            <input class="contact_button button" type="submit" name="submit" id="submit" value="Send!">
         ...
     </form>
</div> 
```

和 JS：

```
 ...
 $(paraTag).append('<input type="button" name="submit" id="submit" value="Trimite" />');

 $('#main input#submit').click(function() {
 ...

    $.ajax({
          type: 'post',
          url: 'mail.php',
          data: 'name=' + name + '&email=' + email +'&subject='+ subject +'&message=' + message,

          success: function(results) {  
                $('div#response').html(results).css('display', 'block');        

          }
    });
 } 
```

我应该用 PHP 写什么来返回响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:29:35.937

```
$('#main input#submit').click(function() {
    $.ajax({
          type: 'post',
          url: 'mail.php',
          data: {'name':name,'email':email,'subject':subject,'message':message},
          success: function(results) {  
                $('div#response').html(results).css('display', 'block');        

          }
    });
 } 
```

//在你的mail.php中

```
print_r($_POST); 
```

将通过 ajax 为您提供发布的数组。并通过获取发布的数组来完成其余代码

# c# - （来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）

> ID：15943682
> 
> 赞同：3
> 
> 时间：2013-04-11T08:09:30.690
> 
> 标签：c#, xml, windows-8

我尝试将 ObservableCollection 与 ListBox 相关联，但出现以下错误：应用程序调用了为不同线程编组的接口。( `Exception from HRESULT: 0x8001010E (RPC_E_WRONG_THREAD)`)

Prueba.cs 在课堂上，我有：

```
 public ObservableCollection<WidgetCollectionItem> WidgetsDownloaded(string e)
    {
        int alertas = 0;

        XDocument document = XDocument.Parse(e);

        // Obtener el id
        //id = document.Root.Element("id").Value;

        ObservableCollection<WidgetCollectionItem> Items = new ObservableCollection<WidgetCollectionItem>();
        foreach (XElement wid in document.Root.Elements("widget"))
        {
            WidgetCollectionItem widget = new WidgetCollectionItem();
            widget.captionWid = wid.Attribute("caption") != null ? wid.Attribute("caption").Value : null;

            ObservableCollection<ServiciosWidgetCollectionItem> ItemsSer = new ObservableCollection<ServiciosWidgetCollectionItem>();
            widget.ItemsSer = ItemsSer;

            foreach (XElement service in wid.Elements("service"))
            {
                ServiciosWidgetCollectionItem ser = new ServiciosWidgetCollectionItem();

                ser.captionWid = wid.Attribute("caption") != null ? wid.Attribute("caption").Value : null;
                ser.nameWid = wid.Attribute("name") != null ? wid.Attribute("name").Value : null;
                ser.nameSer = service.Attribute("name") != null ? service.Attribute("name").Value : null;
                ser.captionSer = service.Attribute("caption") != null ? service.Attribute("caption").Value : null;
                ser.descripcion = service.Attribute("desc") != null ? service.Attribute("desc").Value : null;
                ser.valor = service.Element("xvalue") != null ? service.Element("xvalue").Value : null;
                ser.color = service.Element("xcolor") != null ? service.Element("xcolor").Value : null;
                ser.alerta = service.Element("xalert") != null ? service.Element("xalert").Value : null;
                if (ser.alerta != null) { alertas++; }

                ItemsSer.Add(ser);
            }
            Items.Add(widget);
        }
        return Items;
    }

 public class ServiciosWidgetCollectionItem
    {
        public string captionWid { get; set; }
        public string captionSer { get; set; }
        public string nameWid { get; set; }
        public string nameSer { get; set; }
        public string descripcion { get; set; }
        public string valor { get; set; }
        public string color { get; set; }
        public string alerta { get; set; }
    }

    public class WidgetCollectionItem
    {
        public string captionWid { get; set; }
        public ObservableCollection<ServiciosWidgetCollectionItem> ItemsSer { get; set; }
    } 
```

并从 MainPage 连接到页面，整个过程工作正常，但是当我插入 ListBox ItemsSouces 时出现错误：

```
public MainPage()
    {
        this.InitializeComponent();

        Prueba prueba = new Prueba();

        var request = (HttpWebRequest)WebRequest.Create(new Uri(ruta));
        request.BeginGetResponse(r =>
        {
            var httpRequest = (HttpWebRequest)r.AsyncState;
            var httpResponse = (HttpWebResponse)httpRequest.EndGetResponse(r);

            using (var reader = new StreamReader(httpResponse.GetResponseStream()))
            {
                var response = reader.ReadToEnd();

                widgetsList.ItemsSource = prueba.WidgetsDownloaded(response);
            }
        }, request);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:24:46.493

`widgetsList.ItemsSource`只允许从用于创建控件的线程访问。这通常是 UI 线程。在 MSDN 上，您可以阅读有关[BeginGetResponse](http://msdn.microsoft.com/library/system.net.httpwebrequest.begingetresponse.aspx)的信息，它启动了一个异步请求，因此您的委托在不同的线程上被调用。在原始线程（UI线程）中分配响应，你很好。

**编辑：**有关如何实现此目的的示例，请参阅[在 WinRT 中的 UI 线程上运行代码。](https://stackoverflow.com/questions/10579027/run-code-on-ui-thread-in-winrt)注意：将启动时的调度程序保存在静态变量中，以使您的生活更轻松。

# php - 在mysql中搜索字数查询

> ID：15943685
> 
> 赞同：1
> 
> 时间：2013-04-11T08:09:33.440
> 
> 标签：php, mysql, word-count

我有下表。

```
CREATE TABLE IF NOT EXISTS `product`
(
    `id` int(11) NOT NULL,
    `name` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
    `description` varchar(200) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `product` (`id`, `name`, `description`) VALUES
(1, 'Samsung', "this is samsung product description from samsung"),
(2, 'Mobile', "Samsung galaxy note2 from samsung store"),
(3, 'Smartphone', "Samsung"); 
```

现在我想查询`product`产生如下结果的表。

```
ID   Name       WordCount
1   Samsung        3
2   Mobile         2
3   Smartphone     1
```

我如何在`MySQL`选择查询中计算这个词的出现次数。

**编辑**

很抱歉没有澄清我的观点。

但在这里。

我想从所有行中`search`说出单词`Samsung`，并不仅从名称而且从描述中计算它的出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:59:45.433

经过几个小时的谷歌搜索和调试，我终于解决了。

我使用了 char_length 和 replace 的组合来完成这项任务。

我最终得到如下。

```
select  *,(
    (char_length(name) - char_length(replace(name,'sam',''))) +
    (char_length(description) - char_length(replace(description,'sam','')))
) / char_length('sam') as SearchCount
from
    product
order by
    SearchCount desc 
```

上面的查询是区分**大小写**的，但别担心，我也用**CASE-INSESITIVE**解决了它，请参见下面的查询。

```
select  *,
(
    (char_length(name) - char_length(replace(LOWER(name),LOWER('Sam'),''))) +
    (char_length(description) - 
    char_length(replace(LOWER(description),LOWER('Sam'),'')))
) / char_length('sam') as SearchCount
from
    product
order by
    SearchCount desc 
```

有了这个查询之后，我们需要做的就是添加`WHERE`子句以使其工作。

希望这对其他人也有帮助。

**感谢您的帮助（所有回答并删除和评论的人。）**

# c# - 使用 EF 保存后在 MutliSelectComboBox 中显示项目集合的问题

> ID：15943686
> 
> 赞同：2
> 
> 时间：2013-04-11T08:09:37.267
> 
> 标签：c#, wpf, mvvm, combobox, multi-select

我正在创建一个多`Combobox`选，允许用户从`combobox`. 到目前为止，我已经通过使用`ObservableCollection<string>`. 我希望能够保存`EntityFramework model`我已经成功使用的这个集合，比如

构造函数；

```
public EmployeeViewModel(DataObjects.Employee e) //Constructor that takes in an employee from EF
        : base("")
    {
        //BenefitsProvided = e.BenefitsProvided; //What I did previously. BenefitsProvided is the field in employee table.

        _benefits = new ObservableCollection<string>();
        string[] benefit = e.BenefitsProvided.Split(new char[] { ',' }, StringSplitOptions.None);
        foreach (var str in benefit)
        {
            _benefits.Add(str);
        }  
    } 
```

在第一次启动时，我得到一个列表，它允许我看到一个很好的项目列表，我可以选择任意数量的项目。但是，当我尝试编辑项目时，它会在`ComboBox`其中显示；

前;

![在此处输入图像描述](https://i.stack.imgur.com/hVSyk.jpg)

保存后；

![在此处输入图像描述](https://i.stack.imgur.com/RKVFh.jpg)

[此链接包含我的 ViewModel 和可绑定列表](https://gist.github.com/gregorybmclub/56ea2079f8e257626c45)

捆绑;

```
 <src:MultiComboBox Grid.Column="1" Grid.Row="9"
                         SelectionMode="Multiple" 
                         VerticalAlignment="Center"
                         DisplaySeparator=", "
                         ItemsSource="{Binding Benefits}"
                         SelectedItems="{Binding SelectedBenefits}">
 </src:MultiComboBox> 
```

我尝试的是而不是像这样接受`ObservableCollection<String>`aa `ObservableCollection<OfAClass>`；

```
public class CurrentBenefits
{
    private string[] _Allowed = new string[] {"items", "..."};
    public string[] Allowed 
    { 
        get { return _Allowed; }
        set { _Allowed = value; }
    }
} 
```

但是当这样做时，并将其更改`<string>`为`<CurrentBenefit>`它会在构造函数周围引发此异常；

*错误 2 参数 1：无法从 'string' 转换为 '...CurrentBenefits'*

*错误 1 ​​'System.Collections.ObjectModel.Collection<...CurrentBenefits>.Add(...CurrentBenefits)' 的最佳重载方法匹配有一些无效参数*

谁能帮助或建议我应该做些什么来解决我遇到的这个问题？提前致谢 ：）。

*编辑：* 另外，很抱歉这么长的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:53:37.033

在浏览了我的工作之后，在[The WPF Room的](https://chat.stackoverflow.com/rooms/18165/wpf)[Maverik](https://stackoverflow.com/users/504757/maverik)的出色帮助下，这与我的存储库有关。

最初，在存储库中插入和更新项目是这样做的，就像这样；

```
emp.BenefitsProvided = e.Benefits.ToList().ToString(); 
```

然后改成这个；

```
emp.BenefitsProvided = string.Join(", ", e.SelectedBenefits); 
```

它完美地保存并让用户能够看到他们添加的内容:)。

因为它是一个`collection`，我还必须在我的内部更改它`ListView`以显示这样的项目；

```
 <GridViewColumn Header="BenefitsProvided" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ListView Height="24"
                                    ItemsSource="{Binding Benefits}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
 </GridViewColumn> 
```

# regex - 如何删除 .php 扩展名并使用 .htaccess 在特定文件夹中添加斜杠

> ID：15943690
> 
> 赞同：1
> 
> 时间：2013-04-11T08:09:50.243
> 
> 标签：regex, .htaccess, redirect

我目前有一个如下所示的 URL：

```
www.mysite.com/folder-name/page-name.php 
```

但我需要它看起来像这样：

```
www.mysite.com/folder-name/page-name/ 
```

我正在寻找“文件夹名称”中的 .htaccess 的正则表达式，并且只针对它所在的文件夹。它需要删除 .php 扩展名并重定向到末尾带有斜杠的 url。

此外，如果 url 是`www.mysite.com/folder-name/`我需要忽略表达式以避免最后出现 //。我看过但找不到仅针对特定文件夹的解决方案。刚开始使用 PHP 和正则表达式让我大吃一惊！

我找到了这样的代码：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^GET\ /[^?\s]+.php
RewriteRule (.*).php$ /$1/ [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*)/$ $1.php [L]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule .*[^/]$ $0/ [L,R=301] 
```

但它会返回网址：

```
www.mysite.com/var/www/vhosts/mysite.com/httpdocs/folder_name/page_name/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:17:21.003

你得到这样的路径的原因是因为 apache 正在猜测你的规则的目标 ( `$0/`) 是文件路径还是 URL 路径，并且它错误地猜测它是文件路径。您需要提供重写基础：

```
RewriteBase / 
```

或使您的目标成为绝对 URI

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*)/$ /$1.php [L]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule .*[^/]$ /$0/ [L,R=301] 
```

# prolog - 使用 Prolog 寻找最短路径

> ID：15943692
> 
> 赞同：1
> 
> 时间：2013-04-11T08:09:56.430
> 
> 标签：prolog, shortest-path

我已经阅读了一些关于这个主题的教程，但我仍然不明白。

代码：

```
%flight(ORIGIN,DEST,DEPARTTIME,ARRIVALTIME,FLIGHTNO, DAY). Day 1=mon 7=sun
flight(singapore,london , 2310, 0520, ba58,1).
flight(singapore,london , 2310, 0520, ba58,3).
flight(singapore,london , 2310, 0520, ba58,4).
flight(singapore,london , 2310, 0520, ba58,6).
flight(london,singapore , 1000, 1610, ba24,1).
flight(london,singapore , 1000, 1610, ba24,3).
flight(london,singapore , 1000, 1610, ba24,4).
flight(london,singapore , 1000, 1610, ba24,6).
flight(london,edinburgh , 0940, 1050, ba4732,1).
flight(london,edinburgh , 0940, 1050, ba4732,2).
flight(london,edinburgh , 0940, 1050, ba4732,3).
flight(london,edinburgh , 0940, 1050, ba4732,4).
flight(london,edinburgh , 0940, 1050, ba4732,5).
flight(london,edinburgh , 0940, 1050, ba4732,6).
flight(london,edinburgh , 0940, 1050, ba4732,7). 
```

如何找到从新加坡到爱丁堡的最快航班？

最短航班计算应包括航班之间的总飞行时间和总等待时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T14:37:57.400

```
%flight(ORIGIN,DEST,DEPARTTIME,ARRIVALTIME,FLIGHTNO, DAY).
flight(singapore,london , 2310, 0520, ba58,1).
flight(singapore,london , 2310, 0520, ba58,3).
flight(singapore,london , 2310, 0520, ba58,4).
flight(singapore,london , 2310, 0520, ba58,6).
flight(london,singapore , 1000, 1610, ba24,1).
flight(london,singapore , 1000, 1610, ba24,3).
flight(london,singapore , 1000, 1610, ba24,4).
flight(london,singapore , 1000, 1610, ba24,6).
flight(london,edinburgh , 0940, 1050, ba4732,1).
flight(london,edinburgh , 0940, 1050, ba4732,2).
flight(london,edinburgh , 0940, 1050, ba4732,3).
flight(london,edinburgh , 0940, 1050, ba4732,4).
flight(london,edinburgh , 0940, 1050, ba4732,5).
flight(london,edinburgh , 0940, 1050, ba4732,6).
flight(london,edinburgh , 0940, 1050, ba4732,7).
flight(london,edinburgh , 1140, 1250, ba4735,1).
flight(london,edinburgh , 1140, 1250, ba4735,2).
flight(london,edinburgh , 1140, 1250, ba4735,3).
flight(london,edinburgh , 1140, 1250, ba4735,4).
flight(london,edinburgh , 1140, 1250, ba4735,5).
flight(london,edinburgh , 1140, 1250, ba4735,6).
flight(london,edinburgh , 1140, 1250, ba4735,7).
flight(london,edinburgh , 1840, 1950, ba4822,1).
flight(london,edinburgh , 1840, 1950, ba4822,2).
flight(london,edinburgh , 1840, 1950, ba4822,3).
flight(london,edinburgh , 1840, 1950, ba4822,4).
flight(london,edinburgh , 1840, 1950, ba4822,5).
flight(edinburgh,london , 0830, 0940, ba4733 ,1).
flight(edinburgh,london , 0830, 0940, ba4733,2).
flight(edinburgh,london , 0830, 0940, ba4733,3).
flight(edinburgh,london , 0830, 0940, ba4733,4).
flight(edinburgh,london , 0830, 0940, ba4733,5).
flight(edinburgh,london , 0830, 0940, ba4733,6).
flight(edinburgh,london , 0830, 0940, ba4733,7).
flight(edinburgh,london , 1340, 1450, ba4736,1).
flight(edinburgh,london , 1340, 1450, ba4736,2).
flight(edinburgh,london , 1340, 1450, ba4736,3).
flight(edinburgh,london , 1340, 1450, ba4736,4).
flight(edinburgh,london , 1340, 1450, ba4736,5).
flight(edinburgh,london , 1340, 1450, ba4736,6).
flight(edinburgh,london , 1340, 1450, ba4736,7).
flight(edinburgh,london , 1940, 2050, ba4833,1).
flight(edinburgh,london , 1940, 2050, ba4833,2).
flight(edinburgh,london , 1940, 2050, ba4833,3).
flight(edinburgh,london , 1940, 2050, ba4833,4).
flight(edinburgh,london , 1940, 2050, ba4833,5).
flight(edinburgh,london , 1940, 2050, ba4833,6).
flight(london,greece , 0910, 1245, ba614,1).
flight(london,greece , 0910, 1245, ba614,2).
flight(london,greece , 0910, 1245, ba614,3).
flight(london,greece , 0910, 1245, ba614,4).
flight(london,greece , 0910, 1245, ba614,5).
flight(london,greece , 0910, 1245, ba614,6).
flight(london,greece , 0910, 1245, ba614,7).
flight(london,greece , 1445, 1820, sr805,1).
flight(london,greece , 1445, 1820, sr805,2).
flight(london,greece , 1445, 1820, sr805,3).
flight(london,greece , 1445, 1820, sr805,4).
flight(london,greece , 1445, 1820, sr805,5).
flight(london,greece , 1445, 1820, sr805,6).
flight(london,greece , 1445, 1820, sr805,7).
flight(greece,london , 0900, 1140, ba613,1).
flight(greece,london , 0900, 1140, ba613,2).
flight(greece,london , 0900, 1140, ba613,3).
flight(greece,london , 0900, 1140, ba613,4).
flight(greece,london , 0900, 1140, ba613,5).
flight(greece,london , 0900, 1140, ba613,6).
flight(greece,london , 1610, 1855, sr806,1).
flight(greece,london , 1610, 1855, sr806,2).
flight(greece,london , 1610, 1855, sr806,3).
flight(greece,london , 1610, 1855, sr806,4).
flight(greece,london , 1610, 1855, sr806,5).
flight(greece,london , 1610, 1855, sr806,7).
flight(london,paris , 0830, 1030, ba510,1).
flight(london,paris , 0830, 1030, ba510,2).
flight(london,paris , 0830, 1030, ba510,3).
flight(london,paris , 0830, 1030, ba510,4).
flight(london,paris , 0830, 1030, ba510,5).
flight(london,paris , 0830, 1030, ba510,6).
flight(london,paris , 0830, 1030, ba510,7).
flight(london,paris , 1310, 1510, az459,1).
flight(london,paris , 1310, 1510, az459,2).
flight(london,paris , 1310, 1510, az459,3).
flight(london,paris , 1310, 1510, az459,4).
flight(london,paris , 1310, 1510, az459,5).
flight(london,paris , 1310, 1510, az459,6).
flight(london,paris , 1310, 1510, az459,7).
flight(paris,london , 0910, 1020, ba511,1).
flight(paris,london , 0910, 1020, ba511,2).
flight(paris,london , 0910, 1020, ba511,3).
flight(paris,london , 0910, 1020, ba511,4).
flight(paris,london , 0910, 1020, ba511,5).
flight(paris,london , 0910, 1020, ba511,6).
flight(paris,london , 0910, 1020, ba511,7).
flight(paris,london , 1220, 1330, az460,1).
flight(paris,london , 1220, 1330, az460,2).
flight(paris,london , 1220, 1330, az460,3).
flight(paris,london , 1220, 1330, az460,4).
flight(paris,london , 1220, 1330, az460,5).
flight(paris,london , 1220, 1330, az460,6).
flight(paris,london , 1220, 1330, az460,7).
flight(paris,rome , 1130, 1240, jp322,2).
flight(paris,rome , 1130, 1240, jp322,3).
flight(paris,rome , 1130, 1240, jp322,4).
flight(rome,paris , 1330, 1440, jp323,2).
flight(rome,paris , 1330, 1440, jp323,3).
flight(rome,paris , 1330, 1440, jp323,4).
flight(rome,greece , 1440, 1630, fs619,1).
flight(rome,greece , 1440, 1630, fs619,3).
flight(rome,greece , 1440, 1630, fs619,4).
flight(rome,greece , 1440, 1630, fs619,5).
flight(greece,rome , 1100, 1310, fs620,1).
flight(greece,rome , 1100, 1310, fs620,3).
flight(greece,rome , 1100, 1310, fs620,4).
flight(greece,rome , 1100, 1310, fs620,5).

% Start menu
start :- repeat,nl,nl,
         nl, write('============================='), 
         nl, write(' FLIGHT ENQUIRY SYSTEM '),
         nl, write('============================='),
         nl, write('1) Preferred Direct'),
         nl, write('2) Preferred Fastest'),
         nl, write('3) Quit'),
         nl, nl, read(Option),
         option(Option).

% option 1 will terminate the program
option(1) :- nl, write('Please Day of Flight in Numberic format (1 for Mon, 7 for Sun: '), 
read(Day),
nl, write('Origin Country: '),
read(Origin), checkOCountry(Origin, 0), nl, write('Dest Country: '),
read(Dest), checkDCountry(Dest, 1)->
plane(Board,0),
plane(Arrive,1),
flightInfo(Board, Arrive,Start,End,FlightNo,Day),
calculateTime(Start,End, DH,DM),
nl,write('Flight No: '),write(FlightNo),
%checkDH(DurH,DurM), 
nl,write('Flight Dur: '),write(DH),write(':'),write(DM),
retractall(plane(X,Y)),!,fail.  

% option 3 will terminate the program
option(3) :- nl, write('Program has terminated!').

% check if a country is valid
checkOCountry(OCountry, Indicator) :- flight(OCountry,_,_,_,_,_) -> asserta(plane(OCountry, Indicator)); nl,write('Origin Country is invalid! Enter a valid Country: '), read(NewCountry),checkOCountry(NewCountry, Indicator).
checkDCountry(DCountry, Indicator) :- flight(_,DCountry,_,_,_,_) -> asserta(plane(DCountry, Indicator)); nl,write('Destination Country is invalid! Enter a valid Country: '), read(NewCountry),checkDCountry(NewCountry, Indicator).

flightInfo(Origin, Dest,Start,End, FlightNo,Day) :- flight(Origin, Dest,Start,End,FlightNo,Day).

calculateTime(Start, End, DH,DM):- OriMin is mod(Start, 100), DestMin is mod(End, 100), OriHour is (Start - OriMin)/100, DestHour is (End - DestMin)/100,
Y is DestHour - OriHour, X is DestMin - OriMin, 
(Y < 0 -> checkDH(OriHour, OriMin, DestHour,DestMin, DH, DM);
X < 0 -> checkDM(Y,X, DM, DH);
       DM is X, DH is Y
    ).

checkDM(Y, X , DM, DH):- DM is X + 60, DH is Y-1.
checkDH(OriHour, OriMin, DestHour,DestMin, DH, DM) :- THour1 is ((24-OriHour)+DestHour), TMin1 is 0-OriMin,
(TMin1< 0 -> THour is THour1 -1, TMin is ((60+ TMin1)+DestMin);
THour is THour1, TMin is TMin1
), 
(TMin > 60 -> DH is (THour + (TMin//60)), DM is mod(TMin, 60) ;
DH is THour, DM is TMin
). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-21T10:36:27.663

分支定界最短路径算法可以通过[restart](http://www.gprolog.org/manual/html_node/gprolog064.html)来实现。该算法不使用任何动态数据库，只使用回溯和递归。假设我们有这个图表：

[![在此处输入图像描述](https://i.stack.imgur.com/yfoBJ.png)](https://i.stack.imgur.com/yfoBJ.png)

我们可以在 Prolog 中将其表示为以下事实：

```
% edge(-Vertex, -Vertex)
edge(a, b).         edge(a, c).
edge(a, d).         edge(b, c).
edge(c, d).         edge(c, e).
edge(d, e). 
```

我们首先需要一个有界路径查找器。这可以实现为一个谓词，它接受一个上限，然后返回从上限中减去的跳数，并保证结果永远不会低于零：

```
% path(+Vertex, +Vertex, +Integer, -Integer)
path(X, X, N, N).
path(X, Y, N, M) :- N > 0,
   H is N-1,
   edge(X, Z),
   path(Z, Y, H, M). 
```

有界路径查找器是非确定性的，并使用回溯进行搜索。我们现在添加一个进一步的谓词，它通过递归地使用较小的上限来重新启动路径查找器，只要找到路径。这样可以找到最小的长度：

```
% bb_path(+Vertex, +Vertex, +Integer, -Integer)
bb_path(X, Y, N, M) :- N > 0,
   H is N-1,
   path(X, Y, H, K), !,
   L is H-K,
   bb_path(X, Y, L, M).
bb_path(_, _, N, N). 
```

请注意在谓词分支和绑定谓词中使用剪切。这是一个示例运行。我们从边数加一的上限开始。我们可以先手动多次调用path/4，模拟搜索：

```
?- path(a, e, 7, K), L is 7-K.
K = 3,
L = 4 
?- path(a, e, 3, K), L is 3-K.
K = 0,
L = 3 
?- path(a, e, 2, K), L is 2-K.
K = 0,
L = 2 
?- path(a, e, 1, K), L is 1-K.
No 
```

因此，从上限 8 开始，我们逐渐得到更好的上限 4、3 和 2，直到无法再改进为止。谓词 bb_path/4 为我们做这个搜索：

```
?- bb_path(a, e, 8, X).
X = 2 
```

# passwords - 使用 Visudo 启用无密码 sudo 命令

> ID：15943695
> 
> 赞同：0
> 
> 时间：2013-04-11T08:10:01.040
> 
> 标签：passwords, sudo, sudoers, visudo

我的主目录中有一个名为“rescan.sh”的脚本。我创建了一个指向脚本的符号链接并将其放在 /usr/local/bin 中。该脚本执行以下操作：

```
#!/bin/bash
sudo sh -c "echo 1 > /sys/bus/pci/rescan" 
```

我需要这个脚本来使我的读卡器正常工作，并且每次重新启动后我都需要运行这个脚本（长篇大论，不同的问题，不要讨论这个）。

我想要实现的是脚本在启动时自动运行。我需要 sudo 权限来运行脚本，因此我需要一个无密码的 sudo 来运行这个脚本。我可以用expect或visudo来做到这一点。由于安全原因，我只考虑后者。我一直在尝试使用 visudo，但还没有任何效果。我需要一些帮助来设置它。这是我的visudo：

```
#
# This file MUST be edited with the 'visudo' command as root.
#
# Please consider adding local content in /etc/sudoers.d/ instead of
# directly modifying this file.
#
# See the man page for details on how to write a sudoers file.
#
Defaults    editor=/usr/bin/vim
Defaults    env_reset
Defaults    secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

# Host alias specification

# User alias specification

# Cmnd alias specification

# User privilege specification
root    ALL=(ALL:ALL) ALL

# Members of the admin group may gain root privileges
%admin ALL=(ALL) ALL
%admin ALL=(ALL) NOPASSWD:/usr/local/bin/rescan

# Allow members of group sudo to execute any command
%sudo   ALL=(ALL:ALL) ALL

# See sudoers(5) for more information on "#include" directives:

#includedir /etc/sudoers.d 
```

附加信息：

*   这个系统是我自己的个人笔记本电脑（我是 root、sudo 等）
*   运行 Linux Mint 13 Cinnamon 64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T21:04:49.633

这个问题很古老，这个答案只是一个猜测，但是......

改变

```
%admin ALL=(ALL) NOPASSWD:/usr/local/bin/rescan 
```

至

```
your_usual_user_name ALL=(ALL) NOPASSWD:/usr/local/bin/rescan 
```

可能有帮助。但是，请注意：我不知道与此相关的安全风险！

# c++ - std 或 boost 中是否有类似 circular_advance 的东西？

> ID：15943700
> 
> 赞同：1
> 
> 时间：2013-04-11T08:10:17.083
> 
> 标签：c++, boost, stl, stdadvance

假设我想以循环方式通过容器：

> idx = 0, idx =1 .. idx = size()-1, idx =0, idx =1 ...

有没有办法使用 std 或 boost ？我知道算法不是在容器上运行的，所以我猜我运气不好，但我只是想检查一下。

PS不需要手动实现，这很简单（如果你不忘记seq点：P），只需

```
curr_idx= (curr_idx+1) % my_cont.size() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:00:48.940

我不知道有任何类似的功能，但[这个答案](https://stackoverflow.com/a/1782262/160206)显示了如何使用[Boost.Iterator](http://www.boost.org/doc/libs/release/libs/iterator/doc/index.html)创建一个循环遍历集合的迭代器适配器。

# asp.net - 用 ASP.NET 中的 html 源代码在 Word 中生成 TOC

> ID：15943701
> 
> 赞同：0
> 
> 时间：2013-04-11T08:10:21.577
> 
> 标签：asp.net, ms-word, windows-server-2008, office-interop, tableofcontents

我被分配为 Word 文档创建一个 TOC（目录），它根据从数据库中获得的一些信息和特定的设计动态地填充 HTML 代码，最后这个操作必须在 ASP 中完成。NET 服务器端使用用 C# 编程的 3.5 .NET Framework，它必须使用生成的 TOC 和 Word 格式发送到客户端。

我也可以告诉你，服务器的操作系统是 Windows 2008 Server，它安装了 Microsoft Office 2010。

因此，首先我尝试使用 Microsoft.Interoffice.Word 将其集成到服务器端代码中，但后来我意识到 Microsoft 出于[安全问题](http://support.microsoft.com/kb/257757)不支持此类事情。然后我尝试创建一个控制台应用程序来实现此功能（使用 Microsoft.Office.Interop.Word）并将 HTML 代码导出到 doc 文档，它们都位于同一个文件夹中，并且 IIS_USERS 组可以完全访问该位置。但是，当我尝试启动在网站代码中创建目录的控制台应用程序时，它向我显示了与控制台应用程序相关的错误。

我已经使用生成的包含 HTML 代码的文档测试了控制台应用程序，它运行流畅，所以我不明白发生了什么……IIS 是否检测到控制台应用程序使用 Microsoft.Office.Interop.Word，但它没有不允许它执行？这个想法是，当控制台应用程序完成时，我会将整个文档再次带回网站并生成对客户端的 HTTP 响应，以便显示典型的打开/保存弹出对话框。

我也一直在尝试使用外部库，但没有结果，例如 GemBox（HTML 代码的 FileFormat 问题）、NPOI（它的 HWPF 库是 alpha 版本）、OpenSDK（无法评估分页，因此它无法创建充满文档的 TOC信息），AsPosed Words（相当昂贵的库，我无法在免费许可中尝试这种功能）

我告诉你知道控制台应用程序代码：

```
 ArrayList arrValoresIndices = new ArrayList();
Application wordApp = new Application();
object missing = System.Type.Missing;

try {
    Document wordDocument = wordApp.Documents.Open(docFileSource);
    //Applying style to headers
    System.Drawing.Color colorNecesario = System.Drawing.ColorTranslator.FromHtml("#1F497D");
    WdColor coloraplicado = (Microsoft.Office.Interop.Word.WdColor)(colorNecesario.R + 0x100 * colorNecesario.G + 0x10000 * colorNecesario.B);
    wordApp.ActiveDocument.Styles[WdBuiltinStyle.wdStyleHeading1].Font.Name = "Calibri";
    wordApp.ActiveDocument.Styles[WdBuiltinStyle.wdStyleHeading1].Font.Size = 14;
    wordApp.ActiveDocument.Styles[WdBuiltinStyle.wdStyleHeading1].Font.Bold = -1;
    wordApp.ActiveDocument.Styles[WdBuiltinStyle.wdStyleHeading1].Font.Color = coloraplicado;

    int numPalabras = wordDocument.Words.Count;

    for (int i = 1; i < numPalabras; i++)
    {

        string texto = wordDocument.Words[i].Text;

        if (texto.Equals("") == false && wordDocument.Words[i].Font.Size == 14 &&
             wordDocument.Words[i].Font.Name == "Calibri" &&
             wordDocument.Words[i].Font.Bold == -1 &&
             wordDocument.Words[i].Font.Color == coloraplicado)
        {
            wordDocument.Words[i].set_Style(WdBuiltinStyle.wdStyleHeading1);
        }

    }

    object gotoPage = WdGoToItem.wdGoToPage;
    object gotoNext = WdGoToDirection.wdGoToNext;
    object gotoCount = null;
    object gotoName = "2";
    wordApp.Selection.GoTo(ref gotoPage, ref gotoNext, ref gotoCount, ref gotoName);
    wordApp.Selection.InsertBreak(WdBreakType.wdPageBreak);
    gotoName = "2";
    Range indexPage= wordApp.Selection.GoTo(ref gotoPage, ref gotoNext, ref gotoCount, ref gotoName);
    object oTrue = true;
    TableOfContents toc = wordDocument.TablesOfContents.Add(indexPage, ref oTrue, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref oTrue);

    wordDocument.TablesOfContents.Format = WdTocFormat.wdTOCModern;
    toc.Update();
    wordDocument.SaveAs2(docFileSource,WdSaveFormat.wdFormatFilteredHTML);
    wordDocument.Close();
    wordApp.Quit();
}
catch (COMException ce)
{
    wordApp.Application.Quit(ref missing, ref missing, ref missing);
    throw new COMException("Process has failed ...\n");
    }
} 
```

启动代码的网站代码：

```
String nombreDoc = "C:\\tempDocs\\JGA.doc"; //i will store the doc in this folder, in this folder IIS_USRS have full access
File.WriteAllText(nombreDoc, strCabecera.ToString()); //strCabecera contains the whole html code
Process p = new Process();
p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
p.StartInfo.FileName = @"C:\\tempDocs\\TOCIndexer\\TOCIndexer.exe -nombreDoc";
p.StartInfo.UseShellExecute = false;
p.StartInfo.Verb = "runas";

using (Process exeProcess = Process.Start(p))
{
     exeProcess.WaitForExit();
}

//When the process has finished I import againg the content to a new string builder
StringBuilder strCabeceraVolcado = new StringBuilder();
using (var sr = new StreamReader(nombreDoc))
{
    strCabeceraVolcado.Append(sr.ReadToEnd());
}
if (File.Exists(@nombreDoc))
{
    File.Delete(@nombreDoc);
}
strCabecera = strCabeceraVolcado;

HttpContext.Current.Response.Write(strCabecera);
HttpContext.Current.Response.Flush();
HttpContext.Current.Response.End(); 
```

你能给我一些建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:25:48.283

经过研究，我意识到整个应用程序是正确的，问题在于服务器设置。

此解决方案仅适用于 Windows Server 2008 64 位，如果您遇到 Microsoft.Office.Interop.Word 问题，您必须按照以下步骤操作：

1º 您必须在服务器中安装 Microsoft.Office.Word。

2º 您必须将生成文档的文件夹中的“完全控制”权限分配给“IIS 用户组”和“匿名登录”用户。

3º 您必须修改组件服务 (C:\Windows\System32\comexp.msc) 并将 Identity 的值“The Interactive User”设置为“Office Licensing COM Server 14 Properties”（可以是 12 而不是 14，具体取决于版本您安装的办公室）

4º 在位于 C:\Windows\SysWOW64\config\systemprofile\ 的路径中创建文件夹“Desktop”

如果您按照这些步骤操作，ASP.NET 将允许您使用 Microsof.Office.Interop.Word 库修改文档。

# firefox-addon - 以编程方式重新启动 Firefox 扩展

> ID：15943708
> 
> 赞同：2
> 
> 时间：2013-04-11T08:10:37.263
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在使用 Mozilla addons-sdk 制作 Firefox 扩展。我在面板中显示一个特定的 HTML 页面。根据收到的某个事件，我想重新加载扩展程序（而不仅仅是页面）。重新加载 = 重新运行 main.js，就像浏览器重新启动时一样。

仅重新加载 HTML 页面的问题在于，当重新加载发生时，page-worker 仍然是旧的，并且在重新加载期间接收到的事件没有得到正确处理。对应于这些事件，您会收到以下错误：

```
Timestamp: 4/11/13 12:34:20 PM
Error: ubp-install: An exception occurred.
Traceback (most recent call last):
  File "resource://onebutton-at-user043-dot-com/addon-sdk/lib/sdk/panel.js", line 273, in _onHide
    this._emit('hide');
  File "resource://onebutton-at-user043-dot-com/addon-sdk/lib/sdk/deprecated/events.js", line 123, in _emit
    return this._emitOnObject.apply(this, args);
  File "resource://onebutton-at-user043-dot-com/addon-sdk/lib/sdk/deprecated/events.js", line 153, in _emitOnObject
    listener.apply(targetObj, params);
  File "resource://onebutton-at-user043-dot-com/ubp-install/lib/main.js", line 232, in 
type: 'Application_reload'
  File "resource://onebutton-at-user043-dot-com/addon-sdk/lib/sdk/content/worker.js", line 369, in 
    emit: function () self._emitEventToContent(Array.slice(arguments))
  File "resource://onebutton-at-user043-dot-com/addon-sdk/lib/sdk/content/worker.js", line 404, in _emitEventToContent
    throw new Error(ERR_FROZEN);
Error: The page is currently hidden and can no longer be used until it is visible again. 
```

简而言之，我需要一种重新加载 Firefox 扩展的方法。

# java - 数据库缓存解决方案可以在客户端本地使用而不是在服务器端使用吗？

> ID：15943713
> 
> 赞同：2
> 
> 时间：2013-04-11T08:10:42.153
> 
> 标签：java, caching, ehcache, data-synchronization

我对客户端服务器 Java 桌面应用程序的缓存解决方案感兴趣，既可以加速本地查询，又可以限制网络流量。

目前，每个客户端每次必须向用户显示列表或操作数据时都会反复查询服务器，即使在同一个方法中，getAllUsers() 或 findAll() 之类的方法也很常见。

这意味着网络对这种类型的查询非常拥挤。我已经看到了这个有趣的线程[Lightweight Java Object cache API](https://stackoverflow.com/questions/230649/lightweight-java-object-cache-api)但是我认为这些库的工作方式是客户端在使用服务器更新其缓存之前在本地保留查询缓存一段时间。

然而，这些 API 中的大多数似乎只在基于浏览器的应用程序中工作，其中每个客户端都向服务器的数据库请求数据。相反，我处于客户端服务器摆动应用程序的情况。

由于我的数据库结果之间存在复杂的关系，因此我需要客户端保留查询缓存，但由于另一个客户端的更新，一旦服务器数据库更新，它们的缓存就会失效，因此 TTL 甚至不是必需的，因为如果服务器数据库永远不会更改客户端的缓存很可能永远不会过期。

桌面应用程序是否有某种数据库缓存和同步？你能告诉我哪些缓存库（Guava、cache4j、whirlyCache、LRUMap、EHCache）也提供了这个特性或者这种类型的缓存是如何被调用的？

# php - 如何配置 Jenkins 作业以运行单元测试

> ID：15943714
> 
> 赞同：4
> 
> 时间：2013-04-11T08:10:51.640
> 
> 标签：php, unit-testing, jenkins, continuous-integration, kohana

在 Jenkins 中为基于 Kohana 的项目创建作业后，我无法弄清楚如何配置作业以运行单元测试。[基本上我使用了来自http://jenkins-php.org/](http://jenkins-php.org/)的模板，但是 Kohana 有其独特的设置，它不允许我像普通的 php 项目一样运行单元测试。由于 phpunit 命令不是从 CLI 运行的，因此我不断收到错误消息：

```
 [exec] ErrorException [ 1 ]: Call to undefined method Log::instance() ~ SYSPATH/classes/kohana/core.php [ 336 ]
 [exec] PHP Notice:  Undefined index: REMOTE_ADDR in /var/lib/jenkins/jobs/Construct-A-Cost Deployment Build/workspace/application/bootstrap.php on line 70
 [exec] PHP Fatal error:  Call to undefined method Log::instance() in /var/lib/jenkins/jobs/Construct-A-Cost Deployment Build/workspace/system/classes/kohana/core.php on line 336 
```

在 build.xml 中，我有

```
 <target name="phpunit" description="Run unit tests with PHPUnit">
   <mkdir dir="${basedir}/application/cache" />
   <mkdir dir="${basedir}/application/logs" />
   <exec dir="${basedir}/application/tests" executable="phpunit" failonerror="true" />
 </target> 
```

在 application/tests/phpunit.xml 中，我得到了

```
<phpunit colors="true" bootstrap="../../modules/unittest/bootstrap.php">
<testsuites>
    <testsuite name="Calculation Tests">
        <file>./classes/controller/calculation.php</file>
    </testsuite>
</testsuites>
</phpunit> 
```

任何人都可以分享您在 Jenkins 中设置 Kohana 工作的经验吗？谢谢！

**更新**：从 CLI 运行相同的测试，它可以在带有 PHPUnit 3.6.11 的 Windows XP 中工作，但它不能在带有 PHPUnit 3.7.18 的 Ubuntu Server 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:20:49.970

我通过以下两个步骤解决问题：

```
sudo pear update-channels
sudo pear upgrade-all 
```

它更新了包括 PHPUnit 在内的所有包。

# android - 在基于选项卡的应用程序中添加地图视图

> ID：15943719
> 
> 赞同：0
> 
> 时间：2013-04-11T08:11:11.433
> 
> 标签：android, google-maps, tabs, android-fragments, android-mapview

我有一个基于选项卡的应用程序，您可以在其中一个选项卡中导航到地图屏幕，如下所示：

`select a category > select a company > click on 'contact us' button`.

“联系我们”是我要显示地图的屏幕。我读到不能将`Fragment`（谷歌地图）添加到 API 11（蜂窝）以下的片段中。我有没有谷歌的替代品

Maps API 来实现我的目标？或者有解决方法吗？我的最低 SDK 是 API 8，目标是 17。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:33:48.953

您可以通过使用向 Honeycomb 之前的旧 SDK 提供片段支持`Google Map API V2`的库，将新的 SDK 与低于 11 的设备一起使用。`google-support-v4`

因此，您不需要任何解决方法，您可以继续使用`Google Maps API V2`. 只需记住进行所需的引用并使用`SupportMapFragment`and`FragmentActivity`对象。

您可以阅读我在此主题上撰写的这篇博文，了解有关如何在您的应用中集成 Google Maps API 的更多信息：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

# java - 将前 N 个结果保存到固定数组 - 顺序

> ID：15943720
> 
> 赞同：1
> 
> 时间：2013-04-11T08:11:11.170
> 
> 标签：java, arrays

我有一个巨大的数字列表，我正在对每条记录进行一些计算，例如：

```
123 456 789 213 546 789 78 156 489 952 456 789 ...... 
```

并在处理列表后，我**按顺序**获得结果（它们不存储在任何结构中），例如

```
0.156 0.895 0.12 0.145 0.146 0.222 0.123 0.489 ........ 
```

是否有一些做法，例如如何将前 5 个结果保存到**固定**数组？

第一步：

```
[0.156] 
```

第二步：

```
[0.895 0.156] 
```

第五步：

```
[0.895 0.156 0.146 0.145 0.12] 
```

第 n 步：

```
[0.895 0.489 0.222 0.156 0.146] 
```

它应该具有复杂度 O(n)，因为没有排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:20:49.587

基本上很容易你有一个 5 元素数组说

[88、77、66、55、44]

对于每个**新数字**，在数组中搜索并插入适当的**位置** （如果有的话）（可以使用基本的 for / while 循环）。

即如果你得到 60 数组将变为

[88、77、66、60、55]

在你获得 5 个元素之前，有一些问题。由于这是一个练习，我将让您编写代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:22:40.627

如果您使用 a`LinkedList`并且仅在前 5 个元素中插入，我认为这会起作用。

```
public List<Double> getTop(List<Double> inputs) {
    List<Double> top = new LinkedList<>();
    for (Double input : inputs) {
        int i = 0;
        while (i < 5 && i < top.size() && input < top.get(i))
            i++;
        if (i < 5)
            top.add(i, input);
    }
    return top.subList(0, 5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:20:42.453

In case of only 5 elements, iterating over the array and saving max 5 elements is not so hard.

You can take a look at [this](http://www.michaelpollmeier.com/selecting-top-k-items-from-a-list-efficiently-in-java-groovy/), [that](https://stackoverflow.com/questions/4084495/find-top-n-elements-in-an-array) and [here](https://stackoverflow.com/a/2784323/1651233) for a more comprehensive answers.

# c++ - 无法从 char * 转换为 const char *&

> ID：15943721
> 
> 赞同：1
> 
> 时间：2013-04-11T08:11:16.510
> 
> 标签：c++, reference, constants

我有一个类似的功能

```
 void foo(const char *&str)
    {
         cout<<str<<endl;
    } 
```

像这样使用：

```
 void main()
    {
        foo("hello");
        char *h = "hello"
        foo(h);
    } 
```

但两者都有**错误**

```
"can't convert from const char[] to const char *&" 
```

如果我更改`foo`为`void foo(const char *)`，则没有错误不能`const char *&`用作参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:40:04.700

您收到错误，因为转换是非法的。它非法的原因很简单：它`const`不需要`const_cast`.

作为禁止它的一个例子，想象一下`foo`：

```
void
foo( char const*& str )
{
    str = "abc";
}

int
main()
{
    char* h;
    foo( h );
    *h = '1';
} 
```

如果您不打算修改`str`in `foo`，请按值传递。*如果*你有，通过引用传递将有效`char const* const&`，但没有理由在这里使用它。它之所以有效，是因为附加的 const 意味着您可以将一个临时绑定到它（例如`foo( "hello" )`，其中参数是由`char const[6]`to 转换产生的临时结果`char const*`，并且`foo( h )`有效，因为隐式 const 转换将有效（在 C++ 中，但是不在 C 语言中！），只要您在任何地方添加 const （而不仅仅是在一个级别）。

此外，您的代码还使用不推荐使用的转换来初始化 `h`. 您应该在这里收到警告。并且`void main`是一个错误，不应该编译。

## 编辑：

只是要清楚，没有问题：

```
void f( char const*& str ); 
```

但是你只能用 type 的左值来调用它`char const*`；其他任何事情都会导致非法的隐式 const 转换，或者尝试使用右值初始化非常量引用，这是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:14:17.030

这将起作用

```
int main()
{
    const char *h = "hello";
    foo(h);
} 
```

# winforms - Datagridview 不更新

> ID：15943724
> 
> 赞同：0
> 
> 时间：2013-04-11T08:11:22.337
> 
> 标签：winforms, entity-framework, datagridview, objectcontext

我使用实体框架 5 处理 Windows 窗体。

我有一个 datagridview 来记录新的销售和一个保存按钮来保存我的实体的更改。但在保存实体之前，我创建了一些新的库存对象。我有另一个 gridview 可以查看我的股票，但它是只读的。

我的问题如下：

*   销售和库存在我的数据库中更新，但是当销售的网格视图显示新的销售时，库存的网格视图没有更新以显示新的库存
*   如果在添加新销售时出错（比如插入数据库时​​出现外键错误），则在更正错误并重新单击保存后，销售插入一次，但库存插入两次（或与我一样多次）有错误信息）

我试图通过 createobject 方法创建我的库存，而不仅仅是使用新的键，但问题仍然存在。

这是我的保存按钮点击代码

```
private void SaveButton_Click(object sender, EventArgs e)
    {
        try
        {
            var txnsGr = (IEnumerable<TransactionsGroupee>)this.achatsGroupeeBindingSource.DataSource;

            foreach (var txnGr in txnsGr)
                if (txnGr.EntityState == EntityState.Detached)
                    ge.TransactionsGroupees.AddObject(txnGr);

            var localTransactions = ge.ObjectStateManager.GetObjectStateEntries(EntityState.Added).Where(ent => ent.Entity is Transaction).Select(ent => ent.Entity as Transaction);
            var achats = localTransactions.Where(x => x.TransactionsGroupee.sens == (int)Sens.Achat);
            foreach (Transaction txn in achats)
            {
                for (int i = 0; i < txn.quantite; i++)
                {
                    Stock stock = ge.CreateObject<Stock>();
                    stock.Agence1 = agence;
                    stock.Transaction = txn;
                    ge.Stocks.AddObject(stock);
                }
            }
            ge.SaveChanges();
        }
        catch (Exception ex)
        {
            StringBuilder err = new StringBuilder(ex.Message);
            if (ex.InnerException != null)
                err.AppendLine().Append(ex.InnerException.Message);
            MessageBox.Show(err.ToString());
        }
    } 
```

请注意，我的销售（实际上来自主/详细信息配置中的两个网格视图）以某种方式分离，我必须先将它们附加回来，但希望这与上述问题无关。

# javascript - 在 Google Closure Compiler 中保留已经缩小的代码片段

> ID：15943727
> 
> 赞同：2
> 
> 时间：2013-04-11T08:11:37.017
> 
> 标签：javascript, google-closure-compiler

我有一些代码，我想通过 Google Closure Compiler 运行。

然而，问题是，除了我自己的代码之外，还有一段已经缩小的代码片段，我无法获得其原始来源。

因此，当通过编译器运行它时，缩小的代码会再次被编译，从而完全搞砸了。

任何人都知道注释或其他技术来防止 Google Closure Compiler 编译代码的某些部分？

```
// my code
function someFunction() {
  // some code blabla
}

someFunction();

// already minified code; should be preserved in its state
!function(){window.a='abc'; /* ... */ }(); 
```

[PS：我知道，一种解决方案是将缩小的代码移动到另一个文件，但我想知道是否有另一种解决方案。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:43:38.353

人们使用两种解决方案：1）在编译后连接已经编译的源代码。我见过人们为此使用编译器的“输出包装器”选项。2）将代码包装在 eval 中（或使用附加脚本标记注入页面）：

```
eval("my precompiled compiled code here"); 
```

# clojure - Clojure 中全局变量的赋值和使用

> ID：15943731
> 
> 赞同：1
> 
> 时间：2013-04-11T08:11:54.083
> 
> 标签：clojure

我有以下问题：

我确实理解函数式编程语言的概念不允许不可变变量，所以经典的变量赋值和用法就像

```
var foo = bar();

after that in another function...

var baz = funnything(foo); 
```

是不可能的（如果是，请纠正我，我仍在尝试了解函数式编程背后的整个想法和概念）。

我正在尝试使用 Clojure 进行一些操作，并达到了我卡住的地步：

我想获取一个网页并将 DOM 保存到一个变量中以供以后使用。程序启动，出现提示，用户可以输入他想要获取的 URL。

在获取网站的 DOM 后，他可以通过 DOM 导航，例如获取标题、所有链接或其他内容。

**问题**：因为我不能使用像

```
; More or less pseudo-code
(def page nil)

(get-url [url]
  (page (browser/get url)))

(get-title
    (println (html/select page [:title]))) 
```

我必须使用以下构造：

```
(get-title [url]
    (println (html/select (browser/get url) [:title]))) 
```

由于这种构造，每当我想通过 访问网站的某个元素时`get-title`，`get-links`或者每当用户在命令提示符下输入其中一种方法时，我必须下载整个网页。

我在这里想念什么吗？Clojure 中有经典的分配吗？我是否做错了事，应该在动手实践和边做边学之前学习更多的函数式编程概念吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:46:17.820

您可以轻松地缓存 (browser/get url) 的值，这样您就不必在每次要检查它的属性时重新获取页面。见`clojure.core/memoize`。但这只能解决部分问题。

在您的特定情况下，您的程序*需要*某种全局（或会话范围）、可变、“当前页面”或至少“当前 url”的概念，因为这是您希望用户输入的内容和调整。Clojure 提供了多种结构来管理可变状态。

由于您一次只处理一页，因此最好使用原子进行建模。请参阅[http://clojure.org/atoms](http://clojure.org/atoms)和[http://clojuredocs.org/clojure_core/clojure.core/swap！](http://clojuredocs.org/clojure_core/clojure.core/swap!)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:54:08.933

你误解了clojure中的赋值。

```
(page (browser/get url)) 
```

不等价于：page = browser/get(url)，它等价于 page(browser/get(url))。

我认为您实际上并不需要全局变量，只需要可组合的函数。您的示例可能如下所示：

```
(defn get-title [url]
  (let [page (browser/get url)]
    (println (html/select page [:title])))) 
```

如果你想缓存 broser/get 的返回值，那并使用 memoize，就像 Joost 提到的那样。

# c - 初始化没有 stange 字符的 C 数组？

> ID：15943734
> 
> 赞同：0
> 
> 时间：2013-04-11T08:12:10.237
> 
> 标签：c, arrays, syntax, char

（我已经知道其他语言，但是我正在准备的这次考试需要知道我以前从未真正研究过的 C。）

`EDIT : WOAH SO MANY ANSWERS... Give me a few mins to read all of them, thank you so much !`

这是我的代码

```
int main(int argc, char *argv[]) {
    char search_for[80]; // <----- I think the problem is either here
    printf("Search for : ? \n");
    fgets(search_for, 80, stdin); // <---- or here
    int i;
    for (i = 0; i < 80; i++) {
        printf("Char i : %c - %p \n", search_for[i], &search_for[i]);
    }

    return 0;
} 
```

这是输出，最后看到那些奇怪的字符了吗？他们为什么在这里？

```
Search for : ? 
New
Char i : N - 0x7fff52eb4ba0 
Char i : e - 0x7fff52eb4ba1 
Char i : w - 0x7fff52eb4ba2 
Char i : 
 - 0x7fff52eb4ba3 
Char i : � - 0x7fff52eb4ba4 
Char i : � - 0x7fff52eb4ba5 
Char i : � - 0x7fff52eb4ba6 
Char i : � - 0x7fff52eb4ba7 
Char i : 
 - 0x7fff52eb4ba8 
Char i : � - 0x7fff52eb4ba9 
Char i : � - 0x7fff52eb4baa 
Char i : � - 0x7fff52eb4bab 
Char i :  - 0x7fff52eb4bac 
Char i : � - 0x7fff52eb4bad 
Char i : � - 0x7fff52eb4bae 
Char i : � - 0x7fff52eb4baf 
Char i : @ - 0x7fff52eb4bb0 <---- ??
Char i : ∑ - 0x7fff52eb4bb1 <---- ??
Char i : î - 0x7fff52eb4bb2 <---- ??
Char i : l - 0x7fff52eb4bb3 <---- ??
Char i : ˇ - 0x7fff52eb4bb4 <---- ?? 
```

...和其他带有奇怪字符的行..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:16:40.637

您的循环应该只打印字符串的长度。因此，循环应该是`for (i = 0; i < strlen(search_for); i++)`。

除了字符串长度之外，由于您的数组未初始化，因此会打印堆栈的先前内容，这些内容会反映为特殊字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:14:11.450

它们在那里是因为`search_for`没有初始化：

```
char search_for[80]; /* Will contain random characters. */ 
```

并且`fgets()`不一定会写入缓冲区中的每个元素。

循环虽然`for`访问. 不检查使用`search_for`的单元化元素而不是作为终止条件：`search_for``search_for[i]``i < 80`

```
for (int i = 0; search_for[i]; i++) 
```

然后，当在 中遇到空终止字符时，此循环将终止，该字符`search_for`始终[`fgets()`](http://en.cppreference.com/w/c/io/fgets)写入（并且之后不写入任何内容，因此是垃圾字符）：

> 从给定的文件流中最多读取 count - 1 个字符并将它们存储在 str 中。**生成的字符串始终以 NULL 结尾。**如果出现文件结尾或找到换行符，则解析停止，在这种情况下 str 将包含该换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:15:55.380

出现奇怪的字符是因为只设置了字符串 +字符`fgets`的 3 个字符.... 其他字符未设置，因此可能包含随机值。`"New"``1 nul``76 chars`

如果您想确保它们被归零，请在声明之后使用，`bzero(search_for, 80)`或者只循环缓冲区而不是循环所有 80 个字符`strlen``search_for`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T08:16:06.173

您正在打印`char search_for[80]`之前分配的内存位置中超出输入长度的任何内容。你应该初始化（清理）`search_for`数组。

你这样做`char search_for[80] ={ 0 }; // initialize all 80 chars to zero`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T08:16:42.023

因为您没有正确初始化 char 数组 search_for，所以您只是得到随机字符。

当您键入以“New”开头的输入字符串时，您还在该单词之后键入了换行符 '\n' 并且您的数组初始化在那里结束。

您可以通过 strlen(search_for) 获取您的真实字符数

# c# - 使用 Fluent nhibernate 自动映射继承

> ID：15943736
> 
> 赞同：6
> 
> 时间：2013-04-11T08:12:21.157
> 
> 标签：c#, nhibernate, inheritance, automapping

我有这种情况：

```
public namespace ANamespace
{
    public abstract class ABase:IABase
    {
        //properties
    }

    public abstract class A : ABase
    {
        //properties
    }

    public class A1 : A
    {
        //properties
    }

    public class A2 : A
    {
        //properties
    }
} 
```

如果我使用此映射代码：

```
AutoMap
   .AssemblyOf<ABase>()
   .Where(e => e.Namespace == "ANamespace")
   .IncludeBase<A>().IgnoreBase<ABase>(); 
```

只创建了一个表（具有 ABase 和 A 属性）。如果我删除 IncludeBase() 则创建 A1 和 A2 （具有所有属性）。

```
AutoMap
   .AssemblyOf<ABase>()
   .Where(e => e.Namespace == "ANamespace")
   .IgnoreBase<ABase>(); 
```

如何编写映射以在我的数据库中包含 A 类（具有所有 A 和 ABase 属性）、A1 和 A2（具有特定属性）的表，而不是 ABase 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:56:20.937

三天后，我终于找到了解决这个问题的方法。拥有是不够的`IncludeBase<T>()`。您也必须映射基类。所以解决方案是：

```
AutoMap
  .AssemblyOf<ABase>()
  .Where(type=>type.IsSubclassOf(typeof(A)) || type==typeof(A))
  .IncludeBase<A>(); 
```

我希望它会帮助一些类似的问题......

# json - 如何在 pass.json 中使用“changeMes sage”键

> ID：15943739
> 
> 赞同：1
> 
> 时间：2013-04-11T08:12:28.830
> 
> 标签：json, ios6, passbook

我正在做更新通行证的推送通知。我可以将 pushToken 发送到 APN。changeMes​​sage 键呢？怎么做？如何使用它 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:48:04.193

要使用该`changeMessage`密钥，您只需将其添加到您的 JSON 字典中。然后当收到新的 .pkpass 包时，如果新的字段值与旧的 .pkpass 包中的值不同，将触发更改消息。

如果添加 %@，那么这将被新值替换

```
"auxiliaryFields" : [
  {
    "key" : "rewards",
    "label" : "Reward Points",
    "value" : "88",
    "changeMessage" : "You have %@ reward points"
  } 
```

在这种情况下，如果设备收到新的 .pkpass 并且奖励余额更改为 124 积分，则锁定屏幕（如果手机已锁定）和通知中心会显示“您有 124 积分”的提示.

# javascript - Firebug 不在控制台中显示 JSON 选项卡

> ID：15943742
> 
> 赞同：2
> 
> 时间：2013-04-11T08:12:32.827
> 
> 标签：javascript, razor, getjson, webmatrix

我正在调试我的 javascript 代码（如下）。

用户单击搜索按钮后，将填充 webgrid。我在 webgrid 中添加了一个按钮，该按钮会打开一个对话框，该对话框必须使用来自 JSON 对象的值进行填充。

这就是问题所在 - 当我使用 firebug 进行调试时，控制台中的 JSON 选项卡未显示。

以下是我的代码的一部分：

```
 $('.edit-recipients').live('click', function ()
           {
               $.getJSON('/Methods/GetRecipients/' + $(this).attr('id'), function (data)
               {
                   var recipient = data;
                   console.log(recipient);
               $('#edit-opno').val(recipient.OpNo); 
```

Console.log(recipient) 显示我的`GetRecipients`方法中的值。
此代码 `$('#edit-opno').val(recipient.OpNo);`旨在显示我在下面有此代码的输入文本中的值。

```
<input type="text" name="opno" id="edit-opno" size="15" /> 
```

但是起初我认为 GetRecipients 没有执行，但从萤火虫意识到它是使用 console.log(recipients) 执行的，显示值但没有 JSON 选项卡，因此无法填充我的对话框输入框。

以下是我的服务器端代码：

```
@{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    if(UrlData[0].IsInt()){
        var db = Database.Open("sb_cpd");
        var sql = "SELECT * FROM cpd_recipients WHERE ID = @0";
        var recipients = db.QuerySingle(sql,UrlData[0]);
        Json.Write(recipients, Response.Output);
    }
} 
```

我已经插入了正在发生的事情的图像。请注意，我的对话框没有填充来自 GetRecipients 方法的值。 ![在此处输入图像描述](https://i.stack.imgur.com/gj3dS.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:47:28.460

您应该将标头内容类型设置为 application/json。然后 Firebug 会将响应识别为 JSON：

```
@{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    if(UrlData[0].IsInt()){
        var db = Database.Open("sb_cpd");
        var sql = "SELECT * FROM cpd_recipients WHERE ID = @0";
        var recipients = db.QuerySingle(sql,UrlData[0]);
        Response.Headers.Add("Content-type", "application/json");
        Json.Write(recipients, Response.Output);
    }
} 
```

# android - 使用枚举作为自定义 XML 属性

> ID：15943745
> 
> 赞同：42
> 
> 时间：2013-04-11T08:12:38.623
> 
> 标签：android, android-layout, android-custom-view

我想在我的项目中使用自定义组件，我想将它添加到枚举属性中，如下所示，我该怎么做？

```
<com.abb.abbcustomcompanents.buttons.AbbButton
        android:id="@+id/abbBtn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        app:Type="How can i use enum here"
        />

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="abbButton">
        <attr name="Type" format="enum"/>
        <attr name="onAction" format="string"/>
    </declare-styleable>
</resources> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-04-11T08:59:28.110

前任 ：

```
<attr name="myProperty" format="enum">
         <enum name="None" value="0"/>
         <enum name="One" value="1"/>
         <enum name="Two" value="2"/>
         <enum name="Three" value="3"/>
</attr> 
```

像这样使用：

```
<YourCustomView
    ...
    app:myProperty="One"/> 
```

参考

[https://stackoverflow.com/a/15231645/1329126](https://stackoverflow.com/a/15231645/1329126)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-07T23:41:16.367

XML 内部的顺序很重要，至少要黯然失色。在您的可声明样式的上方（或内部）定义您的枚举......而不是在下方。

```
<attr name="quality">
    <enum name="Good" value="1" />
    <enum name="Better" value="2" />
    <enum name="Best" value="3" />
</attr>

<declare-styleable name="SquareView">
    <attr name="quality" />
</declare-styleable>

<declare-styleable name="CircleView">
    <attr name="quality" />
</declare-styleable> 
```

我有一个很长的枚举，所以我把它放在我的 XML 的末尾以提高可读性。它会正确解析但在设计模式下拒绝值。

# css - 在样式宽度标签内嵌入红宝石

> ID：15943749
> 
> 赞同：0
> 
> 时间：2013-04-11T08:12:59.830
> 
> 标签：css, ruby-on-rails, ruby, styles, width

我正在尝试将嵌入式 ruby​​ 添加到我的 css 样式宽度标签中。

以下是代码当前的样子：

```
<div class = "progress progress-info">
<%target = (((@candidate.civillibscore.to_f)/111.37)*100.0).to_s%>
<div class="bar" style="width: <%target%>%"> 
```

不确定我是否只是搞砸了目标变量，或者我的浮点数是否关闭（它正在打印正确的百分比），但任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:16:07.643

`<%`您在（应该是）之后缺少一个等号`<%=`：

```
<div class="bar" style="width: <%= target %>%"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:21:00.450

放在`=`这段代码之后`<%`。所以它应该看起来像这样`<%=`，没有`=`值不会显示。

# c++ - 错误：未定义对运算符的引用+（堆栈 常量&，堆栈 常量&)'

> ID：15943752
> 
> 赞同：2
> 
> 时间：2013-04-11T08:13:08.507
> 
> 标签：c++

我知道如果我不定义复制构造函数或构造函数，C++ 自动定义它
并且我知道浅拷贝和深拷贝
但是在下面的代码中我有一个似乎与复制构造函数有关的错误

```
#include<iostream>
#include <vector>
using namespace std;

template<class T>
class Stack
{
    private:
        vector<T> stack;

    public:
    vector<T> returnStack()
    {
        return stack;
    }

        vector<T> returnStack() const
    {
            return stack;
    }

    void Push(T item)
    {
        stack.insert(stack.begin()+stack.size(),item);
    }

    friend Stack operator+(const Stack &one,const Stack &other);
};

template<class T>
Stack<T>  operator+(const Stack<T> &one,const Stack<T> &other)
{
    Stack<T> newStack;
    for (typename vector<T>::size_type i = 0; i < one.returnStack().size(); i++)
    {
        newStack.Push(one.returnStack()[i]);
    }
    for (typename vector<T>::size_type i = 0; i < other.returnStack().size(); i++)
    {
        newStack.Push(other.returnStack()[i]);
    }
    return newStack;
}

int main()
{
    Stack <int > a;
    Stack <int > b;
    a.Push(1);
    a.Push(2);
    b.Push(3);
    b.Push(4);
    Stack <int> c=a+b ;//have a bug
    return 0;
} 
```

上面的代码realese下面的错误
`undefined reference to operator+(Stack<int> const&, Stack<int> const&)'`

我花了很多时间调试它，但我累了。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:18:44.413

Friend declarations are strange, and even stranger in templates.

This fixes it:

```
// forward declarations required

template<class T>
class Stack;

template<class T>
Stack<T>  operator+(const Stack<T> &one,const Stack<T> &other);

template<class T>
class Stack
{
    private:
        vector<T> stack;

    public:
    vector<T> returnStack()
    {
        return stack;
    }

        vector<T> returnStack() const
    {
            return stack;
    }

    void Push(T item)
    {
        stack.insert(stack.begin()+stack.size(),item);
    }

    friend Stack operator+<>(const Stack &one,const Stack &other);
    //                    ^^ brackets required
};

template<class T>
Stack<T>  operator+(const Stack<T> &one,const Stack<T> &other)
{

    Stack<T> newStack;
    return newStack;

} 
```

To be honest I'm not sure why this is required, but hey, it works.

Alternatively you can define the friend function in-class:

```
template<class T>
class Stack
{
    private:
        vector<T> stack;

    public:
    vector<T> returnStack()
    {
        return stack;
    }

        vector<T> returnStack() const
    {
            return stack;
    }

    void Push(T item)
    {
        stack.insert(stack.begin()+stack.size(),item);
    }

    friend Stack operator+(const Stack &one,const Stack &other) {
        return Stack();
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:22:35.437

简短的回答。将朋友声明更改为

```
friend Stack operator+<>(const Stack &one,const Stack &other); 
```

完整的解释在这里 - [http://www.parashift.com/c++-faq/template-friends.html](http://www.parashift.com/c++-faq/template-friends.html)

# c# - WindsorContainer在使用工厂时能否通过解析树传递对象

> ID：15943759
> 
> 赞同：0
> 
> 时间：2013-04-11T08:13:30.030
> 
> 标签：c#, castle-windsor, windsor-facilities

我有这样的问题：

```
public interface IBaseVMFactory
{
  public BaseVm Create(TransientDependency otherVM);
}

public class BaseVM
{
   BaseVM(ChildVM1 child1, ChildVM2 child2)
}

public class ChildVM1
{
   ChildVM1(TransientDependency otherVM)
} 
```

我所有的视图模型（..VM）都需要是瞬态的。而且我需要 childVM1 获得与工厂相同的 otherVM 实例。

我尝试将 BaseVm 注册为 ScopedLifestyle，并在范围内解析时手动实现工厂并传递实例。但是在解析时我仍然得到了另一个虚拟机的新实例。

我在这里遗漏了一些明显的东西吗？

凯蒂尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:15:28.380

我尝试使用以下代码重现 Windsor 3.2 的问题：

```
using System.Diagnostics;
using Castle.Facilities.TypedFactory;
using Castle.MicroKernel.Registration;
using Castle.Windsor;

namespace ConsoleApplication2
{
    public class SomeViewModel
    {
        public SomeViewModel(ISomeFactory factory)
        {
            var dependency1 = factory.CreateSomeDependency();
            var dependency2 = factory.CreateSomeDependency();

            Debug.Assert(dependency1 != dependency2);
            Debug.Assert(dependency1.Dep == dependency2.Dep);
        }
    }

    public class SomeDependency
    {
        private readonly DepDep _dep;

        public SomeDependency(DepDep dep)
        {
            _dep = dep;
        }

        public DepDep Dep
        {
            get { return _dep; }
        }
    }

    public class DepDep
    {
    }

    public interface ISomeFactory
    {
        SomeDependency CreateSomeDependency();
    }

    class Program
    {
        static void Main(string[] args)
        {
            var container = new WindsorContainer();
            container.AddFacility<TypedFactoryFacility>();
            container.Register(
                Component.For<SomeViewModel>().LifestyleTransient(),
                Component.For<SomeDependency>().LifestyleTransient(),
                Component.For<DepDep>().LifestyleBoundTo<SomeViewModel>(),
                Component.For<ISomeFactory>().AsFactory().LifestyleTransient()
                );
            container.Resolve<SomeViewModel>();
        }
    }
} 
```

令我惊讶的是，这很有效。因此，工厂现在似乎正在接管创建它的上下文的范围。我希望这能帮到您。

亲切的问候，马尔维恩。

# windows - find.exe 的错误？

> ID：15943762
> 
> 赞同：7
> 
> 时间：2013-04-11T08:13:44.613
> 
> 标签：windows, command-line

在 C++ 中，我们有一种在文件中搜索文本的方法。它通过将文件读取到变量并使用 strstr 来工作。但是当文件变得非常大时，我们遇到了麻烦。

我想我可以通过使用_popen调用find.exe来解决这个问题。它可以找到，除非这些条件都为真：

*   该文件的类型为 unicode (BOM=FFFE)
*   该文件正好是 4096 字节
*   您正在搜索的文本是文件中的最后一个文本

要重新创建，您可以这样做：

1.  打开记事本
2.  插入 2046 X，然后在末尾插入 A
3.  另存为test.txt，编码=“unicode”
4.  验证文件是否正好是 4096 字节
5.  打开命令提示符并输入：find "A" /c test2.txt -> No hits

我也试过这个：

*   添加或删除 X，您将获得成功（文件不再是 4096 字节）
*   另存为 UTF-8（并添加足够的 X 以使文件再次变为 4096 字节），然后您就会成功
*   在文件中间搜索一些东西（文件仍然是 unicode 和 4096 字节），你就会成功。

这是一个错误，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:51:44.207

非常有趣的错误。

这个问题让我在 XP 和 Win 7 上做了一些实验——行为是不同的。

**经验值**

*ANSI* - FIND 无法在单行上读取超过 1023 个字符（1023 个字节）。FIND 可以匹配超过 1023 个字符的行，只要搜索字符串在第 1024 个之前匹配。匹配的行打印输出在 1023 个字符后被截断。

*Unicode* - FIND 无法在一行中读取超过 1024 个字符（2048 个字节）。FIND 可以匹配超过 1024 个字符的行，只要搜索字符串在第 1025 个之前匹配。匹配的行打印输出在 1024 个字符后被截断。

我觉得很奇怪，XP 上 Unicode 和 ANSI 的行限制不是相同的字节数，也不是简单的倍数。以字节表示的 Unicode 限制是 ANSI 限制的 2 倍加 1。

注意：匹配长行的截断也会截断换行符，因此下一个匹配行看起来会附加到上一行。如果您使用 /N 选项，您可以判断它是一个新行。

**窗口 7**

*ANSI* - 我没有找到可以搜索的最大行长度的限制（尽管我没有很努力地尝试）。任何超过 4095 个字符（4095 个字节）的匹配行在 4095 个字符后被截断。FIND 可以成功搜索一行中超过 4095 个字符，只是无法显示所有字符。

*Unicode* - 我没有找到可以搜索的最大行长度的限制（尽管我没有很努力地尝试）。任何超过 2047 个字符（4094 个字节）的匹配行在 2047 个字符后被截断。FIND 可以成功搜索一行超过 2047 个字符，只是无法显示所有字符。

由于 Unicode 字节长度始终是 2 的倍数，并且最大 ANSI 可显示长度是奇数，因此 Unicode 的最大可显示行长度（以字节为单位）比 ANSI 小一是有意义的。

但是还有奇怪的 Unicode 错误。如果 Unicode 文件长度是 4096 字节的整数倍，则无法搜索或打印最后一个字符。文件包含单行还是多行都没有关系。它仅取决于总文件长度。

我发现有趣的是 4096 错误的倍数在最大可打印行长度（以字节为单位）之一之内。但我不知道这些行为之间是否有关系，或者仅仅是巧合。

注意：匹配长行的截断也会截断任何换行符，因此下一个匹配行看起来会附加到前一行。如果您使用 /N 选项，您可以判断它是一个新行。

# php - 如何在json中获取字段名称

> ID：15943765
> 
> 赞同：-4
> 
> 时间：2013-04-11T08:13:56.897
> 
> 标签：php, json

我有 json 数据，可以这样说

```
$string='[{"main_menu_id":"1","main_menu_caption":"Home","main_is_get_from_page":"0","is_sub_menu":"0","main_url_page":"","sub_menu_caption":"","caption_type":"","sub_is_get_from_page":"","sub_url_page":"","sub_additional_param":""}]'; 
```

如何仅在此 json 数据中获取字段名称？我期望的结果是 main_menu_id、Main_menu_caption 等。我需要提取键名而不是值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:19:02.900

```
$string='[{"main_menu_id":"1","main_menu_caption":"Home","main_is_get_from_page":"0","is_sub_menu":"0","main_url_page":"","sub_menu_caption":"","caption_type":"","sub_is_get_from_page":"","sub_url_page":"","sub_additional_param":""}]';
$arrJson  = array();
$arrJson  = json_decode($string);
foreach($arrJson as $key=>$value){
  foreach($value as $keyval=>$val){
    echo $keyval."<br>";
  }
} 
```

# python - 如何获取 Pandas DataFrame 的行数？

> ID：15943769
> 
> 赞同：1504
> 
> 时间：2013-04-11T08:14:08.400
> 
> 标签：python, pandas, dataframe

我正在尝试使用 Pandas 获取数据帧 df 的行数，这是我的代码。

### 方法一：

```
total_rows = df.count
print total_rows + 1 
```

### 方法二：

```
total_rows = df['First_column_label'].count
print total_rows + 1 
```

两个代码片段都给了我这个错误：

> 类型错误：+ 不支持的操作数类型：“instancemethod”和“int”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2203
> 
> 时间：2013-04-11T08:24:29.633

对于 dataframe `df`，可以使用以下任何一种：

*   `len(df.index)`
*   `df.shape[0]`
*   `df[df.columns[0]].count()`（==第一列[中非 NaN 值的数量）](https://pandas.pydata.org/docs/reference/api/pandas.Series.count.html)

[![性能图](https://i.stack.imgur.com/wEzue.png)](https://i.stack.imgur.com/wEzue.png)

* * *

重现情节的代码：

```
import numpy as np
import pandas as pd
import perfplot

perfplot.save(
    "out.png",
    setup=lambda n: pd.DataFrame(np.arange(n * 3).reshape(n, 3)),
    n_range=[2**k for k in range(25)],
    kernels=[
        lambda df: len(df.index),
        lambda df: df.shape[0],
        lambda df: df[df.columns[0]].count(),
    ],
    labels=["len(df.index)", "df.shape[0]", "df[df.columns[0]].count()"],
    xlabel="Number of rows",
) 
```

* * *

## 回答 #2

> 赞同：422
> 
> 时间：2016-02-20T13:30:05.467

假设`df`您的数据框是：

```
count_row = df.shape[0]  # Gives number of rows
count_col = df.shape[1]  # Gives number of columns 
```

或者，更简洁地说，

```
r, c = df.shape 
```

* * *

## 回答 #3

> 赞同：228
> 
> 时间：2013-08-19T15:02:45.520

使用`len(df)`:-)。

`__len__()`记录在“返回索引长度”中。

计时信息，设置方式与[root 的回答](https://stackoverflow.com/questions/15943769/how-do-i-get-the-row-count-of-a-pandas-dataframe/15943975#15943975)相同：

```
In [7]: timeit len(df.index)
1000000 loops, best of 3: 248 ns per loop

In [8]: timeit len(df)
1000000 loops, best of 3: 573 ns per loop 
```

由于多了一个函数调用，所以说它比`len(df.index)`直接调用慢一点当然是正确的。但这在大多数情况下应该无关紧要。我觉得`len(df)`可读性很强。

* * *

## 回答 #4

> 赞同：130
> 
> 时间：2019-03-30T19:55:03.587

> # 如何获取 Pandas DataFrame 的行数？

此表总结了您希望在 DataFrame（或 Series，为了完整性）中计算某些内容的不同情况，以及推荐的方法。

[![在此处输入图像描述](https://i.stack.imgur.com/3FXuI.png)](https://i.stack.imgur.com/3FXuI.png)

> **脚注**
> 
> 1.  `DataFrame.count`将每列的计数作为 a 返回，`Series`因为非空计数因列而异。
> 2.  `DataFrameGroupBy.size`返回 a `Series`，因为同一组中的所有列共享相同的行数。
> 3.  `DataFrameGroupBy.count`返回 a `DataFrame`，因为同一组中的列之间的非空计数可能不同。要获取特定列的分组非空计数，请使用`df.groupby(...)['x'].count()`其中“x”是要计数的列。

* * *

# **最少的代码示例**

下面，我展示了上表中描述的每种方法的示例。首先，设置 -

```
df = pd.DataFrame({
    'A': list('aabbc'), 'B': ['x', 'x', np.nan, 'x', np.nan]})
s = df['B'].copy()

df

   A    B
0  a    x
1  a    x
2  b  NaN
3  b    x
4  c  NaN

s

0      x
1      x
2    NaN
3      x
4    NaN
Name: B, dtype: object 
```

### DataFrame 的行数：`len(df)`, `df.shape[0]`, 或`len(df.index)`

```
len(df)
# 5

df.shape[0]
# 5

len(df.index)
# 5 
```

比较恒定时间操作的性能似乎很愚蠢，尤其是当差异在“认真，别担心”的级别时。但这似乎是其他答案的趋势，所以为了完整性，我也在做同样的事情。

在上述三种方法中，`len(df.index)`（如其他答案中所述）是最快的。

> **笔记**
> 
> *   上述所有方法都是常数时间操作，因为它们是简单的属性查找。
> *   `df.shape`（类似于`ndarray.shape`）是返回元组的属性`(# Rows, # Cols)`。例如，`df.shape`返回`(8, 2)`此处的示例。

### DataFrame 的列数：`df.shape[1]`,`len(df.columns)`

```
df.shape[1]
# 2

len(df.columns)
# 2 
```

类似于`len(df.index)`,`len(df.columns)`是这两种方法中较快的一种（但需要输入更多字符）。

### 系列的行数：`len(s)`, `s.size`,`len(s.index)`

```
len(s)
# 5

s.size
# 5

len(s.index)
# 5 
```

`s.size`并且`len(s.index)`在速度方面大致相同。但我推荐`len(df)`。

> **Note** `size`是一个属性，它返回元素的数量（=任何系列的行数）。DataFrames 还定义了一个 size 属性，它返回与`df.shape[0] * df.shape[1]`.

### 非空行数：`DataFrame.count`和`Series.count`

这里描述的方法只计算非空值（意味着 NaN 被忽略）。

调用将返回*每*列[`DataFrame.count`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.count.html)的非 NaN 计数：

 *```
df.count()

A    5
B    3
dtype: int64 
```

对于系列，使用[`Series.count`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.count.html)类似的效果：

```
s.count()
# 3 
```

### 分组行数：`GroupBy.size`

对于`DataFrames`，用于[`DataFrameGroupBy.size`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.DataFrameGroupBy.size.html)计算每组的行数。

```
df.groupby('A').size()

A
a    2
b    2
c    1
dtype: int64 
```

同样，对于`Series`，您将使用[`SeriesGroupBy.size`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.size.html).

```
s.groupby(df.A).size()

A
a    2
b    2
c    1
Name: B, dtype: int64 
```

在这两种情况下，`Series`都会返回 a。这也很有意义，`DataFrames`因为所有组共享相同的行数。

### 分组非空行数：`GroupBy.count`

与上面类似，但使用[`GroupBy.count`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.size.html)，而不是`GroupBy.size`。请注意，`size`始终返回 a `Series`，而如果在特定列上调用，则`count`返回 a `Series`，否则返回 a `DataFrame`。

以下方法返回相同的内容：

```
df.groupby('A')['B'].size()
df.groupby('A').size()

A
a    2
b    2
c    1
Name: B, dtype: int64 
```

同时，对于`count`，我们有

```
df.groupby('A').count()

   B
A
a  2
b  1
c  0 
```

...调用整个 GroupBy 对象，与，

```
df.groupby('A')['B'].count()

A
a    2
b    1
c    0
Name: B, dtype: int64 
```

在特定列上调用。

* * *

## 回答 #5

> 赞同：59
> 
> 时间：2016-06-25T05:23:38.267

## TL;DR**使用`len(df)`**

**`len()`**让您获取列表中的项目数。因此，要获取 DataFrame 的行数，只需使用`len(df)`.

`df.index`或者，您可以分别使用和访问所有行和所有列`df.columns`。由于您可以使用**`len(anyList)`**获取元素编号，因此使用 `len(df.index)`将为您提供行数，并`len(df.columns)`提供列数。

或者，您可以使用`df.shape`which 返回行数和列数（作为元组）。如果要访问行数，请仅使用`df.shape[0]`. 对于列数，仅使用：`df.shape[1]`。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2015-08-19T19:07:17.247

除了前面的答案，您可以使用`df.axes`获取具有行和列索引的元组，然后使用该`len()`函数：

```
total_rows = len(df.axes[0])
total_cols = len(df.axes[1]) 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-12-07T23:37:11.680

...以[Jan-Philip Gehrcke 的回答为基础](https://stackoverflow.com/questions/15943769/how-do-i-get-the-row-count-of-a-pandas-dataframe/18317067#18317067)。

`len(df)`or`len(df.index)`比 快的原因`df.shape[0]`：

看代码。df.shape 是一个`@property`运行 DataFrame 方法调用`len`两次的方法。

```
df.shape??
Type:        property
String form: <property object at 0x1127b33c0>
Source:
# df.shape.fget
@property
def shape(self):
    """
    Return a tuple representing the dimensionality of the DataFrame.
    """
    return len(self.index), len(self.columns) 
```

在 len(df) 的引擎盖下

```
df.__len__??
Signature: df.__len__()
Source:
    def __len__(self):
        """Returns length of info axis, but here we use the index """
        return len(self.index)
File:      ~/miniconda2/lib/python2.7/site-packages/pandas/core/frame.py
Type:      instancemethod 
```

`len(df.index)`会比`len(df)`它少一个函数调用稍快，但这总是比`df.shape[0]`

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-09-29T07:41:41.697

[我从R](https://en.wikipedia.org/wiki/R_%28programming_language%29)背景来到 Pandas ，我发现 Pandas 在选择行或列时更加复杂。

我不得不与它搏斗了一段时间，然后我找到了一些应对的方法：

获取列数：

```
len(df.columns)
## Here:
# df is your data.frame
# df.columns returns a string. It contains column's titles of the df.
# Then, "len()" gets the length of it. 
```

获取行数：

```
len(df.index) # It's similar. 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-05-12T07:14:24.350

你也可以这样做：

假设`df`是您的数据框。然后`df.shape`给你你的数据框的形状，即`(row,col)`

因此，分配以下命令以获得所需的

```
 row = df.shape[0], col = df.shape[1] 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-02-22T02:58:24.607

如果您想在链接操作的中间获取行数，您可以使用：

```
df.pipe(len) 
```

例子：

```
row_count = (
      pd.DataFrame(np.random.rand(3,4))
      .reset_index()
      .pipe(len)
) 
```

如果您不想在`len()`函数中放置长语句，这将很有用。

你可以`__len__()`改用，但`__len__()`看起来有点奇怪。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-09-21T01:59:14.190

对于数据帧 df，在探索数据时使用打印的逗号格式的行数：

```
def nrow(df):
    print("{:,}".format(df.shape[0])) 
```

例子：

```
nrow(my_df)
12,456,789 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-04-24T16:30:22.207

任何一个都可以做到（`df`是DataFrame的名称）：

**方法一**：使用`len`功能：

`len(df)`将给出名为 的 DataFrame 中的行数`df`。

**方法2**：使用`count`功能：

`df[col].count()`将计算给定列中的行数`col`。

`df.count()`将给出所有列的行数。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-24T15:14:22.540

找出数据框中行数的另一种方法是[`pandas.Index.size`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.size.html).

请注意，正如我评论[接受的答案](https://stackoverflow.com/questions/15943769/how-do-i-get-the-row-count-of-a-pandas-dataframe/15943975#15943975)，

> Suspected`pandas.Index.size`实际上会比`len(df.index)`但`timeit`在我的计算机上告诉我的速度更快（每个循环慢约 150 ns）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-05T19:49:33.853

我不确定这是否可行（数据*可以*省略），但这可能可行：

```
*dataframe name*.tails(1) 
```

然后使用它，您可以通过运行代码片段并查看提供给您的行号来找到行数。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-01-02T23:04:44.147

想一想，数据集是“数据”并将您的数据集命名为“data_fr”，data_fr 中的行数是“nu_rows”

```
#import the data frame. Extention could be different as csv,xlsx or etc.
data_fr = pd.read_csv('data.csv')

#print the number of rows
nu_rows = data_fr.shape[0]
print(nu_rows) 
```*

# java - 找不到主启动类

> ID：15943771
> 
> 赞同：2
> 
> 时间：2013-04-11T08:14:11.490
> 
> 标签：java, classnotfound

我使用 Swing 构建了一个应用程序并将其导出为可运行的 jar 文件并将其转换为 .exe 文件。它在某些系统中工作正常，但在其他系统中显示弹出错误，显示“**找不到主启动类**”并且应用程序退出。

有没有人遇到过这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-18T20:48:05.153

您需要在 Jar2Exe 中指定的同一级别进行编译。

在 Eclipse 中，右键单击项目 > 属性 > Java 编译器 > JDK 合规性 > 1.6（例如）。

然后，将 1.6 指定为构建 .exe 文件时所需的最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:18:20.040

请检查您生成的清单文件的类路径。

检查此链接...[双击.jar文件时“找不到主类”](https://stackoverflow.com/questions/5428079/could-not-find-the-main-class-when-double-clicking-jar-file)

# ssh - cmdkey、mstsc 和本地隧道

> ID：15943775
> 
> 赞同：0
> 
> 时间：2013-04-11T08:14:19.537
> 
> 标签：ssh, rdp, tunnel, plink

我有一个问题，我正在尝试设置用户名和密码来运行 RDP。我为此使用 cmdkey 。它适用于正常连接，但是当我想连接到隧道会话时，它不会填写用户名和密码....问题出在哪里？例子：

```
 cmdkey /generic:TERMSRV/localhost:63344 /user:foo /pass:bar
   mstsc /v:127.0.0.1:63344 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:30:47.817

如果有人好奇。这只是愚蠢的错误——在 cmdkey 中——不应该包括端口！很简单...

# symfony - 如何在 Symfony2 中获取控制器的所有路由列表？

> ID：15943780
> 
> 赞同：53
> 
> 时间：2013-04-11T08:14:27.057
> 
> 标签：symfony, indexing, controller, routes, symfony-2.1

我有一个实现所有**routes/URL(s)**的控制器。我的想法是在所有帮助页面上提供一个通用索引。

有没有办法获取控制器（从控制器内）定义的所有路由`Symfony2`？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-04-11T08:38:57.103

您可以做的是将 cmd 与（最高 SF2.6）一起使用

```
php app/console router:debug 
```

对于 SF 2.7，命令是

```
php app/console debug:router 
```

对于 SF 3.0，命令是

```
php bin/console debug:router 
```

它向您显示所有路线。

如果您为每个控制器定义一个前缀（我推荐），您可以例如使用

```
php app/console router:debug | grep "<prefixhere>" 
```

显示所有匹配的路线

要显示获取控制器中的所有路由，输出基本相同，我将在控制器中使用以下内容（它与 router:debug 命令中使用的方法相同） symfony 组件

```
/**
 * @Route("/routes", name="routes")
 * @Method("GET")
 * @Template("routes.html.twig")
 *
 * @return array
 */
public function routeAction()
{
    /** @var Router $router */
    $router = $this->get('router');
    $routes = $router->getRouteCollection();

    foreach ($routes as $route) {
        $this->convertController($route);
    }

    return [
        'routes' => $routes
    ];
}

private function convertController(\Symfony\Component\Routing\Route $route)
{
    $nameParser = $this->get('controller_name_converter');
    if ($route->hasDefault('_controller')) {
        try {
            $route->setDefault('_controller', $nameParser->build($route->getDefault('_controller')));
        } catch (\InvalidArgumentException $e) {
        }
    }
} 
```

路线.html.twig

```
<table>
{% for route in routes %}
    <tr>
        <td>{{ route.path }}</td>
        <td>{{ route.methods|length > 0 ? route.methods|join(', ') : 'ANY' }}</td>
        <td>{{ route.defaults._controller }}</td>
    </tr>
{% endfor %}
</table> 
```

输出将是：

`/_wdt/{token} ANY web_profiler.controller.profiler:toolbarAction` 等等

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-11T13:41:38.467

您可以获取所有路由，然后从中创建一个数组，然后将该控制器的路由传递给您的树枝。

这不是一个漂亮的方式，但它的工作原理.. 2.1 反正..

```
 /** @var $router \Symfony\Component\Routing\Router */
    $router = $this->container->get('router');
    /** @var $collection \Symfony\Component\Routing\RouteCollection */
    $collection = $router->getRouteCollection();
    $allRoutes = $collection->all();

    $routes = array();

    /** @var $params \Symfony\Component\Routing\Route */
    foreach ($allRoutes as $route => $params)
    {
        $defaults = $params->getDefaults();

        if (isset($defaults['_controller']))
        {
            $controllerAction = explode(':', $defaults['_controller']);
            $controller = $controllerAction[0];

            if (!isset($routes[$controller])) {
                $routes[$controller] = array();
            }

            $routes[$controller][]= $route;
        }
    }

    $thisRoutes = isset($routes[get_class($this)]) ?
                                $routes[get_class($this)] : null ; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-05-06T18:10:50.870

我正想这样做，在搜索代码之后，我想出了这个适用于单个控制器（或实际上任何资源）的解决方案。适用于 Symfony 2.4（我没有使用以前的版本进行测试）：

```
$routeCollection = $this->get('routing.loader')->load('\Path\To\Controller\Class');

foreach ($routeCollection->all() as $routeName => $route) {
   //do stuff with Route (Symfony\Component\Routing\Route)
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-09-02T02:20:13.223

如果有人在这个问题上绊倒，这就是我在全局树枝范围（symfony 4）中导出路由的方式。

### `src/Helper/Route.php`

```
<?php

namespace App\Helper;

use Symfony\Component\Routing\RouterInterface;

class Routes
{
    private $routes = [];

    public function __construct(RouterInterface $router)
    {
        foreach ($router->getRouteCollection()->all() as $route_name => $route) {
            $this->routes[$route_name] = $route->getPath();
        }
    }

    public function getRoutes(): array
    {
        return $this->routes;
    }
} 
```

### `src/config/packages/twig.yaml`

```
twig:
    globals:
        route_paths: '@App\Helper\Routes' 
```

### 然后在你的 twig 文件中填充一个 javascript 变量以在你的脚本中使用

```
<script>
    var Routes = {
        {% for route_name, route_path in routes_service.routes %}
            {{ route_name }}: '{{ route_path }}',
        {% endfor %}
    }
</script> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-31T11:13:22.507

在 Symfony 4 中，我想在一个列表中获取所有路由，包括控制器和操作。在 Rails 中，默认情况下你可以得到这个。

在 Symfony 中，您需要将参数添加`show-controllers`到`debug:router`命令中。

如果有人在寻找相同的功能，可以通过以下方式获得：

```
bin/console debug:router --show-controllers 
```

这将产生如下列表

```
------------------------------------------------------------------------- -------------------------------------
Name                   Method    Scheme    Host     Path                    Controller
------------------------------------------------------------------------- -------------------------------------
app_some_good_name     ANY       ANY       ANY      /example/example        ExampleBundle:Example:getExample
------------------------------------------------------------------------- ------------------------------------- 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-26T06:29:14.167

最安全的方法是使用 symfony 控制器解析器，因为您永远不知道您的控制器是否被定义为完全限定的类名、服务或任何可调用的声明。

```
 foreach ($this->get('router')->getRouteCollection() as $route) {
        $request = new Request();
        $request->attributes->add($route->getDefaults());

        [$service, $method] = $this->resolver->getController($request);

        // Do whatever you like with the instanciated controller
    } 
```

# c++ - 指针的 C++ 运算符重载

> ID：15943781
> 
> 赞同：4
> 
> 时间：2013-04-11T08:14:28.643
> 
> 标签：c++, operator-overloading, rvalue-reference

我想知道（只是出于好奇）为什么在 C++ 中不允许运算符重载用于指针。我的意思是这样的：

```
Vector2d* operator+(Vector2d* a, Vector2d* b) { return new Vector2d(a.x + b.x, a.y + b.y); }

Vector2d* a = new Vector2d(1, 1); 
Vector2d* b = new Vector2d(2, 2); 
Vector2d* c = a + b; 
```

注意 'a + b' 如何创建一个新的 Vector 对象，然后只将其地址复制到 'c' 中，而不调用复制构造函数。所以它可以解决新的右值引用解决的相同问题。此外，据我所知，它几乎等同于在 C# 中使用运算符重载时发生的情况（但我在这里可能错了，我从未真正使用过 C#），以及为什么在 C# 中不需要右值引用。

的确，右值引用解决方案更好，因为它允许基于堆栈的对象，而这种重载将强制所有 Vector2d 对象都存在于堆上，但是，它似乎在编译器中很容易实现，可能在右值参考出现之前几年。使用自定义分配器，它甚至不会*那么*慢。

那么这仅仅是因为“最小惊喜”原则而违法，还是还有其他原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T08:24:10.757

> 的确，右值引用解决方案更好，因为它允许基于堆栈的对象，而这种重载将强制所有 Vector2d 对象都存在于堆上，但是，它似乎在编译器中很容易实现，可能在右值参考出现之前几年。使用自定义分配器，它甚至不会那么慢。
> 
> 那么这仅仅是因为“最小惊喜”原则而违法，还是还有其他原因？

*   它没有正确链接......`a + b + c`应该怎么做，泄漏内存？
*   指针算术在 C++ 中已经有了意义……这对于在类型之间保持一致很有用，否则例如算法将无法在对象的容器上正常工作。
*   按值返回某些东西意味着调用者不需要清理对象：如果它使用空闲存储（堆）来存储实际数据，它将在必要时自动删除它。使始终如一的强大内存使用更容易。

> 注意 'a + b' 如何创建一个新的 Vector 对象，然后只将其地址复制到 'c' 中，而不调用复制构造函数。所以它可以解决新的右值引用解决的相同问题。

常用的返回值优化也解决了这个问题，帮助编译器安排将返回值直接构造到调用者的缓冲区中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:30:29.973

主要原因是指针已经为它们定义了一定数量的运算符。如果我有两个 类型为 和 的`a`变量，并且我写了 ，那么读者就知道他必须寻找重载或隐式转换。如果变量有 type ，读者可能会认为这是指针算术；拥有它意味着其他事情会令人困惑，并且可能会导致出现数组的问题（包括在内部）。`b``MyType``a - b``MyType*``a - b``MyType``std::vector`

类似的考虑适用于许多其他运营商。C++ 的指导方针是你应该能够扩展语言，但不能改变它。（而且我知道一元`&`是这条规则的一个例外。）

关于 C#，语言是不同的。在 C# 中，指针不是对象。`MyType`和之间没有区别 `MyType*`，指针上也没有运算符。而且 C# 不使用值语义（通常），因为 C++ 中的大多数对象都具有值语义，并且实际上永远不会被动态分配。（如果`Vector2d`意味着它看起来的意思，它不应该在 C++ 中动态分配。）

# android - Android 线程、片段和适配器

> ID：15943782
> 
> 赞同：0
> 
> 时间：2013-04-11T08:14:31.870
> 
> 标签：android, multithreading, android-fragments

我创建了一个自定义适配器，可以在片段中膨胀行。我想知道如何把它放在一个线程中。

在我的片段中，我有：

```
context = getActivity().getApplicationContext();
ListAdapter adapter = new NotesAdapter(courseId, context);
setListAdapter(adapter); 
```

每件事都以这种方式工作，但我试图以 Android 为多线程提供的所有四种方式（AsyncTask、Java 线程...）来实现，但适配器不会以这种方式启动。它只是显示空白屏幕。

谁能帮我把它放在一个单独的线程中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:48:39.630

供你参考，

```
public class SampleTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            // Do your Background process Eg.. some Parsing whatever it's, then paste you adapter initialization code
            // Initialize your adapter as global
        CustomAdapter sampleAdapter = new CustomAdapter(CurrentActivity.this,
                        R.id.ImageView01, <Your Arraylist/Array>);
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);

            // Here you set your adapter
            listView.setAdapter(sampleAdapter);

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
        }
    } 
```

# java - 如何保存引用 Spring JPA 中现有实体的新实体？

> ID：15943783
> 
> 赞同：15
> 
> 时间：2013-04-11T08:14:34.447
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

想象以下模型：

员工：

```
@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(name = "employee_project", joinColumns = @JoinColumn(name = "Emp_Id"), inverseJoinColumns = @JoinColumn(name = "Proj_id"))
private Set<Project> projects = new HashSet<Project>(); 
```

项目：

```
@ManyToMany(mappedBy = "projects")
private Set<Employee> employees = new HashSet<Employee>(); 
```

现在，如果我创建一个引用现有项目的新员工并尝试保留该员工，我会收到错误消息：

```
detached entity passed to persist: Project 
```

我按如下方式创建员工：

```
public void createNewEmployee(EmployeeDTO empDTO) {

  Employee emp = new Employee();
  // add stuff from DTO, including projects

  repository.saveAndFlush(emp);  // FAILS
} 
```

我像这样更新现有的：

```
public void updateEmployee(EmployeeDTO empDTO) {

   Employee emp = repository.findOne(empDTO.getId());
   // set stuff from DTO, including projects

   repository.saveAndFlush(emp);  // WORKS!
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T08:23:48.997

我猜您正在与存储库进行交互而没有适当地扩展事务边界。默认情况下，事务（以及会话）边界位于存储库方法级别。这会导致`Project`实例与 分离`EntityManager`，因此它不能包含在持久操作中。

这里的解决方案是将事务边界扩展到客户端：

```
@Component
class YourRepositoryClient {

  private final ProjectRepository projects;
  private final EmployeeRepository employees;

  // … constructor for autowiring

  @Transactional
  public void doSomething() {
    Project project = projects.findOne(1L);
    Employee employee = employees.save(new Employee(project));
  }
} 
```

这种方法导致实例保持托管实体，因此要为正确处理`Project`的新实例执行持久操作。`Employee`

两个存储库交互的不同之处在于，在第二种情况下，您将拥有一个分离的实例（已被持久化，具有一个 id 集），而在第一个示例中，您有一个完全非托管的实例，没有 id放。id 属性是导致存储库区分调用`persist(…)`和`merge(…)`. 所以第一种方法会导致 a`persist(…)`被触发，第二种方法会导致 a `merge(…)`。

# multithreading - Lua 中的线程优先级

> ID：15943785
> 
> 赞同：3
> 
> 时间：2013-04-11T08:14:40.347
> 
> 标签：multithreading, lua, thread-priority

我看了一下 Lua 的书，了解到 Lua 中的多线程是协作的。我找不到有关线程优先级的一些信息。我猜想具有相同优先级的线程会一直运行到完成，因为多线程是协作的，或者完成了一个yield。如果一个线程的优先级高于另一个线程呢？

它是否能够中断具有较低优先级的线程，或者当具有较低优先级的线程运行到完成时它会运行下一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:28:48.213

Lua中没有本机线程（抢占式多任务处理），但是正如您所说的那样有协作多任务处理。

抢占式和协作式多任务处理之间的区别在于，在抢占式多任务处理中，“线程”不一定允许运行直到完成，但可以被其他线程抢占。这是由调度程序完成的，它定期运行，将一个线程切换到另一个线程。这就是优先级的用武之地。如果一个具有较高优先级的线程想要运行，它可以抢占一个已经在运行的具有较低优先级的线程，调度器将在调度器下次运行时选择该线程（取决于调度策略）。

在协作式多任务处理中，不一定要有调度器（尽管出于实际原因，拥有一个调度器通常是个好主意）。然而，也有协同过程。协同进程就像一个线程，只是它不能被抢占。它可以运行到完成，也可以让给另一个协同进程并允许它运行。

所以回到你的问题，如果你想要协同多任务处理的优先级，你需要编写一个调度程序，它决定运行哪个协同进程，给定它的优先级，你需要编写你的协同进程，所以他们放弃处理一次过一会儿，把控制权交还给调度器。

**编辑**

需要澄清的是，非抢占式多任务处理和协作式多任务处理之间存在细微差别。非抢占式多任务处理更广泛一些，因为它允许静态调度和协作多任务处理。

静态调度意味着调度器可以调度周期性任务，然后可以在任务产生时运行，可能具有更高的优先级。

协作式多任务处理也是一种非抢占式多任务处理。但是，这里的任务仅由任务本身调度，并且控制显式地从一个任务让给另一个任务，但是它让给哪个任务，可以基于优先级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:37:34.763

在 Lua 中，线程不能在一个 Lua 状态下并行运行（即在多个内核上）。没有并发，因为它是协作多任务处理。只有当一个线程暂停执行（yields）时，另一个线程才能恢复。任何时候两个 Lua 线程都不能在一个 Lua 状态中同时执行。

您所说的是抢占 - 调度程序中断一个线程以让另一个线程执行。

# java - 拆分字符串、整数以及特殊字符（“_”）

> ID：15943786
> 
> 赞同：3
> 
> 时间：2013-04-11T08:14:46.023
> 
> 标签：java, regex

我试图在字符串、整数和特殊字符之间进行拆分，我尝试了一些方法，但对我不起作用，所以有什么想法吗？

源代码：

```
 String a = "abc1_xyz1";

        String[] qq = a.split("(?<=\\d)(?=\\D)|(?<=\\D)(?=\\d)|('_')");

        for(int i=0; i<qq.length; i++){
            System.out.println(qq[i] + " \n");
        } 
```

我的期望输出是：

```
abc
1
_
xyz
1 
```

但我得到的是：

```
abc
1
_xyz
1 
```

这里有人可以给我指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:35:09.677

你有几个小问题。\D 将匹配 _ 并且您不希望在您的代码中如此 此外，拆分 _ 会将其从输出中排除。

这段代码可以工作

```
 String a = "abc1_xyz1";

    for (String s : a.split("" +
        "(?<=[a-z])(?=\\d)" +    // space between letter and digit
        "|(?<=\\d)(?=[a-z])" +   // space between digit and letter
        "|(?<=_)(?=\\d)" +       // space between _ and digit
        "|(?<=\\d)(?=_)" +       // space between digit and _
        "|(?<=_)(?=[a-z])" +     // space between _ and letter
        "|(?<=[a-z])(?=_)" +     // space between letter and _
        "")) {
        System.out.println(s);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:39:41.397

我认为这`split()`是错误的方法，因为您实际上没有任何分隔符并且想要使用拆分的所有内容（它会在值之间为您提供空行）。

相反，假设表达式是常规的，我会使用`Pattern.compile()`and `Matcher.group()`，因此：

```
 String a = "abc1_xyz1";
    Pattern p = Pattern.compile("(\\D+)(\\d+)(_)(\\D+)(\\d+)");
    Matcher m = p.matcher(a);
    if (m.find()) {
        for (int i = 1; i<=m.groupCount();i++) {
            System.out.println(m.group(i));
        }
    } 
```

如果任何组是可选的，您可以在其后添加一个问号（然后该组将为空）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:48:46.237

另一种解决方案：`_`在检查数字/非数字边界之前检查：

```
String[] qq = a.split("(_)|(?<=\\d)(?=\\D)|(?<=\\D)(?=\\d)"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T08:33:23.370

根据[文档`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html) `\D`是“非数字”。`_`是非数字，因此将被匹配。

尝试用（匹配任何 ASCII 字母）或（匹配任何 Unicode 字母）替换`\D`您的代码。`\p{Alpha}``\p{L}`

# ksoap2 - 如何解析soapfault的细节？

> ID：15943788
> 
> 赞同：3
> 
> 时间：2013-04-11T08:14:52.903
> 
> 标签：ksoap2, soapfault

我试图在这个肥皂故障的“细节”中获取值，但我还没有找到任何方法。

来自服务器的响应：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
     <SOAP-ENV:Fault>
       <faultcode>SOAP-ENV:Client</faultcode>
       <faultstring>Many Errors</faultstring>
       <detail>
         <error_id>2</error_id>
         <errors>
           <error>
             <error_id>1</error_id>
             <error_description>Unknown Error</error_description>
           </error>
           <error>
             <error_id>5</error_id>
             <error_description>Not Authorized</error_description>
           </error>
           <error>
             <error_id>9</error_id>
             <error_description>Password should be at least 6 characters including one letter and one number</error_description>
           </error>
         </errors>
       </detail>
     </SOAP-ENV:Fault>
   </SOAP-ENV:Body>
 </SOAP-ENV:Envelope> 
```

我需要得到`error_id`s 以及他们各自`error_description`的 s。到目前为止，我只能`detail`通过以下方式获得 via kSOAP：

```
 if (envelope.bodyIn instanceof SoapObject) {
        return envelope.bodyIn.toString();
    } else if (envelope.bodyIn instanceof SoapFault) {
        SoapFault e = (SoapFault) envelope.bodyIn;
        Node details = ((SoapFault) envelope.bodyIn).detail;

    } 
```

但是当我尝试“导航”它时，我没有设法获得我需要的单个值。

任何帮助是极大的赞赏。我几乎没有发现关于在线使用 ksoap2 处理肥皂故障的信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:06:29.510

下面的代码处理得更好

```
Iterator it = soapFaultClientException.getSoapFault().getFaultDetail().getDetailEntries();
while (it.hasNext())
{
 Source errSource = it.next().getSource();
 @SuppressWarnings("unchecked")
 JAXBElement errJaxb = (JAXBElement) springWebServiceTemplate.getUnmarshaller().unmarshal(errSource);
 ServerCustomizedError err = errJaxb.getValue();
 ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T07:55:12.170

我使用以下方法：

```
/**
 * Method to retrieve the errorMessage from the given SoapFault.
 * @param soapFault
 * @return String representing the errorMessage found in the given SoapFault.
 */
private static String getSoapErrorMessage (SoapFault soapFault) {
    String errorMessage;
    try {
        Node detailNode = soapFault.detail;
        Element faultDetailElement = (Element)detailNode.getElement(0).getChild(1);
        Element errorMessageElement = (Element)faultDetailElement.getChild(0);
        errorMessage =  errorMessageElement.getText(0);
    }
    catch (Exception e) {
        e.printStackTrace();
        errorMessage = "Could not determine soap error.";
    }
    return errorMessage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:15:54.610

毕竟想通了。这是执行此操作的方法：

```
 Node details = ((SoapFault) envelope.bodyIn).detail;
        Element detEle = details.getElement(NAMESPACE, "detail");

        List<Error> errorList = new ArrayList<NewConnector.Error>();
        Element idEle = detEle.getElement(NAMESPACE, "error_id");
        str.append("id: " + idEle.getText(0));
        str.append("\n");
        Integer id = Integer.valueOf(idEle.getText(0));
        if (id == 2) {
            // many errors
            Element errors = detEle.getElement(NAMESPACE, "errors");
            int errorChildCount = errors.getChildCount();

            for (int i = 0; i < errorChildCount; i++) {
                Object innerError = errors.getChild(i);

                if (innerError instanceof Element) {

                    Element error_id = ((Element) innerError).getElement(
                            NAMESPACE, "error_id");

                    Element error_descrion = ((Element) innerError)
                            .getElement(NAMESPACE, "error_description");
                    Error singleError = new Error(Integer.valueOf(error_id
                            .getText(0)), error_descrion.getText(0));

                    errorList.add(singleError);
                    str.append(singleError.toString() + "\n");
                }

            }
            str.append("Found " + errorList.size() + " errors.\n");
            str.append("errorscount:" + errors.getChildCount()); 
```

代码显然需要改进，但这只是展示如何获取每个值。干杯

# jquery - 使用另一个关闭元素更改子元素中的文本

> ID：15943789
> 
> 赞同：0
> 
> 时间：2013-04-11T08:14:53.503
> 
> 标签：jquery, string, text, append

**示例 HTML：**

```
<div>
    <input></input>
    Change me
</div> 
```

1.  如何将我的文本更改`Change me`为`Another text`？

2.  我怎样才能附加一些`Change me`文本`Change me please`

我知道只有我可以附加一些带有元素的文本，例如..

```
var new_text = "<span>please</span>";
$(new_text).appendTo("div"); 
```

但是我怎么能在没有任何元素的情况下追加`<span>`？

**游乐场 + 测试：http:** [//jsfiddle.net/yU4Qj/](http://jsfiddle.net/yU4Qj/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:18:30.057

You can iterate over the `.contents()` of your `<div>` until you find the required text node, whose contents you can then modify by altering its `.nodeValue` property.

```
$('div').contents().each(function() {
    if (this.nodeType === 3 && this.nodeValue.match(/Change/)) {
        this.nodeValue = "I've been changed!";
    }
}); 
```

A better solution though would be to wrap the original text node in a `<span>` so that you can access it directly via DOM selectors. You could perform that wrapping automatically (i.e. using JS code, not by changing the source) when the page is first loaded, and then use normal jQuery selectors and methods.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:20:18.430

there are so many ways you can do to achieve it... one way is this...

```
var new_text = "please";
$('div').html(function(i,h){
return h + new_text;
}); 
```

[demo](http://jsfiddle.net/reigel/yU4Qj/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:21:57.330

```
$('div').contents().filter(function() {; return this.nodeType == 3; }).replaceWith('I have changed') 
```

# c# - 如何在 Linqpad 中调试代码

> ID：15943792
> 
> 赞同：3
> 
> 时间：2013-04-11T08:15:05.503
> 
> 标签：c#, linqpad

启动 LINQPad 在 VS 中，打开 Debug -> Attach to Process... 选择 LINQPad.exe 在 LINQPad C# 代码调用的代码中设置断点，或者在 LINQPad 脚本中编写 Debugger.Break() 来停止调试器。从 LINQPad 执行脚本并观看魔术。

我使用以下过程在 LinqPad 中调试我的代码，但出现以下错误：

Visual Studio 无法调试此未处理的异常，因为它来自 Microsoft.Net Framework 的版本，该版本比已安装的 Visual Studio 版本更新。问题是我使用的是 LinqPad4 和 .Net Framework 4.0。

谁能告诉我我缺少什么地方？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:25:49.193

您是否安装了框架 4.5？如果是这样，LINQPad 将使用 C# 5 编译器，在这种情况下，您可能需要 VS2012 来调试。

您可以通过在 LINQPad 中运行以下表达式来对此进行测试：

```
System.Threading.Tasks.Task.Run (() => 123) 
```

如果它可以编译，那么您使用的是 Framework 4.5。

# c# - 不能将运算符 * 应用于十进制和双精度类型的操作数

> ID：15943794
> 
> 赞同：6
> 
> 时间：2013-04-11T08:15:10.917
> 
> 标签：c#

嗨，我需要对产品应用 5.2% 的折扣。我尝试过这样做：

```
decimal BasePrice {get;set;}
decimal Discount = (BasePrice * 5.2) / 100; 
```

但是 Visual Studio 告诉我它：

> 不能将运算符“*”应用于十进制和双精度类型的操作数

如果是这样，我怎么能代表这个折扣？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T08:16:25.587

利用

```
decimal Discount = (BasePrice * 5.2m) / 100; 
```

否则，`5.2`将被视为双重。

来自[MSDN](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.71%29.aspx)：

> 如果要将数字实数文字视为十进制，请使用后缀 m 或 M

# sql - 如何将新索引“安全”添加到生产数据库上的表中？

> ID：15943795
> 
> 赞同：1
> 
> 时间：2013-04-11T08:15:11.260
> 
> 标签：sql, sql-server-2008, indexing, non-clustered-index

我考虑在生产数据库中的表上添加一些新索引。我关心的是“如何在不影响用户的情况下做到这一点”

**问题**：（如果这不是一个坏主意）我如何确定在 PRODUCTION Db 中的表上添加额外索引不会损害/影响用户。有超过 500 万条记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:16:44.673

如果您有企业，则可以在添加索引时指定 ONLINE = TRUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:59:16.833

通过在 ONLINE 模式下创建索引，您将对表锁定的影响最小（毫秒），但您必须具有 SQL SERVER Enterprise 版本。

我不建议使用离线模式为大表创建索引，因为您将锁定整个表，并且索引的创建将取决于 sql server 的繁忙程度。但无论如何——如果你确信你的生产速度非常快，你就可以创造它。

# c# - 在 TextBoxFor() 中显示格式化的日期

> ID：15943797
> 
> 赞同：62
> 
> 时间：2013-04-11T08:15:23.653
> 
> 标签：c#, asp.net-mvc, date

我正在使用 MVC4 和 Entity Framework 来开发 Intranet Web 应用程序。我有一个可以编辑的人员列表。当我访问编辑视图时，在“开始日期”文本框中，日期显示如下：`7/11/2013 00:00:00`。我要做的是以 yyyy/MM/dd 格式显示它。我试过了，`String.Format("{0:yyyy/MM/dd}", item.StartDate)`但它不起作用。我也尝试了注释`[DisplayFormat(DataFormatString = "{0:dd MMM yyyy}")]`，但它也不起作用。

在我看来，我有这个：

```
<div class="editor-field">
        @Html.TextBoxFor(model => model.StartDate, new { @class = "datepicker" })
        @Html.ValidationMessageFor(model => model.StartDate)
    </div> 
```

关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-04-11T08:17:15.240

```
@Html.TextBoxFor(m => m.StartDate, 
    new { @Value = Model.StartDate.ToString("yyyy/MM/dd"), @class="datepicker" }) 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2015-04-14T15:37:00.510

[![在此处输入图像描述](https://i.stack.imgur.com/ofohW.gif)](https://i.stack.imgur.com/ofohW.gif)

您的问题要求`EditorFor()`但您提供的代码使用`TextboxFor()`.

在您的**模型**（例如 MyModel.cs）中，您应该具有：

```
public class MyModel
{
    [DisplayFormat(DataFormatString = "{0:yyyy/MM/dd}", ApplyFormatInEditMode = true)]
    public DateTime StartDate { get; set; }
} 
```

在您的**视图**（例如 Index.cshtml）中，您只需像编写它一样使用它：

```
@Html.EditorFor(m => m.StartDate, new { htmlAttributes = new { @class = "datepicker" } }) 
```

它按预期工作。

通过这样做（而不是改变它在视图中的显示方式），您可以在其他地方重用您的模型，而不必指定如何在视图中显示日期。因此，如果由于某种原因，您必须更改显示格式，则只需更改一次。

该解决方案也适用于 MVC 5。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-12T06:50:02.907

对我来说最简单的是添加**类型**属性，

```
@Html.EditorFor(model => model.FechaRegistro, new { htmlAttributes = new { @class = "form-control oso" ,@type = "date"  } }) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-20T06:39:53.827

Html.EditorFor 也可以

* * *

```
@Html.EditorFor(model => model.StartDate, new { htmlAttributes = new { @class = "datepicker", @Value = model.StartDate.ToString("yyyy/MM/dd") } }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-28T19:03:13.200

试试这个..将日期值转换为textboxfor中的htmlAttribute ..可以解决您的问题

```
<div class="editor-field">
    @Html.TextBoxFor(model => model.StartDate, new { htmlAttributes = new { @Value = Model.StartDate.ToString("yyyy/MM/dd"), type = "date"  }})
    @Html.ValidationMessageFor(model => model.StartDate)
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-23T16:28:00.273

我是这里的菜鸟（也使用 MVC），这只是 Maxime 使用部分类的一种变体......

如果您有一个 DB-first 模型并且不想直接更改它以免丢失您的更改，只需在您自己的部分类中做同样的事情。只需在您的模型文件夹中添加一个新的类/文件，并确保它使用与您生成的模型相同的命名空间。

因此，这是您如何声明元数据以格式化日期和修改另一个值的显示名称（即：缩写表中的列标题）

```
namespace MyProjectName.Models
{

    public class MyModelMeta
    {

        [DisplayFormat(DataFormatString = "{0:yyyy/MM/dd}", ApplyFormatInEditMode = true)]  // format used by Html.EditorFor
        public DateTime StartDate;

        [Display(Name = "User ID")] // abbreviation shown in Html.DisplayNameFor
        public string SomeReallyLongUserIDColumn;

    }

    [MetadataType(typeof(MyModelMeta))]
    public partial class MyModel
    {

    }
} 
```

# c# - Gridview单击行启用控件

> ID：15943800
> 
> 赞同：0
> 
> 时间：2013-04-11T08:15:34.700
> 
> 标签：c#, asp.net, gridview, rowdatabound

我有一个网格视图。gridview 有一个保存文本的文本框多行。之后，我有一个名为已批准的图像按钮的列，一个名为未批准的列。我想在单击批准或未批准之前强制用户阅读多行框中的文本。我怎样才能以编程方式实现这一目标？我知道我应该创建一个 Rowdatabound 事件，但我应该如何处理代码？我正在使用 c# ASP.NET Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:14:45.867

我知道您可以使用 javascript 跟踪浏览器的滚动条，但我个人从未遇到过类似的文本框功能。我建议尝试一种稍微不同的方法，为什么不在网格视图中添加一个额外的列，它有一个复选框控件 - **我已经阅读并接受了协议**。并且只有在选中复选框时才会启用“批准”按钮，这是一个示例：

**ASPX：**

```
<div>
    <asp:ScriptManager ID="sm" runat="server" />
    <asp:UpdatePanel ID="updatePanel" runat="server">
        <ContentTemplate>
            <asp:GridView ID="grid" runat="server" AutoGenerateColumns="false" OnRowDataBound="grid_RowDataBound">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <asp:TextBox TextMode="MultiLine" runat="server" ID="txtAgreement" Text='<%# Eval("Agreement") %>' />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <ItemTemplate>
                            I have read and accepted the agreement
                            <asp:CheckBox ID="chkAgreement" AutoPostBack="true" runat="server" OnCheckedChanged="CheckedChanged" />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <asp:Button ID="btnAccept" runat="server" Text="Accept" OnClick="Accept" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </ContentTemplate>
    </asp:UpdatePanel>
</div> 
```

**后面的代码：**

```
public partial class Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            var items = new List<License> { new License { Agreement = "Agreement 1" }, new License { Agreement = "Agreement 2" } };
            grid.DataSource = items;
            grid.DataBind();
        }
    }

    protected void Accept(object sender, EventArgs e)
    {
    }

    protected void grid_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
            (e.Row.FindControl("btnAccept") as Button).Enabled = false;
    }

    protected void CheckedChanged(object sender, EventArgs e)
    {
        var chkAgreement = sender as CheckBox;
        Button btnAccept = null;

        if (chkAgreement != null)
        {
            var row = chkAgreement.Parent.Parent as GridViewRow;
            btnAccept = row.FindControl("btnAccept") as Button;

            if (btnAccept != null)
                if (chkAgreement.Checked)
                    btnAccept.Enabled = true;
                else
                    btnAccept.Enabled = false;
        }
    }
}

public class License
{
    public string Agreement { get; set; }
} 
```

# c# - AccessViolationExceptiond：试图读/写受保护的内存

> ID：15943802
> 
> 赞同：0
> 
> 时间：2013-04-11T08:15:39.430
> 
> 标签：c#, c, dll, dllimport, access-violation

我有一个`DLL`用 C 编写的文件。我尝试在我的 C# 代码中使用 C DLL (ImportDLL)。我的方法返回参数。C方法被正确调用但它在处理后崩溃并给出错误`**"System.AccessViolationException: Attempted to read or write protected memory.`

这通常表明其他内存在进程完成后已损坏"**。

我的 C 声明

```
int preProcessAndBestImagesC(
      char* ...,
      size_t* ...,
      char** ...,
      size_t* ...,
      (struct)* ...,
      size_t* ...,
      int** ...,
      (struct)** ...,
      int ...,
      int printStatus
    ); 
```

我的 C# 声明

```
[DllImport(@"abc.dll", CallingConvention = CallingConvention.StdCall, SetLastError = true, BestFitMapping = true, EntryPoint = "xxx")]
    [return: MarshalAs(UnmanagedType.I4)]
    unsafe private static extern int xxx(
        String p_ ...,                                               
        [MarshalAs(UnmanagedType.I2)] out UInt16 p_numImageFilesOrDirs,

        String[] p_vecImageFilesOrDirs,             

        [MarshalAs(UnmanagedType.I2)] out UInt16 ...,
        [MarshalAs(UnmanagedType.LPArray)] out (struct)[] ...,
        [MarshalAs(UnmanagedType.I2)] out UInt16 ...,
        out Int16[] ...,
        [MarshalAs(UnmanagedType.LPArray)] out (struct)[] ...,
        [MarshalAs(UnmanagedType.I2)] Int16 ...,
        [MarshalAs(UnmanagedType.I2)] Int16 ...
    ); 
```

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:27:10.937

没有代码很难回答您的问题，但您可以按照 msdn 的建议使用以下步骤

去

工具->选项

调试->常规

取消选中选项“抑制模块加载时的 JIT 优化”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:26:30.593

我建议如下：

考虑到 DLL 返回一个指向内存的指针，请确保对您的数据/参数进行编组。您可以使用 INTPTR 指向 DLL 分配的内存。

此外，请确保 DLL 不会隐式删除分配的内存。如果是，请考虑重新编写 DLL 代码（如果可能）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:26:46.127

声明，例如参数编组，cdecl/stdcall，可能是错误的。

它也可能是数据执行保护 (DEP) 问题。在这种情况下，使用

```
editbin.exe /NXCOMPAT:NO "$(TargetPath)" 
```

在 postbuild 事件中。

# php - IF 公式产生错误

> ID：15943803
> 
> 赞同：1
> 
> 时间：2013-04-11T08:15:47.493
> 
> 标签：php, phpexcel

我的 PHPExcel 导出出现错误，因为我尝试使用 IF 公式获取一些值。

这是代码的一部分：

```
$objPHPExcel->getSheet(1)->setCellValue('G4', '=IF(F4>0,E4/F4,0');
$objPHPExcel->getSheet(1)->setCellValue('G11', '=IF(F11>0,E11/F11,0)');
$objPHPExcel->getSheet(1)->setCellValue('G18', '=IF(F18>0,E18/F18,0)');
$objPHPExcel->getSheet(1)->setCellValue('G22', '=IF(F22>0,E22/F22,0)'); 
```

在excel中，公式类型是：

```
=IF(F11>0;(E11/F11);0) 
```

这里是错误代码：

```
Fatal error: Uncaught exception 'Exception' with message 'RECAP!G28 -> RECAP!G4 -> Formula Error: An unexpected error occured' 
in D:\apache2215\htdocs\gdevise\lib\phpexcel\Classes\PHPExcel\Cell.php:288

#0 D:\apache2215\htdocs\gdevise\lib\phpexcel\Classes\PHPExcel\Worksheet.php(576): PHPExcel_Cell->getCalculatedValue()
#1 D:\apache2215\htdocs\gdevise\lib\phpexcel\Classes\PHPExcel\Writer\Excel5\Worksheet.php(290): PHPExcel_Worksheet->calculateColumnWidths()
#2 D:\apache2215\htdocs\gdevise\lib\phpexcel\Classes\PHPExcel\Writer\Excel5.php(171): PHPExcel_Writer_Excel5_Worksheet->close()
#3 D:\apache2215\htdocs\gdevise\cdd_export_all_nomail.php(985): PHPExcel_Writer_Excel5->save('php://output')
#4 {main} 
```

在第 288 行的 D:\apache2215\htdocs\gdevise\lib\phpexcel\Classes\PHPExcel\Cell.php 中抛出

有人出主意

提前 THX

跟腱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:18:07.883

您需要关闭并检查您的`parentheses( )`-

```
$objPHPExcel->getSheet(1)->setCellValue('G4', '=IF(F4>0,E4/F4,0'); 
```

至

```
$objPHPExcel->getSheet(1)->setCellValue('G4', '=IF(F4>0,E4/F4,0)' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:21:46.670

你忘了关闭一个barcket：

```
$objPHPExcel->getSheet(1)->setCellValue('G4', '=IF(F4>0,E4/F4,0'); 
```

认为这将解决您的问题：

```
$objPHPExcel->getSheet(1)->setCellValue('G4', '=IF(F4>0,E4/F4,0)'); 
```

# validation - JSF 2 和使用 JSR 303 的手动验证 - 如何跟踪字段？

> ID：15943804
> 
> 赞同：0
> 
> 时间：2013-04-11T08:15:47.677
> 
> 标签：validation, jsf, bean-validation

我想在我的 JSF 2 项目中使用 JSR 303（休眠验证器）。但是，我的表单很复杂，字段级别的验证还不够。我需要在模型及其子 bean 的类级别使用许多 @ScriptAssert 注释。

所以我想手动验证表单模型（例如在 bean action 方法中）。但是我不明白如何保留应该在哪个字段显示哪个验证消息（因为它在启用字段级验证并由 JSF 处理时自动工作）。

此外，我需要为一些类级别的注释指定它们的消息将显示在特定字段中。我没有看到直接的方法来管理它......

您能否提供解释这些问题的链接（或告诉我我做错了什么？）。我想我在谷歌上搜索失败是因为互联网上充斥着关键词 JSF 和验证，对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:01:24.863

最惯用的方法是为您的类创建自定义 Bean Validation 验证器。

您需要创建将放在类级别（而不是字段级别）并与该类验证器类相关联的验证注释。

参见例如：

*   [http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/validator-usingvalidator.html](http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/validator-usingvalidator.html)（示例“类级别约束”）
*   [如何组合验证两个或多个字段？](https://stackoverflow.com/questions/2781771/how-can-i-validate-two-or-more-fields-in-combination)

托管 bean 内部的验证也是可能的，您可以在您的操作方法中抛出适当的验证异常，但通常它很麻烦，难以重用并且将业务逻辑代码与验证混合在一起。

# c# - 为什么路径由字符串而不是单独的类表示？

> ID：15943812
> 
> 赞同：2
> 
> 时间：2013-04-11T08:16:16.560
> 
> 标签：c#

在 C# 中，路径通常由字符串表示，然后由静态 Path 类中的静态方法对其进行操作。为什么没有类似的课程`java.nio.file.Path`？例如，这样的类自然会处理与平台无关的路径分隔符。

我不是要一个实现（非静态）Path 类的库。我在问为什么标准库是这样设计的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:20:58.543

因为他们必须做出设计选择，而他们选择了那个。但是，许多与 java 文件相关的类（`FileReader`等`FileOutputStream,`）*也*只使用一个字符串。它清晰、简单，可以完成工作。

对于诸如路径分隔符之`Path`类的东西：.NET 中的类有实用的方法。

# c++ - 使用线程的分段错误

> ID：15943813
> 
> 赞同：2
> 
> 时间：2013-04-11T08:16:16.767
> 
> 标签：c++, multithreading, segmentation-fault

我正在尝试构建自己的库来使用和调度线程。

该系统正在以您可以的方式工作`make maximum 100 threads`，使它们“准备就绪”。然后有一个调度器，每个时间段，把活跃的线程，放到就绪链表中，取就绪链表中的第一个等待线程。

我的测试人员正在创建`500000`线程，每个线程都会创建一个新线程并尝试自行终止。第二个线程（第一个线程创建）做同样的事情。第三个只是终止自身。

这是测试仪：

```
void f3()
{
    printf("f3 before terminate\n");
    uthread_terminate(uthread_get_tid());
    printf("f3 after terminate\n");
}

void f2()
{
    printf("f2 before spawn\n");
    uthread_spawn(f3);
    printf("f2 after spawn\n");
    uthread_terminate(uthread_get_tid());
    printf("f2 after termination\n");
}

void f1()
{
    printf("f1 before spawn\n");
    uthread_spawn(f2);
    printf("f1 after spawn\n");
    uthread_terminate(uthread_get_tid());
    printf("f1 after termination\n");
}

int main(int argc, char **argv)
{
   printf("test8:\n--------------\n");
   cout << "* Output should be:\n";    
   cout << "--------------\n";
   cout << "***1***\n";
   cout << "***2***\n";
   cout << "Output is:\n";
   uthread_init(100);
   printf("***1***\n");
   for (volatile int i=0; i< 50000;++i){
        uthread_spawn(f1);
   }
   printf("***2***\n");

   uthread_terminate(0);
   return 0;
} 
```

虽然我的程序在进入我的调度程序时出现“分段错误”：

```
static void scheduler(){
DBG(("Schedular "))
nQuantum++;
if (ready.size()!=0){
    if (active != NULL){
        if (active->getState() == Thread::RUNNING){
            active->setState(Thread::READY);
            ready.push_back(active);
        }

        int val = sigsetjmp(*active->getEnv(),1);
        if (val !=0){
            blockTimerSignal(UNBLOCK);
            return;
        }
    }

    // Set new Active
    active = ready.front();
    DBG(("Active thread Id: %d",active->getTid()))
    ready.pop_front();
    DBG(("Doing pop front on ready list"))
    DBG(("Number of threads in ready list is  - %d",(ready.size())))
    active->setQuantums(active->getQuantums()+1);
    active->setState(Thread::RUNNING);
    setTimer();
    blockTimerSignal(UNBLOCK);
    DBG(("UNBLOCKED"))
    siglongjmp(*active->getEnv(),1);
    DBG(("After siglong jmp"))
}else{
    active->setQuantums(active->getQuantums()+1);
}
DBG(("Number of threads in ready list is  - %d",(ready.size())))

blockTimerSignal(UNBLOCK);
 } 
```

做的时候`siglongjmp(*active->getEnv(),1);`

它只发生在主线程（程序的第一个 id 为 0 的线程）。它也会在程序运行一段时间后发生，这意味着在程序中间，它可以为活动线程执行 siglongjmp，但是当它在一段时间后再次尝试时，它会给出错误。

如果有帮助，添加我的终止功能：

```
int uthread_terminate(int tid) {
    DBG(("Terminate - %d", tid))

    if (tid == 0){
        // delete all (threads) - don't think it's needed because using stl!
        // TODO : check if needed - and then delete all lists !
        //Added by Roni - Deleting all lists!
        while(!sleeping.empty()){
            delete (sleeping.front());
            sleeping.pop_front();
        }

        while(!suspended.empty()){
            delete (suspended.front());
            suspended.pop_front();
        }

        while(!ready.empty()){
            delete (ready.front());
            ready.pop_front();
        }

        exit(0);
    }

    pThread t = getThread(tid);
    if (t == NULL){
        errmsgLibrary(THREAD_NOT_FOUND);
        return FAIL;
    }
    Thread::threadState state = t->getState();
    DBG(("Terminate - %d in State %d", tid, state))
    DBG(("Number of threads in ready list is  - %d",(ready.size())))
    blockTimerSignal(BLOCK);
    switch (state){
    case (Thread::RUNNING):
        //DBG(("Running Case"))
        //DBG(("Active thread id is: %d ",active->getTid()))
            delete active;
            active = NULL;
    //DBG(("Finsihed running Case"))
            scheduler();

            break;
    case (Thread::READY):
        //DBG(("ready Case"))
            ready.remove(t);
            delete t;
            //DBG(("Finsihed ready Case"))
        break;
    case (Thread::SLEEP):
            sleeping.remove(t);
            delete t;
        break;
    case (Thread::SUSPENDED):
            suspended.remove(t);
            delete t;
            break;
    default:
        break;
    }
    //DBG(("Number of threads in ready list is  - %d",(ready.size())))
    blockTimerSignal(UNBLOCK);
    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:00:05.193

猜测一下，您正在使用`siglongjmp`这里使用，并且可能不会在调用之间更改堆栈。

考虑使用[`getcontext()`](http://man7.org/linux/man-pages/man2/getcontext.2.html),[`swapcontext()`](http://man7.org/linux/man-pages/man3/swapcontext.3.html)来[`makecontext()`](http://man7.org/linux/man-pages/man3/makecontext.3.html)代替。

# java - jMesa-Java 如何向 jmesa 表添加更多标题行

> ID：15943815
> 
> 赞同：0
> 
> 时间：2013-04-11T08:16:22.777
> 
> 标签：java, header, jmesa

当我动态构建一个 jmesa 表时，我只使用 bean 属性标签获得一个标题行。我需要一个或多个额外的标题行，我可以在其中设置一或两列附加文本。当然，我还需要导出表格，所以我不能在 jsp 结果中对 html 使用 javascript 操作。

我有的：

```
 <tr class="header" >
            <!-- columns with property  -->
            <td><div onmouseover="this.style.cursor='pointer'" ...> </div></td>
             ...
    </tr>
    </thead>
    <tbody class="tbody" >
            <tr id="idStatistica_row1"  class="odd" ... >
            ... 
```

我需要类似的东西：

```
 <tr class="header" >
            <!-- columns with my free text  -->
            <td><div>HEllo This Is A table</div></td>
            <td><div>NO1</div></td>
    </tr>
    <tr class="header" >
            <!-- columns with property  -->
            <td><div onmouseover="this.style.cursor='pointer'" ...> </div></td>
             ...
    </tr>
    </thead>
    <tbody class="tbody" >
            <tr id="idStatistica_row1"  class="odd" ... >
            ... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T17:17:38.127

是否有特定原因必须是另一个表格行？例如，您是否需要它来跨越多个列？

如果您只需要在换行符之后显示其他信息，您可以使用[Editor 类](http://code.google.com/p/jmesa/wiki/Editors)来呈现您想要的 html，并在标题单元格中包含一个`<br/>`或几个标签。`<div>`

[在本关于分组列的教程](http://code.google.com/p/jmesa/wiki/GroupColumnsTutorial)中，这里似乎正在做类似的事情

# ios - 如何重定向 UIWebview？

> ID：15943820
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:16:32.150
> 
> 标签：ios, objective-c, uitableview, uiwebview

我是 iPhone 开发的新手，我想`UIWebview`在用户单击特定行（Google、Facebook、Yahoo）时基于 URL 移动。我希望页面重定向到 UIWebview。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    SBJsonParser *parser = [[SBJsonParser alloc] init];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"URL"]];
    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
    statuses = [parser objectWithString:json_string error:nil];

    if (indexPath.row == 0) {
        //What do i write in here
    } else if(indexPath.row == 1) {

    } else if(indexPath.row == 2) {

    } else {

    }
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:48:59.997

如果 webView 由同一个 ViewController 管理（因此 ViewController 具有这样的属性）：

```
@property (nonatomic, retain) UIWebView *webView; 
```

然后你可以像这样打开一个链接：

```
 NSURL *url = [NSURL URLWithString:@"http://your-url-goes-here.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.webView loadRequest:request]; 
```

但是，如果 webView 由另一个 ViewController 管理，则您必须将链接传递给该 ViewController，然后触发 segue。一种常见的方法是设置 viewController 的属性来传递链接。

例如在 WebViewController.h

```
...
@property (nonatomic, copy) NSString *linkToOpen; //My fantasy isn't really working right now :)
... 
```

在 WebViewController.m

```
...
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSURL *url = [[[NSURL alloc] initWithString:self.linkToOpen] autorelease];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.webView loadRequest:request];
}
... 
```

从你的 ViewController 到 WebViewController 的 segue 有一个标识符 @"myTestSegue" 然后你可以这样做：

```
WebViewController *webViewController = [[WebViewController alloc] initWithStyle:/*I don't honestly remember what to write here, sorry :(*/];
webViewController.linkToOpen = @"your link goes here. You can assign it inside a switch operator.";
[self.navigationController pushViewController:webViewController animated:YES];
[webViewController release]; 
```

代码不完整，可能在某处不正确，但我希望它能帮助您实现目标。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T08:39:54.340

您必须创建一个新控制器并在单击时导航到该控制器。此外，您必须将链接传递给另一个控制器才能将 url 加载到 webview。

# c# - 从网页调用的窗口应用程序无法设置启动应用程序

> ID：15943821
> 
> 赞同：1
> 
> 时间：2013-04-11T08:16:35.400
> 
> 标签：c#, asp.net, process, windows-applications

我正在开发一个 Windows 窗体应用程序。我还开发了一个 ASP Web 应用程序。从这个 web 应用程序我需要调用那个 windows 应用程序。和windows应用程序设置启动应用程序。

当我从 aspx 页面调用这个 exe 时，它​​在设置启动应用程序时出现错误。

## 错误

```
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED) 
```

请注意，每当我`exe`手动执行该操作（双击 exe）时，它都可以正常工作。谁能告诉我在这种情况下该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:25:07.933

这破坏了基本的网络安全。

exe在哪里？在您尝试通过网页访问的客户端计算机上？还是exe服务器端？在这种情况下，为什么它是一个 Windows 窗体应用程序，而没有人会看到 GUI？

Windows 窗体应用程序的用途是什么？如果该功能面向消费者，或者如果它是服务器端以其他方式处理，则该功能需要封装在网页中。

如果 exe**安装**在客户端上并且您尝试从网页打开它，我可以看到您如何做到这一点的唯一方法是下载一个文件，该文件的扩展名默认由您的 Windows 窗体应用程序打开用于进一步处理等。

# asp.net-mvc - Ninject 属性注入在 ActionFilters 上不起作用

> ID：15943825
> 
> 赞同：1
> 
> 时间：2013-04-11T08:16:47.823
> 
> 标签：asp.net-mvc, dependency-injection, ninject

我有一个接口和一个实现该接口的类

```
public interface ISessionVariables
{
    bool IsSessionTokenValidated { get; set; }
}

public class HttpContextSessionVariablesAdapter : ISessionVariables
{
    private T Get<T>(string key)
    {
        return (T)HttpContext.Current.Session[key];
    }

    private void Set(string key, object value)
    {
        HttpContext.Current.Session[key] = value;
    }

    public bool IsSessionTokenValidated
    {
        get { return Get<bool>("IsSessionTokenValidated"); }
        set { Set("IsSessionTokenValidated", value); }
    }
} 
```

我使用 Ninject 将接口绑定到实现：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<ISessionVariables>().To<HttpContextSessionVariablesAdapter>();
} 
```

我有一个 ActionFilter

```
public class ValidateSessionTokenAttribute : ActionFilterAttribute
{
    [Inject]
    public ISessionVariables SessionVariables { get; set; }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (SessionVariables.IsSessionTokenValidated == false)
        {
            throw new HttpException((int)HttpStatusCode.Unauthorized, "User session has expired");
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

奇怪的错误：

如果我将其添加`ValidateSessionTokenAttribute`到 ActionResult，则会`SessionVariables`填充属性。

```
[ValidateSessionToken]
public ActionResult Index()
{

} 
```

如果我将相同的过滤器绑定到所有 ActionResults（在 FilterConfig 中），则该`SessionVariables`属性始终为`null`.

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new ValidateSessionTokenAttribute());
    }
} 
```

我做错了什么？

# android - 如何在android中画一个黑球？

> ID：15943838
> 
> 赞同：1
> 
> 时间：2013-04-11T08:17:21.417
> 
> 标签：android, android-canvas

我使用 OvalShape 和 RadialGradient 绘制了一些彩色球。结果如下： ![一些五颜六色的球](https://i.stack.imgur.com/8pCi7.png)

所有的球都很好，除了黑色的看起来像扁平的。如何在 Android 中绘制一个闪亮的黑球？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:53:09.370

其他的看起来真的很好。

对于黑球，使用深灰色而不是黑色。渐变到位后，它看起来是正确的。

# macos - 如何在 OS X 上检索已卸载字体的属性？

> ID：15943848
> 
> 赞同：0
> 
> 时间：2013-04-11T08:17:43.457
> 
> 标签：macos, fonts, core-text

我正在尝试读取已**卸载**字体的属性（字体名称、字体格式等）。

我已经从我的桌面上复制了该`Menlo.ttc`文件，`/System/Library/Fonts/Menlo.ttc`并且我已经下载并安装了[Caviar Dreams](http://www.dafont.com/caviar-dreams.font)字体。

我尝试了以下代码：

```
#import <Foundation/Foundation.h>
#import <CoreText/CoreText.h>

static void printFontInfo(NSURL *fontURL)
{
    NSLog(@"%@", [fontURL path]);
    NSLog(@"    file size: %lld", [[[NSFileManager defaultManager] attributesOfItemAtPath:[fontURL path] error:NULL] fileSize]);

    NSDictionary *attributes = @{ (id)kCTFontURLAttribute: fontURL };
    CTFontDescriptorRef fontDescriptor = CTFontDescriptorCreateWithAttributes((__bridge CFDictionaryRef)attributes);
    CFNumberRef format = CTFontDescriptorCopyAttribute(fontDescriptor, kCTFontFormatAttribute);
    CFStringRef fontName = CTFontDescriptorCopyAttribute(fontDescriptor, kCTFontNameAttribute);
    CFStringRef displayName = CTFontDescriptorCopyAttribute(fontDescriptor, kCTFontDisplayNameAttribute);
    NSLog(@"    fontDescriptor: %p", fontDescriptor);
    NSLog(@"    format: %@", format);
    NSLog(@"    font name: %@", fontName);
    NSLog(@"    display name: %@", displayName);
}

int main(int argc, const char * argv[])
{
    @autoreleasepool
    {
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSURL *desktopURL = [fileManager URLForDirectory:NSDesktopDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:NULL];
        NSURL *downloadsURL = [fileManager URLForDirectory:NSDownloadsDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:NULL];
        NSURL *fontsURL = [[fileManager URLForDirectory:NSLibraryDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:NULL] URLByAppendingPathComponent:@"Fonts"];

        NSURL *menloURL = [NSURL fileURLWithPath:@"/System/Library/Fonts/Menlo.ttc"];
        NSURL *copiedMenloURL = [desktopURL URLByAppendingPathComponent:@"Menlo.ttc"];
        NSURL *installedCaviarDreamsURL = [fontsURL URLByAppendingPathComponent:@"CaviarDreams.ttf"];
        NSURL *downloadedCaviarDreamsURL = [downloadsURL URLByAppendingPathComponent:@"caviar_dreams/CaviarDreams.ttf"];

        printFontInfo(menloURL);
        printFontInfo(copiedMenloURL);
        printFontInfo(installedCaviarDreamsURL);
        printFontInfo(downloadedCaviarDreamsURL);
    }
    return 0;
} 
```

运行此代码会产生以下结果：

```
/System/Library/Fonts/Menlo.ttc
    file size: 2144600
    fontDescriptor: 0x100111550
    format: 3
    font name: Menlo-Regular
    display name: Menlo Regular
/Users/0xced/Desktop/Menlo.ttc
    file size: 2144600
    fontDescriptor: 0x100117fa0
    format: (null)
    font name: (null)
    display name: (null)
/Users/0xced/Library/Fonts/CaviarDreams.ttf
    file size: 58864
    fontDescriptor: 0x100118f30
    format: 3
    font name: CaviarDreams
    display name: Caviar Dreams
/Users/0xced/Downloads/caviar_dreams/CaviarDreams.ttf
    file size: 58864
    fontDescriptor: 0x1001186c0
    format: (null)
    font name: (null)
    display name: (null) 
```

我们看到我们可以在安装字体时读取属性（无论是 inside`/System/Library/Fonts`还是`~/Library/Fonts`），但是`CTFontDescriptorCopyAttribute`当字体不在系统字体目录中时函数会失败。

**没有安装字体时**有没有办法读取字体属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:27:51.040

您必须使用`CTFontManagerCreateFontDescriptorsFromURL(fontURL)`而不是`CTFontDescriptorCreateWithAttributes(@{ (id)kCTFontURLAttribute: fontURL })`. 该`CTFontManagerCreateFontDescriptorsFromURL`函数返回一个对象数组`CTFontDescriptorRef`。

# asp.net - 必须声明标量变量“@useridaUPDATE”

> ID：15943851
> 
> 赞同：1
> 
> 时间：2013-04-11T08:17:47.327
> 
> 标签：asp.net, vb.net

```
sqlqrystrng = "UPDATE temp_user_details set user_name = @username, user_email = @useremail, user_contact = @usercontact, user_address=@useraddress WHERE user_id = @userida"
sqlqrystrng2 = "UPDATE user_type set user_password = @userpassword where user_id = @useridb"
string_cnct = sqlqrystrng & sqlqrystrng2

conn.open

cmd = New SqlCommand(string_cnct, conn)

cmd.Parameters.Add(cmd.CreateParameter).ParameterName = "@userida"
cmd.Parameters.Add(cmd.CreateParameter).ParameterName = "@useridb"

cmd.Parameters.Item("@userida").Value = struserid
cmd.Parameters.Item("@useridb").Value = struserid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:22:30.743

```
sqlqrystrng = "UPDATE temp_user_details set user_name = @username, user_email = 
useremail, user_contact = @usercontact, user_address=@useraddress WHERE user_id = 
userida"
sqlqrystrng2 = " UPDATE user_type set user_password = @userpassword where user_id = @useridb"
string_cnct = sqlqrystrng  & sqlqrystrng2
conn.open
cmd = New SqlCommand(string_cnct, conn)
cmd.Parameters.Add(cmd.CreateParameter).ParameterName = "@userida"
cmd.Parameters.Add(cmd.CreateParameter).ParameterName = "@useridb"
cmd.Parameters.Item("@userida").Value = struserid
cmd.Parameters.Item("@useridb").Value = struserid 
```

您需要在第二个字符串中的**Update**之前添加空格

# c# - 优化.net中的解密方法

> ID：15943853
> 
> 赞同：0
> 
> 时间：2013-04-11T08:17:49.300
> 
> 标签：c#, .net

我需要使用下面的方法快速解密大量数据。目前，使用提供的 ICryptoTransform 运行大约需要 0.3 毫秒。有人可以想出任何方法来进一步优化它吗？使用不同的 dataToDecrypt-value 但使用相同的解密器连续多次调用该方法。

```
public byte[] DecryptUsingDecryptor(byte[] dataToDecrypt, ICryptoTransform decryptor)
    {
        byte[] decryptedData = null;
        MemoryStream msDecrypt = new MemoryStream();
        CryptoStream csDecrypt = new CryptoStream(msDecrypt,
            decryptor,
            CryptoStreamMode.Write);
        csDecrypt.Write(dataToDecrypt, 0, dataToDecrypt.Length);
        csDecrypt.FlushFinalBlock();
        decryptedData = msDecrypt.ToArray();
        csDecrypt.Close();
        return decryptedData;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:31:50.003

我真的不知道您是否会注意到任何性能改进，但如果您使用的是相同的`decryptor`，您不能重复使用相同的`msDecrypt`并将`csDecrypt`它们设置为私有字段吗？

```
public class Decrypter
{
    private MemoryStream msDecrypt;
    private CryptoStream csDecrypt;

    public Decrypter(ICryptoTransform decryptor)
    {
        msDecrypt = new MemoryStream();
        csDecrypt = new CryptoStream(msDecrypt,decryptor,CryptoStreamMode.Write);
    }

    public byte[] DecryptUsingDecryptor(byte[] dataToDecrypt)
    {
        byte[] decryptedData = null;

        csDecrypt.Write(dataToDecrypt, 0, dataToDecrypt.Length);
        csDecrypt.FlushFinalBlock();
        decryptedData = msDecrypt.ToArray();
        csDecrypt.Close();
        return decryptedData;
    }
} 
```

正如我所说，我不知道这是否会有所作为，但我认为，至少，你不会每次都重新创建你的`MemoryStream`和。`CryptoStream`

# indexing - INDEX MATCH 与引用哪个选项卡的单元格组合

> ID：15943859
> 
> 赞同：0
> 
> 时间：2013-04-11T08:18:11.457
> 
> 标签：indexing, match, excel-2010

我一直在寻找将 VLOOKUP 与 HLOOKUP 结合使用，但后来我发现使用 INDEX 和 MATCH 的组合会更好。我到处搜索并且已经接近了，但我仍然被困住了。

我想要做的是查找休假类型（C2：P2）和员工姓名（在我的示例中为 B4），如果可能，请参阅单元格 B1（当前显示 2013 年 1 月），这将是我希望的选项卡从中检索信息（可供选择的选项卡是 2013 年 1 月、2013 年 2 月、2013 年 3 月、2013 年 4 月和年初至今）。

[屏幕截图链接](http://s797.photobucket.com/user/magandaangels/media/Stack%20Exchange%20Screengrabs/INDEXMATCHNotEvaluating.jpg.html)

我希望这很清楚-如果有任何不妥之处，请告诉我！

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:45:02.983

Not to worry - I worked it out with a bit of trial and error.

```
=INDEX(YTD!$B$4:$O$100,MATCH($B6,YTD!$A$4:$A$108,0),MATCH(C$4,YTD!$B$3:$O$3,0)) 
```

Thankyou : )

# algorithm - 最佳订单履行

> ID：15943864
> 
> 赞同：13
> 
> 时间：2013-04-11T08:18:21.410
> 
> 标签：algorithm, search, optimization

我有以下问题。用户有一个购物车，`N`里面有物品。每个项目都有一个数量`Q`。此外，还有`P`仓库，每个仓库对每种产品都有一定的库存水平（可能为0）。每个仓库和客户之间的距离也是已知的。我需要找到一组可以容纳订单并满足以下约束的仓库（按优先级递减排序）：

1.  它应该包含最少数量的仓库
2.  所有仓库都应尽可能靠近客户。

任何想法都受到高度赞赏。谢谢！

**升级版：**

如果一个仓库不能完全完成某个行项目，那么它可以由几个不同的仓库交付。例如，我们需要 10 个苹果，我们有 2 个仓库，库存水平为 7 和 3。那么苹果将由这两个仓库提供（总共提供 10 个）。

**UPD 2** 可用仓库的数量接近 15 个。所以蛮力在这里无济于事。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T13:45:00.920

这可以通过整数规划来解决。

让项目被索引`i`，仓库被索引`j`。设`Qi`为`i`购物车`Sij`中 的 物品 数量 , 为 仓库 中 的 物品 数量 ,`i`为客户 到 仓库`j`的`Dj`距离`j`.

首先找到最小的仓库数`k`。当且仅当订单中涉及仓库时，让二进制变量`xj`为。是这个程序的价值。`1``j``k`

```
minimize sum over j of xj
subject to
for all i, (sum over j of min(Sij, Qi) * xj) >= Qi
for all j, xj in {0, 1} 
```

其次找到最近的仓库。我将假设我们想要最小化距离的总和。

```
minimize sum over j of Dj * xj
subject to
for all i, (sum over j of min(Sij, Qi) * xj) >= Qi
(sum over j of xj) <= k
for all j, xj in {0, 1} 
```

有许多不同的库可以解决整数程序，一些免费/开源。他们通常接受格式类似于但比我在这里介绍的格式更受限制的程序。您必须自己编写一些代码来扩展总和和通用量词（“for all”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T11:14:27.227

我建议使用 David Eisenstat 的解决方案。如果您想进一步了解该主题或需要自己实现求解整数程序的算法，我可以推荐以下参考：

[麻省理工学院关于应用数学编程的讲座的第 9 章](http://web.mit.edu/15.053/www/AMP-Chapter-09.pdf)很好地介绍了整数编程。在第三页，您可以找到**仓库位置问题**作为整数规划可解决问题的示例。请注意，那里描述的问题比您在问题中描述的问题更普遍：对于您的情况，可以假设仓库始终处于打开状态（y [i] = 1），并且仓库的固定运营成本 f [i]始终是f [i] = 0 在你的情况下。

本章的其余部分将详细介绍整数规划，并重点介绍解决整数规划的各种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:23:36.383

您可能喜欢也可能不喜欢，但我有仓储和订单履行处理经验。我个人的现实生活经验不需要算法，而是需要一系列仓库和客户服务后台工具（希望这将是您和其他在仓储运营开发领域苦苦挣扎的人的思考的食物）：

如果您的订单上有 10 件商品。

您有 9 件库存

您在一个位置有 5 个，在另一个位置有 4 个。

你拆分订单。无法履行的 1 个产品成为“延期交货”。它可以被取消，因为您不知道您何时或您的供应商是否要交付。确保您坚持使用您的信用卡授权参考。

库存中剩余的 9 种（可配送产品）将根据您的仓储虚拟库存进行查询，以获得最佳组合。

在我们的例子中，我们做了三件事：

仓库 X 的履行人员是否可以轻松地从另一个仓库转移项目？是/否

如果是这样，哪些产品可以转让。

这可能需要基于仓库负载和能力的人工交互。

如果您严格执行自动化和日复一日波动的虚拟库存，那么您最好对仓库库存进行猜测。

接下来，将订单拆分为两个，并参考主要订单的文件记录。

然后您打印到您的目的地并希望他们能够履行，如果他们不能，那么希望他们可以部分履行订单并生成可以根据客户要求取消的延期交货订单。

所以基本上这就是你必须编写的代码。

订单 第一眼回顾订单拆分和参考主订单。库存仓库触角功能。基于虚拟库存的加权拆分订单，参考基于仓库能力的主订单从其他仓库检索产品。打印拣货页（仓库功能） 延期交货或部分履行手动功能（客户服务工具） 仅在标记为已发货时收取您履行的物品的费用。

注意事项：确保主订单引用了延期交货和拆分的操作。确保拆分和部分履行订单引用任何其他延期交货订单和拆分。填写您可以标记已发货的内容。在已发货的产品上收取 $$。

希望这会有所帮助，祝你好运！！！

# php - jquery 固定 div 滚动，平滑移动

> ID：15943866
> 
> 赞同：0
> 
> 时间：2013-04-11T08:18:28.723
> 
> 标签：php, jquery, css

**编辑：请参阅下面的答案，最新版本的 z-index 和东西位于[http://jsfiddle.net/66MBH/6/](http://jsfiddle.net/66MBH/6/)**
滚动回顶部时有一个小错误，第一个侧边栏在到达其起始位置后不会停止，小提琴中的快速修复是设置 .fixed top:XXpx; 超过页眉的高度。
感谢您的帮助，Fbynite！ 我 有一个jquery

脚本需要修复然后随着您继续滚动，下一个栏开始跟随。 但是侧边栏的移动非常跳跃和小故障，我不知道该怎么做。

我正在寻找的一个例子是您可以在[http://9gag.com](http://9gag.com)上的每个帖子中看到的小栏，其中包含标题、评级和 twitter/facebook 共享。
如果你对 jquery 很好，请试一试..
我有这个小提琴来清除它：jsfiddle.net/7KcJb/4
（与 9gag 上的一样，我的只是浮动并移出了帖子一些左边距：-XXpx；）

```
$(document).ready(function () {  
  $(window).scroll(function (event) {
    var y = $(this).scrollTop();
      $('.socialbookmarks2').each(function(){
          var top = $(this).offset().top - parseFloat($(this).css('marginTop').replace(/auto/, 0));
          var bottom = (top + $(this).parent().height());
        if (y >= top && y < bottom) {
          $(this).addClass('fixed');
        } else {
          $(this).removeClass('fixed');
        }
      });  
  });
}); 
```

如果您可以修复脚本或拥有另一个可以顺利运行的脚本，我将非常高兴！
我对动画运动或其他效果持开放态度，只要它像现在一样流畅而不是跳跃。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:13:23.087

它出现故障/跳跃的原因是因为您每次滚动时都会删除课程。尝试这个：

```
$('.socialbookmarks2').each(function(){
  var top = $(this).offset().top - parseFloat($(this).css('marginTop').replace(/auto/, 0));
  var bottom = (top + $(this).parent().height());
  if (y >= top && y < bottom) {
    $('.socialbookmarks2').removeClass('fixed');
    $(this).addClass('fixed');
  }
}); 
```

您还可以更改 y 值的比较，以使 div 过渡更加无缝。但我会让你玩这个。这是一个小提琴，[http://jsfiddle.net/66MBH/2/](http://jsfiddle.net/66MBH/2/)。

例子：

```
if ( (y+30) >= top && y < bottom) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:25:31.327

`var elm=$(this);`您可以通过第一次查找和更改`$(this)`同一范围内的所有后续内容来使其更流畅，就像`var top = elm.offset().top - parseFloat(elm.css(...` 现在您的代码必须重新查找并重新查找`$(this)`是什么

# php - Zend Framework 1 .htaccess with subdirectory and without RewriteBase

> ID：15943878
> 
> 赞同：1
> 
> 时间：2013-04-11T08:18:54.430
> 
> 标签：php, apache, .htaccess, zend-framework, url-rewriting

This is the `.htaccess` [Zend Framework 1 manual](http://framework.zend.com/manual/1.11/en/project-structure.rewrite.html) suggests to use:

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

I intend to publish the website into a subfolder, like so: `http://localhost/my-app/` So the way to go would be to add this line to the file:

```
RewriteBase /my-app 
```

Now everything works.

The problem is the subfolder name will vary (and may even be empty -> [http://my-app.com/](http://my-app.com/)), and I would like to have a `.htaccess` file that works in every situation because I have an automated deployment procedure.

**So is there a solution for the rewriting to work without specifying `RewriteBase`?**

* * *

Edit: Directory structure

```
my-app/
    application/
    library/
    public/
        .htaccess
        index.php
        ...
    tests/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:35:27.667

公众`.htaccess`不应该`RewriteBase`

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ index.php [NC,L]
</IfModule> 
```

# mysql - 从mysql中的文本字段中提取所有单词

> ID：15943881
> 
> 赞同：2
> 
> 时间：2013-04-11T08:19:04.387
> 
> 标签：mysql, sql, full-text-search

我有一个包含文本字段的表。在这些字段中，我存储文本。每个字段大约有 20 到 50 个句子，具体取决于行。我正在使用 HTML 和 PHP 制作一个自动完成的 HTML 对象，我想开始输入单词的开头，并且数据库返回包含这些单词的句子（如 Microsoft Office 2007/2010 导航窗格）。

我需要 mysql 将这些单词或句子作为单独的结果返回，以便我可以进一步操作它们。

例子：

```
--------------------------------------------------------------------
| id    | title |content                                            |
--------------------------------------------------------------------
1 |  test 1    |  PHP is a very nice language and has nice features.
2 |  test 2    |  Spain is a nice country to visit and has nice language.
3 |  test 3    |  Perl isn\'t as nice a language as PHP. 
```

我需要 mysql 查询以不同的结果返回以下内容：

```
1,"nice language"
1,"nice features"
2,"nice country"
2,"nice langugage"
3,"nicea a language" 
```

这是我的sql查询：

```
SELECT id, SUBSTR(content,POSITION('nice' IN content),50)
    FROM entries 
          MATCH (title,entry) AGAINST ('nice' WITH QUERY EXPANSION) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:26:58.433

## 新答案

[OP 实际上与php](/questions/tagged/php "显示标记为“php”的问题")和[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")无关——他的问题涉及直接在 MySQL 中进行字符串操作。

字符串操作并不是 DBMS 的真正重点。在流畅的文本意义上处理“单词”时，需要大量逻辑来确定下一个单词边界在哪里，并且您不希望您的数据库真的这样做。此外，任何为此编写的查询都可能难以阅读。

这完全取决于您在做什么，但很可能只有 DB 的方法会更慢，因为会有更多的函数调用：SQL 函数非常有限。

对于可*重用性和最佳实践*，如果您将来想将数据库更改为 MongoDB 怎么办？您需要重新编写整个该死的尴尬查询。

不，我的建议是使用标准 MySQL 将整个值拉入 PHP，将其放入 PCRE，非常简单的正则表达式，完成工作。最好在 PHP 代码中显示您实际在做什么，因为它更“揭示意图”。

至少 33% 的开发人员的工作是为工作选择正确的工具。PHP 是本示例中的正确工具。

## 原始答案

您已经包含了标签[php](/questions/tagged/php "显示标记为“php”的问题")和[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")，所以我猜测（尽管您的问题需要对此进行更多澄清）您*显然*希望这个“自动完成”在客户端运行。因此，您必须首先**将数据从服务器端获取到客户端**。

Twitter Bootstrap 有一个很酷的东西，叫做[Typeahead](http://twitter.github.io/bootstrap/javascript.html)。这使用 JavaScript 来执行（我认为）您需要的：该页面上的示例显示了您如何键入国家/地区，它会自动为您完成。它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/ExEdg.png)

你如何让这个工作？首先包含所需的 JavaScript 文件，然后编写 HTML。

以下是引导页面源代码中的一些内容，因此您可以了解它是如何工作的：

```
<input type="text" data-provide="typeahead" data-items="4" data-source='["Alabama","Alaska","Arizona","Arkansas","California"]'> 
```

你能看到这个`data-source`属性是如何为预输入提供你想要的信息的吗？您想要连接到 MySQL，获取您的数据，并将这些数据推送到`data-source`数组中以便 JavaScript 使用，如上所述。

因此，在页面加载时，您连接到 MySQL 并从数据库中提取所有您希望“自动完成”的相关字符串。然后，您将这些作为预先输入的新数据属性，就是这样！

--

编辑：twitter bootstrap 的 typeahead 有一个分支，[它允许 AJAX 调用](https://gist.github.com/gudbergur/1866577)，因此您可以使用它来异步执行数据检索（如果您能弄清楚，我会推荐这种方法）。

# c# - 如何设置列表框中选择的多个项目？

> ID：15943883
> 
> 赞同：7
> 
> 时间：2013-04-11T08:19:09.223
> 
> 标签：c#, asp.net, listbox, selected, listitem

我有一个具有多种选择模式的**ListBox 。**在后面的代码中，我想将一些值设置为选中。这些值存在于名为**'Names'的****ListItems[]**中。

 **HTML 代码：

```
<asp:ListBox ID="lbto" class="chosen" runat="server" Width="450px" 
 Height="20px" SelectionMode="Multiple">
    <asp:ListItem>Mandy</asp:ListItem>
    <asp:ListItem>Amit</asp:ListItem>
    <asp:ListItem>sundar</asp:ListItem>
    <asp:ListItem>ragu</asp:ListItem>
    <asp:ListItem>raju</asp:ListItem>
</asp:ListBox> 
```

**ListItem[] 名称**包含**'ragu'**和**'raju'**。现在，当页面加载时，**ListBox**应该包含**'ragu'**和**'raju'**作为选定值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T08:22:33.907

如何设置[`Selected`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.selected.aspx)-property 的[`ListItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)？

```
var names = new List<string>(new string[] { "ragu", "raju" });

foreach (var item in lbto.Items)
{
    if (names.Contains(item.Text))
        item.Selected = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-18T15:35:21.957

你可以使用`FindByValue`方法

```
foreach (string item in stringList)
    lbxList.Items.FindByValue(item).Selected = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-29T15:29:30.980

```
int[] IndexList = new int[] { 1, 3, 5, 7, 9 };
for (int i = 0; i < IndexList.Length; i++)
{
    if (listBox1.Items.Count > IndexList[i])
    {
        listBoxFX.SetSelected(IndexList[i], true);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T08:52:00.120

使用一行 linq

```
lbto.Items.Cast<String>().ForEach(i => i.Selected = names.Contains(i.Text)); 
```

或者

```
lbto.Items.OfType<string>().ForEach(i => i.Selected = names.Contains(i.Text)); 
```**

# linux - 从 GitHub 上的源代码安装 FontForge

> ID：15943884
> 
> 赞同：0
> 
> 时间：2013-04-11T08:19:12.003
> 
> 标签：linux, ubuntu, github, fonts

我正在尝试从源代码安装最新版本的[FontForge](https://github.com/fontforge/fontforge)。`./configure`, `make`, 和的整个过程我都知道`make install`，但是源码包里没有配置脚本，只有`configure.ac`，貌似需要用 处理`autoconf`，但是`autoconf`没做。当我运行时`autoconf`，它说明了可能未定义的宏。在我用谷歌搜索错误后，它让我尝试`aclocal ; autoheader; automake ; autoconf`了也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:24:49.110

只需运行[`autogen.sh`](https://github.com/fontforge/fontforge/blob/master/autogen.sh)脚本，它将执行所有必要的步骤。有关说明，请参阅[自动预订](http://www.sourceware.org/autobook/autobook/autobook_43.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:25:53.410

您需要调用`autogen.sh`脚本来生成`configure`脚本。作为先决条件，您需要`autoconf`,`automake`并`libtool`安装。

```
$ ./autogen.sh

Preparing the fontforge build system...please wait

Found GNU Autoconf version 2.69
Found GNU Automake version 1.12.1
Found GNU Libtool version 2.4.2

Automatically preparing build ... done

The fontforge build system is now prepared.  To build here, run:
  ./configure
  make 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T17:40:47.090

配置脚本不存在于 git master 中；这很正常。要创建它，请运行

```
./autogen.sh 
```

我已经在 git repo 中添加了一个 INSTALL.git 文件，这样其他用户就会清楚这一点。

[https://github.com/fontforge/fontforge/blob/master/INSTALL.git](https://github.com/fontforge/fontforge/blob/master/INSTALL.git)

# java - 使用 JOIN 从单个 SQL 查询将汽车预订添加到汽车对象

> ID：15943886
> 
> 赞同：1
> 
> 时间：2013-04-11T08:19:17.900
> 
> 标签：java, jsp, ms-access, join

我正在编写一个汽车租赁应用程序，我的数据库中有两个表，`Cars`并且`Bookings`. 以下是每个字段：

```
Cars
CarID  |  Make  |  Model  |  Year

Bookings
BookingID  |  CarID  |  UserID  |  StartDate  |  EndDate  |  Paid 
```

我正在编写一个称为`getCars()`返回`ArrayList`类型的方法`Car`。在我的`Car`班上，我有另一个`ArrayList`叫`bookings`，它保存了那辆车的所有预订。我可以在 的构造函数中插入预订`Car`，如下所示：

```
public Car(Integer carId, String make, String model, Integer year, ArrayList<Booking> bookings) {
    this.carId = carId;
    this.make = make;
    this.model = model;
    this.year = year;
    this.bookings = bookings;
} 
```

但是，我无法从我的数据库中获取汽车和预订信息，然后`Car`从结果中构造正确的对象。我正在尝试这个：

```
String query = "SELECT * FROM Cars INNER JOIN Bookings ON Bookings.CarID = Cars.CarID";
PreparedStatement pstmt = conn.prepareStatement(query);
results = pstmt.executeQuery();

ArrayList<Booking> bookings = new ArrayList<Booking>();

while(results.next()) {

    bookings.add(new Booking(
        results.getDate("StartDate"),
        results.getDate("EndDate"),
        results.getBoolean("Paid"),
        results.getString("HouseName"),
        results.getString("AddrFirstLine"),
        results.getString("AddrSecondLine"),
        results.getString("PostCode")
    ));

    cars.add(new Car(
        results.getInt("CarID"),
        results.getString("Make"),
        results.getString("Model"),
        results.getInt("Year"),
        bookings
    ));
} 
```

它有点工作，但会产生重复的结果。如果一辆车有两个预订，它将`Car`为同一辆车创建两个实例，而不是一个具有多个`Car.bookings`. 它还将提供`Car`数据库中的每个预订，如下所示：

![截屏](https://i.stack.imgur.com/n7bIY.png)

在这种情况下如何正确构造`Car`对象？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:35:33.263

我假设这`cars`是一个`List<Car>`. 对于您的第一个问题，您有两个解决方案：

*   在添加到地图之前替换`List<Car>`并检查汽车是否已经存在：`Map<Integer, Car>`

```
 Integer carId = results.getInt("CarID");

if (!cars.containsKey(carId)) {
    cars.put(carId, new Car(...));
} 
```

*   替换`List<Car>`为`Set<Car>`并实现`equals()`and `hashCode()`in `Car`，这样如果它已经包含另一个等于您正在添加的那个，`Set`则不会添加第二个`Car``Car`

对于您的第二个问题，我建议您使用第二个`Map<Integer, List<Booking>>`包含每个`Car`ID 的预订列表：

```
Map<Integer, List<Booking>> bookingsPerCar = ...;

// In your loop:
List<Booking> bookings = bookingsPerCar.get(results.getInt("CarID"));
if (bookings == null) {
    bookings = new ArrayList<>();
    bookingsPerCar.put(results.getInt("CarID"), bookings);
}

bookings.add(new Booking(...)); 
```

# java - Receive data of multitouch events from laptop's touchpad

> ID：15943888
> 
> 赞同：1
> 
> 时间：2013-04-11T08:19:45.880
> 
> 标签：java, multi-touch, touchpad

I'm working on writing a program that controls Android device (via USB cable and the Android-SDK toolset).

The program is written in Java, and is addressed for Windows platforms.

The idea is that I get a screenshot of the device's screen every few seconds and show it in a Frame, and then I can simulate taps and swipes on the device's screen using the PC mouse.

So far everything is working as expected.

The thing is I now want to enable the ability of simulating multitouch events on the device, and I was thinking - why can't I receive such events from a multitouch device such as the touch-pad every modern laptop comes with.

How can I do it? is that hardware dependent? Platform dependent? Would I need to implement some sort of interface with drivers for every touch-pad I want to support, or is there a way to do it simply like I write a regular mouse listener?

# performance - 在 Dart 中使用固定长度列表有性能优势吗？

> ID：15943890
> 
> 赞同：16
> 
> 时间：2013-04-11T08:19:53.583
> 
> 标签：performance, optimization, dart

我想知道使用固定长度列表而不是动态长度列表是否有性能（CPU、内存）优势。

我认为在大多数语言中，固定长度列表只是一个指针数组，而动态长度列表是一些更复杂的数据结构，比如链表，它显然更慢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-11T18:19:31.393

简短的回答是：是的，有区别。固定长度列表在 CPU 和内存方面的开销都低于可变长度列表。

请注意：我纯粹是从 VM 的角度来回答这个问题，因此这仅适用于在 Dart VM 上运行的代码。在使用 dart2js 编译后使用 JS 执行运行时，其他规则适用。

* * *

现在更详细地了解当前的实现：

当您在 Dart 中持有对可变长度列表的引用时，您将获得对保持当前长度的对象的引用和对实际数据的引用。实际数据是一个固定长度的列表，具有足够的容量来容纳元素。通常，这个后备存储的容量比保存所需长度元素的严格要求要多。这使我们大部分时间都可以快速[添加元素。](http://api.dartlang.org/docs/releases/latest/dart_core/List.html#add)

如果您现在使用[[]](http://api.dartlang.org/docs/releases/latest/dart_core/List.html#[])或[[]=](http://api.dartlang.org/docs/releases/latest/dart_core/List.html#[]=)访问此可变长度列表中的元素，则实现必须首先对可变长度列表进行长度检查，然后读取对后备存储的引用并访问请求的来自后备存储的元素。一个简单的实现需要在访问后备存储之前发出另一个长度检查，但是 VM 的优化编译器执行了一些优化： 避免了冗余长度检查，假设使用固定长度的数组对象作为后备存储避免类型检查，然后将整个序列内联在调用站点。尽管如此，在您实际获取数据之前，代码确实有两个相关的负载。

由于固定长度对象的数据内联在对象内，因此可以避免相关负载。类似地，优化编译器内联了常见的访问模式并尝试删除冗余的长度检查。

就内存开销而言，固定长度列表仅消耗将所有元素放入单个对象所需的内存。相反，可变长度列表需要两个对象，并且几乎总是在后备存储中剩余一些容量。在当前实现中，这可能是一个显着的内存开销。当调用[add](http://api.dartlang.org/docs/releases/latest/dart_core/List.html#add)时后备存储已满时，后备存储的大小将加倍，并且在添加额外元素之前将所有当前元素复制到新的后备存储。不过，这可能会在未来发生变化。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-11T17:24:53.907

如果 dart2js 知道列表的长度，它可以在循环内内联列表长度。常量列表具有在编译时已知的静态长度。

考虑一下这个 Dart 代码：

```
final List fruits = const ['apples', 'oranges'];

main() {
  for (var i = 0; i < fruits.length; i++) {
    print(fruits[i]);
  }
} 
```

dart2js 可以发出：

```
$.main = function() {
  for (var i = 0; i < 2; ++i)
    $.Primitives_printString($.toString$0($.List_apples_oranges[i]));
}; 
```

注意`i < 2`，列表长度是内联的！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-11T17:50:33.030

VM 在固定长度列表之上实现了可增长列表。在最好的情况下，这意味着一个可增长的列表会导致大约 3 个指针的损失（一个用于类描述，一个用于固定长度列表，一个用于长度）。

但是，为了避免在增长时复制过多，可增长列表的容量通常大于所需长度。据我所知，当空间不足时，可增长列表的内部存储空间会增加一倍。这意味着您最终可以获得两倍的所需内存。

性能方面取决于：如果您在紧密循环中运行列表，VM 可以内联指向嵌套列表的指针并使用该列表：

```
var list = foo();
var sum = 0;
for (int i = 0; i < list.length; i++) {
  sum += list[i];  // The internal pointer can be hoisted outside the loop.
} 
```

这是可能的，因为 VM 可以看到列表的长度无法更改。从概念上讲，这变成：

```
var list = foo();
var sum = 0;
_check_that_list_is_growable_list_ // Because we have seen this type before.
int _list_length_ = list.length;
List _fixed_list_ = list._internal_fixed_list;
for (int i = 0; i < _list_length_; i++) {
  sum += _fixed_list_[i];
} 
```

请注意，循环外的任何函数调用都会使假设无效（因为该函数可能会更改可增长列表的长度），然后循环会运行得更慢。

# spring - Spring Webflow: logout

> ID：15943894
> 
> 赞同：0
> 
> 时间：2013-04-11T08:20:03.633
> 
> 标签：spring, security, spring-security, spring-webflow, freemarker

I am using Webflow 2.3.0.RELEASE and Spring 3.1.2.RELEASE with Spring security and Freemarker. It all works well except that when I logout the session is not destroyed.

e.g. when I click the logout link on the screen, I can see the logout screen successfully with url like this:

```
http://localhost/mart/adminflow.html;jsessionid=855454DFGDFG54501DSF548036?execution=e1s1 
```

If I copy this url and paste into a new window, it just works with me still logged in.

I am not too sure what code to share, but I can share.

Any advice/

Thanks

UPDATE 1:

The logout link :

```
<a class="link_a" href="../j_spring_security_logout"> 
```

Security config:

```
<security:global-method-security secured-annotations="enabled" />

<bean id="preAuthenticatedProcessingFilterEntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint" />

<security:http use-expressions="true" auto-config="false" entry-point-ref="preAuthenticatedProcessingFilterEntryPoint"> 
      <security:custom-filter position="PRE_AUTH_FILTER" ref="preAuthFilter" /> 
      <security:logout logout-success-url="logout.htm?_eventId=logout" /> 
      <security:session-management invalid-session-url="logout.htm?_eventId=logout" /> 
</security:http> 
```

# sql - Update sql command in vb.net flaws?

> ID：15943895
> 
> 赞同：0
> 
> 时间：2013-04-11T08:20:08.430
> 
> 标签：sql, vb.net, winforms, sqlcommand

i have this code made by myself researching, it returns no error, it update(s) some of the data entered in textboxes but not all the fields

i check the codes near the field that is updating to compare it to the textboxes that do not update.

but i dont see the difference, it just not update all fields, only some fields

```
 Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim myCommand As SqlCommand
    Try

        'update command
        sqlconn.Open()

        myCommand = New SqlCommand(
          "UPDATE tblOfficeEquipmentProfile SET OE_Category = '" & cmbCategory.Text
& "',OE_SubCategory = '" & cmbSubCategory.Text
& "', OE_Name = '" & txtName.Text
& "', OE_User = '" & txtUser.Text
& "', OE_Brand = '" & cmbBrand.Text
& "', OE_Model = '" & cmbModel.Text
& "', OE_Specs = '" & txtSpecs.Text
& "', OE_SerialNo = '" & txtSerialNo.Text
& "', OE_PropertyNo = '" & txtPropertyNo.Text
& "', OE_MacAddress = '" & txtMacAddress.Text
& "', OE_Static_IP = '" & txtStaticIp.Text
& "', OE_Vendor = '" & cmbVendor.Text
& "', OE_PurchaseDate = '" & txtPurchaseDate.Text
& "', OE_WarrantyInclusiveYear = '" & cmbWarrantyInclusiveYear.Text
& "', OE_WarrantyStatus = '" & txtWarrantyStatus.Text
& "', OE_Status = '" & txtStatus.Text
& "', OE_Dept_Code = '" & cmbDeptCode.Text
& "', OE_Location_Code = '" & cmbLocationCode.Text
& "', OE_Remarks ='" & cmbRemarks.Text
& "' WHERE OE_ID = '" & txtOEID.Text & "'", sqlconn)
' ^^  (edited to separate lines for ease of viewing )
        myCommand.ExecuteNonQuery()
        MessageBox.Show("Office Equipment Profile Successfully Updated Records")
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:09:41.230

一些故障排除建议：

尝试这样的模式：

```
 Dim SQL As String = "UPDATE STaff Set Initials='RCH' WHERE Initials = 'RCH'"
        myCommand = New SqlCommand(SQL, sqlconn)
        Dim iCnt As Integer = myCommand.ExecuteNonQuery()
        MessageBox.Show("Office Equipment Profile Successfully Updated " & iCnt & " Records") 
```

在第二行放置一个断点并使用 Text Visualizer 查看 SQL。您也可以复制它并在其他一些查询工具中使用它来处理它并查找错误。

此外，捕获更改的记录数（上面的 iCnt）并进行一些 QA 和/或调试。

注入：虽然您的项目可能不会受到注入攻击，但您可以通过不确保 .Text 值不会破坏 SQL 来踩到自己。例如，如果任何 .Text 包含撇号，则 SQL 将失败。您可以编写一个函数来将 ' 替换为 '' 并且您会很安全。

或者每个：OE_Location_Code = '" & cmbLocationCode.Text.replace("'","''")

这会将“Fred's Room”转换为“Fred's Room”

# scala - 不是长主键可能吗？

> ID：15943897
> 
> 赞同：1
> 
> 时间：2013-04-11T08:20:13.967
> 
> 标签：scala, sorm

是否可以定义非长主键？

动机：我有一组要转换为 rdb 的 XML 文件。字符串属性用作唯一键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:15:49.293

Not possible.

[From docs](http://sorm-framework.org/Documentation.html#what_should_you_do_when_you_need_to_specify_the_id_yourself):

> **What should you do when you need to specify the id yourself?**
> 
> Nothing. You shouldn’t do that. The id property is supposed to be generated and managed by db only. If you need to specify some external unique identifier, like, for instance, Amazon’s ASIN, just add an appropriate field to your entity and specify it as unique on SORM instantiation.

# javascript - absolute positioned anchor does not render correctly when a phone number is detected in mobile safari

> ID：15943904
> 
> 赞同：0
> 
> 时间：2013-04-11T08:20:36.863
> 
> 标签：javascript, jquery, html, mobile-safari, jquery-masonry

I'm using the jquery masonry plugin which uses absolute positioning. Everything works fine until a masonry brick contains a phone number. Then the absolute positioning seems to be ignored, and the brick spans the full width of the page and positions at the top.

This affects only the brick that contains the phone number. All other bricks are rendered normally.

This can be fixed by adding:

```
<meta name="format-detection" content="telephone=no"> 
```

But this disables the phone number recognition functionality of the mobile safari browser.

Has anyone experienced something similar or knows a solution?

# jquery - 定位 div - Jquery Floater

> ID：15943910
> 
> 赞同：0
> 
> 时间：2013-04-11T08:20:49.763
> 
> 标签：jquery, css, html

我正在使用它并且它可以工作，但目前 DIV 位于左上角。

如何让 DIV 出现在我刚刚选择的按钮上而不是左上角？

```
<html>
<head>
<link href="default.css" rel="stylesheet" type="text/css">
<script src="jquery-1.8.0.js" type="text/javascript"></script>
<style type="text/css">
.message_cont {
    position: fixed;
    width:150px;
}

.message_cont div {
    padding: 5px;
    background: #00C000;
    color: #fff;
    font-size: 16px;
}

</style>
<script  type="text/javascript">
    $(document).ready(function() {
$('button').click(function() {
    $messageCont = $('<div class="message_cont">');
    $message = $('<div>DONE</div>').hide();
    $messageCont.append($message);
    $('body').prepend($messageCont);
    $message.fadeIn(400, function() {
        setTimeout(function(){
            $messageCont.fadeOut();
            //code to clean up container
        }, 1500)
    })
 })
});
</script>
</head>
<body>

<button>Message</button>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean aliquam imperdiet purus dictum tincidunt. Phasellus a nisi et orci luctus venenatis. Vestibulum quis libero magna, nec gravida libero. Aliquam in accumsan erat. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut in lorem quam. Proin sodales pellentesque ligula, at mattis eros congue sit amet. Suspendisse potenti. Duis sit amet erat sapien, at dapibus neque. Vestibulum porta consequat massa luctus tempor. Nulla nunc lacus, varius non sollicitudin vitae, iaculis eget ipsum. In dictum, massa id cursus gravida, tellus urna porta quam, eget iaculis tortor est vehicula dui. Quisque ante turpis, pharetra in suscipit a, consectetur interdum dolor. Sed vitae enim libero, at semper velit. Nulla neque est, mattis ac feugiat vitae, ornare ut velit. Aliquam enim leo, ultrices in aliquet eget, dictum mattis sapien. Nam quam mauris, hendrerit vel bibendum sed, vulputate vitae ipsum. Quisque luctus sagittis suscipit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<button>Message</button>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean aliquam imperdiet purus dictum tincidunt. Phasellus a nisi et orci luctus venenatis. Vestibulum quis libero magna, nec gravida libero. Aliquam in accumsan erat. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut in lorem quam. Proin sodales pellentesque ligula, at mattis eros congue sit amet. Suspendisse potenti. Duis sit amet erat sapien, at dapibus neque. Vestibulum porta consequat massa luctus tempor. Nulla nunc lacus, varius non sollicitudin vitae, iaculis eget ipsum. In dictum, massa id cursus gravida, tellus urna porta quam, eget iaculis tortor est vehicula dui. Quisque ante turpis, pharetra in suscipit a, consectetur interdum dolor. Sed vitae enim libero, at semper velit. Nulla neque est, mattis ac feugiat vitae, ornare ut velit. Aliquam enim leo, ultrices in aliquet eget, dictum mattis sapien. Nam quam mauris, hendrerit vel bibendum sed, vulputate vitae ipsum. Quisque luctus sagittis suscipit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:28:28.620

如果我理解正确，你需要这个：

```
$messageCont.css({
    "left" : $(this).offset().left,
    "top" : $(this).offset().top
}); 
```

# java - 将 json 时间戳转换为普通的 java 时间戳

> ID：15943916
> 
> 赞同：3
> 
> 时间：2013-04-11T08:21:00.777
> 
> 标签：java, json, jackson

如何将 JSON 中的 Javascript 时间戳转换为 java 时间戳？

```
Json timestamp Example: 1365427692 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:23:12.337

```
private Date JSONTarihConvert(String tarih) throws ParseException{
    long timestamp = getTimeStampFromTarih(tarih);
    return new Date(timestamp);
} 
```

更多信息[在这里](https://stackoverflow.com/questions/11984199/how-can-i-convert-json-date-to-java-date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T07:01:18.913

# java.time

现代方式是使用 java.time 类。

```
Instant instant = Instant.ofEpochSecond( 1365427692L ); 
```

An`Instant`是 UTC 时间线上的时刻，分辨率为纳秒。

# ruby - 如何按名称运行特定的 Ruby 1.9 Test::Unit::TestCase 子类

> ID：15943917
> 
> 赞同：2
> 
> 时间：2013-04-11T08:21:09.343
> 
> 标签：ruby, unit-testing, minitest

Ruby 单元测试框架允许子类`Test::Unit::TestCase`化来创建测试套件。

可以运行测试子集：给定 .rb 文件中的所有测试，具有给定名称，例如

```
foo.rb -n "testname" 
```

或匹配模式

```
foo.rb -n /pattern/ 
```

但是是否可以通过指定套件的名称来运行特定套件中的所有测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:39:29.327

您可以将`-a`选项与`testrb`命令一起使用以仅在测试套件中运行某些测试，例如：

```
$ ls test/
a_test.rb     b_test.rb     c_test.rb

$ testrb -a test/a_test.rb
#... runs a_test.rb only
$ testrb -a test/[ab]_test.rb
#... runs a_test.rb and b_test.rb 
```

还有一个模式匹配选项，`-p`但无论我如何尝试，或者在网上找到任何示例，我都无法让它工作。希望这会做你需要的。

# jquery-ui - 如果未从自动完成列表中选择任何内容，则淘汰 jQueryUI 自动完成如何使用输入值

> ID：15943919
> 
> 赞同：2
> 
> 时间：2013-04-11T08:21:13.017
> 
> 标签：jquery-ui, knockout.js, jquery-autocomplete

我正在使用[如何创建自动完成组合框？](https://stackoverflow.com/questions/7537002/autocomplete-combobox-with-knockout-js-template-jquery)

我想允许用户从建议列表中选择一个值，或者输入一个不在建议列表中的值。如何将输入的值放入我的可观察字段？

例如，如果用户键入“smi”，自动完成列表将显示以“smi”开头的史密斯和其他姓氏，但是，如果他们没有从列表中选择一个选项，我只想将我的 observable 字段的值设置为是'smi'。目前，设置可观察属性的唯一方法是当用户从建议列表中选择一个项目时。

我有以下代码（HTML）：

```
<input type="text" data-bind="
                            value: surname,
                            jqAuto: { autoFocus: true },
                            jqAutoSource: surnames,
                            jqAutoQuery: surnameAutocomplete,
                            jqAutoValue: surname" 
            /> 
```

JavaScript 视图模型（简化）：

```
var vm = {
    surnames: ko.observableArray(),
     surname: ko.observable(),
     surnameAutocomplete: function (searchTerm, result) {
        repository.surnameAutocomplete(searchTerm, result);
    }; 
```

解决方案：

我在两个地方修改了自定义绑定处理程序：

*   init: function - 添加了以下内容

    ```
     // New setting to allow / disallow a user to enter values that are in the autocomplete list.
        forceSelection = allBindings.jqAutoForceSelection; 
    ```

*   选项更改功能 - 修改为以下

    ```
    //on a change, make sure that it is a valid value or clear out the model value
    options.change = function (event, ui) {
        var currentValue = $(element).val();

        // Start: new code, check new setting on whether to force user to make a selection
        if (!forceSelection) {
            writeValueToModel(currentValue);
            return;
        }
        // End: new code

        var matchingItem = ko.utils.arrayFirst(unwrap(source), function (item) {
            return unwrap(inputValueProp ? item[inputValueProp] : item) === currentValue;
        });

        if (!matchingItem) {                
            writeValueToModel(null);
        }
    } 
    ```

我还发现自动完成列表中的第一项被自动选择，但随后通过设置 autofocus: false 解决了我的问题，例如，

```
<input type="text" data-bind="                                
                            jqAuto: { autoFocus: false }, /* This fixes the auto select issue */
                            jqAutoSource: surnames,
                            jqAutoQuery: surnameAutocomplete,
                            jqAutoValue: surname,
                            jqAutoForceSelection: false"
            /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:41:34.603

如果您仔细查看您正在使用的绑定处理程序，您会注意到以下部分：

```
//on a change, make sure that it is a valid value or clear out the model value
    options.change = function(event, ui) {
        var currentValue = $(element).val();
        var matchingItem =  ko.utils.arrayFirst(unwrap(source), function(item) {
           return unwrap(item[inputValueProp]) === currentValue;  
        });

        if (!matchingItem) {
           writeValueToModel(null);
        } 
```

绑定处理程序的这一部分本质上是检查用户输入到文本字段中的文本是否与自动完成下拉列表中的某些内容匹配，如果不匹配，它会清除模型值（这听起来像是您想要更改的内容）。

您可以尝试删除此部分或扩展它以适合您的目的。

# xcode - Corona SDK：TabBar 不加载@2x 图像..？

> ID：15943922
> 
> 赞同：0
> 
> 时间：2013-04-11T08:21:27.283
> 
> 标签：xcode, cocoa, coronasdk

为什么标签栏不会在 iPhone4 或 5 上自动加载“@2x”图像？这是我的代码：

```
local function init()
--Create a group that contains the entire screen and tab bar
mainView = display.newGroup()   

--Create a group that contains the screens beneath the tab bar
tabView = display.newGroup()    
mainView:insert(tabView)

loadScreen("info-moregames")

tabBar = viewController.newTabBar{
        background = "UI_INFO/tabBar.png",  --tab bar background
        default = {"UI_INFO/pogi_no.png","UI_INFO/noads_no.png","UI_INFO/share_no.png","UI_INFO/star_no.png","UI_INFO/restore_no.png","UI_INFO/back_no.png"},
        over = {"UI_INFO/pogi_yes.png","UI_INFO/noads_yes.png","UI_INFO/share_yes.png","UI_INFO/star_yes.png","UI_INFO/restore_yes.png","UI_INFO/back_yes.png"},
        tabs = {"More", "No Ads", "Share","Rate us","Restore","back"}, --names to appear under each tab icon
        onRelease = showScreen  --function to execute when pressed
    }
mainView:insert(tabBar)

tabBar.selected()

return true 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:11:53.847

如果你有一个像上面这样的 config.lua 文件，你的图像将被自动缩放。

```
application = {
    content = {
        width = ***,
        height = ***, 
        scale = "letterBox",
} 
```

如果你有一个像上面这样的 config.lua 文件，你可以为不同的分辨率使用不同的图像。请注意，您应该有两个图像。例如，您有一个 20x20 的图像 temp.png。然后你应该有另一个 40x40 的 temp@2x.png。通过这种方式，您可以获得具有更好分辨率的更好图像。此外，1.5 值意味着如果设备的屏幕是您所需分辨率的 1.5 倍，请使用以@2x 结尾的图像。

```
application = {
    content = {
        width = ***,
        height = ***, 
        scale = "letterBox",

        imageSuffix = {
            ["@2x"] = 1.5,
        }
    },
} 
```

# python - 谷歌翻译 SSL 错误与 Python 中的线程

> ID：15943923
> 
> 赞同：0
> 
> 时间：2013-04-11T08:21:27.297
> 
> 标签：python, ssl, google-api, gdata, google-translate

我用谷歌翻译翻译了一个相当大的文本，并在调用线程中的拆分请求时加快了进程。但是，线程有时会抛出 SSL 握手错误。到底是怎么回事？

这是痕迹

```
 File "/Users/[PROJECT ROOT]/source/graba/models.py", line 1558, in google_translate_list_strings
    service = build('translate', 'v2', developerKey='[MY DEV KEY]')
  File "/Users/[PROJECT ROOT]/venv/lib/python2.7/site-packages/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/[PROJECT ROOT]/venv/lib/python2.7/site-packages/apiclient/discovery.py", line 193, in build
    resp, content = http.request(requested_url)
  File "/Users/[PROJECT ROOT]/venv/lib/python2.7/site-packages/httplib2/__init__.py", line 1588, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/Users/[PROJECT ROOT]/venv/lib/python2.7/site-packages/httplib2/__init__.py", line 1336, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/Users/[PROJECT ROOT]/venv/lib/python2.7/site-packages/httplib2/__init__.py", line 1272, in _conn_request
    conn.connect()
  File "/Users/[PROJECT ROOT]/venv/lib/python2.7/site-packages/httplib2/__init__.py", line 1014, in connect
    self.disable_ssl_certificate_validation, self.ca_certs)
  File "/Users/[PROJECT ROOT]/venv/lib/python2.7/site-packages/httplib2/__init__.py", line 80, in _ssl_wrap_socket
    cert_reqs=cert_reqs, ca_certs=ca_certs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 372, in wrap_socket
    ciphers=ciphers)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 134, in __init__
    self.do_handshake()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ssl.py", line 296, in do_handshake
    self._sslobj.do_handshake()
SSLError: [Errno 8] _ssl.c:503: EOF occurred in violation of protocol 
```

# php - php FILTER_VALIDATE_URL + fopen($url,"r") 的可能弱点 - url 验证

> ID：15943926
> 
> 赞同：0
> 
> 时间：2013-04-11T08:21:52.410
> 
> 标签：php, filter, fopen, url-validation

我网站中的网址将包含国际字符，例如`ş`, `ğ`, `ı`...

在阅读了很多关于 url 验证问题的帖子和博客之后，我决定支持`filter_var($url, FILTER_VALIDATE_URL)`另一段代码，因为

1.  如果 url 有 int. 字符，网址无法验证
2.  [http://www.d-mueller.de/blog/why-url-validation-with-filter_var-might-not-be-a-good-idea/](http://www.d-mueller.de/blog/why-url-validation-with-filter_var-might-not-be-a-good-idea/) 由**bažmegakapa**回答+7。

然后我决定在[PHP 验证/正则表达式中使用这个想法来获取 URL](https://stackoverflow.com/questions/206059/php-validation-regex-for-url)

bažmegakapa 提供使用

`if (preg_match("#^https?://.+#", $link) and @fopen($link,"r")) echo "OK";`

查看链接是否可以打开，则表示它已通过验证。

在此之后我的问题：

**问题 -**我喜欢这个想法，在我看来它非常棒。但是在看到它只有+7并且那个页面有+>>7个答案之后，我想问一下php大师的想法是什么？他们很乐意回答这个问题以帮助像我这样的人；新秀。

bažmegakapa 的代码有什么弱点吗？例如，我不知道，但是否有任何 url 无法打开它，但实际上它是一个无害的、必须验证的 url？那么，你发现的弱点有什么解决方法呢？

谢谢你

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:40:24.387

`filter_var($url, FILTER_VALIDATE_URL)`认为有效的事实`javascript://test%0Aalert(321)`不是弱点。如果您认为是，那么您对用途的期望`filter_var`是错误的。

`filter_var($url, FILTER_VALIDATE_URL)`[根据RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)验证 URL 的语法。

*   这并不意味着确定 URL 指向的资源是否可访问。

*   当 URL 由用户提供时，它并不意味着确定使用 URL 作为 HTML 文档元素中的`href`属性值是否安全。`a`

*   这并不意味着考虑该方案（这可能会对超出[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)中描述的 URL 施加限制）。例如，虽然

    *   `ftp://foo:bar@baz`是根据[RFC 1738、3.2](http://www.ietf.org/rfc/rfc1738.txt) FTP 的有效 FTP URL ，
    *   `http://foo:bar@baz`根据[RFC 2616, 3.2.2 http URL 不是有效的 HTTP URL](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2.2)（*即使*某些浏览器可以解释此类“URL”）。

`filter_var`不烤蛋糕，也不煮咖啡。如果您需要蛋糕或咖啡，请使用其他东西（[RFC 2324](https://www.rfc-editor.org/rfc/rfc2324)是一个好的开始）。

根据具体情况，显示指向服务器无法访问的资源的 URL 可能是个好主意，也可能是个坏主意。根据具体情况，显示不指向 HTTP 或 HTTPS 资源的 URL 可能是个好主意，也可能是个坏主意。一种尺寸并不适合所有人。

# php - 如何生成帖子的 Content-Md5 标头并将请求放入 php

> ID：15943929
> 
> 赞同：3
> 
> 时间：2013-04-11T08:22:03.753
> 
> 标签：php, rest

我正在构建一个休息 api 服务器，我正在尝试将 curl 请求中的 Content-Md5 标头发送到 api 服务器。我对如何计算 md5 哈希以发送请求和放置感到困惑？我们不需要 GET 和 Delete 的标头，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T09:00:21.367

您不需要为任何不包含正文的请求提供标头。这意味着在实践中，假设一个简单的 CRUD API，您只需要担心它`PUT`和`POST`请求，`GET`而不`DELETE`需要包含它。

要包含的 MD5 散列是通过将请求正文完整地传递给[`md5()`](http://php.net/md5)函数来计算的（在 PHP 中）。使用 cURL 时，这意味着您必须手动将请求正文构造为字符串 - 您不能再将数组传递给`CURLOPT_POSTFIELDS`.

假设我想将以下数组发送到服务器：

```
$array = array(
    'thing' => 'stuff',
    'other thing' => 'more stuff'
); 
```

如果我想将它作为 JSON 发布，我会做这样的事情：

```
$body = json_encode($array);

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
curl_setopt($ch, CURLOPT_POSTFIELDS, $body);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($body),
    'Content-MD5: ' . base64_encode(md5($body, true))
));

// ... 
```

同样，如果我想将其发送为`application/x-www-form-urlencoded`，我只需更改[`json_encode()`](http://php.net/json-encode)to[`http_build_query()`](http://php.net/http-build-query)并更改`Content-Type:`标题。

# php - 根据主 ID 从不同的表中填充列表

> ID：15943930
> 
> 赞同：0
> 
> 时间：2013-04-11T08:22:13.313
> 
> 标签：php, javascript

我有 3 个相互关联的表...在第一个表中，我的学生详细信息包含 studentid (PK)、studentname、dob 等...

表 2 包含课程由 coursecodeid(PK)、studentid(FK)、coursename、teachername 等组成。

表 3 包含由 studentid(fk)、courseid(fk)、id(pk_autoincrement) 和等级组成的成绩。

系统启动时，studentid 将被加载到下拉菜单中。在更改此下拉菜单时，将显示第二个下拉菜单并加载所选学生的课程 ID（基于学生 ID）

当用户选择 courseid onchange 时，将显示一个标签以显示学生成绩。

一切都在 1 页中完成...任何人都可以在 php 或 javascript 中给我示例代码，因为我使用的是 php 和 mysql 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:31:19.280

阿贾克斯。这就是要走的路。检查[here](http://jqueryui.com/autocomplete/#remote-jsonp)以获取想法，这与您想要实现的目标类似。检查[此](http://api.jquery.com/jQuery.ajax/)以获取更多抽象代码参考。[这](https://stackoverflow.com/questions/9187971/autofill-combobox-based-on-another-combo-box-selection)是一个可能的重复。通常，搜索`loading combobox based on other combobox jquery`会给你带来相当不错的结果。

# jquery - ajax请求后变量未实现

> ID：15943931
> 
> 赞同：0
> 
> 时间：2013-04-11T08:22:13.783
> 
> 标签：jquery, variables, validation

我有以下代码：

```
$( document ).ready(function() {
    $("#btnRegister").click(function() {
        var errorVal=false;
        var numCorreo=0;
        var numAlias=0;

        $.ajax({
            url : "./php/auxChkUser.php",
            type : "POST",
            data : {alias : $("#txtRegisterAlias").val()},
            success: function(data){
                alert("usrdata: " + data);
                if(data>0) {
                    numAlias=data;
                    alert("<?=$lng->frmRegisterErrorUser; ?>");
                    errorVal=true;
                }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) { 
                alert("Status: " + textStatus); alert("Error: " + errorThrown); 
                errorVal=true;
            } 
        });

        $.ajax({
            url : "./php/auxChkMail.php",
            type : "POST",
            data : {correo : $("#txtRegisterCorreo").val()},
            success: function(data){
                alert("maildata: " + data);
                if(data>0) {
                    numCorreo=data;
                    alert("<?=$lng->frmRegisterErrorCorreoExiste; ?>");
                    errorVal=true;
                }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) { 
                alert("Status: " + textStatus); alert("Error: " + errorThrown); 
                errorVal=true;
            } 
        });
        alert("numcorreo: " + numCorreo);
        alert("numalias: " + numAlias);
        alert(errorVal);
        if(!errorVal) $("#frmRegister").submit();
    });
}); 
```

此代码产生以下输出：

```
maildata: 1
The mail already exists
usrdata: 1
The alias already exists
numcorreo: 0
numalias: 1
true 
```

问题是 numCorreo 变量设置不正确。你会说我有一个布尔变量，这应该足够了，但是在尝试获取邮件数据和 usrdata 的数量之前，我遇到了布尔变量的问题。知道这里发生了什么吗？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:47:52.453

好吧，ajax 请求是异步的。当您调用时：`alert("numcorreo: " + numCorreo);`来自服务器的响应尚未到达，它显示初始化值为“0”

# ios - ios:UITableView 不会滚动到底部

> ID：15943935
> 
> 赞同：0
> 
> 时间：2013-04-11T08:22:28.723
> 
> 标签：ios, xcode, uitableview, uiscrollview, interface-builder

我有一个滚动视图，其中包含 3`UITableViews`用于分页。所有的`UITableViews`加载更多的数据单元。第一个`UITableView`加载的单元格比其他两个多。第一次查看`UITableView`时，我可以滚动到底部，但是当我滚动到第二个`UITableView`并返回到第一个时，`UITableView`我无法再一直向下滚动。好像我必须调整滚动视图的大小。为什么我不能在视图刷新后滚动到底部？任何帮助都会很棒。

*第`UITableView`一个在顶部有一个搜索栏。其他两个没有。我尝试删除搜索栏，但仍然出现错误。

```
//Create a frame for each page and add the page to the scroll view
- (void)frameToScrollView{

if (pages!=NULL) {

    for (int i = 0; i < pages.count; i++) {

        //Get the current view controller
        UITableViewController *controller = [pages objectAtIndex:i];

        //Create a frame for the current table view controller
        CGRect frame = controller.view.frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;
        controller.view.frame = frame;

        //Add the the current table view controller page to the scroll view
        [self.scrollView addSubview:controller.view];
    }
  }
} 
```

设置其他属性：

```
//Set the properties for the scroll view
- (void)setScrollViewProperties{
     self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * pages.count,     self.scrollView.frame.size.height);
    self.scrollView.contentOffset = CGPointMake(self.scrollView.frame.size.width, 0);
    self.scrollView.scrollsToTop = NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:28:03.680

`UITableView`是 的子类`UIScrollView`。所以你基本上是在一个滚动视图中添加 3 个滚动视图。我不认为这是可取的。

我认为这里的问题是设备对哪个 scrollView 将处理触摸/拖动事件感到困惑。

如果您确实需要滚动视图进行分页，我建议您创建滚动视图，但为此禁用触摸事件。您可以添加按钮以允许页面导航（而不是允许用户向左/向右滑动）。这样，您可以确保只有可见的 tableview 才能获得触摸/拖动事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:40:12.377

在这里发现了类似的问题：[UITableView Won't Scroll In certain Conditions](https://stackoverflow.com/questions/1522838/uitableview-wont-scroll-in-certain-conditions)。

我的第一个 UITableView 顶部有一个搜索栏。

在上面的帖子中，他们建议添加 `[self.tableView setAlwaysBounceVertical:YES];`

我对此进行了测试，但它不起作用。我把它放在我的视图中确实为 UITableView 加载了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:30:10.963

得到它的工作：

（1）单击“加载更多”单元格并收到信息后，我删除所有子视图
（2）然后我创建新框架并将它们添加回子视图
（3）最后我重新加载表格数据

# mysql - Django 字符集和编码

> ID：15943938
> 
> 赞同：4
> 
> 时间：2013-04-11T08:22:33.823
> 
> 标签：mysql, django, encoding, tinymce

我正在尝试从/向 Mysql 数据库存储和查看希腊字符。

我想使用 utf8 编码我使用以下命令更改我的数据库：

```
ALTER DATABASE el CHARACTER SET utf8 COLLATE utf8_general_ci 
```

现在，当我尝试创建文章时，我看到以下错误：

![错误页面](https://i.stack.imgur.com/VCwpl.png)

当我试图从我的数据库中获取文章时，我看到如下内容：

```
mysql> select * from article_article
    -> ;
+----+------------+----------+-------------+----------------------------------------------------------------------------------+----------+------+-------+-------+--------------+---------------------+---------------------+-----------+
| id | submenu_id | title    | url         | body                                                                             | image_id | hits | votes | grade | publisher_id | time_upload         | last_modified       | published |
+----+------------+----------+-------------+----------------------------------------------------------------------------------+----------+------+-------+-------+--------------+---------------------+---------------------+-----------+
|  1 |          1 | ???????? | ssss-d-ssss | <p>&epsilon;&lambda;&lambda;&eta;&nu;&iota;&kappa;?</p>
<p>&nbsp;</p>
<p>?</p> |        9 |    0 |     0 |   2.5 |            1 | 2013-04-11 10:39:30 | 2013-04-11 11:02:01 |         1 |
+----+------------+----------+-------------+----------------------------------------------------------------------------------+----------+------+-------+-------+--------------+---------------------+---------------------+-----------+
1 row in set (0.00 sec) 
```

我将tinymce用于bodyfield ..（Tinymce保存希腊字符非常糟糕）

我还检查了管理页面中是否缺少以下内容：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

如何配置 django 为 utf8 格式？我怎样才能正常配置tinymce以使用Emding Greek Chars？

**编辑：**使用 mysql 命令更改字段的整理可以解决问题。在 tiny_mce.js 中也`entity_encoding`从更改`named`为`raw`解决第二个问题。现在唯一的问题是警告没有消失:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-04-04T12:54:40.917

将`charset`选项设置为 Django 设置文件中设置`utf8mb4`的`OPTIONS`字典：`DATABASES`

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'my_db',
        'USER': 'my_user',
        'PASSWORD': 'my_pass',
        'HOST': 'my.host',
        'OPTIONS': {
            'charset': 'utf8mb4'  # This is the important line
        }
    }
} 
```

这些选项将作为参数传递给 mysql 驱动程序连接函数，通常是`mysqlclient`. 在这里，您可以在文档中看到所有这些参数：

[https://mysqlclient.readthedocs.io/user_guide.html#functions-and-attributes](https://mysqlclient.readthedocs.io/user_guide.html#functions-and-attributes)

但是，如果您为 mysql 使用[不同的驱动程序](https://docs.djangoproject.com/en/dev/ref/databases/#mysql-db-api-drivers)，则可能需要不同的选项。

还要确保在 MySQL 数据库中，列、表或整个数据库的字符集设置为`utf8mb4`. 有关 MySQL 中字符集的更多信息，请参阅：

MySQL 文档：[指定字符集和排序规则](https://dev.mysql.com/doc/refman/5.7/en/charset-syntax.html)
MySQL 文档：[utf8mb4 字符集（4 字节 UTF-8 Unicode 编码）](https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)
堆栈溢出：[MySQL 中的 utf8mb4 和 utf8 字符集有什么区别？](https://stackoverflow.com/questions/30074492/what-is-the-difference-between-utf8mb4-and-utf8-charsets-in-mysql)

顺便说一句，Django 中有一个正在进行的拉取请求以`utf8mb4`设置默认值：[https ://github.com/django/django/pull/8886](https://github.com/django/django/pull/8886)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-11T10:20:56.723

在 Django 设置文件中：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'OPTIONS': {
            'init_command': "SET NAMES 'utf8mb4';SET sql_mode='STRICT_TRANS_TABLES';",
            'read_default_file': '/platform/auth/mysql.conf',
            'charset': 'utf8mb4',
        },
        'ATOMIC_REQUESTS': True,
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-01T15:21:11.657

gitaarik 上面的回答是正确的，经过一番挖掘后对我有用。我为那些在选项字典中使用单独文件的人添加了这个。像这样：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.mysql',
    'OPTIONS': {
        'read_default_file': '/platform/auth/mysql.conf',
        'charset': 'utf8mb4',
    },
    'ATOMIC_REQUESTS': True,
} 
```

这是我的 mysql.conf。直到我删除了 default-character-set 选项，它才起作用。

```
database = 'xyz_platform'
user = 'xyz'
password = 'xyzpassword'
default-character-set = 'utf8mb4' 
```

正确的 mysql.conf 是这样的：

```
database = 'xyz_platform'
user = 'xyz'
password = 'xyzpassword' 
```

# ios - IOS在SDK6.1闪烁，5.X或更早版本不闪烁

> ID：15943943
> 
> 赞同：1
> 
> 时间：2013-04-11T08:22:40.433
> 
> 标签：ios, multithreading, uialertview, flicker

我更新了一年后为 SDK 5.X 创建的应用程序，但现在，我遇到了一个可怕的问题。在应用程序中，使用 MBProgressHUD 从服务器下载文件，并在完成时显示 UIAlerView。但是，因此，视图闪烁，有人说 UIAlertView 应该在主线程上消失，我的代码是这样的：

```
 NSMutableDictionary *dic = [[NSMutableDictionary alloc] init];
MBProgressHUD *hud = [[MBProgressHUD alloc] initWithWindow:[[WNMAppDelegate appDelegate] window]];
hud.labelText = @"Please wait...";
[[[WNMAppDelegate appDelegate] window] addSubview:hud];
[hud showAnimated:YES whileExecutingBlock:^{
    [self progressHudMethodForCheckIn:dic];
} completionBlock:^{
    [hud removeFromSuperview];
    [hud release];
    if ([[dic allKeys] count])
    {
        NSString *key = [[dic allKeys] objectAtIndex:0];
        [self alertMessage:[dic objectForKey:key] withTitle:key];
    }
    else
    {
        [self alertMessage:@"Succeed sign in" withTitle:@"Nice"];
    }
}];
[dic release];

- (void)alertMessage:(NSString *)message withTitle:(NSString *)title{
UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:title
                      message:(NSString *)message
                      delegate:nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
[alert show];
[alert release]; 
```

}

有人能帮我吗？谢谢你。

# matplotlib - 从熊猫数据框中注释散点图

> ID：15943945
> 
> 赞同：15
> 
> 时间：2013-04-11T08:22:42.470
> 
> 标签：matplotlib, pandas

我正在使用 pandas 和 matplotlib 来可视化这个数据框

```
 HDD  EnergyPerSquareMeter   Year
0    3333.6  23.11   1997
1    3349.6  24.30   1998
2    3319.5  24.78   1999
3    3059.1  22.01   2000
4    3287.5  24.17   2001
5    3054.9  20.01   2002
6    3330.0  21.25   2003
7    3307.3  19.22   2004
8    3401.4  18.31   2005
9    3261.6  20.40   2006
10   3212.8  15.34   2008
11   3231.2  15.95   2009
12   3570.1  15.79   2010
13   2995.3  13.88   2011 
```

我想将 EnergyPerSquareMeter 绘制为散点图（x 轴 = HDD）并用年份注释点。

我这样做了：

```
ax =EnergyvsHDD.plot(x='HDD', y='EnergyPerSquareMeter', marker="o" , linestyle='None', figsize=(12,8))
for i, txt in enumerate(EnergyvsHDD['Year']):
    ax.annotate(txt, (x[i],y[i]), size=10, xytext=(0,0), ha='right', textcoords='offset points') 
```

结果是：

![在此处输入图像描述](https://i.stack.imgur.com/tFdVV.jpg)

年份的注释文本不会出现在点附近。我究竟做错了什么？

更新

使用此代码：

```
def label_point_orig(x, y, val, ax):
    a = pd.concat({'x': x, 'y': y, 'val': val}, axis=1)
    print a
    for i, point in a.iterrows():
        ax.text(point['x'], point['y'], str(point['val'])) 
```

接着：

```
ax = EnergyvsHDD.set_index('HDD')['EnergyPerSquareMeter'].plot(style='o')
label_point_orig(EnergyvsHDD.HDD, EnergyvsHDD.EnergyPerSquareMeter, EnergyvsHDD.Year, ax)
draw() 
```

这些点没有出现在正确的位置：

![在此处输入图像描述](https://i.stack.imgur.com/tZ9hx.jpg)

尽管使用此代码它可以工作：

```
plt.scatter(list(EnergyvsHDD.HDD), list(EnergyvsHDD.EnergyPerSquareMeter))
label_point_orig(EnergyvsHDD.HDD, EnergyvsHDD.EnergyPerSquareMeter, EnergyvsHDD.Year, plt)
draw() 
```

![在此处输入图像描述](https://i.stack.imgur.com/iQDIe.jpg)

有人知道为什么吗？

# mysql - 如何从同一个表中的主键和外键的mysql表中删除主键。？

> ID：15943946
> 
> 赞同：4
> 
> 时间：2013-04-11T08:22:49.127
> 
> 标签：mysql, foreign-keys, primary-key, foreign-key-relationship, primary-key-design

我有两个不同的表，每个表有 20k 个条目，我错误地将 summaryId 作为同一个表中的主键和外键，但现在我想删除主键约束，它也是自动增量。当我尝试删除主键语法时，它返回一个错误：

**#1025 - 将 '.\tg#sql-a38_7f' 重命名为 '.\tg\rest_web_availability_summary_pm' 时出错（错误号：150）**

我尝试了以下查询。

```
ALTER TABLE 'table_name' DROP PRIMARY KEY 
```

如果有人有任何想法，请告诉我如何删除主键。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T08:26:08.190

问题是，你的领域是`auto_increment`. 您应该先删除 auto_increment 然后删除主键..所以试试这个：

```
ALTER TABLE `mytable` CHANGE COLUMN `id` `id` INT(11) NOT NULL, DROP PRIMARY KEY; 
```

重新定义不带 auto_increment 的列将其删除

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-04T00:55:42.080

我也遇到了同样的问题，原来是被其他字段引用了，mysql要求列是唯一的，所以我先加了一个唯一的约束，从此过上了幸福的生活：

```
alter table `mytable` add unique key `key` (`fieldname`);
alter table `mytable` drop primary key; -- which is fieldname... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T17:19:53.417

如前所述，您需要删除`FK`s 之前。在 MySQL 上，这样做：

```
ALTER TABLE `table_name` DROP FOREIGN KEY `id_name_fk`;

ALTER TABLE `table_name` DROP INDEX `id_name_fk`; 
```

# yii - Yii 框架 renderPartial 在视图中不起作用

> ID：15943947
> 
> 赞同：0
> 
> 时间：2013-04-11T08:22:49.303
> 
> 标签：yii

当我`$this->renderPartial()`从视图中调用它时，它根本不起作用。

我试过的代码：

```
$this->renderPartial("_selectedalbums"); 
```

“_selectedalbums”视图位于同一目录中。

我缺少什么，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:20:31.307

如果您将值传递给视图，则可能无法正确分配或初始化这些变量。检查所有传递的值是否都在获取值。还要打开您的错误报告并查看。希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:29:05.247

鉴于部分视图与您正在运行的控制器位于同一视图文件夹中，您应该检查您的拼写。区分大小写的文件系统将要求您准确（`_selectedAlbums`vs `_selectedalbums`）。

# ipython - IPython 历史中的错误？

> ID：15943948
> 
> 赞同：0
> 
> 时间：2013-04-11T08:22:53.407
> 
> 标签：ipython

这是一个错误，还是我不了解 IPython 中的 %hist ？

```
In [79]: hist -g shapely
102/16: from shapely import Point, mapping
102/17: from shapely import Point, mapping
102/18: from shapely import mapping
102/19: import shapely
102/20: shapely?
140/53: import shapely
54: import shapely

In [80]: hist -n ~102/14-20
122/14: l
122/15: ls
122/16: nco.variables.keys()
122/17: ls
122/20: nco.sync() 
```

好？似乎有一个 20 的偏移量......为什么？

```
In [81]: hist -n ~122/14-20
102/14: utm33N = pyproj.Proj(proj='utm', zone=33, south=False, ellipse='ED50')
102/15: import ogr
102/16: from shapely import Point, mapping
102/17: from shapely import Point, mapping
102/18: from shapely import mapping
102/19: import shapely
102/20: shapely? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:03:49.907

您已将其反转，请参阅输出`%history?`以获取有关如何调用它的信息

相关位：

> ```
> ``243/1-5``
>     Lines 1-5, session 243
> ``~2/7``
>     Line 7, session 2 before current 
> ```

`%history -n ~102/14-20`实际上 102 个会话*前*的第 14-20 行也是如此。对于会话 102，删除波浪号：

```
%history -n 102/14-20 
```

# java - 重复数据验证

> ID：15943949
> 
> 赞同：1
> 
> 时间：2013-04-11T08:22:54.447
> 
> 标签：java

我需要问三个级别的工资。1级必须至少65k，2级必须至少60k。1 级也必须至少是 2 级的 110%。2 级也必须至少是 3 级的 120%。我只从 1 级和 2 级开始，因为如果我能弄清楚，我就能弄清楚 3 级.这是我所拥有的：

```
 do {
        System.out.println("Please enter the full time employee payscale level 1 rate: ");
        fullTimePay1 = input.nextInt();
    } while (fullTimePay1 < 65000);

    do {
        System.out.println("Please enter the full time employee payscale level 2 rate: ");
        fullTimePay2 = input.nextInt();
        } while (fullTimePay2 < 60000);

    do {
        System.out.println("Please enter the full time employee payscale level 1 rate: ");
        fullTimePay1 = input.nextInt();
        System.out.println("Please enter the full time employee payscale level 2 rate: ");
        fullTimePay2 = input.nextInt();
    } while (fullTimePay1 < (fullTimePay2 * 1.1)); 
```

但它只是一遍又一遍地重复（我在这段代码之后有一个永远不会执行的打印语句）。谁能告诉我为什么，也许可以帮助我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:33:34.690

正如您的代码所示，当我输入例如 100000 和 70000 （两次）时，循环终止；您是否可能会混淆哪个值应该更大（或者连续尝试不止一次）？

您的代码将无法正常工作，因为您没有在第三个循环中进行 65k 和 60k 验证，并且您还要求每个输入两次而不是一次（输入正确时）（do-while 检查循环**后**的条件，而不是之前（while循环会这样做），因此第三个循环将询问用户输入，而不管值是什么）。

用以下内容替换 3 个循环应该可以工作：

```
do {
  do {
    System.out.println("Please enter full time employee payscale level 1 rate:");
    fullTimePay1 = input.nextInt();
  } while (fullTimePay1 < 65000);
  do {
    System.out.println("Please enter full time employee payscale level 2 rate:");
    fullTimePay2 = input.nextInt();
  } while (fullTimePay2 < 60000);
} while (fullTimePay1 < (fullTimePay2 * 1.1)); 
```

但是，如果允许的话，仅验证第二个的 110% 对我来说更有意义：

```
do {
  System.out.println("Please enter full time employee payscale level 1 rate:");
  fullTimePay1 = input.nextInt();
} while (fullTimePay1 < 66000); // 'cause min(1) = 1.1*min(2) = 1.1*60000 = 66000
do {
  System.out.println("Please enter full time employee payscale level 2 rate:");
  fullTimePay2 = input.nextInt();
} while (fullTimePay2 < 60000 || fullTimePay1 < (fullTimePay2 * 1.1)); 
```

# android - 使用 textview 和 imageview 滚动自定义列表视图时出错

> ID：15943950
> 
> 赞同：1
> 
> 时间：2013-04-11T08:22:58.377
> 
> 标签：android, android-listview

我正在尝试显示自定义列表视图。每行包含一个 textview 和一个 imageview。我在这段代码上做了很多尝试，但仍然无法理解这个问题。问题是，当我滚动列表时，它会选择列表中的其他项目。简而言之，它不存储 imageview 的先前状态。我需要这种机制，因为我想让我的活动像“通过从列表中选择来删除多个项目”一样工作。如果有人可以帮助我解决这个问题，请...

```
package com.walletapp;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class DeleteData extends Activity {

    Cursor cursor;
    ListView lv_delete_data;
    static ArrayList<Integer> listOfItemsToDelete;
    SQLiteDatabase database;
    private Category[] categories;
    ArrayList<Category> categoryList;
    private ArrayAdapter<Category> listAdapter;
    ImageView iv_delete;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_delete_data);

        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        manage_reload_list();

        listOfItemsToDelete = new ArrayList<Integer>();

        iv_delete = (ImageView) findViewById(R.id.imageViewDeleteDataDelete);
        iv_delete.setClickable(true);
        iv_delete.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (listOfItemsToDelete.isEmpty()) {

                    Toast.makeText(getBaseContext(), "No items selected.",
                            Toast.LENGTH_SHORT).show();
                }

                else {
                    showDialog(
                            "Warning",
                            "Are you sure you want to delete these categories ? This will erase all records attached with it.");
                }
            }
        });

        lv_delete_data = (ListView) findViewById(R.id.listViewDeleteData);
        lv_delete_data.setAdapter(listAdapter);
    }

    private void showDialog(String title, String message) {

        AlertDialog.Builder adb = new Builder(DeleteData.this);
        adb.setTitle(title);
        adb.setMessage(message);
        adb.setIcon(R.drawable.ic_launcher);
        String btn = "Ok";
        if (title.equals("Warning")) {
            btn = "Yes";
            adb.setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            });
        }

        adb.setPositiveButton(btn, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {

                for (int i : listOfItemsToDelete) {
                    // -------first delete from category table-----

                    database.delete("category", "cat_id=?", new String[] { i
                            + "" });

                    // ---------delete from category_fields

                    database.delete("category_fields", "cat_id=?",
                            new String[] { i + "" });

                    // ---------delete from records_data-------

                    database.delete("records_data", "cat_id=?",
                            new String[] { i + "" });
                }

                database.close();
                manage_reload_list();
                lv_delete_data.setAdapter(listAdapter);
            }
        });

        AlertDialog ad = adb.create();
        ad.show();
    }

    protected void manage_reload_list() {

        loadDatabase();

        categoryList = new ArrayList<Category>();

        // ------first fetch all categories name list-------

        cursor = database.query("category", new String[] { "cat_id",
                "cat_description" }, null, null, null, null, null);
        if (cursor.getCount() == 0) {
            showDialog("Error", "No categories found.");
            cursor.close();
        } else {

            while (cursor.moveToNext()) {

                categories = new Category[] { new Category(cursor.getInt(0),
                        cursor.getString(1)) };
                categoryList.addAll(Arrays.asList(categories));
            }
            cursor.close();
        }
        listAdapter = new CategoryArrayAdapter(this, categoryList);
    }

    public static class Category {
        String cat_name = "";
        int cat_id = 0;
        Boolean checked = false;

        Category(int cat_id, String name) {
            this.cat_name = name;
            this.cat_id = cat_id;
        }

        public int getId() {
            return cat_id;
        }

        public String getCatName() {
            return cat_name;
        }

        public Boolean getChecked() {
            return checked;
        }

        public void setChecked(Boolean checked) {
            this.checked = checked;
        }

        public boolean isChecked() {
            return checked;
        }

        public void toggleChecked() {
            checked = !checked;
        }
    }

    private static class CategoryViewHolder {
        private ImageView imageViewCheck;
        private TextView textViewCategoryName;

        public CategoryViewHolder(ImageView iv_check, TextView tv_category_name) {
            imageViewCheck = iv_check;
            textViewCategoryName = tv_category_name;
        }

        public ImageView getImageViewCheck() {
            return imageViewCheck;
        }

        public TextView getTextViewCategoryName() {
            return textViewCategoryName;
        }
    }

    private static class CategoryArrayAdapter extends ArrayAdapter<Category> {
        private LayoutInflater inflater;

        public CategoryArrayAdapter(Context context, List<Category> categoryList) {
            super(context, R.layout.single_row_delete_data,
                    R.id.textViewSingleRowDeleteData, categoryList);
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            Category category = (Category) this.getItem(position);
            final ImageView imageViewCheck;
            final TextView textViewCN;

            if (convertView == null) {
                convertView = inflater.inflate(R.layout.single_row_delete_data,
                        null);

                imageViewCheck = (ImageView) convertView
                        .findViewById(R.id.imageViewSingleRowDeleteData);
                textViewCN = (TextView) convertView
                        .findViewById(R.id.textViewSingleRowDeleteData);

                convertView.setTag(new CategoryViewHolder(imageViewCheck,
                        textViewCN));
            }

            else {
                CategoryViewHolder viewHolder = (CategoryViewHolder) convertView
                        .getTag();
                imageViewCheck = viewHolder.getImageViewCheck();
                textViewCN = viewHolder.getTextViewCategoryName();
            }

            imageViewCheck.setFocusable(false);
            imageViewCheck.setFocusableInTouchMode(false);
            imageViewCheck.setClickable(true);
            imageViewCheck.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    ImageView iv = (ImageView) v;
                    Category category = (Category) iv.getTag();

                    if (category.getChecked() == false) {
                        imageViewCheck.setImageResource(R.drawable.set_check);
                        listOfItemsToDelete.add(category.getId());
                        category.setChecked(true);
                    } else {
                        imageViewCheck
                                .setImageResource(R.drawable.set_basecircle);
                        listOfItemsToDelete.remove((Integer) category.getId());
                        category.setChecked(false);
                    }
                }
            });
            imageViewCheck.setTag(category);
            textViewCN.setText(category.getCatName());

            return convertView;
        }
    }

    private void loadDatabase() {
        database = openOrCreateDatabase("WalletAppDatabase.db",
                SQLiteDatabase.OPEN_READWRITE, null);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {

            finish();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

这是我的 logcat 输出：

```
04-11 08:32:47.083: D/dalvikvm(1261): GC_FOR_ALLOC freed 735K, 29% free 3332K/4672K, paused 199ms, total 205ms
04-11 08:32:47.362: E/ActivityThread(1261): Failed to find provider info for com.google.plus.platform
04-11 08:32:47.632: I/Ads(1261): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":18,"session_id":"5201479258687953639","seq_num":"19","slotname":"a1512f50d8c3692","u_w":320,"msid":"com.walletapp","cap":"m,a","adtest":"on","js":"afma-sdk-a-v6.3.0","bas_off":0,"net":"ed","app_name":"1.android.com.walletapp","hl":"en","gnt":3,"carrier":"310260","u_audio":4,"kw":[],"u_sd":1,"simulator":1,"ms":"5j2LTo7Vhgatbr2zw9EGXbWGmAc8VRgJRTZpfRmRxDNZMDEtohADcdSvAbGyjHBAH6KuyP48dzaU-_Gfkq8adRJMFxu5Oq_46jWdTHBUpf_Fgm5xN1ehJ8NcEhqNpN7oHsV38ukGuVQUNKofxsk0Ij8cY8l0_QddW8iKCAXhz80Ujr2xbTEzUd9nV9NGfq1EBiaZjk732PJPl7Z2Myy1oX61Bk7VZzpSyCtlX5XIzdTM8iyqsNk2yTmjG6sflKdqXykfd1oXnrlrxaDLHnq1C4cSceFeDQZ0Lv-oxG2Xzr76GT9BhyUEWzE7pTYJQ70-KpUOV2Il56LykY3wCH2j2Q","isu":"B3EEABB8EE11C2BE770B684D95219ECB","format":"320x50_mb","oar":0,"ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"u_h":480,"pt":1,"bas_on":0,"ptime":1851610});</script></head><body></body></html>
04-11 08:32:48.321: D/webviewglue(1261): nativeDestroy view: 0x2a368740
04-11 08:32:48.392: I/Choreographer(1261): Skipped 93 frames!  The application may be doing too much work on its main thread.
04-11 08:32:49.052: I/Choreographer(1261): Skipped 396 frames!  The application may be doing too much work on its main thread.
04-11 08:32:55.001: I/Choreographer(1261): Skipped 50 frames!  The application may be doing too much work on its main thread.
04-11 08:33:29.022: E/Ads(1261): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (http://media.admob.com/:1)
04-11 08:33:29.022: E/Web Console(1261): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at http://media.admob.com/:1
04-11 08:33:47.529: I/Ads(1261): AdLoader timed out after 60000ms while getting the URL.
04-11 08:33:47.531: D/webviewglue(1261): nativeDestroy view: 0x2a368740
04-11 08:33:47.541: I/Ads(1261): onFailedToReceiveAd(A network error occurred.)
04-11 08:34:47.581: I/Ads(1261): Refreshing ad.
04-11 08:34:47.622: E/ActivityThread(1261): Failed to find provider info for com.google.plus.platform
04-11 08:34:47.762: I/Ads(1261): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":19,"session_id":"5201479258687953639","seq_num":"20","slotname":"a1512f50d8c3692","u_w":320,"msid":"com.walletapp","cap":"m,a","adtest":"on","js":"afma-sdk-a-v6.3.0","bas_off":0,"net":"ed","app_name":"1.android.com.walletapp","hl":"en","gnt":3,"carrier":"310260","u_audio":4,"kw":[],"u_sd":1,"simulator":1,"ms":"Trn0wt2c5XiO7OmFyXqrKSLD7ZgZh_ZbxneDNRsJ5MwCcYQbDy7isjpET_A9DTjPoNNPXVDn41qPQDD5Msbcr6ieK1Rchi6ctbf3FTZcO5QSlr054zlHBS2qx7jL-T9VwVNde2CNfbgy_6_w5Ww85XfPo9L2TaZqmg49knQiBxg_gw3fijmphjz0LYqrhjuc8XLVG2K9z27UwQA4_2KGoiM5iwxXsXO0L2LT-3BXz49GyD3r9XZ8qHI4nrIQ2pPsEWUhgznx4I24PAvvwmOEcF0DVLzndhPwaj-HlI5f6-vXHGFQ6hxU6iV58DytEWEbF9eI1Ierr_4Eue0rqFkoyw","isu":"B3EEABB8EE11C2BE770B684D95219ECB","format":"320x50_mb","oar":0,"ad_pos":{"height":0,"visible":0,"y":480,"x":0,"width":0},"u_h":480,"pt":1,"bas_on":0,"ptime":1971778});</script></head><body></body></html>
04-11 08:35:28.222: E/Ads(1261): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (http://media.admob.com/:1)
04-11 08:35:28.222: E/Web Console(1261): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at http://media.admob.com/:1
04-11 08:35:47.714: I/Ads(1261): AdLoader timed out after 60000ms while getting the URL.
04-11 08:35:47.714: D/webviewglue(1261): nativeDestroy view: 0x2a240398
04-11 08:35:47.741: I/Ads(1261): onFailedToReceiveAd(A network error occurred.) 
```

我没有收到任何错误。我是新手，但我仍然尽力在我的代码中找到错误，但没有成功。请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:45:24.780

将你的适配器转换成这个模型，我认为这对你有帮助，

```
public class CheckBoxInListAdapter extends BaseAdapter{
private Context context=null;
private List<ArrayListObjects> searchArrayList=null;
private LayoutInflater mInflater=null;
private ViewHolder holder=new ViewHolder();

public CheckBoxInListAdapter(Context context, List<ArrayListObjects> mData) 
{
    this.context=context;
    searchArrayList = mData;
    mInflater = LayoutInflater.from(context);
}
public int getCount() 
{
    return searchArrayList.size();
}
public Object getItem(int position) 
{
    return searchArrayList.get(position);
}
public long getItemId(int position) 
{
    return position;
}
public View getView(final int position, View convertView, ViewGroup parent)
{
     if (convertView == null) 
     {
          convertView = mInflater.inflate(R.layout.sample_layout,null);
          holder=new ViewHolder();
          holder.textView = (TextView) convertView.findViewById(R.id.textView);
          holder.itemNormalChecked=(CheckBox)convertView.findViewById(R.id.checkBox);
          convertView.setTag(holder);
     } 
     else 
     {
         holder = (ViewHolder) convertView.getTag();
     }
     holder.textView.setText(searchArrayList.get(position).getItemName());
     holder.itemNormalChecked.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if(searchArrayList.get(position).isItemChecked())
            {
                searchArrayList.get(position).setItemChecked(false);
            }
            else
            {
                searchArrayList.get(position).setItemChecked(true);
            }
        }
     });
     if(searchArrayList.get(position).isItemChecked())
     {
         holder.itemNormalChecked.setChecked(true);
     }
     else
     {
         holder.itemNormalChecked.setChecked(false);
     }
     return convertView;
 }
 static class ViewHolder
 {
     TextView textView=null;
     CheckBox itemNormalChecked=null;
 }
} 
```

# scala - 当缺少必填字段时，是否可以让 json4s 不抛出异常？

> ID：15943957
> 
> 赞同：16
> 
> 时间：2013-04-11T08:23:31.253
> 
> 标签：scala, json4s

当缺少必填字段时，是否可以让 json4s 不抛出异常？

当我从原始 json 字符串中“提取”对象时，它会抛出像这样的异常

```
org.json4s.package$MappingException: No usable value for pager
No usable value for rpp
Did not find value which can be converted into byte
    at org.json4s.reflect.package$.fail(package.scala:98)
    at org.json4s.Extraction$ClassInstanceBuilder.org$json4s$Extraction$ClassInstanceBuilder$$buildCtorArg(Extraction.scala:388)
    at org.json4s.Extraction$ClassInstanceBuilder$$anonfun$11.apply(Extraction.scala:396) 
```

是否可以让它为 null ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T08:54:41.737

这很简单，你必须使用`Option`和它的潜力，`Some`和`None`。

```
val json = ("name" -> "joe") ~ ("age" -> Some(35));
val json = ("name" -> "joe") ~ ("age" -> (None: Option[Int])) 
```

但请注意，在上述情况下，`match`将为您的`Option`. 如果是`None`，它将完全从字符串中删除，因此不会反馈 null。

在相同的模式中，要解析不完整的 JSON，您可以使用`case class`with `Option`。

```
case class someModel(
    age: Option[Int],
    name: Option[String]
);
val json = ("name" -> "joe") ~ ("age" -> None);
parse(json).extract[someModel]; 
```

有一种方法不会抛出任何异常，那就是`extractOpt`

```
parse(json).extractOpt[someModel]; 
```

使用 scala API 复制它的一种方法是使用`scala.util.Try`：

```
Try { parse(json).extract[someModel] }.toOption 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-22T21:26:45.230

在处理数据迁移时，我已经处理了这个问题，我希望使用默认值来填充未定义的字段。

我的解决方案是在提取结果之前将默认值合并到 JValue 中。

```
 val defaultsJson = Extraction.decompose(defaults)
  val valueJson = JsonUtil.jValue(v)
  (defaultsJson merge valueJson).extract[T] 
```

JsonUtil.scala

```
 import org.json4s._

  object JsonUtil {
    import java.nio.charset.StandardCharsets.UTF_8
    import java.io.{InputStreamReader, ByteArrayInputStream}

    def jValue(json: String): JValue = {
      jValue(json.getBytes(UTF_8))
    }

    def jValue(json: Array[Byte]): JValue = {
      val reader = new InputStreamReader(new ByteArrayInputStream(json), UTF_8)
      native.JsonParser.parse(reader)
    }
  } 
```

# solr - 在 SOLR 中将 debugQuery 设置为 on 时如何添加我自己的消息

> ID：15943961
> 
> 赞同：0
> 
> 时间：2013-04-11T08:23:51.970
> 
> 标签：solr

我实现了自己的 QParserPlugin，想知道当 debugQuery 参数设置为“on”时如何添加自己的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:43:50.810

有一个方法叫做 addDebugInfo：

公共无效 addDebugInfo（命名列表调试信息）

您可以覆盖它以添加您自己的消息，但请确保调用 super.addDebugInfo。

# javascript - javascript - 检查输入是否对应于 1 个数组值

> ID：15943965
> 
> 赞同：3
> 
> 时间：2013-04-11T08:24:10.983
> 
> 标签：javascript, arrays, if-statement

我有一个数组：

```
var something = ["1","2","3","4"] ; 
```

我会在提示中要求用户选择一个数字。如果它对应于数组中的任何值，它就会触发一些东西。

我的问题是：如何检查输入是否对应于任何数组值？

```
if(something === "input"){
    console.log("u picked a good number");
} 
```

当然，如果我现在拥有的语句不正确，但我如何让它检查数组中的每个值，看看是否有任何对应？

如果有人可以帮我解决这个问题，那就太棒了！;)

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T08:26:09.740

数组有一个[`indexOf`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)，它返回在数组中找到参数的索引，如果没有找到，则返回 -1：

```
if (something.indexOf(input) > -1) {
    // In the array!
} 
```

请注意，一些较旧的浏览器不支持此方法，但上面链接的 MDN 文章中有一个 polyfill。

# ruby-on-rails-3.2 - 启动 rspec 测试后出现分段错误

> ID：15943969
> 
> 赞同：1
> 
> 时间：2013-04-11T08:24:13.497
> 
> 标签：ruby-on-rails-3.2, rvm, factory-bot, rspec-rails, ruby-1.9.3

我们正在使用 RoR 应用程序（Ruby v. 1.9.3、RoR v. 3.2.12、rvm v. 1.8.14），当我们启动 rspec 测试时，我们会遇到以下崩溃（我不能在这里复制， 它太长了）：

[https://gist.github.com/pabloDon/5361689](https://gist.github.com/pabloDon/5361689)

如果我们尝试多次启动它，最终我们可以启动它（当然，无需更改源代码）。

这个问题出现在所有规格中，所以我认为我们的代码不是问题。如果有帮助，这是崩溃的最后一个测试：

```
require 'spec_helper'

describe Admin::PedidosController do

  describe "GET 'index'" do
    [.. other specs...]

    it "populates an array of carts" do
      category = FactoryGirl.create :category, category_id: nil
      product = FactoryGirl.create :product, category_id: category.id
      cart = FactoryGirl.create :cart      
      cart_product = FactoryGirl.create :cart_product, product_id:product.id, cart_id: cart.id                      

      get 'index'                               
      assigns(:orders).should eq([cart])        

    end
  end

    [.. other specs...]

end 
```

如果您需要更多代码和/或日志，请直接说出来！：） 提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:14:11.913

1.  尝试`rvm get head; rvm reinstall 1.9.3`-按照说明进行操作，它可能可以解决库中`Psych`的问题，因为堆栈中使用`libyaml`.
2.  尝试将您的应用程序更新为新的 ruby`rvm get head; rvm use --install 2.0.0`

如果问题仍然存在，`2.0.0`请尝试将其隔离为最小的示例并报告给[https://bugs.ruby-lang.org/](https://bugs.ruby-lang.org/)

# android - 安卓 平板电脑特定名称

> ID：15943970
> 
> 赞同：0
> 
> 时间：2013-04-11T08:24:14.683
> 
> 标签：android

我所有兼容的屏幕都可以正常工作，大屏幕等等......

我有一个名为“ **layout-sw600dp** ”的布局，特别适用于 7 英寸的平板电脑。效果很好。

**如何在 manifest.xml 中设置它？**

例如

```
 <screen android:screenSize="sw600dp" android:screenDensity="mdpi" /> 
```

定义sw600dp会好吗？

谢谢你的回答！

# mvvm - KendoUI：无法将数据绑定到 JSON 文件中的 HTML 元素。

> ID：15943973
> 
> 赞同：0
> 
> 时间：2013-04-11T08:24:24.833
> 
> 标签：mvvm, kendo-ui

我是 kendo ui 和 mvvm 的新手，我正面临这个问题：

我有一个以下格式的 JSON 文件：

```
[
{
"Id":1,
"img":"shoes.png"},
{"Id":2,
"img":"books.png"}
    }
] 
```

我正在使用剑道人在线提到的示例阅读文件，如下所示：

```
var crudServiceBaseUrl = "pro.json";
    var viewModel = kendo.observable({
            productsSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: crudServiceBaseUrl,
                        dataType: "json"
                    },
                    update: {
                        url: crudServiceBaseUrl,
                        dataType: "json"
                    },
                    destroy: {
                        url: crudServiceBaseUrl,
                        dataType: "json"
                    },
                    parameterMap: function(options, operation) {
                        if (operation !== "read" && options.models) {
                            return {
                                models: kendo.stringify(options.models)
                            };
                        }
                        return options;
                    }
                },
                batch: true,
                schema: {
                    model: {
                        id: "Id"
                    }
                }
            })
        });

        kendo.bind($("#form-container"), viewModel); 
```

我能够将数据源中的数据绑定到剑道控件，例如下拉列表或其他剑道控件。但是当我尝试将数据绑定到 HTML 控件（主要是 img 标签）时。它停止工作并给出一个错误，说“this.parent”不是一个函数。

以下是有效的 HTML：

```
Select Product: <select data-role="dropdownlist" data-value-field="Id" data-text-field="img"
                         data-bind="source: productsSource"></select> 
```

但是绑定到普通`<img>`标签不起作用。简而言之，我需要使用 kendo ui mvvm 将基于 src 值的图像绑定到 div。

请帮帮我。谢谢！！

- 哈迪克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:22:17.840

目前 Kendo MVVM 无法将数据源绑定到 HTML 元素。只有 Kendo UI 小部件可以绑定到`kendo.data.DataSource`. 使用小部件，例如 ListView 将适用于`DIV`：

```
<div data-role="listview" 
     data-template="template"
     data-bind="source: productsSource">
</div>

<script id="template" type="text/x-kendo-template">
   <img data-bind="attr: { src: img }" />
</script> 
```

# c++ - 我在哪里可以下载 pthread.h、semophore.h 和它们的库？

> ID：15943977
> 
> 赞同：2
> 
> 时间：2013-04-11T08:24:30.297
> 
> 标签：c++, c, multithreading

我在哪里可以下载 pthread.h、semophore.h 和它们的 C 库？

我需要下载windows。并请给出VS2010的链接过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:33:37.420

Windows 有自己的线程机制，不依赖于 pthread 等，同样它也有信号量（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686946(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686946(v=vs.85).aspx) )，但是有适用于 windows 的 pthread 端口[http://sourceware.org/pthreads-win32/](http://sourceware.org/pthreads-win32/)，你可以试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:25:14.340

Windows**不**支持`pthread`libray，因为windows**不是**`POSIX`系统

pthread 是 POSIX，它仅适用于 POSIX 系统，如 linux、BSD、Mac OS X 等……但不适用于 windows

您必须对 Windows 使用便携式 pthread 解决方案，就像 Saqlain在他的回答中提供的[解决方案](http://sourceware.org/pthreads-win32/)***一样。***

我不建议使用便携式解决方案，我建议使用您的操作系统提供的方式。而且Windows有自己的方式来管理线程和信号量

**顺便说一句：**使用 POSIX pthread 库不仅仅是包含头文件`pthread.h`，`semophore.h`您还必须使用该库（`*.so`或`*.a`），因为在构建的链接阶段需要它。

# ssrs-2008 - SSRS 报告组

> ID：15943983
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:24:50.643
> 
> 标签：ssrs-2008

我想得到如下的表格结果 ![在此处输入图像描述](https://i.stack.imgur.com/qVeSI.png)

我的查询返回如下结果

![在此处输入图像描述](https://i.stack.imgur.com/zCdbD.png)

任何人都可以建议我使用 SSRS 来做到这一点吗？我尝试过分组，但无法获得预期的输出。我是 ssrs 报告的新手。请为此提供详细的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:17:34.427

设置一个**Tablix**，按*Doctor Code*分组，并基于该组添加一个 Group Header 行。显示此行中除*Product Sampled*之外的所有字段。

在*Product Sampled* **Textbox**中，将**Tablix**直接插入到**Textbox**中。将此**Tablix**设置为仅显示一个详细信息行，设置为显示*Product Sampled*。

*这样做的目的是每个Doctor Code*都有一行，但是在这些组行的每一行中，您将嵌入一个表格来显示每个*Product Sampled*行。由于 *Product Sampled* **Tablix**嵌入在 Group 范围中，因此它将根据需要显示每个*Doctor Code的**Product Sampled*详细信息。

 ***评论后编辑：**

我将用一个简化的例子来演示。首先生成一些样本数据：

![在此处输入图像描述](https://i.stack.imgur.com/q46Dm.png)

接下来，根据**DoctorCode**设置一个包含组的表，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/zT7hp.png)

请注意，我们还没有填写**ProductSampled**。

接下来，转到 Toolbox 并将一个表格对象拖到空白的**ProductSampled**单元格中。删除标题和除一列之外的所有列，然后将表中的列设置为**ProductSampled**字段。它应该看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/L0U5H.png)

当您使用示例数据运行此报告时，它会按要求工作：

![在此处输入图像描述](https://i.stack.imgur.com/Cg1T3.png)*

# css - 仅由 CSS 提供带有圆形背景的引导字形图标

> ID：15943984
> 
> 赞同：0
> 
> 时间：2013-04-11T08:24:51.000
> 
> 标签：css, internet-explorer, twitter-bootstrap

我正在尝试将 Bootstrap[字形图标](http://twitter.github.io/bootstrap/base-css.html#icons)用作具有圆形背景的按钮。我想只用css来达到这个目的。我发现了两种可能性（如下），但它在 IE9 兼容模式下不起作用。它有什么棘手并导致 IE 问题？

```
li:nth-child(even) .button-16 {
  background-color: #369;
  border: 2px solid #369;
  border-radius: 16px;
}  
li:nth-child(odd) .button-16:after {
  content: " ";
  display: block;
  height: 16px;
  z-index: -1;
  position: relative;
  background-color: #369;
  border-radius: 16px;
  box-shadow: 0px 0px 1px 0px #369;
  width: 16px;
  left: -1px;
  top: -1px;
} 
```

这是工作[示例](http://jsbin.com/ihejom/4)

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:38:57.727

IE9 兼容模式意味着该站点与较旧的 IE 版本兼容，不幸的是不支持`border-radius`.

有一些像[Css3pie](http://css3pie.com/)这样的黑客攻击。

`:nth-child`更新： IE < 9 也不支持伪类。这里有示例站点，您可以在其中检查主要浏览器如何支持 css [http://reference.sitepoint.com/css/selectorref](http://reference.sitepoint.com/css/selectorref)

# javascript - xpages - 如何从客户端javascript设置范围变量？

> ID：15943985
> 
> 赞同：1
> 
> 时间：2013-04-11T08:24:51.583
> 
> 标签：javascript, variables, scope, xpages, xpages-ssjs

我正在尝试从客户端 JavaScript 设置 XPages 范围变量。我有一个 XPage，其中包含几个使用 Dojo 显示或隐藏的部分。在这个 XPage 上，我有一个执行某些服务器端 JavaScript 的按钮。一旦按钮后面的 SSJS 执行，默认情况下可见的 XPage 部分将再次可见，而不是在单击按钮之前立即可见的部分。我希望在单击按钮之前可见的部分在按钮后面的 SSJS 执行后也可见。

为此，我考虑过使用范围变量 - 使用客户端 JavaScript 计算当前可见的 XPage 的哪个部分，在范围变量中设置此值并在`onClientLoad`XPage 事件中读取范围变量以再次执行此操作部分可见（并隐藏所有其他部分）。但是，我发现无法从客户端 JavaScript 设置范围变量。我试过添加

```
var xyz = "#{javascript:viewScope.put('sectionDisplay','Section')}" 
```

到`onClick`按钮的客户端事件，但这会设置范围变量，而不管按钮是否被单击。

在 XPages 之前，我会使用查询字符串将变量从一个页面传递到另一个页面。我现在该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:45:49.787

您不能以这种方式设置 CSJS 变量：如果您将此代码添加到您的 CSJS，它将在发送到浏览器*之前进行计算。*这就是为什么无论单击按钮如何都设置变量的原因。

但是您可以将一些 SSJS 代码添加到设置 viewScope 变量的按钮中。您可以使用此处所述的参数从浏览器发送值：http: [//xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_events_and_partial_or_full_refresh#Run+a+partial+update+from+client+javascript](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_events_and_partial_or_full_refresh#Run+a+partial+update+from+client+javascript)

**编辑：**

您可以使用SSJS 中的*param*对象访问不同的参数。Fe 如果您在 CSJS 中添加参数*值...*

```
XSP.partialRefreshGet( id, {
    params: { 'value': 'some string'}
}); 
```

...您可以像这样访问 SSJS 中的参数：

```
param.get("value"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T11:54:48.833

取决于您的用例。如果你想设置它的部分/完全刷新，你可以简单地将隐藏编辑放入 XP 中，将其绑定`anyScope.variable_name`并使用 CSJS 设置其值：

```
 var field = document.getElementById("#{id:hiddenInput1}");
  field.value = "new Value"; 
```

每次刷新都会将其值提交给模型，并将在作用域变量中可用。

另一种选择是在 SSJS 的任何地方使用事件处理程序来根据隐藏的输入值或提交的值设置范围变量，如 Sven 的回答中所述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:17:02.570

另一种方法：也许你根本不需要范围变量，如果你只是想隐藏一些东西，你可以将它的样式属性设置为“display:none”。

例如，你有这个 div：`<xp:div id="mydiv">...</xp:div>`

然后您可以在按钮中使用以下 CSJS：

`dojo.byId("#{id:mydiv}").style.display="none"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-07T11:33:21.460

```
XSP.partialRefreshGet( id, {
    params: { 'value': 'some string'}
});

... you can access the parameter in SSJS like this:

param.get("value"); 
```

我将 UNID 从网格传递到对话框。我可以获得 param.get('unid') 但无法将其设置为文档数据源 unid。这样字段将填充来自后端文档的值。有很多字段，所以我想以某种方式填充该数据源，而不必在每个字段中写入值。如何让文档数据源识别 param.unid？我正在尝试使用您描述的隐藏输入，但该值也未提交。那可能吗？

```
XSP.partialRefreshGet(dialogId,
{
    params: xspParams,
    onStart: function(){
        //dojo.style(loadingGifId,'display','block');
        XSP.getElementById("#{id:inputText1}").innerHTML = unid; //not working
        XSP.getElementById("#{id:inputText1}").value = unid; //not working either
    },
    onComplete: function(){
        dijit.byId(dialogId).show();
        //dojo.style(loadingGifId,'display','none');    
}});

<xp:panel id="dialog">
    <input id="inputText1"
        value="#{javascript:sessionScope.personUNID;}">
    </input>

    <xp:this.data>
        <xp:dominoDocument var="docPerson" action="editDocument"
            formName="fUserName">
            <xp:this.documentId><![CDATA[#{javascript:sessionScope.personUNID ;}]]></xp:this.documentId>
        </xp:dominoDocument>
    </xp:this.data>

    <xp:inputText id="cfParams"
        value="#{javascript:param.get('unid');}">
    </xp:inputText>
</xp:panel> 
```

# php - 如何将 HTML5 时间属性输入保存到 My SQL

> ID：15943987
> 
> 赞同：0
> 
> 时间：2013-04-11T08:25:00.647
> 
> 标签：php, mysql, html, types, time

嗨，我对 HTML5 时间属性有疑问。

我的代码看起来像这样，

```
 <input type="time" name="e_time"> 
```

示例输出看起来像这样

```
[e_time] => 19:08 
```

它提供了一个 24 小时格式的数组。但问题是 My SQL 在“时间”数据类型中不接受这个。我该怎么做呢？我尝试添加

```
$time2 = $_POST["e_time"] . ":00"; 
```

并在字符串末尾添加了 :00 ，但仍然失败。谁能建议我如何解决这个问题？谢谢！

# php - 在后数组中没有正确获取单选按钮

> ID：15943996
> 
> 赞同：1
> 
> 时间：2013-04-11T08:25:22.100
> 
> 标签：php, post, radio-button

我有一段代码在通过 Ajax 单击特定按钮时加载。

我给每个输入一个名字，比如`txtname[]`,`country[]`和`radiobtn[]`.

问题是，当我两次填充这三个字段并在**第二次迭代**中选择一个单选按钮然后通过打印帖子数组时`print_r($_POST);`

显示以下结果：

`[txtname] => Array ( [0] => xyz[1] => abc)[country] => Array ( [0] => India[1] => United Kingdom ) [radiobtn] => Array ( [0] => true )`

它不应该显示为：

> [txtname] => 数组 ( [0] => xyz[1] => abc)[country] => 数组 ( [0] => 印度[1] => 英国) **[radiobtn] => 数组 ( [0 ] => ""[1] => 真）**

那么如何知道选择了哪个迭代单选按钮呢？任何帮助表示赞赏。

**HTML**

```
<input type="radio"  name="radiobtn[]" value="true">
<input  type="text" name="txtname[]" >
   <select name="country[]"> 
<option value="country" selected="selected">Select Country</option> 
<option value="United States" >India </option> 
<option value="United Kingdom">United Kingdom</option> 
   </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:18:36.540

您期望两个值为`radiobtn`type 的值`radio`。单选按钮类型应该强制只选择*一项*，因此`radiobtn[]`您尝试填充的数组将*始终*只包含一个值，即`true`. 结果正确显示了这一点：

```
[radiobtn] => Array ( [0] => true ) 
```

您的`radiobtn[]`数组在每次迭代时都会被覆盖，导致只有最后一个结果存储在`$_POST`全局变量中。因此`[]`in`radiobtn[]`是没有意义的，因为永远不会有超过一个值。

对于多个选择，您可能想看看哪个可以为*同名*`type="checkbox"`存储多个值。一个例子是：

 *```
<input type="checkbox" name="btn[]" value="A">A</input>
<input type="checkbox" name="btn[]" value="B">B</input>
<input type="checkbox" name="btn[]" value="C">C</input> 
```*

# java - 合规性验证（正则表达式）

> ID：15943997
> 
> 赞同：1
> 
> 时间：2013-04-11T08:25:31.877
> 
> 标签：java, regex

我的来源

`Matcher matcher = Pattern.compile("[0-9]").matcher("35423523");`

`matcher.matches()`- 现在是假的

但我需要`matcher.matches() - true`- 因为字符串都是数字

或者例如

`Pattern.compile("[0-9A-Za-z]").matcher("35dwedwfeASADdfd423523");`- 必须是真的

或`Pattern.compile("[0-9]").matcher("354ccwq23523");`- 必须为假或`Pattern.compile("[0-9a-z]").matcher("354ccwq23523");`- 必须为真

怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T08:29:17.680

你的正则表达式说字符串只能是一个字符宽，如果你想要更多，你应该使用[重复](http://www.regular-expressions.info/repeat.html)。然后它看起来像这样：`[0-9]+`或`[0-9A-Za-z]+`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:30:46.643

该`matches()`方法[根据模式检查整个区域](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29)。这意味着您的模式需要匹配整个字符串：

```
Matcher matcher = Pattern.compile("[0-9]+").matcher("35423523"); 
```

和

```
Pattern.compile("[0-9A-Za-z]+").matcher("35dwedwfeASADdfd423523"); 
```

从javadocs：

> 返回 true：当且仅当整个区域序列与此匹配器的模式匹配

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T08:32:01.973

```
Pattern.compile("[0-9]+").matcher("35423523"); 
```

**真的**

```
Pattern.compile("[0-9A-Za-z]+").matcher("35dwedwfeASADdfd423523"); 
```

**真的**

```
Pattern.compile("[0-9]+").matcher("354ccwq23523"); 
```

**错误的**

```
Pattern.compile("[0-9a-z]+").matcher("354ccwq23523"); 
```

**真的**

如果你想匹配某些长度，你可以使用`[0-9]{1, 4}`（下限->上限）

# ios - 来自 NSFetchedResultsController 的 AZ 索引，每个字母中都有单独的部分标题？

> ID：15943998
> 
> 赞同：11
> 
> 时间：2013-04-11T08:25:36.750
> 
> 标签：ios, objective-c, core-data, indexing, nsfetchedresultscontroller

我有一个`NSFetchedResultsController`从核心数据结构中获取数据的专辑列表。它目前是由艺术家排序的，所以所有的 A、B 等。我想添加一个索引，以便用户可以快速跳转到每个字母，我正在使用下面的代码来做这件事。问题是部分标题现在也是“A”、“B”、“C”等，这意味着我已经按照字母顺序丢失了部分标题，每个艺术家都在上面（“Adele”、“America” ”、“披头士乐队”等）

我希望索引使用字母 A 到 Z，但部分标题按字母顺序显示艺术家姓名。按下索引中的一个字母会跳转到第一个带有该字母的艺术家。我怎样才能做到这一点（索引中的字母字符，但部分标题的属性不同）？

**编辑：**如果我将 my 设置`sectionNameKeyPath`为我的`author`字段，则 AZ 索引可见，但字母不会与名称同步，例如，如果我点击 S，它会将我带到以 AL 开头的艺术家，或者点击 G 将我带到AB。我不太清楚为什么会这样，也许部分索引搞砸了？

这是我正在使用的代码：

**在我的`NSManagedObject`子类中：**

```
- (NSString *) firstLetter
{
    [self willAccessValueForKey: @"firstLetter"];
    NSString *firstLetter = [[[self author] substringToIndex: 1] uppercaseString];
    [self didAccessValueForKey: @"firstLetter"];
    return firstLetter;
} 
```

**在我的视图控制器中，创建 FRC：**

```
NSFetchedResultsController *byAuthorFRC = [[NSFetchedResultsController alloc] initWithFetchRequest: _fetchRequest
                                                                              managedObjectContext: [[CDManager sharedManager] managedObjectContext]
                                                                                sectionNameKeyPath: @"firstLetter"
                                                                                         cacheName: nil]; 
```

**这是我的`sectionIndexTitlesForTableView:`方法：**

```
- (NSArray *) sectionIndexTitlesForTableView: (UITableView *) tableView
{
    return [self.fetchedResultsController sectionIndexTitles];
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T21:47:36.490

`sectionNameKeyPath:@"author"` *是*正确的参数，因为这就是您希望将表分组为部分的方式。标准实施

```
- (NSArray *) sectionIndexTitlesForTableView: (UITableView *) tableView
{
    return [self.fetchedResultsController sectionIndexTitles];
} 
```

返回每个节标题的第一个字母，因此不需要单独的 `firstLetter`方法。

为了从节索引到节的正确同步，您必须实现表视图数据源方法`tableView:sectionForSectionIndexTitle:atIndex:`。与获取的结果控制器相关的标准实现是：

```
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    return [self.fetchedResultsController sectionForSectionIndexTitle:title atIndex:index];
} 
```

**编辑**：

迅速：

```
func sectionIndexTitlesForTableView(tableView: UITableView) -> [String]? {
    return fetchedResultsController.sectionIndexTitles
}

func tableView(tableView: UITableView, sectionForSectionIndexTitle title: String, atIndex index: Int) -> Int {
    return fetchedResultsController.sectionForSectionIndexTitle(title, atIndex: index)
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-11T10:23:38.980

**斯威夫特 2**

将此添加`var`到您的`NSManagedObject`

```
class Adherent: NSManagedObject {

    var initialNom: String {
        self.willAccessValueForKey("initialNom")
        let initial = (self.nom as NSString).substringToIndex(1)
        self.didAccessValueForKey("initialNom")
        return initial
    }

} 
```

然后在您的`NSFetchedResultsController`构造函数中使用它（不要忘记使用“真实”属性进行**排序）**

```
let nomSort = NSSortDescriptor(key: "nom", ascending: true)
request.sortDescriptors = [nomSort]

self.fetchedResultController = NSFetchedResultsController(
    fetchRequest: request, 
    managedObjectContext: managedObjectContext, 
    sectionNameKeyPath: "initialNom", 
    cacheName: nil) 
```

在您的**表格视图**中，实现（至少）这些：

```
func numberOfSectionsInTableView(tableView: UITableView) -> Int {
    return self.fetchedResultController.sections!.count
}

func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    let sections = self.fetchedResultController.sections!
    let sectionInfo = sections[section]
    return sectionInfo.numberOfObjects
}

func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {
    [...]
}

func sectionIndexTitlesForTableView(tableView: UITableView) -> [String]? {
    return self.fetchedResultController.sectionIndexTitles
}

func tableView(tableView: UITableView, sectionForSectionIndexTitle title: String, atIndex index: Int) -> Int {
    return self.fetchedResultController.sectionForSectionIndexTitle(title, atIndex: index)
}

func tableView(tableView: UITableView, titleForHeaderInSection section: Int) -> String? {
    return self.fetchedResultController.sectionIndexTitles[section]
} 
```