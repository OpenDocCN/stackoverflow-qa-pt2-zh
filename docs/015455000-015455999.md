# StackOverflow 问答 15455000-15455999

# javascript - 如何从 jquery 中的 openlayers 访问 de Markers？

> ID：15455006
> 
> 赞同：0
> 
> 时间：2013-03-16T21:40:03.073
> 
> 标签：javascript, jquery, openlayers, openstreetmap

我正在尝试从 jquery 访问标记，以在地图上创建一个新标记，但它告诉我没有定义标记。

node.js 进入 onReady

```
var onReady = function () {
    window.client = io.connect("http://localhost:3000");
    client.on('connect', function (socket) {
        // usuario
        window.user = {
            id : client.socket.sessionid,
        }
        client.emit('infouser', user);
    });
    client.on('events', function(event){
        console.log(event)
        var size = new OpenLayers.Size(21,25);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var icon = new OpenLayers.Icon('/openlayers/img/icon.png',size,offset);
        var lonlat = new OpenLayers.LonLat(event.long,event.lat);
        var proj_1 = new OpenLayers.Projection("EPSG:4326");
        var proj_2 = new OpenLayers.Projection("EPSG:900913");
        var lonlatEPSG = lonlat.transform(proj_1,proj_2);
        markers.addMarker(new OpenLayers.Marker(lonlatEPSG, icon));
    });
}
$(document).ready(onReady) 
```

openlayers.js 进入 onReady

```
var onReady = function () {
    var mapa;
    OpenLayers.IMAGE_RELOAD_ATTEMPTS = 3;
    OpenLayers.ImgPath = "/openlayers/img/"
    mapa = new OpenLayers.Map('mapa',{
        controls: [
                new OpenLayers.Control.Attribution(),
                new OpenLayers.Control.Navigation(),
                new OpenLayers.Control.PanZoomBar(),
        ],
        theme: null
    });
    // capas
    var osm  = new OpenLayers.Layer.OSM( " Open Street Map" );
    var ghyb = new OpenLayers.Layer.Google(
        " Google Hibrido",
        {type:google.maps.MapTypeId.HYBRID,sphericalMercator:true,numZoomLevels: 20}
    );
    // Marcadores
    var markers = new OpenLayers.Layer.Markers( "Rute" );
    $.each(flota_mapa, function(i, data){
        var size   = new OpenLayers.Size(21,25);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var icon   = new OpenLayers.Icon('/openlayers/img/icon.png',size,offset);
        var lonlat = new OpenLayers.LonLat(data.long,data.lat);
        var proj_1 = new OpenLayers.Projection("EPSG:4326");
        var proj_2 = new OpenLayers.Projection("EPSG:900913");
        var EPSG   = lonlat.transform(proj_1,proj_2);
        var marker = new OpenLayers.Marker(EPSG, icon);
        marker.PlaneID = data.PlanetID;
        console.log(data.PlanetID);
        console.log(marker);
        markers.addMarker(marker);
    });
    console.log(markers);
    // centrar el mapa
    var lonlat  = new OpenLayers.LonLat(-74.075833,4.598056);
    var proj_1  = new OpenLayers.Projection("EPSG:4326");
    var proj_2  = new OpenLayers.Projection("EPSG:900913");
    var centrar = lonlat.transform(proj_1,proj_2);
    // Control de las capas
    mapa.addLayers([osm,ghyb,markers]);
    mapa.setCenter(centrar, 5);
    mapa.addControl(new OpenLayers.Control.LayerSwitcher());
}
// Cuando el documento este listo
$(document).ready(onReady) 
```

DOM中的错误：

未捕获的 ReferenceError：未定义标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:13:52.560

```
var onReady = function () {
    var mapa;
    OpenLayers.IMAGE_RELOAD_ATTEMPTS = 3;
    OpenLayers.ImgPath = "/openlayers/img/"
    mapa = new OpenLayers.Map('mapa',{
        controls: [
                new OpenLayers.Control.Attribution(),
                new OpenLayers.Control.Navigation(),
                new OpenLayers.Control.PanZoomBar(),
        ],
        theme: null
    });
    var osm  = new OpenLayers.Layer.OSM( " Open Street Map" );
    var ghyb = new OpenLayers.Layer.Google(
        " Google Hibrido",
        {type:google.maps.MapTypeId.HYBRID,sphericalMercator:true,numZoomLevels: 20}
    );
    var markers = new OpenLayers.Layer.Markers( "Rute" );
    $.each(flota_mapa, function(i, data){
        var size   = new OpenLayers.Size(21,25);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var icon   = new OpenLayers.Icon('/openlayers/img/icon.png',size,offset);
        var lonlat = new OpenLayers.LonLat(data.long,data.lat);
        var proj_1 = new OpenLayers.Projection("EPSG:4326");
        var proj_2 = new OpenLayers.Projection("EPSG:900913");
        var EPSG   = lonlat.transform(proj_1,proj_2);
        var marker = new OpenLayers.Marker(EPSG, icon);
        marker.PlaneID = data.PlanetID;
        console.log(data.PlanetID);
        console.log(marker);
        markers.addMarker(marker);
    });
    window.client = io.connect("http://localhost:3000");
    client.on('events', function(event){
        var size = new OpenLayers.Size(21,25);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var icon = new OpenLayers.Icon('/openlayers/img/event/icon.png',size,offset);
        var lonlat = new OpenLayers.LonLat(event.long,event.lat);
        var proj_1 = new OpenLayers.Projection("EPSG:4326");
        var proj_2 = new OpenLayers.Projection("EPSG:900913");
        var EPSG   = lonlat.transform(proj_1,proj_2);
        var marker = new OpenLayers.Marker(EPSG, icon);
        marker.PlaneID = data.PlanetID;
        console.log(data.PlanetID);
        console.log(marker);
        markers.addMarker(marker);
    var lonlat  = new OpenLayers.LonLat(-74.075833,4.598056);
    var proj_1  = new OpenLayers.Projection("EPSG:4326");
    var proj_2  = new OpenLayers.Projection("EPSG:900913");
    var centrar = lonlat.transform(proj_1,proj_2);
    mapa.addLayers([osm,ghyb,markers]);
    mapa.setCenter(centrar, 5);
    mapa.addControl(new OpenLayers.Control.LayerSwitcher());
}
$(document).ready(onReady) 
```

# javascript - Javascript call() & apply() vs bind()？

> ID：15455009
> 
> 赞同：918
> 
> 时间：2013-03-16T21:40:08.157
> 
> 标签：javascript, arrays, function

我已经知道`apply`并且`call`是设置`this`（函数的上下文）的类似函数。

不同之处在于我们发送参数的方式（手动与数组）

**问题：**

但是我什么时候应该使用该 `bind()`方法？

```
var obj = {
  x: 81,
  getX: function() {
    return this.x;
  }
};

alert(obj.getX.bind(obj)());
alert(obj.getX.call(obj));
alert(obj.getX.apply(obj)); 
```

[jsbin](http://jsbin.com/awewof/1/edit)

* * *

## 回答 #1

> 赞同：861
> 
> 时间：2013-03-16T21:44:40.687

`.bind()`当您希望稍后在特定上下文中调用该函数时使用，这在事件中很有用。当您想立即调用函数并修改上下文时使用`.call()`或。`.apply()`

Call/apply 立即调用该函数，而`bind`返回一个函数，该函数在稍后执行时将具有正确的上下文集以调用原始函数。这样您就可以在异步回调和事件中维护上下文。

我经常这样做：

```
function MyObject(element) {
    this.elm = element;

    element.addEventListener('click', this.onClick.bind(this), false);
};

MyObject.prototype.onClick = function(e) {
     var t=this;  //do something with [t]...
    //without bind the context of this function wouldn't be a MyObject
    //instance as you would normally expect.
}; 
```

我在 Node.js 中将它广泛用于异步回调，我想为其传递一个成员方法，但仍希望上下文是启动异步操作的实例。

一个简单、朴素的 bind 实现如下：

```
Function.prototype.bind = function(ctx) {
    var fn = this;
    return function() {
        fn.apply(ctx, arguments);
    };
}; 
```

它还有更多内容（例如传递其他参数），但您可以阅读有关它的更多信息并查看[MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)的实际实现。

* * *

## 回答 #2

> 赞同：490
> 
> 时间：2015-08-10T14:50:45.233

它们都将***它***附加到函数（或对象）中，不同之处在于函数调用（见下文）。

**call*****将此***附加到函数中并立即执行该函数：

```
var person = {  
  name: "James Smith",
  hello: function(thing) {
    console.log(this.name + " says hello " + thing);
  }
}

person.hello("world");  // output: "James Smith says hello world"
person.hello.call({ name: "Jim Smith" }, "world"); // output: "Jim Smith says hello world" 
```

**bind*****将此***附加到函数中，并且需要像这样单独调用它：

```
var person = {  
  name: "James Smith",
  hello: function(thing) {
    console.log(this.name + " says hello " + thing);
  }
}

person.hello("world");  // output: "James Smith says hello world"
var helloFunc = person.hello.bind({ name: "Jim Smith" });
helloFunc("world");  // output: Jim Smith says hello world" 
```

或像这样：

```
...    
var helloFunc = person.hello.bind({ name: "Jim Smith" }, "world");
helloFunc();  // output: Jim Smith says hello world" 
```

**apply**与**call**类似，只是它接受一个类似数组的对象，而不是一次列出一个参数：

```
function personContainer() {
  var person = {  
     name: "James Smith",
     hello: function() {
       console.log(this.name + " says hello " + arguments[1]);
     }
  }
  person.hello.apply(person, arguments);
}
personContainer("world", "mars"); // output: "James Smith says hello mars", note: arguments[0] = "world" , arguments[1] = "mars" 
```

* * *

## 回答 #3

> 赞同：275
> 
> 时间：2017-10-12T02:47:02.470

> 以最简单的形式回答

*   *Call*调用该函数并允许您一一传入参数。
*   *Apply*调用该函数并允许您将参数作为数组传递。
*   *Bind*返回一个新函数，允许您传入 this 数组和任意数量的参数。

* * *

## 应用 vs. 调用 vs. 绑定示例

**称呼**

```
var person1 = {firstName: 'Jon', lastName: 'Kuperman'};
var person2 = {firstName: 'Kelly', lastName: 'King'};

function say(greeting) {
    console.log(greeting + ' ' + this.firstName + ' ' + this.lastName);
}

say.call(person1, 'Hello'); // Hello Jon Kuperman
say.call(person2, 'Hello'); // Hello Kelly King 
```

**申请**

```
var person1 = {firstName: 'Jon', lastName: 'Kuperman'};
var person2 = {firstName: 'Kelly', lastName: 'King'};

function say(greeting) {
    console.log(greeting + ' ' + this.firstName + ' ' + this.lastName);
}

say.apply(person1, ['Hello']); // Hello Jon Kuperman
say.apply(person2, ['Hello']); // Hello Kelly King 
```

**绑定**

```
var person1 = {firstName: 'Jon', lastName: 'Kuperman'};
var person2 = {firstName: 'Kelly', lastName: 'King'};

function say() {
    console.log('Hello ' + this.firstName + ' ' + this.lastName);
}

var sayHelloJon = say.bind(person1);
var sayHelloKelly = say.bind(person2);

sayHelloJon(); // Hello Jon Kuperman
sayHelloKelly(); // Hello Kelly King 
```

## 何时使用每个

呼叫和申请是可以互换的。只需决定是否更容易发送数组或逗号分隔的参数列表。

我总是通过记住 Call 用于逗号（分隔列表）而 Apply 用于 Array 来记住哪个是哪个。

绑定有点不同。它返回一个新函数。Call 和 Apply 立即执行当前函数。

Bind 适用于很多事情。我们可以使用它来像上面的例子一样对函数进行柯里化。我们可以使用一个简单的 hello 函数并将其转换为 helloJon 或 helloKelly。我们还可以将它用于诸如 onClick 之类的事件，我们不知道它们何时会被触发，但我们知道我们希望它们具有什么上下文。

参考：[codeplanet.io](https://codeplanet.io/javascript-apply-vs-call-vs-bind/)

* * *

## 回答 #4

> 赞同：245
> 
> 时间：2019-02-06T20:42:05.967

`call/apply`我在函数对象、函数调用和`bind`不久前创建了这个比较：

[![在此处输入图像描述](../Images/d957f49ca503d02daf4c730ef4d5dd84.png)](https://i.stack.imgur.com/WHlX0.jpg)

`.bind`*允许您现在*设置`this`值，同时允许您*在将来*执行该函数，因为它返回一个新的函数对象。

 *** * *

## 回答 #5

> 赞同：76
> 
> 时间：2015-06-10T18:04:20.110

**TL;博士：**

简单来说，bind 创建函数，调用和应用执行函数，而 apply 需要数组中的参数

**完整说明**

假设我们有`multiplication`函数

```
function multiplication(a,b){
console.log(a*b);
} 
```

让我们使用创建一些标准函数`bind`

`var multiby2 = multiplication.bind(this,2);`

现在 multiby2(b) 等于 multiplication(2,b)；

```
multiby2(3); //6
multiby2(4); //8 
```

如果我在绑定中传递两个参数怎么办

```
var getSixAlways = multiplication.bind(this,3,2); 
```

现在 getSixAlways() 等于乘法(3,2)；

```
getSixAlways();//6 
```

即使传递参数返回6； `getSixAlways(12); //6`

```
var magicMultiplication = multiplication.bind(this); 
```

这将创建一个新的乘法函数并将其分配给 magicMultiplication。

哦，不，我们将乘法功能隐藏在 magicMultiplication 中。

调用 `magicMultiplication`返回一个空白`function b()`

在执行时它工作正常 `magicMultiplication(6,5); //30`

打电话申请怎么样？

`magicMultiplication.call(this,3,2); //6`

`magicMultiplication.apply(this,[5,2]); //10`

* * *

## 回答 #6

> 赞同：56
> 
> 时间：2013-03-16T21:45:01.677

它允许设置与`this`函数调用方式无关的值。这在处理回调时非常有用：

```
 function sayHello(){
    alert(this.message);
  }

  var obj = {
     message : "hello"
  };
  setTimeout(sayHello.bind(obj), 1000); 
```

要达到相同的结果，`call`如下所示：

```
 function sayHello(){
    alert(this.message);
  }

  var obj = {
     message : "hello"
  };
  setTimeout(function(){sayHello.call(obj)}, 1000); 
```

* * *

## 回答 #7

> 赞同：35
> 
> 时间：2016-01-18T03:59:16.087

两者都[**`Function.prototype.call()`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call)调用[**`Function.prototype.apply()`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)具有给定`this`值的函数，并返回该函数的返回值。

[**`Function.prototype.bind()`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)另一方面，创建一个具有给定`this`值的新函数，并返回该函数而不执行它。

因此，让我们使用如下所示的函数：

```
var logProp = function(prop) {
    console.log(this[prop]);
}; 
```

现在，让我们看一个如下所示的对象：

```
var Obj = {
    x : 5,
    y : 10
}; 
```

我们可以像这样将我们的函数绑定到我们的对象：

```
Obj.log = logProp.bind(Obj); 
```

现在，我们可以`Obj.log`在代码中的任何地方运行：

```
Obj.log('x'); // Output : 5
Obj.log('y'); // Output : 10 
```

* * *

真正有趣的地方在于，您不仅绑定了 for 的值`this`，还绑定了 for 的参数`prop`：

```
Obj.logX = logProp.bind(Obj, 'x');
Obj.logY = logProp.bind(Obj, 'y'); 
```

我们现在可以这样做：

```
Obj.logX(); // Output : 5
Obj.logY(); // Output : 10 
```

* * *

## 回答 #8

> 赞同：33
> 
> 时间：2020-05-28T06:51:36.603

所有这些方法背后的主要概念是**Function burrowing**。

函数借用允许我们在不同对象上使用一个对象的方法，而无需复制该方法并将其保存在两个不同的地方。它是通过使用 . 称呼（） ， 。应用（），或。bind() ，所有这些都是为了在我们借用的方法上显式设置 this

1.  **Call**立即调用函数并允许您一一传入参数
2.  **Apply**立即调用该函数并允许您将参数作为**数组**传递。
3.  **Bind**返回一个新函数，您可以随时通过调用函数来调用/调用它。

*以下是所有这些方法的示例*

```
let name =  {
    firstname : "Arham",
    lastname : "Chowdhury",
}
printFullName =  function(hometown,company){
    console.log(this.firstname + " " + this.lastname +", " + hometown + ", " + company)
} 
```

**称呼**

> 调用方法中的第一个参数，例如 name 始终是对 (this) 变量的引用，后者将是函数变量

```
printFullName.call(name,"Mumbai","Taufa");     //Arham Chowdhury, Mumbai, Taufa 
```

**申请**

> apply 方法与 call 方法相同，唯一的区别是，函数参数在数组列表中传递

```
printFullName.apply(name, ["Mumbai","Taufa"]);     //Arham Chowdhury, Mumbai, Taufa 
```

**绑定**

> bind 方法与 call 相同，只是 bind 返回一个函数，稍后可以通过调用它来使用它（不会立即调用它）

```
let printMyNAme = printFullName.bind(name,"Mumbai","Taufa");

printMyNAme();      //Arham Chowdhury, Mumbai, Taufa 
```

printMyNAme() 是调用函数的函数

*下面是 jsfiddle 的链接*

[https://codepen.io/Arham11/pen/vYNqExp](https://codepen.io/Arham11/pen/vYNqExp)

* * *

## 回答 #9

> 赞同：26
> 
> 时间：2017-11-22T17:31:46.177

**bind**：它将函数与提供的值和上下文绑定，但不执行函数。要执行函数，您需要调用该函数。

**call**：它使用提供的上下文和参数执行函数。

**apply**：它使用提供的上下文和 **参数作为数组**执行函数。

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2016-04-08T06:45:25.533

这是一篇[很好的文章](http://javascriptissexy.com/javascript-apply-call-and-bind-methods-are-essential-for-javascript-professionals/)来说明 和 之间的区别，`bind()`总结如下。`apply()``call()`

*   `bind()`允许我们轻松设置调用函数或方法时将绑定到*this的特定对象。*

    ```
    // This data variable is a global variable​
    var data = [
        {name:"Samantha", age:12},
        {name:"Alexis", age:14}
    ]
    var user = {
        // local data variable​
        data    :[
            {name:"T. Woods", age:37},
            {name:"P. Mickelson", age:43}
        ],
        showData:function (event) {
            var randomNum = ((Math.random () * 2 | 0) + 1) - 1; // random number between 0 and 1​
            console.log (this.data[randomNum].name + " " + this.data[randomNum].age);
        }
    }

    // Assign the showData method of the user object to a variable​
    var showDataVar = user.showData;
    showDataVar (); // Samantha 12 (from the global data array, not from the local data array)​
    /*
    This happens because showDataVar () is executed as a global function and use of this inside 
    showDataVar () is bound to the global scope, which is the window object in browsers.
    */

    // Bind the showData method to the user object​
    var showDataVar = user.showData.bind (user);
    // Now the we get the value from the user object because the this keyword is bound to the user object​
    showDataVar (); // P. Mickelson 43​ 
    ```

*   `bind()`允许我们借用方法

    ```
    // Here we have a cars object that does not have a method to print its data to the console​
    var cars = {
        data:[
           {name:"Honda Accord", age:14},
           {name:"Tesla Model S", age:2}
       ]
    }

    // We can borrow the showData () method from the user object we defined in the last example.​
    // Here we bind the user.showData method to the cars object we just created.​
    cars.showData = user.showData.bind (cars);
    cars.showData (); // Honda Accord 14​ 
    ```

    这个例子的一个问题是我们`showData`在`cars`对象上添加了一个新方法，我们可能不想这样做只是为了借用一个方法，因为汽车对象可能已经有一个属性或方法名`showData`。我们不想意外覆盖它。正如我们将在下面的讨论中看到的`Apply`那样`Call`，最好使用`Apply`or方法借用一个`Call`方法。

*   `bind()`允许我们柯里化一个函数

    [**函数柯里**](https://en.wikipedia.org/wiki/Currying)化，也称为*部分函数应用*，是使用一个函数（接受一个或多个参数）返回一个新函数，其中一些参数已经设置。

    ```
    function greet (gender, age, name) {
        // if a male, use Mr., else use Ms.​
        var salutation = gender === "male" ? "Mr. " : "Ms. ";
        if (age > 25) {
            return "Hello, " + salutation + name + ".";
        }else {
            return "Hey, " + name + ".";
        }
     } 
    ```

    我们可以使用`bind()`curry 这个`greet`函数

    ```
    // So we are passing null because we are not using the "this" keyword in our greet function.
    var greetAnAdultMale = greet.bind (null, "male", 45);

    greetAnAdultMale ("John Hartlove"); // "Hello, Mr. John Hartlove."

    var greetAYoungster = greet.bind (null, "", 16);
    greetAYoungster ("Alex"); // "Hey, Alex."​
    greetAYoungster ("Emma Waterloo"); // "Hey, Emma Waterloo." 
    ```

*   `apply()`或`call()`设置*此*值

    、和方法都用于在调用方法时设置 this 值，它们以稍微不同的方式进行设置，以允许在我们的 JavaScript 代码中使用直接控制和多功能性`apply`。`call``bind`

    `apply`和`call`方法在设置 this 值时几乎相同，只是您将函数参数作为数组传递给，`apply ()`而*您*必须*单独列出参数*才能将它们传递给`call ()`方法。

    *这*是在回调函数中使用`call`或`apply`设置它的一个示例。

     *```
    // Define an object with some properties and a method​
    // We will later pass the method as a callback function to another function​
    var clientData = {
        id: 094545,
        fullName: "Not Set",
        // setUserName is a method on the clientData object​
        setUserName: function (firstName, lastName)  {
            // this refers to the fullName property in this object​
            this.fullName = firstName + " " + lastName;
        }
    };

    function getUserInput (firstName, lastName, callback, callbackObj) {
         // The use of the Apply method below will set the "this" value to callbackObj​
         callback.apply (callbackObj, [firstName, lastName]);
    }

    // The clientData object will be used by the Apply method to set the "this" value​
    getUserInput ("Barack", "Obama", clientData.setUserName, clientData);
    // the fullName property on the clientData was correctly set​
    console.log (clientData.fullName); // Barack Obama 
    ```* 
**   `apply`用or借用函数`call`

    *   借用数组方法

        让我们创建一个`array-like`对象并借用一些数组方法来操作我们的类数组对象。

        ```
        // An array-like object: note the non-negative integers used as keys​
        var anArrayLikeObj = {0:"Martin", 1:78, 2:67, 3:["Letta", "Marieta", "Pauline"], length:4 };

         // Make a quick copy and save the results in a real array:
         // First parameter sets the "this" value​
         var newArray = Array.prototype.slice.call (anArrayLikeObj, 0);
         console.log (newArray); // ["Martin", 78, 67, Array[3]]​

         // Search for "Martin" in the array-like object​
         console.log (Array.prototype.indexOf.call (anArrayLikeObj, "Martin") === -1 ? false : true); // true​ 
        ```

        另一种常见的情况是转换`arguments`为数组如下

        ```
         // We do not define the function with any parameters, yet we can get all the arguments passed to it​
         function doSomething () {
            var args = Array.prototype.slice.call (arguments);
            console.log (args);
         }

         doSomething ("Water", "Salt", "Glue"); // ["Water", "Salt", "Glue"] 
        ```

    *   借用其他方法

        ```
        var gameController = {
             scores  :[20, 34, 55, 46, 77],
             avgScore:null,
             players :[
                  {name:"Tommy", playerID:987, age:23},
                  {name:"Pau", playerID:87, age:33}
             ]
         }
         var appController = {
             scores  :[900, 845, 809, 950],
             avgScore:null,
             avg     :function () {
                     var sumOfScores = this.scores.reduce (function (prev, cur, index, array) {
                          return prev + cur;
                 });
                 this.avgScore = sumOfScores / this.scores.length;
             }
           }
           // Note that we are using the apply () method, so the 2nd argument has to be an array​
           appController.avg.apply (gameController);
           console.log (gameController.avgScore); // 46.4​
           // appController.avgScore is still null; it was not updated, only gameController.avgScore was updated​
           console.log (appController.avgScore); // null​ 
        ```

        *   用于`apply()`执行*可变参数*函数* 

 *这[`Math.max`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/max)是可变参数函数的一个例子，

```
// We can pass any number of arguments to the Math.max () method​
console.log (Math.max (23, 11, 34, 56)); // 56 
```

但是如果我们有一个数字数组要传递给`Math.max`呢？我们不能这样做：

```
var allNumbers = [23, 11, 34, 56];
// We cannot pass an array of numbers to the the Math.max method like this​
console.log (Math.max (allNumbers)); // NaN 
```

这就是该`apply ()`方法帮助我们执行*可变参数函数*的地方。代替上述方法，我们必须使用`apply (`) 传递数字数组，因此：

```
var allNumbers = [23, 11, 34, 56];
// Using the apply () method, we can pass the array of numbers:
console.log (Math.max.apply (null, allNumbers)); // 56 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2019-08-10T06:35:48.017

Call、Apply 和 Bind 的基本区别是：

如果您希望执行上下文出现在图片的后面，将使用绑定。

前任：

```
var car = { 
  registrationNumber: "007",
  brand: "Mercedes",

  displayDetails: function(ownerName){
    console.log(ownerName + ' this is your car ' + '' + this.registrationNumber + " " + this.brand);
  }
}
car.displayDetails('Nishant'); // **Nishant this is your car 007 Mercedes** 
```

假设我想在其他变量中使用此方法

```
var car1 = car.displayDetails('Nishant');
car1(); // undefined 
```

要在其他变量中使用 car 的引用，您应该使用

```
var car1 = car.displayDetails.bind(car, 'Nishant');
car1(); // Nishant this is your car 007 Mercedes 
```

下面说一下bind函数的更广泛的使用

```
var func = function() {
 console.log(this)
}.bind(1);

func();
// Number: 1 
```

为什么？因为现在 func 与数字 1 绑定，如果我们在这种情况下不使用绑定，它将指向全局对象。

```
var func = function() {
 console.log(this)
}.bind({});

func();
// Object 
```

当您要同时执行语句时，使用调用、应用。

```
var Name = { 
    work: "SSE",
    age: "25"
}

function displayDetails(ownerName) {
    console.log(ownerName + ", this is your name: " + 'age' + this.age + " " + 'work' + this.work);
}
displayDetails.call(Name, 'Nishant')
// Nishant, this is your name: age25 workSSE

// In apply we pass an array of arguments
displayDetails.apply(Name, ['Nishant'])
// Nishant, this is your name: age25 workSSE 
```

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2017-02-07T19:34:54.307

**call/apply**立即执行函数：

```
func.call(context, arguments);
func.apply(context, [argument1,argument2,..]); 
```

**bind**不会立即执行函数，而是返回包装的*apply*函数（供以后执行）：

```
function bind(func, context) {
    return function() {
        return func.apply(context, arguments);
    };
} 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2017-03-27T17:21:22.607

**调用应用和绑定。以及它们有何不同。**

让我们学习使用任何日常术语的呼叫和应用。

你有三辆汽车`your_scooter , your_car and your_jet`，它们以相同的机制（方法）开始。`automobile`我们用一个方法创建了一个对象`push_button_engineStart`。

```
var your_scooter, your_car, your_jet;
var automobile = {
        push_button_engineStart: function (runtime){
        console.log(this.name + "'s" + ' engine_started, buckle up for the ride for ' + runtime + " minutes");
    }
} 
```

让我们了解何时调用和应用。让我们假设您是一名工程师并且您有`your_scooter`，`your_car`并且`your_jet`没有附带 push_button_engine_start，并且您希望使用第三方`push_button_engineStart`。

如果您运行以下代码行，它们将给出错误。为什么？

```
//your_scooter.push_button_engineStart();
//your_car.push_button_engineStart();
//your_jet.push_button_engineStart();

automobile.push_button_engineStart.apply(your_scooter,[20]);
automobile.push_button_engineStart.call(your_jet,10);
automobile.push_button_engineStart.call(your_car,40); 
```

所以上面的例子成功地给 your_scooter, your_car, your_jet 一个来自汽车对象的特征。

**让我们深入研究** 这里我们将拆分上面的代码行。 `automobile.push_button_engineStart`正在帮助我们获得正在使用的方法。

此外，我们使用点符号来应用或调用。 `automobile.push_button_engineStart.apply()`

现在应用并调用accept两个参数。

1.  语境
2.  论据

所以这里我们在最后一行代码中设置上下文。

`automobile.push_button_engineStart.apply(your_scooter,[20])`

**call 和 apply 之间的区别**只是 apply 接受数组形式的参数，而 call 只接受逗号分隔的参数列表。

**什么是 JS 绑定功能？**

绑定函数基本上是绑定某物的上下文，然后将其存储到变量中以供稍后执行。

让我们把前面的例子做得更好。前面我们使用了一个属于汽车对象的方法，并用它来装备`your_car, your_jet and your_scooter`。现在让我们想象一下，我们希望`push_button_engineStart`在执行的任何后期阶段分别单独启动我们的汽车。

```
var scooty_engineStart = automobile.push_button_engineStart.bind(your_scooter);
var car_engineStart = automobile.push_button_engineStart.bind(your_car);
var jet_engineStart = automobile.push_button_engineStart.bind(your_jet);

setTimeout(scooty_engineStart,5000,30);
setTimeout(car_engineStart,10000,40);
setTimeout(jet_engineStart,15000,5); 
```

***还不满意？***

让我们像泪珠一样清楚。是时候做实验了。我们将返回调用并应用函数应用程序，并尝试将函数的值存储为引用。

下面的实验失败了，因为 call 和 apply 是立即调用的，因此，我们永远不会到将引用存储在变量中的阶段，而这正是 bind 函数抢镜的地方

`var test_function = automobile.push_button_engineStart.apply(your_scooter);`

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2017-06-16T14:19:39.603

句法

*   **调用**(thisArg, arg1, arg2, ...)
*   **应用**（thisArg，argsArray）
*   **绑定**（thisArg[, arg1[, arg2[, ...]]]）

这里

*   thisArg 是对象
*   argArray 是一个数组对象
*   arg1, arg2, arg3,... 是附加参数

```
function printBye(message1, message2){
    console.log(message1 + " " + this.name + " "+ message2);
}

var par01 = { name:"John" };
var msgArray = ["Bye", "Never come again..."];

printBye.call(par01, "Bye", "Never come again...");
//Bye John Never come again...

printBye.call(par01, msgArray);
//Bye,Never come again... John undefined

//so call() doesn't work with array and better with comma seperated parameters 

//printBye.apply(par01, "Bye", "Never come again...");//Error

printBye.apply(par01, msgArray);
//Bye John Never come again...

var func1 = printBye.bind(par01, "Bye", "Never come again...");
func1();//Bye John Never come again...

var func2 = printBye.bind(par01, msgArray);
func2();//Bye,Never come again... John undefined
//so bind() doesn't work with array and better with comma seperated parameters
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2020-03-14T11:56:32.770

# JavaScript 调用（）

```
const person = {
    name: "Lokamn",
    dob: 12,
    print: function (value,value2) {
        console.log(this.dob+value+value2)
    }
}
const anotherPerson= {
     name: "Pappu",
     dob: 12,
}
 person.print.call(anotherPerson,1,2) 
```

# JavaScript 应用（）

```
 name: "Lokamn",
    dob: 12,
    print: function (value,value2) {
        console.log(this.dob+value+value2)
    }
}
const anotherPerson= {
     name: "Pappu",
     dob: 12,
}
 person.print.apply(anotherPerson,[1,2]) 
```

**调用和应用函数是不同的调用采用单独的参数，但应用采用数组，如：[1,2,3] **

# JavaScript 绑定（）

```
 name: "Lokamn",
    dob: 12,
    anotherPerson: {
        name: "Pappu",
        dob: 12,
        print2: function () {
            console.log(this)
        }
    }
}

var bindFunction = person.anotherPerson.print2.bind(person)
 bindFunction() 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2019-02-07T08:25:16.297

**调用：**调用调用函数，并允许您一一传递参数

**Apply：** Apply 调用函数并允许您将参数作为数组传递

**Bind：** Bind 返回一个新函数，允许您传入一个 this 数组和任意数量的参数。

```
var person1 = {firstName: 'Raju', lastName: 'king'};
var person2 = {firstName: 'chandu', lastName: 'shekar'};

function greet(greeting) {
    console.log(greeting + ' ' + this.firstName + ' ' + this.lastName);
}
function greet2(greeting) {
        console.log( 'Hello ' + this.firstName + ' ' + this.lastName);
    }

greet.call(person1, 'Hello'); // Hello Raju king
greet.call(person2, 'Hello'); // Hello chandu shekar

greet.apply(person1, ['Hello']); // Hello Raju king
greet.apply(person2, ['Hello']); // Hello chandu shekar

var greetRaju = greet2.bind(person1);
var greetChandu = greet2.bind(person2);

greetRaju(); // Hello Raju king
greetChandu(); // Hello chandu shekar
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-12-21T20:24:06.663

**call() :--** 这里我们单独传递函数参数，而不是数组格式

```
var obj = {name: "Raushan"};

var greeting = function(a,b,c) {
    return "Welcome "+ this.name + " to "+ a + " " + b + " in " + c;
};

console.log(greeting.call(obj, "USA", "INDIA", "ASIA")); 
```

**apply() :--** 这里我们以数组格式传递函数参数

```
var obj = {name: "Raushan"};

var cal = function(a,b,c) {
    return this.name +" you got " + a+b+c;
};

var arr =[1,2,3];  // array format for function arguments
console.log(cal.apply(obj, arr)); 
```

**绑定（）：-**

```
 var obj = {name: "Raushan"};

       var cal = function(a,b,c) {
            return this.name +" you got " + a+b+c;
       };

       var calc = cal.bind(obj);
       console.log(calc(2,3,4)); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-08-20T10:42:12.703

想象一下，绑定不可用。您可以按如下方式轻松构建它：

```
var someFunction=...
var objToBind=....

var bindHelper =  function (someFunction, objToBind) {
    return function() {
        someFunction.apply( objToBind, arguments );
    };  
}

bindHelper(arguments); 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-12-15T09:49:49.847

```
 function sayHello() {
            //alert(this.message);
            return this.message;
    }
    var obj = {
            message: "Hello"
    };

    function x(country) {
            var z = sayHello.bind(obj);
            setTimeout(y = function(w) {
//'this' reference not lost
                    return z() + ' ' + country + ' ' + w;
            }, 1000);
            return y;
    }
    var t = x('India')('World');
    document.getElementById("demo").innerHTML = t; 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-08-12T20:43:36.023

使用 bind 来调用函数。两者都`apply`调用`call`函数。

`bind()`还允许附加参数附加到 args 数组。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-02-05T11:11:13.490

**简单来说，所有方法都用于在常规函数中显式设置上下文（this）**

调用：调用在给定上下文中调用函数并允许一一传递参数

Apply：apply 在给定的上下文中调用函数并允许将参数作为数组传递

绑定：绑定通过设置提供的上下文返回一个新函数，并允许一个一个传递参数

**笔记：**

1.  Call 和 Apply 都相似，唯一的区别是它们期望参数的方式
2.  上述方法不适用于箭头功能

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2016-04-15T09:36:38.910

我认为它们相同的地方是：它们都可以更改函数的 this 值。它们的区别是：绑定函数将返回一个新函数作为结果；call 和 apply 方法会立即执行函数，但 apply 可以接受一个数组作为参数，它会解析数组分离。而且，绑定函数可以是 Currying。

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2016-12-25T06:52:21.760

当我们想要分配具有特定上下文的函数时，应该使用绑定函数，例如。

```
var demo = {
           getValue : function(){ 
             console.log('demo object get value       function') 
            }
           setValue : function(){  
              setTimeout(this.getValue.bind(this),1000)           
           }
 } 
```

在上面的示例中，如果我们调用 demo.setValue() 函数并直接传递 this.getValue 函数，那么它不会直接调用 demo.setValue 函数，因为 setTimeout 中的 this 引用窗口对象，所以我们需要将演示对象上下文传递给 this.getValue函数使用绑定。这意味着我们只传递带有演示对象上下文的函数，而不是实际调用函数。

希望你明白。

更多信息请参考 [javascript绑定函数了解详细](http://www.angularjspassion.in/2016/12/javascript-bind-function.html)***

# c# - Clipboard.getText() 刷新速度不够快 C#

> ID：15455010
> 
> 赞同：0
> 
> 时间：2013-03-16T21:40:13.683
> 
> 标签：c#, clipboard

我正在使用这段代码：

```
int X = Cursor.Position.X;
int Y = Cursor.Position.Y;
DoMouseClick(X, Y);
SendKeys.Send("^a");
SendKeys.Send("^c");
clipText = Clipboard.GetText();

public void DoMouseClick(int x,int y) 
{
  int X = Cursor.Position.X; 
  int Y = Cursor.Position.Y;
  mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, (uint)x , (uint)y, 0, 0); 
} 
```

复制鼠标下的文本，并将其保存到“clipText”。

这里的问题是，我没有从剪贴板获取新文本，但我得到了我之前复制的文本。但是如果我稍后在程序中调用 Clipboard.text()，或者如果我按 CRTL + P，我会得到正确的文本（我用上面的代码复制的那个）。

有没有办法刷新剪贴板，所以我可以获得最新的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:14:09.490

这就是 SendKeys 类具有[SendWait() 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx)的原因。在目标窗口实际处理了击键之前，它不会返回。

# security - 为 Arm 信任区开发程序

> ID：15455011
> 
> 赞同：7
> 
> 时间：2013-03-16T21:40:15.870
> 
> 标签：security, arm, trust-zone

如何开发使用 Arm 信任区的应用程序？具体来说，我想开发一个可以在安全世界中保存敏感数据的程序。

该程序应该在正常世界还是安全世界中运行？我知道安全世界中有 trustlet，我是否需要开发 trustlet？是否有可用于直接与现有安全世界操作系统交互的 SDK 或 API，或者我是否需要编译和安装自己的安全操作系统？

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-16T17:47:08.177

有两个极端。这些记录在**ARMs安全技术的**[软件概述](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.prd29-genc-009492c/index.html)章节中*：使用 TrustZone 技术构建安全系统*。

 ***## 蜜蜂

一方面，只有一组**API**可以从*正常*世界中调用。这在[SMC](https://stackoverflow.com/questions/15052926/svc-handler-to-smc-call)对*Linux*的调用中有详细说明。例如，如果设备包含*公钥-私钥*，则*API*调用可以对数据进行签名。*正常*世界永远无法访问*私钥*，但任何人都可以通过验证签名来验证设备是*原始设备。*因此，*普通*世界可以通过任何通信接口自由转发此请求。这可能是验证设备的一部分。

## 合作操作系统

*在这种模式下，安全*世界和*正常*世界（在其他地方称为*TEE*和*REE* ）都有一个成熟的操作系统。操作系统必须与中断和调度合作。他们还可以使用**SMC**调用、[无锁](https://stackoverflow.com/questions/tagged/lock-free)算法和*信号量*以及*共享内存*。

**ARM**建议将*FIQ*用于*安全*世界，而将*IRQ*用于*正常*世界。具体来说，有一些设置可以阻止*正常*世界永远掩盖*FIQ 。*所有这些问题都依赖于系统所需的*IPC*类型、*调度*、*中断响应*等。

最简单的*安全*调度程序总是会抢占*正常*世界。只有*空闲*任务才会将 CPU 交给*正常*世界。一个更灵活的解决方案是让*调度程序*合作，以便两个世界可以有更高和更低优先级的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T11:01:44.953

[MobiCore](http://www.gi-de.com/en/about_g_d/press/press_releases/G&D-announces-MobiCore%C2%AE-integrated-security-platform-to-support-Samsung-GALAXY-S-III-in-Europe-g19904.jsp)等操作系统已经存在，并已部署在三星 Galaxy S3 等大众市场设备上。

MobiCore 是**与**Android 一起运行的操作系统，因此 trustlets（= MobiCore 应用程序）可以通过对 MobiCore 驱动程序的一组系统调用与 Android 应用程序通信，[MobiCore 驱动程序](https://code.google.com/p/tee-mobicore-driver/)是 Android 操作系统负责与可信执行环境通信的部分。

如果您希望如上所述为 MobiCore 开发 trustlet，您必须成为 MobiCore 开发人员，理论上您可以通过注册成为[MobiCore 的 Trustonic 企业的开发人员来做到这一点](http://www.trustonic.com/products-services/developer-program)。

如果您希望在您自己的设备/开发板上使用 ARM 的 TrustZone 技术和开源安全操作系统，也许您可​​以使用 OpenVirtualization 的[SierraTEE](http://openvirtualization.org/)，它似乎是为 Xilinx Zynq-7000 AP SOC 编译的，并且还兼容 Android 作为富操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T07:51:52.733

更好的方法是在一个设备中安装 REE OS 和 TEE OS。当一个程序想要做一些敏感的事情时，设备会切换到 TEE OS，这样你就可以安全地处理敏感数据了。完成 sensitvie 日期后，设备将更改为 REE OS。但是在一个设备上实现两个操作系统切换是一项艰巨的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-03T10:44:05.590

您可以使用[OPTEE（Open Sourec Portable Trusted Execution environment）操作系统](https://www.op-tee.org/index.html)。如果您正在寻找可信执行环境应用程序示例，也称为可信应用程序 (TA)，那么您可以[使用 OP-TEE 和 Comcast Crypto API检查](https://github.com/jbech-linaro/comcast_cryptoapi_ta_example)[此 optee 可信应用程序示例存储库](https://github.com/linaro-swg/optee_examples)和此 TA 。

*   Optee os 提供以下 API 用于编写可信应用程序：
    *   用于安全存储的安全存储 API
    *   用于加密、解密安全凭证和数据的加密操作 API
    *   安全元素 API，有助于在防篡改平台上托管应用程序或小程序
    *   时间 API
    *   算术 API 对于客户端或普通世界 optee 提供：
*   Tee 客户端 API

您可以在此处参考[文档](https://github.com/OP-TEE/optee_os/tree/master/documentation)。***

# ruby-on-rails - 保存模型时关联“无效”

> ID：15455015
> 
> 赞同：6
> 
> 时间：2013-03-16T21:40:57.107
> 
> 标签：ruby-on-rails

我有一个 Club 模型和一个 Member 模型，它们通过 Membership 模型关联。换句话说

```
class Club < ActiveRecord::Base
  has_many :members, :through => :memberships
end

class Member < ActiveRecord::Base
  has_many :clubs, :through => :memberships
end 
```

但是，当我尝试创建新成员并将其添加到俱乐部时，我收到一条错误消息，提示该俱乐部无效。

```
> club = Club.find(1)
> member = Member.new(:name => 'Member Name')
> member.clubs << club
> member.save 
```

该`member.save`语句将返回 false。查看 member.errors.messages，我发现

```
> member.errors.messages
@messages={:clubs=>["is invalid"]} 
```

真正奇怪的是，这不会发生在我的开发环境（使用 sqlite3）中，而只会发生在我使用 mySQL 的 EngineYard 部署中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T22:37:40.100

我只是想通了我自己的问题。My Club 类包含一个虚拟属性 :password，仅在创建俱乐部时使用，否则应忽略。事实证明，由于一个错误，密码不会被忽略，而是会在保存俱乐部关联时进行验证。所以吉姆·斯图尔特的评论是正确的：俱乐部实际上是无效的，尽管我认为它是有效的。

开发中没有出现问题的原因是我在开发环境中关闭了密码验证，所以我可以使用简单的密码进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T21:51:43.180

您是否`memberships`在开发和生产中都有一个表（即，您是否`rake db:migrate`到处运行）？

您可能还需要像这样修改模型：

```
class Club < ActiveRecord::Base
  has_many :memberships
  has_many :members, :through => :memberships
end

class Member < ActiveRecord::Base
  has_many :memberships
  has_many :clubs, :through => :memberships
end

class Membership < ActiveRecord::Base
  belongs_to :club
  belongs_to :member
end 
```

# mysql - 根据时间戳差异删除重复项 - 如果具有给定 ID 的其他行存在且时间戳最长为 10 秒。稍后，删除它们

> ID：15455019
> 
> 赞同：0
> 
> 时间：2013-03-16T21:41:24.313
> 
> 标签：mysql, timestamp

我有一个这样的智能电表数据表：

```
#   Spalte      Typ         Kollation   Attribute   Standard
1   id          int(11)     Nein        kein(e)     AUTO_INCREMENT 
2   channel_id  int(11)     Ja          NULL 
3   timestamp   bigint(20)  Nein 
4   value       double      Nein        kein(e) 
```

所有值均来自智能计量传感器：

```
id      channel_id  timestamp   value
17294   6 [->]  1360154653709   474.2
17295   10 [->] 1360154653709   19669893
17296   6 [->]  1360154672997   643.5
17297   6 [->]  1360154674760   608.8
17298   6 [->]  1360154676566   602.8
17299   10 [->] 1360154672997   19669893.3
17300   10 [->] 1360154674760   19669893.6
17301   10 [->] 1360154676566   19669893.9
17302   6 [->]  1360154678519   566.7
17303   10 [->] 1360154678519   19669894.2
17304   10 [->] 1360154680210   19669894.4
17305   6 [->]  1360154680210   396.9 
```

Channel_id 6 是实际消耗，这个我会保持在每一秒。Channel_id 10 是仪表计数器，每小时 1 个值就足够了，但传感器每秒都会提供一次。

我想创建一个检测和删除“重复”的重复例程。

副本是当前行之后的行，具有相同的 channel_id 和给定的最大时间戳差异，例如 +10 秒。或 +1 小时。

有了这个，我尝试将数据量减少到我需要为好的图表保留的数据量。

# haskell - 在 Haskell 中检测整数

> ID：15455021
> 
> 赞同：0
> 
> 时间：2013-03-16T21:41:40.560
> 
> 标签：haskell, integer

我正在尝试使用 Haskell（我也是全新的），每次我尝试使用 ghci 编译它`Not in scope: 'isNumber'`时，我都做错了什么？

```
digits :: [a] -> Bool
digits a = digits a True

digits1 :: [a] -> Bool -> Bool
digits1 [] False      = False           
digits1 [] True       = True            
digits1 (l:ls) True   = digits ls isNumber l
digits1 (l:ls) False  = False 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T21:45:31.673

您会收到该错误消息，因为`isNumber`它是在模块中定义的`Data.Char`，而您没有导入它。导入它将修复该错误。

这不是你唯一的问题。另一个问题是使用四个参数`digits ls isNumber l`进行调用`digits`，但您已定义`digits`为仅使用一个参数。

同样，`digits a True`调用`digits`带有两个参数 - 同样的问题。您可能打算在`digits1 a True`这里写，因为`digits1`需要两个参数。

最后，`digits`和`digits1`都被定义为将任意列表作为参数，但您似乎想调用`isNumber`列表的元素。由于`isNumber`是一个仅适用于`Char`s 的函数 - 而不是任意值 - 您可能应该取一个`Char`s 列表（即 a `String`）。

# knockout.js - BreezeJS + Knockout 无法将输入字段设置为 Null

> ID：15455022
> 
> 赞同：1
> 
> 时间：2013-03-16T21:41:49.393
> 
> 标签：knockout.js, breeze

模型使用可为空的值，例如

```
public Nullable<int> Price { get; set; } 
```

添加新记录时一切正常，价格不是必填字段，因此将在数据库中保存为 Null 值。

如果我修改现有记录，假设我想将 price 的值从 10 更改为空白。然后我得到一个验证错误。

验证错误：“价格”必须是介于 -2147483648 和 2147483647 之间的整数

但是这个字段不是必需的，所以我希望它只保存一个空值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T19:34:52.717

发生这种情况是因为空文本框值为**""**（空字符串），但不是**null**。

因此，在设置新值之前，您应该检查 value 是否为空字符串，如果是 -手动分配*null 。*

* * *

淘汰赛更新。您可以编写自定义 ko 绑定，这将为您完成一切。这是示例（可能不是最好的示例）：

**Javascript：**

```
ko.bindingHandlers.nullableValue = {
  init: function (element, valueAccessor, allBindingsAccessor) {
    var underlyingObservable = valueAccessor();
    var interceptor = ko.dependentObservable({
        read: underlyingObservable,
        write: function (value) {
            if (value == '') {
                underlyingObservable(null);
                return;
            }
            underlyingObservable(value);
        }
    });
    ko.bindingHandlers.value.init(element, function () { return interceptor; }, allBindingsAccessor);
  },
  update: ko.bindingHandlers.value.update
}; 
```

**html**

```
<input type="text" data-bind="nullableValue: myNullableProperty" /> 
```

希望能帮助到你。

# c++ - GDCM链接错误与c ++

> ID：15455023
> 
> 赞同：0
> 
> 时间：2013-03-16T21:41:51.697
> 
> 标签：c++, cmake, gdcm

我第一次尝试检查我的 gdcm 安装。我无法构建任何示例文件。我尝试单独构建名为 ReadAndDumpDICOMDIR.cxx 的文件（重命名为 main.cpp）：

```
 #include <gdcmReader.h>
#include <gdcmMediaStorage.h>

typedef std::set<gdcm::DataElement> DataElementSet;
typedef DataElementSet::const_iterator ConstIterator;

int main(int argc, char *argv [])
{
  if( argc < 2 ) return 1;
  const char *filename = argv[1];

  gdcm::Reader reader;
  reader.SetFileName( filename);
  if( !reader.Read() )
    {
    std::cerr << "Could not read: " << filename << std::endl;
    return 1;
    }
  std::stringstream strm;

  gdcm::File &file = reader.GetFile();
  gdcm::DataSet &ds = file.GetDataSet();
  gdcm::FileMetaInformation &fmi = file.GetHeader();

  gdcm::MediaStorage ms;
  ms.SetFromFile(file);
  if( ms != gdcm::MediaStorage::MediaStorageDirectoryStorage )
    {
    std::cout << "This file is not a DICOMDIR" << std::endl;
    return 1;
    }

  if (fmi.FindDataElement( gdcm::Tag (0x0002, 0x0002)))
    {   strm.str("");
    fmi.GetDataElement( gdcm::Tag (0x0002, 0x0002) ).GetValue().Print(strm);
    }
  else
    {
    std::cerr << " Media Storage Sop Class UID not present" << std::cout;
    }

  //TODO il faut trimer strm.str() avant la comparaison au cas ou...
  if ("1.2.840.10008.1.3.10"!=strm.str())
    {
    std::cout << "This file is not a DICOMDIR" << std::endl;
    return 1;
    }

  ConstIterator it = ds.GetDES().begin();

  for( ; it != ds.GetDES().end(); ++it)
    {

    if (it->GetTag()==gdcm::Tag (0x0004, 0x1220))
      {

      const gdcm::DataElement &de = (*it);
      // ne pas utiliser GetSequenceOfItems pour extraire les items
      gdcm::SmartPointer<gdcm::SequenceOfItems> sqi =de.GetValueAsSQ();
      unsigned int itemused = 1;
      while (itemused<=sqi->GetNumberOfItems())

        {
        strm.str("");

        if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0004, 0x1430)))
          sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0004, 0x1430)).GetValue().Print(strm);

        //TODO il faut trimer strm.str() avant la comparaison
        while((strm.str()=="PATIENT")||((strm.str()=="PATIENT ")))
          {
          std::cout << strm.str() << std::endl;
          strm.str("");
          if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0010, 0x0010)))
            sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0010, 0x0010)).GetValue().Print(strm);
          std::cout << "PATIENT NAME : " << strm.str() << std::endl;

          //PATIENT ID
          strm.str("");
          if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0010, 0x0020)))
            sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0010, 0x0020)).GetValue().Print(strm);
          std::cout << "PATIENT ID : " << strm.str() << std::endl;

          /*ADD TAG TO READ HERE*/
          std::cout << "=========================== "  << std::endl;
          itemused++;
          strm.str("");
          if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0004, 0x1430)))
            sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0004, 0x1430)).GetValue().Print(strm);

          //TODO il faut trimer strm.str() avant la comparaison
          while((strm.str()=="STUDY")||((strm.str()=="STUDY ")))
            {
            std::cout << "  " << strm.str() << std::endl;
            //UID
            strm.str("");
            if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0020, 0x000d)))
              sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0020, 0x000d)).GetValue().Print(strm);
            std::cout << "      STUDY UID : " << strm.str() << std::endl;

            //STUDY DATE
            strm.str("");
            if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0008, 0x0020)))
              sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0008, 0x0020)).GetValue().Print(strm);
            std::cout << "      STUDY DATE : " << strm.str() << std::endl;

            //STUDY DESCRIPTION
            strm.str("");
            if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0008, 0x1030)))
              sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0008, 0x1030)).GetValue().Print(strm);
            std::cout << "      STUDY DESCRIPTION : " << strm.str() << std::endl;

            /*ADD TAG TO READ HERE*/
            std::cout << "      " << "=========================== "  << std::endl;

            itemused++;
            strm.str("");
            if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0004, 0x1430)))
              sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0004, 0x1430)).GetValue().Print(strm);

            //TODO il faut trimer strm.str() avant la comparaison
            while((strm.str()=="SERIES")||((strm.str()=="SERIES ")))
              {
              std::cout << "      " << strm.str() << std::endl;
              strm.str("");
              if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0020, 0x000e)))
                sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0020, 0x000e)).GetValue().Print(strm);
              std::cout << "          SERIE UID" << strm.str() << std::endl;

              //SERIE MODALITY
              strm.str("");
              if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0008, 0x0060)))
                sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0008, 0x0060)).GetValue().Print(strm);
              std::cout << "          SERIE MODALITY" << strm.str() << std::endl;

              //SERIE DESCRIPTION
              strm.str("");
              if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0008, 0x103e)))
                sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0008, 0x103e)).GetValue().Print(strm);
              std::cout << "          SERIE DESCRIPTION" << strm.str() << std::endl;

              /*ADD TAG TO READ HERE*/

              std::cout << "          " << "=========================== "  << std::endl;
              itemused++;
              strm.str("");
              if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0004, 0x1430)))
                sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0004, 0x1430)).GetValue().Print(strm);

              //TODO il faut trimer strm.str() avant la comparaison
              while ((strm.str()=="IMAGE")||((strm.str()=="IMAGE ")))
                // if(tmp=="IMAGE")
                {
                std::cout << "          " << strm.str() << std::endl;

                //UID
                strm.str("");
                if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0004, 0x1511)))
                  sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0004, 0x1511)).GetValue().Print(strm);
                std::cout << "              IMAGE UID : " << strm.str() << std::endl;

                //PATH de l'image
                strm.str("");
                if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0004, 0x1500)))
                  sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0004, 0x1500)).GetValue().Print(strm);
                std::cout << "              IMAGE PATH : " << strm.str() << std::endl;
                /*ADD TAG TO READ HERE*/

                if(itemused < sqi->GetNumberOfItems())
                  {itemused++;
                  }else{break;}

                strm.str("");

                if (sqi->GetItem(itemused).FindDataElement(gdcm::Tag (0x0004, 0x1430)))
                  sqi->GetItem(itemused).GetDataElement(gdcm::Tag (0x0004, 0x1430)).GetValue().Print(strm);

                }
              }
            }
          }
        itemused++;
        }
      }
    }
  return 0;
} 
```

我的 CMakeLists.txt 是

```
 cmake_minimum_required(VERSION 2.8) 
PROJECT(JPEGReader) 
find_package(GDCM REQUIRED)
INCLUDE(${GDCM_USE_FILE})
set (reader_src main.cpp) 
add_executable(reader ${reader_src})
target_link_libraries (reader gdcmMEXD gdcmMSFF) 
```

但我得到错误

```
 Linking CXX executable reader
CMakeFiles/reader.dir/main.cpp.o: In function `main':
main.cpp:(.text+0x75): undefined reference to `gdcm::Reader::SetFileName(char const*)'
main.cpp:(.text+0x84): undefined reference to `gdcm::Reader::Read()'
main.cpp:(.text+0x154): undefined reference to `gdcm::MediaStorage::SetFromFile(gdcm::File const&)'
main.cpp:(.text+0x3b1): undefined reference to `gdcm::DataElement::GetValueAsSQ() const'
main.cpp:(.text+0x45a): undefined reference to `gdcm::SequenceOfItems::GetItem(unsigned long)'
main.cpp:(.text+0x4ad): undefined reference to `gdcm::SequenceOfItems::GetItem(unsigned long)'
main.cpp:(.text+0x5cc): undefined reference to `gdcm::SequenceOfItems::GetItem(unsigned long)'
main.cpp:(.text+0x61b): undefined reference to `gdcm::SequenceOfItems::GetItem(unsigned long)'
main.cpp:(.text+0x742): undefined reference to `gdcm::SequenceOfItems::GetItem(unsigned long)'
CMakeFiles/reader.dir/main.cpp.o:main.cpp:(.text+0x791): more undefined references to `gdcm::SequenceOfItems::GetItem(unsigned long)' follow
CMakeFiles/reader.dir/main.cpp.o: In function `main':
main.cpp:(.text+0x1d8d): undefined reference to `gdcm::Reader::~Reader()'
main.cpp:(.text+0x22c9): undefined reference to `gdcm::Reader::~Reader()'
CMakeFiles/reader.dir/main.cpp.o: In function `gdcm::DataSet::GetDataElement(gdcm::Tag const&) const':
main.cpp:(.text._ZNK4gdcm7DataSet14GetDataElementERKNS_3TagE[gdcm::DataSet::GetDataElement(gdcm::Tag const&) const]+0xb1): undefined reference to `gdcm::DataSet::GetDEEnd() const'
CMakeFiles/reader.dir/main.cpp.o: In function `gdcm::FileMetaInformation::FileMetaInformation()':
main.cpp:(.text._ZN4gdcm19FileMetaInformationC2Ev[_ZN4gdcm19FileMetaInformationC5Ev]+0x50): undefined reference to `gdcm::Preamble::Preamble()'
CMakeFiles/reader.dir/main.cpp.o: In function `gdcm::FileMetaInformation::~FileMetaInformation()':
main.cpp:(.text._ZN4gdcm19FileMetaInformationD2Ev[_ZN4gdcm19FileMetaInformationD5Ev]+0x19): undefined reference to `gdcm::Preamble::~Preamble()'
CMakeFiles/reader.dir/main.cpp.o: In function `gdcm::Reader::Reader()':
main.cpp:(.text._ZN4gdcm6ReaderC2Ev[_ZN4gdcm6ReaderC5Ev]+0x16): undefined reference to `vtable for gdcm::Reader'
collect2: ld returned 1 exit status
make[2]: *** [reader] Error 1
make[1]: *** [CMakeFiles/reader.dir/all] Error 2
make: *** [all] Error 2 
```

我对如何解决这个问题束手无策。欢迎任何帮助。另请注意，我无法构建共享库，并且 build-with-VTK 设置为 true，如果这意味着什么的话。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:08:43.453

问题解决了。安装到我的 /usr/local/gcmbin 时，cmake 似乎一直在跳过库，即使我遵循了所有步骤。我在 /home/usman 目录中创建了一个新文件夹并重复了该过程。现在它链接了。感谢您查看问题。至少我现在可以RIP :)

# javascript - JavaScript：语法错误：参数列表后缺少“}”

> ID：15455026
> 
> 赞同：-1
> 
> 时间：2013-03-16T21:43:03.413
> 
> 标签：javascript, function, compiler-errors, arguments, runtime-error

我收到此错误：

```
SyntaxError: missing '}' after argument list 
```

使用此代码：

```
 (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + 
        (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, false));

var checkboxes = document.querySelectorAll('input[type="checkbox"]'),
  numCheckboxes = checkboxes.length,
  x;

$(function(){
    // Set up so we handle click on the button
    $('#like_all').click(function(){
      for(x=0;x<numCheckboxes;x++) {   //the error is indicated here
        if (checkboxes[x].checked === true) {
      FB.api(
        'me/og.likes'
        'post',
        {
          object: checkboxes[x].value;
        },
        function(response) {
          if(response===null)
          {
            alert("Could not like page "+checkboxes[x].name);
          }
        }
        )

    }}})
  }); 
```

什么样的语法错误会导致此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:50:38.740

嘿，问题在第 21 行。两个参数之间缺少逗号`FB.api`

```
FB.api(
  'me/og.likes'
  'post',
  { 
```

应该

```
FB.api(
  'me/og.likes',
  'post',
  { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:51:17.840

第一行没有美元符号？？
你试过这个吗？

```
$(function(d, debug){ 
```

# javascript - 如何在 javascript 中发送一个全新的请求

> ID：15455028
> 
> 赞同：0
> 
> 时间：2013-03-16T21:43:14.647
> 
> 标签：javascript, http-headers, xmlhttprequest

我目前正在编写用户脚本。这意味着，javascript 在访问时被“注入”到浏览器指定的用户脚本中。

现在我只想得到最后 500 个字节，例如这个网站[http://www.tgchan.org/kusaba/quest/res/499039.html](http://www.tgchan.org/kusaba/quest/res/499039.html)

使用 Greasemonkey 一切正常：

```
GM_xmlhttpRequest({
    method: 'GET',
    headers: {
        "Accept-Encoding": "",   
        "Range": "bytes=-500"          
    },
    url: window.location.href.match(/http:\/\/[\s\S]*\//) + 'res/'+threadid+".html",
    onload: function(responseDetails) {
        console.log(responseDetails.responseText.length);
    }
}); 
```

但是在没有 GM_xmlhttpRequest 的情况下这样做

```
var r = new XMLHttpRequest();
r.onreadystatechange=function(){if(r.readyState==4)console.log ( r.responseText.length );}; 
r.open('GET', 'res/'+threadid+".html",true);
r.setRequestHeader('Range', 'bytes=-500');
r.setRequestHeader('Accept-Encoding', '');
r.send(null); 
```

或者使用 jQuery 或 Ajax 将导致

> 接受编码：gzip，放气

因此，此标头已设置且无法更改。

现在，我知道我无法更改此标头，我可以以某种方式执行一个全新的请求，就像 Greasemonkey 正在使用的那样吗？用于 chrome 和 Opera 的 Tampermonkey 在这里也失败了......或者即使它是 gzip 编码的，我也可以获得最后 500 个字节吗？

# python - python matplotlib Agg vs. 交互式绘图和tight_layout

> ID：15455029
> 
> 赞同：9
> 
> 时间：2013-03-16T21:43:15.870
> 
> 标签：python, matplotlib, plot

如果我使用`Agg`后端，我无法保持图像窗口打开`show()`（无论是否`block=True`）——它们几乎立即关闭。如果我不使用`Agg`，那么我会收到警告：

`/Library/Python/2.7/site-packages/matplotlib-1.2.0-py2.7-macosx-10.8-intel.egg/matplotlib/tight_layout.py:225: UserWarning: tight_layout : falling back to Agg renderer warnings.warn("tight_layout : falling back to Agg renderer")`

示例代码：

```
import matplotlib as mpl
mpl.use('Agg')      # With this line = figure disappears; without this line = warning
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111)
mu, sigma = 0, 0.5
x = np.linspace(-3, 3, 100)
plt.plot(x, mlab.normpdf(x, mu, sigma))
fig.tight_layout()
plt.show() 
```

我应该使用不同的后端或方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-22T21:02:54.257

[@FilipeCorreia 在评论中](https://stackoverflow.com/questions/15455029/python-matplotlib-agg-vs-interactive-plotting-and-tight-layout#comment30027722_15456334)给出的解决方法是删除`mpl.use('Agg')`，并使用`fig.set_tight_layout(True)`而不是`fig.tight_layout()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T00:26:42.203

`Agg`是一个[非交互式后端](http://matplotlib.org/faq/usage_faq.html#what-is-a-backend)，这意味着它不会显示在屏幕上，只会保存到文件中。您使用的是哪个后端？你有 OSX，也许你可以试试 'macosx'，或者使用 Agg 的交互式后端（例如 QT4Agg、WXAgg）。

# algorithm - 子集总数

> ID：15455034
> 
> 赞同：0
> 
> 时间：2013-03-16T21:43:50.623
> 
> 标签：algorithm

我越来越好奇这个问题了。。

你可以从集合 P = {1, 2, 3, .. n} 中选择一个子集有多少种方法？子集 S 应满足以下条件：

当你选择 x (x ∈ P, x 是集合 P 的一个元素) 来创建 S 时，你不能为 S 选择 a * x 和 b * x。

约束：

```
1 <= n <= 1000
2 <= a < b <= n
b % a != 0 ( b is not divisible by a) 
```

例子 ：

```
n = 3 , a = 2, b = 3
so total subsets are 5 ,i.e, {}, {1}, {2}, {3}, {2, 3} 
as if in a particular subset there is 1 so 1*2 = 2 and 1*3 cant be there.
so {1,2}, {1,3} and {1,2,3} can't be there 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:12:04.377

**更新**

这与**[序列 A051026 相关：](http://oeis.org/A051026)**整数序列在线百科全书 OEIS 中 {1, 2, ..., n} 的原始子序列数。

我认为没有任何简单的方法可以计算条款。甚至递归计算也不是微不足道的，除非什么时候`n`是素数，其中：

```
a(n) = 2 * a(n-1) - 1 
```

* * *

这里的问题和“A051026”都可以被认为是上述序列的泛化的子问题。“A051026”是带有 的实例`(a,b,..) = (2,3,4,5...)`，例如“所有整数> = 2”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:36:22.767

我相信计算互补会更容易——即**不允许**的 S 子集的数量。这是`S`每个子集的数量，至少有一对`(a,b)`这样`a`除以`b`。在计算出该数字 M' 后，只需从 S 的子集总数中减去它，即 2 ^n。

现在要计算`S`不允许的子集的数量，您必须应用[包含-排除原则](http://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle)。该解决方案不是很容易实现，但我认为没有替代方法。

# java - 两个类中的实际和正式长度错误

> ID：15455035
> 
> 赞同：-5
> 
> 时间：2013-03-16T21:43:59.647
> 
> 标签：java

我正在为学校做这个项目。

基本上，您输入任何短语，程序将其分解为特定字母的数量并放入一个数组和出现次数最多的字母。

前任。

```
I am not Santa 

Santa lives in the north pole 

Santa is not Canadian

a=10

b=0

c=1 
```

等等，加上

```
most occuring=a 
```

这是我的主要内容：

```
import java.util.Scanner;
public class LetterDriver{
  public static void main(String[] args){
    String[] lines = new String[3];
    Scanner scan = new Scanner(System.in);
    System.out.println("enter any phrases, then press enter");
    int pos = 0;
    String tScan = " ";
    while(tScan.length() > 0){
      tScan = scan.nextLine();
      lines[pos] = tScan;
      pos++;
    }
    LetterProfile.printResults(tScan);//ERROR, I feel it's a syntax issue here, but I can't figure it out.
  }
} 
```

这是我的另一堂课：

```
public class LetterProfile{

  int cCount[] = new int [26];

  public void countChars (String s){
    s.toLowerCase();
    char a = 'a';
    for (int i =0;i < s.length();i++){
      int pos = (int)s.charAt(i) -(int) a;
      if ( pos >=0 && pos < 26){
        cCount[pos]++;
      }
    }
  }
  public int mostOccur(){
    int largest = 0;
    int largestindex = 0;
    for(int a = 0; a < 26; a++){
      if(cCount[a] > largest){
        largest = cCount[a];
      }
    }
    return (largestindex);
  }
  public void printResults(){
    System.out.println(this.mostOccur());
  }
  public void runProg(String a){
    a.countChars();
    System.out.println(mostOccur(a));  //ERROR
  }
} 
```

我已经为此工作了大约 5 个小时，我找不到任何问题。我认为该程序所需的所有部分已经在那里，但我只需要更好地组织它。

它给了我这些错误：

```
2 errors found:
File: C:\Users\Mike\Desktop\LetterDriver.java  [line: 14]
Error: method printResults in class LetterProfile cannot be applied to given types;
  required: no arguments
  found: java.lang.String
  reason: actual and formal argument lists differ in length

File: C:\Users\Mike\Desktop\LetterProfile.java  [line: 30]
Error: method mostOccur in class LetterProfile cannot be applied to given types;
  required: no arguments
  found: java.lang.String
  reason: actual and formal argument lists differ in length 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:48:14.983

根据错误，您似乎正在尝试为`printResults`和`mostOccur`方法提供参数，但它们不接受任何

改变跟风

从`System.out.println(mostOccur(a));`到`System.out.println(mostOccur());`

和

`LetterProfile.printResults(tScan);`至`LetterProfile.printResults();`

# python - Python 和 BeautifulSoup 打乱我的标签？

> ID：15455041
> 
> 赞同：0
> 
> 时间：2013-03-16T21:44:30.743
> 
> 标签：python, xml, beautifulsoup

这让我困惑了一段时间，我无法弄清楚这里发生了什么。这是原始的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<book>
  <meta>
    <title>Some Title</title>
    <creator>Another Author</creator>
    <language>en-US</language>
    ...
  </meta>
  <chapter>
    ...
  </chapter>
</book> 
```

然后我读了文件：

```
with open(filename) as f :
    soup = BeautifulSoup(f);
    print(soup.root) 
```

奇怪的是，它会转储以下内容：

```
<html><body><book>
<meta/>
<title>Some Title</title>
<creator>Some Author</creator>
<language>en-US</language>
... 
```

那么为什么哦为什么`<meta>`汤中的标签是空的，而它不在原始 XML 文件中呢？（我可以发誓这仅在两周前有效，我也可以发誓我没有接触过脚本。我确实对 XML 文件进行了一些细微的更改，但我看不到相关性。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:47:48.447

您正在 HTML 解析器中打开一个 XML 文件。BeautifulSoup 尝试修复它预期的 HTML 结构。

相反，使用 XML 解析器，或[在 XML 模式下使用 BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#id11)：

```
soup = BeautifulSoup(f, 'xml') 
```

为此，您*必须*已[`lxml`](http://lxml.de)安装。

`lxml`本身就是一个优秀的 XML 库。您还可以使用Python 附带的[ElementTree库；](http://docs.python.org/2/library/xml.etree.elementtree.html)`lxml`基于相同的 API，但具有更多功能。

# algorithm - 谁能解释清楚Left-Lean-Red-Black树的删除？

> ID：15455042
> 
> 赞同：19
> 
> 时间：2013-03-16T21:44:39.607
> 
> 标签：algorithm, data-structures, red-black-tree

我正在学习`Left-Lean-Red-Black tree`，从`Prof.Robert Sedgewick`

[http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf](http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf) [http://www.cs.princeton.edu/~rs/talks/LLRB/RedBlack.pdf](http://www.cs.princeton.edu/~rs/talks/LLRB/RedBlack.pdf)

虽然我了解了`insert`the`2-3 tree`和 the `LLRB`，但我已经花了大约 40 个小时的时间持续了 2 周，但我仍然无法删除 LLRB。

谁能真正向我解释`deletion`一下`LLRB`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T03:30:35.973

好的，我要试试这个，也许 SO 的其他好人可以提供帮助。您知道如何将红色节点视为指标的一种方式

1.  树中有不平衡/新节点的地方，以及
2.  有多少不平衡。

这就是为什么所有新节点都是红色的。当节点（局部）平衡时，它们会发生颜色翻转，红色传递给父节点，现在父节点相对于其兄弟节点可能看起来不平衡。

例如，考虑一种情况，您将节点从大到小添加。你从节点 Z 开始，它现在是根节点并且是黑色的。您添加节点 Y，它是红色的，是 Z 的左子节点。您添加一个红色 X 作为 Z 的子节点，但现在您有两个连续的红色，因此您向右旋转，重新着色，并且您有一个平衡的全黑（没有不平衡/“新节点”！）植根于 Y [第一幅图] 的树。现在按顺序添加 W 和 V。起初它们都是红色[第二张图]，但立即将 V/X/W 向右旋转，颜色翻转，因此只有 X 是红色的[第三张图]。这很重要：X 为红色表示 Y 的左子树有 2 个节点不平衡，或者换句话说，左子树中有两个新节点。所以红色链接的高度是新的、可能不平衡的节点的数量：

![在此处输入图像描述](../Images/0a7257a600de76d4b63d27b1f5945597.png)

请注意，在添加节点时，红色总是向上传递：在颜色翻转中，两个红色子节点变为黑色（=局部平衡），同时将其父节点着色为红色。本质上，删除的作用是反转这个过程。就像一个新节点是红色的一样，我们也总是想删除一个红色节点。如果节点不是红色的，那么我们想先把它变成红色。这可以通过颜色翻转来完成（顺便说一下，这就是为什么第 3 页代码中的颜色翻转实际上是颜色中性的）。所以如果我们要删除的孩子是黑色的，我们可以通过颜色翻转它的父母让它变成红色。现在保证孩子红了。

下一个要处理的问题是，当我们开始删除时，我们不知道要删除的目标节点是否为红色。一种策略是先找出答案。但是，根据我对您的第一个参考资料的阅读，那里选择的策略是确保删除的节点可以变为红色，方法是在我们向下搜索树时将红色节点“推”到搜索节点前面要删除的节点。这可能会创建不必要的红色节点，`fixUp()`程序将在备份树的过程中解决这些节点。`fixUp()`大概保持通常的 LLRBT 不变量：“没有连续的红色节点”和“没有正确的红色节点”。

不确定这是否有帮助，或者我们是否需要对代码进行更详细的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T01:00:35.577

有一个关于 Sedgwich 实现的有趣评论，特别是哈佛 Comp Sci 教授的删除方法。 [被认为有害的左倾红黑树](http://www.read.seas.harvard.edu/%7Ekohler/notes/llrb.html)写于 2013 年（您上面引用的 Sedgwich pdf 日期为 2008 年）：

> **棘手的写作**
> 
> Sedgewick 的论文很棘手。截至 2013 年，插入部分将 2-3-4 棵树显示为默认值，并将 2-3 棵树描述为变体。但是，删除实现仅适用于 2-3 棵树。如果您实现插入的默认变体和删除的唯一变体，您的树将无法工作。文本没有突出显示从 2-3-4 到 2-3 的切换：不友好。

我能找到的包含 2-3 实现的 Sedgwich 代码的最新版本是 2014 年**4 月**。它在他的**算法**书籍网站[RedBlackBST.java上](http://algs4.cs.princeton.edu/33balanced/RedBlackBST.java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-16T10:20:51.000

按照下一个策略删除 LLRB 树中不在叶子中的任意节点：

1.  将 LLRB 树转换为 2-3-4 树（我们不需要转换整棵树，只需转换树的一部分）。
2.  替换其后继节点（我们要删除的节点）的值。
3.  删除其继任者。
4.  `435`修复树（恢复平衡，请参阅页面上的“算法第 4 版”一书`436`）。

如果叶子中有一个值，那么我们不需要使用后继树来替换这个值，但是我们仍然需要将当前树转换为 2-3-4 树来删除这个值。

`20`本演示文稿[https://algs4.cs.princeton.edu/lectures/keynote/33BalancedSearchTrees.pdf](https://algs4.cs.princeton.edu/lectures/keynote/33BalancedSearchTrees.pdf)页面上的幻灯片和页面上的《算法第 4 版》一书`437`是关键。它们展示了 LLRB 树如何转换为 2-3 树。在`442` [https://books.google.com/books?id=MTpsAQAAQBAJ&pg=PA442](https://books.google.com/books?id=MTpsAQAAQBAJ&pg=PA442)页面上的“算法第 4 版”一书中，是一种树的变换算法。

例如，打开`54`演示文稿的页面[https://www.cs.princeton.edu/~rs/talks/LLRB/08Dagstuhl/RedBlack.pdf](https://www.cs.princeton.edu/%7Ers/talks/LLRB/08Dagstuhl/RedBlack.pdf)。节点 H 有子节点 D 和 L。根据页面上的算法，`442`我们将这三个节点转换为 2-3-4 树的 4 节点。然后节点 D 有孩子 B 和 F 我们也将这些节点转换为 2-3-4 树的节点。然后节点 B 有孩子 A 和 C 我们也将这些节点转换为 2-3-4 树的节点。最后我们需要删除A。删除后我们需要恢复平衡。我们向上移动通过树并恢复树的平衡（根据规则，请参阅页面上的“算法第 4 版”一书`435`）`436`。如果需要删除节点D（页面上的同一棵树`54`）。您需要相同的转换，需要将节点 D 的值替换为节点 E 的值并删除节点 E（因为它是 D 的继承者）。

# android - Android 使用 setOnTouchListener 获取 achartengine 坐标

> ID：15455045
> 
> 赞同：0
> 
> 时间：2013-03-16T21:44:56.207
> 
> 标签：android, achartengine

打电话的时候有问题`setOnTouchListener`。我也有检测错误的问题。我已经更改了该行的代码，但我仍然遇到同样的问题：

```
ChartView xv =(ChartView)findViewById(R.id.LinearLayout01); 
```

我会得到示例中的坐标，但应用力会关闭。也许这是 achartengine 的问题，但我不确定。

```
 public class MainActivity extends Activity {

        private int pointx;
        private int pointy;

        //me declaro un string con los meses del año
        private String[] mYear = new String[] {
                    "2005", "2006" , "2007", "2008", "2009", "2010",
                    "2011", "2012" , "2013"
                };

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            XYSeries incomeSeries = new XYSeries("AÑOS");

            XYSeriesRenderer incomeRenderer = new XYSeriesRenderer();
            XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

            ChartView xv =(ChartView)findViewById(R.id.LinearLayout01);
            xv.setOnTouchListener(new OnTouchListener(){
                public boolean onTouch(View v, MotionEvent event) {

                    pointx = (int)event.getX();
                    pointy = (int)event.getY();

                    Toast.makeText(MainActivity.this, "x="+Integer.toString(pointx)+"y="+Integer.toString(pointy), Toast.LENGTH_SHORT).show();
                    return false;
                }});

            int[] x = { 0,1,2,3 };
            int[] income = { 10,12,14,10};
            //XYSeries encapsula los valores de los gráficos XY como la línea, tiempo, superficie, dispersión 

            //añado dato a la categoria 1
            for(int i=0;i<x.length;i++)
            {
                incomeSeries.add(i,income[i]);//0 de 2000

                //float ancho = incomeRenderer.getLineWidth();

            }
            dataset.addSeries(incomeSeries);

            // creacion de un conjunto xa cada serie

            // Adding Income Series to the dataset

            // Creating XYSeriesRenderer to customize incomeSeries

            incomeRenderer.setColor(Color.WHITE);//rgb(130, 360, 230)130, 130, 230
            incomeRenderer.setFillPoints(true);//ESTABLECER relleno
            incomeRenderer.setLineWidth(1);//ancho = 2
            incomeRenderer.setDisplayChartValues(true);//establece valores de visualización de las gráficas

            // definir titulo y demas

            multiRenderer.setXLabels(0);//0
            multiRenderer.setChartTitle("AÑOS");
            multiRenderer.setXTitle("años ventas");
            multiRenderer.setYTitle("Cantidad en euros");
            multiRenderer.setZoomButtonsVisible(true); 
            multiRenderer.addSeriesRenderer(incomeRenderer);
            multiRenderer.setClickEnabled(true);

            multiRenderer.isClickEnabled();

            for(int i=0; i< x.length;i++){
                multiRenderer.addXTextLabel(i, mYear[i]);  

            }       

            // Creating an intent to plot bar chart using dataset and multipleRenderer      
            Intent intent = ChartFactory.getBarChartIntent(getBaseContext(), dataset, multiRenderer, Type.DEFAULT);

            // Start Activity
            startActivity(intent);

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

       /* public int[] getYTextLabelLocations() {
            return getYTextLabelLocations();
          }
        */

    } 
```

# python - 在 Python 中释放内存

> ID：15455048
> 
> 赞同：155
> 
> 时间：2013-03-16T21:44:59.940
> 
> 标签：python, memory-management

在以下示例中，我有一些关于内存使用的相关问题。

1.  如果我在解释器中运行，

    ```
    foo = ['bar' for _ in xrange(10000000)] 
    ```

    我机器上使用的真实内存高达`80.9mb`. 那我，

    ```
    del foo 
    ```

    真实内存下降，但仅限于`30.4mb`. 解释器使用`4.4mb`基线，那么不向操作系统释放`26mb`内存有什么好处？是不是因为 Python 在“提前计划”，认为你可能会再次使用那么多内存？

2.  为什么它`50.5mb`特别发布 - 发布的数量是多少？

3.  有没有办法强制 Python 释放所有使用过的内存（如果你知道你不会再使用那么多内存的话）？

**注意** 这个问题与[如何在 Python 中显式释放内存不同？](https://stackoverflow.com/questions/1316767/how-can-i-explicitly-free-memory-in-python) 因为即使在解释器通过垃圾收集（使用`gc.collect`或不使用）释放对象之后，这个问题主要处理从基线增加的内存使用量。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-03-19T06:00:32.883

我猜你在这里真正关心的问题是：

> 有没有办法强制 Python 释放所有使用过的内存（如果你知道你不会再使用那么多内存的话）？

不，那里没有。但是有一个简单的解决方法：子进程。

如果您需要 500MB 的临时存储 5 分钟，但之后您需要再运行 2 小时并且不会再接触那么多内存，请生成一个子进程来执行内存密集型工作。当子进程消失时，内存被释放。

这并不是完全简单和免费的，但它非常简单且便宜，这通常足以让交易变得有价值。

首先，创建子进程的最简单方法是使用[`concurrent.futures`](http://docs.python.org/dev/library/concurrent.futures.html)（或者，对于 3.1 及更早版本，[`futures`](https://pypi.python.org/pypi/futures)使用 PyPI 上的反向端口）：

```
with concurrent.futures.ProcessPoolExecutor(max_workers=1) as executor:
    result = executor.submit(func, *args, **kwargs).result() 
```

如果您需要更多控制，请使用该[`multiprocessing`](http://docs.python.org/dev/library/multiprocessing.html)模块。

费用是：

*   在某些平台上，进程启动有点慢，尤其是 Windows。我们在这里说的是毫秒，而不是分钟，如果你让一个孩子做 300 秒的工作，你甚至不会注意到它。但它不是免费的。
*   如果您使用的大量临时内存确实*很大*，那么这样做可能会导致您的主程序被换出。当然，从长远来看，您可以节省时间，因为如果该内存永远存在，它将不得不在某个时候导致交换。但这会在某些用例中将逐渐的缓慢转变为非常明显的一次性（和早期）延迟。
*   在进程之间发送大量数据可能很慢。同样，如果您正在谈论发送超过 2K 的参数并返回 64K 的结果，您甚至不会注意到它，但如果您正在发送和接收大量数据，您将需要使用其他一些机制（文件，`mmap`ped 或其他文件；在 ; 中的共享内存 API`multiprocessing`等）。
*   在进程之间发送大量数据意味着数据必须是可腌制的（或者，如果您将它们粘贴在文件或共享内存中，`struct`则 -able 或理想情况下`ctypes`-able）。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-03-17T05:46:25.050

在堆上分配的内存可能会受到高水位标记的影响。由于 Python 内部优化了`PyObject_Malloc`在 4 KiB 池中分配小对象（池本身在 256 KiB arena 中，因此如果只使用一个池中的一个块，则不会释放整个 256 KiB arena。在 Python 3.3 中，小对象分配器被切换为使用匿名内存映射而不是堆，因此它应该在释放内存方面表现更好。

此外，内置类型维护先前分配的对象的空闲列表，这些对象可能使用也可能不使用小对象分配器。该`int`类型维护一个具有自己分配内存的空闲列表，清除它需要调用`PyInt_ClearFreeList()`. 这可以通过执行 full 来间接调用`gc.collect`。

像这样试试，然后告诉我你得到了什么。这是[psutil.Process.memory_info](https://psutil.readthedocs.io/en/latest/index.html#psutil.Process.memory_info)的链接。

```
import os
import gc
import psutil

proc = psutil.Process(os.getpid())
gc.collect()
mem0 = proc.memory_info().rss

# create approx. 10**7 int objects and pointers
foo = ['abc' for x in range(10**7)]
mem1 = proc.memory_info().rss

# unreference, including x == 9999999
del foo, x
mem2 = proc.memory_info().rss

# collect() calls PyInt_ClearFreeList()
# or use ctypes: pythonapi.PyInt_ClearFreeList()
gc.collect()
mem3 = proc.memory_info().rss

pd = lambda x2, x1: 100.0 * (x2 - x1) / mem0
print "Allocation: %0.2f%%" % pd(mem1, mem0)
print "Unreference: %0.2f%%" % pd(mem2, mem1)
print "Collect: %0.2f%%" % pd(mem3, mem2)
print "Overall: %0.2f%%" % pd(mem3, mem0) 
```

输出：

```
Allocation: 3034.36%
Unreference: -752.39%
Collect: -2279.74%
Overall: 2.23% 
```

编辑：

我切换到相对于进程 VM 大小进行测量，以消除系统中其他进程的影响。

当顶部的连续可用空间达到恒定、动态或可配置的阈值时，C 运行时（例如 glibc、msvcrt）会收缩堆。使用 glibc，您可以使用[`mallopt`](http://man7.org/linux/man-pages/man3/mallopt.3.html)(M_TRIM_THRESHOLD) 进行调整。鉴于此，如果堆比你的块收缩更多——甚至更多——也就不足为奇了`free`。

在 3.x`range`中不会创建列表，因此上面的测试不会创建 1000 万个`int`对象。即使是这样，`int`3.x 中的类型也基本上是 2.x `long`，它没有实现自由列表。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-03-19T19:04:01.753

eryksun 已经回答了问题 #1，我已经回答了问题 #3（原来的 #4），但现在让我们回答问题 #2：

> 为什么它特别释放 50.5mb - 释放的数量是多少？

它所依据的最终是 Python 内部的一系列巧合，这些巧合`malloc`很难预测。

首先，根据您测量内存的方式，您可能只测量实际映射到内存中的页面。在这种情况下，任何时候页面被分页器换出，内存都会显示为“已释放”，即使它还没有被释放。

或者您可能正在测量正在使用的页面，这些页面可能会或可能不会计算已分配但从未触及的页面（在乐观过度分配的系统上，如 linux）、已分配但已标记的页面`MADV_FREE`等。

如果您真的在测量分配的页面（这实际上不是一件非常有用的事情，但它似乎是您要问的），并且页面确实已被释放，那么可能发生这种情况的两种情况：要么你'已经使用`brk`或等效于缩小数据段（现在非常罕见），或者您已经使用`munmap`或类似的方式来释放映射段。（理论上，后者还有一个较小的变体，因为有一些方法可以释放映射段的一部分——例如，`MAP_FIXED`为`MADV_FREE`您立即取消映射的段窃取它。）

但是大多数程序不会直接从内存页面中分配东西。他们使用`malloc`-style 分配器。当您调用 时`free`，如果您恰好是`free`映射中的最后一个活动对象（或数据段的最后 N 个页面），分配器只能将页面释放到操作系统。您的应用程序无法合理地预测这一点，甚至无法提前检测到它发生了。

CPython 使这变得更加复杂——它在`malloc`. （有关更详细的解释，请参阅[源注释](http://hg.python.org/cpython/file/3.3/Objects/obmalloc.c#l27)。）最重要的是，即使在 C API 级别，更不用说 Python，您甚至无法直接控制何时释放顶级对象。

那么，当你释放一个对象时，你怎么知道它是否会释放内存给操作系统呢？嗯，首先你必须知道你已经释放了最后一个引用（包括你不知道的任何内部引用），允许 GC 释放它。（与其他实现不同，至少 CPython 将在允许时立即释放对象。）这通常会在下一层释放至少两件事（例如，对于字符串，您正在释放`PyString`对象，以及字符串缓冲区）。

如果你*确实*释放了一个对象，要知道这是否会导致下一级释放一个对象存储块，你必须知道对象分配器的内部状态，以及它是如何实现的。（除非你释放块中的最后一个东西，否则它显然不会发生，即使那样，它也可能不会发生。）

如果你*确实*释放了一个对象存储块，要知道这是否会导致`free`调用，你必须知道 PyMem 分配器的内部状态，以及它是如何实现的。（同样，您必须在`malloc`ed 区域内释放最后一个正在使用的块，即使那样，它也可能不会发生。）

如果你*做* `free`一个`malloc`ed 区域，要知道这是否会导致一个`munmap`或等效（或`brk`），你必须知道 的内部状态`malloc`，以及它是如何实现的。与其他的不同，这个是高度特定于平台的。（同样，您通常必须解除分配段中最后一个正在使用`malloc`的`mmap`，即使那样，它也可能不会发生。）

所以，如果你想了解为什么它恰好释放了 50.5mb，你将不得不从下往上追踪它。为什么在您进行一次或多次调用时（可能超过 50.5mb）`malloc`取消映射 50.5mb 的页面？`free`您必须阅读平台的`malloc`，然后遍历各种表格和列表以查看其当前状态。（在某些平台上，它甚至可能使用系统级信息，如果不制作系统快照以进行离线检查，几乎不可能捕获这些信息，但幸运的是，这通常不是问题。）然后你必须在上面的 3 个级别上做同样的事情。

所以，这个问题唯一有用的答案是“因为”。

除非您正在进行资源有限（例如，嵌入式）开发，否则您没有理由关心这些细节。

而如果你*在*做资源有限的开发，知道这些细节是没有用的；您几乎必须围绕所有这些级别进行最终运行，特别`mmap`是在应用程序级别所需的内存（可能在两者之间使用一个简单的、易于理解的、特定于应用程序的区域分配器）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-04T13:04:05.287

首先，您可能需要安装 Glances：

```
sudo apt-get install python-pip build-essential python-dev lm-sensors 
sudo pip install psutil logutils bottle batinfo https://bitbucket.org/gleb_zhulik/py3sensors/get/tip.tar.gz zeroconf netifaces pymdstat influxdb elasticsearch potsdb statsd pystache docker-py pysnmp pika py-cpuinfo bernhard
sudo pip install glances 
```

然后在终端运行它！

```
glances 
```

在您的 Python 代码中，在文件开头添加以下内容：

```
import os
import gc # Garbage Collector 
```

使用“Big”变量（例如：myBigVar）后，您想为其释放内存，在您的 python 代码中编写以下内容：

```
del myBigVar
gc.collect() 
```

在另一个终端中，运行您的 python 代码并在“glances”终端中观察系统中的内存是如何管理的！

祝你好运！

PS 我假设你正在使用 Debian 或 Ubuntu 系统

# git - 使用来自外部存储库的文件启动 git 存储库

> ID：15455051
> 
> 赞同：2
> 
> 时间：2013-03-16T21:45:24.310
> 
> 标签：git

我想启动一个新的 git 存储库，但使用外部 3rd 方存储库的文件作为我的起点。

我有一个空的存储库，它位于分支 master 上，其中没有文件。我现在想添加文件作为我的第一个提交，但应该从另一个 git 存储库复制。

有没有一种 git 方法可以做到这一点，或者应该签出存储库并将文件复制到我的存储库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:10:58.487

如果您想保留远程存储库中的历史记录，可以这样做：

```
# Initialize your local repository
git init
# Add the source-repo where you want to pull the files from
git remote add source-repo <URL of Source repo>
# Make git fetch the history for the source-repo
git fetch source-repo

# Merge from BRANCH_NAME of source-repo into
# the current branch (which should be called master by default)
git merge source-repo/BRANCH_NAME 
```

如果您只想要一个提交来添加（即合并）文件，而不是多个提交，您可以使用**squash-merge**。截至目前（2013 年 3 月），git**不支持**对空仓库进行 squash 合并。因此，在进行此类壁球合并之前，您至少需要进行一次提交。

所以你可以做这样的事情：

```
# Initialize your local repository
git init
# Add the source-repo where you want to pull the files from
git remote add source-repo <URL of Source repo>
# Make git fetch the history for the source-repo
git fetch source-repo

# Create a dummyfile and commit the change
touch dummyfile
git add dummyfile
git commit -m "Dummy file change."

# Create a squash merge from BRANCH_NAME of source-repo into
# the current branch (which should be called master by default)
git merge --squash source-repo/BRANCH_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:59:54.510

无需签出和复制。您只需要让 git 知道远程存储库，然后您就可以从中合并，如下所示：

```
git remote add the-remote-repository <url of remote repo>
git remote update
git merge the-remote-repository/master   # or whatever branch you want to pull in 
```

# opencv - 如何修改 camshiftdemo.cpp 示例程序以减少 fps、高度/宽度和示例范围？

> ID：15455060
> 
> 赞同：0
> 
> 时间：2013-03-16T21:46:41.607
> 
> 标签：opencv

我正在树莓派上试验以下代码：

[https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/camshiftdemo.cpp?rev=4234](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/camshiftdemo.cpp?rev=4234)

我想做这个线程的建议：

[使用 OpenCV 获得更好的性能？](https://stackoverflow.com/questions/7622672/opencv-better-performance)

具体来说，我如何在上面的链接中执行 #1 - #4？

看这个网站：

[http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#cv-videocapture-set](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#cv-videocapture-set)

我试图做以下事情：

```
cap.set(CV_CAP_PROP_FRAME_WIDTH, 320);
cap.set(CV_CAP_PROP_FRAME_WIDTH, 240);
cout << "width = " << cap.get(CV_CAP_PROP_FRAME_WIDTH) << endl;
cout << "height = " << cap.get(CV_CAP_PROP_FRAME_HEIGHT) << endl; 
```

然而，输出总是显示宽度和高度为 640 和 480。我在这里错过了什么大事吗？

我正在使用 OpenCV 2.3.1

# binary - unsigned long long 到二进制

> ID：15455061
> 
> 赞同：0
> 
> 时间：2013-03-16T21:46:46.583
> 
> 标签：binary, unsigned-long-long-int

我正在尝试使用以下算法检查 c++ 中 unsigned long long 的设置位，该算法仅检查该位是否已设置。但我的问题是我得到的答案是错误的。请帮助我了解 unsigned long long 是如何以二进制形式存储。

代码：

```
#include<stdio.h>
#include<iostream>
#define CHECK_BIT(var,pos) ((var) & (1<<(pos)))
using namespace std;
int main()
{
    int pos=sizeof(unsigned long long)*8;
    unsigned long long a;
    cin>>a;
    pos=pos-1;
    while(pos>=0)
    {
        if(CHECK_BIT(a,pos))
          cout<<"1";
        else
          cout<<"0";
        --pos;
    }
} 
```

输入 ：

```
1000000000000000000 
```

输出：

```
1010011101100100000000000000000010100111011001000000000000000000 
```

预期输出：

```
110111100000101101101011001110100111011001000000000000000000 
```

同样对于另一个输入：

```
14141 
```

输出 ：

```
0000000000000000001101110011110100000000000000000011011100111101 
```

预期输出：

```
11011100111101 
```

在第二个示例中（实际上对于任何小数字），二进制模式只是在 32 位之后重复自身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:57:39.463

我认为您所遇到的是位集宏中的问题，请用/替换它

```
#define CHECK_BIT(var,pos) ((var) & (1LL<<(pos))) 
```

# python - 蟒蛇 | 返回一个变量

> ID：15455063
> 
> 赞同：1
> 
> 时间：2013-03-16T21:46:53.673
> 
> 标签：python, variables, return, variable-assignment

[我阅读并理解了其他问题](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)中描述的整篇文章。

我的问题是关于这个[源代码](http://norvig.com/sudoku.html)。

作者在函数assign中返回值：

```
def assign(values, s, d):
    """Eliminate all the other values (except d) from values[s] and propagate.
    Return values, except return False if a contradiction is detected."""
    other_values = values[s].replace(d, '')
    if all(eliminate(values, s, d2) for d2 in other_values):
        return values
    else:
        return False 
```

但是在调用函数 parse_grid(grid) 时，从不使用 assign 设置现有变量值：

```
def parse_grid(grid):
    values = dict((s, digits) for s in squares)
    for s,d in grid_values(grid).items():
        if d in digits and not assign(values, s, d):
            return False ## (Fail if we can't assign d to square s.)
    return values 
```

所以返回值对我来说似乎相当不必要。由于他只使用 assign() 作为布尔值，他不能只返回 true 吗？

我知道返回一个值不会改变原始变量的任何内容。只有当变量作为参数传递并在那里更改而不反弹到另一个变量时，“原始”变量才会更改，因为它拥有相同的引用。

但是`return values`in `def parse_grid(grid`) 应该是一个完全改变的值，然后是函数开头的那个。这个什么时候分配？

**问题：**

`values`in )在哪里`def parse_grid(grid`改变？因为这个函数返回值，并且这个返回值不应该和这个函数开始时设置的相同。那么它在哪里改变以及如何改变？

例如，它是这样调用的：`display(parse_grid(grid2))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:54:18.910

多次调用assign函数。例如，在搜索功能中：

```
def search(values):
    "Using depth-first search and propagation, try all possible values."
    if values is False:
        return False ## Failed earlier
    if all(len(values[s]) == 1 for s in squares): 
        return values ## Solved!
    ## Chose the unfilled square s with the fewest possibilities
    n,s = min((len(values[s]), s) for s in squares if len(values[s]) > 1)
    return some(search(assign(values.copy(), s, d)) 
        for d in values[s]) 
```

assign 的返回值被传递给 search 以继续深度优先搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T21:54:37.613

让我们看一下这个函数：

```
def parse_grid(grid):
    values = dict((s, digits) for s in squares)
    for s,d in grid_values(grid).items():
        if d in digits and not assign(values, s, d):
            return False ## (Fail if we can't assign d to square s.)
    return values 
```

这里函数返回一个新的`dict`. 它返回它，以便调用者可以用它做一些事情。该函数不会返回`True`，因为调用者想要获取并使用该 new `dict`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T21:55:51.040

在您显示的代码中，assign 似乎没有得到充分利用。您是对的：它仅用于检查值的有效性（无矛盾测试）。所以，正如你所说，返回 true 就可以了。

但是既然 assign 可以做更多的事情，为什么要削弱它呢？它可能在代码的其他地方有用。

* * *

编辑：它实际上是。查看链接代码，函数`search`调用它并使用返回值。

# c# - 使用 LINQ 填充 DropDownList 的正确方法是什么？

> ID：15455066
> 
> 赞同：2
> 
> 时间：2013-03-16T21:47:15.117
> 
> 标签：c#, asp.net, linq, linq-to-sql

我知道这个问题可能是重复的，但我看了很多例子，但没有一个适合我的情况。

我在 DataList 中有一个 DropDownList，我需要用数据库中的数据填充 DropDownList。我知道如何在 DataList 中找到下拉控件，并且知道如何使用 SqlCommand 填充下拉列表。现在我正在尝试学习 LINQ，但我无法填写下拉列表。请看下面我的场景：

```
 //Scenario 1
        var ddquery = from dd in db.PRODUCTs select dd.pr_product.Distinct();

        product.DataSource = ddquery;                
        product.DataTextField = "pr_product";
        product.DataValueField = "pr_product";
        product.DataBind(); 
```

在场景 1 中，我收到错误：“'System.String' 类型不支持序列运算符。”

```
 //Scenario 2
        var ddproc = from dd in db.isp_GETDDL("PRODUCTS", "", "") select dd;

        product.DataSource = ddproc;
        product.DataTextField = "pr_product";
        product.DataValueField = "pr_product";
        product.DataBind(); 
```

在场景 2 中，我收到错误：“DataBinding：'isp_GETDDLResult' 不包含名为 'pr_product' 的属性。” 在这种情况下，我并不是真的做对了，因为 PROC 返回一组数据，但我不确定我是否正确处理。

```
 //Scenario 3
        var ddq = from dd in db.PRODUCTs select dd;

        product.DataSource = ddq;
        product.DataTextField = "pr_product";
        product.DataValueField = "pr_product";
        product.DataBind(); 
```

在场景 3 中，我得到与 2 中相同的错误，但在这个错误中，我没有使用 PROC 来获取数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T21:51:28.287

看起来您的`Distinct`呼叫应该在查询本身上，而不是在结果中的一个值上：

```
var ddquery = (from dd in db.PRODUCTs select dd.pr_product).Distinct().ToList(); 
```

更重要的是，您不必指定`DataTextField`and `DataValueField`，因为您的`DataSource`is `List<string>`：

```
product.DataSource = ddquery;                
product.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T10:29:36.893

另一种方式..

```
1.var query=(from p in ContexName.TableName
2\.          select new{
3\.                 p.fieldName

4\.          }).toArray();
5.for(int i=0;i<query.count();i++)
6\.        dropdownlist.items.add(query[i].FieldName.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:50:19.880

假设`pr_product`是类型`string`这应该工作

```
 //Scenario 1
    var ddquery = from dd in db.PRODUCTs select dd.pr_product.Distinct();

    product.DataSource = ddquery;                
    product.DataBind(); 
```

按照我的假设，`ddquery`将是`IEnumerable<string>`这样您不必在数据绑定上指定字段名称，而且这种情况实际上是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T21:52:52.527

（替代方案，使用匿名类型）

```
product.Datasource = ddquery.Select(d => new 
{
pr_product = d.something
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-02T18:07:38.953

```
<asp:DropDownList ID="ddlCategorie" runat="server">                         
</asp:DropDownList> 
```

在文件后面的代码中：

```
ddlCategorie.DataSource = context.Categories.ToList();
ddlCategorie.DataTextField = "Nom";
ddlCategorie.DataValueField = "CategorieId";
ddlCategorie.DataBind();
ddlCategorie.Items.Insert(0, new ListItem("-Séléctionner une catégorie-")); 
```

# android - 如何将数据传递到动态加载到当前活动中的片段中

> ID：15455072
> 
> 赞同：0
> 
> 时间：2013-03-16T21:48:09.330
> 
> 标签：android, android-fragments

我的活动仅包含“FrameLayout”元素。

在其“onCreate”方法中，我动态加载片段：

```
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        UsersListFragment fragment = new UsersListFragment();

        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.add(R.id.fragment_container, fragment);
        ft.commit();
} 
```

在某些事件中，我的片段与活动通信，我需要实例化另一个片段并将一些数据传递给它。我通过实现由片段依次调用的特殊接口在活动中做到这一点。它看起来像这样：

```
@Override
public void onUserSelected(long userId) {

        UserDetailsFragment fragment = new UserDetailsFragment();

        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.replace(R.id.fragment_container, fragment);
        ft.addToBackStack(null);
        ft.commit();

        fragment.updateUser(userId);
} 
```

结果，“fragment.updateUser(userId);” 被称为早期方式（片段尚未初始化，它未附加到活动）。

问题：将数据传递到片段的正确方法是什么？

提前非常感谢。任何想法都非常感谢。

PS我已经看到了很多展示如何加载片段的示例，但无法找到那些展示如何传递数据的示例......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:50:59.560

这通常发生在我身上：一旦写了一个问题，我就有了一个新的想法来尝试......

看起来可能的选项之一是**通过“setArguments”方法设置数据来传递数据**......并在“onCreateView”片段方法期间使用......

有更好的选择吗？

# android - Android Facebook API - StringBuilder 返回 NULL

> ID：15455075
> 
> 赞同：0
> 
> 时间：2013-03-16T21:48:16.943
> 
> 标签：android, facebook, nullpointerexception

我正在阅读 Android Facebook 教程：[https ://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/)

在这段代码中：

```
private String buildUserInfoDisplay(GraphUser user) {

        StringBuilder userInfo = new StringBuilder("");
        Log.d("Graphuser:user",user.toString());
        Log.d("StringBuilder:userInfo",userInfo.toString());
        // Example: typed access (name)
        // - no special permissions required
        Log.d("Name: ",String.format("Name: %s\n\n", user.getName()));

        userInfo.append(String.format("Name: %s\n\n", user.getName()));

        // Example: typed access (birthday)
        // - requires user_birthday permission
        //userInfo.append(String.format("Birthday: %s\n\n", user.getBirthday()));

        // Example: partially typed access, to location field,
        // name key (location)
        // - requires user_location permission
        //userInfo.append(String.format("Location: %s\n\n", user.getLocation().getProperty("name")));

        // Example: access via property name (locale)
        // - no special permissions required
        userInfo.append(String.format("Locale: %s\n\n", user.getProperty("locale")));

     // Get a list of languages from an interface that
     // extends the GraphUser interface and that returns
     // a GraphObject list of MyGraphLanguage objects.
     GraphObjectList<MyGraphLanguage> languages = (user.cast(MyGraphUser.class)).getLanguages();
     Log.d("Languages",languages.toString());
     if (languages.size() > 0) {
         ArrayList<String> languageNames = new ArrayList<String> ();
         // Iterate through the list of languages
         for (MyGraphLanguage language : languages) {
             // Add the language name to a list. Use the name
             // getter method to get access to the name field.
             languageNames.add(language.getName());
         }                      

         //userInfo.append(String.format("Languages: %s\n\n", languageNames.toString()));
     }

        return userInfo.toString();
    } 
```

**userInfo.append()**函数导致空指针异常。有没有人遇到过这个？我检查了我的代码是否与教程中的代码相同。

/* 更新 - 附加 Logcat */

```
03-16 17:59:18.154: W/dalvikvm(1189): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
03-16 17:59:18.204: E/AndroidRuntime(1189): FATAL EXCEPTION: main
03-16 17:59:18.204: E/AndroidRuntime(1189): java.lang.NullPointerException
03-16 17:59:18.204: E/AndroidRuntime(1189):     at net.myname.myapp.MainFragment.buildUserInfoDisplay(MainFragment.java:84)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at net.myname.myapp.MainFragment.access$2(MainFragment.java:56)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at net.myname.myapp.MainFragment$2.onCompleted(MainFragment.java:125)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at com.facebook.Request$1.onCompleted(Request.java:264)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at com.facebook.Request$4.run(Request.java:1240)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at android.os.Handler.handleCallback(Handler.java:615)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at android.os.Looper.loop(Looper.java:137)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at java.lang.reflect.Method.invokeNative(Native Method)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at java.lang.reflect.Method.invoke(Method.java:511)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-16 17:59:18.204: E/AndroidRuntime(1189):     at dalvik.system.NativeStart.main(Native Method)
03-16 17:59:18.354: D/dalvikvm(1189): GC_CONCURRENT freed 423K, 6% free 8428K/8903K, paused 107ms+76ms, total 316ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:00:34.040

当用户没有在 facebook 上提供该信息时，代码会失败。使用 try 和 catch 包装代码以获取 java.lang.NullPointerException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:09:37.363

这可能与您的线程安全有关`buildUserInfoDisplay`，因为 StringBuilder 不应该像那样失败。可能有不同的线程同时访问该函数，这导致了 NPE（StringBuilder 内部？）。

尝试同步方法或使用`StringBuffer`而不是`StringBuilder`，这是线程安全的。

Ps.：哇，这就像为荣耀而写作:)

# image - 将视频帧表示为时间量

> ID：15455080
> 
> 赞同：1
> 
> 时间：2013-03-16T21:49:14.147
> 
> 标签：image, matlab, video, 3d, volume

我需要及时将一组视频帧表示为一个体积，即及时考虑一组视频帧，它们代表一个长方体。如何在 Matlab 中将其表示为体积？我需要使用 vhslice（垂直/水平切片操作）进一步操作此卷。我是matlab的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:38:06.620

您可以将帧堆叠成 3D（灰色）或 4D（彩色）阵列。

例如，如果您有灰度帧，则可以：

```
vol(:,:,ii) = vidFrame{ii}; 
```

# ios - 另一个 UIButton 背景颜色问题

> ID：15455082
> 
> 赞同：5
> 
> 时间：2013-03-16T21:49:22.253
> 
> 标签：ios, uibutton

更改 UIButton 的背景颜色的另一个简单问题。因此，经过一番搜索后，我发现一种常见的方法是创建图像或子视图。

我在情节提要中创建了一个按钮并将其连接到插座。在我的 VC 课程中，我有以下内容

## 。H

```
@property (nonatomic, readwrite, strong) IBOutlet UIButton *uiLoginButton; 
```

## .m

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSLog(@"%s and frame rect %@", __PRETTY_FUNCTION__, self.uiLoginButton); //here uiloginbutton does not have any size!

CGRect buttonRect = CGRectMake(50, 50, 100.0, 100.0);

self.uiLoginButton = [UIButton buttonWithType:UIButtonTypeCustom];
self.uiLoginButton.frame = buttonRect;
self.uiLoginButton.backgroundColor = [UIColor redColor];
NSLog(@"%s and frame rect %@", __PRETTY_FUNCTION__, self.uiLoginButton);    
} 
```

不，我随机设置了 CGRectMake 中的值，因为 IBOutlet 按钮的框架为 0。怎么会？

实际更改按钮颜色的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-16T22:16:47.227

如果您在 nib 中创建一个按钮，您可以通过 nib 本身更改所有属性。像这样 ![在此处输入图像描述](../Images/9eaf8253709321c76763502db327f4c5.png)

或者

如果您想以代码方式执行此操作，因为您是通过笔尖添加它的注意点

*   不需要初始化。因为它是 IB 的属性。
*   只需通过 IB 直接提供框架或通过`-setFrame:`方法在代码中提供
*   要设置颜色，您可以使用`-setBackgroundcolor:`方法

所以我的.h

```
@property (nonatomic,strong) IBOutlet UIButton *uiLoginButton; 
```

.m

```
[self.uiLoginButton setFrame:buttonRect];
[self.uiLoginButton setBackgroundColor:[UIColor redColor]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:10:05.253

您需要测试参考中的所有方法才能理解：[https ://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

如果在 storyBoard 中绘制 UIButton，在 viewDidAppear 中绘制 NSLog 框架。

如果你使用RounRect类型并且想要改变颜色，使用storyBoard，不要使用代码。

如果您使用自定义类型，请使用图像背景，而不是设置颜色：

[按钮 setBackgroundImage:(UIImage *) forState:UIControlStateNormal];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:59:00.523

你正在覆盖的价值`self.uiLoginButton`

删除这些行

```
CGRect buttonRect = CGRectMake(50, 50, 100.0, 100.0);

self.uiLoginButton = [UIButton buttonWithType:UIButtonTypeCustom];
self.uiLoginButton.frame = buttonRect; 
```

# parsec - 在 Parsec 中匹配字节串

> ID：15455084
> 
> 赞同：4
> 
> 时间：2013-03-16T21:49:27.237
> 
> 标签：parsec, bytestring, haskell

我目前正在尝试使用*Real World Haskell*中提供的 Full CSV Parser 。为了我尝试修改代码以使用`ByteString`而不是`String`，但是有一个`string`只适用于`String`.

是否有类似于与 一起使用的 Parsec 组合器`string`，`ByteString`而无需来回进行转换？

我已经看到有一个替代解析器可以处理`ByteString`: `attoparsec`，但我更愿意坚持使用 Parsec，因为我只是在学习如何使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T17:00:44.710

我假设你从类似的东西开始

```
import Prelude hiding (getContents, putStrLn)
import Data.ByteString
import Text.Parsec.ByteString 
```

这是我到目前为止所得到的。有两个版本。两者都编译。可能两者都不是您想要的，但它们应该有助于讨论并帮助您澄清问题。

一路上我注意到的一件事：

*   如果你`import Text.Parsec.ByteString`那么这使用`uncons`来自 Data.ByteString.Char8，而后者又使用`w2c`来自 Data.ByteString.Internal，将所有读取的字节转换为`Char`s。这使 Parsec 的行号和列号错误报告能够明智地工作，也使您可以`string`毫无问题地使用和朋友。

因此，CSV 解析器的简单版本正是这样做的：

```
import Prelude hiding (getContents, putStrLn)
import Data.ByteString (ByteString)

import qualified Prelude (getContents, putStrLn)
import qualified Data.ByteString as ByteString (getContents)

import Text.Parsec
import Text.Parsec.ByteString

csvFile :: Parser [[String]]
csvFile = endBy line eol
line :: Parser [String]
line = sepBy cell (char ',')
cell :: Parser String
cell = quotedCell <|> many (noneOf ",\n\r")

quotedCell :: Parser String
quotedCell = 
    do _ <- char '"'
       content <- many quotedChar
       _ <- char '"' <?> "quote at end of cell"
       return content

quotedChar :: Parser Char
quotedChar =
        noneOf "\""
    <|> try (string "\"\"" >> return '"')

eol :: Parser String
eol =   try (string "\n\r")
    <|> try (string "\r\n")
    <|> string "\n"
    <|> string "\r"
    <?> "end of line"

parseCSV :: ByteString -> Either ParseError [[String]]
parseCSV = parse csvFile "(unknown)"

main :: IO ()
main =
    do c <- ByteString.getContents
       case parse csvFile "(stdin)" c of
            Left e -> do Prelude.putStrLn "Error parsing input:"
                         print e
            Right r -> mapM_ print r 
```

但这对于开始工作来说是如此微不足道，以至于我认为它不可能是你想要的。也许您希望所有内容始终保持`ByteString`或`[Word8]`或类似？因此，我在下面进行了第二次尝试。I am still `import`ing `Text.Parsec.ByteString`，这可能是一个错误，并且代码中充满了无可救药的转换。

***但是***，它编译并具有完整的类型注释，因此应该是一个合理的起点。

```
import Prelude hiding (getContents, putStrLn)
import Data.ByteString (ByteString)
import Control.Monad (liftM)

import qualified Prelude (getContents, putStrLn)
import qualified Data.ByteString as ByteString (pack, getContents)
import qualified Data.ByteString.Char8 as Char8 (pack)

import Data.Word (Word8)
import Data.ByteString.Internal (c2w)

import Text.Parsec ((<|>), (<?>), parse, try, endBy, sepBy, many)
import Text.Parsec.ByteString
import Text.Parsec.Prim (tokens, tokenPrim)
import Text.Parsec.Pos (updatePosChar, updatePosString)
import Text.Parsec.Error (ParseError)

csvFile :: Parser [[ByteString]]
csvFile = endBy line eol
line :: Parser [ByteString]
line = sepBy cell (char ',')
cell :: Parser ByteString
cell = quotedCell <|> liftM ByteString.pack (many (noneOf ",\n\r"))

quotedCell :: Parser ByteString
quotedCell = 
    do _ <- char '"'
       content <- many quotedChar
       _ <- char '"' <?> "quote at end of cell"
       return (ByteString.pack content)

quotedChar :: Parser Word8
quotedChar =
        noneOf "\""
    <|> try (string "\"\"" >> return (c2w '"'))

eol :: Parser ByteString
eol =   try (string "\n\r")
    <|> try (string "\r\n")
    <|> string "\n"
    <|> string "\r"
    <?> "end of line"

parseCSV :: ByteString -> Either ParseError [[ByteString]]
parseCSV = parse csvFile "(unknown)"

main :: IO ()
main =
    do c <- ByteString.getContents
       case parse csvFile "(stdin)" c of
            Left e -> do Prelude.putStrLn "Error parsing input:"
                         print e
            Right r -> mapM_ print r

-- replacements for some of the functions in the Parsec library

noneOf :: String -> Parser Word8
noneOf cs   = satisfy (\b -> b `notElem` [c2w c | c <- cs])

char :: Char -> Parser Word8
char c      = byte (c2w c)

byte :: Word8 -> Parser Word8
byte c      = satisfy (==c)  <?> show [c]

satisfy :: (Word8 -> Bool) -> Parser Word8
satisfy f   = tokenPrim (\c -> show [c])
                        (\pos c _cs -> updatePosChar pos c)
                        (\c -> if f (c2w c) then Just (c2w c) else Nothing)

string :: String -> Parser ByteString
string s    = liftM Char8.pack (tokens show updatePosString s) 
```

在效率方面，您可能关心的应该是和`ByteString.pack`的定义中的那两条指令。您可能会尝试替换 Text.Parsec.ByteString 模块，以便“让严格的 ByteStrings 成为具有令牌类型的实例”，而不是让 ByteStrings 成为具有令牌类型的实例，但这不会帮助您提高效率，它会只是让您头疼尝试重新实现所有 sourcePos 函数以跟踪您在输入中的位置以获取错误消息。`cell``quotedCell``Stream``Char``Stream``Word8`

不，提高效率的方法是分别更改`char`,和to的类型以及`quotedChar`and `string`to和`Parser [Word8]`的类型。您甚至可以将类型更改为。必要的更改如下所示：`line``csvFile``Parser [[Word8]]``Parser [[[Word8]]]``eol``Parser ()`

```
cell :: Parser [Word8]
cell = quotedCell <|> many (noneOf ",\n\r")

quotedCell :: Parser [Word8]
quotedCell = 
    do _ <- char '"'
       content <- many quotedChar
       _ <- char '"' <?> "quote at end of cell"
       return content

string :: String -> Parser [Word8]
string s    = [c2w c | c <- (tokens show updatePosString s)] 
```

就效率而言，您不必担心所有的调用`c2w`，因为它们没有任何成本。

如果这不能回答你的问题，请说什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:30:00.970

我不相信。您需要自己使用[`tokens`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Prim.html#v%3atokens). 虽然它的文档有点......不存在，但前两个参数是一个用于在错误消息中显示预期标记的函数和一个用于更新将在错误中打印的源位置的函数。

# parsing - python xlrd：使用临时文件将 xls 转换为 csv。临时文件为空

> ID：15455085
> 
> 赞同：1
> 
> 时间：2013-03-16T21:49:29.747
> 
> 标签：parsing, csv, xlrd

我正在从互联网上下载一个 xls 文件。它采用 .xls 格式，但我需要 'Sheet1' 采用 csv 格式。我使用 xlrd 进行转换，但似乎遇到了我写入的文件为空的问题？

```
import urllib2
import tempfile
import csv
import xlrd

url_2_fetch = ____
u = urllib2.urlopen(url_2_fetch)
wb = xlrd.open_workbook(file_contents=u.read())
sh = wb.sheet_by_name('Sheet1')
csv_temp_file = tempfile.TemporaryFile()
with open('csv_temp_file', 'wb') as f:
    writer = csv.writer(f)
    for rownum in xrange(sh.nrows):
        writer.writerow(sh.row_values(rownum)) 
```

这似乎奏效了。但现在我想通过执行以下操作来检查这些值：

```
with open('csv_temp_file', 'rb') as z:
    reader = csv.reader(z)
    for row in reader:
        print row 
```

但我什么也没得到：

```
>>> with open('csv_temp_file', 'rb') as z:
...     reader = csv.reader(z)
...     for row in reader:
...             print row
...
>>> 
```

我正在使用临时文件，因为我想对内容进行更多解析，然后使用 SQLAlchemy 将 csv 帖子的内容存储到 mySQL 数据库中。

我很感激帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T01:13:51.733

这是完全错误的：

```
csv_temp_file = tempfile.TemporaryFile()
with open('csv_temp_file', 'wb') as f:
    writer = csv.writer(f) 
```

该`tempfile.TemporaryFile()`调用返回“*一个类似文件的对象，可以用作临时存储区域。文件一关闭就会被销毁（包括对象被垃圾回收时的隐式关闭）。* ”

因此，您的变量`csv_temp_file`包含一个已经打开的文件对象，您可以读取和写入该文件对象，并且在您调用`.close()`它、覆盖变量或干净地退出程序时将被删除。

到目前为止，一切都很好。但是随后您继续打开另一个`with open('csv_temp_file', 'wb')`不是临时文件的文件，该文件是在脚本的当前目录中以固定名称创建的`'csv_temp_file'`，每次运行此脚本时都会被覆盖，可能会导致安全漏洞、奇怪的错误和竞争条件，并且不是以`csv_temp_file`任何方式与变量相关。

您应该丢弃该`with open`语句并使用`csv_temp_file`您已有的变量。您可以在再次与 csv 阅读器一起使用之前尝试`.seek(0)`使用它，它应该可以工作。完成后调用`.close()`它，临时文件将被删除。

# iphone - iOS：结合故事板和程序化 UI 设置

> ID：15455087
> 
> 赞同：0
> 
> 时间：2013-03-16T21:49:37.040
> 
> 标签：iphone, ios, objective-c, xcode

我倾向于结合使用故事板和代码来设置我的 UI。我有一段时间没有接触过objective-c，但我确实记得要让UI代码正常工作，我必须在ViewDidLoad下添加像这样的'performSelectorOnMainThread'代码。（如果你不这样做，并将代码放在 viewDidLoad 下的 uiSetup 下，或者甚至在没有 performSelectorOnMainThread 的情况下调用 [self uiSetup]，我相信由于延迟加载，代码将无法运行）

```
[self performSelectorOnMainThread:@selector(uiSetup) withObject:nil waitUntilDone:NO]; 
```

然后在'uiSetup'中像这样的一些东西......

```
- (void)uiSetup
{
    NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];
    for (int i = 0; i < colors.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [colors objectAtIndex:i];
        [self.scrollView addSubview:subview];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * colors.count, self.scrollView.frame.size.height);
} 
```

我正在尝试正确地完成这个项目，所以我想知道，有没有更有效的方法来做到这一点？也许我应该覆盖另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:15:18.430

您应该能够`viewDidLoad`像这样覆盖：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self uiSetup];
} 
```

确保调用`[super viewDidLoad];`，您拥有的类被选为 Storyboard 中 View Controller 的类，并且您已连接`scrollView`到 Storyboard 中的滚动视图。

`viewDidLoad`总是在 UI（主）线程上调用，所以应该没有理由使用`performSelectorOnMainThread`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:32:17.103

听起来您在情节提要上启用了自动布局，但您的 uiSetup 方法取决于非零帧值。在 Autolayout 下，帧不是在 viewDidLoad 时计算的，而是在生命周期的后期计算的。添加 performSelectorOnMainThread 调用会在主线程上对 uiSetup 的调用进行排队，因此它会在布局完成*后*执行，但是您已经注意到这不是最好看的代码。

任何一个：

*   更改您的 uiSetup 方法以使用自动布局约束或固定帧大小（这将是我的首选选项，我是自动[布局爱好者](http://commandshift.co.uk/blog/2013/01/31/visual-format-language-for-autolayout/)。
*   调用它`viewDidLayoutSubviews`（你需要小心，因为这个方法被更频繁地调用）或者`viewDidAppear`
*   关闭情节提要上的自动布局（如此[处](https://stackoverflow.com/questions/13201586/nsinvalidunarchiveoperationexception-could-not-instantiate-class-named-nslayout)所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:58:53.473

是的，这正是您将故事板与程序设置相结合的方式。只需确保从系列中选择正确的功能：`viewDidLoad:` `viewWillApear:` `viewDidAppear:`. 此外，您不需要使用`performSelectorOnMainThread: withObject: waitUntilDone:`来调用您的`uiSetup`函数。如果您对此有疑问，那么您可能会考虑发布另一个关于此的问题。

# python - Python - 实现函数

> ID：15455092
> 
> 赞同：1
> 
> 时间：2013-03-16T21:50:14.567
> 
> 标签：python

我正在创建一个函数来检查 x 是否大于 y，如果不是，它会切换两个值并返回它们。

```
def xGreater(x, y):
    if(y > x):
        x, y = y, x
    return x, y 
```

我的查询是在另一个函数中使用此函数的最佳方法是什么，我当前的代码如下：

```
def gcd(x, y):
    x , y = xGreater(x, y)
    r = x % y
    while(r != 0):
        x, y = y, r
        r = x % y
    return y 
```

我可以不简单地调用 xGreater(x, y) 来改变 x 和 y 的值，而前面没有 x, y = 吗？或者这仅在返回单个变量时才有效。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:54:23.833

> 我可以不简单地调用 xGreater(x, y) 来改变 x 和 y 的值，而前面没有 x, y = 吗？

恐怕你不能，因为`x`and`y`是不可变的，并且是`xGreater()`按值传递的。

它可以在一些特殊情况下完成（例如，如果`x`和`y`是两个列表），但不是一般情况下。

老实说，我会摆脱`xGreater()`并只是进行交换`gcd()`：

```
def gcd(x, y):
    if y > x:
        x, y = y, x
    r = x % y
    ... 
```

我个人觉得这样的代码更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T21:56:19.483

不，整数是不可变的。但是，您可以减少一个元组打包/解包的实例：

```
def xGreater(x, y):
    return (y, x) if y > x else (x, y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T00:09:15.687

NPE 有更好的解决方案，但我很无聊，想写一些小技巧

```
def gcd(x,y):
    minVal = y ^((x ^ y) & -(x < y))

    if ( minVal == y ):
        y = x ^ y  # Swapping values without a intermediate variable
        y = y ^ y  # This is highly inefficient to use.
        x = x ^ y  # But still kinda cool.

   return x % y 
```

# python - PySide QTreeView 倒序

> ID：15455096
> 
> 赞同：-1
> 
> 时间：2013-03-16T21:50:25.867
> 
> 标签：python, qt, pyqt, pyside

您好，我正在使用带有模型的 QTreeView，以便我可以过滤数据。我想将行号附加到我的数据中，但它们以相反的顺序打印。现在我有这样的虚拟数据

```
# addItem is a custom function
for i in range(0, 50):
    self.addItem(model, i, "Data1", "Data2") 
```

预期产出

```
0 Data1 Data2
1 Data1 Data2
.
.
.
50 Data1 Data2 
```

实际输出

```
50 Data1 Data2
49 Data1 Data2
.
.
.
0 Data1 Data2 
```

如何让数字正确打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:18:27.917

尝试`for i in reversed(range(0, 50)):`

# c# - 根据另一个按钮激活或停用按钮

> ID：15455104
> 
> 赞同：3
> 
> 时间：2013-03-16T21:51:01.570
> 
> 标签：c#, .net, winforms, button

我是 C# 新手。我有两个`button`和两个`label`。我想要的是，当我点击`button1`它*开始*计数并显示在`label1`. 当我按下`button2`它时恢复计数`button1`并*开始*计数`button2`并显示在标签2中。这是我的代码

```
bool testt = true;
int i = 0;
int j = 0;

private void button1_Click(object sender, EventArgs e)
{
    while (testt)
    {
        label1.Text = i.ToString();
        i++;
        System.Threading.Thread.Sleep(50);
        if (i > 5000)
        {
            i = 0;
        }
    }
}

private void button2_Click(object sender, EventArgs e)
{
    testt = false;
    while (!testt)
    {
        label2.Text = j.ToString();
        j++;
        System.Threading.Thread.Sleep(50);
        if (j > 5000)
        {
            i = 0;
        }
    }
} 
```

这里的问题是当我单击一个按钮时，它不允许我单击另一个按钮。我使用了一个全局变量来检测按下了哪个按钮。但它不起作用。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:01:41.990

您正在 UI 线程上执行所有这些操作，因此您正在阻止它。您需要让另一个线程进行实际计数并将标签更改委托给主线程，`Control.Invoke`以便主线程有时间运行消息泵。您可以使用内置的`BackgroundWorker`或简单地使用 或 创建一个`ThreadPool`线程`TaskFactory`。

我写了一个简短的例子来说明如何使用 LINQ 和 ThreadPool 来完成，这不是设计方面的最佳方法，但它会给你一个开发适当解决方案的起点

```
 semaphore = true;
    int i = 0;
    int j = 0;

    private void button1_Click(object sender, EventArgs e)
    {
        semaphore = true;
        ExecuteAsync(()=>
            {
                while (semaphore)
                {
                    //Dispatch a call to the UI thread to change the label
                    Invoke((MethodInvoker)(() => ChangeLabel(label1, i.ToString())));
                    i++;
                    Thread.Sleep(50);
                    if (i > 5000)
                    {
                        i = 0;
                    }
                }
            });
    }

    //Executes a function on a ThreadPool thread
    private void ExecuteAsync(Action action)
    {
        ThreadPool.QueueUserWorkItem(
            obj => action());
    }

    private void ChangeLabel(Label label, string labelText)
    {
        label.Text = labelText;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        semaphore = false;
        ExecuteAsync(() =>
                {
                    while (!semaphore)
                    {
                        //Dispatch a call to the UI thread to change the label
                        Invoke((MethodInvoker)(() => ChangeLabel(label2, j.ToString())));
                        j++;
                        Thread.Sleep(50);
                        if (j > 5000)
                        {
                            i = 0;
                        }
                    }
                });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:57:42.833

您在这里遇到的问题是线程问题。

当你有 winforms 时，主线程的工作是显示和使界面交互并执行你给它的任何任务。

在您的代码中，您开始倒计时。但是在那里，使界面工作的同一线程现在正忙于降低您的价值，因此在准备好之前它不会更新界面或响应按钮。

你想要的是一个帮助线程为你做倒计时（或者老实说，启动一个 TIMER 代替）。否则，在您完成该循环之前，界面将是非交互式的。

计时器是最简单的方法。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

# python - Tkinter 检查输入框是否为空

> ID：15455113
> 
> 赞同：11
> 
> 时间：2013-03-16T21:51:39.933
> 
> 标签：python, tkinter, tkinter-entry

如何检查 Tkinter 输入框是否为空？

换句话说，如果它没有分配给它的值。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-16T22:15:22.983

您可以获取该值，然后检查其长度：

```
if len(the_entry_widget.get()) == 0:
    do_something() 
```

您可以获取小部件中最后一个字符的索引。如果最后一个索引为 0（零），则为空：

```
if the_entry_widget.index("end") == 0:
    do_something() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-17T10:52:39.643

如果您`StringVar()`使用的是：

```
v = StringVar()
entry = Entry(root, textvariable=v)

if not v.get():
    #do something 
```

如果不使用：

```
entry = Entry(root)
if not entry.get():
    #do something 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-26T18:36:52.927

这也可以：

```
if not the_entry_widget.get():
  #do something 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-16T18:58:05.840

这是课堂上使用的示例。

```
import Tkinter as tk
#import tkinter as tk (Python 3.4)

class App:
    #Initialization
    def __init__(self, window):

        #Set the var type for your entry
        self.entry_var = tk.StringVar()
        self.entry_widget = tk.Entry(window, textvariable=self.entry_var).pack()
        self.button = tk.Button(window, text='Test', command=self.check).pack()

    def check(self):
        #Retrieve the value from the entry and store it to a variable
        var = self.entry_var.get()
        if var == '':
            print "The value is not valid"
        else:
            print "The value is valid"

root = tk.Tk()
obj = App(root)
root.mainloop() 
```

然后从上面输入只能接受数字和字符串。如果用户输入一个空格，将输出一个错误信息。现在，如果迟到希望您的输入采用整数或浮点数或其他形式，您只需将其丢弃！

```
Example:
yourVar = '5'
newVar = float(yourVar)
>>> 5.0 
```

希望有帮助！

# c++ - C++ 动态数组 - 通过复制两个数组

> ID：15455118
> 
> 赞同：0
> 
> 时间：2013-03-16T21:52:17.750
> 
> 标签：c++

我需要调整数组的大小并在那里复制值......所以我知道，我需要一个动态数组，但我不能使用`vector`并且必须使用静态数组..我写了这样的东西：

```
string names1[0];

bool foo(const char * inFile1) {
int size = 0;
ifstream myfile(inFile1);
if (myfile.is_open()) {
    // iterate through lines
    while (getline(myfile, line)) {            
        string tmp[++size];
        for (int i=0; i!=size;i++)     
            tmp[i]=names1[i];
        names1=tmp;
        names1[size]=line;
    }
}
} 
```

不过在网上`names1=tmp;` 我得到

```
main.cpp:42:20：错误：将'std::string [(((unsigned int)(((int)(++ size)) + -0x000000001)) + 1)]'分配给'时不兼容的类型标准::字符串 [0]'

```

...我是 C++ 新手，作为 javaguy，我真的很困惑：-S 感谢您的任何建议，如何解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:59:26.310

该变量`names1`是一个包含零条目的数组（本身就是一个问题），您尝试为该变量分配一个字符串。这将不起作用，因为字符串数组不等于字符串。

首先，我建议您使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)零大小的数组来代替。

要继续，您不需要逐个字符地将其复制到临时变量中，只需将读取的字符串添加到向量中：

```
std::vector<std::string> names1;

// ...

while (std::getline(myfile, line))
    names1.push_back(line); 
```

* * *

如果您不能使用`std::vector`，那么您必须分配一个包含*多个*条目的正确数组。如果你超过了，那么你必须重新分配它来增加数组的大小。

就像是：

```
size_t current_size = 1;
std::string* names1 = new std::string[current_size];

size_t line_counter = 0;
std::string line;
while (std::getline(myfile, line))
{
    if (line_counter > current_size)
    {
        std::string* new_names1 = new std::string[current_size * 2];
        std::copy(names1, names1 + current_size, new_names1);
        delete[] names1;
        names1 = new_names1;
        current_size *= 2;
    }
    else
    {
        names1[line_counter++] = line;
    }
} 
```

# python - 为单词的每个字母及其位置创建字典条目

> ID：15455120
> 
> 赞同：1
> 
> 时间：2013-03-16T21:52:25.233
> 
> 标签：python, dictionary

我正在尝试用 (n,l) 形式的元组填充字典。

与 key(n, l) 关联的值是文件中在位置 n 处包含字母 l 的单词集。

例如，如果文件有单词“Python”，我希望函数输出： `c_dict(0, "p"), c_dict(1, "y"), c_dict(2,"t") and so on.`

到目前为止，我已经添加了文本文件中的文字，但我不确定从那里继续。有人可以提供一些建议吗？

```
c_dict= {}
def fill_completions():   
    for line in open('file.txt'):
        data=line.strip().split()
        c_dict[data[0]]=tuple(data[1:])
    print(c_dict) 
```

我正在使用 Python 3.2。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:58:56.820

用于`enumerate(iterable)`获取`(index, item)`可迭代的元组。

```
for i, char in enumerate('python'):
   print i, char

#0, 'p'
#1, 'y'
..
#5, 'n'

>>>dict(enumerate('python')) 
{0:'p', 1:'y', ... 5:'n'} 
```

# git - 如何从 msysgit（GUI）添加工具以在存储库中打开 Git shell？

> ID：15455122
> 
> 赞同：2
> 
> 时间：2013-03-16T21:52:33.340
> 
> 标签：git, msysgit, git-gui

有没有我可以输入的快速命令，这样如果我运行这个工具，它会打开一个设置为 repo 目录的 shell？我到处搜索，似乎找不到可行的命令！

![在此处输入图像描述](../Images/3b0a24f8a6a592ba54858ace6e9671dc.png)

**回答**

我终于找到了如何做到这一点：

`cmd /c cd %v & start "" "C:\path\to\bin\sh.exe" --login -i`

必须将空参数传递给`start`命令的原因是引号中的第一个参数被设置为窗口标题。因此，如果要命名窗口，请执行以下操作：

`cmd /c cd %v & start "WINDOW TITLE HERE" "C:\path\to\bin\sh.exe" --login -i`

*命令说明*

*   `cmd /c cd %v`- 将当前目录更改为 repo 的路径。
*   `start "WINDOW TITLE HERE" "C:\path\to\bin\sh.exe" --login -i`- 启动你的 shell，将窗口设置为`WINDOW TITLE HERE`，并传递`--login -i`给可执行文件`sh.exe`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:57:40.507

或许这

```
cmd /c cd %v & start C:/path/to/bin/bash -il 
```

[`ref`](http://github.com/svnpenn/dotfiles/blob/master/.cygwin)

# c# - 在没有布局和项目模板的 ListView 中显示整个列表（包括所有属性）

> ID：15455124
> 
> 赞同：0
> 
> 时间：2013-03-16T21:52:47.490
> 
> 标签：c#, asp.net, listview, twitter, linq-to-twitter

我正在玩一个新的 Twitter NuGet 包 (LinqToTwitter)，它使用 linq 查询来返回数据。我无法找到任何文档来显示语句中所有可能的返回类型，如下所示：（*我从一些示例代码中得到了这个）*

```
 var users =
        from tweet in twitterCtx.User
        where tweet.Type == UserType.Show &&
              tweet.ScreenName == txtScreenName.Text
        select tweet; 
```

此查询返回用户的最新状态更新。

我想知道我可能从“var users”那里得到的一切，以及我如何操纵这些数据。最简单的方法显然是在调试中填充后检查结果视图，但我不断收到超时错误，阻止我看到对象内部。

我的问题：有没有办法打印出“var users”返回的所有内容？我认为这在 ListView 中会很简单，但由于您必须定义布局，所以除非有办法不这样做，否则这不是一个好选择。我对任何能让我看到返回的东西的东西都持开放态度。某种导出功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:56:13.650

尝试使用一些反射，例如：

```
var t = tweet.GetType();
foreach (var p in t.GetProperties())
{
    Console.WriteLine(p.Name);
}
foreach (var f in t.GetFields())
{
    Console.WriteLine(f.Name);
} 
```

尝试其他领域`PropertyInfo`和`FieldInfo`对象。

# maven - 尝试执行 Maven 替换插件时获取“非法组引用”

> ID：15455125
> 
> 赞同：0
> 
> 时间：2013-03-16T21:52:48.867
> 
> 标签：maven, plugins, replace, maven-plugin

我正在使用 Maven 3.0.3 和 Google 替换插件。我想使用 maven 变量 ${project.build.dir} 将文件中的相对路径替换为绝对路径。我正在尝试这个……</p>

```
 <plugin>
            <groupId>com.google.code.maven-replacer-plugin</groupId>
            <artifactId>replacer</artifactId>
            <version>1.5.1</version>
            <executions>
                <execution>
                    <id>adjust-liquibase-script</id>
                    <phase>process-test-resources</phase>
                    <configuration>
                        <file>target/mainco/subco/db/changelog/db.changelog-master.xml</file>
                        <outputFile>target/org/mainco/subco/db/changelog/db.changelog-master.xml</outputFile>
                        <replacements>
                            <replacement>
                                <token>include file="org</token>
                                <value>include file="${project.build.dir}/org</value>
                            </replacement>
                        </replacements>
                    </configuration>
                    <goals>
                        <goal>replace</goal>
                    </goals>
                </execution> 
```

但得到错误

```
[ERROR] Failed to execute goal com.google.code.maven-replacer-plugin:replacer:1.5.1:replace (adjust-liquibase-script) on project sbadmin: Illegal group reference -> [Help 1] 
```

我该如何纠正？谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:59:52.173

我切换到antun插件并让它工作

```
 <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <id>format-liquibase-files</id>
                            <phase>process-test-resources</phase>
                            <configuration>
                                <tasks>
                                    <replace token='include file="org'
                                        value="include file=&quot;${project.build.directory}/org"
                                        file="target/org/mainco/subco/db/changelog/db.changelog-master.xml" />
                                </tasks>
                            </configuration>
                            <goals>
                                <goal>run</goal>
                            </goals>
                        </execution> 
```

# pygame - 试图在pygame中获取和显示用户输入

> ID：15455128
> 
> 赞同：0
> 
> 时间：2013-03-16T21:52:59.250
> 
> 标签：pygame

我正在为我的课程在 pygame 中制作一个与物理相关的程序。主题是简谐运动，我的程序将（希望）显示一个简单的钟摆运动以及它的速度、加速度、位移等的所有相对值。要开始模拟，我需要用户输入一些关于这个运动的值摆，例如它的振幅、时间周期和它的弦长。

我的第一个问题是我将如何获得这个输入，而不是为每个场景编写代码（即如果 keydown = 1:、如果 keydown = 2:、如果 keydown = 3: 等等......）无论如何都可以概括整个列表整数，所以我可以说，如果 keydown 是一个整数，那么时间段 = 输入。

其次，我希望这种情况实时发生，这样一旦他们输入数字，他们就可以看到它并在按 Enter 确认之前对其进行修改，就像您在普通表单上一样，我将如何实时传输值？

如果这些问题看起来真的很幼稚，我深表歉意，但迄今为止我所做的唯一计算机编程都是针对考试委员会教学大纲的，它不允许非常广泛的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:20:59.873

您可以指定翻阅编辑不同的属性。键入某些内容会调用钟摆上的重新启动方法。

至于数字，键码是按顺序排列的，所以你可以有一个 if 语句来查看它是否在 0 到 9 之间。像这样：

```
for event in pygame.event.get():
        if event.type == KEYDOWN and event.key >= K_0 and event.key <= K_9:
            key = event.key - K_0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:14:43.343

您可以让他们在启动时将这些值输入终端，然后有一个按钮可以冻结您的窗口并在他们单击它时返回终端以询问输入，如下所示：

```
int amplitude = raw_input("enter the amplitude")
int length = raw_input("enter the length of the string")
...
while(true) //main loop
    if changevariables:
        int amplitude = raw_input("enter the new amplitude")
        ... 
```

# android - WebView 可以在服务内部使用吗？

> ID：15455129
> 
> 赞同：4
> 
> 时间：2013-03-16T21:53:10.127
> 
> 标签：android, android-webview, android-service

我有一个应用程序，它每分钟检查一个特定的网站，看看它是否找到了我正在寻找的任何东西，然后在找到该项目时通知我（播放声音）。我按照这个 tut 让我的应用程序在后台运行，但我注意到它抱怨 WebView。

[http://marakana.com/forums/android/examples/60.html](http://marakana.com/forums/android/examples/60.html)

如果无法在服务中使用 WebView，我有什么替代方法来实现相同的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:28:18.310

是的，服务在后台运行，应该不能显示任何 UI。

但是您可以让 Activity（一个 UI 进程）使用 PendingIntent.getService(context, GET_ADSERVICE_REQUEST_CODE, ...) 将其上下文传递给服务。然后，当服务准备好显示时，下面的行应该启动浏览器（或者您拥有的应用程序具有适合自己的 WebView 的 Intent 过滤器）以显示 Web 内容。

```
Intent i = new Intent(Intent.ACTION_VIEW, url);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, i,
        Intent.FLAG_ACTIVITY_NEW_TASK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:24:53.403

不， a`WebView`不应该在服务中使用，无论如何它真的没有意义。如果您加载您`WebView`的目的是为了抓取其中包含的 html，您不妨运行一个 HttpGet 请求，如下所示——

```
public static String readFromUrl( String url ) {
    String result = null;

    HttpClient client = new DefaultHttpClient();

    HttpGet get = new HttpGet( url ); 

    HttpResponse response;
    try {
        response = client.execute( get );
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream is = entity.getContent();
            BufferedReader reader = new BufferedReader(
                                        new InputStreamReader( is ) );
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while( ( line = reader.readLine() ) != null )
                    sb.append( line + "\n" );
            } catch ( IOException e ) {
                Log.e( "readFromUrl", e.getMessage() );
            } finally {
                try {
                    is.close();
                } catch ( IOException e ) {
                    Log.e( "readFromUrl", e.getMessage() );
                }
            }

            result = sb.toString();
            is.close();
        }

    } catch( Exception e ) {
        Log.e( "readFromUrl", e.getMessage() );
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-07-20T04:29:24.113

是的，您可以从项目的另一个活动中使用静态 Web 视图。例如：MainActivity.web2.loadUrl(""); 在您的服务中。

# java - 我想在netbeans中生成一个uml图

> ID：15455131
> 
> 赞同：0
> 
> 时间：2013-03-16T21:53:44.627
> 
> 标签：java, jsp, servlets, uml

我为电子商务网站创建了一个包含 servlet、jsps 和 Java 的项目。关于文档，我想知道是否有一种方法可以使用 netbeans 创建序列图和类图。我使用的版本是 netbeans 7.3，但我找不到任何关于它的信息。请有人告诉我如何安装，或者即使可以这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:41:21.747

如果您希望 Netbeans 像其他一些 IDE 一样为您自动生成 UML 图，遗憾的是 netbeans 无法做到这一点，而 Netbeans 6.7 是支持 UML 的最后一个版本。但是，您可以**下载一个[插件](http://netbeans.org/features/uml/)**，该插件允许您在 netbeans 7.3 中对 UML 图进行建模。当涉及到序列图时，甚至[Netbeans](http://netbeans.org/features/uml/)自己都建议您使用[JDeveloper](http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html)。

> 正在寻找功能齐全、免费的 UML 建模环境？JDeveloper 提供全面的建模功能，包括：
> 
> *   UML 图，如用例、类、活动和序列图

因此，我建议您寻找针对任务量身定制的工具，而不是尝试使用 netbeans 完成所有工作。

# mysql - 如何优化这个 wordpress mysql 查询？

> ID：15455135
> 
> 赞同：0
> 
> 时间：2013-03-16T21:54:12.450
> 
> 标签：mysql, wordpress, query-optimization

我从 xml 文件导入 wordpress 数据库。我将城镇和位置作为每个帖子的元值导入。

我没有预先定义的城镇和位置列表，所以我需要获取所有位置（简单的事情）并获取这些位置内的所有城镇（我在这里遇到问题）

我现在的查询是：

```
SELECT t1.meta_value 
FROM wp_postmeta t1  
INNER JOIN wp_postmeta t2 ON (t1.post_id = t2.post_id) 
WHERE t2.meta_key = '_prop_loc'
    AND t2.meta_value="Málaga" 
    AND t1.meta_key = '_prop_town' 
GROUP BY t1.meta_value 
```

例如，如果我尝试获取“Málaga”位置的所有城镇，我将使用此查询结束。在 localhost 上测试它，查询运行

```
showing records 0 - 29 ( 101 total, total time 1.3289 seg) 
```

如果我在时间减少之前取出组，但我当然会得到重复的行。如果我将 select distinct 与订单 ASC 一起使用，则时间会再次上升。

我确实希望对结果进行排序，但是超过一秒的查询是不行的

`wp_postmeta`桌子：

```
CREATE TABLE `wp_postmeta` (
  `meta_id`    bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `post_id`    bigint(20) unsigned NOT NULL DEFAULT '0',
  `meta_key`   varchar(255) DEFAULT NULL,
  `meta_value` longtext,
  PRIMARY KEY            (`meta_id`),
          KEY `post_id`  (`post_id`),
          KEY `meta_key` (`meta_key`)
) ENGINE=***  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:44:28.247

我假设您没有在默认的 WP 设计中添加更多索引。

您可以在上添加索引`(meta_key, meta_value, post_id)`

和一个`(meta_key, post_id, meta_value)`。

**更新**：`meta_value`是一`text`列，所以这不是一个选项。您可以尝试在该列上创建第一个部分索引，而不是将其包含在第二个索引中：

```
ALTER TABLE wp_postmeta 
  ADD INDEX meta_key__meta_value__post_id__IX
    (meta_key, meta_value(20), post_id),
  ADD INDEX meta_key__post_id__IX
    (meta_key, post_id) ; 
```

您也可以尝试重写查询：

```
SELECT t1.meta_value 
FROM wp_postmeta t1  
WHERE t1.meta_key = '_prop_town'
  AND EXISTS
      ( SELECT *
        FROM wp_postmeta t2 
        WHERE t2.meta_key = '_prop_loc'
          AND t2.meta_value = "Málaga" 
          AND t2.post_id = t1.post_id
      ) 
GROUP BY t1.meta_value ; 
```

# jquery - Jquery Mobile 如何更改按钮的值

> ID：15455141
> 
> 赞同：0
> 
> 时间：2013-03-16T21:54:57.353
> 
> 标签：jquery, jquery-mobile

目前我有一个没有价值的按钮，我想在调用一些 ajax 时更改它。但是，我的尝试失败了，任何人都可以帮助我如何更改和检索按钮中的值。下面是我的代码：

```
<script>
   $(document).ready(function() { 
       $('#favourite').val("4");
   });
</script>

<a href="#" id="favourite" data-role="button" data-icon="star" data-iconpos="notext" class="ui-btn-right"  value="">mark as favourite</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:10:51.413

试试这个。

```
$('#favourite').attr('value','4'); 
```

这是一个工作[小提琴](http://jsfiddle.net/cFXfZ/)。

**编辑**

正如 Tolis Emmanouilidis 在评论中指出的那样，锚标记的“值”属性无效。所以我建议改用另一个`data-`属性。

例子。

`<a id="favourite" data-value="">CLICK ME</a>`

然后用 jQuery 设置值。

```
$('#favourite').on('click',function(){
   $(this).data('value','4');
}); 
```

同样返回值。

`$(this).data('value');`

# scheme - 方案定义函数

> ID：15455145
> 
> 赞同：1
> 
> 时间：2013-03-16T21:55:24.050
> 
> 标签：scheme, definition

我试图想出一种方法，只将正整数添加到方案中的某个数字，但我一生都无法找到一种方法来做到这一点。我试图使用递归。

这是我到目前为止所拥有的：

```
(define sumEven
   (lambda(n)
        (cond((> n 0)1)
             ((even? n) (* (sumEven n (-(* 2 n) 1) 
```

我在想这个电话会做类似的事情：

```
 (sumEven N)=2 + 4 + ... + 2*N 
```

并输出如下内容：

```
(sumEven 1)  ==> 2
(sumEven 4)  ==> 20
(sumEven 5)  ==> 30 
```

但我不确定如何添加偶数 int 并跳过奇数。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:17:30.943

你的意思是这样吗？

```
(define (sumEven n)
  (if (= n 0)
      0
      (+ (* 2 n) (sumEven (- n 1)))))

(sumEven 1)
(sumEven 4)
(sumEven 5)

2
20
30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:37:14.580

请注意，您还可以`sumEven`通过[尾递归](http://en.wikipedia.org/wiki/Tail_call)函数来实现该过程，这具有将堆栈空间要求从线性或 O(n) 减少到常数或 O(1) 的优点。这是编写递归过程的推荐方法，只要可能：

```
(define sumEven
  (lambda (n)
    (let loop ((n n)
               (acc 0))
      (cond ((zero? n)
             acc)
            (else
             (loop (sub1 n) (+ (* 2 n) acc))))))) 
```

另一种选择，与更函数化的编程风格相一致，是使用列表操作和[高阶函数](http://en.wikipedia.org/wiki/Higher-order_function)来创建一个包含要添加的数字的列表，然后将它们相加；例如像这样：

```
(define sumEven
  (lambda (n)
    (apply + (build-list (add1 n) (curry * 2))))) 
```

无论哪种方式，结果都符合预期：

```
(sumEven 1)
=> 2
(sumEven 4)
=> 20
(sumEven 5)
=> 30 
```

# python - replaceWith() 后的 find() 不起作用（使用 BeautifulSoup）

> ID：15455148
> 
> 赞同：6
> 
> 时间：2013-03-16T21:55:30.017
> 
> 标签：python, find, beautifulsoup

请考虑以下 python 会话：

```
>>> from BeautifulSoup import BeautifulSoup
>>> s = BeautifulSoup("<p>This <i>is</i> a <i>test</i>.</p>"); myi = s.find("i")
>>> myi.replaceWith(BeautifulSoup("was"))
>>> s.find("i")
>>> s = BeautifulSoup("<p>This <i>is</i> a <i>test</i>.</p>"); myi = s.find("i")
>>> myi.replaceWith("was")
>>> s.find("i")
<i>test</i> 
```

请注意第 4 行后 s.find("i") 的缺失输出！

这是什么原因？有解决方法吗？

编辑：实际上，该示例并未演示用例，即：

```
myi.replaceWith(BeautifulSoup("wa<b>s</b>")) 
```

每当插入的部分包含自己非平凡的 html 代码时，我看不出如何用其他东西替换此语法。只是拥有

```
myi.replaceWith("wa<b>s</b>") 
```

将用实体替换 html 特殊字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-26T21:42:36.717

更简单的答案：在你调用之后，通过调用来`replaceWith`重新生成和清理。然后你又可以了。`s``s = BeautifulSoup(s.renderContents())``find`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T22:20:20.247

问题似乎是一个`BeautifulSoup`对象被认为是整个文档。 `find`遍历文档，向每个元素询问其后的下一个元素。但是当它到达 your 时`BeautifulSoup("was")`，该对象认为它是整个文档，所以它说它后面没有任何内容。这会过早中止搜索。

我不认为 BeautifulSoup 的设计目的是在其他 BeautifulSoup 对象中包含 BeautifulSoup 对象。解决方法是不要那样做。为什么你觉得你需要使用第一种形式而不是已经有效的第二种形式？如果您想用一些 HTML 替换元素，请使用 a`Tag`代替，而不是`BeautifulSoup`对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T23:29:07.057

我想，我找到了一种解决方法，它为我解决了这个问题。我将整个代码作为 Python 脚本再次重复，以给出一个完整的示例：

```
from BeautifulSoup import BeautifulSoup
s = BeautifulSoup("<p>This <i>is</i> a <i>test</i>.</p>")
myi = s.find("i")
s2 = BeautifulSoup("wa<b>s</b>")
myi_id = myi.parent.contents.index(myi)
for c in reversed(s2.contents):
    myi.parent.insert(myi_id + 1, c)
myi.extract() 
```

请注意，没有`reversed()`. 如果您跳过它，您不仅会更改元素的顺序。如果您真的希望更改顺序，则必须编写以下内容：

```
for c in list(s2.contents):
    myi.parent.insert(myi_id + 1, c) 
```

有人可以解释一下，为什么跳过`list()`会省略`<b>s</b>`？（请在评论中回答，因为这不是这里的主要问题。）

# perl - 使用 Perl 和 Net::SSLeay 的令牌请求

> ID：15455149
> 
> 赞同：0
> 
> 时间：2013-03-16T21:55:33.013
> 
> 标签：perl, api, rest, paypal

我正在尝试使用 Perl 和 Net::SSLeay 请求新 REST API 的令牌（我的提供程序仅支持 Net::SSLeay，未安装 NET::PayPal 等模块）但请求失败。我究竟做错了什么？特别是我不确定，设置'grant_type'很热......

```
use Net::SSLeay qw(get_https make_form make_headers post_https);
use MIME::Base64;
use strict;

my $site = "api.sandbox.paypal.com";
my $port = "443";
my $path = "/v1/oauth2/token?grant_type=client_credentials";
my $uname = "my_client_id";
my $password = "my_secret";

$uname = encode_base64($uname);
$password = encode_base64($password);
my $cred = "Basic $uname:$password";

my ($page, $result, %headers) = post_https($site, $port, $path, make_headers(
'Accept'=>"application/json",
'Accept-Language'=>"en_US",
'Authorization'=>"$cred"
)); 
```

有人在这里可以提供帮助吗？

最好的问候，拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:39:52.367

您需要对字符串进行 base64 处理`user:password`，而不是单独进行。所以在你的例子中应该是：

```
my $uname = "EN_Qsr0vnzjAI8iixqZHd2yoNtIZYDkdAreSpqbe3SiU";
my $password ="EDQccsa77f81xM-QU9kADtioNtIZYDkdAreSpqbe3SiU";

my $cred = "Basic " . encode_base64($uname . ":" . $password); 
```

# php - 我无法将 PHP 代码放在多行上

> ID：15455150
> 
> 赞同：0
> 
> 时间：2013-03-16T21:55:33.477
> 
> 标签：php, html, web, formatting

```
<?php
$txt="Hello, my name is Max Koenig.";
$intro="I was Born and raised in Calgary, Alberta with my Mother, Father and Sister.";

echo $txt . " ". $intro;
echo strlen ("Hello, my name is Max Koenig.");

$t=date("H");

if ($t>"10")
    echo "Good Morning";

elseif ($t>"16")
    echo "Good afternoon";

elseif ($t>"19")
    echo "Goodnight"

?> 
```

所有这些都在跨越页面的一行上，我不知道如何将它们放在单独的行上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:58:26.050

请在每个 PHP 语句后使用 HTML Break 行标记。像

```
$txt="Hello, my name is Max Koenig. <br />"; $intro="I was Born and raised in Calgary, Alberta with my Mother, Father and Sister. <br />"; 
```

# ios - 在 iOS 中将 pdf 转换为 png 会导致外观质量大大降低

> ID：15455151
> 
> 赞同：0
> 
> 时间：2013-03-16T21:55:40.523
> 
> 标签：ios, xcode, pdf, cgcontext

我正在将 pdf 文件转换为 png 图像，因此我可以将文本添加到 png 然后转换回 pdf。我正在使用下面的代码转换为 png。这导致外观质量显着下降。有什么办法可以防止或尽量减少质量损失？

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"sample.pdf"];

CFStringRef path;
CFURLRef url;

path = CFStringCreateWithCString (NULL, [writeableDBPath UTF8String], kCFStringEncodingUTF8);
url = CFURLCreateWithFileSystemPath (NULL, path, kCFURLPOSIXPathStyle, 0);

CGPDFDocumentRef myDocument;

myDocument = CGPDFDocumentCreateWithURL(url);

UIGraphicsBeginImageContext(CGSizeMake(612,792));
CGContextRef currentContext = UIGraphicsGetCurrentContext();

CGContextTranslateCTM(currentContext, 10, 792); //596,842 //640x960, 
CGContextScaleCTM(currentContext, 1.0, -1.0); // make sure the page is the right way up

CGPDFPageRef page = CGPDFDocumentGetPage (myDocument, 1); // first page of PDF is page 1 (not zero)
CGContextDrawPDFPage (currentContext, page);  // draws the page in the graphics context

UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

NSString* imagePath = [documentsDirectory stringByAppendingPathComponent: @"test.png"];
[UIImagePNGRepresentation(image) writeToFile: imagePath atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T22:05:44.370

您可以尝试增加要渲染到的图像上下文的大小：

```
UIGraphicsBeginImageContext(CGSizeMake(1224,1584));
...
CGContextTranslateCTM(currentContext, 10, 1584); 
```

但你真的可能应该使用这样的[PDF 上下文](https://stackoverflow.com/questions/4986427/writing-text-to-a-pdf-via-from-an-nsstring)：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"sample.pdf"];

CFStringRef path;
CFURLRef url;

path = CFStringCreateWithCString (NULL, [writeableDBPath UTF8String], kCFStringEncodingUTF8);
url = CFURLCreateWithFileSystemPath (NULL, path, kCFURLPOSIXPathStyle, 0);

CGPDFDocumentRef myDocument;
myDocument = CGPDFDocumentCreateWithURL(url);

// Create URL for PDF file
NSString *filename = @"sample-out.pdf";
NSURL *outputURL = [NSURL fileURLWithPathComponents:[NSArray arrayWithObjects:documentsDirectory, filename, nil]];

// Create PDF context
CGContextRef pdfContext = CGPDFContextCreateWithURL((CFURLRef)outputURL, NULL, NULL);
CGPDFContextBeginPage(pdfContext, NULL);
UIGraphicsPushContext(pdfContext);

// Flip coordinate system
CGRect bounds = CGContextGetClipBoundingBox(pdfContext);
CGContextScaleCTM(pdfContext, 1.0, -1.0);
CGContextTranslateCTM(pdfContext, 0.0, -bounds.size.height);

CGContextDrawPDFPage (UIGraphicsGetCurrentContext(), CGPDFDocumentGetPage (myDocument, 1));
// Drawing commands
[@"Hello World!" drawAtPoint:CGPointMake(0, 0) withFont:[UIFont boldSystemFontOfSize:72.0f]];
// Clean up
UIGraphicsPopContext();
CGPDFContextEndPage(pdfContext);
CGPDFContextClose(pdfContext); 
```

# c# - 监控来自浏览器/skype/icq/yahoo/messenger 等的传入和传出流量

> ID：15455152
> 
> 赞同：0
> 
> 时间：2013-03-16T21:55:47.990
> 
> 标签：c#, .net, visual-studio-2010, packet-capture

我正在寻找构建一个应用程序来监控来自诸如 skype/icq/yahoo/messenger 等社交程序的所有流量，这意味着发送的内容和接收的内容。这还将包括浏览跟踪，访问了哪些网站等等，我可能正在寻找某种“嗅探器”，但我真的不知道从哪里开始。我已经阅读过 Wireshark 和 Wincap 应该是一个 .net 库来执行此操作？但是我试过一次，我得到了很多奇怪的文本，所以我正在寻找一种更简单的方法来获取数据，然后过滤掉我需要的信息。谁能在这里带领我走上正确的道路？

比如我应该关注什么程序来达到这种目的，我们可以做些什么来过滤掉我不想要的文本？做“嗅探”部分是否需要大量内存/cpu？

应用程序将在 c# .net 4.0 中构建，因此“包装器”或嗅探器必须能够使用 c# 代码。

我可以阅读有关更多数据包嗅探器的任何提示，我们将不胜感激！任何类型的链接供我阅读或教程总是受欢迎的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:02:52.027

我认为您可以为此使用[FiddlerCore 。](http://www.fiddler2.com/fiddler/Core/)[这](http://fiddler.wikidot.com/fiddlercore-demo)是一个示例，展示了如何在 c# 中使用它。

```
Fiddler.FiddlerApplication.BeforeRequest += sess=>
    {
        Console.WriteLine("URL: " + sess.fullUrl);
        sess.bBufferResponse = true;
    };

Fiddler.FiddlerApplication.Startup(8877, true, true);

Console.ReadLine();

Fiddler.FiddlerApplication.Shutdown();
System.Threading.Thread.Sleep(750); 
```

# c++ - C 11 错误：未在此范围内声明“X”

> ID：15455156
> 
> 赞同：1
> 
> 时间：2013-03-16T21:55:57.300
> 
> 标签：c++

我的代码中出现以下错误，我不确定为什么因为在 client.hpp 中声明了“socketfd”并在 client.cpp 中的构造函数中使用，但是当我稍后尝试使用它时，我得到了一个错误。

终端输出：

```
g++ client.cpp -o client.o -pthread -c -std=c++11
client.cpp: In function ‘void sendMessage(std::string)’:
client.cpp:37:23: error: ‘socketfd’ was not declared in this scope 
```

客户端.hpp

```
#include <iostream>
#include <cstring>
#include <sys/socket.h>
#include <netdb.h>

class Client {

    public:
        Client();
        ~Client();
        void sendMessage(std::string);

    private:
        int status, socketfd;
        struct addrinfo host_info;
        struct addrinfo *host_info_list;

}; 
```

客户端.cpp

```
#include "client.hpp"

Client::Client() {
    memset(&host_info, 0, sizeof host_info);
    std::cout << "Setting up the structs..." << std::endl;
    host_info.ai_family = AF_UNSPEC;
    host_info.ai_socktype = SOCK_STREAM;
    status = getaddrinfo("192.168.1.3", "8888", &host_info, &host_info_list);
    if (status != 0) {
        std::cout << "getaddrinfo error " << gai_strerror(status);
    }

    std:: cout << "Creating a socket..." << std::endl;
    socketfd = socket(host_info_list->ai_family, host_info_list->ai_socktype, host_info_list->ai_protocol);
    if (socketfd == -1) {
        std::cout << "Socket Errror ";
    }
    std::cout << "Connecting..." << std::endl;
    status = connect(socketfd, host_info_list->ai_addr, host_info_list->ai_addrlen);
    if (status == -1) {
        std::cout << "Connect Error" << std::endl;
    }
    std::cout << "Successfully Connected" << std::endl;
}

Client::~Client() {

}

void sendMessage(std::string msg) {
    std::cout << "Sending Message: " << msg << std::endl;
    int len;
    ssize_t bytes_sent;
    len = strlen(msg.c_str());
    bytes_sent = send(socketfd, msg.c_str(), len, 0);
} 
```

这是我做过的第一个 C++，我有点困惑为什么会出现这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T21:59:13.533

你`Client::`之前失踪了`sendMessage()`：

```
void Client::sendMessage(std::string msg) {
     ^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T21:59:24.830

的函数签名`sendMessage`不是成员函数的签名。尝试这个-：

```
 void Client::sendMessage(std::string msg) { 
```

# android - Android：完全相同的位置上的多个标记 - GoogleMaps API 2.0

> ID：15455160
> 
> 赞同：0
> 
> 时间：2013-03-16T21:56:36.420
> 
> 标签：android, google-maps, marker

我正在构建一个在地图上显示多个标记的应用程序。有时会发生在完全相同的位置（相同的纬度和经度）有多个事件，因此有多个标记。现在事件是重叠的，所以只有一个显示给用户，并且可以只点击那个。我想将同一地点的所有事件分组到唯一的标记中，但是很难将标记与正确的事件绑定。

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:12:18.420

> 有时会发生在完全相同的位置（相同的纬度和经度）有多个事件，所以多个标记

这不太可能运作良好。

> 我想将同一地点的所有事件分组到唯一的标记中，但是很难将标记与正确的事件绑定。处理这种情况的最佳方法是什么？

`Marker`每个位置有一个。如果用户点击`Marker`代表多个事件的 a，则：

*   通过对话询问他们希望检查哪个事件，或
*   向他们显示*所有*事件，例如通过`ViewPager`带有选项卡的选项卡，或通过主-详细信息模式 UI（`ListView`匹配事件，点击列表条目会显示事件详细信息）

# c - 在 freetype 和 pango/cairo 之间测量的渲染文本宽度的差异

> ID：15455163
> 
> 赞同：2
> 
> 时间：2013-03-16T21:56:49.730
> 
> 标签：c, rendering, cairo, freetype, pango

我试图预测 pango 库呈现的文本有多宽，但为了性能起见，我试图在裸 Freetype 中实现它。

回答评论者 - 是的，我使用该`callgrind`工具测量了性能。而且 pango 大部分时间都花在了 fontconfig 上，这是无法解决的。`pango_layout_get_extents`也不是非常快。同时，freetype 的性能非常快 - 但可能由于缺乏适当的设置而导致结果不准确。不幸的是，我无法发布渲染的位图，因为我只进行了简单的测量——但为了比较起见，实施它可能是值得的。我的用例中的渲染是由 SVG 中的网络浏览器完成的，我唯一需要的是预测渲染文本的长度 - 因此由于我没有渲染代码，因此在问题中不提供位图。

我的测试程序运行：

```
> ./freetype_text /usr/share/fonts/truetype/verdana.ttf "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
Width: 374 
```

但是 .. 字体大小为 10 (72dpi) 的相同文本在 pango 中以 340 像素呈现。测量是通过测量布局的常用方法：

```
PangoRectangle logical_rect = {0, 0};
pango_layout_get_extents (layout, NULL, &logical_rect); 
```

我观察到的差异可能是什么原因？我观察到的差异范围为 0%-15%。

下面是我的自由类型测试程序（编译`gcc freetype_text.c $(pkg-config --cflags --libs freetype2))`

```
#include <ft2build.h>
#include FT_FREETYPE_H
#include FT_OUTLINE_H
#include FT_STROKER_H
#include FT_GLYPH_H
#include FT_TRUETYPE_IDS_H

static FT_Library library;

int main(int argc, char** argv)
{
    FT_Error error = FT_Init_FreeType( &library );
    if ( error ) {
        return 1;
    }
    int i;

    FT_Face face;
    error = FT_New_Face( library, argv[1], 0, &face );
    if(error) {
        return 2;
    }
    FT_Set_Pixel_Sizes(face, 0, 10);

    char* str = argv[2];
    wchar_t ch = 0;
    FT_GlyphSlot  slot = face->glyph;
    int w = 0;
    int previous = 0;
    while( (ch = *str) != 0) {
        int glyph_index = FT_Get_Char_Index( face, ch );

        error = FT_Load_Glyph(face, glyph_index, FT_LOAD_DEFAULT|FT_LOAD_NO_BITMAP);
        str++;  
        w += slot->advance.x;
        if(previous && glyph_index )
    {
      FT_Vector  delta;
      FT_Get_Kerning( face, previous, glyph_index, FT_KERNING_DEFAULT, &delta );
            w += delta.x ;
    }
        previous = glyph_index;
    }
    printf("Width: %i\n", w/64);

    return 0;
} 
```

# c++ - 如何检查我的库是用于 Win8 Store 应用还是 Win32 应用？

> ID：15455166
> 
> 赞同：1
> 
> 时间：2013-03-16T21:57:16.237
> 
> 标签：c++, winapi, microsoft-metro, directx

正如标题所示，我正在尝试构建一个库（一个小型​​ DirectX 渲染器），既可用于 Windows8/Metro 应用程序，又可用于使用 Win32 开发桌面应用程序。

更准确地说，我想知道我是否可以使用某种预处理器指令来检测目标平台并使用它们来区分这些平台之间的代码差异，以及是否存在我在哪里可以获得更多关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:40:55.230

您不能，一旦构建了库，就已经处理了预处理器指令。这就是为什么您必须构建两个库，一个用于每个目的。

此链接可能会回答更多问题：

[http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/61829316-fff3-43c7-a86a-cf0e13c66845/](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/61829316-fff3-43c7-a86a-cf0e13c66845/)

# facebook-graph-api - OAuthException - #200 #200 权限错误发布评论以打开图形对象

> ID：15455168
> 
> 赞同：0
> 
> 时间：2013-03-16T21:57:30.107
> 
> 标签：facebook-graph-api, object, graph, oauth, comments

我正在尝试根据此处找到的文档向打开的图形对象发布评论：[https ://developers.facebook.com/docs/reference/api/publishing/](https://developers.facebook.com/docs/reference/api/publishing/)

尝试 POST 到此 URL 时出现 OAuth 异常：[https](https://graph.facebook.com/139202939585805/comments) : //graph.facebook.com/139202939585805/comments 其中 139202939585805 是我的 Open Graph 对象的对象 ID，您可以使用 Graph API 资源管理器和 FQL 进行查找：

```
SELECT url, id, type, site FROM object_url WHERE url = "smaxsport.com/Object/GetNation/2222/" 
```

我尝试使用 API 资源管理器中的每个可用权限对此对象发表评论。

我错过了什么？

更新：我将对象 URL 切换为全小写，我可以获得不同的（正确的）对象 ID。现在，当我尝试使用新 ID 506612756058150 发布时，我得到：

```
(OAuthException - #1) An unknown error has occurred. 
```

更新2：

这是我通过 c# fb SDK 使用的代码

```
 dynamic parameters = new ExpandoObject();
        parameters.message = "test message";
        var result = await _fb.PostTaskAsync(https://graph.facebook.com/506612756058150/comments", parameters); 
```

用户已签名，我正在使用有效的访问令牌。我也使用图形资源管理器尝试过这个。

# php - 为什么我会收到错误消息？

> ID：15455175
> 
> 赞同：0
> 
> 时间：2013-03-16T21:57:48.887
> 
> 标签：php, login

我写了这个“登录”页面，昨晚一切正常，除了没有显示错误消息。今天，我去仔细检查我的工作，我收到了这个错误消息：Call to undefined function showForm() in E:\wwwroot\teamc\logIn.php on line 7\. 我没有从昨晚更改或更改我的代码今天早上。谁能看到为什么现在出现错误消息？

```
<?php
session_start();

    //validate text was entered in UserName text box
if(empty($_POST['txtUserName']))
    {
        showForm('Please Enter A User Name.');
        exit();
    }
else
    {
        $UserName = $_POST['txtUserName'];
    }

//validate text was entered in password text box
if(empty($_POST['txtPassword']))
    {
        showForm('Please Enter A Password.');
        exit();
    }
else
    {
        $Password = $_POST['txtPassword'];
    }

if($Password != Password($UserName))
    {
        showForm('User Name And Password Do Not Match!');
        exit();
    }

function Password($UserName)
{
//database login
$dsn = 'mysql:host=XXX;dbname=XXX';
$username='XXX';
$password='XXX';
//variable for errors
$options = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
//try to run code
try {
//object to open database
$db = new PDO($dsn,$username,$password, $options);
//check username against password
    $SQL = $db->prepare("Select USER_PASSWORD FROM user WHERE user_name =  :UserName");
    $SQL->bindValue(':UserName', $UserName);
    $SQL->execute();
    $username = $SQL->fetch();

    if($username === false)
        {
            $password = null;
        }
    else
        {
            $password = $username['USER_PASSWORD'];
            include 'index.php';
        }

    return $password;
    $SQL->closeCursor();
    $db = null;

    } catch(PDOException $e){
        $error_message = $e->getMessage();
        echo("<p>Database Error: $error_message</p>");
        exit();
    }

}
function showForm($formMessage)
{?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1  /DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>WisCon Log In</title>
<link rel="stylesheet" href="styles/wiscon-default-styles.css" type="text/css" />
<link rel="stylesheet" href="styles/FormStyle.css" type="text/css" />
<script type="text/javascript" src="js/validateLogInForm.js/validateLogInForm.js">  </script>
</head>

<body id="logPage">
<div id="wrapper">

    <?php include('includes/header.php'); ?>
    <?php include('includes/topNavigation.php'); ?>

    <div id="mainContent">

        <div class="formDiv">
            <form name="registerForm" id="registerForm" action="" method="post">
                <h1 style="color:#FF530D; text-align: center">Log into your account here!</h1>

                <fieldset id="security">
                    <legend>Security</legend>
                    <label for="txtUserName" class="boxLabel">User Name:</label>
                    <input type="text" id="txtUserName" name="txtUserName" autofocus="autofocus" required="required" />
                    <script type="text/javascript">
                        if(!("autofocus" in document.createElement("input")))
                        {
                            setTimeout(function(){
                                document.getElementById("txtUserName").focus();
                            }, 10);

                        }
                        </script>
                    <label for="txtPassword" class="boxLabel">Password:</label>
                    <input type="password" id="txtPassword" name="txtPassword" required="required" />
                </fieldset>

                <fieldset id="submission">
                    <div id="buttons">
                        <input type="submit" id="btnSubmit" name="btnSubmit" value="Submit" onclick="return validateLogInForm()"/>
                        <input type="reset" id="btnReset" name="btnReset" >
                    </div><!--end buttons-->
                </fieldset>
</p>
            </form>
        </div><!--end div class=formDiv-->
    </div><!--end div id=mainContent-->

    <?php include('includes/footer.php'); ?>

</div><!--end div id=wrapper-->
</body>
</html>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:03:41.220

从手册[`exit()`](http://www.php.net/manual/en/function.exit.php)

> 输出一条消息并终止当前脚本

所以之后的任何事情，包括你定义函数的地方都不会被执行

没有必要`exit()`在 an中使用，`if/else`因为它不会`else`在`if`返回时执行`true`。

**编辑**
如果需要，请将`exit()`if移到if 上方，以防止它不被执行/无法调用。`if/else``function showForm($formMessage)`

**编辑 2**
要使错误消息可见，请尝试添加类似这样的内容 -

```
<?php if($formMessage !="") echo "<h2 style=\"color:#FF0000; text-align: center\">".$formMessage."</h2>"; ?> 
```

之间

```
...
<h1 style="color:#FF530D; text-align: center">Log into your account here!</h1>
<?php if($formMessage !="") echo "<h2 style=\"color:##FF0000; text-align: center\">".$formMessage."</h2>"; ?>
<fieldset id="security">
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:00:53.030

为什么`exit()`在调用函数后使用？尝试删除它，看看它是否有效。

另外，您没有在 html 代码中看到错误消息的原因仅仅是因为您没有`$formMessage`在 html 输出中的某处调用传递的变量。

# ios - 地图上服务器注释请求的简单算法

> ID：15455176
> 
> 赞同：0
> 
> 时间：2013-03-16T21:57:52.367
> 
> 标签：ios, algorithm, map, route-me

什么是知道何时去服务器并请求注释的足够好的方法？即知道屏幕上的区域何时还没有被用户暴露？

如果我有一个`LAT1,LON1` `LAT2,LON2`指定的屏幕边界，或者屏幕的中心可能是`LAT,LON`，我怎么知道用户移动到的表面从未暴露过，甚至只是它的一部分？

很奇怪，但我在网上找不到想法，欢迎任何方法！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T01:01:10.103

`MKMapRect`存储地图中显示的一组对象，`NSMutableSet`然后您将拥有以前可见的所有区域。（当保持集合合理时结合rects）

当你得到一个新的`MKMapRect`（在地图视图的滚动或缩放之后 - 在这里通知代表）查看新的是否`visibleMapRect`位于旧的内部或只是相交或根本不在矩形内

an`MKMapRect`几乎可以像 a 一样对待`CGRect`:)

# c++ - Qt4 + CGAL - “BOOST_JOIN”解析错误

> ID：15455178
> 
> 赞同：19
> 
> 时间：2013-03-16T21:57:55.377
> 
> 标签：c++, boost, qt4, cgal

`Parse error at "BOOST_JOIN"`尝试使用 Qt4 和 CGAL 编译代码时出现错误。我没有直接使用 Boost，我已经搜索并尝试了很多选项，比如`-DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED`and `-DBOOST_NO_TEMPLATE_PARTIAL_SPECIALIZATION`。我正在使用的版本是 CGAL 4.1.0、Qt 4.8.4_6 和 Boost 1.53.0_1，并在 Mac OS 10.8.2 机器中使用 CMake 生成 Makefile。关于可能导致该错误的任何想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-08-08T01:37:59.073

这个问题发生在 Boost 1.56.0 和 QT 4.7.4（现在已经很老了），

无论如何，另一个快速的解决方法是编辑有问题的 boost 头文件，并且

```
add to the top:
#ifndef Q_MOC_RUN

add to the bottom:
#endif 
```

这至少会让 MOC 运行而不死。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-18T10:15:08.760

当您编译一段定义 Qt 对象的代码时，构建系统需要调用[Qt Meta Object Compiler](http://qt-project.org/doc/qt-4.8/moc.html)，也就是“moc”。在 5.0 之前的 Qt 版本中，“moc”编译器（实际上是预编译器）不能正确解析所有 C++ 代码。特别是，它没有完全扩展预处理器宏。在最近的 Boost 版本中，有时会使用一些宏（例如 BOOST_JOIN）来定义命名空间名称。例如：

```
namespace BOOST_JOIN(BOOST_TT_TRAIT_NAME,_impl) { 
```

在`boost/type_traits/detail/has_binary_operator.hpp`Boost 版本 1.53 中。

[Qt 错误](http://bugreports.qt-project.org/browse/QTBUG-22829)已在 Qt-Project.org[中得到解决，据说已在 Qt-5.0 中修复](http://bugreports.qt-project.org/browse/QTBUG-22829?focusedCommentId=192942&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-192942)。

在[CGAL](http://www.cgal.org) -4.2 中，我试图通过在不同的编译单元中分离更多使用 Qt 和 Boost 来抑制这些构建错误。您应该使用最新版本的 Boost 和 CGAL-4.2-beta1（或更高版本，如果您在阅读该答案时发布它们）重试。如果您在 CGAL-4.2-beta1 或更高版本中遇到类似问题，请告诉我。

至于Qt-5.0，希望CGAL-4.3能支持。我们将不得不处理 CMake 脚本来支持它。它将被添加到下一次 CGAL 开发者会议的计划中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-17T03:04:08.827

我降级到 Boost 1.52，现在它正在编译。

# excel - Excel 2010 中的“表单控件”和“ActiveX 控件”有什么区别？

> ID：15455179
> 
> 赞同：104
> 
> 时间：2013-03-16T21:58:19.157
> 
> 标签：excel, vba, excel-2010, activex, form-control

使用 Microsoft Excel 2010，我注意到可以插入到文档中的两种控件：*表单控件*和*ActiveX 控件*。

![在此处输入图像描述](../Images/9bb48ee2c3146e3ad6f30eedd13d7581.png)

它们之间有什么区别？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-03-18T14:55:53.503

[谷歌充满了这方面的信息](http://office.microsoft.com/en-us/excel-help/overview-of-forms-form-controls-and-activex-controls-on-a-worksheet-HA010237663.aspx)。正如 Hans Passant 所说，**表单控件**内置于 Excel 中，而**ActiveX**控件是单独加载的。

通常你会使用`Forms`控件，它们更简单。`ActiveX`控件允许更灵活的设计，并且应该在无法使用基本`Forms`控件完成工作时使用。

很多用户的电脑[默认是不信任](http://office.microsoft.com/en-us/excel-help/enable-or-disable-activex-controls-in-office-documents-HA010031067.aspx) `ActiveX`的，会被禁用；这有时需要手动添加到信任中心。`ActiveX`是一项基于微软的技术，据我所知，Mac 不支持。如果您（或您向其提供工作簿的任何人）决定在 Mac 上使用它，这也是您必须考虑的事情。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-09-04T18:39:57.510

重要的一个重要区别是 ActiveX 控件显示为可以在代码中使用的对象 - 尝试将 ActiveX 控件插入工作表，打开 VBA 编辑器 (ALT + F11)，您将能够访问以编程方式控制。您不能对表单控件执行此操作（必须改为将宏显式分配给每个控件），但表单控件更易于使用。如果您只是做一些简单的事情，那么您使用哪个并不重要，但对于更高级的脚本，ActiveX 有更好的可能性。

ActiveX 也更具可定制性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-12T16:52:45.993

还值得注意的是，ActiveX 控件仅适用于 Windows，而表单控件将适用于 Windows 和 MacOS 版本的 Excel。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-03-01T17:54:02.883

请注意，在某些情况下，单击表单控件或 Active X 控件会为同一个宏给出两个不同的结果——情况并非如此。我发现 Active X 更可靠。

# html - 首字母首字母报价在 Firefox 中不起作用

> ID：15455184
> 
> 赞同：0
> 
> 时间：2013-03-16T21:58:50.663
> 
> 标签：html, css, firefox, css-content

我完全不明白，firefox不想接受❝（U-275D）作为我的第一封信，尽管他们应该接受初始报价。

有人知道吗？[http://jsfiddle.net/DXn3B/1/](http://jsfiddle.net/DXn3B/1/)

```
.who
{
    font-family: 'Open Sans', sans-serif;
    font-weight:lighter;
    color:#565656;
    font-size:1em;
}

.who:first-letter
{
    float: left;
    font-size: 2.5em;
    line-height: 1;
    margin-right: 0.2em;
}

.who:before
{
    content: '\275d';
    color:#272727;
}
.who:after
{
    content: '\275e';
    color:#272727;
    font-size: 2.5em;
    font-family: 'Coverdale-Condensed', sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:22:14.917

该符号`'\275d'`表示 U+275D 重双转逗号引号装饰，它具有通用类别 So [Symbol, Other]。因此，CSS 2.1[规则`:first-letter`](http://www.w3.org/TR/CSS21/selector.html#x50)不适用于它：

> “标点符号（即，在“open”（Ps）、“close”（Pe）、“initial”（Pi）、“final”（Pf）和“other”（Po）标点符号类中以 Unicode [UNICODE] 定义的字符)，应包括在第一个字母之前或之后的字母”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:03:55.030

您可以尝试将它们作为文本：

```
.who:before
{
    content: '❝';
color:#272727;
}
.who:after
{
content: '❞';
color:#272727;
font-size: 2.5em;
font-family: 'Coverdale-Condensed', sans-serif;
} 
```

[js小提琴](http://jsfiddle.net/yahyaKACEM/DXn3B/2/)。
试试这个[网站](http://copypastecharacter.com/punctuation)以获得更酷的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T22:07:20.717

我不明白你为什么同时使用这里`.who:first-letter` *和* `.who:before`这里。（`.who:before`已经允许您以几乎任何您喜欢的方式格式化您插入的内容，因此使用`:first-letter`as well 有点多余，或者在这种情况下，甚至可能是错误的原因。）

将您为第一个设置的声明添加到后者的规则中（并完全删除第一个），那么您应该得到您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T22:09:58.957

真的，我不知道为什么它不起作用。但也许这在你想要的结果附近。[http://jsfiddle.net/DXn3B/4/](http://jsfiddle.net/DXn3B/4/) 我用它`:before`本身而不是`:first-letter`它工作正常。也许这两个人不应该像那样一起工作。

# android - 应用程序性能缓慢

> ID：15455203
> 
> 赞同：0
> 
> 时间：2013-03-16T22:00:27.993
> 
> 标签：android, multithreading

我开发了一个联系人应用程序。它完成了普通联系人应用程序应该做的所有事情。总是有改进的机会。我在 Android Emulator 中注意到，当用户安顿下来后，开始加载联系人图像，他已将联系人列表滚动到有可能获得他正在搜索的联系人的区域。因此，我尝试在我的应用程序副本上实现相同的功能。我已经实施了。它的运行非常非常缓慢。正如我推测的那样，我相信应用程序正在多次运行线程，即使它已经检索了导致大滞后的图像。我知道 ASync 任务，但只是出于好奇并检查它是否可以完成，我不想在这里实现它。这是 MainActivity 的源代码。

```
package com.example.contact;

import java.io.InputStream;
import java.util.ArrayList;

import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.Contacts;
import android.app.ListActivity;
import android.content.ContentUris;
import android.content.Context;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AbsListView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ListView;

public class MainActivity extends ListActivity {

    ListView listview;
    private boolean mPaused;
    private MyAdapter mAdapter;
    private View view;
    private boolean running = false;
    final private ArrayList<String> con_ids = new ArrayList<String>();
    private Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        listview = getListView();
        context = this;

        Cursor c = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, 
                                              null, 
                                              null, 
                                              null, 
                                              ContactsContract.Contacts.DISPLAY_NAME+" ASC");

        if(c!=null)
        {
            for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
                con_ids.add(c.getString(c.getColumnIndex(ContactsContract.Contacts._ID)));
            }
        }

        mAdapter = new MyAdapter(this, android.R.layout.simple_list_item_1, con_ids);
        listview.setAdapter(mAdapter);
        listview.setOnScrollListener(makeScrollListener());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void setEnabled(boolean enabled) {
        mPaused = !enabled;
    }

    private AbsListView.OnScrollListener makeScrollListener() {
        return new AbsListView.OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView absListView, int scrollState) {
                setEnabled(scrollState != AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL);
                running = false;
            }

            @Override
            public void onScroll(AbsListView absListView, int i, int i1, int i2) {

                String log = "";
                Log.d(log, "Scroll First Item" + i);
                Log.d(log, ""+ listview.getChildCount());           

                final int want = i;
                running = true;

                runOnUiThread(new Thread(new Runnable() {
                    int totalChild = listview.getChildCount();
                    int first = listview.getFirstVisiblePosition() - listview.getHeaderViewsCount();
                    int toRetrieve = want-first;
                    int id;
                    long con_id;
                    Bitmap thumbnail;
                    final ListView list = listview;

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        while(running)
                        {
                            if(!(toRetrieve<0||toRetrieve>=totalChild))
                            {
                                id = want+toRetrieve;
                                con_id = Long.valueOf(con_ids.get(id));
                                Uri ContactUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, con_id);
                                InputStream stream = ContactsContract.Contacts.openContactPhotoInputStream(context.getContentResolver(), ContactUri);
                                thumbnail = BitmapFactory.decodeStream(stream);
                                if(thumbnail == null)
                                {
                                    toRetrieve++;
                                    continue;
                                }
                                else
                                {
                                    View view = list.getChildAt(toRetrieve);
                                    if(view == null)
                                    {
                                        toRetrieve++;
                                        continue;
                                    }
                                    else
                                    {
                                        ImageView iamge = (ImageView) view.findViewById(R.id.contact_iamge);
                                        iamge.setImageBitmap(thumbnail);
                                    }
                                    toRetrieve++;
                                }

                            }
                            else
                            {
                                running = false;
                            }
                        }
                    }
                }));
            }
        };
    }

} 
```

MyAdapter 的代码，

```
package com.example.contact;

import java.util.ArrayList;

import android.content.ContentUris;
import android.content.Context;
import android.database.Cursor;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.provider.ContactsContract;
import android.provider.ContactsContract.Contacts;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView.FindListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class MyAdapter extends ArrayAdapter<String> {

    private Context context;
    private ListView listview;
    private ArrayList<String> ids;
    private LayoutInflater infl;
    private String displayname;
    private String maindetail;
    private SimplifiedContact contact;
    private Drawable drawable;

    public MyAdapter(Context context, int ResourceId, ArrayList<String> list)
    {
        super(context, ResourceId, list);
        this.context = context;
        ids = list;
        infl = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        drawable = context.getResources().getDrawable(R.drawable.person);
    }

    static class ViewHolder
    {
        public ImageView image;
        public TextView display_name;
        public TextView main_detail;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;
        contact = new SimplifiedContact(context, Long.valueOf(ids.get(position)));

        if(row == null)
        {
            row = infl.inflate(R.layout.single_cell, parent, false);
            ViewHolder viewHolder = new ViewHolder();

            viewHolder.display_name =(TextView) row.findViewById(R.id.disp_name);
            viewHolder.main_detail = (TextView) row.findViewById(R.id.main_detail);
            viewHolder.image = (ImageView)row.findViewById(R.id.contact_iamge);
            row.setTag(viewHolder);

        }

        ViewHolder holder = (ViewHolder) row.getTag();
        holder.display_name.setText(contact.getDisplayName());
        holder.main_detail.setText(contact.getMainDetail());
        holder.image.setBackgroundDrawable(drawable);

        return row;
    }

} 
```

我想知道，如何减少这种滞后。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:09:12.577

您为什么不尝试获取您在 runOnUiThread 中创建的 Thread 实例并将其放在一个字段中，在 onCreate 中对其进行初始化。我认为您正在创建几个没有用的线程实例。

```
public class MainActivity extends ListActivity {

ListView listview;
private boolean mPaused;
private MyAdapter mAdapter;
private View view;
private boolean running = false;
final private ArrayList<String> con_ids = new ArrayList<String>();
private Context context;
Thread uiThread;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    listview = getListView();
    context = this;

    Cursor c = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, 
                                          null, 
                                          null, 
                                          null, 
                                          ContactsContract.Contacts.DISPLAY_NAME+" ASC");

    if(c!=null)
    {
        for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
            con_ids.add(c.getString(c.getColumnIndex(ContactsContract.Contacts._ID)));
        }
    }

    uiThread = new Thread(new Runnable() {
        int totalChild = listview.getChildCount();
        int first = listview.getFirstVisiblePosition() - listview.getHeaderViewsCount();
        int toRetrieve = want-first;
        int id;
        long con_id;
        Bitmap thumbnail;
        final ListView list = listview;

        @Override
        public void run() {
            // TODO Auto-generated method stub
            while(running)
            {
                if(!(toRetrieve<0||toRetrieve>=totalChild))
                {
                    id = want+toRetrieve;
                    con_id = Long.valueOf(con_ids.get(id));
                    Uri ContactUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, con_id);
                    InputStream stream = ContactsContract.Contacts.openContactPhotoInputStream(context.getContentResolver(), ContactUri);
                    thumbnail = BitmapFactory.decodeStream(stream);
                    if(thumbnail == null)
                    {
                        toRetrieve++;
                        continue;
                    }
                    else
                    {
                        View view = list.getChildAt(toRetrieve);
                        if(view == null)
                        {
                            toRetrieve++;
                            continue;
                        }
                        else
                        {
                            ImageView iamge = (ImageView) view.findViewById(R.id.contact_iamge);
                            iamge.setImageBitmap(thumbnail);
                        }
                        toRetrieve++;
                    }

                }
                else
                {
                    running = false;
                }
            }
        }
    });

    mAdapter = new MyAdapter(this, android.R.layout.simple_list_item_1, con_ids);
    listview.setAdapter(mAdapter);
    listview.setOnScrollListener(makeScrollListener());
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void setEnabled(boolean enabled) {
    mPaused = !enabled;
}

private AbsListView.OnScrollListener makeScrollListener() {
    return new AbsListView.OnScrollListener() {
        @Override
        public void onScrollStateChanged(AbsListView absListView, int scrollState) {
            setEnabled(scrollState != AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL);
            running = false;
        }

        @Override
        public void onScroll(AbsListView absListView, int i, int i1, int i2) {

            String log = "";
            Log.d(log, "Scroll First Item" + i);
            Log.d(log, ""+ listview.getChildCount());           

            final int want = i;
            running = true;

            runOnUiThread(uiThread);
        }
    };
} 
```

}

# html - 如何在不移动其他 div 的情况下在悬停时放大 div

> ID：15455206
> 
> 赞同：1
> 
> 时间：2013-03-16T22:00:37.637
> 
> 标签：html, css, z-index, css-position

我希望实现像[这样](http://shopper.queldorei.com/index.php/women/dresses.html)的悬停效果，其中图像放大但不会取代周围的 div。我已经通过分配相对和绝对定位以及 z-index 看到了这一点，但这对我不起作用。也许我将这些值分配给了错误的类。我的代码如下...任何帮助表示赞赏

我不完全确定如何在这里发布代码，所以......我的网站（和代码问题）可以在[这里查看](http://4ucaps.activo.com/fitted/mlb/?dir=desc&order=position)

这是我第一次在这里发帖。感谢您的指导。这是代码...

HTML：

```
<div class="products-container">
   <div class="products-container-inner">
      <div class="item">
      <div class="item">
      <div class="item">
      <div class="item"> 
```

CSS：

```
div.item {
    height: 135px;
    width: 150px;
    margin: 10px;
    display: inline-block;
    float: left;
}

div.item:hover {
    border: none; float: left;
    height: 280px;
    width: 280px;
    background-color: #ffffff;
    -moz-box-shadow: 0 0 5px rgba(0,0,0,0.5);
    -webkit-box-shadow: 0 0 5px rgba(0,0,0,0.5);
    box-shadow: 0 0 5px rgba(0,0,0,0.5);
    -webkit-transition: .2s ease;
    -moz-transition: .2s ease;
    -o-transition: .2s ease;
    -ms-transition: .2s ease;
    transition: .2s ease;
}

div.products-container-inner {
    margin: auto;
    width: 100%;
    border: none;
    padding: 10px;
    overflow: hidden;
}

div.item .product-name {
    text-align: center;
    display: none;
}

div.item:hover .product-name {
    text-align: center;
    display: block;
}

div.item .price-box {
    text-align: center;
    display: none;
}

div.item:hover .price-box {
    text-align: center;
    display: block;
}

div.item .btn {     
    background-color: #EE432E;
    background-image: -moz-linear-gradient(center top , #EE432E 0%, #C63929 50%, #B51700 50%, #891100 100%);
    border: 1px solid #951100;
    border-radius: 5px 5px 5px 5px;
    box-shadow: 0 0 0 1px rgba(255, 115, 100, 0.4) inset, 0 1px 3px #333333;
    color: #FFFFFF;
    font: normal 16px/1 "helvetica neue",helvetica,arial,sans-serif;
    padding: 3px 0;
    float: left;
    margin-left: 65px;
    text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.8);
    text-decoration: none;
    width: 150px;
    display: none;
}

div.item:hover .btn {
    text-align: center;
    display: block;
    background-color: #F37873;
    background-image: -moz-linear-gradient(center top , #F37873 0%, #DB504D 50%, #CB0500 50%, #A20601 100%);
    cursor: pointer;
}

div.item:active .btn {
    background-color: #D43C28;
    background-image: -moz-linear-gradient(center top , #D43C28 0%, #AD3224 50%, #9C1500 50%, #700D00 100%);
    box-shadow: 0 0 0 1px rgba(255, 115, 100, 0.4) inset;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:20:35.920

在您要实现的目标的示例中...同一张图片有两个 div。
一个“常规”和一个仅在悬停时出现的“悬停”。
这个隐藏的 z-index 为 2，并显示在第一个上……这给人一种调整 div 的印象。但事实并非如此。
;)

===
编辑：好的，Ryh，看看我在这里为你做的这个开始......
没有jQuery，你将不会有任何“闪亮效果”，如淡入/淡出......
但是，它可能是一个选择像这样：

CSS：

```
 div.item {width:200px;}
  div.hover {display:none; position:relative; z-index:2; top:-200px; width:300px;}

  // The top:-200px is to move the big image up... depends on the small pic height.
  // And the width are in fonction of the pics width. 
```

HTML：

```
 <div class="item" id="img1" onmouseover="showbigger(this.id);">
  <img src="something.jpg" style='width;200px; height:200px; border:1px solid black;'>
  </div>

  <div class="hover" id="img1big" onmouseout="shownormal(this.id);">
  <img src="something-bigger.jpg" style='width;300px; height:300px; border:1px solid black;'>
  </div>

  <script>
  function showbigger(ref){
  document.getElementById(ref+'big').style.display='inline';
  }

  function shownormal(ref){
  document.getElementById(ref).style.display='none';
  }
  </script> 
```

您将不得不在定位和图片尺寸方面发挥一些作用。
这可能不是一个完美的解决方案……但如果你想用 JavaScript 来做这件事，这是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:35:31.820

超链接的 HTML：

```
<a href="/index.html"  onclick="createPopup">Click Here</a> 
```

CSS

```
a{text-decoration: none;
  position: fixed;
  color: #0000ff;
}

a:hover { text-decoration: initial;
    color: #ff0000;     
}

a:visited {color: #b200ff;} 
```

# python - 索引与在另一个中使用一个列表索引不同步

> ID：15455222
> 
> 赞同：1
> 
> 时间：2013-03-16T22:02:32.563
> 
> 标签：python

来自 R，这很难掌握。从列表中获取元素以 position 开头`0`。问题是使用一个列表从另一个列表中选择项目在这里运行的速度不同。

```
list1 = [1,2,3,4]

list2 = [1,2,3,4]

for x in range(0, len(list1)):
    print(list1[list2[x]]) 
```

这将导致：

```
>> 2
>> 3
>> 4
>> IndexError: list index out of range 
```

当我在 list1 的开头添加了一个额外的项目，并在 list2 的末尾添加了一个项目时，问题就停止了（只是因为它们不是像这样同步的）。

显然我还不熟悉这种语言，使用一个列表中的值从另一个列表中选择值的正确方法是什么？

这是正确的思考方式吗？

```
for x in range(0, len(list1)):
    print(list1[list2[x]-1]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:06:35.520

Python 是基于 0 索引的。`seq[0]`是 中的第一个元素`seq`。

R 是基于 1 索引的。

所以，是的，在 python 中你可以使用

```
list1 = [1,2,3,4]
list2 = [1,2,3,4]
for x in range(0, len(list2)):
    print(list1[list2[x]-1]) 
```

*   范围应该上升到`len(list2)`，而不是`len(list1)`。
*   此外，`range(0, len(list2))`与 相同`range(len(list2))`。当 `range`仅传递一个参数时，它被解释为`stop` 值，默认情况下采用起始值 0。

* * *

请注意，在 Python

```
for x in range(...): 
```

通常可以避免，如果可以，则更可取。相反，你可以写

```
for item in list2:
    print(list1[item-1]) 
```

并将`item`分配给 中的每个项目`list2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:06:50.390

如果您的列表有 4 个项目，则您的索引必须从 0 到 3，因此使用值 4 会引发错误。这是一个带有字母的示例，可能会更清楚：

```
list1 = [0,2,1,3]
list2 = ['a','a','d','m']

for x in list1:
    print(list2[x]),

=> a d a m 
```

# android - 停止打开第二个 Android 模拟器

> ID：15455230
> 
> 赞同：1
> 
> 时间：2013-03-16T22:02:52.253
> 
> 标签：android, android-emulator

嗨，我正在创建一个 Android 应用程序，但对它很陌生，所以遇到了一些问题。我正在使用模拟器来运行应用程序。但是我遇到的问题是，当我尝试调试应用程序时，它启动了第二个模拟器，它没有在文件资源管理器中显示我的 SQLite 数据库。有谁知道我怎么能：

1.  阻止第二个模拟器打开或
2.  让它在文件资源管理器中显示数据库？

在排序之前我无法调试应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:21:22.203

`right-clicking on your project` **只需通过-->** `Run As..` **-->** `Run Configuration`**-->** go to设置您要为项目运行的模拟器，在您想要的、您的设置和项目旁边`Target Tab`放一个。`V``AVD``Apply``Run`

下次当您在 Eclipse 环境中按下运行按钮时，这将是用于该项目的 AVD。

**更新：**

另一个选项是在`Target tab`刚刚设置的`Always prompt to pick device`. 这样，您将在运行应用程序之前收到提示。

**更新#2：**

when the windows for choosing a devices opens but you can't see your current device what you should do is to open your `command prompt`( `CMD`) and type: `adb kill-server`and then `adb logcat`to start the server. 您当前的设备将在设备选择窗口中更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:12:54.217

前段时间我在文件资源管理器中遇到了同样的问题，尝试使用这个插件：[sqlitemanager-plugin-for-eclipse](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/)。

# java - 对大 O 表示法感到困惑

> ID：15455233
> 
> 赞同：8
> 
> 时间：2013-03-16T22:02:59.940
> 
> 标签：java, big-o

我有两个问题：

```
public static void method1(int[] a, int[] b) {
   int sum1 = 0, sum2 = 0;

   for(int i = 0; i < a.length; i++) {
      sum1 += a[i];
   }

   for(int i = 0; i < b.length; i++) { 
      sum2 += b[i];
   }
} 
```

问题 1：这是在 O(n) 中吗？有多少个循环（不是嵌套循环）有关系`method1`吗？

问题2：如果有

```
Arrays.sort(a); 
```

在里面`method1`，它是什么功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T22:05:39.663

> 问题 1：这是在 O(n) 中吗？

这是正确的（这里，`n`表示两个数组中的每一个的长度）。

> 方法 1 中有多少个循环（不是嵌套循环）是否重要？

它不会，只要循环次数是固定的，并且每个循环中的迭代次数在`n`. 更正式地说，如果`C`是某个常数，`C*n`是`O(n)`。

> 问题2：如果有`Arrays.sort(a);`

排序通常是`O(n logn)`，这是[`Arrays.sort(int[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)平均*的*。该[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)对最坏情况的性能含糊不清：

> 该算法在许多数据集上提供 O(n log(n)) 性能，导致其他快速排序降低到二次性能，并且通常比传统的（单轴）快速排序实现更快。

这显然不能保证`O(n logn)`在*最坏的情况下*。字里行间的阅读表明它可能是`O(n^2)`.

有趣的是，在 JDK7 中，[`Arrays.sort(Object[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)使用的算法与[`Arrays.sort(int[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29). 前者是对 TimSort 的改编，因此应该保证`O(n logn)`最坏情况下的性能。不幸的是，文档再次没有说明这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:10:28.163

1.  一种。它是 O(n)，其中 n = 输入长度（总）
    b。是的，有多少循环很重要：如果它是恒定数量的循环 k，那么它就是 O(k*n)，通常被认为是 O(n)，但是如果 k >= n，则应该考虑到这一点

2.  `Arrays.sort(a);`使用合并排序实现，该排序在平均和最坏情况下都在 O(n log n) 中运行（不像 NPE 所说的那样！）。

**MrSmith42 的更新：**

来自[http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)：
*sort(Object[]) 使用的算法不必是 MergeSort，但它确实必须保持稳定。）*

并且：

*实施说明：排序算法是 Vladimir Yaroslavskiy、Jon Bentley 和 Joshua Bloch 的 Dual-Pivot Quicksort。该算法在许多数据集上提供 O(n log(n)) 性能，导致其他快速排序降低到二次性能，并且通常比传统的（单轴）快速排序实现更快。*

# c# - ClickOnce 使用 SQL Server Compact 数据库部署 WPF 应用程序

> ID：15455235
> 
> 赞同：0
> 
> 时间：2013-03-16T22:03:20.003
> 
> 标签：c#, .net, wpf, sql-server-ce-4

我读[了这篇](https://stackoverflow.com/questions/7976982/c-sharp-application-publish-errors-on-different-systems)文章，它显然解决了具有 SQL Server Compact 依赖项的 WPF 应用程序发布的问题。[我完成了这篇](http://erikej.blogspot.co.il/2011/02/using-sql-server-compact-40-with.html)文章作者规定的所有步骤， 但它对我不起作用。从 SQL Server Compact“私有”文件夹中添加所有 DLL 后，我的应用程序在启动时崩溃。不同之处在于我使用 .NET 4.5 而示例处理 4.0 我不确定这是否是问题的核心，但它不适用于这些设置。

我的应用程序因以下异常而崩溃：

> *System.Windows.Markup.XamlParseException*

这是我的`app.config`（包括文章中的补充）：

```
<?xml version="1.0"?>
<configuration>
   <connectionStrings>
      <add name="TypeAppRelease.Properties.Settings.MyDatabase_1ConnectionString"
           connectionString="Data Source=D:\XXXXXX\XXXXX\XXXXXXX\externals\MyDatabase#1.sdf;Password=XXXXXXX;Persist Security Info=True"
           providerName="Microsoft.SqlServerCe.Client.4.0"  />
   </connectionStrings>
   <system.data>    
      <DbProviderFactories>      
         <remove invariant="System.Data.SqlServerCe.4.0"/>      
         <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.1, 
               Culture=neutral, 
                PublicKeyToken=89845dcd8080cc91"/>    
      </DbProviderFactories>  
   </system.data>
   <startup> 
       <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
   </startup>
</configuration> 
```

还有一件事。我来到这里是因为只做 ClickOnce 发布产生的安装文件没有工作抱怨

> *该应用程序缺少必需的文件....*

因此，这使我找到了上面链接的解决方案，该解决方案似乎也不起作用。

**更新：**

我想扩展这个问题，因为直到没有我还没有解决它。我决定搁置 ClickOnce 部署，只在 2 台机器上测试 Debug/Release 构建：1）安装了 SQL Compact 服务器；2）只安装了 NET 框架。

该应用程序在第一台机器上运行正常，但在第二台机器上失败。这是非常合乎逻辑的，因为第一台机器安装并运行了 Compact SQL。

接下来，我从第一台机器上删除了服务器安装并再次运行该应用程序。它仍然有效，但不适用于第二台 PC。我得到的错误是

> System.IO.FileLoadException

我无法弄清楚为什么我得到它以及为什么我在第一台机器上没有得到相同的结果。

也许它是 64 / 32 位操作系统的东西？PC1 运行 Windows 7 64 位，而 PC2 x86。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:41:39.167

我使用 ADO.NET 对象（SqlCeCommand、DataSet）而不是实体框架（如我的博客文章中所述），您必须在项目文件夹（程序集版本 4.0.0.1）中引用 System.Data.SqlServerCe.dll 而不是 dll您的 GAC（程序集版本 4.0.0.0）。我已经用这些信息更新了我的博客文章。

# c - 比较c中的两个文件

> ID：15455242
> 
> 赞同：-2
> 
> 时间：2013-03-16T22:05:24.620
> 
> 标签：c, file, compare, argv, argc

正如标题所说，我需要比较 2 个文件。如果出现一行，这两个文件之间不一样，请打印该行（来自两个文件）。代码给出了不发送错误。我不能似乎能够在我的代码中找到错误。

```
#include <stdio.h>
#include <string.h>
#define MAX 1000

int main(int argc, char *argv[]) {
    char c1, c2;
    char s1[MAX], s2[MAX];
    char *p1;
    char *p2;
    FILE *fp1;
    FILE *fp2;
    fp1 = fopen(argv[1], "r");
    fp2 = fopen(argv[2], "r");
    p1 = s1;
    p2 = s2;
    if (argc != 3) {
        printf("Wrong use of program \n ");
        return -1;
    }
    if (fp1 == NULL || fp2 == NULL) {
        printf("One or both of the files can't be used \n ");
        return -1;
    }
    while ((c1 = getc(fp1)) != EOF || (c2 = getc(fp2)) != EOF) {
        *p1 = c1;
        *p2 = c2;
        p1++;
        p2++;

        for (c1 = getc(fp1); c1 != '\n'; p1++) {
            *p1 = c1;
        }
        *p1 = '\0';

        for (c2 = getc(fp2); c2 != '\n'; p2++) {
            *p2 = c2;
        }
        *p2 = '\0';
        if (!(strcmp(s1, s2))) {
            printf("%s \n ", s1);
            printf("%s \n ", s2);
            return 0;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:36:49.887

如果这两个文件是文本文件，那么老实说，我会从头开始使用一个更简单的程序，该程序使用 fgets() 而不是 getc() 并使用 strcmp() 而不是逐个字符逐行比较。代码中的错误太多了 - 如果您放弃现有的内容并使用更简单的解决方案重新开始，您将更快地完成任务。

顺便说一句，如果两个字符串相同，strcmp 返回零，如果它们不同，则返回非零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:35:06.597

在两个`for`循环上，你有循环`getc`的初始化部分，它会将一个字符放入`c1`and`c2`一次，然后执行循环，直到你超出`s1`和`s2`通过你的`p1`和`p2`指针的限制。因为`c1 != '\n'`除非你在行中的第一个字符是'\n'，否则永远不会遇到它可能会引发分段错误错误。

在 上`while`，至少在 gcc 和我的系统上，它会进行惰性评估（编辑：不是惰性而是短路评估，请参阅评论），`c2 = getc(fp2)`如果另一部分为真，则不执行该部分。

您也不会在每一行之后重置`p1`和。`p2`

`strcmp`如果两个字符串相等，则返回 0，在 C 中，0 为假，非零为真，因此您将在第一次匹配时退出。

这是您的代码的一个几乎无法运行的版本，您仍然需要对其进行处理并考虑到一个文件比另一个文件短，文件中的一行大于 1000 个字符（因为它现在会溢出）`s1`或`s2`) 等。

```
#include <stdio.h>
#include <string.h>
#define MAX 1000

int main(int argc, char *argv[]) {
  char c1, c2;
  char s1[MAX], s2[MAX];
  char *p1;
  char *p2;
  FILE *fp1;
  FILE *fp2;
  p1 = s1;
  p2 = s2;
  if (argc != 3) {
    printf("Wrong use of program \n ");
    return -1;
  }
  fp1 = fopen(argv[1], "r");
  fp2 = fopen(argv[2], "r");
  if (fp1 == NULL || fp2 == NULL) {
    printf("One or both of the files can't be used \n ");
    return -1;
  }
  c1 = getc(fp1);
  c2 = getc(fp2);
  while ((c1 != EOF) && (c2 != EOF)) {
    for (; c1 != '\n'; p1++) {
        *p1 = c1;
        c1 = getc(fp1);
    }
    *p1 = '\0';

    for (; c2 != '\n'; p2++) {
        *p2 = c2;
        c2 = getc(fp2);
    }
    *p2 = '\0';
    if ((strcmp(s1, s2)) != 0) {
        printf("%s\n", s1);
        printf("%s\n", s2);
        return 0;
    }
    c1 = getc(fp1);
    c2 = getc(fp2);
    p1 = s1;
    p2 = s2;
  }
  if (c1 != EOF || c2 != EOF)
    printf("One of the files ended prematurely\n");
  return 0;
} 
```

# java - 如何将按钮列表分组到一个按钮中？

> ID：15455243
> 
> 赞同：0
> 
> 时间：2013-03-16T22:05:24.993
> 
> 标签：java, swing, jpanel, accordion, jsplitpane

我正在开发一个摇摆应用程序，我想添加一个功能，但我不知道该怎么做。我的主框架的一部分包含一个面板，其中包含访问其他框架的按钮，我想对其添加一些增强功能，这是面板的图片：

![在此处输入图像描述](../Images/079c7324484eabefd15179270f1857eb.png)

我要添加的功能是，当我单击**Appel d'offre**按钮时，我希望它列出其他按钮的列表，换句话说，我想将所有按钮组合为一个。我找了一个例子来说明清楚，这是 Sage 软件的照片：

![在此处输入图像描述](../Images/981be689e7baffb4efe22394159f26b6.png)

那么我该怎么做呢，我必须添加哪些组件才能使其工作？我希望我澄清了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:48:39.370

这些控件称为*ExpandBar*或*Collapsible 面板*。

Swing 不提供这种类型的控件，但您可以创建自己的控件。

例如，[swingx 库](http://swingx.java.net/)也提供了一个。猜猜谷歌可以帮助您找到更多有关这些条款的信息。

# javascript - 数组中的最小数及其位置

> ID：15455247
> 
> 赞同：14
> 
> 时间：2013-03-16T22:06:05.370
> 
> 标签：javascript, arrays

我想要实现的是在数组中找到最小的数字及其初始位置。这是一个应该做什么的例子：

```
temp = new Array();
temp[0] = 43;
temp[1] = 3;
temp[2] = 23; 
```

所以最后我应该知道第 3 位和第 1 位。我也看过这里：[从 Javascript 中的数组中获取最小值？](https://stackoverflow.com/questions/8934877/obtain-smallest-value-from-array-in-javascript)，但是这种方式并没有给我在数组中的数字位置。感谢任何提示或代码片段。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T22:09:19.217

只需遍历数组并查找最小的数字：

```
var index = 0;
var value = temp[0];
for (var i = 1; i < temp.length; i++) {
  if (temp[i] < value) {
    value = temp[i];
    index = i;
  }
} 
```

现在`value`包含最小值，并`index`包含数组中存在此类值的最低索引。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T22:09:48.690

你想用`indexOf`

[http://www.w3schools.com/jsref/jsref_indexof_array.asp](http://www.w3schools.com/jsref/jsref_indexof_array.asp)

使用您之前拥有的代码，来自另一个问题：

```
temp = new Array();
temp[0] = 43;
temp[1] = 3;
temp[2] = 23;

Array.min = function( array ){
    return Math.min.apply( Math, array );
};

var value = temp.min;
var key = temp.indexOf(value); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-07T16:54:26.110

单线：

```
alist=[5,6,3,8,2]

idx=alist.indexOf(Math.min.apply(null,alist)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-11T06:39:47.970

请参阅[此问题](https://stackoverflow.com/a/30850912/8573978)的“查找最大值”版本的答案。它既简单又好。之后您可以使用索引来获取元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-19T18:26:20.407

您可以使用 reduce，并与`Infinity`.

```
let minIndex = -1;
arr.reduce((acc, curr, index) => {
    if (curr < acc) {
        minIndex = index;
        return curr;
    } else {
        return acc;
    }
}, Infinity); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-28T13:34:37.137

`Math.min`使用和 展开运算符求最小值：

```
var minimumValue = Math.min(...temp); 
```

然后使用以下方法查找索引`indexOf`：

```
var minimumValueIndex = temp.indexOf(minimumValue); 
```

我个人更喜欢扩展运算符而不是`apply`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-02T21:55:29.580

这是使用简单递归的解决方案。输出是一个包含最小数的索引位置和最小数本身的对象

```
const findMinIndex = (arr, min, minIndex, i) => {
  if (arr.length === i) return {minIndex, min};
  if (arr[i] < min) {
    min = arr[i]
    minIndex = i;
  }
  return findMinIndex(arr, min, minIndex, ++i)

}

const arr = [5, 5, 22, 11, 6, 7, 9, 22];
const minIndex = findMinIndex(arr, arr[0], 0, 0)
console.log(minIndex);
```

# actionscript-3 - mx.flex.container 中的 contentPane 问题吃掉鼠标输入

> ID：15455248
> 
> 赞同：1
> 
> 时间：2013-03-16T22:06:18.070
> 
> 标签：actionscript-3, apache-flex

我正在开发一个游戏，它使用 mx 画布（每个画布在自己的 mxml 文件中）来包装应用程序的不同方面。所以 UI 被包裹在一个画布中，主游戏屏幕被包裹在另一个画布中，依此类推。我遇到了一个问题，`MouseEvent.CLICK`即我想要转到一个movieClip 的鼠标输入（特别是，但它似乎适用于所有鼠标输入）`GameScreen.mxml`被一个`mx.core.FlexSprite`名为“ `contentPane`”的对象捕获，该对象是`GameUI.mxml`.

当对象被实例化时，这个`contentPane`精灵不存在`GameUI`，事实上，直到我设置一些`textFields`包含在`GameUI`. 这些确实与我想要接收鼠标输入的内容`textFields`重叠，但它们本身被设置为，并且没有捕捉到鼠标输入。`movieClip``textFields``mouseEnabled = false`

我的代码都没有直接创建这个`contentPane`精灵，一些基本的谷歌搜索告诉我这个`contentPane`精灵是由`mx.flex.container`内部创建的。但是，我似乎找不到任何关于它实际上是如何工作的文档，以及是什么导致了这个精灵被创建。

此功能以前有效，我知道最近唯一的重大变化是将加载到它们自己的应用程序域中的 swfs 移动`GameUI`到它们自己的应用程序域中以修复命名空间冲突。我完全准备好相信这就是问题所在。

理想情况下，我想知道为什么这`contentPane`会突然捕捉到鼠标输入。如果做不到这一点，我至少想找到一些关于如何`contentPane`工作、如何操作以及导致其实例化的文档。

预先感谢您的帮助。

编辑：

我做了一些额外的挖掘，并想分享我学到的东西：

该`contentPane`变量在`mx.core.container`对象中实例化以用于滚动和剪辑目的。如果对象的内容`mx.core.container`超过该对象的大小，容器将创建一个`contentPane`并将其内容移动到该窗格中。但是，如果禁用滚动 ( `verticalScrollPolicy="off"`& `horizontalScrollPolicy="off"`) 并禁用剪辑 ( `clipContent="false"`)，则容器不会实例化`contentPane`. 这解决了我的具体问题，因为我不需要在此容器中进行滚动或剪切行为。

我仍然想知道是否有办法禁用鼠标输入`mx.core.container` `contentPane`。好像应该有。

# php - 从超时停止无限循环

> ID：15455251
> 
> 赞同：0
> 
> 时间：2013-03-16T22:06:40.300
> 
> 标签：php, file-get-contents

基本上，我有一个使用 执行无限循环的脚本`file_get_contents`，它基本上只是运行函数然后递增`$_GET`传递给`file_get_contents`url 的变量，问题显然是它为“重定向太多”引发错误，是他们的我可以在 Cron Job 上做到这一点，或者没有错误地做到这一点，这是我当前的代码

```
$id = $_GET['id'];
$next_id = $id + 1;
$url = "http://www.website.com/profile/$id.json";
$json = file_get_contents($url);
$result = json_decode($json, true);

$headers = get_headers($url);
if($headers[0] !== "HTTP/1.1 404 Not Found") {
  $query = mysql_query("query here");
  if($query) {
       echo '<script type="text/javascript">
       <!-- window.location = "import.php?id='.$next_id.'" //-->
       </script>';
  } else {
       echo '<script type="text/javascript">
       <!-- window.location = "import.php?id='.$id.'" //-->
       </script>';
  }
} 
```

有没有其他方法或更有效的方法来做到这一点？我已经尝试`sleep(5)`过使用我的重定向之前的方法，但它似乎仍在继续这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:15:22.083

尝试在 JavaScript 中的重定向之前添加暂停：

```
echo '<script type="text/javascript">
<!-- window.setTimeout("window.location = \"import.php?id='.$next_id.'\"", 5000); //-->
</script>'; 
```

# android - 为什么程序得到“su”后仍然不截图？

> ID：15455258
> 
> 赞同：0
> 
> 时间：2013-03-16T22:07:38.830
> 
> 标签：android, screenshot, root, framebuffer, su

我按下按钮并程序获取 SU，但 png 文件的重量为 0 字节。Logcat 说

> 权限被拒绝：无法读取帧缓冲区 pid=12844 uid=10087。

那为什么会这样。我的手机已经root了，程序已经得到了su。怎么了？

```
Button btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener (new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    Process process = Runtime.getRuntime().exec("su");
                    Process pr = Runtime.getRuntime().exec("/system/bin/screencap -p /sdcard/s.png");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:33:17.460

你应该使用这个，它应该有更好的支持：

```
@Override
public void onCLick(View v)
 try{
    Process process = Runtime.getRuntime().exec("su");
    DataOutputStream os = new DataOutputStream(process.getOutputStream());

    os.writeBytes("/system/bin/screencap -p /sdcard/s.png\n");
    os.writeBytes("exit\n");
    os.flush();
    os.close();

    process.waitFor();
 } catch (Exception e){
 };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:11:41.517

试试这个：

```
 @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                Runtime.getRuntime().exec("su -c /system/bin/screencap -p /sdcard/s.png");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }); 
```

# jquery - 解析多维 JSON

> ID：15455264
> 
> 赞同：-1
> 
> 时间：2013-03-16T22:08:08.767
> 
> 标签：jquery, json, parsing

我有如下所示的 JSON：

```
[
    {
        "Date": "2009-07-06",
        "Open": "406.50",
        "High": "410.64",
        "Low": "401.66",
        "Close": "409.61",
        "Volume": "2262600",
        "Adj Close": "409.61"
    },
    {
        "Date": "2009-07-02",
        "Open": "415.41",
        "High": "415.41",
        "Low": "406.81",
        "Close": "408.49",
        "Volume": "2517600",
        "Adj Close": "408.49"
    }
] 
```

我确信它是有效的 JSON，但我不确定如何使用 jQuery 的 $.parseJSON() 解析它。我遇到了一个问题，因为这两个主要团体没有头衔，我想。它创建了一个对象列表，但我不知道如何访问这些对象。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:11:18.397

它创建一个对象数组，如下所示：

```
var json = '[{"Date": "2009-07-06","Open": "406.50","High": "410.64","Low": "401.66","Close": "409.61","Volume": "2262600","Adj Close": "409.61"},{"Date": "2009-07-02","Open": "415.41","High": "415.41","Low": "406.81","Close": "408.49","Volume": "2517600","Adj Close": "408.49"}]';

var valid = $.parseJSON(json); 
```

访问喜欢

```
valid[0]; // first one
valid[1]; // second one
valid[1].Open; //Open in second one 
```

[**小提琴**](http://jsfiddle.net/uzHXh/1/)

# python - 将 FIX 消息解压缩到 python 字典中的最佳方法是什么？

> ID：15455267
> 
> 赞同：0
> 
> 时间：2013-03-16T22:08:34.690
> 
> 标签：python

字符串看起来像这样：

```
input = 'key1=val1\001key2=val2\001key3=val3\001key4=val4' 
```

其中 \001 是分隔符

```
message = {} 
```

呃……现在呢？我知道我可以做类似的事情

```
my_list = imput.split('\001')
my_dict = {}

for pair in my_list:
    tup = pair.split('=')
    my_dict[tup[0]] = tup[1] 
```

这行得通，但看起来真的很难看。肯定有更好的办法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:19:00.423

你喜欢吗：

```
>>> dict(p.split('=') for p in input.split('\001'))
{'key3': 'val3', 'key2': 'val2', 'key1': 'val1', 'key4': 'val4'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:31:30.303

或者是这样的：

```
import re
fixMsg = 'key1=val1\001key2=val2\001key3=val3\001key4=val4'
d = dict(re.findall("(.*?)=(.*?)\001", fixMsg+'\001')) 
```

# java - jython manage.py 运行服务器

> ID：15455268
> 
> 赞同：0
> 
> 时间：2013-03-16T22:08:44.333
> 
> 标签：java, django, jython, manage.py

Windows 7、64 位
Jython 2.5.4rc1
Django 1.4.5
Django_jython-1.3.0

我正在尝试遵循教程@ [https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

```
django-admin.py startproject mysite 
```

工作正常，我现在有了我的项目结构。但是之后

```
jython manage.py runserver 
```

产生了巨大的回溯错误。这里只是从开头，中间和结尾的摘录。
它始于：

```
Traceback (most recent call last):  
  File "manage.py", line 10, in (module)  
    execute_from_command_line(sys.argv)  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py", line 443, in execute_from_command_line  
    utility.execute()  
... 
```

继续：

```
...  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\utils\importlib.py", line 35, in import_module  
    __import__(name)  
java.lang.ArrayIndexOutOfBoundsException: 2560  
        at org.python.objectweb.asm.CLassReader.accept(Unknown Source)  
        at org.python.objectweb.asm.ClassReader.accept(Unknown Source)  
... 
```

总结：

```
...  
        at org.python.util.jython.run(jython.java:247)  
        at org.python.util.jython.main(jython.java:129)  

java.lang.ArrayIndexOutOfBoundsException: java.lang.ArrayIndexOutOfBoundsException 2560 
```

这绝对不是预期的结果。我可以想象这是某种配置问题，但我不知道是什么。

非常感谢您提供的所有帮助。

这是完整的错误：

```
e:\Django\Tutorials>dir    
 Datenträger in Laufwerk E: ist Executables  
 Volumeseriennummer: 82AF-DF4C  

 Verzeichnis von e:\Django\Tutorials  

16.03.2013  21:02    <DIR>          .  
16.03.2013  21:02    <DIR>          ..  
16.03.2013  21:02    <DIR>          mysite  
               0 Datei(en),              0 Bytes  
               3 Verzeichnis(se), 36.824.600.576 Bytes frei  

e:\Django\Tutorials>cd mysite  

e:\Django\Tutorials\mysite>jython manage.py runserver  
Traceback (most recent call last):  
  File "manage.py", line 10, in <module>  
    execute_from_command_line(sys.argv)  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py", line 443, in execute_from_command_line  
    utility.execute()  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py", line 382, in execute  
    self.fetch_command(subcommand).run_from_argv(self.argv)  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py", line 252, in fetch_command  
    app_name = get_commands()[subcommand]  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py", line 252, in fetch_command  
    app_name = get_commands()[subcommand]  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py", line 101, in get_commands  
    apps = settings.INSTALLED_APPS  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py", line 101, in get_commands  
    apps = settings.INSTALLED_APPS  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\utils\functional.py", line 184, in inner self._setup()  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\conf\__init__.py", line 42, in _setup  
    self._wrapped = Settings(settings_module)  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\conf\__init__.py", line 93, in __init__  
    mod = importlib.import_module(self.SETTINGS_MODULE)  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\conf\__init__.py", line 93, in __init__  
    mod = importlib.import_module(self.SETTINGS_MODULE)  
  File "E:\jython2.5.4rc1\Lib\site-packages\django\utils\importlib.py", line 35, in import_module  
    __import__(name)  
java.lang.ArrayIndexOutOfBoundsException: 2560  
        at org.python.objectweb.asm.ClassReader.accept(Unknown Source)  
        at org.python.objectweb.asm.ClassReader.accept(Unknown Source)  
        at org.python.core.AnnotationReader.<init>(AnnotationReader.java:44)  
        at org.python.core.imp.readCode(imp.java:219)  
        at org.python.core.imp.createFromPyClass(imp.java:185)  
        at org.python.core.imp.loadFromSource(imp.java:572)  
        at org.python.core.imp.find_module(imp.java:478)  
        at org.python.core.imp.import_next(imp.java:718)  
        at org.python.core.imp.import_module_level(imp.java:827)  
        at org.python.core.imp.importName(imp.java:917)  
        at org.python.core.ImportFunction.__call__(__builtin__.java:1220)  
        at org.python.core.PyObject.__call__(PyObject.java:387)  
        at org.python.core.PyObject.__call__(PyObject.java:391)  
        at django.utils.importlib$py.import_module$2(E:\jython2.5.4rc1\Lib\site-packages\django\utils\importlib.py:36)  
        at django.utils.importlib$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\utils\importlib.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:301)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:127)  
        at org.python.core.PyFunction.__call__(PyFunction.java:317)  
        at django.conf$py.__init__$8(E:\jython2.5.4rc1\Lib\site-packages\django\conf\__init__.py:135)  
        at django.conf$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\conf\__init__.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:301)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:194)  
        at org.python.core.PyFunction.__call__(PyFunction.java:387)  
        at org.python.core.PyMethod.instancemethod___call__(PyMethod.java:220)  
        at org.python.core.PyMethod.__call__(PyMethod.java:211)  
        at org.python.core.PyMethod.__call__(PyMethod.java:206)  
        at org.python.core.Deriveds.dispatch__init__(Deriveds.java:19)  
        at org.python.core.PyObjectDerived.dispatch__init__(PyObjectDerived.java:1057)  
        at org.python.core.PyType.type___call__(PyType.java:1565)  
        at org.python.core.PyType.__call__(PyType.java:1548)  
        at org.python.core.PyObject.__call__(PyObject.java:387)  
        at org.python.core.PyObject.__call__(PyObject.java:391)  
        at django.conf$py._setup$2(E:\jython2.5.4rc1\Lib\site-packages\django\conf\__init__.py:42)  
        at django.conf$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\conf\__init__.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:134)  
        at org.python.core.PyFunction.__call__(PyFunction.java:317)  
        at org.python.core.PyMethod.__call__(PyMethod.java:109)  
        at django.utils.functional$py.inner$26(E:\jython2.5.4rc1\Lib\site-packages\django\utils\functional.py:185)  
        at django.utils.functional$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\utils\functional.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:301)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:141)  
        at org.python.core.PyFunction.__call__(PyFunction.java:327)  
        at org.python.core.PyMethod.__call__(PyMethod.java:124)  
        at org.python.core.PyMethod.__call__(PyMethod.java:115)  
        at org.python.core.Deriveds.__findattr_ex__(Deriveds.java:73)  
        at org.python.core.PyObjectDerived.__findattr_ex__(PyObjectDerived.java:983)  
        at org.python.core.PyObject.__getattr__(PyObject.java:923)  
        at django.core.management$py.get_commands$4(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py:114)  
        at django.core.management$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:120)  
        at org.python.core.PyFunction.__call__(PyFunction.java:307)  
        at django.core.management$py.fetch_command$15(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py:262)  
        at django.core.management$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:149)  
        at org.python.core.PyFunction.__call__(PyFunction.java:327)  
        at org.python.core.PyMethod.__call__(PyMethod.java:124)  
        at django.core.management$py.execute$19(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py:382)  
        at django.core.management$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:134)  
        at org.python.core.PyFunction.__call__(PyFunction.java:317)  
        at org.python.core.PyMethod.__call__(PyMethod.java:109)  
        at django.core.management$py.execute_from_command_line$21(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py:443)  
        at django.core.management$py.call_function(E:\jython2.5.4rc1\Lib\site-packages\django\core\management\__init__.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyBaseCode.call(PyBaseCode.java:134)  
        at org.python.core.PyFunction.__call__(PyFunction.java:317)  
        at org.python.pycode._pyx2.f$0(manage.py:10)  
        at org.python.pycode._pyx2.call_function(manage.py)  
        at org.python.core.PyTableCode.call(PyTableCode.java:165)  
        at org.python.core.PyCode.call(PyCode.java:18)  
        at org.python.core.Py.runCode(Py.java:1275)  
        at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:235)  
        at org.python.util.jython.run(jython.java:247)  
        at org.python.util.jython.main(jython.java:129)  

java.lang.ArrayIndexOutOfBoundsException: java.lang.ArrayIndexOutOfBoundsException: 2560 
```

我期待任何建议。

# objective-c - 在 UITableViewController 中居中对象

> ID：15455283
> 
> 赞同：0
> 
> 时间：2013-03-16T22:10:54.913
> 
> 标签：objective-c, uitabbarcontroller, uilabel, center

我在 UITabbarController 中有两个视图，其中 tableViews 使用此代码完美居中

```
float origenX = [self locationTable].contentSize.width * .1;
float origenY = ([[self view] frame].size.height / 2) - ([self        locationTable].contentSize.height / 2);
float sizeW = [self locationTable].contentSize.width * .8;
float sizeH = [self locationTable].contentSize.height;
CGRect newFrame = CGRectMake(origenX, origenY, sizeW, sizeH);

[[self locationTable] setFrame:newFrame]; 
```

但是在同一个viewController的另一个视图中，我有一个标签并尝试以相同的方式对其进行间隔

```
float labelW = [[UIScreen mainScreen] bounds].size.width * .8;
float labelH = [[UIScreen mainScreen] bounds].size.height * .6;
float x = ([[UIScreen mainScreen] bounds].size.width / 2) - (labelW / 2);
float y = ([[UIScreen mainScreen] bounds].size.height / 2) - (labelH / 2);

[[self infoLabel] setFrame:CGRectMake(x, y, labelW, labelH)]; 
```

只有标签在 Y 轴上未正确居中。我已经尝试通过使用获取大小来居中

```
[[UIScreen mainScree] bounds].height /  2
[[self view] superView] bounds].height / 2
[[self view] bounds].height / 2 
```

有任何想法吗？为什么我可以轻松地将它与 tableView 居中而不是标签？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:45:00.797

你为什么不利用

```
CGRectInset
Returns a rectangle that is smaller or larger than the source rectangle, with the same center point. 
```

例如：

```
UIView *baseView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 100,100)];
[baseView setBackgroundColor:[UIColor blackColor]];
UIView *innerView = [[UIView alloc] initWithFrame:CGRectInset(baseView.bounds, 20, 20)];
[innerView setBackgroundColor:[UIColor grayColor]];
NSLog(@"%@",NSStringFromCGRect(baseView.bounds));
NSLog(@"%@",NSStringFromCGRect(baseView.frame));
NSLog(@"%@",NSStringFromCGRect(CGRectInset(baseView.bounds, 8, 8)));
[baseView addSubview:innerView];
[self.view addSubview:baseView]; 
```

UILabel 从 UIView 继承，因此您可以使用`-setCenter:`方法来设置中心点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:01:47.063

谢谢大家，经过大量的试验和错误，我无法让它以编程方式对齐。我必须把它放在IB中。表格是动态调整大小的，因此这很重要，但标签始终是相同大小的，因此不需要移动。

# c++ - LinkedList 类中的节点类

> ID：15455284
> 
> 赞同：4
> 
> 时间：2013-03-16T22:10:56.233
> 
> 标签：c++, linked-list

我想创建一个 LinkedList 类，我必须将 Node 类放在 LinkedList 类中，你喜欢我怎么做？

我认为是这样的：

```
Class LinkedList {
  private:
    class Node* head;
  public:
    class Node {
      private:
        int data;
        Node* next;  
        Node* prev;
    };
}; 
```

但我认为这不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:17:29.737

我会这样做

```
class LinkedList {
  private:
    struct Node {
        int data;
        Node* next;  
        Node* prev;
    };
    Node* head;
  public:
    ...
}; 
```

Node 中的任何内容都不需要私有，因为它在 LinkedList 之外无法使用。

# php - laravel css 和 jquery 403 错误

> ID：15455286
> 
> 赞同：1
> 
> 时间：2013-03-16T22:11:03.050
> 
> 标签：php, css, laravel

我正在使用 laravel 3.x 和 wamp 我已经工作了几个小时来修复公用文件夹以将其删除，我已经成功了。我的问题是，当我转到[http://laravel.dev](http://laravel.dev) css 文件和 js 文件未加载时，在我的控制台中出现 403 错误 NetworkError：

```
403 Forbidden - http://localhost/laravel/public/laravel/css/style.css 
```

这是我`.htaccess`的公用文件夹

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine On
</IfModule>

<IfModule mod_rewrite.c>
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-01T21:39:42.860

导航
`your-project-folder/app/config/app.php`

并替换此行

```
'url' => 'http://localhost', 
```

使用您的新域名。

当您将 Laravel 应用程序移至新域时，会出现此问题。例如，从您的本地主机到实时生产环境。干杯！

# jquery - 我的 jquery 加载脚本无法正常工作，为什么？

> ID：15455287
> 
> 赞同：-3
> 
> 时间：2013-03-16T22:11:08.660
> 
> 标签：jquery, load

我只是想加载一个 PHP 文件并替换一个 div 的内容，但我无法让负载正常工作。

```
$(document).ready(
    $('img.img1').click(function(){
        $('Close-div-1').load('gcard_save.php');
        document.getElementById("demo").innerHTML= "<img src=' http://prisonpulse.com/wp-content/uploads/2013/03/1363064428581.jpg ' .. />";
    })
); 
```

我已经用完了可以尝试的东西，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:14:24.187

HTML中没有`Close-div-1`元素，我认为您正在寻找一个id：

```
$('#Close-div-1') 
```

或一类：

```
$('.Close-div-1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:15:16.273

每个事件都需要 jQuery 中的回调函数。请查看[文档](http://api.jquery.com/ready/)，看看为什么这段代码是完全错误的。或者看看控制台（IE 中的 Ctrl + J 或 F12），看看你得到了什么错误。

```
$(document).ready(function () {
    $('img.img1').click(function (){
        $('Close-div-1').load('gcard_save.php');

        document.getElementById("demo").innerHTML= "<img src=' http://prisonpulse.com/wp-content/uploads/2013/03/1363064428581.jpg ' .. />";
    });
}); 
```

* * *

编辑：我不得不重新格式化你的代码才能看到这个错误。它确实可以帮助您使代码可读（这意味着缩进一致，使用一些空格等）

# javascript - 通过 html 按钮更改变量

> ID：15455289
> 
> 赞同：8
> 
> 时间：2013-03-16T22:11:34.400
> 
> 标签：javascript, html, var

我正在学习 javascript，我决定创建简单的 Rock、Paper、Scissors 游戏。我想让它可以通过按钮控制。所以我用html做了这个：

```
<div id="game">
    <button onClick="user(rock)">Rock</button>
    <button onClick="user(paper)">Paper</button>
    <button onClick="user(scissors)">Scissors</button>
    <div id="result"></div>
    <br>
    <br>
    <button onClick="test()">DEBUG</button>
</div> 
```

这在 .js 文件中。

```
var user = "none";
function user(choice){
    var user = choice;
}

function test(click){
    alert("You chose " + user);
} 
```

所以我认为点击 Rock 按钮后，它会将 var 用户更改为 rock，但事实并非如此。在我点击摇滚然后调试按钮后，我得到“你没有选择”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T22:18:24.447

```
<div id="game">
    <button onClick="choose('rock')">Rock</button>
    <button onClick="choose('paper')">Paper</button>
    <button onClick="choose('scissors')">Scissors</button>
    <div id="result"></div>
    <br>
    <br>
    <button onClick="test()">DEBUG</button>
</div> 
```

和

```
var user;
function choose(choice){
    user = choice;
}

function test(click){
    alert("You chose " + user);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T22:14:19.477

`var`用于声明变量。您不需要在函数中`user`再次声明变量。`user`您只需要为声明的值分配一个值。

```
var user; //declaration
function user(choice) {
    user = choice; //assignment
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T22:14:21.587

一个问题：

```
var user = "none";
function user(choice){
    var user = choice;
} 
```

用户的一个变量隐藏了用户的另一个变量。

并且拥有同名的函数和变量是一个坏主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T22:16:07.413

在函数范围内使用的[`var`](https://stackoverflow.com/questions/1470488/difference-between-using-var-and-not-using-var-in-javascript)关键字将声明一个新的局部变量。

因此，在全局范围内，`user`保留 value `"none"`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T22:31:46.040

也许试试这个.. 更清洁的标记.. 使用 jQuery

```
<div id="game">
    <button class="user" data-name="rock">Rock</button>
    <button class="user" data-name="paper">Paper</button>
    <button class="user" data-name="scissors">Scissors</button>
    <div id="result"></div>
    <br>
    <br>
    <button id="test">DEBUG</button>
</div>

$(document).ready(function() {
    var user = "none";
    $(".user").click(function() {
       user = $(this).attr("data-name");
    });

    $("#test").click(function() {
       alert(user);
    });
}); 
```

[http://jsfiddle.net/rQDbe/](http://jsfiddle.net/rQDbe/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T22:16:24.403

似乎是一个范围界定问题。尝试删除函数内的 var。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T22:17:19.953

其他答案正在解决一些问题。在作为变量传递时调用函数的方式也存在问题`rock`，您需要使用字符串：

```
<button onClick="user('rock')">Rock</button> 
```

除非您在某处声明变量但它没有显示在您的代码中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-16T22:19:49.703

选择应包含在引号中，javascript 正在寻找名为 paper 的变量等。

```
<button onClick="user(rock)">Rock</button>
<button onClick="user(paper)">Paper</button>
<button onClick="user(scissors)">Scissors</button> 
```

# javascript - Acrobat 10：每当在下拉列表中突出显示不同的项目时运行 Javascript

> ID：15455295
> 
> 赞同：1
> 
> 时间：2013-03-16T22:11:51.970
> 
> 标签：javascript, pdf, acrobat

我想知道是否可以让javascript根据用户在实际选择选项之前在下拉框中突出显示不同选项来更改其他字段的值？

因此，让用户在选择项目之前使用鼠标或箭头键在列表中导航。我希望其他文本框由于这种滚动而改变它们的值。

为了记录，我已经搜索了很多。此外，事件动作（即鼠标向上、鼠标向下）仅在首次输入下拉框时起作用。不是在随后的行动中……至少据我所知。我也有`commit selected value immediately checked`，这很有帮助，因为你不必在它开火之前离开盒子。

我想要的可能吗？或者脚本只能在提交选择后运行？

![落下](../Images/9c1db92c7598651ff39ec4d7f04e05d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-18T06:30:04.417

下拉属性>计算>自定义计算脚本。将脚本放在该框中，以便立即更新另一个地方。

在脚本中使用此公式：

```
var one = this.getField("fieldName 1").value; //fieldname 1 should be name of dropdown field//

if(one=="Administration") getField("fieldName 2").value = "Chief";<br>
if(one=="Apparatus Maintenance") getField("fieldName 2").value = "Engineer";<br>
if(one=="Confined Space") getField("fieldName 2").value = "Rescue Technician"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:48:48.743

**我认为每当用户使用键盘**更改突出显示的选项时，您应该能够触发一些 JavaScript 。因为每当按下一个键时，就会触发组合的 OnKeyPress 事件。

对鼠标的支持比较棘手。当用户将鼠标指针悬停在组合中的某个项目上时，不会触发任何事件。仅当用户实际单击选项时才会触发相同的 OnKeyPress 事件。

# ruby - 来自 Ruby 的低延迟音频播放

> ID：15455296
> 
> 赞同：1
> 
> 时间：2013-03-16T22:11:52.957
> 
> 标签：ruby, audio, playback

我正在用 Ruby 构建一个需要低延迟音频播放的音频应用程序。到目前为止，我正在使用 SDL，这对于原型来说非常有用，但它的性能还远远不够满足我的需要。

我尝试过使用`ruby-jack`gem，但它似乎还不够完整，无法将任何音频注入播放端口（并且文档非常不完整）。

如果它变化很大，我在 OS X 上（但我想要一些体面的跨平台的东西），而且我（目前）正在播放小的 WAV 文件，但更多格式会更好。我也不想特别想调用系统应用程序来执行此操作。

我的应用程序的完整源代码可[在 Github 上](http://github.com/jashank/crippledmegagram/blob/master/crippledmegagram.rb)获得；对于那些想看看的人来说，它的显着特点是[要点。](http://gist.github.com/5179273)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:18:48.353

我不太确定我是否有正确的答案给你，但我相信你花时间研究 rbSFML 可能是值得的。它是 SFML 的绑定，这是一个越来越受欢迎的多媒体库。

去这里 rbSFML [http://groogy.se/mainsite/rbsfml/](http://groogy.se/mainsite/rbsfml/)

SFML 主页 [http://www.sfml-dev.org/](http://www.sfml-dev.org/)

希望我有更多的信息给你！

# javascript - 骨干路由器问题 - 通过 URL 访问时不会加载特定操作

> ID：15455299
> 
> 赞同：0
> 
> 时间：2013-03-16T22:12:09.510
> 
> 标签：javascript, jquery, backbone.js, router

有人可以查看下面的代码并告诉我为什么在访问 domain.com/#issue/1 时它显示默认操作是列表而不是？但是当点击 click 元素并且 url 更改为 #issue/1 时，它实际上可以工作。

```
// Destroy Views
Backbone.View.prototype.close = function () {
    console.log('Closing view ' + this);
    if (this.beforeClose) {
        this.beforeClose();
    }
    this.remove();
    this.unbind();
};

// Backbone Router
var AppRouter = Backbone.Router.extend({

    initialize:function () {
        $('#header').html(new HeaderView().render().el);
    },

    routes:{
        "issue/add":"addIssue",
        "issue/:id":"viewIssue",
        "":"list",
    },

    list:function () {
        this.before(function () {
            console.log('test');
            this.issueList = new IssueCollection();
            this.issueListView = new IssueListView({model:this.issueList});
            this.issueList.fetch();
            app.showView('#content', new IssueListView({model:this.issueList}));
        });
    },

    viewIssue:function (id) {
        console.log(id, app.issueList);
        this.before(function () {
            var issue = app.issueList.get(id);
            app.showView('#content', new IssueView({model:issue}));
        });
    },

    addIssue:function () {
        this.before(function () {
            app.showView('#content', new IssueView({model:new Issue()}));
        });
    },

    showView:function (selector, view) {
        if (this.currentView)
            this.currentView.close();
        $(selector).html(view.render().el);
        this.currentView = view;
        return view;
    },

    before:function (callback) {
        if (this.issueList) {
            if (callback) callback();
        } else {
            this.issueList = new IssueCollection();
            this.issueListView = new IssueListView({model:this.issueList});
            this.issueList.fetch();
            $('#content').html(this.issueListView.render().el);
        }
    }

});

tpl.loadTemplates(['header', 'issue-details', 'issue-item', 'issues-list'], function () {
    app = new AppRouter();
    Backbone.history.start();
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:12:28.690

通过执行以下操作解决了这个问题：

似乎 tpl.loadTemplates 与它无关，而是使用回调执行 .before 函数的方式。

```
// Destroy Views
Backbone.View.prototype.close = function () {
    console.log('Closing view ' + this);
    if (this.beforeClose) {
        this.beforeClose();
    }
    this.remove();
    this.unbind();
};

// Backbone Router
var AppRouter = Backbone.Router.extend({
    initialize:function () {

        $('#header').html(new HeaderView().render().el);
    },

    routes:{
        "issue/add":"addIssue",
        "issue/:id":"viewIssue",
        "":"list",
    },

    list:function () {
        console.log('List Route');
        this.before(function () {
            this.issueList = new IssueCollection();
            this.issueListView = new IssueListView({model:this.issueList});
            this.issueList.fetch();
            app.showView('#content', new IssueListView({model:this.issueList}));
        });
    },

    viewIssue:function (id) {
        console.log('View Issue Route ' + id);
        this.before(function () {
            var issue = app.issueList.get(id);
            app.showView('#content', new IssueView({model:issue}));
        });
    },

    addIssue:function () {
        console.log('Add Issue Route');
        this.before(function () {
            app.showView('#content', new IssueView({model:new Issue()}));
        });
    },

    showView:function (selector, view) {
        if (this.currentView)
            this.currentView.close();
        $(selector).html(view.render().el);
        this.currentView = view;
        return view;
    },

    before:function (callback) {
        if(!this.issueList) {
            this.issueList = new IssueCollection();
            this.issueListView = new IssueListView({model:this.issueList});
            this.issueList.fetch({
                success: function(coll, resp) {
                  if(callback) {
                    callback();
                  }
                }});
        } else {
            if(callback) {
                callback();
            }
        }
    }

});

tpl.loadTemplates(['header', 'issue-details', 'issue-item', 'issues-list'], function () {
    app = new AppRouter();
    Backbone.history.start();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:14:11.730

我相信这与您加载路由器的方式有关`tpl.loadTemplates()`。我在 jsfiddle 上重新创建了这个问题，当你转到显示 url 时问题就消失了：

[http://jsfiddle.net/HXE7K/](http://jsfiddle.net/HXE7K/)

工作示例：

*   [http://jsfiddle.net/HXE7K/show/](http://jsfiddle.net/HXE7K/show/)
*   [http://jsfiddle.net/HXE7K/show/#issue/1](http://jsfiddle.net/HXE7K/show/#issue/1)
*   [http://jsfiddle.net/HXE7K/show/#issue/add](http://jsfiddle.net/HXE7K/show/#issue/add)

# sql-server-2008 - 使用 Microsoft Server Management Studio 连接到 sql server 2008

> ID：15455300
> 
> 赞同：5
> 
> 时间：2013-03-16T22:12:11.363
> 
> 标签：sql-server-2008, ssms

我在连接到我的 MS SQL Server 时遇到困难，我找不到教程或回答如何做到这一点，即使我认为这应该是相当标准的东西。

我目前的设置是这样的 - 我有全新的安装视觉`Studio 2010`和后续`Beth Massi's`文章`Step-by-Step: Installing SQL Server Management Studio 2008 Express after Visual Studio 2010`：http: [//blogs.msdn.com/b/bethmassi/archive/2011/02/18/step-by-step-installing-sql-server- management-studio-2008-express-after-visual-studio-2010.aspx](http://blogs.msdn.com/b/bethmassi/archive/2011/02/18/step-by-step-installing-sql-server-management-studio-2008-express-after-visual-studio-2010.aspx)

但我无法连接到 SQL Server。在`Configuration Tools\SQL Server Configuration Manager`我打开它时我看到了这个：

![配置管理器主视图](../Images/46e4c4f9ba42742f0b64170cae1de3de.png)

我设置为`Enable`all`TCP\IP`并且`Named Pipes`（刚刚看到这可能是一个问题）并且在`SQL Server (SQLEXPRESS)`from Services 的属性中我看到了这个：

![SQL 配置属性](../Images/410a6c4e614cb8168144d7b4b5d66e15.png)

我还在`Log On`标签中看到了这个：

![SQL 配置传递](../Images/e9815d9ccfa9634719cda5f091ffa763.png)

某种密码（不是我输入的）它似乎是默认设置，但由于我不确定问题出在哪里，我尝试展示我认为可能与解决我的问题有关的所有内容。

最后，我尝试了不同的选项从 Management Studio 连接到我的 SQL Server，我最终得到了这个：

![SQL 管理工作室和错误](../Images/924b0dd34153f2419b0a4ec41ea89426.png)

如您所见，我收到一个错误（包括在内是为了能够阅读它）。我读到可能需要机器名称，所以我的用户帐户名称是`Xman`，我的机器名称是`Xman-PC`. Eveh 虽然我的打印屏幕图像不是来自此尝试，但我尝试再次连接到服务器`XMAN-PC\SQLEXPRESS`- 没有成功。\

你能给我指出一个关于如何连接到 MS SQL Server 的好教程（我不敢相信没有什么可以用简单的步骤解释你需要做什么来连接到服务器）或者你能告诉我如何设置 -升级我的配置，以便我实际上可以开始使用数据库？

附言

忘了提到 in `Command Prompyt`-`sqlcmd`命令也返回错误 - `Could not open SQL connection`。

附言

最后，我设法使用`Windows Authentication`和`(local)\sqlexpress`for ServerName 进行连接。这至少意味着一切正常。但现在我更想知道如何使用`SQL Server Authentication`. 它一定是默认的`Windows Authentication`？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:29:20.743

看起来您已经完成了艰苦的工作 - 最后一步将打开 SQL Server 身份验证。

由于您使用默认值安装，因此仅允许**Windows 身份验证**；您需要将其设置为**SQL Server 和 Windows 身份验证**模式。**您可以通过实例Properties** -> **Security**通过 Management Studio 执行此操作。

有关完整详细信息，请参阅此链接：[更改服务器身份验证模式](http://msdn.microsoft.com/en-us/library/ms188670%28v=sql.100%29.aspx)。

# jquery - 显示来自 MySQL 的数据，用于通过 jQuery 动态更改内容

> ID：15455302
> 
> 赞同：1
> 
> 时间：2013-03-16T22:12:24.167
> 
> 标签：jquery, mysql, dynamic

我正在尝试通过 MySQL/PHP 和 jQuery 读取和显示菜单及其内容。我已检索菜单名称并在页面上正确显示。

```
 $select_service_name = "SELECT serv_name FROM services";
    $query =  $conn->query($select_service_name);

foreach ($query->fetchAll(PDO::FETCH_COLUMN) as $row) {
    echo '<li><a href="#">'. $row; '</a></li>';
 } 
```

但现在我想填写服务描述，显示读入的第一个，但将其余部分存储在具有

```
 display: none; 
```

因此，我可以使用 jQuery UI 来隐藏/显示服务描述，具体取决于用户单击的服务。

关于如何实现这一目标的任何建议？

谢谢你。

我有一个菜单：

```
ServiceName1 | ServiceName1 Description
ServiceName2 |
ServiceName3 | 
```

等，并使用 jQuery .show() .hide() 我希望能够根据单击的 servicename# 显示它们的每个描述。如何使用从 MySQl 表中读取的描述来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:46:00.513

做这样的事情：PHP：

```
foreach ($query->fetchAll(PDO::FETCH_COLUMN) as $row) {
   echo '<li class="row"><a href="#">' . $row . '</a><span class="description">' . $description . '</span></li>';
} 
```

CSS：

```
.description{
  display: none;
} 
```

jQuery：

```
$(document).ready(function() {
  $(".row a").click(function(e) {
    e.preventDefault();
    $(".description").hide();
    $(this).parent("li").find(".description").show();
   });
}); 
```

[http://jsfiddle.net/jdfqS/2/](http://jsfiddle.net/jdfqS/2/)

你也不需要 jQuery UI 来做这个 .. 只是 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:05:38.780

我建议使用 JSON 将数据存储在数据属性中。在 PHP 中，将您需要的数据放入对象或数组中。然后使用[json_encode](http://php.net/manual/en/function.json-encode.php)将其格式化为 JSON 字符串：

```
<div data-example='<?php echo json_encode($data); ?>'></div> 
```

[您可以通过JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)或[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)检索数据：

```
$('[data-example]').each(function() {
    var data = $(this).attr('data-example');
    if (data) { 
        data = $.parseJSON(data);
    }
    // ...
}); 
```

# c# - 使用 JSON.NET 将属性反序列化为 ExpandoObject

> ID：15455304
> 
> 赞同：15
> 
> 时间：2013-03-16T22:12:35.853
> 
> 标签：c#, serialization, json.net, .net-4.5, expandoobject

例如，有一个像下一个这样的对象：

```
public class Container
{
   public object Data { get; set; }
} 
```

它是这样使用的：

```
Container container = new Container
{
    Data = new Dictionary<string, object> { { "Text", "Hello world" } }
}; 
```

如果我反序列化通过序列化上述实例获得的 JSON 字符串`Data`，即使我提供了属性，`ExpandoObjectConverter`它也不会反序列化为`ExpandoObject`：

```
Container container = JsonConvert.Deserialize<Container>(jsonText, new ExpandoObjectConverter()); 
```

**如何反序列化分配有匿名对象的类属性，或者至少不将具体类型作为`ExpandoObject`?**

## 编辑：

*有人回答说我可以只使用动态对象。这对我不起作用。我知道我可以这样做，但事实并非如此，因为我需要一个 ExpandoObject。谢谢。*

## 编辑2：

*其他一些用户回答我可以将 JSON 字符串反序列化为`ExpandoObject`. 这不是这个问题的目标。我需要反序列化具有动态属性的具体类型。在 JSON 字符串中，此属性可以是关联数组。*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-18T09:09:26.483

尝试这个：

```
Container container = new Container
{
    Data = new Dictionary<string, object> { { "Text", "Hello world" } }
};

string jsonText = JsonConvert.SerializeObject(container);

var obj = JsonConvert.DeserializeObject<ExpandoObject>(jsonText, new ExpandoObjectConverter()); 
```

我发现这样做让我`ExpandoObject`从调用到`DeserializeObject`. 我认为您提供的代码的问题在于，当您提供 a`ExpandoObjectConverter`时，您要求`Json.Net`反序列化 a `Container`，所以我想a`ExpandoObjectConverter`没有被使用。

**编辑：**

如果我用以下代码装饰`Data`房产并使用：`[JsonConverter(typeof(ExpandoObjectConverter))]`

```
var obj = JsonConvert.DeserializeObject<Container>(jsonText); 
```

然后该`Data`属性被反序列化为一个`ExpandoObject`，`obj`而是一个`Container`。

# java - 实现一个哈希映射，它接受 k = Date object v = an array

> ID：15455311
> 
> 赞同：1
> 
> 时间：2013-03-16T22:13:46.267
> 
> 标签：java, arraylist, hashmap

您好我想实现一个哈希映射，将特定日期映射到整数数组。数组的大小是 32

我试过这个，它编译：

`HashMap<Date,int[]> coord_map = new HashMap<Date, int[]>();`

但我不确定这是如何工作的，因为我没有给出整数数组的大小。

我也厌倦了这个：

```
int[] arr = new int[32];
for(int i =0; i <32; i++){
arr[i] = 0; // initialize the array to 0\. 
}
HashMap<Date, arr> attraction_date = new HashMap<Date, arr>(); 
```

这给了我一个编译器错误“找不到名为 arr 的类或类型”

谢谢你

**我现在有一个后续问题：**

我成功地使用了一个哈希映射，它接收一个日期并将其映射到一个 int 数组。现在我想使用这个哈希图的多个实例。由于我的项目涉及主题公园数据，因此每个景点都会有一个哈希图。
那么我将如何实现哈希映射的数组列表。跟踪 20 个景点？如果有人可以向我展示一个初始化所有内容的示例设置代码，那将很有帮助。

再次感谢你，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:17:29.640

这取决于你做什么。如果问题需要你有一个**正好 32 个**整数的数组，那么创建一个包装类 IntArray32 并使用`HashMap<Date, IntArray32>`. 否则，您编写的内容将起作用，它只会允许您将任何大小的 int 数组作为值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T22:22:45.220

您拥有的东西很好，您不需要指定尺寸。这将起作用

```
Map<Date, int[]> coordMap = new HashMap<Date, int[]>();
coordMap.put(aDate, new int[]{1,2});
coordMap.put(anotherDate, new int[]{3,4,5,6});
... 
```

所以每个值`int[]`可以有不同的大小。

# ruby-on-rails-3 - Rails 应用程序无法正常启动 - 不知道为什么

> ID：15455313
> 
> 赞同：1
> 
> 时间：2013-03-16T22:13:47.297
> 
> 标签：ruby-on-rails-3

我有一个在 DreamHost.com 上运行的个人 rails 应用程序。它运行良好，但我已经有几个星期没有使用它了。现在，当我访问该站点时，我收到消息“Rails 应用程序无法正常启动”。我 ssh 到我的帐户并尝试从终端运行命令。我尝试以生产模式进入控制台，并尝试运行“rake routes”。对于两者，我得到以下输出。我认为这是路线问题，但我真的不确定。我希望有人比我更了解 Rails 是否能够告诉我问题是否已报告给我以及它是什么。

感谢您的任何帮助。这是我正在运行的内容：

```
[coneflower]$ ruby -v
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux]
[coneflower]$ gem -v
1.8.25
[coneflower]$ rails -v
Rails 3.2.2 
```

错误输出：

```
[coneflower]$ rake routes
rake aborted!
missing :action
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:183:in `default_controller_and_action'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:76:in `normalize_options!'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:59:in `initialize'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:1302:in `new'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:1302:in `add_route'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:1282:in `decomposed_match'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:1268:in `block in match'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:1268:in `each'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:1268:in `match'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:258:in `root'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/mapper.rb:1315:in `root'
/home/johndcow/rails/drywall/releases/20130306000519/config/routes.rb:2:in `block in <top (required)>'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/route_set.rb:276:in `instance_exec'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/route_set.rb:276:in `eval_block'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.2/lib/action_dispatch/routing/route_set.rb:254:in `draw'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:245:in `load'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:245:in `block in load'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:245:in `load'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties- 3.2.2/lib/rails/application/routes_reloader.rb:40:in `each'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application/routes_reloader.rb:40:in `load_paths'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application/routes_reloader.rb:16:in `reload!'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application/routes_reloader.rb:26:in `block in updater'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.2/lib/active_support/file_update_checker.rb:78:in `call'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.2/lib/active_support/file_update_checker.rb:78:in `execute'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application/routes_reloader.rb:27:in `updater'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/johndcow/rails/drywall/releases/20130306000519/config/environment.rb:5:in `<top (required)>'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application.rb:103:in `require'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application.rb:103:in `require_environment!'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.2/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `eval'
/home/johndcow/.rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => routes => environment
(See full trace by running task with --trace)
[coneflower]$ 
```

路线文件：

```
Drywall::Application.routes.draw do
  resources :access, :only => :index  
  resources :users, :only => [:index, :new] 
  resources :payments
  resources :materials
  resources :hours
  resources :jobs 
  resources :customer 
  resources :reports, :only => :index do
    collection do
      get :statement
    end
  end

  # I removed the commented out examples here
  #
  # The priority is based upon order of creation:
  # first created -> highest priority.

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.

  match ':controller(/:action(/:id))(.:format)'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:15:53.757

这`resources :access`可能会导致问题。众所周知，在 prod 中打破多元化是众所周知的。模式。见[http://bparanj.blogspot.no/2011/07/reserved-words-in-rails.html](http://bparanj.blogspot.no/2011/07/reserved-words-in-rails.html)

# asp.net - 背景图片不显示

> ID：15455323
> 
> 赞同：0
> 
> 时间：2013-03-16T22:14:59.580
> 
> 标签：asp.net, css

我正在使用 ASP.NET Express 在 cardinal14all.org 的网站上工作。

在设计模式下查看站点时，背景图像显示正常，但在浏览器中不显示。

HTML：

```
<div id="content-wrap" > 
```

CSS：

```
#content-wrap {
width: 1040px;
margin: 0 auto;
background: url('../Images/backingImage.png') repeat-y left top;
} 
```

我已经检查了一些与表单身份验证相关的其他答案，但我没有在这里使用它，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:20:25.890

背景图像显示得很好，问题是元素的高度为零，所以你看不到它。

该`#content-wrap`元素仅包含浮动元素，因此它们不会影响元素的高度。

添加`overflow: hidden;`到元素的样式中，它将包含其子元素。

# linux - 如果正在运行，则重新启动 dropbox-daemon

> ID：15455324
> 
> 赞同：8
> 
> 时间：2013-03-16T22:15:00.697
> 
> 标签：linux, bash, ubuntu-12.04, dropbox

我有几个加密驱动器，我在启动后使用脚本手动安装它们。其中一个驱动器托管我的保管箱文件夹。

我需要在安装驱动器时检查 dropbox 是否正在运行，以便我可以停止 dropbox，然后重新启动它，以便正确同步。

这是我到目前为止所拥有的，但如果它已经在运行，我无法让它停止 Dropbox。

```
#!/bash/rc
if ~/dropbox.py running && [ $? -eq 1 ]; then
    ~/dropbox.py stop
else
    ~/dropbox.py start
fi 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-20T08:22:54.190

尝试

```
killall dropbox 
```

这肯定会阻止它！默认情况下会发送 SIGTERM，这是停止进程的正确方法。如果您的系统支持多个用户同时登录，那么此命令将终止所有用户的保管箱，或者至少它会尝试这样做。所以更优雅的方法是使用

```
killall -u myusername dropbox 
```

如果您当前由该用户登录：

```
killall -u "$(whoami)" dropbox 
```

或者甚至可能

```
killall -u "$USER" dropbox 
```

**更新：**好吧，似乎人们喜欢这个答案。但是，有一件重要的事情要知道。仅仅向进程发送信号并不意味着它会立即终止（或者 killall 将等待它终止）。因此，当您假设它已经消失时，Dropbox 可能会尝试安全终止（这可能需要一些时间才能完成）。只是要考虑的事情。

# ios - UIview 使用 pointInside 方法

> ID：15455325
> 
> 赞同：1
> 
> 时间：2013-03-16T22:15:10.050
> 
> 标签：ios, xcode

我正在创建一个 UIview 并以这种方式对其应用蒙版：

```
baseView = [[ViewTutorialSubclass alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
//self.view = baseView;
[self.view addSubview:baseView];
[baseView setBackgroundColor:[UIColor blackColor]];
baseView.userInteractionEnabled = YES;
baseView.alpha = 0.7;

mask = [[CAShapeLayer alloc] init];
mask.frame = baseView.layer.bounds;
CGRect biggerRect = CGRectMake(mask.frame.origin.x, mask.frame.origin.y, mask.frame.size.width, mask.frame.size.height);
CGRect smallerRect = CGRectMake(7.0f, 160.0f, 590.0f, 43.0f);

UIBezierPath *maskPath = [UIBezierPath bezierPath];
[maskPath moveToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];

[maskPath moveToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];

mask.path = maskPath.CGPath;
[mask setFillRule:kCAFillRuleEvenOdd];
mask.fillColor = [[UIColor blackColor] CGColor];
baseView.layer.mask = mask; 
```

在我的 ViewTutorialSubclass.m 我有：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
for (UIView *v in self.subviews) {
    CGPoint localPoint = [v convertPoint:point fromView:self];
    if (v.alpha > 0.8 && [v pointInside:localPoint withEvent:event])
        return YES;
}
return NO;
} 
```

这个想法是，如果用户使用掩码（非常透明）触摸 UIview 的任何部分，则所有用户触摸都会传递到该 UIview 下面的 UIview，而如果用户触摸其他任何地方，则触摸将应用于当前 UIview。我该怎么做？pointInside 是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:53:06.380

包含遮罩层的视图类应覆盖 pointInside 并根据遮罩的状态返回 YES 或 NO。如果掩码总是一个矩形，那么你可以在矩形测试中做一个点，但我敢打赌这不是你想要的。您希望此测试适用于任意形状的面罩。设置（在 dispatch_once 中）一个像素宽的 CGBitmapContext。在 pointInside:withEvent: 中，将遮罩层渲染到位图上下文中，看看它是否绘制了任何东西。这是一个例子：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    static CGContextRef context;
    static CGColorSpaceRef rgbColorSpace;
    static unsigned char bitmapData[4];
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        rgbColorSpace = CGColorSpaceCreateDeviceRGB();
        context = CGBitmapContextCreate(bitmapData, 1, 1, 8, 4, rgbColorSpace, kCGBitmapAlphaInfoMask & kCGImageAlphaPremultipliedLast);
    });
    if ([super pointInside:point withEvent:event]) {
        CGContextTranslateCTM(context, -point.x, -point.y);
        [self.layer.mask renderInContext:context];
        CGContextTranslateCTM(context, point.x, point.y);
        BOOL result = (bitmapData[3] > 0);
        memset(bitmapData, 0, sizeof(bitmapData));
        return result;
    }
    return NO;
} 
```

**编辑：**如果您将 kCGImageAlphaPremultipliedLast （单独）传递给`CGBitmapContextCreate`. 参数的类型应该是`CGBitmapInfo`但`kCGImageAlphaPremultipliedLast`来自枚举类型`CGImageAlphaInfo`。要消除警告，您可以结合枚举类型中`kCGImageAlphaPremultipliedLast`的值，例如. 无论如何，这种方式更好，因为新代码明确表明我们正在发送一般的“位图信息”，但我们*只*对与如何处理 alpha 通道相关的位图信息感兴趣。`CGBitmapInfo``kCGBitmapAlphaInfoMask & kCGImageAlphaPremultipliedLast`

# html - 如何找到此代码的语言以及如何找到将此代码转换为文本或 HTML 的工具

> ID：15455327
> 
> 赞同：-7
> 
> 时间：2013-03-16T22:15:16.723
> 
> 标签：html, hex, decimal

这是一个文本（html）的代码视图但是我找不到这种语言，我没有任何编码经验，请帮助我。

```
&#1112&#965&#1109t 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:18:52.887

您可以使用[http://www.web2generators.com/html/entities](http://www.web2generators.com/html/entities)

你的文字翻译成“јυѕt;”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:40:14.697

它们似乎是 HTML 实体，但它们并不完整，它们应该以 ';' 结尾 所以代码应该是：јυѕt

你看到的字符是：

```
&amp;#1112;   CYRILLIC SMALL LETTER JE 
&amp;#965;    GREEK SMALL YPSILON 
&amp;#1109;   CYRILLIC SMALL LETTER DZE 
t             a normal t 
```

在您的浏览器中，它看起来几乎就像“只是”

对于 unicode 字符的字符：[http ://www.ssec.wisc.edu/~tomw/java/unicode.html](http://www.ssec.wisc.edu/~tomw/java/unicode.html)

# jquery - 从 Jquery 中的 JSON 文件中获取要显示的正确键和值

> ID：15455328
> 
> 赞同：0
> 
> 时间：2013-03-16T22:15:17.757
> 
> 标签：jquery, json

尝试在复杂的嵌套 JSON 数组中检索特定值被证明是棘手的。我在想还有另一种方法可以做到这一点，而不是我下面的方法：

```
 $.getJSON('test.json', function (data) {
    $.each(data.glossary, function (){
     $('ul#results').append('<li><div class=\"name\">' +this.title+ '</div></li><li><div class=\"name\">' +this.GlossTerm+ '</div></li>');
    });
}); 
```

test.json 在哪里：

```
{
"glossary": {
    "title": "example glossary",
    "GlossDiv": {
        "title": "Hello!!",
        "GlossList": {
            "GlossEntry": {
                "ID": "SGML",
                "SortAs": "SGML",
                "GlossTerm": "Standard Generalized Markup Language",
                "Acronym": "SGML",
                "Abbrev": "ISO 8879:1986",
                "GlossDef": {
                    "para": "A meta-markup language, used to create markup languages such as DocBook.",
                    "GlossSeeAlso": ["GML", "XML"]
                },
                "GlossSee": "markup"
            }
        }
    }
}
} 
```

到目前为止，在网页上，返回的结果是：

+未定义

+未定义

+你好！！

+未定义

如何使未定义的值显示正确的值？我已经尝试了很多方法，但似乎都没有奏效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:20:24.447

您需要正确遍历对象，没有办法吗？

```
$.getJSON('test.json', function (data) {
    $.each(data.glossary, function(index, val){
       var title = val.title, //"example glossary"
           term  = val.GlossDiv.GlossList.GlossEntry.GlossTerm; //"Standard Generalized Markup Language"
    });
}); 
```

# python - 使用python提取和解析

> ID：15455335
> 
> 赞同：1
> 
> 时间：2013-03-16T22:15:41.343
> 
> 标签：python, parsing

我有这两行的格式

```
VP VB go
NP PRP$ your NN left 
```

保存在文本文件中。我想访问这个文本文件，然后在一个新的文本文件中打印以下结果

```
NP NN left 
```

帮助我如何使用python。

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:02:01.330

如果我对你的解释正确，你想要所有的情况

```
NP NN word 
```

在这种情况下，您可以使用查找 NP、NN 和后续单词的正则表达式：

```
import re
f = open('file.txt')
regex = r'^(NP).*?(NN) (\w+).*?$'
for line in f:
    try: ' '.join(re.search(regex, line).groups())
    except AttributeError: pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:46:19.360

编辑：这更好吗？

```
f=open("myfile")
#read all lines of the file and remove newline characters
a=[i.strip() for i in f.readlines()]
f.close()

for i in a:
  i=i.split()
  n=-1
  try:
    n=i.index("NN")
  except:
    pass
  if n!=-1 and n!=len(i)-1 and i[0]=="NP":
    print i[0], i[n], i[n+1] 
```

# opencv - 如何使用 OpenCV 获取 Homography 矩阵（拼接 2 个图像）

> ID：15455336
> 
> 赞同：2
> 
> 时间：2013-03-16T22:15:52.937
> 
> 标签：opencv, matrix, homography

我正在 Visual Studio 2012 中研究 OpenCV，我试图让 Homography 矩阵在 opencv 中缝合 2 个图像，所以我真的不知道要遵循的步骤：

![在此处输入图像描述](../Images/44aeba92465c597984d768a7e89cc8c5.png) ![在此处输入图像描述](../Images/104dec1823c382b1b20c1ee42361ec42.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T23:30:55.277

首先，您应该知道，您在图像中说明的两点对应关系不足以进行单应性估计。单应性有 7 个自由参数 - 有 8 个矩阵元素，但单应性是齐次量。这意味着您可以随意缩放矩阵，从而将自由参数减少一。要估计 7 个参数，您至少需要四个对应点。

我认为理解你所做的比盲目调用 OpenCv 方法更重要，所以请阅读真正的算法。单应性计算最简单（但非最佳）的方法是 DLT，它相当于将方程重新排列为四个或更多点，以便在最小二乘意义上`y = Hx`求解 的分量。`H`这是对细节的一个很好的解释： [https://engineering.purdue.edu/kak/courses-i-teach/ECE661.08/solution/hw4_s1.pdf](https://engineering.purdue.edu/kak/courses-i-teach/ECE661.08/solution/hw4_s1.pdf) 主要的学术参考是 Heartley 和齐瑟曼。

正如评论中所指出的，OpenCv 文档在这里： [http ://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#findhomography](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#findhomography)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-21T05:38:02.440

要在两个图像之间建立单应性，您至少需要 4 个点。每个都有两个坐标，给你两个方程/约束。单应性有 8 个自由度（它是一个具有 9 个元素的 3x3 满秩矩阵，-1 自由度，因为它在齐次坐标上运行）。

请注意，只有平面表面的图像，或者由围绕其中心旋转的相机拍摄的图像可以通过单应性关联（在后一种情况下，平面表面是无限远的平面）。

本页[展示](https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_feature2d/py_feature_homography/py_feature_homography.html%22page%22)了如何使用特征提取和 RANSAC 计算单应性。

# javascript - 一次只切换一个 onClick imageChange（将所有其他图像切换到原始状态）？

> ID：15455337
> 
> 赞同：0
> 
> 时间：2013-03-16T22:15:54.263
> 
> 标签：javascript, jquery, html

我有一个导航栏，它由单击时会发生变化（“亮起”）的图标组成，以指示当前正在显示哪个 div。

问题是，我想要这样当一个图像被更改（点击时亮起）时，所有其他图像都会恢复到原来的状态。

目前它们都只是简单的切换，这意味着当我单击一个然后另一个时，它们都保持点亮状态，这显然是我不想要的。

有没有一种简单的方法来实现这个？

编辑：我目前正在使用[这种](http://interestingwebs.blogspot.com/2012/09/change-image-onclick-with-jquery.html "这种方法")jQuery 图像切换方法。我是一个真正的业余爱好者，所以我不知道我会从哪里开始使用每个切换来将所有其他图标切换回它们的原始状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:30:36.900

定义一个类来指示选定的选项卡并使用 CSS 应用突出显示（显示/隐藏图像，更改精灵的背景位置，等等）。然后：

```
$("#menu li").click(function (e) {
    $("#menu li.selected").removeClass("selected");
    $(this).addClass("selected");
}); 
```

**编辑：**要调整您现有的代码以使用 CSS 应用突出显示，请更改您的 html 以便每个菜单项都有两个图像：

```
<ul id="menu">
    <li>
        <img class="off" src="menu1-original-icon.png" />
        <img class="on" src="menu1-lit-up-icon.png" />
    </li>
    <li>
        <img class="off" src="menu2-original-icon.png" />
        <img class="on" src="menu2-lit-up-icon.png" />
    </li>
    ...
</ul> 
```

然后，使用 CSS 隐藏一个并显示另一个：

```
#menu .on, #menu .selected .off
{
    display: none;
}
#menu .selected .on
{
    display: inline;
} 
```

这是一个演示：[jsfiddle.net/PLRfJ](http://jsfiddle.net/PLRfJ/)

要允许选择无（单击已选择取消选择它），请在删除类时使用`.toggleClass()`代替`.addClass()`和排除：`this`

```
$("#menu li").click(function (e) {
    $("#menu li.selected").not(this).removeClass("selected");
    $(this).toggleClass("selected");
}); 
```

[jsfiddle.net/PLRfJ/1](http://jsfiddle.net/PLRfJ/1/)

# cordova - 未捕获的类型错误：无法读取未定义的 RequireJS 优化器主干的属性“视图”

> ID：15455338
> 
> 赞同：2
> 
> 时间：2013-03-16T22:15:55.383
> 
> 标签：cordova, backbone.js, requirejs

我在尝试使用 RequireJS、BackboneJS 和各种 over 库编写的 Phonegap 应用程序在使用 r.js 后工作时遇到了一些问题。

在优化之前一切正常，但是之后我在 main-build.js 中收到以下错误

> 未捕获的类型错误：无法读取属性“视图”

下面是我的要求配置

```
require.config({
baseUrl: 'lib',
paths: {
    domReady        :   'require/domReady',
    text            :   'require/text',
    async           :   'require/async',
    jquery          :   'jquery/jquery',
    jqmconfig       :   'jqm/jqm-config',
    jqm             :   'jqm/jquery.mobile',
    underscore      :   'underscore/underscore',
    backbone        :   'backbone/backbone',
    jqmaps          :   'google/jquery.ui.map',
    router          :   '../app/router',
    models          :   '../app/models',
    collections     :   '../app/collections',
    views           :   '../app/views',
    templates       :   '../app/templates',
    app             :   '../app/app'
},
shim: {
    underscore: {
        exports     :   '_'
   },
   backbone: {
       deps         :   ['jquery', 'jqmconfig', 'jqm', 'underscore'],
       exports      :   'Backbone'
  },
  jqmconfig         :   ['jquery'],
  jqm               :   ['jquery','jqmconfig'],
  jqmaps            :   ['jqm']
}}); 
```

这是我的引导程序

```
require(
[
    'app', 'domReady', 'jqmconfig'
], 

function(app, domReady){

    domReady(function() {
        // On device ready initialize the app code
    });
}); 
```

这是我的 build.js

```
({
baseUrl: 'lib',
paths: {
    domReady        :   'require/domReady',
    text            :   'require/text',
    async           :   'require/async',
    jquery          :   'jquery/jquery',
    jqmconfig       :   'jqm/jqm-config',
    jqm             :   'jqm/jquery.mobile',
    underscore      :   'underscore/underscore',
    backbone        :   'backbone/backbone',
    jqmaps          :   'google/jquery.ui.map',
    router          :   '../app/router',
    models          :   '../app/models',
    collections     :   '../app/collections',
    views           :   '../app/views',
    templates       :   '../app/templates',
    app             :   '../app/app',
    main            :   '../app/main', 
},
name: 'main',
out: 'app/main-build.js'}) 
```

有什么明显的吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:34:37.937

shim-config 应该在`build.js`文件中复制，因此`r.js`可以正确地将 shim 依赖项包含到`app/main-build.js`. 您可以简单地复制您的 shim`build.js`或更好地指定[mainConfigFile](http://requirejs.org/docs/optimization.html#mainConfigFile)选项，因此您的`paths`和`shim`只能在一个地方列出。

# hex - MIPS；获取十六进制值的 LSB

> ID：15455343
> 
> 赞同：0
> 
> 时间：2013-03-16T22:16:27.767
> 
> 标签：hex, mips

我知道有几个问题已经解决了这个问题。但是，我的问题在某种程度上有所不同。假设我必须获取存储在寄存器中的值（十六进制）的 LSB；例如；

如果寄存器 $t0 包含值 0xA4，我需要获取并存储值 4

如果寄存器 $t0 包含值 0xBF，我需要获取并存储值 F

我知道按位`AND`运算适用于十进制值。有人可以就我如何获得 LSB 提供一些帮助吗？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:23:51.367

您可以轻松地 AND 想要从中提取 LSB 本身的数字，如下所示：

0xA4 和 0x0F

与（二进制）相同

10100100b 和 00001111

这基本上意味着只会从二进制数中提取最后四位数字，这就是您想要的 LSB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:20:12.057

所有二进制操作都适用于带有掩码的通用寄存器，这些掩码只是纯数字（不管它们的基础基础代表如何）
即使 x86 不是 MIPS，你也应该有这样的东西

```
and EAX, 0xF 
```

# android - Android Camera.Parameters.getZoomRatios() 只返回 1 个值

> ID：15455346
> 
> 赞同：2
> 
> 时间：2013-03-16T22:16:38.130
> 
> 标签：android, zooming, android-camera

我正在尝试获取相机支持的所有缩放值，并为用户提供一个滑块以在它们之间移动。问题是我只能从`Camera.Parameters.getZoomRatios()`. 我正在使用 Android 2.3.4（姜饼）的 HTC Sensation 设备上进行测试

```
final Parameters parameters = camera.getParameters();

if(parameters.isZoomSupported()) {
    // get all the zoom levels
    final List<Integer> zooms = parameters.getZoomRatios(); 
```

缩放总是`[100]`这也是我从中得到的`parameters.getMaxZoom()`。

我已经在我的 android 清单中请求了所有相关权限，并按照 Camera API javadocs 中的说明进行操作。

我在该设备上的本机相机应用程序支持许多缩放值。关于这里可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T00:48:10.483

缩放比例可能不是您想要的。您的相机可以从 0 缩放到从`getMaxZoom`. 尝试调用[`setZoom`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setZoom%28int%29)从 0 到 100 的值（你说这是从 中返回的`getMaxZoom`），看看是否有效。

您的滑块可以改为从 0 转到从`getMaxZoom`. 与 android 上的许多相机参数一样，缩放比例可能并不总是对每个不同的供应商都如此值得信赖。

根据文档，`setZoom`getMaxZoom() 的有效范围是 0。我在所有设备上都能完美运行缩放的混合结果，但刚刚在运行 4.0.3 的 HTC Sensation 上进行了测试。因为`getMaxZoom()`我得到 5 作为结果 int，并且从 0-5 设置缩放可以缩放相机。您的问题可能源于设备可能与姜饼有关的一些问题，因为当我打印 zoomratios 数组时，我得到以下信息：

> [100、114、131、151、174、200]

**缩放比率数组旨在了解每个缩放级别将从 1.0 倍缩放**（乘以 100）的基线缩放图像的因子。在上面的示例中，将缩放设置为 2 将缩放到第三个缩放比例桶：放大 1.31 倍。这也说明了为什么第一个值是 100——因为第一个缩放值 0 相当于 1.0 倍缩放。

如果您从最大缩放查询返回 100，似乎缩放在您的设备上完全不可靠。`setParameters`如果是这种情况，我建议在你的电话周围抛出一个 try-catch以防止制造商错误。

# android - 需要帮助使用 AsyncTask 使应用程序在模拟器中运行

> ID：15455347
> 
> 赞同：0
> 
> 时间：2013-03-16T22:16:42.057
> 
> 标签：android, android-emulator, android-asynctask

我是 Android 编程新手，并试图制作一个通过 servlet 从数据库收集数据的应用程序。该应用程序一直在工作，直到我被迫重新安装 Eclipse。现在我似乎在从我的 servlet 检索数据时遇到问题。该应用程序符合并运行，但没有显示“轻数据”。AsyncTask 显然可能有助于解决这个问题（尽管我确实使用简单的输入应用按钮创建了一个主页并将其设置为我的新主要活动）。我非常感谢通过使用 AsyncTask 对我的代码提供特定的答案，谢谢。

连接servlet的代码：通过主页（新建主活动）按钮进入后应出现此页面：

```
package com.example.clearlight;

import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;
import android.widget.Toast;

import java.net.URL;

import org.apache.http.client.ResponseHandler;

import org.apache.http.client.methods.HttpGet;

import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.StrictMode;
import android.util.Log;

public class MainActivity extends Activity {

    TextView txt;

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /*StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);*/

        setContentView(R.layout.relative);
        // Create a crude view - this should really be set via the layout resources but since its an example saves declaring them in the XML.

        /*LinearLayout rootLayout = new LinearLayout(getApplicationContext());
        txt = new TextView(getApplicationContext());
        rootLayout.addView(txt);
        setContentView(rootLayout);*/

        URL url = null;
        DefaultHttpClient httpclient = null;
        try {
            String registrationUrl = "http://10.0.2.2/SensorInfo/GetLightData?sensor=light";
            url = new URL(registrationUrl);

            HttpGet getRequest = new HttpGet(registrationUrl);
            ResponseHandler<String> handler = new BasicResponseHandler();
            httpclient = new DefaultHttpClient();
            // request data from server
            String result = httpclient.execute(getRequest, handler);
            Log.d("MyApp", "Data from server is "+ result);

          //Creating TextView Variable**********************************
            TextView text1 = (TextView) findViewById(R.id.text);

            //Sets the new text to TextView (runtime click event)//*******
            text1.setText("Light Data= " + result);

            Toast.makeText(this, "Light Data:" + result, Toast.LENGTH_SHORT).show(); //MESSAGE BOX
            //txtMessage.setText(String.valueOf(msg1) + "  " + String.valueOf(msg2));
        } catch (Exception ex) {
            ex.printStackTrace();
        }

      }
    } 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.clearlight"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.clearlight.MainActivity"
            android:label="@string/app_name" >

        </activity>
         <activity
            android:name="com.example.clearlight.HomePage"
            android:label="@string/homepage" 
            android:parentActivityName="com.example.clearlight.MainActivity" >

            <!-- Moved the intent filter to HomePage -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.clearlight.MainActivity" />
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:36:06.600

对于 android，最好不要在 Activity 中运行网络请求。当您尝试建立网络连接时，您可能会超时，或者加载大量数据，这会使您的代码“冻结”在那条线上。Activity 往往讨厌等待，因为那时屏幕没有响应。当这种情况持续很长时间时，android 将（可能强制）关闭您的应用程序。

就像您提到的，AsyncTask 是从网络连接加载数据的更好方法。AsyncTasks 或多或少像普通类一样工作，但有一些细节例外。[这个](http://developer.android.com/reference/android/os/AsyncTask.html)链接应该让你快速了解这些细节。

对于你的错误：就像上面所说的 Vorrtex，检查你是否没有陷入错误。在您的 catch 语句中添加： Log.e("error",e.toString()); 并检查您的 LogCat 中是否没有显示 wall-o-red-text。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:36:42.317

所以一般不建议从 UI Thread 执行任何网络连接。对于 Android < 3.0，它可以工作，但从 Android 3.0 开始，它是固定的并且不允许（抛出 NetworkOnMainThreadException）。

所以[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是非常好的选择，它非常适合用于这样的目的。简单地说，AsyncTask 的关键方法是[doInBackground()](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)，它在后台线程上运行（也用于日志运行操作，也适用于像您这样的人）并代表执行 Internet 连接的正确位置。

您与 Servlet 通信的代码应放入此方法中，结果您将以字符串形式返回响应。

然后将此字符串发送到[onPostExecute(String result)](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)方法，该方法在 doInBackground() 方法作为后台操作的结果完成时调用，在这里您将更新您的 UI（将响应设置为适当小部件的内容）。OnPostExecute() 已经在 UI 线程上运行并允许 UI 更新。

如果您有点困惑，最好阅读一些教程：

*   [带有线程、处理程序和 AsyncTask 的 Android 后台处理 - 教程](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

# xcode - 如何正确设置此布局的约束？

> ID：15455351
> 
> 赞同：0
> 
> 时间：2013-03-16T22:16:59.207
> 
> 标签：xcode, user-interface, constraints

我已经尝试了很长时间，但由于约束问题不断崩溃......

如何设置此布局使其适用于 iPhone 3Gs、4 和 5 以及 iPad？

```
_______TOP OF SCREEN________

Table View should attach to top of screen and with 5 pixels to the Label below
flexible in height so it works on iPhone 5 and 6

____________________________

Label with fixed distance to table View above and button below

____________________________

Button with fixed distance to Label above and fixed distance to bottom of screen

____________________________
      Bottom of screen 
```

所以基本上所有的距离和高度都是固定的，除了桌子的高度应该填充屏幕顶部和标签之间的任何可用空间

每当我设置这样的约束时，我都会在 iOS 6.1 的 iPhone 3 上不断崩溃：

```
 2013-03-16 23:12:51.013 BMWhat Test[64196:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x1d1f2d70 h=-&- v=-&- UIView:0x1d1aac20.height == UITransitionView:0x1d174220.height - 20>",
    "<NSLayoutConstraint:0x1d1c03b0 V:[UILabel:0x1c58f100(21)]>",
    "<NSLayoutConstraint:0x1d1ce780 V:[UITableView:0x1cbd9000(469)]>",
    "<NSLayoutConstraint:0x1c5aff30 V:[UIButton:0x1d1d1bb0(44)]>",
    "<NSLayoutConstraint:0x1d1c0030 V:|-(0)-[UITableView:0x1cbd9000]   (Names: '|':UIView:0x1d1aac20 )>",
    "<NSLayoutConstraint:0x1d1921d0 V:[UILabel:0x1c58f100]-(1)-[UIButton:0x1d1d1bb0]>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c58e4d0 h=--- v=--- V:[UIWindow:0x1d002230(480)]>",
    "<NSLayoutConstraint:0x1d1cd6c0 V:[UITableView:0x1cbd9000]-(NSSpace(8))-[UILabel:0x1c58f100]>",
    "<NSLayoutConstraint:0x1d1ca370 V:[UIButton:0x1d1d1bb0]-(5)-|   (Names: '|':UIView:0x1d1aac20 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1d172a90 h=--& v=-&- UITransitionView:0x1d174220.height == UIWindow:0x1d002230.height>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1d1ce780 V:[UITableView:0x1cbd9000(469)]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

在 Simulator iPhone Retina 4 英寸 iOS 6 上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:30:06.513

问题是您在 tableview 上指定了一个垂直约束，将其高度绑定到 469 pt。由于您希望该 tableview 的高度灵活，因此您不希望该约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T22:27:47.437

NSLayoutConstraint 仅在 iOS 6 中受支持。

iPhone 3 不支持 iOS 6。3Gs 是最早支持的机型。

# java - 为什么初始化 Twig 用于在 GWT 应用程序中存储数据会崩溃？

> ID：15455357
> 
> 赞同：0
> 
> 时间：2013-03-16T22:17:40.433
> 
> 标签：java, google-app-engine, gwt, crash

我在 openjdk6 64 位上，但似乎与最新的 sun 版本也有同样的问题。

感觉好像我错过了一些非常简单的东西，我已将 twig 2.0 jar 添加到我的源代码中，并在我的项目中重新使用它

任何树枝示例中的第一行是：

```
`ObjectDatastore datastore  = new AnnotationObjectDatastore(); ' 
```

但是当我在我的服务器中（来自 RPC 调用）它崩溃并出现以下错误：

```
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String org.chozabu.ProtoCTF.client.SubmitPropService.submitProp(org.chozabu.ProtoCTF.shared.PropInit) throws java.lang.IllegalArgumentException' threw an unexpected exception: java.lang.NoClassDefFoundError: com/google/code/twig/annotation/AnnotationObjectDatastore
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.NoClassDefFoundError: com/google/code/twig/annotation/AnnotationObjectDatastore
    at org.chozabu.ProtoCTF.server.SubmitPropServiceImpl.submitProp(SubmitPropServiceImpl.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    ... 38 more
Caused by: java.lang.ClassNotFoundException: com.google.code.twig.annotation.AnnotationObjectDatastore
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 45 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:37:33.407

通过此处列出的方法解决了此特定问题： [在 Eclipse (App Engine) 项目中包含 JAR 文件](https://stackoverflow.com/questions/8285472/including-jar-files-in-eclipse-app-engine-project) （相关部分：“JAR 应位于 WEB-INF/lib 中” - 并清理项目）

我将 jar 文件放在错误的位置 - 假设位置无关紧要。使用应用引擎很重要！

编辑：仅此一项并不能完全解决我的问题。我最终在 github 上找到了一个使用相同库的项目，并提取了它的确切 .jar 文件

把它们放在这里：war/WEB-INF/lib/twig-persist-2.0-beta4.jar war/WEB-INF/lib/guava-11.0.2.jar

它有效...

使用来自官方网站的最新版本似乎很奇怪......我猜 twig 假设熟悉应用程序引擎和 JDO。似乎也有必要使用 try-finally-rollback 包装器将事物包装在事务中......

# c++ - 代码块中对函数的未定义引用

> ID：15455358
> 
> 赞同：1
> 
> 时间：2013-03-16T22:17:51.537
> 
> 标签：c++, c, codeblocks

我在头文件和源文件中有这段代码。这是代码的小片段。这是来自`.cpp`文件。

```
int sample(Cdf* cdf)  
{
    //double RandomUniform();
    double r = RandomUniform(); //code that is causing the error
    for (int j = 0; j < cdf->n; j++)
    if (r < cdf->vals[j])
    return cdf->ids[j];
    // return 0;
} 
```

这是来自`.c`文件：

```
double RandomUniform(void)
{
    double uni;

    /* Make sure the initialisation routine has been called */
    if (!test) 
    RandomInitialise(1802,9373);

    uni = u[i97-1] - u[j97-1];
    if (uni <= 0.0)
    uni++;
    u[i97-1] = uni;
    i97--;

    // ...
} 
```

这是来自我的头文件

```
void   RandomInitialise(int,int);
double RandomUniform();
double RandomGaussian(double,double);
int    RandomInt(int,int);
double RandomDouble(double,double); 
```

我`#include "headerfile.h"`在`.cpp`文件中使用过，然后我编译了代码。从片段中可以看出，我基本上`RandomUniform()`是在调用文件中的函数，`.cpp`然后在头文件中定义它。

问题是，每当我构建程序时，都会收到*“未定义的函数引用”*错误。这是我得到的错误

```
 In function 'Z6sampleP3Cdf':
       undefined reference to 'RandomUniform()' 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:20:57.877

请记住，C++ 会*破坏*其函数名称。因此`sample`，在 C++ 中命名的函数在 C 中将不会被命名为相同的名称。

当然，相反，像`void RandomInitialise(int,int)`C 中的函数不会`RandomInitialise`在 C++ 中简单地命名。

您必须使用用`extern "C"`C 实现的函数，否则 C++ 编译器将为您的 C 函数创建错位名称。

因此，您必须将包含这些仅 C 函数的头文件更改为：

```
extern "C" void   RandomInitialise(int,int);
extern "C" double RandomUniform(void);
extern "C" double RandomGaussian(double,double);
extern "C" int    RandomInt(int,int);
extern "C" double RandomDouble(double,double); 
```

当然，这意味着您不能使用纯 C 项目中的相同头文件，因为`extern "C"`在纯 C 编译器中无效。但是您可以使用预处理器来帮助解决这个问题：

```
#ifdef __cplusplus
extern "C" {
#endif

void   RandomInitialise(int,int);
double RandomUniform(void);
double RandomGaussian(double,double);
int    RandomInt(int,int);
double RandomDouble(double,double);

#ifdef __cplusplus
}
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-28T09:47:12.270

如果您没有在文件创建时将文件添加到**调试**和**发布**！那么问题就来了！

cpp文件需要链接和添加！如果不在调试和|或发布中！链接器将找不到它们！

## 如何将它们添加到调试或发布

如果它们已经创建！在文件资源管理器左边！右键点击！并选择属性！在属性中选择**build**！您将找到添加调试和发布的位置！

[![在此处输入图像描述](../Images/09cb7d65a15532198776b02cf0ba1f16.png)](https://i.stack.imgur.com/znYnW.jpg) [![在此处输入图像描述](../Images/7985b757e4e3a834a312392e7abd917c.png)](https://i.stack.imgur.com/XqWyO.jpg)

## 关于外部“C”的注意事项

不需要添加外部“C”！我确认！链接器链接没有问题！

仍然检查这个答案

[https://stackoverflow.com/a/15455385/7668448](https://stackoverflow.com/a/15455385/7668448)

[https://stackoverflow.com/a/15141021/7668448](https://stackoverflow.com/a/15141021/7668448)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2019-12-15T21:26:36.203

右键单击此处，然后“添加文件”，然后选择要编辑其文件传递的 .h 和 .c 文件，然后按确定。

![单击此处查看按的位置](../Images/e4a0659889567716bb7adef25667c08c.png)

# mysql - MySQL 字段名称在导入后有一个空格

> ID：15455361
> 
> 赞同：1
> 
> 时间：2013-03-16T22:18:33.607
> 
> 标签：mysql

我想知道是否有人知道如何删除字段名称有空格的 SELECT 查询中的空格。我运行了一个 CSV 文件的导入，一些字段名称看起来像这样。

“名称”、“类型”等

我试着做：

```
SELECT trim(*) FROM table_name 
```

但它返回了一个mysql错误。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:22:30.080

试试反引号？如果我理解正确，列名有空格，您希望选择名称中没有空格的列？

```
SELECT ` name` as name, ` type` as type FROM table_name 
```

# wordpress - Ajax 在 wordpress 中过滤和显示画廊缩略图

> ID：15455362
> 
> 赞同：0
> 
> 时间：2013-03-16T22:18:33.463
> 
> 标签：wordpress, filter, shortcode

由于小型会议网站的截止日期紧迫，因此使用 wordpress 模板。有一个“添加员工”选项和 [staff] 短代码，允许添加会议参与者。STaff 也可以按部门标记。不幸的是，没有办法按部门动态过滤员工，因此只显示特定部门的员工。

Ideally I'd like a select dropdown with a list of departments, that when selected would filter and display ONLY staff in that department.

显示特定部门的简码很简单

[人员部门="DEPARTMENT_NAME" /]

是否有一些我可以使用的通用 ajax 可以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:35:12.217

对于在 wordpress 中正确工作的 ajax，您需要创建 ajax 处理程序，创建 php 文件并包含“wp-load.php”是一种不好的做法，这篇文章[http://wp.tutsplus.com/articles/getting-started-with- ajax-wordpress-pagination/](http://wp.tutsplus.com/articles/getting-started-with-ajax-wordpress-pagination/)将解释使用 ajax 的正确做法。

您可以在 ajax 请求的查询参数中发送部门名称，并`do_shortcode('[staff department="DEPARTMENT_NAME" /]')`在处理您的 ajax 请求的函数中使用 wordpress。打印生成的 html 并在 ajax 成功回调中`do_shortcode()`替换相应的 html。`<div>`

# sql - 从按多列分组的行组中选择具有最大值的行 (PSQL)

> ID：15455368
> 
> 赞同：5
> 
> 时间：2013-03-16T22:19:27.567
> 
> 标签：sql, postgresql

我有一个交易数据表，是对未来的预测。由相同日期、类型、位置和产品标识的相同预测因此会被多次读取，因为随着时间的推移预测变得更加准确并被重新发送。

我想创建一个查询，它将具有相同类型和相同位置、产品和日期的事务分组，然后从这些组中仅选择具有最新更新时间戳的事务。

该表现在有数十万行，随着时间的流逝，数百万行，因此将不胜感激一个合理有效的解决方案:)

示例表：

```
date    |  location_code   | product_code  | quantity |   type   | updated_at 
------------+------------------+---------------+----------+----------+------------
2013-02-04 | ABC | 123 |  -26.421 | TRANSFER | 2013-01-12
2013-02-07 | ABC | 123 |    -48.1 | SALE | 2013-01-10
2013-02-06 | BCD | 234 |  -58.107 | SALE | 2013-01-11
2013-02-06 | BCD | 234 |      -60 | SALE | 2013-01-10
2013-02-04 | ABC | 123 |   -6.727 | TRANSFER | 2013-01-10 
```

期望的结果：

```
date    |  location_code   | product_code  | quantity |   type   | updated_at 
------------+------------------+---------------+----------+----------+------------
2013-02-04 | ABC | 123 |  -26.421 | TRANSFER | 2013-01-12
2013-02-07 | ABC | 123 |    -48.1 | SALE | 2013-01-10
2013-02-06 | BCD | 234 |  -58.107 | SALE | 2013-01-11 
```

我试过例如：

```
SELECT t.date, t.location_code, t.product_code, t.quantity, t.type, t.updated_at
FROM transactions t
INNER JOIN
(
   SELECT MAX(updated_at) as max_updated_at
   FROM transactions
   GROUP BY product_code, location_code, type, date
) s on t.updated_at=max_updated_at; 
```

但这似乎需要很长时间并且似乎不起作用。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:45:34.850

```
select distinct on ("date", location_code, product_code, type)
    "date",
    location_code,
    product_code,
    quantity,
    type,
    updated_at
from transactions t
order by t."date", t.location_code, t.product_code, t.type, t.updated_at desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T22:49:30.787

这可能比与派生表的联接更有效

```
select *
from (
    select date, 
           location_code, 
           product_code, 
           quantity, 
           type, 
           updated_at, 
           max(updated_at) over (partition by product_code, location_code, type, date) as max_updated
    from transactions
) t
where updated_at = max_updated; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:43:54.337

谢谢丹布拉库克！

这是正确的查询：

```
SELECT t.date, t.location_code, t.product_code, t.quantity, t.type, t.updated_at
FROM transactions t
INNER JOIN
(
   SELECT MAX(updated_at) as max_updated_at, product_code prod, location_code loc, type     typ, date dat
   FROM transactions
   GROUP BY product_code, location_code, type, date
   ) s ON t.updated_at=max_updated_at AND t.location_code=loc AND t.product_code=prod AND  t.type=typ AND t.date=dat; 
```

# php - php日期没有以正确的方式计算

> ID：15455369
> 
> 赞同：1
> 
> 时间：2013-03-16T22:19:42.773
> 
> 标签：php, date

我想计算两个时间戳之间的差异，然后将它们转换回可读的人类日期，但是我的日期增加了 2 个小时！我不知道为什么。

```
$data = $row['date_future']; // 1363473942
$time = time(); // 1363472242

//echoing future date
echo "Future time: ".date('H:i:s', $data)."<br/>";
echo "Current time:".date('H:i:s', $time)."<br/>"; 
```

**输出：**

> 未来时间：00:45:42
> 
> 当前时间：00:17:22

没关系，但是当我尝试计算差异时，我要多花 2 个小时！

```
echo "Difference: ".date('H:i:s', $data-$time); 
```

输出：

> 差异：02:28:20

**使固定：**

```
$d1 = new DateTime(date('H:i:s', $data));
$d2 = new DateTime(date('H:i:s', $time));
$interval = date_diff($d2, $d1);

echo "Difference: ".($interval->format('%H:%i:%s')) 
```

**输出：**

> 差异：00:28:20

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:31:58.337

时间戳是 unix 时间戳，它们表示自 1970 年 1 月 1 日午夜 UTC 以来经过的时间量（以秒为单位）。

两个时间戳之间的差为 1700 秒，因此它表示 1970 年 1 月 1 日午夜 UTC 后 1700 秒的日期，即 1970 年 1 月 1 日，0:28 UTC。您必须比 UTC 早 2 小时，所以它显示为 1 月 1 日，2:28。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T22:36:42.960

这并不是一个真正的时区问题（至少不是在 PHP 配置中*设置*正确的时区参数）——这是一个有缺陷的逻辑问题。

Unix 时间戳从 1.1.1970 00:00:00 UTC 开始以秒为单位。

1363473942 - 1363472242 是 1700 - 当您不仅查看该日期的 H:i:s 部分时，它应该变得显而易见：

```
echo "Difference: ".date('r', $data-$time); // replaced format H:i:s with r 
```

这输出

> 差异：周四，1970 年 1 月 1 日 01:28:20 +0100

– 所以我们在这里看到的是一个完全不同的*日期*，并且时区偏移和 DST 在不同的时差点开/关，乍一看可能看起来不合逻辑，但实际上是可以预料的。

从另一个中减去 unix 时间戳会产生几秒钟的时间——但它不再是与原始时间戳有*任何关系的 unix 时间戳。*

假设它是一个有意义的 unix 时间戳，格式化这个差异必然会失败。

使用例如[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)将是处理此问题的*明智*方法。

# php - 将多个 PHP 数组转换为一个数组以准备转换为 Javascript

> ID：15455373
> 
> 赞同：0
> 
> 时间：2013-03-16T22:20:06.420
> 
> 标签：php, javascript, arrays, multidimensional-array

我正在使用 PHP 和 Javascript 创建一个多项选择测验游戏。问题可以有 2 到 6 个答案。我一直在使用下面代码中的 PHP 查询来获取测验问题的数组以及每个问题的答案。

我现在想在 Javascript 中使用这些数据，并且希望每次用户点击下一个问题时，都会显示一个问题和相应的答案。

我认为（但不确定）最好的方法是将数组组合成一个数组，其中问题数组包含答案数组，然后再转换为 javascript 数组。

这真的是我应该这样做的方式吗？如果是这样，我该怎么做？

```
$thisquizid = $_POST['quizidvalue'];
    for ($j = 0; $j < $questionrows; ++$j)
        {
            $questionresult = pg_fetch_array($questionquery); 
            $answerquery = pg_query($db_handle, "SELECT * FROM answer WHERE questionid = '$questionresult[0]'");
            $answerrows = pg_num_rows($answerquery);  

        for ($i = 0; $i < $answerrows; ++$i)
            {
                $answerresult = pg_fetch_array($answerquery); 
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:28:21.690

让我们从另一个方向来看这个。JS中的数据应该是什么样的？或者更确切地说，PHP 应该返回什么 JSON 才能使 JS 变得干净整洁。就像是：

```
var json = { // From PHP via AJAX
  "questions_and_answers": [
    {
      "question": "What is the airspeed velocity of an unladen swallow?",
      "answers": [
        "11 meters per second",
        "24 miles an hour",
        "African or European?"
      ]
    },
    {
      "question": "If a tree falls in an empty forest does it make a sound?",
      "answers": [
        "Unequivocally, yes.",
        "Unequivocally, no.",
        "It's all subjective."
      ]
    }
  ]
};

for(var i = 0, j = json.questions_and_answers.length; i < j; i++) {
  var question = json.questions_and_answers[i].question;
  var answers = json.questions_and_answers[i].answers.join("\n");
  alert(question + "\n" + answers);
} 
```

现在，在 PHP 中会是什么样子？传递 json_encode 最简单的方法是嵌套数组，因为您没有使用问答对象或某种 ORM：

```
<?php
$questions_and_answers = array(
    array(
        "question" => "What is the airspeed velocity of an unladen swallow?",
        "answers" => array(
            "11 meters per second",
            "24 miles an hour",
            "African or European?"
        )
    ),
    array(
        "question" => "If a tree falls in an empty forest does it make a sound?",
        "answers" => array(
                "Unequivocally, yes.",
                "Unequivocally, no.",
                "It's all subjective."
            )
    )
);

// Wrap in a parent object, assuming you're delivering to JS with via AJAX.
echo json_encode(array("questions_and_answers" => $questions_and_answers));
?> 
```

因此，您的服务器端代码走在正确的轨道上，但您希望在循环访问数据库结果时填充一个空数组：

```
<?php

$thisquizid = $_POST['quizidvalue'];

    $json_output = array();

    for ($j = 0; $j < $questionrows; ++$j)
        {
            $questionresult = pg_fetch_array($questionquery); 
            $answerquery = pg_query($db_handle, "SELECT * FROM answer WHERE questionid = '$questionresult[0]'");
            $answerrows = pg_num_rows($answerquery);             
            $json_output[$j] = array( "question" => $questionresult["text"], "answers" => array());

        for ($i = 0; $i < $answerrows; ++$i)
            {
                $answerresult = pg_fetch_array($answerquery);
                $json_output[$j]["answers"][] = $answerresult["text"];
            }

    }

    echo json_encode(array("questions_and_answers" => $json_output));

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:06:26.800

当然，假设您不只想要 Javascript 中的所有内容，您也可以这样做（即，它实际上是一个人们想要作弊的测验，因此您需要将答案存储在您的服务器上......）。

使用 AJAX 调用您的 PHP 页面，然后只返回您需要显示为变量的值，JSON 数组等等......基本的 AJAX 调用将如下所示：

```
var xmlhttpMain=new XMLHttpRequest();
function changeContent(){
    xmlhttpMain.open("GET", true);
    xmlhttpMain.send(null);
    xmlhttpMain.onreadystatechange=function(){
    if (xmlhttpMain.readyState==4 && xmlhttpMain.status==200){
            newStuff=xmlhttpMain.responseText;//This is your JSON or Array that you create in the PHP file... 
            //Then run whatever code you want here
    }
} 
```

在您的 PHP 文件中，只需使用“echo($someString);” 将您的信息发送回JS土地...

# java - 是否可以使用 Java 枚举将字母转换为数字？

> ID：15455375
> 
> 赞同：0
> 
> 时间：2013-03-16T22:20:12.877
> 
> 标签：java, enums

我对java很陌生。我需要编写一个程序，输入英文文本并根据以下对应关系将其翻译成数字：a 到 0，b 到 1...z 到 26，句点“。” 到 27，逗号“，”到 28，“？” 到29，“（”到30，和“）”到31。我想知道是否可以使用枚举来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:24:04.573

这不是 Java 特有的。对于计算机而言，字符只是对应于某些代码的数值：ASCII、Unicode 或其他。因此，在大多数编程语言（包括 Java）中，您应该找到将字母视为数字的方法。在 Java 中，您可以在此处使用`char`原始类型（和对象包装器）。`Character`

你只需要做一些基本的算术就可以得到你需要的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T23:06:33.977

你可以做

```
public static int letterToInt(char ch) {
    return (ch & 31) - 1;
} 
```

如果你有一个特定的字母列表，你可以做

```
public static int letterToInt(char ch) {
    return "abcdefghijklmnopqrstuvwxyz.,?()".indexOf(ch);
} 
```

将“a”或“A”映射到 0，将“b”或“B”映射到 1，等等。注意：az 是 1 到 26 或 0 到 25。

# machine-learning - 表示 Exp 中的对数似然。最大化算法

> ID：15455376
> 
> 赞同：2
> 
> 时间：2013-03-16T22:20:15.513
> 
> 标签：machine-learning, normal-distribution, expectations

我已经实现了exp。`mu`最大化算法，它会收敛并正确返回 和 的值`sigma`，我已经检查了各种示例。

我试图绘制对数似然，但我不知道它会以正确的形式出现吗？这是等式： ![在此处输入图像描述](../Images/81516d76860de0193eadd02761cafd72.png) 我的情节，y是对数似然值，x是迭代次数。 ![在此处输入图像描述](../Images/a065daca8a43a47bcb06447a0228b0a7.png)

负值很奇怪，也许我应该标准化可能性？对数似然在 Exp 中意味着什么。最大化？

```
logLikelihood = 0;
for i = 1 : n
    logTemp = 0;
    for j = 1 : k
        logTemp =  logTemp + p(j) * mvnpdf(x(i,:), mu(j,:), sigma(:,:,j));
    end
    logLikelihood = logLikelihood + log(logTemp);
end
plot(iteration, logLikelihood,'r*');
hold on; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:29:21.083

对数概率总是负数，因为它是概率的对数（p<1）。您的概率（不是 logprop。）的顺序是 p=10^-1000，这是正常的。例如，10000 次有偏骰子掷骰的最可能序列的概率非常小（但其他序列的可能性更小）。

logpropability 是一种避免概率消失的结构，即程序只会将它们四舍五入为零，并且当它这样做时，程序很可能会崩溃，例如除以一些归一化为零。

# javascript - $resource 转换响应不起作用

> ID：15455387
> 
> 赞同：5
> 
> 时间：2013-03-16T22:21:11.670
> 
> 标签：javascript, angularjs

这里有一个简化的`$resource`例子（改编自 Angular 网站）：

```
angular.module('project', ['mongolab']);

function ListCtrl($scope, Project) {
  $scope.projects = Project.test();
}

angular.module('mongolab', ['ngResource']).
factory('Project', function ($resource) {
  var url, dfParams, actions;

  url = 'https://api.mongolab.com/api/1/databases' + '/angularjs/collections/projects/:id';
  dfParams = {
    apiKey: '4f847ad3e4b08a2eed5f3b54'
  };

  actions = {
    test: {
      method: 'GET',
      isArray: true,
      transformResponse: function (response) {
        // line is never getting called
        console.log('transforming');
        return response;
      }
  };

  var Project = $resource(url, dfParams, actions);
  return Project;
}); 
```

**问题**是这条线`console.log('transforming')`永远不会被调用。这是为什么？其他一切正常。

[在这里](http://jsfiddle.net/CaioToOn/b75g3/)拉小提琴。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T00:15:33.207

此功能仅在 AngularJs 1.1.2 或更高版本中可用。它在 AngularJs 的 1.1.1 或更早版本中不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:03:01.610

响应转换回调未在 $resource 服务中公开。它存在于底层的 $http 服务中。

所以你有两个选择：

*   使用“低级” $http 而不是 $resource 抽象，
*   在您的资源周围创建某种包装器，这将按照您想要的方式转换响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-14T06:34:47.063

我有同样的问题，我使用 AngularJS 1.2.26。
我已经定义了一个包含`transformResponse`$http 级别的拦截器，例如：

```
return {
  'request': function (config) {
      config.defaults.transformResponse = function(data){
          //some has been done
      };
      return config;
}, 
```

**当我删除上面的代码时，我`transformResponse`的 in $resource 工作了！**
为了解决这个问题，我`transformResponse`在 $resource 中定义了我的：

```
return $resource(pathConfig.serverURL + ':demoId',
    {
        demoId: "@id"
    },
    {
        hello: {
            method: "GET",
            url: serverDomain + ":demoId",
            transformResponse: addTransformResponses(
                [
                    function (data, getHeaders) {
                        //doing hello's OWN interceptors
                    }
                ])
        }
    }); 
```

并`addTransformResponses`包含**常见的拦截器**，如：

```
addTransformResponses: function (addTrans) {
    return [this.parseResponseJson, this.parseResponseArray]
        .concat(addTrans);
},

//parse JSON
parseResponseJson: function (data, getHeaders) {
    try {
        return angular.fromJson(data);
    } catch (e) {
        console && console.error("return data is not a JSON!");
        return data;
    }
},
parseResponseArray: function (data, getHeaders) {
    if (angular.isArray(data)) {
        return {"array": data};
    }
    return data;
} 
```

通过这样做，您可以很好地配置常用的拦截器和一些请求自己的拦截器！:)
如果有更好的练习，请告诉我！谢谢！

# python - dicts的dicts到DataFrame

> ID：15455388
> 
> 赞同：15
> 
> 时间：2013-03-16T22:21:12.190
> 
> 标签：python, json, dictionary, pandas

我想将 JSON 数据存储在 Python Pandas DataFrame 中

我的 JSON 数据是这样的 dicts 的 dicts

```
d = {
  "col1": {
    "row1": {
      "data1": "0.87", 
      "data2": "Title col1", 
      "data3": "14.4878", 
      "data4": "Title row1"
    }, 
    "row2": {
      "data1": "15352.3", 
      "data2": "Title col1", 
      "data3": "14.9561", 
      "data4": "Title row2"
    }, 
    "row3": {
      "data1": "0", 
      "data2": "Title col1", 
      "data3": "16.8293", 
      "data4": "Title row3"
    }
  }, 
  "col2": {
    "row1": {
      "data1": "0.87", 
      "data2": "Title col2", 
      "data3": "24.4878", 
      "data4": "Title row1"
    }, 
    "row2": {
      "data1": "15352.3", 
      "data2": "Title col2", 
      "data3": "24.9561", 
      "data4": "Title row2"
    }, 
    "row3": {
      "data1": "0", 
      "data2": "Title col2", 
      "data3": "26.8293", 
      "data4": "Title row3"
    }
  }
} 
```

我这样做是为了将我的数据放入 DataFrame

```
import pandas as pd
df=pd.DataFrame(d) 
```

我明白了

```
In [1]: df
Out[1]: 
                                                   col1                                               col2
row1  {'data4': 'Title col1', 'data1': '0.87', 'data3':  {'data4': 'Title col1', 'data1': '0.87', 'data3':
row2  {'data4': 'Title col2', 'data1': '15352.3', 'data  {'data4': 'Title col2', 'data1': '15352.3', 'data
row3  {'data4': 'Title col3', 'data1': '0', 'data3': '1  {'data4': 'Title col3', 'data1': '0', 'data3': '2 
```

我的问题是我的 DataFrame 包含字典而不是值。

我想知道如何使用 Pandas DataFrame 管理多维数据（超过 2 维......此处为 3 维）。

DataFrame 中的每个 dict 都有相同的键。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T22:28:42.773

```
df = pd.Panel.from_dict(d).to_frame() 
```

输出：

```
 col1        col2
major minor                        
data1 row1         0.87        0.87
      row2      15352.3     15352.3
      row3            0           0
data2 row1   Title col1  Title col2
      row2   Title col1  Title col2
      row3   Title col1  Title col2
data3 row1      14.4878     24.4878
      row2      14.9561     24.9561
      row3      16.8293     26.8293
data4 row1   Title row1  Title row1
      row2   Title row2  Title row2
      row3   Title row3  Title row3 
```

如果您不想使用面板：

```
pd.concat(map(pd.DataFrame, d.itervalues()), keys=d.keys()).stack().unstack(0) 
```

# sql - SQL Server 2008 R2：使用 guid 主键更新表时出现超时异常

> ID：15455392
> 
> 赞同：1
> 
> 时间：2013-03-16T22:21:55.770
> 
> 标签：sql, sql-server-2008-r2, guid

我在 SQL Server 2008 R2 中有一个表，它有一个主键`Guid`类型。经过几天的数据库测试，现在这个表有 7000 行。

我有一个查询，当数据约为 1000 条记录时有效，但现在无效。

查询是：

```
update Ticket 
set AlphaCode = "Hi" 
where TicketId = 'fe0b840d-5688-4f38-a1fe-46eb6ff04296' 
```

该`AlphaCode`列的数据类型是`nvarchar(1024)`.

上一个查询有时会在大约 10 秒内运行！但很多时候它失败了

> *超时异常*

有趣的是，以下查询会在不到一秒的时间内返回记录：

```
select * 
from Ticket 
where TicketId = 'fe0b840d-5688-4f38-a1fe-46eb6ff04296' 
```

这意味着 DBMS 引擎很容易找到我的记录，但问题在于更新操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:20:35.900

您永远不应该将 Guids 用于集群键。如果您了解聚集键的工作原理以及它如何在磁盘上排列数据，那么您就会意识到这些表上的更新和删除是多么昂贵。

[在此处](https://stackoverflow.com/questions/11938044/guid-as-primary-key-best-practices)查看其他问题。

# c# - 从我的项目中获取 aspx 文件集合

> ID：15455394
> 
> 赞同：3
> 
> 时间：2013-03-16T22:22:11.400
> 
> 标签：c#

如何将我的所有 aspx 文件名读取到我的项目中？我需要收集我的 aspx 文件。

我想将它们添加到`DropDownList`.

喜欢

```
foreach(ASPX file in myProject.aspx.collections) {
  dropdownlist1.Items.Add(file.name);//Name could be: Default.aspx
} 
```

提前致谢。

**编辑：**谢谢你的朋友，你所有的答案都是正确的。最后我做了下一个：

```
string sourceDirectory = Server.MapPath("~/");
DirectoryInfo directoryInfo = new DirectoryInfo(sourceDirectory);
var aspxFiles = Directory.EnumerateFiles(sourceDirectory, "*.aspx", SearchOption.TopDirectoryOnly).Select(Path.GetFileName);

foreach (string currentFile in aspxFiles) {
    this.dropdownlist1.Items.Add(currentFile);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:31:31.763

通过反射，这应该有效：

```
public static IEnumerable<string> getAspxNames()
{
    var pageTypes = Assembly.GetExecutingAssembly().GetTypes()
        .Where(t => t.BaseType == typeof(Page));
    return pageTypes.Select(t => t.Name).ToList();
}

// ...
foreach(string pageName in getAspxNames())
    dropdownlist1.Items.Add(pageName + ".aspx"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T22:30:25.597

尝试这个：

```
var dirPath = Server.MapPath("~/");
var ext = new List<string> {".aspx"};
var fileList = Directory.GetFiles(dirPath, "*.*", SearchOptions.AllDirectories)
     .Where(s => ext.Any(ex => s.EndsWith(ex));

dropdownlist1.DataSource = fileList;
dropdownlist1.DataBind(); 
```

仅对文件名执行此操作

```
foreach(string file in fileList)
 dropdownlist1.Items.Add(Path.GetFileName(file)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:24:34.003

您可以像从文件夹中读取任何文件一样读取文件。

只是您需要将虚拟文件夹引用“转换”为物理文件夹：

[http://forums.asp.net/t/1273264.aspx/1](http://forums.asp.net/t/1273264.aspx/1)

然后你可以使用 Directory.EnumerateFiles() 和 aspx 过滤器来获取所有文件。

# android - 没有上下文的 ArrayAdapter Android

> ID：15455396
> 
> 赞同：6
> 
> 时间：2013-03-16T22:22:15.853
> 
> 标签：android, android-arrayadapter

我想`ArrayAdapter`在我的类中实现一个`Fragment`不扩展的`Activity`。

问题是ArrayAdapter的构造函数的第一个参数要传入什么。

```
ArrayAdapter<String> myAdapter = new ArrayAdapter<String>(<what place here>,android.R.layout.simple_list_item1,anyarraylist); 
```

现在我应该如何处理第一个参数？我试图通过

```
getActivity().getApplicationContext() 
```

在第一个参数中，但代码崩溃了。

请帮帮我。

我的日志猫：

```
03-17 03:33:08.029: E/AndroidRuntime(596): FATAL EXCEPTION: main
03-17 03:33:08.029: E/AndroidRuntime(596): java.lang.NullPointerException
03-17 03:33:08.029: E/AndroidRuntime(596):  at com.search.pages.SearchResults.onCreateView(SearchResults.java:92)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.os.Handler.handleCallback(Handler.java:587)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.os.Looper.loop(Looper.java:123)
03-17 03:33:08.029: E/AndroidRuntime(596):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-17 03:33:08.029: E/AndroidRuntime(596):  at java.lang.reflect.Method.invokeNative(Native Method)
03-17 03:33:08.029: E/AndroidRuntime(596):  at java.lang.reflect.Method.invoke(Method.java:521)
03-17 03:33:08.029: E/AndroidRuntime(596):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-17 03:33:08.029: E/AndroidRuntime(596):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-17 03:33:08.029: E/AndroidRuntime(596):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T22:25:20.907

> 现在我应该如何处理第一个参数

`getActivity()`返回一个`Activity`，它可以很好地作为`ArrayAdapter`构造函数的第一个参数。`Activity`继承自`Context`。

> 我试图在第一个参数中传递“getActivity().getApplicationContext()”，但代码崩溃了

`getApplicationContext()`除非你*确切地***知道你***为什么***打电话，否则永远不要打电话`getApplicationContext()`。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T13:05:39.520

我尝试了以下一个并且它工作得很好

```
 // In getView
     FragmentD f = new FragmentD();
     FragmentTransaction ft = context.getFragmentManager().beginTransaction();
     ft.replace(R.id.frame_container, f);
     ft.commit();
* 
```

*但在 Fragment* * **ArrayAdapter Class- context 类型是 Activity 而不是 Context context 的情况下**，如下所示：

```
 public class CListAdapter extends ArrayAdapter<List1> 
    {
        private final Activity context;

        private ArrayList<List1> conlist = null;

        public CListAdapter(Activity context,ArrayList<ConnectorsList> connList) 
        {
            super(context, R.layout.activity_listitem, connList);
            System.out.println("Calling------");
            this.context = context;
            this.conlist = connList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T23:09:41.867

得到了答案。问题在于通过 id 查找视图。

getActivity().findViewById();

我使用了一个 View 变量并扩大了布局，并使用该 View 来查找视图。

IE

查看 v=inflater.inflate(............) listView listView=v.findViewById(param);

有效。

谢谢大家的帮助。**

# php - 英国家庭和手机号码验证

> ID：15455413
> 
> 赞同：1
> 
> 时间：2013-03-16T22:23:59.443
> 
> 标签：php

我目前正在使用验证

```
$pattern = "/^(\+44\s?7\d{3}|\(?07\d{3}\)?)\s?\d{3}\s?\d{3}$/"; 
```

但是，虽然这接受了手机号码，例如 07515674321，但不会接受家庭电话号码，例如 01623749983。有人有正确的验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:40:52.613

我发现这适用于手机号码和家庭电话号码

```
/^((\(?0\d{4}\)?\s?\d{3}\s?\d{3})|(\(?0\d{3}\)?\s?\d{3}\s?\d{4})|(\(?0\d{2}\)?\s?\d{4}\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$/ 
```

# javascript - 在 javascript 中创建 JSON 的循环

> ID：15455417
> 
> 赞同：-5
> 
> 时间：2013-03-16T22:24:18.273
> 
> 标签：javascript, json

有人可以帮我构建一个循环来创建以下结构吗？值可以是任何东西。

```
var json = [
      {
        "adjacencies": [],
        "data": {
          "$color": "#83548B",
          "$type": "circle",
          "$dim": 10
        },
        "id": "graphnode0",
        "name": "graphnode0"
      }, {
        "adjacencies": [],
        "data": {
          "$color": "#EBB056",
          "$type": "triangle",
          "$dim": 9
        },
        "id": "graphnode18",
        "name": "graphnode18"
      }, {
        "adjacencies": [],
        "data": {
          "$color": "#70A35E",
          "$type": "circle",
          "$dim": 8
        },
        "id": "graphnode19",
        "name": "graphnode19"
      }, {
        "adjacencies": [],
        "data": {
          "$color": "#C74243",
          "$type": "star",
          "$dim": 8
        },
        "id": "graphnode20",
        "name": "graphnode20"
      }
  ]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:26:50.473

```
var foo = [];

for (var i = 0; i< 10; i++){
    foo.push({
    "adjacencies": [],
    "data": {
      "$color": "#83548B",
      "$type": "circle",
      "$dim": 10
    },
    "id": "graphnode0",
    "name": "graphnode0"
  });
} 
```

根据需要更改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:37:53.203

您可以使用它，但我不知道您从哪里获得颜色、类型和暗淡值：

```
var data = [] ;
var total = 6 ;
for (var i=0 ; i<total ; i++){
    data.push({
    "adjacencies": [],
    "data": {
      "$color": "the-color",
      "$type": "the-type",
      "$dim": 10 // the dim
    },
    "id": "graphnode"+i,
    "name": "graphnode"+i
  });
} 
```

# pseudocode - 手动时间跨度

> ID：15455424
> 
> 赞同：0
> 
> 时间：2013-03-16T22:24:56.670
> 
> 标签：pseudocode, timespan

给定两个日期格式的输入，表示事件的开始和开始：

例如：`23:59`和`23:10`

如何手动计算时间跨度，我的意思是这个事件的持续时间？

你**可以**考虑一下界面：

`void timeSpan(int hourStart, int minutesStart, int hourEnd, int minutesEnd);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:28:45.137

这真的是你想要的吗？

```
endh,endm := split(':',endtime)
starth,startm := split(':',starttime)

diffm := endm-startm
diffh := endh-starth

if (diffm<0) 
  diffm += 60
  diffh -= 1 
```

**编辑**

经过评论中的讨论：如果开始时间和结束时间仅以 HH:MM 给出，并且结束时间 < 开始时间 OQ 希望我们假设，结束时间是第二天（不是 +2 天，+3 天，...） . 在这种情况下，我们需要：

```
if (diffh<0)
  diffh += 24 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:32:34.500

通过“手动”，我假设您的意思是没有库来解析时间。

将时间转换为分钟，然后减去它们：

```
start = "23:10"
end = "23:59"

s = parseInt(start.substr(0, 2)) * 60 + parseInt(start.substr(3, 2))
e = parseInt(end.substr(0, 2)) * 60 + parseInt(end.substr(3, 2))

diff = e - s 
```

如果开始日期晚于结束日期，则会得到否定结果。如果这意味着结束时间是第二天，您可以添加 24*60 分钟：

```
if diff < 0
  diff += 24*60 
```

如果这意味着时间只是交换，你可以得到结果的绝对值：

```
diff = abs(diff) 
```

# java - 带有 LList 打印输出的树/哈希图

> ID：15455428
> 
> 赞同：2
> 
> 时间：2013-03-16T22:25:41.227
> 
> 标签：java, list, dictionary, key

我的程序接收一个文本文件并将每个唯一的单词（或字符组）存储为映射中的键，并存储每个单词出现的行号的链接列表。我还在 printEntry 方法中实现了一个发生计数器。

我的问题是，如果一个单词在一行上出现多次，我会尽量避免打印相同的行号两次。我在 printEntry 方法中使用了 if 语句，似乎已经接近了，但仍然没有雪茄。我不想阻止将重复的行号添加到列表中，因为它仍然需要计算以增加出现变量。

这是一个会给我带来麻烦的输入：

```
keyboard
mouse mouse
mouse 
```

我需要输出如下所示：

```
ID: keyboard  Line Numbers: 1  Occurance: 1
ID: mouse  Line Numbers: 2,3  Occurance 3 
```

我现在只提供 printEntry 方法以保持帖子简短。如果需要，我可以提供更多代码。谢谢。

```
public static void printEntry(Map.Entry entry){

    //local occurance variable
    int occurance = 1;

    //print the word and the line numbers as well as test for duplicate line integers on the same key
    Iterator itr = ((LinkedList) entry.getValue()).iterator();
    System.out.print("ID: " + entry.getKey() + "   Lines: " + itr.next());

    //object variable to store previous line number
    Object check = itr.next();
    while(itr.hasNext()){
        occurance++;
        if (check != itr.next()){
            System.out.print(", " + itr.next());
        }
        else {
            System.out.println("Skipped duplicate");
        }
    }
    //prints occurance from incremented occurance variable
    System.out.print("  " + " Occurance: " + occurance);
    System.out.println();
} 
```

编辑-

我希望所有条目的信息都显示在同一行，因为我们将要扫描大型（r）文档。我已将 printEntry 方法的格式设置为接近我想要的位置，但无法弄清楚如何使用 for 循环来执行此操作。

```
 public void printEntry(Map.Entry<String, WordStats> entry) {
    String word = entry.getKey();
    WordStats stats = entry.getValue();

    System.out.print("ID: " + word + "  Occurrences: " 
                       + stats.getOccurrences() + " Lines: ");
    for (Integer lineNumber : stats.getLines()) {
        System.out.println(lineNumber);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:49:46.263

所以你想要，对于每个单词，保持

*   它出现的次数
*   出现的一组排序的行号（通过集合，我的意思是没有重复的行号）

所以就这样做：

```
public class WordStats {
    private int occurrences;
    private SortedSet<Integer> lineNumbers = new TreeSet<Integer>();

    public void addOccurrence(int lineNumber) {
        occurrences++; 
        lineNumbers.add(lineNumber);
    }

    // getters ommitted for brevity
} 
```

现在只需使用`Map<String, WordStats>`. 对于文本中的每个单词，如果它不在地图中，则添加一个 WordStats，并将其添加到其 WordStats 实例中。

printEntry 方法将如下所示：

```
public void printEntry(Map.Entry<String, WordStats> entry) {
    String word = entry.getKey();
    WordStats stats = entry.getValue();
    System.out.println("The word " + word + " has been met " 
                       + stats.getOccurrences() + " time(s), on the following line(s):");
    for (Integer lineNumber : stats.getLines()) {
        System.out.println(lineNumber);
    }
} 
```

# python - 将 Facebook 应用程序添加到 Django 以获取 Facebook 页面的权限

> ID：15455429
> 
> 赞同：1
> 
> 时间：2013-03-16T22:25:42.823
> 
> 标签：python, django, facebook-graph-api, django-facebook

我想代表页面管理员在一些 Facebook 页面上发布。我想要这样的东西：

1.  Facebook 页面管理员使用 Facebook 帐户登录并通过单击按钮进行身份验证
2.  我获得了在他的 Facebook 页面上发布内容的所有权利（page_access_token 和 page_ID）
3.  一些来到我网站的用户可以在各自的 Facebook 页面上发布他的消息。

问题在于第一点和第二点，我已经为身份验证部分制作了一个 Facebook 应用程序，但是我如何将它与 Django 集成。[当我使用facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk/)拥有 page_access_token 和 page_ID 时，我可以在特定的 facebook 页面上发帖。

下面的代码在 facebook 页面上发布提要。

```
import facebook
oauth_access_token = "page_access_token"
graph = facebook.GraphAPI(oauth_access_token)
graph.put_object("me", "feed", message="Hello, world") 
```

它更像是一个 Django 应用程序然后是 Facebook 应用程序。非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T15:43:40.253

我认为有一个指南很好地描述了前两个步骤。虽然不允许链接到该站点，但我不知道为什么。我只想说，在 Google 上搜索“使用 Python/Django 代表您的用户发布到 Facebook”可能会有所帮助。

# mysql - Magento 升级问题

> ID：15455433
> 
> 赞同：1
> 
> 时间：2013-03-16T22:26:11.070
> 
> 标签：mysql, magento, magento-1.7

我非常需要你的帮助，我正在为此苦苦挣扎..

> 我的问题是----如何在保持所有产品完好无损的同时将我的 mag 从 1.5 升级到 1.7？

请帮助我，我在magento论坛，SO和谷歌上阅读了很多文章，但没有什么可以帮助我......我应该怎么做？

谢谢..

# cocos2d-iphone - 调用 stopAllActions 后 CCCallBlock 保留的 CCNode

> ID：15455435
> 
> 赞同：0
> 
> 时间：2013-03-16T22:26:27.997
> 
> 标签：cocos2d-iphone, memory-leaks, retain, ccnode

我有一个实用函数，用于在圆形路径中移动 CCNode，无论是完整的圆还是部分圆。

该函数工作得非常好，但是如果我希望 CCNode 不断地跟随路径，我通过传入的 Block 来完成，最终调用相同的函数（有点递归，但不是真的）。

我发现的问题是，由于该函数在内部使用块，因此即使在调用 stopAllActions 或 removeFromParentAndCleanup:YES 之后，正在运行操作的 CCNode 也会保留，即使 CCNode 已被清理并从屏幕，它保留在内存中并且没有被释放。这似乎会影响性能，即使节点没有显示，因为 CCNode 和其他依赖项仍然（不知何故）在 cocos2d 系统中。

这是移动 CCNode 的函数：

```
@interface CocosUtil : NSObject {

}

typedef void (^NodeCompletionBlock)(CCNode *sprite);

+ (void) moveOperand:(CCNode*)operand throughCircleWithCentre:(CGPoint)centreOfElipse
     startingDegrees:(float)startingDegrees
     endingAtDegrees:(float)endingDegrees
      startingRadius:(float)startingRadius
        endingRadius:(float)endingRadius
 withInitialDuration:(ccTime)initialDuration
    withMainDuration:(ccTime)duration
           clockwise:(BOOL)clockwise
     completionBlock:(NodeCompletionBlock)handler;

@end

@implementation CocosUtil

+ (float) angleFromDegrees:(float)deg {
    return fmodf((450.0 - deg), 360.0);
}

// Calculates the angle from one point to another, in radians.
//
+ (float) angleFromPoint:(CGPoint)from toPoint:(CGPoint)to {
    CGPoint pnormal = ccpSub(to, from);
    float radians = atan2f(pnormal.x, pnormal.y);

    return radians;
}

+ (CGPoint) pointOnCircleWithCentre:(CGPoint)centerPt andRadius:(float)radius atDegrees:(float)degrees {
    float x = radius + cos (CC_DEGREES_TO_RADIANS([self angleFromDegrees:degrees])) * radius;
    float y = radius + sin (CC_DEGREES_TO_RADIANS([self angleFromDegrees:degrees])) * radius;
    return ccpAdd(centerPt, ccpSub(CGPointMake(x, y), CGPointMake(radius, radius)));
}

+ (void) moveOperand:(CCNode*)operand throughCircleWithCentre:(CGPoint)centreOfElipse
     startingDegrees:(float)startingDegrees
     endingAtDegrees:(float)endingDegrees
      startingRadius:(float)startingRadius
        endingRadius:(float)endingRadius
 withInitialDuration:(ccTime)initialDuration
    withMainDuration:(ccTime)duration
           clockwise:(BOOL)clockwise
     completionBlock:(NodeCompletionBlock)handler {
    float range;

    if (clockwise == YES) {
        if (endingDegrees <= startingDegrees) {
            range = (360.0 + endingDegrees) - startingDegrees;
        } else {
            range = endingDegrees - startingDegrees;
        }
    } else {
        if (endingDegrees >= startingDegrees) {
            range = (360.0 + startingDegrees) - endingDegrees;
        } else {
            range = startingDegrees - endingDegrees;
        }
    }

    __block float degrees = startingDegrees;
    __block float radius = startingRadius;

    const float incrementAngle = 10.0;

    float intervals = (range / incrementAngle) - 1;

    ccTime interval = duration / intervals;
    float radiusStep = (endingRadius - startingRadius) / intervals;

    if (clockwise == YES) {
        degrees += incrementAngle;
    } else {
        degrees -= incrementAngle;
    }

    radius += radiusStep;

    __block void (^moveToNextPoint)();

    moveToNextPoint = [^(){
        if (fabsf(degrees - endingDegrees) < 1.0) {
            [operand runAction:[CCSequence actions:
                                [CCEaseBounceOut actionWithAction:
                                 [CCMoveTo actionWithDuration:interval position:[self pointOnCircleWithCentre:centreOfElipse andRadius:radius atDegrees:degrees]]],
                                [CCCallBlock actionWithBlock:
                                 ^{
                                     if (handler != nil) {
                                         handler(operand);
                                     }
                                 }],
                                nil]];
        } else {
            [operand runAction:[CCSequence actions:
                                [CCMoveTo actionWithDuration:interval position:[self pointOnCircleWithCentre:centreOfElipse andRadius:radius atDegrees:degrees]],
                                [CCCallBlock actionWithBlock:moveToNextPoint],
                                nil]];

            if (clockwise == YES) {
                degrees += incrementAngle;

                if (degrees > 360.0) {
                    degrees = degrees - 360.0;
                }
            } else {
                degrees -= incrementAngle;

                if (degrees < 0.0) {
                    degrees = degrees + 360.0;
                }
            }

            radius += radiusStep;
        }
    } copy];

    [operand runAction:[CCSequence actions:
                        [CCMoveTo actionWithDuration:initialDuration position:[self pointOnCircleWithCentre:centreOfElipse andRadius:startingRadius atDegrees:startingDegrees]],
                        [CCCallBlock actionWithBlock:moveToNextPoint],
                        nil]];

}

@end 
```

您会注意到节点移动经过的弧被分成 10 度的步长。这样做是为了在不编写 CCActionInterval 子类的情况下获得圆周运动，但这意味着使用块或选择器来保持运动运行直到完成。

现在，为了让我的 CCNode 不断地移动一个完整的圆圈，我使用以下方法调用此函数：

```
- (void) moveLayer:(CCNode*)layer
startingDegrees:(float)startingDegrees
endingAtDegrees:(float)endingDegrees
startingRadius:(float)startingRadius
endingRadius:(float)endingRadius
withInitialDuration:(ccTime)initialDuration
withMainDuration:(ccTime)duration
clockwise:(BOOL)clockwise {
    [CocosUtil moveOperand:layer throughCircleWithCentre:CGPointMake(240.0, 160.0) startingDegrees:startingDegrees endingAtDegrees:endingDegrees startingRadius:startingRadius endingRadius:endingRadius withInitialDuration:initialDuration withMainDuration:duration clockwise:clockwise completionBlock:^(CCNode *sprite) {
        [self moveLayer:layer startingDegrees:startingDegrees endingAtDegrees:endingDegrees startingRadius:startingRadius endingRadius:endingRadius withInitialDuration:initialDuration withMainDuration:duration clockwise:clockwise];
    }];
} 
```

我尝试了一些不同的事情，比如根本不传入一个块，但是除了根本不使用该函数之外，没有什么能阻止保留。

据我所知，在 XCode 文档中阅读，我们有：

> “如果在方法的实现中使用块，对象实例变量的内存管理规则会更加微妙：
> 
> 如果通过引用访问实例变量，则保留 self；如果您按值访问实例变量，则会保留该变量。”

所以这告诉我，通过以我的方式在我的函数中使用块导致隐藏保留。

稍后调用 stopAllActions 不会触发释放。

这对我有用的唯一方法是，如果在我节点的 cleanup() 消息中添加`[self release]`.

我不喜欢这样，因为它与执行保留的代码分离。

我的一个新想法是以某种方式将其重写为新的 CCActionInterval 子类，但我仍然不确定这是否能解决问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:17:23.397

好的。接受@LearnCocos2D 的建议，并做我已经想在这里做的事情是我为其他可能需要它的人提供的解决方案。

基本上，我将整个事情重写为一个相对简单的 CCActionInterval 子类。

根本不再涉及任何块，因此，没有隐藏的保留。更干净，更优雅（我认为）。

界面：

```
#import "cocos2d.h"

@interface CCMoveThroughArc : CCActionInterval

/** creates the action */
+(id) actionWithDuration:(ccTime)duration
                  centre:(CGPoint)centreOfCircle
       startingAtDegrees:(float)startingDegrees
         endingAtDegrees:(float)endingDegrees
        startingAtRadius:(float)startingRadius
          endingAtRadius:(float)endingRadius;

/** creates the action */
+(id) actionWithDuration:(ccTime)duration
                  centre:(CGPoint)centreOfCircle
       startingAtDegrees:(float)startingDegrees
         endingAtDegrees:(float)endingDegrees
        startingAtRadius:(float)startingRadius
          endingAtRadius:(float)endingRadius
                reversed:(BOOL)reversed;

/** initializes the action */
-(id) initWithDuration:(ccTime)duration
                centre:(CGPoint)centreOfCircle
     startingAtDegrees:(float)startingDegrees
       endingAtDegrees:(float)endingDegrees
      startingAtRadius:(float)startingRadius
        endingAtRadius:(float)endingRadius
              reversed:(BOOL)reversed;

@end 
```

实施：

```
#import "CCMoveThroughArc.h"

@implementation CCMoveThroughArc {

    CGPoint centre_;

    float startingDegrees_;
    float endingDegrees_;
    float diffDegrees_;

    float startingRadius_;
    float endingRadius_;
    float diffRadius_;

    BOOL reversed_;
}

/** creates the action */
+(id) actionWithDuration:(ccTime)duration
                  centre:(CGPoint)centreOfCircle
       startingAtDegrees:(float)startingDegrees
         endingAtDegrees:(float)endingDegrees
        startingAtRadius:(float)startingRadius
          endingAtRadius:(float)endingRadius {
    return [[self alloc] initWithDuration:duration centre:centreOfCircle startingAtDegrees:startingDegrees endingAtDegrees:endingDegrees startingAtRadius:startingRadius endingAtRadius:endingRadius reversed:NO];
}

/** creates the action */
+(id) actionWithDuration:(ccTime)duration
                  centre:(CGPoint)centreOfCircle
       startingAtDegrees:(float)startingDegrees
         endingAtDegrees:(float)endingDegrees
        startingAtRadius:(float)startingRadius
          endingAtRadius:(float)endingRadius
                reversed:(BOOL)reversed {
    return [[self alloc] initWithDuration:duration centre:centreOfCircle startingAtDegrees:startingDegrees endingAtDegrees:endingDegrees startingAtRadius:startingRadius endingAtRadius:endingRadius reversed:reversed];
}

/** initializes the action */
-(id) initWithDuration:(ccTime)duration
                centre:(CGPoint)centreOfCircle
     startingAtDegrees:(float)startingDegrees
       endingAtDegrees:(float)endingDegrees
      startingAtRadius:(float)startingRadius
        endingAtRadius:(float)endingRadius
              reversed:(BOOL)reversed {
    if( (self=[super initWithDuration:duration]) ) {
        centre_ = centreOfCircle;

        startingDegrees_ = fminf(startingDegrees, endingDegrees);
        endingDegrees_ = fmaxf(startingDegrees, endingDegrees);

        startingRadius_ = startingRadius;
        endingRadius_ = endingRadius;

        reversed_ = reversed;

        diffDegrees_ = endingDegrees_ - startingDegrees_;
        diffRadius_ = endingRadius_ - startingRadius_;
    }

    return self;
}

-(id) copyWithZone: (NSZone*) zone
{
    CCAction *copy = [[[self class] allocWithZone: zone] initWithDuration:[self duration] centre:centre_ startingAtDegrees:startingDegrees_ endingAtDegrees:endingDegrees_ startingAtRadius:startingRadius_ endingAtRadius:endingRadius_ reversed:reversed_];

    return copy;
}

-(CCActionInterval*) reverse
{
    return [[self class] actionWithDuration:duration_ centre:centre_ startingAtDegrees:startingDegrees_ endingAtDegrees:endingDegrees_ startingAtRadius:startingRadius_ endingAtRadius:endingRadius_ reversed:!reversed_];
}

-(void) startWithTarget:(CCNode *)aTarget
{
    NSAssert1(([aTarget isKindOfClass:[CCNode class]] == YES), @"CCMoveThroughArc requires a CCNode as target.  Got a %@", [[aTarget class] description]);

    [super startWithTarget:aTarget];
}

- (float) angleFromDegrees:(float)deg {
    return fmodf((450.0 - deg), 360.0);
}

- (CGPoint) pointOnCircleWithCentre:(CGPoint)centerPt andRadius:(float)radius atDegrees:(float)degrees {
    float x = radius + cos (CC_DEGREES_TO_RADIANS([self angleFromDegrees:degrees])) * radius;
    float y = radius + sin (CC_DEGREES_TO_RADIANS([self angleFromDegrees:degrees])) * radius;
    return ccpAdd(centerPt, ccpSub(CGPointMake(x, y), CGPointMake(radius, radius)));
}

-(void) update:(ccTime) t {

    float angle;
    float radius;

    if (reversed_ == NO) {
        angle = (diffDegrees_ * t) + startingDegrees_;
        radius = (diffRadius_ * t) + startingRadius_;
    } else {
        angle = endingDegrees_ - (diffDegrees_ * t);
        radius = (diffRadius_ * (1.0 - t)) + startingRadius_;
    }

    CGPoint pos = [self pointOnCircleWithCentre:centre_ andRadius:radius atDegrees:angle];
    [(CCNode*)target_ setPosition:pos];
}

@end 
```

以及使用它的代码：

```
- (void) moveStartingAtDegrees:(float)startingDegrees
               endingAtDegrees:(float)endingDegrees
                startingRadius:(float)startingRadius
                  endingRadius:(float)endingRadius
           withInitialDuration:(ccTime)initialDuration
              withMainDuration:(ccTime)duration {

    [self runAction:[CCRepeatForever actionWithAction:
                     [CCMoveThroughArc actionWithDuration:duration centre:CGPointZero startingAtDegrees:startingDegrees endingAtDegrees:endingDegrees startingAtRadius:startingRadius endingAtRadius:endingRadius reversed:YES]]];
} 
```

我希望这对其他人有用。它当然帮助了我。它并没有真正回答我的实际问题，但它非常有效地处理了问题背后的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:11:29.727

这段代码很复杂。不是真正的“帮手”。

我看到的是 moveToNextPoint 块的不必要副本。

我还看到了一些真正令人讨厌的问题的可能性，其中之一可能是保留的原因。如果不显着重构此代码，我看不到如何修复它。

一个问题是操作数。它在（复制的）块内使用，该块将保留操作数。但更糟糕的是，操作数本身使用 moveToNextPoint 块运行一个序列，这与您当时正在（重新）分配的相同。我不知道那是合法的。此外，调用块操作也会复制块，使事情变得更加复杂，因为这也可能保留操作数。

由于此方法的上下文是不相关类的类方法，而不是操作数本身，我怀疑它也起作用。

您还传递了一个处理程序块，该处理程序块用于将被复制的 CCCallBlock 操作块，这意味着处理程序块也至少在序列期间保留。

长话短说，这段代码违反了一些内存管理准则，并且使用了几个交错块使得调试变得困难。仅此方法的参数列表就是一种代码异味：它同时做了太多不同的事情。

拆开，重新开始。考虑每一步你需要做什么。谁拥有哪个块，哪个引用。测试每个步骤的保留周期/泄漏。问问自己：真的需要使用这么多交错的块吗？你能让它更有顺序吗？谁应该运行哪些代码？也许某些部分的 CCNode 类别更有意义。

# php - 在中间添加一行文本 标签

> ID：15455436
> 
> 赞同：0
> 
> 时间：2013-03-16T22:26:33.400
> 
> 标签：php, html, text

这可能非常简单，但到目前为止我所有的尝试都失败了。

这是我编辑之前的 PHP 代码：

```
$wti_like_post .= "<div id='watch_action'>";    
$wti_like_post .= "<div id='watch_position' style='float:".$alignment."; '>";
$wti_like_post .= "<div id='action_like' >". 
```

我想添加一行简单的文本：

```
<span class="action-text">Please vote for the above article:</span> 
```

有人告诉我将 <span> 放在“将类作为观察位置的 div 元素之前”。

我在 PHP 中放置 <span> 行的所有尝试都是一团糟，导致错误。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:28:42.100

尝试这个：

```
$wti_like_post .= "<div id='watch_action'>";  
$wti_like_post .= '<span class="action-text">Please vote for the above article:</span>';  
$wti_like_post .= "<div id='watch_position' style='float:".$alignment."; '>";
$wti_like_post .= "<div id='action_like' >". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:28:53.647

您可能无法转义字符串中的双引号，或者将它们更改为单引号：

```
$wti_like_post .= "<div id='watch_action'>";
$wti_like_post .= "<span class='action-text'>Please vote for the above article:</span>";
$wti_like_post .= "<div id='watch_position' style='float:".$alignment."; '>";
$wti_like_post .= "<div id='action_like' >". 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T23:47:20.650

我更喜欢这样：

```
$wti_like_post .='<div id="watch_action">
<div id="watch_position" style="float:'.$alignment.'">
<span class="action-text">Please vote for the above article:</span>
<div id="action_like" >'; 
```

我将双引号更改为单引号，并在它们之间使用普通的 html 代码。

# python - 输入的组合或排列，对于给定的长度

> ID：15455442
> 
> 赞同：3
> 
> 时间：2013-03-16T22:27:25.497
> 
> 标签：python, python-2.7, permutation

对于给定的序列长度，我一直在尝试计算两个字符（E 和 L）的所有排列。如果我`import itertools`运行`itertools.permutation('LE', 8)`我没有得到任何输出，显然如果我只通过`itertools.permutation('LE')`我将得到两个长的排列，即 LE 和 EL。有没有办法以这样的方式运行排列，我会得到参数`'LE'`和一个数字，比如 3 这将导致：

```
LLL
EEE
LLE
EEL
LEE
ELL
ELE
LEL 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:37:22.507

你想要的是笛卡尔积`LE × LE × LE`。

`itertools.product`与参数一起使用`repeat`：

```
In [60]: list(itertools.product('LE', repeat=3))
Out[60]:
[('L', 'L', 'L'),
 ('L', 'L', 'E'),
 ('L', 'E', 'L'),
 ('L', 'E', 'E'),
 ('E', 'L', 'L'),
 ('E', 'L', 'E'),
 ('E', 'E', 'L'),
 ('E', 'E', 'E')] 
```

```
In [62]: [''.join(p) for p in itertools.product('LE', repeat=3)]
Out[62]: ['LLL', 'LLE', 'LEL', 'LEE', 'ELL', 'ELE', 'EEL', 'EEE'] 
```

# sql - 在日历和组合框 VIDEO 上获取列表框绑定

> ID：15455443
> 
> 赞同：4
> 
> 时间：2013-03-16T22:27:31.377
> 
> 标签：sql, sql-server, wpf, database, visual-studio-2010

我已经拍摄了我的问题，因为它更容易在视频中解释。我希望列表框显示从预订表开始的时间，这取决于预订表中的日期和房间表中的房间，这可能吗？

**这是视频的链接：[问题视频](http://www.youtube.com/watch?v=FX22thFJF5g)**

这是生成的 XAML：

```
 <CollectionViewSource x:Key="bookingsViewSource" d:DesignSource="{d:DesignInstance {x:Type local:Booking}, CreateList=True}"/>
    <CollectionViewSource x:Key="roomsViewSource" d:DesignSource="{d:DesignInstance {x:Type local:Room}, CreateList=True}"/>
    <CollectionViewSource x:Key="roomsBookingsViewSource" Source="{Binding Bookings, Source={StaticResource roomsViewSource}}"/>
    <CollectionViewSource x:Key="bookingsBookingsViewSource" Source="{Binding Bookings, Source={StaticResource bookingsViewSource}}"/> 
```

这是针对网格的：

```
 <Grid x:Name="Grid" SizeChanged="Grid_SizeChanged" Margin="0,0,-0.4,-0.2" DataContext="{StaticResource bookingsViewSource}"     > 
```

这是日历：

```
<Calendar x:Name="MainCalendar" Margin="10,135.2,231.8,0" Grid.Row="2" ToolTip="Select a date"
DisplayDateStart="2013-01-01" DisplayDateEnd="2020-01-01" FirstDayOfWeek="Monday" Height="177" 
VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5" SelectedDatesChanged="datechanged" 
DisplayDate="{Binding SelectedDate, RelativeSource={RelativeSource Self}}" SelectedDate="
{Binding Date, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"   > 
```

这是组合框：

```
<ComboBox x:Name="roomnameComboBox" Grid.Column="1" DisplayMemberPath="Room.Roomname" 
HorizontalAlignment="Left" Height="27" ItemsSource="{Binding}" Margin="3,5,0,0" Grid.Row="0" 
VerticalAlignment="Center" Width="120"> 
```

这是针对列表框的：

```
<ListBox x:Name="listrow" Grid.Column="1" Margin="3.2,1.2,1.8,0" Grid.Row="2" 
DisplayMemberPath="Timebegan"  SelectionChanged="listrow_SelectionChanged" ItemsSource="{Binding
Source={StaticResource bookingsBookingsViewSource}}"/> 
```

这是生成的C#

```
 private void Bookings_Loaded(object sender, RoutedEventArgs e)
    { 
        var allensCroftEntities1 = new WpfApplication7.AllensCroftEntities1();

        // Load data into Bookings. You can modify this code as needed.
        var bookingsViewSource = ((CollectionViewSource)(this.FindResource("bookingsViewSource")));
        var bookingsQuery = this.GetBookingsQuery(allensCroftEntities1);
        bookingsViewSource.Source = bookingsQuery.Execute(MergeOption.AppendOnly);

        // Load data into Rooms. You can modify this code as needed.
        var roomsViewSource = ((CollectionViewSource)(this.FindResource("roomsViewSource")));
        var roomsQuery = this.GetRoomsQuery(allensCroftEntities1);
        roomsViewSource.Source = roomsQuery.Execute(MergeOption.AppendOnly);
    }

   private ObjectQuery<Booking> GetBookingsQuery(AllensCroftEntities1 allensCroftEntities1)
    {
        var bookingsQuery = allensCroftEntities1.Bookings;

        // To explicitly load data, you may need to add Include methods like below:
        // bookingsQuery = bookingsQuery.Include("Bookings.Client").
        // For more information, please see http://go.microsoft.com/fwlink/?LinkId=157380
        // Update the query to include Room.Bookings data in Bookings. You can modify this code as needed.
        bookingsQuery = bookingsQuery.Include("Room.Bookings");

        // Returns an ObjectQuery.
        return bookingsQuery;
    }

     private ObjectQuery<Room> GetRoomsQuery(AllensCroftEntities1 allensCroftEntities1)
    {
        var roomsQuery = allensCroftEntities1.Rooms;

        // Update the query to include Bookings data in Rooms. You can modify this code as needed.
        roomsQuery = roomsQuery.Include("Bookings");

        // Returns an ObjectQuery.
        return roomsQuery;
    } 
```

编辑

这就是我使用您的代码时发生的情况，您知道为什么吗？顺便说一句，这没有 where 命令。 ![预订查询](../Images/e81cf1121ca642872071c23f3afc65a7.png)

编辑我也尝试了 where 建议，但我仍然在屏幕截图中遇到这个问题： ![哪里有问题](../Images/eb167f4eaac4df07272762c769261dc2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T06:20:10.400

让日期和房间绑定到您的 VM 上的属性，并且每当它们发生变化时，从基于两者的数据库中获取您的数据，更新绑定到第三列（应用程序中心的那一列）的可观察集合。

确保所有人都发出正确的通知，你应该做好准备。我有一个类似的基于两个组合框的过滤解决方案，以及一些取决于上述选择的文本框，它工作正常。

（就像@failedprogramming 所说，这是一个很长的视频...... :)

# html - Angular JS HTML5 验证

> ID：15455451
> 
> 赞同：4
> 
> 时间：2013-03-16T22:28:18.297
> 
> 标签：html, forms, validation, angularjs

我有一个`required tag`在我的输入中使用的表单 - 这工作正常，但在我的提交按钮上，我有在`ng-click="visible = false"`提交数据时隐藏表单。

如果所有验证都正确，我怎么能使它只设置为 false？

应用程序.js

```
 $scope.newBirthday = function(){

        $scope.bdays.push({name:$scope.bdayname, date:$scope.bdaydate});

        $scope.bdayname = '';
        $scope.bdaydate = '';

    }; 
```

HTML：

```
 <form name="birthdayAdd" ng-show="visible" ng-submit="newBirthday()">
        <label>Name:</label>
        <input type="text" ng-model="bdayname" required/>
        <label>Date:</label>
        <input type="date" ng-model="bdaydate" required/>
        <br/>
        <button class="btn" ng-click="visible = false" type="submit">Save</button>
      </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:57:08.620

如果您为表单命名，FormController 将通过其名称在最近的控制器范围内公开。所以在你的情况下说你有一个类似的结构

```
<div ng-controller="MyController">
    <!-- more stuff here perhaps -->
    <form name="birthdayAdd" ng-show="visible" ng-submit="newBirthday()">
        <label>Name:</label>
        <input type="text" ng-model="bdayname" required/>
        <label>Date:</label>
        <input type="date" ng-model="bdaydate" required/>
        <br/>
        <button class="btn" ng-click="onSave()" type="submit">Save</button>
      </form>
</div> 
```

现在在你的控制器中

```
function MyController($scope){
    // the form controller is now accessible as $scope.birthdayAdd

    $scope.onSave = function(){
        if($scope.birthdayAdd.$valid){
            $scope.visible = false;
        }
    }
} 
```

如果表单内的输入元素有效，则表单将有效。希望这可以帮助。

# java - Java 图形表现异常

> ID：15455452
> 
> 赞同：2
> 
> 时间：2013-03-16T22:28:40.310
> 
> 标签：java, swing, graphics

我正在制作一个程序，您可以在其中单击包含图像的 JLabel，并且圆圈将出现在 JLabel 上。这在我的 macintosh/java6 上完美运行，但是当我使用 windows/java7 时，会发生各种奇怪的事情。在图像的某些部分你不能画一个圆圈。它就像图片中间的一个看不见的正方形。有时圆圈会消失并在不同的时间回来。每次我画一个新圆圈时，所有的圆圈都会在标签上重新绘制。

```
public void paint(JComponent label) {
    Graphics g = label.getGraphics();
    for (T node : nodes.keySet()) {
        Point p = nodes.get(node);
        Color color;
        if (p.selected) {
            color = Color.RED;
        } else {
            color = Color.BLUE;
        }
        g.setColor(color);
        g.fillOval(p.x, p.y, circleRadius*2, circleRadius*2);
        g.setColor(Color.BLACK);
        g.setFont(new Font("Helvetica", 20, 20));
        g.drawString((String) node, p.x, p.y);
    }       
} 
```

有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:50:17.567

永远不要使用 getGraphics()，它可以返回 null 并且充其量是最后一个绘制周期的快照

一旦发生重绘，任何涂在上面的东西都会被移除

相反，正如 Legend 已经建议的那样，为自己创建一个自定义标签并覆盖 paintComponent 并在此处执行您的绘画

请记住，绘画是无状态的，这意味着在每次重绘时，您都必须重建您的状态

看看[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:53:52.323

移除你的油漆（JComponent j）；方法并尝试使用以下 JLabel。根据需要进行调整以满足您的需求。

```
final JLabel jLabel = new JLabel("!X!") {
    @Override
    public void paintComponent(final Graphics g) {
        super.paintComponent(g);
        for (T node : nodes.keySet()) {
            Point p = nodes.get(node);
            Color color;
            if (p.selected) {
                color = Color.RED;
            } else {
                color = Color.BLUE;
            }
            g.setColor(color);
            g.fillOval(p.x, p.y, circleRadius*2, circleRadius*2);
            g.setColor(Color.BLACK);
            g.setFont(new Font("Helvetica", 20, 20));
            g.drawString((String) node, p.x, p.y);
        }              
    }
}; 
```

# c# - 在简单的对象创建时崩溃

> ID：15455456
> 
> 赞同：1
> 
> 时间：2013-03-16T22:28:43.223
> 
> 标签：c#

我有这段代码：

```
 class SomeClass {
1       String PROXY="localhost:8080";
2       Proxy proxy=new Proxy();
3       proxy.setHttpProxy(PROXY);
        // ... 
```

在第 3 行，编译器告诉我对象`proxy`不存在。

当我在上面一行创建它时，它怎么可能不存在？

* * *

**编辑：**

我认为这无济于事，但这是编译器错误（它指向第 3 行中的那个括号。）：

> 类、结构或接口成员声明中的标记“)”无效

此外，ReSharper 将`proxy`（在第 3 行）突出显示为未找到的对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T22:39:18.993

语句必须进入一个方法。他们不能只是在一个类型的身体里。你说过这样的话：

```
class P
{
    Foo foo = whatever;
    foo.bar();
} 
```

您可以将字段声明放在方法之外，但不能放在语句之外。您需要执行以下操作：

```
class P
{
    static void Main()
    {
        Foo foo = whatever;
        foo.bar();
    }
} 
```

*除了字段声明之外的*所有可执行代码都必须放在 C# 中的方法中。

有道理？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:40:23.627

信息很明确。你有一个额外的'（'

当这种情况发生时，IDE 有时不会标记确切的行。

检查你的范围，也许它可能是一个小括号或额外的括号。

# transformation - 在 kinetic.js 中变换径向渐变

> ID：15455460
> 
> 赞同：1
> 
> 时间：2013-03-16T22:29:17.473
> 
> 标签：transformation, kineticjs, radial-gradients

我想使用 Kinetic.js 对径向渐变应用变换。

例如，我有一个 200x200 的矩形，从中心（白色）到侧面有一个径向渐变。如何仅缩放渐变，使其变为椭圆形而不是圆形，但保持矩形的正方形（和 200x200 大小）完好无损？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:16:45.857

**这是在 KineticJS 中创建椭圆形径向渐变填充的方法**

KineticJS 节点（如您的矩形）可以使用“fillPatternImage”填充图像。

因此，您可以用椭圆形辐射渐变的图像填充您的矩形。

您可以使用下面的“ovalGradientURL()”函数自动生成渐变图像。

当然，你可以修改这个函数来做任何你需要的渐变形状/颜色。此函数的返回值是一个 dataURL，您可以将其用作 Image() 的源。就这么简单：myImage.src=ovalGradientURL();

椭圆渐变URL（）的工作原理：

*   创建隐藏画布
*   用径向渐变填充画布
*   通过缩放径向渐变来制作渐变椭圆： scale(2,1);

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/jsKaB/](http://jsfiddle.net/m1erickson/jsKaB/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body { margin: 0px; padding: 0px; }
      canvas{ border:1px solid red; }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
    <script>

      // draw KineticJS stuff
      function draw(gradientImage) {

        var stage = new Kinetic.Stage({
          container: 'container',
          width: 300,
          height: 300
        });
        var layer = new Kinetic.Layer();

        var rect = new Kinetic.Rect({
          x: 50,
          y: 25,
          width: 200,
          height: 200,
          fillPatternImage: gradientImage,
          stroke: 'black',
          strokeWidth: 4
        });

        layer.add(rect);
        stage.add(layer);
      }

      // Create an image of an oval radial gradient
      // Use this image as fill for the kineticjs rect

      function ovalGradientURL(){
            // new up a canvas
            var canvas = document.createElement('canvas');
            canvas.width=200;
            canvas.height=200;
            var context = canvas.getContext('2d');
            var cx=canvas.width/4;
            var cy=canvas.height/2;
            // draw a rectangle filled with an oval gradient
            context.rect(0, 0, canvas.width, canvas.height);
            var grad = context.createRadialGradient(cx, cy, 15, cx, cy, 130);
            grad.addColorStop(0, 'white');
            grad.addColorStop(.8, 'blue');
            context.scale(2,1);
            context.fillStyle = grad;
            context.fill();
            return(canvas.toDataURL());
      }

      // create an Image() out of the canvas.toDataURL()
      // then start KineticJS draw()
      var img=new Image();
      img.onload=function(){
          draw(img);
      }
      img.src=ovalGradientURL();

    </script>
  </body>
</html> 
```

# python - 无法使用 opencv2 打开视频

> ID：15455461
> 
> 赞同：1
> 
> 时间：2013-03-16T22:29:22.013
> 
> 标签：python, opencv, video

我正在尝试从视频文件中获取图像，但无法成功打开它，我不知道为什么。

下面是一个代码示例，它打印`False`我期望得到一个`True`. 我不明白为什么我不能打开这个简单的视频文件，任何线索将不胜感激！

我先尝试使用相对路径，然后移至绝对路径，看看是否有任何变化，它仍然是一样的......

```
video = cv2.VideoCapture()
path = "C:\\Users\\Leo\\Dropbox\\Projet VISORD\\TP3\\video.mpg"
print video.open(path) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:45:12.550

以下代码适用于我：

```
import cv2 
```

加载视频文件：

```
capture = cv2.VideoCapture('videos/my_video.avi') 
```

Frame 是你想要的图像，flag 是成功/失败：

```
flag, frame = capture.read() 
```

循环播放视频的帧：

```
while True:
    flag, frame = capture.read()
    if flag == 0:
        break
    cv2.imshow("Video", frame)
    key_pressed = cv2.waitKey(10)    #Escape to exit
    if key_pressed == 27:
        break 
```

但是，[MPEG](http://en.wikipedia.org/wiki/MPEG-1)是一种压缩格式，这意味着您需要安装正确的编解码器，并且可能需要做更多的工作来处理转换。[您可以在OpenCV VideoCodec 文档](http://opencv.willowgarage.com/wiki/VideoCodecs)中了解支持的不同类型的视频格式。

（但是，如果您只想要一个简单的工作示例，请尝试使用 .AVI 文件，看看它是否适合您。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:13:05.667

有类似的问题。尝试改变

```
path = "C:\\Users\\Leo\\Dropbox\\Projet VISORD\\TP3\\video.mpg" 
```

到

```
path = "C:/Users/Leo/Dropbox/Projet VISORD/TP3/video.mpg" 
```

看看它是否有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T02:39:02.477

cv2 开箱即用支持的编解码器是有限的。一些格式可以在下面的链接中找到。我还没有全部尝试过。

[http://opencv.willowgarage.com/wiki/documentation/cpp/highgui/VideoWriter](http://opencv.willowgarage.com/wiki/documentation/cpp/highgui/VideoWriter)

我对 mp42 编解码器有一些运气。必须将我相机的 mp4 (h264) 格式转换为正确格式的 avi。

目前使用工具ffmpeg。

ffmpeg -i input.mp4 -codec:v msmpeg4v2 output.avi

这仍然存在一些不足之处，因为它失去了分辨率，所以我自己正在努力寻找更好的解决方案。我自己才刚刚开始。

# asp.net - 如何让 ASP.Net webapp 将数据发送到 .Net 桌面应用程序并返回

> ID：15455464
> 
> 赞同：1
> 
> 时间：2013-03-16T22:29:48.203
> 
> 标签：asp.net, .net, desktop-application

我正在构建一个 Web 应用程序，其中需要一个功能，我可以使 Web 应用程序将特定的数据流发送到桌面应用程序，该应用程序运行在网站也运行的 Web 服务器上。
例如：你按下一个按钮，一个特定的代码（可能是一个整数/字符串代码）被发送到桌面应用程序，然后它会做一些事情。

为什么需要/想要它：我们目前使用这个桌面应用程序来快速启动特定的游戏服务器，而不必为每个不同的配置摆弄每个服务器的一百万个不同的快捷方式。现在我们希望有一个 Web 应用程序作为“中间人”工作，这样某些人就可以启动游戏服务器，而无需通过 RDP 连接到服务器。

额外信息：桌面应用程序目前是用 VB.Net 编写的，但如果需要，用 C#.Net 重写它应该不是什么大问题。

你们中是否有人知道任何好的教程或技术可以做到这一点，或者有更好的解决方案来满足我的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:33:24.423

如何在您的 Web 应用程序中设置一些代码以将数据写入数据库。然后，您可以让您的桌面应用程序使用后台工作程序轮询数据库。如果它找到新记录，那么它可以继续处理。

# java - HashMaps/HashTable解释

> ID：15455468
> 
> 赞同：-1
> 
> 时间：2013-03-16T22:30:09.557
> 
> 标签：java, hashmap, key, key-value

我已经阅读了很多关于这些的内容，但在一个方面仍然很困惑。HashMaps 接受 K,V 对。为什么这是必要的？

例如，我想将“abracadabra”添加到 HashMap myMap。

它不会使用 String.hashCode() 函数作为键，然后使用“abracadabra”作为值吗？

然后，如果我试图查找“abracadabra”是否存在，它将检查该 hashCode 的“桶”是否为非空，如果是则遍历该“桶”中的所有内容（最坏的情况是 O(n).. .但不是在现实中）。所以我要说的是对象 .hashCode() 函数不是键，对象是哈希码吗？为什么需要声明一个显式的 Key？

拥有K，V对的目的是什么？我已经多次向我解释了这一点，并阅读了多篇文章/示例/等。我仍然无法通过我厚厚的头骨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:29:13.460

A`hashCode`本身不足以查找值：不同的键可以具有相同的`hashCode`. 拥有 a 的`hashCode`目的*只是*为了快速缩小哈希表将包含该键*和*该值的条目的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:33:39.970

哈希图是从键（在您的情况下`abracadabra`）到对象的映射。如果您从其他地方获取密钥，例如标识用户的 id，并且您需要为该用户加载附加数据，这将非常有用。

你所描述的听起来更像是一个[HashSet](http://docs.oracle.com/javase/6/doc/api/java/util/HashSet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T22:34:40.167

您正在寻找一个错误的对象：HashMaps 不适合存储单个对象（例如字符串“abracadabra”），它们确实适合存储键值对，其中两个部分都很重要 - 一个简单的例子是属性存储：属性名是键，属性值是值。

如果您真的只想存储一个对象，请查看其他结构。我想到了 HashSet。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T22:37:22.950

如果我说对了，您希望 HashSet 的功能由 HashMap 完成。查看 HashSet 文档，这可能就是您要搜索的内容。

HashMaps 的工作方式不同，给您一个提示：您可以使用不同的键存储相同的字符串（具有相等的 hashCode）：

```
String myString = "hallo";
HashMap<String,String> map = new HashMap<String,String>();
map.put("key1", myString);
map.put("key2", myString); 
```

# c++ - 矢量 向量 字符串 固定大小

> ID：15455472
> 
> 赞同：0
> 
> 时间：2013-03-16T22:30:52.980
> 
> 标签：c++

我怎样才能声明这样一个向量，像这样`vector<vector<string>>vec(1)(2)`的使用`vec[0][0]`和`vec[0][1]`不使用动态大小`push_back`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:42:17.017

```
using namespace std;
array< array< string, 2 >, 1 > vec; 
```

`std::vector`用于动态大小的数组。
`std::array`（C++11，或使用 Boost 库）用于固定大小的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T22:35:27.710

```
std::vector<std::vector<string>> vec(1, std::vector<string>(2)); 
```

然后您可以访问`vec[0][0]`和`vec[0][1]`。（您可以更改矢量的大小）。

# java - JTA & MySQL - 如何从数据库中检索记录

> ID：15455475
> 
> 赞同：2
> 
> 时间：2013-03-16T22:31:26.240
> 
> 标签：java, ejb, persistence, entitymanager, jta

我是 JTA 的新手，我需要一种方法来从数据库中检索一些元素。我可以通过 EntityManager 做到这一点，但这仅适用于 ResourceLocal。我想知道我该怎么做：

```
Query q = em.createNamedQuery("AnyQuery");
q.getResultList(); 
```

不使用EntityManager。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:40:34.280

这个问题本身表明您不了解您尝试使用的任何技术。在进行任何实际开发之前，您可能需要学习一些更通用的东西。

*   您可能混淆了 JTA 和 JPA，
*   您关于 RESOURCE_LOCAL 的陈述不正确（并且不相关） - 有 JTA 和 RESOURCE_LOCAL 事务，在 Java EE 中您通常使用前者，
*   您在没有 EntityManager 的情况下使用命名 JPA 查询的想法显然很荒谬，并且可能源于某种误解（在没有实体管理器的情况下使用命名查询有什么意义？），
*   说“来自数据库的一些元素”表明您无法真正区分记录和映射对象之间的区别，在这种情况下您可能根本不应该使用 JPA。

我并不是真的希望你接受这个答案。这只是我的挫败感。

**编辑**

好的，既然您提到了 JSF，我就更了解您的问题了。

我假设您想使用 JPA。在这种情况下，您可以选择：

*   创建自己的 EntityManager（在这种情况下，您不能将其注入；相反，您必须使用 EntityManagerFactory 并构建自己的）。这是一个“应用程序管理的 EntityManager”。你真的不想这样做。
*   使用注入的 EntityManaged（“容器管理的 EntityManager”）。这是标准选择。

现在你需要一笔交易。由于您应该使用 JTA EntityManager，因此您需要一个负责协调整个事情的事务对象。同样，您有两个选择：

*   在 JSF bean 中，注入一个 UserTransaction（使用 @Resource 注释）。这很混乱，容易出错并且需要大量的样板，但你会找到所有必要的方法。您可以创建自己的（应用程序管理的）EntityManager，调用其 joinTransaction 方法，然后在 UserTransaction 上调用 begin-commit。这将是一个“应用程序管理事务”
*   将您的 EntityManager 代码移动到 EJB。它只需要几行代码和一个注释（@Statless）。EJB 中的所有代码 - 神奇地 - 包装在容器为您管理的事务中。这是“容器管理事务”——默认和常见的选择。

上面的每一件事都可以（并且应该）用一些额外的信息来扩展。但对你来说，捷径是：

*   创建一个 EJB（一个带有 @Stateless 注解的简单类），
*   将使用 EntityManager 的方法移动到 EJB，
*   将 EJB 注入您的托管 bean（使用 @EJB 注释）并调用相关方法。

JTA 事务将在每次调用任何 EJB 方法时发生。这应该让你开始:-)

# python - 如何将这些标头添加到我的 python urllib opener？

> ID：15455482
> 
> 赞同：3
> 
> 时间：2013-03-16T22:32:08.050
> 
> 标签：python, http, url, urllib2

```
headers = {
    'Accept': 'application/json, text/javascript, */*; q=0.01',
    'X-Requested-With': 'XMLHttpRequest',
    'Referer': 'http://www.namestation.com/domain-search?autosearch=1',
    'Origin': 'http://www.namestation.com',
    'Host': 'www.namestation.com',
    'Content-Type': 'application/json; charset=UTF-8',
    'Connection': 'keep-alive'
}
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj)) 
```

> opener.addHeaders（标题）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T22:46:36.877

你的开瓶器应该有一个属性`addheaders`，它是一个元组列表。默认情况下，它包含用户代理。

```
opener.addheaders.append(('Host', 'www.namestation.com')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T22:47:23.397

像这样的东西可能会起作用：

```
def opener():
    cj=cookielib.CookieJar()
    #Process Hadlers
    opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
    opener.addheaders=[
                    ('Accept', 'application/json, text/javascript, */*; q=0.01'),
                    ('X-Requested-With', 'XMLHttpRequest'),
                    ('Referer', 'http://www.namestation.com/domain-search?autosearch=1'),
                    ('Host', 'www.namestation.com'),
                    ('Content-Type', 'application/json; charset=UTF-8'),
                    ('Connection', 'keep-alive'),
                ]
    return opener 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-07T13:44:04.697

您应该首先将 dict 转换为元组。

`opener.addHeaders=tuple(items for items in headers.items())`

# python - 没有重复数字的 Python 列表

> ID：15455483
> 
> 赞同：1
> 
> 时间：2013-03-16T22:32:11.770
> 
> 标签：python

我正在制作一张宾果卡，但我似乎无法使用 randint 生成不同的数字。这一次它可能在 b 中有所有不同的数字，但下一次，它有几个重复的数字。

我该如何制作它才能生成不同的数字而不会重复？

谢谢。

```
import random

class Card:
    def __init__(self):
        self.b = []
        self.i = []
        self.n = []
        self.g = []
        self.o = []

        for x in range(0, 5):
            r = random.randint(1, 15)
            self.b.append(r)

        print(self.b)
        print(self.i)
        print(self.n)
        print(self.g)
        print(self.o)

p = Card() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:37:10.053

从[这个答案](https://stackoverflow.com/a/9755548/2089625)

```
self.b = random.sample(range(1, 16), 5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T22:35:30.880

他的呢：

```
while len(self.b) < 5:
  r = random.randint(1, 15)
  if not r in self.b:
    self.b.append(r) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:38:24.423

如果您选择 1 到 15 之间的五个随机整数，您可能会得到一些重复。您可以尝试选择不替换：

```
self.b = random.sample(range(1,16),5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T00:45:31.607

您可以使用`np.random.shuffle`which 修改数组

```
>>> a = np.arange(1,16)
>>> np.random.shuffle(a)
>>> a[0:5]
array([ 9, 11,  7,  4, 10])
>>> np.random.shuffle(a)
array([ 3,  1, 13,  5,  8]) 
```

所以也许像

```
>>> class Card:
      def __init__(self,arr):
        np.random.shuffle(arr)
        self.b = arr[0:5]
        #etc

>>> nums = np.arange(1,16)
>>> p = Card(nums)
>>> p.b
array([ 8,  2,  6, 13,  9]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T22:45:53.180

除了`sample`in之外`random`，您还可以使用[`choice`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.choice.html)numpy 1.7.0 中的新功能（如果有）：

```
from numpy import random
self.b = list(random.choice(range(1,16), size=5, replace=False)) 
```

它的优点是它需要一个可选参数，该参数`p`涉及与总体中每个条目相关联的概率。在您的情况下这是统一的，这是默认情况。

# macos - 在 Mac OS X 上的 X11 和 XQuartz 之间切换

> ID：15455485
> 
> 赞同：0
> 
> 时间：2013-03-16T22:32:13.750
> 
> 标签：macos, x11, wine

设置$ DISPLAY时是否可以关闭Mac OS X的自动行为？我想手动运行 X11 或 XQuartz 来强制使用一个或另一个 Wine（或其他 X 应用程序）。（就像在 Mac OS 的早期版本中一样）因为有些应用程序在标准 X11 中运行得更好，但在当前版本的 XQuartz 中运行得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:56:40.333

只需启动您喜欢的任何 X 服务器，然后从其中的 xterm 运行 wine。

# javascript - 带有jsdom的多行属性

> ID：15455487
> 
> 赞同：0
> 
> 时间：2013-03-16T22:32:21.230
> 
> 标签：javascript, node.js, web-scraping, screen-scraping, jsdom

是否可以使用 jsdom 获取多行属性的值（我将它与 Node.js+JQuery 一起使用）？

要抓取的站点包括以下 HTML：

```
<li><a data-title="<strong>hello world
this is a test</strong>" href="example.org</strong>">A link</a></li> 
```

不幸的是，这被解析为

```
<li><a data-title="data-title"><strong>hello world
this is a test</strong>' href="example.org">A link</a></li> 
```

所以我无法提取标题和 href 属性，例如通过 JQuery: `$("a").attr("data-title")`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:04:13.443

是的，这是`jsdom`解析器中的一个错误。这是因为它没有使用完全符合 HTML5 的解析器。您可以看到此类错误仍未解决：

1.  [https://github.com/tmpvar/jsdom/issues/494](https://github.com/tmpvar/jsdom/issues/494)
2.  [https://github.com/tmpvar/jsdom/issues/482](https://github.com/tmpvar/jsdom/issues/482)

您可以尝试[用cheerio](https://npmjs.org/package/cheerio)进行刮擦。

# javascript - jQuery fontSize 在 Chrome 上增加

> ID：15455488
> 
> 赞同：3
> 
> 时间：2013-03-16T22:32:25.053
> 
> 标签：javascript, jquery, css, google-chrome

这段代码：

```
$(div).stop().animate({ 
    fontSize: "+=20%",
}, {
    duration: duration2,
    easing: "easeOutBack"
}); 
```

应该将字体大小增加 20%，并且它适用于除 Chrome 之外的所有浏览器，由于某种原因它**会减小字体大小。**

具体来说，我正在使用的页面是：[http](http://dl.dropbox.com/u/67774614/letters/letters.html) ://dl.dropbox.com/u/67774614/letters/letters.html 。键入字母以放下它们，然后字母应该增加字体大小以及在鼠标悬停时跳跃和变红。在 Chrome 上，它们应该（错误地）减小字体大小。

问题出在此脚本的第 82-90 行：http: [//tny.cz/49bc46f7](http://tny.cz/49bc46f7)

这是建议的小提琴：http: [//jsfiddle.net/cZEzy/1/](http://jsfiddle.net/cZEzy/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:57:03.460

您应该设置初始字体大小。查看您的代码， letter.css 没有指定默认字体大小。

使用来自`Alex Milewski`答案的代码并对其进行扩展。

基本 HTML：

```
<div id="org">Stuff1</div>
<div id="the">Stuff2</div> 
```

和基本脚本：

```
$('#the').animate({ 
    fontSize: "+=20%",
}, {
    duration: 2000,
    easing: "easeOutBack"
}); 
```

没有默认字体大小，复制您的问题：

* * *

[**演示**](http://jsfiddle.net/jKP3G)- 已复制问题

* * *

使用默认字体大小，类似于以下解决问题：

```
body{
    font-size: 20px;
} 
```

* * *

[**演示**](http://jsfiddle.net/jKP3G/1/)- 使用默认字体大小

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:42:10.397

不太清楚为什么在 Chrome 中会发生这种情况。

一个简单的解决方法是将字体大小定义为变量并手动递增，然后在动画期间使用该变量作为参数

```
Var fontsize = $(div).css('font-size') * 1.2;
$(div).stop().animate({ 
    fontSize: fontsize,
}, {
    duration: duration2,
    easing: "easeOutBack"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T22:49:04.117

我想这可能是你的 CSS：这个[小提琴](http://jsfiddle.net/PykWe/1/)使用你的代码并且在我的 Chrome 中运行良好......

```
$('#the').animate({ 
    fontSize: "+=20%",
}, {
    duration: 2000,
    easing: "easeOutBack"
}); 
```

# vim - 为什么我需要在这个 vim 错误格式中进行额外的转义？

> ID：15455491
> 
> 赞同：3
> 
> 时间：2013-03-16T22:32:35.740
> 
> 标签：vim

我正在为python编写一个编译器脚本。我有正确解析 Tracebacks 的错误格式：

```
CompilerSet errorformat=
          \%A\ \ File\ \"%f\"\\,\ line\ %l%.%#,
          \%Z\ \ \ \ %m 
```

我不明白为什么在逗号之前需要额外的转义：为什么`\"%f\"\\,`不能`\"%f\"\,`？我知道逗号需要转义，因为它用于分隔错误格式的部分，但为什么要使用两个反斜杠？

这是一个 Traceback 的示例，其中单转义不起作用，但双重转义：

```
Traceback (most recent call last):
File "test.py", line 9, in <module>
    g()
File "test.py", line 7, in g
    f()
File "test.py", line 4, in f
    raise IndexError()
IndexError 
```

另一个类似的例子是这个使用三个反斜杠的[python编译器脚本！](http://www.vim.org/scripts/script.php?script_id=477)

（我问是希望理解为什么会更容易编写更多`efm`设置。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:45:14.250

来自`:help efm-entries`：

> 要在模式中包含逗号，在它前面加上一个反斜杠（你必须在 ":set" 命令中输入两个）。要包含反斜杠本身，请给出两个反斜杠（你必须在 ":set" 命令中输入四个）。你还需要在 ":set" 的空格前加上一个反斜杠。

在内部`'errorformat'`，逗号是特殊的，即条目分隔符。要匹配文字逗号，您必须将其转义（一次）`\,`：. 好的，但是`:set`还有另一轮转义（例如处理值中的空格），所以`\`再次转义：`\\,`. `:let`通常，您可以通过使用（但不是在`:CompilerSet`此处的命令中）来避免第二轮转义。

# android - 图像顶部的额外填充

> ID：15455492
> 
> 赞同：0
> 
> 时间：2013-03-16T22:32:41.760
> 
> 标签：android, whitespace, android-linearlayout

我有一个用于显示 3 个 ImageView 的 LinearLayout（水平）。当我第一次添加 ImageViews 时，最后一个被缩小了，因为图像太大而无法容纳 3 个。这是我的设计器屏幕的样子：

![在最初添加三个图像之后](../Images/395fd4014b7791dc88ee1314fc9fa1d0.png)

注意第三张图片缩小了。

为了解决这个问题，我在每个 ImageView 上设置了以下属性。

```
width: 0dp
weight: 1 
```

以下是设置这些属性后我的图像的外观：

![设置属性后](../Images/e6c617e6c4f3a85ad509bebd41cd215b.png)

我遇到的问题是即使图像已经*缩小*，顶部和底部仍有*空间，如下图中的蓝色矩形所示：*

![填充](../Images/fe980156df4185de25e5ca39458f55ed.png)

我的问题是，为什么那里有这个*额外的*填充物，我怎样才能摆脱它？

谢谢

更新 - 添加我的布局文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:background="@color/app_background_color"
android:contentDescription="@string/game_image_button"
android:gravity="center"
tools:context=".EasyActivity" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/ImageView02"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:contentDescription="@string/game_image_button"
        android:src="@drawable/ruler200x200" />

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:contentDescription="@string/game_image_button"
        android:src="@drawable/ruler200x200" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:contentDescription="@string/game_image_button"
        android:src="@drawable/ruler200x200" />
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:09:23.860

ImageView 支持不同的 ScaleType，默认为`FIT_CENTER`. [这](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)是其他选项。 `FIT_CENTER`意味着它将以等于您的图像的高度和宽度开始（在您增加重量之前，您的图像在第一个屏幕截图中的样子）。我相信发生的事情是它然后根据您的 调整图像的宽度`layout_weight`，并通过缩小图像以适应新的宽度来保持图像的纵横比。它将高度保留为原始高度并将结果居中。

我认为其他比例类型之一会做你想要的。也许`CENTER`或`CENTER_INSIDE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T04:03:49.473

您可以使用以下代码

```
<Imageview.....
android:adjustViewBounds="true"
..../> 
```

# ajax - 下载从 ajax 调用的图像时浏览器如何操作？

> ID：15455496
> 
> 赞同：1
> 
> 时间：2013-03-16T22:33:22.013
> 
> 标签：ajax, jquery, browser

我是这个主题的新手，所以我对这个问题表示歉意:) 我需要创建一个页面，该页面必须显示帖子中上传的所有图像，一次一张。当用户单击下一个按钮时，它必须加载下一张图片，替换第一张。

```
< [ image1 ] > 
  Title
  Description
  other content 
```

--> 用户点击下一步

```
< [ image2 ] > 
  Title
  Description
  other content 
```

但是，为了加快图片显示加载速度，需要在隐藏面板中下载以下两张图片，因此当用户单击下一步并加载下一组图片时，这些图片将被缓存。

如果我使用 ajax 来执行此任务，浏览器会使用下载的图像还是 ajax 会再次下载它们？

有没有办法让这个过程更优化？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:42:09.347

您可以使用 ajax 将下一个图像的数据下载到字符串，并将其转换为 base64 字符串，然后通过将图像的 src 属性更改为“data:image/png”将其嵌入到 html 中（单击下一个按钮时，使用 javascript） ;base64,(base64stringhere)" 用下载的图片的base64字符串替换(base64stringhere)

参考：[http ://www.techerator.com/2011/12/how-to-embed-images-directly-into-your-html/](http://www.techerator.com/2011/12/how-to-embed-images-directly-into-your-html/)

参考：[如何在 JavaScript 中将字符串编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)

注意：大多数浏览器都会缓存图片，所以如果用户正在查看他们已经下载的图片，将会浪费相当多的带宽。

# php - 可以选择但不能插入数据库

> ID：15455498
> 
> 赞同：-1
> 
> 时间：2013-03-16T22:33:53.517
> 
> 标签：php, select, insert

我最近从我的本地主机上传了一个网站到网络空间。网络空间上的代码运行良好，但在我的本地主机上，我只能执行 SELECT 查询；尽管两组代码相同，但所有 INSERT 查询都会失败。我已经检查了 phpMyAdmin 中的权限，并且我在 localhost 上登录的“root”用户具有所有权限。我无法弄清楚为什么会这样。

例子。以下代码工作正常：

```
mysql_query("SELECT * FROM tbl_note") 
```

但这不会：

```
mysql_query("INSERT INTO tbl_note(col1, col2) VALUES('$col1', '$col2')") or die("ERROR"); 
```

后者总是抛出一个错误。正如我所说，代码在服务器上运行良好，但我希望能够在 localhost 上继续开发。我想不出我所做的任何改变导致了这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:35:21.713

试试这个，我也包含`mysql_error()`函数，所以如果你的代码不起作用，你就会知道发生了什么。

```
mysql_query("INSERT INTO tbl_note(col1, col2) VALUES('".$col1."', '".$col2.'")") or die(mysql_error()); 
```

* * *

另外，请不要使用`mysql_*`函数，因为它们容易受到sql注入并且已经过时，而是使用google，PDO并使用它来连接到mysql数据库。

# ios - Xcode UIToolbar 自动调整大小

> ID：15455502
> 
> 赞同：0
> 
> 时间：2013-03-16T22:34:16.573
> 
> 标签：ios, xcode, ios6, uitoolbar, autoresize

我有一个在 iPhone 4s 上完美运行的 iPhone 应用程序，但是在 iPhone 5 上运行时，屏幕的某些部分不会自动调整大小。没有调整大小的是 UIToolbar。我的应用程序始终以横向模式运行，因此工具栏位于屏幕底部，这些是工具栏的尺寸：

```
 X: 0 Y: 256 
    Width: 480 Height: 44 
```

我尝试将自动调整大小工具调整为几乎所有组合，但没有任何效果。我可以让工具栏分布在屏幕上，但 3 个按钮的大小保持不变。每个按钮的宽度 = 148。有没有更简单的方法让整个应用程序自动正确调整大小？出于某种原因，当您使用“x2”调整大小视图时，我的 iPhone 应用程序在 iPad 上运行良好。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:10:19.620

所以 OP 使用库存物品，然后它们不会调整大小！

我会在每个按钮之间添加灵活的间隔项目——它们会调整大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:16:04.463

为了解决我的问题，我只使用了连接到每个 barbutton 的 IBOutlets，如果屏幕尺寸适用于 iPhone 5，则宽度会针对每个屏幕进行相应调整，如果是常规屏幕（iPhone 4s 及以下）；然后保持不变。不是一种非常有效的方法，但它对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T22:59:46.363

查看图像并选择自动调整大小的红线，如果选择底线，它将始终保持在底部，如果选择顶部和底部，它将保持在同一个位置。因此，请验证您的 UIToolBar 自动调整属性。

![自动尺寸](../Images/67503ec70ba6fc5e036a1dde033f20d6.png)

**编辑**

![UIToolbar 横屏 iPhone5 屏幕。](../Images/01228cad000bea979d82f952f3889fd1.png)

**编辑2**

查看此答案[How to detect iPhone 5](https://stackoverflow.com/a/12447113/1435499) if you can't autosize，如果更改代码中的框架，则会出现一种快速解决方案。检查设备是否是 iPhone 5 或 4S 以提供特定框架，以便您可以调整宽度。

# python - Mongokit 验证列表内的字典

> ID：15455506
> 
> 赞同：0
> 
> 时间：2013-03-16T22:34:44.813
> 
> 标签：python, mongodb, pymongo, mongokit

如何验证我的 desc 字段是必需的，而我的类别字段是可选的？

```
class Mydoc(Document):

    structure = {
        "name": unicode,
        "items": [{
             "category": int,
             "desc": unicode
        }]
    }

 required_fields = ["name", "items", "items.desc"] # Error: items has no attribute 
                                                   # desc, it is a list not a dict. 
```

如何验证列表中的类别？

**更新**

[https://groups.google.com/forum/?fromgroups=#!topic/mongokit/GP5AgaMG6T4](https://groups.google.com/forum/?fromgroups=#!topic/mongokit/GP5AgaMG6T4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:45:03.940

这里的棘手点是我们不知道有多少项目。Mongokit 不允许您根据需要指定嵌套对象，因为如果您有很多项目，它可能会非常慢。

因此，简而言之，mongokit 不允许在嵌套对象中使用 required_fields 和 default_values。

但是，Mongokit 非常轻巧，如果需要可以很容易地定制：

```
class MyDoc(Document):
    structure = {
        "name": unicode,
        "items": [{
             "category": int,
             "desc": unicode
        }]
    }

    def validate(self, *args, **kwargs):
        super(MyDoc, self).validate(*args, **kwars)
        for item in self["items"]:
            assert item["desc"], "desc is required: %s" % item 
```

# mysql - SQL如何选择唯一的一对一配对

> ID：15455507
> 
> 赞同：2
> 
> 时间：2013-03-16T22:34:46.450
> 
> 标签：mysql, sql

*编辑以使其更清晰 - 许多人为原始示例的混乱道歉*

我有以下代表已婚夫妇的表结构：

```
id | Person | Spouse
______________________
1  | Mary   | John
2  | John   | Mary
3  | Katy   | Bob
4  | Bob    | Katy
5  | Mary   | John
6  | John   | Mary 
```

在此示例中，玛丽与约翰结婚，凯蒂与鲍勃结婚，另一位**玛丽**与另一位约翰结婚。

我怎样才能找回这对已婚夫妇？

我已经接近了这个：

```
SELECT 
  p.id id1,
  q.id id2
FROM 
  people p 
  INNER JOIN people q ON
    p.person = q.spouse AND 
    q.person = p.spouse AND 
    p.id < q.id
ORDER BY p.id 
```

但是，这会返回：

```
1 | 2 (1st Mary & 1st John)
1 | 6 (1st Mary & 2nd John) *problem*
2 | 5 (1st John & 2nd Mary) *problem*
3 | 4 (Katy & Bob)
5 | 6 (2nd Mary & 2nd John) 
```

我如何确保第一任玛丽和第一任约翰只结过一次婚（即删除上面的问题行）？

非常感谢

这是创建示例的 SQL：

```
CREATE TABLE people
    (`id` int, `person` varchar(7), `spouse` varchar(7))
;

INSERT INTO people
    (`id`, `person`, `spouse`)
VALUES
    (1, 'Mary', 'John'),
    (2, 'John', 'Mary'),
    (3, 'Katy', 'Bob'),
    (4, 'Bob', 'Katy'),
    (5, 'Mary', 'John'),
    (6, 'John', 'Mary')
;

SELECT 
  p.id id1,
  q.id id2
FROM 
  people p 
  INNER JOIN people q ON
    p.person = q.spouse AND 
    q.person = p.spouse AND 
    p.id < q.id
ORDER BY p.id
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:43:59.003

> 在这个例子中，玛丽嫁给了约翰，凯蒂嫁给了鲍勃，另一个玛丽嫁给了理查德。

**您的节目数据结构中没有任何**内容可以区分这两个“玛丽”，因为它们*之间*没有区别。

两者都只是文本文字`Mary`。如果您想区分可能同名的不同人，那么您需要另一个标准，并且需要一个*独特*的标准。（Fe 是每个人的数据库记录的*id 。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T00:55:09.950

我会试一试：

```
SELECT
  p.id AS id1,
  q.id AS id2
FROM
  people AS p 
  JOIN people AS q ON
    p.person = q.spouse AND 
    q.person = p.spouse AND 
    p.id < q.id
  JOIN (SELECT 
          p.id, COUNT(*) AS rank
        FROM 
          people AS p 
          INNER JOIN people AS p2 ON
            p.person = p2.person AND 
            p.spouse = p2.spouse AND 
            p.id >= p2.id
        GROUP BY p.id
       ) AS x ON
    x.id = p.id
  JOIN (SELECT 
          p.id, COUNT(*) AS rank
        FROM 
          people AS p 
          INNER JOIN people AS p2 ON
            p.person = p2.person AND 
            p.spouse = p2.spouse AND 
            p.id >= p2.id
        GROUP BY p.id
       ) AS y ON
    y.id = q.id AND
    y.rank = x.rank ; 
```

还有一个：

```
SELECT
  p.id AS id1,
  q.id AS id2
FROM
  people AS p 
  JOIN people AS q ON
    p.person = q.spouse AND 
    q.person = p.spouse
  JOIN people AS p2 ON
    p.person = p2.person AND 
    p.spouse = p2.spouse AND 
    p.id >= p2.id
  JOIN people AS q2 ON
    q.person = q2.person AND 
    q.spouse = q2.spouse AND 
    q.id >= q2.id
WHERE 
    p.id < q.id
GROUP BY 
    p.id, q.id
HAVING 
    COUNT(DISTINCT p2.id) = COUNT(DISTINCT q2.id) ; 
```

两者都在**[SQL-Fiddle测试过](http://sqlfiddle.com/#!2/842e9/2)**

如果只有 MySQL 有窗口函数（就像几乎所有其他 DBMS 一样），它会简单得多。在[Postgres fiddle](http://sqlfiddle.com/#!12/7a937/1)测试：

```
WITH cte AS
  ( SELECT
        id, person, spouse, 
        ROW_NUMBER() OVER( PARTITION BY person, spouse 
                           ORDER BY id )
           AS rn
    FROM
        people
  ) 
SELECT
    p.id AS id1,
    q.id AS id2 
FROM
  cte AS p
  JOIN cte AS q ON
    p.person = q.spouse AND 
    q.person = p.spouse AND
    p.rn = q.rn AND
    p.id < q.id ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T01:55:49.410

您的数据库限制是错误的。

玛丽、约翰等人没有身份。

一些启发式查询可能会有所帮助，但这不是一个可靠的解决方案。

所以，请改进你的数据结构。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-16T22:54:14.247

不是很优雅，但有效：

```
SELECT p.id, q.id
FROM people p
INNER JOIN people q ON
p.person1 = q.person2 and 
q.person1 = p.person1 
```

它实际上使用倒排的存在作为选择器

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-16T23:41:39.497

有很多方法可以做到这一点，但是使用数据库的最重要原因之一是它包含*大量*数据 - 并且很少会编写检索*大量*数据的查询。除非在非常不寻常的情况下，并且对于家庭作业，结果应根据某些标准进行过滤。因此，最合适的解决方案取决于您稍后添加到查询中的其他内容。

但这里有几个关于如何获得唯一对的例子：

```
SELECT a, b, GROUP_CONCAT(id)
(SELECT id
, IF (person>=spouse, person, spouse) as a
, IF (person>=spouse, spouse, person) as b
FROM yourtable ) AS pairs
GROUP BY a,b;

SELECT id, person, spouse
FROM yourtable s1
WHERE NOT EXISTS ( SELECT 1
    FROM yourtable s2
    WHERE s2.id>s1.id
    AND s1.person=s2.spouse
    AND s1.spouse=S2.person); 
```

（还有其他几种解决方案）。

# ruby - 登录时 simple_form 为空白，但注册时格式正确

> ID：15455508
> 
> 赞同：1
> 
> 时间：2013-03-16T22:34:47.543
> 
> 标签：ruby, simple-form

我正在为简单的登录和注册表单添加 simple_form 格式。

虽然注册表单格式正确 - 登录表没有输入？

登录表格

![在此处输入图像描述](../Images/004bafa22b8717b2eafdef37491b1d46.png)

我的代码可在 github（[此处](https://github.com/jrlundberg/omrails)）上找到，其中包含此错误的最新版本已推送。对新手有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:40:12.157

替换`<%`为语句`<%=`旁边的。`f.input`

```
 <h2>Sign in</h2>

    <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), html: { class: 'form-horizontal'}) do |f| %>

      <%= f.input :email %>
      <%= f.input :password %>
      <%= f.input :remember_me, as: :boolean %>

      <div class="form-actions">
        <%= f.submit "Sign in", class: "btn btn-primary" %>
      </div>
    <% end %>

    <%= render "devise/shared/links" %> 
```

# mysql - group_concat 和该记录中每个单词的频率

> ID：15455515
> 
> 赞同：0
> 
> 时间：2013-03-16T22:35:27.843
> 
> 标签：mysql, sql, word-frequency

这是我的数据库。

表：

```
item: item_id, name
order: order_id
orderform: order_id, item_id, quantity 
```

表格中的数据

```
item_id  name
1        ball
2        cap
3        bat

order_id
1
2
3
4

order_id item_id quantity
1        1       2
1        3       4
2        1       1
3        2       3
3        1       2
3        3       1
4        1       2 
```

目前我正在使用以下 sql 查询：

```
SELECT order_id, group_concat(name)
FROM order
LEFT JOIN orderform
  ON order.order_id = orderform.order__id
LEFT JOIN item
  ON orderform.item_id = item.item_id
GROUP BY order.order_id 
```

这让我看起来

```
order_id         name    
1                ball,ball,bat,bat,bat,bat
2                ball
3                cap,cap,cap,ball,ball,bat
4                ball,ball 
```

但我希望它看起来像这样

```
order_id  name
1         2 x ball,4 x bat
2         ball
3         3 x cap,2 x ball,bat
4         2 x ball 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:45:08.500

你必须走2个步骤：

第一：解析项目并创建文本

```
SELECT 
  orderform.order_id AS order_id,
  CONCAT(orderform.quantity, ' x ',item.name) AS txt
FROM order orderform
LEFT JOIN item ON orderform.item_id = item.item_id 
```

然后按顺序分组

```
SELECT
  order_id, 
  group_concat(txt) AS txt
FROM (
    SELECT 
      orderform.order_id AS order_id,
      CONCAT(orderform.quantity, ' x ',item.name) AS txt
    FROM order orderform
    LEFT JOIN item ON orderform.item_id = item.item_id
) AS baseview
GROUP BY order_id 
```

# arrays - 从命令的输出中填充多个数组 - Bash

> ID：15455519
> 
> 赞同：0
> 
> 时间：2013-03-16T22:35:46.933
> 
> 标签：arrays, bash, file, command, output

我正在寻找使用 Bash 从命令输出中填充多个数组的最佳方法。

我在这个阶段想出的解决方案是：

```
i=1
ls -al | while read line
do
            # Separate columns into arrays
            array_filetype[ $i ]=`echo $line | awk '{print $1}'`
            array_owner[ $i ]=`echo $line | awk '{print $3}'`
            array_group[ $i ]=`echo $line | awk '{print $4}'`
            echo "${array_filetype[$i]} - ${array_owner[$i]} - ${array_group[$i]}"
    (( i++ ))
done 
```

输出是：

```
drwxrwxr-x - arsene - arsene
drwx--x--- - arsene - arsene
-rw-rw-r-- - arsene - arsene
-rw-rw-r-- - arsene - arsene
-rw-rw-r-- - arsene - arsene
-rw-rw-r-- - arsene - arsene
-rw-rw-r-- - arsene - arsene
-rwx------ - arsene - arsene
-rwx------ - arsene - arsene
-rwxr-xr-x - arsene - arsene
-rwx------ - root - root 
```

提前致谢。

砷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:45:57.097

您可以立即进行的改进是不要将整行作为一个整体来阅读：

```
i=1
ls -al | while read type links owner group rest-of-line-we-dont-care-about
do
     # Separate columns into arrays
     array_filetype[$i]=$type
     array_owner[$i]=$owner
     array_group[$i]=$group
     echo "${array_filetype[$i]} - ${array_owner[$i]} - ${array_group[$i]}"
    (( i++ ))
done 
```

但是，一旦您想将数组用于不只是在循环内打印，您可能会突然停止工作。由于您将它们设置在子外壳中，因此父级不会受到影响。这是可能的修复方法之一：

```
i=1
while read type links owner group rest-of-line-we-dont-care-about
do
     # Separate columns into arrays
     array_filetype[$i]=$type
     array_owner[$i]=$owner
     array_group[$i]=$group
     echo "${array_filetype[$i]} - ${array_owner[$i]} - ${array_group[$i]}"
    (( i++ ))
done < <(ls -al) 
```

# android - 无法单击操作栏中的 ShareActionProvider？

> ID：15455536
> 
> 赞同：2
> 
> 时间：2013-03-16T22:37:36.370
> 
> 标签：android

我在 API 15 (Galaxy Nexus) avdevice 上使用以下代码

menu_share.xml

```
 <item
    android:id="@+id/menu_share"
    android:actionProviderClass="android.widget.ShareActionProvider"
    android:showAsAction="ifRoom"
    android:title="Share"/>
<item
    android:id="@+id/item1"
    android:orderInCategory="20"
    android:showAsAction="always|collapseActionView"
    android:title="Refresh">
</item> 
```

主要活动看起来像这样

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);

    // Get the ActionProvider
    provider = (ShareActionProvider) menu.findItem(R.id.menu_share)
        .getActionProvider();
    // Initialize the share intent
    intent = new Intent(Intent.ACTION_SEND);

    intent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
    intent.setType("text/plain");
    provider.setShareIntent(intent);
    return true;
} 
```

当我在 API 15 (Galaxy Nexus) avd 上运行它时，它只显示我无法单击的以下图标（尽管它至少应该显示消息应用程序）。

![API15](../Images/8e60d6486706c90353db0d5047caf49e.png)

当我在 API 17 平板电脑 avd 上运行相同的代码时，我可以启动 SharedActionProvider 提供的消息应用程序 - 它看起来像这样

![在此处输入图像描述](../Images/e9a0eeabcc67c35927d423005f00e61b.png)

在平板电脑上，如何使消息应用程序像这样显示在下拉列表中，以及如何使 API15 AVD 上的共享操作提供程序可点击（第一张图片）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:13:40.607

这是已知的 Android 错误。检查ActionBarSherlock 中的相关[错误报告和 android](https://github.com/JakeWharton/ActionBarSherlock/issues/415)[错误本身](https://code.google.com/p/android/issues/detail?id=25467)。错误已 1.5 年，仍未修复。

# ruby-on-rails - 由于 JRuby，无法在 Rails 中创建“表单”

> ID：15455541
> 
> 赞同：0
> 
> 时间：2013-03-16T22:38:01.427
> 
> 标签：ruby-on-rails, ruby, jruby, forem

我已经多次尝试解决这个问题，但它不断弹出。每当我在 Gemfile 中使用我的“forem”运行 bundle install 时，它都会给我这个错误：

```
Fetching git://github.com/radar/forem.git
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Installing rake (10.0.3)
Installing i18n (0.6.4)
Installing multi_json (1.7.0)
Installing activesupport (3.2.12)
Installing builder (3.0.4)
Installing activemodel (3.2.12)
Installing erubis (2.7.0)
Installing journey (1.0.4)
Installing rack (1.4.5)
Installing rack-cache (1.2)
Installing rack-test (0.6.2)
Installing hike (1.2.1)
Installing tilt (1.3.5)
Installing sprockets (2.2.2)
Installing actionpack (3.2.12)
Installing mime-types (1.21)
Installing polyglot (0.3.3)
Installing treetop (1.4.12)
Installing mail (2.4.4)
Installing actionmailer (3.2.12)
Installing arel (3.0.2)
Installing tzinfo (0.3.37)
Installing activerecord (3.2.12)
Installing activerecord-jdbc-adapter (1.2.8)
Installing jdbc-sqlite3 (3.7.2.1)
Installing activerecord-jdbcsqlite3-adapter (1.2.7)
Installing activeresource (3.2.12)
Installing bcrypt-ruby (3.0.1)
Installing blankslate (3.1.2)
Installing bouncy-castle-java (1.5.0147)
Using bundler (1.3.4)
Installing cancan (1.6.8)
Installing coffee-script-source (1.6.1)
Installing execjs (1.4.0)
Installing coffee-script (2.2.0)
Installing rack-ssl (1.3.3)
Installing json (1.7.7)
Installing rdoc (3.12.2)
Installing thor (0.17.0)
Installing railties (3.2.12)
Installing coffee-rails (3.2.2)
Installing decorators (1.0.3)
Installing orm_adapter (0.4.0)
Installing warden (1.2.1)
Installing devise (2.2.3)
Installing ffi (1.0.11)
Installing rubypython (0.5.3)
Installing pygments.rb (0.2.4)
Installing redcarpet (2.0.1)
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/Users/username/.rvm/rubies/jruby-1.7.2/bin/jruby extconf.rb
NotImplementedError: C extension support is not enabled. Pass -Xcext.enabled=true to JRuby or set JRUBY_OPTS or modify .jrubyrc to enable.

(root) at /Users/username/.rvm/rubies/jruby-1.7.2/lib/ruby/shared/mkmf.rb:8
require at org/jruby/RubyKernel.java:1027
(root) at /Users/username/.rvm/rubies/jruby-1.7.2/lib/ruby/shared/rubygems/custom_require.rb:1
(root) at extconf.rb:1

Gem files will remain installed in /Users/username/.rvm/gems/jruby-1.7.2/gems/redcarpet-2.0.1 for inspection.
Results logged to /Users/username/.rvm/gems/jruby-1.7.2/gems/redcarpet-2.0.1/ext/redcarpet/gem_make.out

An error occurred while installing redcarpet (2.0.1), and Bundler cannot
continue.
Make sure that `gem install redcarpet -v '2.0.1'` succeeds before bundling. 
```

我试图将“-Xcext.enabled=true”传递给 JRuby，但它仍然给我这个错误。请帮忙！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T23:20:04.677

您可能想尝试 kramdown 而不是 redcarpet。[http://kramdown.rubyforge.org/](http://kramdown.rubyforge.org/)

# properties - X11：窗口属性不适用于 gtk-windows

> ID：15455545
> 
> 赞同：1
> 
> 时间：2013-03-16T22:38:54.643
> 
> 标签：properties, gtk, x11

在一个程序中，我需要找出`WM_CLASS`当前焦点窗口的属性。只要焦点窗口不是 gtk 应用程序，它就可以正常`XGetInputFocus()`工作。`XGetClassHint()`

我编写了以下最小示例程序`wmclass.c`：

```
#include <stdio.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>

int main(int argc, char** argv) 
{
    Window win;
    Display *d;
    XClassHint *clh;

    int rev;
    int status;

    clh = XAllocClassHint();
    d = XOpenDisplay(0);

    for(;;) {
        XGetInputFocus(d, &win, &rev);
        status = XGetClassHint(d,win,clh);
        if (status) 
            printf("name: %s, class: %s\n", clh->res_name,clh->res_class);
        else 
            printf("failed\n");
        sleep(1);
    }

    XFree(clh);
} 
```

该程序打印：

> 名称：xterm，类：XTerm
> 名称：xterm，类：XTerm
> 失败
> 失败
> 失败
> 名称：xterm，类：XTerm
> 名称：xterm，类：XTerm
> 名称：okular，类：Okular
> 名称：okular，类：Okular
> 失败
> 失败
> 名称：xterm ，类：XTerm
> 名称：xterm，类：XTerm
> 名称：xterm，类：XTerm

`failed`如果 gtk 应用程序专注，就会出现。我测试了 emacs、gimp、chromium 和 ardour。

这是为什么？我如何获得`WM_CLASS`gtk-windows？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:47:38.393

焦点不一定设置为顶级窗口。特别是，Gtk 倾向于将其设置为此类窗口的子窗口。

你需要把窗户树往上走。

# bash - bash 脚本顺序执行程序

> ID：15455549
> 
> 赞同：0
> 
> 时间：2013-03-16T22:39:43.437
> 
> 标签：bash

我尝试使用的 bash 脚本有问题。我有一个包含 1000 个文件的目录，我想使用每个文件顺序运行一个命令。但是，每个文件都与另一个文件配对，例如 File1.sam、File1.gz、File2.sam、File2.gz 等。我正在执行的命令要求我使用一对文件中的两个文件作为参数。当只需要一个参数时，我一直在使用类似于下面的命令，我认为（错误地）我可以像下面那样简单地扩展它。

```
shopt -s nullglob
for myfile1 in *.sam && for myfile2 in *.gz 
do
./bwa samse -r "@RG\tID:$myfile1\tLB:$myfile1\tSM:$myfile1\tPL:ILLUMINA" lope_V1.2.fasta    $myfile1 $myfile2 > $myfile1.sam2 2>$myfile1.log
done 
```

任何人都知道我可以如何修改它或将我指向另一种方式的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:43:33.680

为什么不生成第二个文件名，例如用 .gz 替换 .sam

```
for myfile1 in *.sam  ; do
  myfile2="${myfile1%.sam}.gz"
  [ -e "$myfile2" ] || continue
  ./bwa samse -r "@RG\tID:$myfile1\tLB:$myfile1\tSM:$myfile1\tPL:ILLUMINA" lope_V1.2.fasta "$myfile1" "$myfile2" > "$saiFile".sam 2>"$saiFile".log
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:41:24.823

仅遍历具有扩展名之一的文件（例如`*.gz`）并使用例如 sed 来获取匹配的`.sam`文件。

像这样的东西：

```
for myfile1 in *.sam 
do
  sam_name=`echo $myfile | sed -e s#gz\\$#sam#`
  ./bwa samse -r "@RG\tID:$myfile1\tLB:$myfile1\tSM:$myfile1\tPL:ILLUMINA" lope_V1.2.fasta       $myfile1 $myfile2 > $saiFile.sam 2>$saiFile.log
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:44:09.637

```
shopt -s nullglob
for myfile1 in *.sam
do
  myfile2=$(echo $myfile1|sed s/.sam$/.gz/)
  ./bwa samse -r "@RG\tID:$myfile1\tLB:$myfile1\tSM:$myfile1\tPL:ILLUMINA" lope_V1.2.fasta $myfile1 $myfile2 > $saiFile.sam 2>$saiFile.log
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T22:49:14.847

使用其中一个文件扩展名更改`for`循环并计算另一个文件名。例如：

```
for p in a b c; do touch $p.1 $p.2; done
for f in *.1; do g=${f%%.}.2; echo $f $g; done 
```

这显示：

```
a.1 a.2
b.1 b.2
c.1 c.2 
```

# fullcalendar - fullCalendar 向事件添加类

> ID：15455551
> 
> 赞同：6
> 
> 时间：2013-03-16T22:39:56.607
> 
> 标签：fullcalendar

我正在尝试根据用户选择在全日历上选择事件。

示例：如果用户选择 A 类，则具有相同 ID 的所有类都应变为绿色（使用应用的类名）。

我无法将类应用于可以按 ID 成功选择的其他事件。我想我的问题是将事件对象与 jQuery 对象结合起来。

示例代码：

```
eventClick: function(event) {
  $(this).addClass("reg_selected");  //this works fine on selected event
  var selectedID = event.id
  alert(selectedID);                 //get event.ID, and use it to find similar ones.
  var similarEvents = $("#calendar").fullCalendar('clientEvents',selectedID).addClass("reg_selected"); 
```

我得到的错误是：

```
 addClass is not a function 
```

我也尝试了这种循环方法，得到了同样的错误：

```
for (var i = 0; similarEvents.length > i ; i++){
    alert(similarEvents[i].title);
    similarEvents[i].className("reg_selected");
} 
```

alert() 有效，但 className() 产生与上述相同的错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-05-04T05:58:28.337

此答案非常类似的情况，但是当在DB或检查中选择**往返事件源的事件源**时选择活动类，以便在DB或Checks中进行持久性。

可以在源中的事件对象中指定类名，如下所示（仅针对上下文给出开始和结束）：

```
[{
  ...
  "className": "selected-event",
  "start": '2017-05-01T08:30:00.0',
  "ends": '2017-05-01T09:00:00.0',
  ...
}, ...] 
```

这个想法是用户点击事件；选择事件的 ajax 调用转到后端；成功后，前端 javascript 执行`$calendar.fullCalendar('rerenderEvents');`并接收带有事件类的事件源。的直接子级`.fc-event-container`获取指定的类，在上面的示例中 - `selected-event`。

因此，选择可以保留在后端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T23:46:22.497

[clientEvents](http://arshaw.com/fullcalendar/docs/event_data/clientEvents/)返回匹配对象的数组。您需要遍历数组（在您的情况下为similarEvents）并为每个项目调用addClass

更新：使用 id 更新多个事件也存在问题，使用过滤器函数是一种更好的方法。

```
eventClick: function(event) {
    var similarEvents = $("#calendar").fullCalendar('clientEvents', function(e) { return e.test === event.test });

    for (var i = 0; similarEvents.length > i ; i++){
            similarEvents[i].className = 'reg_selected';
            $('#calendar').fullCalendar('updateEvent', similarEvents[i]);
        }
}, 
```

见[jsfiddle](http://jsfiddle.net/mEwsK/10/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-16T05:37:44.350

对于 fullcalendar 添加事件类、id 和标题，请参阅此。

```
if($('#eventTitle').val() == "Avilable") {
   eventClass = "avilable";
}else {
   eventClass = "unavilable";
}

$myCalendar.fullCalendar('renderEvent', {
  id:response,
  title: title.val(),
  start: start.val(),
  end: end.val(),
  allDay: true,
  className: eventClass,
  color: color
  }, true
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-13T16:54:02.443

我能够使用以下代码使其工作：

```
eventRender: function (eventObj, $el) {
    $el.addClass(eventObj.ClassName);
}, 
```

eventObj.ClassName =`"calendar-priority-warning"`

# jqgrid - jqGrid：添加行后如何保持启用“保存”按钮

> ID：15455552
> 
> 赞同：0
> 
> 时间：2013-03-16T22:40:01.143
> 
> 标签：jqgrid

我正在寻找一种方法来添加新行并将表单数据与启用的“保存”按钮保持在一起，以便有机会重新发送已发送的相同数据。

我试图实现的是促进提交相似但不相等的行。因此，例如，如果商家收到的订单都是相同的 X 产品，但略有不同，他可以在保存产品后保留公共字段，只更改不同的属性以提交下一个，以此类推。

然后，如果多次发送完全相同的数据，服务器将抛出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:17:33.460

根据我们的讨论，我将以下内容作为将自定义按钮添加到“添加”表单的示例：

[如何将自定义按钮添加到 JqGrid 添加/编辑表单？](https://stackoverflow.com/questions/10320523/how-to-add-custom-buttons-to-jqgrid-add-edit-forms)

至于保存信息，您可以使用文档作为示例，我认为该`beforeSubmit`事件可以用于保存字段数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:38:10.693

在 jqGrid 4.4.4 中，文件 jquery.jqGrid.min.js：

在第 279 行，在 'beforeSubmit' 发生之后，您会发现以下语句：if(k[0]&&!b[dpid].processing)，测试的第二部分表示类似于 '如果请求没有被处理'，然后在将'processing'变量设置为true后，执行对服务器的请求。

例如，阻止重新发送数据的原因是处理变量永远不会设置回 false 'afterSubmit'。

所以，我的解决方案就是这样做： b[dpid].processing=false; 在执行该操作的 if 块的末尾，这是在第 287 行，第 55 列完成的。

这样我可以重新发送略有不同的“产品”，让服务器管理错误。

我想通过将变量设置回false来不“关闭”处理状态可能是库中的一个错误。

# android - 多个状态栏通知，唯一 ID 不起作用

> ID：15455561
> 
> 赞同：0
> 
> 时间：2013-03-16T22:40:44.573
> 
> 标签：android, alarmmanager, android-pendingintent, notificationmanager

我有一个应用程序可以向状态栏发送通知以提醒吃药。如果需要同时服用两粒药。然后将发送两个单独的通知。我知道您需要在 .notify(int id, notification notification) 函数中使用唯一的 id 才能发生这种情况。但是，它似乎不起作用。我确定我的 id 是不同的，因为我通过显示敬酒来测试它们。我将不胜感激任何建议。这是我的代码：

报警类：

```
DatabaseHelper notiDb = new DatabaseHelper(this);
    notiDb.open();
    final String dataName = notiDb.getDataName(pushed_name);
    String dataDaily = notiDb.getDataDaily(pushed_name);
    String dataWeekly = notiDb.getDataWeekly(pushed_name);
    String dataTwice = notiDb.getDataTwice(pushed_name);
    String dataDosage = notiDb.getDataDosage(pushed_name);
    String dataStart = notiDb.getDataStart(pushed_name);
    String dataID = notiDb.getDataID(pushed_name);
    notiDb.close();

    ID = Integer.parseInt(dataID);
    Calendar uncalendar = Calendar.getInstance();
    String unID = dataID +uncalendar;

    Toast toast=Toast.makeText(this, "Alarm class, Notification for " +dataName +" has been set id: " +ID, Toast.LENGTH_LONG);  
    toast.show();

   Intent intent_unique = new Intent(this, NotiScenario.class);
   intent_unique.putExtra("ID", ID);
   intent_unique.setData(Uri.parse(intent_unique.toUri(Intent.URI_INTENT_SCHEME)));
   PendingIntent pIntent = PendingIntent.getActivity(this, ID, intent_unique, 2);

    // Build notification
    Notification noti = new Notification.Builder(this)
        .setContentTitle("MedScan")
        .setContentText("3\. You should take "+dataDosage +" pills of " +dataName)
        .setSmallIcon(R.drawable.original)
        .setContentIntent(pIntent)
       .build();
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    noti.defaults |= Notification.DEFAULT_ALL;
     //Hide the notification after its selected
   noti.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(ID, noti); 
```

信息类：

```
DatabaseHelper notiDb = new DatabaseHelper(this);
    notiDb.open();
    final String dataName = notiDb.getDataName(pushed_name);
    String dataDaily = notiDb.getDataDaily(pushed_name);
    final String dataWeekly = notiDb.getDataWeekly(pushed_name);
    String dataTwice = notiDb.getDataTwice(pushed_name);
    final String dataDosage = notiDb.getDataDosage(pushed_name);
    String dataStart = notiDb.getDataStart(pushed_name);
    String dataID = notiDb.getDataID(pushed_name);
    notiDb.close();

     ID = Integer.parseInt(dataID);
     int value_Weekly = Integer.parseInt(dataWeekly);
     int value_Daily = Integer.parseInt(dataDaily);
     int value_Twice = Integer.parseInt(dataTwice);
     int value_Start = Integer.parseInt(dataStart);

     Calendar calendar = Calendar.getInstance();
     calendar.set(Calendar.HOUR_OF_DAY, value_Start);
     calendar.set(Calendar.MINUTE, 46);
     calendar.set(Calendar.SECOND, 00);
     int setTime = (value_Daily*value_Twice)/value_Weekly;

     Intent intent_noti = new Intent(this,Alarm.class);
     intent_noti.putExtra("ID", ID);
     intent_noti.setData(Uri.parse(intent_noti.toUri(Intent.URI_INTENT_SCHEME)));
     PendingIntent pendingIntent = PendingIntent.getActivity(this, ID, intent_noti, PendingIntent.FLAG_ONE_SHOT);
     AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
     am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), setTime, pendingIntent); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T01:23:16.280

问题不在创建通知的警报类中，而是在创建警报以定期调用 Info 类的 Info 类中。为您的警报创建待处理意图的两行是：

```
Intent intent_noti = new Intent(this,Alarm.class);
PendingIntent pendingIntent = PendingIntent.getActivity(this, ID, intent_noti, PendingIntent.FLAG_CANCEL_CURRENT); 
```

因为无论您的 ID 是什么，Intent 都是相同的，所以新创建的 PendingIntent 只会取消先前创建的。为了使您的代码正常工作，Intent 必须根据 Intent.filterEquals() 方法有所不同：http: [//developer.android.com/reference/android/content/Intent.html#filterEquals (android.content.Intent )](http://developer.android.com/reference/android/content/Intent.html#filterEquals(android.content.Intent))

要获得独特的 Intent，您可以执行以下操作：

```
intent_noti.setAction(""+System.currentTimeMillis()); 
```

或者：

```
intent_noti.putExtra("ID", ID);
intent_noti.setData(Uri.parse(intent_noti.toUri(Intent.URI_INTENT_SCHEME))); 
```

# c++ - 为什么我们要使用两次引用运算符？

> ID：15455564
> 
> 赞同：1
> 
> 时间：2013-03-16T22:41:01.477
> 
> 标签：c++, class, pointers, reference

我的问题是指带有类的指针和关键字 this。

```
class class1 {
public:
    bool isitme(class1& temp){
        if(this == &temp)
            return true;
        else return false;
    }
};

int main () {
    class1 c3;
    class1* c2 = &c3;
    if(c3.isitme(*c2))
        cout << "c3 == c2"; //it is returning that
    system("pause");
} 
```

上面的代码是有效的，但我不明白为什么它只在相同的函数中`bool isitme(class1& temp)`起作用。`if(this == &temp)``isitme()`

我的意思是，我们已经在类参数中读取了`class1& temp`temp 的内存块，并且应该能够将该内存块与关键字 进行比较`this`。为什么只有当我双重获取参考 ( `this == &temp`) 时该函数才为真？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:44:03.170

`this`是指针，而是`temp`引用。当你`&temp`在你的`if`陈述中写下，你正在使用的地址`temp`。这会将其转换为一个指针，然后可以与`this`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:34:08.707

不要将引用声明与地址操作符的使用混淆。当 & identifier 前面有一个类型（例如 int 或 char）时，则 identifier 被声明为对该类型的引用。当 & 标识符前面没有类型时，用法是地址运算符的用法。

取自：http: [//msdn.microsoft.com/en-us/library/w7049scy (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/w7049scy(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:44:11.653

自 c/c++ 时代以来已经有一段时间了，但让我试一试......

您没有使用两次引用运算符。当您指定时，`class1&`您只是指定参数的类型（类型是“类型的引用`class1`”），实际上并没有对`temp`. 稍后，您实际上使用 取消引用参数`&temp`。实际上是引用运算符只是 & 符号的第二次出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T22:45:07.410

方法声明中的`&`操作符仅仅意味着传递的对象不应该被复制，而是指向与传递给它的对象相同的位置（它是一个引用）。`&`需要运算符 in来实际获取该`if(this == &temp)`对象（指针）的地址，以便您可以将其与`this`指针进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T22:45:56.127

方法签名中的引用“操作符”`isitme`表示引用，即对象本身的别名。

另一方面，在 行`if(this == &temp)`中，运算符直接在对象上使用，因此返回对象的地址（指向它的指针）。

因此，如果要检查输入的引用是否等于`this`，则需要与指针进行比较，这正是引用运算符返回的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T22:48:12.570

`&`在类参数列表中表示对象是按引用传递的。也就是说，`temp`是`class1`对象的别名。`&temp`只是获取该对象的地址并将其与 指向的对象进行比较`this`。这两种语法在语义上是不同的，您不会两次获取地址。

# c - 二维数组的邻接矩阵

> ID：15455566
> 
> 赞同：-1
> 
> 时间：2013-03-16T22:41:29.650
> 
> 标签：c

我有一个 2d 整数数组，代表通过该节点的成本

```
int cost[3][3] = {2,4,5},
                 {1,4,6},
                 {4,2,1}; 
```

我想制作一个如下所示的邻接矩阵：

```
0 4 0 1 0 0 0 0 0
2 0 5 0 4 0 0 0 0
0 4 0 0 0 6 0 0 0
etc... 
```

其中每条线代表每个节点以及移动到所有其他节点的成本（因为您只能向上/向下/向左/向右移动，因此 0 表示无法到达的单元格）。

什么样的算法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:09:30.130

你在关注任何教程吗？我没有足够的能力来回答你的问题。

对我来说看起来像矩阵乘法。[http://en.wikipedia.org/wiki/Matrix_multiplication](http://en.wikipedia.org/wiki/Matrix_multiplication)

无论如何，无论算法是什么，我都很确定它会涉及指针和循环。

# c# - C# 的泛型问题，如何通过 Func 传递输入和输出

> ID：15455567
> 
> 赞同：1
> 
> 时间：2013-03-16T22:41:29.580
> 
> 标签：c#, generics, func

```
private static K ExecuteStoredProcedure<K>(string connectionString, string storedProcedure, SqlParameter[] parameters, Func<I, K> readFunction) 
```

示例用法如下所示：

```
 return ExecuteStoredProcedure<SqlDataReader, Dictionary<string, string>>(
     connectionString, 
     "uspSearchStatisticsSelectByTokenPerDayGroupByDate", 
     parameters, 
     (reader) =>
     {
         reader.Read();
         int readCount = reader.FieldCount;

         Dictionary<string, string> results = new Dictionary<string, string>();
         results.Add("FailedRequests", Convert.ToString(reader[5]));
         results.Add("TotalRequests", Convert.ToString(reader[4]));
         results.Add("AverageResponseTime", Convert.ToString(reader[3]));

         return results;
     }
 ); 
```

编译器返回

> 错误 520 找不到类型或命名空间名称“I”（您是否缺少 using 指令或程序集引用？）

但我认为它应该可以参考？

更新：我试图寻找一些过于通用的东西并且并不真正需要它。

我已经去了以下...... `private static K ExecuteStoredProcedure<K>(string connectionString, string storedProcedure, SqlParameter[] parameters, Func<SqlDataReader, K> readFunction)`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T22:43:35.010

您的功能是通用的`I`和`K`。签名必须是：

```
K ExecuteStoredProcedure<I, K>(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T22:47:35.973

由于函数的输入参数是已知的，它不应该是通用的。只需制作参数`Func<SqlDataReader, K> readFunction`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:45:29.640

顶部的静态方法仅声明一个类型参数，称为`K`. 你的意思是有两个，比如`static K ExecuteStoredProcedure<I, K>( ... )`？因为当您调用该方法时，您确实提供了两个类型参数。

编译器错误很清楚：您说`Func<I, K>`，但没有`I`定义类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T22:49:32.883

你的读者只返回 Dictionary 以及你如何使用你的代码 K = Dictionary 所以你错过了 I 的值，也许你声明了错误的函数或者你需要修复返回值。

# asp.net - Web api: 请求的资源不支持 http 方法 'GET'

> ID：15455568
> 
> 赞同：12
> 
> 时间：2013-03-16T22:41:31.663
> 
> 标签：asp.net, asp.net-mvc, json, asp.net-web-api

我在 MVC4 项目上创建了一个 API 控制器

这是我为测试 API 功能而创建的方法

```
private string Login(int id)
{
    Employee emp = db.Employees.Find(id);
    return emp.Firstname;
} 
```

当我尝试使用 访问此 api 时`localhost:xxxx/api/controllerName/Login?id=2`，我得到

> {"$id":"1","Message":"请求的资源不支持 http 方法 'GET'。"}

我究竟做错了什么？

另外，这是我的 api 配置文件

```
public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        var json = config.Formatters.JsonFormatter;
        json.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects;
        config.Formatters.Remove(config.Formatters.XmlFormatter);
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-16T22:44:59.513

将方法修饰符从私有更改为公共，并将相关的接受动词添加到操作中

```
private string Login(int id) 
```

改成：

```
[HttpGet] // Or [AcceptVerbs("GET", "POST")]
public string Login(int id) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:17:08.453

您还可以在 system.webserver 标签内的 web.config 中接受 http 方法：

```
<httpProtocol>
   <customHeaders>
      <clear />
      <add name="Access-Control-Allow-Origin" value="*" />
      <add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept" />
      <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
   </customHeaders>
</httpProtocol> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-27T14:12:01.067

除了当前接受的添加`[HttpGet]`属性以使方法公开的答案之外，您还需要确保使用正确的命名空间：

*   MVC 控制器使用`System.Web.Mvc`
*   WebAPI 控制器使用`System.Web.Http`

# wordpress - 使用过滤器编辑 site_url

> ID：15455569
> 
> 赞同：2
> 
> 时间：2013-03-16T22:41:34.667
> 
> 标签：wordpress, filter

使用 WordPress，调用`site_url()`会返回完整的站点 URL ( `http://www.example.com`) 我要做的是`add-something-here`在带有过滤器的 URL 的末尾添加一些东西 ()。

我期待的结果是： `http://www.example.com/add-something-here`

有人知道如何用过滤器做到这一点吗？

我尝试了以下但没有成功：

```
function custom_site_url($url) {
    return get_site_url('/add-something-here');
}
add_filter('site_url', 'custom_site_url'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:30:56.497

问题是您正在使用此过滤器生成一个循环。该函数`get_site_url`正是`site_url`调用过滤器的位置。

你需要：

```
add_filter( 'site_url', 'custom_site_url' );

function custom_site_url( $url )
{
    if( is_admin() ) // you probably don't want this in admin side
        return $url;

    return $url .'/something';
} 
```

请记住，这可能会对依赖于真实 URL 的脚本产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:45:27.487

未经测试，但既然它是 PHP，你可以试试...

```
function custom_site_url($url) {
    return get_site_url() . '/add-something-here';
}
add_filter('site_url', 'custom_site_url'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T08:39:01.897

未经测试，但这是我经常使用的片段：

```
$constant = 'add-something-here';
return '<a href="'. esc_url(site_url().'/'.$constant.'/'">'. esc_html( $name ).'</a>'; 
```

或者您可能只是想获取页面 ID，这样会好得多。

```
 $page_id = '2014';
 return  <a href="'. get_page_link ($page_id) .'">'.esc_html__( 'pagename', 'text-domain' ).'</a> 
```

# java - WebService 客户端失败：Tomcat、CXF

> ID：15455570
> 
> 赞同：3
> 
> 时间：2013-03-16T22:41:45.417
> 
> 标签：java, web-services, cxf

我正在从 CXF 复制最简单的 Web 服务示例；它逐步编写一个接口，然后是一个实现文件，以向 Web 服务使用者提供的名称打招呼。我更改了包名和方法名，因为我想看看事情出现在哪里；如果您将所有内容命名为 HelloWorld，您将看不到方法、包、类等是什么。

这些指令包括发布 Web 服务的程序。在我这样做之后，把网址

```
http://localhost:9000/helloWorld?wsdl 
```

在浏览器中显示一个 wsdl 文件，其中包含我拼写的足够内容，以使我相信它是从我的代码生成的。基于此，我假设 WSDL 生成和发布都有效。

这是服务接口：

```
 package hw;

    import javax.jws.WebParam;
    import javax.jws.WebService;

    @WebService
    public interface HelloWorld
    {
        String sayHi(@WebParam(name="firstName") String firstName);
    } 
```

这是服务实现：

```
package hwimpl;

import javax.jws.WebService;

@WebService(endpointInterface = "hw.HelloWorld", serviceName = "HelloWorld")
public class HelloWorldImpl
{
    static public void say(String msg) { System.out.println(msg); }

    public String sayHi(String firstName) 
    { say ("sayHi called with " + firstName); 
      return "Hello " + firstName + " from the World."; 
    }
} 
```

这是发布程序：

```
package hwimpl;

import javax.xml.ws.Endpoint;

public class PublishHelloWorldService
{

    protected PublishHelloWorldService() throws Exception
    {
        // START SNIPPET: publish
        System.out.println("Starting Server");
        HelloWorldImpl implementor = new HelloWorldImpl();
        String address = "http://localhost:9000/helloWorld";
        Endpoint.publish(address, implementor);
        // END SNIPPET: publish
    }

    public static void main(String args[]) throws Exception
    {
        new PublishHelloWorldService();
        System.out.println("Server ready...");

        Thread.sleep(5 * 60 * 1000);
        System.out.println("Server exiting");
        System.exit(0);
    }
} 
```

现在我编译并运行这个程序：

```
package client;

import hw.HelloWorld;

import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.soap.SOAPBinding;

public final class HelloWorldClient
{

    private static final QName SERVICE_NAME = new QName("http://server.hw.demo/",   "HelloWorld");
    private static final QName PORT_NAME = new QName("http://server.hw.demo/",    "HelloWorldPort");

    private HelloWorldClient()
    {
    }

    public static void main(String args[]) throws Exception
    {
        Service service = Service.create(SERVICE_NAME);
        String endpointAddress = "http://localhost:9000/helloWorld";
        // If web service deployed on Tomcat deployment, endpoint should be changed
        // to:
        // String 
//      endpointAddress =
//       "http://localhost:8080/java_first_jaxws/services/hello_world";

        // Add a port to the Service
        service.addPort(PORT_NAME, SOAPBinding.SOAP11HTTP_BINDING, endpointAddress);

        HelloWorld hw = service.getPort(HelloWorld.class);
        System.out.println(hw.sayHi("Albert"));

    }

} 
```

我得到这个错误：

```
Exception in thread "main" javax.xml.ws.WebServiceException: Could not send Message.
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:135)
    at com.sun.proxy.$Proxy20.sayHi(Unknown Source)
    at client.HelloWorldClient.main(HelloWorldClient.java:37)
Caused by: java.net.MalformedURLException: Invalid address. Endpoint address cannot be null.
    at org.apache.cxf.transport.http.HTTPConduit.getURL(HTTPConduit.java:872)
    at org.apache.cxf.transport.http.HTTPConduit.getURL(HTTPConduit.java:854)
    at org.apache.cxf.transport.http.HTTPConduit.setupURL(HTTPConduit.java:800)
    at org.apache.cxf.transport.http.HTTPConduit.prepare(HTTPConduit.java:548)
    at org.apache.cxf.interceptor.MessageSenderInterceptor.handleMessage(MessageSenderInterceptor.java:46)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:516)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:313)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:265)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)
    ... 2 more 
```

我正在运行来自 Eclipse 的程序——发布和客户端。Eclipse 在 Window / Preferences 中设置了 http 和 https 的代理；在运行客户端之前，我删除了 http 的那个，但它并没有改变消息。

它实际上是一个 tomcat 服务器；我在发布程序中尝试了备用 URL，没有任何变化。

在这种情况下，我不会从 Eclipse 中运行 tomcat；我在我的机器上自己运行它，然后运行发布程序（来自 eclipse），验证显示 wsdl 的 url 是否正常工作，然后运行客户端程序（来自 eclipse）并得到我的错误。

有人可以告诉我我做错了什么吗？我已经看到有关此确切错误消息的其他帖子，但没有一个答案是确定的，我似乎已经尝试了所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T16:10:27.803

Not sure this is your problem.

I've sometimes had problems with eclipse not being able to run tomcat applications on a running tomcat as you describe in your example. What I sometimes have to do when working with tomcat and eclipse is either

1.  have a running tomcat (windows service) and then export my eclipse application to that tomcat
2.  stop the running tomcat on that port from windows services and start the tomcat from inside eclipse when running the program.

For some reason eclipse seems to have problems with an already running tomcat.

# php - 如何在 Zend Auth 中记录用户会话过期时的过期时间

> ID：15455575
> 
> 赞同：0
> 
> 时间：2013-03-16T22:42:22.693
> 
> 标签：php, zend-framework, zend-auth, zend-session

我想将用户登录和注销/会话到期信息添加到数据库中，正常登录和注销很容易，但我不知道如何进行自动会话到期。

我的身份验证如下所示。

我的登录控制器操作

```
if ($request->isPost()) {
            $data = $request->getParams();
            $userModel = new Application_Model_User_DbTable();
            if ($user = $userModel->login($data['email'], $data['password'])) {
                /* check if user is activated or not */
                if ($user['status'] == 0) {
                    $this->view->loginerror = "<b>Account not active :</b> Please wait for admin to activate your account";
                }elseif($user['status'] == -1){ 
                    $this->view->loginerror = "<b>Account Suspended :</b> Your account is suspeneded you must contact admin to continue";
                }else {
                    /* Store authentication data in session */
                    $auth = Zend_Auth::getInstance();
                    $identity = Zend_Auth::getInstance()->getStorage();
                    $identity->write($user);
                    $this->_redirect('/fax');
                }
            } else {
                $this->view->loginerror = "<b>Invalid login :</b> Email or passsword is invalid !";
            }
        } 
```

我的用户控件中的身份验证方法

```
function authenticate($email, $password) {
        $where = array();
        $where[] = $this->getAdapter()->quoteinto('email = ?', $email);
        $user = $this->fetchRow($where);
        if (isset($user['email'])) {
            $salt = $user['password_salt'];
            if (sha1($password . $salt) == $user['password']) {
                /** here i will add login session info**/
                return $user;
            }
            return false;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:27:31.277

恐怕没有核心 PHP 或 Zend 函数来执行此操作，会话超时不会在后台运行。除非超时会话发出另一个请求，否则甚至不可能知道会话是否超时。

其中一种方法是向操作发出 ajax 请求以检查超时并在该操作中更新您的数据库。

# php - 用php读取mysql并在下拉菜单中显示结果

> ID：15455577
> 
> 赞同：0
> 
> 时间：2013-03-16T22:42:32.483
> 
> 标签：php, mysql

我对 php 还很陌生，正在尝试制作一个 php 脚本，它应该连接到 mysql db 并获取 vaule id，然后在下拉菜单中显示为选项。

这是我到目前为止的代码（得到朋友的帮助）：

```
$username = "root";
$password = "";
$hostname = "localhost"; 
$database = "customers";
$id = "";

mysql_connect("$hostname", "$username", "$password") or die (mysql_error()) or die (mysql_error());

mysql_select_db("$database") or die (mysql_error());

$result = mysql_query("SELECT id FROM users WHERE id='$id'") or die(mysql_error());
      while ($row = mysql_fetch_assoc($result)) {
       $valuestring = $row['id'];
       print_r($result);
          echo "<option value='$valuestring'>". $valuestring ."</option>";
          mysql_close();
      }
print_r($id); 
```

但是当我使用此代码时，该选项返回为空：/

我也尝试过 print_r($result); 这给了我资源 id #4，所以我想这行得通。

如果有人能帮我解决这个问题，我会是一个快乐的人：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:46:22.067

我以前需要使用类似的方法从表中检索专辑列表，也许试试这个功能。创建您的表单并在 and 标记中调用该函数，从而使其起作用。这应该列出您在查询中指定的 ID。

functions.php（或任何你想放置函数的地方）：

```
function stateList() {
$username = "username"; 
$password = "password"; 
$host = "localhost"; 
$dbname = "dbname"; 
$id = RETRIEVE VALUE HERE;
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'); 
$db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options); 
$query = " 
    SELECT 
    id,
    FROM users 
    WHERE
    id = $id // YOU MAY WANT TO REMOVE WHERE - $ID AS STATED ABOVE, DOESN'T MAKE SENSE.
    "; 

    try 
    { 
        $stmt = $db->prepare($query); 
        $stmt->execute(); 
    } 
    catch(PDOException $ex) 
    { 
        die("Failed to run query: " . $ex->getMessage()); 
    } 
        $valuestring = $row['id'];
    $rows = $stmt->fetchAll(); 
foreach($rows as $row):
    print "<option value='" . $valuestring . "'>" . $valuestring . "</option>";
endforeach;
}
?> 
```

选择页面：

```
<? include 'functions.php' ?> <!-- This will allow you to call the function. -->
<form action="example.php" method="post" enctype="multipart/form-data">
    <select name="album">
        <? stateList(); ?> <!-- Calls the function and retrieves all options -->
    </select>
    <input type="submit" name="submit" value="Submit">
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:28:12.850

让我们简化一下这段代码：

```
<select name="user" id="user" width="200px" style="width: 200px">
<option value="">Select State</option>
<?php       
$query_uf =  "SELECT id FROM users WHERE id="'.$id.'";      
$result = mysql_query($query_uf,$bd);       
while ($users =mysql_fetch_assoc($result)) {
echo "<option value='".$uf['id']."'>".$uf['user']."</option>";      } 
?>
</select> 
```

Obs：最好使用 mysqli_query 并连接。而且，在您的代码中，它缺少 mysql_query 中的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T22:56:00.950

您代码中的 $id 值是空的，您知道吗？您可以在将查询发送到 mysql 之前打印查询吗？利用 ：

```
"$query = "select id from table where id = '$id'";
mysql_query($query);
echo $query; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T23:21:32.717

也许如果你向我们展示你确实得到了什么输出，它会有所帮助。

> 选项返回空

如果输出包含循环内生成的 HTML，则意味着查询至少返回 1 行。但是产生空字符串的唯一方法`echo "<option value='$valuestring'>"`是 $valuestring 是空字符串。它是从“SELECT id FROM users WHERE id='$id'”填充的，这意味着您的数据库中必须有一行 id 为空或空字符串*，并且*您的 php 代码中的 $id 为空/空字符串 - 确实是案例 ($id = "";)。

NTW mysql_close(); 应该在循环之外。

# algorithm - 在树内存在的键处拆分一个trap

> ID：15455582
> 
> 赞同：0
> 
> 时间：2013-03-16T22:43:30.157
> 
> 标签：algorithm, data-structures

我一直在尝试实施和`split/merge`理解`treap`. 每个节点都有两个键：一个堆键和一个树键。查看堆键，您应该会看到一个有效的堆，并且与树键相同。

拆分treap 比平常更容易，因为您可以插入一个具有最大或最小优先级的虚拟节点（取决于它是最大堆还是最小堆）。但是，[此链接](http://pavpanchekha.com/blog/treap.html#sec-5-3)只是假设拆分键不在树中。但是，如果我总是想要右树或左树中的现有密钥怎么办？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:21:17.483

1.  找到有问题的键的节点。
2.  将其向上移动以成为新的根（通过给予它非常高或非常低的优先级）。
3.  拆分左（或右）子树。

# java - 方法在哪里？

> ID：15455587
> 
> 赞同：0
> 
> 时间：2013-03-16T22:44:00.873
> 
> 标签：java

我的来源：

```
private static HashMap<String, Class<?>> mapLogic = new HashMap<String,Class<?>>();

mapLogic.put("s", Packet1.class);
mapLogic.put("a", Packet2.class);

public abstract class Packet { 
    public abstract void get(ChannelBuffer buffer);
    public abstract void send(ChannelBuffer buffer);
} 
```

和

```
public class Packet1 extends Packet{

    @Override
    public void get(ChannelBuffer buffer) {
    }

    @Override
    public void send(ChannelBuffer buffer) {
    }

}

public class Packet2 extends Packet{

    @Override
    public void get(ChannelBuffer buffer) {
    }

    @Override
    public void send(ChannelBuffer buffer) {
    }

} 
```

`mapLogic.get("s").newInstance().get()` <--- 获取或发送不可用

我怎样才能得到这些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:51:46.120

改变这个：

```
private static HashMap<String, Class<?>> mapLogic = new HashMap<String,Class<?>>(); 
```

对此：

```
private static HashMap<String, Class<? extends Packet>> mapLogic =
    new HashMap<String, Class<? extends Packet>>(); 
```

这样表达式`mapLogic.get("s")`就有了 type `Class<? extends Packet>`，而表达式`mapLogic.get("s").newInstance()`就有了 type `Packet`。

你现在拥有它的方式，表达式`mapLogic.get("s")`有 type `Class<?>`，而表达式`mapLogic.get("s").newInstance()`有 type `Object`。编译器无法判断实际实例将具有运行时类型`Packet1`or `Packet2`，因此它不知道`get`and`send`方法应该是什么。

# php - 如何在 PHP 中添加 href 链接？

> ID：15455593
> 
> 赞同：2
> 
> 时间：2013-03-16T22:44:32.593
> 
> 标签：php, html, href

我对 PHP 非常陌生，并试图即时更新网站。

我需要更新代码，以便链接指向 www.otherwebsite.com。目前该链接指向当前网站的 RSS 提要。

这是原始的div：

```
<div style="float:right;">
<a href="<?php echo url::site(); ?>feed/"><img src="<?php echo url::file_loc('img'); ?>media/img/icon-feed.png" style="vertical-align: middle;" border="0"></a> 
```

我需要将其更改为指向 www.someotherwebsite.com。它看起来很简单。这是我尝试过的：

```
<div style="float:right;">
    <a href="<?php echo www.someotherwebsite.com"><img src="<?php echo url::file_loc('img'); ?>media/img/twitter.png" style="vertical-align: middle;" border="0"></a> 
```

这从来没有奏效，相反，我收到了一条关于我进行此编辑的行的错误消息。

我将如何更新这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T22:54:40.607

看起来您错过了一些结束标签，并且您应该在外部 URL 的前面加上“http://”。此外，您应该将样式移至外部样式表，而不是使用内联样式。

```
.box{
  float:right;
}
.box a img{
  vertical-align: middle;
  border: 0px;
}

<div class="box">
    <a href="<?php echo "http://www.someotherwebsite.com"; ?>">
        <img src="<?php echo url::file_loc('img'); ?>media/img/twitter.png" alt="Image Decription">
    </a>
</div> 
```

如其他评论中所述，使用直接 HTML 可能更容易，具体取决于您的确切设置。

```
<div class="box">
    <a href="http://www.someotherwebsite.com">
        <img src="file_location/media/img/twitter.png" alt="Image Decription">
    </a>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T22:47:04.727

无需为此调用 PHP。直接放入 HTML 中即可：

```
<a href="http://www.example.com/">... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T22:49:14.943

您对 " 有问题：

```
 <a href=<?php echo "'www.someotherwebsite.com'><img src='". url::file_loc('img'). "media/img/twitter.png' style='vertical-align: middle' border='0'></a>"; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T22:51:22.567

只需在 HTML 中执行

```
<a href="https://www.google.com">Google</a> 
```

# maven - Maven 资源过滤中断下载

> ID：15455594
> 
> 赞同：2
> 
> 时间：2013-03-16T22:44:35.383
> 
> 标签：maven, properties, resources, profiles

我有一个 Maven/Java 应用程序。部分应用程序允许您下载一些文件。这是项目设置。

```
+src
    +main
        +resources
            +downloads
                MyDocument.docx
            jdbc.properties
pom.xml 
```

`jdbc.properties`当其中包含硬编码值时，下载工作正常。但是，我正在尝试更新应用程序以使用 Maven 配置文件并为不同的环境指定不同的数据库连接。我设法让它与以下内容一起工作`pom.xml`。

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
</build> 
```

但是，即使该`jdbc.properties`文件使用正确的环境数据库信息正确填充，下载功能也会停止工作。该文件将被下载，但当您尝试打开它时，它会显示`The file MyDocument.docx cannot be opened because there are problems with the contents.`.

我尝试更改`<directory>`to`src/main/resources/*.properties`并添加一个附加`<resource>`项，我`<filtering>`将`src/main/resources/downloads`. 但两种方法都没有奏效。如何防止 Maven 过滤损坏文件？

仅供参考 - 我查看了 WAR 内部文件，也无法从那里打开文件（它们已经损坏）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:24:59.797

**更新：来自**[https://stackoverflow.com/a/10025058/516167](https://stackoverflow.com/a/10025058/516167)的更好解决方案

```
<plugin>
  <artifactId>maven-resources-plugin</artifactId>
  <version>2.5</version>
  <configuration>
    <encoding>UTF-8</encoding>
    <nonFilteredFileExtensions>
      <nonFilteredFileExtension>xls</nonFilteredFileExtension>
    </nonFilteredFileExtensions>
  </configuration>
</plugin> 
```

* * *

您应该从过滤中排除*MyDocument.docx* (*.docs) 等文件。

```
<build>
   <resources>
      <resource>
        <directory>src/main/resouces</directory>
        <filtering>true</filtering>
        <excludes>
          <exclude>**/*.docx</exclude>
        </excludes>
      </resource>
    </resources>
</build> 
```

或为下载定义备用目录，例如：

```
<build>
   <resources>
      <resource>
        <directory>src/main/downloads</directory>
      </resource>
    </resources>
</build> 
```

# symfony - 按客户端划分 Symfony2 目录结构

> ID：15455595
> 
> 赞同：2
> 
> 时间：2013-03-16T22:44:50.073
> 
> 标签：symfony

在多客户端场景中，客户端入口点是子域，我想知道我是否可以将我的客户端分成基本上包含应用程序（如缓存、配置、日志、内核）的目录，然后符号链接回“核心" 其余部分的 Symfony 目录（供应商、src 和 web）。这让我在我的捆绑包方面保持应用程序的统一，但为每个客户端提供了单独的配置。然后我将我的子域指向它们各自的目录。

从表面上看，它似乎很有希望，而且比我一直在考虑的其他一些方法更简单。以后如果我想将客户端升级到版本 2 或添加组件，我可以切换捆绑包，甚至将符号链接指向一个全新的源。它也可能很好地扩展。我还想知道使用这种方法是否允许我在客户端之间维护单独的安全上下文，而不是检查子域并重定向以在用户手动切换子域时进行身份验证。

缺点是多个配置文件的重复，并且更多地涉及初始客户端设置（但老实说，在我看来没什么坏处）。

Symfony2 是否足够灵活来处理这样的重新安排？
在多客户端应用程序中分离缓存是否有速度或安全性等好处？
在每个配置中使用单独的防火墙会导致每个子域的安全上下文不同吗？

**背景/附加信息：**
我正在将应用程序重新开发为多客户端/租户。我在重新设计中使用 Symfony2，因为原来的版本位于 Doctrine 之上，我现在需要更强大的框架功能。我想维护一个应用程序（所有客户端都相同）并为每个客户端拥有单独的数据库。实际上，我的期望是最多 100-200 个客户（如果我超过了，我会庆祝然后担心它）。数据库之间的架构是相同的，为了便于备份/恢复和稍后的单独升级路径，我将其分开。

我花时间阅读了许多关于多租户的问题和答案。还有关于使用路由和内核侦听器来使用子域来收集客户端 ID，然后动态选择数据库连接等。我最终[从 Orm-designer.com 找到了一篇博客文章，概述了他们将网站移至一个新的 VPS](http://www.orm-designer.com/article/configuring-symfony-virtualhost-for-servergrove-vps)。他们在帖子中详细介绍了他们的目录结构，这让我开始思考如何调整这个概念以适应我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:40:22.037

如果我理解正确，您有：

*   基于 Symfony 2 的应用程序，
*   数据库结构，
*   几台机器，

你需要：

*   在约 200 个节点上部署您的应用程序（它们可能位于不同的
    机器上），
*   保持配置易于维护，
*   对每个应用程序使用相同的源代码，

你需要：

*   在您的应用程序中实施维护模式，
*   决定哪些文件是用户特定的，
*   从某个共享位置到客户端文件夹的非用户特定符号链接的所有文件，
*   实现 rsync 脚本来更新所有用户通用的文件，

每次您想更新应用程序的版本时：

*   让客户知道您的应用程序将在一段时间内不可用，
*   将所有应用程序置于维护模式，
*   rsync 所有机器之间的公共代码并为每个客户端清除缓存/部署资产，
*   如果需要准备备份并运行数据库更新脚本，
*   在所有客户端机器上运行功能测试并关闭维护模式，

客户文件夹：

```
Machine 1
  SourceFolder
    app
    bin
    src
      Company
        YourBundle
           *Controller
           Resources
             config
             *css
             ...
           ...
    *vendor
    web 
```

带有 * 的目录是指向同一台机器上的多个客户端共享的文件夹的符号链接，其余目录是用户特定的。

# ruby-on-rails - Rails - 尝试使用多态关联创建嵌套路由时没有方法错误

> ID：15455602
> 
> 赞同：1
> 
> 时间：2013-03-16T22:45:22.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, polymorphic-associations

我有三个模型：专业、职业、学校。您可以为每个人添加评论。关联如下所示：

Major.rb、School.rb、Career.rb

> has_many :reviews, as :reviewable

评论.rb

```
belongs_to :user
belongs_to :reviewable, polymorphic: true 
```

用户.rb

> has_many :评论

我的路线如下所示：

```
resources :majors, :schools, :careers do 
  resources :reviews
end 
```

当您转到这样的网址时，我希望能够显示与特定专业相关的所有评论：majorfinder.com/majors/major-name/reviews 但它显示以下错误：

```
NoMethodError in Reviews#index

Showing /Users/lauraleeflores/Sites/rails/mattan/app/views/reviews/_review.html.erb where line #4 raised:

undefined method `review_path' for #<#<Class:0x007fd788ee3b28>:0x007fd78a9d6930>
Extracted source (around line #4):

1: <% @reviews.each do |review| %>
2:   <tr>
3:     <td><%= review.review %></td>
4:     <td><%= link_to 'Show', polymorphic_path([review.reviewable, review]) %></td>
5: 
6:     <% if current_user == review.user %>
7:      <td><%= link_to 'Edit', edit_major_review_path(review) %></td> 
```

我现在已经解决了这个问题，对于任何有同样问题的人来说，这是如何解决的：

问题出在我的控制器和链接中。

这是我更新的审查控制器：

```
def index
  @reviews = @reviewable.reviews
end

def show
  @review = @reviewable.reviews.find(params[:id])
end

def new
  @review = @reviewable.reviews.build
  @review.user = current_user
end

def edit 
  @review = @reviewable.reviews.find(params[:id])
  raise(ActiveRecord::RecordNotFound, "Access Denied") if @review.user != current_user
end

def create
  @review = @reviewable.reviews.build(params[:review])
  @review.user = current_user
end 

def update
  @review = @reviewable.reviews.find(params[:id])
  raise(ActiveRecord::RecordNotFound, "Access Denied") if @review.user != current_user
end

def destroy
  @review = @reviewable.reviews.find(params[:id])
  @review.destroy
  raise(ActiveRecord::RecordNotFound, "Access Denied") if @review.user != current_user
end 
```

然后这是我的评论索引页面的一部分：

```
<% @reviews.each do |review| %>
  <tr>
    <td><%= review.review %></td>
    <td><%= link_to 'Show', major_review_path(@reviewable, review) %></td>

    <% if current_user == review.user %>
        <td><%= link_to 'Edit', edit_major_review_path(@reviewable, review) %></td>
        <td><%= link_to 'Delete', major_review_path(@reviewable, review), method: :delete, data: { confirm: 'Are you sure?' } %></td>
    <% end %>    
  </tr>
<% end %>
<%= link_to 'New Review', new_major_review_path %> 
```

这是我的展示页面的一部分：

```
<p>
  <b>Review:</b>
  <%= @review.review %>
</p>

<p>
  <b>Review Profile Name:</b>
  <%= @review.user.profile_name %>
</p>

<p>
  <b>Review User ID:</b>
  <%= @review.user %>
</p>

<p>
  <b>Current User</b>
  <%= current_user %>
</p>

<p>
  <b>Major that this review is for:</b>
  <%= @review.reviewable %>
</p>

<% if current_user == @review.user %>
  <%= link_to 'Edit', edit_major_review_path(@reviewable) %> |
<% end %>
<%= link_to 'Back', major_reviews_path %> 
```

这是我使用 simple_form 的新评论表单：

```
<%= simple_form_for([@reviewable, @review]) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :review %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

希望对和我有同样情况的人有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:03:49.947

这意味着来自 @reviews 集合的一个或多个实例没有`reviewable`对象。

这就是为什么`polymorphic_path([review.reviewable, review])`尝试调用`review_path`（因为`review.reviewable`返回`nil`）

更新：

审核控制器：

```
before_filter :reviewable

def reviewable
  @reviewable = if params[:major_id]
    Major.find(params[:major_id])
  elsif params[:school_id]
    School.find(params[:school_id])
  elsif params[:career_id]
    Career.find(params[:career_id])
  end
end

def index
  @reviews = @reviewable.reviews
end

def show
  @review = @reviewable.reviews.find(params[:id])
end

def new
  @review = @reviewable.reviews.build
  @review.user = current_user
  # @review = current_user.reviews.new
  # @review.reviewable = @reviewable
end

def create
  @review = @reviewable.reviews.build(params[:review])
  @review.user = current_user
  # @review = current_user.reviews.new(params[:review])
  # @review.reviewable = @reviewable
  ... save etc
end 

def edit 
  @review = @reviewable.reviews.find(params[:id])
  raise(ActiveRecord::RecordNotFound, "Access Denied") if @review.user != current_user
end

def update
  @review = @reviewable.reviews.find(params[:id])
  raise(ActiveRecord::RecordNotFound, "Access Denied") if @review.user != current_user
end 
```

app/views/reviews/_form.html.erb：

```
<%= simple_form_for([@reviewable, @review]) do |f| %> # or <%= simple_form_for([@review.reviewable, @review]) do |f| %>
... 
```

现在尝试获取页面：

```
majorfinder.com/majors/major-name/reviews

majorfinder.com/majors/major-name/reviews/new

majorfinder.com/majors/major-name/reviews/review_id/edit 
```

是你要找的吗？:)

# php - 打开新页面并在同一个 href 链接中执行 javascript

> ID：15455603
> 
> 赞同：2
> 
> 时间：2013-03-16T22:45:26.380
> 
> 标签：php, javascript, jquery

我正在尝试创建一个链接，该链接将执行一个功能并`#item-info`同时打开页面，但我遇到了麻烦。（我使用的是 JQuery，这就是为什么我有 #）

导致问题的部分似乎是javascript函数`updateItem(item, type, stock)`

```
<?php       
for ($row = 0; $row < $arrlength; $row++)
{
    echo "<li>";
    echo "<a href='javascript:updateItem($items[$row]["Item"], $items[$row]["Type"], $items[$row]["Stock"]); #item-info'";   
    echo $items[$row]["Item"];
    echo "</a>"; 
    echo "</li>";
}
?> 
```

我认为引用使用会出现问题，但我不太确定我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T22:49:27.233

尝试使用 onclick 事件。

```
<?php       
for ($row = 0; $row < $arrlength; $row++)
{
    echo "<li>";
    echo "<a href='#item-info' onclick='updateItem(\"".$items[$row]["Item"]."\", \"".$items[$row]["Type"]."\", \"".$items[$row]["Stock"]."\");'>";   
    echo $items[$row]["Item"];
    echo "</a>"; 
    echo "</li>";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:50:42.630

您的初始`<a href=`值没有关闭，并且 PHP 代码在命令中没有被很好地引用`echo`：

```
<?php       
          for ($row = 0; $row < $arrlength; $row++)
          {
              echo "<li>";
              echo "<a href='javascript:updateItem(" . $items[$row]["Item"] . ", " . $items[$row]["Type"] . ", " . $items[$row]["Stock"] . "); #item-info'>";   
              echo $items[$row]["Item"];
              echo "</a>"; 
              echo "</li>";
          }
?> 
```

但我更喜欢这样做，[`sprintf`](http://php.net/manual/en/function.sprintf.php)以避免发疯地跟踪报价：

```
<?php       
          for ($row = 0; $row < $arrlength; $row++)
          {
              echo "<li>";
              echo sprintf("<a href='javascript:updateItem(%s,%s,%s; #item-info'>", $items[$row]["Item"], $items[$row]["Type"], $items[$row]["Stock"]);   
              echo $items[$row]["Item"];
              echo "</a>"; 
              echo "</li>";
          }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T22:47:01.177

您不能以与字符串变量相同的方式在字符串中使用关联数组。改为使用串联：

```
<?php       
          for ($row = 0; $row < $arrlength; $row++)
          {
              echo "<li>";
              echo "<a href='javascript:updateItem(" . $items[$row]["Item"] . "," . $items[$row]["Type"] . "," . $items[$row]["Stock"] . "); #item-info'";   
              echo $items[$row]["Item"];
              echo "</a>"; 
              echo "</li>";
          }
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-16T22:50:08.030

调用 updateItem() 时，使用 window.location.href。至于报价问题，请在参数周围使用单引号或双引号来 updateItem()

使用 Update 之类的东西并将 update 定义为：

```
function updateItem(url) {
// do work updating here, etc.
// ---
// next, redirect
window.location.href=url;
} 
```

# foursquare - 场地签到会在多长时间后过期？

> ID：15455613
> 
> 赞同：0
> 
> 时间：2013-03-16T22:46:13.193
> 
> 标签：foursquare

我的脚本目前正在监控`hereNow`几个场所的价值。但是，在处理这些数据时，我不想将相同的签到数计算两次。当用户签入某个场所时，此签入会在多长时间后过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:31:18.753

hereNow 计数反映了当前在场地签到的用户数量。不建议轮询场所的 hereNow 计数来确定在场所签到的唯一用户数，并且不会可靠地工作。如果您是场地管理员，您可以使用场地管理器 API 或场地推送 API 来获取关于有多少用户在场地签到的可靠数据。

# django - Apache vhosting ubuntu 一个服务于所有 url 的命名条目

> ID：15455617
> 
> 赞同：0
> 
> 时间：2013-03-16T22:46:30.790
> 
> 标签：django, apache2

我有 2 个 URL 和两个 django webapps 服务。使用以下示例配置，对 www.server2.com 的获取请求会生成 www.server1.com 的页面。

传入 URL 示例：（在 apache 日志中验证）

www.server1.com

www.server2.com

虚拟主机配置：

***服务器1

```
<VirtualHost *:80>
        ServerName www.server1.com
        ErrorLog /.../apache/error.log

        AliasMatch ^/([^/]*\.css) /opt/ef/static/css/$1

<Directory "/.../apache">
Allow from all
</Directory>

Alias /media/ /...f/media/
Alias /static/ /...f/static/

<Directory /.../static>
Order deny,allow
Allow from all
</Directory>

<Directory /../media>
Order deny,allow
Allow from all
</Directory>

</VirtualHost>

WSGIScriptAlias / /...apache/server.wsgi 
```

*** *服务器2

```
<VirtualHost *:80>
        ServerName www.server2.com
        ErrorLog /.../apache/error.log

        AliasMatch ^/([^/]*\.css) /opt/ef/static/css/$1

<Directory "/.../apache">
Allow from all
</Directory>

Alias /media/ /...f/media/
Alias /static/ /...f/static/

<Directory /.../static>
Order deny,allow
Allow from all
</Directory>

<Directory /../media>
Order deny,allow
Allow from all
</Directory>

</VirtualHost>

WSGIScriptAlias / /...apache/server.wsgi 
```

我匹配不正确吗？

# xml - 基于 XPath 1.0 的属性选择唯一的元素值

> ID：15455618
> 
> 赞同：1
> 
> 时间：2013-03-16T22:46:35.800
> 
> 标签：xml, xslt, xpath, unique

我有一个存储电影及其演员的 XML 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="index.xsl"?>
<movies
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="movies.xsd">

<movie movieID="1">
    <actors>
        <actor actorID="1"> 
            <name link="hello">Bob</name>
        </actor>

        <actor actorID="2"> 
            <name link="hello">Mike</name> 
        </actor>
    </actors>   
</movie>

<movie movieID="2">
    <actors>
        <actor actorID="1"> 
            <name link="hello">Bob</name>
        </actor>

        <actor actorID="2"> 
            <name>Daniel</name>
        </actor>
    </actors>   
</movie>

</movies> 
```

从上面的代码可以看出，我有 2 个“电影”元素，每个元素包含 2 个“演员”子元素。4 个“name”子元素中有 3 个包含属性“link”：Bob、Mike、Bob

我使用以下 XSLT 代码仅显示包含属性“链接”的参与者的名称：

```
<xsl:template match="/">
    <xsl:text>Actors: </xsl:text>
    <xsl:apply-templates select="/movies/movie/actors/actor/name[@link]"/>
</xsl:template>

<xsl:template match="name[@link]">
    <xsl:value-of select="." />
    <xsl:element name="br" />
</xsl:template> 
```

我得到的输出：

```
Bob
Mike
Bob 
```

如您所见，“鲍勃”这个名字重复了两次。我只想显示具有“链接”属性的唯一演员姓名

我尝试了以下 XPath 1.0 查询：

```
<xsl:template match="[not(@name[@link] = preceding::@name)]">

<xsl:template match="not(@name[@link] = preceding::@name)">

<xsl:template match="not(@name[@link] = preceding-sibling::@name)"> 
```

所有这些都使页面显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:05:57.970

在 XSLT 1.0 中进行这样的分组的有效方法是使用 Muenchian 分组（为了清楚起见，我添加了 a`div`和 a `br`；请随意删除它们）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kName" match="actor/name[@link]" use="." />

  <xsl:template match="/">
    <div>
      <xsl:text>Actors: </xsl:text>
      <br />
      <xsl:variable name="actorNames" 
                    select="/movies/movie/actors/actor/name[@link]"/>
      <xsl:apply-templates 
                    select="$actorNames[generate-id() = 
                                        generate-id(key('kName', .)[1])]" />
    </div>
  </xsl:template>

  <xsl:template match="name">
    <xsl:value-of select="." />
    <br />
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<div>
  Actors: <br />Bob<br />Mike<br />
</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-08-03T17:45:35.827

在**XSLT1.0**中为小型 XML 源执行此操作的另一种方法：

```
<xsl:template match="/">
    <xsl:text>Actors: </xsl:text>   
    <xsl:for-each select="/movies/movie/actors/actor/name[@link and not(. = preceding::*)]">
        <xsl:value-of select="."/>
        <br/>
    </xsl:for-each>
</xsl:template> 
```

输出：

```
Actors: Bob<br/>Mike<br/> 
```

# python - Python - 整数用户输入的排序列表

> ID：15455620
> 
> 赞同：2
> 
> 时间：2013-03-16T22:46:41.347
> 
> 标签：python, input

我的输入法有问题，我正在尝试获取以空格分隔的整数列表。我的代码如下：

```
def numberStore():
    numberList = input("Enter list of numbers seperated by spaces ").split(" ")
    print("The lowest number is" , listLowestNumber(numberList)) 
```

然后我有一个函数来返回已输入的列表的最小编号。

```
def listLowestNumber(list):
    list.sort()
    return list[0] 
```

但是，当我执行函数 numberStore 时，它​​似乎只按第一个数字对数字进行排序，例如输入值 40 9 50 将返回值 40 作为最小数字。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:48:13.527

要对表示为字符串的整数列表进行排序，可以使用：

```
l.sort(key=int) 
```

如果没有`key=int`，列表[将按字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)排列。

但是，如果您需要做的只是找到最小的数字，那么更好的方法是

```
return min(l, key=int) 
```

PS我已将您的列表重命名为`l`since `list()`is a [built-in name](http://docs.python.org/2/library/functions.html)，并且隐藏内置名称的风格很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:48:59.387

在对它们进行排序之前，您需要将列表中的值转换为 int：

```
numberList = input("Enter list of numbers seperated by spaces ").split()
numberList = [int(v) for v in numberList] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T22:48:51.763

看起来它是通过将元素视为字符串来进行排序的。您描述的是字典顺序，而不是数字顺序。基本上，您必须将字符串元素转换为数字元素。

# javascript - 可调分页边界

> ID：15455622
> 
> 赞同：2
> 
> 时间：2013-03-16T22:46:49.687
> 
> 标签：javascript, html, css

我的 HTML 页面中有两列。

```
<div id="content">
  <div id="left"></div>
  <div id="right"></div>
</div> 
```

他们每个人都占据页面的一半

```
#content {
    height: 100%;
}

#left, #right {
    float: left;
    width: 50%;
    height: 100%; 
    overflow: auto;
} 
```

我希望用户可以调整左右两半之间的边界。也就是说，用户可以在浏览页面时将边界向左或向右移动。有可能以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:13:00.683

是的，但它需要 JavaScript。要应用它，您当然可以只设置`width`每一边的：

```
var leftPercent = 50;
function updateDivision() {
    document.getElementById('left').style.width = leftPercent + '%';
    document.getElementById('right').style.width = (100 - leftPercent) + '%';
} 
```

现在您可以使用 调整除法`leftPercent = 50; updateDivision()`，但用户不会这样做。您可以通过多种不同的方式将其呈现给用户。可能最合适的方式是在他们可以拖动的中间一条小线。为此，您可以使用一点 CSS 进行定位：

```
#content {
    position: relative;
}
#divider {
    position: absolute;
    /* left to be set by JavaScript */
    width: 1px;
    top: 0;
    bottom: 0;
    background: black;
    cursor: col-resize;
    /* feel free to customize this, of course */
} 
```

然后确保你有一个`div`with an in和 update来更新`id`of ：`divider``content``updateDivision``left``divider`

```
document.getElementById('left').style.left = leftPercent + '%'; 
```

然后你只需要一点逻辑来处理拖动。（在这里，我已将所有元素放入适当命名的变量中）：

```
divider.addEventListener('mousedown', function(e) {
    e.preventDefault();
    var lastX = e.pageX;
    document.documentElement.addEventListener('mousemove', moveHandler, true);
    document.documentElement.addEventListener('mouseup', upHandler, true);
    function moveHandler(e) {
        e.preventDefault();
        e.stopPropagation();
        var deltaX = e.pageX - lastX;
        lastX = e.pageX;
        leftPercent += deltaX / parseFloat(document.defaultView.getComputedStyle(content).width) * 100;
        updateDivision();
    }
    function upHandler(e) {
        e.preventDefault();
        e.stopPropagation();
        document.documentElement.removeEventListener('mousemove', moveHandler, true);
        document.documentElement.removeEventListener('mouseup', upHandler, true);
    }
}, false); 
```

您应该能够阅读它以了解它是如何工作的，但简而言之：它会在有人按下分隔线时进行监听。当他们这样做时，它将在他们移动鼠标时将侦听器附加到页面。当他们这样做时，它会更新变量并调用`updateDivision`以更新样式。当它最终得到 a`mouseup`时，它会停止在页面上监听。

作为进一步的改进，您可以使每个元素在拖动时具有适当的`cursor`样式，这样您的光标在拖动时不会闪烁。

**[试试看。](http://jsfiddle.net/XNJBH/embedded/result,html,css,js/)**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-16T23:12:50.417

部门里什么都没有，所以什么也不会发生。这就像写：

```
<h1></h1> 
```

并更改 h1 的 CSS 并期望会有一些东西

# c - GMP 中的 base 16 到 base 2^64 的转换

> ID：15455624
> 
> 赞同：0
> 
> 时间：2013-03-16T22:46:55.893
> 
> 标签：c, binary, gmp, base-conversion, exponentiation

我读了一些十六进制数字，然后我想将它们转换为基数 2^64。不幸的是，由于这个数字不能存储在一个 int 中，似乎 GMP 中没有可以帮助我解决这个问题的函数。

还有另一种我完全想念的方法吗？

（程序是C语言）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:09:46.980

以 2^1 为基数的 10 是`1010`二进制的`1 0 1 0`

以 2^2 为基数的 10 是`22`二进制的`10 10`

以 2^3 为基数的 10 是`12`二进制的`001 010`

以 2^4 为基数的 10 是`A`二进制的`1010`

我试图向您展示的模式（以及其他人已经注意到的）是它们都具有相同的二进制表示。换句话说，如果您将您的数字转换为基数 256 ( `char`s) 并将其写入文件或内存，您可以在基数 2^16（一次读取 2 个字节）或基数 2^32（4 个字节）中读取它一次），或者实际上是 2^anything。它将是相同的二进制表示（假设您的字节序正确）。所以要小心使用大端与小端并读为`int64_t`.

需要明确的是，这仅适用于 2^n 的碱基。以 5 为底的 10 是`20`二进制中的`010 000`; 明显不同。但是如果你使用三进制，同样的原理也适用于 3^n，而在五进制 (?) 中它也适用于 5^n。

更新：你如何使用它：

有一些功能

无效转换（char *myBase16String，uint8_t *outputBase256）；

我们假设采用以 16 为基数编码的字符串并生成一个无符号字符数组，其中每个字符都是以 256 为基数的一个单元，我们这样做：

```
uint8_t base2_8[8];
convert( "0123456789ABCDEF", base2_8 );
uint64_t base2_64[2];
base2_64[0] = (base2_8[0] << 24) | (base2_8[1] << 16) | (base2_8[2] << 8) | base2_8[3];
base2_64[1] = (base2_8[4] << 24) | (base2_8[5] << 16) | (base2_8[6] << 8) | base2_8[7];
// etc. You can do this in a loop, but make sure you know how long it is. 
```

假设您的输入不是一个很好的 4 个字节的倍数：

```
uint8_t base2_8[6];
convert( "0123456789AB", base2_8 );
uint64_t base2_64[2];
base2_64[0] =                                           (base2_8[0] << 8) | base2_8[1];
base2_64[1] = (base2_8[2] << 24) | (base2_8[3] << 16) | (base2_8[4] << 8) | base2_8[5]; 
```

稍微复杂一些，但仍然很容易自动化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T05:23:38.753

GMP 附带了`stdio.h`适用于大量数字的扩展，请参阅[格式化输入函数](https://gmplib.org/manual/Formatted-Input-Functions.html)手册。

`gmp_scanf`标准输入 ( )、文件 ( `gmp_fscanf`) 或您已经读入内存 ( ) 的字符串有一些常用的风格`gmp_sscanf`。

# php - 连接三个表并在两个位置显示信息

> ID：15455631
> 
> 赞同：0
> 
> 时间：2013-03-16T22:47:46.423
> 
> 标签：php, mysql, sections

```
//Table One {news}
Id1 | subject1 | url1 | source1

//Table Two {blog_news}
order_id | type | id1 | id

//Table Three {blog}
id | name | subject | url

//SQL query
SELCET nf.*, fnb.*, b.id, b.name, b.subject, b.url FROM news AS nf JOIN blog_news AS fnb ON nf.id1=fnb.id1 JOIN blog AS b ON fnb.id=b.id 
```

```
//Display Code

if(($i = 0; $i <= 5; ++$i)&&(fnb.type' ==1)){

//Order the result by 'order_id'

//Table Display Code
<table>
 <tr> 
  <td width='250px' valign='middle' align='left'>
     <font size='-2'>
     <a herf='” . $_GET['b.url'] . “'>
     <b>” . $_GET ['b.subject'] . “&lt;/b>
     </a>
     </font>
   </td>
   <td width='100px' valign='middle' align='right'>
       <font size='-2'>
       <a herf='” . $_GET['b.url'] . “'>
       <b>” . $_GET ['b.name'] . “&lt;/b>
       </a>
       </font>
     </td> 
   </tr> 
 </table> 
 }endif 
```

我想要完成的是将三个数据库表连接在一起，并使用类似于`{//display}`代码部分的代码在两个区域中显示结果。

我尝试了可能不同的方法来完成这项任务。
我尝试在 php 中使用 while 循环来显示结果，并且`mysql_fetch_error()`在 while 循环开始之前收到了一个。我的目标是让每张桌子都按`order_id`顺序`DESC`排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:53:08.083

在 MySQL 中组织数据要容易得多。

尝试这个：

```
SELECT nf.*, fnb.*, b.id, b.name, b.subject, b.url
FROM news nf
  JOIN blog_news fnb ON nf.id1 = fnb.id1
  JOIN blog b ON fnb.id = b.id
WHERE fnb.type = 1
ORDER BY fnb.order_id DESC
LIMIT 5 
```

并看看 MySQL 的[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)是如何工作的。

如果您不知道如何在 php 中与 MySQL 交互，那么在您最喜欢的搜索引擎上快速搜索“MySQL 和 php 教程”应该会有所帮助。

# java - 在 JTextArea 下方添加按钮

> ID：15455655
> 
> 赞同：1
> 
> 时间：2013-03-16T22:51:20.047
> 
> 标签：java, swing, user-interface, jtextarea

我正在尝试`JTextArea`使用 Eclipse WindowBuilder 在下方添加两个按钮，但我不能。我试图改变布局，但我找不到在我想要的地方添加按钮并以`JTextArea`简单的方式重新调整大小的方法。

```
public TestScrollPane03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JTextArea textArea = new JTextArea(100, 50);
                JScrollPane scrollPane = new JScrollPane(textArea);
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(scrollPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    } 
```

我将如何在原件下方添加按钮`textArea`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:58:25.220

您需要有两个面板，一个用于您的`textArea`，一个用于您的输入（在本例中为按钮）。我认为你正在寻找这样的东西：

![在此处输入图像描述](../Images/881681dea146ccae44fdc629824dc7db.png)

```
public class Test
{
    public static void createFrame()
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                JPanel panel = new JPanel();
                panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
                panel.setOpaque(true);
                JTextArea textArea = new JTextArea(15, 50);
                textArea.setWrapStyleWord(true);
                textArea.setEditable(false);
                textArea.setFont(Font.getFont(Font.SANS_SERIF));
                JScrollPane scroller = new JScrollPane(textArea);
                scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
                scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
                JPanel inputpanel = new JPanel();
                inputpanel.setLayout(new FlowLayout());
                JTextField input = new JTextField(20);
                JButton button = new JButton("Enter");
                DefaultCaret caret = (DefaultCaret) textArea.getCaret();
                caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);
                panel.add(scroller);
                inputpanel.add(input);
                inputpanel.add(button);
                panel.add(inputpanel);
                frame.getContentPane().add(BorderLayout.CENTER, panel);
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
                frame.setResizable(false);
                input.requestFocus();
            }
        });
    }

    public static void main(String... args)
    {
        createFrame();
    }
} 
```

如果您希望您的框架看起来更像您正在运行的操作系统的框架，您可以`.setLookAndFeel()`在显示之前添加`frame`：

```
try 
{
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
} catch (Exception e) {
    e.printStackTrace();
} 
```

添加`UIManager`看起来像什么（特别是小一点）：

![在此处输入图像描述](../Images/2cc54fc6211a9df3cbdc9ca1216db829.png)

# php - 使用 file_get_html(); 即使我使用 ->plaintext 也会返回带有特殊字符的 HTML

> ID：15455657
> 
> 赞同：-1
> 
> 时间：2013-03-16T22:51:33.053
> 
> 标签：php, mysql

好的，我在这个问题上花了很多时间，我想从外部页面获取标签，所以我这样做：

```
$dom = file_get_html($url); 

$name = $dom->find('h1'); 
$name = $name[0]->plaintext; 
```

该网站将h1标签的内容显示为：Grandon Multi-Purpose HTML Template

当我回显 $name 时，它​​是：Grandon 多用途 HTML 模板

但是当我将它保存在 MySQL 中时，它变成：

```
Grandon Multi&#45;Purpose HTML Template 
```

当我保存页面的源代码时，它还显示：

```
Grandon Multi&#45;Purpose HTML Template 
```

有没有什么快速的方法可以用它们的实际值替换那些特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:55:15.087

是的。使用[`html_entity_decode()`](http://php.net/manual/en/function.html-entity-decode.php)：

```
$name = html_entity_decode($name[0]->plaintext); 
```

# c - C 中的宽字符输入/输出是否总是从正确的（系统默认）编码读取/写入？

> ID：15455658
> 
> 赞同：9
> 
> 时间：2013-03-16T22:51:39.577
> 
> 标签：c, linux, posix, wchar-t

我主要对类 Unix 系统（例如，便携式 POSIX）感兴趣，因为 Windows 似乎对宽字符做了一些奇怪的事情。

读取和写入宽字符函数（如`getwchar()`和`putwchar()`）总是“做正确的事”，例如从 utf-8 读取并在设置区域设置时写入 utf-8，或者我是否必须手动调用`wcrtomb()`并打印使用例如字符串`fputs()`？在我的系统（openSUSE 12.3）上，`$LANG`设置为`en_GB.UTF-8`它们似乎确实做了正确的事情（检查输出我看到看起来像 UTF-8，即使字符串是使用 wchar_t 存储并使用宽字符函数编写的）。

但是我不确定这是否得到保证。例如[cprogramming.com](http://www.cprogramming.com/tutorial/unicode.html)指出：

> [宽字符] 不应用于输出，因为虚假的零字节和其他具有共同含义的低 ASCII 字符（例如“/”和“\n”）可能会散布在整个数据中。

这似乎表明输出宽字符（可能使用宽字符输出函数）会造成严重破坏。

由于 C 标准似乎根本没有提到编码，我真的不知道在使用 wchar_t 时谁/何时/如何应用编码。所以我的问题基本上是，当我的应用程序不需要知道所使用的编码时，如果只读取、写入和使用宽字符是正确的做法。`wcswidth()`我只需要字符串长度和控制台宽度（

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T23:21:12.413

只要语言环境设置正确，使用宽字符函数在使用 UTF-8 的系统上处理 UTF-8 文件就不会有任何问题。他们将能够正确地解释事物，即他们会根据需要将一个字符视为 1-4 个字节（在输入和输出中）。您可以通过以下方式对其进行测试：

```
#include <stdio.h>
#include <locale.h>
#include <wchar.h>

int main()
{
    setlocale(LC_CTYPE, "en_GB.UTF-8");
    // setlocale(LC_CTYPE, ""); // to use environment variable instead
    wchar_t *txt = L"£Δᗩ";

    wprintf(L"The string %ls has %d characters\n", txt, wcslen(txt));
}

$ gcc -o loc loc.c && ./loc
The string £Δᗩ has 3 characters 
```

如果你不小心在多字节字符串上使用标准函数（特别是字符函数），事情就会开始崩溃，例如：

```
char *txt = "£Δᗩ";
printf("The string %s has %zu characters\n", txt, strlen(txt));

$ gcc -o nloc nloc.c && ./nloc
The string £Δᗩ has 7 characters 
```

该字符串在这里仍然可以正确打印，因为它本质上只是一个字节流，并且由于系统需要 UTF-8 序列，因此它们被完美地翻译了。当然`strlen`是报告字符串中的字节数，7（加上`\0`），但不理解字符和字节是不等价的。

在这方面，由于 ASCII 和 UTF-8 之间的兼容性，只要小心，您通常可以将 UTF-8 文件视为简单的多字节 C 字符串。

还有一定程度的灵活性。可以轻松地将标准 C 字符串（作为多字节字符串）转换为宽字符串：

```
char *stdtxt = "ASCII and UTF-8 €£¢";
wchar_t buf[100]; 
mbstowcs(buf, stdtxt, 20);

wprintf(L"%ls has %zu wide characters\n", buf, wcslen(buf));

Output:
ASCII and UTF-8 €£¢ has 19 wide characters 
```

在流上使用宽字符功能后，它会设置为宽方向。如果以后要使用标准字节 i/o 函数，则需要先重新打开流。这可能就是为什么建议不要在`stdout`. 但是，如果您只在`stdin`and上使用宽字符函数`stdout`（包括您链接到的任何代码），您将不会遇到任何问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-17T03:34:34.770

控制宽字符 stdio 函数的行为及其与语言环境的关系的相关文本来自 POSIX XSH 2.5.2 Stream Orientation and Encoding Rules：

[http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_05_02](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_05_02)

基本上，宽字符 stdio 函数总是写入在流变得面向宽时有效的编码（根据`LC_CTYPE`语言环境类别） ；`FILE`这意味着第一次在其上调用宽 stdio 函数，或`fwide`用于将方向设置为宽。因此，只要`LC_CTYPE`在您开始使用流时，适当的语言环境实际上与所需的“系统”编码（例如 UTF-8）相匹配，一切都应该没问题。

但是，您不应忽略的一个重要考虑因素是，您**不能**在同`FILE`一流上混合使用面向字节和宽的操作。不遵守此规则不是可报告的错误；它只会导致*未定义的行为*。由于大量库代码假设`stderr`是面向字节的（有些`stdout`甚至**对**. 如果这样做，则需要非常小心使用哪些库函数。

真的，我想不出任何理由使用面向广泛的功能。`fprintf`完全能够使用说明符将宽字符串发送到面向字节的`FILE`流`%ls`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T23:05:21.853

请勿`fputs`与 ASCII 以外的任何内容一起使用。

如果你想写下来让我们说 UTF8，然后使用一个函数返回 utf8 字符串使用的实际大小并使用 fwrite 写入好的字节数，而不用担心`\0`字符串内部的恶性 ' '。

# delphi - 如何为通用 HTTP 请求的响应文件指定唯一名称？

> ID：15455660
> 
> 赞同：1
> 
> 时间：2013-03-16T22:51:49.300
> 
> 标签：delphi, http, delphi-xe2, indy, indy10

我开发了一个 HTTP API 服务器（旨在由第三方应用程序调用，不一定由 Web 浏览器调用），它通过在查询字符串中`get`传递一个参数来对（下载）任何和所有类型的文件进行通用调用`name`请求的文件。所有调用，无论是针对哪个文件，都在我的同一个自定义请求处理程序中处理`Get`（不要与标准 HTTP 混淆`get`）。查询字符串包括一个属性，该属性`name`标识要获取的唯一文件。

所以一个请求可能看起来像：

```
http://MyServerURL.com/Get?Key=SomeAPIKeyForAuthentication&Name=SomeUniqueIdentifier 
```

首先，我知道我显然可以让服务器仅使用 URI 获取文件，例如......

```
http://MyServerURL.com/SomeUniqueIdentifier?Key=SomeAPIKeyForAuthentication 
```

...但是该设计专门用于使用这个通用`get`命令，因此我需要将这个唯一标识符保留在查询字符串中。连接到此 API 的实际应用程序永远不需要知道此文件名，但是当手动提供 URL 以供某人在浏览器中打开以下载文件时，可能会发生事件。

但是，每当通过 Web 浏览器下载文件时，由于调用是`get`，因此保存的文件名最终也只是`get`.

HTTP 中有什么技巧可以在我的服务器上实现，这将强制下载的文件名成为唯一标识符，而不仅仅是`get`? 比如一些方法比如使用re-direct？

我`TIdHTTPWebBrokerBridge`在 Delphi XE2 中使用 Indy 10 作为 Web 服务器。`TWebModule`当它处理这个请求时，我正在这个组件中寻找一种方法（技术上是在它相应的处理程序中） `get`，以使响应的文件名成为我想要的任何字符串（在这种情况下，`SomeUniqueIdentifier`）。我听说过“URL 重写”这个词，但这是一个相当不同的话题，我认为这不是我需要的，但它可能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T23:46:31.733

这似乎是一种相当冗长的说法，即您想为 HTTP 下载设置文件名，而不是用于获取它的 URL。在这种情况下，您只需发送一个 Content-Dispositon 标头，指定所需的文件名。请参阅[rfc 2616 的第 19.5.1 节](https://www.rfc-editor.org/rfc/rfc2616#section-19.5.1)

例如

```
 Content-Disposition: attachment; filename="stackoverlow.ans" 
```

# batch-file - 拒绝访问...？

> ID：15455662
> 
> 赞同：0
> 
> 时间：2013-03-16T22:52:16.847
> 
> 标签：batch-file

```
@echo off
color 4
ping localhost 2.5 > nul
echo Welcome to the configuration menu.
echo Move AH1.exe and AH2.exe to your desktop.
echo This only works the first time
echo SO BE CAREFUL!
echo Would you like this to start on computer startup?
echo say "yes" or "no" below.
set /p option=Option:

IF %ERRORLEVEL% EQU no goto no
IF %ERRORLEVEL% EQU yes goto yes
:yes
echo Move AH1.bat and AH2.bat to desktop.
::Copies files to dekstop of current user *For Windows 7
xcopy "%systemdrive%\users\%username%\Desktop\AH1.bat" "C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup"
xcopy "%systemdrive%\users\%username%\Desktop\AH2.bat" "C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup"

echo Moved.
echo Press any key to close Anti Hacker Configuration.
pause > nul
exit
:no
echo No?The program will not take full effect then.
pause
exit 
```

如果您想测试，请在您的桌面上制作 2 个批处理文件，分别称为 AH1 和 AH2，上面写着 Access Denied....为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:18:38.727

无论您将什么放入`option`变量中，它*总是*会转到`:yes`.

我猜您`choice`在制作此命令时与命令混淆了，因为`errorlevel`不包含您在拥有`set`命令时选择的选项。

从`set`文档中：

> %ERRORLEVEL% - 扩展为当前的 ERRORLEVEL 值

因此，您可能希望更改`if %errorlevel% equ no goto no`为`if %option% equ no goto no`.

另外，如果你不放或者`yes`也不放会发生什么`no`。您可能需要通过`exit`在第二`if`条语句之后使用命令来解决这些问题。

# ios - 在苹果商店发布是否需要 ipad 版本？

> ID：15455663
> 
> 赞同：6
> 
> 时间：2013-03-16T22:52:18.230
> 
> 标签：ios, iphone, ipad

我是 iOS 开发的新手，对于一些经验丰富的开发人员来说，对这个问题的回答似乎很明显。如果我创建了一个针对 iPhone 的应用程序，在将应用程序提交到 Apple Store 之前，我真的需要包含 iPad 的视图吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T22:54:51.583

不，如果你愿意，你可以只定位 iPhone。或者您可以专门针对 iPad。最后，您可以创建一个针对两者的通用应用程序。

这是你的选择。您可以定义项目中的目标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T22:58:09.187

`iPad`AFAIK即使您正在提交应用程序，您也需要提交屏幕截图`iPhone`。我在谈论您提交时的itunesconnect。我自己在提交应用程序时遇到过这种情况，`iPhone`并且必须添加`iPad`屏幕截图。

专门针对 xcode 中的目标或视图。**不**，您不需要添加任何额外的视图，只需添加目标的视图。`iPhone`如果要保持应用通用性，您可以为和添加视图`iPad`。

对于不同的屏幕截图，您不需要添加不同的视图，而是可以使用模拟器来获取屏幕截图的所有变体。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-29T08:51:29.157

我最近尝试向 iTunes 提交一个带有 iPad 屏幕截图的应用程序，而二进制文件仅适用于 iPhone。

这是他们告诉我的。

**您的二进制文件不支持 iPad。iPad 的屏幕截图或应用程序视频预览不会显示在 App Store 上**

[![在此处输入图像描述](../Images/11bd4ddc87a11ecac9f1246c82e0e6fe.png)](https://i.stack.imgur.com/i4v3E.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T22:54:14.787

如果您将您的应用程序定位为通用，您将需要两者，如果您只选择一个设备，iphone 示例您不需要 ipad。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T22:56:26.160

对于通用，您需要同时提交两者，否则您设置的目标就足够了

# javascript - 如果使用 jquery 选择，则交换收音机

> ID：15455664
> 
> 赞同：0
> 
> 时间：2013-03-16T22:52:23.700
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, radio-button

单击 radiogroup2 中的单选按钮时，所选收音机应与 id='selectedradio' 的收音机交换位置。小提琴[http://jsfiddle.net/DCC66/6/](http://jsfiddle.net/DCC66/6/) --- 更新 --- 无线电行和代码的清晰视图正在交换但取消[http://jsfiddle.net/DCC66/14/](http://jsfiddle.net/DCC66/14/)

试过这个来排序 id 问题：http: [//jsfiddle.net/DCC66/18/](http://jsfiddle.net/DCC66/18/)

```
$(".radiogroup2 input[type='radio']").on('click', function () {
    $('#radioselected').closest('label').before($(this).closest('label'));
    $(this).closest('label').after($('#radioselected').closest('label'));
    $(this).attr('domaintype', 'radioselected');
    $('radioselected').attr('radioselected', 'domaintype');
}); 
```

现在 this:// 交换一次然后停止，然后只是使单击的收音机消失。认为它需要将 id="radioselected" 添加到新交换的收音机中。虽然只更换收音机，但仍然没有交换。

```
$(".radiogroup2 input[type='radio']").on('click', function () 
{
    $('#radioselected').closest('label').replaceWith($(this).closest('label'));
}); 
```

尝试使用克隆仍然没有运气：

```
$("div.radiogroup2 input[name='domain_ext']").click(function () 
{
    $(this).clone('#radioselected').after(this);
}); 
```

原来的

```
$("div.radiogroup2 input[name='domain_ext']").click(function() 
{ 
    //only if a the radio in radiogroup to are clicked take radio and swap with id='radioselected'
    if  ($(this).prop('checked')) 
    {
        $(this).after('#radioselected').add(this);
        $('#radioselected').after(this);
    }
}); 
```

因此，在“交换”行中单击的任何收音机都应与第一行中 ID 为“selectedradio”的收音机切换位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:34:46.830

使用委托而不是直接在单选按钮上绑定事件。这样，交换到 div 中的单选按钮也将起作用。

使用该`closest`方法获取单选按钮周围的标签。

从您交换的单选按钮中删除 id，并将其添加到选定的单选按钮。

使用`after`方法将标签移动到所选标签旁边的第二个列表中，然后使用`prependTo`将带有所选单选按钮的标签移动到第一个列表中。

您有一些无效的 HTML 代码使行交换位置。更改`<td><tr>`为`<tr><td>`。

```
$("div.radiogroup2").on("click", ":radio", function () {
  var l = $(this).closest('label');
  var r = $('#radioselected');
  r.removeAttr('id');
  l.after(r.closest('label'));
  $(this).attr('id', 'radioselected');
  l.prependTo('.radiogroup1');
}); 
```

演示：http: [//jsfiddle.net/DCC66/16/](http://jsfiddle.net/DCC66/16/)

# python - 为什么我的有条件返回“无”？

> ID：15455665
> 
> 赞同：1
> 
> 时间：2013-03-16T22:52:35.993
> 
> 标签：python

每当我运行它时，我都会得到第三个选项，因为它应该返回第一个选项，因为 s = 'yes'。这里出了什么问题？

```
def shut_down(s):
    if s is 'yes':
        return 'Shutting down...'
    elif s is 'no':
        return 'Shutdown aborted!'
    else:
        return "Sorry, I didn't understand you"

ans = 'Yes'
s = ans.lower()
shut_down(s) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:55:11.527

改变

```
if s is 'yes': 
```

至

```
if s == 'yes': 
```

和

```
elif s is 'no': 
```

至

```
elif s == 'no': 
```

While`is` [是一个有效的操作符](http://docs.python.org/2/reference/expressions.html#not-in)，它不是在这里使用的（它比较对象*身份*而不是比较字符序列）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T22:55:24.863

`is`测试身份，而不是平等。测试一个字符串是否**等于** `yes`使用`s=='yes'`

# html - 在 Haskell 中使用 TagSoup 解析标签

> ID：15455671
> 
> 赞同：6
> 
> 时间：2013-03-16T22:53:53.273
> 
> 标签：html, regex, haskell, haskell-tagsoup

我一直在尝试学习如何在 Haskell 中从 HTML 文件中提取数据，并且遇到了困难。我完全没有使用 Haskell 的经验，我之前的知识来自 Python（以及用于 HTML 解析的 BeatifulSoup）。

我正在使用 TagSoup 来查看我的 HTML（似乎是推荐的），并且对它的工作原理有一个基本的了解。这是我有问题的代码的基本部分（自包含，并输出用于测试的信息）：

```
import System.IO
import Network.HTTP
import Text.HTML.TagSoup
import Data.List

main :: IO ()
main = do
    http <- simpleHTTP (getRequest "http://www.cbssports.com/nba/scoreboard/20130310") >>= getResponseBody
    let tags = dropWhile (~/= TagOpen "div" []) (parseTags http)
    done tags where
        done xs = case xs of
            [] -> putStrLn $ "\n"
            _ -> do
                putStrLn $ show $ head xs
                done (tail xs) 
```

但是，我并不想使用任何“div”标签。我想以如下格式删除标签之前的所有内容：

```
TagOpen "div" [("id","scores-1997830"),("class","scoreBox spanCol2")]
TagOpen "div" [("id","scores-1997831"),("class","scoreBox spanCol2 lastCol")] 
```

我试过写出来：

```
let tags = dropWhile (~/= TagOpen "div" [("id", "scores-[0-9]+"), ("class", "scoreBox( spanCol[0-9]?)+( lastCol)?")]) (parseTags http) 
```

但随后它试图找到文字 [0-9]+。我还没有找到 Text.Regex.Posix 模块的解决方法，并且转义字符不起作用。这里有什么解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T00:26:12.503

`~==`不做正则表达式，你必须自己写一个匹配器，类似于

```
import Data.Maybe
import Text.Regex

goodTag :: TagOpen -> Bool
goodTag tag = tag ~== TagOpen "div" []
    && fromAttrib "id" tag `matches` "scores-[0-9]+"

-- Just a wrapper around Text.Regex.matchRegex
matches :: String -> String -> Bool
matches string regex = isJust $ mkRegex regex `matchRegex` string 
```

# python - 如何最好地在 python 中移动列表？

> ID：15455673
> 
> 赞同：0
> 
> 时间：2013-03-16T22:54:11.510
> 
> 标签：python

我需要获取任何长度的列表并将其移动某个整数值。在这个特定的应用程序中，列表可以被认为是“循环的”，因此向右移动 1 将导致最后一个值以第一个值结束。

这是我所能做到的最好的（比我所有包含 for 循环的变体要好得多），而且它似乎工作，但我想知道是否有更快的东西，特别是当这些列表变得很长时。

```
def shift(p, U):
    U = -(U % len(p))
    q = p[U:]+p[:U]
    return q 
```

# bash - Bash 脚本将命令的所有输出分配给变量

> ID：15455680
> 
> 赞同：1
> 
> 时间：2013-03-16T22:54:17.900
> 
> 标签：bash

我试图从 bash 脚本中的 ping 中获得成功和不成功的响应，但到目前为止还无法做到。

我的代码看起来像这样......

```
ping_results=$(ping -c 4 -q google.com) 
```

这在 ping 成功时有效，但如果我没有互联网连接并且我得到结果

```
ping: unknown host google.com 
```

它被打印到控制台，我的脚本似乎退出了。

我希望将 ping 结果或错误都存储在 ping_results 变量中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T23:19:25.467

好的，您的问题的简单答案是将stderr 重定向到stdout。正如 Fredik Phil 在评论中提到的那样。

代替：

```
ping_results=$(ping -c 4 -q google.com); 
```

采用：

```
 ping_results=$(ping -c 4 -q google.com 2>&1); 
```

或类似的东西...

但是，根据您的操作，最好测试 ping 命令的退出代码是 1（表示 ping 以错误结束）还是 0（表示 ping 成功）。退出代码存储在变量“$?”中。

# java - 一段时间后加载 MySQL 时出错

> ID：15455681
> 
> 赞同：0
> 
> 时间：2013-03-16T22:54:23.673
> 
> 标签：java, mysql, timer, refresh

我正在创建一个使用 JDBC 从数据库（MySQL）数据加载的应用程序。我的应用程序可以正常运行一段时间（大约 50 分钟）。该程序正在使用计时器，因此我可以刷新一些 JFrame 以显示数据库中的更改。

问题是，一段时间后它显示从数据库加载错误，并且它没有显示加载特定表的错误，而是随机加载表。

我正在使用此代码从 Database 加载，并且我多次将它用于我的 Database 的许多表

```
package Mysql;

public class SQLRoom {
public Connection con = null;
public Statement statement= null;
public String JDBC_DRIVER = "com.mysql.jdbc.Driver";
public String username = new String("bonis");
public String password = new String("bonis");
static String dbname = "jdbc:mysql://localhost/pbx";

public String selectRoom_ExtByRoom_Room(String room) {
    try {
        Class.forName(JDBC_DRIVER);
        con = DriverManager.getConnection(dbname,username,password);
        statement= con.createStatement();

        String query = "select * from room where room_room = '" +room+"'";

        String phoneNumber = null;

        final ResultSet rs1=statement.executeQuery(query);
        while (rs1.next()) {

            phoneNumber =rs1.getString("room_ext");

        }
        return phoneNumber;

    }
    catch (final Exception e) {
        JOptionPane.showMessageDialog(null,"SQLRoom selectRoom_ExtByRoom_Room  room:" +room+" room length"+ room.length());
        return null;
    }

}

} 
```

任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:18:21.390

`statement`当您使用退出 try-catch 块时，请务必关闭您的`finally`。你的也一样`connection`。更好更快的是`connection`在程序结束时重用并关闭它。

在 java 7 中，您可以这样做：

```
try (Connection con = DriverManager.getConnection(dbname, username, password);
      Statement statement = con.createStatement()) {
   ..CODE..
} 
```

在较旧的 Java 中：

尝试 {

```
 //YOUR CODE

  } catch (final Exception e) {

     //YOUR CODE

  } finally {
     try {
        if (statement != null) {
           statement.close();
        }
     } catch (SQLException e) {
        // error handling
     }

     try {
        if (con != null) {
           con.close();
        }
     } catch (SQLException e) {
     // error handling
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:56:42.947

我怀疑您在每个计时器滴答声中打开一个新的数据库连接，永远不会再次释放它 - 这将耗尽可用连接，直到它们达到零。

确保只打开一次数据库连接，然后在每个计时器滴答声中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:29:27.833

正确的做法是：

```
 if (con == null){
        try {
            con = DriverManager.getConnection(dbname,username,password);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    if (statement == null){
        try {
            statement= con.createStatement();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }` 
```

因为虽然我做了一段时间后 vhunsicker 说的话，但它也崩溃了

# java - 为什么Java没有类似于Comparator的接口，而是用于散列？

> ID：15455682
> 
> 赞同：2
> 
> 时间：2013-03-16T22:54:24.520
> 
> 标签：java, collections, hash, comparator

在 Java 中，Comparator 接口允许客户端为任何类型指定 equals() 和 compare() 方法。Comparator 可以传递给大多数（或者可能是所有）需要排序的集合，并且将使用 Comparator 中的方法而不是指定类的方法。这允许客户端以不同于其自然顺序的方式对对象进行排序，甚至可以对没有自然顺序的对象进行排序（即不实现 Comparable）。

为什么没有类似的哈希接口？它可以指定两种方法，hashCode() 和 equals()，并且对 HashSets 或 HashMaps 很有用，就像比较器对排序很有用一样。

编辑：对于那些将这个问题标记为[另一个问题](https://stackoverflow.com/questions/12132880/why-there-is-no-hashable-interface-in-java)的副本的人，我会提到另一个问题询问为什么 hashCode 包含在每个类中而不是接口中，而这个问题是关于抽象散列函数以允许它的多个实现.

答案编辑：获得此功能的最佳方法似乎是：

- 如果您可以使用外部库和/或已经在使用 Guava（由于很多原因，这是一个很棒的库），Guava 有一个[Equivalence](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html)类允许这样做。

- 如果您不想使用外部库，则可以使用自定义构建的适配器，类似于[此 SO question](https://stackoverflow.com/questions/15094818/compare-two-java-collections-using-comparator-instead-of-equals)的最佳答案中所做的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:54:52.457

表格问题

> “为什么 Java 没有 XXX”

很难客观地回答，除非有一个通用的

> “我们不知道，因为做出决定时房间里没有人。”

在这种情况下：

*   从表面上看，这个要求是可以实现的……从技术角度来看。

*   该要求已通过 RFE 多次提出。最直接的一个是 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6435963](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6435963)。RFE 被标记为 WONT FIX，但没有给出具体原因。

*   3rd 方库可以并且已经充分满足了此要求。

*我对此的解读*是，它不被支持，因为对于足够多的人来说，它被认为不够重要以至于需要支持。我会说他们对此做出了合理的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T23:09:57.217

我也认为这样的界面会很方便，特别是作为一种考虑集合中不同类型的平等的方式。它应该类似于您可以创建一个对象的方式`Comparable`，但仍然通过提供其他一些来覆盖特定集合中的该行为`Comparator`。

[正如在这个问题](https://stackoverflow.com/questions/15094818/compare-two-java-collections-using-comparator-instead-of-equals)中指出的那样，Guava 有一个[`Equivalence`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html)类提供了一种方法来做到这一点，通过包装你的类并让你在包装级别定义在这种情况下“平等”的含义。

如果您的问题真的是为什么在语言设计时没有发生这种情况……好吧，嘿，[James Gosling](http://en.wikipedia.org/wiki/James_Gosling)和公司只是人类，对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T23:00:50.177

散列实际上只有一个要求：像散列方法一样。因此，您可以为一种类型实现它，而无需知道谁会以何种方式以及出于何种目的使用它。所以对象本身的hash方法就足够了。

另一方面，Equals 在不同的上下文中具有不同的含义。例如，您可以按名字、姓氏、年龄、大小、体重、加入俱乐部的时间对人员进行排序……因此，对单个班级有不同的相等（和“小于”）实现是有意义的。

当然，没有什么能阻止您创建这样的界面并使用它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T23:05:42.307

您可以随时更改 hashcode() 以说明 HashMap 如何在 Map 中排列您的对象，并通过在您的类中实现有效的 hashcode 方法来提高其性能。

HashMap 如何从散列数据中执行添加和删除是 HashMap 内部的，更改它基本上意味着更改添加、删除方法等。

此外，排序是一个更常用的常见功能，并且在极少数情况下，当您真的想更改地图中散列的发生方式时，始终可以选择扩展地图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T01:07:14.363

让我试着说说我是怎么看的，为什么。

简而言之 - 您经常需要对列表**objects进行****排序**，但很少（如果有的话）需要交叉比较**object**列表的**身份**。

 ******* * *

在 Object 中，方法**hashCode**是辅助的、有用的方法，主要目的是服务于**equals**方法。协议是，如果对于两个对象**hashCode**返回不同的值，**equals**不能返回 true。

因此，方法**hashCode**和**equals**用于建立对象的**身份**。

方法**compareTo**（在 Comparable 和 Comparator 中）服务于另一个通用目的。它定义**对象的顺序**，而不是它们的**身份**。

Resume- **compareTo**定义了**对象**的**排序**方式，**hashCode**（与**equals**一起）定义了**对象的身份**。

* * *

再次实践的贡献是，您经常需要对一组**对象**进行排序，但很少（如果有的话）必须获取一组**对象**并交叉比较它们的**身份**。******

# git - git rm --cached 和“已删除”状态

> ID：15455686
> 
> 赞同：9
> 
> 时间：2013-03-16T22:54:45.707
> 
> 标签：git, msysgit

我想知道为什么当我这样做时：

```
git add <file> 
```

之后，我会：

```
git rm --cached <file> 
```

**该文件在舞台**区域中保持**已删除**状态。

 **这里的例子： ![在此处输入图像描述](../Images/c79fdf90a9fc6279403fdbd50899a30f.png)

我*只是*在寻找有关文件“已删除”状态的解释。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T23:06:39.340

尝试 a `git reset HEAD yourFile`，而不是 a `git rm --cached`。

混合重置将从索引中删除您的文件，而不会将其从工作树中删除。
请参阅“[提交前](https://stackoverflow.com/a/348234/6309)[撤消`git add`](https://stackoverflow.com/a/348234/6309)”。

在您的情况下， a[`git stash`](http://git-scm.com/docs/git-stash)需要在*之前*，`git reset`然后 a`git stash pop`将在重置后恢复您正在进行的更改。

* * *

关于`deleted`a 之后的 ' ' 状态[`git rm --cached`](http://git-scm.com/docs/git-rm)，该命令在索引中注册文件的删除，这就是为什么您看到它记录为下一次提交的“已删除”。

[OP](https://stackoverflow.com/users/357618/ferpega) Ferpega[坚持](https://stackoverflow.com/questions/15455686/git-rm-cached-and-deleted-status#comment21869387_15456051)：

> 我在问为什么会出现已删除的状态，`git rm --cached`因为该命令的行为应该与`git reset HEAD <file>`您在[`git rm`](http://git-scm.com/docs/git-rm).

好吧，不， a[`git rm`](http://git-scm.com/docs/git-rm)的行为与 [ 不同`git reset][8]`。
两者都会影响索引，但是：

*   one (the `git rm`) 将在下一次提交时记录要*删除*`deleted`的文件，因此是 ' ' 状态，
*   另一个 ( `git reset`) 将 HEAD 复制到索引，将所述索引重置回 HEAD 中的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:46:06.157

您将文件添加到索引/缓存中（屏幕截图中的绿色）并告诉您要删除该文件。索引/缓存更改仅在提交完成时执行。

我在想你可能把一个文件放在索引/缓存中，然后想删除它（所以它不会被提交）。

执行此操作的命令在消息中`git status`为您提供（在带圆圈的`deleted`.

```
git reset HEAD <filename> 
```**

# mysql - Rails Mysql 适配器尝试查询没有后备表的抽象模型类

> ID：15455687
> 
> 赞同：4
> 
> 时间：2013-03-16T22:54:46.463
> 
> 标签：mysql, ruby-on-rails, abstract

我有一个模型类“Abtest”，它继承自没有后备表的抽象基类“ModBase”。当调用 Abtest.new 时，即使在 ModBase 类中我有“self.abstract_class = true”，我也会收到以下错误。我做错了什么？

```
class ModBase < ActiveRecord::Base
  self.abstract_class = true

class Abtest < ModBase

ActiveRecord::StatementInvalid (Mysql::Error: Table 'mydb.mod_bases' doesn't exist: SHOW FIELDS FROM `mod_bases`):
  activerecord (3.1.0) lib/active_record/connection_adapters/mysql_adapter.rb:435:in `query'
  activerecord (3.1.0) lib/active_record/connection_adapters/mysql_adapter.rb:435:in `execute'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract_adapter.rb:244:in `log'
  activesupport (3.1.0) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract_adapter.rb:239:in `log'
  activerecord (3.1.0) lib/active_record/connection_adapters/mysql_adapter.rb:435:in `execute'
  activerecord (3.1.0) lib/active_record/connection_adapters/mysql_adapter.rb:636:in `columns'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `initialize'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:185:in `with_connection'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:92:in `initialize'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:112:in `call'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:112:in `default'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:112:in `[]'
  activerecord (3.1.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:112:in `initialize'
  activerecord (3.1.0) lib/active_record/base.rb:717:in `call'
  activerecord (3.1.0) lib/active_record/base.rb:717:in `default'
  activerecord (3.1.0) lib/active_record/base.rb:717:in `[]'
  activerecord (3.1.0) lib/active_record/base.rb:717:in `column_defaults'
  activerecord (3.1.0) lib/active_record/persistence.rb:327:in `attributes_from_column_definition'
  activerecord (3.1.0) lib/active_record/locking/optimistic.rb:69:in `attributes_from_column_definition'
  activerecord (3.1.0) lib/active_record/base.rb:1544:in `initialize'
  app/models/abtest.rb:89:in `new' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T18:49:42.107

这是 3.1.0 中的 Rails 错误。 [https://github.com/rails/rails/issues/558](https://github.com/rails/rails/issues/558)

我已经升级到 3.1.11 并且该错误再也没有发生过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T14:51:28.700

您还没有运行迁移。这就是这个错误的全部内容。无论 STI 如何，ActiveRecord 都需要一个用于 ModBase 的表。STI 所做的只是设置“类型”列。

由于听起来您正在尝试进行无表设置...您可能正在寻找的内容可能在 ActiveModel 中找到。本质上，您无需数据库要求即可获得很多 AR 优点。

[在 ActiveModel 上的 Railscast](http://railscasts.com/episodes/219-active-model)

# ruby - 从字符串中删除“\n\”

> ID：15455690
> 
> 赞同：-1
> 
> 时间：2013-03-16T22:54:55.597
> 
> 标签：ruby, regex

有没有办法从字符串中删除“\r\”？到目前为止，我设法仅删除“\ r”`mystring.gsub(/\r/,"")`

如何删除所有 3 个字符`\r\`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:35:51.053

在你的字符串中，你有文字字符“\”和“r”，还是有转义序列“\r”？

如果您有字符串`foo\r\fbar`，那么您的字符串长度为 8 个字符：

```
"foo\r\fbar".split(//).map(&:ord)
 => [102, 111, 111, 13, 12, 98, 97, 114] 
```

您要删除的是`\r`and`\f`字符，或字符代码 13 和 12。您*不能*只删除 中的前导斜杠`\f`，因为`\f`它只是一个字符。如果这是您的情况，您可以使用：

```
"foo\r\fbar".gsub(/\r\f/, "")
=> "foobar" 
```

但是，如果您有文字序列`foo\\r\\fbar`：

```
"foo\\r\\fbar".split(//).map(&:ord)
 => [102, 111, 111, 92, 114, 92, 102, 98, 97, 114] 
```

然后您*可以*删除`\r`“f”之前的和斜杠：

```
"foo\\r\\fbar".gsub(/\\r\\/, "")
=> "foofbar" 
```

如果你有序列`foo\r\\fbar`：

```
"foo\r\\fbar".split(//).map(&:ord)
=> [102, 111, 111, 13, 92, 102, 98, 97, 114] 
```

然后您同样可以删除`\r`“f”之前的和斜杠：

```
"foo\r\\fbar".gsub(/\r\\/, "")
=> "foofbar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:57:19.810

用这个：

```
mystring.gsub(/\r\\/,"") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T23:23:09.203

```
mystring.gsub(/\\r\\/,"") 
```

伊瓦伊洛是如此接近：P

我在[http://rubular.com/上对其进行了测试](http://rubular.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T06:15:15.773

如您所知，我们很难弄清楚您实际需要删除哪些字符，因为您自相矛盾。在你说的标题和你说`"\n\"`的问题中`"\r\"`。无论哪种方式，这都是我要做的，以便准确找出我需要搜索的内容。

从有问题的字符串开始：

```
mystring = "\n\\" 
```

我会使用该`bytes`方法让 Ruby 向我展示我应该使用什么：

```
mystring = "\n\\"                    # => "\n\\"
mystring.bytes.map{ |b| '%02x' % b } # => ["0a", "5c"]
mystring.tr("\x0a\x5c", '')          # => ""
mystring.gsub(/\x0a\x5c/, '')        # => ""

mystring = "\r\\"                    # => "\r\\"
mystring.bytes.map{ |b| '%02x' % b } # => ["0d", "5c"]
mystring.tr("\x0d\x5c", '')          # => ""
mystring.gsub(/\x0d\x5c/, '')        # => "" 
```

在任何编程语言中处理转义字符都可能是一件痛苦的事情，但是如果我查看构成字符的确切字节，我就不会出错，只要我处理的是 ASCII。如果它是另一个字符集，我会想使用该`chars`方法，并适当地调整我的模式：

```
mystring = "\n\\"         
mystring.chars.to_a       # => ["\n", "\\"]
mystring.gsub(/\n\\/, '') # => ""
mystring.tr("\n\\", '')   # => ""

mystring = "\r\\"         
mystring.chars.to_a       # => ["\r", "\\"]
mystring.tr("\r\\", '')   # => ""
mystring.gsub(/\r\\/, '') # => "" 
```

# awk - awk n-gram 提取不正确

> ID：15455691
> 
> 赞同：0
> 
> 时间：2013-03-16T22:54:55.943
> 
> 标签：awk, extraction

我目前正在研究一个从输入文件中提取所有 n-gram 的 awk 脚本。在文件上运行我的 awk 脚本时，它会打印出每个 n-gram（已排序）以及旁边的出现次数。在对输入文件进行测试时，它会打印出正确的 n-gram 顺序。只有出现的次数不正确。为了提取 n-gram，我有以下代码：

```
$1=$1   
line=tolower($0)
split(line,chars,"")
begin_len=0 
for (i in chars){
    ngram=""
    for (ind=0;ind<n;ind++){
        ngram=ngram""chars[i+ind]
    }
    if(begin_len == 0){ 
        begin_len=length(ngram)
    }
    if(length(ngram) == begin_len){ 
        counter+=1
        freq_tabel[ngram]+=1
    }
} 
```

（不包括排序功能）我想知道代码中是否有问题。还是我忽略了一些方面？

我应该有的输出如下：

```
35383
1580    n 
1323    en
1081    e 
940     de
839      v
780     er
716      d
713     an
615     t 
```

相反，我有以下输出：

```
34845
1561   n
1302   en
1067   e
930    de
827     v
772    er
711     d
703    an
609    t 
```

如您所见，n-gram 是正确的，但出现次数不正确。

输入文件：[http ://cl.ly/202j3r0B1342](http://cl.ly/202j3r0B1342)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:42:49.577

不是答案，但可以帮助您（假设 n=2）。

您是否碰巧将原始文件（似乎是 UTF-8）转换为 latin-1？我得到了两组数字：

```
==> sorted.latin1_in_utf8_locale <==
   1566 n 
   1308 en
   1072 e 
    929 de
    836  v

==> sorted.utf8_in_utf8_locale <==
   1579 n 
   1320 en
   1080 e 
    940 de
    838  v 
```

使用 latin-1 输入的数字更接近您的数字。使用 utf-8 到预期的。

但是，两者都不匹配。抓着我的头。

顺便说一句，我没有对脚本中的 ngram 进行排序，而是以适合将它们管道传输到`sort -rn`. 但这不应该引起差异，我猜。

```
for (ngram in freq_tabel)
    printf "%7i %s\n", freq_tabel[ngram], ngram 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:46:52.613

我在你的班，所以这里有一些提示：

*   复制准确的输入文件（使用来自 github 的克隆，不要做原始副本）
*   重新阅读作业，您应该摆脱前导和尾随空格，并将所有多个制表符/空格替换为一个空格。

另外，上面的 $1 = $1 有什么意义？

# r - 如何从 gWidgets 和处理程序返回值？

> ID：15455692
> 
> 赞同：8
> 
> 时间：2013-03-16T22:55:00.267
> 
> 标签：r, gwidgets

我正在尝试为 R 包开发 GUI（使用 gWidgets）。我的计划是构建一个保存数据的主窗口，并使用按钮为每个函数调用小型 gui 包装器。不幸的是，我陷入了一个基本（？）问题——我不知道如何传输数据。

问题：

*   如何在单独的窗口之间正确发送数据？
*   如何从另一个窗口的处理程序中发送数据？

我的问题类似于： [Loading and save variables in R with gWidgets](https://stackoverflow.com/questions/14885973/loading-and-saving-variables-in-r-with-gwidgets)，但从我读过的内容来看，不推荐使用 .GlobalEnv 。

我还看到有人使用 <<- 运算符：http: [//www.mail-archive.com/r-sig-gui@r-project.org/msg00053.html](http://www.mail-archive.com/r-sig-gui@r-project.org/msg00053.html)，但我无法正确复制它（并且我认为它不适用于我的示例）。

下面是一个简单的示例，如果按下按钮，我尝试将文本发送到另一个窗口并再次返回。我已经尝试在处理程序中使用 return ，但这不起作用（也不确定是否允许）。在处理程序/内部函数可以对数据进行操作之前，子窗口会在函数结束时立即返回其值。我不知道如何从处理程序到达主窗口。

```
main <- function(){

  library(gWidgets)
  options(guiToolkit="RGtk2")

  w <- gwindow(title="Main window",
               visible=FALSE)

  txt <- gtext(text="Initial text in main window.",
               container=w)

  btn <- gbutton("Send to sub window", container=w)

  addHandlerChanged(btn, handler = function(h, ...) {
    shouldbenew <- subwindow(svalue(txt))
    svalue(txt) <- paste("The sub window immediately returns 'TRUE', before pushing 'Return to main':", shouldbenew )
  } )

  visible(w) <- TRUE

}

subwindow<- function(text){

  library(gWidgets)
  options(guiToolkit="RGtk2")

  sw <- gwindow(title="Sub window",
                visible=FALSE)

  editedtxt <- gtext(text=paste(text, "- Text is transferred to the sub window, but I don't know how to send it back to the main window"),
                     container=sw)

  btn <- gbutton("Send to main window", container=sw)

  addHandlerChanged(btn, handler = function(h, ...) {
    newtxt <- svalue(editedtxt)
    return(newtxt)

  } )

  visible(sw) <- TRUE

} 
```

**更新：** 这是我选择的解决方案（如 jverzani 建议的那样），使用上面的示例进行说明。我希望我正确理解了建议的解决方案，并且我已经以一种“不错”的方式实施了它，在 CRAN 中得到了理想的接受。

总而言之，我在主窗口环境中创建了一个新环境。我编辑了子窗口以获取通话中的环境。按下子窗口中的按钮`assign`将编辑的文本传递给传递的环境。当子窗口关闭并且主窗口成为焦点时，可以使用`get`.

```
main <- function(){

  library(gWidgets)
  options(guiToolkit="RGtk2")
  # Create a new environment for passing data.
  .mainGlobal <- new.env()

  w <- gwindow(title="Main window", visible=FALSE)

  txt <- gtext(text="Initial text in main window.",
               container=w)

  btn <- gbutton("Send to sub window", container=w)

  addHandlerChanged(btn, handler = function(h, ...) {
    # Call sub widget passing text and environment.
    subwindow(text=svalue(txt), env=.mainGlobal)
  } )

  visible(w) <- TRUE

  addHandlerFocus(w, handler = function (h, ...) {

    if(exists("myText", envir=.mainGlobal)){
      # Retrieve text and update.
      svalue(txt) <- get("myText", envir=.mainGlobal)
    }    
  })

}

subwindow<- function(text, env=NULL){

  library(gWidgets)
  options(guiToolkit="RGtk2")

  sw <- gwindow(title="Sub window", visible=FALSE)

  editedtxt <- gtext(text=text, container=sw)

  btn <- gbutton("Send to main window", container=sw)

  addHandlerChanged(btn, handler = function(h, ...) {
    newtxt <- svalue(editedtxt)
    assign("myText", newtxt, envir=env)
  } )

  visible(sw) <- TRUE

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T09:41:13.087

一种更好的方法，但需要对代码进行更大的修改，是将 GUI 存储在引用类中。

您调用`setRefClass`一个字段列表（每个小部件一个），并定义一个创建 GUI 的初始化方法。我通常创建一个函数来包装创建实例的调用。见`setRefClass`代码块末尾。

```
mainGui <- suppressWarnings(setRefClass( #Warnings about local assignment not relevant 
  "mainGui",
  fields = list(
    #widgets
    w   = "ANY",       #"GWindow"
    txt = "ANY",       #"GEdit"
    btn = "ANY"        #"GButton"
  ),
  methods = list(
    initialize = function(windowPosition = c(0, 0))
    {
      "Creates the GUI"

      w <<- gwindow(
        "Main window", 
        visible = FALSE,
        parent  = windowPosition
      )

      txt <<- gedit(
        "Initial text in main window.", 
        container = w
      )      

      btn <<- gbutton(
        "Send to sub window", 
        container = w
      )      

      addHandlerChanged(
        btn, 
        handler = function(h, ...) {
          subWindow$setText(getText())
        } 
      )

      visible(w) <- TRUE      
    },
    #other methods to access GUI functionality go here
    getText = function() 
    {
      svalue(txt)
    },
    setText = function(newTxt) 
    {
      svalue(txt) <- newTxt
    }
  )
))  

createMainGui <- function(...)
{
  invisible(mainGui$new(...))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T09:23:10.747

您可以只返回列表中每个窗口的小部件。因此，主函数`list(w = w, txt = txt, btn = btn)`在末尾添加了一行以返回每个小部件，并在函数完成后使它们可访问。

以下示例是对您的代码进行的最小更改，但其中有一个小缺陷，`main`现在`subwindow`包含对彼此返回值的引用。该代码有效，但如果您正在做一些更复杂的事情，它很容易变得难以维护。

```
library(gWidgets)
options(guiToolkit="tcltk")

main <- function(){
  w <- gwindow(title="Main window",
               visible=FALSE)

  txt <- gtext(text="Initial text in main window.",
               container=w)

  btn <- gbutton("Send to sub window", container=w)

  addHandlerChanged(btn, handler = function(h, ...) {
    svalue(subWindow$txt) <- svalue(mainWindow$txt)
  } )

  visible(w) <- TRUE
  list(w = w, txt = txt, btn = btn)
}

subwindow<- function(text){
  sw <- gwindow(title="Sub window",
                visible=FALSE)

  editedtxt <- gtext(text="",
                     container=sw)

  btn <- gbutton("Send to main window", container=sw)

  addHandlerChanged(btn, handler = function(h, ...) {
    svalue(mainWindow$txt) <- svalue(subWindow$txt)
  } )

  visible(sw) <- TRUE
  list(w = sw, txt = editedtxt, btn = btn)
}

mainWindow <- main()
subWindow <- subwindow() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T16:30:04.740

您可以使用独立函数在 gwidget 之间传递信息，而无需事先知道接收器小部件的对象名称：

```
initMain <- function() {
  w <- gwindow(title="Main window",visible=FALSE)
  txt <- gtext(text="Initial text in main window.",container=w)
  btn <- gbutton("Send to sub window", container=w)

  list(
    run = function(partner) {
      addHandlerChanged(btn, handler = function(h, ...) {
        svalue(partner$txt) <- svalue(txt)
      } )
      visible(w) <- TRUE
    },
    txt = txt
  )
}

initSubWindow<- function() {
  w <- gwindow(title="Sub window",visible=FALSE)
  txt <- gtext(text="huhu",container=w)
  btn <- gbutton("Send to main window", container=w)

  list(
    run = function(partner) {
      addHandlerChanged(btn, handler = function(h, ...) {
        svalue(partner$txt) <- svalue(txt)
      } )
      visible(w) <- TRUE
    },
    txt = txt
  )
}

mw <- initMain()
sw <- initSubWindow()

mw$run(sw)
sw$run(mw) 
```

# multiple-instances - PyScripter - 运行同一 python 2.7 64 位的多个实例

> ID：15455694
> 
> 赞同：6
> 
> 时间：2013-03-16T22:55:09.500
> 
> 标签：multiple-instances, pyscripter

PyScripter 很容易成为我遇到的用于交互式工作的最佳 IDE——尤其是它能够连接到远程引擎。

它允许我打开多个 pyscripter 实例，每个实例都绑定到不同的版本（我的机器上有 3.3、2.7 64 位和 32 位）。

问题：我可以打开多个绑定到 2.7 64 位的 pyscripter 实例吗？对我有很大帮助，因为我有大量的内存，并且一次可以轻松地处理两个或三个项目。

转到命令提示符并请求 PyScripter -N 给了我一个新实例，如建议的那样

[https://groups.google.com/forum/?fromgroups=#!topic/pyscripter/0ebFUx6h7Z4][1]

，但它似乎默认为 3.3 - 但确实打开了 3.3 的多个实例。我不熟悉 PyScripter 如何选择要绑定的 python 版本。非常感谢任何帮助！

更新：删除 3.3。似乎让我获得了 2.7 的多个实例-但希望有一个允许我安装 3.3 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-16T18:48:16.720

我尝试添加 --python27 -N 并且能够启动两个 PyScripter 实例。然后我运行了 --python26 -N，并启动了运行 Python26 的第三个 PyScripter 实例。

```
...\PyScripter.exe --PYTHON27 -N
...\PyScripter.exe --PYTHON27 -N
...\PyScripter.exe --PYTHON26 -N 
```

希望这对你有用。

# ios - 在 iOS 中从音频中提取高音和低音

> ID：15455698
> 
> 赞同：9
> 
> 时间：2013-03-16T22:55:25.383
> 
> 标签：ios, audio, extract, waveform

我正在寻找一种方法来从歌曲中获取高音和低音数据，时间增加一些（比如 0.1 秒），范围在 0.0 到 1.0 之间。我已经四处搜索，但无法找到任何与我正在寻找的东西相近的东西。最终，我希望能够在播放歌曲时代表高音和低音级别。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T15:55:21.180

它相当容易。您需要执行 FFT，然后总结您感兴趣的 bin。您选择的很多方式将取决于音频的采样率。

然后，您需要选择适当的 FFT 顺序以在返回的频率区间中获得良好的信息。

因此，如果您订购 8 FFT，您将需要 256 个样本。这将返回 128 个复数对。

接下来，您需要将这些转换为幅度。这其实很简单。如果您使用的是 std::complex，您可以简单地对复数执行 std::abs 并且您将获得其大小 (sqrt(r^2 + i^2))。

有趣的是，此时有一个叫做[Parseval 定理](http://en.wikipedia.org/wiki/Parseval%27s_theorem)的东西。该定理指出，在执行傅立叶变换后，返回的 bin 之和等于输入信号的均方之和。

这意味着要获得一组特定 bin 的幅度，您只需将它们加在一起除以它们的数量，然后 sqrt 即可获得这些 bin 的 RMS 幅度值。

那么这会给你带来什么影响呢？

那么从这里你需要弄清楚你正在添加哪些垃圾箱。

1.  高音定义为 2000Hz 以上。
2.  低音低于 300Hz（如果我没记错的话）。
3.  中频介于 300Hz 和 2kHz 之间。

现在假设您的采样率为 8kHz。[奈奎斯特速率](http://en.wikipedia.org/wiki/Nyquist_frequency)表示在 8kHz 采样中可以表示的最高频率是 4kHz 。因此，每个 bin 代表 4000/128 或 31.25Hz。

因此，如果前 10 个频段（最高 312.5Hz）用于低音频率。Bin 10 到 Bin 63 代表中频。最后 bin 64 到 127 是高音。

然后，您可以如上所述计算 RMS 值，并获得 RMS 值。

RMS 值可以通过执行转换为 dBFS 值`20.0f * log10f( rmsVal );`。这将返回一个从 0dB（最大振幅）到 -infinity dB（最小振幅）的值。请注意，幅度的范围不是从 -1 到 1。

为了帮助您，这里是我的一些基于 C++ 的 iPhone FFT 类（它在后台使用 vDSP）：

```
MacOSFFT::MacOSFFT( unsigned int fftOrder ) :
    BaseFFT( fftOrder )
{
    mFFTSetup   = (void*)vDSP_create_fftsetup( mFFTOrder, 0 );
    mImagBuffer.resize( 1 << mFFTOrder );
    mRealBufferOut.resize( 1 << mFFTOrder );
    mImagBufferOut.resize( 1 << mFFTOrder );
}

MacOSFFT::~MacOSFFT()
{
    vDSP_destroy_fftsetup( (FFTSetup)mFFTSetup );
}

bool MacOSFFT::ForwardFFT( std::vector< std::complex< float > >& outVec, const std::vector< float >& inVec )
{
    return ForwardFFT( &outVec.front(), &inVec.front(), inVec.size() );
}

bool MacOSFFT::ForwardFFT( std::complex< float >* pOut, const float* pIn, unsigned int num )
{
    // Bring in a pre-allocated imaginary buffer that is initialised to 0.
    DSPSplitComplex dspscIn;
    dspscIn.realp = (float*)pIn;
    dspscIn.imagp = &mImagBuffer.front();

    DSPSplitComplex dspscOut;
    dspscOut.realp  = &mRealBufferOut.front();
    dspscOut.imagp  = &mImagBufferOut.front();

    vDSP_fft_zop( (FFTSetup)mFFTSetup, &dspscIn, 1, &dspscOut, 1, mFFTOrder, kFFTDirection_Forward );

    vDSP_ztoc( &dspscOut, 1, (DSPComplex*)pOut, 1, num );

     return true;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T13:51:37.733

您似乎正在寻找[快速傅立叶变换](http://en.wikipedia.org/wiki/Fast_Fourier_transform)示例代码。

这是一个相当大的话题，需要回答。

您需要的工具已经内置于 iOS：vDSP API

这应该对您有所帮助：[vDSP 编程指南](http://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vDSP_Programming_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005147)

还有一个[FFT 示例代码](http://developer.apple.com/library/ios/documentation/Performance/Conceptual/vDSP_Programming_Guide/SampleCode/SampleCode.html#//apple_ref/doc/uid/TP40005147-CH205-45465)可用

您可能还想查看[iPhoneFFT](https://github.com/alexbw/iPhoneFFT)。尽管该代码有些过时，但它可以帮助您了解“幕后”流程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T15:58:15.280

请参阅 Apple 的[auriotouch2](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011369)示例 - 它包含从频率分析到您想要的 UI 表示的所有内容。

# javascript - FabricJS - 向画布添加线条并仅控制它的长度

> ID：15455703
> 
> 赞同：1
> 
> 时间：2013-03-16T22:56:10.443
> 
> 标签：javascript, html, fabricjs

我正在使用 FabricJS 开发一个简单的平面图编辑器。在画布上添加线条（应该是墙）时，我希望能够仅控制线条的长度，而不是宽度高度。

我尝试过设置`lockScalingY: true`，但问题是当添加一条线时，控制手柄彼此如此接近，以至于我不能只与水平控制手柄交互......角落手柄实际上挡住了水平手柄......

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:03:56.140

**精细控制相邻的 FabricJS 生产线**

像 Photoshop 这样的图形程序处理这个常见问题的方式是让用户在所需的交叉点*附近*定位线，然后使用箭头键将线“轻推”到一个像素的位置。

下面的代码说明了一个粗略的解决方案，它对 FabricJS 行做同样的事情：

1.  用户选择一条线。
2.  关闭控制手柄和边框。
3.  让用户“轻推”线条完美对齐（此处线条长度增加）。
4.  重新打开控制手柄和边框。

这只是“概念证明”代码。在您的生产应用程序中：

*   您可能希望使用箭头键而不是按钮来“轻推”。
*   我一次轻推 10 像素——你可能一次做 1 像素。
*   当用户开始轻推时，您将自动关闭它们的手柄和边框。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/dd742/](http://jsfiddle.net/m1erickson/dd742/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="fabric.min.js"></script>

<style>
    body{ background-color: ivory; padding:30px; }
    canvas{border: 1px solid red; }
</style>

<script>
    $(function(){

        var canvas = new fabric.Canvas('canvas');
        var selectedLine;

        var line1=newLine(50,100,150,100,"red");
        var line2=newLine(160,50,160,150,"green");
        canvas.add(line1,line2);

        function newLine(x1,y1,x2,y2,color){
            var line=new fabric.Line(
                [x1,y1,x2,y2],
                {fill:color,strokeWidth:15,selectable:true}
            );
            return(line);
        };

        $("#hOff").click(function(){
            selectedLine.hasBorders=false;
            selectedLine.hasControls=false;
            canvas.renderAll();
        });

        $("#hOn").click(function(){
            selectedLine.hasBorders=false;
            selectedLine.hasControls=true;
            canvas.renderAll();
        });

        $("#shorter").click(function(){
            changeLineLength(selectedLine,-10);
            canvas.renderAll();
        });

        $("#longer").click(function(){  
            changeLineLength(selectedLine,10);
            canvas.renderAll();
        });

        function changeLineLength(line,adjustment){
            if(!selectedLine){return;}
            if(line.get("y1")==line.get("y2")){   // line is horizontal
                line.set("x2",line.get("x2")+adjustment);
            }else
            if(line.get("x1")==line.get("x2")){   // line is vertical
                line.set("y2",line.get("y2")+adjustment);   
            }else{    // line is diagonal
                line.set("x2",line.get("x2")+adjustment);   
                line.set("y2",line.get("y2")+adjustment);   
            }
        }

        canvas.observe('object:selected', function(eventTarget) {
            var event=eventTarget.e;
            var target=eventTarget.target;
            selectedLine=target;
        });

    }); // end $(function(){});
</script>

</head>

<body>
    <p>Select a line,</p><br/>
    <p>Turn handles Off</p><br/>
    <p>Make lines intersect by pressing longer/shorter</p><br/>
    <canvas id="canvas" width="600" height="200"></canvas> 
    <button id="hOff">Handles Off</button>
    <button id="shorter">Shorter</button>
    <button id="longer">Longer</button><br/>
    <button id="hOn">Handles On</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T09:23:39.147

可能会帮助某人。

将处理程序添加到事件

```
'object:selected': _objSelected 
```

然后在处理程序将不需要的控制设置为 false。

```
function _objSelected(e) 
{
    if(e.target.objectType == 'line')
    {
        var cv = e.target._controlsVisibility;
        // mt - middle top, tl - top left and etc.
        cv.mt = cv.mb = cv.tl = cv.bl = cv.tr = cv.br = false;
    }
} 
```

我还向新对象 Line 添加了 objectType（自定义属性）和 padding（为了美观）

```
var obj = new fabric.Line([50, 50, 150, 50], { padding: 10, objectType: 'line' }); 
```

# iphone - 如何在 iPhone 地图上获得点击的图钉？

> ID：15455705
> 
> 赞同：-2
> 
> 时间：2013-03-16T22:56:14.467
> 
> 标签：iphone, map, touch

所以，我有一张上面有很多注释的地图，每个图钉都有自己的协调和名称和描述，但是一旦用户点击图钉，我不想显示它。单击后如何获取选定的图钉及其数据（名称、协调和描述）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:51:22.303

实现 mkmapviewdelegate

`- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view`

# c++ - C++ 递归函数

> ID：15455710
> 
> 赞同：0
> 
> 时间：2013-03-16T20:51:23.570
> 
> 标签：c++, function, recursion

我正在学习 C++，当一个函数被自己调用时，我无法让递归工作。

```
#include <iostream>

using namespace std;

int countdown(int y) {
    if (y==1) {
        return 1 && cout << y << endl;
    }
    else {
        return countdown(y-1);
    }
}

int main () {
    cout << "Countdown from ten: " << endl;
    cout << countdown(10) << endl;
} 
```

当然还有其他方法可以实现这一点，但实际上我创建了这个示例来验证我自己对如何递归调用函数的理解。

在我添加的示例中，`&& cout << y`以验证是否`y`将 as 传递给函数`1`，无论我将函数称为 as ，这似乎总是如此`countdown(10)`。

如果我在这里遗漏了一些明显的东西，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:20:33.077

你的' cout << y '只有在 y 被测试为 1 时才会执行。

这个版本做我认为你想要的：

```
#include <iostream>
using namespace std;

int countdown(int y) 
{
    cout << y << endl;
    if (y==1)
    {
        return 1;
    }
    else 
    {
        return countdown(y-1);
    }
}

int main() 
{
    cout << "Countdown from ten: " << endl;

    cout << countdown(10) << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:20:34.537

您的调用堆栈如下所示：

```
main
  countdown(10)
    countdown(9)
      countdown(8)
        countdown(7)
          countdown(6)
            countdown(5)
              countdown(4)
                countdown(3)
                  countdown(2)
                    countdown(1)
                      std::cout << 1 << std::endl; 
```

如果要查看整个倒计时，请将输出命令移到 if 条件前面。

此外，您编写输出的风格非常单一。请注意，它仅有效，因为`1 %&& cout`将 转换`cout`为`bool`并且`bool`可以转换为`int`. 请不要写这样的代码。

# jquery - 如何将backbone.js 集合传递给视图并遍历集合，然后渲染视图？

> ID：15455721
> 
> 赞同：0
> 
> 时间：2013-03-16T22:58:11.087
> 
> 标签：jquery, backbone.js, underscore.js

过去，我一直在做的是，当我想用​​模板渲染和显示集合时，只需调用集合上的“每个”方法。对于每个模型，我为每个模型创建一个新的单一视图并将其附加到 $el. 但在这种情况下，这是行不通的。我的模板中有一个输入类型文本，我不想为每个模型显示一个新输入。我宁愿以某种方式将集合传递给模板并迭代模板中的集合。另外值得注意的是，在创建此视图的新实例时，我的集合是通过我的主应用程序视图传入的：

```
// clientsview.js

define(
[
    'backbone',
    'ClientView',
    'Clients'
], function(Backbone, ClientView, Clients) {

ClientsView = Backbone.View.extend({

    tagName: '#page',
    template: _.template( $('#allClientsTemplate').html() ),

    initialize: function() {
        this.render();
    },

    render: function() {

        // var that = this;
        console.log('collection');
        console.log(this.collection);// successfully returns collection
        console.log('template');
        console.log(this.template);// successfully returns template function

        // This causes an error: 
        //Uncaught TypeError: Cannot call method 'toJSON' of undefined 
        var tmpl = this.template({ clients: this.collection.toJSON() });

        return this;

    }

});
return ClientsView;
}); 
```

我在 index.html 中的模板

```
// index.html
<script id="allClientsTemplate" type="text/template">
// I do not want create an input for every single model
// but I need the input to be part of the view.
<input type="text" class="table-search" id="search" autocomplete="off"   placeholder="Search Clients…">
<table class="table" id="tblData">
    <thead>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody id="tblDataBody">

        <% _.each(clients, function(client) { %>

            <tr>
                <td><a href=""><%- client.first_name %></a></td>
                <td><a href=""><%- client.last_name %></a></td>
                <td><a href=""><%- client.status %></a></td>
            </tr>

        <% }); %>

    </tbody>
</script> 
```

我正在从我的主应用程序视图中实例化我的客户视图：

```
define(
    [
        'jquery',
        'underscore',
        'backbone',
        'AddClientView',
        'ClientsView',

    ], function( $, _, Backbone, AddClientView, ClientsView ) {

    AppView = Backbone.View.extend({

        initialize: function() {

            // var addClientView = new AddClientView({ collection: this.collection });
            var clientsView   = new ClientsView({ collection:this.collection });

        }

    });
    return AppView;
}); 
```

我正在从我的初始化方法实例化我的主应用程序视图：

```
define('App', [
    'jquery',
    'underscore',
    'backbone',
    'Router',
    'bootstrap',
    'Clients',
    'AppView'
], function($, _, Backbone, Router, bootstrap, Clients, AppView) {

    function initialize() {

        // for custom global events
        window.vent = _.extend( {}, Backbone.Events )

        var app = new Router();
        Backbone.history.start();

        // probably more appropriate to do this in app view
        var clients = new Clients;// Get collection of clients

        clients.fetch().then( function() {// fetch client collection from db
            new AppView({ collection: clients });
        });

    }
    return {
        initialize: initialize
    };
}); 
```

我的初始化方法是从 main.js 调用的：

```
// main.js
require.config({
    shim: {
        'underscore': {
         exports: '_'
        },
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },
        'bootstrap': {
            deps: ['jquery'],
            exports: 'bootstrap'
        }
    },
    paths: {
        'text'          : 'lib/require/text',
        'jquery'        : 'lib/jquery/jquery-1.9.1',
        'underscore'    : 'lib/underscore/underscore',
        'backbone'      : 'lib/backbone/backbone',
        'bootstrap'     : 'lib/bootstrap/bootstrap',
        'App'           : 'app',
        'Router'        : 'router',
        'AppView'       : 'views/app/appview',
        'Client'        : 'models/clients/client',
        'Clients'       : 'collections/clients/clients',
        'ClientView'    : 'views/clients/clientview',
        'ClientsView'   : 'views/clients/clientsview',
        'AddClientView' : 'views/clients/addclientview'
    }
});
require(['App'], function(App) {
    App.initialize();
}); 
```

当我尝试这种方法时出现错误（未捕获的类型错误：无法调用未定义的方法 'toJSON'）。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:24:49.023

您必须实例化您的集合，向其中添加项目，然后实例化视图并将集合传递给它：

```
var clients= new Clients();
clients.add({FirstName: 'Joe', LastName: 'Blow', Status: 'Active' });

var clientsView = new ClientsView({collection: clients}); 
```

您还需要更改模板：

```
<% _.each(collection, function(client) { %>
<tr>
    <td><a href=""><%- client.get('FirstName') %></a></td>
    <td><a href=""><%- client.get('LastName') %></a></td>
    <td><a href=""><%- client.get('Status') %></a></td>
</tr>
<% }); %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-20T20:28:04.283

你的骨干是正确的。您的问题是，当您实例化 AppView 时，您没有通过 fetch 创建的承诺传递数据：

你的代码：

```
clients.fetch().then( function() {// fetch client collection from db
     new AppView({ collection: clients });
}); 
```

它应该是：

```
clients.fetch().then( function(resp) {// fetch client collection from db
     new AppView({ collection: resp.data });
}); 
```

# python - 是否有最大尺寸，最大没有。列数，最大行数？

> ID：15455722
> 
> 赞同：39
> 
> 时间：2013-03-16T22:58:12.313
> 
> 标签：python, pandas

..如果是这样，熊猫的最大限制是多少？

抱歉，这个问题似乎很简单，但我在 pandas.pydata.org 上找不到答案。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2018-01-31T14:28:20.697

限制是你的记忆。（但这些限制真的很大）

但是当你想在“Jupyter Notebook”中显示一个 DataFrame 表时，有一些预定义的限制。

例如，您可以：

```
print (pd.options.display.max_columns) # <--- this will display your limit
pd.options.display.max_columns = 500 # this will set limit of columns to 500 
```

相同的想法适用于行：

```
display.max_rows 
```

更多详情： [https ://pandas.pydata.org/pandas-docs/stable/options.html](https://pandas.pydata.org/pandas-docs/stable/options.html)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-16T23:16:36.773

不`Pandas`，在引擎盖下使用 numpy 数组，所以我相信它是你记忆中的任何东西。就 numpy 数组而言，您可以[在此处](https://mail.python.org/archives/list/numpy-discussion@python.org/thread/IWXTJZYD2EBSL7H5GGP7XNDAIYLBYREW/)找到一些讨论。

# ruby - 如何在 Ruby 中将对象序列化为 json

> ID：15455726
> 
> 赞同：0
> 
> 时间：2013-03-16T22:58:28.610
> 
> 标签：ruby, json

我正在学习 Ruby，想知道如何将 ruby​​ 对象序列化为 json。我很喜欢使用 ActiveSupport 或任何其他 gem，最好的方法是什么？以下方法不起作用并且失败

```
BinaryTree.rb:4:in `require': no such file to load -- json (LoadError) 
```

我的问题是，我要安装什么以及需要使用什么要求语句？

```
 #!/usr/bin/env ruby

 require 'pp'
 require 'json'

 class BinaryTree

     attr_accessor :key, :value, :left, :right

     def initialize(key=nil,value=nil, left=nil, right=nil)
         @key, @value, @left, @right = key, value, left, right
     end

     def insert(key,value)
         if @key.nil?
             @key = key
             return @value = value
         end

         if key == @key
             return @value = value
         end

         if key > @key
             if @right.nil?
                 @right = BinaryTree.new
             end
             return @right.insert(key, value)
         end

         if @left.nil?
             @left = BinaryTree.new
         end
         return @left.insert(key, value)
     end
 end

 if __FILE__ == $0
     bt = BinaryTree.new
     bt.insert(5,2)
     bt.insert(4,5)
     bt.insert(6,3)
     bt.insert(9,7)
     bt.insert(8,9)
     pp bt
     puts JSON.encode(bt)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:09:54.797

你有`json`安装gem吗？如果没有，您需要确保`gem install json`先使用安装它。安装后，您应该能够执行以下操作：

```
File.open('output_file', 'w') do |f|
  f.write(JSON.encode(bt))
end 
```

将`File.open`API 与块一起使用很方便，因为它会`#close`在之后生成文件实例。

**更新**

如果您使用的是 Ruby 1.8 或更早版本，则必须先设置 Rubygems，使用以下命令：

```
require 'rubygems'
gem 'json'
require 'json'

puts ['test'].to_json 
```

# windows-phone-8 - ILMerge 错误 Windows Phone 8 未解决的程序集参考

> ID：15455727
> 
> 赞同：3
> 
> 时间：2013-03-16T22:58:30.410
> 
> 标签：windows-phone-8, ilmerge

我正在尝试使用 ILMerge.exe (2.12.0803) 为 Windows Phone 8 合并一些 .net 程序集。就他们自己而言，所有组件都可以正常工作。我可以成功合并不包含对[Windows.Networking](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.networking.aspx)命名空间的引用的程序集，如下所示：

> .\ILMerge.exe /lib:"%ProgramFiles(x86)%\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0" /out:.\WP8\%1\MathToolbox.dll .\%1\MathBase.dll .\%1\PolyFunctions.dll

一旦我尝试包含一个使用 Windows.Networking 命名空间的 DLL，如下所示：

> .\ILMerge.exe /lib:"%ProgramFiles(x86)%\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0" /out:.\WP8\%1\MathToolbox.dll .\%1\MathBase.dll .\%1\PolyFunctions.dll .\%1\RemoteTools.dll

我收到以下异常：

> 合并期间发生异常：不允许未解析的程序集引用：Windows。在 System.Compiler.Ir2md.GetAssemblyRefIndex(AssemblyNode 程序集) 在 System.Compiler.Ir2md.GetTypeRefIndex(TypeNode 类型) 在 System.Compiler.Ir2md.VisitReferencedType(TypeNode 类型) 在 System.Compiler.Ir2md.VisitClass(Class Class) 在 System System.Compiler.Ir2md.SetupMetadataWriter(String debugSymbolsLocation) 在 System.Compiler.Ir2md.WritePE(Module module, String debugSymbolsLocation, BinaryWriter writer) 在 System.Compiler.Writer.WritePE(String在 ILMerging.ILMerge 的 System.Compiler.Writer.WritePE(CompilerParameters compilerParameters, Module module) 中的位置、布尔 writeDebugSymbols、模块模块、布尔 delayS ign、String keyFileName、String keyName)。

阅读此异常提示 ILMerge 无法找到 Windows.Networking 程序集。我尝试向 ILMERGE 添加各种不同的标志，包括：

> .\ILMerge.exe /lib:"%ProgramFiles(x86)%\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0" /targetplatform:v4,"%ProgramFiles(x86)%\Reference Assemblies\Microsoft\Framework\Silverlight \v4.0\Profile\WindowsPhone71" /out:.\WP8\%1\MathToolbox.dll .\%1\MathBase.dll .\%1\PolyFunctions.dll .\%1\RemoteTools.dll

但仍然得到同样的例外。如果有人有任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:10:02.640

我认为 ILMerge 实际上不能与纯 .NET 程序集一起使用，尤其是当 Windows Phone 8 和 WinRT 项目使用引用的本机库时——这可能是找不到“Windows”未解析的程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T16:14:57.570

该错误表明 ILMerge 找不到平台的 Windows.winmd。在编译 Windows Phone 或 Windows Store 项目时，您主要针对两个方面进行编译；平台 SDK (WinRT) 和 .NET SDK。在这些程序集上运行的任何工具都需要两者。

除了传递 .NET 程序集文件夹之外，尝试将“C:\Program Files (x86)\Windows Phone Kits\8.0\Windows Metadata directory”作为 lib 参数传递。

请注意，ILMerge 基于旧版本的 CCI ( [http://ccimetadata.codeplex.com/](http://ccimetadata.codeplex.com/) )，因此即使在执行上述操作后，仍可能无法使用与 .NET 略有不同的 WinRT 元数据格式。

# php - 检查一个值是否是一个多维数组

> ID：15455731
> 
> 赞同：0
> 
> 时间：2013-03-16T22:59:04.333
> 
> 标签：php, arrays, multidimensional-array

当我运行这段代码时，怎么会得到`I am a multidimensional array!`（第一个块）的输出。我以为它会进入第二个街区，但事实并非如此。我在这里想念什么？

```
$values = array('1','2');
if(isset($values[0][0])){
    echo "I am a multidimensional array!";
}else{
    echo "I am not a multidimensional array.";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:00:30.957

试试这个：

```
if(is_array($values[0])) 
```

**编辑：这将只检查数组的第一个元素。您应该遍历每个元素以检查其是否真正多维。**

此代码检查数组的第一个元素是否也是数组。`isset`只检查变量是否为`NULL`.

`isset`在您的示例中未按预期工作。PHP 版本或设置之间的功能可能略有不同。我在手册中没有看到任何内容，但也许您可以：

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

使用`is_array`更具语义性，因此在我看来是一个更好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T23:04:51.173

```
$values = array(1,array(1,2));

$multi = false;
if(is_array($values)){
    foreach($values as $k=>$v){
        if(is_array($v)){
            $multi = true;
            break;
        }
    }
}

echo $multi ? "multi" : "not multi"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T23:06:50.993

如果数组中的第一个值显式声明为字符串，则此代码仅对我进入 if 分支，

```
$values = array('1',2); 
```

– 并且这种行为只不过是合乎逻辑的，因为`$values[0]`文本文字'1'，并且它具有可以使用从零开始的索引访问的第一个字符。

所以我猜你的*真实*数据是字符串类型——或者它可能取决于 PHP 版本（我在 5.3.16 下测试）。

无论如何，使用`is_array`已经建议的其他答案是正确的方法。

# django - “RelatedManager”对象没有属性“pk”

> ID：15455733
> 
> 赞同：4
> 
> 时间：2013-03-16T22:59:18.420
> 
> 标签：django, tastypie

我有一个看起来像这样的模型

```
class Connections(models.Model):
    following = models.ForeignKey(
        User, related_name='following'
    )
    followers = models.ForeignKey(
        User, related_name='followers'
    )
    def __unicode__(self):
        return u'%s, %s' % (self.following.username, self.followers.username)
    class Meta:
        unique_together = (('following', 'followers'), ) 
```

然后在 TastyPie 中，我使用以下代码提取以下用户

```
class ConnectionsResource(ModelResource):
    user_following = fields.ForeignKey(UserResource, 'following')
    user_follower = fields.ForeignKey(UserResource, 'followers')
    class Meta:
        queryset = Connections.objects.all()
        resource_name = 'connections'

    def prepend_urls(self):
        return[
            url(r"^(?P<resource_name>%s)%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('connections'), name="api_connections"),
        ]

    def connections(self,request,**kwargs):
        if request.user and request.user.is_authenticated():
            #Scribble Comments
            if request.GET.get('followers', ''):
                user = request.user
                followers = [connections.following for connections in user.followers.all()]
                followers_count = 1
                if followers_count > 0:
                    paginator = Paginator(followers, 20)
                    try:
                        page = paginator.page(int(request.GET.get('page', 1)))
                    except InvalidPage:
                        return self.create_response(request, { 'success': False, 'reason':'no more pages' })
                    objects = []
                    for result in page.object_list:
                        bundle = self.build_bundle(obj=result, request=request)
                        bundle = self.full_dehydrate(bundle)
                        objects.append(bundle)
                    followers_list = {
                    'followers_count': followers_count,
                    'followers' : objects,
                    'success': True,
                    }
                    self.log_throttled_access(request)
                    return self.create_response(request, followers_list)
                else:
                    return self.create_response(request, { 'success': False, 'reason':'No Followers' })
            else:
                return self.create_response(request, { 'success': False, 'reason':'Wrong Query'})
        else:
            return self.create_response(request, { 'success': False, 'reason':'User not Logged in'})

    def determine_format(self, request):
        return 'application/json' 
```

但我不断收到`'RelatedManager' object has no attribute 'pk'`错误。我不知道为什么

追溯：

```
traceback: "Traceback (most recent call last): 
File "/Users/jonathan/virtualenvs/myproject/lib/python2.7/site-packages/tastypie/resources.py", line 202, in wrapper response = callback(request, *args, **kwargs) 
File "/Users/jonathan/virtualenvs/myproject/bin/django_worksquid/scribbler/api.py", line 547, in connections bundle = self.full_dehydrate(bundle) 
File "/Users/jonathan/virtualenvs/myproject/lib/python2.7/site-packages/tastypie/resources.py", line 837, in full_dehydrate bundle.data[field_name] = field_object.dehydrate(bundle) 
File "/Users/jonathan/virtualenvs/myproject/lib/python2.7/site-packages/tastypie/fields.py", line 729, in dehydrate return self.dehydrate_related(fk_bundle, self.fk_resource) 
File "/Users/jonathan/virtualenvs/myproject/lib/python2.7/site-packages/tastypie/fields.py", line 557, in dehydrate_related return related_resource.get_resource_uri(bundle) 
File "/Users/jonathan/virtualenvs/myproject/lib/python2.7/site-packages/tastypie/resources.py", line 784, in get_resource_uri return self._build_reverse_url(url_name, kwargs=self.resource_uri_kwargs(bundle_or_obj)) 
File "/Users/jonathan/virtualenvs/myproject/lib/python2.7/site-packages/tastypie/resources.py", line 763, in resource_uri_kwargs kwargs.update(self.detail_uri_kwargs(bundle_or_obj)) 
File "/Users/jonathan/virtualenvs/myproject/lib/python2.7/site-packages/tastypie/resources.py", line 2371, in detail_uri_kwargs kwargs[self._meta.detail_uri_name] = getattr(bundle_or_obj.obj, self._meta.detail_uri_name) AttributeError: 'RelatedManager' object has no attribute 'pk' " 
```

# 编辑

当我改变它`followers_count = 1`给`followers_count = followers.count()`了我

```
"count() takes exactly one argument (0 given)"  error 
```

# 编辑

我终于意识到追随者是一个列表而不是一个对象，所以我将代码更改为

```
def connections(self,request,**kwargs):
    if request.user and request.user.is_authenticated():
        #Scribble Comments
        if request.GET.get('followers', ''):
            user = request.user
            followers = [connections.following for connections in user.followers.all()]
            users_id = [s.id for s in followers]
            users=User.objects.filter(id__in = users_id)
            users_count = users.count()
            users_list = {
            'users_count': users_count,
            'users' : users,
            'success': True,
            }
            return self.create_response(request, users_list)
        else:
            return self.create_response(request, { 'success': False, 'reason':'Wrong Query'})
    else:
        return self.create_response(request, { 'success': False, 'reason':'User not Logged in'}) 
```

现在我确实得到了输出，但我得到的是对象，比如

```
success: true,
users: "[<User: abc>, <User: test>, <User: abc2>, <User: test2>]",
users_count: 4 
```

而不是这个，我希望我的对象显示电子邮件地址和所有用户，而不仅仅是这个对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T00:40:36.840

The solution was easy. It turs out, that I was supposed to use `ToManyField` for User objects not `ForeignKey`, and that fixed everything!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:42:23.943

我可以帮助解决一个问题：

```
followers = [connections.following for connections in user.followers.all()] 
```

您不能调用`.count()`它，因为您将查询结果放入列表中。使用`len(followers)`或`User.objects.get(following__followers=user)`。

其余的代码很奇怪，但我也看不出它有什么问题。也许问题出在`UserResource`? 您可能想查看第 837 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T23:33:42.233

`'RelatedManager' object has no attribute 'pk'`可能意味着 TastyPie 期待一个对象，但您给了它一个`RelatedManager`，就像`connections.following`我会确保`result`in`for result in page.object_list`是一个对象一样，您可能需要遍历所有`connections.following`用户。

```
for result in page.object_list:
    print result
    for following_user in result.all():
        print following_user
        bundle = self.build_bundle(obj=following_user, request=request)
        bundle = self.full_dehydrate(bundle)
        objects.append(bundle) 
```

您是否还考虑过仅使用[ManyToMany 字段](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)，或者通过`Profile`与用户具有 OneToOne 关系的模型或升级到允许[扩展用户模型的](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model)Django 1.5 ？这样一来，您就可以使用 Django 内置关系的所有好处，而不是实现自己的多对多关系，例如说出`user.followers.all()`并获取所有关注该用户的用户。

像这样的东西可以用于提取信息

```
users = [{
             'email': u.email, 
             'name': u.name,
             ...
         } for u in User.objects.filter(id__in = users_id)] 
```

`build_bundle`尽管您可能也应该尝试使用

```
users = [self.full_dehydrate(self.build_bundle(obj=u, request=request)) 
         for u in User.objects.filter(id__in = users_id)] 
```

# java - ArrayList 返回所有条目的最后一项

> ID：15455735
> 
> 赞同：4
> 
> 时间：2013-03-16T22:59:36.953
> 
> 标签：java, arraylist

我正在尝试使用要传递给 ArrayAdapter 的对象填充 ArrayList（最终）。我已经将一些代码提取到一个小型测试项目中来说明这个问题。

我有一个名为 Rules 的类，它有两个成员，Gender 和 Age (Rules.Java)。在 MyArrayTest 类中，我正在创建 Rules 对象的实例并将它们添加到 rule_parts ArrayList。当我遍历数组时，循环会执行预期的次数，但会复制最后一个元素。请有人指出原因。

规则.Java

```
public class Rules {
public static String Gender;
public static Integer Age;

public Rules(String G, Integer C) {
//super();
    Gender = G;
    Age = C;
    }
} 
```

主类 - MyArrayTest.java

```
import java.util.ArrayList;

public class MyArrayTest {

private static ArrayList<Rules> rule_parts = new ArrayList<Rules>();

public static void main(String[] args) {

// Rules Array  
rule_parts.add(new Rules("Male",25));
rule_parts.add(new Rules("Female",22));

System.out.printf("\n\nRules:\n\n");
for (Rules r : rule_parts) {
    System.out.printf (r.Gender + "\n");
    System.out.printf(r.Age + "\n");

    }

}

} 
```

输出如下：

规则：

女 22

女 22

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T23:03:17.413

您需要 make否则`Gender`这些字段将只保留每个类成员变量的单个值：`Age``static`

```
public String gender;
public Integer age; 
```

*另外：* Java 命名约定表明变量以*小写*字母开头 `Gender` `gender`，等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T23:03:29.680

问题是您的数据成员是`static`：

```
public static String Gender;
public static Integer Age; 
```

这意味着它们由类的所有实例共享。

删除`static`关键字，你会很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T23:09:58.110

问题是规则类中的静态变量。删除 static 关键字。静态变量是按类实例化的。所以它总是取最新的值

# apache - htaccess - 如何编辑以使重定向不适用于特定目录？

> ID：15455736
> 
> 赞同：0
> 
> 时间：2013-03-16T22:59:40.733
> 
> 标签：apache, .htaccess

如何编辑我的 htaccess 文件，以便重定向不适用于特定目录。在这种情况下 - 目录是“includes/contact”

以下是我当前的 htaccess 文件：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L]

##NEW SHIT
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

# python - Python - 使用'set'查找列表中的不同项目

> ID：15455737
> 
> 赞同：38
> 
> 时间：2013-03-16T22:59:41.507
> 
> 标签：python, compare

我需要比较 Python 中的两个列表，并且我知道如何使用该`set`命令来查找相似的项目，但是我可以使用另一个命令来自动比较它们，而不必为它编写代码吗？

我想找到不在每个项目中的项目。说清单一如下：

```
[1, 2, 3, 4, 5, 6] 
```

清单二是：

```
[1, 2, 3, 4, 6] 
```

我想`5`通过命令找到列表中缺少的内容，但我确实知道如何循环比较。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-16T23:11:02.213

[文档](http://docs.python.org/2/library/stdtypes.html#set)是一个很好的起点。这里有几个例子可以帮助你确定你想如何比较你的集合。

要查找交集（两个集合中的项目）：

```
>>> a = set([1, 2, 3, 4, 5, 6])
>>> b = set([4, 5, 6, 7, 8, 9])
>>> a & b
set([4, 5, 6]) 
```

要找出差异（仅在一组中的项目）：

```
>>> a = set([1, 2, 3, 4, 5, 6])
>>> b = set([4, 5, 6, 7, 8, 9])
>>> a - b
set([1, 2, 3])
>>> b - a
set([7, 8, 9]) 
```

要找到对称差异（在一个或另一个中的项目，但不是两者）：

```
>>> a = set([1, 2, 3, 4, 5, 6])
>>> b = set([4, 5, 6, 7, 8, 9])
>>> a ^ b
set([1, 2, 3, 7, 8, 9]) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-16T23:05:45.017

看起来你需要对称差异：

```
a = [1,2,3]
b = [3,4,5]

print(set(a)^set(b))

>>> [1,2,4,5] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-16T23:19:01.487

一个简单的列表理解

```
In [1]: a=[1, 2, 3, 4, 5, 6] 

In [2]: b=[1, 2, 3, 4, 6]

In [3]: [i for i in a if i not in b]
Out[3]: [5] 
```

# java - 插入二叉搜索树时节点颜色的动画变化

> ID：15455739
> 
> 赞同：4
> 
> 时间：2013-03-16T22:59:59.300
> 
> 标签：java, swing, animation, binary-search-tree

我已经实现了二叉搜索树的显示。这是在 jpanel 中绘制二叉树的代码。

```
public void paint(Graphics g) {
    super.paint(g);
    System.out.println(" in paint");
    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
    int num = bst.size;

    int y = 25;
    int nodes = 1;
    int level = 1;
    int length = getWidth();
    Queue<Node> q = new LinkedList<Node>();
    Queue<Integer> q2 = new LinkedList<Integer>();
    q.add(bst.root);
    while (num > 0) {

        int pX = (int) Math.round(length / (2.0 * nodes));
        int x = pX;
        for (int i = 0; i < nodes; i++) {
            Node n = q.poll();
            //
            if (n != null) {
                num--;
                System.out.println(x);
                g2.setColor(Color.BLUE);
                String str = n.value + "";
                 System.out.println(str);
                //Font f = Font.getFont(str);
                int width = str.length();
                g2.setColor(Color.YELLOW);
                g2.fillOval(x, y, (30 - 2 * level)+width*3, (30 - 2 * level));
                g2.setColor(Color.black);
                g2.drawString(n.value + "", x + 10 - level, y + 15);
                g2.setColor(Color.black);
                if (n.left == null)
                    q.add(null);
                else
                    q.add(n.left);
                if (n.right == null)
                    q.add(null);
                else
                    q.add(n.right);
                if (level != 1) {
                    int xx = q2.poll();
                    int yy = q2.poll();
                    g2.drawLine(xx+width*2, yy, x + (15 - 1 * level)+width*2, y);
                }
            } else {
                q2.poll();
                q2.poll();
                q.add(null);
                q.add(null);
            }
            q2.add(x);
            q2.add(y + 15 - level);
            q2.add(x + 30 - 2 * level);
            q2.add(y + 15 - level);
            x += 2 * pX;

        }
        y += 40;
        nodes = 1 << level;
        level++;
    } 
```

现在，当我将节点插入到树中时，我希望父节点逐渐改变新节点的颜色，然后最终作为子节点加入。或者要插入的新节点沿其父节点的路径移动。或类似的东西这是一个例子：![在此处输入图像描述](../Images/60e007f128e3a5515b50ce4f6ff3f4ee.png)

我不知道如何使用计时器或类似方法来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:16:12.277

好的，这比我想要的要长一点（10 个月大的孩子没有耐心）

![在此处输入图像描述](../Images/9ca8e8f17cd5664c6d82e74decf2a5ba.png)

基本概念围绕着您需要在一段时间内从一种状态更改为另一种状态的想法。

给定开始时间和当前时间，我们可以计算动画已经运行的时间量，给定动画总时间，当前进度。

有了这个（和一些聪明的数学），我们可以计算从开始状态到目标状态的当前状态。

我也做过运动，所以这可能有点过头了，但基本前提保持不变。

我将有关需要更改的节点的状态信息放在动画属性类中，并使用 a`javax.swing.Timer`来标记动画（以相当稳定的速率）。然后我根据需要更新每个节点的状态并重新绘制屏幕。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import java.text.NumberFormat;
import java.util.HashMap;
import java.util.Map;
import java.util.Random;
import javax.management.StringValueExp;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class AnimateNode {

    public static void main(String[] args) {
        new AnimateNode();
    }

    public AnimateNode() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new NodePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public interface Node {
        public void paint(JComponent parent, Graphics2D g2d);
        public void setColor(Color color);
        public Color getColor();
        public Node getParent();
        public Node getLeft();
        public Node getRight();
        public void setLeftNode(Node node);
        public void setRightNode(Node node);
        public Point getLocation();
        public void setLocation(Point p);
    }

    public class DefaultNode implements Node {

        private int number;
        private Node parent;
        private Node left;
        private Node right;
        private Point location;
        private Color color;

        public DefaultNode(int number, Node parent) {
            this.parent = parent;
            color = UIManager.getColor("Panel.background");
            this.number = number;
        }

        public void setLeftNode(Node left) {
            this.left = left;
        }

        public void setRightNode(Node right) {
            this.right = right;
        }

        public Node getParent() {
            return parent;
        }

        public Node getLeft() {
            return left;
        }

        public Node getRight() {
            return right;
        }

        @Override
        public Point getLocation() {
            return location;
        }

        @Override
        public void setLocation(Point location) {
            this.location = location;
        }

        @Override
        public void paint(JComponent parent, Graphics2D g2d) {

            FontMetrics fm = g2d.getFontMetrics();
            int radius = fm.getHeight();

            Point p = getLocation();

            int x = p.x - (radius / 2);
            int y = p.y - (radius / 2);

            Ellipse2D node = new Ellipse2D.Float(x, y, radius, radius);

            g2d.setColor(getColor());
            g2d.fill(node);

            g2d.setColor(Color.GRAY);
            g2d.draw(node);

            String text = String.valueOf(number);
            x = x + ((radius - fm.stringWidth(text)) / 2);
            y = y + (((radius - fm.getHeight()) / 2) + fm.getAscent());

            g2d.drawString(text, x, y);

        }

        @Override
        public void setColor(Color color) {
            this.color = color;
        }

        @Override
        public Color getColor() {
            return color;
        }

        @Override
        public String toString() {
            return number + " @ " + getLocation();
        }

    }

    public class AnimationProperties {

        private Point startPoint;
        private Point targetPoint;
        private Color startColor;
        private Color endColor;
        private Node node;

        public AnimationProperties(Node node) {
            this.node = node;
        }

        public Node getNode() {
            return node;
        }

        public void setTargetColor(Color endColor) {
            this.endColor = endColor;
        }

        public void setStartColor(Color startColor) {
            this.startColor = startColor;
        }

        public void setStartPoint(Point startPoint) {
            this.startPoint = startPoint;
        }

        public void setTargetPoint(Point targetPoint) {
            this.targetPoint = targetPoint;
        }

        public Color getTargetColor() {
            return endColor;
        }

        public Color getStartColor() {
            return startColor;
        }

        public Point getStartPoint() {
            return startPoint;
        }

        public Point getTargetPoint() {
            return targetPoint;
        }

        public Point getLocation(float progress) {
            return calculateProgress(getStartPoint(), getTargetPoint(), progress);
        }

        public Color getColor(float progress) {
            return blend(getStartColor(), getTargetColor(), 1f - progress);
        }

        public void update(float progress) {
            node.setLocation(getLocation(progress));
            node.setColor(getColor(progress));
        }

    }

    public class NodePane extends JPanel {

        private int number;
        private Node root;
        private Map<Node, AnimationProperties> aniProperties;
        private Timer animationTimer;
        private Timer startTimer;
        private long startTime;
        private int runTime = 1000;

        public NodePane() {
            aniProperties = new HashMap<>(25);

            root = addLeftNode(null);
            root.setColor(getBackground());
            addMouseListener(new MouseAdapter() {
                private Random rand;

                @Override
                public void mouseClicked(MouseEvent e) {
                    generateNextNode(root);
                    revalidate();
//                    repaint();
                }

                protected void generateNextNode(Node parent) {
                    Node child = null;
                    if (rand == null) {
                        rand = new Random(System.currentTimeMillis());
                    }
                    boolean left = rand.nextBoolean();
                    if (left) {
                        child = parent.getLeft();
                    } else {
                        child = parent.getRight();
                    }

                    if (child == null) {
                        if (left) {
                            addLeftNode(parent);
                        } else {
                            addRightNode(parent);
                        }
                    } else {
                        generateNextNode(child);
                    }
                }

            });

            startTimer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    stopAnimation();
                    startTime = -1;
                    animationTimer.start();
                }

            });
            startTimer.setRepeats(false);

            animationTimer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if (startTime < 0) {
                        startTime = System.currentTimeMillis();
                    }
                    float progress = 1f;
                    long duration = System.currentTimeMillis() - startTime;
                    if (duration >= runTime) {
                        ((Timer) e.getSource()).stop();
                    } else {
                        progress = (float) duration / (float) runTime;
                    }

                    for (AnimationProperties ap : aniProperties.values()) {
                        ap.update(progress);
                    }

                    repaint();

                    if (progress == 1f) {
                        aniProperties.clear();
                    }

                }

            });
            animationTimer.setRepeats(true);
            animationTimer.setCoalesce(true);
        }

        protected void stopAnimation() {
            if (animationTimer.isRunning()) {
                animationTimer.stop();
                for (AnimationProperties ap : aniProperties.values()) {
                    Node node = ap.getNode();
                    ap.setStartColor(node.getColor());
                    ap.setStartPoint(node.getLocation());
                }
            }
        }

        public Point getStartPoint(Node node) {

            Point startPoint = node.getLocation();
            while (startPoint == null) {
                node = node.getParent();
                startPoint = node.getLocation();
            }

            return startPoint;

        }

        protected void layoutNode(Node node, int x, int y) {

            if (node != null) {

                FontMetrics fm = getFontMetrics(getFont());
                int nodeHeight = fm.getHeight();

                if (node.getParent() != null) {

                    Point p = new Point(x, y);
                    Point sp = getStartPoint(node);

                    if (node.getLocation() == null) {
                        System.out.println("new node " + node);
                    }

                    if (node.getLocation() == null || !p.equals(node.getLocation())) {
                        AnimationProperties ap = new AnimationProperties(node);
                        ap.setStartColor(node.getColor());
                        ap.setTargetColor(getBackground());
                        ap.setStartPoint(sp);
                        ap.setTargetPoint(new Point(x, y));
                        node.setLocation(sp);
                        aniProperties.put(node, ap);
                        System.out.println("New Node to " + node);
                    } else {
                        aniProperties.remove(node);
                    }

                } else {

                    nodeHeight *= 2;

                }

                layoutNode(node.getLeft(), x - nodeHeight, y + nodeHeight);
                layoutNode(node.getRight(), x + nodeHeight, y + nodeHeight);

            }

        }

        @Override
        public void doLayout() {

            System.out.println("DoLayout");
            stopAnimation();

            FontMetrics fm = getFontMetrics(getFont());
            int nodeHeight = fm.getHeight();

            int x = getWidth() / 2;
            int y = nodeHeight;

            if (root != null) {

                root.setLocation(new Point(x, y));
                layoutNode(root, x, y);
//                Node node = root.getLeft();
//                while (node != null) {
//                    x -= nodeHeight;
//                    y += nodeHeight;
//                    layout(node, x, y);
//                    node = node.getLeft();
//                }
//                node = root.getRight();
//                x = getWidth() / 2;
//                y = nodeHeight;
//                while (node != null) {
//                    x += nodeHeight;
//                    y += nodeHeight;
//                    layout(node, x, y);
//                    node = node.getRight();
//                }

            }

            startTimer.restart();

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected Node createNode(Node parent) {
            DefaultNode child = new DefaultNode(++number, parent);
            child.setColor(Color.GREEN);
            System.out.println("Create new node " + child);
            return child;
        }

        protected Node addLeftNode(Node parent) {
            Node node = createNode(parent);
            if (parent != null) {
                System.out.println("Add " + node + " to left of " + parent);
                parent.setLeftNode(node);
            }
            return node;
        }

        protected Node addRightNode(Node parent) {
            Node node = createNode(parent);
            if (parent != null) {
                System.out.println("Add " + node + " to right of " + parent);
                parent.setRightNode(node);
            }
            return node;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (root != null) {

                Graphics2D g2d = (Graphics2D) g.create();

                paintConnectors(root, g2d);
                paintNode(root, g2d);

                g2d.dispose();

            }

        }

        protected void paintNode(Node node, Graphics2D g2d) {
            if (node != null && node.getLocation() != null) {
                node.paint(this, g2d);
                paintNode(node.getLeft(), g2d);
                paintNode(node.getRight(), g2d);
            }
        }

        protected void paintConnectors(Node node, Graphics2D g2d) {
            if (node != null && node.getLocation() != null) {
                Node parent = node.getParent();
                if (parent != null) {
                    g2d.setColor(Color.GRAY);
                    if (parent.getLocation() != null && node.getLocation() != null) {
                        g2d.draw(new Line2D.Float(parent.getLocation(), node.getLocation()));
                    }
                }

                paintConnectors(node.getLeft(), g2d);
                paintConnectors(node.getRight(), g2d);
            }
        }

    }

    public static Point calculateProgress(Point startPoint, Point targetPoint, double progress) {

        Point point = new Point();

        if (startPoint != null && targetPoint != null) {

            point.x = calculateProgress(startPoint.x, targetPoint.x, progress);
            point.y = calculateProgress(startPoint.y, targetPoint.y, progress);

        }

        return point;

    }

    public static int calculateProgress(int startValue, int endValue, double fraction) {

        int value = 0;
        int distance = endValue - startValue;
        value = (int) Math.round((double) distance * fraction);
        value += startValue;

        return value;

    }

    public static Color calculateProgress(Color start, Color target, double progress) {

        return blend(start, target, progress);

    }

    public static Color blend(Color color1, Color color2, double ratio) {
        float r = (float) ratio;
        float ir = (float) 1.0 - r;

        float rgb1[] = new float[3];
        float rgb2[] = new float[3];

        color1.getColorComponents(rgb1);
        color2.getColorComponents(rgb2);

        float red = rgb1[0] * r + rgb2[0] * ir;
        float green = rgb1[1] * r + rgb2[1] * ir;
        float blue = rgb1[2] * r + rgb2[2] * ir;

        if (red < 0) {
            red = 0;
        } else if (red > 255) {
            red = 255;
        }
        if (green < 0) {
            green = 0;
        } else if (green > 255) {
            green = 255;
        }
        if (blue < 0) {
            blue = 0;
        } else if (blue > 255) {
            blue = 255;
        }

        Color color = null;
        try {

            color = new Color(red, green, blue);

        } catch (IllegalArgumentException exp) {

            NumberFormat nf = NumberFormat.getNumberInstance();
            System.err.println(nf.format(red) + "; " + nf.format(green) + "; " + nf.format(blue));

        }
        return color;
    }

} 
```

**用简单的例子更新；）**

好的，这是一个简单的例子。基本上，它只是让节点闪烁......

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Ellipse2D;
import java.text.NumberFormat;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class BlinkNode {

    public static void main(String[] args) {
        new BlinkNode();
    }

    public BlinkNode() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        // Animation stuff
        private Timer aniTimer;
        // The amount of time that each animation cycle plays for 
        // in millis
        private int aniRunTime = 1000;
        // The time the animation was started
        private long startTime = -1;

        // Our color ranges, where to start and where
        // we want to get to and the current state...
        private Color startColor;
        private Color targetColor;
        private Color color;

        public TestPane() {
            // Initial state
            startColor = getBackground();
            targetColor = Color.GREEN;
            color = startColor;
            aniTimer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Set the start time it hasn't already
                    if (startTime < 0) {
                        startTime = System.currentTimeMillis();
                    }
                    // We're always finished if we run over time...
                    float progress = 1f;
                    // Calculate the duration of play
                    long duration = System.currentTimeMillis() - startTime;
                    // Have we reached the end yet??
                    if (duration >= aniRunTime) {
                        // Reset the start time, this allows the 
                        // animation to cycle.  Normally you would stop
                        // the timer, see the previous example
                        startTime = -1;
                        // Swap the start and target colors...
                        Color tmp = startColor;
                        startColor = targetColor;
                        targetColor = tmp;
                        color = startColor;
                    } else {
                        // Calculate the progress
                        progress = (float) duration / (float) aniRunTime;
                        // Blend the colors
                        color = blend(startColor, targetColor, 1f - progress);
                    }
                    // update the ui
                    repaint();
                }
            });
            aniTimer.setRepeats(true);
            aniTimer.setCoalesce(true);
            aniTimer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            int x = (getWidth() - 20) / 2;
            int y = (getHeight() - 20) / 2;
            g2d.setColor(color);
            Ellipse2D node = new Ellipse2D.Float(x, y, 20, 20);
            g2d.fill(node);
            g2d.setColor(Color.GRAY);
            g2d.draw(node);

            g2d.dispose();
        }
    }

    public static Color blend(Color color1, Color color2, double ratio) {
        float r = (float) ratio;
        float ir = (float) 1.0 - r;

        float rgb1[] = new float[3];
        float rgb2[] = new float[3];

        color1.getColorComponents(rgb1);
        color2.getColorComponents(rgb2);

        float red = rgb1[0] * r + rgb2[0] * ir;
        float green = rgb1[1] * r + rgb2[1] * ir;
        float blue = rgb1[2] * r + rgb2[2] * ir;

        if (red < 0) {
            red = 0;
        } else if (red > 255) {
            red = 255;
        }
        if (green < 0) {
            green = 0;
        } else if (green > 255) {
            green = 255;
        }
        if (blue < 0) {
            blue = 0;
        } else if (blue > 255) {
            blue = 255;
        }

        Color color = null;
        try {

            color = new Color(red, green, blue);

        } catch (IllegalArgumentException exp) {

            NumberFormat nf = NumberFormat.getNumberInstance();
            System.err.println(nf.format(red) + "; " + nf.format(green) + "; " + nf.format(blue));

        }
        return color;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T03:16:14.643

从概念上讲，如果每个节点都应该有一个特定的颜色，那么每个`Node`实例都应该有一个`Color`属性。[在此处](https://stackoverflow.com/a/11944233/230513)引用的示例中，`class Node`具有许多`updateXxx()`遍历程序（更简单）模型的静态方法，根据指定更新节点。特别是，`updateColor()`将每个元素的`Color`字段设置为指定的`color`. 您的实现`paintComponent()`可以做类似的事情。

附录：正如@MadP 评论，[`javax.swing.Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)非常适合定期 GUI 更新，因为计时器的`actionPerformed()`方法在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上执行。在这个[例子](https://stackoverflow.com/a/8616169/230513)中，模型随着每次调用而更新，并且在`repaint()`（间接）调用时呈现新状态`paintComponent()`。

# hibernate - JPQL：不允许按计数排序（i > ？）

> ID：15455745
> 
> 赞同：-1
> 
> 时间：2013-03-16T23:01:27.020
> 
> 标签：hibernate, jpql

我正在尝试形成一个按某些功能计数排序的 JPQL 查询。让我们假设实体篮子：

```
Basket - (Long) id, (String) name, (Set<Thing>) things_in_basket 
```

我正在尝试编写一个按某些内部功能排序的查询。我想实现类似：

```
SELECT b FROM Basket b ORDER BY COUNT(things_in_basket.id > 1000) DESC 
```

但它显然不起作用 - 它说：`expecting CLOSE, found '>'`- JPQL甚至可能吗？在经典 SQL 中，这并不难。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T09:28:10.327

您正在使用您的`ORDER BY`子句对结果进行排序和过滤。这是不正确的。该`ORDER BY`子句只能用于对结果进行排序。如果要过滤它们，请添加一个`WHERE`子句。

```
SELECT b 
FROM Basket b 
ORDER BY COUNT(things_in_basket.id) DESC
WHERE things_in_basket.id > 1000 
```

# vim-powerline - vim-powerline 状态行看起来很奇怪

> ID：15455747
> 
> 赞同：0
> 
> 时间：2013-03-16T23:01:34.460
> 
> 标签：vim-powerline

我安装了 powerline 插件，下载了一个修补过的字体并做了一个`fc-cache -vf ~/.fonts`. 然后我清除`PowerlineClearCache`并重新启动vim。我的状态行看起来像这样。我错过了什么？

NORMAL ⮀ Scripts/os_walk.py ⮀ ⮂ unix ⮃ utf-8 ⮃ python ⮂ 8% ⮂ ⭡ 2:1

我的 .vimrc 中有这一行 `let g:Powerline_symbols = 'fancy'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:41:23.883

我在 mac OSX (Leopard) 上尝试过这个，显然很多 mac 用户都有这个问题。然后我下载了 iterm2 并尝试了这篇精彩文章建议的步骤，现在它可以按预期工作了！![在此处输入图像描述](../Images/84a4024dec4be425132eb63f49b0e07d.png) [http://alexyoung.org/2012/01/13/using-powerline-with-mac-os/](http://alexyoung.org/2012/01/13/using-powerline-with-mac-os/)

# php - 多个 OR 和一个 AND 结果 - AND 是否应用于每个 OR？

> ID：15455753
> 
> 赞同：2
> 
> 时间：2013-03-16T23:02:55.923
> 
> 标签：php, loops, while-loop

我有一个基本查询用于进行一些测试，我希望得到一些关于我的结果是否正常的反馈。我确实从大约 100 条记录中交叉检查了我的结果，一切似乎都很好，但我正在浏览大约一百万条记录，我想确保我的结果是准确的。

这是我通过 while() 循环运行的基本查询：

```
 ... OR $row['last_action_txt'] == 'AUTO REC OK' 
    OR $row['action_txt'] == 'MAINT OK'
    OR $row['action_txt'] == 'LASTATUS OK' 
    OR $row['action_txt'] == 'ACCT LEAD OK' 
    AND $row['disp_txt'] == 'ACTIVE') { ... 
```

**AND 是否至少需要其他 OR 之一才能为真？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:06:27.747

您的代码相当于：

```
... OR $row['last_action_txt'] == 'AUTO REC OK' 
OR $row['action_txt'] == 'MAINT OK'
OR $row['action_txt'] == 'LASTATUS OK' 
OR ($row['action_txt'] == 'ACCT LEAD OK' AND $row['disp_txt'] == 'ACTIVE')) { ... 
```

将`AND`仅应用于最接近的`OR`。这是由于运算符的优先[级](http://www.php.net/manual/en/language.operators.precedence.php)`AND`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T23:07:14.620

在组合 ands 和 ors 时，您可能需要添加一些括号以确保获得正确的结果。如果您希望上述内容至少需要一个“或”ed 值，那么您需要在您正在 ORing 的所有术语周围加上括号。

```
if( ($row['last_action_txt'] == 'AUTO REC OK' 
OR $row['action_txt'] == 'MAINT OK'
OR $row['action_txt'] == 'LASTATUS OK' 
OR $row['action_txt'] == 'ACCT LEAD OK') 
AND $row['disp_txt'] == 'ACTIVE') { ... 
```

放置括号的位置将影响真假值如何确定结果。

# objective-c - 建模现实生活过程 - 线程和并发

> ID：15455756
> 
> 赞同：-2
> 
> 时间：2013-03-16T23:02:59.567
> 
> 标签：objective-c, modeling

我什至不知道这是否可能，但我想模拟一个真实的生活过程，因为许多人处理许多样本。

假设我有 100 个样本，有 5 个人可以处理这些样本，每个人可以以每小时 20 个的速度处理这些样本。

我有一个处理器类的以下代码，如果它们可以自由地进行处理，它会将样本分配给处理对象。

分配第一个 5 没有问题，但随后我似乎进入了一个无限循环，因为处理器似乎永远不会在计时器过去后将自己设置为“空闲”。关于为什么会发生这种情况或更好的方法的任何建议。目标是能够通过具有不同速率和数量的处理器来对流程进行建模。

```
-(id)init {
    if(![super init])
        return nil;
    self.free = YES;
    self.bookingInRate = 20;
    return self;
}

-(void)bookingIn:(NSInteger *)sampleNumber {
    self.free = NO;
    NSNumber *timeToBookIn = [NSNumber numberWithDouble:((60/self.bookingInRate) * 60)/1000];

    NSLog(@"Booking in sample number: %ld", sampleNumber);
    NSTimeInterval interval = 1;
    NSDate *d = [NSDate dateWithTimeIntervalSinceNow: interval];
    NSTimer *t = [[NSTimer alloc] initWithFireDate: d
                                   interval: interval
                                   target: self
                                   selector:@selector(onTick:sampleNumber:)
                                   userInfo:nil repeats:NO];

    NSRunLoop *runner = [NSRunLoop currentRunLoop];
    [runner addTimer:t forMode: NSDefaultRunLoopMode];
 }

 -(void)onTick:(NSTimer *)timer sampleNumber:(NSInteger *)sampleNumber {
     NSLog(@"Booked in sample no: %ld", sampleNumber);
     self.free = YES;
 } 
```

然后我使用以下方法运行建模循环：

```
NSMutableArray *sampleNumbers = [[NSMutableArray alloc]init];

for (int i = 1; i <= 10; i++) {
    [sampleNumbers addObject:[NSNumber numberWithInteger:i]];
}

NSMutableArray *bookerIns = [[NSMutableArray alloc]init];

for (int i=1; i<=5; i++) {
    [bookerIns addObject:[[HEFTBookerIn alloc]init]];
}

int i = 0;
long countSamples;

countSamples = [sampleNumbers count];

// loop sample numbers

while ([sampleNumbers count] != 0 )
{
    NSInteger sampleNo = [[sampleNumbers objectAtIndex:i] integerValue];
    long count = [bookerIns count];
    int counter = 0;

    //loop over booker ins

    int j;

    for (j=0; j <count ; j++) {
        HEFTBookerIn *booker = [bookerIns objectAtIndex:counter];
        if (booker.free == YES){
            dispatch_async(queue, ^{
                [booker bookingIn:sampleNo];
            });

            NSLog(@"Booking in : %ld", sampleNo);
            [booker bookingIn:sampleNo];
            [sampleNumbers removeObjectAtIndex:i];
            //i ++;
            break;
        } else {
            counter ++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:29:38.703

一个突出的问题是您传递的选择器在调用`initWithFireDate:interval:target:selector:userInfo:repeats:`. 从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)：

> *选择器*
> 
> 计时器触发时发送给目标的消息。选择器必须具有以下签名：
> 
> `- (void)timerFireMethod:(NSTimer*)theTimer`
> 
> 计时器将自己作为参数传递给此方法。

因此，如果它被调用的话，你期望在这个方法中的数据不会被传回给它。尝试使用带有调用而不是目标/动作的计时器，或者使用`dispatch_after()`（我认为后者更直接）。

# bash - 将别名作为函数参数传递

> ID：15455757
> 
> 赞同：1
> 
> 时间：2013-03-16T23:03:00.457
> 
> 标签：bash, terminal

这里是 bash 脚本的新手。已经为我的 bash_profile 配备了一些有用的函数来查询一些 mysql 数据库，但是在让 bash 将传递的参数识别为别名时遇到了麻烦。详情见下文：

```
function findfield() {
    $2 -e
    "SELECT TABLE_NAME,TABLE_SCHEMA,COLUMN_NAME AS 'Matched Field'
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE COLUMN_NAME LIKE '$1';"
} 
```

示例用法：

```
findfield %field% mpc 
```

其中 mpc 是指向要查询的数据库的别名。此用法返回错误：

```
-bash: mpc: command not found 
```

如果我只是硬编码 mpc 来代替 $2，上面的函数就可以工作——那么为什么它不能使用别名作为参数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:26:39.060

默认情况下，别名在非交互式 shell 中不起作用。您可以使用 更改它`shopt -s expand_aliases`，但我不确定它是否会有所帮助。

您需要另一层评估。当 bash 完成替换所有内容并想要运行该命令时，它会将“mpc”视为一个字符串。您可以使用 修复此更改`eval`，但是您需要保护其他参数，如果有人传递了一些顽皮的东西怎么办？这就是为什么通常不赞成使用 eval 的原因。有时这是不可避免的：

```
$ run() { $1; }
$ alias alal=uname
$ run whoami
lynx
$ run alal
bash: alal: command not found
$ run() { shopt -s expand_aliases; $1; shopt -u expand_aliases; }
$ run alal
bash: alal: command not found
$ run() { shopt -s expand_aliases; eval $1; shopt -u expand_aliases; }
$ run alal
Linux 
```

无论如何，您还需要修复 sql 中的引用，否则该字段将永远不会扩展。此处突出显示的语法使这一点显而易见。一个简单的方法就是将 $1 括在一对 " 中，这样您就可以有效地将字符串分成三个直到它被传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:59:09.250

您可能需要在文件中添加额外的一行`bash_profile`：

```
function myalias_func()
{
        some code here with different variables $1, $2...
}
alias myalias=myalias_func 
```

也就是说，尝试包括该行

```
alias findfield=findfield 
```

然后它应该可以工作。

# c++ - Noob C++/OpenMP：为什么会出现这个编译时错误？“reduction”子句中的变量必须在封闭上下文中共享

> ID：15455765
> 
> 赞同：2
> 
> 时间：2013-03-16T23:03:52.903
> 
> 标签：c++, multithreading, parallel-processing, openmp, reduction

```
 1 int result = 0;
 2 int b = 0;
 3 #pragma  omp for reduction(+:result) private(b)
 4 for(int i = 0; i < size; i++) {
 5    ifile >> b;
 6    if(b== 100)
 7      result++;
 8 } 
```

**为什么我会收到此错误？**

(3) 错误 C3037: 'result' : 'reduction' 子句中的变量必须在封闭上下文中共享

我试着用谷歌搜索……所有的例子都是这样的。如果这很重要，我也会在 Visual Studios 2012 中对此进行编码。我讨厌问这样的问题，但这阻止了我继续。

**固定：添加并行**

`#pragma omp parallel for private(buffer) reduction(+:result)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:18:17.383

您缺少缩减子句中的“并行”标签：

```
#pragma  omp for reduction(+:result) private(b) 
```

应该

```
#pragma omp parallel for reduction(+:result) private(b) 
```

# proxy - Nginx 隐藏转发端口号

> ID：15455768
> 
> 赞同：7
> 
> 时间：2013-03-16T23:03:59.743
> 
> 标签：proxy, nginx, port, portforwarding

我正在尝试建立一个简单的静态网站，但 nginx 存在一个问题，该问题因许多事情而变得复杂，最值得注意的是我的 ISP 阻止了所有入站端口 80 流量。

首先，我设置了一个网络转发，以便 www.mysite.com 将重定向到 mysite.com:8000，然后我设置我的路由器将端口 8000 转发到运行 nginx 的服务器。这绕过了我的 ISP 在端口 80 上的阻塞。我现在尝试让服务器上的 nginx 将端口 8000 上的请求代理到端口 80 上的虚拟主机，以便该站点在加载后显示为 mysite.com比 mysite.com:8000。

我一直在尝试使用 nginx 的`proxy_pass`指令来执行此操作，但无论我做什么，该站点始终显示为 mysite.com:8000。

这是我到目前为止所拥有的：

```
server {
  listen [::]:8000

  server_name mysite.com;

  location / {
    proxy_pass http://127.0.0.1:80;
    proxy_redirect default;
    proxy_set_header  Host               $http_host;
    proxy_set_header  X-Real-IP          $remote_addr;
    proxy_set_header  X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header  X-Forwarded-Proto  http;
  }
 }

server {
  listen 127.0.0.1:80;

  server_name mysite.com;

  root /var/www/homepage;
  index index.html;

  .
  .  (non-relevant stuff)
  .
} 
```

链接到实际网站：[http ://www.bjacobel.com](http://www.bjacobel.com)

我还尝试通过将路由器上的端口 8000 转发到端口 80，并让 nginx 在端口 80 上侦听来做到这一点，但其中包含 :8000 的 url 仍然显示。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:10:23.260

问题的根源不在于**您的**设置，而在于第一个**网络转发**- 它通过将请求的 URL ( [http://www.yoursite.com](http://www.yoursite.com) ) 重定向到新的 URL ( [http://yoursite.com:8000](http://yoursite.com:8000) )

因此，当请求到达您的设置时，这已经到位，并且您无法将其更改回端口 80，因为您的提供商阻止了它。

您可以使用框架集作为转发器（“Web 0.5”）或使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T23:09:14.953

*警告的话，在住宅连接上托管公共 Web 服务器通常违反 ISP 服务条款。*

浏览器将始终显示 8080，因为需要在端口 8080 上启动 HTTP 连接才能访问您的站点。如果您可以“隐藏”部分 URL，请考虑安全问题。

唯一的解决方法是在可以通过端口 80 访问的服务器上托管代理服务器或框架网站。此外，还有可以将端口 80 重定向到 8080 的重定向服务。

# php - 获取控制器内的当前 default_target_path

> ID：15455769
> 
> 赞同：3
> 
> 时间：2013-03-16T23:04:09.203
> 
> 标签：php, symfony

我正在使用 FOSUserBundle+FOSFacebookBundle 并且我试图在登录后使我的登录和注册页面无法访问。如果用户登录并正在访问这些页面之一，他应该被重定向到防火墙的 default_target_path 中定义的页面。

问题是我不知道如何在控制器内部获取 default_target_path 。我正在使用

```
$request->getSession()->get('_security.target_path'); 
```

但它返回null。

这是我的 security.yml 文件：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        chainprovider:
            chain:
                providers: [ fos_userbundle, fos_facebookbundle]
        fos_userbundle:
            id: fos_user.user_provider.username
        fos_facebookbundle:
            id: fos_facebookbundle

    firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
                default_target_path: /
            fos_facebook:
                app_url: "FB_APP_URL"
                server_url: "APP_URL"
                login_path: /login
                check_path: /login_fb_check
                default_target_path: /
                provider: fos_facebookbundle
            logout: true
            anonymous: true

        dev:
            pattern: ^/(_(profiler|wdt)|css|images|js|font)/
            security: false

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN } 
```

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:16:11.273

放：

```
firewalls:
    main:
        pattern: ^/
        form_login:
            # ...
            default_target_path: %target_path% 
```

目标路径设置在`parameters.yml`

```
parameters:
    # ...
    target_path: /
    # ... 
```

而不是通过以下方式获得价值：

```
$this->container->getParameter('target_path'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T11:31:40.460

你错过了get的一部分：

```
$request->getSession()->get('_security.main.target_path'); 
```

# google-maps - 如何将表格/图表与（谷歌）地图（统计数据）结合起来

> ID：15455771
> 
> 赞同：1
> 
> 时间：2013-03-16T23:04:55.410
> 
> 标签：google-maps, openstreetmap

我想使用`Google Maps`或其他 Map`Openstreetmap`来创建一个交互式站点，人们可以在其中查看自己所在地区的犯罪统计数据……我想自己通过后端输入这些统计数据。前端必须是这样的：

[http://www.police.act.gov.au/crime-and-safety/crime-statistics.aspx](http://www.police.act.gov.au/crime-and-safety/crime-statistics.aspx)

我从哪里开始？这是一个`polygon`吗？我已经阅读了，`Google Maps API`但我找不到制作这样的东西的线索。他们是如何将统计数据放入其中的？如何为该区域着色并划分它们？他们用了什么？任何方向都会非常受欢迎。

PS：我想要一张详细的地图。所以没有国家或城市，但必须突出显示某个城市的区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:03:20.000

我可以建议的是，首先彻底研究 Google API v3.Basics 的开发人员文档会有很大帮助。有关您的需求的指针，您可以在此链接[https://developers.google.com/maps/documentation/javascript/overlays#Polygons](https://developers.google.com/maps/documentation/javascript/overlays#Polygons)获得定义多边形和着色的帮助，并查看代码中的演示示例。对于 3 点多边形，这里是一个示例[https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-simple)

您可以通过在您的区域周围添加点来定义多边形。有许多工具可用于查找您的指针位置，例如[http://martinove.dk/maptools/polytool/](http://martinove.dk/maptools/polytool/)

为了处理数据，您可以使用markerclusterer。这些示例可以提供帮助：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/)

# c# - 是否可以反映托管程序集？

> ID：15455773
> 
> 赞同：2
> 
> 时间：2013-03-16T23:05:16.317
> 
> 标签：c#

例如，IIS 承载 ASP 程序集，而 SQL Server 承载 SqlClr 程序集。如果我要编写一个托管服务器应用程序，托管程序集是否可以反映在托管应用程序上？或者应用程序域可以防止这种情况？

郑重声明，我并不想反思其他人的集会，我更感兴趣的是防止其他人反思我的集会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:26:46.043

# ajax - IFRAME 中的 AJAX 不适用于同一台服务器

> ID：15455774
> 
> 赞同：5
> 
> 时间：2013-03-16T23:05:21.830
> 
> 标签：ajax, iframe

我正在使用一个网站，`abc.com`该网站`iframe`在`123.com`.
中的页面`iframe`正在向 上的另一个页面发出 AJAX 请求`123.com`，但我们看到该请求被取消。

除非我错了——*而且我在互联网上没有找到任何官方信息*——调用应该可以正常工作，因为它不是跨域请求。

父框架位于不同域的事实真的会阻碍`iframe`向自己的服务器发出 AJAX 请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:50:12.357

IFRAME 应该能够向其自己的原始站点（相同的源 URL）发出 ajax 请求。但是，请确保 REQUEST 事件是从 IFRAME 而不是父级触发的。

我的第一个猜测是您正在加载 IFRAME，然后通过父级 (JS) 对其进行寻址（触发事件）以使其执行/获取/设置触发 ajax 调用的某些内容。简而言之，这是 IFRAME 域到同一域的请求被取消的最可能原因，因为它仍然被浏览器识别为源自目标域代码之外。

REQUEST 事件需要从**用户**单击 IFRAME 中的某些内容或**从 IFRAME 本身**触发事件的代码中***有机地***生成。

 ******换句话说：**仅仅因为 IFRAME 可能具有在其 JS/代码中向/从自身触发事件/ajax 的能力，通常仍然*不允许*通过 JS/代码直接拥有 ajax/JS 的父引用。IFRAME 必须已经根据其加载参数（可能是 URL 值）进行编码，或者用户必须物理单击/采取操作以在该域上创建用户生成的事件。

当然，这会因浏览器和版本的不同而有所不同，因为您可以在父级和 iframe 之间的交互性方面进行哄骗。但是一个严格的、最新的浏览器会尽量防止你通过 js 在 iF​​rame 上伪造不安全的交互。

为了获得更好的答案，您需要提供更多关于您正在做什么/正在做什么的详细信息。****

# bash - Bash中的双引号与星号文件名扩展

> ID：15455780
> 
> 赞同：5
> 
> 时间：2013-03-16T23:05:50.617
> 
> 标签：bash, quotes, asterisk, expansion

在目录中`~/temp/a/foo/`，`~/temp/b/foo foo/`我有一些名为`bar1`, `bar2`, `bar bar1`,`bar bar2`等的文件。

我正在尝试编写一行 Bash，将包含“foo”作为名称最后一部分的目录中的所有这些文件复制到相应“foo”文件夹上方的文件夹中。

只要文件名中没有空格，这很容易，但是在处理`foo foo`目录时，以下两个命令会失败：

```
for dir in `find . -type d -name '*foo'` ; do cp $dir/* "$(echo $dir|sed 's_foo__g')" ; done 
```

（该`cp`命令无法将最后`foo`一个`"foo foo"`视为同一目录名称的一部分。）

```
for dir in `find . -type d -name '*foo'` ; do cp "$dir/*" "$(echo $dir|sed 's_foo__g')" ; done 
```

（`"$dir/*"`未展开。）

像替换`$dir/*`为`"$(echo $dir/*)"`这样的尝试更不成功。

有没有一种简单的方法可以扩展`$dir/*`以便`cp`理解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:36:56.047

`for`循环不仅是错误的——`sed`也不是这项工作的正确工具。

```
while IFS= read -r -d '' dir; do
  cp "$dir" "${dir/foo/}"
done < <(find . -type d -name '*foo' -print0) 
```

`-print0`在`find`(and ) 上使用`IFS= read -r -d ''`可确保带有换行符的文件名不会弄乱你。

使用该`< <(...)`构造可确保如果循环内部设置变量、更改目录状态或执行类似操作，这些更改将继续存在（管道的右侧位于 bash 的子外壳中，因此管道进入 while 循环将意味着在该while循环内对shell状态所做的任何更改都将在退出时被丢弃）。

using`${dir/foo/}`比 invoking 效率高得多`sed`，因为它在 bash 内部进行字符串替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:28:15.013

这里的问题不是 with `cp`，而是 with `for`，因为默认情况下，它按单词而不是目录名称拆分子shell的输出。

一个懒惰的解决方法是使用`while`并逐行处理目录列表，如下所示：

```
find . -type d -name '*foo' | while read dir; do cp "$dir"/* "$(echo $dir | sed 's_foo__g')" ; done 
```

这应该可以解决您的空格问题，但这绝不是一个万无一失的解决方案。

有关更准确的解决方案，请参阅 Charles Duffy 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T23:13:30.127

重命名`~/temp/b/foo foo/`为不带空格的名称，例如`~/temp/b/foo_foo/`，再次执行您尝试执行的操作。之后，如果您确实需要，您可以将其重命名为原始名称，并带有空格。顺便提一句。我自己从不使用包含空格的文件名，只是为了避免像您现在面临的那样复杂。

# c# - 如何序列化其类相互引用但避免 XmlInclude 的类层次结构？

> ID：15455786
> 
> 赞同：2
> 
> 时间：2013-03-16T23:06:31.120
> 
> 标签：c#, .net, xml-serialization

我有一个类层次结构，我想使用`XmlSerializer`该类及其相关属性对其进行序列化。有一个基本抽象类，然后是相当多的派生类（在下面的代码中，我将派生类的数量减少到五个，但实际代码中还有更多）。这些类形成一个层次结构，并且经常包含对层次结构中类实例的引用。

```
public abstract class BaseType 
{
    // Only classes in my assembly can derive from this class
    internal BaseType() { }   
}

public sealed class TType : BaseType
{
    [XmlText]
    public string Name;
}

public sealed class PType : BaseType
{
    [XmlElement("t", typeof(TType)]
    [XmlElement("p", typeof(PType)]
    [XmlElement("a", typeof(AType)]
    [XmlElement("s", typeof(SType)]
    [XmlElement("u", typeof(UType)]
    public BaseType Child;
}

public sealed class SType : BaseType
{
    [XmlElement("t", typeof(TType)]
    [XmlElement("p", typeof(PType)]
    [XmlElement("s", typeof(SType)]
    [XmlElement("a", typeof(AType)]
    [XmlElement("u", typeof(UType)]
    public BaseType [] Items;
    public string [] ItemNames;
}

public sealed class AType : BaseType
{
    [XmlElement("t", typeof(TType)]
    [XmlElement("p", typeof(PType)]
    [XmlElement("s", typeof(SType)]
    [XmlElement("a", typeof(AType)]
    [XmlElement("u", typeof(UType)]
    public BaseType Item;
    public int Length;
}

public sealed class UType : BaseType
{
    [XmlElement("t", typeof(TType)]
    [XmlElement("p", typeof(PType)]
    [XmlElement("s", typeof(SType)]
    [XmlElement("a", typeof(AType)]
    [XmlElement("u", typeof(UType)]
    public BaseType [] Alts;
    public string [] AltNames;
} 
```

最后，一个容器将它们全部容纳并喂给`XmlSerializer`：

```
[XmlRoot("items")]
public class ItemCollection
{
    [XmlElement("t", typeof(TType)]
    [XmlElement("p", typeof(PType)]
    [XmlElement("s", typeof(SType)]
    [XmlElement("a", typeof(AType)]
    [XmlElement("u", typeof(UType)] 
    public BaseType [] Items;
} 
```

如您所见，我的代码中有很多重复。`XmlElement`在某些时候，可能会引入一个新的派生类，并且必须使用新属性重新访问所有使用 BaseType 引用的地方。这既乏味又容易出错。我想表达一个事实，`BaseType`如果元素名称为“t”，则 a 可以反序列化为 TType，但如果元素名称为“p”等，则为 PType，恰好一次。

我知道，`XmlIncludeAttribute`但它引入`xsi:type`了“金主”不满意的属性。有什么方法可以分解出 XML 元素名称和 CLR 类型之间的映射知识？

解决方案可以做出的一个假设是，定义`BaseType`. 这意味着我们不必考虑将新类添加到组合中的外部程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:32:51.860

在摆弄了一段时间之后，我想出了一个解决方案，并在这里发布以帮助处于相同情况的其他人。

首先，定位类型层次结构中的所有类型。然后编写一个函数来构建一个`XmlElements`包含所有这些类型的实例：

```
XmlAttributes CreateXmlAttributesForHierarchyTypes()
{
    return XmlAttributes
    {
        XmlElements = 
        {
            new XmlElementAttribute("t", typeof (TType)),
            new XmlElementAttribute("p", typeof (PType)),
            new XmlElementAttribute("s", typeof (SType)),
            new XmlElementAttribute("a", typeof (AType)),
            new XmlElementAttribute("u", typeof (UType)),
        }
    };
} 
```

现在找到具有您希望序列化的上述类型之一的字段的所有类型。您可以通过反映程序集中的所有类来做到这一点，但就我而言，我碰巧知道只有少数类具有此要求：

```
Type [] typesToOverride = new Type[] 
{
    typeof(PType),
    typeof(SType),
    typeof(AType),
    typeof(UType),
    typeof(ItemCollection),
}; 
```

我们现在继续创建一个实例，`XmlAttributeOverrides`该实例指定`hierarchyTypeElements`适当类型的每个字段的覆盖：

```
public static XmlAttributeOverrides GetAttributeOverrides(IEnumerable<Type> typesToOverride)
{
    var overrides = typesToOverride
        .SelectMany(x => x.GetFields())  // Get a flat list of fields from all the types
        .Where(f => f.FieldType == typeof (BaseType))  // Must have the right type
        .Select(f => new
        {
            Field = f,
            Attributes = GetXmlAttributes(f)
        })
        .Where(f => f.Attributes != null)
        .Aggregate(
            new XmlAttributeOverrides(),
            (ov, field) =>
            { 
                ov.Add(field.Field.DeclaringType, field.Field.Name, field.Attributes); 
                return ov;
            });
    return overrides;
} 
```

（是的，我在辱骂`Aggregate`；LinQ 真是一把利落的金锤）

最后使用`XmlAttributeOverrides`实例创建您的序列化程序：

```
var attrOverrides = GetAttributeOverrides(TypesToDecorate);
serializer = new XmlSerializer(typeof(ItemCollection), attrOverrides); 
```

您可能希望将该序列化程序缓存在静态变量中以避免泄漏程序集。

这段代码可以概括为也装饰属性和字段。这留给读者作为练习。

# ruby - attr_accessor 或自定义方法重复方法名称混淆

> ID：15455804
> 
> 赞同：3
> 
> 时间：2013-03-16T23:09:28.110
> 
> 标签：ruby, attr-accessor

我确实理解Ruby支持调用方法的简写风格，即：`1.+(2)`与`1+2`（我仍然认为它是否与我的情况有关），但我真的很困惑为什么`attr_accessor`方法既不重复（嗯，它们不应该是，因为名称`writer`不同），在活动对象之外访问它们时`=`也没有任何不同（除了`writer`需要参数）。

我的问题包含在此代码中（在第二条评论中）

```
class Test
  def initialize(number)
    @number = number
  end
  def number
    @number
  end
  def number=(n)
    @number = n
  end
end

t = Test.new(12)

puts t.number # => 12
t.number = 13 # Why does it do what t.number=(13) should do
puts t.number # => 13 
```

我想知道为什么`t.number = 13`有效，当它指向一个应该只返回一个数字的方法时，而且当`t.number=(13)`它不被调用时它如何设置一个新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:17:39.543

`t.number = 13`只是 的简写`t.number=(13)`，它们实际上是 Ruby 中的相同语句。

`attr_accessor :b`创建以下两种方法的等效项：

```
def b
  @b
end
def b=(new_val)
  @b = new_val
end 
```

因此，在您的代码示例中，您可以将这两种方法替换`#number`为`#number=``attr_accessor :number`

# css - jQuery调整其父级大小后，百分比宽度不起作用

> ID：15455813
> 
> 赞同：5
> 
> 时间：2013-03-16T23:10:07.707
> 
> 标签：css, jquery-ui, width, jquery-ui-dialog, autoresize

我有一个 div，我希望它是其父对话框的 100% 宽度。

```
#content {
    width: 100%;
    color:white;
    background: red;
} 
```

如果我手动调整对话框的大小，它应该是这个属性，但是在手动调整大小之后，如果我`animate()`在对话框上使用，它将保持旧调整大小的宽度。

这同样适用于身高。

[这是一个很好的jsFiddle](http://jsfiddle.net/7gC37/)，它更好地解释了这个问题。

我怎样才能让 div 保持它的比例？

jQuery 如何更新宽度和高度（当我手动调整大小时）保持比例？

**编辑：**

* * *

无论如何，我希望灰色背景填充整个对话框。这是我更新的 jsfiddle 演示：http: [//jsfiddle.net/Esh5h/1/](http://jsfiddle.net/Esh5h/1/)

**编辑2：**

* * *

我找到了一种实用但非常丑陋的方式来完成它：[JSFIDDLE](http://jsfiddle.net/Esh5h/2/)

诀窍是调整对话框及其大小`.children(".ui-dialog-content")`

**编辑 3：**

* * *

我不能只复制 jQuery 用来调整大小的完全相同的函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T23:16:16.847

我再次查看并检查了元素，现在我很清楚发生了什么。

一旦您手动调整对话框的大小，jQuery 就会注入一个`style`具有固定值的属性，类似于：

```
<div id="dialog" style="width: 376px; min-height: 99px; height: 282px;" class="ui-dialog-content ui-widget-content" scrolltop="0" scrollleft="0">
</div> 
```

然后，当您对其进行动画处理时，样式会干扰您的预期结果。

在动画之前删除`style`属性似乎是有效的，类似于：

```
$("#content").click(function () {
    $("#dialog").attr("style", "").dialog("widget").animate({
        width: $(document).width() -100,
        height: $(document).height() -100,
        left: 0,
        top: 0
    }, 150);
}); 
```

* * *

[**演示**](http://jsfiddle.net/Esh5h/)- 移动到底`left`部`top`

* * *

**编辑**

该`style`属性将不断给您带来问题。删除它后，当再次手动调整大小时，它会再次注入它们，从而弄乱您的预期结果。

我发现解决这个问题的唯一方法是在调整大小时继续删除它们：

```
$("#dialog").on("dialogresize", function(){
    $(this).attr("style", "");
}); 
```

**编辑**

> 无论如何，我希望灰色背景填充整个对话框。

这似乎是您的 CSS 选择器的问题。

改变这个：

```
.ui-dialog .ui-dialog-content {
    background : #cacaca;
} 
```

对此：

```
.ui-dialog {
    background : #cacaca;
} 
```

此外，您仍然存在注入样式属性会弄乱您想要的样式并使用上述代码的问题，这些代码会在重新调整大小以及动画修复该样式时删除样式属性。

* * *

[**演示**](http://jsfiddle.net/Esh5h/3/)- 灰色背景填充对话框并始终删除注入的样式属性

[**DEMO**](http://jsfiddle.net/f7aqT/) - 与上面相同，但没有`empty-container`元素

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:43:12.990

除非您试图实现的不仅仅是移动和调整对话框大小，否则我认为您不需要在单击事件上重新初始化对话框。请注意 jQuery UI 如何将您的原始 div 包装在几个新的 div 中，所以我抓住了最外层的元素。尝试在你的 Javascript 中做这样的事情：

```
$("#dialog").dialog();

$("#content").click(function () {

    $(".ui-dialog").animate({
        left: 0,
        top: 0,
        width: $(document).width() -100,
        height: $(document).height() -100
    }, 150);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T00:14:38.110

`animate({complete:function()})`是解决方案。[这个 jsfiddle](http://jsfiddle.net/Esh5h/4/)现在正在工作。

我不知道为什么，但它在第二次点击时正常工作，但在第一次时却不行。[这个例子](http://jsfiddle.net/Esh5h/5/)有一个`setTimeout()`作品（有一点延迟）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T00:24:19.550

您可以向 animate 函数添加回调：

```
$("#content").click(function () {
    $("#dialog").dialog("widget").animate({
        width: $(document).width() -100,
        height: $(document).height() -100,
        left: 0,
        top: 0
    }, 150, function() { 
        $("#dialog").width($('.ui-dialog').width()); 
    });
}); 
```

[JsFiddle 演示](http://jsfiddle.net/B5pEA/2/)

# android - Android 标记点击功能

> ID：15455815
> 
> 赞同：1
> 
> 时间：2013-03-16T23:10:37.053
> 
> 标签：android, google-maps, marker

我正在寻找一种在单击标记的信息框/片段时运行的方法。到目前为止，我找不到任何关于此的信息，只有标记。关于我在哪里可以找到更多信息的任何帮助或链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T23:13:05.233

要创建在单击信息窗口时运行的方法，您需要`setOnInfoWindowClickListener`：

```
 map.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker args) {
                return null;
            }

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker args) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting the position from the marker
                clickMarkerLatLng = args.getPosition();

                TextView title = (TextView) v.findViewById(R.id.tvTitle);
                title.setText(args.getTitle());

                map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                    public void onInfoWindowClick(Marker marker) 
                    {
                        if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                        {   
                            if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                    String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                            {
                                Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                            }
                            else
                            {
                                FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                for (Task tmptask : tasksRepository)
                                {
                                    String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                    String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                    Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                    if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                    {  
                                        task = tmptask;
                                        break;
                                    }
                                }

                                Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                startActivity(intent);

                            }
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                        }
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T15:39:34.800

只需为您的地图设置 OnInfoWindowClickListener。

```
map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {
        @Override
        public void onInfoWindowClick(Marker marker) {
       //YOUR CODE
        }
    }); 
```

# android - 更改 MediaPlayer(android) 上的缓冲区大小？

> ID：15455816
> 
> 赞同：0
> 
> 时间：2013-03-16T23:10:48.643
> 
> 标签：android, media-player, audio-streaming

有没有办法改变流媒体播放器的默认缓冲区大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:49:49.390

在标准的 android 发行版中，输入`DataSource`通过[此处](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/AwesomePlayer.cpp#2034)`NuCachedSource2`所示的实现进行缓存。

这`NuCachedSource2`是通过页面缓存机制实现的，具有 4 MB 和 20 MB 的较低和较高阈值，如此处[所示](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/include/NuCachedSource2.h#75)。

我想你可以调整这些参数，重建`libstagefright.so`和替换它们以在你的系统中测试它。

# jax-ws - JAX-WS 文档中的“Tooltime”jar 是什么？

> ID：15455819
> 
> 赞同：-1
> 
> 时间：2013-03-16T23:10:57.790
> 
> 标签：jax-ws

我还没有阅读整个文档，但我发现很难在自我解释的上下文中找到该术语。[该页](http://jax-ws.java.net/2.2.7/docs/ch02.html#jar-dependency)面上的“Tooltime Jars”是什么意思？

如果您想对此投反对票，请至少说明原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:55:42.107

通过“工具时间”，他们指的是工具所需的罐子（而不是运行时）。xjc之类的。

# vim - Vim 插入模式文件路径补全

> ID：15455822
> 
> 赞同：1
> 
> 时间：2013-03-16T23:11:24.257
> 
> 标签：vim, autocomplete

我想更改 vim 查找文件完成的位置，但仅限于插入模式。例如：

我在`CG-Website`目录中打开 gvim。

这是我的目录结构：

![在此处输入图像描述](../Images/09cf1d9451f624a25da7e33a28f120b4.png)

然后我进入css文件夹并打开`style.css`

![在此处输入图像描述](../Images/54f104e372726fbc7a6ccaee6fd00d76.png)

使用`:e src/static/css/style.css`

现在我在 style.css 中，我想完成一个目录下的文件名。

我希望能够输入`../`模式`INSERT`并显示静态文件夹内的所有文件/文件夹，而不是`www`它现在所做的文件夹。

但是我不想更改实际目录，因为我仍然想`:e`正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T07:50:08.843

插入模式文件名完成总是从“当前目录”或“工作目录”完成，这可能是也可能不是当前文件的目录。由于您不想更改目录，因此文件名完成*无法*像您希望的那样工作。

其实最后一句`:h compl-filename`应该给你一个提示：

```
Search for the first file name that starts with the
same characters as before the cursor.  The matching
file name is inserted in front of the cursor.
Alphabetic characters and characters in 'isfname'
are used to decide which characters are included in
the file name.  Note: the 'path' option is not used
here (yet). 
```

这个问题的一个解决方案是`set autochdir`让 Vim 总是将工作目录更改为当前文件的目录，并使用像[CtrlP](http://www.vim.org/scripts/script.php?script_id=3736)这样的插件（还有其他插件）进行导航。正确配置后，CtrlP 允许您从项目的主目录中导航文件，该目录由存在`.git`或类似目录定义。这*真的很*方便。

但是，您可以相对轻松地解决该限制`set autochdir`（同样，您*需要*它来完成文件名才能像您一样工作 - 我希望它能够工作）和一点创造力：

```
nnoremap <F9> :e ~/path/to/project/ 
```

将此映射视为您项目的快捷方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T00:40:24.883

我认为您以错误的方式处理此问题。您希望在不更改当前目录的情况下过滤相对于您上次打开的目录的结果，这不太有意义。

我的建议是使用一种工具，它可以让您快速过滤项目根文件夹中的所有文件。

看看[Command-T：VIM 的快速文件导航](http://www.vim.org/scripts/script.php?script_id=3025)

PS：你需要有红宝石支持的vim。

# php - JMSSerializer + 表单/数组

> ID：15455823
> 
> 赞同：3
> 
> 时间：2013-03-16T23:11:25.677
> 
> 标签：php, symfony, symfony-2.2, jmsserializerbundle

我是 SF2 社区的新手，所以请放轻松；）

我遇到了 JMSSerializerBundle 和表单/数组的问题。我花了两天时间试图自己弄清楚，但没有任何成功，我决定将其发布到小组。

我正在构建一个简单的测试应用程序，它可以让我了解这些东西是如何工作的。现在是 API 的时候了。我正在使用 FOSRestBundle，效果很好。我的整个“应用程序”运行良好（开发非常快速和有效），我已经学会了如何使用安全组件、防火墙、路由、Doctrine（尽管我过去曾使用过它），编写自定义身份验证提供程序 - 我'我停留在 API，事实上，它的一部分。

表单问题：我在我的 APIBundle 中创建了简单的 ArticleController（请忽略文本响应，我刚刚在调试时删除了我的代码以使其更具可读性）：

```
namespace Veron\ApiBundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use FOS\RestBundle\View\View;
use Veron\ApiBundle\Form\Type\ArticleType;
use Veron\CoreBundle\Entity\Article;
class ArticleController extends Controller
{
    public function createAction()
    {
        return $this->processForm(new Article());
    }
    private function processForm(Article $article)
    {
        $em = $this->getDoctrine()->getManager();
        $form = $this->createForm(new ArticleType(), $article, array(
            'csrf_protection' => false
        ));
        $form->bind($this->getRequest());
        if ($form->isValid()) {
            return new Response('Everything ok');
        }
        $view = View::create($form, 400);
        return $this->get('fos_rest.view_handler')->handle($view);
    }
} 
```

如您所见，我还有一个 ArticleType 表单类：

```
namespace Veron\ApiBundle\Form\Type;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
class ArticleType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('title')
            ->add('description')
        ;
    }
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class'        => 'Veron\CoreBundle\Entity\Article',
            'csrf_protection'   => false,
        ));
    }
    public function getName()
    {
        return 'article';
    }
} 
```

问题是什么？在以 XML 或 JSON 格式发送请求时 - 当表单数据未经过验证时 - 我收到错误（由 JMSSerializer 格式化）：

JSON 示例：

```
{"errors":["This value should not be blank."],"children":{"title":{"errors":["This value is too short. It should have 5 character or more."]},"description":{"errors":["This value should not be blank."]}}} 
```

XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<form name="article">
  <errors>
    <entry><![CDATA[This value should not be blank.]]></entry>
  </errors>
  <form name="title">
    <errors>
      <entry><![CDATA[This value should not be blank.]]></entry>
    </errors>
  </form>
  <form name="description">
    <errors>
      <entry><![CDATA[This value should not be blank.]]></entry>
    </errors>
  </form>
</form> 
```

我的第一个问题是：是否有任何自动化方法来更改序列化表单错误的输出？

我也有一个问题，与第一个有关，我想。返回单个对象时，我返回了以下 XML 结构：

```
<article>
    <id>10</id>
    <title>Test article</title>
</article> 
```

返回数组（多篇文章）时，输出为：

```
<result>
    <entry>
        <id>1</id>
        ...
    </entry>
    <entry>
        <id>10</id>
        ...
    </entry>
</result> 
```

第二个问题：如何更改响应 XML/JSON 结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:16:45.793

使用 JMSSerializer 呈现表单错误由此类处理：[https](https://github.com/schmittjoh/serializer/blob/master/src/JMS/Serializer/Handler/FormErrorHandler.php) ://github.com/schmittjoh/serializer/blob/master/src/JMS/Serializer/Handler/FormErrorHandler.php 。你可能会写你自己的。

关于结构，是的，您可以更改它，但是您到底想做什么？您可以查看文档以了解更多信息：http: [//jmsyst.com/libs/serializer/master/reference/annotations](http://jmsyst.com/libs/serializer/master/reference/annotations)（请注意，您也可以使用 xml/yml 配置，但文档更完整注释）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T11:51:03.013

您只需要将注释更改为 xmllist：

```
@Serializer\XmlList(inline = true, entry = "article") 
```

# c++ - 如何强制将常量 C 表达式求值用作 .S 文件中的常量？

> ID：15455830
> 
> 赞同：2
> 
> 时间：2013-03-16T23:13:10.577
> 
> 标签：c++, c, gcc, assembly, macros

我包含的头文件`/usr/include/**/asm`（粗鲁地？）使用简单的 C 表达式来表示与基值的偏移量，即：

```
#define __NR_exit                       (__NR_SYSCALL_BASE+  1) 
```

当然，当我`#include`将它放入我的`.S`文件时，生成的预处理器生成的 asm 会说：

```
start.S|17| Error: garbage following instruction -- `ldr r7,=$(0+1)' 
```

所以，听起来很疯狂，我想我希望 C 预处理器（或汇编器）对宏进行 constexpr 评估，以便它可以实际使用，尽管`+`那里有 C 算术运算符和括号 - 什么是正确的方法去做这个？

请注意，这不是内联汇编，而是一个“行外”`.S`文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:28:58.510

哦，这只是因为有一个错误的美元符号。如果您将其更改为：

```
ldr r7,=__NR_exit 
```

它似乎编译得很好。我猜想`as`在需要常量的位置支持基本算术表达式。

# meteor - 升级到 0.5.9 后不发送 Meteor Collection

> ID：15455839
> 
> 赞同：0
> 
> 时间：2013-03-16T23:15:14.630
> 
> 标签：meteor

出于某种原因，升级到 0.5.9 后，我遇到了服务器端似乎可以正确发送所有内容的问题，但是客户端却说它什么也没收到。

//服务器：

```
Meteor.publish("orders", function (ordersQueryParams) {
    console.log("orders publish: " + JSON.stringify(ordersQueryParams));
    if (this.userId && ordersQueryParams){
        console.log("orders collection: " + Orders.find({"customer._id": this.userId}, ordersQueryParams).count());
        return Orders.find({"customer._id": this.userId}, ordersQueryParams);
    }
}); 
```

//客户：

```
var ordersPreferences = {
                table: {
                    size: 10
                },
                query: {
                    sort: {createdDate:-1},
                    skip : 0,
                    limit : 10
                }
            };
Session.set("ordersPreferences", ordersPreferences);
Meteor.autorun(function(){
   var ordersPreferences = Session.get("ordersPreferences");
   console.log('subscribing to orders');
   Meteor.subscribe("orders", ordersPreferences.query);
} 
```

//两个都：

```
Orders = new Meteor.Collection("orders");
Deps.autorun(function(){
    if (Meteor.isServer)
        console.log("on server orders count is " + Orders.find().count());
    if (Meteor.isClient)
        console.log("on client orders count is " + Orders.find().count());
}); 
```

服务器日志：

```
on server orders count is 26
orders publish: {"sort":{"createdDate":-1},"skip":0,"limit":10}
orders collection: 26 
```

客户端日志：

```
subscribing to orders
on client orders count is 0 
```

为什么服务器说有**26 个**文档，但客户端坚持**0**？

这让我发疯:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:28:41.133

我发现了问题：

我正在“等待”我`Meteor.user()`的可用并且有这个`autorun`：

```
Meteor.autorun(function(handle){
            var ordersPage = new OrdersPage();
            if (Meteor.user()) {
                ordersPage.init();
                ordersPage.autorun();
                handle.stop();
            }
            });
        if (Meteor.user()) {
            return "orders";
        } 
```

一旦`Meteor.user()`找到这个函数就不需要运行了，因此我有了`handle.stop()`. 显然，从 0.5.9 开始`handle.stop()`，不仅立即停止，`autorun`而且还停止了下面的所有内容（包括集合）。

可能是 Meteor 中引入的一个错误......或者可能是一个新功能。

# jquery - 使用 jQuery Tag-it 进行水平滚动

> ID：15455842
> 
> 赞同：0
> 
> 时间：2013-03-16T23:15:17.543
> 
> 标签：jquery, css, tag-it

我正在使用[jQuery Tag-it](https://github.com/aehlke/tag-it)来做我正在做的事情。但是，我不喜欢这样，每当我输入太多标签时，溢出就会出现在我已经输入的标签下方，而不是仅仅将较新的标签附加到我已经输入的任何内容的右侧。

我想要的是将标签始终附加到其他标签的右侧，并允许用户水平滚动以查看新标签。

这是我一直在尝试使用的示例页面：http: [//aehlke.github.com/tag-it/examples.html](http://aehlke.github.com/tag-it/examples.html)

这是我的第一次尝试：

`ul.tagit { height: 40px; overflow-x: auto; }`

第二次尝试：

```
ul.tagit { height: 40px; overflow-x: auto; white-space: nowrap; }
ul.tagit li { display: inline; } 
```

两者似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:43:58.633

你能创造一个小提琴吗？这似乎使用`inline` [http://jsfiddle.net/REGGC/](http://jsfiddle.net/REgGC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T07:41:09.397

来自 btevfik 的代码在作品下找到：http: [//jsfiddle.net/btevfik/qUsG8/](http://jsfiddle.net/btevfik/qUsG8/)

然而，我在这段代码中遇到的问题是，在删除标签时`<ul>`弹出到第二行，并在删除标签时立即再次跳起来。这可以通过 `animate: false` 在 tag-it.js 文件中设置来解决。

# c# - C# 和断点——我们这里有魔术师吗？

> ID：15455845
> 
> 赞同：3
> 
> 时间：2013-03-16T23:16:05.657
> 
> 标签：c#, selenium

我有这个：

```
public static void ByLinkText(string text)
{
    for (var i = 0; i < 50; i++)
    {
        try
        {
            Setup.Driver.FindElement(By.LinkText(text)).Click();
            return;
        }
        catch (Exception)
        {
        }
    }
} 
```

（中间的奇怪代码是 selenium - 让我们跳过它，这里不是这种情况）

好的，所以我有这个`ByLinkText()`方法，你在这里看不到的是，我无限重复这个方法，直到这个中间的东西正确执行，然后再点击它`return`。

所以：这个中间代码没有正确执行，我想知道为什么，那我在做什么？我在 catch 部分放了一个断点。怎么了？什么都没有（并且`ByLinkText()`仍然无限地继续下去！）。

现在，你会告诉我“嘿！中间代码没有扔任何东西！”，但是哦，甜蜜的祝福......中间代码可以做两件事：要么向我扔东西，要么按照它应该的方式做（[provid1](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.html#findElement%28org.openqa.selenium.By%29)和[证明2](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebElement.html#click%28%29) )。

所以最后，这到底是怎么回事？关于断点。只要我在上面设置断点`return`（就在神奇代码之后！），代码就会正确执行！在程序世界中，断点如何修复我的应用程序！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:21:09.470

当断点使您的应用程序运行时，这意味着您的代码可能存在时间问题。每当您在断点处停止时，停止都会引入延迟，这可能会让其他处理继续进行而不会出错。

这就是为什么你有时会看到`Thread.Sleep(N);`到处乱扔代码。那是一个程序员举起他/她的手臂说“我不知道。只要在里面放一个睡眠。”

事实上，试一试。放一个 Thread.Sleep(3000); 断点在哪里，看看会发生什么。我从不建议这是解决方案，但它可能是对理论的一个很好的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T00:42:38.843

我认为这与硒的关系比你想象的要多。看看隐式和显式等待查找元素。

[http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp)

要尝试的另一件事是将 IWebElement 结果保存到临时变量中，进入小睡眠状态，然后单击它。有时浏览器 ui 无法像 selenium 发出命令那样快速处理命令。

```
var el = Setup.Driver.FindElement(By.LinkText(text));
Thread.Sleep(750);
el.Click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:21:35.507

你在这里重新发明轮子。Selenium 可以为您执行此方法：

[http://selenium.googlecode.com/git/docs/api/dotnet/html/AllMembers_T_OpenQA_Selenium_Support_UI_WebDriverWait.htm](http://selenium.googlecode.com/git/docs/api/dotnet/html/AllMembers_T_OpenQA_Selenium_Support_UI_WebDriverWait.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T00:47:01.267

尝试添加对 System.Diagnostics.Debugger.Break() 的调用。或者将 exception.ToString() 结果写入控制台。

# dotnetnuke - 热毛巾 (HotTowellete) 作为 DotNetNuke 模块

> ID：15455851
> 
> 赞同：1
> 
> 时间：2013-03-16T23:16:51.313
> 
> 标签：dotnetnuke, hottowel

有没有人尝试过使用 HotTowel（或 Hotowelte）创建 DNN 模块？我创建了一个模块，但立即收到有关虚拟目录等的错误，但我认为这只是冰上一角。

任何想法都会受到欢迎。

谢谢，大卫

# python - 如何使用 PyGraphviz 在无向图的边缘上添加和显示权重？

> ID：15455855
> 
> 赞同：2
> 
> 时间：2013-03-16T23:17:48.353
> 
> 标签：python, python-2.7, graphviz, pygraphviz

```
import pygraphviz as pgv
A = pgv.AGraph()
A.add_node('Alice')
A.add_node('Emma')
A.add_node('John')
A.add_edge('Alice', 'Emma')
A.add_edge('Alice', 'John')
A.add_edge('Emma', 'John')
print A.string()
print "Wrote simple.dot"
A.write('simple.dot')  # write to simple.dot
B = pgv.AGraph('simple.dot')  # create a new graph from file
B.layout()  # layout with default (neato)
B.draw('simple.png')  # draw png
print 'Wrote simple.png' 
```

我想为边缘添加权重，这些权重也应该显示在图中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T23:49:49.717

您可以在创建边缘时向边缘添加属性：

```
A.add_edge('Alice', 'Emma', weight=5) 
```

或者您可以稍后设置它们：

```
edge = A.get_edge('Alice', 'Emma')
edge.attr['weight'] = 5 
```

要将文本信息添加到边缘，请给它们一个`label`属性：

```
edge = A.get_edge('Alice', 'Emma')
edge.attr['label'] = '5' 
```

所有属性都在内部存储为字符串，但 GraphViz 将它们解释为特定类型；请参阅[属性文档](http://www.graphviz.org/doc/info/attrs.html)。

# android - 使用 asynctask 加快 android 应用程序启动时间

> ID：15455858
> 
> 赞同：1
> 
> 时间：2013-03-16T23:18:24.267
> 
> 标签：android, android-asynctask

我有一个应用程序，它从两个网络加载广告，并在启动时将 Flash 文件设置为 webview。这使得启动速度太慢，论坛告诉我使用 asynctask。有人可以将此代码设为 asynctask。

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    airpush=new Airpush(getApplicationContext());
    airpush.startPushNotification(false);
    airpush.startIconAd();
    airpush.startDialogAd();
    airpush.startAppWall();

    mWebView = (WebView) findViewById(R.id.webview);

    mWebView.getSettings().setJavaScriptEnabled(true);

    mWebView.getSettings().setPluginsEnabled(true);

    mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); 

    mWebView.setBackgroundColor(Color.parseColor("#000000"));

    mWebView.loadUrl("file:///android_asset/game.swf");

    AdView adView = (AdView)this.findViewById(R.id.adView);
    adView.loadAd(new AdRequest()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:40:42.630

花一点时间来理解一个架构的架构对`AsyncTask`你来说比让别人简单地为你做一个架构会更有帮助。

AsyncTask 实际上是一个相当简单的扩展和使用类。以最简单的形式，AsyncTask 可以是在后台运行的代码（脱离 UI 线程——这是导致锁定的原因），但设置为允许一些代码在后台运行，一些代码在之前执行/after，以及一些在必要时作为进度更新执行的代码。

您将需要创建自己的扩展 AsyncTask 的类，如下所示。您的任务将采用三个参数。第一个将传递给`doInBackground`在后台运行的函数，第二个是可以传递给进度更新函数的参数类型，第三个是传递给`onPostExecute`在 UI 线程上运行的 fn的类型后台功能完成后。在下面的简单示例中，我不会包含要传递给后执行函数或进度更新函数的类型，因此它们将是 Void 类型。

```
 private class YourTask extends AsyncTask<byte[], Void, Void> {

     protected Long doInBackground(byte[]... data) {
         //get the array
         byte[] array = data[0];

         //do something with it.
         HERE IS WHERE YOU RUN YOUR CODE IN THE BACKGROUND THAT IS TAKING TOO LONG ON THE UI THREAD

         //return null because this type needs to match the last type for returning to the postexec fn
         return null;
     }

 } 
```

当您想运行您的任务时，您可以调用以下命令：

```
new YourTask().execute(someByteArray); 
```

因此，您通常可以将花费很长时间的代码粘贴到该`doInBackground`函数中，但您必须小心，因为它不在 UI 线程上，并且某些代码确实必须在 UI 线程上运行。

我建议做一些分析，看看具体是什么代码阻塞了你的 UI 线程，然后使用 AsyncTask 在后台运行它。您可以通过在 Eclipse 中使用 DDMS 并使用方法分析来做到这一点。另一种方法是使用`Debug`类并`Debug.startMethodTracing("tracefilename");`在您想要开始时调用`Debug.stopMethodTracing();`. 您可以[在此处阅读更多相关信息](http://developer.android.com/tools/debugging/debugging-tracing.html)。但是，您的代码确实加载了一个 url ( `mWebView.loadUrl`)，所以我认为这可能是一个很大的瓶颈！

就像附录一样，如果您想要更深入的 AsyncTask 示例，这里是[这个有用文档](http://developer.android.com/reference/android/os/AsyncTask.html)中的一个 I C&Pd ：

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

上面的示例中的代码既可以举例说明后台任务期间 UI 上的更新进度，也可以传递一个参数，该参数随后由 UI 线程运行后执行 fn 使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:44:48.123

我不能只是让你的代码成为一个，`AsyncTask`但我可以给你一个例子和一些帮助。这是一个例子`AsyncTask`

```
public class TalkToServer extends AsyncTask<String, String, String> {
@Override
protected void onPreExecute() {
    super.onPreExecute();
}

@Override
protected void onProgressUpdate(String... values) {
    super.onProgressUpdate(values);

}

@Override
protected String doInBackground(String... params) {
//do your work here
    return something;
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
       // do something with data here-display it or send to mainactivity 
```

}

`doInBackground()`如果您需要更新`UI`您在其他方法中所做的，您将放入的所有网络内容。完成网络内容后，您可以`UI`在`onPostExecute()`.

这就是您调用任务的方式

```
TalkToServer myAsync = new TalkToServer() //can add params if you have a constructor
myAsync.execute() //can pass params here for `doInBackground()` method 
```

如果它是您的内部类，`MainActivity`那么它将可以访问`MainActivity`. 如果它是一个单独的类，那么您可以传递`context`给构造函数，例如

```
TalkToServer myAsync = new TalkToServer(this); 
```

并创建一个构造函数来接受`Context`和您想要的任何其他参数

我强烈建议您阅读下面的文档并确保您了解它的工作原理。也许开始时要了解的最重要的事情是它`doInBackground()`不会在 上运行，`UI`因此您不想尝试`Views`在此处更新任何内容，而是在其他`AsyncTask`方法中或通过将数据传递回并在`MainActivity`那里更新 [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# python - ImportError：没有名为 httplib2 的模块

> ID：15455861
> 
> 赞同：9
> 
> 时间：2013-03-16T23:18:48.627
> 
> 标签：python, google-app-engine, importerror, httplib2

我有一个 Python 2.7 GAE 应用程序，它已经具有很多功能。现在我想与 Google API 集成。

在我在 Mac OSX 上运行的 IDE (PyCharm) 中，我在我的应用程序的主程序中添加了以下几行：

```
import httplib2
pass 
```

当我命令单击“httplib2”时，IDE 在编辑器面板中打开“httplib2-0.8-py2.7.egg/httplib2/ **init.py** ”，因此 IDE 显然知道 httplib2 在哪里。但是运行该应用程序，我得到了标题中显示的错误。

为了进一步测试，我在上面显示的两个语句上都设置了断点，然后在调试模式下运行应用程序。当它到达导入语句时，我立即单击“恢复程序”图标。

然后控制台显示：

```
ImportError: No module named httplib2 
```

然后程序循环。也就是说，它不会终止，但它永远不会到达“通过”语句。

所以 IDE 似乎知道“httplib2”在哪里，但 Python 似乎不知道。任何有关如何使“导入 httplib2”成功的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T23:22:20.357

`httplib2`不是 Python 自带的标准库，而是外部开发的可选包。如果您希望它在 Google App Engine 上可用，则必须将其包含在您的应用程序中。

# java - BigDecimal 精度问题？

> ID：15455862
> 
> 赞同：0
> 
> 时间：2013-03-16T23:18:50.630
> 
> 标签：java, precision, bigdecimal, trailing

我正在编写一个程序，我必须在其中重复乘以 2 `BigDecimal`。

第 27 次迭代后，我得到：

`0.905225895893387921845435055445776361046057346344145563957027726`

使用此数字的任何进一步计算都会`(BigDecimal * 0.182365681285)`导致尾随零。所以下一次迭代返回： `0.905225895893387921845435055445776361046057346344145563957027726000000000000`

之后的迭代返回： `0.905225895893387921845435055445776361046057346344145563957027726000000000000000000000000`

ETC..

* * *

所以我想知道这是否是由于`BigDecimal`.

任何帮助表示赞赏

编辑：我被要求发布我的代码。我可以复制粘贴我拥有的几页，但这是迄今为止我所拥有的非常准确的表示：

```
BigDecimal range = new BigDecimal(0.0012440624293146346);
for(int i = 0; i < 50 ; i++){
    low = low.multiply(range);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:31:57.440

multiply 方法创建一个 BigDecimal，它的比例等于第一个操作数的比例 + 第二个操作数的比例，即使这会导致尾随零。要去除尾随零，请使用... [stripTrailingZeros()](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#stripTrailingZeros%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:32:16.990

我在模拟尾随零时发现了一种情况。

```
BigDecimal bd = BigDecimal.valueOf(0.5);
BigDecimal a = BigDecimal.valueOf(1 << 20).divide(BigDecimal.valueOf(1000000));
for (int i = 0; i < 20; i++) {
    System.out.println(a);
    a = a.multiply(bd);
} 
```

注意：BigDecimal 默认不假定您要去除尾随零

```
1.048576
0.5242880
0.26214400
0.131072000
0.0655360000
0.03276800000
0.016384000000
0.0081920000000
0.00409600000000
0.002048000000000
0.0010240000000000
0.00051200000000000
0.000256000000000000
0.0001280000000000000
0.00006400000000000000
0.000032000000000000000
0.0000160000000000000000
0.00000800000000000000000
0.000004000000000000000000
0.0000020000000000000000000 
```

没有理由你应该得到不应该存在的零，除非你每次都将转换为 BigDecimal 的双精度值相乘。

# windows - Powershell 设置盖子关闭操作

> ID：15455864
> 
> 赞同：14
> 
> 时间：2013-03-16T23:19:08.910
> 
> 标签：windows, powershell, wmi

我想自动设置 Windows 7 在我的工作笔记本电脑上合上盖子时执行的操作，因为每次我登录时都会通过 GPO 重置。

我知道我可以在批处理脚本中使用 powercfg 命令来实现这一点：

```
powercfg -setacvalueindex 5ca83367-6e45-459f-a27b-476b1d01c936 0
powercfg -setdcvalueindex 5ca83367-6e45-459f-a27b-476b1d01c936 0 
```

但是，这是尝试学习一些 powershell 的好借口。我的第一次尝试需要 10 多秒才能运行。

在运行时和代码的清洁度方面，我如何改进以下内容。解决以下问题的惯用 powershell 方式是什么？

```
$DO_NOTHING = 0

$activePowerPlan = Get-WmiObject -Namespace "root\cimv2\power" Win32_PowerPlan | where {$_.IsActive}
$rawPowerPlanID = $activePowerPlan | select -Property InstanceID
$rawPowerPlanID -match '\\({.*})}'
$powerPlanID = $matches[1]

# The .GetRelated() method is an inefficient approach, i'm looking for a needle and this haystack is too big. Can i go directly to the object instead of searching?
$lidCloseActionOnACPower = $activePowerPlan.GetRelated("win32_powersettingdataindex") | where {$_.InstanceID -eq "Microsoft:PowerSettingDataIndex\$powerPlanID\AC\{5ca83367-6e45-459f-a27b-476b1d01c936}"}
$lidCloseActionOnBattery = $activePowerPlan.GetRelated("win32_powersettingdataindex") | where {$_.InstanceID -eq "Microsoft:PowerSettingDataIndex\$powerPlanID\DC\{5ca83367-6e45-459f-a27b-476b1d01c936}"}

$lidCloseActionOnACPower | select -Property SettingIndexValue
$lidCloseActionOnACPower.SettingIndexValue = $DO_NOTHING
$lidCloseActionOnACPower.put()

$lidCloseActionOnBattery | select -Property SettingIndexValue
$lidCloseActionOnBattery.SettingIndexValue = $DO_NOTHING
$lidCloseActionOnBattery.put() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-07T18:11:55.923

我想做同样的事情并得到完全相同的问题。最后，我发现您需要在命令行中插入优于您要修改的注册表项：

```
powercfg -setacvalueindex 5ca83367-6e45-459f-a27b-476b1d01c936 0
powercfg -setdcvalueindex 5ca83367-6e45-459f-a27b-476b1d01c936 0 
```

应该变成：

```
powercfg -setacvalueindex 381b4222-f694-41f0-9685-ff5bb260df2e 4f971e89-eebd-4455-a8de-9e59040e7347 5ca83367-6e45-459f-a27b-476b1d01c936 0
powercfg -setdcvalueindex 381b4222-f694-41f0-9685-ff5bb260df2e 4f971e89-eebd-4455-a8de-9e59040e7347 5ca83367-6e45-459f-a27b-476b1d01c936 0 
```

只需将其放入 BAT 文件中，您就可以开始了！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T17:24:12.937

老实说，我看不出有什么理由不应该使用简单工作的工具...... ;) 不管怎样：使用 WMI 时，尽可能多地向左过滤通常是个好主意。在这里应该没什么区别，但有时差异很大。这就是我使用 WMI 的方式：

```
$Name = @{
    Namespace = 'root\cimv2\power'
}
$ID = (Get-WmiObject @Name Win32_PowerPlan -Filter "IsActive = TRUE") -replace '.*(\{.*})"', '$1'
$Lid = '{5ca83367-6e45-459f-a27b-476b1d01c936}'
Get-WmiObject @Name Win32_PowerSettingDataIndex -Filter "InstanceId LIKE '%$Id\\%C\\$Lid'" | 
    Set-WmiInstance -Arguments @{ SettingIndexValue = 0 } 
```

更高级的 WQL 查询可能有更好的方法，这与您所做的几乎相同，只是稍作修改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-17T08:27:08.873

试试 WMI 加速器：

```
$class = ([wmi] '\root\cimv2\power:Win32_PowerSettingDataIndex.InstanceID="Microsoft:PowerSettingDataIndex\\{8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c}\\DC\\{5ca83367-6e45-459f-a27b-476b1d01c936}"')
$class.SettingIndexValue = 0
$class.Put() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-31T13:35:32.180

[我在快速更改笔记本电脑上的“盖子”电源设置上](https://web.archive.org/web/20200318054030/https://gallery.technet.microsoft.com/scriptcenter/Quickly-change-the-lid-b78eb77d)找到了这个脚本。要求同意使用条款。适用于 W10。

```
@echo off 
set debug=1 
::************************* 
:: Script Name: lid.cmd 
:: author: Stephen D Arsenault 
:: Creation Date: 2013-september-07 
:: Modified Date: 2013-september-07 
:: Description:    Changes the lid action to sleep or do nothing 
:: parameters:     - on: sets lid action to do nothing 
::        - off: sets lid action to sleep 
::************************* 

echo Getting current scheme GUID 
::store the output of powercfg /getactivescheme in %cfg% 
for /f "tokens=* USEBACKQ" %%a in (`powercfg /getactivescheme`) do @set cfg=%%a 
if %debug%==1 echo Current %cfg% 

::trim power config output to get GUID 
set trimcfg=%cfg:~19,36% 
if %debug%==1 echo %trimcfg% 

::accepts arguments 
if %1==off set newVal=001 
if %1==OFF set newVal=001 
if %1==on set newVal=000 
if %1==ON set newVal=000 

::make power scheme change 
powercfg /setdcvalueindex %trimcfg% 4f971e89-eebd-4455-a8de-9e59040e7347 5ca83367-6e45-459f-a27b- 

476b1d01c936 %newVal% >nul 2>&1 

powercfg /setacvalueindex %trimcfg% 4f971e89-eebd-4455-a8de-9e59040e7347 5ca83367-6e45-459f-a27b- 

476b1d01c936 %newVal% >nul 2>&1 

if %errorlevel%==1 echo "Invalid Parameters" 
if %errorlevel%==1 pause 
if %errorlevel%==1 echo %date% %time% Invalid Parameters: %1 >>C:\tools\lid.log 
echo %date% %time% %1 >>C:\tools\lid.log 

::apply changes 
powercfg /s %trimcfg% 
```

**注意**：该脚本包含对`c:\tools`. 这些引用仅用于记录，因此您可以安全地将它们注释掉或将它们修改为您的文件结构。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-17T14:01:59.007

这一点 PowerShell 确实会更改注册表设置，但不会改变我的笔记本电脑在合上盖子时的行为方式。Using`powercfg`与此 WMI 对象执行相同的操作。

显然，注册表子组`PowerButtons and Lid`有 2 组不同的注册表项。

此脚本和 中的相同命令将其中的`powercfg`此子组更改`Power Options >> Advanced Settings`为`Do Nothing`（或`Sleep`，或`Hibernate`，或您设置的任何选项编号`0 - 3`），但在实际控制面板设置`Change what the power buttons do`中`Change what closing the lid does`不受影响。控制面板中的设置实际上决定了操作，至少对于这个子组而言。

如果我使用`powercfg`上面写的或类似的 PS 脚本，我实际上`Change Plan Settings`可以获得使显示器变暗（或其他）所需的行为。我只是找不到任何`Power Buttons and Lid`对子组有用的东西。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-22T23:54:01.507

我在 Windows 8.1 中看到的是，当针对电源方案更改盖子操作时，该电源方案必须**既是活动的又是首选的电源方案**。主动电源方案可以通过 PowerCfg 设置，首选电源方案可以通过注册表设置。

这是一个 Powershell 脚本来更改它们和盖子操作：

```
#Enable High performance
$powerScheme = "High performance"

#Find selected power scheme guid
$guidRegex = "(\{){0,1}[a-fA-F0-9]{8}-([a-fA-F0-9]{4}-){3}[a-fA-F0-9]{12}(\}){0,1}"
[regex]$regex = $guidRegex
$guid = ($regex.Matches((PowerCfg /LIST | where {$_ -like "*$powerScheme*"}).ToString())).Value

#Change preferred scheme
$regGuid = "{025A5937-A6BE-4686-A844-36FE4BEC8B6D}"
$currentPreferredScheme = Get-ItemProperty -Path Registry::HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ControlPanel\NameSpace\$regGuid -Name PreferredPlan 
if ($currentPreferredScheme.PreferredPlan -ne $guid) {
    Set-ItemProperty -Path Registry::HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ControlPanel\NameSpace\$regGuid -Name PreferredPlan -Value $guid
    Write-Host -ForegroundColor Green "Preferred scheme successfully changed. Preferred scheme is now '$powerScheme'." 
} else {
    Write-Host -ForegroundColor Yellow "Preferred scheme does not need to be changed. Preferred scheme is '$powerScheme'." 
}

#Change active scheme
$currentActiveScheme = PowerCfg /GETACTIVESCHEME
if ($currentActiveScheme | where {$_ -notlike "*$guid*"}) {
    PowerCfg /SETACTIVE $guid
    Write-Host -ForegroundColor Green "Power scheme successfully changed. Current scheme is now '$powerScheme'." 
} else {
    Write-Host -ForegroundColor Yellow "Power scheme does not need to be changed. Current scheme is '$powerScheme'." 
}

#Do not sleep when closing lid on AC
PowerCfg /SETACVALUEINDEX $guid SUB_BUTTONS LIDACTION 000
Write-Host -ForegroundColor Green "No action when closing lid on AC." 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-20T21:42:46.277

带有所有别名的 Powercfg：

```
powercfg -setacvalueindex scheme_current sub_buttons pbuttonaction 0 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-16T17:35:10.897

我只是想在当前的 Windows 上复制它，而旧的解决方案将不再起作用（CIM 中不提供“激活”方法，并且尝试使用激活方法应用 WMI 的更改会引发错误，方法未定义)

我最终用来检查当前 PowerPlan (CIM) 上的设置是否正确的代码，并且应用更改的最简单方法似乎是`powercfg.exe`直接的。

未注释的`powercfg`行是别名，因为此设置有别名，但并非所有设置都有别名。

如果您不知道您想要的子组或设置的 GUID，您应该能够检查它们，`powercfg /Qh`这很长，您可能希望在文本文件中查看。

这将运行报告并在文本文件中打开它 `powercfg /Qh > %temp%\CurrentPower Settings.txt && %temp%\CurrentPowerSettings.txt`

下面的这个脚本只是将设置应用于当前的、活动的、电源计划——但如果你直接知道哪个

```
$DesiredValue = 0
$SettingSubGroupID = '4f971e89-eebd-4455-a8de-9e59040e7347'
$SettingGUID       = '5ca83367-6e45-459f-a27b-476b1d01c936'

# Select Current Power Plan
$currentPLan = Get-CimInstance -namespace "root\cimv2\power" -class Win32_powerplan | where {$_.IsActive} 
$schemeID= $currentPLan.InstanceID -replace "^Microsoft:PowerPlan\\{(.*?)}$",'$1'

# Apply Settings to Specific Power Plan by GUID
# $specificPowerPlanID = '8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c'
# $currentPlan = Get-CimInstance -namespace "root\cimv2\power" -class Win32_powerplan | where {$_.InstanceID -match $specificPowerPlanID} 
# $schemeID= $currentPLan.InstanceID -replace "^Microsoft:PowerPlan\\{(.*?)}$",'$1'

# Optionally Activate this specific Power Plan
# powercfg -SetActive $specificPowerPlanID

$currPLanLidCLoseSettings = Get-CimAssociatedInstance -InputObject $currentPLan -ResultClassName 'win32_powersettingdataindex' | where {$_.InstanceID -match $SettingGUID} 
$improperSettings = $currPLanLidCLoseSettings | where {$_.settingIndexValue -ne $DesiredValue}

If ($improperSettings) {
    Write-Verbose -Verbose "Found $(@($improperSettings).Count) settings in current power plan that do not match. Fixing"
    # Aliases are taken from 'powercfg /Aliases'
    # SubGroup GUID Alias SUB_BUTTONS = 4f971e89-eebd-4455-a8de-9e59040e7347 
    # SubGroup GUID Alias LIDACTION   = 5ca83367-6e45-459f-a27b-476b1d01c936 

    powercfg -SETACVALUEINDEX $schemeID SUB_BUTTONS LIDACTION $DesiredValue
    powercfg -SETDCVALUEINDEX $schemeID SUB_BUTTONS LIDACTION $DesiredValue
    # powercfg -SETACVALUEINDEX $schemeID $SettingSubGroupID $SettingGUID$SettingGUID $DesiredValue
    # powercfg -SETDCVALUEINDEX $schemeID $SettingSubGroupID $SettingGUID $DesiredValue

    Write-Verbose -Verbose "New Values are below" 
    Get-CimAssociatedInstance -InputObject $currentPLan -ResultClassName 'win32_powersettingdataindex' | where {$_.InstanceID -match $SettingGUID} 

} 
else {
    Write-Verbose -Verbose "All settings are already correct" 
} 
```

# lazy-loading - Entity Framework 5 循环延迟加载导致OutOfMemoryException

> ID：15455866
> 
> 赞同：2
> 
> 时间：2013-03-16T23:19:19.057
> 
> 标签：lazy-loading, json.net, entity-framework-5, automapper

我对 EF 5 和循环引用的延迟加载有疑问。

下图代表我的模型。 ![在此处输入图像描述](../Images/f27bc09637ddaf29c3fbc982d8ec0216.png)

主要问题在于 Model 和 ModelProperties 类之间，因为 Model 包含 IEnumerable 导航属性，而 ModelProperty 包含 Model 导航属性。

所以这个设计导致下面的情况 ![在此处输入图像描述](../Images/aa184d7231da8d20da8cd75b729b1737.png)

您可以访问全尺寸图片[http://tinypic.com/r/2vskuxl/6](http://tinypic.com/r/2vskuxl/6)

正如您可以想象的那样，这会导致非常大的问题，OutOfMemory 异常。

我能找到的唯一解决方案是禁用延迟加载并使用其他方法。但是延迟加载非常简化我们的工作。我希望有一个配置或一个属性来帮助我加载只有两个级别的关系和延迟加载。

有什么办法可以做到这一点？

**更新：** 关于 Julie Lerman 的请求，这里是 EF 的视觉模型。我强调了导致问题的主要关系。 [您也可以在http://tinypic.com/r/30v15pg/6](http://tinypic.com/r/30v15pg/6)![在此处输入图像描述](../Images/6a56fba44d9184a0eb0d85b27f1a527c.png) 访问全尺寸

**更新 2：** 这是模型定义。

```
public class Model {
        public int ModelID { get; set; }
        public int BrandID {
            get;
            set;
        }
        public virtual Brand Brand { get; set; }
        public string Logo { get; set; }
        public string Name { get; set; }
        public virtual ICollection<ModelProperty> ModelProperties {
            get;
            set;
        }
}

public class ModelProperty {

    public int ModelPropertyID {
        get;
        set;
    }

    public virtual int PropertyDefinitionID {
        get;
        set;
    }

    public virtual PropertyDefinition PropertyDefinition {
        get;
        set;
    }

    public virtual int ModelID {
        get;
        set;
    }

    public virtual Model Model {
        get;
        set;
    }

    public bool IsContainable {
        get;
        set;
    }

    public bool HasFilterDefinition {
        get;
        set;
    }

    public virtual ICollection<ModelPropertyValue> ModelPropertyValues {
        get;
        set;
    }

    public virtual ICollection<ModelPropertyMatchingFilter> ModelPropertyMatchingFilter {
        get;
        set;
    }
} 
```

ModelProperty 还有一个实体配置。

```
 public class ModelPropertyEntityTypeConfiguration : EntityTypeConfiguration<ModelProperty> {
        public ModelPropertyEntityTypeConfiguration() {
            HasKey(p => p.ModelPropertyID);

            HasRequired(p => p.PropertyDefinition).WithMany(s => s.ModelProperties).HasForeignKey(s => s.PropertyDefinitionID).WillCascadeOnDelete(false);
            HasRequired(p => p.Model).WithMany(s => s.ModelProperties).HasForeignKey(s => s.ModelID).WillCascadeOnDelete(false);
            HasMany(p => p.ModelPropertyValues).WithRequired(s => s.ModelProperty).HasForeignKey(s => s.ModelPropertyID).WillCascadeOnDelete(true); 
            HasMany(p => p.ModelPropertyMatchingFilter).WithRequired(s => s.ContainerModelProperty).HasForeignKey(s => s.ContainerModelPropertyID).WillCascadeOnDelete(false);
            ToTable("dbo.ModelProperties");
        }
    } 
```

**更新 3：** 我不确定，但 Automapper 也会导致这种情况。因为 Entity Framework Profile 告诉成千上万的 Autommaper 方法在运行时被调用。

**更新 4：** 这是 EFProf 堆栈跟踪： ![在此处输入图像描述](../Images/f8c1d919dc962b55d36ef2ed331b19f9.png) 您可以访问更大的版本[http://tinypic.com/r/21cazv4/6](http://tinypic.com/r/21cazv4/6)

**更新 5** 您可以在此处查看示例项目：[https](https://github.com/bahadirarslan/AutomapperCircularReference) ://github.com/bahadirarslan/AutomapperCircularReference 在示例中，您可以通过快速观看轻松查看无限循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:28:54.277

感谢更新。你的模特看起来不错。它肯定知道这只是一个 1:* 关系。拉迪斯拉夫（像往常一样）是正确的。LL 不会导致问题...除了在序列化期间的一个地方。您是否有机会在服务中使用您的代码？使用常规延迟加载，只有您明确提及的属性才会延迟加载。但是在序列化过程中，序列化“提及”了每个属性，因此它只是在整个图形中不断加载和加载属性，并导致循环依赖问题。对于服务，我们必须在返回数据之前关闭延迟加载（使用 context.configuration.lazyloadingenabled=false）。因此，在 service 方法中，您可以预先加载、延迟加载或显式加载来获取图表，然后在返回结果之前禁用延迟加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:15:03.280

您应该禁用延迟加载以绕过代理对象，或者您应该将所需的内容作为 DTO 返回。首选使用 DTO，因为它隐藏了您的域的详细信息

# apache - Apache 将 localhost 重定向到 localhost/abc/def/

> ID：15455868
> 
> 赞同：0
> 
> 时间：2013-03-16T23:19:32.550
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, yii

我想在 apache 中将“localhost/”映射到“localhost/abc/def/”。我应该如何编辑 .htaccess 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T02:14:22.243

If you want to redirect just this one URL, use this simple [`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteEngine on
RewriteRule ^$ /abc/def/ [R,L] 
```

If you want to move the whole site instead, you can use [`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)

```
Redirect / /abc/def/ 
```

# c++ - 使用类型名时，外部类无法看到内部类？

> ID：15455871
> 
> 赞同：0
> 
> 时间：2013-03-16T23:19:41.003
> 
> 标签：c++, nested, intellisense, visibility, typename

有没有人遇到过这种情况并找到了解决方法？还是我做错了什么？如果我尝试访问外部类 intellisense 中的头节点或尾节点，则表示它们没有成员。对不起，如果它有点乱，我已经解决了一段时间了。

编辑：我尝试过使用 MS VS 2010 和 2012

```
#pragma once

#include <string>
using namespace std;

template <typename ItemType>
class LinkedArrayList
{
public:
    /*************************************
            Inner Class
    *************************************/
    class Node 
    {
    public:
        Node(void){};
        Node(Node* pNode, Node* nNode, int limit)
        {
            prevNode = pNode;
            nextNode = nNode;
            capacity = limit;
            size = 0;

            if(capacity != 0)
                items = new ItemType[capacity];
        };
        ~Node(void)
        { 
            delete(items);
        };
        Node* nextNode;
        Node* prevNode;
        ItemType* items;
        int size;
        int capacity;
    private:
    };

    /*************************************
            Declarations
    *************************************/
    int numOfNodes;
    int arrayCapacity;
    Node* head;
    Node* tail;

    /*************************************
            Functions
    *************************************/

    LinkedArrayList(void)
    {
    };
    LinkedArrayList(int capacity)
    {
        head = new Node(NULL, NULL, 0);
        tail = new Node(NULL, NULL, 0);
        arrayCapacity = capacity;
        numOfNodes = 0;
    };

    ~LinkedArrayList(void)
    {
    }; 
```

当我尝试输入`head->`或`tail->`左下角的提示显示智能感知没有可用成员时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:39:29.867

默认情况下，a 的成员`class`是私有的。要使它们易于访问，请使用关键字`public`。

```
class X
{
public:
    X() {}
    ~X() {}
    // rest of the public stuff
private:
    // private stuff
}; 
```

内部类可以完全访问外部类的私有成员，而不是其他方式。

不要太在意智能感知所说的内容；它通常很有帮助，但有时是错误的。编译器是由微软的更好的程序员编写的，所以如果你写的东西可以编译，请尝试一下。

# actionscript-3 - 嵌入字体使 TextField 不可见

> ID：15455872
> 
> 赞同：0
> 
> 时间：2013-03-16T23:19:42.060
> 
> 标签：actionscript-3, flash, actionscript, fonts, embed

我不明白为什么当我使用嵌入字体时我的文本字段不显示：

```
[Embed(source="../resources/fonts/h55.ttf", fontName="h55", mimeType="application/x-font", unicodeRange =
'U+0020-U+0040,U+0041-U+005A,U+005B-U+0060,U+0061-U+007A,U+007B-U+007E')]
public static const h55embed:Class;

public function animate():void
{
        var myformat:TextFormat = new TextFormat('h55embed',24);
        myformat.color = 0xffffff;
        myformat.align="center";

        var text:TextField = new TextField();

        text.embedFonts = true; // very important to set
        text.text = 'my text';
        text.setTextFormat(myformat);

        text.autoSize = TextFieldAutoSize.LEFT;
        text.x = (this.stage.width/2) - (text.width/2);
        text.y = this.stage.height - text.height - 20;

        this.stage.addChild(text);

} 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T01:17:31.817

`fontName`创建TextFormat时不需要使用相同的内容吗？

```
var myformat:TextFormat = new TextFormat('h55',24); 
```

还可以尝试在您的嵌入元标记中使用 embedAsCFF

这适用于我的应用程序：

```
[Embed(source = "../../../../Knights Quest.ttf", fontName="Knights", mimeType = 'application/x-font', embedAsCFF = "false")]
public static const KNIGHTS:Class; 
```

# java - 我正在尝试创建一个计算器，但遇到了一些问题

> ID：15455873
> 
> 赞同：-1
> 
> 时间：2013-03-16T23:20:00.487
> 
> 标签：java, calculator

我遇到的问题是我不知道如何制作 +、-、/ 和 * 按钮来保存我之前输入的数字，然后在我按下 = 按钮时使用该数字。我也无法让 = 按钮识别我按下的四个按钮中的哪个按钮，以便当我按下 - 按钮时它会分轨，而不是相乘。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Calculator extends JFrame implements ActionListener{

    JPanel row1 = new JPanel();
    JTextField display = new JTextField("0");
    Font font = new Font("Calibri", Font.PLAIN, 24);

    JPanel row2 = new JPanel();
    JButton c = new JButton("C");

    JPanel row3 = new JPanel();
    JButton num7 = new JButton("7");
    JButton num8 = new JButton("8");
    JButton num9 = new JButton("9");
    JButton divide = new JButton("/");

    JPanel row4 = new JPanel();
    JButton num4 = new JButton("4");
    JButton num5 = new JButton("5");
    JButton num6 = new JButton("6");
    JButton multiply = new JButton("*");

    JPanel row5 = new JPanel();
    JButton num1 = new JButton("1");
    JButton num2 = new JButton("2");
    JButton num3 = new JButton("3");
    JButton minus = new JButton("-");

    JPanel row6 = new JPanel();
    JButton num0 = new JButton("0");
    JButton dot = new JButton(".");
    JButton equals = new JButton("=");
    JButton plus = new JButton("+");

    public Calculator(){
    super("Calculator");
    setSize(450,275);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    GridLayout layout = new GridLayout(6,1);
    setLayout(layout);

    display.setFont(font);
    display.setEnabled(false);
    GridLayout layout1 = new GridLayout(1,1);
    row1.setLayout(layout1);
    row1.add(display);
    add(row1);

    c.addActionListener(this);
    c.setFont(font);
    row2.setLayout(layout1);
    row2.add(c);
    add(row2);

    num7.setFont(font);
    num8.setFont(font);
    num9.setFont(font);
    divide.setFont(font);
    num7.addActionListener(this);
    num8.addActionListener(this);
    num9.addActionListener(this);
    divide.addActionListener(this);
    GridLayout layout2 = new GridLayout(1,4);
    row3.setLayout(layout2);
    row3.add(num7);
    row3.add(num8);
    row3.add(num9);
    row3.add(divide);
    add(row3);

    num4.setFont(font);
    num5.setFont(font);
    num6.setFont(font);
    multiply.setFont(font);
    num4.addActionListener(this);
    num5.addActionListener(this);
    num6.addActionListener(this);
    multiply.addActionListener(this);
    row4.setLayout(layout2);
    row4.add(num4);
    row4.add(num5);
    row4.add(num6);
    row4.add(multiply);
    add(row4);

    num1.setFont(font);
    num2.setFont(font);
    num3.setFont(font);
    minus.setFont(font);
    num1.addActionListener(this);
    num2.addActionListener(this);
    num3.addActionListener(this);
    minus.addActionListener(this);
    row5.setLayout(layout2);
    row5.add(num1);
    row5.add(num2);
    row5.add(num3);
    row5.add(minus);
    add(row5);

    num0.setFont(font);
    dot.setFont(font);
    equals.setFont(font);
    plus.setFont(font);
    num0.addActionListener(this);
    dot.addActionListener(this);
    equals.addActionListener(this);
    plus.addActionListener(this);
    row6.setLayout(layout2);
    row6.add(num0);
    row6.add(dot);
    row6.add(equals);
    row6.add(plus);
    add(row6);

    setVisible(true);
    }

    public void actionPerformed(ActionEvent e){
        String button = e.getActionCommand();
        if(button.equals("C")){
            display.setText("0");
        }
        if(button.equals("7")){
            int num = 7;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("8")){
            int num = 8;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("9")){
            int num = 9;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("4")){
            int num = 4;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("5")){
            int num = 5;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("6")){
            int num = 6;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("1")){
            int num = 1;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("2")){
            int num = 2;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("3")){
            int num = 3;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
        if(button.equals("0")){
            int num = 0;
            int prevNum = Integer.parseInt(display.getText());
            display.setText("" + prevNum + num);
        }
    }

    public static void main(String[] args){
        Calculator frame = new Calculator();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:31:03.953

您可以使用该程序中的逻辑：

```
package com.nkb.calci;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class SimpleCalculatorActivity extends Activity {
    /** Called when the activity is first created. */
    EditText disp;
    Button b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,bplus,bminus,binto,bby,bdot,bclear,bequals;
    float op1,op2;
    char op='\0';
    int state=1,decimalPoint=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    b0=(Button) findViewById(R.id.button0);
    b1=(Button) findViewById(R.id.button1);
    b2=(Button) findViewById(R.id.button2);
    b3=(Button) findViewById(R.id.button3);
    b4=(Button) findViewById(R.id.button4);
    b5=(Button) findViewById(R.id.button5);
    b6=(Button) findViewById(R.id.button6);
    b7=(Button) findViewById(R.id.button7);
    b8=(Button) findViewById(R.id.button8);
    b9=(Button) findViewById(R.id.button9);
    bplus=(Button) findViewById(R.id.buttonplus);
    bminus=(Button) findViewById(R.id.buttonminus);
    binto=(Button) findViewById(R.id.buttoninto);
    bby=(Button) findViewById(R.id.buttonby);
    bdot=(Button) findViewById(R.id.buttondot);
    bclear=(Button) findViewById(R.id.buttonclear);
    bequals=(Button) findViewById(R.id.buttonequals);
    disp=(EditText) findViewById(R.id.disp_result);

    b0.setOnClickListener(b0Listener);
    b1.setOnClickListener(b1Listener);
    b2.setOnClickListener(b2Listener);
    b3.setOnClickListener(b3Listener);
    b4.setOnClickListener(b4Listener);
    b5.setOnClickListener(b5Listener);
    b6.setOnClickListener(b6Listener);
    b7.setOnClickListener(b7Listener);
    b8.setOnClickListener(b8Listener);
    b9.setOnClickListener(b9Listener);
    bplus.setOnClickListener(bplusListener);
    bminus.setOnClickListener(bminusListener);
    binto.setOnClickListener(bintoListener);
    bby.setOnClickListener(bbyListener);
    bdot.setOnClickListener(bdotListener);
    bclear.setOnClickListener(bclearListener);
    bequals.setOnClickListener(bequalsListener);
    }
    private View.OnClickListener b0Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("0");
        }
    };
    private View.OnClickListener b1Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("1");
        }
    };
    private View.OnClickListener b2Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("2");
        }
    };
    private View.OnClickListener b3Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("3");
        }
    };
    private View.OnClickListener b4Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("4");
        }
    };
    private View.OnClickListener b5Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("5");
        }
    };
    private View.OnClickListener b6Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("6");
        }
    };
    private View.OnClickListener b7Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("7");
        }
    };
    private View.OnClickListener b8Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("8");
        }
    };
    private View.OnClickListener b9Listener = new View.OnClickListener() {
        public void onClick(View v) {
            disp.append("9");
        }
    };
    private View.OnClickListener bplusListener = new View.OnClickListener() {
        public void onClick(View v) {
            if(disp.getText().toString().equals(""));
            else if(state==1) {
                op1=Float.parseFloat(disp.getText().toString());
                op='+';
                state++;
                disp.setText("");
            }
            else {
                op2=Float.parseFloat(disp.getText().toString());
                op1=Float.parseFloat(perform(op,op1,op2));
                disp.setText("");
                op='+';
                state++;
                decimalPoint=0;
            }
        }
    };
    private View.OnClickListener bminusListener = new View.OnClickListener() {
        public void onClick(View v) {
            if(disp.getText().toString().equals(""));
            else if(state==1) {
                op1=Float.parseFloat(disp.getText().toString());
                op='-';
                state++;
                disp.setText("");
            }
            else {
                op2=Float.parseFloat(disp.getText().toString());
                op1=Float.parseFloat(perform(op,op1,op2));
                disp.setText("");
                op='-';
                state++;
                decimalPoint=0;
            }
        }
    };
    private View.OnClickListener bintoListener = new View.OnClickListener() {
        public void onClick(View v) {
            if(disp.getText().toString().equals(""));
            else if(state==1) {
                op1=Float.parseFloat(disp.getText().toString());
                op='*';
                state++;
                disp.setText("");
            }
            else {
                op2=Float.parseFloat(disp.getText().toString());
                op1=Float.parseFloat(perform(op,op1,op2));
                disp.setText("");
                op='*';
                state++;
                decimalPoint=0;
            }
        }
    };
    private View.OnClickListener bbyListener = new View.OnClickListener() {
        public void onClick(View v) {
            if(disp.getText().toString().equals(""));
            else if(state==1) {
                op1=Float.parseFloat(disp.getText().toString());
                op='/';
                state++;
                disp.setText("");
            }
            else {
                op2=Float.parseFloat(disp.getText().toString());
                op1=Float.parseFloat(perform(op,op1,op2));
                disp.setText("");
                op='/';
                state++;
                decimalPoint=0;
            }
        }
    };
    private View.OnClickListener bdotListener = new View.OnClickListener() {
        public void onClick(View v) {
            if(!disp.getText().toString().equals("")) {
                disp.append(".");
                decimalPoint=1;
            }
        }
    };
    private View.OnClickListener bclearListener = new View.OnClickListener() {
        public void onClick(View v) {
            op='\0';
            state=1;
            disp.setText("");
            decimalPoint=0;
        }
    };
    private View.OnClickListener bequalsListener = new View.OnClickListener() {
        public void onClick(View v) {
            if(state!=1) {
                op2=Float.parseFloat(disp.getText().toString());
                disp.setText(perform(op,op1,op2));
                op='\0';
                state=1;
                decimalPoint=0;
            }
        }
    };
    String perform(char op,float op1,float op2) {
        switch(op) {
            case '+' : return Float.toString(op1+op2);
            case '-' : return Float.toString(op1-op2);
            case '*' : return Float.toString(op1*op2);
            case '/' : try {
                            return Float.toString(op1/op2);
                        }
                        catch(ArithmeticException e) {
                            return "Division by zero error...";
                        }
        }
        return null;
    }
} 
```

这是一个 android java 程序，可以满足您的要求。您可以轻松地在您的 java 程序中实现逻辑。

# sql - SQL 运行总计 - 添加“缺失”值

> ID：15455874
> 
> 赞同：1
> 
> 时间：2013-03-16T23:20:04.620
> 
> 标签：sql, sql-server, sql-server-2008-r2

SQL Server 2008 R2

示例数据：

```
ownership  exact_opening_date
Type1       3/1/2002
Type1       1/4/2004
Owned       3/1/2002
Owned       3/31/2003
Owned       6/30/2004 
```

我想按所有权类型逐年获得运行总数，但即使该年没有值，也要保持运行总数：

```
ownership open_date run_total
Type 1    2002      1
Type 1    2003      1  <-- here's my trouble
Type 1    2004      2 
```

我可以得到运行总计，但是当我在那一年实际上没有值时，我不确定如何包括该运行总计。

这就是我现在正在做的事情：

```
WITH cte (
ownership
,open_date
,ct
)
AS (
    SELECT ownership
        ,year(exact_opening_date) AS open_date
        ,count(*) AS ct
    FROM studio_master
    GROUP BY ownership
        ,year(exact_opening_date)
    )
SELECT d1.ownership
    ,d1.open_date
    ,sum(d2.ct) AS run_total
FROM cte d1
LEFT JOIN cte d2 ON d1.open_date >= d2.open_date
    AND d1.ownership = d2.ownership
GROUP BY d1.ownership
    ,d1.open_date
    ,d1.ct
ORDER BY d1.ownership
    ,d1.open_date 
```

我如何在那里获得那些“失踪”的总年数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T23:28:35.983

您可以使用年份列表来加入反对。

您可以使用此问题的已接受答案中的“Itzik 的交叉连接 CTE 方法”作为年份列表的来源：[SQL, Auxiliary table of numbers](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers)

# java - 如何在 Spring 中自动装配业务对象

> ID：15455878
> 
> 赞同：0
> 
> 时间：2013-03-16T23:20:17.213
> 
> 标签：java, spring, design-patterns, spring-mvc

我正在遵循控制器 -> 服务 -> DAO 模式。当我调用 DAO 实现时，我得到一个 DTO/Data 对象。然后将其传递给服务层，将其各自的业务对象和数据对象组合在一起。像这样：

```
public User getUserById(int id) {
    return new User(userDAO.getUserById(id));
}

class User {
    private UserDTO userDTO;

    public User(UserDTO userDTO) {
        this.userDTO = userDTO;
    }
} 
```

我想做的是将所有业务逻辑包装在业务类中，但我需要额外的依赖项。例如，我希望能够做这样的事情：

```
//... some code

User user = userService.getByUserId(1);

user.delete(); // this should delete the user from the database 
```

为了让我以这种方式删除用户，我需要将 UserService 自动装配到业务类中，但这不起作用，因为我在用户服务中手动实例化了 User 类。

```
class User {
    @Autowired
    private UserService userService; // this won't work since I call instantiate User myself, ie. new User()
    private UserDTO userDTO;

    public User(UserDTO userDTO) {
        this.userDTO = userDTO;
    }

    public boolean delete() {
        userService.deleteByUserId(userDTO.getId());
    }
} 
```

有没有我可以遵循的模式来让我做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:29:49.777

我认为将业务类作为 DTO 对象的成员并不是一个好的设计。更合适的方法是在业务类中使用您的删除方法。这将有助于松散耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:31:29.643

我认为您可以使用`@Configurable`注释来做到这一点，尽管这确实不是 Spring 应该如何工作的。它会给您的应用程序增加大量开销，并使调试变得更加困难。

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-atconfigurable](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-atconfigurable)

# c# - Visual Basic 2010，Picturebox 资源 && 变量？

> ID：15455879
> 
> 赞同：1
> 
> 时间：2013-03-16T23:20:19.820
> 
> 标签：c#, variables, picturebox, string-concatenation

我已经尝试找到解决方案，但无济于事。我相信我想要的是字符串连接......

我的资源文件夹中有一个变量`"pictureid=face2"` ，我有一张名为`"face2.jpg"`. 在表格上我有一个图片框。

这是我无法工作的代码

```
pictureBox1.Image = Properties.Resources.(pictureid + ".jpg"); 
```

我哪里错了？该错误表示需要一个标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:36:58.153

`Image`需要一个[图像或其后代](http://msdn.microsoft.com/en-us/library/k7e7b2kd.aspx)（位图和元文件对象），如果您将图像添加到项目资源中，您可以在编码时使用它*（编辑：我应该澄清 - 要做到这一点，请转到项目>属性>资源选项卡和“添加资源”。不要只是把它放在文件夹中）*：

```
pictureBox1.Image = Properties.Resources.face2; 
```

如果您不想在项目中包含图像，可以使用[ImageLocation](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.imagelocation.aspx)，它将接受字符串而不是对象：

```
pictureBox1.ImageLocation = pictureid + ".jpg"; //assuming you include it in the same folder as the exe 
```

你也可以这样做：

```
Image face2 = Image.FromFile(pictureid + ".jpg");
pictureBox1.Image = face2; 
```

# css - css 选择伪元素动画

> ID：15455880
> 
> 赞同：7
> 
> 时间：2013-03-16T23:20:26.697
> 
> 标签：css, css-animations

为什么该`animation`属性不适[`::selection`](https://developer.mozilla.org/en-US/docs/Web/CSS/::selection)用于 CSS 中的选择器？

## 基本测试用例：

```
@keyframes frames{ 
  50%{ color:red } 
}
@-webkit-keyframes frames{ 
  50%{ color:red } 
}

::selection        { background:#EEE;         animation:0.4s frames infinite; }
::-moz-selection   { background:#EEE;         animation:0.4s frames infinite; }
::-webkit-selection{ background:#EEE; -webkit-animation:0.4s frames infinite; }
```

```
<h2>Selected text should be animated:</h2>
CSS3 animations make it possible to animate transitions from one CSS style configuration to another. Animations consist of two components, a style describing the CSS animation and a set of keyframes that indicate the start and end states of the animation's style, as well as possible intermediate waypoints along the way.
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T20:17:55.320

我写了 Tab Atkins，他回答：

> 一般来说，大多数浏览器在伪元素上运行动画都有问题。我们正在逐步解决这些问题，但工作缓慢，因为伪元素在浏览器中处理起来相当复杂。
> 
> 最重要的是， ::selection 伪元素是所有 CSS 中*最* 复杂的伪元素。它是如此复杂，我们在规范中明确地取消定义它，直到我们弄清楚如何以一种有效的方式实际指定它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T23:40:37.257

[我在动画](http://www.w3.org/TR/css3-animations/)上看到的大部分内容是：

> 适用于：所有元素，::before 和::after 伪元素

哪个不暗示其他伪元素或状态？

# c - 找出函数的定义位置

> ID：15455886
> 
> 赞同：2
> 
> 时间：2013-03-16T23:21:21.297
> 
> 标签：c, mobile, open-source, embedded

我正在使用开源的 Mobile C（基于 C 的移动代理平台）进行编程。我正在使用打印进行调试，因为我无法使用 gdb，因为我使用了 C 解释器（Embedded Ch）。

问题是有些函数我找不到它们的定义位置。例如，有一个函数 agent_queue_RemoveIndex 在源代码中的多个地方使用，但我找不到定义的位置（我查看了所有定义文件，我已经完成了整个源代码的 grep -R代码，谷歌搜索...）。当我执行 grep -RI 时，只能找到对函数的调用，而不是定义。似乎没有 agent_queue_RemoveIndex 定义，但它必须是因为 Mobile C 是开源代码并且该功能有效。

对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T23:47:13.523

它在这个[文件](http://www.mobilec.org/documentation/v2.0.7/api/html/ap__queue__template_8h_source.html)中定义。

见第 64 行：

```
int name##_RemoveIndex(name##_p name, int index); 
```

对于`name##`您需要挖掘链接文件和文档的定义。

# c++ - 如何以英寸或厘米为单位准确测量具有已知 DPI 的鼠标的鼠标移动

> ID：15455888
> 
> 赞同：2
> 
> 时间：2013-03-16T23:21:39.347
> 
> 标签：c++, winapi, distance, dpi, raw-input

我有一个罗技 G500 游戏鼠标，它的全 DPI 为 5700。

我正在尝试用 C++ 编写一个程序，该程序可以准确地测量鼠标在物理单位中的水平移动，即。厘米或英寸。

我通过 WM_INPUT 消息使用 windows API 和 windows 原始输入来获取鼠标的原始移动变化。

然后我假设通过 WM_INPUT 报告的 1 个移动单位是 1/5700 英寸，当我跟踪鼠标的净移动时，我想我可以执行一个简单的计算来产生净物理移动：

距离（英寸）= total_movement_from_wminput / dpi；// 在这种情况下 dpi = 5700

不幸的是，计算似乎并不准确。我可以从鼠标垫上的物理测量中看出，鼠标移动约 6 英寸，计算得出的值约为 5 英寸半（每英寸损失约 1/2 英寸）。

我哪里错了？我在控制面板中将鼠标设置为 5700DPI，它的实际 DPI 会不会小于这个值？我假设通过 WM_INPUT 的 1 个单位变化是 1/dpi 英寸的物理运动不正确吗？

有没有人对我如何才能做到这一点有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T23:45:36.010

马克，

似乎问题可能在于您移动鼠标的速度比 Windows 事件`WM_INPUT`处理它的速度快。例如，假设鼠标在一帧中移动了 2 个像素。您将损失 1/5700 英寸（在您的情况下），因为对于处理的**一个** `WM_INPUT`事件，您将移动**两个**像素。

要解决此问题，您应该检查每次将 WM_INPUT 消息发送到程序时鼠标移动*了多少像素。*您要做的是创建一个`RAWINPUTDEVICE` 变量并设置结构，以便它具有有关鼠标的信息。

以下代码注册了`RAWINPUTDEVICE`，因此可以在`WM_INPUT`.

```
RAWINPUTDEVICE Rid[1];
Rid[0].usUsagePage = HID_USAGE_PAGE_GENERIC;
Rid[0].usUsage = HID_USAGE_GENERIC_MOUSE; 
Rid[0].dwFlags = RIDEV_INPUTSINK;   
Rid[0].hwndTarget = hWnd;
RegisterRawInputDevices(Rid, 1, sizeof(Rid[0]); 
```

以下代码实际使用`Rid`变量 2 确定自上次`WM_INPUT`启动以来鼠标移动了多少像素。

```
case WM_INPUT: 
{
    UINT dwSize = 40;
    static BYTE lpb[40];

    GetRawInputData((HRAWINPUT)lParam, RID_INPUT, 
                    lpb, &dwSize, sizeof(RAWINPUTHEADER));

    RAWINPUT* raw = (RAWINPUT*)lpb;

    if (raw->header.dwType == RIM_TYPEMOUSE) 
    {
        int xPosRelative = raw->data.mouse.lLastX; // Could be 1, or could be more than 1
        int yPosRelative = raw->data.mouse.lLastY; // Could be 1, or could be more than 1!
    } 
    break;
} 
```

请注意，此代码与 msdn 上关于此主题的代码相同（链接如下）。

您现在可以拥有某种类型的全局变量，它具有鼠标的 x 位置和 y 位置（以像素为单位）。然后，您只需将这些变量除以 DPI，就可以得到从将全局变量设置为 0 时的英寸偏移量。

* * *

一个*更简单*的方法是处理`WM_MOUSEMOVE`事件。它可以很容易地获得鼠标的确切位置（当然，以像素为单位）。使用它，您可以从起始位置的像素值中减去它。

例子：

> DPI = 5700。
> 
> 初始位置 = (100px, 300px)。
> 
> 3 秒后的位置 = (500px, 400px)。
> 
> 在这 3 秒内移动的英寸量 = ( (500px - 100px)/5700 英寸, (400px - 300px)/5700 英寸)
> 
> **一般规则**：S 秒后移动的英寸数 = (inital_pixels_x - final_pixels_x)/DPI 英寸
> 
> 水平方向，(initial_pixels_y - final_pixels_y)/DPI 垂直方向英寸
> 
> 这里，final_pixels_x 是鼠标在 s 秒后的 x 位置，而 final_pixels y 是 s 秒后的 y 位置。

* * *

总结一下你做错了什么，你错误地假设每个`WM_INPUT`事件都意味着鼠标移动了 1 个像素。

如果我出于某种原因误解了这个问题，并且您知道您已经移动了正确数量的像素，请发表评论，我将尽我所能尝试修复我的答案。但是，我仍然建议使用`WM_MOUSEMOVE`而不是，`WM_INPUT`因为它专门用于鼠标，它应用“指针加速”，您可以在最底部的链接上阅读。

谢谢你的提问，tcs08

[使用 WM_INPUT 进行鼠标输入的 msdn 代码和解释](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418864(v=vs.85).aspx#WM_INPUT)

[WM_MOUSEMOVE鼠标输入的msdn代码及说明](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418864(v=vs.85).aspx#WM_MOUSEMOVE)

# ruby-on-rails - 将搜索表单链接到特定 URL

> ID：15455889
> 
> 赞同：0
> 
> 时间：2013-03-16T23:21:40.747
> 
> 标签：ruby-on-rails, forms, search

我正在努力实现以下目标：

当用户在表单中输入 5 位 ID 时`www.something.com`，用户将被重定向到`www.something.com/obtain/(5 digit ID)`。

我知道手动输入 url`www.something.com/obtain/(5 digit ID)`会触发所需的操作，但我如何创建一个这样做的表单呢？

无论如何我可以做到这一点`<%= form_tag .... %>`吗？

耙路线具有以下条目

> 获取 /obtain/:pid(.:format) products#obtain {:id=>/\d+/}

目前在控制器中

```
 def obtain
    scrapy = Scraper.new

    @product = scrapy.scrape((params[:pid]))

    if @product
      redirect_to @product, notice: 'Product successfully updated'
    elsif
      redirect_to root_path, notice: 'Invalid product requested'
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:42:27.907

如果您正在提交表单，您将有一个函数或一些代码来处理输入，即：至少提取 request.query 之类的：

```
$var = request.query("ID") 
```

因此，在该代码执行完它的任务后，您所需要的只是一行用于重定向，例如：

```
whatever.redirect("www.something.com/obtain/" & $var 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:57:40.233

在您的视图中创建一个表单：

```
<%= form_tag({:controller=>"products", :action=>"obtain"}, :method => "get") do %>
        <%= text_field_tag(:pid) %>
        <%= submit_tag "Search with PID" %>
<% end %> 
```

我不知道您的`obtain`操作是否由 a 触发`get`，但如果它不只是将其更改为触发的任何内容（发布，放置）。

# django - 带有子字段的 Django 自定义字段

> ID：15455892
> 
> 赞同：3
> 
> 时间：2013-03-16T23:22:19.490
> 
> 标签：django, django-models, python-2.7, django-admin, django-geoposition

我正在关注[这篇](http://blog.elsdoerfer.name/2008/01/08/fuzzydates-or-one-django-model-field-multiple-database-columns/ "http://blog.elsdoerfer.name/2008/01/08/fuzzydates-or-one-django-model-field-multiple-database-columns/") [文章](http://djangotricks.blogspot.com/2008/09/clarification-for-confusion-creating.html "http://djangotricks.blogspot.com/2008/09/clarification-for-confusion-creating.html")，每 1 个字段有 2 列，所以我的自定义字段代码是这样的：

```
class GeopositionField(models.Field):
    description = "A geoposition (latitude and longitude)"

    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = 42
        super(GeopositionField, self).__init__(*args, **kwargs)

    def contribute_to_class(self, cls, name):
        self.name = name

        position_longitude = DecimalField(decimal_places=6,max_digits=9,default=0,blank=True)
        cls.add_to_class("position_longitude",position_longitude)

        position_latitude = DecimalField(decimal_places=6,max_digits=8,default=0,blank=True)
        cls.add_to_class("position_latitude",position_latitude)

        setattr(cls,"position_longitude",position_longitude)
        setattr(cls,"position_latitude",position_latitude) 
```

我的模型类是**Request**：

```
class Request(models.Model):
    person = models.ForeignKey(Person)
    position = GeopositionField(null = False,default = 0) 
```

（我正在修改[django-geoposition](https://github.com/philippbosch/django-geoposition "https://github.com/philippbosch/django-geoposition")）到目前为止，我的表中只有 position_latitude 和 position_longitude （而不仅仅是像原来那样的“位置”）

前

```
+--------------------+---------------+------+-----+---------+----------------+
| Field              | Type          | Null | Key | Default | Extra          |
+--------------------+---------------+------+-----+---------+----------------+
| id                 | int(11)       | NO   | PRI | NULL    | auto_increment |
| person_id          | int(11)       | NO   | MUL | NULL    |                |
| creation_date      | datetime      | NO   |     | NULL    |                |
| position           | varchar(50)   | NO   |     | NULL    |                |
+--------------------+---------------+------+-----+---------+----------------+ 
```

后

```
+--------------------+---------------+------+-----+---------+----------------+
| Field              | Type          | Null | Key | Default | Extra          |
+--------------------+---------------+------+-----+---------+----------------+
| id                 | int(11)       | NO   | PRI | NULL    | auto_increment |
| person_id          | int(11)       | NO   | MUL | NULL    |                |
| creation_date      | datetime      | NO   |     | NULL    |                |
| position_longitude | decimal(9,6)  | NO   |     | NULL    |                |
| position_latitude  | decimal(8,6)  | NO   |     | NULL    |                |
+--------------------+---------------+------+-----+---------+----------------+ 
```

这很好，但问题出现在 django admin 和 shell 中，因为如果我创建一个“请求”对象然后我尝试打印“位置”属性，我得到一个错误，说“位置”属性没有t 存在：

```
>>> from main.models import Request
>>> x = Request()
>>> x.position
Traceback (most recent call last):
 File "<console>", line 1, in <module>
AttributeError: 'Request' object has no attribute 'position'
>>> 
```

如果我在`__init__`Request 类的方法中设置 position 属性，它会起作用，但这不是想法。

所以，回到真正的问题，当我尝试在管理面板中显示它时，如果我明确调用“位置”字段 django 会引发错误，奇怪的是它适用于“位置纬度”和“位置经度”

```
class RequestAdminForm(forms.ModelForm):
    class Meta:
        model = Request
        # fields = ['position_latitude','position_longitude] <-- this works !
        fields = ['position'] # <-- this returns error = Unknown field(s) (position) specified for Request 
```

当 RequestAdminForm 在字段列表中只有“位置”时，有没有办法显示“位置纬度”和“位置经度”？这就是我想要达到的目标。为什么会发生“未定义属性”问题？

# fonts - 将 TTC 字体转换或提取为 TTF - 如何？

> ID：15455895
> 
> 赞同：50
> 
> 时间：2013-03-16T23:22:29.623
> 
> 标签：fonts, truetype, cjk, opentype

我已经花了 8 个多小时试图让[`STHeiti Medium.ttc.zip`](https://code.google.com/p/kingfont/downloads/list)字体在 Windows 上工作。

但我不能让它工作。有人可以让它在 Windows 上运行吗？

如果是，请分享操作步骤。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-01-29T02:59:25.480

假设 Windows 并不真正知道如何处理 TTC 文件（老实说，我觉得这很奇怪），如果您使用[fontforge](http://fontforge.org/) ，您可以以一种简单的方式“拆分”组合字体。

步骤是：

1.  下载文件。
2.  解压缩它（例如，`unzip "STHeiti Medium.ttc.zip"`）。
3.  加载 Fontforge。
4.  用 Fontforge 打开它（例如，`File > Open`）。
5.  Fontforge 会告诉您，在这个特定的 TTC 文件中“打包”了两种字体（至少截至 2014-01-29）并要求您选择一种。
6.  字体加载后（可能需要一段时间，因为这个字体很大），你可以通过菜单让 Fontforge**生成**TTF 文件`File > Generate Fonts...`。

对其他字体重复加载 4--6 的步骤，您将可以轻松使用您的 TTF。

请注意，我在上面强调了**生成**而不是**保存**：**保存**字体将创建一个 Fontforge 特定 SFD 格式的文件，这可能对你没有用，除非你想用 Fontforge 开发字体。

如果您想以更程序化/自动的方式来操作字体，那么您可能会对我对类似（但不完全相同）问题的[回答感兴趣。](https://stackoverflow.com/a/7801393/962311)

### 附加物

进一步评论：有些人可能对执行上述拆分（或毕竟使用字体转换器）感兴趣的一个原因是将字体转换为 Web 格式（如[WOFF](https://en.wikipedia.org/wiki/Web_Open_Font_Format)）。这很好，但要小心查看您正在拆分/转换的字体的*许可证*是否允许如此广泛的重新分发。

当然，对于 Free（“as in Freedom”）字体，您无需担心（此类字体最突出的许可证之一是[OFL](https://en.wikipedia.org/wiki/Web_Open_Font_Format)）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-11-27T02:05:49.713

您可以使用[onlinefontconverter.com](http://onlinefontconverter.com/)网站。它工作正常并且有很多输出格式（afm bin cff dfont eot pfa pfb pfm ps pt3 suit svg t42 tfm ttc ttf woff）。我看到的优点之一是它可以一次导出 ttc 中包含的所有字体（非常方便）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-01-05T03:03:38.220

这对我从 Mac OS X 的 .dfont 和 .ttc 文件中提取 TTF 有用：http: [//transfonter.org/ttc-unpack](http://transfonter.org/ttc-unpack)

生成的 TTF 在 Windows 7 中运行良好。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-21T12:29:26.047

如果您有 Mac，最简单的拆分方法是使用 DfontSplitter，可在[https://peter.upfold.org.uk/projects/dfontsplitter](https://peter.upfold.org.uk/projects/dfontsplitter)

他们提供的 Windows 版本不适用于 ttc 文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-07T08:43:03.073

[http://transfonter.org/](http://transfonter.org/)将为您完成这项工作。只需上传您的 .ttc，它就会为您提供一个包含 .ttf 文件中所有字体类型的文件夹。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-20T17:53:46.333

**你不需要任何工具。只需点击几下。**

Windows 10 可以毫无问题地处理 ttc 文件。

您可以双击该文件并像任何 ttf 一样安装它。然后，如果您需要单个 ttf 文件，您可以转到 C:\Windows\Fonts\Font Name 并在那里找到它。如果你不能这样做，我怀疑你有一个损坏的文件。

# sql-server - 商业智能多维数据集和维度

> ID：15455896
> 
> 赞同：2
> 
> 时间：2013-03-16T23:22:34.617
> 
> 标签：sql-server, sql-server-2008, business-intelligence

我必须做些什么来解决这个问题？（我是BI的初学者）

错误

```
Error   3   Internal error: The operation terminated unsuccessfully.        0   0   

Error   4   Errors in the high-level relational engine. The following exception occurred while the managed IDbConnection interface was being used: Login failed for user 'NT Service\MSSQLServerOLAPService'..      0   0   

Error   5   Errors in the high-level relational engine. A connection could not be made to the data source with the DataSourceID of 'Karol s10016 Rafal s10017', Name of 'Karol s10016 Rafal s10017'.        0   0   

Error   6   Errors in the OLAP storage engine: An error occurred while the dimension, with the ID of 'Kampanie Marketingowe', Name of 'Kampanie Marketingowe' was being processed.      0   0   

Error   7   Errors in the OLAP storage engine: An error occurred while the 'Id Kampanie Marketingowe' attribute of the 'Kampanie Marketingowe' dimension from the 'Karol_Rafal_Analysis_Servicies' database was being processed.        0   0   

Error   8   Server: The current operation was cancelled because another operation in the transaction failed. 
```

图片

![在此处输入图像描述](../Images/dfa1564f374d396f014c77c01854fd87.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:36:35.377

根据错误，当您尝试处理多维数据集时，SSAS 服务用户 ( `NT Service\MSSQLServerOLAPService`) 无法连接到数据源。`Karol s10016 Rafal s10017`

确保 SSAS 服务用户可以访问此数据源以防止出现错误。

# ruby-on-rails - Rails 访问 API

> ID：15455902
> 
> 赞同：0
> 
> 时间：2013-03-16T23:23:33.040
> 
> 标签：ruby-on-rails, api, design-patterns

我使用[Httparty](https://github.com/jnunemaker/httparty)访问 COLOURlovers API。但我希望以一种轨道的方式做到这一点。我通过在以下位置创建一个类来管理它`app/models/clover.rb`：

```
require 'httparty'
class Clover
  include HTTParty

  base_uri 'www.colourlovers.com/api' 
```

然后我定义了方法，例如：

```
 def self.random(resource)
    fix_params query
    response = get("/#{resource}/random", { query: query })
    ActiveSupport::JSON.decode(response.body)
  end 
```

然后我查询如下资源：

```
Clover.random :color 
```

它可以完成工作，但我不确定这是解决这个问题的好方法。这种情况有设计模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:02:00.537

我会将http的东西提取到它自己的类/模块中，包括解析响应，然后继承到你的实际模型类中，这样模型只处理资源本身，而不是通信/解析。

# jquery - jQuery .load() 弄乱了我的标签

> ID：15455904
> 
> 赞同：2
> 
> 时间：2013-03-16T23:23:53.960
> 
> 标签：jquery, css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:50:50.690

可能值得复制您的问题并查看响应值的含义？如果您将来可以发现错误并告诉用户，那就太好了。

```
$("#content").load(
    q,
    function(responseContent, responseStatus, responseObject) {
        console.log(responseContent);
        console.log(responseStatus);
        console.log(responseObject);
    }
); 
```

希望有帮助。

# javascript - array.splice 在 javascript 中无法正常工作

> ID：15455905
> 
> 赞同：0
> 
> 时间：2013-03-16T23:24:06.043
> 
> 标签：javascript, arrays, splice

我正在编写一个简单的数独求解器，它采用数字 1-9 的数组，如果该单元格不可能，则将它们设置为 null。一个示例是一个单元格，其中答案只能是 5，因此除 5 之外的所有数字都设置为空。然后，我有一个 clean() 函数，它从数组中删除所有为空的值，但这不能正常工作。原来的数组是这样的。

```
[null,null,null,null,5,null,null,null,null] 
```

洗干净后又回来了

```
[null,null,5,null,null] 
```

javascript代码在这里，网格是数独中的数字网格

```
function mainmethod(){

        var onepos=oneposs();

    }
    function oneposs(){

        var possibs=new Array(1,2,3,4,5,6,7,8,9);
        for (var ycount=0;ycount<=8;ycount++){
            var value=grid[0][ycount];
            var index=possibs.indexOf(value);
            possibs[index]=null;

        }
    //      for(var xcount=0;xcount<=8;xcount++){
    //      var value=grid[xcount][0];
    //      var index=possibs.indexOf(value);
    //      possibs.splice(index,1);
    //  }

        possibs=clean(possibs);
        alert(JSON.stringify(possibs));
    }
    function clean(array){
        for(var i=0;i<=8;i++){
            if(array[i]===null){
                array.splice(i,1);
            }
        }
        return array;
    } 
```

本质上，array.splice 并没有拼接它需要的所有东西，我不知道为什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T23:33:45.827

在迭代时更改数组。尝试这样的事情：

```
function clean(array){
    for(var i=0;i<=8;i++){
        if(array[i]===null){
            array.splice(i--,1);
        }
    }
    return array;
} 
```

索引越`--`低，因为下一个项目将与您要删除的项目处于相同的索引。

此外，作为参数传递的对象和数组是通过引用传递的，因此您不需要返回任何内容。你可以做`clean(possibs);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:31:59.883

那是因为当你“拼接”数组时，索引会改变。也许你可以试试这段代码：

```
function clean(array){
    var x = [];
    for(var i=0;i<array.length;i++){
        if(array[i]!=null){
            x.push(array[i]);
        }
    }
    return x;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T23:50:50.623

试试这个：

```
var array = [null,null,null,null,5,null,null,null,null];
for(var i=0;i<=array.length; ){
    if(array[i] === null){
        array.splice(i,1);
    } else if (array.length < 2) {
        break;
    } else {
        i++;
    }
} 
```

# google-chrome-extension - 关于 Chrome 扩展中的 Web Worker 的问题

> ID：15455906
> 
> 赞同：3
> 
> 时间：2013-03-16T23:24:06.657
> 
> 标签：google-chrome-extension

我在我的扩展程序的背景页面中使用网络工作者。我注意到一些事情并想澄清一下：

1.  可以产生的工人数量限制是多少？我看到我的扩展在大约 125 名工人的某个地方开始崩溃。

2.  我产生了 100 个工人。他们做一些工作并在完成后调用“self.close()”。但是，我认为内存没有被回收。如果我不产生任何工人，扩展使用大约 54MB。如果我生成 100 名工作人员，即使在所有工作人员都终止后，扩展程序仍会继续使用大约 107MB。有什么办法可以释放那段记忆吗？

# node.js - 测试快速响应本地人

> ID：15455911
> 
> 赞同：3
> 
> 时间：2013-03-16T23:24:44.217
> 
> 标签：node.js, testing, express

我正在使用 Express.js 2.5.8。为了减少重复，我希望使用 dynamicHelper 将常用对象传递给视图，而无需在每个路由中显式呈现它们。

我已经查看了在前往视图的途中拦截当地人的方法的来源，但没有取得多大成功。我可以通过检查 app.dynamicViewHelpers 对象来确认它们的存在。但是，我想知道是否有一种不太依赖于实现的方式来实现这一点。

一个理想的解决方案是不知道如何将值和对象传递给视图。无论它们来自 viewHelper、中间件还是路由本身，测试都应该不加修改地通过。无论如何，这就是理想。我会接受其他方法。

我要测试的一个松散示例：

```
app.dynamicHelpers({
  example : function(req, res){
    return "Example Value";
  }
});

app.get('/example', function(req, res){
  res.render('example-view', {
    sample : "Sample Value"
  });
});

// test that example === "Example Value" in the view
// test that sample === "Sample Value" in the view 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:04:48.900

这是一个非常好的问题。我想最好的方法是利用 Express 的视图系统。如果您使用的是 Express 2，它可能如下所示：

```
var express = require('express');
var app = express.createServer();

express.view.compile = function (view, cache, cid, options) {
  // This is where you get the options as passed to the view
  console.log(options);

  return {
    fn: function () {}
  };
};

app.locals({
  passed_via_locals: 'value'
});

app.get('/', function (req, res, next) {
  res.render('index', {
    passed_in_render: 'value',
    layout: false
  });
});

app.listen('./socket');

var http = require('http');

http.get({socketPath: './socket'}); 
```

在 Express 3 中，这变得容易多了：

```
var express = require('express');
var app = new express();

function View() {
  this.path = true;
};
View.prototype.render = function(options, cb) {
  // This is where you get the options as passed to the view
  console.log(options);
};
app.set('view', View);

app.locals({
  passed_via_locals: 'value'
});

app.render('index', {
  passed_in_render: 'value'
}); 
```

# c++ - 无法在 Linux 中运行使用 sfml 的程序

> ID：15455914
> 
> 赞同：1
> 
> 时间：2013-03-16T23:25:01.960
> 
> 标签：c++, linux, sfml

我正在运行 Linux Mint。版本信息如下：

```
$ cat /etc/*-release
DISTRIB_ID=LinuxMint
DISTRIB_RELEASE=12
DISTRIB_CODENAME=lisa
DISTRIB_DESCRIPTION="Linux Mint 12 Lisa" 
```

我通过下载 tar 文件、进入 sfml 文件夹并运行`sudo make install`. 它没有给我任何错误消息，因此假设它安装成功似乎是安全的。

[我编写了本教程](http://www.sfml-dev.org/tutorials/1.6/start-linux.php)中给出的clock.cpp 程序。我使用以下命令编译它：

```
$ g++ -c clock.cpp
$ g++ -o clock clock.o -lsfml-system 
```

它没有给我任何输出，所以我认为编译进行得很好。但是当我尝试运行它时问题就开始了。这是我尝试运行时钟可执行文件的结果：

```
$ ./clock
./clock: error while loading shared libraries: libsfml-system.so.1.6: 
         cannot open shared object file: No such file or directory 
```

我尝试了教程提供的第二个编译选项，同样的事情发生了：

```
$ g++ -c clock.cpp
$ g++ -o clock clock.o -lsfml-graphics -lsfml-window -lsfml-system
./clock: error while loading shared libraries: libsfml-system.so.1.6: 
         cannot open shared object file: No such file or directory 
```

为什么我不能运行程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:05:08.183

您必须为 libsfml 安装开发库：

```
sudo apt-get install libsfml-dev 
```

下一步：

```
apt-get build-dep libsfml 
```

dev 版本的包是必需的，因为头文件是必需的

这样的特殊库通常是用apt安装的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T12:51:34.207

我不知道为什么，但你必须以超级用户身份运行它。

```
sudo ./a.out 
```

# android - 为什么 Android Asset Studio 不生成 ldpi 启动器图标？

> ID：15455915
> 
> 赞同：3
> 
> 时间：2013-03-16T23:25:52.430
> 
> 标签：android, assets, android-icons

这一切都在标题中。[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)似乎没有生成 ldpi 启动器图标。该工具似乎还可以生成 xxhdpi 图标，[Android 启动器图标设计指南中没有提到这些图标](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)

![安卓资产工作室](../Images/d13c4a4dd2de465e5c5cb97fe28e9b40.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T23:36:38.653

我认为如果您还导航到 sdk 中的 res 文件夹，您将找不到 ldpi。

取自 Android Holo Colors Generator 的常见问题解答，但我认为它适用于所有资产工作室工具

为什么不生成低密度（ldpi）？
Android Holo Colors Generator 基于默认的 holo 主题（在 Android 源代码中），它不为低密度设备提供任何图片。此外，ldpi 仅占 Android 市场份额的不到 2%。最后，如果设备在 ldpi 中，它将使用 mdpi 图片。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-09T16:37:14.110

由于 ldpi 设备的市场份额不断减少，Android Asset Studio 在生成图形时不再^针对 ldpi。<<< 这来自创作者的口中（请在[https://plus.google.com/+RomanNurik/posts/dnmfXnKV75R](https://plus.google.com/+RomanNurik/posts/dnmfXnKV75R)的评论中亲自查看）。

但是，您可以通过将修订号添加到 URL 的查询部分来强制网站运行较旧的修订，如下所示：

[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-notification.html?r=9ec980e4a634](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-notification.html?r=9ec980e4a634)

ths **?r=9ec980e4a634**是普通 URL 的新增内容。

^ 以前的修订版 DID 目标 ldpi。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T23:34:35.350

根据[这个](https://plus.google.com/118292708268361843293/posts/ePQya3KsTjW)G+ 帖子：

> Nexus 10 上华丽的屏幕属于 XHDPI 密度桶。在平板电脑上，Launcher 使用上一个密度桶 [0] 中的图标来使它们稍微变大。为了确保您的启动器图标（可以说是您的应用程序最重要的资产）清晰，您需要在 drawable-xxhdpi 或 drawable-480dpi 文件夹中添加一个 144*144px 的图标。

所以这是特定于 Nexus 10 的，并且只与启动器图标相关（一般不是屏幕密度，仍然是 xhdpi）。

关于 ldpi-icon 问题：我想它们只是变得不那么相关了，因为越来越少的设备以 ldpi 密度出售，并且从 mdpi 缩小可能比在您的资源中拥有额外的图像文件更“划算”文件夹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-08T16:52:29.220

android指南的文档（链接[**在这里**](http://developer.android.com/design/style/iconography.html)）说：

> 注意：Android 还支持低密度 (LDPI) 屏幕，但您通常不需要创建此尺寸的自定义资源，因为 Android 会有效地将 HDPI 资源缩小 1/2 以匹配预期大小。

# maven - 在私有 Maven 存储库中找不到我的 jar

> ID：15455917
> 
> 赞同：1
> 
> 时间：2013-03-16T23:26:03.890
> 
> 标签：maven, repository, local, cloudbees

当我在 Jenkins 中运行构建时，它成功了，我也能够部署它。但我在我的 Maven 存储库私有/发布位置找不到我的 jar 文件

[https://repository-ram-cloud.forge.cloudbees.com/release/](https://repository-ram-cloud.forge.cloudbees.com/release/)

这是 Jenkins 控制台输出

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
Projects to build: [MavenProject: com.uhg.jcoe:osa-common:1.0.0 @ /scratch/jenkins/workspace/osa-common build/pom.xml]
[JENKINS] Archiving /scratch/jenkins/workspace/osa-common build/pom.xml to /home/ram-cloud/hudson_home/jobs/osa-common build/modules/com.uhg.jcoe$osa-common/builds/2013-03-16_19-13-30/archive/com.uhg.jcoe/osa-common/1.0.0/osa-common-1.0.0.pom
[JENKINS] Archiving /scratch/jenkins/workspace/osa-common build/target/osa-common-1.0.0.jar to /home/ram-cloud/hudson_home/jobs/osa-common build/modules/com.uhg.jcoe$osa-common/builds/2013-03-16_19-13-30/archive/com.uhg.jcoe/osa-common/1.0.0/osa-common-1.0.0.jar
Waiting for Jenkins to finish collecting data
channel stopped
[cloudbees-deployer] Deploying as (jenkins) to the ram-cloud account 
```

看到它说它已部署到 ram-cloud 帐户，但我看不到它，这就是我的其他项目失败的原因，因为它们有这个 jar 依赖关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:53:42.777

注释混淆解决方案的粗略总结是：

您需要告诉 maven 实际部署工件，以便它们在构建之间可用：

```
maven clean deploy 
```

您的 POM 还需要正确配置 - 根据 [CloudBees Private Maven Repository](http://wiki.cloudbees.com/bin/view/DEV/CloudBees+Private+Maven+Repository)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:13:59.820

您在日志中看到的是 jenkins 归档构建的结果，但这*只是*Jenkins 的一个功能，与 maven 存储库无关。要使此工件可用于其他作业，您需要配置构建后操作“部署到我的 Maven 存储库”并选择“发布”。

# ruby-on-rails - 用于用户注册的带有 Rails 多态关联的表单

> ID：15455919
> 
> 赞同：0
> 
> 时间：2013-03-16T23:26:10.273
> 
> 标签：ruby-on-rails, ruby, polymorphic-associations

我在使用多态关联进行用户注册时遇到了问题。我想显示来自多个多态关联模型的字段，但我不能。

模型类：

```
class User < ActiveRecord::Base
  devise ...

  belongs_to :userable, :polymorphic => true
end

class Advisor < ActiveRecord::Base
  has_one :user, :as => :userable
  attr_accessible :extra
  accepts_nested_attributes_for :user # Idon't know if it is ok
end
class AnotherKingOfUser < ActiveRecord::Base
  #the same..
end 
```

我想为每个特定的用户类型制作一个控制器，所以：

```
class AdvisorsController < ApplicationController
  # GET /advisors/new
  # GET /advisors/new.json
  def new
    # Here is where I'm not sure about what I did. I tried all variants buy any works for me.
    @advisor = Advisor.new
    @advisor.build_user

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @advisor }
    end
  end
end 
```

而我的观点：

```
<%= form_for(@advisor) do |f| %>
  <% if @advisor.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@advisor.errors.count, "error") %> prohibited this advisor from being saved:</h2>

      <ul>
      <% @advisor.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

 <% #f.fields_for :user do |ff| %>
 <% f.fields_for :user_attributes, @advisor.user||User.new do |ff| %>

    <div class="field">
      <%= ff.label :email %><br />
      <%= ff.text_field :email %>
    </div>

    <div class="field">
      <%= ff.label :password %><br />
      <%= ff.text_field :password %>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :bio %><br />
    <%= f.text_field :bio %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

所以在我的浏览器中只出现“bio”字段，但不会出现来自用户模型（设计）的扩展字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:31:20.500

当您在这样的表单中使用关联时（通常`accepts_nested_attributes_for`在您的情况下使用类似），您需要创建对象以便它们显示在表单上。

这意味着在这里，当 rails 构建您的表单时，它会查找其内容`@advisor.user`为空的，因为我猜在您的控制器中您做了类似的事情

```
@advisor = Advisor.new 
```

所以如果你想让用户的字段出现，你需要`build`一个用户

```
@advisor = Advisor.new
@advisor.build_user # this will create a instance of User, but will not persist it 
```

有了那个 rails 会在构建表单时找到用户，然后显示你想要的字段。

我希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:35:17.603

```
class Advisor < ActiveRecord::Base
  has_one :user, :as => :userable
  attr_accessible :extra, :user_attributes
  accepts_nested_attributes_for :user # its ok
end

class AdvisorsController < ApplicationController

  def new
    @advisor = Advisor.new
    # @advisor.build_user   # unnecessary

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @advisor }
    end
  end
end

# view
<%= form_for(@advisor) do |f| %>
  <%= f.fields_for :user_attributes, @advisor.user||User.new do |ff| %>
    <div class="field">
      <%= ff.label :email %><br />
      <%= ff.text_field :email %>
    </div>
    <div class="field">
      <%= ff.label :password %><br />
      <%= ff.text_field :password %>
    </div>
  <% end %>
    ...
<% end %> 
```

# asp.net - 什么是 ASP.NET Web 表单？

> ID：15455928
> 
> 赞同：0
> 
> 时间：2013-03-16T23:27:00.337
> 
> 标签：asp.net, forms, web

问这么简单的问题，我觉得有点傻。

我正在参加我的第一个 Web 编程课程，并且我有一个关于 ASP.NET Web 表单的快速问题。

什么是 ASP.NET Web 表单？

我的理解是，它们是可以从用户那里获取信息，然后在服务器上处理进程信息的网页。处理后，可以通过更改页面的 HTML 将信息显示给用户。

我确实问过我的教授，并被告知 ASP.NET Web 表单只是“从 Page(page?) 类继承”的表单。这个解释让我有点困惑，这就是为什么我现在问这个问题......

我错过了一个基本概念吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:59:16.670

电脑里的一切都是

```
Input -> Processing -> Output 
```

不仅是 asp.net 网络表单。

特别是 asp.net 网页表单，是一种生成网页的方式。这是我能说的最简单的，可以从非常简单到非常复杂，是一种非常强大的语言，它可以做的不仅仅是生成页面。您可以从生成页面开始，然后一点一点地发现 in 的力量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T00:01:47.247

将其视为服务器端脚本，当服务器接收到用户的请求时执行，它执行一些处理并向客户端呈现响应，客户端通常是在浏览器中呈现的 HTML 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T02:59:18.103

Web Form 是一种 Asp.net 网页设计模式。开发人员将其开发为单独的形式。（Home.aspx == 主页）。代码、客户端脚本、服务器脚本、Html、样式表一切都是耦合在一起的。所以它是从头开始开发的。因此，当用户请求主页时，它继承页面类，具有自己的样式、Html、Codebehind 文件。

所有服务器控件都必须出现在一个`<form>`标记内，并且该`<form>`标记必须包含该`runat="server"`属性。该`runat="server"`属性指示应在服务器上处理表单。它还表明服务器脚本可以访问随附的控件：

如需更深入的信息：http: [//msdn.microsoft.com/en-us/library/ms973868.aspx](http://msdn.microsoft.com/en-us/library/ms973868.aspx) [http://www.asp.net/web-forms/what-is-web-forms](http://www.asp.net/web-forms/what-is-web-forms)

# mercurial - 如何在 TortoiseHg Workbench 中查看 Mercurial 提交消息的完整文本

> ID：15455929
> 
> 赞同：5
> 
> 时间：2013-03-16T23:27:09.993
> 
> 标签：mercurial, tortoisehg, tortoisehg-2.0, mercurial-commit

是否可以从 TortoiseHg Workbench 中查看 Mercurial 提交消息的全文。

目前，只有在 Changeset 扩展中暴露的描述列和代码片段似乎显示了提交文本。甚至它们似乎只显示消息的摘要部分。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-05T08:55:16.277

实际上可以折叠完整的提交消息，请参阅下面的屏幕截图如何再次展开它。

![展开前](../Images/251ad36c7d1949381898f0df657eea08.png) ![展开后](../Images/09aedaf99b83152bcc029846be1095e5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:11:21.827

我无法想象，您在 WorkBench 中发现了问题。添加了作为示例的活动长多行提交消息变更集的屏幕截图

![在此处输入图像描述](../Images/7ee04027d65018604c571bb02337a719.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-17T03:15:19.010

是的，

单击查看-> 修订详细信息（或单击人员+白色小文档）图标。

这应该在更改文件列表面板的右侧显示完整的提交消息。

# c - C中的偶数斐波那契数，难题

> ID：15455932
> 
> 赞同：-1
> 
> 时间：2013-03-16T23:27:51.037
> 
> 标签：c

问题：

> 斐波那契数列中的每个新项都是通过添加前两项来生成的。从 1 和 2 开始，前 10 个术语将是：
> 
> 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
> 
> 通过考虑斐波那契数列中值不超过四百万的项，求偶数项之和。

我已经寻找了另一种方法来做到这一点，但我对为什么我的方法不起作用感到困惑。我已经在它下面包含了代码以及我编写的算法过程。无论我选择值 k 的哪个迭代跨度（4000000 或 10），我总是收到相同的答案：4200784。感谢您的帮助。

```
#include <stdio.h>

int main()
{
long int sum;
sum = 0;
long int i;
i = 1;
long int j;
j = 2;
long int k;

while(k<4000000)
{   
    k = i + j;
    if(k%2==0)
        sum +=k;
    i = j;
    j = k;

}
printf("%d",sum);
return 0;
}

//Step 0//For the initial conditions [i][j]=[1][2]
//Step 1//Find the value of i + j.
//Step 2//Find out if the solution is even by dividing by modulus 2.
//Step 3//If even, add the solution to the sum.
//Step 4//Replace the value of i with j, and replace the value of j with the new sum.
//Repeat Steps 1-4 while i + j < 4,000,000
//1, 2, 3, 5, 8, 13, 21, 34 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:32:26.573

我相信你在寻找

```
sum += k; 
```

不是

```
k+=sum; 
```

您还应该解决此问题并将其放在您的 while 循环中

```
k = i + j; 
```

注意：您还应该将 sum 初始化为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T00:19:57.723

你永远不会初始化你的'k'变量。在第一个“while”测试中，“k”的值未定义，因此所有赌注都关闭了。

# android - Android 媒体记录器冻结（锁定）UI 线程

> ID：15455944
> 
> 赞同：1
> 
> 时间：2013-03-16T23:29:09.287
> 
> 标签：android, multithreading, mediarecorder, ui-thread

我正在开发一个 GPS 应用程序，用户可以在其中点击屏幕上的任何位置来录制音频片段，然后在记录时附加到轨道上。我正在使用媒体记录器在我的应用程序中执行此操作，而不是发出隐含的意图。这样，用户可以“无视”操作，如下所示。我编写了两种模式：（1）用户点击和应用程序记录一个简短的、固定的（10 秒）片段；(2) 用户点击启动媒体记录器，然后再次点击停止。

我在 Overlay.onTap 中观察水龙头，并在其自己的线程中运行媒体记录器。代码如下。

这是我的问题，在模式（2）下：第一次点击后，媒体记录器启动正常，但后续点击不会触发 onTap。事实上，在 60 秒的录制过程中，UI 线程似乎完全冻结了。

顺便说一句，我最初在 Activity 中编写了媒体记录器的内容；然后我将其移至后台线程以尝试解决冻结问题，但无济于事。

覆盖代码如下：

```
/**
* DKR: When User has tapped on a media icon,
* The MapView calls us here, giving us the GeoPoint
* (lat and lon) where User tapped. 
*/
@Override
public boolean onTap(GeoPoint tappedGeoPoint, MapView mapview)
{
  return commonOnTap(tappedGeoPoint);
}
//boolean isRecording = false;
 boolean oneTapAudio = false;
 boolean twoTapAudio = true;
 boolean firstTap = false;

 /**
 * Method AsyncOverlay.onTap calls commonOnTap and sends us the GeoPoint of the tap.
  * Send the tapped GeoPoint to each segment object, to see which one has
* the corresponding media waypoint, if any.
 */
 public boolean commonOnTap(GeoPoint tappedGeoPoint)
{
   boolean isLogging = GPSLoggerService.isLogging();
   if ( isLogging )
   {
      if ( oneTapAudio )  // Override so that tap takes User to audio recorder @ InsertNote.addQuickAudio
      {                   // Possibly run addQuickAudio in background thread for greater reliability.
         Intent intent = new Intent(mLoggerMap.getActivity(), InsertNote.class);
         String s = GPStracking.AUTHORITY+"/Request";
         intent.putExtra(s, InsertNote.ONETAPAUDIO);
         mLoggerMap.getActivity().startActivity(intent);
         return true;
         //mLoggerMap.invalidate();
         //InsertNote insert = new InsertNote();
         //insert.addQuickAudio();
      }
      if ( twoTapAudio )
      {
         if ( !firstTap )
         {
            firstTap = true;
            Intent intent = new Intent(mLoggerMap.getActivity(), InsertNote.class);
            String s = GPStracking.AUTHORITY+"/Request";
            intent.putExtra(s, InsertNote.TWOTAPONAUDIO);
            mLoggerMap.getActivity().startActivity(intent);
         }
         else
         {
            firstTap = false;
            Intent intent = new Intent(mLoggerMap.getActivity(), InsertNote.class);
            String s = GPStracking.AUTHORITY+"/Request";
            intent.putExtra(s, InsertNote.TWOTAPOFFAUDIO);
            mLoggerMap.getActivity().startActivity(intent);
         }
         return true;
      }
   }

  boolean handled = false;
  for (SegmentRendering segment : mSegmentRenderersList)
  {
     if (!handled)
     {
        handled = segment.commonOnTap(tappedGeoPoint);
     }
  }
  return handled;
} 
```

活动代码如下：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  this.setVisible(false);
  paused = false;
  isRecording = false;
  mLoggerServiceManager = new GPSLoggerServiceManager(this);

  final Semaphore audioSemaphore = new Semaphore(0);
  mRecordAudioThread = new Thread("audioRecorder")
  {

     @Override
     public void run()
     {
        Looper.prepare();             // Initialize the current thread as a looper.
        mAudioThreadHandler = new Handler();     // Create an Handler to communicate with the Looper.
        audioSemaphore.release(); // the only release in the whole program
        Looper.loop();                // Run the message queue in this thread.
     }
  };
  mRecordAudioThread.start();
  try
  {
     audioSemaphore.acquire();
  }
  catch (InterruptedException e)
  {
     Log.e(TAG, "Failed waiting for a semaphore", e);
  }
 }

@Override
protected void onResume()
{
  int request = 0;
  super.onResume();
  String s = GPStracking.AUTHORITY+"/Request";
  Bundle extras = getIntent().getExtras();
  if (extras != null) request = extras.getInt(s);      
  if ( request  == ONETAPAUDIO || request  == TWOTAPONAUDIO || request  == TWOTAPOFFAUDIO )
  {
     QuickAudioLogic( request );
     return;
  }

  if (mServiceBindAction == null)
  {
     mServiceBindAction = new Runnable()
     {
        @Override
        public void run()
        {
           showDialog(DIALOG_INSERTNOTE);
        }
     };
  }
  ;
  mLoggerServiceManager.startup(this, mServiceBindAction);
}

@Override
protected void onPause()
{
  super.onPause();
  mLoggerServiceManager.shutdown(this);
  paused = true;
  if (mRecorder != null) {
     mRecorder.release();
     mRecorder = null;
 }
}

public void QuickAudioLogic(int request)
{
  mRecorder = new MediaRecorder();
  if ( request == ONETAPAUDIO )  
  {
     if ( !isRecording )
     {
        isRecording = true;
        mDuration = ONETAPDURATION;
        mAudioThreadHandler.post(recordAudioAsync);
        //            QuickAudioAction ( ONETAPDURATION );
     }
     return;
  }
  if ( request == TWOTAPONAUDIO )
  {
     if ( !isRecording )
     {
        isRecording = true;
        mDuration = TWOTAPDURATION;
        mAudioThreadHandler.post(recordAudioAsync);
        //            QuickAudioAction ( TWOTAPDURATION );
     }
     return;
  }
  if ( request == TWOTAPOFFAUDIO )
  {
     if ( isRecording )
     {
        isRecording = false;
        Toast.makeText(this, "Stop recording audio",Toast.LENGTH_SHORT).show();
        mRecorder.reset();
        mRecorder.release();
        mRecorder = null;
        finish();
     }
  }
} 
```

背景（媒体记录器）线程如下：

```
public Runnable recordAudioAsync = new Runnable()
{

  @Override
  public void run()
  {
     String newName;
     Calendar c = Calendar.getInstance();
     newName = String.format( "Audio" + getString( R.string.dialog_filename_default)+".3gpp", c, c, c, c, c, c );
     //newName = String.format("Audio_%tY-%tm-%td_%tH%tM%tS.3gpp", c, c, c, c, c, c);
     File newFile = new File(Constants.getSdCardDirectory(InsertNote.this) + newName);
     newName = newFile.toString();
     android.net.Uri.Builder builder = new Uri.Builder();;
     sUri = builder.scheme("file").appendEncodedPath("/"+newName).build();
     //sUri = Uri.parse(newName);  // store Uri static, so that   
     try {
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mRecorder.setOutputFile(newName);
        mRecorder.setMaxDuration( mDuration );//mDuration = 10000 for one tap or 60000 for two tap mode
        mRecorder.setOnInfoListener(new MediaRecorder.OnInfoListener(){ 
           @Override 
           public void onInfo(MediaRecorder mr, int what, int extra) { 
                 if(what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED ) 
                 {
                    InsertNote.this.mLoggerServiceManager.storeMediaUri(sUri);
                    //setResult(MENU_VOICE, new Intent());
                    //mLoggerMap.invalidate();
                    isRecording = false;
                    Toast.makeText(InsertNote.this, "Timeout recording audio",Toast.LENGTH_SHORT).show();
                    mRecorder.reset();
                    mRecorder.release();
                    finish();
                    //startActivity(new Intent(this.getApplicationContext(), ANOTHERACTIVITY.class)); 
                 } 
              } 
           });
        mRecorder.prepare();
        isRecording = true;
        Toast.makeText(InsertNote.this, "Start recording audio",Toast.LENGTH_LONG).show();
        mRecorder.start();
        //((Button)(findViewById(R.id.record_button))).setText("stop");
     } 
     catch (Exception e) {
        Toast.makeText(InsertNote.this, "Error starting audio recorder.",Toast.LENGTH_SHORT).show();
     }
     return;
  }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:24:04.530

UI 组件只能从 UI 线程修改。删除 toast 消息或尝试将您的线程作为 UI 线程运行。

```
public void run(){
activity.runOnUiThread(new Runnable() {
    @Override
    public void run() {
                    // Things to do
                 }
              });
             } 
```

# c# - 关闭另一个窗口后如何继续运行代码

> ID：15455946
> 
> 赞同：0
> 
> 时间：2013-03-16T23:29:32.317
> 
> 标签：c#, .net, wpf, visual-studio-2010

我有一个预订应用程序，所以当你按下保存时，它会要求输入用户名和密码，如果用户名和密码正确，它会保存预订。但是，当它打开新窗口并且新窗口关闭时，它不会进行保存，一旦窗口关闭，我如何让它进行保存？

这是保存按钮的代码。

```
 private void btnSave_Click(object sender, RoutedEventArgs e)
    {
        if (CheckClashes(Convert.ToDateTime(date_picker.SelectedDate)) == false)
        {

            // tries to see if validation is ok
            if (validate() == true)
            {
                var openLogin = new Login1();
                openLogin.Show();

                if (variables.login == true)
                {
//do save algorithm 
```

这是新窗口检查用户用户名和密码时的代码。

```
 private void submit_Click(object sender, RoutedEventArgs e)
    {
        if (Validate() == true)
        {

            try
            {
               //authenticates user here

                if (hash1 == existingpassword.ToString())
                {
                    variables.login = true;
                    MessageBox.Show("User accepted.");
                    this.Close();
                }
                else
                {
                    MessageBox.Show("Incorrect username or password.");

                    variables.login = false;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:39:24.687

替换`openLogin.Show()`为`openLogin.ShowDialog()`。这将阻塞调用线程，直到登录窗口关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T23:40:28.240

我认为更好的方法是在模态模式下显示表单，如下所示：

```
openLogin.ShowDialog();
if (openLogin.DialogResult == DialogResult.OK)
{
    //save here
} 
```

# java - 随机 5 个不同的数字

> ID：15455952
> 
> 赞同：0
> 
> 时间：2013-03-16T23:30:26.437
> 
> 标签：java

我有这门课，它对我来说很好。它给出5位随机数。我无法实现的是 5 个数字彼此不同，我的意思是在 5 个数字中没有重复数字。

```
import java.util.Random;

public class Test
{

    public int[] dedo()
    {
        Random diceRoller = new Random();
        int[] cifra = new int[5];
        for (int i = 0; i < cifra.length; i++)
        {
            int roll = diceRoller.nextInt(9);
            cifra[i] = roll;
            System.out.print(roll);
        }
        return cifra;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:38:15.487

如果你像这样限制结果，它并不是真的随机，但是一个快速讨厌的方法是`Collections.shuffle()`

```
List<Integer> digits = Arrays.asList(0,1,2,3,4,5,6,7,8,9);
Collections.shuffle(digits);
return digits.subList(0, 4).toArray(); 
```

# kml - 导出到 ArcMap 时未显示 KML 文件中的飞行路径

> ID：15455956
> 
> 赞同：1
> 
> 时间：2013-03-16T23:31:13.297
> 
> 标签：kml, google-earth, arcmap

我是 Google 地球的初学者，如果有人能够帮助我解决我的问题，我将不胜感激。

我有一个在 Google 地球中可以正常打开的 KML 文件（在此处找到：[KML 文件](http://flightaware.com/live/flight/AAL420/history/20130312/0050Z/KDFW/CYYZ/google_earth)。它是一个包含飞行路径的文件，我希望将其导出到 ArcMap 以便对其进行分析。

当我使用此 KML 创建图层文件并在 ArcMap 中打开它时，我只看到起点和终点的两个地标。

是否可以像在 Google 地球中一样显示飞行路径？

预先感谢您的帮助。

最亲切的问候，萨阿德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:48:26.863

我怀疑 ArcMap 不支持[“Google eXtension”命名空间 (gx:)](https://developers.google.com/kml/documentation/kmlreference#kmlextensions)

[我在他们的在线文档](http://resources.arcgis.com/)中没有看到任何参考

如果是这种情况，要显示轨道，您需要将其转换为[LineString](https://developers.google.com/kml/documentation/kmlreference#linestring)

要将 gx:Track 转换为 LineString，在谷歌上快速搜索发现[RouteConverter](http://routeconverter.com/)，它需要一点手动工作。

Google Maps API v3 页面上 RouteConverter 的原始输出： [http](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/FlightAware_AAL420_KDFW_CYYZ_20130312_ls.kml) ://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/FlightAware_AAL420_KDFW_CYYZ_20130312_ls.kml - [在 Google 地图上](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FFlightAware_AAL420_KDFW_CYYZ_20130312_ls.kml&hl=en&sll=38.286842,-88.334385&sspn=20.617514,28.256836&t=m&z=5)

删除了“Marks”文件夹的 Google Maps API v3 页面上的原始输出：http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http: [//www.geocodezip.com/geoxml3_test/FlightAware_AAL420_KDFW_CYYZ_20130312_lsA.kml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/FlightAware_AAL420_KDFW_CYYZ_20130312_lsA.kml) - [在谷歌地图上](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FFlightAware_AAL420_KDFW_CYYZ_20130312_lsA.kml&hl=en&sll=32.824552,-117.108978&sspn=0.691256,0.883026&t=m&z=5)

# opengl-es - 恒定的 3d 操纵器尺寸

> ID：15455958
> 
> 赞同：0
> 
> 时间：2013-03-16T23:31:23.817
> 
> 标签：opengl-es, opengl-es-2.0

我正在尝试将 3d 操纵器添加到我的小型 3d 编辑器中。我设法在正交或透视投影中绘制它们，并使用相机位置和选定的对象距离来确保大小是恒定的。然而，这并不好......（即，如果透视投影中相机的 fov 正在改变操纵器的大小，则不再是恒定的）。

我想要实现的就像在 Blender 中一样，无论 3d 视图/四边形视图投影的投影如何，3d 操纵器始终具有恒定大小。

我已经尝试使用正交投影来绘制操纵器，这确保了操纵器的大小以像素为单位是恒定的，但是当在透视图顶部绘制时，操纵器看起来扭曲并且与透视图 3d 绘图没有“对齐”。

无论 3d 视图绘制的投影类型如何，如何实现始终“对齐”的恒定操纵器尺寸？

# actionscript-3 - 为什么 Flash 在我没有要求的情况下拉伸我的图像？

> ID：15455960
> 
> 赞同：0
> 
> 时间：2013-03-16T23:31:34.003
> 
> 标签：actionscript-3

我正在尝试使用 ActionScript (AS3) 显示图像，而 Flash 一直显示它被拉伸。我该如何阻止它这样做？我玩过宽度、高度、scaleX 和 scaleY，但我无法让它停止拉伸。这是代码：

```
package
{
  import flash.display.Loader;
  import flash.display.Sprite;
  import flash.net.URLRequest;

  public class ActionScriptProject extends Sprite {
    public function ActionScriptProject() {
      var imageLoader:Loader = new Loader();
      imageLoader.load(new URLRequest('chrome_logo.jpg'));
      addChild(imageLoader);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:32:48.437

我终于弄清楚了如何设置stage.scaleMode和stage.align：

```
package
{
  import flash.display.Loader;
  import flash.display.Sprite;
  import flash.display.StageAlign;
  import flash.display.StageScaleMode;
  import flash.net.URLRequest;

  public class ActionScriptProject extends Sprite {
    public function ActionScriptProject() {
      stage.scaleMode = StageScaleMode.NO_SCALE;
      stage.align = StageAlign.TOP_LEFT;

      var imageLoader:Loader = new Loader();
      imageLoader.load(new URLRequest('chrome_logo.jpg'));
      addChild(imageLoader);
    }
  }
} 
```

此问题可能特定于 Flash Builder 的设置方式。

# java - Java中简单数学方法的不寻常格式

> ID：15455961
> 
> 赞同：0
> 
> 时间：2013-03-16T23:31:34.270
> 
> 标签：java, math, double

我正在编写一个简单的转换器 Java Android 应用程序，但我在从一次转换中收到的输出时遇到了一些问题。我的输入是 0.508；从米转换为公里。我希望的值是 0.000508。但是，我得到的值是 5.08E-4。这让我很困惑。我使用的计算很简单，如下所示。

```
private double mToKm(double m)
{
    return m / 1000;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:43:33.117

例如`System.out.printf("%f",mToKm(0.508));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:34:41.033

正如许多人所说。这是格式错误。我通过在将双精度显示给用户之前将其格式化为字符串来解决此问题。

```
String val = String.format("%f", value); 
```

感谢大家的帮助！

# c# - 解码 DNS 标头

> ID：15455965
> 
> 赞同：4
> 
> 时间：2013-03-16T23:32:02.047
> 
> 标签：c#, dns, header, sharppcap

我正在尝试在 c# 中解码 DNS 数据包，虽然这并不重要，但我正在使用**SharpPcap**。

一切正常，但似乎**QR**和**RCODE**字段返回错误值。我正在将我的结果与 Wireshark 的结果进行比较。

即使消息是请求，QR 也始终为 1（响应）。发生的另一个奇怪的事情是，当消息是查询时返回码为 0，而当消息是响应时返回码为 1。

我用来查找 DNS 标头的网站之一就是[这个](http://technet.microsoft.com/en-us/library/dd197470%28v=ws.10%29.aspx)。我在这里缺少什么吗？我用来解码数据包的代码是：（数据是一个包含有效负载数据的字节数组）

```
//TransactionID 16 bits (This is correct)
//Not sure why second byte has to be first but that's how wireshark displays it
transactionID = new byte[] { data[1], data[0] }; 

//Flags 16 bits
isResponse = Utilities.getBit(data[2], 0); //always returns 1

//What I'm doing here is converting the boolean returned by getBit into a
//1 or 0 which is used to create a string which will then be converted
//into a UInt16 (If there's an easier way to do this please let me know)
OpCode = Convert.ToUInt16(Convert.ToUInt16(Utilities.getBit(data[2], 1)).ToString() +
         Convert.ToUInt16(Utilities.getBit(data[2], 2)).ToString() +
         Convert.ToUInt16(Utilities.getBit(data[2], 3)).ToString() +
         Convert.ToUInt16(Utilities.getBit(data[2], 4)).ToString(), 2);

//These seem correct (Untested though since wireshark doesn't display them)
authAnswer = Utilities.getBit(data[2], 5);
truncation = Utilities.getBit(data[2], 6);
recursionDesired = Utilities.getBit(data[2], 7);

recursionAvail = Utilities.getBit(data[3], 0);
//skip 3 bits here (reserved and set to 0)...

//ReturnCode returns 0 for queries and 1 for responses, this is pretty weird
returnCode = Convert.ToUInt16(Convert.ToUInt16(Utilities.getBit(data[3], 4)).ToString() +
             Convert.ToUInt16(Utilities.getBit(data[3], 5)).ToString() +
             Convert.ToUInt16(Utilities.getBit(data[3], 6)).ToString() +
             Convert.ToUInt16(Utilities.getBit(data[3], 7)).ToString(), 2);

//Questions count, Answers count, ARR count, Additional ARR: 1 byte each
//These are correct
questionsCount = Convert.ToUInt16(data[4] * 256 + data[5]);
answersCount = Convert.ToUInt16(data[6] * 256 + data[7]);
authorityRRs = Convert.ToUInt16(data[8] * 256 + data[9]);
additionalRRs = Convert.ToUInt16(data[10] * 256 + data[11]); 
```

getBit 方法在这里：

```
public static bool getBit(byte b, int index) {
    //Logical AND with number to find if bit is 0 or 1
    //Shift by index to represent value in binary (2^index)
    bool bit = (b & (1 << index)) != 0;

    return (bit);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:55:27.907

你试过使用[Pcap.Net](http://pcapdot.net)吗？它完全支持 DNS，因此您无需手动解码任何内容。

# c++ - 在 std::string 上使用 _T

> ID：15455969
> 
> 赞同：3
> 
> 时间：2013-03-16T23:32:17.760
> 
> 标签：c++, string, visual-c++

我正在尝试使用这行代码

```
startingfolder = _T("C:\\VSS\\" +  caseref); 
```

但据我了解，我不允许在变量上使用 _T。基本上我试图将 SHBrowseForFolder 的起始文件夹设置为由之前分配的变量组成的路径。我花了很长时间试图绕过它，一直在搜索并找到有关 wstrings 的东西，但似乎没有任何效果。我希望我错过了一些容易的事情，因为我无法相信 _T 变量这么难。

```
void folderdialog2()
                 {    
                     PIDLIST_ABSOLUTE xx;
                     PCTSTR startingfolder; 

                     startingfolder = _T("C:\\VSS\\" +  caseref);
                     xx = ILCreateFromPath(startingfolder);

                     BROWSEINFO bi = { 0 };
                     bi.pidlRoot = xx;
                     bi.lpszTitle = _T("Pick a Directory");

                     LPITEMIDLIST pidl = SHBrowseForFolder ( &bi );
                     if ( pidl != 0 )
                     {
                         // get the name of the folder
                         TCHAR path[MAX_PATH];
                         if ( SHGetPathFromIDList ( pidl, path ) )
                         {
                             _tprintf ( _T("Selected Folder: %s\n"), path );                                                                           
                         }
                         // free memory used
                         IMalloc * imalloc = 0;
                         if ( SUCCEEDED( SHGetMalloc ( &imalloc )) )
                         {
                             imalloc->Free ( pidl );
                             imalloc->Release ( );
                         }                               
                     }           

                 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:41:46.683

你可以这样做：

```
startingfolder = _T("C:\\VSS\\") +  caseref; 
```

但如果`caseref`声明为`std::string`，则在您使用 Unicode 字符集时将无法编译。另一方面，如果将其声明为`std::wstring`，则在使用多字节字符集时将无法编译。

如果您需要您的程序同时支持这两种字符集，一种可能的方法是使用预处理器指令来定义一个类型别名，如果定义了符号则`tstring`解析为，如果没有定义则解析为，并将您的字符串变量声明为.`std::wstring``_UNICODE``std::string``tstring`

```
#ifdef _UNICODE
typedef std::wstring tstring;
#else
typedef std::string tstring;
#endif

tstring casref = _T("something");
tstring startingfolder = _T("C:\\VSS\\") + caseref; 
```

但是请注意，Windows 的非史前（即任何基于 NT 的）版本在内部使用 Unicode 字符，因此如果您没有特别的理由支持这两种配置，只需删除那些丑陋的宏（包括`_T`）并使用`L`前缀用于字符串文字（例如`L"Hello"`）结合`std::wstring`（以及广泛版本的流，如果您正在使用它们）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T01:20:05.673

而不是这个：

```
PCTSTR startingfolder;
startingfolder = _T("C:\\VSS\\" +  caseref); 
```

做这个：

```
wstring const startingfolder = wstring() + L"C:\\VSS\\" + caseref; 
```

并将您的字符串类型更改为宽字符串等，并确保`UNICODE`在包含`<windows.h>`.

Windows API 基于 UTF-16 字符串表示，使用 16 位`wchar_t`. 当您使用 ANSI 函数时，它必须在宽字符基础 API 之间进行转换。所以使用 ANSI 字符串是

*   效率低下。
*   有限（不能处理一般的 Unicode 字符）。
*   很多额外的工作，但很可能仍然存在错误。

如果您使用仍然可以针对 Windows 9x 的非常旧的工具，并且您的意思是针对 Windows 9x，并且您不能使用 Layer for Unicode，那么您需要支持 ANSI，因为您在 DLL 中使用 MFC 并且您不觉得你要重建它。但是，您是否真的针对 Windows 9x 和 DLL 中的 MFC 并使用了足够老的工具来做到这一点？我对此表示怀疑！

所以，在任何地方都使用宽字符串。

* * *

总结一下，忘记那些愚蠢的`_T`宏。

# html - 如果父级具有高度，则 CSS Clear 不起作用：0

> ID：15455970
> 
> 赞同：0
> 
> 时间：2013-03-16T23:32:22.083
> 
> 标签：html, css

我遇到了一个奇怪的 CSS 问题。下面是我的html

```
<div id="contact-me-content">

    <form action="" method="post">

        <label for="contact-name">Name</label>
        <input type="text" name="contact-name" id="contact-name" placeholder="Your name" />

        <input type="submit" style="float:right" name="contact-submit" id="contact-submit" value="Send" />
        <div style="clear:both"></div>

    </form>
</div> 
```

下面是css

```
#contact-me-content
{
height: 0;
padding: 5px;
background: #ffffff;
border-left: 1px solid #cccccc;
border-right: 1px solid #cccccc;
} 
```

我将提交按钮向右浮动，然后尝试清除浮动，以便表单包含在父 div 中。因为父 div 有 height:0 清除不工作。但是，如果我删除 height: 0 它工作正常。有谁知道解决这个问题或可以给我一个解释？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:34:26.627

为了工作，你应该尝试添加`display: inline-block;`，`#contact-me-content`然后只有你的浮动元素可以有`clear: both;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T23:59:09.737

而不是`height: 0`用来隐藏你可以使用的 div`display: none`或`visibility: hidden`. 如果您必须使用`height: 0`，那么还要添加`overflow: hidden`到容器中，并且表单中溢出的任何部分都将被隐藏。请注意，填充使其具有一定的可见性，因此您可以将其设置为 0 并稍后将其添加回来，或者将填充添加到表单元素中。

[http://jsfiddle.net/ExplosionPIlls/BQCqJ/](http://jsfiddle.net/ExplosionPIlls/BQCqJ/)

# jquery - 没有插件和 wordpress 3.5.1 库的 Colorbox

> ID：15455971
> 
> 赞同：0
> 
> 时间：2013-03-16T23:32:24.560
> 
> 标签：jquery, wordpress, gallery, colorbox

我有个问题。我想在 wordpress 主题上集成彩盒效果，但没有插件。所以我有这个：

```
<link rel="stylesheet" href="<?php echo get_template_directory_uri(); ?>/css/colorbox.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script> 
```

和这个 ：

```
<script src="<?php echo get_template_directory_uri();  ?>/js/jquery.colorbox.js"> </script>
<script>
    jQuery(document).ready(function(){
$("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']").colorbox({transition:"elastic", maxWidth:"80%", maxHeight:"80%", slideshow:"true"});
}); 
```

因此，这样，单个图像就可以正常工作。它们在彩盒窗口中打开。但对于画廊，什么都没有。所以，我补充

```
link="file" 
```

在画廊短代码中，像这样，例如：

```
[gallery ids="54,53,58,59,66" link="file"] 
```

这样，画廊的图像在颜色框中打开，很好。但问题是每个图像都像单个图像一样打开，没有分页（没有下一个图像和上一个图像）

我正在本地测试该站点，因此无法为您提供链接。Wordpress 3.5.1 没有插件

我不知道如何解决这个问题。

如果有人知道问题出在哪里，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:39:34.153

您应该向图像添加一个组类，以便您可以将它们链接在一起。

在此示例中，“group_name”将成为每个图像类的一部分。而不是使用图像类型，我使用相同的类来调用颜色框

```
$(".group_name").colorbox({rel:"group_name", transition:"elastic", maxWidth:"80%", maxHeight:"80%", slideshow:"true"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:53:15.047

谢谢你的帮助，罗伯特，

我当然不是很好，因为我尝试了你的方法，但我不能来工作。

所以，我添加了你的代码，所以现在我有了这个：

```
 <script src="<?php echo get_template_directory_uri(); ?>/js/jquery.colorbox.js"></script>
    <script>
    jQuery(document).ready(function(){
$("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']").colorbox({transition:"elastic", maxWidth:"80%", maxHeight:"80%", });
$(".group_name").colorbox({rel:"group_name", transition:"elastic", maxWidth:"80%", maxHeight:"80%", slideshow:"true"});
});
    </script> 
```

（我也试过这个）：

```
$("a.group_name").colorbox({rel:"grou..... 
```

在 html 后版中，我放了这个：

```
[gallery ids="54,53,58,59,66" class="group_name"] 
```

我也试过这个：

```
[gallery ids="54,53,58,59,66" link="file" class="group_name"] 
```

但什么都没有。问题是一样的。没有分页。我真的很绝望:-)

[编辑]：如果我理解它不适用于 [画廊]。

和

```
<a href="http://localhost/.../......jpg" rel="group_name"><img   src="http://localhost/.../....jpg" width="150" height="100" /></a>
<a href="http://localhost/.../......jpg" rel="group_name"><img   src="http://localhost/.../....jpg" width="150" height="100" /></a> 
```

它工作正常，谢谢。

但并不容易。是否可以在具有类的 WP 3.5.1 画廊上自动拥有颜色框，例如，在

```
[gallery ... 
```

# c# - 使用 CountdownEvent 和 ManualResetEvent 控制 ThreadPool 中的线程

> ID：15455974
> 
> 赞同：0
> 
> 时间：2013-03-16T23:32:46.837
> 
> 标签：c#, multithreading, threadpool, manualresetevent, countdownevent

我有以下多线程代码摘录，我一直在努力比较压缩副本和解压缩后的文件。该应用程序正在压缩一个包含可变数量的各种大小文件的文件夹，将文件复制到服务器并解压缩它们。然后对文件进行比较，并将此比较导出到`ThreadPool`.

这是**当前的完整方法**：

```
public void FolderMoverLogic(string folderPathToZip, string unzipOutputDir)
{
    string folderRootDir = Path.GetDirectoryName(folderPathToZip);
    string folderNameToZip = Path.GetFileName(folderPathToZip);

    try
    {
        //Zips files in <folderPathToZip> into folder <zippedLocal>
        TransferMethods.CreateZipExternal(folderPathToZip, zippedlocal);
        //Copies zipped folder to server location
        File.Copy(zippedlocal + "\\" + folderNameToZip + ".zip", zippedserver + "\\" + folderNameToZip + ".zip");
        //Unzips files to final server directory
        TransferMethods.UnZip(zippedserver + "\\" + folderNameToZip + ".zip", unzipOutputDir + "\\" + folderNameToZip, sizeof(Int32));

        TransferMethods m = new TransferMethods();

        //Enumerate Files for MD5 Hash Comparison
        var files = from file in Directory.EnumerateFiles(folderPathToZip, "*", SearchOption.AllDirectories)
                    select new
                    {
                        File = file,
                    };

        int fileCount = 0;
        CountdownEvent countdown = new CountdownEvent(10000); 
        using (ManualResetEvent resetEvent = new ManualResetEvent(false))
        {
            foreach (var f in files)
            {
                Interlocked.Increment(ref fileCount);
                countdown.Reset(fileCount);
                try
                {
                    ThreadPool.QueueUserWorkItem(
                        new WaitCallback(c => 
                            {
                                //Check if any of the hashes have been different and stop all threads for a reattempt
                                if (m.isFolderDifferent)
                                {
                                    resetEvent.Set();
                                    CancellationTokenSource cts = new CancellationTokenSource();
                                    cts.Cancel(); // cancels the CancellationTokenSource 
                                    try
                                    {
                                        countdown.Wait(cts.Token);
                                    }
                                    catch (OperationCanceledException)
                                    {
                                        Console.WriteLine("cde.Wait(preCanceledToken) threw OCE, as expected");
                                    }
                                    return;
                                }
                                else
                                {
                                    //Sets m.isFolderDifferent to true if any files fail MD5 comparison
                                    m.CompareFiles(f.File, folderRootDir, unzipOutputDir);
                                }
                                if (Interlocked.Decrement(ref fileCount) == 0)
                                {
                                    resetEvent.Set();
                                }
                                countdown.Signal();
                            }));

                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.ToString());
                }
            }
            countdown.Wait();
            resetEvent.WaitOne();
            resetEvent.Close();

        }
    }
    catch (Exception Ex)
    {
        Console.WriteLine(Ex.Message);
    }
} 
```

到目前为止查看的有用资源：

[发出信号并立即关闭 ManualResetEvent 是否安全？](https://stackoverflow.com/questions/2336767/is-it-safe-to-signal-and-immediately-close-a-manualresetevent)

[停止 .NET ThreadPool 中的所有线程？](https://stackoverflow.com/questions/5074996/stopping-all-thread-in-net-threadpool?rq=1)

[MSDN 倒计时事件](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.aspx "MSDN 倒计时事件")

线程池逻辑要求：

*   比较本地和服务器上的所有枚举文件
*   如果散列不匹配，则从所有线程返回

**以前的线程池代码**：

```
using (ManualResetEvent resetEvent = new ManualResetEvent(false))
{
    foreach (var f in files)
    {
        testCount++;
        try
        {
            //Thread t = new Thread(() => m.CompareFiles(f.File, unzipped, orglsource));
            //t.Start();
            //localThreads.Add(t);
            ThreadPool.QueueUserWorkItem(
                new WaitCallback(c => 
                    {
                        if (resetEvent.WaitOne(0))  //Here is the `ObjectDisposedException`
                        {
                            return;
                        }
                        if (!m.Folderdifferent)
                        {
                            m.CompareFiles(f.File, folderRootDir, unzipOutput);
                        }
                        else
                        {
                            resetEvent.Set();
                        }
                        if (Interlocked.Decrement(ref fileCountZipped) == 0)
                        {
                            resetEvent.Set();
                        }

                    }));

        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }

    }
    resetEvent.WaitOne();
} 
```

我`ObjectDisposedExceptions`定期使用显示的先前代码。

我的问题是这样的：

1.  当前方法是线程安全的吗？
2.  逻辑合理吗？
3.  任何关于性能或线程安全的改进想法
4.  我在顶部的当前方法是否解决了以前的代码异常

我一直在测试这段代码，它一直在毫无例外地工作，但我正在寻找一些更有经验的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:55:56.333

一些注意事项：

*   不应该是这样的吗？：

    ```
    CountdownEvent countdown = new CountdownEvent(files.Count()); 
    ```

*   安全吗？-**不**- 我只是不喜欢 CountdownEvent 的想法，如果对任何文件的任何操作失败，您不会收到信号并且应用程序在 countdown.Wait() 上挂起，我更喜欢使用[TPL 任务](http://msdn.microsoft.com/en-us/library/dd537609.aspx)代替 - 而不是`countdown.Wait()`使用`Task.WaitAll(tasks)`
*   永远不要在线程中使用直接的“foreach 变量”（[这个线程解释了原因](https://stackoverflow.com/questions/15429500/getting-weird-result-while-using-task-parallel-library)），所以而不是：

    ```
    foreach (var f in files)
    {
        Task.Run(() =>
        {
             var whateveryDoWithIt = f.File; 
        }
    }
    ```

    做这个：

    ```
    foreach (var f in files)
    {
        var ftemp = f;
        Task.Run(() =>
        {
             var whateveryDoWithIt = ftemp.File; 
        }
    }
    ```

*   要回答它是否是线程安全的，我会回答：是的，如果您解决上述问题并且其中使用的所有方法也是线程安全的

# regex - Regex / SublimeText：如果被不替换的项目包围，则替换字符串

> ID：15455977
> 
> 赞同：0
> 
> 时间：2013-03-16T23:33:06.350
> 
> 标签：regex, sublimetext2

我有很多很多字符串，例如：

```
Hello Dear World ! ! !
How are you Going ? ! . . . 
```

如果仅通过制表符在单词之间替换空格。使用哪个正则表达式？

* * *

我试过 ：

```
FIND:    \w\s\w
REPLACE: \w\t\w 
```

但是用“\w”替换周围的单词。

```
Hellw:weaw:world ! ! !
How:wrw:wow:woing ? ! . . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:38:41.477

查找：(\w+)\s(\w+) 替换：$1\t$2

() 确实匹配一个子模式，该子模式可由 $1 引用用于第一个匹配， $n 用于第 n 个匹配。\w+ 需要匹配整个单词而不是仅匹配第一个字符

# android - 在 Android 2.3.3 或 4.2 上以编程方式设置时，半透明主题不起作用

> ID：15455979
> 
> 赞同：7
> 
> 时间：2013-03-16T23:33:31.610
> 
> 标签：android, android-activity, transparency

我有两个活动：

```
public class MainActivity extends Activity {
 @Override
 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);
 }
 public void click(View view) {
  Intent intent= new Intent(this, TranslucentActivity.class);
  startActivity(intent);        
 }
}

public class TranslucentActivity extends Activity {
 @Override
 protected void onCreate(Bundle savedInstanceState) {
  this.setTheme(android.R.style.Theme_Translucent);
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_translucent);
 }
} 
```

布局activity_main

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:onClick="click" />
</RelativeLayout> 
```

布局activity_translucent

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".TranslucentActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="Hello_world" />
</RelativeLayout> 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.translucencytest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.translucencytest.MainActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.translucencytest.TranslucentActivity">
        </activity>
    </application>
</manifest> 
```

当我单击 MainActivity 中的按钮时，它会启动具有透明背景的 TranslucentActivity。在平台 4.0.3 上的 android 模拟器中一切看起来都很好但在其他平台上，例如 2.3.3 或 4.2，我得到黑色背景而不是透明。有什么问题？

PS 我不想使用清单来声明活动的主题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T14:00:26.370

关于 setTheme() 或者为什么 setTheme() 没有按预期工作有很多讨论：

*   [https://code.google.com/p/android/issues/detail?id=4394](https://code.google.com/p/android/issues/detail?id=4394)
*   [https://code.google.com/p/android/issues/detail?id=3793](https://code.google.com/p/android/issues/detail?id=3793)
*   [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/vSZHsVWUCqk](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/vSZHsVWUCqk)
*   [为什么 Activity 中的 getApplicationContext().setTheme() 不起作用？](https://stackoverflow.com/q/1823724/534471)

该讨论的精髓在于 setTheme 在清单中设置主题时效果不佳（甚至 Dianne Hackborn 建议使用清单方式而不是 setTheme() 方式，请参见上面的第三个链接）。在定义背景时尤其如此。不幸的是，您在模拟器或图形布局编辑器中获得的结果无法转移到现实世界（说实际设备）。因此，您在 4.0.3 模拟器中看到的内容可能与真实设备上的不同（正如您已经注意到的 ;-)。

如果没有特定理由使用 setTheme 为您的 Activity 设置主题，那么我建议您像这样更改您的清单：

```
<activity android:name=".TranslucentActivity"
          android:theme="@android:style/Theme.Translucent"/> 
```

您仍然可以使用 setTheme 为布局的其他元素设置主题，但在创建透明或类似对话框的活动时，我还没有找到任何其他可行的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-24T15:29:02.683

```
<activity android:theme="@android:style/Theme.Translucent.NoTitleBar"
android:name="com.example.translucencytest.MainActivity" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<activity android:theme="@android:style/Theme.Translucent.NoTitleBar"
android:name="com.example.translucencytest.TranslucentActivity">
</activity> 
```

# sencha-touch-2 - 如何在 sencha touch 2 的选项卡面板中将 URL 添加到选项卡

> ID：15455980
> 
> 赞同：-1
> 
> 时间：2013-03-16T23:33:31.703
> 
> 标签：sencha-touch-2, tabpanel

我需要一个标签面板的标签才能转到一个 url。我该怎么做？我的意思是我希望我在该选项卡上的点击转到一个 url（这里的 url 是一个 pdf）。

请查看此链接 [https://docs.google.com/file/d/0BzddXRxUeN1jOE9tTVBmSGpHQzg/edit?usp=sharing](https://docs.google.com/file/d/0BzddXRxUeN1jOE9tTVBmSGpHQzg/edit?usp=sharing) 以查看所需的效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:58:38.287

它很简单.. 你只需要在该面板的 html 部分中创建一个 iframe ......希望你明白了，.. 像这样

```
items:[{
    xtype: 'panel',
    styleHtmlContent : true,
    html: '<div><iframe style="width:100%;height:100%;" src="http://www.sencha.com/products/touch">Your device does not support iframes.</iframe></div>',
}] 
```

# events - 响应 joomla 中的更改配置事件

> ID：15455984
> 
> 赞同：0
> 
> 时间：2013-03-16T23:34:02.070
> 
> 标签：events, plugins, joomla

我正在为客户端开发 Joomla 2.5 组件，我们能够在后端的组件配置中更改背景颜色。此更改是使用颜色选择器进行的，因此几乎可以选择任何颜色。

无需过多详细说明就够了，设置组件中的所有颜色更改（包括查找要加载的适当图像）是一个相当密集的过程。我只想在组件参数中进行更改时才进行此编译，但是当 com_config 组件保存配置时，我看不到 Joomla 触发事件的任何地方，并且我不想更改客户端的位置有这个选项或如何访问它。

由于无法更改 Joomla 源代码，是否有人知道我该如何响应此事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:36:42.093

有一个待处理的补丁`onConfigurationBeforeSave`和`onConfigurationAfterSave`事件：[#29769](https://github.com/joomla/joomla-cms/pull/615)。

在合并之前，我想到的唯一想法是从组件本身观察组件的配置。

1.  从缓存中加载最新的已知配置校验和
2.  与当前配置校验和比较。

    a) 如果不同，则存储当前配置哈希并运行处理

现在，您可以在几个地方执行它：

*   在每个组件执行上
*   关闭配置模式框（Joomla 1.5 - 2.5）
*   使用 cron 作业

# r - 为模拟研究运行多次 Rcpp 函数重复的最有效方法？

> ID：15455986
> 
> 赞同：4
> 
> 时间：2013-03-16T23:34:08.980
> 
> 标签：r, simulation, rcpp, sampling

我编写了一个 Rcpp 函数，该函数从总体中返回一个样本，并且为了测试我想运行它数千或数百万次的估计方法。似乎调用 Rcpp 需要一点开销，而且类似的事情`replicate(100,myFunction())`比我预期的要长得多。

最好的方法是什么？`rep`, `*apply`, `replicate`, 将循环本身放在 C++ 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:22:44.917

如果您关心性能，您希望尽量减少从 R 到 C++ 的调用次数——而不是像您所说 的那样做*数千或数百万次。*

所以巴蒂斯特是正确的：`for()`如果可以的话，在 C++ 级别执行循环。

另请注意，最新版本的[RcppArmadillo](http://cran.r-project.org/package=RcppArmadillo)现在有一个 C++ 版本，`sample()`它可能也允许您在 C++ 中完成该部分。也就是说，我对“UPtille”以及它的作用一无所知，所以也许你被现有的 R 实现所困扰。

# javascript - 我的代码不起作用。如何删除 Firebase 列表中的元素？

> ID：15455989
> 
> 赞同：0
> 
> 时间：2013-03-16T23:34:41.273
> 
> 标签：javascript, json, list, firebase

我需要做类似的事情。谁能帮帮我？

```
var listRef = new Firebase("https://t3zlg47s3v6.firebaseio-demo.com/some-list");

    for (var i=0 ; i < 3 ; i++){ 
        listRef.push().set({login: "tulio"+i, email: i+"_tulio@hotmail.com", password: "teste"+i});     
    }

    listRef.on("child_added", function(snapshot) {
        if(snapshot.val().login == 'tulio1'){
            listRef.remove(snapshot);   
        }
     }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T00:01:04.680

删除不带参数。相反，您应该从快照中获取对数据的引用并调用 remove，如下所示：

```
snapshot.ref().remove(); 
```

# java - ArrayList 中的整数相加 48

> ID：15455995
> 
> 赞同：0
> 
> 时间：2013-03-16T23:35:50.553
> 
> 标签：java, arraylist

我有这个方法：

```
public ArrayList Arraylistify(){
     for(int x = 0; x < value.length(); x++){
         if(Character.getNumericValue(value.charAt(x)) >= 10 && Character.getNumericValue(value.charAt(x)) <= 26){
             for(char y = 'A'; y < 'Z'; y++){
                 if(Character.toString(y).equalsIgnoreCase(Character.toString(value.charAt(x)))){
                     numbers.add(Character.getNumericValue(y));
                     break;
                 }
             }
         }
          numbers.add((int) value.charAt(x));
     }
     return numbers;
} 
```

这应该从字符串值（仅包含数字和字母）中获取字符并将它们放入 ArrayList（将字母转换为它们的数值）。因此，如果字符串是 4567A，则 ArrayList 将依次包含 4、5、6、7 和 10。但是，ArrayList 中的所有 Integer 都是 48 相加的。这是什么原因造成的？我该如何解决？我应该选择不同的方法吗？请回复。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:40:59.537

怎么样

```
 public static List<Integer> toList(String value) {
     List<Integer> list = new ArrayList<>();
     for(char ch: value.toCharArray())
        list.add(Character.getNumericValue(ch));
     return list;
 } 
```