# StackOverflow 问答 12930000-12930999

# python - 如何显示从mysql数据库表中获取的pyqt4的QTableView上的行

> ID：12930002
> 
> 赞同：0
> 
> 时间：2012-10-17T08:21:03.733
> 
> 标签：python, mysql, pyqt4, mysql-python, pyside

如何显示从 MySQL 数据库表中获取的 pyqt4 的 QTableView 上的行？

必须通过 MySQLdb 连接到 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:54:37.350

您可以将[QStandardItemModel](http://srinikom.github.com/pyside-docs/PySide/QtGui/QStandardItemModel.html?highlight=qstandarditemmodel#)子类化并从您喜欢的任何数据库中获取数据。然后你可以使用[QTableView.setModel](http://srinikom.github.com/pyside-docs/PySide/QtGui/QAbstractItemView.html#PySide.QtGui.PySide.QtGui.QAbstractItemView.setModel)函数来使用 QTableView 查看数据。

# xml - 使用 Windows Azure 进行 XML 数据管理

> ID：12930003
> 
> 赞同：0
> 
> 时间：2012-10-17T08:21:05.230
> 
> 标签：xml, azure

我编写了一个 Windows Phone 应用程序和一个衡量应用程序使用情况的框架。该框架生成 XML（包含应用程序信息、电话详细信息、电话设置、用户如何使用该应用程序等信息……）。

我想将这些 XML（从每部手机）发送到 Azure，并将它们合并为一个 XML，该 XML 将用于查询以提取用户参与的一些有用信息。

由于我是 Azure 的新手，因此我想请您提供解决问题所需的步骤。将此xml映射到关系sql数据可能更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:11:57.587

给猫剥皮的方法有很多，但是您可能需要考虑以下两种可能的架构：

1.  使用队列存储 API（请参阅[http://www.windowsazure.com/en-us/develop/net/how-to-guides/queue-service/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/queue-service/)）将您的 Xml 片段作为字符串推送到存储队列，然后处理使用工作者角色聚合数据的 XML 片段。

2.  使用新的移动 API 将数据推送到移动服务表（查看[http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-dotnet/)了解更多信息)，然后使用工作者角色来聚合数据。

# jquery - jquery - .animate 在 IE 中不起作用

> ID：12930005
> 
> 赞同：1
> 
> 时间：2012-10-17T08:21:14.807
> 
> 标签：jquery, internet-explorer, jquery-animate

我有一些脚本：

```
$(window).load(function(){
$("#kontakt_kontakt").hover(
    function(){
       $("#kontakt").animate({left: '',bottom: '+=60'}, 440); 
    }, 
    function(){
       $("#kontakt").animate({left: '',bottom: '-=60'}, 440);  
    });

}); 
```

在悬停时，它会使 img 向上移动几个像素。在 chrome 中完美工作，但在 IE 中并没有真正工作——只是没有任何反应。任何人都知道如何解决它？你可以在这里查看：http: [//kafior.mydevil.net/index.html](http://kafior.mydevil.net/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:24:23.293

你有这个错误：

```
TypeError: element.dispatchEvent is not a function

element.dispatchEvent(event); 
```

在您的prototype.js 文件中，您包含了几个版本的jQuery 和prototype 并且这两个框架都在使用`$`，您需要查看jQuery 中的[noConflict](http://api.jquery.com/jQuery.noConflict/)方法，并且您确实应该尝试删除尽可能多的jQuery 版本，没有真正的理由需要下载 2-3 个版本的 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:26:52.467

你有这个错误：

```
SCRIPT438: Object doesn't support property or method 'dispatchEvent' 
```

这里：

```
 if (document.createEvent) {
    element.dispatchEvent(event);
 } else {
    element.fireEvent(event.eventType, event);
 } 
```

从外观上看，您在同一页面上使用 jQuery AND Prototype。您需要运行 jquery noConflict 模式。

```
jQuery.noConflict(); 
```

将此行添加到 jQuery 代码的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:27:20.120

如果您按下`F12`然后选择*控制台*选项卡，页面上会出现 JavaScript 错误。

发生错误是因为该页面包含两个不同的 JavaScript 框架——[原型](http://prototypejs.org/)和[jQuery](http://jquery.com/)，它们都定义了`$`函数。有关如何使用 jQuery函数同时运行它们，请参阅[同一页面中的使用 JQuery 和 Prototype 。](https://stackoverflow.com/questions/451362/using-jquery-and-prototype-in-the-same-page)[`.noConflict()`](http://api.jquery.com/jQuery.noConflict/)

此外，您应该考虑优化 jQuery 和`<script>`标签，有很多重复的代码可以组合在一个事件句柄函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:30:30.383

它也可以在 IE 中使用，但是您的图像会妨碍您。

如果您指向菜单上方的页面，图像会移动。如果您指向图像，它们将不会移动，因为具有悬停事件的元素位于图像后面，并且悬停事件显然不会在 IE 中的图像中冒泡。

# javascript - 如何在 JavaScript 中使用正则表达式验证 Base64 字符串？

> ID：12930007
> 
> 赞同：0
> 
> 时间：2012-10-17T08:21:28.757
> 
> 标签：javascript, regex

> **可能重复：**
> [RegEx 解析或验证 Base64 数据](https://stackoverflow.com/questions/475074/regex-to-parse-or-validate-base64-data)

如何使用正则表达式在 Javascript 中验证 Base64 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:25:20.343

See if [this answer](https://stackoverflow.com/a/475217/1746307) fits you, from another user:

```
^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$ 
```

# php - 如何进行跨域授权？

> ID：12930009
> 
> 赞同：2
> 
> 时间：2012-10-17T08:21:34.290
> 
> 标签：php, session

一台服务器上有2个域。如果用户登录一个域，他也必须登录另一个域。如何在一台服务器上的php中进行跨域授权？我解决了子域，但不能解决不同的二级域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:25:12.250

The main problem is that the cookie isn't send by the browser if you're on another domain.

You can't make the browser to write a cookie for another domain, too.

What can be done is send a unique token to the other domain, and when validated, write a cookie on the second domain. That can be done when authenticated, using an iframe or a double-redirect (iframe cookies are blocked by some browsers, like safari). The unique token will have to be validated by the second domain, and then invalidated (removed) so it can't be used again by another user (man in the middle attack).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:27:25.970

您必须研究[CAS](http://en.wikipedia.org/wiki/Central_Authentication_Service)并根据您使用的框架来实施它。例如，在我的 Zend 应用程序中，我会使用[Zend_OpenId](http://framework.zend.com/manual/1.12/en/zend.openid.html)和[Zend_Oauth](http://framework.zend.com/manual/1.12/en/zend.oauth.html)。

# context-free-grammar - 构建上下文无关语法

> ID：12930010
> 
> 赞同：2
> 
> 时间：2012-10-17T08:21:35.460
> 
> 标签：context-free-grammar, automata, automata-theory

如何为以下语言构建上下文无关语法：

```
L = {a^l b^m c^n d^p   | l+n==m+p; l,m,n,p >=1} 
```

我开始尝试：

```
S -> abcd | aAbBcd | abcCdD | aAbcdD | AabBcCd 
```

然后`A`=别的东西......但我无法让它工作。

.

我想知道我们如何才能记住为 no 增加了多少 c 的 shud。b的增加？
例如：

```
string : abbccd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T17:33:27.447

语法是：

1.  **S1** -> 一个**S1** d | **S2**

2.  **S2** -> **S3** **S4**

3.  **S3** -> a **S3** b | ε

4.  **S4** -> **S5** **S6**

5.  **S5** -> b **S5** c | ε

6.  **S6** -> c **S6** d | ε

规则 1 添加相等数量的 a 和 d。

规则 3 添加相等数量的 a 和 b。

规则 5 添加相等数量的 b 和 c。

规则 6 添加相等数量的 c 和 d

这些规则还确保根据给定的语言维护字母表的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:29:22.503

这个怎么样：

```
S1 -> a S2 d                   # at least one a and d
S2 -> a S2 d
S2 -> S3 S4                    # no more d, split into ab and bc parts
S2 -> S4 S5                    # no more a, split into bc and cd parts

S3 -> a S3 b
S3 ->                          # already ensured at least one a and b
S4 -> b S4 c                  
S4 -> b c                      # at least one b and c
S5 -> c S5 d   
S5 ->                          # already ensured at least one c and d 
```

*关键是你如何分组......（即“部分”而不是非终端。）*

# email - 如何在 Play framework 2.0 的电子邮件中使用模板？

> ID：12930011
> 
> 赞同：2
> 
> 时间：2012-10-17T08:21:35.740
> 
> 标签：email, scala, playframework-2.0

我正在使用这个[模块](https://github.com/typesafehub/play-plugins/tree/master/mailer)在我的 playframework 应用程序中发送邮件，我想知道是否可以在邮件中使用一些模板，比如 Play 1.2.4[文档](http://www.playframework.org/documentation/1.2.4/emails)中使用的模板。

我正在使用 Play 2.0.3

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T09:13:58.687

事实上，这很简单。这是一个代码示例。

```
val mail = use[MailerPlugin].email  

def sendEmail() = {
    mail.setSubject("Your subject")
    mail.addRecipient("Somename <example@example.com>")
    mail.addFrom("Someone <noreply@example.com>")
    mail.send(
        views.txt.helpers.mail.myTemplate().toString, 
        views.html.helpers.mail.myTemplate().toString
    )
} 
```

# dart - 在 Dart 中可以进行 IPMulticast 吗？

> ID：12930014
> 
> 赞同：2
> 
> 时间：2012-10-17T08:21:46.993
> 
> 标签：dart

在某些情况下，我想将 Dart（服务器端）客户端连接到 Java IPmulticasting 服务器。我看不到如何为多播场景配置 Dart 套接字。这可能吗？

谢谢

下午

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:12:50.607

感谢您的提问！

dart:io 库（此处的文档：http: [//api.dartlang.org/docs/continuous/dart_io.html](http://api.dartlang.org/docs/continuous/dart_io.html)）包含服务器端（又名命令行）网络功能。

截至今天，仅支持 TCP 套接字。

请给[issue 1975](http://code.google.com/p/dart/issues/detail?id=1975)加注星标以表达对 UDP 套接字的支持。

# objective-c - 使用 Testflight 不会收到崩溃

> ID：12930019
> 
> 赞同：7
> 
> 时间：2012-10-17T08:22:08.907
> 
> 标签：objective-c, ios, crash-reports, testflight

我已经按照文档中的说明安装了 Testflight (1.2 B3)。构建正在上传和更新。我可以看到会话（大部分是匿名的：/），我收到了日志（TFLog）——但我没有收到任何崩溃报告。我什至介绍了一个 crash-on-event（一种方法未找到的东西）——但 Testflight 上没有关于它的内容。

通过嵌入多个设备的开发人员配置文件进行配置。该问题出现在 iOS6 和 iOS5 / iPhone5 和 iPad3 上。正在针对 iOS6 构建。

有任何想法吗？

**更新** 我已经测试了其他几个框架和接收崩溃报告的方法。没有任何效果，所以我怀疑我的代码中有一些东西（显然）。XCode 4.5.1 是否有任何其他开关可能已启用，并在“生产环境”（如设置）期间禁用任何错误报告？

**更新 2** 截至目前，我们仅使用 Testflight 分发 beta 版本，并切换到 Crashlytics 进行崩溃报告。它更加精简，并且可以解决大多数崩溃问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:33:53.057

我也没有通过 TestFlight 获得任何崩溃报告。这是 TestFlight 的人告诉我的：

> 我们的团队目前正在调查与上传时应用程序自动版本控制相关的问题以及 SDK 数据报告不正确的问题。查看您提供的 URL，在将应用程序上传到 TestFlight 之前构建版本似乎没有更改，并且我们的自动版本控制实施导致一般 SDK 数据报告出现问题。
> 
> 我将与我们的团队分享这一点，当我们有可用的更新时，我们会与您联系。

我试图更新构建版本以避免自动版本控制，但这对我没有帮助。但也许这个问题正在打击其他人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T09:20:37.933

Testflight 不能满足我们记录崩溃的需要。这就是我们跳到 Crashlytics 的原因（正如我在原帖中所说）。Testflight 的问题似乎没有得到解决。我们仍然使用它进行分发，这就是它的优势所在。

# javascript - 无法使用 phonegap 应用程序访问联系人

> ID：12930023
> 
> 赞同：1
> 
> 时间：2012-10-17T08:22:18.470
> 
> 标签：javascript, android, html, cordova

我已经按照电话差距网站上的文档编写了代码

```
// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
    // find all contacts
    var options = new ContactFindOptions();

    var fields = ["displayName", "name"];
    navigator.contacts.find(fields, onSuccess, onError, options);
}

// onSuccess: Get a snapshot of the current contacts
//
function onSuccess(contacts) {
    for (var i=0; i<contacts.length; i++) 
    {
        console.log("Display Name = " + contacts[i].displayName);
      var element = document.getElementById('cont');

      element.innerHTML='<li><a href="#">' + contacts[i].displayName + '</a></li>';

    }
}

// onError: Failed to get the contacts
//
function onError(contactError) {
    alert('onError!');
}

</script>` 
```

它在安卓模拟器中运行良好，但是当我安装应用程序三星银河手机时，它返回一个“null”。请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:16:52.793

奇怪...我也得到了`null`...（使用Phonegap 2.0版）

我建议你使用类似的东西`contacts[i].name.formatted`而不是`contacts[i].displayName`.

因此，例如，通过使用`contacts[i].name.formatted`，您的代码应如下所示：

```
// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
    // find all contacts
    var options = new ContactFindOptions();

    var fields = ["displayName", "name"];
    navigator.contacts.find(fields, onSuccess, onError, options);
}

// onSuccess: Get a snapshot of the current contacts
//
function onSuccess(contacts) {

    var element = document.getElementById('cont'); 
    for (var i=0; i<contacts.length; i++) 
    {
        console.log("Display Name = " + contacts[i].name.formatted);                
        element.innerHTML='<li><a href="#">' + contacts[i].name.formatted + '</a></li>';    
    }
}

// onError: Failed to get the contacts
//
function onError(contactError) {
    alert('onError!');
} 
```

以下是您可以获得的不同信息`contacts[i].name`：

*   `contacts[i].name.givenName`: 提供**给定的名称**

*   `contacts[i].name.formatted`：提供**格式化的名称**（名字+姓氏）

*   `contacts[i].name.middleName`: 提供**中间名**

*   `contacts[i].name.familyName`：提供**姓氏**（名字+姓氏）

*   `contacts[i].name.honorificPrefix`: 提供**敬语前缀**

*   `contacts[i].name.honorificSuffix`: 提供**敬语后缀**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:54:25.790

这是一个简单的解决方案的复杂问题。只添加了一行代码

```
 options.filter=""; 
    options.multiple=true;
    var filter = ["*"]; 
```

那是完整的代码是

```
 <script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
   // find all contacts
    var options = new ContactFindOptions();
    options.filter=""; 
    options.multiple=true;
    var filter = ["*"];
    navigator.contacts.find(filter, onSuccess, onError, options);

}

// onSuccess: Get a snapshot of the current contacts
//
function onSuccess(contacts) {
    var ele = document.getElementById("cont");
    var str = '<ul data-role="listview" >';
  for (var i=0; i<contacts.length; i++) {

       str=str + '<li>' + contacts[i].displayName + '</li>';
   }
   str = str + '</ul>';

  // ele.innerHTML = str;
}

// onError: Failed to get the contacts
//
function onError(contactError) {
    alert('onError!');
} 
```

它正在工作，顺便说一下，它还根据联系人条目显示一些空值，但它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:11:23.887

它可能是 iOS - [http://docs.phonegap.com/en/2.1.0/cordova_contacts_contacts.md.html#Contacts](http://docs.phonegap.com/en/2.1.0/cordova_contacts_contacts.md.html#Contacts)。文档说那里不支持 displayName 。我会听从 Littm 的建议，并查看我在此处链接的文档，因为它讨论了哪些属性在不同平台上不起作用。

# objective-c - 在可可中处理来自 MIDIReadProc 的传入 MIDI 信号的最佳策略

> ID：12930024
> 
> 赞同：2
> 
> 时间：2012-10-17T08:22:28.800
> 
> 标签：objective-c, macos, cocoa, coremidi, nsslider

我必须`NSSlider`通过硬件midi控制器移动一些，我已经编写了一个midi学习程序来将硬件光标分配给`NSSlider`（子类），然后就可以了。在内部`MIDIReadProc`，我处理`NSSlider`取决于传入控制和值的移动，但是现在当我移动硬件光标时，滑块可以移动一个时间，就像移动光标停止其他光标一样。

我的问题是，处理光标同时移动的最佳策略是什么？1\. 我应该用一个单独的线程处理吗？2\. 我应该有一个`FIFO`数据结构`MIDIPacket`并处理它`MIDIReadProc`（带有一些并发分离的过程）吗？

我很抱歉我的英语。感谢关注。

一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:50:37.810

您不应该在`MIDIReadProc`回调中进行任何 UI 同步。

这个回调是从一个高优先级的实时线程调用的，所以你必须避免做任何可能“太长”的事情。

正如您所说，您可以使用 FIFO 并在另一个线程（例如主线程）中处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:28:34.563

我找到了一个解决方案，更新“NSSlider”，移动滑块更新 kvo 路径中的代码，并使用后台进程分离线程来更新滑块 ui 和值。之后，我将带有分配的 ui 控件与没有分配的 ui 控件分开，并使用在 MIDI 控件中键值相等的“NSMutableDictionary”来在 MIDIReadProc 中更快地识别“NSSlider”。

感谢您的关注。

# c++ - 如何通过指针访问向量？

> ID：12930031
> 
> 赞同：1
> 
> 时间：2012-10-17T08:23:20.987
> 
> 标签：c++, pointers, stdvector, stdmap

我想使用指针将新元素插入 a`vector`我有以下示例代码：

```
struct info {
    string Name;
    int places;  // i will use the binary value to identfy the visited places example 29 is 100101
                 // this means he visited three places (London,LA,Rome)  
    vector<int> times; // will represent the visiting time,e.g. 1,2,5 means london 1 time, LA
                       // twice and Rome five times
};

map<string,vector<info> *> log; 
```

Peaple 来自不同的城市，我将检查该城市是否存在，只需将新人添加到 中`vector`，否则创建一个新的地图对象：

```
vector<info> tp;
info tmp;
if(log.size()==0|| log.count(city)==0) //empty or not exist 
{
    tp.push_back(tmp);
    vector<info>* ss = new vector<info>;
    ss=&(tp);
    // create a new object 
    log.insert(map<string,vector<info> * >::value_type(city,ss)); // new object 
}
else // city exist, just add the information to the vector
{
    map<string,vector<info> *>::iterator t;
    t=log.find(city);
    *(t->second).push_back(tmp);  //the problem  in this line
} 
```

如何将新的 tmp 插入向量中？

需要阅读的信息如下：

```
Paris,Juli,5,3,6
Paris,John,24,2
Canberra,John,4,3
London,Mary,29,4,1,2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:46:08.553

这里有很多错误，它们都源于滥用指针。作为问题原因提到的行是一个小的语法问题。手头有更大的问题。

所有这些都可以通过不滥用指针来轻松解决。这里没有理由使用指针，所以最终的解决方法是让地图具有这种类型`map<string,vector<info>> log;`。

然后代码变成这样：

```
info tmp;
log[city].push_back(tmp);
// the [] operator creates a new empty vector if it doesn't exist yet
// there's no point in doing the checks by hand 
```

* * *

现在我们有了一个简单的解决方案，我将在~~房间~~代码中提到大象。

```
vector<info>* ss = new vector<info>;
ss=&(tp);
// ...
log.insert(map<string,vector<info> * >::value_type(city,ss)); 
```

这一系列操作将创建一个具有动态存储持续时间的向量，并立即丢弃指向它的唯一指针。这导致刚刚创建的向量丢失，它使用的内存被泄露；它再也无法恢复。

更糟糕的是，它设置`ss`为指向一个局部变量，然后将该指针保存到映射中的局部变量。因为局部变量具有自动存储时长，所以一旦函数返回它就消失了。这使得刚刚存储在映射中的指针无效，因为它不再具有指向的向量。在那之后，各种各样的破坏就会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:28:30.517

看起来你需要这样做

```
(t->second)->push_back(tmp); 
```

# c# - 我将如何创建外部 url 监视器？

> ID：12930034
> 
> 赞同：1
> 
> 时间：2012-10-17T08:23:23.213
> 
> 标签：c#, internet-explorer, firefox

我将如何创建一个可以以某种方式查看我在大多数流行浏览器中查看的 URL 的应用程序？

可以在进程外完成吗？
可以通过哪些方式做到这一点？
可以不用浏览器插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:25:13.553

The simplest answer is use a proxy server.. prevent html access out except from the proxy server so they have to use it, then all url requests go to the proxy server, even if you choose to make it yourself, then you can collect the URLS either from logs or something and off you go.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:27:10.860

您必须在网络基础设施中安装一些东西，然后从中收集数据。

这可能是代理服务器（例如[Fiddler](http://www.fiddler2.com/fiddler/help/hookup.asp)），或者您可以查看[WireShark](http://www.wireshark.org/) (pcap) 之类的工具。

# pdf - 使用 itext 调用 BaseFont.createFont() 时如何知道正确的编码？

> ID：12930035
> 
> 赞同：7
> 
> 时间：2012-10-17T08:23:33.593
> 
> 标签：pdf, fonts, itext

我有一些自定义的中文字体文件：

```
aaa.ttf
bbb.ttf
ccc.ttf 
```

我想用它们用 iText 创建我的 pdf。

这是我用来创建的代码`BaseFont`：

```
String encoding = ???
BaseFont messageBaseFont = BaseFont.createFont("fonts/aaa.ttf", 
                               encoding, 
                               BaseFont.EMBEDDED); 
```

但我不知道如何找到`encoding`. 举个`aaa.ttf`例子：

![在此处输入图像描述](../Images/da673da116188797e6376aa00532cce1.png)

我可以`encoding`从信息中找到吗？我尝试了一些类似`BaseFont.CP1252`or的编码`BaseFont.WINANSI`，但它们不起作用，`??????`如果它们是汉字，输出是空白页或很多字符。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T09:32:46.197

这个问题有不同的答案。要获得完整的概述，您可以阅读我的书“iText in Action”的第 11 章，但如果您只是想安全起见，请使用 Identity-H 来处理水平文本（和 Identity-V）。这不是真正的编码，但它会在使用 Unicode 的 PDF 中创建复合字体：http: [//api.itextpdf.com/itext/com/itextpdf/text/pdf/BaseFont.html#IDENTITY_H](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/BaseFont.html#IDENTITY_H)

# c - 如果 b=5，为什么 ~b=-6？

> ID：12930040
> 
> 赞同：1
> 
> 时间：2012-10-17T08:24:05.227
> 
> 标签：c, bit-manipulation, twos-complement

我无法让 2-complement 计算工作。

我知道 C 编译 ~b 如果 b = 5，它会将所有位反转为 -6。但为什么？

int b=101，将所有位取反为 010，然后对于 2 个补码的符号，我只需添加 1，但它变为 011，即 3，这是错误的答案。

我应该如何用位反转运算符计算〜？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T08:28:37.940

实际上，这是 5 通常在内存中的表示方式（16 位整数）：

```
0000 0000 0000 0101 
```

当你反转 5 时，你翻转所有位以获得：

```
1111 1111 1111 1010 
```

这实际上是十进制形式的 -6。我认为在您的问题中，您只是简单地翻转了最后三位，而实际上您必须考虑构成整数的所有位。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T08:49:38.427

问题`b = 101 (5)`在于您选择的二进制数字太少。

```
 binary | decimal  
~101 = 010     | ~5 = 2  
~101 + 1 = 011 | ~5 + 1 = 3 
```

如果你选择 4 位，你会得到预期的结果：

```
 binary | decimal  
~0101 = 1010     | ~5 = -6  
~0101 + 1 = 1011 | ~5 + 1 = -5 
```

只需 3 位，您就可以在 2 的补码表示中编码从 -4 到 +3 的整数。使用 4 位，您可以以 2 的补码表示形式对 -8​​ 到 +7 的整数进行编码。

-6 被截断为 2，-5 被截断为 3 位 3。您至少需要 4 位。

正如其他人已经指出的那样，`~`只需反转值中的所有位，因此`~~17`= `17`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T08:30:14.247

`~b`不是 2 补码运算。这是一个按位 NOT 运算。它只是反转数字中的每一位，因此`~b`不等于`-b`.

例子：

```
b = 5
binary representation of b:  0000 0000 0000 0101
binary representation of ~b: 1111 1111 1111 1010
~b = -6

b = 17
binary representation of b:     0000 0000 0001 0001
binary representation of ~b:    1111 1111 1110 1110
~b = -18
binary representation of ~(~b): 0000 0000 0001 0001
~(~b) = 17 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T08:32:25.897

`~`简单地反转一个数字的所有位：

```
~(~a)=17 if a=17
~0...010001 = 1...101110 ( = -18 )
~1...101110 = 0...010001 ( = 17 ) 
```

仅当您想要否定一个数字（以获得 2-s 补码）时才需要添加 1，即从 17 中得到 -17。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T08:51:13.773

`~b + 1 = -b`

所以：

`~(~b)`等于`~(-b - 1)`等于`-(-b - 1) -1`等于`b`

事实上，`~`反转所有位，如果你再做`~`一次，它会反转回来。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T09:47:56.230

> 我无法让 2 完成计算工作。我知道 C 编译 ~b 如果 b = 5，它会将所有位反转为 -6。但为什么？

因为您使用的是二进制补码。你知道什么是补码吗？

假设我们有一个字节变量（有符号字符）。这样的变量可以具有从 0 到 127 或从 -128 到 0 的值。

二进制，它的工作原理是这样的：

```
0000 0000  // 0
...
0111 1111  // 127
1000 0000  // -128
1000 0001  // -127
...
1111 1111  // -1 
```

带符号的数字通常用[圆圈](http://www.yournotes.com/notes/fall98/cse271/cse271c_101298.jpg)来描述。

如果您了解上述内容，那么您就会明白为什么〜1等于-2等等。

如果你使用了一个补码，那么 ~1 将是 -1，因为一个补码使用带符号的零。对于用补码描述的字节，值将从 0 到 127 到 -127 到 -0 再到 0。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T11:40:12.153

您将 b 声明为整数。这意味着 b 的值将存储在 32 位中，并且补码 (~) 将发生在 32 位字上，而不是您所做的最后 3 位。

```
 int b=5 // b in binary: 0000 0000 0000 0101  
    ~b // ~b in binary: 1111 1111 1111 1010 = -6 in decimal 
```

最高有效位存储整数的符号（1：负 0：正），因此 1111 1111 1111 1010 是十进制的 -6。
相似地：

```
 b=17 // 17 in binary 0000 0000 0001 0001  
    ~b // = 1111 1111 1110 1110 = -18 
```

# unit-testing - AppHarbor 如何选择要单元测试的内容？

> ID：12930045
> 
> 赞同：3
> 
> 时间：2012-10-17T08:24:21.573
> 
> 标签：unit-testing, appharbor, xunit

我刚刚用 AppHarbor 创建了一个小项目，由一个使用 xUnit 的 .csproj 组成。它使用 NuGet 来恢复 xUnit 框架。AppHarbor 认识到这是一个测试项目并执行了存在的测试。

我想知道 AppHarbor 如何选择要单元测试的项目。它是否查看引用的 dll/exe 程序集（可能通过反射）？（例如，如果 dll/exe 引用 xunit.dll 那么它可能是一个测试项目）。它会查看 .csproj 文件以查找参考吗？它是否通过所有跑步者运行所有程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:09:21.100

Appharbor 使用 Galio [http://www.gallio.org/](http://www.gallio.org/) 我很确定它会运行所有标有 [Fact]

# typescript - 如何导入其他 TypeScript 文件？

> ID：12930049
> 
> 赞同：179
> 
> 时间：2012-10-17T08:24:49.737
> 
> 标签：typescript

使用 vs.net 的 TypeScript 插件时，如何使一个 TypeScript 文件导入在其他 TypeScript 文件中声明的模块？

文件 1：

```
module moo
{
    export class foo .....
} 
```

文件 2：

```
//what goes here?

class bar extends moo.foo
{
} 
```

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-10-17T08:29:31.247

从 TypeScript 1.8 版开始，您可以`import`像在 ES6 中一样使用简单的语句：

```
import { ZipCodeValidator } from "./ZipCodeValidator";

let myValidator = new ZipCodeValidator(); 
```

[https://www.typescriptlang.org/docs/handbook/modules.html](https://www.typescriptlang.org/docs/handbook/modules.html)

**旧答案：**从 TypeScript 1.5 版开始，您可以使用`tsconfig.json`：[http ://www.typescriptlang.org/docs/handbook/tsconfig-json.html](http://www.typescriptlang.org/docs/handbook/tsconfig-json.html)

它完全消除了注释样式引用的需要。

**较旧的答案：**

您需要引用当前文件顶部的文件。

你可以这样做：

```
/// <reference path="../typings/jquery.d.ts"/>
/// <reference path="components/someclass.ts"/>

class Foo { } 
```

等等

这些路径是相对于当前文件的。

你的例子：

```
/// <reference path="moo.ts"/>

class bar extends moo.foo
{
} 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-10-17T09:12:29.857

Typescript 区分了两种不同类型的模块：**内部**模块用于在内部构建代码。在编译时，您必须使用引用路径将内部模块纳入范围：

```
/// <reference path='moo.ts'/>

class bar extends moo.foo {
} 
```

另一方面，**外部模块用于引用要***在运行时*使用*CommonJS*或*AMD*加载的外部源文件。在您的情况下，要使用外部模块加载，您必须执行以下操作：

**辩论赛**

```
export class foo {
    test: number;
} 
```

**应用程序.ts**

```
import moo = module('moo');
class bar extends moo.foo {
  test2: number;
} 
```

请注意将代码纳入范围的不同方式。对于外部模块，您必须使用`module`包含模块定义的源文件的名称。如果要使用 AMD 模块，则必须按如下方式调用编译器：

```
tsc --module amd app.ts 
```

然后编译为

```
var __extends = this.__extends || function (d, b) {
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
}
define(["require", "exports", 'moo'], function(require, exports, __moo__) {
    var moo = __moo__;

    var bar = (function (_super) {
        __extends(bar, _super);
        function bar() {
            _super.apply(this, arguments);

        }
        return bar;
    })(moo.foo);
}) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-01-22T10:44:51.650

如果您使用的是 AMD 模块，则其他答案在 TypeScript 1.0（撰写本文时的最新版本）中不起作用。

您可以使用不同的方法，具体取决于您希望从每个`.ts`文件中导出多少内容。

# 多重出口

**脚**

```
export class Foo {}
export interface IFoo {} 
```

**巴茨**

```
import fooModule = require("Foo");

var foo1 = new fooModule.Foo();
var foo2: fooModule.IFoo = {}; 
```

* * *

# 单一出口

**脚**

```
class Foo
{}

export = Foo; 
```

**巴茨**

```
import Foo = require("Foo");

var foo = new Foo(); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-12-18T06:01:02.883

如果您正在寻找使用模块并希望将其编译为单个 JavaScript 文件，您可以执行以下操作：

```
tsc -out _compiled/main.js Main.ts 
```

**Main.ts**

```
///<reference path='AnotherNamespace/ClassOne.ts'/>
///<reference path='AnotherNamespace/ClassTwo.ts'/>

module MyNamespace
{
    import ClassOne = AnotherNamespace.ClassOne;
    import ClassTwo = AnotherNamespace.ClassTwo;

    export class Main
    {
        private _classOne:ClassOne;
        private _classTwo:ClassTwo;

        constructor()
        {
            this._classOne = new ClassOne();
            this._classTwo = new ClassTwo();
        }
    }
} 
```

**ClassOne.ts**

```
///<reference path='CommonComponent.ts'/>

module AnotherNamespace
{
    export class ClassOne
    {
        private _component:CommonComponent;

        constructor()
        {
            this._component = new CommonComponent();
        }
    }
} 
```

**通用组件.ts**

```
module AnotherNamespace
{
    export class CommonComponent
    {
        constructor()
        {
        }
    }
} 
```

你可以在这里阅读更多：http: [//www.codebelt.com/typescript/javascript-namespacing-with-typescript-internal-modules/](http://www.codebelt.com/typescript/javascript-namespacing-with-typescript-internal-modules/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-11-26T08:36:14.103

我现在会避免使用`/// <reference path='moo.ts'/>`但用于定义文件未包含在包中的外部库。

解决了编辑器中的`reference path`错误，但这并不意味着需要导入文件。因此，如果您使用的是 gulp 工作流或 JSPM，它们可能会尝试分别编译每个文件而不是`tsc -out`一个文件。

**从打字稿 1.5**

只需在文件级别（根范围）为要导出的内容添加前缀

一个Lib.ts

```
{
export class AClass(){} // exported i.e. will be available for import
export valueZero = 0; // will be available for import
} 
```

您也可以稍后在文件末尾添加要导出的内容

```
{
class AClass(){} // not exported yet
valueZero = 0; // not exported yet
valueOne = 1; // not exported (and will not in this example)

export {AClass, valueZero} // pick the one you want to export
} 
```

甚至将两者混合在一起

```
{
class AClass(){} // not exported yet
export valueZero = 0; // will be available for import
export {AClass} // add AClass to the export list
} 
```

对于导入，您有 2 个选项，首先您再次选择您想要的（一个一个）

另一个文件.ts

```
{
import {AClass} from "./aLib.ts"; // you import only AClass
var test = new AClass();
} 
```

或整个出口

```
{
import * as lib from "./aLib.ts"; // you import all the exported values within a "lib" object
var test = new lib.AClass();
} 
```

关于导出的注意事项：导出两次相同的值会引发错误 { export valueZero = 0; 导出{valueZero}；// valueZero 已经被导出... }

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-11-17T11:45:06.940

由于 TypeScript `1.8+`，您可以使用简单的简单`import`语句，例如：

```
import { ClassName } from '../relative/path/to/file'; 
```

或通配符版本：

```
import * as YourName from 'global-or-relative'; 
```

阅读更多：[https ://www.typescriptlang.org/docs/handbook/modules.html](https://www.typescriptlang.org/docs/handbook/modules.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-04T23:12:22.930

在 VS2013 项目属性中使用了一个参考`"///<reference path="web.ts" />` ，然后在 VS2013 项目属性中构建“app.ts”、“Typescript Build”->“将 javascript 输出组合到文件中：”(checked)->“app.js”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-15T15:42:10.293

如果你正在为 web 做一些事情，你需要使用 js 文件扩展名：

```
import { moo } from 'file.js'; 
```

如果您正在为 nodejs 做某事，我认为不要使用 js 文件扩展名：

```
import { moo } from 'file'; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-09T07:46:18.493

```
import {className} from 'filePath'; 
```

还记得。您要导入的类，必须在 .ts 文件中导出。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-06-29T17:58:49.023

**Visual Studio 中的快速简单流程**

> **将扩展名为 .ts 的文件从解决方案窗口拖放**到编辑器，它将生成内联参考代码，如..

```
/// <reference path="../../components/someclass.ts"/> 
```

# eclipse - 浏览 scala 源代码和渲染的字体 <- 和 =>

> ID：12930052
> 
> 赞同：16
> 
> 时间：2012-10-17T08:24:59.740
> 
> 标签：eclipse, scala, fonts

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:41:42.007

~~我认为[Inconsolata](http://cooltext.com/Download-Font-Inconsolata)有效——但我使用的是 Linux，所以我不确定它是否适用于 Windows。~~

Inconsolata 没有字形。您最好的选择是使用 Deja Vu Sans Mono 并将右双箭头字形编辑为更大。我只是在 Linux 上使用 FontForge 完成的；我花了大约 5 分钟。

这是之前和之后的示例（之后在底部）：

![默认和编辑的 Deja Vu Sans Mono 双右箭头](../Images/23ca4b753a9d7a4c9db96b5ef422ae9e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:43:09.920

不幸的是，我不知道它们是否也支持 Unicode 字符以及其中一个是否符合您的喜好，但请尝试使用[Source Code Pro](http://blogs.adobe.com/typblography/2012/09/source-code-pro.html)和[Droid Sans Mono](https://www.google.com/webfonts/specimen/Droid+Sans+Mono)。我猜你已经用谷歌搜索过了，但是这个包含 42 种等宽字体的[任意列表可能会删除一些新名称。](http://www.codeproject.com/Articles/30040/Font-Survey-42-of-the-Best-Monospaced-Programming)

我个人对 DejaVu Sans Mono 很满意，但我同意箭头（在其他字符中）不是最好的。

在相关的说明中：浏览器（在我的例子中是 Firefox）显示各种有线 Unicode 字符的能力给我留下了深刻的印象。如果我没记错的话，他们会采用一种后备策略。也就是说，如果主字体不能处理一个字符，就会尝试一个（或多个）后备字体。我不认为您可以直接使用这种方法，但是沿着这些思路搜索可能会为您的问题产生其他潜在的解决方案。

# javascript - jquery如何打开多个窗口浏览器

> ID：12930057
> 
> 赞同：0
> 
> 时间：2012-10-17T08:25:08.960
> 
> 标签：javascript, jquery

我想在窗口浏览器中显示我的pdf，实际上它适用于单个pdf我想同时打开两个窗口浏览器......这是我的问题......它可以同时工作任何一个而不是两个...... ...但价值获取一切正常...提前谢谢你..

```
 if (is_chrome) {

            window.open('<%: Url.Action("PrintLabelasPDFChrome", "Shipments") %>' + '?OrderNumber=' + orderno + '&orderItemNo=' + orderItemNo + '&orderShipmentID=' + orderShipmentID + '&strPackinglistDetail=' + '' + '&shipdate=' + '' + '&OrderGuid=' + '', 'Lables', 'attribute1,attribute2');
           window.open('<%: Url.Action("PrintCustomLabel", "Shipments") %>' + '?orderShipmentID=' + orderShipmentID + '&strPackinglistDetail=CustomsDocument', 'Lables', 'attribute1,attribute2');
        }
       else {

            window.open('<%: Url.Action("PrintLabelPDF", "Shipments") %>' + '?OrderNumber=' + orderno + '&orderItemNo=' + orderItemNo + '&orderShipmentID=' + orderShipmentID + '&strPackinglistDetail=' + '' + '&shipdate=' + '' + '&OrderGuid=' + '', 'Lables', 'attribute1,attribute2');
            window.open('<%: Url.Action("PrintCustomLabel", "Shipments") %>' + '?orderShipmentID=' + orderShipmentID + '&strPackinglistDetail=CustomsDocument', 'Lables', 'attribute1,attribute2');
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:29:53.820

这是纯 Javascript，而不是 jQuery。

您只需指定新的 windowName 即可创建一个新的。只需在windowName中添加一个uid，对应于每个pdf文件。

```
window.open('actionToFileNo1', 'documentWindow1'); 
```

参考[@MDN](https://developer.mozilla.org/en-US/docs/DOM/window.open)。

# javascript - Regex to extract line containing term

> ID：12930067
> 
> 赞同：0
> 
> 时间：2012-10-17T08:25:21.610
> 
> 标签：javascript, regex

I've been using this regex

```
/(?:[^ .,;:]+[ .,;:]+){3}(?:term1|term2)(?:[ .,;:]+[^ .,;:]+){3}/gi 
```

to extract selected terms and the preceding and succeeding 3 words. I'd like to change the regex so that I extract the line containing the selected terms. The line will be bounded by \n but I'd also like to trim leading and trailing spaces.
How do I alter the regex to do that?

example input:

```
 This line, containing  term2, I'd like to extract.  
        This line contains term13 and I'd like to ignore it  
  This line, on the other hand, contains term1, so let's keep it. 
```

ouput would be

```
This line, containing  term2, I'd like to extract.
This line, on the other hand, contains term1, so let's keep it. 
```

See code to be altered below.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
<script>
var Input = "   This line, containing  term2, I'd like to extract."
Input += "        This line contains term13 and I'd like to ignore it."
Input += "  This line, on the other hand, contains term1, so let's keep it."

 var matches = Input.match(/(?:[^ .,;:]+[ .,;:]+){3}(?:term1|term2)(?:[ .,;:]+[^ .,;:]+){3}/gi);
 var myMatches = ""
  for (i=0;i<matches.length;i++)
  {
  myMatches += ("..." + matches[i] + "...\n"); //assign to variable
  }
  alert(myMatches)
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:38:20.487

就像 Asad 指出的那样，您可以将 \b 用于单词边界，例如 term1 不会匹配 term13 。

正则表达式：

```
^ *(.*\b(?:term1|term2)\b.*) *$ 
```

应该做你所追求的。您的比赛将在第一个（也是唯一一个）捕获组中。只需遍历它们，您就完成了。

[在rubular上看到它。](http://rubular.com/r/4qtqECwlcW)

# web-services - File web service architecture

> ID：12930070
> 
> 赞同：1
> 
> 时间：2012-10-17T08:25:32.917
> 
> 标签：web-services, file-io, soa, fileserver

I need to implement a web service which could provide requested files to other internal applications or components running on different networks. Files are dispersed across different servers in different locations and can be big as few gigabytes.

I am thinking to create a RESTful web service which will have implementation to discover the file, redirect the HTTP request to another web service on different location and send the file via HTTP.

**Is it a good idea to send the file via HTTP or will it be better for the web service to copy the file to the location where requester component could access it?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:39:54.480

通过 HTTP 分发大文件的最大问题是您会遇到各种阻止它的限制。作为一个简单的示例，WCF 允许您配置最大有效负载大小，但您最多只能将其配置为 2 GB。您可能会在堆栈的所有层中遇到此类问题。我怀疑它们中的任何一个都是不可克服的（要解决上述限制，您可以流式传输文件的块，而不是整个文件，尽管这会[引入它自己的问题](http://blogs.msdn.com/b/yassers/archive/2006/01/21/515887.aspx)），但是您可能会遇到很多超时和随机故障，这是通过调整这个或那个服务或客户端的配置来修复。

此外，在处理大文件时，您必须仔细考虑如何处理传输过程中不可避免的故障（例如网络掉线）。根据您使用的特定技术，它们可能具有一些“恢复”功能，但您需要在提交之前确保它是可靠的。

一种可能性是像[Facebook 在分发大型二进制文件时](http://arstechnica.com/business/2012/04/exclusive-a-behind-the-scenes-look-at-facebook-release-engineering/)所做的那样- 使用 BitTorrent。因此，您的网络服务提供文件的洪流，而不是文件本身。BitTorrent 的最大优势是它*非常*强大，并且可以很好地扩展。值得考虑，但这在很大程度上取决于您的环境和特定的工作负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:02:26.963

如果您要服务的文件不经常更改或根本不更改，您可以使用许多策略，因为 RB 建议的策略，或者使用支持部分数据操作的纯 HTTP，请参阅[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-14.16)。

但是根据您的使用场景，我还建议您看一下[Amazon Web Services - S3（简单存储服务）](http://aws.amazon.com/documentation/s3)，它可能已经完成了您正在尝试做的事情，它很便宜并且具有高可用性。

# windows-mobile - Windows Mobile 能否仅在单击“程序”中的图标后才显示 UI？

> ID：12930076
> 
> 赞同：1
> 
> 时间：2012-10-17T08:25:50.767
> 
> 标签：windows-mobile, compact-framework

我有一个用 C# (.net CF) 编写的应用程序，我希望它具有以下行为。1\. 应用程序在后台启动，设备启动时连接服务器。2\. 当用户单击程序中的图标以显示应用程序 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:17:54.677

您可以使用通知 API 通过应用程序代码执行此操作。通知 API 使您可以在任务栏或主屏幕上显示图标（如桌面窗口任务栏的通知区域）。应用程序本身以最小化（隐藏）启动，如果用户单击通知图标，您可以直接显示 UI 或显示带有链接的气泡以显示您的应用程序。

另见[http://www.christec.co.nz/blog/archives/104](http://www.christec.co.nz/blog/archives/104)（通知图标）

另请参阅[http://msdn.microsoft.com/en-us/library/aa446525.aspx](http://msdn.microsoft.com/en-us/library/aa446525.aspx)（今日屏幕图标）

编辑：

选项三和最简单的一个：通常一个 Windows 移动应用程序应该只运行一次（单个实例）。为此，MS Win32 C++ SmartDevice 代码插入一些代码来检查以前启动的窗口，该窗口与当前要启动的实例具有相同的标题和类。如果是这样，C++ 代码使用前一个窗口的窗口句柄和参数 SW_SHOWNORMAL) 执行 ShowWindow，然后退出。在 Compact Framework 中也可以实现相同的功能，您可以在 Program.cs WinMain() 函数中查找先前启动的实例。如果存在先前的实例，则将 ShowWindow() 与找到的实例的句柄一起使用并退出进一步的执行。这样，您的应用程序开始最小化，但如果尝试通过单击程序图标（或 exe 文件）再次启动，它将进入前台。在 C# 中，您将需要 FindWindow() 和 ShowWindow() PInvokes。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:28:26.180

没有办法做到这一点，至少不能在同一个流程实例中。您可以接近做您想做的事情的唯一方法是创建两个流程。第一个是没有连接到服务器的 UI 的进程。第二个将是您的实际 UI 流程。您必须设计一种进程间通信方式（可能是套接字？）在两者之间交换数据。

# css - Joomla 模板无法在 IE8 上正确显示

> ID：12930081
> 
> 赞同：1
> 
> 时间：2012-10-17T08:26:08.817
> 
> 标签：css, internet-explorer, templates, joomla

[我已经从http://templatesforjoomla.eu/free-joomla-1.5-templates/blackandwhite-free-joomla-1.5-template.html](http://templatesforjoomla.eu/free-joomla-1.5-templates/blackandwhite-free-joomla-1.5-template.html)安装了黑白免费模板 我真的很喜欢这个模板并想使用它但我发现了一个问题。它不能在 IE8 上正确显示（据说可以在 IE7+ 上工作）。这些是我的问题，您也可以在演示站点上看到

1.  滑块在除 IE 之外的所有设备上都可以正常工作 - 仅显示图片，旁边没有文字
2.  当顶部的子菜单到达滑块中的图片时-它们隐藏在它后面

我对 joomla 有一些经验，但 IE 一直是我的噩梦。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:45:00.053

您可以尝试为 IE8 设置条件 css，这样您就可以解决所有 css 问题.. 请注意，IE8 仍然存在一些限制，例如不呈现 CSS3 或媒体查询..

您可以在此处阅读有关 IE 条件注释的更多信息[http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

# python - 如何区分字符串和其他 Iterables？

> ID：12930082
> 
> 赞同：2
> 
> 时间：2012-10-17T08:26:07.973
> 
> 标签：python, string, iterable

我试图通过传递一个可能是字符串或字符串列表的参数来重载我的函数。以字符串列表结尾的最简单方法是什么？

```
>>> foo
'bar'
>>> bar
['foo', 'bar']

def myfunc(arg):
    listarg = list()
    listarg.extend(arg)
    print listarg

>>> myfunc(bar)
['foo', 'bar']
>>> myfunc(foo)
['b', 'a', 'r'] 
```

当我通过 foo 我想看`['bar']`.

我一直在使用`isinstance(arg, str) or isinstance(arg, unicode)`，`isinstance(arg, collections.Iterable)`但对它们并不感到兴奋，因为后者不起作用，而前者，我不能只是加入一个列表或其他东西 - 我虽然`str`会这样做，但后来`unicode`出现了，现在担心可能会有更多的测试对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:28:50.827

在 Python 2 中，`str`两者`unicode`都派生自`basestring`.

唉，在 Python 3 中，没有这样的公共父类。在这里你应该测试`str`and `bytes`。

* * *

```
def myfunc(arg):
    listarg = arg if not isinstance(arg, basestring) else [arg]
    print listarg

>>> myfunc(bar)
['foo', 'bar']
>>> myfunc(foo)
['bar']

>>> print sys.version
2.7.2 (default, Jun 20 2012, 16:23:33) 
```

# android - android编程时如何调试ListView代码？

> ID：12930083
> 
> 赞同：1
> 
> 时间：2012-10-17T08:26:10.393
> 
> 标签：android, android-widget, android-listview, android-2.2-froyo

如下图所示，ListView的源码不包含在sdk中，那么如何获取这个类的源码呢？

然后我可以调试Listview的代码。

![在此处输入图像描述](../Images/e5a4636adaaffffccc7677b29f06ee8b.png)

**Edit1**：我使用的是 sdk 2.2，它没有名为 source code 的模块，只有 android 4.x 有这样的模块:(

![在此处输入图像描述](../Images/a2bd96a28e102e4bad0dc95e562ddf36.png)

![在此处输入图像描述](../Images/ee2a37e6c8171b0e7719bc4df217ba25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:36:14.843

在控制台中键入`android`以打开 Android SDK 管理器。展开您要使用的 Android 版本，选中*Sources for Android SDK*复选框并点击*Install*。这就是你需要做的一切。之后您将在 中找到源代码`<SDK_PATH>/sources/android-XX`。您的 IDE 现在应该能够调试代码（至少 NetBeans 可以）。

**编辑（对于 2.2）**

我想如果你真的想要 2.2 的源代码，你需要[检查整个 android 项目](http://source.android.com/source/index.html)并切换到所需的标签。（使用 获取所有标签的列表`git tag -l`）您可以将该代码复制到上述文件夹，然后查看您的 IDE 是否在那里检测到它。

# javascript - 如何在ckeditor中填充选择菜单

> ID：12930084
> 
> 赞同：1
> 
> 时间：2012-10-17T08:26:19.580
> 
> 标签：javascript, ckeditor

我正在尝试在我的自定义插件中向我的选择菜单中添加选项。我想从我拥有的数组中获取这些选项，并使用 forsearch 或 for 创建这些选项。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:25:46.013

您能否向我们展示您生成选择框的代码？如果我猜对了，你也许可以做类似的事情

```
var things = [];
var your = ["Derpy","Fluttershy","Applejack"];
for(var i = 0; i < your.length; i++) {
    // The two values used to separate actual and display values if needed
    things[i] = [your[i],your[i]];
}

// snip snip
tab.add({
    type: 'select',
    label: 'myAwesomePonySelector',
    id: 'myAwesomePonySelector',
    items : things
    // your other definitions, like onShow and commit
}); 
```

我希望这有帮助。

# android - Android闪光灯相机在拍照前关闭

> ID：12930087
> 
> 赞同：1
> 
> 时间：2012-10-17T08:26:35.537
> 
> 标签：android, camera

我正在尝试构建自定义相机。我有一个启动/停止闪光灯的按钮。当它打开时，我将它设置为闪光模式 TORCH。在某些设备上，有人告诉我闪光灯会在拍照前停止。这发生在某些 android 2.3 设备上。

有没有其他人遇到过这个问题？任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:02:49.053

是的，我发现了同样的问题，尤其是在 HTC 手机上。

我已经设置了使用 FLASH_MODE_ON 而不是 FLASH_MODE_TORCH 的条件

```
List<String> pList = mCamera.getParameters().getSupportedFlashModes();

if (getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) {
    if (pList.contains(Parameters.FLASH_MODE_TORCH) && (!ManufacturerName.contains("htc"))) {
        parameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
    }
    else
    if (pList.contains(Parameters.FLASH_MODE_ON)) {
        parameters.setFlashMode(Parameters.FLASH_MODE_ON);
    }
} 
```

# android - 我应该在 android 中使用 setDaemon() 吗？

> ID：12930088
> 
> 赞同：9
> 
> 时间：2012-10-17T08:26:44.490
> 
> 标签：android, multithreading

我正在为我的应用程序创建一个服务线程，该线程将执行后台任务，因此只有在我的主线程正在运行时才会使用它。

那么我应该将它声明为 Daemon 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:52:11.670

在 Android 上，最好确保明确管理线程。告诉他们何时终止。

请参阅此处的相关讨论。他们没有找到解决方案，而是观察了长期存在的线程：

[为了在应用程序退出时终止工作线程，我们有什么钩子](https://stackoverflow.com/questions/5641077/what-hooks-do-we-have-in-order-to-do-worker-thread-termination-on-application-ex)

请注意，此平台不保证标准 Java 关闭挂钩：

[http://developer.android.com/reference/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29](http://developer.android.com/reference/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)

因此，与其依赖（未记录的？）相信 Android 无论如何都会正确地杀死您的 VM 并猜测守护程序/不是守护程序，控制线程似乎更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T08:44:29.877

并不真地。Android 没有`main()`应用程序的方法，它们不会退出，而是由系统管理。如果它决定终止您的应用程序以释放资源，它（很可能）不会关心您是否有守护线程。

# nosql - Apache Cassandra 是否有任何 GIS 扩展？

> ID：12930089
> 
> 赞同：3
> 
> 时间：2012-10-17T08:26:46.207
> 
> 标签：nosql, cassandra, gis

我想将 Cassandra 用于我的 Web 应用程序，因为它将管理大量信息。问题是它还会处理大量地理数据，所以我需要一个 GIS (http://en.wikipedia.org/wiki/Geographic_information_system) cassandra 扩展来捕获、存储、操作、分析、管理和呈现所有地理数据类型。

类似 PostGIS for PostgreSQL 的东西。它已经存在了吗？类似的东西？有什么建议么？

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:28:45.433

好吧，我们在 PlayOrm 的一个客户（一个在 cassandra 之上的客户端，它有自己的命令行客户端）对 GIS 很感兴趣，所以我们将添加存储 GIS 数据的功能，尽管我认为它们已经存在。下周我会与某人会面，因此在此期间，您可能需要查看 PlayOrm。

数据将从 cassandra 读取并显示在我见过的最大的显示器上，其中有一些大型机器支持大量图形卡......非常酷的设置。

目前，PlayOrm 提供连接和 Scalable-SQL，但如果我们继续处理 GIS 数据，我们很可能会将空间查询添加到组合中。

# c# - 启动 WinForm 应用程序时显示 C++ 系统命令窗口

> ID：12930090
> 
> 赞同：0
> 
> 时间：2012-10-17T08:26:50.733
> 
> 标签：c#, c++

我有一个基于 C++ 的应用程序。该应用程序依次触发基于 C# 的 WinForm 可执行文件。我使用 system() 来启动它。当我这样做时，我会得到系统（命令提示符）窗口以及我的表单。我的问题是如何抑制这个窗口。我只想在没有提示窗口的情况下启动应用程序...

```
// Trigger the form application
system("C:\\tmp\\MyApp\\SBCForm.exe"); 
```

# c++ - CMake：对函数的未定义引用

> ID：12930093
> 
> 赞同：0
> 
> 时间：2012-10-17T08:26:53.583
> 
> 标签：c++, c, compilation

我有以下目录结构：

```
 ├── build (empty dir)
   ├── CMakeLists.txt
   ├── easylogging++.h
   ├── help.h
   ├── operation.h
   ├── operation_list.h
   ├── operations
   │   ├── CMakeLists.txt
   │   ├── matchcount.cc
   │   └── matchcount.h
   └── ops_toolkit.cc 
```

我是 CMake 的新手，正在尝试编写 CMakeLists.txt。我的 matchcount.h 有一个签名，其实现在 matchcount.cc 中（作为典型的 C/C++ 结构）。以下是我在基本目录中的 CMakeLists.txt

```
cmake_minimum_required(VERSION 2.6)
project(ops_toolkit)

add_subdirectory(operations)

add_executable(ops_toolkit ops_toolkit.cc)
set(CMAKE_CXX_FLAGS "-std=c++0x") 
```

以下是操作目录中的一个

```
include_directories(${ops_toolkit_SOURCE_DIR}/operations)
link_directories(${ops_toolkit_BINARY_DIR}/operations)
set(all_operations_HEADER operations/matchcount.h)
set(all_operations_SOURCES operations/matchcount.cc) 
```

我得到未定义的函数签名引用，`int matchcount(int, const char**)`并在下面抱怨

```
dev:~/work/ops_toolkit/build$ make
Scanning dependencies of target ops_toolkit
[100%] Building CXX object CMakeFiles/ops_toolkit.dir/ops_toolkit.cc.o
Linking CXX executable ops_toolkit
CMakeFiles/ops_toolkit.dir/ops_toolkit.cc.o: In function `__static_initialization_and_destruction_0(int, int)':
ops_toolkit.cc:(.text+0x249): undefined reference to `operations::matchcount(int, char const**)'
collect2: ld returned 1 exit status
make[2]: *** [ops_toolkit] Error 1
make[1]: *** [CMakeFiles/ops_toolkit.dir/all] Error 2
make: *** [all] Error 2 
```

有人可以帮我弄这个吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:38:22.810

问题来自`add_subdirectory`及其相关联`CMakeLists.txt`的（./operations 中的那个），这是不正确的，请参阅[此 SO question 以了解 add_subdirectory 命令的含义](https://stackoverflow.com/questions/6891447/cmake-variable-scope-add-subdirectory)。

为了清楚起见，我还建议您将`include_directories`and`link_directories`放入主 CMake 文件中。

# jquery - Jquery click 影响的 div 超出了应有的范围

> ID：12930096
> 
> 赞同：0
> 
> 时间：2012-10-17T08:27:00.263
> 
> 标签：jquery, drop-down-menu

得到了下拉文本区域的这段代码。目标是在单击复选框时让 div.card 显示/隐藏，这是可行的，但是单击 div.card 本身会使其隐藏，我该如何防止这种情况发生？

jQuery看起来像这样

```
$('.options .checkbox').click(function(){ 
    $('.options .card').toggleClass("hidden").toggleClass("show");
}); 
```

HTML 看起来像这样

```
<label>
Label description
<strong>
    + € 0,50
</strong>
<input class="checkbox" type="checkbox">
    <div class="card hidden">
        <textarea>
        </textarea>
    </div>
</label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:29:06.167

您可以防止单击事件冒泡到父级：

```
$('.card').click(function(e) {
    e.stopPropagation()
}); 
```

或者，您可以验证目标元素是否真的是您所追求的元素：

```
$('.options .checkbox').click(function(e) {
    if (!$(e.target).hasClass('checkbox')) return false; 

    $('.options .card').toggleClass("hidden").toggleClass("show");
}); 
```

# android - Android 媒体播放器服务最佳实践

> ID：12930097
> 
> 赞同：1
> 
> 时间：2012-10-17T08:27:00.360
> 
> 标签：android, service, media-player

我目前正在编写音乐应用程序。在阅读了一些主题之后，是时候开始编写服务并从我的主要活动中与它进行交互了。Google Dec 文档似乎表明主要活动应该用于繁重的工作，并且应该尽可能简化服务。我的主要活动做了很多工作来维护歌曲的播放列表。当用户单击播放时，我一直在尝试（没有成功）将该播放列表传递给服务。但是，我现在想知道是否需要这样做。

我的想法是我可以让主要活动创建播放列表。当用户单击播放时，它使用字符串将第一个轨道路径发送到处理播放的服务。该服务还具有 oncomplete 侦听器。当它触发时，它会将广播发送回活动。当接收到广播时，它将启动“下一个”功能，该功能将下一个曲目扔给服务。

这在理论上可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:05:04.913

我已经为自己解决了。对于那些感兴趣的人，我的理论非常有效。该活动处理播放、下一个、上一个等和播放列表。服务从活动接收指令，并通过广播请求新指令。

# javascript - 如何停止 CSS3 过渡

> ID：12930098
> 
> 赞同：20
> 
> 时间：2012-10-17T08:27:01.500
> 
> 标签：javascript, jquery, css, css-transitions, css-animations

我想停止正在进行的转换。

我在互联网上发现了一些参考文献[1][2]，但我似乎无法将它们拼凑起来。

这是第一个建议的小提琴（使用 jQuery 和 CSS Transit 作为上下文）：http: [//jsfiddle.net/thomseddon/gLjuH/](http://jsfiddle.net/thomseddon/gLjuH/)

谢谢

[1] [https://twitter.com/evilhackerdude/status/20466821462](https://twitter.com/evilhackerdude/status/20466821462)

[2] github.com/madrobby/zepto/issues/508

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T17:24:10.647

所以我想通了：http: [//jsfiddle.net/thomseddon/gLjuH/3/](http://jsfiddle.net/thomseddon/gLjuH/3/)

诀窍是将您正在制作动画的每个 css 属性设置为其当前值（可能是中间转换），例如：（`$(this).css('prop', $(this).css('prop'));`可能希望使用 $(this).data(props); 将所有属性存储在元素中的对象中并循环遍历他们）。

明确设置属性后，您可以运行 0s 动画来覆盖先前的动画并有效地停止元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-23T10:31:16.793

有一个更简单的解决方案。如果您只想停止过渡（而不是暂停它）。只需将 css 设置为当前计算的样式。例如，在自定义滚动解决方案中，top 是转换属性。

```
element.style.top=getComputedStyle(element).top; 
```

就是这样。

# android - 当我开发一个Android应用程序时，如何退出这个应用程序？

> ID：12930102
> 
> 赞同：1
> 
> 时间：2012-10-17T08:27:14.777
> 
> 标签：android, exit

当我开发一个Android应用程序时，如何退出这个应用程序？我尝试了我能做的任何事情，但我无法退出我正在开发的应用程序。这个怎么做 ？任何想法？

这是我的解决方案，如下所示，

```
public class SysApplication extends Application {
private List<Activity> mList = new LinkedList<Activity>();
private static SysApplication instance;

private SysApplication() {
}

public synchronized static SysApplication getInstance() {
    if (null == instance) {
        instance = new SysApplication();
    }
    return instance;
}

// When an activity is created  ,excute this method ,addActivity(activity) 
public void addActivity(Activity activity) {
    mList.add(activity);
}

      //When I want to exit this aplication ,excute this method ,exit()
public void exit() {
    for (Activity activity : mList) {
        activity.finish();
    }

    System.exit(0);
}

@Override
public void onLowMemory() {
    super.onLowMemory();
    System.gc();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:33:16.633

这对您很有用：[如何关闭 android 应用程序？](https://stackoverflow.com/questions/8548448/how-to-shutdown-an-android-application). 有方法：Activity.finish() 用于关闭活动。

简单的方法是按主页按钮。它会将您的应用程序置于后台，Android 会处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:26:32.587

如果你需要一个明确的退出事件来很好地清理东西，并且你有一堆活动、服务等，你可以创建广播接收器来完成清理工作，当你的代码决定是时候“关闭” " - 无论是按钮还是一些合乎逻辑的结论 - 它应该广播相应的意图。

您可能需要这样做，例如，以防止电池耗尽。

否则，似乎没有理由关心“关机”。

# java - Servlet如何调用多个提交按钮

> ID：12930106
> 
> 赞同：0
> 
> 时间：2012-10-17T08:27:24.350
> 
> 标签：java, hibernate, jsp, servlets

我有一个关于我的简单应用程序的问题我有 2 个单独的 .JSP 文件，比如说 register 和 login.jsp 都具有提交操作，并且这两个 jsp 共享同一个 servlet，比如说 usercontrol.servlet 一旦登录按钮是，我如何调用该操作如果他们共享公共 servlet，是否也与 register.jsp 单击相同？

这是我的 servlet 代码：

```
if(request.getParameter("register").equals("Register")){
            if(request.getParameter("first") == "" || request.getParameter("middle") == "" || request.getParameter("last") == "" || 
                    request.getParameter("loginid") == "" || request.getParameter("pass") == "" || request.getParameter("pass2")== ""){
                JOptionPane.showMessageDialog(null, "Cannot leave null value from one of the textfields");
                response.sendRedirect("AdminPage/Register.jsp");

            }
            //else if(request.getParameter("pass") != request.getParameter("pass2")){
                //JOptionPane.showMessageDialog(null, "Password Mismatch, Check you password and retype it correctly");
                //response.sendRedirect("AdminPage/Register.jsp");
            //}
            else{
                RegisterUser(request, response);
            }
    }

    else if(request.getParameter("login").equals("Login")){
        if(request.getParameter("username") == ""){
            JOptionPane.showMessageDialog(null, "Username is required");
            response.sendRedirect("AdminPage/Login.jsp");
        }
        else if(request.getParameter("password") == ""){
            JOptionPane.showMessageDialog(null, "Password is required");
            response.sendRedirect("AdminPage/Login.jsp");
        }
        else if(request.getParameter("username") == "" || request.getParameter("password") == ""){
            JOptionPane.showMessageDialog(null, "Password/Username is required");
            response.sendRedirect("AdminPage/Login.jsp");
        }
        else{
            LoginUser(response, request);
        }   
    } 
```

我正在将我的应用程序与休眠集成。

这是我的 jsp 提交按钮我没有包括整个表单我只包括提交按钮。

登录.jsp

```
<input type="submit" name="login" value="Login" /> 
```

注册.jsp

```
<input type="submit" name="register" value="Register"/> 
```

我的问题是每次我运行应用程序时，它总是执行 if..else 语句中的所有操作，还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:42:12.633

在你的jsp中，你应该有提交按钮

对于 login.jsp

```
<input type="submit" name="login" value="Login"/> 
```

对于 register.jsp

```
<input type="submit" name="register" value="Register"/> 
```

现在在servlet中你可以检查像

```
if(request.getParameter("login") != null) {
  // request is comming from login jsp
  // do validation, perform actual transaction 
} else if(request.getParameter("register") != null) {
  // request is comming from register jsp
  // do validation, perform actual transaction 
} 
```

# visual-studio-2010 - 如何将控件添加到 Visual Studio 2010 Express 工具箱（代码、系统文件等）？

> ID：12930109
> 
> 赞同：0
> 
> 时间：2012-10-17T08:27:36.257
> 
> 标签：visual-studio-2010, visual-studio, components, toolbox

我们需要增强 WindowsForms.NET 网格组件的安装程序：我们应该能够在安装产品时将其添加到 VS 2010/2012 Express 版本（VB、C#...）的工具箱中。我们可以使用众所周知的 EnvDTE.DTE 对象对所有非 Express 版本执行此操作，但这不适用于 Express。

是否有实现目标的方法？比如说，更改一些系统文件（VS 的系统）？即，也许，VS 将工具箱项目列表存储在文件中的某个位置，以便我们可以访问它并相应地进行更改？也许，这种方式也可以用于所有非 Express 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:49:05.590

是的，有多种方法：

*   手动安装
*   工具箱控件安装程序 (TCI)
*   Visual Studio 自动化对象模型 (DTE)
*   VSI、VSIX 包
*   VSPackage

我写了一篇教程文章更详细地讨论它们：

[Visual Studio 工具箱控件集成](http://www.componentowl.com/articles/visual-studio-toolbox-control-integration)

我认为 TCI 方法适用于 Visual Studio 的 Express 版本。此外，VSI 和 VSIX 包是确保安装组件的非常方便的方法。

# eclipse - 如何在Eclipse版本中配置javah工具：windows 4.2.0（android NDK编译）

> ID：12930127
> 
> 赞同：0
> 
> 时间：2012-10-17T08:28:31.463
> 
> 标签：eclipse, configuration, android-ndk, javah

我尝试在 eclispe 中设置超级简单的外部工具，这就是我所做的 javah，这意味着尝试网络中的所有链接仍然可以正确设置。当我关闭外部工具配置时，它给了我错误

![在此处输入图像描述](../Images/9ee7516ea8e4ab104f4e06bd8f37b821.png)

![在此处输入图像描述](../Images/6bb141c63a948e3376af4b1f23c78b6b.png)

我尝试使用和不使用 -jni 仍然给我错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: Not a valid class name: –d
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:177)
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:68)
    at com.sun.tools.javah.JavahTask.run(JavahTask.java:509)
    at com.sun.tools.javah.JavahTask.run(JavahTask.java:335)
    at com.sun.tools.javah.Main.main(Main.java:46) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:20:43.687

尝试设置一个蚂蚁任务 - 见链接

[http://ant.apache.org/manual/Tasks/javah.html](http://ant.apache.org/manual/Tasks/javah.html)

# flash - Flex UI 在 Firefox/Chrome 中性能缓慢

> ID：12930128
> 
> 赞同：0
> 
> 时间：2012-10-17T08:28:32.543
> 
> 标签：flash, apache-flex, browser, adobe

我的应用程序的 UI 是使用 Adob​​eFlex 开发的。我只有几个文本框和复选框。我的同事在她的系统中遇到了一些问题。当她尝试在 Firefox 或 chrome 上使用该应用程序时，她遇到了非常缓慢的文本加载效果。她说“打字时要花几秒钟才能赶上每个字母”。但当我们在 Internet Explorer 中尝试时，她感觉更好，数据加载速度也更快。尽管我们都使用相同的操作系统（Windows 7），但我没有遇到她提到的任何问题。即使她的系统 RAM 比我的系统多 2GB，我在 Firefox 和 Chrome（在我的系统中）都没有遇到这样的问题。

有人可以提出解决方案吗？指针/引用也会有所帮助。

PS：我也试过重新安装firefox和flash插件。没有任何效果。

# msbuild - msbuild 程序集编号 - 获取错误的编号

> ID：12930131
> 
> 赞同：1
> 
> 时间：2012-10-17T08:28:41.433
> 
> 标签：msbuild, msbuild-task, msbuild-4.0, msbuildcommunitytasks, msbuildextensionpack

我的 CommonAssemblyInfo.cs 中有以下代码

```
using System.Reflection;
using System.Resources;
using System.Runtime.InteropServices;

[assembly: AssemblyCompany("XXXX")]
[assembly: AssemblyProduct("BuildVersionTest")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCopyright("Copyright 2012")]
[assembly: NeutralResourcesLanguage("en-US")]
[assembly: AssemblyVersion("4.0.*")]
[assembly: AssemblyFileVersion("4.0.6.121017")]
[assembly: AssemblyInformationalVersion("4.0.0.0")] 
```

在我的项目中，我链接了这个文件，并且还有 assemblyinfo.cs

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
[assembly: AssemblyTitle("BuildToolUtility")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyCulture("")]
[assembly: ComVisible(false)]
[assembly: Guid("cfgfsfdrf68e-5af7-44f0-b310-f8a8191465fd")] 
```

当我构建我的 dll 文件版本时

4.0.6.55481

为什么？它不应该包含我的 CommonAssemblyInfo.cs 中的内容吗？

检查这张图片： http: [//postimage.org/image/nrtab3hk1/](http://postimage.org/image/nrtab3hk1/)

然后在输出窗口中显示另一个版本？？？？我能得到这个。

```
10:11:52 AssemblyVersion:
10:11:52   ***** Start getting assemblyVersion *****
10:11:52   4.0.4673.16477
10:11:52   ***** Done getting assemblyVersion *****
10:11:52 BuildRepositoryZip:
10:11:52   ***** Start zipping deploy folder. Making package *****
10:11:52   4.0.4673.16477
10:11:52   Creating ZipFile: ..\..\4.0.4673.16477.zip
10:12:11   ***** Done zipping deploy folder. Making package ***** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:03:32.883

您的版本文件属性使用的数字太高，因此它作为 Uint16 溢出。您应该会看到类似警告 CS1607: Assembly generation -- The version '4.0.6.160017' specified for the 'file version' 不是正常的 'major.minor.build.revision' 格式。因此，一旦您的 svn 存储库足够老，您就不能使用原始的 svn 修订号...

# java - Java - 从日期中减去天数

> ID：12930134
> 
> 赞同：3
> 
> 时间：2012-10-17T08:28:43.540
> 
> 标签：java, date, calendar

我试图从最初作为字符串出现的日期中减去 5 天。

我看过关于这个主题的其他一些帖子，但我从代码中得到的结果总是不正确的。主要问题是，例如减去天数时，年份值似乎没有改变 -`2012-01-01 subtract 5 days gives me 'Jan 27 2012'`使用此代码 -

```
cal.add(Calendar.DATE, -5); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:31:50.717

你知道吗，在 Java 中，月份`1`实际上是二月？

```
Date februaryTheFirst = new Date(2012,1,1); // equals 2012-02-01 
```

这可以解释你所看到的。如果你想实例化 2012-01-01 ，你应该这样做：

```
Date firstDayOf2012 = new Date(2012,0,1); // this is 2012-01-01 
```

处理时会发生完全相同的事情`Calendar`：

```
Calendar.getInstance().set(2012,0,1); // 2012-01-01 
```

请务必查看 和 的[`Date(int, int, int)`](http://goo.gl/Bec8q)文档[`Calendar.set(int, int, int)`](http://goo.gl/OPxCL)。此外，您可以检查解析字符串的方式。如果您使用[`SimpleDateFormat.parse(...)`](http://goo.gl/U3TNs)，事情会变得更容易。

奇怪，不是吗？想想看……就像一个有趣的事实一样，IntelliJ 的文档用 注释了第二个参数，月份，`@MagicConstant`以记住程序员正在发生一些非常奇怪的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:33:04.600

Calendar.FEBRUARY 是 1 日，2012 年 2 月 1 日之前的五天是 2012 年 2 月 27 日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T07:17:12.920

# 乔达时间

Joda-Time 2.7 库使这项工作变得更加容易。只需调用该`minusDays`方法。

```
String input = "2012-01-01";
DateTimeZone zone = DateTimeZone.forID( "America/Montreal" );
DateTime dateTime = new DateTime( input, zone );
DateTime then = now.minusDays( 5 );
DateTimeFormatter formatter = DateTimeFormat.forStyle( "FF" ).withZone( zone ).withLocale( Locale.CANADA_FRENCH );
String output = formatter.print( then ); 
```

如果您想要一天的开始，请添加对 的调用`withTimeAtStartOfDay`。在您的情况下，这在解析没有时间的仅日期字符串时是不必要的。

```
DateTime dateTimeAtStartOfDay = new DateTime( input, zone ).withTimeAtStartOfDay(); 
```

如果您只想要没有时间或时区的日期，请使用`LocalDate`而不是 DateTime。

```
LocalDate then = new LocalDate( "2012-01-01" ).minusDays( 5 ); 
```

如果您需要转换为旧的 java.util.Date，请调用`toDate`DateTime。

# java.time

Java 8 有一个新包 java.time。这些新课程的灵感来自 Joda-Time，但经过重新设计。java.time 和 Joda-Time 都可以很好地解决这个特殊问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:49:04.550

您的实现是正确的，并且您也得到了正确的值。

`Calendar`的月份开始于`0`

```
0 = Jan
1 = Feb 
```

所以减去肯定会返回你`5 days`的 东西，这也将帮助你[为什么 Java 日历中的 1 月是 0 月？](https://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar)`2012-01-01``Jan 27 2012`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T08:42:40.317

这是在我的电脑上运行的一段代码。首先，您必须获取日历实例来执行您的计算。

```
 Calendar cal = Calendar.getInstance();
     System.out.println("Today : " + cal.getTime());
    // Subtract 300 days from the calendar
    cal.add(Calendar.DATE, -300);
    System.out.println("300 days ago: " + cal.getTime()); 
```

这是您将获得的输出：

```
 Today : Wed Oct 17 10:41:23 EET 2012
    300 days ago: Thu Dec 22 10:41:23 EET 2011 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-17T08:32:01.117

利用：

```
cal.add(Calendar.DAY_OF_MONTH, -5) 
```

编辑：对不起。`DAY_OF_MONTH`是 的同义词`DATE`。而不是`1`使用`Calendar.JANUARY`.

# php - symfony 1.4 中的锁进程

> ID：12930138
> 
> 赞同：0
> 
> 时间：2012-10-17T08:28:53.990
> 
> 标签：php, symfony1, symfony-1.4

我需要一种方法来防止在 symfony 1.4 上的进程多次运行。

比如：当一个用户正在运行这个进程时，另一个试图运行这个进程的用户会收到一条警告消息，通知该进程正在运行。

有没有办法在不使用数据库的情况下实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:18:28.513

kirugan 的方法可能在大多数情况下都有效，但它容易受到竞争条件的影响，并且在发生崩溃时可能会卡住。

这是一个更强大的解决方案。它使用 PHP 的文件锁定，因此您**知道**锁是原子的，如果您稍后忘记释放锁或您的进程崩溃，它会自动释放。默认情况下，获取锁是非阻塞的（即如果锁已经被另一个进程持有，`getLock()`将立即返回 FALSE）。但是，如果您愿意，您可以设置调用块（即等到锁可用）。最后，您可以为代码的不同部分设置不同的锁。只需为锁使用不同的名称。

唯一的要求是返回的目录`getLockDir()`必须是服务器可写的。随意更改锁定目录的位置。

注意：我认为[flock](http://php.net/manual/en/function.flock.php) () 在Windows 上的行为可能不同（我使用linux），所以请仔细检查它是否对您有问题。

**myLock.class.php**

```
class myLock
{
  /**
   * Creates a lockfile and acquires an exclusive lock on it.
   *
   * @param string $filename The name of the lockfile.
   * @param boolean $blocking Block until lock becomes available (default: don't block, just fail)
   * @return mixed Returns the lockfile, or FALSE if a lock could not be acquired.
   */
  public static function getLock($name, $blocking = false)
  {
    $filename = static::getLockDir() . '/' . $name;
    if (!preg_match('/\.lo?ck$/', $filename))
    {
      $filename .= '.lck';
    }
    if (!file_exists($filename))
    {
      file_put_contents($filename, '');
      chmod($filename, 0777); // if the file cant be opened for writing later, getting the lock will fail
    }
    $lockFile = fopen($filename, 'w+');
    if (!flock($lockFile, $blocking ? LOCK_EX : LOCK_EX|LOCK_NB))
    {
      fclose($lockFile);
      return false;
    }
    return $lockFile;
  }

  /**
   * Free a lock.
   *
   * @param resource $lockFile
   */
  public static function freeLock($lockFile)
  {
    if ($lockFile)
    {
      flock($lockFile, LOCK_UN);
      fclose($lockFile);
    }
  }

  public static function getLockDir()
  {
    return sfConfig::get('sf_root_dir') . '/data/lock';
  }
} 
```

**如何使用**

```
$lockFile = myLock::getLock('lock-name');
if ($lockFile) {

  // you have a lock here, do whatever you want

  myLock::freeLock($lockFile);
}
else {
  // you could not get the lock. show a message or throw an exception or whatever
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:53:44.033

这是我的功能：

```
function lock(){
   $file = __DIR__ . '/file.lock';
   if(file_exists($file)){
        /* exit or whatever you want */
        die('ALREADY LOCKED');
   }
   touch($file);
}
function unlock(){
    $file = __DIR__ . '/parser.lock';
    if(file_exists($file)){
        unlink($file);
    }else{
        echoln("unlock function: LOCK FILE NOT FOUND");
    }
}

function exitHandler(){
     echoln('exitHandler function: called');    
         unlock();
} 
```

开头使用`lock`函数，设置`exitHandler`函数在`register_shutdown_function()`. 您可以使用相同的方法将此片段保存为类或将其保存为帮助文件

# javascript - mootools :not 选择器不起作用

> ID：12930142
> 
> 赞同：0
> 
> 时间：2012-10-17T08:29:06.210
> 
> 标签：javascript, mootools

我正在一个不幸使用 mootools 的网站上工作。我试图在点击页面上的任何链接时触发一个事件，除非该链接具有某个 ID。这是我的代码：

```
$$('a:not(#learn-more)').addEvent('click', function(){
    alert("");
}); 
```

如果我从选择器中删除 :not(#learn-more) ，则单击任何链接时都会触发该事件，但如果使用 :not() 则不会发生任何事情。我没有收到任何错误或任何事情都没有发生。有人知道发生了什么吗？

更新：它使用的是 mootools 版本 1.2.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:45:56.670

我相信 not 选择器在**1.2.4**版本中被破坏了，我认为 using`not([id=learn-more])`可能会起作用，但`not(#learn-more)`不会。

为此，您需要升级到已修复问题的**1.3**版。

# matplotlib - Tkinter 中的 Matplotlib 绘图 - 每次更新都会添加新的 NavigationToolbar？

> ID：12930143
> 
> 赞同：3
> 
> 时间：2012-10-17T08:29:08.670
> 
> 标签：matplotlib, tkinter

我正在开发一个 Tkinter-GUI 以交互方式生成 Matplotlib 图，具体取决于用户输入。为此，它需要在用户更改输入后重新绘制。

我已经让它在原则上工作，但想包括`NavigationToolbar`. 但是，我似乎无法使更新`NavigationToolbar`正常工作。

这是代码的基本工作版本（没有用户输入条目）：

```
# Import modules
from Tkinter import *
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg

# global variable: do we already have a plot displayed?
show_plot = False

# plotting function
def plot(x, y):
    fig = plt.figure()
    ax1 = fig.add_subplot(1,1,1)
    ax1.plot(x,y)
    return fig

def main():
    x = np.arange(0.0,3.0,0.01)
    y = np.sin(2*np.pi*x)
    fig = plot(x, y)

    canvas = FigureCanvasTkAgg(fig, master=root)
    toolbar = NavigationToolbar2TkAgg(canvas, toolbar_frame)

    global show_plot
    if show_plot:
        #remove existing plot and toolbar widgets
        canvas.get_tk_widget().grid_forget()
        toolbar_frame.grid_forget()

    toolbar_frame.grid(row=1,column=1)
    canvas.get_tk_widget().grid(row=0,column=1)
    show_plot=True

# GUI
root = Tk()

draw_button = Button(root, text="Plot!", command = main)
draw_button.grid(row=0, column=0)

fig = plt.figure()
canvas = FigureCanvasTkAgg(fig, master=root)
canvas.get_tk_widget().grid(row=0,column=1)
toolbar_frame = Frame(root)
toolbar_frame.grid(row=1,column=1)

root.mainloop() 
```

按“情节！” *一旦*生成情节和`NavigationToolbar`. 第二次按下它会重新绘制，但会生成*第二次* `NavigationToolbar`（每次按下“Plot！”时都会生成第二次）。这听起来像是`grid_forget()`行不通。然而，当我改变

```
 if show_plot:
        #remove existing plot and toolbar widgets
        canvas.get_tk_widget().grid_forget()
        toolbar_frame.grid_forget()

    toolbar_frame.grid(row=1,column=1)
    canvas.get_tk_widget().grid(row=0,column=1)
    show_plot=True 
```

至

```
 if show_plot:
        #remove existing plot and toolbar widgets
        canvas.get_tk_widget().grid_forget()
        toolbar_frame.grid_forget()
    else:
        toolbar_frame.grid(row=1,column=1)
    canvas.get_tk_widget().grid(row=0,column=1)
    show_plot=True 
```

然后当“Plot！”时`NavigationToolbar` *确实消失了* 第二次按下（但正如预期的那样，没有新`NavigationToolbar`的来代替旧的）。`grid_forget()` *工作也是*如此，只是不像预期的那样。

我究竟做错了什么？有没有更好的更新方法`NavigationToolbar`？

非常感谢任何帮助！拉斯塔尔达

**编辑：**

我发现如果您销毁 NavigationToolbar 而不是忘记它，这将起作用。但是你必须在之后完全重新创建小部件，当然：

```
canvas = FigureCanvasTkAgg(fig, master=root)
toolbar_frame = Frame(root)

global show_plot
if show_plot: # if plot already present, remove plot and destroy NavigationToolbar

    canvas.get_tk_widget().grid_forget()
    toolbar_frame.destroy()

toolbar_frame = Frame(root)
toolbar = NavigationToolbar2TkAgg(canvas, toolbar_frame)
toolbar_frame.grid(row=21,column=4,columnspan=3)
canvas.get_tk_widget().grid(row=1,column=4,columnspan=3,rowspan=20)

show_plot = True 
```

但是，下面 Hans 展示的更新方法要好得多，因为您不必销毁和重新创建任何东西。我只是想强调我的方法的问题（除了不优雅和性能）可能是我没有使用`destroy()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T09:44:25.427

一种稍微不同的方法可能是通过清除和重绘来将图形重用于后续绘图。这样，您不必破坏和重新生成图形和工具栏：

```
from Tkinter import Tk, Button
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg

# plotting function: clear current, plot & redraw
def plot(x, y):
    plt.clf()
    plt.plot(x,y)
    # just plt.draw() won't do it here, strangely
    plt.gcf().canvas.draw()

# just to see the plot change
plotShift = 0
def main():
    global plotShift

    x = np.arange(0.0,3.0,0.01)
    y = np.sin(2*np.pi*x + plotShift)
    plot(x, y)

    plotShift += 1

# GUI
root = Tk()

draw_button = Button(root, text="Plot!", command = main)
draw_button.grid(row=0, column=0)

# init figure
fig = plt.figure()

canvas = FigureCanvasTkAgg(fig, master=root)
toolbar = NavigationToolbar2TkAgg(canvas, root)
canvas.get_tk_widget().grid(row=0,column=1)
toolbar.grid(row=1,column=1)

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:33:51.977

当你按下“绘图！” 它调用的按钮`main`。`main`创建导航工具栏。所以，每次你按下按钮你都会得到一个工具栏。我对 matplot 了解不多，但很明显为什么你会得到多个工具栏。

顺便说一句，`grid_forget`不会破坏小部件，它只是将其从视图中删除。即使你没有看到它，它仍然在记忆中。

通常在 GUI 中，您只创建一次所有小部件，而不是一遍又一遍地重新创建相同的小部件。

# php - (x && y || z) 和 (x AND y OR z) 之间的区别

> ID：12930144
> 
> 赞同：2
> 
> 时间：2012-10-17T08:29:09.167
> 
> 标签：php, comparison, operators

`AND`我想知道使用单词（例如，`OR`）而不是它们的代码等效项（`&&`， ）进行比较是否有任何缺点`||`？除了后者是与许多其他编程语言兼容的语法之外，还有其他选择它们的理由吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:33:19.183

AND 和 && 不一样

例如：

```
<?php $a && $b || $c; ?> 
```

不一样

```
<?php $a AND $b || $c; ?> 
```

第一件事是（a和b）或c

第二个 a 和 (b 或 c)

因为|| 优先级高于 and，但低于 &&

有关更多信息，请查看[PHP 逻辑运算符](http://www.php.net/manual/en/language.operators.logical.php)和[运算符优先级](http://www.php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T08:39:04.373

与操作员一起使用时会出现意想不到的缺点`=`。

```
$result = false || true; # true, $result is true
/* Translated to result = (false || true) */ 
```

和

```
$result = false or true; # true, $result is false
/* Translated to (result = false) or true */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T08:34:16.700

PHP 手册（在[Logical Operators](http://www.php.net/manual/en/language.operators.logical.php)中）讨论了您在问题中提出的问题：

> “and”和“or”运算符的两种不同变体的原因是它们以不同的优先级运行。（请参阅[运算符优先级](http://www.php.net/manual/en/language.operators.precedence.php)。）

所以区别在于优先级，而不是每个运算符的逻辑含义。

在您的示例中：`(x && y || z)`您`(x AND y OR z)`不会看到两个表达式之间有任何区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:31:44.413

它们做同样的事情，但`&&`and`||`运算符的优先级高于`AND`and `OR`。

基本上我认为这会变得令人困惑，所以如果你只坚持一种符号而不混合它们，你会没事的，你的代码将保持可读性。

# cookies - 在 cookie 中设置用户位置 - 高效的工作流程？

> ID：12930146
> 
> 赞同：0
> 
> 时间：2012-10-17T08:29:26.863
> 
> 标签：cookies, nginx

用户访问网站

```
Has user got "location" cookie set?

    Yes - Print "country" value from cookie on page
           - Finish

    No  -  Do geoip look up with nginx

        Was this successful?

            Yes - Store value in cookie
                   - Print "country" value from cookie on page
                   - Finish

            No  - Do not print "country" on page
                   - Finish 
```

这是最有效和最合适的工作流程吗？

# javascript - $(document).ready(

> ID：12930151
> 
> 赞同：2
> 
> 时间：2012-10-17T08:29:41.620
> 
> 标签：javascript, asp.net-mvc, razor, document-ready

我刚刚注意到，当我的 javascript 调用 $(document).ready(function....找到 DOM 对象。

Javascript

```
$(document).ready(function () {
    $('input:radio,select').change(function () {
        DO STUFF... 
```

HTML 助手

```
@Html.RadioButtonList(m => m.ItemType, new SelectList(Model.ItemTypes, "Name", "Name") 
```

其他

```
@Html.DropDownListFor(n => n.ApartmentFloor, new SelectList(Model.ApartmentFloors, "Id", "Floor"), new { @id = "floorsSelect", @class = "exists" }) 
```

通常，单选按钮和下拉菜单应该获得 .change 功能，但由于在添加 .change 时它们还没有呈现，所以它们没有获得该功能。

有没有办法让“准备好 html 助手”而不是“准备好文档”？

**编辑**：

人们已经指出 HTML 助手在客户端开始渲染之前运行在服务器上，因此也应该在之前完成。情况似乎并非如此，因为当我“在准备好文档时”调试 JS 时，HTML 帮助器对象尚未呈现，但页面的其余部分已呈现。

所以问题仍然存在，有没有办法在 HTML 帮助器对象中添加“加载”函数，或者直接从具有剃刀语法的 cshtml 文件添加“更改”函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:32:57.360

尝试像这样注册活动，

```
 $('input:radio,select').on("change" ,function () { }) ; 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:58:09.400

我意识到我从未发布过我的问题的解决方案。尽管人们指出应该在文档准备好之前渲染 HTML 助手，但对我来说似乎并非如此。所以我所做的是直接在 HTML 帮助器上添加事件处理程序：

`@Html.RadioButtonList(m => m.MyObject, new SelectList(Model.MyObjects, "Name", "Name"), "inputChangeHandler($(this));")`

效果很好 =)

# .htaccess - Mediawiki 的缩略图处理程序（重写）不起作用

> ID：12930156
> 
> 赞同：3
> 
> 时间：2012-10-17T08:29:56.803
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, mediawiki

我的.htaccess：

```
RewriteEngine On
RewriteRule ^/?wiki(/.*)?$ %{DOCUMENT_ROOT}/w/index.php [L]
RewriteRule ^/?$ %{DOCUMENT_ROOT}/w/index.php [L]

RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-d
RewriteRule ^/?w/images/thumb/[0-9a-f]/[0-9a-f][0-9a-f]/([^/]+)/([0-9]+)px-.*$ %{DOCUMENT_ROOT}/w/thumb.php?f=$1&width=$2 [L,QSA,B] 

RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-d
RewriteRule ^/?w/images/thumb/archive/[0-9a-f]/[0-9a-f][0-9a-f]/([^/]+)/([0-9]+)px-.*$ %{DOCUMENT_ROOT}/w/thumb.php?f=$1&width=$2&archived=1 [L,QSA,B] 
```

index.php 重写规则有效，但缩略图无效。如果直接获取 thumb.php，它可以工作：

```
thumb.php?f=test.jpg&width=180 
```

所以，问题在于重写。我尝试了很多变种，但它仍然不起作用。错误可能在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-01T22:37:52.170

那是因为`images/.htaccess`。

见[`Bug 65220`](https://bugzilla.wikimedia.org/show_bug.cgi?id=65220)。

# android - 我可以制作只覆盖一半屏幕的android应用吗

> ID：12930158
> 
> 赞同：2
> 
> 时间：2012-10-17T08:30:01.537
> 
> 标签：android, call

我在接听电话时制作了广播接收器我想添加一个按钮（除了接听和拒绝），它会执行某个功能，所以我看到了两个解决方案，一个是我做的（如果可能半屏透明活动将有按钮但不要阻止回答和拒绝按钮，或者我看到的第二个解决方案是制作类似 BIG CALLER PICTURE 应用程序的游戏。谷歌任何人都可以向我推荐一些好的例子。THX

```
 public class CallReceiveD extends BroadcastReceiver {
private ITelephony telephonyService;
String phoneNumber;
@Override
public void onReceive(Context context, Intent intent) {
    // i will call the intent here

            }} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:40:39.483

您绝对可以将活动创建为占据屏幕一部分的对话框。虽然我不确定这会完成你想要的，因为通过打开新活动，电话活动应该会被 onPause 调用，并且可能会打乱你的流程。也许尝试打开一个活动并在清单中的活动中定义

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

看看这是否适用于你想做的事情。然后你可以围绕活动的位置、大小等调整暗淡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:38:28.137

我不确定它是否会有所帮助，但有一个名为 StandOut 的“浮动”应用程序框架。也许它可以帮助你...

[http://forum.xda-developers.com/showthread.php?t=1688531](http://forum.xda-developers.com/showthread.php?t=1688531)

它提供了创建浮动在屏幕上而不是占据整个应用程序窗口的方法。您仍然可以与下面的应用程序进行交互。该线程提供了很多示例，也许其中有一些适合您的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T19:47:08.367

您当然可以创建部分屏幕活动。如果按照 MikeIsrael 的建议以对话主题开始，则新活动下方没有任何内容。像往常一样简单地编写一个 Activity，但是给它你选择的 layout_width 和 layout_height - 说 300x400dp。

然后可以使用 onAttachWindow 来设置大小和位置。此示例将窗口设置为显示的右上角，但在 actionBAr 下方

```
public void onAttachedToWindow() {
    super.onAttachedToWindow();

    View view = getWindow().getDecorView();
    WindowManager.LayoutParams lp = (WindowManager.LayoutParams) view.getLayoutParams();

    lp.gravity = Gravity.LEFT | Gravity.TOP;
    lp.width = (int)(400 * screenInfo.density);
    lp.x = screenInfo.widthPixels - lp.width;
    lp.y = actionBarHeight;
    getWindowManager().updateViewLayout(view, lp); 
```

}

请注意，尽管重力表示左上角，但 X,Y 决定了我放置窗口的位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:35:56.737

我可能是错的，但据我所知，您将无法启动半屏意图（活动）。你可以做一个透明的活动，但它会阻止下面的系统按钮。我会说你必须尝试覆盖系统调用接收器工具来实现这一点。

# jquery - 使用 jQuery 在 textarea 中突出显示 html-tags。可能的？

> ID：12930161
> 
> 赞同：2
> 
> 时间：2012-10-17T08:30:37.670
> 
> 标签：jquery, html, tags, textarea, syntax-highlighting

![例子](../Images/e0b6916962e47a0a4b397f4a8510134f.png)

我只会在 textarea 中将 html-tags 突出显示为红色背景。

有人能告诉我用 jQuery 最简单的方法吗？

我不知道我能做什么。因为我们不能在 textarea 中使用 HTML 标签，对吧？:(

或者给我一些资源。

谢谢

**游乐场：http:** [//jsfiddle.net/RbLrK/](http://jsfiddle.net/RbLrK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:07:02.053

在常规文本区域中无法实现对 html 标记的所需控制级别。标签被简单地视为文本，您不能突出显示部分文本。

尝试更复杂的东西，例如[CODEMIRROR](http://codemirror.net/)或[ACE](http://ace.ajax.org/#nav=about)

# google-apps-script - Google App Script：尝试为电子表格单元格设置公式

> ID：12930163
> 
> 赞同：2
> 
> 时间：2012-10-17T08:30:42.213
> 
> 标签：google-apps-script, google-sheets

我正在尝试使用该`cell.setFormula`函数为 Google 电子表格单元格设置公式。

这是我的函数代码。重要的代码行是我尝试的最后一行`setFormula`。

```
//Create new empty project sheet
function copySheet() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var temp = ss.getSheetByName("Project_Template");
  var name = Browser.inputBox("Create New Project", "Enter name for new project", Browser.Buttons.OK_CANCEL);
  if (name != "cancel") {
    ss.insertSheet(name,1, {template:temp})
    //Add project name to project code cell
    var newSheet = ss.getSheetByName(name);
    var cell = newSheet.getRange(3, 2);
    cell.setValue(name);
    //Update formula in placemarkers sheet
    var rowNum = ss.getNumSheets() - 3;
    var formulaSheet = ss.getSheetByName("Placemarkers");
    var formulaCell = formulaSheet.getRange(rowNum, 1);
    formulaCell.setFormula('=if(isna(filter('name'!AH3:AH3,'name'!AH3:AH3 <> ""))=true,"",filter('name'!AH3:AH3,'name'!AH3:AH3 <> ""))');
  }
} 
```

当我尝试保存脚本时，我收到以下错误消息：

```
Missing ) after argument list. (line 103) 
```

我确信它与引号和双引号的组合有关。如果没有错误消息，我无法让它工作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T08:39:10.237

`+`不插入运算符来连接字符串和变量`name`。下面的代码部分解决了这个问题

```
formulaCell.setFormula('=if(isna(filter(' + name + '!AH3:AH3,' + name + '!AH3:AH3 <> ""))=true,"",filter(' + name + '!AH3:AH3,' + name + '!AH3:AH3 <> ""))'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T11:42:12.563

..它对我不起作用。

```
cell.setFormula("=COUNTIF('name'!B14:B71,"G:*")");
cell.setFormula("=COUNTIF(' + name + '!B14:B71,"G:*")"); 
```

我猜这个问题出在**setFormula 的**输入中的**" 。**

 **它以公式内容中的**“**作为其参数字段的终止符并等待**)**符号来包围方法调用。

解决方案：

在**setFormula**字符串中的**"**之前插入 \ ：

 **```
cell.setFormula("=COUNTIF('name'!B14:B71,\"G:*\")"); 
```

_****

# vb.net - 在 vb.net 2010 中，将 ImageList 加载到 ListView 无法正常工作

> ID：12930167
> 
> 赞同：1
> 
> 时间：2012-10-17T08:30:48.527
> 
> 标签：vb.net

我尝试将图像从 ImageList 加载到 ListView 并且效果很好......但是当加载表单时，ImageList 的最后一个图像没有出现......我将在组合框 selectedIndexChanged 事件和表单中调用此过程加载...当表单加载时，ImageList 中的最后一个图像没有出现，当我多次单击组合框时，所有图像都按预期显示...有什么帮助吗？这是代码..

```
Private Sub LoadMenuItem()

    lvItem.Clear()
    Dim adptItem As New Restaurant_Management_SystemDataSetTableAdapters.ItemTableAdapter
    Dim categoryID As Integer = cboccategory.SelectedValue
    Dim dtItem As Restaurant_Management_SystemDataSet.ItemDataTable = adptItem.GetDataByCategoryID(categoryID)

    lvItem.BeginUpdate()
    For Each drItem As Restaurant_Management_SystemDataSet.ItemRow In dtItem.Rows
        Dim ms As System.IO.MemoryStream = New System.IO.MemoryStream(drItem.ImageForItem)
        Dim img As Image = System.Drawing.Image.FromStream(ms)
        ImageList1.Images.Add(drItem.ItemID, img)
        lvItem.Items.Add(drItem.ItemName.Trim, drItem.ItemID)
    Next
    lvItem.EndUpdate()

    cboItem.ValueMember = "ItemID"
    cboItem.DisplayMember = "ItemName"
    cboItem.DataSource = dtItem
    lvItem.Refresh
End Sub 
```

# django - Django 可以将 forloop.counter0 放入自定义标签参数列表吗？

> ID：12930169
> 
> 赞同：0
> 
> 时间：2012-10-17T08:30:59.400
> 
> 标签：django, google-visualization, django-templates

所以我使用 django-google-charts 来生成条形图。这里的图表是在“out” div 中绘制的。但是我想在一页中生成多个图表，在不同的div中，例如“out0”中的chart0，“out1”中的chart1，“out2”中的chart2。

```
{% load googlecharts %}
<div id="out"></div>
{% googlecharts %}
    {# some code here #}
    {% graph "out" "out_data" "out_options" %}
{% endgooglecharts %} 
```

所以我尝试修改`{% graph "out" "out_data" "out_options" %}`，我的意图是 `{% graph out|add:{{ forloop.counter0 }} "out_data" "out_options" %}`让图形输出源将替换为 out0、out1、out2 等。

但是，不允许在 {{%%}} 中使用 {{}}。另外，图形标签将首先将任何内容作为字符串参数，以逗号分隔。

是否可以解决模板方面的问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:37:00.737

```
{% graph "out"|add:forloop.counter0  "out_data" "out_options" %} 
```

{% %} 内没有括号，它应该可以工作

另外： |add 连接字符串，您正在连接一个变量（输出而不是“输出”），上面的代码现在应该可以按您的预期工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:59:39.513

最后，我只使用谷歌图表工具 Javasciprt API 工作得很好。它允许在一页上显示多个图表。类似的问题[在这里](https://stackoverflow.com/questions/9888920/how-to-add-two-google-charts-on-the-one-page)。最后一个答案是解决方案。

# c# - 将参数化查询发送到数据库的更简单方法？

> ID：12930170
> 
> 赞同：0
> 
> 时间：2012-10-17T08:31:00.700
> 
> 标签：c#, .net, vb.net, visual-studio-2005, dbcommand

有没有办法用更少的行编写以下代码？执行这样一个简单的查询似乎需要很多代码。没有 LINQ，因为我使用的是 VS2005。VB 或 C# 中的答案都是可以接受的。

```
Using cmd As DbCommand = oDB.CreateCommand()
    cmd.CommandText = "SELECT * FROM [Table1] WHERE [Date] BETWEEN @Date1 AND @Date2"
    cmd.CommandTimeout = 30
    cmd.CommandType = CommandType.Text
    cmd.Connection = oDB
    Dim param As DbParameter
    param = cmd.CreateParameter()
    param.Direction = ParameterDirection.Input
    param.DbType = DbType.Date
    param.ParameterName = "@Date1"
    param.Value = Now().Date
    cmd.Parameters.Add(param)
    param = cmd.CreateParameter()
    param.Direction = ParameterDirection.Input
    param.DbType = DbType.Date
    param.ParameterName = "@Date2"
    param.Value = Now().Date.AddDays(intDaysAhead)
    cmd.Parameters.Add(param)
End Using
Dim reader As DbDataReader = cmd.ExecuteReader() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:39:32.217

这些可能是您可以获得的最少行数：

```
Using con = New SqlConnection("Connectionstring")
    Using cmd = New SqlCommand("SELECT * FROM [Table1] WHERE [Date] BETWEEN @Date1 AND @Date2", con)
        cmd.CommandTimeout = 30
        cmd.Parameters.AddWithValue("@Date1", Date.Today)
        cmd.Parameters.AddWithValue("@Date2", Date.Today.AddDays(intDaysAhead))
        con.Open()
        Using reader = cmd.ExecuteReader()

        End Using
    End Using
End Using 
```

（假设`SqlClient`但其他数据提供者类似）

# c# - 使用系统帐户的 Outlook 互操作

> ID：12930177
> 
> 赞同：1
> 
> 时间：2012-10-17T08:31:20.043
> 
> 标签：c#, .net, interop, outlook, office-interop

我们正在尝试在 Windows 服务中使用 .NET Outlook 自动化。它在系统帐户下运行。

当尝试调用`outlook.CreateItemFromTemplate()`或`outlook.Session.OpenSharedItem()`（这里`outlook`是 Outlook 应用程序的一个实例）时，它失败并出现异常“操作中止（来自 HRESULT 的异常：0x80004004（E_ABORT））”。

服务启用了“*允许服务与桌面交互*”选项。

当从通常的 Win32 应用程序调用时，此代码工作得很好，但在系统帐户下运行的服务中却不行。有没有人有任何建议/解决方法如何使其在系统帐户下工作？

# javascript - 我怎样才能使javascript中的实际文本而不是超链接的背景是可点击的？

> ID：12930178
> 
> 赞同：3
> 
> 时间：2012-10-17T08:31:19.187
> 
> 标签：javascript, html, css, hyperlink

我有一个`a href`内部 div，表格单元格内的这个链接是多行的，文本居中对齐。

现在整个单元格变得可点击，因为 a href 填充了整个空间，除了最靠近边界的一小块区域。我希望链接文本周围的区域不可点击，只有文本。

这是CSS：

```
tbody td.link a{
    display: inline;
    font-family: Arial;
    font-size: 15px;
    color: #545454;
    position: absolute;
    padding-top: 4px;
    z-index: 10;
} 
```

由于 z-index 为 10，因此链接比背景“更接近用户”，如果我更改此链接，则整个链接将被禁用。我也试过这个，但没有结果：

```
$('td.link').find('a').click(function(ev){
            ev.preventDefault();
            ev.stopPropagation();

        }); 
```

摘要：有没有办法只让链接的实际文本字符可点击，而不是背景？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:38:40.007

我猜你的填充有问题：4px

由于 padding 是元素的一部分，它变得可点击。我建议在父元素上使用边距或填充。（您可以使用 box-sizing:border-box 来解决任何尺寸问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:50:19.013

您不能，因为实际文本不构成元素。一个元素总是在字符周围包含一些空白空间（更不用说它们的内部了）。但是您可以限制元素占用的区域。这可能意味着删除其填充，将其行高设置为较小的值（可能为 1），并将块元素更改为内联元素。如需更具体的建议，您需要提供更具体的信息（HTML 和 CSS 代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:34:09.523

您添加此样式

```
tbody td.rank a{
text-decoration:none;
} 
```

# c++ - 持有共享资源的类的合理设计

> ID：12930180
> 
> 赞同：3
> 
> 时间：2012-10-17T08:31:23.150
> 
> 标签：c++, c++11, shared-ptr

考虑以下持有共享资源的类的简化示例：

```
class array
{
    typedef std::array<float, 1000> resource;

public:
    // default constructor, creates resource
    array() : p_(std::make_shared<resource>()), a_(0), b_(1000) {}

    // create view
    array operator()(int a, int b) { return array(p_, a_+a, a_+b); }

    // get element
    float& operator[](int i) { return (*p_)[a_+i]; }

private:
    std::shared_ptr<resource> p_;
    int a_, b_;

    // constructor for views
    array(std::shared_ptr<resource> p, int a, int b) : p_(p), a_(a), b_(b) {}
}; 
```

现在我想知道如何为这个类定义一个不会混淆其用户的语义。例如，我想允许`operator=()`复制元素：

```
array x, y;
x = y;                 // copies all elements from y's storage to x's
x(30,40) = y(50,60);   // copies 10 elements 
```

但是，为了保持一致，复制构造函数和复制赋值运算符不应该总是复制吗？关于什么：

```
array z = x(80,90);    // will create an array referencing x's storage 
```

在这种情况下，编译器将忽略副本，因此无论我的复制赋值运算符做什么，都将保存对的存储`z`的引用。`x`没有办法解决这个问题。

那么赋值总是创建引用并显式声明复制是否更有意义？例如，我可以定义一个 wrapper class `copy_wrapper`，对其进行赋值会强制复制元素：

```
class copy_wrapper
{
    array& a_;
public:
    explicit copy_wrapper(array& a) : a_(a) {}
    array& get() { return a_; }
};

class array
{
    // ...
    array& operator=(const array& a);    // references
    array& operator=(copy_wrapper c);    // copies
    copy_wrapper copy() { return copy_wrapper(*this); }
}; 
```

这将迫使用户编写：

```
array x, y;
x(30,40) = y(50,60).copy();  // ok, copies
x(30,40) = y(50,60);         // should this throw a runtime error?
x = y;                       // surprise! x's resource is destructed. 
```

有点麻烦，而且比这更糟糕：不是你所期望的。

我应该如何处理这种歧义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:25:45.283

*赋值总是创建引用并显式声明复制是否更有意义？*

在实践中，**没有**。期望开发人员记住`a = b`不会复制是`std::auto_ptr`陷入困境的原因。C++11 标准委员会还决定`std::move`并`std::forward`允许开发人员*明确地*说“我**不是**在复制”。

*怎么样：`array z = x(80,90);`在这种情况下，编译器将忽略副本，因此无论我的复制赋值运算符做什么，z 都将持有对 x 存储的引用。没有办法解决这个问题。*

这是你的赠品。您希望 "array" 和 "view to an array" 采取不同的行动，但您用 class 来表示它们`array`。

实现一个`arrayview`具有类似公共接口的新类，并将范围`a_`和移动`b_`到`arrayview`.

```
array x, y;
x = y;                  // "array = array" copies all elements
x(30,40) = y(50,60);    // "arrayview = arrayview" copies element range
arrayview v = x(80,90); // "arrayview(const arrayview&) shallow copies
x(30,40) = y;           // NOT DEFINED, since this has no clear meaning
array z = x(80,90);     // NOT DEFINED, since this has no clear meaning 
```

请注意，在您的赋值运算符中，从具有相同资源的`arrayview`复制 应该是有效的，但在这种特定情况下，您应该检查是否需要而不是.`arrayview``std::copy_backward``std::copy`

# xcode4.3 - 使用多个 XIB 和单个视图控制器创建通用应用程序时应用程序崩溃

> ID：12930181
> 
> 赞同：0
> 
> 时间：2012-10-17T08:31:30.970
> 
> 标签：xcode4.3, ios-universal-app

我在 Xcode 4.3.3 中创建了一个通用窗口应用程序。后来我添加了一个没有 XIB 的 View Controller(UniversalRootViewController) 类。然后我创建了两个 XIB 文件（RootViewController_iPhone、RootViewController_iPad），然后将这些 iPhone XIB 文件 RootViewController_iPhone 连接到 UniversalRootViewController 类： RootViewController_iPhone -> 选择文件所有者并将 Identity Inspector 中的类名更改为 UniversalRootViewController，然后将视图作为出口连接到 UniversalViewController 和为 RootViewController_iPad 做了同样的事情。

在 App Delegate 中，我添加了以下代码行。

```
UniversalRootViewController *controller = nil;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    controller = [[UniversalRootViewController alloc] initWithNibName:@"RootViewController_iPad" bundle:[NSBundle mainBundle]];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:controller];
    [self.window addSubview:navigationController.view];
}
else
{
    controller = [[UniversalRootViewController alloc] initWithNibName:@"RootViewController_iPhone" bundle:[NSBundle mainBundle]];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:controller];
    [self.window addSubview:controller];
} 
```

我还在 UniversalApp-Info.plist 中添加了这两个键值对 主 nib 文件基本名称：RootViewController_iPhone 主 nib 文件基本名称（iPad）：RootViewController_iPad

当我运行此应用程序时，该应用程序通过显示以下错误消息来创建。

由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键视图的键值编码不兼容。”

我将 XIB 文件正确连接到 View Controller。我不知道为什么应用程序崩溃。请告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:59:23.147

您必须将文件所有者中的视图出口设置为 XIB 文件中的每个视图： - 转到 XIB 文件之一（例如 iphone）并用鼠标左键从文件所有者拖动到下面的顶部视图对象。选择视图。- 对其他 XIB 文件执行相同操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:00:06.140

我通过删除 Universal-Info.plist 中 Nib 文件的两个键值对解决了我的问题。现在该应用程序完美运行，没有任何崩溃。![我删除了以下两行](../Images/2147b4d82dd655e0dc0d7b7a633646e8.png)

# java - 如何在我的 GAE 网站上检测已从 Google 注销的用户

> ID：12930186
> 
> 赞同：0
> 
> 时间：2012-10-17T08:31:48.090
> 
> 标签：java, google-app-engine

将 Google 身份验证登录模块添加到我的 GAE 网站没有问题。

网页.xml：

```
<security-constraint> 
  <web-resource-collection> 
    <web-resource-name>All Access</web-resource-name> 
    <url-pattern>/*</url-pattern> 
  </web-resource-collection> 
  <auth-constraint> 
    <role-name>*</role-name> 
  </auth-constraint> 
</security-constraint> 
```

但是当我从谷歌退出时，我的网络客户端仍然持有带有“SACSID”的 cookie 名称，这认为我的谷歌帐户仍然有效。如何克服这样的问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:39:44.773

Provide a sign out link in your app. A user signing out of their Google account only affects first-party services; your users have to sign out separately from your app.

# c# - 图表工具在 Visual Studio 中显示为灰色

> ID：12930188
> 
> 赞同：2
> 
> 时间：2012-10-17T08:31:55.300
> 
> 标签：c#, .net, visual-studio-2010, charts

我正在尝试将图表添加到我的 Visual Studio 表单中，但该按钮显示为灰色。我正在使用 .NET Framework 3.5 和 C#。按照在线说明，我已经从该链接下载并安装了 dll 文件：http: [//www.microsoft.com/en-us/download/details.aspx?id=14422](http://www.microsoft.com/en-us/download/details.aspx?id=14422) 我还将它们作为参考添加并添加了以下行在我的表单文件的顶部：

`using System.Windows.Forms.DataVisualization.Charting;`

但按钮仍然是灰色的。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T12:01:23.967

要使图表控件可用，您需要：

1.  要使用 .Net 框架 4.0 或更高版本，或者为 .Net 框架 3.5 安装此：[http ://www.microsoft.com/en-us/download/details.aspx?id=14422](http://www.microsoft.com/en-us/download/details.aspx?id=14422)
2.  在工具箱上下文菜单 -> 选择项目... 上选择图表控件。（在“选择工具箱项目”对话框中按名称排序并滚动到图表。有两种：一种用于 Windows 表单，一种用于 Web 表单。您只需选择相关的内容。）

图表控件出现在工具箱的“数据”部分。

您不需要任何对表单源文件的“使用”子句，或项目引用中的任何引用。（添加控件时会自动为您添加引用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:27:56.330

我也有这个问题，几个小时都无法解决。

如此处发布： [Visual Studio 2010 工具箱控件已禁用或不活动](https://stackoverflow.com/questions/8871531/visual-studio-2010-toolbox-controls-disabled-or-inactive)

为了为我解决它，我只是右键单击工具箱中的一项，然后选择“重置工具箱”

这会重置整个工具箱，因此如上面答案中所述，所有自定义工具都丢失了，需要重新导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T09:27:54.563

有同样的问题。

我所做的是确保我使用与图表框架版本相同的框架。

在项目创建期间，默认使用 .net 3.5。但由于该图表是为 Framework 4.0 编写的，因此不适用于 3.5。

您需要通过执行以下操作将解决方案或项目框架更改为 4.0 或更高版本：

1.  在 Visual Studio 的菜单栏上，单击`<your project name>/Properties`。

2.  将目标框架更改为 4.0 或更高版本。

3.  保存属性设置。

4.  重建您的解决方案。

在此之后，您可以使用该图表组件。

# android - 一个具有多个动作处理的广播接收器与多个广播接收器

> ID：12930189
> 
> 赞同：2
> 
> 时间：2012-10-17T08:31:59.490
> 
> 标签：android, broadcastreceiver, android-service

我在我的 android 服务类中放置了一个广播接收器。迄今为止只有一种叫做“接收者”。最好只有一个带有选择语句的广播接收器（如`if else if`）？我可以在一个 android 服务类中放置多个广播接收器吗？

例如，这个示例代码与我使用的类似。其中有一个“else if”语句来处理两个不同的意图广播：

```
 public BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent){
        String action = intent.getAction();
    if(action.equals("com.test.AudioPlay")){
            // action for play
            Toast.makeText(AudioService.this, "play audio from service", Toast.LENGTH_LONG).show();
        }
        else if(action.equals("com.test.AudioPause")){
            // action for pause
            Toast.makeText(AudioService.this, "pause audio from service", Toast.LENGTH_LONG).show();
        }
    }

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:39:36.537

如果您只使用一个具有不同操作的广播接收器，那么对于所有操作，将比使用不同的广播接收器更有效。

当我读到您正在尝试广播音乐播放器的开始、暂停和所有功能时，您应该将该服务与您的活动绑定。有关 boundservices 的更多信息，您可以参考[开发者博客](http://developer.android.com/guide/components/bound-services.html)。

# php - Preg_match_all 不适用于雅虎结果

> ID：12930192
> 
> 赞同：1
> 
> 时间：2012-10-17T08:32:01.433
> 
> 标签：php, regex, preg-match-all

好的，所以 preg_match_all 对雅虎不起作用。

我正在尝试 preg_match_all 使用 cURL curl_multi_getcontent 方法从 Yahoo 获得的结果。

我已成功获取该站点等，但是当我尝试获取链接的结果时，它不会匹配任何内容。当我在 Notepad++ 中使用正则表达式时，它成功但显然不是在 PHP 中。

我目前正在使用：

```
preg_match_all(
    '#<span class="url" id="(.*?)">(.+?)</span>#si', $urlContents[2], $yahoo
); 
```

例如，检查 HTML，`[http://se.search.yahoo.com/search?p=random&toggle=1&cop=mss&ei=UTF-8&fr=yfp-t][1]`您会看到所有链接都以 . 开头`<span class="url" id="something random">`和结尾`</span>`。

有人可以帮助我如何检索这些信息吗？我只需要每个结果的实际链接地址。

## 整个 PHP 脚本

```
public function multiSearch($question)
{
    $sites['google'] = "http://www.google.com/search?q={$question}&gl=sv";
    $sites['bing'] = "http://www.bing.com/search?q={$question}";
    $sites['yahoo'] = "http://se.search.yahoo.com/search?p={$question}";

    $urlHandler = array();

    foreach($sites as $site)
    {
        $handler = curl_init();
        curl_setopt($handler, CURLOPT_URL, $site);
        curl_setopt($handler, CURLOPT_HEADER, 0);
        curl_setopt($handler, CURLOPT_RETURNTRANSFER, 1);

        array_push($urlHandler, $handler);
    }

    $multiHandler = curl_multi_init();
    foreach($urlHandler as $key => $url)
    {
        curl_multi_add_handle($multiHandler, $url);
    }

    $running = null;
    do
    {
        curl_multi_exec($multiHandler, $running);
    }
    while($running > 0);

    $urlContents = array();
    foreach($urlHandler as $key => $url)
    {
        $urlContents[$key] = curl_multi_getcontent($url);
    }

    foreach($urlHandler as $key => $url)
    {
        curl_multi_remove_handle($multiHandler, $url);
    }

    foreach($urlContents as $urlContent)
    {
        preg_match_all('/<li class="g">(.*?)<\/li>/si', $urlContent, $matches);
        //$this->view_data['results'][] = "Random";
    }
    preg_match_all('#<cite>(.+?)</cite>#si', $urlContents[1], $googleLinks);
    preg_match_all('#<span class="url" id="(.*)">(.+?)</span>#si', $urlContents[2], $yahoo);
    var_dump($yahoo);
    die();
    $findHtml = array('/<cite>/', '/<\/cite>/', '/<b>/', '/<\/b>/', '/ /', '/"/', '/<strong>/', '/<\/strong>/');
    $removeHtml = array('', '', '', '', '', '', '', '');
    foreach($googleLinks as $links => $val)
    {
        foreach($val as $link)
            $this->view_data['results'][] = preg_replace($findHtml, $removeHtml, $link);
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:33:47.833

首先，您不应该使用正则表达式来处理 HTML。有相当不错的 DOM 解析器可用于 PHP。例如：

```
$d = new DOMDocument;
$d->loadHTML($s);
$x = new DOMXPath($d);
foreach ($x->query('//span[@class="url"]') as $node) {
        // process each node the way you wish
        // print the id for instance
        echo $node->getAttribute('id'), PHP_EOL;
} 
```

除此之外，除了`id="(.*)"`贪婪之外，表达式应该可以工作；可以通过以下方式修复：

```
#<span class="url" id="(.*?)">(.+?)</span>#si 
```

`id="..."`和`>`;之后可能有更多文字。这将使表达式变为：

```
#<span class="url" id="(.*?)"[^>]*>(.+?)</span>#si 
```

# java - 达到目标整数

> ID：12930193
> 
> 赞同：4
> 
> 时间：2012-10-17T08:32:04.143
> 
> 标签：java, arrays

我有一个充满随机整数的随机长度数组。为简单起见，它们按从高到低的顺序排列。

我也有一个目标随机整数。

我需要在不使用不必要的数字的情况下获得总和大于或等于目标的所有组合。给定这个例子：

```
nums = [10, 6, 5, 3, 2, 1, 1]

target = 8 
```

我想要这个输出：

```
10 (10 is higher or equal to 8, so there's no need to sum it)

6+5

6+3

6+2

6+1+1

5+3

5+2+1

5+2+1 (Note that this result is different from the previous since there are 2 1s) 
```

我尝试了很多递归策略，但我找不到正确的答案。不需要特定的语言，欢迎使用伪代码。

编辑：发布代码

```
private static boolean filtrar(final CopyOnWriteArrayList<Padre> padres) {
        if (sum(padres) < TARGET) {
            return false;
        }
        int i;
        for (i = padres.size(); i >= 0; i--) {
            if (!filtrar(copiaPadresSinElemento(padres, i-1))) {
                break;
            }
        }
        // Solución óptima, no se puede quitar nada.
        if (i == padres.size()) {
            print(padres);
        }
        return true;
    }

    private static int sum(final CopyOnWriteArrayList<Padre> padres) {
        int i = 0;
        for (final Padre padre : padres) {
            i += padre.plazas;
        }
        return i;
    }

    private static void print(final CopyOnWriteArrayList<Padre> padres) {
        final StringBuilder sb = new StringBuilder();
        for (final Padre padre : padres) {
            sb.append(padre);
            sb.append(", ");
        }
        final String str = sb.toString();
        System.out.println(str);
    }

    private static CopyOnWriteArrayList<Padre> copiaPadresSinElemento(
            final CopyOnWriteArrayList<Padre> padres, final int i) {
        final CopyOnWriteArrayList<Padre> copia = new CopyOnWriteArrayList<Padre>();
        for (int e = 0; e < padres.size(); e++) {
            if (e != i) {
                copia.add(padres.get(e));
            }
        }
        return copia;
    } 
```

Padre 是一个简单的对象，其中包含每个数字的名称。Padre.plazas 是数字。

现在的数组是 [6,4,4,4,3,3,3]，目标是 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:50:26.643

我认为这样的事情会起作用：

```
function filter(array, target): Boolean{ //assumes array is sorted in descending order
  if(sum(array) < target) return false;
  for(i = array.length-1; i>=0; --i){
    if(! filter(array.createCopyRemovingElementAt(i), target)) break;
  }
  if(i==array.length-1) print(array); // solution is "optimal": could not remove a single number
  return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:59:48.183

一个低效的解决方案：复杂度 = O((2^n)*n)

```
for i = 0 to 2^size-of-array
do
   sum = 0
   for j = 0 to n-1
   do
     if(jth bit in i is 1)
     then
      sum+=array[j]
      fi
   done

  if(sum>=target)
     print the number i (uniquely identifies the set of numbers)
done 
```

# image - svg 剪辑图像并显示中风

> ID：12930195
> 
> 赞同：5
> 
> 时间：2012-10-17T08:32:11.377
> 
> 标签：image, html, svg, clip

嗨，我是这个网站的新手，所以如果我不清楚我想要做什么，请原谅我

**我的问题是：-**

我正在使用 HTML5 和 SVG 来剪辑图像，以便只显示剪辑/多边形形状内的图像部分，而多边形形状之外的任何部分都是不可见/被剪辑的

我还希望为多边形形状添加笔触宽度和颜色

**我正在使用的 SVG 代码：-**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="455px" height="435px" viewPort="0 0 455 435" enable-background="new 0 0 455 435" xml:space="preserve">
<g>
    <g>
        <clipPath ID="SVGID_1_">
            <path fill="none" stroke="#140063" stroke-width="3" stroke-miterlimit="10" d="M58.381,13.64
                c0,0-39.011-19.932-50.819-5.104c-11.81,14.831,0.924,33.405,7.394,56.408c6.466,22.996,12.383,53.957,12.194,64.569
                c-0.183,10.619,2.373,88.462,5.252,93.771c2.882,5.303-4.146,83.151-6.172,99.068c-2.035,15.925-18.668,83.151-18.668,83.151
                S-7.896,443.4,40.954,428.874c48.844-14.523,188.373-18.06,206.847-18.949c18.48-0.885,160.776,16.67,167.244,19.836
                c6.471,3.164,44.354,12.017,36.966-18.065c-7.396-30.072-22.252-97.301-22.252-97.301s-4.192-98.188-3.446-107.035
                c0.748-8.846,6.144-60.148,3.446-70.763c-2.698-10.614,16.704-95.534,19.478-103.495c2.774-7.96,6.825-35.329-33.088-26.511
                c-39.905,8.819-131.384,17.665-146.172,17.665C255.194,24.252,86.272,23.356,58.381,13.64z"/>
        </clipPath>
    </g>
</g>
<a xlink:href="#">  
    <image clip-path="url(#SVGID_1_)" height="500" width="667" style="border-color:black;border-width:5;"  xlink:href="img.jpg" />
</a>
</svg> 
```

上面提到的代码工作正常，它显示的是一个多边形的图像，只有落在形状内的图像部分被显示，而任何落在形状外的部分被隐藏

但不知何故，我尝试了各种方法，但仍然无法显示笔画/边框。

我的问题是如何在用于剪辑图像的多边形上显示边框/笔划

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:02:51.417

首先，请用小写字母写 ID，以使剪辑路径正常工作：`<clipPath id="SVGID_1_">`

其次，只需复制您的路径以使用常规形状。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="455px" height="435px" viewPort="0 0 455 435" enable-background="new 0 0 455 435" xml:space="preserve">
<g>
    <g>
        <clipPath id="SVGID_1_">
            <path fill="none" stroke="#140063" stroke-width="3" stroke-miterlimit="10" d="M58.381,13.64
                c0,0-39.011-19.932-50.819-5.104c-11.81,14.831,0.924,33.405,7.394,56.408c6.466,22.996,12.383,53.957,12.194,64.569
                c-0.183,10.619,2.373,88.462,5.252,93.771c2.882,5.303-4.146,83.151-6.172,99.068c-2.035,15.925-18.668,83.151-18.668,83.151
                S-7.896,443.4,40.954,428.874c48.844-14.523,188.373-18.06,206.847-18.949c18.48-0.885,160.776,16.67,167.244,19.836
                c6.471,3.164,44.354,12.017,36.966-18.065c-7.396-30.072-22.252-97.301-22.252-97.301s-4.192-98.188-3.446-107.035
                c0.748-8.846,6.144-60.148,3.446-70.763c-2.698-10.614,16.704-95.534,19.478-103.495c2.774-7.96,6.825-35.329-33.088-26.511
                c-39.905,8.819-131.384,17.665-146.172,17.665C255.194,24.252,86.272,23.356,58.381,13.64z"/>
        </clipPath>
        <path fill="none" stroke="#140063" stroke-width="3" stroke-miterlimit="10" d="M58.381,13.64
            c0,0-39.011-19.932-50.819-5.104c-11.81,14.831,0.924,33.405,7.394,56.408c6.466,22.996,12.383,53.957,12.194,64.569
            c-0.183,10.619,2.373,88.462,5.252,93.771c2.882,5.303-4.146,83.151-6.172,99.068c-2.035,15.925-18.668,83.151-18.668,83.151
            S-7.896,443.4,40.954,428.874c48.844-14.523,188.373-18.06,206.847-18.949c18.48-0.885,160.776,16.67,167.244,19.836
            c6.471,3.164,44.354,12.017,36.966-18.065c-7.396-30.072-22.252-97.301-22.252-97.301s-4.192-98.188-3.446-107.035
            c0.748-8.846,6.144-60.148,3.446-70.763c-2.698-10.614,16.704-95.534,19.478-103.495c2.774-7.96,6.825-35.329-33.088-26.511
            c-39.905,8.819-131.384,17.665-146.172,17.665C255.194,24.252,86.272,23.356,58.381,13.64z"/>
    </g>
</g>
<a xlink:href="#">  
    <image clip-path="url(#SVGID_1_)" height="500" width="667" style="border-color:black;border-width:5px;"  xlink:href="img.jpg" />
</a>
</svg> 
```

或者，您可以将路径定义为形状，然后仅引用其名称：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="455px" height="435px" viewPort="0 0 455 435" enable-background="new 0 0 455 435" xml:space="preserve">
<defs>
    <path id="myPath" fill="none" stroke="#140063" stroke-width="3" stroke-miterlimit="10" d="M58.381,13.64
        c0,0-39.011-19.932-50.819-5.104c-11.81,14.831,0.924,33.405,7.394,56.408c6.466,22.996,12.383,53.957,12.194,64.569
        c-0.183,10.619,2.373,88.462,5.252,93.771c2.882,5.303-4.146,83.151-6.172,99.068c-2.035,15.925-18.668,83.151-18.668,83.151
        S-7.896,443.4,40.954,428.874c48.844-14.523,188.373-18.06,206.847-18.949c18.48-0.885,160.776,16.67,167.244,19.836
        c6.471,3.164,44.354,12.017,36.966-18.065c-7.396-30.072-22.252-97.301-22.252-97.301s-4.192-98.188-3.446-107.035
        c0.748-8.846,6.144-60.148,3.446-70.763c-2.698-10.614,16.704-95.534,19.478-103.495c2.774-7.96,6.825-35.329-33.088-26.511
        c-39.905,8.819-131.384,17.665-146.172,17.665C255.194,24.252,86.272,23.356,58.381,13.64z"/>
</defs>
<g>
    <g>
        <clipPath id="SVGID_1_">
            <use xlink:href="#myPath" x="0" y="0"/>
        </clipPath>
        <use xlink:href="#myPath" x="0" y="0"/>
    </g>
</g>
<a xlink:href="#">  
    <image clip-path="url(#SVGID_1_)" height="500" width="667" style="border-color:black;border-width:5px;"  xlink:href="img.jpg" />
</a>
</svg> 
```

看看[这个文档](http://www.svgbasics.com/clipping.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T01:25:03.123

在这里，您使用的是 SVG 中的图像，但如果假设您在 html 代码中的图像上使用剪辑路径，您将无法以这种方式为其提供边框。为此，您也可以将剪辑路径应用于图像的容器 div，然后为其提供相同颜色的背景和边框。

# youtube-api - YouTube API v3 - 列出上传的视频

> ID：12930200
> 
> 赞同：34
> 
> 时间：2012-10-17T08:32:29.050
> 
> 标签：youtube-api, youtube-data-api

如何在 V3 api 中列出用户上传的视频？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-26T17:20:39.407

如果您使用的是客户端，那么 Greg 的回答是正确的。要对基本请求执行相同的操作，您需要发出以下 2 个请求：

1.  获取[https://www.googleapis.com/youtube/v3/channels](https://www.googleapis.com/youtube/v3/channels)

    带参数：

    ```
    part=contentDetails
    mine=true
    key={YOUR_API_KEY} 
    ```

    和标题：

    ```
    Authorization:  Bearer {Your access token} 
    ```

    从这里你会得到一个像这样的 JSON 响应：

    ```
    {
     "kind": "youtube#channelListResponse",
     "etag": "\"some-string\"",
     "pageInfo": {
      "totalResults": 1,
      "resultsPerPage": 1
     },
     "items": [
      {
       "id": "some-id",
       "kind": "youtube#channel",
       "etag": "\"another-string\"",
       "contentDetails": {
        "relatedPlaylists": {
         "likes": "channel-id-for-your-likes",
         "favorites": "channel-id-for-your-favorites",
         "uploads": "channel-id-for-your-uploads",
         "watchHistory": "channel-id-for-your-watch-history",
         "watchLater": "channel-id-for-your-watch-later"
        }
       }
      }
     ]
    } 
    ```

    从这里你想解析出“上传”频道ID。

2.  获取[https://www.googleapis.com/youtube/v3/playlistItems](https://www.googleapis.com/youtube/v3/playlistItems)

    带参数：

    ```
    part=snippet
    maxResults=50
    playlistId={YOUR_UPLOAD_PLAYLIST_ID}
    key={YOUR_API_KEY} 
    ```

    和标题：

    ```
    Authorization:  Bearer {YOUR_TOKEN} 
    ```

    从这里您将收到如下 JSON 响应：

    ```
    {
     "kind": "youtube#playlistItemListResponse",
     "etag": "\"some-string\"",
     "pageInfo": {
      "totalResults": 1,
      "resultsPerPage": 50
     },
     "items": [
      {

       "id": "some-id",
       "kind": "youtube#playlistItem",
       "etag": "\"another-string\"",
       "snippet": {
        "publishedAt": "some-date",
        "channelId": "the-channel-id",
        "title": "video-title",
        "thumbnails": {
         "default": {
          "url": "thumbnail-address"
         },
         "medium": {
          "url": "thumbnail-address"
         },
         "high": {
          "url": "thumbnail-address"
         }
        },
        "playlistId": "upload-playlist-id",
        "position": 0,
        "resourceId": {
         "kind": "youtube#video",
         "videoId": "the-videos-id"
        }
       }
      }
     ]
    } 
    ```

使用这种方法，您应该能够使用任何语言甚至 curl 获取信息。如果您想要超过前 50 个结果，则必须使用第二个请求执行多个查询并传入页面请求。可以在以下位置阅读更多信息：http: [//developers.google.com/youtube/v3/docs/playlistItems/list](http://developers.google.com/youtube/v3/docs/playlistItems/list)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-17T17:12:56.223

第一步是获取该用户的频道 ID。我们可以通过对服务的请求来做到这一点`Channels`。这是一个JS示例。

```
var request = gapi.client.youtube.channels.list({
  // mine: true indicates that we want to retrieve the channel for the authenticated user.
  mine: true,
  part: 'contentDetails'
});
request.execute(function(response) {
  playlistId = response.result.channels[0].contentDetails.uploads;
}); 
```

一旦我们获得播放列表 ID，我们就可以使用它来查询来自`PlaylistItems`服务的上传视频列表。

```
var request = gapi.client.youtube.playlistItems.list({
  playlistId: playlistId,
  part: 'snippet',
});
request.execute(function(response) {
  // Go through response.result.playlistItems to view list of uploaded videos.
}); 
```

# jquery - 带有 async false 的 jQuery ajax 调用不起作用

> ID：12930202
> 
> 赞同：5
> 
> 时间：2012-10-17T08:32:38.137
> 
> 标签：jquery, ajax, asynchronous

在这里我粘贴了我的代码，我想将 $.ajax 的响应作为函数 a() 的响应返回。但是在ajax调用的结果出现之前，它返回的是空的f。请帮忙

```
a = function()
{
        var f = '';
    $.ajax({
          url: 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name=immaulikvora&count=1&page=1&include_entities=1&callback=?',
          dataType: 'json',
          async: false,
          success: function(data) {
            f = data;
          }
        });    
    return f;
};

var lid = a();

alert(lid); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T08:37:29.057

请将 ajax 分配给 jqXHR 对象，阅读 responseText 将对您有所帮助。

```
 var jqXHR=$.ajax({
      url: 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name=immaulikvora&count=1&page=1&include_entities=1&callback=?',
      dataType: 'json',
      async: false
    });    

jqXHR.responseText // This will give you the result 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T08:33:43.753

我猜你正在使用 jQuery 1.8+

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

请阅读细则。

> **从 jQuery 1.8 开始，不推荐**在 jqXHR ($.Deferred) 中使用 async: false ；
> 
> 您必须使用完成/成功/错误回调。

尝试

[http://jsfiddle.net/UgrLE/](http://jsfiddle.net/UgrLE/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-05T19:05:14.730

除非您为 twitter 工作，否则我会认为它失败了，因为“**跨域请求**和 dataType：“jsonp”请求不支持同步操作。”

已弃用 != 已删除，即使我接受了弃用，也是在返回的 jqXHR 的上下文中，此处未使用。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

看起来@Murali 提供了一种解决方法，但对于那些对同域请求有问题的人来说，指出以上内容很重要。

# android - 如何在真正的安卓设备上安装 Eclipse 生成的 apk 文件

> ID：12930204
> 
> 赞同：0
> 
> 时间：2012-10-17T08:32:39.890
> 
> 标签：android, apk

我在 Eclipse 上开发了一个简单的 Android 项目。然后我将应用程序作为未签名的应用程序导出到我的电脑上。然后我将应用程序复制到 SD 卡上。然后我尝试通过单击它来安装apk文件。我还确保我可以从市场以外的来源安装应用程序。但是我在安装时的应用程序说该应用程序未安装。我在堆栈溢出中尝试了一种解决方案，它建议安装 AppInstaller 并从那里尝试。即使它不起作用。

安装可能有什么问题？

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:43:01.763

您需要对应用程序进行签名，因为 Android 将拒绝安装未签名的应用程序。调试证书也可以使用，但最好创建一个，即使您不打算发布到 Play 商店等。如果您决定稍后发布，请确保创建一个具有所需有效期（超过 25 年）的证书)，查看[指南](http://developer.android.com/tools/publishing/app-signing.html#releasemode)了解详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:26:13.790

您可能在操作系统版本低于应用支持版本的设备上安装应用

签`android:minSdkVersion`入您的 AndroidManifest.xml

```
<uses-sdk android:minSdkVersion="3" android:targetSdkVersion="8" /> 
```

以及您的设备操作系统版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:36:49.580

运行成功构建后（ Project -> Clean 或 Project -> Build All 就可以了）进入您的 bin 文件夹（每次构建时自动生成），您将拥有一个 .apk 文件。在 Windows 资源管理器（或您使用的任何工具）中浏览到该文件并保留该文件夹。我 Eclipse 显示 ddms 透视图（窗口 -> 打开透视图 -> 其他 -> android/ddms）选择文件资源管理器，将您的 apk 文件拖到那里，然后在手机上运行它！

# api - 使用 REST API 访问 magento 的结帐/购物车

> ID：12930220
> 
> 赞同：1
> 
> 时间：2012-10-17T08:33:34.403
> 
> 标签：api, rest, checkout, magento-1.7

我正在尝试为我的休息客户集成购物车同步解决方案。目标应该是无论我从哪里访问我的商店，我都可以拥有相同的购物车。

因此，我必须首先使用经过身份验证的 api 用户将现有项目交付给客户端。

但我一开始就卡住了：

```
protected function _retrieveCollection()
{
    $cart = Mage::getSingleton('checkout/cart')->getQuote();
    $cart->setCustomerId($this->getApiUser()->getUserId());
    $cart->setStoreId(4);
    $cart->load();

    return $cart->getAllItems();
} 
```

即使我的购物车中有产品，也会返回一个空数组。

任何人有任何提示？有那种感觉我完全站在错误的一边...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:54:42.657

找到了解决方案。反之，获得客户的报价效果很好：

```
Mage::app()->setCurrentStore(4);
$cart = Mage::getModel('sales/quote')->loadByCustomer($this->getApiUser()->getUserId());
$items = array();
foreach ($cart->getAllVisibleItems() as $key => $item) {
    $items[] = array(
        'name'                  => $item->getName(),
        'entity_id'             => $item->getProductId(),
        'description'           => $item->getDescription(),
        'final_price_with_tax'  => $item->getBasePriceInclTax(),
        'qty'                   => $item->getQty()
    );

} 
```

# android - 以编程方式设置 layoutparams 时视图未显示在布局中

> ID：12930221
> 
> 赞同：0
> 
> 时间：2012-10-17T08:33:34.417
> 
> 标签：android, android-layout

每次我将 TextView 的布局参数设置为包装内容或填充父级时，它都不会显示在视图中，但是当我将其设置为像素时，它可以正常工作，为什么会这样？

以下是相关代码：

```
items = (LinearLayout) findViewById(R.id.llmain);
        tb = new TableLayout(MainActivity.this);

        tb.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        tb.setGravity(Gravity.CENTER);

            TableRow tr = new TableRow(MainActivity.this);
            ImageButton ima = new ImageButton(MainActivity.this);
            ImageButton imr = new ImageButton(MainActivity.this);
            TextView tvin = new TextView(this);

            TableRow.LayoutParams trp = new TableRow.LayoutParams();
            trp.setMargins(0, 0, 0, 10);
            tr.setLayoutParams(trp);
            tr.setGravity(Gravity.CENTER);

            ima.setBackgroundColor(Color.TRANSPARENT);
            ima.setImageResource(R.drawable.add);

            imr.setBackgroundColor(Color.TRANSPARENT);
            imr.setImageResource(R.drawable.remove);

            tvin.setWidth(100);
            tvin.setHeight(45);
            tvin.setGravity(Gravity.CENTER);
            tvin.setText(sil[i]);
            tvin.setBackgroundColor(Color.rgb(200, 0, 255));

            tr.addView(ima);
            tr.addView(tvin);
            tr.addView(imr);

            tb.addView(tr);

        items.addView(tb); 
```

我试过用这个

```
tvin.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT)); 
```

还有这个

```
tvin.setWidth(LayoutParams.FILL_PARENT);
tvin.setHeight(LayoutParams.FILL_PARENT); 
```

但这些都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:41:17.140

尝试：

```
tvin.setLayoutParams(new TableRow.LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT)); 
```

并删除 tvin.setWidth 和高度。

在这种情况下，您应该始终设置视图父级 TableRow 的布局参数。MATCH_PARENT 没有区别，但它是一个新名称，您应该使用它而不是 FILL_PARENT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:03:37.563

在这条线你必须使用高度和宽度..`TableRow.LayoutParams trp = new TableRow.LayoutParams();`像这样

```
TableRow row = new TableRow(context);
row.setLayoutParams(new android.widget.TableRow.LayoutParams(android.widget.TableRow.LayoutParams.FILL_PARENT,
                android.widget.TableRow.LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:40:16.063

尝试使用`LinearLayout.LayoutParams`

```
 TextView tvin = new TextView(this);
    LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    tvin.setLayoutParams(llp); 
```

# sencha-touch - Sencha Touch Ext.List 没有填充 store 的数据

> ID：12930222
> 
> 赞同：3
> 
> 时间：2012-10-17T08:33:40.680
> 
> 标签：sencha-touch

Ext.List 不填充 store 的数据，只显示两行空列表项。当我使用 firebug 进行调试时，我看到 store 中填充了 json 数据中的信息，但未显示列表项。

存储对象

```
Ext.define('MyApp.store.ListStore', {
extend: 'Ext.data.Store',
autoLoad: true,

config:
{
    model: 'MyApp.model.NewsData',
    fields: [{ name: 'haberId', mapping: 'haberId' },
            { name: 'haberGonderen', mapping: 'haberGonderen' },
            { name: 'haberDetay', mapping: 'haberDetay' },
            { name: 'haberZaman', mapping: 'haberZaman'}]
},

proxy: {
    id: 'ListStore',
    access: 'public'
}}); 
```

新闻对象

```
Ext.define('MyApp.model.NewsData', {
extend: "Ext.data.Model",
config: {
    fields: [
        'haberId',
        'haberGonderen',
        'haberDetay',
        'haberZaman'
    ]

}}); 
```

列表显示

```
Ext.define('MyApp.view.ListTemplate', {
extend: 'Ext.List',
title: 'Haber Listesi',
store : 'ListStore',
fullscreen: true,
itemTpl : '{haberGonderen}'}); 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:51:01.533

试试这个。可能这对你有帮助。

**Store.js**

```
 Ext.define('MyApp.store.ListStore', {
        extend: 'Ext.data.Store',
        config:
        {   
            autoLoad: true,
            model: 'MyApp.model.NewsData',
            proxy: {
            id: 'ListStore',
            access: 'public'
            },
            fields: [{ name: 'haberId', mapping: 'haberId' },
                    { name: 'haberGonderen', mapping: 'haberGonderen' },
                    { name: 'haberDetay', mapping: 'haberDetay' },
                    { name: 'haberZaman', mapping: 'haberZaman'}]
        }

        }); 
```

**ListTemplate.js**

```
 Ext.define('MyApp.view.ListTemplate', {
        extend: 'Ext.List',
        config: {
        fullscreen: true,
        title: 'Haber Listesi',
        store : 'ListStore',
        itemTpl : '{haberGonderen}'
        }

        }); 
```

# ruby-on-rails - 显示路线提供视图但不提供控制器方法

> ID：12930224
> 
> 赞同：1
> 
> 时间：2012-10-17T08:33:46.530
> 
> 标签：ruby-on-rails

我正在尝试通过类别 ID 获取我的旅行。`@tripsByCat = Category.find(params[:id]).trips`当我在我的类别显示视图中这样做时，这一切都很好。但是，当我将相同的代码移动到类别控制器中的 Show 方法时，我没有得到任何结果。

看来我的“表演”只是没有被调用。

我扫了我的路线，一切都很好，我尝试设置一个带有一些纯文本的 var，看看它是否显示在 show.html.erb 中，但它没有。我也尝试做一个 response_to 但也没有运气。我是否错过了更大的图景（再一次，天哪，我是个 Railsnoob！）？

```
def show
    @tripsByCat = Category.find(params[:id]).trips
end 
```

我的 show.html.erb：

```
<% unless @tripsByCat.blank? %>
    <% @tripsByCat.each do |trip| %>
        <article>
            <h1><%= trip.title %></h1>
            <p>
                <%= trip.description %>
            </p>
            <%= link_to "Zie volledige route", trip %>
        </article>
    <% end %>
<% end %> 
```

我的 category_controller.rb

```
class CategoriesController < ApplicationController
    def create
        @category = Category.new
    end

    def show
        @tripsByCat = Category.find(params[:id]).trips
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:33:55.600

我解决了这个问题。我有一个已弃用的类别控制器，它搞砸了。删除它并将代码从一个控制器复制/粘贴到另一个控制器修复它！

# c# - 如何在控件模板中隐藏按钮？

> ID：12930228
> 
> 赞同：0
> 
> 时间：2012-10-17T08:33:51.180
> 
> 标签：c#, wpf, xaml

当代码隐藏中的属性为时，如何`Visibility="Visible"`为**控件模板**内的**按钮**设置？**`IsSendBtnVisible``true`**

 **这是我的**WPF**页面：

```
<Page 
  x:Class="CardViewPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="CardViewPage">

   <Grid Name="content" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
       <Grid.RowDefinitions>
          <RowDefinition Height="*" />
       </Grid.RowDefinitions>
       <DocumentViewer Margin="0" Grid.Row="0" Name="documentViewer" />
   </Grid>

</Page> 
```

这是此页面上文档查看器的**自定义模板：**

```
<Style TargetType="{x:Type DocumentViewer}">
   ...
   <Setter Property="Template">
   <Setter.Value>
      <ControlTemplate TargetType="{x:Type DocumentViewer}">
         ...
         <Button 
            Click="btnSendToServer_Click"  
            Width="25"
            Height="25"
            Visibility="Collapsed" />
         ...
      </ControlTemplate>
   </Setter>
   ...
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:43:26.183

我建议你使用数据触发器来实现这一点......

```
<Button
 Click="btnSendToServer_Click"  
                  Width="25"
                  Height="25">
            <Button.Style>
                <Style>
                    <Setter Property="Button.Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSendBtnVisible}" Value="True">
                            <Setter Property="Button.Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button> 
```

确保在样式中将可见性设置为折叠，而不是在按钮属性中。

注意：数据触发器的绑定可能会根据您的数据上下文而改变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:36:27.447

您需要为您的 DocumentViewer声明[DependancyProperty](http://msdn.microsoft.com/en-us/library/ms752914.aspx)`TemplateBinding`并在 xaml ControlTemplate 中使用（`UrProperty`例如）

```
<ControlTemplate TargetType="{x:Type DocumentViewer}">
          ...
          <Button Click="btnSendToServer_Click"  
                  Width="25"
                  Height="25"
                  Visibility="{TemplateBinding UrProperty}"
                  />
          ...
      </ControlTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:58:57.777

Dima Martovoi，bathineni - 感谢您的回复。

Dima Martovoi，我认为从 DocumentViewer 继承对于这个小问题来说很难。我尝试使用 Bathineni 解决方案中的 DataTrigger 变体，但它不起作用。不知道，为什么。使用下一个绑定解决了问题：

```
<Button
Visibility="{Binding RelativeSource={RelativeSource AncestorType=Page},Path=SendToServerVisiblity}">
</Button> 
```

在哪里

```
 public Visibility SendToServerVisiblity
    {
        get
        {
            if (IsOnlineMode)
                return Visibility.Visible;
            return Visibility.Collapsed;
        }
    } 
```

在页面代码隐藏中**

# actionscript-3 - 捕获空气窗口上的 fn 键码

> ID：12930229
> 
> 赞同：1
> 
> 时间：2012-10-17T08:33:52.723
> 
> 标签：actionscript-3, air

在笔记本电脑上，我想在我的 CMS 应用程序中捕获 Mac 键盘上的 fn 键。但是当我按 fn 键时，没有找到键码。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:20:15.797

某些密钥未发送到 Flash Player。

如果既没有`KEY_UP`也没有`KEY_DOWN`被解雇，那么你根本无法抓住那个关键。

# java - 是否应该将 Disruptor (LMAX) 与内存和 CQRS 中的大模型一起使用？

> ID：12930233
> 
> 赞同：7
> 
> 时间：2012-10-17T08:34:09.327
> 
> 标签：java, concurrency, disruptor-pattern

出于性能原因，我们的系统将结构化模型（约 30 个具有多种关系的不同实体）完全保存在内存中（约 10 Gb）。在这个模型上，我们必须做 3 种操作：

1.  更新一个或几个实体
2.  查询特定数据（这通常需要读取数千个实体）
3.  获取统计数据（使用了多少内存，多少种查询等）

目前，该体系结构是一种相当标准的体系结构，具有用于使用共享模型的 servlet 的线程池。在模型内部有很多并发集合，但仍然有很多等待，因为一些实体“更热”并且大多数线程想要读/写它们。另请注意，通常查询比写入更耗费 CPU 和时间。

我正在研究切换到 Disruptor 架构的可能性，将模型保持在一个线程中，将所有可能的（有效性检查、审计等）从模型中移出一个单独的消费者。

第一个问题当然是：这有意义吗？

第二个问题是：理想情况下，写请求应该优先于读请求。在破坏者中获得优先权的最佳方式是什么？我在考虑 2 个环形缓冲区，然后尝试从高优先级的缓冲区读取比从低优先级的缓冲区读取的频率更高。

澄清这个问题比关于 LMAX Disruptor 的实际代码更具架构性。

**更新更多细节**

数据是一个复杂的领域，许多不同类型（~20）的实体（>100k）在它们之间以具有许多不同集合的树结构链接。

查询通常涉及遍历数千个实体以找到正确的数据。更新很频繁，但非常有限，例如一次 10 个实体，因此在整个数据中变化不大（例如每小时 20%）。

我做了一些初步测试，看起来并行查询模型的速度优势超过了偶尔的写锁延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:58:01.323

LMAX可能是合适的..

LMAX 的人首先实现了传统的，然后他们实现了actors（带有队列），发现actors 大部分时间都在队列中。然后他们去了单线程架构..现在破坏者不是架构的关键，关键是单线程 BL。使用 1 个编写器（单线程）和小对象，您将获得高缓存命中率并且没有争用。为此，他们必须将所有长时间运行的代码移出业务层（包括 IO）。现在为了做到这一点，他们使用了中断器，它基本上只是一个带有单个写入器的环形缓冲区，这已经在设备驱动程序代码中使用了一段时间，但消息规模很大。

首先，我对此有一个不同意，LMAX 是一个演员系统..所有 BL 都有一个演员（并且破坏者连接其他演员）..他们可以显着改进演员系统，而不是跳到 BL 的 1 个演员，即

1.  不要有很多服务/演员，尽量在一个服务中拥有常用的组件。（这在 SOA / 分布式系统中也一次又一次地出现）
2.  在参与者之间进行通信时，使用点对点队列不是多到 1。（就像所有服务总线一样！）
3.  当您拥有点对点队列时，请确保尾部是指向单独内存区域的指针。使用 2 和 3，您现在可以使用无锁队列，并且队列/线程只有 1 个写入器（您甚至可以不使用临时 256，而是使用 YMM 位写入队列）。然而，系统现在有更多线程（如果你正确地完成了 1，那么参与者之间的消息量相对较少）。队列类似于中断器，可以批量处理许多条目，并且可以使用环形缓冲区样式。

有了这些演员，你就有了一个更加模块化（因此也是主表）的系统（并且系统可以启动更多的演员来处理队列 - 注意 1 作家！）

你的情况我认为一个小时内 20% 的变化是巨大的......查询是否总是在内存对象中？你有内存哈希表/索引吗？你可以使用只读集合吗？如果您的数据是旧的，这是否重要，例如 Ebay 对其项目集合使用 1 小时刷新，因此项目集合本身是静态的。使用静态集合和静态项目简介，它们有一个静态索引，您可以快速搜索和查找项目，所有项目都在内存中。每小时重建一次，完成后（重建可能需要几分钟）系统切换到新数据。请注意，项目本身不是静态的。

在您的域很大的情况下，单个线程可能会获得较低的缓存命中率..这与 LMAX 不同，LMAX 的每个消息传递的域较小..

基于代理的系统可能是最好的选择，因为可以对一堆实体进行分组，因此缓存命中率很高。但我需要知道更多。例如，将有效性检查、审计、注销等移出可能是一个好计划。更少的代码 = 更小的对象 = 更高的缓存命中率并且 LMAX 对象很小。

希望这个快速转储有所帮助，但仅一眼就很难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T12:14:43.453

“理想情况下，写请求应该优先于读请求。”

为什么 ？大多数像 C# ReaderWriterLockSlim 这样的快速锁都相反。写入需要阻止所有读取以避免部分读取。因此，这样的锁允许许多并发读取，希望事情变得“相当”，然后进行写入..（写入确实以队列中的编号运行，但很可能在锁定之前处理后进行了许多读取）..

Prioritizing writes is a good way to kill concurrency ..

Is eventual concurrency / CQRS an option ?

# c# - C#：为什么 void 和 System.Void 之间有区别

> ID：12930245
> 
> 赞同：1
> 
> 时间：2012-10-17T08:34:58.817
> 
> 标签：c#, void

> **可能重复：**
> [什么是 System.Void？](https://stackoverflow.com/questions/5450748/what-is-system-void)
> [为什么不是 System.Void？](https://stackoverflow.com/questions/6408847/why-not-system-void)

我注意到它是不允许使用的`typeof(System.Void)`。但是`typeof(void)`是允许的。当你使用`typeof(System.String)`或`typeof(string)`没有区别。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:39:03.873

这是因为 C# 定义了别名以保持原始 C 风格。

.NET Framework 使用特定的命名约定：例如，它规定类名应以大写字母开头。因此，`String`-- 它不是 C# 本机类型，而是在命名空间中定义的 .NET 类`System`-- 实际上被称为`System.String`，或者`String`如果您`using System;`的文件中有 a ，则简称为 。

C# 定义`string`为 的别名，`System.String`以便代码看起来像在 C 和其他基于 C 的语言（C++、Java 等）中所做的那样。我认为它更具可读性。以相同的方式，`int`与 相同`System.Int32`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:47:45.460

`void`不像`string`。在 C# 中使用的几乎所有情况下，`void`编译器都会对其进行特殊处理，例如，不需要`return`在`void`-“returning” 方法中使用语句，并且不允许`return`使用具有“值”类型的表达式的语句`void`. 是真正被视为常规类型`typeof(void)`的少数情况之一。`void`它是双向的：编译器可以假设任何不`void`应该得到`void`特殊处理的类型。允许其他拼写`void`方式会使解释 C# 变得更加复杂，并且没有理由需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:35:52.737

`string`是 class 的别名`System.String`。

其他别名列表

*   对象：System.Object
*   字符串：System.String
*   布尔：System.Boolean
*   字节：系统.字节
*   sbyte：System.SByte
*   简称：System.Int16
*   ushort：System.UInt16
*   诠释：System.Int32
*   单位：System.UInt32
*   长：System.Int64
*   ulong：System.UInt64
*   浮动：System.Single
*   双：System.Double
*   十进制：System.Decimal
*   字符：System.Char

感谢[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)。

# sockets - /etc/init.d 中缺少 mysqld.sock 和 mysqld

> ID：12930250
> 
> 赞同：2
> 
> 时间：2012-10-17T08:35:42.643
> 
> 标签：sockets, mysql

我今天尝试连接到 MySQL 服务器，发现我没有任何 mysqld.sock 了，无处可去。

我尝试了几种方法来找回它，但都没有成功。我试图执行 a `./mysqld.start`in `/etc/init.d`，但它也不见了。

我应该重新安装mysql，还是有办法找回套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:54:54.563

尝试使用以下命令

```
service mysql start 
```

这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:03:04.803

@Nueva，如果这不起作用，请重新启动系统。我刚刚在 EC2 上构建了一个 Ubuntu，它的 mysqld.sock 文件丢失了，一个简单的重启解决了这个问题。

如果做不到这一点，我还听说通过 tcp 而不是 localhost 强制连接对某些人有用。我试过了，但一无所获。

# xml - concat 逗号分隔的字符串值

> ID：12930253
> 
> 赞同：1
> 
> 时间：2012-10-17T08:35:51.933
> 
> 标签：xml, xslt

我想连接所有数字（如 1+0+1+1+1）。请注意，逗号分隔的值可能会增加或减少。这是xml xsl代码：

**xml:**

```
 <?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="class.xsl"?>
<root><LIST>
 <ROLE>s1</ROLE>
<STATUS>yes</STATUS>
</LIST>
<LIST>
<ROLE>s1</ROLE>
<STATUS>d</STATUS>
</LIST>
<LIST>
<ROLE>Member</ROLE>
<STATUS>no</STATUS>
</LIST>
<LIST>
<ROLE>Member</ROLE>
<STATUS>no</STATUS>
</LIST>
<LIST>
<ROLE>Member</ROLE>
<STATUS>yes</STATUS>
</LIST>
</root> 
```

xsl:

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/"><html>
    <h2>
<xsl:variable name="orgactcount">
    <xsl:for-each select="/root/LIST">
    <xsl:if test = "STATUS='yes'">
<xsl:value-of select="'1,'"/>
</xsl:if>
</xsl:for-each>
</xsl:variable>
<xsl:value-of select="$orgactcount"/>
</h2></html>
    </xsl:template>
</xsl:stylesheet> 
```

orgactcount 变量有 1,1，值，它必须像 1+1 一样连接......我正在尝试拆分所有逗号分隔的值，然后进行操作......但我不能......有人知道吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:57:02.583

`translate`我通过添加功能编辑了您的 XSLT 。

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <html>
      <h2>

        <xsl:variable name="orgactcount">
          <xsl:for-each select="/root/LIST">
            <xsl:if test = "STATUS='yes'">
              <xsl:value-of select="'1,'"/>
            </xsl:if>
          </xsl:for-each>
        </xsl:variable>

        <xsl:variable name="formattedorgactcount" select="translate($orgactcount, ',', '+' )"/>
        <xsl:value-of select="$formattedorgactcount"/>

      </h2>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

以下对您也有帮助。

[XSLT 字符串替换](https://stackoverflow.com/questions/3067113/xslt-string-replace)

# android - 如何向 CTS-Tradefed 输入指令？

> ID：12930266
> 
> 赞同：3
> 
> 时间：2012-10-17T08:36:24.007
> 
> 标签：android, python, shell, android-testing

我目前正在尝试自动化 android ICS CTS 中的几个步骤。

1.  当我们执行时，`./cts-tradefed`我们会得到`cts-tf >`提示。
2.  然后我可以进入运行`cts --plan CTS`
3.  然后 exit 命令退出提示。

在这里，我想在一个 shell 脚本中编写以上 3 个步骤。但无法用下面的脚本做到这一点。尝试了多种方式，但无法实现。请帮忙。

想要执行：

**1.** `./cts-tradefed`

**2.**运行`cts --plan CTS exit`

**3.** `./cts-tradefed`

**4.** `run cts --plan CTS`

**5.** `exit`

任何 shell、python 或 perl 语言的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-10T06:22:13.617

摘自CTS-tradefed*帮助*（版本 6.0_r0）

> exit：优雅退出 cts 控制台，等待所有调用完成

我们可以利用上述论点来达到以下目的：

```
echo exit | cts-tradefed <arguments to cts> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:05:50.390

我不确定您使用的是哪个版本的 CTS，所以我假设版本是`4.0.3_r3`.

`./cts-tradefed run cts --plan CTS`您可以在一行中执行该命令。但是，执行完命令后提示仍然存在。

根据[这个问题](http://code.google.com/p/android/issues/detail?id=24267)，我认为没有简单的方法可以解决它。

因此，我只是应用上面链接中的补丁，并执行以下命令：

> `echo | ./cts-tradefed run cts --plan CTS`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-28T07:54:18.357

使用 Android CTS 7.0，您可以简单地运行此命令行，它最方便自动化：（假设“cts-tradefed”在您的 PATH 中。）

```
$ cts-tradefed run commandAndExit cts 
```

来自 cts-tradefed 的帮助：

```
r(?:un)? help:
    commandAndExit <config> [options] Run the specified command, and run 'exit -c' immediately afterward
    cmdfileAndExit <cmdfile.txt>      Run the specified commandfile, and run 'exit -c' immediately afterward 
```

# python - 我需要在 Mongo 中重新实现身份验证吗？

> ID：12930270
> 
> 赞同：1
> 
> 时间：2012-10-17T08:36:27.493
> 
> 标签：python, mongodb

我的 Flask 应用程序目前使用 PostgreSQL 来存储所有身份验证信息（用户、令牌）并与之交互。对于其他逻辑，我需要使用 MongoDB。我喜欢使用一种技术而不是多种技术来降低应用程序的复杂性（例如，仅使用 Redis 而不是 Redis + memcached）。

所以现在我正在考虑仅使用 MongoDB，将其用作身份验证过程的后端。

当前工作流程如下：PostgreSQL 存储两个表：User 和 Token。当我注册用户时，我打开事务，将他的数据（用户名，登录名，密码）存储在 User 表中，然后将激活令牌插入 Token 表，然后发送激活信，然后关闭事务。因此，在代码中存储用户、令牌或以后出现问题，当我尝试发送电子邮件时，事务将被回滚。它可以防止用户创建但没有令牌的情况，因此无法激活帐户。

据我所知，事务不是 MongoDB 的功能。因此，如果我将有两个文档，用户和令牌，如果无法创建第二个，我将无法回滚创建第一个。

我的问题是：

1.  您将如何在 MongoDB 上实现所描述的行为？
2.  仅将 MongoDB 用于所有内容而不是 PostgreSQL 用于身份验证和 MongoDB 用于文档是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:04:30.867

是的，在这种情况下，您必须自己实现注册逻辑。例如，如果您存储以下文档：

```
user : {
    name : 'Alex Black'
    email : 'alex@example.com'
    token : {
        value : 'some_random_token'     # subject for indexing
        expires : '00.00.00.18.11.2012' # use MongoDB date here
    }
} 
```

然后，例如一个 cron 脚本应该删除所有过期的用户。但是一个技巧是使用 Mongo 的 NoSQL 特性！

只需创建两个单独的集合：`Users`例如`UnregisteredUsers`. 将用户信息存储到`UnregisteredUsers`并仅在确认注册时将`user`文档从转移`UnregisteredUsers`到`Users`。

# javascript - JavaScript 闭包与匿名函数

> ID：12930272
> 
> 赞同：576
> 
> 时间：2012-10-17T08:36:35.910
> 
> 标签：javascript, scope, closures

我和我的一个朋友目前正在讨论什么是 JS 中的闭包，什么不是。我们只是想确保我们真正正确地理解它。

让我们举这个例子。我们有一个计数循环，并希望在控制台上延迟打印计数器变量。因此，我们使用`setTimeout`和**闭包**来捕获计数器变量的值，以确保它不会打印 N 次值 N。

**没有闭包**或任何接近**闭**包的错误解决方案是：

```
for(var i = 0; i < 10; i++) {
    setTimeout(function() {
        console.log(i);
    }, 1000);
} 
```

这当然会打印`i`循环后值的 10 倍，即 10。

**所以他的尝试是：**

```
for(var i = 0; i < 10; i++) {
    (function(){
        var i2 = i;
        setTimeout(function(){
            console.log(i2);
        }, 1000)
    })();
} 
```

按预期打印 0 到 9。

我告诉他他没有使用**闭包**来捕获`i`，但他坚持认为他是。我通过将 for 循环体放入另一个循环体（将他的匿名函数传递给）来证明他不使用**闭包**，再次打印 10 次 10 次。如果我将他的函数存储在 a 中并在循环*之后*执行它，同样适用，也打印 10 乘以 10。所以我的论点是**他并没有真正*****捕获*****的值**，使他的版本*不是*闭包。`setTimeout``setTimeout``var`****`i`****

 *****我的尝试是：**

```
for(var i = 0; i < 10; i++) {
    setTimeout((function(i2){
        return function() {
            console.log(i2);
        }
    })(i), 1000);
} 
```

所以我捕获（在闭包中`i`命名），但现在我*返回*另一个函数并传递它。**就我而言，传递给 setTimeout 的函数确实捕获了****.**`i2`***`i`***

 ***现在谁在使用闭包，谁不使用？**

请注意，这两种解决方案都延迟在控制台上打印 0 到 9，因此它们解决了原始问题，但我们想了解这两种解决方案中的哪一个**使用闭包**来完成此任务。

* * *

## 回答 #1

> 赞同：669
> 
> 时间：2012-10-17T10:01:32.337

**编者注：JavaScript 中的**[所有](http://javascriptweblog.wordpress.com/2010/10/25/understanding-javascript-closures/ "理解 JavaScript 闭包 |  JavaScript, JavaScript…")函数都是闭包，如本文所述。然而，我们只对确定这些函数的子集感兴趣，这些函数从理论的角度来看是[有趣的。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures "闭包 - JavaScript |  MDN")*此后，除非另有说明，否则对闭包*一词的任何引用都将指代此功能子集。

闭包的简单解释：

1.  取一个函数。我们称它为 F。
2.  列出 F 的所有变量。
3.  变量可能有两种类型：
    1.  局部变量（绑定变量）
    2.  非局部变量（自由变量）
4.  如果 F 没有自由变量，则它不能是闭包。
5.  如果 F 有任何自由变量（在F**的**父范围中定义），则：
    1.  F 的父作用域必须只有一个**自由**变量绑定到的父作用域。
    2.  如果 F从**该**父范围之外被**引用**，则它成为**该**自由变量的闭包。
    *****   **该**自由变量称为闭包 F 的上值。****

 ****现在让我们用它来确定谁使用闭包，谁不使用（为了解释起见，我命名了函数）：

**案例一：你朋友的节目**

```
for (var i = 0; i < 10; i++) {
    (function f() {
        var i2 = i;
        setTimeout(function g() {
            console.log(i2);
        }, 1000);
    })();
} 
```

在上面的程序中有两个函数：`f`和`g`。让我们看看它们是否是闭包：

对于`f`：

1.  列出变量：
    1.  `i2`是一个**局部**变量。
    2.  `i`是一个**自由**变量。
    3.  `setTimeout`是一个**自由**变量。
    4.  `g`是一个**局部**变量。
    5.  `console`是一个**自由**变量。
2.  查找每个自由变量绑定到的父作用域：
    1.  `i`**绑定**到全局范围。
    2.  `setTimeout`**绑定**到全局范围。
    3.  `console`**绑定**到全局范围。
3.  **函数引用**在哪个范围内？**全局**范围 。
    1.  因此`i`不被**关闭**`f`。
    2.  因此`setTimeout`不被**关闭**`f`。
    3.  因此`console`不被**关闭**`f`。

因此该函数`f`不是闭包。

对于`g`：

1.  列出变量：
    1.  `console`是一个**自由**变量。
    2.  `i2`是一个**自由**变量。
2.  查找每个自由变量绑定到的父作用域：
    1.  `console`**绑定**到全局范围。
    2.  `i2`**绑定**在的范围内`f`。
3.  **函数引用**在哪个范围内？的**范围`setTimeout`**。
    1.  因此`console`不被**关闭**`g`。
    2.  因此`i2`被**关闭**`g`。_

因此，**当**从内部**引用**`g`该函数时，该函数是自由变量`i2`（它是 的上值）`g`的闭包。****`setTimeout`****

 *****对你不利：*你的朋友正在使用闭包。内部函数是一个闭包。

**案例 2：您的程序**

```
for (var i = 0; i < 10; i++) {
    setTimeout((function f(i2) {
        return function g() {
            console.log(i2);
        };
    })(i), 1000);
} 
```

在上面的程序中有两个函数：`f`和`g`。让我们看看它们是否是闭包：

对于`f`：

1.  列出变量：
    1.  `i2`是一个**局部**变量。
    2.  `g`是一个**局部**变量。
    3.  `console`是一个**自由**变量。
2.  查找每个自由变量绑定到的父作用域：
    1.  `console`**绑定**到全局范围。
3.  **函数引用**在哪个范围内？**全局**范围 。
    1.  因此`console`不被**关闭**`f`。

因此该函数`f`不是闭包。

对于`g`：

1.  列出变量：
    1.  `console`是一个**自由**变量。
    2.  `i2`是一个**自由**变量。
2.  查找每个自由变量绑定到的父作用域：
    1.  `console`**绑定**到全局范围。
    2.  `i2`**绑定**在的范围内`f`。
3.  **函数引用**在哪个范围内？的**范围`setTimeout`**。
    1.  因此`console`不被**关闭**`g`。
    2.  因此`i2`被**关闭**`g`。_

因此，**当**从内部**引用**`g`该函数时，该函数是自由变量`i2`（它是 的上值）`g`的闭包。****`setTimeout`****

 *****对你有好处：*你正在使用闭包。内部函数是一个闭包。

所以你和你的朋友都在使用闭包。别吵了。我希望我清除了闭包的概念以及如何为你们俩识别它们。

**编辑：**关于为什么所有函数都关闭的简单解释（学分@Peter）：

首先让我们考虑以下程序（它是[控件](http://jsfiddle.net/KyQKw/)）：

```
lexicalScope();

function lexicalScope() {
    var message = "This is the control. You should be able to see this message being alerted.";

    regularFunction();

    function regularFunction() {
        alert(eval("message"));
    }
}
```

1.  **从上面的定义**`lexicalScope`中，我们知道两者`regularFunction`都不是闭包。
***   当我们执行程序时，**我们希望** `message`收到警报**，因为** `regularFunction`它不是闭包（即它可以访问其父范围内的**所有**`message`变量 - 包括）。*   当我们执行程序时，**我们观察**到`message`它确实被警告了。**

 **接下来让我们考虑以下程序（它是[替代方案](http://jsfiddle.net/KyQKw/1/)）：

```
var closureFunction = lexicalScope();

closureFunction();

function lexicalScope() {
    var message = "This is the alternative. If you see this message being alerted then in means that every function in JavaScript is a closure.";

    return function closureFunction() {
        alert(eval("message"));
    };
}
```

1.  **从上面的定义**我们知道 only`closureFunction`是一个闭包。
***   当我们执行程序时，**我们希望** `message`不会收到警报**，因为** 它是一个闭包（即它只能在**创建函数时**`closureFunction`访问其所有**非局部变量**（[参见这个答案](https://stackoverflow.com/a/12930799/783743 "范围 - JavaScript 闭包与匿名函数 - 代码日志")） - 这不包括）。**`message`*****   当我们执行程序时，**我们观察**到`message`它实际上是被警告的。****

 ****我们从中推断出什么？

1.  JavaScript 解释器对待闭包的方式与对待其他函数的方式没有区别。
2.  每个函数都带有它的[作用域链](http://dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain/ "ECMA-262 » ECMA-262-3 详细信息。 第 4 章范围链。")。闭包没有**单独**的引用环境。
3.  闭包就像所有其他函数一样。当它们在它们所属范围**之外的范围内被****引用**时，我们只称它们为闭包，**因为**这是一个有趣的案例。

 ***** * *

## 回答 #2

> 赞同：98
> 
> 时间：2012-10-17T08:59:40.700

根据`closure`定义：

> “闭包”是一个表达式（通常是一个函数），它可以具有**自由变量**以及绑定这些变量的**环境**（即“关闭”表达式）。

`closure`如果您定义一个使用在函数外部定义的变量的函数，则您正在使用。（我们称变量为**自由变量**）。
他们都使用`closure`（即使在第一个例子中）。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2012-10-17T09:33:55.437

简而言之， **Javascript 闭包**允许函数**访问****在词法父函数**中声明的变量。

让我们看一个更详细的解释。要理解闭包，重要的是要理解 JavaScript 是如何作用域变量的。

**范围**

在 JavaScript 中，作用域是用函数定义的。每个函数都定义了一个新的范围。

考虑以下示例；

```
function f()
{//begin of scope f
  var foo='hello'; //foo is declared in scope f
  for(var i=0;i<2;i++){//i is declared in scope f
     //the for loop is not a function, therefore we are still in scope f
     var bar = 'Am I accessible?';//bar is declared in scope f
     console.log(foo);
  }
  console.log(i);
  console.log(bar);
}//end of scope f 
```

调用 f 打印

```
hello
hello
2
Am I Accessible? 
```

现在让我们考虑一下我们`g`在另一个函数中定义了一个函数的情况`f`。

```
function f()
{//begin of scope f
  function g()
  {//being of scope g
    /*...*/
  }//end of scope g
  /*...*/
}//end of scope f 
```

我们将调用`f`的**词法父**级`g`。如前所述，我们现在有 2 个作用域；范围`f`和范围`g`。

但是一个作用域在另一个作用域“内”，那么子函数的作用域是父函数作用域的一部分吗？在父函数范围内声明的变量会发生什么情况；我可以从子函数的范围内访问它们吗？这正是闭包介入的地方。

**闭包**

在 JavaScript 中，函数`g`不仅可以访问范围内声明的`g`任何变量，还可以访问父函数范围内声明的任何变量`f`。

考虑跟随；

```
function f()//lexical parent function
{//begin of scope f
  var foo='hello'; //foo declared in scope f
  function g()
  {//being of scope g
    var bar='bla'; //bar declared in scope g
    console.log(foo);
  }//end of scope g
  g();
  console.log(bar);
}//end of scope f 
```

调用 f 打印

```
hello
undefined 
```

让我们看看线`console.log(foo);`。此时我们处于作用域中`g`，我们尝试访问`foo`在作用域中声明的变量`f`。但如前所述，我们可以访问在词法父函数中声明的任何变量，这里就是这种情况；`g`是 的词法父级`f`。因此`hello`被打印。
现在让我们看看这条线`console.log(bar);`。此时我们处于作用域中`f`，我们尝试访问`bar`在作用域中声明的变量`g`。`bar`未在当前范围内声明且函数`g`不是 的父级`f`，因此`bar`未定义

实际上，我们也可以访问在词法“祖父”函数范围内声明的变量。因此，如果函数`h`中定义了一个函数`g`

```
function f()
{//begin of scope f
  function g()
  {//being of scope g
    function h()
    {//being of scope h
      /*...*/
    }//end of scope h
    /*...*/
  }//end of scope g
  /*...*/
}//end of scope f 
```

then`h`将能够访问在 function 、 和 . 范围内声明的`h`所有`g`变量`f`。这是通过**闭包**完成的。在 JavaScript 中，**闭包**允许我们访问在词法父函数、词法祖父函数、词法祖父函数等中声明的任何变量。这可以看作是**作用域链**； `scope of current function -> scope of lexical parent function -> scope of lexical grand parent function -> ...` 直到最后一个没有词法父函数的父函数。

**窗口对象**

实际上，链并没有在最后一个父函数处停止。还有一个特殊的范围；**全局**范围。每个未在函数中声明的变量都被认为是在全局范围内声明的。全球范围有两个专业；

*   在全局范围内声明的每个变量都可以**在任何地方访问**
*   在全局范围内声明的变量对应于`window`对象的属性。

`foo`因此，在全局范围内声明变量有两种方式；通过不在函数中声明它或通过设置`foo`窗口对象的属性。

**两次尝试都使用了闭包**

现在您已经阅读了更详细的说明，现在可能很明显两种解决方案都使用了闭包。但可以肯定的是，让我们做一个证明。

让我们创建一种新的编程语言；JavaScript-无闭包。顾名思义，JavaScript-No-Closure 与 JavaScript 相同，只是它不支持闭包。

换句话说;

```
var foo = 'hello';
function f(){console.log(foo)};
f();
//JavaScript-No-Closure prints undefined
//JavaSript prints hello 
```

好吧，让我们看看第一个使用 JavaScript-No-Closure 的解决方案会发生什么；

```
for(var i = 0; i < 10; i++) {
  (function(){
    var i2 = i;
    setTimeout(function(){
        console.log(i2); //i2 is undefined in JavaScript-No-Closure 
    }, 1000)
  })();
} 
```

因此这将`undefined`在 JavaScript-No-Closure 中打印 10 次。

因此，第一个解决方案使用闭包。

让我们看看第二种解决方案；

```
for(var i = 0; i < 10; i++) {
  setTimeout((function(i2){
    return function() {
        console.log(i2); //i2 is undefined in JavaScript-No-Closure
    }
  })(i), 1000);
} 
```

因此这将`undefined`在 JavaScript-No-Closure 中打印 10 次。

两种解决方案都使用闭包。

编辑：假设这 3 个代码片段未在全局范围内定义。否则，变量`foo`和`i`将绑定到`window`对象，因此可以通过`window`JavaScript 和 JavaScript-No-Closure 中的对象访问。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-10-18T01:51:44.840

我从来没有对任何人解释这一点的方式感到满意。

理解闭包的关键是理解没有闭包的 JS 会是什么样子。

**如果没有闭包，这将引发错误**

```
function outerFunc(){
    var outerVar = 'an outerFunc var';
    return function(){
        alert(outerVar);
    }
}

outerFunc()(); //returns inner function and fires it 
```

一旦 outerFunc 在一个虚构的禁用闭包的 JavaScript 版本中返回，对 outerVar 的引用将被垃圾收集并消失，没有任何东西可供内部 func 引用。

闭包本质上是一种特殊规则，当内部函数引用外部函数的变量时，它们可以启动并使得这些 vars 存在成为可能。使用闭包，即使在外部函数完成或“关闭”之后，引用的变量也会被保留，如果这有助于您记住这一点。

即使使用闭包，在没有引用其局部变量的内部函数的函数中，局部变量的生命周期与在无闭包版本中的工作方式相同。函数完成后，本地人会收集垃圾。

一旦您在内部 func 中引用了外部 var，这就像门框被放置在那些引用的 var 的垃圾收集方式中。

查看闭包的一种可能更准确的方法是，内部函数基本上使用内部作用域作为它自己的作用域基础。

**但引用的上下文实际上是持久的，不像快照。**反复触发返回的内部函数，该函数不断递增并记录外部函数的本地 var 将不断提醒更高的值。

```
function outerFunc(){
    var incrementMe = 0;
    return function(){ incrementMe++; console.log(incrementMe); }
}
var inc = outerFunc();
inc(); //logs 1
inc(); //logs 2 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-10-17T09:08:52.787

你们都在使用闭包。

我在这里使用[维基百科的定义](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)：

> 在计算机科学中，闭包（也称为词法闭包或函数闭包）是函数或对函数的引用以及引用环境——存储对该函数的每个非局部变量（也称为自由变量）的引用的表. 闭包——与普通函数指针不同——允许函数访问那些非局部变量，即使在其直接词法范围之外调用也是如此。

您朋友的尝试`i`通过获取其值并制作副本以存储到 local 中，显然使用了非本地变量`i2`。

您自己的尝试将`i`（在调用站点在范围内）作为参数传递给匿名函数。到目前为止，这不是一个闭包，但是该函数返回另一个引用相同的函数`i2`。由于内部匿名函数内部`i2`不是本地函数，因此这会创建一个闭包。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2012-10-17T09:03:01.227

你和你的朋友都使用闭包：

> 闭包是一种特殊的对象，它结合了两件事：一个函数，以及创建该函数的环境。环境由创建闭包时在范围内的任何局部变量组成。
> 
> MDN：[https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)

在您朋友的代码函数`function(){ console.log(i2); }`中定义在匿名函数的闭包内，`function(){ var i2 = i; ...` 并且可以读/写局部变量*`i2`*。

在您的代码函数`function(){ console.log(i2); }`中定义函数闭包`function(i2){ return ...`并且可以读/写本地有价值的*`i2`*（在这种情况下声明为参数）。

在这两种情况下，函数都会`function(){ console.log(i2); }`传入`setTimeout`.

另一个等价物（但内存利用率较低）是：

```
function fGenerator(i2){
    return function(){
        console.log(i2);
    }
}
for(var i = 0; i < 10; i++) {
    setTimeout(fGenerator(i), 1000);
} 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-10-17T09:20:17.847

让我们看看两种方式：

```
(function(){
    var i2 = i;
    setTimeout(function(){
        console.log(i2);
    }, 1000)
})(); 
```

`setTimeout()`声明并立即执行在其自己的上下文中运行的匿名函数。的当前值`i`通过复制到`i2`first 来保存；它的工作原理是立即执行。

```
setTimeout((function(i2){
    return function() {
        console.log(i2);
    }
})(i), 1000); 
```

为内部函数声明一个执行上下文，从而将 的当前值`i`保存到`i2`; 这种方法还使用立即执行来保留价值。

**重要的**

应该提到的是，两种方法之间的运行语义并不相同；你的内部函数被传递给，`setTimeout()`而他的内部函数调用`setTimeout()`自己。

将两个代码包装在另一个代码中`setTimeout()`并不能证明只有第二种方法使用了闭包，只是一开始就不一样。

**结论**

两种方法都使用闭包，所以这取决于个人喜好；第二种方法更容易“移动”或概括。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2012-10-17T09:49:27.417

**关闭**

闭包不是函数，也不是表达式。它必须被看作是函数范围外使用的变量和函数内部使用的一种“快照”。从语法上讲，应该说：'采取变量的闭包'。

同样，换句话说：闭包是函数所依赖的变量的相关上下文的副本。

再一次（naïf）：闭包可以访问未作为参数传递的变量。

请记住，这些功能概念很大程度上取决于您使用的编程语言/环境。在 JavaScript 中，闭包依赖于词法作用域（在大多数 C 语言中都是如此）。

因此，返回一个函数主要是返回一个匿名/未命名的函数。当函数访问变量，而不是作为参数传递，并且在其（词法）范围内时，已经采用了闭包。

所以，关于你的例子：

```
// 1
for(var i = 0; i < 10; i++) {
    setTimeout(function() {
        console.log(i); // closure, only when loop finishes within 1000 ms,
    }, 1000);           // i = 10 for all functions
}
// 2
for(var i = 0; i < 10; i++) {
    (function(){
        var i2 = i; // closure of i (lexical scope: for-loop)
        setTimeout(function(){
            console.log(i2); // closure of i2 (lexical scope:outer function)
        }, 1000)
    })();
}
// 3
for(var i = 0; i < 10; i++) {
    setTimeout((function(i2){
        return function() {
            console.log(i2); // closure of i2 (outer scope)

        }
    })(i), 1000); // param access i (no closure)
} 
```

所有人都在使用闭包。不要将执行点与闭包混淆。如果在错误的时刻拍摄了闭包的“快照”，则这些值可能是出乎意料的，但肯定会采取闭包！

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2012-12-21T19:10:29.793

我前段时间写了这篇文章，以提醒自己闭包是什么以及它在 JS 中是如何工作的。

闭包是一个函数，当被调用时，它使用声明它的作用域，而不是调用它的作用域。在 javaScript 中，所有函数的行为都是这样的。只要有仍然指向它们的函数，作用域中的变量值就会持续存在。该规则的例外是“this”，它指的是函数在被调用时所在的对象。

```
var z = 1;
function x(){
    var z = 2; 
    y(function(){
      alert(z);
    });
}
function y(f){
    var z = 3;
    f();
}
x(); //alerts '2' 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-10-17T08:58:44.597

仔细检查后，看起来你们俩都在使用闭包。

在您的朋友的情况下，`i`在匿名函数 1`i2`中访问，并在存在 的匿名函数 2 中访问`console.log`。

在您的情况下，您正在访问存在的`i2`匿名函数内部`console.log`。在“范围变量”下的 chrome 开发人员工具之前和中添加一条`debugger;`语句`console.log`，它将告诉变量在什么范围内。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-03-15T13:56:13.053

考虑以下。这将创建并重新创建一个`f`关闭的函数`i`，但不同的函数！：

```
i=100;

f=function(i){return function(){return ++i}}(0);
alert([f,f(),f(),f(),f(),f(),f(),f(),f(),f(),f()].join('\n\n'));

f=function(i){return new Function('return ++i')}(0);        /*  function declarations ~= expressions! */
alert([f,f(),f(),f(),f(),f(),f(),f(),f(),f(),f()].join('\n\n'));
```

而以下关闭“a”函数“本身”
（他们自己！这之后的片段使用单个引用`f`）

```
for(var i = 0; i < 10; i++) {
    setTimeout( new Function('console.log('+i+')'),  1000 );
}
```

或更明确地说：

```
for(var i = 0; i < 10; i++) {
    console.log(    f = new Function( 'console.log('+i+')' )    );
    setTimeout( f,  1000 );
}
```

注意。`f`is `function(){ console.log(9) }` *before* 的最后一个定义`0`被打印出来。

警告！闭包概念可能会强制分散基本编程的本质：

```
for(var i = 0; i < 10; i++) {     setTimeout( 'console.log('+i+')',  1000 );      }
```

x-refs.:
[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)
[Javascript 闭包解释](https://stackoverflow.com/questions/3056859/javascript-closures-explanation)
[(JS) 闭包是否需要函数内部的函数](https://stackoverflow.com/questions/7096866/does-a-js-closure-require-a-function-inside-a-function)
[如何理解 Javascript 中的闭包？](https://stackoverflow.com/questions/15667093/how-to-understand-closures-in-javascript)
[Javascript局部和全局变量混淆](https://stackoverflow.com/questions/19721313/javascript-local-and-global-variable-confusion)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-05-12T03:27:56.863

我想分享我的例子和关于闭包的解释。我做了一个 python 例子，和两个图来演示堆栈状态。

```
def maker(a, b, n):
    margin_top = 2
    padding = 4
    def message(msg):
        print('\n’ * margin_top, a * n, 
            ' ‘ * padding, msg, ' ‘ * padding, b * n)
    return message

f = maker('*', '#', 5)
g = maker('', '♥’, 3)
…
f('hello')
g(‘good bye!') 
```

此代码的输出如下：

```
*****      hello      #####

      good bye!    ♥♥♥ 
```

这里有两个图来显示堆栈和附加到函数对象的闭包。

[当函数从 maker 返回时](https://i.stack.imgur.com/pioxh.jpg)

[稍后调用该函数时](https://i.stack.imgur.com/JHujU.jpg)

通过参数或非局部变量调用函数时，代码需要margin_top、padding以及a、b、n等局部变量绑定。为了保证函数代码能够正常工作，早就消失的maker函数的栈帧应该是可访问的，它与函数消息对象一起备份在闭包中。**************************

# .net - .NET 删除内联事件处理程序

> ID：12930274
> 
> 赞同：0
> 
> 时间：2012-10-17T08:36:46.800
> 
> 标签：.net, vb.net, events, event-handling

我在 Visual Basic.NET 中添加和删除事件处理程序时遇到了一点问题。虽然这通常相当容易，但我需要删除一个内联事件处理程序。问题是这是否以及如何工作。

```
AddHandler object.ConnectionSuccessful, Sub()
                                            RemoveHandler object.ConnectionSuccessful, Me
                                        End Sub 
```

这是我尝试的方式，它不起作用。现在的问题是，如果不是这样，我如何再次删除这个内联事件处理程序？我发现了一些残酷的方法来从对象中删除所有事件处理程序，但这不是我想要做的。我只想删除这一个特定的事件处理程序。

我知道如果我只使用普通函数和`AddressOf`运算符，这些问题就会消失。但在这种情况下，使用内联方法更方便。

有人对这件事有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:21:46.933

如果您将 lambda 分配给一个变量，则可以这样做（假设这种内联结构接近您想要的）。请注意，您必须键入 lambda，在这种情况下`Action`，为了从自身引用自身。

```
Module Module1

Event TestEvent As Action

Sub Main()

    Dim TestLamba As Action = Sub()
                                  Console.Write("Event!")
                                  RemoveHandler TestEvent, TestLamba
                              End Sub

    AddHandler TestEvent, TestLamba

    RaiseEvent TestEvent()

    RaiseEvent TestEvent()

    Console.ReadKey()

End Sub

End Module 
```

如果你在上面运行这个测试控制台应用程序，你会看到事件被触发了两次，但是“Event！” 只写入控制台一次。

# performance - 如何测量进程之间的干扰

> ID：12930276
> 
> 赞同：3
> 
> 时间：2012-10-17T08:36:53.120
> 
> 标签：performance, computer-science, performance-testing, measurement, perf

在并行系统中，每个进程都会对其他进程产生影响，因为它们都在争夺一些稀缺资源，如 CPU 缓存、内存、磁盘 I/O、网络等。

哪种方法最适合测量过程之间的干扰？例如进程 A 和 B 各自重度访问磁盘。因此，并行运行它们可能会比顺序运行（单个运行时）慢。因为瓶颈是硬盘。

如果我不确切知道进程的行为（磁盘密集型、内存密集型或 CPU 密集型），那么哪种方法最适合分析它？

测量单个运行时间并比较每个并行进程的相对份额？

就像进程 A 平均单独运行 30 秒，当 100% 与 B 并行时 45 秒，当 20% 并行时 35 秒 .. 等等 ??

比较 L1 和 LLC 缓存未命中、页面错误等几个指标会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T23:58:14.473

您需要做的是首先确定每个单独程序的限制因素。如果您想同时运行 CPU 密集型和 IO 密集型，它的影响将非常小。如果你想同时运行两个 IO-bound 进程，就会有很多争用。

我写了一个相当详细的答案，关于如何解释“时间[命令]”结果的输出，看看限制因素是什么。它就在这里： [是什么导致我经过的时间比用户时间长得多？](https://stackoverflow.com/questions/13688840/what-caused-my-elapsed-time-much-longer-than-user-time/13752849#13752849)

一旦您获得了“时间”程序的输出，您就可以确定哪些可能会相互影响，哪些不会。

# sql - DB2 中的计数查询

> ID：12930279
> 
> 赞同：2
> 
> 时间：2012-10-17T08:37:04.427
> 
> 标签：sql, count, db2

在大型机 DB2 中，我有两个表 TAB 1 和 TAB 2。我在这些表中有如下记录：

选项卡 1：

```
AP_NBR  LOC_NBR
1000    1
1000    2
1000    3 
```

选项卡 2：

```
LOC_NBR ITM_ID
1   500
1   600
2   450
2   750 
```

她我需要如下输出：

```
AP_NBR  COUNT(LOC_NBR)  COUNT(ITM_ID)
1000    3                     4 
```

如何为此编写 COUNT 查询？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:46:29.330

```
select t1.AP_NBR, count(distinct t1.LOC_NBR), count(distinct t2.ITM_ID)
from TAB1 t1 join TAB2 t2 on t1.LOC_NBR = t2.LOC_NBR
group by t1.AP_NBR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:48:06.923

试试这个：

```
select * from
(select AP_NBR,COUNT(*) cnt_LOC_NBR from TAB1 group by AP_NBR)a,
(select COUNT(*) cnt_ITM_ID from TAB2 where LOC_NBR in 
(select LOC_NBR from TAB1))b 
```

# c# - 在 C# 中使用字符串调用哈希表

> ID：12930281
> 
> 赞同：2
> 
> 时间：2012-10-17T08:37:09.413
> 
> 标签：c#, hashtable

正如你所看到的，我有一个被调用的哈希表，`GetEdinburgh()` 但是这个程序需要运行可变时间并且每次它需要调用一个不同的哈希表。如何`GetEdinburgh()`用类似的字符串替换`GetTown()`？

```
static Hashtable GetEdinburgh()
{
    Hashtable hashtable = new Hashtable();
    hashtable.Add("Aberdeen", 129);
    hashtable.Add("Ayr", 79);
    hashtable.Add("Fort_William", 131);
    hashtable.Add("Glasgow", 43);
    hashtable.Add("Inverness", 154);
    hashtable.Add("St_Andrews", 50);
    hashtable.Add("Stirling", 36);
    return hashtable;
}

static void Main(string[] args)
{
    int total = 1000;
    string Town = "";

    Hashtable hashtable = GetEdinburgh(); //how can I change this to a string?
    foreach (DictionaryEntry entry in hashtable)
    {
        if (Convert.ToInt32(entry.Value) < total)
        {
            total = Convert.ToInt32(entry.Value);
            Town = entry.Key.ToString();
        }

    }
    Console.WriteLine(Town + ", " + total + "km");
    Console.ReadLine();
} 
```

我可能没有具体说明我的问题。上面的当前代码工作正常，但我需要扩展它。我需要调用比上面提供的更多的哈希表，但我不能直接调用它。我需要有一个字符串值，每次实现循环以调用新表时都会更改。但我无法将 a 转换`system.Collections.hashtable`为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:21:23.747

**编辑2**

更简单地说，如果您想从 a 中获取匹配值，[`Hashtable`](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)请`string`执行此操作，

```
Hashtable distancesFromEdinburgh = GetEdinburgh();
string town = "Ayr";
int distanceFromEdinburghToAyr = distancesFromEdinburgh[town]; 
```

**编辑**

答案是最简单也是最糟糕的方法是，

```
static HashTable GetTown(string town)
{
    Hashtable hashtable;

    switch(town)
    {
        case "Edinburgh":
            hashtable = new Hashtable();
            hashtable.Add("Aberdeen", 129);
            hashtable.Add("Ayr", 79);
            hashtable.Add("Fort_William", 131);
            hashtable.Add("Glasgow", 43);
            hashtable.Add("Inverness", 154);
            hashtable.Add("St_Andrews", 50);
            hashtable.Add("Stirling", 36);
            break;

            // Other cases here
    }

    return hashtable;
} 
```

* * *

好的，不要`HashTable`用于开始。下面的代码使用了许多最新的功能，并且与您发布的代码具有相同的功能。

又是什么问题？

```
private enum Towns
{
    Aberdeen,
    Ayr,
    FortWilliam,
    Glasgow,
    ...
}

private static IDictionary<Towns, int> GetEdinburgh()
{
    return new Dictionary
    {
        { Key = Aberdeen, Value = 129 },
        { Key = Ayr, Value = 79 },
        { Key = FortWilliam, Value = 131 },
        { Key = Glasgow, Value = 43 },
        ...
    };
}

static void Main(string[] args)
{
    var closest = this.GetEdinburgh()
        .Where(p => p.Value < 1000)
        .Min(p => p.Value);

    Console.WriteLine("{0}, {1}km", closest.Key, closest.Value);
    Console.ReadKey();
} 
```

* * *

如果你想要一个通用的 get town 函数，你可以像这样声明它。

```
private static IDictionary<Towns, int> GetTown(Towns town)
{
    switch(town)
    {
        case Towns.Edinburgh:
            return new Dictionary
            {
                { Key = Aberdeen, Value = 129 },
                { Key = Ayr, Value = 79 },
                { Key = FortWilliam, Value = 131 },
                { Key = Glasgow, Value = 43 },
                ...
            }

        case Towns.Ayr
            ...

        ...

        default:
           throw new ArgumentException(
               string.Format("{0} not implemented", town),
               "town"); 
    };
} 
```

此函数的此实现将根据您存储或定义距离的方式而有所不同。当前的实现假设它们是硬编码的，这将很快但维护起来有点脆弱。

如果你有城镇位置的坐标，你可以计算它们之间的距离，“就像乌鸦飞一样”在每次通话中。

如果你想生成一个“真实的”最佳行驶距离，你需要一张地图和一个相当复杂的寻路算法。

你有什么，你想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:46:21.983

更好的是，您可以编写这样的方法：

```
static Hashtable GetHashtable(string Table )
    {
        Hashtable hashtable = new Hashtable();
           switch(table)
          {
        case "Edinburgh":
        hashtable.Add("Aberdeen", 129);
        hashtable.Add("Ayr", 79);
        hashtable.Add("Fort_William", 131);
        hashtable.Add("Glasgow", 43);
        hashtable.Add("Inverness", 154);
        hashtable.Add("St_Andrews", 50);
        hashtable.Add("Stirling", 36);
        break;
           ................
        return hashtable;
    } 
```

您可以将字符串传递给方法并获取值。

> > > > > 如果答案确实回答了您的问题，请单击已回答。

# javascript - 使用 Javascript 使用下一个上一个按钮显示和隐藏图像

> ID：12930284
> 
> 赞同：1
> 
> 时间：2012-10-17T08:37:18.873
> 
> 标签：javascript, html, css, image, gallery

我有四个 div，每个 div 包含图像和内容。一个下一个和上一个按钮。一次只有 div 会显示。单击下一个必须显示第二个 div，第一个将隐藏。相同到第四个div。需要使用纯Javascript。**不允许使用 jquery 或 javascript 插件**.... :(。任何人都可以帮我这样做吗？

谢谢！

我的html代码：

```
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<div id="container">
  <div id="theProduct">
    <div id="slides"> <a href="#" class="prev"><img src="img/prev.jpg" width="29" height="29" alt="Arrow Prev"></a> <a href="#" class="next"><img src="img/next.jpg" width="29" height="29" alt="Arrow Next"></a>
      <!-- Show/hide Div  strating here -->
      <div class="slides_container">
        <div class="div1">
          <div class="img1">
            <div class="price">
              <ul>
                <li class="strike">Rs. 1300</li>
                <li class="offer">Rs. 1050</li>
              </ul>
              <div class="buy"><a href="#">Buy Now</a></div>
            </div>

          </div>
        </div>
        <div class="div2">
          <div class="img2">
            <div class="price">
              <ul>
                <li class="strike">Rs. 1300</li>
                <li class="offer">Rs. 1050</li>
              </ul>
              <div class="buy"><a href="#">Buy Now</a></div>
            </div>

          </div>
        </div>
        <div class="div3">
          <div class="img3">
            <div class="price">
              <ul>
                <li class="strike">Rs. 1300</li>
                <li class="offer">Rs. 1050</li>
              </ul>
              <div class="buy"><a href="#">Buy Now</a></div>
            </div>

          </div>
        </div>
        <div class="div4">
          <div class="img4">
            <div class="price">
              <ul>
                <li class="strike">Rs. 1300</li>
                <li class="offer">Rs. 1050</li>
              </ul>
              <div class="buy"><a href="#">Buy Now</a></div>
            </div>

          </div>
        </div>

      </div>
      <!-- Show/Hide Div ending here -->
    </div>
    <img src="img/example-frame.png" width="739" height="341" alt="Example Frame" id="frame"> </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:16:19.250

**下面这个很实用**

```
<style type="text/css" media="screen">
#container{position:relative;width:120px;height:120px;}
#container div{position:absolute;width:120px;height:120px;}
#box-red{background:red;}
#box-yellow{background:yellow;display:none;}
#box-green{background:green;display:none;}
#box-maroon{background:maroon;display:none;}
</style> 
```

**Javascipt**

```
<script type="text/javascript">
var $c =0;
function next(){
    var boxes = document.getElementsByClassName("box");
    $c +=1;
    if($c >= boxes.length) $c = 0;
    for (var $i=0;$i<boxes.length;$i++){
        boxes[$i].style.display  = "none";
    }
    boxes[$c].style.display  = "block";
    return false;
}
function prev(){
    var boxes = document.getElementsByClassName("box");
    $c -=1;
    if($c < 0) $c = (boxes.length-1);   
    for (var $i=0;$i<boxes.length;$i++){
        boxes[$i].style.display  = "none";
    }
        boxes[$c].style.display  = "block";
    return false;   
}
</script> 
```

**HTML**

```
 <div id="container">
    <div id="box-red" class="box">DIV1</div>
    <div id="box-yellow" class="box">DIV2</div>
    <div id="box-green" class="box">DIV3</div>
    <div id="box-maroon" class="box">DIV4</div>
</div>
    <a href="#" onClick="return prev();">previous</a>  &nbsp; <a href="#" onClick="return next();">next</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:45:43.950

我认为这就是你想要的：http:
[//girlswhogeek.com/tutorials/2007/show-and-hide-elements-with-javascript](http://girlswhogeek.com/tutorials/2007/show-and-hide-elements-with-javascript)

但是你可以把它放在一个函数中：

```
<script language="JavaScript">
function ShowHide(divId){
    if(document.getElementById(divId).style.display == 'none')
    {
        document.getElementById(divId).style.display='block';
    }
    else
    {
        document.getElementById(divId).style.display = 'none';
    }
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:49:16.247

```
function toggleImage(forwrad){
var imageConainer = document.getElementByID(Your Parent div id);

var images = imageContainer.childNodes;

var showIndex = '';
for(var i=0; i<images.length;i++){
  if(images[i].style.display == 'block'){
    images[i].style.display == 'none';
    if(forwrad){
      showIndex = 1+1;
    }
    else{
      showIndex = 1-1;
    }
  }
}
images[showIndex].style.display = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:01:31.247

从技术上讲，纯 CSS 也是可能的。使用 :target 伪类。但这会用#标签污染你的网址。但你可能真的想要那个。

Selectivizr 也是旧浏览器的一个很好的 polyfill

# ios - 在 iOS 中，'sysctlbyname("net.inet.tcp.pcblist", buf, &len, 0, 0)' 返回的 buf 类型是什么？

> ID：12930290
> 
> 赞同：4
> 
> 时间：2012-10-17T08:37:33.260
> 
> 标签：ios

我想在我的 iPhone 上获取 tcp 连接列表。我得到了关于
[如何通过objective-c在iphone上获取tcp/udp打开端口列表的以下代码？](https://stackoverflow.com/questions/8176839/how-to-get-tcp-udp-opening-port-list-on-iphone-by-objective-c)
[如何在 iOS 4 中列出 TCP/UDP 连接](https://stackoverflow.com/questions/6527065/how-to-list-tcp-udp-connections-in-ios-4)

```
size_t len = 0;
if (sysctlbyname("net.inet.tcp.pcblist", 0, &len, 0, 0) < 0) {
    perror("sysctlbyname");
} else {
    char *buf = malloc(len);
    sysctlbyname("net.inet.tcp.pcblist", buf, &len, 0, 0);
    NSData *data = [NSData dataWithBytesNoCopy:buf length:len];
    NSLog(@"data = %@", data);
} 
```

但我无法解释变量“buf”，因为它指向某个结构而不是字符串。buf 的类型可能是什么？有人能帮我吗...

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:54:54.460

这里 buf 是一个结构类型 xpingen。xinpgen *oxig, *xig; oxig = xig = (struct xinpgen *)buf;

# database - Hadoop和数据库

> ID：12930296
> 
> 赞同：-2
> 
> 时间：2012-10-17T08:37:45.297
> 
> 标签：database, hadoop

我目前正在研究一个我试图将 hadoop 与数据库集成的问题，因为 hadoop 提供并行性但不提供性能。我指的是hadoopDB的论文。Hadoop 通常获取一个文件并将其拆分为块并将这些块放置在不同的数据节点中。在处理过程中，namenode 会告诉可能找到块的位置并在该节点上运行映射。我正在查看用户告诉namenode在哪个datanode上运行映射的可能性，并且namenode运行映射以从文件或数据库中获取数据。你能告诉我告诉namenode哪个datanode运行地图是否可行吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:45:19.250

不确定为什么要将 map/reduce 任务绑定到特定节点。如果该特定节点出现故障会发生什么？在 Hadoop 中，map/reduce 操作不能绑定到集群中的特定节点，这使得 Hadoop 更具可扩展性。

此外，您可能想查看[@Apache Sqoop](http://sqoop.apache.org/)以在 Hadoop 和数据库之间进行导入/导出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:06:45.870

如果您希望从分布式数据存储中查询数据，那么为什么不考虑将数据存储到[Hbase](http://hbase.apache.org/)中，这是一个构建在 Hadoop 和 HDFS 之上的分布式数据库。它在后台将数据存储到 HDFS 中，并提供类似于大型数据库的查询语义。在这种情况下，您不必担心向正确的数据节点发出查询。HBase 的查询语义（也称为 hadoop 数据库将负责相同的处理）。

为了方便查询并将数据存储到 Hbase 中，如果您的数据是时间序列数据，那么您还可以考虑使用[OpenTSDB](http://opentsdb.net/)，它是 Hbase 的包装器，为您提供基于标签的简单查询语义，并与 GNUPlot 很好地集成，为您提供图表比如数据的可视化。

Hbase 非常适合对非常大的分布式数据存储进行随机读取/写入，但是，如果您的查询对批量写入/读取进行操作，[Hive](http://hive.apache.org/)可能非常适合您的情况。与 Hbase 类似，它也构建在 Hadoop Map Reduce 和 HDFS 之上，并将每个查询转换为底层的 map-reduce 作业。Hive 最好的地方在于它提供了类似 SQL 的语义，并且您可以像在关系数据库上一样进行查询。就数据组织和 Hive 功能的基本介绍而言，您可能希望了解以下几点：

*   Hive 为存储在 HDFS 上的数据添加结构。表的模式存储在单独的元数据存储中。它将类似于 SQL 的语义转换为在后端的 HDFS 上运行的多个 map reduce 作业。

*   传统数据库遵循schema on write策略，一旦为表设计了schema，在写入数据本身时，会检查要写入的数据是否符合预定义的schema。如果不是，则拒绝写入。在 Hive 的情况下，情况正好相反。它在读取策略上使用模式。这两种政策都有各自的取舍。在写入模式的情况下，加载时间更长，加载速度更慢，因为在加载数据时会验证模式一致性。但是，它提供了更快的查询时间，因为它可以基于模式中的预定义列索引数据，但是可能存在在最初填充数据时无法指定索引的情况，这就是读取模式派上用场的地方。

*   Hive 非常适合批量访问，作为新更新的数据更新需要构建一个全新的表。此外，由于没有索引，查询时间比传统数据库慢。

*   Hive 将元数据存储到称为“Metastore”的关系数据库中。

*   Hive 中有 2 种表：

    托管表 - 表的数据文件是预定义的，并被移动到 HDFS 上的 hive 仓库目录（通常，或任何其他 hadoop 文件系统）。当一个表被删除时，在这种情况下，元数据和数据都会从文件系统中删除。

    外部表 - 在这里您可以懒惰地在表中创建数据。在这种情况下，没有数据移动到 Hive 仓库目录，并且模式/元数据与实际数据松散耦合。当一个表被删除时，只有元数据被删除，实际数据保持不变。如果您希望数据被多个数据库使用，它会很有帮助。使用相同的另一个原因可能是您需要在相同的基础数据上使用多个模式。

# wpf - 禁用 WPF WebBrowser 滚动条

> ID：12930297
> 
> 赞同：12
> 
> 时间：2012-10-17T08:37:47.690
> 
> 标签：wpf, xaml

我试图隐藏 webbrowser 滚动条，但它仍然可见。

XAML：

```
<WebBrowser Name="wb" Width="700" Height="600" 
                        OverridesDefaultStyle="False"
                        ScrollViewer.CanContentScroll="False"
                        ScrollViewer.HorizontalScrollBarVisibility="Hidden" 
                        ScrollViewer.VerticalScrollBarVisibility="Hidden" /> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T09:21:44.660

这对我有用：

```
<WebBrowser LoadCompleted="wb_LoadCompleted"></WebBrowser>           

void wb_LoadCompleted(object sender, NavigationEventArgs e)
    {
        string script = "document.body.style.overflow ='hidden'";
        WebBrowser wb = (WebBrowser)sender;
        wb.InvokeScript("execScript", new Object[] { script, "JavaScript" });
    } 
```

这样你就不需要 mshtml

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T09:02:02.433

不理想，但它有效：

将 Microsoft.mshtml 添加到您的项目引用中。然后将您的 xaml 更改为：

```
<WebBrowser Name="wb" Width="700" Height="600" 
            OverridesDefaultStyle="False"
            ScrollViewer.CanContentScroll="False"
            ScrollViewer.HorizontalScrollBarVisibility="Hidden" 
            ScrollViewer.VerticalScrollBarVisibility="Hidden"
            LoadCompleted="wb_LoadCompleted"></WebBrowser> 
```

在你的代码后面：

```
private void wb_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
    mshtml.IHTMLDocument2 dom = (mshtml.IHTMLDocument2)wb.Document;
    dom.body.style.overflow = "hidden";
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-12-18T08:56:47.277

添加`scroll="no"`到 html`body`标签对我有用，而这里的其他建议没有。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-07T11:03:37.903

在你的 html ....

```
 html{overflow:hidden;} 
```

它应该可以解决它，或者您可以使用元标记来指定即渲染模式

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-26T18:19:41.050

将 Microsoft.mshtml 添加到您的项目引用中。您不需要更改 XAML 中的任何滚动属性，因为在使用 mshtml 时，它们不是控制 webbrowser 的属性。在 LoadCompleted 函数中执行以下操作：

```
private void webBrowserChat_LoadCompleted(object sender, NavigationEventArgs e)
{
    mshtml.IHTMLDocument2 documentText = (IHTMLDocument2)webBrowserChat.Document; 
    //this will access the document properties 
    documentText.body.parentElement.style.overflow = "hidden"; 
   // This will hide the scrollbar (Set to "auto" if you want to see when it passes the surfacelimit)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T14:41:37.113

I've made my WebBrowser control wider than the visible area by 16 pixels which is the width of the scrollbar.

This will only work if your web browser control touches the far right of your app. The web browser control will not allow other XAML elements on top of it, but you can make it overflow the edge of your app.

I've done this in a Loaded event handler for the window:

```
private void AppLoaded(object sender, RoutedEventArgs routedEventArgs)
{
    WebBrowserView.Width = WebBrowserView.ActualWidth + 16;
} 
```

I found injecting JavaScript into the page seemed to break some pages and the scrollbar would only disappear once the page had completed loading.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-08T20:23:58.423

我用这个简单的一行来直接定义文档的正文：

```
wb.Document.Body.scroll = "no" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-19T18:21:51.373

在标签上分配了值的[溢出属性解决了这个问题。](http://www.w3schools.com/cssref/pr_pos_overflow.asp)`hidden``body`

如果您的`body`标签有 CSS 规则集，请在其中添加以下行：

```
overflow: hidden 
```

否则，将以下行添加到您的具体`<body>`标签减速：

```
style="overflow:hidden" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-25T01:32:51.400

这与你们遇到的问题不太一样，但是我的搜索把我带到了这里，所以我希望这对某人有所帮助。我试图使用 WPF WebBrowser 组件嵌入 PDF 文档。原来是 PDF 查看器（从浏览器调用）创建了滚动条！

为了解决它，将参数添加到对 PD 文件的调用中。在我的 XML 中： Source="http://address/file.pdf#toolbar=0&navpanes=0&scrollbar=0"

在它后面的代码中，格式如下：[http://address/file.pdf#toolbar=0&navpanes=0&scrollbar=0](http://address/file.pdf#toolbar=0&navpanes=0&scrollbar=0)

（感谢[leeand00](https://stackoverflow.com/users/18149/leeand00)从他对[这个](https://stackoverflow.com/questions/2104608/hiding-the-toolbars-surrounding-an-embedded-pdf)问题的回答中提供的解决方案。）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-13T05:33:15.690

抱歉有点晚了，但我终于可以禁用滚动条了。@Devdude 的提示是关键。

要点是设置`overflow = hidden`，但是如何在 WPF 中做到这一点？我使用`DependencyObject`以便可以绑定：随时启用和禁用。

首先，您需要添加对`mshtml`. 在您的项目中，添加引用 add `Microsoft.mshtml`。然后在你的`.cs`文件中添加：

```
using mshtml; 
```

依赖对象

```
public class WebBrowserUtility : DependencyObject
{
    public static readonly DependencyProperty HideScrollBarProperty = DependencyProperty.RegisterAttached(
        "HideScrollBar",
        typeof(string),
        typeof(WebBrowserUtility),
        new UIPropertyMetadata(null, HideScrollBarPropertyChanged));

    public static string GetHideScrollBar(DependencyObject obj)
    {
        return (string)obj.GetValue(HideScrollBarProperty);
    }
    public static void SetHideScrollBar(DependencyObject obj, string value)
    {
        obj.SetValue(HideScrollBarProperty, value);
    }
    public static void HideScrollBarPropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        WebBrowser browser = obj as WebBrowser;
        string str = args.NewValue as string;
        bool isHidden;
        if (str != null && bool.TryParse(str, out isHidden))
        {
            browser.HideScrollBar(isHidden);
        }
    }
} 
```

`WebBrowser`扩展，它实际上做了禁用溢出的工作，这仅在文档加载完成后发生`WebBrowser`：

```
public static class WebBrowserExtension
{
    public static void HideScrollBar(this WebBrowser browser, bool isHidden)
    {
        if (browser != null)
        {
            IHTMLDocument2 document = browser.Document as IHTMLDocument2;
            if (document == null)
            {
                // If too early
                browser.LoadCompleted += (o, e) => HideScrollBar(browser, isHidden);
                return;
            }

            //string bodyOverflow = string.Format("document.body.style.overflow='{0}';", isHidden ? "hidden" : "auto");
            //document.parentWindow.execScript(bodyOverflow); // This does not work for me...

            string elementOverflow = string.Format("document.documentElement.style.overflow='{0}';", isHidden ? "hidden" : "auto");
            document.parentWindow.execScript(elementOverflow);
        }
    }
} 
```

在 XAML 中使用

```
<WebBrowser ns:WebBrowserUtility.HideScrollBar="True"/> 
```

注意：确保拉伸`WebBrowser`以查看全部内容。无论如何，这次`scrollbar`将被隐藏。

# c# - 如何使用 FindControl

> ID：12930298
> 
> 赞同：2
> 
> 时间：2012-10-17T08:37:49.737
> 
> 标签：c#, asp.net

我正在尝试使用以下代码在后面的代码中获取隐藏输入的值。我正在尝试投射它，但它找不到它，有什么帮助吗？

```
((HtmlControl)FindControl("contentId")) 
```

我使用以下代码在 aspx 中声明它：

```
 <input id="contentId"  type="hidden" /> 
```

我不想运行服务器，因为我有自己的理由

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:48:53.037

要在服务器端访问 HTML 控件（在您的 C# 代码中），您需要首先添加 runat="server" 属性。所以，你的标记应该看起来像

```
<input type="hidden" id="contentId" runat="server"/> 
```

现在，在后面的代码中，如果后面的代码正确生成，您可以通过其 id`contentId`本身使用控件。

请让我们知道为什么您首先被迫使用 FindControl，因为它可以通过直接使用 id 来访问。

***更新***

根据下面的评论，出于某种原因，用户对将此输入作为服务器端控件不感兴趣。那么您可以在服务器端读取值的唯一可能性如下。但不建议这样做，因为对名称的任何更改都会被忽视并在运行时中断。

```
<input type="hidden" id="contentId" name="contentName" runat="server"/> 
```

在代码中

`this.Request.Forms["contentName"]`将返回隐藏值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T08:44:26.850

尝试以这种方式在页面上搜索它

```
HiddenField hf = (HiddenField)page.FindControl("contentId"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T10:11:03.423

要获取值：

```
HiddenField h = (HiddenField)Gridview.FindControl("HiddenFieldName"); 
```

然后，如果您愿意，可以将其放入字符串中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T08:42:09.117

使用此代码：

`string s=((HiddenField)Panel1.FindControl("contentId")).Value;`

这里的面板是容器控件。这可能是网格或其他任何东西，甚至是母版页。但如果您使用 FindControl，我认为控件可能位于某个容器内。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-11T17:40:40.757

```
HtmlInputHidden hf = Page.FindControl("contentId") as HtmlInputHidden;
string hfValue = hf.Value; 
```

# c - 为 windows mobile 6 编译 zlib

> ID：12930302
> 
> 赞同：5
> 
> 时间：2012-10-17T08:38:05.150
> 
> 标签：c, visual-studio-2008, windows-mobile, zlib

我正在尝试在 Visual Studio 2008 中为 Windows Mobile 编译 zlib。

但是，这会导致错误。在文件 zconf.h 中包含文件 sys/types.h。

虽然此文件位于标准的 Visual Studio 包含目录中，但 windows mobile sdk 附带的文件夹 ce/include 中没有 sys 子文件夹，并且这里没有 types.h 文件。

因此， zlb 无法编译。

那应该如何解决？

更新：包含本身在#if 块中。再具体一点：

```
#ifdef STDC
#  ifndef Z_SOLO
#    include <sys/types.h>      /* for off_t */
#  endif
#endif 
```

这就引出了另一个问题。Z_SOLO 宏是什么意思？它散落在#ifdef 中，就像在 zlib 中一样，但是搜索它并没有给出关于应该是什么的线索。顺便说一句，它没有定义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T13:51:46.990

`Z_SOLO`用于在不使用*任何*外部库的情况下编译和使用 zlib。它适用于嵌入式环境。没有`gz*`函数，并且还取出了其他几个依赖于内存分配的函数（`compress()`, `uncompress()`）。基本 zlib 初始化函数（例如`deflateInit()`）必须提供内存分配函数。这将避免您在 Windows Mobile 没有标准 C 库头文件和函数时遇到的所有问题。

为了使用`Z_SOLO`，您需要编辑`zconf.h`以`#define Z_SOLO`接近开头。然后编译 zlib 并将其与编辑后的`zconf.h`​​. （如果你只用 编译`Z_SOLO`，但不编辑`zconf.h`，那么你会搞砸你尝试将编译后的 zlib 与头文件一起使用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:07:33.747

您可以直接获取源代码，包括[我在 CodePlex 中发布](http://zlibce.codeplex.com/)的 Studio 项目文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:34:32.033

定义 Z_SOLO 并从项目中排除所有 gz 文件允许它正确编译。

gz (gzguts.h, gzread.c etcetera) 文件包括 fcntl.h，它也不存在于 ce nclude 文件夹中，这就是他们必须去的原因。

# python - 将文件名与文件夹名匹配，然后移动文件

> ID：12930303
> 
> 赞同：4
> 
> 时间：2012-10-17T08:38:06.450
> 
> 标签：python, regex

我有名为“a1.txt”、“a2.txt”、“a3.txt”、“a4.txt”、“a5.txt”等的文件。然后我有名为“a1_1998”、“a2_1999”、“a3_2000”、“a4_2001”、“a5_2002”等的文件夹。

例如，我想在文件“a1.txt”和文件夹“a1_1998”之间建立连接。（我猜我需要一个正则表达式来做到这一点）。然后使用shutil将文件“a1.txt”移动到文件夹“a1_1998”，文件“a2.txt”移动到文件夹“a2_1999”等......

我是这样开始的，但由于对常规表达式缺乏了解，我陷入了困境。

```
import re
##list files and folders

r = re.compile('^a(?P') 
m = r.match('a') 
m.group('id')

##
##Move files to folders 
```

我稍微修改了下面的答案以使用shutil移动文件，成功了！

```
import shutil
import os
import glob 

files = glob.glob(r'C:\Wam\*.txt')

for file in files: 
    # this will remove the .txt extension and keep the "aN"  
    first_part = file[7:-4]
    # find the matching directory 
    dir = glob.glob(r'C:\Wam\%s_*/' % first_part)[0]
    shutil.move(file, dir) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:48:00.720

您不需要正则表达式。

像这样的东西怎么样：

```
import glob
files = glob.glob('*.txt')
for file in files:
    # this will remove the .txt extension and keep the "aN" 
    first_part = file[:-4]
    # find the matching directory
    dir = glob.glob('%s_*/' % first_part)[0]
    os.rename(file, os.path.join(dir, file)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:17:26.743

考虑到 Inbar Rose 的建议，一个轻微的替代方案。

```
import os
import glob

files = glob.glob('*.txt')
dirs = glob.glob('*_*')

for file in files:
  filename = os.path.splitext(file)[0]
  matchdir = next(x for x in dirs if filename == x.rsplit('_')[0])
  os.rename(file, os.path.join(matchdir, file)) 
```

# symfony - 如何根据子域在 Symfony 中设置文化/语言环境？

> ID：12930305
> 
> 赞同：0
> 
> 时间：2012-10-17T08:38:13.583
> 
> 标签：symfony, localization

我正在使用 Symfony 2.1，我想知道是否有办法根据子域设置文化/语言环境。

例子：

us.xxxxxxxxx.com -> 美国英语 (en_US)
uk.xxxxxxxxx.com -> 英国英语 (en_GB)
es.xxxxxxxxx.com -> 西班牙西班牙语 (es_ES)
ar.xxxxxxxxx.com -> 阿根廷西班牙语 ( es_AR)

我的意思是，在通配符中，我可以获取国家/地区，然后为站点设置文化和区域设置。

我已经阅读了 Symfony 2.1 的文档，但我不明白我应该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:50:04.730

```
jms_i18n_routing:
    default_locale: en
    locales: [en, de]
    strategy: custom
    hosts:
        en: en.foo.com
        de: de.foo.com
    redirect_to_host: true 
```

# java - 具有要在 Excel 中显示的不同数据的列表

> ID：12930324
> 
> 赞同：1
> 
> 时间：2012-10-17T08:39:12.803
> 
> 标签：java, excel, list, arraylist, aspose

我有一个任务 id 列表，例如 1,2,3,4,5,6，一个人 id 说 34512，只有 4 个，其他人 id 说 23124。我在 excel 中显示每个人 id 的数据

```
 A  B C D E F --->cells
34512  1  2 3 4 5 6
23124         4 
```

我想显示如上的输出，但我越来越喜欢

```
 A  B C D E F --->cells
34512  1  2 3 4 5 6
23124  4 
```

因为我将每个新人员 ID 的单元格计数作为 A 开始。我现在需要查看给定人员 ID 的 quesid 是否不存在，那么它应该将单元格留空并且应该显示如第一个所示。

我可以对以前和新的 quesid 列表做任何事情，并检查 quesid 是否不在其列表中，然后相应地开始计数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:57:50.937

您应该为人员 ID 不存在的 questid 插入空单元格。

我猜，您只为人员 ID 23124 插入一个单元格。但您应该先插入 3 个空单元格，然后插入一个包含内容的单元格和另外 2 个空单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:15:49.197

如果我没记错的话，您正试图在与他的 id 匹配的特定行中添加人员的数据，并在与他的任务 ID 匹配的特定列中添加他的任务 ID。

对于人 id 7，您希望将他的数据添加到第 7 行，如果他的任务 ID 为 1，您希望将其插入 A 列，如果他的任务 ID 为 2，那么您希望将其输入 B 列和依此类推。

如果这是真的，那么下面的代码说明了如何实现这样的事情。

**爪哇**

```
//Suppose your person id is 7, so your data will be inserted in row 7
int personId = 7;

//Suppose that person's data is 5, then it will be inserted in column E (A, B, C, D, E, F, G...)
int personData = 5;

Workbook workbook = new Workbook();

Worksheet worksheet = workbook.getWorksheets().get(0);

String cellName = CellsHelper.cellIndexToName(personId - 1, personData - 1);

worksheet.getCells().get(cellName).putValue(personData);

workbook.save("output.xlsx", SaveFormat.XLSX); 
```

* * *

我附上了输出文件的截图供您参考。 ![在此处输入图像描述](../Images/d789fb86a261dbeaadedaefd06c48382.png)

# c# - 删除 ExpanderView 中的左边距/填充

> ID：12930325
> 
> 赞同：12
> 
> 时间：2012-10-17T08:39:14.450
> 
> 标签：c#, xaml, user-interface, windows-phone-7.1

默认情况下，在 UI 呈现的应用程序中实现 ExpanderView，并且 expanderView 控件应用了这个左边距，某种缩进。默认情况下是这样的，这真的很愚蠢。

有没有办法摆脱那个边距，只是控制完全向左浮动？

另外，如何向扩展器矩形添加一些文本？没有这样的属性可用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T14:45:18.443

您只需要编辑扩展器的控制模板。如果您有 Expression Blend，它会变得快速而简单。您只需右键单击画板上的扩展器，选择“编辑模板”，然后选择编辑当前模板或您可以制作的副本，并可能将其放入单独的资源字典中。这是一个示例模板。**注意到 itemsCanvas 底部的 11,0,0,0 Margin 了吗？**您可以使用相同的方法来编辑几乎任何控件模板。:)

```
<Style x:Key="ExpanderViewStyle1" TargetType="toolkit:ExpanderView">
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="toolkit:ExpanderView">
                        <Grid>
                            <Grid.Resources>
                                <QuadraticEase x:Key="QuadraticEaseOut" EasingMode="EaseOut"/>
                                <QuadraticEase x:Key="QuadraticEaseInOut" EasingMode="EaseInOut"/>
                            </Grid.Resources>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="41"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="ExpansionStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition From="Collapsed" GeneratedDuration="0:0:0.15" To="Expanded">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas">
                                                    <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}" KeyTime="0:0:0.00" Value="0"/>
                                                    <EasingDoubleKeyFrame x:Name="CollapsedToExpandedKeyFrame" EasingFunction="{StaticResource QuadraticEaseOut}" KeyTime="0:0:0.15" Value="1"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimation Duration="0" To="1.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="Expanded" GeneratedDuration="0:0:0.15" To="Collapsed">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas">
                                                    <EasingDoubleKeyFrame x:Name="ExpandedToCollapsedKeyFrame" EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="1"/>
                                                    <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="0"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas">
                                                    <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="1.0"/>
                                                    <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="0.0"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="ItemsCanvas">
                                                    <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="0.0"/>
                                                    <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="-35"/>
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Collapsed"/>
                                    <VisualState x:Name="Expanded">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas"/>
                                            <DoubleAnimation Duration="0" To="1.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ExpandabilityStates">
                                    <VisualState x:Name="Expandable"/>
                                    <VisualState x:Name="NonExpandable">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ExpandableContent">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Collapsed"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="Line">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Collapsed"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="NonExpandableContent">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <ListBoxItem x:Name="ExpandableContent" Grid.ColumnSpan="2" Grid.Column="0" toolkit:TiltEffect.IsTiltEnabled="True" Grid.Row="0" Grid.RowSpan="2">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="41"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <ContentControl x:Name="Header" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Grid.Column="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Grid.Row="0"/>
                                    <ContentControl x:Name="Expander" ContentTemplate="{TemplateBinding ExpanderTemplate}" Content="{TemplateBinding Expander}" Grid.Column="1" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Margin="11,0,0,0" Grid.Row="1"/>
                                    <Grid x:Name="ExpanderPanel" Background="Transparent" Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0" Grid.RowSpan="2"/>
                                </Grid>
                            </ListBoxItem>
                            <Line x:Name="Line" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="1" Grid.RowSpan="2" Stretch="Fill" Stroke="{StaticResource PhoneSubtleBrush}" StrokeThickness="3" X1="0" X2="0" Y1="0" Y2="1"/>
                            <ContentControl x:Name="NonExpandableContent" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding NonExpandableHeaderTemplate}" Content="{TemplateBinding NonExpandableHeader}" Grid.Column="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Grid.Row="0" Grid.RowSpan="2" Visibility="Collapsed"/>
                            <Canvas x:Name="ItemsCanvas" Grid.Column="1" Margin="11,0,0,0" Opacity="0.0" Grid.Row="2">
                                <Canvas.RenderTransform>
                                    <CompositeTransform TranslateY="0.0"/>
                                </Canvas.RenderTransform>
                                <ItemsPresenter x:Name="Presenter"/>
                            </Canvas>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

无论哪种方式，一旦您找到控制模板，它就会快速而轻松。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T15:56:00.910

为时已晚，但也许它会帮助某人。我以这种样式删除了该边距。我从默认网格中删除了列。此外，我将其创建为 Wrap 面板。可以在 ItemsPanelTemplate 中修改。

```
<Style x:Key="ExpanderViewStyle" TargetType="toolkit:ExpanderView">
  <Setter Property="HorizontalAlignment" Value="Stretch"/>
  <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
  <Setter Property="ItemsPanel">
      <Setter.Value>
          <ItemsPanelTemplate>
              <toolkit:WrapPanel/>
          </ItemsPanelTemplate>
      </Setter.Value>
  </Setter>
  <Setter Property="Template">
      <Setter.Value>
          <ControlTemplate TargetType="toolkit:ExpanderView">
              <Grid>
                  <Grid.Resources>
                      <QuadraticEase x:Key="QuadraticEaseOut" EasingMode="EaseOut"/>
                      <QuadraticEase x:Key="QuadraticEaseInOut" EasingMode="EaseInOut"/>
                  </Grid.Resources>
                  <Grid.RowDefinitions>
                      <RowDefinition Height="Auto"/>
                      <RowDefinition Height="Auto"/>
                      <RowDefinition Height="Auto"/>
                  </Grid.RowDefinitions>
                  <VisualStateManager.VisualStateGroups>
                      <VisualStateGroup x:Name="ExpansionStates">
                          <VisualStateGroup.Transitions>
                              <VisualTransition From="Collapsed" GeneratedDuration="0:0:0.15" To="Expanded">
                                  <Storyboard>
                                      <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas">
                                          <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}" KeyTime="0:0:0.00" Value="0"/>
                                          <EasingDoubleKeyFrame x:Name="CollapsedToExpandedKeyFrame" EasingFunction="{StaticResource QuadraticEaseOut}" KeyTime="0:0:0.15" Value="1"/>
                                      </DoubleAnimationUsingKeyFrames>
                                      <DoubleAnimation Duration="0" To="1.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                                  </Storyboard>
                              </VisualTransition>
                              <VisualTransition From="Expanded" GeneratedDuration="0:0:0.15" To="Collapsed">
                                  <Storyboard>
                                      <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas">
                                          <EasingDoubleKeyFrame x:Name="ExpandedToCollapsedKeyFrame" EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="1"/>
                                          <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="0"/>
                                      </DoubleAnimationUsingKeyFrames>
                                      <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas">
                                          <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="1.0"/>
                                          <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="0.0"/>
                                      </DoubleAnimationUsingKeyFrames>
                                      <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="ItemsCanvas">
                                          <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.00" Value="0.0"/>
                                          <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseInOut}" KeyTime="0:0:0.15" Value="-35"/>
                                      </DoubleAnimationUsingKeyFrames>
                                  </Storyboard>
                              </VisualTransition>
                          </VisualStateGroup.Transitions>
                          <VisualState x:Name="Collapsed">
                              <Storyboard>
                                  <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas"/>
                                  <DoubleAnimation Duration="0" To="0.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                              </Storyboard>
                          </VisualState>
                          <VisualState x:Name="Expanded">
                              <Storyboard>
                                  <DoubleAnimation Duration="0" Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="ItemsCanvas"/>
                                  <DoubleAnimation Duration="0" To="1.0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ItemsCanvas"/>
                              </Storyboard>
                          </VisualState>
                      </VisualStateGroup>
                      <VisualStateGroup x:Name="ExpandabilityStates">
                          <VisualState x:Name="Expandable"/>
                          <VisualState x:Name="NonExpandable">
                              <Storyboard>
                                  <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ExpandableContent">
                                      <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Collapsed"/>
                                  </ObjectAnimationUsingKeyFrames>
                                  <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="NonExpandableContent">
                                      <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible"/>
                                  </ObjectAnimationUsingKeyFrames>
                              </Storyboard>
                          </VisualState>
                      </VisualStateGroup>
                  </VisualStateManager.VisualStateGroups>
                  <ListBoxItem x:Name="ExpandableContent" toolkit:TiltEffect.IsTiltEnabled="True" Grid.Row="0" Grid.RowSpan="2">
                      <Grid>
                          <Grid.RowDefinitions>
                              <RowDefinition Height="Auto"/>
                              <RowDefinition Height="Auto"/>
                              <RowDefinition Height="Auto"/>
                          </Grid.RowDefinitions>
                          <ContentControl x:Name="Header" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Grid.Row="0"/>
                          <ContentControl x:Name="Expander" ContentTemplate="{TemplateBinding ExpanderTemplate}" Content="{TemplateBinding Expander}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Grid.Row="1"/>
                          <Grid x:Name="ExpanderPanel" Background="Transparent" Grid.Row="0" Grid.RowSpan="2"/>
                      </Grid>
                  </ListBoxItem>

                  <ContentControl x:Name="NonExpandableContent" ContentTemplate="{TemplateBinding NonExpandableHeaderTemplate}" Content="{TemplateBinding NonExpandableHeader}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Grid.Row="0" Grid.RowSpan="2" Visibility="Collapsed"/>
                  <Canvas x:Name="ItemsCanvas" Opacity="0.0" Grid.Row="2">
                      <Canvas.RenderTransform>
                          <CompositeTransform TranslateY="0.0"/>
                      </Canvas.RenderTransform>
                      <ItemsPresenter x:Name="Presenter"/>
                  </Canvas>
              </Grid>
          </ControlTemplate>
      </Setter.Value>
  </Setter>
</Style> 
```

# javascript - 没有方法'replace' jquery 错误

> ID：12930329
> 
> 赞同：1
> 
> 时间：2012-10-17T08:39:20.513
> 
> 标签：javascript, jquery

我得到了以下在控制台中出错的 js 代码，我不太确定自己做错了什么。基本上我正在尝试获取字段列表，以便我可以进行一些计算。

```
var LabourItems = {
    rate: null,
    hours: null,
    total: null,
    init: function(object) {
        var rate = $(object).children('.rate').first();
        var hours =$(object).children('.hours').first();
        total = rate * hours;
        updateTotal(object,total);
    },
    updateTotal: function(object,  total) {
        $(object).children('.total').first().attr('value', total)
    }
}

//reactTochange for those inputs that you want to observe
$('.hours').live(function() {
    var labourItems;

    jQuery.each($('.labouritems'), function(key,value){
        labourItems.push(LabourItems.init(value));
    });

}); 
```

控制台错误：

```
Uncaught TypeError: Object function () {
    var labourItems;

   jQuery.each($('.labouritems'), function(key,value){
       labourItems.push(LabourItems.init(value));
   });

} has no method 'replace' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:44:59.170

`live`需要一个事件类型，例如。`click`.

它将函数视为事件字符串，并且变得很困惑。

```
$('.hours').live(function() { /*... your code ...*/})    // wrong 
```

需要是：

```
$('.hours').live("click", function() { /*... your code ...*/})    // works 
```

# mysql - 为什么 MAX() 比 ORDER BY ... LIMIT 1 慢 100 倍？

> ID：12930331
> 
> 赞同：9
> 
> 时间：2012-10-17T08:39:24.530
> 
> 标签：mysql, performance, query-optimization

我有一个表`foo`，其中包含（以及其他 20 个）列`bar`，`baz`并且`quux`索引在`baz`和上`quux`。该表有约 500k 行。

为什么以下查询的速度差异如此之大？查询 A 需要 0.3 秒，而查询 B 需要 28 秒。

**查询 A**

```
select baz from foo
    where bar = :bar
    and quux = (select quux from foo where bar = :bar order by quux desc limit 1) 
```

**解释**

```
id  select_type table   type    possible_keys   key     key_len ref     rows    Extra
1   PRIMARY     foo     ref     quuxIdx         quuxIdx 9       const   2       "Using where"
2   SUBQUERY    foo     index   NULL            quuxIdx 9       NULL    1       "Using where" 
```

**查询 B**

```
select baz from foo
    where bar = :bar
    and quux = (select MAX(quux) from foo where bar = :bar) 
```

**解释**

```
id  select_type table   type    possible_keys   key     key_len ref     rows    Extra
1   PRIMARY     foo     ref     quuxIdx         quuxIdx 9       const   2       "Using where"
2   SUBQUERY    foo     ALL     NULL            NULL    NULL    NULL    448060  "Using where" 
```

我使用 MySQL 5.1.34。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T08:44:22.570

您应该在`(bar, quux)`.

没有这个索引，MySQL 就看不到如何高效地执行查询，因此它不得不从各种低效的查询计划中进行选择。

在第一个示例中，它扫描`quux`索引并为找到的每一行查找`bar`原始表中的相应值。检查每一行需要两倍的时间，但幸运的是，具有正确值的行在`bar`其扫描的开始附近，因此它可以停止。这可能是因为`bar`您搜索的值经常出现，因此幸运的机会非常高。因此，它可能只需要在找到匹配项之前检查少数几行，因此即使检查每一行需要两倍的时间，但只检查几行的事实可以节省大量的整体成本。由于您在 上没有索引`bar`，因此 MySQL 不会提前知道该值`:bar`经常出现，因此它无法知道此查询会很快。

在第二个示例中，它使用了一个不同的计划，它始终扫描整个表。每一行都直接从表中读取，不使用索引。这意味着读取的每一行都很快，但是因为你有很多行，所以总体上很慢。如果没有匹配的行将`:bar`是更快的查询计划。但是，如果大约 1% 的行具有所需的 值`bar`，则与上述计划相比，使用此查询计划将（非常）慢大约 100 倍。由于您在 上没有索引`bar`，因此 MySQL 事先并不知道这一点。

您也可以只添加缺少的索引，然后两个查询都会**更快**。

# selenium - Webdriverbackedselenium 无法从函数访问 selenium 命令

> ID：12930335
> 
> 赞同：0
> 
> 时间：2012-10-17T08:39:40.487
> 
> 标签：selenium, automation, webdriver, selenium-rc, selenium-webdriver

我有一个名为 test 的方法，我在其中定义了一个 Webdriver 对象，如下所示：

```
FirefoxProfile firefoxprofile = new FirefoxProfile();
firefoxprofile.setAssumeUntrustedCertificateIssuer(false);
WebDriver driver = new FirefoxDriver(firefoxprofile);
Selenium selenium = new WebDriverBackedSelenium(driver, "https://10.17.17.212:4343"); 
```

我可以在这个函数中使用 selenium 命令，比如 selenium.click() 等。

但我不能在我从此函数调用的函数中使用它们。例如，我在 set 内部调用一个名为 set() 的函数（private int set）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:51:30.053

在方法外部创建 selenium 对象并将其声明为静态，以便您可以全局使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:12:54.377

我通过将 WebDriver 变量声明为静态来解决它。在我的代码中，它看起来像：

```
public class BaseSeleniumTest extends SeleneseTestBase {
    static WebDriver driver;

    @BeforeClass
    public static void firefoxSetUp() throws MalformedURLException {

        driver = new FirefoxDriver();  
    }
    @Before
    public void homePageRefresh() throws IOException {
        driver.get(propertyKeysLoader("login.base.url"));
    }

    @AfterClass
    public static void closeFirefox(){
        driver.quit();
    }
....
//blablabla} 
```

# iphone - 如何用文件的一部分初始化 NSInputStream？

> ID：12930339
> 
> 赞同：2
> 
> 时间：2012-10-17T08:40:10.760
> 
> 标签：iphone, ios, youtube, asihttprequest, nsstream

我正在使用 YouTube 可恢复上传：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads#Sending_a_Resumable_Upload_API_Request](https://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads#Sending_a_Resumable_Upload_API_Request)

我使用 ASIHttpRequest 上传视频。对于直接上传，我可以使用这种方法。

```
- (void)appendPostDataFromFile:(NSString *)file 
```

但是对于简历上传，我无法从整个视频文件中附加帖子数据。也许我可以写一个这样的方法：

```
- (void)appendPostDataFromFile:(NSString *)file offset:(long long)offset 
```

但我不知道如何使它工作。任何帮助将不胜感激！这是来自 ASIHttpRequest 的代码：

```
- (void)appendPostDataFromFile:(NSString *)file
{
    [self setupPostBody];
    NSInputStream *stream = [[[NSInputStream alloc] initWithFileAtPath:file] autorelease];
    [stream open];
    NSUInteger bytesRead;
    while ( !_isTryCanceled && [stream hasBytesAvailable] ) {
        unsigned char buffer[1024*256];
        bytesRead = [stream read:buffer maxLength:sizeof(buffer)];
        if (bytesRead == 0) {
            break;
        }
        if ([self shouldStreamPostDataFromDisk]) {
            [[self postBodyWriteStream] write:buffer maxLength:bytesRead];
        } else {
            [[self postBody] appendData:[NSData dataWithBytes:buffer length:bytesRead]];
        }
    }
    [stream close];
} 
```

如上面的代码所示，如​​果我能得到一个可搜索的 NSInputStream，问题就解决了。有可能这样做吗？

# jquery - 如何使用 css 或 jquery 将单选按钮可点击区域扩展到其他元素

> ID：12930345
> 
> 赞同：0
> 
> 时间：2012-10-17T08:40:45.087
> 
> 标签：jquery, html, css, button, radio

我有一个单选按钮的 html/smarty 代码。我想扩展单选按钮的选择区域，以便用户可以更轻松地在[此](http://www.lolaartgallery.com/113-Just-Married-NYC.html)页面上选择它？使用标签的经典技巧在这里是不够的。点击按钮时执行的所有动作都必须执行，见`onchange`参数。我需要创建一个可点击区域，至少包括包含此行的整个表格，甚至更好：一个区域还包含每个单选按钮上方的图像。

这在 html、css、jquery 中可行吗？谢谢

```
<tr>
    <td valign="top">
        <input value="{$id_attribute|intval}" class="{$groupName}"  type="radio" name="{$groupName}" id="group_{$id_attribute_group|intval}" onchange="javascript:findCombination({$groupName});changeCombinationPrice();{if $groupName=='group_1'}getCheckedValue(document.forms['buy_block_form'].elements['group_1']);scaleImage('{$group_attribute|escape:'htmlall':'UTF-8'}','{$cover.id_image}.jpg');{else if $groupName=='group_2'}changeImage('{$group_attribute|escape:'htmlall':'UTF-8'}','{$cover.id_image}',{$id_attribute|intval}); {/if}" {if ($groupName=='group_1' and $countGroup1==1) } checked {/if} />
    </td>
    {assign var="hrup" value=$group_attribute|escape:'htmlall':'UTF-8'|lower}
    {if $feact==$hrup}
    <td width="17" valign="top">
    <script language="javascript" >
        Tooltips('{$feact},{$hrup}');   
    </script>  
    <div class="tooltip">
        <div class="toolimg"><img src="/pixelart/img/layout/corazon.jpg">
        </div>
        <div class="tooldescrip">{l s="Finition recommandée par l'artiste"}
        </div>
    </div>
    {/if}
    </td>
    <td>
        <div class="imputgroup_{$id_attribute|intval}">{$group_attribute|escape:'htmlall':'UTF-8'}
        </div>
    </td>
</tr>
<tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T12:51:41.437

或者像这里建议的那样 - 在您的单选按钮或复选框周围使用标签： [如何制作具有大目标区域的 HTML 单选按钮？](https://stackoverflow.com/questions/7727255/how-can-i-make-an-html-radiobutton-with-a-big-target-area)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:29:29.617

您需要将可点击内容包装在另一个标签中（`A`合适）并将事件处理程序连接到该标签。您还必须相应地切换 JavaScript 中的单选按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:11:49.643

用`a`标签包裹该区域：

```
<a href="Javascript:void()" id="radioClickAreaid{$id_attribute|intval}" onclick="radioClickArea(document.forms['buy_block_form'].elements['{$groupName}'], '{$id_attribute|intval}');javascript:findCombination({$groupName});changeCombinationPrice();{if $groupName=='group_1'}getCheckedValue(document.forms['buy_block_form'].elements['group_1']);scaleImage('{$group_attribute|escape:'htmlall':'UTF-8'}','{$cover.id_image}.jpg');{else if $groupName=='group_2'}changeImage('{$group_attribute|escape:'htmlall':'UTF-8'}','{$cover.id_image}',{$id_attribute|intval}); {/if}"> 
```

它具有与单选按钮的 onchange 相同的 onclick 参数（虽然不是很优雅！），并且调用了一个 javascript 函数：

```
function radioClickArea(radioObj, id_attribute) {
    if(!radioObj)
    return;
    var radioLength = radioObj.length;
    if(radioLength == undefined) {
            radioObj.checked = (radioObj.value == id_attribute.toString());
            return;
    }
    for(var i = 0; i < radioLength; i++) {
            radioObj[i].checked = false;
            if(radioObj[i].value == id_attribute.toString()) {
                    radioObj[i].checked = true;
        }
    }   
    return false; // so that the link goes nowhere
} 
```

单选按钮被选中确定。有没有办法不重复 onchange/onclick 参数？

# php - 除了连接子查询和复杂连接之外的方式？

> ID：12930346
> 
> 赞同：-3
> 
> 时间：2012-10-17T08:40:50.333
> 
> 标签：php, mysql, oracle, postgresql

除了联接、子查询和复杂联接之外，还有其他有效的方法来查询具有 1 对 1 或 1 对多关系的数据库表。如果还有其他方法，我们可以了解它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:45:22.523

不是这样的。

您可以通过视图、存储过程或 ORM 隐藏复杂性，但关系数据库使用关系。

# java - 创建身份管理器角色后，角色字段未存储在数据库中

> ID：12930354
> 
> 赞同：1
> 
> 时间：2012-10-17T08:41:05.477
> 
> 标签：java, security, seam

我正在使用 seam 2.1.2 安全性，并使用 jsf richfaces GUI 的 identitymanager 创建了一个角色。在创建过程中，我会为在数据库中创建的角色添加一个“描述”，创建角色是可以的，但没有添加描述字段，我必须更新角色（在 GUI 的其他操作中）才能看到存储在数据库中的描述字段. 问题是我该怎么做才能存储在创建操作中提交的“描述”？

下面是我的代码：

```
 public boolean createRole(Role role) {
    IdentityManager identityManager = IdentityManager.instance();
logger.info("creating role:" + role.getRoleName());
if (identityManager.roleExists(role.getRoleName())) {
    return false;
}
if (identityManager.createRole(role.getRoleName())) {
    completeRolePersistence(role);
    return true;
}
return false;
} 
```

和 completeRolePersistence 方法：

```
public void completeRolePersistence(Role role) {
    logger.info("setting additional info to role...");
    Query query = em.createNamedQuery("UPDT_ADDITIONALS");
    query.setParameter("name", role.getRoleName())
            .setParameter("description", role.getDescription())
            .setParameter("level", role.getRoleLevel());
    int updated = query.executeUpdate();
    logger.info("roles updated with desc : " + updated);
} 
```

似乎查询没有执行，我在日志中打印

```
roles updated with desc : 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:30:59.763

您的代码不起作用的原因是因为您的更新查询是在角色实际插入数据库**之前执行的，因此它不会更新任何内容。**

My advice is to not use the role/user creation methods in `IdentityManager`. You're better off creating Home components to create/edit your roles and users than having `IdentityManager` do it for you.

If you however want to pursue this, you need to overwrite `JpaIdentityStore`, customize the `createRole` method and have it populate the entity as needed.

# java - 如何为 mule 自定义转换器编写单元测试用例

> ID：12930359
> 
> 赞同：2
> 
> 时间：2012-10-17T08:41:29.980
> 
> 标签：java, junit, junit4, esb, mule

我们试图在 Mule 中为自定义转换器编写 Junit 测试用例。但是我们无法在测试类中调用 doTransform() 方法。

后来我们意识到看到 Mule 文档，Mule 为单元测试用例提供了功能。根据我们扩展的文档`AbstractTransformerTestCase`，其中有一些方法可以实现。

他们是 ：

```
@Override
    public Transformer getTransformer() throws Exception {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Transformer getRoundTripTransformer() throws Exception {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Object getTestData() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Object getResultData() {
        // TODO Auto-generated method stub
        return null;
    } 
```

我们现在对以下事情感到困惑：

1.  在哪里写我们的测试逻辑？
2.  在哪里以及如何将输入发送到 Transformer？
3.  我们从变压器返回什么？
4.  如果我们没有从变压器返回任何东西（变压器是流程中的最后一个端点）怎么办？
5.  如何“调用”测试用例？
6.  如何编写需要自定义异常的测试用例？
7.  在 Eclipse 中的 Junit 测试中，我们曾经将其声明为， `@Test(expected = RuntimeException.class)`但如何在 mule 单元测试用例中执行此操作？
8.  我们如何在里面使用现有的“被覆盖的方法” `AbstractTransformerTestCase`？

请帮助我们。自 2 周以来，我们不了解要做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T00:21:39.183

要在 Mule 中测试变压器，请执行以下操作：

*   扩展`org.mule.transformer.AbstractTransformerTestCase`和实现抽象方法（[以 Base64 转换器的测试为例](http://svn.codehaus.org/mule/tags/mule-3.3.1/core/src/test/java/org/mule/transformer/codec/Base64TransformersTestCase.java)）。这涵盖了变压器的基础知识。
*   如果您想要涵盖更高级的场景，例如具有不同的有效负载或属性，则通过扩展`org.mule.tck.junit4.FunctionalTestCase`和创建标准 JUnit4`@Test`方法来创建功能测试用例，以与您将在测试配置中配置的转换器进行交互(s)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:07:37.687

当您开始进行测试时，您不妨从采用测试驱动开发之类的良好实践开始。你会需要：

*   实际版本的junit（你已经知道了）
*   现代模拟框架（我强烈推荐 jmockit 作为目前最灵活的工具）

您将不需要：

*   来自 mule 的抽象基础测试类

当您编写转换器测试时，您正在测试您的转换器是否正常运行（嗯，它将一个对象转换为另一个对象） - 所以在您的测试用例中，您只需实例化您的转换器并使用一些输入点击转换方法并执行您对结果的断言。如果您的转换器可以在没有 mule 的情况下实例化并且在转换时不需要协作，那么您只需进行简单的单元测试。

如果您需要与 mule、Java EE 或任何您需要测试它们的子系统协作 - 这里使用模拟。您只需提供模拟并定义您的类应如何与它们协作的期望，而不是在服务基础设施时进行装配（您正在测试您的类，也不是 mulen 或 JDBC 驱动程序）。这是另一个奇怪环境（android）的单元测试示例：

```
/**
 * shall inject assignable views   into class
 * note that mocks are specifuied as parameters
 */
@Test
public void testSimpleInjection(@Mocked final WithInjectableViews injectable,
                                @Mocked final TextView textView,
                                @Mocked final Button button) {

    // we expect that  certain methods will be called on mocked objects
    new Expectations() {
        {
            injectable.findViewById(239);
            returns(textView);

            injectable.findViewById(555);
            returns(button);

        }
    };

    // method under test
    ViewInjector.startActivity(injectable);

    // assertions
    assertEquals(textView, Deencapsulation.getField(injectable, "asView"));
    assertEquals(button, Deencapsulation.getField(injectable, "button"));
    assertNull(Deencapsulation.getField(injectable, "notInjected"));

}

// class derived from android activity,  base class is not instantiable
// in normal java environment, only on the phone or emulator but this is not
// practicable
class WithInjectableViews extends Activity {
    // shall be injected
    @InjectView(id = 239)
    private android.view.View asView;
    @InjectView(id = 555)
    private Button button;
    // shall be left alone
    private View notInjected = null;

} 
```

# django - 解析模型的 __dict__ 中的外键属性？

> ID：12930376
> 
> 赞同：0
> 
> 时间：2012-10-17T08:42:41.230
> 
> 标签：django, django-models

在我的 ModelForm 的 save() 方法中，我正在访问 self.changed_data 并且我想做类似的事情：

```
changes_moderated_dict.update(dict(
    [(i, staff.profile.user.__dict__[i]) 
    for i in changed_data 
    if i in  staff.profile.user.__dict__])) 
```

如果在 changed_data 中找到键，则使用 staff.profile.user 键/值对更新 changes_moderated_dict。changes_moderated_dict 基本上用于存储对表单中这个特定模型所做的所有字段更改（用于以后的处理和序列化）。

只要 staff.profile.user 不是外键关系，这一切正常，在这种情况下，归档名称具有 _id 后缀并且不会与 self.changed_data 字段名称匹配，后者是出现在中的属性名称模型（没有_id）。

有没有办法将模型的 __dict__ 中的外键属性解析为其实际名称，以便上述方法仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:53:04.400

我不确定访问的目标`user.__dict__`是什么，但如果是检查模型字段，您可以执行以下操作：

```
u = staff.profile.user
model_field_names = map(lambda f:f.name, u._meta.fields)
changes_moderated_dict.update(dict(
    [(i, getattr(u, i, None))
    for i in changed_data
    if i in model_field_names])) 
```

# html - 内联非包装元素容器的流体宽度

> ID：12930378
> 
> 赞同：3
> 
> 时间：2012-10-17T08:42:47.190
> 
> 标签：html, css, width, containers, fluid

我遇到了一点 CSS 问题。

我有一些 div 元素的结构类似于以下示例。有动态数量的 class="block" div，每个都有固定的宽度：

```
<div class="outer-container">
    <div class="inner-container">
        <div class="block">text</div>
        <div class="block">text</div>
        <div class="block">text</div>
        <!-- More "block" divs here -->
    </div>
</div> 
```

我的目标是找到一个基于 CSS 的解决方案。

1.  显示`class="block"`div 内联，不换行。
2.  支持可变数量的`class="inner-container"`div，如上面的，每个显示为自己的行。
3.  让外部容器流畅`"shrink-wrap"`地匹配其内容物的宽度。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:50:35.290

不是 100% 确定这是否是您正在寻找的，但这可能是一个开始：

[http://jsfiddle.net/r4dEX/3/](http://jsfiddle.net/r4dEX/3/)

通过将每个`block`元素设置为`display: inline-block`and `white-space: nowrap`，它应该允许元素并排放置，但如果内容长于可用空间，则不会换行（而是`block`将移动到新行）。

每个都`inner-container`将显示在自己的行上（`display: block`是 a 的默认行为`div`）。

将外部容器设置为`display: inline-block`将导致它“收缩包装”以适应其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:53:10.590

[这](http://jsfiddle.net/MNrkk/2/)是一个示例，其中块是内联的，内部容器具有固定宽度，外部容器正在收缩以适应。

# ruby-on-rails - Mongoid + Sorcery：数据库中可见的确认密码字段

> ID：12930379
> 
> 赞同：1
> 
> 时间：2012-10-17T08:42:49.647
> 
> 标签：ruby-on-rails, mongodb, authentication, mongoid, sorcery

我正在使用**[Sorcery Gem](https://github.com/NoamB/sorcery)**处理我的 Rails 应用程序中的身份验证（通过 Mongoid 使用 MongoDB 作为 DB），我的**用户模型**如下所示：

```
class User
  include Mongoid::Document
    attr_accessible :username, :email, :password, :password_confirmation
    authenticates_with_sorcery!

    field :username, :type => String
    field :email, :type => String
    field :username, :type => String

    field :password, :type => String
    field :password_confirmation, :type => String

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :username
  validates_uniqueness_of :username
  validates_presence_of :email
  validates_uniqueness_of :email

end 
```

通过“新用户视图”（这个）创建一个新用户：

```
<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= f.label :username %>
    <%= f.text_field :username %>
  </div>
  <div class="field">
    <%= f.label :email %>
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :password %>
    <%= f.password_field :password %>
  </div>
  <div class="field">
    <%= f.label :password_confirmation %>
    <%= f.password_field :password_confirmation %>
  </div>
  <div class="actions"><%= f.submit %></div>
<% end %> 
```

在数据库中产生一条类似这样的记录：

```
1.9.3-p286 :002 > u = User.first
 => #<User _id: 507e6dd961ef51512d000004, _type: nil, username: "Jmlevick", email: "Jmlevick@Jmlevick.com", crypted_password: "$2a$10$yoRzXIu0a2uRRuu9z5MbD.TQQ2upawMC0DGuC/njlQjqzHwdhVWTm", salt: "xwCVQuCNWb9o3fKgvffa", remember_me_token: nil, remember_me_token_expires_at: nil, reset_password_token: nil, reset_password_token_expires_at: nil, reset_password_email_sent_at: nil, password: nil, password_confirmation: "MySecretPassword"> 
```

所以用户**保存了它**，我可以使用凭据访问，但正如您所见，记录中有两件奇怪的事情：1）密码设置为“nil”（但数据库实际上保存了实际密码和密码它，所以我很好）并且**:password_confirmation**字段**显示**密码（必须加密以确保安全）！

为什么会这样？我该如何解决？我需要一个密码确认字段！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:01:26.957

我认为你只需要`password_confirmation`在你的类中不包含该字段 - `User`Mongoid 应该寻找一个`password_confirmation`字段，因为你有这个`validate_confirmation_of :password`集合，所以我认为你不需要明确设置它。

# filesystems - 如何销毁文件系统

> ID：12930380
> 
> 赞同：8
> 
> 时间：2012-10-17T08:42:56.477
> 
> 标签：filesystems

我们有一些 USB 存储设备，但文件系统已损坏 (RAW)。我们真的不知道确切的原因，所以我想模拟这个问题。是否有任何工具或方法来破坏文件系统。或者更好的是，有没有关于如何不破坏文件系统的指导方针。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:28:31.487

在某些情况下，shred 可能不适用于所有文件系统。除了 shred 之外的另一种选择是 dd 整个分区本身。

假设您的设备是 /dev/sdb 或类似的东西，您可以使用以下命令 dd 整个分区，

```
dd if=/dev/zero of=/dev/sdb 
```

这应该用零覆盖分区的所有内容，包括先前文件系统的数据结构（超级块等），从而有效地为您杀死文件系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:56:19.467

如果您可以访问 Linux 系统，则可以使用[`shred`](https://en.wikipedia.org/wiki/Shred_%28Unix%29).

插入USB存储器，执行`dmesg | tail`获取创建设备的名称（如果您使用的计算机只有一个HD可能是），然后以root或with （替换为实际设备）`/dev/sdb`执行以下命令：`sudo``/dev/sdX`

```
shred /dev/sdX 
```

如果您的 USB 设备有多个分区，如果您给它适当的设备文件句柄（例如） ，您可以`shred`在单个分区而不是整个设备上执行。`/dev/sdb1`

`shred`通过使用随机数据多次覆盖指定文件（或者在这种情况下是整个分区或设备）来工作 - 如果您的 USB 存储很大，这可能需要很长时间。

# ios6 - 在蜂窝数据关闭但 wifi 开启的情况下无法接收推送消息

> ID：12930381
> 
> 赞同：0
> 
> 时间：2012-10-17T08:43:00.347
> 
> 标签：ios6, apple-push-notifications

我看到 APN 的奇怪行为：iphone4 (ios6)：wifi 开启，蜂窝数据关闭：没有收到推送消息。一旦我打开蜂窝数据，就会再次收到推送消息。（我使用这个设置是因为我对移动数据量有严格的限制，并且想强制我的 iphone 只使用 wifi。）

我还有一个只有 wifi 的 iPad，它可以按预期接收推送通知。

谁能用他们的设置验证这一点？

# scripting - vbscript 文本文件搜索包含多个字符串的行

> ID：12930384
> 
> 赞同：0
> 
> 时间：2012-10-17T08:43:03.700
> 
> 标签：scripting, vbscript

需要在下面的 vbscript 中进行小修改...

```
Const ForReading = 1

Dim strSearchFor, set1, set2
strSearchFor = "10/17/2012"
set1= app1

set2 =app2

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("mylogfile.log", ForReading)

do until objTextFile.AtEndOfStream
    strLine = objTextFile.ReadLine()

    If InStr(strLine, strSearchFor and set1 or set2) <> 0 then

Wscript.Echo "we found current date with app1 or current date with app2"
    Else
        Wscript.Echo "We did not found current date"
    End If
loop
objTextFile.Close 
```

我的实际 mylogfile.log 示例文件在文本文件中有以下内容。

```
working on 10/17/2012 starting something ending
closing on  started app1
working on 10/17/2012 starting something app1
working on 10/17/2012 starting something app2
closing on 10/17/2012 starting something ending 
```

谢谢..提前您宝贵的时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:50:29.667

`If InStr(strLine, strSearchFor and set1 or set2) <> 0 then`

这种方式行不通。您只能为每个`Instr`调用搜索一个子字符串。

`If InStr(strLine, strSearchFor) <> 0 and (InStr(strLine, set1) or InStr(strLine, set2)) then`

此外，您的循环存在问题，您的脚本将为您无法满足条件的每一行回显。使用标志或类似的东西来跟踪是否找到了该行并在最后显示错误。

# playframework - 为播放框架设置环境变量

> ID：12930386
> 
> 赞同：-2
> 
> 时间：2012-10-17T08:43:09.767
> 
> 标签：playframework, ubuntu-12.04

我已经在 Ubuntu 12.4 上安装了 play 框架，我希望能够从终端调用 play 而不指定它的完整路径。我已经尝试导出路径等，但它不起作用，因为由于某种原因，另一个名为 play 的应用程序启动了。问题是我在路径文件中找不到该应用程序的路径。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:16:40.690

`play`要查找名为run的路径中的内容：

```
which play 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T11:21:08.690

我在 ubuntu 14.01 上遇到了同样的问题。我为解决问题而采取的步骤：

1.  关于cli类型

    ```
    哪个玩
    ```

    . 我的案例的结果是

    ```
    /usr/bin/播放
    ```

    这不是我的游戏框架应用程序。
2.  使用以下命令重命名符号链接以指向您的播放框架目录。

```
sudo rm /usr/bin/play
```

```
sudo ln -s /opt/play-2.1.1/play/usr/bin/play
```

# macos - 用于切换两个菜单项的 Mac OS 键盘快捷键

> ID：12930388
> 
> 赞同：1
> 
> 时间：2012-10-17T08:43:22.867
> 
> 标签：macos, keyboard-shortcuts, audio-recording

我正在为特定应用程序 Avid 的 Pro Tools 开发专用键盘快捷键控制器。有一个默认的键盘快捷键可以切换两个窗口的视图，“混合”和“编辑”。

这两个命令在应用程序的“窗口”菜单上都有条目。但是，活动窗口旁边有一个小勾号，非活动窗口旁边有一个小菱形。因此，这些会随着窗口的切换而切换（通过单个键盘快捷键）。

我正在寻找一种使用 Mac OS 系统应用程序快捷方式对不同键进行编程的方法。当我为“混合”和“编辑”菜单项分配新的键盘快捷键时，我没有得到切换行为，它只会导致菜单中的第一项处于活动状态。这是有道理的，因为它一次得到两个命令。为了获得我现在想要的行为，我必须使用两个键盘快捷键，这打破了 Pro Tools 中的 UI 约定。任何建议表示赞赏！

# infopath2010 - 禁用信息路径下拉列表中的项目？

> ID：12930395
> 
> 赞同：0
> 
> 时间：2012-10-17T08:43:42.417
> 
> 标签：infopath2010

有没有办法在 infopath 的下拉列表中禁用项目？是否也可以在不使用代码（C#/VB.net&etc）的情况下这样做？？？

非常感谢任何提示！

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:53:23.343

将该字段设为只读，然后下拉控件将​​不会触发。

# iphone - ios UIView 动画使用块问题

> ID：12930396
> 
> 赞同：0
> 
> 时间：2012-10-17T08:43:43.793
> 
> 标签：iphone, ios, ipad, uiview, uiviewanimation

我正在尝试使用样式将旧样式动画转换为块。以下代码工作正常：

```
[UIView beginAnimations:@"ResizeAndMove" context:nil];
[UIView setAnimationDuration:3];
[UIView setAnimationDelay:0];
[UIView setAnimationBeginsFromCurrentState:YES];
selected_view.frame = targetSlot.frame;
selected_view.center = targetSlot.center;
[UIView commitAnimations]; 
```

但是这个转换不会工作：

```
[UIView animateWithDuration:.3f
     animations:^{
         selected_view.frame = targetSlot.frame;
         selected_view.center = targetSlot.center;
     }
 ]; 
```

它说：

```
 2012-10-17 12:32:50.256 myapp[311:207] *** +[UIView
 animateWithDuration:animations:]: unrecognized selector sent to class
 0x21b989c 2012-10-17 12:32:50.259 myapp[311:207] *** Terminating app
 due to uncaught exception 'NSInvalidArgumentException', reason: '***
 +[UIView animateWithDuration:animations:]: unrecognized selector sent to class 0x21b989c' 
```

我正在使用带有 iPad 模拟器的 ios 4.1。它编译正常，但总是崩溃。想不通怎么回事。甚至来自苹果开发的简单示例：

```
[UIView animateWithDuration:0.2
     animations:^{view.alpha = 0.0;}
     completion:^(BOOL finished){ [view removeFromSuperview]; }]; 
```

以相同的方式工作 - 它只是以相同的消息崩溃（仅添加“完成：”）。争论有什么问题？到底是哪个论点？我需要导入一些东西来添加对块的支持吗？但它编译得很好......我什至可以在 UIKit/UIView 中看到：

```
...
+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_4_0); // delay = 0.0, options = 0, completion = NULL
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:31:24.567

您最近是否升级到 xcode 4.5，因为它不再支持 ios 4.1。

我能想到的唯一另一件事是您正在使用的变量在块中使用是不安全的。为了使它们安全，只需在初始化变量时添加 __block 。好像很奇怪啊！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:54:50.043

NSTimeInterval 不是浮点数。它是双倍的。这就是您的原始代码有效的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:10:26.133

安装更新版本的 XCode 解决了这个问题。在安装之前，我使用 sudo 删除了我当前版本的 XCode。

# c# - 如何合并 mysql 插入？

> ID：12930397
> 
> 赞同：1
> 
> 时间：2012-10-17T08:43:43.207
> 
> 标签：c#, grails-orm, grails-2.0

我将尝试解释我正在尝试做的事情。我有一个 grails 服务，它使用套接字启动，并在用 C# 编写的 Windows 机器上运行的服务上执行命令。

该服务为简化起见，只需将记录写入 MySQL 数据库，使用事务并使用 MySQL 完成`commit`以确保已提交所有内容。

它工作正常，问题是在此之后，我在 grails 端启动了另一个服务，它应该找到刚刚插入的新记录`FindBy`。但它什么也没找到。如果我第二次运行它，那么它工作得很好。

似乎对于 grails 方面来说，看到这条记录需要时间，所以我想知道在开始第二个服务之前是否有办法以某种方式刷新数据库，以确保处于一致的情况。

# sql - ms访问中的记录源和控制源

> ID：12930401
> 
> 赞同：0
> 
> 时间：2012-10-17T08:44:07.127
> 
> 标签：sql, vba, ms-access, ms-access-2010

我正在 MS Access 2010 中创建一个连续表单。在表单的详细信息部分，我有两个文本框（名为 txtProj 和 txtArtifact）。

数据库中有2个表。tblProject 和 tblArtifact。

```
tblProject has [Project ID] - autonumber and [Project Name] - string.
tblArtifact has [Artifact ID] - autonumber, [Project] - number and [Artifact Name] - string. 
```

`[Project ID]`并且`[Project]`是一对多的关系。

表单的记录源是 tblArtifact。现在，在名为 txtProject 的文本框中，我想显示项目的名称，而不是项目 ID。

我不知道如何引用表格的控制源，而不是表格的记录源。

请帮我。

如果需要，我很乐意提供任何其他详细信息。

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:25:14.873

所有需要做的是：

1.  将表单的记录源属性设置为：

```
SELECT
    tblProject.*,
    tblArtifact.*
FROM tblProject INNER JOIN tblArtifact ON
    tblProject.[Project ID] = tblArtifact.Project; 
```

2.  现在，控制源属性获得了包含的其他下拉选项`[Project Name]`。选择那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:46:33.987

通过连接两个表来尝试，

```
SELECT  b.[Artifact Name]
FROM    tblProject a
        INNER JOIN tblArtifact b
            ON a.[ProjectID] = b.[Project]
WHERE   b.Project = 'value' 
```

# php - 从联系表格自动生成内容附件并通过电子邮件发送

> ID：12930408
> 
> 赞同：0
> 
> 时间：2012-10-17T08:44:32.150
> 
> 标签：php, email, email-attachments, auto-generate

我想创建一个联系表格，其中电子邮件与自动生成的附件文件 (.txt) 一起发送。附件应包括联系表单中存在的输入字段的所有值（无论它们是否为空）。这可以通过使用 PHP mail() 来完成吗？我的代码现在只能将联系表单内容作为电子邮件正文发送：

```
<?php
define("WEBMASTER_EMAIL", 'info@email.com'); 
error_reporting (E_ALL); 

if(!empty($_POST))
{
$_POST = array_map('trim', $_POST); 
$name = htmlspecialchars($_POST['name']);
$email = $_POST['email'];
$subject = htmlspecialchars($_POST['subject']);
$message = htmlspecialchars($_POST['message']);

$error = array();

if(empty($name))
{

$error[] = 'Please enter your name';

}

if(empty($email))
{

$error[] = 'Please enter your e-mail';

}

 elseif(!filter_var($email, FILTER_VALIDATE_EMAIL))
{ 

$error[] = 'e-mail is incorrect';

}

if(empty($message) || empty($message{15})) 
{

$error[] = "Please enter message more than 15 characters";

}

if(empty($error))
{  

$body = '
<html>
<head>
<title></title>
</head>
<body>
<table>
<tr><td>Name: </td><td>&nbsp;</td><td>'.$name.'</td><tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>Email: </td><td>&nbsp;</td><td>'.$email.'</td><tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>Subject: </td><td>&nbsp;</td><td>'.$subject.'</td><tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td>Message: </td><td>&nbsp;</td><td>'.stripslashes($message).'</td><tr>
</table>
</body>
</html>
';

$mail = mail(WEBMASTER_EMAIL, 'Message sent from website', $body,
    "MIME-Version: 1.0" . "\r\n"
."Content-type: text/html; charset=UTF-8" . "\r\n"
."From: ".$email." \r\n"
    ."Reply-To: ".$email."\r\n"
    ."X-Mailer: PHP/" . phpversion());

if($mail)
{
echo 'OK';
}

}
else
{
echo '<div class="notification_error">'.implode('<br />', $error).'</div>'; 
}
}  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:48:15.680

要使用表单值生成文件，请参阅此[示例](http://www.albinoblacksheep.com/tutorial/flat)。

如果您想使用带有文本和附件的 php mail() 发送电子邮件，您必须稍微弄乱标题。添加`Content-Type: multipart/mixed;`到标题中，请参见[示例](http://webcheatsheet.com/php/send_email_text_html_attachment.php)。

# wpf - 在 wpf 应用程序中存储数据的最佳方式

> ID：12930411
> 
> 赞同：0
> 
> 时间：2012-10-17T08:44:48.283
> 
> 标签：wpf, mvvm, settings

我只想知道在 wfp 应用程序中存储简单数据的最佳方式。我正在使用 SQL CE，但有时我需要存储简单的数据（例如一个字符串）。我不想为它使用 db，我认为这是正确的决定。

您能否指导我如何以最佳方式或任何有用的资源做到这一点？模式 MVVM 是否有任何特定的功能数据设置存储？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T09:27:20.263

正是针对这种情况使用设置。它很简单，允许每个用户和系统范围的场景，并且很好地构建到 Visual Studio 中。

双击项目的 Properties 文件夹中的 Settings.settings（在解决方案资源管理器中）会打开编辑器，您可以使用简单的代码在代码中访问它们，例如`Properties.Settings.Default.StringPropertyX`.

[http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx "使用设置")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:52:33.230

如果您将来要升级，我建议您创建一个小型抽象层，您可以在需要时使用任何数据库或其他源升级到该层。在您进行升级之前，我建议您使用 XDocument 和 XElement（以及该 API 的其余部分）创建一个简单的 XML 文件。我之所以建议这样做是因为您可以轻松地在它们上使用 Linq，这使您将来可以毫无问题地更改提供程序。

这是 XDocument [http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)上的 MSDN 。

我希望这对你有帮助;-)

干杯，

Max ps lemme 知道这是否是您需要的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:49:34.917

您可以使用文件系统..尝试在 wpf app 目录中创建 xml 文件或 csv 文件...

您可以读取和写入同一个文件..这样您就可以将您想要的任何内容保存到该文件并从同一个文件中读取..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:13:25.373

如果您通过 ClickOnce 发布应用程序，则可以使用 IsolatedStorage。它非常易于使用，只需几行代码。您可以了解如何在[WPF 隔离存储](http://sourcecodedb.com/WPF-isolated-storage.html)上使用它。

如果您不通过 ClickOnce 发布它，那么我建议您保持简单并使用静态类。

# sql-server - Sql server 按组加入？

> ID：12930413
> 
> 赞同：1
> 
> 时间：2012-10-17T08:44:52.967
> 
> 标签：sql-server, tsql, join, left-join, dataexplorer

我有这张桌子：

```
id   |  type |      date    
 1   |    a  |   01/1/2012   
 2   |    b  |   01/1/2012
 3   |    b  |   01/2/2012   
 4   |    b  |   01/3/2012   
 5   |    a  |   01/5/2012   
 6   |    b  |   01/5/2012   
 7   |    b  |   01/9/2012   
 8   |    a  |   01/10/2012 
```

POV 是*按日期计算*的。如果 2 行包含相同的日期，则两者都将在同一行中可见（左连接）。

同一日期最多可以共享 2 行。

*所以这种情况不能是：*

```
 1   |    a  |   01/1/2012   
 2   |    b  |   01/1/2012
 3   |    a  |   01/1/2012 
```

如果在同一日期有组`a`并`b`使用左连接在单行中显示它们

如果日期中只有`a`组，则将其显示为单行（*右侧*的 +null ）

如果日期中只有 b 组，则将其显示为单行（*左侧*为 +null ）

期望的结果：

```
 Date         |typeA|typeB  |a'id|b'id
  01/1/2012     |  a  |  b    | 1  |  2
  01/2/2012     |     |  b    |    |  3
  01/3/2012     |     |  b    |    |  4
  01/5/2012     |   a |  b    | 5  |  6
  01/9/2012     |     |  b    |    |  7
  01/10/2012    |   a |       | 8  | 
```

我知道这假设很简单，但这里加入的主要锚点是日期。我遇到的问题是当我阅读第 1 行时，我在表中搜索具有相同日期的所有行......很好。- 没关系。

但是当我阅读第二行时，我也这样做了，它产生了第一行——这已经被计算在内了......

有什么帮助吗？

这是sql小提琴：

[https://data.stackexchange.com/stackoverflow/query/edit/82605](https://data.stackexchange.com/stackoverflow/query/edit/82605)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:59:17.267

我想你想要一个[支点](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

```
 select 
    [date],
    case when [a] IS null then null else 'a' end typea,
    case when [b] IS null then null else 'b' end typeb,
    a as aid,
    b as bid
 from yourtable src
 pivot  (max(id) for type in ([a],[b]))p 
```

如果你想用连接来做..

```
select ISNULL(a.date, b.date), a.type,b.type, a.id,b.id
from
(select * from yourtable where type='a') a
    full outer join
(select * from yourtable where type='b') b  
    on a.date = b.date 
```

# smarty - 如何找到为 Xcart smarty 模板提供数据的控制器

> ID：12930416
> 
> 赞同：0
> 
> 时间：2012-10-17T08:44:58.607
> 
> 标签：smarty, x-cart

我的一个大问题是发现数据是从哪里生成的。我可以很好地为模板蒙皮，但是在更改提供的数据（例如面包屑）时，我不知道在哪里看。

有没有一种简单的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:07:19.003

在 X-cart的**Modules** Directory 中分配的所有模板变量

# android - 如何在 ANDROID 中使用现有联系人添加新注释

> ID：12930417
> 
> 赞同：0
> 
> 时间：2012-10-17T08:45:02.997
> 
> 标签：android

我使用 getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops) 成功更新了联系人中的现有注释；

此方法不适用于添加新注释。如何在 ANDROID 中使用现有联系人添加新注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:55:40.073

```
public void testInsert()
{
    ContentValues values = new ContentValues();
    // insert a empty note into RawContacts.CONTENT_URI, and get the rawContactId
    Uri rawContactUri = this.getContext().getContentResolver().insert(RawContacts.CONTENT_URI, values);
    // get id
    long rawContactId = ContentUris.parseId(rawContactUri);
    // insert name data
    values.clear();
    values.put(Data.RAW_CONTACT_ID, rawContactId); // id
    values.put(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE);// MIMETYPE
    values.put(StructuredName.GIVEN_NAME, "zetsin");// first name
    this.getContext().getContentResolver().insert(android.provider.ContactsContract.Data.CONTENT_URI, values);
    // insert phone
    values.clear();
    values.put(Data.RAW_CONTACT_ID, rawContactId);
    values.put(Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE);
    values.put(Phone.NUMBER, "123456");
    values.put(Phone.TYPE, Phone.TYPE_MOBILE);
    this.getContext().getContentResolver().insert(android.provider.ContactsContract.Data.CONTENT_URI, values);
    // insert email
    values.clear();
    values.put(Data.RAW_CONTACT_ID, rawContactId);
    values.put(Data.MIMETYPE, Email.CONTENT_ITEM_TYPE);
    values.put(Email.DATA, "zetsin@gmail.com");
    values.put(Email.TYPE, Email.TYPE_WORK);
    this.getContext().getContentResolver().insert(android.provider.ContactsContract.Data.CONTENT_URI, values);
} 
```

# c# - 日期时间字段自动转换为本地（无法编辑）

> ID：12930418
> 
> 赞同：2
> 
> 时间：2012-10-17T08:45:11.203
> 
> 标签：c#, .net, sql-server-2008, datetime, asp.net-mvc-4

我正在尝试使用[本教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/examining-the-edit-methods-and-edit-view)来了解有关 MvC4 的更多信息，但我在该`Datetime`领域遇到了一些问题。

**第一个问题**：
当我尝试使用`datetime`以下格式创建条目时：（`DD/MM/YYYY`例如`20/06/2012`），我收到一个错误：

> *字段 ReleaseDate 必须是日期*

所以我猜它需要采用这种格式（通常是默认格式）：（`MM/DD/YYYY`例如`06/20/2012`）。

当我使用第二种格式时，我收到一条消息：

> *值“06/20/2012”对于 ReleaseDate 无效。*

我可以让它工作的唯一方法是当我输入月份和日期<= 12时。例如`12/12/2012`。

**第二个问题**：
这个是时候了。假设我进入`12/12/2012`并成功创建了一个条目。默认情况下，它选择`12:00:00 pm`作为时间戳。问题是它输入 μμ 而不是 pm（这是希腊语中的 pm，因为我的电脑中的时钟是希腊语）

当我尝试编辑条目时，我因此收到错误消息。如果我将 μμ 更改为 pm 它会接受它。但是从一个有效的条目中得到一个错误而不改变任何东西是很奇怪和有点烦人的。

**第三个问题（奖励）**：
我有一个数字字段。例如`199`，我输入它并接受它。但在我的列表中，它显示为`199,00`. 当我尝试再次编辑并单击保存时，出现此错误：

> *价格字段必须是数字。*

如果我删除逗号和 00 它会再次接受它..

正如您所看到的，它是一个非常有问题的表:) 任何帮助我解决任何问题的答案都将非常受欢迎。

理想情况下，我希望日期时间采用这种格式：（`DD/MM/YYYY hh:mm:ss`没有 pm 和 am 24 小时）

但是，如果我至少可以在没有错误的情况下进行编辑和保存，我现在会很高兴:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:19:41.037

有3点很重要：

1.  在表单内呈现日期时间字段时使用的格式
2.  用于验证客户端上的日期时间字段的格式
3.  用于验证服务器上的日期时间字段的格式

理想情况下，这 3 种格式必须相同。您提到您使用的是希腊文化，因此您可以从在 web.config 中配置它开始：

```
<globalization culture="el-GR" uiCulture="el-GR"/> 
```

在这个阶段，显示日期时间字段和验证服务器上的日期时间字段的格式将是`dd/MM/yyyy`因为这是 el-GR 文化使用的格式。

客户端验证是另一回事。它不受您的服务器配置的影响。它受客户端浏览器的设置和文化的影响。因此，即使您已将服务器配置为`el-GR`用于验证日期时间，如果您将客户端浏览器配置为使用`en-US`文化，那么客户端验证将使用该`MM/dd/yyyy`格式。

因为客户端验证首先运行（假设您启用了 jquery 非侵入式验证），所以将使用 en-US 格式，即使该`20/06/2012`值对您的服务器端文化有效，它也对客户端文化无效。为了解决这个问题，您需要使用[jquery.globalize](https://github.com/jquery/globalize)插件。因此，假设您想使用`el-GR`文化，这里是您需要在 HTML 文档末尾添加的必要脚本：

```
<script type="text/javascript" src="~/Scripts/jquery-1.8.2.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.validate.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.validate.unobtrusive.js"></script>
<script type="text/javascript" src="~/Scripts/globalize.js"></script>
<script type="text/javascript" src="~/Scripts//globalize.culture.el-GR.js"></script>
<script type="text/javascript">
    $.validator.methods.date = function (value, element) {
        return this.optional(element) ||
            !isNaN(Globalize.parseDate(value));
    }
    $.validator.methods.number = function (value, element) {
        return this.optional(element) ||
            !isNaN(Globalize.parseFloat(value));
    }

    Globalize.culture('el-GR');
</script> 
```

注意插件的`date`和`number`方法是如何`jquery.validate`被覆盖的，以便`jquery.globalize`在解析这些值时使用插件。

当然，在你的页面中有这么多脚本并不是一件好事。在 ASP.NET MVC 4 中，您可以捆绑它们：

```
BundleTable.Bundles.Add(
    new ScriptBundle("~/bundles/scripts")
        .Include("~/Scripts/jquery-1.8.2.js")
        .Include("~/Scripts/jquery.validate.js")
        .Include("~/Scripts/jquery.validate.unobtrusive.js")
        .Include("~/Scripts/globalize.js")
        .Include("~/Scripts/globalize.culture.el-GR.js")
        .Include("~/Scripts/myscript.js")
); 
```

where`myscript.js`将包含被覆盖的验证方法：

```
$.validator.methods.date = function (value, element) {
    return this.optional(element) ||
        !isNaN(Globalize.parseDate(value));
}
$.validator.methods.number = function (value, element) {
    return this.optional(element) ||
        !isNaN(Globalize.parseFloat(value));
}
Globalize.culture('el-GR'); 
```

现在，您可以将 Layout 中的所有这些脚本替换为单个包包含：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    ...

    @Scripts.Render("~/bundles/scripts")
</body>
</html> 
```

最后一步是解决在输入字段中呈现日期时间字段的值时使用的格式。当您使用`Html.EditorFor()`帮助器为相应的模型属性生成输入字段时，此帮助器将默认使用当前文化。因此，例如，如果您有一个 DateTime 字段并`el-GR`在 web.config 中设置了文化，则该值将呈现如下：

```
20/10/2012 12:21:22 μμ 
```

如果要删除时间部分，可以使用`[DisplayFormat]`属性装饰视图模型上的 DateTime 字段并指定要使用的自定义格式：

```
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
public DateTime SomeDateField { get; set; } 
```

请记住，这仅指定呈现值时使用的格式。不要与我之前提到的验证相混淆。

# ruby-on-rails - 单选按钮仅在集合大于 1 时显示，rails

> ID：12930429
> 
> 赞同：0
> 
> 时间：2012-10-17T08:46:02.500
> 
> 标签：ruby-on-rails

我正在使用单选按钮来显示记录的集合，但在这里我希望当集合等于 1 时，我想要隐藏单选按钮。我在这里使用

```
-if collection.count > 1
  = t.input :sibling_parent,  :as => :radio, :collection => @sibling_parents_drop, :input_html => {:class=>"ml", :checked => 'checked'}
-else
  %h2
   field without radio button 
```

但这对我不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:44:31.020

`- if @sibling_parents_drop.count > 1`

# jquery - jQuery 内联 onClick VS $(selector).click 优先级

> ID：12930433
> 
> 赞同：2
> 
> 时间：2012-10-17T08:46:10.673
> 
> 标签：jquery

有没有办法在`$(selector).click(function)`inline 之前或之前进行运行`onClick="function"`？

另外，如果可能的话，我想停止内联函数完全运行（通过`preventDefault()`在内部使用`$(selector).click()`）。

这是一个说明优先级的小提琴：http: [//jsfiddle.net/yUZWR/1/](http://jsfiddle.net/yUZWR/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:02:06.780

假设您的意思是要调用`link`而不是调用锚 ID `#link`，这就是如何反转函数执行顺序...

```
var v = $('#link').attr('onclick');

$('#link').removeAttr('onclick').click(function(){
    alert('captured');
    return false;
}).click(function() { eval(v); }) 
```

我确信有更好的方法可以做到这一点，即不使用`eval`. 为了防止内联函数完全运行，只需省略第二次调用`click`.

# javascript - 在 AJAX 加载的脚本中初始化 jQuery 的正确方法是什么？获取：'未捕获的类型错误：对象# has no method ' I have built a site that uses an index page which has a containing div for loading each page's content into. At first I was including the external js files 问问题 问问题 2012-10-17T08:46:25.927 78 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have built a site that uses an index page which has a containing div for loading each page's content into. At first I was including the external js files and doing the initialisations inside each individual page but 8/10 times the page was loaded, the elements relying on plugins being initialised didn't work but would upon a refresh. Yesterday I changed the structure so that all external files and all initialisations were done in the index page rather than each individual page. Now, everything seems to work first time but the second time the page is loaded via ajax the plugins aren't initialised. Here is how I am doing it in my index page. (excuse inline js on the nav - wasn't me!) // js files included at the top

*   [Home](javascript:void(0))

jQuery function loadContent(url) { // #content is the containing div where each page is loaded into $("#content").load(url, function() { if (url == '/myoe/amb-home.php') { // initialisations etc. for the particular page } }); } Any ideas on what I could do to improve the structure? There are even functions inside the loadContent function because I just moved all js for each page into its own if block. this is my solution. Hope it helped. HTML

*   Home

JS $("#myoeHome").live("click",function(){ loadContent('/myoe/amb-home.php'); }); function loadContent(url) { // #content is the containing div where each page is loaded into $("#content").load(url, function() { if (url == '/myoe/amb-home.php') { // initialisations etc. for the particular page } }); }javascriptjqueryajax 4 1 回答 1 This answer is useful 0 这是我的解决方案。希望它有所帮助。 HTML

*   Home

JS $("#myoeHome").live("click",function(){ loadContent('/myoe/amb-home.php'); }); function loadContent(url) { // #content is the containing div where each page is loaded into $("#content").load(url, function() { if (url == '/myoe/amb-home.php') { // initialisations etc. for the particular page } }); }于 2012-10-17T09:00:54.353 回答 Related 1 asp.net - 属性设置不正确 1 java - Android - 在 TableRow 上设置固定高度似乎不起作用 2 c# - 为什么编译器会添加不必要的局部变量 1 objective-c - 使用 NSWindow windowNumbersWithOptions 进行简单的 Objective-C 代码段错误 2 java - struts 2.0 迭代器标签 prbm 2 javascript - AngularJS，如何使 UI 依赖于哪个字段具有焦点？ 3 javascript - HTML/Javascript - 定位不一致 1 javascript - $.ajax、$.post 或 $.get 不起作用，无法使用响应 1 windows - 精湛的 lnk2019 glew 1 c# - 使用 aspnet_Membership 表成功扩展自定义 SQL 数据表 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12930440
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery, ajax

I have built a site that uses an index page which has a containing div for loading each page's content into.

At first I was including the external js files and doing the initialisations inside each individual page but 8/10 times the page was loaded, the elements relying on plugins being initialised didn't work but would upon a refresh.

Yesterday I changed the structure so that all external files and all initialisations were done in the index page rather than each individual page.

Now, everything seems to work first time but the second time the page is loaded via ajax the plugins aren't initialised.

Here is how I am doing it in my index page. (excuse inline js on the nav - wasn't me!)

```
// js files included at the top

<div id="navbar">
    <ul class="clearfix">
        <li>
            <a id="myoeHome" onclick="loadContent('/myoe/amb-home.php')" href="javascript:void(0)"> Home </a>
        </li>
        <!-- some more li a's in the nav bar -->
    </ul>
</div> 
```

**jQuery**

```
function loadContent(url) {

    // #content is the containing div where each page is loaded into
    $("#content").load(url, function() {

        if (url == '/myoe/amb-home.php') {

            // initialisations etc. for the particular page

        }

    });

} 
```

Any ideas on what I could do to improve the structure? There are even functions inside the `loadContent` function because I just moved all js for each page into its own `if` block.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:00:54.353

这是我的解决方案。希望它有所帮助。

HTML

```
<div id="navbar">
    <ul class="clearfix">
        <li>
            <a id="myoeHome"> Home </a>
        </li>
        <!-- some more li a's in the nav bar -->
    </ul>
</div>

<div id="content"></div> 
```

JS

```
$("#myoeHome").live("click",function(){

loadContent('/myoe/amb-home.php');
});​​​​​​​​​​​​

    function loadContent(url) {

    // #content is the containing div where each page is loaded into
    $("#content").load(url, function() {

        if (url == '/myoe/amb-home.php') {

            // initialisations etc. for the particular page

        }

    });

}
​ 
```

​</p>

# jquery - 不同域上的 PhoneGap 应用程序和 WCF 服务

> ID：12930441
> 
> 赞同：1
> 
> 时间：2012-10-17T08:46:26.533
> 
> 标签：jquery, ajax, wcf, web-services, cross-domain

我正在使用PhoneGap 为Android 设计一个应用程序，它基本上调用一个Web 服务，它现在将包含一个方法，该方法返回一些东西（比如说一个字符串）作为返回值。最后，我希望 Web 服务能够处理我要针对我的 Windows Azure 数据库执行的查询。

我选择的 Web 服务是启用 Ajax 的 WCF 服务。这是正确的选择吗？

我尝试了一个简单的应用程序来看看它是如何工作的。首先，我在 Visual Studio 中创建了一个新项目，然后创建了一个支持 Ajax 的 WCF 服务。我只添加了一种简单的方法：

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat= WebMessageFormat.Json)]
public string GetName()
{
    return "Hello world";
} 
```

我根本没有修改 Web.config。

然后，我打开 Eclipse 并创建了一个新的 PhoneGap Android 应用程序，其中只有一个文本框和一个按钮。每次单击此按钮，都会调用 Web 服务，并使用以下方法将返回值显示在文本框中：

```
$('#button').click(function(){
    $.ajax({ 
    type: "GET",     
    url: "http://localhost:11634/MobileService.svc/GetName",     
    contentType: "application/json",     
    dataType: "json",
    success: function (result) {     
        $("#textbox").text(result);     
    },             
    error: function (textStatus) {     
        $("#textbox").text(textStatus);
    }     
    });
}); 
```

当我尝试使用此方法时，我在 Firefox 中收到以下错误：`"NetworkError: 405 Method Not Allowed`. 然后我尝试将数据类型更改为`jsonp`并在 AJAX 调用之前添加以下行，以允许跨域请求： `$.support.cors = true;`. 现在在 Firefox 中，我收到此错误：

```
SyntaxError: invalid label
{"d":"Hello world"} 
```

您能否指导我，我是否使用了正确的方法以及如何处理跨域问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:14:13.737

您需要为 jsonp 调用添加回调函数。所以：

```
$('#button').click(function(){
    $.ajax({ 
    type: "GET",     
    url: "http://localhost:11634/MobileService.svc/GetName",     
    dataType: "jsonp",
    jsonpCallback: "handleResponse",
    error: function (textStatus) {     
        $("#textbox").text(textStatus);
    }     
    });
});

function handleResponse(data) {
    $("#textbox").text(data);     
} 
```

看到这个问题：[使用 JSONP 时出现“无效标签”？](https://stackoverflow.com/questions/10084044/invalid-label-when-using-jsonp)

正如下面评论中所讨论的，您需要设置 MobileService 以响应 JSONP 调用：

```
<system.serviceModel>
  <behaviors>
    <endpointBehaviors>
      <behavior name="webHttpBehavior">
        <webHttp />
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <bindings>
    <webHttpBinding>
      <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
    </webHttpBinding>
  </bindings>
  <services>
      <service name="ServiceSite.MobileService">
      <endpoint address="" binding="webHttpBinding"
                bindingConfiguration="webHttpBindingWithJsonP"
                contract="ServiceSite.MobileService"
                behaviorConfiguration="webHttpBehavior"/>
    </service>
  </services>
</system.serviceModel> 
```

# javascript - ckeditor javascript 代码 EditorInstance.document.getSelection().getStartElement() 在 Firefox 上工作但在 IE 中不工作

> ID：12930447
> 
> 赞同：0
> 
> 时间：2012-10-17T08:46:40.823
> 
> 标签：javascript, internet-explorer, ckeditor, getselection

节点**JAVASCRIPT 代码：**

```
Editor= CKEDITOR.instances['ckeditor1'];

getElem=Editor.document.getSelection().getStartElement();
getElem.setHtml("<Element6>SomeText</Element6>"); 
```

*工作：* **火狐**

*不工作：* **Internet Explorer**

**错误**是：`'Editor.document.getSelection()为**空或不是对象**

如何在 IE 中获取光标位置的父节点？

**CKEDITOR 上的数据：**

```
<Element1>SomeText<Element2>SomeText</Element2> 
```

**`<Element3>Some**[suppose Cursor Is Here]** Text </Element3>`**

```
</Element1> 
```

**要求的结果：**

```
 <Element1>SomeText<Element2>SomeText</Element2><Element3> 
```

**`<Element6>SomeText</Element6>`**

```
</Element3></Element1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:07:18.923

**以下代码运行良好..**感谢 * Reinmar*

```
Editor= CKEDITOR.instances['ckeditor1'];
Editor.focus();
getElem=Editor.document.getSelection().getStartElement();
getElem.setHtml("<Element6>SomeText</Element6>"); 
```

# flex4 - 使用 Flex 4 API，我如何从 adobe PDF 组合中的 PDF 访问数据？

> ID：12930448
> 
> 赞同：0
> 
> 时间：2012-10-17T08:46:43.237
> 
> 标签：flex4, adobe, flash-builder, portfolio

我正在创建一个 PDF 组合，需要从 PDF 访问数据，准确地说是相关的*关键字*元数据。

有人可以指出我这样做的方法吗？

问候，

奥吉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:10:13.560

我找到的解决方案是：

```
IAttachment(item).getFieldValue('Title'); 
```

这将找到此附件的 Title 属性

# css - CSS [否定父元素]

> ID：12930449
> 
> 赞同：1
> 
> 时间：2012-10-17T08:46:46.550
> 
> 标签：css

我可以执行以下操作：

```
.content:not([class="no-touch"]) {

    .content-index-container {

        .chr-selector {

            select {
                margin-top: 5px;
            }
        }
    }
} 
```

当`no-touch`课堂不在`content`课堂上时，反之亦然。

我知道我的 CSS 不能正常工作，因为它是错误的，但是我怎样才能实现我想要做的事情：设置内容的样式，但如果内容不在`touch`类中，则忽略样式？（如果检测到触摸设备，Modernizr 会将该类附加到 HTML。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:55:24.710

你可以改变你的想法并修改无触摸的孩子......

```
select { margin-top: 5px; }
.content.no-touch .content-index-container .chr-selector select {
    margin-top: 0;
} 
```

或者

```
select { margin-top: 5px; }
.content.no-touch select {  margin-top: 0; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:48:34.693

不，恐怕不会。Javascript 是您的朋友，或者为您的标记添加额外的类。

# knockout.js - knockoutjs 绑定依赖选择列表

> ID：12930450
> 
> 赞同：0
> 
> 时间：2012-10-17T08:46:54.190
> 
> 标签：knockout.js, knockout-2.0

好的，我有大量的分层数据。

我 foreach 超过 1 部分

然后我有一个有效的下拉列表

```
<p  data-bind="visible: Id">
  Race:
  <select data-bind="options: $parent.data.Races, optionsText: 'Name' , optionsValue:        'Id',     value: RaceId, optionsCaption: 'Choose...'"></select>
</p> 
```

但是使用 matchId 来查找有效性别的绑定不起作用，因为上下文不会随着 with 绑定而改变。

```
<p data-bind="with: $parent.data.Races()[ RaceId ]">
    <pre data-bind="text: ko.toJSON($data,null , 2) "></pre> //debug

    Gender:
    <select data-bind="options: Genders, optionsText: 'Name' , optionsValue: 'Id', value:  $parent.Gender, optionsCaption: 'Choose...'"></select>
</p> 
```

注意它的 with 不能改变上下文，一切都是可观察的。

我曾想过使用一个函数来执行此操作，但这也有点棘手，因为它需要在raceId 更改时进行更改（并且当未设置raceId 时，要么隐藏要么为空列表）

任何帮助，将不胜感激。

这是我当前的函数尝试（是的，我是 javascript 新手），尽管 with 绑定会更加优雅。

```
self.getGenderForRace = ko.computed( function () {
    if ( this && this.data) {
        return this.data.Races()[this.RaceId].Genders;
    } else {
        return new Array();
    }

    deferEvaluation: true;
}, this); 
```

这是我的一些视图模型

```
l6.CreateViewModel = function (options) {
var self = this;

//this.getGenderForRace = ko.computed(function (character) {
//    return this.data.Races()[character.RaceId].Genders;
//}, this);

self.getGenderForRace = ko.computed( function () {
    if ( this && this.data) {
        return this.data.Races()[this.RaceId].Genders;
    } else {
        return new Array();
    }

    deferEvaluation: true;
}, this);

self.setData = function (url, raceId, factionId, viewmodel) {

    $.getJSON(url, { raceId: raceId, factionId: factionId }, function (data) {
        viewmodel.data = ko.mapping.fromJS(data.Data);

        ko.applyBindings(viewmodel);  // we dont bind till we get data
        // add to strcture and map!
        //self.data = data.Data; 
        $("#tabContainer").tabs();

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:37:03.620

如果您像我在我的项目中所做的那样分解数据，根据每个选择，您必须进行 ajax 调用，这里有一个如何做到这一点的示例。

[http://jsfiddle.net/Zholen/h7j3f/](http://jsfiddle.net/Zholen/h7j3f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:36:10.693

如果你想包含`deferEvaluation: true`，你应该把它作为一个选项传递给`ko.computed`：

```
self.getGenderForRace = ko.computed({
    read: function() {
        if ( this && this.data) {
            return this.data.Races()[this.RaceId].Genders;
        } else {
            return [];
        }
    },
    deferEvaluation: true
}, this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:47:49.023

这是一个工作小提琴，演示了一种方法来做你正在寻找的东西：http: [//jsfiddle.net/jearles/Q8kcs/](http://jsfiddle.net/jearles/Q8kcs/)

你有什么理由搞乱ID吗？使用选择值绑定可以保存整个选定的 observable。这使我们可以轻松访问可用的子选项。

# c# - 在 WinRT 中访问系统的字体

> ID：12930455
> 
> 赞同：1
> 
> 时间：2012-10-17T08:47:09.667
> 
> 标签：c#, fonts, windows-8, windows-runtime

我找不到有关该主题的任何信息。我需要阅读和解释字体。但我不知道如何读取系统字体文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:07:15.053

你不能。Metro 风格应用程序无法使用% **WINDOWS%\Fonts目录。**

您可以参考帖子[http://social.msdn.microsoft.com/Forums/en-AU/winappswithnativecode/thread/dea8ab00-fa40-48c1-bd1b-19e06e7ac5cd](http://social.msdn.microsoft.com/Forums/en-AU/winappswithnativecode/thread/dea8ab00-fa40-48c1-bd1b-19e06e7ac5cd)了解更多信息。

# html - pdf文件HTML5上的电子签名

> ID：12930457
> 
> 赞同：4
> 
> 时间：2012-10-17T08:47:35.370
> 
> 标签：html, web-applications, tablet, signature

我被分配了一个任务，我必须生成一个 PDF 文件，然后客户在文档的某个区域执行电子签名。

它将在平板电脑上使用（我对此了解不多）。它也必须是 Web 应用程序的一部分，并且有人告诉我 HTML5 可以很好地处理这个问题。

谁能给我一个提示如何开始工作？我对 HTML5 几乎没有任何经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:36:30.000

抱歉“非常”迟到了回复，但我最近得到了同样的工作

我正在使用 sencha 2 touch，其中我在 js 中使用 PDF 查看器本身试试这个

[https://github.com/SunboX/st2_pdf_panel](https://github.com/SunboX/st2_pdf_panel)

对于签名部分，请尝试使用此

[https://github.com/SimFla/SimFla-signaturePad](https://github.com/SimFla/SimFla-signaturePad)

请注意，您的签名板需要进行大量更改。

否则另一种解决方案是使用 Mozilla 的 pdf.js，将其显示在画布上并使用相同的画布在签名上绘制。

谢谢。如果您已经解决了这个问题，请分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T17:55:55.317

还有商业解决方案，其 API 允许集成到您的环境中。在 www.xyzmo.com 或 www.significant.com 上查看 Namirial.com（以前的 xyzmo）

# javascript - 使用 Yahoo API 的简单天气代码

> ID：12930466
> 
> 赞同：1
> 
> 时间：2012-10-17T08:48:08.937
> 
> 标签：javascript, jquery, drop-down-menu

我想在我的网站上显示天气。我有一些像

```
$(function () {

    // Specify the ZIP/location code and units (f or c)
    //var loc = '10001'; // or e.g. SPXX0050
    //var u = 'f';

    var loc = 'TUXX0002';
    //var loc = 'TUXX0014';
    var u = 'c';
    //var locA = 'TUXX0002';
    //var locI = 'TUXX0015';

    var query = "SELECT item.condition FROM weather.forecast WHERE location='" + loc + "' AND u='" + u + "'";
    var cacheBuster = Math.floor((new Date().getTime()) / 1200 / 1000);
    var url = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent(query) + '&format=json&_nocache=' + cacheBuster;

    window['wxCallback'] = function (data) {
        var info = data.query.results.channel.item.condition;
        $('#wxIcon').css({
            backgroundPosition: '-' + (61 * info.code) + 'px 0'
        }).attr({
            title: info.text
        });
        $('#wxIcon2').append('<img src="http://l.yimg.com/a/i/us/we/52/' + info.code + '.gif" width="34" height="34" title="' + info.text + '" />');
        $('#wxTemp').html(info.temp + '&deg;' + (u.toUpperCase()));
    };

    $.ajax({
        url: url,
        dataType: 'jsonp',
        cache: true,
        jsonpCallback: 'wxCallback'
    });

}); 
```

目前它只显示一个位置。（带**loc**变量）。我想添加一个**下拉列表** 或类似**更改位置**链接的内容。如果用户选择“A”位置，它会显示“A 位置的天气”​​等。我添加了一个下拉项。这是代码。

```
<select id="wxCombo">
   <option value="istanbul">istanbul</option>
   <option value="ankara">ankara</option>
   <option value="izmir">izmir</option>     
</select> 
```

比我在同一个 javascript 页面上添加一些用于更改功能的 javascript 代码。

```
var wxCombo = $("#wxCombo").val(); 
    $("#wxCombo").change(function() 
    { 
        if (wxCombo == 'Ankara')
        {
            loc 'TUXX0002';     
        }
    }); 
```

它没有用。我需要一些指南来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:51:21.187

乍一看，您缺少一个 = 符号...

```
var wxCombo = $("#wxCombo").val(); 
$("#wxCombo").change(function() 
{ 
    if (wxCombo == 'Ankara')
    {
        loc **=** 'TUXX0002';     
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:02:08.050

这里有几件事我会改变。

首先，声明一个将根据位置更新天气信息的函数：

```
function updateWeather(loc, u)
{
    var query = "SELECT item.condition \
        FROM weather.forecast \
        WHERE location='" + loc + "' AND u='" + u + "'",
    url = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent(query) + '&format=json';

    $.ajax({
        url: url,
        dataType: 'jsonp', // this automatically disables cache too
        success: function(data) {
            var info = data.query.results.channel.item.condition;
            $('#wxIcon').css({
                backgroundPosition: '-' + (61 * info.code) + 'px 0'
            }).attr({
                title: info.text
            });
            $('#wxIcon2').append('<img src="http://l.yimg.com/a/i/us/we/52/' + info.code + '.gif" width="34" height="34" title="' + info.text + '" />');
            $('#wxTemp').html(info.temp + '&deg;' + (u.toUpperCase()));
        }
    });
} 
```

然后，将其挂接到`.change()`处理程序中：

```
$("#wxCombo").change(function() { 
    var country = $(this).val();

    if (country == 'ankara') {
        updateWeather('TUXX0002', 'C');
    }
    // etc.
}); 
```

Demo: [http://jsfiddle.net/ZF3aW/](http://jsfiddle.net/ZF3aW/)

# visual-studio - 自定义工具快捷方式visual studio

> ID：12930468
> 
> 赞同：23
> 
> 时间：2012-10-17T08:48:15.817
> 
> 标签：visual-studio, customtool

有没有办法在 Visual Studio 中为自定义工具创建快捷方式？目前我必须导航到解决方案中的工具，右键单击并运行自定义工具。如果我可以绑定快捷键或从工具栏中运行该工具，那就太好了。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-27T17:46:58.420

我想你正在寻找这个：

*   转到`Tools`->`External tools`
*   配置您的工具
*   转到`Tools`-> `Options`-> `Environment`->`Keyboard`
*   在*显示包含*类型的命令中：*Tools.ExternalCommand*
*   选择您想要的命令并为其设置快捷方式。

在 中`External tools`，问题是外部工具的编号是列表中的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:52:03.350

是的，去`Tools`-> `Options`-> `Environment`-> `Keyboard`..

查找命令`Project.RunCustomTool`或您真正想要的命令。

# telerik - Telerik RadGrid 自动生成的带有撇号的列

> ID：12930475
> 
> 赞同：0
> 
> 时间：2012-10-17T08:48:50.487
> 
> 标签：telerik, escaping

我有一个 Telerik RadGrid。我正在使用自动生成的列，从数据库中读取列定义。我在数据库中存储的列名之一在其文本内容中有一个撇号。我的数据源加载没有问题，但是当我尝试按列过滤（带撇号）时，我收到客户端错误：

```
Uncaught SyntaxError: Unexpected identifier 
```

我的问题是：如何告诉我的 Telerik RadGrid 转义撇号，以便即使列的 UniqueName 包含撇号，客户端 Telerik 功能也可以使用？

预先感谢您的任何帮助，

此致，

拉霍斯阿尔帕德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T15:26:35.233

> “问题已在我们的 2015 年第一季度测试版中得到解决”

[http://www.telerik.com/forums/apostrophe-in-radgrid-filtering-causing-javascript-error](http://www.telerik.com/forums/apostrophe-in-radgrid-filtering-causing-javascript-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:45:35.500

我已经制定了一个答案，如果有人有更好的选择，我会很乐意接受他/她的答案。

在获取数据源之前，我将列的键中的撇号替换为某些内容，并在 RadGrid 的 ColumnCreated 事件中将列的 HeaderTexts 中的某些内容替换为撇号。这样，用户将在标题文本中看到撇号，并在逻辑背景中使用其他东西代替撇号，以确保解决 Telerik 无法处理包含撇号的列标识符的错误。

# c# - 绑定 RowCommand 以在单击行中的任何单元格时触发

> ID：12930476
> 
> 赞同：3
> 
> 时间：2012-10-17T08:48:50.143
> 
> 标签：c#, asp.net, gridview, selectedindexchanged

我的 GridView 基本上显示了数据库中数据的汇总版本。

我想要做的是设置它，以便当您单击 GridView 中一行中的任意位置时，它应该执行一个设置过程，该过程将隐藏包含 GridView 的面板并显示一个面板，该面板将显示您的详细信息您点击的项目。

```
 <asp:Panel runat="server" ID="pnlList">
            <div class="rightalign">
                <asp:Label runat="server" ID="lblCount"></asp:Label>
            </div>

            <asp:GridView runat="server" ID="gvItems" DataKeyNames="mailid" 
                AutoGenerateColumns="false" onrowdatabound="gvItems_RowDataBound" 
                Width="100%" OnSelectedIndexChanged="gvItems_SelectedIndexChanged">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <asp:CheckBox runat="server" ID="chkSelect" />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <asp:Label runat="server" ID="lblStatus" Text='<%# DataBinder.Eval(Container.DataItem, "status") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField DataField="firstname" HeaderText="From" SortExpression="firstname" />
                    <asp:BoundField DataField="datesent" HeaderText="Date" SortExpression="datesent" DataFormatString="{0:yyyy/MM/dd HH:mm}" />
                    <asp:BoundField DataField="subject" HeaderText="Subject" SortExpression="subject" />
                </Columns>
            </asp:GridView>
        </asp:Panel>

        <asp:Panel runat="server" ID="pnlMail">
            <p>From: <asp:Label runat="server" ID="lblFrom"></asp:Label><br />
                Sent On: <asp:Label runat="server" ID="lblDate"></asp:Label><br />
                Subject: <asp:Label runat="server" ID="lblSubject"></asp:Label></p>
            <p><asp:Label runat="server" ID="lblMessage"></asp:Label></p>
        </asp:Panel> 
```

我想我会使用这个`SelectedIndexChanged`事件，但我不确定如何让它真正触发对单元格的点击。

这是我得到的代码：

```
 protected void gvItems_SelectedIndexChanged(object sender, EventArgs e)
    {
        int index = gvItems.SelectedIndex;

        string mailid = gvItems.DataKeys[index].Value.ToString();

        getMailDetail(mailid);
        pnlMail.Visible = true;
    }

    protected void getMailDetail(string id)
    {
        int mailid = int.Parse(id);
        MySqlContext db = new MySqlContext();

        string sql = "select m.datesent, m.subject, m.message, u.firstname, u.lastname from mail m inner join users u on m.senderid = u.userid where m.mailid = @id";

        List<MySqlParameter> args = new List<MySqlParameter>();
        args.Add(new MySqlParameter() { ParameterName = "@id", MySqlDbType = MySqlDbType.Int32, Value = mailid });

        MySqlDataReader dr = db.getReader(sql, args);

        if (dr.HasRows)
        {
            dr.Read();

            lblFrom.Text = (string)dr["firstname"] + " " + (string)dr["lastname"];
            lblDate.Text = (string)dr["datesent"];
            lblSubject.Text = (string)dr["subject"];
            lblMessage.Text = (string)dr["message"];
        }
        dr.Close();
    } 
```

如何使连续单击单元格触发一个事件，该事件将完成我需要完成的工作？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:14:41.043

我可以在这里看到两种可能的解决方案。首先 - 在客户端处理单击行，将 Ajax 请求发送给一些`HttpHandler`将返回您必要的邮件详细信息的人，并显示返回的信息。实现这一目标的步骤：

也分配一个客户端处理程序行单击：

```
protected void gvItems_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes["onClick"] = "showMailDetails(" + DataBinder.Eval(e.Row.DataItem, "id") + ")";
    }
} 
```

并定义客户端功能：

```
function showMailDetails(mailId) {
    $.get(
        url: 'url to HttpHandler here',
        data: {id: mailId},
        success: function(data) {
            var pnlMail = $('#<%= pnlMail.ClientID %>');
            // display data here

            pnlMail.show()
    });   
} 
```

另一种方法是处理客户端的点击，然后`RowCommand`通过执行以下操作来模拟事件：

```
protected void gvItems_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes["onClick"] = ""javascript:__doPostBack('" + gvItems.ClientID + "','MailDetailsCommand$" + DataBinder.Eval(e.Row.DataItem, "id") + "')";
    }
} 
```

然后在服务器端像你已经做的那样，就在 RowComamnd 处理程序中：

```
protected void gvItems_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "MailDetailsCommand") {
    // ...
    }
} 
```

虽然我不推荐这种方法 - 使用`_doPostBack`manully 不被认为是最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:57:23.617

您提供一个包含按钮或按钮字段的模板字段，然后您可以将命令名作为某事提供，然后您可以使用 gridview commandeventargs 并根据命令名您可以做任何您想做的事情，您可以使用 OnRowCommand 来触发一个事件：D希望这会帮助你.....

您甚至可以在 RowDataBound 事件中将 onclick 属性添加到单元格，如果有任何没有按钮字段或类似的限制

# c# - nhibernate，无法解析属性

> ID：12930477
> 
> 赞同：13
> 
> 时间：2012-10-17T08:48:51.167
> 
> 标签：c#, nhibernate, fluent-nhibernate

我对 NHibenate 有疑问。当我运行 queryover 时，我收到一个错误“无法解析属性：用户名：MegaOnlineChat.Core.Entities.Message”。我做错了什么？

实体对象

```
public class EntityObject<TId>
    {
        public virtual Int32 Id { get; set; }
    }
public class User:EntityObject<Int32>
    {
        public virtual String Name { get; set; }
        public virtual String Password { get; set; }
        public virtual Boolean Admin { get; set; }
        public virtual IList<Message> Messages { get; set; }
    }
public class Message:EntityObject<Int32>
    {
        public virtual String Text { get; set; }
        public virtual User User { get; set; }
        public virtual DateTime Date{ get; set; }
    } 
```

映射

```
public class UserMapping:ClassMap<User>
{
    public UserMapping()
    {
        Table("Users");
        Id(m => m.Id).GeneratedBy.Native();
        Map(m => m.Name).Unique().Not.Nullable();
        Map(m => m.Admin).Not.Nullable();
        Map(m => m.Password).Not.Nullable();

        HasMany(m => m.Messages).KeyColumn("User_id");
    }
}
public class MessageMapping:ClassMap<Message>
{
    public MessageMapping()
    {
        Table("Messages");

        Id(m => m.Id).GeneratedBy.Native();

        Map(m => m.Text).Not.Nullable();
        Map(m => m.Date).Not.Nullable();

        References(m => m.User, "User_id").Not.Nullable();
    }
} 
```

查询结束

```
NHibernateSession.QueryOver<Message>().Where(x => x.User.Name == name).List<Message>().Last(); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T08:52:45.300

QueryOver 与 Linq 查询提供程序不同。这样做会更容易：

```
NHibernateSession.Query<Message>().Where(x => x.User.Name == name).ToList(); 
```

但是如果你想使用 QueryOver，你需要明确地加入你想要导航的关系：

```
NHibernateSession.QueryOver<Message>()
    .JoinQueryOver(x => x.User) // navigate to the user on the relationship
    .Where(u => u.Name == name) // this restriction is on the User now
    .List(); 
```

您也可以使用用户的别名来执行此操作

# c# - 将套接字保存为类型对象并在使用时进行转换

> ID：12930484
> 
> 赞同：0
> 
> 时间：2012-10-17T08:49:21.380
> 
> 标签：c#, mono, xamarin.android

我正在使用 Mono 创建一个跨平台应用程序，它可以使用不同类型的连接类型（蓝牙、WiFi 等），但在任何给定时间它总是只有一个套接字连接。

使用什么连接类型在编译时决定

我希望我的应用程序的所有需要​​它的不同页面都可以访问这个套接字连接，然后在一个接口下方，它们将具有始终需要 android.bluetooth.BluetoothSocket 的特定实现（例如 Android 蓝牙实现），所以我将其转换为到那个。

所以我的 Views 和 ViewModels 不知道它是什么类型的套接字

我这样做的原因是能够将它全部隐藏在一个界面后面并且只有一个属性

```
Public Interface MyContainer
{
    Bool Connected { get; set; }
    Object Socket { get; set; }
} 
```

这会是非常非常糟糕的代码吗？当它根据平台和连接类型而改变时，我找不到任何其他合理的方法来隐藏接口后面的套接字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:23:04.703

您可以使您的类通用以避免使用`object`.
因此，例如，您将使用：

```
public class MyContainer<T>{
    ...

    T Socket { get; set; }
    ...
} 
```

然后像这样使用它：

```
MyContainer<BlueToothSocket> container = new MyContainer<BlueToothSocket>();
BlueToothSocket socket = container.Socket; 
```

# android - 如何通过浏览器链接启动 Android 应用程序？

> ID：12930487
> 
> 赞同：6
> 
> 时间：2012-10-17T08:49:26.877
> 
> 标签：android

我读了这个 2 岁的[问题](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app)，关于如何通过浏览器链接启动应用程序。我按照[hackbod](https://stackoverflow.com/users/236398/hackbod)的指示不要使用自定义方案。

我准备了一个带有以下链接的 html 站点：

```
<a href="intent:#Intent;action=android.intent.action.VIEW;category=android.intent.category.DEFAULT;category=android.intent.category.BROWSABLE;package=com.jamic.secapp;end">Sec App</a> 
```

manifest.xml 的意图过滤器部分如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.jamic.secapp"
...
<intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
            <data android:scheme="intent"/>
</intent-filter>
... 
```

当我在浏览器中打开 html 站点（我尝试了标准的 android 浏览器和 dolphin 浏览器）并单击链接时，浏览器将我重定向到 Play-Store 并收到以下消息：

```
No result found for "pname:com.jamic.secapp" 
```

但是，当我使用来自 android 的标准 HTML-Viewer 打开 html 站点时，链接工作正常。

那么怎么了？我不想成为一个坏男孩并使用自定义方案：P

感谢您的回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:33:56.683

Did u try to use `<action android:name="android.intent.action.SEND"/>` instead?

# c# - 在 WPF 中单击按钮时动态生成多个 GroupBox

> ID：12930489
> 
> 赞同：2
> 
> 时间：2012-10-17T08:49:28.470
> 
> 标签：c#, .net, wpf, mvvm, groupbox

我正在开发一个 WPF 应用程序，我需要在其中基于按钮单击动态创建 GroupBoxes（包含组合框、滑块和切换按钮）。我的视图文件夹中有两个 xaml 文件。“CodecView.xaml”和“CodecWidgetView.xaml”。

**CodecView.XAML：**

```
 <Grid>
        <ScrollViewer Name="GroupBoxScroll" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0" >
            <Grid Name="NumberofCodecs" Style="{DynamicResource styleBackground}" />                  
        </ScrollViewer>            
    </Grid>

    <Button Content="Add Box" Name="AddBoxBtn" Command="{Binding AddGroupBoxCommand}" /> 
```

**CodecWidgetView.xaml：**

```
<GroupBox Header="{Binding GroupBoxHeader}" Height="Auto" HorizontalAlignment="Stretch" Margin="5,5,0,0" Name="groupBox1" VerticalAlignment="Stretch" Width="Auto">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <ToggleButton Name="FrequencyBox" Content="Master" Grid.Column="1" Height="25" Width="50" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0" />
                <ComboBox Grid.Column="2" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox2" VerticalAlignment="Center" Width="80" />
                <ComboBox Grid.Column="0" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox1" VerticalAlignment="Center" Width="80" />
            </Grid>
            s
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <ToggleButton Name="OneSixBit" Content="16 Bit" Grid.Column="0" Height="25" Width="45" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0" />
                <ToggleButton Name="ThreeTwoBit" Content="32 Bit" Grid.Column="3" Height="25" Width="45" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0" />
                <ToggleButton Name="TwentyBit" Content="20 Bit" Grid.Column="1" Height="25" Width="45" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0" />
                <ToggleButton Name="TwentyFourBit" Content="24 Bit" Grid.Column="2" Height="25" Width="45" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0" />
            </Grid>

            <Grid Grid.Row="2">
                <Label Name="BitDelay" Content="Bit Delay" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,205,0" Height="25" Width="55" />
                <Slider Height="23" HorizontalAlignment="Center" Minimum="0.0" Maximum="255.0" TickFrequency="1.0" Margin="95,0,0,0" Name="bitdelayslider" VerticalAlignment="Center" Width="160" />
                <TextBox Name="BitDelayValue" IsReadOnly="True" Text="{Binding ElementName=bitdelayslider,Path=Value}" Width="40" Height="20" Margin="0,0,110,0" HorizontalAlignment="Center" VerticalAlignment="Center" />
            </Grid>

            <Grid Grid.Row="3">
                <Label Name="DBGain" Content="DB Gain" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,205,0" Height="25" Width="55" />
                <TextBox Name="DBGainValue" IsReadOnly="True" Text="{Binding ElementName=dbgainslider,Path=Value}" Width="40" Height="20" Margin="0,0,110,0" HorizontalAlignment="Center" VerticalAlignment="Center" />
                <Slider Height="23" HorizontalAlignment="Center" Minimum="0.0" Maximum="59.5" TickFrequency="0.5" Margin="95,0,0,0" Name="dbgainslider" VerticalAlignment="Center" Width="160" />
            </Grid>
        </Grid>
    </GroupBox> 
```

**CodecViewModel：**是CodecView.xaml的视图模型

```
 /// <summary>
    /// Event for Refresh Button
    /// </summary>
    private ICommand mAddGroupBoxCommand;
    public ICommand AddGroupBoxCommand
    {
        get
        {
            if (mAddGroupBoxCommand == null)
                mAddGroupBoxCommand = new DelegateCommand(new Action(mAddGroupBoxCommandExecuted), new Func<bool>(mAddGroupBoxCommandCanExecute));

            return mAddGroupBoxCommand;
        }
        set
        {
            mAddGroupBoxCommand = value;
        }
    }

    public bool mAddGroupBoxCommandCanExecute()
    {
        return true;
    }

    public void mAddGroupBoxCommandExecuted()
    {
        //Here It should display the groupbox 4 times
    } 
```

**模型类：**

```
private string GroupBoxHeaderName;
    public string GroupBoxHeader
    {
        get
        {
            return GroupBoxHeaderName;
        }

        set
        {
            GroupBoxHeaderName = value;
            OnPropertyChanged("GroupBoxHeader");
        }
    } 
```

因此，我想在启动时将这个 Groupbox 添加`CodecWidgetView.xaml`到我的网格`(NumberofCodecs)`中`CodecView.xaml`。当我单击它时，`AddBoxButton`它应该动态生成组框 4 次并显示它:)

现在这很棘手，每个 Groupbox Header 必须在每个动态生成的 groupbox 中显示不同的名称。假设在启动时，2 个分组框已经显示为`Groupbox Header = "Location 1"`和`GroupBox Header = "Location 2"`。单击时，我`AddgroupBox button`希望有 4 个组框，标题为`Groupbox Header = "Location 3" Groupbox Header = "Location 4" Groupbox Header = "Location 5" Groupbox Header = "Location 6"`.

可能吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:21:18.833

在下面的代码中，我在“CodecView.xaml”中使用了一个 itemscontrol，对于该 itemscontrol，ItemTemplate 是您的“CodecWidgetView.Xaml”，并向该数据模板添加了描述。我创建了另一个类 CodecWidgetViewModel.cs，它将成为“CodecWidgetView”视图的视图模型。

在“CodecViewModel”的构造函数中，我正在为“CodecWidgetViewModel”创建实例并将它们添加到作为“CodecView”中ItemsControl的来源的可观察集合中。

所以此时它将生成 2 个 CodecWidgetViews .. 在按钮单击上我添加了 4 个实例，因此它将生成 4 个 CodecWidgetViews .. 您可以根据您的要求修改“mAddGroupBoxCommandExecuted”方法中的代码..

点击按钮

**编解码器视图.XAML**

```
<UserControl>
    <UserControl.Resources>
            <DataTemplate x:Key="CWDataTemplate">
                <StackPanel>
                    <TextBlock Text="{Binding Description}"/>
                <local:CodecWidgetView/>
                    </StackPanel>
            </DataTemplate>
    </UserControl.Resources>
        <Grid>
            <Grid>
                <ScrollViewer Name="GroupBoxScroll" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0" >
                    <Grid Name="NumberofCodecs" Style="{DynamicResource styleBackground}" >
                        <ItemsControl ItemTemplate="{StaticResource CWDataTemplate}" ItemsSource="{Binding CodecWidgets}"/>
                    </Grid>
                </ScrollViewer>
            </Grid>

            <Button Content="Add Box" Name="AddBoxBtn" Command="{Binding AddGroupBoxCommand}" Click="AddBoxBtn_Click" HorizontalAlignment="Right" VerticalAlignment="Bottom"  />
        </Grid>
</UserControl> 
```

**CodecViewModel.cs**

**创建这样的属性**

```
 public ObservableCollection<CodecWidgetViewModel> CodecWidgets { get; set; } 
```

**并将以下代码添加到您的 CodecViewModel 构造函数**

```
 CodecWidgets = new ObservableCollection<CodecWidgetViewModel>();
            CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 1"});
            CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 2" }); 
```

**添加小部件**

```
public void mAddGroupBoxCommandExecuted()
    {
         CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 3" });
            CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 4" });
            CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 5" });
            CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 6" });
    } 
```

**创建以下类** **CodecWidgetViewModel.cs**

```
public class CodecWidgetViewModel 
    {
        private string _description;
        public string Description {

            get { return _description; }
            set {
                _description = value;                   
            }
        }
    } 
```

# ios - iOS：在我的通用应用程序中处理文件下载的最佳方式

> ID：12930493
> 
> 赞同：0
> 
> 时间：2012-10-17T08:49:39.923
> 
> 标签：ios, stream, download, ios-universal-app

在我的通用应用程序中，我从服务器接收视频列表。我根据这些信息创建了一个文件夹结构并将其显示在拆分视图控制器中。所以最后有一些文件夹可以包含子文件夹或视频。用户应该能够流式传输并在某些情况下下载视频。

现在我的问题是：如果用户访问另一个视频或文件夹，我应该如何处理文件下载？我应该让它在后台运行还是暂停下载更好？要走的路是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:38:59.840

用户意图是您的指南，在有限的 UI 移动环境中，如果用户通过移动到另一个视图来丢弃视图，通常与丢弃的视图关联的任何 IO 都应该至少暂停，但很可能被丢弃。

原因是移动应用程序通常不会为用户提供并发 UI 体验。它主要是模态驱动的用户体验，带有一些后台处理。

假设您可以让用户堆叠冗长的网络操作，这可能会让用户在您的应用程序上死机，并降低响应速度。

异步很好而且花花公子，因为它必须是，但是由于设备的限制和用户对本质上是模态UX的关注度较小，在移动应用程序中为流式下载堆叠挂起的IO并不是一个合理的设计决策.

# jquery - 有没有像drupal分类术语这样的jQuery排序插件

> ID：12930497
> 
> 赞同：4
> 
> 时间：2012-10-17T08:49:54.870
> 
> 标签：jquery, jquery-ui, drupal, jquery-plugins

我喜欢在 drupal 分类法中排序的功能，如下所示： [http](http://drupal.org/project/nodeorder) ://drupal.org/project/nodeorder 或者如果您已经有在 drupal 7 中编辑分类法的经验。

它提供了类似结构排序的树/目录...

我一直在 jquery ui 和嵌套可排序插件上尝试 2d 排序：http: [//mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)

但是我对 drupal 中的排序功能很感兴趣，因为它在表格格式中干净且友好。

谁能给我一个更好的选择？我一直在搜索drupal repos，但没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:42:24.430

使用 JQuery UI 进行表格排序：

[http://jsfiddle.net/bgrins/tzYbU/](http://jsfiddle.net/bgrins/tzYbU/)

您可以应用自己的 CSS 来创建您想要的任何外观。请注意，这不支持父子关系。

支持父子关系的东西是一个 JQuery 'treeTable' 插件，位于：[https ://github.com/ludo/jquery-treetable](https://github.com/ludo/jquery-treetable)

这是一个实现 treeTable 插件的 jsFiddle：http: [//jsfiddle.net/mccannf/Tbd38/10/](http://jsfiddle.net/mccannf/Tbd38/10/)

使用相当简单的代码：

```
 $(document).ready(function()  {
        $("#dragndrop").treeTable({
              expandable: false
        });

        // Drag & Drop Code
        $("#dragndrop .entry").draggable({
          helper: "clone",
          opacity: .75,
          refreshPositions: true, // Performance?
          revert: "invalid",
          revertDuration: 300,
          scroll: true
         }
        );

        $("#dragndrop .entry").each(function() {
          $($(this).parents("tr")[0]).droppable({
            drop: function(e, ui) {
              $($(ui.draggable).parents("tr")[0]).appendBranchTo(this);
              setNewParent($($(ui.draggable).parents("tr")[0]).attr("id"), $(this).attr("id"));
            },
            hoverClass: "accept",
            over: function(e, ui) {
              if(this.id != $(ui.draggable.parents("tr")[0]).id && !$(this).is(".expanded")) {
                $(this).expand();
              }
            }
          });
        });

        function setNewParent(child, parent)
        {
            // do ajax call here
            //alert(child);
            //alert(parent);
        }
    }); 
```

这个插件的主要缺点：

*   您不能对处于同一级别的节点重新排序。
*   您不能将节点直接移动到最顶层。

有时间的人可能会分叉插件并将这些功能添加到其中。

# javascript - 提交带有 INPUT 外部的表单，并在修改值之后

> ID：12930502
> 
> 赞同：3
> 
> 时间：2012-10-17T08:50:23.307
> 
> 标签：javascript, dom

我有一个`form`, 里面有几个`<input>`标签。我有一个表单**之外**`<input>`的提交按钮（实际上是type `BUTTON`，*not* `SUBMIT`）。我的表单设置与此类似-</p>

```
`<form name="testform" id="testform" action="test.jsp" onsubmit="return modify_value();" method="POST">
<input name="test1" id="test1" type="TEXT" value="A"/>
<input name="test2" id="test2" type="TEXT" value="B"/>
<input name="test3" id="test3" type="HIDDEN"/>
</form>` 
```

 **表单外的提交按钮就是这样定义的——</p>

```
<input type="BUTTON" id="_submit" onclick="document.forms[0].submit();"/> 
```

`modify_value()`JavaScript 方法看起来像这样——</p >

```
function modify_value()
{
    var hidden_field = document.getElementById('test3');
    hidden_field.value = 'new_test_value_set_on_clicking';
    return true;
} 
```

单击提交按钮时，我试图在`test3`提交表单之前修改元素的值。出于某种原因，我永远无法读取 servlet 中的新值。

**替代方法 - (~~也不起作用~~）工作！**

我也尝试过以稍微不同的方式提交表单 - 通过将按钮的`onclick`事件设置为指向该`modify_value()`方法并在该方法的最后一行，调用`form.submit()`而不是返回一个值（编辑：当然，删除`onsubmit`属性表格）。这也不起作用。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:58:42.260

当你调用`.submit()`JavaScript 时。`onsubmit`不调用表单的事件处理程序。

我会将按钮放在表单中，并使其成为提交按钮。否则它只是一个死按钮（语义上，当 JavaScript 不可用时）。

~~在 HTML 验证中，无论如何都不允许在 FORM 元素之外使用 INPUT 元素。~~ 奇怪，你好像是！哈哈我从来不知道...

* * *

如果您需要在答案中指定的限制范围内工作，请删除 onsubmit 属性：

```
<form name="testform" id="testform" action="test.jsp" method="POST">
<input name="test1" id="test1" type="TEXT" value="A"/>
<input name="test2" id="test2" type="TEXT" value="B"/>
<input name="test3" id="test3" type="HIDDEN"/>
</form> 
```

...并更改 onclick 属性以修改值...

```
<input type="BUTTON" id="_submit" onclick="modify_value()"/> 
```

...并将表单提交添加到函数末尾，无需返回任何值...

```
function modify_value()
{
    var hidden_field = document.getElementById('test3');
    hidden_field.value = 'new_test_value_set_on_clicking';
    document.forms[0].submit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:03:58.730

你可以试试这个

```
<input type="BUTTON" id="_submit" onclick="modify_value()"/>
function modify_value()
{
    var hidden_field = document.getElementById('test3');
    hidden_field.value = 'new_test_value_set_on_clicking';
    document.getElementById("testform").Submit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:08:32.493

试试这个...

HTML

```
<form name="testform" id="testform" action="test.jsp" onsubmit="return false;" method="POST">  // onsubmit to return false
.....
<input type="submit" id="_submit" onclick="modify_value()"/> //call javascript function
</form> 
```

JAVACRIPT

```
function modify_value()
{
   var hidden_field = document.getElementById('test3');
   hidden_field.value = 'new_test_value_set_on_clicking'; // do the things here
   document.getElementById('testform').Submit(); // submit the form
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:10:40.520

实际上，您现在可以完全在 HTML 中执行此操作，请参阅所有元素的~~提交按钮的~~[form](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)属性— HTML5 的新功能。~~`<input>`~~

 ~~> 输入元素关联的表单元素（其*表单所有者*）。属性的值必须是同一文档中元素的**id 。**`<form>`如果未指定此属性，则此`<input>`元素必须是元素的后代`<form>`。此属性使您可以将`<input>`元素放置在文档中的任何位置，而不仅仅是作为其表单元素的后代。

以下是如何使用它的示例：

```
<input type="submit" form="download" value="Download Selection" /> 
```

然后可以将此按钮放置在页面上的任何位置。

显然，目前这只适用于有限数量的浏览器，但我认为值得一提。~~**

# visual-studio-2010 - Visual Studio 2010 无法打开网络浏览器，每次都告诉我重新启动 Windows

> ID：12930504
> 
> 赞同：1
> 
> 时间：2012-10-17T08:50:27.583
> 
> 标签：visual-studio-2010, azure, browser

我正在尝试发布 Azure 应用程序，但无法使用 Visual Studio 2010 登录。我收到错误消息“无法启动 Web 浏览器。要解决此问题，您必须重新启动 Windows。”

我已经尝试重新启动并将 Internet Explorer 设置为默认浏览器，但我仍然收到错误消息。单击其他链接时也会发生这种情况（例如，同一发布对话框中的“在线隐私声明”）。

我该如何解决这个问题，或者，是否有任何其他简单的方法可以发布到 Azure？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:21:36.667

有多种方法可以发布到 Azure。根据您的喜好，其中一些可能很容易。有的，不多。

首先，您是否使用源代码管理？如果您使用的是 git，则可以使用 Azure 网站和 Azure 云服务免费提供的 Azure Git 存储库。因此，当您将代码推送到 Azure 存储库时，它会自动将最终位发布到相应的站点。

如果您在本地（在家或办公室）使用 TFS，您可以设置一个构建任务，将这些位部署到 Azure。此外，如果您对 Microsoft 托管的**免费**TFS 服务器感到满意，请查看[TFS Preview 。](http://tfspreview.com)

 **如果您对使用 FTP 感到满意，则可以在设置新的 Azure 网站或云服务时从 Azure 门户获取 FTP 帐户详细信息。

最后，发布到 Azure 的最简单方法之一是使用发布配置文件功能。

1.  您会发现与您的 azure 网站相关联的名为“下载发布配置文件”的链接。单击以下载配置文件（一个 XML 文件）。

2.  然后右键单击您的 VS 项目并点击发布。在配置文件选项卡下，选择“导入”并选择这个下载的文件。

3.  它应该为您填充所有详细信息。测试您的连接以确保一切正常。

4.  发布和享受！

**更新：**根据对此答案的评论，添加屏幕截图以显示从何处获取您的 azure 网站的 FTP 详细信息。

![在此处输入图像描述](../Images/a139ef3fc2a8894517394f307c4773a1.png)**

# html - 在空 getParameter 上重定向

> ID：12930505
> 
> 赞同：0
> 
> 时间：2012-10-17T08:50:28.793
> 
> 标签：html, forms, jsp

我的 .jsp 文件中有以下代码。我有一个发布到这个 jsp 的 html 表单。我想检查参数是否为空，如果它为空并且是否包含字母，则重定向回表单。以下条件似乎不起作用。它只是忽略这一点并提交带有空值的 sql。

我哪里错了？

```
 if(request.getParameter("formPost") == null)
           response.sendRedirect("index.html");

   else
        PostVar = request.getParameter("formPost"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:19:57.287

您将很难`response.sendRedirect`在 JSP 中工作，除非您真的很老派并且在 JSP 中做*所有事情*并且有这样做的经验。

`response.redirect`需要在任何文本“响应正文”输出提交到输出流之前完成。在 JSP 中，这包括换行符/回车符，任何通过 JSP 引擎直接传递到浏览器的未处理内容。

只需在顶部放置一个 taglib 声明，然后是一个新行，就会开始构建响应主体，然后任何后续响应标头操作都为时已晚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:23:41.473

你可以试试这样的

```
if(request.getParameter("formPost") != null && !request.getParameter("formPost").equals(""))         {     
    String postVar = request.getParameter("formPost"); 
} else {
    response.sendRedirect("index.html");     
} 
```

# linux - 如何向需要文件名的 ed 提供标准输入？

> ID：12930509
> 
> 赞同：4
> 
> 时间：2012-10-17T08:50:40.543
> 
> 标签：linux, shell, unix, ed

这里需要一些基本的unix shell：

对于我在 中看不到“-”目标的命令，请说 ed：

```
print '%-2p\nq' | ed -s FILE 
```

我可以提供来自某些 cmd 的 stdout 的流，而不是 FILE 名称，作为要处理的数据：

```
SomeCMD | ed -s SOMETHING_MAGICAL <<< 'print '%-2p\nq' 
```

有可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T13:21:06.703

**ed**从标准输入读取它的命令，所以如果你的文件也在标准输入上，你怎么工作？

事实上，你*可以*通过标准输入提供文件输入，如果你用一行连接它的输出

```
i 
```

一开始，开始写入数据，然后附加一个*.* 结束输入，然后是任何命令。您甚至可以将结果输出到标准输出。请记住，如果文件中有一行只有一个*.* 在里面。

因此，如果文件**input.file**包含以下内容：

```
First line
Second line
Third line 
```

文件**commands.list**包含以下内容：

```
.
1d
1,$w /dev/stdout 
```

然后这个命令行...

```
echo i | cat - input.file commands.list | ed -s 
```

会输出这个：

```
Second line
Third line 
```

我敢说**tadaaaaa！**?

注意：您可能可以防止 single 的情况**。**文件中的行通过管道通过过滤器来转义任何此类行，然后使用**ed**命令再次取消转义它们。我把它留给你的聪明才智。

另一个注意事项：您确实应该为此使用**sed**，但我不能让它*无法完成*的评论消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-30T23:48:31.743

您用于`r`将命令输出读入文本缓冲区。所以，便携：

```
printf '%s\n' 'r !df -h' g/tmpfs/d ,p q | ed -s 
```

或者

```
ed -s << IN
r !df -h
g/tmpfs/d
,p
q
IN 
```

以上读取 的输出`df -h`，删除匹配的行`tmpfs`并打印结果。
如果您的 shell 支持进程替换：

```
printf '%s\n' g/tmpfs/d ,p q | ed -s <(df -h) 
```

与`gnu ed`那`SOMETHING_MAGICAL`被称为`!`。
根据`man`页面：

> 如果给定，通过读入“文件”开始编辑。如果 'file' 以 '!' 开头，则读取 shell 命令的输出。

```
printf '%s\n' g/tmpfs/d ,p q | ed -s '!df -h' 
```

或者，使用*herestring*：

```
ed -s '!df -h' <<< $'g/tmpfs/d\n,p\nq\n' 
```

# apache - Zend 项目中的 Apache Alias 和 .htacces 不起作用

> ID：12930511
> 
> 赞同：1
> 
> 时间：2012-10-17T08:50:54.693
> 
> 标签：apache, .htaccess, zend-framework

我制作了zend项目，它可以正常工作，没有任何问题。我使用别名创建了新的虚拟主机，如下所示。

```
<VirtualHost *:80>
   DocumentRoot "/home/dinuka/workspace/peye_backend/public"
   ServerName peye.test.com

   <Directory "/home/dinuka/workspace/peye_backend/public">
       Options Indexes MultiViews FollowSymLinks
       AllowOverride All
       Order allow,deny
       Allow from all
   </Directory>

   Alias /new /home/dinuka/workspace/peye_backend_new/public
   <Directory "/home/dinuka/workspace/peye_backend_new/public">
       Options Indexes MultiViews FollowSymLinks
       AllowOverride All
       Order allow,deny
       Allow from all
   </Directory>

</VirtualHost> 
```

我在 /home/dinuka/workspace/peye_backend_new/public 的 .htaccess 是

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ /new/index.php [NC,L] 
```

现在url 正在工作`peye.test.com`，`peye.test.com/new`他们重定向到不同的站点。但有时它会重定向到 `peye.test.com/new/new`

我调试了 from 控制器，发现它是从`Zend_Db_Table_Abstract`类重定向的。

```
class Eme_Peye_Models_DbTable_Directorytypes extends Zend_Db_Table_Abstract
{
    protected $_name = 'dir_types';
    protected $_sequence = 'dir_types_dir_type_id_seq';

    public function getAllDirectorytypes($order = 'dir_type_name')
    {
        //die('Now works')
        $select = $this->select()
                        ->from($this, array('key'=>'dir_type_id', 'value'=>'dir_type_name'))
                        ->order($order);
        //die('Not working')    

        return  $this->fetchAll($select)->toArray();
    }

} 
```

我无法用另一种方式来描述这个问题。请帮我。我认为这个问题来自apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:49:10.800

如果它*有时*发生，那么它一定是因为一些无效的 URL 而不是因为 apache 配置。仔细检查您的网址。

# javascript - 在 jQuery 对象数组上调用 show

> ID：12930515
> 
> 赞同：3
> 
> 时间：2012-10-17T08:51:20.527
> 
> 标签：javascript, jquery, arrays

我对`jQuery.show`. 这个问题出现在 IE8 中（可能还有以下版本，但 IE8 是我感兴趣的）。

我有一个 jQuery 对象数组，让我们调用它`elements`。我想给他们看，所以我做了：

```
for (var i = elements.length - 1; i >= 0; i--) {
    elements[i].show();
} 
```

瓶颈似乎是对`show`. 数组已经生成，所以不需要时间。遍历数组也不应该是一个问题。

我想`show`通过创建一个包含我所有元素的新 jQuery 元素来减少一次调用。但我不知道该怎么做。我试过了`jQuery.add`。

```
var $elements = elements[0];
for (var i = elements.length - 1; i >= 1; i--) {
     $elements = $elements.add(elements[i]);
}
$elements.show(); 
```

现在，这一次似乎是一个问题`jQuery.add`。可能是因为它总是创建一个新对象。

所以，我想到了三种不同的方法来解决我的问题。也许你可以帮助我其中之一：

*   是否有这样的 jQuery 方法`add`不返回新对象，而是将其添加到当前的 jQuery 元素中？
*   有没有一种简单快捷的方法来通过一组 jQuery 元素创建一个 jQuery 元素？
*   有没有办法以`show`更快的方式处理数组中的所有 jQuery 对象？

只回答一个问题可能会对我有所帮助。我的问题是，jquery在其方法中总是需要一个数组`DOM elements`而不是数组。`jQuery elements`

提前非常感谢！

-- 编辑内容`elements`

我有一个动态创建节点（即`li`元素）的jstree。这些元素具有`data-id`标识它们的属性。现在，我总是可以查询 $('li[data-id=xxx]') 之类的东西，但这会很慢。因此，相反，当`li`创建元素时，我将它们缓存到类似对象的字典中（键是数据 ID，值是节点）。在这个对象之外，我生成了我的数组`elements`。这发生得非常快。阵列的大小最多可达 4000 个节点。数组中的每个 jQuery 元素只包含一个 DOM-Element ( `li`)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:08:44.480

**编辑**

在阅读了您的更新和评论之后，这个*非常*小的单线很可能是答案：

```
elements.each($.fn.show); 
```

使用 jQ each 方法将（好吧，内部：`call`使用）该`show`方法应用于所有元素。

* * *

从 jQuery 对象数组创建 jQuery 对象的最简单、最快的方法是：

```
var objFromArr = $(jQarr); 
```

我刚刚在控制台中对此进行了测试：

```
objFromArr = jQuery([jQuery('#wmd-input'),jQuery('#wmd-button-bar')]);
objFromArr.each(function()
{
    console.log(this);//logs a jQ object
    console.log(this[0]);//logs the DOMElement
}); 
```

但是话虽如此：你*说* `elements`的是一个 jQ 对象的数组，但如果它是选择器 ( `$('.someClass')`) 的返回值，那么实际上，它不是：在这种情况下，你的循环是*“坏的”*：

```
elements = $('.someClass');
for (var i=0;i<elements.length;i++)
{
    console.log(elements[i]);//logs a DOMElement, not a jQuery object
}
//It's the same as doing:
console.log(elements[0]);
//or even:
console.log($('.someClass').get(0)); 
```

但最后，如果你有一个 jQuery 对象数组，并且你想在*每个*`show`对象上调用该方法，我怀疑这是最好的选择：

 *```
elements.each($.fn.show);//use the show method as callback 
```*

# data-structures - 评估后订单表达式

> ID：12930516
> 
> 赞同：-2
> 
> 时间：2012-10-17T08:51:24.463
> 
> 标签：data-structures, infix-notation, postfix-notation

结果值是多少`7 4 3 + - 3 9 2 / + * 2 ^ 5 *`

它在后序中。那么我怎样才能得到这个表达式的值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:24:43.400

从右侧评估。如果它是运算符，则它是中间节点。否则，它是叶子。

所以，“ *”是一切的根源。“5”是右侧的叶子。比启动“^”作为其他中间节点。“2”是右叶。“* ”是左边的中间节点。等等。

所以最终方程将是

`(((7(43+)-)(3(92/)+)*)2^)5* => (((7-(4+3)) * (3+(9/2)))^2) * 5 = 0`

# neural-network - 神经网络不收敛 - 使用多层感知器

> ID：12930517
> 
> 赞同：4
> 
> 时间：2012-10-17T08:51:26.023
> 
> 标签：neural-network

我开发了一个“乒乓”风格的游戏，它实际上在屏幕底部有一个球，左右两侧有弹性墙，顶部有一个粘性墙。它随机选择底部的一个点（在一条直线上）和一个随机的角度，从侧壁反弹，然后撞击顶部墙壁。这重复了 1000 次，每次，发射位置的 x 值、发射角度和它在顶墙上碰撞的位置的最终 x 值。

这给了我 2 个输入 - 发射和发射角度的 x 值和 1 个输出 - 最终位置的 x 值。我尝试使用具有 2 个输入节点、2 个隐藏节点（1 层）和 1 个输出节点的多层感知器。然而，它会收敛到一个点 ~20，然后逐渐变细。这是我尝试过的，但没有一个有帮助，要么错误永远不会收敛，要么开始发散：

1.  将输入和输出转换为 0 和 1 之间
2.  将输入和输出转换为介于 -1 和 1 之间
3.  增加隐藏层数
4.  增加隐藏层的节点数
5.  将发射位置、发射角度和最终位置转换为 0 和 1，导致 ~750+175 输入和 ~750 输出 - 不收敛

因此，在整个晚上和早上都让我的大脑和身体反抗我之后，我希望有人能帮助我找出这里的问题。这是神经网络无法解决的任务还是我做错了什么？

PS：我使用的是[Neuroph](http://neuroph.sourceforge.net/online_demo.html)的在线版本，而不是编写自己的程序。至少这将帮助我避免实施中的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:13:58.850

如果它不能最小化训练错误，那很可能是实现中的一个错误。另一方面，如果您要在保留的测试集上测量准确度，那么一段时间后误差会上升也就不足为奇了。

至于公式，我认为*只要有足够数量的训练数据和足够长的训练时间，一个足够复杂的神经网络就可以学习映射*，无论你是否对输入进行二值化（前提是你使用的实现支持非二值输入和输出）。我对上面句子中“足够”的含义只有一个模糊的概念，但我敢猜测 1000 个样本是行不通的。另请注意，网络越复杂，估计参数所需的数据就越多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:04:50.533

为了消除 Neuroph 中潜在的实现问题，我建议尝试完全相同的过程（多层感知器、相同的参数、相同的数据等），但改用[Weka](http://www.cs.waikato.ac.nz/ml/weka/)。

我之前在 Weka 中成功使用过 MLP，因此我可以验证此实现是否正常工作。我知道 Weka 在学术界具有相当高的渗透率，并且经过了很好的审查，但我不确定 Neuroph 自从它更新以来。如果您得到与 Neuroph 相同的结果，那么您就知道问题出在您的数据或神经网络拓扑或配置中。

Qnan 提出了一个很好的观点——你测量的误差到底是什么？要真正确定为什么训练误差没有收敛到零，您需要确定误差究竟代表什么。

此外，在停止收敛之前，神经网络在训练中运行了多少个 epoch（即迭代次数）？

在 Weka 中，如果我没记错的话，您可以将训练设置为执行，直到错误达到某个值或某个数量的 epoch。快速浏览一下，看起来 Neuroph 也是如此。

如果您要限制 epoch 的数量，请尝试将数字提高到显着更高的值，以使网络有更多的迭代来收敛。

# php - 在php中将字符串转换为日期

> ID：12930518
> 
> 赞同：0
> 
> 时间：2012-10-17T08:51:32.263
> 
> 标签：php, date

首先，我在上一页输入 e6 = 24-09-2011 作为输入类型 =“文本”，然后：

```
 $a6 = $_POST["e6"]   ; 
  $time = strtotime( $a6 );
  $myDate = date ("y-m-d", $time ); 
  echo $myDate ;
  $n = strtotime(date("Y-m-d", strtotime($myDate)) . " +$a7 month");
  $q = date("Y-m-d", $n);
  echo $q ;

out put: 11-09-24 2013-09-24 
```

我想打印 2011 来代替 11。我该怎么办？？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:53:11.607

```
 $a6 = $_POST["e6"]   ; 
    $time = strtotime( $a6 );
    $myDate = date ("Y-m-d", $time ); 
    echo $myDate ;
    $n = strtotime(date("Y-m-d", strtotime($myDate)) . " +$a7 month");
    $q = date("Y-m-d", $n);
    echo $q ; 
```

您需要将所有小写 y 更改为大写 Y。[请参见此处](http://php.net/manual/en/function.date.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:53:18.063

`$myDate = date ("y-m-d", $time );`
应该像这样使用大写“Y”：
`$myDate = date ("Y-m-d", $time );`

php docs对数据字符串格式有很好的解释：[这里](http://php.net/manual/en/function.date.php)

# multithreading - 使用互斥锁后程序仍然崩溃（我可以在同一个线程中使用互斥锁吗？）

> ID：12930520
> 
> 赞同：0
> 
> 时间：2012-10-17T08:51:37.953
> 
> 标签：multithreading, timer, signals, mutex

我创建了两个线程，并使用互斥锁来同步它们。
在创建另一个线程的主窗口程序（我认为是主线程）中，我必须**在至少两个函数中使用互斥锁**，因为一个是当用户选择菜单并**配置时从 UI 接收信号的插槽data**，还有一个计时器，每秒运行 1 次，并触发一个**读取数据的槽函数。**

**即使我使用 mutex** ，我的程序也经常崩溃。在“主线程”中，有不同的函数具有互斥锁的锁定和解锁操作，其中一个函数是链接到计时器的插槽。另一个线程也**不断地写入数据**。

我很困惑，为什么？
(:) 在此之前我真的需要一部更好的手机来编辑我的问题 :) )

我的代码：
在线程中：

```
class Background : public QThread
{
    Q_OBJECT

public:
    void Background::run(void)
    {
        initFile();

        while(1)
        {

            Mutex->lock();
            msleep(40);
            rcv();          //writes map here
            Mutex->unlock();

        }

    }
...
} 
```

在线程的 rcv() 中：

```
void Background::rcv()
{
    DEVMAP::iterator dev_r;

    for(dev_r= DevMap.begin(); dev_r!= DevMap.end(); dev_r++)//DevMap is a refrence to the dev_map in mainwindow.
    {
       ...  ....//writes the map

    }
} 
```

在主窗口中：

```
void MainWindow::initTimer()
{
    refreshTimer = new QTimer(this);
    connect(refreshTimer, SIGNAL(timeout()), this, SLOT(refreshLogDisplay()));
    refreshTimer->start(1000);
}

void MainWindow::refreshLogDisplay()
{

//MUTEX
    mutex->lock();

    ......//read the map

//MUTEX
    mutex->unlock();

} 
```

在线程的构造中：

```
Background(DEVMap& map,...,QMutex* mutex):DevMap(map)...,Mutex(mutex){} 
```

在创建线程的主窗口中：

```
void MainWindow::initThread()
{

    mutex = new QMutex;
    back = new Background(dev_map,..., mutex);
    back->start();

} 
```

和：

```
void MainWindow::on_Create_triggered()//this function is a slot triggered by a menu item in the MainWindow UI
{

    ......//get information from a dialog 

//MUTEX

    mutex->lock();

    BitState* bitState = new BitState(string((const char *)dlg->getName().toLocal8Bit()),
                                        string((const char *)dlg->getNO().toLocal8Bit()),
                                      dlg->getRevPortNo().toInt(), dlg->getSndPortNo().toInt());

    dev_map.insert(DEVMAP::value_type (string((const char *)dlg->getPIN().toLocal8Bit()), *bitState)); 
     //writes map here

//MUTEX
     mutex->unlock();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:39:24.007

您可以在任何线程中使用互斥锁。它是为此目的而设计的。但是您不应该创建死锁，例如，如果您对“锁”进行“嵌套”调用。

好的：

```
mutex->lock();
//code
mutex->unlock();
//code
mutex->lock();
//code
mutex->unlock(); 
```

坏的：

```
mutex->lock();
//code
mutex->lock(); //dead lock
//code
mutex->unlock();
//code
mutex->unlock(); 
```

在函数中使用锁时要准确：

```
void foo()
{
mutex->lock();
//code
mutex->unlock();
}

mutex->lock();
foo(); //dead lock
mutex->unlock() 
```

此外，您需要锁定尽可能少的代码。将 sleep() 放在锁内并不是一个好主意，因为其他线程会在它睡眠时等待。

不好：

```
while(1)
{
  Mutex->lock();
  msleep(40);
  rcv();
  Mutex->unlock();
} 
```

更好的：

```
while(1)
{
  msleep(40);
  Mutex->lock();
  rcv();
  Mutex->unlock();
} 
```

# python - Python - 在括号之间读取为单个“块”

> ID：12930521
> 
> 赞同：2
> 
> 时间：2012-10-17T08:51:38.483
> 
> 标签：python

我正在尝试用 Python 编写一个程序，该程序对一段代码执行各种任务。我已经完成了其中的大部分，但有一个让我感到困惑。我对行话的了解不够，无法有效地搜索此问题的帮助，所以我求助于这里。

我需要创建一个进程，它将括号之间的任何内容作为单个“块”读取。然后，如果“块”包含特定的单词或短语，python 代码将删除它。

示例（简化）文本文件内容：

```
...
entity
{
    "id" "38794"
    "classname" "info_player_teamspawn"
}
entity
{
    "id" "38795"
    "classname" "func_detail"
    solid
}
entity
{
    "id" "38796"
    "classname" "path_track"
}
... 
```

在此示例中，将列出数千个此类实体。我希望python代码删除包含单词“solid”的任何括号的括号内的任何内容（包括“实体”序言），即：这将是结果片段：

```
...
entity
{
    "id" "38794"
    "classname" "info_player_teamspawn"
}
entity
{
    "id" "38796"
    "classname" "path_track"
}
... 
```

id 不需要更正。我们不需要担心这一点。

我希望我能很好地解释我的问题，我希望有一个可能的解决方案。如果有人想要一个行话库，我可以用它来帮助解释或研究我可能遇到的任何进一步的问题，那也将不胜感激！

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:13:40.613

可以使用单个正则表达式完成所有操作。但是，这很快就会变得不可读，尤其是当您跨越多行时（我猜您可能还有其他可能想要删除的模式）。

我会将问题一分为二：

首先，使用此正则表达式查找所有实体块：

```
p = re.compile(r'entity\s*{(.*?)}') 
```

然后定义一个替代函数来进行替换。

```
def remove_solid(match):
    text = match.groups(0)
    if text.find('solid') != -1:
        return ''
    else
        return text 
```

像这样把这两个钩在一起

```
output = p.sub(remove_solid, input) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:41:22.233

First, let's write a generator that yields titles ("entity") and their respective blocks:

```
def blocks(filename):
    title, block = '', None
    with open(filename) as fp:
        for line in fp:
            if '{' in line:
                block = line
            elif block is not None:
                block += line
            else:
                title = line
            if '}' in line:
                yield title, block
                title, block = '', None 
```

Then read the blocks and output those passing the test:

```
for title, block in blocks('input.txt'):
    if 'solid' not in block:
        print title, block 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:57:10.387

您可以使用正则表达式 (regex) 搜索以下模式并将匹配的文本替换为换行符或空格。

```
import re

[...]
output = re.sub(r'entity\n{[\w\s\n"]*solid[\w\s\n"]*\n}\n', '', input)
[...] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:12:44.233

怎么样：

```
 re.sub("entity\s*{[^}]*solid\s*}",'',yourString) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T09:35:03.053

这是一个非正则表达式解决方案。它可能更冗长，但也更直观。

```
input = open("a.txt", "rb")
output = open("b.txt", "wb") # an empty file for output

def filter_block(instream, outstream, keyword):
    block_buffer = []
    in_block = False
    dump_block = False
    for line in instream:                 # <- Iterate through the lines of the input
        line = line.rstrip()
        block_buffer.append(line)         # <- Keep the block of text in memory

        line_text = line.strip()
        if line_text == "{":
            in_block = True
        elif line_text == keyword and in_block:            # <- Check if this block
            dump_block = True                              #    needs to be dumped
        elif line_text == "}":
            if not dump_block:                             # <- If not, 
                outstream.write("\n".join(block_buffer))   # <- keep it.
                #print "\n".join(block_buffer)

            block_buffer = []                              # <- Flush buffer, continue
            in_block = dump_block = False

filter_block(input, output, "solid") 
```

# haskell - 使用带有 IO 列表的查找？

> ID：12930525
> 
> 赞同：2
> 
> 时间：2012-10-17T08:52:05.617
> 
> 标签：haskell, io, monads

我正在获取文件的内容并将其转换为表单列表：

```
[("abc", 123), ("def", 456)] 
```

带有 readFile、行和单词。

现在，我可以设法将结果列表转换为**IO [(String, Int)]**类型。

我的问题是，当我尝试制作这样的功能时：

```
check x = lookup x theMap 
```

我收到此错误，我不太确定如何解决：

```
Couldn't match expected type `[(a0, b0)]'
            with actual type `IO [(String, Int)]'
In the second argument of `lookup', namely `theMap' 
```

theMap 本质上是这样的：

```
getLines :: String -> IO [String]
getLines = liftM lines . readFile

tuplify [x,y] = (x, read y :: Int)

theMap = do
    list <- getLines "./test.txt"
    let l = map tuplify (map words list)
    return l 
```

文件内容是：

```
abc 123
def 456 
```

谁能解释我做错了什么，或者告诉我一个更好的解决方案？几个小时前我刚开始玩 monads，一路上遇到了一些颠簸。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:11:46.033

您将不得不`theMap`从 IO 中“解包”。请注意您已经`getLines`通过以下方式执行此操作：

```
do
  list <- getlines
  [...]
  return (some computation on list) 
```

所以你可以有：

```
check x = do
  m <- theMap
  return . lookup x $ m 
```

实际上，这是一种反模式（尽管是说明性的），最好使用仿函数实例，即。`check x = fmap (lookup x) theMap`

# javascript - 使用 JavaScript API 在谷歌驱动器中创建文件夹

> ID：12930527
> 
> 赞同：1
> 
> 时间：2012-10-17T08:52:11.763
> 
> 标签：javascript, directory, google-drive-api

我写了一个 javascript 方法来在谷歌驱动器中创建文件夹。

```
function createFolder(){
  data = new Object();
  data.title = 'New Folder';
  data.parents = [{"id":jQuery('#parent').val()}];
  data.mimeType = "application/vnd.google-apps.folder";
  gapi.client.drive.files.insert(data).execute(function(fileList){});
} 
```

它使用 mimeType“application/octet-stream”和父根目录创建一个名为“Untitled”的文件。此代码应该创建一个名为“新文件夹”的文件夹。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T04:11:59.623

您的代码几乎是正确的，您只是没有正确发送请求正文。这个片段应该工作：

```
function createFolder(){
  data = new Object();
  data.title = 'New Folder';
  data.parents = [{"id":jQuery('#parent').val()}];
  data.mimeType = "application/vnd.google-apps.folder";
  gapi.client.drive.files.insert({'resource': data}).execute(function(fileList){});
} 
```

请求的主体被指定为`resource`元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:34:29.330

我解决了下面给出的问题。

```
function createFolder() {
   data = new Object();
   data.title = 'New Folder';
   data.parents = [{"id":jQuery('#parent').val()}];
   data.mimeType = "application/vnd.google-apps.folder";
    var request = gapi.client.request({
        'path': '/drive/v2/files',
        'method': 'POST',
        'body': JSON.stringify(data)});
    request.execute(function(){});
} 
```

但我想知道如何使用**gapi.client.drive.files.insert**来做到这一点。

# asp.net - Asp.Net 登录系统转换为强制门户

> ID：12930528
> 
> 赞同：3
> 
> 时间：2012-10-17T08:52:13.777
> 
> 标签：asp.net, network-programming

我有一个 asp.net Web 应用程序（带登录）。我想将我的登录名转换为强制门户，（用于 wifi 热点）我该怎么做？我这里有一个AP。无处不在的 picostation 2。任何帮助都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:00:51.523

您可以使用 DNS 重定向器执行此操作

请参阅：[http ://dnsredirector.com/pages](http://dnsredirector.com/pages)

# java - 如何在 Jenkins 中为每个作业全局设置 JVM 选项？

> ID：12930529
> 
> 赞同：19
> 
> 时间：2012-10-17T08:52:15.087
> 
> 标签：java, maven, configuration, jenkins, jvm-arguments

我最近安装了一个新的JDK（1.7u9），我得到了一些非常奇怪`VerifyError`的s。[在一个线程](https://stackoverflow.com/questions/7936006/why-am-i-getting-the-following-error-when-running-google-app-from-eclipse)中，我发现如果我使用`-XX:-UseSplitVerifier`魔法开关进行编译，它可以帮助我。

**我想做的是在 Jenkins 中全局设置这个 Java 选项，但没有找到任何配置。**有人可以帮我解决这个问题吗？

我能想到的最接近的事情是通过 Maven 设置参数，但我必须为每个项目配置都这样做——我想避免这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T10:41:32.540

在主菜单项下`Manage Jenkins`->`Configure System`您可以在`Global MAVEN_OPTS`.

有点不清楚您是要为 Jenkins 容器本身打开该选项还是只为其中运行的作业打开该选项，但如果后者并且您只运行 maven 作业，那就是我会做的。

干杯，

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T10:08:07.850

如果您将 Jenkins 部署到 Tomcat 或 Glassfish，我建议您设置进一步的配置，如下所示：-

### 雄猫

**设置名为CATALINA_OPTS**的环境变量，例如

```
SET CATALINA_OPTS="-XX:-UseSplitVerifier"
EXPORT CATALINA_OPTS 
```

### 玻璃鱼

编辑 [your_domain]/config/domain.xml

```
<java-config ....>
    ....
    <jvm-options>-XX:-UseSplitVerifier</jvm-options>
</java-config> 
```

无论如何，如果您将其部署到另一个应用程序服务器，请参阅您的应用程序服务器管理员指南以配置更多 JVM 选项。

### 更新：

如果您只想将此 JVM 选项应用于 Maven 项目，请设置名为**MAVEN_OPTS**的环境变量，例如

```
SET MAVEN_OPTS="-XX:-UseSplitVerifier"
export MAVEN_OPTS 
```

我希望这可能会有所帮助。

问候，

查理·Ch。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-14T14:41:42.070

在 Windows 上，Jenkins 主目录中有一个**jenkins.xml**。只需在 arguments 标记下添加所需的 JVM 选项：

```
<arguments>
    -Xrs -Xmx256m -XX:-UseSplitVerifier 
    -Dhudson.lifecycle=hudson.lifecycle.WindowsServiceLifecycle 
    -jar "%BASE%\jenkins.war" --httpPort=8080
</arguments> 
```

对于大多数 Linux 发行版，修改*JENKINS_ARGS*内部文件： **/etc/default/jenkins**（或 jenkins-oc）

对于 CentOS，修改*JENKINS_JAVA_OPTIONS*里面的文件： **/etc/sysconfig/jenkins**（或jenkins-oc）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T10:21:51.697

显然，在 Jenkins 中设置系统范围的 JVM 属性的唯一方法是使用[Groovy Script](http://www.keypressure.com/blog/jenkins-system-properties/ "Groovy 脚本")。

在 Jenkins 主页中创建一个`init.groovy.d`并在其中放置一个 groovy 文件（`load-properties.groovy`）。在 Groovy 脚本中，以编程方式设置系统属性（有关详细信息，请参阅[上面的链接](http://www.keypressure.com/blog/jenkins-system-properties/ "Groovy 脚本")）：

```
 props.each { key, value ->
        System.setProperty(key, value) 
```

上述解决方案节省了我的时间，因为我需要`jsse.enableSNIExtension`在 SCM 结帐期间禁用它，它应该对 SVN 插件可用，而不是对 Maven 可用。

有一个`config.xml`带有`jdks/jdk/properties`XML 标签的文件，但它没有记录。

# rest - 如何将参数作为 SOAP UI REST 请求中路径的一部分添加到 url？

> ID：12930530
> 
> 赞同：7
> 
> 时间：2012-10-17T08:52:15.243
> 
> 标签：rest, groovy, soapui

我正在为 soapUI 4.5 中的 REST API 创建一个测试用例，我将使用步骤 X 中的内容在步骤 Y 中进行新调用。

理想情况下，我会使用一些参数创建 REST 请求，比如 A 和 B，并说这些参数应该在 URL 中使用：http: [//myapi.com/v1/stuff/A/B](http://myapi.com/v1/stuff/A/B)

然后我会做一个属性转移步骤，并简单地将从步骤 X 中提取的值设置为 A 和 B。

看起来soapUI 只允许我创建查询字符串参数，如下所示： [http ://myapi.com/v1/stuff?ParamA=A&ParamB=B](http://myapi.com/v1/stuff?ParamA=A&ParamB=B)

这当然可行，但我希望能够以两种方式调用它，以验证它们都在工作。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T08:36:17.047

无论如何，我都不是soapui专家，但刚刚经历了一个非常相似的场景，所以这可能会对你有所帮助。

**第 1 部分：创建参数化资源**
在我的服务中，我有一个名为 stuff 的资源：

```
http://{host}/stuff 
```

我创建了一个具有以下值的子资源：

```
    资源名称：通过 ID 获取内容
    资源路径/端点：{stuffId}

```

在单击确定之前，单击提取参数 - 这将使用如下条目填充参数表：

```
    姓名 | 默认值 | 风格 | 地点
    东西ID | 东西ID | 模板 | 资源

```

然后单击确定。您现在拥有一个允许您动态提供 id 的资源：

```
http://{host}/stuff/{id} 
```

您需要重复此操作以创建上面的 B 参数（或者，如果您从不调用 /stuff/A 而不提供 B，则可以将 A 和 B 创建为单个资源的两个参数）。

**第 2 部分：创建测试用例**
现在在测试用例中，您需要检索 A，传输属性，然后使用属性向上述资源发送请求：

1.  在测试用例中，创建请求以检索包含 A 的响应
2.  右键单击测试用例并添加一个属性步骤。添加一个属性来存储 A 的值。
3.  从 Outline 视图的响应中，右键单击 A 的值并选择“Transfer to > Property”，选择刚刚创建的属性并点击确定
4.  使用第一部分中创建的新参数化资源创建一个新请求。在 id 的位置，放置对持有 A 值的属性的引用，格式如下：

    ```
    ${propertyName} 
    ```

我可能做错了什么，但我的测试最初在“缺少源属性”的属性转移上失败。在 Source are of PropertyTransfer 步骤中，我需要将属性设置为 ResponseAsXml

希望这可以帮助！

# c# - 使用非本地主机域使用 Window 服务托管 WCF 服务

> ID：12930531
> 
> 赞同：0
> 
> 时间：2012-10-17T08:52:19.750
> 
> 标签：c#, wcf, web-services

我想通过窗口服务而不是 IIS 来托管基于互联网的 net-tcp WCF 服务？我想知道的是，端点 URI 是否有可能不是基于非本地主机域的 URI。因此，例如，我想访问服务`<http://dev1/myservice>`而不是标准`<http://localhost:90/myservice`> 这是几乎所有记录示例都提到的内容。考虑到使用窗口服务进行托管，我正在尝试做的事情（显然是 IIS 托管，我知道这是可能的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:06:47.550

这是可能的。我使用 WCF 服务自托管创建了一个 Windows 服务，它在生产环境中运行。这是我的服务配置部分

```
<service
          name="WinService.Comunication.ExecutionService" behaviorConfiguration="ExecutionServiceBehavior">
        <endpoint address=""
                  binding="wsHttpBinding"
                  contract="WinService.Comunication.IExecutionService"
                  bindingConfiguration="binding"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://vm-adminHost:11485/ExecutionService"/>
          </baseAddresses>
        </host>
      </service> 
```

它工作正常。您的客户端应用程序必须解析您的服务器名称。

# java - Java 双值只有一位小数

> ID：12930533
> 
> 赞同：-6
> 
> 时间：2012-10-17T08:52:32.727
> 
> 标签：java, decimal, bigdecimal

> **可能重复：**
> [如何在 Java 中将数字四舍五入到 n 位小数](https://stackoverflow.com/questions/153724/how-to-round-a-number-to-n-decimal-places-in-java)

我有一个 Double 值，例如 "1234.9678" 。我只想返回一位小数，没有四舍五入或上限。

我用过这种方式，但它返回“1234.96”

```
public double roundTwoDecimals(double d) {

DecimalFormat twoDForm = new DecimalFormat("#.##");

return Double.valueOf(twoDForm.format(d)); } 
```

我只想要“1234.9”，

我什至用过这种方式......但没有运气......有人可以帮忙吗？

```
double d = 1234.9678;
int decimalPlace = 1;
BigDecimal bd = new BigDecimal( Double.toString(d) );
bd = bd.setScale( decimalPlace, BigDecimal.ROUND_HALF_UP );
System.out.println( bd.doubleValue() ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:58:51.247

```
public double roundTwoDecimals(double d) 
```

**具有此签名的任何方法都无法满足您的要求。**反例请参见[此处。](https://stackoverflow.com/a/12684082/207421)

浮点变量没有*小数*位，因此不能四舍五入到特定的小数位。他们有*二进制*的地方。

您必须使用十进制基数。在 Java 中，这意味着使用`DecimalFormat`转换为字符串，或`BigDecimal`转换为十进制基数的数字，以十进制基数舍入，然后将其转换为字符串，这也将是十进制基数。

这意味着您必须将方法的签名更改为：

```
public BigDecimal roundTwoDecimals(double d) 
```

或者：

```
public String roundTwoDecimals(double d) 
```

# c# - listbox.SetSelected(int, true) 在 Windows Phone 7 中不起作用

> ID：12930536
> 
> 赞同：0
> 
> 时间：2012-10-17T08:52:38.783
> 
> 标签：c#, xaml, windows-phone-7

在我的 Windows Phone 7 应用程序中，我在 Xaml 中有一个列表框，里面有一些东西。

然后在 C# 代码中，我尝试了

```
listbox.SetSelected( anInteger, true); 
```

只是它没有用。

那我做错了吗？如何从带有 C# 的 Windows Phone 7 中的整数列表框中选择一个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:21:17.337

如果您查看[ListBox](http://msdn.microsoft.com/library/system.windows.controls.listbox%28VS.95%29.aspx)类方法，您会注意到WP7 不支持[SetSelected方法。](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.setselected.aspx)

尝试改用 SelectedIndex 属性：

```
private void btnSetSelected_Click(object sender, RoutedEventArgs e)
{
    this.listBox.SelectedIndex = anInteger;
} 
```

这篇文章可能非常有用：[Working with WP7 ListBox SelectedItem](http://www.windowsphonegeek.com/tips/WP7-ListBox-SelectedItem)

# php - PHP 中的“if lt IE 9”等价物？

> ID：12930539
> 
> 赞同：2
> 
> 时间：2012-10-17T08:52:50.030
> 
> 标签：php, html, internet-explorer

PHP 中是否有 HTML 语法的等价物：

```
<!--[if lt IE 9]>
    <script src="/js/html5/html5shiv.js"></script>
<![endif]--> 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:57:50.387

使用原生 php 函数[get_browser()](http://php.net/manual/ru/function.get-browser.php)；

并阅读这篇[文章](http://blogs.msdn.com/b/ie/archive/2010/03/23/introducing-ie9-s-user-agent-string.aspx)。试试这个代码：

```
 $browser = get_browser();

    switch ($browser->browser) {
        case "IE":
            switch ($browser->majorver) {
                case 6:
                case 5:
                    echo '<link href="ie5plus.css" rel="stylesheet" type="text/css" />';
                    break;
                case 9:
                    echo '<link href="ie5plus.css" rel="stylesheet" type="text/css" />';
                    break;
                default:
                    echo '<link href="ieold.css" rel="stylesheet" type="text/css" />';
            }

            break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:56:15.783

您可以使用手动在 PHP 中进行用户代理检测`$_SERVER['HTTP_USER_AGENT']`，也可以使用现成的解决方案，例如[`get_browser`](http://php.net/manual/en/function.get-browser.php)（诚然，设置起来有点麻烦）。

但是，通常在服务器上执行此操作并没有太多好处（尽管有合法的情况，但我需要自己执行此操作）。也许您可以在客户端实现目标？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:53:45.677

阅读有关[$_SERVER](http://php.net/manual/ru/reserved.variables.server.php)机会的信息。具体来说，`$_SERVER['HTTP_USER_AGENT']`。您还可以使用 Javascript 检测浏览器并使用 AJAX 将其发送到您的服务器端 PHP 代码

# mysql - MySQL Query - 对使用内部查询不感兴趣

> ID：12930545
> 
> 赞同：2
> 
> 时间：2012-10-17T08:53:18.533
> 
> 标签：mysql, sql, join

我有一个问题说，

```
select col1,col2 from table1; 
```

它返回多行的 2 列。我想在另一个查询的 where 条件下使用这两个值。就像是

```
select col3,col4 from table2 where col5=col1 and col6=col2; 
```

where`col1`和`col2`是第一个查询的结果值。

目前我使用了类似的内部查询

```
select col3,col4 from table2 
where col5 in (select col1 from table1) 
  and col6 in (select col2 from table1); 
```

但我不想使用上面显示的内部查询，因为它会减慢结果。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:59:50.463

`JOIN`他们而不是像这样使用`IN`'s：

```
SELECT t2.col3, t2.col4 
FROM table2 t2
INNER JOIN
(
   SELECT col1, col2 
   FROM table1
) t1 ON t2.col5 = t1.col1 AND t2.col6 = t1.col2 
```

请注意，您不需要选择第二个表中的特定列。您可以像这样直接`JOIN`第二个表`table1`：

```
SELECT t2.col3, t2.col4 
FROM table2 t2
INNER JOIN table1 t1 ON  t2.col5 = t1.col1 
                     AND t2.col6 = t1.col2 
```

# sql - 将日本数据迁移到 Oracle

> ID：12930547
> 
> 赞同：0
> 
> 时间：2012-10-17T08:53:31.057
> 
> 标签：sql, sql-server-2008

我加入了数据迁移团队，现在我们有一个日本数据库迁移的项目。我们需要将所有日语数据迁移到我们的 Oracle 数据库。之后我们需要比较源数据库和目标数据库之间的日语数据。我只是想知道是否可以在 SQL 服务器中为日语数据编写普通的 SQL 查询，它会起作用吗？与此相关的风险是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:04:03.490

应该没问题 - 日本的 SQL 查询与世界其他地区的相同。在数据格式化+转换（字符串格式、日期时间、排序规则）+字符串比较的情况下可能会出现一些问题，所以我建议在整个迁移过程之前进行一些测试。

# javascript - 内部网络上的 jQuery ajax (phonegap android)

> ID：12930549
> 
> 赞同：1
> 
> 时间：2012-10-17T08:53:36.503
> 
> 标签：javascript, ajax, jquery, cordova

我正在开发一个 phonegap 应用程序，该应用程序对呈现的网站运行简单的 ajax 请求，在本地拉下 html 和 reskins 内容。

一个要求是可以请求内部网络上的网站。我通过全局 IP 地址建立的连接工作正常，但无法让 ajax 在内部网络上工作。

例如，连接到 10.0.0.xx 地址总是会失败。设备连接到同一个网络，我可以在浏览器中正常访问内部网络上的网站。

有没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:59:20.977

确保您正确修改了域白名单文件以允许外部访问。

有关域白名单的更多信息，请查看在线文档：[http ://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

希望这可以帮助。让我知道这是否适用于修改您的域白名单文件后。

* * *

**iOS 域白名单配置示例：**

打开您的文件`Cordova.plist`并检查您是否进行了以下操作：

**1 -**设置`OpenAllWhitelistURLsInWebView`为`YES`

**2 -**右键单击`ExternalHosts`​​ ->`Add Row`

**3 -**将`String`新添加行的值设置为`*`，因此您的新行应该如下所示：

```
Item0                String              * 
```

通常，您将替换`*`为要提供访问权限的外部 URL。但是，为了确保问题确实来自白名单，我们将使用`*`.

# c# - 无法将 DataTable 绑定到 GridView

> ID：12930551
> 
> 赞同：0
> 
> 时间：2012-10-17T08:53:48.610
> 
> 标签：c#, asp.net

嘿伙计们，我刚刚开始编程，但遇到了问题。单击 button1 时，我创建的新数据表不会显示在 GridView2 中。虽然它填充了“计划”表中的数据（检查 dtPlanning 是否填充了注释中的文本框）。

简而言之：我想将 DataTable 计划纳入新的 DataTable dtPlanning 并将其显示在 gridview 中。

**代码背后：**

```
protected void Button1_Click(object sender, EventArgs e)
{
    DataTable dtPlanning = new DataTable();
    dtPlanning.Columns.Add("Courseday", typeof(int));
    dtPlanning.Columns.Add("Part", typeof(string));
    dtPlanning.Columns.Add("Design", typeof(string));
    dtPlanning.Columns.Add("Lesson", typeof(string));

    //DataRow dr = planning.Rows[1];  
    //TextBox2.Text = (dr["Daynumber"]).ToString();
    //TextBox3.Text = (dr["Part"]).ToString();
    //TextBox4.Text = (dr["Design"]).ToString();
    //TextBox5.Text = (dr["Lesson"]).ToString();

    for (int i = 0; i < dtPlanning.Rows.Count; i++)
    {
        DataRow dr = dtPlanning.NewRow();
        foreach (DataRow datarow in planning.Rows)
        {
            dtPlanning.Rows.Add(datarow);
        }
    }
    GridView2.DataSource = dtPlanning;
    GridView2.DataBind();
} 
```

**源代码：**

```
<asp:GridView ID="GridView2" runat="server"> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:04:59.110

逻辑上，`dtPlanning.Rows.Count = 0`因为这个表刚刚初始化！其次，你不能`Add`从一个表到另一个，用户`Import`

```
for (int i = 0; i < planning.Rows.Count; i++)
{
    dtPlanning.ImportRow(planning.Rows[i]);
} 
```

我想知道你为什么不直接使用桌子`planning`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:05:57.583

你必须：

1.  向 DataSet 添加一个新的 DataTable
2.  向 DataTable 添加一个新列
3.  而 GridView2.DataSource=YourNameDataSet.Tables[index_of_DataTable_in_DataSet].DefaultView;

# window - 根据文化设置日期格式

> ID：12930555
> 
> 赞同：0
> 
> 时间：2012-10-17T08:54:00.000
> 
> 标签：window, date-format

做了一个`custom datepicker`which is in `seperate dll`，我希望它返回日期，`dd/mm/yyyy format`但它采用默认的美国文化，`returning mm/dd/yyyy format`我应该如何`config culture`为自定义日期选择器，以便不必单独转换每个页面中的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:02:08.700

为所有页面设置 UI 文化和文化，在 Web.config 文件中添加一个全球化部分，然后设置 uiculture 和文化属性，如下例所示：

```
<globalization uiCulture="es" culture="es-MX" /> 
```

要为单个页面设置 UI 文化和文化，请设置 @Page 指令的 Culture 和 UICulture 属性，如下例所示：

```
<%@ Page UICulture="es" Culture="es-MX" %> 
```

欲了解更多信息，请单击[此处](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:23:03.363

您也可以使用此代码设置文化。

```
/// <summary>
/// The main entry point for the application.
/// </summary>
[STAThread]
static void Main()
{
    // Creating a Global culture specific to our application.
    System.Globalization.CultureInfo cultureInfo = 
    new System.Globalization.CultureInfo("en-US");
    // Creating the DateTime Information specific to our application.
    System.Globalization.DateTimeFormatInfo dateTimeInfo = 
    new System.Globalization.DateTimeFormatInfo();
    // Defining various date and time formats.
    dateTimeInfo.DateSeparator = "/";
    dateTimeInfo.LongDatePattern = "dd-MMM-yyyy";
    dateTimeInfo.ShortDatePattern = "dd-MMM-yy";
    dateTimeInfo.LongTimePattern = "hh:mm:ss tt";
    dateTimeInfo.ShortTimePattern = "hh:mm tt";
    // Setting application wide date time format.
    cultureInfo.DateTimeFormat = dateTimeInfo;
    // Assigning our custom Culture to the application.
    Application.CurrentCulture = cultureInfo;
    Thread.CurrentThread.CurrentCulture = cultureInfo;
    Thread.CurrentThread.CurrentUICulture = cultureInfo;

    ..................
    Application.Run(new Form1());
} 
```

# c# - Windows 8 从桌面滑出功能

> ID：12930556
> 
> 赞同：0
> 
> 时间：2012-10-17T08:54:01.233
> 
> 标签：c#, xaml, windows-8, desktop

如果用户从桌面选择了应用程序，有没有办法让我的 Windows 8 应用程序向右滑出作为桌面顶部的叠加层。因此它可以从 Metro 正常打开，但如果用户使用的是 win 8 桌面，您只会得到一个较小的版本。我知道目前您可以将应用程序锁定在一边，但我发现桌面上的功能有点麻烦。

我希望桌面用户能够在桌面和应用程序之间快速导航，并可以选择滑回视图和进入全屏应用程序的选项。

这个功能，我认为对于像 NoteOne 或记事本这样的应用程序很有用，用户想要一条信息来补充当前在桌面上完成的工作，而不必在应用程序视图之间切换

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:50:14.047

不，据我所知这是不可能的。您需要使用 Windows 8 拆分视图模式。

# php - php函数strtotime()中的参数$now

> ID：12930560
> 
> 赞同：4
> 
> 时间：2012-10-17T08:54:17.187
> 
> 标签：php

我试图了解 $now 参数在 php 函数中的作用

> strtotime(string $time [, int $now = time() ])

每个人似乎都简单地忽略了 $now 参数，并且它的文档不是很清楚。

该参数如何真正影响返回值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:55:41.700

它是 unix 时间戳的可选参数。如果使用，则函数中使用的当前时钟将是该值，`$now`否则使用当前时间戳。

例如，如果您在不输入可选参数的情况下弹出“昨天”，则假定您的意思是昨天。如果您输入 1 周前的时间戳，它会为您提供一周前昨天的答案。

# iphone - Phonegap - Cordova 2.1 ios 4.3.5 ondeviceready 没有触发

> ID：12930562
> 
> 赞同：0
> 
> 时间：2012-10-17T08:54:33.650
> 
> 标签：iphone, xcode, cordova, ios4

我为 ios 创建了一个 phonegap 应用程序。在将其提交给 Apple iTunes 后，他们拒绝了该项目，因为我不支持 IOS 6。

所以，我安装了 Xcode 4.5，我将项目更新为 cordova 2.1

它在 ios 6 模拟器上完美运行。！！！

坏消息是在我的 ios 4.3.5 iphone 设备中不起作用。当我使用cordova 2.0时，它在ios 4.3.5下工作，但不支持ios 6...

我发现 cordova 2.1 和 xcode 4.5 不支持低于 ios 4.3 ，但这是 4.3.5。

和iphone硬件有关系吗？是3G。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:56:34.483

我必须将所有包含的插件更新为兼容 2.1 的插件。

（Facebook）。

因此，如果有人遇到它，这就是解决方案。

谢谢

# c# - 枚举转换为其他枚举

> ID：12930563
> 
> 赞同：0
> 
> 时间：2012-10-17T08:54:52.823
> 
> 标签：c#, asp.net-mvc, enums

我有**许多**从服务返回的 Enum 类型，并且我想映射到我的 Enum 类型。我想要的是创建一个具有所有转换逻辑的映射器类。我做了这样的事情：

```
public static class ErrEnumMapper
{
    private static Dictionary<FullErrorTypeError, eError> dictionary;

    static ErrEnumMapper()
    {
        var dictionary = new Dictionary<FullErrorTypeError, eError>()
        {
            {FullErrorTypeError.APP, eError.APPLICATION},
            {FullErrorTypeError.INF, eError.INF},
            {FullErrorTypeError.NO, eError.NONE},
            {FullErrorTypeError.PAX, eError.PASSENGER},
            {FullErrorTypeError.SYS, eError.SYSTEM}
        };
    }

    public static eError GetEnum(FullErrorTypeError key)
    {
        var val = dictionary[key];
        if (val != null)
            return val;

        throw new InvalidOperationException();
    }
} 
```

但是由于我有许多其他枚举，因此我将不得不创建许多静态字段（如“字典”字段）及其等效方法（如“GetEnum”）......有没有更好的方法来做到这一点？通用的可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:09:44.547

除非两组枚举的整数值或名称相同，否则如果没有某种手动映射，就不能从一个枚举值转置到另一个枚举值。

一些建议：

1.  如果可能，重用原始枚举
2.  保持映射枚举的整数值与原始枚举相同，这样你就可以从一个到另一个。
3.  对枚举名称使用约定，以便您可以从一个映射到另一个。
4.  在每个映射的枚举值上使用一个自定义属性，该属性指示相关的原始枚举值，并已`ErrEnumMapper`读取该属性。仍然是手动映射，只是可能进行了重组。

当然，本着 KISS 的精神，我会坚持使用#1、#2，或者只处理手动映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:04:08.680

也许我并没有真正理解你的意思..但如果它们具有相同的潜在价值，你可以明确地转换它们：

```
enum FirstEnum {
    ONE,
    TWO,
    THREE
}

enum SecondEnum {
    FOUR,
    FIVE,
    SIX
}

static void Main(string[] args) {
    FirstEnum first = FirstEnum.ONE;

    SecondEnum second = (SecondEnum)first;

    Console.WriteLine(second); // prints FOUR
} 
```

这使您可以保持命名约定..

# javascript - 正则表达式在开头和结尾将双引号转换为单引号

> ID：12930570
> 
> 赞同：-1
> 
> 时间：2012-10-17T08:55:13.337
> 
> 标签：javascript, jquery, regex

我有一个存储整个 html 内容的变量，例如：-

获取内容 =`"<table style="height: 1000px; ; width: 500px;" border="1"> <tbody> <tr> <td>[<span>Assignment(for) name</span>]</td> <td>[<span>Total No of staff-months of the assignment</span>]</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table> "`

现在我想用单引号转换第一个和最后一个双引号。

可以使用什么正则表达式，以便 getcontent 转换为：-

```
'<table style="height: 1000px; ; width: 500px;" border="1"> <tbody> <tr> <td>[<span>Assignment(for) name</span>]</td> <td>[<span>Total No of staff-months of the assignment</span>]</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table> ' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:59:11.100

使用锚点作为字符串的开头和结尾：

```
getcontent = getcontent.replace(/(^"|"$)/g, "'"); 
```

`^`表示字符串的开头和`$`结尾。

这假设您实际上有一个包含开头结尾`"`的字符串，而不是（在语法上）包含在 中的字符串`"`，在这种情况下，您的输入无效，因为`"`在字符串中未转义。

# visual-studio - c++/cli项目调试构建安装后崩溃

> ID：12930572
> 
> 赞同：0
> 
> 时间：2012-10-17T08:55:32.323
> 
> 标签：visual-studio, c++-cli

我有一个包含 WPF 项目、C# 库和一个 C++/CLI 项目的解决方案。安装程序是使用 WiX 构建的。

当我安装 Release 版本时，一切正常，当我安装 Debug 版本时，应用程序崩溃并出现`System.IO.FileNotFoundException: Could not load file or assembly 'MyC++CLIComponent.dll' or one of its dependencies. The specified module could not be found.`

当我将构建配置更改为仅对这个组件使用 Release 而对其他组件使用 Debug 时，它工作正常。

什么会导致 C++/CLI 项目的调试构建失败？

我试图`AtlTrace`在安装后从组件中获取信息，但它不会在发布版本中输出。

# sql-server - SSIS 批处理

> ID：12930576
> 
> 赞同：1
> 
> 时间：2012-10-17T08:55:39.890
> 
> 标签：sql-server, ssis, bulkinsert, batch-processing

谁能告诉我如何在 SSIS 中执行一个简单的批处理？

我知道如何使用 T-SQL 和/或 .NET 代码来做这样的事情，但我想做的是使用 SSIS GUI 来完全做到这一点。我不确定这是否可能，我在谷歌上能找到的只是复杂的解决方案。

再解释一下 - 我正在读取一个平面文件，我想将它的全部内容插入到一个 Sql Server 表中。很简单吧...但我想一次处理 50,000 条记录。我希望这就像在某处设置属性一样简单，或者最多使用工具箱中的某种循环工具。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:14:49.350

你说的对。它是数据流任务的属性。

右键单击任务，单击“属性...”命令，查找`DefaultBufferMaxRows`属性并设置所需的值。

参考[@MSDN](http://msdn.microsoft.com/en-us/library/ms141031(v=sql.100).aspx)。

![在此处输入图像描述](../Images/6151de78ae475f2999a3e1ac865978a0.png)

# image - 图 figcaption 位置 html 5

> ID：12930580
> 
> 赞同：0
> 
> 时间：2012-10-17T08:55:50.857
> 
> 标签：image, html, css

[http://jsfiddle.net/hashie5/5p7Jk/](http://jsfiddle.net/hashie5/5p7Jk/)

当您将图像悬停时，标题会向上滑动，
但正如您所见
，标题应位于顶部几 px 处以与图片对齐

我怎么能在不向图形标签添加高度的情况下做到这一点，因为图像的高度会有所不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:14:39.693

只需添加`figure img {display:block;}`到您的 CSS。

# image - codeigniter 图片上传成功，但文件未上传

> ID：12930583
> 
> 赞同：1
> 
> 时间：2012-10-17T08:55:58.030
> 
> 标签：image, codeigniter, upload

我一直在尝试使用 CodeIgniter 的文件上传类上传图像。该图像用于用户的化身。这是我的代码片段：

```
//upload file
            if($_FILES['image']['name'] != ''){
                if (!file_exists($dirpath))
                    mkdir($dirpath);

                $this->load->library('upload');
                $config['upload_path'] = $dirpath;
                $config['allowed_types'] = 'gif|jpg|jpeg|png|GIF|JPG|JPEG|PNG';
                $config['max_size'] = '0';
                $config['max_width'] = '0';
                $config['max_height'] = '0';
                $config['file_name'] = $_FILES['image']['name'];
                $config['overwrite'] = true;
                $config['remove_spaces'] = false;

                $this->upload->initialize($config);
                $data = "";
                $error = "";

                $photo_result = $this->upload->do_upload('image');
                if ($photo_result)
                    if($action == 'update'){
                        foreach (glob($dirpath.'/'.$old_image.'*') as $file)
                            if (file_exists($file))unlink ($file);
                    }
                    if($new_resto->resized == 0){
                        if(resize_image($widths,$theuser))
                            $this->usermodel->update($theuser->id, array('resized'=>1), 'object',$authorization);
                    }
                echo json_encode(array('config'=>$config,'upload_data'=>$this->upload->data()));
                }
            } 
```

文件上传应该是成功的，因为当我打印出来`$this->upload->data()`的时候，显示上传的数据不为空。奇怪的是，这段代码适用于创建新用户，但是当我尝试更新用户时，文件没有上传。我`chmod($dirpath, 0777)`在上传之前尝试过使用，`chmod($dirpath, 0755)`之后仍然没有运气。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:06:21.040

我的错误，我`$old_image`在更新数据后分配，所以`$old_image`包含当前图像名称，导致它在我调用时被删除`unlink($file)`。

问题解决了 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:16:21.240

请使用以前版本的 CodeIgniter 更新您的 Upload.php 类

# php - 简化大量代码

> ID：12930585
> 
> 赞同：0
> 
> 时间：2012-10-17T08:56:04.993
> 
> 标签：php

有没有办法让这段代码缩短 $val1 $val2 ....... 的值是查询的结果

```
$val1 = 1;
$val2 = 2;
$val3 = 3;
$val4 = 4;
$val5 = 5;
$val6 = 8;
$val7 = 7;
$val8 = 8;
$val9 = 8;
$val10 = 9;
$val11 = 13;
$val12 = 12;

echo $val1.",".$val2.",".$val3.",".$val4.",".$val5.",".$val6.",".$val7.",".$val8.",".$val9.",".$val10.",".$val11.",".$val12; 

?> 
```

有没有办法简化这个

```
echo $val1.",".$val2.",".$val3.",".$val4.",".$val5.",".$val6.",".$val7.",".$val8.",".$val9.",".$val10.",".$val11.",".$val12; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:58:10.590

使用[`array()`](http://php.net/manual/en/language.types.array.php)和[`implode()`](http://php.net/manual/en/function.implode.php)：

```
$values = array(1, 2, 3, 4, 5, 8, 7, 8, 8, 9, 13, 12);
echo implode(',', $values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:02:04.577

这就是数组的用途：

```
$vals = range(1, 12);
echo implode(',', $vals); 
```

如果您没有直接创建数组，则应先将编号变量转换为数组：

```
$vals = array($var1, $var2, $var3, ... , $var12);
echo implode(',', $vals); 
```

对于单个 echo 调用，这不会有太大变化，但通常您可以在代码中将其向上移动以降低复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:59:13.460

将它放在一个数组中并循环遍历它可能会起作用。

```
$values = array(1, 2, 3, 4, 5, 6);
foreach ($values as $key => $value) {
   echo $value;
} 
```

# sql-server - 更新一组记录的第一条记录t-sql

> ID：12930586
> 
> 赞同：5
> 
> 时间：2012-10-17T08:56:10.293
> 
> 标签：sql-server, tsql

我有一张这样的桌子

```
CREATE TABLE [dbo].[tblUserLink](
    [IDUserLink] [int] IDENTITY(1,1) NOT NULL,
    [IDUser] [int] NOT NULL,
    [IDRegie] [varchar](50) NOT NULL,
    [DefaultAgency] [bit] NULL
) 
```

我正在寻找一个查询/脚本来更新字段 DefaultAgency。对于具有相同 IDUser 的每组记录的第一条记录，我想将其设置为 1。

例子 ：

```
IDUserLink IDUser IDRegie DefaultAgency (Goal)
1          1      1       null           DefaultAgency to be set to 1
2          1      2       null
3          1      3       null
4          2      2       null           DefaultAgency to be set to 1
5          2      1       null     
6          3      1       null           DefaultAgency to be set to 1
 ...etc 
```

我可以使用简单的 sql 查询来实现这一点，还是应该编写脚本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T09:10:17.603

```
update tblUserLink
set DefaultAgency = 1
where IDUserLink in
(select min(IDUserLink) from tblUserLink group by IDUser) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T14:22:51.343

如果您使用的是 SQL Server 2005+，则可以使用公用表表达式：

```
with cte as (
   select *,
      row_number() over (partition by IDUser order by IDUserLink) as [rn]
   from tblUserLink
)
update c
set DefaultAgency = 1
from cte as c
where c.rn = 1 
```

# c# - 使用 Dapper 扩展自定义 SQL

> ID：12930587
> 
> 赞同：1
> 
> 时间：2012-10-17T08:56:14.833
> 
> 标签：c#, orm, dapper, micro-orm

我正在为我的某些类型使用 Dapper Extensions，它对大多数用例都非常有效。我遇到了一个我有很多关系的案例，我想做类似的事情：-

```
SELECT id,a,b,c FROM Foo WHERE Foo.id in (SELECT foo_id FROM foo-bar WHERE bar-id=@bar_id) 
```

显然，Dapper Extensions 可以处理“SELECT id,a,b,c FROM Foo”，但不能处理后半部分。我可以进行选择以获取我想要的 Foo id 列表，然后将其传递给 Dapper Extensions，但这效率较低。

我不能用普通的 Dapper 做的部分是自动获取 SELECT 列列表，所以我真正想要的是一种方法：-

*   从 Dapper Extension 的内部机制中获取 SELECT 列列表
*   从 Dapper Extension 的内部机制中获取基本的“SELECT id,a,b,c FROM Foo”
*   Hook Dapper Extensions 获取代码，以便我可以添加自定义 WHERE 子句

我查看了代码，但我不知道如何做这些事情。任何人都可以帮忙吗？目前我已经通过使用普通的 Dapper 和“SELECT * ...”来解决问题，但我确信有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:06:43.870

这是另一种选择：

您可以创建一个视图：

```
select * from Foo 
join FooBar b
on a.foo_id = b.foo_id 
```

然后使用谓词选择任何 where 子句：

```
using (SqlConnection cn = new SqlConnection(_connectionString))
{
    cn.Open();
    var predicate = Predicates.Field<Foo>(f => f.foo_id, Operator.Eq, 1);
    IEnumerable<Foo> list = cn.GetList<Foo>(predicate);
    cn.Close();
} 
```

生成的 SQL 应该类似于：

```
SELECT 
   [Foo].[foo_id]
 , [Foo].[...]
 , [Foo].[...]
 , [Foo].[...]
 , [Foo].[...] 
FROM [ViewName] 
WHERE ([ViewName].[foo_id] = @foo_id_0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T02:03:31.933

我不知道这在 2012 年是不支持的。所以在两年内大约有 1.7K 的浏览量并且曝光率并不高。但是，如果 Dapper 的新手来到这里并想知道它是否有效，答案是，它有效。[在撰写本文时，使用来自 nuget 的 Dapper v1.42](https://www.nuget.org/packages/Dapper/)的最新版本：

```
var sql = "SELECT id,a,b,c FROM Foo WHERE Foo.id in (
    SELECT foo_id FROM foo-bar WHERE bar-id=@bar_id)"
using (var cn = new SqlConnection(the_connection_string)) {
  cn.Open();
  var returnedObject = cn.Query<dynamic>(sql, new { bar_id = some_value });
} 
```

# ios - Twitter应用程序开发是否有沙盒环境？

> ID：12930592
> 
> 赞同：3
> 
> 时间：2012-10-17T08:56:26.597
> 
> 标签：ios, twitter, sandbox, sharekit

我正在开发一个 iOS 应用程序，并且正在集成 ShareKit 2.0 项目。我想通过 Facebook 和 Twitter 分享内容。他们都需要在他们的平台上创建一个应用程序。此时一切正常。

问题是，作为正在开发的应用程序，我们不希望它被不在这个项目中的任何人看到，所以我们不能在我们的 facebook/twitter 帐户上发布内容对外部人员可见。

Facebook 支持沙盒环境，应用管理员可以只允许某些用户使用应用程序，因此只有这些用户才能访问和查看与该应用程序相关的内容。我正在 Twitter 上寻找类似的东西，但我找不到。

这是一个非常困难的问题，当你不知道这是否可能时，因为你永远不知道什么时候应该停止寻找答案并决定它是不可能的。因此，我在这里向 SO 专家提问：Twitter 是否有任何沙箱环境，以便我们可以开发和测试我们的应用程序？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:24:16.050

好的，由于我没有收到这个问题的答案，我最终会推断出 Twitter 不存在这样的沙箱环境。

但是，我通过将我的测试帐户设置为私人模式来“解决”我的要求（我不知道这一点，因为我很少使用 Twitter）。现在这可以解决问题，但当然它比 Facebook 沙盒环境差得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T03:19:03.187

显然不是：

[https://dev.twitter.com/discussions/1238](https://dev.twitter.com/discussions/1238)

> @episod Taylor Singletary 不幸的是，这种活动没有沙箱。自动化测试最好不要真正触及 API，而是模拟它。

我建议您只创建一个虚拟帐户进行测试。我不知道还有什么办法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-13T07:38:55.993

你试过[http://twitsandbox.com](http://twitsandbox.com)

twitSandbox 是一个 Web 应用程序，支持使用 Twitter API 创建应用程序。它实际上处理几乎所有的方法，您可以确认收到什么样的响应。

# javascript - 用 jquery 解析 jsonp

> ID：12930595
> 
> 赞同：0
> 
> 时间：2012-10-17T08:56:44.863
> 
> 标签：javascript, jquery, json, jsonp

我通过 jQuery 调用收到以下 jsonp：

```
DisplayDates({"dates":[ "10\/2012","9\/2012"]}) 
```

当我尝试在 Firefox / Chrome 中显示到数组时，“日期”只有 1 项“9/2012”。

我不知道为什么。我想json格式不正确，但应该是什么？

我的测试代码是：

```
function DisplayDates(data) {
    console.log(data);
}

$(function () {
    $.ajax({
        type: 'GET',
        url: 'http://url?alf_callback=DisplayDates',
        dataType: 'jsonp'
    });
}); 
```

编辑：我添加了其他项目，它们出现了。唯一没有出现的项目是`"10\/2012"`。为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:55:45.983

我完全是个白痴......我的页面和另一个调用没有查询相同的确切网址（参数中的 guid 略有变化）而且我没有看到它......感谢您的所有测试

# php - 在codeigniter中通过谷歌邮件发送电子邮件

> ID：12930597
> 
> 赞同：2
> 
> 时间：2012-10-17T08:56:56.113
> 
> 标签：php, codeigniter, email

我正在尝试在 codeigniter 中发送电子邮件，这是我正在使用的一段代码。第一个注释代码打印错误说我的应用程序没有发送电子邮件的配置。

使用 gmail 的第二个未注释代码工作正常，但需要显示我的电子邮件和密码。所以我有两个问题：如何在不提及密码的情况下做我想做的事。这在软件开发中是否可以接受提及用户密码。谢谢

```
/*$config = array();
             $config['useragent']           = "CodeIgniter";
             $config['mailpath']            = "/usr/bin/sendmail"; // or "/usr/sbin/sendmail"
             $config['protocol']            = "mail";
             $config['smtp_host']           = "localhost";
             $config['smtp_port']           = "25";
             $config['mailtype'] = 'text';
             $config['charset']  = 'utf-8';
             $config['newline']  = "\r\n";
             $config['wordwrap'] = TRUE;
             */
   $config = Array(
        'protocol'  => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => '465',
        'smtp_user' => 'myemail@gmail.com',
        'smtp_pass' => 'mypass',
        'mailtype'  => 'text',
        'starttls'  => true,
        'newline'   => "\r\n"
        );

        $this->load->library('email',$config);

        $email=$this->input->post("email");
        $username=$this->input->post("username");
        $this->email->to("receiver1@gmail.com,receiver2@gmail.com,receiver3@yahoo.fr");
        $this->email->subject("Hello world");
        $this->email->subject("Hello world from local pc");
        $this->email->send();
        $data['msg']=$this->email->print_debugger(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:20:08.473

1) 您不能在不使用 id 和密码的情况下发送电子邮件`smtp.googlemail`。原因很简单。smtp 使用您的 gmail 帐户发送电子邮件。所以需要id和密码。如果您不想使用您的 gmail 帐户，则必须有一个邮件服务器来发送电子邮件。

2) 当您不必共享包含密码等机密数据的文件时，使用 google smtp 可以接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:37:26.500

user1718215，我问了同样的问题，所以我的解决方案是：

1）我使用mail或sendmail作为协议失败了，你可以试试sendemail作为协议：

```
$config = array();
$config['mailpath']            = "/usr/bin/sendmail"; 
$config['protocol']            = "sendmail";
$config['mailtype'] = 'text';
$config['charset']  = 'utf-8';
$config['newline']  = "\r\n";
$config['wordwrap'] = TRUE; 
```

如果它不起作用，我建议你应该使用 smtp 作为协议，因为没有解决使用 mail 或 sendmail 作为协议失败的解决方案，也许是 php 的错误？

2）关于你的问题。

> 我怎样才能在不提及密码的情况下做我想做的事。

如果您在使用mail 或sendmail 时失败了，您将无法在不提及我的密码的情况下为所欲为。

> 这在软件开发中是否可以接受提及用户密码。

可以提及用户密码。总是，在这种情况下，人们会创建一个仅用于发送电子邮件的新帐户，所以不要担心您帐户的安全性。

3）最后，祝你好运。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T09:11:46.417

第一个代码不起作用，因为您的本地主机上没有电子邮件服务器......

首先在您的本地主机上配置**Mercury**或其他一些电子邮件服务器。

您可以使用**Xampp**在您的本地 Web 服务器上安装和配置所有（Apache、Php、Mysql、Mercury、Tomcat 等）

其次，如果您想发送没有用户名和密码的电子邮件，那么它将转到不需要的Recipent的**垃圾邮件/垃圾邮件文件夹，因此请在谷歌上创建虚拟帐户并通过该帐户发送电子邮件**

# php - 对象中的 PHP 对象

> ID：12930601
> 
> 赞同：0
> 
> 时间：2012-10-17T08:57:16.317
> 
> 标签：php, arrays, object

所以基本上，我对 PHP 很陌生，我无法让它工作。我在一个对象中有一个对象，我正在尝试访问它的字段。它从 MySQL 数据库中提取数据。我不确定错误发生在哪里。我希望有人能指出我正在犯的一个公然错误或什么的。谢谢！

```
<?php
    include("Data/Classes.php");
    include("Data/Utils.php");
    $contacts = listBusinessesWithDefaultContact() or die();
?>
<!DOCTYPE html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Lab 05 - Home</title>
        <link rel="stylesheet" type="text/css" href="Styles/main.css" />
    </head>    
    <body>
        <div id="Wrapper">
            <header>
                <h1>Contacts</h1>
            </header>
            <div id="MainContent">
                <img id="bg" alt="Background" src="Images/Ring.png" />
                <?php

                    foreach ($contacts as $BusinessWithContact) {
                        echo $contacts->Contact->FirstName;
                    }

                ?>
            </div>
            <nav>
                <a id="HomeLink" href="index.php"><img alt="Home Image" src="Images/Home.png" /></a>
                <a id="CreateLink" href="create.php"><img alt="Create Image" src="Images/Create.png" /></a>
                <a id="ReadLink" href="read.php"><img alt="Read Image" src="Images/Read.png" /></a>
                <a id="UpdateLink" href="update.php"><img alt="Update Image" src="Images/Update.png" /></a>
                <a id="DeleteLink" href="delete.php"><img alt="Delete Image" src="Images/Delete.png" /></a>
            </nav>
        </div>
    </body>
</html> 
```

这是“Classes.php”：

```
<?php
    class Business {
        public $BusinessID;
        public $BusinessName;
        public $BusinessPhone;
        public $BusinessEmail;
        public $Website;
        public $Address;
        public $City;
        public $Province;
        public $PostalCode;
        public $Notes;

        public function __construct($id, $name, $phone, $email, $website, $address, $city, $province, $postalCode, $notes) {
            $this->BusinessID = $id;
            $this->BusinessName = $name;
            $this->BusinessPhone = $phone;
            $this->BusinessEmail = $email;
            $this->Website = $website;
            $this->Address = $address;
            $this->City = $city;
            $this->Province = $province;
            $this->PostalCode = $postalCode;
            $this->Notes = $notes;
        }
    }

    class ContactPerson {
        public $BusinessID;
        public $ContactID;
        public $FirstName;
        public $LastName;
        public $DefaultContact;
        public $Email;
        public $WorkPhone;
        public $CellPhone;
        public $Notes;

        public function __construct ($bid, $cid, $fName, $lName, $dContact, $email, $wPhone, $cPhone, $notes) {
            $this->BusinessID = $bid;
            $this->ContactID = $cid;
            $this->FirstName = $fName;
            $this->LastName = $lName;
            $this->Email = $email;
            $this->WorkPhone = $wPhone;
            $this->CellPhone = $cPhone;
            $this->Notes = $notes;
        }
    }

    class BusinessWithContact {
        public $Business;
        public $Contact;

        public function __construct(Business $business, ContactPerson $contact) {

            $this->Business = $business;
            $this->Contact = $contact;
        }
    }
?> 
```

最后，“Utils.php”：

```
<?php   
    function listBusinessesWithDefaultContact() {
        $result = array();

        $connection = mysql_connect('[connection]', '[user]', '[pass]') or die (mysql_error());
        mysql_select_db('[db]') or die (mysql_error());

        $dbResult = mysql_query("select * from Business") or die (mysql_error());

        while ($row = mysql_fetch_array($dbResult)) {
            $business = new Business($row['BusinessID'], $row['BusinessName'], $row['BusinessPhone'], $row['BusinessEmail'], $row['Website'], $row['Address'], $row['City'], $row['Province'], $row['PostalCode'], $row['Notes']) or die();

            $queryString = "select * from ContactPerson where BusinessID = " . $row['BusinessID'] . " and DefaultContact = 1";          
            $contactResult = mysql_query($queryString) or die(mysql_error());

            while ($newRow = mysql_fetch_array($contactResult)) {
                $contact = new ContactPerson($newRow['BusinessID'], $newRow['ContactPersonID'], $newRow['FirstName'], $newRow['LastName'], $newRow['DefaultContact'], $newRow['Email'], $newRow['WorkPhone'], $newRow['CellPhone'], $newRow['Notes']) or die();
            }

            array_push($result, new BusinessWithContact($business, $contact) or die());
        }

        return $result;
    }

    function getContact($contactID) {
        $result;

        $connection = mysql_connect('[connection]', '[user]', '[pass]') or die (mysql_error());
        mysql_select_db('[db]') or die (mysql_error());

        $dbResult = mysql_query("select * from Contacts where ContactID = $contactID");

        while ($row = mysql_fetch_array($dbResult)) {
            $result = new Contact($row['ContactID'], $row['Name'], $row['Phone'], $row['Email'], $row['Website'], $row['ContactFirstName'], $row['ContactLastName'], $row['Address'], $row['City'], $row['Province'], $row['Postal']);
        }

        return $result;
    }

    function addContact(Contact $item) {
        $result;

        $connection = mysql_connect('localhost', 'jschaible1', 'dragunov');
        mysql_select_db('jschaible1');

        $result = mysql_query("insert into Contact values($item->Name, $item->Phone, $item->Email, $item->Website, $item->ContactFirstName, $item->ContactLastName, $item->Address, $item->City, $item->Province, $item->Postal)");     

        return $result;
    }

    function updateContact(Contact $item) {
        $result;

        $connection = mysql_connect('[connection]', '[user]', '[pass]') or die (mysql_error());
        mysql_select_db('[db]') or die (mysql_error());

        $result = mysql_query("update Contact values set Name = $item->Name, Phone = $item->Phone, Email = $item->Email, Website = $item->Website, ContactFirstName = $item->ContactFirstName, ContactLastName = $item->ContactLastName, Address = $item->Address, City = $item->City, Province = $item->Province, Postal = $item->Postal");        

        return $result;
    }

    function deleteContact(Contact $item) {
        $result;

        $connection = mysql_connect('[connection]', '[user]', '[pass]') or die (mysql_error());
        mysql_select_db('[db]') or die (mysql_error());

        $result = mysql_query("delete from Contact where ContactID = $item->ContactID");        

        return $result;
    }
?> 
```

编辑：抱歉，澄清一下，我得到的错误是“试图获取非对象的属性”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:05:49.230

在

```
foreach ($contacts as $BusinessWithContact) {
    echo $contacts->Contact->FirstName;
} 
```

您正在使用`$contacts->Contact->FirstName`而不是`$BusinessWithContact->Contact->FirstName`. `Contact`可能不是`$contacts`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:11:20.557

显然，如果我改变

```
 array_push($result, new BusinessWithContact($business, $contact) or die()); 
```

在 Utils.php 文件中

```
$item = new BusinessWithContact($business, $contact);
array_push($result, $item) or die(); 
```

有用。我不太确定为什么，这两个应该是相同的，不是吗？

# sql - VBA快速将许多记录插入访问数据库

> ID：12930603
> 
> 赞同：2
> 
> 时间：2012-10-17T08:57:26.270
> 
> 标签：sql, vba, ms-access, excel

好的，所以我有一个电子表格，可以产生相当多的记录（~3500）

我有以下脚本将它们插入我的访问数据库：

```
Sub putinDB()
Dim Cn As ADODB.Connection, Rs As ADODB.Recordset
Dim MyConn, sSQL As String

Dim Rw As Long, c As Long
Dim MyField, Result
Dim x As Integer
Dim accName As String, AccNum As String, sector As String, holding As String,  holdingvalue As Double, holdingdate As Date
theend = lastRow("Holdings", 1) - 1
'Set source
MyConn = "S:\Docs\Harry\Engine Client\Engine3.accdb"
'Create query
Set r = Sheets("Holdings").Range("a2")
x = 0
Do
Application.StatusBar = "Inserting record " & x + 1 & " of " & theend
accName = r.Offset(x, 0)
AccNum = r.Offset(x, 4)
sector = r.Offset(x, 2)
holding = r.Offset(x, 1)
holdingvalue = r.Offset(x, 3)
holdingdate = r.Offset(x, 5)

sSQL = "INSERT INTO Holdings (AccName, AccNum, Sector, Holding, HoldingValue, HoldingDate)"
sSQL = sSQL & " VALUES ('" & Replace(accName, "'", "''") & "', '" & AccNum & "', '" & sector & "', '" & Replace(holding, "'", "''") & "', '" & holdingvalue & "', #" & holdingdate & "#)"
Debug.Print (sSQL)
 'Create RecordSet
Set Cn = New ADODB.Connection
With Cn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .CursorLocation = adUseClient
    .Open MyConn
    Set Rs = .Execute(sSQL)
End With
x = x + 1
Loop While r.Offset(x, 0) <> "" Or x < 15
Application.StatusBar = False
End Sub 
```

问题是，它逐个循环遍历每条记录，每次都重建并执行查询，这导致执行速度非常慢（我的 PC 上每秒大约 2-3 条记录）

有没有办法让vba一次性将整个范围插入数据库而不必循环？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T09:35:08.153

您提供的答案应该会稍微改善一些事情，因为您只需要打开一次连接，但代码仍然效率低下。您真的只想将所有数据写入您的记录集一次，而不是像这样。我总是更喜欢从 Access 端工作以从 Excel 中提取信息，而不是从 Excel 推入 Access，但我相信我们可以在这种情况下使用任何一种。

在这种情况下，您最好使用 DAO 而不是 ADO 并使用**Transacation ，本质上您仍然循环遍历记录集，但写入数据的实际行为直到最后****Commit**才会发生，因此速度要快得多。

这是访问端的一个非常基本的示例，供您尝试：

```
Private Sub TestTrans()

Dim wksp    As DAO.Workspace
Dim rs      As DAO.Recordset

    Set wksp = DBEngine.Workspaces(0) 'The current database

    wksp.BeginTrans 'Start the transaction buffer

    Set rs = CurrentDb.OpenRecordset("Table1", dbOpenDynaset)

    Do 'Begin your loop here

    With rs
        .AddNew
            !Field = "Sample Data"
        .Update
    End With

    Loop 'End it here

    wksp.CommitTrans 'Commit the transaction to dataset

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T09:07:53.117

好吧，我傻了。经过一番修修补补，事实证明，把

```
Set Cn = New ADODB.Connection
With Cn
.Provider = "Microsoft.ACE.OLEDB.12.0"
.CursorLocation = adUseClient
.Open MyConn
End With 
```

循环外的位使其更快。

# python - 如何在 python 中将 raw_input() 的返回值设为十六进制？

> ID：12930605
> 
> 赞同：0
> 
> 时间：2012-10-17T08:57:34.290
> 
> 标签：python, serial-port, hex

python 将 raw_iput 中的值作为字符串返回。我希望将这些字符串转换为十六进制字符。所以：

```
 example = '\x05\x06\x40\x00\x02\x05'
 tx = raw_input("\nTX: ") #user enters 05 06 40 00 02 05 
```

我该怎么做那个 tx == 例子？

到目前为止我的代码：

```
import base64
import serial
import crcmod
import binascii

s_port = 'COM1'
b_rate = 2400

#method for reading incoming bytes on serial
def read_serial(ser):
    buf = ''
    while True:
        inp = ser.read(size=1) #read a byte
        buf = buf + inp #accumalate the response
        if '\xff' == inp: #if the incoming byte is 0xff
            print buf.encode("hex") # never here
            break
    return buf.encode("hex")   

#method to calc the checksum            
def calc_crc(hstr):
    crc16 = crcmod.predefined.mkCrcFun('crc-16')
    hstr = hstr.replace(' ','')
    data = base64.b16decode(hstr)
    chsum = hex(crc16(data))
    return chsum

#create a serial opening
ser = serial.Serial(
    port=s_port,
    baudrate=b_rate,
    timeout=0.1
)

while True:
    example = '\x05\x06\x40\x00\x02\x05\xF6\x5C' #last 2 bytes are CRC
    tx = raw_input("\nTX: ") #user enters 05 06 40 00 02 05
    crc = calc_crc(tx) #checksum is calculated as 0xf65c, correct
    tx = binascii.hexlify(tx.replace(' ', '')) #convert ascii string into hex as is but how???????????
    print tx  #gives me 303530363430303030323035
    cmd = tx + crc # concatenate tx and crc so the command is complete
    ser.write(cmd)
    rx = read_serial(ser)
    print "RX: " + str(rx) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:05:56.703

使用以下一个衬里，我得到 True `==example`：

```
''.join([chr(int(x,16)) for x in tx.split()]) 
```

长格式是：

按空格拆分输入，并通过迭代拆分的输入来创建一个列表，并将输入中的每个数字转换为相对于基数 16 的 int，并将生成的 int 转换为带有 chr 的相应字符。最后将字符列表连接到一个字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:44:41.763

尽管 OP 使用 Python 2.x，但**在 Python 3**中有一个内置方法`bytes.fromhex`可以做到这一点：

```
example = b'\x05\x06\x40\x00\x02\x05'
tx = input("\nTX: ")
result = bytes.fromhex(tx)
assert result == example 
```

# iphone - 在 iOS 6 中调整大小

> ID：12930606
> 
> 赞同：2
> 
> 时间：2012-10-17T08:57:36.220
> 
> 标签：iphone, objective-c, ios6

我是 iOS 开发的新手，我正在尝试实现一个可旋转和可调整大小的用户界面。我遇到的问题是在旋转时重新设置 UI 元素的位置。我什至无法让下面的简单代码正常工作：

```
- (NSUInteger)supportedInterfaceOrientations {
  return UIInterfaceOrientationMaskAllButUpsideDown;
}

- (BOOL)shouldAutorotate {
  return YES; 
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation               
                                duration:(NSTimeInterval)duration {
  [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
  if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
      toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {        
    self.button.frame = CGRectMake(502.0, 207.0, 73.0, 44.0);
  } else {  
    self.button.frame = CGRectMake(197.0, 69.0, 73.0, 44.0);
  }
} 
```

我已取消选择 Autoresize Subviews 选项；但是，按钮仍然在同一个位置结束。我已经记录了框架位置，它似乎具有正确的坐标，但绝对不会以这种方式结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:01:34.973

在实用程序检查的第一个面板中。取消选中使用自动布局。

![在此处输入图像描述](../Images/bbd9426b1e7436ad77d91fea582e58cd.png)

# mongodb - mongodb中商店和产品之类的数据库的最佳结构是什么？

> ID：12930610
> 
> 赞同：1
> 
> 时间：2012-10-17T08:57:57.877
> 
> 标签：mongodb, schema, database

我认为有两种类型的商店和产品结构，如数据库

**第一的**

```
 ShopSchema = new Schema({
     product_ids:[Schema.Types.ObjectId],
  })

   ProductSchema = new Schema({
     product_name:String,
  }) 
```

**第二**

```
 ShopSchema = new Schema({

  })

   ProductSchema = new Schema({
     shop_id:Schema.Types.ObjectId,
     product_name:String,
  }) 
```

与第二个解决方案相比，第一个解决方案有一个干净的产品集合，产品集合中的每个文档都有一个 shop_id 字段（我认为有点浪费空间），但是通过第一个结构获取所有产品可能会很痛苦，而第二个很容易。

所以我想知道哪个是最好的。还是你有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:08:11.530

对于大多数用例，第二个版本效率更高。非规范化是 NoSQL 持久性解决方案的游戏名称。目标是在尽可能少的查询中获得尽可能多的数据。这通常需要复制数据并处理在重复数据更改时必须更新大量文档的潜在麻烦。

例如，如果您希望在网页上显示该信息，您甚至可能必须将商店名称添加到产品文档中，因为如果您不这样做，您最终仍将不得不查询商店集合。考虑到商店名称不会改变这一事实，这应该相对来说不会让人头疼，但在设计架构时，您必须考虑这些事情。从您的用例开始，并在设计时按照您的方式进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:08:27.463

问自己以下问题：您是否应该能够在多家商店销售相同的产品？

如果答案是否定的，那么您可以认为这`shop_id`是 Shop 的属性，并且您提供的第二个选项应该是有效的解决方案。

如果答案是肯定的，那么您需要能够将产品映射到多个商店。如果您要使用第二种设计，您将需要多次复制产品对象，每个商店出售一次，这相当于您可以调用的新模式，例如`ProductInShop`。

请注意，您仍然有两个非常有效的选项来对此进行建模。您可以 1) 将`product_ids`属性添加到`ShopSchema`或 2) 将`shop_ids`属性添加到`ProductSchema`.

我猜想通过节省空间也意味着规范化数据。与关系数据库不同，在文档数据库中，您通常倾向于避免规范化，而是尽可能地去规范化。例如：在关系数据库中，您通常会将其添加为具有列`shop_id`和`product_id`. 在像 MongoDB 这样的文档数据库中，您通常应该更喜欢将尽可能多的嵌入到单个文档中以避免“文档连接”。

也只是关于猫鼬的注释。如果您想利用 Mongoose 的[populate](http://mongoosejs.com/docs/populate.html)，请另外提供对集合名称的显​​式引用。例如：

```
var ShopSchema = new Schema({
   product_ids: [{ type: Schema.Types.ObjectId, ref: 'Product' }]
}); 
```

通过这种方式，您可以使用 Mongoose 来“查找所有商店和每个商店出售的所有产品”：

```
Shop.find().populate('product_ids').exec(function (err, shops) {
    // ...
}); 
```

# sql - Joomla nBill 用户/客户名称查询

> ID：12930611
> 
> 赞同：0
> 
> 时间：2012-10-17T08:58:02.713
> 
> 标签：sql, joomla, inner-join

我正在尝试执行一个相当复杂的 SQL 查询，它已经超出了我的范围，我想我已经接近了，我的前额现在很痛，我举起双手寻求帮助。

```
<?php       
                                $db =& JFactory::getDBO();
                                $userid = "SELECT * FROM #__users  WHERE id='".$row->userid."' ";           
                                $db->setQuery
                                ("
                                select #__nbill_contact.user_id as userid, concat(#__nbill_entity.company_name, ' - ', #__nbill_contact.first_name, ' ',        
                                #__nbill_contact.last_name) as contact_entity from #__nbill_entity 
                                INNER JOIN  #__nbill_entity_contact on  #__nbill_entity.id = #__nbill_entity_contact.entity_id 
                                INNER JOIN  #__nbill_contact on #__nbill_entity_contact.contact_id = #__nbill_contact.id and #__nbill_contact.user_id > 0"
                                );
                                $user_type_detail = $db->loadAssoc();
                                ech $user_tpe_detail["contact_entity"]
                            ;?> 
```

提前致谢！

# joomla - 检查当前访问者是否登录到 Joomla 的后端

> ID：12930612
> 
> 赞同：0
> 
> 时间：2012-10-17T08:58:04.787
> 
> 标签：joomla, joomla2.5

当我登录到后端时，我想阻止 Joomla 包含 Google Analytics 的跟踪代码。为此，我试图确定正在浏览该网站的用户当前是否也登录到了 Joomla 的后端。问题是 - 当我使用`JUser::getAuthorisedGroups()`or之类的方法时`JUser::getAuthorisedViewLevels()`，Joomla 的前端仍然将我识别为未注册的客人。

我知道 Joomla 为后端和前端保留了有关当前用户的单独信息。但是有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:38:29.720

Logging in to the admin and viewing the front end both start independent sessions that are not related so using getUser() is only going to return the info for the current session.

Luckily, there are a couple of options. First, you can block your IP from being tracked in GA. Second, you can log in to the front end, then use a plugin to filter out logged in admin users.

# android - 杀死在服务中运行音频文件的线程

> ID：12930617
> 
> 赞同：0
> 
> 时间：2012-10-17T08:58:37.830
> 
> 标签：android, multithreading, service, kill

在 Android 中，我正在运行一个产生线程的服务。该线程播放一个波形音频文件。一旦完成音频文件，我想杀死（销毁）该服务。所以我为此写了以下代码片段

```
Thread  tr = new Thread() {
@Override
 public void run() {

    File path = android.os.Environment.getExternalStorageDirectory();
    try{
    mp.setDataSource(path + "/AudioRecorder/123.wav");
    mp.prepare();
    }
    catch (Exception e){}
    mp.start();
    mp.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
        stopSelf();
        }
    });
}
}   ;
tr.start();
        } 
```

请注意，一旦音频文件完成，我编写了*stopself()来终止服务。*我的问题是我是否也需要杀死线程？或者一旦我调用 stopself() 就会自动终止？如果没有，是否有必要杀死这个线程，我该怎么做？我应该在哪里添加它？

# android - 从 AIR 切换到 android 活动后，视频没有关闭

> ID：12930618
> 
> 赞同：0
> 
> 时间：2012-10-17T08:58:37.707
> 
> 标签：android, sockets, service, air

这个问题我长期面临。所以需要同样的帮助。场景是在浏览了一些页面后，我在其中一个活动中有一个按钮。单击该按钮时，我必须启动一个 AIR 应用程序。为了向 AIR 发送数据，我在服务中使用了套接字连接。因此，单击该按钮我将启动服务以及 AIR。在 AIR 应用程序中将播放一个视频。但是当我回来时，AIR 应用程序将被关闭。但问题是从 AIR 回来后视频没有关闭。视频仍在后台运行。我也在 AIR 中关闭了服务中的套接字连接，但仍然是同样的问题。请建议我它的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:45:59.450

我找到了解决方案，并将其发布给其他人参考。我通过共享首选项管理标志，并通过使用它解决了这个问题。

# android - Galaxy S3 上的 HLS 流式传输

> ID：12930619
> 
> 赞同：3
> 
> 时间：2012-10-17T08:58:39.967
> 
> 标签：android, http-live-streaming, galaxy

我们正在为具有自适应比特率支持的 Android 设备开发音乐流媒体应用程序。我们使用 Wowza 作为流媒体服务器，它将使用 HLS 流式传输歌曲。我们已将每首歌曲转换为四种比特率，并创建了在 HLS URL 中引用的 smil 文件。所以基本上最终的 URL 看起来像这样。

[http://streaming.server.name:1935/vod/smil:audiofile.smil/playlist.m3u8](http://streaming.server.name:1935/vod/smil:audiofile.smil/playlist.m3u8)。

我们已经在包括 Galaxy S2、Galaxy Note I、Sony Experia、Google Nexus 等多个 Android 设备（Android 4.0 或更高版本）上测试了该应用程序。在所有这些设备上，除了 Galaxy S3 之外，歌曲都在流式传输。在 Galaxy S3 上，歌曲开始播放直到 6 秒。之后，歌曲循环播放并一次又一次地播放 6 秒部分。

当通过浏览器访问上述 URL 时，会观察到相同的行为。

我们已尝试检查 wowza 日志，但未报告任何错误。

有没有人在 S3 设备上尝试过这样的事情。任何有关如何调试此问题的指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T08:10:17.790

Android 文档声明（虽然不够清楚）TS 容器格式仅支持 AAC 音频。您正在尝试使用包含 MP3 音频数据（iOS 支持）的 TS 片段播放 HLS。

我可以分享一个观察结果，即这样做在大多数 Android 设备上都有效，但并非在所有设备上都有效。S-III就是一个例子。

请参阅文档中的[Android 支持的媒体格式部分](http://developer.android.com/guide/appendix/media-formats.html)。

# sql - 从一个表中选择所有内容，从另一个表中选择数组

> ID：12930621
> 
> 赞同：0
> 
> 时间：2012-10-17T08:58:43.197
> 
> 标签：sql, join

我有一张包含大量数据的表，我想从这张表中选择所有内容。

另一个表包含不同的状态码（字段`ID`和`text`），我想将此表加入第一个表，所以我得到类似

来自第一个表`id1,text2,id2,text2`或`id1,id2,text1,text2`第二个表的所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:02:19.900

利用`LEFT OUTER JOIN`

```
Select T1.*,T2.ID,T2.Text
from firstTable t1
LEFT OUTER JOIN SecondTable T2
on T1.<col>=T2.<col> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:10:19.480

无论是**左/右/内连接，您都可以像这样使用连接**

```
SELECT t1.*,t2.id,t2.text
FROM table1 t1
LEFT JOIN table2 t2
ON t2.column_name=t1.column_name 
```

# java - 日历仅验证月份和日期

> ID：12930625
> 
> 赞同：1
> 
> 时间：2012-10-17T08:58:56.220
> 
> 标签：java, swing, date, calendar

我有一个操作按钮，应该在登录期间检查应用程序的过期日期：

```
public void actionPerformed(ActionEvent ae) {
  Calendar expiredate = Calendar.getInstance();
  expiredate.set(2012, 10, 10);
  if (ae.getSource() == button) {
    char[] temp_pwd = t_pass.getPassword();
    String pwd = null;
    pwd = String.copyValueOf(temp_pwd);

    if (db.checkLogin(t_name.getText(), pwd)) {
      try {
        if (Calendar.getInstance().after(expiredate)) {
          JOptionPane.showMessageDialog(null, "License has Expired\n Please Re-new the License from the Provider", "Re-new License", JOptionPane.ERROR_MESSAGE);
          t_name.setText("");
          t_pass.setText("");
          t_name.requestFocus();
          return;
        }
        JOptionPane.showMessageDialog(null, "You have logged in successfully. Click OK to Continue", "Success",
        JOptionPane.INFORMATION_MESSAGE);
        MainFrame page = new MainFrame();
        page.setVisible(true);
        setVisible(false);
      } catch(Exception ai){
        JOptionPane.showMessageDialog(null, ai, "Exception",
        JOptionPane.INFORMATION_MESSAGE);
      }
    } else {
      JOptionPane.showMessageDialog(null, "Login failed!\nWrong Username or password", "Failed!!",
      JOptionPane.ERROR_MESSAGE);
      t_name.setText("");
      t_pass.setText("");
      t_name.requestFocus();
      return;
    }
  }//if
}//method 
```

问题是系统日期是 2012 年 10 月 17 日。显然登录仍然发生。但是当我将 2012 更改为 2011 作为到期日期时，就会发生许可证验证。系统忽略 2012 年 10 月 10 日日期可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T09:04:06.033

月份常数`10`为 11 月。`NOVEMBER = 10`所以你将月份设置为 11 月。

你应该使用

```
expiredate.set(2012, Calendar.OCTOBER, 10); 
```

[始终使用Calendar](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)中提供的月份常量进行此类使用，因为月份从`0`java 中开始。所以它避免了混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:06:21.367

问题是，日历的月份值是从 0 开始的。这意味着，您的过期日期是 11 月 10 日。

10 月 10 日将是：

```
expiredate.set(2012, 9 , 10); 
```

希望这有帮助

# html - 站点地图 XML 格式：新文章应该在文件的开头吗？

> ID：12930626
> 
> 赞同：1
> 
> 时间：2012-10-17T08:59:02.660
> 
> 标签：html, xml, sitemap

sitemap.xml 中的新文章应该在文件的开头还是结尾？[在http://www.sitemaps.org](http://www.sitemaps.org)上找不到此信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:03:01.337

站点地图不是 RSS 提要，新项目可以纯粹从它们的属性中区分出来。站点地图就是它所说的。没有什么可以阻止您选择自己的订单，但您不知道客户端程序将如何处理数据。

# r - 有没有一种简单的方法可以在 R 中获取子字符串？

> ID：12930630
> 
> 赞同：1
> 
> 时间：2012-10-17T08:59:13.367
> 
> 标签：r

我通过以下方式获取单词的子字符串：

```
 word="xyz9874"
 pattern="[0-9]+"
 x=gregexpr(pattern,word)
 substr(word,start=x[[1]],stop=x[[1]]+attr(x[[1]],"match.length")-1)
[1] "9874" 
```

有没有更简单的方法可以在 R 中得到结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:03:12.007

当然，使用`gsub`和反向引用：

```
gsub( ".*?([0-9]+).*", "\\1", word ) 
```

说明：在大多数正则表达式实现中，`\1`是对匹配的第一个子模式的反向引用。子模式用括号括起来。在 R 中，无论您使用的引号类型如何，您都需要转义反斜杠。

问号是“扩展”正则表达式的一个习惯用法，意味着给定的正则表达式模式不应该是贪婪的，换句话说——它应该尽可能少地占用字符串。否则，`.*`模式中的`.*([0-9]+)`将匹配`xyz987`并且`([0-9]+)`将匹配`4`。或者，我们可以写

```
gsub( ".*[^0-9]+([0-9]+).*", "\\1", word ) 
```

但是我们遇到了以数字开头的字符串的问题。

顺便说一句，请注意，`[0-9]`您可以写`\d`，或者，实际上，`\\d`：

```
gsub( ".*?(\\d+).*", "\\1", word ) 
```

# c# - WPF ColumnDataPoint 注解部分可见

> ID：12930633
> 
> 赞同：0
> 
> 时间：2012-10-17T08:59:21.307
> 
> 标签：c#, .net, wpf, wpftoolkit, data-visualization

我的应用程序中有列系列图表。我正在使用本教程中的解决方案在列顶部添加注释：

[http://blogs.msdn.com/b/delay/archive/2009/07/27/simple-column-labels-you-can-create-at-home-re-templating-the-silverlight-wpf-data-可视化-columndatapoint-to-add-annotations.aspx](http://blogs.msdn.com/b/delay/archive/2009/07/27/simple-column-labels-you-can-create-at-home-re-templating-the-silverlight-wpf-data-visualization-columndatapoint-to-add-annotations.aspx)

当条形非常高时，注释的顶部仅部分可见或不可见。

![在此处输入图像描述](../Images/6d62a418def883085501c871ae05fc99.png)

我不知道我的数据范围，所以我不能在垂直轴上设置最大值。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:36:50.103

就像安德烈说的，问题是你的保证金，所以你可以使用多重绑定来计算保证金，如下所示：

```
<ControlTemplate TargetType="charting:ColumnDataPoint">
      <Grid>
          <Rectangle Name="clmnRectangle"
                     Fill="{TemplateBinding Background}"
                     Stroke="Black"/>
          <Grid Background="#aaffffff"
                HorizontalAlignment="Center"
                VerticalAlignment="Top">
              <Grid.Margin>
                  <MultiBinding Converter="{StaticResource ResourceKey=HeightToMargin}">
                       <Binding Path="ActualHeight" RelativeSource="{RelativeSource AncestorType={x:Type charting:ColumnDataPoint}}"></Binding>
                       <Binding Path="ActualHeight" RelativeSource="{RelativeSource AncestorType={x:Type charting:ColumnSeries}}"></Binding>
                  </MultiBinding>
              </Grid.Margin>
              <TextBlock Name="tbValue"
                                    Text="{TemplateBinding FormattedDependentValue}"
                                    FontWeight="Bold"
                                    Margin="2"/>
         </Grid>
    </Grid>
</ControlTemplate> 
```

转换器可能如下所示：

```
public class HeightToMarginConverter:IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo ci)
    {
        double clmnHeight = System.Convert.ToDouble(values[0]);
        double chrtHeight = System.Convert.ToDouble(values[1]);
        if (chrtHeight - clmnHeight < 20)
        {
            return new Thickness(0, clmnHeight - chrtHeight + 5, 0, 0);
        }
        else
        {
            return new Thickness(0, -20, 0, 0);
        }
    }

    public object[] ConvertBack(object value, Type[] targetType, object parameter, CultureInfo ci)
    {
        return null;
    }
} 
```

# asp.net-mvc - 在 ASP.NET MVC 4 中，如何验证是否以正确的格式输入了 DateTime 值？

> ID：12930640
> 
> 赞同：2
> 
> 时间：2012-10-17T08:59:28.983
> 
> 标签：asp.net-mvc, datetime, asp.net-mvc-4, validation

在我们的 ASP.NET MVC 4 应用程序中，其中一个模型具有 DateTime 类型的字段。通过表单编辑此类模型对象时，DateTime 字段的值必须为非空且格式为`yyyy-MM-dd H:mm:ss`（例如，2012-10-17 10:49:00）。如何确保在应用程序中正确验证此字段？我尝试了以下注释：

```
[System.ComponentModel.DataAnnotations.Required]
[System.ComponentModel.DataAnnotations.DisplayFormat(DataFormatString="yyyy-MM-dd H:mm:ss",
        ApplyFormatInEditMode=true)] 
```

但是，表单数据的验证并不需要格式的所有组件都存在。例如，接受值“2012-10-17”（省略“H:mm:ss”部分）。刚刚验证该字段包含有效的 DateTime 字符串。

我应该如何确保这个 DateTime 字段确实是我指定的格式（yyyy-MM-dd H:mm:ss）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:00:01.393

## 替代解决方案 - 仅查看模型类

Darin 的解决方案当然是有效的，但它不是您唯一可以使用的解决方案。它需要您编写比我将在此处向您展示的解决方案更复杂的代码。

所以这是一个替代方案。我建议您不要创建自定义模型绑定器，而是创建一个单独的视图模型类，而不是`DateTime`采用`string`您可以根据需要设置为复杂验证正则表达式的位置。然后有一个方法可以将其转换为您的应用程序/域模型类实例（并返回）。

```
// suppose this app model
public class User
{
    [Required]
    public string Name { get; set; }

    [Required]
    public DateTime DateOfBirth { get; set; }
}

public class ViewUser
{
    [Required]
    public string Name { get; set; }

    [Required]
    [RegularExpression("\d{4}-\d{2}-\d{2}(?:\s\d{1,2}:\d{2}:\d{2})?")]
    public string DateOfBirth { get; set; }

    public ViewUser(User user)
    {
        this.Name = user.Name;
        this.DateOfBirth = user.DateOfBirth.ToString("yyyy-MM-dd H:mm:ss");
    }

    public User ToPoco()
    {
        return new User {
            Name = this.Name,
            DateOfBirth = DateTime.Parse(this.DateOfBirth, "yyyy-MM-dd H:mm:ss")
        };
    }
} 
```

通过一些调整，您可以`ViewUser`从`User`类继承并使用`new`关键字 on`DateOfBirth`并使用`base`属性来存储正确的类型值。在这种情况下，您将不需要该`ToPoco`方法。

> ***注意：**您将不得不使用`DateTime.TryParseExact`方法来解析您的日期，因为它们可能包含时间，也可能不包含时间。我没有在我的代码中包含它，因为它取决于您的日期输入的确切要求。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:27:02.457

您可以编写一个自定义模型绑定器，它将使用您在 DisplayFormat 属性中指定的确切格式。我已经展示了如何在[`this post`](https://stackoverflow.com/a/7836093/29407).

也不要误以为 DisplayFormat 属性会覆盖 Required 属性。DisplayFormat 仅用于显示输入字段中的字段。**它不是验证属性**。它与验证完全无关，当表单被发布到服务器时，它永远不会被使用。

# jquery - 没有表单元素的jquery ajax POST

> ID：12930646
> 
> 赞同：4
> 
> 时间：2012-10-17T09:00:12.997
> 
> 标签：jquery, ajax

我需要发布数据，网址只是“v1/wave”，它需要五个参数。我试过这个，但到目前为止它不起作用：

```
function request(minLat, minLon, maxLat, maxLon, maxNrOfResults, callback){

$.ajax({

        url: 'v1/wave?minLat='+minLat+'&minLong='+minLon+'&maxLat='+maxLat+'&maxLong='+maxLong'+&maxNrOfResults='+maxNrOfResults,
        type: "GET",
        success: function (data) {
            callback(data);
            if(data.msgCode == LOGIN_SUCCESS){
                console.log("request success");

            } else if(data.msgCode == LOGIN_FAILED){
                console.log("request failed");
            }
        },
        error: function(data) {
            handleRequestError(data);
        }
    }) 
```

错误：未捕获的 SyntaxError：url 行中的意外字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T09:12:17.330

您应该避免在 url 中发送参数。您应该使用该`data`属性。有几个优点，包括编码..或拼写错误:)

```
function request(minLat, minLon, maxLat, maxLon, maxNrOfResults, callback){    
$.ajax({
            url: 'v1/wave',
            data: { minLat : minLat, minLong : minLong, maxLat : maxLat, maxLong : maxLong,  maxNrOfResults : maxNrOfResults },
            type: "POST",
            success: function (data) {
                callback(data);
                if(data.msgCode == LOGIN_SUCCESS){
                    console.log("request success");   
                } else if(data.msgCode == LOGIN_FAILED){
                    console.log("request failed");
                }
            },
            error: function(data) {
                handleRequestError(data);
            }
        }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:02:23.723

这里有一个错字：`'&maxLong='+maxLong'+`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:09:39.103

试试下面

如果您想发布数据，您可以将数据从查询字符串移动到发布数据以更安全。也使用 ajax 类型**的 POST**

```
var myPostData=JSON.stringify({'minLat':minLat,'minLong':minLon, etc});

$.ajax({

    url: 'v1/wave',

    type: "POST",
    data:myPostData,
    dataType: "json",
    success: function (data) {
        callback(data);
        if(data.msgCode == LOGIN_SUCCESS){
            console.log("request success");

        } else if(data.msgCode == LOGIN_FAILED){
            console.log("request failed");
        }
    },
    error: function(data) {
        handleRequestError(data);
    }
}) 
```

# android - android 示例蓝牙聊天到串行蓝牙适配器（rs232）通信

> ID：12930648
> 
> 赞同：2
> 
> 时间：2012-10-17T09:00:27.203
> 
> 标签：android, spp

我正在尝试与**来自 * *android 示例蓝牙聊天应用程序的串行蓝牙适配器进行交流。****. 我已将 UUID 更改为：“00001101-0000-1000-8000-00805F9B34FB”
但即便如此它说“无法连接”我使用的是**2.3.3 android 设备**和 L* *M048 蓝牙串行适配器**

**代码与谷歌提供的相同示例蓝牙聊天想知道必须对该代码进行更改才能使用 HYperterminal 上的 COM1 端口与 LM048 蓝牙串行适配器通信**

蓝牙聊天.java

```
 import android.annotation.SuppressLint;

  public class BluetoothChat extends Activity {
// Debugging
private static final String TAG = "BluetoothChat";
private static final boolean D = true;

// Message types sent from the BluetoothChatService Handler
public static final int MESSAGE_STATE_CHANGE = 1;
public static final int MESSAGE_READ = 2;
public static final int MESSAGE_WRITE = 3;
public static final int MESSAGE_DEVICE_NAME = 4;
public static final int MESSAGE_TOAST = 5;

// Key names received from the BluetoothChatService Handler
public static final String DEVICE_NAME = "device_name";
public static final String TOAST = "toast";

// Intent request codes
private static final int REQUEST_CONNECT_DEVICE_SECURE = 1;
private static final int REQUEST_CONNECT_DEVICE_INSECURE = 2;
private static final int REQUEST_ENABLE_BT = 3;

// Layout Views
private TextView mTitle;
private ListView mConversationView;
private EditText mOutEditText;
private Button mSendButton;

// Name of the connected device
private String mConnectedDeviceName = null;
// Array adapter for the conversation thread
private ArrayAdapter<String> mConversationArrayAdapter;
// String buffer for outgoing messages
private StringBuffer mOutStringBuffer;
// Local Bluetooth adapter
private BluetoothAdapter mBluetoothAdapter = null;
// Member object for the chat services
private BluetoothChatService mChatService = null;

@SuppressLint("NewApi")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(D) Log.e(TAG, "+++ ON CREATE +++");

    // Set up the window layout
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

    // Set up the custom title
    mTitle = (TextView) findViewById(R.id.title_left_text);
    mTitle.setText(R.string.app_name);
    mTitle = (TextView) findViewById(R.id.title_right_text);

    // Get local Bluetooth adapter
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    // If the adapter is null, then Bluetooth is not supported
    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
        finish();
        return;
    }
}

@SuppressLint("NewApi")
@Override
public void onStart() {
    super.onStart();
    if(D) Log.e(TAG, "++ ON START ++");

    // If BT is not on, request that it be enabled.
    // setupChat() will then be called during onActivityResult
    if (!mBluetoothAdapter.isEnabled()) {
        Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
    // Otherwise, setup the chat session
    } else {
        if (mChatService == null) setupChat();
    }
}

@Override
public synchronized void onResume() {
    super.onResume();
    if(D) Log.e(TAG, "+ ON RESUME +");

    if (mChatService != null) {
        // Only if the state is STATE_NONE, do we know that we haven't started already
        if (mChatService.getState() == BluetoothChatService.STATE_NONE) {
          // Start the Bluetooth chat services
          mChatService.start();
        }
    }
}

@SuppressLint("NewApi")
private void setupChat() {
    Log.d(TAG, "setupChat()");

    // Initialize the array adapter for the conversation thread
    mConversationArrayAdapter = new ArrayAdapter<String>(this, R.layout.message);
    mConversationView = (ListView) findViewById(R.id.in);
    mConversationView.setAdapter(mConversationArrayAdapter);

    // Initialize the compose field with a listener for the return key
    mOutEditText = (EditText) findViewById(R.id.edit_text_out);
    mOutEditText.setOnEditorActionListener(mWriteListener);

    // Initialize the send button with a listener that for click events
    mSendButton = (Button) findViewById(R.id.button_send);
    mSendButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // Send a message using content of the edit text widget
            TextView view = (TextView) findViewById(R.id.edit_text_out);
            String message = view.getText().toString();
            sendMessage(message);
        }
    });

    // Initialize the BluetoothChatService to perform bluetooth connections
    mChatService = new BluetoothChatService(this, mHandler);

    // Initialize the buffer for outgoing messages
    mOutStringBuffer = new StringBuffer("");
}

@Override
public synchronized void onPause() {
    super.onPause();
    if(D) Log.e(TAG, "- ON PAUSE -");
}

@Override
public void onStop() {
    super.onStop();
    if(D) Log.e(TAG, "-- ON STOP --");
}

@Override
public void onDestroy() {
    super.onDestroy();
    // Stop the Bluetooth chat services
    if (mChatService != null) mChatService.stop();
    if(D) Log.e(TAG, "--- ON DESTROY ---");
}

@SuppressLint("NewApi")
private void ensureDiscoverable() {
    if(D) Log.d(TAG, "ensure discoverable");
    if (mBluetoothAdapter.getScanMode() !=
        BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
        Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
        startActivity(discoverableIntent);
    }
}

private void sendMessage(String message) {
    // Check that we're actually connected before trying anything
    if (mChatService.getState() != BluetoothChatService.STATE_CONNECTED) {
        Toast.makeText(this, R.string.not_connected, Toast.LENGTH_SHORT).show();
        return;
    }

    // Check that there's actually something to send
    if (message.length() > 0) {
        // Get the message bytes and tell the BluetoothChatService to write
        byte[] send = message.getBytes();
        mChatService.write(send);

        // Reset out string buffer to zero and clear the edit text field
        mOutStringBuffer.setLength(0);
        mOutEditText.setText(mOutStringBuffer);
    }
}

// The action listener for the EditText widget, to listen for the return key
private TextView.OnEditorActionListener mWriteListener =
    new TextView.OnEditorActionListener() {
    @SuppressLint("HandlerLeak")
    public boolean onEditorAction(TextView view, int actionId, KeyEvent event) {
        // If the action is a key-up event on the return key, send the message
        if (actionId == EditorInfo.IME_NULL && event.getAction() == KeyEvent.ACTION_UP) {
            String message = view.getText().toString();
            sendMessage(message);
        }
        if(D) Log.i(TAG, "END onEditorAction");
        return true;
    }
};

// The Handler that gets information back from the BluetoothChatService
@SuppressLint("HandlerLeak")
private final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MESSAGE_STATE_CHANGE:
            if(D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
            switch (msg.arg1) {
            case BluetoothChatService.STATE_CONNECTED:
                mTitle.setText(R.string.title_connected_to);
                mTitle.append(mConnectedDeviceName);
                mConversationArrayAdapter.clear();
                break;
            case BluetoothChatService.STATE_CONNECTING:
                mTitle.setText(R.string.title_connecting);
                break;
            case BluetoothChatService.STATE_LISTEN:
            case BluetoothChatService.STATE_NONE:
                mTitle.setText(R.string.title_not_connected);
                break;
            }
            break;
        case MESSAGE_WRITE:
            byte[] writeBuf = (byte[]) msg.obj;
            // construct a string from the buffer
            String writeMessage = new String(writeBuf);
            mConversationArrayAdapter.add("Me:  " + writeMessage);
            break;
        case MESSAGE_READ:
            byte[] readBuf = (byte[]) msg.obj;
            // construct a string from the valid bytes in the buffer
            String readMessage = new String(readBuf, 0, msg.arg1);
            mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
            break;
        case MESSAGE_DEVICE_NAME:
            // save the connected device's name
            mConnectedDeviceName = msg.getData().getString(DEVICE_NAME);
            Toast.makeText(getApplicationContext(), "Connected to "
                           + mConnectedDeviceName, Toast.LENGTH_SHORT).show();
            break;
        case MESSAGE_TOAST:
            Toast.makeText(getApplicationContext(), msg.getData().getString(TOAST),
                           Toast.LENGTH_SHORT).show();
            break;
        }
    }
};

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(D) Log.d(TAG, "onActivityResult " + resultCode);
    switch (requestCode) {
    case REQUEST_CONNECT_DEVICE_SECURE:
        // When DeviceListActivity returns with a device to connect
        if (resultCode == Activity.RESULT_OK) {
            connectDevice(data, true);
        }
        break;
    case REQUEST_CONNECT_DEVICE_INSECURE:
        // When DeviceListActivity returns with a device to connect
        if (resultCode == Activity.RESULT_OK) {
            connectDevice(data, false);
        }
        break;
    case REQUEST_ENABLE_BT:
        // When the request to enable Bluetooth returns
        if (resultCode == Activity.RESULT_OK) {
            // Bluetooth is now enabled, so set up a chat session
            setupChat();
        } else {
            // User did not enable Bluetooth or an error occured
            Log.d(TAG, "BT not enabled");
            Toast.makeText(this, R.string.bt_not_enabled_leaving, Toast.LENGTH_SHORT).show();
            finish();
        }
    }
}

@SuppressLint({ "NewApi", "NewApi" })
private void connectDevice(Intent data, boolean secure) {
    // Get the device MAC address
    String address = data.getExtras()
        .getString(DeviceListActivity.EXTRA_DEVICE_ADDRESS);
    // Get the BLuetoothDevice object
    BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
    // Attempt to connect to the device
    mChatService.connect(device, secure);
}

}

} 
```

}

蓝牙聊天服务.java

```
 import java.io.IOException;

      @SuppressLint("NewApi")
      public class BluetoothChatService {
       // Debugging
       private static final String TAG = "BluetoothChatService";
        private static final boolean D = true;

// Name for the SDP record when creating server socket
private static final String NAME_SECURE = "BluetoothChatSecure";
private static final String NAME_INSECURE = "BluetoothChatInsecure";

// Unique UUID for this application
private static final UUID MY_UUID_SECURE =
    UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
private static final UUID MY_UUID_INSECURE =
        UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

// Member fields
private final BluetoothAdapter mAdapter;
private final Handler mHandler;
private AcceptThread mSecureAcceptThread;
private AcceptThread mInsecureAcceptThread;
private ConnectThread mConnectThread;
private ConnectedThread mConnectedThread;
private int mState;

// Constants that indicate the current connection state
public static final int STATE_NONE = 0;       // we're doing nothing
public static final int STATE_LISTEN = 1;     // now listening for incoming connections
public static final int STATE_CONNECTING = 2; // now initiating an outgoing connection
public static final int STATE_CONNECTED = 3;  // now connected to a remote device

@SuppressLint("NewApi")
public BluetoothChatService(Context context, Handler handler) {
    mAdapter = BluetoothAdapter.getDefaultAdapter();
    mState = STATE_NONE;
    mHandler = handler;
}

private synchronized void setState(int state) {
    if (D) Log.d(TAG, "setState() " + mState + " -> " + state);
    mState = state;

    // Give the new state to the Handler so the UI Activity can update
    mHandler.obtainMessage(BluetoothChat.MESSAGE_STATE_CHANGE, state, -1).sendToTarget();
}

/**
 * Return the current connection state. */
public synchronized int getState() {
    return mState;
}

public synchronized void start() {
    if (D) Log.d(TAG, "start");

    // Cancel any thread attempting to make a connection
    if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    setState(STATE_LISTEN);

    // Start the thread to listen on a BluetoothServerSocket
    if (mSecureAcceptThread == null) {
        mSecureAcceptThread = new AcceptThread(true);
        mSecureAcceptThread.start();
    }
    if (mInsecureAcceptThread == null) {
        mInsecureAcceptThread = new AcceptThread(false);
        mInsecureAcceptThread.start();
    }
}

@SuppressLint("NewApi")
public synchronized void connect(BluetoothDevice device, boolean secure) {
    if (D) Log.d(TAG, "connect to: " + device);

    // Cancel any thread attempting to make a connection
    if (mState == STATE_CONNECTING) {
        if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    // Start the thread to connect with the given device
    mConnectThread = new ConnectThread(device, secure);
    mConnectThread.start();
    setState(STATE_CONNECTING);
}

@SuppressLint({ "NewApi", "NewApi", "NewApi", "NewApi" })
public synchronized void connected(BluetoothSocket socket, BluetoothDevice
        device, final String socketType) {
    if (D) Log.d(TAG, "connected, Socket Type:" + socketType);

    // Cancel the thread that completed the connection
    if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    // Cancel the accept thread because we only want to connect to one device
    if (mSecureAcceptThread != null) {
        mSecureAcceptThread.cancel();
        mSecureAcceptThread = null;
    }
    if (mInsecureAcceptThread != null) {
        mInsecureAcceptThread.cancel();
        mInsecureAcceptThread = null;
    }

    // Start the thread to manage the connection and perform transmissions
    mConnectedThread = new ConnectedThread(socket, socketType);
    mConnectedThread.start();

    // Send the name of the connected device back to the UI Activity
    Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_DEVICE_NAME);
    Bundle bundle = new Bundle();
    bundle.putString(BluetoothChat.DEVICE_NAME, device.getName());
    msg.setData(bundle);
    mHandler.sendMessage(msg);

    setState(STATE_CONNECTED);
}

public synchronized void stop() {
    if (D) Log.d(TAG, "stop");

    if (mConnectThread != null) {
        mConnectThread.cancel();
        mConnectThread = null;
    }

    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }

    if (mSecureAcceptThread != null) {
        mSecureAcceptThread.cancel();
        mSecureAcceptThread = null;
    }

    if (mInsecureAcceptThread != null) {
        mInsecureAcceptThread.cancel();
        mInsecureAcceptThread = null;
    }
    setState(STATE_NONE);
}

public void write(byte[] out) {
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED) return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.write(out);
}

private void connectionFailed() {
    // Send a failure message back to the Activity
    Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(BluetoothChat.TOAST, "Unable to connect device");
    msg.setData(bundle);
    mHandler.sendMessage(msg);

    // Start the service over to restart listening mode
    BluetoothChatService.this.start();
}

private void connectionLost() {
    // Send a failure message back to the Activity
    Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(BluetoothChat.TOAST, "Device connection was lost");
    msg.setData(bundle);
    mHandler.sendMessage(msg);

    // Start the service over to restart listening mode
    BluetoothChatService.this.start();
}

private class AcceptThread extends Thread {
    // The local server socket
    private final BluetoothServerSocket mmServerSocket;
    private String mSocketType;

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    public AcceptThread(boolean secure) {
        BluetoothServerSocket tmp = null;
        mSocketType = secure ? "Secure":"Insecure";

        // Create a new listening server socket
        try {
            if (secure) {
                tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE,
                    MY_UUID_SECURE);
            } else {
                tmp = mAdapter.listenUsingInsecureRfcommWithServiceRecord(
                        NAME_INSECURE, MY_UUID_INSECURE);
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "listen() failed", e);
        }
        mmServerSocket = tmp;
    }

    @SuppressLint({ "NewApi", "NewApi", "NewApi", "NewApi", "NewApi" })
    public void run() {
        if (D) Log.d(TAG, "Socket Type: " + mSocketType +
                "BEGIN mAcceptThread" + this);
        setName("AcceptThread" + mSocketType);

        BluetoothSocket socket = null;

        // Listen to the server socket if we're not connected
        while (mState != STATE_CONNECTED) {
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception
                socket = mmServerSocket.accept();
            } catch (IOException e) {
                Log.e(TAG, "Socket Type: " + mSocketType + "accept() failed", e);
                break;
            }

            // If a connection was accepted
            if (socket != null) {
                synchronized (BluetoothChatService.this) {
                    switch (mState) {
                    case STATE_LISTEN:
                    case STATE_CONNECTING:
                        // Situation normal. Start the connected thread.
                        connected(socket, socket.getRemoteDevice(),
                                mSocketType);
                        break;
                    case STATE_NONE:
                    case STATE_CONNECTED:
                        // Either not ready or already connected. Terminate new socket.
                        try {
                            socket.close();
                        } catch (IOException e) {
                            Log.e(TAG, "Could not close unwanted socket", e);
                        }
                        break;
                    }
                }
            }
        }
        if (D) Log.i(TAG, "END mAcceptThread, socket Type: " + mSocketType);

    }

    @SuppressLint("NewApi")
    public void cancel() {
        if (D) Log.d(TAG, "Socket Type" + mSocketType + "cancel " + this);
        try {
            mmServerSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "Socket Type" + mSocketType + "close() of server failed", e);
        }
    }
}

/
@SuppressLint({ "NewApi", "NewApi" })
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;
    private String mSocketType;

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    public ConnectThread(BluetoothDevice device, boolean secure) {

        mmDevice = device;

        BluetoothSocket tmp = null;
        mSocketType = secure ? "Secure" : "Insecure";

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
            if (secure) {
                tmp = device.createRfcommSocketToServiceRecord(
                        MY_UUID_SECURE);
            } else {
                tmp = device.createInsecureRfcommSocketToServiceRecord(
                        MY_UUID_INSECURE);
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "create() failed", e);
        }
        mmSocket = tmp;
    }

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    public void run() {
        Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() " + mSocketType +
                        " socket during connection failure", e2);
            }
            connectionFailed();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothChatService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice, mSocketType);
    }

    @SuppressLint("NewApi")
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect " + mSocketType + " socket failed", e);
        }
    }
}

@SuppressLint("NewApi")
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    @SuppressLint({ "NewApi", "NewApi" })
    public ConnectedThread(BluetoothSocket socket, String socketType) {
        Log.d(TAG, "create ConnectedThread: " + socketType);
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                break;
            }
        }
    }

    public void write(byte[] buffer) {
        try {
            mmOutStream.write(buffer);

            // Share the sent message back to the UI Activity
            mHandler.obtainMessage(BluetoothChat.MESSAGE_WRITE, -1, -1, buffer)
                    .sendToTarget();
        } catch (IOException e) {
            Log.e(TAG, "Exception during write", e);
        }
    }

    @SuppressLint("NewApi")
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }
} 
```

}

**堆栈流**

```
10-17 16:31:32.500: E/BluetoothChat(2942): +++ ON CREATE +++
10-17 16:31:32.590: E/BluetoothChat(2942): ++ ON START ++
10-17 16:31:32.590: E/BluetoothChat(2942): + ON RESUME +
10-17 16:31:32.610: E/BluetoothChat(2942): - ON PAUSE -
10-17 16:31:41.450: D/BluetoothChat(2942): onActivityResult -1
10-17 16:31:41.450: D/BluetoothChat(2942): setupChat()
10-17 16:31:41.460: E/BluetoothChat(2942): + ON RESUME +
10-17 16:31:41.470: D/BluetoothChatService(2942): start
10-17 16:31:41.470: D/BluetoothChatService(2942): setState() 0 -> 1
10-17 16:31:41.590: D/BluetoothChatService(2942): Socket Type : SecureBEGINmAcceptThreadThread[Thread-10,5,main]
10-17 16:31:41.630: I/BluetoothChat(2942): MESSAGE_STATE_CHANGE: 1
 10-17 16:31:41.630: D/BluetoothChatService(2942): Socket Type: InsecureBEGIN mAcceptThreadThread[Thread-11,5,main]
 10-17 16:31:51.779: W/KeyCharacterMap(2942): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
 10-17 16:31:52.590: E/BluetoothChat(2942): - ON PAUSE -
 10-17 16:31:52.670: D/dalvikvm(2942): GC_EXTERNAL_ALLOC freed 101K, 51% free   2642K/5379K, external 924K/1038K, paused 37ms
 10-17 16:31:54.250: D/BluetoothChat(2942): onActivityResult -1
 10-17 16:31:54.250: D/BluetoothChatService(2942): connect to: 00:12:6F:01:31:08
 10-17 16:31:54.250: D/BluetoothChatService(2942): setState() 1 -> 2
 10-17 16:31:54.250: E/BluetoothChat(2942): + ON RESUME +
  10-17 16:31:54.250: I/BluetoothChat(2942): MESSAGE_STATE_CHANGE: 2
 10-17 16:31:54.270: I/BluetoothChatService(2942): BEGIN mConnectThread SocketType:Secure
 10-17 16:31:55.300: D/BluetoothChatService(2942): start
10-17 16:31:55.300: D/BluetoothChatService(2942): setState() 2 -> 1
 10-17 16:31:55.310: I/BluetoothChat(2942): MESSAGE_STATE_CHANGE: 1
10-17 16:32:02.369: W/KeyCharacterMap(2942): No keyboard for id 0
10-17 16:32:02.369: W/KeyCharacterMap(2942): Using default keymap: /system/usr/keyc/qwerty.kcm.bin 
```

# c++ - 获得 std::multiply 和 std::plus 的中性元素

> ID：12930653
> 
> 赞同：3
> 
> 时间：2012-10-17T09:01:01.153
> 
> 标签：c++, stl, template-meta-programming

在实现其构造函数采用的模板类时：

1.  函数向量（函数的类型为`std::function<bool(const T&)>`）
2.  `std::binary_function<bool,bool,bool>`我将使用它来将向量应用的结果从 1) 累积到某个值。

我希望能够使用`std::plus()`and`std::multiplies()`作为第二个模板参数，但问题是根据函数我需要一个相应的中性元素（用于 std 累积初始值）。对于`AND`( `std::multiplies`) 我需要`true`(aka `1`)，对于`OR`( `std::plus`) 我需要`false`(aka `0`)。我知道我可以专门化模板并解决问题，但我想知道是否有办法为内置的 STL 函数获取中性元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T09:13:54.770

如果您正在使用`gcc`，则可以使用[__gnu_cxx::identity_element](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.2/group__SGIextensions.html#g91e15bd7fbf8923cebc1a08b8cdba724)，这正是您所要求的。

如果你不是，我不认为有一个通用的解决方案，好像有，`gcc`不会实现他们自己的 - 你可能只是重写他们的实现（这实际上只是几个模板专业化，正如你所期望的那样）。

[编辑：源代码在这个文件](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.2/ext_2functional-source.html)的第 78-98 行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T09:17:10.050

这里通常的解决方案是特征。与其实例化您的模板或其他任何东西，不如`std::plus`在一个特征类上实例化它，该类定义了一个`typedef`for `std::plus`，加上一个标识元素（静态 const，带初始化器）以及您需要的任何其他东西。就像是：

```
struct OpTraitsAdd
{
    typedef std::plus<int> Op;
    static int const identity = 0;
};

struct OpTraitsMult
{
    typedef std::multiplies<int> Op;
    static int const identity = 1;
}; 
```

也可以使用显式特化从标准运算符获取特征：

```
template <typename Op> struct OpTraits;
template<>
struct OpTraits<std::plus<int> >
{
    static int const identity = 0;
};
template<>
struct OpTraits<std::multiplies<int> >
{
    static int const identity = 1;
}; 
```

在这种情况下，您将通过运算符实例化您的类，并`OpTraits<Op>::identity`在需要时使用。

当然，在这两种情况下，您都必须提供所有必要的特征，无论是作为独立类还是作为模板特化。如果您需要的唯一两个标识元素是 0 和 1，则您可以使用以下方法自动执行此操作：

```
template <bool idIs0> struct IdImpl;
template<>
struct IdImpl<false>
{
    static int value = 1;
};
template<>
struct IdImpl<true>
{
    static int value = 0;
};

template <typename Op>
struct Id
{
    static int value = ItImpl<Op(1, 0) == 1>::value;
}; 
```

这在 C++11 之前不起作用，因为*它*`Op(1, 0)`不是一个常量表达式。我不确定 C++11；但我认为如果 `Op::operator()`声明`constexpr`，它应该工作。（如果我必须涵盖很多运营商，包括客户可能提供的一些运营商，我只会费心尝试。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T09:32:50.227

只是从詹姆斯的回答（以及我对它的评论）中挑出一点。我认为应该分开考虑。

如果你愿意，你可以在运行时计算身份，假设确实有一个身份。是`!func(true, false)`。

如果`func::operator()`可用并且没有副作用，就像`std::plus`and一样`std::multiplies`，那么大概任何明智的编译器都会在编译时实际计算它。但它在编译时不需要该值，所以现在您的模板可以（如果调用者想要）接受 a`std::function<bool(bool,bool)>`而不是需要在编译时知道实际的累积操作。

# java - 如何从命令行执行maven插件？

> ID：12930656
> 
> 赞同：1
> 
> 时间：2012-10-17T09:01:19.337
> 
> 标签：java, maven, build

是否可以从命令行执行 Maven 插件？我需要运行依赖插件：

```
<executions>
    <execution>
        <id>copy-dependencies</id>
        <phase>package</phase>
        <goals>
            <goal>copy-dependencies</goal>
        </goals>
        <configuration>
            <outputDirectory>${RPTBIN}/.tools/lib</outputDirectory>
            <overWriteReleases>false</overWriteReleases>
            <overWriteSnapshots>false</overWriteSnapshots>
            <overWriteIfNewer>true</overWriteIfNewer>
            <excludeTransitive>true</excludeTransitive>
        </configuration>
    </execution>
</executions> 
```

有没有办法像在 Maven 构建期间执行这个插件一样执行这个插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:06:29.210

是的，这是可能的。Maven 是一个 Java 工具，因此您必须安装 Java 才能继续。请在[此处](http://maven.apache.org/download.html#Installation)完成安装过程。

```
mvn dependency:copy-dependencies 
```

一个示例依赖插件命令。顺便问一下，到目前为止，您是如何运行 Maven 命令的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:07:44.307

您应该能够运行它，`mvn dependency:copy-dependencies`只需添加相关的配置参数`-Dparameter=value`，即`-DoverWriteReleases=false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-14T12:44:35.940

您可以使用以下命令。它对我有用：

> **mvn {你的 groupId}:{你的 artifactId}:{你的版本}:{你的目标}**

但是请记住，如果您的插件主类正在扩展 AbstractMojo，则此命令很好。

它将运行插件主类的 execute() 方法。另外，在运行此命令之前，请运行 **mvn clean install**来构建 jar

# c# - C# XAML Metro Image 动态源

> ID：12930661
> 
> 赞同：2
> 
> 时间：2012-10-17T09:01:26.580
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

我喜欢使用 XAML 中的一个 Image 控件制作简单的动画，并`Image`以 1 秒的间隔将 Source of 交换到另一个。

但是当我这样做时，图像会闪烁。我使用此代码（在`Tick`事件处理程序中`Timer`）：

```
Uri uri = new Uri("ms-appx:/Sprites/Running/" + y++ + ".png", 
              UriKind.RelativeOrAbsolute);
BitmapImage textureBitmap = new BitmapImage(uri);

this.ImageHolder.Source = textureBitmap; 
```

问题可能出在哪里？我应该缓存位图图像吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:18:43.717

尝试在您的 xaml中声明[StoryBoard ：](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard%28v=vs.90%29.aspx)

```
 <Storyboard>
        <ObjectAnimationUsingKeyFrames BeginTime="0:0:0" 
            Storyboard.TargetName="ImageHolder" Storyboard.TargetProperty="Source">
            <DiscreteObjectKeyFrame KeyTime="0:0:0" 
               Value="{Binding Source={StaticResource Frame1Image}"/>
            <DiscreteObjectKeyFrame KeyTime="0:0:1" 
               Value="{Binding Source={StaticResource Frame2Image}"/>
            <DiscreteObjectKeyFrame KeyTime="0:0:2" 
               Value="{Binding Source={StaticResource Frame3Image}"/>
            <!-- etc -->
        </ObjectAnimationUsingKeyFrames>
    </Storyboard> 
```

因此，您必须将精灵添加到静态资源，并运行 StoryBoard。

# java - Android：新值时使EditText为空

> ID：12930667
> 
> 赞同：0
> 
> 时间：2012-10-17T09:01:45.630
> 
> 标签：java, android, android-edittext, onclicklistener

当你输入一个新值时，我想让我的为`EditText`空。如果我使用 a`onClickListener`我需要先聚焦然后单击（双击），如果我使用 onFocusChangeListener 它在单击另一个时已经删除`EditText`。

**有人知道实现此目的的另一种方法（第一次单击==空时）吗？**

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:06:50.780

不要把事情复杂化。只需设置`android:selectAllOnFocus="true"`为您的`EditText`. 因此，当用户输入一些文本然后单击文本框时，里面的所有文本都将突出显示 - 允许用户从头开始输入新文本。

# c++ - 使用 libcurl 的分块 HTTP 响应中缺少块大小

> ID：12930671
> 
> 赞同：0
> 
> 时间：2012-10-17T09:02:02.897
> 
> 标签：c++, http, curl

我尝试使用 curl 库来构建 HTTP 代理。我现在面临的问题是分块的 HTTP 响应不正确。通过检查保存的 HTTP 响应文件，我发现 HTTP 响应开始和结束时的块大小丢失了。HTTP 响应来自 curl 回调函数，如下所示。

```
size_t httpClient::write_data(char *ptr, size_t size, size_t nmemb, void* userdata)
{   

    // get total size   
    size_t realsize = size*nmemb;
    // get object
    struct MemoryStruct* mem = (struct MemoryStruct*)userdata;

    // size of memory block pointerd by the mem->memory is changed to the new bytes
    mem->memory = (char*)realloc(mem->memory, (mem->size + realsize));

    if(mem->memory == NULL)
    {
        printf("not enough memory (realloc returned NULL)\n");
            exit(1);
    }

    // copy to memory structure
    memcpy(&(mem->memory[mem->size]), ptr, realsize);
    mem->size += realsize;
    //mem->memory[mem->size] = 0;

    cout<<"Write ["<<realsize<<"] bytes Data to chunk"<<endl;
    return realsize;

} 
```

希望有人能指出我为这个回调函数犯的错误。感谢：D

预期的分块 HTTP 响应如下所示：

```
HTTP/1.1 200 OK^M
Date: Wed, 17 Oct 2012 07:44:54 GMT^M
Expires: -1^M
Cache-Control: private, max-age=0^M
Content-Type: text/html; charset=UTF-8^M
Set-Cookie: PREF=ID=58da9f2271ea2d2b:FF=0:TM=1350459894:LM=1350459894:S=EnJS1hQo2d6_AnPM; expires=Fri, 17-Oct-2014 07:44:54 GMT; path=/; domain=.google.com^M
Set-Cookie: NID=65=RW0txpQSNA4NwlRhp0y1I6iF3L0xfugw8Bv4GMsB1yE1qu7iGoBO_2ZxqS0-DSeS4tJKnV26JlfVZmsnjxnjdUaHTDj3-AFREsvyMiE8wSKyabwYG8x-e18Pj8smdxUs; expires=Thu, 18-Apr-2013 07:44:54 GMT; path=/; domain=.google.com; HttpOnly^M
P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."^M
Content-Encoding: gzip^M
Transfer-Encoding: chunked^M
Server: gws^M
X-XSS-Protection: 1; mode=block^M
X-Frame-Options: SAMEORIGIN^M
^M
907a^M 
```

十六进制格式的数字 907a 是我的 HTTP 响应文件中遗漏的块大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:11:11.297

我可以向您建议下一步：

1.  进入您的代码部分，即设置回调函数，`struct MemoryStruct`在堆栈上创建。
2.  将参数写入回调函数原型中，`struct MemoryStruct *userdata`以代替`void *userdata`.
3.  您的代码将如下所示：

    ```
    MemoryStruct data;
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &data);
    curl_easy_setopt(curl, CURLOPT_HEADERFUNCTION, write_data);

    ---------------------------------------------------------------------
    // if you'll used std::string instead char*
    ---------------------------------------------------------------------
    size_t write_data(char *data, size_t size, size_t count, MemoryStruct *userdata)
    {
        int result = 0;
        if(userdata->memory != NULL) {
            userdata->memory->append(data, size*count);
            result = size*count;
            userdata->size += result;
        }
        return result;
    } 
    ```

调用 curl 库的函数后，`curl_easy_perform(CURL *handler)`您可以获得正确的响应。

PS。如果我误解了您的问题，请在调用回调函数的位置显示您的代码

# perl - Perl Net::LDAPS SSL 版本协商

> ID：12930672
> 
> 赞同：1
> 
> 时间：2012-10-17T09:02:03.290
> 
> 标签：perl, ssl, ldap

## 平台

*   操作系统：RHEL 5.4
*   Perl：5.8.8
*   OpenSSL：0.9.8e
*   网络::LDAP: 0.33

## 细节

我们有一个 perl 脚本，它监控我们的应用程序使用的 LDAP 服务器，并在这些服务器无法访问或以某种方式无法正常工作时发送警报。总的来说，这很好用，除了只接受 SSLv2 的特定 LDAP 服务器。LDAP 对象创建如下所示

```
my $current_server = Net::LDAP->new('ldaps://10.1.1.1:636/,
                     verify => 'none',
                     sslversion => 'sslv23',
                     timeout => 30 ) 
```

请注意*sslv23*，根据[文档](http://search.cpan.org/~marschap/perl-ldap-0.49/lib/Net/LDAP.pod)，它允许使用 SSLv2 或 3。文档中的相关条目是

> sslversion => 'sslv2' | 'sslv3' | 'sslv23' | 'tlsv1'

但是，上述方法不起作用。当我将“sslversion”更改为“sslv2”时，脚本*就可以*工作了。

## 结论

如果 sslv3 不起作用，如何让 Net::LDAPS 使用 sslv2 重试？

谢谢，

弗雷德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:02:08.687

回答我自己的问题 - 如果 SSLv3 失败，我找不到让库回退到 SSLv2 的方法，所以我在自己的代码中通过首先尝试 SSLv3 来做到这一点，如果失败，则使用 SSLv2。这适用于我的具体情况。

我鼓励任何有更多信息的人发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T00:12:53.480

*   你用的是哪个版本的`IO::Socket::SSL`？
*   你用的是哪个版本的`Net::SSLeay`？

如果您查看 的[源代码`IO::Socket::SSL`](http://cpansearch.perl.org/src/SULLR/IO-Socket-SSL-2.012/lib/IO/Socket/SSL.pm)，您会看到这`sslv23`意味着它将使用`Net::SSLeay::CTX_new()`相当于`Net::SSLeay::CTX_v23_new()`. `SSLv2`可能已从您的库的`CTX_v23_new`实现中删除。

# javascript - Javascript XPath 模拟器替换 XPathEvaluator

> ID：12930677
> 
> 赞同：1
> 
> 时间：2012-10-17T09:02:09.887
> 
> 标签：javascript, xpath, emulation

有没有人尝试替换 JS 方法 XPathEvaluator ？

是否有`emulator`适用于所有浏览器的任何代码或工作代码，包括 IE ？

即使速度较慢，模拟器也会很有用。

我有这个代码：[http ://svn.coderepos.org/share/lang/javascript/javascript-xpath/trunk/release/javascript-xpath-latest.js](http://svn.coderepos.org/share/lang/javascript/javascript-xpath/trunk/release/javascript-xpath-latest.js)

但是当我修复它的一部分时，它会在其他部分破裂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:52:34.237

您是否尝试过[Wicked Good XPath](http://google-opensource.blogspot.com/2012/09/wicked-good-xpath-faster-javascript.html) -“由 Google 编写的 DOM Level 3 XPath 规范的纯 JavaScript 实现。我们相信它是 JavaScript 中最快的 XPath 实现”？

# jquery - 如何通过单击外部来隐藏或关闭 div 框？

> ID：12930678
> 
> 赞同：1
> 
> 时间：2012-10-17T09:02:12.820
> 
> 标签：jquery, html, hide

这工作正常。但现在我想添加该功能，以便如果用户单击 div 之外的任何位置，div 将返回隐藏状态。还有一个问题，我可以使用相同的代码 IPade 也...

[http://jsfiddle.net/HNrCD/2/](http://jsfiddle.net/HNrCD/2/)

如何通过单击外部来隐藏或关闭 div 框？

```
<script type='text/javascript'>//<![CDATA[
    $(document).ready(function () {
        $("#focus").click(function () {
            $('#hidden-item').toggleClass('focused');

        });

    });//]]>  

</script>
<style type="text/css">
#focus {float: left; background: #333; color: #fff; padding: 5px;}
#wrap {
    width: 100%;    
    position: fixed;
}

#hidden-item {
  background: red; color: #fff;
  position: absolute;
  top: 50px;
  left: 100%;
  width: 100%;
  margin-left:15px;

  -webkit-transition: all 0.5s ease-in;
  -moz-transition: all 0.5s ease-in;
  -ms-transition: all 0.5s ease-in;
  -o-transition: all 0.5s ease-in;
  transition: all 0.5s ease-in;

  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -ms-backface-visibility: hidden;
  backface-visibility: hidden;
}

#hidden-item.focused {
  left: 0;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  -o-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
}
</style>
</head>
<body>
<div id="wrap">
    <p id="focus">Click to Show/Hide</p>

    <div id="hidden-item">
        Hidden div...
        <br />
        <br /><br /><br /><br /><br />
        Line2
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:20:58.170

试试这个选择器**$(":not('#wrap')")**

```
$(":not('#wrap')").click(function(){
   // hide your div here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:11:13.133

您必须在切换类中更改`left:0`为。`left:0px`

结果使用您的代码：http: [//jsfiddle.net/G5Yh4/1](http://jsfiddle.net/G5Yh4/1)

对于您的问题，将 JS 更改为：

```
var hover_focus = false ;
$(document).ready(function () {
    $("#focus").click(function () {
        $('#hidden-item').toggleClass('focused');
    })
    .mouseover(function () {
        hover_focus = true ;
    })
    .mouseout(function () {
        hover_focus = false ;
    });
});

$(document).click(function() {
    if(!hover_focus) {
          $('#hidden-item').removeClass('focused');             
    }
}) ; 
```

​我认为 jQuery 有一个用于“不悬停”的选择器，例如`.not(':hover')`. 你可以在那里检查： http: [//api.jquery.com/not/](http://api.jquery.com/not/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:05:18.547

请参阅我的问题和标记的答案：

[使用 JQuery 在 ESC 按键处关闭自定义框](https://stackoverflow.com/questions/9030850/close-a-customized-box-at-esc-keypress-with-jquery)

我从 Joffrey 发布了类似的答案（几乎没有修改）。相反`#modal-dialog`，可以是您想要关闭它的任何 div 选择器。而不是`live`在新版本的 jquery 中被弃用，使用`on`.

```
$("html").on("keyup", function(e) {

if(e.keyCode === 27 && !($('#modal-dialog').hasClass("no-display")))

    escape_check();

}

}

function escape_check() {

// here, reset any fields at closing box (if you have any) 

$("#modal-dialog").removeClass("no-display");

$("#feedback-modal-dialog input").each(function() {
    $('#modal-dialog').attr("value","");
});
$("#feedback-modal-dialog textarea").each(function() {
    $('#modal-dialog').val("");
});
$("#modal-dialog").addClass("no-display"); //or .hide()

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:24:57.830

这是JS：

[http://jsfiddle.net/CCmy2/](http://jsfiddle.net/CCmy2/)

这是基于 YogeshWaran 的回答！上他。

# objective-c - restkit & 离线模式 & 视图控制器

> ID：12930679
> 
> 赞同：0
> 
> 时间：2012-10-17T09:02:14.957
> 
> 标签：objective-c, ios, xcode, uinavigationcontroller, restkit

我有一个使用 restkit 的项目（在 iOS 6 上）。它在在线模式下工作正常。现在，我正在尝试实现离线模式。有两个视图控制器：

*   `LoginViewController : UIViewController`
*   `MainSplitViewController : UIViewController <UINavigationControllerDelegate, RKRequestDelegate>`

开`LoginViewController`，我检查设备是否离线。如果是，我检查钥匙串中是否有登录信息。如果是这样，我直接去我的`MainSplitViewController`. 问题：我`MainSplitViewController`的实例化正确，正确调用了 viewDidLoad 和 viewDidAppear，但我的视图没有出现，登录视图保持在原位。问题仅在离线模式下出现，所以我怀疑 RestKit 做错了什么......但通常，我的导航控制器独立于 RestKit，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:04:06.217

好的 soooooooooo 终于：我在 viewWillAppear 中对我的 LoginViewController 说“嘿，转到 MainSplitViewController”。移动 viewDidAppear 中的代码解决了问题...

# apache - 如何从 localhost 子域提供两个 wsgi

> ID：12930680
> 
> 赞同：0
> 
> 时间：2012-10-17T09:02:17.477
> 
> 标签：apache, apache2, mod-wsgi, wsgi, pyramid

我正在处理的应用程序有两台服务器：一个 APi 和另一个 App。两者都是使用金字塔创建的，计划是将它们放在至少两台单独的机器上。

但是对于我的笔记本电脑，我希望能够将 api.localhost 映射到 api 服务器，并将 app.localhost 映射到应用服务器

我做了以下事情：

这是我的 httpd.conf 文件：

```
WSGIApplicationGroup %{GLOBAL}
WSGIPassAuthorization On
WSGIDaemonProcess pyramid user=ranjith group=staff processes=1 \
   threads=4 \
   python-path=/home/ranjith/VENV/lib/python2.7/site-packages
<VirtualHost *:80>
    ServerName app.localhost
    WSGIScriptAlias / /home/ranjith/workspace/app.wsgi  
</VirtualHost>
<VirtualHost *:80>
    ServerName api.localhost
    WSGIScriptAlias / /home/ranjith/workspace/api.wsgi  
</VirtualHost>
<Directory /home/ranjith/VENV>
  WSGIProcessGroup pyramid
  Order allow,deny
  Allow from all
</Directory> 
```

我在 /etc/hosts 中添加了这些条目

```
127.0.0.1       api.localhost
127.0.0.1       app.localhost 
```

为服务器添加了两个 WSGI 文件。他们在开发服务器上工作

但是我真的不知道如何配置 localhost 子域，而且我对 WSGI 没有任何真正的了解。

我做了 sudo service apache2 restart

它说：

```
 * Restarting web server apache2

apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName                                                                                              
... waiting apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName 
```

我认为这不是错误消息。

当我输入：[http://app.localhost](http://app.localhost)时，由于收到 404 错误，我无法访问该应用程序

现在我的 httpd.conf 文件有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:49:25.007

然后不要使用子域。请改用“api-localhost”和“app-localhost”。

分开：

```
<Directory /home/ranjith/VENV>
  WSGIProcessGroup pyramid
  Order allow,deny
  Allow from all
</Directory> 
```

是错的。应该：

```
<Directory /home/ranjith/workspace>
  WSGIProcessGroup pyramid
  Order allow,deny
  Allow from all
</Directory> 
```

否则 WSGIProcessGroup 永远不会被使用，您将在嵌入式模式而不是守护程序模式下运行。

# c#-4.0 - 如何在运行时在依赖关系中注入构造函数参数，同时通过统一解决

> ID：12930683
> 
> 赞同：1
> 
> 时间：2012-10-17T09:02:23.897
> 
> 标签：c#-4.0, dependency-injection, unity-container, enterprise-library, unity-interception

在下面，如果我试图在运行时在模型的依赖项之一中注入构造函数参数，则不需要使用 Parameter Override 选项。我们还有什么需要做的吗？

```
 public class Test: ITest
    {
        ITestChild _testChild ;
        public Test(ITestChild testChild)
        {
            _testChild = testChild;
        }
    }

    public class TestChild: ITestChild
    {
        ITestChildChild _testChildChild ;
        public Test(ITestChildChild testChildChild)
        {
            _testChildChild = testChildChild;
        }
    }

    public class TestChildChild: ITestChildChild
    {
        public TestChildChild()
        {
        }
    } 
```

映射统一：

```
 var unityContainer = new UnityContainer();
    unityContainer.RegisterType<ITest, Test>(new ContainerControlledLifetimeManager());
    unityContainer.RegisterType<ITestChild TestChild>();
    unityContainer.RegisterType<ITestChildChild, TestChildChild>();

    Main()
    {
        var testChildChild = new TestChildChild();
        var testObject = UnityContainer.Resolve<ITest>(new ParameterOverride("testChildChild", testChildChild));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:07:09.053

```
Main()
{
    var testChildChild = new TestChildChild();
    var testObject = UnityContainer.Resolve<ITest>(new DependencyOverride("testChildChild", testChildChild));
} 
```

# asp.net - 如何从代码隐藏更新 editItemTemplate 复选框列表？

> ID：12930684
> 
> 赞同：0
> 
> 时间：2012-10-17T09:02:25.173
> 
> 标签：asp.net

我正在使用从 SQL 数据库馈送的 gridview。我需要添加一个自定义 itemTemplate，它将由另一个数据源提供的复选框列表组成。这是我的 xml 部分：

```
 <asp:TemplateField HeaderText="Equipements" >
            <EditItemTemplate>
                <asp:CheckBoxList ID="myCB" runat="server">
                </asp:CheckBoxList>
            </EditItemTemplate>
        </asp:TemplateField> 
```

我正在使用 gridview onEditing 事件尝试在后面的代码中访问“myCB”：

```
 protected void OnEditing(object sender, EventArgs e)
    {
        GridView gridview = sender as GridView;
        GridViewEditEventArgs  editEvent = e as GridViewEditEventArgs;
        ListViewItemEventArgs rowEvent = e as ListViewItemEventArgs;
        TableCell equipementsCell = gridview.Rows[editEvent.NewEditIndex].Cells[11];

        CheckBoxList equipements = gridview.Rows.FindControl("myCB") as CheckBoxList;
    } 
```

此代码不起作用，未找到复选框列表。我尝试了很多事情都没有成功...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:06:55.740

您应该使用 GridView 的[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件：

```
protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType  == DataControlRowType.DataRow
    &&  e.Row.RowState == DataControlRowState.Edit)
    {
        CheckBoxList equipements = (CheckBoxList )e.Row.FindControl("myCB"); 
        equipements.DataSource = getSomeData();
        equipements.DataTextField = "TextColumn"; 
        equipements.DataTextField = "IdColumn";
        equipements.DataBind();
    }
} 
```

# spring - JPA：删除分离的实例

> ID：12930686
> 
> 赞同：4
> 
> 时间：2012-10-17T09:02:38.170
> 
> 标签：spring, hibernate, jpa, jpa-2.0, hibernate-annotations

我从 typedQuery 对象得到 resultList 。我从该列表中取出第一个对象。

例如。`LoginAttempt loginAttempt = loginAttempts.get(0);`

什么时候，我更新这个对象并调用`entityManager.merge(loginAttempt);`它更新成功。

但是当我要删除这个对象时，它会给我一个例外，即。`java.lang.IllegalArgumentException: Removing a detached instance.`

任何建议。谢谢 ：）

实际上，我只想删除。我只是提到合并，因为我很困惑合并正在工作但删除不起作用......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T09:51:08.710

合并实际上是有效的，因为它的目的是从分离状态过渡到托管状态。另一方面，删除只能对托管实体起作用。

如果你有一个托管实体，你可以调用`em.remove(-)`它。
如果你有一个分离的实体，你应该调用`Object managed = em.merge(detached)`然后`em.remove(managed)`. 您必须在相同的事务边界内执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:11:02.107

[快速搜索显示](https://stackoverflow.com/questions/7448392/how-do-i-make-my-entity-object-managed-so-i-can-remove-it)您需要在同一事务中执行此操作。您不能合并然后删除。您需要在同一个事务中进行，或者将它们分开在两个事务中

# actionscript-3 - StageOrientationEvent 仅触发 upsideDown 和自 ios6 以来的默认值

> ID：12930688
> 
> 赞同：0
> 
> 时间：2012-10-17T09:02:43.520
> 
> 标签：actionscript-3, ipad, air

自从更新到 ios6，因此必须获得 beta AIR 3.5，它似乎是`StageOrientationEvent`唯一触发`upsideDown`和默认的，`rotatedRight`不再是`rotatedLeft`。我已经阅读了有关 ios6 中方向处理的更改，但我似乎无法为 AIR AS3 找到解决方法。这是我的快速定向测试应用程序的代码（只是在快速测试的时间线上）：

```
stage.autoOrients = true
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE, orientationChange);
stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGING, orientationChanging);

function orientationChange(e:StageOrientationEvent):void{
    var t:TraceOnStage = new TraceOnStage(stage ,"----------------");
    t= new TraceOnStage(stage, "orientationChange before: " + e.beforeOrientation + stage.orientation);     
    t = new TraceOnStage(stage, "orientationChange after: " + e.afterOrientation + stage.orientation);
}

function orientationChanging(e:StageOrientationEvent):void{
    var t:TraceOnStage = new TraceOnStage(stage ,"----------------");
    t = new TraceOnStage(stage, "orientationChanging before: " + e.beforeOrientation + stage.orientation);      
    t = new TraceOnStage(stage, "orientationChanging after: " + e.afterOrientation + stage.orientation);
} 
```

在 iPad 上它只跟踪颠倒和默认情况，它工作正常，直到 ios6。我有一系列需要定向的应用程序即将完成，客户正在等待然后这发生了！任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T01:12:54.370

尝试删除应用程序描述符 xml 中的 (aspectRatio) 部分 - 方向更改再次在各个方向起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:08:03.537

好的，我找到了一种解决加速度计问题的方法。为了避免每次改变方向时改变加速度计数据的混乱，我决定尝试完全不改变舞台方向，而是旋转和重新定位根以产生相同的效果。它运行良好，但请注意应用程序中使用 localToGlobal 或舞台 mouseX 和 mouseY 的任何代码都需要额外的代码行才能使用根作为定位参考。这是我写的整个课程。它处于第一个工作阶段，因此欢迎提出任何改进意见！

```
import flash.sensors.Accelerometer;
import flash.events.AccelerometerEvent;
import flash.events.EventDispatcher;
import flash.events.Event;
import flash.display.StageOrientation;
import flash.display.Stage;
import flash.display.DisplayObject;
import flash.utils.setInterval;
import flash.utils.clearInterval;

public class AcceleroOrientator extends EventDispatcher {

    public static const ORIENTATION_CHANGE:String = "orientationChange";

    public var currentOrientation:String = StageOrientation.DEFAULT

    private var firstCheckOrientation:String = StageOrientation.DEFAULT;

    private var theRoot:DisplayObject;

    private var myConst:Number = Math.sin(Math.PI/4);

    private var accl:Accelerometer;

    private var inter:int;

    private var inter2:int;

    private var currenAcceleromResult:String;

    private var checkFrequency:int = 500;

    public function AcceleroOrientator(tRoot:DisplayObject) {
        if (Accelerometer.isSupported) {
            accl = new Accelerometer();
            accl.setRequestedUpdateInterval(100);
        } else {
            trace("Accelerometer feature not supported!!");
        }
        theRoot = tRoot;
        theRoot.stage.autoOrients = false;
    }

    public function set active(val:Boolean):void {
        if (inter2){
            clearInterval(inter2);
        }
        if (val==true) {
            if (! accl.hasEventListener(AccelerometerEvent.UPDATE)){
                accl.addEventListener(AccelerometerEvent.UPDATE, getAcceleromOrientation);
            }
            currentOrientation = currenAcceleromResult;
            inter2 = setInterval(checkOrientation, checkFrequency);
        } else {
            if (accl.hasEventListener(AccelerometerEvent.UPDATE)){
                accl.removeEventListener(AccelerometerEvent.UPDATE, getAcceleromOrientation);
            }
        }

    }

    private function checkOrientation():void {
        firstCheckOrientation = currenAcceleromResult;
        if (inter){
            clearInterval(inter);
        }
        if (currentOrientation != firstCheckOrientation) {
            inter = setInterval(confirmOrientation, checkFrequency/3);
        }
    }

    private function confirmOrientation():void{
        if (inter){
            clearInterval(inter);
        }
        var secondCheckOrientation = currenAcceleromResult;
        if (firstCheckOrientation == secondCheckOrientation){
            currentOrientation = firstCheckOrientation;
            doRootRotation();
            dispatchEvent(new Event(ORIENTATION_CHANGE));
        }
    }

    private function doRootRotation():void{

        if (currentOrientation == StageOrientation.ROTATED_LEFT){
            theRoot.rotation = 90;
            theRoot.x = theRoot.stage.stageWidth;
            theRoot.y = 0;
        } else if (currentOrientation == StageOrientation.DEFAULT) {
            theRoot.rotation = 0;
            theRoot.x = 0;
            theRoot.y = 0;
        } else if (currentOrientation == StageOrientation.ROTATED_RIGHT) {
            theRoot.rotation = -90;
            theRoot.x = 0;
            theRoot.y = theRoot.stage.stageHeight;
        } else if (currentOrientation == StageOrientation.UPSIDE_DOWN) {
            theRoot.rotation = 180;
            theRoot.x = theRoot.stage.stageWidth;
            theRoot.y = theRoot.stage.stageHeight;
        }

    }

    private function getAcceleromOrientation(e:AccelerometerEvent):void{

        if (Math.abs(e.accelerationZ) > myConst){
            return;
        }

        if (e.accelerationX > 0 && e.accelerationY >  -  myConst && e.accelerationY < myConst) {
            currenAcceleromResult =  StageOrientation.ROTATED_LEFT;
        } else if ( e.accelerationY >= myConst) {
            currenAcceleromResult =  StageOrientation.DEFAULT;
        } else if (e.accelerationX < 0 && e.accelerationY > -myConst && e.accelerationY < myConst) {
            currenAcceleromResult =  StageOrientation.ROTATED_RIGHT;
        } else if (e.accelerationY <= myConst) {
            currenAcceleromResult =  StageOrientation.UPSIDE_DOWN;
        } else {
            currenAcceleromResult =  StageOrientation.UNKNOWN;
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:04:11.507

由于 iOS6 已禁用这些事件，因此您无法从 AIR 中获取它们。

我不认为有任何简单的解决方案，但由于所有加速度计数据应该仍然存在，您应该能够构建自己的事件，根据加速度计 x、y 和 z 告诉您旋转何时发生变化。

# php - 使用 try Catch 在 php 中获取警告消息

> ID：12930698
> 
> 赞同：1
> 
> 时间：2012-10-17T09:03:11.480
> 
> 标签：php

> **可能重复：**
> [PHP 捕获 SimpleXMLElement 解析错误](https://stackoverflow.com/questions/4137645/php-catching-a-simplexmlelement-parse-error)

我正在使用 xml 文件进行文件上传。我有使用`simplexml_load_file("files/sample.xml");` 如果给定 xml 文件错误意味着，它会显示这样的警告，

```
Warning (2): simplexml_load_file() [http://php.net/function.simplexml-load-file]: files/sample.xml:8: parser error : Opening and ending tag mismatch:
Warning (2): simplexml_load_file() [http://php.net/function.simplexml-load-file]: 
```

我使用 try catch 收到警告。我正在使用 cakePHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:06:39.270

您的脚本正在加载文件。但是，无法将文件解析为 XML。

要阻止警告自动吐出到页面上（无论您是否尝试/捕获，它都会这样做），您需要使用：

```
libxml_use_internal_errors(true); 
```

在处理任何使用 libxml 的类之前。

来自 PHP.net 的[描述：](http://php.net/manual/en/function.libxml-use-internal-errors.php)

> libxml_use_internal_errors — 允许您禁用标准 libxml 错误并启用用户错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:08:56.893

如果您想尝试/捕获警告，则必须将警告“转换”为异常。

像这样设置全局错误句柄：

```
set_error_handler( 'error_handler' ); 
```

然后将警告转换为异常：

```
function error_handler( $errno, $errmsg, $filename, $linenum, $vars )
  {
    // error was suppressed with the @-operator
    if ( 0 === error_reporting() )
      return false;

    if ( $errno !== E_ERROR )
      throw new \ErrorException( sprintf('%s: %s', $errno, $errmsg ), 0, $errno, $filename, $linenum );

} 
```

# lazy-loading - 使用延迟加载时不支持 dynatree selectmode=3

> ID：12930702
> 
> 赞同：0
> 
> 时间：2012-10-17T09:03:24.110
> 
> 标签：lazy-loading, dynatree

我试图在我的项目中使用带有延迟加载的 dynatree。当我尝试将选择功能与复选框结合起来并选择模式 3 时，我很失望地看到模式 3 的选择规则是选择包括子项在内的所有内容 .... 选择父项时的子项。这是因为孩子们还没有被加载。

有没有人有办法让这个工作？我将非常感谢任何建议。赞！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:29:15.790

诚然，以下内容有点小技巧......但它解决了这个问题：

```
onSelect: function (flag, node) {
    if (flag && node.childList == undefined) {
        node.reloadChildren(function() {
            node.select(false);
            node.select(true);
        });
    } 
```

如果正在选择节点（标志 == true）并且尚未加载节点（childList == undefined），则使用回调函数调用 reloadChildren。回调在数据加载后运行，并简单地关闭/打开复选框。这会导致选择所有子节点（现在存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:07:25.603

添加您选择的父母的孩子时，请检查父母是否有孩子。如果为 TRUE，则添加每个子项并将这些子项中的每一个设置为选中。

下面是一些代码。将`onLazyRead`上升。每次点击惰性节点时，都会触发此功能。在这个函数内部应该调用你的函数来获取你刚刚选择的节点的子数据。

下面的代码是我解决这个问题的方法。它所做的几乎所有事情都是检查您添加的节点的父节点是否被选中。如果为 TRUE，则添加节点，然后添加`.select()`它。

这在取消选择节点时要简单得多，因为所有节点都已加载。取消选择时，只需从被取消选择的节点向下走树的层次​​结构，然后简单地取消选中每个节点。

我知道这有很多代码可以扔给你，但希望你能从中领悟到这个想法。如果你不能，我会在工作期间尝试返回这个线程。也许您甚至可以发布到目前为止的内容？

```
onLazyRead: function(node){

jQuery("#tree2").dynatree("getTree").disable();

        var pParentID = node.data.key;          

                    //Select the Node

        doChildReport(pParentID); //Get Children for this node's ID

    },

///....
//Methods to grab data from a "XMLHttpRequest GET" go here
//....

//When you finally want to add the children that you fetched using the ID of the node you selected...

//treeArray is an array of node data that has been parsed out of a 
//string returned by a "XMLHttpRequest GET"

//Contents of array in order, repeating: treeArray[0] = ParentID, [1] = nodeID [2] = nodeName
//Example, the array would return [111], [222], ["Child Node"]

if(){ //IF Next fetched node is on the last level, ie. no children
            //add normally
        }
    else{  //If NOT, add lazy.
        if(treeArray[1] != "nill" && treeArray[1] != undefined){

        //IF THE PARENT NODE IS SELECTED
        if(jQuery("#tree2").dynatree("getTree").getNodeByKey(treeArray[0]).isSelected() == true){

        //AND IF the child node does not exist
        if(jQuery("#tree2").dynatree("getTree").getNodeByKey(treeArray[1]) == null){

            //Add the child node and then mark it selected
            addChildNodeLazy(treeArray[1], treeArray[2], treeArray[0]);
            jQuery("#tree2").dynatree("getTree").getNodeByKey(treeArray[1]).select();
        }   
        }else{
            if( jQuery("#tree2").dynatree("getTree").getNodeByKey(treeArray[1]) == null){
                addChildNodeLazy(treeArray[1], treeArray[2], treeArray[0]);
            }
        }
    }
} 
```

延迟加载功能...

```
function addChildNodeLazy(NodeID, NodeName, ParentID){
        jQuery("#tree2").dynatree("getTree").getNodeByKey(ParentID).addChild({title: NodeName, key: NodeID, icon: false, isFolder: true, isLazy: true});
    } 
```

# java - web.xml 中的会话超时不适用于 weblogic 服务器

> ID：12930703
> 
> 赞同：4
> 
> 时间：2012-10-17T09:03:27.990
> 
> 标签：java, tomcat, weblogic

我在 web.xml 中将超时设置为 30 分钟，并在 WebLogic 中成功部署了 webapp。现在应用程序已启动并运行，但当达到最大非活动间隔时，会话不会超时。同样的应用程序在 tomcat 中正确超时。

任何人都可以提出一些想法吗？

另外我想知道是否有特定于应用程序的 weblogic.xml？如果是，那么我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-07T17:36:12.640

您有几个选择：

1.  您可以编辑文件 web.xml：在文件 web.xml 中编辑 session-config 的 session-timeout。请注意在 web.xml 中，会话超时以分钟为单位设置。

    ```
    <session-config>
             <session-timeout>60</session-timeout>
    </session-config> 
    ```

2.  您可以编辑文件 weblogic.xml：编辑文件 weblogic.xml 中的会话参数 TimeoutSecs。在 weblogic.xml 中，会话超时以秒为单位设置。

    ```
     <session-descriptor>
           <session-param>
               <param-name>TimeoutSecs</param-name>
              <param-value>3600</param-value>
          </session-param>
     </session-descriptor> 
    ```

请注意，web.xml 中设置的超时值优先于 weblogic.xml。如果您未在 web.xml 中设置任何值，weblogic.xml 将接管。处理会话超时的一个好方法是仅在 web.xml 本身上设置它，因为 web.xml 优先于应用程序服务器的部署描述符。

有关详细信息，请参阅：http: [//download.oracle.com/docs/cd/E15523_01/web.1111/e13712/web_xml.htm#i1023849](http://download.oracle.com/docs/cd/E15523_01/web.1111/e13712/web_xml.htm#i1023849)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:24:45.087

web.xml 和 weblogic.xml 中的会话超时设置应该可以工作。请注意，web.xml 中的单位是分钟，而 weblogic.xml 中的单位是秒。

并且 web.xml 中的超时设置优先于 weblogic.xml。

weblogic.xml 应该在 WEB-INF/ 下

对于 weblogic.xml 中的会话描述符：

[http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/weblogic_xml.html#wp1071982](http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/weblogic_xml.html#wp1071982)

# xslt - XSL 不传递参数

> ID：12930705
> 
> 赞同：0
> 
> 时间：2012-10-17T09:03:33.607
> 
> 标签：xslt, xslt-1.0

**问题**

从通配符模板匹配通过时，我的参数为空。

**我的 xml 来源：**

```
<c:control name="table" flags="all-txt-align-top all-txt-unbold">
    <div xmlns="http://www.w3.org/1999/xhtml">
       <thead>
          <tr>
             <th></th>
          </tr>
       </thead>
       <tbody>
          <tr>
             <td> </td>
          </tr>
       </tbody>
</c:control> 
```

**我的 XSL：**

最初的`c:control[@name='table']`匹配是与更广泛的 XSL 体系结构有关，并从主模板中分离出调用

```
<xsl:template match="c:control[@name='table']">
    <xsl:call-template name="table" />
</xsl:template> 
```

然后它调用另一个文件中的命名模板，这不应该改变我的起始引用 - 我应该仍然能够引用 c:control[@name='table'] ，就好像我在匹配的模板中一样。

```
<xsl:template name="table">
        <xsl:variable name="all-txt-top">
            <xsl:if test="contains(@flags,'all-txt-align-top')">true</xsl:if>
        </xsl:variable>
        <xsl:variable name="all-txt-unbold" select="contains(@flags,'all-txt-unbold')" />

        <div xmlns="http://www.w3.org/1999/xhtml">
            <table>
                <xsl:apply-templates select="xhtml:*" mode="table">
                    <xsl:with-param name="all-txt-top" select="$all-txt-top" />
                    <xsl:with-param name="all-txt-unbold" select="$all-txt-unbold" />
                </xsl:apply-templates>
            </table>
        </div>
    </xsl:template> 
```

如果我`all-txt-top`在上面的模板中得到值，它会按预期工作。但是，尝试将其传递给下面的模板失败了——我什么也没得到。

```
 <xsl:template match="xhtml:thead|xhtml:tbody" mode="table">
        <xsl:param name="all-txt-top" />
        <xsl:param name="all-txt-unbold" />

        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="*" mode="table" />
        </xsl:element>
    </xsl:template> 
```

即使我尝试将一个简单的字符串作为参数传递 - 它也不会进入 xhtml:thead 模板。

不知道我哪里出错了......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:32:24.540

在您向我们展示的示例代码中，您在匹配**c:control**元素后调用命名**表**模板

 **```
<xsl:template match="c:control[@name='table']">
  <xsl:call-template name="table" />
</xsl:template> 
```

这意味着在**表格**模板中，当前上下文元素是**c:control**。**但是，在您的示例 XML 中， c:control**的唯一子元素是 div 元素。因此，当您执行应用模板时......

```
<xsl:apply-templates select="xhtml:*" mode="table"> 
```

...此时它将寻找与**xhtml:div**匹配的模板。如果你没有这样的模板，默认的模板匹配将会启动，它会忽略元素并处理它的子元素。但是，这不会传递任何参数，因此与**xhtml:thead**匹配的模板将没有任何参数值。

一种解决方案是有一个模板来专门匹配 xhtml:div 元素，并传递属性

```
<xsl:template match="xhtml:div" mode="table">
    <xsl:param name="all-txt-top"/>
    <xsl:param name="all-txt-unbold"/>
    <xsl:apply-templates select="xhtml:*" mode="table">
        <xsl:with-param name="all-txt-top" select="$all-txt-top"/>
        <xsl:with-param name="all-txt-unbold" select="$all-txt-unbold"/>
    </xsl:apply-templates>
</xsl:template> 
```

事实上，如果您想处理更多元素，您可以将此处的模板匹配更改为“xhtml:*”以使其更通用。**

# php - Symfony 2 将验证移至实体，与相关实体进行验证

> ID：12930707
> 
> 赞同：4
> 
> 时间：2012-10-17T09:03:37.963
> 
> 标签：php, symfony, doctrine-orm, validation

我有上诉实体；SiteTariff、用户实体；关税，站点实体 如何将验证转移到实体。验证复杂：与相关实体。我试图写一个回调（在实体）=> 没有结果。

```
 $appeal = new Appeal();
    $form = $this->createFormBuilder($appeal);

    if ($request->isMethod('POST'))
    {
        $form->bind($request);

        $appeal->setUser($user); //addRelation

        $appeal->appeals_count = $value; //set value to public field

        if ($site_tariff_id = $form->getData()->site_tariff_id)
        {
            $siteTariff = $em->find('', $site_tariff_id);
            $appeal->setSiteTariff($siteTariff); //addRelation
        }
        else
        {
            //addError, break
        }                      

        if ($appeal->getSiteTariff()->getSite()->getUser()->getId() != $user->getId())
        {
            //addError
        }

        if ($appeal->getSiteTariff()->getTariff()->getAppealsNumber() <= $appeal->appeals_count)
        {
            //addError
        }

        if ($form->isValid())
        {
            $em->persist($appeal);
        }
    } 
```

在回调我没有得到 $siteTariff 对象后调用`$this->getSiteTariff()`，symfony 写“**非对象**”

```
 public function isSiteTariffValid(ExecutionContext $context)
    {
        var_dump($this->getSiteTariff()->getId());    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:32:27.147

您的验证代码应该在您的实体内，而不是在您的控制器内。请参考文档：[http ://symfony.com/doc/current/reference/constraints/Callback.html](http://symfony.com/doc/current/reference/constraints/Callback.html)

# c# - 将带有参数的 Web 服务引用添加到 dll

> ID：12930708
> 
> 赞同：0
> 
> 时间：2012-10-17T09:03:41.950
> 
> 标签：c#, web-services

我按照链接上的说明进行操作：[如何在 dll 中添加 Web 服务引用，](https://stackoverflow.com/questions/2247798/how-to-add-a-web-service-reference-in-a-dll)并且我设法测试了我的 Web 服务在我的控制台应用程序中是否有效。现在，我需要做的是允许将参数传递给我的 Web 服务，因为这个 dll 将在我们的系统中用于执行验证。这是我在 program.cs 文件中使用的代码：

```
static void Main(string[] args)
{           
    var svc = new ReferencedWebserviceAPI.WebReference.WebService1
    {
        Url = ConfigurationManager.AppSettings["ServiceUrl"]
    };

    var result = new ReferencedWebserviceAPI.WebReference.WebResult();
    result = svc.Validate(8888888, true, 1, true, 12345, true, "MR A TEST") ;
    Console.WriteLine(result.Message);
    Console.ReadLine();
} 
```

# ios - 修改 UINavigationController 会损坏导航堆栈

> ID：12930714
> 
> 赞同：0
> 
> 时间：2012-10-17T09:04:06.640
> 
> 标签：ios, sdk, uinavigationcontroller, navigation, popviewcontroller

我有一个标准的 UINavigation 控制器，可以像往常一样使用 push 和 pop 来推送我的屏幕。但是，我有一个屏幕可以在按下按钮时在两个视图控制器之间切换，因此屏幕翻转到顶部会显示另一个视图控制器，反之亦然。您可以随意在它们之间切换。

现在，我希望后退按钮正常工作，因此我交换顶视图控制器以实现此目的，如下所示：

```
-(IBAction)switchToSlowProductEntry:(id)sender
{   
    NSLog(@"Switching to slow product entry");

    // Replace the top view with the findProductView
    FindProductView *findProdView = [ProductViewInstances shared].findProductView;
    NSMutableArray *views = [self.navigationController.viewControllers mutableCopy];

    [views removeLastObject];
    [views addObject:findProdView];

    // if sender is nil then assume we started from the viewDidLoad so no animation
    if(sender)
    {
        [UIView transitionWithView:self.navigationController.view duration:0.3 options:UIViewAnimationOptionTransitionFlipFromRight animations:^
        {
            [self.navigationController setViewControllers:views animated:NO];
        }
        completion:^(BOOL finished) {}];
    }
    else
        [self.navigationController setViewControllers:views animated:NO];

    NSLog(@"Views: %@", views);
    [views release];
    [ProductViewInstances shared].lastScreen = SlowProductEntryView;
}

-(IBAction)switchToQuickProductEntry:(id)sender
{
    NSLog(@"Switching to fast product entry");

    // Replace the top view with the findProductView
    QuickOrderEntryView *quickProductView = [ProductViewInstances shared].quickProductView;
    NSMutableArray *views = [self.navigationController.viewControllers mutableCopy];

    [views removeLastObject];
    [views addObject:quickProductView];

    if(sender)
    {
        [UIView transitionWithView:self.navigationController.view duration:0.3 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^
         {
             [self.navigationController setViewControllers:views animated:NO];
         }
        completion:^(BOOL finished) {}];
    }
    else
        [self.navigationController setViewControllers:views animated:NO];

    NSLog(@"Views: %@", views);
    [views release];
    [ProductViewInstances shared].lastScreen = QuickProductEntryView;
} 
```

对于另一个屏幕，我有一段类似的代码。我正在使用 ProductViewInstances 类来维护两个视图控制器，因为我不希望在我在屏幕上维护阶段时卸载这些类。

当你想从这些屏幕向前移动时，我会像往常一样推送到新屏幕。它有效，我在查看了我添加的产品后返回。如果我按回，我会回到上面的屏幕，一切看起来都很正常。但是，当我按下自定义后退按钮（如果按下后我需要进行处理）时，我遇到了问题。

popViewController 什么都不做。这是基类中用于管理自定义后退按钮的代码。

```
-(void) viewDidLoad
{   
    self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Back", nil)
                                                                              style:UIBarButtonItemStyleBordered
                                                                             target:self
                                                                             action:@selector(myCustomBack)] autorelease];
    if(![ProductViewInstances shared].findProductView)
    {
        [ProductViewInstances shared].findProductView = [[FindProductView alloc] init];
        [ProductViewInstances shared].findProductView.customer = self.customer;
    }
    if(![ProductViewInstances shared].quickProductView)
    {
        [ProductViewInstances shared].quickProductView = [[QuickOrderEntryView alloc] init];
        [ProductViewInstances shared].quickProductView.customer = self.customer;
    }
}

-(void) goBack
{
    if([[ProductViewInstances shared].quickProductView checkIfItemsPending])
    {
        // Pop up dialog
        UIAlertView * alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Save Entries", nil)
            message:NSLocalizedString(@"Your entries will be lost", nil)
            delegate:self
            cancelButtonTitle:NSLocalizedString(@"Cancel", nil)
            otherButtonTitles:NSLocalizedString(@"Save", nil), nil];
        [alert show];
        [alert release];
    }
    else
    {
        // Remove rows from quick item entry screen
        [[ProductViewInstances shared].quickProductView removeRowsFromtable];
        if(didPressHome)
            [self popToSpringBoard:YES];
        else
            [self.navigationController popViewControllerAnimated:YES];
    }
} 
```

因此，当我回击时，我必须检查条目是否会丢失。弹出到 SpringBoard 会弹出几个屏幕并基本上调用以下内容：

```
NSArray *controllers = appDelegate.navigationController.viewControllers;
UIViewController *springboard = [controllers objectAtIndex:2];
[appDelegate.navigationController popToViewController:springboard animated:animated]; 
```

然而，popViewController 动画调用什么也没做……就好像它从未发生过一样。

多尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:48:01.947

```
@selector(myCustomBack) will not call goBack unless you left out some code. 
```

# mysql - GROUP_CONCAT 与 ORDER BY ，但结果未排序

> ID：12930715
> 
> 赞同：0
> 
> 时间：2012-10-17T09:04:07.503
> 
> 标签：mysql, sql-order-by, subquery, group-concat

```
SELECT
*,
(SELECT
GROUP_CONCAT(url SEPARATOR '$$' )
FROM project_photos
WHERE project_id = projects.id
ORDER BY priority) AS images
FROM projects
WHERE catID = 2
LIMIT 0,5 
```

上面的查询工作正常，但列`images`没有优先排序，无法理解为什么会发生

```
// Structure for table project is
CREATE TABLE `projects` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`catID` int(11) NOT NULL,
`title` varchar(255) NOT NULL,
`description` varchar(400) NOT NULL,
`url` varchar(255) DEFAULT NULL,
`tags` varchar(255) DEFAULT NULL,
`featured` varchar(3) NOT NULL DEFAULT 'No',
`featured_url` varchar(255) DEFAULT NULL,
`order` int(11) DEFAULT NULL,
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`id`),
KEY `catID` (`catID`),
CONSTRAINT `FK_catID` FOREIGN KEY (`catID`) REFERENCES `category` (`catID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=48 DEFAULT CHARSET=latin1;

// Structure for table project_photos is

CREATE TABLE `project_photos` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`url` varchar(250) DEFAULT NULL,
`project_id` int(11) DEFAULT NULL,
`priority` int(11) DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=347 DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:07:16.873

`ORDER BY`在应用聚合函数（**如**`GROUP_CONCAT()`. `GROUP_CONCAT()`要对将其放入参数中的结果进行排序：

```
SELECT
GROUP_CONCAT(url ORDER BY priority SEPARATOR '$$')
FROM project_photos
WHERE project_id = projects.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:07:27.413

尝试`ORDER BY`在里面使用`GROUP_CONCAT`

```
SELECT
*,
(SELECT
GROUP_CONCAT(url ORDER BY priority SEPARATOR '$$' )
FROM project_photos
WHERE project_id = projects.id
) AS images
FROM projects
WHERE catID = 2
LIMIT 0,5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T09:07:56.310

您应该将该`order by`子句放在组 concat 中：

```
GROUP_CONCAT(url SEPARATOR '$$' ORDER BY priority) 
```

外面正在订购不同的`order by`行。因为你只有一个，所以它什么都不做。在组 concat 中，它将对该`group by`子句创建的组的元素进行排序。

# ios - 更新 iOS 国际化的翻译

> ID：12930717
> 
> 赞同：1
> 
> 时间：2012-10-17T09:04:10.233
> 
> 标签：ios, xcode, internationalization, nslocalizedstring, genstrings

要`NSLocalizedString`在我的 iOS 应用程序中提取字符串“marked”，我使用以下终端命令：

```
find . -name \*.m | xargs genstrings -o ro.lproj 
```

这将基本上提取所有 .m 文件中的所有标记字符串，并将它们放在我的项目 romanian 文件夹内的 Localizable.strings 文件中。

我的问题是我无法让它更新字符串文件。如果我更改/添加一些字符串，它将覆盖我的旧字符串文件。

我查看了`genstrings`接受的参数，查看了手册页，我似乎没有找到更新文件而不是覆盖它的选项。

如何更新翻译文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:49:48.200

`genstrings`不做更新。如果是这样，您仍然会遇到如何管理本地化文件更新的问题（这需要翻译人员注意更改他们的翻译，特别是对于已编辑的源字符串，因此他们需要查看源文本的差异）。

有为此设计的工具。例如 Localization Suite 桌面应用程序 ( [http://www.loc-suite.org/](http://www.loc-suite.org/) ) 和 Gengo String 网络应用程序 ( [http://gengo.com/string/about/](http://gengo.com/string/about/) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:11:53.627

你可以：

*   使用`-a`将字符串附加到现有文件的标志
*   或者，为输出选择不同的位置并使用文件合并工具来收集结果。
*   或者使用版​​本控制合并回以前的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T18:38:12.917

Genstrings 不会更新，它是一次性交易。我使用 Linguan 工具，请参阅[http://www.peerassembly.com/linguan.html](http://www.peerassembly.com/linguan.html) 它并不昂贵，并且适用于 xcode 5。您只需将其指向您的 xcode 项目，它就会从您的代码中提取所有字符串（类似于 genstrings但没有命令行的东西）并构建 .strings 文件。当你更新你的代码时，你要求林冠再次扫描，它会很好地告诉你新的字符串是什么。您还可以执行其他操作，例如统计、导出、导入...

# javascript - Javascript 文本范围到插入符号位置

> ID：12930722
> 
> 赞同：0
> 
> 时间：2012-10-17T09:04:44.870
> 
> 标签：javascript, html, contenteditable, caret, textrange

我正在使用 IE 8，我想在 contenteditable div 中创建一个文本范围，该范围应包括插入符号位置之前的所有文本（我在 editableDiv 中知道）。到目前为止，我能够选择 div 中的所有文本：

```
 function myFunction(editableDiv, cursorPosition)
 {
    if (document.selection) {
       var range = document.body.createTextRange();
        range.moveToElementText(editableDiv);            
        range.collapse(false);
        range.select();
    }
 }

<div id="myDiv" runat="server" contenteditable="true"> 
```

但是如何创建一个从 div 中的第一个字符开始并持续到插入符号位置的文本范围？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:31:09.030

使用`setEndPoint()`方法`TextRange`：

```
var caretRange = document.selection.createRange();
var preCaretRange = document.body.createTextRange();
preCaretRange.moveToElementText(editableDiv);
preCaretRange.setEndPoint("EndToStart", caretRange); 
```

显然，非 IE 浏览器需要不同的代码。

# jsf-2 - 在支持 bean 中生成 Primefaces 图表的 png/jpeg 图像？

> ID：12930731
> 
> 赞同：3
> 
> 时间：2012-10-17T09:05:26.323
> 
> 标签：jsf-2, charts, primefaces, backing-beans

我在我的应用程序中使用 Primefaces 3.1.1 图表，在 JSF 页面中生成图表没有问题，但我试图找出是否可以为图表生成图像（png 或 jpeg）以便我可以插入这些在 Java 中将图像转换为 Excel 文件（Apache POI）。

我知道最新的 Primefaces 版本 3.4.1 具有导出图表功能，但生成的图像仅出现在客户端（它是 jqPlot）。但我需要它在服务器端。

目前我们为此目的在支持 bean 中使用 jFreeChart，因此浏览器中的图表看起来与 Excel 中的图表非常不同。我们正在尝试通过升级到 Primefaces 3.4.1 是否可以让我们选择使浏览器中的图表和 Excel 中的图表看起来相同？还是有另一种方法可以做到这一点？

如果这是一个问题，请使用 mojarra-2.1.3-FCS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T17:34:59.113

正如 Daniel 提供的已接受答案一样，Primefaces 的图表在服务器端不可用。我在这里添加一个答案只是为了展示一个可能的解决方法。

在客户端，我们将 base64 PNG 编码的字符串分配给一个隐藏字段值，这是一个从 Primefaces 导出图表演示源代码修改的示例：

```
<h:form id="hform">
    <p:lineChart value="#{testBean.linearModel}" legendPosition="e"
        zoom="true" title="Linear Chart" minY="0" maxY="10"
        style="width:500px;height:300px" widgetVar="chart" />
    <p:commandButton id="exp" value="Export" icon="ui-icon-extlink"
        onclick="exportChart();"
        actionListener="#{testBean.submittedBase64Str}" />
    <h:inputHidden id="b64" value="#{testBean.base64Str}" />
    <script type="text/javascript">
        function exportChart() {
        // exportAsImage() will return a base64 png encoded string
        img = chart.exportAsImage();
        document.getElementById('hform:b64').value = img.src;
        }
    </script>
</h:form> 
```

在 backing bean，我们需要对字符串进行解码，一个简单的例子如下：

```
public void submittedBase64Str(ActionEvent event){
    // You probably want to have a more comprehensive check here. 
    // In this example I only use a simple check
    if(base64Str.split(",").length > 1){
        String encoded = base64Str.split(",")[1];
        byte[] decoded = org.apache.commons.codec.binary.Base64.decodeBase64(encoded);
        // Write to a .png file
        try {
            RenderedImage renderedImage = ImageIO.read(new ByteArrayInputStream(decoded));
            ImageIO.write(renderedImage, "png", new File("C:\\out.png")); // use a proper path & file name here.
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

PNG 文件现在存储在服务器中，您可以继续在代码的其他部分使用该文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:03:51.237

正如您已经知道 Primefaces 使用 jqPlot 插件来生成图表，由于 jqPlot 是一个 jquery 客户端插件，它不能在服务器端生成任何东西，它是一个 jquery 插件而不是一些服务器端 api (jar)

所以答案是**否定**的：/

您可能会考虑使用其他一些服务器端图表生成器（查看下面的链接），它将生成更好看的图表

[13、还有其他“开源”的图表库吗？（在底部）](http://www.jfree.org/jfreechart/faq.html)

[什么是最好的开源 Java 图表库？（除了 jfreechart）](https://stackoverflow.com/questions/265777/what-is-the-best-open-source-java-charting-library-other-than-jfreechart)

# ehcache - 如何清除methodcacheinterceptor缓存

> ID：12930735
> 
> 赞同：1
> 
> 时间：2012-10-17T09:05:28.573
> 
> 标签：ehcache, clear-cache

我正在开发一个 Web 应用程序，我在其中编写了一个方法，在该方法中我调用了一个 json url 并对其进行解析并存储在一个 pojo 类中。

我只是使用methodcacheinterceptor概念缓存这个方法，我的xml配置如下：

```
<bean id="methodCacheInterceptor"
    class="web.app.services.MethodCacheInterceptor">
    <property name="cache">
        <ref local="methodCache" />
    </property>
</bean>

<bean id="methodCache" class="org.springframework.cache.ehcache.EhCacheFactoryBean">
    <property name="cacheManager">
        <ref local="cacheManager" />
    </property>
    <property name="cacheName">
        <value>videoItemsCache</value>
    </property>
</bean>

<bean id="cacheManager"
    class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
    <property name="configLocation">
        <value>/WEB-INF/ehcache.xml</value>
    </property>
</bean>

<bean id="methodCachePointCut"
    class="org.springframework.aop.support.RegexpMethodPointcutAdvisor">
    <property name="advice">
        <ref local="methodCacheInterceptor" />
    </property>
    <property name="patterns">
        <list>
            <value>.*web.app.services.ItemCollectionImpl.getCollection</value>
            <value>.*web.app.services.ItemCollectionImpl.buildCollection</value>
        </list>
    </property>
</bean> 
```

我设置了 20 分钟的缓存时间，效果很好！

我想要的只是一个特定的活动，我想覆盖和清除那些缓存，下次我访问页面时，我希望执行整个方法，并且不应该从缓存中加载数据（我想清除缓存）特定的活动。

**供参考**

CacheManager.getInstance().getCacheNames() - 这将打印我在 xml 配置中给出的缓存名称。

我试过 CacheManager.getInstance().clearAll(), removeall 方法，但它不起作用！！

任何人都在这里帮助我！

提前致谢。

# c# - 反转链表的顺序

> ID：12930741
> 
> 赞同：0
> 
> 时间：2012-10-17T09:05:49.323
> 
> 标签：c#, asp.net

我有一个链表，它添加了一个像树一样的对象，下面是打印输出的 LinkedList nodeList = new LinkedList();

（结果 A）

```
1 : Tester Meeting
2 : Adminstrative & Operational 
3 : Functional Committees
4 : Aduit Committee
9 :    Supporting Services Development
8 :    Medical Services Development 
7 :    Information Technology Services 
6 :    Human Resources Committee
15 :          test2-2
14 :       test2
13 :          test1-1
12 :       test1
5 :    Finance Committee
10 : Regional Advisory Committees
11 : Board Workshop 
```

（结果B）以下应该是正确的顺序

```
Tester Meeting
Adminstrative & Operational 
Functional Committees
Aduit Committee
   Finance Committee
      test1
         test1-1
      test2
         test2-2
   Human Resources Committee
   Information Technology Services 
   Medical Services Development 
   Supporting Services Development
Regional Advisory Committees
Board Workshop 
```

所以，我想颠倒（ResultA）的审计委员会子节点的顺序输出与ResultB相同的结果，有没有什么方法可以对链表的特定节点进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:10:05.123

没有。链表除了项目创建的顺序之外没有排序顺序的概念。它意味着快速遍历和添加许多项目。我不确定这种数据结构是否完全适合您的需求。

我不确定你的要求是什么。也许如果您能列出要求，我们可以提出一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:17:01.143

从您描述的内容来看，树结构看起来更合适。

这是关于树的遍历。这是关于你是从左到右还是从右到左遍历孩子：

类程序 { 静态无效 Main(string[] args) { 节点 rootNode = new Node(); rootNode.Name = "根"; 节点 node1 = new Node(); node1.Name = "孩子 1";

```
 Node node2 = new Node();
    node2.Name = "child 2";

    rootNode.Children.Add(node1);
    rootNode.Children.Add(node2);

    Node node3 = new Node();
    node3.Name = "child 3";

    node1.Children.Add(node3);

    Traverse(rootNode);

    Console.WriteLine("Reverse: ");

    TraverseReverse(rootNode);

}

private static void Traverse(Node node)
{
    Console.WriteLine(node.Name);
    for (int index = 0; index < node.Children.Count;index++ )
    {
        Traverse(node.Children[index]);
    }            
}

private static void TraverseReverse(Node node)
{
    Console.WriteLine(node.Name);
    for (int index = node.Children.Count-1; index >=0; index--)
    {
        TraverseReverse(node.Children[index]);
    }
} 
```

}

输出：

```
root
child 1
child 3
child 2
Reverse:
root
child 2
child 1
child 3 
```

# html - 包含缓存清单的文件自动包含自身

> ID：12930746
> 
> 赞同：0
> 
> 时间：2012-10-17T09:06:06.193
> 
> 标签：html, browser-cache

我有一个网页，提供大量我想要缓存的图像。为此，我有一个 PHP 脚本，列出了我需要的图像的路径。最终文档如下所示：

```
CACHE MANIFEST

NETWORK:
*

CACHE:
uploads/categoriasactuaciones/1.png
uploads/categoriasactuaciones/10.png 
[...]
uploads/riesgos/5.png 
uploads/riesgos/6.png 
```

问题是`<html>`标签中包含清单的页面会自动缓存，并且登录逻辑所在的位置。有没有办法禁用它？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:11:26.860

您可以通过从您获取页面的任何位置向查询字符串添加随机参数来欺骗浏览器，使其相信它始终是不同的页面。

例如：

```
<a href="page.html?r=<?= /* your random string here */ ?>">Link here</a> 
```

这样浏览器就不会使用缓存的页面，而是发出一个新的请求。

如果您不想缓存的页面是您的索引页面，这可能不起作用。但是您可以改为在响应标头中设置 Cache-Control 参数，使用诸如 PHP 的 header() 之类的函数（这当然取决于您的编程语言）：

```
<?php
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

此外，如果您使用的是框架，您不妨利用框架的缓存配置。

（来源： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)）

# linq-to-sql - 如何阻止自动生成 LINQ to SQL 存储过程接线代码？

> ID：12930747
> 
> 赞同：1
> 
> 时间：2012-10-17T09:06:09.417
> 
> 标签：linq-to-sql

`IMultipleResult`我有一个用于返回在部分类中实现的存储过程的 LINQ to SQL 接线代码。

当您在`dbml`文件中添加新对象时，会再次生成存储过程接线代码；这会导致代码在我的部分类和`designer.cs`.

如何标记存储过程，使`dbml`设计器中的更改不会自动生成接线代码？

```
namespace Audit
{
    public partial class LinqAuditDataContext 
    {
        [Function(Name = "getRows")]
        [ResultType(typeof(featuresE))]
        [ResultType(typeof(featuresWater))]
        [ResultType(typeof(featuresV))]
        public IMultipleResults getRows([global::System.Data.Linq.Mapping.ParameterAttribute(DbType = "Int")] System.Nullable<int> page, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType = "Int")] System.Nullable<int> rowsshow, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType = "NVarChar(30)")] string table, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType = "Bit")] System.Nullable<bool> fact, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType = "Int")] System.Nullable<int> id_obj)
        {
            IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), page, rowsshow, table, fact, id_obj);
            return ((IMultipleResults)(result.ReturnValue));
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:48:38.733

我删除了 dbml 文件中的 getrows 并在部分类的不同文件中定义。它有效......也许有一个想法？

部分 LinqAuditDataContext 中的函数

```
public partial class LinqAuditDataContext 
    {
        [Function(Name = "getRows")]
        [ResultType(typeof(featuresE))]
        [ResultType(typeof(featuresWater))]
        [ResultType(typeof(featuresV))]
        public   IMultipleResults getRows(System.Nullable<int> page,  System.Nullable<int> rowsshow, 
            string table, System.Nullable<bool> fact, 
            System.Nullable<int> id_obj, bool t)
        {
            IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), page, rowsshow, table, fact, id_obj);
            return ((IMultipleResults)(result.ReturnValue));
        }

    } 
```

# delphi - 监视单个文件更改的最简单方法是什么？

> ID：12930757
> 
> 赞同：3
> 
> 时间：2012-10-17T09:06:40.087
> 
> 标签：delphi, delphi-xe2

我应该查看 shell 通知吗？有没有好的免费组件，或者一些示例源代码？

或者我应该只启动一秒计时器并定期检查文件的时间戳？

它不必很优雅，只要最简单的就行。我对文件更改时将执行的处理更感兴趣（它是一个日志文件，每当它更新时，我想解析它并显示测试运行的一些细节）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:09:55.787

Shell 通知很好，但比计时器更复杂。如果一秒钟的轮询间隔足够好，您可以使用它。

但是您可以自己构建一个“监视器”，它封装了实际的监控代码。如果文件更改，此监视器会引发事件。您的那个监视器可以首先封装一个计时器（简单，两分钟的工作），但可以修改为稍后使用 shell 通知（更好），而无需修改所有应用程序逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T13:54:23.143

[Jedi VCL](http://jvcl.sf.net)从 RxLib 继承 change-notification/folder-monitor。
RxLib 也可能适用于旧版本的 Delphi

顺便说一句，你没有指定你的 Delphi 版本。请按 RETAG 链接并添加正确的标签。

# jquery - 如何在延迟的情况下调用 jquery 函数 onload？

> ID：12930759
> 
> 赞同：1
> 
> 时间：2012-10-17T09:06:42.473
> 
> 标签：jquery, function, delay, onload

如何在延迟的情况下调用 jquery 函数 onload？

我想在加载时调用这样的函数，但有一些延迟

```
$(".sample").live('click',function(){
        var id=$(this).attr("id"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T09:09:09.080

这将等待 1 秒，然后分配事件处理程序...

```
function assignSampleClick() {
    $(".sample").live('click',function(){
        var id=$(this).attr("id");
    });
}

// document ready
$(function() {
    setTimeout(assignSampleClick, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:12:53.273

试试这样。。

```
$(document).ready(function () {
setTimeout(function () {
$(".sample").live('click',function(){
var id=$(this).attr("id");
   }, 3000);
}, 3000); 
```

这将在 3 秒延迟后在页面加载时触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:13:26.027

你可以使用 setTimeout 函数你必须重构你的代码像这样

```
 //2 seconds wait before calling doJob
    $(".sample").live('click',function(){ setTimeout(doJob, 2000);});

    function doJob(){
        var id=$(this).attr("id");
        //other statements ...
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T09:09:47.967

尝试使用[定时器插件](http://archive.plugins.jquery.com/project/timers)

```
$(this).oneTime(1000, function() {
     // some action here
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-25T18:57:16.163

试试这个

```
 var demora = window.setInterval(lerolero, 3000);
function lerolero() {
     $("#ovo").css("display", "block");
	}
```

# c# - 如何通过 C# 将参数传递给 PowerShell

> ID：12930762
> 
> 赞同：6
> 
> 时间：2012-10-17T09:06:51.833
> 
> 标签：c#, powershell

我在通过 C# 向 PowerShell 传递参数时遇到问题

我收到以下异常：

> “提示用户的命令失败，因为主机程序或命令类型不支持用户交互。尝试支持用户交互的主机程序，例如 Windows PowerShell 控制台或 Windows PowerShell ISE，并从命令中删除提示相关的命令不支持用户交互的类型，例如 Windows PowerShell 工作流”

CS：

```
private static void RunPowershellScript(string scriptFile, string scriptParameters)
{
    string scriptParameters = "param1 param2";

    RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
    Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
    runspace.Open();
    RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);
    Pipeline pipeline = runspace.CreatePipeline();
    Command scriptCommand = new Command(scriptFile);
    Collection<CommandParameter> commandParameters = new Collection<CommandParameter>();
    foreach (string scriptParameter in scriptParameters.Split(' '))
    {
        CommandParameter commandParm = new CommandParameter(null, scriptParameter);
        commandParameters.Add(commandParm);
        scriptCommand.Parameters.Add(commandParm);
    }
    pipeline.Commands.Add(scriptCommand);
    Collection<PSObject> psObjects;
    psObjects = pipeline.Invoke();
} 
```

ps：

```
Function Foo ($arg1, $arg2)
{
    Write-Host $arg1
    Write-Host $arg2
}
Foo $args[0] $args[1] 
```

我在这里想念什么？我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T10:30:56.507

例外与论点无关。要么不使用需要实现（`Write-Host`包括）主机 UI 的命令，要么实现你自己的自定义主机（`PSHost`）和这个 UI（`PSHostUserInterface`）。这是一个简单主机的示例（如果您选择这种方式，MSDN 上有更多关于此的内容）：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee706559 (v= vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706559(v=vs.85).aspx)

对于简单的任务，用 UI 实现主机可能太多了。您可以考虑简单地定义一个`Write-Host`具有相同参数的函数并实现它，以便它在您的特定情况下工作（例如 dos `[Console]::WriteLine(...)`）。这个函数应该在脚本中定义，或者以不同的方式更好地提供给它，例如调用另一个脚本，在全局范围内定义它。

PS 如果您有自定义主机，则使用`CreateRunspace()`将主机实例作为参数的重载之一，以链接主机和运行空间。

# jquery - 控制滚动 OnScroll 滑动

> ID：12930769
> 
> 赞同：3
> 
> 时间：2012-10-17T09:07:12.500
> 
> 标签：jquery, scroll

我正在尝试使[此](http://beoplay.com/Products/BeoplayA9#in-use)滚动效果在网站上起作用。当用户向下滚动时，它会自动转到下一张幻灯片。当用户向上滚动时，它必须向后滑动一张。我`onScroll`在 Jquery 中使用该函数尝试了很多东西，但它们似乎都不起作用。

我使用以下脚本来检查用户是向上还是向下滚动。

```
var lastScrollTop = 0;
var check = 1;
var scrollDirection = 'down';

var scrollBottom = $(window).scrollTop() + $(window).height();
    $(window).scroll(function(event) {
        slideHeight = $('.slide').height();
         var st = $(this).scrollTop();
         if (st > lastScrollTop){
             scrollDirection = 'down';
             if (check == 1){
                $('body').scrollTo( {top:'0px', left:'100%'}, 800 );
     check = 0;    
 }

         } else {
             scrollDirection = 'up';
         }
         lastScrollTop = st;

         console.log('ScrollDirection: '+ scrollDirection);

    }); 
```

我不会比这更进一步。进行开发的（测试）网站是：[http](http://bit.ly/RBcffY) ://bit.ly/RBcffY 如果有人对这种功能有经验，那将非常有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T17:00:16.303

jquery.mousewheel插件可[用于](http://brandonaaron.net/code/mousewheel/docs)捕获鼠标滚轮，即使没有发生滚动（与 相反`$.scroll`）。这样，您既可以**检测**到鼠标滚轮被移动，又**可以防止**滚动发生。然后只需自己执行动画滚动即可。

```
var scrollingScreen = false;
$("body").mousewheel(function(event, delta) {
    if ( !scrollingScreen ) {
        scrollingScreen = true; // Throttles the call
        var top = $("body").scrollTop() || // Chrome places overflow at body
                  $("html").scrollTop();   // Firefox places it at html
        // Finds slide headers above/below the current scroll top
        var candidates = $(".slide").filter(function() {
            if ( delta < 0 )
                return $(this).offset().top > top + 1;
            else
                return $(this).offset().top < top - 1;
        });
        // If one of more are found, updates top
        if ( candidates.length > 0 ) {
            if ( delta < 0 )
                top = candidates.first().offset().top;
            else if ( delta > 0 )
                top = candidates.last().offset().top;
        }
        // Performs an animated scroll to the right place
        $("html,body").animate({ scrollTop:top }, 800, "easeInOutQuint", function() {
            scrollingScreen = false; // Releases the throttle
        });
    }
    return false; // Prevents default scrolling
});​ 
```

[jsFiddle](http://jsfiddle.net/DgmWs/5/)的工作示例。这与您显示的引用的行为非常一致，您可以根据需要添加额外的效果 - 通过在其回调函数之前`animate`或在其回调函数中插入代码，分别在滚动之前或之后执行它们。（Obs.：出于安全原因，运行在 an 中的小提琴`iframe`无法在某些浏览器中访问，因此它全局存储变量；但是，答案中显示的代码在独立页面中应该可以正常工作）`scrollTop``top`

**注意：**在参考站点和我的示例中，中间单击和移动鼠标都可以随意滚动。你可能想阻止或不阻止，你的选择。尽管如此，更新后的示例会滚动到特定点，而不是像您在问题中建议的那样添加一些增量 - `$('.slide').height()`。原因是考虑到不同幻灯片具有不同高度的可能性。此外，准确了解您正在展示的幻灯片可以让您正确设置该位置的哈希值。

另请参阅[此相关问题](https://stackoverflow.com/q/12849439/520779)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-08T19:17:55.763

这是我用于滚动 DIV 的版本。

顺便提一句。最好使用 object.stop()，让它在滚动变化时更平滑。

```
var vi = $('.box'), vis = $('.box .inbox');

// both events needed for Firefox
vi.on('mousewheel DOMMouseScroll', function(e) {

				var eo = e.originalEvent;
				var xy = eo.wheelDelta || -eo.detail; //shortest possible code

				var isScrollUp = xy /120 > 0;

				if (vi.hasClass('scrolling'+(isScrollUp ? '1' : '0'))) return; // no change
				var top = vi.scrollTop();
				var candidates = vis.filter(function() {
					if ( !isScrollUp )
						return this.offsetTop > top;
					else
						return jQuery(this).offset().top < - 1;
				});

				if (candidates.length > 0) {
					if (!isScrollUp)
						top = candidates.first()[0].offsetTop;
					else
						top = candidates.last()[0].offsetTop;
				}
				vi.addClass('scrolling'+(isScrollUp ? '1' : '0')).stop().animate({ scrollTop:top }, 300, "swing", function() {
					vi.removeClass('scrolling1 scrolling0');
				});
				return false; // no default
			});

<!-- begin snippet: js hide: false console: true babel: false -->
```

```
BODY{
padding:10px;
}
.box{
 height:300px;
 overflow:scroll;
 position:relative;
}

.inbox{
background:purple;height:300px;font-size:35px;color:#fff;font-weight:bold;
}
.inbox:nth-child(2n){background:lightblue;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<div class="box">
<div class="inbox">1 -- SCROLLIT</div>
<div class="inbox">2</div>
<div class="inbox">3</div>
<div class="inbox">4</div>
<div class="inbox">5</div>
<div class="inbox">6</div>
</div>
```

# google-chrome - 将顶级域指向 url 的最佳方法是什么？

> ID：12930776
> 
> 赞同：3
> 
> 时间：2012-10-17T09:07:43.973
> 
> 标签：google-chrome, dns, cross-browser, cross-domain, frames

我有以下情况，由于我们大学的 IT 部门，我有三个选择将顶级域指向托管在大学服务器上的内容：

*   重定向
*   使用框架
*   使用反向代理

我知道框架已被弃用并且很糟糕，但是让我可以设置反向代理的服务器听起来有点矫枉过正，并且重定向不是一种选择，因为 webapp 服务器的脏 URL 会出现在地址栏中。

因此，当我在 Chrome 中查找该站点时，我收到该站点包含不安全内容的消息，打开控制台告诉我“不安全内容”是我包含在页面中的 Google Webfonts。所有其他浏览器都运行良好...

有没有人对此有一个优雅的解决方案？首先，我对使用框架并不满意。

先谢谢各位了，加油！

我当然会提供所需的所有配置文件/代码片段！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:49:15.953

在这种情况下，最好和最干净的选择是带有 URL 重写的反向代理（如果您不喜欢 webapp 的代理）。如果您发布端点，我们将能够为您准备端点。或查看任何教程（例如[this](http://www.askapache.com/hosting/reverse-proxy-apache.html)、[this](http://publib.boulder.ibm.com/infocenter/reqpro/v7r1m0/index.jsp?topic=/com.ibm.rational.reqpro.install_upgrade.doc/topics/rw_apache.html)或[this](http://www.serverwatch.com/tutorials/article.php/10825_3290851_3/Reverse-Proxying-With-Apache-20.htm)）

没有人提到的一件重要的事情是，`ProxyPreserveHost`如果您在另一端处理标头处理，则使用该指令。

您也可以考虑使用正向代理而不是反向代理，它更易于配置。

完整的参考[在这里](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T21:16:06.840

混合使用 http 和 https，可能是导致不安全内容错误的原因。确保您使用相同的协议加载页面和字体。

至于指向你的域，我喜欢上面的虚拟主机解决方案。如果您的 IT 部门说其他一切都是“不可能的”，那么您可能会被框架卡住。:)

# excel - 宏将如何显示工作表的名称？

> ID：12930777
> 
> 赞同：1
> 
> 时间：2012-10-17T09:07:43.463
> 
> 标签：excel, vba

我有一个包含三张纸的 excel 文件：Peter、Jone 和 Paul。这些是 3 张纸的名称。现在我已经设置了一个宏，它会询问他们的名字，如果他们点击“是”，他们只能可视化或编写特定页面。例如，Peter 看不到 Jone 的工作簿。当琼斯打开文件时，excel 会随机问一些问题，比如“你是彼得吗？” 如果他单击“是”，则 Excel 将要求输入密码，因为工作表受到保护。在可能的情况下，所有的床单都被打开并受到保护。

我想让它更坚固............当我打开 excel 文件时，它会显示我想要去的宏？宏会问我我想在哪张纸上打开同一张纸的问题？

谁能帮我？

# javascript - 如何在三星 Galaxy S2 中查看控制台日志输出

> ID：12930780
> 
> 赞同：8
> 
> 时间：2012-10-17T09:07:49.463
> 
> 标签：javascript, android, debugging, mobile

我使用的是三星 Galaxy s2 版本 2.3.3，我在 android 默认网络浏览器中打开一个网页。

在页面中，我将 console.log("some info") 用于调试页面，但我无法在我的设备中看到 console.log 输出。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T19:43:13.807

# 警告：不再工作！

该解决方案似乎不再起作用，因为多年来没有维护 Web 工具。

* * *

尝试使用[JSConsole.com](http://jsconsole.com)。它是 JavaScript 的远程调试器。该设置基本上只是`<script>`在您的页面中注入一个标签。连接后，您可以`console.log`从 JSConsole 上的远程页面读取所有调用，以及在客户端执行命令。

### 设置步骤

1.  转到[JSConsole 主页](http://jsconsole.com/)，然后键入`:listen`.
2.  复制生成的`<script src="http://jsconsole.com/remote.js?..."></script>`.
3.  将其放入您需要调试的页面中。
4.  在任何浏览器（手机、平板电脑、台式机等）中打开您的页面。所有`console.log`呼叫都将转发到 JSConsole.com 窗口。

[**远程调试页面**](http://jsconsole.com/remote-debugging.html)上有更多详细信息以及一些有用的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T08:51:09.460

我们可以通过两种方式查看 console.log 消息

1.  使用 WINERE
2.  使用 Eclipse

**方法一：**

在 REmote 中使用 WEINRE 远程 WEB Inspector。它是一个 nodejs 包。安装 WINERE 的步骤。

1.  安装nodejs
2.  运行这个命令来安装 weinre : `npm install -g weinre`(对于 MAC `sudo npm install -g weinre`)
3.  然后启动 WINRE: `weinre --boundHost -all- --httpPort 8082`，这里 8082 是启动 WINERE 的端口号。
4.  然后在要调试或查看控制台消息的 HTML/网页中添加以下脚本标记，`<script src="http://xx.xx.xx.xx:8082/target/target-script-min.js#weinredemo"></script>`
5.  `xx.xx.xx.xx`是你机器的IP。
6.  `weinredemo`是您页面的 ID，您可以使用我们自己的任何 ID。
7.  然后打开页面，您希望在任何移动设备中查看控制台消息。
8.  使用任何 webkit 浏览器打开此页面，`http://localhost:8082/client/#weinredemo`
9.  转到控制台选项卡并查看消息。

**方法二：**

1.  请通过 USB 驱动器连接您的手机并查看 ECLIPSE 中列出的手机，并且需要为 Eclipse 安装 ANDROID ADT 插件才能在 Eclipse 中查看控制台消息。

# php - 来自 4+ 个表格的前 3 个结果

> ID：12930784
> 
> 赞同：1
> 
> 时间：2012-10-17T09:07:54.347
> 
> 标签：php, mysql

我在尝试着：

对于每个玩家，从 events_table 中列出的每个事件中获取他们的结果，并显示他们最好的 3 个结果的总数，因此：

约翰 id=1 打了全部，得分 16,11,12,4 所以前 3 = 39

获取这些数据的最简单方法是什么？

**Player_table**

```
id  /   name
------------
1   /   john
2   /   sam
3   /   bill
4   /   joe 
```

**事件表**

```
id  /   date
------------------
1   /   01/03/2012
2   /   04/04/2012
3   /   06/06/2012
4   /   08/08/2012 
```

**event_id_1_results_table**

```
player_id   /   score
---------------------
1           /   12
3           /   16
0           /   11
0           /   8 
```

**event_id_2_results_table**

```
player_id   /   score
---------------------
1           /   16
2           /   14
3           /   11
0           /   14 
```

**event_id_3_results_table**

```
player_id   /   score
---------------------
1           /   8
3           /   12
4           /   13
0           /   18 
```

**event_id_4_results_table**

```
player_id   /   score
---------------------
2           /   6
3           /   4
4           /   9
0           /   7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:29:18.697

假设您*必须*使用此数据库结构。

首先，您应该获取`$events`变量中的事件，然后使用事件 ID 生成结果查询，如下所示：

```
$results = array();
$event_joins = array();
foreach ($events as $v) {
   // eX.score AS eX_score
   $results[] = "e".$v['id'].".score AS e".$v['id']."_score"; 
   // LEFT JOIN event_id_X_results_table AS eX ON eX.player_id = Pt.id
   $event_joins = " LEFT JOIN event_id_".$v['id']."_results_table AS e".$v['id']."
                    ON e".$v['id'].".player_id = Pt.id ";
}
$qs = "SELECT Pt.*, 
      ".implode(",", $results)."
      FROM Player_table AS Pt
      ".implode("", $event_joins); 
```

上面生成的查询将生成如下表：

```
id / name / e1_score / e2_score / e3_score / e4_score
-----------------------------------------------------
 1 / john /       12 /       16 /        8 /     NULL
 2 / sam  /     NULL /       14 /     NULL /        6
 3 / bill /       16 /       11 /       12 /        4
 4 / joe  /     NULL /     NULL /       13 /        9 
```

使用此结果，您可以确定每个玩家的 3 个最高分数并将其相加。

根据事件的数量，这可能会以非常~~丑陋~~的大型连接查询告终，因为所有事件结果都位于单独的表中，因此如果您可以控制它，我会认真建议**重新考虑数据库结构。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:41:19.850

如果您需要或想要保留不同的表，请使用联合：

```
select sum(score)
from ((select score from event_id_1_results_table where player_id = 1)
       union
       (select score from event_id_2_results_table where player_id = 1)
       union
       (select score from event_id_3_results_table where player_id = 1)
       order by score desc limit 3) 
```

# entity-framework - 模型创建的关键非身份

> ID：12930785
> 
> 赞同：0
> 
> 时间：2012-10-17T09:07:54.443
> 
> 标签：entity-framework, key

我在实体框架中进行项目，我希望我的密钥**是非**身份的，我在模型构建中定义它：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  modelBuilder.Entity<trip>().HasKey(p =>  p.trip_id );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:51:30.130

添加这一行：

```
modelBuilder.Entity<trip>().Property(p => p.trip_id )
     .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None); 
```

# jquery - 添加两个“下一个”和“上一个”链接会破坏可滚动插件

> ID：12930789
> 
> 赞同：0
> 
> 时间：2012-10-17T09:08:08.823
> 
> 标签：jquery, jquery-tools

我正在使用`scrollable`来自[jquerytools.org](http://jquerytools.org/)的插件，我基本上需要在页面的顶部和底部添加下一个和上一个链接，但是由于某种原因，当我添加第二对链接时，可滚动功能会中断。我认为 HTML 表格可能是这里的罪魁祸首，因为我已经能够使用 div 元素让它工作，不幸的是我必须使用表格结构，就像你在下面的示例中看到的那样。

[工作示例](http://jsfiddle.net/FJFuY/)（使用一对下一个/上一个链接）

[损坏的示例](http://jsfiddle.net/FJFuY/1)（使用两对下一个/上一个链接）

对此我能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:54:05.330

您可以使用可滚动的 api 来使用 next 和 prev 功能请参考此链接

[http://jquerytools.org/documentation/scrollable/index.html](http://jquerytools.org/documentation/scrollable/index.html) http://jquerytools.org/documentation/scripting.html

请参考此[小提琴](http://jsfiddle.net/FJFuY/3/)以供参考

# android - 退款后无法在 Google Play 上重新购买应用内结算项目

> ID：12930792
> 
> 赞同：8
> 
> 时间：2012-10-17T09:08:22.477
> 
> 标签：android, in-app-billing

我在我的应用中实现了应用内计费，现在正在测试它对退款的处理。

我使用测试帐户购买了我的应用的托管应用内结算项目并退款。我的应用程序按预期收到了退款广播，它在恢复交易时看到该项目已退款，所以到目前为止一切都很好。

我的问题是我无法重新购买该物品来测试其他场景。当我尝试购买该商品时，Google Play 界面出现并显示一条错误消息，提示“您已经拥有该商品”。带有 2 个按钮“确定”和“详细信息”。如果我按详细信息，Google Play 会崩溃，然后我会返回我的应用程序。

有没有人有类似的经历？如果用户之前已退款，是否禁止用户购买应用内商品？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T03:45:09.817

我看到了同样的问题。GP崩溃和一切。

除了等待几个小时之外，您可能还需要打开“Google Play”应用信息并清除缓存和清除数据。这为我解决了。看来 GP 会在设备上缓存购买信息，并且很少（如果有的话）检查 Google 的服务器以获取退款信息。

**更新：** 您可能还想终止 Google Play 进程，因为它似乎也将购买信息保存在内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T02:11:01.970

我向 Google 询问了这个问题，他们告诉我，如果之前已退款，则无法在 Google Play 上重新购买应用内结算项目。但是当我在大约 24 小时后再次尝试购买时，购买通过了......

所以看起来有可能重新购买，但要经过一段时间的延迟。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-25T05:20:49.143

我知道这是一个老问题，但我一直在寻找同样问题的答案，最终得出了我自己的结论。谷歌没有详细说明，但我相信他们希望您根据自己的逻辑来决定如何处理取消和退款的购买。要记住的另一点是，消耗品和非消耗品托管产品之间基本上没有区别。所有被管理的产品都是消耗品。

对我来说，当用户取消购买，或者我决定给用户退款时，我想要发生的事情是 1）用户收到退款，2）用户无法访问付费功能，3）用户可以选择再次购买该功能。

我所做的是使用应用内计费 API 在我的后端服务器上检查购买的购买状态。如果返回的 purchaseState 是 1（已取消）或 2（已退款），我会在我的应用程序中消费该购买。Google 处理第 1 项，将用户的钱退还给用户。我的应用程序中的逻辑处理 2，锁定对付费功能的访问。消费购买手柄 3，让用户可以选择再次购买该功能。

它的基本要点是，当购买被发送到我的后端服务器进行验证时，我会检查购买状态。如果购买状态是 1 或 2，我会向我的应用程序返回一个适当的代码。当我的应用程序收到指示购买已取消或退款的代码时，我的应用程序会消费该购买。

我使用 API 的 PHP 版本，所以我获取购买状态的简化代码是：

```
$purchases = $service->purchases_products->get($packageName, $productId, $purchaseToken);

$purchaseState = $purchases->getPurchaseState();

if($purchaseState === 1){
        $serverResponseCode = 3;
    }

    if($purchaseState === 2){
        $serverResponseCode = 4;
    } 
```

...然后在我的应用程序中，我检查服务器响应代码。

```
if(serverResponseCode == 3 || serverResponseCode ==4 ){
     lockFeatures();
     ConsumeParams params = ConsumeParams.newBuilder().setPurchaseToken(purchase.getPurchaseToken()).build();
     billingClient.consumeAsync(params, listener);
} 
```

我希望这可以帮助其他人寻找这个问题的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-12T13:58:35.537

如果有人需要 android 而不是 kotlin 代码。smitty 写的所有解释：

启动应用程序时，您必须检查 queryPurchases 并查找已退款的项目。像那样：

```
if (purchase.getPurchaseState() != Purchase.PurchaseState.UNSPECIFIED_STATE)
{
     handleConsumablePurchasesAsync(purchasesList);
     return false;
} 
```

比你消费这个项目。smitty1 是天才

```
private void handleConsumablePurchasesAsync(List<Purchase> consumables) {
    Log.d(TAG, "handleConsumablePurchasesAsync");
    for (Purchase purchase : consumables) {
        ConsumeParams params = ConsumeParams.newBuilder()
                .setPurchaseToken(purchase.getPurchaseToken())
                .build();

        billingClient.consumeAsync(params, (billingResult, purchaseToken) -> {
            if (billingResult.getResponseCode() == OK) {
                Log.d(TAG, "Consumed the old purchase that hasn't already been acknowledged");
            } else {
                Log.d(TAG, "Error consume the old purchase that hasn't already been acknowledged -> %s" + String.valueOf(billingResult.getResponseCode()));
            }
        });
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-21T19:34:03.727

我注意到，通过检查*`Remove Entitlements`*退款页面上的字段，您将能够直接重新购买产品，而无需按照接受的答案的建议等待。

[![退款后删除权利](../Images/40c378e787f42583b1452b6388f72a1d.png)](https://i.stack.imgur.com/7Nb0o.png)

# sql - 跨表到普通表

> ID：12930793
> 
> 赞同：2
> 
> 时间：2012-10-17T09:08:22.973
> 
> 标签：sql, sql-server, ms-access

我`Excel`每月从表格中获取数据，需要将数据导入`Access`表格中，就像 Excel 表格一样。然后我需要将访问表（输入表）转换为普通访问表（输出表）...

请提供建议

1.  如何在访问中创建动态输入表..因为新列可以在 excel 表中添加或删除（例如：201211）
2.  如何在访问中将输入表转换为输出表。

**输入表：（列名：产品 | 位置 | 201209 | 201210）**

```
Product | Location | 201209 | 201210 

X       | DK       | 10     | 12
y       | DK       | 10     | 12 
```

**输出表：**

```
Product | Location | Date  | Quantity 

X       | DK       |201209 | 10
X       | DK       |201209 | 12
Y       | DK       |201210 | 10
Y       | DK       |201210 | 12 
```

我的输入表包含更多列（例如：201208、201209、201210 ....... 201402）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:23:21.507

您可以从这样的查询中获得所需的输出：

```
Select Product, Location, '201209' as [Date], Table.[201209] as Quantity from Table
UNION
Select Product, Location, '201210' as [Date], Table.[201210] as Quantity from Table 
```

您提到您的列名可能会更改。您可以通过创建一个 VBA 子例程来解决这个问题，该例程将查看 TableDef，并为所有列构造一个 SQL 查询，然后将记录插入表中。

# javascript - ajax调用后如何重新初始化slimbox2（灯箱插件）？

> ID：12930797
> 
> 赞同：0
> 
> 时间：2012-10-17T09:08:40.500
> 
> 标签：javascript, jquery, ajax, lightbox, slimbox

我们使用一些 ajax 来更新页面上的照片。但之后，slimbox 灯箱不再起作用。以前，确实如此。

我试着做：

```
window.opener.slimbox2(); 
```

但它会立即打开灯箱（因为屏幕变暗并且中间出现一个白框）。我想要的只是准备好 slimbox2 插件，而不是立即弹出。我尝试查看 slimbox2 的 js 代码，但它已经是缩小版本，并且似乎整个函数被自动调用，因为它具有以下格式：

```
(function () {
  // code here
})(jQuery); 
```

我如何再次调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:51:47.870

我们找到了解决问题的方法，实际上非常简单。在我们刚刚添加的灯箱的锚标记上：

```
onclick='jQuery.slimbox("[Image URL]"); return false;' 
```

所以它看起来像这样：

```
<a rel='lightbox' href='image name' onclick='jQuery.slimbox("[Image URL]"); return false;'><img src='image source'></a> 
```

这是用于更多参数的 jQuery slimbox2 API：

[http://code.google.com/p/slimbox/wiki/jQueryAPI](http://code.google.com/p/slimbox/wiki/jQueryAPI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:20:59.993

无论您使用什么，您都必须调用用于显示灯箱或超薄框的 javascript 函数。你必须添加“window.opener.slimbox2();” 当您有响应文本代码时，请在此处定义您的弹出代码，它将为您工作。

如果仍然不起作用，请在此处提供代码，以便我指导您

# php - 警告：不推荐使用函数 eregi()

> ID：12930801
> 
> 赞同：-5
> 
> 时间：2012-10-17T09:09:06.373
> 
> 标签：php, contact-form

> **可能重复：**
> [不推荐使用函数 eregi()](https://stackoverflow.com/questions/5700806/function-eregi-is-deprecated)

我已经使用 PHP 创建了一个联系表单，但收到了警告：

> 已弃用：函数 eregi() 在第 9 行的 D:\hosting\9606426\html\Websites\LuxeBeauty\1\contact.php 中已弃用

这是第 9 行：

```
if(!eregi("^[a-z0-9]+([_\\.-][a-z0-9]+)*" ."@"."([a-z0-9]+([\.-][a-z0-9]+)*)+"."\\.[a-
z]{2,}"."$",$email )){
    ...
} 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T09:16:07.590

eregi 已贬值，这意味着您需要切换到：

```
if(!filter_var($email, FILTER_VALIDATE_EMAIL)){
    $error.="Invalid email address entered";
    $errors=1;
} 
```

# mysql - mysql 中涉及交叉连接时，COUNT 的行为如何？

> ID：12930802
> 
> 赞同：1
> 
> 时间：2012-10-17T09:09:06.733
> 
> 标签：mysql

我在计算我的一个使用交叉联接的查询的结果数时遇到问题。

数据收集查询是

```
SELECT CF.*, C.Type AS Ctype, C.Resp AS Resp 
FROM Campaigns C, CampaignEntities CF 
WHERE C.clientId = '10' AND LOWER(C.Resp) in ('resp1','resp2','resp3')
ORDER BY entityCode DESC 
```

并正确返回符合条件的行。

但是，当更改它以获得适合的行数时：

```
SELECT COUNT(*) as RowNr 
FROM Campaigns C, CampaignEntities CF 
WHERE C.clientId = '10' AND LOWER(C.Resp) in ('resp1','resp2','resp3')
ORDER BY entityCode DESC 
```

我得到数以百万计的数字（基本上是在没有应用任何 WHERE 条件的情况下加入的结果）。

知道为什么它会这样，或者我怎么可能得到正确的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:40:58.917

尝试

```
SELECT COUNT(C.clientId) as RowNr 
```

代替

```
SELECT COUNT(*) as RowNr 
```

因为`count(*)`计算偶数`null`行

# javascript - Javascript 中的布尔求值规则是什么？

> ID：12930805
> 
> 赞同：1
> 
> 时间：2012-10-17T09:09:14.110
> 
> 标签：javascript, boolean

> **可能重复：**
> [为什么 ('0' ? 'a' : 'b') 的行为不同于 ('0' == true ? 'a' : 'b')](https://stackoverflow.com/questions/7496727/why-does-0-a-b-behave-different-than-0-true-a-b)

我目前正在学习 Javascript，到目前为止，我对该语言感到满意。

今天早上，在编写测试时，我意识到了一些我无法解释的事情：

在评估布尔表达式时，我们有：

```
// a && b returns b in case a && b are evaluated to true: OK
'2' && '3' => '3'
'3' && '2' => '2'

// a && b returns a in case a is evaluated to false, b otherwise: OK
false && '' => false
'' && false => ''

// '' and '0' are evaluated to false in a boolean context: OK
'' == false => true
'0' == false => true

// Here is the "problem":
'' && '0' => '' // To be expected: both operands evaluate to false
'0' && '' => '' // What ?!! 
```

所以我的问题很简单：为什么`'0' && ''`return `''`？

我希望两个操作数都评估为 false，但在这种情况下`'0'`似乎没有。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:16:46.587

`''`是假值，而`'0'`不是假值。

（当尝试`'0' == false`进行`==`类型转换时，它会返回 true。）

# java - 如何将 Map转换为 Java 中的类型化 Map？

> ID：12930807
> 
> 赞同：1
> 
> 时间：2012-10-17T09:09:16.300
> 
> 标签：java, map, casting

假设我们有多个不同`Map<?,?>`的未知类型键和未知类型值的无类型映射，并且已知它们之间存在`Map<String,Object>`和`Map<Integer,Object>`映射。

是否有办法检查、区分并安全地将它们转换为适当的类型映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:23:35.290

由于类型擦除，无法在运行时确定泛型类的类型参数。但是，如果映射已填充，并且您知道每个 Map 是 Map(String, Object) 或 Map(Integer, Object)，您可以简单地检查每个 Map 的第一个键并相应地进行转换。

这有什么用例？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:25:58.997

尝试

```
if(((Map.Entry)map.entrySet().iterator().next()).getKey().getClass().getName().equals("java.lang.Integer")){
            System.out.println("Map<Integer,Object>");
        }else{
            System.out.println("Map<String,Object>");
        } 
```

# android - 限制用户在设备上安装应用程序

> ID：12930808
> 
> 赞同：1
> 
> 时间：2012-10-17T09:09:20.420
> 
> 标签：android

您好，因为我必须限制用户在多个设备上安装应用程序，即如果用户已在一台设备上安装了应用程序，则该应用程序不应安装在另一台设备上。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:17:10.580

我最好的猜测是将手机的 IMEI（序列号）保存在某个服务器上，并在每次使用应用程序时验证此 IMEI。您必须限制对服务器上 IMEI 的访问（授权用户）。您可以使用读取 IMEI `android.telephony.TelephonyManager.getDeviceId()`（您必须征得许可`<uses-permission android:name="android.permission.READ_PHONE_STATE" />`）

# git - 将远程分支设置为我们在本地没有的提交

> ID：12930809
> 
> 赞同：1
> 
> 时间：2012-10-17T09:09:26.403
> 
> 标签：git, github, branch, git-branch, remote-branch

昨天有个实习生给master强推了。在我们完成责骂之后，;) 我们查看了结果。幸运的是，我们在一台机器上拥有几乎最新版本的 master，只有一些拉取请求需要再次合并。

但有一件事困扰着我：我们在最后一个合并的拉取请求中找到了旧的 HEAD 提交（在 github 上），但是由于没有分支或标签再指向它，我们找不到任何方法来拉取那个提交（`git pull origin <SHA1>`没有工作）或为该提交设置远程分支。你有什么办法做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:38:02.280

从您的评论中假设您使用`GitHub`.

您应该要求技术支持检查您项目`GitHub`的 reflog 。`GitHub`如果不到 30 天过去了，您的 reflog 仍将包含您正在寻找的提交。如果您知道，只需将哈希传递给他们。要求他们将 HEAD 重置到此提交中。

这些链接应该很有用：

[http://sitaramc.github.com/concepts/reflog.html](http://sitaramc.github.com/concepts/reflog.html)

[https://github.com/contact](https://github.com/contact)

**PS**如果他们给您提示如何自己做 - 请在此处发布作为答案。

**补充：**这是关于这个主题的重要链接：[https ://help.github.com/articles/commit-exists-on-github-but-not-in-my-local-clone](https://help.github.com/articles/commit-exists-on-github-but-not-in-my-local-clone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T17:11:41.763

如果您可以在 GitHub 上看到提交，例如在[https://github.com/[org]/[repo]/commit/[sha]](https://github.com/[org]/[repo]/commit/[sha])但它是孤立的，当您克隆/获取 repo 时 GitHub 不会包含它.

但是，如果您将 URL 稍微更改为[https://github.com/[org]/[repo]/tree/[sha]](https://github.com/[org]/[repo]/tree/[sha])，则可以[使用分支下拉菜单](https://help.github.com/articles/creating-and-deleting-branches-within-your-repository/#creating-a-branch)在该提交处创建一个分支：

[![恢复丢失的提交](../Images/a93597748d436b22f62347d5626e314a.png)](https://i.stack.imgur.com/xxNPd.png)

# android - 如何在android中通过蓝牙分享联系人？

> ID：12930812
> 
> 赞同：1
> 
> 时间：2012-10-17T09:09:39.563
> 
> 标签：android, bluetooth, contacts, android-contacts

我实现了一个应用程序，当单击列表活动时，我正在显示电话联系人列表（如屏幕截图） .

这是我的代码：......................

```
public class GetContactsDemo extends Activity {
     Button btnImport,btnAdd;
     ListView list;
      LazyAdapter adap;

    ArrayList<String> Cnames = new ArrayList<String>();
    ArrayList<String> CphoneNo = new ArrayList<String>();
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
         btnImport = (Button)findViewById(R.id.btnimport);
         btnAdd = (Button)findViewById(R.id.btnAdd);
         list = (ListView)findViewById(R.id.listView1);

   //to import contacts      
         btnImport.setOnClickListener(new OnClickListener() {![enter image description here][2]

            public void onClick(View v) 
            {
                readContacts();

                 adap = new LazyAdapter(getApplicationContext());
                 list.setAdapter(adap);
            }
        });

   //to add contact
         btnAdd.setOnClickListener(new OnClickListener() {

            public void onClick(View v)
            {
                Intent addcontact = new Intent(getApplicationContext(),AddingNewContactActivity.class);
                startActivity(addcontact);

            }
        });
         list.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) 
            {
                Toast.makeText(getApplicationContext(), ""+arg2, 1000).show();

                Uri uri = Uri.parse("com.android.contacts/raw_contacts/2");
                 Intent i = new Intent(Intent.ACTION_SEND); 
                 // i.setType("image/jpeg");  
                 i.setType("text/x-vcard");  
                  i.putExtra(Intent.EXTRA_STREAM, uri); 
                  startActivity(Intent.createChooser(i, "Send Contact"));

            }
        });

    }

    public void readContacts(){
         ContentResolver cr = getContentResolver();
         Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, null);

         if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                    System.out.println("name : " + name + ", ID : " + id);
                    Log.e("name","name-->"+name);
                    Cnames.add(name);

                    // get the phone number
                    Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                           ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                           new String[]{id}, null);
                    while (pCur.moveToNext()) {
                          String phone = pCur.getString(
                                 pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                          System.out.println("phone" + phone);
                          Log.e("phone","phone-->"+phone);
                          CphoneNo.add(phone);

                    }
                    pCur.close();

  class LazyAdapter extends BaseAdapter
    {
        Context mcontext;
        LayoutInflater inflater = null;

        public LazyAdapter(Context context) {
            this.mcontext = context;
            inflater = (LayoutInflater) mcontext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

    public int getCount() 
    {
        return Cnames.size();
    }

    public Object getItem(int arg0)
    {
        return null;
    }

    public long getItemId(int arg0)
    {
        return arg0;
    }

    public View getView(int position, View v, ViewGroup arg2) 
    {
        View vi = v;
        vi = inflater.inflate(R.layout.inflate, null);
        TextView txt = (TextView) vi.findViewById(R.id.txtname);
        TextView txt1 = (TextView) vi.findViewById(R.id.txtphoneno);

        txt.setText(Cnames.get(position));
        txt1.setText(CphoneNo.get(position));
        return vi;
    }
}

} 
```

提前致谢

![在此处输入图像描述](../Images/17841274245bbf1323b93680ca08df7c.png)

# paypal - 在 PayPal Express Checkout 中检索账单类型以进行定期付款

> ID：12930818
> 
> 赞同：1
> 
> 时间：2012-10-17T09:09:50.183
> 
> 标签：paypal

我正在使用 PayPal Express Checkout 为自定义框架设置支付引擎。业务需求之一是增加对定期付款的支持。我在[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECRecurringPayments找到了有关如何实现此功能的文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECRecurringPayments)

我不太明白的是，在我通过 SetExpressCheckout 将其设置为“RecurringPayments”之后，如何从 API 中检索 BillingType 的值。它似乎没有出现在我从 GetExpressCheckoutDetails 和 DoExpressCheckoutPayment 返回的响应数据中的任何地方。我需要这个来知道我是否需要创建定期付款资料。据我所知，我唯一的选择是将 BillingType 的值存储在我的数据库中，并在 DoExpressCheckoutPayment 之后再次查询。这对我有用，但我觉得 API 根本不会返回这些数据很奇怪。我错过了什么吗？还是有另一种正确实施定期付款的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:23:43.543

并非您在请求中发送的所有数据都会在响应中返回。你已经有了你要传递给他们的东西……他们真的没有必要把它传回去。

您可以使用会话变量而不是数据库来保存数据，或者您可以记录所有 API 请求并在需要查看发送的内容时参考这些日志，但同样，您的应用程序会告诉 PayPal 是否付款应包括帐单协议信息...而不是相反。

# c++ - 如何为回调做一个循环（C++）

> ID：12930824
> 
> 赞同：1
> 
> 时间：2012-10-17T09:10:04.100
> 
> 标签：c++, plugins, callback

我正在尝试做一个像这样的插件：

```
main process()
{
   call plugin to do something;
}

plugin()
{
   PART A: to encode a message, and send to other app;
   PART B: to decode a message, and call PART A to check whether we need to send more messages.
} 
```

因此，对于 PART B，它将在回复返回时自动调用。当我在PARTB时，我会回到PART A，但是我在PART A，我不能直接调用PART B，因为它应该在回复返回时调用，那么我如何在异步调用中进行循环？当我发送消息时，如何等待回复到达 B 部分。谢谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:10:57.850

这取决于您对主要流程的实现和插件的设计，例如我有这样的事情：

```
struct message;
typedef std::function<bool(message&)> message_handler;
struct IMainProcess {
    virtual int add_listener( message_handler const& f ) = 0;
    virtual void remove_listener( int key ) = 0;
};
struct IPlugin {
    virtual bool initialize( IMainProcess* p ) = 0;
    virtual void shutdown() = 0;
};

struct MainProcess : IMainProcess {
    int key;
    std::map<int, message_handler > listeners;
    MainProcess() : key( 0 ) {}
    virtual int add_listener( message_handler const& f ) {
        int res = key++;
        listeners[key] = f;
    }
    virtual void remove_listener( int key ) {
        listeners.erase( key );
    }

    void message_received( message& m ) {
        // call all plugins that registered for incoming messages
        for( auto i = listeners.begin(); i != listeners.end(); i++ ) {
            if( !i->second(m) ) break;
        }
    }
};
int main() {
    MainProcess mp;
    // Load plugins from some location and initialize them
    std::vector<std::auto_ptr<IPlugin> > plugins;
    while( IPlugin* p = load_plugin() ) {
        std::auto_ptr<IPlugin> sp( p );
        if( p->initialize(&mp) ) plugins.push_back( sp );
    }
    while( message* msg = wait_for_message() ) {
        std::auto_ptr<message> smsg( msg );
        mp.message_received( *msg );
    }
    // end of operation
    for( auto i = plugins.begin(); i != plugins.end(); i++ ) {
        (*i)->shutdown();
    }
    return 0;
} 
```

现在插件可以有任何所需的架构，也可以接收传入的消息！

# delphi - 从 Delphi 切换显示/隐藏系统文件

> ID：12930825
> 
> 赞同：1
> 
> 时间：2012-10-17T09:10:04.580
> 
> 标签：delphi, file, toggle, hidden

是否有任何内置的 Delphi 功能可以在 Windows 下显示和隐藏系统文件（受保护的操作系统文件）之间切换？或者也许是 HKCU 的注册表项？或者也许一个 API 函数能够做到这一点？

我不要求在我的应用程序中显示/隐藏此类文件的技巧，即使对于 Windows 资源管理器，我也需要一些可以工作的东西。

操作系统：Win XP SP1+、Vista、7

即使我必须通过 UAC 通知，我也不介意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:15:15.897

## 这是一个严重的黑客行为，使用它需要您自担风险

用户密钥：[ `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced`]

值名称：ShowSuperHidden

数据类型：REG_DWORD（DWORD 值）

数值数据：（1 = 显示隐藏，2 = 不显示）

此注册表值使您可以显示或隐藏系统文件。因此那些具有隐藏属性的文件

# c++ - 如何创建迭代器的 QSet

> ID：12930828
> 
> 赞同：2
> 
> 时间：2012-10-17T09:10:10.967
> 
> 标签：c++, qt, hash, iterator

我想做的是：

```
#include <QVector>
#include <QLinkedList>
#include <QSet>

class MyType
{
//...
};

int main(int argc, char** argv)
{
    QVector<MyType> vector;
    QSet<QVector<MyType>::iterator> a;
    a.insert(vector.begin());          // This is fine

    QLinkedList<MyType> linkedList;
    QSet<QLinkedList<MyType>::iterator> b;
    b.insert(linkedList.begin());      // This does not compile

    return 0;
} 
```

编译器消息是：

```
error: no matching function for call to 'qHash(const QLinkedList<MyType>::iterator&)' 
```

我知道，前三行编译的原因是对于`QVector`，迭代器被定义为`typedef T* iterator;`但对于`QLinkedList`它是自定义类型。

我发现，`QSet`模板类是根据哈希表实现的。显然，可以评估指针的哈希函数，但不能评估自定义类型。

请问，你能告诉我，如何重载`qHash`我的程序编译的函数吗？我已经阅读了一些关于哈希表工作原理的基本信息，但我对这个主题缺乏信心。

我试图了解`QLinkedList<T>::iterator`. 似乎与`QVector<T>::iterator`. 它只是保存指向链表中节点的指针，而不是指向项目本身的指针。

```
class iterator
{
public:
   ...
   Node *i;
   ...
}; 
```

所以我尝试以这种方式定义函数：

```
uint qHash(QLinkedList<MyType>::iterator it)
{
    return qHash(it.i);
} 
```

该程序已编译，但我对我的解决方案没有信心。我应该如何正确重载该`qHash`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:39:45.227

你已经做得很好了。哈希函数的基本规则是：

1.  如果`x = y`那么`hash(x) = hash(y)`.
2.  如果`x != y`那么`hash(x) != hash(y)`（尽可能频繁）。这不是一个严格的规则，但越是遵循它，哈希表的性能就越好。理想情况下，输出将随机出现。

您的方式有效，因为如果两个迭代器，`ia`and`ib`相等（指同一个节点），它们的内部指针，`ia.i`and`ib.i`将相等。这涉及到规则 1。然后您在这些指针上使用内置哈希函数；Qt 为您处理规则 2。

干杯!

# java - 在摇摆中使用键盘选择列表框项目

> ID：12930834
> 
> 赞同：1
> 
> 时间：2012-10-17T09:10:32.137
> 
> 标签：java, swing

谁能告诉我当有多个以相同字符开头的项目时，我应该以编程方式做什么才能使用键盘选择列表框中的项目。例如，

```
•One
 •Two
 •Three
 •Once
 •Orange 
```

如果我想通过输入 o,n,c 来关注“Once”，我应该怎么做？而不是从一个项目跳到另一个项目，而不是默认行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:35:47.047

将 KeyPress 事件处理程序添加到 ListBox 并跟踪按下的键。然后将已键入的完整值与 ListBox 中的项目的值进行比较。如果有匹配项，请选择该项目。

# android - Android 文件系统（跨应用程序共享文件，通过服务）

> ID：12930837
> 
> 赞同：0
> 
> 时间：2012-10-17T09:10:41.543
> 
> 标签：android, service, android-intent, filesystems, ipc

我很难弄清楚什么是执行以下操作的最佳方法：我正在构建一个供不同应用程序使用的库。该库通过服务提供用户系统，该服务由“管理器应用程序”（用于登录、添加用户等）启动。

我需要提供一种跨应用程序共享文件的工具。

想象一下，我们有一个名为 APP XPTO 的应用程序。这个APP需要存储一些文件（本例可能是录音）。但它不应该在其私有应用程序空间（默认情况下由 Android 提供）中这样做。它应该位于管理器应用程序（或服务，如果您愿意）可以访问的空间。此外，这些文件需要加密，因为我通过该服务提供多用户系统，但我不想面对隐私问题。

我想通过创建一个代表文件的类来让服务管理这个文件系统（FS）抽象：

```
class MyFile { // make it parcelable
    private String fullpath;
    private byte[] data;
    private User user;
} 
```

并通过意图提供基本的 FS 使用。

APP XPTO 可以发送一个请求文件的意图，在意图中提供它的路径和它“属于”的用户名。该服务将查找文件，使用用户密钥（由用户名标识）对其进行解密，然后创建一个新的 MyFile 对象以将其放入 Intent 并将其发送到 APP XPTO。

通过这种方式，文件可以存储在“私人应用程序空间”中，因为它们将由服务提供。正确的？

然而，这似乎有点“奇怪”。我知道 Android 不是一个多用户操作系统（尽管正在解决这个问题），而且这个想法本身就违反了 Android 的至少一个安全机制（每个应用程序的“私人空间”），但我需要这个工作，这个或类似的东西。在我看来，通过意图提供文件有点“奇怪”......

有什么观察或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:25:31.637

在 Android 使用的不同应用程序之间共享数据`ContentProvider`

您将实现一个 ContentProvider，而不是 Service。数据的用户可以通过`ContentResolver`

# sony - 关闭智能手表的待机模式

> ID：12930838
> 
> 赞同：2
> 
> 时间：2012-10-17T09:10:44.210
> 
> 标签：sony, standby, sony-smartwatch

我有一个智能手表的控制应用程序，设备会自动进入待机模式。有什么办法可以关闭待机模式？，我需要显示一直显示的信息。我知道这会缩短电池寿命（可能会大大缩短），但它在我的应用程序中是必不可少的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:37:32.367

您可以通过将 CONTROL_SET_SCREEN_STATE_INTENT 意图发送到 SmartWatch 主机应用程序来轻松控制 SmartWatch 的屏幕状态，然后它将状态传播到 SmartWatch 设备。可用的状态是：

*   SCREEN_STATE_OFF
*   SCREEN_STATE_DIM
*   SCREEN_STATE_ON
*   SCREEN_STATE_AUTO

如果您使用的是[SmartExtension SDK](http://developer.sonymobile.com/knowledge-base/tool-guides/download-the-new-smart-extension-sdk-and-create-smart-extras-apps/)，我建议您这样做，您可以使用提供方法的 ControlExtension 实用程序类`setScreenState(int state)`。SDK 中有大量可用的文档 - 在“SmartExtention API 规范”第 6.2 章中阅读有关更改屏幕状态的更多信息。

祝你好运！

# c# - 如何根据索引/行号从 DataTable 中选择行？

> ID：12930840
> 
> 赞同：7
> 
> 时间：2012-10-17T09:10:54.303
> 
> 标签：c#, linq, datatable, indexing, criteria

我有一个`DataTable`. 我想根据`Index`/`Row Number`中的行选择行`DataTable`。

假设下面是`DataTable`：

```
----------------    ---------------
| ID   | Name  |    | Index/RowNo |
----------------    ---------------
| A001 | John  |    |      1      |
| A002 | Foo   |    |      2      |
| A003 | Rambo |    |      3      |
| A004 | Andy  |    |      4      |
| ...  | ...   |    |      5      |
----------------    --------------- 
```

现在，我想`DataTable`使用标准从上面显示的行中选择例如`Index > 2`，在这种情况下，索引 1 处的第一个条目`A001 | John`将不会成为结果的一部分`DataTable`。我怎样才能有效地做到这一点？

此外，我希望以查询结果的形式获得我的结果`DataTable`。`Linq`

我正在尝试做这样的事情：

```
var result = dt.Select("RowNum > 1", ""); 
```

或者

```
var result = from row in dt.AsEnumerable()
             where RowNum > 1
             select row; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T09:12:51.403

> 我正在尝试做这样的事情：
> 
> ```
> var result = dt.Select("RowNum > 1", ""); 
> ```

你[`Enumerable.Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)甚至可以使用 a`DataTable`因为它是一个`IEnumerable<DataRow>`：

```
IEnumerable<DataRow> allButFirst = table.AsEnumerable().Skip(1); 
```

得到一个新`DataTable`的：

```
DataTable tblAllButFirst = allButFirst.CopyToDataTable(); 
```

如果您的下一个问题是如何仅获取具有给定索引的行：

```
var allowedIndices = new[]{ 2, 4, 7, 8, 9, 10 };
DataTable tblAllowedRows = table.AsEnumerable()
                                .Where((r, i) => allowedIndices.Contains(i))
                                .CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T09:17:45.977

```
var result = table.AsEnumerable()
                  .Where((row, index) => index > 1)
                  .CopyToDataTable() 
```

# html - 如何在谷歌地图信息中添加标签？

> ID：12930841
> 
> 赞同：0
> 
> 时间：2012-10-17T09:10:58.360
> 
> 标签：html, css, google-maps, tabs, openlayers

我想添加 HTML 选项卡以撤消谷歌地图信息窗口的当前设计。像这样的东西

![在此处输入图像描述](../Images/7271c675ab6d8f43c2fb7bcb1d3f7cc5.png)

我正在通过 OpenLayers API，但我不确定如何实现这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:48:13.063

我不确定程序员用什么在你的截图中创建了那个红色的信息窗口。

但是，**InfoBubble**能够创建选项卡，您还可以自定义其样式。尝试演示：

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:41:45.357

您还可以使用***[Infobox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-basic.html)***并创建 HTML，使其看起来像您使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html#navs) + HTML 的示例。

我在我的网站上做了这个，效果很好

# vb.net - 命令按钮运行时异常

> ID：12930845
> 
> 赞同：1
> 
> 时间：2012-10-17T09:11:11.560
> 
> 标签：vb.net, excel, exception-handling

我有一个用于在 excel 表 vb.net 代码中创建按钮的示例代码，如下所示：

```
Dim button As Microsoft.Office.Interop.Excel.OLEObject
button = _xlWorksheet.OLEObjects.Add(ClassType:="Forms.CommandButton.1", _
   Link:=False, DisplayAsIcon:=False, Left:=0, Top:=0, Width:=100, Height:=30)
button.Name = "Send Mail"

Dim oCommandBar As Microsoft.Office.Core.CommandBar
Dim oCommandBarButton As Microsoft.Office.Core.CommandBarControl
Dim tb As String = "My Toolbar"
Dim _btnCaption As String = "Forward To BSC"
'Dim code As String

'code = "Sub button_Click()" & vbCrLf
'code = code & "Call Tester" & vbCrLf
'code = code & "End Sub"

Try
   oCommandBar = _xlApp.CommandBars.Add(.......) 

   'oCommandBar = _xlApp.CommandBars.Add(.....)
   oCommandBar.Visible = True

   oCommandBarButton = oCommandBar.Controls.Add(button)
   oCommandBarButton.Caption = _btnCaption
   oCommandBarButton.OnAction = "button_Click"
Catch ex As Exception
   Console.WriteLine(ex.Message)
End Try

 Sub Tester()
      MsgBox("You have click on the test button")
 End Sub 
```

我不确定要在以下内容中添加什么：
`_xlApp.CommandBars.Add(.......) and _xlApp.CommandBars.Add(.....)`

请指教。还要指定所需的命名空间。这是一个控制台应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:07:23.207

但是，我不确定您的问题是什么：代码在条集合中添加了一个新的命令栏。语法是这样的： CommandBars.Add("MyTemporaryToolbar", _ MsoBarPosition.msoBarTop, False, True); 有关更多信息，以下文章可能对您有用：http: [//msdn.microsoft.com/en-us/library/office/ff861773.aspx](http://msdn.microsoft.com/en-us/library/office/ff861773.aspx)和[http://www.codeproject.com/Articles/17458/Adding-命令栏控件到外观](http://www.codeproject.com/Articles/17458/Adding-commandbar-controls-to-outlook)

# javascript - 修改 Javascript 动画面板中的关闭按钮

> ID：12930848
> 
> 赞同：0
> 
> 时间：2012-10-17T09:11:16.863
> 
> 标签：javascript, html

单击链接时，我正在使用以下 javascript 将打开的面板向右滑动。

jQuery（函数（$）{

```
$('a.panel').click(function() {
    var $target = $($(this).attr('href')),
        $other = $target.siblings('.active'),
        animIn = function () {
            $target.addClass('active').show().css({
                left: -($target.width())
            }).animate({
                left: 0
            }, 500);
        };

    if (!$target.hasClass('active') && $other.length > 0) {
        $other.each(function(index, self) {
            var $this = $(this);
            $this.removeClass('active').animate({
                left: -$this.width()
            }, 500, animIn);
        });
    } else if (!$target.hasClass('active')) {
        animIn();
    }
});

$('.close').click(function(){        
    $(this).closest('.panel').animate({
                left: -200
            }, 500);
}); 
```

});

单击关闭按钮时，面板将关闭。

我需要的是，当单击关闭按钮时，会从面板中删除“活动”类。如果可能的话，锚点会被移除。

这是因为如果用户再次单击同一面板链接，它将不会打开。

看到这个[jsfiddle](http://jsfiddle.net/RZpbK/478/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:23:14.020

只需添加`.removeClass('active')`到您的关闭功能，请参阅[http://jsfiddle.net/RZpbK/479/](http://jsfiddle.net/RZpbK/479/)

```
 $('.close').click(function(){        
    $(this).closest('.panel').animate({
                left: -200
            }, 500).removeClass('active');
}); 
```

如我所见，该功能按预期工作，但我不明白您为什么要删除锚？那下次打开就关不上了？

# java - 消除对建造者模式的疑虑

> ID：12930852
> 
> 赞同：8
> 
> 时间：2012-10-17T09:11:25.187
> 
> 标签：java, design-patterns, builder

我正在学习构建器模式，到目前为止我了解到，它是用于初始化的常用模式的一个很好的替代方案：

*   伸缩构造函数模式

*   JavaBean 模式

问题是，我真的不喜欢从我的域模型中的对象中删除 getter 和 setter。我总是喜欢将它们保留为 POJO。我不喜欢它的原因之一是：如果我不使用 POJO，那么在使用 ORM 框架时注释变量并不容易......

所以这是我的疑问： - 是否可以在不使用静态内部类的情况下实现构建器模式？- 如果我必须通过使用内部类来使用构建器模式，您认为保留 getter 和 setter 是否正确？- 我做了一个小例子来练习，我试图避免内部类。你能告诉我你怎么看吗？

**产品**

```
 public class Product
{
    private String color;
    private int price;

    public Product() {
    }

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    public int getPrice() {
        return price;
    }

    public void setPrice(int price) {
        this.price = price;
    }

    public String toString() {
        return getColor() + "\n" + getPrice();
    }    
} 
```

**建造者**

```
public class Builder
{
    private Product product;

    public Builder() {
        product = new Product();
    }
    public Builder withColor(String color) {        
        product.setColor(color);
        return this;
    }

     public Builder withPrice(int price) {        
        product.setPrice(price);
        return this;
    }
    public Product build() {
        return product;
    }
}** 
```

**客户**

```
public class Client
{

    public static void main(String[] args) {
        System.out.println(new Builder().withColor("Black").withPrice(11).build());
        System.out.println("-----------------------------------------------------");
        System.out.println(new Builder().withColor("Blue").withPrice(12).build());
    }
} 
```

![在此处输入图像描述](../Images/8ee7b7049a6e233bb99d32291d42980d.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T09:22:53.477

Builder 模式对于创建不可变对象和避免使用多个带有可选参数的构造函数很有用。

IMO 使用 Builder 模式构建可以使用 setter 更新的 POJO 是没有用的。您只需创建一个附加类。

根据使用的 ORM 框架，它可能不需要 setter 方法。但只能通过反射给成员赋值。

产品类别：

```
public final class Product {
    private final String color;
    private final int price;

    public Product(Builder builder) {
        this.color = builder.getColor();
        this.price = builder.getPrice();
    }

    public String getColor() {
        return color;
    }

    public int getPrice() {
        return price;
    }

    public String toString() {
        return getColor() + "\n" + getPrice();
    }    
} 
```

生成器类：

```
public final class Builder {

    private String color;
    private int price;

    public Builder() {
        // Assign any default values
    }

    public Builder color(String color) {        
        this.color = color;
        return this;
    }

    public Builder price(int price) {        
        this.price = price;
        return this;
    }

    protected String getColor() {
        return color;
    }

    protected int getPrice() {
        return price;
    }

    public Product build() {
        return new Product(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T09:22:20.277

构建器模式在不可变对象的上下文中最有用。根据定义，不可变对象没有设置器。所以它们的所有属性都必须被压缩到构造函数中。这就是建造者模式派上用场的地方。它允许您将复杂的不可变对象的初始化拆分为多个不言自明的指令，因此您不需要像这个虚构的示例那样在代码中进行构造函数调用，因为您无法分辨哪个参数做了什么：

```
Thing foo = new Thing(1, 125, Thing.SOMETHING, new Whatchamacallit(17, 676), getStuffManager(StuffManager.ZOMG), true, false, false, maybe); 
```

当创建的对象是可变的时，我发现 Builder 模式不会创建任何重要的值。您通过构建器所做的一切也可以直接使用创建的对象来完成。

另外，我认为您上面的程序不是构建器模式的教科书示例。您通常不会通过将构建器传递给构造器来创建对象。您通过调用构建器上的方法来创建对象`create`，然后将其所有属性传递给对象的构造函数。这种模式的优点是它使构建器有机会检查其内部状态的一致性，并可能在开始构建对象之前抛出异常。

java [StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)类就是一个很好的例子（在这种情况下是 create 方法`tostring`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T09:23:11.780

在这里使用构建器实际上能为您带来什么？

据我所知，什么都没有：您可以创建一个新产品并直接在其上使用 getter 和 setter。如果你有一个简单的 POJO，那么绝对没有错：

```
Product p=new Product();
p.setColour("Black");
p.setPrice(11);
doSomethingWith(p); 
```

恕我直言，节省一些打字字符不值得引入新的类/构建器抽象。

构建器在以下情况下更有用：

*   您想创建一个*不可变*对象（因此不能使用 setter）
*   如果您有*复杂的工厂逻辑*，无法用简单的 getter 和 setter 轻松表达，或者您想以不同的方式重用
*   （偶尔）当您出于某种原因想要让代码库的不同部分配置构建器的不同方面时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T09:21:58.857

构建器模式非常适合生成不可变类，但对于可变类来说它仍然是一个不错的选择。

在对象包含许多需要在构建期间设置的字段的任何情况下，构建器都是合理的设计选择；特别是如果可以为几个值选择合理的默认值。

是否使用内部类取决于您的目标。如果您希望通过构建器强制构建，您可以将构建器定义为内部类，并确保外部类只有一个私有构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T09:53:32.217

以下是 GoF 书中的 Builder 协作： 协作 1\. 客户端创建 Director 对象并使用所需的 Builder 对象对其进行配置。2\. 每当需要构建产品的一部分时，Director 会通知构建者。3\. Builder 处理来自director 的请求，并将部件添加到产品中。3\. 客户从建造者那里取回产品。

建造者模式专注于一步一步地构造一个复杂的对象。**Builder 作为最后一步返回产品。**在没有设置器的情况下返回的类可能与不可变一样好。使用setter，它可以被修改。内部类有助于掩盖细节。

另一点值得注意的是，创造设计模式背后的一个主要动机是客户不担心创建产品。对象创建过程委托给工厂、构建器等。客户端不必担心对象创建。它将指定它想要什么，并将作为委托创建过程的结果获得它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T18:18:52.683

> 是否可以在不使用静态内部类的情况下实现构建器模式？

绝对没错。就 Builder 设计模式而言，Builder 是否是内部类没有任何区别。

> - 如果我必须通过使用内部类来使用构建器模式，您认为保留 getter 和 setter 是否正确？

是的，没关系。有点像，使用某个模板构建对象，然后在需要时对其进行自定义。

> - 我做了一个小例子来练习，我试图避免内部类。你能告诉我你怎么看吗？

两个问题——

1.  该示例不能证明使用 Builder 模式的合理性。构建器模式用于构建复杂的对象。因此，如果您可以简单地将产品构建为： `Product p = new Product(); p.setColor(c); p.setPrice(prc);` 那么您所展示的方式几乎没有任何好处。
2.  `Product`不应该依赖于`Builder`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-04T13:03:47.117

我发现自己在想，getter 在构建器中是否有用。通常不应将构建器用作返回值 - 单个方法或类应负责使用构建器创建实体。因此，方法（或类）应该保留它需要的信息，而不是取回它。

由于这些原因，我决定不在构建器类中使用任何 getter。Builder 只有设置器（无论是 withAbc(...)、setAbc(...) 还是 abc(...)）、build() 以及可能的一些私有方法，如 validate()。

使用类 Product，示例实体如下所示：

```
class Product {
    private final String color;
    private final int price;

    private Product(ProductBuilder builder) {
        this.color = builder.color;
        this.price = builder.price;
    }

    // equals, hashCode, toString

    public builder() {
        return new ProductBuilder(this);
    }

    public static emptyBuilder() {
        return new ProductBuilder();
    }

    public String getColor() {
        return color;
    }

    public int getPrice() {
        return price;
    } 
```

现在，构建器类是实体的内部类，它允许我使用私有构造器。

```
 public static class ProductBuilder {
        private String color;
        private int price;

        private ProductBuilder() {
        }

        private ProductBuilder(Product entity) {
            this.color = entity.color;
            this.price = entity.price;
        }

        public ProductBuilder withColor(String color) {
            this.color = color;
            return this;
        }

        public ProductBuilder withPrice(int price) {
            this.price = price;
            return this;
        }

        public Product build() {
            return new Product(this.validate());
        }

        private ProductBuilder validate() {
            if (color == null) {
                throw new IllegalStateException("color is null");
            }
            return this;
    }
} 
```

如您所见，我添加`builder()`了获取构建器的方法作为实例的副本，并`emptyBuilder()`作为工厂方法来隐藏构造函数（也许它有更好的名称）。

此外，在构造不可变类时，请确保其中的所有内容也是不可变的。集合很棘手，您必须制作一个副本，然后在其上使用 Collections.unmodifiable*(...) 以确保没有人引用位于不可修改包装器下的集合。

**编辑**：据称，如果你有抽象超类，你*需要*吸气剂。这是夸大其词。仅当您有一个具有所有参数的构造函数时才需要它。如果你像我一样通过构建器，你会得到：

```
class Product extends Something { ...
    private Product(ProductBuilder builder) {
        super(builder); // that one must be protected, not private
        ...
    }
    public static class ProductBuilder extends SomethingBuilder { ...
        protected ProductBuilder validate() {
            super.validate();
            ...
        }
    }
} 
```

那么，我们*需要*吸气剂吗？这一次，真的不是。没有他们我们仍然很好。其他一些想法？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-17T09:31:52.277

*Builder*是关于几件事的，你可能只想利用一个方面：*fluent API*。您只需将设置器更改为 return`this`而不是`void`. 然后你可以使用chained-setter成语：`return new MyBean().setCheese(cheese).setBacon(bacon);`

附带说明一下，术语“POJO”与“JavaBean”的含义不同。事实上，有时这两个术语被用作对立面。POJO 的意义在于它除了作为 Java 对象之外**不符合其他任何东西。**例如，它可以使用`public`变量。

# java - 如何更改JTable中行的颜色

> ID：12930858
> 
> 赞同：0
> 
> 时间：2012-10-17T09:11:48.733
> 
> 标签：java, swing, colors, jtable, renderer

我有一个 5x5 的 JTable，我想编写一个过程 setColorTable(JTable table, int Row, int Col)，当调用过程 setColorTable 时，它​​将为表中的行和 col 设置背景颜色。每个人都可以帮助我。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:28:01.600

您必须创建一个扩展 Swing 组件的自定义 TableCellRenderer（如果您只想更改颜色，JLabel 可能会满足您的需求），并实现 TableCellRenderer 接口。

尝试阅读[本文](http://www.exampledepot.com/egs/javax.swing.table/CustRend.html)或[JavaDoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableCellRenderer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:34:14.253

您可以通过扩展 javax.swing.table.DefaultTableCellRenderer 来编写自己的类，然后根据需要覆盖以下方法。

```
public class MyNewCellRenderer extends DefaultTableCellRenderer
{
@Override
    public Component getTableCellRendererComponent(
            JTable table, Object object,
            boolean isSelected, boolean hasFocus,
            int row, int column)
    {
        JLabel label = (JLabel) super.getTableCellRendererComponent(table, object, isSelected, hasFocus, row, column);
  label.setBackground(Color.WHITE);
    }
} 
```

最后附上TableCellRenderer；

```
jTable1 = new javax.swing.JTable()
{
    public TableCellRenderer getCellRenderer(int row, int column)
    {
        return new MyNewCellRenderer();
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:34:56.770

> 如何更改JTable中行的颜色

用于着色（`Font`，Foregroung，Backgroung，ei）整行有[prepareRenderer](https://stackoverflow.com/search?q=user:714968%20prepareRenderer)

# android - 反转位图时出现内存不足？

> ID：12930860
> 
> 赞同：0
> 
> 时间：2012-10-17T09:11:57.393
> 
> 标签：android, android-viewpager, out-of-memory

反转位图时出现 OutOfMemory 错误。这是我用来反转的代码：

```
public Bitmap invertBitmap(Bitmap bm) {
        Bitmap src = bm.copy(bm.getConfig(), true);

        // image size
        int height = src.getHeight();
        int width = src.getWidth();
        int length = height * width;
        int[] array = new int[length];
        src.getPixels(array, 0, src.getWidth(), 0, 0, src.getWidth(), src.getHeight());
        int A, R, G, B;
        for (int i = 0; i < array.length; i++) {
            A = Color.alpha(array[i]);

            R = 255 - Color.red(array[i]);
            G = 255 - Color.green(array[i]);
            B = 255 - Color.blue(array[i]);

            array[i] = Color.argb(A, R, G, B);
        }
        src.setPixels(array, 0, src.getWidth(), 0, 0, src.getWidth(), src.getHeight());

        return src;
    } 
```

图片大小约为 80 kb，尺寸为 800x1294，图片中的文字是黑色和不可见的背景。
图片位于 ViewPager 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:15:30.683

当您复制 bm 时，请尝试：`bm = null;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:18:03.590

在 android 中，由于应用程序的内存上限为 16MB（几乎在所有手机上），将整个位图保存在内存中是不明智的。这是一种常见的情况，并且正在发生在可能的开发人员身上。

您可以在[此](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)stackoverflow 线程中获得有关此问题的许多信息。但我真的强烈建议你阅读 android 的官方文档，了解 Bitmaps 的有效使用。他们在[这里](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)和[这里](http://developer.android.com/training/displaying-bitmaps/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:34:11.190

图像使用的内存大小与该图像的文件大小完全不同。

在文件中，图像可以使用不同的算法（jpg、png 等）进行压缩，并且当作为位图加载到内存中时，每个像素使用 2 或 4 个字节。

因此，在您的情况下（您没有播种代码，但就像您使用每个像素 4 个字节一样），每个图像的内存大小为：

```
size = width * height * 4; // this is aprox 2MB 
```

在您的代码中，首先将原始位图复制到新位图，然后创建一个数组来操作颜色。因此，总的来说，您使用的是`size x 3 = 6MB`每个图像反转。

有很多关于如何在 Android 中处理大位图的示例，但我会留下我认为最重要的主题：

*   尝试在上面的代码中只使用一个位图副本
*   如果您的图像中只有文字，请使用`Bitmap.Config = RGB_565`. 这仅使用每个像素 2 个字节，将大小减少一半。
*   调用`recycle()`不再需要的位图。
*   在`Bitmap.Factory`. 您可以减小仍符合您需求的图像大小。

祝你好运。

# .net - DbContext 的私有构造函数

> ID：12930862
> 
> 赞同：0
> 
> 时间：2012-10-17T09:12:04.657
> 
> 标签：.net, asp.net-mvc, singleton, asp.net-mvc-4, dbcontext

是否有必要控制`dbContext`正在创建的对象的数量？

我认为将单例模式应用于我的`customDbContext`班级可能更安全。但是，当我`Update-Database`在包管理器控制台中执行命令时，我收到一个错误，指出我`dbContext`没有默认构造函数（由于我实现了单例模式）。

问题：真的那么安全吗，还是我应该选择简单的解决方案？

```
public class WebshopContext : DbContext
{
    private static WebshopContext database;

    private WebshopContext() : base("DefaultConnection") { }

    public static WebshopContext GetInstance() {
        if (database != null)
        {
            return database;
        }
        else {
            database = new WebshopContext();
            return database;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:24:09.883

`DbContext`对应一个工作单元。您不应该创建一个单例，因为这将在您的所有请求中共享。您不应为每个数据库请求创建新的 DbContext，因为单个工作单元中的不同数据库请求（可能是控制器中的方法）应该共享相同的实体以兼容。

为控制器中的每个命令创建一个`DbContext`并传递它，当请求完成时，如果它是更新请求，则提交更改。

如果你不想一直传递你的 DbContext，你可以[为](http://coding.abel.nu/2012/10/make-the-dbcontext-ambient-with-unitofworkscope/)你的`DbContext`.

# python - 如何在运行时从模块内部知道哪个脚本调用了其中的函数

> ID：12930867
> 
> 赞同：0
> 
> 时间：2012-10-17T09:12:17.750
> 
> 标签：python, module, trace, inspect

我在 python 中有一个模块，并且基于在其中调用函数的脚本，我想在该模块中做出决定。

因此，如果我们有 2 个文件`file1.py`和`file2.py`，则都导入模块 testmod 并在其中调用一个函数。在模块 testmod 中，我想知道哪个脚本调用了它？`file1.py`或`file2.py`。

我想在 testmod 中编写如下代码 if then do this else if then do that else do something else ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-05T21:11:56.543

我发布了一个用于检查的包装器，它使用简单的堆栈帧寻址，通过单个参数 spos 覆盖堆栈帧，这些实现了名称所承诺的功能：

*   `PySourceInfo.getCallerModuleFilePathName`
*   `PySourceInfo.getCallerModuleName`

看：

*   [https://pypi.python.org/pypi/pysourceinfo/](https://pypi.python.org/pypi/pysourceinfo/)
*   [https://pythonhosted.org/pysourceinfo/](https://pythonhosted.org/pysourceinfo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:15:49.090

[追溯](http://docs.python.org/library/traceback.html#traceback-examples)

看看文档中是否有任何内容`traceback`可以为您提供想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:37:56.460

正如评论中已经说明的那样，您可以避免这种情况（因为它是糟糕的设计并且会使事情变得很复杂）向该函数添加一个参数。或者，如果内部代码不时有很大差异，您可以编写此函数的两个版本。

无论如何，如果你想知道你的函数是从哪里调用的，你需要[检查](http://docs.python.org/library/inspect.html)模块。我不是这方面的专家，但我认为获取调用该函数的堆栈帧并从那里了解哪个脚本调用它并不难。

更新：

如果您真的想使用`inspect`并做丑陋的事情，这里有一个最小的工作示例：

```
#file a.py

import inspect
def my_func():
    dad_name = inspect.stack()[1][1]
    if inspect.getmodulename(dad_name) == 'b':   #or whatever check on the filename
         print 'You are module b!'
    elif inspect.getmodulename(dad_name) == 'c':
         print 'You are module c!'
    else:
         print 'You are not b nor c!'

#file b.py
import a

a.my_func()

#file c.py

import a
a.my_func()

#file d.py
import a
a.my_func() 
```

输出：

```
$ python b.py
You are module b!
$ python c.py
You are module c!
$ python d.py
You are not b nor c! 
```

如果要在函数中添加参数：

```
#file a.py
def my_func(whichmod=None):
    if whichmod == 'b':
         print 'You are module b!'
    elif whichmod == 'c':
         print 'You are module c!'
    else:
         print 'You are not B nor C!'

#files b.py/c.py
import a
a.my_func(whichmod='b')   # or 'c' in module c

#file d.py
import a
a.my_func() 
```

输出是一样的。

# c# - nuget.exe 安装不更新packages.config（或.csproj）？

> ID：12930868
> 
> 赞同：8
> 
> 时间：2012-10-17T09:12:21.693
> 
> 标签：c#, mono, nuget

在尝试让 nuget 构建工作流程在 Linux/mono 上运行时，我注意到一件奇怪的事情。

在 Linux 上，我无法使用 nuget Visual Studio 插件或 Powershell 控制台，但我有 nuget.exe 命令行实用程序。这个实用程序有一个“安装”命令，它可以正确地获取包并将它们放在我的包目录中。

但是，nuget.exe 的安装（与 Visual Studio 安装相反）似乎不会使用它添加的包更新 packages.config，也不会将项目引用添加到我的 .csproj。后者不太重要（我可以手动完成），因为 packages.config 也需要包含递归依赖项，我不能手动完成......

是否有其他人尝试仅使用 nuget.exe 安装新软件包或对此有任何见解？我是不是完全找错树了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-15T09:05:08.710

就目前（Nuget 2.8.1）而言，这仍然是不可能的，并且是 nuget 命令行客户端的主要缺点，正如我所见。

Nuget.exe 必须能够安装包并将其添加到`packages.config` **所有依赖**项中，才能用于最简单的情况之外的任何事情。

我创建了一个问题，请参阅[https://nuget.codeplex.com/workitem/4258](https://nuget.codeplex.com/workitem/4258)

## 解决方法

目前，可以使用以下方法。请注意，它远非最佳，但至少使您能够使用 nuget 并正确解析依赖包。

1.  诉诸`packages.config`手动管理。添加您需要的包，但忽略它们的依赖项。请注意，这与“普通”`packages.config`文件不同，后者也列出了依赖项。

2.  使用脚本遍历`packages.config`并为每个包发出一个`nuget install <package-id> -Version <version>`。这将安装包及其依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T13:40:41.290

我认为更好的解决方法是使用[此处描述的技术](https://stackoverflow.com/a/36820607/2475012)来生成一个 PCM 命令，该命令将一次性安装多个包。

这是一个小的概念证明，它将最终命令复制到剪贴板：

```
param([string[]]$dependencies)

$command = "";

foreach($dependency in $dependencies) 
{
    $name = $item.Name
    if($dependency)
    {
        $command += ('"{0}", ' -f $dependency)
    }
}

$command = $command.Substring(0, $command.Length - 2) + " | foreach {Install-Package `$_}"
$command | Set-Clipboard 
```

# php - 在 2 个日期字段之间查询以检索不到 2 周的所有数据

> ID：12930872
> 
> 赞同：0
> 
> 时间：2012-10-17T09:12:30.200
> 
> 标签：php, mysql

我有一张桌子，用来记录帖子的回复，

```
USERID POSTEDTDATE             REPLYDDATE
------ ----------------------- -----------------------
26167  2012-03-12 00:00:00.000 2012-03-19 00:00:00.000 
26362  2012-03-17 00:00:00.000 2012-04-02 00:00:00.000 
26411  2012-04-10 00:00:00.000 2012-05-01 00:00:00.000 
26491  2012-04-09 00:00:00.000 2012-04-12 00:00:00.000 
```

我想获得少于 15 天的回复的计数结果！？

```
SELECT COUNT(sms_Mailing.nameSurname)
FROM sms_Mailing
WHERE sms_Mailing.replyDate <= '".date('Y-m-j' ,strtotime('+2 weeks' , strtotime (sms_Mailing.replyDate)))."' 
```

尝试过这样的事情，但似乎不是一个好的灵魂，有人可以帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:17:02.480

你可以得到这样的日期：

```
DATE_SUB( NOW(), INTERVAL 2 WEEK) 
```

或者

```
DATE_SUB( NOW(), INTERVAL 15 DAY) 
```

然后查询可能是：

```
SELECT COUNT(sms_Mailing.nameSurname)
FROM sms_Mailing
WHERE sms_Mailing.replyDate > DATE_SUB( NOW(), INTERVAL 15 DAY) 
```

[在这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)您可以看到其他`INTERVAL`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:19:53.467

你可以用这个

```
where replyDate <= DATE_SUB( NOW(), INTERVAL 15 DAY) 
```

# ruby-on-rails-3 - 在 Rails 中生成报告

> ID：12930875
> 
> 赞同：1
> 
> 时间：2012-10-17T09:12:44.897
> 
> 标签：ruby-on-rails-3, report

我想在 ruby​​ on rails 中生成报告，在 rails 中生成报告的建议方法是什么，我想从多个表中获取数据并给出自定义输出，生成的报告应该是 XLS 格式。rails 很新

# sql - sql order by query 无法正常工作

> ID：12930882
> 
> 赞同：0
> 
> 时间：2012-10-17T09:12:54.680
> 
> 标签：sql

SQL 选择查询如下所示。它正在工作，但它返回的第一行是错误的。预期结果也如下所示。

为什么会这样？你能解决这个问题吗？

```
SELECT pid, pname, pcost
FROM Product
JOIN SubCategory ON Product.subcate_id = SubCategory.subcate_id
JOIN Category ON SubCategory.cate_id = Category.cate_id
WHERE Category.cate_id = 1 order by pcost 
```

结果集是

```
pid         pname           pcost
----------- --------        --------------
16          hp-dreamscreen  23232
25          imac-pc-parts   234
35          imac            2349
9           Apple_cinema_   30000
14          hp-bu178aa      30000
15          lenovo-c200     32111
17          imac            345345

(7 row(s) affected) 
```

您可以在第一行的结果集中看到问题 - 它应该出现在 imac（第三行）之后，如`order(pcost)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:16:51.557

pcost 可能是一个 varchar 列。

尝试铸造它哟 int`cast (pcost as int)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:15:09.957

为什么你要存储`pcost`为 (VAR)Char 类型？
对于 SQLite / MySQL，您可以使用`1*`将数字强制转换为数字。

```
SELECT pid, pname, pcost
FROM Product
JOIN SubCategory ON Product.subcate_id = SubCategory.subcate_id
JOIN Category ON SubCategory.cate_id = Category.cate_id
WHERE Category.cate_id = 1
order by 1*pcost 
```

对于 SQL Server，您需要谨慎行事，并且只强制使用数字。从 SQL Server 2012 开始，这很容易使用[TRY_CONVERT](http://msdn.microsoft.com/en-us/library/hh230993.aspx)

```
order by TRY_CONVERT(int, pcost) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:14:34.623

如果 的数据类型`pcost`不是数字。将其转换为数字数据类型。尝试这个，

```
SELECT...
FROM..
WHERE..
ORDER BY CAST(pcost as INT) 
```

如果你正在使用`MySQL`

```
SELECT...
FROM..
WHERE..
ORDER BY CAST(pcost as SIGNED) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:17:23.770

pcost 列的数据类型是什么？如果它是 varchar 或与排序正确相关的东西，请尝试将类型更改为数字。

# entity-framework-4 - 好的实体框架教程

> ID：12930884
> 
> 赞同：4
> 
> 时间：2012-10-17T09:13:03.680
> 
> 标签：entity-framework-4

我想知道是否有人可以向我指出一个很好的实体框架在线教程（代码优先和数据库优先）。我对学习理论很感兴趣，因为我已经使用 EF 一段时间了，但我意识到我并不知道所有的来龙去脉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:42:13.177

在我看来，最好的视频是关于 Entity Framework的[Pluralsight视频。](http://www.pluralsight.com/training/Courses/Find?highlight=true&searchTerm=entity%20framework)你应该看看他们。虽然它们不是免费的。
希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:16:24.437

这（http://entityframeworktutorial.net/default.aspx）很好地涵盖了基础知识，但我的建议是走死树路线并获取 Julia Lerman 的“*编程实体框架（第 2 版）* ”的副本

# javascript - 返回 1 个历史记录，但不要运行任何查询或其他任何内容

> ID：12930885
> 
> 赞同：0
> 
> 时间：2012-10-17T09:13:06.987
> 
> 标签：javascript, button, execution, back

这是一个很好的脚本，可以追溯到 1 历史：

```
<INPUT TYPE="button" VALUE="Back" onClick="history.go(-1);> 
```

但问题是，如果我在 addnewcustomer.php 上执行任何查询或任何内容，然后我链接到 companyview.php 并使用此代码返回 addnewcustomer.php，它会执行相同的查询（或浏览器给我警告，必须按 F5）。如何避免这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:18:26.727

避免这些情况的最佳方法是：

1.  不更改 GET 请求上的任何数据，而仅在 POST 请求上进行操作。
2.  在任何数据操作后实现[post-to-get](http://en.wikipedia.org/wiki/HTTP_303) (303) 重定向。

那你应该很好

# c# - 将值从 *不同* 非形式传递给 form.cs

> ID：12930886
> 
> 赞同：0
> 
> 时间：2012-10-17T09:13:13.323
> 
> 标签：c#, .net, forms

我已经阅读了一堆关于从子表单传递到父表单的博客和答案。那不是我所拥有的，所以我希望也许有人可以在这里帮助我。对此还是陌生的。在 .NET 框架 2.0 - VS10 中使用 C#

我有一个看起来像这样的 form.cs：

```
 if (myProxy.myID != null)
        {
            do something;
        }
        else
        {
            do something else;
        } 
```

在 myProxy.cs 中，我在上面对其进行了初始化，如下所示：

```
 public static string myID = null; 
```

稍后在此 myProxy.cs 中，我更改了 myID 的值，但这并没有传递给 form.cs。看起来很简单，我尝试创建一个子函数只是为了获取 ID，但似乎不是这样。也许我做错了，有人可以告诉我更好的方法。

我试图查看我是否将 myProxy.cs 中的 myID 硬编码为一个特定的字符串，该字符串通过了，但我失去了我的条件权力。所以基本上我正在寻找一种方法来检查 myID 变量是“新”还是“使用/更改”。如果它是新的，它必须去做一些事情，而如果它不为空（不是新的），那么它应该做其他事情。

感谢您的任何帮助/评论。新手请多包涵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:20:10.953

我认为使用 Event 是个好主意，我的意思是您可以将事件添加到您的 myProxy 类，然后您必须将 myProxy 和表单类相互连接起来，以便在 myProxy 中何时发生更改，以便您触发事件然后它将通过表单课程捕获。

其他方式可能是使用线程定期检查 myID 值。

# c# - 打开文件名包含字符串的pdf文件

> ID：12930887
> 
> 赞同：0
> 
> 时间：2012-10-17T09:13:14.503
> 
> 标签：c#, pdf

好吧，我想打开名称包含特定字符串的 pdf 文件。

这是我以前看到的代码是否有一个名称包含字符串的文件：

```
if (Directory.EnumerateFiles(startInfo.Arguments).Any(PDFfile=>PDFfile.Contains(myString)))
{
    MessageBox.Show("Jackpot");
}
else
{
    MessageBox.Show("There is no file!");
} 
```

我收到“Jackpot”味精，现在如何打开该文件？！我知道我应该使用：

```
Process.Start(startInfo); 
```

但这是当您准确指定文件的路径时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:19:59.707

你可以通过几种方式做到这一点，一种方式可能是这样的：

```
var filesInDirectory = Directory.EnumerateFiles(startInfo.Arguments);
var pdfFile = filesInDirectory.FirstOrDefault(PDFfile=>PDFfile.Contains(myString));
var pdfFileExists = pdfFile != null;

if (pdfFileExists)
{
    MessageBox.Show("Jackpot");
    Process.Start(pdfFile);
}
else
{
    MessageBox.Show("There is no file!");
} 
```

请注意，这`FirstOrDefault`会导致它获取第一个结果，不确定这是否是您正在寻找的结果。

# objective-c - 架构 i386 的未定义符号：

> ID：12930888
> 
> 赞同：0
> 
> 时间：2012-10-17T09:13:17.810
> 
> 标签：objective-c

> **可能重复：**
> [未找到架构 i386 的符号](https://stackoverflow.com/questions/4839981/symbols-not-found-for-architecture-i386)

我知道这个错误：

```
 Undefined symbols for architecture i386:
  "_AudioServicesPlaySystemSound"
symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 
```

我进口`#import <AudioToolbox/AudioToolbox.h>`.

我能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:19:15.310

导入`<AudioToolbox/AudioToolbox.h>`是必要的，但还不够：您需要添加对`AudioToolbox.framework`项目的引用才能链接目标。

在 Xcode 中，打开项目，然后选择您的主要目标。在“Summary”页面，找到“Linked Frameworks and Libraries”，点击底部的[+]。选择“AudioToolbox.framework”，点击【添加】。这应该可以修复链接错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:19:20.237

您需要在设备上调试应用程序，模拟器没有 iPod 或音频播放。我认为....

# if-statement - 我可以使用什么公式来通过比较 SHAREPOINT 2007 中的日期来获得文本中迟到、准时和早期输出的 3 个状态

> ID：12930893
> 
> 赞同：1
> 
> 时间：2012-10-17T09:13:30.447
> 
> 标签：if-statement, sharepoint-2007, datediff

我正在尝试确定 3 种状态，将截止日期与完成日期进行比较，输出为准时、迟到和早，我可以让迟到和早到完美工作，但它看到准时结果为迟到。

这是 IM 目前使用的公式，但它不起作用

=IF([FeasibilityTracker_Date Due]<=[FeasibilityTracker_Date Delivered],"Ontime","Early","LATE")

有没有人对如何解决这个问题有想法？

# javascript - 使用 SwipeView 检测滑动方向

> ID：12930896
> 
> 赞同：0
> 
> 时间：2012-10-17T09:13:38.273
> 
> 标签：javascript, swipeview

我正在使用来自 cubiq.org 的出色 SwipeView 库。

它使用无限优化滚动的事实很棒，但我似乎无法找到如何干净地检测滑动方向。我需要这个来相应地更新显示的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:32:09.483

自己找到了答案，这显然很容易。

您可以从创建的 SwipeView 对象的 directionX 属性获取方向。

```
swipeView.directionX 
```

向右滑动为 1，向左滑动为 -1。

# asp.net - 如何将列表框中的图像与数据绑定

> ID：12930897
> 
> 赞同：0
> 
> 时间：2012-10-17T09:13:37.657
> 
> 标签：asp.net, asp.net-ajax, c#-3.0

大家好，我在列表框中有一个问题，我想在其中将图像与条件数据绑定。就像当用户处于活动状态时我喜欢显示不同的图像，当他不工作时喜欢显示不同的图像。这次我在他的状态上用不同的颜色显示名字，比如不工作，然后用红色，用绿色工作。

我的html是

```
 <asp:ListBox ID="ddlDriver" Width="100%" AutoPostBack="true" OnSelectedIndexChanged="ddlDriver_SelectedIndexChanged"
                                                runat="server"  BackColor="White" Height="380px">

                                        </asp:ListBox> 
```

代码 ：

```
 if (_driv.DriverStatus == 1)
        {
            ddlDriver.Items[i].Text = ddlDriver.Items[i].Value + "-" + ddlDriver.Items[i].Text + " " + OrderTota;
            ddlDriver.Items[i].Attributes.CssStyle.Add(HtmlTextWriterStyle.Color, "red");

        }
        else if (_driv.DriverStatus == 2)
        {
            ddlDriver.Items[i].Text = ddlDriver.Items[i].Value + "-" + ddlDriver.Items[i].Text + " " + OrderTota;
            ddlDriver.Items[i].Attributes.CssStyle.Add(HtmlTextWriterStyle.Color, "green");
        } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:47:30.843

您可以定义两个具有适当背景图像属性的 css 类，并在代码隐藏中的项目上有条件地设置类

# android - 几秒钟后如何在android中自动水平滚动布局

> ID：12930905
> 
> 赞同：0
> 
> 时间：2012-10-17T09:13:59.360
> 
> 标签：android, android-layout, android-scroll

我有一个列表视图，其中包含一些文本视图和图像视图。我有这个布局的水平滚动。在这个布局下面，我有另一个布局，它对于列表视图的所有项目都是静态的。所以现在我希望列表视图项目在几秒钟后水平滚动。我怎么能做到这一点。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:53:21.290

线程是唯一的答案。您可以使用名为 timer、Handler 等的线程的修改版本......

# android - 测试项目中片段的ActivityMock

> ID：12930907
> 
> 赞同：2
> 
> 时间：2012-10-17T09:14:10.363
> 
> 标签：android, android-testing

我的`Activity`内容很少`Fragments`，现在我想测试其中之一，`Fragment`但我想分开测试并仅测试 selected 的核心功能，`Fragment`而不打扰 main 中发生的事情`Activity`。

我的想法是创建一个`Activity`只添加方法`Fragment`的模拟。`onCreate()`然后我会做一些测试。但我不想`Activity`在我的主要项目中包含模拟，我宁愿将它包含在测试项目中。所以我做了这样的事情：

1.  我创建了`MockActivity`：

    ```
    public final class ActivityMock extends Activity {
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            FragmentTransaction t = getFragmentManager().beginTransaction();
            MyFragment f = new MyFragment();
            t.add(f, "MY_FRAGMENT");
            t.commit();
        }
    } 
    ```

2.  我想像这样测试它：

    ```
    public final class MyFragmentTest extends
    ActivityInstrumentationTestCase2<ActivityMock> {

        public MyFragmentTest() {
            super(ActivityMock.class);
        }

        public void testSomething() {
            ActivityMock mActivity = getActivity();
            //do some assertions
        }
    } 
    ```

问题是我得到错误：

```
 java.lang.RuntimeException: Unable to resolve activity for: Intent {
    act=android.intent.action.MAIN flg=0x10000000  
    cmp=com.example/.test.ActivityMock } 
```

好的接下来我尝试修改测试项目`AndroidManifest.xml`

```
 <activity android:name=".ActivityMock" /> 
```

但我得到了同样的错误。我认为那是因为无论如何在测试运行主要项目中都会搜索`ActivityMock`. 所以我尝试添加

```
 <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="com.example.test" /> 
```

我不知道这是否是个好主意，但主要想法是测试项目将能够测试（仪器）本身。但现在我得到：

```
 junit.framework.AssertionFailedError: Exception in constructor: testSomething    
    (java.lang.NoClassDefFoundError: com.example.test.ActivityMock 
```

所以我认为修改后的`AndroidManifest.xml`工作但仍在`ActivityMock`主项目中搜索类，尽管它在测试项目中。我假设该`getActivity()`方法总是在主项目中寻找活动类。

有没有人尝试过`Fragment`这种方式并能够创建`Activity`模拟？

干杯

# c# - 在 Windows Store App 中检测 WIFI 连接

> ID：12930908
> 
> 赞同：3
> 
> 时间：2012-10-17T09:14:11.993
> 
> 标签：c#, .net-4.5, windows-store-apps, windows-store

我需要检测运行我的应用程序的设备当前是否连接到 WIFI 网络。我已阅读[指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465399.aspx#adapt)，我知道我可以确定“连接成本”，但我特别想知道是否有办法判断设备是否连接到 WIFI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:48:53.590

我找到了解决方案：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkadapter.ianainterfacetype](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkadapter.ianainterfacetype)

现在你可以做这样的事情：

```
switch (internetConnectionProfile.NetworkAdapter.IanaInterfaceType)
                {
                    case 71:
                        networkStatus = InternetAccess.WLAN;
                        break;

 ect.... 
```

# c# - C#/WPF 中禁用复选框上的鼠标按钮事件

> ID：12930911
> 
> 赞同：1
> 
> 时间：2012-10-17T09:14:31.663
> 
> 标签：c#, wpf

我遇到了一个棘手的问题，当用户右键单击复选框时，我需要执行一些操作，但是`IsEnabled="False"`出于业务逻辑原因，可以禁用此复选框 ( )。问题是即使禁用了`previewMousDown`事件也不会引发。`CheckBox`

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:24:53.767

您可以在 VisualTree 中较高的控件上有一个 MouseDown 事件处理程序，并使用 HitTest 来确定您的复选框是否为“RightClicked”

[http://msdn.microsoft.com/en-us/library/ms752097.aspx](http://msdn.microsoft.com/en-us/library/ms752097.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:38:59.013

用 ContentControl 包围您的 CheckBox 并在 ContentControl 上处理该事件

# weblogic11g - 每 5 分钟后在 Web 逻辑服务器 11g 中重复请求

> ID：12930912
> 
> 赞同：5
> 
> 时间：2012-10-17T09:14:33.220
> 
> 标签：weblogic11g

我们的 Web 逻辑服务器 11g 中存在长时间运行线程的问题。

实际发生的情况是，当我们在应用程序中发出请求时，如果与请求相关联的线程耗时超过 5 分钟。我们的 weblogic server 11g 正在为同一个请求创建一个新线程。这意味着我们在 5 分钟后有 2 个长时间运行的线程用于相同的请求（10 分钟后我们将有 3 个，依此类推）。这件事每 5 分钟重复一次，weblogic 服务器中的所有线程都被触发，最后服务器进入“警告”状态，应用程序挂起。

我怀疑这是会话复制问题，但我们没有使用任何集群环境，所以我相信会话复制不会成为服务器这种奇怪行为的原因。

非常感谢任何有关如何解决此问题的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T08:27:04.033

可能是由于 weblogic 服务器插件的 Idempotent 设置设置为 on，并且 WLIOTimeoutSecs 保留其默认值 300 秒。

# php - 有没有办法让这个功能更好？

> ID：12930919
> 
> 赞同：0
> 
> 时间：2012-10-17T09:14:53.643
> 
> 标签：php, file-extension

> **可能重复：**
> [如何在 PHP 中提取文件扩展名？](https://stackoverflow.com/questions/173868/how-to-extract-a-file-extension-in-php)

我在教程中找到了以下函数来获取文件的扩展名，但我认为它有点太长了。所以我认为有一种方法可以缩短它。

```
function getExtension($str) {
    $i = strrpos($str,".");
    if (!$i) return "";
    $l = strlen($str) - $i;
    $ext = substr($str, $i+1, $l);
    return $ext;
} 
```

这`$str`将是一个文件名。
有没有办法在不影响稳定性和输出的情况下缩短这个功能？
我做了这样的事情：

```
function getExtension($str) {    
    $ext = pathinfo($str)['extension'];
    return $ext;
} 
```

但这对我不起作用，但可能我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T09:18:55.973

正确的方法是使用该[`pathinfo()`](http://www.php.net/manual/en/function.pathinfo.php)功能。

```
$extension = pathinfo($filename, PATHINFO_EXTENSION); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:20:12.183

移至：[https](https://stackoverflow.com/a/12932338/367456) ://stackoverflow.com/a/12932338/367456 - 此答案将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:17:30.270

也许是这样的：

```
function getExtension($filename)
{
    $parts = explode('.', $filename);

    if (sizeof($parts) > 1) {
        return array_pop($parts);
    }

    return '';
} 
```

# iphone - 通话功能弹出窗口在 iOS6 中显示两次 - PhoneGap

> ID：12930923
> 
> 赞同：0
> 
> 时间：2012-10-17T09:15:03.807
> 
> 标签：iphone, cordova, popup, ios6, call

我们正在使用`<a href="tel:xxxxxxx"> Call Phone</a>`方案在**phonegap** iOS 应用程序（*版本 1.8.1*）中实现**点击通话功能。**

 ***这在**iOS5 及更低**版本中运行良好，但不幸的是，在**iOS6**中，它显示**了两个**弹出窗口，询问*是否拨打该号码*。为什么会发生这种情况，我们能做些什么呢？

*点击调用函数*而不是我的任何替代代码块？

对此的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:01:45.953

这在所有 iOS 设备上都运行良好

```
document.location.href = 'tel:+1-xxxxxxx'; 
```***

# java - 将大量图像插入 Oracle 数据库

> ID：12930925
> 
> 赞同：1
> 
> 时间：2012-10-17T09:15:08.273
> 
> 标签：java, oracle10g

我想使用 java 将 10 的数百万张图像插入到 oracle 数据库中，但是如果我这样做，可能会出现什么类型的存储或 sql 异常？

# html - 如何编写 HTML 代码

> ID：12930926
> 
> 赞同：-2
> 
> 时间：2012-10-17T09:15:07.800
> 
> 标签：html

我是 HTML 编码的新手。我想要以下 HTML 代码：假设我有两个按钮，Button1 和 Button2。最初 Button1 被启用，而 Button2 被禁用。打开单击 Button1，应显示一个标签，其值为 1,2，（比如时间代码）。一旦达到 30 秒，则应启用 Button2。怎么能写出上面的HTML代码呢？我期待这样的代码：

```
<html>
<head>
</head>
<body>
<form>
<button type="button" name="button1" enabled="enabled" onclick="WaitLoad()">Click Button1</button>
<br/>
<br/>
<label> name="Label1"></label>
<br/>
<br/>
<button type="button" name="button2" disabled="disabled">Click Button2</button>
</form>
<script type="text/vbscript">
sub WaitLoad()
{
    for i=1 to 30
        Label1.text=i
    next
    button2.enable=true
}
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:24:49.577

默认情况下，启用按钮或任何输入元素，因此您无需指定启用元素，仅在禁用元素时。

你的逻辑很好，但只是在实际编写 HTML/JS 时你会学到一些东西。

Javascript 有一个名为[setTimeout](http://www.w3schools.com/js/js_timing.asp)的函数，它非常适合您。

[setTimeout](http://www.w3schools.com/js/js_timing.asp)在经过一段时间后执行一些代码，因此您可以执行以下操作；

```
<html>
<head>
<script type="text/javascript">
function WaitLoad()
{
    setTimeout("document.getElementById('button2').disabled=false",30000);
}
</script>
</head>
<body>
    <form>
        <button type="button" name="button1" onclick="WaitLoad()">Click Button1</button>
        <br/>
        <br/>
        <label name="Label1"></label>
        <br/>
        <br/>
        <button type="button" name="button2" id="button2" disabled="disabled">Click Button2</button>
    </form>
</body>
</html> 
```

**30000 = 30 秒**（setTimeout 必须以毫秒为单位等待时间）将您编写/添加的任何 JavaScript 函数添加到 HTML 的头部也是最佳实践。

网上有很多教程会教你编写 HTML 的基础知识，以及注意事项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:29:01.013

首先，没有这样的东西叫做 enable 作为 button.in onclick 函数的属性，使用**[setTimeout(code, millisec)](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)**

**代码**：必填。将要执行的函数

**毫秒**：必需。执行代码前等待的毫秒数

```
setTimeout(function() {
    document.getElementsByName('button2')[0].disabled = false;
} ,30000); 
```

# ios - 在 UIWebView 中使用 Backbone.js 路由器和 pushState

> ID：12930932
> 
> 赞同：3
> 
> 时间：2012-10-17T09:15:34.537
> 
> 标签：ios, backbone.js, uiwebview, pushstate

我正在开发一个基于 Backbone.js 的 Web 应用程序，对于某些用例，它将被包装在原生 iOS UIWebView 中。在 iOS 应用程序中——当我们想要在 web 视图中更改页面时——我们只需在 web 视图上发起一个新请求，该请求会相应地加载页面。

我唯一的问题是，当为请求的 URL 定义了 Backbone 路由时，我希望 Web 视图使用 Backbone 的路由，`pushState`而不是启动一个全新的页面加载。但是，当没有任何与请求的 URL 对应的 Backbone 路由时，Web 视图应该将其作为一个全新的页面请求来处理，并使用该 URL “重新加载”页面。

现在，本机应用程序使用`UIWebView`'s`loadRequest:`方法并传递一个新的`NSURLRequest`，其 URL 为例如“http://example.com/search”，作为参数。

现在我唯一的想法是使用`UIWebView`'s`stringByEvaluatingJavaScriptFromString:`方法：

*   让 web 视图调用一些 JS 函数，该函数反过来会检查我的 Backbone 路由是否可以处理该 URL。
*   如果是，它应该触发路由器回调。
*   如果不是，它应该使用 URL 发起一个新的页面请求。

有输入吗？有没有解决这个问题的内置方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:04:32.453

你能不能把 pushState 用于 iOS 应用程序？我认为无论如何，用户在应用程序中都看不到该 url，因此丑陋的 url 的缺点不适用。因此，与其将 url 更改为 /items/3，不如将其更改为 #/items/3。

这意味着需要由主干处理的更改只会更改哈希值，而需要新页面的更改会更改位置。

# r - 从 URL 检索文件列表

> ID：12930933
> 
> 赞同：2
> 
> 时间：2012-10-17T09:15:41.273
> 
> 标签：r

我想获取此地址上所有可用文件的列表：[http](http://www1.ncdc.noaa.gov/pub/data/cmb/drought/weekly-palmers/2005/) ://www1.ncdc.noaa.gov/pub/data/cmb/drought/weekly-palmers/2005/ （来自 NOAA 的公开数据） .

对于特定的 URL，它将是某种“list.files”。我开始查看 RCurl，但我能得到的只是 URL 的 HTML 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:26:13.907

在这种情况下，您可以简单地使用`readHTMLTable`：

```
readHTMLTable("http://www1.ncdc.noaa.gov/pub/data/cmb/drought/weekly-palmers/2005/", 
              skip.rows=1:2)[[1]]$Name -> file.list 
```

然后创建路径列表：

```
paste("http://www1.ncdc.noaa.gov/pub/data/cmb/drought/weekly-palmers/2005/", 
      file.list[!is.na(file.list)], sep="") -> path.list 
```

# sql - 如何通过 int 身份选择以 n 个给定数字开头的记录？

> ID：12930934
> 
> 赞同：-3
> 
> 时间：2012-10-17T09:15:41.543
> 
> 标签：sql, sql-server

我想通过其`BIGINT`主键（SQL Server 标识）搜索记录，但想将它们作为字符串而不是数字进行比较。我需要它在应用程序的 GUI 中建议数据。

是否可以通过这种方式找到记录，而仍然使用主键索引？如何？

选择应该在`'123'`查询中选择行，例如：

```
123
123456
123654654 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:19:01.647

您需要在[`CAST`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)您的列中`VARCHAR`（在选择数据时）进行搜索`123%`

```
WHERE CAST(col1 AS VARCHAR(10)) LIKE '123%' 
```

[看这个演示](https://data.stackexchange.com/stackoverflow/query/edit/82625)

> 是否可以通过这种方式找到记录，**而仍然使用主键索引？如何？**

正如@Dems 在[此评论](https://stackoverflow.com/questions/12930934/how-to-select-records-by-int-identity-as-starting-with-n-given-numbers/12931636#comment17525117_12931636)中解释的那样，当您将其转换为原始数据类型时，您不能使用它`VARCHAR`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:53:30.253

您还可以[`LEFT`](http://msdn.microsoft.com/en-us/library/ms177601.aspx)为此使用函数：

```
WHERE LEFT(col1 ,3) = 123; 
```

[看这个演示](https://data.stackexchange.com/stackoverflow/query/edit/82620)

> 是否可以通过这种方式找到记录，**而仍然使用主键索引？如何？**

正如@Dems 在[此评论](https://stackoverflow.com/questions/12930934/how-to-select-records-by-int-identity-as-starting-with-n-given-numbers/12931636#comment17525117_12931636)中解释的那样，当您将其转换为原始数据类型时，您不能使用它`VARCHAR`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:18:26.633

为什么不使用 % 通配符，如下所示：

```
where id like '123%' 
```

# java - IllegalArgumentException：期待 IdClass 映射

> ID：12930935
> 
> 赞同：10
> 
> 时间：2012-10-17T09:15:47.263
> 
> 标签：java, hibernate, jboss7.x

在部署我的应用程序期间，我发生了该异常。我的应用程序中有很多课程，我不知道我必须放在哪里`@IdClass`以及这个异常是什么意思。我正在使用 Hibernate 4.1 和 JBoss AS 7.1

```
12:10:23,761 INFO  [org.hibernate.engine.jdbc.internal.LobCreatorBuilder] (MSC service thread 1-5) HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
12:10:24,075 ERROR [org.hibernate.tool.hbm2ddl.SchemaExport] (MSC service thread 1-5) HHH000389: Unsuccessful: drop sequence hibernate_sequence
12:10:24,076 ERROR [org.hibernate.tool.hbm2ddl.SchemaExport] (MSC service thread 1-5) ERROR: sequence "hibernate_sequence" does not exist
12:10:24,281 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.persistenceunit."kladr.ear/kladr-ejb-1.0-SNAPSHOT.jar#primary": org.jboss.msc.service.StartException in service jboss.persistenceunit."kladr.ear/kladr-ejb-1.0-SNAPSHOT.jar#primary": Failed to start service
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_35]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_35]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_35]
Caused by: java.lang.IllegalArgumentException: expecting IdClass mapping
    at org.hibernate.ejb.metamodel.AttributeFactory$3.resolveMember(AttributeFactory.java:878)
    at org.hibernate.ejb.metamodel.AttributeFactory$4.resolveMember(AttributeFactory.java:915)
    at org.hibernate.ejb.metamodel.AttributeFactory.determineAttributeMetadata(AttributeFactory.java:423)
    at org.hibernate.ejb.metamodel.AttributeFactory.buildAttribute(AttributeFactory.java:91)
    at org.hibernate.ejb.metamodel.MetadataContext.wrapUp(MetadataContext.java:214)
    at org.hibernate.ejb.metamodel.MetamodelImpl.buildMetamodel(MetamodelImpl.java:64)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:91)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T13:17:31.673

`@IdClass`annotation 用于定义包含 id 的 Class。ie 这通常用于定义复合键的情况。即多个属性的关键组合。如果是这样，那么我们就是这样做的。看看下面的例子.. 我们定义一个类`IdClass`并使用`@Id`'s 来定义各种 Id `s for this`IdClass`。

例子 ：

```
@Entity
@IdClass(AssignedRoleId.class)
public class AssignedRole
{
  @Id
  @ManyToOne
  private User userId;

  @Id
  @ManyToOne  
  private Role roleId;

  private Date dateAssigned;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-11-21T13:42:01.987

进一步阐述@Mukul正确答案`@IdClass`应该具有以下属性：

1.  它应该实现 Serializable
2.  它应该有一个接受 ids 的构造函数（即与 关联的字段`@Id`）
3.  它应该覆盖`equals`和`hashCode`

将此类作为实体的静态内部类有时很有用，这里有一个示例：

```
@Entity 
@IdClass(AssignedRoleId.class)
public class AssignedRole
{ 
    @Id
    @ManyToOne
    private User userId;

    @Id
    @ManyToOne
    private Role roleId;

    private Date dateAssigned;

    public static class AssignedRoleId implements Serializable {

        private User userId;
        private Role roleId;

        public AssignedRoleId() {}

        public AssignedRoleId(User userId, Role roleId) {
            this.userId = userId;
            this.roleId = roleId;
        }

        @Override
        public boolean equals(Object o) {

            if (o == this) {
                return true;
            }
            if (!(o instanceof AssignedRole)) {
                return false;
            }
            AssignedRole assignedRole = (AssignedRole) o;
            return Objects.equals(userId, assignedRole.getUserId()) &&
                   Objects.equals(roleId, assignedRole.getRoleId());
        }

        @Override
        public int hashCode() {
            return Objects.hash(userId, roleId);
        }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-02T13:37:14.077

你只能覆盖equals和hashcode，问题就解决了，还需要实现java.io.Serializable

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-07T14:04:39.243

我有同样的问题。原来我没有正确使用 Hibernate（没有 sh！t Sherlock）。我的配置文件`hibernate.cfg.xml`不包括我的实体 Java 类...我只使用该`hibernate.cfg.xml`文件进行休眠配置，并且只`javax.persistence`使用我的实体类的注释。

我刚刚在配置文件的底部添加了缺少的实体/类（总共 4 个类）并运行了我的测试代码，一切正常。

新`hibernate.cfg.xml`：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="connection.url">jdbc:oracle:thin:@localhost:1521:XE</property>
    <property name="connection.driver_class">oracle.jdbc.OracleDriver</property>
    <property name="connection.username">foo</property>
    <property name="connection.password">bar</property>
    <mapping class="test.entities.MixEntity"/>
    <mapping class="test.entities.ZutatEntity"/>
    <mapping class="test.entities.RezeptEntity"/>
    <mapping class="test.entities.MixEntityPK"/>
  </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-13T16:32:11.533

当我从另一个实体扩展并且还使用@EmbeddedId 时，我遇到了这个错误。它从父实体获取@Id。因此，在同一个实体层次结构中拥有 @Id 和 @EmbeddedId 对我来说是这样的。在我的情况下，错误消息有点误导。我通过不从父级扩展来摆脱了错误。

这不适用于您的情况，因为您没有扩展，但我正在写这个答案是为了让人们因与错误消息中提到的问题不同的问题而收到此错误。

# php - 用于 cronjobs 的 wget、curl 和 php

> ID：12930936
> 
> 赞同：5
> 
> 时间：2012-10-17T09:15:47.943
> 
> 标签：php, curl, cron, wget

我一直在想，在创建 cron 作业时 wget [参数]、curl [参数] 和 php [参数] 之间有区别吗？

如果我有一个脚本“cron-00-00.php”并且我需要运行它上面提到的每一个会做什么？

```
0 0 * * * php -q /your_abolute_path/includes/php/cron/cron-00-00.php >/dev/null 2>&1
0 0 * * * wget -O - -q -t 1 http://your_domain_com/includes/php/cron/cron-00-00.php >/dev/null 2>&1
0 0 * * * curl http://your_domain_com/includes/php/cron/cron-00-00.php 
```

还是可以选择使用其中一个（取决于最适合我的那个）？

我目前认为它们三个具有不同的功能。请纠正我的观念。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T09:22:59.777

直接运行 PHP 是最简单的选择。它不会占用您的 apache（或其他网络服务器）实例上的网络插槽。它还绕过了与旨在保护您的计算机免受恶意第三方攻击的网络服务器相关的限制。但是，PHP 命令行版本的运行环境略有不同，可能足以防止编写不佳的脚本正常运行。此外，一些网络服务器在 apache 的进程空间中将 PHP 作为 DSO 模块运行，并使用 apache 的用户权限。这可能会影响您的结果（可能是积极的，也可能是消极的）。

在其余两个选项中，`curl`似乎比 更广泛地部署`wget`，所以这将是我的第二选择，尽管它们大致相等。

# php - 站点地图未读取 javascript 链接

> ID：12930939
> 
> 赞同：0
> 
> 时间：2012-10-17T09:15:58.780
> 
> 标签：php, javascript, seo, sitemap

我有一个奇怪的问题，这周大部分时间都在处理。

在我网站的页脚中，我使用 java 脚本使用随机链接

```
 <a class="default.php">Some Default Text</a> 
```

和 javascript 是

```
 <script>
 (function(){
  var myLinks = [
{href: 'example.php?title=hello', text: 'example1'},
{href: 'example.php?title=hello2', text: 'example2'}
];
onload = function(){
var link, pageLinkClass = 'myLink', pageLinks = document.getElementsByTagName('a');
pageLinkClass = new RegExp('\\b' + pageLinkClass + '\\b');
for(var i = 0; i < pageLinks.length; ++i){
if(pageLinkClass.test(pageLinks[i].className)){
link = myLinks[Math.floor(Math.random() * myLinks.length)]
pageLinks[i].href = link.href;
pageLinks[i].firstChild.nodeValue = link.text;
pageLinks[i].target = '_self';
}
}
};
})();// JavaScript Document
</script> 
```

（这是一个例子）

但是当我抓取我的网站以生成站点地图时，它只会将链接读取为 example.php?title=

而不是尾随部分。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:21:38.153

您的爬虫不能/不解释 JavaScript。许多机器人和爬虫只会读取原始 HTML。Google Bot 可以在一定程度上解释 JS，但我仍然不会依赖它。您最好的选择是在服务器端生成链接。

# python - 使用 -h 调用时不要停止执行函数

> ID：12930940
> 
> 赞同：1
> 
> 时间：2012-10-17T09:16:04.950
> 
> 标签：python, command-line-arguments, argument-passing, argparse

我的主要 python 函数接受`argv`并使用这些参数调用另外两个函数来设置整个应用程序。

问题是如果`argv`包含`-h`(`--help) 然后它被传递给第一个函数，它按预期打印它的使用消息（由 argparse 生成），如下所示：

```
optional arguments:
  -h, --help       show this help message and exit
  -x section 
```

**但随后执行停止！**，我们又回到了提示符处。

我希望执行继续，所以第二个函数也被调用，并且它的使用消息也被打印出来。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:25:58.667

argparse 提供的帮助命令的默认实现显示帮助消息并退出。您需要防止添加它，并定义您自己的自定义参数来显示帮助而不退出。

首先，[`add_help=False`](http://docs.python.org/dev/library/argparse.html#add-help)在创建解析器时使用关键字参数，防止添加默认实现。然后正常添加自己的参数，出现时调用[`parser.print_help()`](http://docs.python.org/dev/library/argparse.html#argparse.ArgumentParser.print_help)显示帮助信息。

```
parser = argparse.ArgumentParser(add_help=False)
parser.add_argument('-h','--help', action='store_true')

args = parser.parse_args(argv)
if args.help:
    parser.print_help() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:19:56.500

您需要捕获`SystemExit`异常：

```
exited = None
try:
     function1(argv)
except SystemExit as e:
     # don't exit just yet
     exited = e
function2(argv)

# If function 2 *did not* exit, there was a legitimate reason
# re-raise the SystemExit exception
if exited is not None:
    raise exited 
```

请注意，我*将*系统退出异常存储在`function1`; 它可能是由于不同的动作而不是`-h`旗帜而引起的。如果`function2`本身没有引发异常，我们会重新引发原始`SystemExit`异常以正确清理。

该`except SystemExit as e:`语句在局部变量中捕获异常`e`。这样分配的局部变量通常在块的末尾被删除`except`（以防止引用循环）；如果您想在`except`套件之外使用该异常，则需要将其存储在一个*新*变量中；这就是为什么在套件`exited`之外定义一个单独的变量的原因。`except`

或者，您可以选择使用该选项`-h`从 argparser 中完全删除开关，然后在此处手动处理帮助。`function1``add_help=False`

# windows-runtime - Windows 运行时：从不同位置删除时 StorageFolder.DeleteAsync 的不同行为

> ID：12930942
> 
> 赞同：2
> 
> 时间：2012-10-17T09:16:14.887
> 
> 标签：windows-runtime, windows-store-apps

在代表不同父位置的文件夹的 StorageFolder 对象上调用 DeleteAsync 时，我对它的行为感到有些困惑。如果我要删除的文件夹的父位置是例如本地应用程序数据文件夹，我可以删除文件夹，即使它们有内容（文件和子文件夹）。例如，如果父位置是文档库，如果文件夹不为空，我会收到异常“目录不为空。（来自 HRESULT 的异常：0x80070091）”。

我当然声明了访问文档库的能力，并在应用程序清单中声明了文件类型。为了证明访问这些文件（我的测试用例中的文本文件）有效，我的测试应用程序创建了文件夹并在其中创建了文本文件。该应用程序甚至可以从文件夹中删除单个文本文件。但是如果父文件夹是文档库，则不允许删除整个文件夹。

有人可以解释这种不同的行为吗？这可能与假设（我不确定）应用程序数据文件夹中的数据比其他数据（很可能是用户数据）更轻松地处理有关。这种假设的一个提示是，删除应用程序数据文件夹中的文件总是会永久删除它们，但在其他文件夹中删除则允许移动到回收站。

**编辑：** 这是我的测试应用程序：[www.juergen-bayer.net/Downloads/FolderDeletionTest.zip](http://www.juergen-bayer.net/Downloads/FolderDeletionTest.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:07:05.060

你描述的行为对我来说似乎非常明智。应用程序本地文件夹归您的应用程序所有，理论上它的所有内容都可供您的应用程序随意使用。嵌套文件夹删除就是一个很好的例子。您的应用应该能够删除它认为合适的所有数据，包括删除非空文件夹。

然而，用户的文档文件夹是一个非常不同的野兽。没有什么可以阻止（甚至难以）您的用户将内容添加到您使用您的应用程序创建的文件夹中。只需打开资源管理器，他们就可以访问文件夹的内容。如果您的应用想要在此处删除文件夹，您必须在删除之前绝对确定该文件夹中没有用户创建的文档。在代码中删除时添加这个额外的障碍应该让开发人员考虑他们将要采取的行动，如果不是真的阻止他们逐一删除内容的话。

因此，简而言之：您的应用程序拥有自己的文件夹，并且可以随心所欲地处理自己的数据。它不拥有文档库，因此您不应该一次删除充满文件的整个文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:06:26.277

似乎这个文件夹中的某些文件或目录此时已被其他线程/应用程序甚至您的代码访问。尝试一一删除文件我认为您会收到访问错误。

# android - javamail线程卡在android应用程序上

> ID：12930944
> 
> 赞同：0
> 
> 时间：2012-10-17T09:16:17.480
> 
> 标签：android, sockets, jakarta-mail

我在 android 设备上运行 javamail。我正在使用这个问题的答案中建议的 jar 文件：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

当我导致android设备的连接丢失（打开\关闭wifi，设置飞行模式）时，每个调用的访问javamail套接字的函数都没有返回。卡住函数的示例（我尝试在 FOLDER 对象和 STORE 对象上调用函数：

关（）

强制关闭（）

获取类型（）

没有抛出异常（试图在范围内抛出异常 - 它被捕获） logcat 上没有显示错误日志

重要的是要提到“removeMessageCounterLister”函数工作正常并且线程在调用后没有卡住

如果重要的话，我有jdk7。

非常感谢你的回答

* * *

更新：这个问题与超时连接没有任何关系。我设置了超时和连接超时参数，它们只影响 idle() 函数。

当线程卡住时，javamail 日志正在写入的消息是“DONE”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:19:05.633

您可能需要配置一些超时，包括连接超时和 I/O 超时。有关可以设置的属性列表，请参阅协议包的 javadocs，例如[com.sun.mail.imap 包](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/package-summary.html)

# javascript - 谷歌地理编码器按语言更改结果

> ID：12930945
> 
> 赞同：1
> 
> 时间：2012-10-17T09:16:18.580
> 
> 标签：javascript, xmlhttprequest, google-geocoder, google-geocoding-api

我有这段代码试图从印地语中获取演示数据，例如，我从我在桌面中创建的本地 .html 运行它。

```
var xmlhttp;

if (window.XMLHttpRequest)
{
    xmlhttp = new XMLHttpRequest();
}
else
{
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.open("GET", "http://maps.googleapis.com/maps/api/geocode/xml?latlng=40.714224,-73.961452&language=hi&sensor=true", true);

xmlhttp.onreadystatechange = function ()
{
    if (xmlhttp.readyState != 4) return;
    if (xmlhttp.status != 200 && xmlhttp.status != 304) return;
    document.write(xmlhttp.responseText);
};

xmlhttp.send(null); 
```

谷歌不允许我获取数据，因为`Access-Control-Allow-Origin`. 我该怎么做才能得到这些数据，我真的很困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:28:17.050

您应该使用带有内置[地理编码服务](http://goo.gl/ha8uI)的 JavaScript Google Maps API，而不是使用直接的网络调用。您可以将语言设置为 JavaScript 加载器的参数：maps.googleapis.com/maps/api/js?sensor=false&language=hi

# postgresql - PostgreSQL。可以并行运行更新查询吗？

> ID：12930947
> 
> 赞同：13
> 
> 时间：2012-10-17T09:16:19.327
> 
> 标签：postgresql, parallel-processing, sql-update

我有一张有 10M 行的大桌子。我需要为每一行获取一些统计值。我有生成这个值的函数，例如`GetStatistic(uuid)`. 这个函数工作得非常慢，结果值不经常改变，所以我`Statistic`在我的表中创建了列，并且每天执行一次这样的查询：

```
UPDATE MyTable SET Statistic = GetStatistic(ID); 
```

在选择查询中，我使用列`Statistic`而不调用`GetStatistic`函数。

问题是，我的生产服务器有 64 个 CPU 和大量内存，所以几乎所有的 DB 都可以缓存到 RAM，但是这个查询只使用一个 CPU，需要 2 或 3 个小时来执行。

GetStatistic 函数使用表，该表在所有查询执行期间都是不变的`UPDATE`。我可以修改查询以使 postgre`GetStatistic`使用所有可用的 CPU 同时并行计算不同的行吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T12:17:30.547

早于 10 的 PostgreSQL 版本在单个后端执行每个查询，该后端是具有单个线程的进程。它不能使用多个 CPU 进行查询。它在单个查询中可以实现的 I/O 并发性也有所限制，实际上只为位图索引扫描执行并发 I/O，否则依赖操作系统和磁盘系统进行并发 I/O。

PostgreSQL 10+ 支持[并行查询](https://www.postgresql.org/docs/current/parallel-query.html)。在撰写本文时（PostgreSQL 12 版本）并行查询仅用于*只读查询*。并行查询支持为某些类型的查询提供了相当多的并行性。

Pg 擅长并发负载许多较小的查询，并且很容易以这种方式使您的系统饱和。它只是不擅长为一两个非常大的查询充分利用系统资源，尽管随着为更多类型的查询添加并行查询支持，这种情况正在改善。

* * *

如果您使用的是没有并行查询的旧 PostgreSQL，或者您的查询尚未受益于并行查询支持：

你能做的就是把工作分成几块，然后交给工人。你已经提到了这一点：

> 我可以修改查询以使 postgre 使用所有可用的 CPU 同时并行计算不同行的 GetStatistic 吗？

有多种工具，如[DBlink](http://www.postgresql.org/docs/current/static/dblink.html)、[PL/Proxy](http://wiki.postgresql.org/wiki/PL/Proxy)、[pgbouncer](http://wiki.postgresql.org/wiki/PgBouncer)和[PgPool-II](http://www.pgpool.net/)旨在帮助完成此类工作。或者，您可以自己做，启动（比如说）8 个工作人员，每个工作人员都连接到数据库并`UPDATE ... WHERE id BETWEEN ? AND ?`使用不重叠的 ID 范围执行语句。一个更复杂的选择是让队列控制器向工作人员分发大约 1000 个 ID 的`UPDATE`范围，然后该范围要求新的 ID。

请注意，64 个 CPU 并不意味着 64 个并发工作人员是理想的。在写入方面，您的磁盘 I/O 也是一个因素。如果您将`UPDATE`事务设置为使用 a`commit_delay`并且（如果对您的业务对此数据的要求安全），您可以减少 I/O 成本，`synchronous_commit = 'off'`那么同步的负载应该会显着减少。尽管如此，最好的吞吐量很可能远低于 64 个并发工作人员。

`GetStatistic`通过将函数转换为可内联的 SQL 函数或视图，而不是目前可能是循环繁重的过程 PL/pgSQL 函数，您的函数很可能会变得更快。如果您显示此功能可能会有所帮助。

# c# - 每次触发用户控制负载

> ID：12930954
> 
> 赞同：1
> 
> 时间：2012-10-17T09:16:27.923
> 
> 标签：c#, user-controls, mdi

我有一个在 MDI 子级内部使用的用户控件。当它关闭时，我正在更改该 MDI 子项的可见性。

```
private void MDIChild_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = true;
    this.Visible = false;
} 
```

但是当我将 MDI 表单的可见性更改为 true 时，即使没有触发表单加载，也会触发用户控件加载事件。但这不会发生在普通 Windows 窗体的情况下。

基本上我需要在某些情况下禁用我的 MDI 孩子的关闭功能。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:22:55.813

[来自UserControl Load](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.load.aspx)事件的 MSDN 文档

> 如果 UserControl 是 MDI 子窗体的一部分，则每次显示子窗体时都会发生 Load 事件。在这种情况下，您应该将任何一次性初始化代码放在 UserControl 而不是 Load 事件处理程序中。

因此，当您显示 MDI 表单时，就满足了此条件。这意味着，在这种情况下，如果您依赖 UserControl 的 Load 事件，则应将其移至另一个方法并在显示 MDI 表单时显式调用该方法。

# objective-c - iOS 版 Twitter、oauth_nonce 和发送帖子请求？

> ID：12930955
> 
> 赞同：0
> 
> 时间：2012-10-17T09:16:28.603
> 
> 标签：objective-c, ios, post, twitter, twitter-oauth

我试图让 reverse_oauth 在 iPhone 应用程序上工作，但我遇到了一些关于 POST 请求以及我实际应该发送的值的问题，所以我的问题是双重的。

我正在尝试遵循 twitter 在此处发布的指南：[https ://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth)

第一个问题是关于 oauth_nonce，或者更确切地说，我如何获取要发送的值？我知道 oauth_nonce 是由算法 HMAC-SHA1 散列的随机生成的字符串，但是我是否应该在每次我想发出请求时生成一个散列的随机字符串？或者它是一个应该基于某些东西散列的值？

我的 POST 请求目前看起来像这样：

```
NSString *twitterUrlToPing = @"https://api.twitter.com/oauth/request_token";

NSURL *twitterUrl = [NSURL URLWithString:twitterUrlToPing];

NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:twitterUrl];
[req addValue:@"xxx" forHTTPHeaderField:@"oauth_consumer_key"];
[req addValue:@"xxx" forHTTPHeaderField:@"oauth_nonce"];
[req addValue:@"HMAC-SHA1" forHTTPHeaderField:@"oauth_signature_method"];
[req addValue:timeStampString forHTTPHeaderField:@"oauth_timestamp"];
[req addValue:@"1.0" forHTTPHeaderField:@"oauth_version"];
[req addValue:@"reverse_auth" forHTTPHeaderField:@"x_auth_mode"];

[req setHTTPMethod:@"POST"];

NSLog(@"twitterHeaderPostvalues: %@", [req allHTTPHeaderFields]);

NSURLResponse *response;
NSError *err;
NSData *responseData = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&err];
NSString *content = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

NSLog(@"contentResponseFromTwitter: %@", content); 
```

这是发送请求的正确方法吗？如果不是，它应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:14:16.090

Joakim，我可以建议看看这个例子...... [https://github.com/seancook/TWReverseAuthExample](https://github.com/seancook/TWReverseAuthExample)

Sean 是 Twitter 员工，我对这段代码没有任何问题。消除了很多头痛并很好地处理错误。

# jquery - slimScroll 的多个可滚动元素

> ID：12930959
> 
> 赞同：2
> 
> 时间：2012-10-17T09:16:54.993
> 
> 标签：jquery, slimscroll

我使用 jquery slimScroll，我发现它非常有用，但不幸的是我遇到了一个问题。

所以更详细的问题是：如果我们将 slimScroll 与嵌入了另一个项目的项目一起使用，我们也使用 slimScroll（即 slimScroll 用于两个项目），它们不能一起正常工作——这是非常困难的。即：这两个项目不能单独滚动，绝对不能，如果我们将鼠标悬停在它上面，也不能点击它使其处于活动状态。在测试页面中，我插入了一个 textarea（只需在其中输入），它与 slimScroll 的行为也很奇怪。

我做了一个测试页面： [http ://seven7.uw.hu/slimscroll/index.html](http://seven7.uw.hu/slimscroll/index.html)

所以我在多个元素上调用插件，如下所示：

```
$(".content").slimScroll({
  'size': '8px',
  'height': '450px'
});

$(".texta").slimScroll({
  'size': '8px'
});

$(".contentInsideDiv").slimScroll({
  'size': '8px'
}); 
```

从我的测试页面源代码中可以看出，内容 div 包含其他元素。谢谢您的帮助。

# c# - 使用 autofixture 创建结构不会引发公共构造函数错误

> ID：12930963
> 
> 赞同：10
> 
> 时间：2012-10-17T09:17:07.153
> 
> 标签：c#, unit-testing, autofixture

我有一个结构，例如：

```
public struct Foo
{
    public int Bar;
    public string Baz;
} 
```

并想使用 autofixture 在我的单元测试中创建它。我尝试使用以下内容：

```
IFixture fixture = new Fixture();
var f = fixture.CreateAnonymous<Foo>(); 
```

但这会引发`AutoFixture was unable to create an instance`错误。是否可以使用 autofixture 自动创建结构？怎么可能做到这一点？请注意，我正在处理遗留代码，因此需要处理结构。:)

**编辑 ：**

改变了

```
IFixture fixture = new Fixture().Customize(new AutoMoqCustomization()); 
```

到

```
IFixture fixture = new Fixture(); 
```

因为它与问题无关。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T04:11:22.267

这本质上是 C# 编译器如何处理值类型的人工制品。虽然[文档似乎另有说明](http://msdn.microsoft.com/en-us/library/s1ax56ch%28v=vs.80%29.aspx)，但从反射的角度来看， Foo 结构没有公共构造函数。

例如，如果您执行此代码：

```
var ctors = typeof(Foo).GetConstructors(); 
```

结果是一个空数组。

但是，此代码编译：

```
var f = new Foo(); 
```

所以你可以争辩说 AutoFixture 应该能够创建 Foo 的一个实例。

然而，最终，[可变结构是邪恶的](http://blogs.msdn.com/b/ericlippert/archive/2008/05/14/mutating-readonly-structs.aspx)，应该不惜一切代价避免。更好的选择是将 Foo 实现更改为：

```
public struct Foo
{
    public Foo(int bar, string baz)
    {
        this.Bar = bar;
        this.Baz = baz;
    }

    public readonly int Bar;
    public readonly string Baz;
} 
```

如果你这样做，你现在不仅有一个（更多）正确的值类型，而且 AutoFixture 也能够创建一个实例而无需进一步修改。

[因此，这是GOOS](https://rads.stackoverflow.com/amzn/click/com/0321503627)范式的一个很好的例子，你应该*听听你的测试*。如果它们存在摩擦，则可能是有关您的生产代码的反馈。在这种情况下，这正是由于值类型实现存在缺陷而导致您即将自取其辱的反馈。

PS即使您像上面概述的那样“修复” Foo 结构，将其设为结构而不是类有什么意义？它仍然包含一个字符串（引用类型）字段，因此即使结构本身将存在于堆栈中，字符串字段仍将指向堆中的数据。

* * *

我已[将此问题](https://github.com/AutoFixture/AutoFixture/issues/19)添加为 AutoFixture 的一个可能的新功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:31:40.090

从这篇[博文中得到启发](http://blog.ploeh.dk/2010/10/19/ConventionbasedCustomizationsWithAutoFixture.aspx)，我创建了一个类来实现`ISpecimenBuilder`

```
class FooBuilder : ISpecimenBuilder
{
  public object Create(object request, ISpecimenContext context)
  {
    var sr = request as SeededRequest;
    if (sr == null)
    {
        return new NoSpecimen(request);
    }
    if (sr.Request != typeof(Foo))
    {
        return new NoSpecimen(request);
    }

    var foo = new Foo();
    foo.Bar = context.CreateAnonymous<int>();
    foo.Baz = context.CreateAnonymous<string>();
    return foo;
  }
} 
```

并将类添加为自定义

```
fixture.Customizations.Add(new FooBuilder()); 
```

导致调用`CreateAnonymous<Foo>`工作。

如果有更多开箱即用的解决方案，请发布它，我会接受它作为答案。

# c++ - 键在 C++ 映射中不是唯一的

> ID：12930967
> 
> 赞同：5
> 
> 时间：2012-10-17T09:17:15.460
> 
> 标签：c++, map, c++-standard-library

我的程序中有一个 std::map ，它存储成对的值。我希望地图中的键是唯一的——这是 std::map 类的预期行为。但是当我将这些对插入其中时，会重复一些键。我该如何解决这个问题？

我的代码如下：

```
map<float,vector<float> *> inpDataMap;
inpDataMap.clear();
    for(int i = 0; i < input.getNum(); i++)
    {

        float xVal = input[i][0];
        float yVal = input[i][1];

        if(inpDataMap.count(xVal) > 0)
        {
            myfile << i << " repeated xval: " << xVal << " : " << yVal << endl;
            inpDataMap[xVal]->push_back(yVal);
            myfile << "repeated value pushed" << endl;
        }
        else
        {
            vector<float> *inVec = new vector<float>;
            inVec->push_back(yVal);
            inpDataMap[xVal] = inVec;
            myfile << i << " not repeated:" << xVal << ":" << yVal << endl;
        }

    } 
```

正如你所看到的，我在这里的地图实际上是一个浮点数和一个相关浮点数的向量的关联。如果已经存在一个键，则将该值添加到与该键对应的向量中。但就像我说的，密钥不是唯一存储的。有人可以帮我解决这个问题吗？

拉克什。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T09:23:42.757

浮点数的问题在于您不能简单地使用`==`运算符来确保它们相等。例如，一个数字可能是`7.0`，但另一个数字实际上可能是`7.000000000015`，即使它应该`7.0`也是。

要走的路是定义一个精度，你想用它来比较这些浮点数，并检查它们的差异是否小于精度。对于给定的示例，如果我们选择 的精度`0.000001`，这两个数字是相等的，因为`| (7.000000000015 - 7.0)| < 0.000001.`

您可以通过自己的比较器来实现这种逻辑。`std::map`有一个比较器类作为其模板参数之一。

**更新：**

事实证明，确实没有解决地图中浮点键问题的通用方法。评论中概述的问题非常严重。映射比较器需要保证插入的键的严格弱排序，但是对于浮点数的一般情况似乎不可行。

假设您要插入 3 个键：a、b 和 c。有可能`a < b`是假的（因为它们在给定的精度下是相等的），`b < c`是假的（出于`a < b`与`a < c`不相等），这很糟糕。

要克服这一点，您需要对预期的键有所了解。如果它们彼此距离足够远（距离大于通常的浮点算术误差），则可以编写适当的比较器。

有关比较器的示例，您可以转到[https://stackoverflow.com/a/6684830/276274](https://stackoverflow.com/a/6684830/276274)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T09:22:07.730

地图不能包含重复的键。您可能认为这是因为浮点精度 - 某些在您**看来**相等的值实际上是不同的。要解决这个问题，您可以`Compare`在地图中使用自定义类来将足够接近的浮点数视为相等：

```
map<float,vector<float> *, CustomCompare> inpDataMap; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:27:07.930

如何存储 a`std::vector`而不是指向的指针`vector`：

```
map<float,vector<float> > inpDataMap;
inpDataMap.clear();
for(int i = 0; i < input.getNum(); i++)
{
    float xVal = input[i][0];
    float yVal = input[i][1];
    inpDataMap[xVal].push_back(yVal);
} 
```

# c - 操作系统中的监视器

> ID：12930969
> 
> 赞同：1
> 
> 时间：2012-10-17T09:17:28.600
> 
> 标签：c, unix, operating-system

“监视器是特定于语言的构造” - 这是什么意思？这是否意味着它们依赖于编译器/编程语言？如果是这样，它们不能在 C 中实现，对吗？我被要求在 C 中实现一个监视器。最初虽然是一个监视器结构..但由于它不能保存函数，所以它没有用。有人有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:28:04.023

[某些语言](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29#History)内置了对称为监视器的同步原语的支持。其他人没有。C 没有。它可以用 C 实现，但它的实现最终将取决于 CPU 和/或操作系统。

# javascript - 单击单选按钮填充文本框

> ID：12930971
> 
> 赞同：0
> 
> 时间：2012-10-17T09:17:32.220
> 
> 标签：javascript, jquery

我有 3 个单选按钮，当其中一个被选中时，我想自动将文本放入文本框中。例如，如果用户选择了“是”单选按钮，我希望将文本“是”放在文本框中，如果他们选择另一个单选按钮，我希望将其清除。

谁能帮我？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:20:53.880

你想要这个吗？

[http://jsfiddle.net/viralshah/KNct8/3/](http://jsfiddle.net/viralshah/KNct8/3/)

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:30:50.693

尝试这个。应该是跨浏览器的，但值得在一些较旧的浏览器中进行测试。

```
<html>
<body>
<p><span>User clicked: </span><input type="text" id="userAnswer"/></p>
<input type="radio" name="userAnswerChoice" value="Yes"/>
<input type="radio" name="userAnswerChoice" value="No"/>
<input type="radio" name="userAnswerChoice" value="Maybe"/>
<script type="text/javascript">
function handleUserAnswer(e){
    var el = e.target || e.srcElement;
    document.getElementById('userAnswer').value = el.value;
}
var radios = document.getElementsByTagName('input');
for(var i = 0; i<radios.length; i++){
    var r = radios[i];
    if(r.getAttribute('name') == 'userAnswerChoice'){
        if(r.addEventListener){
            r.addEventListener('change',handleUserAnswer);
        }else if(r.attachEvent){
            r.attachEvent('onchange',handleUserAnswer);
        }else{
            r.onChange = handleUserAnswer;
        }
    }
}
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:19:19.707

这可能会帮助你

```
<form action="test1.asp" id="testform">
<input type="text" id="test3" value="">
<input type="radio" id="submit" onclick="modify_value()"/>
</form>
<script type="text/javascript">
function modify_value()
{
var hidden_field = document.getElementById('test3');
hidden_field.value = 'testvalue';

}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:18:56.853

您有一个 onclick 事件，因此添加 onclick="function" 并在该函数中设置文本...您可以使用类似 javascript 从单选框中获取文本[如何获取单选按钮的文本（不是值）](https://stackoverflow.com/questions/1308509/how-do-i-get-the-text-of-a-radio-button-not-the-value)

# android - 带图片的Android Google API

> ID：12930974
> 
> 赞同：0
> 
> 时间：2012-10-17T09:17:42.543
> 
> 标签：android, google-places-api

我正在尝试创建一个 android applictaion 来定位用户周围的兴趣点并显示它。到目前为止，我已经在 ravi #androidhive 的帮助下成功合并了 googleplace api，但我仍然不知道如何从 google 地方提取图片。此外，我很困惑是否存在 wikitravel api，如果存在，我在哪里获得它以及如何获得它。最后，如果无法从 wiki travel api 获取资源并且无法从 google 地方提取图片，我可以从哪些其他资源中提取以及如何与我的应用程序集成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:14:23.840

**编辑：** Places API 现在支持返回一张地方照片（如果可用于[地方搜索请求](https://developers.google.com/places/documentation/search)）和最多十张地方照片用于[地方详情请求](https://developers.google.com/places/documentation/details)。

如果您的请求返回了照片数组，您可以将`photo_reference`包含的照片对象中的和/或,和参数传递给[放置照片请求：](https://developers.google.com/places/documentation/photos)`maxheight``maxwidth``sensor``key`

```
https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=CnRvAAAAwMpdHeWlXl-lH0vp7lez4znKPIWSWvgvZFISdKx45AwJVP1Qp37YOrH7sqHMJ8C-vBDC546decipPHchJhHZL94RcTUfPa1jWzo-rSHaTlbNtjh-N68RkcToUCuY9v2HNpo5mziqkir37WU8FJEqVBIQ4k938TI3e7bf8xq-uwDZcxoUbO_ZJzPxremiQurAYzCTwRhE_V0&sensor=false&key=AddYourOwnKeyHere 
```

有关详细信息，请参阅[文档。](https://developers.google.com/places/documentation/photos)

# mongodb - MongoDB 是否在我的嵌入式阵列上使用索引？

> ID：12930977
> 
> 赞同：0
> 
> 时间：2012-10-17T09:17:54.707
> 
> 标签：mongodb, indexing

我有一个包含嵌入文档的文档。目的是允许别名登录，即：一个用户需要能够有多个登录（用户名+company_id+pwd），因为他或她可能属于不同的公司。

它看起来像这样：

```
{
    name : "James D"
    logins : [
        {company_id : 1, username : "james", pwd : "****"},
        {company_id : 2, username : "james.d", pwd : "****"},
        {company_id : 3, username : "jd", pwd : "****"}
    ]
} 
```

我想索引到`company_id`and `username`，我使用过

```
> db.user.ensureIndex({"logins.username" : "james", "logins.company_id" : 1}) 
```

这是我的问题，索引有效吗？查询是否真的使用索引？我问是因为（1）我不确定 MongoDB 是否处理这种索引，以及（2）我不确定如何解释 explain() 函数。

```
> db.user.find({"logins.username" : "james", "logins.company_id" : 1}).explain()
{
        "cursor" : "BtreeCursor username.color_1_logins.company_id_1",
        "nscanned" : 3,
        "nscannedObjects" : 3,
        "n" : 2,
        "millis" : 1,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : true,
        "indexOnly" : false,
        "indexBounds" : {
                "logins.username" : [
                        [
                                "blue",
                                "blue"
                        ]
                ],
                "logins.company_id" : [
                        [
                                {
                                        "$minElement" : 1
                                },
                                {
                                        "$maxElement" : 1
                                }
                        ]
                ]
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:10:48.893

这些索引是允许的，您的索引似乎正在工作。每个数组元素都单独添加到索引中，因此对大型数组进行索引可能会迅速增加索引的大小。对于一些不应该成为问题的用户名别名。

# c - C（Arduino）中的字符串数组（char数组）。我该如何完成它？

> ID：12930978
> 
> 赞同：2
> 
> 时间：2012-10-17T09:17:54.043
> 
> 标签：c, arrays, arduino, chars

我想访问某些基本上如下所示的数据：

```
char* a[]={
    "0000000000",
    "0000000000",
    "0011111100",
    "0000100100",
    "0000100100",
    "0011111100",
    "0000000000",
    "0000000000",
}; 
```

我有大约 200 个这样的数据集，并且想顺便访问它。

`fooBar[23];`--> 这应该返回第 23 个字符数组（类似于上面列出的示例）。

据我从其他编程知识了解，我需要一个字符串数组。数组索引是我的查找编号（最多为 255）。数组值是如上所示的字符数组。

如何使用 C（Arduino IDE）来实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:28:12.610

只需使用二维数组。喜欢：

```
char a[][]={
    "0000000000",
    "0000000000",
    "0011111100",
    "0000100100",
    "0000100100",
    "0011111100",
    "0000000000",
    "0000000000",
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:13:04.017

根据您的评论，我*认为*这就是您所要求的：

```
const char* data_sets[][200] =
    {
        { "00000", "11111",         },
        { "22222", "33333", "44444" },
        { "55555"                   },
    }; 
```

中的每个条目`data_sets`都是 200 的数组`const char*`。对于访问：

```
for (size_t i = 0; i < sizeof(data_sets) / sizeof(data_sets[0]); i++)
{
    const char** data_set = data_sets[i];
    printf("data_set[%u]\n", i);
    for (size_t j = 0; data_set[j]; j++)
    {
        printf("  [%s]\n", data_set[j]);
    }
} 
```

[请参阅http://ideone.com/6kq2M](http://ideone.com/6kq2M)上的在线演示。

# smalltalk - 立即终止进程

> ID：12930980
> 
> 赞同：2
> 
> 时间：2012-10-17T09:18:02.383
> 
> 标签：smalltalk, pharo

考虑以下代码：

```
process := [ (Delay forSeconds: 10) wait ] 
    forkAt: Processor userBackgroundPriority.
process terminate.
process isTerminated. "--> false"
process resume. "process has been suspended but not terminated"
(Delay forSeconds: 10) wait.
process isTerminated "--> true" 
```

如您所见，该进程在块被评估之前不会终止（即在本例中为十秒后）。

有没有办法**立即**终止进程？另外：有没有人知道为什么首先评估该块？

**编辑：** 我可以看到为什么要评估该块。上面代码的问题当然是我尝试在进程激活之前终止它。不过，如果我不想等待延迟到期怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:29:13.187

发送后`terminate`，您的进程被暂停（通过发送检查`isSuspended`），因此除非恢复，否则它将不会运行。你得到错误是`isTerminated`因为该过程还没有机会开始（查看源代码`isTerminated`以了解原因）。

所以实际上你的进程是不活动的，一旦你放开引用就会被正确地收集垃圾，就你的目的而言，它应该和“终止”一样好。

（免责声明：我查看的是 Squeak 代码，而不是 Pharo，但系统的这一部分应该几乎相同）

# extjs - 是否可以在 extjs 的网格面板中显示多个摘要行？

> ID：12930982
> 
> 赞同：7
> 
> 时间：2012-10-17T09:18:09.503
> 
> 标签：extjs, grid, extjs4, gridpanel, summary

以下是我的代码，用于显示带有总成本摘要的网格面板。我想显示另一个带有平均值的摘要行。那么有什么帮助吗？

```
 Ext.require(['Ext.data.*', 'Ext.grid.*']);

    Ext.onReady(function() {

    Ext.define('NewEstimate', {
        extend: 'Ext.data.Model',
        fields: ['description', 'cost'],
        validations: [{
            type: 'length',
            field: 'description',
            min: 3
        }, {
            type: 'int',
            field: 'cost',
            min: 1
        }]
    });

    var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

    var store = Ext.create('Ext.data.Store', {
            autoLoad: true,
            autoSync: false,
            model: 'NewEstimate',
            proxy: {
                type: 'rest',
                url: 'app.php/users',
                reader: {
                    type: 'json',
                    root: 'data'
                },
                writer: {
                    type: 'json'
                }
            },
            listeners: {
                write: function(store, operation){
                    var record = operation.records[0],
                        name = Ext.String.capitalize(operation.action),
                        verb;

                    if (name == 'Destroy') {
                        verb = 'Destroyed';
                    } else {
                        verb = name + 'd';
                        alert(name);
                    }
                    Ext.example.msg(name, Ext.String.format("{0} user: {1}", verb, record.getId()));

                }
            }
        });

    var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 1,
            listeners: {
                edit: function(){
                    grid.getView().refresh();
                }
            }
        });

    var data = [
        {projectId: 100, taskId: 112, description: 'Integrate 2.0 Forms with 2.0 Layouts', cost: 150},
        {projectId: 100, taskId: 113, description: 'Implement AnchorLayout', cost: 150},
        {projectId: 100, taskId: 114, description: 'Add support for multiple types of anchors', cost: 150},
        {projectId: 100, taskId: 115, description: 'Testing and debugging', cost: 0}
    ];

    var gridPanel = new Ext.create('Ext.grid.Panel', {
        width: 600,
        height: Ext.getBody().getViewSize().height * 0.3,
        renderTo: document.body,
        plugins: [rowEditing],
        features: [{
            ftype: 'summary'
        }
        ],
        store: store,
        columns: [{
            dataIndex: 'description',
            flex: 1,
            text: 'Description',
            summaryType: 'count',
            field: {
                    xtype: 'textfield',
                    allowBlank: false
                },
            summaryRenderer: function(value){
                return Ext.util.Format.leftPad('Estimate Total (EUR)');
            }   
        }, {
            dataIndex: 'cost',
            width: 75,
            text: 'Line Total',

             field: {
                    xtype: 'numberfield',
                    allowBlank: false
                },
            summaryType: function(records){
                    var i = 0,
                        length = records.length,
                        total = 0,
                        record;

                    for (; i < length; ++i) {
                        record = records[i];
                        total = total + Number(record.get('cost'));
                    }
                    return total;
                }
        }],
        dockedItems: [
               {
             xtype: 'toolbar',
                items: [{
                    text: 'Add',
                    iconCls: 'icon-add',
                    handler: function(){
                        // empty record
                        store.insert(0, new NewEstimate());
                        rowEditing.startEdit(0, 0);
                    }
                } , '-', 
                {
                    text: 'Delete',
                    iconCls: 'icon-delete',
                    handler: function(){

                        var selection = gridPanel.getView().getSelectionModel().getSelection()[0];

                        if (selection) {
                            store.remove(selection);
                        }
                    }
                }]
            }]
    });
    }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T16:38:06.010

我也有类似的需求。如果有足够的时间，我可能会扩展摘要功能以支持多个聚合。但是，我没有时间，所以我做了一种肮脏的工作。

我没有尝试获取两行，而是将 summaryType 用作函数，并将值作为带有 BR 标记的字符串返回。这绝对是笨重的，但它可以满足我的需要。

就像是：

```
columns: [
   {
      header:'Quantity',
      dataIndex: 'Quantity',
      summaryType"="function( records ) {
         sum = 0;
         for( rec in records ) {
            var record = records[ rec ];
            sum += record.data[ '#guide#_Quantity' ];
         }
         avg= Math.floor( sum/records.length );
         return '<strong>'+ sum + ' Books<br />' + avg + ' Books</strong>';
      }
   }
] 
```

# asp.net - Web.api 应用程序中是否存在 WinJS 未定义错误

> ID：12930986
> 
> 赞同：0
> 
> 时间：2012-10-17T09:18:18.943
> 
> 标签：asp.net, asp.net-web-api, winjs

我是 Microsoft asp.net web.api 应用程序的新用户。我正在尝试一个我定义了 EmployeeController.cs 的虚拟项目，其中有一种在数据库中插入员工的方法。

```
 // POST api/<controller>
public void Post(EmployeeInfo empObj)
{
    objEmployeeDal.InsertEmployee(empObj);
} 
```

在 Employee.js 文件中，我尝试使用 post 方法访问 web.api 以插入数据。

```
 $('#btnAddEmployee').bind('click', function () {
    try {

        //Declare Object
        var Emp = {};
        Emp.firstName = $("#txtFirstName").val();
        Emp.MiddleName = $("#txtMiddleName").val();
        Emp.lastName = $("#txtLastName").val();
        Emp.gender = $('select#selectGender option:selected').val();
        Emp.roleID = "1";
        Emp.active = "1";
        //Get Url
        var createurl = "http://localhost:1045/api/Employee/";

        //POST data
        WinJS.xhr({
            type: "POST",
            url: createurl,
            headers: { "Content-type": "application/json; charset=utf-8" },
            data: JSON.stringify(Emp)
        }).then(success, error);

    }
    catch (e) {
        alert(e);
    }

}); 
```

并在员工 HTML 页面中包含 WinJS 文件。

```
<script src="//Microsoft.WinJS.1.0.RC/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0.RC/js/ui.js"></script>
<script src="Scripts/EmployeeDetails.js"></script> 
```

但在萤火虫中显示问题“未定义 WinJS”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:16:25.377

您用于引入 winjs 的脚本标签仅适用于 win8 应用程序，而不适用于网页。根据您提到的萤火虫，我假设您正在尝试在普通的网络应用程序中使用它。您需要将 winjs 文件放在您的 Web 服务器上并像访问任何其他脚本文件一样访问它们。

但请注意：winjs 尚未针对跨浏览器场景进行设计或测试，请检查该库的许可证。至少某些版本只允许在 win8 应用程序中使用。我不确定最终版本中是否仍然如此，但如果是这样，我不会感到惊讶。

# android - webview.loadUrl("about:blank") 问题

> ID：12930987
> 
> 赞同：12
> 
> 时间：2012-10-17T09:18:23.607
> 
> 标签：android, webview

在我的应用程序中，我有一个 webview，最初我会在其中加载任何网站，比如 www.google.com。
稍后单击按钮，我想清除此 webview，为此我做了

```
webview.loadUrl("about:blank"); 
```

但这样做并没有清除我的 webview，它继续显示 google.com

我试图将 webview 重新初始化为

```
webview = new WebView(this);
webview.loadUrl("about:blank"); 
```

我也试过

```
webview.clearHistory();
webview.loadUrl("about:blank"); 
```

但我得到了相同的结果，webview 显示 google.com
如何清除 webview？
请建议。
谢谢你。

**编辑：**
另一方面，如果我这样做，在加载 google.com 之前

```
webview.loadUrl("about:blank"); 
```

它加载一个空白网页。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T09:28:17.483

`webView.clearView();`在加载新 URL 之前使用。

还可以使用您可以执行以下操作来清除 web 视图，具体取决于您想要执行的操作：

```
webView.clearCache(true);

webView.clearHistory();

webView.destroy(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-20T14:11:41.407

只是为了更新，方法 clearView() 在 API 级别 18 中已弃用。

使用 WebView.loadUrl("about:blank") 可靠地重置视图状态并释放页面资源（包括任何正在运行的 JavaScript）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:20:56.970

尝试以下操作：`webView.loadData("");`

# c# - 如何在 Twitter API C# 中找到推文最喜欢的计数

> ID：12930989
> 
> 赞同：0
> 
> 时间：2012-10-17T09:18:23.697
> 
> 标签：c#, asp.net, twitter

我正在使用 Twitter API 构建一个 Web 应用程序，并且想知道是否有任何方法可以获取最喜欢的推文计数。我搜索了很多，但没有运气。一定是有原因的，因为我在很多应用程序中都看到了这个功能。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:33:58.203

新 API V1.1 现在支持推文收藏的计数。这里试试

```
stdClass Object
        (
            [created_at] => Thu Apr 04 20:09:16 +0000 2013
            [id] => 319904523520983041
            [id_str] => 319904523520983041
            [text] => North Koreas perspective of the world in the next 5 years http://t.co/MxRgD00VCY
            [source] => web
            [truncated] => 
            [in_reply_to_status_id] => 
            [in_reply_to_status_id_str] => 
            [in_reply_to_user_id] => 
            [in_reply_to_user_id_str] => 
            [in_reply_to_screen_name] => 
            [geo] => 
            [coordinates] => 
            [place] => 
            [contributors] => 
            [retweet_count] => 7
            [favorite_count] => 7
            [entities] => stdClass Object
                (
                    [hashtags] => Array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:50:03.250

有一个[非官方的 API](http://blog.fgribreau.com/2012/01/twitter-unofficial-api-getting-tweets.html)可用于获取推文摘要。

**要从 API 获取推文摘要：**

```
https://api.twitter.com/i/statuses/[tweet.id]/activity/summary.json 
```

**这是（样本）结果：**

```
{
   "favoriters":[113682166],
   "favoriters_count":"1",
   "repliers":[],
   "repliers_count":"0",
   "retweeters_count":"1",
   "retweeters":[113682166]
} 
```

# regex - NP ++中的正则表达式用不同的查询替换多个查询

> ID：12930994
> 
> 赞同：0
> 
> 时间：2012-10-17T09:18:36.923
> 
> 标签：regex, notepad++, replace

我使用 Notepad++ 使用正则表达式进行搜索和替换，并且我需要用其他内容替换多行。我可以用**一个命令**来做到这一点吗？

例子：

```
"../../../commons/js/site-name.com__file-name.js"
"../dlds/file.css" 
```

或者

```
anytext "../../../commons/js/site-name.com__file-name.js" text
something "../dlds/file.css" anytext 
```

或者

```
<script src="../../../Folder/js/site-name.com__file-name.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="/folder/file.css" /> 
```

输出应该是

```
"/resources/common.js"
"/resources/common.css" 
```

鉴于：

*   up dir ../ 正在改变（有些是一个 ../ 一些更多 ../../../ 等等，所以我需要它来为任意数量的 ../ 这样做），或者它可能完全丢失比如：“/dlds/file.css”。
*   示例中的这两行并不完全紧随其后，也不是在文本的开头，而是在文本的任何位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:29:47.107

搜索`^.+/(filename.js|style.css)"$`

用。。。来代替`"/resources/$1"`

如果您想获取任何文件名，而不仅仅是 filename.js 或 style.css，请使用此

```
^.+\/(.+)(?!\/)"$ 
```

并使用相同的替换。

例如：[http ://rubular.com/r/h1IsZK8nry](http://rubular.com/r/h1IsZK8nry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:26:42.947

寻找：

```
\.\..+/([^\.]+\.\w+) 
```

代替：

```
/resources/\1 
```

**更新：**

如果你只想替换 filename.js 或 style.css 找到：

```
[\./]{1}.+/(filename.js|style.css) 
```

用。。。来代替

```
/resources/\1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:53:11.163

怎么样：

搜索：`"(?:\.\./)+.*/([^.]+\.\w+)"`
替换为：`"/ressources/$1"`

如果你想替换`new.js`或`new.css`做：

搜索：`"(?:\.\./)+.*/[^.]+(\.\w+)"`
替换为：`"/ressources/new$1"`

对于匹配也以开头的网址`/`：

搜索：`"(?:(?:\.\./)+.*?)?/([^.]+\.\w+)"`
替换为：`"/ressources/new$1"`

# android - 如何在android中找出当前正在运行的应用程序的内存使用情况？

> ID：12930995
> 
> 赞同：4
> 
> 时间：2012-10-17T09:18:37.677
> 
> 标签：android, memory

我正在研究应用程序的内存使用情况。我的设备中运行着许多应用程序。我可以使用 getMemoryInfo() 获取可用内存。

我的问题是，我想要每个应用程序的内存消耗/使用。

ex 我有四个应用程序正在运行，
1）abc
2）def
3）ghi
4）klm

现在我想要每个运行在上面的应用程序的内存使用/消耗。

请帮我找出个别应用程序的内存消耗及其分配。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:23:29.000

[这](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)是一篇关于内存分析工具的好文章，可以帮助您分析应用程序的内存使用情况。

# .htaccess - .htaccess 导致 404 错误

> ID：12930997
> 
> 赞同：0
> 
> 时间：2012-10-17T09:18:44.687
> 
> 标签：.htaccess

早上堆垛机，

我最近继承了一个网站，我将整个网站移到了新服务器上，并调整了数据库和配置 URL 以指向新位置。

我认为它是 .htaccess，因为当我使用它时，索引页面可以工作，但其他页面都没有，这是当前的 .htacess 脚本（如下），这是网站 Temp URL LINK-->http:// 83.170.113.94/~gagajool/ 任何关于如何解决这个问题的建议都会很高兴听到。

谢谢

```
 RewriteEngine on
    Options FollowSymLinks

    RewriteCond %{REQUEST_URI} ^$
    RewriteRule ^(.+)$ / [R=301,L]

    RewriteCond %{REQUEST_URI} !^/static
    RewriteCond %{REQUEST_URI} !^/index.php
    RewriteCond %{REQUEST_URI} !^/favicon.ico

    RewriteRule ^(.+[^/])$ /$1/ [R=301,L]

    RewriteCond %{REQUEST_URI} !^/static
    RewriteCond %{REQUEST_URI} !^/index.php
    RewriteCond %{REQUEST_URI} !^/favicon.ico

    RewriteRule ^(.+)$ /index.php?request=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:46:40.130

如果站点暂时位于目录中，则 htaccess 将无法在不考虑 URI 基础的情况下工作。

例如：

```
RewriteRule ^(.+[^/])$ /$1/ [R=301,L] 
```

如果 htaccess 文件位于 中`/~gagajool/`，则访问`http://83.170.113.94/~gagajool/something`（注意缺少尾部斜杠）将导致上述规则匹配，除了目标是`/$1/`，因此浏览器被重定向到`http://83.170.113.94/something/`（不再有 ~gagajool）。

最后一条规则也是如此（这可能就是你得到 404 的原因）。将正确的 URI 基础添加到您的目标，例如：

```
RewriteRule ^(.+[^/])$ /~gagajool/$1/ [R=301,L] 
```

或添加：

```
RewriteBase /~gagajool/ 
```

并从重写规则中删除前导斜杠：

```
RewriteRule ^(.+[^/])$ $1/ [R=301,L] 
```