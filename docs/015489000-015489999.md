# StackOverflow 问答 15489000-15489999

# c# - 从自定义结构/类型中公开常见值

> ID：15489000
> 
> 赞同：4
> 
> 时间：2013-03-18T23:41:23.097
> 
> 标签：c#, constants, object-model

我的一个项目有一个值类型/结构，它表示视频格式的自定义标识符字符串。在这种情况下，它将包含一个内容类型字符串，但这可能会有所不同。

我使用了一个结构，因此它在传递时可以是强类型，并对初始字符串值执行一些完整性检查。

```
public struct VideoFormat {
    private string contentType;

    public VideoFormat(string contentType) {
        this.contentType = contentType;
    }

    public string ContentType {
        get { return this.contentType; }
    }

    public override string ToString() {
        return this.contentType;
    }

    // various static methods for implicit conversion to/from strings, and comparisons
} 
```

由于有一些非常常见的格式，我将它们公开为具有默认值的静态只读字段。

```
public static readonly VideoFormat Unknown = new VideoFormat(string.Empty);
public static readonly VideoFormat JPEG = new VideoFormat("image/jpeg");
public static readonly VideoFormat H264 = new VideoFormat("video/h264"); 
```

将公共值公开为静态只读字段还是仅获取属性更好？如果我以后想更改它们怎么办？我看到在整个 .Net 框架中都使用了这两种方法，例如`System.Drawing.Color`使用静态只读属性，而`System.String`对 有一个静态只读字段`String.Empty`，`System.Int32`对`MinValue`.

[（主要是从这个问题](https://stackoverflow.com/q/15488575/588306)复制而来，但有一个更具体且不直接相关的问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:50:46.173

属性是一个好主意，除非你声明的东西**永远不会**改变。

使用属性，您可以更改内部实现，而不会影响使用您的库和处理更改/变化的程序。消费程序不会中断，也不需要重新编译。

例如（我知道这是一个不好的例子，但你明白了..）

```
public static VideoFormat H264Format
{
   get{
         // This if statement can be added in the future without breaking other programs.
         if(SupportsNewerFormat)
             return VideoFormat.H265;

         return VideoFormat.H264;
    }
} 
```

另请记住，如果您决定将来将字段更改为属性，则会消耗代码中断。

# spdy - 了解 SPDY 延迟声明

> ID：15489002
> 
> 赞同：2
> 
> 时间：2013-03-18T23:41:26.390
> 
> 标签：spdy

阅读[http://dev.chromium.org/spdy/spdy-whitepaper](http://dev.chromium.org/spdy/spdy-whitepaper)上的 SPDY 白皮书，似乎支持它会改善我的 HTTP 延迟。但是，我不清楚其中的一些说法。

1）“因为 HTTP 一次只能获取一个资源（HTTP 流水线有帮助，但仍然只强制执行 FIFO 队列），500 毫秒的服务器延迟会阻止 TCP 通道重复用于其他请求。” -- 这个500ms的数字是从哪里来的？

2) “我们发现，SPDY 的延迟节省随着丢包率的增加而成比例地增加，在 2% 时加速高达 48%。” - 但是，将所有请求放在单个 TCP 连接上是否意味着拥塞控制会减慢您的所有请求，而您是否有多个连接，1 个 TCP 流会减慢速度，而其他 TCP 流不会？

3) “[使用流水线] 处理流中任何内容的任何延迟（无论是前端的长请求还是丢包）都会延迟整个流。” -- 这意味着丢包不会延迟使用 SPDY 的整个流。为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:43:14.187

500ms的引用只是一个例子，数字可以是50ms也可以是5s，但重点还是一样的：HTTP强制FIFO处理，导致底层TCP连接使用效率低下。正如论文所指出的，流水线在理论上可以提供帮助，但实际上管道并没有被使用，因为许多中介在你打开它时会中断。因此，您会遇到最坏的情况：完整的 RTT + 服务器处理时间和 FIFO 排序。

再者，丢包。是的，你完全正确。使用单个连接的缺点之一是，在丢包的情况下，整个连接的吞吐量减少了一半，而不是运行中的 N 个连接之一的 1/2。话虽如此，但也有一些好处！例如，当您使单个连接饱和时，由于三重 ACK + 可能更宽的拥塞窗口，您将获得更快的恢复。由于大多数 HTTP 传输相对较小（数十 KB），它不是许多连接在退出慢启动阶段之前就终止了！

重新，流水线。丢失的数据包会延迟流 - 那是 TCP。胜利在于消除了线头阻塞，这使得浏览器能够进行更多更智能的优化，其次是我上面描述的一些胜利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-01T14:16:14.733

@GroovyDotCom：这是 HTTP2 (SPDY) 性能优势的一些实践证明：

[http://www.httpvshttps.com/](http://www.httpvshttps.com/)

# c# - mysql连接c#中的异常

> ID：15489003
> 
> 赞同：1
> 
> 时间：2013-03-18T23:41:36.577
> 
> 标签：c#, mysql, .net

我在 connection.Open() 到远程 Mysql 库时遇到了奇怪的异常。此代码工作正常，但有时会弹出此错误

这是一个代码：

```
private static string
            DatabaseServer = "",
            DatabasePort = "",
            DatabaseName = "",
            DatabaseUserID = "",
            DatabasePassword = "";

    public static string ConnectionString = String.Format("SERVER={0};PORT={1};DATABASE={2};UID={3};PASSWORD={4}",

                DatabaseServer, DatabasePort, DatabaseName, DatabaseUserID, DatabasePassword);

                using (MySqlConnection connection = new MySqlConnection(ConnectionString))
                {
                    try
                    {
                        if (connection != null)
                        {
                            connection.Open();

                            string query = @"....";

                            MySqlCommand cmd = new MySqlCommand(query, connection);
                            cmd.CommandType = CommandType.Text;

                            using (MySqlDataReader dataReader = cmd.ExecuteReader())
                            {
                                while (dataReader.Read())
                                {

                                }
                            }        
                        }
                    }
                    catch
                    {}
                } 
```

问题是在**connection.Open();** 即使它在 try{}catch{} 中，它也会终止应用程序。

异常日志：

```
System.Reflection.TargetInvocationException: An exception occurred during the operation, making the result invalid. Check InnerException for exception details. InnerException. ---> MySql.Data.MySqlClient.MySqlException: Unable to connect to any of the specified MySQL hosts. ---> System.Exception: Call to GetHostEntry failed after 00:00:00 while querying for hostname '': SocketErrorCode=TryAgain, ErrorCode=11002, NativeErrorCode=11002\. ---> System.Net.Sockets.SocketException: This is usually a temporary error during hostname resolution and means that the local server did not receive a response from an authoritative server.

   в System.Net.Dns.GetAddrInfo(String name)
   в System.Net.Dns.InternalGetHostByName(String hostName, Boolean includeIPv6)
   в System.Net.Dns.GetHostEntry(String hostNameOrAddress)
   в MySql.Data.Common.StreamCreator.GetDnsHostEntry(String hostname)
   ---  ---
   в MySql.Data.Common.StreamCreator.GetDnsHostEntry(String hostname)
   в MySql.Data.Common.StreamCreator.GetHostEntry(String hostname)
   в MySql.Data.Common.StreamCreator.GetStreamFromHost(String pipeName, String hostName, UInt32 timeout)
   в MySql.Data.Common.StreamCreator.GetStream(UInt32 timeout)
   в MySql.Data.MySqlClient.NativeDriver.Open()
   ---  ---
   в MySql.Data.MySqlClient.NativeDriver.Open()
   в MySql.Data.MySqlClient.Driver.Open()
   в MySql.Data.MySqlClient.Driver.Create(MySqlConnectionStringBuilder settings)
   в MySql.Data.MySqlClient.MySqlPool.GetPooledConnection()
   в MySql.Data.MySqlClient.MySqlPool.TryToGetDriver()
   в MySql.Data.MySqlClient.MySqlPool.GetConnection()
   в MySql.Data.MySqlClient.MySqlConnection.Open()
   в System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
   в System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument)
   ---  ---
   в System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
   в System.ComponentModel.RunWorkerCompletedEventArgs.get_Result()
   в Server.Engines.DonateSQL.bw_RunWorkerCompleted(Object sender, RunWorkerCompletedEventArgs e) в System.ComponentModel.BackgroundWorker.OnRunWorkerCompleted(RunWorkerCompletedEventArgs e)
   в System.ComponentModel.BackgroundWorker.AsyncOperationCompleted(Object arg)
   в System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
   в System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   в System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   в System.Threading.ThreadPoolWorkQueue.Dispatch()
   в System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 
```

我不知道该怎么办。尝试了一切，但由于正在发生的事情而找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:56:02.540

System.Exception：在 00:00:00 后查询主机名“”时调用 GetHostEntry 失败

看看你的调用代码，看看 Databaseserver 是一个空字符串是否有某种原因。如果这没有发生，请唤醒您的网络男孩，因为您的 DNS 似乎出现了问题。不知道你的设置是什么，但如果你能负担得起用 IP 替换名称并且它停止发生，那么你可以用脏手指指着它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:52:19.277

是否存在网络和/或 DNS 问题：

> System.Reflection.TargetInvocationException：操作过程中发生异常，导致结果无效。检查 InnerException 以获取异常详细信息。内部异常。---> MySql.Data.MySqlClient.MySqlException：***无法连接到任何指定的 MySQL 主机。***---> System.Exception：在 00:00:00 后查询主机名“”时调用 GetHostEntry 失败：SocketErrorCode=TryAgain，ErrorCode=11002，NativeErrorCode=11002。---> System.Net.Sockets.SocketException：***这通常是主机名解析期间的临时错误，意味着本地服务器没有收到来自权威服务器的响应。***

# python - 在 python 2.6 中发送具有 utf-8 字符串的电子邮件的问题

> ID：15489007
> 
> 赞同：0
> 
> 时间：2013-03-18T23:41:57.613
> 
> 标签：python

请在下面找到相关的代码片段：

```
def send_mail_cloned():
    COMMASPACE = ', '
    sender='xxx@xyz.com'
    send_open_mail_to='xxx@xyz.com'
    # Create the container (outer) email message.
    msg = MIMEMultipart()
    msg.set_charset("utf-8")
    msg['Subject'] = 'Test'
    msg['From'] = sender
    msg['To'] = COMMASPACE.join(send_open_mail_to)

    text="""
    <html>
    <head>
       <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
       <title>html title</title>
       <style type="text/css" media="screen">
           table{
                 background-color: #AAD373;
                 empty-cells:hide;
           }
           td.cell{
                 background-color: white;
           }
       </style>
     </head>
     <body>"""

    text+="""<p><BR>Hi, <BR>Please find below table for Cloned JIRA's:<BR></p>
         <table style="border: blue 1px solid;">

             <tr><td class="cell">JIRA Link</td><td class="cell">PRISM URL</td><td class="cell">CR Title</td></tr>"""
for key,value in jira_cr_cloned_dict.items():
             CR_title=value[1].decode('utf-8')
             text+="""<tr><td class="cell">%s</td><td class="cell">%s</td><td class="cell">%s</td></tr>""" %(key,value[0],CR_title)
text+=”””&lt;/table></body>
     </html>”””
    HTML_BODY = MIMEText(text, 'html','utf-8')
    Encoders.encode_7or8bit(HTML_BODY)
    msg.attach(HTML_BODY)
    # Send the email via our own SMTP server.
    s = smtplib.SMTP('localhost')
    s.sendmail(sender, send_open_mail_to, msg.as_string())
    s.quit() 
```

填充 jira_cr_cloned_dict 的代码段：-

```
CR_title=CR_detail['Title'].encode('utf-8')
print ('CR title in PRISM: %s\n'%CR_title)
CR_list=[prism_url[1:-1],CR_title]
jira_cr_cloned_dict[jira_link]=CR_list 
```

运行函数 send_mail_cloned() 后，我收到错误，例如

```
File "/usr/lib/python2.6/email/mime/text.py", line 30, in __init__
    self.set_payload(_text, _charset)
  File "/usr/lib/python2.6/email/message.py", line 224, in set_payload
    self.set_charset(charset)
  File "/usr/lib/python2.6/email/message.py", line 266, in set_charset
    self._payload = charset.body_encode(self._payload)
  File "/usr/lib/python2.6/email/charset.py", line 387, in body_encode
    return email.base64mime.body_encode(s)
  File "/usr/lib/python2.6/email/base64mime.py", line 147, in encode
    enc = b2a_base64(s[i:i + max_unencoded])

UnicodeEncodeError: 'ascii' codec can't encode character u'\u2019' in position 54: ordinal not in range(128) 
```

我试图不对字符串进行编码/解码。但是，在这种情况下，打印 %s 会自行失败。

有人可以在发送电子邮件时帮我找出这里的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:13:19.023

我的猜测是您的基本问题在以下行：

```
CR_title=value[1].decode('utf-8') 
```

您正在将您的值显式解码为 Unicode 字符串。通过将它与字节字符串连接，您可以将整个字符串隐式创建`text`为 Unicode 字符串，我不确定，但我猜这`MIMEText`不是为了处理 Unicode 字符串而编写的，而只是为了处理字节字符串，然后，当它尝试要构造消息，它会触发隐式编码为默认使用 ASCII 的字节。

在将整个文本传递给之前尝试将整个文本显式编码为 UTF-8 `MIMEText`：

```
HTML_BODY = MIMEText(text.encode("utf-8"), 'html','utf-8') 
```

# ios - NSMutableArray UIButton 按下历史

> ID：15489008
> 
> 赞同：0
> 
> 时间：2013-03-18T23:42:04.500
> 
> 标签：ios, arrays, sdk, uibutton, history

我目前正在生成一系列按钮，效果很好。除此之外，每个按钮内部的触摸都会调用一个`-(void)onTouch`函数，在该函数中进行一些数学运算以确定一个动作。这一切都很好，除了我想存储按下按钮的历史记录。我尝试了许多不同的方法来创建`NSMutableArray`和存储按下按钮的值，但是因为我只能在`-onTouch`动作，每次按下按钮时，数组都会重置，因此它永远不会记住超过一个动作。如果我尝试在我的标头中声明数组并在外部合成它，我要么得到 nsmutable 数组不是编译时事物的错误，要么它不存储任何东西（日志输出为“（null）”。有人可以粘贴一些吗？关于如何声明一个可以在 uibutton 按下事件发生的地方存储和附加 uibutton 标签的数组的代码？如果不清楚，我将在今晚晚些时候发布代码。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:44:55.650

您不仅需要*声明*数组，还需要对其进行*初始化*。如果你不初始化，你不一定会收到警告，但你会得到很多 nil 数据。

您只想初始化一次数组（正如您所注意到的），所以这`viewDidLoad`是一个很好的地方。另一个好地方是在自定义访问器中......

```
- (NSMutableArray*)historyArray
{
    if (!_historyArray) {
       _historyArray = [[NSMutableArray alloc] init];
    }
    return _historyArray;
} 
```

现在，当您第一次尝试时`[self.historyArray addObject:sender]`，访问器会注意到没有 historyArray，创建一个并返回它。下一轮它不会被重新创建，因为它已经退出了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:46:03.180

```
@property(nonatomic,retain)NSMutableArray *tapCollection;

-(void)viewDidLoad{

   self.tapCollection = [[NSMutableArray alloc] init];
}

-(void)onTouch:(id)sender{

   UIButton *btnTapped = (UIButton *)sender;

   [self.tapCollection addObject:[NSNumber numberWithInt:btn.tag]];
} 
```

# sql-server - 如何将会员资格和我的数据保存在同一个数据库中？

> ID：15489010
> 
> 赞同：0
> 
> 时间：2013-03-18T23:42:15.730
> 
> 标签：sql-server, asp.net-mvc, asp.net-membership

我想将我所有的会员资格和数据存储在同一个数据库中。我首先创建了一个名为**MembershipDB**的数据库，在其中使用[aspnet_regsql.exe](http://weblogs.asp.net/sreejukg/archive/2011/06/16/usage-of-aspnet-regsql-exe-in-asp-net-4.aspx)添加了成员​​资格模式。

我正在使用 Internet ASP.NET MVC4 模板。所以这是连接字符串

```
 <connectionStrings>
  <remove name="DefaultConnection"/>
  <add name="DefaultConnection" 
     connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=MembershipDB.mdf;
     Integrated Security=True;" 
      providerName="System.Data.SqlClient" />
 </connectionStrings> 
```

创建用户时，我在之前创建的**MembershipDB**数据库中看不到任何数据。相反，我看到另一个名为**MembershipDB.mdf**的数据库已创建并包含数据。

为什么我的数据库没有获取数据，而是正在创建另一个同名的数据库？只有在找不到同名的数据库时，代码优先才应该创建一个新数据库。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:31:50.087

1.  只需使用连接字符串中的数据库名称，不带 .mdf 扩展名。

2.  在 web.config 的 Membership 部分设置 connectionStringName="MembershipDB"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:15:22.973

**您的连接字符串指定MembershipDBA.mdf**的初始目录（数据库）。将其更改为**MembershipDB**。.mdf 部分只是数据库数据部分的标准文件扩展名。除非您专门更改与文件有关的内容，否则无需引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:49:50.080

我认为最好的方法（我一直使用它）是查看并观察其他人在这些情况下所做的事情并在他们之后重复。

这是一篇关于如何一起使用 EF 和会员资格的文章（虽然是 EF 4.1，而不是 5）（如果我正确理解了您的问题，这就是您所追求的：

[一起使用实体框架代码优先和 ASP.NET 成员资格](http://imar.spaanjaars.com/563/using-entity-framework-code-first-and-aspnet-membership-together)

这是关于 SO（同一主题）的成功回答的问题（想知道在问你之前你怎么没有找到这个问题）：

[将复杂数据连接到 ASP.Net 成员表的最佳数据库设计方法](https://stackoverflow.com/questions/2341463/best-database-design-approach-to-join-complex-data-to-asp-net-membership-tables?rq=1)

请让我知道这是否有帮助。

# python - Python - 时间序列对齐和“迄今为止”功能

> ID：15489011
> 
> 赞同：5
> 
> 时间：2013-03-18T23:42:15.987
> 
> 标签：python, date, alignment, pandas, time-series

我有一个包含以下前三列的数据集。包括购物篮 ID（唯一标识符）、销售金额（美元）和交易日期。我想为数据集的每一行计算以下列，我想在 Python 中计算它。

**同一篮子的先前销售**（如果有）；当前购物篮的**销售计数；****当前篮子的平均日期**（如果有）；**当前购物篮的最大截止日期**（如果有）

```
Basket  Sale   Date       PrevSale SaleCount MeanToDate MaxToDate
88      $15 3/01/2012                1      
88      $30 11/02/2012      $15      2         $23        $30
88      $16 16/08/2012      $30      3         $20        $30
123     $90 18/06/2012               1      
477     $77 19/08/2012               1      
477     $57 11/12/2012      $77      2         $67        $77
566     $90 6/07/2012                1 
```

我对 Python 很陌生，我真的很难找到任何东西来以一种奇特的方式来做这件事。我已经按 BasketID 和 Date 对数据（如上）进行了排序，因此我可以通过为每个篮子向前移动一个来批量获得先前的销售。除了循环之外，不知道如何以有效的方式获取 MeanToDate 和 MaxToDate ......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:54:21.197

这应该可以解决问题：

```
from pandas import concat
from pandas.stats.moments import expanding_mean, expanding_count

def handler(grouped):
    se = grouped.set_index('Date')['Sale'].sort_index()
    # se is the (ordered) time series of sales restricted to a single basket
    # we can now create a dataframe by combining different metrics
    # pandas has a function for each of the ones you are interested in!
    return  concat(
        {
            'MeanToDate': expanding_mean(se), # cumulative mean
            'MaxToDate': se.cummax(),         # cumulative max
            'SaleCount': expanding_count(se), # cumulative count
            'Sale': se,                       # simple copy
            'PrevSale': se.shift(1)           # previous sale
        },
        axis=1
     )

# we then apply this handler to all the groups and pandas combines them
# back into a single dataframe indexed by (Basket, Date)
# we simply need to reset the index to get the shape you mention in your question
new_df = df.groupby('Basket').apply(handler).reset_index() 
```

[您可以在此处](http://pandas.pydata.org/pandas-docs/dev/groupby.html)阅读有关分组/聚合的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-13T10:23:12.950

```
 ```
import pandas as pd
pd.__version__  # u'0.24.2'

from pandas import concat

def handler(grouped):
    se = grouped.set_index('Date')['Sale'].sort_index()
    return  concat(
        {
            'MeanToDate': se.expanding().mean(),   # cumulative mean
            'MaxToDate': se.expanding().max(),  # cumulative max
            'SaleCount': se.expanding().count(),   # cumulative count
            'Sale': se,                # simple copy
            'PrevSale': se.shift(1)   # previous sale
        },
        axis=1
     )

###########################
from datetime import datetime  
df = pd.DataFrame({'Basket':[88,88,88,123,477,477,566],
                  'Sale':[15,30,16,90,77,57,90],
                  'Date':[datetime.strptime(ds,'%d/%m/%Y') 
                          for ds in ['3/01/2012','11/02/2012','16/08/2012','18/06/2012',
                                    '19/08/2012','11/12/2012','6/07/2012']]})
#########

new_df = df.groupby('Basket').apply(handler).reset_index() 
``` 
```

# html - 图像上的 IE8 透明 div

> ID：15489015
> 
> 赞同：1
> 
> 时间：2013-03-18T23:42:43.503
> 
> 标签：html, css, internet-explorer, internet-explorer-8

为此，我在 IE8 上有一个奇怪的行为

HTML：

```
<a class='main'>
  <img src='http://annawrites.com/blog/wp-content/uploads/2011/04/color-explosion.jpg' />
  <div class='layer'>&nbsp;&nbsp;&nbsp;</div>
</a> 
```

CSS：

```
.main { display: block; position: relative; width: 100px; height: 100px; }
.main img { width: 100px; height: 100px; /*display: none;*/ }
.layer { position: absolute; top: 0px; left: 0px; width: 100%; height: 50%; cursor: crosshair; } 
```

JSFiddle： http: [//jsfiddle.net/HLua8/2/](http://jsfiddle.net/HLua8/2/)（或[在](http://fiddle.jshell.net/HLua8/2/show/)IE8中打开）

在 IE8 上，`.layer`（即十字光标）仅位于左上角（它将自身最小化为内容，即 3 x `&nbsp;`）

我注意到当我设置为时它工作正常`.main img`，`display:none`但我需要图像

有人可以帮我`.layer`在 IE8 上显示它应有的大小吗？（即 100% 宽 50% 高，就像在其他浏览器上一样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:26:08.537

经过多次摆弄，我能为您想出的最佳解决方案是创建一个空白/透明图像并将其用作图层的背景图像。

添加到您的CSS：

```
.layer {background-image:url(blank.png);}    
.layer:hover{cursor: crosshair;} 
```

您的文档的更新版本如下所示：

CSS：

```
#container {
    margin:40px;
    position: relative;
    width: 100px;
    height: 100px;
}

.main img {
    max-width: 100%;
}
.layer {
    position: absolute;
    top: 0px;left: 0px;
    width: 100%;height: 50%;
    background-image:url(img/blank.png);
}

.layer:hover{cursor:crosshair;} 
```

html:

```
<div id="container">
   <a class='main' href="test.html"><img src='http://annawrites.com/blog/wp-content/uploads/2011/04/color-explosion.jpg' /></a>
   <div class='layer'></div>
</div> 
```

# python - python中矩阵乘法的多线程

> ID：15489020
> 
> 赞同：0
> 
> 时间：2013-03-18T23:43:05.140
> 
> 标签：python, multithreading

我想创建 n 个线程，并且每个线程计算结果矩阵的一整行。我试过下面的代码，

```
import numpy
import random
import threading

class MatrixMult(threading.Thread):
    """A thread which computes the i,j entry of A * B"""
    def __init__(self, A, B, i):
        super(MatrixMult, self).__init__()
        self.A = A
        self.B = B
        self.i = i
        #self.j = j                                                             
    def run(self):
        print "Computing %i, %i" % (self.i, self.i)
        x = 0
        result=[]
        for k in range(self.A.shape[0])
            x += self.A[self.i,k] * self.B[k,self.i  
        self.result=x
        print "Completed %i, %i" % (self.i, self.j)

def mult(n):
    """A function to randomly create two n x n matrices and multiply them"""
    # Create two random matrices                                                
    A = numpy.zeros((n,n))
    B = numpy.zeros((n,n))
    for i in range(n):
        for j in range(n):
            A[i,j] = random.randrange(0, 100)
            B[i,j] = random.randrange(0, 100)
    # Create and start the threads                                              
    threads = []
    for i in range(n):
       # for j in range(n):                                                     
        t = MatrixMult(A, B, i)
            threads.append(t)
            t.start()
    for t in threads: t.join()
    C = numpy.zeros((n,n))
    for t in threads:
        C[t.i] = t.result
    return C
print multi(30) 
```

但是它会打印出许多奇怪的矩阵：

```
[ 66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695.
   66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695.
   66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695\.  66695.
   66695\.  66695\.  66695.]
 [ 88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468.
   88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468.
   88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468\.  88468.
   88468\.  88468\.  88468.]] 
```

有人在我的代码中看到问题吗？我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:53:58.667

您的代码集

```
C[t.i] = t.result 
```

它将整行设置`C`为 value `t.result`，这是一个标量。我在那里看到了一些评论的东西`j`；你大概想解决这个问题，并修复

```
x += self.A[self.i,k] * self.B[k,self.i 
```

使用`j`（也不是语法错误）。按原样，您似乎正在计算`C[i, i]`然后将该值分配给整行。

另外：你知道这段代码肯定会比 慢很多很多`np.dot`，对吧？在 python 中进行紧密循环之间，尽管[GIL](http://wiki.python.org/moin/GlobalInterpreterLock)跨线程分配计算工作，而且首先也是[一种低效的矩阵乘法算法](http://en.wikipedia.org/wiki/Matrix_multiplication#Algorithms_for_efficient_matrix_multiplication)。如果您的目标实际上是使用多核加速矩阵乘法，请将您的 numpy 链接到 MKL、OpenBLAS 或 ACML，使用`np.dot`，然后收工。

# css - 使用 CSS3 媒体查询在 Samrty 中包含文件

> ID：15489021
> 
> 赞同：0
> 
> 时间：2013-03-18T23:43:09.850
> 
> 标签：css, responsive-design, smarty

我想根据 CSS3 Media 查询结果在 smarty tpl 文件中包含一个文件。如果屏幕分辨率 <=640 我将使用移动标题否则 header.tpl

我想出的一种选择是同时包含两个头文件，并一次阻止/显示一个。但它弄乱了我的页面布局。

有没有一种方法可以使用 if 语句设置变量或某些条件以仅包含一个头文件？

```
 <span class="display-none-mobile">
         {include file="includes/header.tpl"}
    </span>
    <span class="display-none-desktop">
         {include file="includes/header-mobile.tpl"}
    </span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:45:07.007

你不会知道服务器端的屏幕分辨率是 Smarty 工作的地方，所以你不能用 smarty 来做。您选择的替代方案会起作用。也就是说，我很难相信您需要两组完全不同的标记。理想情况下，您会将不同的基于媒体的样式应用于一组标记；其余的布局也是如此。

# java - 更有效的方法？

> ID：15489023
> 
> 赞同：0
> 
> 时间：2013-03-18T23:43:23.497
> 
> 标签：java, sum, factors

我想知道是否有更有效的方法来运行这个程序？

它对于较低的数字运行良好，但随着您的增加，时间也会增加 - 呈指数增长。所以像 1000000 这样的数字需要永远

```
import java.util.*;

public class SumOfPrimes {

public static void main(String args[]) {
    Scanner in = new Scanner(System.in);
    long number = 0;

    System.out.println("This program outputs the sum of the primes of a given number.");
    System.out.print("Please enter a number: ");
    number = in.nextLong();

    System.out.println("The sum of the primes below "+number+" is: "+sumOfPrimes(number));
}

public static long sumOfPrimes(long n){
    long currentNum = 2;
    long sum = 0;
    if (n > 2){
        sum = sum + 2;
    }

    while (currentNum <= n) {
        if (currentNum % 2 != 0 && isPrime(currentNum)) {
            sum = sum + currentNum;
        }
        currentNum++;
    }
return sum;
}

public static boolean isPrime(long currentNum){
    boolean primeNumber = true;

    for (long test = 2; test < currentNum; test++) {
        if ((currentNum % test) == 0){
            primeNumber = false;
        }
    }

return primeNumber;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:46:11.493

有更好的求素数算法，但作为一种快速解决方法，您只需要通过当前数的平方根向上测试因子，因为如果您找到高于平方根的因子，那么您应该找到低于平方根的因子平方根。

```
long stop = (long) Math.sqrt(currentNum);
for (long test = 2; test <= stop ; test++) { 
```

`false`此外，如果您找到了一个因子并因此证明了数字复合，请跳出循环并返回。

如果需要更高的效率，您可以实施[埃拉托色尼筛法，](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)以便您只检查本身是质数的可能因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:50:35.287

每次找到一个质数时，您确实应该存储一组质数，这样您就可以避免每次都除以所有数字。

这件事：`currentNum % 2 != 0`可以写成`currentNum & 1`.

你的算法也是错误的，试着给 3 作为输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T23:57:28.247

使用 Eratosthenes Sievie：[http](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes) ://en.wikipedia.org/wiki/Sieve_of_Eratosthenes 您将在 O(n log n log n) 中找到低于给定数字的所有素数，并且您需要遍历整个表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T02:19:42.343

我写了一个。我不能确保一切都是正确的。我已经在我的机器上测试了 1000000，它只用了 31 毫秒。内存要求：1000000*1bytes=1mb

```
public class FindPrime {

/**
 * @param args
 */
public static void main(String[] args) {
    long begin=System.currentTimeMillis();
    System.out.println(findPrime(1000000));

    System.out.println("cost time="+(System.currentTimeMillis()-begin)+"ms");

}

public static long findPrime(int max){
    boolean data[]=new boolean[max+1];
    long sum=0;
    int stop=(int) Math.sqrt(max);
    for(int i=2;i<=stop;i++){
        if(data[i]==false){
            sum+=i;

            int index=i+i;
            while(index<=max){
                data[index]=true;
                index=index+i;
            }
            //System.out.println(i);
        }
    }

    stop=stop+1;

    for(;stop<=max;stop++){
        if(data[stop]==false){
            sum+=stop;
            //System.out.println(stop);
        }
    }

    return sum;
} 
```

}

# flash - Video.js：拉伸视频

> ID：15489043
> 
> 赞同：0
> 
> 时间：2013-03-18T23:44:57.290
> 
> 标签：flash, html5-video, mp4, stretch

我有一些视频被拉伸了，这会扭曲它们：

*   f4v：FF 19.0.2 OS X 和 17.0.1 Windows，当回退到 Flash 时
*   mp4：Safari 5.1.7 Windows

这些浏览器可以很好地使用信箱：

OS X：Safari 5.1.7、Chrome 25.0.1364.172
Windows：IE 9.0.8112.16421、Chrome 25.0.1364.172 m
Adob​​e Flash 播放器也可以进行信箱，所以它们看起来还不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T11:57:15.240

我发现问题的原因在于视频的处理方式，纵横比修改不正确

支持 HTML5/mp4、Safari 5.1.7 Windows 的浏览器是例外，检测原始纵横比并在容器具有不同纵横比时显示它们正确地进行信箱处理。当 VideoJS 在 FF 中回退到 Flash 时，它的 swf 播放器在第一次播放视频时无法执行相同的操作，将其拉伸到容器大小。3 种操作强制播放器重新读取元数据：
- 倒回开始
- 视频到达结尾时再次播放
- 全屏播放

# css - 具有 3 个 DIV 的结构

> ID：15489045
> 
> 赞同：0
> 
> 时间：2013-03-18T23:45:06.777
> 
> 标签：css, html

如何完成以下结构？

![结构示例](../Images/a6926cd327771a34a8be3e545a9e3b4e.png)

这是我到目前为止得到的：

```
<style>
div{
    border: 1px solid;
}
#d1{
    width: 200px;
    height: 150px;
}
#d2{
    width: 200px;
    height: 100%;
}
#d3{
    width: 100%;
    height: 100%;
}
</style>

<div id="d1">
1
</div>
<div id="d2">
2
</div>
<div id="d3">
3
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:03:33.530

如果您可以更改元素的顺序，您可以执行以下操作：

```
 * { line-height:16px; } 
  #i1 { margin:0 0 0 200px; background-color:#eef; }
  #i2 { margin-top:-16px; width:200px; height:150px; background-color:#efe; }
  #i3 { width:200px; background-color:#fee;}

  <div id="i1">main right</div>
  <div id="i2">left top</div>
  <div id="i3">left bottom</div> 
```

但显然，如果你只是将左列包装成一个 div 会更容易

```
 <div id="left">
     <div id="i2">left top</div>
     <div id="i3">left bottom</div>
 </div>
 <div id="main">main</div>

 #left {float:left; width:200px; margin:0;padding:0;}
 #main {margin-left:200px; }
 #i2 { width:200px; height:150px; }
 #i3 { width:200px; } 
```

更新：谈论 100% 的高度和宽度；您也可以使用绝对定位。[这是示例](http://jsfiddle.net/3ZArP/show/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:42:50.307

您可以使用`absolute`定位以及设置`top`,和根据需要执行此操作`bottom`，如下所示：`left``right`

**CSS**

```
#d1, #d2, #d3  {
    border: 1px solid #000000;
    position: absolute;
}
#d1 {
    top: 0;
    height: 150px;
    left: 0;
    width: 200px;
}
#d2 {
    top: 150px;
    bottom: 0;
    left: 0;
    width: 200px;
}
#d3 {
    top: 0;
    bottom: 0;
    left: 200px;
    right: 0;
} 
```

**[演示](http://jsfiddle.net/g7Dtz/)**

# php - 原则：在更新前选择一条记录

> ID：15489048
> 
> 赞同：0
> 
> 时间：2013-03-18T23:45:10.567
> 
> 标签：php, mysql, doctrine

我找到了一个解决方案，可以在使用 MySQL 中的单个查询进行更新之前选择行的 id：

```
UPDATE data_table
   SET is_active = 0
WHERE token = 'some_token'
   AND is_active = 1
   AND @id := id;
SELECT @id; 
```

但我想找到一种方法来使用 Doctrine 做同样的事情。我试过了 ：

```
$pdo = Doctrine_Manager::getInstance()->getCurrentConnection();
$res = $pdo->execute("
    UPDATE data_table
       SET is_active = 0
    WHERE token = 'some_token'
       AND is_active = 1
       AND @id := id;
    SELECT @id;
")->fetchAll(); 
```

但我只得到一个`PDOException: SQLSTATE[HY000]: General error`，我没有找到任何解决方法......

有任何想法吗 ？

* * *

根据[此处](https://stackoverflow.com/questions/6541999/mysql-user-defined-variable-within-doctrine-and-symfony)的解决方案，我找到了答案：

```
Doctrine_Manager::getInstance()->getCurrentConnection()->standaloneQuery("
    UPDATE data_table
       SET is_active = 0
    WHERE token = 'some_token'
       AND is_active = 1
       AND @id := id;
");

$data = DataTable::getInstance()->createQuery('d')->where('id = @id')->fetchOne(); 
```

# linux - perl5 数字符号 # 不适用于评论

> ID：15489050
> 
> 赞同：0
> 
> 时间：2013-03-18T23:45:21.707
> 
> 标签：linux, apache, comments, perl, embperl

我有一个非常奇怪的问题..

perl5 数字符号 # 无法正常用于评论..

我们使用 emperl、mod_perl、apache、linux..

在某些程序中，如果我在一行上用数字符号 # 或仅用数字符号 # 注释掉了一行，则该行下方的所有代码都无法正常工作。

有一个系统管理员，所以我无法访问或控制服务器上的任何设置。

这是一个新问题，以前一切都有效。

这么多可能的区域，这可能来自我正在检查是否有人遇到过这个..

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T21:40:20.103

发现问题：

正在将文件从 LINUX 传输到 Windows 以进行编辑。

如果文件最初是在 Windows 中创建的，则行尾只是一个 <CR> 并且由于某种原因整个文件运行不正确。它主要出现在使用散列符号进行 perl 注释时。

当我确定文件以 <CR><LF> 结尾时，这解决了这个问题。

# php - Magento 1.7 Costum 选项不起作用

> ID：15489051
> 
> 赞同：1
> 
> 时间：2013-03-18T23:45:23.483
> 
> 标签：php, debugging, magento

我突然遇到了这个奇怪的问题。

Magento 一直在寻找直到今天。问题是这样的：现在是这样的：

![一种](../Images/a3ff9dcce1e37935168d5c1770f2d82f.png)

在我删除管理面板中的服装选项后它的外观： ![b](../Images/3ab11d604af065de7d10b0c69d1545b9.png)

如您所见，它与**服装产品选项**有关，与设计无关，因为我将其改回默认模板，并且是相同的交易。此外，我从来没有使用任何库存功能（测试过，也与它无关）现在我不知道如何调试这个，因为谷歌浏览器（调试控制台）没有报告任何奇怪的错误（不均匀）。我该如何调试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:36:14.040

该产品可能缺货。这就是缺少**添加到购物车**的原因，而您可能没有在您的主题中处理该问题。

# php - ereg_replace 代码

> ID：15489063
> 
> 赞同：0
> 
> 时间：2013-03-18T23:46:52.913
> 
> 标签：php, preg-replace, ereg-replace

我将我的 php 更新到 5.3，我的 ereg_replace 有问题

```
$txt = ereg_replace("<(/)?(font|span|div|del|ins)[^>]*>","",$txt); 
$txt = ereg_replace("<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>","<\\1>",$txt);
$txt = ereg_replace("<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>","<\\1>",$txt); 
```

如果我更改`ereg_replace`为`preg_replace`我收到警告：

消息：preg_replace() [function.preg-replace]: Unknown modifier ']'

有人可以帮我修复 preg_replace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:04:05.533

这是因为您根本没有模式分隔符。您需要添加它们。

试试这个

```
$pattern1 = '#<(/)?(font|span|div|del|ins)[^>]*>#';
$pattern2 = '#<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>#';
$txt = preg_replace($pattern1, '', $txt);
$txt = preg_replace($pattern2, '<\\1>', $txt); 
```

更好的是，根本不使用正则表达式来尝试解析这样的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:05:15.680

```
$txt = preg_replace("~<(/)?(font|span|div|del|ins)[^>]*>~","",$txt); 
$txt = preg_replace("~<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>~","<\\1>",$txt);
$txt = preg_replace(~"<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>~","<\\1>",$txt); 
```

我已经在这个表达式中添加了分隔符（~）。尝试。

# eclipse - Mac OS X 上的 Rcpp+Eclipse

> ID：15489065
> 
> 赞同：2
> 
> 时间：2013-03-18T23:47:00.447
> 
> 标签：eclipse, r, osx-mountain-lion, rcpp

我正在尝试开始使用 Rccp 并决定使用 Eclipse 作为开发环境，因为我已经将 StatEt 用于 R。我什至无法编译和运行一个简单的程序，希望能得到一些帮助！

简要地说，我尝试按照博客上的说明进行操作：[http](http://blog.fellstat.com/?p=170) : //blog.fellstat.com/?p=170 完全用于设置 Rcpp、RInside 和 Eclipse，以及示例程序。我在 Mountain Lion 上运行，并使用 XCode 中的命令行选项安装了 g++。我想我已经忠实地遵循了博客中的所有步骤，但无法编译程序。我认为问题在于包含头文件的方式，如下面的输出片段所示。据我所知，第 52 行`/usr/include/c++/4.2.1/cstring`是一个包含语句，`<string.h>`编译器包含`Rccp/include/string.h`而不是前面在包含路径上找到的`string.h`from 。`std`

我是 C++ 的新手，所以我非常感谢一些关于如何进行的指示。

-克里希纳

```
16:22:38 **** Incremental Build of configuration Debug for project MyTestRCppPackage ****
Info: Internal Builder is used for build
g++ -DINSIDE -I/Library/Frameworks/R.framework/Versions/2.15/Resources/include -I/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include -I/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp -I/Library/Frameworks/R.framework/Versions/2.15/Resources/library/RInside/include -O0 -g3 -Wall -c -fmessage-length=0 -arch x86_64 -v -o src/main.o ../src/main.cpp 
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~182/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~182/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
 /usr/llvm-gcc-4.2/bin/../libexec/gcc/i686-apple-darwin11/4.2.1/cc1plus -quiet -v -I/Library/Frameworks/R.framework/Versions/2.15/Resources/include -I/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include -I/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp -I/Library/Frameworks/R.framework/Versions/2.15/Resources/library/RInside/include -imultilib x86_64 -iprefix /usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin11/4.2.1/ -dD -D__DYNAMIC__ -DINSIDE ../src/main.cpp -fPIC -quiet -dumpbase main.cpp -mmacosx-version-min=10.8.3 -m64 -mtune=core2 -auxbase-strip src/main.o -g3 -O0 -Wall -version -fmessage-length=0 -D__private_extern__=extern -o /var/folders/hc/vqp48jt56_v332kc3dqyf5780000gn/T//ccqdmOKI.s
ignoring nonexistent directory "/usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin11/4.2.1/../../../../i686-apple-darwin11/include"
ignoring nonexistent directory "/usr/include/c++/4.2.1/i686-apple-darwin11/x86_64"
ignoring nonexistent directory "/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/../../../../i686-apple-darwin11/include"
#include "..." search starts here:
#include <...> search starts here:
 /Library/Frameworks/R.framework/Versions/2.15/Resources/include
 /Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include
 /Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp
 /Library/Frameworks/R.framework/Versions/2.15/Resources/library/RInside/include
 /usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include
 /usr/include/c++/4.2.1
 /usr/include/c++/4.2.1/backward
 /usr/local/include
 /Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
GNU C++ version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) (i686-apple-darwin11)
    compiled by GNU C version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00).
GGC heuristics: --param ggc-min-expand=150 --param ggc-min-heapsize=65536
Compiler executable checksum: b37fef824b01c0a99fb2679acf3b04f1
In file included from /usr/include/c++/4.2.1/cstring:52,
                 from /usr/include/c++/4.2.1/bits/stl_algobase.h:66,
                 from /usr/include/c++/4.2.1/memory:53,
                 from /usr/include/c++/4.2.1/tr1/hashtable:56,
                 from /usr/include/c++/4.2.1/tr1/unordered_map:37,
                 from /Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/platform/compiler.h:158,
                 from /Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/RcppCommon.h:26,
                 from /Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp.h:27,
                 from ../src/main.cpp:8:
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:52: error: 'internal' has not been declared
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:52: error: typedef name may not be a nested-name-specifier
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:52: error: expected ';' before '<' token
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:65: error: expected `)' before 'charsxp'
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:70: error: expected ',' or '...' before '&' token
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:75: error: expected unqualified-id before '&' token
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:75: error: expected ',' or '...' before '&' token
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:75: error: 'Rcpp::String::String()' cannot be overloaded
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:55: error: with 'Rcpp::String::String()'
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:85: error: 'Rcpp::String::String(int)' cannot be overloaded
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:70: error: with 'Rcpp::String::String(int)'
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:88: error: expected `)' before 'x'
/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include/Rcpp/string.h:89: error: expected `)' before 'x' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:06:36.607

这里有两个完全不同的问题：

1.  获取安装 Rcpp 所需的一切。OS X 方面应记录在 Simon 维护的相关页面上。如果您拥有这些工具并安装了 Rcpp，那么您应该能够`cppFunction('double nPi(int x) { return x*M_PI; }')`使用 Rcpp 提供的函数来创建一个可供您访问的可调用 C++ 函数，`nPi()`并且`nPi(2)`应该返回一个值。

2.  您选择的 IDE 及其设置。这与 1\. 没有什么关系，除了要求它工作之外。

所以我会在 1 上工作，看看我是否先解决了这个问题，然后才转向 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:51:01.577

总而言之，我面临的问题是包含`Rcpp`与其中相同名称的文件`std`发生冲突。特别是，`string.h`from`Rcpp`被包含在`string.h`from`std`是正确选择的地方，据我所知，这是由于`-I`在默认路径之前搜索通过指令指定的路径。

我尝试了许多不同的替代方案来解决这个问题，包括删除和重新安装 XCode 和相关的命令行工具，以及使用 macports 安装另一个 g++ 编译器。这些都没有解决问题。然后，我使用`-idirafter`指令而不是`-I`指令来搜索 Rcpp 和 R 的包含文件的路径。我从[gcc 中得到了这个提示包含顺序损坏？](https://stackoverflow.com/questions/9893800/gcc-include-order-broken). 这很有效，因为现在在默认路径之后搜索这些目录。这排除了（至少到目前为止！）`string.h`from`std`和`string.h`from`Rcpp`发生冲突的可能性。

[要使http://blog.fellstat.com/?p=170](http://blog.fellstat.com/?p=170)的第 5 步工作，我必须在文件中设置`-idirafter`路径 。`PKG_CPPFLAGS``Makevars`

感谢大家的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T21:47:00.137

您只需删除包含

```
/Library/Frameworks/R.framework/Resources/library/Rcpp/include/Rcpp 
```

因为它是：

*   不必要的，因为所有 R 进口都是形式`<Rcpp/XXX>`
*   导致此问题，因为编译器`string.h`在`Rcpp`目录中查找（当它不应该时）。

# java - 无法使用 Poison Pill 停止生产者/消费者线程

> ID：15489067
> 
> 赞同：2
> 
> 时间：2013-03-18T23:47:18.787
> 
> 标签：java, multithreading, thread-safety, interrupt

我有非常简单的代码，它使用“毒丸”模拟生产者/消费者停止技术。

我有生产者类：

```
public class Producer extends Thread {

    private final BlockingQueue<String> queue;

    public Producer(BlockingQueue<String> queue) {
        this.queue = queue;
    }

    @Override
    public void run() {
        try {
        while (true) {
                //unblocking this line will cause the code to stop after intrrupt               
                //System.out.println("1");
                queue.put("hello world");
            }
        } catch (InterruptedException e) {
                try {
                    queue.put(Main.POISON_PILL);
                } catch (InterruptedException e1) {
                }
            }
        }
} 
```

消费类：

```
public class Consumer extends Thread {

    private final BlockingQueue<String> queue;

    public Consumer(BlockingQueue<String> queue) {
        this.queue = queue;
    }

    @Override
    public void run() {
        try {
            while (true) {
                String s = queue.take();
                if (s.equals(Main.POISON_PILL))
                    break;
                else
                    System.out.println(s);
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
} 
```

现在主要功能：

```
public static String POISON_PILL = "POISON_PILL";

    public static void main(String[] args) {

        BlockingQueue<String> queue = new LinkedBlockingQueue<String>();
        Producer producer = new Producer(queue);
        Consumer consumer = new Consumer(queue);
        producer.start();
        consumer.start();
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {

        } finally {
            producer.interrupt();
        }
    } 
```

由于未知原因，即使在`producer.interrupt()`调用后，“hello world”也会永远在控制台中打印。

我不明白的第二件事是为什么取消注释`System.out.println("1");`会导致程序在生产者线程中断后退出。

请帮助我理解为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:57:17.400

我的猜测是，您的生产者运行速度比您的消费者快得多，以至于您*似乎*永远不会用完物品。创建一个`LinkedBlockingQueue`没有显式容量的创建一个容量为 Integer.MAX_VALUE 的，这足以让消费者保持打印一段时间。

这也可能是添加行时它开始工作的原因`System.out.println`；通过要求控制台 I/O，它会减慢生产者的速度，直到消费者能够跟上。

尝试创建一个`LinkedBlockingQueue`小容量的，比如 100 左右，而不是。

# java - 如何使异常处理循环（无限次）

> ID：15489071
> 
> 赞同：0
> 
> 时间：2013-03-18T23:47:41.287
> 
> 标签：java, loops, methods

[对上一个问题](https://stackoverflow.com/questions/15487706/try-and-catch-block-not-functioning-in-user-defined-method)的回应，我对该问题的最初答案已经解决，但是当它归结为循环时我遇到了另一个问题，后来通过简单地使用 for 循环解决了这个问题。

但是，我的问题是我不希望用户在处理异常后不断地重新启动程序，而是希望它向用户循环相同的开始问题。我尝试在 return 语句之后放置 print 语句，并尝试在 try catch 之后完全复制逻辑代码，但是，我意识到这不会导致用户无限次循环异常。另外，顺便说一句，是的，我之前的问题有很好的答案，但是，没有人能回答我更反复出现的问题，这就是为什么没有人对他们的答案打勾的原因。

```
import java.io.*;
import java.text.DecimalFormat;

public class Test
{

    public static void main(String[] args) throws IOException
    {

        double x;
        x = circlemethods(0.0, 0.0, 0.0, 1.0);

    }

    public static double circlemethods(double volume, double surfacearea,
            double area, double radius) throws IOException
    {

        BufferedReader myInput = new BufferedReader(new InputStreamReader(System.in));

        String numInput;
        String reqInput;
        String amountStr;
        double numInt = 0;
        double num = 0;
        double answer = 0;
        double amount = 0;
        double answer2 = 0;
        double answer3 = 0;
        double answer4 = 0;

        for (double i = 0; i < 999; i++)
            ;
        try
        {

            // for (double i = 0; i < 999; i++);

            // while (numInt != 999) {

            System.out.println("This program will ask for a given user radius, then proceed to calculate the user input");
            System.out.println("The program will use four methods to achieve this, all calling back to the main method");
            System.out.println("Press any key to continue");
            numInput = myInput.readLine();

            System.out.println("First, what would you like to calculate?");
            System.out.println("Enter '1' for Circumference, '2' for area, '3' for volume, or '4' for surface area");
            reqInput = myInput.readLine();
            numInt = Double.parseDouble(reqInput);

            System.out.println("Now enter the radius of the required shape(Half of diameter)");
            numInput = myInput.readLine();
            num = Double.parseDouble(numInput);

            DecimalFormat nextAmount = new DecimalFormat("0.00");
            amountStr = nextAmount.format(amount);

            if (numInt == 1)
            {
                System.out.println("You chose to calculate circumference, given the radius :" + num);
                answer = (3.14) * (2) * (num);
                System.out.print("The circumference of that sphere is :");
                System.out.println(answer + "cm³");
                return answer;
            }
            else if (numInt == 2)
            {
                System.out.println("You chose to calculate area, given the radius :" + num);
                answer2 = (3.14) * 2;
                System.out.print("The area of the circle is :");
                System.out.println(answer2 + "cm²");
                return answer2;
            }
            else if (numInt == 3)
            {
                System.out.println("You chose to calculate volume, given the radius :" + num);
                answer3 = 4 / 3 * (3.14) * (num) * (3) * (3) * (3);
                System.out.print("The volume of that sphere is : cm³");
                System.out.println(answer3 + "cm³");
                return answer3;
            }
            else
            // if (numInt == 4)
            {
                System.out.println("You chose to calculate surface area, given the radius :" + num);
                answer4 = 4 * (3.14) * (num) * (2) * (2);
                System.out.print("The Surface area of that sphere is :");
                System.out.println(answer4 + "cm²");
                return answer4;

            }

        } catch (Exception e)
        {
            System.out.println("Please do not enter any string values, next time input enter a number ");
            return 0;
            // how to loop this untill the user inputs a number????

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:56:38.467

您需要循环直到获得有效值。一种方法是循环直到布尔值设置为真。尝试类似的事情：

```
boolean inputIsValid = false;
while (!inputIsValid) { ... 
```

然后，当您确定您有一个有效的输入时，添加以下行：

```
inputIsValid = true; 
```

您的循环将继续，直到 inputIsValid 变为真。

您还可以创建一个无休止的 while 循环。然后，当您收到有效输入时，`break`退出循环：

```
while(true) {
    //when valid input is received
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:00:10.427

首先，您使用`while(true)`循环而不是循环 999 次。（考虑到它后面有一个分号，这个循环实际上并没有做任何事情。）

然后，您`return 0;`从`catch`块中删除 。

所以它会是

```
while(true) {
    try {
        .... //your code
    }
catch {...}
} //while loop end bracket 
```

这样，循环只有在到达您的返回语句之一时才会结束。

# android - Android 以编程方式在具有 root 访问权限的状态栏中读取所有通知

> ID：15489075
> 
> 赞同：0
> 
> 时间：2013-03-18T23:47:55.570
> 
> 标签：android, notifications, root

我知道目前无法通过标准 API 读取消息。是否可以通过 root 访问以某种方式读取它们？它们存储在哪里？我试图通过浏览源找到相关的地方，但没有运气：[NotificationLogActivity.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.2_r1/com/android/notificationlog/NotificationLogActivity.java?av=f)和[NotificationManager](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/app/NotificationManager.java.htm)。我认为它可能在某些 SQLite 数据库中，但找不到任何相关的系统应用程序数据库。

我应该在哪里查找通知的存储位置？我目前正在克隆 Android 源代码库，但不确定能否找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:01:18.557

你根本无法做到这一点。它们仅存储在内存中，在 NotificationManagerService、StatusBarManagerService 和 SystemUI 中。

# jquery - 如何从函数内部使用 jQuery 隐藏元素

> ID：15489078
> 
> 赞同：0
> 
> 时间：2013-03-18T23:48:14.837
> 
> 标签：jquery

我有一个我认为非常简单的功能。但是中间的 .hide 和 .removeClass 没有发生。不知道如何解决这个问题。

```
$(document).ready(function(){
    var li = $(".fb-notification-li");
    function showHide(){
        li.delay(11000);
        $('li.open ul').hide();
        $('li.open').removeClass('open');
        li.fadeIn(600);
        li.delay(20000);
        li.fadeOut(600);
    }
 showHide();                                    
}); 
```

编辑 -

根据好建议，我添加了一个[jsfiddle](http://jsfiddle.net/ravenna/GFydL/)。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T23:55:36.500

问题有点模糊，但我会试一试：

我个人对 .delay() 函数的运气更好。

- 此代码还将修复和处理您的（潜在）范围问题。

```
$(document).ready(function() {
    $(".fb-notification-li").each(function() {

        setTimeout(11000, function() {
            $(this, '.open ul').hide();
            $(this, '.open').removeClass('open');
            $(this).fadeIn(600);
            setTimeout(200000, function() {
                $(this).fadeOut(600);
            })
        });
    });
}); 
```

# php - 阵列错误/警告

> ID：15489083
> 
> 赞同：2
> 
> 时间：2013-03-18T23:49:00.500
> 
> 标签：php, arrays, wordpress

我收到以下警告：

```
Warning: reset() expects parameter 1 to be array, null given in /data/9/1/115/118/1767118/user/1910351/htdocs/aw/home/wp-content/themes/awthemesnew/library/sidebars.php on line 183 
```

请记住，我正在编辑一个 wordpress .php 文件。这是第 183 行的完整代码：

```
function theme_print_sidebar($name, $places) {
    $style = theme_get_option('theme_sidebars_style_' . $name);
    $place_count = count($places);
    if ($name != 'footer' && $place_count < 2) {
        theme_print_widgets(reset($places), $style);
        return;
    }
    ?> 
```

帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:59:25.637

在您调用重置时，$places 的值显然为空。

您的代码是说“仅当 $place_count 的值小于 2 时才调用重置”。您正在通过以下语句设置 $place_count 的值：

```
$place_count = count($places); 
```

我们可以推断，当对 null 变量调用 count() 时，它返回 0。由于 0 小于 2，因此执行以下语句：

```
 theme_print_widgets(reset($places), $style); 
```

但是，此时 $places 为 null 的事实会导致错误。我很想知道在什么情况下 $places 为空。一旦你得到了答案，你就可以决定如何处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:52:42.793

我想到了。我在页脚中删除了一个命令，当代码在寻找它时，因为它已经消失了，它给了我一个数组警告。谢谢您的帮助。

# emacs - Emacs lua-mode（文件模式规范错误）

> ID：15489084
> 
> 赞同：2
> 
> 时间：2013-03-18T23:49:03.660
> 
> 标签：emacs, lua, elisp

我收到以下错误

> 文件模式规范错误：（错误“Unknown rx form `group-n'”）

当我尝试在 emacs 中编辑 .lua 文件时。我使用 GNU Emacs 23.3.1，我的`.emacs`文件中有以下内容：

```
(autoload 'lua-mode "lua-mode" "Lua editing mode." t)
(add-to-list 'auto-mode-alist '("\\.lua$" . lua-mode))
(add-to-list 'interpreter-mode-alist '("lua" . lua-mode)) 
```

我`lua-mode`从[http://immerrr.github.com/lua-mode/](http://immerrr.github.com/lua-mode/)安装。我尝试使用该`--debug-init`选项运行 emacs，但它没有进入调试器，而是打开了 .lua 文件`text-mode`而不是`lua-mode`..

（另请参阅[Emacs lua-mode 问题：(void-function interactive-call-p)](https://stackoverflow.com/questions/6845464/emacs-lua-mode-issue-void-function-interactively-called-p)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T01:46:52.693

`group-n`您的 Emacs 抱怨，因为它对最近一次提交中宏中使用的符号一无所知`rx`，这可能是因为该符号仅在[Emacs 24.2](http://www.gnu.org/software/emacs/NEWS.24.2)中引入，而您的符号有点旧。

我必须承认，在编写代码时，我认为这个`rx`包更加成熟，甚至没有费心在 Emacs 新闻中查找它的变化。所以，这里有两个选择：

*   要么你更新你的 Emacs 到 24.2
*   或者您可以降级到[旧版本](https://github.com/immerrr/lua-mode/commit/7605d2c3d9cd6df4c89870a54c14c2c119102a2e) 并等待我有机会重写那段代码。

*UPD：问题已在上游修复，代码再次与 Emacs23 兼容。*

# wpf - 使用调度程序更新 WPF 模型

> ID：15489087
> 
> 赞同：0
> 
> 时间：2013-03-18T23:49:14.143
> 
> 标签：wpf, dispatcher, modelvisual3d

我有一个从文件加载并显示在屏幕上的 Visual3D 对象。这很好用。我正在尝试从 SerialDataReceivedEventHandler 中接收到的数据中旋转它 - 这也可以正常工作。

当我尝试旋转模型时，它会引发 InvalidOperationException，因为线程不拥有该对象。这是我所拥有的：

```
QuaternionRotation3D rotation = new QuaternionRotation3D(q);
model.Dispatcher.BeginInvoke(new Action(() => 
           model.Transform = new RotateTransform3D(rotation))); 
```

我知道我需要使用调度程序，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:16:37.880

我假设您发布的所有代码都是在另一个线程中调用的，因此您将无法 `QuaternionRotation3D`在该线程上创建代码，有几种方法可以解决此问题，但没有看到您的其余代码很难猜测，但其中一个选项应该管用。

```
Application.Current.Dispatcher.BeginInvoke(new Action(() => 
{
    QuaternionRotation3D rotation = new QuaternionRotation3D(q);
    model.Transform = new RotateTransform3D(rotation);
})); 
```

或者如果它只是在`MainWindow`

```
Dispatcher.BeginInvoke(new Action(() => 
{
    QuaternionRotation3D rotation = new QuaternionRotation3D(q);
    model.Transform = new RotateTransform3D(rotation);
})); 
```

或者如果`model`是线程安全的（没有 Observables/dependency 属性）

```
model.Dispatcher.BeginInvoke(new Action(() => 
{
    QuaternionRotation3D rotation = new QuaternionRotation3D(q);
    model.Transform = new RotateTransform3D(rotation);
})); 
```

# python - Python 将 *args 转换为列表

> ID：15489091
> 
> 赞同：20
> 
> 时间：2013-03-18T23:49:43.770
> 
> 标签：python, arrays, python-2.7, args

这就是我要找的：

```
def __init__(self, *args):
  list_of_args = #magic
  Parent.__init__(self, list_of_args) 
```

我需要将 *args 传递给单个数组，以便：

```
MyClass.__init__(a, b, c) == Parent.__init__([a, b, c]) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-18T23:51:38.410

没什么太神奇的：

```
def __init__(self, *args):
  Parent.__init__(self, list(args)) 
```

在 内部`__init__`，变量`args`只是一个包含任何传入参数的元组。事实上，`Parent.__init__(self, args)`除非你真的需要它是一个列表，否则你可能只使用它。

作为旁注， using[`super()`](http://docs.python.org/2/library/functions.html#super)优于`Parent.__init__()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-29T09:09:54.843

我在 senddex 教程中找到了一段代码来处理这个问题：

[https://www.youtube.com/watch?v=zPp80YM2v7k&index=11&list=PLQVvvaa0QuDcOdF96TBtRtuQksErCEBYZ](https://www.youtube.com/watch?v=zPp80YM2v7k&index=11&list=PLQVvvaa0QuDcOdF96TBtRtuQksErCEBYZ)

尝试这个：

```
def test_args(*args):
    lists = [item for item in args]
    print lists

test_args('Sun','Rain','Storm','Wind') 
```

结果：

> ['太阳'，'雨'，'风暴'，'风']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-01T11:50:14.600

如果您正在寻找与@simon 的解决方案相同方向的东西，那么：

`def test_args(*args): lists = [*args] print(lists) test_args([7],'eight',[[9]])`

结果：

> [[7]，'八'，[[9]]]

# silverlight - Silverlight 单元测试具有相同测试的多个初始化

> ID：15489092
> 
> 赞同：1
> 
> 时间：2013-03-18T23:49:46.483
> 
> 标签：silverlight, unit-testing, windows-phone-7

我有一个对象有很多我想测试的属性。我`TestMethod`为每个属性编写了一个，但问题是许多属性在设置时会操纵其他属性。我需要的是能够设置我的测试对象，操作其中一个变量，运行测试，将对象重置为其原始状态，然后重复该过程。这样，我就可以避免过多的冗余。

我研究过使用数据驱动方法（这是解决此问题的完美解决方案），但 Silverlight 测试框架似乎无法使用这种方法，因为我找不到使用该`DataSource`属性的方法。我想过尝试看看是否可以`DataSource`通过传统的 MSTest 框架访问，但可惜我只有 Visual Studio Express。

我曾想过尝试创建一个自定义测试工具，看看是否可以解决这个问题，但我想我会先四处寻求建议。

也许我应该把它吸起来，把所有不同的配置写成单独的`TestInitialize`方法，然后注释掉我不需要的那些。

任何帮助将不胜感激。

## 更新/澄清：

这是要测试的对象如何工作的示例。假设您有一个带有位置坐标和每边坐标的形状。当您更新位置或一侧的坐标时，所有其他坐标也必须更新。

这是正在测试的功能。我想做的是能够设置多个初始化（通过`ClassInitialize`或你有什么），我将设置我的对象的初始值和包含预期测试结果的模拟，然后更改有问题的属性之一。像这样的东西（这只是为了说明，所以请忽略任何不良做法xD）：

```
// class under test (mock has the same properties & constructor)
public class MySquare
{
    public Vector2 XYPosition;
    public int Width;
    public int Height;
    public float TopSidePosition;
    public float RightSidePosition;
    ...

    public MySquare(float x, float y, int width, int height)
    {
        // set up all properties
    }
}

// test object container
public class Container
{
    public static MySquare square;
    public static MySquareMock squareMock;
}

// desired test class initializations (it would be nice to be able to run each of these
// as well as the TestMethods and then reset to the next TestSetupClass)
[TestClass]
public class TestSetupClass1
{
    [ClassInitialize]
    public void SetupTest()
    {
        // set up initial value and expected result
        Container.square = new MySquare(0, 0, 5, 5);
        Container.squareMock = new MySquareMock(1, 1, 5, 5);

        Container.square.XYPosition = new Vector2(1, 1);
    }
}

[TestClass]
public class TestSetupClass2
{
    [ClassInitialize]
    public void SetupTest()
    {
        // set up initial value and expected result
        Container.square = new MySquare(0, 0, 5, 5);
        Container.squareMock = new MySquareMock(1, 0, 5, 5);

        Container.square.RightSidePosition = 6;
    }
}

// test methods
[TestClass]
public class TestMethods
{
    [TestMethod]
    public void TestPosition()
    {
        Assert.AreEqual(Container.squareMock.XYPosition, Container.square.XYPosition);
    }

    [TestMethod]
    public void TestTopSidePosition()
    {
        Assert.AreEqual(Container.squareMock.XYTopSidePosition, Container.square.TopSidePosition);
    }

    // test method for each property
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:36:45.633

我没有找到一种完全自动化的方式来实现我最初的目标，但我确实想出了一些非常简单的方法。

首先，我创建了一个单例`TestManager`类来处理几乎所有的测试设置，因此我的`MainPage`（测试页）类中只需要一行。在 中`TestManager`，我添加了一个字符串变量，我`TestSetup`也从`MainPage`.

然后，我创建了另一个`TestClass`调用`TestSetupClass`并提供了两个静态字段：

```
private static Type childType;
private static TestSetupClass childInstance; 
```

在它的构造函数中，我将底层类型与在 中指定的类名进行比较，`TestManager`并设置`childType`and`childInstance`如果它们匹配：

```
Type thisType = GetType().UnderlyingSystemType;

if (thisType.Name.Equals(TestManager.Instance.SetupClassName))
{
    childType = thisType;
    childInstance = this;
} 
```

`TestSetupClass`接下来，我向带有`AssemblyInitialize`属性的虚拟方法添加了一个。我所有的设置类都继承`TestSetupClass`并覆盖了这个方法。在该方法中，我使用`childType`来获取`MethodInfo`子方法的重写实现，并使用 调用它`childInstance`：

```
MethodInfo childSetup = childType.GetMethod("Setup");
childSetup.Invoke(childInstance, null); 
```

瞧！如果您想在运行所有测试之前运行特定设置，您只需在`MainPage`使用`TestManager`.

我知道还有一些地方我可以做得更好，但它确实有效，所以你能做些什么。

# c - C 程序，激光线，警告：从不兼容的指针类型传递“sortowanie”的参数 1

> ID：15489095
> 
> 赞同：-1
> 
> 时间：2013-03-18T23:49:48.403
> 
> 标签：c, pointers, compilation

我的程序有问题。这是一个问题：[http ://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=120](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=120)

我有：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct{

    int x,y;

} punkty;

typedef struct{

    punkty linia[300];
    int i;

}linie;

int sprawdzenie(punkty a, punkty b, punkty c)
{
        int n1, n2;

        if ((b.y-a.y)*(c.x-a.x)==(c.y-a.y)*(b.x-a.x))
            return 1;
        else
            return 0;

}

int sortowanie(punkty *proste, int roz)
{
  int i,j;

    for(i=0; i<roz;i++)
    {
        for(j=0; j<roz-1;j++)
        {
            if(proste[j].x>proste[j+1].x ||
                (proste[j].x == proste[j+1].x
                && proste[j].y>proste[j+1].y)
               )
            {
                punkty tmp;

                 tmp = proste[j];
                 proste[j] = proste[j+1];
                 proste[j+1] = tmp;
            }
        }

    }

}
int sortowanie_2(punkty *proste, int roz)
{
    int i,j;

    for(i=0; i<roz;i++)
    {
        for(j=0; j<roz-1;j++)
        {
            if(proste[j].x>proste[j+1].x ||
                (proste[j].x == proste[j+1].x
                && proste[j].y>proste[j+1].y)
               )
            {
                punkty tmp;

                 tmp = proste[j];
                 proste[j] = proste[j+1];
                 proste[j+1] = tmp;
            }
        }

    }

}

int duplikat(linie *proste, int roz, punkty a, punkty b, punkty c)
{
    int ax,k,j,i;

    for(ax=0;ax<roz;ax++)
        for(i=0;i<proste[ax].i-2;i++)
            for(j=i; j<proste[ax].i-1;j++)
                for(k=j;k<proste[ax].i;k++)

                    if(proste[ax].linia[i].x == a.x && proste[ax].linia[i].y == a.y &&
                       proste[ax].linia[j].x == b.x && proste[ax].linia[j].y == b.y &&
                       proste[ax].linia[k].x == c.x && proste[ax].linia[k].y == c.y
                       )
                    return 1;
    return 0;
}

int main()
{
    punkty tab[300];

    linie proste[300];

    int n=0,i,j,k,p=0,parametr=0;

/*wczytanie punktow*/

    while(scanf("%d %d", &tab[n].x, &tab[n].y) == 2  && (tab[n].x!=0 || tab[n].y!=0))
    {
        n++;
    }

    sortowanie(&tab,n);
/*wyszukiwanie lini */

    for(i=0; i<n-2;i++)
    {
        for(j=i+1; j<n-1; j++)
        {
            parametr=1;

            for(k=j+1; k<n; k++)
            {
                if(sprawdzenie(tab[i], tab[j], tab[k]) == 1 && duplikat(&proste, p, tab[i],tab[j],tab[k])==0)
                {

                    if(parametr==1)
                    {
                         //printf("x");
                         proste[p].linia[proste[p].i] = tab[i];
                         proste[p].i++;
                         proste[p].linia[proste[p].i] = tab[j];
                         proste[p].i++;
                         proste[p].linia[proste[p].i] = tab[k];
                         proste[p].i++;
                         parametr=0;
                    }
                    else
                    {
                        proste[p].linia[proste[p].i] = tab[k];
                        proste[p].i++;
                    }

                }
            }
            if(parametr==0)
            {
                p++;
            }
        }
    }

    if(p==0)
    {
        printf("No lines were found");
    }
    else
    {
        printf("The following lines were found:\n");
    }

    for(i=0; i<p; i++)
    {

        for(j=0; j<proste[i].i; j++)
        {
            printf("( %d, %d ) ", proste[i].linia[j].x,proste[i].linia[j].y);
           // printf("%d %d\n", tab[j].x, tab[j].y);
        }
        printf("\n");
    }

    getchar();
    return 0;
} 
```

我有错误的程序：

code.c：在函数'main'中：code.c：116：5：警告：从不兼容的指针类型code.c：29：5传递'sortowane'的参数1：注意：预期'struct punkty *'但参数是键入“struct punkty (* )[300]”code.c:128:17：警告：从不兼容的指针类型 code.c:81:5 传递“duplikat”的参数 1：注意：预期的“struct linie *”，但参数是键入“struct linie (* )[300]”code.c:133:26：错误：“/”标记之前的预期表达式 code.c:172:12：错误：“/”标记之前的预期表达式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:52:15.907

```
int sortowanie(punkty *proste, int roz) 
```

需要一个 punkty 指针，但您正在传递一个`punkty **`，即指向指针的`punkty`指针：

```
punkty tab[300]; // tab is a (pointer to) array
sortowanie(&tab,n); // should be sortowanie(tab, n) 
```

这里同样的问题：

```
linie proste[300];
duplikat(&proste, p, tab[i],tab[j],tab[k]) // should be duplikat(proste, ... 
```

在`sortowanie_2`中，你`return`什么都没有，你需要从这个函数返回一个整数。

但是编译器已经告诉你这些事情了。

# java - 动态改变 ListCellRenderer 的内容

> ID：15489102
> 
> 赞同：-2
> 
> 时间：2013-03-18T23:50:43.130
> 
> 标签：java, swing, jlist, twitter4j, listcellrenderer

我正在尝试使用 Twitter4 构建一个 Twitter 客户端。我将用户的推文和信息等存储在 Jlist 的 DefaultListModel 中。我想添加用户个人资料图片，为此我使用 ListCellRenderer 设置图标。我的问题是我只能将 ListCellRenderer 文本和图标设置为一个用户信息。我使用一个循环来拉下多条推文并将它们添加到模型中，但渲染器只是多次设置一条推文。

这是检索推文的代码

```
for (int i = 0; i < list.size(); i++) {
 Status each = (Status) list.get(i);

                    UI.model.addElement("<html><body style='width: 450px;'>"
                            + "@"
                            + each.getUser().getScreenName()
                            + " - "
                            + each.getText() + "<html><br>");

                    UI.whatIsDisplayedList.setCellRenderer(new newsFeedRenderer(each)); } 
```

这就是我设置 ListCellRenderer 的方式

```
JLabel pic = new JLabel();

        try {
            ImageIcon img = new ImageIcon(TwitterFunctions.eachTweetProfilePic(each.getUser()));
            pic.setIcon(img);
            setIcon(img);
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        setText( "@" + each.getUser().getScreenName() + " - " + each.getText()); 
```

我必须进行哪些修改才能启用正确的推文格式？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:08:56.300

您不应该将 newFeedReader() 传递给 setCellRenderer(); ListCellRenderer 是用于绘制单元格的对象，而不是用作数据库类型的对象。你要做的是，

*   在开始时获取所有状态
*   将它们作为数组传递给 JList
*   然后创建一个自定义 ListCellRenderer 类并在您的 getListCellRendererComponent 方法中，返回您的 JLabel，其中包含您的 ListCellRenderer 代码

# python - gaesessions 找不到“current_session”属性

> ID：15489106
> 
> 赞同：0
> 
> 时间：2013-03-18T23:51:03.797
> 
> 标签：python, google-app-engine, gae-sessions

我正在使用 gaesessions。当我尝试通过执行检查当前会话时，`get_current_session()`出现以下错误：

```
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\webapp\_webapp25.py", line 716, in __call__
    handler.post(*groups)
  File "C:\Users\roger\Documents\projects\myapp\handlers\unburden.py", line 502, in post
    session = get_current_session()
  File "C:\Users\roger\Documents\projects\myapp\gaesessions\__init__.py", line 37, in get_current_session
    return _tls.current_session
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\dist\_threading_local.py", line 215, in __getattribute__
    return object.__getattribute__(self, name)
AttributeError: 'local' object has no attribute 'current_session' 
```

我已经创建了 appengine_config.py 文件，这里是：

```
from gaesessions import SessionMiddleware

COOKIE_KEY = '\x91G{\xd8\x90\x1e\xa4\xfdcd\x0fd\x0cXt\xd4 d\x97\x06YV\xaa_\x99\x95\x9d\xbc&\x83\x98\xb4h\xa5\xc1\xdau\xd5\x03\xc6u\xc7\x15<!V\x9d\xd9\xef\xa4Z\xce\x7f\x06*i\xca\xd2\x9f\xcdE|\x1fV'

def webapp_add_wsgi_middleware(app):
    app = SessionMiddleware(app, cookie_key=COOKIE_KEY)
    return app 
```

我通过在 python 解释器上运行 os.urandom(64) 创建了 COOKIE_KEY。我不知道是什么原因造成的，因为我看到了一个关于这个问题的问题，它说你必须创建`appengine_config.py`文件并配置中间件，但它已经完成了。

**OBS：我没有在我的 GAE 应用程序上使用 Python27。**

有任何想法吗？谢谢你。

# matlab - libsvmread 没有正确读取数据

> ID：15489111
> 
> 赞同：2
> 
> 时间：2013-03-18T23:51:41.400
> 
> 标签：matlab, libsvm

我创建了一个名为“image_data_fix2.txt”的文件，该文件具有以下格式，例如在演示中：*Matlab中的代码*

```
 +1 1:0.002 2:0.034 3:0.415
    -1 1:0.001 2:0.015 3:-0.917 
```

当我使用 libsvmread 时，它不会像我想要的那样提取数据：之后：

```
 [image_label2, image_features2] = libsvmread(fullfile(dirData,'image_data_fix2.txt')); 
```

我越来越：

```
 image_features(1)
    (1,1) 0.002
    image_features(2)  
    (1,1) 0.034 
```

当我应该得到的应该是：

```
 image_features(1)
    (1,1) 0.002
    image_features(2)  
    (1,2) 0.034 
```

所以我不能完全理解为什么我创建的数据文件没有被读取为稀疏矩阵。

# android - Android 清单问题

> ID：15489122
> 
> 赞同：1
> 
> 时间：2013-03-18T23:52:49.700
> 
> 标签：android, manifest

当我将我的 APK 上传到 Google Play 控制台时，如果我以后需要更改我的清单以禁止某些事情，我可以这样做吗？

示例：我想让我的应用程序只允许带有摄像头的设备。如果我后来决定他们不再需要相机，我会更新清单以允许这样做吗？

意思是“随意”的明显变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:15:20.773

当然你可以随意改变manifest，但显然不会影响你上传的apk。您必须构建并上传应用程序的新版本，以便用户可以安装/更新新版本。重要的是在构建和上传之前增加您的应用程序的版本代码，因为您不能提供两个具有相同的 apk。

有关如何通过 Google Play 提供更新的更多信息，请查看此链接：

[http://support.andromo.com/kb/distributing/how-to-update-your-app-in-google-play](http://support.andromo.com/kb/distributing/how-to-update-your-app-in-google-play)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T23:57:42.263

是的，您可以更改权限、最小 sdk api、最大 sdk api、主题、意图等...

澄清：我从没想过你可以在不上传的情况下神奇地改变你的 APK。我以为这是假设的。我的错。

# unix - UNIX C Shell 脚本。复制文件并添加扩展名

> ID：15489123
> 
> 赞同：0
> 
> 时间：2013-03-18T23:53:11.507
> 
> 标签：unix

我正在尝试编写一个脚本，将文件从一个目录复制到另一个目录并为它们添加 .bak 扩展名。我很难弄清楚如何添加扩展。

```
foreach file in ($argv[1]/*)
    cp $file $argv[2]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:06:58.617

做出一堆假设（主要是脚本的大纲是有效的 C shell 语法，并且文件名中的空格不是问题），那么您可能需要使用以下`basename`命令：

```
foreach file in ($argv[1]/*)
    cp $file $argv[2]/`basename $file`.bak
end 
```

该`basename`命令删除路径名，因此文件将精确复制到 . 命名的目录中`$argv[2]`。如果您也希望保留目录层次结构，则必须更加努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:55:40.220

$1 和 $2 是脚本的参数（目录）：

```
for f in $1/*
do
    fname=$(basename $f)
    cp $f $2/$fname.bak
done 
```

# android - 带有 SQLite 查询的 Listview 适配器

> ID：15489125
> 
> 赞同：0
> 
> 时间：2013-03-18T23:53:18.667
> 
> 标签：android, performance, sqlite, listview, android-listview

我有一个快速的性能问题；我有一个填充列表视图的 ListView 适配器，我打开我的 sqlite 数据库并在填充视图结束时将其关闭，然后从 SQLite 数据库填充有关列表行的一些信息。我注意到主要在滚动时这样做会严重影响性能，这是有道理的。我想知道如何提高滚动的性能。我查询数据库大约 3 次。

```
Database db = new Database(context);
db.open();
viewHolder.first.setText(db.queryFirst());
viewHolder.second.setText(db.querySecond());
viewHolder.third.setText(db.queryThird());
db.close(); 
```

我应该保留对 DB 的引用作为实例变量，并在查询时打开和关闭，还是应该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:56:15.990

> 我想知道如何提高滚动的性能。我查询数据库大约 3 次。

我建议为整个适配器查询一次数据库。目前，您正在为每一行发送三个查询，并且没有一个被缓存。从驱动器读取是一个缓慢的过程，Cursor 旨在非常有效地获取大量数据，CursorAdapter 旨在使用尽可能少的资源。使用一个 Cursor 和一个 CursorAdapter 将允许用户滚动而不会注意到任何性能损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:07:39.260

还有一个名为 ORMLite 的库，它允许您非常轻松地操作数据库并返回一个列表，这意味着您首先加载数组并且您没有任何滚动性能问题。这与数据库的延迟加载部分相结合，将允许您无缝提高滚动性能。

# windows - 你能在全屏 DirectX 层之上进行 Winform 绘图吗？

> ID：15489128
> 
> 赞同：1
> 
> 时间：2013-03-18T23:53:49.730
> 
> 标签：windows, winforms, winapi, directx, winforms-interop

我有一个使用 DirectX 渲染 3D 的本机 C++ 应用程序。该应用程序可以使用 IDXGISwapChain::SetFullscreenState() 在窗口和全屏之间切换。
但是，我的一些 UI 位于托管 dll 中的 .Net Winform 中。

在窗口模式下，我只需调用 .Net dll 并打开辅助 Winform，因此有两个窗口，主要的本机 MFC/DirectX 和 .Net Winform 控件。

但是当 DirectX 全屏时，我可以让 Winform 显示在 Direct X 层上方吗？甚至可能吗？

仅设置 Winform 属性 this.TopMost = true; 还不够。winform 位于 Direct X 层下。我只想在全屏上显示“我的”WinForm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:19:30.073

您可以[将 WinForm 的 DC](https://stackoverflow.com/questions/351236/copy-hdc-contents-to-bitmap)复制到内存中的位图上，然后将其复制到 DirectX 渲染[表面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172902%28v=vs.85%29.aspx)并将消息传递回 WinForm。但是，如果您尝试做很多事情，它可能会很慢。

# visual-studio - 有没有办法在 Visual Studio 中为“自定义构建”自动生成“附加依赖项”？

> ID：15489129
> 
> 赞同：9
> 
> 时间：2013-03-18T23:53:58.283
> 
> 标签：visual-studio, visual-studio-2013, custom-build-step

我在 Visual Studio 2013 解决方案中有一个自定义构建步骤。自定义构建步骤在引用我的解决方案中的其他几个文件的文本文件上调用 python 脚本。我希望在任何这些文件发生更改或我的脚本输出丢失时调用自定义构建步骤。但是，我不想手动维护自定义工具“附加依赖项”和“输出”字段。

我可以很容易地使脚本生成依赖项列表，就像 gcc 在传入 -MM 时可以生成 .d 文件一样。有没有办法可以使用脚本的 .d 输出在自定义构建步骤中自动填充“附加依赖项”？是否有其他方法可以避免维护“附加依赖项”和“输出”字段”？

[帮助页面](http://msdn.microsoft.com/en-us/library/hefydhhy.aspx)仅显示如何添加单个文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-10T16:43:27.167

假设你的生成`.d`文件的脚本可以生成你想要的任何格式的文件，你应该能够通过使用[`Import`](http://msdn.microsoft.com/en-us/library/92x05xfs.aspx)element 来达到你需要的结果：

1.  编写一个脚本来生成一个小项目文件而不是一个`.d`文件。您的脚本的输出将是一个包含“附加依赖项”和“输出”字段的小型项目文件。
2.  使用`Import`标签使生成的文件成为主项目的依赖项
3.  当依赖项的组成发生变化时，根据需要运行脚本。

这种方法使您可以将主项目文件与自动生成的依赖文件分开维护，该文件可以根据需要重新生成。唯一的缺点是您生成的依赖文件是 MSBuild 项目文件，而不是纯依赖文件。但是，这应该不是一个大问题，因为您拥有生成依赖文件的脚本。

# android - 使用坐标系在android屏幕上绘图

> ID：15489135
> 
> 赞同：1
> 
> 时间：2013-03-18T23:54:39.590
> 
> 标签：android, arrays, drawing, screen, path-finding

我的问题最初可能会让人很困惑，所以请耐心等待。我将从上下文的一些前言开始：

**前言：**

我有一个应用程序，它将使用数组从地图中进行路径查找。

^那很模糊：会有一个字符数组，代表墙壁、楼梯等，并且会有一个找到最佳路径的函数。

我想在 android 屏幕上显示路径。

将有由数组函数生成的字符代表生成的路径（可能是“x”或其他东西）。

* * *

**好的，说得更清楚一点：数组中会有一个“x”的“路径”。这些“x”代表将要显示在 Android 屏幕上的路径。**

* * *

**我的实际问题：**

***如何将数组中的“x”转换为在屏幕上显示一行？***我的想法是使用 for 循环/if 语句来检查是否存在“x”，如果存在，则在表示实际屏幕的第二个数组中显示一个小红点/线。

我试图找到这个，但是输入谷歌是一件很尴尬的事情，所以我一无所有地完成了我的研究。

**是否有某种内置的 android 功能可以让您将不同的颜色分配给不同的坐标？**

* * *

[这就是我想出现在屏幕上的那种。如果这是应用程序，则蓝色将由第一个数组中的“x”表示。](http://www.ibm.com/developerworks/lotus/library/sametime-googlemaps/fig-13.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:00:04.967

有几种方法可以实现将坐标系映射到描述路径的矩阵的这种效果。

根据数组的大小和更新调用的频率（听起来路径查找运行一次，之后进行一次渲染），循环遍历可能不会太昂贵。我个人会做的是开始研究如何在画布上绘图，获取屏幕大小，并相应地调整边界。

[以像素为单位获取屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)- 如何获取屏幕尺寸 [http://danielnadeau.blogspot.com/2012/01/android-canvas-beginners-tutorial.html](http://danielnadeau.blogspot.com/2012/01/android-canvas-beginners-tutorial.html) - 一个不错的画布教程

一旦您可以绘制到缩放的画布，只需运行一个看起来像这样的循环：

```
float scale_x = screen_width/columns;
float scale_y = screen_height/rows; //pixels per grid square
for( int x = 0; x < columns; x++)
for( int y = 0; y < rows; y++)
if( data[x][y] == 'x') drawRect(x*scale_x, y*scale_y, scale_x,scale_y) //if something found, draw a colored square 
```

# sql - 拆分数据库安全

> ID：15489136
> 
> 赞同：3
> 
> 时间：2013-03-18T23:54:40.663
> 
> 标签：sql, security, privacy

我正在开发一个 .NET MVC SQL 应用程序，该应用程序将包含敏感数据，例如 HIV 检测结果或收入。我想尽可能地对这种隐私进行防错，这样除了用户之外没有人可以访问它（想想水管工乔的信息被州雇员黑了）。

我听说将数据库一分为二似乎不合理： [拆分数据库是一种合法的安全措施吗？](https://stackoverflow.com/questions/7158857/is-splitting-databases-a-legitimate-security-measure) 虽然我听说这样做了。如果我们可以只使用两张桌子......更好。

但是当我说防错时，我的意思是我们公司的任何人都不可能访问这两个数据库/表。我正在考虑将应用程序代码（将访问两个数据库）和两个数据库的访问权交给财力雄厚的第三方（如 PWC 或 EY），以便政府来电或其他一些真正需要时看到两个数据源都出现了。

有人对最干净的方法有任何想法吗？我们希望设计这些表，以便大多数查询不需要访问两个数据源，因此吞吐量的相对成本不会那么高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T07:46:59.300

您可以在 SQL 中加密一列数据。因此，具有敏感数据的列，例如 HIV 检测结果/收入，您可以在将数据存储在数据库中时对其进行加密。

在此处查看详细信息：http: [//msdn.microsoft.com/en-us/library/ms179331.aspx](http://msdn.microsoft.com/en-us/library/ms179331.aspx) [http://msdn.microsoft.com/en-us/library/bb964742.aspx](http://msdn.microsoft.com/en-us/library/bb964742.aspx)

让我知道它是否有帮助。

# artificial-intelligence - 行为树中的状态类动作

> ID：15489145
> 
> 赞同：4
> 
> 时间：2013-03-18T23:56:02.040
> 
> 标签：artificial-intelligence, behavior-tree

根据我对行为树的理解，每个行为都应该是一个简短的面向目标的动作，可以在几次迭代中完成。

**例如，下面是行为树的图像：**

![在此处输入图像描述](../Images/bb028ce7c1b21595075b5e3ab6c2f3d4.png)

现在让我们假设**Drive To Enemy**行为在树中需要多次迭代。因此，在每次通过**Drive To Enemy**时都会调用它，因为它现在处于*运行*状态。

问题是如果附近有敌人，我想呼叫**Evade Enemy**。考虑到**Drive To Enemy**总是被调用，我从来没有机会调用**Evade Enemy**（*可能应该被称为 Avoid Enemy*）。

*   无论当前正在运行什么动作，我都应该遍历 Tree *EACH通道吗？*
*   我会以正确的方式解决这个问题吗？
*   处理这种行为的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:40:34.237

如果以下想法对您不起作用，我会说每次都回到顶部将是您的最后手段：

正如 Alex Champandard 在他的网站 aigamedev.com 中所建议的那样，基本的想法是，当你处于“Drive To Enemy”行为中时，你[包括某种方式来运行一些额外的检查](http://aigamedev.com/open/tutorial/monitoring-assumptions-polling-conditions/)，以确保该行为仍然应该继续.

Alex 的方法是使用[并行组合](http://aigamedev.com/open/article/parallel/)：一种同时运行其所有子节点的行为树节点。

它看起来像这样：

1.  主选择器：
    *   躲避敌人
        *   定位敌人
        *   向相反方向行驶
    *   **平行线**
        *   **敌人在附近吗？**
        *   追逐敌人
            *   寻找通往敌人的道路
            *   驱赶敌人
            *   火武器
    *   追逐旗帜
        *   定位标志
        *   寻找路径
        *   开车去国旗

Parallel 节点将不断评估“敌人在附近吗？” 节点（以合理的速度），即使执行在“Chase Enemy”子树的深处。“敌人在附近吗？”那一刻 返回失败，并行将立即返回失败并跳过完成“追逐敌人”行为。因此，对你的树的下一次评估将达到“Evade Enemy”行为。

“敌人在附近吗？” 然后，条件充当一种断言检查或提前检查。从本质上讲，它就像一个事件驱动的功能，您的树可以响应事件，即使它还没有完成它的迭代。

虽然我设计系统的方式，我不使用并行行为（不能与我使用的第 3 方游戏引擎正确多线程）。相反，我有一个复合材料，它做几乎相同的事情，只是它评估每个孩子遍历之间的检查。就像一种交错的，从正常执行到评估检查来回跳跃。只有当检查失败时，我们才会跳回顶部。

# c# - 使用 Code First 方法命名数据库

> ID：15489147
> 
> 赞同：1
> 
> 时间：2013-03-18T23:56:04.327
> 
> 标签：c#, database, entity-framework, ef-code-first, connection-string

我目前正在研究 ASP.net MVC 4 框架，我打算使用代码优先方法（因为它似乎更易于更改，并且由于实体框架提供了迁移工具，因此无需更改数据库），我的问题是，如果数据库不存在，实体框架会自动创建数据库，有没有办法定义它创建的数据库的名称？如果是这样，怎么样？我怀疑它与

```
<connectionStrings>
</connectionStrings> 
```

我在 Web.config 文件上定义，但到目前为止我似乎无法理解它的语法。

TLDR；使用代码优先方法和实体框架时如何定义数据库的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:45:09.053

首先添加您的连接字符串和您的数据库信息。欲了解更多信息，请访问此链接。[EF 代码优先](http://msdn.microsoft.com/en-us/data/jj592674)

```
<configuration>
  <connectionStrings>
    <add name="yourConnectionstringName"
         providerName="System.Data.SqlClient"
         connectionString="Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;
User ID=myDomain\myUsername;Password=myPassword;"/>
  </connectionStrings>
</configuration> 
```

在您的 Dbcontext 类中，像这样将连接字符串名称传递给 dbcontext 基本构造函数。

```
public class BloggingContext : DbContext
{
    public BloggingContext()
        : base("name=yourConnectionstringName")
    {
    }
} 
```

# php - 为重复键值创建多维数组

> ID：15489154
> 
> 赞同：0
> 
> 时间：2013-03-18T23:56:24.673
> 
> 标签：php, arrays

我正在尝试从 csv 读取数组值并创建属于主键字段的子数组。例如，目前，假设我有以下数组结构和内容......

```
$events['venue-id'] = 55
$events['event-date'] = 19/02/13;
$events['event-name'] = 'Sports Day';

$events['venue-id'] = 76
$events['event-date'] = 22/02/13;
$events['event-name'] = 'Gala Event';

$events['venue-id'] = 55
$events['event-date'] = 29/03/13;
$events['event-name'] = 'Some Other Event'; 
```

使用场地 ID 作为父数组中的键的最佳方法是什么，与它相关的其他数据被分配给子数组？基本上是一对多的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:57:20.493

尝试这个 ：

```
$res              = array();
if (($handle      = fopen("your_file.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $res[$data[0]]['venue-id']         = $data[0];
        $res[$data[0]]['event-date']       = $data[1];
        $res[$data[0]]['event-name']       = $data[2];
    }
}

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:00:16.497

如果你愿意，你可以像这样构造它：

```
$events = array( 
  "55" => array(
    "event-date" => "19/02/03",
    "event-name" => "Sports Day"
   ),
  "76" => array(
   ...

); 
```

这是假设不会有重复的场地 ID。

# r - STIDF 时间间隔

> ID：15489161
> 
> 赞同：1
> 
> 时间：2013-03-18T23:57:01.470
> 
> 标签：r, spatial, xts

我正在尝试将空间点数据转换为 STI

`c2168.st <- STIDF(sp, time = c2168$date, data = c2168[,c("id","date")]) Warning message: In STI(sp, time) : STI(): setting timeIsInterval to default value FALSE.` 我应该如何设置它？我使用 `timeIsInterval(time) = "FALSE"`, prio to STIDF 但没有成功。谢谢 B。

# javascript - 为什么 underscore defer 解决了我的很多问题？

> ID：15489163
> 
> 赞同：51
> 
> 时间：2013-03-18T23:57:20.457
> 
> 标签：javascript, backbone.js, underscore.js

在使用主干几个星期后，我意识到下划线延迟最终解决了我在渲染各种视图时遇到的许多异步问题。有人可以帮我准确理解下划线 defer 的作用以及 $.ready() 或其他类型的等待 dom 呈现函数有何不同。使用它的缺点是什么？

```
_.defer = function(func) {
    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));
}; 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-19T00:10:06.690

```
# These are equivalent
_.defer(fn);
setTimeout(fn, 1); 
```

所以`defer`只是一毫秒`setTimeout`。*（它还有一些便利功能，但这些在这里并不重要。）*

* * *

JavaScript 有运行循环。它是单线程的，但它的执行基于事件或计时器开始和停止。每次您的 JS 引擎开始运行一些代码时，它都会开始其运行循环的一次迭代。

所以`defer`说“在下一个运行循环中运行这段代码”。

```
_.defer(function() { alert('after'); });
alert('before'); 
```

这会提醒“之前”，然后是“之后”。这是因为当前的运行循环结束了哪些警报“之前”，然后紧接着一个新的运行循环开始并运行警报“之后”的代码。

因此，只要您在这里有代码，但您希望它首先运行出现在此代码之后的代码，那么您将使用`defer`.

```
_.defer(functionToRunLast);
functionToRunFirst(); 
```

这对 DOM 来说很方便。有时您更改它，但更改不会立即解析或呈现。在运行循环结束时，浏览器赶上并解析和渲染 DOM，然后下一个运行循环开始并可以与新渲染的 DOM 交互。

*（究竟是什么情况导致了这种延迟的 DOM 解析，我不确定，但我过去在自己的项目中注意到了它。）*

* * *

它*不是*DOM 就绪的替代品。下一个运行循环可能发生*在*DOM 就绪之前触发，不要混淆这些概念。

# css - 如何淡出图像的侧面？

> ID：15489165
> 
> 赞同：7
> 
> 时间：2013-03-18T23:57:22.877
> 
> 标签：css

当您将浏览器加宽时，您会注意到图像的右侧和左侧逐渐变黑。

我需要在我的画廊上应用相同的功能，但不知道。我也找到了 this >>[链接](https://stackoverflow.com/questions/9437400/css-fade-out-horizontal-rule-line-styled-div-effect-without-images)，但它只是一条水平线，不知道如何将其附加到图像的两侧并获得与链接相同的结果。

在评论中，ultranaut 提到我可以在图像上应用过滤器，但问题是如果我将它应用到图像上如何调整大小，因为浏览器窗口的大小可能不同，并且图片侧应该可以针对每个浏览器进行调整尺寸。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T00:40:25.310

这是给这只猫剥皮的一种方法：

HTML：

```
<div class="frame">
  <div class="fade"></div>
  <img src="picture.jpg" alt=""/>
</div> 
```

CSS：

```
.frame {
    width: 315px;
    height: 165px;
    margin: 20px;
    position: relative;
}

.fade {
    height: 100%;
    width: 100%;
    position:absolute;
    background: -webkit-linear-gradient(left, 
                rgba(0,0,0,0.65) 0%, 
                rgba(0,0,0,0) 20%,
                rgba(0,0,0,0) 80%,
                rgba(0,0,0,0.65) 100%
    );
} 
```

就个人而言，我不是（语义上）不必要的`fade`div 的忠实拥护者，而且我确信没有它可能有更聪明的方法来实现相同的效果，但它会起作用。

我只包含了 webkit 前缀规则，如果你想获得合法性，你需要添加其他供应商前缀。

[在这里](http://jsfiddle.net/ultranaut/M9UtU/)拉小提琴。

**更新**：如果图像仅用作背景（如链接示例中的情况），则可以在包含元素的 css 上设置渐变和图像：

```
.frame {
  width: 315px;
  height: 165px;
  margin: 20px;

  background-image: url(picture.jpg);
  background-image: -webkit-linear-gradient(left, 
    rgba(0,0,0,0.9) 0%, 
    rgba(0,0,0,0) 20%,
    rgba(0,0,0,0) 80%,
    rgba(0,0,0,0.9) 100%
  ),
  url(picture.jpg);
}

...

<div class="frame">
  Content...
</div> 
```

少一点麻烦，少一点大惊小怪：带有供应商前缀和所有内容[的新型小提琴。](http://jsfiddle.net/ultranaut/Mx3dx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:05:56.227

仅使用 CSS3，尝试[Vignette](http://nimbupani.com/vignettes-with-css3-box-shadows.html)。

逐字代码：

HTML：

```
<p class="vignette"><img src="image.jpg"></p> 
```

CSS：

```
p.vignette {
  position: relative;
}
p.vignette img {
 display: block;
}
p.vignette:after {
 -moz-box-shadow: inset 0 0 10em #666;  
 -webkit-box-shadow: inset 0 0 10em #666;   
 box-shadow: inset 0 0 10em #666;
 position: absolute;
 top: 0;
 left: 0;
 width: 100%;
 height: 100%;
 z-index: 2;
 content: "";
} 
```

# riak - 当 riak-python-client 读取时，riak-java-client 存储的对象最终以原始 json 形式出现？

> ID：15489167
> 
> 赞同：3
> 
> 时间：2013-03-18T23:57:39.010
> 
> 标签：riak

我可能对某些事情感到困惑，但是当我从 Java Riak 客户端存储一个自定义对象，然后尝试使用 Python Riak 客户端读取该对象时，我最终得到的是原始 json 字符串而不是 dict。

但是，如果我将对象存储在 python 中，我可以在获取该对象时输出 python 字典。

我*可以*简单地在 python 端使用一个 json 库来解决这个问题，但是我遇到这种差异的事实让我认为我做错了什么。

在 Java 方面，这是我的对象：

```
class DocObject 
{
    public String status; // FEEDING | PERSISTED | FAILED | DELETING
    public List<String> messages = new ArrayList<String>();
}

class PdfObject extends DocObject
{
    public String url;
    public String base_url;
} 
```

这就是我在 Riak 中存储该对象的方式：

```
public void feeding(IDocument doc) throws RiakRetryFailedException {
    PdfObject pdfObject = new PdfObject();

    pdfObject.url = doc.getElement("url").getValue().toString();
    pdfObject.base_url = doc.getElement("base_url").getValue().toString();
    pdfObject.status = "FEEDING";

    String key = hash(pdfObject.url);

    pdfBucket.store(key, pdfObject).execute();
} 
```

这就是我在 Python 中为获取数据所做的事情：

```
# Connect to Riak.
client = riak.RiakClient()

# Choose the bucket to store data in.
bucket = client.bucket('pdfBucket')

doc = bucket.get('7909aa2f84c9e0fded7d1c7bb2526f54')

doc_data = doc.get_data()

print type(doc_data) 
```

上述python的结果是：

```
<type 'str'> 
```

我希望是这样`<type 'dict'>`，就像这里的示例如何工作一样：http: [//basho.github.com/riak-python-client/tutorial.html#getting-single-values-out](http://basho.github.com/riak-python-client/tutorial.html#getting-single-values-out)

我很困惑为什么当从 Java 中存储对象时，它被存储为 JSON 字符串而不是对象。

如果有人能指出我的方法可能导致这种差异的问题，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:08:42.733

您似乎在我们的 Python 客户端中发现了一个带有 HTTP 协议/传输的错误。

您使用的版本和 master 中的当前版本都没有正确解码 JSON。我自己和另一位开发人员今天早上对此进行了调查，这似乎源于`charset`从 Riak 返回参数的问题，其内容类型为 Christian 在他的评论 ( `"application/json; charset=UTF-8"`)中指出的内容类型

我们在 github ( [https://github.com/basho/riak-python-client/issues/227](https://github.com/basho/riak-python-client/issues/227) ) 上打开了一个问题，并将得到纠正。

同时，我唯一的建议是自己解码返回的 JSON 字符串，或者使用 1.5.2 客户端（pypy 的最新稳定版）和协议缓冲区传输：

```
client = riak.RiakClient(port=8087, transport_class=riak.RiakPbcTransport) 
```

它将`dict`按照您的预期返回解码后的 JSON。

# ruby-on-rails - 带有 Filepicker.io 的 Rails 表单 - 图像的返回 URL

> ID：15489169
> 
> 赞同：1
> 
> 时间：2013-03-18T23:57:44.560
> 
> 标签：ruby-on-rails, forms, filepicker.io

我正在使用`<%= form_for(@project) do |f| %>`Rails 中的 filepicker.io 制作一个表单，我有一行：

```
<%= f.filepicker_field :avatar_url%> 
```

图像加载完成后，我想使用 JavaScript 将上传图像的 URL 从文件选择器传送到我的代码中的图像标记中。但是，我似乎无法找到将该 URL 添加到 HTML 代码以在表单中提交的位置。有谁知道如何找到该新图像链接，或者如果它在上传后没有添加到 HTML 中，如何将新 URL 返回到表单以供 JavaScript 使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T17:44:36.623

您需要添加 `"onchange: 'onImageUpload()'"` 将捕获“更改”事件的事件侦听器，并在您将获得的功能处

```
window.onImageUpload = ->
  file = event.fpfile
  img = $("<img>").prop("src", file.url)
  $(event.target).parent().append(img) 
```

[https://developers.inkfilepicker.com/docs/web/#widgets-pick](https://developers.inkfilepicker.com/docs/web/#widgets-pick)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:07:56.153

如[文档](https://github.com/Filepicker/filepicker-rails)中所述，图像 url 可在`@project.avatar_url`.

您需要在保存对象之前检查图像是否已上传，如果您想在提交表单之前显示它。

# java - 在 Java 中显示 JPanel 上方法的输出

> ID：15489172
> 
> 赞同：0
> 
> 时间：2013-03-18T23:58:16.843
> 
> 标签：java, swing

我有一个 GUI，它从文本区域获取输入，然后单击按钮生成报告。该报告应该显示在输入区域下方。单击按钮后，输入数据将传递给名为 Calculate() 的 void 方法，现在正确的结果通过 System.out.printf() 显示在控制台上。如何将此输出重定向到报告区域？

```
public class Progress extends JFrame
{
   JTextArea input;
   JButton calculate;
   JPanel report;

   public void Notify()
     {
         calculate = new JButton("Calculate");
        calculate.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                Calculate();
            }
        });
     }
}

...

public void Calculate()
    {
        GenerateReport m = new GenerateReport();
        m.Parsecsv(input.getText());

    } 
```

所以，作为 Java 的新手，我想知道如何将 Calculate() 方法的输出重定向到报告面板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:37:15.840

那么您可以修改您的计算以返回一个包含您要打印到文本区域的信息的字符串。我假设您知道如何创建非 void 的简单方法并返回数据类型：

```
public String Calculate() { 
    <something to get the text needed is done here>
    return <text from report>;
} 
```

然后您可以制作一个“JOptionPane.showMessageDialog(Calculate())”来显示报告，或者您可以如上所述创建一个 JLabel 以在您使用的框架内打印报告。

就像是：

```
JLabel lab1 = new JLabel(null, Calculate() ); 
```

如果我理解你的话？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:01:59.497

我想你想问的是，“什么是 JLabel？”。您可以使用 JLabel 从计算方法中输出文本。或者你可以从你的计算方法中返回一个字符串，并以其他方式显示它。

# c++ - 使用用户定义的类作为参数进行模板化

> ID：15489174
> 
> 赞同：0
> 
> 时间：2013-03-18T23:58:37.320
> 
> 标签：c++, templating

我在模板和组合式编码方面遇到了一些麻烦。我在另一个带有 *this 参数的构造函数中创建了一个对象。对不起，如果我不清楚。代码如下：

在 external.h 文件中：

```
class outer {
  public:
    outer(int w, int l);
    int getWidth();
    int getLength();
  private:
    inner<outer> test(*this);
    int width;
    int length;
};

outer::outer(int w, int l) {
  width = w;
  length = l;
}

int outer::getLength() {
  return length;
} 
```

在 inner.h 文件中

```
template<typename T>
class inner {
  public:
    inner(T &name);
  private:
    int top;
    int bot;
};

template<typename T>
inner<T>::inner(T &name) {
    top = name.getLength() /2;
    bot = -name.getLength() / 2;
} 
```

我不知道这是否被允许，因为我在网上找不到任何解决这个问题的东西。编译器在 outer.h 中的 *this 语句存在问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:04:07.747

如果您使用的是 C++03，则必须在构造函数中执行初始赋值。

```
class outer {
  public:
    outer(int w, int l);
    int getWidth();
    int getLength();
  private:
    // Member variables are initialized in the order they are declared here.
    int width;
    int length;
    inner<outer> test;
};

outer::outer(int w, int l)
  : width(w)
  , length(l)
  , test(*this)
{
} 
```

**编辑：** Kerrek SB 还观察到需要更改变量的顺序。它们按照您在类中声明它们的顺序进行初始化，并且`test` **需要**最后初始化，因此初始化其他变量。

# php - getJSON 无法与 codeigniter 一起正常工作

> ID：15489175
> 
> 赞同：1
> 
> 时间：2013-03-18T23:58:41.937
> 
> 标签：php, ajax, json, codeigniter

我正在尝试使用 codeigniter 在我的网站中实现 AJAX 调用方法，我想使用 AJAX 的原因是我可以从数据库中获取实时更新

单击按钮可以工作并显示所有 JSON 数据，但问题是当我尝试显示它无法识别的特定数组时，它似乎在遍历每个字符。

另一个奇怪的事情是当警报被调用时，我可以看到我希望能够打印特定数组的 html 和 head 标签，例如数组 id”

我为尝试解决问题所做的事情

*   我已经提醒了数据类型，发现它是一个字符串

*   我已经设法让 ajax 在常规 PHP 中工作，而不是在 codeigniter 中工作，所以他们的数据库没有问题

*   我也尝试过使用 jQuery.parseJSON 所以我可以强制它是 json 但是脚本没有运行

*   我使用了 JSONlint，显然它是一个有效的 JSON

任何帮助，将不胜感激

控制台日志

```
<html>
    <head>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAXpGbk1wkkaPiv_qkBevxAP9s4kk0oiiU&sensor=false"></script>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

[
[
    {
        "id": "1",
        "postcode": "NW6",
        "imgurl": "hello.jpeg",
        "from_user": "henny",
        "created_at": "2013-03-18 23:03:00"
    },
    {
        "id": "2",
        "postcode": "NW2",
        "imgurl": "test.jpeg",
        "from_user": "belly",
        "created_at": "2013-03-15 23:03:00"
    }
]
] 
```

控制器

```
public function insertJSON()
{
    $this->load->model("values");
    $queryresults = $this->values->getDb();

    $arrays = array($queryresults);

    echo json_encode($arrays);  
} 
```

看法

```
<script type='text/javascript' language='javascript'>

  $('#getdata').click(function (data) {

      $.ajax({

          url: '<?php echo base_url().'index.php/welcome/insertJSON';?>',
          type: 'POST',
          cache: 'false',
          datatype: 'json'

      }).done(function (data) {

         alert(data);

      });

  });

</script> 
```

json_encode

```
[
[
    {
        "id": "1",
        "postcode": "NW6",
        "imgurl": "hello.jpeg",
        "from_user": "henny",
        "created_at": "2013-03-18 23:03:00"
    },
    {
        "id": "2",
        "postcode": "NW2",
        "imgurl": "test.jpeg",
        "from_user": "belly",
        "created_at": "2013-03-15 23:03:00"
    }
]
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:26:22.990

您需要从您的控制器函数发回正确的响应标头（应用程序/json）。

尝试将您的控制器更改为以下内容：

```
public function insertJSON()
{
    $this->load->model("values");
    $queryresults = $this->values->getDb();

    $arrays = array($queryresults);

    $this->output->set_content_type('application/json')
                 ->set_output(json_encode($arrays));
} 
```

# python - 从csv文件中提取字母数字文本

> ID：15489177
> 
> 赞同：-2
> 
> 时间：2013-03-18T23:59:12.520
> 
> 标签：python, perl

我有一个位置网格（AI 和 1-9），在平面文件 (*.csv) 中以各种形式引用，有时包括空格和随机大小写，例如：9-H、@ b 3、e -4, d4, c6, 5h, C2, i9, ... 是 a 到 i 和 1 到 9 的任意组合，包括空格、~@ 和 -。

处理提取此类字母数字字符的好方法是什么？理想情况下，输出将在“Notes”之前的另一列或另一个文本文件中。我可以阅读脚本并弄清楚它们的作用，但还不足以编写它们。

示例输入文件：

```
Record  Notes
46651   Adrian reported green-pylons are in central rack. (e-4)
46652   Jose enetered location of triangles in the uppur corner. (b/c6)
46207   [Location: 5h] Gabe located the long pipes in the near the far corner.
46205   Committee-reports are in boxes in holding area, @ b 3).
45164   Caller-nu,mbers @ 1A
45165   All carbon rod tackles 3 F and short (top rack)
45166   USB(3 Port) in C2
45167   Full tackle in b2.
45168    5b; USB(4 port)
45073   SHOVELs+ KIPER ON PET-FOOD (@g6), ALSO ATTEMPT-STALL AND DRAWCORD.
45169   Persistent CORDS ~i9
45170   Deliverate handball moved to D-2 on instructions from Pete
45440   slides and overheads + contact-sheets to 9-H (top bin).
45441   d7-slides and negatives (black and white)
<eof> 
```

所需的输出（以字母数字格式，在同一文件或新文件中）

```
Record  Location    Notes  
46651   E4  
46652   C6  
46205   A1  
...  
46169   I9 
```

也就是说，总是提取后一组字符。

好的，伙计们，在出现“在模式匹配 (m//) 中使用未初始化的值 $note”错误后，我继续尝试并部分成功。

```
#   # starts with anything then space or punctuation then letter then number
if ($note =~ /.*[\s\~\p{Punct}]([a-iA-I])[\s\p{Punct}]*([0-9]).*/) {
    $note =~ s/.*[\s\~\p{Punct}]([a-iA-I])[\s\p{Punct}]*([0-9]).*/$1$2/x;

#   # starts line with letter then number
} elsif ($note =~ /^([a-iA-I])[\s\p{Punct}]*([0-9]).*/) {
   $note =~ s/^([a-iA-I])[\s\p{Punct}]*([0-9]).*/$1$2/x;

#   # after punctuation then number
} elsif ($note =~ /.*[\s\p{Punct}]([0-9])[\s\p{Punct}]*([a-iA-I]).*/) {
   $note =~ s/.*[\s\p{Punct}]([0-9])[\s\p{Punct}]*([a-iA-I]).*/$2$1/x;

#   # beginning of line with number
} elsif ($note =~ /^([0-9])[\s\p{Punct}]*([a-iA-I]).*/) {
    $note =~ s/^([0-9])[\s\p{Punct}]*([a-iA-I]).*/$2$1/x;

#   # empty line or no record of any grid location except "#7 asdfg" format
} elsif  ($note=~ "") {
    $note = "##";

} 
```

脚本不太成功的时候是遇到99994、99993等记录的时候。

99999 norecordofgridhere --
99998
99997 box #7 进入了没有发票的数组。
当我发现场外时，99996 在 h 7 中下降，coachela 在 e 8 中。
99994 纸箱在办公室 4 个桶后
99993 6 箱在办公室文件柜顶架

现在的输出是：

99999 ## norecordofgridhere --
99998 ##
99997 E 7 框 #7 输入了没有发票的数组。
当我发现场外时，99996 E 8 在 h 7 中下降，coachela 在 e 8 中。
99994 B 4 纸箱在办公室后 4 桶
99993 B 6 6 箱在办公室文件柜顶架

99994 和 99993 应该有 #s。我在哪里失败了？我应该如何解决这个问题？

我认为，有一种更清洁的方法，例如使用 Text::CSV_XS，但是，即使在测试模块已正确安装后，我也遇到了草莓 perl 的故障。所以我回到了activestateperl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:19:51.090

```
...

my $coord;
if ($note =~ /
   (?&DEL)

   ( (?&ROW) (?&SEP)?+ (?&COL)
   | (?&COL) (?&SEP)?+ (?&ROW)
   )

   (?&DEL)

   (?(DEFINE)
      (?<ROW> [a-hA-H]    )
      (?<COL> [1-9]       )
      (?<SEP> [\s~\@\-]++ )
      (?<DEL> ^ | \W | \z )
   )
/x) {
    $coord = $1;
    ( my $row = uc($coord) ) =~ s/[^A-H]//g;
    ( my $col = uc($coord) ) =~ s/[^1-9]//g;
    $coord = "$row$col";
}

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:06:24.430

使用[Text::CSV_XS](https://metacpan.org/module/Text%3a%3aCSV_XS)解析 CSV 文件，既快速又准确。

然后构建一个正则表达式来匹配 ID。

最后，规范化每个 ID。

```
#!/usr/bin/perl

use v5.10;
use strict;
use warnings;
use autodie;

use Text::CSV_XS;

# Build up the regular expression to look for IDs
my $Separator_Set  = qr{ [- ] }x;
my $ID_Letters_Set = qr{ [a-i] }xi;
my $ID_Numbers_Set = qr{ [1-9] }x;
my $Location_Re = qr{
    \b
    $ID_Letters_Set $Separator_Set? $ID_Numbers_Set |
    $ID_Numbers_Set $Separator_Set? $ID_Letters_Set
    \b
}x;

# Initialize Text::CSV_XS and tell it this is a tab separated CSV
my $csv = Text::CSV_XS->new({
    sep_char => "\t",   # tab separated fields
}) or die "Cannot use CSV: ".Text::CSV_XS->error_diag ();

# Read in and discard the CSV header line.
my $headers = $csv->getline(*DATA);

# Output our own header line    
say "Record\tLocation\tNotes";

# Read each CSV row, extract and normalize the ID, and output a new row.
while( my $row = $csv->getline(*DATA) ) {
    my($record, $notes) = @$row;

    # Extract and normalize the ID
    my($id) = $notes =~ /($Location_Re)/;
    $id = normalize_id($id);

    # Output a new row
    printf "%d\t%s\t%s\n", $record, $id, $notes;
}

sub normalize_id {
    my $id = shift;

    # Return empty string if we were passed in a blank
    return '' if !defined $id or !length $id or $id !~ /\S/;

    my($letter) = $id =~ /($ID_Letters_Set)/;
    my($number) = $id =~ /($ID_Numbers_Set)/;

    return uc($letter).$number;
}

__END__
Record  Notes
46651   Adrian reported green-pylons are in central rack. (e-4)
46652   Jose enetered location of triangles in the uppur corner. (b/c6)
46207   [Location: 5h] Gabe located the long pipes in the near the far corner.
46205   Committee-reports are in boxes in holding area, @ b 3).
45164   Caller-nu,mbers @ 1A
45165   All carbon rod tackles 3 F and short (top rack)
45166   USB(3 Port) in C2
45167   Full tackle in b2.
45168    5b; USB(4 port)
45073   SHOVELs+ KIPER ON PET-FOOD (@g6), ALSO ATTEMPT-STALL AND DRAWCORD.
45169   Persistent CORDS ~i9
45170   Deliverate handball moved to D-2 on instructions from Pete
45440   slides and overheads + contact-sheets to 9-H (top bin).
45441   d7-slides and negatives (black and white) 
```

# actionscript-3 - AS3：移除时的奇怪实例名称行为

> ID：15489180
> 
> 赞同：0
> 
> 时间：2013-03-18T23:59:36.997
> 
> 标签：actionscript-3, actionscript

所以我把我的问题缩小到这个：

我有两个电影剪辑实例（“content1”，“content2”）添加到两个不同的其他电影剪辑（“container1”，“container2”）中。我想删除它们。

一旦我用这个可怕的命令删除其中一个......

```
MovieClip(MovieClip(root).getChildByName("container1")).removeChild(MovieClip(MovieClip(root).getChildByName("container1")).getChildByName("content1")); 
```

...它的另一个实例将其实例名称更改为通用名称（如“instance25”），我无法再使用 getChildByName 访问它。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:13:50.093

我从未经历过这种行为 - 无论如何，您可以做的是在删除它们之前存储对两者的引用。这样，您将不需要它们的原始实例名称来删除两者：

```
var top:MovieClip = root as MovieClip;

var cotainer:MovieClip = top.container1;
var content1:MovieClip = container.getChildByName("content1");
var content2:MovieClip = container.getChildByName("content2");

container.removeChild(content1);
container.removeChild(content2); 
```

希望这个答案能给你一些提示，让你的代码也更具可读性。

# javascript - jQuery UI - 旋转文本

> ID：15489181
> 
> 赞同：1
> 
> 时间：2013-03-18T23:59:43.807
> 
> 标签：javascript, jquery, jquery-ui

使用 jQuery UI，我正在尝试这样做：当我将鼠标悬停在文本上时，我希望文本淡出并让另一个文本淡入（替换旧文本）。这可以用标准的 jQuery 轻松完成，**但**我想为淡入淡出的文本添加一些效果：我最想要的是每个字母都通过自身旋转而消失，这是经典**马赛克效果**和**字谜**的结合在主题演讲中的**效果。**

我可以利用 SO 人的好意吗：有没有一种简单的方法可以搜索 jQuery UI 提供的所有功能？我的意思是，我可以在某处搜索“文本效果”并找到所有适用于文本的效果吗？

# javascript - 从 QUnit 调用时调用 trigger() 并不总是触发

> ID：15489182
> 
> 赞同：2
> 
> 时间：2013-03-18T23:59:54.023
> 
> 标签：javascript, jquery, tdd, local-storage, qunit

虽然我过去使用过 QUnit，但我已经有一年没有真正使用它了，所以我希望这是一件微不足道的事情！

我有一堆运行良好的 QUnit 测试，除了每次加载页面时都会失败的测试。如果我刷新，测试有效，但如果我再次刷新它会中断！它变得可以预测，但我不明白为什么它不起作用。有问题的测试应该使用一个`trigger('change')`事件，但这只会每隔一次触发一次。

我有一个动态填充的`select`，我将一个`change`事件绑定到。它所做的所有事情都将值保存到`localStorage`并且我刚刚检查了该值是否已设置的测试。

示例 HTML：

```
<select id="options">
    <option value="">Please choose</option>
</select>
<p id="result"></p> 
```

示例 JS：

```
$(document).ready(function() {
    var data = {
        1: 'Option 1',
        2: 'Option 2',
        3: 'Option 3'
    }
    for(var d in data) {
        $('#options').append($('<option>').val(d).text(data[d]));
    }
    $('#options').on('change', function() {
        $('#result').text(this.value);
        if(this.value != '') {
            localStorage.setItem('optionValue') = this.value;
        } else {
            throw 'You must choose a team';
        }
    });
}); 
```

示例 QUnit 测试：

```
test('Test some other stuff', function(assert) {
    localStorage.removeItem('optionValue');
    // some tests to check things have worked correctly
});

test('Is value added to localStorage?', 2, function(assert) {
    throws(function() { throw new $('#chooseTeam').val('').change(); }, 'No option selected');
    $('#options').val(1).trigger('change');
    equal(localStorage.getItem('optionValue'), 1, 'The first item should be selected');
}); 
```

但是，QUnit 输出中的结果是`undefined`. 我将其缩小到第一个测试，然后能够看到它`localStorage.removeItem('optionValue')`是每次调用的行，但更改事件仅每隔一次触发一次。

我创建了一个 JS fiddle 来尝试演示问题： http: [//jsfiddle.net/cchana/zqNtU/3/](http://jsfiddle.net/cchana/zqNtU/3/)（演示显示了它应该如何工作，但不是失败的测试）

有什么明显的东西会让这个失败吗？

**更新**

以为我应该更新一些可能有帮助的信息...

在更改方法中，我添加了一个`console.log()`，如下所示：

```
$('#options').on('change', function() {
    console.log('here');
}); 
```

我只是想检查一下 change 事件是否真的被触发了，但正如测试显示的那样，该方法只是每隔一次触发一次。

**更新 2**

为了让我的测试通过，我删除了`localStorage.removeItem('optionValue');`不理想的行，如果可能的话，我仍然想深入了解它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T14:48:45.927

**[我从这篇文章中](http://blog.rojakcoder.com/2012/08/14/solving-the-mystery-behind-alternating-failed-tests-in-qunit/)找到了答案（解决了在 qunit 中交替失败测试背后的奥秘）**

为了解释原因，您可能有一个回调/插件自动绑定到页面上的现有元素。因此，当包含插件的文件包含在页面中时，元素会自动绑定。

因此，当您第一次运行测试时，它会失败。为什么？！原因是当测试运行时，测试工具中的元素似乎在每次运行测试时重新创建。因此，当重新创建它们时，不会发生自动绑定，因为 JavaScript 文件已经包含在内。

如果是这样，那么为什么它在交替调用上起作用？啊……这就是魔法。为了提高测试效率，QUnit 会在页面刷新时在其他测试之前运行失败的测试。因此，当失败的测试在其他测试之前执行时，测试工具中已经存在的元素被绑定，因此，测试通过了！但是因为这些测试现在通过了，当页面被刷新时，它们会回到原来的顺序，因此它们现在失败了！

当然有了这个认识，它促使我更有效地重写插件。希望这种自我发现对那里的人有所帮助！祝测试愉快！

我希望这可以帮助你。

# r - 从数据框中删除重复单元

> ID：15489185
> 
> 赞同：1
> 
> 时间：2013-03-19T00:00:13.487
> 
> 标签：r, duplicates, bigdata, duplicate-removal

我正在处理具有 n 个协变量的大型数据集。许多行是重复的。为了识别重复项，我需要使用协变量的子集来创建识别变量。也就是说，(nx) 个协变量是不相关的。我想连接 x 协变量上的值以唯一标识观察结果并消除重复项。

```
set.seed(1234)
UNIT <- c(1,1,1,1,2,2,2,3,3,3,4,4,4,5,6,6,6)
DATE <- c("1/1/2010","1/1/2010","1/1/2010","1/2/2012","1/2/2009","1/2/2004","1/2/2005","1/2/2005",
      "1/1/2011","1/1/2011","1/1/2011","1/1/2009","1/1/2008","1/1/2008","1/1/2012","1/1/2013",
      "1/1/2012")
OUT1 <- c(300,400,400,400,600,700,700,800,800,800,900,700,700,100,100,100,500)
JUNK1 <- c(rnorm(17,0,1))
JUNK2 <- c(rnorm(17,0,1))

test = data.frame(UNIT,DATE,OUT1,JUNK1,JUNK2) 
```

'test' 是一个示例数据框。我需要用来唯一标识观察的变量是“UNIT”、“DATE”和“OUT1”。例如，

```
head(test)
  UNIT     DATE OUT1      JUNK1      JUNK2
1    1 1/1/2010  300 -1.2070657 -0.9111954
2    1 1/1/2010  400  0.2774292 -0.8371717
3    1 1/1/2010  400  1.0844412  2.4158352
4    1 1/2/2012  400 -2.3456977  0.1340882
5    2 1/2/2009  600  0.4291247 -0.4906859
6    2 1/2/2004  700  0.5060559 -0.4405479 
```

观察 1 和 4 在数据集中不是重复的。观察 2 和 3 是重复的。我要创建的新数据集将保留观察值 1 和 4，并且*仅*保留2 和 3 之一。我尝试过的解决方案是：

```
subset(test, !duplicated(c(UNIT,DATE,OUT1))) 
```

不幸的是，这并不能解决问题：

```
 UNIT     DATE OUT1       JUNK1      JUNK2
1        1 1/1/2010  300 -1.20706575 -0.9111954
5        2 1/2/2009  600  0.42912469 -0.4906859
8        3 1/2/2005  800 -0.54663186 -0.6937202
11       4 1/1/2011  900 -0.47719270 -1.0236557
14       5 1/1/2008  100  0.06445882  1.1022975
15       6 1/1/2012  100  0.95949406 -0.4755931 
```

尽管它确实忽略了不相关的变量 (JUNK1, JUNK2) ，但该技术过于贪婪。新数据集应包含对单元 1 的三个观察值，因为当 UNIT = 1 时存在 UNIT + DATE + OUT1 的三个唯一组合。有没有办法在不编写函数的情况下实现这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T00:03:41.523

你可以传递一个`data.frame`到`duplicated`

在你的情况下，你想通过前 3 列`test`

```
 test2 <- test[!duplicated(test[,1:3]),] 
```

如果您使用的是大数据，并且想要接受`data.tables`，那么您可以将键设置为前三列（您要从中删除重复项），然后使用`unique`

```
library(data.table)
DT <- data.table(test)
# set the key
setkey(DT, UNIT,DATE,OUT1)
DTU <- unique(DT) 
```

有关重复项和 data.tables 的更多详细信息，请参阅[过滤掉 data.table 中的重复/非唯一行](https://stackoverflow.com/questions/11792527/filtering-out-duplicated-non-unique-rows-in-data-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:35:07.527

谢谢！看起来我们可以这样做：

```
test2 <- test[!duplicated(test[,c("OUT1","DATE","UNIT")]),] 
```

它也交付货物。所以，我们可以只使用列名而不是 1:3，顺序无关紧要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T01:18:49.887

您可以`distinct()`从[dplyr](http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html)包中使用：

```
library(dplyr)
test %>%
  distinct(UNIT, DATE, OUT1) 
```

或者没有`%>%`管道：

```
distinct(test, UNIT, DATE, OUT1) 
```

# installation - 写入文件夹导致错误代码 80

> ID：15489186
> 
> 赞同：0
> 
> 时间：2013-03-19T00:00:15.640
> 
> 标签：installation, nsis

当我尝试复制/覆盖文件夹时，我的 NSIS 安装程序给出了错误代码 80。我认为这可能与我试图复制到用户 HD 的文件夹已经存在有关。但就我而言，我总是想覆盖它。

错误代码 80 是什么意思？

这是我的代码：

```
# Write plugins to EXDS_Customisation\EXDS_USER\
ClearErrors
SetOverwrite try
SetOutPath "$INSTDIR\EXDS_User\"
FILE /r "${localInstallDir}\EXDS_Customisation\EXDS_User\${MAINPLUGINSDIR}"

${If} ${Errors}
    System::Call "Kernel32::GetLastError() i() .r1"
    # Prints: "Error code: 80"
    MessageBox MB_ICONINFORMATION|MB_OK "Error code: $1 "
        Quit
${EndIf} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:48:22.883

如果您总是想覆盖，为什么要使用`Try`而不是`SetOverwrite On`？

使用`System::Call "Kernel32::GetLastError()...`永远**无效**。System::Call 有一个特殊`?e`选项，但在您的情况下没有用。您无法从 NSIS 获取特定的错误信息，您所拥有的只是错误标志...

# java - 如何自动杀死孤立的 Java 进程

> ID：15489193
> 
> 赞同：0
> 
> 时间：2013-03-19T00:01:15.580
> 
> 标签：java

我以前发布过这个问题，但没有得到我想要的答案。我现在遇到的问题是有许多 Java 进程被孤立了。这在 Linux 和 Windows 上都是如此。我需要一种方法来查找哪些 Java 进程是孤立的并杀死它们。

注意：我无法更改 Java 代码，因为我无法在任何级别访问它。我只是在我的机器上运行一些测试。我知道像这样的解决方案 [使用 Java 杀死一个进程，](https://stackoverflow.com/questions/6356340/killing-a-process-using-java/6356410#6356410) 但这不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:22:05.480

在 Linux 上，一个孤立进程成为 的子进程`init`，它的 pid 始终为 1。要杀死作为 init 子进程的 java 进程，您可以使用 pkill：

```
pkill --parent 1 java 
```

例如，要自动执行此操作，您可以将此命令添加到 cron。

# java - 删除 JTable 行

> ID：15489195
> 
> 赞同：0
> 
> 时间：2013-03-19T00:01:39.607
> 
> 标签：java, swing, jtable, row, abstracttablemodel

我正在研究 jTable，我打算删除特定的行，作为对表进行的数据操作的一部分。本质上，我已经能够成功删除用户指定的行，但我真正想做的是根据布尔状态或复选框删除几行，这些复选框被选为表的四列之一。

我附上了关于运行代码的当前结果的屏幕截图，并希望能够根据选定的布尔状态或复选框删除行。

下面是我的代码，包括我的表模型代码，它扩展了 AbstractTableModel：

```
package com.TableRowSelectProgramatically;

import javax.swing.*;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.AbstractTableModel;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Vector;

@SuppressWarnings("serial")
public class JTableRowSelectProgramatically extends JPanel {

    public MyTableModel MyTableModel;

    public String Cell1 = "ABCD";

    public JTableRowSelectProgramatically() {
        initializePanel();
    }

    private void initializePanel() {

        setLayout(null);
        setPreferredSize(new Dimension(1250, 700));

        // Table model
        MyTableModel = new MyTableModel();

        // Table
        final JTable table = new JTable(MyTableModel);
        table.setFillsViewportHeight(true);

        // Row data
        Object[] values = {Cell1, "EFGH", "IJKL", new Boolean(false)};
        Object[] values2 = {"UVWX","QRST","MNOP", new Boolean(false)};
        Object[] values3 = {"ABCD","YZAB","CDEF", new Boolean(false)};
        final Object[] values4 = {"QWERTY","YTREWQ","QWERTY", new Boolean(false)};

        // Insert row data
        MyTableModel CustomTableModel = (MyTableModel) table.getModel();
        CustomTableModel.insertData(values);
        CustomTableModel.insertData(values2);
        CustomTableModel.insertData(values3);
        CustomTableModel.insertData(values);
        CustomTableModel.insertData(values2);
        CustomTableModel.insertData(values3);
        CustomTableModel.insertData(values);
        CustomTableModel.insertData(values2);
        CustomTableModel.insertData(values3);

        // Create edit menu label
        JLabel labelEditMenu = new JLabel("EDIT MENU:\n");

        // Create add row btn
        JButton addRow = new JButton("Add Row");

        // Attach listener for add row btn
        addRow.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                MyTableModel.insertData(values4);
            }
        });

        // Create delete row btn
        JButton deleteRow = new JButton("Delete Row");

        // Attach listener for delete btn
        deleteRow.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                MyTableModel.removeRow(1);
            }
        });

        // Create scroll pane
        JScrollPane pane = new JScrollPane(table);
        pane.setBounds(30, 30, 500, 500);

        // 
        JTextField AgentIDTextField = new JTextField();

        // Populate the JPanel
        JPanel dataEntryPanel = new JPanel(new FlowLayout());
        //dataEntryPanel.setBackground(Color.orange);
        dataEntryPanel.setBounds(540, 30, 500, 50);
        //dataEntryPanel.add(AgentIDTextField);
        dataEntryPanel.add(labelEditMenu);
        dataEntryPanel.add(addRow);
        dataEntryPanel.add(deleteRow);

        // Join up GUI
        add(pane);
        add(dataEntryPanel);
    }

    // Enable visibity of frame
    public static void showFrame() {
        JPanel panel = new JTableRowSelectProgramatically();

        JFrame frame = new JFrame("Test table");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(panel);
        frame.pack();
        frame.setVisible(true);
    }

    // Launch prog
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JTableRowSelectProgramatically.showFrame();
            }
        });
    }

    // Create custom table model for data entry
    class MyTableModel extends AbstractTableModel {

         private String[] columnNames = {"COLUMN 0", "COLUMN 1", "COLUMN 2", "COLUMN 3"};
         private Vector data = new Vector();

         @Override
         public int getRowCount() {
            return data.size();
         }

         @Override
         public int getColumnCount() {
             return columnNames.length;
         }

         @SuppressWarnings("rawtypes")
        @Override
         public Object getValueAt(int row, int col) {
             return ((Vector) data.get(row)).get(col);
         }

         public String getColumnName(int col){
             return columnNames[col];
         }

         public Class getColumnClass(int c){
             return getValueAt(0,c).getClass();
         }

         public void setValueAt(Object value, int row, int col){
             ((Vector) data.get(row)).setElementAt(value, col);
             fireTableCellUpdated(row,col);
         }

         public boolean isCellEditable(int row, int col){
             if (3 == col){
                 return true;
             }
             else {
                return false;
             }
         }

         public void insertData(Object[] values){
             data.add(new Vector());

             for(int i =0; i<values.length; i++){

                 System.out.println("data.size is: " + data.size());
                 ((Vector) data.get(data.size()-1)).add(values[i]);
             }

             fireTableDataChanged();
         }

         public void removeRow(int row){
             data.removeElementAt(row);
             fireTableDataChanged();
         }
     }
} 
```

删除 JTable 行的新尝试：

```
 public void deleteRow() {
 for (int i = 0; i < getRowCount(); i++) {

     Object columnState = getValueAt(i, 3);

     System.out.println("STEP 6 - In row " + i + " boolean value is: " + columnState);

     boolean columnStateAsBoolean = (Boolean) columnState;

     System.out.println("STEP 6 - In row " + i + " Column State As Boolean is: " + columnStateAsBoolean);

     if(columnStateAsBoolean == true) {
         removeRow(i);                   
     }

     System.out.println("-------------------------------------");
 } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:42:07.110

> 我真正想做的是根据布尔状态或复选框删除几行

创建一个从最后一行开始并倒计时到 0 的循环。

然后对于每一行，您使用 table.getValueAt(...) 方法来获取列的布尔值。

如果该值为 true，则删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T12:07:42.500

//尝试这样的事情

```
 int rowCount=table.getSelectedRowCount();//get selected row's count
    int row;
    if(rowCount>0)
    {
       while((row=table.getSelectedRow())!=-1)
        (DefaultTableModel)table.getModel().removeRow(table.convertRowIndexToModel(row));

    } 
```

# vim - vim远程文件保存太慢

> ID：15489198
> 
> 赞同：0
> 
> 时间：2013-03-19T00:02:01.340
> 
> 标签：vim

我正在使用 VIM 处理远程文件。当我保存任何文件（：w）时，更改不会立即生效。例如，如果我更改 html 或 css 文件，并且当我尝试在浏览器上查看更改时，它不会在我的第一个保存命令 (:w) 后显示更改。我再次转到 VIM 并通过 :w 再次保存它。然后我可以看到更改，有时需要应用 3/4 次 :w 才能看到更改。

谁能告诉我保存远程文件的实际过程，以便在保存文件后我可以看到我的更改。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:09:58.517

这听起来像是浏览器缓存的问题。`Ctrl`+`F5`或`Shift`+`F5`应该在没有缓存的情况下在 Chrome 中重新加载页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:18:46.990

Vim 通常将更改保存到磁盘上`:w`（本地或远程主机上的写入操作）。

如果您正在编辑远程文件，则可能使用`Shift`+`Z``Z`保存并退出文件 - 这样您就会知道在 vim 退出之前更改已保存。

如果它是您正在编辑的 HTML 文件，请尝试将以下标签添加到您的代码中（在 中`<head>`）：

```
 <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" CONTENT="-1"> 
```

这应该防止浏览器进行任何自动（或配置）缓存。缓存控制也可以通过使用大多数脚本语言来实现。

# machine-learning - Weka：过于乐观的结果

> ID：15489199
> 
> 赞同：1
> 
> 时间：2013-03-19T00:02:12.937
> 
> 标签：machine-learning, classification, weka, svm, evaluation

我正在使用 Weka 做一些分类任务。当我使用 SVM 时，误报率为 0。这对我来说对分类任务非常乐观。另外，在我之前的一些实验中，我看到了乐观的结果，比如精确度和召回分数为 100。我的问题是——如果你有这样乐观的结果，发生这种情况的可能性有多大？补救措施是什么？

# google-chrome - 嵌入式 Youtube 播放器仅在 Firefox 中播放音频

> ID：15489202
> 
> 赞同：1
> 
> 时间：2013-03-19T00:02:35.663
> 
> 标签：google-chrome, firefox, youtube, playback

## **问题**

嵌入式 Youtube Flash 播放器仅播放音频并在 Firefox 中显示视频应位于的黑框。

* * *

**网站：** [Nexus Gaming Media](http://nexus-media.org/ "Nexus 游戏媒体")

要查看问题，请尝试播放上述主页加载时出现的视频（在 Firefox 中）。音频工作正常，但视频应该有一个黑匣子。

尽管存在上述问题，但其他嵌入式视频在 Firefox 中对我来说效果很好。比如这里嵌入的视频：[https ://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

**经测试的 Flash 播放器版本：** 11.6.602.180 和 11.7.700.141（11.7 beta）

**我试过的：**

*   重新安装 Flash 播放器
*   使用测试版 Flash 播放器
*   删除所有 Flash Player 缓存文件
*   Firefox 中的多个配置文件
*   修改 CSS 值
*   在 Firefox 中使用隐私浏览窗口
*   以默认主题和禁用所有附加组件的安全模式启动 Firefox

每次修改后我都会清除历史记录和缓存，然后重新启动浏览器。视频播放在 Google Chrome 中对我来说很好（请注意，我禁用了 pepflashplayer）。有谁知道是什么导致嵌入式播放器在 Chrome 中工作但在 Firefox 中不工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:25:37.677

您是否尝试将 wmode 设置为查询字符串？（即'?wmode=transparent'）

# css - 下划线 css3 过渡

> ID：15489203
> 
> 赞同：13
> 
> 时间：2013-03-19T00:02:41.930
> 
> 标签：css, css-transitions, underline

如何在 CSS3中从左到右创建*下划线动画？*`hover`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-19T10:43:59.933

这是一个非常棘手的问题。

我能想出的唯一解决方案是转换 a `border-bottom`on`:hover`或者我实际上应该说我正在转换`border-bottom`，`width`并`margin-right`使其`border-bottom`出现并同时保持，在这种情况下，链接对齐。

很难解释，所以我做了一个简单的例子，它并不完美，看起来有点乱，但至少它说明了我的意思。:-)

[小提琴](http://jsfiddle.net/46a8u/)

HTML

```
<a href="#">Link</a><a href="#">Link</a> 
```

CSS

```
a {
    text-decoration: none;
    display: inline-block;
    border-bottom: 1px solid blue;    
    margin-right: 39px; 
    width: 0px;
    -webkit-transition: 0.5s ease;
            transition: 0.5s ease;
}

a:hover {
    -webkit-transition: 0.5s ease;
            transition: 0.5s ease;
    border-bottom: 1px solid blue;
    width: 30px;
    margin-right: 9px;
} 
```

# c++ - Gtkmm TreeView：访问动态添加的列

> ID：15489207
> 
> 赞同：0
> 
> 时间：2013-03-19T00:02:51.890
> 
> 标签：c++, treeview, gtkmm

我目前这样做是为了`numCols`向 TreeView ( `ColumnRecord columns`) 添加列：

```
Gtk::TreeModelColumn<Glib::ustring>* c;
for( int i = 0; i < numCols; i++ ) {
    c = new Gtk::TreeModelColumn<Glib::ustring>();
    columns.add(*c);
    list.append_column(titles[i], *c);
    iss.clear();
} 
```

要使用预设的 ColumnRecord 在特定行和列中获取元素，我会执行类似`Gtk::TreeModel::Row row; row[columns.c1] = blah`. 但是，既然这些列没有命名，我将如何访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:38:38.807

首先，这里有潜在的内存泄漏。你是`newing`一个`TreeModelColumn`看起来永远不可能的`delete`事情。对于一个持续 GUI 生命周期的小部件，这可能没什么大不了的。另一种选择是使用 gtkmm 的[管理](https://developer.gnome.org/gtkmm-tutorial/unstable/sec-memory-widgets.html.en#memory-managed-widgets)功能并让它担心内存。

其次，为了解决您的问题，我过去处理这种情况的方式是将我的`TreeModelColumn`指针收集到 a中`std::vector`，`std::map`以便稍后访问它们。

# php - 检查函数以在 php 中构建函数

> ID：15489210
> 
> 赞同：-2
> 
> 时间：2013-03-19T00:02:56.807
> 
> 标签：php

好吧，我将向您展示一个非常简单的示例...

```
class menu_r {

    public function anuncio(){
        return $a;
    }

    public function peido(){
        return $b;
    }

    public function running(){

    if(self::anuncio()){
        $retorno.= self::anuncio();
    }

    if(self::peido()){
        $retorno.= self::peido();
    }

    return print $retorno;
} 
```

我正在使用

```
$a = new menu_r();
$a->anuncio();
$a->running(); 
```

我的问题是：我如何不显示 peido() ，因为他没有被使用？我尝试了很多但不能，试图get_class使用，isset，is_object并且没有工作= /

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:11:21.080

这应该这样做：

```
class menu_r {
    private $calledAnnuncio = false;
    private $calledPeido = false;

    public function anuncio() {
        $this->$calledAnnuncio = true;
        return $a;
    }

    public function peido() {
        $this->calledPeido = true;
        return $b;
    }

    public function running() {

        if ($this->calledAnnuncio) {
            $retorno.= self::anuncio();
        }

        if ($this->calledPeido) {
            $retorno.= self::peido();
        }

        return print $retorno;
    }

} 
```

在这里，我将“已调用某些特殊函数”状态保存在各自的私有变量中，并在调用 running() 时检查这些状态是否设置为 true，并且只有当状态设置为 true 时，我才会再次调用该函数。因此，如果在调用 running() 之前直接调用了一个函数，那么它将在 running() 函数中再次调用

# android - 我们如何在android中设置软件更新的警报？

> ID：15489212
> 
> 赞同：0
> 
> 时间：2013-03-19T00:03:26.853
> 
> 标签：android

我不想在工作时收到任何关于安卓软件更新的警报？那么，当我不想接收时区时，有什么方法可以设置时区吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:13:29.957

转到设置>关于手机>软件更新>取消选中自动更新。

# javascript - Canvas HTML5, IE vs Chrome vs FireFox - 字体和偏移属性

> ID：15489217
> 
> 赞同：2
> 
> 时间：2013-03-19T00:03:47.003
> 
> 标签：javascript, internet-explorer, google-chrome, firefox, html5-canvas

我开发了一个 HTML5 画布图，它检索 SQL 存储的信息并在 HTML5 画布上以图形方式（颜色编码）绘制它们。画布允许滚动时间轴以显示已发生的各种事件（例如 1990 年至 2013 年之间）。

IE 就像一个魅力。

Chrome 的上下文字体出现浑浊/出血效果的问题 - 我使用的是等宽 11px，后来我将其更改为 verdana，但使用 chrome 仍然有点浑浊。Firefox 没有这个问题。

Firefox 有一个问题，它会在画布上检索和绘制信息，但是当我单击画布以滚动时间轴上当前位置的过去或未来时，整个画布都会消失。Chrome 没有这个问题。

我试图解释我在这个问题上的问题，如果您需要更多说明，请询问。

这是示例代码：-

[http://jsfiddle.net/WNpKE/16/](http://jsfiddle.net/WNpKE/16/)

（如果您点击链接并在 IE、FireFox 和 Chrome 中打开它，我希望问题会更加明显。）

```
 // defining the canvas element
            var can = document.getElementById("myCanvas"),
                ctx = can.getContext("2d"),
                dragging = false,
                translated = 0,
                lastX = 0,
                grid = (function (dX, dY) {
                    var can = document.createElement("canvas"),
                        ctx = can.getContext('2d');
                    can.width = dX;
                    can.height = dY;
                    // fill canvas color
                    ctx.fillStyle = 'black';
                    ctx.fillRect(0, 0, dX, dY);

                    // x axis
                    ctx.strokeStyle = 'orange';
                    ctx.moveTo(.5, 0.5);
                    ctx.lineTo(dX + .5, 0.5);
                    ctx.stroke();

                    // y axis
                    ctx.moveTo(.5, .5);
                    ctx.lineTo(.5, dY + .5);
                    ctx.stroke();

                    return ctx.createPattern(can, 'repeat');
                })(72, 50);

            ctx.save();
            /*ctx.scale(1, -1);
            ctx.translate(0, -900);*/

            // when mouse is clicked on canvas
            can.onmousedown = function (e) {
                var evt = e || event;
                dragging = true;
                lastX = evt.offsetX;
            }

            // when mouse is clicked again and the canvas is deselected  
            window.onmouseup = function () {
                dragging = false;
            }

            window.onmousemove = function (e) {
                var evt = e || event;
                if (dragging) {
                    var delta = evt.offsetX - lastX;
                    translated += delta;
                    //console.log(translated);
                    ctx.restore();
                    ctx.clearRect(0, 0, 930, 900);
                    ctx.save();
                    ctx.translate(translated, 0);
                    lastX = evt.offsetX;
                    timeline();
                }
            }

            // Function that draws the timeline on the xy grid along with data points.
            function timeline() {

                // fill canvas color
                ctx.fillStyle = "black";
                ctx.fillRect(-translated, 0, 930, 900);
                ctx.fillStyle = grid;
                ctx.fillRect(-translated, -250, 930, 900);

                // y-co-ordinate texts - Home, Office, Emergency, etc...
                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Home", -translated, 510);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Office", -translated, 460);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Emergency", -translated, 410);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Foster Home", -translated, 360);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("SNF", -translated, 310);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("LTC", -translated, 260);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Drug/Rehab", -translated, 210);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Hospital", -translated, 160);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Hospice", -translated, 110);

                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("ANP Exams", -translated, 540);
                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Life Event", -translated, 560);
                ctx.strokeStyle = "White";
                ctx.font = "10px Verdana";
                ctx.strokeText("Care Plan", -translated, 610); 
```

自从这段代码以来，我已经改变了一些，但点击和滚动的基本思想仍然是一样的。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:39:43.467

使用`fillText`而不是`strokeText`.

发生 FF 错误是因为 FF 事件对象没有`offsetX`属性。改为使用`pageX`。

更新小提琴：http: [//jsfiddle.net/WNpKE/18/](http://jsfiddle.net/WNpKE/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:11:31.013

看看[highcharts](http://www.highcharts.com/) API。它是免费的，并且具有大量的功能。我最近在 Web 应用程序中使用它来查询 SQL 数据库中的数据，这与您正在做的事情不同。它适用于所有主要浏览器。

我猜画布元素（作为 html5 的新功能）在浏览器之间的呈现方式不同。您最好用 javascript / java 重写或直接使用 highcharts 框架。我意识到这不是解决您当前问题的方法，但它可能会为您节省一些时间。

祝你好运！

# java - 多维 ArrayList[][]，有可能吗？

> ID：15489224
> 
> 赞同：0
> 
> 时间：2013-03-19T00:04:18.973
> 
> 标签：java, list, multidimensional-array, arraylist

所以我的任务是为游戏制作场地。我可以在每个字段上有很多项目，并且字段的大小由用户选择。我的问题是我该怎么做。我尝试使用数组 ArrayList，但每次尝试向其添加值时，都会收到 NullPointException。我怎么解决这个问题？

这就是我想出的。'TypeInfo' 是一个数组字符串（问题不在其中，我检查了），但我在它的行得到了异常：

```
List<String[]>[][] items = new ArrayList[x][y];
itemBoard[0][1].add(typeInfo); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T00:05:39.883

当然，`itemBoard[0][1]`没有初始化任何东西。 `NullPointerException`表示某事是`null`，因此找到该`null`事物并确保它不是`null`。

```
List[][] items = new ArrayList[x][y];
itemBoard[0][1] = new ArrayList<>(); //java 7 shortcut
itemBoard[0][1].add(typeInfo); 
```

# bash - Bash：识别数组中的重复字符串

> ID：15489225
> 
> 赞同：1
> 
> 时间：2013-03-19T00:04:24.083
> 
> 标签：bash

我有一个脚本可以在开始视频编码之前检测裁剪值。我以一定的间隔进行几次探测，比如每 100 帧。如果所有探测帧的所有裁剪值都匹配，则没有问题，脚本将启动编码功能。如果裁剪值不同，则脚本退出并出现错误，我需要手动选择正确的裁剪值，这很烦人。

因此，与其因错误退出脚本，我宁愿选择“最佳”可能值，在这种情况下，它是重复次数最多的数字。

那么如何从集合中挑选出重复次数最多的字符串呢？

说，我将所有裁剪值放在一个数组中。裁剪=('3' '4' '3' '5' '7' '3' '7'); 所以在这种情况下，我会选择值“3”，因为它最常重复。如何在 Bash 中以编程方式执行此操作？

谢谢。

**- 编辑 -**

我很抱歉，为了简化我的问题，我可能会让你们中的一些人感到困惑。真正的作物值看起来像这样“720:568:0:4”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:20:35.367

使用关联数组的纯 bash 解决方案（需要 bash 版本 4）：

```
#! /bin/bash
crop=(3 4 3 5 7 3 7)
declare -A count
max=0
for c in "${crop[@]}" ; do
    (( count[$c]++ ))
    if (( count[$c] > max )) ; then
        max=${count[$c]}
        idx=$c
    fi
done
echo $idx 
```

# c - 锁定文件。首先要做什么？解锁还是关闭？

> ID：15489230
> 
> 赞同：1
> 
> 时间：2013-03-19T00:05:10.357
> 
> 标签：c, linux, locking, cgi-bin

我先解锁然后关闭。一个过程附加记录 ABCDEFGHIJ。另一个进程读取同一个文件并写入 ZZZZ。普通文件应该是 ZZZZ ABCDEFGHIJ

但只有一次我看到了以下内容： ZZZZEFGHIJ 所以记录 ABCDEFGHIJ 被 ZZZZ 损坏了。

看来我的锁定不起作用。但我测试了它。一个进程真的在等待另一个进程。另一个进程可以在打开和锁定之间写入文件吗？还是在解锁和关闭之间？

代码如下

```
int MyOpenWrite(char *name,int flags) {
int fd
fd = open(name,flags,S_IREAD|S_IWRITE|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH);
LockFile(fd);
return fd;
 }

int WriteFile(char *name, char *data) {
...
fd = MyOpenWrite(fullName,O_CREAT|O_WRONLY|O_TRUNC);
write(fd,data,strlen(data));
UnLockFile(fd);
close(fd);
}

int ReadFile(char *name, char *data, int maxLength) {
fd = open(name,O_RDONLY);
LockFile(fd);
...
UnLockFile(fd);
close(fd);
}

int AppendFile(char *name, char *data) {
fd = MyOpenWrite(fullName,O_WRONLY|O_APPEND);
...
len=write(fd,data,strlen(data));
UnLockFile(fd);
close(fd);
 }

int LockFile(int fd) {
struct flock    lock;
lock.l_type = F_WRLCK;
lock.l_start = 0;
lock.l_whence = SEEK_SET;
lock.l_len = 0;
return fcntl(fd,F_SETLKW,&lock);
}

int UnLockFile(int fd)  {
struct flock    lock;
lock.l_type = F_UNLCK;
lock.l_start = 0;
lock.l_whence = SEEK_SET;
lock.l_len = 0;
return fcntl(fd,F_SETLKW,&lock);
} 
```

我尝试关闭（fd）UnLock（fd）。它似乎有效。但是无论如何，打开和锁定之间存在延迟。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:43:11.710

只要您不`write(2)`打开文件（解锁后），您先解锁还是先解锁都没关系`close(2)`。

但是，`close(2)`-ing 文件会解锁它（至少在没有其他进程共享相同打开的文件描述符的情况下）。

见[fcntl(2)](http://man7.org/linux/man-pages/man2/fcntl.2.html)说

> ```
> As well as being removed by an explicit F_UNLCK, record locks are
> automatically released when the process terminates or if it closes any
> file descriptor referring to a file on which locks are held. 
> ```

### 附录：应该检查失败

请注意，您的代码缺少错误检查。几乎每个库函数或系统调用，特别是`fcntl`, `read`，`write`都可能失败（并设置`errno`为由例如显示`perror`或`strerror(errno)`在某些日志或打印中显示）。您不会`fcntl`在`LockFile`or`UnlockFile`函数中检查成功或失败，也不会在调用者中检查。

# c# - 防止 Azure TableEntity 属性在 MVC 4 WebAPI 中被序列化

> ID：15489232
> 
> 赞同：4
> 
> 时间：2013-03-19T00:05:18.410
> 
> 标签：c#, serialization, asp.net-mvc-4, asp.net-web-api, azure-table-storage

所以我有一个模型`Subscription`，它继承自 Azure 的`TableEntity`类，用于 WebApi Get 方法，如下所示：

```
[HttpGet]
public IEnumerable<Subscription> Subscribers() 
```

在这种方法中，我`Select`对我的订阅者表进行查询以查找所有订阅者，但我只想返回一些列（属性），如下所示：

```
var query = new TableQuery<Subscription>().Select(new string[] {
    "PartitionKey", 
    "RowKey", 
    "Description", 
    "Verified"
    }); 
```

该模型的定义如下：

```
public class Subscription : TableEntity
{
    [Required]
    [RegularExpression(@"[\w]+",
     ErrorMessage = @"Only alphanumeric characters and underscore (_) are allowed.")]
    [Display(Name = "Application Name")]
    public string ApplicationName
    {
        get
        {
            return this.PartitionKey;
        }
        set
        {
            this.PartitionKey = value;
        }
    }

    [Required]
    [RegularExpression(@"[\w]+",
     ErrorMessage = @"Only alphanumeric characters and underscore (_) are allowed.")]
    [Display(Name = "Log Name")]
    public string LogName
    {
        get
        {
            return this.RowKey;
        }
        set
        {
            this.RowKey = value;
        }
    }

    [Required]
    [EmailAddressAttribute]
    [Display(Name = "Email Address")]
    public string EmailAddress { get; set; }

    public string Description { get; set; }

    public string SubscriberGUID { get; set; }

    public bool? Verified { get; set; }
} 
```

以下是 API 查询的 XML 响应：

```
<ArrayOfSubscription>
    <Subscription>
        <ETag>W/"datetime'2013-03-18T08%3A54%3A32.483Z'"</ETag>
        <PartitionKey>AppName1</PartitionKey><RowKey>Log1</RowKey>
        <Timestamp>
            <d3p1:DateTime>2013-03-18T08:54:32.483Z</d3p1:DateTime>
            <d3p1:OffsetMinutes>0</d3p1:OffsetMinutes>
        </Timestamp>
        <ApplicationName>AppName1</ApplicationName>
        <Description>Desc</Description>
        <EmailAddress i:nil="true"/>
        <LogName>Log1</LogName>
        <SubscriberGUID i:nil="true"/>
        <Verified>false</Verified>
    </Subscription>
</ArrayOfSubscription> 
```

正如你所看到的，模型不仅有一些额外的属性，比如`SubscriberGUID`我不想在响应中被序列化（因为它们不在选择查询中，所以它们无论如何都是空的），而且 TableEntity 本身也有这样的字段as `PartitionKey`, `RowKey`, `Etag`, 并且`Timestamp`也被序列化了。

如何继续使用 Azure 表，但避免在响应中序列化这些我不希望用户看到的不需要的字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-12T05:56:34.530

不同意使用特定 DTO 的答案，但 Microsoft.WindowsAzure.Storage 程序集现在提供了一个属性，`IgnorePropertyAttribute`您可以使用该属性来装饰您的公共属性以避免序列化。

我实际上还没有尝试过，但是有一个方法可以在返回之前检查一些事情（`TableEntity`即不要跳过）：`ShouldSkipProperty()``false`

*   属性名称是“PartitionKey”、“RowKey”、“Timestamp”还是“ETag”之一 -> 跳过
*   getter 和 setter 中的任何一个都是非公开的 -> 跳过
*   是静态的 -> 跳过
*   属性是否具有属性 IgnorePropertyAttribute -> 跳过

看起来它会做的伎俩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:35:05.320

我建议使用 DTO（数据传输对象）来解决此类问题。DTO 可能意味着更多代码（更多类），但从长远来看会使您受益。您可以更好地控制电线上的内容。从安全的角度来看，它们也更好，而不是使用某些序列化程序特定的属性来控制在线上的内容。

有关更多信息，请参阅[此](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-entity-framework/using-web-api-with-entity-framework,-part-6)asp.net Web API 教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-04T18:24:56.850

恕我直言，使用 DTO 是可行的方法，但要澄清一下，因为从帖子中不太明显的**是在哪里实施 DTO**。我希望我可以将它用作查询的一部分，但我不能。相反，我必须这样做：

```
query.SelectColumns = new List<string> { "QuoteId", "RateId", "Date" };
var results = await MyCloudTable.ExecuteQuerySegmentedAsync(query, null);
return results.Select(d => new MyDto { QuoteId = d.QuoteId, RateId = d.RateId, Date = d.Date }).ToList(); 
```

您必须从 TableQuery 返回 TableEntity 派生对象，但由于所有属性均为空（通过显式选择所需的列），因此在线上没有其他数据。然后，您可以投影到您的 DTO 中，这样您就可以准确地返回您需要的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-13T22:51:45.660

您不需要从 TableEntity 类继承。您可以使用 TableEntity.Flatten 方法从您的 Subscription 类创建一个 DynamicTableEntity 并写入表存储。当您从天蓝色表存储中读取 DynamicTableEntity 时，您可以使用 TableEntity.ConvertBack 方法重构您的订阅对象。这些静态帮助方法在 Azure 表存储 SDK 版本 >= 8.0.0 中可用

TableEntity.Flatten：[https](https://msdn.microsoft.com/en-us/library/azure/mt775434.aspx) ://msdn.microsoft.com/en-us/library/azure/mt775434.aspx TableEntity.ConvertBack：[https ://msdn.microsoft.com/en-us/library/azure/mt775432.aspx](https://msdn.microsoft.com/en-us/library/azure/mt775432.aspx)

消除您在 DTO 和业务数据模型之间进一步编写转换器类的需要

# git - Git 需要从特定文件夹克隆或删除顶级文件夹，但保留该文件夹中的内容

> ID：15489234
> 
> 赞同：2
> 
> 时间：2013-03-19T00:05:36.820
> 
> 标签：git

我正在尝试通过 git 部署 rails 应用程序，但我的文件夹结构有点傻 b/ci 在一个不必要的文件夹中创建了所有内容，如下所示：

```
MASTER
------ mysite
------------- app
------------- conf
------------- Gemfile
.... 
```

我的 git 网址如下所示：

```
git@subdomain.beanstalkapp.com:/mysite.git 
```

如何从“mysite”文件夹中克隆存储库，或者如何删除“mysite 文件夹”并将其内容移动到主分支本身？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:15:11.853

您的`mysite`文件夹是其父文件夹中唯一的东西吗？如果是，您可以将`mysite`文件夹内的所有内容移动到其父文件夹。从父目录执行：

```
mv -rf mysite/* .
rm -rf mysite
git add .
git commit -am 'removing mysite folder'
git push origin master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T05:01:32.753

如果您没有任何隐藏文件（.gitignore 等点文件），João Daniel 的回答应该就足够了。

这些命令应该是我能想到的所有情况（包括移动点文件）

```
# Change dir into the root of the repo
cd ROOT_DIRECTORY_OF_YOUR_REPO

# Find all content directly under mysite, and execute
# git mv on them with the destination directory as the
# current directory
find mysite/ -mindepth 1 -maxdepth 1 -exec git mv {} . \;

# Commit the change
git commit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:16:41.117

Git 可能对此并不理想，但您可以使用[sparseCheckout 来实现](http://jasonkarns.com/blog/subdirectory-checkouts-with-git-sparse-checkout/)。

“[有没有办法只克隆 git 存储库的子目录？](https://stackoverflow.com/a/13738951/403664) ” 是一个类似的问题，有很好的步骤演练。

克隆子文件夹后，您可以删除 sparseCheckout 配置提交根目录，然后推回主目录。

# javascript - 当文本框值由 javascript 以编程方式更改时调用服务器端方法

> ID：15489240
> 
> 赞同：1
> 
> 时间：2013-03-19T00:05:59.440
> 
> 标签：javascript, asp.net, onchange

我有一个文本框，

```
<input type="text" id="hoverChange" runat="server" onchange="hoverAction"/> 
```

我在服务器端代码中定义了以下方法，

```
protected void hoverAction(object sender, EventArgs e)
{
    string sectionName=hoverChange.Value;
    if (sectionName != "") sectionHoverUserControl.displayHoverContent(sectionName);
} 
```

当我以编程方式为文本框设置一些值时，我需要执行上述方法。我尝试执行以下操作，但都没有触发 onchange 事件，

```
document.getElementById('<%= hoverChange.ClientID %>').value = "some_text"; 
```

或者

```
$('#<%= hoverChange.ClientID %>').val("some_text"); 
```

我会很感激你的帮助！谢谢， 哈里什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:10:27.870

当您以编程方式更新输入值时，浏览器不会触发“更改”事件。您可以使用 jQuery 执行以下操作：

```
$('#<%= hoverChange.ClientID %>').val("some_text").change(); 
```

自己触发事件。（你可以不使用 jQuery 来完成，但它涉及的更多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:53:57.573

使用 keyup 事件触发必要的代码..

# jquery - iphone设备上的jQuery验证数字字段

> ID：15489241
> 
> 赞同：0
> 
> 时间：2013-03-19T00:06:16.653
> 
> 标签：jquery, iphone, ios, jquery-validate

我有一个带类的输入，`numeric`我使用 jquery 验证来确保只能在这个输入字段中输入数字字符。它在台式机和安卓设备上运行良好，但在 iphone+safari 上，我发现它接受的字符多于数字，包括`(`, `)`, `@`, `$`, `&`, `#`,和. 有谁知道如何在 iphone+safari 上防止这些字符？`%``^``!`

该问题在 IOS 4 和 6 上都存在

# ember.js - 在模型中创建静态变量的 ember.js 惯用方式是什么？

> ID：15489247
> 
> 赞同：4
> 
> 时间：2013-03-19T00:07:05.257
> 
> 标签：ember.js

这是我想出的方法，使用reopenClass，但它很丑陋。我真的认为有更好的方法来做到这一点。

（咖啡脚本）

```
App.Post = DS.Model.extend
  text: DS.attr('string')
  state: DS.attr('string')

App.Post.reopenClass
  STATES_ARRAY: ['published', 
                 'delayed', 
                 'approved' ] 
```

在此先感谢，古斯塔沃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:36:44.177

您发布的内容没有任何问题。您可能会查看`EnumeratedTransform`此拉取请求：[https ://github.com/emberjs/data/pull/505/files](https://github.com/emberjs/data/pull/505/files)

# ruby-on-rails - 将 ActiveRecord 保存到变量时出错

> ID：15489248
> 
> 赞同：0
> 
> 时间：2013-03-19T00:07:07.557
> 
> 标签：ruby-on-rails, ruby, activerecord

我试图从这样的模型中保存一个 ID 号：

```
x_value = Info.where("info_id='#{@infodata[:educationInfoRef]}'").select(:id) 
```

在终端中它返回正确，但是当我将其保存到数据库时，它会保存如下值：`#<ActiveRecord::Relation:0x007f884b48c788>`

当我从终端打印它时，它返回 nil。

为什么？如何保存实际值？

我正在使用导轨 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:10:40.380

第一件事。如果 @infodata 是使用用户输入构建的，则此代码容易发生 sql 注入。将您的代码更改为

```
x_value = Info.where(info_id: @infodata[:educationInfoRef]).select(:id) 
```

我们来谈谈你的问题。你忘了打电话`.first`，所以它会返回一条记录。例如，试试这个。

```
info = Info.where(info_id: @infodata[:educationInfoRef]).first
info.id # returns the id of the record
info.info_id # returns the value of @infodata[:educationInfoRef] 
```

# jakarta-ee - 如何更改在cPanel上运行的tomcat的默认端口并删除地址上的应用名称

> ID：15489250
> 
> 赞同：0
> 
> 时间：2013-03-19T00:07:12.220
> 
> 标签：jakarta-ee, tomcat, cpanel, whm

假设我的网站地址是 www.example.com，我已经在服务器上上传了我的 java 应用程序，但它只能在 www.example.com:8080/MyApp 上访问，如何将其更改为正常的 url？这是 www.example.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:49:20.147

编辑位于 conf 目录中的 server.xml 文件。寻找应设置为 8080 的连接器。应该如下所示...

> 连接器端口="8080" 协议="HTTP/1.1"
> 
> connectionTimeout="20000" redirectPort="8443" />

如下将 8080 更改为 80 并重新启动 Tomcat 服务。

> 连接器端口="80" 协议="HTTP/1.1"
> 
> connectionTimeout="20000" redirectPort="8443" />

# c - malloc 或 calloc

> ID：15489261
> 
> 赞同：0
> 
> 时间：2013-03-19T00:08:24.907
> 
> 标签：c, malloc, calloc

这是一个非常小的结构，用于索引文件的单词。它的成员是一个字符串（单词）、一个整数数组（这个单词所在的行）和一个表示行数组中第一个空闲单元格索引的整数。

```
typedef struct {
    wchar_t * word;
    int * lines;
    int nLine;
} ndex;

ndex * words; 
```

我正在尝试使用 malloc 和 realloc 一次分配 (ndex)es nb_words = 128，并且一次分配 (lines) nb_lines = 8。

第一个问题，分配 *words 和/或 *lines 时 malloc(number * size) 和 calloc(number, size) 有什么区别？我应该选择哪个？

第二个问题，我gdbed这个：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000400cb0 in add_line (x=43, line=3) at cx17.3.c:124
124     words[x].lines[words[x].nLine] = line;
(gdb) p words[43].nLine 
$30 = 0 
```

换句话说，它始终失败于

```
words[43].lines[0] = 3; 
```

由于我按 128 分配字，按 8 分配行，没有理由索引对前面的 42 个字起作用并且在这里失败，除非我的分配被搞砸了，是吗？

第三个问题：这是我的分配，它们有什么问题？

```
words = malloc(sizeof(ndex *) * nb_words);
short i;
for (i = 0; i < nb_words; i++) {
    words[i].lines = malloc(sizeof(int) * nb_lines);
    words[i].nLine = 0;
} 
```

我应该在 for(j) 循环中初始化行吗？我不明白为什么让它未初始化会阻止写入它，只要它已被分配。

这个 C 对我来说是一个非常神秘的东西，提前感谢您提供的任何提示。

最好的祝福。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:14:49.263

这看起来很可疑：

```
sizeof(ndex *) 
```

您可能不想要指针的大小 - 您想要结构的大小。所以去掉星星。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:14:45.943

这里：

```
words = malloc(sizeof(ndex *) * nb_words); 
```

您正在为一些指针分配空间（即 4 个字节 * `nb_words`）。你真正需要的是分配一些数量`ndex's`：

```
words = malloc(sizeof(ndex) * nb_words); 
```

此外，calloc 0 初始化返回的缓冲区，而 malloc 没有。[看到这个答案](https://stackoverflow.com/a/1538427/390913)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:19:48.780

1.  `malloc`将仅分配请求的空间。`calloc`将分配空间并初始化为零。

2.  在您的示例中，在此处观察到分段错误`words[x].lines[words[x].nLine] = line;`。可能有两种可能性，即分配错误，我不认为是这种情况。更可能的情况`words[x].nLine`不会评估为`0`。请打印此值并检查。我怀疑这是一个巨大的数字，它迫使您的程序从分配的空间中访问内存。

3.  其他人已经回答了这部分，所以我将跳过它。

# wcf - 以流传输模式从无类型消息中获取流

> ID：15489263
> 
> 赞同：0
> 
> 时间：2013-03-19T00:08:38.180
> 
> 标签：wcf

我正在尝试使用合同创建流式 WCF 服务

```
void Send(Message message) 
```

我使用创建消息

```
var requestMessage = Message.CreateMessage(MessageVersion.Default, "operation", new StreamableBodyWriter(inputStream)); 
```

where`StreamableBodyWriter`继承`System.ServiceModel.Channels.StreamBodyWriter`并覆盖`OnWriteBodyContents`以将输入流写入消息。

这似乎`Message`在客户端正确创建，但在服务端我无法读取消息内容。当我检查消息正文时，双方看起来像这样：

```
<s:Body>... stream ...</s:Body> 
```

但是`Message.IsEmpty`在服务端设置为true。

有没有办法从服务端的消息正文中获取流？

# php - htaccess 版本控制，检查文件是否存在于多个地方

> ID：15489266
> 
> 赞同：1
> 
> 时间：2013-03-19T00:08:59.470
> 
> 标签：php, apache, .htaccess, rewrite, versioning

在此先感谢您的帮助！

所以我有以下 .htaccess 代码。它似乎工作。然而，它必须是现存最臃肿的低效工作。必须有更好的方法来实现这一点。

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
DirectoryIndex index.php index.html site-down.php
RewriteCond %{HTTP_HOST} !^example\.com [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L]
RewriteCond %{REQUEST_URI} !\.(htm|html|php|jpg|jpeg|txt|png|gif|js|css)$
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://example.com/$1/ [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/v1
RewriteRule ^(.*)$ v1/$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME}index\.php -f
RewriteRule ^.*$ %0index.php [L]
RewriteCond %{REQUEST_FILENAME}index\.html -f
RewriteRule ^.*$ %0index.html [L]
RewriteCond %{REQUEST_FILENAME}site-down\.php -f
RewriteRule ^.*$ %0site-down.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}(index\.php|index\.html|site-down\.php) !-f
RewriteRule ^.*$ controller.php [QSA,L] 
```

这就是我想要完成的。

1.  将所有请求重写为非 www
2.  检查文件是否按要求存在。如果不，
3.  检查文件夹 v1/+附加请求中是否存在文件，如果不存在，
4.  检查文件夹 v1/+附加请求中是否存在索引文件，如果不存在，
5.  重定向到controller.php

由于每个请求都使用 htaccess 文件，因此我真的需要让它更合乎逻辑/更有效。我在中间添加索引文件块的原因是它在检查重定向到 controller.php 时没有检查索引文件是否存在。

有任何想法吗？谢谢！

# javascript - task.js 生成器/承诺与异步回调

> ID：15489267
> 
> 赞同：8
> 
> 时间：2013-03-19T00:09:06.073
> 
> 标签：javascript, node.js, asynchronous

我想知道在处理 JavaScript 中的异步代码时，这两种方法中哪一种更好。我想了解哪种方法会导致代码更清晰。我习惯使用 Promise，它们似乎比异步方法更灵活（[https://github.com/caolan/async](https://github.com/caolan/async)）。

我也知道 Task.js 库 ( [http://taskjs.org/](http://taskjs.org/) )，但这依赖于 Ecmascript Harmony 中的 yield 关键字。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-24T07:32:22.913

该`async`库封装了一些非常常见的异步模式，包括并行进行任意异步调用和异步迭代列表。它旨在与“nodeback” `(err, res)`API 一起工作，这使得它对许多 Node.js 应用程序都很有用。`async`然而，它是一个*特定*的解决方案，它只简化了库中包含的异步模式。

相比之下，Promise 在我看来是解决异步代码问题的更*通用的解决方案。*乍一看，它们不仅提供了错误冒泡和扁平化回调金字塔的明显好处，而且`async`可以更简单地解决原本需要封装各种复杂模式的问题。

我将通过一些`async`可用的模式快速浏览来演示这一点。例如，该`async.waterfall`函数的使用如下：

```
async.waterfall([
      function (cb) {
        asyncCall('argument', cb);
      },
      function(resultOfFirstCall, cb) {
        anotherCall(resultOfFirstCall, 'someOtherArgument' cb);
      },
    ], function(err, res) {
      if (err) handle(err);
      useFinalResult(res);
    }); 
```

在大多数 Promise 库中没有等价物`async.waterfall`（或者至少在 Q 中没有），因为使用 . 从头开始​​实现它*非常简单*`Array.reduce`，就像这样（基于 Q 的示例，但在其他 Promise 库上几乎相同）：

```
[
  function() {
    return asyncCall('argument');
  },
  function(resultOfFirstCall) {
    return anotherCall(resultOfFirstCall, 'someOtherArgument');
  }
].reduce(Q.when, Q())
 .then(useFinalResult, handle); 
```

`async`include中的其他大函数`async.parallel`，其中 Q 包括`Q.all`：

```
// async
async.parallel([
    asyncFunc,
    asyncFunc2
    ], function(err, res) {
      if (err) handle(err);
      useFinalResult(res);
      // res[0] === asyncFuncResult
      // res[1] === asyncFunc2Result
    });
// Q
Q.all([
  asyncFunc(),
  asyncFunc2()
]).then(useFinalResult, handle); 
```

和`async.map`。当您使用 Promise 时，您实际上*并不需要* ，因为正常就足够了：`async.map``Array.map`

```
// async
async.map(['file', 'file2', 'file3'], fs.stat, function(err, res) {
  if (err) handle(err);
  useFinalResult(res);
});
// Q
Q.all(['file', 'file2', 'file3']
  .map(Q.nfbind(fs.stat)))
  .then(useFinalResult, handle); 
```

其余部分`async`同样容易简洁地实现，使用你的 promise 库中相对简单的部分。（请注意，最后一个示例使用了一个函数`Q.nfbind`:`nfbind`并且 Q 提供的其他`nf*`函数基本上是您将 Promise 与 nodeback API 一起使用所需的全部内容，因此尝试将 Promise 与期望 nodebacks 的库一起使用甚至没有特别大的障碍。）

最后，是否使用 Promise 或 nodebacks 取决于您，但我认为 Promise 是一种更灵活、更有能力且通常更简洁的方式来实现大多数异步操作。

[回调是必要的，promise 是功能性](http://blog.jcoglan.com/2013/03/30/callbacks-are-imperative-promises-are-functional-nodes-biggest-missed-opportunity/)的，值得一读，以了解更多关于这方面的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T00:44:46.960

由于您使用节点标记了您的问题，因此我推荐使用异步库。控制流函数非常适合使用并消除了丑陋且难以遵循的回调链。该 API 的设置非常适合将遵循节点签名的回调注入`(error, result)`到控制函数中。它基本上默认包含在我编写的几乎所有节点脚本中。

虽然您也可以将 async 用于客户端，但对于大多数项目来说可能没有必要。jQuery 包含 Promise，你可以用它们完成同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T00:54:43.623

我认为 promise/a 和 async lib 具有不同的目标，promise 专注于一步异步操作进度，而 async 专注于多步骤异步操作，对于 node，async 对很多异步 api 有更广泛的用途。

顺便说一句，要处理异步操作，使用命名函数而不是匿名函数将是最有效的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-10T00:47:50.880

gumballhead 推荐**async.js**，但如果您使用 Node.js，*我*建议您使用[**Parse Cloud Code**](https://parse.com/docs/cloud_code_guide)。他们的 API 内置了 Promise，以及其他好东西（如数据库）。它节省了时间，您不必担心后端的稳定性。您可以包含任何 NPM 模块，`module.exports`只需对`exports`. 它还与您的前端无缝集成！我在当前项目中使用这种方法取得了成功，只是想用一种新方法发表评论。

随意评论您为什么/何时不应**使用**Cloud Code；因为我还没有这样的经历。

# php - 致命错误：无法通过引用传递参数 2

> ID：15489273
> 
> 赞同：1
> 
> 时间：2013-03-19T00:09:42.620
> 
> 标签：php, mysqli

我试图遵循-how-to-perform-update-with-mysqli-prepare 中给出的建议？在网站上，但我没有运气。

以下：

```
<?php

//connection
$con = new mysqli ("localhost","user","password","db");

$playno = "22";
$n1 = "4";
$n2 = "4";
$n3 = "4";

$stmt = $con -> prepare("UPDATE game SET no1 = ?, no2 = ?, no3 = ? WHERE id = ?");

$stmt -> bind_param ('iiii',"$n1","$n2","$n3","$playno");
$stmt -> execute();

?> 
```

在浏览器中给出这个：

> 致命错误：无法通过 C:\xampp\htdocs... 第 13 行中的引用传递参数 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:15:01.567

```
$stmt -> bind_param ('iiii',$n1,$n2,$n3,$playno); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:16:10.337

该错误意味着 in 的第二个参数`bind_param`应该是对变量的引用。

```
$stmt -> bind_param ('iiii',"$n1","$n2","$n3","$playno"); 
```

从此：[_](http://php.net/manual/en/mysqli-stmt.bind-param.php)

> 注意mysqli_stmt_bind_param() 要求参数通过引用传递

它应该是：`$stmt -> bind_param ('iiii',$n1,$n2,$n3,$playno);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:17:27.393

当您尝试按如下方式传递参数时

```
$stmt -> bind_param ('iiii',"$n1","$n2","$n3","$playno"); 
```

等被`"$n1"`视为常量字符串，因此会导致**错误**（而不是警告）。

此外，您需要传递整数值而不是字符串。

```
$stmt -> bind_param( 'iiii',$n1, $n2, $n3, $playno ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T00:22:46.770

```
$stmt -> bind_param ('iiii',"$n1","$n2","$n3","$playno"); 
```

应该

```
$stmt -> bind_param ('ssss',$n1,$n2,$n3,$playno); 
```

或者

```
$playno = 22;
$n1 = 4;
$n2 = 4;
$n3 = 4;

$stmt -> bind_param ('iiii',$n1,$n2,$n3,$playno); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-29T20:00:21.140

你的问题很简单：

这是一个字符串 $playno = "22"; //字符串 $n1 = "4"; //字符串 $n2 = "4"; //字符串 $n3 = "4"; //细绳

```
$stmt = $con -> prepare("UPDATE game SET no1 = ?, no2 = ?, no3 = ? WHERE id = ?"); 
```

这里你的错误 $stmt -> bind_param ('iiii',"$n1","$n2","$n3","$playno"); //失败，必须使用 s $stmt -> bind_param ('ssss',$n1,$n2,$n3,$playno); //这是对的

或更改：

```
$playno = 22; //integer
$n1 = 4; //integer
$n2 = 4; //integer
$n3 = 4; //integer
$stmt -> bind_param ('iiii',$n1,$n2,$n3,$playno); //this is correct 
```

接着：

```
$stmt -> execute(); 
```

# python - Python和纯虚函数错误

> ID：15489282
> 
> 赞同：0
> 
> 时间：2013-03-19T00:10:01.543
> 
> 标签：python, win32com, pure-virtual

我用 Python 和 PyEvolve 写了一个 GA。在此，我曾经`win32com.client`从另一个程序（“Gsa.ComAuto”一个用于结构工程的程序）调用 COM 库。对于几代人来说，GA 工作正常，但在出现错误消息之后。该消息是 R6025 Run Time Message Pure Virtual Function Call，参考 gsa.exe。我不知道为什么会出现此消息，可能是因为我多次调用 Com 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:28:16.083

尝试这个：

```
import win32com.client
win32com.client.pythoncom.CoInitialize() 
```

这将[初始化您的线程以使用 COM](http://docs.activestate.com/activepython/2.5/pywin32/pythoncom__CoInitialize_meth.html)。

# c# - 在 XML (Linq To XML) 中更新数据会生成错误的结束标记

> ID：15489285
> 
> 赞同：0
> 
> 时间：2013-03-19T00:10:26.737
> 
> 标签：c#, xml, windows-runtime, linq-to-xml, winrt-xaml

我有这个 XmlFile (tasks.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<Tasks>
  <Task>
    <Id>dc77b03f-468c-4709-b8dc-4d9741c984dd</Id>
    <Name>buy paper</Name>
    <Category>inbox</Category>
    <DueDate></DueDate>
    <Project></Project>
    <Context></Context>
    <Note></Note>
    <Created>03/16/2013 15:33:29</Created>
    <Finished></Finished>
  </Task>
</Tasks> 
```

当我像这样更新元素时​​，一切正常：

```
try
{
    var item = (CheckBox)sender;
    dynamic itemDC = item.DataContext;

    var folder = ApplicationData.Current.LocalFolder;
    var file = await folder.GetFileAsync("tasks.xml");
    var readStream = await FileIO.ReadTextAsync(file);
    using (var writeStream = await file.OpenStreamForWriteAsync())
    {
        XElement xElem = XElement.Parse(readStream);

        IEnumerable<XElement> singleTask = from task in xElem.Elements("Task")
                                           where (string)task.Element("Id") == itemDC.Id
                                           select task;

        foreach (XElement task in singleTask)
        {
            task.SetElementValue("Finished", DateTime.Now.ToString("MM") + "/" + DateTime.Now.ToString("dd") + "/" + DateTime.Now.ToString("yyyy HH:mm:ss"));
        }

        xElem.Save(writeStream);
    }
}
catch (Exception ex)
{
    new MessageDialog(ex.Message).ShowAsync();
} 
```

但是如果我想`<Finnished>`再次编辑元素并将值设置为“”，它将在我的 XML 文件中生成两个错误的结束标记。

再次编辑代码：

```
try
{
    var item = (CheckBox)sender;
    dynamic itemDC = item.DataContext;

    var folder = ApplicationData.Current.LocalFolder;
    var file = await folder.GetFileAsync("tasks.xml");
    var readStream = await FileIO.ReadTextAsync(file);
    using (var writeStream = await file.OpenStreamForWriteAsync())
    {
        XElement xElem = XElement.Parse(readStream);

        IEnumerable<XElement> singleTask = from task in xElem.Elements("Task")
                                           where (string)task.Element("Id") == itemDC.Id
                                           select task;

        foreach (XElement task in singleTask)
        {
            task.SetElementValue("Finished", "");
        }

        xElem.Save(writeStream);
    }
}
catch (Exception ex)
{
    new MessageDialog(ex.Message).ShowAsync();
} 
```

`<Finished>`编辑为“”后生成的 XML 错误：

```
<?xml version="1.0" encoding="utf-8"?>
<Tasks>
  <Task>
    <Id>dc77b03f-468c-4709-b8dc-4d9741c984dd</Id>
    <Name>dnešní úkol</Name>
    <Category>inbox</Category>
    <DueDate></DueDate>
    <Project></Project>
    <Context></Context>
    <Note></Note>
    <Created>03/16/2013 15:33:29</Created>
    <Finished></Finished>
  </Task>
</Tasks>  </Task>
</Tasks> 
```

如果我再次使用与日期字符串相同大小的字符串进行编辑，一切正常，但清除“”值会导致该错误。

我花了很多时间来解决这个问题，但现在我不知道如何解决这个问题。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:38:47.767

您的问题与 Linq to XML 没有任何关系。这就是流的工作方式。在第一种情况下，您将获得更长的文件，因此所有先前的内容都将被覆盖。在第二种情况下，新文件更短，因此其余内容保持不变。

保存修改后的 XML 时应覆盖现有文件：

```
var folder = ApplicationData.Current.LocalFolder;
var file = await folder.GetFileAsync("tasks.xml");
var readStream = await FileIO.ReadTextAsync(file);
XElement xElem = XElement.Parse(readStream);

IEnumerable<XElement> singleTask = from task in xElem.Elements("Task")
                                    where (string)task.Element("Id") == itemDC.Id
                                    select task;
foreach (XElement task in singleTask)
{
    task.SetElementValue("Finished", "");
}

file = await folder.CreateFileAsync("tasks.xml", CreationCollisionOption.ReplaceExisting);
using (var writeStream = await file.OpenStreamForWriteAsync())
{
    xElem.Save(writeStream);
} 
```

此外，当保存`DateTime`到 XML 时，您确实应该使用以下命令对其进行序列化`XmlConvert`：

```
task.SetElementValue("Finished", XmlConvert.ToString(DateTime.Now)); 
```

# ftp - Camel FTP - 已知文件名的 FTP 消费者

> ID：15489288
> 
> 赞同：2
> 
> 时间：2013-03-19T00:10:30.373
> 
> 标签：ftp, apache-camel, polling

如果名称已知，有没有办法从 FTP 端点请求文件？在我们的例子中，我们希望根据日期和时间从一个巨大的文件夹结构中检索文件——通过文件夹递归列出需要太长时间。我知道要提前调用的文件的名称和位置（它们可以从日期和时间计算出来），所以扫描只是浪费时间。我宁愿轮询我想要的确切文件，直到我成功收到它。

最好的方法是什么？

干杯，凯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:28:23.367

根据定义，camel 文件和 ftp 组件仅轮询目录。

您可以结合使用 maxMessagesPerPoll 和 fileName 来实现您的目的，例如

```
from("ftp://.../xyz?maxMessagesPerPoll=x&fileName=y"); 
```

fileName 可以是一个表达式。看看camel file2 和ftp2 站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:30:50.843

我知道要获取事先知道文件名的特定文件，可以使用过滤方法。

这是官方文档中的一个示例，但我不确定它是否会节省您扫描工作目录所花费的时间。

[在“ ftp 页面](http://camel.apache.org/ftp.html)”中搜索过滤器

# algorithm - 合并一个包含升序元素的队列和一个包含降序元素的堆栈

> ID：15489292
> 
> 赞同：0
> 
> 时间：2013-03-19T00:11:08.577
> 
> 标签：algorithm, sorting

假设我有一个元素按升序排列的队列，即 head < 2nd < 3rd < ... < tail

和一个元素按降序排列的堆栈，即 top > 2nd > 3rd > ...

并且它们的大小最多相差 1（它们可以是相同的大小）。

将它们合并到同一个队列（或堆栈）中作为单个排序序列而不需要额外的堆栈/队列的最有效方法是什么？

似乎到目前为止我想到的最好的是二次算法，它基本上是选择排序，它并没有真正利用队列和堆栈是预先排序的事实及其大小。我想知道我们是否可以做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:07:46.153

只需就地合并，将您的结果放在队列的末尾。保持计数，以便您知道何时完成。这是 O(n)。

这是在 python 中完成的。我没有使用队列或堆栈类，但您会看到 q 列表是 FIFO 并且 s 列表是 LIFO！

启用了最有趣的调试案例，因此您可以看到输出。

```
def sort(Q, S, debug=False):
  q = Q
  s = S
  size = len(Q) + len(S)
  handled = 0
  while handled < size:
    move_from_queue = len(s) == 0 or (len(q) > 0 and q[0] < s[0])
    last_from_stack = (handled == size-1) and (len(s) == 1)
    if move_from_queue and not last_from_stack:
      q_front = q[0]
      q = q[1:] + [q_front]
      msg = 'moved q[0]=%d to end, q=%r' % (q_front, q)
    else:
      (s_top, s) = (s[0], s[1:])
      q += [s_top]
      msg = 'popped s[0]=%d to end of q=%r,s=%r' % (s_top, q, s)
    handled += 1
    if debug:
      print 'Debug-Step %d: %s' % (handled, msg)
  return (q, s)

def test_sort(Q, S, debug=False):
  print 'Pre  Q: %r' % Q
  print 'Pre  S: %r' % S
  (Q, S) = sort(Q, S, debug)
  print 'Sorted: %r' % Q
  print

if __name__ == "__main__":
  test_sort([1, 3, 7, 9], [2, 5, 5])
  test_sort([1, 3, 7], [2, 5, 5])
  test_sort([1, 3, 7], [2, 5, 5, 9], True)
  test_sort([], [])
  test_sort([1], [])
  test_sort([], [1]) 
```

输出：

```
预问：[1, 3, 7, 9]
前 S: [2, 5, 5]
排序：[1, 2, 3, 5, 5, 7, 9]

预问： [1, 3, 7]
前 S: [2, 5, 5]
排序： [1, 2, 3, 5, 5, 7]

预问： [1, 3, 7]
前 S: [2, 5, 5, 9]
调试步骤 1：将 q[0]=1 移至结束，q=[3, 7, 1]
调试步骤 2：将 s[0]=2 弹出到 q=[3, 7, 1, 2],s=[5, 5, 9] 的末尾
调试步骤 3：将 q[0]=3 移至结束，q=[7, 1, 2, 3]
调试步骤 4：将 s[0]=5 弹出到 q=[7, 1, 2, 3, 5],s=[5, 9] 的末尾
调试步骤 5：将 s[0]=5 弹出到 q=[7, 1, 2, 3, 5, 5],s=[9] 的末尾
调试步骤 6：将 q[0]=7 移至结束，q=[1, 2, 3, 5, 5, 7]
调试步骤 7：将 s[0]=9 弹出到 q=[1, 2, 3, 5, 5, 7, 9],s=[] 的末尾
排序：[1, 2, 3, 5, 5, 7, 9]

预问：[]
预S：[]
排序：[]

预问：[1]
预S：[]
排序：[1]

预问：[]
前 S: [1]
排序：[1]

```

# scheme - 初学者方案：消耗两个列表并生成列表1中所有不在列表2中的成员的列表

> ID：15489295
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:11:26.723
> 
> 标签：scheme, racket

例如：

```
(check-expect(2-list empty (list 3 4)) empty）
(check-expect(process-2-lists (list "nice" 'blue) empty)(list "nice" 'blue))
(check-expect(process-2-lists (list "nice" 'blue 5 10 5 'blue 5) (list "nice" 5 5 'red "wow")) (list 'blue 10 'blue)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:43:00.383

我会给你一些提示，像往常一样，我希望人们自己解决他们的作业。这是学习的唯一途径！

```
(define (process-2-lists l1 l2)
  (cond (<???>       ; if the first list is empty
         <???>)      ; then we return the empty list
        (<???>       ; if the first element in l1 is not in l2 (*)
         (cons <???> ; then we add it to the result using cons
           (process-2-lists <???> l2))) ; and advance the recursion
        (else                           ; otherwise
         (process-2-lists <???> l2))))  ; advance the recursion adding nothing 
```

请注意，我们只需要遍历其中一个列表，我们需要另一个来检查它。这里的关键线是用 标记的那一条`(*)`。我们将如何做到这一点？好吧，您*可以*编写自己的帮助程序来测试另一个列表中元素的成员资格，但是如果您查看[文档](http://docs.racket-lang.org/reference/pairs.html)，您会发现您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:38:32.137

过滤列表 b 中的项目。

```
(filter
  (lambda (item)
    (not (member item b)))
  a) 
```

# php - 放置facebook登录链接

> ID：15489300
> 
> 赞同：0
> 
> 时间：2013-03-19T00:12:13.507
> 
> 标签：php, html, symfony

使用 symfony2.1 和 FosFacebookBundle。

我想在我的主页上放置一个链接以登录 facebook。

在我的模板中：

```
<a href="https://www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=
           http://dev.example.com/auth/login&scope=email,read_stream" target="_self">
  test link login facebook</a> 
```

如果我点击`test link login`facebook，那么我仍然在我的`dev.example.com/login?code=AQBgyy9u2qm...`网站上。当我复制`https://...`链接并将其放入地址栏手册时，一切正常。我怎样才能把它放在我的主页上，目标是自我，打开 facebook，登录并重定向到我的主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:16:33.497

让我直截了当地说，您正在尝试测试 oauth 身份验证对话框，当您单击链接时，您会直接发送到您的 URL 中`redirect_uri`的参数？`code`

我有一些好消息要告诉你——Facebook 没有费心显示“授权这个应用程序？” 页面给你，因为你已经验证了应用程序。

要撤消这些权限，您必须输入您帐户的隐私设置，并撤消对您的应用程序的权限。

# timer - 如何使函数在 LUA（Love2d）中等待 X 时间？

> ID：15489301
> 
> 赞同：1
> 
> 时间：2013-03-19T00:12:13.693
> 
> 标签：timer, lua, wait, love2d

我对编程非常陌生，并且来自 SC2 等游戏的“自定义地图”背景。我目前正在尝试在 Love2d 中制作平台游戏。但我想知道如何让某件事在做下一件事之前等待 X 秒。

假设我想让主角长生 5 秒，那代码应该是什么样子？

```
Immortal = true 
????????????????
Immortal = false 
```

据我了解，Lua 和 Love2d 中没有内置等待。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T14:57:58.650

听起来您对某个游戏实体的临时状态感兴趣。这很常见——通电持续六秒，敌人被击晕两秒，你的角色在跳跃时看起来不同，等等。临时状态与等待不同。等待表明在你的五秒钟不朽期间绝对不会发生任何其他事情。听起来您希望游戏像往常一样继续进行，但要有一个不朽的主角五秒钟。

考虑使用“剩余时间”变量而不是布尔值来表示临时状态。例如：

```
local protagonist = {
    -- This is the amount of immortality remaining, in seconds
    immortalityRemaining = 0,
    health = 100
}

-- Then, imagine grabbing an immortality powerup somewhere in the game.
-- Simply set immortalityRemaining to the desired length of immortality.
function protagonistGrabbedImmortalityPowerup()
    protagonist.immortalityRemaining = 5
end

-- You then shave off a little bit of the remaining time during each love.update
-- Remember, dt is the time passed since the last update.
function love.update(dt)
    protagonist.immortalityRemaining = protagonist.immortalityRemaining - dt
end

-- When resolving damage to your protagonist, consider immortalityRemaining
function applyDamageToProtagonist(damage)
    if protagonist.immortalityRemaining <= 0 then
        protagonist.health = protagonist.health - damage
    end
end 
```

小心诸如**wait**和**timer**之类的概念。它们通常指的是管理线程。在具有许多移动部件的游戏中，没有线程来管理事物通常更容易且更可预测。如果可能，请将您的游戏视为一个巨大的状态机，而不是在线程之间同步工作。如果线程是绝对必要的，Löve 会在其[love.thread](https://www.love2d.org/wiki/love.thread)模块中提供它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T18:21:19.320

我通常使用 cron.lua 来表达你所说的：[https ://github.com/kikito/cron.lua](https://github.com/kikito/cron.lua)

```
Immortal = true
immortalTimer = cron.after(5, function() 
  Immortal = false 
end) 
```

然后坚持`immortalTimer:update(dt)`你的love.update。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T07:28:45.187

你可以这样做：

```
function delay_s(delay)
  delay = delay or 1
  local time_to = os.time() + delay
  while os.time() < time_to do end
end 
```

然后你可以这样做：

```
Immortal == true
delay_s(5)
Immortal == false 
```

当然，除非你在自己的线程中运行它，否则它会阻止你做任何其他事情。但不幸的是，这完全是 Lua，因为我对 Love2d 一无所知。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-06T19:16:57.703

我建议您在游戏中使用 hump.timer，如下所示：

```
function love.load()
timer=require'hump.timer'
Immortal=true
timer.after(1,function()
Immortal=false
end)
end 
```

代替使用`timer.after`，你也可以使用`timer.script`，像这样：

```
function love.load
timer=require'hump.timer'
timer.script(function(wait)
Immortal=true
wait(5)
Immortal=false
end)
end 
```

不要忘记添加`timer.update`功能`love.update`！

```
function love.update(dt)
timer.update(dt)
end 
```

希望这有帮助；）

下载链接：[https ://github.com/vrld/hump](https://github.com/vrld/hump)

# excel - (VBA-EXCEL) 根据单元格值自动更改和增加 activex 文本框的值

> ID：15489302
> 
> 赞同：0
> 
> 时间：2013-03-19T00:12:15.353
> 
> 标签：excel, excel-2013, vba

我有一个**activex 文本框**，`worksheet1`需要根据其中的**单元格值**（我的表格所在的位置）**自动更改。** 这个值应该**增加**，就像ID号的概念一样，如果你添加一个客户就会增加，增加的值**必须显示在**准备保存的文本框中。**`worksheet2`** 

 ******有没有人对上述有建设性的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:16:47.680

请将以下代码粘贴到工作簿的工作表 (2) 中。txtVal 也是 Worksheets(1) 上文本框的名称

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Application.EnableEvents = False
    'Assuming A1 is the cell in worksheet 2 and it has numeric value as it should be incremented.

    If Target.Count = 1 And Target.Address = "$A$1" Then
        If IsNumeric(Target.Value) Then Sheet1.txtVal.Text = CInt(Target.Value) + 1
    End If

    Application.EnableEvents = True
End Sub 
```

![在此处输入图像描述](../Images/83f4090d3f1163bbeb3e82d3005de877.png) ![在此处输入图像描述](../Images/5bc1311d38790353eb190c83c38963e9.png)******

# php - 如何将 JSON 数组过滤成 PHP 数组

> ID：15489307
> 
> 赞同：0
> 
> 时间：2013-03-19T00:13:44.777
> 
> 标签：php, arrays, json, filter

我有一个用 java 生成的 JSONArray，我将它发布到我的一个 PHP 文件中，并保存到一个文件中。从那里读取它，我需要根据这些数据生成一个图表。我所需要的只是将具有我不需要的值的原始 JSON 转换为一个简单的 php 数组。

```
[{"id":1,"timestamp":"1363135091","reward":1200,"player":"Orangeguy24","address":"108.28.239.167","service":"MC-Index"},{"id":2,"timestamp":"1363135091","reward":1200,"player":"Orangeguy24","address":"108.28.239.167","service":"MC-Index"}] 
```

是我的 JSON 数组中的 2 个元素的示例。我需要做的是相应地将这些值过滤到数组中。

例如，获取“玩家”有多少票，我需要将 JSONArray 中的元素数量相加，因为 1 个元素是 1 票（id 是我的 mysql DB 中的主要自动增量，不在我的网络服务器上)

我希望数组是 [player, votes] 所以当我回显数组时，我正在使用的谷歌图表工具很容易解析它。我已经花了最后 5 个小时来解决这个问题，但我一直被卡住，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:23:53.993

要将 JSON 解码为 php 数组，您可以执行以下操作：

```
$json_array = json_decode($raw_json); 
```

然后，从数组中获取每个玩家的票数：

```
$player_votes = array_reduce($json_array,
    function($v, $item) {
        if(!array_key_exists($item->player, $v))
            $v[$item->player] = 1;
        else
            $v[$item->player] = 1 + $v[$item->player];

        return $v;
    }, array()); 
```

如果我正确理解您的问题，这将起作用。

编辑：更新了第二个代码片段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:49:14.730

尝试这个 ：

```
$str   = '[{"id":1,"timestamp":"1363135091","reward":1200,"player":"Orangeguy24","address":"108.28.239.167","service":"MC-Index"},{"id":2,"timestamp":"1363135091","reward":1200,"player":"Orangeguy24","address":"108.28.239.167","service":"MC-Index"}]';

$res   = array();
foreach(json_decode($str,true) as $val){
  if(array_key_exists($val['player'],$res)){
     $res[$val['player']]   = $res[$val['player']]+1;
  }
  else{
     $res[$val['player']]   = 1;
  }

}

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [Orangeguy24] => 2
) 
```

# android - Android AVD - 在 Windows 或 Ubuntu VM 上更快？

> ID：15489311
> 
> 赞同：1
> 
> 时间：2013-03-19T00:14:14.077
> 
> 标签：android, ubuntu, virtual-machine, avd

我的 Android 模拟器在我的 PC 上运行缓慢，所以我正在考虑在虚拟机上安装 Ubuntu 并在那里运行 AVD。你认为如果我这样做会更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:26:44.723

你有两个解决方案。

一，你在 VirtualBox 上安装 AndroVM。

[安卓虚拟机](http://androvm.org/)

这种方式非常快，但设置和控制有点困难。

另一种方法是创建在 Intel x86 中制作的 AVD。

[配置 x86 模拟器](http://docs.xamarin.com/guides/android/deployment,_testing,_and_metrics/configuring_the_x86_emulator)

这种方式也非常快。与通用模拟器相比，设置和控制非常容易。

但是这种方式需要支持 Intel VT / AMD-V 的 CPU

两种方式都很好，请选择你喜欢的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:18:14.623

我会把钱花在 Linux 上——因为它在操作系统方面的足迹更少。

另一方面，Windows 的使用率要高得多，所以如果他们开发了它并将时间投入到使用最多的那个上，它可能就是 Windows。

附带说明：有几个在 Windows 上运行的新 android 模拟器，我见过一些实际上与硬件接口（这避免了抽象层）。

如果您关心速度，您将获得更好的性能，因为模拟器是进程密集型的，因此运行的程序更少。（我的 i7, 8gb ram 可用于开发 - 尽管没有什么比设备更好......或者就此而言的关系）

要连接到您的计算机：[在我的手机上调试（Eclipse、Android）](https://stackoverflow.com/questions/4038613/debugging-on-my-phone-eclipse-android)

# c# - 如何更改 Windows Phone 用户代理

> ID：15489314
> 
> 赞同：1
> 
> 时间：2013-03-19T00:14:43.703
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在制作一个网络浏览器控件，而我更改用户代理的代码似乎不起作用。

```
 webBrowser1.Navigate(new Uri(textBox1.Text, null, null, "User-Agent: Mozilla 5.0 (Linux; U; Android 2.3.7; zh-cn; MB525 Build MIUI) UC AppleWebKit 534.31 (KHTML, like Gecko) Mobile Safari 534.31", UriKind.Absolute)); 
```

我喜欢这个用户代理，因为它似乎以更易于使用的移动格式加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:42:49.417

你的语法不正确。这就是你得到的（格式化）：

```
webBrowser1.Navigate(
    new Uri(
        textBox1.Text,
        null,
        null,
        "User-Agent: Mozilla 5.0 (Linux; U; Android 2.3.7; zh-cn; MB525 Build MIUI) UC AppleWebKit 534.31 (KHTML, like Gecko) Mobile Safari 534.31",
        UriKind.Absolute
    )
); 
```

这应该是（使用此作为参考： http: [//msdn.microsoft.com/en-US/library/windowsphone/develop/ff626636](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff626636(v=vs.105).aspx) (v=vs.105).aspx ）

```
webBrowser1.Navigate(
    new Uri(
        textBox1.Text
    ),
    null,
    "User-Agent: Mozilla 5.0 (Linux; U; Android 2.3.7; zh-cn; MB525 Build MIUI) UC AppleWebKit 534.31 (KHTML, like Gecko) Mobile Safari 534.31"
); 
```

# sql - 当两列中的值不匹配时连接两个表

> ID：15489318
> 
> 赞同：1
> 
> 时间：2013-03-19T00:15:01.780
> 
> 标签：sql, oracle

表格1：

```
onode_c, dnode_c, dist1 
```

表 2：

```
onode_c, dnode_c, dist2 
```

我需要一个返回的查询

```
onode_c, dnode_c, dist1, dist2 
```

`dist1`对于表 1 和表 2 中和`dist2`不匹配的记录

```
select  a.onode_c, a.dnode_c, trunc(a.dist1), trunc(b.dist2)
from table1 a, table2 b
where a.onode_c = b.onode_c and a.dnode_c = b.dnode_c and trunc(a.dist1) != trunc(b.dist2); 
```

上面的查询多次返回相同的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:21:03.997

试试下面的语句：

```
select a.onode_c, a.dnode_c, trunc(a.dist), trunc(b.dist2) from table1 a
left join table2 b on a.onode_c = b.onode_c and a.dnode_c = b.dnode_c
where trunc(a.dist1) != trunc(b.dist2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:21:24.083

尝试使用`SELECT DISTINCT`也许

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:23:30.937

尝试这个：

```
select  DISTINCT a.onode_c, a.dnode_c, trunc(a.dist1), trunc(b.dist2)
from table1 a, table2 b
where a.onode_c = b.onode_c and a.dnode_c = b.dnode_c and trunc(a.dist1) != trunc(b.dist2); 
```

# c++ - 如何在 emacs C++ 编译模式下跳过“包含在文件中”？

> ID：15489319
> 
> 赞同：6
> 
> 时间：2013-03-19T00:15:07.280
> 
> 标签：c++, emacs, emacs24, compilationmode

我喜欢使用 emacs 使用编译模式编译我的 C++ 项目并`next-error`跳转到源代码中的警告和错误。但是，我发现`next-error`编译输出中的“包含在文件中”行的每个#include 都非常烦人。我知道你可以`compilation-skip-threshold`用来跳过警告，但我不想跳过警告，这些包含行显示为警告。

对我来说，这似乎是编译模式下的一个错误（这些不是警告），但是[这个错误](http://debbugs.gnu.org/cgi-bin/bugreport.cgi?bug=3965)被关闭为“不是错误”

具体来说，对于如下所示的输出：

```
In file included from /path/to/file1.h:linenum1:
In file included from /path/to/file2.h:linenum2:
In file included from /path/to/file3.h:linenum3:
/path/to/file4.h:linenum4:columnnum4: warning: you are bad at c++ 
```

我想`next-error`直接带我到 file4.h，而不是在途中停留在文件 1 到 3 中。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T03:08:06.523

我为自己尝试过。我们似乎有不同的 gcc 版本，因为我的输出如下所示：

```
g++ test.cc 
In file included from file3.h:1:0,
                 from file2.h:1,
                 from file1.h:2,
                 from test.cc:2:
file4.h:1:2: warning: #warning "you are bad at c++" [-Wcpp] 
```

但我仍然看到了问题。显然，`'gcc-include`破坏事物的是正则表达式。在我的情况下，所有这些“来自”行都正确匹配，但最后一个。问题是它以冒号结尾，这以某种方式使其成为警告。我现在有点懒得检查这样的匹配目标有什么可能的 gcc 输出消息（应该是有原因的，嗯？），所以我只回答这个问题：

```
;; This element is what controls the matching behaviour: according to
;; `compilation-error-regexp-alist` doc, it means if subexpression 4 of the
;; regexp matches, it's a warning, if subexpression 5 matches, it's an info.
(nth 5 (assoc 'gcc-include compilation-error-regexp-alist-alist))
(4 . 5)

;; We could try and tinker with the regexp, but it's simpler to just set it as
;; "always match as info".
(setf (nth 5 (assoc 'gcc-include compilation-error-regexp-alist-alist)) 0) 
```

这个片段阻止了编译模式突出显示最后一个“来自”行作为对我的警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:23:37.477

配置`compilation-skip-threshold`.

# haskell - 带镜头和拉链的遍历树

> ID：15489324
> 
> 赞同：17
> 
> 时间：2013-03-19T00:15:36.740
> 
> 标签：haskell, lenses, haskell-lens

我正在学习镜头包。我必须说这是一项相当具有挑战性的任务。

有人能告诉我如何用镜头的拉链穿过一棵树吗？特别是，我如何编写一个函数来获取根列表并允许我访问子树的分支？

假设我有这棵树。如果我的输入是`[1, 3]`，该函数应该允许我访问节点 10 和 11。

```
import Control.Lens
import Data.Tree
import Data.Tree.Lens

testTree = Node 1 [ Node 2 [ Node 4 [ Node 6 [], Node 8 [] ],
                             Node 5 [ Node 7 [], Node 9 [] ] ],
                    Node 3 [ Node 10 [], 
                             Node 11 [] ] 
                  ]

zipperTree = zipper testTree 
```

此外，我究竟如何使用`saveTape`和`restoreTape`保存遍历路径（到 StateT 或 IORef）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T01:01:08.790

edit: I normally experiment in ghci to understand new code so for those like myself I have created a [School of Haskell post/page](https://www.fpcomplete.com/user/davorak/zipper-tree-examples) which comes with the below examples but they are editable and runnable.

* * *

Think this examples will answer your questions but for expediency I am going to modify a different node. My knowledge of the zipper functions in the [lens](http://hackage.haskell.org/package/lens) is rather shallow. It takes a little longer to read and get used to the types in the [lens](http://hackage.haskell.org/package/lens) package compared to many other packages, but afterwards it is not bad. I had not used the zipper module or the tree module in the lens package before this post.

The trees do not pretty pretty well with `show` so if I have time I will come back and add some pretty printed out put otherwise it is probably key to work in the repl with these examples to see what is happening.

# Viewing

If I want to view the value of the first node, according to the [tree lens package](http://hackage.haskell.org/packages/archive/lens/3.8.7.3/doc/html/Data-Tree-Lens.html) this is referred to as the root, then you can:

```
zipperTree & downward root & view focus 
```

# Modifying

To modify that value and recreate the tree(rezip the tree):

```
zipperTree & downward root & focus .~ 10 & rezip 
```

If you wanted to move down the branches then you need to use `downward branches`. Here is an example that modifies the root of the first branch and rezipx the tree:

```
zipperTree & downward branches 
           & fromWithin traverse 
           & downward root 
           & focus .~ 5 
           & rezip 
```

Here I move downward to the list of branchs. I then use `fromWithin` use use `traverse` to traverse the list, if this was a tuple I could use `both` instead.

# Saving and replaying traversal paths

`saveTape` and `restoreTape` allow for you to save your position in the zipper so that it can be restored latter.

Save a position:

```
tape = zipperTree & downward branches 
                  & fromWithin traverse 
                  & downward root 
                  & saveTape 
```

Then to recreate the traversal through the tree I can:

```
t <- (restoreTape tape testTree) 
```

Then you can use t as the new zipper and modify it as normal:

```
t & focus .~ 15 & rezip 
```

The tape replays the steps that you took so can work on other trees so the follow would work with the tape as defined above:

```
testTree2 = Node 1 [ Node 2 [] ]
t2 <- (restoreTape tape testTree2)
t2 & focus .~ 25 & rezip 
```

# Modifying Multiple locations

If you want to modify multiple roots just hold off on reziping the zipper. The following modifies the two roots of testTree2:

```
zipper testTree2 & downward root 
                 & focus .~ 11 
                 & upward 
                 & downward branches 
                 & fromWithin traverse 
                 & downward root 
                 & focus .~ 111 
                 & rezip 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-09T22:58:41.963

根据我的经验，您通常不需要**Zipper**。在这种情况下，您可以定义一个**遍历**，它允许您访问给定根节点路径的子林。

```
-- Make things a little easier to read
leaf :: a -> Tree a
leaf = return

testForest :: Forest Int
testForest = [ Node 1 [ Node 2 [ Node 4 [ leaf 6, leaf 8]
                               , Node 5 [ leaf 7, leaf 9]]
                      , Node 3 [ leaf 10, leaf 11]]]

-- | Handy version of foldr with arguments flipped
foldEndo :: (a -> b -> b) -> [a] -> b -> b
foldEndo f xs z = foldr f z xs

-- | Traverse the subforests under a given path specified by the values of
-- the parent nodes.
path :: Eq a => [a] -> Traversal' (Forest a) (Forest a)
path = foldEndo $ \k ->     -- for each key in the list
       traverse               -- traverse each tree in the forest
     . filtered (hasRoot k)   -- traverse a tree when the root matches
     . branches               -- traverse the subforest of the tree

  where
  hasRoot :: Eq a => a -> Tree a -> Bool
  hasRoot k t = k == view root t

-- | Helper function for looking at 'Forest's.
look :: Show a => Forest a -> IO ()
look = putStr . drawForest . (fmap . fmap) show

-- Just show 'path' in action

demo1 = look $ testForest & path [1,3] .~ []
demo2 = look $ testForest & path [1,3] . traverse . root *~ 2
demo3 = look $ testForest ^. path [1,3]
demo4 = [] == testForest ^. path [9,3]
demo5 = traverseOf_ (path [1,3]) print testForest 
```

# java - 如何在 JVM 和 Jboss 中为负载服务器应用程序设置指定代理？

> ID：15489327
> 
> 赞同：0
> 
> 时间：2013-03-19T00:15:50.540
> 
> 标签：java, jboss, proxy, jvm

我有一个负载服务器应用程序，它在两个应用程序 App1 和 App2 之间切换。每个 App 都有自己的 IFrame 与银行通信，但是当银行返回数据时，加载服务器无法区分是哪个应用程序。我对此进行了调查，然后我发现这是代理问题。

结果，我试图强制应用程序使用`proxyHost`&`proxyport`但它不起作用，然后我强制Jboss使用特定的`proxyHost`&`proxyport`但它也不起作用。它使用盒子上的默认代理，它不关心我的配置。

`proxyHost`在Jboss`proxyPort`启动脚本`bin\run.bat`（`-Dhttp.proxyHost=XX.XX.XX.XX -Dhttp.proxyPort=8080`

我在 google 和 stackoverflow 中搜索并尝试了不同的想法，但没有奏效。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:31:17.810

您能否尝试使用以下 JVM 参数运行您的应用程序：`-Dsun.net.inetaddr.ttl=0 -Dnetworkaddress.cache.ttl=0`？

DNS 设置在请求成功后被缓存，这些参数将禁用缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:08:45.370

您可以强制应用程序忽略 proxyHost 的任何 VM 参数，而只使用运行它的机器的默认代理。您可以编写一个小型 java 程序，它只打印默认代理并在特定框上运行它（例如这个）：

```
import java.net.InetSocketAddress;
import java.net.ProxySelector;
import java.net.URISyntaxException;
import java.util.Iterator;
import java.util.List;

import java.net.URI;

public class PrintDefaultProxy {
    public static void main(String[] args) {

        // If you clear these 2 properties then set java.net.useSystemProxies to true, it 
        // will use the default System Proxy and ignore any settings given to the VM
        // e.g. http.proxyHost & http.proxyPort
        System.setProperty("http.proxyHost", "");
        System.setProperty("http.proxyPort", "");

        System.setProperty("java.net.useSystemProxies", "true");
        System.out.println("detecting proxies");
        List l = null;
        try {
            String url = "http://google.com.au/";
            l = ProxySelector.getDefault().select(new URI(url));
        } 
        catch (URISyntaxException e) {
            e.printStackTrace();
        }
        if (l != null) {
            for (Iterator iter = l.iterator(); iter.hasNext();) {
                java.net.Proxy proxy = (java.net.Proxy) iter.next();
                System.out.println("proxy Type : " + proxy.type());

                InetSocketAddress addr = (InetSocketAddress) proxy.address();

                if (addr == null) {
                    System.out.println("No Proxy");
                } else {
                    System.out.println("proxy hostname : " + addr.getHostName());
                    System.setProperty("http.proxyHost", addr.getHostName());
                    System.out.println("proxy port : " + addr.getPort());
                    System.setProperty("http.proxyPort", Integer.toString(addr.getPort()));
                }
            }
        }
    }
} 
```

基本上在代码中，如果您清除 http.proxyHost 和 http.proxyPort 然后将 java.net.useSystemProxies 设置为 true，它将使用系统默认代理（如果有）并忽略任何 VM 参数。

```
System.setProperty("http.proxyHost", "");
System.setProperty("http.proxyPort", "");

System.setProperty("java.net.useSystemProxies", "true");
System.out.println("detecting proxies"); 
```

然后你在你的盒子上运行它并传递一些虚假的代理地址：

```
C:\t>"C:\Program Files\Java\jdk1.6.0_19\bin\java.exe" -Dhttp.proxyHost=99.0.0.99.9 -Dhttp.proxyPort=8080  PrintDefaultProxy
detecting proxies
proxy Type : DIRECT
No Proxy 
```

请注意，如果您不清除这两个属性，它将使用您传递给 JVM 的参数——但据我了解，这不是您的应用程序似乎在做的事情。这是应用程序应该“正常工作”而无需专门设置 proxyHost 的一种方式——这很可能是它忽略您在 JVM/Jboss 级别提供的任何设置的原因。

当行为与您尝试在 Jboss 中更改这些设置时所经历的一致时，这意味着您无法在应用程序或 Jboss 级别将其配置为使用 proxyHost，并且很可能需要在网络级别完成。

# java - 二维数组 JButtons 不适用于 get() 方法？

> ID：15489328
> 
> 赞同：-2
> 
> 时间：2013-03-19T00:15:54.990
> 
> 标签：java, swing, get, jbutton, swap

我一直在尝试下国际象棋，但被困在交换两颗棋子上

这是我的 ChessSquare 课

```
 public class ChessSquare extends JButton 

{ 

public int Yposition;
public int Xposition;
private String Type;
public ChessSquare( Icon s, int y , int x , String piece )

{
 super(s);

 Yposition = y;
 Xposition = x;
 Type = piece ;
}         

public int getXposition()
 {
   return this.Xposition;
 }  

    public int getYposition()
 {
   return this.Xposition;
 }  

    public String getType()
   {
      return "";
   }

 } 
```

然后我将其添加到 ChessBoard 类中，使用 ChessSquare 类作为 2D 数组

```
 public class ChessBoard extends JFrame implements ActionListener
  {
     String type;
     ChessSquare[][] s = new ChessSquare[8][8];
     int xPos1,xPos2,yPos1,yPos2,i,j;
     JPanel panel;

    ........

    public void actionPerformed(ActionEvent e)
  {
       Boolean flag = false ;

         if(!flag)
  {
     xPos1 = s.getYposition();
     yPos1 = s.getXposition();

     flag = true;
   }
     else
   {

    xPos2 = s.getYposition();
    yPos2 = s.getXposition();

    s[xPos1][yPos1] = s[xPos2][yPos2];
    s[xPos2][yPos2] = s[xPos1][yPos1];
    flag = false;

 }

 }

 } 
```

试图交换两件......但它不起作用？请帮忙... ![错误](../Images/11123e31575bed4cbda8b96e7aea0cd7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:45:49.250

方法`getXposition`和`getYposition`是您的自定义类的实例方法`ChessSquare`，而不是您的`ChessSquare` *数组*。要访问这些方法，您必须引用`2D`数组中的元素，例如：

```
xPos1 = s[0][0].getYposition();
yPos1 = s[0][0].getXposition(); 
```

# performance - 广度优先搜索分支因子

> ID：15489329
> 
> 赞同：6
> 
> 时间：2013-03-19T00:16:01.360
> 
> 标签：performance, algorithm, artificial-intelligence, breadth-first-search

BFS 的运行时间是 O(b^d)

b 是分支因子 d 是图从起始节点开始的深度（级别#）。

我用谷歌搜索了一段时间，但我仍然没有看到有人提到他们是如何找出这个“b”的

所以我知道分支因子意味着“每个节点拥有的子节点数”

例如，二叉树的分支因子为 2。

所以对于 BFS 图，b = 平均我们图中每个节点的所有分支因子。

或 b = MAX（在每个节点的所有分支因子中）？

此外，无论我们选择哪种方式 b，在接近我们的运行时间时似乎仍然模棱两可。例如，如果我们的图有 30000 个节点，那么只有 5 个节点有 10000 个分支，其余 29955 个节点只有 10 个分支。我们将深度设置为 100。

在这种情况下，似乎 O(b^d) 没有意义。

有人可以解释一下。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:28:59.490

更经常引用的运行时是 BFS 为 O(m + n)，其中 m 是边数，n 是节点数。这是因为每个顶点处理一次，每条边最多处理两次。

我认为在使用 BFS 时会使用 O(b^d)，例如，暴力破解国际象棋游戏，其中每个位置都有一个相对恒定的分支因子，并且您的引擎需要深入搜索一定数量的位置。例如，国际象棋的 b 约为 35，深蓝的搜索深度为 6-8（最高可达 20）。

在这种情况下，由于图是相对无环的，所以 b^d 与 m + n 大致相同（它们对于树是相等的）。O(b^d) 更有用，因为 b 是固定的，而 d 是您可以控制的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:33:55.467

在图中**O(b^d)**，**b = MAX**。因为这是最坏的情况。检查来自普林斯顿[http://www.princeton.edu/~achaney/tmve/wiki100k/docs/Breadth-first_search.html](http://www.princeton.edu/~achaney/tmve/wiki100k/docs/Breadth-first_search.html)的链接- 转到时间复杂度部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T06:16:42.253

引用*人工智能*——Stuart Russel 和 Peter Norvig 的现代方法：

> 时间和空间复杂度总是根据问题难度的某种度量来考虑。在理论计算机科学中，典型的度量是状态空间图的大小，|V | + |E|，其中 V 是图的顶点（节点）集合，E 是边（链接）集合。当图形是输入到搜索程序的显式数据结构时，这是合适的。（罗马尼亚的地图就是一个例子。）在人工智能中，图形通常由初始状态、动作和转换模型隐式表示，并且通常是无限的。由于这些原因，复杂性用三个量表示： b，任何节点的分支因子或最大后继数；d，最浅目标节点的深度（即从根开始沿路径的步数）；和米，状态空间中任何路径的最大长度。时间通常以搜索期间生成的节点数来衡量，而空间则以存储在内存中的最大节点数来衡量。在大多数情况下，我们描述了在树上搜索的时间和空间复杂度；对于图，答案取决于状态空间中路径的“冗余”程度。

这应该让您清楚地了解 O(|V|+|E|) 和 b^d 之间的区别

# jquery - 从 json 数据创建下拉菜单

> ID：15489330
> 
> 赞同：1
> 
> 时间：2013-03-19T00:16:02.293
> 
> 标签：jquery, json, drop-down-menu, menu

我希望显示来自“conta”、“zip、city、street_a、street_b”、“count、number”的数据，并从“contact”键创建一个下拉菜单，但这无处可去，有人可以吗解释这是如何工作的，这是我所拥有的。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jQuery</title>
<!-- script type='text/javascript' href='https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script -->
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

data = [
{"conta":"13356","name":"MISS Two"},
{"zip":"01111","city":"NASHUA, MA","street_a":"10 MAIN ROAD SQUARE","street_b":"Nothing"},
{"count":"544","number":"250"},
[
  {"contact":"Mark Bre"},
  {"contact":"Mary Lou"},
  {"contact":"John Ton"},
  {"contact":"Carls Des"},
  {"contact":"Carlos Drt"}
 ]
] 

$('body').append('<select id="dynamicSelect"></select>');
var options="";
$.each(data,function(i1,val1){
   if($.isArray(val1)){
      $.each(data,function(i2,val2){
           options += "<option value="+ val2.contact +">" + val2.contact + "</option>"
      });
   }
}
$('#dynamicSelect').append(options);

</script>
</head>

<body>
The Select:<select id="dynamicSelect">
<option value="option value" selected="selected">option html</option>
</select>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:32:05.170

检查主数组元素是否为数组后，然后将主数组传递`each`给创建选项，而不是嵌套数组

改变：

```
if($.isArray(val1)){
      $.each(data,function(i2,val2){
           options += "<option value="+ val2.contact +">" + val2.contact + "</option>"
      });
} 
```

至：

```
if($.isArray(val1)){
      /* loop over "val1"*/
      $.each(val1,function(i2,val2){
           options += "<option value="+ val2.contact +">" + val2.contact + "</option>"
      });
} 
```

此外，您需要将代码包装在 中，代码在标签存在`docment.ready`之前触发`select`

将所有代码放入

```
$(function(){
   /* run code here*/

}); 
```

您缺少 first 的一些右括号`each`。使用浏览器控制台检查抛出的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:32:22.863

首先，您的 JS 代码中有一些错误。

*   你需要用一个`)`
*   内部调用`.each()`应该迭代`val1`而不是`data`再次

**JS**

```
// Dynamically add a label for the select to the body
var label = $('<label id="dynamicSelectLabel" for="dynamicSelect">The Select</label>').appendTo('body');
// Dynamically add the select to the body
var select = $('<select id="dynamicSelect"></select>').appendTo('body');
// For each value in the data array
$.each(data, function (i1, val1) {
    // If the value is an array
    if ($.isArray(val1)) {
        // For each value in the contact array
        $.each(val1, function (i2, val2) {
            // Add an option to the select with the contact name and value
            select.append('<option value=' + val2.contact + '>' + val2.contact + '</option>');
        });
    }
}); 
```

**[演示](http://jsfiddle.net/H7n6b/1/)**

# ruby - HomeBrew Mac os x 10.8 抛出错误“没有要加载的文件”

> ID：15489333
> 
> 赞同：8
> 
> 时间：2013-03-19T00:16:28.050
> 
> 标签：ruby, macos, homebrew

每当我在这台 Mac os 机器上运行 brew 命令时，我都会收到以下错误

```
> brew doctor
/usr/local/Library/Homebrew/macos.rb:251:in `require': no such file to load -- macos/xcode (LoadError)
    from /usr/local/Library/Homebrew/macos.rb:251
    from /usr/local/Library/Homebrew/utils.rb:3:in `require'
    from /usr/local/Library/Homebrew/utils.rb:3
    from /usr/local/Library/Homebrew/global.rb:7:in `require'
    from /usr/local/Library/Homebrew/global.rb:7
    from /usr/local/bin/brew:17:in `require'
    from /usr/local/bin/brew:17 
```

我拥有网络必须提供的一切。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-11T00:43:52.783

我有同样的问题并通过

```
cd /usr/local
git status 
```

如果`git status`显示一长串内容已被删除，那么这很可能是您的问题，并且可能是由您的 RVM 设置更改引起的。

要解决此问题，请执行以下操作：

```
git reset --hard 
```

现在尝试：

```
brew update 
```

它可能会说您需要先删除一些文件。使用命令删除该列表中的每个文件`sudo rm`。然后再做`brew update`一次。

此外，您可能需要这样做：

```
sudo chown -R $USER /usr/local 
```

在您可以运行 brew install 之前。

我使用[github.com/mxcl/homebrew/issues/18600](http://github.com/mxcl/homebrew/issues/18600)作为参考。

# vector - 围绕特定点旋转 D3DXVECTOR3

> ID：15489335
> 
> 赞同：1
> 
> 时间：2013-03-19T00:16:39.110
> 
> 标签：vector, matrix, direct3d, directx-10, rotational-matrices

这可能是一件非常简单的事情，但我对直接 x 的了解并没有达到我想要达到的水平。

目前我正在尝试创建一种在地形上移动的车辆。我试图通过在车辆周围创建一个正方形（4 个 D3DXVECTOR3 点）来使车辆识别地形，每个点都检测地形的高度并相应地调整车辆。

车辆是从 Microsoft 示例代码派生的简单对象。它有一个世界矩阵、坐标、旋转等。

我想要实现的是使这些点与车辆一起移动，当它移动时它们可以检测到高度的差异。这需要我在每次车辆移动时更新点，但我无法终生弄清楚如何让它们正确旋转。

所以总而言之，我正在寻找一种简单的方法来围绕原点（我的车辆坐标）旋转矢量。

这些点位于车轮附近，因此如果它起作用，无论车辆 y 轴旋转如何，它们都会留在那里。

这是我试过的：

```
D3DXVECTOR3 vec;
D3DXVec3TransformCoord(&vectorToHoldTransformation,&SquareTopLeftPoint,&matRotationY);
SquareTopLeftPoint = vec; 
```

这导致该点疯狂地旋转失控并离开地图。

```
xRot = VehicleCoordinateX + cos(RotationY) * (SquareTopleftX - VehicleCoordinateX) - sin(RotationY) * (SquareTopleftZ - VehicleCoordinateZ);
yRot = VehicleCoordinateZ + sin(RotationY) * (SquareTopleftX - VehicleCoodinateX) + cos(RotationY) * (SquareToplefteZ - VehicleCoordinateZ); 
```

BoxPoint 是指我试图旋转的向量。Vehicle当然是旋转的原点RotationY是它旋转的量。

这是这个正方形中 4 个向量中的 1 个的代码，但我假设一旦我得到 1 个，其余的只是复制粘贴。

无论我尝试什么，在完全离开地图的情况下，该点要么不动，要么失控。

这是我的对象类的片段

```
class Something
{
public:
    float x, y, z;
    float speed;          
    float rx, ry, rz;     
    float sx, sy, sz;

    float width;
    float length; 
    float frameTime;

    D3DXVECTOR3 initVecDir;
    D3DXVECTOR3 currentVecDir;

    D3DXMATRIX       matAllRotations;
    D3DXMATRIX       matRotateX;
    D3DXMATRIX       matRotateY;
    D3DXMATRIX       matRotateZ;
    D3DXMATRIX       matTranslate;
    D3DXMATRIX       matWorld;  
    D3DXMATRIX       matView;           
    D3DXMATRIX       matProjection;
    D3DXMATRIX       matWorldViewProjection;

//these points represent a box that is used for collision with terrain.
        D3DXVECTOR3 frontLeftBoxPoint;
        D3DXVECTOR3 frontRightBoxPoint;
        D3DXVECTOR3 backLeftBoxPoint;
        D3DXVECTOR3 backRightBoxPoint;
    } 
```

我在想有可能使用 D3DXVec3TransformCoord 来做到这一点

```
D3DXMatrixTranslation(&matTranslate, origin.x,0,origin.z);
D3DXMatrixRotationY(&matRotateY, ry);
D3DXMatrixTranslation(&matTranslate2,width,0,-length);
matAllRotations = matTranslate * matRotateY * matTranslate2;

D3DXVECTOR3 newCoords;
D3DXVECTOR3 oldCoords = D3DXVECTOR3(x,y,z);

D3DXVec3TransformCoord(&newCoords, &oldCoords, &matAllRotations); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:32:59.227

原来我需要做的是

1.  按 -origin 翻译。
2.  旋转
3.  按原产地翻译。

我正在做的是

1.  移动到原点
2.  旋转
3.  按长度/宽度翻译

以为是一样的。

```
 D3DXMATRIX matTranslate2;
D3DXMatrixTranslation(&matTranslate,-origin.x,0,-origin.z);
D3DXMatrixRotationY(&matRotateY,ry);
D3DXMatrixTranslation(&matTranslate2,origin.x,0,origin.z);
//D3DXMatrixRotationAxis(&matRotateAxis,&origin,ry);

D3DXMATRIX matAll = matTranslate * matRotateY * matTranslate2;

D3DXVECTOR4 newCoords;
D3DXVECTOR4 oldCoords = D3DXVECTOR4(x,y,z,1);

D3DXVec4Transform(&newCoords,&oldCoords,&matAll);
//D3DXVec4TransformCoord(&newCoords, &oldCoords, &matAll);

return newCoords; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:31:49.977

在不了解您的代码的情况下，我无法确切说明它的作用，但是如果您知道车辆在世界坐标中的航向角度，那么考虑这个问题的一种“简单”方法是以如下方式表示您的点车辆的中心在原点，使用简单的[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)根据航向围绕车辆旋转，然后将车辆的中心添加到结果坐标中。

```
x = vehicle_center_x + cos(heading) * corner_x - sin(heading) * corner_y
y = vehicle_center_y - sin(heading) * corner_x + cos(heading) * corner_y 
```

请记住，corner_x 和corner_y 以相对于车辆的坐标表示，而不是相对于世界。

# xml - 当变量的名称是另一个变量的值时如何引用 XSLT 变量

> ID：15489337
> 
> 赞同：0
> 
> 时间：2013-03-19T00:16:51.167
> 
> 标签：xml, xslt

```
<xsl:value-of select="$variable1"/>
<xsl:value-of select="$variable2"/> 
```

variable1 将是 $variable2 的值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:11:28.713

你不能。你可以做的是这样的：

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">

  <xsl:output method="xml" indent="yes"/>

  <!-- Dictionary mapping names to values -->
  <xsl:variable name="dict">
    <value name="var1">1</value>
    <value name="var2">2</value>
  </xsl:variable>

  <xsl:template match="/">
    <!-- Name of the value in 'variable1' -->
    <xsl:variable name="variable1" select="'var1'"/>
    <!-- Get the value in 'variable2' using 'variable1' -->
    <xsl:variable name="variable2" select="msxsl:node-set($dict)/value[@name=$variable1]"/>
    <root>
      <xsl:text>variable2: </xsl:text><xsl:value-of select="$variable2"/>
    </root>
  </xsl:template>

</xsl:stylesheet> 
```

`msxsl:node-set`是 Microsoft 特定的扩展，用于将片段转换为节点集。如果您使用的是非 Microsoft 处理器，则应该有可用的等效功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:34:32.630

与大多数编程语言一样，XSLT 变量名在运行时不可访问。

所以，解释你为什么要这样做——你想解决什么问题——我们可以向你展示解决它的正确方法。

# facebook - 在移动设备上查看时，fb 应用程序出现间歇性错误

> ID：15489339
> 
> 赞同：1
> 
> 时间：2013-03-19T00:17:11.637
> 
> 标签：facebook

自 2 月中旬以来，我们的应用程序有时会抛出错误“应用程序的移动版本不可用，因为它被错误地配置为移动访问。”

问题是 - 我们所有的应用程序*都*配置为移动访问。他们去年工作得很好，并且*大部分*时间都在继续工作，但偶尔会抛出我们无法确定的错误。在过去的一个月里，我们没有对我们的软件进行任何更改。

其他人是否正在经历这种情况？

我知道 FB 在 2 月初推出了新的迁移，这有关系吗？

出现此问题的应用程序：

```
http://m.odylfarm.com/eleanorandpark/
http://m.odylfarm.com/lauracardinal/ 
```

我们已尝试将 URL 更改为 https:// - 但这没有影响。

# java - eclipse 中的 Git Repositories 选项卡是空的

> ID：15489345
> 
> 赞同：2
> 
> 时间：2013-03-19T00:17:59.997
> 
> 标签：java, eclipse, git, repository, egit

我在 Eclipse 上添加了一个存储库，但是当我尝试添加第二个存储库时，两个存储库都消失了。我尝试添加一个现有的视图，但日食说“1 个目录已被添加，因此被隐藏”。如何让他们再次出现？

![打印问题](../Images/9f65cc872d69d229ba51945dcfe6a15a.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:30:14.770

信息消息是正常的（如[错误 315558](https://bugs.eclipse.org/bugs/show_bug.cgi?id=315558)中所述）：您无法添加已添加的存储库。

不正常的是搜索过程在 下出现空`Y:\`，而我假设有几个`repo/.git`目录供您选择。
尝试优化路径：`Y:/path/to/your/second/repo`看看那里是否更明显。

还要检查您正在使用的 EGit 版本，并尝试升级到最新版本 (2.3)

# batch-file - 如果在批处理运行时更新了所选文件，如何让批处理文件回显警报？

> ID：15489350
> 
> 赞同：0
> 
> 时间：2013-03-19T00:18:22.303
> 
> 标签：batch-file

如果某个文件更新，我想让我的批处理文件回显警报，但不知道如何处理代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:24:36.530

当您想（重新）开始监控时

```
for %%i in (filename) do set snapshot=%%~ti 
```

当您要检查文件是否已更新时，

```
for %%i in (filename) do if not "%snapshot%"=="%%~ti" ECHO file was updated 
```

# jquery - 动画显示动态添加的 html

> ID：15489351
> 
> 赞同：1
> 
> 时间：2013-03-19T00:18:23.183
> 
> 标签：jquery, dynamic, jquery-animate

我在任何地方都找不到这个解决方案。

用户进行选择并输入一些值。当他单击添加时，我希望使用 jQuery 添加的 html 以动画方式（或向下滑动）进入视图。如何检索元素高度以设置值？

这是父母；

```
<div class="order-summary-wrap"></div> 
```

这段代码有效，但很刺耳。

```
// build the summary boxes from the users inputs
function create_summary(){
    var summary_html = '';

    if( $('.cycle-01').hasClass('cycle-slide-active') ){
        summary_html = '<div class="toll-free-summary-contents remove-me"><p class="line-one"><span class="new-toll-free-number">' + $('.cycle-01 .step-2-container .number').find("option:selected").attr("value") + '</span> in <span class="from-toll-free-country">' + $('.cycle-01 .step-1-container .country').find("option:selected").attr("value") + '</span> will ring to <span class="forward-to-number">' + $('.cycle-01 .step-3-container .country').find("option:selected").attr("value") + '</span> in <span class="to-toll-free-country">' + $('.cycle-01 .step-4-container #ForwardNumberTo').attr("value") + '</span></p><p class="line-two"><span class="toll-free-cost">' + $('.billing-options-hidden').find("option:selected").attr("value") + '</span> (FIRST MONTH FREE) with each minute used costing  <span class="toll-free-per-minute-cost">' + $('.per-minute').text() + '</span></p><div class="remove"><a class="remove-link" href="#">Remove</a><a class="view-link" href="#">View Sample Bill</a></div></div>';
    } else {
        summary_html = '<div class="local-summary-contents remove-me"><p class="line-one"><span class="country-local-number">' + $('.cycle-02 .step-1-container .country').find("option:selected").attr("value") + '</span>  <span class="state-local-number">' + $('.cycle-02 .step-2-container .state').find("option:selected").attr("value") + '</span>  <span class="city-local-number">' + $('.cycle-02 .step-3-container .city').find("option:selected").attr("value") + '</span>  <span class="new-local-number">' + $('.cycle-02 .step-4-container .local').find("option:selected").attr("value") + '</span></p><p class="line-two"><span class="toll-free-cost">' + $('.billing-options-hidden').find("option:selected").attr("value") + '</span> (FIRST MONTH FREE) with each minute used costing  <span class="toll-free-per-minute-cost">' + $('.per-minute').text() + '</span></p><div class="remove"><a class="remove-link" href="#">Remove</a><a class="view-link" href="#">View Sample Bill</a></div></div>';
    }

    $('.order-summary-wrap').append(summary_html);
    $('.add-more-numbers').removeClass('hidden');
}

// click event to dynamically add the summary boxes to the DOM
$('.first-step, .add-number').click(function(e){
    create_summary();
}); 
```

此外，当单击“删除”链接时，我希望元素在从 DOM 中删除时进行动画处理。

```
// lets the user remove the number from the DOM
$('.order-summary-wrap').on('click', '.remove-link', function(e) {
    e.preventDefault();
    $(this).parent().parent().remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:26:03.310

如果你想向下滑动的是新的 summary_html，你可以这样做。在添加之前隐藏 DOM 元素，然后在添加后使用`.slideDown()`使其可见。

这是一个工作演示（用更简单的代码来说明）：http: [//jsfiddle.net/jfriend00/gHcZJ/](http://jsfiddle.net/jfriend00/gHcZJ/)

而且，这是您实现的代码：

```
// build the summary boxes from the users inputs
function create_summary(){
    var summary_html = '';

    if( $('.cycle-01').hasClass('cycle-slide-active') ){
        summary_html = $('<div class="toll-free-summary-contents remove-me"><p class="line-one"><span class="new-toll-free-number">' + $('.cycle-01 .step-2-container .number').find("option:selected").attr("value") + '</span> in <span class="from-toll-free-country">' + $('.cycle-01 .step-1-container .country').find("option:selected").attr("value") + '</span> will ring to <span class="forward-to-number">' + $('.cycle-01 .step-3-container .country').find("option:selected").attr("value") + '</span> in <span class="to-toll-free-country">' + $('.cycle-01 .step-4-container #ForwardNumberTo').attr("value") + '</span></p><p class="line-two"><span class="toll-free-cost">' + $('.billing-options-hidden').find("option:selected").attr("value") + '</span> (FIRST MONTH FREE) with each minute used costing  <span class="toll-free-per-minute-cost">' + $('.per-minute').text() + '</span></p><div class="remove"><a class="remove-link" href="#">Remove</a><a class="view-link" href="#">View Sample Bill</a></div></div>');
    } else {
        summary_html = $('<div class="local-summary-contents remove-me"><p class="line-one"><span class="country-local-number">' + $('.cycle-02 .step-1-container .country').find("option:selected").attr("value") + '</span>  <span class="state-local-number">' + $('.cycle-02 .step-2-container .state').find("option:selected").attr("value") + '</span>  <span class="city-local-number">' + $('.cycle-02 .step-3-container .city').find("option:selected").attr("value") + '</span>  <span class="new-local-number">' + $('.cycle-02 .step-4-container .local').find("option:selected").attr("value") + '</span></p><p class="line-two"><span class="toll-free-cost">' + $('.billing-options-hidden').find("option:selected").attr("value") + '</span> (FIRST MONTH FREE) with each minute used costing  <span class="toll-free-per-minute-cost">' + $('.per-minute').text() + '</span></p><div class="remove"><a class="remove-link" href="#">Remove</a><a class="view-link" href="#">View Sample Bill</a></div></div>');
    }
    summary_html.hide();
    $('.order-summary-wrap').append(summary_html);
    summary_html.slideDown();
}

// click event to dynamically add the summary boxes to the DOM
$('.first-step, .add-number').click(function(e){
    create_summary();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:29:02.773

jfriend00 打败了我。您可以从 DOM 中删除数字。

```
$('.order-summary-wrap').on('click', '.remove-link', function(e) {
    e.preventDefault();
    $(this).parent().parent().slideUp().remove();
}); 
```

# .htaccess - WAMP mod_rewrite RewriteRule 不起作用

> ID：15489353
> 
> 赞同：0
> 
> 时间：2013-03-19T00:18:29.730
> 
> 标签：.htaccess, mod-rewrite, wamp, wampserver, file-extension

我正在尝试在我的本地 wamp 服务器上使用[自适应图像。](http://adaptive-images.com/)ai-cache 文件夹没有出现，图像根本没有被替换。根据[这个线程](https://github.com/MattWilcox/Adaptive-Images/issues/32)，我尝试`RewriteRule .(?:jpe?g|gif|png)$ test.jpg`在 .htaccess 文件中并将 test.jpg 添加到同一文件夹中，但这并没有改变任何内容。

在 wamp 菜单中 Apache->Apache Modules->rewrite_module 被选中，并且在 httpd.conf 中未注释`LoadModule rewrite_module modules/mod_rewrite.so`

每当我更改 .htaccess 时，我都会重新启动 wamp 中的所有服务。此外，如果我`asdf`在顶部写它确实会给出 500 Internal Server Error 所以我知道文件正在被读取。

我究竟做错了什么？

这是位于几个子目录 (www/demos/test/) 中的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On

  # Adaptive-Images -----------------------------------------------------------------------------------

  # Add any directories you wish to omit from the Adaptive-Images process on a new line, as follows:
  # RewriteCond %{REQUEST_URI} !ignore-this-directory
  # RewriteCond %{REQUEST_URI} !and-ignore-this-directory-too

  RewriteCond %{REQUEST_URI} !assets

  # don't apply the AI behaviour to images inside AI's cache folder:
  RewriteCond %{REQUEST_URI} !ai-cache

  # Send any GIF, JPG, or PNG request that IS NOT stored inside one of the above directories
  # to adaptive-images.php so we can select appropriately sized versions

  RewriteRule \.(?:jpe?g|gif|png)$ adaptive-images.php

  # END Adaptive-Images -------------------------------------------------------------------------------
</IfModule> 
```

这是我的 httpd.conf 部分：

```
#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "c:/wamp/www/">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options None

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride all

    #
    # Controls who can get stuff from this server.
    #

#   onlineoffline tag - don't remove
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
    Allow from ::1:

</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:33:43.717

好吧，我知道为什么它不起作用了！这根本不是 WAMP/localhost 问题。

出于某种原因，自适应图像附带的默认 .htacess 文件并非在每种情况下都可以开箱即用。但是...我只需要添加`[NC,L]`到重写规则的末尾。html 和图像标记的 .jpg 扩展名为小写，但我的图像文件是用大写字母 (.JPG) 编写的，直到我在文件浏览器中打开文件扩展名时才注意到这一点。

*   **nocase|NC：** 使模式比较不区分大小写。
*   **last|L：** 立即停止重写过程，不再应用任何规则。特别注意每个目录和 .htaccess 上下文的注意事项（另请参见 END 标志）。

[*资源*](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriteflags)

这是最终代码：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On

  # Adaptive-Images -----------------------------------------------------------------------------------

  # Add any directories you wish to omit from the Adaptive-Images process on a new line, as follows:
  # RewriteCond %{REQUEST_URI} !ignore-this-directory
  # RewriteCond %{REQUEST_URI} !and-ignore-this-directory-too

  RewriteCond %{REQUEST_URI} !assets

  # don't apply the AI behaviour to images inside AI's cache folder:
  RewriteCond %{REQUEST_URI} !ai-cache

  # Send any GIF, JPG, or PNG request that IS NOT stored inside one of the above directories
  # to adaptive-images.php so we can select appropriately sized versions

  RewriteRule \.(?:jpe?g|gif|png)$ adaptive-images.php [NC,L]

  # END Adaptive-Images -------------------------------------------------------------------------------
</IfModule> 
```

# json - 为输入 json 中可能缺少的 List 集合创建隐式 json 读取

> ID：15489354
> 
> 赞同：1
> 
> 时间：2013-03-19T00:18:32.060
> 
> 标签：json, scala, playframework-2.1, salat

我正在关注 play-salat (github.com/leon/play-salat) 为 json 输入创建模型并保存到 mongodb。如何为输入 json 中可能缺少的 List 集合创建隐式 json 读取？如果输入 json 中缺少“位置”，以下代码会给出验证错误。

```
case class LIProfile(
  id: ObjectId = new ObjectId,
  positions: List[Position] = Nil
)

object LIProfile extends LIProfileDAO with LIProfileJson

trait LIProfileDAO extends ModelCompanion[LIProfile, ObjectId] {
  def collection = mongoCollection("liprofiles")
  val dao = new SalatDAO[LIProfile, ObjectId](collection) {}

  // Indexes
  collection.ensureIndex(DBObject("emailAddress" -> 1), "li_profile_email", unique = true)

  // Queries
  def findOneByEmail(email: String): Option[LIProfile] = dao.findOne(MongoDBObject("emailAddress" -> email))
}

trait LIProfileJson {

  implicit val liprofileJsonWrite = new Writes[LIProfile] {
    def writes(p: LIProfile): JsValue = {
      Json.obj(
        "id" -> p.id,
        "positions" -> p.positions
      )
    }
  }
  implicit val liprofileJsonRead = (
    (__ \ 'id).read[ObjectId] ~
    (__ \ 'positions).read (
            (__ \ 'values).read[List[Position]]
            ) 
  )(LIProfile.apply _)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:47:42.737

用于`readNullable`检索一个`Option`并将其映射到包含的列表或空列表。

```
implicit val liprofileJsonRead = (
  (__ \ 'id).read[ObjectId] ~
  (__ \ 'positions).readNullable (
    (__ \ 'values).read[List[Position]]
  ).map {
    case Some(l) => l
    case None => Nil
  }
)(LIProfile) 
```

甚至更短：

```
implicit val liprofileJsonRead = (
  (__ \ 'id).read[ObjectId] ~
  (__ \ 'positions).readNullable (
    (__ \ 'values).read[List[Position]]
  ).map { l => l.getOrElse(Nil) }
)(LIProfile) 
```

我不太确定你在这里真正需要什么导入，我的代码编译使用：

```
import play.api.libs.json._
import play.api.libs.json.Reads._
import play.api.libs.functional.syntax._ 
```

# ruby - 使用 Ruby 以编程方式将注释从一个 PDF 复制到另一个

> ID：15489358
> 
> 赞同：2
> 
> 时间：2013-03-19T00:18:48.453
> 
> 标签：ruby, pdf

我有大量 PDF 格式的书籍，主要来自[Pragmatic Programmers](http://www.pragprog.com)等出版商，我在 PDF 中做了很多注释（评论、突出显示、注释等），我想保留这些。当发布者更新 PDF 并且我下载更新时，这会成为一个问题。我想要一种将我的注释（基本上是更改）与新版本合并的方法。打开每一个并手动复制和粘贴显然是一件非常乏味的苦差事，所以：

有没有办法以编程方式做到这一点？我更喜欢使用 Ruby，但我对基于 shell 脚本的解决方案几乎同样满意，如果这些是唯一的选择，我什至愿意学习 Python 或使用 Perl。

# ios - 集合视图分页单元偏离中心

> ID：15489359
> 
> 赞同：1
> 
> 时间：2013-03-19T00:18:51.787
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我通过界面构建​​器启用了分页，当我滚动时（我正在使用水平滚动），它不会使集合单元居中，而是随着我的进展它开始在屏幕中结束一半。

我一次只显示一个巨细胞。

关于如何告诉页面将单元格在屏幕上居中的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:03:20.037

对 collectionView 大小和 flowLayout 进行小改动：

如果您需要插入部分：设置 left = right（如果未设置 All = 0）

最小线间距始终 = 0；

CollectionViewSize = CellSize 和 collectionView.center = self.view.center。

示例：[https ://github.com/lequysang/github_zip/blob/master/CollectionViewImagesCenterCell.zip](https://github.com/lequysang/github_zip/blob/master/CollectionViewImagesCenterCell.zip)

# c++ - 在应用程序中隐藏 MySQL 凭据

> ID：15489360
> 
> 赞同：4
> 
> 时间：2013-03-19T00:19:12.637
> 
> 标签：c++, mysql, security, desktop-application

我需要为一家公司创建一个应用程序，他们希望人们登录到该应用程序以获得不同的权限来执行不同的任务。

我最初的想法是创建一个 MySQL 数据库，将凭据硬编码到应用程序中，然后让应用程序连接到 MySQL 数据库。MySQL 数据库将有一个名为“users”的表，该表将存储用户名、密码和权限。然后应用程序将查询服务器并执行身份验证。

最大的问题是将 MySQL 凭据硬编码到应用程序中。如果应用程序落入坏人之手，如果他们四处寻找凭据并开始删除表，他们可能会对 MySQL 数据库造成很大损害。

所以我想开发一个服务器来充当 MySQL 数据库的接口。例如，客户端应用程序将通过 TCP 连接到服务器，服务器连接到 MySQL 数据库。这样，MySQL 凭据就不会暴露给最终用户。但是，这意味着我必须开发一个服务器应用程序，它 a) 将更难为我的客户维护和部署（而不是仅仅设置 MySQL 服务器）和 b) 有可能引入更多错误，因为我有一个额外的系统我需要做（这与部署错误修复等有关）

所以我在想，与其在数据库中有一个用户表并让应用程序使用硬编码的凭据直接连接到 MySQL 服务器，不如为最终用户提供实际的 MySQL 用户凭据，他们将在其中输入应用程序以连接到MySQL 服务器。这意味着如果有人拿到了应用程序，他们不会对 MySQL 数据库造成任何损害，但仍然存在最终用户将其凭据提供给错误人的风险。

让桌面应用程序连接到 MySQL 数据库的最佳方法是什么？除了我想到的3个之外还有其他解决方案吗，或者您对我的解决方案有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:37:10.767

正如@Perception 指出的那样。你最好的选择是在 MySQL 前面实现一个 Web 服务。您不希望来自未知 IP 地址的未知数量的客户端都可以访问您的数据库。

通过绑定 MySQL 连接来 DOS 攻击你真的很容易。更不用说您将非常严重地限制您扩展后端服务以满足不断增长的客户群的需求的能力，而两者之间没有 Web 服务。

Web 服务还可以为您提供以多种方式控制用户身份验证和授权的能力（用户/通行证组合、基于令牌的访问、OAuth 访问等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:39:22.680

在我工作的地方，我看到了两种做法：

1.  每个实体（个人、事物或企业（取决于所需的粒度级别）访问数据库）都有自己的凭据。这用于 MSSQL 和 Rocket Universe 数据库。这主要是零售和遗留软件。

2.  我们自己托管应用程序并为用户使用单独的身份验证系统。数据库凭据存储在我们托管应用程序的服务器上。客户端对后备数据库一无所知。这些通常是 Web 应用程序和 Web 服务。

我们可以做的事情是我们的许多应用程序实际上通过一个 RESTful 服务进行通信，该服务以某种方式模拟数据库。应用程序本身无权访问数据库。我会阅读关于宁静服务的维基百科文章以获取更多信息。我们的身份验证是使用 Nonce 编码的 HMAC 请求完成的，其中每个用户都获得了与他们的凭据相关联的自己的密钥。

将数据库包装在 Web 服务中会给您带来一些可能的优势：

*   如果您决定在保留相同信息的同时更改数据库结构，您甚至可能不需要更新客户端应用程序，只需更新服务即可。
*   凭据永远不会离开服务器，只要没有人可以访问您的服务器，您的凭据就会保持安全。总体上提高了安全性。
*   如果您的服务足够聪明，您甚至可以将通常在客户端的大部分内部逻辑转移到服务器上，从而使更新和错误修复几乎无缝地传递给客户端。

我看到的缺点：

*   维护是另一回事
*   您的应用程序容易受到拒绝服务攻击，但由于它是一个数据库，因此无论如何都可能存在问题
*   如果服务器宕机，所有客户端应用程序都会宕机，但无论如何，这仍然是个问题。

RESTful 架构：[http ://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

HMAC：[http ://en.wikipedia.org/wiki/Hash-based_message_authentication_code](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)

我们的 HMAC 系统是这样工作的：

*   用户使用用户名和密码登录到他们的本地应用程序。
*   本地应用程序与我们的身份验证服务进行通信，并获取该用户名和密码的“会话密钥”和共享密钥。
*   使用会话密钥（在短时间内到期），应用程序创建一个 API 密钥（持续很长时间）并将其存储到计算机。如果用户每次都需要登录，可以使用会话密钥代替 API 密钥。我们这样做主要是为了方便一些程序。如果计算机不安全，则应仅使用会话密钥，并且本地计算机上不存储任何 API 密钥。每次用户登录时，他们都会获得一个新的会话密钥。
*   对数据库服务的每个请求都伴随着一个 HMAC 签名的随机数，应用程序根据 API 密钥从授权服务中获取该随机数。获得随机数后，应用程序使用共享密钥对其进行签名。这些签名请求只能使用一次，因为 Web 服务（用户对此一无所知）对请求进行身份验证。一旦通过查看使用该特定 API/会话密钥的共享密钥对随机数进行哈希处理是否会产生相同的摘要，已在服务器端对签名的随机数进行了身份验证，该随机数将被标记为过期并授予请求。

如果不使用 HTTPS，上述内容很容易受到中间人攻击，因此人们经常根据 nonce 和请求的 URL 以及时间戳制作消息，并在此基础上计算 HMAC。然后服务器根据 URL 重新创建消息，检查时间戳是否在某个范围内（+/- 4 分钟或其他内容），然后根据该信息授权用户。

为了进一步细化操作，我们还有一个角色系统，用于检查拥有 Session/API Key 的用户是否已被授予请求他们请求的内容的权限。如果他们具有适当的角色，则批准该请求。

**简介**： 凭据是逐个用户完成的，最终用户不了解数据库，Web 服务将数据库包装在 RESTful API 中，并且使用基于角色的系统来使权限细化。

这只是一个建议，我**并不是**说这是最好或唯一的方法。这恰好是我们最终在我工作的地方这样做的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-17T08:55:05.283

让我们看一下处理数据库的两种方式：

*   **客户端直接连接数据库**，操作数据库
*   服务器连接数据库并**提供接口**供客户端使用

考虑到您的用例：

> 有效的有效序列号或存储/读取有关特定用户的信息

它可以通过以下方式设计以提供安全性。（我不是这方面的专家）

*   客户端直接连接数据库，操作数据库
    *   您不必使用管理员访问数据库，而是仅为客户端创建一个用户，并将**用户的访问权限限制**为仅查看（某些数据）。您可以通过更改此用户的权限来在数据库中强制执行安全策略。
    *   你可以参考[MySQL :: MySQL 5.1 Reference Manual :: 6 Security](http://dev.mysql.com/doc/refman/5.1/en/security.html)获取更多信息。
        *   6.2 MySQL访问权限系统
        *   6.3 MySQL 用户账户管理
*   服务器连接数据库并提供接口供客户端使用
    *   您可以使用 HTTP 并提供接口给客户端使用。并且只有后端连接到数据库。
    *   类似于 RESTful API，有许多易于使用的框架提供身份验证和授权。

在您的情况下，我认为让客户直接访问数据库并不是一个好主意。所以如果可能的话，第二种选择更好。

另请注意，基于密码的身份验证并不理想。

# java - Android SQLite SUM，抛出 NullPointer

> ID：15489361
> 
> 赞同：0
> 
> 时间：2013-03-19T00:19:15.903
> 
> 标签：java, android, sqlite

所以我正在开发一个应用程序，我刚刚开始学习适用于 android 的 SQLite，显然我在一个问题上被困了 3 天。每当我尝试从月份等于特定月份的表中对 SUM Up 字段运行查询时，都会抛出 NullPointer。

```
package com.example.droid;
import java.text.SimpleDateFormat;
import java.util.Calendar;

import com.example.droid.SqDb;

import android.accounts.Account;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.text.format.DateFormat;
import android.util.Log;

public class DbCon {

    private static SQLiteDatabase database;
    private SqDb SqHelper;
    private String[] UserColumns = 
        {
            SqDb.ACCOUNT_ID,
            SqDb.ACCOUNT_NAME,
            SqDb.ACCOUNT_USERNAME,
            SqDb.ACCOUNT_PASSWORD,
            SqDb.ACCOUNT_AGE,
            SqDb.ACCOUNT_CITY,
            SqDb.ACCOUNT_COUNTRY
        };
    private String [] GuestColumns = 
        {
            SqDb.GUEST_ID,
            SqDb.GUEST_NAME
        };
    private String [] TransColumns =
        {
            SqDb.TRAN_ID,
            SqDb.TRAN_DESC,
            SqDb.TRAN_TYPE,
            SqDb.TRAN_TIME,
            SqDb.TRAN_DAY,
            SqDb.TRAN_MON,
            SqDb.TRAN_YEAR,
            SqDb.TRAN_CAT,
            SqDb.TRAN_VAL
        };

    private static DbCon myDCon;

    DbCon(Context context)
    {
        SqHelper = SqDb.getInstance(context);
    }

    public static DbCon getInstance(Context context)
    {
        if(myDCon == null)
            {
            myDCon = new DbCon(context.getApplicationContext());
            }
        return myDCon;
    }

    public void open() throws SQLException
    {
        database = SqHelper.getWritableDatabase();
    }

    public void close()
    {
        SqHelper.close();
    }

    public void createUser(String username, String password, String name, String Age, String City, String Country)
    {
        ContentValues values = new ContentValues();
        values.put(SqDb.ACCOUNT_USERNAME, username);
        values.put(SqDb.ACCOUNT_PASSWORD, password);
        values.put(SqDb.ACCOUNT_NAME, name);
        values.put(SqDb.ACCOUNT_AGE, Age);
        values.put(SqDb.ACCOUNT_CITY, City);
        values.put(SqDb.ACCOUNT_COUNTRY, Country);
        database.insert(SqDb.ACCOUNT, null, values);
    }

    public void createGuest(String name)
    {
        ContentValues values = new ContentValues();
        values.put(SqDb.GUEST_NAME, name);
        database.insert(SqDb.GUEST, null, values);
        }

    public void AddTask(String desc, String type, String cat, double Value)
    {
        ContentValues values = new ContentValues();
        values.put(SqDb.TRAN_DESC, desc);
        values.put(SqDb.TRAN_TYPE, type);
        values.put(SqDb.TRAN_CAT, cat);
        values.put(SqDb.TRAN_VAL, Value);
        SimpleDateFormat df = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        Calendar cal = Calendar.getInstance();
        String timedata = df.format(cal.getTime());
        String[] whens = timedata.split(" ");
        String time = whens[1];
        String[] dates = whens[0].split("/");
        values.put(SqDb.TRAN_TIME, time);
        values.put(SqDb.TRAN_DAY, dates[2]);
        values.put(SqDb.TRAN_MON, dates[1]);
        values.put(SqDb.TRAN_YEAR, dates[0]);
        database.insert(SqDb.TRAN, null, values);
    }
    Calendar cal = Calendar.getInstance();
    public int getMonthInt(){
        int month = cal.get(Calendar.MONTH);
        return month;
    }
    public double CountMonthExp()
    {
        double din = 0;
        this.open();
        Cursor c = database.rawQuery("SELECT sum("+SqDb.TRAN_VAL+") as"+SqDb.TRAN_VAL+" FROM "+SqDb.TRAN+" WHERE "+SqDb.TRAN_TYPE+"=EXPENDITURE and "+SqDb.TRAN_MON+"=3", null);
        if(c.moveToFirst()){
            din = c.getDouble(0);
        }
        else{
            din = 0;
        }
        return din;
    }

} 
```

有什么建议么？是的，该表创建得很好并且工作正常，我测试插入记录工作正常。

这是错误：

> 03-19 00:18:38.119: E/AndroidRuntime(19822): 致命异常: main 03-19 00:18:38.119: E/AndroidRuntime(19822): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.droid/com.example.droid.Hist_act}：android.database.sqlite.SQLiteException：没有这样的列：EXPENDITURE：，编译时：SELECT sum(tran_val) astran_val FROM tran WHERE tran_type=EXPENDITURE and tran_mon=3 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.app.ActivityThread .handleLaunchActivity(ActivityThread.java:1667) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 03-19 00:18:38.119: E/AndroidRuntime(19822)：在 android.app。ActivityThread$H.handleMessage(ActivityThread.java:935) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-19 00:18: 38.119: E/AndroidRuntime(19822): 在 android.os.Looper.loop(Looper.java:130) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.app.ActivityThread.main(ActivityThread .java:3687) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-19 00:18:38.119: E/AndroidRuntime(19822) : 在 java.lang.reflect.Method.invoke(Method.java:507) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java:867) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 03-19 00:18:38.119:E/AndroidRuntime(19822): at dalvik.system.NativeStart.main(Native Method) 03-19 00:18:38.119: E/AndroidRuntime(19822): Caused by: android.database.sqlite.SQLiteException: no such column: EXPENDITURE：，编译时：SELECT sum(tran_val) astran_val FROM tran WHERE tran_type=EXPENDITURE and tran_mon=3 03-19 00:18:38.119: E/AndroidRuntime(19822): at android.database.sqlite.SQLiteCompiledSql.native_compile(Native方法) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92) 03-19 00:18:38.119: E/AndroidRuntime(19822) : 在 android.database.sqlite.SQLiteCompiledSql.(SQLiteCompiledSql.java:65) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:83) 03 -19 00:18:38.119：E/AndroidRuntime（19822）：在 android.database.sqlite.SQLiteQuery.(SQLiteQuery.java:49) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42) 03 -19 00:18:38.119: E/AndroidRuntime(19822): 在 android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android .database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324) 03-19 00:18:38.119: E/AndroidRuntime(19822): at com.example.droid.DbCon.CountMonthExp(DbCon.java:122) 03- 19 00:18:38.119: E/AndroidRuntime(19822): 在 com.example.droid.Hist_act.onCreate(Hist_act.java:42) 03-19 00:18:38.119: E/AndroidRuntime(19822): 在 android。 app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 03-19 00:18:38.119:E/AndroidRuntime(19822): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 03-19 00:18:38.119: E/AndroidRuntime(19822): ... 11 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:24:56.200

我想说这里至少有两个问题：

```
SELECT sum(tran_val) astran_val FROM tran WHERE tran_type=EXPENDITURE and tran_mon=3 
```

我怀疑你的意思是：

```
SELECT sum(tran_val) as tran_val FROM tran WHERE tran_type='EXPENDITURE' and tran_mon=3 
```

我相信您将能够自己更改代码以实现这些调整。

# c# - 如何安全、干净地重写关键/生产代码？

> ID：15489362
> 
> 赞同：3
> 
> 时间：2013-03-19T00:19:26.397
> 
> 标签：c#, .net, design-patterns, refactoring

我有一些关键的生产程序需要从头开始重写。举个简单的例子：

```
public class ProductionClass {
    public IList<Values> WillBeFiredIfThisBreaks(Input input) {
       ...
    }
} 
```

输入对象的排列太多，无法彻底进行单元测试，我想安全地玩它，因为这些例程每天都被大量使用。所以，我的想法是：

1) 重命名当前实现并将其标记为过时。

2）编写一个新的实现，如果有任何问题，它会退回到旧的实现（见下文）

3) 在新的实现在 prod 中运行一两个月没有问题后，删除旧的实现。

```
public class ProductionClass {

    public IList<Values> WillBeFiredIfThisBreaks(Input input) {
       try{
          var ret = NewImpl(input);
       } catch(Exception){
          ret = null;
       }

       if(ret == null || ret.Count == 0){
          Log.Error("NewImpl Failed! Inputs: {0}", inputs);
          return OldImpl(input);
       }
       return ret;
    }

    public IList<Values> NewImpl(Input input) {
       ...
    }

    [Obsolete("Rewritten 03/18/2013, throw away once NewImpl confirmed stable", false)]
    public IList<Values> OldImpl(Input input) {
       ...
    }
} 
```

上面的方法有点难看，因为我必须为我需要重写的每个方法重新创建这个逻辑。（当新代码确认稳定时，我将相应地需要删除回退逻辑并删除每个位置的过时方法）。所以我的问题是：是否有任何 .NET 框架或设计模式可以让这种“极度偏执”的代码重写得更优雅一些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:54:37.713

由于您要求一种模式，因此可能的响应是将 AOP 与方法编织一起使用。但更好的回应是将您的精力集中在创建单元测试上。

# c - free() 在子进程释放内存时引起麻烦

> ID：15489367
> 
> 赞同：0
> 
> 时间：2013-03-19T00:20:12.860
> 
> 标签：c

```
#include<stdio.h>
#include<unistd.h>
#include<fcntl.h>
#include<malloc.h>

int main(int argc, char* argv[]){
 int fd,fd1,fd2,fd3;
 int fork_id1,fork_id2,fork_id3;
 char *buffer =  NULL;
 char *buff = NULL;
 char *loc = NULL;
 int no_bytes_read = 0;
 int no_bytes_write = 0;
 int total_file_size = 0;
 int half_file_size = 0;
 int count = 0;
 int ret_val = 0;

 if(argc < 5){
  printf("Enter 1 i/p and 3 o/p files");
  return -1;
 }

 fd = open(argv[1],O_RDONLY);
 if(fd == -1){
  printf("\nRead file desc not created!\n");
  return -1;
 }

 total_file_size = lseek(fd,0,SEEK_END);
 half_file_size = (total_file_size / 2);
 lseek(fd,0,SEEK_SET);
 printf("\n Total File size is : %d \n",total_file_size);

 buffer = (char *)malloc((sizeof(char) * total_file_size));
 if(buffer == NULL){
  printf("\n Cant allocate memory for buffer \n");
  return -1;
 }

 no_bytes_read = read(fd,buffer,total_file_size);

 fork_id1 = fork();
if(fork_id1 == 0){

  fd1 = open(argv[2],O_WRONLY);
  if(fd1 == -1){
   printf("\n write file des for child1 not created!\n");
   return -1;
  }

  buff = (char *)malloc((sizeof(char) * half_file_size));
  if(buff == NULL){
   printf("\n buff not created for child1 \n");
   return -1;
  }
  loc = buff;

  for(count = 0; count <= half_file_size; count++){
   *buff++ = *buffer++;
  }
  buff = loc;

  no_bytes_write = write(fd1,loc,half_file_size);
  free(buff);
  buff = NULL;
 }
 else{
  wait();
  fork_id2 = fork();
  if(fork_id2 == 0){

   fd2 = open(argv[3],O_WRONLY);
   if(fd2 == -1){
    printf("\n write file des not created for child2 \n");
    return -1;
   }

   buff = (char *)malloc((sizeof(char) * half_file_size));
   if(buff == NULL){
    printf("\n buff not created for child1 \n");
    return -1;
   }
   loc = buff;

   for(count = half_file_size+1 ; count <= total_file_size; count++){
    *buff++ = buffer[count];
}
   buff = loc
   no_bytes_write = write(fd2,loc,half_file_size);
   free(buff);
  }
  else{
   wait();
   fork_id3 = fork();
   if(fork_id3 == 0){

    fd3 = open(argv[4],O_WRONLY);
    if(fd3 == -1){
     printf("\n write file des not created for child3 \n");
     return -1;
    }

    buff = (char *)malloc((sizeof(char)* total_file_size));
     if(buff == NULL){
      printf("\n buff not created for child1 \n");
      return -1;
     }
     loc = buff;

     for(count = 0 ; count <= total_file_size; count++){
      *buff++ = *buffer++;
     }
     buff = loc;
     no_bytes_write = write(fd3,loc,total_file_size);
     free(buff);
   }
   else{
     wait(); //TODO
     //free(buffer);
     printf("\n Parent \n");
     /* To compare the files */
     //ret_val = validate(argv[1],argv[2],argv[3],argv[4],total_file_size);
     //if(ret_val == -1){
     // return -1;
     //}
   }
  }
 }
 return 0;
} 
```

我将整个文件复制到缓冲区中，并将字节的前半部分复制到文件 A，将字节的第二半部分复制到文件 B，并将完整内容复制到文件 C。在每个孩子中，我为临时缓冲区分配内存，当我试图释放我得到一个分段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:25:19.440

这是原因：

```
 for(count = 0; count <= half_file_size; count++){
   *buff++ = *buffer++;
  ...
  free(buff); 
```

您的循环正在更改您分配内存的指针。您只能`free`在具有由 . 返回的原始值的指针上使用`malloc`。

# javascript - 在 UIWebView 中将 Swiffy Flash 优化为 HTML5 加载

> ID：15489369
> 
> 赞同：4
> 
> 时间：2013-03-19T00:20:19.327
> 
> 标签：javascript, html, performance, uiwebview, google-swiffy

我正在加载从 Swiffy 工具生成的相当大的 HTML5/Javascript 文件，该工具将 Flash 文件转换为 HTML5 和 Javascript 怪物。JS 文件在 300KB-1MB 之间。这些文件需要几秒钟才能加载到第三代 iPad 上的 UIWebView 中。除了简化动画之外可能无事可做，但我只是想检查一下是否有任何我可能遗漏的优化技巧。

# algorithm - 我可以在 12 个字符串 [0-9a-z] 中包含 2 个数字（32 位）吗？{13}

> ID：15489370
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:20:19.820
> 
> 标签：algorithm

我想将 2 个 32 位数字打包成 12 个字符串，例如 123 456 -> abcdef0000000

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:28:36.200

选择 [0-9a-z] 给出 36 个符号。使用 12 个这样的符号，您将获得 36^12 = 4.7e18 个不同的字符串。

3 个 32 位数字与 1 个 96 位数字相同，有 2^96 = 7.9e28 个不同的值。

在 12 个位置上，您可以用该字母表表示的数字多于您可以表示的数字，所以不，您无法实现所需的包装。

如果你使用 [0-9a-zA-Z] 你有 62 个符号。62^12 = 3.2e21 - 仍然很短。

给定多个符号 S 和字符串长度 L，您可以通过求解 S^L >= 2^B 计算出可以存储多少位信息。对于您的情况，B = 96。让我们使用 Base64 字母表，所以 S = 64（这也使数学更容易）。然后：

```
 64^L >= 2^96
 take log2 of both sides
 L * log2(64) >= 96 * log2(2)
 L * 6 >= 96
 L >= 16 
```

因此，使用 Base64 字母表，您可以将 96 位存储在 16 个符号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:08:29.360

您实际上希望将 3 个 4 字节长度的数字压缩为一个 12 字节长度的字符串。是的，你可以这样做，但你必须使用所有 256 个 ANSI 符号（其中一些是不可打印的，如 #13、#7、#10），它甚至不会是“包”，只是前 4 个字节将保存一个数字，第二个 4 个字节将保存第二个数字，第三个 4 个字节将保存第三个数字。

如果你想将两个 4 字节的数字打包成一个长度为 12 的可读（可打印）字符串，你需要能够将 4 个字节填充到一个字符串的 6 个“数字”中，幸运的是 12 可以被 2 整除，而你不需要不必玩不均匀的包装长度。因此，解决 256^4 <= X^6，我们收到 X 为 41，这意味着是的，如果您使用 Base64 字母表（如对先前 andwer 的评论），您可以拥有这样的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:07:37.907

假设您的意思是 3 个数字：

是否可以在字符串中获取它们取决于语言。但是，您不能对字符集有*任何*限制。一个 32 位的数字是 4 个字节，其中三个是 12 个字节。零是一种可能性——任何不允许您在字符串中存储零字节的语言都不允许这样做。但是，有些语言并不在意——我想到了 Delphi。它存储带有长度代码而不是终止符的字符串，因此您可以将任何内容放入字符串中。

假设您的意思是 2 个数字：

[0-9][AZ] 是 36 个符号。36^6 < 2^32，它不会工作。

[0-9][AZ][az] 是 62 个符号。62^6 > 2^32，你可以做到。

另一方面，如果您正在谈论包含某种类型的宽字符的字符串，即使三个数字也可以轻松打包，尽管您必须使用一些非 ASCII 字符来完成这项工作。选择任何 256 个符号，您就可以开始了。您甚至可以选择 2048 个符号（如果您查看东亚语言，您会发现更多）并将每个数字打包成三个字符。

# python - Pymodbus（串行）通过 tcp 串行连接

> ID：15489371
> 
> 赞同：0
> 
> 时间：2013-03-19T00:20:32.400
> 
> 标签：python, serial-port, tty, modbus

我将在我的 Linux 服务器和蜂窝调制解调器之间创建连接，其中调制解调器将充当 TCP 串行服务器。

调制解调器本身通过 RS232 连接连接到 modbus 设备（工业协议）。

我想使用 pymodbus 来促进与终端 modbus 设备的对话。但是，我不能在 PyModbus 中使用 TCP modbus 选项，因为终端设备使用串行 modbus (Modbus RTU)。而且我不能在 Pymodbus 中使用串行 modbus 选项，因为它希望在 linux 服务器上打开一个实际的本地串行端口（tty 设备）。

如何桥接串行连接，以便 pymodbus 库将连接视为本地串行设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T20:10:25.553

实际上，我正在研究类似的东西，并决定制作自己的串行/TCP 桥接器。使用虚拟串行端口来处理与每个调制解调器的通信。

我使用了 minimummodbus 库，尽管我必须对其进行一些修改才能处理虚拟串行端口。

我希望你解决了你的问题，如果你没有，我可以尝试帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:53:07.957

没有直接的解决方案可以让您的 linux 服务器认为 MODBUS RTU 实际上是 MODBUS TCP 连接。

在所有情况下，您的调制解调器都必须将数据从 TCP 传输到串行（反之亦然）。所以我假设：1）您可以通过某种方式对您的调制解调器进行编程并指示它做任何您想做的事情 2）调制解调器的制造商提供了一个内置机制来做到这一点。

如果 1)：您应该对调制解调器进行编程，以便在将数据从 TCP 连接复制到 RS 链路时，它可以用 RTU ADU 替换 TCP ADU（反之亦然）。

如果 2)：只需将您的 RTU 框架提供给制造商设计的任何 API。

# objective-c - 在循环内多次设置 UILabel 文本

> ID：15489372
> 
> 赞同：0
> 
> 时间：2013-03-19T00:20:33.700
> 
> 标签：objective-c, cocoa-touch

我在 XCode 中闲逛，试图了解一些有关 iOS SDK 和 Objective-C 的知识。

我在下面有这个 for 循环，它应该在屏幕上打印出几个值（取决于选择的月份数），但它只是打印出最终值。

谁能指出为什么？

非常感谢，提前！

```
for (int i = 1; i <= myMonthsDouble; i++)
{
    myPaymentAmount = (myBalanceDouble/10) + myInterestDouble;
    myBalanceDouble -= myPaymentAmount;
    //convert myPaymentAmount double into string named myPaymentAmountString
    NSString *myPaymentAmountString = [NSString stringWithFormat:@"%f", myPaymentAmount];
    NSString *paymentInformation = [[NSString alloc] initWithFormat:@"%@ months, %@ per month.", monthsString, myPaymentAmountString];
    myInterestDouble = (myBalanceDouble * (myInterestDouble/100))/12;
    self.label.text = paymentInformation;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:29:16.517

它仅将最后一个值打印到屏幕上，因为您只有一个标签。每次到达循环结束时，您都在设置该标签的文本，该文本将覆盖最后一个值。如果要将它们全部打印到屏幕上，则需要有多个标签，或者必须将字符串附加在一起并将它们放在标签或`UITextView`格式化的标签中，以便它们都可以看到（大多数可能是文本视图，但可以使用标签来完成。）

这样做的一个例子是：

```
label.text = [label.text stringByAppendingString:newString];
numLines++; //this starts at 0; 
```

然后在最后：

```
label.numberOfLines = numLines; 
```

# windows - Windows 共享文件夹和 Azure

> ID：15489374
> 
> 赞同：1
> 
> 时间：2013-03-19T00:20:39.667
> 
> 标签：windows, azure, smb, shared-directory

我正在将旧版 Web 应用程序转移到云 (Windows Azure) 中，并且我正在使用 Azure 云驱动器作为大文件的存储介质。我正在使用工作角色来创建共享（2+ 个实例将竞争挂载以确保高可用性）。Web 角色将共享装载为驱动器。这很好用。

为了减少我的工作量，我需要将其映射为站点根目录内的文件夹，*而*不是驱动器。如何以编程方式（批处理脚本）将共享映射为文件夹而不是驱动器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:15:54.583

您将在网络共享和所需的本地路径之间使用符号链接：

```
mklink /d E:\sitesroot\0\desiredDir \\rolewithshare\sharename 
```

# java - 启动画面导致 MenuItems 不出现

> ID：15489377
> 
> 赞同：0
> 
> 时间：2013-03-19T00:21:12.480
> 
> 标签：java, android, sharedpreferences, menuitem, splash-screen

我已经构建了一个启动屏幕，它加载一个（启动）活动，然后启动另一个活动，它工作正常。（我已将其附在下面 - 它称为 SPLASH 1）

我创建了另一个启动屏幕来替换这个应该只运行一次的启动屏幕 - 然后在创建一个`SharedPreferences`布尔值之后它应该加载另一个活动。一切似乎都很好，但是现在当它加载新活动时，没有任何菜单项出现。我不知道 SPLASH 2 中发生了什么变化 - 但其中的某些内容导致在`MenuItems`加载与 SPLASH 1 完全相同的活动后不出现 (NEWCORE.JAVA)

我真的不确定这里发生了什么 - 非常感谢任何帮助！

（如果需要任何其他信息，请告诉我）

飞溅 1.（工作）

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.content.Intent;
import com.nfc.linkingmanager.R;

public class SplashScreen extends Activity {

private boolean mIsBackButtonPressed;
private static final int SPLASH_DURATION = 1000; 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.splash_screen);

    Handler handler = new Handler();

    // run a thread after 2 seconds to start the home screen
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

            // make sure we close the splash screen so the user won't come back when it presses back key

            finish();

            if (!mIsBackButtonPressed) {
                // start the home screen if the back button wasn't pressed already 
                Intent intent = new Intent(SplashScreen.this, NewCore.class);
                SplashScreen.this.startActivity(intent);
           }

        }

    }, SPLASH_DURATION); // time in milliseconds (1 second = 1000 milliseconds) until the run() method will be called

}

@Override
 public void onBackPressed() {

    // set the flag to true so the next activity won't start up
    mIsBackButtonPressed = true;
    super.onBackPressed();

}
} 
```

SPLASH 2（不工作 - 导致菜单项不会出现在它加载的活动中）

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.content.Intent;
import com.nfc.linkingmanager.R;
import android.content.SharedPreferences;
import java.lang.Object;
import android.preference.PreferenceManager;

public class SplashScreen extends Activity
{
private Handler handler = new Handler()
{
   public void handleMessage(Message msg)
   {
       Intent i = new Intent(SplashScreen.this, AppActivity.class);
       SplashScreen.this.startActivity(i);
                            this.finish();
   }
};

protected void onCreate(Bundle savedInstanceState)
{
   super.onCreate(savedInstanceState);

   SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
   if(!prefs.getBoolean("first_time", false))
   {
       SharedPreferences.Editor editor = prefs.edit();
       editor.putBoolean("first_time", true);
       editor.commit();
       Intent i = new Intent(SplashScreen.this, NewCore.class);
       this.startActivity(i);
                            this.finish();
   }
   else
   {
       this.setContentView(R.layout.country_list);
       handler.sendEmptyMessageDelayed(0, 2000);
   }

 }
 } 
```

NEWCORE.JAVA（由两个启动画面连接 - 使用 SPLASH 2 时仅缺少菜单项）

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.CursorAdapter;
import android.widget.ListView; 
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class NewCore extends ListActivity {

 public static final String ROW_ID = "row_id";
 private ListView conListView;
 private CursorAdapter conAdapter;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    conListView=getListView();
    conListView.setOnItemClickListener(viewConListener);

    // map each name to a TextView
    String[] from = new String[] { "name" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(NewCore.this, R.layout.country_list, null, from, to);
    setListAdapter(conAdapter); // set adapter
}

@Override
protected void onResume() 
{
   super.onResume();  
   new GetContacts().execute((Object[]) null);
 } 

 @Override
 protected void onStop() 
 {
   Cursor cursor = conAdapter.getCursor();

   if (cursor != null) 
      cursor.deactivate();

   conAdapter.changeCursor(null);
   super.onStop();
 }    

 private class GetContacts extends AsyncTask<Object, Object, Cursor> 
 {
   DatabaseConnector dbConnector = new DatabaseConnector(NewCore.this);

   @Override
   protected Cursor doInBackground(Object... params)
   {
      dbConnector.open();
      return dbConnector.getAllContacts(); 
   } 

   @Override
   protected void onPostExecute(Cursor result)
   {
      conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
   } 
} 

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
   super.onCreateOptionsMenu(menu);
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.country_menu, menu);
   return true;
}   

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
   Intent addContact = new Intent(NewCore.this, NewCore.class);
   startActivity(addContact);
   return super.onOptionsItemSelected(item);
}

OnItemClickListener viewConListener = new OnItemClickListener() 
{
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
   {         
      Intent viewCon = new Intent(NewCore.this, NewCore.class);
      viewCon.putExtra(ROW_ID, arg3);
      startActivity(viewCon);
   }
};    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:10:04.100

在 Splash 2 中

```
SetContentView(R.layout.country_list); 
```

略低于 `super.onCreate(savedInstanceState);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:35:05.247

创建一个扩展 Android Activity 类的新活动，并将您的菜单处理放在那里。然后，在您的其他活动中扩展新活动 - 从而确保菜单处理是一致的。对于列表，您可以创建第二个扩展 ListActivity 的新活动，或者获取 ListActivity 代码并使用菜单扩展您之前的活动。

# ios - CLGeocoder 延迟直到完成处理程序

> ID：15489379
> 
> 赞同：0
> 
> 时间：2013-03-19T00:21:23.407
> 
> 标签：ios, clgeocoder, completionhandler

我有一个应用程序需要从字符串到纬度/经度值进行地理编码，我使用 iOS 类参考中的地理编码器：

[http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)

但是完成处理程序在我需要它之后被调用（即我有使用这些纬度/经度值的代码，但在它们可用之前被调用）

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:27:53.827

将使用 lat-long 的代码放入地理编码器的完成处理程序中。这就是它的用途。

# c# - C# 简单的控制台应用程序股票交易

> ID：15489382
> 
> 赞同：0
> 
> 时间：2013-03-19T00:21:32.117
> 
> 标签：c#, arrays, console-application, user-input, finance

嗨，我是 C# 新手，我正在尝试构建一个非常简单的股票跟踪控制台应用程序，用户在其中输入有关股票的一些信息，程序保存并使用输入。我一直在浏览在线教程，但我似乎无法将它们放在一起。

我想请用户选择是要卖出股票、买入股票还是退出程序。如果他们选择买入或卖出股票，程序将要求他们输入股票代码、购买的股票数量和支付的价格。

在这种情况下，我希望用户能够继续购买或出售股票，直到他们选择退出应用程序。该程序应跟踪用户对每个股票代码的总库存量。例如，用户可以输入他们在 2012 年 2 月 1 日购买了 100 股 APPL 股票，然后输入他们在 2012 年 2 月 15 日又购买了 50 股 APPL 股票，然后在 3 日卖出了 25 股 APPL 股票1/12。

该程序将跟踪信息，当用户选择退出时，程序将输出他们还剩下多少股。在上面的例子中，他们还剩下 125 股。

最终我想把它变成一个实时股票交易程序，但现在我只是迈出了第一步。

我已经在下面包含了我到目前为止编写的代码。我不明白处理用户输入的最佳方式。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections;

namespace StockTracker
{
class Program
{
    static void Main(string[] args)
    {

        while (true)
        {
            Console.WriteLine("Welcome to the Stock Tracker");
            Console.WriteLine("--------------------------------");
            Console.WriteLine("Please choose from the following options:");
            Console.WriteLine("1) Buy Stock, 2) Sell Stock, 0) Exit");

            ArrayList Array1 = new ArrayList();
            ArrayList Array2 = new ArrayList();

            string userValue = Console.ReadLine();
            string message = "";

            double price;
            int amount;
            string stockTicker;

            switch (userValue)
            {

                case "1":
                    Console.WriteLine("Enter ticker to buy:");
                    stockTicker = Console.ReadLine();
                    Array1.Add(stockTicker);
                    Console.WriteLine("Enter stock price");
                    price = double.Parse(Console.ReadLine());
                    Array1.Add(price);
                    Console.WriteLine("Enter Quantity");
                    amount = int.Parse(Console.ReadLine());
                    Array1.Add(amount);
                    Console.WriteLine("***Stock Purchased***");
                    break;

                case "2":
                    //message = "Enter stock ticker to sell";
                    Console.WriteLine("Enter stocker ticker to sell");
                    stockTicker = Console.ReadLine();
                    Array2.Add(stockTicker);
                    Console.WriteLine("Enter Quantity");
                    amount = int.Parse(Console.ReadLine());
                    Array2.Add(amount);
                    Console.WriteLine("***Stock Sold***");
                    break;

                case "0":
                    Console.WriteLine("Good Bye!");
                    return;

                default:
                    message = "Invalid entry";
                    break;

            }

            Console.Write(message);
            Console.ReadLine();
            Console.WriteLine();

        } //while (userValue != "0");  
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:45:12.737

您需要考虑您的要求到底是什么。您需要跟踪每笔交易吗？还是只是每只股票的总数？您希望这些信息持久存在吗？

如果您只是要跟踪每只股票的总数，我建议您使用[Dictionary](http://msdn.microsoft.com/en-us/library/9tee9ht2.aspx)而不是您`ArrayList`的 s。像这样的东西：

```
Dictionary<string,int> myStocks = new Dictionary<string,int>();
//....
            case "1":
                Console.WriteLine("Enter ticker to buy:");
                stockTicker = Console.ReadLine();
                Console.WriteLine("Enter stock price");
                price = double.Parse(Console.ReadLine());
                Console.WriteLine("Enter Quantity");
                amount = int.Parse(Console.ReadLine());
                int currAmount = 0;
                myStocks.TryGetValue(stockTicker,out currAmount);
                myStocks[stockTicker] = currAmount + amount;
                Console.WriteLine("***Stock Purchased***");
                break; 
```

如果您确实需要分别跟踪名称和金额，您应该创建一个类（称为它`Trade`），它具有股票代码、金额、价格、日期等属性，并将它们存储在`List<Trade>`.

# c - 如何在掷骰子时成功地在 C 中使用 rand ，而不需要经过 1000 次才能正确完成？

> ID：15489384
> 
> 赞同：0
> 
> 时间：2013-03-19T00:22:00.687
> 
> 标签：c, random, time, std, dice

因此，我成功制作了以下程序，该程序将允许用户输入一个数字（介于 1 到 12 之间），然后在两个骰子成功掷出最初输入的数字后告诉用户尝试了多少次。因此，如果该人键入 7。如果两个骰子总数为 5，它将第一次进行随机掷骰，它将显示...“掷 1 的结果：3 + 2” ..etc

但是由于某种原因，当我这样做时，它需要 1000 多圈才能弹出 7，从而完成程序。骰子的几率应该在 1/12 左右而不是 1/1000 左右，所以我知道我编码错误。如果有人可以帮助我找出问题所在，那就太好了。

到目前为止，这是我的代码...

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(void){

int sought;
int roll1 = 7;
int roll2 = 7;
int minAmount = 0;
int maxAmount = 6;
int counter = 0;

printf("Dice Thrower\n");
printf("==============\n");
printf("Total Sought : ");
scanf("%d", &sought);
while (sought > 12){
        printf("Bad Input! Try Again!\n");
        printf("Total Sought : ");
        scanf("%d", &sought);
        }

while (sought != roll1 + roll2){
counter++;
srand(time(NULL));
roll1 = minAmount + rand() % (maxAmount + 1 - minAmount);
roll2 = minAmount + rand() % (maxAmount + 1 - minAmount);
printf("Result of Throw %d : %d + %d\n", counter, roll1, roll2);
}
printf("You got your total in %d throws!\n", counter);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:24:56.397

`srand()`你一直在为每一次掷骰子打电话。也就是说，您使用每一行的当前时间初始化随机种子。因此，结果每 1 秒只改变一次（不是每卷一次）。

移动`srand(time(NULL))`到 while 循环的前面。

# html - 如何创建空格以替换代码中的白色

> ID：15489385
> 
> 赞同：2
> 
> 时间：2013-03-19T00:22:04.140
> 
> 标签：html, widget, tumblr

作为一个相对较新的 Flash 用户，我可能不会使用正确的“术语”，从而最终让您感到困惑。为此，我提前道歉。无论如何，我正在尝试使用它：

[http://abowman.com/google-modules/stingray/?edit=true](http://abowman.com/google-modules/stingray/?edit=true)

Widget，正如它的制造商所说的那样。我想要做的是让背景成为一个不特定数量的空白空间 - 所以黄貂鱼会漂浮在我的网页上而不会阻碍其内容。我想到了两种方法，两种方法都不行；

1.  将背景图像更改为一个大的空 .png，然后
2.  只需删除代码中与背景相关的所有内容。

尽管我尽了最大的努力，而且相当可怜，但我只能得到一个又大又丑的白色方块。有任何想法吗？哦，顺便说一下，这是我的代码：

```
<object type="application/x-shockwave-flash" style="outline:none;" data="http://stingraygadget.googlecode.com/svn/trunk/stingray.swf?up_stingrayColor=000000&up_backgroundImage=&up_backgroundColor=FFFFFF&up_stingrayName=Stingray&up_speed=.2&" width="300" height="200">
    <param name="movie" value="http://stingraygadget.googlecode.com/svn/ trunk/stingray.swf?up_stingrayColor=000000&up_backgroundImage=http://i.imgur.com/0Id3HHg.png&up_backgroundColor=FFFFFF&up_stingrayName=Stingray&up_speed=.2&"></param>

    <param name="AllowScriptAccess" value="always"></param>

    <param name="wmode" value="opaque"></param>

    <param name="scale" value="noscale"/>

    <param name="salign" value="tl"/>
</object> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:02:26.030

如果您愿意，可以将闪光灯的背景设置为透明。

```
<param name="wmode" value="transparent" /> 
```

但是，并非所有浏览器都支持此功能，而且我不确定您是否可以在不将`.swf`-file 保存为具有透明背景的文件的情况下执行此操作（您应该自己做这个（？））

仅供参考：[isflashdeadyet.com](http://isflashdeadyet.com/)

# c++ - 在 C++ 中写入文本文件时使用布尔标志的问题

> ID：15489388
> 
> 赞同：1
> 
> 时间：2013-03-19T00:22:38.257
> 
> 标签：c++

我正在学习读/写文件的语法和细微差别。这是我的问题。如果我的代码基于用户标志 (write_outfile = true) 写入文件，那么我在最后关闭文件的尝试会导致“未定义标识符”错误。

但是，如果我在同一个“if”语句中打开然后关闭文件，那么一切都很好。

这是麻烦的代码片段：

```
#include <iostream>
#include <fstream>

int main()
  bool write_outfile = true;

  if (write_outfile)
  {
    ofstream outfile;
    outfile.open("output_test.txt");
    outfile << "This is my first text file written from C++.\n";
  }

// Do some other stuff here

  if (write_outfile)
  {
        outfile.close();
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:24:37.240

`ofstream outfile`在最外层范围内声明。否则，它只在第一个 if 语句中定义。那是：

```
#include <iostream>
#include <fstream>

int main() {
  bool write_outfile = true;
  ofstream outfile;

  if (write_outfile)
  {
    outfile.open("output_test.txt");
    outfile << "This is my first text file written from C++.\n";
  }

// Do some other stuff here

  if (write_outfile)
  {
        outfile.close();
  } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:25:04.243

`if`语句块引入了一个新范围。您`outfile`在该范围内创建，它在以下被销毁`}`。只需在块`outfile`外定义：`if`

```
bool write_outfile = true;

ofstream outfile;
if (write_outfile)
{
  outfile.open("output_test.txt");
  outfile << "This is my first text file written from C++.\n";
}
// ... 
```

# matlab - Matlab 的 fsolve 收敛 *但 * 似乎给出了错误的解决方案

> ID：15489390
> 
> 赞同：2
> 
> 时间：2013-03-19T00:22:51.350
> 
> 标签：matlab, nonlinear-functions, stability, convergence

我正在尝试使用 fsolve 求解非线性方程组；让我们说

F(x;lambda) = 0，其中 lambda 是参数向量，x 是我要求解的向量。

我正在使用 Matlab 的 fsolve。

我有 2 个参数 lambda 值，我想解决系统问题。对于 lambda 的一个值，我得到了一个解决方案，这似乎没问题。

对于 lambda 的另一个值，我再次得到一个解决方案（matlab 以 1 的标志退出。但是我知道这不是一个实际的解决方案例如，我知道 x 的某些维度必须彼此相等，并且这个我从 fsolve 获得的解决方案并非如此。

我已经尝试过 trust-region 和 levenberg-marquardt 算法，但没有得到更好的结果。（明确强制那些 x 相同，似乎仍然给出的解决方案与我对系统属性的期望不一致）

我的问题是：fsolve 使用的算法是否取决于系统的任何稳定性？难道是在我上面提到的第二种情况下更改参数 lambda 会使系统变得不稳定，这会使 fsolve 难以正确解决它吗？

谢谢你，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:05:27.170

fsolve 不是“失败” - 正如 jucestain 评论的那样，它为您提供了一个局部最小值，这不一定是全局最小值。这就是它的设计目的。

为了提高获得全局最小值的机会，您需要：

*   知道你最初的猜测是好的

*   使用初始猜测网格多次运行优化，并选择最佳结果

*   添加约束以防止求解器误入您知道具有局部最小值的区域

*   修改您的成本函数以删除局部最小值

如果您遇到可以*保证*全局最小值的非线性求解器，请告诉我们！

# c# - C# 文件处理 - 创建文件并打开

> ID：15489391
> 
> 赞同：3
> 
> 时间：2013-03-19T00:22:52.583
> 
> 标签：c#, file, file-io, directory, streamwriter

这就是我在文件上创建和写入的内容：

```
 Create_Directory = @"" + path;
    Create_Name = file_name;

    private void Create_File(string Create_Directory, string Create_Name )
    {
        string pathString = Create_Directory;
        if (!System.IO.Directory.Exists(pathString)) { System.IO.Directory.CreateDirectory(pathString); }

        string fileName = Create_Name + ".txt";
        pathString = System.IO.Path.Combine(pathString, fileName);
        if (!System.IO.File.Exists(pathString)) { System.IO.File.Create(pathString); }

        ///ERROR BE HERE:
        System.IO.StreamWriter file = new System.IO.StreamWriter(pathString);
        file.WriteLine(Some_Method(MP.Mwidth, MP.Mheight, MP.Mtype, "" )); 
        file.Close();
    } 
```

我整天都在努力解决的问题是在创建文件后写入文件。所以，我的程序创建一个文件就好了，然后在写之前给出一个错误：

“在 mscorlib.dll 中发生了“System.IO.IOException”类型的未处理异常”

“附加信息：该进程无法访问文件 'D:\Projects\Project 15\Project 15\world\world maps\A.txt'，因为它正被另一个进程使用。”

有趣的是，当我再次运行程序并尝试创建一个已经存在的文件时，如您所见，它会跳过文件创建，开始写入并且工作正常，我真的希望我的程序创建文件并在没有的情况下写入必须重新运行它...我在这里没有看到什么？:S

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:24:56.090

问题是[File.Create](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)返回一个打开`Stream`的，你永远不会关闭它。在您创建`StreamWriter`.

话虽如此，您不需要“创建”文件。 `StreamWriter`会自动为你做。只需删除此行：

```
 if (!System.IO.File.Exists(pathString)) { System.IO.File.Create(pathString); } 
```

一切都应该按照书面规定进行。

请注意，我会稍微改写一下，以使其更安全：

```
private void Create_File(string directory, string filenameWithoutExtension )
{
    // You can just call it - it won't matter if it exists
    System.IO.Directory.CreateDirectory(directory);

    string fileName = filenameWithoutExtension + ".txt";
    string pathString = System.IO.Path.Combine(directory, fileName);

    using(System.IO.StreamWriter file = new System.IO.StreamWriter(pathString))
    {
        file.WriteLine(Some_Method(MP.Mwidth, MP.Mheight, MP.Mtype, "" )); 
    }
} 
```

您也可以只使用`File.WriteAllText`或类似的方法来避免以这种方式创建文件。使用`using`块保证文件将被关闭，即使`Some_Method`引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:27:29.820

您可以使用`File`该类，因为它为您完成了很多工作

例子：

```
private void Create_File(string Create_Directory, string Create_Name)
{
    string pathString = Create_Directory;
    if (!System.IO.Directory.Exists(pathString)) { System.IO.Directory.CreateDirectory(pathString); }

    pathString = System.IO.Path.Combine(pathString, Create_Name + ".txt");
    File.WriteAllText(fileName, Some_Method(MP.Mwidth, MP.Mheight, MP.Mtype, ""));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T20:17:21.643

```
 static void Main(string[] args)
        {
            FileStream fs = new FileStream("D:\\niit\\deep.docx", FileMode.Open, FileAccess.Read);
            StreamReader sr = new StreamReader(fs);
            sr.BaseStream.Seek(0, SeekOrigin.Begin);
            string str = sr.ReadLine();
            Console.WriteLine(str);
            Console.ReadLine();

        } 
```

# sql - 显示来自数据库的列表框中的所有字段，vb.net

> ID：15489392
> 
> 赞同：1
> 
> 时间：2013-03-19T00:22:57.290
> 
> 标签：sql, vb.net, ms-access, listbox

我正在尝试制作一个列表框来显示 Access 数据库中特定表的所有字段。我有几张桌子，想法是让每张桌子都由不同的按钮加载（并清除框中的项目）。一个技巧是桌子的大小并不完全相同。如何让每个表的所有字段都显示出来。我现在只显示一个字段：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim connString As String = "Provider=Microsoft.ACE.OLEDB.12.0;data source='C:\dummy_data.accdb';"
    Dim conn As New OleDbConnection(connString)
    Dim sql As String = "SELECT * FROM Customers"
    Dim cmd As New OleDbCommand(sql, conn)
    conn.Open()
    Dim reader As OleDbDataReader = cmd.ExecuteReader()
    ClientList.Items.Clear()
    While reader.Read()
        ClientList.Items.Add(reader(0).ToString())
    End While
    reader.Close()
    conn.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:13:56.573

如果您不反对使用 a`DataGridView`而不是 a `ListView`，您可以这样做：

```
 Dim connString As String = "Provider=Microsoft.Jet.OLEDB.4.0;data source='PathToMyDatabase';"
    Dim sql As String = "SELECT * FROM Tメイン;"

    Dim dt As DataTable

    With New OleDbDataAdapter(sql, connString)
        Dim ds As New DataSet()
        .Fill(ds)
        dt = ds.Tables(0)
    End With

    Me.DataGridView1.DataSource = dt 
```

我的计算机上没有“ACE.OLEDB”，因此必须改用 JET 提供程序，但它应该以相同的方式工作。

我应该补充一点，您可以使用此方法从数据库中检索数据，但据我所知，将 a 绑定`DataTable`到 a并没有简单的方法`ListView`（例如，请参阅[此 MSDN 问题](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/c52596a2-2eb6-40d1-a714-c2830d8c609f/)），您必须遍历列在您的`DataTable`第一个并将列标题添加到您的`ListView`，然后遍历行并添加数据。

更新：

为了回答您关于如何从数据库中导出数据的问题，`DataGridView`我记得我不久前编写了代码来执行此操作。

```
Private Function ExportToExcelFile(ByVal FileName As String) As Boolean

    With New Excel.Application
        With .Workbooks.Add()
            For Each sheet As Worksheet In .Worksheets
                If sheet.Index > 1 Then
                    Call sheet.Delete()
                End If
            Next
            With CType(.Worksheets(1), Worksheet).Range("A1")
                For Each column As DataGridViewColumn In Me.dgvData.Columns
                    .Offset(0, column.Index).Value = column.HeaderText
                    For Each row As DataGridViewRow In Me.dgvData.Rows
                        .Offset(row.Index + 1, column.Index).Value = row.Cells(column.Index).Value
                    Next
                Next
            End With
            Call .SaveAs(FileName)
        End With
        Call .Quit()
    End With

End Function 
```

我希望这将有助于您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:28:55.457

使用 Listview 控件，下面的代码应该可以解决问题。为简单起见，我只定义了 4 个客户字段 - 您需要根据表字段定义来定义它们：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    ClientList.View = View.Details
    ClientList.FullRowSelect = True
    ClientList.Columns.Add("ID", 120)
    ClientList.Columns.Add("Name", 120)
    ClientList.Columns.Add("Address", 140)
    ClientList.Columns.Add("Email", 100)
    Dim connString As String = "Provider=Microsoft.ACE.OLEDB.12.0;data source=C:\dummy_data.accdb;"
    ClientList.Items.Clear()
    Using conn As New Data.OleDb.OleDbConnection(connString)
        conn.Open()
        Dim sql As String = "SELECT * FROM Customers"
        Using cmd As New Data.OleDb.OleDbCommand(sql, conn)
            Dim lvi As ListViewItem
            Using oRDR As Data.OleDb.OleDbDataReader = cmd.ExecuteReader
                While oRDR.Read()
                    lvi = ClientList.Items.Add(oRDR.GetValue(0).ToString)
                    For i = 1 To oRDR.FieldCount - 1
                        lvi.SubItems.Add(oRDR.GetValue(i).ToString)
                    Next
                End While
            End Using
        End Using
        conn.Close()
    End Using

End Sub 
```

# c# - 首先用实体框架代码在组、用户和所有者之间建立良好的关系

> ID：15489394
> 
> 赞同：1
> 
> 时间：2013-03-19T00:23:07.960
> 
> 标签：c#, asp.net-mvc-4, ef-code-first

我会尝试在两个实体之间建立关系：一个组（具有所有者和用户）和用户（属于一个独特的组）。代码 ：

```
public class User
{
    public int Id { get; set; }
    public int GroupId { get; set; }
    public virtual Group group { get; set; }
}

public class Group
{
    public int Id { get; set; }
    public User Owner { get; set; }
    public virtual ICollection<User> Users { get; set; } 
} 
```

我没有带着数据注释来正确地做到这一点。

非常感谢你的提议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:04:20.917

一个适合我的解决方案：

```
public class User
{
    public int Id { get; set; }
    public int? GroupId { get; set; }
    [InverseProperty("Users")]
    public virtual Group group { get; set; }
}

public class Group
{
    public int Id { get; set; }
    public int? OwnerId { get; set; }
    public User Owner { get; set; }
    public virtual ICollection<User> Users { get; set; } 
} 
```

# c# - 每页顶部的注销按钮

> ID：15489399
> 
> 赞同：0
> 
> 时间：2013-03-19T00:23:39.900
> 
> 标签：c#, asp.net

这可能是一个简单的问题，但我需要为我的 Web 应用程序创建一个“注销”按钮。我知道需要实现的代码，只是不知道如何在不不断重写代码的情况下让这个按钮显示在每个网页的顶部。有没有办法做到这一点？也许有一个可见的菜单，它就在网页的顶部，如果有办法把它放在一些网页上。我的目标是在 6 个不同网页的顶部有一个“注销”按钮，我的项目总共有 17 或 18 个。

# ruby-on-rails - Ruby Geocoder 可以在 reverse_geocode 调用中只返回街道名称吗？

> ID：15489402
> 
> 赞同：5
> 
> 时间：2013-03-19T00:23:56.607
> 
> 标签：ruby-on-rails, rails-geocoder

如果该线包含在模型中，则[地理编码](http://www.rubygeocoder.com/)器gem 将在保存时自动反转地理编码。`after_validation :reverse_geocode`但是，这会导致将一长串文本保存为地址 - 格式类似于“街道名称、城市名称、县名称、州名称、邮政编码、国家名称”。

我只对这个特定项目的街道名称感兴趣，所以我想知道是否有办法修改`after_validation`调用以仅保存该信息。

如果我手动进行反向地理编码，我可以访问`road`结果中的值：

```
 place = Place.first
  result = Geocoder.search("#{place.latitude},#{place.longitude}")
  street = result[0].data['address']['road'] 
```

我可以设置自己的自定义来执行此操作，但如果已提供此`after_validation`功能，我宁愿不复制功能。`geocoder`

或者，如果有一种完全不同的方式可以将纬度/经度转换为街道名称，我将有兴趣了解它。如果此选项也包括地址编号或地址范围，那就可以了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T01:50:52.413

您可以通过提供一个块来自定义 reverse_geocode 方法，该块将要进行地理编码的对象和一个 Geocoder::Result 对象数组。

```
reverse_geocoded_by :latitude, :longitude do |obj,results|
  if geo = results.first
    obj.street = geo.address
  end
end

after_validation :reverse_geocode 
```

每个 Geocoder::Result 对象 result 提供以下数据：

```
result.latitude - float
result.longitude - float
result.coordinates - array of the above two
result.address - string
result.city - string
result.state - string
result.state_code - string
result.postal_code - string
result.country - string
result.country_code - string 
```

更多信息可以在[地理编码文档](https://github.com/alexreisner/geocoder)中找到。您甚至可以找到更多可以从`Geocoder::Result`对象中提取的字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-15T20:05:27.167

## **您可以使用:data 方法**从您正在使用的选定地理编码服务中访问所有属性。

```
query = "45.679, -45.567"
result = Geocoder.search(query).first 

if (result) 
   all_attributes = result.data
end 
```

这将返回您特定坐标的所有可用键和值的 JSON 响应。如果您使用 Google 来反向地理编码，那么您会收到类似于以下内容的响应：

```
{
         "address_components" : [
            {
               "long_name" : "1600",
               "short_name" : "1600",
               "types" : [ "street_number" ]
            },
            {
               "long_name" : "Amphitheatre Pkwy",
               "short_name" : "Amphitheatre Pkwy",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Mountain View",
               "short_name" : "Mountain View",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Santa Clara County",
               "short_name" : "Santa Clara County",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "California",
               "short_name" : "CA",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "United States",
               "short_name" : "US",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "94043",
               "short_name" : "94043",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "1600 Amphitheatre Parkway, Mountain View, CA 94043, USA",
         "geometry" : {
            "location" : {
               "lat" : 37.4224764,
               "lng" : -122.0842499
            },
            "location_type" : "ROOFTOP",
            "viewport" : {
               "northeast" : {
                  "lat" : 37.4238253802915,
                  "lng" : -122.0829009197085
               },
               "southwest" : {
                  "lat" : 37.4211274197085,
                  "lng" : -122.0855988802915
               }
            }
         },
         "place_id" : "ChIJ2eUgeAK6j4ARbn5u_wAGqWA",
         "types" : [ "street_address" ]
      } 
```

因此，只需深入了解 JSON 即可获得所需的内容：

```
result.data["address_components"].each do |component|

  if component["types"].include?("route")
    street = component["long_name"]
  end

end 
```

* * *

请注意，您使用的每个地理编码服务的格式都会有所不同：这是另一个使用 Yandex 的示例：

```
street = result.data["GeoObject"]["metaDataProperty"]["GeocoderMetaData"]["AddressDetails"]["Country"]["AdministrativeArea"]["SubAdministrativeArea"]["Locality"]["Thoroughfare"]["ThoroughfareName"] 
```

# ruby-on-rails - 在提取的 Rails::Engine 上运行的规范不会像以前一样将 DB 初始化/恢复到原始状态

> ID：15489403
> 
> 赞同：2
> 
> 时间：2013-03-19T00:23:58.370
> 
> 标签：ruby-on-rails, rspec, rake

我最近将一个模块提取到一个`Rails::Engine`包含用于运行测试的“虚拟应用程序”的 gem 中。 `rake spec`现在行为不同，并导致某些规范失败。

首先，`rake spec --trace`在 gem 目录中运行不再导致这个长调用链：

```
** Invoke spec (first_time)
** Invoke test:prepare (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:load (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:test:purge
** Execute db:test:load
** Invoke db:test:load_schema (first_time)
** Invoke db:test:purge 
** Execute db:test:load_schema
** Invoke db:schema:load (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:schema:load
** Execute test:prepare
** Execute spec 
```

而只是调用：

```
** Invoke spec (first_time)
** Execute spec 
```

我在 RSpec::Core::RakeTask 中没有看到任何执行 DB 初始化的代码，所以这必须是 Rails 根目录中的 Rakefile 添加的 Rails 函数。

我考虑通过添加以下内容来解决这个问题：

```
task :my_spec do
  ENV['RAILS_ENV'] = 'test'
  Rake::Task['db:drop'].invoke
  Rake::Task['db:create'].invoke
  ENV['SCHEMA'] = '/Users/me/sandbox/my_app/db/schema.rb'
  Rake::Task['db:schema:load'].invoke
  Rake::Task['spec'].invoke
end 
```

但是这些任务都不是由 gem 根目录中的 Rakefile 加载的。

如何`rake spec`从此目录初始化测试数据库？

其次，rspec 不再在测试之间清除数据库，因此依赖原始数据库状态的测试现在失败了。也许这意味着我写错了我的测试，但我认为测试的“空白”想法在理解测试输出时是一个有用的想法。

如何`rake spec`在测试之间清除数据库，就像对普通 Rails 应用程序一样？

# html - mailchimp 注册表单导致 404

> ID：15489407
> 
> 赞同：2
> 
> 时间：2013-03-19T00:24:21.760
> 
> 标签：html, forms, mailchimp

[我的网站页脚中](http://frshstudio.com/#optin)有一个邮件芯片注册表单。我最近注意到，在尝试注册后，用户会看到 404:page not found 错误阅读：

> MailChimp 您正在寻找的页面似乎消失了我们已经记录了这个消失的行为，我们的黑猩猩魔术师团队会找到丢失的链接。

该表格在我的旧网站上完美运行，我不太确定它为什么突然停止 - 除了样式我没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:29:36.677

当您创建 MailChimp 订阅表单时，您可以选择指定您自己的感谢页面，用户在订阅后会被发送到该页面：

[http://kb.mailchimp.com/article/can-i-design-and-host-my-own-thank-you-pages-instead-of-using-mailchimps/](http://kb.mailchimp.com/article/can-i-design-and-host-my-own-thank-you-pages-instead-of-using-mailchimps/)

您确定 MailChimp 没有尝试将您的用户重定向回您自己的感谢页面……您自己的页面不再存在吗？

无论如何，我建议您通过该页面上的步骤从头开始创建一个新的订阅表单，指定选项，包括您要使用的感谢页面，并将新的嵌入代码放在您网站的页脚中。这应该可以解决当前损坏的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:27:21.320

您的问题很广泛，可能有多种原因：

**1：**比较你的旧代码和新代码，看看是否写了恶意代码（包括导致错误的其他页面或脚本）

**2：**检查注册页面（abc.html 等）文件是否存在于服务器上，并且在部署期间未删除/重命名。还要检查作为页眉/页脚包含的嵌套页面

**3：**有时文件放在错误的目录中。确保将特定文件放置在所需位置。

请指定它是什么类型的页面并从哪个源调用（JSP/simple html 等）。

# sql - 按日期查询多条记录

> ID：15489408
> 
> 赞同：1
> 
> 时间：2013-03-19T00:24:28.630
> 
> 标签：sql, sql-server, sql-server-2008

我有几张这样的桌子：

颜色

```
id      Color_Name
---    -------
 1      RED
 2      GREEN 
```

Color_Shades

```
id      ColorId    ShadeId    date_created
---     -------    -------   --------------
 1       1          55        03/15/2013
 2       1          43        02/01/2012
 3       2          13        05/15/2011
 4       2          15        06/11/2009 
```

我正在尝试获取所有不同颜色及其最新日期的列表。

我试过

```
SELECT a.Color_Name, b.date_created FROM Color a, Color_Shades b
WHERE a.id = b.ColorId 
```

但这给了我不同的结果。

我想要的结果是：

```
 Color_Name   date_created
----------    ---------------
 RED              03/15/2013
 GREEN            05/15/2011 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:26:33.950

你离你需要的很近。您只需要聚合这些列`MAX`来获取最新日期。

```
SELECT  a.Color_name, MAX(b.date_created) date_created
FROM    Color a
        INNER JOIN Color_shades b
            ON a.id = b.colorID
GROUP   BY a.Color_Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/16c9e/1)

# visual-c++ - 我如何避免在这个程序中使用指针变量和基于指针的传递引用？

> ID：15489412
> 
> 赞同：0
> 
> 时间：2013-03-19T00:24:40.623
> 
> 标签：visual-c++, pointers, pass-by-reference, pass-by-pointer

我如何避免在这个程序中使用指针变量和基于指针的传递引用？正如我的导师所说，没有必要使用指针。这是一个龟兔赛跑的模拟器，您将使用数字生成来模拟这个令人难忘的事件。

```
#include <iostream>
using std::cout;
using std::endl;

#include <cstdlib>
using std::rand;
using std::srand;

#include <ctime>
using std::time;

#include <iomanip>
using std::setw;

const int RACE_END = 70;

// prototypes
void moveTortoise( int *const );
void moveHare( int *const );
void printCurrentPositions( const int *const, const int *const );

int main()
{
   int tortoise = 1;
   int hare = 1;
   int timer = 0;

   srand( time( 0 ) );

   cout << "ON YOUR MARK, GET SET\nBANG !!!!"
      << "\nAND THEY'RE OFF !!!!\n";

   // loop through the events
   while ( tortoise != RACE_END && hare != RACE_END )
   {
      moveTortoise( &tortoise );
      moveHare( &hare );
      printCurrentPositions( &tortoise, &hare );
      timer++;
   } // end loop

   if ( tortoise >= hare )
      cout << "\nTORTOISE WINS!!! YAY!!!\n";
   else
      cout << "\nHare wins. Yuch.\n";

   cout << "\nTIME ELAPSED = " << timer << " seconds" << "\n" << endl;

   system("pause");

   return 0; // indicates successful termination
} // end main

// progress for the tortoise
void moveTortoise( int * const turtlePtr )
{
   int x = 1 + rand() % 10; // random number 1-10

   if ( x >= 1 && x <= 5 ) // fast plod
      *turtlePtr += 3;
   else if ( x == 6 || x == 7 ) // slip
      *turtlePtr -= 6;
   else // slow plod
      ++( *turtlePtr );

   if ( *turtlePtr < 1 )
      *turtlePtr = 1;
   else if ( *turtlePtr > RACE_END )
      *turtlePtr = RACE_END;
} // end function moveTortoise

// progress for the hare
void moveHare( int * const rabbitPtr )
{
   int y = 1 + rand() % 10; // random number 1-10

   if ( y == 3 || y == 4 ) // big hop
      *rabbitPtr += 9;
   else if ( y == 5 ) // big slip
      *rabbitPtr -= 12;
   else if ( y >= 6 && y <= 8 ) // small hop
      ++( *rabbitPtr );
   else if ( y > 8 ) // small slip
      *rabbitPtr -= 2;

   if ( *rabbitPtr < 1 )
      *rabbitPtr = 1;
   else if ( *rabbitPtr > RACE_END )
      *rabbitPtr = RACE_END;
} // end function moveHare

// display new position
void printCurrentPositions( const int * const snapperPtr,
   const int * const bunnyPtr )
{
   if ( *bunnyPtr == *snapperPtr )
      cout << setw( *bunnyPtr ) << "OUCH!!!";
   else if ( *bunnyPtr < *snapperPtr )
      cout << setw( *bunnyPtr ) << 'H'
         << setw( *snapperPtr - *bunnyPtr ) << 'T';
   else
      cout << setw( *snapperPtr ) << 'T'
         << setw( *bunnyPtr - *snapperPtr ) << 'H';

   cout << '\n';
} // end function printCurrentPositions 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:35:35.263

在 C++ 中，您可以使用引用而不是指针。例如，而不是

```
void foo(int *x) {
  *x = *x + 1;
}

int main() {
  int a = 0;
  foo(&a);
  return 0;
} 
```

您可以通过引用传递 x ，如下所示：

```
void foo(int &x) {
  x = x + 1;
}
int main() {
  int a = 0;
  foo(a);
  return 0;
} 
```

传递一个引用有点像传递一个指针，只是你不需要在每次想要访问它指向的值时取消引用指针。您可以谷歌“C++ pass by reference”获取更多信息，例如本教程： http: [//www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)

或者，在您的程序中，您可以简单地传递`int`参数并返回新值：

```
int moveTortoise(int turtle) {
  ...
  turtle = turtle + 3;
  ...
  return turtle;
}

tortoise = moveTortoise(tortoise) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:56:35.847

**引用&和指针***在以下情况下很有用：
**1.您处理**通过引用传递是资源（CPU时间和主内存）消耗操作的复杂类的实例；
**2\. 当你想改变传递的参数时**（因为 C++ 中的任何函数都只能返回一个值，例如与可以返回多个值的 python 相反，你可以通过使用 & 或 * 来处理该限制）；
3\. 其他情况...

**内置（原子）类型可以按值传递**（就是你的情况）而不会降低效率。

# javascript - 表单特定字段的事件跟踪

> ID：15489421
> 
> 赞同：1
> 
> 时间：2013-03-19T00:25:28.923
> 
> 标签：javascript, google-analytics, event-tracking

是否可以将事件跟踪的目标指定到表单的某个字段，例如从下拉列表中选择或已选中复选框？

我有一个由我的表单字段生成的可变产品。

然后，我创建了一个函数 calTrack();

```
var Product;

function calTrack(Product)
    {
        _gaq.push(['_trackEvent', 'Form',Product]);
    } 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:31:54.300

当然。只需将事件绑定到您要收听的元素，然后调用您的跟踪函数。

IE：

```
<select name="mySelect" id="mySelect">
<option value="foo">foo</option>
</select>

<script type="text/javascript">
$(document).ready(function(){
$('#mySelect').change(calTrack); 
});
</script> 
```

# c - 将内容从一个文件复制到另一个文件，分段错误

> ID：15489424
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:25:53.063
> 
> 标签：c, cs50

我正在尝试从一个大的 .raw 文件中一一复制 50 个 jpeg，但是目前我遇到了分段错误错误。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

typedef uint8_t BYTE;

//SOI - 0xFF 0xD8
//EOI - 0xFF 0xD9
//APPn - 0xFF 0xEn    
int main(void)
{
    //FAT - 512 bytes per block
    BYTE block[512];

    //open file containing pictures
    FILE* card_file = fopen("card.raw", "rd");

    FILE* jpeg_file;

    //make sure the file opened without errors
    if (card_file == NULL)
    {
        printf("something went wrong and file could not be opened");
        return 1;
    }

    int i = 0;
    while (fread(&block, sizeof(BYTE), 512, card_file) != 0)
    {
        //jpeg start signature
        if(block[0] == 0xFF && block[1] == 0xD8)
        {
            i++;
            if(jpeg_file != NULL)
                fclose(jpeg_file);

            //create a new jpeg file to copy bytes to
            jpeg_file = fopen((char*)i, "w+");
        }

        //write 512 bytes to a jpeg file
        if(jpeg_file != NULL)
            fwrite(block, sizeof(block), 1, jpeg_file);
    }

    fclose(card_file);
return 0;
} 
```

当我通过 GDB 运行它时，我的代码一直到 if(block[0] == 0xFF && block [1](https://i.stack.imgur.com/XAPq0.jpg) == 0xD8)，然后它会跳过条件并发生分段错误。我看不出是什么原因造成的。这是一个屏幕截图： ![在此处输入图像描述](../Images/d3477d471c8db2d58269deb5c8ced5d0.png)

代码更新：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <cs50.h>

typedef uint8_t BYTE;

/*struct jpg*/
/*{*/
/*    BYTE soi[2] = { 0xFF, 0xD8 };*/
/*    BYTE eoi[2] = { 0xFF, 0xD9 };*/
/*};*/

//SOI - 0xFF 0xD8
//EOI - 0xFF 0xD9
//APPn - 0xFF 0xEn    
int main(void)
{
    //FAT - 512 bytes per block
    BYTE block[512];

    //jpeg name
    char name[6];

    bool is_open = false;

    //JPEG
    //struct jpg image;

    //open file containing pictures
    FILE* card_file = fopen("card.raw", "r");

    FILE* jpeg_file;

    //make sure the file opened without errors
    if (card_file == NULL)
    {
        printf("something went wrong and file could not be opened");
        return 1;
    }

    int i = 0;
    while (fread(block, sizeof(BYTE), 512, card_file) != 0)
    {
        //jpeg start signature
        if ((block[0] == 0xFF) && (block[1] == 0xD8) && (block[2] == 0xFF) && ((block[3] == 0xe1) || (block[3] == 0xe0)))
        {
            //assign jpeg name
            sprintf(name, "%d.jpg", i++);
            if(is_open)
                fclose(jpeg_file);

            //create a new jpeg file to copy bytes to
            jpeg_file = fopen(name, "a+");
            is_open = true;
        }

        //write 512 bytes to a jpeg file
        if(is_open)
            fwrite(block, sizeof(block), 1, jpeg_file);
    }

    fclose(jpeg_file);
    fclose(card_file);
return 0;
} 
```

现在它不会崩溃，但是 50 个 jpeg 中只有 9 个被正确恢复。cs50.h 在那里，所以我可以访问 bool 类型。编写 50 个文件的更好方法是什么？我的布尔值似乎存在逻辑缺陷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:28:59.343

`fopen((char*)i, "w+");`完全无效。您将整数转换为指针，这将崩溃。

您需要将数字格式化为文件名：

```
char path[PATH_MAX];
sprintf(path, "%d", i);
fopen(path, "w+"); 
```

您也没有初始化`jpeg_file`——如果条件失败，`jpeg_file`将是一个野指针，它也会崩溃。您应该初始化`jpeg_file`为`NULL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:29:38.253

在您的`fread`通话中，您应该传递数组的地址。因此，陈述应该是`fread(block, sizeof(BYTE), 512, card_file)`。

**后记：**

1.  *在您的代码中，假设输入文件的大小是 512 的整数倍，而JPEG*文件不需要这种情况。最后一个`fread`可能会返回一个小于 512 的数字，这需要在您的实现逻辑中进行处理。因此，要写入的元素数量应由`fread`

2.  您需要`jpeg_file`在循环终止后关闭指针。

3.  最后，因为您使用的是*JPEG*，您可能需要处理带有缩略图的*EXIF文件的情况。*在这种情况下，您将获得 2 个*SOI*（图像开始）标记。

# c# - 如何在树视图中添加 ID

> ID：15489431
> 
> 赞同：4
> 
> 时间：2013-03-19T00:26:32.773
> 
> 标签：c#, winforms

我在树视图控件方面遇到问题。我对 C# 非常陌生，并且坚持如何将 ID 添加到相应的树节点。我不确定这行代码是否包含 ID，否则我应该包含什么。我想获取所选节点的 ID。我该如何进行，请告诉我。我的代码如下 -

提前致谢。

```
private void PopulateTreeView()
    {
        treeDepartments.Nodes.Clear();

        String strConn = "Server =server;Database =DB;Integrated Security = True;";
        SqlConnection conn = new SqlConnection(strConn);
        SqlDataAdapter da = new SqlDataAdapter("Select * from tSubDepartments", conn);
        SqlDataAdapter daCategories = new SqlDataAdapter("Select * from tDepartments", conn);
        da.Fill(ds, "tSubDepartments");
        daCategories.Fill(ds, "tDepartments");

        ds.Relations.Add("Dept_SubDept", ds.Tables["tDepartments"].Columns["dpCode"], ds.Tables["tSubDepartments"].Columns["dpCode"]);
        foreach (DataRow dr in ds.Tables["tDepartments"].Rows)
        {

            TreeNode tn = new TreeNode(dr["dpName"].ToString());
            foreach (DataRow drChild in dr.GetChildRows("Dept_SubDept"))
            {

                tn.Nodes.Add(drChild["sdName"].ToString());

            }

            treeDepartments.Nodes.Add(tn);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:03:29.047

我假设，根据代码，您正在使用 WinForms，所以我的回答将基于该假设。 `ThreeNode`object 具有`Tag`类型 object 的属性（与 WinForms 中的任何 Control 类一样），您可以在其中存储您想要的任何内容，但是当您以后想要使用它时，应该小心地将其转换回类型。所以你可以像这样改变你的代码：

```
private void PopulateTreeView()
{
    treeDepartments.Nodes.Clear();

    String strConn = "Server =server;Database =DB;Integrated Security = True;";
    SqlConnection conn = new SqlConnection(strConn);
    SqlDataAdapter da = new SqlDataAdapter("Select * from tSubDepartments", conn);
    SqlDataAdapter daCategories = new SqlDataAdapter("Select * from tDepartments", conn);
    da.Fill(ds, "tSubDepartments");
    daCategories.Fill(ds, "tDepartments");

    ds.Relations.Add("Dept_SubDept", ds.Tables["tDepartments"].Columns["dpCode"], ds.Tables["tSubDepartments"].Columns["dpCode"]);
    foreach (DataRow dr in ds.Tables["tDepartments"].Rows)
    {

        TreeNode tn = new TreeNode(dr["dpName"].ToString());
        tn.Tag = dr["dpID"]; //put the ID into the Tag property of the node
        foreach (DataRow drChild in dr.GetChildRows("Dept_SubDept"))
        {

             TreeNode childTn = new TreeNode(drChild["sdName"].ToString());
             childTn.Tag = drChild["sdID"];
             tn.Nodes.Add(childTn);

        }

        treeDepartments.Nodes.Add(tn);

    }
} 
```

当你想提取 的 ID 时`TreeNode`，只需像这样使用它（假设 ID 是 type `int`）：

```
int ID = (int)tn.Tag; 
```

# c++ - 同时优化和可测试性——如何将代码分解成更小的单元

> ID：15489435
> 
> 赞同：1
> 
> 时间：2013-03-19T00:26:51.233
> 
> 标签：c++, class, function, optimization

我试图分解一个长的“主”程序，以便能够修改它，也可能对它进行单元测试。它使用了一些巨大的数据，所以我犹豫了：

最好的是：进行函数调用，并传递可能非常大（内存方面）的数据，

(a) 按价值计算，或

(b) 通过引用

（非常大，我的意思是一些结构和小类的向量的映射和向量......甚至图像......可能真的很大）

(c) 或者拥有所有功能都可以访问的私有数据？这也可能意味着 main_processing() 或其他东西可能具有所有这些的向量，而某些函数将只有一个项目......具有可测试函数的优点。

我的问题虽然与优化有关，但当我试图将这个怪物分解成小怪物时，我也不想耗尽内存。

如果我创建局部变量，我不太清楚我将拥有多少个数据副本。

有人可以解释一下吗？

编辑：这不是通用的“如何将非常大的程序分解为类”。该程序是一个大型解决方案的一部分，该解决方案已经分解为多个小实体。

我正在查看的可执行文件虽然相当大，但它是一个具有不可分割数据的单一实体。因此，数据要么全部创建为我已经创建的单个类中的成员变量，要么将（全部）作为函数的参数传递。

哪个更好 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:18:58.457

如果要进行单元测试，则不能“拥有所有功能都可以访问的私有数据”，因为那样的话，所有这些数据都将成为每个测试用例的一部分。

因此，您必须考虑每个函数，并准确定义它在数据的哪一部分上起作用。至于函数参数和返回值，很简单：小对象传值，大对象传引用。

您可以对分隔大小的阈值使用猜测值。我使用“8 小，任何东西都大”的规则，但对我的系统有益的东西不能对你的系统同样有益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:31:45.627

这似乎更像是一个关于 OOP 的一般问题。将您的数据拆分为逻辑分组的概念（类），并将处理这些数据元素的代码与数据（成员函数）一起放置，然后将它们与组合、继承等联系在一起。

您的问题太宽泛，无法提供更具体的建议。

# spring-security - 尝试在 Spring Security 中动态加载拦截器时出错

> ID：15489439
> 
> 赞同：0
> 
> 时间：2013-03-19T00:27:56.323
> 
> 标签：spring-security, interceptor

我已经为从 DB 动态生成拦截器配置了 spring 安全性。我[这里](http://wp.misschara.com/)有指南。当我尝试从登录页面访问主页时，出现以下错误：

```
An Authentication object was not found in the SecurityContext 
```

此错误发生在以下几行的 AbstractSecurityInterceptor 类中（我进行了调试）：

```
if (SecurityContextHolder.getContext().getAuthentication() == null) {
            credentialsNotFound(messages.getMessage("AbstractSecurityInterceptor.authenticationNotFound",
                    "An Authentication object was not found in the SecurityContext"), object, attributes);
        } 
```

这是日志：

```
org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext
    org.springframework.security.access.intercept.AbstractSecurityInterceptor.credentialsNotFound(AbstractSecurityInterceptor.java:339)
    org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:198)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

这是我的 Spring Security 文件配置的[链接](http://pastebin.com/i5UQG0AJ)

我不明白，因为发生此错误，在我的应用程序中登录的用户具有 SYS_ADMIN 角色。此角色有权访问主页...

我已经调试并检查了类 InterceptorApplicationService（此类实现接口 FilterInvocationSecurityMetadataSource）分别返回 SYS_ADMN 角色和方法 getAttributes 和 getAllConfigAttributes 中的角色列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:15:25.307

我解决了这个问题。这是[帖子](http://forum.springsource.org/showthread.php?135714-AuthenticationCredentialsNotFoundException-An-Authentication-object-was-not-found-in)

# php - 连接 HTML 和 PHP 以创建图像链接

> ID：15489443
> 
> 赞同：1
> 
> 时间：2013-03-19T00:28:11.283
> 
> 标签：php, html, url, twitter

我正在尝试使用 PHP 和 HTML 将图像制作成链接。主要思想是从 Twitter 中获取用户的图像和网名，然后通过构建 URL 并在末尾添加他们的网名，将图像变成他们个人资料的可点击链接。但我收到一条错误消息：

解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING，期待 ',' 或 ';' 在第 71 行的 C:\wamp\www\fyp\tweeter3.php 中。

这是第 71 行（它是 foreach 循环的一部分）：

```
<?php echo "<a href = ".$url"><img src = ".$userImage." class = ".$class."></a>"; ?> 
```

那里有一个语法错误，我无法查明。这些是我的变量：

```
$userScreenName = $user -> screen_name;
$userImage = $user -> profile_image_url;
$class = "myImgClass";
$url = "https://twitter.com/".$userScreenName; 
```

你能发现错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:29:55.723

`.`后失踪`$url`：

```
<?php echo "<a href = ".$url"><img... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T00:30:03.850

您在 $url 和生成有效代码的 HTML 引号之后缺少一个点：

```
<?php echo "<a href = '".$url."'><img src = '".$userImage."' class = '".$class."'></a>"; ?> 
```

没有你得到的报价：

```
<a href = the url><img src = user image class = the class></a> 
```

带引号：

```
 <a href = 'the url'><img src = 'user image' class = 'the class'></a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T00:30:07.347

在 $url 之后，您需要有一个句点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T00:31:15.080

试试这个：

```
<?php 
echo "<a href = \"".$url."\"><img src = \"".$userImage."\" class = \"".$class."\"></a>";
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T16:03:19.147

在我看来，最简单和最易读的方法是：

```
<?php echo "<a href = '$url'><img src = '$userImage' class = '$class'></a>"; ?> 
```

只有一个长文本，没有使用连接。它减少了由于缺少双引号或缺少点而导致错误的可能性。所有 PHP 变量都将自动替换为它们的值。

您还可以使用[printf](http://php.net/printf)将所有变量放在字符串之外：

```
<?php printf('<a href = "%s"><img src = "%s" class = "%s"></a>', $url, $userImage, $class); ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-31T03:48:05.587

将 html 字符串与 php 变量连接起来不是一个好习惯。这导致可能的注入向量（XSS）。为避免可能的 XSS（DOM 或 STORED），请将变量过滤为字符串。特别是如果该值来自用户输入。例如。

```
<?php echo "<a href = '".filter_var($url, FILTER_SANITIZE_STRING)."' 
```

# c++ - C++：崇高文本 2 和 MinGW

> ID：15489445
> 
> 赞同：1
> 
> 时间：2013-03-19T00:28:24.187
> 
> 标签：c++, mingw, sublimetext2

我需要一些帮助来使用 MinGW 配置 Sublime Text 2。我所做的只是将 MinGW 添加到我的路径变量中。然而，我遇到了一些问题。例如，这段代码甚至不会停下来询问用户输入并立即`cin`进入失败状态。

```
 int input = 0;
    cin >> input; 
```

我的代码也不是问题，因为我用 eclipse 对其进行了测试，它工作正常。我还需要什么才能让 Sublime Text 2 与 MinGW 一起工作？

另外，如果它更容易，我愿意接受一个新的编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:05:41.297

Sublime Text 是一个高级文本编辑器，而不是 IDE。根据要求，这里有一些关于编译和运行使用 Sublime Text 编写的程序的说明。

启动命令提示符（按 windows-key+R，键入`cmd`，然后按 enter）并验证 MinGW bin 文件夹是否在您的路径中，并带有`g++ --version`. 如果返回版本，请使用该`cd`命令导航到 C++ 源文件的位置。例如，`cd "C:\Users\abaratham\Dev\test"`。然后用`g++ -o myprogram.exe main.cpp othersource.cpp ...`.

如果构建成功，您应该会在项目文件夹中看到一个新的 myprogram.exe 文件。如果它是一个命令行程序，您可以在同一个控制台中使用`myprogram`.

当您开始使用许多 C++ 源文件开发软件时，您可能会发现使用 CMake 或 SCons 等高级构建系统很有用。无论您选择哪种方式，您都可以生成 makefile 并使用`mingw32-make`.

# algorithm - 找到离线最近的点

> ID：15489448
> 
> 赞同：1
> 
> 时间：2013-03-19T00:28:51.497
> 
> 标签：algorithm, math, geometry

想象一条通过原点的直线。由于旋转和反射很容易，假设斜率在 0 到 1 的范围内。我们在笛卡尔平面上有一个整数点网格。我想找到大于 0 和 <= D 的网格点最接近。

简单的方法是对于 1 .. D 中的每个 x，找到直线上方和下方的点并计算到直线的垂直距离。这将需要 2 x D 比较才能找到最小值。

这还不错，但我正在尝试提出一种 log(D) 方法。有吗？

一个等效的问题是找到最接近的有理数 n / d，其中 d <= D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:54:35.380

这个问题似乎和你的一样：[Finding the nearest integer fraction to a given random real](https://stackoverflow.com/questions/4385580/finding-the-closest-integer-fraction-to-a-given-random-real)

那里接受的答案使用[Farey Sequence](http://en.wikipedia.org/wiki/Farey_sequence)。

还链接到这个[有趣的博客文章](http://www.johndcook.com/blog/2010/10/20/best-rational-approximation/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20TheEndeavour%20%28The%20Endeavour%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:40:37.560

不是一个完整的答案，而是在某些情况下的优化：如果线的斜率是有理数，那么会有重复，如果 D 大于分母，则允许您查看更少的点。

例如：如果斜率为 12/17，那么您不需要从原点向外看超过 17 个点。之后它将重复。

当然，如果在该示例中 D < 17，则没有任何好处。

另外，如果你的斜率是`π`，那么你就不走运了......

# mysql - MysqlDump 开头的语句是做什么的？

> ID：15489456
> 
> 赞同：3
> 
> 时间：2013-03-19T00:29:18.267
> 
> 标签：mysql

查看 mysqldump 的输出，我在顶部看到以下内容。

同样地，我在 /*! 中看到各种语句。*/ 块。我的猜测是这些可能是根据版本有条件地执行的，但不幸的是，随着谷歌剥离符号，很难确认这一点。

```
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

这是 MySQL 手册中对这些语句的另一个参考（也没有解释它们的作用）。

[https://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_disable-keys](https://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_disable-keys)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:26:32.063

在它创建表之前你会注意到，这样你就会有这样的一行：

```
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */; 
```

然后在所有这些事情之后，你会有这样的一行：

```
/*!40101 SET @CHARACTER_SET_CLIENT=@@OLD_CHARACTER_SET_CLIENT */; 
```

这些行所做的是保存数据库的当前设置，将它们更改为导入文件所需的内容，运行查询，然后将数据库的设置设置回原来的状态。

# html - 1px 高亮顶部边框除了全边框？

> ID：15489471
> 
> 赞同：0
> 
> 时间：2013-03-19T00:30:20.017
> 
> 标签：html, css

我曾多次尝试用谷歌搜索这个问题，但令人惊讶的是没有找到任何结果。

我正在尝试创建一个按钮，该按钮一直有一个 1px 的深色边框，但内部还有一个 1px 的高亮边框顶部。

![示例按钮](../Images/4e872e8cf7d9439c3b1f87c483e01a28.png) 这张图片是我想要实现的一个示例。有没有办法只用 CSS3/HTML 做到这一点？

当前的 HTML：

```
<a href="register" title="Register Now" class="blue_button">Register Now</a> 
```

当前的 CSS：

```
.blue_button {
    background-color: #019df6;
    background: -moz-linear-gradient(top,  #019df6 0%, #027bc1 99%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#019df6), color-stop(99%,#027bc1));
    background: -webkit-linear-gradient(top,  #019df6 0%,#027bc1 99%);
    background: -o-linear-gradient(top,  #019df6 0%,#027bc1 99%);
    background: -ms-linear-gradient(top,  #019df6 0%,#027bc1 99%);
    background: linear-gradient(to bottom,  #019df6 0%,#027bc1 99%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#019df6', endColorstr='#027bc1',GradientType=0 );
    border:1px solid #0171b1;
    padding:10px 30px;
    font-weight:600;
    font-size:150%;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    color:#fff;
    text-decoration:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:44:18.613

[看看这个 jsFiddle](http://jsfiddle.net/cEs4B/)你可以使用 box-shadow 添加额外的高亮顶部“边框”，并继续使用边框，就像你对外边框使用它一样。如果没有“插图”，突出显示将位于现有边框的外部。

```
box-shadow: inset 0px 1px 0px 1px white; 
```

除了添加位置和顶部规则外，我在 jsFiddle 上使用了以下代码：

```
box-shadow: inset 0px 3px 2px -2px white; 
```

# opencv - 人脸检测方法？

> ID：15489475
> 
> 赞同：1
> 
> 时间：2013-03-19T00:30:53.357
> 
> 标签：opencv, face-detection, emotion

我想知道面部检测的最佳方法，因为我正在研究预测面部情绪应用程序

所以在分析固定或移动的面部表情之前，应该检测或跟随以提取相关信息。存在几种检测方法，但在我的情况下最好的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:50:47.343

开始使用人脸检测的一种快速简便的方法是使用 OpenCV 的 Haar 检测方法（viola-jones 人脸检测算法 IIRC 的略微修改版本）。他们为整个面部和单个面部组件（例如眼睛、鼻子等）预先训练了 haar 级联分类器。如果您愿意，也可以训练自己的分类器。Haar 功能还具有速度非常快的优势，因此它非常适用于视频（听起来您将使用它）。此外，通过对各个面部组件进行分类，它可以简化您的情绪检测/预测算法。

[您可以在http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#viola01](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#viola01)找到详细介绍 Haar 基于特征的对象识别的 OpenCV 文档

[以及在http://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/cpp/dbt_face_detection.cpp](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/cpp/dbt_face_detection.cpp)上执行人脸检测的示例

至于情绪检测，这是一个开放的研究问题，所以你尝试的任何事情都可能相当重要。如果你喜欢这种事情，一些好论文可能是[http://www.utdallas.edu/dept/eecs/research/researchlabs/msp-lab/publications/Busso_2004.pdf](http://www.utdallas.edu/dept/eecs/research/researchlabs/msp-lab/publications/Busso_2004.pdf)和[http:// humansensing.cs.cmu.edu/papers/Automated.pdf](http://humansensing.cs.cmu.edu/papers/Automated.pdf)

# arrays - 比较数组以找出一个包含在另一个中

> ID：15489476
> 
> 赞同：1
> 
> 时间：2013-03-19T00:31:14.657
> 
> 标签：arrays, matlab, compare

我有以下代码：

```
while rounds<=5
    fprintf('Rolling the dice...\n');
    roll=randi(6,1,5);
    roll=sort(roll);
    fprintf('You rolled:');
    disp(roll);
    rollCount=rollCount+1;

    for x=1:2:17
        y=all(ismember(roll,rule{x}))
        disp(ismember(roll,rule{x}));

        z=all(ismember(rule{x},roll))
        disp(ismember(rule{x},roll));
        rounds=rounds+1;
    end
end 
```

它应该做的是将 roll 数组与 rule{x} 数组进行比较，并告诉我它是否匹配。如果不匹配，它应该告诉我滚动数组的哪些索引与规则数组不匹配。但是它不能正常工作。假设示例滚动是 [2 2 3 5 5]，规则 {x} 是 [1 2 3 4 5]。

我想要的输出是一个具有 [0 1 1 0 1] 的数组，但我从 y 中得到的是 [1 1 1 1 1] 而 z 是 [0 1 1 0 1]。这似乎是正确的输出，但如果我们将规则更改为 [5 5 5 5 5] 我会得到 [1 1 1 1 1] 这是不正确的。

这是针对我正在编写的 Yahtzee 游戏。掷骰子是掷骰子，规则是我要匹配的，所以我可以看到我需要重新掷骰子才能匹配。

编辑：使用来自 dspyz 的代码，我编写了函数：

```
function[scoreCode]=ForwardChaining(rollFunc,ruleFunc)
temp=histc(rollFunc,1:6);

for x=1:2:11
    if (ruleFunc{x}<=temp)
        scoreCode=ruleFunc{x+1};
        break;        
    else scoreCode=0;
    end    
end 
```

主函数将其称为：

```
c= ForwardChaining(roll,rule);
    if c == 12;
        break;
    end 
```

但出于某种原因，即使经过 100,000 次迭代，它也不会停止，我认为它没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:18:05.470

由于骰子只能取 1 到 6 之间的值。为什么不生成每个掷骰的直方图计数。

即拿你的卷v的（行）向量说

```
a = histc(roll, 1:6); 
```

现在，如果您想检查规则是否是 a 的子集（其中规则本身也根据每个数字的计数来表述），您只需检查是否

```
rule <= a 
```

如果所有 6 个索引都为真，则滚动满足规则

澄清：

我不知道一年级学生，但是给定一组（可能重复的）值，例如 [1, 1, 2, 4, 5]，其中所有内容都从 1 到 6，我们可以通过计算如何表示这一点从 1 到 6 的每个数字中都有很多。在这个例子中：

```
1: 2
2: 1
3: 0
4: 1
5: 1
6: 0 
```

现在我们想将其与具有相同形式但元素可能更少的规则进行比较。例如 [1, 2, 3, 4]。此规则的计数将是

```
1: 1
2: 1
3: 1
4: 1
5: 0
6: 0 
```

要检查 [1, 2, 3, 4] 是否是 [1, 1, 2, 4, 5] 的子集，我们只需要知道 [1, 2, 3, 4] 的计数是否都小于或等于 [1, 1, 2, 4, 5] 的计数。即我们要检查是否

```
1: 1 <= 2
2: 1 <= 1
3: 1 <= 0
4: 1 <= 1
5: 0 <= 1
6: 0 <= 0 
```

除 3 外，所有这些都是正确的，因此我们知道 [1 2 3 4] 不是 [1 1 2 4 6] 的子集，因为它不包含 3

但如果所有 6 个不等式都为真，那么它将是

前任。如果你想知道 [1 3 3 3 5] 是否包含 [3 3 3]，你可以检查所有

```
1: 0 <= 1
2: 0 <= 0
3: 3 <= 3
4: 0 <= 0
5: 0 <= 1
6: 0 <= 0 
```

这是真的

编辑：查看 MATLAB 的文档，它说必须对 histc 的参数进行排序

编辑2：哎呀，弄错了，它说第二个参数必须排序。改回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:39:40.903

我不确定您的数组到底在做什么，但是如果您有 [2 2 3 5 5] 并且规则 {x} 是 [1 2 3 4 5]，那么您的想法是，只需执行以下操作：

[2 2 3 5 5] == [1 2 3 4 5] 会让你得到 [0 1 1 0 1] 或类似 A=(roll==rule)

# hibernate - Hibernate 中的过滤器

> ID：15489487
> 
> 赞同：1
> 
> 时间：2013-03-19T00:31:56.220
> 
> 标签：hibernate, filter, annotations, one-to-many

我有一个非常简单的一对多关系，并希望使用 in 子句过滤多方（集合）。我无法让过滤器工作。Hibernate 抱怨过滤器参数未定义（当使用 Set 或 Integer 作为类型时）或者它说传入的值的类型错误（当使用 int 参数类型时）

关系：一个Category有很多测试用例，一个测试用例只有一个Category

波乔#1

```
@Entity
@Table(name = "CATEGORY")
public class Category
{
    @Id
    @Column(name = "CATEGORYID")
    private int ID;

    @Column(name = "CATEGORYNAME")
    private String name;

    @OneToMany(fetch = FetchType.EAGER)
    @JoinColumn(name = "CATEGORYID")
    @Filter(name = "TEST_RUN_ID_FILTER")
    private Collection<SimpleTestCase> testCases;
} 
```

波乔#2

```
@Entity
@Table(name = "TESTCASE_NEW")
@FilterDef(name = "TEST_RUN_ID_FILTER", defaultCondition = "TESTRUNID in (:IDS)", parameters = { @ParamDef(name = "IDS", type = "Integer") })
public class SimpleTestCase
{
    @Id
    @Column(name = "TESTCASEID")
    private int ID;

    @Column(name = "TESTCASENAME")
    private String name;

    @Column(name = "STATUS")
    private String status;

    @Column(name = "TESTRUNID")
    private int testRunId;
} 
```

道

```
public List<Category> getAllCategoriesForTestRuns(Set<Integer> testRunIDs)
{
    Session session = getSession();
    session.enableFilter("TEST_RUN_ID_FILTER")
            .setParameter("IDS", testRunIDs);
    Query query = session.createQuery("FROM " + Category.class.getSimpleName());
    List<Category> result = query.list();
    return result;
} 
```

异常（当 Set 或 Integer 是参数类型时）：

```
Java.lang.IllegalArgumentException: Undefined filter parameter [IDS]
at org.hibernate.impl.FilterImpl.setParameter(FilterImpl.java:74) 
```

异常（当 int 是参数类型时）

```
java.lang.IllegalArgumentException: Incorrect type for parameter [IDS]
    at org.hibernate.impl.FilterImpl.setParameter(FilterImpl.java:77) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T06:24:48.280

`FilterImpl.setParameter`只能处理奇异参数。

当涉及到传递集合或数组参数时，

采用`FilterImpl.setParameterList(name, values)`

[https://forum.hibernate.org/viewtopic.php?p=2410099](https://forum.hibernate.org/viewtopic.php?p=2410099)

# javascript - Jquery 可点击调整大小动画。最大化 div 超过其他

> ID：15489489
> 
> 赞同：1
> 
> 时间：2013-03-19T00:32:07.377
> 
> 标签：javascript, jquery, css, html

我想不出我的问题的解决方案。所以我有一个很酷的想法来制作漂亮的用户面板，但不知道如何让 jquery 正常工作；）。事情是这样的：

```
html:
<div id="content">
<div id="containerleft">
<div id="box1" class="box"></div>
<div id="box2" class="box"></div>
<div id="box3" class="box"></div>
<div id="box4" class="box"></div>
<div id="box5" class="box"></div>
<div id="box6" class="box"></div>
</div>
</div>

JS:
$(".box").click(function(){
$(this).css({'position' : 'absolute'}).animate({
                width: '100%', 
                height : '100%'},300);
                          }); 
```

这是它与 css 的工作方式：http: [//jsfiddle.net/85mJN/1/](http://jsfiddle.net/85mJN/1/)

我想要实现的是从他的位置调整 div 的大小，到父 div 的大小，我会称之为增长效果。正如你所看到的，在 .click div 移动到左上角之后，然后它适合父级，也通过移动其他人来破坏整个事情。我试图用 .css('z-index': '999') 来处理动画 div，但这是一个失误。主要目标是从他的原始位置扩展 div，在其他 div 之上，而不移动它们。

~ 沙人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:43:56.773

```
$(".box").click(function(){

    var clone = $(this).clone().addClass('active');
    var parent = $(this).parent();
    var pos = $(this).position();

    $(this).append(clone);

    clone.css({'position' : 'absolute', left: pos.left + 'px', top: pos.top + 'px'}).animate({
        width: '100%', 
        height : '100%',
        top: 0,
        left: 0
    },300);

}); 
```

[http://jsfiddle.net/85mJN/3/](http://jsfiddle.net/85mJN/3/)

请注意，您的盒子元素应该具有静态位置，因此附加的盒子绝对位置将从容器中包装。

更新：

添加了在框处于活动状态时单击时关闭。

[http://jsfiddle.net/85mJN/4/](http://jsfiddle.net/85mJN/4/)

另外，我仍然认为将 CSS3 转换与 toggleClass 一起使用的最佳方式。它需要更少的代码，它非常安全，并且在您使用复杂的 div 时更流畅，因为它是硬件加速的。我不会担心较旧的浏览器，它们不会动画但会显示大框...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:55:49.590

您的示例中显示的移动是从流中删除单击的 div 的产物，然后其他 div 重新调整，因为它们是浮动的。

一个简单的解决方案是使`#containerleft{ overflow:hidden; ... }`

但是，如果这不能满足您的需求，那么克隆也可以：

```
$('#containerleft').on("click", ".box", function(){

    var $this = $(this);

    console.log($this.css('position'));    
    if($this.css('position') === 'absolute'){ 
        $this.animate({width:'0px',height:'0px'},300);
        //$this.remove();
    }
    else {
        $this.clone().appendTo($this.parent()).css({'position' : 'absolute'}).animate({
                    width: '100%', 
                    height : '100%'},300);
    }

}); 
```

[http://jsfiddle.net/e4NG5/2/](http://jsfiddle.net/e4NG5/2/)

# c# - ASP.Net 服务器本地迁移

> ID：15489490
> 
> 赞同：0
> 
> 时间：2013-03-19T00:32:07.093
> 
> 标签：c#, asp.net, sql, asp.net-mvc, database-connection

当准备将我的网站迁移到实时 Godaddy 服务器时，除了尝试登录之外，一切都按计划进行。我收到以下错误。我的问题可能与我的网络配置设置方式有关，但连接字符串可以正常连接到数据库。问题是我的站点仍然依赖于本地服务器而不是远程服务器。

给出的错误：

```
Exception Details: System.ArgumentException: Invalid value for key 'attachdbfilename'.

Stack Trace: 

[ArgumentException: Invalid value for key 'attachdbfilename'.]
System.Data.SqlClient.SqlConnectionString.VerifyLocalHostAndFixup(String& host, Boolean        enforceLocalHost, Boolean fixup) +907262
System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) +4116
System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) +24
System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(String connectionString, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions) +150
System.Data.SqlClient.SqlConnection.ConnectionString_Set(String value) +59
System.Data.SqlClient.SqlConnection.set_ConnectionString(String value) +4
System.Web.Providers.ModelHelper.CreateEntityConnection(ConnectionStringSettings setting,      String csdl, String ssdl, String msl) +90
System.Web.Providers.ModelHelper.CreateMembershipEntities(ConnectionStringSettings setting) +28
System.Web.Providers.DefaultMembershipProvider.GetPasswordWithFormat(String userName,  Boolean updateLastLoginActivityDate, Int32& status, String& password, Int32& format, String&  salt, Int32& failedPasswordAttemptCount, Int32& failedPasswordAnswerAttemptCount, Boolean&  isApproved, DateTime& lastLoginDate, DateTime& lastActivityDate) +123
System.Web.Providers.DefaultMembershipProvider.CheckPassword(String userName, String password, Boolean updateLastActivityDate, Boolean failIfNotApproved, String& salt, Int32& passwordFormat) +96
 System.Web.Providers.DefaultMembershipProvider.ValidateUser(String username, String  password) +105
 System.Web.UI.WebControls.Login.AuthenticateUsingMembershipProvider(AuthenticateEventArgs e) +60
System.Web.UI.WebControls.Login.OnAuthenticate(AuthenticateEventArgs e) +129
System.Web.UI.WebControls.Login.AttemptLogin() +127
 System.Web.UI.WebControls.Login.OnBubbleEvent(Object source, EventArgs e) +101
 System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
System.Web.UI.WebControls.Button.OnCommand(CommandEventArgs e) +125
System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +167
System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean   includeStagesAfterAsyncPoint) +5563 
```

网络配置：

```
 <!--Godaddy connection string used for live server-->

<add name="GoDaddy" connectionString=" Server=***; Database=***; User ID=****; Password=***; Trusted_Connection=False" providerName="System.Data.SqlClient" />

<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-Kappa Lambda-20130125180802;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-Kappa Lambda-20130125180802.mdf"
  providerName="System.Data.SqlClient" /> 
```

```
</authentication>

<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<roleManager defaultProvider="DefaultRoleProvider">
  <providers>
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</roleManager>

<!--
        If you are deploying to a cloud environment that has multiple web server instances,
        you should change session state mode from "InProc" to "Custom". In addition,
        change the connection string named "DefaultConnection" to connect to an instance
        of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
   -->
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:35:33.623

您的成员资格、角色和个人资料提供者都设置为使用您的 SQL Express 附加数据库，而不是 GoDaddy 的。改变它，它会工作。

我建议不要重命名您的连接字符串，只需给两个相同的名称，然后注释掉（使用`<!-- -->`）您不想要的那个，因此您不需要手动更新您的角色/成员资格/配置文件配置。

# android - Android：在列表视图上添加一个新项目（“作者”）

> ID：15489494
> 
> 赞同：0
> 
> 时间：2013-03-19T00:32:47.247
> 
> 标签：android, listview, widget

大家好，我正在开发一个简单的 android 小部件（“Quotes”）。该项目运行良好，但我想添加一个新的文本视图，显示特定“思想”的作者。我在widget.xml（布局）中创建了一个新的文本视图......我是新手！！！

这里的代码是：

WidgetQuotes.Java

```
 import android.app.PendingIntent;
  import android.appwidget.AppWidgetManager;
  import android.appwidget.AppWidgetProvider;
  import android.content.Context;
  import android.content.Intent;
  import android.widget.RemoteViews;

   public class WidgetQuotes extends AppWidgetProvider {

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    // Build the intent to call the service
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);
    Intent intent = new Intent(context.getApplicationContext(), UpdateWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

    RemoteViews remoteViews2 = new RemoteViews(context.getPackageName(), R.layout.widget);
    Intent intent2 = new Intent(context.getApplicationContext(), UpdateWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

    // To react to a click we have to use a pending intent as the
    // onClickListener is
    // excecuted by the homescreen application
    PendingIntent pendingIntent = PendingIntent.getService(
            context.getApplicationContext(), 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    remoteViews.setOnClickPendingIntent(R.id.widget_textview, pendingIntent);

    PendingIntent pendingIntent2 = PendingIntent.getService(
            context.getApplicationContext(), 0, intent2, PendingIntent.FLAG_UPDATE_CURRENT);

    remoteViews2.setOnClickPendingIntent(R.id.widget_textview2, pendingIntent2);

    // Finally update all widgets with the information about the click
    // listener
    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews2);

    // Update the widgets via the service
    context.startService(intent);
    context.startService(intent2);
}

@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);

}
public void onReceive1(Context context, Intent intent2) {   
    super.onReceive(context, intent2);
}

} 
```

更新小部件服务.Java

```
 import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Random;

   import android.app.Service;
   import android.appwidget.AppWidgetManager;
   import android.content.Intent;
   import android.content.res.AssetManager;
   import android.os.IBinder;
   import android.util.Log;
   import android.widget.RemoteViews;

   public class UpdateWidgetService extends Service {
private static final String TAG = UpdateWidgetService.class.getSimpleName();

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    Log.d(TAG, "onStart started");

    // Create some random data
    Random random = new Random();

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());

    int[] appWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    if (appWidgetIds.length > 0) {

        for (int widgetId : appWidgetIds) {
            List<String> qList = getListFromTxtFile("quotes.txt");
            int nextInt = random.nextInt(qList.size());

            RemoteViews remoteViews = new RemoteViews(getPackageName(), R.layout.widget);
            remoteViews.setTextViewText(R.id.widget_textview, qList.get(nextInt));
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();
    }
    super.onStart(intent, startId);
}

public List<String> getListFromTxtFile(String txtFileName){

//  File sdcard = Environment.getExternalStorageDirectory();
// Get the text file
// File file = new File(sdcard,txtFileName);

AssetManager am = this.getAssets();

List<String> qList = new ArrayList<String>();

//Read text from file

try {
    InputStream is = am.open("quotes.txt");
          //BufferedReader br = new BufferedReader(new FileReader(file));
    BufferedReader br = new BufferedReader(new InputStreamReader(is));
    String line;

     // get data in text file line by line
    while ((line = br.readLine()) != null) {

        Log.d("line",line);

       qList.add(line);
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here

    {Log.d("Error","There are an error");}
}
return qList;

}

   } 
```

小部件.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="160dp"
android:orientation="vertical"
android:background="@drawable/widget_frame3"
android:layout_gravity="center">

<TextView
    android:id="@+id/widget_textview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left|center_horizontal"
    android:layout_marginLeft="80dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="30dp"
    android:padding="10dip"
    android:scrollbars="vertical"
    android:text="@string/widget_text"
    android:textColor="@android:color/white" />

<TextView
    android:id="@+id/widget_textview2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left|center_horizontal"
    android:layout_marginLeft="80dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="20dp"
    android:padding="10dip"
    android:scrollbars="vertical"
    android:text="@string/widget_text2"
    android:textColor="@android:color/white" />

    </LinearLayout> 
```

# php - Android - 与 Web 服务器 / MySQL 的 JSON 连接

> ID：15489498
> 
> 赞同：0
> 
> 时间：2013-03-19T00:33:17.853
> 
> 标签：php, android, mysql, json

我正处于我的第一个 android 编程时代，我被困在这个问题上。

我正在尝试通过 PHP 在 android 项目中与 MySQL 数据库建立连接（登录页面）。我已经在我的网络中使用主机的 ip 地址在模拟器中取得了成功。但是，我似乎无法连接到外部 IP，这是支点，因为我的意思是在真实设备上实现它。

在设备上，由于它在网络之外，我无法以任何方式连接。

连接不成功的结果是崩溃，LogCat 停留在 Button - Login。

我已将 Internet 权限添加到清单中。

成功连接和不成功连接之间的唯一变化是地址（内部到外部）。

```
//JSON parser code:

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {

        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);            
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String

    return jObj;

}

//Creating the JSON

JSONObject json = jsonParser.getJSONFromUrl(loginURL, params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:41:45.240

如果您在与真实设备相同的 WiFi 网络中运行本地服务器，请使用**ipconfig** (Windows) 检查您的 PC 服务器的 IP，它类似于 192.168.100.101 或类似的东西。所以你只需从你的设备连接到这个地址。

# c# - 如何仅重绘分层窗口的一个区域？

> ID：15489499
> 
> 赞同：0
> 
> 时间：2013-03-19T00:33:30.477
> 
> 标签：c#, winforms, layered-windows

我有一个通常以这种方式绘制的分层窗口：

```
 private void SelectBitmap(Bitmap bitmap)
    {
        IntPtr screenDc = GetDC(IntPtr.Zero);
        IntPtr memDc = CreateCompatibleDC(screenDc);
        IntPtr hBitmap = IntPtr.Zero;
        IntPtr hOldBitmap = IntPtr.Zero;

        try
        {
            hBitmap = bitmap.GetHbitmap(Color.FromArgb(0));
            hOldBitmap = SelectObject(memDc, hBitmap);

            POINT sourceLocation = new POINT(0, 0);
            BLENDFUNCTION blend = new BLENDFUNCTION();

            blend.BlendOp = AC_SRC_OVER;
            blend.BlendFlags = 0;
            blend.SourceConstantAlpha = 255;
            blend.AlphaFormat = AC_SRC_ALPHA;

            SIZE newSize = new SIZE(bitmap.Width, bitmap.Height);
            POINT newLocation = new POINT(Location.X, Location.Y);

            UpdateLayeredWindow(Handle, screenDc,
                ref newLocation, ref newSize,
                memDc,
                ref sourceLocation, 0,
                ref blend,
                ULW_ALPHA);
        }
        finally
        {
            ReleaseDC(IntPtr.Zero, screenDc);

            if (hBitmap != IntPtr.Zero)
            {
                SelectObject(memDc, hOldBitmap);
                DeleteObject(hBitmap);
            }

            DeleteDC(memDc);
        }
    } 
```

但是，这显然在每次调用时都会重绘整个窗口。在大窗口上，这是一个相当大的性能消耗。（即使在我的顶级 PC 上，这让我想知道人们如何在 Win2K 中处理它）

[如果我阅读了有关分层窗口的 Microsoft 论文，它说](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633556%28v=vs.85%29.aspx)：UpdateLayeredWindow 总是更新整个窗口。要更新窗口的一部分，请使用传统的 WM_PAINT 并使用 SetLayeredWindowAttributes 设置混合值。

我只是无法理解上面的内容。WM_PAINT 应该如何访问分层窗口位图并仅在窗口上重绘它的一部分？据我了解，分层窗口只是禁用 WM_PAINT 消息并期望用户自己绘制窗口。显然没有办法将 WM_PAINT 绑定到完成的自定义绘图。

我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:52:59.530

经过长时间的分析，我发现瓶颈并不是分层窗口更新。刷新整个屏幕，上面的 SelectBitmap 方法，在 1920*1200 上大约需要 6-8ms。当然，不是很神奇，但足以以 30 FPS+ 刷新。

就我而言，性能消耗来自于某个线程要求每次重绘近百次刷新，这使得一切都变得迟缓。解决方案是分解刷新/重绘并将它们分开。一个会更新（联合）一个区域，另一个会在不绘制时获取该区域，绘制它然后清空它。

# python - quickfix：如何从消息中获取符号（标志 55）？

> ID：15489500
> 
> 赞同：3
> 
> 时间：2013-03-19T00:33:31.163
> 
> 标签：python, quickfix, fix-protocol

我正在使用 Python API 运行 QuickFix，并使用 FIX4.2 连接到 TT FIX 适配器

我正在登录并发送两个工具的市场数据请求。这工作正常，来自仪器的数据按预期输入。我可以从消息中获取各种信息。

但是，我无法获取符号（标志 55）字段。

```
 import quickfix as fix

    def fromApp(self, message, sessionID):

        ID = fix.Symbol()
        message.getField(ID)
        print ID 
```

这适用于我收到的第一条消息 [初始市场数据快照（标志 35 = W）]。一旦我开始获得增量刷新（标志 35 = X），我就无法再获得 Symbol 字段。到达的每条消息都会导致 Field Not Found 错误。

这让我很困惑，因为在日志中，符号字段始终存在，无论消息类型是 W 还是 X。

认为符号在刷新消息的标题中，我`get.Field(ID)`在 35 = W 和`get.Header().getField(ID)`35 = X 时尝试过，但这不起作用。

有人可以帮我弄清楚这里发生了什么吗？我希望能够明确地告诉我的计算机它在看什么仪器。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:48:55.913

你的问题很简单，但你也混入了一些误解。

1) 符号**永远不会**出现在标题中。这是一个身体场。

2) 在 X 消息中，符号在重复组中。您首先必须使用 获取一个组对象，然后从中*获取*`msg.GetGroup()`符号。请参阅[此示例代码](http://quickfixengine.org/quickfix/doc/html/python/repeating_groups_2.html)，来自[重复组文档页面](http://quickfixengine.org/quickfix/doc/html/repeating_groups.html)。

 *3) 在 W 消息中，符号不在一个组中。这就是为什么它在那里为你工作。

总体而言，您似乎对 QuickFIX 和 FIX 很陌生。我认为您应该花几分钟时间浏览[一下文档](http://quickfixengine.org/quickfix/doc/html/)的“处理消息”部分。

此外，[FIXimate](http://fixprotocol.org/FIXimate3.0/)网站可以成为您最好的朋友。*

# powershell - PowerShell 和 GhostScript

> ID：15489502
> 
> 赞同：1
> 
> 时间：2013-03-19T00:33:39.743
> 
> 标签：powershell, windows-server-2008-r2, ghostscript

我有一个批处理脚本，它循环一个文件夹并使用 GhostScript (9.07) 将其中的 PDF 展平。我想将其转换为 PowerShell 脚本，因为它似乎喜欢偶尔崩溃，而且我只是厌倦了调试批处理文件。

无论如何，我有一个似乎可以工作的 PS 脚本，基于它在控制台中的输出，但我实际上并没有得到任何文件。PS中的手动输入似乎更有效......我做错了什么？

**批处理脚本**

```
@ECHO OFF
::
:: Process all PDFs and flatten them to PDF/A format
:: =====================================================================================
FOR %%F IN ("J:\Finals\*.pdf") DO (
    IF /I %%F NEQ "*Floor Plan*.pdf" (
::      Convert the original PDF to a flattened PDF PDF/A
::      ========================================================================
        "%ProgramFiles%\gs\gs9.07\bin\gswin64.exe" -dPDFA -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile="J:\Finals\%%~nF (Final).pdf" "%%F"
::
::      Delete the original PDF file
::      ========================================================================
        DEL "%%F" /F /Q
::
::      Rename the flattened PDF PDF/A to the original PDF's name
::      ========================================================================
        MOVE "J:\Finals\%%~nF (Final).pdf" "%%F"
    )
)
::
:: Move files form the Readdle drive to the Digital Documents drive
:: =====================================================================================
ROBOCOPY J:\Finals\ K:\ *.* /MOV /R:0 /W:0 /MT 
```

**PowerShell 脚本（到目前为止）**

```
$GhostScript = "$env:ProgramFiles\gs\gs9.07\bin\gswin64c.exe"

Get-ChildItem "C:\Test In\*.pdf" | Where {
    $_.BaseName -NotMatch "Floor Plan"
} | ForEach-Object {
    $InputFile = $_.FullName
    $OutputFile = "C:\Test Out\{0} (Final).pdf" -F $_.BaseName

    & "$GhostScript" -dPDFA -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile="$OutputFile" "$InputFile"
} 
```

**PowerShell 脚本的输出**

```
GPL Ghostscript 9.07 (2013-02-14)
Copyright (C) 2012 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
Substituting font Times-Italic for TimesNewRomanPS-ItalicMT.
Loading NimbusRomNo9L-ReguItal font from %rom%Resource/Font/NimbusRomNo9L-ReguItal... 4198200 2870566 3665244 2332637 3 done.
Substituting font Courier for CourierNewPSMT.
Loading NimbusMonL-Regu font from %rom%Resource/Font/NimbusMonL-Regu... 3755680 2306439 4089108 2566088 3 done.
Loading NimbusRomNo9L-Regu font from %rom%Resource/Font/NimbusRomNo9L-Regu... 3796376 2391131 4078352 2484871 3 done.
Loading Dingbats font from %rom%Resource/Font/Dingbats... 3917480 2509851 4280192 2689988 3 done. 
```

任何关心这个的人都在 Windows Server 2008 R2 虚拟机上进行测试。它有 4GB 的 RAM 和 4 个 vCPU。我还检查了我使用的测试文件夹是否存在权限问题，但事实并非如此。

**更新**

我已经更新了我的帖子以显示当前脚本的样子。将`$OutputFile`变量括在引号中不会做任何事情。无论是否引用引号，我总是得到输出（我在上面添加），表明 GhostScript 正在做它应该做的事情，但最终我没有创建任何文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-20T13:16:28.473

对我来说，使用 PDFtk 生成的 PDF 比原始 PDF 更大，所以这不是很有帮助。我也想使用 powershell，因为这只是这些天要走的路，但是在 powershell 中执行 ghostscript 也遇到了麻烦。由于它在使用批处理文件时运行良好，因此我选择使用带有两个参数的批处理文件运行 ghostscript，我在我的 powershell 脚本中调用了两个参数。

精简版（没有循环和清理）如下所示：

```
$script = "C:\path\to\script.cmd"
$InputFile = "C:\path\to\input.pdf"
$OutputFile = "C:\path\to\output.pdf"
& $script $InputFile $OutputFile 
```

批处理脚本如下所示：

```
echo off
set arg1=%1
set arg2=%2

"C:\Program Files\gs\gs9.19\bin\gswin64c.exe" -sDEVICE=pdfwrite -dPDFSETTINGS=/screen -dCompatibilityLevel=1.4 -dNOPAUSE -dBATCH -sOutputFile=%arg2% %arg1% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:30:21.150

您的`$OutFile`变量会生成一个包含空格的路径，您需要用引号将其括起来：

```
& $GhostScript -dPDFA -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile="$OutputFile" $InputFile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:36:18.723

嗯，我想出了一个解决办法。它涉及选择不使用 GhostScript for PDFtk。说真的，我不知道 GhostScript 的交易是什么，但它只是拒绝 100% 工作。它工作了 95%，但我真正关心的最后 5%（输出的文件）从未发生过。无论如何，我改为使用 PDFtk，它可以正常工作，而且对于完全相同的任务，它的工作速度也比 GhostScript 快很多倍。我不明白...

这是我最终的 PowerShell 脚本的样子：

```
$PDFtk = "C:\Program Files (x86)\PDF Labs\PDFtk Server\bin\pdftk.exe"

If (Test-Path $PDFtk) {
    Get-ChildItem "J:\Finals\" | Where-Object {
        $_.Extension -Match "pdf"
    } | ForEach-Object {
        $InputFile = $_.FullName
        $OutputFile = "J:\Finals\{0} (Flattened).pdf" -F $_.BaseName
        $DigitalDocumentsFile = "K:\{0}" -F $_.Name

        & $PDFtk $InputFile OUTPUT $OutputFile FLATTEN

        If (Test-Path $OutputFile) {
            Remove-Item $InputFile
            Move-Item $OutputFile $DigitalDocumentsFile
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-29T06:52:21.417

我知道这个问题已经很老了——但这是我对这种情况的看法。

批处理脚本是否自行尝试以查看是否生成了任何输出文件 - 如果没有，可能是批处理脚本中的删除文件命令在 GhostScript 可执行文件完成执行之前运行。

要解决此问题，可以尝试以下两种方法之一

1.  通过 timeout 命令在 ghostscript 调用和删除命令之间添加延迟

    `timeout /t 3 /nobreak > nul`

将增加 3 秒延迟。调整它以满足您的要求。

2.  在 ghostscript 调用的开头添加“start”命令

    `**start /wait /min ""** "%ProgramFiles%\gs\gs9.07\bin\gswin64.exe" ...`

/wait 开关将导致 del 命令仅在启动目标完成后执行。/min 开关将抑制控制台窗口的闪烁。/min 开关后的空字符串 "" 是必要的，以避免 start 命令将 ghostscript 可执行文件的路径视为控制台标题。

此外，将 ghostscript 参数替换为

```
-q -dNOPAUSE -dBATCH -dSAFER -dSimulateOverprint=true -sDEVICE=pdfwrite -dPDFSETTINGS=/ebook -dEmbedAllFonts=true -dSubsetFonts=true -dAutoRotatePages=/None -dColorImageDownsampleType=/Bicubic -dColorImageResolution=150 -dGrayImageDownsampleType=/Bicubic -dGrayImageResolution=150 -dMonoImageDownsampleType=/Bicubic -dMonoImageResolution=150 
```

可能会导致生成的 pdf 比原始帖子中使用的最小设置小得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-07T16:04:18.500

这实际上很奇怪。我用进程监视器查看了这个。当没有被双引号括起来时，Ghostscript 实际上按字面意思输出到 '$Outputfile'。

```
 & $GhostScript -dPDFA -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile="$OutputFile" $InputFile 
```

这对我来说已经足够了，即使在 $ghostscript 和 $inputfile 变量中有空格。看起来powershell通常不会解释看起来像-parameter的变量，除非冒号在它前面，或者它是双引号，即使在PS 6中也是如此。

更简单的演示：

```
$a = 'hi'

echo -InputObject$a

-InputObject$a

echo -InputObject"$a"

-InputOjbecthi

echo -InputObject:$a

hi 
```

# hadoop - 无法在 Hbase shell 上运行命令

> ID：15489503
> 
> 赞同：0
> 
> 时间：2013-03-19T00:33:43.203
> 
> 标签：hadoop, hbase

`INFO ipc.HBaseRPC: Problem connecting to server: /129.10.193.117:49176`当我尝试在 Hbase 中创建或禁用表时，我不断收到。我用谷歌搜索了这个错误并找到了几个答案。他们都说类似**“默认安装在 /etc/hosts 中添加了一行，它链接到 IP 127.0.1.1 的机器主机名。”**

这是我的 etc/host 文件

```
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost 
```

我的 conf/regionservers 也指向 localhost。有谁知道如何解决这一问题 ？关闭 hbase & Hadoop 然后重新启动我的系统后，我没有收到此错误。不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:21:34.900

您的 hadoop 配置是否也指向 localhost ？

# java - 如何获得 Swing 组件的绘制大小？

> ID：15489504
> 
> 赞同：3
> 
> 时间：2013-03-19T00:33:45.357
> 
> 标签：java, swing, border, jcomponent, margins

当我将 Swing 组件（如 JButton）添加到 JPanel 时，它会以其“首选大小”呈现。

但是，首选尺寸实际上比绘制的按钮大。它周围似乎有一个看不见的边框。

这是我的测试面板的简单框架：

```
JFrame frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

TestPanel pnl = new TestPanel();
frame.getContentPane().add(pnl);

frame.pack();
frame.setVisible(true); 
```

这是我的测试面板...

```
public class TestPanel extends JPanel {

    JButton btn1 = new JButton("Test1");
    JButton btn2 = new JButton("Test2");

    public TestPanel() {
        this.add(btn1);
        this.add(btn2);
    }

    public void paint(Graphics g) {
        super.paint(g);

        g.setColor(Color.RED);
        Dimension dim = btn1.getPreferredSize();
        g.drawRect(btn1.getX(), btn1.getY(), (int)(dim.getWidth()), (int)(dim.getHeight()));
    }

} 
```

请注意，我在 RED 中绘制了 btn1 的“PreferredSize”，以证明preferredSize 实际上比按钮本身大。

![在此处输入图像描述](../Images/197a586335192c0ced7b50663ad97b6e.png)

我的问题是，如何确定绘制按钮的宽度和高度，而不是 JButton 的preferredSize？

非常感谢任何帮助，谢谢！

# 更新

因为我实际上需要它来为所有 Swing 组件工作，所以这是一个包含更多组件的屏幕截图。

不幸的是，我需要弄清楚这一点，确定可见小部件的“真实”大小对我的应用程序至关重要。

![在此处输入图像描述](../Images/ec715bdbb69204203fe0cae59971161a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:40:42.423

我不认为这是特别的或实际上可以实现的。

问题是，按钮正在使用“未绘制”区域来绘制其他元素，例如焦点突出显示。

你可以试试看`AbstractButton#set/getMargin`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T01:51:56.980

如果没有更好的结果，请注意作者“建议您将组件放在 a 中并在 .上`JPanel`设置[边框](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBorder%28javax.swing.border.Border%29)`JPanel`。”

附录：根据您在下面的评论，很明显您的问题不是关于渲染边界，而是关于建立组件的边界。您认为未使用的空间实际上由 UI 代表保留用于任意数量的用途，例如选择突出显示或美学连贯性。[您可以通过在此处](https://stackoverflow.com/a/11949899/230513)和[此处](https://stackoverflow.com/a/5630271/230513)的示例中选择不同的外观主题来了解其变化方式。

使用`getbounds()`：

![图片](../Images/fa4598dc24e6f8c9fbb4124e1865598d.png)

使用`setBorder()`：

![图片](../Images/b07cf525a873352ac1fde8364c34179c.png)

```
import component.Laf;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Rectangle;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;

/**
 * @see https://stackoverflow.com/a/15490187/230513
 */
public class Test {

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLayout(new FlowLayout());
        // https://stackoverflow.com/a/11949899/230513
        f.add(Laf.createToolBar(f));
        f.add(decorate(new JButton("Test")));
        f.add(decorate(new JTextField("Test")));
        f.add(decorate(new JTextArea(3, 8)));
        f.add(decorate(new JCheckBox("Test")));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private JPanel decorate(final JComponent c) {
        JPanel p = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                Rectangle r = c.getBounds();
                g.setColor(Color.red);
                // NB pen hangs down and to the right
                g.drawRect(r.x - 1, r.y - 1, r.width + 1, r.height + 1);
            }
        };
        p.add(c);
        return p;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```

# c# - 使用 WebBrowser 时如何访问 cookie

> ID：15489506
> 
> 赞同：0
> 
> 时间：2013-03-19T00:33:52.680
> 
> 标签：c#, cookies, browser

我有一些 cookie 存储在我使用 HttpWebRequest 获得的 cookie 容器中。然后我继续将这些 cookie 放入 WebBrowser 对象并使用以下代码进行导航：

```
WebBrowser wb = new WebBrowser();

for (int i = 0; i < webProcCookies.Count; i++)
{
    Cookie c = webProcCookies[i];

    InternetSetCookie(URL, c.Name, c.Value); 
}

wb.Navigate(URL, "_self", null, "User-Agent: XXX"); 
```

现在，当我通过 fiddler 运行它时，我可以看到所有的 cookie 数据。当我使用调试器逐步执行此操作时，cookie 仅显示一点点数据。我希望能够在运行时访问整个 cookie 数据。

在我导航之前是否有访问 cookie 的所有值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:55:15.883

要获取所有 cookie，请使用 Request.Cookies.AllKeys；

就像是

```
string[] webProcCookies= Request.Cookies.AllKeys;
foreach (string cookie in webProcCookies)
{
  //Your Code
} 
```

# isabelle - 如何查看 Isabelle 证明目标中的隐藏类型变量？

> ID：15489508
> 
> 赞同：3
> 
> 时间：2013-03-19T00:33:56.957
> 
> 标签：isabelle

在 Isabelle 中，人们经常可以达到证明目标，其中中间类型的术语对证明的正确性至关重要。例如，考虑以下引理将`nat`42 转换为`'a word`then 再返回：

```
theory Test
imports "~~/src/HOL/Word/Word"
begin

lemma "unat (of_nat 42) = 42"
  ... 
```

现在这个陈述的真假取决于 的类型`of_nat 42`：如果是`32 word`，那么这个陈述是真的，如果它是一个`2 word`，那么这个陈述是假的。

不幸的是，我似乎无法让 Isabelle 向我展示这种中间类型。

我尝试了以下方法：

*   `declare [[show_types]]`
*   `declare [[show_sorts]]`
*   `local_setup {* Config.put show_all_types true *}`

所有这些都只显示：

```
unat (of_nat (42::nat)) = (42::nat) 
```

在紧要关头，可以这样做：

```
apply (tactic {* (fn t => (tracing (PolyML.makestring (prems_of t)); all_tac t))  *}) 
```

确实得到了原始转储`term`，但我希望有更好的方法。

**有没有一种在证明目标中显示中间项类型的好方法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:28:58.120

在 Isabelle/jEdit 中，您始终可以将“控制悬停”（即，按住控制按钮并将鼠标悬停）悬停在一个常数上以获得更多信息。对于`of_nat`在

```
lemma "unat (of_nat 42) = 42" 
```

这导致

```
constant "Nat.semiring_1_class.of_nat"
:: nat => 'a word 
```

现在你可以递归地做同样`'a`的事情`'a word`并且会得到

```
:: len
free type variable 
```

它告诉你那`'a`是排序`len`（通过控制点击`len`，你可以直接跳转到这个类型类的定义，这也很方便）。

所以你的问题的答案是：是的，Isabelle/jEdit 中的控制悬停。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T08:56:00.527

为了让 Isabelle 在本例中向您展示 unat 的类型，您需要声明以下内容：

```
 declare [[show_types]]
  declare [[show_sorts]]
  declare [[show_consts]] 
```

最后一行在输出窗口中打印目标中使用的每个常量的类型。这在 jEdit 和 ProofGeneral 中都有效。

这个解决方案有一个问题：如果 unat 以不同的类型多次出现，它会打印所有这些实例，但它不会告诉你哪个类型的实例是哪个出现的。不过，除了 jEdit 悬停之外，我不知道任何解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T11:32:27.580

Running the command:

```
setup {* Config.put_global show_all_types true *} 
```

seems to do the trick.

The goal `unat (of_nat 3) = 3` becomes the hideous (but complete):

```
goal (1 subgoal):
 1\. (Trueprop::bool => prop)
     ((op =::nat => nat => bool)
       ((unat::'a word => nat)
         ((of_nat::nat => 'a word)
           ((numeral::num => nat)
             ((num.Bit1::num => num) (num.One::num)))))
       ((numeral::num => nat)
         ((num.Bit1::num => num) (num.One::num)))) 
```

as desired.

It is interesting that a `declare [[show_all_types]]` does not work; the source looks like it should. Perhaps it is a bug in Isabelle2013?

# javascript - jQuery 克隆的列表项在使用 each() 函数时都获得相同的文本值

> ID：15489510
> 
> 赞同：1
> 
> 时间：2013-03-19T00:34:09.183
> 
> 标签：javascript, jquery, clone, each, zepto

我正在尝试在 DOM 中克隆一个列表项，并根据使用 each 函数的变量*数据*中文本值的数量多次附加它。问题是所有新列表项都获得相同的文本值（所有列表项都设置为等于最后附加的列表项）。我想它与外壳有关，但我无法弄清楚。

谁能解释问题是什么？

谢谢！

**数据：**

```
 var data = {"text1": ["text1_row1", "text1_row2"], "text2": ["text2_row1", "text2_row2"], "text3": ["text3_row1", "text3_row2"] } 
```

**HTML：**

```
 <ul>
        <li id="entryTemplate" style="display:none">
            <span class="text1"></span>
            <span class="text2"></span>
            <span class="text3"></span>
        </li>
    </ul> 
```

**Javascript：**

```
function listData(data){
    $.each(data.text1, function(i) {
        var newDataRow = $('#entryTemplate').clone();   
        newDataRow.removeAttr('id')
             .removeAttr('style')
             .removeAttr('class')
             .addClass('copy')
             .appendTo('ul')
             .find('.text1').text(data.text1[i])
             .find('.text2').text(data.text2[i])
             .find('.text3').text(data.text3[i]);
    });
}

$.fn.clone = function(){
    var ret = $();
    this.each(function(){
        ret.push(this.cloneNode(true))
    });
    return ret;
}; 
```

**所需的 HTML：**

```
 <ul>
        <li id="entryTemplate" style="display:none">
            <span class="text1"></span>
            <span class="text2"></span>
            <span class="text3"></span>
        </li>
        <li class="copy">
            <span class="text1">text1_row1</span>
            <span class="text2">text2_row1</span>
            <span class="text3">text3_row1</span>
        </li>
        <li class="copy">
            <span class="text1">text1_row2</span>
            <span class="text2">text2_row2</span>
            <span class="text3">text3_row2</span>
        </li>

    </ul> 
```

**我得到的结果（所有 li 项目都得到 row2 的文本）：**

```
 <ul>
        <li id="entryTemplate" style="display:none">
            <span class="text1"></span>
            <span class="text2"></span>
            <span class="text3"></span>
        </li>
        <li class="copy">
            <span class="text1">text1_row2</span>
            <span class="text2">text2_row2</span>
            <span class="text3">text3_row2</span>
        </li>
        <li class="copy">
            <span class="text1">text1_row2</span>
            <span class="text2">text2_row2</span>
            <span class="text3">text3_row2</span>
        </li>

    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:03:26.510

你的问题有点模糊，不清楚你正在寻找的结果是什么。Appart 从那我看到你的代码中可能导致它的东西。试一试，让我知道发生了什么。

当你这样做

```
$.each(data.text1, function(i) { 
```

将其更改为

```
$.each(data.text1, function(pos, element) { 
```

并将 [i] 替换为 [element]。

根据 JQuery API，在执行 EACH 循环时，第一个返回是数组中的位置，第二个是值本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:22:36.583

更新答案：

您的数据对象变量格式错误......看起来您希望数据对象的每个值都是一个数组（使用花括号意味着您正在定义一个带有键的对象），因此您应该使用方括号`[]`。参见[数组与类数组对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys#Examples)

```
var data = {
    "text1": ["text1_row1", "text1_row2"],
    "text2": ["text2_row1", "text2_row2"],
    "text3": ["text3_row1", "text3_row2"]
} 
```

jQuery 已经有一个[clone 方法](http://api.jquery.com/clone/)，所以你不需要用你自己的方法覆盖。

根据您提供的数据，您希望迭代`data`变量本身，而不是`data.text1`. 然后您可以通过当前索引的值（这是传递给的第二个参数`.each()`）获取文本值并引用`[0]`并`[1]`获取实际文本

```
$.each(data,function(i,value){
  console.log(value);
  var newDataRow = $("#entryTemplate").clone();
  newDataRow
  .removeAttr('id')
  .removeAttr('style')
  .removeAttr('class')
  .addClass('copy')
  .appendTo('ul');
  newDataRow.children('.text1').text(value[0]); // value[0] == data[i][0]
  newDataRow.children('.text2').text(value[1]);
}); 
```

# java - java循环，否则

> ID：15489511
> 
> 赞同：0
> 
> 时间：2013-03-19T00:34:13.313
> 
> 标签：java, loops, while-loop, if-statement

我知道这是非常简单的事情，但是，我只编程了几个月，所以我的大脑有时会迷糊，我需要一个带有嵌套 else if 语句的 while 循环的帮助。我的循环的问题是连续的，因为用户永远没有机会输入他们的选择（-1 停止循环）。如何更改循环，使其通过要求用户输入选项（1-4 或 -1 退出）来运行

请任何帮助表示赞赏。我知道这很简单，我已经通过以前的论坛讨论进行了搜索，但我似乎无法让它发挥作用。

```
//create new scanner object 
    Scanner userInput = new Scanner (System.in);
    int end = 0;
    //find out what user wants to do with address book
    while (end != -1)
    {
        System.out.println("  ");
        System.out.println("  ");
        System.out.println("----------------------------");
        System.out.println("What would you like to do with your address book? ...");
        System.out.println("----------------------------");
        System.out.println("Add new         [Enter 1]");
        System.out.println("Delete existing [Enter 2]");
        System.out.println("Edit existing   [Enter 3]");
        System.out.println("Search for      [Enter 4]");
        System.out.println("EXIT            [Enter -1]");
    }

    if (userInput.hasNext() && (userInput.nextInt() == 1)) 
    {
        AddressBookProcessor.addContact();
    }
    else if (userInput.hasNext() && userInput.nextInt() == 2)
    {
        AddressBookProcessor.deleteContact();
    }
    else if (userInput.hasNext() && userInput.nextInt() == 3)
    {
        AddressBookProcessor.editContact();
    }
    else if (userInput.hasNext() && userInput.nextInt() == 4)
    {
        AddressBookProcessor.findContact();
    }
    else if (userInput.nextInt() != 1 || userInput.nextInt() != 2 
                     || userInput.nextInt() != 3 || userInput.nextInt() != -1)
    {
        System.out.println("Please enter a valid input");
        end = -1;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:36:47.900

将 if/else 移动到 while 循环内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:37:55.797

只需将 if 语句放在循环中就可以了（注意我没有检查代码上的任何其他内容，这只是一个快速响应）：

```
//create new scanner object 
    Scanner userInput = new Scanner (System.in);
    int end = 0;
    //find out what user wants to do with address book
    while (end != -1)
    {
        System.out.println("  ");
        System.out.println("  ");
        System.out.println("----------------------------");
        System.out.println("What would you like to do with your address book? ...");
        System.out.println("----------------------------");
        System.out.println("Add new         [Enter 1]");
        System.out.println("Delete existing [Enter 2]");
        System.out.println("Edit existing   [Enter 3]");
        System.out.println("Search for      [Enter 4]");
        System.out.println("EXIT            [Enter -1]");
    if (userInput.hasNext() && (userInput.nextInt() == 1)) 
    {
        AddressBookProcessor.addContact();
    }
    else if (userInput.hasNext() && userInput.nextInt() == 2)
    {
        AddressBookProcessor.deleteContact();
    }
    else if (userInput.hasNext() && userInput.nextInt() == 3)
    {
        AddressBookProcessor.editContact();
    }
    else if (userInput.hasNext() && userInput.nextInt() == 4)
    {
        AddressBookProcessor.findContact();
    }
    else if (userInput.nextInt() != 1 || userInput.nextInt() != 2 
                     || userInput.nextInt() != 3 || userInput.nextInt() != -1)
    {
        System.out.println("Please enter a valid input");
        end = -1;
    }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T00:36:04.780

您不会更改循环`end`内的变量`while`，从而导致无限循环。您需要将输入处理逻辑放在 while 循环中，以便`end`有机会更改，以便`while`循环可以结束。

# php - 启动 PHP 脚本，然后检查进度

> ID：15489514
> 
> 赞同：0
> 
> 时间：2013-03-19T00:34:36.527
> 
> 标签：php, mysql

我有一个服务器，其中有一个 mysql 数据库和 php，我创建了一个管理仪表板，我想这样做：我想单击一个按钮来启动一个 PHP 脚本，该脚本更新我的数据库，从网络上获取信息，然后当我关闭我的管理仪表板，例如，我想在 3 小时后检查 php 脚本的状态，例如使用进度条，如果我想停止或暂停这个脚本，这可能吗？

我想到了一个像while这样的循环，例如：

```
while (buttonnotpressed && updatenotfinish)
{
 //update database
} 
```

这只是一个例子，我正在寻找很多书籍，并且我在网上搜索过，但我找不到答案......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:37:08.463

从 jquery 对您的 php 文件进行异步调用

然后该文件将开始工作

然后另一个按钮对另一个 php 文件进行另一个异步调用，该文件只是将一些字符串写入文件。

在您的第一个文件中，您现在检查您的 while 该文件是否包含一些字符串

# paypal - 哪种 PayPal API 方法启动虚拟终端会话？

> ID：15489515
> 
> 赞同：1
> 
> 时间：2013-03-19T00:34:37.820
> 
> 标签：paypal, terminal

我想从我的站点在 PayPal 上启动一个虚拟终端会话，以便我可以自动传递各种帐户和交易信息。

我查看了 PayPal API，但似乎没有什么相关的。

可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:05:34.230

新的 REST API 还提供信用卡销售功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:48:09.470

帐户中没有专门连接到虚拟终端的 API。如果您想创建一个类似的界面，您会想要使用 DoDirectPayment API 并创建一个类似于虚拟终端的用户界面。

# c# - 请任何人都可以帮助将 xml 转换为 json 表单文本框

> ID：15489516
> 
> 赞同：0
> 
> 时间：2013-03-19T00:34:41.950
> 
> 标签：c#, xml, json

嘿伙计们，请任何人在这段代码中帮助我我正在使用 C# 从 textBox 获取 xml 并将其存储在字符串中我想在我使用 XmlDocument 时将其转换为 json 例如

当我使用 doc.loadXml(string); 我这里有错误 cald unhandledException 这是我的代码

```
 string xml2 = XMLResult.Text;
        XmlDocument doc = new XmlDocument();
        doc.LoadXml(xml2);

        string jsonText = JsonConvert.SerializeXmlNode(doc);

        JSONResult.Text = JSONResult.Text + jsonText.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:22:09.117

将代码放在 try 块中并捕获异常以了解问题所在。这将是一个好习惯。

# hadoop - 如何获取 HDFS 目录的配额

> ID：15489519
> 
> 赞同：10
> 
> 时间：2013-03-19T00:35:11.387
> 
> 标签：hadoop, hdfs

我看到有一个设置配额的命令，但找不到获取配额的命令。

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T00:51:51.400

```
hadoop fs -count -q /path/to/directory
QUOTA  REMAINING_QUOTA SPACE_QUOTA    REMAINING_SPACE_QUOTA DIR_COUNT  FILE_COUNT CONTENT_SIZE   FILE_NAME
none   inf             54975581388800 5277747062870         3922       418464     16565944775310 hdfs://master:54310/path/to/directory 
```

第三列将为您提供空间配额。

注意：为了便于阅读，刚刚添加了列标题，如果您想了解更多关于获取文件大小的不同方法的信息，`hdfs`这里有一篇综合博客文章：

[了解 HDFS 配额和 Hadoop Fs 和 Fsck 工具](http://www.michael-noll.com/blog/2011/10/20/understanding-hdfs-quotas-and-hadoop-fs-and-fsck-tools/ "了解 HDFS 配额和 Hadoop Fs 和 Fsck 工具")

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-24T14:43:58.420

```
hadoop fs -count -q -h -v /path/to/directory 
```

我会添加 -h 和 -v 选项以便于阅读输出。使用 -q 选项，还报告为每个目录设置的名称配额值、剩余的可用名称配额、设置的空间配额值和剩余的可用空间配额。如果目录没有设置配额，则报告值为 none 和 inf。-h 选项以人类可读的格式显示大小。-v 选项显示标题行。

# javascript - 计算弧长，三次贝塞尔曲线的曲线长度。为什么不工作？

> ID：15489520
> 
> 赞同：3
> 
> 时间：2013-03-19T00:35:15.313
> 
> 标签：javascript, math, bezier

我正在用这个算法计算弧长（三次贝塞尔曲线的长度）

```
 function getArcLength(path) {

        var STEPS = 1000; // > precision
        var t = 1 / STEPS;
        var aX=0;
        var aY=0;
        var bX=0, bY=0;
        var dX=0, dY=0;
        var dS = 0;
        var sumArc = 0;
        var j = 0;

        for (var i=0; i<STEPS; j = j + t) {
            aX = bezierPoint(j, path[0], path[2], path[4], path[6]);
            aY = bezierPoint(j, path[1], path[3], path[5], path[7]);
            dX = aX - bX;
            dY = aY - bY;
            // deltaS. Pitagora
            dS = Math.sqrt((dX * dX) + (dY * dY));
            sumArc = sumArc + dS;
            bX = aX;
            bY = aY;
            i++;
        }

        return sumArc;
    } 
```

但我得到的是类似 915 的东西。但曲线是 480，仅此而已。（我肯定知道这一点，因为曲线几乎是一条线）路径数组具有以下值：498 51 500 52 500 53 500 530

bezierPoint 函数是：

```
 function bezierPoint(t, o1, c1, c2, e1) {
        var C1 = (e1 - (3.0 * c2) + (3.0 * c1) - o1);
        var C2 = ((3.0 * c2) - (6.0 * c1) + (3.0 * o1));
        var C3 = ((3.0 * c1) - (3.0 * o1));
        var C4 = (o1);

        return ((C1*t*t*t) + (C2*t*t) + (C3*t) + C4)
    } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:39:20.440

因为`bX`和`bY`被初始化为 0，所以当 i = 0 时的第一段测量从原点到路径起点的距离。这会在长度上增加一个额外的 sqrt(498^2+51^2)。如果你初始化`bX = path[0]`and `bY = path[1]`，我认为它会起作用。

# google-plus - 在我的网站上托管 Google Plus 社区

> ID：15489526
> 
> 赞同：3
> 
> 时间：2013-03-19T00:35:59.863
> 
> 标签：google-plus

是否可以将谷歌社区嵌入网站页面？

通过这种方式，我们的客户可以从我们网站的内容和所有其他功能中受益，同时能够使用 Google 社区进行协作。

理想情况下，我想像 +1 按钮一样获取 Javascript 代码并将其粘贴到我的网站页面中，添加 iframe 或类似的东西！

**更新：**

听起来，如果我试图让人信服，我也许可以影响一些决定！更多详细信息：我们的网站服务提供使用 Google OAuth 登录 Google，这样用户要么登录，要么被迫登录 Google 以访问我们客户门户的私人区域，您可以在其中查看支持票的状态，提交新的支持票，访问知识库、文档、博客等。

我们在博客、产品目录等中加入了各种社交插件。如果用户可以在同一个地方访问社区（论坛或讨论板），那就太好了。谷歌社区似乎是工具，但在错误的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:24:21.180

目前不存在这样的小部件，但这是一个有趣的想法。如果您想准确地分享您正在寻找的内容的更多详细信息，您可以在此处提交问题：[https](https://code.google.com/p/google-plus-platform/) ://code.google.com/p/google-plus-platform/ 。您可以提供的详细信息越多，如果我们决定实施此功能，我们最终会得到您想要的东西的可能性就越大。

# list - 如何在 python 中存储对象以及如何访问它们

> ID：15489540
> 
> 赞同：1
> 
> 时间：2013-03-19T00:37:33.673
> 
> 标签：list, object, python-3.x, nested-lists, dictionary

在我们学校的项目中，我们有一个任务是使用 python 实现一个有效的“登录系统”。我已经做了几乎所有事情，但我一直在为程序中实现的两个功能而苦苦挣扎。我将尽我所能解释系统的目的是什么，以便您能够理解我面临的问题:) 基本上我将对象用于 2 个用户角色（管理员和普通用户），以及书对象。每个用户都可以登录系统，他们会看到 5 种不同的选择：添加图书、删除图书、列出图书、共享图书（这会检查是否有其他用户正在阅读同一本书）和退出。我在删除一本书和共享书单时遇到了极大的困难。

到目前为止，我一直将我的对象存储在一个列表中，并设法完成所有功能，使它们正常工作。但这是问题所在：这就是我将对象存储在嵌套列表中的方式，因此每本书都可以与所需的用户相关联

```
books=[book1,[user1],book2,[user1,user3],book3,[user3,user2],book4,[user1,user4,user3]] 
```

但是每当我尝试删除一本书时，我都会使用此功能，但它不起作用。我知道这段代码对你来说基本上没用，但我还是把它贴出来了，这样你就可以更好地了解我想要做什么。

```
total=len(books)
a=input("\nType in the book you want to delete:\n")
if (total!=0):
    for i in range(total):
        if(a==books[i].title):
            del(books[i])
            print("Book has been deleted\n\n")
            print(books)
            break 
```

以下代码块用于共享书功能，并且实际上正在工作。

```
books2=[]          
books3=[]          
xStr=input("Enter the name of the book\n")
for i in range(len(books)):
    if (i%2==1):               #This will select only users asociated with a book
        books2.append(books[i])
    if (i%2==0):               #This will select only the books
        books3.append(books[i])
for i in range(len(books2)):        
    for j in range(len(books2[i])): 
        if (books3[i].title==xStr): 
                print("Book: ",books3[i],"is also used by:",books2[i][j-1].username) 
```

我也尝试过使用字典，但没有用。

所以我想知道的是：-在您看来，这将是为此类程序存储对象的最佳方式-我应该使用哪种数据结构以及它是如何完成的

我希望我没有太复杂，对不起我的英语不好:) 非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:44:30.630

这个列表不是最优的，有更好的方法来解决这个问题。

要意识到的重要一点是，可以在多个列表或字典中引用单个对象。此外，对象可以包含列表属性。

因此，您可以维护所有书籍的列表。以及所有用户的列表。

用户可以有一个书单属性，然后也可以参考书，例如他读过的书：

```
class User:
    booksRead = [] 
```

或者，使用构造函数：

```
class User:
    def __init__(self):
        self.booksRead = [] 
```

然后将一本书添加到用户的列表中：

```
user.booksRead.append(book) 
```

这只是组织它的众多方法之一。如果您希望根据键在列表中查找项目，请使用字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:23:35.590

You'll find better ways to organize your data as you learn more and write more code; for now, take a close look at the difference between your delete code and your sharing code . . . (hint: your sharing code knows that only every *other* entry is a book).

# php - PHP：从 HTTPS 网站获取内容

> ID：15489541
> 
> 赞同：0
> 
> 时间：2013-03-19T00:37:42.613
> 
> 标签：php, ssl, https, file-get-contents

我想做的是创建一个页面来显示我的帐户余额。我有点讨厌使用用户名和密码登录我的银行帐户，因为我有两个不同的（幸运的是）密码很长/很扭曲。所以我想对这个自我登录进行编码，然后显示余额。而已。没有汇款，也没有付款..只有余额！但我认为这更容易一些。我的意思是，我知道这是一个银行网站，所以它必须是安全的，但是如果我远程登录（假设我能够做到）给你我的凭据，为什么不你工作吗？为什么你只在自己的服务器上工作？我知道 ssl、https、verisign 等。但是你认为我有什么办法可以做到这一点吗？当然，第三方开发者没有API，我必须自己想办法。

所以这就是我所做的：我尝试“远程”登录第一个银行账户（让我们将 bank.com 称为银行网站）。因此，如果页面 bank.com/login 有一个包含用户名和密码的表单，我创建了一个看起来完全相同的 localhost/login 页面。事实上，操作也是一样的，所以在登录后，我无论如何都会被重定向到我的银行账户（即bank.com/dashboard）。简单的？不是真的.. 有一个隐藏字段，一个令牌，它每 x 次改变一次。所以除了我已经做过的事情之外，我应该也可以在我的表单中添加这个字段。我应该从 localhost 模拟这个过程：进入银行网站，进入登录区域，浏览表单，找到隐藏字段（令牌）并记下它。然后将其添加到我的 localhost 表单中，并最终从那里登录。嗯，银行的登录区。com 在 https 协议下，因此我无法访问其内容。我的计划彻底失败了。或不？我尝试使用**file_get_contents**将 bank.com/login 内容刷新到 localhost/login 页面，但它不起作用。看起来它受到保护（verisign），因为页面已完全加载，但其部分内容不可用，因为它显示**错误 500: java.lang.NullPointerException**。我想这是威瑞信握手的一部分，所以在这个过程之后内容就可以使用了。你有什么主意吗？我应该放弃吗？:)

# gdb - GDB MI：跟随父进程进行调试

> ID：15489545
> 
> 赞同：0
> 
> 时间：2013-03-19T00:38:09.070
> 
> 标签：gdb, gdbserver

在使用 GDB MI 指令时，我发现如果程序分叉创建子进程，它只会开始调试最后一个子进程。因此，如果我尝试在父级中调试中断，则此时它不会中断：

我在 stackoverflow.com 中找到了这个有价值的参考资料：

[如何在 gdb 中的 fork() 之后调试子进程？](https://stackoverflow.com/questions/6199270/how-do-i-debug-the-child-process-after-fork-in-gdb)

我的问题是如何设置跟随分叉模式以及通过哪个 GBD MI API？

[http://src.gnu-darwin.org/ports/editors/setedit/work/setedit/libmigdb/doc/reference.html](http://src.gnu-darwin.org/ports/editors/setedit/work/setedit/libmigdb/doc/reference.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:23:32.307

它类似于 123-gdb-set follow-fork parent。

但您也可以查看以下内容：gdb-set detach-on-fork off

# android - 从 listview baseadapter 获取复选框

> ID：15489546
> 
> 赞同：0
> 
> 时间：2013-03-19T00:38:13.447
> 
> 标签：android, listview, checkbox, baseadapter

我在布局中有列表视图

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="100" >

<ListView
        android:id="@+id/listInbox"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:layout_weight="20"
        android:listSelector="@drawable/list_selector" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_weight="80"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/bdelete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:enabled="false"
        android:text="@string/delete_selected" />

</LinearLayout>

</LinearLayout> 
```

这是此列表视图的布局适配器

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_selector"
    android:orientation="horizontal"
    android:padding="5dip" >

    <!-- ListRow Left sied Thumbnail image -->

    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:background="@drawable/image_bg"
        android:padding="3dip" >

        <ImageView
            android:id="@+id/list_image"
            android:layout_width="50dip"
            android:layout_height="50dip" />
    </LinearLayout>

    <!-- Title Of Song -->

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Title"
        android:textColor="#040404"
        android:textSize="15dip"
        android:textStyle="bold"
        android:typeface="sans" />

    <!-- Artist Name -->

    <TextView
        android:id="@+id/artist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/title"
        android:layout_marginTop="1dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:gravity="left"
        android:text="Sender"
        android:textColor="#343434"
        android:textSize="15sp" />

    <!-- Rightend Duration -->

    <!-- Rightend Arrow -->

    <ImageView
        android:id="@+id/ivArraw"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/url" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/artist"
        android:layout_alignBottom="@+id/artist"
        android:layout_alignRight="@+id/artist" 
        android:visibility="invisible"
        />

</RelativeLayout> 
```

以及适配器在我的活动中定义的内容

```
 lv.setAdapter(new ImageInboxAdapter(inbox.this, bitmap, messageNo, messageTitle, senderId, senderName,selected)); 
```

这是基本适配器代码

```
import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Bitmap;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class ImageNewsAdapter extends BaseAdapter{
    Context context;
    String[] newsNo,title_news;
    Bitmap[] bitmap;
    public ImageNewsAdapter(Context context,String[] newsNo,String[] title_news, Bitmap[] bitmap ) {
        this.context=context;
        this.newsNo=newsNo;
        this.title_news=title_news;
        this.bitmap=bitmap;
        // TODO Auto-generated constructor stub
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return title_news.length;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @SuppressWarnings("deprecation")
    @SuppressLint("NewApi")
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;

        if(convertView==null){

            gridView=new View(context);

            gridView=inflater.inflate(R.layout.custom_news, null);

        }else{
            gridView = (View) convertView;
        }

        TextView tv=(TextView)gridView.findViewById(R.id.tvTitle);

        tv.setText(title_news[position]);

        /*RelativeLayout rlImageMain=(RelativeLayout)gridView.findViewById(R.id.RlImageTitle);

        rlImageMain.setBackground(new BitmapDrawable(bitmap[position]));

        */
        ImageView ivMain= (ImageView)gridView.findViewById(R.id.ivMain);

        ivMain.setImageBitmap(bitmap[position]);
        return gridView;
    }

} 
```

我想从复选框中获取选中值并将其返回到我的活动的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:03:41.547

我找到了解决方案

首先制作一个静态布尔变量

```
static Boolean checkboxstate[]; 
```

然后在构造函数中用列表的大小定义它

```
checkboxstate=new Boolean[messageNo.length]; 
```

然后在单击侦听器上设置复选框并填充布尔数组

```
if(checkboxstate[position]==null){
                checkboxstate[position]=false;
            }
            cb.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    if(((CheckBox)v).isChecked()){
                        checkboxstate[position]=true;
                        v.setSelected(true);
                    }else{
                        checkboxstate[position]=false;
                        v.setSelected(false);
                    }
                }
            }); 
```

最后

```
public class ImageInboxAdapter extends BaseAdapter{
    Context context;
    String[] messageNo,messageTitle,senderId,senderName;
    Bitmap[] bitmap;
    Boolean selected;
    static Boolean checkboxstate[];
    int checkedp;
    public ImageInboxAdapter(Context context, Bitmap[] bitmap,String[] messageNo,String[] messageTitle, String[] senderId,String[] senderName,Boolean selected) {
        this.context=context;
        this.bitmap=bitmap;
        this.messageNo=messageNo;
        this.messageTitle=messageTitle;
        this.senderId=senderId;
        this.senderName=senderName;
        this.selected=selected;
        checkboxstate=new Boolean[messageNo.length];

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return messageNo.length;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @SuppressLint("NewApi")
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View gridView;
        if(convertView==null){

            gridView=new View(context);

            gridView=inflater.inflate(R.layout.list_row_message, null);

        }else{
            gridView = (View) convertView;
        }

        TextView tvTitle=(TextView)gridView.findViewById(R.id.title);
        tvTitle.setText(messageTitle[position]);

        TextView tvSender=(TextView)gridView.findViewById(R.id.artist);
        tvSender.setText(senderName[position]);

        CheckBox cb=(CheckBox)gridView.findViewById(R.id.checkBox1);
        ImageView ivArraw=(ImageView)gridView.findViewById(R.id.ivArraw);

        /*RelativeLayout rlImageMain=(RelativeLayout)gridView.findViewById(R.id.RlImageTitle);

        rlImageMain.setBackground(new BitmapDrawable(bitmap[position]));

        */
        ImageView ivMain= (ImageView)gridView.findViewById(R.id.list_image);

        ivMain.setImageBitmap(bitmap[position]);

        if(selected==true){
            cb.setVisibility(CheckBox.VISIBLE);
            ivArraw.setVisibility(ImageView.INVISIBLE);
            if(checkboxstate[position]==null){
                checkboxstate[position]=false;
            }
            cb.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    if(((CheckBox)v).isChecked()){
                        checkboxstate[position]=true;
                        v.setSelected(true);
                    }else{
                        checkboxstate[position]=false;
                        v.setSelected(false);
                    }
                }
            });
        }
        return gridView;
    }

} 
```

# select - ASP.net：如何根据下拉列表选择切换复选框

> ID：15489547
> 
> 赞同：1
> 
> 时间：2013-03-19T00:38:13.610
> 
> 标签：select, drop-down-menu, checkbox, toggle

我有一个下拉列表控件，它填充了数据库中的人名列表。如果用户在列表中选择一个人，我想启用 CheckBox 控件，如果他们选择 BLANK（也是列表中的一个选项），我想禁用复选框。

这是我的代码的一部分...

```
 <tr>
        <td>&nbsp;<asp:Label ID="lblAssignedTo1" runat="server" Text="Assigned To:"></asp:Label></td>
        <td><asp:DropDownList ID="ddlAssignedTo1" runat="server" AppendDataBoundItems="True" DataSourceID="dsAssignedTo" DataTextField="StaffName" DataValueField="StaffID"><asp:ListItem Text="" /></asp:DropDownList></td>
    </tr>
    <tr>
        <td>&nbsp;<asp:Label ID="LabelEmail1" runat="server" Text="Send Email:"></asp:Label>
        </td>
        <td><asp:CheckBox ID="cbEmail1" runat="server" Checked="true" /></td>
    </tr> 
```

该复选框是向从列表中选择的人发送电子邮件的触发器。如果从列表中选择了一个人，我希望它默认复选框为“启用”，以确保我正在使用的程序稍后会发送电子邮件。

我查看了[http://api.jquery.com/change/](http://api.jquery.com/change/)的一个例子，但它没有使用复选框控件，所以不确定它是否可以工作。对不起，我是 jScript 的新手。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:53:46.550

纯 HTML 和 JavaScript 方法看起来像这样：

```
<select id="people">
    <option value="">Select One</option>
    <option value="person1">Person 1</option>
    <option value="person2">Person 2</option>
    <option value="person3">Person 3</option>
</select>
<input type="checkbox" name="sendemail" id="sendemail" disabled="disabled" /> 
```

* * *

```
$(document).ready(function() {
    $('#people').change(function() {
        if($(this).val() == '') {
            $('#sendemail').attr('disabled', 'disabled');   
        }
        else {
            $('#sendemail').removeAttr('disabled');   
        }
    });
}); 
```

[http://jsfiddle.net/AEXpG/](http://jsfiddle.net/AEXpG/)

就您的代码而言，只需获取选择列表和复选框 ClientId，然后将上述 jQuery 代码应用于它们。

# c# - 声音到 3 个主要频率（低、中、高）

> ID：15489548
> 
> 赞同：0
> 
> 时间：2013-03-19T00:38:15.060
> 
> 标签：c#, audio, spectrum

我做了一些研究，但我找不到我到底在寻找什么。目前，我必须通过 com 端口发送通道值。

例如：

*   文件内容`freqs.ini`

    ```
    低=0-xx khz；
    中=xx-yy khz；
    高=yy-zz khz；

    ```

然后我将按百分比获取值，例如

*   期望值

    ```
    lowPercent  = 10;
    midPercent  = 77;
    highPercent = 53; 
    ```

因此，我将能够通过 rs232 发送这些值，我的房间将变成俱乐部`:)`（我正在使用此代码来照亮 LED 灯条）。我找到了一些频谱分析仪项目，但它们都有 9 个通道，即从*low-low*到*high-high*的 3*3 组合。

我知道如何与 com 端口通信，但**如何**获得我之前设置的 3 个频率范围的整数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:37:07.520

我不知道你是否还需要那个，但是......

您想知道如何获得声音的实时频谱分析吗？

1.实现一个队列来获取音频样本的缓冲区

2.将程序计算的缓冲区和适当的[窗口函数](http://en.wikipedia.org/wiki/Window_function)（通常是汉明或汉恩）的乘积作为浮点数组

3.对yelded数组进行FFT：每种语言都可能有算法......为您找到最好的算法，使用它并从每个输出系数中获取平方模块（Real_part^2 + Imaginary_part^2，如果FFT返回系数的代数表示）

1.  对整个频段的系数求和：要知道与频率相关的系数，您只需知道第 k 个系数位于 (SampFrequency/BufferLength)*k Hz .....所以很容易找到频段边界

2.  如果您需要在 [0 , 1] 区间内进行归一化，您只需将 3 个带状带值中的每一个除以 3 个之间的最大值即可

3.  通过 Shift <= BufferLength 的 Shift 值弹出缓冲区队列并重新开始

来自 FFT alg 的系数的数量等于 BufferLength（这是因为离散傅里叶变换定义），因此，当您选择长缓冲区时，频率分辨率会更好，但程序会变慢。在 BufferLength 音频帧之后，光强度不会变化，在 Shift 音频帧之后会出现 buf ......并且高比率 beetwen BufferLength 会给你缓慢的光线变化......所以你必须选择适合你的愿望的参数，记住你刚刚打开和关闭一些灯....让您的 alg 快速和低保真！

最后要做的是从混音器的 eq 旋钮中发现频段……我不记得这些信息是否在混音器手册上

# java - 使用 keyEvents 锁定电脑

> ID：15489549
> 
> 赞同：0
> 
> 时间：2013-03-19T00:38:51.300
> 
> 标签：java

我想在我的 java 应用程序运行时锁定我的电脑，所以我使用 Robot 类来实现两个键的组合：windows logo key + L。但它没有用！这是我的代码：

```
Robot a=new Robot();  
a.keyPress(KeyEvent.VK_WINDOWS);  
a.keyPress(KeyEvent.VK_L); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:01:38.217

You can use this code snippet in your listener class to lock screen in windows machines.

```
Runtime.getRuntime().exec("rundll32.exe user32.dll, LockWorkStation"); 
```

# python - Python：在 Python 中剪切等价物？

> ID：15489550
> 
> 赞同：0
> 
> 时间：2013-03-19T00:39:04.430
> 
> 标签：python, bash

我想通过正斜杠解析路径（不是文件名）。下面采用完整路径“文件名”并读取到第 7 个“/”。

**编辑：当我陈述文件名时，我意识到上述内容令人困惑。我的意思是，我需要解析完整路径。例如，我可能需要左边的前 7 个“/”并删除 5 个尾随的“/”。**

Python：

```
"/".join(filename.split("/")[:7]) 
```

重击：

```
some command that prints filename | cut -d'/' -f1-7` 
```

使用切割工具看起来更干净。有没有更好/更有效的方法来用 Python 编写这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:50:15.100

通常我会推荐使用[`os.path`](http://docs.python.org/3/library/os.path.html)模块中的函数来处理路径。我更喜欢让库处理有效路径可能发生的所有边缘情况。

正如您在评论中指出的那样，[`os.path.split()`](http://docs.python.org/3/library/os.path.html#os.path.split)仅拆分最后一个路径元素。要使用它，可以写：

```
l = []
while True:
    head, tail = os.path.split(filename)
    l.insert(0, tail)
    if head == "/":
        l.insert(0, "")
        break
    filename = head
"/".join(l[:7]) 
```

虽然更冗长，但这将正确地规范化重复斜线等伪影。

另一方面，您的使用`string.split()`匹配`cut(1)`.

* * *

示例测试用例：

```
$ echo '/a/b/c/d/e/f/g/h' | cut -d'/' -f1-7 
/a/b/c/d/e/f

$ echo '/a/b/c/d/e/f/g/h/' | cut -d'/' -f1-7 
/a/b/c/d/e/f

$ echo '/a//b///c/d/e/f/g/h' | cut -d'/' -f1-7
/a//b///c 
```

* * *

```
# Tests and comparison to string.split()

import os.path

def cut_path(filename):
    l = []
    while True:
        head, tail = os.path.split(filename)
        l.insert(0, tail)
        if head == "/":
            l.insert(0, "")
            break
        filename = head
    return "/".join(l[:7])

def cut_string(filename):
    return "/".join( filename.split("/")[:7] )

def test(filename):
    print("input:", filename)
    print("string.split:", cut_string(filename))
    print("os.path.split:", cut_path(filename))
    print()

test("/a/b/c/d/e/f/g/h")
test("/a/b/c/d/e/f/g/h/")
test("/a//b///c/d/e/f/g/h")

# input: /a/b/c/d/e/f/g/h
# string.split: /a/b/c/d/e/f
# os.path.split: /a/b/c/d/e/f
#
# input: /a/b/c/d/e/f/g/h/
# string.split: /a/b/c/d/e/f
# os.path.split: /a/b/c/d/e/f
#
# input: /a//b///c/d/e/f/g/h
# string.split: /a//b///c
# os.path.split: /a/b/c/d/e/f 
```

# python - 分发依赖于外部模块的 python 脚本

> ID：15489551
> 
> 赞同：0
> 
> 时间：2013-03-19T00:39:12.187
> 
> 标签：python, deployment, module

是否有任何简单的解决方案可以确保我的 Python 脚本的用户在确保他们具有可导入的相同模块时遇到最小的麻烦？

例如，如果我的脚本依赖于 Flask，我可以做些什么来简化其他用户获取 Flask？

# python - Fabric 无法在函数中导入模块

> ID：15489553
> 
> 赞同：3
> 
> 时间：2013-03-19T00:39:17.517
> 
> 标签：python, import, module, fabric

这是我的织物脚本的摘录

```
def create_php_site(name):
    """
    Creates a new php installation
    """

    from resource.php.git import gitignore
    from resource.php.nginx import nginx 
```

当我运行它时，我收到错误“ImportError：没有名为 php.git 的模块”

但是如果我将“from resource.php.git import gitignore”移到函数之外，它就可以工作。有任何想法吗？resource.php.git 的每一层都有`__init__.py`

在resource/php/中有git.py：

```
gitignore = """.DS_Store
._.DS_Store
""" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:54:00.000

您遇到了命名空间冲突。

您*无法*命名您的目录`resource`，因为有一个名为`resource`- [http://docs.python.org/2/library/resource.html的标准 python 模块](http://docs.python.org/2/library/resource.html)

因此，当您宣布`from resource...`所有地狱都破裂时。Python 找不到`php.git`，因为在标准的`resource`Python 模块中，确实没有这样的功能。

我创建了一个类似的示例，但将`resource`目录重命名为`myresource`. 执行导入然后完美工作。像这样：-

```
>>> from myresource.php.git import gitignore
>>> gitignore
'my ignore strings' 
```

**重要的**

还请确保您的目录`__init__.py`中有一个文件`myresource`。

# regex - 用于模式搜索的 DFA 是什么？

> ID：15489559
> 
> 赞同：0
> 
> 时间：2013-03-19T00:39:40.000
> 
> 标签：regex, pattern-matching, finite-automata, dfa

例如，正则表达式`go*d`是一个模式将匹配字符串，如`gd`, `god`, `good`...

你可以想象它的 DFA 就像一个三态机。

当它用于模式搜索时，例如给定句子`xxxxgodxxxxgoodxxx`，DFA`go*d`似乎不起作用。`x`在这个三态 DFA 中，偶数字符是未定义的。

我们可以想象一个带有额外“重置”状态的 4 状态 DFA 可以在这里工作。也就是说，当遇到未定义的字符时，进入这个“重置”状态。

问题是模式搜索工具如何使用正则表达式实现搜索目的`go*d`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:12:43.460

给定简单的三态匹配器

```
|start|---/g/---+->|S1|-->-+---/d/--->|accept|
                |          |
                +--<-/o/-<-+ 
```

您不需要重置状态，而是需要在开始状态上标记为`[^g]`. 严格遵循 dfa 定义，您需要`|Σ|-1`每个转换都标有一个字母字符，而不是`g`. 同样，从标记`S1`到`start`标记`[^g]`以及从标记`S1`到自身的转换`g`保证在遇到模式可能实例化的前缀后正确“重置”。类似地增强`accept`状态，您将捕获所有非重叠模式实例化（它们都是此特定模式的所有实例化。

当然，这很快变得比这个玩具示例复杂得多，这就是为什么通常使用标准的 regex->nfa->dfa 构造。

另一种策略是在没有增强的情况下使用您的原始 dfa，并在您每次离开该`start`州时生成一个子进程。子进程应用与其父进程相同的 dfa，将其应用于以使转换离开起始状态的字符开头的给定句子。

# android - @android:id/* 和 @+id/* 之间的区别

> ID：15489561
> 
> 赞同：1
> 
> 时间：2013-03-19T00:39:52.707
> 
> 标签：android, xml, android-layout

今天阅读教程，我看到了 XML 布局，并看到一些元素的 id 像

```
android:id="@android:id/element_id" 
```

其他人有规律`android:id`

```
android:id="@+id/element_id" 
```

这两条线有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:45:30.093

带有“+”的那个将强制编译器在您的 R.java 中创建该元素。在第一次创建对该 id 的引用时使用 +。在引用它的其他元素中，您不需要“+”，因为它在 R.java 中的静态条目已经存在。在这里可以找到对同一问题的更雄辩的解释：[android 中@id/ 和@+id/ 之间的区别是什么？](https://stackoverflow.com/questions/5731414/what-is-the-difference-betwenn-id-and-id-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:41:04.403

第一个是使用由 Android 框架定义的 ID（因此是`android:`前缀）。

第二个是声明一个新 ID 以在您的应用程序中使用。

# mysql - mysql left join 产生的结果比预期的要少

> ID：15489564
> 
> 赞同：0
> 
> 时间：2013-03-19T00:40:26.807
> 
> 标签：mysql, left-join

已经有许多[左连接](https://stackoverflow.com/questions/7680078/mysql-left-join-not-producing-expected-results)问题，但我仍然不能完全解决这个问题。WHERE 条件看起来不适合移动。

问题是应该返回 4 行，但只有 1 行。

在检查左连接条件时，每个左连接返回 1 行，这对于表中的记录数是正确的，但是下面的查询返回 1 记录而不是 4，但我看不到如何返回 4 ， 然而。

**查询如下：（**给出 1 个结果而不是 4 个；预期为 4 个）

```
SELECT 
 list.uid,
 list.business_uid,
 list.creator_name,
 business.company_name,
 list_alias.uid AS list_alias_uid,
 list_alias.alias AS list_alias,
 list_member.uid AS list_member_uid,
 mailbox.full_name AS list_member_name,
 mailbox.email_address AS list_member_email_address
FROM
 mailbox,
 business,
 list
LEFT JOIN
 list_alias ON list_alias.list_uid=list.uid
LEFT JOIN
 list_member ON list_member.list_uid=list.uid
WHERE
 list.business_uid='1'
 AND list.business_uid=business.uid
 AND mailbox.uid=list_member.mailbox_uid
ORDER BY
 list.full_name ASC 
```

**数据：**

*业务 UID 1 有 4 个列表*

`SELECT * FROM list WHERE business_uid=1`-- 给出 4 个结果

`SELECT * FROM list_alias WHERE list_uid IN (SELECT uid FROM list WHERE business_uid=1)`-- 给出 1 个结果

`SELECT * FROM list_member WHERE list_uid IN (SELECT uid FROM list WHERE business_uid=1)`-- 给出 1 个结果

欢迎任何关于我可以检查的内容的指示。

**表样本数据：**

列表：

```
uid | business_uid | creator_name | full_name
--------------------------------------------------
 1          1         List Maker   Subscribe to W
 2          1         List Maker   Subscribe to X
 3          1         List Maker   Subscribe to Y
 4          1         List Maker   Subscribe to Z 
```

商业：

```
uid | company_name
-------------------
 1    List Company 
```

列表别名：

```
uid | list_uid | alias
----------------------------------------
 1       1       subscriber@list-url.com 
```

列表成员：

```
uid | list_uid | mailbox_uid
------------------------------------
 1       1       1 
```

邮箱：

```
uid | full_name | email_address
-------------------------------
 1     I am He    me@me.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:03:46.387

尝试使用单一连接方法，就像这样。

```
SELECT list.uid,
    list.business_uid,
    list.creator_name,
    b.company_name,
    la.uid AS list_alias_uid,
    la.alias AS list_alias,
    lm.uid AS list_member_uid,
    m.full_name AS list_member_name,
    m.email_address AS list_member_email_address
FROM list LEFT JOIN list_member lm ON lm.list_uid=list.uid
    LEFT JOIN mailbox m ON m.uid=lm.mailbox_uid
    LEFT JOIN business b ON list.business_uid=b.uid
    LEFT JOIN list_alias la ON la.list_uid=list.uid
WHERE list.business_uid=1
ORDER BY list.full_name ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:47:34.017

问题：'list' 表中的 'uid' 的值是什么？因为“uid”与“business_uid”不同。我的意思是 ...

如果“列表”表有这个......

'uid' 'business_uid' 1 1 2 1 3 1 4 1

那么这就是问题所在。您返回的是相同的 'busines_uid' 但不同的 'uid' 这意味着它只会匹配第一条记录。

# jquery - 多个独立div中未定义的jquery变量

> ID：15489565
> 
> 赞同：0
> 
> 时间：2013-03-19T00:40:35.890
> 
> 标签：jquery, jquery-mobile

我有这个脚本，它从输入字段中获取值，然后将其插入到链接的属性（href）中。由于某种原因，该值被列为未定义。

这是 jQuery

```
$(".page_link").click(function() {
                 var page_id = $(this).find(".page_id_value").val();
                 $(location).attr('href',"page_detail.php?page="+page_id);

            }); 
```

这是HTML

```
<a class="page_link" onClick="window.location.href='page_detail.php?page=164';">
     <!--<input type="hidden" class="page_id_value" value="145" />-->
</a>

<a class="page_link" onClick="window.location.href='page_detail.php?page=165';">
     <!--<input type="hidden" class="page_id_value" value="146" />-->
</a>

<a class="page_link" onClick="window.location.href='page_detail.php?page=166';">
     <!--<input type="hidden" class="page_id_value" value="147" />-->
</a> 
```

编辑：实现我的目标的最佳方法是使用 window.location.href 而不是使用 jquery 来更改页面。我正在使用输入字段来获取页眉中页面变量的值。更好的方法是只使用 window.location.href。谢谢您的帮助！上面的 HTML 已更正，而 jQuery 是不正确的方法。该网页在 jQuery Mobile 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:46:08.770

您当前代码的问题[`.attr()`](http://api.jquery.com/attr/)是用于从 html 元素获取*属性*。它不会从 javascript 对象获取或更改*属性*，这就是`location`.. javascript 对象。您想要使用它来更改该属性的是[`.prop()`](http://api.jquery.com/prop/).

[固定示例](http://jsfiddle.net/K38xY/1/)

# python - 一个类的所有实例都具有与 Python 3.2 中的属性相同的 dict

> ID：15489567
> 
> 赞同：0
> 
> 时间：2013-03-19T00:40:40.073
> 
> 标签：python, dictionary, python-3.x, instance

我正在用 Python 编写一个空间交易游戏，我决定需要将地图分成更小的块，以减少在任何给定时间在屏幕上绘制时需要考虑的对象数量。

这是通过使用 Sector 对象来处理的，该对象定义如下：

```
class Sector:
   x=0     #Position of the sector. The galactic (absolute) position of any object is its in-sector position
   y=0     #plus the galactic position offset times the size of a sector. 
   stardict=dict() 
```

然后，生成器代码用 75 颗星填充每个扇区（目前为 100 个），并保存在 stardict 中。

```
thesector=Sector()

size=size/2

#Generate stars
for t in range(stars):
    #name="Star "+str(t)
    name=generate_name().capitalize()
    thesector.stardict[name]=Star( name, (random.randint(-size,size), random.randint(-size,size)), (random.randint(0,255), random.randint(0,255), random.randint(0,255)), random.randint(3,7))

    if math.floor((t/stars)*100)==(t/stars)*100: print("Generating stars: "+str((t/stars)*100)+"% done.") 
```

但是，在尝试实际运行程序时会出现一些奇怪的错误，使用调试器打开它会显示原因：每个扇区的 stardict 属性是相同的，它们都包含完全相同的星号（不重复，它们具有相同的内存地址） . 据我所知，每个 Sector.stardict 实际上都引用了同一个 dict 对象。

我不知道为什么会这样。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:41:30.813

它们指的是同一个对象。这是一个非常常见的问题。如果您希望他们每个人都有自己的`dict`，您需要在`__init__`方法中创建它。

```
class Sector:
   x = 0     #Position of the sector. The galactic (absolute) position of any object is its in-sector position
   y = 0     #plus the galactic position offset times the size of a sector. 
   def __init__(self):
       self.stardict = dict() 
```

正如您当前的代码所示，当您尝试访问`stardict`via时`self.stardict`，python 首先`stardict`在*instance*上查找，但是当它在那里找不到`stardict`属性时，它会在*class*上查找。它`stardict`在类上找到，所以它使用它。但是，这意味着所有实例都找到相同的`stardict`（因为它们都是同一类的所有实例）——更新其中一个`stardict`和所有其他实例都会知道（比光速还快！）*。

*请注意，这不会违反任何物理定律。由于它们是同一个对象，因此信息传播没有距离......

# regex - 正则表达式：在冒号之前和之后分隔单词

> ID：15489568
> 
> 赞同：0
> 
> 时间：2013-03-19T00:40:40.980
> 
> 标签：regex, unix, flex-lexer

在这里的行中：

`Category Shoes brand:char[30];cost:float;years:int`

我正在尝试编写两个单独的正则表达式：一个用于分隔将出现在冒号之前的标签，另一个用于将冒号之后的表达式直到下一个分号或行尾。

到目前为止，我想出了

a.) `[^:]+`对于第一种情况

b.)`[\:...\;]`对于第二种情况

我的 Flex 文件内容如下：

```
%%
[^:]+     { printf("\nLabel: %s\n",yytext); }
[\:...\;] { printf("\nType: %s\n",yytext); }
%% 
```

但是，输出如下：

```
Label: char
Category Shoes brand

Type: :

Label: char[30];cost

Type: :

Label: float;years

Type: : 
```

关于我将如何解决这个问题的任何输入都会很棒。

编辑：

预期输出：

```
 Label: brand

    Type: char[30]

    Label: cost

    Type: float

    Label: years

    Type: Float 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:42:54.090

```
%%

[a-zA-Z0-9]+:   { printf("Label: <<%s>>\n", yytext); }
[a-zA-Z0-9]+    { printf("Word:  <<%s>>\n", yytext); }
[^:\;]+\;       { printf("Type:  <<%s>>\n", yytext); }
.               { printf("Skip:  <<%s>>\n", yytext); }

%% 
```

示例输出（用于您的示例输入）：

```
Word:  <<Category>>
Skip:  << >>
Word:  <<Shoes>>
Skip:  << >>
Label: <<brand:>>
Type:  <<char[30];>>
Label: <<cost:>>
Type:  <<float;>>
Label: <<years:>>
Word:  <<int>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:00:44.700

查看[flex 手册](http://westes.github.io/flex/manual/Patterns.html#Patterns)以更好地理解 flex 模式。我相信下面的代码可以满足您的预期。（未经测试）

```
%x INTYPE
h
[a-z]*`:` { printf("\nLabel: %s\n",yytext); BEGIN(INTYPE); }

<INTYPE>{
    ; { BEGIN(INITIAL); }
    [a-z"[""]"0-9]* {printf("\ntype: %s\n",yytext); } 
} 
```

# java - 带有正则表达式分隔符的 Java 扫描仪

> ID：15489570
> 
> 赞同：2
> 
> 时间：2013-03-19T00:40:44.400
> 
> 标签：java, java.util.scanner

为什么下面的代码返回false？

```
Scanner sc = new Scanner("-v ");
sc.useDelimiter("-[a-zA-Z]\\s+");
System.out.println(sc.hasNext()); 
```

奇怪的是`-[a-zA-Z]//s+`将返回 true。

我也无法理解为什么这会返回 true：

```
Scanner sc = new Scanner(" -v");
sc.useDelimiter("-[a-zA-Z]\\s+");
System.out.println(sc.hasNext()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T00:46:57.547

扫描仪用于将字符串分解为标记。分隔符是标记之间的分隔**符**。分隔符是扫描仪**不**匹配的；他们被丢弃了。您告诉扫描仪这`-[a-zA-Z]\\s+`是一个分隔符，并且由于`-v`匹配该正则表达式，它会跳过它。

如果您正在寻找与正则表达式匹配的字符串，请使用[`String.matches()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#matches%28java.lang.String%29).

如果您的目标确实是将字符串拆分为标记，那么您也可以考虑[`String.split()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)使用 ，这有时更方便使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:26:19.147

谢谢约翰库格曼，我认为你是对的。

Scanner 可以使用自定义分隔符将输入拆分为标记。默认分隔符是空格。

当 delimiter 不匹配任何输入时，它会将所有输入作为一个标记：

```
 Scanner sc = new Scanner("-v");
    sc.useDelimiter( "-[a-zA-Z]\\s+");
     if(sc.hasNext())
          System. out.println(sc.next()); 
```

在上面的代码中，分隔符实际上没有得到任何匹配，所有输入的“-v”都将是单个标记。 **hasNext() 表示有下一个令牌**。

```
 Scanner sc = new Scanner( "-v ");
    sc.useDelimiter( "-[a-zA-Z]\\s+");
     if(sc.hasNext())
          System. out.println(sc.next()); 
```

这将匹配分隔符，并且拆分以 0 标记结束，因此 hasNext() 为假。

# android - 关闭 UI 线程运行 SurfaceView

> ID：15489571
> 
> 赞同：1
> 
> 时间：2013-03-19T00:40:56.077
> 
> 标签：android, android-asynctask, surfaceview, ui-thread

我的 surfraceview 是我的大部分应用程序所在的位置，我想减少它的滞后，因此我被告知将其从 UI 线程中移除。是否可以在 AsyncTask 中运行 SurfaceView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:37:02.333

虽然可以从 AsyncTask 绘制到 SurfaceView 中，但不建议这样做。AsyncTasks 可以在串行队列中运行，因此您可能会阻止其他任务。相反，只需使用线程。SDK 包含一个名为 LunarLander 的示例应用程序，它展示了如何执行此操作。

# r - 覆盖光栅包 R 中的许多 ASCII 图层

> ID：15489575
> 
> 赞同：1
> 
> 时间：2013-03-19T00:41:13.490
> 
> 标签：r, stack, overlay, raster

我有 120 个物种分布图作为 .asc 文件，我使用 r 包“raster”堆叠这些文件。我想添加所有这些图层以生成大空间范围的丰富度地图。我曾尝试使用覆盖函数将所有 asc 文件简单地汇总到一个地图中，但我出错了。有没有人对如何纠正这个问题有任何建议。提前致谢！

```
SDM.Stack<-stack (files)

#Overlay Function 
SDM.Overlay.Map1<-overlay (SDM.Stack, fun=function(x,y){return(x+y)}, unstack=FALSE)

#Error in .overlayList(x, fun = fun, filename = filename, ...) : 
  cannot use this formula, probably because it is not vectorized 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:46:49.413

如果您只是为每个单元格添加跨图层的值。

```
calc(SDM.Stack, sum) 
```

# ios - 移动覆盖 Google Maps iOS SDK

> ID：15489576
> 
> 赞同：0
> 
> 时间：2013-03-19T00:41:17.423
> 
> 标签：ios, objective-c, maps, overlay, google-maps-sdk-ios

我基本上是在尝试随着时间的推移沿着路径移动叠加层。这就是我现在的做法：

想象一下，这一切都在一个 NSTimer 中，每次都有新的位置值。

```
circle.position =  (some moved position)

[overlay remove];
overlay = [smallMap addGroundOverlayWithOptions:circle]; 
```

它基本上可以工作，但有时会引入一些闪烁，这是有道理的，因为正在删除一个叠加层并添加一个新叠加层。是否有一种功能可以实际更改叠加层的位置，而无需删除旧叠加层并添加新叠加层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:23:19.380

在[此页面](https://developers.google.com/maps/documentation/ios/overlays)的底部它说：

> 如果您希望在将叠加层添加到地图后对其进行修改，请确保在添加叠加层时将其分配给 id 对象。

那么您能否保存 的返回值`addGroundOverlayWithOptions`，然后`position`稍后更新其属性，而不是再次删除和添加叠加层？

我还没有尝试过，但它似乎应该可以工作。

# ruby - `each` 方法返回什么？

> ID：15489580
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:41:39.627
> 
> 标签：ruby

当我打电话

```
@data.each do |d|
  some code here
end 
```

该`each`方法返回什么？对象数组？或者更一般地说，`do`... `end`block 需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:45:31.593

它遍历可枚举对象的成员。因此，如果`@data`是一个数组，它将一次返回一个数组的元素作为`d`. 确切的行为取决于对象的类型。查看[文档](http://www.ruby-doc.org/core-1.9.3/Enumerator.html#method-i-each)

`Books.all`返回一个对象，虽然它不是一个数组，但在这种情况下表现得像一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:00:58.580

*   `each` returns the receiver, in this case `@data`.
*   The `do` ... `end` is a block.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:42:39.747

该方法将为数据中的每个值`each`运行一次块（使用方法）。`yield`这称为迭代器。对于数组，它将遍历数组中的所有值，对于散列，它将每对 (key,value) 运行一次。您可以为自己的类定义自己的迭代器。

的返回值`each`取决于它被调用的对象。在数组上调用时，它将返回数组。

在您的情况下，该方法`each`将为每个值执行一次块，并将每个值作为参数发送到块。

例如-

```
a = [1,2,3]
a.each do |n|
    p n
end 
```

和

```
p a[0]
p a[1]
p a[2] 
```

# javascript - javascript中的“实现依赖”是什么？

> ID：15489582
> 
> 赞同：2
> 
> 时间：2013-03-19T00:41:51.490
> 
> 标签：javascript

我认为“实现依赖”是实现（在 javascript 中）依赖于某些东西。你能告诉我什么是依赖？

非常感谢你。

ps 如果我的英文写得太差了，我很抱歉。

**更新**我的问题是关于属性枚举顺序。我忘了告诉你。对不起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:44:57.823

JavaScript（或者更准确地说是 ECMAScript）是由一个标准定义的。诸如 V8、JavaScriptCore 和 JScript 之类的实现……嗯，实现了该标准。如果某些功能依赖于实现，那么它可能仅在该实现中以相同的方式工作，而在其他实现中以不同的方式工作。

# wordpress - 适用于 WordPress 的 Aptana Studio Code Assist 不完整

> ID：15489589
> 
> 赞同：1
> 
> 时间：2013-03-19T00:42:36.327
> 
> 标签：wordpress, autocomplete, aptana, aptana3, code-assist

我为 Aptana Studio 安装了[WordPress 包/卢布](https://github.com/aptana/wordpress.ruble)，但它只为 WordPress 功能的子集提供代码帮助。我想要所有 WordPress 核心功能（或尽可能多的功能）的代码帮助。我的项目以 PHP 为本质，并通过 SFTP 连接到远程 WordPress 安装。

在捆绑包（一年多没有更新）没有提供我想要的一切之后，我尝试使用 WordPress 的本地副本作为外部库，然后将其作为外部目录添加到 PHP Buildpath。两者都没有添加比提供的捆绑包更多的功能。这些操作是在[Aptana Studio 支持](https://aptanastudio.tenderapp.com/discussions/questions/969-can-aptana-3-do-code-assist-for-wordpress-projects)和[WordPress Answers](https://wordpress.stackexchange.com/questions/27063/aptana-wordpress-code-hinting)中提出的。

我做错了什么，还是我正在寻找的代码帮助级别不可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T18:20:25.753

确实，WordPress 捆绑包只提供了一些有限的自动完成支持。尽管将另一个 WordPress 安装的本地副本作为 PHP 外部库包含在最新的 Aptana Studio 版本（3.4.0）中似乎可以解决这个问题，正如您已经提到已经尝试过的那样，并且正如[在此](https://wiki.appcelerator.org/display/tis/PHP+Development#PHPDevelopment-AttachingPHPResources)链接中所建议的那样你指出。

这是我采取的所有具体步骤，因此您可以检查您所遵循的程序是否有不同之处。

*   打开“首选项”菜单，转到“窗口”>“首选项”
*   选择 Aptana Studio > 编辑器 > PHP > 库
*   点击“新建用户库”
*   添加另一个本地 WordPress 安装的路径（与当前项目中的 WordPress 文件不同）选择新解压的 WordPress 下载的根文件夹（例如：C:\wordpress-3.5.1\wordpress）
*   确保在用户库列表中选择了新库（在库图标旁边用复选标记标记它。）
*   应用更改并按 OK
*   确保您的项目是 PHP 项目。右键单击项目文件夹，选择 Properties > Project Natures 并标记 PHP 复选框。

现在，在 PHP 代码中，我得到了所有核心 WordPress 函数的自动补全建议——我什至可以通过在函数名称上按 F3 来检查它们的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T15:04:23.537

我按照 E. Serrano 的步骤进行操作，效果很好。愚蠢的是，如果您想要自动完成，例如，`add_action('wp_print_footer_scripts', 'scripts.js', 1);` 在您输入引号的那一刻，自动完成就会丢失......如果您尝试`add_action( wp_`获得所有 WP 命令。希望能帮助到你...

# c++ - C++ 如何将库添加到 minGW

> ID：15489590
> 
> 赞同：0
> 
> 时间：2013-03-19T00:42:44.383
> 
> 标签：c++, compiler-errors, mingw

我真的很困惑为什么我的程序不能与我的 opengl 库一起工作。在我的 minGW 文件夹中，我的 libopengl32.a 文件位于 lib 文件夹中，而我的 .h 文件位于 include 文件夹中。除了我的编译器找不到库之外，一切似乎都解决了。在命令提示符中，我输入：

```
g++ main.cpp -libopengl32 
```

这不起作用，编译器说它找不到-libopengl32。我认为它会起作用，因为我将库放在 lib 文件夹中，将 .h 文件放在包含文件夹中。为什么它不起作用？怎么找不到文件？谢谢。PS我有一个Windows操作系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:02:12.240

change to `g++ main.cpp -lopengl32`

# ios - 比较 Objective-C 中的两个参数

> ID：15489591
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:42:48.287
> 
> 标签：ios, objective-c, cocoa-touch

在 Objective-C 中，我想将 plist 与我正在使用的 API 的结果进行比较。我正在使用一个返回食谱成分的 API。我将这些结果放入一个表格视图中，向用户显示配方名称和配方成分。当用户选择他们选择的任何食谱时，我希望出现一个 UIAlert 来告诉用户天气是否他们拥有该特定食谱的所有成分。API 中的成分将与 Plist 进行比较。希望这足够清楚，如果不只是问，我会尝试更清楚地解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:36:17.273

如果我理解得很好，用户冰箱里的成分是从 plist 文件中提取的。

阅读 plist 并将其存储在 NSDictionary 中真的很容易。然后您可以与程序返回的成分进行比较。

如果 plist 是由您的程序生成的，那么您可以比较程序中对您有意义的任何内容：例如对象“Ingredient”的索引。如果不是，那么您的比较可能很弱，具体取决于您选择比较的内容。

对于配方中的每种成分，您可以检查属于该用户的相同成分的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:36:18.817

您想知道是否所有必需的成分都在橱柜中。您只需要一个是或否的结果。所以你从你的数据中制作了两个 NSArrays - requiredIngredients 和 foodCupboard。

```
- (BOOL) weHaveIngredients:(NSArray*)requiredIngredients inCupboard:(NSArray*)foodCupboard
{
 BOOL result = YES;
  For (id ingredient in requiredIngredients) {
      if !(foodCupboard containsObject:ingredient) {
         result = NO;
         break;
       }
  }
  return result;
} 
```

使用 NSSet（唯一对象的集合）可以更好地完成此操作。您可以轻松地从 NSArray 创建 NSSet：

```
NSSet* set = [NSSet setWithArray:(NSArray*)array]; 
```

然后你可以这样做：

```
- (BOOL) weHaveIngredients:(NSSet*)requiredIngredients inCupboard:(NSSet*)foodCupboard
{
  BOOL result = YES;
  if (!requiredIngredients isSubsetOfSet:foodCupboard)
       result = NO;
  return result;
} 
```

你可以使用它像

```
NSString* alertmessage = "Sorry we can't make a cake, not enough ingredients"
if ([self weHaveIngredients:recipeIngredients inCupboard:foodCupboard])
    alertmessage = "Start baking"

UIAlertView *alert =
    [[UIAlertView alloc] initWithTitle: @"Ingredients checked"
                         message: alertMessage
                         delegate: self
                         cancelButtonTitle: @"OK"
                         otherButtonTitles: nil];
[alert show]; 
```

您的另一个问题是将数据转换为两个数组的形式。当您将其放入 tableView 时，您必须已经从 API 中获取了一个数组。我同样假设您知道如何从（存储的？）plist 中获取数组，因为您必须以某种方式制作了 plist。如果您有特定的数据转换问题，我建议您提出一个更具体的问题。

这些都没有解决您是否有*足够*的每种成分的问题——要正确地做到这一点，您将需要某种数据库。

# https - HSTS 与仅带有安全 cookie 的 https

> ID：15489596
> 
> 赞同：3
> 
> 时间：2013-03-19T00:43:19.150
> 
> 标签：https, security, session-cookies

如果我的网站使用安全会话 cookie 在 https 上提供服务并将对 http url 的任何尝试重定向到 https，它是否足够好保护？

如果不设置 HSTS 标头，我会在此设置中暴露哪些安全漏洞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:06:02.263

此策略通过使攻击者难以欺骗您的用户使用 SSL 以外的其他方式访问您的站点，从而防止被动窃听。它还可能确保用户存储的任何书签都指向 https URL，这很好。但是，HSTS 在中间人攻击的情况下仍然具有优势。

HSTS 试图解决的问题的核心是浏览器不知道给定站点是否应该使用 SSL。而且大多数用户不会先明确尝试 SSL；如果他们输入一个 URL，他们通常会首先访问非 SSL http 站点，而且通常他们只是跟随链接。如果攻击者可以诱使您的用户通过 http URL 访问您的站点，并且可以坐在用户流量的中间（例如，通过成为他们的无线 AP），那么该攻击者可以发起中间人攻击通过将用户的流量代理到您的站点并在没有 SSL 的情况下将站点呈现给用户来针对您的站点（这是一种降级攻击）。由于用户看不到 SSL，他们的浏览器不会识别出攻击者没有您网站的有效证书，并且他们 不直接连接到您的网站。（更复杂的方法是拦截 SSL 流量并为您的站点提供自签名或其他无效证书，但这通常会导致浏览器警告。）

在这种情况下，将非 SSL 用户重定向到 SSL 或在 cookie 上设置安全标志实际上对您没有多大帮助。中间人攻击者将连接到您的 SSL 站点（并将用户的操作代理到该站点），并且在将它们传递给用户时从您的 cookie 中删除安全标志。

当然，攻击者也可以删除 HSTS 标头。然而，HSTS 协议的重点在于，如果用户过去曾成功直接访问过您的网站，他们的浏览器会记住您的网站发送了 HSTS。如果他们后来连接到您的站点并发现它没有使用 SSL 或浏览器无法验证证书，浏览器将抛出错误并拒绝继续。如果浏览器支持 HSTS 并将您的站点记录为需要 SSL，这将防止攻击者将您的站点降级为非 SSL。

Wikipedia 对此进行了[相当好的讨论](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)，我认为这比[RFC](https://www.rfc-editor.org/rfc/rfc6797)中的讨论更清晰。

# c++ - Visual C 致命错误 LNK1120：1 个未解决的外部

> ID：15489597
> 
> 赞同：4
> 
> 时间：2013-03-19T00:43:39.880
> 
> 标签：c++

不知道出了什么问题，所有帮助将不胜感激。我在想我的文件源有问题，但不确定。

```
1>------ Build started: Project: Assignment 08 ADL, Configuration: Debug Win32 ------
1>Build started 3/18/2013 8:37:38 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\Assignment 08 ADL.unsuccessfulbuild".
1>ClCompile:
1>  Assignment 08 ADL.cpp
1>  Generating Code...
1>  Skipping... (no relevant changes detected)
1>  student.cpp
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>Assignment 08 ADL.obj : error LNK2019: unresolved external symbol "long __cdecl    decimals(class std::basic_ostream<char,struct std::char_traits<char> > &,int)" (? decimals@@YAJAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@H@Z) referenced in function "void __cdecl display(class student)" (?display@@YAXVstudent@@@Z)
1>J:\CO 127\Assignment 08 ADL\Debug\Assignment 08 ADL.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:24.82 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:50:20.847

您需要查看上面的行`LNK1120`，`LNK2019`错误告诉您出了什么问题。

在您的`void display(class student)`函数内部，您正在调用一个名为的函数，该函数`decimals`未在源代码或库中的任何位置定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-06T09:19:59.193

当我添加 .c 文件而不是 .cpp 时出现了这个问题，所以还要检查文件的名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-12T07:12:01.130

确保外部变量能够在您当前的文件中访问。 **对于测试** 简单的方法是声明同名的局部变量来测试你的逻辑不工作，稍后更改尝试访问外部变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T00:50:03.630

LNK 2019 错误是链接器错误，通常意味着链接器无法使用某些对象。尝试干净地重建项目，然后尝试执行它。

# javascript - 如何从另一台服务器获取文件？

> ID：15489598
> 
> 赞同：0
> 
> 时间：2013-03-19T00:43:49.237
> 
> 标签：javascript, json, xmlhttprequest, tomcat7

我正在学习如何执行 XHR，并将来自 w3school 的代码放在我的网络服务器（tomcat7）中进行尝试。当我将“note.xml”与 html 放在同一个文件中时，我可以使用下面的代码来获取 XML 文件。

```
xmlhttp.open("GET","note.xml",true); 
```

但是，如果我将“note.xml”移动到另一个 webapp 位置，我就不能使用相同的方法。下面的代码也无法获取 XML 文件。

```
xmlhttp.open("GET","http://localhost:8080/anotherWEBapp/note.xml",true); 
```

HTML：

```
<html>
<body>
<h1>W3Schools Internal Note</h1>
<div>
<b>To:</b> <span id="to"></span><br />
<b>From:</b> <span id="from"></span><br />
<b>Message:</b> <span id="message"></span>
</div>
<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","http://localhost:8080/test-app/note.xml",true);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

document.getElementById("to").innerHTML=
xmlDoc.getElementsByTagName("to")[0].childNodes[0].nodeValue;
document.getElementById("from").innerHTML=
xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue;
document.getElementById("message").innerHTML=
xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;
</script>

</body>
</html> 
```

无论如何我只能使用 javascript 来获取 XML 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:52:02.557

不是纯浏览器 JS，不是。

跨域 AJAX 违反[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

另一台服务器需要允许您这样做。一种符合标准的方式是[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。但是您需要控制和修改远程服务器才能完成此任务。

或者，如果您有自己的服务器代码要调整，您可以通过它代理事物。您在同一个域上向类似`/proxy?url=http://example.com/somefile.xml`. 然后，您的服务器代码会在后端获取该文件并呈现它。您不会违反跨源策略，因为该网页与加载它的同一服务器通信，而您的服务器所做的不是它的业务。

或者你可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。但同样，这需要远程主机的合作，它将您想要的内容包装在一个 JS 函数执行中，该函数执行将内容传递到您的页面。

# javascript - mediaelement.js setSrc 方法不起作用

> ID：15489602
> 
> 赞同：2
> 
> 时间：2013-03-19T00:43:59.980
> 
> 标签：javascript, jquery, mediaelement.js

我尝试使用 mediaelement.js ..

```
var player = new MediaElementPlayer('#player',{
 startVolume:0.5,
 alwaysShowControls:true
}); 
```

当“src”是静态的时，它工作得很好。但使用动态 src

```
player.setSrc('link_to_audio'); 
```

浏览器返回错误 - **TypeError: Object # has no method 'setSrc'**

浏览器 - Chromium 23.0.1300.0 (170000) 和 FF 19.0.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-03T10:46:41.177

[文档](https://github.com/mediaelement/mediaelement/blob/master/docs/usage.md#initialize)说你应该像这样初始化它：

```
var player = new MediaElementPlayer('player',{ 
```

而不是这样

```
var player = new MediaElementPlayer('#player',{ 
```

或使用 jQuery ：

```
$('#player").mediaelementplayer({ 
```

# html - 我需要一个 html 表单的时间戳输入。不知道这是否可能，但我才刚刚开始

> ID：15489603
> 
> 赞同：4
> 
> 时间：2013-03-19T00:44:05.490
> 
> 标签：html, input

所以就像我说我不知道​​我是否正确地做任何这些，但我基本上是在自学，我似乎无法找到任何关于有时间戳输入字段的信息。它实际上是用于输入电影的时间戳。

```
<div id="form"><form>
First Name: <input type="text" name="firstname">
Last Name: <input type="text" name="lastname">
Movie Title: <input type="text" name="movietitle">
<p>Is the drink...</p>
<input type="radio" name="drinktype" value="alcoholic">Alcoholic
<input type="radio" name="drinktype" value="soft">Non-alcoholic
<p>What exact time did the Buffalo occur during the movie?</p>
<input type="time" name="timestamp"><br>
<input type="submit" value="Submit">
</form></div> 
```

我没有为此展示任何 CCS 方面的内容，因为我真正想知道如何做的是首先以这种格式 hh:mm:ss 的时间戳输入字段

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:37:51.583

您可以在标签中使用`step`属性：`input`

```
<input type="time" name="timestamp" step="1"> 
```

W3C：[输入：类型=时间](http://www.w3.org/TR/html-markup/input.time.html)

# cakephp - Cake php 模型关系困难，尤其是。有很多通过

> ID：15489604
> 
> 赞同：2
> 
> 时间：2013-03-19T00:44:06.823
> 
> 标签：cakephp, relationship, foreign-key-relationship, has-many-through, jointable

我提前道歉......我是cakephp的完整菜鸟。因此，我很难让我的模型正确关联。更具体地说，我在“hasMany Through”关系中遇到了最大的麻烦。我一直在用头撞墙，翻阅食谱，但没有发现它像我希望的那样清晰。

我目前正在编写一个具有许多复杂关系的网络应用程序。我将从精简版的表格开始。

*   用户：
    *   身份证，姓名
*   团体：
    *   id，名称，department_id
*   部门：
    *   id, name, district_id
*   地区：
    *   身份证，姓名
*   角色
    *   身份证，姓名
    *   请注意，角色就是我所说的访问级别（用户、管理员、超级用户）。
*   groups_users -group_id, user_id
*   部门_用户：
    *   部门 ID、用户 ID、角色 ID

**关系：**

1.  用户 hasAndBelongsToMany 部门
2.  部门 hasAndBelongsToMany User
3.  用户 hasAndBelongsToMany 组
4.  组 hasAndBelongsToMany 用户
5.  部门有很多组
6.  组属于部门
7.  区有多个部门
8.  部门所属区

**现在，这就是我更加困惑的地方。** 由于用户可以在多个部门、多个地区，并且在每个部门中具有不同的角色（例如，DISTRICT A 的 DEPT A 中的部门管理员，以及 DISTRICT B 中的 DEPT B 中的地区管理员），我选择放置用户的级别Departments_users 表中的访问权限。由于我为命名模型存储的不仅仅是外键，即role_id，这似乎是hasMany through 关系的候选者，但cake 的文档也提到了模型关系的keepExisting 选项。

所以我尝试了这个，使用蛋糕网站上的例子。保留所有初始数据表和关系，我添加了一个 DepartmentPosition 模型和控制器，如下所示：

```
user.php
public $hasMany = array('DepartmentPosition');

department.php
public $hasMany = array('DepartmentPosition');

department_position.php
public $belongsTo = array('User','Department'); 
```

我还添加了一个新的数据表：

*   **部门职位：**
    *   id、department_id、user_id、role_id

好的，所以我可能从蛋糕文档中错误地得到的是，当我将用户添加到部门时，我可以包含一个 role_id，如果我执行 saveAll()，这将全部保存在 department_position 数据表中。

我不确定这是否完全正确。写出来后，我现在比以前更困惑。哈哈。我对如何正确设置这些关系感到非常困惑。而且，一旦我这样做了，我觉得我将无法从相关模型中访问数据。我收到大量错误，无法检索很多相关的模型数据。哎呀。就像我说的，我不是最强的蛋糕人。

有什么建议，在我得动脉瘤之前？！哈哈。感谢负载。任何帮助都会有很大帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:42:31.787

如果用户可以在不同的组中具有不同的角色，则需要介于两者之间，HABTM 或 hasManyThrough 表。

在 Cake 2.1 版之前，不可能有与额外列的 HABTM 关系（在 role_id 下方）。[保存时该列会丢失](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model)。如果您将唯一参数设置为keepExisting，则不再是这种情况，但我更喜欢hasManyThrough 关系而不是HABTM。估计是口味问题。

```
User hasMany GroupRole

GroupRole belongsTo User, GroupRole belongsTo Groups, GroupRole belongsTo Role (GroupRole is hasManyThrough table)

Group hasMany GroupRole, Group belongsTo Department

Department hasMany Group, Department belongsTo District

District hasMany Department 
```

![关系图](../Images/36da905d507bef022edc97af086fe233.png)

# css - 摆脱 div 之间的空间 - CSS

> ID：15489607
> 
> 赞同：0
> 
> 时间：2013-03-19T00:44:25.950
> 
> 标签：css, html, whitespace

我有以下 HTML 代码，其中`subnav`div 是标签的集合，这些`div`标签将充当`featuredexhibit`div 中的选项卡。问题是在`featureexhibit`div 的顶部和`subnav`选项卡的底部之间添加了一个空格。

HTML：

```
<div id="subnav">
    <div id="subnavtab"><a href="">Plan Your Visit</a></div>
    <div id="subnavtab"><a href="">Tour the Museum</a></div>
    <div id="subnavtab"><a href="">Program & Events</a></div>
    <div id="subnavtab"><a href="">Membership</a></div>
    <div id="subnavtab"><a href="">Donate</a></div>
</div>
<div id="featuredexhibit">
    Featured Exhibit - this can be a rotating menu of exhibits
</div> 
```

CSS：

```
#subnav { margin-top: 20px; width: 740px; display: inline-block; }
#featuredexhibit { width: 732px; height: 200px; background-color: #A7A9AC; margin: 0; }
#subnavtab { background-color: #A1CD3A; float: left; padding: 10px 10px 10px 10px; margin: 0 5px 0 0; display: inline-block; } 
```

我曾尝试使用 Chrome 开发人员工具来查找问题，但我没有任何运气，或者我不知道要查找什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:51:47.657

您的代码似乎没有任何问题。

你确定没有其他 CSS 有冲突吗？确保您使用的 CSS 标记来自 HTML 中添加的最后一个 CSS。

例如，

```
<link rel="stylesheet" type="text/css" href="css-1.css">
<link rel="stylesheet" type="text/css" href="css-2.css"> 
```

如果“css-2.css”中有公共标签，那么它将覆盖“css-1.css”的任何相似标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:15:48.553

你应该给 subnav 一个浮点数，然后清除 featureexhibit ，然后只有它不能在它们之间节省空间。

```
#subnav{float: left;}
#featuredexhibit{clear: both;} 
```

看这个**[演示](http://jsfiddle.net/Y7PhV/110/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:05:27.900

老实说，我不确定为什么会有空白，但我通过删除`inline-block`并创建一个清晰的两者在 Chrome 中修复了它。

CSS

```
.subnav { margin-top: 20px; width: 740px; }
.featuredexhibit { width: 732px; height: 200px; background-color: #A7A9AC; margin: 0; }
.subnavtab { background-color: #A1CD3A; float: left; padding: 10px 10px 10px 10px; margin: 0 5px 0 0; }
.clear { clear: both; } 
```

HTML

```
<div class="subnav">
    <div class="subnavtab"><a href="">Plan Your Visit</a></div>
    <div class="subnavtab"><a href="">Tour the Museum</a></div>
    <div class="subnavtab"><a href="">Program & Events</a></div>
    <div class="subnavtab"><a href="">Membership</a></div>
    <div class="subnavtab"><a href="">Donate</a></div>
    <div class="clear"></div>
</div>
<div class="featuredexhibit">
    Featured Exhibit - this can be a rotating menu of exhibits
</div> 
```

jsFiddle：http: [//jsfiddle.net/vFFx5/](http://jsfiddle.net/vFFx5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-21T10:15:06.213

我知道这是旧的，但由于我刚刚遇到这个问题，我不妨将未来的访问者指向这篇文章：[https ://css-tricks.com/fighting-the-space-between-inline-block-elements/](https://css-tricks.com/fighting-the-space-between-inline-block-elements/)

问题似乎是一行行内块元素中的新行被视为空白字符。要解决这个问题，请使用浮动块或 flexbox。

# mongodb - 用 MongoDB 中的字符串数组替换嵌入式文档数组

> ID：15489608
> 
> 赞同：0
> 
> 时间：2013-03-19T00:44:27.823
> 
> 标签：mongodb

在我的集合中，我有一个`users`字段作为 User 集合的数组。

所以，它目前看起来像这样：

```
{ "name" : "Untitled", "users" : [  {   "name" : "Ace Ventura",     "datecreated" : "2012-10-05T23:55:56.940Z",     "_id" : "740063fb-79c5-4f7f-96e1-907d6ffb1d16" } ], "datecreated" : "2012-10-05T23:55:56.954Z", "_id" : "e207eaea-89f7-48ae-8ba7-b6aa39db2358" } 
```

我想更新它，使 User 集合的数组成为 User 集合的`_id`属性数组。像这样：

```
{ "name" : "Untitled", "users" : ["740063fb-79c5-4f7f-96e1-907d6ffb1d16" ], "datecreated" : "2012-10-05T23:55:56.954Z", "_id" : "e207eaea-89f7-48ae-8ba7-b6aa39db2358" } 
```

我将如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:41:55.073

好吧，我想通了。

最初，我正在考虑做这样的事情：

```
db.lists.update(
   {},
   {
     $set: {
             users: <oldusers._id>
   },
}); 
```

但是，事实证明，**您不能从`update()`**.

但是，事实证明我们可以使用[forEach()](http://docs.mongodb.org/manual/reference/method/cursor.forEach/)：

```
db.lists.find().forEach(function (list) {

    // Define length to ensure we have an array of users
    var userLength  = (list.users && list.users.length) || 0;

    var (var i = 0; i < userLength; i++) {
        // Ensure the current user object isn't null or undefined
        if(list.users[i])
            list.users[i] = list.users[i]._id
    }

    // Finally, save the list object back.
    db.lists.save(list)
}); 
```

谢谢，+gipset，在[这里](https://stackoverflow.com/questions/3788256/mongodb-updating-documents-using-data-from-the-same-document/3792958#3792958)您的回答。

# jquery - 与 JQuery 共享 AJAX 调用

> ID：15489610
> 
> 赞同：1
> 
> 时间：2013-03-19T00:44:57.763
> 
> 标签：jquery

我有一个输入字段。加载页面时，如果输入已预先填充，则进行 AJAX 调用。否则，请等到输入字段更改后再进行 AJAX 调用。

我的 AJAX 调用相当复杂，所以我希望这两个场景共享相同的功能。

这是我的实现（伪代码）：

```
 function checkInput { $.ajax(... complex logic goes here ...); }

  $(document).ready(function() {
    if (!!$("#input").val()) {
      checkInput();    
    }
  });

  $("#input").change(checkInput()); 
```

问题是，函数 checkInput 被立即调用。

我怎样才能避免这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:45:53.147

传递函数，不要调用它

```
 $("#input").change(checkInput); 
```

当你这样做时，`checkInput()`你正在调用该`checkInput`函数。在 JavaScript 中，函数是第一类对象，您可以像传递任何其他类型一样传递它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:49:20.303

立即调用函数的原因是表达式在到达此处时被评估：

```
$("#input").change(checkInput()); 
```

请注意，`checkInput()`执行回调函数是为了进行评估。另一种方法是这样做：

```
$("#input").change(function(){checkInput();}); 
```

这将允许函数在调用时运行，而不是在第一次作为事件连接时运行。

# python - 计算另一个字符串中多个字符串的出现次数

> ID：15489612
> 
> 赞同：2
> 
> 时间：2013-03-19T00:44:58.463
> 
> 标签：python, count

在 Python 2.7 中，给定这个字符串：

> Spot是一只棕色的狗。斑点有棕色的头发。Spot的头发是棕色的。

在字符串中找到“Spot”、“brown”和“hair”的总和的最佳方法是什么？在示例中，它将返回 8。

我正在寻找类似`string.count("Spot","brown","hair")`但与元组或列表中的“要找到的字符串”一起使用的东西。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T00:50:22.910

这可以满足您的要求，但请注意，它还会计算“hairy”、“brown”等词。

```
>>> s = "Spot is a brown dog. Spot has brown hair. The hair of Spot is brown."
>>> sum(s.count(x) for x in ("Spot", "brown", "hair"))
8 
```

你也可以把它写成`map`

```
>>> sum(map(s.count, ("Spot", "brown", "hair")))
8 
```

更强大的解决方案可能会使用[nltk 包](http://nltk.org/)

```
>>> import nltk  # Natural Language Toolkit
>>> from collections import Counter
>>> sum(x in {"Spot", "brown", "hair"} for x in nltk.wordpunct_tokenize(s))
8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T00:49:15.313

我可能会使用`Counter`：

```
s = 'Spot is a brown dog. Spot has brown hair. The hair of Spot is brown.'
words_we_want = ("Spot","brown","hair")
from collections import Counter
data = Counter(s.split())
print (sum(data[word] for word in words_we_want)) 
```

请注意，这将少计 1，因为`'brown.'`它`'brown'`是单独的 Counter 条目。

一个稍微不太优雅的解决方案不会因标点符号而出错，它使用正则表达式：

```
>>> len(re.findall('Spot|brown|hair','Spot is a brown dog. Spot has brown hair. The hair of Spot is brown.'))
8 
```

您可以简单地从元组创建正则表达式

```
'|'.join(re.escape(x) for x in words_we_want) 
```

这些解决方案的好处在于，与 gnibbler 的解决方案相比，它们具有更好的算法复杂性。当然，在现实世界数据上实际表现更好的仍然需要通过 OP 来衡量（因为 OP 是唯一具有现实世界数据的）

# c# - 如何将 asp.net 会员提供程序添加到 asp.net Web 应用程序？

> ID：15489615
> 
> 赞同：0
> 
> 时间：2013-03-19T00:45:16.617
> 
> 标签：c#, asp.net, .net, wcf, web-services

我正试图弄清楚这一点。我正在使用一个由 asp.net Web 应用程序托管的简单 Web 服务，该 Web 应用程序将用于移动客户端和桌面客户端的身份验证，它还将用于向客户端发送/接收信息。

现在，该服务使用硬编码到服务中的自定义用户名和密码身份验证。不过，我需要某种身份验证。所以我想我可以将 asp.net 成员资格提供程序添加到托管服务的 Web 应用程序中，然后我可以将该数据库用于服务的成员。

这也为我提供了一种管理用户的方法。谁能告诉我这是否可行，如果可行，如何实施？

这是我正在使用的服务：http: [//www.codeproject.com/Articles/96028/WCF-Service-with-custom-username-password-authenti](http://www.codeproject.com/Articles/96028/WCF-Service-with-custom-username-password-authenti)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:59:26.123

这很容易做到。假设您使用的是 Visual Studio，我建议您使用网站管理工具。可以在[http://msdn.microsoft.com/en-us/library/6e9y4s5t(v=vs.100).aspx找到描述添加 ASP.NET 成员资格提供程序的 MSDN 文章](http://msdn.microsoft.com/en-us/library/6e9y4s5t%28v=vs.100%29.aspx)

# c++ - 将 WCHAR 数组作为 LPARAM 发送到 winproc 的正确方法是什么？

> ID：15489616
> 
> 赞同：0
> 
> 时间：2013-03-19T00:45:23.930
> 
> 标签：c++, windows, winapi, dynamic, memory-leaks

所以我遇到了堆问题的损坏，想知道它是否与我如何处理某些数组有关。实际上，在某些时候，我有一些这样的消息发送到我的 WinProc：

```
SendMessage(hwnd, LOG_ADD, NULL, (LPARAM)L"Initializing winsock... "); 
```

LOG_ADD 定义为 104。在 WinProc 内部，当 msg==LOG_ADD 时，会发生以下情况：

```
case LOG_ADD:
            {
                pGame->pMessageLog->PutToLog((WCHAR*)lParam);
                pGame->pD2DResources->OnRender(pGame->pMessageLog); 
```

有 MessageLog::PutToLog(WCHAR[])：

```
void MessageLog::PutToLog(WCHAR txt[])
{
    int strLen=wcslen(txt);
    int logLen=wcslen(logHistory);

    WCHAR* pWCHAR = txt;

    int x=0;

    // Counts the number of '\n' into wString and adds that number to nLogLines
    for(x=0; x<strLen; x++)
    {
        if(pWCHAR[x]=='\n')
            nLogLines++;
    }

    pWCHAR = logHistory;

    x=0;
    while(nLogLines>5)
    {
        if(pWCHAR[x]=='\n')
            nLogLines--;
        x++;
    }

    if(x!=0)
    {
        for(int y=0; y<logLen-x; y++)
        {
            pWCHAR[y]=pWCHAR[y+x];
        }
    }

    wcscat (logHistory, txt);
} 
```

这能解释腐败问题吗？实际上，当我删除所有 SendMessage(hwnd, LOG_ADD...) 行时，当编译器执行“struct hostent* host;”行时，损坏不会在几行后出现。或“如果（（主机=gethostbyname（服务器））==NULL）”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:01:28.033

You asked in a comment:

> is this the proper way of sending a WCHAR array as a LPARAM and sending it to another function to use?

Sure, as long as you know what you pass at the call site and make sure you treat it (cast it) as the type it actually is in the window procedure, this is perfectly fine.

Just make sure you're properly handling any pointers to memory that might be invalid at the time you access it. For instance if you **post** a message instead of **sending** it and pass a pointer to memory that runs out of scope before the receiver handles the message.

Also remember to properly initialize any data you send...

# c# - linq 中的子查询

> ID：15489618
> 
> 赞同：1
> 
> 时间：2013-03-19T00:45:28.320
> 
> 标签：c#, sql, linq

在 linq 中编写此查询的最佳方法是什么？

```
SELECT *
  FROM product_master
  where product_id in (select product_id from product where buyer_user_id=12) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:47:06.977

```
var _result =   from a in product_master
                where (product.Where(s => s.buyer_user_id == 12))
                        .Contains(a.product_ID)
                select a; 
```

或者

```
var _result =   (from a in product_master
                join b in product
                    on a.product_id equals b.product_id
                where b.buyer_user_id == 12
                select a).Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:56:07.573

JW 的回答是正确的。或者，鉴于子查询不相关，您可以单独表达它：

```
var pids = product.Where(p => p.buyer_user_id == 12);
var r = product_master.Where(pm => pids.Contains(pm.product_id)); 
```

# angularjs - 具有动态模板和字符串插值的 angularjs 指令

> ID：15489621
> 
> 赞同：2
> 
> 时间：2013-03-19T00:45:34.290
> 
> 标签：angularjs, angularjs-directive

这个想法是用引用插值字符串的动态模板替换指令元素。

如果我在我的指令中使用 element.html() ，那么字符串会被很好地插值，但这会留下原始的自定义指令 html 元素。

如果我使用 element.replaceWith() 则不会插入字符串。我猜它与范围有关，但无法弄清楚出了什么问题。

Plunker：[http ://plnkr.co/edit/HyBP9d?p=preview](http://plnkr.co/edit/HyBP9d?p=preview)

## 更新

找到了解决方案。使用`element.replaceWith($compile(html)(scope));`作品。

更新的 plunker：[http ://plnkr.co/edit/HyBP9d?p=preview](http://plnkr.co/edit/HyBP9d?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:06:34.243

不确定目标是什么`replaceWIth`。问题很可能是当你替换一个元素时，你替换了所有绑定到它的事件和数据。这将包括元素的角度范围。

对于提供的演示，可以这样做：

```
app.directive('status', function($compile) {       

        var linker = function(scope, element, attrs) {
            element.contents().wrap('<h'+attrs.value+'>')
        };

        return {
            restrict: 'E',
            replace: true,
            template:'<div>{{value}}</div>',
            transclude: true,
            link: linker,
            scope: {
                value: '='
            }
        };
    }); 
```

演示：[http ://plnkr.co/edit/QDxIwE?p=preview](http://plnkr.co/edit/QDxIwE?p=preview)

# esb - 如何使用 FUSE ESB 粘合多个应用程序

> ID：15489635
> 
> 赞同：0
> 
> 时间：2013-03-19T00:47:28.113
> 
> 标签：esb, fuseesb

我有两个应用程序，一个部署在服务器 1 上。另一个部署在服务器 2 上。应用程序 1 想在应用程序 2 处理完成后向应用程序 2 发布一些日期。它将向应用程序一发送事件，我的客户建议我们使用 FUSE ESB，如何实现它，

任何答案都值得赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:41:05.693

您可以为此使用消息传递。Fuse ESB 随附 ActiveMQ 作为开箱即用的消息传递解决方案。然后，您可以让应用程序 A 向队列发送消息，应用程序 B 拾取该队列，并在响应队列上发回响应，以供应用程序 A 接收。

您还可以使用其他类型的传输，例如 HTTP、Web 服务、TCP 等等。

Fuse ESB 也与 Apache Camel 一起开箱即用，它有很多可供使用的传输和组件。请参阅此处的列表：http: [//camel.apache.org/components](http://camel.apache.org/components)

我建议您阅读 Fuse ESB 生产介绍指南：[https ://access.redhat.com/knowledge/docs/en-US/Fuse_ESB_Enterprise/7.1/html-single/Product_Introduction/index.html](https://access.redhat.com/knowledge/docs/en-US/Fuse_ESB_Enterprise/7.1/html-single/Product_Introduction/index.html)

# gcc - 在 gnu gcc 中不使用堆

> ID：15489641
> 
> 赞同：0
> 
> 时间：2013-03-19T00:48:13.963
> 
> 标签：gcc, compiler-construction, gnu, gnu-make, armcc

是否有任何编译器选项或方法告诉 gnu gcc 不要使用堆？
例如在 armcc 中： IMPORT __use_no_heap OR #pragma import(__use_no_heap) 可以在文件中用于告诉 armcc 不要使用堆。我在 gnu gcc 中寻找类似的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T23:33:53.973

You can set heap size in GCC like this:

```
gcc -Wl,--heap=<size in bytes> 
```

You can set it to zero if you want.

# c++ - 在 OpenCV 中为 BRISK 设置参数

> ID：15489642
> 
> 赞同：5
> 
> 时间：2013-03-19T00:48:16.597
> 
> 标签：c++, opencv, computer-vision, feature-detection

我正在尝试使用 OpenCV 的 BRISK 实现（用于 C++），以便检查照片中是否包含图像（或图像的一部分）。例如，我拍了一张照片，然后尝试匹配它在数据库中有一组图像，我想选择最佳的相应图像（如果所有图像都不够好，则出现错误消息）。

所以，我现在只是在测试 OpenCV。我只是采用了框架中包含的样本（matching_to_many_images），并将检测器和描述符从 SURF 更改为 BRISK。

但是，我有奇怪的结果。这些是匹配的结果（BruteForce Hamming）：

![蛮力汉明](../Images/0276cc1938003f556894f931a25c4c3e.png)

![蛮力汉明](../Images/46c54611bd3c4ac16439a09727987fdb.png)

第一个，场景完全不同，但有很多比赛！在第二个中，场景非常相似，但有些匹配是错误的。

我认为这是一个参数问题——因为在 BRISK 的演示视频中，结果非常重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:02:29.383

在使用 SIFT、SURF、BRISK 或任何其他局部描述符进行特征特征匹配时，通常会出现许多不正确的初始匹配。

> 由于模糊的特征或背景杂波产生的特征，这些初始匹配中的许多将是不正确的。[[*来自尺度不变关键点的独特图像特征*](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)]

下一步是只选择那些都同意两个图像之间的共同转换的匹配子集。这在[*Scale Invariant Keypoints 的独特图像特征*](http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf)的第 7.3 和 7.4 节中进行了解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T01:28:59.217

你看过 BRISK 的 OpenCV 文档吗？我不确定您现在使用什么参数，但您可以指定阈值和八度音阶以及模式。[http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#brisk](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#brisk)上的文档

您也可以尝试不同的特征匹配算法，尽管在 BRISK 论文中他们似乎也使用了汉明距离

最后，出现错误的特征匹配并不出人意料。尝试不同的场景以及不同的特征参数，看看你的结果如何

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-04T00:14:29.450

[OpenCV 教程](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)提供了一个很好的示例，说明如何提取特征和计算单应性（一种告诉您如何将每个点从一个图像转换到另一个图像的转换）。

您可以将特征检测器/描述符替换为任何其他的，这将导致对某些转换（如旋转、缩放）或模糊或亮度变化等错误的不同鲁棒性。BRISK 的基本实现已经定义了[有意义的参数](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#brisk-brisk)。

最后但同样重要的是，如果您尝试匹配两个完全不同的图像，您会期望得到什么结果？该算法将尝试寻找相似之处，因此总是计算一个结果，即使它是无意义的并且分数非常低。请记住：*垃圾输入 -> 垃圾输出。*

# android - 即使添加了 INTERNET 清单权限，WebView 也无法加载网页

> ID：15489644
> 
> 赞同：0
> 
> 时间：2013-03-19T00:48:20.713
> 
> 标签：android, permissions, webview

这是我的`AndroidManifest.xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="org.example.webviewdemo" android:versionCode="1"
  android:versionName="1.0.0">

  <uses-permission android:name="android.permission.INTERNET" />

    <application android:icon="@drawable/icon"
        android:label="@string/app_name">

        <activity android:name=".WebViewDemo" 
            android:label="@string/app_name">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

    </application>

</manifest> 
```

我正在编写的应用程序在 WebView 中显示了一个网页。该 URL 由用户输入，单击“开始”后，应显示该页面，但出现“网页不可用”错误。您可以在下面找到 Java 代码：

```
package org.example.webviewdemo;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnKeyListener;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.EditText;

public class WebViewDemo extends Activity {
    private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    private WebView webView;
    private EditText urlField;

    private Button goButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create reference to UI elements
        webView  = (WebView) findViewById(R.id.webview_compontent);
        urlField = (EditText)findViewById(R.id.url);
        goButton = (Button)findViewById(R.id.go_button);

        // workaround so that the default browser doesn't take over
        webView.setWebViewClient(new MyWebViewClient());

        // Setup click listener
        goButton.setOnClickListener( new OnClickListener() {
            public void onClick(View view) {
                openURL();
            }
        });

        urlField.setOnKeyListener( new OnKeyListener() {
            public boolean onKey(View view, int keyCode, KeyEvent event) {
                if(keyCode==KeyEvent.KEYCODE_ENTER) {
                    openURL();
                    return true;
                } else {
                    return false;
                }
            }
        });

    }

    private void openURL() {
        webView.loadUrl(urlField.getText().toString());
        webView.requestFocus();
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:35:57.323

```
private void openURL() {
    webView.loadUrl(urlField.getText().toString());
    webView.requestFocus();
} 
```

你能请 Log.d() urlField.getText().toString() 吗？只是为了确保 WebView 将使用什么字符串，如下所示：

```
Log.d("web string is ", urlField.getText().toString()); 
```

这样你就可以打开 LogCat 窗口并跟踪你的 WebView 的实际情况

# jquery - 选择打开 jquery 对话框后

> ID：15489646
> 
> 赞同：0
> 
> 时间：2013-03-19T00:48:37.937
> 
> 标签：jquery, selectable

我有以下代码：

```
$(document).ready(function () {

    $('.rota  td').live('click', function (event) {

        var $target = $(this);
        var $bf = $target.find('.booking_form');
        var hospital = $target.data('hospital-id');

        $bf.dialog();
        $bf.find('input#hospital_id').val(hospital);
        event.preventDefault();
    });

    $('.booking_form .user_full_name').on('change', function (e) {
        this.form.submit();
    });

     $('.rota td').addClass("Half Full Semi-Foo");
}); 
```

发生的情况是，单击表格单元格后，将出现 jquery 对话框，使您能够在选择员工后提交预订表格。我现在要做的是通过使用[可选的 jQuery](http://jqueryui.com/selectable/#display-grid)来扩展它，以便在选择多个单元格时打开一个对话框，以便您可以多次提交表单。例如，在突出显示 3 个单元格时，这会打开一个对话框，在选择`user_full_name`此选项时会提交 3 次表单。

更改以下内容会很容易吗

```
$('.rota  td').live('click', function (event) { 
```

到

```
$( "#rota td" ).selectable('click', function (event) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:15:41.643

根据[文档](http://docs.jquery.com/UI/API/1.8/Selectable#events)，您需要处理该`selected`事件

```
$("#rota td").selectable({
   selected: function(event, ui) { ... }
}); 
```

# sockets - 客户端/服务器 http 请求套接字

> ID：15489648
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:49:09.497
> 
> 标签：sockets, http, tcp, client

我需要创建一个带有按钮的客户端网站，一旦单击该按钮，就会向 Web 服务器发送一个 http 请求。然后，Web 服务器连接到 TCP 套接字。通过客户端页面，我应该能够发送命令并接收响应。我需要有关如何构建它的指导（即语言、教程等）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:11:37.187

在这里，我用 PHP 为你做了。现在，你的工作就是理解它:)

```
$host = "www.myserver.com";
$fileFromHost = "test.php?testparameter=5";
$fp = @fsockopen($host, 80, $errno, $errstr, 10);
if($fp){
    $out = "GET ".$fileFromHost." HTTP/1.1\r\n";
    $out .= "Host: ".$host."\r\n";
    $out .= "User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8) Gecko/20051111 Firefox/1.5\r\n";
    $out .= "Connection: Close\r\n\r\n";

    fwrite($fp, $out); // Send the page using GET to $host @ port=80

    while(!feof($fp)){
       $buffer .= fgets($fp, 128); // Receive response here
    }
    fclose($fp);
} 
```

# asp.net-mvc-4 - 自定义 DotnetOpenOauth Paypal 客户端（密钥不存在）

> ID：15489651
> 
> 赞同：1
> 
> 时间：2013-03-19T00:49:18.000
> 
> 标签：asp.net-mvc-4, oauth, paypal, dotnetopenauth

我设法集成了 Facebook、Twitter 和 Google 的预定义提供商。但我需要允许人们通过 Paypal 登录。我创建了以下继承 DotNetOpenAuth.AspNet.Clients.OAuth2Client 的类。

```
using System;
using System.Collections.Generic;
using System.Diagnostics.CodeAnalysis;
using System.Net;
using System.Web;
using Validation;

using DotNetOpenAuth.AspNet;
using DotNetOpenAuth.Messaging;
using Newtonsoft.Json;
using System.Text.RegularExpressions;

namespace OauthClient
{
    public class PayPalProviderClient : DotNetOpenAuth.AspNet.Clients.OAuth2Client
    {
        #region Oauth2
        #region Constants and Fields

        // https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/oauth-openid-connect-integration-paypal#making-first-call-register
        // 3 https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/authorize?client_id=<your_app_id>&response_type=code&scope=openid&redirect_uri=https://www.example.com/my-redirect-uri
        // 5 https://your-return-url?code=auth-code&scope=space-separted-scope-list&state=state
        // 6 https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenservice

        private const string AuthorizationEndpoint = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/authorize?response_type=code&scope=openid&";
        private const string TokenEndpoint = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenservice";
        private const string UserDetailsEndPoint = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/userinfo";

        private readonly string appId;
        private readonly string appSecret;

        #endregion

        #region Constructors and Destructors

        public PayPalProviderClient(string appId, string appSecret) : base("paypal")
        {
            Requires.NotNullOrEmpty(appId, "appId");
            Requires.NotNullOrEmpty(appSecret, "appSecret");
            this.appId = appId;
            this.appSecret = appSecret;
        }

        #endregion

        protected override Uri GetServiceLoginUrl(Uri returnUrl)
        {
            var builder = new UriBuilder(AuthorizationEndpoint);
            builder.AppendQueryArgument("client_id", this.appId);
            builder.AppendQueryArgument("redirect_uri", returnUrl.AbsoluteUri);
            return builder.Uri;
        }

        protected override IDictionary<string, string> GetUserData(string accessToken)
        {
            var builder = new UriBuilder(UserDetailsEndPoint);
            builder.AppendQueryArgument("schema", "openid");
            builder.AppendQueryArgument("access_token", accessToken);

            Dictionary<string, string> userData = new Dictionary<string, string>();
            using (WebClient client = new WebClient())
            {
                string data = client.DownloadString(builder.Uri);
                if (string.IsNullOrEmpty(data))
                    return null;
                else
                    userData = JsonConvert.DeserializeObject<Dictionary<string, string>>(data);
            }
            return userData;
        }

        public override void RequestAuthentication(HttpContextBase context, Uri returnUrl)
        {
            base.RequestAuthentication(context, returnUrl);
        }

        private IDictionary<string, string> GetUserData(string accessCode, Uri redirectURI)
        {
            string token = QueryAccessToken(redirectURI, accessCode);
            if (token == null || token == "")
                return null;
            return GetUserData(token);
        }

        private string QueryAccessToken(string returnUrl, string authorizationCode)
        {
            return QueryAccessToken(new Uri(returnUrl), authorizationCode);
        }

        protected override string QueryAccessToken(Uri returnUrl, string authorizationCode)
        {
            var builder = new UriBuilder(TokenEndpoint);
            //"client_id=<your_app_id>&client_secret=<your_app_secret>&grant_type=authorization_code&code=<code>&redirect_uri=<urlencoded_return_url>"
            builder.AppendQueryArgument("client_id", this.appId);
            builder.AppendQueryArgument("client_secret", this.appSecret);
            builder.AppendQueryArgument("grant_type", "authorization_code");
            builder.AppendQueryArgument("code", authorizationCode);
            builder.AppendQueryArgument("redirect_uri", returnUrl.AbsoluteUri);

            using (WebClient client = new WebClient())
            {
                string data = client.DownloadString(builder.Uri);
                if (string.IsNullOrEmpty(data))
                    return null;

                Dictionary<string, string> userData = JsonConvert.DeserializeObject<Dictionary<string, string>>(data);
                if (userData.ContainsKey("access_token"))
                    return userData["access_token"].ToString();
                else
                    return string.Empty;
            }
        }

        private string RefreshAccessToken(Uri returnUrl, string authorizationCode)
        {
            var builder = new UriBuilder(TokenEndpoint);
            builder.AppendQueryArgument("client_id", this.appId);
            builder.AppendQueryArgument("client_secret", this.appSecret);
            builder.AppendQueryArgument("grant_type", "refresh_token");
            builder.AppendQueryArgument("code", authorizationCode);
            builder.AppendQueryArgument("redirect_uri", returnUrl.AbsoluteUri);

            using (WebClient client = new WebClient())
            {
                string data = client.DownloadString(builder.Uri);
                if (string.IsNullOrEmpty(data))
                    return null;

                Dictionary<string, string> userData = JsonConvert.DeserializeObject<Dictionary<string, string>>(data);
                if (userData.ContainsKey("access_token"))
                    return userData["access_token"].ToString();
                else
                    return string.Empty;
            }
        }
        #endregion
    }
} 
```

这是由我的控制器调用的

```
string callbackUrl = Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl });
AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(callbackUrl); 
```

这导致“System.Collections.Generic.KeyNotFoundException 未被用户代码处理” - 字典中不存在给定的键。

有没有人有一个将 DNOA 与 PayPal 一起使用的工作示例？或者知道为什么我会收到此异常/我缺少什么键？

更新

我设法获得了一个工作版本，请参见下面的代码：

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.IO;
using System.Net;
using System.Web;
using DotNetOpenAuth.AspNet;
using DotNetOpenAuth.AspNet.Clients;
using DotNetOpenAuth.Messaging;
using Newtonsoft.Json;

namespace OauthClients
{

    /// <summary>
    /// A DotNetOpenAuth client for logging in to paypal using OAuth2.
    /// Reference: https://developers.paypal.com/accounts/docs/OAuth2
    /// </summary>
    public class PaypalOAuth2Client : OAuth2Client
    {
        #region Constants and Fields

        /// <summary>
        /// The authorization endpoint.
        /// </summary>
        private const string AuthorizationEndpoint = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/authorize?response_type=code&scope=openid&";

        /// <summary>
        /// The token endpoint.
        /// </summary>
        private const string TokenEndpoint = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/tokenservice";

        /// <summary>
        /// The user info endpoint.
        /// </summary>
        private const string UserDetailsEndPoint = "https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/userinfo";

        /// <summary>
        /// The base uri for scopes.
        /// </summary>
        private const string ScopeBaseUri = "https://www.paypal.com/webapps/auth/";

        /// <summary>
        /// The _app id.
        /// </summary>
        private readonly string _clientId;

        /// <summary>
        /// The _app secret.
        /// </summary>
        private readonly string _clientSecret;

        /// <summary>
        /// The requested scopes.
        /// </summary>
        private readonly string[] _requestedScopes;

        #endregion

        /// <summary>
        /// Creates a new paypal OAuth2 client.
        /// </summary>
        /// <param name="clientId">The paypal Client Id</param>
        /// <param name="clientSecret">The paypal Client Secret</param>
        /// <param name="requestedScopes">One or more requested scopes, passed without the base URI.</param>
        public PaypalOAuth2Client(string clientId, string clientSecret): base("paypal")
        {
            if (string.IsNullOrWhiteSpace(clientId))
                throw new ArgumentNullException("clientId");

            if (string.IsNullOrWhiteSpace(clientSecret))
                throw new ArgumentNullException("clientSecret");

            _clientId = clientId;
            _clientSecret = clientSecret;
        }

        protected override Uri GetServiceLoginUrl(Uri returnUrl)
        {
            var builder = new UriBuilder(AuthorizationEndpoint);
            builder.AppendQueryArgument("client_id", this._clientId);
            builder.AppendQueryArgument("redirect_uri", returnUrl.AbsoluteUri);

            return builder.Uri;
        }

        protected override IDictionary<string, string> GetUserData(string accessToken)
        {
            var request = WebRequest.Create(UserDetailsEndPoint + "?schema=openid&access_token=" + accessToken);
            Dictionary<string, string> authData;

            using (var response = request.GetResponse())
            using (var responseStream = response.GetResponseStream())
            using (var streamReader = new StreamReader(responseStream))
            {
                authData = JsonConvert.DeserializeObject<Dictionary<string, string>>(streamReader.ReadToEnd());
                return authData;
            }
        }

        protected override string QueryAccessToken(Uri returnUrl, string authorizationCode)
        {
            var builder = new UriBuilder(TokenEndpoint);

            builder.AppendQueryArgument("client_id", this._clientId);
            builder.AppendQueryArgument("client_secret", this._clientSecret);
            builder.AppendQueryArgument("grant_type", "authorization_code");
            builder.AppendQueryArgument("code", authorizationCode);
            builder.AppendQueryArgument("redirect_uri", returnUrl.AbsoluteUri);

            using (WebClient client = new WebClient())
            {
                var data = client.DownloadString(builder.Uri);

                if (string.IsNullOrEmpty(data))
                    return null;

                Dictionary<string, string> userData = JsonConvert.DeserializeObject<Dictionary<string, string>>(data);
                if (userData.ContainsKey("access_token"))
                    return userData["access_token"].ToString();
                else
                    return null;
            }
        }

        public override AuthenticationResult VerifyAuthentication(HttpContextBase context, Uri returnPageUrl)
        {
            string code = context.Request.QueryString["code"];
            string u = context.Request.Url.ToString();

            if (string.IsNullOrEmpty(code))
                return AuthenticationResult.Failed;

            string accessToken = this.QueryAccessToken(returnPageUrl, code);
            if (accessToken == null)
                return AuthenticationResult.Failed;

            IDictionary<string, string> userData = this.GetUserData(accessToken);
            if (userData == null)
                return AuthenticationResult.Failed;

            string id = userData["user_id"];
            string name = string.Empty ;

            return new AuthenticationResult(
                isSuccessful: true, provider: "PayPal", providerUserId: id, userName: name, extraData: userData);
        }     
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:59:22.813

您必须在方法 GetUserData 中提供带有 key="id" 的字典条目（名称为“name”和“username”的字典键可以）。

来自 OAuth2Client.class 的代码 ... string id = userData["id"]; 字符串名称；

```
 // Some oAuth providers do not return value for the 'username' attribute. 
        // In that case, try the 'name' attribute. If it's still unavailable, fall back to 'id'
        if (!userData.TryGetValue("username", out name) && !userData.TryGetValue("name", out name)) {
            name = id;
        } 
```

...

如您所见，如果缺少其中一个键，代码将失败。

# c - 在 C 中创建嵌套结构的动态自定义数组

> ID：15489654
> 
> 赞同：0
> 
> 时间：2013-03-19T00:49:27.020
> 
> 标签：c, memory-management, struct, nested

我正在尝试创建以下数组：

```
"Fruits", 25, {
    {"Apple", 2}, 
    {"Grapes", 13}, 
    {"Melon", 10}
}
"Meats", 40, {
     {"Beef", 9}, 
     {"Chicken", 27}, 
     {"Pork", 4}
 }

... 
```

感觉有一种更优雅的方式来做我到目前为止所做的事情。任何关于如何在给定输入结构的情况下更有效地创建此结构的反馈/样本将不胜感激。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

typedef struct Product {
    char *name;
    int qty;
} Prods;

typedef struct Category {
    char *name;
    int qty;
    int prods_count;
    Prods *prod;
} Cats;

typedef struct Inventory {
    Cats *cat;
    int cats_count;
} Inv;

struct tmp_input {
    char name[12];
    int qty;
    char cat[12];
};

// return index if found
int in_array(Inv *inv, char *k) {
    int i;
    if (inv->cats_count == 0)
        return -1;
    for (i = 0; i < inv->cats_count; i++) {
        if (strcmp (k, inv->cat[i].name) == 0) return i;
    }
    return -1;
}

int main () {
    int i, j, exists = 0;
    // temp struct.
    struct tmp_input items[] = {
        {"Apple", 2, "Fruit"}, {"Coke", 10, "Drink"},   {"Pork", 4, "Meat"},
        {"Beef", 9, "Meat"},   {"Chicken", 27, "Meat"}, {"Melon", 10, "Fruit"},
        {"Tea", 3, "Drink"},   {"Coffee", 20, "Drink"}, {"Grapes", 13, "Fruit"}
    };

    size_t len = sizeof (items) / sizeof (struct tmp_input);

    Inv *inven = malloc(sizeof(Inv));
    inven->cats_count = 0;
    inven->cat = calloc(1, sizeof(Cats));

    for (i = 0; i < len; i++) {
        exists = in_array(inven, items[i].cat);
        // category does not exist
        if (exists == -1) {
            inven->cat = realloc(inven->cat, sizeof(Cats) * (inven->cats_count + 1));
            inven->cat[inven->cats_count].name = strdup(items[i].cat);
            inven->cat[inven->cats_count].qty += items[i].qty;

            inven->cat[inven->cats_count].prods_count = 1;
            inven->cat[inven->cats_count].prod = calloc (1, sizeof (Prods));
            inven->cat[inven->cats_count].prod->name = strdup (items[i].name);
            inven->cat[inven->cats_count].prod->qty = items[i].qty;
            inven->cats_count++;
        }
        // category found
        else  {
            inven->cat[exists].qty += items[i].qty;

            int size = inven->cat[exists].prods_count + 1;
            inven->cat[exists].prod = realloc(inven->cat[exists].prod, sizeof(Prods) * (size));
            inven->cat[exists].prod[size - 1].name = strdup (items[i].name);
            inven->cat[exists].prod[size - 1].qty= items[i].qty;
            inven->cat[exists].prods_count++;
        }
    }

    for (i = 0; i < inven->cats_count; i++) {
        printf("%3d %s\n", inven->cat[i].qty, inven->cat[i].name);
        for (j = 0; j < inven->cat[i].prods_count; j++) {
            printf("%3d %s\n", inven->cat[i].prod[j].qty, inven->cat[i].prod[j].name);
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:25:00.077

您没有为 Prod 数组分配任何内存。

就像是

```
...

if (exists == -1) {
    inven->cat = realloc(inven->cat, sizeof(Cats) * (inven->cats_count + 1));
    inven->cat[inven->cats_count].name = items[i].cat;
    inven->cat[inven->cats_count].qty += items[i].qty;

    // Allocate memory for 1 product
    inven->cat[inven->cats_count].prods_count = 1;
    inven->cat[inven->cats_count].prod = malloc (sizeof (Prods));

    // Now allocate space and copy the name
    inven->cat[inven->cats_count].prod->name = strdup (items[i].name + 1);

    inven->cats_count++;
}
... 
```

我将留给您处理一个类别中有多个产品的情况，您需要再次重新分配内存。

另一个错误是您需要分配和复制类别名称

```
inven->cat[inven->cats_count].name = items[i].cat; 
```

应该替换为

```
inven->cat[inven->cats_count].name = strdup (items[i].cat); 
```

这是因为`items`数组在这个函数之外不存在，所以如果你只是这样做

```
inven->cat[inven->cats_count].name = items[i].cat; 
```

那么在你离开这个函数之后，`invent->cat[inven->cats_count].name`会指向垃圾内存。

最后的建议是将每个结构拆分为一个处理它的创建的函数，只是为了清理代码。

--- 编辑以添加对抽象数据类型的评论

如果您知道您将通过索引访问数据，则数组很有用。如果您不知道所需项目的索引（如本例所示），则数组的用处不大。

与其他评论不同，我不认为使用链接列表真的会给你任何有用的东西。当您需要按顺序遍历所有项目而不真正关心它们在列表中的位置时，链接列表很有用。在我看来，像您正在创建的系统最常见的用例是搜索：我们有库存水果吗？在库存中添加 10 箱可乐……诸如此类的东西。

此外，您只希望每个类别/产品有一个条目。您不希望数据中有 3 个水果类别。数组和链表都对多次添加相同的结构没有任何限制。这意味着每次您都需要检查整个列表以查看是否需要添加新结构。

出于这个原因，我当然会将类别和产品数组都制作成映射名称 - > 结构的哈希表（或在某些语言中称为字典）。这将加快您的搜索速度，因为您不必每次都搜索整个数据集，并且会阻止您多次添加相同的结构。

维基百科关于哈希表的文章：[http ://en.wikipedia.org/wiki/Hashtable](http://en.wikipedia.org/wiki/Hashtable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:09:25.873

这是一个如何动态设置结构的示例（比链表简单，但不灵活）。

```
typedef struct Product {
   char *name;
   int qty;
} Prods;

typedef struct Category {
   char *name;
   int qty;
   int prods_count;
   Prods *prod;      // dynamic array of Products
} Cats; 
```

原来的结构。

```
 struct Category categ[10]; 
```

任意数量的类别，现在以`categ[0]`“水果”为例。

接下来动态创建一个包含 10 个产品结构的数组：

```
 Prods *prod_array = malloc(sizeof(Prods) * 10); // i.e. prod_array[0] to [9] 
```

现在只需将数组存储在类别结构中：

```
 categ[0].prod = prod_array;
   categ[0].prods_count = 10; 
```

如果您需要访问产品名称，它只是：`categ[i].prod[j].name`

现在，如果您需要另外 10 个产品，您可以使用`realloc`增加数组的大小，并更新其计数。

把这些东西都放在函数里，代码也不会太复杂。

# powershell - 使用 PowerShell 授予对证书私钥的 IIS 7.5 应用程序池读取权限

> ID：15489655
> 
> 赞同：5
> 
> 时间：2013-03-19T00:49:30.400
> 
> 标签：powershell, certificate, iis-7.5

我四处搜索，找不到很多信息，基本上我有 Windows 2008 R2，我创建了 PowerShell 脚本来将 PFX 文件加载到本地机器的证书存储中。

现在我需要授予我的应用程序池的权限以使用 PowerShell 读取证书的私钥。

在旧的 Windows 2003 中，我只需要获取位于文件`C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\`夹中的实际文件，但看起来 Win 2008 使用不同的文件夹。

有人有解决办法吗？

-- 更新我的代码版本 --

```
function Grant-CertificatePermissions([string]$certSubject,[string]$user,[string]$permissionType,[string]$permission = $args[3])
{
    $getCert = Get-LocalMachineCertificate $certSubject
    $keypath = Get-CertificateStorePath
    $certHash = $getCert.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName
    $certFullPath = $keypath+$certHash
    $certAcl = Get-Acl -Path $certFullPath

    try
    {
        $accessRule=new-object System.Security.AccessControl.FileSystemAccessRule $user, $permissionType, $permission
        $certAcl.AddAccessRule($accessRule)
    }
    catch [System.Exception]
    {
        throw "Invalid User Id Or Permission"
    }
    Set-Acl $certFullPath $certAcl
}

function Get-LocalMachineCertificate([string]$subject, [string]$certificateStoreLocation, [string]$certificateStoreName)
{
    $getCert = Get-ChildItem -Recurse Cert:\$certificateStoreLocation\$certificateStoreName | Where-Object {$_.Subject -eq $subject}

    if(!$getCert)
    {
        throw "Certificate Not Found"
    }

    return $getCert
}

function Get-CertificateStorePath
{
    $commonCertPathStub = "\Microsoft\Crypto\RSA\MachineKeys\"
    $programData = $Env:ProgramData
    if(!$programData)
    {
        $programData = $Env:ALLUSERSPROFILE + "\Application Data"
    }

    $keypath = $programData + $commonCertPathStub

    return $keypath
} 
```

在我的`Get-CertificateStorePath`函数中，我得到的值是`C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\`，在我获得证书哈希后，完整的文件看起来像`C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\d82829f7770ea5d85ef978dea67f302d_4cca7190-7e9f-46d7-b180-6656fec432e2`，当我执行`Get-Acl`行时我有异常`Cannot find path 'C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\d82829f7770ea5d85ef978dea67f302d_4cca7190-7e9f-46d7-b180-6656fec432e2' because it does not exist.`。

我浏览了那个文件夹，我确实找不到这样的文件。

- 更新 -

```
function Import-PfxCertificate ([String]$certPath,[String]$certificateStoreLocation ,[String]$certificateStoreName, $pfxPassword)
{
    $pfx = new-object System.Security.Cryptography.X509Certificates.X509Certificate2    

    $pfx.Import($certPath, $pfxPassword, "Exportable,PersistKeySet")    

    $store = new-object System.Security.Cryptography.X509Certificates.X509Store($certificateStoreName,$certificateStoreLocation)    
    $store.open("MaxAllowed")    
    $store.add($pfx)    
    $store.close()
    return $pfx
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:17:36.873

2008 R2 使用`C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys`

通过 PowerShell，您可以在此处查看 IIS 可用的证书：

```
cert:\LocalMachine\My 
```

您可以 cd 进入该位置并查找您的证书。找到它后，您可以使用以下命令查看其私钥 ID：

```
$cert = get-item 2779B37AE3625FD8D2F9596E285C7CDC15049D87
$cert.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName 
```

这将包含 MachineKeys 文件夹中的长十六进制文件名。

然后，您可以使用`Set-Acl`cmdlet 更改文件权限。

您还可以通过证书 MMC 查看权限`mmc/add snapin/certificates/computer account/local computer`，然后`certificates/personal/certificates/[your cert]/all tasks/manage private keys`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T14:33:07.300

如果将证书从 User Store\Personal 拖放到 Computer Store\Personal，则 $getCert.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName 值错误。没有具有该值的文件。在正确的存储中再次导入证书，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T15:48:57.057

这是一个完整的 powershell 脚本，用于授予任何用户对证书私钥的权限。

[如何使用 powershell 授予用户对证书私钥的权限？](https://stackoverflow.com/questions/40046916/how-to-grant-permission-to-user-on-certificate-private-key-using-powershell/40046917#40046917)

上面的链接有脚本和示例如何在 powershell 控制台窗口上运行它。

如果您使用的是 ApplicationPoolIdentity，那么您的用户名将是**“IIS AppPool\AppPoolNameHere”**

**注意**：您需要使用**' '**，因为 IIS 和 AppPool 之间有一个空格。

# sftp - 为 sftp winsshd 编写脚本

> ID：15489657
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:49:37.053
> 
> 标签：sftp

我想通过 sftp（winSSH 服务器）传输文本文件。我该怎么做？我意识到我需要编写脚本并使用 Windows 调度程序运行。有什么例子吗？请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:32:30.940

阅读分步指南如何：

*   [使用 WinSCP（SFTP 客户端）编写文件传输脚本](https://winscp.net/eng/docs/guide_automation)和
*   [安排文件传输到 SFTP 服务器](https://winscp.net/eng/docs/guide_schedule)。

*（我是WinSCP的作者）*

# java - 返回泛型类类型

> ID：15489658
> 
> 赞同：0
> 
> 时间：2013-03-19T00:49:39.783
> 
> 标签：java, class, generics

我有一个可能返回 A 类或 B 类的方法。如何将其返回类型定义为通用的，与返回的类类型无关。例如

```
public <Generic_Class_Return_Type> showForm() {
   if (true)
      return new ClassA();
   else 
      return new ClassB();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:01:07.030

Not really sure if you need generics in this case, however you can parameterize either the whole class or just the method and then use reflection like this:

```
public <T> T getForm() {
  Class<T> clazz = (Class<T>) ((true) ? Foo.class : Bar.class);
  Constructor<T> ctor = clazz.getConstructor();
  return ctor.newInstance();
} 
```

However if you specify your use case, we can further suggest if going generics is the way, or if you'd better use standard polymorphism.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:54:55.873

您可以使用两个类都实现的接口，如下所示：

```
public SomeInterface showForm() {
   if (true)
      return new ClassA();
   else 
      return new ClassB();
}

class ClassA implements SomeInterface{}
class ClassB implements SomeInterface{} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:55:44.847

```
public object showForm()
{
   if (true)
      return new ClassA();
   else
      return new ClassB(); 
} 
```

或者

```
public superClassName showForm()
{
   if (true)
      return new ClassA();
   else
      return new ClassB();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T00:57:52.470

最简单的方法是将它们作为对象返回。

```
public Object showForm() {
   if (true)
      return new ClassA();
   else 
      return new ClassB();
} 
```

虽然它不是那么有用，一个更有用的解决方案是让它们扩展一个公共类或实现一个公共接口。

```
public CommonInterface showForm() {
   if (true)
      return new ClassA();
   else 
      return new ClassB();
}

class ClassA implements CommonInterface { }
class ClassB implements CommonInterface { }
interface CommonInterface { } 
```

或者

```
public CommonClass showForm() {
   if (true)
      return new ClassA();
   else 
      return new ClassB();
}

class ClassA extends CommonClass { }
class ClassB extends CommonClass { }
class CommonClass { } 
```

**泛型**

如果你想使用泛型`ClassA`，`ClassB`那么需要是同一个类，由一些泛型类型修改，例如。`Class<T>`. 泛型是否相关都取决于您的类的实现。您可能最好使用接口或基类。

# iphone - Xcode 项目总是抛出 SIGTRAP？

> ID：15489665
> 
> 赞同：0
> 
> 时间：2013-03-19T00:50:16.897
> 
> 标签：iphone, ios, xcode, exception

这可能是一个有点模糊或项目特定的问题，但我的项目为遇到的每个异常抛出一个 SIGTRAP。我以前从未见过这种情况，现在每次我的代码出现问题时它都会抛出它，它对我调试它没有任何帮助。在我的另一个类似的类中，我会得到一个索引越界异常，但在这个类中它只是 SIGTRAP，我必须打开异常断点来查看错误在哪里。我不擅长调试这种东西，但这里有一些信息，如果还有什么有用的，请告诉我。

```
libsystem_kernel.dylib`__kill:
0x96f283b0:  movl   $786469, %eax
0x96f283b5:  calll  0x96f2a4c2                ; _sysenter_trap
0x96f283ba:  jae    0x96f283ca                ; __kill + 26
0x96f283bc:  calll  0x96f283c1                ; __kill + 17
0x96f283c1:  popl   %edx
0x96f283c2:  movl   27739(%edx), %edx
0x96f283c8:  jmpl   *%edx
0x96f283ca:  ret    
0x96f283cb:  nop 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:17:33.130

错误表明您正在访问不可访问的索引。你的循环一定有问题，检查条件和循环并清理项目..祝你好运！

# regex - 用于电子邮件以限制字符的 reg ex

> ID：15489669
> 
> 赞同：1
> 
> 时间：2013-03-19T00:50:37.873
> 
> 标签：regex, xsd

如何为电子邮件编写正则表达式，使其长度小于 50 个字符并以“.com”或“.org”或“.edu”结尾，并且第一个字符不能是数字？

现在我有：

```
[a-z]{1}[a-zA-Z0-9]@.|edu|org|com| 
```

并使用 maxlength 限制而不是直接在 RegEx 中限制字符长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:56:22.877

你`.`后面的`@`表示任何单个字符都可以匹配，但只能匹配 1 个，并且永远不会超过一个。“edu/org/com”分组的语法也可能不正确。

尝试以下操作：

```
[a-z]{1}[a-zA-Z0-9]*@.*\.(edu|org|com)$ 
```

# c++ - 我的 test.cpp 文件使用默认操作符<<; 这个签名有什么问题？

> ID：15489670
> 
> 赞同：1
> 
> 时间：2013-03-19T00:50:40.490
> 
> 标签：c++, io, operators, ostream

我花了最后 30 分钟试图找出问题所在：

从 .h 文件：

```
// H/T sent. d-linked list Set

#ifndef SET_H
#define SET_H
#include <iostream>
#include <string>

using namespace std;
typedef string ELEMENT_TYPE;  // a set for string elements

class Set{
private:
    struct Elem {
        ELEMENT_TYPE info;
        Elem *prev, *next;
    };
    Elem *_head, *_tail;
    int _size;

    void copyCode(const Set & v);

    void destructCode();

    ostream& dump(ostream& out, const Set &v);

public:
    Set();

    Set(const Set &rhs);

    ~Set();

    Set& operator=(const Set &rhs);

    bool insert(ELEMENT_TYPE);

    bool erase(ELEMENT_TYPE);

    void clear();

    int size() const { return _size; }

    bool find(ELEMENT_TYPE) const;

    class Iterator{
    private:
    Elem * _cur;

    public:
        Iterator(){}
        explicit Iterator( Elem* );

    Iterator operator++( int );
    Iterator operator++();
        Iterator operator--( int);
    Iterator operator--();

    bool operator==( const Iterator& rhs );
    bool operator!=( const Iterator& rhs );

    ELEMENT_TYPE& operator*();

    ostream& operator<< ( ostream& );

    };

    Iterator begin() const; 
    Iterator end() const; 
    friend ostream& operator<< (ostream&, Set&);
};

bool operator==(const Set&, const Set&);
bool operator!=(const Set&, const Set&);
Set operator&(const Set&, const Set&);
Set operator|(const Set&, const Set&);

#endif 
```

从 .cpp 文件：

```
string& Set::Iterator::operator*(){

    return _cur -> info;
}

ostream& Set::Iterator::operator<< ( ostream& os ){

    os << _cur -> info << "\n";

    return os;
} 
```

来自 test.cpp：

```
Set s1;

s1.insert( "1" );
s1.insert( "2" );
s1.insert( "3" );

cout << "Hi\n";

Set::Iterator it = s1.begin();
while( it != s1.end() ){
    cout << *it;
    it++;
}

cout << "Bye\n"; 
```

对我来说，这看起来不错，就像我之前所做的每个 operator<< 一样，但是当我运行我的 test.cpp 文件时，我将代码放入其中，我得到：

```
Hi
321Bye 
```

这显然不是我在 operator<< 定义中提供的信息，而且我还尝试将访问的值替换为“hi\n”之类的虚拟输出；很少成功。这让我相信我定义不正确并且它使用了一些通用的字符串输出运算符。

我确信这是一个非常简单的问题，但我没有梦寐以求的第二双眼睛很容易接近。

**编辑：有些人说代码是完美的（脸红）并且问题无法解决，但我不知道我错过了什么，所以我包含了完整的头文件。由于明显的空间原因，我没有包含 .cpp。如果您认为问题可能出在某个领域，我会很乐意发布我的定义。**

**问题是输出不包含换行符，这表明该运算符根本没有被使用。为什么/没有正确重载的运算符缺少什么（感谢 JBently）**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:14:43.857

您不能将 operator<< 实现为类的方法，它必须是全局函数！

您的运算符`<<`根本不起作用，因为在方法实现中总是第一个**隐式参数是 this**所以您的实现类似于具有以下签名的函数：

```
ostream& operator<< (this, ostream& ); 
```

但是要使运算符`<<`工作-第一个参数应该将`ostream&` 运算符实现为全局函数，您的问题将得到解决：

```
ostream& operator<< ( ostream& str, iterator& iter ); 
```

在这部分代码中，您只需取消引用迭代器（调用操作员*）

```
Set::Iterator it = s1.begin();
while( it != s1.end() ){
    cout << *it;
    it++;
} 
```

如果你需要调用 operator<< 重写它：

```
Set::Iterator it = s1.begin();
while( it != s1.end() ){
    cout << it;
    it++;
} 
```

# php - $_SERVER['DOCUMENT_ROOT']的PHP共享主机解释

> ID：15489672
> 
> 赞同：0
> 
> 时间：2013-03-19T00:50:44.117
> 
> 标签：php, apache, versioning, document-root

我一直在使用 PHP 脚本对文件进行自动版本控制，在其中，它用于`$_SERVER['DOCUMENT_ROOT']`获取定位文件的路径。

它大部分时间都有效，但每隔一段时间，服务器（共享主机）似乎会误解路径。

它应该总是：`/home/username/public_html`

但有时它会出现：`/usr/local/apache/htdocs`，然后发生错误。

这是使用它的脚本行：

```
$ver = '.'.filemtime($_SERVER['DOCUMENT_ROOT'].$url).'.'; 
```

是否有另一种方法来获取网站根目录而不是上面一行中的服务器？就像 / 在域或子域的顶部一样，比如 RewriteBase 将在哪里定义？

输入表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:58:32.823

只要 doc_root 默认情况下不更改，在脚本中明确引用它就可以解决问题：

```
 $ver = '.'.filemtime('/home/username/public_html/'.$url).'.'; 
```

您应该始终可以访问此目录，因为共享托管结构通常不会改变（除非他们想失去客户！）。让他们知道它正在发生并问为什么。

# java - 使用 Java 的 Akka 远程连接

> ID：15489681
> 
> 赞同：2
> 
> 时间：2013-03-19T00:52:04.787
> 
> 标签：java, scala, configuration, akka

我是 Akka 的新手，对 Scala 一点也不熟悉。我正在尝试使用 Akka+Java 在多台机器上运行项目。我能够在本地成功运行 Akka Java 示例，但是当我尝试在两台机器上运行其中任何一个时，代码停止工作。我也查看了 Akka-Sample-Remote 源代码。它也适用于单台机器，但在多台机器上使用时会中断。我认为问题在于我设置配置的方式。我将问题总结为一个简单的 HelloWorld 问题，如下所示。

代码分为两个项目，有两个独立的配置文件：一个 Hello Actor 项目和一个 World Actor 项目。World Actor 等待从 Hello Actor 接收到 Hello Message，然后打印出“Hello World”。下面你可以看到这两个项目的代码和配置。如您所见，World Actor 在端口 1719 上启动，Hello Actor 在端口 1720 上启动并尝试使用 "akka.tcp://WorldApplication@192.27.336.187:1719/user/WorldActor" 连接到 World Actor。知道他的代码/配置有什么问题吗？

JWorld.java：

```
public class JWorld {

  public static void main(String[] args) {
    JWorldApplication app = new JWorldApplication();
    System.out.println("Started World Application - waiting for Hello message");
  }

} 
```

JWorldApplication.java：

```
import akka.actor.ActorRef;

import akka.actor.ActorSystem;
import akka.actor.Props;
import com.typesafe.config.ConfigFactory;

public class JWorldApplication {
  private ActorSystem system;

  public JWorldApplication() {
    system = ActorSystem.create("WorldApplication", ConfigFactory.load()
        .getConfig("WorldConfig"));
    ActorRef actor = system.actorOf(new Props(JWorldActor.class),
        "WorldActor");
  }
} 
```

JWolrdActor.java：

```
import akka.actor.UntypedActor;

public class JWorldActor extends UntypedActor {
    @Override
    public void onReceive(Object message) {

        if (message instanceof HelloMessage) {
            HelloMessage recMsg = (HelloMessage) message;
            System.out.println("Received Message: " + recMsg.getText());
            System.out.println("***** Hello World! ******" );
        } else {
            System.out.println("UnHandled Message Received" );
            unhandled(message);
        }
    }

} 
```

HelloMessage.java：

```
import akka.actor.ActorRef; 

public class HelloMessage{
    private ActorRef receiver;
    private String text;
    HelloMessage() {}
    HelloMessage(ActorRef receiver){ this.receiver = receiver;}
    public ActorRef getReceiver(){ return receiver;}
    public void setText(String text) { this.text = text;}
    public String getText() {return text;}
} 
```

应用程序.conf：

```
WorldConfig {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }

  remote {
    netty.tcp {
      hostname="192.27.336.187"
      port=1719
    }
  }
} 
```

JHello.java：

```
public class JHello {

public static void main(String[] args) {
    JHelloApplication testApp = new JHelloApplication();
    System.out.println("Started Hello Application - Sending Hello Message");
    testApp.sayHello();

}
} 
```

JHelloApplication.java：

```
import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;

import com.typesafe.config.ConfigFactory;

public class JHelloApplication {
    private ActorSystem system;
    private ActorRef remoteActor, myActor;

    public JHelloApplication() {
        system = ActorSystem.create("HelloApplication", ConfigFactory.load()
                .getConfig("HelloConfig"));
        myActor = system.actorOf(new Props(JHelloActor.class),"HelloActor");
        remoteActor = system
                .actorFor("akka.tcp://WorldApplication@192.27.336.187:1719/user/WorldActor");
    }

    public void sayHello() {
        myActor.tell(new HelloMessage(remoteActor));
    }

} 
```

JHelloActor.java：

```
import akka.actor.ActorRef;
import akka.actor.UntypedActor;

public class JHelloActor extends UntypedActor {

    @Override
    public void onReceive(Object message) {
        if (message instanceof HelloMessage) {
            HelloMessage msg = (HelloMessage) message;
            if (msg.getReceiver() !=null){
                msg.setText("Hello");
                msg.getReceiver().tell(msg, getSelf());
            }
        } else {
            System.out.println("UnHandled Message Received" );
            unhandled(message);
        }
    }

} 
```

应用程序.conf：

```
HelloConfig {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }

  remote {
    netty.tcp {
      hostname="192.27.336.187"
      port=1720
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:35:13.623

正如 Patrcik 所提到的，Patrik 在 Akka 组上最终回答了这个问题。问题是两个配置文件中都缺少 Akka{} 标记。添加这个标签可以解决这个问题。

# c# - 单元测试或不单元测试这部分

> ID：15489683
> 
> 赞同：0
> 
> 时间：2013-03-19T00:52:16.863
> 
> 标签：c#, unit-testing

我有一个 CSV 类和一个 CSV 解析器类，以及它们的单元测试。我想知道是否必须删除以下单元测试的一部分：

```
public class CSV{

public string[] columns GetColumns()
        {                       
           var columns = null;

            if (!string.IsNullOrEmpty(this.textReader.ReadLine()))
            {
               var columns = this.csvParser.GetColumns(line);              
            }

            return columns;
        }

  }

   [Test]
        public void GetColumns_ReturnsCorrectLine()
        {            
            reader.Setup(r => r.ReadLine()).Returns("a\tb\tc");

            //Act
            var columns = csvReader.GetColumns();

            //Assert
            Assert.IsTrue(columns!=null);
            Assert.AreEqual(3, columns.Length);

            Assert.AreEqual("a", columns[0]);
            Assert.AreEqual("b", columns[1]);
            Assert.AreEqual("c", columns[2]);
      } 
```

问题

1）必须删除断言列（a，b，c）的三行代码吗？

2)`GetColumns_ReturnsCorrectLine`测试方法在去掉最后三个断言后是否执行了正确的单元测试

请注意，已经有代码对 CSV 解析器的`GetColumns()`方法进行单元测试。GetColumns 的功能是解析制表符分隔的字符串并将其转换为列。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:03:21.653

应该检查这些值，但不像你正在做的那样。

使用 NUnit，有`CollectionAssert`：

```
CollectionAssert.AreEqual(new [] {"a", "b", "c"}, columns); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:29:28.717

看起来好像您正在尝试测试 CSV.GetColumns()。

*GetColumns()*有三个路径

1) textReader.ReadLine() 返回 null => return null
2) textReader.ReadLine() 返回 "" => return null
3) testReader.ReadLine() 返回 !string.NullOrEmpty() => 返回 CsvParser 的输出。

三项测试应该是这样

TextReader 返回 null => 结果为 null
TextReader 返回 "" => 结果为 null
TestReader 返回 => 结果为 CsvParser 的返回值。

CsvParser 返回的值并不重要——正如你所提到的，CsvParser 正确地完成了它的工作在其他地方进行了测试——我们只想说我们返回了解析器的输出。

```
public interface ITextReader {
    string ReadLine();
}

public interface ICsvParser {
    string[] GetColumns(string line);
}

public class CSV {
    private readonly ITextReader textReader;
    private readonly ICsvParser csvParser;

    public CSV(ITextReader textReader, ICsvParser csvParser) {
         this.textReader = textReader;
         this.csvParser = csvParser;
    }

    public string[] GetColumns() {                       
        string[] columns = null;
        var line = this.textReader.ReadLine();          

        if (!string.IsNullOrEmpty(line)){
           columns = this.csvParser.GetColumns(line);              
        }

        return columns;
    }

}

[TestClass]
public class CSVFixture {
    private Mock<ITextReader> mockTextReader;
    private Mock<ICsvParser> mockCsvParser;
    private CSV csv;

    private readonly static string [] Columns = new string[]{};

    [TestInitialize]
    public void Setup() {
        mockTextReader = new Mock<ITextReader>();
        mockCsvParser = new Mock<ICsvParser>();
        csv = new CSV(mockTextReader.Object, mockCsvParser.Object);
    }

    [TestMethod]
    public void NullLine() {
        Execute(null);
    }

    [TestMethod]
    public void EmptyLine() {
        Execute("");
    }

    [TestMethod]
    public void PopulatedLine() {
        Execute("SomeLineValue", Columns);
    }

    private void Execute(string line, string[] expected = null) {
        mockTextReader.Setup(mk => mk.ReadLine()).Returns(line);
        mockCsvParser.Setup(mk => mk.GetColumns(line)).Returns(Columns);

        var actual = csv.GetColumns();

        Assert.AreEqual(actual, expected);

    }
} 
```

**其他要点：**只要仅从此处调用 CsvParser，它只会移动代码，但您可以更改 CsvParser，以便如果输入为 null 或为空，则返回 null。这意味着您不必在每次调用 CsvParser 时都检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T01:00:12.573

> 必须删除断言列 (a,b,c) 的三行代码吗？

tl;博士：**没有**

如果你想确保 "a\tb\tc" 结果是 ["a", "b", "c"] 而不是 ["b", "a", "c"]，那么你应该离开它们前两行只检查它是否不为空，长度，内容可以是任何东西。

> 请注意，已经有代码可以对 CSV 解析器的 GetColumns() 方法进行单元测试。

那些测试是什么？如果没有看到它们，很难判断它们是否重叠。

# java - JScrollPane：固定宽度，自动高度

> ID：15489690
> 
> 赞同：2
> 
> 时间：2013-03-19T00:53:08.047
> 
> 标签：java, jscrollpane, border-layout

我是第一次使用 Swing，但 JScrollPane 有问题...

我有这个结构

> JPanel 西
> 
> > 滚动窗格滚动窗格
> > 
> > > JList列表

“west”包含“scrollPane”。“scrollPane”包含“列表”

“west”的 LayoutManager 是 BorderLayout，现在我希望 JScrollPane 具有固定宽度，但高度会根据“west”的高度自行调整...

有解决办法吗？

对不起，我的英语很差，但我不是英语，我很困 :)

# logparser - 如何在logparser中将单个字段拆分为多个字段

> ID：15489696
> 
> 赞同：0
> 
> 时间：2013-03-19T00:53:57.147
> 
> 标签：logparser

我对日志解析器很陌生。我尝试使用不同的格式和分隔符，但这对我不起作用。我的日志文件如下所示..

```
# Version xx
# Feilds: date time c-ip
# Software : Weblogic
# Startdate : 2013-08-15 17:39:09
date value    time   ipaddress 
```

当我应用以下代码时

```
logparser.exe -o:DATAGRID "select * from abc.log_tmp" 
```

其中 abc.log_tmp 是包含信息的日志文件

它以下列方式提供信息：

```
******************************************************************
        logfilename                          index      content

 ******************************************************************** 
   C:xyx\abc.log_tmp                       3        date time

C:xyx\abc.log_tmp                       4        date time
********************************************** 
```

实际上它应该是什么时候

```
date         time      c-ip

xxx          xxx       xxx
xxx          xxx       xxx 
```

从这里我知道它将日期时间c-ip值作为一个，但它应该把它作为不同的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:55:49.240

您应该明确告诉 LogParser 它应该期望哪种输入格式（如果您不这样做，Log Parser 会尝试从文件名或日志文件的前几行中找出它）；在这种情况下，如果您将“-i:W3c”添加到命令行，它应该可以正常工作。

# c++ - 如何找出使用 C++ 写入地址的内容？

> ID：15489700
> 
> 赞同：-2
> 
> 时间：2013-03-19T00:54:20.183
> 
> 标签：c++, c, debugging, assembly

我有一个由 300 条不同指令每秒写入 1000 次的地址。如何使用 c++ 找出写入地址的最后一条指令？

我已经做到了，所以它会提醒我实例将特定值写入地址，但是如何让它打印写入该特定值的最后一个指令地址？

我会在调试器中执行此操作，但我发现的所有调试器都无法处理在不冻结程序的情况下对每秒更改 1000 倍的地址执行条件断点。

如果我不能在 C++ 中做到这一点，还有什么其他方法可以做到这一点？我需要找到哪个地址指令将特定值写入内存地址，该地址每秒从不同地址接收超过 1000 次写入。

更新：

我正在为那些想知道的人使用 Windows 7 x32。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:04:43.790

看看[针](http://software.intel.com/en-us/articles/pin-a-dynamic-binary-instrumentation-tool)。简而言之，pin 允许您在 x86 指令级别检测您的代码，允许您随心所欲地跟踪读取和/或写入。我自己用它来模拟缓存性能并发现它相当快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:34:03.147

> 已经做到了，所以它会提醒我实例将特定值写入地址，但是如何让它打印写入该特定值的最后一个指令地址？

如果它只是用于一次性调试，请使用警告 system/popen `pstack`( [http://www.linuxcommand.org/man_pages/pstack1.html](http://www.linuxcommand.org/man_pages/pstack1.html) ) 或类似的代码 - 一些转储调用堆栈的外部程序。究竟要使用哪个程序高度依赖于操作系统，而您对您的环境只字未提。（这是一种在无效内存访问等后从信号处理程序生成调用堆栈的常用技术。）

# java - 表客户端没有名为高度的列

> ID：15489702
> 
> 赞同：0
> 
> 时间：2013-03-19T00:54:21.917
> 
> 标签：java, android, sqlite, runtime-error

我从我的 logcat 中收到此错误。

```
03-19 08:41:48.174: E/Database(271): Error inserting height=53.0 status=OBESE bmi=38.290850836596654 contact_num=00000000000 address=usa age=21 gender=female weight_client=153.0 full_name=claire
03-19 08:41:48.174: E/Database(271): android.database.sqlite.SQLiteException: table client has no column named height: , while compiling: INSERT INTO client(height, status, bmi, contact_num, address, age, gender, weight_client, full_name) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?); 
```

当我使用模拟器时，会发生这种情况。但是当我在我的设备上尝试时，数据插入似乎没有问题。我很困惑为什么会发生这种情况。有人可以向我解释一下吗？

此外，这是我`DBAdapter`和我的代码，`ViewClient.class`它可能有助于查明问题所在。

我的代码`DBAdapter`：

```
public static final String TABLE_NAME = "client";
public static final String CLIENT_ID = "client_id";
public static final String FULLNAME = "full_name";
public static final String GENDER = "gender";
public static final String ADDRESS = "address";
public static final String AGE = "age";
public static final String CONTACT_NUM = "contact_num";
public static final String HEIGHT = "height";
public static final String WEIGHT = "weight_client";
public static final String BMI = "bmi";
public static final String STATUS = "status";

String sq_clients = "CREATE TABLE " + TABLE_NAME + 
                        "(" + CLIENT_ID + " integer primary key autoincrement, " +
                        FULLNAME + " text not null, " +
                        GENDER + " text not null, " +
                        ADDRESS + " text not null, " +
                        AGE + " integer not null, " +
                        CONTACT_NUM + " text not null, " +
                        HEIGHT + " integer not null, " +
                        WEIGHT + " integer not null, " +
                        BMI + " integer not null, " +
                        STATUS + " text not null);"; 
```

ViewClient.java：

```
package com.example.********;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class DatabaseViewClient extends Activity {

    private EditText fullname;
    private EditText address_client;
    private EditText age_client;
    private EditText gender;
    private EditText contactNum_client;
    private EditText height_client;
    private EditText weight_client;
    private Button btnSaveCustomer;

    int current_client_id;
    String current_client_fullname;
    String current_client_address;
    String current_client_contactnum;
    String current_client_height;
    String current_client_weight;
    String current_client_gender;
    int current_client_age;
    String current_client_bmi, current_client_status;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addclient);

        fullname = (EditText) findViewById(R.id.fullname);
        gender = (EditText) findViewById(R.id.gender);
        age_client = (EditText) findViewById(R.id.age_client);
        address_client = (EditText) findViewById(R.id.address_client);
        contactNum_client = (EditText) findViewById(R.id.contactNum_client);
        height_client = (EditText) findViewById(R.id.height_client);
        weight_client = (EditText) findViewById(R.id.weight_client);

        btnSaveCustomer = (Button) findViewById(R.id.save);

        Bundle extras = getIntent().getExtras();
        current_client_id = extras.getInt("CLIENT_ID");
        current_client_fullname = extras.getString("FULLNAME");
        current_client_gender = extras.getString("GENDER");
        current_client_age = extras.getInt("AGE");
        current_client_address = extras.getString("ADDRESS");
        current_client_contactnum = extras.getString("CONTACT_NUM");
        current_client_height = extras.getString("HEIGHT");
        current_client_weight = extras.getString("WEIGHT");
        current_client_bmi = extras.getString("BMI");
        current_client_status = extras.getString("STATUS");

        fullname.setText(current_client_fullname);
        gender.setText(current_client_gender);
        address_client.setText(current_client_address);
        contactNum_client.setText(current_client_contactnum);
        height_client.setText(current_client_height);
        weight_client.setText(current_client_weight);

        fullname.setKeyListener(null);
        gender.setKeyListener(null);
        age_client.setKeyListener(null);
        address_client.setKeyListener(null);
        contactNum_client.setKeyListener(null);
        height_client.setKeyListener(null);
        weight_client.setKeyListener(null);

        btnSaveCustomer.setVisibility(View.GONE);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:24:00.520

HEIGHT + "**整数**不为空，"

而你正在做：插入高度= **53.0**

所以我想这可能是原因

UPD - 我看到你的重量是整数并且没有问题，所以应该有所不同:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:29:48.737

如果它在设备上而不是在模拟器上工作，它就可以工作。这可能不是您想听到的，但模拟器出了名的错误和不一致。我自己也有类似的问题，模拟器和设备的行为不同——“解决方案”是不使用模拟器。

本质上，如果您的问题是“在模拟器 X 上，但在设备 Y 上”，或者只是“为什么 X 在模拟器上不起作用”，那么模拟器很可能是问题所在。无论如何，解决特定于模拟器的错误是没有用的。

# java - Android，如何获取正确的UDP地址

> ID：15489703
> 
> 赞同：1
> 
> 时间：2013-03-19T00:54:24.663
> 
> 标签：java, android, networking, wifi

我的android手机上有一个multicastsocket，我正在尝试将一个设备连接到另一个设备，一个设备作为wifi热点托管，另一个客户端将只是连接，我如何找出客户端需要的端口听，接收数据包？

这是我的服务器代码

```
public class gameServer extends Thread{

/**
 * Sets up a server for Android applciation
 */

//Variables
private static final String TAG = "gameServer";
private int port = 50000;
private MulticastSocket socket = null;
private InetAddress address = null;
private ArrayList<gameObject> assets = new ArrayList();

//Client
private DatagramPacket packet;

public gameServer() throws IOException
{
    //Setup server
    try
    {
        socket = new MulticastSocket( port );
        Log.d(TAG, "Server started");
    }
    catch ( IOException e)
    {
        Log.d(TAG, "Error code 0004");
        e.printStackTrace();
    }
}

public void passClient( gameObject clientTemp )
{
    assets.add( clientTemp );
}

@Override
public void run()
{
    InetAddress temper = socket.getInetAddress();
    Log.d(TAG, "Server thread was started");
    System.out.println(temper);
    try {
        address = InetAddress.getByName("230.0.0.1");
    } catch (UnknownHostException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        socket.joinGroup(address);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    while( true )
    {
    //Send out data
    try {
    //Setup the data to send to clients
    byte[] buf = new byte[256];
    String dataToBeSent = "";

    for(int i = 0;i < assets.size(); i++)
    {
        dataToBeSent += assets.get(i).returnPosX() + ":" + assets.get(i).returnPosY();
    }

    buf = dataToBeSent.getBytes();

    // send it
    InetAddress group = InetAddress.getByName("230.0.0.1");
    DatagramPacket packet = new DatagramPacket(buf, buf.length, group, port);
    socket.send(packet);
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    }

    //Receive data
    byte[] buf = new byte[256];
    //Set the properties of the packet (DatagramPacket)
    packet = new DatagramPacket(buf, buf.length);
    //Receive the data
    try {
        socket.receive(packet);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //Conver the data to a string
    String  received = new String(packet.getData(), 0, packet.getLength());

    //Debug
    //Log.d(TAG, received);

    }
}
} 
```

客户端代码

```
public class gameClient extends Thread {

private static final String TAG = "gameClient";
private gameObject player;
private Context context;
private int port = 50000;
private MulticastSocket socket;
private InetAddress address = null;
private DatagramPacket packet = null;

public gameClient( gameObject temp )
{
    player = temp;
    try {
        socket = new MulticastSocket( port );
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public gameObject rtnObj()
{
    return player;
}

@Override
public void run()
{
    //Gather ip address
    try {
        address = InetAddress.getByName("192.168.1.1");
    } catch (UnknownHostException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    try {
        socket.joinGroup(address);
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    while( true )
    {
        //Send out data
        try {
            //Receive data
            byte[] buf = new byte[256];
            //Set the properties of the packet (DatagramPacket)
            packet = new DatagramPacket(buf, buf.length);
            //Receive the data
            try {
                socket.receive(packet);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //Conver the data to a string
            String  received = new String(packet.getData(), 0, packet.getLength());
            String[] posValues = received.split(":");

            player.setPosition(Integer.parseInt(posValues[0]), Integer.parseInt(posValues[1]));

            //Debug
            Log.d(TAG, received);

        }
        finally
        {

        }
    }

}

} 
```

# python - 准备好的列 Numpy/Matplotlib

> ID：15489708
> 
> 赞同：2
> 
> 时间：2013-03-19T00:54:45.097
> 
> 标签：python, numpy

我正在尝试使用读取 3 列，`numpy.loadtext`但出现错误：

```
ValueError: setting an array element with sequence. 
```

数据样本：

```
0.5     0   -22
0.5     0   -21
0.5     0   -22
0.5     0   -21 
```

**第 1 列**是从 0.5 增加到 6.5 的距离，每个距离有 15 个数据样本。

**第 2 列**是一个角度，每次距离返回 0.5 时增加 45 度。

**第 3 列**包含正在测量的数据（RSSI），它从大约 -20 减少到 -70。

我正在使用以下代码尝试将三列加载到单独的数组中：

```
import numpy as np

r, theta, RSSI, null = np.loadtxt("bot1.txt", unpack=True) 
```

我将在每个距离/角度组合处对采样的 RSSI 进行平均，然后我希望将数据绘制为`3D`极坐标图。不过，我还没有走到这一步。

`np.loadtxt`关于为什么不起作用的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:59:53.477

除了您将 3 列解压缩为四个变量这一事实之外，我认为没有任何问题。事实上，这适用于我的 NumPy 1.6.2，具有：

```
r, theta, RSSI = np.loadtxt("bot1.txt", unpack=True)  # 3 columns => 3 variables 
```

也可以在纯 Python 中做同样的事情，以查看是否有其他原因导致问题（如文件中的错误）：

```
import numpy

def loadtxt_unpack(file_name):
    '''
    Reads a file with exactly three numerical (real-valued) columns.
    Returns each column independently.  
    Lines with only spaces (or empty lines) are skipped.
    '''

    all_elmts = []

    with open(file_name) as input_file:
        for line in input_file:

            if line.isspace():  # Empty lines are skipped (there can be some at the end, etc.)
                continue

            try:
                values = map(float, line.split())
            except:
                print "Error at line:"
                print line
                raise

            assert len(values) == 3, "Wrong number of values in line: {}".format(line)

            all_elmts.append(values)

    return numpy.array(all_elmts).T

r, theta, RSSI = loadtxt_unpack('bot1.txt') 
```

如果文件出现问题（如果非空行不能解释为三个浮点数），则会打印有问题的行并引发异常。

# android - 模拟器没有启动我的项目

> ID：15489709
> 
> 赞同：-1
> 
> 时间：2013-03-19T00:54:46.393
> 
> 标签：android, emulation, manifest

```
[2013-03-19 08:52:49 - GEARS] Performing sync
[2013-03-19 08:52:50 - GEARS] Automatic Target Mode: launching new emulator with compatible AVD 'sdfs'
[2013-03-19 08:52:50 - GEARS] Launching a new emulator with Virtual Device 'sdfs'
[2013-03-19 08:52:54 - GEARS] ------------------------------
[2013-03-19 08:52:54 - GEARS] Android Launch!
[2013-03-19 08:52:54 - GEARS] adb is running normally.
[2013-03-19 08:52:54 - GEARS] No Launcher activity found!
[2013-03-19 08:52:54 - GEARS] The launch will only sync the application package on the device!
[2013-03-19 08:52:54 - GEARS] Performing sync
[2013-03-19 08:52:54 - GEARS] Automatic Target Mode: launching new emulator with compatible AVD 'sdfs'
[2013-03-19 08:52:54 - GEARS] Launching a new emulator with Virtual Device 'sdfs' 
```

我正在制作一个android应用程序，在编辑它后我遇到了这个问题。它没有错误，但也没有启动。我的清单或启动活动有问题吗？

**更新清单：**

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.bpi.gears.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.main" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      <activity
        android:name="com.bpi.gears.home"
        android:label="@string/title_activity_home" >
    </activity>
     <activity
        android:name="com.bpi.gears.profile"
        android:label="@string/title_activity_profile" >
    </activity>
</application>

</manifest> 
```

我仍然无法运行我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:15:00.190

您定义了两次相同的活动。删除它并尝试：

```
 <activity
    android:name="com.bpi.gears.MainActivity"
    android:label="@string/app_name" >
 </activity> 
```

你的清单中有这个：

```
<action android:name="android.intent.action.main" /> 
```

它需要是这样的：

```
<action android:name="android.intent.action.MAIN" /> 
```

你有`main`而不是`MAIN`

# dotnetopenauth - 工作推特登录变成 401

> ID：15489710
> 
> 赞同：1
> 
> 时间：2013-03-19T00:54:46.203
> 
> 标签：dotnetopenauth

多年来，我一直在我的网站上使用 twitter 登录。我今天随机决定测试它，发现它不起作用。

我正在使用 dotnetopenauth 3.4.7.11121 。我的网络配置中有 twitterConsumerKey 和 twitterConsumerSecret。关于首先在哪里进行故障排除的想法？

错误是“远程服务器返回错误：（401）未经授权。”

我的注释代码：

```
public static OutgoingWebResponse StartSignInWithTwitter(bool forceNewLogin)
    {
        var redirectParameters = new Dictionary<string, string>();
        if (forceNewLogin)
        {
            redirectParameters["force_login"] = "true";
        }
        Uri callback = MessagingUtilities.GetRequestUrlFromContext().StripQueryArgumentsWithPrefix("oauth_");
        var request = TwitterSignIn.PrepareRequestUserAuthorization(callback, null, redirectParameters);
        return TwitterSignIn.Channel.PrepareResponse(request);
    } 
```

例外：

```
 [WebException: The remote server returned an error: (401) Unauthorized.]
   System.Net.HttpWebRequest.GetResponse() +6442312
   DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request, DirectWebRequestOptions options) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\StandardWebRequestHandler.cs:126

[ProtocolException: Error occurred while sending a direct message or getting the response.]
   DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request, DirectWebRequestOptions options) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\StandardWebRequestHandler.cs:169
   DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\StandardWebRequestHandler.cs:100
   DotNetOpenAuth.Messaging.Channel.GetDirectResponse(HttpWebRequest webRequest) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:622
   DotNetOpenAuth.Messaging.Channel.RequestCore(IDirectedProtocolMessage request) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:644
   DotNetOpenAuth.Messaging.Channel.Request(IDirectedProtocolMessage requestMessage) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:467
   DotNetOpenAuth.Messaging.Channel.Request(IDirectedProtocolMessage requestMessage) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\Messaging\Channel.cs:447
   DotNetOpenAuth.OAuth.ConsumerBase.PrepareRequestUserAuthorization(Uri callback, IDictionary`2 requestParameters, IDictionary`2 redirectParameters, String& requestToken) in c:\BuildAgent\work\a02b428f36957bca\src\DotNetOpenAuth\OAuth\ConsumerBase.cs:221
   TwitterConsumer.StartSignInWithTwitter(Boolean forceNewLogin) in c:\TFSWebForms\www.nanaimo.ca\Nanaimo.Ca\openID\TwitterConsumer.cs:207
   openID_login.ibTwitter_Click(Object sender, EventArgs e) in c:\TFSWebForms\www.nanaimo.ca\Nanaimo.Ca\openID\login.aspx.cs:717
   System.Web.UI.WebControls.LinkButton.OnClick(EventArgs e) +116
   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +101
   System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +9643314
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

**更新** 我使用了提琴手，发现 dotnetopenauth 在从 http 重定向到 https 时没有转发身份验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:36:09.530

我发现了我的问题。Twitter 似乎已经开始强制使用 https 并且重定向停止工作。我更新了我的 twitter 消费者，将其从 http 更改为 https。我的消费者是从样品中取出的。

```
/// <summary>
        /// The description of Twitter's OAuth protocol URIs for use with actually reading/writing
        /// a user's private Twitter data.
        /// </summary>
        public static readonly ServiceProviderDescription ServiceDescription = new ServiceProviderDescription
        {
            RequestTokenEndpoint = new MessageReceivingEndpoint("https://twitter.com/oauth/request_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://twitter.com/oauth/authorize", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            AccessTokenEndpoint = new MessageReceivingEndpoint("https://twitter.com/oauth/access_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
        };

        /// <summary>
        /// The description of Twitter's OAuth protocol URIs for use with their "Sign in with Twitter" feature.
        /// </summary>
        public static readonly ServiceProviderDescription SignInWithTwitterServiceDescription = new ServiceProviderDescription
        {
            RequestTokenEndpoint = new MessageReceivingEndpoint("https://twitter.com/oauth/request_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://twitter.com/oauth/authenticate", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            AccessTokenEndpoint = new MessageReceivingEndpoint("https://twitter.com/oauth/access_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
        }; 
```

半相关：我的旧时间线 URL“ [http://twitter.com/statuses/user_timeline/14529984.xml](http://twitter.com/statuses/user_timeline/14529984.xml) ”更改为[https://api.twitter.com/1/statuses/user_timeline/14529984.xml](https://api.twitter.com/1/statuses/user_timeline/14529984.xml)在某些时候打破了另一个我的应用程序的功能。

# wordpress - Wordpress 修改页脚

> ID：15489713
> 
> 赞同：0
> 
> 时间：2013-03-19T00:55:10.877
> 
> 标签：wordpress, footer

**以下在 footer.php 中给出的示例代码：**

```
<footer id="test" role="role">

    <div id="test-generator" class="clearfix">
        <?php do_action( 'test_open' ); ?>

        <div class="copyright">
            blabla
        </div>

        <div class="powered">
            blabla
        </div>

        <?php do_action( 'test_close' ); ?>
    </div>

</footer>
</div>

<?php wp_footer(); ?> 
```

footer.php 是 wordpress 主题的一部分。我想在 div.class 版权中的“blabla”之后添加一些行。这应该在不修改footer.php 的情况下完成。有什么办法吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:25:51.607

您需要编写一个与“test_close”操作挂钩的函数，并将其包含在您的`functions.php`或[自定义函数插件](http://justinsilver.com/technology/wordpress-plugins/wordpress-plugin-custom-functions-php/)中：

```
add_action( 'test_close', 'my_function' );
function my_function(){
    echo "<br/>This is on the next line";
} 
```

# prolog - Prolog：显示列表中包含的列表

> ID：15489717
> 
> 赞同：0
> 
> 时间：2013-03-19T00:55:46.697
> 
> 标签：prolog

我目前在 Prolog 程序中定义了以下事实：

```
hobbies([jarrod, [gaming, running, boxing]]).
hobbies([james, [programming, gaming, drawing]]). 
```

什么查询可以显示 jarrod 的爱好列表？（即[游戏、跑步、拳击]）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:03:22.173

@false 是正确的：

`hobbies([jarrod, Hobbies]).`

它将爱好与所有事实统一起来，然后只获取列表中第一个元素是 jarrod 的爱好。然后它将爱好与爱好列表统一起来。

# javascript - .split() 中的正则表达式

> ID：15489726
> 
> 赞同：0
> 
> 时间：2013-03-19T00:56:32.420
> 
> 标签：javascript, regex

好的，我正在尝试找到一个 dom 模式：

```
 <div>
    <br>
    </div> 
```

从我`contenteditable div`这通常看起来像这样，有多个`spans`：

```
<div id="edit" contenteditable="true">
    <span>text</span>   
    <span>text</span> 
    //and more spans maybe 
     <div>
        <br>
     </div>
</div> 
```

我正在使用的代码行是：

```
return string.split(/\r\n?|\n|<div>(.*?)<br>(.*?)<\/div>,gis/); 
```

问题是这部分正则表达式`<div>(.*?)<br>(.*?)<\/div>,gis`.. 它从不匹配，即使模式存在。为清楚起见，`return`输入文本循环运行，由 my 上的输入更改事件触发`contenteditable div`。我需要在模式所在的每个位置分隔文本的数组版本。请不要图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:35:49.697

这是一个不涉及任何外部库且易于理解的解决方案。

首先，让我们抓取`edit`div 的内容

```
var $edit = document.getElementById("edit") 
```

现在，我们创建一个小函数来遍历我们的 DOM。有很多方法可以做到这一点，以下是 Douglas Crockford 在他的书“JavaScript : The Good Parts”iirc 中的做法：

```
function walkTheDOM(node, func) {
    func(node);
    node = node.firstChild;
    while (node) {
        walkTheDOM(node, func);
        node = node.nextSibling;
    }
} 
```

此函数遍历 dom 中的每个元素`node`并在其上运行`func`。

唯一剩下的就是在我们`$edit`之前的 div 上调用它。

```
walkTheDOM($edit, function (node) {
    if (node.nodeName.toLowerCase()==="div") { // we got a div
        if(node.innerHTML.trim() === "<br>"){ //whose inner html is <br>
           console.log("GOT",node);//print its name
        }
    }
}); 
```

这是[所有工作的小提琴](http://jsfiddle.net/hfKBz/)

完成所有查找工作后，您可以轻松地从其余数据中提取所需的任何文本/数据。[请参阅这个问题](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)，了解为什么使用正则表达式解析 HTML 通常是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:12:46.040

旗帜应该在外面：

```
return string.split(/\r\n?|\n|<div>(.*?)<br>(.*?)<\/div>/gis); 
```

我对正则表达式不是很好，但这对我来说也太贪婪了。我相信它会匹配任何包含 br 的 div，而不仅仅是那些只包含 br 的 div。如果它们是嵌套的，它应该匹配最外面的那个。正如评论中所建议的，我将通过遍历 DOM 来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:14:14.740

我看到了一些潜在的问题：（1）你希望你的标志（`gis`）在`//`标记之外。(2) 您第一次使用`|`需要括号来匹配`\r`,`\n`或`\r\n`。不过，您可能根本不需要这些。(3) 我不知道你为什么在这里有一个替代品：`\n|<div>`。(4)`s`不是我知道的标志。

这应该可以解决问题：

```
/<div>(.*?)<br>(.*?)<\/div>/gi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T01:16:00.550

1）正则表达式标志应该在关闭“/”之后

2) 使用 [\S\s]* 而不是 .*

3) "<text" 是错误的 html 代码，因为 "<" 应替换为 "<"

# 3d - 球体在使用纹理渲染时显示多边形

> ID：15489732
> 
> 赞同：1
> 
> 时间：2013-03-19T00:56:45.630
> 
> 标签：3d, xna, direct3d, phong

我一直在修补在 XNA/D3D (DX11) 中渲染台球。我编写了一个 Blinn-Phone 着色器，它使用 HLSL 中的 SamplerState 将我的台球纹理映射到我在 VisualStudio2012 中生成的球体 FBX。

我遇到了两个问题，这两个问题都在下图中最右边的球上最明显。

1）您可以看到纹理揭示了球体的底层多边形所在的位置。
2）在第三行的底部边缘，条纹下方只有一点白色，看起来非常锯齿或锯齿状。

纹理应用似乎在很大程度上超出了我的控制范围，因为顶点法线之间的插值是在管道内完成的，而不是由我完成的。

那么，我该如何改进呢？生成具有更多多边形的新球体？

我为抗锯齿做了以下工作，但坦率地说，如果有的话，它似乎做的很少：

```
 graphics.PreferMultiSampling = true;
        graphics.ApplyChanges();
        GraphicsDevice.PresentationParameters.MultiSampleCount = 4; 
```

这是我的纹理贴图状态，它的价值。任何想法将不胜感激。如果您需要更多信息，请告诉我！

```
sampler2D ColorSampler = sampler_state {
    Texture = <ColorTexture>;
    FILTER = MIN_MAG_MIP_LINEAR;
    AddressU = Wrap;
    AddressV = Wrap;
}; 
```

![台球渲染](../Images/36da1c7968bc0d5afe15cb2a3051d352.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:29:20.937

你有几个选择：

1.  镶嵌得更细。您所看到的是通过分段平面几何近似球体的错误，一种使其不那么明显的方法是将其分割成更小的部分。

2.  过滤您的纹理，使其从蓝色 -> 白色过渡不那么锐利（应用高斯模糊，然后使用模糊图像作为纹理）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T21:20:24.593

为了补充 Rahul 的回答，还有第三个更复杂的选项（尽管我肯定会选择简单地增加多边形的数量）：您提到您正在使用着色器 - 我假设您正在谈论像素着色器. 出现问题是因为纹理坐标在像素着色器中的三角形内线性插值：但由于您*知道*您正在处理球体，因此可以手动计算像素着色器中每个像素的 UV 坐标（使用标准 acos( z) 和 atan(y/x) 公式，其中 (x,y,z) 点是对象坐标中光栅化的当前点)。

使用它，即使您使用非常粗糙的镶嵌球体，您仍然应该能够获得相对平滑的纹理。

**编辑**：虽然我手头没有片段，但这是一个伪代码：

顶点着色器：
- 获取当前顶点的初始坐标（没有任何矩阵变换；我假设您的球体顶点以原点为中心）并将它们作为`varying vec3 P`.

像素着色器：
- `r = sqrt(P.x*P.x + P.y*P.y + P.z*P.z)`
- `theta = acos(P.z/r)`
- `phi = atan2(P.y/r, P.x/r)`
- `u = theta*2/pi ; v = phi/(2*pi)+0.5`
- 使用上面的 (u,v) 在 tex2D() 中对纹理进行采样

您需要确保这些 uv 坐标确实与您的纹理生成方式相对应，但如果是这样，您应该获得几乎无失真的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:30:17.700

为了解决这个问题，我使用了 3DSMax 而不是 VS2012 的内置模型生成器。我将球体的比例设置为 2"，并将分段数增加到 64。当导出到 FBX 时，我启用了“Turbo Smooth”而不知道它是什么。

最后，结果要好得多：

![在此处输入图像描述](../Images/b153126e0aa627800db845ea8f19f989.png)

# php - 旋转图像降低质量

> ID：15489733
> 
> 赞同：4
> 
> 时间：2013-03-19T00:57:28.703
> 
> 标签：php, gd

我有一个页面，用户可以在其中向左和向右旋转图像。

问题是当用户将图像旋转 4-5 次时，质量会大大降低！

我做错了吗？

```
 $image_source = imagecreatefromjpeg($path_u);
        $rotate = imagerotate($image_source, $angle, 0);
        imageinterlace($rotate, true); //this is to create progressive jpeg
        imagejpeg($rotate, $path_u, 100);
        imagedestroy($rotate); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:00:29.440

反复修改和重新压缩图像（尤其是在 JPEG 中，无论质量设置如何都是有损的）最终必然会导致乘法伪影。您最好保留原始图像，并且当请求旋转时，重新旋转原始图像，而不是每次都保存原始图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-05T17:11:36.703

如果我错了，请纠正我，但在 2014 年，我们可以旋转 jpeg 图片，不是没有质量损失，而是认真地最小化它。

Imagejpeg 方法有一个“质量”参数，有助于设置所需的质量保存。100 的价值是完美的。

我尝试多次旋转同一张图像，但质量损失对人眼来说并不是真正可见的。

这是代码。

```
 header("Content-type: image/jpeg");
    $source = imagecreatefromjpeg($pictureUrl);
    $rotate = imagerotate($source, $degrees, 0);
    imagejpeg($rotate, $pictureUrl, 100);
    imagedestroy($source);
    imagedestroy($rotate); 
```

# html - 将悬停效果更改为css3时更改图像的位置

> ID：15489734
> 
> 赞同：0
> 
> 时间：2013-03-19T00:57:40.350
> 
> 标签：html, css, button

我有一个使用图像作为按钮的 css 文件，当用户悬停按钮时，图像被重新分配到其他位置，例如：

```
button.btn,
input[type="submit"].btn {
  *padding-top: 2px;
  *padding-bottom: 2px;
    background: url(http://www.eurekavi.com/ci_crud_1/assets/grocery_crud/themes/flexigrid/css/images/btn_cancelar.png) no-repeat;
    border: none;
    cursor: pointer;
    display: block;
    height: 30px;
    text-indent: -3000px;
    width: 80px;

}

button.btn,
input[type="submit"].btn:hover  {
background: url(http://www.eurekavi.com/ci_crud_1/assets/grocery_crud/themes/flexigrid/css/images/btn_cancelar.png) no-repeat 0 -30px;
    } 
```

在html中我添加代码：

```
<div class="form-button-box">
    <input type="submit" value="" class="btn btn-large" />
</div> 
```

完成此操作后，将出现一个按钮，其中包含图像具有的文本。它很好用。

但是，如果文本是一个变量，我不能这样做，我将不得不为不同的文本制作不同的图像......这不好。

我想生成一个输入按钮，将按钮的文本作为属性传递并具有相同的效果，我有两个问题：

1.  如何在悬停时生成正确的颜色并立即获得其他颜色。（你知道任何好的生成器吗）我的基色是`#7d7d7d`和最终的`#272727`

2.  如何避免我的按钮出现奇怪的效果，当悬停时它就像动画或滑动而不是马上做，请看看我的小提琴

[你能帮我完成这个小提琴中显示](http://jsfiddle.net/ewu6M/)的最后一个按钮（没有那种滑动效果，我的意思是在悬停时立即改变颜色）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:07:21.863

您需要使用 CSS 制作所有内容，而不是使用图像，因此您不必为不同的文本制作一堆图像。查看[此站点](http://www.colorzilla.com/gradient-editor/)以用于快速生成渐变代码。否则，您的按钮相当简单，并且可以使用 CSS 轻松制作。如果我错过了你的问题的重点，请告诉我。

# reflection - 如何从动态发出的程序集中获得有意义的异常？

> ID：15489745
> 
> 赞同：3
> 
> 时间：2013-03-19T00:59:20.427
> 
> 标签：reflection, f#

尝试调试发出错误，是否有一种简单的方法可以找到有关由发出的代码引起的异常 c 的更多信息？

例如，使用以下代码：

```
let dynamicAssembly =
    let asmName = new AssemblyName("MyAsm")
    let asmBuilder = AssemblyBuilder.DefineDynamicAssembly(asmName, AssemblyBuilderAccess.Run)
    let moduleBuilder = asmBuilder.DefineDynamicModule("MyModule")
    let typeBuilder = moduleBuilder.DefineType("MyDynamicType")
    let methodBuilder = 
        let build = typeBuilder.DefineMethod("MyMethod", MethodAttributes.Public, 
                                                CallingConventions.Standard,
                                                typeof<Int32>,
                                                [|typeof<Int32>; typeof<Int32>|])
        let ilGen = build.GetILGenerator()
        ilGen.Emit(OpCodes.Ldarg_0)
        ilGen.Emit(OpCodes.Ldarg_1)
        ilGen.Emit(OpCodes.Add)
        ilGen.Emit(OpCodes.Ret)

    typeBuilder.CreateType() |> ignore
    asmBuilder

let myType = dynamicAssembly.GetType("MyDynamicType")
let myObj = Activator.CreateInstance(myType)
myObj.GetType().GetMethod("MyMethod").Invoke(myObj, [|2; 3|])  |> ignore 
```

当我尝试在倒数第二行调用时，我得到“调用的目标已引发异常`Invoke`。发出代码一直是有问题的，但如果我能弄清楚如何获得有意义的异常，它可能会不那么痛苦. 想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T01:08:48.690

获得无用的异常是生成 IL 代码的一部分乐趣。当您收到“调用的目标已引发异常”时，您可以查看该`InnerException`属性，看看是否可以在那里获得更有用的东西：

```
try
  myObj.GetType().GetMethod("MyMethod").Invoke(myObj, [|2; 3|])  |> printfn "%A"
with 
  e -> printfn "%A" e.InnerException 
```

在这种情况下，内部异常说：

> System.InvalidProgramException：公共语言运行时检测到无效程序。

这仅仅意味着您生成的 IL 是错误的 - 恐怕您不会得到更好的错误消息，但您可以将生成的程序集保存到磁盘并运行`peverify`或 Reflector/ILSpy 以查看它们将如何解释生成的代码。这意味着您需要添加另一个代码路径来生成正确的（非动态）程序集，但我认为这是值得的——您需要经常调试生成的 IL...

在这种情况下，问题在于`Ldarg_0`引用`this`（而不是第一个参数），因此您需要生成：

```
ilGen.Emit(OpCodes.Ldarg_1)
ilGen.Emit(OpCodes.Ldarg_2)
ilGen.Emit(OpCodes.Add)
ilGen.Emit(OpCodes.Ret) 
```

# python - 在给定字典中的值的情况下创建键列表

> ID：15489749
> 
> 赞同：1
> 
> 时间：2013-03-19T00:59:50.860
> 
> 标签：python

我有一本看起来像这样的字典：

```
child_parent={}
child_parent[1]=0
child_parent[2]=0
child_parent[3]=2
child_parent[4]=2 
```

如果给定 0，我如何在值为 0 的列表中找到所有键，即 pythonic？

0 的最终结果是 [1,2] 和 2 [3,4]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:01:33.643

对字典使用列表理解`items`：

```
[k for k, v in child_parent.items() if v == 0] 
```

```
>>> [k for k, v in child_parent.items() if v == 0]
 [1, 2]

>>> [k for k, v in child_parent.items() if v == 2]
 [3, 4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:02:15.493

您可以使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
In [62]: [k for k,v in child_parent.iteritems() if v==0]
Out[62]: [1, 2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T01:02:48.347

```
def find_keys(d, x):
  return [key for key in d if d[key] == x] 
```

这会遍历字典中的每个键，`d`并从与 value 对应的所有键中创建一个列表`x`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T01:15:55.963

如果您只这样做一次，请在其他答案中使用列表理解方法。

如果您多次这样做，请创建一个按值索引键的新字典：

```
from collections import dictdefault

def valueindex(d):
    nd = dictdefault(list)
    for k,v in d.iteritems():
        nd[v].append(k)
    return nd

parent_child = valueindex(childparent)
assert parent_child[0] == [1,2]
assert parent_child[1] == [3,4] 
```

# tsql - 计算不同年份的总计

> ID：15489752
> 
> 赞同：0
> 
> 时间：2013-03-19T00:59:58.553
> 
> 标签：tsql, reporting-services, ssrs-2008

我想知道如何根据 SSRS 中设置的年份参数计算某个计数的总计。When a certian year is selected the previous counts from all the previous years would add up with the current count. 在我在存储过程中使用@year 参数并且它在 SSRS 中工作之前，但这次我想尝试对其进行硬编码，然后在 SSRS 中只有一个 year 参数。

这是我目前正在使用的代码示例：

```
select
sum(MITotal.Count) as 'Yearly Count',
year(c_date) as 'year'

from 
(select 
    count(*) as Count,
    pol1.C_STATE,
    month(pol1.c_Date) as Month,
    year(pol1.c_ate) as Year,
    left(datename(mm, C_Date), 3) + ' ' + cast(year(C_Date) as char(4)) as MonthYear
    from contract pol1
    where 
        pol1.C_STATE='wa' 
    group by pol1.C_STATE,month(pol1.c_Date),year(pol1.c_Date), left(datename(mm, C_Date), 3) + ' ' + cast(year(C_Date) as char(4))) MITotal
    group by MITotal.Year 
```

这将返回：

```
2   2009
5   2010
6   2011 
```

我将如何添加到代码中，以便无论何时，我选择说 2010 作为参数年份，它会添加 5+2 或 2011，它会添加 5+6+2 作为总计。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:59:09.387

根据 year 参数对 CASE 语句求和，如下所示：

```
SUM(CASE WHEN Year(c_Date) <= @Year THEN MITotal.Count END) AS 'Historical Total' 
```

# node.js - 为 Mongoose 查询开发的工作流程

> ID：15489756
> 
> 赞同：1
> 
> 时间：2013-03-19T01:00:34.577
> 
> 标签：node.js, mongoose

有什么好的方法可以减少我在迭代开发新的 Mongoose 查询上所花费的时间？

现在，我的工作流程包括处理查询、等待我的 Node 应用程序重新启动、调用我正在开发的 API 以及检查结果。调整查询的开销很大。

有什么改进这个过程的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:08:42.233

要么使用像[mongooser](https://github.com/aheckmann/mongooser)（一个 mongoose repl）这样的东西，要么只是自己打开节点 repl，然后用你的模式/模型手动设置 mongoose——这样玩。

# c++ - 如何在 boost::any 地图中存储值

ID：15489758

赞同：0

时间：2013-03-19T01:00:38.897

标签：c++

# firebug - How to get Total Page Load time from Har File

> ID：15489764
> 
> 赞同：2
> 
> 时间：2013-03-19T01:01:28.127
> 
> 标签：firebug, har

I am using HarLib to read Har Files from within my Java project. The example provided on the site helps to get the time taken to load each request. How do I get the total Load time for a Web Page. The OnLoad time will not help me as I have XHR requests happening even after the content load. How do I get the time shown in screenshot when I look at Firebug from within the HarLib (The one marked in red in the image):

![enter image description here](../Images/5c49d02f3130e522e1bac204ae3b402f.png)

# javascript - 如何在 Capybara 验收测试中存根 JavaScript 延迟？

> ID：15489767
> 
> 赞同：6
> 
> 时间：2013-03-19T01:01:56.987
> 
> 标签：javascript, jquery, ruby-on-rails, rspec, capybara

我的 Rails 应用程序包含一个 JavaScript 模式，它会在用户单击链接 45 秒后弹出。结果，我的验收测试，过去没有延迟就通过了，现在失败了。

我最初尝试在 Capybara 验收测试中使用 Timecop gem 来快进时间，但这没有用。然而，当我添加一个 sleep(45) 时，它确实有效。显然，我不能在我的规范中使用 sleep(45) 3 次，但很高兴知道什么是有效的，这样我就可以用更快的方法接近它。

我从实验中得出的结论是，Ruby 跟踪时间，Javascript 跟踪时间，Timecop 快速转发 Ruby 时间，而不是 Javascript 时间。有没有办法在我的 Capybara 测试中快进 45 秒，以便我的 Javascript 事件触发？

这是导致我的测试失败的函数：

```
 $('.votable').one('click', '.vote', function() {
          $('.post-vote').
            delay(45000).
            queue(function() {
                $(this).dialog('open')
            });
        }); 
```

同样，当延迟被移除时，我的规格通过了，但我需要延迟。我怎样才能在我的 Capybara 测试中解决这个问题？还是我需要用 Jasmine 测试该方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:54:37.003

最后，这个问题最简单的解决方案就是把我的.js文件变成.js.erb文件，然后使用分支只包含非测试环境中的延迟。不理想，但所有其他解决方案都涉及更多，我绝对不愿意为了让我的视图代码看起来漂亮而将测试速度减慢 45 秒。

最终代码如下所示：

```
$('.votable').one('click'). '.vote', function() {
  $('.post-vote').
   <% unless Rails.env.test? %>
     delay(45000).
   <% end %>
   queue(function() {
     $(this).dialog('open')
    });
 }); 
```

# c# - 使用存储过程插入非常慢

> ID：15489769
> 
> 赞同：0
> 
> 时间：2013-03-19T01:02:13.920
> 
> 标签：c#, sql

我正在使用`DataAdapter`Batch 将批量大小 = 1000 插入到多对多表中

我有 3 张桌子

1.  学校（ID、姓名）
2.  学生（身份证，姓名）
3.  SCHOOL_STUDENT (SCHOOL_ID, STUDENT_ID)

我正在尝试向表 SCHOOL_STUDENT 插入大约 700K 行，但速度很慢我将学校名称和学生姓名传递给存储过程

```
 (
@schoolName varchar(100),
@studentName varchar(50)
)

AS
BEGIN transaction

    declare @scoolId int,@studentId int

    set @scoolId = (select ID from SCHOOL where [SCHOOL_NAME] = @schoolName)
    set @studentId = (select ID from STUDENT where STUDENT_NAME = @studentName)

    INSERT INTO [dbo].SCHOOL_STUDENT
                   (SCHOOL_ID,STUDENT_ID)
             VALUES
                   (@scoolId,@studentId)

commit transaction 
```

但这需要大约 1 小时才能运行。我怎样才能加快速度，因为我事先也不知道`school_Id`，`student_Id`所以我必须始终在存储过程中选择它们。（有没有更好的办法）

应用程序的流程是首先插入所有学生，然后插入所有学校，然后将它们链接到表 school_student 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:24:35.180

为了效率/影响和努力，也许尝试：

1-检查您正在阅读的表格上的索引。确保每个表的 ID 和名称列都有索引。

2-重构您的存储过程，如下所示：

```
 INSERT INTO dbo.School_Student(School_ID, Student_ID)
     SELECT SC.ID, ST.ID
     FROM dbo.School AS SC
     JOIN dbo.Student AS ST ON ST.Student_Name = @studentName
                            AND SC.School_Name = @schoolName; 
```

3-从proc中删除事务

4-在调用此过程之前预加载所有学校 ID 和学生 ID。循环并传递 ID。

5- 调查 SQL 大容量复制操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:24:02.290

您应该在 Student 和 School 表上创建索引以优化查找。我还将您的数据暂存到一个表中，并使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)C# 上传它。存储过程可以转换数据并插入键。

```
CREATE PROCEDURE spSchoolStudentTransform
AS
BEGIN

    INSERT INTO [dbo].[School_Student](School_Id, Student_Id)
    SELECT School.Id, Student.Id FROM SchoolStudent ss
    JOIN School
    ON School.School_Name = ss.SchoolName
    JOIN Student
    ON Student.Student_Name = ss.StudentName;

    TRUNCATE TABLE SchoolStudent;
END
GO

CREATE TABLE SchoolStudent
(
     Id INT IDENTITY PRIMARY KEY
    ,StudentName VARCHAR(50) NOT NULL
    ,SchoolName VARCHAR(100) NOT NULL
);
GO

CREATE NONCLUSTERED INDEX ixStudentIdStudentName
ON Student (Id, Student_Name);
GO

CREATE NONCLUSTERED INDEX ixSchoolIdSchoolName
ON School (Id, School_Name);
GO

using (var connection = new SqlConnection(connectionString))
{
    using(var sqlBulkCopy = new SqlBulkCopy(connection))
    {
        sqlBulkCopy.DestinationTableName = "SchoolStudent";
        sqlBulkCopy.EnableStreaming = true;
        sqlBulkCopy.BatchSize = 1000;

        sqlBulkCopy.WriteToServer(dataReader);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:23:09.670

该程序本身非常好。问题是你调用它 1000 次，你会得到性能成本，因为它会在每次调用时连接断开。

修改过程以接受 xml 或分隔语法，每个批次可以传递大约 100 到 500 个。

首先将其存储到临时表（虚拟，但物理），如果在批量插入期间发生某些事情，它不会损害事务/主表。存储学校名和学生名，插入时不要做任何选择。

最后，执行一个存储过程，它将所有记录从临时表插入到事务/主表。使用具有较大记录的从表中选择比执行 1 比 1 选择执行得更好。

不要忘记在从登台插入到事务/主表之前重新验证数据，检查空（未找到）数据、重复数据、由于字符串分隔符等导致的损坏数据等。

最后，正如您在评论中提到的，做一些索引和性能调整以获得更好的性能。如果处理得当，它应该会给你不到 10 分钟的执行时间。

# c++ - 使用 lambda 错误进行 C++ 排序

> ID：15489779
> 
> 赞同：2
> 
> 时间：2013-03-19T01:03:29.000
> 
> 标签：c++, lambda

我正在尝试使用 lambda 对数组进行排序以在比较函数中使用另一个数组。在一个更大的函数中，我有这个代码：

```
std::sort(arr.begin(), arr.end(),[] (int& a, int& b)
{       
    return (*i)[a] < (*i)[b];
}); 
```

我在包含函数中收到以下错误：

```
mcmc.cpp:139: error: expected primary-expression before ‘[’ token
mcmc.cpp:139: error: expected primary-expression before ‘]’ token
mcmc.cpp:139: error: expected primary-expression before ‘int’
mcmc.cpp:139: error: expected primary-expression before ‘int’ 
```

编译时，我也包括了 -std=c++0x 选项。

我对正在发生的事情感到困惑。出于某种原因，它似乎不认为我的语法是有效的。为了以防万一，我做了一个 yum 更新，但它似乎仍然无法识别 lambdas 的使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T01:13:07.970

C++11 lambda 至少需要 GCC/G++ 4.5，它们不适用于 G++ 4.4。

请参阅[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)（或者，因为它现在已经关闭，所以[缓存版本](https://webcache.googleusercontent.com/search?q=cache:hTEK2-yRRyUJ:gcc.gnu.org/projects/cxx0x.html%20&cd=1&hl=fr&ct=clnk)）。

# g++ - Debian 上的 g++：一个更新的编译器

> ID：15489783
> 
> 赞同：0
> 
> 时间：2013-03-19T01:03:46.363
> 
> 标签：g++, debian

我刚刚安装了 Debian 6.0.7，并注意到 gcc 4.4 附带了“稳定”分支。我希望能够使用更新的编译器而无需完全切换到测试；有什么可以让这更容易吗？我已经尝试编译 gcc 几次，但对我来说从来没有这么顺利过。主要是我想要代码生成改进，以及我读到的 -Og 选项，它应用了不会干扰代码调试的优化。任何帮助，将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:30:29.140

您可以将 apt 配置为从测试中安装选择的包，同时让系统的其余部分保持稳定，并且 g++ 应该是您可以轻松处理的东西，因为 g++-4.7 是一个单独的包，可以与旧版本同时安装.

简而言之，添加：

```
Package: *
Pin: release a=testing
Pin-Priority: 100 
```

到`/etc/apt/preferences`or 中的一个文件`/etc/apt/preferences.d/`，以确保默认情况下不安装软件包，然后将 wheezy 存储库添加到您的`sources.list`文件中：

```
deb     http://ftp.us.debian.org/debian testing main
deb-src http://ftp.us.debian.org/debian testing main 
```

之后`apt-get update`你应该能够安装g++-4.7。希望它不会引入太多其他软件包。然后，您将能够使用 g++-4.7 作为编译器（无需更改默认 g++）。

# angularjs - Angularjs指令编译

> ID：15489794
> 
> 赞同：0
> 
> 时间：2013-03-19T01:05:21.187
> 
> 标签：angularjs, angularjs-directive

我的指令没有正确插入 html。我想我需要在插入 html 之前对其进行编译，但我不确定如何执行此操作。我的模板第一次工作正常，但是当它被替换时，ng-click() 事件没有注册，并且 html 响应为正常的锚标记。

如果有人可以帮助提供最佳实践，那么可能还有一种更简洁的方式来编写它，这将不胜感激。显然，我只是在替换的注销文本上使用 openSigninDialog() 事件来进行测试。

指示

```
app.directive('navbarright', function() {
  return {
    restrict: "A",
    template: "<li><a href='#'>New</a></li>"+
          "<li><a href='' ng-click='openSigninDialog()'>Sign In</a></li>",
    link: function (scope, elem, attrs) {
      scope.$on('event:auth-signinConfirmed', function() {
      elem.html("<li><a href='#'>New</a></li>"+
        "<li><a href='' ng-click='openSigninDialog()'>Sign Out</a></li>");
      });
    }
  }
}); 
```

控制器

```
app.controller('NavbarRightCtrl', function($scope) {
  console.log('signin event occuring');
  $rootScope.$broadcast('event:auth-signinConfirmed');
}); 
```

HTML

```
 <ul class="nav pull-right" ng-controller="NavbarRightCtrl" navbarright>  
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:09:00.333

我想错了。我最终使用了 angularjs 内置的 ng-show 和 ng-hide 指令。

HTML

```
 <ul class="nav pull-right" ng-controller="NavbarRightCtrl">  
      <li><a href="#">New</a></li>
      <li ng-hide="signedIn"><a href="" ng-click="signin()" ng-init="load()">Sign In</a></li>
      <li ng-show="signedIn">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Bob <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="" ng-click="signout()">Sign Out</a></li>
        </ul>
      </li>
    </ul> 
```

Javascript

```
app.controller('NavbarRightCtrl', function($scope, $rootScope) {

$scope.signin = function(){
  console.log('signin event');
  $rootScope.signedIn = true;
});

$scope.signout = function () {
  console.log('signing out');
  $rootScope.signedIn = false;
};

$scope.load = function () {
  $rootScope.signedIn = false;
};

}); 
```

# jquery - 如何放置父div的附加动画

> ID：15489798
> 
> 赞同：0
> 
> 时间：2013-03-19T01:05:49.683
> 
> 标签：jquery, html, css

当您悬停每个导航链接时，我有一个带有过渡效果的 jquery 下拉菜单。我的问题是，如果您可以查看我的演示，您会注意到 div 中的文本被赋予了过渡效果，并且非常迅速地弹出。我将如何对我现在拥有的 div 的孩子产生额外的影响？

[http://jsfiddle.net/MwChT/125/](http://jsfiddle.net/MwChT/125/)

```
demo 
```

# android - 如何在 pushwoosh 中将注册作为首选项进行管理？

> ID：15489799
> 
> 赞同：0
> 
> 时间：2013-03-19T01:05:54.600
> 
> 标签：android, push-notification, cordova, google-cloud-messaging

我遵循了[官方指南](http://www.pushwoosh.com/programming-push-notification/android-gcm-push-notifications-guide/)，但发现它只是一遍又一遍地注册您的应用程序以获取通知，并且用户无法选择退出。似乎没有办法判断设备是否已注册，因为该`getRemoteNotificationStatus`方法在插件的 Android 版本中不可用。我怎样才能得到这些信息？

我想我会将它作为首选项保存在应用程序中，这样我就不必查询任何外部内容，但最新版本的 Android 允许您禁用应用程序外部的通知。这会与我单独的应用内偏好取消注册/冲突吗？

到目前为止我的代码（我正在测试）：

```
(function() {
    var pushPrefApply = function() {
        app.pushPref(function(pushPref) {
            console.log('pushPref', pushPref);
            if (!pushPref) {
                window.plugins.pushNotification.unregisterDevice(
                    function() {
                        console.log('unreg ok', arguments);
                    },
                    function() {
                        console.log('unreg fail', arguments);
                    }
                );
                return;
            }
            window.plugins.pushNotification.registerDevice(
                {
                    projectid: '123456789012',
                    appid : 'F0000-BAAAA'
                },
                function(pushToken) {
                    console.log('reg ok', arguments);
                },
                function(status) {
                    console.log('reg fail', arguments);
                }
            );
        });
    };

    //UI code for changing push preference goes here, calls pushPrefApply

    $document.on('appready', function() {
        pushPrefApply();
    });
})(); 
```

`$document`不是错字，它已经定义好了。`app.pushPref`是偏好获取函数。`window.plugins.pushNotification.onDeviceReady`已在其他地方完成`deviceready`。`appready`是一个综合事件，我在两个事件之后`deviceready`触发，另一个事件由本地数据存储库触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:47:13.010

你在做正确的事。

不幸的是，这是唯一的选择，因为 Android 没有为您提供 API 来获取推送通知的启用/禁用状态。而且这个设置隐藏在选项中是如此之深，我真的怀疑用户是否能够找到它。

无论如何，将注册信息保存在本地是目前唯一的选择。

# mysql - SQL 语句会在 OR 语句中的第一个匹配项上停止执行吗？

> ID：15489801
> 
> 赞同：7
> 
> 时间：2013-03-19T01:05:59.493
> 
> 标签：mysql, sql

我试图了解以下语句将如何在多条记录上执行。

```
SELECT * FROM test 
WHERE product='$product' 
AND (summary LIKE '%$keywords%' OR exp LIKE '%$keywords%')  
ORDER BY `$order_by` DESC; 
```

我对 SQL 很陌生，所以这就是我想知道的：

**1.**当你执行一个 SQL 查询时，我相信它会查看表中的每一行。当找到匹配项时，它会将结果临时存储在哪里，直到可以返回所有结果？

**2.**在上面的例子中，假设我们正在查看表中的单行并且有一个匹配项`summary`。`OR exp LIKE '%$keywords%'`当已经找到匹配时，查询会继续执行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:15:26.983

1.  由数据库引擎决定如何存储临时结果。每个数据库引擎实现可能不同。客户端得到的是由行组成的结果集（如果查询完全产生结果）

2.  不，如果 OR 中的第一个条件评估为真，它不会检查第二个条件（无论如何，这样做有什么意义，你已经知道最终结果）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:16:32.467

1.  在内存中，取决于 DBMS。
2.  当它找到匹配项时，它可能不会继续。一切都取决于特定的 SQL 实现，但总的来说，继续寻找匹配项效率不高，所以我会说可能不会。

# c# - 如何 StackTrace 调用函数？

> ID：15489808
> 
> 赞同：0
> 
> 时间：2013-03-19T01:07:01.633
> 
> 标签：c#, logging, stack-trace

```
 static void WriteLog(String FullPath, String Log)
    {
        try
        {
            if (File.Exists(FullPath))
            {
                FileInfo Fi = new FileInfo(FullPath);
                if (Fi.Length > MaxFileSize * 1024)
                {
                    if (File.Exists(FullPath + ".Old"))
                    {
                        File.Delete(FullPath + ".Old");
                    }
                    File.Move(FullPath, FullPath + ".Old");
                }
            }
            string currentFile = System.IO.Path.GetFileName(new System.Diagnostics.StackTrace(true).GetFrame(0).GetFileName());
            int currentLine = new System.Diagnostics.StackTrace(true).GetFrame(0).GetFileLineNumber();
            File.AppendAllText(@FullPath, "[ " + MyTime.Now.ToString("dd/MM/yy HH:mm:ss") + " ] " + currentFile + "," + currentLine + "," + Log.Replace("\r\n", "\r\n                      ") + "\r\n");
        }
        catch (Exception ex)
        {
            utilities.Log(ex.ToString());
        }
    } 
```

嗨，我正在我的程序中编写一个日志记录实用程序。日志的一部分，我想在使用堆栈跟踪的程序执行中显示当前文件名和当前行号。但是，然后以下代码行将返回日志实用程序的当前文件和行。

```
string currentFile = System.IO.Path.GetFileName(new System.Diagnostics.StackTrace(true).GetFrame(0).GetFileName());
int currentLine = new System.Diagnostics.StackTrace(true).GetFrame(0).GetFileLineNumber(); 
```

如何让堆栈跟踪返回调用函数的当前文件和行号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:56:14.070

通过在方法属性上使用[Caller Info](http://msdn.microsoft.com/en-us/library/hh534540.aspx)属性，您可以获得文件名、成员/方法名和行号。

```
public void TraceMessage(string message,
        [CallerMemberName] string memberName = "",
        [CallerFilePath] string sourceFilePath = "",
        [CallerLineNumber] int sourceLineNumber = 0){
    Trace.WriteLine("message: " + message);
    Trace.WriteLine("member name: " + memberName);
    Trace.WriteLine("source file path: " + sourceFilePath);
    Trace.WriteLine("source line number: " + sourceLineNumber);
} 
```

请注意，如果您没有加载程序集的调试符号，则此信息可能不可用。（为每个 .dll 文件匹配 .pdb 文件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:31:04.740

您需要在当前帧之前获取帧：

```
var previousFrame = new System.Diagnostics.StackTrace(true).GetFrame(1); 
```

# jquery - x-editable, bootstrap 和 symfony

> ID：15489810
> 
> 赞同：0
> 
> 时间：2013-03-19T01:07:20.857
> 
> 标签：jquery, ajax, symfony

我正在尝试让 x-editable、bootstrap 和 symfony 工作。

我能够让它有点兴奋，但我有一段时间了解如何将我的 json 响应放入下拉菜单中。我对整个 jquery、bootstrap 和 symfony 世界都很陌生，所以对我来说放轻松:)

这是我将下拉元素加载到的内联元素：

```
<a href="#" id="myElement">Admin</a> 
```

然后我用这段代码触发它：

```
$('#myElement').editable({
        type: 'select',
        value: 2,
        source: '{{ path('product_category_groups') }}'
    }); 
```

这是我从 ajax 得到的响应：

```
{"responseCode":200,"options":[{"value":0,"text":"Guest"},{"value":1,"text":"Service"},{"value":2,"text":"Customer"},{"value":3,"text":"Operator"},{"value":4,"text":"Support"},{"value":5,"text":"Guest"}]} 
```

当 json 响应返回浏览器时，这就是我的下拉框的样子（附图片）。![在此处输入图像描述](../Images/951855834c4a879aed7455242f4a1653.png)

我无法通过 x-editable 上的文档弄清楚世界上该做什么。任何地方都没有工作示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:04:36.267

您将对服务端点进行自己的 ajax 调用，然后将选项列表返回给 source 参数，如下所示：

```
$('#myElement').editable({
        type: 'select',
        value: 2,
        source: function(){
                 var obj; 
                $.get({
                 url: '{{ path('product_category_groups') }}',
                 success: function(resp){obj = resp.options;},
                 async: false,
                 dataType: 'json'
                 });
                 return obj;
        }
    }); 
```

# java - 突出显示 JTable 的列标题

> ID：15489818
> 
> 赞同：6
> 
> 时间：2013-03-19T01:07:47.250
> 
> 标签：java, swing, jtable, highlight, jtableheader

我目前正在构建一个小 JTable，并希望在选择一个单元格时突出显示列标题（和行标题 - 行标题部分实际上正在工作），以便更容易找到与该单元格相关的名称。这是一张图片：

![在此处输入图像描述](../Images/f87b1f01d84e94a137f9771f4a38474a.png)

我已经尝试使用以下方法切换标题的渲染器：

```
table.getTableHeader().setDefaultRenderer(new ColumnHeaderRenderer()); 
```

但是只有当我点击标题时才会调用它并且总是说 isSelected 是假的。

这是我用于行名称的代码，包括渲染器内的突出显示 - 代码不是我的，我只是稍微修改了一下：

```
/*
 *  Use a JTable as a renderer for row numbers of a given main table.
 *  This table must be added to the row header of the scrollpane that
 *  contains the main table.
 */
public class RowNameTable extends JTable
        implements ChangeListener, PropertyChangeListener {

    private JTable main;

    public RowNameTable(JTable table) {
        main = table;
        main.addPropertyChangeListener(this);

        setFocusable(false);
        setAutoCreateColumnsFromModel(false);
        setModel(main.getModel());
        setSelectionModel(main.getSelectionModel());

        TableColumn column = new TableColumn();
        column.setHeaderValue(" ");
        addColumn(column);
        column.setCellRenderer(new RowNameRenderer(main));

        getColumnModel().getColumn(0).setPreferredWidth(table.getColumnModel().getColumn(0).getPreferredWidth());
        setPreferredScrollableViewportSize(getPreferredSize());
    }

    @Override
    public void addNotify() {
        super.addNotify();

        Component c = getParent();

        //  Keep scrolling of the row table in sync with the main table.

        if (c instanceof JViewport) {
            JViewport viewport = (JViewport) c;
            viewport.addChangeListener(this);
        }
    }

    /*
     *  Delegate method to main table
     */
    @Override
    public int getRowCount() {
        return main.getRowCount();
    }

    @Override
    public int getRowHeight(int row) {
        return main.getRowHeight(row);
    }

    /*
     *  This table does not use any data from the main TableModel,
     *  so just return a value based on the row parameter.
     */
    @Override
    public Object getValueAt(int row, int column) {
        return Integer.toString(row + 1);
    }

    /*
     *  Don't edit data in the main TableModel by mistake
     */
    @Override
    public boolean isCellEditable(int row, int column) {
        return false;
    }
//
//  Implement the ChangeListener
//

    public void stateChanged(ChangeEvent e) {
        //  Keep the scrolling of the row table in sync with main table

        JViewport viewport = (JViewport) e.getSource();
        JScrollPane scrollPane = (JScrollPane) viewport.getParent();
        scrollPane.getVerticalScrollBar().setValue(viewport.getViewPosition().y);
    }
//
//  Implement the PropertyChangeListener
//

    public void propertyChange(PropertyChangeEvent e) {
        //  Keep the row table in sync with the main table

        if ("selectionModel".equals(e.getPropertyName())) {
            setSelectionModel(main.getSelectionModel());
        }

        if ("model".equals(e.getPropertyName())) {
            setModel(main.getModel());
        }
    }

    /*
     *  Borrow the renderer from JDK1.4.2 table header
     */
    private static class RowNameRenderer extends DefaultTableCellRenderer {

        private JTable main;

        public RowNameRenderer(JTable main) {
            this.main = main;
            setHorizontalAlignment(JLabel.CENTER);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            if (table != null) {
                JTableHeader header = table.getTableHeader();

                if (header != null) {
                    setForeground(header.getForeground());
                    setBackground(header.getBackground());
                    setFont(header.getFont());
                }
            }

            if (isSelected) {
                setFont(getFont().deriveFont(Font.BOLD));
            }

            setText((value == null) ? "" : main.getColumnName(row));
            setBorder(UIManager.getBorder("TableHeader.cellBorder"));

            return this;
        }
    }
} 
```

在这里，我们有创建表的相关部分：

```
 costTableModel = new CostTableModel(costCalc);
    table = new JTable(costTableModel);
    table.setPreferredScrollableViewportSize(table.getPreferredSize());
    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    table.setCellSelectionEnabled(true);

    scrollPane = new JScrollPane(table);

    RowNameTable nameTable = new RowNameTable(table);
    scrollPane.setRowHeaderView(nameTable); 
```

以及 costTableModel 类，只是为了完整起见：

```
public class CostTableModel extends AbstractTableModel {
    private CostCalculator costCalc;

    public CostTableModel(CostCalculator costCalc) {
        this.costCalc = costCalc;
    }

    @Override
    public int getRowCount() {
        return costCalc.getPersonsList().size();
    }

    @Override
    public int getColumnCount() {
        return costCalc.getPersonsList().size();
    }

    @Override
    public String getColumnName(int col) {
        return costCalc.getPersonsList().get(col).getName();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        Person debtor = costCalc.getPersonsList().get(rowIndex);
        Person debtee = costCalc.getPersonsList().get(columnIndex);

        return costCalc.getAmountOwed(debtor, debtee);
    }

    @Override
    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();

    }
} 
```

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T17:48:12.647

一个轻微的变体：当我阅读问题时，主要问题是标题没有在*列*选择更改时更新。让自定义标题监听*行*选择更改对于这种情况没有多大帮助。

事实上，一个 JTableHeader 已经*在*监听 Co​​lumnModel 并且模型的更改通知包括选择更改。只有 columnSelectionChange 方法被故意实现为什么都不做：

```
// --Redrawing the header is slow in cell selection mode.
// --Since header selection is ugly and it is always clear from the
// --view which columns are selected, don't redraw the header. 
```

自定义标头可以简单地实现重新绘制（这里懒惰我在表格的工厂方法中这样做只是为了省去我到表格的接线，您可以轻松地将它变成一个独立的类:-)。

```
final JTable table = new JTable(new AncientSwingTeam()) {

    @Override
    protected JTableHeader createDefaultTableHeader() {
        // subclassing to take advantage of super's auto-wiring
        // as ColumnModelListener
        JTableHeader header = new JTableHeader(getColumnModel()) {

            @Override
            public void columnSelectionChanged(ListSelectionEvent e) {
                repaint();
            }

        };
        return header;
    }

};
table.setCellSelectionEnabled(true);
table.getTableHeader().setDefaultRenderer(new ColumnHeaderRenderer()); 
```

还使用 table api 稍微调整了 Mad 的渲染器：

```
/**
 * Slightly adjusted compared to @Mad
 * - use table's selectionBackground
 * - use table's isColumnSelected to decide on highlight
 */
public static class ColumnHeaderRenderer extends DefaultTableCellHeaderRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean selected,  
        boolean focused, int row, int column) {
        super.getTableCellRendererComponent(table, value, selected, focused, row, column); 
        if (table.isColumnSelected(column)) {
            setBackground(table.getSelectionBackground());
        }
        return this;
    }
} 
```

至于观察：

> 总是说 isSelected 是假的

原因是 BasicTableHeaderUI 中的一个小怪癖：

```
ui.selected != columnModel.selected 
```

uiSelected 是键绑定可以访问的列 - 如果 laf 支持它并且标题是 focusOwner。对我来说真的没有意义，但是完全定义 ui 和 columnModel 选择的语义陷入了对新宝贝 fx 的兴奋中，这被遗忘了 ;-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T01:44:37.040

我遇到的基本问题是表头和选择更改之间没有联系。事实上，标题真的很聪明，它的重绘......

我最终提供了自己的标题，它将一个侦听器附加到表的选择模型上，并在选择更改时重新绘制标题。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.util.List;
import javax.swing.Icon;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.RowSorter;
import javax.swing.RowSorter.SortKey;
import static javax.swing.SortOrder.ASCENDING;
import static javax.swing.SortOrder.DESCENDING;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;

public class TestColumnHighlight {

    public static void main(String[] args) {
        new TestColumnHighlight();
    }

    public TestColumnHighlight() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JTable table = new JTable();
                DefaultTableModel model = new DefaultTableModel(
                                new Object[]{"abc", "def", "ghi", "jkl"},
                                0);

                model.addRow(new Object[]{0, 0, 0, 0});
                model.addRow(new Object[]{0, 0, 0, 0});
                model.addRow(new Object[]{0, 0, 0, 0});
                model.addRow(new Object[]{0, 0, 0, 0});
                model.addRow(new Object[]{0, 0, 0, 0});

                table.setModel(model);
                table.setTableHeader(new CustomTableHeader(table));
                table.getTableHeader().setDefaultRenderer(new ColumnHeaderRenderer());

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class CustomTableHeader extends JTableHeader {

        public CustomTableHeader(JTable table) {
            super();
            setColumnModel(table.getColumnModel());
            table.getColumnModel().getSelectionModel().addListSelectionListener(new ListSelectionListener() {
                @Override
                public void valueChanged(ListSelectionEvent e) {
                    repaint();
                }
            });
        }

        @Override
        public void columnSelectionChanged(ListSelectionEvent e) {
            repaint();
        }

    }

    public class ColumnHeaderRenderer extends DefaultTableHeaderCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean selected, boolean focused, int row, int column) {
            super.getTableCellRendererComponent(table, value, selected, focused, row, column);

            int selectedColumn = table.getSelectedColumn();
            System.out.println("Selected " + selectedColumn + "-" + column);
            if (selectedColumn == column) {
                Color bg = table.getSelectionBackground();
                setBackground(bg);
                setOpaque(true);
            } else {
                setOpaque(false);
            }

            return this;
        }

    }

    public class DefaultTableHeaderCellRenderer extends DefaultTableCellRenderer {

        public DefaultTableHeaderCellRenderer() {
            setHorizontalAlignment(CENTER);
            setHorizontalTextPosition(LEFT);
            setVerticalAlignment(BOTTOM);
            setOpaque(false);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
                        boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value,
                            isSelected, hasFocus, row, column);
            JTableHeader tableHeader = table.getTableHeader();
            if (tableHeader != null) {
                setForeground(tableHeader.getForeground());
            }
            setIcon(getIcon(table, column));
            setBorder(UIManager.getBorder("TableHeader.cellBorder"));
            return this;
        }

        protected Icon getIcon(JTable table, int column) {
            SortKey sortKey = getSortKey(table, column);
            if (sortKey != null && table.convertColumnIndexToView(sortKey.getColumn()) == column) {
                switch (sortKey.getSortOrder()) {
                    case ASCENDING:
                        return UIManager.getIcon("Table.ascendingSortIcon");
                    case DESCENDING:
                        return UIManager.getIcon("Table.descendingSortIcon");
                }
            }
            return null;
        }

        protected SortKey getSortKey(JTable table, int column) {
            RowSorter rowSorter = table.getRowSorter();
            if (rowSorter == null) {
                return null;
            }

            List sortedColumns = rowSorter.getSortKeys();
            if (sortedColumns.size() > 0) {
                return (SortKey) sortedColumns.get(0);
            }
            return null;
        }
    }
} 
```

# ruby-on-rails - md5 或 urlsafe_base64 或其他用于创建 auth_token

> ID：15489822
> 
> 赞同：3
> 
> 时间：2013-03-19T01:09:29.793
> 
> 标签：ruby-on-rails, security

我有一个 Rails 应用程序，我们使用 user_id 并写入会话变量（作为 cookie）。我将为浏览器和移动平台使用相同的令牌。

生成身份验证令牌的首选方式是什么？我见过：

```
token = Digest::MD5.hexdigest('some-value') # this
token = SecureRandom.urlsafe_base64 # and this
token = SecureRandom.hex # and this 
```

是否有重要的理由使用其中一个？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T01:18:45.037

在 Rails 的上下文之外（因为我们在这里讨论的是一般的 Web 应用程序安全性），很容易辨别。

因此，使用 MD5，您有两种方法。要么是固定输入，要么是随机输入。为了便于讨论，任何包含随机组件（如附加随机属性的用户名）的输入都被认为是随机的。

固定输入法不好。原因是它最终会在某种程度上是可预测的。如果攻击者可以预测他/她的令牌（了解它是如何生成的），他可以使用它来攻击其他令牌。换句话说，对每个人来说都是糟糕的一天。

随机输入法其实和纯随机token法没什么区别，只是部分输入不是随机的。

所以我建议使用纯随机令牌。base64 或 hex 都可以，但令牌中至少应该有 128 位随机性（16 个字符），如果可以的话，还应该更多。一个好的基础是 256 位随机性，在 base64 中是 43 个字符......

# python - python在函数之间传递列表

> ID：15489824
> 
> 赞同：1
> 
> 时间：2013-03-19T01:09:37.277
> 
> 标签：python, list, parameter-passing

我正在努力将列表（`holder`包含`[0,0]`）传递给另一个函数。我想`check_neighbours`拿起列表，然后做一些进一步的处理。我想我正确地传递了它，`main()`但我不确定我必须做什么才能让列表在内部调用时简单地显示其内容`check_neighbours`。我尝试了一个`=`持有人，但我收到了错误：

> 全局名称“持有人”未定义

我相信我必须放在`holder = #something`这里，但我不知道是什么。

```
 def create_matrix(file):
    with open('network.txt') as f:
        Alist = []
        for line in f:
            part = []
            for x in line.split(','):
                part.append(int(x))
            Alist.append(part)
    return Alist

def start_node(Alist):
        i=0
        j=0
        #point node to pos [0][0] of Alist
        node = Alist[i][j]
        #create a list to hold co-ordinates
        holder = []
        holder.append(i)
        holder.append(j)
        print holder

        return node, holder

#test neighbours to see if they can be used
def check_neighbours(node, Alist):
        holder = #something 

#code begins here
def main():
        file = ("F:/media/KINGSTON/Networking/network.txt")
        Alist = create_matrix(file)
        node = start_node(Alist)
        holder = check_neighbours(node, Alist)
main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:11:55.107

在 结束时`start_node`，您执行以下操作：

```
return node, holder 
```

…但是当你调用它时，你会这样做：

```
node = start_node(Alist) 
```

这意味着您的局部`node`变量最终成为`node, holder`. 你不想要那个。你要这个：

```
node, holder = start_node(Alist) 
```

同时，您说“我认为我在 main() 函数中正确传递了它”，但您*根本没有*在`main`函数中传递它：

```
holder = check_neighbours(node, Alist) 
```

没有办法`check_neighbours`到达`holder`这里，因为你没有在`holder`这里给它。

另外，当您定义 时`check_neighbours`，您执行了以下操作：

```
def check_neighbours(node, Alist):
    holder = #something 
```

这不带`holder`参数，它定义了一个名为 的新局部变量`holder`。因此，将这两行更改为：

```
def check_neighbours(node, Alist, holder): 
```

并调用它：

```
holder = check_neighbours(node, Alist, holder) 
```

另外，请注意，您将结果分配`check_neighbors`回`holder`变量，替换您传入的任何内容。通常，这是一件非常合理的事情（想想`my_name = my_name.replace('Joseph', 'Joe')`），但要确保它确实是您想要的（当然，确保`check_neighbors`以执行 a`return holder`或返回一些其他适当的值结束）。

最后，正如我在您的另一个问题中所说：如果您继续对参数和传入的值使用相同的名称，那么您将继续像这样混淆自己。如果你使用不同的名字，你会更容易看到你错过了什么。甚至像每个前缀一样简单的东西：

```
def main():
    file = ("F:/media/KINGSTON/Networking/network.txt")
    my_list = create_matrix(file)
    my_node, my_holder = start_node(my_list)
    my_new_holder = check_neighbours(my_node, my_list, my_holder) 
```

# php - 这些 MVC 层是否正确？

> ID：15489825
> 
> 赞同：2
> 
> 时间：2013-03-19T01:09:49.207
> 
> 标签：php, zend-framework, model-view-controller, design-patterns

我正在使用 Zend 框架的完整 MVC 功能编写一个 Web 应用程序，其中包括一个服务层、域模型和映射器。我认为我对图层的理解是正确的，但想确认一下。

上层依赖于下层，所以从顶部开始：

1.  控制器 - 最顶层。高度依赖于它实例化、填充和呈现的视图。依赖于服务来访问模型。

2.  查看 - 不知道控制器。有时依赖于服务或模型，例如为选择控件填充查找列表。

3.  服务 - 向客户端提供 API，例如控制器。高度依赖模型。事实上，服务经常在模型的映射器部分和域部分之间进行调解，以便为客户完成工作。

4.  映射器（模型，A 部分）- 对领域有深入的了解，可以操作领域对象以适应关系数据存储，并操作关系数据以创建新的领域对象。

5.  域模型（模型，B 部分）- 包含域逻辑。域对象不知道其他层，但是由于它们需要访问其他域对象，它们可以将映射器作为“对象查找器”访问。

那个听起来是对的吗？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:30:49.797

好。在一些细节上有点*错误。*

MVC 中有两个主要层：

*   *模型层*：处理所有领域的业务逻辑、规则和信息
*   *表示层*：处理界面和交互性

控制器**不是**“*最顶层”*。它们是表示层的一部分，它们的职责是处理用户的请求并传递提取的信息以改变模型层的状态（通过服务）和（更罕见的）当前视图。

我想说，*服务*是模型的“C 部分”。此外，我更喜欢将“域对象”命名为“域模型”或“模型对象”，因为它会引起额外的混淆。

并且域对象不访问数据映射器。域对象本身应该完全不知道它们是否被存储。该部分由服务处理。[您可以在此答案](https://stackoverflow.com/a/11943107/727208)中找到代码/api 示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T06:13:48.847

基本上，我同意你的说法，但我会更深入一点。

控制器是视图和模型之间的中介。正如您所说，视图不知道控制器，但模型也是如此。

此外，正如您所提到的，在您的模型中，将服务层作为模型的入口点也是一个好点！

您必须始终牢记，Controller 和 View 层可能位于服务器上，而模型位于另一台服务器上。因此，您的服务充当您的业务需求和业务逻辑之间的门面。它还可以处理您的事务、错误标准化等……实际上是横向的。

对于您的域部分，我会通过将您的映射器部分分成 2 个不同的部分来扩展它。由于它是您的 DAL，您可能希望为以下内容创建类：

*   请求您的域对象，无论它们来自何处
*   从特定位置检索您的域对象

我的意思是，您的 BL 向您的 DAL 请求一个对象，因此您要求您的存储将其提供给您。存储有一组检索器，例如一级缓存（常规 php 数组）、二级缓存（memcached、redis、任何东西），最后是您的数据库。所以我基本上在 DAL 中有 2 个子层：一个存储类及其存储和优先级堆栈，以及在这些存储中获取的实现。

不要忘记仅使用工厂进入您的层，这样通过在其中模拟您的对象或在每个层之间添加拦截器来进行单元测试会更容易。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:16:05.977

您忘记了 MVC 中的“M”，即模型。模型为您的视图提供了渲染它所需的信息，或者您希望在其上提交给客户的信息。控制器和视图通过您的模型交换信息。但是一个重要的细节是模型不是你的 Domail 模型

# crystal-reports-2008 - 如何使水晶报表多语言？

> ID：15489826
> 
> 赞同：0
> 
> 时间：2013-03-19T01:09:50.640
> 
> 标签：crystal-reports-2008

我正在尝试制作作为 ASP.NET 应用程序一部分的 rpt 文件，并且目前仅以一种语言显示，以根据用户的本地语言设置以不同的语言显示。

我知道这在我们公司早些时候已经通过将语言环境信息从 C# 传递到主报告，用根据语言返回不同文本的公式字段替换标签，将语言环境信息参数链接到所有子报告，将所有标签替换为它们中的公式字段等等，它确实有效，但我想知道是否有更简单的解决方案可用？每个报告都包含很多子报告，因此如果这是唯一的方法，则需要进行大量手动工作。当然，所有 if 子句也有很多风险，将原始文本从标签复制到公式字段等 - 很容易复制错误然后错过它。

每个报告中也有很多相同的元素，例如所有页脚，因此在每个页脚中分别创建公式字段并用它们替换标签似乎需要做很多工作，而不是可能只做一次并适用于所有报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T12:56:30.667

数据库中的一个表。列名是语言。主键是您员工的主要语言。使用您的主要语言编写报告，但即时从表格中获取翻译。

维护问题从散布在整个报告库中的短语和单词转变为具有大量重复项，并将它们全部放在一个没有重复项的表中。

随着避免“几乎重复”变得越来越大，挑战越来越大，例如“总收费”与“总账单”或“付款”与“支付金额”还有一些语言有名词变格、动词变位的问题，不同的复数方式等。如果每个实例都不是由精通输出语言的人完成，总会有听起来很奇怪的事情。事实上，一些以母语为母语的人可以翻译成他们自己永远不会说的话。

但是有一些技巧可以减少这些问题。例如，您可以创建一个存储过程来执行 printf 样式替换。这允许词序变化。一种语言可能会将变量放在句子的末尾，而另一种语言可能会将其放在中间。

两种类似的方法是[GNU gettext 实用程序](http://www.google.com/search?q=PO%20files)或 Mac OS 进行国际化的方式。

# java - Java 为 int 输出空格

> ID：15489832
> 
> 赞同：-2
> 
> 时间：2013-03-19T01:10:55.507
> 
> 标签：java, string

在名为 drawOnePoint 的类中编写一个方法，其中 x 和 y 为 int 参数。此方法应在上图中绘制一条线。这是一个示例：drawOnePoint(3, 19) 应该将以下行写入终端窗口（相当于上图中 y=19 的行）：

19 | *

所以基本上我真的不知道如何取整数 3 并将其转换为“|”之后的空格数 然后打印星号。

如果这是一个新手问题，我很抱歉，但我真的无法弄清楚。

这是我到目前为止所拥有的：

```
public String drawOnePoint(int xCord, int yCord)
{
            System.out.print(yCord + "|" + 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:12:37.740

尽可能多地重复循环以打印空间，然后打印它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:18:39.550

看看这个： [http ://commons.apache.org/proper/commons-lang/javadocs/api-z.6/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/proper/commons-lang/javadocs/api-z.6/org/apache/commons/lang/StringUtils.html)

重复功能是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:19:27.023

不要重新发明轮子，使用 Apache Commons：

Stringutils.padLeft(yourStr,' ',3)+"*":

[http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#leftPad%28java.lang.String,%20int,%20java.lang.String%29](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#leftPad%28java.lang.String,%20int,%20java.lang.String%29)

# batman.js - batmanjs 中的 before_save 回调

> ID：15489837
> 
> 赞同：0
> 
> 时间：2013-03-19T01:11:34.253
> 
> 标签：batman.js

batman.js中调用`after_save`和回调方法的正确方法是什么？`before_save`我正在寻找类似于 rails 提供的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T16:41:16.313

更新：

查看这篇博文：[http ://rmosolgo.github.io/blog/2014/03/19/batman-dot-model-lifecycle-callbacks/](http://rmosolgo.github.io/blog/2014/03/19/batman-dot-model-lifecycle-callbacks/)

希望能帮助到你！

* * *

我只是自己调查了一下。我发现获得此功能的一个好方法是在构建后立即将侦听器记录在案，从而利用模型的生命周期：

```
class App.Thing extends Batman.Model
   constructor: ->
     super # instantiates the record

     @get('lifecycle').onEnter 'save', =>
       console.log('about to save!')

     @get('lifecycle').onExit 'save', =>
       console.log('just saved!')

     @ # return the record 
```

这还没有太多文档记录，但是您可以看到[测试](https://github.com/batmanjs/batman/blob/master/tests/batman/model/record_lifecycle_test.coffee)中描述的完整记录生命周期（步骤、名称、顺序等！） ！

# php - PHP - SQL 数组插入代码跳过第一个值

> ID：15489843
> 
> 赞同：0
> 
> 时间：2013-03-19T01:12:02.207
> 
> 标签：php, sql, arrays, foreach

我开发了一个将变量打印到 mysql 数据库中的函数。

它似乎工作得很好，只是在 sql 中记录值时它会跳过第一个值。但是，所有 3 个都出现在`echo`命令中。换句话说，值 1 2 和 3 用 echo 打印 - 但只有 2 和 3 进入数据库！

```
$xml = simplexml_load_file($url);

$allcharacters = $xml->xpath('///result/rowset/row/@name');

foreach($allcharacters as $alts) {
    $con=mysqli_connect("localhost","user","password","master");
    $sql="INSERT INTO masterlist (charactername) VALUES ('$alts')";
    mysqli_query($con,$sql);
    echo "Found $alts<br />"; 
```

正在插入的示例数据：

```
Found Tiamat's Shadow
Found Troyd23
Found Gore Innovater
Gore Innovater 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:39:14.797

当您将输入插入数据库时​​，您并没有对其进行清理。

第一`'`项中的`Found Tiamat's Shadow`, 会破坏您的 SQL 查询，因此它实际上无法插入；您的问题“它将跳过第一个值”证实了这一点。

使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)，您有两个选项可以解决此问题。

首先是您可以使用以下方法转义您的数据[`mysqli_real_escape_string()`](http://php.net/mysqli_real_escape_string)：

```
$con=mysqli_connect("localhost","user","password","master");
foreach($allcharacters as $alts) {
    $alts = mysqli_real_escape_string($con, $alts);
    $sql="INSERT INTO masterlist (charactername) VALUES ('" . $alts . "')";
    ... 
```

使用此功能，任何“不安全”字符将在插入数据库时​​自动转义。

第二种方法是使用[准备好的语句](http://www.php.net/manual/en/mysqli.prepare.php)。这将需要更多的代码，但是，这样做几乎总是可以保证您不会意外忘记这样做。这是一个带有准备好的语句的示例：

```
$con=mysqli_connect("localhost","user","password","master");
foreach($allcharacters as $alts) {
    $stmt = mysqli_prepare($con, "INSERT INTO masterlist (charactername) VALUES ( ? )");
    mysqli_stmt_bind_param($stmt, "s", $alts);
    mysqli_stmt_execute($stmt);
    mysqli_stmt_close($stmt);
    ... 
```

这种方法比以前的方法更加健壮，因为它会根据列的数据类型转义数据。它可能比您的特定用例所需的要多一点，但是养成使用准备好的语句的习惯永远不会有坏处=]

# c# - 文本框背景颜色不变

> ID：15489848
> 
> 赞同：1
> 
> 时间：2013-03-19T01:13:00.950
> 
> 标签：c#, colors, textbox

谁能解释为什么这段代码不起作用？

```
 protected override void OnMouseDoubleClick(MouseEventArgs e)
        {
            if (this.BackColor == Color.White)
            {
                this.BackColor = Color.Yellow;

            }
            else
            {
                this.BackColor = Color.White;
            }
                base.OnMouseDoubleClick(e);
        } 
```

它工作了几次，但大多数都不起作用。当我删除“if”部分时，它每次都有效，当我用其他代码替换“this.BackColor = Color.Yellow”时它也有效。如果有人能告诉我我做错了什么，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:21:56.463

它不仅在第一次双击时起作用（它起作用但将颜色设置为白色而不是您可能期望的黄色），因为`==`运算符比较颜色的名称和 ARGB 属性，而不仅仅是 ARGB 属性。虽然第一次双击 ARGB 值相同`(ARGB=(255, 255, 255, 255))`，但名称不同，因为初始`BackColor`属性的名称为“Window”，而 Color.White 的名称属性值为“White”，因此它们不同。您可以在调试器中自己检查。

为避免该问题，您可以按如下方式重写代码：

```
protected override void OnMouseDoubleClick(MouseEventArgs e)
{
      //compare ARGB values
      if (this.BackColor.ToArgb() == Color.White.ToArgb())
      {
           this.BackColor = Color.Yellow;

      }
      else
      {
           this.BackColor = Color.White;
      }
      base.OnMouseDoubleClick(e);
} 
```

# ios - 使用 AFHttpClient 请求带有身份验证密钥的 api

> ID：15489850
> 
> 赞同：0
> 
> 时间：2013-03-19T01:13:19.057
> 
> 标签：ios, rest, authentication, afnetworking

我正在尝试使用 AFHTTPClient 进行休息 api 调用。我正在尝试通过将注册时获得的身份验证密钥传递给 api 来发出 api 请求。当我运行该应用程序时，我收到 403 错误。我是使用 AFNetworking 的新手，我非常感谢任何帮助。

```
 AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL     URLWithString:@"http://somewebsite.com/"]];

[httpClient setDefaultHeader:@"Authorization: Client-ID" value:@"xxxxxxxx"];

NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET"
                                                        path:@"https://api.somewebsite.com/api/category/subcategory/fun/"
                                                  parameters:nil];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    // Print the response body in text
    NSLog(@"Response: %@", [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding]);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", error);
}];
[operation start]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:29:20.777

AFHTTPClient 的事情是您在 init 方法中设置基本 url..然后每个 requestWithMethod 调用..您从基本传递一个相对 URL...例如，

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL     URLWithString:@"https://api.somewebsite.com/"]];

NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET"
                                                        path:@"/api/category/subcategory/fun/"
                                                  parameters:nil]; 
```

# java - 如何在给定 App ID 和 Secret 的情况下获取 FB 访问令牌？

> ID：15489851
> 
> 赞同：2
> 
> 时间：2013-03-19T01:13:20.470
> 
> 标签：java, facebook, restfb

我只是在学习`restfb`。我在 FB 网站上注册了一个应用程序，并获得了一个应用程序 ID 和密钥。但是，根据[本教程](http://restfb.com)，我应该有一个访问令牌来初始化[DefaultFacebookClient](http://restfb.com/javadoc/com/restfb/DefaultFacebookClient.html)。我尝试按照那里的说明进行操作，但没有人充分解释如何从应用程序 ID 和密钥中获取访问令牌。

```
Request https://graph.facebook.com/oauth/authorize?client_id=MY_API_KEY&redirect_uri=http://www.facebook.com/connect/login_success.html

Facebook will redirect you to http://www.facebook.com/connect/login_success.html?code=MY_VERIFICATION_CODE

Request https://graph.facebook.com/oauth/access_token?client_id=MY_API_KEY& redirect_uri=http://www.facebook.com/connect/login_success.html&client_secret=MY_APP_SECRET&code=MY_VERIFICATION_CODE

Facebook will respond with access_token=MY_ACCESS_TOKEN 
```

我正是这样做的，但每次我得到

```
{
   "error": {
      "message": "Error validating verification code. Please make sure your redirect_uri is identical to the one you used in the OAuth dialog request",
      "type": "OAuthException",
      "code": 100
   }
} 
```

知道我应该做什么来获取访问令牌并开始使用 API 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:51:45.480

插件作者似乎假设您将使用[Login Dialog](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)或[JavaScript SDK](https://developers.facebook.com/docs/howtos/login/getting-started/)对用户进行身份验证。

这两种方法都返回您可以使用的用户访问令牌。你需要你的 App_ID 和 Secret 来初始化这些。大多数 Facebook 操作都需要用户访问令牌。

如果您只是为了读取公共数据而进行 API 调用，那么您也许可以使用应用程序访问令牌而侥幸逃脱。为此，您可以使用 RestFB 的[DefaultFacebookClient().obtainAppAccessToken() 方法](http://restfb.com/#access-token-operations)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T09:21:06.927

我遇到了同样的问题。

在 redirect_uri 参数中添加一个斜杠为我解决了这个问题。

此外，请确保您在发出请求时使用的是您自己的应用程序的 URI，而不是 Facebook 的 URI。

例如：

```
http://www.yoursite.com 
```

对我不起作用

```
http://www.yoursite.com/ 
```

做过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T12:01:03.460

我不确定这是否是您想要的，但无论如何：

要获取与应用关联的用户的访问令牌，您可以使用 /accounts 'edge'（请参阅[此处](https://developers.facebook.com/docs/graph-api/reference/app/)）。

此外，[这个关于访问令牌的网站](https://developers.facebook.com/docs/facebook-login/access-tokens/)说您可以像这样调用 Graph API： [https ://graph.facebook.com/endpoint?access_token=app_id|app_secret](https://graph.facebook.com/endpoint?access_token=app_id|app_secret)

现在，将其结合起来，获取访问令牌（JSON 格式以及其他一些东西）： [https://graph.facebook.com/](https://graph.facebook.com/) {your app id here}/accounts?access_token={again, your app id here }|{您的应用密码在这里}

请替换上面 url 中的字段并从中删除所有 { 和 }。

# websphere - Java 1.4.2 (WebSphere Application Server 5.1) 没有 wasce 版本

> ID：15489854
> 
> 赞同：0
> 
> 时间：2013-03-19T01:13:36.777
> 
> 标签：websphere

我的公司有一个 Web 应用程序部署在 WebSphere Application Server 版本 5.1 (jdk 1.4.2) 上。该公司不想为 Rational Software Architect 或 Rational Application Developer 付费，这两者都在其安装程序中内置了 WebSphere 5.1 服务器。

我在想我最好的选择是下载与 jdk 1.4.2 兼容的 WASCE 版本。但是，查看 WASCE 的版本页面，它看起来并没有与 jdk 1.4.2 兼容的任何版本。

[http://www-01.ibm.com/support/docview.wss?rs=2359&uid=swg27006834](http://www-01.ibm.com/support/docview.wss?rs=2359&uid=swg27006834)

我对吗？WASCE 是否仅针对 Java 5 及更高版本发布？

不要真的想使用另一个应用程序容器来部署文件，因为我们需要测试 websphere 配置、环境变量等。

如果 WASCE 不支持 Jdk 1.4.2，谁能想到其他替代方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:57:30.197

首先，与其他 WAS 版本（WAS Base、WAS ND 等）相比，WAS CE 具有完全不同的代码库。它基于 Apache Geronimo 之类的开源技术，因此您不应该使用 WAS CE 来模仿您的 WAS 5.1 环境（总的来说，这是两个不同的服务器，只有品牌名称是常见的）。

在应用服务器上运行企业 Java 应用程序的要点是 Java EE 规范级别，而不是 JRE 版本。WAS 5.1 支持 J2EE 1.2 和 1.3。要确定您使用的是哪一个，您应该检查您的部署描述符（application.xml / web.xml 文件）。然后在信息中心查看[规范和 API 文档](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/rovr_specs.html)；

*   WAS 6.1 支持 J2EE 1.2、1.3 和 1.4
*   WAS 7 支持 J2EE 1.3、1.4 和 Java EE 5

因此，如果您的应用程序是 J2EE 1.2，则可以使用 WAS 6.1，如果是 J2EE 1.3，则可以使用 WAS 7。不幸的是，在将项目迁移到更高的规范级别之前，您不能使用更新版本的 WAS（信息中心包含信息关于如何做到这一点）。我强烈建议您这样做，因为 WAS 5.1 已不支持，甚至 WAS 6.1 今年也将不支持。

根据 Java SE 版本，您没有问题，由于字节码的向后兼容性，您的 Java SE 1.4 编译代码将在 Java SE 5 和 6 JRE 上运行。当然，如果您将项目升级到更高版本的 J2EE 规范，您可以使用更新的 JRE；只需使用更新的 SDK 编译您迁移的项目（不过有一点小问题；从 1.4 到 5 Java 有一些新关键字，例如`enum`，因此您必须检查您的代码以确保您不使用这些作为变量名）。

一段时间以来，WebSphere 有一个[Developers Edition](http://www-01.ibm.com/software/webservers/appserv/developer/)。您可以将它作为免费的 WAS 测试服务器添加到您的 Eclipse；总之，如果您很幸运并且您的项目是 J2EE 1.3 而不是 1.2，那么您可以在此设置中使用 WAS 7.0。

> 使用免费的 WebSphere Application Server Developer Tools for Eclipse (WDT) 开发适用于 WAS V7.0、V8.0、V8.5 的应用程序，包括 Liberty 配置文件。WDT 是 Rational Application Developer 的一个子集，可以安装在您现有的 Eclipse 环境之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:18:35.547

我认为您将很难找到在 Java 1.4（WAS 5.1 除外）上运行的任何 WAS 版本。

您与 IBM 的许可协议是什么样的？我知道在我当前的项目中，我们可以在我们自己的机器上运行本地 WAS 服务器来免费进行开发工作。一旦我们将服务器用作共享环境（如共享测试或登台），我们就需要购买新的许可证。如果您不想为更多许可付费或者还不能迁移到更新版本的 WAS，那么这可能是最合理的选择。

# java - JTidy 和布尔属性

> ID：15489856
> 
> 赞同：0
> 
> 时间：2013-03-19T01:14:09.943
> 
> 标签：java, tidy, html, jtidy

有像下一个这样的单选按钮，

```
<input type="radio" name="test" value="false"  checked/>No 
```

经过整洁的解析后，我的节点只有 3 个属性，以及它的问题。如何配置 tidy 来解析布尔属性？谢谢。

PS我的整洁配置：

```
tidy.setXHTML(USE_XHTML);
tidy.setDocType(DOCTYPE);
tidy.setQuoteAmpersand(USE_QUOTE_AMPERSAND);
tidy.setQuoteNbsp(USE_QUOTE_NBSP);
tidy.setFixBackslash(FIX_BACKSLASH);
tidy.setFixComments(FIX_COMMENTS);
tidy.setSmartIndent(USE_SMART_INDENT);
tidy.setCharEncoding(USE_CHAR_ENCODING); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:14:14.467

我已经用`JSoup`图层修复了它，只需读取 html`JSoup`并将其打印到字符串。`JTidy`无法解析它，但有端口[tidy-html5](https://github.com/w3c/tidy-html5)可以使用它，但我不能使用它。

# javascript - Javascript DOM 将图像数组加载到 div 背景中？

> ID：15489858
> 
> 赞同：0
> 
> 时间：2013-03-19T01:14:17.040
> 
> 标签：javascript, image, dom, html, tags

基本上我在一个名为的文件夹中有图像，`image0.png, image1.png, image(index).png`我想将这些图像加载（预加载，以便在页面加载后它们不会永远加载）到 div 中的图像标记中。图片标签由 DOM 生成，然后初始化为默认参数。我遇到的问题是我似乎无法让 Document 模型获取充满图像的数组并将其加载到图像标签中`IMGTG.src = IMGS[0];`？下面是代码

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script type="text/javascript">

IMGS = new Array(); 
var IMGTG;

function INIT_IMGTG(id)
{       
    IMGTG = document.createElement("img");      
    IMGTG.setAttribute("height", "100%");
    IMGTG.setAttribute("width", "100%");    
    IMGTG.setAttribute("border", "0");      
} 
function LOAD_IMGS() 
{    
    var index = 0;              

    for(index = 0; i < 2; i++) 
    {               
        IMGS[i] = "image" + index + ".png"
    }            
}  
function IMG_ARY(id) 
{
    LOAD_IMGS();    
    INIT_IMGTG(id); 

    IMGTG.src = IMGS[0];        
}
</script>
</head>
<body onload = "IMG_ARY('IMG_ID')">
<div id="IMG_ID"></div>
</body>
</html> 
```

**编辑：** 到目前为止，我按照两位回答者的描述进行了编辑，但仍然没有运气？我不确定是什么给出的，Javascript 是一种古怪的语言。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script type="text/javascript">

IMGS = new Array(); 
var IMGTG;

function INIT_IMGTG(id)
{       
    IMGTG = document.createElement("img");      
    IMGTG.setAttribute("height", "100%");
    IMGTG.setAttribute("width", "100%");    
    IMGTG.setAttribute("border", "0");  
    id.appendChild(IMGTG);
} 
function LOAD_IMGS() 
{    
    for(var i = 0; i < 2; i++)
    {               
        IMGS[i] = "image" + i + ".png";
    }        
}  
function IMG_ARY(id) 
{
    LOAD_IMGS();    
    INIT_IMGTG(id); 

    IMGTG.src = IMGS[0];        
}
</script>
</head>
<body onload = "IMG_ARY('IMG_ID')">
<div id="IMG_ID"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:23:08.863

看起来您已经正确设置`src`了图像 ( `IMGTG`) 以及它的其他属性，但您实际上并没有将它插入到 DOM 中。

尝试将此添加到底部`IMG_ARY`：

```
id.appendChild(IMGTG); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:42:44.687

似乎与`for`循环在哪里`i`和`index`被互换但只`index`被声明

改变

```
var index = 0;              

for(index = 0; i < 2; i++) 
{               
    IMGS[i] = "image" + index + ".png"
} 
```

至

```
for(var i = 0; i < 2; i++)
{               
    IMGS[i] = "image" + i + ".png";
} 
```

# sorting - 排序问题？

> ID：15489859
> 
> 赞同：3
> 
> 时间：2013-03-19T01:14:25.680
> 
> 标签：sorting, heap

堆排序被认为是“分而治之”排序还是优先队列排序？

此外，冒泡排序适合什么类别（除了可怕的）。

我读过堆排序通常被认为是“分而治之”的排序，但它可以是优先级队列排序。严格来说是一种还是另一种？还是两者兼而有之？我找不到关于可以考虑什么冒泡排序的任何信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T01:29:25.703

我不认为`HeapSort`被认为是“分而治之”，因为该算法立即将问题细分为子问题。执行 HeapSort 算法`ExtractMin`或`ExtractMax`直到 Heap 为空。这些动作是`O(logn)`因为在每个`ExtractMin`或必须做`ExtractMax`的事情之后才能保持它的偏序。最后有一个成本，因为它确实或。`Heap``Heapify``O(nlogn)``n` `ExtractMin``ExtractMax`

这是一个伪代码

```
HeapSort()
 heap
 new_ ordered_collection
 while(heap.NotEmpty)
   new_ ordered_collection.add(heap.ExtractMin)//or ExtractMax
   heap.Heapify //could be MaxHeapify or MinHeapify
 return new_ ordered_collection 
```

请注意，`ExtractMin`and会`ExtractMax`弹出堆的最小或最大元素。

如您所见，我看不到“分而治之”的策略。

但是`heap.Heapify`根据堆的部分顺序对元素进行重新排序。这个定义了每个节点和他的两个孩子之间的关系，因此，`heap.Heapify`应用了“分而治之”的策略，但这是DataStructre本身的事情，不是算法。

冒泡排序是一种`naive`算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T20:18:34.500

如上所述，堆排序绝对不是“分而治之”的算法。堆排序使用堆数据结构来有效地对其元素进行排序。您可以将堆排序视为具有优先级队列的选择排序。

分治算法具有以下特点：

1) 将任务划分为相同任务的较小实例的子任务 2) 递归求解子任务 3) 适当组合结果

如您所见，堆排序不符合这种算法的条件。唯一的相似之处是分治算法的结构反映了二叉树的结构（这通常是堆排序用来实现优先级队列的方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:34:03.830

堆排序具有“分而治之”算法（例如快速排序）的时间复杂度，但它的行为不像分而治之算法。

因为它将数据拆分为“排序”部分和“未排序”部分，所以它实际上是一种选择排序。它利用堆数据结构更有效地在每一步从未排序列表中选择最小元素。我想您可以因此说它是“优先队列排序”，但应该提到整个操作可以就地完成，而不是建立一个单独的堆。

堆排序通常优于快速排序，除了快速排序的最坏情况复杂度为`O(N^2)`（相对于堆排序的最坏情况为`O(N.logN)`）。

冒泡排序也是一种就地算法，但它被认为是“幼稚的”。

# ocaml - 在camlp4中定义语法规则时，_loc变量的作用是什么？

> ID：15489863
> 
> 赞同：1
> 
> 时间：2013-03-19T01:15:11.330
> 
> 标签：ocaml, camlp4

`_loc`变量出现在[表达式](https://github.com/ocaml/ocaml/blob/trunk/camlp4/Camlp4Parsers/Camlp4OCamlRevisedParser.ml#L610)的语法规则中，`match ... with`作为传递给`mk_sequence`函数的参数。

```
 | "match"; e = sequence; "with"; a = match_case ->
        <:expr< match $mksequence' _loc e$ with [ $a$ ] >> 
```

但它没有用在`mksequence`'s[函数体](https://github.com/ocaml/ocaml/blob/trunk/camlp4/Camlp4Parsers/Camlp4OCamlRevisedParser.ml#L246)中。

```
 value mksequence _loc =
    fun
    [ <:expr< $_$; $_$ >> | <:expr< $anti:_$ >> as e -> <:expr< do { $e$ } >>
    | e -> e ]
  ; 
```

该`_loc`变量也出现在语法规则的[其他](https://github.com/ocaml/ocaml/blob/trunk/camlp4/Camlp4Parsers/Camlp4OCamlRevisedParser.ml#L657) [地方。](https://github.com/ocaml/ocaml/blob/trunk/camlp4/Camlp4Parsers/Camlp4OCamlRevisedParser.ml#L653)

在camlp4代码生成[教程](http://brion.inria.fr/gallium/index.php/OCaml_code_generation_tutorial#Defining_the_location)中，它说`_loc`代表位置。但我不太明白那里的解释。有人可以向我解释传递未使用`_loc`变量的目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:08:12.093

粗略地说，`_loc`就是“当前位置”。通常它是在解析规则中匹配的 AST 的位置。

`_loc`是一个普通的 OCaml 变量，实际上在 CamlP4 代码中无处不在，但是 P4 的语法糖很好地隐藏了它们的大部分存在。您可以通过 P4 预处理您的 P4 模块来了解如何在 P4 中引入和使用“_loc”。例如，

```
EXTEND Gram
  my_syntax:
    [ [ "match"; e = sequence; "with"; a = match_case ->
          <:expr< match $mksequence' _loc e$ with [ $a$ ] >>
    ] ];
END; 
```

如果你对上面的内容进行预处理`camlp4rf`，你就会明白它的真正含义：

```
Gram.extend (my_syntax : 'my_syntax Gram.Entry.t)
  ((fun () ->
      (None,
       [ (None, None,
          [ ([ Gram.Skeyword "match";
               Gram.Snterm
                 (Gram.Entry.obj (sequence : 'sequence Gram.Entry.t));
               Gram.Skeyword "with";
               Gram.Snterm
                 (Gram.Entry.obj (match_case : 'match_case Gram.Entry.t)) ],
             (Gram.Action.mk
                (fun (a : 'match_case) _ (e : 'sequence) _
                   (_loc : Gram.Loc.t) ->
                   (Ast.ExMat (_loc, (mksequence' _loc e), a) : 'my_syntax)))) ]) ]))
     ()) 
```

这有点难，但你可以找到`Gram.Action.mk`一个引入参数的函数`_loc`。它绑定到与以 . 开头的规范匹配的 AST 的位置`[ Gram.Skeyword "match"...`。然后`_loc`使用 at`<:expr< match ... >>`扩展为`Ast.ExMat (_loc, ...)`，除了第二次使用 at `mksequence' _loc e`，它是手写的。

`<:expr<...>>`p4中的其他`<:XXX<...>>`构造使用此`_loc`变量，因此您可以创建 AST 而无需过多考虑它的位置。它自动使用`_loc`“当前解析的位置”。如果你不想使用`_loc`for`<:expr<...>>`你可以使用`<:expr@myloc<...>>`明确指定你的 AST 的位置。

有时您想`<:expr<...>>`在解析规则之外使用，在这种情况下`_loc`是未绑定的。您必须使用`<:expr@myloc<...>>`，或在被其他东西`<:expr<...>`绑定后使用。`_loc`通常，`let _loc = Loc.ghost`这意味着“没有地方”。

P4 非常复杂，网上没有太多可用的文档。有时，通过 P4 扩展您的 P4 代码有助于理解它是如何工作的。

# python - Python：当每个块的大小未知时，以块的形式读取文本文件

> ID：15489864
> 
> 赞同：0
> 
> 时间：2013-03-19T01:15:13.217
> 
> 标签：python

我必须处理一个巨大的文本文件，其中包含以空格分隔的块形式的数据。它如下：

```
>3D_helix;140
protein_name:AChR pore alpha subunit (Torpedo marmorata)
file_name:ACh_pore_alpha.txt
entry_date:3july03
refman_number:21022
endnote_number:
author:Miyazawa,A., Fujiyoshi,Y., Unwin,N.(2003) [Structure and gating mechanism of the acetylcholine receptor pore] {Nature, 423, 949-955}
remarks:Sequence is from PDB, chain A. There is additional 24 AA as signal sequence in Swiss-Prot.  TMhelices=4.
pir_number:
Swiss_Prot_entry:ACHA_TORMA
Swiss_Prot_number:P02711
Swiss_Prot_gene:CHRNA1
Swiss_Prot_name:Acetylcholine receptor subunit alpha
PDB_title:Acetylcholine Receptor Protein, alpha Chain
PDB_Identifier:1OED
N_terminal:in
number_tmsegs:4
tm_segments:A.211,237;B.243,271;C.275,300;D.403,436
sequence:SEHETRLVANLLENYNKVIRPVEHHTHFVDITVGLQLIQLINVDEVNQIVETNVRLRQQWIDVRLRWNPADYGGIKKIRLPSDDVWLPDLVLYNNADGDFAIVHMTKLLLDYTGKIMWTPPAIFKSYCEIIVTHFPFDQQNCTMKLGIWTYDGTKVSISPESDRPDLSTFMESGEWVMKDYRGWKHWVYYTCCPDTPYLDITYHFIMQRIPLYFVVNVIIPCLLFSFLTVLVFYLPTDSGEKMTLSISVLLSLTVFLLVIVELIPSTSSAVPLIGKYMLFTMIFVISSIIVTVVVINTHHRSPSTHTMPQWVRKIFINTIPNVMFFSTMKRASKEKQENKIFADDIDISDISGKQVTGEVIFQTPLIKNPDVKSAIEGVKYIAEHMKSDEESSNAAEEWKYVAMVIDHILLCVFMLICIIGTVSVFAGRLIELSQEG*

>1D_helix;141
protein_name:AChR pore beta subunit (Torpedo marmorata)
file_name:ACh_pore_beta.txt
entry_date:3july03
refman_number:21022
endnote_number:
author:Miyazawa,A., Fujiyoshi,Y., Unwin,N.(2003) [Structure and gating mechanism of the acetylcholine receptor pore] {Nature, 423, 949-955}
remarks:Sequence is from PDB, chain B. There is additional 24 AA as signal sequence in Swiss-Prot. TMhelices=4.
pir_number:
Swiss_Prot_entry:Q6S3I0_TORMA
Swiss_Prot_number:Q6S3I0
Swiss_Prot_gene:none
Swiss_Prot_name:Acetylcholine receptor beta subunit
PDB_title:Acetylcholine Receptor Protein, beta Chain
PDB_Identifier:1OED
N_terminal:in
number_tmsegs:4
tm_segments:A.224,241;B.249,274;C.290,306;D.438,462
sequence:SVMEDTLLSVLFENYNPKVRPSQTVGDKVTVRVGLTLTSLLILNEKNEEMTTSVFLNLAWTDYRLQWDPAAYEGIKDLSIPSDDVWQPDIVLMNNNDGSFEITLHVNVLVQHTGAVSWHPSAIYRSSCTIKVMYFPFDWQNCTMVFKSYTYDTSEVILQHALDAKGEREVKEIMINQDAFTENGQWSIEHKPSRKNWRSDDPSYEDVTFYLIIQRKPLFYIVYTIVPCILISILAILVFYLPPDAGEKMSLSISALLALTVFLLLLADKVPETSLSVPIIISYLMFIMILVAFSVILSVVVLNLHHRSPNTHTMPNWIRQIFIETLPPFLWIQRPVTTPSPDSKPTIISRANDEYFIRKPAGDFVCPVDNARVAVQPERLFSEMKWHLNGLTQPVTLPQDLKEAVEAIKYIAEQLESASEFDDLKKDWQYVAMVADRLFLYIFITMCSIGTFSIFLDASHNVPPDNPFA*

>3D_other;143
protein_name:AChR pore delta subunit (Torpedo marmorata)
file_name:ACh_pore_delta.txt
entry_date:4dec03
refman_number:21022
endnote_number:
author:Miyazawa,A., Fujiyoshi,Y., Unwin,N.(2003) [Structure and gating mechanism of the acetylcholine receptor pore] {Nature, 423, 949-955}
remarks:Sequence is from PDB, chain C. Sequence in PDB has first 21 AA removed relative to Swiss-Prot. TMhelices=4.
pir_number:
Swiss_Prot_entry:Q6S3H8_TORMA
Swiss_Prot_number:Q6S3H8
Swiss_Prot_gene:none
Swiss_Prot_name:Acetylcholine receptor delta subunit
PDB_title:Acetylcholine Receptor Protein, delta Chain
PDB_Identifier:1OED
N_terminal:in
number_tmsegs:4
tm_segments:A.226,253;B.257,285;C.289,316;D.452,483
sequence:VNEEERLINDLLIVNKYNKHVRPVKHNNEVVNIALSLTLSNLISLKETDETLTTNVWMDHAWYDHRLTWNASEYSDISILRLRPELIWIPDIVLQNNNDGQYNVAYFCNVLVRPNGYVTWLPPAIFRSSCPINVLYFPFDWQNCSLKFTALNYNANEISMDLMTDTIDGKDYPIEWIIIDPEAFTENGEWEIIHKPAKKNIYGDKFPNGTNYQDVTFYLIIRRKPLFYVINFITPCVLISFLAALAFYLPAESGEKMSTAICVLLAQAVFLLLTSQRLPETALAVPLIGKYLMFIMSLVTGVVVNCGIVLNFHFRTPSTHVLSTRVKQIFLEKLPRILHMSRVDEIEQPDWQNDLKLRRSSSVGYISKAQEYFNIKSRSELMFEKQSERHGLVPRVTPRIGFGNNNENIAASDQLHDEIKSGIDSTNYIVKQIKEKNAYDEEVGNWNLVGQTIDRLSMFIITPVMVLGTIFIFVMGNFNRPPAKPFEGDPFDYSSDHPRCA 
```

每个块都以 3 个给定选项中的任何一个开始。每个块中的行数是变化的。我想将文件分成 3 个部分（或 3 个单独的文件），这样：

```
part 1 contains all blocks starting with >3D_Helix
part 2 contains all blocks starting with >1D_helix
part 3 contains all blocks starting with >3d_other 
```

我尝试了以下方法

```
prot_file = open(sys.argv[1], "r")
flag = False
for line in prot_file:
    if line.startswith (">3D_other"):
        flag == True
    if flag == True:
            print line 
```

但它只打印第一行，即 3d_helix。我在网上找到的大多数提示根据每个块的大小将列表分成块（即已知大小固定在特定数字，比如 13）。但是在我的情况下，我不知道大小，因此无法使用它们。我想要一种有效的pythonic方法来划分文件，如解释的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:28:51.493

这是我想出的解决方案：

```
#!/usr/bin/env python

INPUT_FILE = 'input.txt'
OUT_3D_HELIX = 'out_3dhelix.txt'
OUT_1D_HELIX = 'out_1dhelix.txt'
OUT_3D_OTHER = 'out_3dother.txt'

f_input = open(INPUT_FILE, 'r')
out_3dhelix = open(OUT_3D_HELIX, 'w')
out_1dhelix = open(OUT_1D_HELIX, 'w')
out_3dother = open(OUT_3D_OTHER, 'w')

dest_file = None
starting = True

try:
    for line in f_input:
        if starting:
            ## We are at a block start
            if line.startswith('>3D_helix;'):
                dest_file = out_3dhelix
            elif line.startswith('>1D_helix;'):
                dest_file = out_1dhelix
            elif line.startswith('>3D_other;'):
                dest_file = out_3dother
            else:
                continue   # Invalid line -- not a block beginning
            starting = False

        if not line.strip():  # Line is blank -- block end
            starting = True
            dest_file = None
            continue

        if dest_file is not None:  # And never should be, at this point..
            dest_file.write(line)

finally:
    ## Close files...
    f_input.close()
    out_3dhelix.close()
    out_1dhelix.close()
    out_3dother.close() 
```

基本上，它逐行读取所有文件，检测“块启动器”以更改写入下一行的目标文件。

# meteor - 将 New Relic 与 Meteor 一起使用

> ID：15489867
> 
> 赞同：2
> 
> 时间：2013-03-19T01:15:29.143
> 
> 标签：meteor, newrelic

我有兴趣将 New Relic 的应用程序监控功能整合到 Meteor 中。有没有人有过使用 New Relic 和 Meteor 的经验，如果有，你如何将两者结合起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T23:55:50.840

由于 node.js 代理处于测试阶段，因此没有针对 Meteor 的特定工具。这就是为什么您没有将定义的 Web 事务视为“特定于 Meteor”的原因。

外部服务请求也是一项正在进行的工作，可能不会按照您期望的方式运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-02T01:04:34.403

New Relic 代理在 npm 上，尽管它仍处于测试阶段。我通过进入 bundle/server 并键入`npm install newrelic`、设置配置文件并添加`require('newrelic')`server.js 将它安装在我部署的应用程序中。

代理正在运行并向 New Relic 发送数据。

两点，第一是显示的 Web 事务都是 sockjs 轮询，所以当你看到响应时间和诸如此类的东西时，使用 Meteor，响应时间与特定事务无关，从而限制了可用性。

第二个是代理没有跟踪外部服务请求，我的应用程序做了很多。我还没有机会深入了解原因，但我的结论是 New Relic 并不是特别适合 Meteor 应用程序。

作为免责声明，我应该说我没有阅读任何 New Relic 文档，这个测试只是一个粗略的设置，看看它是否有效，所以不要相信我的话。我写这篇文章是为了让某人对集成进行更详细的检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T06:17:55.450

因为流星是在节点上构建的，所以你可能只需要等待很短的时间让他们发布他们的 npm 模块：

[http://try.newrelic.com/nodejs](http://try.newrelic.com/nodejs)

# javascript - IndexedDB 索引未在 chrome 中显示（使用 IDBWrapper）

> ID：15489885
> 
> 赞同：0
> 
> 时间：2013-03-19T01:16:50.030
> 
> 标签：javascript, indexeddb

我正在使用 chrome 25 和最新版本的[IDBWrapper。](https://github.com/jensarps/IDBWrapper)

我创建了一个商店：

```
var countryStore = new IDBStore({
    dbVersion: version,
    storeName: countryTable,
    keyPath: 'id',
    autoIncrement: true,
    onStoreReady: function () {
        console.log('Country store ready, go ahead!');
        americanGivingDB.countryStore.count(function (result) {
            console.log("The amount found in the countryStore was " + result);
            if(result == 0){
                initializeCountryStore(countryStore, countryDeferred);
            } else {
                countryDeferred.resolve();
            }
        });
    },
    indexes: [ {name : "areas", keypath: "area", unique: false, multiEntry:true}, {name: "years", keypath: "year", unique: false, multiEntry: true}]
}); 
```

然后，我向其中添加了大量批次：

```
for(var i = 0; i < lines.length; i++) {
   var fields = lines[i].split(", "); // Comma-separated values

   valueToAdd = {
       id: id,
       area: fields[0],
       program: fields[1],
       year: fields[2],
       amount: fields[3]                    
    }
    id++;

    operations.push( {type: "put", value: valueToAdd});
}

countryCSVxhr.onload = function(e) {  
    console.log("onload found number of operations to add are " + operations.length);
    status("country dataset downloaded, adding to local storage.");
    db.batch(operations, function (result) {
        status("finished loading the country table");
        console.log("finished loading the country table");
        americanGivingDB.countryStore.count(function (result) {
            status("country dataset added to local storage");
            console.log("The amount found in the countryStore was " + result);
            countryDeferred.resolve();
        });
    }, function (error) {
        console.log("error", error);
    });
} 
```

然后查询索引：

```
americanGivingDB.countryStore.query( function(results){
    //console.log("finished querying the store " + results);
    var returnString = "";
    for(var i = 0; i < results.length; i++){
        returnString = returnString + results[i].area + " \n";
    }
    console.log("the area names are: \n" + returnString);
    }, 
    {
        index: "areas",
        keyRange: americanGivingDB.countryStore.makeKeyRange({
            upper: "Z"
            }),
        filterDuplicates: true,
        onError: americanGivingDB.onErrorHandler
    }
); 
```

它返回一组空的结果。当我检查 chrome 内的资源时，索引是空白的，我不确定它们是否应该是。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:43:48.887

原来我的问题是一个错字。使用数据存储的构造函数时，必须非常小心大小写。“keypath”应该是“keyPath”。

```
var countryStore = new IDBStore({
dbVersion: version,
storeName: countryTable,
keyPath: 'id',
autoIncrement: true,
onStoreReady: function () {
    console.log('Country store ready, go ahead!');
    americanGivingDB.countryStore.count(function (result) {
        console.log("The amount found in the countryStore was " + result);
        if(result == 0){
            initializeCountryStore(countryStore, countryDeferred);
        } else {
            countryDeferred.resolve();
        }
    });
},
indexes: [ {name : "areas", keyPath: "area", unique: false, multiEntry:true}, {name: "years", keyPath: "year", unique: false, multiEntry: true}]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:33:15.903

我不知道出了什么问题，但是您可以试用我的库 [https://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)库可靠的事务处理。

```
var schema = {
  stores: [{
     storeName: countryTable,
     keyPath: 'id',
     autoIncrement: true,
    indexes: [ {name : "areas", keypath: "area", unique: false, multiEntry:true}]
  }]
}
var countryStore = new ydn.db.Storage('db name', schema);
countryCSVxhr.onload = function(e) { 
  // process countryData as array
  countryStore.put(countryTable, countryData);
  countryStore.count(countryTable).done(function (numberOfRecord) {
     console.log(numberOfRecord);
  });
  countryStore.values(countryTable, 'areas', IDBKeyRange.upperBound('Z')).done(function (records) {
     console.log(records);
   });
}; 
```

# c# - XAML 菜单背景颜色使用表达式 3 覆盖 WPF 中的窗口背景颜色

> ID：15489886
> 
> 赞同：0
> 
> 时间：2013-03-19T01:17:01.107
> 
> 标签：c#, wpf, expression-blend

我将 WPF 用于使用 .NET 框架 3.5 的 Visual Studio WPF 2008 项目。我对 WPF 尤其是 Expression Blend 3 都是新手，我正在尝试使用它来设计用户界面。我为主窗口定义了一个漂亮的 2 色渐变背景。当没有菜单定义时，它与以下 XAML 代码一起很好地显示：

```
<Window
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
   x:Class="XYZZY.MainWindow"
   x:Name="Window"
   Title="XYZZY Lobby" HorizontalAlignment="Center"
   Width="796" Height="480" mc:Ignorable="d">
   <Window.Background>
      <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
         <GradientStop Color="#FF434D7A" Offset="0"/>
         <GradientStop Color="#FF180CFA" Offset="1"/>
      </LinearGradientBrush>
   </Window.Background>

   <Grid x:Name="LayoutRoot" Width="764">
      <Path Fill="Black" Stretch="Fill" Stroke="Black" HorizontalAlignment="Left" Margin="-227,0,0,184" VerticalAlignment="Bottom" Width="1" Height="1" Data="M-227,256"/>
       <ListView HorizontalAlignment="Left" Width="239" Margin="0,148,0,45">
        <ListView.View>
         <GridView>
          <GridViewColumn Width="90" Header="Game" />
          <GridViewColumn Width="60" Header="Stakes" />
          <GridViewColumn Width="35" Header="Seats" />
         </GridView>
        </ListView.View>
       </ListView>
       <ListView Margin="239,148,218,45">
         <ListView.View>
            <GridView>
                <GridViewColumn Width="90" Header="Table" />
                <GridViewColumn Width="15" Header="Players" />
                <GridViewColumn Width="60" Header="Buy-in" />
                <GridViewColumn Width="50" Header="Speed" />
                <GridViewColumn Width="25" Header="H/Hr" />
                <GridViewColumn Width="35" Header="Avg Pot" />
               <GridViewColumn/>
            </GridView>
         </ListView.View>
       </ListView>
       <ListView Margin="546,148,0,45">
         <ListView.View>
            <GridView>
               <GridViewColumn Width="90" Header="Player" />
               <GridViewColumn Width="60" Header="City" />
               <GridViewColumn Width="35" Header="Chips" />
            </GridView>
         </ListView.View>
       </ListView>
       <TextBlock x:Name="LobbyServerLabel" HorizontalAlignment="Left" VerticalAlignment="Bottom" TextWrapping="Wrap" Text="Lobby Server - not connected"/>
       <TextBlock x:Name="GameServerLabel" HorizontalAlignment="Center" VerticalAlignment="Bottom" TextWrapping="Wrap"><Run Text="Game Server - not connected"/></TextBlock>
       <Label x:Name="SkinName1" Margin="8,54,0,0" VerticalAlignment="Top" Content="XYZZY" FontSize="36" Foreground="#FFD23C32" HorizontalAlignment="Left" FontFamily="Georgia" FontWeight="Bold"/>
       <Label x:Name="SkinName2" Margin="182.405,54,459,0" VerticalAlignment="Top" Content="A A" FontSize="36" Foreground="#FFD23C32" FontFamily="Georgia" FontWeight="Bold"/>
       <Image VerticalAlignment="Top" Width="41.81" Height="51.519" Source="Spade1.png" Stretch="Fill" Margin="136.595,53.384,585.595,0"/>
   </Grid>
</Window> 
```

但是，一旦我添加了一个菜单，菜单的背景颜色似乎会取代窗口其余部分的背景颜色。这是与菜单定义相同的代码：

```
<Window
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
   x:Class="AttackPoker2.MainWindow"
   x:Name="Window"
   Title="Attack Poker Lobby" HorizontalAlignment="Center"
   Width="796" Height="480" mc:Ignorable="d">
   <Window.Background>
      <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
         <GradientStop Color="#FF434D7A" Offset="0"/>
         <GradientStop Color="#FF180CFA" Offset="1"/>
      </LinearGradientBrush>
   </Window.Background>

   <Grid x:Name="LayoutRoot" Width="764">
      <Path Fill="Black" Stretch="Fill" Stroke="Black" HorizontalAlignment="Left" Margin="-227,0,0,184" VerticalAlignment="Bottom" Width="1" Height="1" Data="M-227,256"/>
        <Menu>
          <MenuItem Header="File">
            <MenuItem Header="New"></MenuItem>
            <MenuItem Header="Open"></MenuItem>
            <MenuItem Header="Save"></MenuItem>
            <Separator></Separator>
            <MenuItem Header="Exit"></MenuItem>
          </MenuItem>
          <MenuItem Header="Edit">
            <MenuItem Header="Undo"></MenuItem>
            <MenuItem Header="Redo"></MenuItem>
            <Separator>
              <Separator.Template>
                <ControlTemplate>
                  <Border CornerRadius="2" Padding="5" BorderBrush="Black" BorderThickness="1" Background="PaleGoldenrod">
                    <TextBlock FontWeight="Bold">
                      Editing Commands
                    </TextBlock>
                  </Border>
                </ControlTemplate>
              </Separator.Template>
            </Separator>
            <MenuItem Header="Cut"></MenuItem>
            <MenuItem Header="Copy"></MenuItem>
            <MenuItem Header="Paste"></MenuItem>
          </MenuItem>
        </Menu>
       <ListView HorizontalAlignment="Left" Width="239" Margin="0,148,0,45">
        <ListView.View>
         <GridView>
          <GridViewColumn Width="90" Header="Game" />
          <GridViewColumn Width="60" Header="Stakes" />
          <GridViewColumn Width="35" Header="Seats" />
         </GridView>
        </ListView.View>
       </ListView>
       <ListView Margin="239,148,218,45">
         <ListView.View>
            <GridView>
                <GridViewColumn Width="90" Header="Table" />
                <GridViewColumn Width="15" Header="Players" />
                <GridViewColumn Width="60" Header="Buy-in" />
                <GridViewColumn Width="50" Header="Speed" />
                <GridViewColumn Width="25" Header="H/Hr" />
                <GridViewColumn Width="35" Header="Avg Pot" />
               <GridViewColumn/>
            </GridView>
         </ListView.View>
       </ListView>
       <ListView Margin="546,148,0,45">
         <ListView.View>
            <GridView>
               <GridViewColumn Width="90" Header="Player" />
               <GridViewColumn Width="60" Header="City" />
               <GridViewColumn Width="35" Header="Chips" />
            </GridView>
         </ListView.View>
       </ListView>
       <TextBlock x:Name="LobbyServerLabel" HorizontalAlignment="Left" VerticalAlignment="Bottom" TextWrapping="Wrap" Text="Lobby Server - not connected"/>
       <TextBlock x:Name="GameServerLabel" HorizontalAlignment="Center" VerticalAlignment="Bottom" TextWrapping="Wrap"><Run Text="Game Server - not connected"/></TextBlock>
       <Label x:Name="SkinName1" Margin="8,54,0,0" VerticalAlignment="Top" Content="Attack" FontSize="36" Foreground="#FFD23C32" HorizontalAlignment="Left" FontFamily="Georgia" FontWeight="Bold"/>
       <Label x:Name="SkinName2" Margin="182.405,54,459,0" VerticalAlignment="Top" Content="Poker" FontSize="36" Foreground="#FFD23C32" FontFamily="Georgia" FontWeight="Bold"/>
       <Image VerticalAlignment="Top" Width="41.81" Height="51.519" Source="Spade1.png" Stretch="Fill" Margin="136.595,53.384,585.595,0"/>
   </Grid>
</Window> 
```

我曾尝试移动菜单定义，但这无济于事。有人可以解释一下我如何在 Expression Blend 3 中指定或使用 C# 代码使菜单的背景颜色仅适用于菜单而不适用于其他任何东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:43:53.573

Pretty easy to solve. In Blend 3\. under the Layout tab, there is a horizontal alignment and vertical alignment property. Both of these were set to stretch. Have no idea how they got that way. But, in any case they should be set to Left and Top respectively. That puts the menu in the top left hand corner and solves the problem of the menu trying to take control of the background color of the entire window.

# php - 在 python 的请求中添加 Http_X_Forwarded_For 标头

> ID：15489889
> 
> 赞同：2
> 
> 时间：2013-03-19T01:17:17.943
> 
> 标签：php, python, http-headers

我在 Web 服务器中有一个小的 PHP 代码。PHP 代码只记录使用此行发出请求的人的 IP：

```
 $ip = !empty($_SERVER['HTTP_X_FORWARDED_FOR']) ? $_SERVER['HTTP_X_FORWARDED_FOR'] : $_SERVER['REMOTE_ADDR'];
echo 'Your IP is:'.$ip 
```

我想做的是在 python 中创建一段代码，它使用 HTTP_X_FORWARDED_FOR 标头来强制网络服务器记录除真实 IP 之外的其他 IP。我写了这段代码：

```
import urllib2,cookielib

cj = cookielib.CookieJar() 
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
opener.addheaders = [('HTTP_X_FORWARDED_FOR','1.2.3.4'),]
resp=opener.open('http://example.com/logIP.php') 
```

如果我在我的 puthon 代码中设置了 PHP 代码，为什么它不显示 1.2.3.4？我必须如何强制网络应用程序向我显示“假”IP？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T01:21:22.077

标头应`X-Forwarded-For`位于 urllib (Python) 端。然后，您的网络服务器将其读取到您从中读取的`HTTP_X_FORWARDED_FOR`环境变量中`$_SERVER`。

```
opener.addheaders = [('X-Forwarded-For','1.2.3.4'),] 
```

# python - 如何拆分字符串并将其子字符串与子字符串列表匹配？- Python

> ID：15489893
> 
> 赞同：1
> 
> 时间：2013-03-19T01:18:19.487
> 
> 标签：python, string, dictionary, substring, string-matching

我需要在不更改字符顺序的情况下将字符串拆分为所有可能的方式。*我知道这个任务可以被视为 NLP 中的标记化或词形还原，但我正在从更简单、更健壮的纯字符串搜索角度尝试它。*鉴于，

```
dictionary = ['train','station', 'fire', 'a','trainer','in']
str1 = "firetrainstation" 
```

**任务 1：**我如何生成所有可能的子字符串，以便我得到：

```
all_possible_substrings = [['f','iretrainstation'],
['fo','retrainstation'], ...
['firetrainstatio','n'],
['f','i','retrainstation'], ... , ...
['fire','train','station'], ... , ...
['fire','tr','a','instation'], ... , ...
['fire','tr','a','in','station'], ... , ...
['f','i','r','e','t','r','a','i','n','s','t','a','t','i','o','n'] 
```

**任务 2：**然后从`all_possible_substring`，我如何检查以查看并说包含字典中所有元素的子字符串集是正确的输出。所需的输出将是字典中从左到右匹配最多字符的子字符串列表。所需的输出是：

```
"".join(desire_substring_list) == str1 and \
[i for i desire_substring_list if in dictionary] == len(desire_substring_list)
#(let's assume, the above condition can be true for any input string since my english
#language dictionary is very big and all my strings are human language 
#just written without spaces) 
```

期望的输出：

```
'fire','train','station' 
```

**我做了什么？**

对于**任务 1**，我已经这样做了，但我知道它不会给我所有可能的空白插入：

```
all_possible_substrings.append(" ".join(str1)) 
```

我已经这样做了，但这仅执行**任务 2**：

```
import re
seed = ['train','station', 'fire', 'a','trainer','in']
str1 = "firetrainstation"
all_possible_string = [['f','iretrainstation'],
['fo','retrainstation'],
['firetrainstatio','n'],
['f','i','retrainstation'], 
['fire','train','station'], 
['fire','tr','a','instation'], 
['fire','tr','a','in','station'], 
['f','i','r','e','t','r','a','i','n','s','t','a','t','i','o','n']]
pattern = re.compile(r'\b(?:' + '|'.join(re.escape(s) for s in seed) + r')\b')
highest_match = ""
for i in all_possible_string:
  x = pattern.findall(" ".join(i))
  if "".join(x) == str1 and len([i for i in x if i in seed]) == len(x):
    print " ".join(x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:17:31.287

对于第一部分，您可以编写一个类似于此的递归生成器：

```
>>> def all_substr(string):
    for i in range(len(string)):

        if i == len(string) - 1:
            yield string

        first_part = string[0:i+1]
        second_part = string[i+1:]

        for j in all_substr(second_part):
            yield ','.join([first_part, j])

>>> for x in all_substr('apple'):
    print(x)

a,p,p,l,e
a,p,p,le
a,p,pl,e
a,p,ple
a,pp,l,e
a,pp,le
a,ppl,e
a,pple
ap,p,l,e
ap,p,le
ap,pl,e
ap,ple
app,l,e
app,le
appl,e
apple 
```

# xslt - 如何从 xslt 中带有冒号的属性中选择值？

> ID：15489895
> 
> 赞同：0
> 
> 时间：2013-03-19T01:18:23.600
> 
> 标签：xslt, xml-parsing, xslt-1.0

我正在使用 xslt 来处理从 Web 服务返回的结果。我首先需要确定结果用于哪个 Web 服务。我知道标签 platformCore:record 具有属性“xsi:type="listRel:Contact 或“xsi:type="listEmp:Employee"。我正在尝试选择该属性存储的值，但冒号似乎当我尝试选择值时会引起一些问题。

这是我尝试过的，但无法正常工作。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
<xsl:template match="/">

<xsl:variable name="Type"><xsl:value-of select="//*[local-name()='searchResponse']//*[local-name()='searchResult']//*[local-name()='recordList']//*[local-name()='record']@xsi:type"/></xsl:variable>

<root>
<test><xsl:value-of select="$Type"/></test>
</root>
</xsl:template>
</xsl:stylesheet> 
```

这是一个简单的示例

```
<?xml version="1.0" encoding="UTF-8"?>
<searchResponse:searchResponse xmlns="urn:messages_2012_2.platform.webservices.itsthesuite.com" 
                               xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                               xmlns:searchResponse="urn:messages_2012_2.platform.webservices.itsthesuite.com"
                               xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <platformCore:searchResult xmlns:platformCore="urn:core_2012_2.platform.webservices.itsthesuite.com">
    <platformCore:status isSuccess="true"/>
    <platformCore:totalRecords>1</platformCore:totalRecords>
    <platformCore:recordList>
      <platformCore:record internalId="154098" xsi:type="listRel:Contact" xmlns:listRel="urn:relationships_2012_2.lists.webservices.itsthesuite.com">
        <listRel:entityId>John Smith</listRel:entityId>
        <listRel:firstName>John</listRel:firstName>
        <listRel:lastName>Smith</listRel:lastName>
        <listRel:phone>(777) 777-7777</listRel:phone>
        <listRel:email>john.smith@yormoms.com</listRel:email>
      </platformCore:record>
    </platformCore:recordList>
  </platformCore:searchResult>
</searchResponse:searchResponse> 
```

我也需要适用于此示例的解决方案。

员工样本

```
 <?xml version="1.0" encoding="UTF-8"?>
<searchResponse xmlns="urn:messages_2012_2.platform.webservices.netsuite.com" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:searchResponse="urn:messages_2012_2.platform.webservices.netsuite.com" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<platformCore:searchResult xmlns:platformCore="urn:core_2012_2.platform.webservices.netsuite.com" >
<platformCore:status isSuccess="true"/>
<platformCore:totalRecords>1</platformCore:totalRecords>
<platformCore:recordList>
<platformCore:record internalId="158778" xsi:type="listEmp:Employee" xmlns:listEmp="urn:employees_2012_2.lists.webservices.netsuite.com">
<listEmp:entityId>331sfds Dipo  Chaponda</listEmp:entityId>
<listEmp:salutation>Mr.</listEmp:salutation>
<listEmp:firstName>Dipo</listEmp:firstName>
<listEmp:lastName>Chaponda</listEmp:lastName>
<listEmp:email>dchapond@youmm.com</listEmp:email>
</platformCore:record>
</platformCore:recordList>
</platformCore:searchResult>
</searchResponse> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:23:37.240

您可以使用本地名称选择属性，类似于您已经在做的事情，但通过在 * 前面加上 @：

```
@*[local-name() = 'type'] 
```

但是，用双斜杠乱扔您的 XPath`local-name() =`并不是一个好习惯。您应该正确使用命名空间，并在已知路径时使用精确路径，尽管这似乎不是您案例中元素的选项，因为它们在两个示例中使用不同的命名空间。这应该有效：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                exclude-result-prefixes="sr pc xsi"
                >

  <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
  <xsl:template match="/">

    <xsl:variable name="Type">
      <xsl:value-of select="*[local-name() = 'searchResponse']/
                            *[local-name() = 'searchResult']/
                            *[local-name() = 'recordList']/
                            *[local-name() = 'record']/
                            @xsi:type"/>
    </xsl:variable>

    <root>
      <test>
        <xsl:value-of select="$Type"/>
      </test>
    </root>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生预期的结果：

```
<root>
  <test>listRel:Contact</test>
</root> 
```

# c# - 我应该如何将一个表单的 listView.item 克隆到另一个表单的 listView？

> ID：15489899
> 
> 赞同：0
> 
> 时间：2013-03-19T01:18:45.183
> 
> 标签：c#

```
mainform main = new mainform();
            main.ShowDialog();
            ListViewItem itemClone;
            ListView.ListViewItemCollection coll = main.listView2.Items;
            foreach (ListViewItem item in coll)
            {
                itemClone = item.Clone() as ListViewItem;
                main.listView2.Items.Remove(item);
                listView2.Items.Add(itemClone);
            } 
```

我该怎么做这个？没有将我的 listView 克隆到另一个表单的另一个 listView 的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:36:45.770

您没有从主窗体 Listview 中获取值，因为您将主窗体声明为新实例。

将所有这些代码放到您的 mainform.Listview2 中，而是声明目标列表视图的新实例。

# c# - 如何访问 Post 数据以访问 windows phone 中的登录数据

> ID：15489900
> 
> 赞同：1
> 
> 时间：2013-03-19T01:18:48.710
> 
> 标签：c#, windows-phone-7, windows-phone-8, http-post

如何通过`POST DATA`下面的访问登录验证并从httpFox获取登录网站。在其他时候，我尝试测试该`GetRequestStreamCallback()`操作是否会起作用，我发现该操作不起作用并且它以`DoWork()`. 为什么它不继续做`GetRequestStreamCallback()`操作。谢谢你帮助我。

发布数据

```
Parameter                         value
__EVENTTARGET
__EVENTARGUMENT
__VIEWSTATE                       /wEPDwUIMTQwOTY1MTgPZBYCAgMPZBYEAgEPZBYCZg9kFgICAQ9kFgJmD2QWAgINDxAPFgIeB0NoZWNrZWRoZGRkZAIFDzwrAAgCAA8WBB4PRGF0YVNvdXJjZUJvdW5kZx4OXyFVc2VWaWV3U3RhdGVnZAYPFgIeCklzU2F2ZWRBbGxnDxQrAAkUKwABFgIeDlJ1bnRpbWVDcmVhdGVkZxQrAAEWAh8EZxQrAAEWAh8EZxQrAAEWAh8EZxQrAAEWAh8EZxQrAAEWAh8EZxQrAAEWAh8EZxQrAAEWAh8EZxQrAAEWAh8EZ2QWAmYPZBYCAgEPZBYCZg9kFgJmD2QWAmYPZBYCZg9kFgICAg9kFgJmD2QWAmYPZBYCZg9kFgZmD2QWBmYPZBYCZg9kFgJmD2QWCAIBDw8WAh4ISW1hZ2VVcmwFG34vcHJvZHVjdGltYWdlL0NBRDAwNTQ3LmpwZ2RkAgMPDxYCHgRUZXh0BQhDQUQwMDU0N2RkAgUPDxYCHwYFVENBUkQgUFJFUFJJTlQgS0lOT0tVTklZQSBQVkMgSVNPIDAuNzZNTSA1QyAxQyAgRk9SIFBSRVBSSU5UIEtJTk9LVU5JWUEgQ0FSRCBERVNJR04gMmRkAgcPDxYCHwYFD1BSRVBSSU5URUQgQ0FSRGRkAgIPZBYCZg9kFgJmD2QWCAIBDw8WAh8FBRt+L3Byb2R1Y3RpbWFnZS9CQVIwMTE1NC5qcGdkZAIDDw8WAh8GBQhCQVIwMTE1NGRkAgUPDxYCHwYFLEdGUzQ0NzAgR1JZUEhPTiBHRlM0NDAwIEZJWEVEIFNDQU5ORVIgMkQgVVNCZGQCBw8PFgIfBgUHR1JZUEhPTmRkAgQPZBYCZg9kFgJmD2QWCAIBDw8WAh8FBRt+L3Byb2R1Y3RpbWFnZS9CQVIwMTE1My5qcGdkZAIDDw8WAh8GBQhCQVIwMTE1M2RkAgUPDxYCHwYFVkJDUDgwMDBFWFQ1IEVYVEVOREVEIDUgKDQrMSkgWUVBUlMgTUFOVUZBQ1RVUklORyBERUZFQ1QgV0FSUkFOVFkgQkNQODAwMCBEQVRBIFRFUk1JTkFMZGQCBw8PFgIfBgUPQkFSQ09ERSBTQ0FOTkVSZGQCAg9kFgZmD2QWAmYPZBYCZg9kFggCAQ8PFgIfBQUbfi9wcm9kdWN0aW1hZ2UvQkFSMDExNTIuanBnZGQCAw8PFgIfBgUIQkFSMDExNTJkZAIFDw8WAh8GBVZCQ1A4MDAwRVhUMyBFWFRFTkRFRCAzICgyKzEpIFlFQVJTIE1BTlVGQUNUVVJJTkcgREVGRUNUIFdBUlJBTlRZIEJDUDgwMDAgREFUQSBURVJNSU5BTGRkAgcPDxYCHwYFD0JBUkNPREUgU0NBTk5FUmRkAgIPZBYCZg9kFgJmD2QWCAIBDw8WAh8FBRt+L3Byb2R1Y3RpbWFnZS9CQVIwMTE1MS5qcGdkZAIDDw8WAh8GBQhCQVIwMTE1MWRkAgUPDxYCHwYFTFBIRDIwMjI2MTAxIFRQSCBUSEVSTUFMIFBSSU5USEVBRCAyMDNEUEkgRk9SIERBVEFNQVggRE1YIE0gQ0xBU1MgTUlJIFBSSU5URVJkZAIHDw8WAh8GBQ9EQVRBTUFYIE0gQ0xBU1NkZAIED2QWAmYPZBYCZg9kFggCAQ8PFgIfBQUbfi9wcm9kdWN0aW1hZ2UvQkFSMDExNTAuanBnZGQCAw8PFgIfBgUIQkFSMDExNTBkZAIFDw8WAh8GBTlCQ1A4MDAwIERBVEEgVEVSTUlOQUwgTEFTRVIgMU1CLzRNQiBSUzIzMiBVU0IgQ0FCTEUgQkxBQ0tkZAIHDw8WAh8GBQ9CQVJDT0RFIFNDQU5ORVJkZAIED2QWBmYPZBYCZg9kFgJmD2QWCAIBDw8WAh8FBRt+L3Byb2R1Y3RpbWFnZS9CQVIwMTE0OS5qcGdkZAIDDw8WAh8GBQhCQVIwMTE0OWRkAgUPDxYCHwYFPFBNNDNBMDEwMDAwMDAzMDEgUE00M0EgNC41SU5DSCAzMDBEUEkgRlQgUk9XIEVUSEVSTkVUIDEyOE1CIGRkAgcPDxYCHwYFBVBNNDNBZGQCAg9kFgJmD2QWAmYPZBYIAgEPDxYCHwUFG34vcHJvZHVjdGltYWdlL0JBUjAxMTQ4LmpwZ2RkAgMPDxYCHwYFCEJBUjAxMTQ4ZGQCBQ8PFgIfBgVhWlNONVNLUjUxIFNLT1JQSU9YMyAxNFdPUktJTkcgREFZUyBUVVJOQVJPVU5EIEVBU0UgT0YgQ0FSRSBDT01QUkVIRU5TSVZFIENPVkVSQUdFIDUtWUVBUiBQQUNLQUdFRGRkAgcPDxYCHwYFCVNLT1JQSU9YM2RkAgQPZBYCZg9kFgJmD2QWCAIBDw8WAh8FBRt+L3Byb2R1Y3RpbWFnZS9TVkMwMDEyNC5qcGdkZAIDDw8WAh8GBQhTVkMwMDEyNGRkAgUPDxYCHwYFSVNFTlRJTkVMIDIwMTIgREFUQSBFWENIQU5HRSBJTlNUQUxMQVRJT04gVEVTSU5HIEFORCBUUkFJTklORyBPTlNJVEUgMSBEQVlkZAIHDw8WAh8GBQhTRU5USU5BTGRkGAIFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYCBRxMb2dpblZpZXcxJExvZ2luMSRSZW1lbWJlck1lBQ1BU1B4RGF0YVZpZXcxBQ1BU1B4RGF0YVZpZXcxDxQrAAdkZmYCA2YCFGdkMBSkuj/XQpQVVL41154MjHTriF3AqkB5ahYmcD10itw=
__EVENTVALIDATION                 /wEWBgLiiri0BQKRyKzhAgKUxtegDAKi77CUBwKd6MPGBALNx9K3CuAiLP9Qxn4q+Nwy4Hl2t5zaXX+GadHLKCF8sJn6YTar
LoginView1$Login1$UserName        USERNAME
LoginView1$Login1$Password        PASSWORD
LoginView1$Login1$LoginButton     Log In
ASPxDataView1                     0;3;3
DXScript                          1_141,1_79,1_123,1_82 
```

下面的代码是我到目前为止的工作。

```
public void DoWork()
    {
        var url = "xxxxxxxx";
        // Create the web request object
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
        webRequest.Method = "POST";
        webRequest.ContentType = "application/x-www-form-urlencoded";
        // Start the request
        webRequest.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), webRequest);    
    }
void GetRequestStreamCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
    // End the stream request operation
    Stream postStream = webRequest.EndGetRequestStream(asynchronousResult);
    // Create the post data
    // Demo POST data 
    string postData = 
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    // Add the post data to the web request
    postStream.Write(byteArray, 0, byteArray.Length);
    postStream.Close();
    // Start the web request
    webRequest.BeginGetResponse(new AsyncCallback(GetResponseCallback), webRequest);
}

void GetResponseCallback(IAsyncResult asynchronousResult)
{
    try
    {
        HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
        HttpWebResponse response;
        // End the get response operation
        response = (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult);
        Stream streamResponse = response.GetResponseStream();
        StreamReader streamReader = new StreamReader(streamResponse);
        var Response = streamReader.ReadToEnd();
        streamResponse.Close();
        streamReader.Close();
        response.Close();
    }
    catch (WebException e)
    {
        // Error treatment
        // ...
    }
}

private void button1_Click(object sender, RoutedEventArgs e)
{
    DoWork();
} 
```

# android - Android浏览器中的段落（部分）宽度更改大小

> ID：15489901
> 
> 赞同：0
> 
> 时间：2013-03-19T01:18:53.823
> 
> 标签：android, css, html

我为客户端创建了一个网站，该网站可以在除 Android 之外的所有 Web 浏览器上运行。由于未知的原因，Android 浏览器调整了我的菜单栏以及部分取决于它正在运行的手机。

如果您想查看代码，请转到[此链接](http://tworoxdesign.com/EES/)

这是 Galaxy Nexus 的屏幕截图

[来自 Galaxy Nexus 的屏幕截图](http://tworoxdesign.com/images/Screen%20Shot%202013-03-19%20at%2001.12.13.png)

如您所见，文本已被推入一个又高又细的列。我不知道它为什么这样做。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:13:15.107

`#AboutUs`从 Style.Css 中的 #AboutUs 行 445 中删除所有内容。

**前**

```
#AboutUs 
{
height: 655px;
} 
```

**后**

```
#AboutUs 
{
} 
```

至于页脚，从其 css 中删除宽度（#legal）（Style.CSS 中的第 693 行）

**前**

```
#legal 
{
position: relative; 
font-size: 10px;
margin: 0px auto;
width: 130px;
padding: 0px;
line-height: 1.1em;
text-align: center;
color: #606060;
top: 5px;
} 
```

**后**

```
#legal 
{
position: relative; 
font-size: 10px;
margin: 0px auto;
padding: 0px;
line-height: 1.1em;
text-align: center;
color: #606060;
top: 5px;
} 
```

# java - Java 文件输入流

> ID：15489903
> 
> 赞同：3
> 
> 时间：2013-03-19T01:19:09.660
> 
> 标签：java, bytearray, java-io, fileinputstream

我正在尝试使用 FileInputStream 从本质上读取文本文件，然后将其输出到不同的文本文件中。但是，当我这样做时，我总是得到非常奇怪的字符。我确定这是我犯的一些简单错误，感谢您的帮助或为我指明正确的方向。这是我到目前为止所得到的。

```
 File sendFile = new File(fileName);
    FileInputStream fileIn = new FileInputStream(sendFile);
    byte buf[] = new byte[1024];
    while(fileIn.read(buf) > 0) {
        System.out.println(buf);
    } 
```

它正在读取的文件只是一个常规 ASCII 字符的大文本文件。然而，每当我执行 system.out.println 时，我都会得到输出 [B@a422ede. 关于如何使这项工作的任何想法？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T01:21:50.343

发生这种情况是因为您正在打印字节数组对象本身，而不是打印其内容。您应该从缓冲区和长度构造一个字符串，然后打印该字符串。用于此的构造函数是

```
String s = new String(buf, 0, len, charsetName); 
```

上面，len 应该是调用 read() 方法返回的值。charsetName 应该代表底层文件使用的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:31:05.927

如果您正在从一个文件读取到另一个文件，则根本不应该将字节转换为字符串，只需将读取的字节写入另一个文件即可。

如果您的意图是将文本文件从一种编码转换为另一种编码，请从 a 读取`new InputStreamReader(in, sourceEncoding)`并写入 a `new OutputStreamWriter(out, targetEncoding)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:37:24.137

那是因为打印`buf`将打印对字节数组的引用，而不是像您期望的那样将字节本身打印为字符串。您需要`new String(buf)`将字节数组构造成字符串

还可以考虑使用 BufferedReader 而不是创建自己的缓冲区。有了它，你就可以做到

```
String line = new BufferedReader(new FileReader("filename.txt")).readLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T04:49:01.243

您的循环应如下所示：

```
int len;
while((len = fileIn.read(buf)) > 0) {
        System.out.write(buf, 0, len);
    } 
```

您（a）使用了错误的方法和（b）忽略了返回的长度`read()`，而不是检查它`< 0.`所以您在每个缓冲区的末尾打印垃圾。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T01:41:31.557

object 的默认 toString 方法是在内存中返回 object 的 id。字节 buf[] 是一个对象。

您可以使用它进行打印。

```
File sendFile = new File(fileName);
FileInputStream fileIn = new FileInputStream(sendFile);
byte buf[] = new byte[1024];

while(fileIn.read(buf) > 0) {
    System.out.println(Arrays.toString(buf));
} 
```

或者

```
 File sendFile = new File(fileName);
FileInputStream fileIn = new FileInputStream(sendFile);
byte buf[] = new byte[1024];
int len=0;
while((len=fileIn.read(buf)) > 0) {
    for(int i=0;i<len;i++){
        System.out.print(buf[i]);
    }
    System.out.println();
} 
```

# ruby-on-rails - HAML - “！=”运算符做什么？

> ID：15489904
> 
> 赞同：1
> 
> 时间：2013-03-19T01:19:24.040
> 
> 标签：ruby-on-rails, haml

我现在正在查看一些看似标准的 Haml 代码，但只是注意到它以“！=”开头，并且 5 分钟的谷歌搜索未能给我答案：

```
#What does the '!=' mean? 
!= cache_content_if_not_prefetched(params) do
  -if product_live?
    =render :partial => 'products/product_tile'
  -else
    =render :partial => 'products/unavailable_product_tile' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T01:28:19.590

与使用相同，`=`但不清理 HTML

见[http://haml.info/docs/yardoc/file.REFERENCE.html#unescaping_html](http://haml.info/docs/yardoc/file.REFERENCE.html#unescaping_html)

```
!= "Look  <up>!" 
```

编译为

```
Look <up>! 
```

代替

```
Look &ltg;up&gt; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:23:23.513

用于[Unescaping html](http://haml.info/docs/yardoc/file.REFERENCE.html#unescaping_html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:25:40.580

阅读此[HAML 文档](http://haml.info/docs/yardoc/file.REFERENCE.html)。它会给你所有你需要的答案。我刚刚搜索了 HAML 标签。

为 != 执行 CTRL+F。!= 基本上像 equals 一样评估 Ruby 代码

# iphone - 从 int 中减去 1 表现得很奇怪

> ID：15489906
> 
> 赞同：-3
> 
> 时间：2013-03-19T01:19:34.013
> 
> 标签：iphone, objective-c

这似乎是一个非常愚蠢的问题。但我想做的只是`1`从我的 int 中减去。

```
 int *subtractor = [[[NSUserDefaults standardUserDefaults]objectForKey:@"numberOfAlerts"] intValue];
    NSLog(@"%i", subtractor);
    subtractor--;
    NSLog(@"%d", subtractor);
    NSNumber *savedNumber = [NSNumber numberWithInt:subtractor];
    [[NSUserDefaults standardUserDefaults]setObject:savedNumber forKey:@"numberOfAlerts"];
    [[NSUserDefaults standardUserDefaults]synchronize]; 
```

控制台打印出：

`1` `-3`

当它从默认值加载信息时，`1`这很好。然后我尝试减去 1 使其为 0，但它变为 -3。这太令人沮丧了！任何帮助是极大的赞赏！

**作为记录**

我将代码更改为减法器++；它应该已经打印出来了`1` `2`。

但它打印出来了`1` `5`。所以它增加了四个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:35:45.830

`intValue`返回一个 int，而不是指向 int 的指针。

您必须将减法器声明为 int：

```
 int subtractor = [[[NSUserDefaults standardUserDefaults]objectForKey:@"numberOfAlerts"] intValue]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:22:56.073

减法器是一个指向 int 的指针，代码是递减指针，而不是 int。尝试`(*subtractor)--`

# ios - iOS [__NSCFString > objectForKeyedSubscript:]：

> ID：15489909
> 
> 赞同：-2
> 
> 时间：2013-03-19T01:20:03.163
> 
> 标签：ios, json, twitter, ios6

我正在尝试在我的 iOS 应用程序中实现一个带有 twitter 提要的 tableview。我已经按照教程进行操作，并且能够获取用户的 Twitter 提要。我找到了哈希标签的 url，但在实现时出现错误：

> 'NSInvalidArgumentException'，原因：'-[__NSCFString objectForKeyedSubscript:]：无法识别的选择器发送到实例 0xa0b7e20'

我试图做一些研究，但所有尝试都失败了。任何建议都会很棒。谢谢你。

。H

```
#import <UIKit/UIKit.h>
#import <Social/Social.h>
#import <Accounts/Accounts.h>
@interface ViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>
@property (strong, nonatomic) IBOutlet UITableView *tweetTableView;
@property (nonatomic, copy) NSArray *dataSource;
-(IBAction)refresh:(id)sender;
@end 
```

.m

```
@implementation ViewController

- (void)getTimeLine {
    ACAccountStore *account = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [account
                                  accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [account requestAccessToAccountsWithType:accountType
                                     options:nil completion:^(BOOL granted, NSError *error)
     {
         if (granted == YES)
         {
             NSArray *arrayOfAccounts = [account
                                         accountsWithAccountType:accountType];

             if ([arrayOfAccounts count] > 0)
             {
                 ACAccount *twitterAccount = [arrayOfAccounts lastObject];
                 /*                 NSString * kTwitterHashtag = @"#nasa";
                  NSString * kTwitterUsername = @"";

                  // Looking for #kTwitterHashtag or @kTwitterUsername
                  NSString *urlString = [[[@"http://search.twitter.com/search.json?q=%23" stringByAppendingString:(NSString *)kTwitterHashtag]
                  stringByAppendingString:@"+OR+%40"] stringByAppendingString:(NSString *)kTwitterUsername];

                  NSURL *requestURL = [NSURL URLWithString:urlString];
                 */ 
                 NSURL *requestURL = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/home_timeline.json"];

                 NSMutableDictionary *parameters =
                 [[NSMutableDictionary alloc] init];
                 [parameters setObject:@"20" forKey:@"count"];
                 [parameters setObject:@"1" forKey:@"include_entities"];

                 SLRequest *postRequest = [SLRequest
                                           requestForServiceType:SLServiceTypeTwitter
                                           requestMethod:SLRequestMethodGET
                                           URL:requestURL parameters:parameters];

                 postRequest.account = twitterAccount;

                 [postRequest performRequestWithHandler:
                  ^(NSData *responseData, NSHTTPURLResponse
                    *urlResponse, NSError *error)
                  {
                      self.dataSource = [NSJSONSerialization
                                         JSONObjectWithData:responseData
                                         options:NSJSONReadingMutableLeaves
                                         error:&error];

                      if (self.dataSource.count != 0) {
                          dispatch_async(dispatch_get_main_queue(), ^{
                              [self.tweetTableView reloadData];
                              NSLog(@"_dataSource.count %d",_dataSource.count);
                              for(NSDictionary * tweet in _dataSource){
                                  NSLog(@"tweet : %@",tweet[@"text"]);
                              }
                          });
                      }
                  }];
             }
         } else {
             // Handle failure to get account access
         }
     }];
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    _tweetTableView = [[UITableView alloc] init];
    _dataSource = [[NSArray alloc] init];
    [self getTimeLine];
}
-(IBAction)refresh:(id)sender{
    [self getTimeLine];
    [self.tweetTableView reloadData];
}
#pragma mark -
#pragma mark UITableViewDataSource
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return _dataSource.count;
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tweetTableView
                             dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *tweet = _dataSource[[indexPath row]];
    NSLog(@"tweet : %@",tweet);
    cell.textLabel.text = tweet[@"text"];
    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:23:04.740

```
 self.dataSource = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error]; 
```

这正在返回一个字符串......但你将它分配给一个 NSArray！

# java - 此网页在 spring-security 应用程序中有一个重定向循环

> ID：15489911
> 
> 赞同：12
> 
> 时间：2013-03-19T01:20:20.953
> 
> 标签：java, spring, spring-mvc, spring-security

我在 Spring 中有一个使用 Spring Security 的 Web 应用程序，当我尝试执行它说的应用程序时

```
This webpage has a redirect loop 
```

这是我`security-context.xml`添加后的唯一我得到这个异常

```
<?xml version="1.0" encoding="UTF-8"?>

<b:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:b="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <!-- HTTP security configurations -->
    <http use-expressions="true">
        <form-login login-processing-url="/resources/j_spring_security_check"
            login-page="/login" authentication-failure-url="/login?login_error=t" />
        <logout logout-url="/resources/j_spring_security_logout" />
        <intercept-url pattern="/**" access="isAuthenticated()" />
        <intercept-url pattern="/login*" access="permitAll()" />
        <intercept-url pattern="/resources/**" access="permitAll()" />

    </http>

    <!-- Configure Authentication mechanism -->
    <authentication-manager alias="authenticationManager">
        <authentication-provider>
            <user-service>
                <user name="admin" password="admin" authorities="RIGHT_LIST,RIGHT_CANCEL,RIGHT_CREATE,RIGHT_UPDATE" />
                <user name="antony" password="antony" authorities="RIGHT_LIST,RIGHT_CANCEL,RIGHT_CREATE,RIGHT_UPDATE" />
                <user name="rod" password="rod" authorities="RIGHT_LIST,RIGHT_CREATE"/>
            </user-service>
        </authentication-provider>
    </authentication-manager>

    <global-method-security secured-annotations="enabled" pre-post-annotations="enabled">
        <expression-handler ref="expHandler"/>
    </global-method-security>

    <b:bean id="expHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
        <b:property name="permissionEvaluator">
            <b:bean  class="com.anto.springsec.security.CreateContactPermissionEvaluator"/>
        </b:property>
    </b:bean>

</b:beans> 
```

我有一个 login.jsp 和一个 createContact.jsp

这是我的家庭控制器：

```
package com.anto.springsec.controllers;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

/**
 * Handles requests for the application home page.
 */
@Controller
public class HomeController {

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/login", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {
        logger.info("Welcome home! The client locale is {}.", locale);

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        String formattedDate = dateFormat.format(date);

        model.addAttribute("serverTime", formattedDate );

        return "login";
    }

} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T01:48:19.270

我相信这里的顺序很重要，而且您的模式`intercept-url`似乎也在吞噬。`/**``/login``/resources`

试试这个：-

```
<http pattern="/resources/**" security="none"/>
<http pattern="/login" security="none"/>

<http use-expressions="true">
    <form-login login-processing-url="/resources/j_spring_security_check"
        login-page="/login" authentication-failure-url="/login?login_error=t" />
    <logout logout-url="/resources/j_spring_security_logout" />
    <intercept-url pattern="/**" access="isAuthenticated()" />
</http> 
```

此配置与我现有的项目之一非常相似。

**更新**

这是我目前在我的项目中使用的配置：-

```
<security:http pattern="/resources/**" security="none"/>
<security:http pattern="/login" security="none"/>
<security:http pattern="/error/**" security="none"/>

<security:http auto-config="true">
    <security:form-login login-page="/login"
                         authentication-failure-url="/login?login_error=1"
                         default-target-url="/"
                         always-use-default-target="true"/>
    <security:logout logout-success-url="/"/>
    <security:intercept-url pattern="/**" access="ROLE_USER"/>
</security:http> 
```

**2013 年 3 月 19 日**

为了`security`在标签中使用属性`http`，您将需要 Spring Security 3.1 ... 请参阅[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#new- 3.1ns](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#new-3.1-ns)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T05:29:23.620

试试这个

改变

`<intercept-url pattern="/login*" access="permitAll()" />`

到

```
<intercept-url pattern="/login*" access="IS_AUTHENTICATED_ANONYMOUSLY" /> 
```

**或者**

```
<intercept-url pattern="/login*" access="isAnonymous()" /> 
```

因为你有表达真我认为你必须使用 isAnonymous()

[查看文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)

intercept-url 元素表示对登录页面的任何请求都应该可供匿名用户使用。否则请求将被模式 /** 匹配，并且无法访问登录页面本身！这是一个常见的配置错误，会导致应用程序出现无限循环。[从这里阅读更多](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html)

# ios - iOS 异步聊天

> ID：15489912
> 
> 赞同：0
> 
> 时间：2013-03-19T01:20:23.450
> 
> 标签：ios, asynchronous

我正在编写一个需要“聊天”功能的 iPhone 应用程序。用户会将消息发布到墙上。

我想要这样的功能，当用户发布到墙上时，另一个用户（在不同的设备上）将以最小的延迟看到消息。

我可以通过每隔一段时间查询服务器来做到这一点，但我更喜欢异步做事。

发布新消息后，如何向设备发送异步消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:26:32.673

我不知道您在为 iOS 平台开发方面有多少经验... [XMPPFramework](https://github.com/robbiehanson/XMPPFramework)这是一个很棒的开源框架，完全可以满足您的需求.. 聊天！这是一个[教程](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)...

# apache-flex - PDF 不再在 Flex Air 应用程序上加载

> ID：15489914
> 
> 赞同：0
> 
> 时间：2013-03-19T01:21:04.573
> 
> 标签：apache-flex

自从我将 Adob​​e Readed 更新到第 11 版后，我再也无法在我的 Flex Air 应用程序上查看任何 PDF。我有什么需要做的吗？

*   AIR 版本：3.6
*   操作系统：Mac OS X
*   弹性生成器：4.6
*   Adobe 阅读器：11.0.02
*   使用的 Flex 组件：mx:HTML

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:34:18.647

您是否尝试过使用 stagewebview？

你必须做这样的事情：

```
webView = new StageWebView();

webView.loadURL("http://<url>/xxx.pdf");

webView.viewPort = new Rectangle(0, 100,this.stage.stageWidth, this.stage.stageHeight);
webView.stage = this.stage; 
```

# grails - 用于闭包的 Aspect(-like) 函数

> ID：15489915
> 
> 赞同：4
> 
> 时间：2013-03-19T01:21:11.227
> 
> 标签：grails, groovy, aop, taglib

在 Grails（至少到当前版本 2.2）中，标签库是闭包。对于某些 taglib 闭包，我想使用一些“环绕”类型的建议/将闭包包装在拦截器中。

换句话说，假设直接来自 Grails 文档的 taglib：

```
class SimpleTagLib {
   def emoticon = { attrs, body ->
      out << body() << (attrs.happy == 'true' ? " :-)" : " :-(")
   }
} 
```

现在，在不修改 taglib 代码的情况下，我想计算“表情符号”的执行时间。

Spring AOP（以及我能找到的所有其他 AOP）似乎只适用于 Java 方法——而标记库总是基于闭包。一个“环绕”切入点将是完美的，但我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:50:17.120

我写了一些类似的东西，我把它作为一个公共关闭放在一个类别中，然后混合到服务中：

```
// TimingCategory.groovy
/**
 * Provides common AOP timing functionality to Services which mixin this category.
 */
class TimingCategory {

    static Closure timer = { String label = "The call", Closure closure ->
        Long start = System.currentTimeMillis()
        def result = closure.call()
        Long end = System.currentTimeMillis()
        Long duration = end - start
        log.warn "${label} took ${duration} ms"
        return result
    }
} 
```

在其他类中，您只需像这样引用`timer`闭包：

```
@Mixin(TimingCategory)
public class WhateverService {

    public String doSomeWork() {
        timer "Doing a lot of work", {
            1000.times { doSomething() }
            someMethodWithAStringReturnValue()
        }
    }
 } 
```

**这将为您提供“WARN: Doing a lot of work take nn ms”的**日志输出，并返回内部闭包的值作为`doSomeWork`方法的返回值。

对于您的 taglib 实例，只需`out << ...`将

```
timer "Writing an emoticon", { 
    // your code
} 
```

代码。

如果您不关心传递内部返回值，则可以改为返回持续时间作为闭包调用的结果。

**更新**：

我可能读错了——你问的是如何在不修改 taglib 代码的情况下包装 taglib 执行？如何创建一个接受主体并将其传递给其他标记库执行的自定义标记库？

我没有尝试过，但类似：

```
class TimedTagLib {

    static namespace = "timer"

    def timedTag = { attrs, body ->
        timer "Executing the timed tag", {
            out << body()
        }
    }
} 
```

并像调用它一样

```
<timer:timedTag><g:emoticon whatever="something">Text</g:emoticon></timer:timedTag> 
```

**更新 2：**

好的，所以我试了一下。工作正常。我的最终代码（我添加了第二个返回持续时间的计时器闭包）：

```
// TimedTagLib.groovy
@Mixin(TimingCategory)
class TimedTagLib {
    static namespace = "timer"

    def timedTag = { attrs, body ->
        def duration = returnTimer "Printing the timed tag", {
            out << body()
        }

        out << "Took ${duration} ms to print"
    }
} 
```

和观点：

```
// someView.gsp
<timer:timedTag>
    <g:formatLocalDate date="${LocalDate.now()}" />
</timer:timedTag> 
```

生成的 HTML 是：

```
03/19/2013
Took 6 ms to print 
```

它还写入日志。

# objective-c - 检测 UITextfield 中文本的更改

> ID：15489916
> 
> 赞同：22
> 
> 时间：2013-03-19T01:21:20.140
> 
> 标签：objective-c, ipad, ios6, uitextfield, uitextfielddelegate

我希望能够检测 a 中是否更改了某些文本，`UITextField`以便我可以启用 a`UIButton`来保存更改。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-07-17T09:58:34.463

而不是观察通知或实现`textField:shouldChangeCharacterInRange:replacementString:`，只需添加一个事件目标更容易：

```
[textField addTarget:self
              action:@selector(myTextFieldDidChange:)
    forControlEvents:UIControlEventEditingChanged];

- (void)myTextFieldDidChange:(id)sender {
    // Handle change.
} 
```

请注意，事件是`UIControlEventEditingChanged`而**不是** `UIControlEventValueChanged`！

与其他两个建议的解决方案相比的优点是：

*   您无需记住使用`NSNotificationCenter`.
*   *在进行*更改后调用事件处理程序，这意味着`textField.text`包含用户实际输入的文本。在应用更改*之前*`textField:shouldChangeCharacterInRange:replacementString:`调用委托方法，因此尚未给您用户刚刚输入的文本——您必须先自己应用更改。*`textField.text`*

 ** * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-19T01:27:46.380

利用`UITextFieldTextDidChange`通知或在文本字段上设置委托并注意`textField:shouldChangeCharactersInRange:replacementString`.

如果您想通过通知查看更改，您需要在代码中使用类似的内容来注册`notification`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(textFieldDidChange:) name:UITextFieldTextDidChangeNotification object:theTextField]; 
```

此处 theTextField 是`UITextField`您要观看的实例。上面代码中 self 是实例的类必须实现`textFieldDidChange`，如下所示：

```
- (void)textFieldDidChange:(NSNotification *)notification {
    // Do whatever you like to respond to text changes here.
} 
```

如果文本字段的寿命超过`observer`，那么您必须*取消注册*`dealloc`观察者方法中的通知。实际上，即使文本字段的寿命不超过观察者，这样做也是一个好主意。

```
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    // Other dealloc work
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-19T02:14:39.960

为此，首先您需要为您的文本字段分配委托引用。并且，最好应该是作为视图文件所有者的 vew 控制器。这就像

```
myTextField.delegate = myViewControllerReferenceVariable 
```

在您的 viewController 界面中，告诉您将通过以下方式实现 UITextFieldDelegate

```
@interface MyViewController:UIViewController<UITextFieldDelegate> 
```

并在您的视图控制器实现覆盖

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

所以代码看起来像

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
     {
        text = [textfield.text stringByReplacingCharactersInRange:range withString:string];
        if (textfield == refToTextFieldYouWantToCheck) {
            if ( ! [textToCheck isEqualToString:text] ) {
               [theButtonRef setEnabled:YES];
            } 
         }
           return YES; //If you don't your textfield won't get any text in it
      } 
```

您还可以订阅有点混乱恕我直言的通知您可以在[此处](https://stackoverflow.com/questions/7010547/uitextfield-text-change-event)找到操作方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-21T07:38:25.347

斯威夫特 3.0

过程 1

创建 UITextfiled 的 IBOutlet 并将 Target 添加到文本字段。

```
 m_lblTxt.addTarget(self, action: #selector(self.textFieldDidChange), for: UIControlEvents.editingChanged)

 func textFieldDidChange(textField:UITextField)
 {
     NSLog(textField.text!)
 } 
```

过程 2

```
 m_lblTxt.delegate = self

 //MARK: - TextField Delegates
 func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool 
 {
      print(textField.text!)
      return true
 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-12T04:25:44.283

这可以在 Interface Builder 的`Editing Changed`事件中完成`UITextField`。从它拖到您的代码并创建一个`IBAction`.

例如：

```
@IBAction func textFieldChanged(_ sender: UITextField) {
  print(sender.text)
} 
```

此事件与此处其他答案中描述的相同，因为该`.text`属性在触发时包含更新的文本输入。`UITextField`这可以通过不必以编程方式将事件添加到视图中的每个来帮助清理代码混乱。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T02:14:28.097

您可以创建一个变量来存储原始字符串，然后向通知中心注册以接收`UITextFieldTextDidChangeNotification`事件：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateButton:) name:UITextFieldTextDidChangeNotification object:nil]; 
```

然后，创建一个接收通知的方法，并将文本字段的当前值与原始值进行比较

```
-(void) updateButton:(NSNotification *)notification {
       self.myButton.enabled = ![self.myTextField.text isEqualToString:originalString];
} 
```

当视图控制器被释放时，不要忘记取消注册通知。

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UITextFieldTextDidChangeNotification object:nil]; 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-03-19T01:42:58.437

你可以像这样添加一个班级成员`NSString *changeTemp`，然后

```
changetemp = textfield;

if( change temp != textfild ){
    changetemp=textfild;
    NSLog(@" text is changed"
} else { 
    NSLog(@" text isn't changed"):
} 
```*

# redirect - nginx 静态索引重定向

> ID：15489919
> 
> 赞同：8
> 
> 时间：2013-03-19T01:21:38.123
> 
> 标签：redirect, nginx, http-status-code-301

这看起来很荒谬，但我在一个多小时的搜索中没有找到有效的答案。

我有一个运行 nginx 的静态网站（恰好在 Varnish 后面）。索引文件称为`index.html`. 我想将实际访问该 URL 的任何人重定向`mydomain.com/index.html`回`mydomain.com`.

这是我对该站点的 nginx 配置：

```
server {
  listen  8080;
  server_name  www.mydomain.com;
  port_in_redirect  off;

  location / {
    root   /usr/share/nginx/www.mydomain.com/public;
    index index.html;
  }

  rewrite /index.html http://www.mydomain.com/ permanent;
} 
```

`http://www.mydomain.com/index.html``301`使用该位置按预期响应，`http://www.mydomain.com/`但不幸的是，`http://www.mydomain.com/`它还向自身提供了 301，因此我们得到了一个重定向循环。

如果 index.html 确实在请求中，我如何告诉 nginx 仅提供 301 服务？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T03:10:27.227

添加一个新的位置块来处理您的主页，并使用 try_files 指令（而不是“index index.html;”）直接查找 index.html 文件。请注意，try_files 要求您至少输入 2 个选项。所以我把同一个文件放了两次。

```
location = / {
  root   /usr/share/nginx/www.mydomain.com/public;
  try_files /index.html /index.html;
} 
```

根据我的实验看起来不错：

```
curl -iL http://www.mydomain.com/index.html
HTTP/1.1 301 Moved Permanently
Server: nginx
Date: Sat, 16 Mar 2013 09:07:27 GMT
Content-Type: text/html
Content-Length: 178
Connection: keep-alive
Location: http://www.mydomain.com/

HTTP/1.1 200 OK
Server: nginx
Date: Sat, 16 Mar 2013 09:07:27 GMT
Content-Type: text/html
Content-Length: 4
Last-Modified: Sat, 16 Mar 2013 08:05:47 GMT
Connection: keep-alive
Accept-Ranges: bytes 
```

[**更新**]重定向循环的根本原因是'index'指令，它触发nginx再次进行另一轮位置匹配。这就是位置块之外的重写规则再次执行的方式，从而导致循环。所以'index'指令就像一个“rewrite...last;” 指示。你不希望在你的情况下。

诀窍是不要再次触发另一个位置匹配。try_files 可以有效地做到这一点。这就是我在原始答案中选择它的原因。但是，如果您愿意，另一个简单的解决方法是替换

```
 index index.html; 
```

经过

```
 rewrite ^/$ /index.html break; 
```

在您原来的“位置/”块内。这个'重写......打破;' 指令将使 nginx 保持在同一位置块内，有效地停止循环。但是，这种方法的副作用是您失去了“索引”指令提供的功能。

[**更新 2** ]

实际上，索引指令在重写指令之后执行。所以以下也有效。请注意，我刚刚添加了 rewrite...break; 线。如果请求uri是“/”，nginx首先从rewrite规则中查找现有文件/index.html。所以这个请求永远不会触发 index 指令。因此，两个指令可以一起工作。

```
 location / {
    root   /usr/share/nginx/www.mydomain.com/public;
    index index.html;
    rewrite ^/$ /index.html break;
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T02:42:23.730

看起来你*真的*不想`index.php`出现在地址栏中，对吗？

如果你在 nginx 配置中添加一个重写指令，你会得到一个重定向循环，正如你所经历的那样。如果您对 javascript 解决方案持开放态度，则可以将其放置在您的任何位置`index.html`以静默地重写地址栏：

```
<script>
    history.pushState(null, '', '/');
</script> 
```

[了解更多信息](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)

请记住，虽然大多数现代浏览器都支持`history`API，但并非所有浏览器都支持（即大多数版本的 IE）。

# javascript - javascript片段适用于控制台，但不适用于页面

> ID：15489922
> 
> 赞同：0
> 
> 时间：2013-03-19T01:21:53.157
> 
> 标签：javascript

我想使用[moment.js](http://momentjs.com/)并将 moment.js 包含在 html 的头部。我正在使用[基础](http://foundation.zurb.com/)框架并像这样加载js：

```
<script src="/static/js/moment.js"></script>
<script src="/theme/javascripts/vendor/custom.modernizr.js"></script>
<script src="/theme/javascripts/foundation.min.js"></script> 
```

在我正在服务的页面中，我称之为：

```
<script>moment("20130420", "YYYYMMDD").fromNow();</script> 
```

什么都没有出现。它是空白的。

但是，当我进入控制台并输入 时`moment("20130420", "YYYYMMDD").fromNow();`，我进入`in a month`了正确的控制台。

会发生什么导致日期没有显示在页面上，但可以在控制台上使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:26:51.770

你需要对结果做一些事情：

```
<script>document.writeln(moment("20130420", "YYYYMMDD").fromNow());</script> 
```

# sql - 使用VB编写SQL查询

> ID：15489924
> 
> 赞同：0
> 
> 时间：2013-03-19T01:22:12.153
> 
> 标签：sql, vb.net

我试图在颜色列中显示一个值列表，但是当我单击按钮时它只给我一个值

```
Imports System.Data
Imports System.Data.OleDb

Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        ''TODO: This line of code loads data into the '''AdventureWorksLTDataSet.Product' table. You can move, or remove it, as needed.
        Me.ProductTableAdapter.Fill(Me.AdventureWorksLTDataSet.Product)

    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim conDB As New OleDb.OleDbConnection
        conDB.ConnectionString = "....."
        Dim comDB As New OleDb.OleDbCommand
        Dim dbrDB As OleDbDataReader
        Dim SQLQuery As String

        conDB.Open()
        comDB.Connection = conDB
        SQLQuery = "SELECT DISTINCT P.color FROM SalesLT.Product P WHERE P.color is not NULL"
        comDB.CommandText = SQLQuery
        dbrDB = comDB.ExecuteReader()

        If (dbrDB.Read) Then
            While dbrDB.Read       ' 'cycle through resulting tuples
                Label1.Text = dbrDB("color")
            End While
        End If

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:27:57.573

每次循环时，您都在覆盖标签值，您可能需要这个：

```
Label1.Text = Label1.Text + "," + dbrDB("color") 
```

# datagrid - FuelUX 数据网格上的自定义数据过滤器未使用结果更新数据显示

> ID：15489926
> 
> 赞同：2
> 
> 时间：2013-03-19T01:22:41.410
> 
> 标签：datagrid, datasource, filtering, fuelux

我正在尝试在我的自定义数据源上为 FuelUX 数据网格实现过滤器。

它正确过滤数据，但将其分页，就好像它没有被过滤一样。IE 我必须要么增加每页的结果，要么转到下一页查看结果。

如何让网格更新以正确显示过滤结果？

这是我的自定义过滤器功能：

```
 if (options.filter) {                   
                data = data.filter(function (item) {
                    switch( options.filter.value )
                    {
                        case "all":
                            return true;
                        break;

                        default:
                            return item.contentID == options.filter.value;
                        break;
                    }
                });
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:17:02.547

接得好！我在[https://github.com/ExactTarget/fuelux/issues/143输入了一个问题](https://github.com/ExactTarget/fuelux/issues/143)

同时，只需在加载 Fuel UX 之后、初始化数据网格之前添加此逻辑。

```
$.fn.datagrid.Constructor.prototype.filterChanged = function (e, filter) {
    this.options.dataOptions.filter = filter;
    this.options.dataOptions.pageIndex = 0;
    this.renderData();
}; 
```

感谢您的报告。

# php - 无法获取 session.gc.lifetime

> ID：15489931
> 
> 赞同：0
> 
> 时间：2013-03-19T01:23:21.480
> 
> 标签：php

我正在尝试找出我的 php 会话的最大时间（我无权访问 cpanel 或 php.ini 文件）。我正在尝试使用此代码，但它没有打印出任何内容（“你好”除外）。怎么了？

```
 <?php
session_start();
error_reporting(E_ALL);
ini_set("error_reporting",1);

// Get the current Session Timeout Value
 $currentTimeoutInSecs = ini_get(’session.gc_maxlifetime’);
 print "hello " . $currentTimeoutInSecs;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:26:47.333

您使用了错误的引号，请使用单引号或双引号：

```
$currentTimeoutInSecs = ini_get('session.gc_maxlifetime'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:28:03.227

在代码中使用单引号（而不是单引号）：

```
<?php
  session_start();
  error_reporting(E_ALL);
  ini_set("error_reporting",1);

  // Get the current Session Timeout Value
  $currentTimeoutInSecs = ini_get('session.gc_maxlifetime');
  print "hello " . $currentTimeoutInSecs;
?> 
```

输出：

> 你好 84600

# smalltalk - 如何在 pharo 或 squeak 中更改 CommandShell 窗口中的字体？

> ID：15489933
> 
> 赞同：4
> 
> 时间：2013-03-19T01:23:24.757
> 
> 标签：smalltalk, pharo, squeak

在 Pharo 和 Squeak 中，如果安装了它，您可以键入`CommandShell open.`，它将打开一个命令窗口，该窗口基本上类似于“bash shell”或“终端窗口”，但它使用的是近乎微观大小的默认字体。我似乎无法弄清楚如何改变它。

我发现smalltalk中的一般方法是浏览一个类的实现，看看你是否能找到你可以对类说什么来告诉它你想要什么，或者你可以通过某种方式修改类以便它回答一些问题与其他类不同，从而产生预期的效果。类似`anInstanceOfCommandShell someViewOrControllerThingy setDefaultFont:blahblahblah`或类似的东西。

似乎 CommandShell 使用 ShellWindowMorph 并且它接受 setFont 消息。我是 Smalltalk 和 Squeak 的新手，不知道下一步该做什么。

我正在使用 Pharo 2.0，但如果有人知道如何在 Squeak 中做到这一点，我相信它会大致相同。

请注意，我发现了 pharo 的设置，并且常规设置更改会影响主脚本窗口，但不会`CommandShellTranscript`以任何方式影响特殊或其内容。

![在此处输入图像描述](../Images/e7868530c5d773016e2c8c7aae836ad8.png)

[我用来以编程方式更改其余字体的代码是另一个问题](https://stackoverflow.com/questions/574873/how-can-i-easily-change-to-native-fonts-in-smalltalk-squeak-pharo)的答案。它说这样做：

```
|font codeFont|

font := LogicalFont familyName: 'Consolas' pointSize: 10.
codeFont := LogicalFont familyName: 'Consolas' pointSize: 9.
StandardFonts listFont: codeFont.
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:36:52.100

您可以通过以下方式覆盖 ShellWindowMorph 默认 #textStyle：

```
textStyle
    " Answer a font for the text morph"

    ^ TextStyle default 
```

该窗口应该可以直接从 shell 菜单（右上箭头）或设置浏览器设置字体。您可以通过将“Halo”菜单置于您感兴趣的变形上来修改任何变形属性（在 MS Windows 下 Alt+Shift+左键单击）并选择红色图标。然后选择 Debug -> Explore morph 并直接从 Explorer 设置文本样式：

```
self textMorph setTextStyle: TextStyle default 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T16:12:51.630

ShellWindowMorph 使用系统范围的 DefaultFixedTextStyle。

在 Squeak 中，您可以像这样更改它：

```
TextConstants
    at: #DefaultFixedTextStyle
    put: (TextStyle fontArray: {StrikeFont fromUser}). 
```

# java - Android - 解压缩 SystemUI 以修改其中的文件

> ID：15489938
> 
> 赞同：1
> 
> 时间：2013-03-19T01:23:55.760
> 
> 标签：java, android, themes, unzip

所以，我今天早些时候问了一个关于类似主题的问题，并得到了答案。但现在我有另一个问题......我已经看到可以解压缩 SystemUI.apk 然后替换里面的图像（如电池图像、wifi 图像、4g 图像等）的应用程序（rootbox 就是其中之一）。 ) 所以我想做一个这样的小应用程序。这将为您的设备设置主题。现在我已经制作了大部分应用程序。整个布局下来了，一切正常，除了一件事……安装。我似乎无法解压缩 SystemUI.Apo，替换某些文件，然后重新压缩、安装等。电池模块、wifi 模块等基本上是您下载的 zip 文件。其中有一个 res 文件夹。res 文件夹内有更多文件夹，这些文件夹内是图像。例如，我有 res/drawable-hdpi/images.png。所以我只需要将这些文件复制到 systemUI 文件夹中。我尝试了几次，都使用脚本。我尝试解压缩mod和systemUI，然后将文件复制到systemUI，但我无法解压缩systemUI.apk。（我猜解压缩无法解压缩apk）我也尝试复制systemUI.apk然后压缩systemUI。 apk 与包含我的 mod 的 res 文件夹，但这也不起作用（bootloop）。我现在迷路了。我的问题很简单：如何解压缩 systemUI，替换所需的文件，然后重新补给，chmod 644 it 等。我希望我没有用我愚蠢的问题惹恼你们。谢谢阅读！:) （我猜 unzip 无法解压缩 apks）我还尝试复制 systemUI.apk，然后使用包含我的 mod 的 res 文件夹压缩 systemUI.apk，但这也不起作用（bootloop）。我现在迷路了。我的问题很简单：如何解压缩 systemUI，替换所需的文件，然后重新补给，chmod 644 it 等。我希望我没有用我愚蠢的问题惹恼你们。谢谢阅读！:) （我猜 unzip 无法解压缩 apks）我还尝试复制 systemUI.apk，然后使用包含我的 mod 的 res 文件夹压缩 systemUI.apk，但这也不起作用（bootloop）。我现在迷路了。我的问题很简单：如何解压缩 systemUI，替换所需的文件，然后重新补给，chmod 644 it 等。我希望我没有用我愚蠢的问题惹恼你们。谢谢阅读！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:59:58.537

如果你没有root，你所要求的是不可能的。

假设您的设备上有根，为了实现这一点，您可以尝试：

*   拉取 SYStemUI.apk 文件
*   使用[apktool](http://code.google.com/p/android-apktool/)反编译apk
*   用你的替换图像
*   使用apktool重新编译apk
*   使用根浏览器将 SystemUI.apk 替换为修改后的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:10:58.457

[Apktool](http://code.google.com/p/android-apktool/)是一个很好的反编译和重新编译 APK 的工具，你的设备必须是 root 的，或者你可以编辑你的 ROM 并刷回它。

这是一个很好的链接，解释了如何使用 android-apktool

[如何编辑 SystemUI.apk/Apps 背景](http://forum.xda-developers.com/showthread.php?t=1714481)

# ios - 滑动删除单元格时断言失败错误

> ID：15489942
> 
> 赞同：0
> 
> 时间：2013-03-19T01:24:32.153
> 
> 标签：ios, objective-c

断点位于 [self.tableView...] 行。

这是我第一次遇到这样的错误。我正在搞乱一个实现滑动删除功能的 cocoapod。

```
- (void)swipeTableViewCell:(MCSwipeTableViewCell *)cell didTriggerState:(MCSwipeTableViewCellState)state withMode:(MCSwipeTableViewCellMode)mode
{
    NSLog(@"IndexPath : %@ - MCSwipeTableViewCellState : %d - MCSwipeTableViewCellMode : %d", [self.tableView indexPathForCell:cell], state, mode);

    if (mode == MCSwipeTableViewCellModeExit)
    {

        // Remove the item in your data array and then remove it with the following method
        [self.tableView deleteRowsAtIndexPaths:@[[self.tableView indexPathForCell:cell]] withRowAnimation:UITableViewRowAnimationFade];

    }
} 
```

另外，假设有办法解决这个问题，是否可以从我的 Parse 后端删除该对象？最初我使用的是：

```
PFObject *object = [self.objects objectAtIndex:indexPath.row];
        [object deleteInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
            [self loadObjects]; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:43:50.977

断言失败只能由显式调用其中一个`NSAssert`函数引起。这些用于测试开发人员所做的某些假设是否正确。他们“断言”这些假设的真实性，如果它们不真实，则抛出异常。

据我所知，任何 Apple 开发人员库中都没有断言。这意味着要么你在你的代码中加入了一个断言，或者——更有可能——你正在使用的 cocoapod 的代码中有一个断言。获取源并在全球范围内搜索“NSAssert”以了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:35:54.857

通常，从 tableView 中删除项目时，您需要先修改底层数据。换句话说，如果您从数组中绘制表格，首先从数组中删除行，然后从表格中删除行。

如果这不起作用，您可以尝试：

```
[mytableView beginUpdates];

//do my changes

[mytableView endUpdates]; 
```

# c++ - 使用 setItemText 填充列表控件中的列

> ID：15489947
> 
> 赞同：0
> 
> 时间：2013-03-19T01:25:07.753
> 
> 标签：c++, mfc

我正在尝试在 MFC 的列表控件 (m_listCtrl) 中填充我的列。我想这样做：

```
void CMy1domacanalogaRadixDlg::sort()
{
     // some code here

    for (int i = 0; i <size; i++)
    {
        counter++;
        a[i] = b[i];
        niz.Format(_T("%d"), a[i]);
        // here choose column and add numbers
        m_listCtrl.SetItemText(i,counter,niz); 
    }   
} 
```

我想动态创建列，因为我想在自己的列中添加每个 for 循环迭代，但问题是我需要在表单上按两次“排序”按钮才能在列中显示数字。一切正常，我在列中有所有数字，但在第一次按下按钮时没有。感谢帮助。

# sql - 用于范围搜索的 SQL Server 表和索引设计

> ID：15489950
> 
> 赞同：1
> 
> 时间：2013-03-19T01:25:21.437
> 
> 标签：sql, sql-server, indexing, query-optimization

我们的 MS SQL Server 数据库有一个表 T，其中包含以下字段和数据：

```
Name |  Begin  |  End
-----------------------
A    |    3    |   6
B    |    2    |   4
C    |    4    |   5
................... 
```

我通常使用如下查询：

```
SELECT *
FROM T
WHERE 5 BETWEEN Begin AND End 
```

查找在“开始”和“结束”字段之间包含常量 5 的记录。执行计划是执行全表扫描。如何设计表结构和索引以避免表扫描？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:36:45.087

在 [Begin] 和 [End] 上创建复合索引，包括 [name]，然后从查询中删除 *，替换为列名

```
 SELECT name, [begin],[end]
FROM T
WHERE 5 BETWEEN [Begin] AND [End]
```

这样做的原因是，只进行一次非集群索引查找，一次 I/O 读取。再次查看查询计划，应该是这样的：Index Seek (Non-cluster index....) 100%

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T02:20:25.900

如果不存在，则添加包含开始日期和结束日期的索引。

# ruby-on-rails - 为什么在 Ruby 类模型中使用 @ 变量？

> ID：15489951
> 
> 赞同：1
> 
> 时间：2013-03-19T01:25:36.583
> 
> 标签：ruby-on-rails, ruby

为什么`@variables`需要在课堂上？他们增加了什么价值？我在网上找不到任何东西，但也许我正在搜索错误的术语。网上有资源我可以查一下吗？谢谢！

碳水化合物

```
class Car
  attr_accessor :make, :model

  def initialize(make = '')
    @make = ''
    @model = ''
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:31:39.013

这些变量称为实例变量。类的每个实例都有自己的这些变量的副本。

在您的示例中，您希望 Car 类的每个实例都有自己的品牌和型号。

请注意以下示例

```
car1 = Car.new("Toyota", "Carola")
car2 = Car.new("Mitsubishi", "Lancer") 
```

car1 和 car2 都有自己的私有`make`和`model`。告诉 Ruby 解释器这样做的方法是使用 @。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:28:17.183

这就是在 ruby​​ 中定义实例变量的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T01:38:57.473

实例变量在类的每个实例的所有区域都可用。

每次创建 car 实例时，变量都是特定于该特定实例的。

例如

```
car1 = Car.new('Ford', 'Falcon')
car2 = Car.new('Toyota', 'Camry') 
```

现在 car1 和 car2 有不同的 @make 和 @model 实例。

如果您使用 将变量声明为类变量`@@make`，则每辆 Car 都可以访问它，并且每次更改时，每个人都会更改它。

基本上，类变量允许您在数据周围放置一些“墙”。

在您的`attr_accessor`调用中创建两个方法

```
def make=(value)
@make = value
end

def make
@make
end 
```

这允许您在没有 @ 的情况下在类内部和外部调用实例变量

例如

```
car1.make 
```

返回

```
'Ford' 
```

www.codecademy.com 有一些很棒的 Ruby 基础免费课程，可以很好地教你这些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:51:16.857

据说对象具有行为和属性，就像现实世界的对象一样。对象的属性由实例变量定义。@ 前缀是 ruby​​ 告诉特定变量是实例变量/特征的方式。

> 他们增加了什么价值？

它们帮助您拥有一个可跨所有实例方法访问的变量。

让我们剖析你的例子

```
 class Car
    attr_accessor :make, :model #attr_accessor methods creates a getter method.    car_instance.make and
                 #a setter method car_instance.make=(val), which otherwise you would have to do explicitly. 

    def initialize(make = '')   #constructor
      @make = '' #initializing your instance variables. I guess you meant @make = make here     
      @model = ''
    end
   end 
```

> 我在网上找不到任何东西，但也许我正在搜索错误的术语。

是的，你是。

> 网上有资源我可以查一下吗？

是的，Matz的[Ruby 用户指南](http://www.rubyist.net/~slagell/ruby/instancevars.html)

*更多细节*

在 ruby​​ 中，类中变量的范围由编译器通过变量名称的前两个字符来标识。

*   @@variable_name -> 两个“@”。类的所有实例的类变量/范围。例如：如果你想计算你制造的汽车总数。

*   @variable -> 一个“@”实例变量/跨实例的范围。

*   变量 -> 没有“@”局部变量/它们所属块的范围。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T01:39:14.003

看下面的代码，为了理解我做了一些改动：

```
class Car
  attr_accessor :make, :model

  def initialize(make = '')
    @make = make
    @model = ''
  end
end

car1 = Car.new("Toyota")
car2 = Car.new("Roxin")
p car1.instance_variables #<~~ A
p car2.instance_variables #<~~ B
p car1 #<~~C
p car2#<~~D 
```

输出：

```
[:@make, :@model]
[:@make, :@model]
#<Car:0x1bc89e8 @make="Toyota", @model="">
#<Car:0x1bc8940 @make="Roxin", @model=""> 
```

**解释：**在**A**和**B**中，您可能会认为 car1、car2 都使用相同的实例变量副本。但事实并非如此。看看当我在**C**和**D**中打印 car1 和 car2 时，输出显示 car1 和 car2 为实例变量持有不同的值`@make`。这个事实对象有自己独特的实例变量。

希望这可以帮助。

干杯！！

# asp.net - 如何防止漏洞扫描

> ID：15489952
> 
> 赞同：1
> 
> 时间：2013-03-19T01:25:36.953
> 
> 标签：asp.net, security, web-crawler, error-reporting

我有一个网站报告我的电子邮件中每个非预期的服务器端错误。

经常（每 1-2 周一次）有人会启动自动化工具，用大量不同的 URL 轰炸网站：

*   有时他们（黑客？）认为我的网站在 phpmyadmin 内部托管，他们试图访问易受攻击的（我相信）php-pages...
*   有时他们会尝试访问确实不存在但属于流行 CMS 的页面
*   上次他们试图注入错误的 ViewState ......

显然不是搜索引擎蜘蛛，因为 100% 生成错误的请求都是对无效页面的请求。

现在他们并没有造成太大的伤害，唯一的一个是我需要删除大量的服务器错误电子邮件（200-300）......但在某些时候他们可能会找到一些东西。

我真的厌倦了，正在寻找能够阻止这种“蜘蛛”的解决方案。

有什么可以使用的吗？任何工具、dll 等......或者我应该自己实现一些东西？

在第二种情况下：您能否推荐实施方法？我是否应该限制每秒来自 IP 的请求数量（假设每秒不超过 5 个请求，每分钟不超过 20 个）？

PS 现在我的网站是使用 ASP.NET 4.0 编写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:36:12.393

如果您只是保持服务器和软件的更新，此类机器人不太可能在您的系统中发现任何漏洞。他们通常只是在寻找唾手可得的果实，即未更新以修复已知漏洞的系统。

您可以制作一个机器人陷阱来最大限度地减少此类流量。一旦有人尝试访问您知道的那些不存在的页面之一，您就可以暂时停止来自该 IP 地址的所有使用相同浏览器字符串的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:32:49.013

您无法（可靠地）采取任何措施来防止***漏洞扫描***，唯一要做的就是确保您掌握所有漏洞并防止***漏洞利用***。

如果您的站点仅由少数人使用并且在固定位置，您可能会使用 IP 限制

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T02:39:08.647

有几件事你可以考虑...

您可以使用其中一种可用的 Web 应用程序防火墙。它通常具有确定可疑活动并做出相应反应的规则和分析引擎。例如，在您的情况下，它可以自动阻止扫描您的站点的尝试，因为它将其识别为攻击模式。

更简单（但不是 100% 解决方案）的方法是检查引荐来源网址（wiki 中的引荐来源网址描述），如果请求不是来自您的某个页面，则您拒绝它（您可能应该为此创建 httpmodule）。

当然，您希望确保您的站点解决了 OWASP TOP 10 列表 ( [OWASP TOP 10](http://owasptop10.googlecode.com/files/OWASP%20Top%2010%20-%202010.pdf) ) 中的所有已知安全问题。你可以在这里找到如何为 asp.net 做的非常全面的描述（[owasp top 10 for .net book in pdf](http://www.troyhunt.com/2011/12/free-ebook-owasp-top-10-for-net.html)），我还建议阅读上述书籍作者的博客：[http://www.troyhunt。 com/](http://www.troyhunt.com/)

# ios - ObjectiveC：需要我的受保护方法的建议吗？

> ID：15489964
> 
> 赞同：2
> 
> 时间：2013-03-19T01:27:17.990
> 
> 标签：ios, objective-c, oop, subclass, protected

简单地说，我需要一种方法在一个类中拥有一些只对其子类公开的私有方法，而在 Objective-C 中很难（也许不可能）做到这一点。

到目前为止我做了什么：

```
// MyClass.h

@protocol MyClassProtectedMethodsProtocol
- (void)__protectedMethod;
@end

@interface MyClass : NSObject
- (void)publicMethod;
- (id<MyClassProtectedMethodsProtocol>)protectedInstanceForSubclass:(id)subclass;
@end 
```

然后：

```
// MyClass.m
#import "MyClass.h"

@interface MyClass() <MyClassProtectedMethodsProtocol>
@end

@implementation MyClass

- (void)publicMethod
{
    // something
}

- (id<MyClassProtectedMethodsProtocol>)protectedInstanceForSubclass:(id)subclass
{
    if ([subclass isKindOf:MyClass.class] && ![NSStringFromClass(subclass.class) isEqualToString:NSStringFromClass(MyClass.class)])
    {
        // the subclass instance is a kind of MyClass
        // but it has different class name, thus we know it is a subclass of MyClass
        return self;
    }
    return nil;
}

- (void)__protectedMethod
    // something protected
{
}

@end 
```

那么can的子类就`MyClass`可以了：

```
id<MyClassProtectedMethodsProtocol> protectedMethodInstance = [self protectedMethodForSubclass:self];
if (protectedMethodInstance != nil)
{
    [protectedMethodInstance protectedMethod];
} 
```

这种方式不会破坏 OO（与调用私有方法并忽略编译器警告相比，甚至猜测私有方法名称只知道 .h），但是可用的受保护方法需要一个协议，一旦暴露，在我们只向客户端交付接口和静态库的大项目中，客户端实际上可以知道私有方法并尝试调用它们而不管警告。而最大的问题来自子类之外，用户也可以调用这个方法来获取`protectedInstance`. 任何人都可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:37:57.103

处理这种情况的标准方法是将内部方法包含在单独的标头中，例如`MySuperClass_Internal.h`. 使用类扩展： `@interface MySuperClass (Internal)`. 不要安装`MySuperClass_Internal.h`在 /usr/local/include 或框架中，或者您将库交付给您的客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:38:03.887

检查这个：[Objective-C 中的受保护方法](https://stackoverflow.com/q/3725857/1371070)

简而言之，没有办法阻止在 Objective-C 中调用方法，因为最终，客户端仍然可以调用`performSelector`任何对象。

# jquery - jQuery 弹跳和缓动不起作用

> ID：15489966
> 
> 赞同：0
> 
> 时间：2013-03-19T01:27:45.350
> 
> 标签：jquery

我试图弄清楚为什么我创建的 jQuery 下拉菜单没有缓和和弹跳。它似乎正在添加和删除应该的类，但其余的都不起作用。

这是我的 jQuery：

```
var $$ = jQuery;
$$(document).ready(function() {
$$(".cartTop").hover(function() {
$$(".quickcart a.product-image img").addClass("dropcartimg");
$$(".quickcart").addClass("cart-active");
$$(".cartTop .quickcart").stop(true, true).delay(300).slideDown(500, "easeOutBounce");
        }, function() {
$$(".quickcart").removeClass("cart-active");
$$(".cartTop .quickcart").stop(true, true).delay(300).fadeOut(800, "easeInCubic");
        });
}); 
```

这是我所有的代码:)

[http://jsfiddle.net/JkX4g/7/](http://jsfiddle.net/JkX4g/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:39:28.777

JS：

```
var $ = jQuery;
$(document).ready(function() {
$(".cartTop").hover(function() {
                        $(".quickcart a.product-image img").addClass("dropcartimg");
                        $(".quickcart").addClass("cart-active");
            $(".cartTop .quickcart").stop(false, false).delay(300).slideDown(500);
        }, function() {
$(".quickcart").removeClass("cart-active");
            $(".cartTop .quickcart").stop(true, true).delay(300).fadeOut(800);
        });
}); 
```

我的[小提琴](http://jsfiddle.net/blackhawx/JkX4g/9/)

如果要添加缓动，则应将缓动插件作为外部脚本包含在您的 javascript 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:39:42.783

您需要包含 jQuery 缓动插件才能工作： http: [//gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

此外，您不需要在使用时添加/删除类，`display: block;`这会破坏您的 jQuery 动画。用你的 JS Fiddle 试过，它现在对我有用。

# jquery - IE 中的 jQuery 模态有趣

> ID：15489968
> 
> 赞同：1
> 
> 时间：2013-03-19T01:27:55.963
> 
> 标签：jquery

我找到了这个 jQuery 模态登录[http://www.alessioatzeni.com/blog/login-box-modal-dialog-window-with-css-and-jquery/](http://www.alessioatzeni.com/blog/login-box-modal-dialog-window-with-css-and-jquery/)它在 chrome 和 FF 中运行良好 - 它在 IE 中运行在演示页面上，但是当我实现它时 - 即使是超级基本的形式，它也不起作用......

模态掩码有效，但登录表单在掩码后面和左上角呈现，不居中......更不用说表单甚至不呈现......

当我试图传达它时，它对我来说变得很奇怪 - 在 jsfiddle

```
http://jsfiddle.net/n2bFt/8/ 
```

即使在 IE 中它也可以工作（让我认为 jsfiddle 为该窗口使用了 webkit 渲染引擎）

但是，如果您直接在 IE9 中运行该页面 - 它会很糟糕......

任何想法......请......

```
<html>
<head>
<style>
#mask { display: none; position: absolute; left: 0; top: 0; z-index: 999; width: 100%; height: 100%; background:#7d949a; opacity: 0.8; filter:alpha( opacity=80 ); }

.login-popup{ display:none; position: fixed; top: 50%; left: 50%; z-index: 9999; float: left; background: #333; padding: 10px; border: 2px solid #ddd; font-size: 1.2em; box-shadow: 0px 0px 20px #999; -moz-box-shadow: 0px 0px 20px #999; /* Firefox */ -webkit-box-shadow: 0px 0px 20px #999; /* Safari, Chrome */   border-radius:3px 3px 3px 3px;  -moz-border-radius: 3px; /* Firefox */ -webkit-border-radius: 3px; /* Safari, Chrome */ }

img.btn_close { float: right; margin: -28px -28px 0 0; }
fieldset { border:none; }
form.signin .textbox label { display:block; padding-bottom:7px; }
form.signin .textbox span { display:block; }
form.signin p, form.signin span { color:#999; font-size:11px; line-height:18px; } 
form.signin .textbox input { width:200px; font:13px Arial, Helvetica, sans-serif; padding:6px 6px 4px; background:#666666;     border-bottom:1px solid #333; border-left:1px solid #000; border-right:1px solid #333; border-top:1px     solid #000; color:#fff; 
 border-radius: 3px 3px 3px 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; }
form.signin input:-moz-placeholder { color:#bbb; text-shadow:0 0 2px #000; }
form.signin input::-webkit-input-placeholder { color:#bbb; text-shadow:0 0 2px #000; }
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
<script>
$( document ).ready( function() {
$( 'a.login-window' ).click( function() {

    // Getting the variable's value from a link 
    var loginBox = $( this ).attr( 'href' );

    //Fade in the Popup and add close button
    $( loginBox ).fadeIn( 300 );

    //Set the center alignment padding + border
    var popMargTop = ( $( loginBox ).height() + 24 ) / 2; 
    var popMargLeft = ( $( loginBox ).width() + 24 ) / 2; 

    $( loginBox ).css({ 
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    // Add the mask to body
    $( 'body' ).append( '<div id="mask"></div>' );
    $( '#mask' ).fadeIn( 300 );

    return false;
});

// When clicking on the button close or the mask layer the popup closed
$( 'a.close, #mask' ).on( 'click', function() { 
    $( '#mask, .login-popup' ).fadeOut( 300 , function() {
        $( '#mask' ).remove();  
    }); 

    return false;
});
});
</script>

</head>
<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" >

<div id="login-box" class="login-popup">
<a href="#" class="close"><img src="images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
<form method="post" class="signin" action="#">
    <fieldset class="textbox">
    <label class="username"><span>Email</span>
        <input id="username" name="username" value="" type="text" autocomplete="on" placeholder="Username">
    </label>

    <label class="password"><span>Password</span>
        <input id="password" name="password" value="" type="password" placeholder="Password">
    </label>

    <button class="submit button" type="button">Sign in</button>

    <p><a class="forgot" href="#">Forgot your password?</a></p>

    </fieldset>
</form>
</div>

<span style="font-size: 8pt; color: #707070;" ><a href="#login-box" class="login-window">Client Login</a>&copy; 2012-</span>

</body>
</html> 
```

# vb.net-to-c# - 在 C# 中调用方法，如在 VB.NET 中

> ID：15489977
> 
> 赞同：-3
> 
> 时间：2013-03-19T01:28:49.507
> 
> 标签：vb.net-to-c#

我正在尝试将 VB.NET 迁移到 C#：

```
Public Sub customfunc()
  "my codes here"
End Sub

Public Sub main()
  Call customfunc()
End Sub 
```

所以我试图在`customfunc()`里面调用，`main()`但 C# 中没有调用函数。

我如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:34:10.960

只需在没有`Call`：

```
customfunc(); 
```

# iphone - 标签栏方法？

> ID：15489983
> 
> 赞同：-1
> 
> 时间：2013-03-19T01:29:32.710
> 
> 标签：iphone, ios, objective-c, xcode

我在视图控制器 1 中添加了这个标签栏，它运行良好，唯一的问题是我希望它执行以下功能`[self.navigationController popViewControllerAnimated:YES];`，但在视图控制器 2 中，当标签栏按钮被触摸时。最好的行动方案是什么？

```
UINavigationController *homeNavigationController = [[UINavigationController alloc] initWithRootViewController:homeViewController];
homeNavigationController.tabBarItem = [[DSTabBarItem alloc] initWithFinishedSelectedImage:[UIImage imageNamed:@"home"] 
                                                            finishedUnselectedImage:[UIImage imageNamed:@"home1"]
                                                                                 iconSize:CGSizeMake(76, 59)
                                                                                tag:0];
[tabBarViewControllers addObject:homeNavigationController]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:11:44.340

```
DetailSettingsViewController *settings = [[DetailSettingsViewController alloc] initWithNibName:@"DetailSettingsViewController" bundle:nil];

[self.navigationController pushViewController:settings animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:52:06.440

如果您以编程方式添加了 tabbarcontroller 。并在该类中添加以下方法。然后您的导航控制器将更改为根视图。你可以将你自己的放在 if 到你的要求之间。

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    if ([self.tabBarController.selectedViewController isKindOfClass:[UINavigationController class]])
    {
        [(UINavigationController*)self.tabBarController.selectedViewController popToRootViewControllerAnimated:YES];

    }

} 
```

# javascript - -webkit-transform: 翻译(417px, 0px)

> ID：15489984
> 
> 赞同：0
> 
> 时间：2013-03-19T01:29:32.820
> 
> 标签：javascript, jquery, html, css, javascript-events

我的 web kit translate 属性有问题......当我缩小浏览器窗口时，会出现一个 iphone 屏幕......在 iphone 屏幕上我已经实现了一个滑块功能......你可以看到左右两个箭头箭头...当您单击右箭头时，它会移动到下一个滑块......但在右边的滑块中，图像没有显示出来......这是由于网络工具包属性......我不知道如何修复它....我提供了两个 li 标签如何修复它....

[http://jsfiddle.net/UL3R2/](http://jsfiddle.net/UL3R2/)

```
 <li style="display: table-cell; width: 417px; vertical-align: top; left: 0px; -webkit-transition: 0ms; -webkit-transform: translate(0px, 0px) translateZ(0px);"
                        data-index="0">

<li style="display: table-cell; width: 417px; vertical-align: top; border: 1px solid red; left: -417px; -webkit-transition: 0ms; -webkit-transform: translate(417px, 0px) translateZ(0px);"
                        data-index="1"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:41:39.720

在这里，我给出一个函数的例子，因为你已经编写了许多具有相同功能的函数，

而不是追加跨度，保持跨度在那里`style="display:none"`

使用脚本通过更改类或属性使其可见。

```
$('document').ready(function() {
            window.setTimeout(function() {
                $('.cubeCellSecurity').each(function() {
                    var htmlText = $(this).attr('data-text');
                    $(this).append('<div class="cubeTextStyleSecurity">' + htmlText + '<span class='divStockSecurity' style="display:none">Security</span></div>');

                    $(this).hover(

                    function() {
                        $(".cubeTextStyleSecurity").style().attr("display","");
                    });

                    //function(){ $(this).style().attr("display","none"); });
                });
            }, 600);

        }); 
```

如果你想让我更新小提琴，请从小提琴中删除不必要的 html 部分

# c# - 更好的 linq 联盟

> ID：15489985
> 
> 赞同：0
> 
> 时间：2013-03-19T01:29:33.677
> 
> 标签：c#, asp.net, linq, c#-4.0

我有一个像这样的数据表（示例）：

```

当前文本 当前值 旧文本 旧值  
------------------------------------------  
测试 1 1 旧测试 1 1   
测试2 2 旧测试2 2

```

我想做一个联合所以结果看起来像这样

```
文本值 IsCurrent   
测试1 1 真   
测试2 2 真   
OldTest1 1 错误
OldTest2 2 错误   

```

我现在如何做到这一点：

```
 var lst = dt.AsEnumerable().Select(x => new MyClass
            {
                 Text = x.Field<string>("CurrentText"), 
                 Value = x.Field<string>("CurrentValue"),  
                 IsCurrent=true
            })
             .Union(dt.AsEnumerable().Select(x => new MyClass
             {
                 Text = x.Field<string>("OldText"), 
                 Value = x.Field<string>("OldValue"),  
                 IsCurrent=false
             })
             ).Distinct().ToList(); 
```

我唯一的问题是：有更好/更快的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:08:32.913

不知道你需要完成什么，但是为了代码的可读性，也许创建一个具体的 IEnuerable 类会帮助人们理解和扩展未来？

```
 private static IEnumerable<Tuple<String,String>> GetPairs(ref DataTable dtr)
    {
      var CurrentPairs = dtr.AsEnumerable().Select(t => Tuple.Create
                                                  (
                                                    t.Field<String>("CurrentText"),
                                                    t.Field<String>("CurrentValue")
                                                  ));
      var NewPairs = dtr.AsEnumerable().Select(t => Tuple.Create
                                                  (
                                                    t.Field<String>("OldText"),
                                                    t.Field<String>("OldValue")
                                                  ));

      return CurrentPairs.Union(NewPairs);
    } 
```

# c++ - CodeBloks：单元测试文件需要文件的完整地址

> ID：15489986
> 
> 赞同：0
> 
> 时间：2013-03-19T01:29:35.047
> 
> 标签：c++, file, io, codeblocks

我正在使用 CodeBlocks 用 C++ 编写我的程序，我注意到以下内容。我的主类和我的单元测试类都在同一个文件夹中（比如 FolderName）。我从他们两个中调用了一个方法，该方法输入了同一文件夹中的文件（FileName.txt）。从 main 我这样称呼它，它工作正常。

```
 obj.("FileName.txt"); 
```

从测试文件中，我需要提供文件的完整地址才能使其工作。

```
 obj.("/home/myName/FolderName/FileName.txt"); 
```

我知道必须有一种设置单元测试文件的方法，以便它像主文件一样工作，但我无法弄清楚。我不确定这是否重要，但我正在使用 Linux

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:37:43.110

如果您已经知道这一点，我深表歉意，但我会为其他可能想知道的人回答。

`CodeBlocks`为您的单元测试创​​建一个可执行文件并将其存储在`/home/myName/FolderName/bin/unitTest/`. `CodeBlocks`执行单元测试时运行此可执行文件。因此，您的密码不是`/home/myName/FolderName/`but `/home/myName/FolderName/bin/unitTest/`。

您正在使用 gtest，但无论您使用哪个框架，都有几种方法可以满足您的要求：

最好的选择是使用地址 obj.( `"../../FileName.txt"`)

另一个选项是复制`FileName.txt`到`/home/myName/FolderName/bin/unitTest/`（或任何您命名的单元测试构建选项）。然后，您可以简单地`"FileName.txt"`在单元测试中使用。

干杯。

# c++ - c++使用*&作为参数（指针乐趣，三叉树方法）

> ID：15489987
> 
> 赞同：1
> 
> 时间：2013-03-19T01:29:39.470
> 
> 标签：c++, oop, pointers, methods

我正在尝试编写一种将键值对添加到三叉树的方法，但显然我做错了什么，因为每当我到达标记的代码时都会出现段错误

```
void Tree::add(int k, Node *&r)
{
    cout<<"add"<<endl;
    if(r==NULL){
        r = new Node(k);
        //check(heap area);
    } 
```

**开始问题代码**

```
 else if(r->keyCount == 1){
        cout<<"adding second key";
        if(r->getKey() < k){
            Node * temp = new Node(r->getKey(),k,r->data[0],0);
            delete r;
            r = temp;
            r->keyCount++;
            cout<<"test"<<endl;
        }
        else
        {
            Node * temp = new Node(k,r->getKey(),0,r->data[0]);
            delete r;
            r = temp;
            r->keyCount++;
            cout<<"test"<<endl;
    } 
```

**结束代码**

```
 }
    else if(k < r->getKey())
    {
        cout<<"left"<<endl;
        add(k,r->child[Node::L]);
    }
    else if(r->keyCount > 1 && k < r->getKey(1))
    {
        cout<<"middle"<<endl;
        add(k,r->child[Node::M]);
    }
    else if(r->keyCount > 1 && k > r->getKey(1))
    {
        cout<<"right"<<endl;
        add(k,r->child[Node::R]);
    }
    else
        r = new Node(k);
} 
```

我想要做的是，如果在这个特定节点中使用的 2 个密钥中只有 1 个，则用一个新节点替换当前节点，该节点在适当的位置有密钥（key[ 中的较小 val 0]，key[1] 中的更大 val) 我该如何正确执行此操作？

我的代码显然删除了旧节点的地址和指针，但没有正确地将指针重新分配给新节点。

**编辑** 更新的代码。输出如下：

```
% p4
Enter pairs consisting of an int and a double. I create a
ternary tree, keeping the data in order, by int. Finish entering
data by pressing ^d
2 2
add
Entering the pair: 2, 2
1 1
add
adding second key to current node
test
Entering the pair: 1, 1
-1 -1
add
left
add
Entering the pair: -1, -1
3 3
add
right
Segmentation Fault 
```

**编辑 2** 如果您想查看所有代码，这里有一个指向包含整个项目的 zip 的链接：http: [//sdrv.ms/WSrLfv](http://sdrv.ms/WSrLfv)

**编辑 3** 更多错误数据 - 崩溃时 gdb 的输出

```
Program received signal SIGSEGV, Segmentation fault.
0x08051628 in getData (x=@0x8047554) at testTree.cc:26
26            x[k]=d;
Current language:  auto; currently c++ 
```

**编辑 4** 逐步通过 gdb 到段错误：

```
Breakpoint 1, Tree::add (this=0x8047554, k=3, r=@0x8047554) at tree.cc:58
58          cout<<"add"<<endl;
(gdb) n
add
61          if(r==NULL){
(gdb) n
65          else if(r->keyCount == 1){
(gdb) n
87          else if(k < r->getKey())
(gdb) n
92          else if(r->keyCount > 1 && k < r->getKey(1))
(gdb) n
97          else if(r->keyCount > 1 && k > r->getKey(1))
(gdb) n
99              cout<<"right"<<endl;
(gdb) n
right
100             add(k,r->child[Node::R]);
(gdb) n

Breakpoint 1, Tree::add (this=0x8047554, k=3, r=@0x806416c) at tree.cc:58
58          cout<<"add"<<endl;
(gdb) n
add
61          if(r==NULL){
(gdb) n
62              r = new Node(k);
(gdb) n
107     }
(gdb) n
107     }
(gdb) n
Tree::operator[] (this=0x8047554, index=3) at tree.cc:47
47          return *(locate(index,root)->data);
(gdb) n
48      }
(gdb) n

Program received signal SIGSEGV, Segmentation fault.
0x08051628 in getData (x=@0x8047554) at testTree.cc:26
26            x[k]=d;
(gdb) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:53:57.000

这应该有效。

作为对您的编辑的回应：我注意到您的输出中有一些有趣的东西：

```
-1 -1
add
left
add
Entering the pair: -1, -1 
```

注意它是如何说“left”的，然后因为递归调用而说“add”。但是，在使程序崩溃的输入中，您在之后看不到“添加”：

```
3 3
add
right
Segmentation Fault 
```

如果你看看你的`Tree::locate`功能：

```
Node * Tree::locate(int k, Node *rt) const
{
if(rt==NULL)
    return rt;
if(k==rt->getKey())
    return rt;
if(rt->keyCount>1 && k==rt->getKey(1))
    return rt;
if(k < rt->getKey())
{
    return locate(k,rt->child[Node::L]);
}
else if(rt->keyCount>1 && k < rt->getKey(1))
{
    return locate(k,rt->child[Node::M]);
}
else if(rt->keyCount>1 && k<rt->getKey(1))
{
    return locate(k,rt->child[Node::R]);
}
else
    return NULL;
} 
```

这一行：

```
else if(rt->keyCount>1 && k<rt->getKey(1)) 
```

与前一个条件相同，因此被完全跳过。

# vb.net - 动态交换变量

> ID：15489988
> 
> 赞同：0
> 
> 时间：2013-03-19T01:29:39.463
> 
> 标签：vb.net, variables, swap

我正在使用 Visual Basic 2010

```
Hitpoints1 -= Player1HandGroup(Number).DamageInteger 
```

这是我正在设计的游戏中的示例代码行，它根据数组中使用的项目从玩家 1 中移除给定数量的生命值。

对于每个玩家，我都有不同的变量。它们分别是每个给定玩家的 Hitpoints2、Hitpoints3、Hitpoints4、Hitpoints5。

我想要做的是能够动态地将变量更改为另一个变量，这样我就不必复制大量的决策逻辑。

动态更改变量的方式是通过一个自定义对话框，其中玩家 1 到玩家 5 作为按钮来决定玩家将攻击谁。（我已经制作了对话框）

因此，如果我在对话框中点击玩家 2，Hitpoints1 将改为 Hitpoints2。我想动态更改变量，或者能够将最后一个字母（数字 1-5）连接到代码中的“HitPoints”上，实际上与动态更改变量相同。

一个人试图让我为每个循环做...

对于 n = 1 到 5 个 HitPoints = HitPoints & n

（您的代码在此处带有 HitPoints 位，现在将是 HitPoints1）

下一个

但这没有用。

# php - 是否可以使用 javascript 变量作为 PHP 数组键？

> ID：15489989
> 
> 赞同：-4
> 
> 时间：2013-03-19T01:29:43.213
> 
> 标签：php, javascript, jquery, arrays

我正在尝试利用 javascript 变量作为 PHP 数组的键来`echo`输出。`id`请注意，我想将 javascript 变量用作 PHP 数组的键`$allNames[]`。

这可能吗？没有 JSON/AJAX？如果是这样，请帮忙。

```
<script type="text/javascript" language="javascript">

    $('*[class^="spec"]').mouseover(function(){
        var the_class = $(this).attr("class");
        var id = the_class.replace("spec", "");
        $('#here').html('<?php echo $allNames[id]; ?>'); // here
    });
</script> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:33:58.900

您可以使用 AJAX，但在这种情况下这样做可能会很浪费。试试这个：

```
var allNames = <?php echo json_encode($allNames); ?>;
$('[class^="spec"]').mouseover(function() {
    var id = this.className.substr(4); // more efficient than previous code
    document.getElementById('here').innerHTML = allNames[id];
}); 
```

* * *

或者，尝试重构您的方法。而不是这个（示例）

```
<div class="spec1">Hover here</div> 
```

试试这个：

```
<div class="spec" data-hover="<?php echo htmlspecialchars($allNames[1]); ?>">Hover here</div> 
```

那么你的脚本可以很简单：

```
$(".spec").mouseover(function() {
    document.getElementById('here').innerHTML = this.getAttribute("data-hover");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:31:50.543

你这样做是不对的。在客户端 javascript 中，php 必须已经包含所有变量。

PHP 在 javascript 之前呈现，因此您无法通过 javascript 创建 echo 语句

如果您想从 ajax 动态生成 HTML，这仍然是可能的，因为许多 javascript 库（如 jQuery）的重点是使用选择器动态修改 Document Object 中的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:34:09.377

是的，您可以使用 JSON 来实现。只需像这样调用 PHP 文件

```
file.php?id=JAVASCRIPT_ID_HERE 
```

然后在那个 PHP 文件中，只需使用`$_GET['id']`抓取 ID