# StackOverflow 问答 15321000-15321999

# c++ - C++ 集合：计数小于一个值的元素

> ID：15321013
> 
> 赞同：30
> 
> 时间：2013-03-10T10:01:45.167
> 
> 标签：c++, performance, algorithm, stl, complexity-theory

假设我有一个 STL`set <int> s`和一个`int x`，我如何计算其中`s`小于的元素数量`x`？

我正在寻找一个`O(log n)`（或类似的；任何比 合理更好的`O(n)`）解决方案；

我已经知道了`std::distance(s.begin(), s.lower_bound(x))`，但`O(n)`我相信那是，因为`set`s 不是随机访问。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T10:55:03.993

您需要的是“订单统计树”。它本质上是一个增强的（二进制搜索）树，它支持额外的操作`rank(x)`，它为您提供与 element 具有更少或等于 key 的元素的数量`x`。第 14 章，Cormen、Leiserson、Rivest、Stein；“算法简介”应该为您提供算法背景。

[网上](http://sourceforge.net/projects/orderstatistics/)也有一些实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T10:10:15.033

我不认为这是可能的。您的 STL 集是基于树的结构，因此即使只是检查元素的存在也是 O(log n)。您的树的节点不会将其子分支的大小存储在任何字段中（据我所知），因此计算具有某些属性的节点所需的操作数不能直接遵循用于构建树的规则超过这些节点的数量。由于您事先不知道有多少节点的值小于 x，因此最坏情况下的性能是所有节点都小于 x 时，这意味着 O(n) 最坏情况复杂度。即使值 x 在树中，您也需要 O(log n) 操作来找到该节点，但随后需要访问其所有左侧后代以计算它们，所以复杂度取决于匹配节点的数量，在最坏的情况下是 O(n)。也许在树的节点中有额外的数据，可以做得更好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-10T10:09:04.440

作为对我的评论的跟进：使用红黑二叉搜索树（而不是集合），如果每个节点存储以该节点为根的节点数（每次插入/删除节点时更新），那么您可以在“节点数大于/小于 X”的统计数据非常快。

# java - 应用关闭后如何保存整数值？

> ID：15321014
> 
> 赞同：2
> 
> 时间：2013-03-10T10:02:14.433
> 
> 标签：java, android

我将屏幕上的整数设置为 100。当我单击按钮时，该值下降一 (99)。但是，当我重新启动应用程序时，如何获得与以前相同的值 99，而不将其重置为 100？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:06:40.913

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)来实现您想要的。设置`count`, 退出应用程序并重新打开它时，从那里获取它。

例如，关于如何使用它，请[查看](https://stackoverflow.com/questions/5734721/android-shared-preferences)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:08:58.143

你可以这样做：

在 中`onPause()`，使用此代码将计数器的值保存到 SharedPreference 文件

```
SharedPreferences sharedPrefs = getApplicationContext().getSharedPreferences(PREFERENCE_FILE_NAME, Context.MODE_PRIVATE);
Editor editor = sharedPrefs.edit();
editor.putInt(KEY_NAME, THE_INTEGER_VALUE);
// Replace `putInt` with `putString` if your value is a String and not an Integer.
editor.commit(); 
```

1.  替换`PREFERENCE_FILE_NAME`上面使用的以选择将创建的用于存储值的 XML 文件。
2.  `KEY_NAME`上面使用的是用于访问的 KEY（用于保存和读取第 1 点中命名的 SharedPreference 文件）。它是 SharedPreferences 中使用的*键值*对的一部分。
3.  `THE_INTEGER_VALUE`是实际值。

在 中`onResume()`，您可以取回值并显示它：

```
SharedPreferences sharedPrefs = getApplicationContext().getSharedPreferences(PREFERENCE_FILE_NAME, Context.MODE_PRIVATE);
int counter = sharedPrefs.getInt(KEY_NAME, 0);
// Replace the `int counter` with `String counter` if your value is a String and not an Integer.
// Also, replace the `getInt` with `getString` 
```

您可以使用`int counter`后者来显示`TextView`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:12:51.833

你需要这样使用`SharedPreferences`：**保存值然后再获取**

```
private final String NUMBER = "Number";
private final String PROFILE = "Profile";

SharedPreferences a = FirstActivity.this.getSharedPreferences("a", MODE_PRIVATE);
SharedPreferences.Editor prefsEditorProfiles = a.edit();
prefsEditorProfiles.putInt(Profile, 1);
prefsEditorProfiles.putInt(Number, 1);
prefsEditorProfiles.commit(); 
```

`SharedPreferences`然后在其他中恢复`Activity`：

```
SharedPreferences a = SecondActivity.this.getSharedPreferences("a", MODE_PRIVATE);
int ab = a.getInt(Number, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:13:27.760

使用共享首选项作为[文档示例](http://developer.android.com/guide/topics/data/data-storage.html#pref)更改为读/写 int 值：

```
public class Calc extends Activity {
    public static final String PREFS_NAME = "MyPrefsFile";

    @Override
    protected void onCreate(Bundle state){
       super.onCreate(state);
       . . .

       // Restore preferences
       SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
       int lastIndex = settings.getInt("yournumbername", 100);
       setLastIndex(lastIndex);
    }

    @Override
    protected void onStop(){
       super.onStop();

      // We need an Editor object to make preference changes.
      // All objects are from android.context.Context
      SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
      SharedPreferences.Editor editor = settings.edit();
      editor.putInt("yournumbername", mlastIndex);

      // Commit the edits!
      editor.commit();
    }
} 
```

# middleware - 为什么以数据为中心不好？

> ID：15321016
> 
> 赞同：0
> 
> 时间：2013-03-10T10:02:49.660
> 
> 标签：middleware

关于已发布问题的答案：“[以数据为中心和面向对象的应用程序模型有什么区别？](https://stackoverflow.com/questions/9346995/what-is-the-difference-between-data-centric-and-object-oriented-application-mode) ”我读到：

> 当您提到“消息传递”示例时，您说实现它的一种方法是以数据为中心（尽管您认为这是一种不好的方法）。

为什么以数据为中心是不好的方式？知道 RTI 发布的以数据为中心的方法看起来是一种有趣的实时分布式应用程序方法。

替代方案是以消息为中心的吗？以应用为中心？或者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:08:15.700

以数据为中心的设计具有没有有意义方法的类。这些类只保存数据。这并不是对可以容纳功能和属性的东西的适当使用。Data-Centric 还将它的所有功能本地化到几个类中，这些类必须完成所有工作。

在繁忙的网络中，如果我们不断引用相同的对象来完成所有工作，我们将快速开发任务队列，如果将各种职责分散到几个类中，这些任务将更快地处理。

此外，这不符合[Dijksta 的关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)等设计原则，这被认为是良好实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:31:07.553

对象包含数据和方法，以促进更“自然”的符合 RL 的编程思维方式，您不仅有一个保存信息的“档案”类，该档案类还具有访问该数据的方法，例如`readPage(int pageNr)`.

在某些极端情况下放弃编写方法当然是可能的并且是可取的，例如不必使用反射，我声明了一个 DataTransferObject，但大多数时候它是在浪费潜力。

# scala - 如何中断Scala中的异步计算？

> ID：15321018
> 
> 赞同：5
> 
> 时间：2013-03-10T10:03:17.503
> 
> 标签：scala, concurrency, interrupt-handling

我需要运行两个并行计算并在第二个完成时中断第一个。目前，我已经使用标准 Java 线程实现了它：

```
/**
 * Runs <var>sup</var> in parallel with <var>main</var>.
 * Terminate (interrupt) it when <var>main</var> finishes.
 */
def support[R](sup: => Unit, main: => R): R = {
  val supThread = new Thread {
    override def run = { sup };
  }

  supThread.start();
  try {
    main;
  } finally {
    supThread.interrupt();
  }
} 
```

可以使用 Scala 的并发库来实现相同的行为，而无需`Thread`显式使用 s 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:26:39.033

不是 Scala 标准期货 (AFAIK)，但[Twitter 的 Util 库](https://github.com/twitter/util)确实支持它：

```
val future = Future { sup }
future.cancel() // in 5.x
future.raise(new FutureCancelledException) // in 6.x 
```

# ios - 尝试在 iOS 中使用 @selector 按值对 NSMutableDictionary 进行排序

> ID：15321019
> 
> 赞同：0
> 
> 时间：2013-03-10T10:03:21.093
> 
> 标签：ios, sorting, nsmutablearray, selector, nsmutabledictionary

我有一个`NSMutableDictionary`包含`NSString`s 的键和“分数”类型的对象的值。这是我创建的一个自定义对象，它就是这样，由一个分子和一个分母组成的分数（每个都是一个 int）。我想做的是从 中获取一个值数组（在本例中为“分数”对象）`NSMutableDictionary`，然后使用`@selector`如下方式对数组进行排序：

```
NSArray *myFractions = [myDict allValues];
NSArray *sortedFractions = [myFractions sortedArrayUsingSelector:@selector(comparator)]; 
```

或者

```
NSArray *myFractions = [myDict allValues];
NSArray *sortedFractions = [myFractions sortedArrayUsingFunction:comparatorFunction context:nil]; 
```

我的问题是，如何创建一个comparatorFunction 方法，该方法将“分数”对象按从大到小的顺序排序？请记住，每个“分数”对象都由两个变量组成：一个 int 类型的分子，一个也是 int 类型的分母。

这个问题与其他已发布的问题不同，因为我在这里询问如何在“sortedArrayUsingFunction”方法中对“Fraction”对象从最大到最小进行排序。其他被认为是重复的问题是查看基于 NSDate 对象或基于 NSString 值的排序，而我的不同。正如我所说，我对此很陌生，需要更具体的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:11:47.033

在您的课程中，您需要实现类似于以下的方法：

```
-(NSComparisonResult)compareFirstName:(Fraction *)fraction{

      return ((float)self.numerator/self.denominator > (float)fraction.numerator/fraction.denominator);
} 
```

**未编译和检查*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:13:26.520

作为一种风格上的改进，我可以建议您使用闭包而不是函数吗？要按降序对对象进行排序，只需比较它们的实际数值，如下所示：

```
NSMutableDictionary *dict = // dictionary of NSString keys and Fraction values
NSArray *fractions = [dict allValues];

NSArray *sortedFractions = [fractions sortedArrayUsingComparator:^(id obj1, id obj2) {
    Fraction *f1 = obj1;
    Fraction *f2 = obj2;
    double diff = (double)(f1.num) / f1.denom - (double)(f2.num) / f2.denom;
    return diff < 0 ? NSOrderedAscending : diff > 0 ? NSOrderedDescending : NSOrderedSame;
}]; 
```

# java - JSF 2.0 + axis2 集成有可能吗？

> ID：15321020
> 
> 赞同：2
> 
> 时间：2013-03-10T10:03:24.567
> 
> 标签：java, web-services, jsf-2, axis2, myeclipse

![在此处输入图像描述](../Images/ebc9d5f2553bf2be5b99263573166785.png)

是否可以`axis2`在`JSF 2.0`项目中实施？似乎我不能这样做，因为它弹出一个错误说：`javaserver faces 2.0 requires dynamic web module 2.5`，并且`axis2`需要动态模块`2.2`或者`2.3`有人有任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:11:09.940

我刚刚在 MyEclipse 10.7.1 上尝试过，没有任何问题。我刚刚在 web 项目中添加了 JSF 功能（右键单击项目并转到 MyEclipse->Add JSF Capabilities，选择 2.0。然后我在首选项中设置 Axis2 运行时（我有一个旧的 Axis2 1.5.4 运行时）。然后我去了您显示的项目的首选项页面，并添加了 Axis2。我没有收到任何错误。对于 Axis2 运行时首选项页面，您需要启用 WTP Extras (Window->Preferences->General->Capabilities-> Advanced 然后打开 MyEclipse Standard Tools 并选择 WTP Extras，然后单击 OK）。

我不确定 MyEclipse 的发布是否重要，但如果您不是最新的（10.7.1），那么首先更新您的安装可能是个好主意。

# android - 如何从 android 手机访问我的 locahost 数据库

> ID：15321025
> 
> 赞同：-2
> 
> 时间：2013-03-10T10:04:00.043
> 
> 标签：android, xampp, localhost

我已经开发了一个Android，现在我想在我的真实手机上测试它，这个应用程序有一个用户注册的网络服务。并登录，它还有一个托管我的数据库的 xampp 服务器和一个我从应用程序访问的论坛。

有人能帮我弄清楚为什么我不能在我的设备中使用它吗

这是我的日志猫

```
03-10 17:54:56.360: E/SensorManager(2377): thread start
03-10 17:54:56.555: E/SpannableStringBuilder(2377): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-10 17:54:56.555: E/SpannableStringBuilder(2377): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-10 17:56:06.415: E/SpannableStringBuilder(2377): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-10 17:56:06.415: E/SpannableStringBuilder(2377): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-10 17:56:12.920: E/AndroidRuntime(2377): FATAL EXCEPTION: main
03-10 17:56:12.920: E/AndroidRuntime(2377): android.os.NetworkOnMainThreadException
03-10 17:56:12.920: E/AndroidRuntime(2377):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at libcore.io.IoBridge.connect(IoBridge.java:112)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at java.net.Socket.connect(Socket.java:842)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at com.mohammed.watzIslam.library.JSONParser.getJSONFromUrl(JSONParser.java:44)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at com.mohammed.watzIslam.library.UserFunctions.loginUser(UserFunctions.java:39)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at com.mohammed.watzIslam.LoginActivity$1.onClick(LoginActivity.java:59)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at android.view.View.performClick(View.java:4211)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at android.view.View$PerformClick.run(View.java:17267)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at android.os.Handler.handleCallback(Handler.java:615)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at android.os.Looper.loop(Looper.java:137)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at android.app.ActivityThread.main(ActivityThread.java:4898)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at java.lang.reflect.Method.invokeNative(Native Method)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at java.lang.reflect.Method.invoke(Method.java:511)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-10 17:56:12.920: E/AndroidRuntime(2377):     at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:05:26.150

你在主线程上做网络工作。不要那样做。请改用 AsyncTasks。

# c# - 从 IIS 应用程序中调用 FileVersionInfo

> ID：15321027
> 
> 赞同：0
> 
> 时间：2013-03-10T10:04:15.353
> 
> 标签：c#, iis

我在检测文件的 FileVersion 时遇到问题。我的代码从 IIS 虚拟应用程序运行（根据传入的 HTTP 请求）。

运行时，我运行以下命令，FileVersion 为空：

```
FileVersionInfo version = FileVersionInfo.GetVersionInfo(file.FullName);    
version.FileVersion ==> null 
```

我已经检查了两倍，返回`file.FullName`是正确的）。`(File.Exists(FullName)``true`

当我在同一个文件上从非 IIS 虚拟应用程序（简单的 .EXE）运行相同的代码时，它工作正常。此外，当我在不同的文件上运行 IIS 虚拟应用程序时，它也可以正常工作。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:12:07.557

一个可能的原因可能是您正在检查的程序集附有多个版本信息资源。根据调用该`GetVersionInfo`方法的程序的文化，可能会返回不存在的版本信息。

# java - 无法构建 CloudHopper (SMPP)

> ID：15321028
> 
> 赞同：2
> 
> 时间：2013-03-10T10:04:17.910
> 
> 标签：java, maven, build, jar, smpp

我已通过此链接从 github 下载了源代码：[https](https://github.com/twitter/cloudhopper-smpp) ://github.com/twitter/cloudhopper-smpp但是当我尝试在 Netbeans 中构建它时，出现两个错误，如下所示：

1）在输出窗口的构建开始时，它说：

```
Scanning for projects...

Some problems were encountered while building the effective model for     com.cloudhopper:ch-smpp:jar:5.0.1-SNAPSHOT
The expression ${scm.url} is deprecated. Please use ${project.scm.url} instead.

It is highly recommended to fix these problems because they threaten the stability of     your build.

For this reason, future Maven versions might no longer support building such malformed     projects. 
```

2）在构建结束时，输出窗口显示：

```
Results :

Failed tests:       serverBindToUnavailablePortThrowsException(com.cloudhopper.smpp.impl.DefaultSmppServerTest)

Tests run: 162, Failures: 1, Errors: 0, Skipped: 1

------------------------------------------------------------------------
BUILD FAILURE
------------------------------------------------------------------------
Total time: 27.606s
Finished at: Sun Mar 10 09:42:27 GMT 2013
Final Memory: 21M/314M
------------------------------------------------------------------------
Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test     (default-test) on project ch-smpp: There are test failures.

Please refer to C:\XXX\XXX\XXX\XXX\CloudHopper\cloudhopper-smpp-master\cloudhopper-    smpp-master\target\surefire-reports for the individual test results.
-> [Help 1]

To see the full stack trace of the errors, re-run Maven with the -e switch.
Re-run Maven using the -X switch to enable full debug logging.

For more information about the errors and possible solutions, please read the     following articles:
[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我希望能够构建所需的 jar 文件并运行提供的演示。

任何想法如何正确地建造这座建筑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:21:21.730

删除`test`文件夹`src/`并尝试使用 Netbeans 构建。它将正确编译jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:45:12.720

您必须使用 maven 执行项目才能获取 jar 文件。

[这是 Cloudhopper-jar 文件的链接](https://www.dropbox.com/s/qtrge3mazlr3feg/ch-smpp-5.0.1-SNAPSHOT-sources.jar)

# asp.net - 如何在gridview asp.net中添加和更新行

> ID：15321030
> 
> 赞同：2
> 
> 时间：2013-03-10T10:04:44.960
> 
> 标签：asp.net, gridview, datatable, rows

我正在做一个在线订购系统。我想检查该项目是否存在于 gridview 中，因此它不会添加另一行或有多行（它将更新数量和价格）。网格视图正在使用 dgvOrder.Rows[i].Cells[2].Text 进行更新，但我的问题是如何更新数据表。

```
bool isExist = false;
if (Session["dtInSession"] != null)
dt = (DataTable)Session["dtInSession"]; //Getting datatable from session
for (int i = 0; i < dgvOrder.Rows.Count; i++)
{
   if (dgvOrder.Rows[i].Cells[0].Text == b.ID)
   {
        isExist = true;
        dgvOrder.Rows[i].Cells[2].Text = Convert.ToString(Convert.ToInt32(dgvOrder.Rows[i].Cells[2].Text) + 1);
        dgvOrder.Rows[i].Cells[3].Text = Convert.ToString(Convert.ToInt32(dgvOrder.Rows[i].Cells[2].Text) * price);

    }
 }

 if (!isExist)
 {
    DataRow dr = dt.NewRow();
    dr["pCode"] = b.ID;
    dr["desc"] = description;
    dr["qty"] = "1";
    dr["price"] = price;
    dt.Rows.Add(dr);
    dgvOrder.DataSource = dt;
    dgvOrder.DataBind();
  } 
```

因为我打算使用会话变量传递数据表。

```
 Session["orders"] = dt;
 Response.Redirect("FinalizeOrder.aspx"); 
```

传递数据后，代码正在运行，但每个项目只有 1 个数量正在传递。

任何人都可以在这个问题上帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:11:36.630

问题是你重新加载`DataSource`了`GridView`only if `!isExist`。否则，您正在更改数据表，但您没有将其分配给`GridView`再次，因此值来自`ViewState`.

所以这应该工作：

```
// update the table
// ...
if (!isExist)
{
    // ...
}
// reassign the updated DataTable and DataBind the grid always
dgvOrder.DataSource = dt;
dgvOrder.DataBind(); 
```

# php - 在 Joomla 文章中渲染一个 php 应用程序

> ID：15321033
> 
> 赞同：0
> 
> 时间：2013-03-10T10:05:12.327
> 
> 标签：php, joomla, joomla2.5

我有一个包含 php 预订系统的文件夹，我想将其呈现为联合国文章并将其添加到网站的主菜单中。我结束的解决方案是使用 joomla URL Wrapper。但它破坏了我的设计，因为它在 iframe 中渲染它。

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:18:12.157

使用*Jumi*，它将PHP 文件**包含**到文章中，没有 iframe。

用法：

```
{jumi [path/to/file.php]} 
```

[聚米网站](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/1023)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:19:36.897

这需要整合工作。至少您宁愿想办法为您的预订系统提供一些 Jooml 组件包装器。这至少涉及创建一个 com_yourcomname 文件夹和一个 yourcomname.php ，它将您的操作分派给预订组件的操作，并且也许过滤输出中的 url，以便它们与 Joomla url 构建 convections 匹配。如果正确执行此操作，您的应用将显示为页面内容（而不是文章）

# ios - 视图控制器继承

> ID：15321040
> 
> 赞同：1
> 
> 时间：2013-03-10T10:06:04.710
> 
> 标签：ios, uiviewcontroller, storyboard

我的项目中有 30 多个视图控制器，其中 28 个要添加一个行为。

如果在该视图控制器中未通过 10 秒，则单击按钮时，我需要显示从顶部滑动的警报视图。（我已经为其中一个实现了这种行为）

但我的问题是，我怎样才能以适当的方式为所有这些视图控制器继承这种行为？

谷歌搜索，但找不到相关的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:12:58.790

如果您所有需要此功能的视图控制器都是 的子类`UIViewController`，即不是`UITableViewController`或另一个子类`UIViewController`，您可以创建一个子类`UIViewController`，比如说`ButtonClickAlertViewController`（或任何有意义的）实现您需要复制的功能。然后让所有需要此功能的类子类化您的 `ButtonClickAlertViewController`类而不是`UIViewController`.

您可能需要考虑此特定功能如何集成到每个单独的视图控制器类中。例如，您可能需要在您的`ButtonClickAlertViewController`类中使用一个方法来指示按钮已被单击，以检查您的计时器并可能显示警报。在您的每个子类中`ButtonClickAlertViewController`，您可能需要在`IBAction`按钮单击操作调用的每个方法中调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:11:30.717

子类`UIViewController`化并为所有视图控制器添加您想要的行为，然后从 viewController 子类化您现有的视图控制器并使用所需的行为。

继承链：

> UIViewController -> ViewControllerWithBehaviorForAll -> YouExistingViewlContollersWhichNeedTheBehavior

# php - 执行代码后重定向

> ID：15321042
> 
> 赞同：0
> 
> 时间：2013-03-10T10:06:28.500
> 
> 标签：php, javascript, html, redirect

我希望此 PHP 代码重定向到上一页并自动刷新...我知道使用 JavaScript 我可以返回历史记录，但它不会刷新。请帮忙。

我的代码：

```
<?php
$con=mysqli_connect("host","user","pass","db_name");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

//post result to db
$result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
$row = mysqli_fetch_assoc($result_set);
$old_total = $row['points'];
$new_total = $old_total + $_REQUEST['total'];
mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:12:45.023

在会话中获取 url，当您想要重定向时，只需使用该 url 并重定向用户并取消设置会话 var

```
//Track this on the page you want to redirect your code
$_SESSION['prev_url'] = $_SERVER['REQUEST_URI']; 
```

在下一页使用这个

```
//When you want to redirect to previous page
header('Location: '.$_SESSION['prev_url']);
exit; 
```

确保您`session_start()`在页面顶部声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:09:32.803

使用 php 重定向：

```
<? header("location: http://.........."); ?> 
```

请注意，在此说明之前，您不能打印 html，如果打印了一些 html，您的 header 将不会被发送

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:12:42.050

你可以使用javascript代码：

*   向前：`window.history.go(+1)`
*   落后：`window.history.go(-1)`

或jQuery代码：

*   向前：`history.go(1);`
*   落后：`history.go(-1);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:10:45.943

添加

```
header("Location: " . $_SERVER['HTTP_REFERER']);
exit; 
```

# wpf - 动态更改 FocusManager.FocusedElement

> ID：15321047
> 
> 赞同：2
> 
> 时间：2013-03-10T10:07:08.983
> 
> 标签：wpf, bind, focusmanager

我有如下的 WPF xaml 代码：

```
 <StackPanel  FocusManager.FocusedElement="{Binding FocusedElement}">
    <TextBox Name="txtbox1" Text="FirstText"/>
    <TextBox Name="txtbox3" Text="SecondText"/>
    <TextBox Name="txtbox2" Text="ThirdText"/>
  </StackPanel> 
```

如何将 FocusedElement 绑定到 ViewModel 中的属性？类似的代码如下：

```
Switch(Type)
{
Case "FirstType" :
  FocusedElement = "txtbox1";
break;
Case "SecondType" :
   FocusedElement = "txtbox2";
break;
Case "ThiredType" :
   FocusedElement = "txtbox3";
break;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T16:56:07.017

viewmodel 永远不应该知道视图，而且肯定不知道某些 UIElement 名称。但是鉴于视图模型确实需要能够管理焦点（我建议您在继续之前确保确实如此），您可以执行以下操作：

![在此处输入图像描述](../Images/5193c191a540d87aadab0216478a22d3.png)

视图模型：

```
public enum Focuses
{
    None = 0,
    First,
    Second,
    Third
}

public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private Focuses _focusedElement;
    public Focuses FocusedElement { get { return _focusedElement; } set { _focusedElement = value; OnPropertyChanged("FocusedElement"); } }

    public ViewModel()
    {
        this.FocusedElement = Focuses.Second;
    }
} 
```

xml:

```
<StackPanel >
    <TextBox Name="txtbox1" Text="FirstText"/>
    <TextBox Name="txtbox2" Text="SecondText"/>
    <TextBox Name="txtbox3" Text="ThirdText"/>
    <StackPanel.Style>
        <!-- cannot use DataTriggers directly in StackPanel.Triggers, therefore Style -->
        <Style TargetType="{x:Type StackPanel}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding FocusedElement}" Value="First">
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=txtbox1}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding FocusedElement}" Value="Second">
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=txtbox2}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding FocusedElement}" Value="Third">
                    <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=txtbox3}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </StackPanel.Style>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:17:26.340

FocusedElement 是对特定焦点范围具有逻辑焦点的元素。

逻辑焦点而不是“真正的焦点”，例如 txtBox1.Focus();

逻辑焦点可以设置多次，而只有一个元素可以具有键盘焦点。

你真的需要逻辑焦点吗？

您可以收听 GotFocus 事件，然后执行一些自定义逻辑作为示例。

# asp.net-mvc-3 - 从局部视图访问父元素

> ID：15321049
> 
> 赞同：0
> 
> 时间：2013-03-10T10:07:47.243
> 
> 标签：asp.net-mvc-3, razor, entity, entity-framework-5

我需要从部分视图中检索父视图中隐藏字段（如父 ID）中的值。我到处搜索，但人们似乎在做相反的事情（从父级访问部分视图元素）。

# memory-management - RAM 在 lowmem 和 highmem 之间分割

> ID：15321050
> 
> 赞同：3
> 
> 时间：2013-03-10T10:07:47.377
> 
> 标签：memory-management, linux-kernel, arm, embedded-linux

我已经比较了运行 Android 姜饼和冰淇淋三明治（氰 CM9）的galaxys2（arm exynos4）设备的/proc/meminfo。我注意到内核在低内存和高内存之间划分内存的方式不同：

对于 ICS/CM9（3.0 内核）：

```
cat /proc/meminfo:

MemTotal:         843624 kB
MemFree:           68720 kB
Buffers:            1532 kB
Cached:           115720 kB
SwapCached:            0 kB
Active:           487780 kB
Inactive:          64524 kB
Active(anon):     436316 kB
Inactive(anon):     1764 kB
Active(file):      51464 kB
Inactive(file):    62760 kB
Unevictable:         748 kB
Mlocked:               0 kB
**HighTotal:        278528 kB**
HighFree:          23780 kB
**LowTotal:         565096 kB**
LowFree:           44940 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 4 kB
Writeback:             0 kB
AnonPages:        435848 kB
Mapped:            45364 kB
Shmem:              2276 kB
Slab:              37996 kB
SReclaimable:      10028 kB
SUnreclaim:        27968 kB
KernelStack:       10064 kB
PageTables:        16688 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:      421812 kB
Committed_AS:    8549052 kB
VmallocTotal:     188416 kB
VmallocUsed:      104480 kB
VmallocChunk:      26500 kB 
```

对于 GB（2.6 内核）：

```
cat /proc/meminfo:

MemTotal:         856360 kB
MemFree:           22264 kB
Buffers:           57000 kB
Cached:           337320 kB
SwapCached:            0 kB
Active:           339064 kB
Inactive:         379148 kB
Active(anon):     212928 kB
Inactive(anon):   112964 kB
Active(file):     126136 kB
Inactive(file):   266184 kB
Unevictable:         396 kB
Mlocked:               0 kB
**HighTotal:        462848 kB**
HighFree:           1392 kB
**LowTotal:         393512 kB**
LowFree:           20872 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 4 kB
Writeback:             0 kB
AnonPages:        324312 kB
Mapped:            97092 kB
Shmem:              1580 kB
Slab:              29160 kB
SReclaimable:      13924 kB
SUnreclaim:        15236 kB
KernelStack:        8352 kB
PageTables:        23828 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:      428180 kB
Committed_AS:    4001404 kB
VmallocTotal:     196608 kB
VmallocUsed:      104804 kB
VmallocChunk:      57092 kB 
```

我注意到，在 3.0 内核上，内存压力很明显，并且经常调用内存不足的杀手。

我对此有两个问题：

1.  是否有可能在 3.0 布局中（更少的 highmem 更多的 lowmem）应用程序的可用内存更少？这可以解释高内存压力吗？
2.  是否可以更改 3.0 内核中的布局以使其更类似于 2.6 布局（即更多 highmem 更少 lowmem）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:48:48.350

据我记得，高低内存之间的分割是内核的编译参数，所以应该可以不同地设置它（在编译时）。我不知道为什么在您的示例中为高内存区域提供了这么多。在具有 1 GB 物理 RAM 的 x86 上，低内存约为 896 MB，高内存约为 128 MB。

看起来 Android 需要比典型的 32 位 x86 桌面更多的内存，我不知道 Android echo-system 的哪些功能会带来这样的要求，所以希望其他人可以告诉你。

您可以尝试调查内存区域以尝试查看 Android ICS 和 GB 之间的区别。只需做一个`cat /proc/zoneinfo`. [您可以在本文](http://kerneltrap.org/node/2450)中找到有关这些区域的一些背景信息，但请注意它是针对 x86 架构描述的。

# c# - 从第二个子页面获取数据到第一页 - Windows Phone（最佳方法）

> ID：15321053
> 
> 赞同：0
> 
> 时间：2013-03-10T10:08:16.017
> 
> 标签：c#, windows-phone-7, mvvm

我想问你，你怎么看，从第二页到第一页的最佳方法是什么？我使用这样的东西。（MVVM）

第二页：

```
public partial class AddProfilePageView : PhoneApplicationPage
{
    public AddProfilePageView()
    {
        InitializeComponent();
        DataContext = new AddProfileViewModel();
    }

    public AddProfileViewModel ViewModel { get { return DataContext as AddProfileViewModel; } }} 
```

第一页：

```
public partial class ProfilesPageView : PhoneApplicationPage
{

    public ProfilesPageView()
    {
        InitializeComponent();
        DataContext = new ProfilesViewModel();
    }

    public ProfilesViewModel ViewModel
    {
        get { return DataContext as ProfilesViewModel; }
    }} 
```

AddProfileViewModel() 类具有绑定到 xaml 中的控件的属性。我需要从这个页面获取数据到第一页 ProfilesPageView。

我的解决方案是：

```
protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        var content = e.Content as ProfilesPageView;
        if (content != null && ViewModel.IsOk)
        {
                content.ViewModel.ProfilesList.Add(ViewModel.ProfileRecord);

        }
    } 
```

所以你怎么看？如何获取数据是很好的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:06:14.143

实际上，您并没有尝试将数据从一页获取到另一页。
在第二个/详细信息页面上，您正在添加一个新项目，然后当您返回第一个/主页面时，您希望它更新显示的数据以显示新项目。

我假设`AddProfileViewModel`并且`ProfilesViewModel`都坚持到磁盘/隔离存储，所以你可以在返回时刷新主/列表/第一页。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    // ...

    if (e.NavigationMode == NavigationMode.Back)
    {
        (this.DataContext as ProfilesViewModel).Refresh();
    }
} 
```

# iphone - 描述方法中的断行不起作用

> ID：15321057
> 
> 赞同：1
> 
> 时间：2013-03-10T10:08:59.397
> 
> 标签：iphone, ios, objective-c, nsstring

我正在尝试使用描述方法。我会在字符串中划线以换行。但是`/n`，`/r`不工作。

这是我的代码：

```
- (NSString *)description
{
    return [NSString stringWithFormat:@"some text: \r some more text - %@",@"more text"];
} 
```

我试过这个：

```
- (NSString *)description
{
    return [NSString stringWithFormat:@"some text: \n some more text - %@",@"more text"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:19:08.160

您尝试过的方法应该确实有效。由于它不适用于您的情况，您可以试试这个：

```
[[NSString stringWithFormat:@"some text: \r\n some more text - %@",@"more text"] isHTML:YES]; 
```

应该管用 。

# python - webbrowser 脚本执行没有错误，但没有任何反应？

> ID：15321060
> 
> 赞同：0
> 
> 时间：2013-03-10T10:09:06.970
> 
> 标签：python, browser

我正在编写一个脚本，该脚本应该使用给定的 url 打开不同的浏览器。

当我在 eclipse 中运行它时，它运行脚本没有错误，但没有打开浏览器。：/

```
import webbrowser as wb

url_mf = ['https://www.thatsite.com/','http://thatothersite.org/']
url_gc = ['https://www.thatsite.com/','http://thatothersite.org/']

chrome = wb.get('/usr/bin/google-chrome %s')
firefox = wb.get('fierfox %s')

chrome.open(url_gc[1], new=1)
firefox.open(url_mf[1], new=1) 
```

我还有一个使用 IEC.py 模块打开 Internet Explorer 的脚本（我需要输入登录信息，然后从站点中提取非常无格式的数据库查询 - mechanize & selenium 似乎有点过头了？），和效果很好。但我猜这就像比较苹果和橘子？

```
import iec
ie= iec.IEController()
ie.Navigate(url_ie[1]) 
```

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:54:16.617

我注意到的第一件事是第 5 行的错字。它应该`Firefox`代替`fierfox`. 第二件事，我在 SublimeText 2 中运行了你的代码，我没有问题，我改变了路径，因为我在 Windows 机器上。

下面的代码同时打开了 Firefox 和 Chrome。

```
import webbrowser as wb

url_mf = ['https://www.thatsite.com/','http://www.google.ie/']
url_gc = ['https://www.thatsite.com/','http://www.google.ie/']

chrome = wb.get('"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" %s')
firefox = wb.get('"C:/Program Files (x86)/Mozilla Firefox/firefox.exe" %s')

chrome.open(url_gc[1], new=1)
firefox.open(url_mf[1], new=1) 
```

您真的要指定程序要使用的浏览器吗？我建议使用

```
import webbrowser as wb

urls = ["http://www.google.ie/","http://www.gametrailers.com/"]

for url in urls:
    wb.open(url,new=2, autoraise=True) 
```

这只会获取您的默认浏览器并在新选项卡中打开每个链接。

# spring - Spring 事务传播

> ID：15321061
> 
> 赞同：0
> 
> 时间：2013-03-10T10:09:12.773
> 
> 标签：spring, transactions, spring-transactions

JMS/Datasource 是完整的 XA 2PC，由 Weblogic JTA 事务管理器管理。

1.  消息监听器是没有事务注解的……（但好像可以参与事务，可能是因为JMS容器的定义吧？）
2.  如果从 ServiceB 抛出任何未经检查的异常，事务会回滚并将消息放回 JMS 队列吗？
3.  例外是在 serviceA 中捕获并记录下来，并且 dao.update(res) 正在新事务中发生，因此无论在 ServiceB 中的结果如何，它都会始终执行。
4.  如果 dao.update(res) 失败，一切都会被回滚

有人可以确认上述内容吗？我的逻辑是正确的还是我错过了什么？

请提出意见和建议。

```
public class MyMessageListener
@Autowired
private ServiceA serviceA;

//I am not declaring this as a transcational.
public void onMessage(Message m) {  
       serviceA.methodA(m); 
}

public class ServiceA {

 @Autowired
private ServiceB serviceB;

 @Autowired
private DAO dao;

@Transactional(propagation=Propagation.REQUIRES_NEW)
public void methodA() {
    try{
        String res = ServiceB.methodB(m);
  } catch (Exception e) {
      log.(e); 
     }
    dao.update(res);
}

public class ServiceB {

@Autowired
private DAO dao;

@Transactional
public void methodB(String m)  {
    dao.read()
    callExtSystem() //this can throw unchecked exception
    dao.insert()
}

public class DAO {

   @Transactional
   public read() {}

   @Transactional
   public insert(){}

   @Transactional(propagation=Propagation.REQUIRES_NEW)
   public update(){}
}

 <bean id="jmsContainer"   class="org.springframework.jms.listener.DefaultMessageListenerContainer">
<property name="connectionFactory" ref="connectionFactory"/>
<property name="destination" ref="destination"/>
<property name="messageListener" ref="messageListener"/>
<property name="transactionManager" ref="transactionManager"/> //Weblogic JTA Manager
<property name="concurrentConsumers" value="10"/> 
</bean>

<tx:jta-transaction-manager/> 
```

# ios - 到 WCF JSON REST 服务器的 NSURLConnection 超时

> ID：15321069
> 
> 赞同：2
> 
> 时间：2013-03-10T10:09:48.410
> 
> 标签：ios, wcf, rest

我有一个使用 Microsoft-HTTPAPI 构建的基于 Windows 的 REST 服务器（即它不在 IIS 下运行）

如果我从基于浏览器的 REST 工具 (Firefox RESTClient) 向服务发送 JSON 请求，则服务器接收请求并根据来自 Microsoft 服务跟踪查看器的跟踪和来自服务的响应正确处理它。我从服务收到有效的 JSON。

我有一个 iOS 应用程序，它使用 NSURLConnect 向服务发送非常相同的 JSON 请求，但它总是超时。我使用 WireShark 进行了跟踪，在这两种情况下，HTTP 请求都正确形成并正确发送到服务器。我使用 MS Trace Viewer 进行了跟踪，它进入“接收字节”但永远不会返回。当我最终关闭 WCF 服务器时出现异常。当我关闭 iOS 应用程序时它永远不会返回。

我尝试使用 NSURLConnection sendSynchronousRequest 并异步使用回调和异步使用完成块。如果我将超时设置为 0，则调用（对 sendSynchronousRequest）将永远不会返回。在所有其他情况下，我会超时，并且 WCF 永远不会完成 WCF 调用的接收字节部分（POST 请求）

我已经检查过了

这是我的 iOS 代码：

```
dispatch_queue_t myQ = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(myQ, ^{ // First Queue the parsing
    @try {
        //Generate endpoint url
        NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@",appState.posPostingURL,serviceName]];
        //Setup request
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                               cachePolicy:NSURLRequestReloadIgnoringCacheData
                                                           timeoutInterval:10.0];

        NSString *authStr = [NSString stringWithFormat:@"%@:%@", @"xxxx", @"xxxx"];
        NSString *authData = [NSString base64StringFromString:authStr];
        NSString *authValue = [NSString stringWithFormat:@"Basic %@", authData];
        [request setValue:authValue forHTTPHeaderField:@"Authorization"];

        //Setup request headers
        [request setHTTPMethod:@"POST"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
        [request setValue:@"no-cache" forHTTPHeaderField:@"Cache-Control"];
        [request setValue:[NSString stringWithFormat:@"%d", [dataBuffer length]] forHTTPHeaderField:@"Content-Length"];

        // Put the request data in the request body
        [request setHTTPBody: dataBuffer];
        NSHTTPURLResponse *urlResponse = nil;
        NSError *error = nil;
        // and send to the server synchronously
        serverData = [[NSURLConnection sendSynchronousRequest:request
                                            returningResponse:&urlResponse
                                                        error:&error] mutableCopy];
        // Now check the status and response
        if (error) { 
```

我的 WCF 代码如下

```
namespace MyWebService{
[ServiceContract(Name = "MyServiceIntegrator", Namespace = "")]
public interface IMyIntegrator
{
    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "/Configure",
        BodyStyle=WebMessageBodyStyle.Bare,
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json)]
    Result Configure(MyServerConfig config); 
```

在 app.config 文件中，服务端点配置为

```
binding="webHttpBinding" 
```

Trace 视图如下： ![WCF 跟踪](../Images/6643cb4481c79243a41fd5f92af0c6e0.png)

即使 JSON 有效，服务器也没有完成读取是否有任何原因。

我还检查了[NSURLConnection JSON Submit to Server](https://stackoverflow.com/questions/12762027/nsurlconnection-json-submit-to-server) ，据我所知，我发送请求的代码是正确的。

任何想法 - 拉我的头发已经 3 天了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:37:22.757

ferdil，我认为您可以尝试将超时时间更改为 30.0 而不是 10。

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30.0];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:11:19.893

如果你改变这个会发生什么：

```
 [request setValue:[NSString stringWithFormat:@"%d", [dataBuffer length]] forHTTPHeaderField:@"Content-Length"]; 
```

对此：

```
 [request setValue:[NSString stringWithFormat:@"%i", [dataBuffer length]] forHTTPHeaderField:@"Content-Length"]; 
```

可能不会有什么不同，但你的代码的其余部分看起来不错，所以也许值得一试。（我的想法是小数导致服务器问题）。

# grails - 使用带有 12.0 的 intellij IDEA 运行第一个 Grails 应用程序

> ID：15321070
> 
> 赞同：0
> 
> 时间：2013-03-10T10:09:56.367
> 
> 标签：grails, intellij-idea

我是 grails 的新手，我从未使用过 intellij IDEA。现在我想用它在 grails 中运行一个普通的应用程序。那么安装 intellij 时应该安装什么？只有tomcat还是别的什么？请尽快通知我？

# java - Java 显示不显示整个方法

> ID：15321080
> 
> 赞同：0
> 
> 时间：2013-03-10T10:11:02.993
> 
> 标签：java

一整天都在为这个烦恼。请帮我。我无法显示问题输出显示

**问题 1**

答案：0

正确的....

**问题二**

答案：1

错误的....

它必须显示：

**问题 1**

10 + 11 = ?

答案：21

正确的...*/

```
import java.util.Random;
import java.util.*;
import java.util.Scanner;
import javax.swing.JOptionPane;
import java.lang.Math;

public class MathIsSuperFun1{

Scanner input = new Scanner(System.in);
int correctAnswers;
int randomNum1;
int randomNum2;
int choice;
int corrrectAnswers, wrongAnswers;
String playerName ="";
int operation;
int userAnswer;
int correctAnswer = 0;
int userRemainder, correctRemainder;
int x = 0;
int temporaryNum1, temporaryNum2;
int range;
int randomNumber;

public static void main (String args[]){
MathIsSuperFun1 lab = new MathIsSuperFun1();
        lab.init();
    }

public void init(){ 

getName();
pickDifficulty();
pickOperation();
for(int x = 0; x < 10; x++)
{
System.out.println("\t\t\t~~~~~~~PROBLEM NUMBER" + (x + 1) + "~~~~~~~~");
assignNum();
getProblem();
checkAnswer();

}
}

//GET PLAYER NAME USING PANE
public static String getName(){
String playerName;

playerName = JOptionPane.showInputDialog(null, "Welcome!\nEnter your name and press OK.", "Math Is Super Fun!", JOptionPane.QUESTION_MESSAGE);
System.out.println("Do your best," + playerName + "!");
return playerName;
}

//GET PROBLEM BASED ON OPERATION
    public void getProblem(){
    switch(operation){

        case 1:
            System.out.println(randomNum1 + "+" + randomNum2 + "= ?\n");
            correctAnswer = randomNum1 + randomNum2;
            break;

        case 2:
            System.out.println(randomNum1 + "-" + randomNum2 + "= ?\n");
            correctAnswer = randomNum1-randomNum2;
            break;
        case 3:
            System.out.println(randomNum1 + "*" + randomNum2 + "= ?\n");
            correctAnswer = randomNum1*randomNum2;
            break;
        case 4:
            System.out.println(randomNum1 + "/" + randomNum2 + "= ?\n");
            correctAnswer = randomNum1/randomNum2;
            correctRemainder = randomNum1%randomNum2;
            break;
    }

        System.out.print("Answer: ");
        userAnswer = input.nextInt();
        if(operation == 4){
        System.out.print("Remainder: ");
        userRemainder = input.nextInt();
        }
        return 0;

    }

//PICK DIFFICULTY USING DIALOG
public void pickDifficulty(){
int choice = 0;
System.out.println("1 - Child's Play\n2 - No Sweat\n3 - Bitter\n4 - Cold-blooded\n5 - Brutal\n6 - Genius");
choice = input.nextInt();
}

//PICK OPERATIONS
public void pickOperation(){
int operation = 0;

System.out.println("1 - Addition\n2 - Subtraction\n3 - Multiplication\n4 - Division ");
operation = input.nextInt();

}

//GET NUMBER RANGE BASED ON DIFFICULTY
public int numberRange(){
int range = 0;

switch(choice){

case 1:
range = 100;
break;

case 2:
range = 1000;
break;

case 3:
range = 10000;
break;

case 4:
range = 100000;
break;

case 5:
range = 1000000;
break;

case 6:
range = 10000000;
break;
}
return range;
}

//GET CORRECT RANDOM RESPONSE USING CASE SWITCH BASED ON GETRANDOM METHOD
public void correctResponse(){
String responseCorrect = "";

switch (getRandom(5)){

        case 1:
        responseCorrect = "Correct. Keep up the good work!";
        break;

        case 2:
        responseCorrect = "Correct. Keep aiming higher!";
        break;

        case 3:
        responseCorrect = "Correct. Well done!";
        break;

        case 4:
        responseCorrect = "Correct. Nice work!";
        break;

        case 5:
        responseCorrect = "Correct. We're almost there!";
        break;
        }

        System.out.println(responseCorrect);
        correctAnswers += 1;
}

//GET WRONG RANDOM RESPONSE USING CASE SWITCH BASED ON GETRANDOM METHOD
public String wrongResponse(){
String responseWrong = "";
switch (getRandom(5)){

        case 1:
        responseWrong = "Wrong. Don't give up!";
        break;

        case 2:
        responseWrong = "Wrong. You can do it!";
        break;

        case 3:
        responseWrong = "Wrong. Try again puny human!";
        break;

        case 4:
        responseWrong = "Wrong. You must be really weak at math!";
        break;

        case 5:
        responseWrong = "Wrong. I pity you!";
        break;
        }

        System.out.println(responseWrong);
        System.out.println("The correct answer is:" + correctAnswer);
        if(operation == 4)
        System.out.println("Correct Remainder: " + correctRemainder);
        return responseWrong;
    }

public void checkAnswer(){

        if(operation != 4 && userAnswer == correctAnswer){
            correctResponse();
        }
        else if(operation == 4 && userAnswer == correctAnswer && userRemainder == correctRemainder){
            correctResponse();
        }
        else{
            wrongResponse();
        }
    }

public void assignNum(){

    int temporaryNum1 = getRandom(numberRange());
    int temporaryNum2 = getRandom(numberRange());
    while(operation == 4 && temporaryNum1 == 0){
            temporaryNum1 = getRandom(numberRange());
        }
        while(operation == 4 && temporaryNum2 == 0){
            temporaryNum2 = getRandom(numberRange());
        }
        if(temporaryNum1 > temporaryNum2)
        {
            randomNum1 = temporaryNum1;
            randomNum2 = temporaryNum2;
        }
        else
        {
            randomNum1 = temporaryNum2;
            randomNum2 = temporaryNum1;
        }
    }

    public int getRandom(int range){
    randomNumber = (int)Math.floor((Math.random()*range)+1); 
    return randomNumber;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:35:22.003

您的问题没有输出的原因很简单。

```
public void pickOperation(){
    int operation = 0;

    System.out.println("1 - Addition\n2 - Subtraction\n3 - Multiplication\n4 - Division ");
    operation = input.nextInt();

 } 
```

您正在创建一个局部变量 ，`operation`并将输入值分配给它。这意味着`operation`永远不会设置字段 , 因此当涉及到`switch`您方法中的语句时`getProblem`，它不会输出任何内容，因为它与 switch 语句不匹配。

要解决此问题，只需删除`int operation = 0;`声明。

* * *

**编辑**

刚刚注意到您的方法存在同样的问题`pickDifficulty`。我强烈建议您查看[有关 Java 范围的本教程](http://www.techrepublic.com/article/intro-to-oop-java-scope-rules/5035301)。

**你的问题的解释**

好的。所以让我们看看你的代码：

```
public void pickOperation(){

    int operation = 0;
    // Declare an int, called 'operation'.
    System.out.println("1 - Addition\n2 - Subtraction\n3 - Multiplication\n4 - Division ");
    // Set the newly declared value to an int from the keyboard.
    operation = input.nextInt();
 } 
```

一旦这个方法完成，里面的值`operation`就会被销毁。它没有留在你的领域的原因`int operation`是因为你声明了一个更局部的`operation`变量。通过删除`int operation = 0;`此方法开头的 ，您可以强制 JVM 查找`operation`在您的类中命名的下一个可用变量，该变量位于字段中。这就是为什么当您删除第一个断言语句时，您的值 for`operation`将继续存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:34:30.790

问题是：`int operation = 0;`您需要在**Main中创建的****操作**变量中获取操作的值

 **尝试这个 ：

```
import java.util.Random;
import java.util.*;
import java.util.Scanner;
import javax.swing.JOptionPane;
import java.lang.Math;

public class Main {

    Scanner input = new Scanner(System.in);
    int correctAnswers;
    int randomNum1;
    int randomNum2;
    int choice;
    int corrrectAnswers, wrongAnswers;
    String playerName = "";
    int operation;
    int userAnswer;
    int correctAnswer = 0;
    int userRemainder, correctRemainder;
    int x = 0;
    int temporaryNum1, temporaryNum2;
    int range;
    int randomNumber;

    public static void main(String args[]) {
        Main lab = new Main();
        lab.init();
    }

    public void init() {

        getName();
        pickDifficulty();
        pickOperation();
        for (int x = 0; x < 10; x++) {
            System.out.println("\t\t\t~~~~~~~PROBLEM NUMBER" + (x + 1) + "~~~~~~~~");
            assignNum();
            getProblem();
            getAnswers();
            checkAnswer();

        }
    }

//GET PLAYER NAME USING PANE
    public static String getName() {
        String playerName;

        playerName = JOptionPane.showInputDialog(null, "Welcome!\nEnter your name and press OK.", "Math Is Super Fun!", JOptionPane.QUESTION_MESSAGE);
        System.out.println("Do your best," + playerName + "!");
        return playerName;
    }

//GET PROBLEM BASED ON OPERATION
    public void getProblem() {
        switch (operation) {
            case 1:            
                System.out.println(randomNum1 + "+" + randomNum2 + "= ?\n");
                correctAnswer = randomNum1 + randomNum2;
                break;

            case 2:
                System.out.println(randomNum1 + "-" + randomNum2 + "= ?\n");
                correctAnswer = randomNum1 - randomNum2;
                break;
            case 3:
                System.out.println(randomNum1 + "*" + randomNum2 + "= ?\n");
                correctAnswer = randomNum1 * randomNum2;
                break;
            case 4:
                System.out.println(randomNum1 + "/" + randomNum2 + "= ?\n");
                correctAnswer = randomNum1 / randomNum2;
                correctRemainder = randomNum1 % randomNum2;
                break;

        } 

        System.out.print("Answer: ");
        userAnswer = input.nextInt();
        if (operation == 4) {
            System.out.print("Remainder: ");
            userRemainder = input.nextInt();
        }
        //  return 0;

    }

//PICK DIFFICULTY USING DIALOG
    public void pickDifficulty() {
        System.out.println("1 - Child's Play\n2 - No Sweat\n3 - Bitter\n4 - Cold-blooded\n5 - Brutal\n6 - Genius");
        choice = input.nextInt();
    }

//PICK OPERATIONS
    public void pickOperation() {
        System.out.println("1 - Addition\n2 - Subtraction\n3 - Multiplication\n4 - Division ");
        operation = input.nextInt();

    }

//GET NUMBER RANGE BASED ON DIFFICULTY
    public int numberRange() {
        int range = 0;

        switch (choice) {

            case 1:
                range = 100;
                break;

            case 2:
                range = 1000;
                break;

            case 3:
                range = 10000;
                break;

            case 4:
                range = 100000;
                break;

            case 5:
                range = 1000000;
                break;

            case 6:
                range = 10000000;
                break;
        }
        return range;
    }

//GET CORRECT RANDOM RESPONSE USING CASE SWITCH BASED ON GETRANDOM METHOD
    public void correctResponse() {
        String responseCorrect = "";

        switch (getRandom(5)) {

            case 1:
                responseCorrect = "Correct. Keep up the good work!";
                break;

            case 2:
                responseCorrect = "Correct. Keep aiming higher!";
                break;

            case 3:
                responseCorrect = "Correct. Well done!";
                break;

            case 4:
                responseCorrect = "Correct. Nice work!";
                break;

            case 5:
                responseCorrect = "Correct. We're almost there!";
                break;
        }

        System.out.println(responseCorrect);
        correctAnswers += 1;
    }

//GET WRONG RANDOM RESPONSE USING CASE SWITCH BASED ON GETRANDOM METHOD
    public String wrongResponse() {
        String responseWrong = "";
        switch (getRandom(5)) {

            case 1:
                responseWrong = "Wrong. Don't give up!";
                break;

            case 2:
                responseWrong = "Wrong. You can do it!";
                break;

            case 3:
                responseWrong = "Wrong. Try again puny human!";
                break;

            case 4:
                responseWrong = "Wrong. You must be really weak at math!";
                break;

            case 5:
                responseWrong = "Wrong. I pity you!";
                break;
        }

        System.out.println(responseWrong);
        System.out.println("The correct answer is:" + correctAnswer);
        if (operation == 4) {
            System.out.println("Correct Remainder: " + correctRemainder);
        }
        return responseWrong;
    }

    public void checkAnswer() {

        if (operation != 4 && userAnswer == correctAnswer) {
            correctResponse();
        } else if (operation == 4 && userAnswer == correctAnswer && userRemainder == correctRemainder) {
            correctResponse();
        } else {
            wrongResponse();
        }
    }

    public void assignNum() {

        int temporaryNum1 = getRandom(numberRange());
        int temporaryNum2 = getRandom(numberRange());
        while (operation == 4 && temporaryNum1 == 0) {
            temporaryNum1 = getRandom(numberRange());
        }
        while (operation == 4 && temporaryNum2 == 0) {
            temporaryNum2 = getRandom(numberRange());
        }
        if (temporaryNum1 > temporaryNum2) {
            randomNum1 = temporaryNum1;
            randomNum2 = temporaryNum2;
        } else {
            randomNum1 = temporaryNum2;
            randomNum2 = temporaryNum1;
        }
    }

    public int getRandom(int range) {
        randomNumber = (int) Math.floor((Math.random() * range) + 1);
        return randomNumber;
    }

    private void getAnswers() {
        ////////////////Not yet implemented";
    }
} 
```**

# android - 如何为 android 获取合适的 linux 命令？

> ID：15321083
> 
> 赞同：1
> 
> 时间：2013-03-10T10:11:32.573
> 
> 标签：android, linux, command, android-wifi, wifi-direct

我需要知道 android 中用于 WIFI DIRECT 的 linux 命令是什么？[我对这个链接](http://dishingtech.blogspot.com/2012/01/realtek-wi-fi-direct-programming-guide.html)上的这些命令感到困惑。

# javascript - 在 contextmenu 事件之后未注册 Keyup 事件

> ID：15321086
> 
> 赞同：2
> 
> 时间：2013-03-10T10:11:40.747
> 
> 标签：javascript, jquery, contextmenu, keydown, keyup

我正在尝试以下代码。应该在按下键`sh`时将输入的属性更改为1 `shift`，并在释放时恢复为0

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
 $(document).on("keyup","body",function(e) {
   if (e.which == 16) {
     $("input").attr("sh","0");
   }
 });

$(document).on("keydown","body",function(e) {
  if (e.which == 16) {
     $("input").attr("sh","1");
   }
 });
});
</script>
</head>
<body>
<input type = 'text' sh = '0'/>
<p>Just checking</p>
</body>
</html> 
```

它工作正常，除非执行此事件序列。在输入未聚焦时按 shift 键。（Firebug 显示`sh`为 1，正如预期的那样）。现在仍然按下键，专注于输入。现在右键单击输入。弹出上下文菜单。现在，如果您释放该`shift`键（让上下文菜单保留），Firebug 显示它`sh`仍然是 1。您在上下文菜单外部单击以使其运行，或者甚至单击将`paste`剪贴板文本粘贴到输入中的选项，仍然`sh`保持 1。如果您再次按下并释放`shift`，才再次`sh`变为0。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T14:33:54.377

以下内容对您有帮助吗？我不确定我是否正确模拟了您的场景，但似乎对我有用。我在 Chrome 中进行了测试。

$(文档).ready(函数 () {

```
$(document).keyup(function (e) {
    if (e.which == 16) {
        $("input").attr("sh", "0");
        console.log($("input").attr("sh"));
    }
});

$(document).keydown(function (e) {
    if (e.which == 16) {
        $("input").attr("sh", "1");
        console.log($("input").attr("sh"));
    }
});

//Works... (holding shift will raise keydown as much as I hold the key...)
//$(document).keyup(function (e) {
//    if (e.keyCode == 16) {
//        console.log("Shift was released...");
//    }
//});

//$(document).keydown(function (e) {
//    if (e.keyCode == 16) {
//        console.log("Shift was pressed down...");
//    }
//}); 
```

});

# jquery - jQuery Validate 插件也适用于未来的表单

> ID：15321089
> 
> 赞同：1
> 
> 时间：2013-03-10T10:11:51.917
> 
> 标签：jquery, ajax, jquery-validate, jquery-on

我有这个 html

```
<form class="validate"><!-- various inputs here --></form> 
```

而这个js

```
$("form.validate").validate({
  errorPlacement: function(error, element) {
    error.appendTo(element.closest("div.error_box"));
  },
  errorElement: "div",
  errorClass: "form_error"
}); 
```

然后假设，在某个事件（即单击按钮）之后，我加载了一个新表单（通过 ajax），就像上面那样。或者，我完全刷新了那部分代码，所以我的表单是全新的，我的验证丢失了。

我正在尝试对其附加/重新附加验证，而不是在 ajax 调用的成功回调上重新调用 validate() 。

有点像“旧”的 jquery live 方法；

我可以[`.on`](http://api.jquery.com/on/)以某种方式使用吗？如果“on”方法可以将“事件”绑定到新元素，为什么我们不能应用整个验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:31:58.997

**根据评论编辑并编辑 OP**：

> “在稍后出现的元素（即 **新表单）上附加 jquery 验证的最聪明的方法是什么”**

如果您正在谈论创建/加载一个全新的表单，那么 AFAIK，这是唯一的方法...`.validate()`在您加载/创建新表单后立即调用...

```
$('#my_NEW_form').validate({
    // your options
}); 
```

如果您的所有表单共享相同的选项，您还可以使用该`setDefaults`方法一次以避免一遍又一遍地声明它们......

```
$.validator.setDefaults({ 
    // your repeated options
}); 
```

请参阅： [http ://docs.jquery.com/Plugins/Validation/Validator/setDefaults#defaults](http://docs.jquery.com/Plugins/Validation/Validator/setDefaults#defaults)

* * *

**编辑2：**

> “我可以`.on`以某种方式使用吗？如果方法“on”可以将“事件”绑定到新元素，为什么我们不能应用整个验证？

因为它用于绑定`events`，而不是插件，并且... `.validate()`不是事件。 [jQuery`.on()`](http://api.jquery.com/on/)用于自动将 a 绑定`function`到a，`event`因为 new`element`是动态创建的。

同样，您从未解释过问题的目的……您为什么要这样做？保存代码？

回到我们开始的地方......简单地`$('#newform').validate({/*options*/})`在你的`ajax` `success`回调函数中调用与你必须放在其他任何地方的代码量完全相同。

* * *

原始答案如下。我将它留在原处是因为一些关于`.validate()`初始化的一般信息仍然适用。

* * *

我假设您的问题基本上是*“如何将规则应用于动态添加的字段输入？”*

> “在稍后出现的元素上附加 jquery 验证的最聪明的方法是什么”

通过使用插件的内置`rules('add')`方法动态应用规则。

> “有比在每个 AJAX 调用的 .success() 处理程序中再次调用 jquery validate 更好的方法吗？”

你实际上不应该再打电话`.validate()`。一次`.validate()`调用一次是为了初始化表单上的插件，再调用一次，**不会**改变规则。有一种方法。

在添加新字段元素的任何`ajax` `success`回调函数中，使用[内置`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)。

```
$('#yourfield').rules('add', {
    required: true,
    // other rules,
    messages: { // optional
        required:  "your optional custom message"
    }
}); 
```

`.each()`如果您需要一次将规则应用于多个字段，请使用 jQuery ....

**演示：http: [//jsfiddle.net/ucYkY/](http://jsfiddle.net/ucYkY/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:16:17.597

我建议使用[Parsley.js](http://parsleyjs.org/)，它使用 html5 数据属性，一切都由插件处理。

您所做的就是编写 html 并根据需要添加数据属性。非常声明性且不涉及 Javascript，除非您需要自定义验证功能

只要您的动态输入字段具有正确的数据属性，parsley 就会找到它们

# android - 在 Facebook 上分享带有图像图标的 Android 应用

> ID：15321090
> 
> 赞同：1
> 
> 时间：2013-03-10T10:11:55.687
> 
> 标签：android, facebook, image, icons

我放了一个按钮来在 Facebook 上分享我的 Android 应用程序，所以我编写了以下代码

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
// add the app link
intent.putExtra(Intent.EXTRA_TEXT, "http://play.google.com/store/apps/details?  id=com.phonelight.realparrot");
startActivity(Intent.createChooser(intent, "Share with Facebook")); 
```

分享后，我打开我的 Facebook 帐户，看到以下内容：

![图片](../Images/49fe4d09c94577e4a94d87cedd3a0acb.png)

如您所见，它应该是右侧正方形中的图像。我想知道如何放置该图像，我正在考虑放置我的图标应用程序

就像您分享 youtube 链接一样，该图像将是电影的第一张照片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T08:40:41.980

更改`intent.setType("text/plain");` 为`intent.setType("image/*");` 然后添加`intent.putExtra(Intent.EXTRA_STREAM, myImageContentUri);`

# php - MySQL中如何确保正确的基于日期和时间的排序

> ID：15321093
> 
> 赞同：0
> 
> 时间：2013-03-10T10:12:05.200
> 
> 标签：php, mysql, datetime

我现在很困惑。我在 mysql 数据库中有一个评论表。在评论表中有一个字段comment_posted_time（类型DATETIME），我像这样对所有评论进行排序

```
$query = "SELECT * FROM comments ORDER BY comment_posted_time DESC"; 
```

现在，这可能会产生错误的结果。我给你一个例子。假设有两个用户坐在电脑前，一个在印度，另一个在美国。假设印度时间比美国提前 10 小时。首先来自印度的用户发表评论，其当前本地时间存储在comment_posted_time（类型DATETIME）中。1 小时后，来自美国的用户发表评论，其当前本地时间也存储在 comment_posted_time（类型 DATETIME）中。现在，在数据库中，美国用户后来发表的评论将不计入最新评论，排序将不正确。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:23:21.470

你的用户在哪里没有区别，你的php和mysql在一个服务器上，所以你不能有时间问题，你可以通过他的时区显示每个用户的时间，用php转换它，但不要更改mysql默认值每个用户的时区。设计您的`comments`表并设置为`comment_posted_time`默认值`NOW()`，并且不要在插入查询中使用此字段。因此，该字段中的所有记录都将保存在同一时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:14:40.630

如何获得日期`comment_posted_time`？通常这将是 MySQL 服务器上的当前日期。如果您从客户端计算机获取日期时间（我不推荐），您可以获取 UTC 日期/时间，然后在显示时将其转换回本地时间。

要从 MySQL 服务器存储当前时间，您可以执行以下操作：

```
update comments set comment_posted_time = NOW() where id=... 
```

这不会因客户而异...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:17:35.357

您可以将日期转换为其 UNIX_TIMESTAMP，然后按此排序。

```
$query = "SELECT * FROM comments ORDER BY UNIX_TIMESTAMP(comment_posted_time) DESC"; 
```

您可以阅读有关[UNIX_TIMESTAMP()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)文档的更多信息。

**编辑**：

您不应该存储相对于不同时区的 comment_posted_time。所有时间都应该与一个时区相关，例如 GMT，或者运行 php.ini 的机器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:17:46.367

因此，如果您遇到问题，即您的用户位于不同的时区，您应该始终计算一个给定时区的时间点，然后再将其持久化（通常您采用主服务器时区，或​​默认为 UTC）。使用这种方法，您可以同时做到：按时间点排序并向用户显示计算到他们时区的时间点。

# c# - TCP server and client C# Best Practice

> ID：15321094
> 
> 赞同：1
> 
> 时间：2013-03-10T10:12:05.250
> 
> 标签：c#, tcp, tcpclient, tcpserver

I'm writing a TCP client and server app. The Server gets a request and opens a Socket per client in a separate thread. the client might register for event and the server should send the events to the client once the occur. My question is, it is a good practice to save the socket and send the events on the same open socket of the request. i.e. what if no messages are sent will the socket close after the some time out? is there need for keepAlives? are there any other scenarios which will cause a disconnect while the client sides still are connected. what is the overhead of creating a new socket for each event - each message sent by the server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:37:30.807

You can make alive connections and you don't need to use alive packets between server and client for TCP connections. If connection is dropped, both side will.

If I understand right, you can easily check if the connection is dropped in packet recieving function. Just import a feature that reconnects if disconnected.

But if the connection is dropped before server publishes new "event" and reconnects after that, client cannot recieve this packet.

If you pass over this problem, try this:

1.  Save your events in a list.
2.  Add a timestamp property to every event.
3.  Be sure that client can remember the timestamp value of the last event it received.
4.  Make the client to send a request that includes the timestamp value of the last event for missing events after reconnection.
5.  If server receives this request, make it to send events which timestamps are greater than LastTimeStamp argument in the request packet.

# python - python http/udp bittorrent 跟踪器抓取库

> ID：15321098
> 
> 赞同：9
> 
> 时间：2013-03-10T10:12:21.917
> 
> 标签：python, bittorrent, tracker, libtorrent

我有一个 torrent info_hashes 列表。对于每个 info_hash，我都有一个与该 info_hash 对应的跟踪器列表。

我想做的是抓取列表中的每个跟踪器以获取播种机/吸血机/完成计数。但是，我不想自己写这个，因为我确信这段代码已经在其他地方实现了

有谁知道可以抓取 http:// 和 udp:// 跟踪器的 python 库？

我一直在这个项目的其他部分使用 libtorrent，但是它只能从有效的 torrent_handle 中抓取跟踪器（而且我不想为了抓取跟踪器而将这些 info_hashes 添加到 libtorrent 会话中，因为它将开始下载我不想要的文件）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T03:56:14.627

我也不想使用 libtorrent，因为它效率很低 - 我希望能够查询一个跟踪器以获取多个 info_hashes 而不是一次一个。

我最终编写了自己的 python HTTP/UDP 跟踪器抓取代码，请参见此处：[https](https://github.com/erindru/m2t/blob/master/m2t/scraper.py) ://github.com/erindru/m2t/blob/master/m2t/scraper.py （欢迎改进！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:56:46.803

这不是直接回答您的问题，而是建议您如何使用 libtorrent。

如果您在暂停的、非自动管理的状态下添加信息哈希（由[add_torrent_params](http://www.rasterbar.com/products/libtorrent/manual.html#async-add-torrent-add-torrent)中的标志控制）。在这种情况下，libtorrent 不会开始下载它。

请记住，libtorrent（尚）不支持抓取 DHT。

# objective-c - 尝试在托管对象中对 NSSET 进行 NSLOG 时出现 EXC_BAD_ACCESS

> ID：15321107
> 
> 赞同：1
> 
> 时间：2013-03-10T10:12:55.140
> 
> 标签：objective-c, cocoa, nsstring

我有一个简单的核心数据对象，每当我在 Xcode 中`EXC_BAD_ACCESS`尝试它的内容时，它都会给我一个。`NSLog`

托管对象如下所示：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class ChatFriend, ChatMessage;

@interface ChatThread : NSManagedObject

@property (nonatomic, retain) NSString * threadId;
@property (nonatomic, retain) NSDate * timestamp;
@property (nonatomic, retain) NSSet *friends;
@property (nonatomic, retain) NSSet *messages;
@end

@interface ChatThread (CoreDataGeneratedAccessors)

- (void)addFriendsObject:(ChatFriend *)value;
- (void)removeFriendsObject:(ChatFriend *)value;
- (void)addFriends:(NSSet *)values;
- (void)removeFriends:(NSSet *)values;

- (void)addMessagesObject:(ChatMessage *)value;
- (void)removeMessagesObject:(ChatMessage *)value;
- (void)addMessages:(NSSet *)values;
- (void)removeMessages:(NSSet *)values;

@end 
```

这是`.m`文件：

```
#import "ChatThread.h"
#import "ChatFriend.h"
#import "ChatMessage.h"

@implementation ChatThread

@dynamic threadId;
@dynamic timestamp;
@dynamic friends;
@dynamic messages;

- (NSString*) description
{

    /* This can print out the contents of self.messages correctly
    for(ChatMessage *message in self.messages)
    {
        Log(@"ChatMessage - %@", message);
    }
    */

    // using %@ to print out self.messages directly, will fail:
    return [NSString stringWithFormat:@"ChatThread - threadId:%@, messages count:%d, messages:%@", self.threadId, self.messages.count, self.messages];
}

@end 
```

我注意到，如果我尝试打印出该`stringWithFormat`行中 self.messages 的内容，`EXC_BAD_ACCESS`将会发生。如果我删除 self.messages，只打印出`self.messages.count`，它可以工作。如果我手动执行 for 循环以打印出 messages 中的每条消息`NSSet`，它就可以工作并且证明那里有一些值。

那么，为什么直接打印 self.messages 会触发`EXC_BAD_ACCESS`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:24:14.627

`description`在 NSManagedObject中覆盖时，文档非常明确：

> 您可以安全地在故障上调用以下方法而不会触发它：isEqual:、hash、superclass、class、self、isProxy、isKindOfClass:、isMemberOfClass:、conformsToProtocol:、responsToSelector:、description、managedObjectContext、entity、objectID、isInserted 、isUpdated、isDeleted、faultingState 和 isFault。由于 isEqual 和 hash 不会导致触发故障，因此托管对象通常可以放置在集合中而不会触发故障。但是请注意，在集合对象上调用键值编码方法可能会反过来导致在托管对象上调用 valueForKey:，这将引发错误。
> 
> 虽然描述方法不会导致故障触发，但如果您实现访问对象持久属性的自定义描述方法，这将导致故障触发。强烈建议您不要以这种方式覆盖描述。

您似乎违反了最后一段中的警告。使您的 NSManagedObjectContext 不将对象作为故障返回，或用于`valueForKey:`显式触发故障并在尝试访问它的描述之前加载结果属性。自行触发的故障对象会导致未定义的行为。

# c# - Excel转PDF，无需办公

> ID：15321113
> 
> 赞同：5
> 
> 时间：2013-03-10T10:13:35.543
> 
> 标签：c#, .net, winforms, pdf, xlsx

我需要在我正在处理的 Windows 应用程序中生成 PDF 报告，我通过将 .xlsx 文件导出为 pdf 来完成此操作。我目前正在为此使用互操作，但是：

*   我需要这样做而不需要用户购买软件，所以没有microsoft office excel。
*   我也不能使用任何重度依赖项（例如 open/libre office）。
*   该应用程序位于 .NET winforms 中并且是本地的（不依赖于 Internet 连接）。

我尝试过的事情：

*   我已经尝试过 iTextSharp 但这对于溢出列之类的事情变得非常复杂。
*   尝试关闭XML，但无法转换为PDF。
*   （如前所述）尝试互操作但找不到使其独立于办公室的方法。

帮助将不胜感激，在此先感谢您:)

## 编辑：

**iTextSharp**

我会使用它，除非我需要导出一个具有可变列数（最多 30 列）的大 DataTable，如果有很多列，那么处理该列溢出会变得非常复杂，这在互操作中很容易。

**假设**

似乎太贵了，因为我在一家目前资源非常有限的小公司工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-19T12:38:56.750

另一个不错的选择是使用 Spire.XLS。虽然它会在顶部显示评估警告，但您可以使用 FreeSpire.XLS 摆脱它。下面是它的链接 [https://www.nuget.org/packages/FreeSpire.XLS/](https://www.nuget.org/packages/FreeSpire.XLS/)

下面是取自的代码片段

[https://forums.asp.net/t/2087645.aspx?Saving+xlsx+to+pdf](https://forums.asp.net/t/2087645.aspx?Saving+xlsx+to+pdf)

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Text; 
using Spire.Xls; 

namespace ConvertExcelToPdf 
{ 
    class Program 
    { 
        static void Main(string[] args) 
        { 

            Workbook workbook = new Workbook(); 
            workbook.LoadFromFile(@"..\..\sample2.xlsx"); 
            workbook.ConverterSetting.SheetFitToPage = true; 
            workbook.SaveToFile(@"..\..\sample.pdf", FileFormat.PDF); 
            System.Diagnostics.Process.Start(@"..\..\sample.pdf"); 
        } 
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T03:30:28.810

不要使用 Excel 来布局您的报告，而是使用 HTML。它更加灵活，几乎是为最终用户布置数据的最简单工具。然后查找众多 HTML 到 PDF 解决方案之一（wkhtmltopdf、安装打印到 pdf 驱动程序等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T16:42:43.677

使用 OpenOffice 和 C# 从 excel 生成 PDF 的替代解决方案：

[使用 C# 生成 PDF](http://www.codeproject.com/Articles/28050/Generate-PDF-Using-C)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-08T08:08:04.380

我已经为此苦苦挣扎了几天。我不能使用任何付费图书馆，所以我想出了这个解决方案。它要求在用户电脑上安装 PDF 打印机，但使用“Microsoft to PDF”和许多其他可用的解决方案，这应该不是问题。

```
FileInfo templateFile = new FileInfo("template.xlsx");

System.Windows.Forms.PrintDialog printDialog = new System.Windows.Forms.PrintDialog();
// Display the dialog. This returns true if the user presses the Print button.
if (printDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    Process print = new Process();

    print.StartInfo.FileName = templateFile.FullName;

    print.StartInfo.Verb = "PrintTo";

    print.StartInfo.Arguments = printDialog.PrinterSettings.PrinterName;

    print.StartInfo.UseShellExecute = true;

    print.StartInfo.CreateNoWindow = true;

    print.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

    print.Start();
} 
```

# apache - 在某些主机 755 是可写文件夹，而在某些不是？为了使 755 可写，应该进行哪些更改

> ID：15321114
> 
> 赞同：1
> 
> 时间：2013-03-10T10:14:16.313
> 
> 标签：apache, security, shared-hosting, vps, chmod

在某些主机 755 是可写文件夹，而在某些不是？为了使 755 可写，应该进行哪些更改。

是向其提供文件的用户问题吗？

对于实例，如果将文件提供给用户：matt 并使文件可被 apache 写入，它是否需要由 apache 拥有？或类似的东西？

我有自己的小型 vps，我看到我必须 chmod 777，但在我的共享主机 cpanel 中，我不必这样做，在 755 中，文件夹是可写的。

如果我想将 755 设为可写文件夹，我该如何用我的 vps 做到这一点？我正在运行 kloxo cpanel 脚本。

请建议我如何在我的 VPS 中实现此选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:53:56.170

755 权限 (rwx rx rx) 将使文件夹仅对其所有者可写，同时允许其他用户读取和执行权限。

```
rwx r-x r-x 

Owner: rwx = (4+2+1) = 7
Group: r-x = (4+1) = 5
Other: r-x = (4+1) = 5 
```

如果您的文件夹具有 755 权限并且需要 Apache 用户可写，则应将其所有者更改为 Apache 用户。如果您可以通过 ssh 访问您的 VPS，您可以这样做：

```
chmod 755 my-folder/

chown apache my-folder/ 
```

如果您想要更复杂的权限设置，也可以使用`chmod +a`or （如果您的系统支持 ACL），例如允许 Apache 用户和*matt*用户写入，即使他们在不同的用户组中。`setfacl`

# php - 如何在 Zend Framework 2 中打开 PHP 错误报告？

> ID：15321115
> 
> 赞同：9
> 
> 时间：2013-03-10T10:14:25.373
> 
> 标签：php, frameworks, zend-framework2

每次我在 Zend Framework 2 中收到错误时，我只会显示 500 Internal Server Error 并且必须搜索 Zend Server 错误日志。我试过把它放到我的 config/autoload/local.php 文件中，但它不起作用：

```
return array(
    'phpSettings' => array(
        'display_startup_errors' => true,
        'display_errors' => true,
        ),
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T10:34:17.657

zf2 (afaik) 中没有对它的本机支持。您要么必须在 php.ini 本身中设置它们，要么在 index.php 中设置它们

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', true); 
```

如果您真的希望能够将它们作为配置设置提供，您可以保留您所拥有的并在模块引导程序中执行此操作，从配置中获取它们，然后在每个键值对上调用 ini_set()

```
public function onBootstrap(EventInterface $e) {
    $app = $e->getApplication();
    $sm = $app->getServiceManager();
    $config = $sm->get('Config');
    $phpSettings = isset($config['phpSettings']) ? $config['phpSettings'] : array();
    if(!empty($phpSettings)) {
        foreach($phpSettings as $key => $value) {
            ini_set($key, $value);
        }
    }
} 
```

编辑：正如@a​​kond 在评论中正确指出的那样，您可以添加 ini_set 行，`local.php`这是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T22:45:13.547

要在 ZF2 应用程序上轻松配置 phpSettings，您应该考虑使用[DluPhpSettings](https://bitbucket.org/dlu/dluphpsettings/overview)。

使用此模块，您可以为您拥有的每个环境配置设置：

```
/* Local application configuration in /config/autoload/phpsettings.local.php */
<?php
return array(
    'phpSettings'   => array(
        'display_startup_errors'        => false,
        'display_errors'                => false,
        'max_execution_time'            => 60,
        'date.timezone'                 => 'Europe/Prague',
        'mbstring.internal_encoding'    => 'UTF-8',
    ),
); 
```

查看[此博客文章](http://www.zfdaily.com/2012/04/configuring-php-settings-in-zf2/)以获取更多信息！

# python - a=list().append("hello") 与 a=list(); a.append("hello") 在 python 中？

> ID：15321119
> 
> 赞同：3
> 
> 时间：2013-03-10T10:14:53.857
> 
> 标签：python, list

我有

```
try:
    a = list().append('hello') 
```

但是`a`是`NoneType`

```
try:
    b = list()
    b.append('hello') 
```

并且`b`是一种`list`类型

我认为`list()`返回一个列表对象，`list().append('hello')`并将使用返回列表进行追加，但为什么是 的值`a` `None`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T10:17:25.200

`list()`确实返回了一个*空*列表`[]`（它反而返回。`append`*`None`*

 *例如：

```
>>> lst = []
>>> lst.append('hello')  # appends 'hello' to the list
>>> lst
['hello']
>>> result = lst.append('world')  # append method returns None
>>> result  # nothing is displayed
>>> print result
None
>>> lst  # the list contains 'world' as well now
['hello', 'world'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:19:17.143

```
a = list().append('hello') 
```

上面的行，将创建一个新列表，然后调用该`append()`方法，并将返回码存储`append()`到变量`a`中。并且由于 value 是`None`，它只是意味着该`append()`方法没有返回值。

要确认这一点，你可以试试这个：

```
>>> a = list()
>>> result = a.append('hello')
>>> print a
['hello']
>>> print result
None 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T10:54:55.953

你已经得到了你的问题的答案，但我只想指出，做你想做的事情的最好方法是两者都不是。它应该是：

```
a = [ 'hello' ] 
```*

# postgresql - Java Servlets + JDBC + Postgres：它们是如何交互的？

> ID：15321122
> 
> 赞同：0
> 
> 时间：2013-03-10T10:15:01.943
> 
> 标签：postgresql, servlets, jdbc

我很难理解如何正确使用 servlet

我已经建立了一个 postgres 数据库，并为它下载了一个 JDBC 驱动程序。

我想要的是我的网页发布到 servlet，而 servlet 从数据库中获取信息。我了解如何编写所有代码（例如为驱动程序添加库、打开连接、执行查询），但我认为我缺乏如何设置文件结构的知识。

我在 pgAdmin 上运行了 postgresql 数据库。我是否还需要运行服务器才能使 servlet 也能正常工作？我不能只制作一个映射到 servlet 的 web.xml 文件，然后打开网页以使用该网站吗？如果我通过运行服务器（glassfish）的 IDE 运行项目，一切正常。如果我关闭 IDE 并再次在浏览器上打开网页，则每当我提交到 servlet 时都会收到 404。

有人可以给我一些关于一切应该如何交互的大图的指导（请提供有关服务器的详细信息）。我一直在网上搜索，但没有找到任何可以很好地解释大局的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:39:55.090

Java Web 应用程序是一组遵循良好定义结构的文件，可以打包在一个war 文件中。

此 Web 应用程序被部署到服务器（也称为容器）中，该服务器了解文件结构，侦听 HTTP 请求，并在收到请求时调用相应已部署 Web 应用程序的相应 servlet。

当然，如果你关闭了服务器，就不会再监听 HTTP 请求了，所以你不会得到任何响应。

您可以阅读[Java EE 教程](http://docs.oracle.com/javaee/6/tutorial/doc/geysj.html)以获得更多解释。

# javascript - Javascript/jQuery UI 插件最佳实践

> ID：15321126
> 
> 赞同：0
> 
> 时间：2013-03-10T10:15:26.843
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个 HTML 页面，它使用 jQuery UI 进行 Portlets/Resizable

我的问题是编写 JS 代码的最佳实践是什么？

1.  我在我的 HTML 中使用脚本参考

> ```
> <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js "></script>
> <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
> ```

这是更好的方法还是应该在我自己的 JS 文件夹中包含 2 个 JS 并引用它们？

2\. 我在哪里为 Portlets/Resizable 编写 jQuery UI 配置代码？在 HTML 文件本身中编写此代码是否更好，或者我应该将其编写在单独的 JS 文件中（比如 jquery-ui-config.js）我有以下代码

```
$(function() {
$( ".column" ).sortable({
connectWith: ".column"
});
$( ".portlet" ).addClass( "ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" )
.find( ".portlet-header" )
.addClass( "ui-widget-header ui-corner-all" )
.prepend( "<span class='ui-icon ui-icon-minusthick'></span>")
.end()
.find( ".portlet-content" );
$( ".portlet-header .ui-icon" ).click(function() {
$( this ).toggleClass( "ui-icon-minusthick" ).toggleClass( "ui-icon-plusthick" );
$( this ).parents( ".portlet:first" ).find( ".portlet-content" ).toggle();
});

 var maxBorderCellWidth = 350;
    var minBorderCellWidth = 200;
    var resizeCenter = function () {
        var clientWidth  = $(window).innerWidth();
        var leftWidth = $( ".left" ).outerWidth(true);
        var rightWidth = $( ".right" ).outerWidth(true);
       $('.center').width(clientWidth-leftWidth-rightWidth);
    }

    $( ".left" ).resizable({
      maxWidth: maxBorderCellWidth,
      minWidth: minBorderCellWidth,
      handles: 'e',
      resize: function (event, ui){
          resizeCenter();
      }
    });
    $( ".right" ).resizable({
      maxWidth: maxBorderCellWidth,
      minWidth: minBorderCellWidth,
      handles: 'w',
      resize: function (event, ui){
          resizeCenter();  
      }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:05:15.233

1.  你的方式就是实践的标准。只需使用 Google 对您的 jQuery 文件进行 CDN，它就可以加速您的网站。你知道，谷歌在世界各地都有服务器。

2.  我认为它应该将您的 js 代码放入一个单独的文件中。因为大多数代码的选择器都是处理 HTML 类元素。一般来说，类元素是普遍使用的，所以也许这段代码不仅会执行一个 HTML 页面。所以把它分开然后你可以很容易地修改它们。

# android - 动态更改 android.support.v4.view.PagerTitleStrip 的标题

> ID：15321128
> 
> 赞同：6
> 
> 时间：2013-03-10T10:15:35.340
> 
> 标签：android, fragmentpageradapter

我目前在我的应用程序中使用 PagerTitleStrip（文档：http: [//developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)）

一切正常，我设置了这样的标题：

```
public class PageAdapter extends FragmentPagerAdapter {

    private List<Fragment> fragments;

    public PageAdapter(FragmentManager fm, List<Fragment> fragments) {
        super(fm);
        this.fragments = fragments;
    }

    @Override
    public Fragment getItem(int position) {
        return this.fragments.get(position);
    }

    @Override
    public int getCount() {
        return this.fragments.size();
    }

    String[] titles = { "1", "2", "3", "4","5" };

    @Override
    public CharSequence getPageTitle(int position) {
        return titles[position];
    }
} 
```

我现在担心的是，一旦第一个片段完成加载，我必须更改片段的标题。

我已经尝试获取 FragmentPagerAdapter 并尝试对其进行操作，但从未成功更改标题（文本）

确实有一个 getPageTitle 方法： mPagerAdapter.getPageTitle(position) 但没有 setPageTitle ...

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T10:33:18.047

如果我正确理解问题 - 您稍后会获取数据，然后想要更新标题数组并触发标题刷新。

If that's the case just trigger `PagerAdapter.notifyDataSetChanged()`; after that method is invoked Fragments will call getPageTitle method and update themselves.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-24T08:16:52.923

Kind of ugly solution but working : **iterate to the visual tree and set the text yourself**.

Also, you have to be aware that **there is a first transparent/empty item on the left**.

Here is the code (Xamarin here) to update the first title.

```
var firstHidedOneFound = false;
for (int i = 0; i < _tabstrip.ChildCount; ++i)
{
    var child = _tabstrip.GetChildAt(i) as TextView;

    if (child == null) { continue; }
    if (!firstHidedOneFound)
    {
        firstHidedOneFound = true;

        continue;
    }
    child.Text = ViewModel.MyShowPanelTitle;
    break;
} 
```

# java - 24/7 无声节目

> ID：15321129
> 
> 赞同：-1
> 
> 时间：2013-03-10T10:15:40.017
> 
> 标签：java

我的 java 桌面应用程序在每次计算机启动时运行，只要计算机处于开启状态就运行。它监视所有活动并更频繁地与数据库交互，并会通过定期查看互联网等来告诉我一些更新等等。所以我通常做的是创建线程并调用 sleep 方法。但是有什么办法可以让我在我的程序 24/7 运行时更有效地处理内存。如果我们想让程序在没有工作可做的情况下静默运行，有什么方法会非常有用吗？任何建议或建议都会有所帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:20:44.060

只分配你需要的内存，换句话说，不要保留你不需要的东西。

此外，以较低的优先级运行；尽管使用睡眠电话，但这不会给您带来太多好处。

当然，您可以，或者根据应用程序的类型，*应该*在完成工作后退出程序，只让它通过 cron、anacron 或类似服务重新启动（取决于您的操作系统）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:20:50.967

我认为您可以为您的任务使用线程池，这使一些线程保持活动状态，当您的一项任务需要一个线程时，您可以请求一个线程，这样您就需要较少的活动 trheads 运行

[Oracle 关于线程池](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html "Oracle 关于线程池")

# c# - 打开 dbf 文件时出错：外部表不是预期格式

> ID：15321135
> 
> 赞同：2
> 
> 时间：2013-03-10T10:16:33.213
> 
> 标签：c#, .net, dbf

我正在使用下面的代码导入 dbf 文件。

但我收到一个错误：

> '外部表格不是预期的格式'

```
if (ofdDBF.ShowDialog()==DialogResult.OK) 
{ 
   string connStr = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + ofdDBF.FileName.Substring(0, ofdDBF.FileName.LastIndexOf("\\")) + ";Extended Properties=dBASE IV;";     
   OleDbConnection conn = new OleDbConnection(connStr); 
   conn.Open();

   string cmd_string = "select * from " + ofdDBF.SafeFileName.Substring(0, ofdDBF.SafeFileName.IndexOf(".")); 
   MessageBox.Show(cmd_string); 
   OleDbDataAdapter da = new OleDbDataAdapter(cmd_string, conn); 
   DataSet ds = new DataSet(); 
   da.Fill(ds); 
   dgvImport.DataSource = ds.Tables[0]; 
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T21:03:22.363

同样的问题（在 64 位系统上），解决方案

下载：http: [//download.microsoft.com/download/b/f/b/bfbfa4b8-7f91-4649-8dab-9a6476360365/VFPOLEDBSetup.msi](http://download.microsoft.com/download/b/f/b/bfbfa4b8-7f91-4649-8dab-9a6476360365/VFPOLEDBSetup.msi)

```
string connString = @"Provider=vfpoledb;Data Source=C:\Directory;Collating Sequence=machine;";
        using (OleDbConnection con = new OleDbConnection(connString))
        {
            con.Open();

                OleDbCommand command = new OleDbCommand("Select * from Table.DBF", con);
                OleDbDataReader reader = command.ExecuteReader();
                ...
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:34:34.827

在处理 dBase/FoxPro 的数据源时，源通常指的是数据库名称，或者只是路径。

一旦打开，你可以做

从 YourTable 中选择 *

（查询中不需要 .dbf 文件名后缀。它将通过查看路径或连接的数据库自行解析）。

# python - 在python2.7中删除字符串中的unicode \u2026之类的字符

> ID：15321138
> 
> 赞同：41
> 
> 时间：2013-03-10T10:17:18.867
> 
> 标签：python, python-2.7, non-ascii-characters, python-unicode, unicode-escapes

我在python2.7中有一个这样的字符串，

```
 This is some \u03c0 text that has to be cleaned\u2026! it\u0027s annoying! 
```

我如何将其转换为这个，

```
This is some text that has to be cleaned! its annoying! 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-10T10:26:21.227

Python 2.x

```
>>> s
'This is some \\u03c0 text that has to be cleaned\\u2026! it\\u0027s annoying!'
>>> print(s.decode('unicode_escape').encode('ascii','ignore'))
This is some  text that has to be cleaned! it's annoying! 
```

Python 3.x

```
>>> s = 'This is some \u03c0 text that has to be cleaned\u2026! it\u0027s annoying!'
>>> s.encode('ascii', 'ignore')
b"This is some  text that has to be cleaned! it's annoying!" 
```

# jquery - 在表中循环遍历 tr 时选择第一个 td 的值 - jquery

> ID：15321146
> 
> 赞同：1
> 
> 时间：2013-03-10T10:18:00.593
> 
> 标签：jquery

祝大家好日子，

我有一个包含如下行和值的表

```
<tr id="value_12">
    <td>firstanme_1</td>
    <td>lastname_1</td>
</tr>
<tr id="value_14">
    <td>firstanme_2</td>
    <td>lastname_2</td>
</tr> 
```

我正在使用的 jquery 是（这显然是错误的）。

```
$('#table_id tr').each(function() {
    serializedData += '&' + $(this).attr('id') + '=' + $(this).attr('id')+'_'+$(:first_child).text();
}); 
```

我希望仅提取每个 tr 的第一个即名字以及 tr 属性作为 serialisedData 字符串的最后一部分（最后一个值，在分隔符 '_' 之后）。

我可能类似于 $(this).firstchild().text() .. 但它似乎不起作用。在这种情况下，有人可以帮助以正确的方式获得第一个孩子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T10:24:47.363

替换这个

```
$(:first_child).text(); 
```

和

```
$(this).find("td:first").text(); 
```

或交替

```
$(this).find("td:eq(0)").text(); 
```

这将解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:24:03.447

您对选择器的使用`:first_child`是错误的，您可以通过使用函数`children()`来获取 tr 的子节点和 ':first' 作为选择器来仅获取第一个这样的选择器来实现：

```
$('#table_id tr').each(function() {
    serializedData += '&' + $(this).attr('id') + '=' + $(this).attr('id')+'_'+$(this).children(":first").text();
            }); 
```

见jsfiddle：http: [//jsfiddle.net/2t5J2/1/](http://jsfiddle.net/2t5J2/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:24:32.663

要获得 tr 的第一个孩子，您可以这样做

```
$('#table_id tr').each(function() {
    var firstName = $("td", tr)[0].val();
    var id = $(tr).attr('id').split("_")[1];
}) 
```

这应该为您提供名称和 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:26:12.907

使用`each`方法收集数据，然后使用 jQuery`$.param`函数构造查询字符串。好处是它将为您正确编码：

```
var params = {};
$('table tr[id^="value_"]').each(function() {
    params[this.id] = $(this).find('td:first').text();
});
alert( $.param(params) );  // alerts: value_12=firstanme_1&value_14=firstanme_2 
```

[http://jsfiddle.net/EwSsu/](http://jsfiddle.net/EwSsu/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T10:33:52.180

使用 $(this).children(":first").text() 获取第一个孩子的文本。

```
serialData+='&' + $(this).attr('id') + '=' + $(this).attr('id')+'_'+$(this).children(":first").text(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-10T12:48:17.817

使用它来获取第一个 TD 的值：

```
$(this).find("td:first-child").text(); 
```

# django - 带有两个外键的模型的内联表单集的问题

> ID：15321149
> 
> 赞同：0
> 
> 时间：2013-03-10T10:18:05.030
> 
> 标签：django, django-models, django-forms

我在使用 Inlineformsets 时有点挣扎。我正在为我的学生编写一个数据库应用程序，我有两个主要课程：学生（带有姓氏、名字、电子邮件地址等）和模块（带有标题、代码、评估名称等）。然后我有第三堂课，能够保存每个学生在他/她所在的每个模块中的表现（学生和模块被定义为 unique_together）：

```
class Performance(models.Model):
    student = models.ForeignKey(Student)
    module = models.ForeignKey(Module)
    seminar_group = models.IntegerField(blank=True, null=True)
    assessment_1 = models.IntegerField(blank=True, null=True)
    assessment_2 = models.IntegerField(blank=True, null=True)
    assessment_3 = models.IntegerField(blank=True, null=True)
    exam = models.IntegerField(blank=True, null=True)
    average = models.IntegerField(blank=True, null=True) 
```

在模型中，我有一个保存平均值的功能（可以在模块类中定义评估的值，例如论文可能值 40%，考试值 60%）

```
def save_with_avg(self):
    sum = 0
    if self.assessment_1:
        value = self.assessment_1 * self.module.assessment_1_value
        sum = sum + value
    if self.assessment_2:
        value = self.assessment_2 * self.module.assessment_2_value
        sum = sum + value
    if self.exam:
        value = self.exam * self.module.exam_value
        sum = sum + value
    self.average = sum / 100
    self.save() 
```

我正在努力的是制作一个表单集来编辑模块的所有特定标记。我现在这样做的方式是在我的 forms.py 中生成一个表单类，该类具有能够设置一些参数的功能（该模块有多少评估，哪些评估应该有一个“bootstrapuneditable”小部件）。这听起来有点奇怪，但在旧版本的 Django 中，一个错误阻止了将“小部件”作为参数传递给模型表单集，如果我选择的虚拟主机（待定），我不想冒险重写这个) 不运行最新版本)。

```
def generate_mark_form(no_of_assessments, noexam=False, to_mark='all', *args, **kwargs):

    # Some stuff to come up with the variables exclude and widgets

    class MarkForm(forms.ModelForm):
        class Meta:
            model = Performance
            exclude = excludes
            widgets = use_widgets

    return MarkForm 
```

然后我使用该表单类生成一个内联表单集：

```
form = generate_mark_form(no_of_assessments, noexam, assessment_to_change)
MarkFormSet = inlineformset_factory(Module, Performance, form=form) 
```

然后我在views.py中以正常方式使用这个MarkFormSet：

```
if request.method == 'POST':
    formset = MarkFormSet(request.POST, instance=module)
    if formset.is_valid():
        instances = formset.save(commit=False)
        for instance in instances:
            instance.save_with_avg()
        return HttpResponseRedirect(module.get_absolute_url())
else:
    formset = MarkFormSet(instance=module)
return render_to_response(...) 
```

然后模板使用表格中的表单集：

```
 <form action = "{{ action_url }}", method="post">
    {% csrf_token %}

    {{ formset.management_form }}
    {% for form in formset %}
        <tr>
            <td>
                {{ form.student }}
            </td>
            {% if current_module.assessment_1_title %}
                <td>
                    {{ form.assessment_1 }}
                </td>
            {% endif %}
            {% if current_module.assessment_2_title %}
                <td>
                    {{ form.assessment_2 }}
                </td>
            {% endif %}
            {% if current_module.assessment_3_title %}
                <td>
                    {{ form.assessment_3 }}
                </td>
            {% endif %}
            {% if current_module.exam_value %}
                <td>
                    {{ form.exam }}
                </td>
            {% endif %}
            <td>
                {{ form.average.value }}
            </td>
        </td>
    {% endfor %} 
```

一切看起来都很好，除了两件事：

1.  该表单显示学生姓名（在`__unicode__`Student 类中设置），但作为下拉菜单。如果我将它们设置为不可编辑或改用 form.student.value，我只会在 HTML 中获得（无用的）id 号。如何在`__unicode__`没有下拉菜单的情况下获得函数的结果？

2.  当我点击“提交”时，我得到一个“MultiValueDictKeyError：”Key 'performance_set-0-id' not found in

对不起，很长的帖子，我一直在寻找解决方案一段时间，所以如果有人能在这里指出我的错误，那就太好了！

谢谢！

# php - codeigniter，无法从控制器页面传递视图页面上的数据

> ID：15321153
> 
> 赞同：0
> 
> 时间：2013-03-10T10:18:38.873
> 
> 标签：php, codeigniter

我是 CodeIgniter 的新手，遇到了一个我一直无法弄清楚的问题。这是我的模型类（文件名=tenant.php）：

```
<!-- language php -->

class tenant extends CI_Model {

    function getTenants() {
        $this->db->select()->from('hrs_tenants');
        $query=$this->db->get();
        return $query->result_array();
    }
} 
```

我的控制器类（文件名=tenants.php）：

```
<!-- language php -->

class tenants extends CI_Controller {
    function  index() {
        $this->load->model('tenant');
        $data['tenants']= $this->tenant->getTenants();
        echo "<pre>"; print_r($data['tenants']); echo "</pre>";
        $this->load->view('tenants', $data);
    }
} 
```

最后是我的视图文件（tenants.php）：

```
<!-- language php -->
<html>
    <head>
        <title>Tenants Listing</title>
    </head>
    <body>
    <h1>Tenants Listing</h1>
    <?php
        if(!isset($tenants)) {
    ?>
        <p>There are no Tenants to List</p>
    <?php 
        } else {
            foreach($tenants as $row){?>
                <h2><a href="<?php base_url()?>tenants/tenant<?php $row['T_ID']?>"><?php $row['T_Name']?></a></h2>
        <p>Mobile : <?php $row['T_Mobile']?></p>
    <?php
        }
    }
    ?>
    </body>
</html> 
```

现在回到问题 - 它应该显示租户名称和租户手机号码，但视图不显示它。相反，它显示静态 HTML 视图。但它是如何重复标签的。这是视图文件的 html 输出/呈现的 HTML：

```
<pre>Array
(
    [0] => Array
        (
            [T_ID] => 1
            [T_Name] => John Doe
            [T_Mobile] => 030112345678
        )

    [1] => Array
        (
            [T_ID] => 2
            [T_Name] => Haider Hassan
            [T_Mobile] => 033412345678
        )

)
</pre><html>
<head>
    <title>Tenants Listing</title>
</head>
<body>
<h1>Tenants Listing</h1>
<h2><a href="tenants/tenant"></a></h2>
    <p>Mobile : </p>
<h2><a href="tenants/tenant"></a></h2>
    <p>Mobile : </p>
</body>
</html> 
```

我的数据库连接得很好，因为我也直接在控制器文件中做了一个回显，它也在`pre`标签内的 HTML 文件中生成。

我是不是忘了添加一些东西，为什么会遇到这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:11:45.797

控制器文件：

```
class tenants extends CI_Controller {
    function  index() {
        $this->load->model('tenant');
        $data['tenants']= $this->tenant->getTenants(); //Get rid of Echo
        $this->load->view('tenants', $data);
    }
} 
```

查看文件：

```
<html>
    <head>
        <title>Tenants Listing</title>
    </head>
    <body>
    <h1>Tenants Listing</h1>
    <?php
        if(!isset($tenants)) {
        echo '<p>There are no Tenants to List</p>';
        } else {
            foreach($tenants as $row): ?>
                <h2><a href="<?= base_url() . 'tenants/tenant/' . $row['T_ID']?>"><?= $row['T_Name'] ?></a></h2>
        <p>Mobile : <?= $row['T_Mobile'] ?></p>
    <?php endforeach;
        }
    ?>
    </body>
</html> 
```

是的，做回声很酷。不是问题。但是，尽量减少关闭 php 标记的使用...尝试连接字符串而不是在每次中断后打开 php...

问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:44:44.633

我认为现在唯一的解决方案是在每个 $row 上写 echo

我现在这样做了

```
 <h2><a href="<?php echo base_url()?>tenants/tenant/<?php echo $row['T_ID']?>"><?php echo $row['T_Name']?></a></h2>
    <p>Mobile : <?php echo $row['T_Mobile']?></p> 
```

可以在任何地方写回声还是有更好的解决方案？

# javascript - 为什么单击div时选择消失？

> ID：15321157
> 
> 赞同：0
> 
> 时间：2013-03-10T10:19:01.023
> 
> 标签：javascript, jquery, google-chrome, selection, rangy

我正在使用以下代码通过更改字体来编辑 contenteditable div 中的文本。当单击作为风格化下拉菜单的 div 时，选择会在 chrome 中消失。它在 Firefox、Opera 甚至 IE 中都能正常工作！

Rangy 没有找到任何要处理的选定文本。我想知道为什么！

**注意：**使用“鼠标悬停”而不是“点击”时效果很好

```
DropDown.prototype = {
    initEvents : function() {
        var obj = this;

        obj.dt.on('click', function(event){
            $(this).toggleClass('active');
            if (savedSel) {
                rangy.removeMarkers(savedSel);
            }
            savedSel = rangy.saveSelection();
            savedSelActiveElement = document.activeElement;
            return false;
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:14:12.697

一种解决方法是使用`mousedown`事件而不是`click`事件并阻止默认行为。

```
obj.dt.mousedown(function(event){
    event.preventDefault();
    $(this).toggleClass('active');
    if (savedSel) {
        rangy.removeMarkers(savedSel);
    }
    savedSel = rangy.saveSelection();
    savedSelActiveElement = document.activeElement;
    return false;
}); 
```

演示：http: [//jsfiddle.net/NJuMK/1/](http://jsfiddle.net/NJuMK/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:11:42.390

您应该在单击发生之前保存选择数据。例如，将其保存在鼠标上方，并在用户单击时使用。

# postgis - Postgis 数据库和 Mapnik 之间的连接

> ID：15321161
> 
> 赞同：2
> 
> 时间：2013-03-10T10:19:19.017
> 
> 标签：postgis, mapnik

嗨，我正在尝试将我的 postgis 数据渲染到 Mapnik 中，但不能这样做，任何人都可以与我分享相同的 Python 文件，它解释了如何做同样的事情。

马尼什·夏尔马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T19:25:17.917

Google 是您的朋友，但这里有一个使用 mapnik 2.1 python 和 xml 样式的快速示例： 这是 python：

```
#!/usr/bin/python
import mapnik
from mapnik import Coord, Box2d

###
# Configuration
###
style = 'style.xml'
output = 'output.png'

width = 800
height = 800

bbox = Box2d(-11823891.0314,4847942.08196,-11774971.3333,4896861.78006)
print "Using mapnik version:", mapnik.mapnik_version()
map = mapnik.Map(width, height)
mapnik.load_map(map, style)

map.zoom_to_box(bbox)
mapnik.render_to_file(map, output) 
```

这是一个使用 osm 数据的简单 style.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Map>

<Map background-color="#FFF">

<Style name="roads">
  <Rule>
    <LineSymbolizer stroke="red" stroke-width="1" />
  </Rule>
</Style>

<Layer name="roads" status="on">
  <StyleName>roads</StyleName>
  <Datasource>
    <Parameter name="table">
      (select way from osm_line where highway is not null) as road
    </Parameter>
    <Parameter name="type">postgis</Parameter>
    <Parameter name="port">5432</Parameter>
    <Parameter name="user">gisuser</Parameter>
    <Parameter name="dbname">gis</Parameter>
  </Datasource>
</Layer>
</Map> 
```

# java - ManagedBean 中 h:inputText 的值为 null

> ID：15321163
> 
> 赞同：1
> 
> 时间：2013-03-10T10:19:32.233
> 
> 标签：java, jsf, jsf-2

我在 JSF 中有以下代码

```
<h:outputLabel value="Date" for="rdate" />
   <h:inputText id="rdate" autocomplete="off" 
       value="#{myMB.abstractProject.joinedDate}">
   </h:inputText> 
```

在实体类中，我声明为

```
private Date joinedDate; 

public Date getJoinedDate() {
    return joinedDate;
}

public void setJoinedDate(Date joinedDate) {
    this.joinedDate= joinedDate;
} 
```

问题是，在 ManagedBean 中，以下内容为空

```
System.out.println("date in save method "
+ abstractRequest.getJoinedDate()); 
```

这可能是什么原因？`h:inputText`事实上在`<h:form>`. 我的 bean 的范围是`@ViewAccessScoped`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:22:10.700

你需要使用[`f:convertDateTime`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/). 像：

```
<h:outputLabel value="Date" for="rdate" />
<h:inputText id="rdate" autocomplete="off" value="#{myMB.abstractProject.joinedDate}" label="Date">
   <f:convertDateTime pattern="dd-MM-yyyy" />
</h:inputText> 
```

[这](http://www.mkyong.com/jsf2/jsf-2-convertdatetime-example/)是一个例子。

## 编辑：

这是我所做的：

xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" template="/WEB-INF/templates/globalTemplate.xhtml">

    <ui:define name="title">1532116</ui:define>
    <ui:define name="content">          
        <h:form>
            <h:outputLabel value="Date" for="date" />
            <h:inputText id="date" value="#{so15321163.date}" label="Date" required="true">
                <f:convertDateTime pattern="dd-MM-yyyy"/>
            </h:inputText>              
            <h:message for="date" style="color:red" />              
            <h:commandButton value="Submit" actionListener="#{so15321163.listener}"/>                   
        </h:form>
    </ui:define>    
</ui:composition> 
```

托管bean：

```
package app.so.dev.web.controller;

import java.io.Serializable;
import java.util.Date;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ActionEvent;

@ManagedBean(name="so15321163")
@ViewScoped // @SessionScoped
public class SO15321163 implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 8012804893825661900L;
    private Date date;

    @PostConstruct
    public void init() {

    }

    public void listener(ActionEvent event) {
        System.out.println(date);
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:49:29.113

不确定，但是如果您缺少注释 @Named 则 jsf bean 无法正常工作。

这里有一些更详细的解释：[https ://cwiki.apache.org/confluence/display/EXTCDI/Conversations](https://cwiki.apache.org/confluence/display/EXTCDI/Conversations)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:54:18.760

我已经解决了这个问题，问题是`Converter`另一个表单元素中存在错误，导致表单提交停止。我使用了一个`Converter`类来解决这个问题。

谢谢

# javascript - JavaScript会话cookie - 关闭选项卡时删除？

> ID：15321165
> 
> 赞同：0
> 
> 时间：2013-03-10T10:19:44.963
> 
> 标签：javascript, cookies, session-cookies

我的小部件依赖于设置的唯一会话 cookie 来识别每个访问者。

目前我正在设置一个 cookie，当用户关闭浏览器时它会被删除，但是.. 如果用户关闭选项卡而不是整个浏览器，则不会删除 cookie。

关闭选项卡时有什么方法可以删除 cookie 吗？

编辑：当用户重新加载实际页面时，仍然必须设置 Cookie，如果他们关闭选项卡则只想删除。

所以 unload 事件在这里不是一个选项，因为它会在页面重新加载时删除 cookie

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T10:58:34.843

卸载时，在 cookie 中设置卸载时间。当页面（重新）加载时，检查时间是否最近。如果不是最近的（即不是重新加载页面），请删除 cookie 并重新开始。显然是一个会话cookie，一旦浏览器关闭，它就会被正确删除，这样当标签页关闭时，数据就会被忽略，就像它被删除一样。

# cron - Quartz.net 调度程序不工作

> ID：15321166
> 
> 赞同：0
> 
> 时间：2013-03-10T10:19:45.597
> 
> 标签：cron, quartz.net

我正在使用 Quartz.net 设置一个调度程序，每天在 15.59 点发送电子邮件。这就是我使用的：

```
0 59 15 * * ? 
```

但它从未被解雇。

为了找出我的数据库是否包含将触发调度程序的数据，我使用了

```
0 0/1 * * * ? 
```

它将每分钟触发一次，并且效果很好。

我的 cron 日常工作有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:04:36.507

你的 cron 表达式应该是 : `0 59 15 1/1 * ? *`。这将在每天 15:59 运行您的 cron 作业。访问[cronmaker](http://cronmaker.com/)以生成更多这样的 cron 表达式。

# javascript - 为什么这个属性返回未定义？

> ID：15321167
> 
> 赞同：0
> 
> 时间：2013-03-10T10:19:49.127
> 
> 标签：javascript, audio, codec

我正在使用 Javascript 开发 AMR 编解码器，我似乎无法获得解码器模块识别的文件引用。这是我的代码示例：

```
 reader.onload = (function (file) {
        return function (e) {

            var extension = file.name.split(".")[1];

            if (extension === "amr") {
                console.log("in try");
                var stuff = e.target.result;
                console.log(stuff.length);
                var jigg = new AMR();
                jigg.benchmark == 'true';
                console.log(jigg); //jigg is defined, it's an instance of amr
                // let's call some amr functions...
                var dcoded = jigg.decode(stuff);

                AMR.util.play(dcoded); //this throws an 'undefined' error, indicating that 'dcoded' is undefined. 

            } else if (extension == "wav") {
                var data = e.target.result;
                encodeWAV(data);
            } else if (extension == "pcm" && isTypedArray) {
                encodeRawPCM(new Int16Array(e.target.result));
            }
        };
    })(f);

    if ( !! isTypedArray) {
        reader.readAsArraybuffer(f);
        return;
    }
    // Read the file as a Binary String
    reader.readAsBinaryString(f);
} 
```

我已经评论了出现问题的那一行。

```
 AMR.util.play(dcoded); 
```

# php - 准备好的语句将文本连接起来？

> ID：15321170
> 
> 赞同：0
> 
> 时间：2013-03-10T10:20:31.770
> 
> 标签：php, sql-server, pdo

**更新：**我想我正面临这个问题[http://social.msdn.microsoft.com/Forums/en-US/sqldriverforphp/thread/2a559a42-0ef3-42c8-9e87-08ff7934678a/](http://social.msdn.microsoft.com/Forums/en-US/sqldriverforphp/thread/2a559a42-0ef3-42c8-9e87-08ff7934678a/)很快就会回来，如果这是案子。

我无法理解发生了什么。也许调试工具不好，或者语句的组装方式有问题，无论如何，希望有一些提示/也许是处理问题的另一种方法。

我有这样的声明：

```
$rule_statment = $pdo->prepare(
                "if not exists
                 (select * from menu_availability_rules
                 where
                   (daily_serving_start = :start or
                    daily_serving_start is null and :start is null) and
                   (daily_serving_end = :end or
                    daily_serving_end is null and :end is null) and
                   (weekly_service_off = :weekly or
                    weekly_service_off is null and :weekly is null) and
                   (one_time_service_off = :once or
                    one_time_service_off is null and :once is null))
                 begin
                   insert into menu_availability_rules
                    (daily_serving_start, daily_serving_end,
                     weekly_service_off, one_time_service_off)
                   values (:start, :end, :weekly, :once)
                 end"); 
```

我在调用之前绑定了所有必要的参数`execute`，但是我从 SQL Server 得到一个语法错误：

```
COUNT field incorrect or syntax error 
```

我试着打印出来：

```
$rule_statment->debugDumpParams(); 
```

输出是这样的：

```
if not exists
                 (select * from menu_availability_rules
                 where
                   (daily_serving_start = :start or
                    daily_serving_start is null and :start is null) and
                   (daily_serving_end = :end or
                    daily_serving_end is null and :end is null) and
                   (weekly_service_off = :weekly or
                    weekly_service_off is null and :weekly is null) and

Params:  4
Key: Name: [6] :start
paramno=0
name=[6] ":start"
is_param=1
param_type=0
Key: Name: [4] :end
paramno=2
name=[4] ":end"
is_param=1
param_type=0
Key: Name: [7] :weekly
paramno=4
name=[7] ":weekly"
is_param=1
param_type=1
Key: Name: [5] :once
paramno=6
name=[5] ":once"
is_param=1
param_type=2 
```

为什么？究竟发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:37:52.183

如果命名参数在查询中多次出现，PHP 似乎不会替换命名参数 - 谁知道：|

# mongodb - mongodb 2.2.3 存在聚合问题

> ID：15321174
> 
> 赞同：1
> 
> 时间：2013-03-10T10:20:59.397
> 
> 标签：mongodb, aggregation-framework

我在本地服务器 2.2.2 上有 mongodb，在本地有 aws 2.2.3 我正在执行与组的聚合并在 AWS 上获取结果相同的脚本导致 {“errmsg”：“no such cmd”，“ok”：0}

这是脚本

```
.aggregate({$group:{_id:'type'}}) 
```

谢谢

# jdbc - 为什么我们需要 java.sql.* 包中的语句

> ID：15321175
> 
> 赞同：0
> 
> 时间：2013-03-10T10:20:59.587
> 
> 标签：jdbc

一个普遍的问题，但我无法找到答案：如果 PreparedStatement 甚至可以运行静态 sql，为什么我们需要 java.sql 中的语句。*

编辑：谢谢垫

但我担心的是为什么人们会使用 Statement 而不是使用 PreparedStatement，换句话说，Statement 取代 PreparedStatement

注意：我的理解是-静态查询可以使用Statement，也可以不频繁触发，而不是PreparedStatement，它用于频繁查询的情况下（原因：由于预编译SQL而导致的性能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:39:59.107

一般来说，当您的代码中有相同的查询时，PreparedStatement 将具有更好的性能，因为它会缓存查询。

但是如果在您的应用程序中，如果相同查询的频率非常少，那么preparedstatement 不会提高任何性能。在这里您应该使用语句，这是您基于 jdbc 的开发代码库的主要选择。

# html - 在 HTML 中定位文本

> ID：15321178
> 
> 赞同：0
> 
> 时间：2013-03-10T10:21:37.003
> 
> 标签：html, css

我想在网页的菜单栏上放置诸如（主页（间距）关于（间距）图片）之类的文本，告诉我如何执行此操作。我越来越像这样了（首页关于图片）

```
 <div id="menuOption" >
 <a href="www.google.com"><font color="#FFFFFF" >Home</font></a>
<a href="./download.html"><font color="#FFFFFF" >About</font></a>
<a href="./purchase.html"><font color="#FFFFFF" >Picture</font></a>
</div>
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:23:17.637

只需添加`&nbsp;`

```
<div id="menuOption" >
   <a href="www.google.com"><font color="#FFFFFF" >Home</font></a>&nbsp;
   <a href="./download.html"><font color="#FFFFFF" >About</font></a>&nbsp;
   <a href="./purchase.html"><font color="#FFFFFF" >Picture</font></a>&nbsp
</div> 
```

或者更好的使用`<ul>`和制造`<li>` `display: inline-block;`和使用`padding`

```
<ul>
  <li>Home</li>
  <li>About</li>
  <li>Pictures</li>
</ul> 
```

CSS

```
ul li {
   display: inline-block;
   padding: 5px 8px; 
   /* Change this according to your requirement, 
   5px is top, bottom and 8px is left, right */
} 
```

> 注意：`<font>`标签已弃用，请改用 CSS`color`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:23:10.450

尝试这个

```
<ul>
    <li><a href="">Home</a></li>
    <li><a href="">News</a></li>
    <li><a href="">Contact</a></li>
    <li><a href="">About</a></li>
    </ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:26:55.700

使用 div 并设置 float:left 并应用填充。

```
<div id="menuOption" >
    <div style="float:left; padding-left:5px"><a href="www.google.com"><font color="#0000" >Home</font></a></div>
<div style="float:left; padding-left:5px"><a href="./download.html"><font color="#0000" >About</font></a></div>
<div style="float:left; padding-left:5px"> <a href="./purchase.html"><font color="#0000" >Picture</font></a></div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:41:45.370

html

```
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Picture</a></li>
</ul> 
```

css

```
ul {
    float:left;
}
ul li{
    float:left;
    list-style-type:none;
    padding:0 5px;
}
ul li a {
    text-decoration:none;
} 
```

工作[演示](http://jsfiddle.net/y5UEu/5/)

# php - php代码中没有报告错误但没有数据进入数据库

> ID：15321179
> 
> 赞同：1
> 
> 时间：2013-03-10T10:21:38.373
> 
> 标签：php, mysql, forms, insert

我有以下简单的形式

简单的模式

试运行表

```
 <form method=post action='android.php'>
    firstname:<input type='text' name='firstname'/><br>
    secondname:<input type='text' name='secondname'/><br>
    email:<input type='text' name='email'/><br>
    password<input type='text' name='password'/><br>
    <input type=submit name='submit' value='chekiii'/><br>
    </form>
    </body> 
```

php 文件是下面的文件，但它不会将任何数据输入到数据库中，也不会显示错误……事实上，它在解析过去的错误代码后会回显“成功”消息。

```
<?php
$con = mysql_connect("www.######.com","#####","######");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("android", $con);
if ($_POST[submit])
{
$sql=mysql_query("INSERT INTO magic (firstname,secondname,email,password)
VALUES
('$_POST[firstname]','$_POST[secondname]','$_POST[email]','$_POST[password]')");

if (mysql_query(!$sql,$con))
{
    die('Error: ' . mysql_error());
}
echo "success";
mysql_close($con);}
?> 
```

我可能有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T11:16:43.377

问题在于对数据库的引用。使用我的主机安装的 CPANEL，我没有意识到有**数据库命名前缀**，我不知道作为菜鸟（仍然是）。感谢大家。还在学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:25:05.843

您是否尝试过回显 $sql 查询，然后手动将其添加到数据库中？这可能会给您一个可以处理的错误。我注意到的一件事是您的 $_POST 变量周围没有引号：即使用`$_POST['firstname']`而不是`$_POST[firstname]`.

哦，请在使用此表单之前对用户输入进行一些检查...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:25:41.217

这行不通

```
$sql=mysql_query("INSERT INTO magic (firstname,secondname,email,password)
VALUES ('$_POST[firstname]','$_POST[secondname]','$_POST[email]','$_POST[password]')"); 
```

用这个

```
"INSERT INTO magic (firstname,secondname,email,password)
VALUES ('".$_POST['firstname']."','".$_POST['secondname']."','".$_POST['email']."','".$_POST['password']."')" 
```

也改变这个：

```
if (mysql_query(!$sql,$con)){
    die('Error: ' . mysql_error());
} 
```

至

```
if (!mysql_query($sql,$con)){
    die('Error: ' . mysql_error());
} 
```

你的代码中到处都是错误

```
<?php
$con = mysql_connect("www.######.com","#####","######");
if (!$con){
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("android", $con);
if ($_POST['submit']){ //$_POST['submit'] NOT $_POST[submit]
$sql=mysql_query("INSERT INTO magic (firstname,secondname,email,password)
    VALUES ('".$_POST['firstname']."','".$_POST['secondname']."','".$_POST['email']."','".$_POST['password']."')");

if (mysql_query(!$sql,$con)){
    die('Error: ' . mysql_error());
}

echo "success";
mysql_close($con);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:26:52.657

您的错误是当您将 $_POST 变量传递到查询字符串时。

首先，您**需要**在将这些数据投入查询之前对其进行清理，否则您可能会受到 SQL 注入攻击。

其次，修复错误，在 $_POST 变量周围添加`{`和`}`，以便可以在双引号字符串中评估它们。您的 $_POST 变量索引中还缺少单引号。

```
$sql=mysql_query("INSERT INTO magic (firstname,secondname,email,password)
  VALUES
  ('{$_POST['firstname']}','{$_POST['secondname']}','{$_POST['email']}','{$_POST['password']}')"); 
```

请参阅 php[变量](http://www.php.net/manual/en/language.variables.basics.php)文档以获取更多说明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T10:28:24.630

请不要使用已弃用的代码：

```
$con = mysqli_connect(..... );
mysqli_select_db(...);
mysqli_query($con,...); 
and to every $_POST mysqli_real_escape_string($con,....); 
```

# javascript - 如何在无需悬停的情况下使花式工具提示（标题）具有粘性？

> ID：15321180
> 
> 赞同：0
> 
> 时间：2013-03-10T10:21:57.623
> 
> 标签：javascript, fancybox

我正在使用fancybox，并且希望无需悬停即可显示标题。有没有办法做到这一点？我的用法很简单，但找不到方法。

```
 <a class="imglarge-fancybox" rel="group" title="some title here"      
   href="http://imgur.com/some.jpg">
   <img class="imgsmall" alt src="http://imgur.com/small.jpg">
 </a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:38:26.073

通过对 FancyBox API 的快速回顾，我发现了这个选项`titleShow`

```
 titleShow ==> "Toggle title" 
```

# mysql - MySQL LEFT JOIN 与 GROUP BY 和 WHERE IN（子查询）

> ID：15321182
> 
> 赞同：15
> 
> 时间：2013-03-10T10:22:04.247
> 
> 标签：mysql, sql, group-by, left-join

我有一张表，每个日期都有一些统计信息，我想用 MySQL 列出。对于某些日期将没有统计信息，因此结果应如下所示：
2013-03-01: 3
2013-03-02: 2
2013-03-03: 0
2013-03-04: 1

我发现用 0 -zero- 填充空白可以通过一个包含所有可能日期和 LEFT JOIN 的单独表格来解决。到现在为止还挺好。

统计信息（展示次数）位于“campaigndata”表中：

```
id - int(11)
日期 - 日期
活动 ID - int(11)
展示次数 - int(11)
```

但我只想得到一些统计数据。更具体地说，我只想要来自“campaigndata”的行，其中“campaignid”在表“campaignfilter”中，“campaigntype”设置为 1（例如）。

这是表“campaignfilter”：

```
id - int(11)
活动类型 - int(11)
活动 ID - int(11)
```

任何人都知道如何做到这一点？

PS：表“campaigndata”的结构几乎是锁定的，因为它是基于从外部系统自动导入的。

* * *

**样本记录**

```
CREATE TABLE demo_campaigndata (
  id int(11) NOT NULL AUTO_INCREMENT,
  date date NOT NULL,
  campaignid int(11) NOT NULL,
  impressions int(11) NOT NULL,
  PRIMARY KEY (id)
);
INSERT INTO demo_campaigndata (id, date, campaignid, impressions) VALUES
(1, '2013-03-03', 1, 100),
(2, '2013-03-03', 2, 100),
(3, '2013-03-03', 3, 100),
(4, '2013-03-04', 2, 100),
(5, '2013-03-05', 1, 100),
(6, '2013-03-05', 2, 100);

CREATE TABLE demo_campaignfilter (
  id int(11) NOT NULL AUTO_INCREMENT,
  campaigntype int(11) NOT NULL,
  campaignid int(11) NOT NULL,
  PRIMARY KEY (id)
);
INSERT INTO demo_campaignfilter (id, campaigntype, campaignid) VALUES
(1, 1, 1),
(2, 1, 3);

CREATE TABLE demo_calendar (
  date date NOT NULL,
  PRIMARY KEY (date)
);
INSERT INTO demo_calendar (date) VALUES
('2013-03-01'),
('2013-03-02'),
('2013-03-03'),
('2013-03-04'),
('2013-03-05'); 
```

**期望的结果**

```
2013-03-01: 0
2013-03-02: 0
2013-03-03: 200
2013-03-04: 0
2013-03-05: 100 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-10T10:24:53.097

```
SELECT  a.date, COUNT(b.campaignid) totalStat
FROM    campaigndata a
        LEFT JOIN campaignfilter b
            ON  a.campaignid = b.campaignid AND
                b.campaigntype = 1
GROUP   BY a.date 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

**更新 1**

```
SELECT  a.date, 
        COALESCE(b.totals,0) totals
FROM    demo_calendar a
        LEFT JOIN
        (
            SELECT  a.date, SUM(impressions) totals
            FROM    demo_campaigndata a
                    INNER JOIN demo_campaignfilter b
                        ON a.campaignid = b.campaignid
            WHERE   b.campaigntype = 1
            GROUP   BY a.date
        ) b ON a.date = b.date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5b03c/2)

# ios - iOS如何在UITableView行中隐藏双值

> ID：15321184
> 
> 赞同：1
> 
> 时间：2013-03-10T10:22:09.760
> 
> 标签：ios, sqlite, uitableview, uilabel, touchxml

我正忙于在 TableView 中显示事件列表的应用程序。每行/单元格我有一个事件显示事件的标题和日期。现在的问题是，当一天有 2 个或更多事件时，应用程序现在每个单元格都可以很好地显示它们，但用户会重复看到日期 2 次或更多次，这看起来效率低下而且有点多余。所以我的想法是检查前一个单元格日期是否与当前单元格日期相似，这将使当前单元格日期隐藏（我无法完全删除它，因为用户能够将事件保存到日历中）。

我正在通过 TouchXML 将外部 XML 读入 SQLite 数据库。

这是我的代码示例：

```
-(void) grabXMLData:(NSString *)dataAddress {

    _managedObjectContext = [(DAFAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSURL *url = [NSURL URLWithString: dataAddress];
    CXMLDocument *xmlParser = [[CXMLDocument alloc] initWithContentsOfURL:url options:0 error:nil];

    NSArray *resultNodes = NULL;
    resultNodes = [xmlParser nodesForXPath:@"//month" error:nil];

    for (CXMLElement *resultElement in resultNodes) {
        NSMutableDictionary *monthItem = [[NSMutableDictionary alloc] init];

        [monthItem setObject:[[resultElement attributeForName:@"name"] stringValue] forKey:@"name"];
        [monthItem setObject:[[resultElement attributeForName:@"month"] stringValue] forKey:@"month"];
        [monthItem setObject:[[resultElement attributeForName:@"year"] stringValue] forKey:@"year"];

        Month *aMonth = [NSEntityDescription insertNewObjectForEntityForName:@"Month" inManagedObjectContext:_managedObjectContext];
        aMonth.name =  [monthItem objectForKey:@"name"];
        NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
        aMonth.month = [f numberFromString:[monthItem objectForKey:@"month"]];
        aMonth.year = [f numberFromString:[monthItem objectForKey:@"year"]];

        NSArray *itemNodes = [resultElement children];

        for (CXMLElement *resultItem in itemNodes) {
            NSMutableDictionary *item = [[NSMutableDictionary alloc] init];

            [item setObject:[[resultItem attributeForName:@"id"] stringValue] forKey:@"id"];

            int counter;
            for(counter = 0; counter < [resultItem childCount]; counter++) {
                [item setObject:[[resultItem childAtIndex:counter] stringValue] forKey:[[resultItem childAtIndex:counter] name]];

            }

            Item *aItem = [NSEntityDescription insertNewObjectForEntityForName:@"Item" inManagedObjectContext:_managedObjectContext];
            NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
            aItem.nr = [f numberFromString:[item objectForKey:@"id"]];
            aItem.title = [item objectForKey:@"title"];
            aItem.body = [item objectForKey:@"body"];
            aItem.date = [item objectForKey:@"date"];
            aItem.start = [item objectForKey:@"start"];
            aItem.end = [item objectForKey:@"end"];
        aItem.start2 = [item objectForKey:@"start2"];
            aItem.end2 = [item objectForKey:@"end2"];
            aItem.link_url = [item objectForKey:@"link_url"];
            aItem.month = aMonth;
            [aMonth addItemObject:aItem];
        }
    }
} 
```

这是需要比较的项目日期。

这是我的 tableview cellForRowAtIndex 代码的一部分：

```
Month *aMonth = [_stages objectAtIndex:indexPath.section];
    NSSortDescriptor *sortDescriptorItem = [NSSortDescriptor sortDescriptorWithKey:@"nr" ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObjects: sortDescriptorItem, nil];
    _stagesPerMonth = [[aMonth.item allObjects] sortedArrayUsingDescriptors:sortDescriptors];
    Item *aItem = [_stagesPerMonth objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:52:53.033

我想您使用具有用于显示日期的标签的自定义单元格。的伪代码`cellForRowAtIndex`是：

```
Item *aItem = [_stagesPerMonth objectAtIndex:indexPath.row];
NSDate thisDate = aItem.date;

// Obtain the date of the previous event or nil if this is the first event
NSDate prevDate = indexPath.row > 0 ? _stagesPeMonth[indexPath.row - 1].date : nil;

// Date label is hidden if the previous date is the same as this.
dateLabel.hidden = [thisDate isEqualToDate: prevDate]; 
```

在您的情况下，语法可能会有所不同。

# android - 如何在屏幕中心显示 Toast

> ID：15321186
> 
> 赞同：100
> 
> 时间：2013-03-10T10:22:14.213
> 
> 标签：android, android-toast

在Android中，我想在屏幕底部显示一条吐司消息，我试过这个：

```
Toast.makeText(test.this, "bbb", Toast.LENGTH_LONG).show(); 
```

它不起作用，我该如何正确执行？

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2013-03-10T10:25:27.520

在屏幕中央显示**Toast**。

```
Toast toast = Toast.makeText(test.this, "bbb", Toast.LENGTH_LONG);
toast.setGravity(Gravity.CENTER, 0, 0);
toast.show(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-14T06:18:40.267

**定位你的吐司**

标准的 toast 通知出现在屏幕底部附近，水平居中。`setGravity(int, int, int)` 您可以使用该方法更改此位置 。它接受三个参数： `Gravity`常量、`x-position`偏移量和`y-position`偏移量。

例如，如果你决定 toast 应该出现在左上角，你可以像这样设置重力：

```
toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0); 
```

如果要向右微移位置，请增加第二个参数的值。要向下微调，请增加最后一个参数的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-05-22T08:45:58.633

在 Android 11 之前，要将**Toast**居中，请使用：

科特林：

```
val toast = Toast.makeText(context, "Test", Toast.LENGTH_LONG)
toast.setGravity(Gravity.CENTER, 0, 0)
toast.show() 
```

爪哇：

```
Toast toast = Toast.makeText(context, "Test", Toast.LENGTH_LONG);
toast.setGravity(Gravity.CENTER, 0, 0);
toast.show(); 
```

或自定义视图。

**警告**：从 Android 11（R，API 30）开始，您无法在 Android 11 及更高版本上显示居中的 toast：

*   重力**不再**起作用了。请参阅[https://developer.android.com/reference/android/widget/Toast#setGravity(int,%20int,%20int)](https://developer.android.com/reference/android/widget/Toast#setGravity(int,%20int,%20int))。
*   当从后台调用时（并且无论如何都已弃用），自定义视图**不起作用。**见[https://developer.android.com/reference/android/widget/Toast#setView(android.view.View)](https://developer.android.com/reference/android/widget/Toast#setView(android.view.View))

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-28T16:44:16.610

在 Xamarin.Android 中，这会在屏幕中心显示 toast：

```
 Toast toast = Toast.MakeText(ApplicationContext, "bbb", ToastLength.Long);
            toast.SetGravity(GravityFlags.Center, 0, 0);
            toast.Show(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-24T07:38:46.067

自定义吐司的布局文件

```
<ImageView
android:id="@+id/image"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:layout_marginRight="5dp" />

<TextView
android:id="@+id/text"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:textColor="#000" /> 
```

.java 文件，用于在按钮的单击事件上自定义 toast

```
public class MainActivity extends Activity {

private Button button;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button = (Button) findViewById(R.id.buttonToast);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            // get your custom_toast.xml ayout
            LayoutInflater inflater = getLayoutInflater();

            View layout = inflater.inflate(R.layout.custom_toast,
              (ViewGroup) findViewById(R.id.custom_toast_layout_id));

            // set a dummy image
            ImageView image = (ImageView) layout.findViewById(R.id.image);
            image.setImageResource(R.drawable.ic_launcher);

            // set a message
            TextView text = (TextView) layout.findViewById(R.id.text);
            text.setText("Button is clicked!");

            // Toast...
            Toast toast = new Toast(getApplicationContext());
            toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show();
        }
    });
} 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-18T10:05:06.060

```
Toast toast = new Toast(context);
        toast.setGravity(Gravity.FILL_HORIZONTAL | Gravity.BOTTOM, 0, 0);
toast.show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-12T17:43:29.767

在 koltin 的中心（水平）显示/设置文本重力

```
fun Context.longToast(msg: String) {
    Toast.makeText(this, msg, Toast.LENGTH_LONG)
        .apply {
           view.findViewById<TextView>(android.R.id.message)?.gravity = Gravity.CENTER
        }
        .show()
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-13T09:47:15.417

以下代码可用于显示 Toast 消息

```
Toast tt = Toast.makeText(MainActivity.this,"Your text displayed here", Toast.LENGTH_LONG);
tt.setGravity(Gravity.CENTER, 0, 0);
tt.show(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-18T09:21:13.130

对于科特林；

```
val toast = Toast.makeText(this,"Yes clicked...",Toast.LENGTH_LONG)
            toast.setGravity(Gravity.CENTER,0,0)
            toast.show() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-17T20:43:23.653

```
Toast.makeText(test.this, "bbb", Toast.LENGTH_LONG).apply{
setGravity(Gravity.CENTER, 0, 0)}.show() 
```

这样你就可以在一行中完成。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-07-25T23:32:30.567

请使用此行：

```
 setGravity(Gravity.CENTER, 0, 0)}.show() 
```

这不能在 Android 11 上运行

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-09-18T12:21:39.043

下面的代码对我有用。

```
Toast.makeText(this, "Toast in center", Toast.LENGTH_SHORT).setGravity(Gravity.CENTER,0,0).show(); 
```

# java - ActionMappingParametersInteceptor - 为什么我需要它

> ID：15321188
> 
> 赞同：3
> 
> 时间：2013-03-10T10:22:36.750
> 
> 标签：java, parameters, struts2, interceptor

我试图了解`ActionMappingParametersInteceptor`Struts2 中类的使用。

在 API 中查看：

> 此拦截器为该请求在值堆栈上设置来自操作映射的所有参数。它的操作与 完全一样 `ParametersInterceptor`，只有参数来自 `ActionMapping`，而不是`ActionContext.getParameters()`方法。

有没有一种情况，一个`ActionMapping`类可能包含一组不同的请求参数，而不是我从中得到的`ActionContext.getParameters()`？

拦截器的支柱`defaultStack`似乎首先调用 the `ParametersInterceptor`，然后调用`ActionMappingParametersInteceptor`，但我看不出有任何理由这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:06:17.457

实际上`actionMappingParams`，扩展`params`拦截器是使用两种方法处理来自动作映射的参数，这些方法被覆盖并且应该被覆盖：`retrieveParameters`和`addParametersToContext`. 第一种方法真正使用`ActionMapping`参数。第二个是将额外的参数添加到操作上下文中。

> 在此类中，这是一个无操作，因为参数是从同一位置获取的。在子类中，两者都`retrieveParameters()`应该 `addParametersToContext()`被覆盖。

“no-op”意味着永远不会工作，直到

> 向此拦截器添加行为的最佳方法是 `ParameterNameAware`在您的操作中使用该接口。但是，如果您希望应用未在您的操作中实现的全局规则，那么您可以扩展此拦截器并覆盖该 `ParametersInterceptor.acceptableName(String)`方法。

参数名称感知：

> 此接口由想要声明可接受参数的操作实现。与 `ParametersInterceptor`. 例如，操作可能想要创建他们将接受的参数的白名单或他们将拒绝的参数的黑名单，以防止客户端设置其他意外（并且可能是危险的）参数。

这是唯一可以将额外参数添加到操作上下文的情况。

# cuda - CUDA 共享内存中的并行扫描

> ID：15321195
> 
> 赞同：4
> 
> 时间：2013-03-10T10:23:38.483
> 
> 标签：cuda, shared-memory

我有一个问题，每个线程块（一维）必须对共享内存内的一个数组进行扫描，并执行几个其他任务。（该数组最多有 1024 个元素。）

有没有支持这种操作的好库？

我检查了 Thrust 和 CudPP 但它们都只在数据最初位于全局内存中时才起作用，这不是我想要的，因为我不想为很少的工作启动一个新内核并将数据复制回全局内存，因为它有相当大的开销。

如果没有支持此类操作的公共库，那么如果我只想编写一次此操作并在几个不同的问题中使用它，您有什么建议？

我的第一个想法是编写一个简单的设备函数来运行扫描操作，但是是否可以从不是内核函数的设备函数访问共享内存并执行 __syncthreads() 操作？我的另一个想法是在宏中编写整个函数，然后它会起作用，因为预处理器将代码复制到内核代码，但编写如此复杂的宏并不是使用宏的最佳方式。

PS.：我有流式多处理器版本 2.1，所以我不能从另一个启动新内核。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:27:16.627

> 有没有支持这种操作的好库？
> 
> 如果没有支持此类操作的公共库，那么如果我只想编写一次此操作并在几个不同的问题中使用它，您有什么建议？

有一个名为 CUB 的库 - 代表 CUDA UnBound。[你在这里](http://nvlabs.github.com/cub/)找到它。它提供扫描功能。
如果您想自己编写类似的东西，CUB 可能有助于了解它是如何完成的。

> 我的第一个想法是编写一个简单的主机函数来运行扫描操作，但是是否可以从不是内核函数的设备函数访问共享内存并执行 __syncthreads() 操作？

我不确定“运行扫描操作的主机功能”是什么意思。
您可以从主机代码中做的唯一一件事就是启动内核和内存副本。除非从拥有相关共享内存的块中调用设备函数，否则答案是否定的。
共享内存是按块分配的，并且只能从块内部访问。

# google-maps - 如何在谷歌地图上实时显示标记位置，避免setTimeout和setInterval时间不准确？

> ID：15321199
> 
> 赞同：0
> 
> 时间：2013-03-10T10:24:02.030
> 
> 标签：google-maps, animation, settimeout, setinterval

我可以通过更改偏移量或仅通过 setPosition 和 latlng 数组沿折线设置动画标记。但它涉及使用 setInterval 或 setTimeout 函数。而且他们无法根据其性质（CPU 负载、队列中的其他进程等）保证准确的时间。如何补偿时间不准确并显示标记的实时位置？

在上面的问题中添加一些代码：

功能动画标记（路径，运行）{

```
var pcur = 1,
    acur = 1,
    totaltime = runts[runts.length-1] - runts[0],
    newPos = [];

for (var t1=1; t1 < path.length; t1++) {
    var timegap = Math.round((runts[t1] - runts[t1-1])/totaltime*100),
        latint = path[t1].lat() - path[t1-1].lat(),
        lngint = path[t1].lng() - path[t1-1].lng();
    for (var t2=1; t2 <= timegap; t2++) {
        newPos[pcur] = new google.maps.LatLng( path[t1-1].lat()+t2/timegap*latint, path[t1-1].lng()+t2/timegap*lngint );
        pcur++;
    }
}
var animateId = setInterval(function() {
    myMarker.setPosition(newPos[acur]);
    acur++;
    if (acur == pcur) clearInterval(animateId);
}, 20); 
```

}

setInterval 中的 20 毫秒应该使整个动画持续 2 秒（20 * 100），但实际上都取决于 CPU 负载，将 20 毫秒减少到 5 毫秒不会产生任何变化......我如何使用 time() 函数为跟踪器设置动画基于来自 runts 数组的真实 ts？

# c# - CloudFlare 削减 HTTP POST 内容

> ID：15321202
> 
> 赞同：1
> 
> 时间：2013-03-10T10:24:23.637
> 
> 标签：c#, .net, http, proxy, http-post

我与 CloudFlare 后面的服务器通信。我很少从服务器收到错误，就好像它没有收到我的 HTTP POST 请求的内容一样。它很少发生（可能是 1-2%）。此外，如果我只是立即重新发送相同的请求，它在大多数 (~99%) 情况下都可以正常工作。

当服务器不在 CloudFlare 之后或他们使用其他类似服务时，我对服务器没有任何问题。此外，如果服务器临时移出 CloudFlare，问题就会消失。我在 CloudFlare 后面的另一台服务器上遇到了完全相同的问题。

我正在使用 C# .NET 4.5。连接是安全的 (HTTPS)。

我已经使用 Fiddler 捕获了 HTTP 请求/响应。我认为“坏”和“好”请求之间完全没有区别。

```
POST https://btc-e.com/tapi HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Key: ****************
Sign: e94eb19d4cdf29b6629c2acc6934bacdf502bdc93c14a44521ef9d64823f4ab560ef14fce468b7df897f0b2f2f4677c4191801f7453c784bda7fd0ede4b95f59
Host: btc-e.com
Content-Length: 42

nonce=1362901653&method=OrderList&active=1

======================================================

HTTP/1.1 200 OK
Server: cloudflare-nginx
Date: Sun, 10 Mar 2013 08:41:16 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: PHP/5.4.12
X-Frame-Options: DENY
Expires: Sun, 17 Mar 2013 08:40:56 GMT
Cache-Control: max-age=604800
Set-Cookie: __cfduid=****************; expires=Mon, 23-Dec-2019 23:50:00 GMT; path=/; domain=.btc-e.com
CF-RAY: 4ceb4731fea02d9

10e
{"success":0,"error":"*************"} 0
0 
```

我正在使用下面的代码，但我认为它不相关：

```
byte[] data = Encoding.ASCII.GetBytes(BuildPostData(args)); //values are properly encoded using HttpUtility.UrlEncode

HttpWebRequest request = WebRequest.CreateHttp(ApiUri);
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = data.Length;
request.Timeout = 5000;
request.Headers.Add("Key", Key);
request.Headers.Add("Sign", sign);    

using (Stream outStream = request.GetRequestStream())
{
    outStream.Write(data, 0, data.Length);
    outStream.Flush();
}

using (WebResponse response = request.GetResponse())
using (var streamReader = new StreamReader(response.GetResponseStream()))
    result = JObject.Parse(streamReader.ReadToEnd()); 
```

我已经尝试过但没有成功：

*   HTTP 1.1 / 1.0
*   KeepAlive 开/关
*   预计 100 次继续开/关
*   启用/禁用 Cookie
*   发送分块开/关

请问有什么想法吗？

更新：2013-05-01 问题消失了。客户端没有变化。3-4周后就消失了...

# api - 用于处理 NEFT 付款的印度银行 API

> ID：15321205
> 
> 赞同：14
> 
> 时间：2013-03-10T10:24:45.630
> 
> 标签：api, payment, bank

有没有办法从银行账户自动向印度的所有客户付款？

认为：

每个客户都有一个唯一的 ID，所有这些银行详细信息（例如姓名、帐号和 NEFT 代码）都存储在他的个人资料中。有没有办法通过传递 api 令牌、客户 ID 和要转账的金额从自定义应用程序向他汇款？

谢谢巴尔加瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-16T08:12:26.343

从技术上讲是的，您可以使用 Pay2All 等私人运营商提供的 API，也可以直接使用 Yes Bank 提供的 API

链接： http: [//www.pay2all.in/money-transfer-api](http://www.pay2all.in/money-transfer-api)

[https://www.yesbank.in/corporate-banking/product-and-services/digital-banking/api-banking](https://www.yesbank.in/corporate-banking/product-and-services/digital-banking/api-banking)

# asp.net-mvc - 实现 MVC 4 添加/编辑/列出操作的方式的困境

> ID：15321211
> 
> 赞同：0
> 
> 时间：2013-03-10T10:25:07.923
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在工作（实际上是重构）一些项目，我有一个管理面板，有常规的管理操作 ADD / EDIT / LIST 他们所做的，是在数据库中插入/更新/或列出实体。

我在这个项目中发现，在 Add 和 Update ViewModels 和 Views 之间总是有重复的代码，它是复制粘贴，它们之间有微小的变化。是这样的：

EditCardsViewModel AddCardViewModel

正如我所说，几乎完全相同，然后 EditCardVIew 使用 EditCardsViewModel 作为 Model ， AddView 使用 AddCardViewModel ，对我来说这是代码重复。当我联系创建这个的开发人员时，他说，这些是最佳实践，而且它非常易读，你知道在哪里可以找到所有东西......等等，我没有足够的经验来决定。所以问题是什么是最佳实践？我的意思是你能不能指点我一些好文章，解释如何在 MVC 中完成 ADD/UPDATE/LIST。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:56:25.230

是的，因为 Create 和 Edit 实际上是相同的，所以我通常会这样做：

**控制器：**

```
public class ActivityController : BaseController
    {
        public ActionResult Index()
        {
            var model = //Get your List model here...

            return View(model);
        }

        public ActionResult Create()
        {
            var model = new ActivityModel(); //Create new instance of whatever your model is
            return View("Edit", model); //NOTE: Pass the model to the "Edit view
        }

        public ActionResult Edit(int id)
        {
            var model = // your logic here to get your model based on ID param
            return View(model);
        }

        [HttpPost]
        public ActionResult Delete(int id)
        {
            try
            {
                // your logic here to delete based on ID param
                return Json(new { Success = true, Message = "Entity updated" }); //AJAX result
            }
            catch (Exception x)
            {
                return Json(new { Success = false, Message = x.GetBaseException().Message }); //AJAX result
            }
        }

        [HttpPost]
        public ActionResult Update(ActivityModel model)//a single action to handle both add and edit operations
        {
            if (!ModelState.IsValid)
            {
                return Json(new { Success = false, Message = "Please correct any errors and try again" });//AJAX result
            }

            try
            {
                if (entity.Id == 0)
                {
                    //your logic for inserting
                }
                else
                {
                    //your logic for updating
                }

                return Json(new { Success = true });//AJAX result
            }
            catch (Exception x)
            {
                return Json(new { Success = false, Message = x.GetBaseException().Message }); //AJAX result
            }
        }
    } 
```

这样，我最常需要创建 2 个视图：`Index.cshtml`和`Edit.cshtml`.

只需记住在您的编辑视图中有这个： `@Html.HiddenFor(m => m.Id)`

That will be used in the `Update()` action to check whether you need to do an insert or update.

Without seeing your code, I'm not sure if that applies to your situation though...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:42:01.283

If you download [MVCScaffolding](http://nuget.org/packages/MvcScaffolding) the templates there are optimised for the AddEdit View type design. This [Blog](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/) is a helpful resource for using it.

# jquery - 内容页面不受页面 css 约束

> ID：15321212
> 
> 赞同：0
> 
> 时间：2013-03-10T10:25:11.400
> 
> 标签：jquery, css, google-chrome, google-chrome-extension

我正在制作一个 chrome 扩展，通过 jquery 添加一些内容到当前访问的网页。问题是我创建的元素受当前网页 css 规则的约束，例如，如果网页 css 说所有 div 都有一些属性，那么我的 div 元素得到这个属性。

我怎样才能避免这种情况？

# javascript - 在 Json 调用中使用数组变量（索引）

> ID：15321216
> 
> 赞同：1
> 
> 时间：2013-03-10T10:25:26.310
> 
> 标签：javascript, jquery, jsonp

我知道我在这里遗漏了一些非常简单的东西，但我已经搜索了一段时间，但没有找到任何解决方案。

我有一些看起来像这样的 json 数据

```
post[{
//various post data
categories": {

    "Rants": {
        "name": "Rants",
        "slug": "rants",
        "description": "",
        "post_count": 9
}] 
```

我正在尝试使用`each()`循环返回类别 slug

```
$.each(response.posts[0].categories, function (index) {
                alert(response.posts[0].categories.index.slug);
}); 
```

它在我调用时有效，`alert(response.posts[0].categories.rants.slug);`但在我尝试使用索引作为键时无效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:34:21.773

当你写这个：

```
alert(response.posts[0].categories.index.slug); 
```

您正在尝试读取不存在的`categories`被调用属性。`"index"`如果您真的想阅读每个元素，则必须编写以下内容：

```
alert(response.posts[0].categories[index].slug); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:33:33.723

它应该是

```
 alert(response.posts[0].categories[index].slug); 
```

更多详情

jQuery 会为您解决这个问题。回调函数的第一个参数`.each()`是循环当前迭代的索引。第二个是当前匹配的 DOM 元素所以：

```
$('#list option').each(function(index, element){
  alert("Iteration: " + index)
}); 
```

## 编辑 1

这是`each`api链接
[http://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T10:29:21.717

```
$.each(response.posts[0].categories, function(name, category) {
    alert(category.slug);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T10:32:37.580

There's no need for jQuery here. It looks like it is only getting in your way. Simply do:

```
alert(response.posts[0].categories.Rants.slug); 
```

Or to loop over all of the "rants" (`category` in `categories`):

```
for (var category in response.posts[0].categories) {
  alert(response.posts[0].categories[category].slug)
} 
```

# assembly - 混淆的汇编代码关键字

> ID：15321220
> 
> 赞同：2
> 
> 时间：2013-03-10T10:26:07.213
> 
> 标签：assembly, x86, x86-64, opcode

该页面[http://daeken.pastebin.ca/raw/843310](http://daeken.pastebin.ca/raw/843310)包含所有汇编代码及其描述。但我不是很明白，例如`0xa1 : ['MOV', 'rAX,Ov'],...`，看它的描述我无法弄清楚它是什么意思。

这里有很多这样的例子：

```
Ob - Ov - rAX - Yb - Xb - etc... 
```

谁能解释一下那些奇怪的符号是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:36:44.080

例如：

```
0xa1 : ['MOV', 'rAX,Ov'] 
```

根据[英特尔® 64 和 IA-32 架构开发人员手册：组合卷](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-manual-325462.html)表 A-2。一字节操作码映射：(00H — F7H)`0xa1`是`mov rAX, Ov`.

然后表 A.2.1 寻址方法代码解释了寻址中使用的缩写：

```
O The instruction has no ModR/M byte. The offset of the operand is coded as
a word or double word (depending on address size attribute) in the instruction.
No base register, index register, or scaling factor can be applied (for example,
MOV (A0–A3)). 
```

表 A.2.2 操作数类型代码解释了操作数类型：

```
v Word, doubleword or quadword (in 64-bit mode), depending on operand-size
attribute. 
```

And below A.2.3 Register Codes it says:

```
A register identifier of the form eXX or rXX is used when register width depends
on the operand-size attribute. eXX is used when 16 or 32-bit sizes are possible;
rXX is used when 16, 32, or 64-bit sizes are possible. For example: eAX indicates
that the AX register is used when the operand-size attribute is 16 and the EAX
register is used when the operand-size attribute is 32\. rAX can indicate AX, EAX
or RAX. 
```

So here are some example instruction encodings for `0xa1` opcode (confirmed with [`udcli -x`](http://udis86.sourceforge.net/)):

```
a10102               mov ax,  [0x201]             ; in x86 16-bit code
a101020304           mov eax, [0x4030201]         ; in x86 32-bit code
a10102030405060708   mov eax, [0x807060504030201] ; in x86-64

66a101020304         mov ax,  [0x4030201]         ; with 0x66, in x86 32-bit code
66a10102030405060708 mov ax,  [0x807060504030201] ; with 0x66, in x86-64

48a10102030405060708 mov rax, [0x807060504030201] ; with 0x48 REX.W, in x86-64 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:36:06.110

看看这个：

[80806 操作码映射](http://www.mlsite.net/8086/#addr_E)

在底部你会找到那些的描述

# jquery - 如何在当前页面之外的菜单链接上创建鼠标悬停效果？

> ID：15321224
> 
> 赞同：1
> 
> 时间：2013-03-10T10:26:27.963
> 
> 标签：jquery, css

这是我目前正在处理的网站设计：[mailodding](http://www.mailodging.com)。几天前我刚刚学习了jquery，需要一些帮助。

目前，我使用 jquery 在当前页面的菜单上具有填充左效果：

```
$(function(){
var pathname = (window.location.pathname.match(/[^\/]+$/)[0]);
$('#menu ul li a').each(function() {
if ($(this).attr('href') == pathname)
{
    $(this).addClass('currentlink');
}
}); 
```

这是'currentlink'类的css

```
 .currentlink {
margin-left: 30px;
} 
```

对于鼠标悬停（悬停）的菜单链接，我有相同的填充左效果。

```
 $(document).ready(function() {
$('.menulink').hover(function() { 
$(this).animate({ opacity: 1, marginLeft: '30px' }, 300);
}, function() { 
$(this).animate({ opacity: 0.8, marginLeft: 0 }, 200);
  });  
  }); 
```

我的问题是，当您将鼠标悬停在您所在的当前链接上时，它会为链接提供**双重填充**（当前为 30 像素 + 鼠标悬停时为 30 像素），这是我不想要的。关于如何将当前链接保持在固定边距的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:31:44.483

You can use the `.not()` method or `:not` selector:

.not method :

```
$('#menu ul li a').not('.currentlink ').hover(function () {} ); 
```

or css selector :

```
 $('#menu ul li a:not(.currentlink)').hover(function() {}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:30:23.247

You could try the following:

```
$(document).ready(function() {
    $('#menu li a[class!="currentlink"]').hover( function() {
        ...
    }, function() {
        ...
    });
}); 
```

# ruby-on-rails - 包含 Guard gem 时 Rails 服务器 readline 错误

> ID：15321233
> 
> 赞同：0
> 
> 时间：2013-03-10T10:27:17.920
> 
> 标签：ruby-on-rails, readline, guard, spork

我已经捆绑安装了以下 gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.2.0'
  gem 'spork', '0.9.2'
end

group :production do
  gem 'pg'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-inotify', '~> 0.9'
  gem 'libnotify', '0.5.9'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.5'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails' 
```

当我在终端启动 rails 服务器时，出现以下错误：

> steven@steven-VirtualBox:~/Dev/test_app$ rails s
> 
> 您正在运行不支持 Readline 的 ruby​​ 版本
> 
> 请`gem install rb-readline`或重新编译 ruby​​ --with-readline。

我已经尝试按照控制台说明安装 readline，但我得到了同样的错误。我发现如果我删除了guard-rspec 和guard-spork，rails 服务器可以正常启动。这是我正在运行的内容：

*   Ubuntu 12.10
*   红宝石 2.0.0
*   导轨 3.2.12
*   后卫-rspec 1.2.1
*   卫矛 1.2.0
*   spork 0.9.2

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:18:36.440

似乎 ruby​​ 2.0 不支持 readline，因为它仍然很新（发布不到一个月）我建议现在使用 1.9.3 版本。查看guard-spork 文档的[https://github.com/guard/guard-spork](https://github.com/guard/guard-spork)和guard-rspec 文档[https://github.com/guard/guard-rspec](https://github.com/guard/guard-rspec)。它说它已针对 1.8.7、1.9.2 和 1.9.3 进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:39:30.277

基于此：[wrapping 0.5.0 release](https://github.com/luislavena/rb-readline/issues/79)，似乎他们正在准备一个新版本来支持`ruby 2.0`，同时你可以试试这个：

```
git clone https://github.com/luislavena/rb-readline.git
cd rb-readline
rake install 
```

# mysql - 优化查询以计算一个表的两个不同列和不同行的总数

> ID：15321238
> 
> 赞同：2
> 
> 时间：2013-03-10T10:27:41.797
> 
> 标签：mysql, sql, group-by

表**帐户**

```
Id    price     currency      date 
1      10        USD         2013-01-12  
2      200       GBP         2013-01-13 
3      30        GBP         2013-01-14 
4      85        USD         2013-01-20 
5      80        GBP         2013-01-25 
6     120        GBP         2013-01-30 
7     180        GBP         2013-01-31 
8     100        GBP         2013-02-04 
```

我想从一个月算起：

```
Total:  USD     95  
Total:  GBP     610 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:28:48.990

你只需要使用`GROUP BY`一个*聚合函数* `SUM()`来计算它的总数。

```
SELECT  currency, SUM(price) totalPrice
FROM    tableName
GROUP   BY currency 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b7034/2)
*   [SQLFiddle 演示（*按月*）](http://www.sqlfiddle.com/#!2/b7034/4)
*   [SQLFiddle 演示（*按月和年*）](http://www.sqlfiddle.com/#!2/b7034/5)

# php - mysql - 从多个表的 SELECT 语句中查找表名

> ID：15321239
> 
> 赞同：0
> 
> 时间：2013-03-10T10:28:11.267
> 
> 标签：php, mysql

进行查询以从多个表中选择行...然后是必要的信息（即`headline`从那里检索）

```
$sql="(SELECT `headline`,`date` FROM `arts`)

UNION

(SELECT `headline`,`date` FROM `lead_news`)

UNION

(SELECT `headline`,`date` FROM `opinion_analysis`)

UNION

(SELECT `headline`,`date` FROM `politics`)

UNION

(SELECT `headline`,`date` FROM `top_news`)

UNION

(SELECT `headline`,`date` FROM `lifestyle`)

ORDER BY `date` DESC LIMIT $limit  "; 
```

```
$result=mysql_query($sql);
while($row=mysql_fetch_assoc($result)){
    echo trim(htmlspecialchars_decode($row['headline']));
} 
```

我还需要找出`table`每个`$row`. 我在[这里](https://stackoverflow.com/questions/12544758/how-to-find-the-table-name-which-the-image-randomly-selected-from)找到了一个解决方案，建议查询为：

`"SELECT *, table_name as source FROM table_name"`这样就`$row['source']`可以返回表名。

但我想知道是否有任何关联数组键可以从中检索名称`$row`或 mysql 中的任何内置函数？

**编辑**`SELECT`：我按以下方式编写了命令：

```
SELECT `headline`,`date`, `arts` as `source` FROM `arts` 
```

并得到错误：“字段列表”中的未知列“艺术”。这里采用什么方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:06:08.667

```
SELECT `headline`,`date`, 'arts' as `source` FROM `arts` 
```

您想选择*字符串*“arts”，因此将其放在`'`引号中，而不是反引号。

但实际上，您的桌子设计似乎*非常*错误。除非所有这些项目都非常不同，否则您应该有*一个*包含一列`category`（或类似）的表，而不是每个类别一个表。

# machine-learning - 在 WEKA 或其他 API 中的 JAVA 中哪里可以找到 GSP 代码？

> ID：15321249
> 
> 赞同：2
> 
> 时间：2013-03-10T10:29:22.840
> 
> 标签：machine-learning, data-mining, weka

寻找 JAVA 中的广义顺序模式算法代码。

我看到了有关此的较早帖子，并提到了 WEKA。使用 WEKA API 后，我看到该算法未显示在 WEKA.Associations

是版本的原因吗？

存在一个 WEKA.associator.generalisedsequentialpattern

[http://weka.wikispaces.com/GeneralizedSequentialPatterns](http://weka.wikispaces.com/GeneralizedSequentialPatterns)

有人能告诉我如何在 WEKA 或其他地方找到 GSP 算法 JAVA 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T03:24:23.673

您可以在 Sequential Pattern Mining Framework (SPMF) 中获取**GSP、PrefixSpan、SPAM、SPADE、BIDE、Clasp、CloSpan**和许多其他顺序模式挖掘算法的 Java 源代码，SPMF 是一个专门的 Java 软件/库，提供 80 多个模式挖掘算法：

[http://www.philippe-fournier-viger.com/spmf/](http://www.philippe-fournier-viger.com/spmf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:47:49.617

我找到了解决方案。在 2007 年左右的较早版本的 WEKA 中，实施了 GSP 算法。在较新的版本中，它被删除主要是因为与较新的算法相比，它是一种旧的和低效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T01:42:27.040

weka 在最新版本的软件包中删除了一些算法。从下图中可以看出，这个算法，GeneralizedSequentialPatterns，在包列表中。使用包管理器安装它。

![在此处输入图像描述](../Images/be47fd5a3348851b561a57d6f22d734c.png)

# c# - Design disappear while running scriptmanager message box

> ID：15321250
> 
> 赞同：0
> 
> 时间：2013-03-10T10:29:29.567
> 
> 标签：c#, asp.net, scriptmanager

Am using the below code to show the error message. It's working but i have a problem, design disappear while running scriptmanager message box. I can't able to fix this.

```
Page.ClientScript.RegisterStartupScript(
                this.GetType(), "PopupScript", "javascript:Editalertmessage('" + DeleteUS + "');", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:39:24.043

> 你可以试试这个：

```
ScriptManager.RegisterClientScriptBlock(yourupdatepanel, this.GetType(), "PopupScript", "javascript:Editalertmessage('" + DeleteUS + "');", true); 
```

# ios - ios: How to add remote audio file to AVAudioMix

> ID：15321251
> 
> 赞同：0
> 
> 时间：2013-03-10T10:29:43.980
> 
> 标签：ios, ios5, ios6, ios4

I am developing a simple video editor on ios using AVFoundation. one part of the video editor is to mix an audio which is saved remotely. for eg: [http://zfete.com/sample.mp4](http://zfete.com/sample.mp4)

now i am using AVAudioMix to mix an audio track which is working fine for local files. how can i use AVAudioMix to add a remote audio track.

Thanks in Advance.

# javascript - JavaScript output with Smarty not visible in page source

> ID：15321257
> 
> 赞同：0
> 
> 时间：2013-03-10T10:30:37.473
> 
> 标签：javascript, smarty, output

I'm currently making some changes in page which uses Smarty engine. I'm confused with outputting JavaScript, because when I look into page source there is nothing outputted but when I'm using Firebug my outputted JavaScript code is visible. Is it normal behaviour for Smarty templates?

```
<script type="text/javascript">
   if (isThanksPage == true) {ldelim}
     var biJsHost = (("https:" == document.location.protocol) ? "https://" : "http://");
     document.write('some javascript source code');
   {rdelim}

   if (isThanksPage === true) {ldelim}
      Order.SetCustomer('{$customerInfo.accountDetails.loginMail}', '{$customerInfo.shippingDetails.sFName}', '{$customerInfo.shippingDetails.sLName}');
      Order.OrderNumber = '{$orderId}';
      Order.OrderTotal = '{$totalAll|string_format:"%.2f"}';
      Order.ShippingTotal = '{if $shippingInfo.value eq 0}Free{else}${$shippingInfo.value|string_format:"%.2f"}{/if}';
   {rdelim}
</script>
      {assign var=totalWithoutTax value=`$total+$shippingInfo.value`}
      {if $tax}
        {assign var=taxValue value=`$tax*$totalWithoutTax/100`}
      {else}
        {assign var=taxValue value=0}
      {/if}
   {assign var=totalAll value=`$totalWithoutTax+$taxValue+$promoProduct.catalog_price`}
<script type="text/javascript">
   if (isThanksPage == true) {ldelim}
      Order.ItemTotal = '${$totalAll|string_format:"%.2f"}';      
   {rdelim}
</script>
      {foreach from=$cartProducts key=key item=product}
         {if $product.freeItemNum}
            <script type="text/javascript">
               if (isThanksPage == true) {ldelim}
               Order.AddLineItem('{$product.productInfo[1]}', {$product.freeItemNum}, '0.00');
               {rdelim}
            </script>
         {/if}

         {if $product.quantity > $product.freeItemNum}
            {assign var=quantity value=`$product.quantity-$product.freeItemNum`}
            {if $product.getYInfo.discountNumber >= $quantity}
               {assign var=priceValue value=`$quantity*$product.getYInfo.discountPrice`}
               {assign var=unitPriceValue value=`$product.getYInfo.discountPrice`}
            {elseif $product.getYInfo.discountNumber neq 0}
               {assign var=quantity1 value=`$quantity-$product.getYInfo.discountNumber`}
               {assign var=quantity2 value=`$product.getYInfo.discountNumber`}
               {assign var=priceValue value=`$quantity1*$product.sellPrice+$quantity2*$product.getYInfo.discountPrice`}
               {assign var=unitPriceValue value=`$product.sellPrice`}
            {else}
               {assign var=priceValue value=`$quantity*$product.sellPrice`}
               {assign var=unitPriceValue value=`$product.sellPrice`}
            {/if}
            <script type="text/javascript">
            if (isThanksPage == true) {ldelim}
            Order.AddLineItem('{$product.productInfo[1]}', {$quantity}, '${$priceValue|string_format:"%.2f"}');
            {rdelim}
            </script>
         {/if}
      {/foreach}
      <script type="text/javascript">
      if (isThanksPage == true) {ldelim}
      Order.Go();
      {rdelim}   
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:53:55.187

你能展示代码示例吗？不，这不是正常行为

# opencv - resources for image analysis of test sheets (Choice test) (Scanned pictures)?

> ID：15321259
> 
> 赞同：0
> 
> 时间：2013-03-10T10:30:51.000
> 
> 标签：opencv, image-processing

I'm developing and application for a learning company. I need to image analysis of Test sheet (scanned) and analysis the answer of students. Answer sheets are like this picture : ![test answer sheet](../Images/68b3912cb320ef811b168b803ea2c638.png)

there are 4 options for every test. I think there is components ready for that. I searched a lot and find different image processing stuffs but nothing about this one. Where can I find tutorial or information or component for this? I mean any good website or source to start learning the solutions? I'm using Delphi but I can change it to C# if it is Necessary.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:32:22.033

第 1 步：使用像 Canny 这样的边缘检测器来检测边缘...使用 findContour 选择最大的块，如下图绿色所示...使感兴趣的区域或 ROI 以供将来处理..![绿边](../Images/61cb1485bf6711e97c824ed2540f4861.png)

第 2 步：取**两个**正方形模板（学生应该在其中打勾或变暗）..一个代表打勾/变暗另一个只是一个空白方块...在 ROI 中运行这两个模板的模板匹配以获得可能的位置的答案。

第 3 步：由于答卷的布局应该是不变的，因此您可以在之前将答卷网格化，并将其用作先验知识，将模板匹配位置映射到实际答案。![在此处输入图像描述](../Images/10807238a9c0e782693bd002c6daaee0.png)

# ruby - Checking a network connection in a loop never succeeds even if the connection is available

> ID：15321260
> 
> 赞同：0
> 
> 时间：2013-03-10T10:31:06.487
> 
> 标签：ruby, networking

I want to check for a connection to a specific server with Ruby. So I just wrap the HTTP request into a begin/rescue construct and try again in a few seconds if the connection is not available.

Problem: If I start the program with no connection available (link down) it will never succeed in finding a connection even if at some time the connection is available (e.g. via ping, browser request).

Code:

```
require 'net/http'

loop do 

    begin
        uri = URI.parse 'http://www.example.com'
        resp = Net::HTTP.get uri
    rescue SocketError => se
        puts se
        sleep 3
        next
    rescue Exception => e
        puts e
        break   
    end

    puts 'It works!'
    break

end 
```

Steps to reproduce:

1.  Take network link down
2.  Start program
3.  -> **getaddrinfo: Name or service not known**
4.  -> ...
5.  Turn network link on again
6.  Still no connection, same error

Why is that?

Ruby version: ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux]

# c++ - View greyscale RAW image file in C++ using openCV

> ID：15321261
> 
> 赞同：1
> 
> 时间：2013-03-10T10:31:16.207
> 
> 标签：c++, opencv, image-processing, grayscale

I have a a raw image file which contains image data from the 5th byte onwards. Each byte in the file represents a 8 bit greyscale pixel intensity. I have been able to store the binary data of the image in a 2-D unsigned char array.

Can anyone tell me how to use the array or the file to display the image in openCV?

Right now I am using this code :

```
void openRaw() {
    cv::Mat img(numRows,numCols,CV_8U,&(image[0][0]);
    //img.t();
    cv::imshow("img",img);  
    cv::waitKey();
} 
```

But its displaying a wrong image.

I also tried using the IplImage method, but I am not sure how to pass the pointer to the source image there.

Could anyone provide me with some code for this?

Thanks, Uday

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:10:45.850

“我已经能够将图像的二进制数据存储在二维无符号字符数组中。”

那是你的问题。

opencv 将像素数据存储在连续的 uchar* 中，因此它对您的期望也相同。

你的二维数组很可能是一个指针数组，它不一样。

所以：而不是 2d 数组，制作 1d ：

```
uchar *data = new uchar[rows * cols]; 
```

您可以在那里访问单个像素，例如：

```
uchar pixel = data[y*cols+x]; 
```

然后将数据指针传递到您的 cv::Mat ：

```
cv::Mat img( rows, cols, CV_8U, data ); 
```

哦，请不要再使用 IplImages（又名 1.0 api），不惜一切代价避免！

# apache - Apache httpd-vhosts.conf 和 .htacces (XAMPP) 中动态虚拟主机的自动化

> ID：15321262
> 
> 赞同：4
> 
> 时间：2013-03-10T10:31:19.937
> 
> 标签：apache, .htaccess, xampp, vhosts

我正在尝试在我的本地开发机器上设置一些自动化。通常我会这样开始我的所有项目

打开 Hosts 文件，设置一个 DNS 条目，如`127.0.0.1 example.com www.example.com` Open `httpd-vhosts.conf`file 并添加一个条目，如下所示

```
<VirtualHost *>
    DocumentRoot "/path/to/xampp/htdocs/example.com"
    ServerName example.com
    ServerAlias www.example.com
</VirtualHost> 
```

我想要实现的是以这样一种方式设置环境，我不应该在`httpd-vhosts.conf`每次我想在新主机上工作时都添加这个条目。

相反，我希望有一个全局条目`httpd-vhosts.conf`可以处理所有域并将它们映射到各自的目录

所以如果我的`hosts`文件中有这样的记录列表

```
127.0.0.1 example.com
127.0.0.1 mysite.com
127.0.0.1 google.com
127.0.0.1 abc.com 
```

和这样的文件夹结构

```
/htdocs/
    /example.com/
    /mysite.com/
    /google.com/
    /abc.com/ 
```

它应该自动映射到这些目录，而无需`VirtualHost`在文件中添加记录`httpd-vhosts.conf`。

我可以猜测这可以通过在`httpd-vhosts.conf`（我不知道如何）中添加通配符条目然后在`.htaccess`放置的文件中添加一些重定向规则`/htdocs/`以将它们映射到它们的目录来实现。

所以最终，

1.  如何设置通配符条目`httpd-vhosts.conf`
2.  `.htaccess`如何在文件中设置精确的重写规则`/htdocs/`

这是我想到的，可能还有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T12:31:51.907

## 1.如何设置通配符条目`httpd-vhosts.conf`

`*`通过在您通常放置的域名前面放置一个星号 ( )`www`

```
<VirtualHost *>
    DocumentRoot "/path/to/xampp/htdocs/example.com"
    ServerName example.com

    ServerAlias *.example.com

</VirtualHost> 
```

## 2\. 如何在 /htdocs/ 中的 .htaccess 文件中设置准确的重写规则

```
RewriteEngine On
#RewriteCond %{HTTP_HOST} ^!example.com #(optional) do not redirect base domain
RewriteCond %{HTTP_HOST} (?(?=[a-z0-9\-\_]+\.[a-z0-9\-\_]{2,}$).+|[a-z0-9\-\_]+\.[a-z0-9\-\_]{2,})$
RewriteRule ^$ http://localhost/%0 
```

所有这些域：

```
www.example.com
img.example.com
cdn.example.com
static.img.example.com 
```

将被重定向到`/example.com`.

**解释**

上面的内容本质上是采用由 perdiod 分隔的最后两个字符串，并将您重定向到新找到的文件夹。

* * *

**从技术角度来看：**

此正则表达式使用`if then|else`模式。如果`1`找到，则执行`2`else do `3`。

*做一个测试，然后根据文本的结果选择两个选项之一`(?(?=[a-z0-9-_]+.[a-z0-9-_]{2,}$).+|[a-z0-9-_]+.[a-z0-9-_]{2,}$)`*

1.  `(**IF**)`断言下面的正则表达式可以匹配，从这个位置开始（正前瞻）`(?=[a-z0-9\-\_]+\.[a-z0-9\-\_]{2,}$)`
    *   匹配下面列表中的单个字符`[a-z0-9\-\_]+`
        *   一次和无限次之间，尽可能多次，按需回馈（贪婪）`+`
        *   介于“a”和“z”之间的字符`a-z`
        *   介于“0”和“9”之间的字符`0-9`
        *   一个人物`\-`
        *   一个人物`\_`
    *   匹配字符“.” 字面上地`\.`
    *   匹配下面列表中的单个字符`[a-z0-9\-\_]{2,}`
        *   在 2 次和无限次之间，尽可能多次，根据需要回馈（贪婪）`{2,}`
        *   介于“a”和“z”之间的字符`a-z`
        *   介于“0”和“9”之间的字符`0-9`
        *   一个人物`\-`
        *   一个人物`\_`
    *   断言字符串末尾的位置（或字符串末尾的换行符之前，如果有的话）`$`
2.  `(**THEN**)`如果测试成功，匹配下面的正则表达式`.+`
    *   匹配任何不是换行符的单个字符`.+`
    *   一次和无限次之间，尽可能多次，按需回馈（贪婪）`+`
3.  `(**ELSE**)`如果测试失败，如果测试成功，匹配下面的正则表达式`[a-z0-9\-\_]+\.[a-z0-9\-\_]{2,}$`
    *   匹配下面列表中的单个字符`[a-z0-9\-\_]+`
    *   一次和无限次之间，尽可能多次，按需回馈（贪婪）`+`
    *   介于“a”和“z”之间的字符`a-z`
    *   介于“0”和“9”之间的字符`0-9`
    *   一个人物`\-`
    *   一个人物`\_`
    *   匹配字符“.” 字面上地`\.`
    *   匹配下面列表中的单个字符`[a-z0-9\-\_]{2,}`
    *   在 2 次和无限次之间，尽可能多次，根据需要回馈（贪婪）`{2,}`
    *   介于“a”和“z”之间的字符`a-z`
    *   介于“0”和“9”之间的字符`0-9`
    *   一个人物`\-`
    *   一个人物`\_`
4.  断言字符串末尾的位置（或字符串末尾的换行符之前，如果有的话）`$`

* * *

**测试套件：**

```
a.bc
ab.cd
abc.def
ab.cd.ef
12.34
12.34.56
1.2.3.4.5.67
cnn.com
no_country.for.old.men 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:46:38.137

您有多种方法来管理此任务。在 apache httpd 网站上什至有一个[专门的文档页面。](http://httpd.apache.org/docs/current/vhosts/mass.html)

这导致了几种方法：

*   [mod_rewrite（专用页面）](http://httpd.apache.org/docs/current/rewrite/vhosts.html)，瑞士刀，但在我看来，这会导致一些神秘的语法和奇怪的行为
*   [mod_vhost_alias](http://httpd.apache.org/docs/current/mod/mod_vhost_alias.html)，当然是设置简单虚拟主机的最简单方法（就像您通常使用的一样简单）

对于更复杂的虚拟主机，您应该检查[mod_macro](http://www.cri.ensmp.fr/~coelho/mod_macro/)，一个很棒的模块。使用此模块，您可以编写带有多个参数的虚拟主机模板（不仅是域和文档根目录，您可以考虑的任何变量），然后只需添加一行调用该宏并带有每个虚拟主机的所有参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:44:57.187

我会编写一个小脚本来从域/站点列表中生成虚拟主机配置文件，将所有虚拟主机配置文件放在一个单独的目录中，然后在我的 httpd.conf 中的 Include 指令中使用以包含所有配置文件在那个目录中。

# python - Why am i getting different results in the test case?

> ID：15321265
> 
> 赞同：-1
> 
> 时间：2013-03-10T10:32:05.830
> 
> 标签：python, function, testing, case, words

I have a function that yields different results compared to what they are supposed to yield . This is for a scrabble game in python. Here's the method - the functions and their various types:

```
num = 0
length = (int(len(hand))/2) - 1
print('Current Hand: '),
print(displayHand(hand))

while (len(hand)>0):

    lettersGuessed = raw_input('Enter word, or a "." to indicate that you are finished: ')
    word= lettersGuessed

    if (isValidWord(word, hand, wordList)==False):
        print("Invalid word, please try again."+'\n')
    if (isValidWord(word, hand, wordList)==True):
        num += getWordScore(word, n)
        length -= 1
        updateHand(hand, word)
        print('"'+word+'"'+" earned " +str(getWordScore(word, n))+" points. "+" Total: "+str(num)+'\n')
        print('Current Hand: '),
        print(displayHand(hand))

    if (isValidWord(word, hand, wordList)==True):
        num += getWordScore(word, n)
        length -= 1
        updateHand(hand, word)
        print('"'+word+'"'+" earned " +str(getWordScore(word, n))+" points. "+" Total: "+str(num)+'\n')
        if length>=1: 
            print('Current Hand: '),
            print(displayHand(hand))
    if (isValidWord(word, hand, wordList)==True):
        num += getWordScore(word, n)
        length -= 1
        updateHand(hand, word)
        print('"'+word+'"'+" earned " +str(getWordScore(word, n))+" points. "+" Total: "+str(num)+'\n')

         #   print('Current Hand: '),
          #  print(displayHand(hand))
        if (length==0)&(isValidWord(word, hand, wordList)==False):
            print("Run out of letters. Total score: "+str(num))

    if (length==0):
        print("Run out of letters. Total score: "+str(num))
        break;
    if (length==0)&(isValidWord(word, hand, wordList)==True):
        print("Run out of letters. Total score: "+str(num))
        break;
    if (lettersGuessed =="."):
        print("Goodbye! Total score: "+str(num))
        break; 
```

Here are the test cases that were done. Here's a test case that is supposed to result from the above output but it doesn't.

Can anyone please see what is wrong with my code?

Function Call:

```
wordList = loadWords()
playHand({'w':1, 's':1, 't':2, 'a':1, 'o':1, 'f':1}, wordList, 7)
Output:
  Current Hand:  a s t t w f o
  Enter word, or a "." to indicate that you are finished: tow
  "tow" earned 18 points. Total: 18 points

  Current Hand:  a s t f
  Enter word, or a "." to indicate that you are finished: tasf
  Invalid word, please try again.

  Current Hand:  a s t f
  Enter word, or a "." to indicate that you are finished: fast
  "fast" earned 28 points. Total: 46 points. 

  Run out of letters. Total score: 46 points. 
```

Instead of it saying `Run out of letters. Total score: 46.` it says the following:

```
Current Hand: 
None
Run out of letters. Total score: 46 
```

how do I remove the code:

```
Current Hand:
None 
```

Can someone please copy my code and put in the letters in the hands for the various test cases please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:07:55.660

问：

> 如何删除代码：当前手牌：无

A: 在第三行，你打印：`Current Hand:`不管你有没有手。使该代码有条件（就像您在其他地方一样）您的手是否`None`存在。

或使用：

```
if length>=1 and hand is not None: 
        print('Current Hand: '),
        print(displayHand(hand)) 
```

# ruby - Encryption of sensitive data - DataMapper + Sinatra

> ID：15321266
> 
> 赞同：2
> 
> 时间：2013-03-10T10:32:07.933
> 
> 标签：ruby, security, encryption, sinatra

All the time I read about web services that defend user data by encrypting everything. In case of theft of the database, everything is safe (provided we assume all the usual stuff of cryptography).

I'm playing with a small Sinatra application (not really planning to launching it, it's more for an educational purpose) using the DataMapper ORM on top of Sqlite. I implemented basic user authentication (hashing and salting...all the usual stuff, in short) and I am happy with it.

The fact is that the core of the application requires personal information about the user: weights and other bodily measurements (which can be without any doubt considered personal and sensitive data, which people might not want to be public). So I'm wondering, how can I safely store that data? In the application everything is accessed only by the proper user (although being quite a beginner in this things and having coded almost everything by hand, I'm quite sure there are a lot of security bugs..but as I said I'm not really planing to do anything with it).

I thought about encrypting it using the user password and decrypting it after successfull authentication, but then what if the password is forgotten? What if the password is changed? I read (here on SO) that for these reasons it's best not to do it in this way.. but then how can it be done?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-21T07:28:28.633

您可以执行 a`gem install attr_secure`然后对 ruby​​ 对象执行以下操作：

设置环境的 ATTR_SECURE_SECRET，因此在应用程序中执行 ENV["ATTR_SECURE_SECRET"] 即可。此外，为加密值设置/更改任何表列，以便它们可以保存长的加密值。

现在您可以执行此操作（来自 attr_secure 自述文件的示例）：

```
class Report < ActiveRecord::Base
  attr_secure :secret_value
end

r = Report.new
r.secret_value = "ThisIsATest"
r.save
=> #<Report id: 116, secret_value: "EKq88AMFeRLqEx5knUcoJ4LOnrv52d7hfAFgEKMoDKzqNei4m7k...">

r = Report.find(116)
r.secret_value
=> "ThisIsATest" 
```

您可以在以下位置阅读更多信息：[https ://github.com/neilmiddleton/attr_secure](https://github.com/neilmiddleton/attr_secure)

# html - 有没有办法重新利用 SVG 文件？

> ID：15321267
> 
> 赞同：2
> 
> 时间：2013-03-10T10:32:09.103
> 
> 标签：html, svg

我想知道有没有办法重新调整 SVG 文件的用途？

我的意思是，我的标头区域中有我的徽标 SVG 文件，整个设置为黑色，我能否在页脚区域中使用完全相同的文件但颜色不同？还是我必须为此创建另一个 SVG 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:11:02.873

SVG 是 XML，因此它可以“按设计”重新利用。正如@halfer 和@Kroltan 已经指出的那样，您可以使用服务器端语言来更改徽标颜色。

如果您无法访问服务器端，您还可以使用客户端脚本甚至 XSLT 来执行此操作。

将此线程视为初学者...[使用 javascript 更改 SVG 图像颜色](https://stackoverflow.com/questions/9872947/changing-svg-image-color-with-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:28:46.380

假设您将 SVG 嵌入到 SVG 标签中（而不是`img`标签中），您的 html 看起来有点像：

```
<header>
  <svg xmlns="http://www.w3.org/2000/svg">
     <path d="..." class="logo_fill">
  </svg>
<header>

<footer>
  <svg xmlns="http://www.w3.org/2000/svg">
     <path d="..." class="logo_fill">
  </svg>
<footer> 
```

然后，在您的 CSS 中，您可以声明：

```
header svg .logo_fill {
    fill: red;
}

footer svg .logo_fill {
    fill: gray;
} 
```

# sql - 在相同的 sqlconnection 但不同的 sql 命令上启动两个 SqlDependency

> ID：15321268
> 
> 赞同：2
> 
> 时间：2013-03-10T10:32:16.673
> 
> 标签：sql, sqlcommand, service-broker, sqldependency

我构建了一些服务，在启动时打开两个线程，每个线程都使用相同的 sql 连接启动 SqlDependency，但**命令不同**。

这是可能的？它似乎可以工作，但是当on change事件需要唤醒它时，它不会。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:03:05.767

是的。您可以在一个或多个 SqlConnection 对象上提交任意数量的要通知的 SqlCommand，它们具有相同或不同的 SQL 文本（查询）。

# visual-studio - Sharing a class between two Visual Studio projects

> ID：15321270
> 
> 赞同：1
> 
> 时间：2013-03-10T10:32:29.427
> 
> 标签：visual-studio, visual-studio-2012, projects-and-solutions

I was looking for some help with sharing classes between 2 seperate projects in VS2012.

I have added a new project called TaxiRouteModel and added a reference to it from my 2 other projects in the solution. Which seems to work just great. I no longer have to maintain 2 separate projects.

But the class library which is shared by both web projects will never be published to the website and the 2 web projects are published to 2 separate places.

Once the websites have been published will they still be able to reference the class library?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:38:16.897

是的。

编译网站时，DLL 会从库项目复制到`bin`网站项目的文件夹中，因此当网站发布时，它也将具有库项目中的 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:38:40.203

是的。只要 DLL 在 bin 文件夹中可用

# ruby-on-rails-3 - 使用 before_create 在数据库中自动创建相关对象

> ID：15321273
> 
> 赞同：0
> 
> 时间：2013-03-10T10:33:11.167
> 
> 标签：ruby-on-rails-3, activerecord, associations

在我的应用程序中，我有一个 Question 模型和一个 QuestionResult 模型。它们通过 Question has_one QuestionResult 相关联，我试图让 Rails 在创建 Question 条目时自动创建其相关的 QuestionResult 条目。

这是我在问题模型中尝试过的：

```
before_create :create_result_record_and_populate_difficulty

has_one :question_result, :dependent => :destroy

def create_result_record_and_populate_difficulty
  self.build_question_result(:current_difficulty => initial_difficulty)
end 
```

初始难度只是 Question 模型的一个属性，我用它来设置相关 QuestionResult 模型中的当前难度。我知道正在调用该方法，因为我在该方法中放置了一个“raise”语句，并且当我运行“rake db:seed”添加一些问题时它会触发异常。

但是，即使 db 播种成功，也不会在 db 中找到 QuestionResult 条目。

这应该做的方式有什么问题吗？请帮助启发我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:08:00.423

您正在使用一种`build`构造新对象而不将其保存到数据库的方法。尝试：

```
def create_result_record_and_populate_difficulty
  self.create_question_result(:current_difficulty => initial_difficulty)
end 
```

create 方法实际上将新记录插入到数据库中。对于 has_one 关系，ActiveRecord 提供了一个 create 和一个 build 方法。请参阅[http://guides.rubyonrails.org/association_basics.html#has_one-association-reference](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)

# android - 如何根据屏幕分辨率和大小调整图像视图的大小

> ID：15321275
> 
> 赞同：0
> 
> 时间：2013-03-10T10:33:28.297
> 
> 标签：android, android-imageview

我想根据屏幕分辨率和大小调整图像视图的大小。怎么做？我搜索了android开发教程..但它没用..请帮助..这是我的迷你项目..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:41:11.403

您可以尝试通过设置将图像缩放到 X、Y 坐标：

```
android:scaleType="fitXY" 
```

财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:39:38.990

默认情况下，为不同分辨率的图像`Android`维护**多个**文件夹。这背后的原因是应用程序将在其上运行的 Android 设备的分辨率。

*   **hdpi** - 为 Android 宽屏集或更高分辨率的 Android 手机维护图像。

*   **ldpi** - 用于降低图像质量。

*   **mdpi** - 用于中等图像支持。

*   **xhdi** - 具有最大分辨率的设备的图像文件夹。

Android OS 将通过检查兼容设备及其分辨率来选择图像本身。希望这对您的事业有所帮助。

# java - javax.crypto.BadPaddingException：数据散列错误

> ID：15321279
> 
> 赞同：1
> 
> 时间：2013-03-10T10:34:09.183
> 
> 标签：java, rsa, badpaddingexception

我尝试在 java 中编写一个加密包，它包装了 javax.crypto 包并使其使用起来更舒适。所以我实现了一个只包装 javax.crypto 的 RSACore 类。然后我实现了两个类 RSAEncoder 和 RSADecoder 来隐藏 javax.crypto.Cipher 和它的启动。

现在我的问题是：我已经为 RSACore、RSAEncoder 和 RSADecoder 编写了一些小测试。除了解码器的测试之外，所有测试都可以正常工作。当我对编码数据调用 dofinal() 时，我每次都会收到 BadPaddingException。我用谷歌搜索它，发现在大多数情况下它与错误的键有关，但我确信我只生成一对并处理它。我不知道在哪里搜索错误。作为提供者，我使用 bouncycastle，因为在使用 JCE 时，我收到一个错误，即无法使用 OAEP 进行签名以下是完整的错误消息：

```
javax.crypto.BadPaddingException: data hash wrong
at org.bouncycastle.jcajce.provider.asymmetric.rsa.CipherSpi.engineDoFinal(Unknown Source)
at javax.crypto.Cipher.doFinal(Cipher.java:2145)
at de.coding.crypto.rsa.RSACore.doFinal(RSACore.java:178)
at de.coding.crypto.rsa.RSADecoder.doFinal(RSADecoder.java:59)
at de.coding.crypto.interfaces.AbstractDecoder.doFinal(AbstractDecoder.java:49)
at de.coding.crypto.rsa.RSADecoderTest.test(RSADecoderTest.java:21)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这是测试：

```
package de.coding.crypto.rsa;

import static org.junit.Assert.*;

import java.security.KeyPair;

import org.junit.Test;

public class RSADecoderTest
{
    @Test
    public void test()
    {
        try
        {
            KeyPair kp = RSACore.generateKeys();
            String str = "Hello world! This is me. Life should be fun for everyone.";
            RSAEncoder encoder = new RSAEncoder(kp.getPublic());
            byte[] encoded = encoder.doFinal(str.getBytes());
            RSADecoder decoder = new RSADecoder(kp.getPrivate());
            byte[] decoded = decoder.doFinal(encoded);//<-------------------BadPaddingException
            assertTrue(str.getBytes().length == decoded.length);
            int size = decoded.length;
            for (int i=0; i<size; i++)
            {
                assertTrue(decoded[i] == str.getBytes()[i]);
            }
        }
        catch (Exception e)
        {
            fail();
        }
    }
} 
```

你看到有什么逻辑错误吗？我也可以发布编码器、解码器和核心，但那是很多行。感谢您的阅读和帮助！

RSA编码器：

```
public RSAEncoder(PublicKey key) throws InvalidKeyException
{
    super();
    cipher = RSACore.initEncodeMode(key);
}

public byte[] doFinal()
{
    try
    {
        buffer.add(RSACore.doFinal(cipher));//buffer is a LinkedList<byte[]>
        return clearBuffer();
    }
    catch (IllegalBlockSizeException e)
    {
        throw new RuntimeException(e);
    }
    catch (BadPaddingException e)
    {
        throw new RuntimeException(e);
    }
}

protected byte[] clearBuffer()
{
    byte[] ret = new byte[getBufferSize()];
    int index = 0;
    for (byte[] b : buffer)
    {
        if (b != null)
        {
            for (int i=0; i<b.length; i++)
            {
                ret[index] = b[i];
            }
        }
    }
    buffer.clear();
    return ret;
}

public byte[] doFinal(byte[] b, int offset, int length)
{
    if (length > RSACore.KEYSIZE-11)
    {
        update(b, offset, length);
        return doFinal();
    }
    else
    {
        try
        {
            buffer.add(RSACore.doFinal(cipher, b, offset, length));
            return clearBuffer();
        }
        catch (IllegalBlockSizeException e)
        {
            throw new RuntimeException(e);
        }
        catch (BadPaddingException e)
        {
            throw new RuntimeException(e);
        }
    }
} 
```

RSADecoder（除 condtructor 外相同）：

```
public RSADecoder(PrivateKey key) throws InvalidKeyException
{
    cipher = RSACore.initDecodeMode(key);
} 
```

RSA核心：

```
public byte[] doFinal(byte[] b)
{
    return doFinal(b, 0, b.length);
}

public static byte[] doFinal(Cipher cipher, byte[] msg, int offset, int length) throws IllegalBlockSizeException, BadPaddingException
{
    byte[] ret = cipher.doFinal(msg, offset, length);
    if (ret == null)
    {
        return new byte[0];
    }
    return ret;
}

public static Cipher initEncodeMode(Key key) throws InvalidKeyException
{
    try
    {
        Cipher cipher = Cipher.getInstance(ALGORITHMDETAIL, PROVIDER);
        cipher.init(Cipher.ENCRYPT_MODE, key);
        return cipher;
    }
    catch (NoSuchAlgorithmException e)
    {
        throw new RuntimeException(e);
    }
    catch (NoSuchPaddingException e)
    {
        throw new RuntimeException(e);
    }
    catch (NoSuchProviderException e)
    {
        throw new RuntimeException(e);
    }
}

public static Cipher initDecodeMode(Key key) throws InvalidKeyException
{
    try
    {
        Cipher cipher = Cipher.getInstance(ALGORITHMDETAIL, PROVIDER);
        cipher.init(Cipher.DECRYPT_MODE, key);
        return cipher;
    }
    catch (NoSuchAlgorithmException e)
    {
        throw new RuntimeException(e);
    }
    catch (NoSuchPaddingException e)
    {
        throw new RuntimeException(e);
    }
    catch (NoSuchProviderException e)
    {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:32:24.890

我不知道你为什么需要一个链表，但该`clearBuffer()`方法显然是错误的：

```
protected byte[] clearBuffer() {
    byte[] ret = new byte[getBufferSize()];
    int index = 0;
    for (byte[] b : buffer)
    {
        if (b != null)
        {
            for (int i=0; i<b.length; i++)
            {
                ret[index] = b[i];
            }
        }
    }
    buffer.clear();
    return ret;
} 
```

除了第一个字节，所有其他字节都为 0，因为`index`在这个循环中永远不会改变。

# php - php中的多个随机数不重复？

> ID：15321280
> 
> 赞同：0
> 
> 时间：2013-03-10T10:34:11.277
> 
> 标签：php, random

我需要四个不重复的多个随机数。所以我拿了一个数组。你能帮我在哪里做错了吗？我有 24 个问题以随机顺序出现，每页需要 4 个问题，为此我采用了一个数组“$questions”并最初将 25 个插入其中。然后，当我得到一个不在数组中的随机数时，我会用随机数替换那个特定的索引。我哪里做错了？

```
<?php
$questions = array(0);
for ($i = 0; $i < 24 ; $i++) {
$questions[$i]= ",";
}

$a="1";
$b="2";
$c="3";
$d="4";
//$a=rand(0, 23);
while(!in_array($a=rand(0, 23), $questions)) {
    $replacements = array($a => $a);
    $questions = array_replace($questions, $replacements);
    $max = sizeof($questions);
    if ($max==4) {
        break;
    }
    echo "<br>a=".$a."<br>";
    for ($i = 0; $i < 24 ; $i++) {
        echo $questions[$i];
    }
}
//echo "a=".$a."b=".$b."c=".$c."d=".$d;
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T10:42:06.213

我建议将完整的数组/集合随机化一次，然后将其分解为块并存储这些块（例如，在 $_SESSION 中）。

```
<?php
$questions = data(); // get data
shuffle($questions); // shuffle data
$questions = array_chunk($questions, 4); // split into chunks of four
// session_start();
// $_SESSION['questions'] = $questions;
// on subsequent requests/scripts do not re-create $questions but retrieve it from _SESSION

// print all sets
foreach($questions as $page=>$set) {
    printf("questions on page #%d: %s\n", $page, join(', ', $set));
}

// print one specific set
$page = 2;
$set = $questions[$page];
printf("\n---\nquestions on page #%d: %s\r\n", $page, join(', ', $set));

// boilerplate function: returns example data
function data() {
    return array_map(function($e) { return sprintf('question #%02d',$e); }, range(1,24));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T10:40:29.313

你可以这样做：

```
<?php

$archive = array();
$span = 23;
$amount = 4;
$i = 0;
while (true) {
    $number = rand(0, $span);             // generate random number
    if (in_array($number, $archive)) {    // start over if already taken
        continue;
    } else {
        $i++;
        $archive[] = $number;             // add to history
    }
    /*
      do magic with $number
    */
    if ($i == $amount) break;             // opt out at 4 questions asked
} 
```

# c# - 插入符号位置/位置在任何应用程序内

> ID：15321288
> 
> 赞同：4
> 
> 时间：2013-03-10T10:34:51.027
> 
> 标签：c#, .net, windows, mouse

我正在用 C#做一个**通用的文本自动完成器应用程序。**所以我需要在当前活动的窗口中获取插入符号的位置（可能是记事本、Ms Word 等）。我应该怎么做才能获得插入符号的 X、Y 坐标？我需要它在用户键入时在光标（插入符号）下显示建议。

我的程序在后台运行。它应该在当前活动的任何窗口中检测插入符号的存在并获取插入符号的实时位置。每当用户输入文本时，位置值都应该更新。

我不知道该怎么做所有这些。这一切都可能使用 C# 吗？还是我应该更改编程语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:50:34.947

语言选择在很大程度上与这个问题无关。文本输入本身就很困难。

解决您的问题将很困难，因为应用程序经常使用自定义或高度自定义的控件来编辑文本。记事本使用标准的编辑控件，因此您可以使用 EM_GETSEL 消息检索字符中的插入符号位置，并使用 EM_POSFROMCHAR 将其转换为屏幕位置。标准 Rich Edit 控件存在类似的消息。但是，对于 Microsoft Word，您可能必须使用 COM 调用它并找出插入符号的位置。其他应用程序将具有其他 API，您必须对其进行研究、逆向工程、支持和测试。而这仅仅是个开始——我希望你会想要检索插入符号周围的文本并修改它，和/或显示一个 UI 来为用户提供选择。这将是一个主要的 PITA，所以我会研究 IME API，看看那里是否有合适的东西。应该有，因为东亚输入模式本身就是一种自动完成器。IME 的优点是它不依赖于目标控件。

# performance - MongoDB - 不同的性能 - 不如预期

> ID：15321289
> 
> 赞同：2
> 
> 时间：2013-03-10T10:34:53.090
> 
> 标签：performance, mongodb, indexing, distinct

我已经阅读了这个“错误”报告 - [https://jira.mongodb.org/browse/SERVER-4095](https://jira.mongodb.org/browse/SERVER-4095)

但是，它并不能完全解释为什么“distinct”不只扫描 B 树索引的顶部，它只有 4 个条目。这就是我所做的：

```
run Distinct

Result
"n" : 535216,
            "nscanned" : 535216,
            "nscannedObjects" : 0,
            "timems" : 1871,
            "cursor" : "BtreeCursor path_1"

db.logs.dropIndex("path_1")

run Distinct

Result
            "n" : 535216,
            "nscanned" : 535216,
            "nscannedObjects" : 535216,
            "timems" : 1426,
            "cursor" : "BasicCursor" 
```

**有人可以尝试准确解释为什么会发生这种情况吗？** 内存开销的解释并没有让我真的很开心。如果你有一个顶层有 4 个元素的 B-Tree 索引，那为什么会有问题呢？非常感谢建设性的反馈！

# android - 在单独的线程中使用位图

> ID：15321290
> 
> 赞同：1
> 
> 时间：2013-03-10T10:34:57.220
> 
> 标签：android, multithreading, memory, bitmap

我正在一个项目中工作，该项目可以打开图像，使用它并保存。该图像可以是一个非常大的图像，例如相机图片，因此我正在做几件事以确保不会出现 OutOfMemory 异常（基本上出现在这里[http://developer.android.com/training/displaying-bitmaps/load-位图.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)）：

*   在不实际打开图像的情况下执行图像的所有宽度和高度测量，使用：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeFile(image_path, options); 
```

*   打开的图像已经调整大小（*inSampleSize*）并使用`Bitmap.Config.RGB_565`（每像素 2B）除了`Bitmap.Config.ARGB_8888`（每像素 4B）。

*   使用临时文件在内存中没有很多位图（实际上我只有一个大多数情况，应用掩码时最多 2 个）。

*   使用后回收每个位图

*   当在 a 中显示结果时`ImageView`，打开它已经缩放到屏幕尺寸。

但是，在某些情况下，当一次只加载一个位图来完成某项工作（旋转图像、微调调整大小、应用蒙版等）是不可能的，并且主要是在中等范围或旧设备中，我获得*OutOfMemory 异常*。

我已经开始添加所有在后台作业中工作的图像，如下所示（好的，我是新手）：

```
ProgressDialog dialog = ProgressDialog.show(this, null, "Please wait", true, false);
new Thread(new BackgroundJob(this, new Runnable() {
    public void run() {
        ImageHelper.ImageManipulation(image_path); 
    }
}, dialog, new Handler())).start(); 
```

我希望通过这个新线程获得一个完全可用的内存空间来执行图像处理任务，但我发现应用程序出于相同的原因在相同的点崩溃。线程被创建为子进程（好的），但共享最大堆和当前使用的内存......

有没有办法打开一个线程来执行具有更多内存的图像操作（例如，释放活动本身使用的内存，因为它是另一个线程）？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:44:32.073

在 Android 设备上的内存管理方面存在很多问题——尤其是当您将不同的设备混入其中时。去年我在我制作的不同 Android 应用程序中浪费了内存管理，直到我找到了[Android-BitmapCache 项目](https://github.com/chrisbanes/Android-BitmapCache)，我才取得了一些重大进展。

我建议所有对 Android 内存管理感兴趣的人[下载并检查 Android-BitmapCache 项目](https://github.com/chrisbanes/Android-BitmapCache)，因为它包含一些很棒的代码——所以第一步就是这样做。

我建议您的第二步是观看[Google I/O：Android 应用程序的内存管理，](http://dubroy.com/blog/google-io-memory-management-for-android-apps/)这样您就可以开始准确地测试您的应用程序使用了多少内存，并跟踪确切的内存使用量开始增加的位置。说到这一点 - 我不明白你为什么认为你会得到“新线程的完全可用内存空间” - 你从你的 Android 应用程序产生的所有线程都将在同一个进程下，所以哪个确切并不重要当涉及内存使用时，线程正在运行一些任务。

And finally, you can fix problem temporary by using [android:largeHeap="true"](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap), but I think you should definitely aim toward more robust solution. Keep in mind that it's possible that on some devices you app will simply not work (24MB heap and you want to load image that's 3000x3000), but with applying all best practices you can find in [project I've linked](https://github.com/chrisbanes/Android-BitmapCache) I'm sure you'll be much better off.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:44:00.680

您可以使用池线程来执行多个线程，与为每个线程创建新的 Thread 对象相比，它的“昂贵”方式更少。

本指南可能会有所帮助：http: [//developer.android.com/training/multiple-threads/create-threadpool.html](http://developer.android.com/training/multiple-threads/create-threadpool.html)

或者这个 [http://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

# lua - 如何在 Corona (Lua) 中创建 enterframe？

> ID：15321297
> 
> 赞同：0
> 
> 时间：2013-03-10T10:35:50.293
> 
> 标签：lua, coronasdk

我还有这个不错的汽车课：

```
local car={};
local car_mt = { __index=car };

local this;
function car.new(_x, _y)
    local ncar=
    {
        img=display.newImageRect("test_car.png",50,120,true);
        x=0;
        y=0;
        main_frame=function(self)
            self.img.x=self.x;
            self.img.y=self.y;
        end
    }
    function ncar:set()
        self.x=_x;
        self.y=_y;
        Runtime:addEventListener("enterFrame",self.main_frame(self));
    end
    ncar:set();
    return setmetatable(ncar,car_mt);
end
return car; 
```

我这样称呼它：

```
function scene:enterScene( event )
    local group = self.view
    physics.start();
    local car1=pcar.new(200,200);

end 
```

它工作正常，例如，它给了我一个错误“断言失败”

```
> getOrCreateTable 
> addEventListener 
> addEventListener
> Runtime:addEventListener("enterFrame",self.main_frame(self)); 
```

在显示器上，一切似乎都很好。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:17:10.040

终于通过这个解决了：

```
 main_frame=function(self)
        return function(event)
            self.img.x=self.x;
            self.img.y=self.y;
        end
    end 
```

# php - 正确编码和解码 json 结果（php 到 js）

> ID：15321299
> 
> 赞同：0
> 
> 时间：2013-03-10T10:36:35.473
> 
> 标签：php, javascript, jquery, ajax, json

我正在尝试将我的数组结果编码为 json 并将它们传递给 javascript 中的 ajax 成功事件。

```
PHP

    $results = array(
        "time1" => 1,
        "time2" => 2,

    );
    echo json_encode($results); 
```

JAVASCRIPT/JQUERY

```
 $.ajax({
             type: "POST",
             url: "actions/myphp.php",
             data: PassArray,
             dataType: 'json',
             beforeSend: function (html) { // this happens before actual call
             //    alert(html);
             },
             success: function (html) { 
                 // $("#loginoutcome").text(html);
                // alert(html);
                 var obj  = jQuery.parseJSON(html ); 
                // Now the two will work
                $.each(obj, function(key, value) {
                    alert(key + ' ' + value);
                });

             }, 
```

将 JQUERY.parseJSON 留在那里会抛出一个 json 解析意外字符，我认为我不需要它，因为我在上面的 dataType: 'json' 中指定了它？.. 但是我怎样才能检索这些值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:39:31.810

当您将数据类型作为 JSON 传递时，jQuery 会将 JSON 对象返回给您，您无需再解析它。

所以让它像这样：

```
success: function (obj) { 
            $.each(obj, function(key, value) {
                alert(key + ' ' + value);
            });

         }, 
```

如果你知道它的 time1 或 time2，你可以这样做：

```
success: function (obj) { 
            alert(obj.time1);
            alert(obj.time2);
         }, 
```

# javascript - 循环遍历数组的有效方法？

> ID：15321304
> 
> 赞同：3
> 
> 时间：2013-03-10T10:37:22.913
> 
> 标签：javascript

我想知道是否有更有效的方法来循环数组。出于我的目的，该数组包含图像源。当显示最后一张图像并按下下一个按钮时，它会回到第一张图像。如果在第一个图像上按下前一个按钮，它会循环到最后一个图像。

这是我能够想出的，但我觉得有一种更有效的方法来解决它。

```
var marker = 0;

// Circle through an array.
function moveMarker(array, action, direction) {
    if (!direction) {
        if(marker == array.length - 1)
            marker = -1;
        marker += 1;
        action();
    }

    else {
        if (marker == 0)
            marker = array.length;
        marker -=1;
        action();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T10:41:38.033

是的，您可以使用`%`模运算符：

```
var marker = 0;

// Circle through an array.
function moveMarker(array, action, direction) {
    if (!direction) {
        marker = (marker + 1) % array.length;
    }
    else {
        marker = (marker + array.length - 1) % array.length;
    }
    action();
} 
```

甚至：

```
var marker = 0;

// Circle through an array.
function moveMarker(array, action, direction) {
    marker = (marker + array.length + (direction ? -1 : 1)) % array.length;
    action();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:49:12.677

首先，您可以使用数学简化 if/else，并使用模数删除边界检查。

```
var marker = 0;

// Circle through an array.
function moveMarker(array, action, direction) {
    var increment = direction ? 1 : -1;
    marker = Math.modulo(marker + increment, array.length);        
    action();
} 
```

但是，我建议将标记合并到对象中，而不是使用全局变量：

```
function markerMover(array, action, direction) {
    var marker = 0;
    function next() {
        var increment = direction ? 1 : -1;
        marker = Math.modulo(marker + increment);        
        action();
    }
}
var mover = new markerMover(someArray, someAction, someDirection);
mover.next()
// or even
var intervalHandle = setInterval(mover.next, 25); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:49:14.790

预先声明一个局部变量来处理数组的最后一个位置，然后使用[三元运算符](http://javascript.about.com/od/byexample/a/ternary-example.htm)来确定应该如何处理`marker`. 三元运算符基本上允许您在执行操作时在同一行上执行条件。之后，您应该只需要一次调用`action()`.

```
function moveMarker(array, action, direction) {
    var a = array.length - 1;

    if (!direction) {
        marker += (marker === a) ? -(a) : 1;
    } else {
        marker += (marker === 0) ? (a) : -1;
    }

    action();
}; 
```

额外提示：您可能还想考虑将这些函数（即`moveMarker()`和`action()`）作为方法放入单个对象中，这样您就不会声明和更改像`marker`. 但是在不知道您的其余代码的情况下，我不知道这种方法是否适合您。

# java - 如何有效地使用准备好的语句？

> ID：15321305
> 
> 赞同：0
> 
> 时间：2013-03-10T10:37:25.050
> 
> 标签：java, jakarta-ee, jdbc

```
import java.sql.*;
public class Login
{
    public static void main(String args[]) throws SQLException
    {
        Connection con = null;
        PreparedStatement stmt = null;
        Statement st = null;
        try {
            Driver driver = new oracle.jdbc.driver.OracleDriver();
            DriverManager.registerDriver(driver);
            System.out.println("coneecting to the database:");
            con = DriverManager.getConnection("driverURL","usrr","pass");
            System.out.println("creating statement");
            String sql = "Update abhi SET age = ? WHERE id = ?";
            stmt = con.prepareStatement(sql);
            stmt.setInt(1, 35);
            stmt.setInt(2,102);
            int rows = stmt.executeUpdate();
            S.O.P("rows updated"+rows);
            stmt.close();
            String sql2;
            sql2 = "select * from abhi";
            st = con.createStatement();
            ResultSet rs = st.executeQuery(sql2);
            while(rs.next())
            {
                System.out.println("hi");
                int age = rs.getInt("age");
                System.out.println("age is"+age);
            }
            rs.close();
            stmt.close();
            con.close();
        }
        catch(SQLException e) {
            e.printStackTrace();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        finally {
            try {
                if (st != null)
                    st.close();
            }
            catch(Exception e) {
                 // nthing to do
            }
            try {
                if(con != null)
                    con.close();
            }
            catch (Exception e) {
                e.printStackTrace();
            }
        }
        System.out.println("good bye johny");
    }
} 
```

这是我的代码，它运行良好，没有任何错误......但是在我的数据库中，它的 nt 更新值我无法理解为什么有任何机构帮助我解决为什么它的 nt 更新 id 为 102 的年龄值 .. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:45:17.683

在甲骨文中，

默认的数据库事务模式是两阶段提交。

即插入或更新数据后，

您应该明确提交操作，以将数据持久保存在您的 oracle 数据库中。

但是在这里，我没有在您的代码中看到任何提交。

你可以在你的代码中检查这个问题吗？

你应该使用 -

`con.setAutoCommit(false);`在代码的开头

和

```
con.commit(); to commit the data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:41:30.670

尝试使用

```
con.setAutoCommit(false);

con.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T14:08:56.040

正如其他人提到的，尝试像这样使用**连接提交**。

```
import java.sql.*;
public class Login
{
public static void main(String args[]) throws SQLException
{
    Connection con = null;
    PreparedStatement stmt = null;
    Statement st = null;
    try
    {
        Driver driver = new oracle.jdbc.driver.OracleDriver();
        DriverManager.registerDriver(driver);
        System.out.println("coneecting to the database:");

    con = DriverManager.getConnection("driverURL","usrr","pass");       
    con.setAutoCommit(false);
    System.out.println("creating statement");

    String sql = "Update abhi SET age = ? WHERE id = ?";

    stmt = con.prepareStatement(sql);

    stmt.setInt(1, 35);

    stmt.setInt(2,102);

    int rows =    stmt.executeUpdate();

    S.O.P("rows updated"+rows);

    stmt.close();
    con.commit();
    String sql2;

    sql2 = "select * from abhi";

    st = con.createStatement();

    ResultSet rs = st.executeQuery(sql2);

    while(rs.next())
    {
        System.out.println("hi");

        int age = rs.getInt("age");

        System.out.println("age is"+age);
    }

                 rs.close();

    stmt.close();

    con.close();
}

catch(SQLException e)
{
    e.printStackTrace();
}
catch (Exception e)
         {
    e.printStackTrace();    
}
finally
{
    try
    {
        if(st!=null)
            st.close();
    }

    catch(Exception e) 
    {
               // nthing to do

                 }
    try
    {
        if(con!=null)

        con.close();
    }
    catch (Exception e)
    {

                e.printStackTrace();

                 }

         }

       System.out.println("good bye johny");

        } 
```

# php - TYPO3 6.0：PHP_SCRIPT 已删除。我怎样才能解决这个问题？

> ID：15321306
> 
> 赞同：3
> 
> 时间：2013-03-10T10:37:26.050
> 
> 标签：php, typo3, typoscript

上一次密集使用 TYPO3 是几年前的事了。所以我不记得太多TYPO-Script。当我更新到 6.0 时，我发现这段代码不再有效：

```
marks.CONTENT.30 = PHP_SCRIPT
marks.CONTENT.30.file = fileadmin/db/db.php 
```

它只是插入了 db.php 的 html 输出（它执行了一些数据库请求并从中形成了一个自定义的 html/css 表）。

我怎样才能快速解决这个问题？我听说 PHP_SCRIPT 已被弃用，并且还有另一个关键字（USER），但我不知道如何使用它。请记住：我真的不再是 TYPO-Script 专家，所以请随时详细解释。;-)

谢谢！英戈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T16:42:33.380

看起来您需要一个基本扩展，正如您所提到的，它只是**USER**或**USER_INT**内容对象。

第一个缓存在页面内容中，因此，如果您的脚本输出一些**静态或很少更改的信息**，您应该考虑选择**USER**类型。

如果您有**动态数据，并且经常更改**（每次新页面加载都会带来新输出），那么您宁愿使用**USER_INT**，但请注意：每次页面加载时都会调用 USER_INT 脚本，因此您必须尽可能优化它，因为可能的。

我建议您阅读有关这两种类型用法的[基本信息。](http://docs.typo3.org/typo3cms/TyposcriptReference/ContentObjects/UserAndUserInt/Index.html)

所以，最后你需要一个 PHP 类，它的名字从 'user_' 或 'tx_' 开始，带有一个*main()*方法，它需要两个参数*$content*和*$conf*。您不会使用这些参数，但仅供参考，$content 可能包含预处理的内容，而 $conf 包含脚本所需的任何配置数据。

在*main()*内部，您创建 HTML 输出并将其返回（作为字符串）。

**在USER**的情况下，TS 部分将如下所示：

```
includeLibs.something = fileadmin/db/db.php
marks.CONTENT.30 = USER
marks.CONTENT.30 {
  userFunc = user_db->main
} 
```

对于**USER_INT**：

```
marks.CONTENT.30 = USER_INT
marks.CONTENT.30 {
  includeLibs = fileadmin/db/db.php
  userFunc = user_db->main
} 
```

**注意：**我已经为您的案例描述了肮脏但简单的方法。最好考虑使用[CONTENT](http://docs.typo3.org/typo3cms/TyposcriptReference/ContentObjects/Content/Index.html) cObject，因为它完全符合您的需要：从数据库中获取记录并以您喜欢的方式将它们输出到页面上。

# r - 为 Date 类创建一个新的加法运算符

> ID：15321308
> 
> 赞同：3
> 
> 时间：2013-03-10T10:37:42.243
> 
> 标签：r, datetime, operators

我想为 `Date`该类定义一个加法操作，以添加月份，而不是那几天。

这有效：

```
`+.Date`<- function(date,n) seq(date, by = paste (n, "months"), length = 2)[2] 
```

不幸的是，它会破坏（屏蔽）基于天数的原始添加操作。

这也有效：

```
`%+%`<- function(date,n) seq(date, by = paste (n, "months"), length = 2)[2] 
```

但它不是特定于 `Date`班级的。

可以定义一个优雅的退出。

```
`%+%`<- function(date,n) {
    if (class(date)=="Date") return (seq(date, by = paste (n, "months"), length = 2)[2])
    else stop("%+% only valid for Date + numeric")
} 
```

无论如何，理想的情况是为`%+%`定义的操作`Date`，例如`+.Date`：

```
rm("%+%")
`%+%.Date`<- function(date,n) seq(date, by = paste (n, "months"), length = 2)[2] 
```

但：

```
as.Date("2010/1/1") %+% 2
Error: could not find function "%+%" 
```

你能修`%+%.Date`好吗？我们必须重新定义类`Date`吗？

请不要为了总结几个对象而建议一些花哨的库。最好在他们的代码中分享这些想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T10:49:02.690

您只需要定义`%+%`，使其成为通用函数：

```
`%+%` <- function(x,y) UseMethod("%+%")
`%+%.Date` <- function(date,n) seq(date, by = paste (n, "months"), length = 2)[2]

as.Date("2010-01-01") %+% 2   # 2010-03-01
1 %+% 1                       # Error 
```

# php - 获取 HTML 文档中的 PHP 文件

> ID：15321315
> 
> 赞同：2
> 
> 时间：2013-03-10T10:38:31.277
> 
> 标签：php, jquery, echo

假设我有包含以下代码的 PHP 文件：

```
 <?php echo date('l, F jS, Y'); ?> 
```

这将回显日期。如何在 HTML 页面中设置此日期？我知道我可以像这样将 PHP 代码放在我的 HTML 中：

```
<body>
  <?php echo date('l, F jS, Y'); ?> 
</body> 
```

但我想要的是这样的：

```
<body>
  "The date retrieved by the file php_code.php"
</body> 
```

我必须使用 Javascript/Jquery GET 吗？或者有没有更简单更直接的方法来做到这一点？

是否可以只在文档中给出 php 文件的 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:43:12.570

当您使用[jQuery](http://api.jquery.com/jQuery.get/)时，这很容易：

```
$.get('php_code.php', function(data) {
    $('div#result').html(data);
    alert('Load was performed.');
}); 
```

**编辑：**这种方法可能会更好（基于您的跨域评论）：

### 1\. 将您的 PHP 响应包装在 javascript 回调中：

```
<?php
...
echo "callback(" . json_encode($response) . ");"
?> 
```

### 2\. 将其包含在您的 html 文件中：

2a. 加载时（将其添加到您的`head`）：

```
<script src="http://yourserver.com/php_code.php"></script> 
```

2b。或在运行时（将其添加到您的 javascript 中的任何位置）：

```
var script = document.createElement('script');
script.src = "http://yourserver.com/php_code.php";
document.body.appendChild(script); 
```

### 3.设置回调

```
function callback(data) {
    console.log(data);
} 
```

它被称为 JSONP，在使用跨域请求时实现起来要容易得多。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:46:15.533

正如你自己提到的，有两种方法可以让你的约会进入你的身体：

1.  同步
2.  异步

铂。1是通过你的例子实现的，使用PHP直接呈现HTML容器内的日期。

铂。2可以通过ex实现。Javascript。我不确定是否还有其他方法可以做到这一点，但 Javascript 无疑是赢家。然而，它可以通过多种不同的方式完成——但最简单的是 Tim van Elsloo 指出的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T10:47:23.593

做简单：[jQuery get](http://api.jquery.com/get/)

```
$.get('php_server_file.php', function(data) {
    $('body').html(data);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T10:49:55.517

这不是很好的解决方案，但这可以解决问题。

在正文中添加 div 元素。

```
 <body>
     <div id="mydiv"></div>
  </body> 
```

然后把这段代码放进去

```
 <script>
    $(document).ready(function() {
       $.get("php_code.php",function(data){
          $('.mydiv').html(data);
      });
   });
  </script> 
```

# algorithm - 删除字符串 S1 中出现在字符串 S2 中的所有字符

> ID：15321326
> 
> 赞同：1
> 
> 时间：2013-03-10T10:39:47.253
> 
> 标签：algorithm

给定两个字符串 S1 和 S2，S = S1 - S2 定义为从 S1 中取出 S2 中的所有字符后的剩余字符串。如何尽可能快地计算任何给定字符串的 S1 - S2？

例如 ：

输入：

他们是学生。

艾欧

输出：

你的标准。

我已经尝试过哈希映射，遗憾的是法官说它太慢了，但是任何解决方案都可以更快吗？

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
bool occur[300]={false};
int main()
{
    char str1[10002];
    gets(str1);
    char ch;
    while((ch=getchar())!='\n')
        occur[ch]=true;
    int i;
    for(i=0;i<strlen(str1);i++)
        if(occur[str1[i]])
            continue;
        else
            putchar(str1[i]);
    putchar('\n');
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:48:00.570

我想你应该：

1.  创建包含 S2 中所有字符的 HashSet S
2.  使用 List 在您遍历不在 S 中的 S1 时将字符附加到该列表
3.  从列表中构建字符串（Python 中的"".join(list..)）

我认为没有更快的方法..您可以将 S1 分成 N 部分并在此并行上工作 - 这是我看到的唯一优化...

至于您的代码 - 不要在循环条件下使用 strlen ！请参阅：[strlen：它是如何工作的？](https://stackoverflow.com/questions/4132849/strlen-in-c-and-c-how-does-it-work). 只需遍历所有字符，直到您获得 '\0' 字符或计算 strlen 一次并放入您在循环条件中使用的变量...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:50:49.973

如果您可以将问题限制在一个小字母（例如仅英文字符），您可以创建一个与您的字母大小相同的 bool 数组。

1 数组查找将比散列或遍历二叉树快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:09:40.097

可能最快和最简单的方法之一是使用正则表达式替换。请参阅下面的示例 python 代码。

如果不能使用正则表达式，则需要对输入字符串的每个字符进行一个循环。由于您正在处理每个字符，因此任何算法都至少是`O(n)`. 这意味着加快实现速度的唯一方法是减少检查字符是否需要复制到输出以及实际复制到输出所花费的时间。由于我不知道您使用的是什么语言，所以我将在 python 中给出一个简短的实现。`set`这使用了允许持续时间检查值是否在集合中的 python类。示例代码如下。

```
import re

def remove1(string, chars):
    return re.sub("[%s]"%chars, "", string)

def remove2(string, chars):
    chars = set(chars)
    res = ""
    for c in string:
        if c not in chars:
            res += c

    return res

import unittest

class TestRemove(unittest.TestCase):
    def test_removeVowels1(self):
        self.assertEqual("Thy r stdnts.", remove1("They are students.","aeiou"))

    def test_removeVowels1(self):
        self.assertEqual("Thy r stdnts.", remove2("They are students.","aeiou"))

if __name__=="__main__":
    unittest.main() 
```

注意：如果您使用像 C++ 这样的语言并且知道输入仅限于 8 位值，那么最快的方法是使用直接寻址；即使用字符值作为数组索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T12:12:37.023

从技术上讲，Hashmap 的解决方案是 O(n)+O(m)，`n`即句子的长度和`m`禁止字符的数量。

在我看来，这是您在决定是否保留或丢弃该字符时*必须运行的最快速度。*此外，您*必须*至少遍历所有禁止字符一次才能了解它们。

但是，我可以想象有更有效的解决方案，即更少的开销。但老实说，我想不出一个。

更新（这是最简单的，但它是 O(n*m)。但是，它可能比其他短字符串方法更快）：

```
foreach (c in sentence) 
  if (forbiddenChars.IndexOf(c) == -1) 
    Console.Write(c); 
```

# joomla - “JInstaller：：安装：找不到 Joomla XML 设置文件”：无法安装 Joomla 模板

> ID：15321329
> 
> 赞同：8
> 
> 时间：2013-03-10T10:40:02.323
> 
> 标签：joomla, joomla-extensions, joomla-template, joomla3.0

尝试安装`Joomla`模板时出现此错误：

```
Warning

JInstaller: :Install: Cannot find Joomla XML setup file 
```

它是什么文件？

我正在使用*Joomla 3*。我从 torrent 下载了一些 Joomla 模板，所有这些都显示了这个错误。它是什么 ？我下载的所有模板都可以这样。是Joomla 1.5模板不适用于Joomla 3吗？

如何安装这些模板？我在那里看到一个名为的文件`templateDetails.xml`。

*笔记：*

这是`templateDetails.xml`：[thexml.html](https://github.com/suhailgupta03/Samples/blob/master/thexml.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-29T14:01:32.930

我在浏览时发现了一些东西。

只需更改模板文件夹中的 .xml 文件即可。

将“安装”标签更改为“扩展”并将版本更改为 2.5 或更高版本……它对我有用。

一步一步的过程在下面的链接中解释

~~[http://www.techaviyal.com/jinstaller-install-cannot-find-joomla-xml-setup-file-joomla/](http://www.techaviyal.com/jinstaller-install-cannot-find-joomla-xml-setup-file-joomla/)~~（死链接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:03:12.940

Joomla 1.5 模板不能与 Joomla 3 一起使用吗？答案是**肯定**的，您不能将 Joomla 1.5 模板直接用于 Joomla 3。因为从 Joomla 1.6 开始，安装程序文件的结构已更改。您需要将您的 Joomla 1.5 模板升级到较新版本的 Joomla。要执行此操作，请参阅以下链接：

[将 Joomla 1.5 模板升级到 Joomla 2.5](http://docs.joomla.org/Upgrading_a_Joomla_1.5_template_to_Joomla_2.5)

[开发基本模板](http://docs.joomla.org/User%3aRvsjoen/tutorial/Developing_a_Template/Part_01)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:07:10.577

抱歉，一开始甚至没有看到 xml 文件。

好的，XML 文件用于 Joomla 1.5 模板，因此无法正常工作。

我已对其进行了更新，以便它现在可以用于 Joomla 3

[http://pastebin.com/1Dv6g6ip](http://pastebin.com/1Dv6g6ip)

```
<?xml version="1.0" encoding="utf-8"?>
<extension version="3.0" type="template" method="upgrade">
        <name>themza_j15_11</name>
        <version>1.0.1</version>
        <creationDate>2008-10-20</creationDate>
        <author>Themza Team</author>
        <authorEmail>templates@themza.com</authorEmail>
        <authorUrl>http://www.themza.com</authorUrl>
        <copyright>ThemZa 2008</copyright>
        <license>ThemZa TOS</license>
        <description>Computer Society</description>
        <files>
                <filename>index.php</filename>
                <filename>index.html</filename>
                <filename>templateDetails.xml</filename>
                <filename>template_thumbnail.png</filename>
                <filename>params.ini</filename>
                <filename>favicon.ico</filename>
                <filename>component.php</filename>
                <folder>css</folder>
                <folder>html</folder>
                <folder>images</folder>
        </files>
        <positions>
                <position>breadcrumb</position>
                <position>left</position>
                <position>right</position>
                <position>top</position>
                <position>user1</position>
                <position>user2</position>
                <position>user3</position>
                <position>user4</position>
                <position>debug</position>
                <position>syndicate</position>
        </positions>
        <config>
                <fields name="params">
                <fieldset name="basic">
                        <field name="pageAlignment" type="radio" default="center" label="Page Alignment" description="Page Alignment">
                        <option value="left">left</option>
                        <option value="center">center</option>
                        <option value="right">right</option>
                </field>
                <field type="spacer" />
                <field name="colorVariation" type="list" default="red" label="Color Variation" description="Color variation to use">
                        <option value="red">Red</option>
                        <option value="blue">Blue</option>
                        <option value="green">Green</option>
                        <option value="orange">Orange</option>
                </field>
                <field type="spacer" />
                <field name="hideLogo" type="radio" default="0" label="Hide Logo" description="Hide the logo.">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                </field>
                <field type="spacer" />
                <field name="hideBannerArea" type="radio" default="0" label="Hide Banner Area" description="Hide the banner section under the menu.">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                </field>
                <field type="spacer" />
                <field name="dateDisplay" type="radio" default="1" label="Date Display" description="Display the date in the top right corner of the template.">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                </field>

                </fieldset>
                </fields>
        </config>
</extension> 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T08:28:45.943

对于 JOOMLA 3.0

解压 mod_as_scroller.zip 非常简单，然后在 mod_as_scroller 文件夹中找到 joomla 3.0 文件夹并安装 as_scroller.zip 就完成了，没有更多错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T09:36:55.420

我通过以下链接修改了我的模块：

[https://docs.joomla.org/J2.5:Adapting_a_Joomla_1.5_extension_to_Joomla_2.5](https://docs.joomla.org/J2.5:Adapting_a_Joomla_1.5_extension_to_Joomla_2.5) [https://docs.joomla.org/J3.x:Creating_a_simple_module/Developing_a_Basic_Module#Creating_mod_helloworld.xml](https://docs.joomla.org/J3.x:Creating_a_simple_module/Developing_a_Basic_Module#Creating_mod_helloworld.xml)

# file - 使用出站端点在 Mule 中发布更多数据

> ID：15321332
> 
> 赞同：1
> 
> 时间：2013-03-10T10:40:59.550
> 
> 标签：file, httprequest, mule, endpoint, outbound

我做了一个[使用出站端点发布数据的例子](http://www.mulesoft.org/documentation/display/current/Using+Outbound+Endpoints+to+Publish+Data)

我没有任何问题，但我想在输出的文件中保存更多信息，如 ip 或日期

即当发送 Http-request 并且发送 http-request 的 ip 保存到文件中以获取将输出的文件。

# scheme - 方案 - 如何汇总列表？

> ID：15321335
> 
> 赞同：1
> 
> 时间：2013-03-10T10:41:18.207
> 
> 标签：scheme

我有一个城市列表，我想要最少的居民。这是一个列表：

```
((London United-Kingdom 100000)
 (Paris France 40000)
 (Sydney Australia 350000)
 (New-York USA 1200000)) 
```

我的代码是：

```
(define (aggregate proc n lst)
  (cond ((null? lst) 0)
        ((proc (n (car lst)) (aggregate proc n (cdr lst))))
        (else (aggregate proc n (cdr lst)))))

(aggregate max habitants cities) --> 1200000
(aggregate min habitants cities) --> 0 (should be 40000) 
```

最小值应为 40000。问题`0`出在 中`((null? lst) 0)`，但我不知道如何重写我的代码。你有什么主意吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:46:42.373

自然，0 和 40000 的最小值是 0。看，你使用 0 作为里面的默认值`aggregate`。要么将其更改为 100 亿（然后您`(aggregate max ...)`将无法工作）；或更改`aggregate`函数以接受另一个参数，即默认值。

像这样：

```
(define (aggregate proc n lst def)
  (cond ((null? (cdr lst)) def)
        ((proc (n (car lst)) (aggregate proc n (cdr lst))))
        (else (aggregate proc n (cdr lst))))) 
```

或者可能不是。请注意，您正在“减少”列表上的二进制函数。只有当列表不为空时才有意义。所以这里根本不需要默认值——使用 any 实际上是错误的。相反，当列表中只剩下一个元素时停止：

```
(define (aggregate proc n lst)
  (cond ((null? (cdr lst)) (n (car lst)))
        ((proc (n (car lst)) (aggregate proc n (cdr lst))))
        (else (aggregate proc n (cdr lst))))) 
```

选择一个或另一个。请注意，组合函数`proc`产生的内容 at 也必须接受作为其第二个参数。因此，在第二个变体（aka `foldr1`）中，它必须接受两个相同类型（type）的参数，并且还产生相同类型的结果，即 type`proc`的函数`(a -> a -> a)`。但总的来说，它可能是不同的 type `(a -> b -> b)`，在这种情况下，只有第一个变体（aka `foldr`）可以工作。

# php - 根据 cookie 限制提交权限

> ID：15321352
> 
> 赞同：-4
> 
> 时间：2013-03-10T10:43:19.747
> 
> 标签：php, html

我有一些代码可以向我的数据库提交一些值，我希望客人能够每 24 小时提交一次。我更想知道如何使用 cookie 来做到这一点，因为 IP 限制会限制 NAT 用户。

它必须在一个单独的 PHP 文件中吗？

这是我当前的代码：

```
<?php
$con=mysqli_connect("host","user","pass","db_name");
// Check connection
if (mysqli_connect_errno ())
{
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

//post result to db
$result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
$row = mysqli_fetch_assoc($result_set);
$old_total = $row['points'];
$new_total = $old_total + $_REQUEST['total'];
mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:53:30.050

如果用户删除 cookie 或只是拒绝接受 cookie 怎么办？他可以在您的数据库中发送数以万计的插入。cookie 不是“保护”某些东西的安全方式。同时通过IP+Cookie限制或做一些登录系统。

无论如何，做你想做的，如果没有设置，这里是设置一个cookie代码：

```
 if(isset($_COOKIE['somenameofmycookie'])) {
    echo 'you can not submit a form!';
  } else {
    setcookie("somenameofmycookie", $info, time()+1111111); //write in $info what do you want and set a proper time to 24 hours, more at php.net
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:54:27.030

```
<?php
function is_submit_allowed ($form_name, $timeout)
{
    session_set_cookie_params ($timeout);
    @session_start ();

    $key = "${form_name}_last_submit_time";
    $now = time ();
    if (!isset ($_SESSION [$key]) || $_SESSION [$key] <= $now - $timeout)
    {
        $_SESSION [$key] = $now;
        return true;
    }
    else return false;
}

if (is_submit_allowed ("vote_form", 24 * 60 * 60))
{
    echo ("Submitting...");
}
else
{
    echo ("You can only submit once every 24 hours");
}
?> 
```

# javascript - Zepto.js 滑块还是 jQuery 滑块？

> ID：15321360
> 
> 赞同：0
> 
> 时间：2013-03-10T10:44:15.390
> 
> 标签：javascript, jquery, zepto

是否有任何滑块可以使用 Zepto.js 而不是 jQuery，并且支持 Zepto 提供的触摸事件？

我应该坚持使用jQuery并使用hammer.js之类的插件触发滑块触摸事件吗？[http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

由于 jQuery 它在谷歌的 CDN 上，我认为下载时间不是问题。

有人在移动 Web 项目中成功使用过 zepto.js 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:06:16.230

哇，这是许多不同的问题。开始：

**1 & 2)** 默认情况下，有许多滑块/轮播支持触摸事件，例如[FlexSlider](http://www.woothemes.com/flexslider/)。FlexSlider 与许多 jQuery 插件或扩展一样，需要 jQuery。然而，由于 Zepto 与 jQuery 是 API 兼容的，因此 FlexSlider 很可能与 jQuery 一起开箱即用。我只需在代码中搜索对 jQuery 的引用并更改为 Zepto 或 $。但是，FlexSlider 目前有一个[Win 8 错误](https://github.com/woothemes/FlexSlider/issues/519)，这可能会让您无法使用它。在这种情况下，我建议使用流行的 Bootstrap 轮播并插入您自己的触摸事件，如[本文所述](http://lazcreative.com/blog/how-to/how-to-adding-swipe-support-to-bootstraps-carousel/). 这篇文章描述了如何使用 jQuery Mobile 触摸事件，但使用 Zepto 触摸事件同样容易。相反，如果您想在 jQuery 中使用 Zepto 触摸事件，这也很容易实现。[它需要一些小的修改（你可以在这里](http://endless.beautifuluniquesnowflake.com/assets/js/plugins/jquery.zepto-touch.js)获取我的修补版本）。

**3)** 虽然[Google CDN](https://developers.google.com/speed/libraries/devguide)不托管 Zepto，但您可以在[Cloudflare 的 cdnjs](http://cdnjs.com/)上找到它。甚至有人建议[cdnjs 可能比 Google CDN 更快](http://www.baldnerd.com/make-your-site-faster-cloudflares-cdnjs-vs-google-hosted-libraries-shocking-results/)。

**4)** 是的，我在移动项目中使用过 Zepto。它运行良好，并且比 jQuery 轻一些，后者提供了在移动设备上几乎不需要的向后兼容性。

# jsf - JSF 导航到命名锚点

> ID：15321365
> 
> 赞同：1
> 
> 时间：2013-03-10T10:45:04.120
> 
> 标签：jsf, navigation

我有一个 JSF2 表单，它不在页面顶部附近，该表单在标题中有一个命名锚：

```
<h2><a name="contact_form">Contact Us</a></h2> 
```

该表单由用户端验证组成，例如：

```
<f:validateLength for="message" minimum="10"/>
<f:validateRegex for="email" pattern="#{regex['email']}" /> 
```

当验证失败时，用户将被重定向到页面顶部，但错误消息会显示在表单中。当表单通过验证时，在 ManagedBean 中处理请求并在表单中显示成功消息，我正在返回字符串：

```
public String sendMessage () {
    // process request ...

    return "#contact_form";
} 
```

此代码导致警告：

```
WARNING: JSF1090: Navigation case not resolved for component j_idt83. 
```

1.  我希望验证失败并重定向到命名的锚点。
2.  我希望成功处理表单以重定向到命名的锚点。

**脚注：**这个表格是在网站的每个页面上插入一个`ui:include`声明的，我不一定知道表格所在的网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:14:46.170

我不认为您可以将片段作为导航结果返回，至少在不编写自定义 NavigationHandler 类的情况下不能。（请参阅此[SO 答案](https://stackoverflow.com/questions/12676481/how-to-add-url-fragment-htmloutcometargetlink)，尤其是对已接受答案的评论）

在我们的应用程序中，我们在母版页模板中使用一些 jquery 来解决这个问题，在 document.ready() 函数中选择任何具有以“scroll_to_anchor”结尾的 id 的元素，如果找到，则将窗口位置设置为第一个具有该 id 的元素。我现在无法访问我的代码库，但我记得它非常简单，如果您对我的解决方案感兴趣，我可以明天在办公室时发布代码。

# python - UnboundLocalError: int vs list

> ID：15321369
> 
> 赞同：3
> 
> 时间：2013-03-10T10:45:18.153
> 
> 标签：python

我知道这个错误消息已经被讨论了很多，但我还没有找到对以下内容的解释：

```
def random2(seed):
    x = seed
    def update():
        x = ( x * 16807 ) % 2147483647
        return x
    return update

r = random2(17283945)
print(r()) 
```

这不起作用，因为变量 x 的范围似乎通过返回函数 [UnboundLocalError] 丢失了。行。但是现在我发现绝对没有问题

```
def random(seed):
    x = [seed]
    def update():
        x.append(( x.pop() * 16807 ) % 2147483647 )
        return x[0]
    return update

r = random(17283945)
print(r()) #580971270
print(r()) #1923475628
print(r()) #1783541505 
```

我有点困惑，为什么在这种情况下， x 的范围仍然有效。似乎这与（im）可变性有关，但这对我来说仍然没有多大意义。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T10:49:30.130

当您将赋值运算符 ( `=`) 放在变量名后时，该变量会自动假定为本地变量。因为您试图在分配之前看似引用它，所以您会收到错误消息。

在第二个示例中，您从未将变量分配`x`给任何东西，您只是在原地对其进行了变异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T10:49:51.263

如果您使用的是 Python 3，则可以使用`nonlocal x`

```
def random2(seed):
    x = seed
    def update():
        nonlocal x
        x = ( x * 16807 ) % 2147483647
        return x
    return update

r = random2(17283945)
print(r()) 
```

在 python 2 中，我总是做你对列表所做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:22:59.200

@volatility 已经解释了它发生的原因，但作为参考，这里是您如何编写一个类似的函数来避免使用生成器的嵌套范围。

```
def random(seed):
    x = seed
    while True:
        x = ( x * 16807 ) % 2147483647
        yield x 
```

当迭代 like 时，这将为您提供一系列伪随机数`for rand_num in random(100)`。您还可以在不使用 for 循环的情况下按需获取新的随机数`rand_gen = random(100); rand_num = next(rand_gen)`：

您可以看到随机数生成器是生成器的自然用途：函数更短、更清晰，可以以自然的方式使用（`for...in`和`next`），并且不太容易出现由于`nonlocal`. 有关生成器[和](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)`yield`.

# asp.net-mvc - 找不到使用 TFS 的正确资源

> ID：15321372
> 
> 赞同：0
> 
> 时间：2013-03-10T10:45:30.073
> 
> 标签：asp.net-mvc, tfs

我一直使用 svn 和 tortoise svn 客户端来控制我的 asp.net mvc 项目的源代码，但现在我想尝试 TFS。我在 xxxxx.visualstudio.com 上有我的帐户，我设法创建了一个新解决方案，将其连接到源代码管理，然后我签入了所有文件。很好..我看到我所有的文件都在服务器上。当我使用另一台电脑连接到团队基础服务器时，获取我的项目的最新版本，但没有 .sln 文件。检查项目并准备好在另一台电脑上编译的正确方法是什么？

抱歉这个愚蠢的问题，也许我没有在谷歌上以正确的方式搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:55:35.727

如果您想确保 TFS 中的代码开箱即用，我要做的是从 Visual Studio中**创建第二个 TFS 工作区**（硬盘驱动器上的源代码控制解决方案的第二个位置）我在该工作区上执行 Get Latest 操作（从而将文件下载到新创建的工作区）。

这将使您能够以与其他团队成员首次连接到 TFS 并执行获取最新操作时相同的状态查看解决方案。然后您可以找出您忘记添加到源代码管理中的文件、损坏的库引用等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:23:49.493

在此处下载 TFS 2012 电动工具：

[http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)

他们将添加一个名为“Team Foundation Server”的 Windows 上下文菜单选项，您可以像使用 Tortoise SVN 一样使用它。让您更轻松地添加、删除和忽略工作区文件夹中的文件，您无需打开 Visual Studio 即可工作。

希望有帮助！

# c# - 从递归函数返回列表

> ID：15321377
> 
> 赞同：1
> 
> 时间：2013-03-10T10:45:55.233
> 
> 标签：c#

我正在尝试为一个数字数组生成所有排列并将返回作为列表返回。我假设因为函数是递归的，所以我不能在`DoPermute`方法本身中声明要返回的 List<>，所以我将 List<> 定义为`Permutation`. 该类的代码如下所示：

```
class Permutation
{

    // Constructors

    public Permutation()
    {
    }

    // build permutations of input array

    public void DoPermute(ref byte[] digits, ref int n, ref int i)
    {
        if (i == n)
        {
            long temp = Numbers.JoinDigits(digits);
            Permutations.Add(temp);
        }
        else
        {
            for (int j = i; j < n; j++)
            {
                SwapValues(ref digits, ref i, ref j);
                int temp = i + 1;
                DoPermute(ref digits, ref n, ref temp);
                SwapValues(ref digits, ref i, ref j);
            }
        }
    }

    public List<long> Permutations { get; set; }

} 
```

我正在使用以下行调用代码，但出现错误。

```
 byte[] num = { 1, 2, 3, 4, 5 };
 int len = num.Length;
 int zero = 0;
 Permutation p = new Permutation();
 p.DoPermute(ref num, ref len, ref zero);
 List<long> permuts = p.Permutations; 
```

但是，如果将`DoPermute`方法重新声明为静态并`Permutations.Add(temp);`用简单的替换，`Debug.WriteLine(temp);`我确实得到了正确的排列列表。

关于我哪里出错的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:04:13.080

首先，您需要在某处创建排列列表：`Permutations = new List<long>();`.

其次，如果您希望该方法返回列表而不是定义公共属性，您可以这样做：

```
public static List<long> DoPermute(ref byte[] digits, ref int n, ref int i)
{
    List<long> permuts = new List<long>();
    DoPermuteWorker(permuts, ref digits, ref n, ref i);
    return permuts;
}

private static void DoPermuteWorker(List<long> permuts, ref byte[] digits, ref int n, ref int i)
{
    if (i == n)
    {
        long temp = Numbers.JoinDigits(digits);
        permuts.Add(temp);
    }
    else
    {
        for (int j = i; j < n; j++)
        {
            SwapValues(ref digits, ref i, ref j);
            int temp = i + 1;
            DoPermuteWorker(permuts, ref digits, ref n, ref temp);
            SwapValues(ref digits, ref i, ref j);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:59:07.640

您当前的代码因空引用异常而失败，因为您从未实例化列表。您应该在构造函数中这样做。

但是，我更喜欢将其作为静态方法。将属性用于排列列表对我来说是错误的。为了完成这项工作，您需要将排列列表作为参数添加到递归函数中。并且列表需要由调用者实例化。

所以我认为你的函数应该这样声明：

```
public static void DoPermute(List<long> Permutations, ref byte[] digits, 
    ref int n, ref int i) 
```

函数内部的代码可以基本保持不变，只要它进行递归调用，只需要传递列表即可。我不会在这里重复你的代码，因为我认为我的意思应该很明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:02:49.777

我认为你得到了一个`NullReferenceException`因为你的列表没有初始化。这段代码应该解决它；

```
/// <summary>
/// Computes a permutation of ... 
/// </summary>
class Permutation
{

    /// <summary>
    /// Initializes a new instance of the <see cref="Permutation"/> class.
    /// </summary>
    public Permutation()
    {
        Permutations = new List<long>(20); // you can set here your capacity.
    }

    /// <summary>
    /// Builds permutations of a byte array.
    /// </summary>
    /// <param name="digits">The digits</param>
    /// <param name="n">The n</param>
    /// <param name="i">The i</param>
    public void DoPermute(ref byte[] digits, ref int n, ref int i)
    {
        if (i == n)
        {
            long temp = Numbers.JoinDigits(digits);
            Permutations.Add(temp);
        }
        else
        {
            for (int j = i; j < n; j++)
            {
                SwapValues(ref digits, ref i, ref j);
                int temp = i + 1;
                DoPermute(ref digits, ref n, ref temp);
                SwapValues(ref digits, ref i, ref j);
            }
        }
    }

    /// <summary>
    /// Gets the permuation result.
    /// </summary>
    public List<long> Permutations { get; private set; }

} 
```

# android - 屏幕方向更改时 OnMapClickListener 丢失

> ID：15321381
> 
> 赞同：0
> 
> 时间：2013-03-10T10:46:57.873
> 
> 标签：android, google-maps, google-maps-android-api-2

据我所知，当屏幕方向发生变化时，会再次重新创建整个活动。我有 GoogleMaps v2 和 OnMapClickListener，它设置在 onCreate 方法中，并且在屏幕方向改变之前一切正常。然而，onCreate 和 onResume 方法在方向改变后运行，但听者不知何故迷路了......我错过了什么？我还尝试强制它并将 setter 添加到 onCreate 和 onResume 方法中。确实没有帮助。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);     
setContentView(R.layout.activity_main);

FontUtils.setCustomFont(this, (ViewGroup) getWindow().getDecorView());
setUpMapIfNeeded();
}

@Override
protected void onResume()
{
super.onResume();
setUpMapIfNeeded();
}

private void setUpMapIfNeeded()
{

if (mMap == null)
{
mMap = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map))
.getMap();
}
if (mMap != null)
{
mMap.getUiSettings().setZoomControlsEnabled(false);
mMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
mMap.setOnMapClickListener(new OnMapClickListener()
{
    @Override
    public void onMapClick(LatLng point)
{
if (options == null)
{
options = new MarkerOptions()
              .anchor(0.5f, 0.5f)
              .position(point)
              .title("Marker")
              .draggable(true)
              .icon(BitmapDescriptorFactory
              .fromResource(R.drawable.kruzok));
mMap.addMarker(options);
}
else
{
options.position(point);
mMap.clear();
    mMap.addMarker(options);
}
new GetTask().execute(point);
}
});
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:48:14.373

使用`android:configChanges="orientation"`. 当屏幕方向改变时，它不会重新创建活动。

```
<activity android:name=".HomeMapView" android:label="@string/title_home" android:configChanges="keyboardHidden|orientation" /> 
```

对于 Android 3.2（API 级别 13）及更高版本：

```
<activity android:name=".HomeMapView" android:label="@string/title_home" android:configChanges="keyboardHidden|orientation|screenSize"/> 
```

# java - 具有休眠和缓存的枚举值

> ID：15321382
> 
> 赞同：0
> 
> 时间：2013-03-10T10:47:18.060
> 
> 标签：java, hibernate, caching, second-level-cache

我有下一个问题：我有一个与“角色”有多对多关系的“用户”实体。问题是，“角色”是枚举的（总是有 5 个），所以每当我获取用户时获取它们似乎是不必要的（因为它们也很少改变）。我想以某种方式将角色保存在内存中，并在我带她时将它们附加给用户。值得注意的是，休眠启用了二级缓存，因此我可以在必要时使用它。有人对此有解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:29:56.417

如果您可以更改数据模型，请删除表角色并将多对多表转换为简单的多对一表，其中包含用户的外键和保存角色的列（作为 varchar 或作为数字，但我建议使用 varchar，因为它更易于维护）。然后您可以将该表映射如下：

```
@Entity
public class UserRole {
    @ManyToOne
    private User user;
    @Column
    @Enumerated(EnumType.STRING) // depends if column is varchar or number
    private Role role;
}

public enum Role { ROLE1, ROLE2, ROLE3, ROLE4, ROLE5 } 
```

请注意，如果您不删除角色表，只要您的角色 ID 为 0 到 4，也可以使用`EnumType.ORDINAL`映射（这是默认设置）执行此操作。`Role`如果它们是 1 到 5，则在枚举的开头添加一个虚拟角色。

# python - 没有名为 blog 的模块

> ID：15321385
> 
> 赞同：-4
> 
> 时间：2013-03-10T10:47:29.150
> 
> 标签：python, django

我是 django 的新手。现在我正在关注一本名为*Python Web Development with Django*的书并创建了一个轻量级博客。选择了应用程序***博客***和 sqlite3 进行测试，运行 ./manage.py syncdb 时出现错误。

错误是

```
Error: No module named blog 
```

这是我的一部分`settings.py`

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'mysite.blog',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',

)

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/var/db/django.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

以下是博客应用程序中的所有**model.py ：**

```
from django.db import models

class BlogPost(models.Model):
    title = models.CharField(max_length = 150)
    body = models.TextField()
    timestamp = models.DataTimeField() 
```

我已经在 stackoverflow 中搜索了类似的问题，但这些解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:04:38.023

仅尝试博客：

```
INSTALLED_APPS = (
    .......
    'blog',
    ......
) 
```

# android - android: 光传感器 nullPointerException

> ID：15321386
> 
> 赞同：1
> 
> 时间：2013-03-10T10:47:46.297
> 
> 标签：android, nullpointerexception, sensors, android-sensors, light

在我的活动中，我有一个名为“senzosv”的 TextView。我希望它显示我的光传感器的当前值。我有以下代码。

```
public class Osvetlenie extends Activity implements OnItemSelectedListener, OnSeekBarChangeListener, SensorEventListener  {

SensorManager sm;
Sensor proxSensor;
Sensor lighhtSens;
TextView tv = (TextView)findViewById(R.id.senzosv); 
```

这是在我的 onCreate 中：

```
 ...
sm = (SensorManager) getSystemService(SENSOR_SERVICE);
    proxSensor =sm.getDefaultSensor(Sensor.TYPE_PROXIMITY);
    lighhtSens = sm.getDefaultSensor(Sensor.TYPE_LIGHT);
    sm.registerListener(this, proxSensor, SensorManager.SENSOR_DELAY_NORMAL);
    sm.registerListener(this, lighhtSens, SensorManager.SENSOR_DELAY_NORMAL); 
```

这里是 onSensorChanged 和 onAccuracyChanged 方法

```
 public void onSensorChanged(SensorEvent event) 
{
if( event.sensor.getType() == Sensor.TYPE_LIGHT)
    {
    tv.setText("value: " + event.values[0] + " lux" );   
    Toast.makeText(getApplicationContext(),"On SensorChanged"+ event.values[0],Toast.LENGTH_SHORT).show();

    }

}

public void onAccuracyChanged(Sensor sensor, int accuracy) {

    Log.d(ACCESSIBILITY_SERVICE,"onAccuracyChanged: " + sensor + ", accuracy: " + accuracy);
    if(sensor.getType() == Sensor.TYPE_LIGHT){
        Log.i("Sensor Changed", "Accuracy :" + accuracy);
       }

} 
```

当我运行我的应用程序并尝试启动此活动时，我在 LogCat 中收到 nullpointexception 和错误消息：应用程序意外关闭 我正在三星 Galaxy S II (GT-I9100) 上测试我的应用程序我做错了什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:48:58.557

做这个

```
tv = (TextView)findViewById(R.id.senzosv); 
```

后`setContentView()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:50:17.040

您必须调用`setContentView(R.layout.layout_main);`，因为它设置了活动布局，然后获取 textview 参考。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_main);
    tv = (TextView)findViewById(R.id.senzosv);
} 
```

> 光传感器是否只能返回值 1000、100 和 10？

直接从系统设备文件中获取值

```
Scanner st = new Scanner(new File("/sys/devices/virtual/lightsensor/switch_cmd/lightsensor_file_state"));
int lux = st.nextInt();
st.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T10:50:33.423

`findViewById`拥有之后才能使用`setContentView`。

即移到`onCreate`之后`setContentView`

```
TextView tv;

public void onCreate(Bundle b){
   super.onCreate(b);
   setContentView(R.layout.activity_main);

   tv = (TextView) findViewById(R.id.senzosv);

} 
```

* * *

如果您更仔细地阅读 LogCat，它将解释您的代码的哪一行导致 NullPointer，您可以更轻松地调试它。

* * *

您还需要清单中的权限才能使用传感器。

# java - 多次使用 Generatornames 休眠

> ID：15321387
> 
> 赞同：0
> 
> 时间：2013-03-10T10:47:48.417
> 
> 标签：java, hibernate

我们目前正在从 MSSQL 迁移到 Oracle，我们不想对所有表使用 hibernate_sequence。每个表都应该有自己的序列。

我们已经在我们的测试环境中进行了更改，但是如果我们的解决方案可以安全使用，我想获得一些额外的信息。

我们的大多数类都是从 baseentities 扩展而来的，但我们也有几个独立的实体。

我们改变了什么：

```
-baseentities(@MappedSuperclass):   
changed: @GeneratedValue(strategy = GenerationType.AUTO)   
to: @GeneratedValue(strategy = GenerationType.AUTO, generator = "HIBERNATE_GENERATOR") 
```

- 扩展实体：

```
added after the @Table annotation:  
@SequenceGenerator(name = "HIBERNATE_GENERATOR", sequenceName = "${TABLENAME}_SEQ") 
```

-独立实体：
在@Table 注释之后添加：

```
@SequenceGenerator(name = "HIBERNATE_GENERATOR", sequenceName = "${TABLENAME}_SEQ")
changed : @GeneratedValue(strategy = GenerationType.AUTO)   
to: @GeneratedValue(strategy = GenerationType.AUTO, generator = "HIBERNATE_GENERATOR") 
```

所以我们总是使用相同的生成器名称“HIBERNATE_GENERATOR”，只是序列名称不同。我们的应用程序似乎运行良好，但始终使用相同的生成器名称是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:57:09.763

不，这不安全。我的猜测是您生成的所有值都是由相同的序列生成的。事实上，javadoc 说：

> 定义一个主键生成器，当为 GeneratedValue 注释指定生成器元素时，该生成器可以按名称引用。可以在实体类或主键字段或属性上指定序列生成器。**生成器名称的范围对于持久性单元是全局的（跨所有生成器类型）**。

（强调我的）

每个实体都应该定义自己的生成器。

# c# - 删除顽固的注册表项

> ID：15321394
> 
> 赞同：1
> 
> 时间：2013-03-10T10:48:32.520
> 
> 标签：c#, registry, registrykey

**描述**

一个驱动程序在注册表中留下了一团糟（即使我从系统中卸载了它）。如果我检查安全设置，它不会在“组或用户名”中显示任何内容。当我检查所有者时，它只显示“无法显示当前所有者。”。当我想删除注册表项时，我必须：

1.  取得所有权。

2.  添加组。

3.  删除密钥。

问题是每个注册表都有几个子键，我必须在每个键上重复这个过程。继承权限选项在注册表编辑器中不起作用。是的，我正在管理员模式下运行注册表编辑器。

**问题**

我想编写一个简单的 C# 代码来循环和删除所有键。我找到了一些代码示例，但在我的情况下，任何 OpenSubKey 调用都会失败并出现错误： *System.Security.SecurityException：不允许请求的注册表访问。* 如果任何 OpenSubKey 函数调用失败，我该如何更改所有权？是否有任何其他命令可以让我声明所有权然后删除注册表项？

谢谢你的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:11:45.713

正如您知道以管理员身份运行注册表编辑器以确保您拥有修改/删除注册表项的适当权限一样，您需要对您的 C# 应用程序执行相同的操作。

因为你忘了这样做，所以`System.Security.SecurityException`被抛出作为提醒。正如异常消息所说，您没有修改/删除注册表项的权限。

要解决此问题，您必须以管理权限执行您的 C# 应用程序。您可以手动执行此操作，也[可以将清单添加](https://stackoverflow.com/questions/2818179/how-to-force-my-net-app-to-run-as-administrator-on-windows-7)到您的应用程序中，使其自动要求管理权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-20T06:09:30.153

要清楚，当您谈论以管理员模式运行它时，您右键单击并以管理员身份运行 - 这是提升的权限，只需双击即可。即使您以管理员身份登录，您也必须右键单击并以管理员身份运行才能获得提升。

我通过写信给 CURRENT_USER 而不是 LOCAL_MACHINE 解决了我的问题，现在我发现您的问题实际上并没有通过提升和授予来解决。您存储在注册表中的安全描述符可能已被 AWOL 驱动程序的垃圾写入或发生的任何事情损坏。这意味着您将无法做很多事情，包括修复自己或新用户。

在我们清除权限问题之前，您可能也无法运行 CCleaner。但是，您可以启动到安全模式并运行 sfc /scannow 和 chkdsk - sfc 修复了一个人的类似问题，但它可能有风险，所以风险自负，但它看起来很有希望，我可能已经完成了 scannow 在我尝试其他任何事情之前. 安全模式 +sfc/scannow

我会备份数据并尽快擦除它。我确实找到了有关损坏安全描述符问题的各种操作系统的说明-对于 Win 8 和 7，因此您应该没有问题，并且看起来它们需要安全模式

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:35:28.650

这是一半的答案。

这篇[知识库文章](http://support.microsoft.com/kb/111546/en-us)解释了如何获得您无权访问的密钥的所有权。

简而言之，您需要启用“获取所有权”权限并打开具有`WRITE_OWNER`访问权限的密钥。然后，您可以设置所有者。

请注意，这仅在您以管理员身份运行代码时有效。

但是，我不知道您是否可以在 C# 中使用内置函数执行此操作，或者您是否需要使用互操作来调用本机 API。如果是后者，使用 C/C++ 可能会更快。

或者您可以使用[SubInAcl](http://www.microsoft.com/en-gb/download/details.aspx?id=23510)工具。它可以获取文件、注册表项等的所有权。

# java - 使用 SVN 正确导入 Apache nutch 以 Eclipse EE juno

> ID：15321408
> 
> 赞同：1
> 
> 时间：2013-03-10T10:50:19.740
> 
> 标签：java, eclipse, apache, svn, nutch

我已经通过 Eclipse 上的 SVN 从[http://svn.apache.org/repos/asf/nutch/trunk/](http://svn.apache.org/repos/asf/nutch/trunk/)导入了 apache nutch ；但是，我导入的项目有 10k+ java 错误：

1.  一些错误是由于源文件位于与其源中指定的不同的包中，（例如 java.org.apache 中的类...但在源中声明它们应该在 org.apache 中...，这在许多其他软件包中都可以观察到）

2.  未导入的类，例如“上下文”类在许多类中使用，但是在查看导入列表时，“上下文”并未在此处声明。

3.  缺少类，虽然导入了，但类仍然没有解析为类型，很可能是因为我导入的项目缺少许多所需的库，例如 hadoop、gora、witty 等。

4.  （对此不熟悉）绑定不匹配错误，例如：**StorageUtils 类型的通用方法 createDataStore(Configuration, Class, Class) 不适用于参数（Configuration, Class, Class）。推断的类型 WebPage 不是有界参数的有效替代品**

通过eclipse导入nutch而不遇到上面指定的错误的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:12:39.043

参考[http://wiki.apache.org/nutch/RunNutchInEclipse](http://wiki.apache.org/nutch/RunNutchInEclipse)

这些应该跟随到“T”并且它工作正常。

特别要注意插件的构建路径的手动配置。

您可能还会注意到，即使在某些插件中设置了构建路径后，某些库依赖项也没有设置。.. 您还需要手动将这些插件的 ivey 依赖项添加到构建补丁中。

# debugging - 如何测试/调试模拟印度文化和语言的 WP 应用程序？

> ID：15321409
> 
> 赞同：0
> 
> 时间：2013-03-10T10:50:31.737
> 
> 标签：debugging, windows-phone-7, windows-phone-8

使用 BugSense 我注意到我的应用程序从国家代码“IN”（我认为是印度）中获得了很多“NullReferenceExceptions”。此例外来自不同的 WP7 OS 版本，并使用不同的手机（lumia 710、610、SAMSUGSGH-i917） - 共同因素是国家代码。

不幸的是，我不知道如何测试它。在我的手机模拟器中没有印度语言。

此异常也出现在带有 Windows8 操作系统的“NOKIARM-820”上。

问题：

*   如何测试我的模拟印度文化和语言的应用程序？
*   如何在 Windows8 手机模拟器上测试我的 WP7 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:09:10.303

我认为没有任何基于“文化”或“语言”的模拟/模拟器可用。

如果您想在 wp8 上测试 wp7 应用程序，请运行任何 wp8 模拟器（wvga、wxga、720p）。但是你会遇到 720p 屏幕尺寸模拟器的一些问题，因为 wp7 应用程序无法按此尺寸放大。所以，你必须为 wp8 升级你的应用程序。不用担心，只需单击一下即可。

# android - 如何仅在 webview 历史记录中返回非空白页面？

> ID：15321413
> 
> 赞同：2
> 
> 时间：2013-03-10T10:50:42.217
> 
> 标签：android, android-webview

我曾经用来`onPageFinished`跟踪 webview 历史记录：

```
@Override
public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);
    if ("about:blank".equals(url) && view.getTag() != null){
        view.loadUrl(view.getTag().toString());
    }else{ 
        view.setTag(url);
    }
} 
```

现在，当我尝试时，`view.goBack()`它会回到 about:blank 而不是我想要的页面。

如何设置“about:blank”网址以便放入 webview 历史记录，这样当我回去时就不会再看到它了。但我不想要`view.clearHistory()`，因为它会删除所有历史记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T12:14:51.217

好吧，假设您想回到历史，直到找到第一个非*about:blank* 这是如何做到的：

在你的活动中

```
 public void goBackInWebView(){
    WebBackForwardList history = webView.copyBackForwardList();
    int index = -1;
    String url = null;

    while (webView.canGoBackOrForward(index)) {
          if (!history.getItemAtIndex(history.getCurrentIndex() + index).getUrl().equals("about:blank")) {
             webView.goBackOrForward(index);
             url = history.getItemAtIndex(-index).getUrl();
             Log.e("tag","first non empty" + url);
             break;
           }
           index --;

    }
   // no history found that is not empty
   if (url == null) {
      finish();
   } 
```

}

代码逻辑是循环抛出所有以前的页面。并且首先没有空页面加载它。如果没有找到完成应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:23:36.880

我不知道直接编辑历史堆栈的方法，但你也许可以用[`shouldOverrideUrlLoading()`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)

从[WebView](http://developer.android.com/reference/android/webkit/WebView.html)文档：

> WebView 有几个自定义点，您可以在其中添加自己的行为。这些都是：
> 
> ...
> 
> 创建和设置 WebViewClient 子类。当发生影响内容呈现的事情时（例如，错误或表单提交）将调用它。**您还可以在此处拦截 URL 加载**（通过 shouldOverrideUrlLoading()）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T00:44:45.560

我发现@Mr.Me 的答案比 OnKeyListener 好一点

```
public class BackButtonListener implements View.OnKeyListener {

    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (event.getAction() == KeyEvent.ACTION_DOWN) {
            WebView webView = (WebView) v;

            switch (keyCode) {
                case KeyEvent.KEYCODE_BACK:
                    WebBackForwardList backstack = webView.copyBackForwardList();
                    int currentIndex = backstack.getCurrentIndex();
                    int i = -1;
                    while (webView.canGoBackOrForward(i)) {
                        if (!backstack.getItemAtIndex(currentIndex + i).getUrl().equals("about:blank")) {
                            webView.goBackOrForward(i);
                            return true;
                        }
                        i--;
                    }
                    webView.goBack();
                    return true;
            }
        }
        return false;
    }
} 
```

你刚刚这样设置：

```
mWebView.setOnKeyListener(new BackButtonListener()); 
```

# c++ - STL图 与地图 表现

> ID：15321415
> 
> 赞同：0
> 
> 时间：2013-03-10T10:50:51.613
> 
> 标签：c++, map, stl

我们知道插入新密钥时使用了一些比较功能。访问某些密钥时哪个更快？快多少？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:08:07.450

STL 映射是基于比较的，因为它在内部基于搜索树。这意味着在插入或搜索元素时会执行许多键比较。整数的比较可以在恒定时间内进行。字符串的比较取决于字符串的长度，*通常*需要更长的时间。

# java - itextpdf xmlworker 插件不对齐 PDF 中的文本

> ID：15321419
> 
> 赞同：2
> 
> 时间：2013-03-10T10:52:41.873
> 
> 标签：java, itext, itextpdf

我正在使用 itext-pdf 5.4 创建 PDF 文档。在这个过程中，我计划创建一些 HTML，然后使用 xmlworker 插件进行解析。但是，不管事实如何，我都在指定

```
<div align="justify">..</div> 
```

或者

```
<p align="justify"> 
```

我无法看到预期的效果。PDF 中的文本看起来很糟糕，因为它没有跨越整行。有人可以通过解释解决此问题的正确方法来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T19:48:39.530

align 属性已被弃用，所以我认为您不能使用它。而不是元素上的对齐属性，您应该通过 css 来完成，但我认为 iText XMLWorker 不支持 - 看看这个： [http ://demo.itextsupport.com/xmlworker/itextdoc/CSS-conformance -list.htm](http://demo.itextsupport.com/xmlworker/itextdoc/CSS-conformance-list.htm)

我一直在尝试 display:inline-block 并最终发现它并得知它不受支持... :(

# java - 为什么我会收到 java.lang.NullPointerException 错误？

> ID：15321423
> 
> 赞同：-1
> 
> 时间：2013-03-10T10:52:58.170
> 
> 标签：java

在过去的一个小时里，我一直在尝试解决 java.lang.NullPointerException。当我调用 play() 方法并输入 no 时会发生此错误。我已经评论了错误指向下方的位置。我将不胜感激。谢谢。

```
import java.util.ArrayList;

public class Game
{
private InputReader input ;
private Deck newDeck;
private ArrayList <Card> hand;

public Game(Deck deckToAdd)
{
    input = new InputReader();
    newDeck = deckToAdd;
    hand = new ArrayList <Card>();
}

public void dealCard()
{

    hand.add(newDeck.takeCard());
}

public void showHand()
{
    for(Card showCards: hand){
        if(hand == null){
          System.out.println("(Warning, the deck may have been empty the last time you dealt a      card)");
        }
          System.out.println(showCards.getDescription() + " of " + showCards.getSuit()); 
         //  Error points to above line
    }
}

public int getHandValue()
{
    int counter = 0;
    int handValue = 0;
    while(counter < hand.size()){
        Card checker = hand.get(counter);
        handValue += checker.getValue();
        counter++;
    }
    return handValue;
}

public void play()      //Error occurs when invoking this method and selecing no, points to showHand() method                                 
{
    boolean userWantsToPlay = true;
    while(userWantsToPlay){
        dealCard();
        showHand();
        System.out.println("Hand Value : " + getHandValue());
        System.out.println("Do you want to continue? (yes or no)");
        String userInput = input.getInput();
        if(userInput == "no"){
            userWantsToPlay = false;
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:54:28.573

你的条件不对：

```
if (hand == null) {
   // do your stuff
}
else {
   // do your stuff
} 
```

在您的情况下，您的第二个`System.out.println`将始终执行，因为不在条件下，并且对于两种情况（null，not null）都将适用。

**注意：**我还在您的代码中看到更多“脏”代码，例如您正在比较`Strings`的代码`==`，它不起作用，因为它比较的是引用，而不是内容。总是当你想比较时`Strings`你需要使用`equals()`而不是`==`这样

```
userInput.equals("no") {
   // do your stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T11:01:09.443

您还应该替换：

```
userInput == "no" 
```

和：

```
userInput.equals("no") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T10:56:34.147

而不是你的代码：

```
for(Card showCards: hand){
        if(hand == null){
          System.out.println("(Warning, the deck may have been empty the last time you dealt a      card)");
        }
          System.out.println(showCards.getDescription() + " of " + showCards.getSuit()); 
         //  Error points to above line
    } 
```

不应该

```
if(hand!=null){
for(Card showCards: hand){
        if(showCards== null){
          System.out.println("(Warning, the deck may have been empty the last time you dealt a      card)");
        }else{
          System.out.println(showCards.getDescription() + " of " + showCards.getSuit()); 

        }
    }
} 
```

检查 showCards 而不是 hand.But 调试会有所帮助

# c++ - C++ - 指向函数的全局指针

> ID：15321424
> 
> 赞同：2
> 
> 时间：2013-03-10T10:53:20.027
> 
> 标签：c++, c, pointers

为什么这行得通？我认为全局数据在编译时被“初始化”（编译器以 obj 文件格式保存到 .global 部分为空字节，因此当该部分加载到内存中时，它被初始化为空）。那么，如果编译器在运行时不知道函数在内存中的位置，那么如何初始化指向函数地址的指针呢？

```
#include <iostream>

void vypis();

int neco;
int * bla = &neco;
void (*vypis_ptr)() = vypis;

int main(int argc, const char * argv[])
{

}

void vypis() {

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:21:52.783

我删除了多余的包含，`iostream`以便您的源代码实际上编译为 C 并在我的系统上将其编译为名为 vypis 的可执行文件。这是我发现的：

```
$ nm vypis | fgrep vypis
00000000004004d0 T vypis
0000000000600888 D vypis_ptr 
```

所以，`vypis`一个函数，在“文本”部分是一个全局变量，而`vypis_ptr`一个指向函数的指针，在“数据”部分是一个全局变量。

数据部分中的对象具有存储在可执行文件中的值，我可以`vypis_ptr`通过使用`objdump`.

```
$ objdump -d -j .data vypis

vypis:     file format elf64-x86-64

Disassembly of section .data:

0000000000600878 <__data_start>:
        ...

0000000000600880 <__dso_handle>:
        ...

0000000000600888 <vypis_ptr>:
  600888:       d0 04 40 00 00 00 00 00                             ..@.....

0000000000600890 <bla>:
  600890:       a8 08 60 00 00 00 00 00                             ..`..... 
```

在这里我们可以看到该值`4004d0`存储在其中，`vypis_ptr`但这正是 的`vypis`输出中显示的位置`nm`。

# php - PHP preg_match 除单词以外的任何字符

> ID：15321425
> 
> 赞同：4
> 
> 时间：2013-03-10T10:53:21.197
> 
> 标签：php, regex, preg-match

要匹配除指定字符以外的任何字符（在本例中为“f”），我使用`[^f]+`.

但是如何匹配除指定单词之外的任何字符？就像是`[^word]+`

**例子：**

**haystack** : `"bla1 bla2 bla3 bla4 hello bla5 bla6 bla7"`(haystack 包含 HTML 和换行符)

**针**：`"bla1 bla2 bla3 bla4 "`

所以我想从头到尾抓住一切`"hello"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:21:04.160

链接的可能重复项是关于匹配不包含指定单词的行。我不确定是不是，这里问的是什么。

如果要匹配字符串中的所有内容，但不匹配指定的单词，则必须使用锚`\b` [字边界](http://www.regular-expressions.info/wordboundaries.html)而不是字符串的[`^`开头和字符串`$`的结尾](http://www.regular-expressions.info/anchors.html)。

例如

```
\b(?:(?!your).)+\b 
```

匹配除单词“your”之外的所有内容

[在 Regexr 上](http://regexr.com?342kj)查看

`(?!your)`如果字符串“your”不在当前位置之后，则为否定的[超前断言。](http://www.regular-expressions.info/lookaround.html)

# mysql - MySQL：如何在mysql的两个日期之间选择开始日期和结束日期的记录

> ID：15321428
> 
> 赞同：1
> 
> 时间：2013-03-10T10:53:36.040
> 
> 标签：mysql, sql, select

我需要选择入住日期和退房日期在指定日期范围之间的房价。这些费率根据其条件分别命名。房间费用取决于所选日期。这是我的代码：

**rate_eb**

```
rate_name     rate_starts     rate_ends     rate_discount     rate_min_stay
---------------------------------------------------------------------------
Low Season    2013-05-01      2013-10-31    20                3            
High Season1  2013-11-01      2013-12-19    20                4
High Season2  2013-02-21      2013-04-31    20                4
Peak Season   2013-12-20      2014-02-20    20                5 
```

**条件是：**

1.  预订必须介于**rate_starts**和**rate_ends**之间。
2.  住宿总晚数必须大于或等于**rate_min_stay**。
3.  **rate_discount**是来自另一个表的主费率的折扣百分比。假设主价格为 100，则此预订将应用 80 的价格。

现在，我想从 rate_db 中获取具有日期范围的数据——尤其是对于 rate_discount。这是我的mySQL：

```
select rate_discount 
from rate_eb 
where rate_min_stay<='4' 
and reb_starts>='2013-06-19' 
and reb_ends<='2013-06-23' 
```

从上面的代码。**我预计淡季**的 rate_discount=20但所有小于或等于 4 的价格都被选中。

现在，请给我建议解决方案。如何重新编写代码以访问 rate_starts 和 rate_ends 之间的 rate_discount。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:04:13.250

我假设访问者可以输入一个时期，而不仅仅是一个日期。如果那个时期的开始日期是淡季而结束日期是旺季会怎样？那你希望看到哪个比率？

```
select rate_discount 
from rate_eb 
where rate_min_stay <= abs( datediff( reb_date2, reb_date1 ) )
and reb_date1 between rate_starts and rate_ends
and reb_date2 between rate_starts and rate_ends 
```

我假设 reb_date1 是访问者输入的开始日期，而 reb_date2 是结束日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:10:13.150

使用 to_date('dateInString','format') 将字符串转换为 reb_date1 和 reb_date2 的日期，如果您对 rate_min_stay 进行大于比较，则直接使用未加引号的数值

# javascript - 如何通过 Jinja2 将 Python 列表传递给 JavaScript

> ID：15321431
> 
> 赞同：88
> 
> 时间：2013-03-10T10:54:07.973
> 
> 标签：javascript, python, variables, jinja2

假设我有一个 Python 变量：

```
list_of_items = ['1','2','3','4','5'] 
```

我通过呈现 HTML 将其传递给 Jinja，并且我在 JavaScript 中还有一个名为`somefunction(variable)`. 我正在尝试通过`list_of_items`. 我试过这样的事情：

```
{% for item in list_of_items %}
<span onclick="somefunction({{item}})">{{item}}</span><br>
{% endfor %} 
```

是否可以将列表从 Python 传递到 JavaScript，或者我应该在循环中一个一个地传递列表中的每个项目？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-03-10T12:11:24.113

要将一些上下文数据传递给 javascript 代码，您必须以 javascript（即 JSON）“理解”的方式对其进行序列化。您还需要使用`safe`Jinja 过滤器将其标记为安全，以防止您的数据被 htmlescaped。

您可以通过执行以下操作来实现此目的：

### 风景

```
import json

@app.route('/')
def my_view():
    data = [1, 'foo']
    return render_template('index.html', data=json.dumps(data)) 
```

### 模板

```
<script type="text/javascript">
    function test_func(data) {
        console.log(data);
    }
    test_func({{ data|safe }})
</script> 
```

## 编辑 - 确切答案

因此，要准确实现您想要的（遍历项目列表，并将它们传递给 javascript 函数），您需要分别序列化列表中的每个项目。您的代码将如下所示：

### 风景

```
import json

@app.route('/')
def my_view():
    data = [1, "foo"]
    return render_template('index.html', data=map(json.dumps, data)) 
```

### 模板

```
{% for item in data %}
    <span onclick=someFunction({{ item|safe }});>{{ item }}</span>
{% endfor %} 
```

## 编辑 2

在我的示例中，我使用`Flask`，我不知道您使用的是什么框架，但您明白了，您只需使其适合您使用的框架。

## 编辑 3（安全警告）

**永远不要对用户提供的数据执行此操作，仅对受信任的数据执行此操作！**

否则，您会将您的应用程序暴露给 XSS 漏洞！

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-03-03T21:20:51.943

我在使用 Flask 时遇到了类似的问题，但我不必求助于 JSON。我刚刚通过了一个列表`letters = ['a','b','c']`，`render_template('show_entries.html', letters=letters)`并设置

```
var letters = {{ letters|safe }} 
```

在我的 javascript 代码中。Jinja2 替换`{{ letters }}`为`['a','b','c']`，javascript 将其解释为字符串数组。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-12-27T23:54:26.913

你可以用 Jinja 的[`tojson`](http://jinja.pocoo.org/docs/2.10/templates/#tojson)过滤器来做到这一点，它

> 将结构转储到 JSON，以便`<script>`在 HTML 中任何位置的标签 [和] 中使用安全，但双引号属性除外。

例如，在您的 Python 中，编写：

```
some_template.render(list_of_items=list_of_items) 
```

...或者，在 Flask 端点的上下文中：

```
return render_template('your_template.html', list_of_items=list_of_items) 
```

然后在你的模板中，写下：

```
{% for item in list_of_items %}
<span onclick='somefunction({{item | tojson}})'>{{item}}</span><br>
{% endfor %} 
```

（请注意，该`onclick`属性是*单*引号。这是必要的，因为在其输出中`|tojson`转义`'`字符而不是`"`字符，这意味着它可以安全地用于单引号 HTML 属性，但不能用于双引号。）

或者，要使用`list_of_items`内联脚本而不是 HTML 属性，请编写以下代码：

```
<script>
const jsArrayOfItems = {{list_of_items | tojson}};
// ... do something with jsArrayOfItems in JavaScript ...
</script> 
```

不要`json.dumps`在 Python 代码中使用 JSON 编码变量并将生成的 JSON 文本传递给模板。这将对某些字符串值产生不正确的输出，并且如果您尝试对用户提供的值进行编码，则会将您暴露给 XSS。这是因为 Python 的内置`json.dumps`不转义字符，如`<`and `>`(需要转义以安全地将模板值转换为 inline `<script>`s，如[https://html.spec.whatwg.org/multipage/scripting.html#restrictions-for中所述-contents-of-script-elements](https://html.spec.whatwg.org/multipage/scripting.html#restrictions-for-contents-of-script-elements)）或单引号（需要转义以安全地将模板值转换为单引号 HTML 属性）。

如果您使用的是 Flask，请注意 Flask 会注入自定义[`tojson`](http://flask.pocoo.org/docs/1.0/templating/#standard-filters)过滤器，而不是使用 Jinja 的版本。但是，上面写的所有内容仍然适用。这两个版本的行为几乎相同；Flask 只[允许](https://github.com/pallets/flask/pull/2623#issuecomment-363701560)在 Jinja 的版本中不可用的一些特定于应用程序的配置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-18T16:14:10.807

为了添加所选答案，我一直在测试一个使用 jinja2 和烧瓶的新选项：

```
@app.route('/')
def my_view():
    data = [1, 2, 3, 4, 5]
    return render_template('index.html', data=data) 
```

模板：

```
<script>
    console.log( {{ data | tojson }} )
</script> 
```

渲染模板的输出：

```
<script>
    console.log( [1, 2, 3, 4] )
</script> 
```

`safe`可以添加，但也想避免`{{ data | tojson | safe }}`html 转义，但它也可以在没有的情况下工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-07T11:58:13.987

我可以向您建议一种面向 javascript 的方法，这使得在您的项目中使用 javascript 文件变得容易。

在您的 jinja 模板文件中创建一个 javascript 部分，并将您要在 javascript 文件中使用的所有变量放在一个窗口对象中：

开始.html

```
...
{% block scripts %}
<script type="text/javascript">
window.appConfig = {
    debug: {% if env == 'development' %}true{% else %}false{% endif %},
    facebook_app_id: {{ facebook_app_id }},
    accountkit_api_version: '{{ accountkit_api_version }}',
    csrf_token: '{{ csrf_token }}'
}
</script>
<script type="text/javascript" src="{{ url_for('static', filename='app.js') }}"></script>
{% endblock %} 
```

Jinja 将替换值，我们的 appConfig 对象将可以从我们的其他脚本文件中访问：

应用程序.js

```
var AccountKit_OnInteractive = function(){
    AccountKit.init({
        appId: appConfig.facebook_app_id,
        debug: appConfig.debug,
        state: appConfig.csrf_token,
        version: appConfig.accountkit_api_version
    })
} 
```

我用这种方式将 javascript 代码从 html 文档中分离出来，这种方式更易于管理和 seo 友好。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-09T05:22:39.953

制作一些不可见的 HTML 标签，如`<label>, <p>, <input>`etc. 并命名它的 id，类名是一个模式，以便您以后可以检索它。

让您有两个相同长度的列表 maintenance_next[] 和 maintenance_block_time[]，并且您想使用烧瓶将这两个列表的数据传递给 javascript。因此，您获取一些不可见的标签标签并将其标签名称设置为列表索引的模式，并将其类名称设置为索引处的值。

```
{% for i in range(maintenance_next|length): %}
<label id="maintenance_next_{{i}}" name="{{maintenance_next[i]}}" style="display: none;"></label>
<label id="maintenance_block_time_{{i}}" name="{{maintenance_block_time[i]}}" style="display: none;"></label>
{% endfor%}
```

现在您可以使用如下的一些 javascript 操作检索 javascript 中的数据 -

```
<script>
var total_len = {{ total_len }};

for (var i = 0; i < total_len; i++) {
    var tm1 = document.getElementById("maintenance_next_" + i).getAttribute("name");
    var tm2 = document.getElementById("maintenance_block_time_" + i).getAttribute("name");

    //Do what you need to do with tm1 and tm2.

    console.log(tm1);
    console.log(tm2);
}
</script>
```

# android - 最好的 Android 模拟器设置？

> ID：15321435
> 
> 赞同：4
> 
> 时间：2013-03-10T10:54:34.980
> 
> 标签：android, windows, android-emulator

我在带有 i7 处理器的 Windows 7 上，我正在尝试使用 Android SDK Emulator。但是，当我将像素密度设置为 320 并打开 GPU 仿真时，它开始滞后和冻结，并且它的浏览器几乎不可用（它就像每秒 1 帧或更少）。

到目前为止，使用以下设置，它已经好多了，我认为它可以使用 5 到 10FPS，但它不是 30FPS（使用流畅）。

**抽象 LCD 密度**- 120
**GPU 仿真**- 不
**支持键盘**- 是

除了迁移到 Linux 之外，还能做些什么让它顺利运行吗？我注意到 GPU 仿真对性能的影响最大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:38:29.270

最重要的设置是您的架构，确保您使用的是英特尔仿真器。加速是巨大的！

此处发布了操作方法：[https ://stackoverflow.com/a/10772162/1741111](https://stackoverflow.com/a/10772162/1741111)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T14:38:56.813

如果您想达到 30FPS 的成绩，请忘记 Android 模拟器并切换到 Genymotion。

在我发现[Genymotion](http://genymotion.com/)模拟器之前，我在 Android 模拟器上工作了 6 个月或更长时间，这对开发速度有什么影响。

如果您仍在 Android 模拟器上进行开发，请尝试使用 Genymotion。你会为此感谢我的。这是一个巨大的差异。

个人开发者有一个免费版本。

尽管这是一个旧帖子。我认为这需要在这里提及。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:45:39.877

我写了一篇关于加速模拟器和添加谷歌地图支持的简短博客文章：

第一部分将与您相关。尝试硬件加速并告诉我们您的想法：

这是帖子：

[加速模拟器](https://blog-emildesign.rhcloud.com/?p=527)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T11:44:03.417

最好的模拟器是购买一个简单的 Android 智能手机并在此设备上调试/运行您的应用程序。我正在这样做，它工作得非常好，没有滞后

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T12:41:05.810

你不需要买手机。模拟器是一个很棒的工具，但是速度很慢。您可以启用硬件加速以使其平稳运行。[按照开发人员页面上的步骤操作](http://developer.android.com/tools/devices/emulator.html#acceleration)，您会发现速度有显着差异。AFAIK您提到的设置对速度没有太大影响。

# c++ - QtCreator + cygwin + Boost：是否可以调试

> ID：15321439
> 
> 赞同：1
> 
> 时间：2013-03-10T10:54:46.547
> 
> 标签：c++, boost, cygwin, qt-creator

我正在尝试将 QtCreator 用作 Windows 平台的 IDE。到目前为止，我已经设法创建了一个使用 cygwin 的 gcc 编译器的“工具包”，并构建了一个非 qt 的“hello world”项目。当我尝试调试项目时，我得到

> “调试器无法加载调试帮助程序库。”

错误，只能看到汇编代码。我已将 QtCreator 作为独立应用程序安装，因此我没有 qt lib 或 mingw。如果有人知道如何使用 cygwin 的 gdb 制作 QtCreator 调试项目，我将不胜感激。

PS：我想使用 QtCreator 作为 IDE 的原因是 Eclipse 的索引器在解析 boost 源时失败，它占用了太多内存，我必须关闭它才能使 IDE 可操作。没有索引器，类层次结构的自动完成或导航都不起作用。

# c++ - C ++，将堆栈上的二维数组传递给引用函数

> ID：15321443
> 
> 赞同：1
> 
> 时间：2013-03-10T10:55:03.620
> 
> 标签：c++, arrays, pass-by-reference

`void build()`将创建一个 2D 数组，其大小在运行时确定并`modify()`通过引用传递给它。

`void modify()`将对数组进行一些更改。

.h 文件：

```
void modify(______, int mySize);
void build(int size); 
```

在 .cpp 文件中：

```
void modify(______, int mySize) {
    for (int i = 0; i < mySize; i++) 
        for (int j = 0; j < mySize; j++)
            myArray[i][j] = false;
}

void build(int size) {
    bool myArray[size][size];
    modify(______, size);
} 
```

有人能告诉我在这些空白处放什么吗？我尝试了很多方法来投射`myArray`，但仍然无法正常工作。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:35:42.233

首先，请注意可变长度数组 (VLA) 不是标准 C++。这一行编译的事实是由于 GCC 编译器扩展：

```
bool myArray[size][size]; 
```

它根本不是有效的 C++。数组的维度需要是编译时常量，但在这里您使用的是传递给函数的参数`build`。

无论如何，要将 VLA 传递给函数，您必须继续使用编译器扩展。但是，据我测试，这些仅在编译为 C 时有效。第一个选项使用允许在其他参数声明中使用参数的扩展：

```
void modify(int mySize, bool array[][mySize]); 
```

第二个选项，如果你想`mySize`成为第二个参数，也使用允许参数前向声明的编译器扩展：

```
void modify(int mySize; bool array[][mySize], int mySize); 
```

这`int mySize;`是一个参数前向声明。

尽管如此，您确实不应该使用可变长度数组。您*可以*动态分配可变长度的数组，如下所示：

```
void modify(bool** array, int mySize);

void build(int size) {
  bool** myArray = new bool*[size];
  for (int i = 0; i < size; i++) {
    myArray[i] = new bool[size];
  }
  modify(myArray, size);
} 
```

但是，这仍然不是 C++ 中的推荐做法。你应该避免动态分配，除非你真的需要它，当你确实需要它时，你应该以某种方式管理它。在这里，您需要记住`delete[]`每个元素`myArray` *及其* `myArray`本身。

您真正应该使用的是标准容器。A`std::vector<std::vector<bool>>`在这里很适合你：

```
void modify(std::vector<std::vector<bool>>& array);

void build(int size) {
  std::vector<std::vector<bool>> myArray(size, std::vector<bool>(size));
  modify(myArray);
} 
```

现在您甚至不必传递大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:59:30.233

以这种方式使用它：

```
 void modify(bool**& myArray, const int mySize) 
    {
        for (int i = 0; i < mySize; i++) 
            for (int j = 0; j < mySize; j++)
               myArray[i][j] = false;
    }

    void build(const int size) 
    {
        // create the array
        bool** myArray = new bool*[size];
        for (int i=0; i<size; i++)
            myArray[i] = new bool[size];

        modify(myArray, size);

        // release the array
        for (int i=0; i<size; i++)
            delete[] myArray[i];
        delete[] myArray; 
    } 
```

# javascript - 无法通过 HTML 画布保存图像

> ID：15321445
> 
> 赞同：0
> 
> 时间：2013-03-10T10:55:05.797
> 
> 标签：javascript, canvas

我在保存画布时遇到了困难。我是 javascript 新手，所以我认为这可能是语法问题。

我在函数中保存了一些变量：

```
var imageView = document.getElementById("imageView");
var canvasData = imageView.toDataURL("image/png");
var postData = "canvasData="+canvasData; 
```

如果我添加以下行，它将正确显示图像：

```
imgData = $('#i').append($('<img/>', { src : canvasData })); 
```

但是，我有另一个函数要传递 base64 代码，所以我添加了：

```
var  the_data = "test= "+imageView.toDataURL("image/png"); 
```

它确实打印出 base64 代码，但只是空白画布（不是用户添加的绘图）。

如果我添加以下内容将不起作用：

```
 var  the_data = "test= "+canvasData; 
```

我究竟做错了什么？

这是我正在尝试做的基本 jsfiddle：http: [//jsfiddle.net/sMSeX/](http://jsfiddle.net/sMSeX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-10T15:14:00.867

## 关于上传 HTML5 画布图像数据的一点提示：

我正在为一家印刷店开发一个项目，由于将来自 HTML5 画布元素的图像上传到服务器而遇到了一些问题。我至少挣扎了一个小时，但我无法将图像正确保存在我的服务器上。

我从画布元素通过 Base64 解码得到图像数据

```
 var can = document.getElementsByTagName('canvas');
        var dataURL = can[0].toDataURL("image/jpg");
        //dataURL = dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
        console.log('data url: '+dataURL); 
```

一旦我将我的 `contentType`选项设置`jQuery ajax call`为`'application/x-www-form-url-encoded'`：

```
 $.ajax({
              url: 'index.php?page=upload-image',
              type: 'post',
              contentType: 'application/x-www-form-urlencoded',
              //data: '{ "imageData" : "' + dataURL + '" }',
              data: dataURL,
              beforeSend: function() {
                $('.text-danger').remove();
              },
              complete: function() {

              },
              success: function(json) {
                console.log('upload complete'); 
              }
    }); 
```

一切正常，base64 编码的数据被正确解释并成功保存为图像。

* * *

也许有人可以帮助！

# box2d - libgdx/jBox2d 在碰撞时添加幻体？

> ID：15321446
> 
> 赞同：2
> 
> 时间：2013-03-10T10:55:15.257
> 
> 标签：box2d, libgdx, collision, jbox2d

我是第一次使用 libgdx 和 jBox2D（虽然我之前在其他环境中使用过 Box2D）。

我创建了一个大的动态物体，和两个较小的静态物体让它着陆。我的身体似乎从来没有接触过。相反，似乎系统在我的身体之间创造了非常小的身体……我不知道为什么！

下图的上半部分显示了正在进行的碰撞（右侧）和即将发生的碰撞（左侧，未着色的形状）。

下图的下半部分是几步之后。大的阴影形状围绕第一个碰撞点旋转并与未着色的形状“碰撞”。

在每次碰撞的位置都有一个小红点，似乎阻止了形状的接触。我已经在多个尺度上尝试过，结果是相似的。我试过谷歌搜索并在这个网站上搜索有同样问题但没有运气的人。

![jBox2D行为不端的图片](../Images/49b3f364348970a99c26677bc0047ec1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:21:03.873

每个多边形都有一个额外的小“半径”，在文档中进行了描述：

```
 /**
     * The radius of the polygon/edge shape skin. This should not be modified.
     * Making this smaller means polygons will have and insufficient for
     * continuous collision. Making it larger may create artifacts for vertex
     * collision.
     */
    public static float polygonRadius = (2.0f * linearSlop); 
```

其中使用linearSlop，定义：

```
 /**
     * A small length used as a collision and constraint tolerance. Usually it
     * is chosen to be numerically significant, but visually insignificant.
     */
    public static float linearSlop = 0.005f; 
```

所以这意味着你会想要

*   增加您的图纸尺寸以适应这一点，或
*   使您的坐标系更大，因此该空间 (0.02) 不明显。

我建议第二个。如果您的坐标系太小（或太大），它可能会产生其他性能影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:06:37.370

因此，据我所知，这种情况是与多边形皮肤相关的次要（但重要）细节。

（[http://www.box2d.org/manual.html#_Toc258082970](http://www.box2d.org/manual.html#_Toc258082970) ...向下滚动到 4.4 的底部）

多边形周围有一个不可见的皮肤，用于防止相互渗透，但 Box2D 调试视图不会绘制此皮肤。由于我根据多边形而不是多边形加上皮肤来调整纹理的大小，因此存在可见的间隙。

长话短说，我们必须自己考虑皮肤。

如果您有更多信息或更好的解释，我很想听听！:-)

# ruby-on-rails - Rails 多条件验证

> ID：15321450
> 
> 赞同：0
> 
> 时间：2013-03-10T10:56:04.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下型号

```
class User < ActiveRecord::Base
  VALID_EMAIL_REGEX = /^.+@.+\..+$/i 
  attr_accessible :active_list_id, :password, :password_confirmation, :email, :temp
  has_secure_password
  before_create { generate_token(:auth_token) }
  if :temp.nil?
    before_validation :downcase_email
    validates_presence_of :email, :password, :password_confirmation, :on => :create
    validates_confirmation_of :password
    #something@something.something
    validates :email, :uniqueness => true, 
              :format => {:with => VALID_EMAIL_REGEX }
  end
  after_create { make_list([email,"'s shopping list"].join('')) }

  has_many :shopping_lists
  has_many :transactions, :class_name => 'Order'

  HUMANIZED_ATTRIBUTES = {
    :password_digest => "Password"
  }
  ...
end 
```

我尝试通过调用`User.create(:temp => true)`（这是一个布尔值，在我的迁移/模式中定义）在我的 Rails 控制台中创建一个模型。但它总是回滚事务。我究竟做错了什么？

我还尝试对我的所有 3 个验证进行`:if => temp.nil?`and`if => "temp.nil?"` 和 and `:if => lambda { |user| user.temp.nil? }`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:04:31.783

创建一个名为 temp_is_nil 的方法？并在 if 条件下使用它

```
def temp_is_nil?
  temp.nil?
end 
```

确保 temp 是用户的属性。

```
before_validation :downcase_email, if: temp_is_nil?
validates_presence_of :email, :password, :password_confirmation, :on => :create, if: temp_is_nil?
validates_confirmation_of :password, if: temp_is_nil?
validates :email, :uniqueness => true, 
          :format => {:with => VALID_EMAIL_REGEX }, if: temp_is_nil? 
```

# ios - iOS：UILabel 倒计时挂在其他 UI 操作上

> ID：15321452
> 
> 赞同：1
> 
> 时间：2013-03-10T10:56:26.103
> 
> 标签：ios, objective-c, multithreading, uilabel, countdown

我正在实现倒计时，其值显示在 UILabel 上，但遇到了问题。这是简化的代码：

```
self.countdownTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(countdown) userInfo:nil repeats:YES];

- (void)countdown {          
     self.countdownLabel.text = [NSString stringWithFormat:@"%i",[self.countdownLabel.text intValue]-1];

     // Handle time out
     if ([self.countdownLabel.text intValue] == 0) {
             [self.countdownTimer invalidate];
             self.countdownTimer = nil;
     }
} 
```

它工作正常，但**如果我在视图控制器中执行其他 UI 操作，例如滚动滚动视图，计时器**会在滚动视图滚动时挂起，然后加速以弥补空闲时间。

我尝试将标签的更新分派到后台队列，这当然不起作用。

```
dispatch_queue_t bgQ = dispatch_queue_create("bgQ", 0);
dispatch_async(bgQ, ^{
    self.countdownLabel.text = [NSString stringWithFormat:@"%i",[self.countdownLabel.text intValue]-1];
}); 
```

**这里的解决方案是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:10:17.610

```
self.countdownTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(countdown) userInfo:nil repeats:YES];    
[[NSRunLoop mainRunLoop] addTimer:self.countdownTimer forMode:NSRunLoopCommonModes]; 
```

请记住，在您的倒计时方法中，您需要一个转义来使您的倒计时计时器无效。

计时器将在没有触发指令的情况下启动

```
[[NSRunLoop mainRunLoop] addTimer:self.countdownTimer forMode:NSRunLoopCommonModes]; 
```

行被执行。绝对没有针对 UI 更改的调度异步。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-02T09:52:16.980

**Swift 3.0 语法**

```
var timer = Timer.scheduledTimer(timeInterval: 0.01, target: self, selector: #selector(ViewController.updateTimer), userInfo: nil, repeats: true);
RunLoop.current.add(timer, forMode: RunLoopMode.commonModes) 
```

# mysql - 为什么 MySQL 返回“拒绝用户访问”错误？

> ID：15321454
> 
> 赞同：-2
> 
> 时间：2013-03-10T10:56:34.700
> 
> 标签：mysql, class, function

这是我收到的错误消息：

> 警告：mysql_connect() [function.mysql-connect]：第 29 行 ERR_DB_CONNECT 上 /var/www/classes/mysql.class.php 中用户 'user'@'localhost' 的访问被拒绝（使用密码：YES）

我正在使用这个数据库类：

```
class mysql
{

public $conn = "";
public $debug = 0;
public $queries = NULL;

public function mysql( $dbUser = "user", $dbPass = "pass", $dbName = "database", $dbHost = "localhost" )
{
    global $config;
    $this->user = $dbUser;
    $this->pass = $dbPass;
    $this->name = $dbName;
    $this->host = $dbHost;
    if ( $this->debug == 1 )
    {
        $this->queries = array( );
        $this->comments = array( );
    }
    $this->last_result = FALSE;
    $this->debug = $config['debug'];
    return TRUE;
}

public function connect( )
{
    if ( !( $this->conn = mysql_connect( $this->host, $this->user, $this->pass ) ) )
    {
        exit( "ERR_DB_CONNECT" );
    }
    $this->select_db( $this->name );
    return $this->conn;
}

public function select_db( $db )
{
    if ( !mysql_select_db( $db, $this->conn ) )
    {
        exit( "ERR_MYSQL_SELECT_DB" );
    }
    $this->query( "set names utf8" );
}

public function query( $query, $comment = "" )
{
    if ( !$this->conn )
    {
        $this->conn = $this->connect( );
    }
    $start = microtime( );
    if ( !( $result = mysql_query( $query, $this->conn ) ) )
    {
        exit( mysql_error( ) );
    }
    $end = microtime( );
    if ( $this->debug == 1 )
    {
        list( $usec1, $sec1 ) = explode( " ", $start );
        list( $usec2, $sec2 ) = explode( " ", $end );
        $diff = round( $sec2 - $sec1 + $usec2 - $usec1, 5 );
        $this->queries[] = $query;
        $this->comments[] = $comment;
        $this->queries['time'][] = $diff;
    }
    $this->last_result = $result;
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:06:52.717

*用户 'user'@'localhost 的访问被拒绝*

这意味着您在数据库中的帐户没有执行任何查询的正确权限。检查您的数据库；我想你正在使用 XAMPP 或类似的东西。要查看数据库，请在`127.0.0.1`浏览器中输入。如果您的数据库附加了密码，这可能是您无法访问的原因。

* * *

**作为旁注**

不要使用 PHP`my_sql`方法。它们已被弃用，这意味着它们已经过时、被废弃并且容易受到安全攻击，例如[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。您应该使用[PDO Objects](http://php.net/manual/en/pdo.prepared-statements.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。

# jquery - 以编程方式单击 Joomla 中的链接

> ID：15321463
> 
> 赞同：1
> 
> 时间：2013-03-10T10:57:33.680
> 
> 标签：jquery, jquery-click-event

我有这个链接：

```
<a id="launch_crop" class="modal" href="index.php?option=com_registration&view=crop&tmpl=component" rel="{handler: 'iframe', size: {x: 680, y: 370}}">Show modal2</a> 
```

打开灯箱；我想在操作结束时以编程方式单击它。

如果我做 jQuery("#launch_crop").trigger("click"); 或 jQuery("#launch_crop").click();

它不起作用，并且不会在控制台中给出错误。如何强制点击链接？

# ios - 局部声明隐藏实例变量-属性和综合

> ID：15321465
> 
> 赞同：1
> 
> 时间：2013-03-10T10:57:52.320
> 
> 标签：ios, objective-c, cocoa

**更新 0**

您的意思是更改所有`deals`to`_deals`和所有`iboards`to`_iboards`并添加以下方法，然后在方法末尾调用它`processPbn`吗？如果是这样，呼叫是什么样的？

```
- (id)initWithName:(NSInteger )_iboard deals:(NSArray *)_deals
{
    self = [super init];
    if (self) {
       iboard = _iboard;
        deals = _deals;
        return self;
    }
    return nil;
} 
```

**更新 0**

我想让在中计算的 2 个变量`deals`和可在 中使用。我在BSViewController.m的末尾（**最后 3 行）的代码中得到以下两个语义问题。**`iboards``BSViewcontroller``BSdealViewController`

 **```
"Local declaration of 'deals' hides instance variable"
"Local declaration of 'iboards' hides instance variable" 
```

BSViewController.h

```
#import <UIKit/UIKit.h>
@interface BSViewController : UIViewController <....>
        {
            NSInteger iboard;
            NSArray *deals;
            }
@property (nonatomic) NSInteger iboard;
@property (nonatomic, strong) NSArray *deals;
- (void) processPbn;
@end 
```

BSViewController.m

```
#import "BSViewController.h"
@interface BSViewController ()

@end
@implementation BSViewController
@synthesize iboard, deals;

- (void) processPbn
{
    NSURLRequest *theRequest = [NSURLRequest .....];

    [NSURLConnection sendAsynchronousRequest:theRequest queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *connection, NSData *data, NSError *error)
     {
         NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
         NSString *sp = @"             ";
         NSArray*deals=@[[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy]];

         NSString *toMatch = @"...";

         int iboard = 0;
         NSRegularExpression *regex = [....];
         NSUInteger numberOfMatches = [....];
         for (NSTextCheckingResult* board in [.....])
         {
             for (NSUInteger irange = 1; irange < board.numberOfRanges; ++irange)
             {
                 NSRange matchedRange = [board rangeAtIndex: irange];
                 NSString* tstring = [string substringWithRange: matchedRange];
                 for (NSUInteger ix = 0; ix < tstring.length; ++ix)
                 {
                     NSRange cardInSuit = NSMakeRange(ix, 1);
                     int seat = (irange-1)/4 ;
                     int suit = (irange-1)%4 ;
                     NSString* replace= [deals[iboard][suit] ....];
                     [deals[iboard] replaceObjectAtIndex: suit withObject: replace];
                 }
             }
             ++iboard;
         }
     }];
}

@end 
```

（由于上述原因？）我`Use of undeclared identifier 'iboard'`在下面的 NSLog 指令中也遇到了错误。

BSdealViewController.m

```
#import "BSdealViewController.h"
#import "BSViewController.h"

@interface BSdealViewController ()

@end
- (void)viewDidLoad
{
    NSLog(@"iboard : %@", iboard);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:00:24.253

> ```
> "Local declaration of 'deals' hides instance variable"
> "Local declaration of 'iboard' hides instance variable" 
> ```

您在方法中命名`deals`了变量，该变量与具有相同名称的 ivar 发生冲突。

> NSString *toMatch = @"...";
> 
> ```
>  int iboard = 0;
>          ^^^^^^
> 
>      NSRegularExpression *regex = [....]; 
> ```

还，

```
NSString *sp = @"             ";
NSArray*deals=@[[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy],[@[sp, sp, sp, sp]mutableCopy]];
        ^^^^^ 
```

将方法名称中的变量更改为`aDeals`和`aIboards`/或与ivars不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T10:55:36.930

这是您应该遵循的大多数有经验的开发人员使用的约定：

尽可能使用属性，例如属性“iboard”和属性“deals”。使用带有前导下划线的实例变量，例如“_iboard”和“_deals”。

不要在其他任何地方使用前导下划线。

这样，任何阅读您的源代码的人都可以在一英里外发现实例变量的使用，并且您不会在打算使用属性时意外使用实例变量。你的 init 方法应该是

```
- (id)initWithIBoard:(NSInteger )iboard deals:(NSArray *)deals
{
    if ((self = [super init]) != nil)
    {
        _iboard = iboard;
        _deals = deals;
    }

    return self;
} 
```**

# tree - Erlang：在梁可执行文件中使用 gb_tree 函数，记录操作？

> ID：15321466
> 
> 赞同：0
> 
> 时间：2013-03-10T10:58:10.090
> 
> 标签：tree, erlang, record

我对结构的使用有几个问题，`gb_tree`例如来自 shell 的基本输入以及在没有 shell 输入的梁可执行文件中使用树。

第一个问题是如何使用函数`Tree`返回的`init()`？在程序的生命周期内是否`Tree`变成全局的？我是否需要将返回的树从外壳传递到`add_entry()`例如？

第二个问题与将参数传递给`add_entry`函数调用有关，例如`gbt:add_entry(x,"10")`但这给了我一个异常错误：

`** exception error: no function clause matching gbt:add_entry(x,"y") (gbt.erl, line 23)`

我也尝试过使用`Tree = gb_trees:enter( value, Data, Tree)`inside ，但后来在未绑定`add_entry()`的地方编译时收到错误消息。`Tree`

我的最后一个问题是如何将记录存储/检索/删除/更新到名为`mapping`（在源代码中声明）的 gb_tree 中？

```
-module(gbt).
-export([init/0,lookup/2,retrieve/2, add_entry/2, delete/2]). % For test purposes only.
-record(mapping, {string="", parameter}).

init() ->
    Tree = gb_trees:empty().

lookup( value, Data) ->
    case 
        gb_trees:lookup( value, Data) of 
        none -> 
            false ; 
        _ -> io:format("ok~n") 
    end.

retrieve( value,Data) ->
    case gb_trees:lookup( value, Data) of none -> 
        false; 
        { value, Data} -> 
        io:format("~w~n", [Data]) 
    end.

add_entry( value, Data) ->
    Tree = gb_trees:enter( value, Data, Tree),
    io:format("~p ~p ~n", [value,Data]).    

delete( value,Data)->
    {value, Data} = gb_trees:lookup( value, Data), 
    Tree = gb_trees:delete( value, Data), 
    io:format("~w~n", [Data]).

%    reserve(Free) ->
%     case gb_trees:take_smallest(Free) of
%   {Min, Min, Free1} ->
%       {Min, Free1};
%   {Min, Max, Free1} when Max > Min ->
%       {Min, gb_trees:insert(Min+1, Max, Free1)}
%     end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:59:07.190

Erlang 中的数据结构是*持久*的。这意味着没有全局引用，并且您总是将给定的树更新为新的。

```
NewTree = gb_trees:empty(),
TreeOfSize1 = gb_trees:enter(hello, world, NewTree),
TreeOfSize2 = gb_tress:enter(foo, bar, TreeOfSize1). 
```

请注意，它`TreeOfSize1`仍然存在并且它没有 KV 绑定`foo -> bar`，因为 Erlang 保留了一个持久版本。这在许多情况下非常有用，因为自动保留对旧版本的引用使您能够“返回”到该版本。

至于您的错误，那是因为您正在编写`(value, Data)`而不是`(Value, Data)`. 写入`value`是被`atom()`调用`value`而不是绑定，因此当您传递`x`它时，它与函数不匹配，并且您会收到模式匹配 function_clause 错误。

# git - 如何强制始终显示 mergetool GUI (KDiff3)？

> ID：15321472
> 
> 赞同：34
> 
> 时间：2013-03-10T10:59:02.413
> 
> 标签：git, git-merge, kdiff3, mergetool

如何强制始终显示合并工具 GUI 并禁用任何自动解析？

有时，当合并期间发生冲突并且我使用合并工具时，它会在我点击`Enter`问题**“点击返回以启动合并解决工具 (kdiff3)”**后立即返回，并且没有显示任何 GUI，并且似乎解决了冲突。

我现在将 Git 配置为使用[KDiff3](http://kdiff3.sourceforge.net/)作为合并工具，但是当我`codecompare`指定了合并工具时，它也发生了。我知道 KDiff3 中有一个选项*“自动保存并在没有冲突的情况下退出合并”*，理论上这可能会导致所描述的行为，但我一直禁用/取消选中此选项。

另外，在 Git mergetool gitconfig 中直接有**trustExitCode**选项，我已将其设置为 true，但即使将其设置为 false，GUI 也不会显示。

我不确定谁会自动解析。Mergetool 在某些预处理或 KDiff3 中？

我在 Windows 上运行并安装了 Git 扩展。

特定于 KDiff3 的类似问题也在这里被问到：*[Kdiff3 won't open with mergetool command](https://stackoverflow.com/questions/10883336/kdiff3-wont-open-with-mergetool-command)*

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-04T13:44:19.277

Git 已`--auto`硬编码为 KDiff3 的命令行选项，如果所有冲突都可由 KDiff3 自动解决，则会导致 GUI 不显示。在 KDiff3 设置中，您可以指定要忽略的命令行选项，但放在`--auto`那里对我不起作用。

作为一种解决方法，我将自己的 KDiff3 变体配置为合并工具：

```
git config --global mergetool.kdiff3NoAuto.cmd "kdiff3 --L1 \"\$MERGED (Base)\" --L2 \"\$MERGED (Local)\" --L3 \"\$MERGED (Remote)\" -o \"\$MERGED\" \"\$BASE\" \"\$LOCAL\" \"\$REMOTE\"" 
```

这与 Git 默认为 KDiff3 使用的非常相似，但没有`--auto`标志。

现在您可以全局调用`git mergetool -t kdiff3NoAuto`或配置`kdiff3NoAuto`为 mergetool，并且 KDiff3 将在解决冲突时始终显示。

关于你问题的第二部分，如果你真的想禁用任何自动解析，只需添加`--qall`到`kdiff3`上面的命令行。但是您必须手动解决文件中的所有更改，即使是那些不会导致 Git 冲突的更改。最好的情况是：KDiff3 展示了 Git 如何合并文件并将冲突留给用户选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-24T18:44:24.060

Bob esponja 对已接受答案的评论对我使用 KDiff3 0.9.98 非常有效。

添加`--auto`到**要忽略的命令行选项：**在

```
Settings | Configure KDiff3... | Integration tab. 
```

KDiff3 出现 Conflicts 对话框，指示**Nr of unsolved conflict: 0**，但是您可以根据需要检查/修改合并状态。

比配置您自己的变体更方便一点，因为无论是从 git mergetool、Source Tree 还是任何使用 mergetool 的工具，它都可以按预期工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-28T22:59:33.550

的行为`git mergetool`完全取决于选择的合并工具和 Git 传递给它的命令行。因此，要改变它的行为，你需要找到一个命令行，并配置 Git 以使用该命令行。

我自己也有这个问题（特别是关于 KDiff3），[PiQuer 的回答](https://stackoverflow.com/a/15813064/2293142)让我有所了解，但它让我开始思考。应该有一种方法可以准确地为 KDiff3 复制 Git 的默认行为，除非没有该`--auto`选项（这就是导致 KDiff3 不显示 GUI 的原因）。

看起来 KDiff3 合并工具的默认命令的来源位于文件[git/mergetools/kdiff3](https://github.com/git-for-windows/git/blob/8a117c4824345095e4401ceb1f4855738ac9f2c0/mergetools/kdiff3)中。这看起来像一个 shell 脚本，所以我们应该能够准确地复制它！把它放在一行上，删除`--auto`和转义东西给了我们这个：

```
git config --global mergetool.kdiff3.cmd "if \"\$base_present\"; then \"\$merge_tool_path\" --L1 \"\$MERGED (Base)\" --L2 \"\$MERGED (Local)\" --L3 \"\$MERGED (Remote)\" -o \"\$MERGED\" \"\$BASE\" \"\$LOCAL\" \"\$REMOTE\" >/dev/null 2>&1; else \"\$merge_tool_path\" --L1 \"\$MERGED (Local)\" --L2 \"\$MERGED (Remote)\" -o \"\$MERGED\" \"\$LOCAL\" \"\$REMOTE\" >/dev/null 2>&1; fi" 
```

和变量在 Git 文档`base_present`中`merge_tool_path`没有特别提到可以在 中使用`mergetool.<tool>.cmd`，因此在将来的某个时候，此命令可能无法按原样工作。但是，它们可以很容易地替换为一个命令来测试是否`BASE`引用了一个存在的文件，以及一个 KDiff3 的硬编码路径。

请注意，上面的命令替换了 Git`kdiff3`合并工具的默认命令，而不是创建一个单独的命令。

关于原始问题中的其他几点：

*   该`trustExitCode`设置告诉 Git 合并工具的退出代码是否是合并是否成功的正确指示。它不会影响合并工具的行为，而是会影响合并工具退出后 Git 的行为。请参阅[git-mergetool 的手册](https://git-scm.com/docs/git-mergetool)。
*   您在输入后看到的自动分辨率都是`git mergetool`由合并工具本身完成的。`git mergetool`仅在需要合并的文件版本上调用外部工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-14T06:29:00.693

我发现的最简单的方法是：

```
git config --global mergetool.kdiff3.cmd 'if $base_present; then "$merge_tool_path" --L1 "$MERGED (Base)" --L2 "$MERGED (Local)" --L3 "$MERGED (Remote)" -o "$MERGED" "$BASE" "$LOCAL" "$REMOTE" >/dev/null 2>&1; else "$merge_tool_path" --L1 "$MERGED (Local)" --L2 "$MERGED (Remote)" -o "$MERGED" "$LOCAL" "$REMOTE" >/dev/null 2>&1; fi'
git config --global difftool.kdiff3.cmd '"$merge_tool_path" --L1 "$MERGED (A)" --L2 "$MERGED (B)" "$LOCAL" "$REMOTE" >/dev/null 2>&1' 
```

[作为参考，直接在GitHub 上](https://github.com/git/git/blob/master/mergetools/kdiff3)的源代码中查看长期存在的默认值，我仅通过删除`--auto`.

如果遇到任何问题，请使用以下命令恢复默认设置：

```
git config --global --unset mergetool.kdiff3.cmd
git config --global --unset difftool.kdiff3.cmd 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-20T16:01:18.610

无需配置仅在发生冲突时才调用的 mergetool，只需使用 KDiff3 设置合并驱动程序：

```
git config merge.kdiff.driver 'kdiff3  "%O" "%A" "%B" -o "%A" --L1 "Nearest Common ancestor"  -L2 "Working Copy" --L3 "Version from Other Branch"' 
```

您可以通过添加使该驱动程序全局化`--global`。但是您需要在存储库中添加一个 .gitattribute ：

```
*  merge=kdiff 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-20T09:17:29.603

如果问题与不需要的冲突自动解决严格相关......

KDiff3 打开后，您只需`Merge / Set Deltas to Conflicts`从菜单中按 a，状态就会更新为漂亮的、人为驱动的冲突解决问题。

# jquery - Jquery 动态对话框

> ID：15321475
> 
> 赞同：0
> 
> 时间：2013-03-10T10:59:37.547
> 
> 标签：jquery, dialog

我对 Jquery 很陌生，正在尝试为一系列打开对话框的链接打开一个对话框，但我努力实现这一目标我已经搜索了 3 天，但我找到的每一篇文章都来自这里，看起来非常技术性几乎没有任何解释。

我的目标是从数据库中输出行并将行 ID 分配给这样的按钮。

```
<div id="dialog">
    <div class="content"></div>
</div>
<button id="opener" onClick="showDialog(1)">Oview details</button> 
```

查看详情 查看详情

我希望能够将 eventID 从中传递到 Jquery 对话框。所以我尝试在一个函数中包含主对话框代码并将 eventID 作为参数传递，这似乎不起作用。

```
function showDialog(eventId)
{   
$(document).ready()
{
    $(function () {
        $("#dialog").dialog({
            autoOpen: false,
            height: $(window).height() - 50,
            width: $(window).width() - 50,
            show: {
                effect: "blind",
                duration: 400,
            },

            hide: {
                effect: "explode",
                duration: 400
            },

            //pass the event Id to process and load the content into the div named content.
            open: function (event, ui) {
                $('#content').load("process.php?id=" eventId);
                ;

            }
            buttons: {
                            "Accept Event": function() {
                            $( this ).dialog( "close" );
                            },
                            Cancel: function() {
                            $( this ).dialog( "close" );
                            }
                           }

        });
        $("#opener").click(function () {
            //Show the div named dialog upon clicking of item id opener.
            $("#dialog").dialog('open');

        });
    });

}
} 
```

我可以在一个简单的 confirm() Javascript 框中实现这一点，但我真的很喜欢 Jquery 对话框的样式和效果。

我发送此信息的页面是

进程.php

```
 <?php 
print_r($_GET);
switch($_GET['id'])
{
    case 1: 
        echo "number 1 was passed to dialog"; 
        break;

    case 2: 
        echo "Number 2 was passed to dialog";
        break;

    default: 
        echo "Unknown Dialog Value!!";

} 
```

谁能详细解释实现这一目标的最佳方法？

非常感谢所有花时间阅读这篇真正长篇文章的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:28:50.147

首先，将`document.ready`处理程序放在函数内部是一个坏主意。`$(document).ready() {`并且`$(function () {`也是同样的东西，所以你在处理程序中有一个`document.ready`处理`document.ready`程序，这不是必需的。

重新排列您的代码，如下所示：

```
$(document).ready() {
    function showDialog(eventId) {
        // Place your function logic here
        $("#dialog").dialog({...
    }
} 
```

此外，您希望您的点击侦听器位于`showDialog`函数之外，但在`document.ready`. 按照您现在的方式，处理程序只会在`showDialog`运行一次后应用，因此您必须单击`#opener`两次才能打开对话框。

# ios - 有条件地向多个视图控制器触发 segue

> ID：15321478
> 
> 赞同：4
> 
> 时间：2013-03-10T10:59:54.597
> 
> 标签：ios, objective-c, ios6, uistoryboard, segue

[在有条件地解雇 segue 上挣扎了几天之后，由于西蒙](https://stackoverflow.com/users/904946/simon)[在这里](https://stackoverflow.com/a/7865100/1077789)的回答，我设法解决了它。请花点时间看一下，否则您可能不明白我在说什么。我没有复制粘贴他的答案，因为他已经在那里很好地解释了。

现在我面临一个新问题。如果我有多个 View Controller 想要从一个 View Controller 中转接怎么办？

进一步解释：假设我有一个`MainViewController`有 2 个按钮的。单击每个按钮时，它应该转到各自的视图控制器。第一个按钮 到`FirstViewController`，第二个按钮 到`SecondViewController`。

当您从一个视图控制器切换到另一个视图控制器时，可以使用西蒙回答中描述的方法。由于在该方法中，您将 segue 绑定到 View Controller itsrlf 而不是按钮，因此您只有一个带有该特定 View Controller 标识符的 segue。因此，我无法分别区分按钮点击。

有解决此问题的解决方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:11:39.737

现在说这个可能有点为时过早，但我想你应该更深入地研究 Segue。

**是的，您可以从按钮执行 segure。**只需控制单击按钮并拖动光标即可查看您想要SEGUE 的控制器。根据我的理解，唯一的条件是每个按钮点击都会导致固定视图的转换。那里没有条件。

此外，您可以通过手动推送导航控制器

```
YourViewController *destViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"YourDestinationViewId"];
[self.navigationController pushViewController:destViewController animated:YES]; 
```

**更新：**

prepareForSegue 为时已晚，无法阻止继续进行。是的，您可以从您的视图创建多个 segues 到其他视图控制器。在这种情况下，您必须这样做。不要从按钮创建一个segue，只需在按钮单击上定义一个IBACtion，您就可以从那里进行验证，

```
if(validationSuccess) {
     [self performSegueWithIdentifier:@"segue1" sender:self];
} 
```

如果您使用的是 ios6

```
 - (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender 
```

在验证成功时返回 YES，在失败时返回 NO 以阻止其继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:32:59.253

我建议你看一下修改你的代码逻辑。

如果我理解正确，您有一个带有 2 个按钮的 VC（嵌入在导航控制器中），并且您已经知道如何将每个按钮连接到不同的 VC。

您的问题是您要确保即使按下其中一个按钮，在执行操作之前也会完成验证。我会建议这是糟糕的用户界面设计，因为用户有这样的错觉，即这个按钮可能会做某事，然后他们点击它并且没有任何反应。

UIButton 可以连接到 IBActions（启动操作）和 IBOutlets（设置它们的属性）。如果这是直接在 IB 中创建的按钮，我会将其作为 Outlet 属性连接到您的类：

```
@property (nonatomic,weak) IBOutlet UIButton* myButton; 
```

然后设置其启用值：

```
self.myButton.enabled=NO; 
```

这将保留按钮并使其变暗。这是更好的 UI 设计，用户知道他们不应该按下按钮，因为某些条件不满足。

我会重新编写代码，以便您将此值设置为默认禁用，例如，只要您的“条件”得到满足，就可以在您的代码中适当地启用它。

显然，如果这个按钮是通过编程方式创建的（在没有 IB 的代码中），那么只需使用上面的第二个命令就很容易了。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-18T19:58:00.190

我刚刚写了另一种从单个表中调用多个详细视图的方法。每个单元格本质上都可以显示不同的视图。该代码与您在这篇文章中看到的类似，但您基本上使用列表项上的标识符和属性来确定要显示的视图。

[https://codebylarry.com/2016/07/15/multiple-detail-views-in-swift/](https://codebylarry.com/2016/07/15/multiple-detail-views-in-swift/)

```
override func tableView(tableView: UITableView,didSelectRowAtIndexPath indexPath: NSIndexPath) {
    if indexPath.row == 1 {
        self.performSegueWithIdentifier("secondView", sender: self)
    } else {
        self.performSegueWithIdentifier(“others", sender: self)
    }
} 
```

# javascript - $location 在第一次 ng-click 回调时不导航

> ID：15321479
> 
> 赞同：0
> 
> 时间：2013-03-10T10:59:54.533
> 
> 标签：javascript, angularjs, angularjs-routing

我的 AngularJS 应用程序中发生了一些奇怪的事情。我有一个视图，其中有一个绑定到对象数组的锚标记列表（我`ng-repeat`用来呈现列表）。每个锚标记都`ng-click`绑定到控制器上的方法。方法如下：

```
 $scope.onSiteSelected = function ($event, site) {
        $event.preventDefault();
        $.ajax({
            url: '/Site/GetSiteMap/' + site.Id,
            success: function (response) {
                if (response && response.length > 0) {
                    menuManager.setSiteMap($scope.$root.menu, response[0]);
                    var url = response[0].Children[0].Settings.Url;
                    $location.path(url);
                }
            }
        });
    } 
```

`url`var 每次都被初始化为正确的值。但是，当我第一次单击锚标记时，`$location.path(url)`什么也不做，当我第二次单击它时，它确实导航到目标 URL。

**更新：**

好的，我通过使用以下`$http`服务使其正常工作：

```
 $scope.onSiteSelected = function ($event, site) {
        $event.preventDefault();
        var address = '/Site/GetSiteMap/' + site.Id;
        $http.get(address)
            .success(function (response) {
                if (response && response.length > 0) {
                    menuManager.setSiteMap($scope.$root.menu, response[0]);
                    var url = response[0].Children[2].Settings.Url;
                    $location.path(url);
                }
            });
    } 
```

`$,ajax`如果我使用or真的有什么不同`$http`吗？我以为这两者可以互换使用...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:35:13.060

不，您不能互换使用它们，`$.ajax` 而`jQuery`Angular`$http`的 http 服务是。

抵制使用 jQuery 的冲动，因为几乎总有一种方法可以以有角度的方式进行。

话虽这么说，如果您在 Angular 世界之外做了一些事情（大多数回调不是从 Angular 发生的），您需要应用更改来强制`digest`循环。

```
$.doSth(function callback() {
    $scope.$apply(function () {
        // your actual code
    });
}); 
```

[如果我有 jQuery 背景，](https://stackoverflow.com/questions/14994391/how-do-i-think-in-angularjs-if-i-have-a-jquery-background)请阅读“Thinking in AngularJS”中投票最多的答案？. 这将指导您避免在有替代方案的情况下使用 jQuery。

# mongodb - MongoDB - 按客户分组并以最高价格检索文档

> ID：15321485
> 
> 赞同：2
> 
> 时间：2013-03-10T11:00:53.893
> 
> 标签：mongodb

考虑将这些对象放入`db.invoices`

```
{ "customer" : "john", "price" : 4, "weekday": "WED" }
{ "customer" : "john", "price" : 8, "weekday": "SUN" }
{ "customer" : "john", "price" : 6, "weekday": "SAT" }
{ "customer" : "john", "price" : 5, "weekday": "SUN" }    
{ "customer" : "bob", "price" : 10, "weekday": "SAT" }
{ "customer" : "bob", "price" : 15, "weekday": "MON" } 
```

如何查询每个客户最高价格的单据？对于上述样本：

```
[ {
  "customer": "bob",
  "price": 15,
  "weekday": "MON"
}, {
  "customer": "john",
  "price": 8,
  "weekday": "SUN"
} ] 
```

我无法使用聚合框架弄清楚。

编辑 1：问题是`weekday`与客户姓名一起使用。我不想要单独的最高价格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:36:27.097

因为要包含，所以`weekday`需要对文档进行预排序，以首先从每个组中放入所需的文档，然后使用`$group`with `$first`：

```
db.invoices.aggregate([
    {$sort: {customer: 1, price: -1}},
    {$group: {
        _id: '$customer',
        price: {$first: '$price'},
        weekday: {$first: '$weekday'}
    }}
]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:46:26.543

这是获得所需结果的一种方法，它是以下几种方法之一：

```
db.invoices.aggregate([
    {$project: {customer: 1, other:{ price: "$price", weekday: "$weekday"}}},
    {$group: {
        _id: '$customer',
        max: {$max: '$other'}
    }
]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:15:47.570

您可以使用[$group](http://docs.mongodb.org/manual/reference/aggregation/#_S_group)运算符：

```
db.invoises.aggregate([
  { $group : { _id: '$customer', price: { $max: '$price' } } }
]) 
```

# c++ - 我应该如何将 NULL 传递给 va_list 函数参数？

> ID：15321493
> 
> 赞同：7
> 
> 时间：2013-03-10T11:01:57.803
> 
> 标签：c++, android-ndk, g++, variadic-functions

我想将 NULL 传递给以下函数的第四个参数：

```
bool CCMenuItemToggle::initWithTarget(CCObject* target, SEL_MenuHandler selector, CCMenuItem* item, **va_list args**); 
```

像这样：

```
CCMenuItemToggle::initWithTarget(this, menu_selector(GOSound::toggleButtonCallback), NULL, NULL); 
```

当我在 XCode (clang3.1) 中构建它时没关系。但是当我将代码移植到 android ndk (g++4.7) 时，它无法编译：

> 没有从“int”到“va_list”的可行转换（又名“__builtin_va_list”）

我应该如何处理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T11:42:31.077

我假设如果您只使用空`va_list`而不是 NULL，您的代码将起作用。

```
CCMenuItemToggle::initWithTarget( this, menu_selector(GOSound::toggleButtonCallback)
                                , NULL, va_list() ); 
```

编辑：也许这个替代解决方案适用于两个编译器。

```
va_list empty_va_list = va_list();
CCMenuItemToggle::initWithTarget( this, menu_selector(GOSound::toggleButtonCallback)
                                , NULL, empty_va_list ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T23:34:12.970

您不能`NULL`作为函数的第四个参数传递。该函数需要一个`va_list`参数。`NULL`通常情况下不是`va_list`对象的有效初始化程序。所以，你的问题的答案是：不可能。

你应该如何处理它取决于你想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T22:22:32.893

我看到这个问题得到了回答，但它不是标准的。以下代码将通过 Visual Studios 中的运行时错误；但是，它适用于 g++。

```
 va_list empty_va_list;
CCMenuItemToggle::initWithTarget( this, menu_selector(GOSound::toggleButtonCallback), NULL, empty_va_list ); 
```

更好的解决方案是创建几个帮助函数来构造一个空的 va_list。

```
va_list CCMenuItemToggle::createEmptyVa_list()
{
   return doCreateEmptyVa_list(0);
}

va_list CCMenuItemToggle::doCreateEmptyVa_list(int i,...)
{
    va_list vl;
    va_start(vl,i);
    return vl;
} 
```

将 doCreateEmptyVa_list 设为私有，然后在您调用函数时

```
CCMenuItemToggle::initWithTarget( this, menu_selector(GOSound::toggleButtonCallback), NULL, CreateEmptyVa_list() ); 
```

# asp.net - 奇怪的字符串变量行为

> ID：15321494
> 
> 赞同：0
> 
> 时间：2013-03-10T11:02:05.587
> 
> 标签：asp.net

我在 web.config 文件中存储了以下密钥

```
<appSettings>
       <add key="AdminReqEditURL" value="http://portal.joshworld.local/SitePages/EditRequisition.aspx?RID="/>
    <add key="ITReqEditURL" value="http://portal.joshworld.local/Services/IT/SitePages/EditITRequisition.aspx?RID=" />
</appSettings> 
```

在我后面的代码中，我有一个类似以下的函数，我从中读取键值并从函数中作为字符串返回。

```
public string getURL(string pReqID, int pReqType)
{
    String ForAdmin = System.Configuration.ConfigurationManager.AppSettings["AdminReqEditURL"].ToString();
    String ForIT = System.Configuration.ConfigurationManager.AppSettings["ITReqEditURL"].ToString();

    if (pReqType == 1)
    {
        string theURL = ForAdmin;
        theURL = theURL + pReqID;
        return theURL;
    }
    else
    {
        string theURL = ForIT;
        theURL = theURL + pReqID;
        return theURL;
    }
} 
```

**当我使用类型 1 调用 reqid 例如 5429 时，它返回**

```
"http://portal.joshworld.local/SitePages/EditRequisition.aspx?RID=5429" 
```

**但是当我调用 reqid 例如 5429 类型不是 1 时，比如 0 或 3 或 4 它返回**

```
"http://portal.joshworld.local/Services/IT/SitePages/EditITRequisition.aspx?RID=54" +
    "29" 
```

我尝试减少第二个 url 的长度，它工作正常，但是一旦我增加长度，它就会以奇怪的方式返回字符串。如何纠正这种情况。

# mysql - MYSQL 和唯一键

> ID：15321496
> 
> 赞同：1
> 
> 时间：2013-03-10T11:02:17.420
> 
> 标签：mysql, unique-index

非常初学者的问题：

我将用户注册数据写入 mysql 表，其中包含以下列：id、name、password、email....

为了防止重复电子邮件，我在“电子邮件”上设置了一个唯一索引，并正在检查 php 代码中的错误 23000，即重复电子邮件。到目前为止这工作正常，但是如果我在 phpmyadmin 中删除一个用户（即用户表中的一行）并尝试使用相同的电子邮件地址重新注册，它会给我 23000 错误（“重复电子邮件”）即使这个电子邮件地址已被删除。

为了“刷新”电子邮件上的唯一索引，我是否需要做任何特别的事情（刷新表？...）？

# javascript - 在我设置监听器之前会触发事件吗？

> ID：15321498
> 
> 赞同：1
> 
> 时间：2013-03-10T11:02:38.560
> 
> 标签：javascript, node.js, event-handling

```
var a = new Image();
...
// Is it possible that `load` happens here, so I won't be able to catch it?
...
a.onload = function () {}; 
```

好吧，我想`load`事件不会更早触发。

浏览器如何通过逐轮运行代码神奇地确保这一点？所以事件只有在完成当前回合后才触发？

下面的代码不会输出任何东西，是因为`setTimeout`我们使用 make `foo`run on ***another round***吗？

```
var a = require('child_process').spawn('ls', ['-l']);

setTimeout(function foo() {
  a.stdout.on('data', function (data) {
    console.log(data.toString());
  });
}, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:21:26.267

该代码不会产生任何东西，因为正如您所怀疑的，它在您设置侦听器之前完成。

```
Time   Event
00.000 Spawn Child process 12345 `ls` with arguments `-l`  (a)
00.001 Set Timeout for function foo() in 1 second.
00.011 child process 12345 terminated with data. (a)
01.001 Running foo()
01.002 Attach 'data' event to `a` 
```

基本上，你错过了总线（如果你认为它是串行总线的话）

如果您希望它捕获它，则不应使用 setTimeout 并将其链接起来。

```
var a = require('child_process').spawn('ls', ['-l']).stdout.on('data', function (data) {
  console.log(data.toString());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:25:15.037

> 浏览器如何通过逐轮运行代码神奇地确保这一点？所以事件只有在完成当前回合后才触发？

是的。或者至少应该如此，我不认为它在所有浏览器和所有边缘情况（例如缓存文件）中都是 100% 确保的。`src`因此，您应该始终在设置侦听器后开始加载（通过分配属性）：

```
var a = new Image();
// Is it possible that `load` happens here? No.
a.onload = function () {};
a.src = "";
// Is it possible that `load` happens here? Yes 
```

> 下面的代码不会输出任何东西，是不是因为使用 setTimeout 我们让 foo 在另一轮运行？

确切地。当然，它可能以某种方式（不太可能）发生您的服务器很慢并且`ls -l`在输出之前需要超过一秒钟的时间，然后您就会抓住它。

# php - 从数据库中获取数据，没有得到正确的数据

> ID：15321501
> 
> 赞同：1
> 
> 时间：2013-03-10T11:03:01.507
> 
> 标签：php, mysql, database

我有一个看起来像这样的数据库 -

![图 1](../Images/bf7b36dd6bf05db1117fe0c9408d8194.png)

我正在尝试根据时间获取前 10 个条目（`time`列中具有前 10 个值的条目）。我有以下代码。

```
 <?php
    include_once("connect.php");
    $sql = "SELECT * FROM scores order by time desc limit 10";
    $query = mysql_query($sql) or die("systemResult=Error");
    $counter    = mysql_num_rows($query);

    if($counter>0)
    {
        print("systemResult=Success");
        $array = mysql_fetch_array($query);

        foreach($array as $data)
        {
            $athleteName    = $data["athleteName"];
            $email = $data["email"];
            $time = $data["time"];
            $timeStamp = $data["timeStamp"];
            $country = $data["country"];

            print "&athleteName=" . $athleteName;
            print "&email=" . $email;
            print "&time=".$time;
            print "&timeStamp=".$timeStamp;
            print "&country=".$country;
         }
    }
    else
    {
        print("systemResult=Error");
    }
?> 
```

我得到的输出是

```
systemResult=Success&athleteName=7&email=7&time=7&timeStamp=7&country=7&athleteName=7&email=7&time=7&timeStamp=7&country=7&athleteName=4&email=4&time=4&timeStamp=4&country=4&athleteName=4&email=4&time=4&timeStamp=4&country=4&athleteName=G&email=G&time=G&timeStamp=G&country=G&athleteName=G&email=G&time=G&timeStamp=G&country=G&athleteName=n&email=n&time=n&timeStamp=n&country=n&athleteName=n&email=n&time=n&timeStamp=n&country=n&athleteName=2&email=2&time=2&timeStamp=2&country=2&athleteName=2&email=2&time=2&timeStamp=2&country=2&athleteName=I&email=I&time=I&timeStamp=I&country=I&athleteName=I&email=I&time=I&timeStamp=I&country=I 
```

可以看出，我得到的输出不是数据库表中的输出。我得到了奇怪的价值观。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:06:17.200

您不需要在您的情况下使用 for each，如果是这样，只需打印 $data，尝试删除 foreach 循环，如果您想获取所有记录，则使用 while：

```
 while($data = mysql_fetch_array($query))
    {
        $athleteName    = $data["athleteName"];
        $email = $data["email"];
        $time = $data["time"];
        $timeStamp = $data["timeStamp"];
        $country = $data["country"];

        print "&athleteName=" . $athleteName;
        print "&email=" . $email;
        print "&time=".$time;
        print "&timeStamp=".$timeStamp;
        print "&country=".$country;
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T11:07:21.957

尝试

```
while($data = mysql_fetch_array($query)) {
    $athleteName    = $data["athleteName"];
    //... 
```

# c# - 何时应将操作标记为异步？

> ID：15321505
> 
> 赞同：1
> 
> 时间：2013-03-10T11:03:56.323
> 
> 标签：c#, asp.net-mvc, async-await

我在 mvc 4 应用程序中有一个控制器操作：

```
public ActionResult Index()
    {
        GetStartedModel gsModel = new GetStartedModel();

        return View(gsModel);
    } 
```

和视图模型：

```
public class GetStartedModel
{
    public IEnumerable<SelectListItem> listA { get; set; }
    public IEnumerable<SelectListItem> listB { get; set; }

    public GetStartedModel()
    {
        TestDataWebServiceHelper service = new TestDataWebServiceHelper();
        this.GetData(service);
    }

    private async void SetData(TestDataWebServiceHelper service)
    {
        listA = await this.SetListA(service);
        listB = await this.SetListB(service);
    }

    private async Task<IEnumerable<SelectListItem>> SetListA(TestDataWebServiceHelper service)
    {
        List<String> rawList = new List<String>();
        rawList = await service.GetValuesAsync("json");
        return rawList.Select(x => new SelectListItem { Text = x, Value = x });
    }

    private async Task<IEnumerable<SelectListItem>> SetListB(TestDataWebServiceHelper service)
    {
        List<String> rawList = new List<String>();
        rawList = await service.GetValuesAsync("json");
        return rawList.Select(x => new SelectListItem { Text = x, Value = x });
    }
} 
```

当我调用此控制器操作时，我收到以下错误：

> 此时无法启动异步操作。异步操作只能在异步处理程序或模块内或在页面生命周期中的某些事件期间启动。如果在执行页面时发生此异常，请确保将页面标记为 <%@ Page Async="true" %>。

所以，问题：

1.  我是否应该以某种方式将控制器或操作或页面本身标记为异步以允许此模型初始化？
2.  是否可以将所有初始化逻辑封装到 viewmodel 而不是将其弹出到控制器？
3.  该错误的原因是什么？看起来它与 WebForms 相关，但我使用 Razor 引擎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T17:29:12.297

您的代码中有两个问题：

1.  你不应该`async void`像这样从构造函数开始操作。事实上，您通常不应该`async`从构造函数开始任何操作，也不应该使用`async void`方法（事件处理程序除外）。

    我认为在您的情况下，`async`工厂方法而不是构造函数最有意义：

    ```
    private GetStartedModel()
    {}

    public static async Task<GetStartedModel> Create()
    {
        var service = new TestDataWebServiceHelper();
        var result = new GetStartedModel();
        listA = await result.SetListA(service);
        listB = await result.SetListB(service);
        return result;
    } 
    ```

    有关更多详细信息，请参阅[Stephen Cleary 关于`async`构造函数](http://blog.stephencleary.com/2013/01/async-oop-2-constructors.html)的帖子。

2.  您还需要进行控制器操作`async`：

    ```
    public async Task<ActionResult> Index()
    {
        var gsModel = await GetStartedModel.Create()

        return View(gsModel);
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:50:52.240

**关于“异步”，需要注意以下几点：**

*   **该方法仅在需要等待**由其中编写的代码执行的**操作**时才应该是“异步”的。
*   如果该方法中没有“等待”的内容，则不应将该方法声明为“异步”。
*   如果有任何事件（或事件处理程序）被标记为异步，则返回类型应为“void”或任何特定的返回类型
*   但如果任何其他（通用）方法应标记为“异步”，则返回类型应为`Task`or `Task< return-type >`。

**现在来回答你的问题，**

*   绝对可以将“控制器”，“事件”和“页面”标记为异步（我不确定是否将页面标记为异步，因为我从未使用过它）并且这些方法将暂停，直到执行操作完全用那个方法写的。
*   这就是将整个初始化逻辑封装在 viewModel 中的实际系统。
    *   为此制作一个 Floder，将其命名为“ViewModels”并将所有 viewModel 代码放在该文件夹中，并在需要时使用它。

您应该将此代码放在 ViewModel 中：

```
private async void SetData(TestDataWebServiceHelper service)
{
    listA = await this.SetListA(service);
    listB = await this.SetListB(service);
}

private async Task<IEnumerable<SelectListItem>> SetListA(TestDataWebServiceHelper service)
{
    List<String> rawList = new List<String>();
    rawList = await service.GetValuesAsync("json");
    return rawList.Select(x => new SelectListItem { Text = x, Value = x });
}

private async Task<IEnumerable<SelectListItem>> SetListB(TestDataWebServiceHelper service)
{
    List<String> rawList = new List<String>();
    rawList = await service.GetValuesAsync("json");
    return rawList.Select(x => new SelectListItem { Text = x, Value = x });
} 
```

然后你应该在需要时调用它。

**（希望这可以帮助...）**

# c - 在C中制作范围0-9的数据类型

> ID：15321506
> 
> 赞同：0
> 
> 时间：2013-03-10T11:04:00.020
> 
> 标签：c

是否可以创建一个只能取 0 到 9 整数值的数据类型？如果是，请告诉如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:06:52.233

不，不可能在 C 中创建自定义范围的整数。您必须自己维护这样的不变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:12:50.357

由于 C 中的整数溢出是未定义的行为，您可以简单地将您喜欢的任何（有符号）整数类型视为仅具有 0-9 范围。就像 normal 一样`int`，超出该范围（从您的角度来看）将是未定义的行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T15:30:36.273

```
/*Try This Code
when you entered value more than 9 or less than 10 it show error
Hope this will help you */ 
#include<stdio.h>
#include<conio.h>
void main()
{
    int a;
    clrscr();
    start:printf("\nEnter a No. between 0 to 9=");
    scanf("%d",&a);
    if(a>9 || a<0)
    {
        printf("Please Input No. between 0 to 9");
    goto start;
    }
    else
    {
    printf("You Have Entered %d",a);
    }
        getch();
} 
```

# c - 分段错误 - 32 / 64 位问题？

> ID：15321507
> 
> 赞同：0
> 
> 时间：2013-03-10T11:04:01.513
> 
> 标签：c, triggers, capture

我目前正在从事一个小型项目，该项目在超出特定限制以处理以下步骤（例如警报、空路由等）时捕获数据包并触发外部应用程序或脚本。

我尝试使用此代码创建一个非常简单的触发器（“触发器”包含二进制文件或脚本的路径）：

```
char * trigger_complete;
sprintf(trigger_complete, "%s %u %u %s %s %Lf", trigger, data[II].count, data[II].proto, inet_ntoa(data[II].src_ip), inet_ntoa(data[II].dst_ip), rate);
system (trigger_complete); 
```

在我的 Ubuntu 12.04.1 LTS 上，它似乎可以正常工作，我使用“echo”应用程序进行了测试。

```
linux-gate.so.1 =>  (0xb779f000)
libpcap.so.0.8 => /usr/lib/i386-linux-gnu/libpcap.so.0.8 (0xb7752000)
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb75a8000)
/lib/ld-linux.so.2 (0xb77a0000) 
```

在 Debian Wheezy 和“grml”实例上，我在执行二进制文件时收到分段错误。（我通过注释掉并重试验证了这个问题是由上面的代码段引起的。）

```
linux-vdso.so.1 =>  (0x00007fff875ff000)
libpcap.so.0.8 => /usr/lib/x86_64-linux-gnu/libpcap.so.0.8 (0x00007fa9c6048000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fa9c5cbe000)
/lib64/ld-linux-x86-64.so.2 (0x00007fa9c608d000) 
```

我看到的唯一区别是架构，Ubuntu 系统是 32 位操作系统，而 Debian 是 64 位操作系统。

我不确定这是否是问题所在，但似乎是这样。

谁能帮我解决这个问题？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T11:54:05.993

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

...可能想为 trigger_complete 分配一些内存！– 托马斯

# java - 全高元素 - MiGLayout

> ID：15321512
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:04:13.323
> 
> 标签：java, swing, miglayout

我有下图。它由一个 JPanel 组成，其中一个标签用于图片，另一个用于“@usuario1”文本，另一个用于“contenido”，另一个用于“#demo”。图片下方是构造它的代码。

![源代码](../Images/4a5e255b16626e8fbe62286a49c12be2.png)

```
SettingsManagerTab.panelForTweet1 = new JPanel();
SettingsManagerTab.panelForTweet1.setOpaque(true);
SettingsManagerTab.panelForTweet1.setLayout(new net.miginfocom.swing.MigLayout());
this.add(SettingsManagerTab.panelForTweet1);

SettingsManagerTab.labelForTweetPhoto1 = new JLabel(new ImageIcon(
        SettingsManagerTab.class.getResource("/res/User1.png")));
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetPhoto1);

SettingsManagerTab.labelForTweetUsername1 = new JLabel("@usuario1");
final Font contentFont = new Font(SettingsManagerTab.labelForTweetUsername1.getFont()
        .getName(), Font.BOLD, SettingsManagerTab.labelForTweetUsername1.getFont()
        .getSize());
final Font userFont = new Font(contentFont.getName(), Font.BOLD,
        (int) (contentFont.getSize() * 0.7));
SettingsManagerTab.labelForTweetUsername1.setFont(userFont);
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetUsername1);

SettingsManagerTab.labelForTweetContent1 = new JLabel("contenido");
SettingsManagerTab.labelForTweetContent1.setFont(contentFont);
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetContent1);

SettingsManagerTab.labelForTweetHashtag1 = new JLabel("#demo");
SettingsManagerTab.labelForTweetHashtag1.setFont(contentFont);
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetHashtag1); 
```

但我想要实现的是：

![目标](../Images/dbc8d3a5c48c0c877ad50299cbb115ac.png)

对我来说这看起来微不足道。只需用图片制作标签，然后添加带有*wrap选项的“@* *usuario1* ”，以便在下一行的开头添加下一个组件（“contenido”标签），并且由于图片标签占据了所有JPanel 的高度，提到的下一行将在“@usuario1”标签下方开始。然而，似乎发生的是下一行从图片标签下方开始，但由于标签占据了 JPanel 的所有高度，因此没有显示，所以我得到的结果比开始时更差。

 *我的目标可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:19:14.050

浏览MiGLayout[链接](http://www.miglayout.com/)中的PDF，或者您可以尝试 GridBagLayout。如果您想使用 GridBagLayout，[此链接](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)可能会有所帮助。使用 GridBagLayout 您可以根据需要设置组件。

参考下面的例子：

```
 panel.add(comp1);
    panel.add(comp2, "span 2 2"); // The component will span 2x2 cells.
    panel.add(comp3, "wrap"); // Wrap to next row
    panel.add(comp4);
    panel.add(comp5, "wrap"); // Note that it "jumps over" the occupied cells.
    panel.add(comp6);
    panel.add(comp7); 
```

开/关：

![在此处输入图像描述](../Images/fe009cd55da5f257abcbd2ec16e6e558.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:46:48.810

哈哈！由于您的指示 sachin 设法做到了，但使用了 GridBagLayout。

```
SettingsManagerTab.panelForTweet1.setLayout(new GridBagLayout());
this.add(SettingsManagerTab.panelForTweet1);

SettingsManagerTab.labelForTweetPhoto1 = new JLabel(new ImageIcon(
        SettingsManagerTab.class.getResource("/res/User1.png")));

final GridBagConstraints a = new GridBagConstraints(), b = new GridBagConstraints(), c = new GridBagConstraints(), d = new GridBagConstraints();
a.gridheight = GridBagConstraints.REMAINDER;
a.gridx = 0;
a.weightx = 0.1;
a.anchor = GridBagConstraints.LINE_START;
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetPhoto1, a);

SettingsManagerTab.labelForTweetUsername1 = new JLabel("@usuario1");
final Font contentFont = new Font(SettingsManagerTab.labelForTweetUsername1.getFont()
        .getName(), Font.BOLD, SettingsManagerTab.labelForTweetUsername1.getFont()
        .getSize());
final Font userFont = new Font(contentFont.getName(), Font.BOLD,
        (int) (contentFont.getSize() * 0.7));
SettingsManagerTab.labelForTweetUsername1.setFont(userFont);
b.weightx = 1;
b.gridwidth = 2;
b.anchor = GridBagConstraints.LINE_START;
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetUsername1, b);

SettingsManagerTab.labelForTweetContent1 = new JLabel("contenido");
SettingsManagerTab.labelForTweetContent1.setFont(contentFont);
c.gridheight = GridBagConstraints.REMAINDER;
c.weightx = 1;
c.anchor = GridBagConstraints.LINE_START;
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetContent1, c);

SettingsManagerTab.labelForTweetHashtag1 = new JLabel("#demo");
SettingsManagerTab.labelForTweetHashtag1.setFont(contentFont);
d.weightx = 30;
d.anchor = GridBagConstraints.LINE_START;
SettingsManagerTab.panelForTweet1.add(SettingsManagerTab.labelForTweetHashtag1, d); 
```*

# mongodb - 带有链式数据库名的 Monogjs

> ID：15321514
> 
> 赞同：0
> 
> 时间：2013-03-10T11:04:21.097
> 
> 标签：mongodb, express

我对所有 Express 的东西都不熟悉。在我的应用程序中，我需要一个用户集合和几个成员集合（每个社区一个）。我正在使用 mongojs 并且它很棒，除非我想使用链式数据库名称，例如：db.kbz01.members

我收到一个错误：

var 成员 = db.kbz01.members;

```
 ^ 
```

TypeError：无法读取未定义的属性“成员”

在 mongo shell 中，我可以使用这种名称没有问题。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:35:02.680

使用 mongoose - npm install mongoose, mongoose = require('mongoose'); 猫鼬的文档在这里 - [http://mongoosejs.com/](http://mongoosejs.com/)

# java - 如何从 JavaFX 客户端发出 HTTP 发布请求？

> ID：15321515
> 
> 赞同：3
> 
> 时间：2013-03-10T11:04:24.087
> 
> 标签：java, http, javafx-2

我有一个接受的 HTTP 服务器`HTTP POST requests`，它对于从网络浏览器发出的请求工作得很好。

现在，我想从使用`JavaFX-2`. 请分享一个代码片段，足以将两个字符串类型参数 Ex`Username and Password`从`JavaFX-2`客户端传递到 HTTP 服务器并处理来自服务器的响应。

PS：由于我是新手，所以我`JavaFX`只是想知道 JavaFX 中是否有任何特殊的 HTTP 客户端 API 可用，或者它就像从现有 Java API 发出的任何 HTTP 请求一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:10:37.623

简短的回答——在这种情况下，JavaFX 和 Java 没有区别。使用标准的 Java 方式发送 HTTP 请求。

要检索登录名和密码，您可以使用 PasswordField 和 TextField 创建一个非常简单的阶段。

JFX 场景的代码（非常简单）：

```
@Override
public void start(Stage stage) throws Exception {
    final TextField tf = new TextField();
    final PasswordField pf = new PasswordField();
    Button b = new Button("post");
    b.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent t) {
            //Run a separate thread for posting and getting an answer.
            new Thread(new Runnable() {
                @Override
                public void run() {
                    String login = tf.getText();
                    String pswd = pf.getText();

                    //Do post (read, from link below)

                    //Update of fragment from that article about POST in Java:
                    if (entity != null) {
                        InputStream instream = entity.getContent();
                        try {
                            //If you need to update of UI here, use Platform.runLater(Runnable);
                        } finally {
                            instream.close();
                        }
                    }
                }
            }).start();

            //Erase pswd, if needed
        }
    });
    stage.setScene(new Scene(new VBox(tf, pf, b), 300, 300));
    stage.show();
} 
```

关于如何发帖，你可以在这里阅读：[用 Java 发送 HTTP POST 请求](https://stackoverflow.com/questions/3324717/sending-http-post-request-in-java)

# node.js - Nodejs 子文件夹脚本

> ID：15321525
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:05:12.537
> 
> 标签：node.js, subdirectory

我正在尝试在端口 81 上使用一个脚本来管理多个其他快速脚本。

我正在尝试这样做：

server.com => 端口 81 上的主服务器

*   首先在端口 8881 上表达 => 可在 server.com/first 上访问
*   端口 8882 上的第二个 express => 可在 server.com/second 上访问
*   ...

我尝试过使用 vhost（express/connect vhost），但我不想使用多个子域。

如果有人知道我该怎么做...或者我的错误在哪里...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:32:48.190

如果您只是尝试将请求代理到不同的端口，您可以查看[Bouncy](https://github.com/substack/bouncy)。

另一种选择（如果两个应用程序相关，例如同一网站的两个部分）是将两个 Express 应用程序用作主 Express 应用程序的子应用程序。为此，您将创建一个在端口 81 上运行的主要 Express 应用程序，并包括以下行：

```
var first  = require('path/to/first');
var second = require('path/to/second');

app.use('/first', first);
app.use('/second', second); 
```

这将有效地将您的应用程序“安装”到给定安装位置的较大应用程序中。我可能只会这样做，因为应用程序以某种方式相关。

# sql - sql select成对显示帖子，用经典asp

> ID：15321529
> 
> 赞同：0
> 
> 时间：2013-03-10T11:05:54.833
> 
> 标签：sql, select, asp-classic

我需要成对显示数据库中的帖子，我不确定最好的方法是什么。该页面是用经典的asp完成的。

我想得到这个结构：

```
<ul>
<li>

<img src="image_1.jpg" />
<img src="image_2.jpg" />

</li>
<li>

<img src="image_3.jpg" />
<img src="image_4.jpg" />

</li>
</ul> 
```

那么，如果我从下面开始，我该如何使用 asp 呢？

```
 <ul>

<% do until rs.eof%>
    <li>

    <img src="<%=rs("image")%>" />

    </li>
<% rs.movenext
   loop %> 
```

任何输入表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:10:10.137

这是关于如何在经典 ASP 问题中获得交替表格行颜色的变体。基本上，它涉及在循环遍历记录集并检查当前值是奇数还是偶数时运行计数。如果你用谷歌搜索，就会有很多例子——这里有一个

[http://www.aspwebpro.com/aspscripts/database/alternaterowcolor.asp](http://www.aspwebpro.com/aspscripts/database/alternaterowcolor.asp)

在此示例中，您可以执行类似的操作，而不是指定表格行

```
<ul>
<li>    
<% iRecordCount = 0 
do until rs.eof
iRecordCount = iRecordCount+1 %>
<img src="<%=rs("image")%>" />
<% IF iRecordCount Mod 2 = 0 THEN %>
</li>
<li>
<% END IF %>
<% rs.movenext
loop 
IF iRecordCount Mod 2 = 0 THEN %>
</ul>
<% else %>
</li>
</ul>
<% end if %> 
```

询问 CSS 人员是否有任何想法可能是值得的。我确定我已经将您要查找的内容视为基本的无序列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:42:06.357

为什么不使用变量，递增然后重置它：

```
Dim i = 1

Do until rs.EOF
  If i = 1 Then
    Response.Write "<li>"
  End If

  Response.Write "<img src=""" & rs("image") & """ />"

  If i>=2 Then
    Response.Write "</li>"
    i = 0
  End If

  i = i + 1
  rs.movenext
Loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:06:12.883

我用这段代码解决了它：

```
<ul>
<% dim irecordcount
irecordcount=1
%>

<li>

<% do until rs.eof %>

<img src="<%=rs("big_image")%>" />
<!--Im only displaying 30 images and here I write the </li><li> if it an even row, and also I dont write the last </li><li>-->
<%if irecordcount mod 2=0 and irecordcount <>30 then%>
</li>
<li>
<% end if
irecordcount=irecordcount+1
rs.movenext
loop%>
 </li>          
</ul> 
```

# c++ - 获取地图的密钥 >

> ID：15321530
> 
> 赞同：2
> 
> 时间：2013-03-10T11:05:56.227
> 
> 标签：c++

`map<string,vector<string>>mymap`假设我怎样才能得到这样一张地图的钥匙`mymap["index"]={"val1","val2"}`？我在这里找到了像法线贴图这样的解决方案，`map<string,string>`但为此我不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T11:10:54.700

You can iterate through all the values in the map (which are pairs) and refer their first and second element to obtain, respectively, the key and the mapped value:

```
#include <map>
#include <vector>
#include <string>

int main()
{
    std::map<std::string, std::vector<std::string>> m;
    // ...
    for (auto& p : m)
    {
        std::string const& key = p.first;
        // ...

        std::vector<std::string>& value = p.second;
        // ...
    }
} 
```

Of course, you could achieve the same using `std::for_each` instead:

```
#include <map>
#include <vector>
#include <string>
#include <algorithm>

int main()
{
    std::map<std::string, std::vector<std::string>> m;
    // ...
    std::for_each(begin(m), end(m), [] (
        std::pair<std::string const, std::vector<std::string>>& p
        //                    ^^^^^
        //                    Mind this: the key is constant. Omitting this would
        //                    cause the creation of a temporary for each pair
        )
    {
        std::string const& key = p.first;
        // ...

        std::vector<std::string>& value = p.second;
        // ...
    });
} 
```

Finally, you may also roll your own manual `for` loop, although I personally consider this less idiomatic:

```
#include <map>
#include <vector>
#include <string>

int main()
{
    std::map<std::string, std::vector<std::string>> m;
    // ...
    for (auto i = begin(m); i != end(m); ++i)
    {
        std::string const& key = i->first;
        // ...

        std::vector<std::string>& value = i->second;
        // ...
    }
} 
```

* * *

This is how the last example above would look like in C++03, where type deduction through `auto` is not supported:

```
#include <map>
#include <vector>
#include <string>

int main()
{
    typedef std::map<std::string, std::vector<std::string>> my_map;
    my_map m;

    // ...
    for (my_map::iterator i = m.begin(); i != m.end(); ++i)
    {
        std::string const& key = i->first;
        // ...

        std::vector<std::string>& value = i->second;
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T11:07:18.957

地图在`std::pair<key_type, mapped_type>`内部保存，因此在地图上进行迭代可以让您通过 访问键`it->first`，其中`it`是迭代器。

```
std::map<std::string, std::vector<string>> m;

for (auto it = m.cbegin(), it != m.cend(); ++it)
  std::cout << "key " << it->first << std::endl; 
```

基于范围的循环版本是

```
for (const auto& stuff : m)
  std::cout << "key " << stuff.first << std::endl; 
```

# ldap - 在没有特殊 gitlab 用户的情况下设置 gitlab LDAP 身份验证

> ID：15321532
> 
> 赞同：12
> 
> 时间：2013-03-10T11:06:10.503
> 
> 标签：ldap, gitlab

我想用我们公司的 LDAP 设置 Gitlab 作为演示。但不幸的是，我必须在 gitlab.yml 中输入管理员密码才能使 gitlab 访问 LDAP 服务。问题实际上是管理，因为他们不想只为 Gitlab 设置另一个帐户。有没有办法在不填写我自己的密码的情况下绕过这个问题？有没有办法让 Gitlab 仅使用提供的用户凭据建立 LDAP 连接？

除了匿名登录还有什么想法吗？

已经张贴[在这里](https://groups.google.com/forum/#!topic/gitlabhq/LwKAtT_Q0cM)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T08:39:59.973

我还没有尝试过，但是根据我迄今为止构建的针对 LDAP 进行身份验证的内容以及来自配置文件的信息，这个用户帐户似乎只在您的 LDAP 不支持匿名绑定和搜索时才需要。

所以我会留下这两个条目`bind_dn`并`password`注释掉并尝试它是否有效。

**更新**

我已经在 Gitlab 中实现了 LDAP-Autehntication，它相当简单。

在`gitlab.yml`-file 中有一个名为`ldap`.

您必须在此处提供连接到 LDAP 的信息。好像所有的字段都得给，好像没有fallback default！如果您想使用匿名绑定来检索用户 DN，请为`bind_dn` and提供一个空字符串`password`。评论他们似乎不起作用！至少我收到了 501 错误消息。

更多信息可以在[https://github.com/patthoyts/gitlabhq/wiki/Setting-up-ldap-auth](https://github.com/patthoyts/gitlabhq/wiki/Setting-up-ldap-auth)和（更过时但仍然有用）[https://github.com/intridea/omniauth-ldap找到](https://github.com/intridea/omniauth-ldap)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-03T01:16:03.407

我已经修补了 gitlab 以这种方式工作，并在 [https://foivos.zakkak.net/tutorials/gitlab_ldap_auth_without_querying_account/中记录了该过程](https://foivos.zakkak.net/tutorials/gitlab_ldap_auth_without_querying_account/)

为了自我完整性，我无耻地复制了这里的说明。

**注意**：本教程最后使用从源代码安装的 gitlab 8.2 进行了测试。

本教程旨在描述如何修改[Gitlab](https://gitlab.com/)安装以使用用户凭据向 LDAP 服务器进行身份验证。默认情况下， [Gitlab](https://gitlab.com/)依赖匿名绑定或特殊*查询*用户来询问 LDAP 服务器用户的存在，然后再使用她自己的凭据对她进行身份验证。然而，出于安全原因，许多管理员禁用匿名绑定并禁止创建特殊*查询*LDAP 用户。

在本教程中，我们假设我们在 gitlab.example.com 上有一个 gitlab 设置和一个在 ldap.example.com 上运行的 LDAP 服务器，并且用户具有以下形式的 DN `CN=username,OU=Users,OU=division,OU=department,DC=example,DC=com`：.

# 打补丁

为了让[Gitlab](https://gitlab.com/)在这种情况下工作，我们需要部分修改其关于 LDAP 的身份验证机制。

[首先，我们用这个](https://github.com/zakkak/omniauth-ldap)派生替换了omniauth-ldap 模块。为此，我们将以下补丁应用于`gitlab/Gemfile`：

```
diff --git a/Gemfile b/Gemfile
index 1171eeb..f25bc60 100644
--- a/Gemfile
+++ b/Gemfile
@@ -44,4 +44,5 @@ gem 'gitlab-grack', '~> 2.0.2', require: 'grack'
 # LDAP Auth
 # GitLab fork with several improvements to original library. For full list of changes 
 # see https://github.com/intridea/omniauth-ldap/compare/master...gitlabhq:master
-gem 'gitlab_omniauth-ldap', '1.2.1', require: "omniauth-ldap"
+#gem 'gitlab_omniauth-ldap', '1.2.1', require: "omniauth-ldap"
+gem 'gitlab_omniauth-ldap', :git => 'https://github.com/zakkak/omniauth-ldap.git', require: 'net-ldap', require: "omniauth-ldap" 
```

现在，我们需要执行以下操作：

1.  `sudo -u git -H bundle install --without development test mysql --path vendor/bundle --no-deployment`
2.  `sudo -u git -H bundle install --deployment --without development test mysql aws`

这些命令将获取修改后的omniauth-ldap 模块 `gitlab/vendor/bundle/ruby/2.x.x/bundler/gems`。现在模块已获取，我们需要修改它以使用 LDAP 服务器期望的 DN。我们通过修补`lib/omniauth/strategies/ldap.rb`来 实现这一点`gitlab/vendor/bundle/ruby/2.x.x/bundler/gems/omniauth-ldap`：

```
diff --git a/lib/omniauth/strategies/ldap.rb b/lib/omniauth/strategies/ldap.rb
index 9ea62b4..da5e648 100644
--- a/lib/omniauth/strategies/ldap.rb
+++ b/lib/omniauth/strategies/ldap.rb
@@ -39,7 +39,7 @@ module OmniAuth
         return fail!(:missing_credentials) if missing_credentials?

         # The HACK!  FIXME: do it in a more generic/configurable way
-        @options[:bind_dn]  = "CN=#{request['username']},OU=Test,DC=my,DC=example,DC=com"
+        @options[:bind_dn]  = "CN=#{request['username']},OU=Users,OU=division,OU=department,DC=example,DC=com"
         @options[:password] = request['password']
         @adaptor = OmniAuth::LDAP::Adaptor.new @options 
```

使用此模块，gitlab 使用用户的凭据绑定到 LDAP 服务器并对其进行查询，以及对用户本人进行身份验证。

但是，这仅在用户不使用 ssh-keys 与[Gitlab](https://gitlab.com/)进行身份验证时才有效。通过 ssh-key 进行身份验证时，默认情况下[Gitlab 会](https://gitlab.com/)查询 LDAP 服务器以查明相应的用户是否（仍然）是有效用户。此时，我们无法使用用户凭据来查询 LDAP 服务器，因为用户没有将它们提供给我们。结果我们禁用了这个机制，本质上允许注册了 ssh-keys 但从 LDAP 服务器中删除的用户仍然使用我们的[Gitlab](https://gitlab.com/)设置。为了防止此类用户仍然能够使用您的[Gitlab](https://gitlab.com/)设置，您必须从设置中的任何帐户中手动删除他们的 ssh 密钥。

要禁用此机制，我们使用以下补丁`gitlab/lib/gitlab/ldap/access.rb` ：

```
diff --git a/lib/gitlab/ldap/access.rb b/lib/gitlab/ldap/access.rb
index 16ff03c..9ebaeb6 100644
--- a/lib/gitlab/ldap/access.rb
+++ b/lib/gitlab/ldap/access.rb
@@ -14,15 +14,16 @@ module Gitlab
       end

       def self.allowed?(user)
-        self.open(user) do |access|
-          if access.allowed?
-            user.last_credential_check_at = Time.now
-            user.save
-            true
-          else
-            false
-          end
-        end
+        true
+        # self.open(user) do |access|
+        #   if access.allowed?
+        #     user.last_credential_check_at = Time.now
+        #     user.save
+        #     true
+        #   else
+        #     false
+        #   end
+        # end
       end

       def initialize(user, adapter=nil)
@@ -32,20 +33,21 @@ module Gitlab
       end

def allowed?
-        if Gitlab::LDAP::Person.find_by_dn(user.ldap_identity.extern_uid, adapter)
-          return true unless ldap_config.active_directory
+        true
+        # if Gitlab::LDAP::Person.find_by_dn(user.ldap_identity.extern_uid, adapter)
+        #   return true unless ldap_config.active_directory

-          # Block user in GitLab if he/she was blocked in AD
-          if Gitlab::LDAP::Person.disabled_via_active_directory?(user.ldap_identity.extern_uid, adapter)
-            user.block unless user.blocked?
-            false
-          else
-            user.activate if user.blocked? && !ldap_config.block_auto_created_users
-            true
-          end
-        else
-          false
-        end
+        #   # Block user in GitLab if he/she was blocked in AD
+        #   if Gitlab::LDAP::Person.disabled_via_active_directory?(user.ldap_identity.extern_uid, adapter)
+        #     user.block unless user.blocked?
+        #     false
+        #   else
+        #     user.activate if user.blocked? && !ldap_config.block_auto_created_users
+        #     true
+        #   end
+        # else
+        #   false
+        # end
rescue
false
end 
```

# 配置

在`gitlab.yml`使用类似以下的内容（根据您的需要修改）：

```
#
# 2\. Auth settings
# ==========================

## LDAP settings
# You can inspect a sample of the LDAP users with login access by running:
#   bundle exec rake gitlab:ldap:check RAILS_ENV=production
ldap:
  enabled: true
  servers:
    ##########################################################################
    #
    # Since GitLab 7.4, LDAP servers get ID's (below the ID is 'main'). GitLab
    # Enterprise Edition now supports connecting to multiple LDAP servers.
    #
    # If you are updating from the old (pre-7.4) syntax, you MUST give your
    # old server the ID 'main'.
    #
    ##########################################################################
    main: # 'main' is the GitLab 'provider ID' of this LDAP server
      ## label
      #
      # A human-friendly name for your LDAP server. It is OK to change the label later,
      # for instance if you find out it is too large to fit on the web page.
      #
      # Example: 'Paris' or 'Acme, Ltd.'
      label: 'LDAP_EXAMPLE_COM'

      host: ldap.example.com
      port: 636
      uid: 'sAMAccountName'
      method: 'ssl' # "tls" or "ssl" or "plain"
      bind_dn: ''
      password: ''

      # This setting specifies if LDAP server is Active Directory LDAP server.
      # For non AD servers it skips the AD specific queries.
      # If your LDAP server is not AD, set this to false.
      active_directory: true

      # If allow_username_or_email_login is enabled, GitLab will ignore everything
      # after the first '@' in the LDAP username submitted by the user on login.
      #
      # Example:
      # - the user enters 'jane.doe@example.com' and 'p@ssw0rd' as LDAP credentials;
      # - GitLab queries the LDAP server with 'jane.doe' and 'p@ssw0rd'.
      #
      # If you are using "uid: 'userPrincipalName'" on ActiveDirectory you need to
      # disable this setting, because the userPrincipalName contains an '@'.
      allow_username_or_email_login: false

      # To maintain tight control over the number of active users on your GitLab installation,
      # enable this setting to keep new users blocked until they have been cleared by the admin
      # (default: false).
      block_auto_created_users: false

      # Base where we can search for users
      #
      #   Ex. ou=People,dc=gitlab,dc=example
      #
      base: 'OU=Users,OU=division,OU=department,DC=example,DC=com'

      # Filter LDAP users
      #
      #   Format: RFC 4515 http://tools.ietf.org/search/rfc4515
      #   Ex. (employeeType=developer)
      #
      #   Note: GitLab does not support omniauth-ldap's custom filter syntax.
      #
      user_filter: '(&(objectclass=user)(objectclass=person))' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T13:38:04.420

GitLab 使用**[omniauth](https://github.com/intridea/omniauth/wiki)**来管理多个登录源（包括LDAP）。

因此，如果您可以以某种方式扩展`omniauth`以以不同方式管理 LDAP 连接，则可以从其他来源获取密码。
这将允许您避免在[配置文件的](https://github.com/gitlabhq/gitlabhq/blob/master/config/gitlab.yml.example#L64-L77)[ldap 部分`gitlab.yml`](https://github.com/gitlabhq/gitlabhq/blob/master/config/gitlab.yml.example#L64-L77)保留所述密码。

# java - 在 GUI 中生成非重复随机方法

> ID：15321536
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:07:03.620
> 
> 标签：java, swing, user-interface, random, actionlistener

我一直在看我的电脑显示器，因为当我单击“**开始**”按钮时，我真的不知道该怎么做才能防止我的程序上的帧同时出现。

这是我的主要课程：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.util.Random;
import javax.swing.*;

public class PopQuizDemo {
    public static void main (String args[]){
        PopQuizDemo();
    }

        public static void PopQuizDemo(){
        final SimpleFrame frame = new SimpleFrame();

        final JPanel main = new JPanel();
        main.setSize(400,75);
        main.setLayout(new GridLayout(3,1));
        frame.add(main);

        JLabel l1 = new JLabel("Welcome to POP Quiz!");
        main.add(l1);

        JLabel l2 = new JLabel("Enter your name:");
        main.add(l2);

        final JTextField name = new JTextField ();
        main.add(name);

        final JPanel panel = new JPanel();
        panel.setSize(400,50);
        panel.setLocation(0,225);
        frame.add(panel);

        JButton start = new JButton ("Start");
        panel.add(start);

        frame.setVisible(true);

        start.addActionListener(new ActionListener(){
             public void actionPerformed(ActionEvent e){
                 frame.setVisible(false);
                 randomize();
             }
        });
    }

    public static void randomize(){
        Questions q = new Questions();
        int a=0;
        Random randnum = new Random (System.currentTimeMillis());
        java.util.HashSet<Integer> myset = new java.util.HashSet<>();
        for (int count = 1; count <= 3; count++){
            while (true) {
                a = randnum.nextInt (3);
                if(!myset.contains(a)) { myset.add(new Integer(a)); break;}
            }
            if(a==0){
                q.one();
            }
            else if(a==1){
                q.two();
            }
            else if(a==2){
                q.three();
            }
            else{
                break;
            }
        }
    }
} 
```

这是类问题，我在其中获得方法一（），二（）和三（）：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Questions {
public static void one(){
    final SimpleFrame frame = new SimpleFrame();

    JPanel p1 = new JPanel();
    p1.setSize(400,100);
    frame.add(p1);

    JLabel qu1 = new JLabel();
    qu1.setText("In computers, what is the smallest and basic unit of");
    JLabel qu2 = new JLabel();
    qu2.setText("information storage?");
    p1.add(qu1);
    p1.add(qu2);

    JPanel p2 = new JPanel();
    p2.setSize(400,175);
    p2.setLocation(0,100);
    p2.setLayout(new GridLayout(2,4));
    frame.add(p2);

    JButton a = new JButton("a. Bit");
    p2.add(a);

    JButton b = new JButton("b. Byte");
    p2.add(b);

    JButton c = new JButton("c. Data");
    p2.add(c);        

    JButton d = new JButton("d. Newton");
    p2.add(d);

    frame.setVisible(true);

    final PopQuizDemo demo = new PopQuizDemo();

    a.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    b.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    c.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    d.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
}//end of method

public static void two(){
    final SimpleFrame frame = new SimpleFrame();

    JPanel p1 = new JPanel();
    p1.setSize(400,100);
    frame.add(p1);

    JLabel qu1 = new JLabel();
    qu1.setText("Machine language is also known as __________.");
    p1.add(qu1);

    JPanel p2 = new JPanel();
    p2.setSize(400,175);
    p2.setLocation(0,100);
    p2.setLayout(new GridLayout(2,4));
    frame.add(p2);

    JButton a = new JButton("a. Low level language");
    p2.add(a);

    JButton b = new JButton("b. Assembly language");
    p2.add(b);

    JButton c = new JButton("c. High level language");
    p2.add(c);        

    JButton d = new JButton("d. Source code");
    p2.add(d);

    frame.setVisible(true);

    final PopQuizDemo demo = new PopQuizDemo();

    a.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    b.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    c.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    d.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
}//end of method

public static void three(){
    final SimpleFrame frame = new SimpleFrame();

    JPanel p1 = new JPanel();
    p1.setSize(400,100);
    frame.add(p1);

    JLabel qu1 = new JLabel();
    qu1.setText("What is the shortcut key of printing a document for");
    JLabel qu2 = new JLabel();
    qu2.setText("computers using Windows?");
    p1.add(qu1);
    p1.add(qu2);

    JPanel p2 = new JPanel();
    p2.setSize(400,175);
    p2.setLocation(0,100);
    p2.setLayout(new GridLayout(2,4));
    frame.add(p2);

    JButton a = new JButton("a. Ctrl + P");
    p2.add(a);

    JButton b = new JButton("b. Shift + P");
    p2.add(b);

    JButton c = new JButton("c. Shift + PP");
    p2.add(c);        

    JButton d = new JButton("d. Alt + P");
    p2.add(d);

    frame.setVisible(true);

    final PopQuizDemo demo = new PopQuizDemo();

    a.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    b.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    c.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
    d.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             frame.setVisible(false);
             demo.randomize();
         }
    });
}//end of method
} 
```

这里唯一的问题是，当我在“**开始**”按钮的动作侦听器中调用方法 randomize() 时，它会显示所有帧。是的，它们没有重复，但它同时显示。我不知道问题出在哪里。是随机化，循环，问题的方法吗？有人能帮我吗？请？非常感谢。

PS：这是类 SimpleFrame

```
import javax.swing.JFrame;
public class SimpleFrame extends JFrame{
    public SimpleFrame(){
        setSize(400,300);
        setTitle("Pop Quiz!");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(null);
        setResizable(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:29:05.573

您可以使用模型对话框使用 for 循环一个接一个地显示，如下所示：

```
public static void main(String[] args) {
        JFrame m = new JFrame("Hello");
        m.setSize(200,200);
        m.setVisible(true);
        for(int i=0;i<3;i++) {
            JDialog dlg = new JDialog(m,"Dialog",true);
            dlg.setSize(100,100);
            dlg.show();
        }
    } 
```

# ios - 应用程序被锁定 malloc -> OSSpinLockLock$VARIANT$mp

> ID：15321541
> 
> 赞同：2
> 
> 时间：2013-03-10T11:07:30.943
> 
> 标签：ios, xcode, locking, malloc, deadlock

我的 iphone 应用程序被锁定 malloc。如果我`pause`在 Xcode 中按下按钮，它会在 OSSpinLockLock$VARIANT$mp 函数中暂停。

```
#0  0x95dfbc2d in OSSpinLockLock$VARIANT$mp ()
#1  0x95dc2613 in szone_malloc_should_clear ()
#2  0x95dc366b in szone_malloc ()
#3  0x95df9962 in malloc_zone_malloc ()
#4  0x95dfa882 in malloc ()
#5  0x0219743a in operator new(unsigned long) () 
```

如果我再按`continue`一次`pause`然后它总是显示相同的堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:45:11.297

看看你的其他线程。其中一个很可能被阻塞在 malloc 或 free 内部，并且两者相互僵持。

造成这种情况的一个常见原因是在信号处理程序内部分配内存（您永远不应该这样做）。如果您的系统中有某种“crash catcher”，并且在处理程序内部您执行复杂的操作，您会看到这一点。

# php - 间歇性地出现“最大执行时间”错误

> ID：15321542
> 
> 赞同：0
> 
> 时间：2013-03-10T11:07:34.640
> 
> 标签：php, mysql

我正面临这个问题，首先我想说我对 PHP 和 MySQL 很陌生。

```
Fatal error: Maximum execution time of 30 seconds exceeded in 
.........................\cdn\wished.php on line 3 
```

我不知道第 3 行出了什么问题，它只是有时会出错。这是我的代码：

```
<?php
//wished.php
$CheckQuery = mysql_query("SELECT * FROM users WHERE ownerid='$user->id'");
$wished = 0;
while($row = mysql_fetch_assoc($CheckQuery))
{
//  echo $row['fname']."<br/>";
    $wished++;
}
echo $wished;
?> 
```

**当我使用XAMPP**在 localhost 中运行它时，它是完美的。一旦我在我的域上托管我的应用程序并使用他们的数据库，它就会开始出错。

感谢大家 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:22:23.877

问题是 SQL 查询耗时过长，并且您的生产 PHP 配置将 PHP 脚本时间限制设置得太低。

在脚本的开头，您可以为 PHP 时间限制添加更多时间：

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

`set_time_limit(60);`

例如再增加 30 秒（或使用 0 让 PHP 脚本继续运行）。

如果您的生产数据库与您的开发数据库不同（并且我假设生产有更多数据），那么从用户表中获取所有内容可能是一个非常昂贵的调用。

# ios - 滚动时暂时隐藏工具栏

> ID：15321543
> 
> 赞同：1
> 
> 时间：2013-03-10T11:07:42.967
> 
> 标签：ios, uitableview, uiscrollview, uiscrollviewdelegate

我有`UITableView`一个`UINavigationController`+`UIToolbar`

我想在用户滚动表格时隐藏工具栏。
我使用这个隐藏工具栏：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    [self.navigationController setToolbarHidden:YES animated:YES];
} 
```

并在表格停止滚动后再次显示工具栏：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self.navigationController setToolbarHidden:NO animated:YES];
} 
```

如果我让桌子自行减速，这很好用。但是，如果通过触摸表格停止滚动，这将不起作用。

我应该使用另一个特定的委托函数吗？

编辑：我也尝试了以下方法：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView 
```

没有不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T17:50:36.990

从`UIScrollViewDelegate`协议中使用此方法。

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate 
```

# objective-c - 如何确定 nsstring 的哪一部分适合矩形？

> ID：15321544
> 
> 赞同：6
> 
> 时间：2013-03-10T11:07:46.610
> 
> 标签：objective-c, nsstring, uikit, core-graphics, pdf-generation

这是关于使用核心图形的 PDF 格式。但是当涉及在两页上打印字符串时，它可能与任何类型的分页有关。

我需要将一个字符串分布在几页上。对于较小的字符串，这不是真正的问题。对于那些我使用 NSString UIKit 扩展`sizeWithFont`来确定全文是否适合当前页面的人。如果是，那么我打印它，`drawInRect`如果不是，那么我将它移到下一页。

工作正常，但不适合较长的字符串。在我的应用程序中，单个字符串（由用户提供）甚至可能比整页长。

当给定页面的完整页面或剩余空间时，我如何确定 NSString 的哪一部分可以显示在给定的矩形中，以便我可以将其切断并打印剩余的字符串（或至少一部分）在下一页？

我想到了一个替代方案。那就是将全文绘制到屏幕外的图形上下文中，然后将创建的图像切割成适合页面上可用空间的切片。但如果我这样做，那么我需要将切割线准确地放置在文本行之间。坦率地说，我不确定如何确定包含图形的文本在哪里可以安全地切割成两个（或更多）部分，而不会在中间切割一行文本。

我希望我表达自己是可以理解的，并且有人来救援。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:36:32.697

在 Core Text 中，有[一个非常相关的 function](http://developer.apple.com/library/ios/documentation/Carbon/Reference/CTFramesetterRef/Reference/reference.html#//apple_ref/c/func/CTFramesetterSuggestFrameSizeWithConstraints)，它的最后一个参数（一个指向 CRange 的指针）定义如下：

> `fitRange`
> 
> 返回时，包含实际适合约束大小的字符串范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:49:57.317

对于不使用 Core Text 的一般情况，您可以继续向字符串添加字符，直到其大小过大。这可能非常快，如果你有非常大的字符串（如你所见），你可以通过简单的二进制搜索来加速它。

如果您使用的是 Core Text，只需`CTFrame`为您要填充的区域创建一个，然后向它询问它使用的范围`CTFrameGetVisibleStringRange()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:20:16.933

使用近似值怎么样？

```
- (NSInteger)lengthOfString:(NSString *)str
           thatFitsIntoView:(UIView *)displayView
                   withFont:(UIFont *)font
{
    CGSize textSize = [str sizeWithFont:font
                               forWidth:displayView.frame.size.width
                          lineBreakMode:NSLineBreakByWordWrapping];

    NSInteger lengthThatFits;
    if (textSize.height > displayView.frame.size.height) {
        lengthThatFits = str.length * displayView.frame.size.height / textSize.height;
    } else {
        lengthThatFits = str.length;
    }

    return lengthThatFits;
} 
```

像这样称呼它：

```
NSString *str = @"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eros"
    "nulla, commodo eget fringilla nec, varius nec ligula. Donec pulvinar eros sed diam"
    "euismod scelerisque. Mauris imperdiet leo at elit vulputate ullamcorper. Nullam"
    "condimentum odio a lacus tempus ac pretium justo tincidunt.";

UIFont *font = [UIFont systemFontOfSize:16.0]; // or whatever
UIView *displayView = // the view in which you intend to present the string

NSInteger length = [self lengthOfString:str thatFitsIntoView:displayView usingFont:font];
NSString *displayedString = [str substringToIndex:length]; 
```

# objective-c - 滚动 UITableView 时的 CALayer 阴影

> ID：15321549
> 
> 赞同：1
> 
> 时间：2013-03-10T11:08:52.410
> 
> 标签：objective-c, uitableview, calayer, shadow

我在 UIView 类别中使用以下内容为 UITableView 添加了一个阴影（它覆盖了屏幕底部的三分之一 - 请参阅随附的屏幕截图）：

```
`- (void) addShadow {
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:self.bounds];
    self.layer.masksToBounds = NO;
    self.layer.shadowColor = [UIColor blackColor].CGColor;
    self.layer.shadowOpacity = 1;
    self.layer.shadowOffset = CGSizeMake(-5,-5);
    self.layer.shadowRadius = 20;
    self.layer.shadowPath = path.CGPath;
    self.layer.shouldRasterize = YES;
}` 
```

`它按预期显示，但是当我向上滚动时，阴影也会向上滚动。此外，表格滚动超出其上限。你能建议这里有什么问题吗？如果我评论`self.layer.masksToBounds = NO;`，阴影消失，但表格滚动是预期的。因此，问题可能出在某个地方`masksToBounds`。`

 `![初始状态](../Images/765b780dc02e7f26532326887f563c16.png)

![滚动状态](../Images/6df3eacb9cbd0585c92e80d5e02267d7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:43:47.287

我通过在下面放置一个相同的视图来解决它，只是为了阴影。不是一个干净的解决方案......因此我仍然愿意接受答案。我的代码如下：

```
`- (UIView*) addShadow {
    UIView* backView = [[UIView alloc] initWithFrame:self.frame];
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:backView.bounds];
    backView.layer.masksToBounds = NO;
    backView.layer.shadowColor = [UIColor blackColor].CGColor;
    backView.layer.shadowOpacity = 1;
    backView.layer.shadowOffset = CGSizeMake(-5,-5);
    backView.layer.shadowRadius = 20;
    backView.layer.shadowPath = path.CGPath;
    backView.layer.shouldRasterize = YES;
    [self.superview addSubview:backView];
    [self.superview bringSubviewToFront:self];
    return backView;
}

*   (void) removeShadow {
    self.layer.masksToBounds = YES;
    self.layer.shadowColor = nil;
    self.layer.shadowOpacity = 0;
    self.layer.shadowOffset = CGSizeMake(0,0);
    self.layer.shadowRadius = 0;
    }` 
````

# java - sqlite测试应用程序的4个不同随机数？

> ID：15321552
> 
> 赞同：-3
> 
> 时间：2013-03-10T11:09:25.950
> 
> 标签：java, android, sqlite, random

我想要指定范围内的四个不同数字，但我得到了一些数字和一些日期。

此应用程序是这些选择的测试应用程序

```
Random rn = new Random(); 
int rangetp = maximumb - minimumb + 1; 
randomNums = rn.nextInt(rangetp) + minimumb; 

Random rn1 = new Random(); 
int rangetp1 = maximumb - minimumb + 1; 
randomNums1 = rn1.nextInt(rangetp1) + minimumb; 

Random rn2 = new Random(); 
int rangetp2 = maximumb - minimumb + 1; 
randomNums2= rn2.nextInt(rangetp2) + minimumb; 

Random rn3 = new Random(); 
int rangetp3 = maximumb - minimumb + 1; 
randomNums3 = rn3.nextInt(rangetp3) + minimumb; 

SQLiteDatabase db = veridepo.getReadableDatabase();
cursor = db.rawQuery(
    "SELECT yabanci, turkce, biliyorum
    FROM tablomm
    WHERE id = " + randomNums + "" + sorsunmu + "", null);

cursor1 = db.rawQuery(
    "SELECT yabanci, turkce, biliyorum 
    FROM tablomm 
    WHERE id = " + randomNums1 + "" + sorsunmu + "", null); 

cursor2 = db.rawQuery(
    "SELECT yabanci, turkce, biliyorum 
    FROM tablomm 
    WHERE id = " + randomNums2 + "" + sorsunmu + "", null); 

cursor3 = db.rawQuery(
    "SELECT yabanci, turkce, biliyorum 
    FROM tablomm 
    WHERE id = " + randomNums3 + "" + sorsunmu + "", null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:21:33.240

您只需要一个随机对象而不是 4 个！

```
Random rn = new Random(); 
int rangetp = maximumb - minimumb + 1; 
randomNums = rn.nextInt(rangetp) + minimumb; 

int rangetp1 = maximumb - minimumb + 1; 
randomNums1 = rn.nextInt(rangetp1) + minimumb; 

int rangetp2 = maximumb - minimumb + 1; 
randomNums2= rn.nextInt(rangetp2) + minimumb; 

int rangetp3 = maximumb - minimumb + 1; 
randomNums3 = rn.nextInt(rangetp3) + minimumb; 
```

阅读有关 Random 的文档： [https ://developer.android.com/reference/java/util/Random.html](https://developer.android.com/reference/java/util/Random.html)

这是一个关于随机数的java“问题”以及如何实现更随机的方式来获取随机数。

# algorithm - 总权重 W 的非重叠区间的最大总和

> ID：15321553
> 
> 赞同：2
> 
> 时间：2013-03-10T11:09:26.520
> 
> 标签：algorithm, dynamic-programming

给定一个整数序列`S`和`N`一个正整数`W`，找到一组不重叠的区间，使得它们的总权重正好是 W 并且它们的总和最大化。

```
For a chosen interval [i,j]:

 - Weight([i,j]) = j-i+1 
 - Sum([i,j]) = S[i+1] + S[i+2] + ... + S[j]. 
```

例子

```
S = (12, 9, 1, 2, 8, -1), W = 4  

Choose [1,2] and [4,5] with total_sum = Sum([1,2]) + Sum([4,5]) = 9 + 8 = 17

(12 9 _ 2 8 _) 
```

这个问题听起来有点像背包问题和加权间隔调度，但我认为这可以通过更简单的方式解决。

我的想法是使用动态编程和 let `P[i][k] be the maximum total sum of the first i elements, using only k elements`，答案是`P[N][W]`，但我想不出子问题之间的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:36:59.177

如果您从左到右工作，您可以通过以下方式总结到目前为止的答案：

1) 重量

2) 该答案中最右边区间的右端

3) 其区间内的元素之和

所以我认为你可以通过从左到右运行的动态程序来解决这个问题，如果在每个阶段，对于最右边区间的右端和总权重的每个可能组合，你都可以跟踪总和最大的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:53:49.327

不应该是：

```
 f[i][j]= MAX( f[i-1][j] , f[i-T][j-Weight[i-T,i]]+Sum[i-T,i] ); 
```

然后你得到答案`f[N][W]`。我很确定应该有某种方法可以将这个`O(N^2W)`解决方案优化为一个更好的解决方案。但既然你没有要求更快的...

# facebook - 使用 FQL 检索朋友照片

> ID：15321555
> 
> 赞同：1
> 
> 时间：2013-03-10T11:09:41.630
> 
> 标签：facebook, facebook-fql, photos

我正在构建一个产品，它使用来自用户 Facebook 朋友的图像。我在 SO 上找到了多个示例，它们通过像这样过滤相册和用户朋友列表来过滤照片：

```
SELECT pid, link, owner
FROM photo
WHERE aid IN 
  (SELECT aid FROM album WHERE owner IN 
    (SELECT uid2 FROM friend WHERE uid1=me()) 
  ) 
```

但是为什么我不能跳过专辑收藏呢？以下应该可以工作，但在[Graph API Explorer](http://developers.facebook.com/tools/explorer)中运行它永远不会返回结果（比如永远不会发生的超时）：

```
SELECT pid, link, owner
FROM photo
WHERE owner IN (SELECT uid2 FROM friend WHERE uid1=me())
AND created > strtotime("10 February 2013")
ORDER BY created DESC 
```

我最常用的令牌肯定有“user_photos”和“friends_photos”。使用常规图形浏览器也有相同的行为，没有显示任何结果：

![在此处输入图像描述](../Images/8836cb69b359a935bfd5a4807e319295.png)

这是我的逻辑错误，Facebook平台的错误，还是这里发生了什么奇怪的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:13:22.953

谈到：

```
SELECT pid, link, owner
FROM photo
WHERE owner IN (SELECT uid2 FROM friend WHERE uid1=me())
AND created > strtotime("10 February 2013")
ORDER BY created DESC 
```

*   首先，此查询超时。
*   其次，FQL 查询只能给出 5000 个结果，而我们的朋友上传的照片远不止这些。
*   第三，您尝试改进第一个不起作用的查询（在我的情况下，它只找到了我朋友的 1470 张照片）。
*   第四，即使你的第二个查询不会超时，如果它可以给出超过 5000 个结果，这个查询也不会给出用户朋友的所有照片。因为这个查询：

    `SELECT pid, link, owner FROM photo WHERE owner=USER_ID` 只给出用户的最后 100 张照片，而用户可以有 2000 张照片。

因此，至少，我们不必更正您的查询，但我们应该尝试创建一个新查询。目标不是在进行复杂查询时尽可能减少查询，而是要明确一些可行的方法。

### 首先，让我们尝试获取一个用户的所有照片。

```
SELECT pid, link, owner
FROM photo
WHERE owner=USER_ID
AND created > strtotime("10 February 2013")
ORDER BY created DESC
LIMIT 5000 OFFSET 0 
```

现在我们不再获得 100 张照片，而是 5000 张！

### 其次，我们得到所有的朋友用户：

```
SELECT uid2 FROM friend WHERE uid1=me() LIMIT 5000 
```

一个用户的最大好友数确实是 5000。

现在，您所要做的就是：

1.  发出一个获取用户好友列表的请求。
2.  循环访问每个朋友并为他们每个人发出一个请求以检索他们的照片。**如果**照片数量不少于 5000 张，则表示用户还有一些照片要展示。然后，您必须在增加5000时发出*另一个*请求！`OFFSET`

* * *

现在你一定会得到所有用户朋友的照片！此外，将这个过程分成多个较小的请求也不是一件坏事。您将能够知道查询的进度，例如，您可以在 AJAX 中将其呈现为进度条。这可能是一件好事，因为这将花费**很多**时间！

# r - 如何将两个变量写入一个文本文件？

> ID：15321556
> 
> 赞同：3
> 
> 时间：2013-03-10T11:09:53.803
> 
> 标签：r

我有两个文件，我想根据彼此进行一些计算。

文件 1：

```
conne <- file("C:\\bias.bin","rb")
cor<- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

文件 2：

```
conne2 <- file("C:\\me1440s.bin","rb")
bioms<- readBin(conne2, integer(), size=1,  n=1440*720, signed=F) 
```

计算：

```
 mean=tapply(cor, bioms, mean, na.rm=TRUE)
 sd=tapply(cor, bioms, sd, na.rm=TRUE)
 min=tapply(cor, bioms, min, na.rm=TRUE) 
```

写入文本文件：

```
write.table(min, "C:\\Users\\period.txt", sep="\t") 
```

这只会将 min 写入一个文本文件。如何将所有 mean、sd 和 min 写入一个文本文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T11:11:39.457

如果`mean`,`sd`和`min`的长度相同，则可以将所有变量放在一个数据帧中，然后写入文件。

```
write.table(data.frame(mean,sd,min), "C:\\Users\\period.txt", sep="\t") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T11:16:49.780

在比@Didzis 的答案更普遍的意义上，您可以`append = TRUE`在调用`write.table`. 从以下文档`write.table`：

> 附加：逻辑。仅当“文件”是字符串时才相关。如果为“真”，则将输出附加到文件中。如果为“FALSE”，则任何现有的同名文件都将被销毁。

因此，您可以`write.table`多次调用，并在一个文件中获取所有输出：

```
write.table(mean, "C:\\Users\\period.txt", sep="\t")
write.table(sd, "C:\\Users\\period.txt", sep="\t", append = TRUE)
write.table(min, "C:\\Users\\period.txt", sep="\t", append = TRUE) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T12:01:31.557

没有直接关系，但如果你不介意写入文本文件，你可以使用`Rdata`R 文件格式，它以二进制存储数据，更紧凑的方式，但与其他软件不兼容。

您可以通过这种方式将多个对象保存在同一个`Rdata`文件中：

```
save(obj1, obj2, obj3, file="myfile.rda") 
```

然后在另一个 R 会话中，您可以执行以下操作：

```
load("myfile.rda") 
```

您的 R 会话可以访问之前保存的对象。

# c# - Insert values to table in database in c#

> ID：15321564
> 
> 赞同：1
> 
> 时间：2013-03-10T11:10:42.020
> 
> 标签：c#, .net, sql, winforms

I have a Winforms application and database to save data from user.

When I insert data everything works fine but when I clean the solution and load the GUI of the database to see the old data.. I don't see the datam the datagridview is empty.

```
using (SqlConnection con = new SqlConnection(dataBase.Connection.ConnectionString))
{
   using (SqlCommand wow = new SqlCommand("insert into GamesTbl(Type,Date,Time) Values(@type,@date,@time)", con))
   {
      wow.Parameters.AddWithValue("@type", "vsPC");
      wow.Parameters.AddWithValue("@date", DateTime.Now.Date);
      wow.Parameters.AddWithValue("@time", DateTime.Now.TimeOfDay);

      try
      {
          con.Open();
          wow.ExecuteNonQuery();
          con.Close();
      }
      catch (Exception ex)
      {
         MessageBox.Show(ex.Message);
      }
   }
} 
```

What is wrong?

EDIT: binding data on DBGui_load

```
private void DBGui_Load(object sender, EventArgs e)
    {
        dataGridView1.DataSource = playersTblBindingSource;
        playersTblBindingSource.DataSource = DB.GamesTbls;

    } 
```

EDIT: my connection string:

```
"Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Database1.mdf;Integrated     
Security=True;User Instance=True" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:15:24.203

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！在 Visual Studio 中运行您的应用程序时，它将复制`.mdf`文件（到输出目录 - 通常`.\bin\debug`是您的应用程序运行的位置），并且**很可能**，您的`INSERT`工作正常 - 但您只是在查看错误的.mdf**文件**结束！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`Database1`- 或者当您使用它时 - 给它一个更合理的名称......）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=YourDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:33:45.847

作为替代解决方案，您可以解决此问题的方法是在您的解决方案中设置数据库文件的属性，如下所示

`Copy To Output Directory`：`do not copy`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:23:06.423

似乎喜欢你失踪了`DataBind`。

```
private void DBGui_Load(object sender, EventArgs e)
{
    dataGridView1.DataSource = playersTblBindingSource;
    dataGridView1.DataBind(); // you are missing this
    playersTblBindingSource.DataSource = DB.GamesTbls;
} 
```

# eclipse - Eclipse Tomcat 集成：useBean 类属性 [class] 无效

> ID：15321569
> 
> 赞同：0
> 
> 时间：2013-03-10T11:11:23.207
> 
> 标签：eclipse, jsp, tomcat, javabeans

我正在使用 Eclipse Juno (Java EE) 和 Tomcat 7.0。我已经通过本教程成功连接了 Tomcat 和 Eclipse：http: [//www.mulesoft.com/tomcat-eclipse](http://www.mulesoft.com/tomcat-eclipse)

JSTL 和 *.jsp 文件在 Eclipse 和 Tomcat 中运行良好，但我不能使用 JavaBeans。

我将 JavaBeans 存储在 /WebContent/WEB-INF/classes/com/form 中。

在 *.jsp 文件（位于 /WebContent 中）中，我使用以下代码：

```
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %>
<%@ page import="com.form.*" %>
...
<jsp:useBean id="input" class="com.form.Input"/> 
```

输入.java：

```
package com.form;

public class Input {

    private String firstName;
    private String lastName;
    private String gender;

    private boolean vegetarian;

    public Input() {
        this.firstName = new String();
        this.lastName = new String();
        this.gender = new String();
    }
... 
```

当我运行此应用程序时，我收到以下错误消息：

```
The value for the useBean class attribute com.form.Input is invalid 
```

我不想发布整个代码，但您可以在此处下载完整的 Eclipse 项目：[https ://dl.dropbox.com/u/6454333/BeanForm.zip](https://dl.dropbox.com/u/6454333/BeanForm.zip)

我希望你能帮助我。

谢谢，拜拜

孔泽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:28:26.823

您混淆了源文件和类文件。

`WebContent`是 Eclipse 中放置 webapp 资源（html 文件、图像、css 文件、jsp 文件等）的地方。下不应该有任何东西`WebContent/WEB-INF/classes`。没有`.java`文件。没有`.class`文件。

使用 Eclipse 构建应用程序时，Eclipse 将编译`.java`项目源目录中的所有文件，生成的`.class`文件将成为已部署 Web 应用程序的运行时类路径的一部分。

如果您从 eclipse 生成一个 war 文件，它将包含一个 WEB-INF/classes 目录，该目录将包含它在从项目源目录编译源文件时生成的 .class 文件。

# python - 在 python 源代码中的哪里定义了 math.exp() ？

> ID：15321570
> 
> 赞同：3
> 
> 时间：2013-03-10T11:11:35.953
> 
> 标签：python, exp

我想知道如何`math.exp()`在python中实现该功能。Python源代码在哪里`math.exp()`定义？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-10T12:48:09.907

这个有点棘手。

该`math`模块在 C 模块中实现，[`mathmodule.c`](http://hg.python.org/cpython/file/tip/Modules/mathmodule.c). 在该文件的末尾有一个特定的 Python 库结构，定义[`exp`为`math_exp`](http://hg.python.org/cpython/file/tip/Modules/mathmodule.c#l1561)：

```
static PyMethodDef math_methods[] = {
    # ...
    {"exp",             math_exp,       METH_O,         math_exp_doc}, 
```

但`math_exp`它本身实际上是通过[`FUNC1`宏](http://hg.python.org/cpython/file/tip/Modules/mathmodule.c#l791)定义的，使用[`math_1`包装函数](http://hg.python.org/cpython/file/tip/Modules/mathmodule.c#l652)调用[C 库`exp`函数](http://www.manpagez.com/man/3/exp/)并进行一些错误处理和类型转换：

```
FUNC1(exp, exp, 1,
     "exp(x)\n\nReturn e raised to the power of x.") 
```

但是，C 函数实现本身完全依赖于平台，并且在现代硬件上通常由*硬件*处理。您必须转向该函数的软件版本才能找到在 Python 中实现此功能的起点。

您可以使用`fdlibm`实现作为这样的起点，也许，这是`exp`该库中 C 中函数实现的链接：

*   [http://www.netlib.org/fdlibm/e_exp.c](http://www.netlib.org/fdlibm/e_exp.c)

或者你可以参考这个实现：

*   [http://fossies.org/dox/glibc-2.17/sysdeps_2ieee754_2ldbl-128ibm_2e__expl_8c_source.html#l00135](http://fossies.org/dox/glibc-2.17/sysdeps_2ieee754_2ldbl-128ibm_2e__expl_8c_source.html#l00135)

# c# - SharpPcap get Process Name

> ID：15321571
> 
> 赞同：2
> 
> 时间：2013-03-10T11:11:38.823
> 
> 标签：c#

i'm currently writing a C# program which has similar features as wireshack, using the SharpPcap to capture the packets and PacketDotNet to get the information about the packet. I would like to know how can i get the name of the process associated with the packet??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:56:03.353

您可以`ProcessId`通过解析输出来`netstat -o`获取，然后从中获取进程**名称**`Process.GetById`。
可能这段代码会有帮助，但我对正则表达式不是很擅长:)

```
 var proc = new Process {
    StartInfo = new ProcessStartInfo {
      FileName = "netstat",
      Arguments = "-on",
      UseShellExecute = false,
      RedirectStandardOutput = true,
      CreateNoWindow = true
    }
  };

  proc.Start();
  Regex r = new Regex(@"\S+\s+(?<address>\S+)\s+\S+\s+\S+\s+(?<pid>\d+)");
  while (!proc.StandardOutput.EndOfStream) {
    var res = r.Match(proc.StandardOutput.ReadLine());
    if (res.Success) {
      var pid = int.Parse(res.Groups["pid"].Value);
      var address = res.Groups["address"].Value;
      Console.WriteLine("{0} - {1}", address, Process.GetProcessById(pid).ProcessName);
    }
  } 
```

# c# - 如何在数组中设置列表

> ID：15321578
> 
> 赞同：0
> 
> 时间：2013-03-10T11:11:49.853
> 
> 标签：c#, arrays, list, multidimensional-array

我启动了一个多维数组：

```
private byte[,] grid = new byte[9, 9]; 
```

我想为现有网格中的每个单元格保存一个包含一些值的字节列表。

我知道 3 维数组在这里会很方便。但是由于具有无效值的列表是动态的，我想使用列表而不是数组。

**编辑：**在这里给出一些上下文。我正在制作一个数独，它由一个多维数组表示。由于我想以编程方式解决数独问题并且我使用的是回溯算法，因此我需要记住对每个单元格无效的数字。

所以每个单元格应该由一个值和一个列表组成。我可能只是将实际字段作为列表中的第一个值。但永远不知道是否有真正干净的解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:18:05.653

```
var grid = new List<byte>[9,9];

for (int i = 0; i < 9; i++)
    for (int j = 0; j < 9; j++)
        grid[i, j] = new List<byte>(); 
```

之后 9x9 数组的每个项目都包含一个空的`List<byte>`.

但是，我建议创建一个像`Field`

```
public class Field
{
    public byte Value { get; set; }
    public List<byte> List { get; set; }

    public Field()
    {
        List = new List<byte>();
    }
} 
```

并使用它而不是仅仅`List<byte>`：

```
var grid = new Field[9, 9];

for (int i = 0; i < 9; i++)
    for (int j = 0; j < 9; j++)
        grid[i, j] = new Field(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:15:37.503

如果我理解正确，您需要列表中的字节列表吗？试试这个：

```
 List<List<byte>> listOfBytesInList = new List<List<byte>>(); 
```

**更新**

您可以实现一个使用内部字节列表的自己的类。我为时已晚，但无论如何我都会发布我的解决方案。

```
 public class ByteFieldList
    {
        private readonly List<byte> _interalBytes;

        public ByteFieldList()
            : this(4, 0)
        {
        }

        public ByteFieldList(byte fieldValue)
            : this(4, fieldValue)
        {
        }

        public ByteFieldList(int capacity, byte fieldValue)
        {
            FieldValue = fieldValue;
            _interalBytes = new List<byte>(capacity);
        }

        public byte FieldValue { get; set; }

        public ByteFieldList Add(byte b)
        {
            _interalBytes.Add(b);
            return this;
        }

        public void AddRange(byte[] bytes)
        {
            foreach (var b in bytes)
                Add(b);
        }

        public ByteFieldList Remove(byte b)
        {
            _interalBytes.Remove(b);
            return this;
        }

        public byte this[int index]
        {
            get { return _interalBytes[index]; }
        }

        public byte[] GetAllInvalid()
        {
            return _interalBytes.ToArray();
        }   

    }

  public void Usage()
        {
            ByteFieldList byteFieldList = new ByteFieldList(5);

            byteFieldList.Add(5).Add(4).Add(8);
            byteFieldList.AddRange(new byte[] { 7, 89, 4, 32, 1 });

            var invalids = byteFieldList.GetAllInvalid(); // get 5, 4, 8, 7, 89, 4, 32, 1

            byteFieldList.FieldValue = 4;

        } 
```

# c++ - 创建 DirectX 10 设备和交换链时出现“错误代码：E_FAIL”

> ID：15321581
> 
> 赞同：2
> 
> 时间：2013-03-10T11:12:07.187
> 
> 标签：c++, directx

我正在学习“Direct3D 10.0 3D 游戏编程简介”一书的一些简单的 DX 教程。我在使用D3D10CreateDeviceAndSwapChain的功能时遇到了一些问题。以下为代码：</p>

```
 // Fill out a DXGI_SWAP_CHAIN_DESC to describe our swap chain.

    DXGI_SWAP_CHAIN_DESC sd;

    sd.BufferDesc.Width  = mClientWidth;
    sd.BufferDesc.Height = mClientHeight;

    sd.BufferDesc.RefreshRate.Numerator = 60;
    sd.BufferDesc.RefreshRate.Denominator = 1;

    sd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    sd.BufferDesc.ScanlineOrdering = DXGI_MODE_SCANLINE_ORDER_UNSPECIFIED;
    sd.BufferDesc.Scaling = DXGI_MODE_SCALING_UNSPECIFIED;

    // No multisampling.
    sd.SampleDesc.Count   = 1;
    sd.SampleDesc.Quality = 0;

    sd.BufferUsage  = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    sd.BufferCount  = 1;
    sd.OutputWindow = mhMainWnd;
    sd.Windowed     = true;
    sd.SwapEffect   = DXGI_SWAP_EFFECT_DISCARD;
    sd.Flags        = 0;

    // Create the device.

    UINT createDeviceFlags = 0;

#if defined(DEBUG) || defined(_DEBUG)  
    createDeviceFlags |= D3D10_CREATE_DEVICE_DEBUG;
#endif

    HR( D3D10CreateDeviceAndSwapChain(
            0,                 //default adapter

            md3dDriverType,
            //D3D10_DRIVER_TYPE_HARDWARE,

            0,                 // no software device
            createDeviceFlags, 

            D3D10_SDK_VERSION,
            &sd,
            &mSwapChain,
            &md3dDevice) ); 
```

错误信息是：

错误代码：E_FAIL (0x80004005) 调用：D3D10CreateDeviceAndSwapChain(.....

当我将 D3D10CreateDeviceAndSwapChain 的参数 'createDeviceFlags' 更改为 0 时，它可以工作。但为什么？？我想知道原因，谁能告诉我？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:50:26.063

MSDN 说

> 要创建支持调试层的设备，必须安装 DirectX SDK（获取 D3D10SDKLayers.DLL），然后在调用 D3D10CreateDevice 时指定 D3D10_CREATE_DEVICE_DEBUG 标志。

那么，您是否安装了 SDK 并且是否有 D3D10SDKLayers.DLL？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:55:21.140

我有这个确切的问题。当我将 D3D10_CREATE_DEVICE_DEBUG 标志切换为 0 时，它开始工作。我认为我的计算机由于某种原因无法创建调试层。不知道为什么，但至少我能够以这种方式创建一个窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T10:18:21.610

我在 2010 年 6 月使用 DirectX SDK 的 Windows 8 上的 VS2010 遇到了完全相同的问题。

如果我禁用调试层一切正常。这当然很烦人，因为 DirectX 的调试层相当方便。

我也尝试了这个解决方法来成功安装 DirectX SDK，但它没有帮助我：http: [//blogs.msdn.com/b/chuckw/archive/2011/12/09/known-issue-directx- sdk-june-2010-setup-and-the-s1023-error.aspx](http://blogs.msdn.com/b/chuckw/archive/2011/12/09/known-issue-directx-sdk-june-2010-setup-and-the-s1023-error.aspx)

是否已经有解决方案？

# python - 如何在 scrapy pipelines.py 文件中导入 django 模型

> ID：15321584
> 
> 赞同：4
> 
> 时间：2013-03-10T11:12:27.483
> 
> 标签：python, django, models, scrapy

我正在尝试在我的 pipelines.py 中导入一个 django 应用程序的模型，以使用 django orm 保存数据。我在第一个涉及的django应用程序“app1”中创建了一个scrapy项目scrapy_project（顺便说一句，这是一个不错的选择吗？）。我将这些行添加到我的scrapy设置文件中：

```
def setup_django_env(path):
  import imp, os
  from django.core.management import setup_environ

  f, filename, desc = imp.find_module('settings', [path])
  project = imp.load_module('settings', f, filename, desc)

  setup_environ(project)

current_dir = os.path.abspath(os.path.dirname(os.path.dirname(__file__)))
setup_django_env(os.path.join(current_dir, '../../d_project1')) 
```

当我尝试导入我的 django 应用程序 app1 的模型时，我收到以下错误消息：

```
Traceback (most recent call last):
  File "/usr/local/bin/scrapy", line 4, in <module>
    execute()
  File "/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py", line 122, in execute
    _run_print_help(parser, _run_command, cmd, args, opts)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py", line 76, in     _run_print_help
    func(*a, **kw)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py", line 129, in     _run_command
    cmd.run(args, opts)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/commands/crawl.py", line 43, in     run
    spider = self.crawler.spiders.create(spname, **opts.spargs)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/command.py", line 33, in crawler
    self._crawler.configure()
  File "/usr/local/lib/python2.7/dist-packages/scrapy/crawler.py", line 41, in configure
    self.engine = ExecutionEngine(self, self._spider_closed)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/core/engine.py", line 63, in     __init__
    self.scraper = Scraper(crawler)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/core/scraper.py", line 66, in     __init__
    self.itemproc = itemproc_cls.from_crawler(crawler)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py", line 50, in     from_crawler
    return cls.from_settings(crawler.settings, crawler)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/middleware.py", line 29, in     from_settings
    mwcls = load_object(clspath)
  File "/usr/local/lib/python2.7/dist-packages/scrapy/utils/misc.py", line 39, in     load_object
    raise ImportError, "Error loading object '%s': %s" % (path, e)
ImportError: Error loading object 'scrapy_project.pipelines.storage.storage': No module         named dydict.models 
```

为什么scrapy不能访问django应用程序模型（给定app1在installed_app）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-01T18:29:05.127

在不导入 django 模型的管道中，您使用绑定到 django 模型的 scrapy 模型。你必须在scrapy设置中添加Django设置，而不是之后。

要在 scrapy 项目中使用 django 模型，您必须使用 django_Item [https://github.com/scrapy-plugins/scrapy-djangoitem](https://github.com/scrapy-plugins/scrapy-djangoitem)（导入到您的 pythonpath）

我推荐的文件结构是：

```
Projects
 |-DjangoScrapy
     |-DjangoProject
     |     |-Djangoproject
     |     |-DjangoAPP
     |-ScrapyProject
            |-ScrapyProject
                 |-Spiders 
```

然后在您的scrapy项目中，您必须**将pythonpath ull路径添加到django项目**：

```
**# Setting up django's project full path.**
import sys
sys.path.insert(0, '/home/PycharmProject/scrap/DjangoProject')

# Setting up django's settings module name.
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'DjangoProject.settings' 
```

然后在您的 items.py 中，您可以将 Django 模型绑定到 scrapy 模型：

```
from DjangoProject.models import Person, Job
from scrapy_djangoitem import DjangoItem

class Person(DjangoItem):
    django_model = Person
class Job(DjangoItem):
    django_model = Job 
```

然后你可以在对象的 yeld 之后在管道中使用 .save() 方法：

**蜘蛛.py**

```
from scrapy.spider import BaseSpider
from mybot.items import PersonItem

class ExampleSpider(BaseSpider):
    name = "example"
    allowed_domains = ["dmoz.org"]
    start_urls = ['http://www.dmoz.org/World/Espa%C3%B1ol/Artes/Artesan%C3%ADa/']

    def parse(self, response):
        # do stuff
        return PersonItem(name='zartch') 
```

**管道.py**

```
from myapp.models import Person

class MybotPipeline(object):
    def process_item(self, item, spider):
        obj = Person.objects.get_or_create(name=item['name'])
        return obj 
```

我有一个代码最少的存储库：（你只需要在scrapy设置中设置你的django项目的路径） [https://github.com/Zartch/Scrapy-Django-Minimal](https://github.com/Zartch/Scrapy-Django-Minimal)

在： [https](https://github.com/Zartch/Scrapy-Django-Minimal/blob/master/mybot/mybot/settings.py) ://github.com/Zartch/Scrapy-Django-Minimal/blob/master/mybot/mybot/settings.py 你必须将我的 Django 项目路径更改为你的 DjangoProject 路径：

```
sys.path.insert(0, '/home/zartch/PycharmProjects/Scrapy-Django-Minimal/myweb') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:13:04.013

尝试：

```
from .. models import MyModel 
```

**或者**

```
from ... models import MyModel 
```

每个点代表位置

# objective-c - NSMutable 数组计数在删除子项后没有改变

> ID：15321589
> 
> 赞同：0
> 
> 时间：2013-03-10T11:13:51.430
> 
> 标签：objective-c, cocos2d-iphone

```
GMSprite *bulletMove;
int bulletCount = [bullets count];

for(int i = 0; i < bulletCount; i++)
{        
    if(bulletMove.position.x > 500)
    {
        [self removeChild:[bullets objectAtIndex:i] cleanup:YES];
    }
} 
```

如何从数组中删除子对象以及数组中的对象，以便 bulletCount 下降一个整数并将数组调整为已删除的对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:16:48.433

采用

```
[bullets removeObjectAtIndex:i]; 
```

> 如何从数组中删除子对象以及数组中的对象，以便 bulletCount 下降一个整数并将数组调整为已删除的对象

使用上述方法将从索引 i 中删除对象，并且所有后续对象将向上移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:17:45.157

使用以下代码：

```
[bullets removeObjectAtIndex:i]; 
```

从 bulet 数组中获取项目符号对象并使用下面的代码。

```
[bullet removeFromParentAndCleanup:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:20:12.003

```
GMSprite *bulletMove;

for(int i = 0; i < [bullets count]; )
{        
    if(bulletMove.position.x > 500)
    {
        [bullets removeObjectAtIndex:i];
    } else {
        i++;
    }
} 
```

在其主体内操作 for 循环的索引变量并不是一种很好的风格。您可能希望使用另一种类型的循环（do-while 左右）重新构建此建议。然而，基本思想是，[bullest count] 将始终为您提供数组中当前的条目数量。并且只有在不删除当前对象的情况下才必须增加索引。如果您删除它并且您的索引为 10（示例），那么下一个要检查的索引再次为 10。如果您也将其删除，那么下一个要针对 500 进行检查的时间是 10 岁。所以要么删除它，要么增加索引。并且作为循环的退出标准，根据数组中*当前的对象数量检查索引。*

编辑：您问题的第二部分：如果您正确地进行内存管理，无论您是否为 ARC，removeObjectAtIndex 都应正确删除对象本身。（除非它的保留计数高于 1 或另一个强引用仍然存在。但即便如此，它也会将保留计数减少 1 并且完全正确。）

# git - OSX 上的 Sourcetree 寻找“credential-oskeychain”而不是“credential-osxkeychain”

> ID：15321592
> 
> 赞同：4
> 
> 时间：2013-03-10T11:14:07.403
> 
> 标签：git, atlassian-sourcetree

使用 Sourcetree 时，我不断收到错误消息

```
git: 'credential-oskeychain' is not a git command. See 'git --help'. 
```

我很确定 Sourcetree / git 应该使用

```
credential-osxkeychain" 
```

（注意 osx 中的 X，它在原始错误中丢失）

我该如何改变？我到底是如何设法设置 Sourcetree / Git 来输入这个错误输入的命令的？我似乎找不到在哪里改变这个

我跑了

```
locate credential-oskeychain 
```

毫不奇怪，什么也没发现。

```
locate credential-osxkeychain 
```

返回

```
/opt/local/bin/git-credential-osxkeychain 
```

在其他几个中

在此先感谢您帮助新手使用 Sourcetree

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T20:28:49.140

您的助手凭证拼写错误。您的 ~/.gitconfig 文件应具有以下条目：

```
[credential]
    helper = osxkeychain 
```

但可能有这个：

```
[credential]
    helper = oskeychain 
```

# c# - 从控制器获取 Nhibernate ISession（每个请求的会话）ASP.Net MVC

> ID：15321595
> 
> 赞同：1
> 
> 时间：2013-03-10T11:14:46.733
> 
> 标签：c#, asp.net-mvc, nhibernate

我看过很多关于如何在 Asp.Net MVC 中通过使用 ActionFilter 或通过 DI 包将会话注入控制器来为每个请求设置会话的帖子。我想知道的是，仅仅制作一个扩展方法会是一个坏主意/模式，比如：

```
public static ISession GetNHibernateSession(this Controller controller)
 {
   return SessionFactory.OpenSession();
 } 
```

以便可以在需要时实例化会话，例如：

```
public ActionResult DoSomething()
    {
      using(  var session = this.GetNHibernateSession())
        {
           // Do something with the session
        }

    } 
```

这可能是一个好/坏主意的原因将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:03:19.467

好的：

*   这很简单
*   它只是工作

坏的：

*   您正在执行会话管理，即使它只是三行代码，也遍布您的代码
*   使用扩展方法，您无法替换测试的行为

简而言之，对于小型的 RAD 和概念验证项目，您的想法可以正常工作。对于更复杂的开发，最好从控制器中提取会话管理，至少将其移至基类。

# c++ - 术语不计算为带 1 个参数的函数

> ID：15321596
> 
> 赞同：8
> 
> 时间：2013-03-10T11:15:19.727
> 
> 标签：c++, function-pointers

有人可以解释我为什么会得到：

> 错误 C2064：术语不计算为采用 1 个参数的函数

对于该行：

```
DoSomething->*pt2Func("test"); 
```

与这堂课

```
#ifndef DoSomething_H
#define DoSomething_H

#include <string>

class DoSomething
{
public:
    DoSomething(const std::string &path);
    virtual ~DoSomething();

    void DoSomething::bar(const std::string &bar) { bar_ = bar; }

private:
    std::string bar_;
};

#endif DoSomething_H 
```

和

```
#include "DoSomething.hpp"

namespace
{

void foo(void (DoSomething::*pt2Func)(const std::string&), doSomething *DoSomething)
{
    doSomething->*pt2Func("test");
}

}

DoSomething::DoSomething(const std::string &path)
{
    foo(&DoSomething::bar, this);

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T11:19:02.667

**问题 #1：**第二个参数的名称和第二个参数的类型以某种方式交换。它应该是：

```
 DoSomething* doSomething
//    ^^^^^^^^^^^  ^^^^^^^^^^^
//    Type name    Argument name 
```

代替：

```
 doSomething* DoSomething 
```

这就是你所拥有的。

**问题 #2：**您需要添加几个括号才能正确取消引用该函数：

```
 (doSomething->*pt2Func)("test");
//  ^^^^^^^^^^^^^^^^^^^^^^^ 
```

最终，这就是你得到的：

```
void foo(
    void (DoSomething::*pt2Func)(const std::string&), 
    DoSomething* doSomething
    )
{
    (doSomething->*pt2Func)("test");
} 
```

这是您的程序编译的一个[活生生的例子](http://liveworkspace.org/code/4sAas7$65)。

# jquery - 使用 jquery 在 DOM 中重新放置标签

> ID：15321604
> 
> 赞同：0
> 
> 时间：2013-03-10T11:16:36.453
> 
> 标签：jquery, css, dom, joomla, joomla-k2

`img`我一直在尝试在现有的 CMS 制作的 html中重新定位标签

```
<div class="catItemView groupLeading _inspirations">
 <!-- (2) and place it here -->
 <div class="catItemHeader">
     <h3 class="catItemTitle">
         <a href="some link here">ways of seeing</a>
      </h3>
 </div>
 <div class="catItemBody">
     <div class="catItemIntroText">
         <p>
            <a href="youtube link here">
               <img alt="" src="image_link.jpg" /><!-- (1) would like to grab this-->
               John Berger - ways of seeing
            </a>
         </p>
     </div>
    </div>
 <div class="catItemLinks">
 </div>
 </div> 
```

我试过这个：

```
 $('div.catItemIntroText img').prepend('div.catItemHeader'); 
```

但它只会弄乱所有其他“框架”并用所有图像填充“框架”（如这个）。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:22:41.200

目前，您正在将 div 添加到图像中。这会将图像添加到 div：

```
$('.catItemView').prepend($('.catItemIntroText img')); 
```

但是，如果您在页面上多次使用此结构，则需要执行此操作以获得每次出现所需的结果：

```
$('.catItemIntroText img').each(function() {
    $(this).parents('.catItemView').prepend($(this));
}); 
```

# c# - C# 将 XML 反序列化为对象（带字典字段）

> ID：15321610
> 
> 赞同：0
> 
> 时间：2013-03-10T11:17:04.030
> 
> 标签：c#, xml, windows-phone-7, dictionary, deserialization

如何将此 XML 反序列化为对象？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
  <dict>
    <key>key1</key>
    <dict>
        <key>title</key>
        <string>Name1</string>
        <key>price</key>
        <string>1000$</string>
        <key>count</key>
        <string>60</string>
        <key>description</key>
        <string>some description</string>
        <key>photoUrl</key>
        <string>http:/someurl</string>
    </dict>
</dict>
<dict>
    <key>key2</key>
    <dict>
        <key>title</key>
        <string>Name2</string>
        <key>price</key>
        <string>2000$</string>
        <key>count</key>
        <string>35</string>
        <key>description</key>
        <string>some description</string>
        <key>photoUrl</key>
        <string>http://someurl</string>
    </dict>
</dict> 
```

我认为我的对象应该有一个字典作为字段，但是我在代码中定义适当的类时遇到了问题。这个怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:49:39.437

看看[Parsing .plist Files to plain XML C#](https://stackoverflow.com/questions/4014567/parsing-plist-files-to-plain-xml-c-sharp)。评分最高的[答案](https://stackoverflow.com/a/9207497)（截至目前）是指同时支持二进制和 xml plist 格式的[C# 项目。](https://github.com/animetrics/PlistCS)看看有没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:04:38.200

我会尝试让[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer%28v=vs.80%29.aspx)来完成这项工作。

# asp.net - Signalr Groups 仅向第一个连接的客户端发送数据

> ID：15321612
> 
> 赞同：1
> 
> 时间：2013-03-10T11:17:14.670
> 
> 标签：asp.net, signalr

我`SignalR` `PersistentConnection`在我的服务器上使用，从 0.53 更新到 1.0 后，我遇到了一个奇怪的问题。当将客户端添加到组中`Groups.Add(id, name)`，然后向组发送一些数据时，只有第一个连接的客户端接收数据。这似乎与`Groups`我在 stackoverflow 和 signalr github 上发现的其他问题不相似。期待解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:24:28.340

`Groups.Add`返回一个`Task`。在向您希望新添加的客户端接收的组发送消息之前，您应该`await`调用。`Groups.Add`

# jquery - jQuery验证扩展上传文件类型

> ID：15321613
> 
> 赞同：0
> 
> 时间：2013-03-10T11:17:18.960
> 
> 标签：jquery, ajax, file-upload, jquery-validate

我有这个来上传文件并获得进度条。我想将上传的文件限制为仅 pdf，不幸的是它不适用于 JQuery 验证插件：

```
$(document).ready(function(){

var bar = $('.bar');
var percent = $('.percent');
var status = $('#status');

$('#up-form').validate({
 rules: {
     uploadedfile: {
         required: true,
         accept: "application/pdf",
         },
     },
 messages: {
    uploadedfile: "File must be PDF",
    },
 highlight: function(element) {
     $(element).closest('.control-group').removeClass('success').addClass('error');
 },
 success: function(element) {
 element
     .addClass('valid')
     .closest('.control-group').removeClass('error').addClass('success');
 }
});

$('form').ajaxForm({
    beforeSend: function() {

        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    complete: function(xhr) {
     bar.width("100%");
    percent.html("100%");
        status.html(xhr.responseText);
    }
}); 
})(); 
```

我该如何解决？对于我尝试上传的每个文件，我总是收到错误消息“文件必须是 PDF”。

我还在服务器端验证了扩展，但为了节省带宽，我想让它也是客户端

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-23T07:05:00.533

尝试规则

```
extension: "pdf" 
```

别忘了打电话

```
<script src="jquery-validation/dist/additional-methods.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:12:57.107

您拼错`beforeSubmit`了`beforeSend`which is [not a valid callback function/option for this plugin](http://www.malsup.com/jquery/form/#options-object)。

然后看看这个其他答案： [https ://stackoverflow.com/a/15324504/594235](https://stackoverflow.com/a/15324504/594235)

基本上，使用插件的[回调](http://www.malsup.com/jquery/form/#options-object)[`beforeSubmit`函数首先使用`ajaxForm`](http://www.malsup.com/jquery/form/#options-object)[Validate 插件的`.valid()`方法](http://docs.jquery.com/Plugins/Validation/valid)以编程方式检查表单的有效性。

我的回答假设您`.validate()`和`.ajaxForm()`初始化代码在其他方面是正确的。

添加`.valid()`到下面的`beforeSubmit`回调`ajaxForm()`中...

```
$(document).ready(function () {

    var bar = $('.bar');
    var percent = $('.percent');
    var status = $('#status');

    $('#up-form').validate({
        rules: {
            uploadedfile: {
                required: true,
                accept: "application/pdf",
            },
        },
        messages: {
            uploadedfile: "File must be PDF",
        },
        highlight: function (element) {
            $(element).closest('.control-group').removeClass('success').addClass('error');
        },
        success: function (element) {
            element.addClass('valid')
                .closest('.control-group').removeClass('error').addClass('success');
        }
    });

    $('#up-form').ajaxForm({
        beforeSubmit: function () {
            status.empty();
            var percentVal = '0%';
            bar.width(percentVal)
            percent.html(percentVal);
            return $('#up-form').valid(); // TRUE when form is valid, FALSE will cancel submit
        },
        uploadProgress: function (event, position, total, percentComplete) {
            var percentVal = percentComplete + '%';
            bar.width(percentVal)
            percent.html(percentVal);
        },
        complete: function (xhr) {
            bar.width("100%");
            percent.html("100%");
            status.html(xhr.responseText);
        }
    });

}); 
```

# facebook - Facebook Ads API 为多天统计查询返回 unique_impressions = 0

> ID：15321617
> 
> 赞同：1
> 
> 时间：2013-03-10T11:17:39.313
> 
> 标签：facebook, facebook-graph-api, ads, facebook-ads-api

在请求运行时间超过 1 天的添加的广告统计信息时，我收到`unique_imperssion = 0.`

但是，当请求一天的统计信息时，会填充 unique_impression。

这是一个错误还是故意的？是否有解决方法可以获得超过 1 天的独特印象？

**查询一天：**

```
https://graph.facebook.com/<ad_group_id>/stats/1362787200/1362873600 
```

**我得到：**

```
{
   "id": "<ad_group_id>/stats/1362787200/1362873600",
   "impressions": 8616,
   "clicks": 67,
   "spent": 715,
   "social_impressions": 20,
   "social_clicks": 0,
   "social_spent": 0,

   "unique_impressions": 3544,

   "social_unique_impressions": 11,
   "unique_clicks": 67,
   "social_unique_clicks": 0,
   "actions": null,
   "inline_actions": {
      "title_clicks": 0,
      "like": 9,
      "rsvp_yes": 0,
      "rsvp_maybe": 0,
      "post_like": 0,
      "comment": 0,
      "photo_view": 0,
      "link_click": 0,
      "video_play": 0,
      "question_vote": 0
   },... 
```

**查询所有时间：**

```
https://graph.facebook.com/<ad_group_id>/stats 
```

**我得到：**

```
{
   "id": "<ad_group_id>/stats",
   "impressions": 8616,
   "clicks": 67,
   "spent": 715,
   "social_impressions": 20,
   "social_clicks": 0,
   "social_spent": 0,

   "unique_impressions": 0,

   "social_unique_impressions": 11,
   "unique_clicks": 67,
   "social_unique_clicks": 0,
   "actions": null,
   "inline_actions": {
      "title_clicks": 0,
      "like": 9,
      "rsvp_yes": 0,
      "rsvp_maybe": 0,
      "post_like": 0,
      "comment": 0,
      "photo_view": 0,
      "link_click": 0,
      "video_play": 0,
      "question_vote": 0
   },... 
```

谢谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T17:55:35.340

您是否忘记使用 1、7 或 28 天的时间戳，并根据广告帐户本身的时区进行调整？这是这里最可能的解释

例如，如果您的广告帐户 ( `/act_<ACCOUNT_NUMBER_HERE`) 是这样的：

```
 "account_id": "<SNIP>", 
  "id": "act_<SNIP", 
  "name": "<SNIP> default (EUR) account", 
  "account_status": 1, 
  "currency": "EUR", 
  "timezone_id": 69, 
  "timezone_name": "Europe/Dublin", 
  "timezone_offset_hours_utc": 1, 
```

您需要将统计调用的时间戳调整为 UTC +1

因此，为了检索独特的统计数据，您需要从午夜到午夜，在 UTC +1 中请求 1、7 或 28 天的数据，这个示例应该适合您：

`<SNIP>/stats/2013-02-01 00:00:00 +0100/2013-03-01 00:00:00 +0100`

或者

`<SNIP>/stats/1359673200/1362092400`

示例响应（截断）

```
{
  "id": "<SNIP>/stats/1359673200/1362092400", 
  "impressions": "166561", 
  "clicks": "6304", 
  "spent": "45257", 
  "social_impressions": "166556", 
  "social_clicks": "6304", 
  "social_spent": "45257", 
  "unique_impressions": 111368, 
  "social_unique_impressions": 111368, 
  "unique_clicks": 5992, 
  "social_unique_clicks": 5992, 
  "actions": { 
```

# c++ - 如何删除 C++ 数组常量中的#define 使用？

> ID：15321619
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:17:53.550
> 
> 标签：c++

有这个代码：

```
#define GREEN 0.0f, 1.0f, 0.0f
#define RED   1.0f, 0.0f, 0.0f

const float colors[] = {
    RED, GREEN, RED, RED,
}; 
```

如果不使用`#define`. 这是更好的方法吗？此外，考虑到 C++11 标准。

更新：使用这种定义的完整代码示例，[https://bitbucket.org/alfonse/gltut/src/3ee6f3dd04a76a1628201d2543a85e444bae8d25/Tut%2005%20Objects%20in%20Depth/OverlapNoDepth.cpp?at=default](https://bitbucket.org/alfonse/gltut/src/3ee6f3dd04a76a1628201d2543a85e444bae8d25/Tut%2005%20Objects%20in%20Depth/OverlapNoDepth.cpp?at=default)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:28:27.277

我不确定你要做什么，但要创建一个颜色列表，我会这样做：

```
#include <vector>

class color {
public:
  color(float r, float g, float b)
    : m_red(r), m_green(b), m_blue(b) { }

  float m_red;
  float m_green;
  float m_blue;
};

const auto red   = color(1.0f, 0.0f, 0.0f);
const auto green = color(0.0f, 1.0f, 0.0f);
const auto blue  = color(0.0f, 0.0f, 1.0f);

int main {

  auto colors = std::vector<color>();
  colors.push_back(red);
  colors.push_back(green);
  colors.push_back(blue);
  colors.push_back(red);
  ...
} 
```

**编辑** 正如 juanchopanza 建议的那样，我在构造函数初始化列表中初始化了浮点数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T11:29:22.017

正如 Elasticboy 建议的那样，做这样的事情：

```
struct Color {
   float R;
   float G;
   float B;
}; 
```

现在，创建常量：

```
const Color Red = {1.0f, 0.0f, 0.0f };
const Color Green = {0.0f, 1.0f, 0.0f }; 
```

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:34:59.117

你可以`enum`在这里使用。例如

```
typedef enum color
{
    RED, GREEN, BLUE
} color; 
```

或者，您也可以为颜色分配默认值。例如

```
typedef enum color
{
    RED=1, GREEN=5, BLUE=7
} color; 
```

您唯一需要记住的是这些被命名为整数常量。此处不允许使用浮点值。

# php - 不推荐使用的 MySql 函数

> ID：15321620
> 
> 赞同：1
> 
> 时间：2013-03-10T11:17:53.860
> 
> 标签：php, mysql, mysqli

在接下来的几天里，PHP 不会推广[一些 MySql 功能](http://www.php.net/manual/tr/function.mysql-query.php)。

PHP 手册中有一些关于清理弃用函数的示例。但例如；当我用下面的代码替换时`mysql_query`不起作用`mysqli_query`。Notepad++ 也将它们视为自己定义的函数。所有示例都使用 PHP 手册中的 OOP。我需要一个不使用面向对象编程的例子。

有人可以告诉我如何从已弃用的 mysql 函数中清理我的代码吗？

```
function db_connect_select() 
{
        $connection = @mysql_connect(MYSQL_HOSTNAME, USERNAME_SELECT, PASSWORD);

        if (!$connection)
        {
          return false; 
        }

        if (!mysql_select_db(DATABASE))
        {
          return false; 
        }

        mysql_query("SET NAMES UTF8");

        return $connection;    
}

function db_result_to_array($result) 
{
    $res_array = array();

    for ($count = 0; $row = mysql_fetch_array($result); $count++)
    {
      $res_array[$count] = $row;    
    }
    return $res_array;
}

function select_top_tags()
{
    $connection = db_connect_select();

    $query = 'SELECT * FROM top_tags ORDER BY tag_name ASC';

    $result = db_result_to_array(mysql_query($query));

    if(mysql_ping($connection))
    {
        mysql_close($connection); 
    } 

    return $result; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:26:02.757

这将毫无意义。
单纯的机械更换是没有用的。

您必须了解它本身**不是旧功能，但不鼓励使用旧方法。**

因此，如果您想保持当前代码不变 - 请保留它。
手册中的红框并没有*那么*可怕，并且这些功能实际上会引发弃用级别错误的版本尚未发布。
所以，你有 3-4 年的时间，在你遇到任何不便之前。即使这样，关闭已弃用级别的错误也是一个运行时设置的问题。

但是如果你想编写更好的代码——你必须使用**[PDO](https://stackoverflow.com/tags/pdo/info)***的 OOP 方式（我可以向你保证*OOP 并不可怕。虽然在编写时需要一些知识，但使用现成的类非常容易。与熟悉的功能的唯一区别是一点点`->`。没什么大不了的）

所以，给你：

```
function db_connect_select() 
{
    $dsn = 'mysql:host='.MYSQL_HOSTNAME.';dbname='.DATABASE.';charset=utf8';
    $opt = array(
        PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    ); 
    return new PDO($dsn,USERNAME_SELECT, PASSWORD, $opt);
}

function db_result_to_array($query,) 
{
  // not needed with PDO
}

function select_top_tags()
{
    global $pdo;

    $query = 'SELECT * FROM top_tags ORDER BY tag_name ASC';
    $stm = $pdo->prepare($query);
    $stm->execute();
    return $stm->fetchAll();
} 
```

用法：

```
$pdo = db_connect_select(); // somewhere in a bootstrap file
$tags = select_top_tags(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:27:25.967

`mysqli_*`函数不是函数的直接替换`mysql_*`。它们以不同的方式使用，简单的更换是行不通的。Internet 上有很多教程描述了如何`mysqli_*`在 PHP 中使用函数，例如[这个](http://coursesweb.net/php-mysql/php-mysql-using-mysqli)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T11:34:40.403

我认为您应该仔细阅读[有关迁移的手册部分，](http://www.php.net/manual/en/mysqli.quickstart.dual-interface.php)因为它专门讨论了两个扩展之间的（次要）差异。

一些例子：

```
// no select_db, give db to _connect call
$connection = @mysqli_connect(MYSQL_HOSTNAME,USERNAME_SELECT,PASSWORD,DATABASE);

// need to give the connection parameter to mysqli_query
mysqli_query($connection,"SET NAMES UTF8"); 
```

等等

正如其他人已经说过的，这个程序界面主要是为了方便和简化过渡而提供的。同时，您应该花一些时间来掌握更新的数据库接口中使用的更现代的概念——我强烈建议您看看[PDO](http://www.php.net/manual/en/book.pdo.php)，它是目前为止最好的 PHP 数据库 API。

# asp.net-mvc - 如何在 MVC 4 自定义成员中覆盖 IsInRole 方法？

> ID：15321623
> 
> 赞同：0
> 
> 时间：2013-03-10T11:18:18.917
> 
> 标签：asp.net-mvc, isinrole

![自定义成员资格表](../Images/feee1aba759f610f200115dd5fcbbe66.png)

![自定义会员数据](../Images/1be51240f9388d5bb161c24d9eca76df.png)

我对 MVC 很陌生。我正在做一个自定义会员 asp.net MVC4。以上是我创建的表格和数据。我尝试覆盖 isinrole 方法，但它不起作用。下面是示例代码，我不知道在哪里编辑它。

```
 public override bool IsUserInRole(string userName, string roleName)
    {
        User user = repository.GetUser(userName);
        Role role = repository.GetRole(roleName);

        if (!repository.UserExists(user))
            return false;
        if (!repository.RoleExists(role))
            return false;

        return user.Name == role.Name;
    } 
```

现在我需要从 UserInRole 表中获取用户的角色列表，但该表不可见。我必须检查用户角色是否匹配。`User.IsInRole("Administrator")`希望任何人都可以指导我。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:22:32.793

它不起作用，因为您正在将角色名称与用户名（“a”！=“Administrator”）进行比较。你需要更多这样的东西。

```
public override bool IsUserInRole(string userName, string roleName)
{
    User user = repository.GetUser(userName);
    Role role = repository.GetRole(roleName);

    if (!repository.UserExists(user))
        return false;
    if (!repository.RoleExists(role))
        return false;

    return user.Role.ID == role.ID;
} 
```

它可能会有所不同，具体取决于您的实体的设置方式。

# javascript - 带有 next() 或 eq() 的选定复选框旁边的 jQuery 反馈

> ID：15321624
> 
> 赞同：0
> 
> 时间：2013-03-10T11:18:35.500
> 
> 标签：javascript, jquery, forms, checkbox, next

我有几个复选框。当一个复选框被选中时，在该复选框旁边应该会出现一个带有消息的 div（一个带有 .feedback 类的 div）。这有效，使用 next()。But when two or three checkboxes are selected next to the checked checkboxes (including the first one) a button should appear. 当再次取消选中复选框时，该复选框旁边的按钮应该会再次消失。当只剩下一个时，该消息应再次出现。

我可以让它在所有复选框旁边显示一个按钮，但不能在选中的复选框旁边显示一个按钮。

JSBIN 可以在这里找到：http: [//jsbin.com/egutaj/1/edit](http://jsbin.com/egutaj/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:16:37.427

试试这个

**HTML**

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<form action="#" name="form">

<div>
    <input type="checkbox" name="test[]" value="1" class="selectie" />
    <div class="feedback"></div>
    <input type="submit" class="button" value="Compare" name="submit" style="display:none;" />
</div>
<div>
    <input type="checkbox" name="test[]" value="2" class="selectie" />
    <div class="feedback"></div>
    <input type="submit" class="button" value="Compare" name="submit" style="display:none;"  />
</div>
<div>   
    <input type="checkbox" name="test[]" value="3" class="selectie" />
    <div class="feedback"></div>
    <input type="submit" class="button" value="Compare" name="submit" style="display:none;" />
</div>
<div>
    <input type="checkbox" name="test[]" value="4" class="selectie" />
    <div class="feedback"></div>
    <input type="submit" class="button" value="Compare" name="submit" style="display:none;" />
</div>
<div>   
    <input type="checkbox" name="test[]" value="5" class="selectie" />
    <div class="feedback"></div>
    <input type="submit" class="button" value="Compare" name="submit" style="display:none;" />
</div>
</form>
<body>

</body>
</html> 
```

**CSS**

```
.feedback
{
    display:none;
    padding:10px;
}
.button
{
    display:block
    padding:10px;
} 
```

**jQuery**

```
var countChecked = function()
{
    var n = $('input:checked').length;
    if(n === 0)
    {
        $('.feedback').hide();
        $('.button').hide();
        $('.selectie').removeAttr('disabled');
    }
    else if(n == 1)
    {
        $('.feedback').text("Add 1 or 2 to compare");
        $('.selectie').removeAttr('disabled');
        $('.button').hide();
        $(".selectie").each(function(){
            if($(this).is(':checked'))
            {
                $(this).next('.feedback').show();
            }
            else
            {
                $(this).next('.feedback').hide();
            }
        });
    }
    else if(n >= 2)
    {
        $('.selectie').removeAttr('disabled');
        $('.feedback').hide();  
        $(".selectie").each(function(){
            if($(this).is(':checked'))
            {
                $(this).next('.feedback').next('.button').show();
            }
            else
            {
                $(this).next('.feedback').next('.button').hide();
            }
        });
    }
};
countChecked();
 $( "input[type=checkbox]" ).on( "click", countChecked ); 
```

现场演示[**在这里**](http://jsbin.com/egutaj/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:11:11.123

您需要使用 jQuery.each () 函数来遍历复选框，根据需要显示或隐藏其兄弟。

# visual-studio - Visual Studio 图形调试器

> ID：15321627
> 
> 赞同：0
> 
> 时间：2013-03-10T11:18:53.987
> 
> 标签：visual-studio, directx-11

我无法让**VS 2012 Ultimate**中的图形调试器工作，我不知道为什么。

调试器启动正常，但是当我点击打印屏幕按钮时，调试器只是说它正在等待 DX 绘制帧。[即使在我退出之后]

我确信平局是指交换链中的**Present()**。我叫它[这就是为什么你看到下面的盒子]

我需要注意一些错误吗？

**编辑：**
我认为渲染目标可能与**OMSetRenderTargets()**相关。
我完全按照 SDK 示例的方式调用它，所以我不知道还能怎么想。

![调试器](../Images/354e749cfc264a438cd680f0f539124e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T17:25:20.383

我是 Microsoft Visual Studio 图形诊断工具的开发人员。我是团队中的新人，我不相信任何以前的团队成员都在积极关注 Stack Overflow，很抱歉等待这个问题。

几个月过去了，我猜你可能不再有复制品了。因此，现在这可能有点难以诊断。从您共享的内容来看，播放引擎（我们用于在应用程序运行时捕获和重放 DirectX 数据）在尝试收集应用程序上的数据时崩溃。遗憾的是，在我们工具的第一个版本（在 VS 2012 中）这种类型的稳定性问题比我们想要的更常见。只是我们如何在 DirectX 等复杂的东西上进行收集的一个函数。但是从那时起，尤其是在更新 2 中，我们在兼容性和稳定性方面取得了很大进步。作为第一步，我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:18:22.897

你为什么不使用 PIX 来代替[http://www.youtube.com/watch?v=-3PISvNTeB0](http://www.youtube.com/watch?v=-3PISvNTeB0)

[PIX 教程](http://www.youtube.com/watch?v=-3PISvNTeB0)

# c# - 更新控制线程安全

> ID：15321643
> 
> 赞同：0
> 
> 时间：2013-03-10T11:20:53.120
> 
> 标签：c#, .net, multithreading, thread-safety

如何将文本值或数值修改为文本框控件或 numbericUpDown 控件，或将项目和/或子项目添加到列表视图控件，或从线程内更新进度条，而无需创建多个定义，例如新功能和新代表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:20:53.120

我为我创建的应用程序所需的一组控件创建了一组线程安全的扩展函数，该应用程序需要对表单进行大量线程更新。该类将方法直接添加到控件中，因此使访问控件线程安全需要非常少的代码更改。只需将此类添加到您的项目中。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows.Forms;
using System.Drawing;

namespace System.Windows.Forms
{
  public static class TSFormExtenders
  {
    #region Control
    public static void SetEnabledTS(this Control x, bool s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetEnabledTS(s);
        }));
      }
      else
      {
        x.Enabled = s;
      }
    }

    public static bool GetEnabledTS(this Control x, bool def = false)
    {
      if (x.InvokeRequired)
      {
        bool m_ret = def;
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          m_ret = x.GetEnabledTS();
        }));
        return m_ret;
      }
      else
      {
        return x.Enabled;
      }
    }

    public static void SetTextTS(this Control x, String s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetTextTS(s);
        }));
      }
      else
      {
        x.Text = s;
      }
    }

    public static String GetTextTS(this Control x, String def = "")
    {
      if (x.InvokeRequired)
      {
        String m_ret = def;
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          m_ret = x.GetTextTS();
        }));
        return m_ret;
      }
      else
      {
        return x.Text;
      }
    }

    public static void SetVisibleTS(this Control x, bool s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetVisibleTS(s);
        }));
      }
      else
      {
        x.Visible = s;
      }
    }

    public static bool GetVisibleTS(this Control x, bool def = true)
    {
      if (x.InvokeRequired)
      {
        bool m_ret = def;
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          m_ret = x.GetVisibleTS();
        }));
        return m_ret;
      }
      else
      {
        return x.Visible;
      }
    }

    public static void SetSizeTS(this Control x, Size s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetSizeTS(s);
        }));
      }
      else
      {
        x.Size = s;
      }
    }

    public static Size GetSizeTS(this Control x)
    {
      if (x.InvokeRequired)
      {
        Size m_ret = new Size();
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          m_ret = x.GetSizeTS();
        }));
        return m_ret;
      }
      else
      {
        return x.Size;
      }
    }
    #endregion

    #region CheckBox
    public static void SetCheckedTS(this CheckBox x, bool s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetCheckedTS(s);
        }));
      }
      else
      {
        x.Checked = s;
      }
    }

    public static bool GetCheckedTS(this CheckBox x)
    {
      if (x.InvokeRequired)
      {
        bool m_ret = false;
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          m_ret = x.GetCheckedTS();
        }));
        return m_ret;
      }
      else
      {
        return x.Checked;
      }
    }
    #endregion

    #region NumericUpDown
    public static void SetValueTS(this NumericUpDown x, Decimal s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetValueTS(s);
        }));
      }
      else
      {
        x.Value = s;
      }
    }

    public static Decimal GetValueTS(this NumericUpDown x)
    {
      if (x.InvokeRequired)
      {
        Decimal m_ret = 0;
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          m_ret = x.GetValueTS();
        }));
        return m_ret;
      }
      else
      {
        return x.Value;
      }
    }

    public static void SetMinTS(this NumericUpDown x, Decimal s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetMinTS(s);
        }));
      }
      else
      {
        x.Minimum = s;
      }
    }

    public static void SetMaxTS(this NumericUpDown x, Decimal s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetMaxTS(s);
        }));
      }
      else
      {
        x.Maximum = s;
      }
    }
    #endregion

    #region ProgressBar
    public static void SetValueTS(this ProgressBar x, Int32 s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetValueTS(s);
        }));
      }
      else
      {
        x.Value = s;
      }
    }

    public static Int32 GetValueTS(this ProgressBar x)
    {
      if (x.InvokeRequired)
      {
        Int32 m_ret = 0;
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          m_ret = x.GetValueTS();
        }));
        return m_ret;
      }
      else
      {
        return x.Value;
      }
    }

    public static void SetMinTS(this ProgressBar x, Int32 s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetMinTS(s);
        }));
      }
      else
      {
        x.Minimum = s;
      }
    }

    public static void SetMaxTS(this ProgressBar x, Int32 s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.SetMaxTS(s);
        }));
      }
      else
      {
        x.Maximum = s;
      }
    }
    #endregion

    #region ListView
    public static void AddItemTS(this ListView x, ListViewItem s)
    {
      if (x.InvokeRequired)
      {
        x.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.AddItemTS(s);
        }));
      }
      else
      {
        x.Items.Add(s);
      }
    }

    public static void AddItemTS(this ListViewItem x, System.Windows.Forms.ListViewItem.ListViewSubItem s)
    {
      if (x.ListView.InvokeRequired)
      {
        x.ListView.Invoke(new EventHandler(delegate(object o, EventArgs a)
        {
          x.AddItemTS(s);
        }));
      }
      else
      {
        x.SubItems.Add(s);
      }
    }
    #endregion
  }
} 
```

# ios - 在核心数据中访问我的托管对象的 NSSet

> ID：15321647
> 
> 赞同：3
> 
> 时间：2013-03-10T11:21:00.777
> 
> 标签：ios, objective-c, cocoa-touch

我正在开发的应用程序由两个类组成，每个类都属于一个表格视图控制器（您可以说该应用程序类似于一个主从应用程序）。在第一个类中，特别是在 prepareForSegue 方法中，我传递了一个 NSMangedObject 以便下一个视图可以向托管对象的属性添加一些内容。

我在第一堂课中输入了以下内容：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue destinationViewController] isKindOfClass:[SSCViewController class]]) {
        NSManagedObject *selectedObject = [objects objectAtIndex:[[self.tableView indexPathForSelectedRow] row]];
        SSCViewController *destinationViewController = segue.destinationViewController;
        destinationViewController.managedObject = selectedObject;
    }
} 
```

在第二个类 .h 文件中，它具有以下属性：

```
@property (strong, nonatomic) NSManagedObject *managedObject; 
```

因此，我的数据模型由两个具有反向一对多关系的实体组成。我想访问“managedObject”的 NSSet 以查看它是否包含任何内容或确保存在添加的实体。我尝试了 [self.managedObject allObjects] 和 [self.managedObject hasObjects] 但都没有工作（hasObjects 是托管对象与其他实体之间关系的名称）。如何访问托管对象的关系并返回 NSSet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:37:22.463

如果您的核心数据属性名为“toManyRelation”，则使用

```
NSSet *mySet = [self.managedObject valueForKey:@"toManyRelation"]; 
```

...然后从那里去。

我从痛苦的经历中知道，当你从这件事开始时，这些事情并不是太明显。但事实证明它很简单，一旦你知道了。

# c++ - MFC如何将CStatic调整为小尺寸

> ID：15321658
> 
> 赞同：1
> 
> 时间：2013-03-10T11:21:59.667
> 
> 标签：c++, mfc

我对 CStatic 控件有以下问题：

当我调用函数时`SetIcon`：

```
 m_CStatic.SetIcon(AfxGetApp()->LoadIcon(IDI_ICON1)); 
```

它加载了一个大小为 14x14 像素的图标，但控件的实际大小变为 21x20，我无法修改它。

我试着打电话：

```
 m_CStatic.SetWindowPos(NULL,0 , 0, 14, 14, SWP_NOMOVE); 
```

但它只会缩小尺寸而不调整图标的大小。结果我有一部分缩放图像。

有没有办法设置要加载的图标的大小？

**编辑**

的实际大小`IDI_ICON1`为**14x14**像素。

此外，`CStatic`控件的大小是**21x20**，我无法与设计师一起更改它。

当我加载一个图标时，它会被拉伸。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:03:35.450

> 的实际大小`IDI_ICON1`为 14x14 像素。
> 
> 此外，`CStatic`控件的大小是 21x20，我无法与设计师一起更改它。

如果您在设计器中查看控件的大小，那么您不是在将苹果与苹果进行比较。设计人员报告的是**DLU**（对话框单元）中控件的大小，**而不是像素**。

DLU 和像素之间不一定存在一对一的映射。事实上，DLU 的全部意义在于它与像素无关。单个 DLU 表示的实际像素数将根据您运行应用程序的计算机的字体和 DPI 变化。

所以你看到的行为对我来说很有意义。

如果您不相信这个 DLU 与像素的愚蠢，那么请尝试在调试器下运行应用程序并使用 Spy++ 来调查静态控件的实际大小（以像素为单位）。我敢打赌它是 14x14。

不，如果您将其设置为显示图标，则无法在设计器中调整静态控件的大小。控件会自动调整大小以适应它所显示的图标。这也是设计使然。我无法想象你为什么要这样做；你的全部观点似乎是你不希望图标被剪裁。

But like I said in a comment, static controls do not automatically scale their icons. You need to write code to do the icon scaling yourself (probably by calling the [`DrawIconEx` function](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648065.aspx)). Forcing the static control to resize itself will just crop the icon or add a border around it. Adding the `SS_CENTERIMAGE` style, as [duDE suggested](https://stackoverflow.com/a/15321713/366904) will alter this behavior so that the icon is aligned to the center of the static control, subtly changing how the cropping happens. But it will still get cropped to fit the static control's size.

不过要小心。我在评论中关于实际图标的问题的全部要点`IDI_ICON1`是该`LoadIcon`功能有一些重要的限制。也就是说，它仅设计用于加载具有`SM_CXICON`和`SM_CYICON`大小的图标（在大多数系统上，这将是 32x32）。当您在图标资源中仅定义一个图标时，它确实可以按预期工作，但否则它将崩溃。这可能是拉伸的解释。相反，建议您使用该[`LoadImage`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045.aspx)。代码比较冗长，但它是一个更强大的功能：

```
HICON hIcon = static_cast<HICON>(AfxGetInstanceHandle(),
                                 MAKEINTRESOURCE(IDI_ICON1),
                                 IMAGE_ICON,
                                 14,   /* width (x dimension) */
                                 14,   /* height (y dimension) */
                                 LR_DEFAULTCOLOR));
// (make sure to call DestroyIcon() on hIcon when you're done with it!) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:29:10.397

试试这个：

```
CStatic m_CStatic;

// Create a child icon static control
m_CStatic.Create(_T("my static"), 
   WS_CHILD|WS_VISIBLE|SS_ICON|SS_CENTERIMAGE, CRect(0 , 0, 14, 14), pParentWnd);

// Set the icon
m_CStatic.SetIcon(::LoadIcon(IDI_ICON1)); 
```

重点是 SS_CENTERIMAGE：

位图位于包含它的静态控件的中心。控件未调整大小，因此对于控件来说太大**的位图****将被剪裁**。

# c# - 使用 Ajax 调用将文件上传到虚拟目录

> ID：15321660
> 
> 赞同：0
> 
> 时间：2013-03-10T11:22:11.947
> 
> 标签：c#, file-upload, asp.net-mvc-4

我正在构建一个 CMS 作为 MVC 4 项目，其中一个功能是**上传您的照片**。用户从他的硬盘驱动器中选择一张照片，这会触发控制器上的 UploadFile 方法的 ajax 请求。这应该将照片复制到服务器上的虚拟文件夹中。问题是我真的不明白浏览器将文件存储在哪里并将其发送到服务器，以及我应该在控制器上做什么。

到目前为止，这是我的代码-

风景：

```
<input id="cng_pic_btn" type="file" name="file" accept="image/*" /></td> 
```

JavaScript 调用服务器：

```
$('#cng_pic_btn').live('change', function () {

    custom_url = "/SideBar/UploadFile";
    return_msg = "file uploaded";

    var file_path = $('#cng_pic_btn').attr("value");
    alert(file_path);
    sendInfo = {
        upload_from: file_path
    }

    CreataAjaxRequest(custom_url, sendInfo, return_msg);

}) 
```

控制器方法：

```
 [HttpPost]
    public void UploadFile(string upload_from)
    {
            string path = @"D:\Temp\";

            HttpPostedFileBase photo = Request.Files[upload_from];

            photo.SaveAs(path + photo.FileName);
    } 
```

发送ajax请求：

```
function CreataAjaxRequest(custom_url, sendInfo, return_msg) {

    $.ajax({ type: "POST", url: custom_url, data: sendInfo })
                .success(function (html) {
                    $(".query-result").replaceWith(html);

                })

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:29:09.853

您还没有展示您的`CreataAjaxRequest`方法，但是如果您想使用 AJAX 上传文件，有几个选项：

*   您的客户端浏览器支持[`HTML 5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)在这种情况下您可以使用 XmlHttpRequest2 对象
*   您的客户端浏览器不支持文件 API（例如 Internet Explorer），在这种情况下，您可以使用文件上传插件，例如[`Uploadify`](http://www.uploadify.com/)或[`Fine Uploader`](http://fineuploader.com/)使用隐藏 iframe 或 Flash 电影等技术用于那些旧版浏览器。

下面是如何使用 HTML 5 File API 上传文件的示例：

```
function CreataAjaxRequest(custom_url, sendInfo, return_msg) {
    var xhr = new XMLHttpRequest();
    var fd = new FormData();
    xhr.open('POST', custom_url, true);
    var file = document.getElementById('cng_pic_btn').files[0];;
    fd.append('myFile', file);
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status == 200) {
            $('.query-result').replaceWith(xhr.responseText);
        }
    };
    xhr.send(fd);
} 
```

然后在您的服务器上：

```
[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase myFile)
{
    var path = string path = @"D:\Temp\";
    myFile.SaveAs(Path.Combine(path, myFile.FileName));

    return PartialView();
} 
```

`PartialView` 另请注意，如果您想在 AJAX 回调中使用该方法，您的控制器操作需要返回 a `$('.query-result').replaceWith(xhr.responseText);`，否则您要替换什么？

# asterisk - 呼叫不能进入星号

> ID：15321661
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:22:20.557
> 
> 标签：asterisk

我是星号的新手，我安装了 Asterisk，但是现在当我用电话呼叫时，无法进入星号，并且我配置了拨出呼叫蝙蝠呼叫在我写时无法输出星号（asterisk -vvvvvr），并且我用户外显示器呼叫

> -- 在newstack中执行[09396464991@DLPN_Main:1] Macro("SIP/6001-00000000", "trunkdial -failover-0.3,DAHDI/g2/09396464991,DAHDI/g1/09396464991,trunk_1,trunk_1")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:1] GotoIf("SIP/6001-00000000","0?1-fmsetcid,1")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:2] GotoIf("SIP/6001-00000000","0?1-setgbobname,1")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:3] Set("SIP/6001-00000000", "CALLERID(num)=6001")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:4] Set("SIP/6001-00000000", "CALLERID(all)=")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:5] GotoIf("SIP/6001-00000000","0?1-dial,1")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:6] Set("SIP/6001-00000000", "CALLERID(all)=")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:7] Set("SIP/6001-00000000", "CALLERID(all)=")
> 
> -- 在新堆栈中执行 [s@macro-trunkdial-failover-0.3:8] Goto("SIP/6001-00000000", "1-dial,1")
> 
> -- 转到 (macro-trunkdial-failover-0.3,1-dial,1)
> 
> -- 在新堆栈中执行 [1-dial@macro-trunkdial-failover-0.3:1] Dial("SIP/6001-00000000:", "DAHDI/g2/09396464991")
> 
> **[3 月 10 日 13:40:04] *** *警告 [2106]：channel.c:5627 ast_request：没有为“DAHDI”注册通道类型**
> 
> **[3 月 10 日 13:40:04] 警告 [2106]: app_dial.c:2274 dial_exec_full: 无法创建类型为“DAHDI”的通道（原因 66 - 未实现通道）** == 此时每个人都很忙/拥塞（1 :0/0/1)
> 
> -- 在新堆栈中执行 [1-dial@macro-trunkdial-failover-0.3:2] GotoIf("SIP/6001-00000000", "20 > 0?1-CHANUNAVAIL,1:1-out,1")
> 
> -- 转到 (macro-trunkdial-failover-0.3,1-CHANUNAVAIL,1)
> 
> -- 在新堆栈中执行 [1-CHANUNAVAIL@macro-trunkdial-failover-0.3:1] Dial("SIP/6001-00000000", "DAHDI/g1/09396464991") [3 月 10 日 13:40:04] 警告 [ 2106]：channel.c:5627 ast_request：没有为“DAHDI”注册通道类型
> 
> **[3 月 10 日 13:40:04] 警告 [2106]：app_dial.c:2274 dial_exec_full：无法创建类型为“DAHDI”的通道（原因 66 - 未实现通道）==此时每个人都很忙/拥塞(1:0/0/1)
> 
> -- 在新堆栈中执行 [1-CHANUNAVAIL@macro-trunkdial-failover-0.3:2] Hangup("SIP/6001-00000000", "") **== Spawn extension (macro-trunkdial-failover-0.3, 1 -CHANUNAVAIL，2）在宏“trunkdial-failover-0.3”中的“SIP/6001-00000000”上退出非零== Spawn 扩展（DLPN_Main，09396464991，1）在“SIP/6001-00”上退出非零

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:47:38.387

1）首先检查您的 dahdi 配置是否存在，并且没问题。使用以下检查它

```
 dahdi_cfg -vvvv 
```

2) 检查您的星号是否支持 pri/da​​hdi。

# android - 将 ListFragment 替换为 ViewPager 中的 Fragment 与选项卡

> ID：15321666
> 
> 赞同：4
> 
> 时间：2013-03-10T11:22:40.257
> 
> 标签：android, tabs, android-viewpager, fragment, android-listfragment

我尝试在我的应用程序中设置以下导航：

实际情况：ViewPager + Tabs 在列表之间滑动：

*   列表片段 A
*   列表片段 B

所需条件：ViewPager + 选项卡：

*   ListFragment A onListItemSelected 将 ListFragment A 替换为 DetailFragment A
*   ListFragment B onListItemSelected 用 DetailFragment B 替换 ListFragment B

目标是在选项卡导航中显示详细信息片段。我不能用 detailFragment 替换 fragmentList（fragmentList 没有自定义布局，因此没有 ID，我不知道该怎么做）。此外，开始一个新活动会隐藏标签栏。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T11:55:30.673

我会制作一个包装片段，它知道要显示什么 - 列表或详细信息。这将与`ViewPager`- pager 只知道它包含包装片段完全分离，并且这些片段将自己管理它们的内容。

实施将遵循以下原则：

```
public class WrapperFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        MyListFragment list = new MyListFragment();
        list.setListAdapter(adapter);
        list.setOnItemClickListener(new OnItemClickListener() {
            @Override public void onItemClick(AdapterView<?> l, View v, int position, long id) {
              // Create details fragment based on clicked item's position
              Fragment details = new Fragment();
              getChildFragmentManager()
                  .beginTransaction()
                  .replace(R.id.container, details)
                  .addToBackStack(null)
                  .commit();
            }
        });

        getChildFragmentManager()
            .beginTransaction()
            .add(R.id.container, list)
            .commit();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // There has to be a view with id `container` inside `wrapper.xml`
        return inflater.inflate(R.layout.wrapper, container, false);
    }

    public class MyListFragment extends ListFragment {

        private OnItemClickListener listener;

        public void setOnItemClickListener(OnItemClickListener l) {
            this.listener = l;
        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            if(listener != null) {
              listener.onItemClick(l, v, position, id);
            }
        }
    }
} 
```

* * *

`wrapper.xml`. 想法是`WrapperFragment`必须提供一个布局，其中包含一个带有 id 的视图`container`- 因为我们正在使用带有这个 id 的视图来放置子片段 -`MyListFragment`或`DetailsFragment`.

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <FrameLayout
        android:id="@+id/container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</FrameLayout> 
```

* * *

其他方式。这应该可行，但您必须尝试一下（布局`id`本身，而不是有一个 id 的孩子`container`）：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/> 
```

# cocoa - “key 包含 $value”是什么意思？

> ID：15321668
> 
> 赞同：0
> 
> 时间：2013-03-10T11:22:41.600
> 
> 标签：cocoa, cocoa-bindings, nssearchfield

我有`NSSearchField`一个`NSDictionaryController`. 在我的搜索字段的谓词格式中，我有这样的代码，这`key contains $value`是什么意思？谓词格式（代码行）还有哪些其他替代方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:28:41.383

快速[搜索文档](http://developer.apple.com/library/mac/search/?q=predicate+format)会[在 Predicate Programming Guide 中找到这一章](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)：

> 变量用 a 表示`$`（例如`$VARIABLE_NAME`）。

我没有看到任何地方明确提到它，但这意味着*不*以 a 为前缀的标识符`$`被视为键——即，由[键值编码](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/)检索。谓词将匹配字典控制器中的那些对象，其[值为](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/valueForKey%3a) `key`...</p>

> `CONTAINS`
> 
> 左侧表达式包含右侧表达式。

...*包含*的值`$value`。

那是什么`$value`？[可可绑定参考解释说](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/CocoaBindingsRef/Concepts/BindingTypes.html#//apple_ref/doc/uid/20002305-216985)：

> 多值谓词绑定允许您创建一个搜索字段弹出菜单，该菜单预先填充了与谓词过滤器相对应的菜单项。每个谓词绑定对应于搜索字段弹出菜单中的一个条目。这个多值绑定由 NSSearchField 谓词绑定使用。
> 
> 显示名称字符串用作菜单项标题。谓词格式是使用谓词编程指南中描述的谓词格式指定该菜单项的谓词的字符串。**谓词格式字符串中出现的任何`$value`字符串都将替换为搜索字段的内容。**

换句话说，一个 NSSearchField`value`为它的谓词预定义了变量，以保存当前在该字段中的任何文本——即用户正在搜索的文本。

因此，例如，如果您使用格式创建谓词`name contains $value`，并且用户搜索“Emily”，则该谓词将匹配那些`name`包含（作为子字符串）字符串“Emily”的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T11:27:12.580

`key`代表字典的Key，`$value`代表输入的值`NSSearchField`。

要从更多字段中搜索，您可以使用 || 和 && 在谓词格式中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:08:38.947

我不知怎的发现了！I 对于谓词格式，我只需要输入

```
value contains $value 
```

让它工作。现在我明白了！谢谢大家的帮助！！！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-10T12:24:55.957

```
foreach (var item in dictionary) {
   cellValue.Text = item.Value.ToString();
} 
```

# delphi - 将 PNG 加载到 TImage

> ID：15321669
> 
> 赞同：3
> 
> 时间：2013-03-10T11:22:57.017
> 
> 标签：delphi, png, delphi-xe

我正在尝试使用 PNGImage 库将 PNG 图像加载到 TImage，

每次我做

```
Image1.Picture.LoadFromFile('c:\c.png'); 
```

我得到：

> 正在读取的文件不是有效的“便携式网络图形”图像，因为它包含无效的标题。此文件可能已损坏，请尝试重新获取

现在我猜这个问题是由这些行引起的（来自 PngImage 库）：

```
{Characters for the header}
const
  PngHeader: Array[0..7] of Char = (#137, #80, #78, #71, #13, #10, #26, #10);

{Loads the image from a stream of data}
procedure TPngObject.LoadFromStream(Stream: TStream);
var
  Header    : Array[0..7] of Char;
  HasIDAT   : Boolean;

  {Chunks reading}
  ChunkCount : Cardinal;
  ChunkLength: Cardinal;
  ChunkName  : TChunkName;
begin
  {Initialize before start loading chunks}
  ChunkCount := 0;
  ClearChunks();
  {Reads the header}
  Stream.Read(Header[0], 8);

  {Test if the header matches}
  if Header <> PngHeader then
  begin
    RaiseError(EPNGInvalidFileHeader, EPNGInvalidFileHeaderText);
    Exit;
  end; 
```

我尝试将 Char 更改为 AnsiChar，但没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T11:27:38.923

您正在自己编译 PNGImage 单元，并且您有一个为 Unicode 之前的 Delphi 设计的过时的 PNGImage。这是你遇到的根本问题。

PNG 功能现在内置在 Delphi 中。PNGImage 单元是产品附带的标准库的一部分。只需删除您的 PNGImage 代码版本。确保删除 .pas 和 .dcu 文件，这样您的错误版本就无法使用。

然后在你的一个单位的uses子句中包含PNGImage，我猜你已经这样做了。这将导致使用该单元的内置版本。

# c# - 为什么无法在会话 IEnumerable 列表中添加项目

> ID：15321677
> 
> 赞同：0
> 
> 时间：2013-03-10T11:24:18.937
> 
> 标签：c#, linq, ienumerable

在实体框架 vs2010 上工作，我想在某处存储从数据库中获取的一组对象。因为我不想在用户请求之后调用 DB。我这样做：

```
public IEnumerable<Message> Messages {
    get { return HttpContext.Session[SESSION_MESSAGES_NAME] as IEnumerable<Message>; }
    set { HttpContext.Session[SESSION_MESSAGES_NAME] = value; }
}

objEntity = new CmnItemSpecificationDetail();
                objEntity.ItemSpecificationDetailRecordID = hidItemSpecificationDetailRecordID.Value.ToString() == "" ? _ItemSpecificationDetail.Count + 1 : int.Parse(hidItemSpecificationDetailRecordID.Value.ToString());
                objEntity.SpecificationID = drpSpecification.SelectedIndex == 0 ? -1 : int.Parse(drpSpecification.SelectedValue);
                objEntity.SpecValue = Convert.ToDecimal(txtSpecValue.Text);
                objEntity.UOMID = drpUOM.SelectedIndex == 0 ? -1 : int.Parse(drpUOM.SelectedValue);
                objEntity.UOMID = 1;

                objEntity.Action = Entity.ActionMode.Add;
                objEntity.Action = Entity.ActionMode.Add;
                objEntity.CreateBy = LogInUser;
                objEntity.CreateOn = DateTime.Now;
                objEntity.CreatePc = PCName;
                Messages.Append(objEntity);//failed to add item

  public static class exten
    {
        public static IEnumerable<T> Append<T>(this IEnumerable<T> source, params T[] items)
        {
           return source.Concat(items);

        }
    } 
```

此列表无法填写项目，想知道为什么无法在列表中添加项目，是什么问题，如何解决这个问题。

如果有任何疑问请询问，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:28:57.210

您的`Append()`扩展方法不会更改原始序列。它返回一个附加了指定项目的新序列。

当您调用 时`Messages.Append(objEntity)`，您不会对返回值做任何事情，因此您会丢弃 Append() 的结果。

要修复它，您需要对返回值做一些事情。也许只是这样做：

```
Messages = Messages.Append(objEntity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:30:22.670

您可能需要稍微修改一下您的 Getter。

它当前的工作方式不处理 Messages 为空（尚未初始化）的情况。

改变这个

```
 get { return HttpContext.Session[SESSION_MESSAGES_NAME] as IEnumerable<Message>; } 
```

对此。

```
 get { var msg = HttpContext.Session[SESSION_MESSAGES_NAME] as IEnumerable<Message>;
      if(msg == null) {
          msg = new List<Message>();
         HttpContext.Session[SESSION_MESSAGES_NAME] = msg;
       }

       return msg;

    } 
```

# google-chrome-extension - Google Chrome 扩展程序和 Firefox 插件之间有什么区别？

> ID：15321684
> 
> 赞同：0
> 
> 时间：2013-03-10T11:25:28.573
> 
> 标签：google-chrome-extension, firefox-addon

我一直在开发 Chrome 扩展程序，正如我在关于 SO 的问题中已经提到的那样，我在支付谷歌要求的起始费用时遇到了问题。所以我不再浪费时间为一家不尊重开发人员的公司开发扩展，我开始开发 Firefox 附加组件。所以我是这个领域的新手。

首先，我必须提到，我不是在寻找一种自动功能/方式来转换它们。我注意到 Firefox 附加组件和 Chrome 扩展之间的一个区别是 Firefox 中没有*popup.html 之*类的东西（也许我错了）。

如何找到其他主要差异，以便将我的扩展转换为 Firefox 附加组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T19:43:52.580

Firefox 插件在其 SDK 中确实有一个弹出面板可供使用（[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/panel.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/panel.html)）。

我现在正在开发一个 Firefox 插件，我可以告诉你他们的实际 SDK 和开发环境都很棒，cfx 可以离线工作或在线构建器，两者都强大而简单。

关于你问的差异，除了一些结构差异，当然还有 Chrome 或 Firefox 特定的代码在另一个平台上不起作用，我认为应该很容易将插件从一个平台移植到另一个平台，不是自动的，但是很简单。

# c - 使用递归函数反转字符串

> ID：15321686
> 
> 赞同：2
> 
> 时间：2013-03-10T11:25:57.370
> 
> 标签：c, string, recursion, reverse

我目前正在学习 C，我无法通过这个练习。我必须创建一个递归函数来反转`string1`为`string2`. 这是我的代码。我很乐意感谢您的帮助。

```
#include <stdio.h>
#define MAX 100

void reverse(char s1[],char s2[],int n,int j);

int main()
{
    char string1[MAX]="How Are You Mate";
    char string2[MAX]="";
    int n=0;
    int i=0;
    int j=0;

    for(i=0;string1[i]!='\0';i++)
        n++;
    reverse(string1,string2,n,j);
    printf("String-a normal:\n%s\n",string1);
    printf("String-a reverse:\n%s\n",string2);
    return 0;
}

void reverse(char s1[],char s2[],int n,int j)
{
     if(n>0)
     {
            s2[j]=s1[n];
            reverse(s1,s2,n-1,j+1);
     }
     else
            s2[j]='\0';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:41:07.890

就地（调用者可以在调用此函数之前制作字符串的副本）字符串反向与尾递归

```
void reverse (char *str, size_t len)
{
  char tmp;
  if (len-- < 2) return;

  tmp = *str;
  *str = str[len];
  str[len] = tmp;

  reverse (str+1, len -1);
} 
```

O，如果你不想要指针：

```
void reverse (char str[], size_t len)
{
  char tmp;
  if (len-- < 2) return;

  tmp = str[0];
  str[0] = str[len];
  str[len] = tmp;

  reverse (str+1, len -1);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T11:36:14.307

反转首先将数组的`n`第 - 个字符复制到. -th 字符恰好是空终止符。它成为新字符串的第一个字符，因此对于所有标准 C 例程（包括.`string1``string2``n``printf`

打电话

```
reverse(string1,string2,n-1,j); 
```

从`main`应该解决问题。中的条件`reverse`也应该从 更改`if(n>0)`为`if(n>=0)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T11:42:51.937

尽管它不会*将*结果字符串保存在任何地方，但您明白了。

```
#include <stdio.h>

void rev (const char* str);

int main () {
    const char str[] = "!dlrow ,olleH";

    printf("%s\n", str);

    rev(str);
    printf("\n");

    return 0;
}

void rev (const char* str) {
    char c = *str;
    if (c != '\0') {
            rev(str + 1);
        printf("%c", c);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-09T12:03:33.447

我已经更正了程序。请在下面找到更改

```
void reverse(char s1[],char s2[],int n,int j)
{
 if(n>0)
 {
        s2[j]=s1[n-1];
        reverse(s1,s2,--n,++j);
 }
 else
        s2[j]='\0';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-03T15:47:19.730

我建议使用 library , size=strlen(array) 而不是

```
for(i=0;string1[i]!='\0';i++)
n++; 
```

计算 arra 中有多少个字符

# wcf - WCF 托管——WAS 与 IIS7

> ID：15321689
> 
> 赞同：0
> 
> 时间：2013-03-10T11:26:21.020
> 
> 标签：wcf, wcf-hosting

IIS7 基于 WAS，但是在 WAS 中托管和在 IIS7 上托管之间有什么区别吗？使用 IIS7 有限制还是使用 WAS 有优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:29:29.577

WAS 是一种进程激活机制，而不是单独的托管环境。使用启用了 WAS 的 IIS7 或更高版本将允许您托管使用非 http 绑定（例如 TCP 和 MSMQ 绑定）的应用程序。优点是您无需创建自己的主机来公开这些类型的端点，并且您可以利用 IIS 应用程序管理功能和管理。

# c# - 使用 c# 关闭打开的连接

> ID：15321691
> 
> 赞同：-2
> 
> 时间：2013-03-10T11:26:44.033
> 
> 标签：c#, asp.net, c#-4.0

我在类文件中使用以下代码并访问此函数以打开返回 true 的连接。我想关闭这个连接状态。我不能这样做。请帮我这样做。

```
common.cs
=========
 public static bool DBConnectionStatus()
        {
            try
            {
                string conString = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=|DataDirectory|db_gym.mdb; Jet OLEDB:Database Password=gym_admin";
                using (OleDbConnection conn = new OleDbConnection(conString))
                {
                    conn.Open();
                    return (conn.State == ConnectionState.Open);
                }
            }
            catch (OleDbException)
            {
                return false;
            }
            catch (Exception)
            {
                return false;
            }
        }

protected void btn_general_Click(object sender, EventArgs e)
        {
            try
            {
                bool state = common.DBConnectionStatus();
                if(state == true)
                {
                // Some operation
                }
                // I want to close this connection

            }
            catch (Exception e1)
            {
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:30:06.167

一份`using`声明被翻译成三个部分：获取、使用和处置。

```
 using (OleDbConnection conn = new OleDbConnection(conString))
    {
       conn.Open();
       return (conn.State == ConnectionState.Open);
     //connection is automatically closed and disposed here
    } 
```

更多信息[见 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa664736%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:43:01.467

您最好返回一个打开的连接，因为您需要在 OleDbCommand 中使用它。如果您愿意，您也可以在 Common 类中隐藏连接，但是如果您将其保留在 using 语句中，则在获得状态时没有打开的连接，所以基本上如果返回 true，您的连接实际上是关闭的（并且已释放）。重构为这样的东西：

```
public OleDbConnection GetOpenConnection()
{
    string conString = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=|DataDirectory|db_gym.mdb; Jet OLEDB:Database Password=gym_admin";
    OleDbConnection conn = new OleDbConnection(conString))
    conn.Open();
    return conn;
 }

protected void btn_general_Click(object sender, EventArgs e)
{
    try
    {
        using(OleDbConnection  openConnection = common.GetOpenConnection())
        {
           // I want to close this connection
           openConnection.Close(); // close asap
        }  // dispose
     }
     catch (Exception e1)
     {
     }
} 
```

# windows - 独立的网络应用程序

> ID：15321698
> 
> 赞同：5
> 
> 时间：2013-03-10T11:27:26.387
> 
> 标签：windows, web-applications

有没有办法将 Web 应用程序作为独立的桌面应用程序运行？可以将使用 PHP、MySQL 和 Apache 编写的 Web 应用程序转换为满足以下要求的独立应用程序：

```
1\. Application should be called as http://myapp.localhost.
2\. Application should have desktop icon which directly opens browser with application's URL.
3\. Source code of web application should be hidden from users.
4\. Installation for end user must be as easy as possible. 
```

现在我使用 xampp 执行步骤 1-2 并手动创建快捷方式。我对自动执行上述步骤的一些包装器、安装程序感兴趣。但我不知道第三步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T18:40:56.223

关于第 3 项，请参阅[Can you "compile" PHP code？](https://stackoverflow.com/questions/1408417/can-you-compile-php-code). 这将允许您使用 PHP 进行开发并通过安装程序部署应用程序。

根据您的开发环境，有几个安装程序包可以让您自动执行这些步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T21:26:02.227

PHP 和 MySQL 需要运行 Web 服务器。这意味着您需要将代码复制到客户端计算机上，然后仍然在客户端计算机上本地运行 Web 服务器。

如果这是您想要的，请查看[Microsoft IIS Express（此处）](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview)。

简而言之，IIS 是一个 Web 服务器，可以托管和运行服务器端 Web 应用程序，用 ASP.NET 或 PHP 编写。

以下是您需要采取的步骤：

1.  在客户端机器上安装 IIS express（**一次性进程**，我认为完全可以接受 - 将其视为运行时安装）。
2.  为要部署的 Web 应用程序的源文件创建一个指定（隐藏）文件夹（**一次性进程**）。
3.  创建一个 Windows 批处理文件（bat 或 cmd）来[启动 IIS（如此处所述）](http://www.iis.net/learn/extensions/using-iis-express/running-iis-express-from-the-command-line)，然后打开网站的 URL，以便启动默认浏览器。该文件将用作快捷方式，因此您可以将其放在桌面或任何适当的地方（**一次性处理**）。
4.  将您的 Web 应用程序部署到上述步骤 2 中的隐藏文件夹（**重复过程**- 当您要将客户端升级到新版本时部署到同一文件夹）。

请记住，我的建议是基于您在本地（在本地主机上）托管和运行应用程序的要求。

但是，如果可以选择在单独的机器（不是本地主机）上运行应用程序，那么您可以简单地放置一个指向网络或 Internet 地址 URL 的桌面快捷方式，这样就可以毫无问题地打开默认浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T06:25:03.137

恐怕没那么简单。

1.  如果您想使用这种方法（我强烈反对），您将不得不在客户端上部署某种类型的网络服务器。您应该能够运行 Apache/IIS Express 和 MySQL/SQLite 可执行文件并启动一个简单的网络服务器和数据库。

2.  如果您还想要一个图标，您可以创建一个安装程序来创建此图标并指向您想要的 URL。

3.  恐怕这是不可能的。PHP 是并且将永远是一种脚本语言。您可能能够以某种方式对其进行混淆，但任何可以下载您的应用程序的人都可以对其进行去混淆处理。

4.  同样，您可以创建一个安装程序。据我所知，Inno Setup 相当不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T21:09:28.643

我建议 Pouchdb [http://pouchdb.com/api.html](http://pouchdb.com/api.html)和 Adob​​e Air [http://www.adobe.com/devnet/air/air-sdk-download.edu.html](http://www.adobe.com/devnet/air/air-sdk-download.edu.html)。通过这种方式，您可以使用 html 和 javascript 进行编码，并使用 Adob​​e Air 将其打包。

# sonarqube - Sonar 中的包裹缠结指数数据表示什么？

> ID：15321702
> 
> 赞同：20
> 
> 时间：2013-03-10T11:28:00.903
> 
> 标签：sonarqube, code-metrics

[在对我的项目进行声纳](http://www.sonarsource.com/)分析后，我在 7 个轴之一（参见第二张图片）上有以下数据。可以从这些数据中解码出哪些信息？此外，这些数据与下图中的哪个轴有关？

![在此处输入图像描述](../Images/82a63db19125e5be3fee9ef7d96d54ed.png)

![在此处输入图像描述](../Images/c5b636995b8c99dbfb98669d03d6be1d.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-10T11:50:30.277

这意味着包和文件之间存在循环依赖关系。

理想情况下，您希望依赖项朝一个方向流动——这允许您进行更改并预测其影响。例如，如果您的“用户界面”包依赖于“业务逻辑”包，但没有任何东西依赖于“用户界面”包，那么您应该能够在不破坏该包之外的任何内容的情况下更改用户界面。循环依赖意味着（例如）用户界面包依赖于业务逻辑包，但业务逻辑包也依赖于用户界面包。现在如果你改变用户界面，你可能会破坏业务逻辑层——这反过来可能会影响用户界面中完全不相关的东西。

“分层”软件的想法，以及在层之间以单一方向流动的依赖关系旨在消除这种纠结。

您通常可以通过将类从一个包移动到另一个包来减少这种纠结。

缠结通常是架构/设计问题。

# delphi - 为什么我的应用程序在从 Windows 调度程序运行时会冻结？

> ID：15321707
> 
> 赞同：1
> 
> 时间：2013-03-10T11:28:53.190
> 
> 标签：delphi

我有一个简单的应用程序：

```
uses
  SysUtils;

{$R *.res}

procedure Log(text: string);
var
  myFile: textfile;
begin
  AssignFile(myFile, 'my.log');
  if not(FileExists('my.log')) then
    Rewrite(myFile)
  else
    Append(myFile);
  Writeln(myFile, text);
  CloseFile(myFile);
end;

begin
    Log(TimeToStr(Now)+' Passed!');
end. 
```

当我尝试通过 Windows 任务计划程序启动此应用程序时，我遇到了问题。计划任务的状态为“正在运行”，但没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:03:24.147

您需要提供保存文件的完整路径。当 Windows 任务调度程序启动您的应用程序时，您的应用程序的工作目录将是任务调度程序应用程序所在的任何位置。反过来，Windows 不允许您的应用程序将文件保存在该位置。因此，您必须准确告诉它保存文件的位置。

```
procedure Log(text: string);
var
  myFile: textfile;
  Filename: String;
begin
  Filename:= IncludeTrailingBackslash(ExtractFilePath(ParamStr(0)))+'my.log';
  AssignFile(myFile, Filename);
  if not(FileExists(Filename)) then
    Rewrite(myFile)
  else
    Append(myFile);
  Writeln(myFile, text);
  CloseFile(myFile);
end; 
```

我假设 Windows 由于您的标题“冻结”而拒绝访问。尽管如此，即使问题不是拒绝访问，您仍然不知道该位置在哪里。

# matlab - 使用 .PGM 文件？

> ID：15321708
> 
> 赞同：0
> 
> 时间：2013-03-10T11:28:53.543
> 
> 标签：matlab, binary-data

我需要在 .PGM 图像文件中进行一些数字运算。我将为此使用 MatLab。

现在有些文件（显然是“P2”类型）是纯文本的，一切都很简单，因为它们看起来像这样

```
P2
256 256
255
203 197 197 186 181 181 182 170 165 161 167 171 169 175 163 154 146 
138 146 156 166 161 162 164 166 167 177 175 169 167 171 163 153 161 
159 159 145 183 181 148 149 151 149 143 175 172 162 156 168 159 159 
... 
```

但是有些文件（显然是“P5”类型）是这样的

```
P5
256 256
255
*all kinds of random symbols here*
... 
```

维基百科[在这里](http://en.wikipedia.org/wiki/Netpbm_format)说，区别在于后者使用二进制编码。我应该如何处理？我怀疑我可以将二进制数据导入 MatLab ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:54:28.780

您是否厌倦了使用 阅读图像[`imread`](http://www.mathworks.com/help/matlab/ref/imread.html)？

```
I = imread( pngFilename ); 
```

# javascript - 如何使用 Javascript 向用户提出随机数学问题？

> ID：15321709
> 
> 赞同：0
> 
> 时间：2013-03-10T11:28:56.370
> 
> 标签：javascript

如何使用 Javascript 向用户提出随机数学问题？如果用户回答正确，程序应该说正确！如果答案是错误的，程序应该会说 FALSE！我正在考虑使用 if 和 else 语句，但我只是不知道如何。另外，我正在考虑让程序向用户询问不同的随机数添加问题 5 次。最后，程序会给用户一个评分，例如 4/5 的问题回答正确！随机数范围：1-10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:41:15.320

1.  在数组中定义可能的操作
2.  随机采取这些操作之一
3.  在某些限制之间随机取两个数字（例如：0-30）（检查不可接受的情况，例如 10 / 0）
4.  将用户输入与计算结果进行比较。如果浮动，应用一个小的公差。

实施再简单不过了。

**编辑**提示：构造一个包含所有函数的对象并从中随机获取。这样可以避免 eval()：

```
var operations = {
    '+': function (a, b) {return a + b;},
    '-': function (a, b) {return a - b;},
    '/': function (a, b) {return a / b;},
    'x': function (a, b) {return a * b;}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T11:42:37.090

```
function ask() {
    var a = Math.floor(Math.random() * 10) + 1;
    var b = Math.floor(Math.random() * 10) + 1;
    var op = ["*", "+", "/", "-"][Math.floor(Math.random()*4)];
    return prompt("How much is " + a + " " + op + " " + b + "?") == eval( a + op + b);
}

var questions = [ask(), ask(), ask(), ask(), ask()],
    total = questions.length,
    correct = questions.filter(Boolean).length;

alert( "You got "+correct+"/"+total+" correctly"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:41:29.833

如果您对添加感到满意：

```
function question() {
    this.a = Math.round(Math.random()*10);
    this.b = Math.round(Math.random()*10);
    this.result = this.a + this.b;
    this.checkResult = function(givenResultString) {
        return (""+result == givenResultString);
    }
} 
```

然后，您可以每次创建一个问题：

```
var q = new question(); 
```

并检查答案：

```
var response = q.checkResult(someString) ? "Correct!" : "FALSE!"; 
```

剩下的工作是页面的机制，您可以为此使用表单和结果 div。

如果您想添加更多操作，您将选择一个随机运算符以及随机输入：

```
function question() {
    var add(x, y) { return x+y; };
    var subtract(x, y) { return x-y; };
    var multiply(x, y) { return x*y };
    var operators = [add, subtract, multiply];

    this.a = Math.round(Math.random()*10);
    this.b = Math.round(Math.random()*10);
    var operatorIdx = Math.min(Math.floor(Math.random()*4),3);
    this.operator = operators[operatorIdx];
    this.result = operator(this.a,this.b);
    this.checkResult = function(givenResultString) {
        return (""+this.result == givenResultString);
    }
} 
```

我在此处省略了除法，因为其余部分假定为整数，并且您必须更改初始化以防止除法产生小数值。直接的方法是初始化一个乘法，然后交换结果和 a。

# types - VHDL：从整数范围属性确定位大小

> ID：15321714
> 
> 赞同：1
> 
> 时间：2013-03-10T11:29:15.607
> 
> 标签：types, integer, vhdl

假设我有以下实体声明的通用部分：

实体示例是

```
Generic
   (G_INTEGER_A : integer range C_INT_LEFT_A to C_INT_RIGHT_A;

    G_INTEGER_B : integer range C_INT_LEFT_B to C_INT_RIGHT_B);
Port
    (...) 
```

是否有一种直接的方法来使用该整数范围属性来确定等效位大小以标注 std_logic_vector 或无符号数组以表示此范围内的值？

我想仅在详细说明时使用它，以通用方式定义 counters 的大小等，如下所示：

```
constant C_A_SIZE: integer := f_int_size(G_INTEGER_A'range);

signal s_bit_cnt : unsigned(C_A_SIZE - 1 downto 0); 
```

用户函数在哪里`f_int_size`，可能在外部包中定义。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:58:50.400

您不能直接从泛型中提取范围值。但是，如果您对泛型使用命名类型或子类型，则可以使用其属性：

```
subtype Count_Range_A is natural range C_INT_LEFT_A to C_INT_RIGHT_A;

Generic ( G_Integer_A : Count_Range_A; ... )

function range_size(Start,End : natural return Natural is ...

constant C_A_SIZE: natural := range_size(Count_Range_A'Left, Count_Range_A'Right); 
```

函数体可能涉及对数函数和舍入，以及对值范围的仔细测试：粗略的 case 语句可能更简单、更安全，但更丑陋！

我通常以相反的方式这样做：从单词宽度开始并从中派生出其他所有内容更简单。

```
package Types is

    constant Packet_Bits : natural := <some value>
    -- Related declarations below are derived from it.
    constant Packet_Size : natural := 2**Packet_Bits;
    subtype Packet_Address is natural range 0 to Packet_Size - 1;
    subtype Packet_Address_Word is unsigned(Packet_Bits-1 downto 0);

end Types; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:50:19.333

不，它不是：[属性](http://www.csee.umbc.edu/portal/help/VHDL/attribute.html)（您在此处需要）在`Types`、`Arrays`、`Signals`和上定义`Entities`，但您的情况都不是。您提供的范围是模拟或综合的属性。您要么必须将计数器的下限和上限指定为单独的常量，要么为其定义记录类型。

作为事后的想法：我目前不知道如果您提供，即 3 作为下限，合成会产生什么。你能评论吗？

# c++ - 是否可以在代码的一部分中将全局变量用作易失性而在另一部分中使用非易失性

> ID：15321717
> 
> 赞同：0
> 
> 时间：2013-03-10T11:29:24.043
> 
> 标签：c++, volatile

在 Bh

```
volatile int y;

Class B {
    fooB(int);
} 
```

在 A.cpp

```
foo (int x) {
    return 2*x;
}

foo(y);  // Here is the issue 
```

当我尝试这样做时，我遇到了编译问题，因为我无法更改`foo()`函数的签名。我在标题中的问题有什么解决方案吗？

# android - 更改地图标记的位图

> ID：15321719
> 
> 赞同：2
> 
> 时间：2013-03-10T11:29:49.790
> 
> 标签：android, google-maps-android-api-2

是否可以更改 Google Maps Android API v2 中现有地图标记的图标？我想在用户点击后突出显示标记。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T19:50:18.373

`setIcon`使用最新的 Google Play 服务 (rev7)，您可以通过使用该方法交换不同的图标来突出显示标记。

```
googleMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
   @Override
   public boolean onMarkerClick(Marker marker) {
       marker.setIcon(BitmapDescriptorFactory
           .fromResource(R.drawable.highlighted_pin)); 
   }
}); 
```

...我刚刚注意到*MaciejGórski*的评论 ....

# java - ArrayList 使用array.add() 添加行和列，我如何只添加行或列？

> ID：15321722
> 
> 赞同：0
> 
> 时间：2013-03-10T11:30:10.373
> 
> 标签：java

我有以下代码：

```
playerInventory.add(temp);
System.out.println("You've purchased " + temp.getName());
balance -= temp.getPrice();
runningWeight -= temp.getWeight();
System.out.println("Your new balance " + balance + ", and your wagon can carry " + runningWeight + " more pounds of products.\nPress enter to continue shopping.");
Scanner cont = new Scanner(System.in);
String enterToContinue = scan.nextLine();

for(int i = 0; i < playerInventory.size(); i++)
    System.out.println(playerInventory); 
```

该变量`temp`是我创建的一个类的返回值，它从另一个包含`String itemName`、`double price`和的数组中获取一个项目`double weight`。问题是，当我将一个项目传递给我的 ArrayList`playerInventory`时，它会为该项目创建一个列。美好的。但是当我传递第二个项目时，它会创建第二列并将项目放在其中，但随后它也会创建一个新行并将第一行中的所有项目复制到第二行。传递第三个项目后，它会创建第三列，将第三个项目放在那里，然后制作第三行并将所有项目复制下来，这样我就有了三个相同的行。

像这样：

```
[Item1, Item2, Item3]
[Item1, Item2, Item3]
[Item1, Item2, Item3] 
```

我怎么做才能让它只给我一排的物品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:43:31.303

您的打印有问题：

```
for(int i = 0; i < playerInventory.size(); i++)
    System.out.println(playerInventory); 
```

将`playerInventory.size()`多次打印相同的数组。

您可以只打印一次（删除`for`循环）或将其打印为：

```
for(int i = 0; i < playerInventory.size(); i++)
    System.out.println(playerInventory.get(0)); 
```

# jquery-ui - AJAX html替换后jQuery Sortable冻结

> ID：15321726
> 
> 赞同：0
> 
> 时间：2013-03-10T11:30:40.763
> 
> 标签：jquery-ui, jquery, jquery-ui-sortable, jquery-on

**jQuery 代码**：我删除了所有的可排序设置。如果你觉得它们是相关的，我可以把它们放回去。

```
$('#navsort').sortable({ ... });

$("#content").on('click', '#submit_menu', function (event){
    event.preventDefault();
    $.ajax({
        type: "POST",
        url: "menu-ajax.php",
        data: { data:$('#form').serialize() }
    }).done(function (response) {
        $('#content').hide().html(response).fadeIn('slow');
    });
}); 
```

**HTML 代码**：这是一个简化版本，因为真正的代码包含大量 PHP 和其他内容。

```
<div id="content">
    <form method="post" id="form">
        <a href="#" id="submit_menu">Save</a>
        <ol id="navsort">
            ...
        </ol>
    </form>
</div> 
```

正如您所看到的，整个表单，包括附加到 Sortable 的元素，在提交表单时通过 AJAX 被替换（使用其自身的相同副本）。这是 Sortable 停止工作的时候。

我知道在初始化 Sortable 时新表单不是 DOM 的一部分，因此尽管与它所替换的表单相同，但它没有附加。我也了解如何`.on()`在页面首次加载时出现的元素和之后添加的元素之间进行委托。我不明白的是如何将此概念应用于Sortable的初始化。

我让它与一个肮脏的黑客一起工作，但我想了解正确的方法。

**肮脏的黑客**：

```
function dirtyhack(){
    $("selector").on('event', 'target', function (){ ... });
}
dirtyhack();

$("#content").on('click', '#submit_menu', function (event){
    event.preventDefault();
    $.ajax({
        type: "POST",
        url: "menu-ajax.php",
        data: { data:$('#form').serialize() }
    }).done(function (response) {
        $('#content').hide().html(response).fadeIn('slow');
        dirtyhack();
    });
}); 
```

因此，Sortable 在页面加载时初始化，并在 AJAX 完成替换 Sortable 附加到的元素时重新初始化。也许这是对的，但感觉不对。

**披露**：我实际上是使用 nestedSortable 插件代替 Sortable，但插件作者声称通过他的插件“所有 jQuery Sortable 选项、事件和方法都可用”。我也确实切换到标准的 Sortable Widget 进行测试并且遇到了同样的问题，所以我不认为它是插件。

插件网址：[https ://github.com/mjsarfatti/nestedSortable/tree/2.0alpha](https://github.com/mjsarfatti/nestedSortable/tree/2.0alpha)

# php - 使用数组函数翻译网页

> ID：15321727
> 
> 赞同：0
> 
> 时间：2013-03-10T11:30:42.513
> 
> 标签：php, arrays, translation

我想用PHP的数组函数来翻译一个网站。我为所有要翻译的文本创建了包含数组的 PHP 文件。

```
<?php 
//ESPANOL
$lang = array(
              'work' => 'Trabajo'
              'packaging' => 'Empaque'
             ); 
```

然后我在我的 nav.php 文件中调用它们，也将在内容部分中调用它们。

```
<?php include('includes/languages/es.php'); ?>
<a href="#"><?php echo $lang['work']; ?></a> 
```

一切都很简单。

我想知道的是如何在不编辑 HTML 的情况下在这些数组文件之间切换，这样我就不必链接到另一个 'index_es.php' 等。我知道链接会是这样的，但我不知道'不知道这将如何工作。

```
<a href="index.php?es.php>Español</a>|<a href="index.php/?en.php">English</a> 
```

我猜我需要包含另一个包含语言文件的文件，然后可以从中选择链接，但我不知道代码是什么。它是否涉及在链接上方包含一个“lang_directory”，然后以某种方式从那里包含？

**另外我想避免使用 Zend/Gettext 翻译，因为我想从里到外学习这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:39:16.700

您可以创建另一个包含目标语言的维度。然后传递一个 GET 参数来选择该语言。如果无法识别该语言，您可以回退到英语。这是一个示例。

```
$languages = array(
    'en' => array(
        'work' => 'work',
        'packaging' => 'packaging'
    ),
    'es' => array(
        'work' => 'Trabajo',
        'packaging' => 'Empaque'
    ),
);

// default language to use when the requested isn't found
$defaultLanguage = 'en';

// language requested via GET
$requested = $_GET['locale'];

// use the requested language if it exists, otherwise the default language
$language = isset($languages[$requested]) ? $requested : $defaultLanguage;

// our translations
$translation = $languages[$language];

// "work" translated based on the language
echo $translation['work']; 
```

Español 的链接看起来像这样。

```
index.php?locale=es 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T11:51:54.813

我会保留您的阵列系统，将链接更正为类似的`index.php?lang=en`内容，然后根据 lang 参数包含您的文件：

```
if ( isset($_GET['lang']) && file_exists('includes/languages/'.$_GET['lang'].'.php') ){
  include_once('includes/languages/'.$_GET['lang'].'.php');
} 
```

如果您想在会话中保留语言参数，请执行以下操作：

```
if ( isset($_GET['lang']) && file_exists('includes/languages/'.$_GET['lang'].'.php') ){
  $_SESSION['lang'] = $_GET['lang'];
}
if ( !isset($_SESSION['lang']) ){
  // Default language
  $_SESSION['lang'] = 'en';
}
include_once('includes/languages/'.$_SESSION['lang'].'.php'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T11:59:33.170

一种方法是使用会话。

1.  制作一个 lang.php 文件，用于在语言之间进行更改。

    ```
    <?php
            //Start session
            session_start();
            //Do we get a lang variable
            if (isset($_GET['lang'])) {
                    //Make sure we only get the lang filename
                    $lang = basename($_GET['lang']);
                    //If the file exists, then save it to session
                    if (file_exists('includes/languages/' . $lang . '.php'))
                            $_SESSION['lang'] = $lang;
            }
            //If the client were refered here (via hyperlink) send them back
            if (isset($_SERVER['HTTP_REFERER']))
                    header('location: ' + $_SERVER['HTTP_REFERER']);
    ?> 
    ```

2.  在您想要多种语言的文件的标题中，插入。

    ```
    <?php
            //Start session
            session_start();
            //Default language
            $lang = 'english';
            //If the client have set a language, use that instead
            if (isset($_SESSION['lang']))
                    $lang = $_SESSION['lang'];
            //Load language file
            include('includes/languages/' . $lang . '.php');
    ?> 
    ```

更改语言的链接将如下所示：

```
<a href="lang.php?lang=espanol">Español</a>|<a href="lang.php?lang=english">English</a> 
```

Out 也可以从 lang.php 文件中取出代码并放入一个包含文件中，该文件将在包含语言文件之前加载并删除 HTTP_REFERER 重定向。

更改语言的链接将如下所示：

```
<a href="?lang=espanol">Español</a>|<a href="?lang=english">English</a> 
```

# windows - Cmd 和感叹号 - 第二部分

> ID：15321730
> 
> 赞同：3
> 
> 时间：2013-03-10T11:31:07.233
> 
> 标签：windows, batch-file, cmd, delayedvariableexpansion

我真的很想知道为什么我的字符串替换过程在解析包含任何特殊字符（包括感叹号）的文本文件时有效。我预计延迟变量扩展会关闭＆符号，百分号等的特殊含义，但会因感叹号而失败......

代码：

```
@echo on & setlocal ENABLEEXTENSIONS

set "InFile=%~1"
set "OutFile=%~2"
set "Replace=%~3"

CALL :ParseCue "%%InFile%%" "%%OutFile%%" "%%Replace%%"

endlocal &GOTO:EOF

:ParseCue
@echo on & setlocal ENABLEEXTENSIONS DISABLEDELAYEDEXPANSION
set "FileToParse=%~1"
set "OutputFile=%~2"
set "NewExtension=%~3"
for /F "usebackq tokens=* delims=" %%a in ("%FileToParse%") DO (
  set "line=%%a"
  @echo on & setlocal ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION
  set "line=!line:.wav=%NewExtension%!"
  echo(!line!>>"%OutputFile%"
  endlocal
)
endlocal &GOTO:EOF 
```

输入文件.txt：

```
This a test for parsing lines with special characters
Rock & Roll.wav
Rock & Roll!.wav
Special | < > ~ \ ²³ { [ ] } ! " ´ ' ` üäö @ ; : € $ % & / ( ) = ? chars.wav 
```

命令行语法：

```
D:\Users\Public\Batch\YAET>parse.bat "InputFile.txt" "OutputFile.txt" ".flac" 
```

输出文件.txt：

```
This a test for parsing lines with special characters
Rock & Roll.flac
Rock & Roll!.flac
Special | < > ~ \ ²³ { [ ] } ! " ´ ' ` üäö @ ; : € $ % & / ( ) = ? chars.flac 
```

* * *

**编辑/补充：**

1 1/2 年后，我不得不再次使用此代码段。请参阅另外两个处理毒字符的示例。第一个使用临时启用延迟扩展（参见 Ansgars 答案），第二个使用`CALL`. 两者都将解析当前目录中和当前目录下非空文件的路径和名称，但没有尾随驱动器号和当前目录的路径。

示例#1（不需要在`set "File=!File..."`and中加上双引号）：`echo "!FILE!">>...`

```
@echo off & setlocal ENABLEEXTENSIONS DISABLEDELAYEDEXPANSION
del NonEmptyFiles.txt >NUL 2>&1
echo Searching non-empty files in and below current directory ...
for /f "tokens=*" %%I in ('dir /s /b /a:-D') do (
    if not %%~zI==0 (
        set "File=%%I"
        setlocal ENABLEDELAYEDEXPANSION
        set "File=!File:%cd%\=!"
        echo "!File!">> NonEmptyFiles.txt
        endlocal
        )
    )
echo Done. See NonEmptyFiles.txt.
endlocal &goto:EOF 
```

示例 #2（速度较慢，需要用双引号括起来）：

```
@echo off & setlocal ENABLEEXTENSIONS DISABLEDELAYEDEXPANSION
del NonEmptyFiles.txt >NUL 2>&1
echo Searching non-empty files in and below current directory ...
for /f "tokens=*" %%i in ('dir /s /b /a:-D') do (
    if not %%~zi==0 (
        set "File=%%i"
        call set "File=%%File:%cd%\=%%"
        call echo "%%File%%">> NonEmptyFiles.txt
        )
    )
echo Done. See NonEmptyFiles.txt.
endlocal &goto:EOF 
```

用于测试的文件和文件夹：

```
D:\Martin\Any & Path>dir /s /b /a:-D
D:\Martin\Any & Path\Hello! World!.txt
D:\Martin\Any & Path\Rock & Roll\!File! !!File!!.txt
D:\Martin\Any & Path\Rock & Roll\%File% %%File%% %%I.txt
D:\Martin\Any & Path\Rock & Roll\Poison! !§$%&()=`´'_;,.-#+´^ßöäüÖÄÜ°^^#.txt
D:\Martin\Any & Path\Rock & Roll\SizeZero.txt 
```

输出：

```
D:\Martin\Any & Path>stringinforloop.bat
Searching non-empty files in and below current directory ...
See NonEmptyFiles.txt. Done.

D:\Martin\Any & Path>type NonEmptyFiles.txt
"Hello! World!.txt"
"Rock & Roll\!File! !!File!!.txt"
"Rock & Roll\%File% %%File%% %%I.txt"
"Rock & Roll\Poison! !§$%&()=`´'_;,.-#+´^ßöäüÖÄÜ°^^#.txt" 
```

享受批处理！马丁

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T12:16:11.397

那是因为您启用延迟扩展*后* `set "line=%%a"`：

```
set "line=%%a"
@echo on & setlocal ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION
set "line=!line:.wav=%NewExtension%!" 
```

如果在分配*之前*`%%a`启用延迟扩展：

```
@echo on & setlocal ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION
set "line=%%a"
set "line=!line:.wav=%NewExtension%!" 
```

你会得到

> 特别 | < > ~ \ ²³ { [ ] } € $ % & / ( ) = ? 字符.flac

代替

> 特别 | < > ~ \ ²³ { [ ] } ！" ´ ' ` üäö @ ; : € $ % & / ( ) = ? chars.flac

* * *

**编辑：**延迟扩展控制语句中的变量何时扩展。脚本中的关键语句是该行

```
set "line=%%a" 
```

它将循环变量的值分配给`%%a`变量`line`。禁用延迟扩展后，将分配 的文字值`%%a`，因为脚本解释器无法`%%a`在解析时扩展。但是，当您启用延迟扩展时，bang-variables 会在执行时扩展，因此解释器会在将结果分配给 variable 之前查看`%%a`并扩展其中的任何值。`!whatever!``line`

也许举个例子会更清楚。如果添加一行

> %foo% !foo!

到输入文件并在脚本中定义变量：

```
@echo on & setlocal ENABLEEXTENSIONS

set "foo=bar"
set "InFile=%~1"
... 
```

当您启用延迟扩展*后* `set "line=%%a"`既不扩展也`%foo%`未`!foo!`扩展之前`%%a`分配给变量`line`（解释器看不到`%%a`执行时间之前的值），因此您会得到以下输出：

> %foo% !foo!

当您在解释器将结果分配给变量之前扩展 bang-variables 之前*启用* 延迟扩展时，您将获得以下输出：`set "line=%%a"``line`

> %foo% 酒吧

`%foo%`只会在解析时扩展，此时解释器看不到 的实际值`%%a`，因此在这里`%foo%`仍然是文字`%foo%`。

进一步的赋值，如`set "line=!line:.wav=%NewExtension%!"`不影响变量内的刘海或百分号，因为扩展不是传递的，即它转换`!line!`为`%foo% bar`(or `%foo% !foo!`) 然后停止。

`call`不过，您可以使用该命令强制扩展变量内的（百分比）变量。一个命令`call set "line=!line!"`首先`call set "line=%foo% bar"`在当前上下文中扩展为，然后在一个新的上下文中`call`进行评估，其中也扩展为，因此变量被赋值。`set "line=%foo% bar"``%foo%``bar``line``bar bar`

* * *

顺便说一句：您的代码太复杂了。你会得到完全相同的结果：

```
set "FileToParse=%~1"
set "OutputFile=%~2"
set "NewExtension=%~3"
for /F "usebackq tokens=* delims=" %%a in ("%FileToParse%") DO (
  set "line=%%a"
  @setlocal ENABLEDELAYEDEXPANSION
  set "line=!line:.wav=%NewExtension%!"
  echo(!line!>>"%OutputFile%"
  endlocal
) 
```

# android - 从服务 onReceive 方法传递/保存数据

> ID：15321733
> 
> 赞同：0
> 
> 时间：2013-03-10T11:31:49.910
> 
> 标签：android

我有监听的服务，`ACTION_BATTERY_CHANGED`我希望能够传递（到我的活动）或保存（供以后在我的活动中使用）接收到的数据。我尝试了共享首选项，但没有帮助。

也许您可以帮助保存或传递收到的数据。

**已编辑**

```
@Override
      public int onStartCommand(Intent intent, int flags, int startId) {
        appPrefs = new AppPreferences(getApplicationContext());

//              /* Broadcast Receiver for battery stats                                               */
        IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);

        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver(){
            @Override
            public void onReceive(Context context, Intent intent){
                int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
                int isCharging = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
                if (isCharging==0){

                }
                else{
                    appPrefs.setIsCharging(isCharging);
                    Log.e("inFFFF","FFFF "+appPrefs.getIsCharging()); // here I get my default value, not isCharging value

                }
            }

        };

        registerReceiver(batteryLevelReceiver, batteryLevelFilter);
        return Service.START_STICKY;
      } 
```

在 AppPrefs 文件中：

```
 public void setIsCharging(int text){
             prefsEditor.putInt("isCharging", text);
         }

         public int getIsCharging(){
             return appSharedPrefs.getInt("isCharging", 9);
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:42:20.830

数据没有保存，`sharedPreferences`因为您没有提交它。

```
public void setIsCharging(int text){
    prefsEditor.putInt("isCharging", text);
    prefsEditor.commit();  //Add this line to commit data in sharedPreferences.
} 
```

# windows - 如何使 Windows Apache 使用所有 cpu 内核？

> ID：15321734
> 
> 赞同：4
> 
> 时间：2013-03-10T11:31:56.097
> 
> 标签：windows, multithreading, apache, wamp

我有 i7 处理器的 Windows 机器，但只有一个 httpd 进程，它只能顶一个核心。如何告诉 Apache 生成多个进程并使用所有内核？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:04:27.877

应用程序文件夹中的某处应该有一个 httpd.conf 或 apache2.conf 文件（只需`.conf`使用文件管理器搜索该文件夹中的所有文件）。如果它不存在，那么它可能在系统文件夹中，但我非常怀疑它。

该文件是主要配置文件。在里面，您应该尝试在mpm_winnt[文档页面](http://httpd.apache.org/docs/2.2/mod/mpm_winnt.html)的右侧面板中找到与 mpm_winnt 相关的*指令*。在这方面似乎很重要。`ThreadLimit``ThreadPerChild`

如果您在配置文件中没有找到这些设置，那么它们应该具有不会阻止多线程发生的默认值。[Mpm worker](http://httpd.apache.org/docs/2.2/mod/worker.html)模块的文档指出了其他一些可能性：

*   `MaxClients`
*   `ServerLimit`
*   `MaxRequestsPerChild`

所有这些设置一起工作，错误配置其中一个可能会破坏并行性。

该文档提供了一个典型设置的示例，您可以尝试一下。

# html - HTML/CSS：鼠标悬停时如何更改图像不透明度？

> ID：15321735
> 
> 赞同：0
> 
> 时间：2013-03-10T11:31:58.900
> 
> 标签：html, css

当使用 CSS 悬停时，我设法编写了图像不透明度效果，但该图像充当我页面的按钮，并且上面有文本。我也想在文本悬停时更改图像的不透明度，但我不知道该怎么做。顺便说一句，这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

 <title>Page Test</title>

 <style type="text/css">
 <!--
 body {
font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
background-image:url('img/back.jpg');
background-repeat:no-repeat;
background-attachment:fixed;
background-position:center; 
margin: 0;
padding: 0;
}

 a:link {
color: #42413C;
text-decoration: underline;
 }
  a:visited {
color: #6E6C64;
text-decoration: underline;
 }
 a:hover, a:active, a:focus {
text-decoration: none;
 }
 #apDiv1 {
position:absolute;
width:200px;
height:115px;
z-index:1;
left: -70px;
top: 277px;
bottom: 0px;
   }
  #apDiv2 {
position:absolute;
width:835px;
height:115px;
z-index:1;
left: 125px;
top: 48px;
color:#CCC;
    }
  .img {
opacity:0.7;

   }
  .fntSz{
font-size:100px;
}
  .menu1 {
opacity:0.7;
   }
  .menu1:hover{
opacity:0.5;
   }
   #apDiv3 {
position:absolute;
width:200px;
height:69px;
z-index:2;
left: 39px;
top: 4px;
    }
   .adDiv3:Hover{

   }
  .menufnt{
color:#CCC;
font-size:50px;
   }
   -->
   </style></head>

  <body>
  <div id="apDiv3"><div class="menufnt">HOME</div></div>
   <div id="apDiv1"><img src="img/layerback.jpg" width="1115" height="240"                                               class="img"/>
   <div id="apDiv2">
    <div class="fntSz">NEW YORK CITY</div>
   </div>
   </div>
   <img src="img/menu1.jpg" width="242" height="85" class = "menu1" />
   </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:44:20.540

在您的情况下，您可以使用[Adjacent 兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors)或[General 兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/General_sibling_selectors)，例如

```
.apDiv1:hover + .menu1{ opacity: .5;} 
```

或者

```
.apDiv1:hover ~ .menu1{ opacity: .5;} 
```

他们都会工作。

否则，您应该考虑更改 HTML 或使用 JavaScript。

# dylan - 我无法在 openDylan 中运行任何项目

> ID：15321737
> 
> 赞同：0
> 
> 时间：2013-03-10T11:32:44.470
> 
> 标签：dylan

我安装了软件 openDylan（Windows 32 位），但我无法在其上运行任何程序。我创建了一个项目，当我编译项目时出现以下错误：

```
building targets: exe
don't know how to build <hello>library.obj 
```

我该怎么做才能汇集运行软件项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:50:32.210

自 2012.1 版本以来，我已经修复了一些问题，并希望为 2013.1 版本做更多的事情，但是：

*   如果您还没有安装 Pelles C，请从[http://www.smorgasbordet.com/pellesc/安装。](http://www.smorgasbordet.com/pellesc/)
*   在 Open Dylan IDE 中，有一个设置对话框，可让您选择构建脚本，并且您需要
    `x86-win32-pellesc-build.jam`从`C:\Program Files\Open Dylan\lib\`.
*   从 Pelles C 命令提示符中运行 Open Dylan IDE。IDE 是`C:\Program Files\Open Dylan\bin\win32-environment.exe`.

我目前使用的机器上没有 Windows，所以我无法确认确切/正确的路径，但希望我没有犯任何可怕的错误。

有了这个，事情应该可以工作了，包括调试。

我们肯定需要对 Windows 进行一些改进，我们很乐意帮助您开始工作。（您也可以在 Freenode IRC 上的#dylan 上与我们聊天。）

# ruby-on-rails - Rails - 通过控制台将模型实例引用到第二个模型实例的正确方法

> ID：15321738
> 
> 赞同：0
> 
> 时间：2013-03-10T11:32:46.920
> 
> 标签：ruby-on-rails

我的 Rails 应用程序包含两个名为 customer 和 order 的模型

```
class Customer < ActiveRecord::Base
      attr_accessible :name
    end

class Order < ActiveRecord::Base
  belongs_to :customer
  # attr_accessible :title, :body
end 
```

在控制台中，我为客户模型创建了实例：

```
c=Customer.new(:name=>"Noa") 
```

现在我想创建实例来订购引用“c”的模型我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:14:13.597

最简单的方法是`has_many`在类内部`Customer`：

```
class Customer < ActiveRecord::Base
   attr_accessible :name
   has_many :orders
end 
```

然后您可以执行以下操作以将新订单关联到您的客户。

```
order = c.orders.build :attribute => 'value', # ... 
```

您可以在[此处](http://guides.rubyonrails.org/association_basics.html#detailed-association-reference)找到有关如何在 Rails 中的对象之间建立关联的更多详细信息。

# php - 上传大图时浏览器卡住

> ID：15321739
> 
> 赞同：0
> 
> 时间：2013-03-10T11:32:47.723
> 
> 标签：php, upload

我正在使用这个上传器：[http](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/) ://tutorialzine.com/2011/09/html5-file-upload-jquery-php/ 当我上传相机质量的图片时，浏览器会冻结几分钟。当我上传正常质量的图片时，例如默认的 Windows 示例图片，它不会冻结。

有什么问题？您可以建议任何替代上传者吗？

# c++ - 尝试使用 Cmake 在 Windows 8 上构建 SFML。但是Cmake失败了

> ID：15321741
> 
> 赞同：1
> 
> 时间：2013-03-10T11:33:11.240
> 
> 标签：c++, cmake, sfml

我正在尝试在 Windows 8 上构建 SFML，并使用 cmake 创建一个 Visual Studio 2010 项目。该程序给了我一个错误，我不知道该怎么办。

有什么帮助吗？这是 cmake 的输出。

```
The C compiler identification is unknown
The CXX compiler identification is unknown
Check for working C compiler using: Visual Studio 10
Check for working C compiler using: Visual Studio 10 -- works
Detecting C compiler ABI info
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeDetermineCompilerABI.cmake:31 (try_compile):
  Cannot copy output executable

    ''

  to destination specified by COPY_FILE:

    'C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/2.8.10.2/CMakeDetermineCompilerABI_C.bin'

  Unable to find the executable at any of:

    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/cmTryCompileExec3899792351.exe
    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec3899792351.exe
    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/Development/cmTryCompileExec3899792351.exe

Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:75 (CMAKE_DETERMINE_COMPILER_ABI)
  CMakeLists.txt:17 (project)

Detecting C compiler ABI info - done
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeDetermineCompilerABI.cmake:52 (file):
  file STRINGS file
  "C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/2.8.10.2/CMakeDetermineCompilerABI_C.bin"
  cannot be read.
Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:75 (CMAKE_DETERMINE_COMPILER_ABI)
  CMakeLists.txt:17 (project)

Check for working CXX compiler using: Visual Studio 10
Check for working CXX compiler using: Visual Studio 10 -- works
Detecting CXX compiler ABI info
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeDetermineCompilerABI.cmake:31 (try_compile):
  Cannot copy output executable

    ''

  to destination specified by COPY_FILE:

    'C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/2.8.10.2/CMakeDetermineCompilerABI_CXX.bin'

  Unable to find the executable at any of:

    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/cmTryCompileExec1219109554.exe
    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec1219109554.exe
    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/Development/cmTryCompileExec1219109554.exe

Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCXXCompiler.cmake:68 (CMAKE_DETERMINE_COMPILER_ABI)
  CMakeLists.txt:17 (project)

Detecting CXX compiler ABI info - done
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeDetermineCompilerABI.cmake:52 (file):
  file STRINGS file
  "C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/2.8.10.2/CMakeDetermineCompilerABI_CXX.bin"
  cannot be read.
Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCXXCompiler.cmake:68 (CMAKE_DETERMINE_COMPILER_ABI)
  CMakeLists.txt:17 (project)

Looking for sys/types.h
Looking for sys/types.h - found
Looking for stdint.h
Looking for stdint.h - found
Looking for stddef.h
Looking for stddef.h - found
Check size of void*
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CheckTypeSize.cmake:92 (try_compile):
  Cannot copy output executable

    ''

  to destination specified by COPY_FILE:

    'C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CheckTypeSize/SIZEOF_VOID_PTR.bin'

  Unable to find the executable at any of:

    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/cmTryCompileExec3928396189.exe
    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec3928396189.exe
    C:/Users/Zachary/Downloads/SFML/build/CMakeFiles/CMakeTmp/Development/cmTryCompileExec3928396189.exe

Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CheckTypeSize.cmake:177 (__check_type_size_impl)
  cmake/Config.cmake:7 (check_type_size)
  CMakeLists.txt:20 (include)

CMake Error at cmake/Config.cmake:13 (message):
  Unsupported architecture
Call Stack (most recent call first):
  CMakeLists.txt:20 (include)

Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T07:09:29.277

以管理员身份启动终端。
用cygwin帮助了我。

# php - 使用include获取php中的根文件夹路径

> ID：15321743
> 
> 赞同：1
> 
> 时间：2013-03-10T11:33:23.417
> 
> 标签：php, include

我在 c:\wamp\www\ 中有名为**mywebsite的 php Web 应用程序。**该文件夹由**features/fashionWeek/database/Mysql.php**文件组成。我使用 dirname( **FILE** ) 函数从根目录获取文件夹路径，以便可以将文件夹放置到实时服务器的 public_html 文件夹中的任何位置。

它在我的本地主机中运行良好。我在 wamp\www\mywebsite\featured\fashionWeek\database\Mysql.php 中有以下代码 include(dirname( **FILE** ); 工作正常，返回此路径：C:/wamp/www/mywebsite/featured/fashionWeek/database

```
<?php  include(dirname(__FILE__).'/../config/Dbconfig.php') ;?> 
```

但是当我将 mywebsite 文件夹放在实时服务器的 public_html 文件夹下时。它给出了以下错误：

```
Warning: include(/home/websitename/public_html/featured/fashionWeek/database/../config/Dbconfig.php) [function.include]: failed to open stream: No such file or directory in /home/websitename/public_html/featured/fashionWeek/database/Mysql.php on line 3

Fatal error: include() [function.include]: Failed opening required '/home/websitename/public_html/featured/fashionWeek/database/../config/Dbconfig.php' (include_path='.:/usr/share/pear:/usr/share/php') in /home/websitename/public_html/featured/fashionWeek/database/Mysql.php on line 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:13:21.493

有点松弛，但它可以帮助你

```
if(!function_exists('getRootdir'))
{
function getRootdir($NFILE)
{
$filefitter="";
while(!file_exists($filefitter.$NFILE))
$filefitter="../".$filefitter;
return $filefitter;
}
} 
```

利用

```
like  $rootpath=getRootdir("Root identifier folder / php file"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:49:58.463

要倒退，即“..”，您可以使用该`dirname`功能。

```
<?php
include(dirname(dirname(__FILE__)).'/config/Dbconfig.php'); 
```

应该管用。

## 更多的

最终管理这些会很烦人，所以我建议在您的原始文件中定义一个 ROOT 常量。这将包含项目根目录的绝对路径。这很简单。

```
defined('ROOT') or define('ROOT', dirname(__FILE__) . DIRECTORY_SEPARATOR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:51:19.620

[https://stackoverflow.com/a/2152320/1528331](https://stackoverflow.com/a/2152320/1528331)

看看是否有帮助。还，

```
dirname(__FILE__) is the same as __DIR__ 
```

# c++ - 提升进程间 unordered_map 字符串

> ID：15321744
> 
> 赞同：0
> 
> 时间：2013-03-10T11:33:24.383
> 
> 标签：c++, unordered-map, allocator, boost-interprocess

我正在尝试使用 Boost Interprocess 库在共享内存中创建一个 unordered_map。这是我正在尝试使用的代码（以 Boost Interprocess 文档中的示例为例）：

```
#include <boost/interprocess/managed_shared_memory.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <functional>
#include <boost/functional/hash.hpp>
#include <boost/unordered_map.hpp>
#include <iostream>
#include <string>
#include <boost/interprocess/containers/string.hpp>

namespace bipc = boost::interprocess;

typedef bipc::allocator<char, bipc::managed_shared_memory::segment_manager> CharAllocator;
typedef bipc::basic_string<char, std::char_traits<char>, CharAllocator> ShmemString;

struct Person
{
  int age;
  ShmemString name;
  double salary;

  Person(int i,
     double sal,
     const char* s,
     const char_allocator& a)
    : age(i),
      name(s, a),
      salary(sal)
    {
    }
  void print() {}
}

typedef ShmemString KeyType;
typedef Person MappedType;

typedef std::pair< KeyType, MappedType > MapPersonType;

typedef bipc::allocator< MapPersonType,
                     bipc::managed_shared_memory::segment_manager >
ShMemAllocator;

typedef boost::unordered_map< KeyType,
                          MappedType,
                          boost::hash<KeyType>,
                          std::equal_to<KeyType>,
                          ShMemAllocator >
PersonMap; 
```

这就是我在主程序中尝试做的事情：

```
int main() 
{
bipc::managed_shared_memory segment(bipc::create_only, "MySharedMemory", 65536);

PersonMap *persons = segment.construct<PersonMap>("MyHashMap")
    ( 3, boost::hash<ShmemString>(), std::equal_to<ShmemString>()
        , segment.get_allocator<MapPersonType>());

char_allocator alloc(segment.get_allocator<char>());

Person p1(20, 10000, "ABC", alloc);
persons->insert(MapPersonType(ShmemString("Person1", alloc), p1));
} 
```

使用上面的代码，我可以在共享内存中创建一个 unordered_map。但是，当我尝试访问地图时，我需要使用类似的语法

```
persons->at(ShmemString("H", segment.get_allocator<char>())).print(); 
```

但是，我更喜欢使用 std::string 执行此操作，这会导致编译错误：

```
persons->at(std::string("H")).print(); 
```

是否可以写出上述语句，即用std::string访问共享内存中分配的映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:04:52.387

我在 boost-users 邮件列表上发布了[这个。](http://boost.2283326.n4.nabble.com/Boost-Interprocess-accessing-an-unordered-map-in-shared-memory-td4644023.html)并且，从 Boost.Interprocess 作者那里得到了答案，这是无法做到的。

# memory - marmalade sdk 内存分配卡丁车教程

> ID：15321746
> 
> 赞同：0
> 
> 时间：2013-03-10T11:33:34.727
> 
> 标签：memory, marmalade

这是取自 Marmalade sdk 教程 Kartz Game 的示例

```
//Initialise the memory manager.
MemoryManagerInit();
**{**
    CGame* game;
    **{**
        //create CGame object in 'Misc' memory bucket.
        CTempBucketSwitch b(MB_MISC);
        game = new CGame;
    **}**

    //run the game until it exits.
    game->Run();

    delete game;
**}**
//Terminate the memory manager, warning about any remaining allocations (these are leaks).
MemoryManagerTerm(); 
```

我不明白这个大括号在这里做什么？当我删除它时，程序崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T10:16:36.663

大括号限制了 CTempBucketSwitch 的范围，因此它仅在分配游戏时持续。它可能会推动一个名为“Misc”的存储桶，并在它被破坏时弹出它。

崩溃可能是因为评论中提到的“杂项”存储桶无法处理 Run 函数中完成的所有分配。

# javascript - 嵌套对象的解析错误？

> ID：15321751
> 
> 赞同：1
> 
> 时间：2013-03-10T11:34:13.150
> 
> 标签：javascript, d3.js

任何人都可以帮忙吗？我的数据正在通过从两个下拉列表中选择的值进行过滤 - 然后嵌套/汇总以获得这些相同值的每天平均值。我收到以下代码的“问题解析 d 错误”。尽管过滤器和嵌套函数都返回了正确的数据 - 当我尝试将此数据应用于折线图以更新它时会出现问题吗？

```
 d3.select("#parameterType").on("change", function() 
    {   
    d3.select("#dateTimeTaken").on("change", function()
    {   
    var selectedParameter = document.getElementById("parameterType").value;
    var selectedMonth = document.getElementById("dateTimeTaken").value;

    //filter data by selected parameter and month    
    var selectedData = data.filter(function(d) { 
      return d.parameterType == selectedParameter  &&
      +d.dateTimeTaken.getMonth() == (selectedMonth - 1);});

    console.log(selectedData);//returning correct data

    //get average reading for each day within selected month 
    var newdata = d3.nest()
        .key(function(d) {return d3.time.day(d.dateTimeTaken);})    
        .sortKeys(d3.ascending)
        .rollup(function(d) 
        {
            return {
            mean: d3.mean(selectedData, function(d) {return +d.reading;})};
        })
    .entries(selectedData);
    console.log(newdata);//returning correct data

    //UPDATE GRAPH

    //not returning correct max values?     
    x.domain(d3.extent(newdata, function(d) { return d.key; }));
    y.domain([0, d3.max(newdata, function(d) { return d.values; })]);

    svg.select("path.line")
        .attr( "d", line(newdata));

    svg.select(".x.axis")
        .transition()
        .duration(750)
        .ease("linear")
        .call(xAxis);

    svg.select(".y.axis")
        .transition()
        .duration(750)
        .ease("linear")
        .call(yAxis); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:10:21.270

在[您发布的代码中](https://gist.github.com/Majella/202df0a4a5a3ad20fb92)，有两个问题导致了上述问题。这两个问题似乎都源于对数据在 D3 中如何嵌套和汇总的误解。

# 解释

```
var newdata = d3.nest()
    .key(function(d) {return d.dateTimeTaken;})    
    .sortKeys(d3.ascending)
    .entries(data); 
```

这将转换以下类型的对象：

```
var data = [{
    parameterType: 'a',
    dateTimeTaken: '2013-01-01 12:00:00',
    reading: 100
}, {
    parameterType: 'a',
    dateTimeTaken: '2013-01-02 12:00:01',
    reading: 101
}]; 
```

到：

```
[
    {
        "key": "2013-01-01 12:00:00",
        "values": [
            {
                "parameterType": "a",
                "dateTimeTaken": "2013-01-01 12:00:00",
                "reading": 100
            }
        ]
    },
    {
        "key": "2013-01-02 12:00:01",
        "values": [
            {
                "parameterType": "a",
                "dateTimeTaken": "2013-01-02 12:00:01",
                "reading": 101
            }
        ]
    }
] 
```

该`values`字段是一个将原始数据条目累积在一起的数组。 [然后rollup](https://github.com/mbostock/d3/wiki/Arrays#wiki-nest_rollup)将本来应该是的数组作为参数，从这些（在您的情况下）`values`计算聚合指标，*并将其放在键中的数组的位置*。`mean`*`values`*

你的`rollup`功能：

```
//AVERAGE READING FOR EACH DAY WITHIN SELECTED MONTH FOR SELECTED PARAMETER
// ...

 .rollup(function(d) {
    return {mean:d3.mean(selectedData, function(d) {return +d.reading;})};}) 
```

完全忽略了论点。我认为它应该是：

```
 .rollup(function(d) {
    return {mean:d3.mean(d, function(d_) {return +d_.reading;})};}) 
```

现在生成的数组会像：

```
[
    {
        "key": "2013-01-01 12:00:00",
        "values": {
            "mean": 100
        }
    },
    {
        "key": "2013-01-02 12:00:01",
        "values": {
            "mean": 101
        }
    }
] 
```

请注意，`values`密钥内部还有另一个对象，其中包含`mean`. `y`您将轴的范围计算为：

```
y.domain([0, d3.max(newdata, function(d) { return d.values; })]); 
```

最大值不正确的原因是因为您要求 d3 计算`objects`in的最大值`values`。这种操作的结果是不明确的。相反，您应该要求最大 over `values.mean`：

```
y.domain([0, d3.max(newdata, function(d) { return d.values.mean; })]); 
```

这可以工作并产生正确的结果，如以下 jsFiddle 所示：http: [//jsfiddle.net/XLNeP/](http://jsfiddle.net/XLNeP/)

# 结论

那是关于如何使嵌套和 rollupus 正常工作。现在来解决一些其他问题。您的`line`变量具有以下访问器：

```
var line = d3.svg.line()
.x(function(d) { return x(d.dateTimeTaken); })
    .y(function(d) { return y(d.reading); }); 
```

这非常适合您打电话的时间：

```
svg.append("path")
    .attr("class", "line")
    .attr("d", line(data)); 
```

但是，`newdata`是上面显示的形式，它在顶层有`key`and而不是or 。因此，您最好使用刚刚过滤并保留数据结构的 。但是，如果您想绘制不同的线（例如，使用），那么您应该使用不同的访问器定义一个新的线生成器。`values``dateTimeTaken``reading``selectedData``data``mean``d3.svg.line()`

# php - new stdClass() 和 new stdClass 有什么区别？

> ID：15321755
> 
> 赞同：0
> 
> 时间：2013-03-10T11:34:47.313
> 
> 标签：php

我正在学习 php 的高级概念。做什么`new stdClass`？我知道做什么`new stdClass();`。

例如）`<?php new stdClass(); ? >`创建一个新对象。做`<?php new stdClass; ? >`同样的事情吗？注意没有括号。这有什么区别吗？我找不到有关 php 手册的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:28:18.507

没有区别。如果您没有将参数传递给构造函数，PHP 允许您省略括号。

# java - isReachable 方法

> ID：15321756
> 
> 赞同：2
> 
> 时间：2013-03-10T11:34:48.140
> 
> 标签：java, network-programming

我正在使用 isReachable() 方法，我正在尝试从我的 android 手机访问本地网络上的 pc。pc上的防火墙打开时返回false，防火墙关闭时返回true。我试图创建一个新规则以允许防火墙上的端口 7（回显）。但它没有用。任何人都可以帮助我如何允许 isReachable() 在防火墙开启时返回 true 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:56:01.867

[文档](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#isReachable%28int%29)说：

> 如果可以获得特权，典型的实现将使用 ICMP ECHO REQUEST，否则它将尝试在目标主机的端口 7 (Echo) 上建立 TCP 连接。

然后您需要确保您的防火墙允许 ICMP ECHO。

此外，如果您在另一台 PC 上运行服务，您可以尝试打开一个`Socket`尽管`isReachable`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:00:32.597

我建议你根本不要使用它。只需尝试以正常方式连接，并相应地处理故障。isReachable 没有添加任何有用的东西。

# visual-studio - 如何使用多个配置 C# VisualStudio2012 构建相同的项目

> ID：15321757
> 
> 赞同：1
> 
> 时间：2013-03-10T11:34:54.943
> 
> 标签：visual-studio, build, build-automation

我有很多项目的解决方案。
我想用多个配置设置构建几个项目。

例如：
ProjectA 设置为目标框架：3.5 和平台目标 x86。
输出程序集名称为：ProjectA.dll。

我想在单击构建按钮时在几个输出文件中构建项目：
ProjectA_3.5_x86.dll - 用于目标框架 3.5 和平台 x86
ProjectA_4.5_x64.dll - ...

这就是 buildservers 所做的。

有没有办法让构建操作查看配置文件，然后确定如何构建每个项目，使用不同的程序集名称和不同的构建配置？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:29:39.790

据我所知，每次编译项目只能生成一个 dll。听起来您想要做的是创建不同的构建配置；这可以通过手动编辑项目文件或使用[配置管理器](http://msdn.microsoft.com/en-us/library/kwybya3w.aspx)来完成。您可以设置不同的配置（3.5 框架，x86 CPU，程序集名称为 xxx.yyy），然后在编译时选择该配置。但是，重要的是要了解您必须对代码进行多次编译，选择不同的配置，以生成不同的 dll。如果您有一个自动构建过程，您应该能够将项目设置为多次编译并更改配置名称。

# php - 最大执行时间 php.ini

> ID：15321760
> 
> 赞同：0
> 
> 时间：2013-03-10T11:35:15.217
> 
> 标签：php

您可以通过执行 set_time_limit(0) 来覆盖 max_execution_time。

但是脚本在很长一段时间后才停止的地方称为什么设置？在我的一台服务器上，它在 1 小时后停止，在另一台服务器上 50 分钟后停止，但我不知道这是哪个设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:58:50.080

出于安全原因，您可能无法覆盖 set_time_limit() 以获得更高的值。

[PHP set_time_limit() 手册](http://php.net/manual/en/function.set-time-limit.php#refsect1-function.set-time-limit-notes)

# sql - 从一个表中获取一列与另一表的两列

> ID：15321762
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:35:38.880
> 
> 标签：sql, sql-server

我试图将结果组合到一个输出中，其中一列是`DepositNo`，另一列是`Doc_Type`任何`Doc_Type`等于`DocType`（反之亦然），显示`DepositNo`of `DocType`。

这是我的查询：

```
SELECT Doc_Type
  FROM Doc_Outgoing_Details
 WHERE (Doc_Type <> 67)
UNION
SELECT DepositNo, DocType AS Doc_Type
  FROM Doc_Outgoing
 WHERE (DocType <> 67) 
```

当我执行它时，它说：

> UNION 的目标列表中必须有相同数量的表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:38:31.973

当您使用联合时，您应该匹配所有列，并且您的结果集应该具有相同数量的列，因此您也需要在第一个查询中生成 Doc_Type 列：

```
SELECT        Doc_Type,0 as Doc_Type  // or every value 
                                      //that you didn't use in real DOCTYPE
FROM            Doc_Outgoing_Details
WHERE        (Doc_Type <> 67)
UNION
SELECT        DepositNo, DocType AS Doc_Type
FROM            Doc_Outgoing
WHERE        (DocType <> 67) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:38:50.933

因为您的报表上投影的列数`SELECT`不匹配。第一个包含一列，第二个包含两列。尝试在第一个查询中添加空值，

```
SELECT    Doc_Type as DepositNo, NULL Doc_Type
FROM      Doc_Outgoing_Details
WHERE     Doc_Type <> 67
UNION
SELECT    DepositNo, DocType AS Doc_Type
FROM      Doc_Outgoing
WHERE     DocType <> 67 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T11:39:56.837

您正在寻找的是`INNER JOIN`.

```
SELECT d.DepositNo, D.Doctype
FROM Doc_Outgoing d
INNER JOIN Doc_Outgoing_Details do
    ON d.Doctype = do.Doc_type
WHERE (d.DocType <> 67) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T11:41:25.683

> 你的第二个专栏缺少一列`table`。`UNION`必须有相等数量的`columns`。这应该有效。

```
SELECT        O AS DepoSitNo, Doc_Type
FROM            Doc_Outgoing_Details
WHERE        (Doc_Type <> 67)
UNION
SELECT        DepositNo, DocType AS Doc_Type
FROM            Doc_Outgoing
WHERE        (DocType <> 67) 
```

# php - PHP - 通过引用传递可变数量的参数

> ID：15321764
> 
> 赞同：4
> 
> 时间：2013-03-10T11:35:43.900
> 
> 标签：php, reference

我知道您可以将可变数量的参数传递给函数并单独访问它们。

例如

```
function foo()
{
    $arg = func_get_arg(0);
    $arg += 10;
}

$a = 100;

foo($a);

echo "A is $a\n"; 
```

但是这些参数是按值传递的，如上所示。

是否可以使用它们，就好像它们以类似于`bind_param`mysqli 库中的函数的方式通过引用传递一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:45:37.677

你不能，只是你不能告诉 php 这是通过引用而不是，但是！我建议执行以下操作：

```
function foo()
{
    $arg = func_get_arg(0);
    $arg->val += 10;
}
$a =new stdClass();
$a->val = 100;
foo($a);
echo "$a\n"; // 110 
```

您可以将拳击应用于您想要的值并且它有效，希望您觉得这对您有所帮助，如果您有任何问题，请提出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:08:56.983

我想提的第一件事：[不要使用引用](http://www.schlueters.de/blog/archives/125-Do-not-use-PHP-references.html)。

除此之外：直接这样做是不可能的，因为引擎必须在调用函数之前知道某些东西是否是引用。你可以做的是传递一个引用数组：

```
$a = 1; $b = 2; $c = 3;
$parameters = array(&$a, &$b, &$c, /*...*/);
func($parameters);

function func(array $params) {
    $params[0]++;
} 
```

# android - 无法在真机打开db文件

> ID：15321765
> 
> 赞同：0
> 
> 时间：2013-03-10T11:35:44.200
> 
> 标签：android, android-sqlite

这是我的代码。我使用“sqlite 浏览器”创建了一个 .db 文件，并将其放入工作空间的“assets”文件夹中。但是“.db”文件没有复制到应用程序路径中（当我签入 DDMS(data/data/com.example.trans/) 数据库文件夹时没有创建）。.db 文件也不是从 assets 文件夹中复制的。

这是我的代码：

```
public class ConnectionFactory  extends SQLiteOpenHelper{
    private static String DB_Path = "/data/data/com.example.translationapp/databases/";
    public static  String DB_Name = "Translator.db";
    public SQLiteDatabase myDb;
    File dbFile;
    public Context con;

    public ConnectionFactory(Context context) {
        super(context, DB_Name, null,1);

        // TODO Auto-generated constructor stub
        this.con= context;
    }

    public void OpenDb() throws IOException 
    {
        boolean dbCheck = checkDb();
        if(dbCheck)
        {

        }
        else
        {
            this.getWritableDatabase();
            try
            {
                copyDatabase();
            }
            catch(IOException e)
            {
                throw new Error("Sorry");
            }
        }
    }
    public boolean checkDb() throws IOException
    {
        SQLiteDatabase checkDb =null;
        try
        {
        String myPath = DB_Path+DB_Name;
        checkDb = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
        }
        catch(SQLiteException e)
        {

        }
        if(checkDb!= null)
        {
          checkDb.close();  
        }
        return checkDb !=null ? true:false;
    }
   public void copyDatabase()throws IOException
   {
       try
       {
       File filetext = con.getFileStreamPath(DB_Name);
       boolean exists = filetext.exists();
       if(!exists)
       {
       String outFileName = DB_Path+ DB_Name;

       myDb=con.openOrCreateDatabase(outFileName, Context.MODE_PRIVATE, null );
       OutputStream myOut  = new FileOutputStream(filetext.getAbsolutePath());
       InputStream myin = con.getAssets().open(DB_Name);
       byte[] buffer = new byte[1024];
          int length;
          while((length = myin.read(buffer))>0)
          {
              myOut.write(buffer,0,length);
          }
          myOut.flush();
          myOut.close();
          myin.close();
       }
       }
       catch(IOException e)
       {
           e.printStackTrace();
       }

   }
   public void openDatabase() throws SQLException
   {
      String myPath = DB_Path+DB_Name;
     myDb = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

   }
   public synchronized void close()
   {
      if(myDb != null)
      {
         myDb.close();
          super.close();
      }
   }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:56:09.693

而不是在资产文件夹中硬编码数据库路径，只需使用它 -

```
private static String DB_Path = "/data/data/"+getPackageName()+"/databases"; 
```

# json - 转换项目远程图像而不是本地图像？

> ID：15321767
> 
> 赞同：0
> 
> 时间：2013-03-10T11:35:57.813
> 
> 标签：json, uiimage

我正在尝试在我的项目中使用[MosaicUI](https://github.com/betzerra/MosaicUI)项目，

我面临的问题是如何从加载本地图像从 json 文件转移到我的网络服务器中的图像？

有没有人尝试过这个可能是？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T07:33:15.143

您可以使用 AFNetWorking 从网站加载图像。像这样更改 MosaicDataView.m 中的方法 setModule

```
-(void)setModule:(MosaicData *)newModule
{
module = newModule;

__weak UIImageView *weakImage = imageView;
__weak UIView *weakView = self;
__weak MosaicData *weakModule = module;

UIImage *image = [imageView loadImage:module.tg_id ofType:@"png"];
if (image)
{
    [imageView setImage:image];
}
else
{
    [imageView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:module.l_cover_url]] placeholderImage:[UIImage imageNamed:@"test.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
    {
        [weakImage setImage:image];
        CGSize imgFinalSize = CGSizeZero;

        [weakImage saveImage:image withFileName:weakModule.tg_id ofType:@"png"];

        if (image.size.width < image.size.height)
        {
            imgFinalSize.width = weakView.bounds.size.width;
            imgFinalSize.height = weakView.bounds.size.width * image.size.height / image.size.width;

            //  This is to avoid black bars on the bottom and top of the image
            //  Happens when images have its height lesser than its bounds
            if (imgFinalSize.height < weakView.bounds.size.height)
            {
                imgFinalSize.width = weakView.bounds.size.height * weakView.bounds.size.width / imgFinalSize.height;
                imgFinalSize.height = weakView.bounds.size.height;
            }
        }
        else
        {
            imgFinalSize.height = weakView.bounds.size.height;
            imgFinalSize.width = weakView.bounds.size.height * image.size.width / image.size.height;

            //  This is to avoid black bars on the left and right of the image
            //  Happens when images have its width lesser than its bounds
            if (imgFinalSize.width < weakView.bounds.size.width)
            {
                imgFinalSize.height = weakView.bounds.size.height * weakView.bounds.size.width / imgFinalSize.height;
                imgFinalSize.width = weakView.bounds.size.width;
            }
        }

        weakImage.frame = CGRectMake(0, 0, imgFinalSize.width, imgFinalSize.height);
        weakImage.center = CGPointMake(weakView.frame.size.width/2, weakView.frame.size.height/2);
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error)
    {
         NSLog(@"%@",error);
    }];
}

//  Set new title
NSInteger marginLeft = self.frame.size.width / 20;
NSInteger marginBottom = self.frame.size.height / 20;

titleLabel.text = module.title;
titleLabel.font = [self fontWithModuleSize];

CGSize newSize = [module.title sizeWithFont:titleLabel.font constrainedToSize:titleLabel.frame.size];
CGRect newRect = CGRectMake(10+marginLeft,
                            self.frame.size.height - newSize.height - marginBottom,
                            newSize.width-30,
                            newSize.height);
titleLabel.frame = newRect;
} 
```

# php - javascript base64 编码和非 ascii 符号

> ID：15321771
> 
> 赞同：-4
> 
> 时间：2013-03-10T11:36:42.073
> 
> 标签：php, javascript, base64

我需要在 javascript 中获取 base64 编码字符串，（输入字符串可能包含非 ascii 符号）

有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:48:19.180

如果您在最终使用 Base64 编码的字符串中使用 Unicode，我建议使用[**WebToolkit.info**](http://www.webtoolkit.info/javascript-base64.html)提出的以下脚本。*脚本与 UTF-8 编码完全兼容。*

```
/**
*
*  Base64 encode / decode
*  http://www.webtoolkit.info/
*
**/

var Base64 = {

    // private property
    _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

    // public method for encoding
    encode : function (input) {
        var output = "";
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
        var i = 0;

        input = Base64._utf8_encode(input);

        while (i < input.length) {

            chr1 = input.charCodeAt(i++);
            chr2 = input.charCodeAt(i++);
            chr3 = input.charCodeAt(i++);

            enc1 = chr1 >> 2;
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
            enc4 = chr3 & 63;

            if (isNaN(chr2)) {
                enc3 = enc4 = 64;
            } else if (isNaN(chr3)) {
                enc4 = 64;
            }

            output = output +
            this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
            this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

        }

        return output;
    },

    // public method for decoding
    decode : function (input) {
        var output = "";
        var chr1, chr2, chr3;
        var enc1, enc2, enc3, enc4;
        var i = 0;

        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

        while (i < input.length) {

            enc1 = this._keyStr.indexOf(input.charAt(i++));
            enc2 = this._keyStr.indexOf(input.charAt(i++));
            enc3 = this._keyStr.indexOf(input.charAt(i++));
            enc4 = this._keyStr.indexOf(input.charAt(i++));

            chr1 = (enc1 << 2) | (enc2 >> 4);
            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
            chr3 = ((enc3 & 3) << 6) | enc4;

            output = output + String.fromCharCode(chr1);

            if (enc3 != 64) {
                output = output + String.fromCharCode(chr2);
            }
            if (enc4 != 64) {
                output = output + String.fromCharCode(chr3);
            }

        }

        output = Base64._utf8_decode(output);

        return output;

    },

    // private method for UTF-8 encoding
    _utf8_encode : function (string) {
        string = string.replace(/\r\n/g,"\n");
        var utftext = "";

        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }

        }

        return utftext;
    },

    // private method for UTF-8 decoding
    _utf8_decode : function (utftext) {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;

        while ( i < utftext.length ) {

            c = utftext.charCodeAt(i);

            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if((c > 191) && (c < 224)) {
                c2 = utftext.charCodeAt(i+1);
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utftext.charCodeAt(i+1);
                c3 = utftext.charCodeAt(i+2);
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }

        }

        return string;
    }

} 
```

**演示：** [http ://www.webtoolkit.info/demo/javascript-base64](http://www.webtoolkit.info/demo/javascript-base64)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:44:44.060

没有语言默认解决方案可以将字符串设为 base64。您必须编写自己的函数，或者窃取这个函数：

[http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html](http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html)

# jdbc - JDBC 数据库 java 使用向量的向量

> ID：15321773
> 
> 赞同：0
> 
> 时间：2013-03-10T11:36:58.320
> 
> 标签：jdbc, vector, jtable

有人可以通过使用向量创建数据库查询来帮助我吗？

我想查询数据库的`Lieferranten`表`nordwind`并将其显示在`JTable`.

我的问题是如何在`jTable1`?

**这是我之前的代码：**

```
 import java.awt.*;
 import java.awt.event.*;
 import javax.swing.*;
 import javax.swing.event.*;
 import javax.swing.table.*;
 import java.sql.*;
 import java.util.*;

  public class Anzeige extends JFrame {

  private JTable jTable1 = new JTable(5, 5);
  private DefaultTableModel jTable1Model = (DefaultTableModel) jTable1.getModel();
  private JScrollPane jTable1ScrollPane = new JScrollPane(jTable1);

 public Anzeige (String title) {
  super (title);
  setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
  int frameWidth = 676; 
  int frameHeight = 467;
  setSize(frameWidth, frameHeight);
  Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
  int x = (d.width - getSize().width) / 2;
  int y = (d.height - getSize().height) / 2;
  setLocation(x, y);
  Container cp = getContentPane();
  cp.setLayout(null);

  // Anfang Komponenten
  jTable1ScrollPane.setBounds(72, 56, 521, 289);
  jTable1.getColumnModel().getColumn(0).setHeaderValue("Title 1");
  jTable1.getColumnModel().getColumn(1).setHeaderValue("Title 2");
  jTable1.getColumnModel().getColumn(2).setHeaderValue("Title 3");
  jTable1.getColumnModel().getColumn(3).setHeaderValue("Title 4");
  jTable1.getColumnModel().getColumn(4).setHeaderValue("Title 5");
  cp.add(jTable1ScrollPane);
  // Ende Komponenten
  setResizable(false);
  setVisible(true);

 }

public static void main(String[] args) {
new Anzeige("Anzeige");

   try {
    Class.forName("com.mysql.jdbc.Driver").newInstance();

    Connection dbConn =    DriverManager.getConnection("jdbc:mysql://localhost:3306/nordwind", "root", "");

  Statement statement = dbConn.createStatement();

  ResultSet results = statement.executeQuery("SELECT * FROM Lieferranten");

  Vector vector = new Vector();

  while (results.next()) {
    String s1 = results.getString(2);
    String s2 = results.getString(5);
    System.out.println(s1 + "\n" + s2);
    System.out.println(results.getString(2) + " " + results.getString(5));

    Vector data = new Vector();
    data.add(results.getString(1));
    data.add(results.getString(2));
    vector.add(data);

  }
  //results.close();
  statement.close();
  dbConn.close();

}
catch (InstantiationException e) {
  System.err.println("Error in Instantiation!");
}

catch (ClassNotFoundException e) {
  System.err.println("Class not found!");
}

catch (IllegalAccessException e) {
  System.err.println("Access denied!");
}

catch (SQLException e) {
  System.err.println("SQL Error!");
}

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:01:53.393

我假设您将获得五个列值，因为您添加了五个列标题。之后使用[addRow(java.util.Vector)](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.util.Vector%29)方法`DefaultTableModel`在`jTable1`.

```
import java.awt.*;
 import java.awt.event.*;
 import javax.swing.*;
 import javax.swing.event.*;
 import javax.swing.table.*;
 import java.sql.*;
 import java.util.*;

  public class Anzeige extends JFrame {

  private JTable jTable1 = new JTable(5, 5);
  private DefaultTableModel jTable1Model = (DefaultTableModel) jTable1.getModel();
  private JScrollPane jTable1ScrollPane = new JScrollPane(jTable1);

 public Anzeige (String title) {
  super (title);
  setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
  int frameWidth = 676; 
  int frameHeight = 467;
  setSize(frameWidth, frameHeight);
  Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
  int x = (d.width - getSize().width) / 2;
  int y = (d.height - getSize().height) / 2;
  setLocation(x, y);
  Container cp = getContentPane();
  cp.setLayout(null);

  // Anfang Komponenten
  jTable1ScrollPane.setBounds(72, 56, 521, 289);
  jTable1.getColumnModel().getColumn(0).setHeaderValue("Title 1");
  jTable1.getColumnModel().getColumn(1).setHeaderValue("Title 2");
  jTable1.getColumnModel().getColumn(2).setHeaderValue("Title 3");
  jTable1.getColumnModel().getColumn(3).setHeaderValue("Title 4");
  jTable1.getColumnModel().getColumn(4).setHeaderValue("Title 5");
  cp.add(jTable1ScrollPane);
  // Ende Komponenten
  setResizable(false);
  setVisible(true);

 }

public static void main(String[] args) {
new Anzeige("Anzeige");

   try {
    Class.forName("com.mysql.jdbc.Driver").newInstance();

    Connection dbConn =    DriverManager.getConnection("jdbc:mysql://localhost:3306/nordwind", "root", "");

  Statement statement = dbConn.createStatement();

  ResultSet results = statement.executeQuery("SELECT * FROM Lieferranten");

  while (results.next()) {
    String s1 = results.getString(2);
    String s2 = results.getString(5);
    System.out.println(s1 + "\n" + s2);
    System.out.println(results.getString(2) + " " + results.getString(5));

    Vector data = new Vector();
    data.add(results.getString(1));
    data.add(results.getString(2));
    data.add(results.getString(3));
    data.add(results.getString(4));
    data.add(results.getString(5));
    jTable1Model.addRow(data);

  }
  //results.close();
  statement.close();
  dbConn.close();

}
catch (InstantiationException e) {
  System.err.println("Error in Instantiation!");
}

catch (ClassNotFoundException e) {
  System.err.println("Class not found!");
}

catch (IllegalAccessException e) {
  System.err.println("Access denied!");
}

catch (SQLException e) {
  System.err.println("SQL Error!");
}

}

} 
```

# wpf - WPF - 来自 xml 绑定的 Observable Collection 新记录

> ID：15321774
> 
> 赞同：0
> 
> 时间：2013-03-10T11:37:12.060
> 
> 标签：wpf, data-binding, observablecollection

我有一个带有 tabcontrol 的页面。

我在控件中绑定了一个 tabitem 的位置列表。

记录在列表视图中列出。

我可以通过将输入控件绑定到 listview.selecteditem 来编辑记录。

我的问题是当我想添加新记录时。我想最小化后面的代码。

视图模型：

```
private ObservableCollection<LocationViewModel> _locations;

    public ObservableCollection<LocationViewModel> Locations
    {
        get { return _locations; }
    }

    public LocationListViewModel()
    {
        _locations = new ObservableCollection<LocationViewModel>();

        foreach (Service.Location l in service.GetLocationList().OrderBy(l => l.Building).ThenBy(l => l.Floor))
        {
            _locations.Add(new LocationViewModel
                                {
                                    id = l.id,
                                    Building = l.Building,
                                    Floor = l.Floor,
                                    RoomNo = l.RoomNo,
                                    MapTitle = l.MapTitle,
                                    MapExtension = l.MapExtension,
                                    Map = l.Map,
                                    DateCreated = l.DateCreated,
                                    CreatedByID = l.CreatedByID,
                                    CreatedByDesc = l.CreatedByDesc,
                                    DateEdited = l.DateEdited,
                                    EditedByID = l.EditedByID,
                                    EditedByDesc = l.EditedByDesc
                                }
                            );
        }
    } 
```

XML:

```
<TabItem x:Name="tabSettingsLocations" x:Uid="tabSettingsLocations" 
    Header="Locations"
    DataContext="{StaticResource ResourceKey=LocationList}"> ..... 
```

成功绑定到列表视图以进行编辑的示例

```
<TextBox x:Name="txtSettingLocationBuildingEdit" 
    Margin="90,17,0,0" Style="{DynamicResource SettingsTextBoxStyle}"
    Text="{Binding SelectedItem.Building, ElementName=lvwSettingsLocations,
    Mode=TwoWay}" /> 
```

新记录绑定失败示例（使用不同的输入控件集）

```
<TextBox x:Name="txtSettingLocationBuildingAdd"  
    Margin="90,17,0,0" Style="{DynamicResource SettingsTextBoxStyle}" 
    Text="{Binding Building, ElementName=lvwSettingsLocations, 
    Mode=OneWayToSource}"/> 
```

我还尝试将子选项卡项绑定到同一个数据源

```
<TabItem x:Name="tbSettingsLocationsAdd" x:Uid="tbSettingsLocationsAdd" 
    Header="Add New"
    DataContext="{StaticResource ResourceKey=LocationList}">

<TextBox x:Name="txtSettingLocationBuildingAdd"  
    Margin="90,17,0,0" Style="{DynamicResource SettingsTextBoxStyle}" 
    Text="{Binding Building}"/> 
```

无济于事。

我还尝试创建一个新的子数据视图，但我希望将它们全部绑定在一起，以便界面更新我添加或编辑的任何内容。

有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:14:06.277

好的，所以我最终确定了这一点。只是想分享...感谢 Silvermind 提供有关最佳实践的良好提示。

命令：

```
class Location_Add : ICommand
{
    private ObservableCollection<LocationViewModel> _llvm;

    public ObservableCollection<LocationViewModel> llvm
    {
        get { return _llvm; }
    }

    public Location_Add(ObservableCollection<LocationViewModel> passedllvm)
    {
        _llvm = passedllvm;
    }

    public bool CanExecute(object parameter)
    {
        LocationViewModel lvw = parameter as LocationViewModel;
        return lvw != null;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
            LocationViewModel lvm = parameter as LocationViewModel;
            llvm.Add(lvm);
            AddLocation(lvm);
    }

    public void RaiseCanExecuteChanged()
    {
        var handler = CanExecuteChanged;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }

    public void AddLocation(LocationViewModel lvm)
    {
        try
        {
            Service.SchoolMonitorServiceClient service = new Service.SchoolMonitorServiceClient();

            Service.Location loc = new Service.Location();
            loc.Building = lvm.Building.Trim();
            loc.Floor = lvm.Floor.Trim();
            loc.RoomNo = lvm.RoomNo.Trim();
            loc.MapTitle = lvm.MapTitle;
            loc.MapExtension = lvm.MapTitle.Substring(lvm.MapTitle.IndexOf("."));
            loc.Map = lvm.Map;
            loc.DateCreated = DateTime.Now;
            loc.CreatedByID = (Int32)Application.Current.Resources["UserID"];
            loc.DateEdited = lvm.DateEdited;

            service.AddLocation(loc);
            MessageBox.Show("Your new Location was entered successfully", "Success", MessageBoxButton.OK);
        }
        catch (Exception e)
        {
            .....
        }
    }
} 
```

视图模型：

```
class LocationListViewModel
{
    Service.SchoolMonitorServiceClient service = new Service.SchoolMonitorServiceClient();

    #region Members

    private ObservableCollection<LocationViewModel> _locations;
    private Location_Add _AddCommand;

    #endregion

    #region Properties

    public ObservableCollection<LocationViewModel> Locations
    {
        get { return _locations; }
    }

    #endregion

    public LocationListViewModel()
    {
        _locations = new ObservableCollection<LocationViewModel>();

        foreach (Service.Location l 
            in service.GetLocationList()
            .OrderBy(l => l.Building).ThenBy(l => l.Floor))
        {
            _locations.Add(new LocationViewModel
                                {
                                    id = l.id,
                                    Building = l.Building,
                                    Floor = l.Floor,
                                    RoomNo = l.RoomNo,
                                    MapTitle = l.MapTitle,
                                    MapExtension = l.MapExtension,
                                    Map = l.Map,
                                    DateCreated = l.DateCreated,
                                    CreatedByID = l.CreatedByID,
                                    CreatedByDesc = l.CreatedByDesc,
                                    DateEdited = l.DateEdited,
                                    EditedByID = l.EditedByID,
                                    EditedByDesc = l.EditedByDesc
                                }
                            );
        }

        _AddCommand = new Location_Add(_locations);
    }

    public ICommand AddCommand
    {
        get
        {
            return _AddCommand;
        }
    }
} 
```

XML:

```
xmlns:local="clr-namespace:SchoolMonitor_WPF.ViewModels"

<Page.Resources>
    <local:LocationListViewModel x:Key="LocationList" />
    <local:LocationViewModel x:Key="NewLocation" />
</Page.Resources>

<TextBox x:Name="txtSettingLocationBuildingAdd" x:Uid="txtSettingLocationBuildingAdd"  
    Margin="90,17,0,0" Style="{DynamicResource SettingsTextBoxStyle}"
    DataContext="{StaticResource ResourceKey=NewLocation}"
    Text="{Binding Path=Building}"/>

<Button x:Name="btnSettingsLocationSaveAdd" Content="Submit" Margin="0,80,10,0" 
    VerticalAlignment="Top" Style="{DynamicResource ButtonStyle}"
    HorizontalAlignment="Right" Width="75"
    DataContext="{StaticResource ResourceKey=LocationList}"
    CommandParameter="{StaticResource ResourceKey=NewLocation}" 
    Command="{Binding AddCommand}"> 
```

希望这可以帮助某人。

# php - 在 Laravel 中使用控制器

> ID：15321776
> 
> 赞同：0
> 
> 时间：2013-03-10T11:37:24.243
> 
> 标签：php, laravel

我的一个控制器（成员）中有一个简单的功能：

```
function action_data($array) { 
    $datamembre = DB::table('members')->where('id', '=', $id)->first(); 
    return $datamembre; 
} 
```

我想在另一个控制器的视图中使用它，我在我的模板中这样做：

```
 $datamembers = Controller::call('members@data', array($members_id)); 
```

有没有更好或正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:52:40.780

最好的办法是将其放入 IMO 会员模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:14:23.647

~~使用视图作曲家[http://laravel.com/docs/views#view-composers](http://laravel.com/docs/views#view-composers)~~

```
View::composer(array('home', 'profile'), function($view)
{
    //
}); 
```

**更新**

您可以将该方法放在 BaseController 中，所有控制器都对其进行扩展，因此您可以在任何控制器/视图中获取此方法。并使其成为静态的。

```
// in BaseController.php (L4) or Base.php (L3)

static public function action_data($array) { 
    $datamembre = DB::table('members')->where('id', '=', $id)->first(); 
    return $datamembre; 
} 
```

在视图中

```
BaseController::action_data($array); //L4

Base_Cotroller::action_data($array); //L3 
```

希望它有效。没有测试过。

# c++ - 犰狳和ofxOpenCv之间的冲突

> ID：15321777
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:37:30.983
> 
> 标签：c++, openframeworks, armadillo

我使用犰狳作为我的矩阵库。同时，我使用 OpenFrameworks 来开发我的代码。当我尝试将 ofxOpenCv 与 Armadillo 一起使用时，出现以下错误：

/usr/include/armadillo_bits/traits.hpp：在全局范围内：/usr/include/armadillo_bits/traits.hpp：在“const bool arma::is_arma_type >::value”的实例化中：../../.. /addons/ofxOpenCv/libs/opencv/include/opencv2/core/operations.hpp:753:23：从这里实例化/usr/include/armadillo_bits/traits.hpp:584:28：错误：'cv::'是/使用匿名类型 /usr/include/armadillo_bits/traits.hpp:584:28：错误：试图实例化 'template struct arma::is_subview_elem2' /usr/include/armadillo_bits/traits.hpp:584:28：错误：'cv ::' 是/使用匿名类型。. . 在我看来，犰狳和ofxOpenCv之间存在冲突，但我不知道如何解决这个问题。有人可以给出一些提示来解决这个问题吗？问候，托希德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:37:56.607

在包含其他库之前，您似乎已经通过在一个或多个头文件中调用“使用名称空间 arma”来污染您的名称空间（请参阅对[Boost、OpenCV 和 Eigen 库之间的冲突的接受答案？](https://stackoverflow.com/questions/5327325/conflict-between-boost-opencv-and-eigen-libraries)）。

您不应该在头文件中使用“using ...”指令，因为根据您包含它们的顺序，您可能会包含该头文件，然后包含另一个头文件，其类定义依赖于未污染的命名空间。

那么把它们放在哪里呢？C++ 不允许您将它们放在类定义中，因为它可能会导致范围不明确。您可以在类成员函数的定义中编写“使用命名空间”，因此我建议您在需要犰狳数据结构的任何地方都这样做。在其他任何地方，只需确定它的范围，例如 arma::colvec 或 arma::mat 等。

# asp.net - 具有 oAuth 的自定义成员资格提供程序

> ID：15321780
> 
> 赞同：0
> 
> 时间：2013-03-10T11:37:54.377
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, membership-provider

这是我第一次接触 MVC，所以请理解我。首先：

1）如果我将使用 sql 数据库实现自定义会员提供程序，使用我的方法通过电子邮件激活用户，将用户放入数据库等（只有一个表 - tableUsers），[这个关于 oAuth 和 Facebook 登录的解决方案会正常工作吗？](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc)
老实说，这对我来说根本不清楚。

2）什么解决方案更好。我的自定义会员提供者，还是使用默认？
我想发送我的自定义激活电子邮件，然后激活帐户。稍后，我想在 userProfile 表中添加新列 - “ID 类型”和“isActivated”。
我将在单独的表中存储有关用户的其他信息（电话、网站、关于我、爱好等） - 我将通过 IDuser 从 userProfile 获取此数据。
更重要的是，我想通过 Facebook 或 Twitter 使用登录方法。我在 asp.net 网站上找到了解决方案，如何使用 Oauth 进行操作。

我必须选择什么解决方案？
问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:45:07.547

> 什么解决方案更好。我的自定义会员提供者，还是使用默认？

由于您想在数据库中存储额外的用户信息，因此您需要创建自己的自定义 Membership Provider，因为默认的 Membership Provider 缺乏这种灵活性。此外，使用默认会员资格 Provider ，您将无法使用激活电子邮件验证您的用户。您将不得不对其进行自定义。

> 如何使用 Oauth 来做到这一点？

VS 2012 中随 MVC4 提供的默认 Membership Provider 能够使用 Facebook 和 Twitter 进行登录，您可以添加更多类似 LinkedIn。但是，由于您需要创建自定义成员资格提供程序来存储其他信息，因此您可以`DotNetOpenAuth`为此使用库。它与默认成员资格提供程序使用的相同。您可以通过添加它`Nuget`。

# css - 加载 SASS 样式表时出错

> ID：15321783
> 
> 赞同：0
> 
> 时间：2013-03-10T11:38:06.203
> 
> 标签：css, ruby, sinatra, sass, slim-lang

我正在尝试使用 SASS，并尝试在我的 sinatra 应用程序中使用 scss 加载一个简单的样式表。

main.rb 中的路由处理程序是

```
get('/styles.css'){ scss :styles } 
```

在布局中（使用超薄视图渲染器），我将 css 文件用作：

```
 link rel="stylesheet" href="/styles.css" 
```

我已经从公用文件夹中删除了样式表，并在视图文件夹中创建了 styles.scss，但无法在呈现的页面中获取 css 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:03:04.737

解决了这个问题。主要问题是我在 sass 文件中有一个错误，导致它静默失败。在搜索生成的css文件时`http://localhost:4567/styles.css`，报错。在悬停选项上，`&:hover { background: darken($background, 20%);` 我用 $ 代替了“&”符号。

# c++ - c++中的类中的类

> ID：15321788
> 
> 赞同：0
> 
> 时间：2013-03-10T11:38:52.470
> 
> 标签：c++, class

我有一个定义和工作的类是 TempsSet。但现在我需要制作一个使用 TempsSet 的新的。这是我对新类的定义：

```
#ifndef SESSIO_H
#define SESSIO_H

    class sessio {
        public:
            // constructors
            sessio();
            //Pre: --; //Post:posa el temps per defecte a (0,0)
            sessio(string d, int h, int dur, string nom);
            // Pre: --; Post: el temps sera (DL h,m,s)
            void mostrarS() const;
            //Pre: --; Post: mostra per pantalla l'horari d'una activitat
            void llegirS();
            //Pre: --; Post: llegeix per teclat l'horari d'una activitat
        private:
            TempsSet a_sess;
            int a_dur;
            string a_nom;
    };

    #endif // SESSIO_H 
```

这就是 TempsSet 的类定义。这个完美地工作：

```
#ifndef TEMPSSET_H
#define TEMPSSET_H
using namespace std;

class TempsSet {
 public:
    // constructors
    TempsSet();
    //Pre:-- //Post:posa el temps per defecte a (0,0)
    TempsSet(string d, int h, int m, int s);
    // Pre:--; Post: el temps sera (DL h,m,s)

    // mètodes consultors
    string diaLlarg() const;
    //Pre: Dia entrat correctament; Post: retorna el dia sense abreviar
    string diaAbr() const;
    //Pre: Dia entrat correctament; Post: retorna el dia abreviat
    int hora() const;
    // Pre: Hora entrada correctament; Post: retorna les hores del temps
    int minut() const;
    // Pre: Minuts entrat correctament; Post: retorna els minuts del temps
    int segon() const;
    // Pre: Segon entrat correctament; Post: retorna el segons del temps
    bool esIgual(TempsSet t) const;
    //Pre: Els dos temps entrats correctament; Post: retorna cert si els dos temps són iguals
    bool esMajor(TempsSet t) const;
    //Pre: Els dos temps entrats correctament; Post:retorna cert si el temps actual és major que el paràmetre
    void mostrar() const;
    //Pre: Els temps entrats correctament; Post: mostra el temps per pantalla en format d:h:m:s
    void mostrarLlargs() const;
    //Pre: Els temps entrats correctament; Post: mostra el temps per pantalla en format sense abreviar
    void mostrarDHM() const;
    //Pre: Els temps entrats correctament; Post: mostra el temps en format d:h:m

    // mètodes modificadors
    void llegir();
    //Pre: h≥0 i 0≤m<60 i 0≤s<60 sino s'ha de tornar a introduir el valor; Post: llegeix el temps des de teclat en format h:m:s.
    void llegirDHM();
    //Pre: h≥0 i 0≤m<60 sino s'ha de tornar a introduir el valor; Post: llegeix el temps des de teclat en format h:m.
    void incr(int s);
    //Pre: h≥0 i 0≤m<60 i 0≤s<60; Post: incrementa el temps en el nombre de segons indicat
    void incr (int d, int h, int m, int s);
    //Pre--; Post: incrementa el temps en el nombre d’hores, minuts i segons indicats
    void decr(int s);
    //Pre: h≥0 i 0≤m<60 i 0≤s<60; Post: decrementa el temps en el nombre de segons indicats
    void decr(int d, int h, int m, int s);
    //Pre: h≥0 i 0≤m<60 i 0≤s<60; Post: decrementa el temps en el nombre d’hores, minuts i segons indicats

 private:
    int a_s;
    int a_d;
};

#endif // TEMPS_H 
```

但是当我尝试编译时，它说奇怪的错误，我在这一行的 'd' 后面缺少一个括号：

```
sessio(string d, int h, int dur, string nom); 
```

TempsSet 没有命名类型，它指向 sessio 的私有属性。有任何想法吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:41:17.277

`sessio`需要`TempSet`在其标题中完整的类定义。所以，`#include "TempSet.h"`。

另外，[避免`using namespace std`](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)，特别是在标题中。

# save - ckeditor 内联保存

> ID：15321789
> 
> 赞同：0
> 
> 时间：2013-03-10T11:39:01.413
> 
> 标签：save, ckeditor, inline

建立一个论坛并使用 Ckeditor 发布消息 - 在表单中使用 textarea 可以正常工作。现在我希望用户能够编辑他们的帖子，所以我有 ckeditor 内联工作，所以用户点击他们的帖子，他们的消息被 ckeditor 替换。到目前为止效果很好，看起来不错。但是保存按钮被禁用。我用一个表格包围了整个东西，但当然 ckeditor 现在是一个 div 而不是一个文本区域，所以我猜这个表格不起作用。那么如何将数据传递给我的 PHP 呢？

另一个问题是 Ckeditor 似乎不适用于手机。你能想到一个简单的手机后备方法吗？

这是我用来呈现内联编辑器的代码；

```
// Uncomment the following code to test the "Timeout Loading Method".
// CKEDITOR.loadFullCoreTimeout = 5;

window.onload = function() {
    // Listen to the double click event.
    if (window.addEventListener)
        document.body.addEventListener('click', onClick, false);
    else if (window.attachEvent)
        document.body.attachEvent('onclick', onClick);

};

function onClick(ev) {
    // Get the element which fired the event. This is not necessarily the
    // element to which the event has been attached.
    var element = ev.target || ev.srcElement;

    // Find out the div that holds this element.
    var name;

    do {
        element = element.parentNode;
    }
    while (element && (name = element.nodeName.toLowerCase()) &&
            (name != 'div' || element.className.indexOf('edit_post') == -1) && name != 'body');

    if (name == 'div' && element.className.indexOf('edit_post') != -1)
        replaceDiv(element);
}

var editor;

function replaceDiv(div) {
    if (editor)
        editor.destroy();

    editor = CKEDITOR.replace(div, {
        uiColor: '#FFFFFF',
        toolbar: [
            ['Save', 'Cut', 'Copy', 'Paste', 'PasteFromWord', '-', 'Undo', 'Redo', '-', 'Scayt'],
            '/',
            ['Bold', 'Italic', 'Underline', 'Blockquote', '-', 'Link', 'Unlink', '-', 'Image', 'Smiley', 'oembed']

        ]
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:27:29.003

您可以尝试覆盖默认的保存命令并使用您需要对保存进行的任何操作。

就像是

```
// Override the normal CKEditor save plugin
CKEDITOR.plugins.registered['save'] =
{
    init : function( editor )
    {
        editor.addCommand( 'save', 
            {
                modes : { wysiwyg:1, source:1 },
                exec : function( editor ) {
                    if(Editor.CheckDirty()) {
                        // Do wahtever you need to do during the save button here
                    } else {
                        alert("NothingToSave);
                    }
                }
            }
        );
        editor.ui.addButton( 'Save', {label : '@GeneralTerms.Save', command : 'save'} );
    }
} 
```

# javascript - 从 java 脚本中的 texfield 中删除一个属性

> ID：15321792
> 
> 赞同：0
> 
> 时间：2013-03-10T11:39:19.763
> 
> 标签：javascript, html

我有以下 HTML 表单代码：

```
<input type="text" name="myText" value="Enter Your Name" readonly>
<input type="button" onclick="inn()" value="edit"> 
```

当我单击编辑按钮时，我希望删除文本字段的只读属性，以便用户可以编辑文本字段的值。我不想更改任何其他属性。

我也不想编辑整个表单：

```
formId.innerHTML= 
```

上面的代码只显示了一个文本字段和一个按钮。在我的页面上有 12 个文本字段和 5 个按钮。我想删除该属性，而不是再次重新编辑整个属性。

请提出一些有用的 JavaScript 代码。

```
function inn()
{
   // What do I type here to remove the readonly property of the "MyText" text-field?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:44:15.410

首先，您需要`<input>`从 DOM 中获取元素。一种可能的方式：

```
var element = document.getElementsByName("myText")[0]; 
```

然后，要删除，`readonly`您可以更改`readOnly`属性：

```
element.readOnly = false; 
```

或显式删除该属性：

```
element.removeAttribute("readonly"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T11:44:22.937

尝试：

为您的输入元素提供一个 ID：

HTML

```
<input type="text" name="myText" id="myText" value="Enter your name" readonly /> 
```

JS

```
function inn() {
    document.getElementById('myText').readonly = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:52:47.167

首先为您的文本框分配一个 ID。

IE

```
<input type="text" name="myText" id ="txt" value="Enter Your Name" readonly>
<input type="button" onclick="inn()" value="edit"> 
```

然后你可以用你的javascript写 -

```
function inn() 
{ 
    if ($('#txt').attr("readonly") == true) 
    { 
        $('#txt').val(''); 
        $('#txt').removeAttr("readonly"); 
    } 
} 
```

# floating-point - 如何将二进制浮点数转换为十进制数

> ID：15321800
> 
> 赞同：2
> 
> 时间：2013-03-10T11:41:19.953
> 
> 标签：floating-point, binary, decimal

我用过那个网站：[http](http://sandbox.mc.edu/~bennet/cs110/flt/dtof.html) ://sandbox.mc.edu/~bennet/cs110/flt/dtof.html他们说这`2.625`是`0_100_0101`基于指数是`4`和尾数是`5/16`。所以数字是`(5/16) * 2^4`，而这绝对不是`2.625`。

那么应该如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:48:40.200

您正在以错误的方式解释数据。

0 是符号，所以数字是正数 100 是指数，实际上是 1 (2^1)。指数是有符号的，可能的值为：

000（数字 0 和非规范化数字）
001 -2
010 -1
011 0
100 1
101 2
110 3
111（无穷大和 NAN）

PS NAN：不是数字（错误代码和东西）

0101 是你的尾数。

这实际上意味着您的数字是 1.0101（有一个隐藏位以提高精度，因为每个数字都必须以“1”开头。实际上并未存储“1”）。

这给了你 (1+5/16)*2 = 2.625

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T11:46:20.787

最重要的“1”不被编码。因此，您需要在转换时添加它。

在这种情况下，数字是“0101”，因此添加“1”将得到“1.0101”。那么指数是4，但是需要偏移3，所以实际的乘数就是2^1。

这给出了“10.101”的结果，实际上是 2.625

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:14:06.437

[扩展 JasonD 的答案]

我认为可以安全地假设您理解，或者理所当然地认为浮点数可以具有负指数。

但如果你仔细想想，这实际上是如何发生的？这就是“偏见”发挥作用的地方，我*认为*这是你理解中缺失的环节。在您的链接中，他们提到了以下用于计算偏差的定律：

2^(k-1) - 1

其中 k 是指数字段中的位数。在您的示例中，k 为 3 位，因此偏差为 3。通过这种方式，您可以对 [-3,4]（含）范围内的任何指数进行编码。

所以现在希望很清楚，当你解码数字时，你必须首先“消除”指数。因此，正如 JasonD 所说，您的 2^4 实际上是 2^1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T12:16:25.127

浮点数是 45（以 16 为底），即 01000101（以 2 为底）。

0101 是尾数部分，100 是指数部分...

在恢复领先的尾数时，尾数被更新为 1.0101...

从指数中减去偏差，在 8 位表示的情况下为 3，指数变为 1...

二进制表示为 1.0101 * 2^1...

反规范化我们得到 10.101，它是 2.625 的二进制表示......

# .net - 如何将默认 ASP.NET MVC 控制器替换为您自己的实现

> ID：15321805
> 
> 赞同：0
> 
> 时间：2013-03-10T11:42:00.550
> 
> 标签：.net, asp.net-mvc, inheritance, controller

在我的 ASP.NET MVC 应用程序中，我通过 Visual Studio UI 创建的所有控制器都是从`Controller`类继承的。我使用我自己版本的基本控制器类，我需要所有控制器都从该类继承。是否有一种机制可以让我绕过手动重写 Controller 继承并自动放置我自己的 BaseController。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:48:43.240

根据您的机器设置方式，您可以浏览到您的 VS 安装并进行一些更改。

在我的机器上，位置是`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ItemTemplates\CSharp\Web\MVC 4\CodeTemplates\AddController`

您可以修改`Controller.tt`（T4 模板）。

如果您需要还原，请备份此文件:)

**更新！**

Qpirate 将我指向下面评论中的链接。

[来自 Scott Hanselmans 博客](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)这是一种更简单的方法来创建您自己的版本，而不会影响全局版本。

# java - 如何搜索存储在 XML 文件中的字符串的内容？

> ID：15321806
> 
> 赞同：1
> 
> 时间：2013-03-10T11:42:19.720
> 
> 标签：java, android, eclipse, search

我是android开发的新手。

我有一个包含一堆片段的活动，每个片段显示不同的文本。我在运行时从 strings.xml 设置文本（即 tv.setText ...）

这是我的 strings.xml 的示例：

```
<string name="string1">the content I want searched, text1</string>
<string name="string2">the content I want searched, text2</string>
<string name="string3">the content I want searched, text3</string> 
```

**这是我的问题：**
我想在应用程序中添加搜索功能，我希望能够在字符串中搜索单词并将整个字符串作为结果返回给用户。因此，例如，如果用户搜索 text2，它将返回整个字符串。

我已经在这里阅读了关于 android-developers 的搜索指南：http: [//developer.android.com/guide/topics/search/index.html](http://developer.android.com/guide/topics/search/index.html)

我还找到了一堆教程，但它们似乎都处理存储在 SQLite 数据库中的数据。

这是我的更多代码：
searchable.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="Search" >
</searchable> 
```

可搜索活动：

```
public class SearchableActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        handleIntent(getIntent());
    }

    @Override
    protected void onNewIntent(Intent intent) {
        setIntent(intent);
        handleIntent(intent);
    }

    private void handleIntent(Intent intent) {
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
          String query = intent.getStringExtra(SearchManager.QUERY);
          doMySearch(query);
        }
    }

    private void doMySearch(String query) {
    }

} 
```

任何帮助，将不胜感激

PS这是最好的方法吗？我有很多字符串（> 1000）我读过有关使用数据库的信息，但我不知道如何将所有数据转换为数据库，也不知道如何从数据库设置文本......等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-01T12:26:49.160

我认为您需要使用密钥在 strings.xml 文件中搜索，如果我理解您，这里就是答案。

**字符串.xml**

```
<string name="string1">the content I want searched, text1</string> 
```

在strings.xml中搜索的方法

```
private String SearchForString(String message){
// get the resource id if matched any key in strings 
// message Passed string you want search for
// "string" type of what you looking for
// package name

try {
    int resId = getResources().getIdentifier(message , "string" , getPackageName());
    String stringReturned =  getResources().getString(resId);
return stringReturned;
  } catch(Exception e){
  return null;
  }
  } 
```

现在调用方法

```
SearchForString("string1"); 
```

它应该返回： *我要搜索的内容，text1*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:12:37.740

而不是使用字符串使用字符串数组。在资源中创建一个文件并声明如下

```
<?xml version="1.0" encoding="utf-8"?><resources>
<string-array name="names">
    <item>the content I want searched, text1</item>
    <item>the content I want searched, text2</item>
    <item>the content I want searched, text3</item>
</string-array> 
```

现在在代码中执行以下操作来搜索字符串

```
String[] names = getResources().getStringArray(R.array.names);
for (String s : names) {
    int i = s.indexOf(searchKeyword);
    if (i >= 0) {
        // found a match
    }
} 
```

# python - 在 Django 中使用 ManyToMany 模型中的额外字段进行注释

> ID：15321812
> 
> 赞同：0
> 
> 时间：2013-03-10T11:42:39.800
> 
> 标签：python, django, model, many-to-many

开门见山：
**型号：**

```
class Shop(models.Model):
    name = models.CharField(max_length=255)        

class Product(models.Model):
    name = models.CharField(max_length=255)
    shops = models.ManyToManyField(Shop, through='ProductShop', related_name='products')

class ProductShop(models.Model):
    product = models.ForeignKey(Product)
    shop = models.ForeignKey(Shop)
    price = models.DecimalField(max_digits=20, decimal_places=2) 
```

现在我想获取所有销售该产品的商店中按最低价格订购的产品列表。我一直用于`annotate`这样的查询，但在这里我想不出任何解决方案。这大致是我想要得到的：

```
products = Product.objects.annotate(price=SOMETHING_TO_GET_THE_LOWEST_PRICE_PER_PRODUCT).order_by('price') 
```

有什么好的解决方案吗？我知道`extra`，但不想写简单的 SQL。我尽力找到答案，但无法谷歌搜索我的具体问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:47:45.347

你的意思是：

```
products = ProductShop.objects.filter(
   shop__in=Shop.objects.filter()).annotate(Min(price)).order_by('price')

{% for ps in productshop %}
    Shop: {{ ps.product.shop }}
    Product: {{ ps.product }}
    Minimum Price: {{ ps.price }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T08:30:55.770

最后通过一个轻微的解决方法解决了它：

```
class Product(models.Model):
    name = models.CharField(max_length=255)
    shops = models.ManyToManyField(Shop, through='ProductShop', related_name='products')
    def lowest_possible_price(self):
        shops = self.shops.all()
        if not shops:
            return "N/A"
        return reduce(lambda x, y: min(x, ProductShop.objects.get(shop__pk=y.id, product__pk=self.id).price), 
                shops, ProductShop.objects.get(shop__pk=shops[0].id, product__pk=self.id).price) 
```

```
products = sorted(Product.objects.all(),
        key = lambda product : product.lowest_possible_price()) 
```

如果没有辅助功能的单线解决方案仍然困扰我（`lowest_possible_price`这里）

# php - 这种 PDO 查询是否可以防止 SQL 注入？

> ID：15321815
> 
> 赞同：0
> 
> 时间：2013-03-10T11:42:53.123
> 
> 标签：php, mysql, pdo, prepared-statement

首先，是的，我已经看到了这[是否 PDO 准备好的语句足以防止 SQL 注入？](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection)，但这还不足以回答我的问题，因为我的做法不同。

假设我有这样的代码：

```
$userid = $_SESSION['data']['id'];
$query = "SELECT * FROM table WHERE userid='$userid'";
$action = $db->prepare($query);
$action->execute(); 
```

它在技术上是安全的，因为用户无法影响`$userid`，对吧？说我是否错了。

但是，如果代码如下所示：

```
$userid = $_GET['id'];
$query = "SELECT * FROM table WHERE userid='$userid'";
$action = $db->prepare($query);
$action->execute(); 
```

现在安全了吗？我找不到任何关于此的文档，可以让我在白底黑字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:45:13.623

即使您使用过`PDO`，您的代码仍然容易受到攻击，`SQL INjection`因为您没有参数化查询，查询必须参数化才能清除值。

```
$userid = $_GET['id'];
$query = "SELECT * FROM table WHERE userid=?";
$db->setAttribute( PDO::ATTR_EMULATE_PREPARES, false );
$action = $db->prepare($query);
$action->bindParam(1, $userid);
$action->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:46:13.067

第二种说法不安全。

相反，你应该做类似的事情

```
$stmt = $db->prepare('SELECT * FROM table WHERE userid=:id');
$stmt->bindParam(':id', $userid);
$stmt->execute(); 
```

[资源](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T11:56:16.567

> 这在技术上是安全的，因为用户不能影响 $userid，对吧？说我是否错了。

你错了。会话数据是*外部数据*，必须谨慎对待。这是因为：

*   SessionID 和 SessionName 直接随请求提供。这些值可以很容易地操作，以便将一些不同的数据放入应用程序的内存中。
*   坚持。会话数据可以在持久层中修改，因此它始终有资格作为输入数据（！）。

您可能期望一个整数值，因此将其设为 1：

```
$userid = (int) $_SESSION['data']['id']; 
```

特别是当您直接将变量替换为 SQL 查询时。

以后不要想它是否安全。考虑以安全的方式做事，这样即使您错过了另一层中的某些内容（例如通过会话输入），也不会破坏应用程序中的数据流。

```
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

...

$userid = (int) $_SESSION['data']['id'];

...

$query = "SELECT column FROM table WHERE userid = ?";

$stmt = $pdo->prepare($query);
$stmt->bindParam(1, $userid);
$stmt->execute(); 
```

# java - 已添加 JButton，但在运行时不可见

> ID：15321819
> 
> 赞同：0
> 
> 时间：2013-03-10T11:43:36.493
> 
> 标签：java, swing, jbutton

```
public class Pencere{
    JFrame pencere = new JFrame();
    JButton buton1, buton2;

    public Pencere() {
        pencere.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pencere.setTitle("Ana Pencere");
        pencere.setBackground(Color.getHSBColor(15f, 120f, 220f));
        pencere.setLocation(new Point(500, 300));
        pencere.setSize(613, 253);
        pencere.addMouseListener(new Dinle());
        pencere.setLayout(new FlowLayout());
        pencereDegis();
    }
    public void goster(){
        pencere.setVisible(true);
    }

    public void pencereDegis(){
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
        } catch (ClassNotFoundException | InstantiationException
                | IllegalAccessException | UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        buton2 = new JButton("Butonnn"); //This button not visible
        pencere.add(buton2);
        pencere.pack();
    }
} 
```

当我运行我的应用程序**（我显示 JFrame 窗口）**时，所有代码都正常工作，但是当我没有看到“Butonnn”按钮后调用 pencereDegis() 方法时。

对不起我的英语不好谢谢大家..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:14:22.710

这段代码对我来说很适合`goster()`在方法中调用`main`。该按钮`buton2`是可见的（我只是取消了你的注释`addMouseListener()`，因为我没有`Dinle`上课）。我不确定，但这可能是因为你的`LookAndFeel`陈述。我有 OSX，第一次无法显示您的框架（因为您使用的是`WindowsLookAndFeel`），但是通过此更正它运行良好。

```
public class Pencere{
    JFrame pencere = new JFrame();
    JButton buton1, buton2;

    public Pencere() {
        pencere.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pencere.setTitle("Ana Pencere");
        pencere.setBackground(Color.getHSBColor(15f, 120f, 220f));
        pencere.setLocation(new Point(500, 300));
        pencere.setSize(613, 253);
        //pencere.addMouseListener(new Dinle());
        pencere.setLayout(new FlowLayout());
        pencereDegis();
    }
    public void goster(){
        pencere.setVisible(true);
    }

    public void pencereDegis(){
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException | InstantiationException
                | IllegalAccessException | UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        buton2 = new JButton("Butonnn"); //This button not visible
        pencere.add(buton2);
        pencere.pack();
    }

    public static void main(String[] args)
    {
        Pencere p = new Pencere();
        p.goster();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:33:42.013

```
public static void main(String[] arg)
{
    pencereDegis();
    goster();
} 
```

将其包含在您的代码中，它可以工作。

# android - 一个带有多个内部片段的片段，用于许多选项卡

> ID：15321823
> 
> 赞同：0
> 
> 时间：2013-03-10T11:44:19.583
> 
> 标签：android, android-layout, android-fragments, android-viewpager, android-framelayout

我想要一个选项卡布局，其中**每个选项卡上有两个片段，上面的一个显示**通过在 3 个选项卡中输入完成的任务的进度，从开始到结束，另一个主要片段在该**进度片段下方**接受输入。

**这使得每个选项卡中的标题和细节**、标题片段和细节片段（每个选项卡上的输入片段不同）都相同！

我尝试了所有方法两天:(

**我的解决方案** 我尝试了一个布局，其中包含两个用于从 ViewPager 添加到两个选项卡中的主要片段的框架布局，如下所示：

```
public static class ScreenSlidePagerAdapter extends
        FragmentStatePagerAdapter {

    public static ArrayList<Fragment> tabs_fragments = new ArrayList<Fragment>(
            3);

    public ScreenSlidePagerAdapter(FragmentManager fm,
            ArrayList<Fragment> tabs) {
        super(fm);
        ScreenSlidePagerAdapter.tabs_fragments = tabs;

    }

    @Override
    public Fragment getItem(int arg0) {
        return tabs_fragments.get(arg0);
    }

    @Override
    public int getCount() {
        return tabs_fragments.size();
    }

    @Override
    public int getItemPosition(Object object) {
        if (tabs_fragments.contains(object)) {
            return POSITION_UNCHANGED;
        }
        return POSITION_NONE;
    }

    public static void setItem(Fragment fr, int position) {
        if (position <= 2 && position >= 0) {
            tabs_fragments.remove(position);
            tabs_fragments.add(position, fr);
        } else
            Log.d("adding tab", "wrong tab position to add fragment at");
    }
} 
```

在活动开始时，我执行此操作，请参阅我在主片段中使用的选项卡位置，用于加载不同选项卡位置的详细信息片段：

```
 mPager = (ViewPager) findViewById(R.id.pager);
    // fragments for pagers
    ArrayList<Fragment> tabs = new ArrayList<Fragment>();
    tabs.add(new FrEventDetails());
    tabs.add(new FrEventDetails());
    tabs.add(new FrRuleSave());
    mPagerAdapter = new ScreenSlidePagerAdapter(getFragmentManager(), tabs);
    mPager.setAdapter(mPagerAdapter);

    bar = getActionBar();
    bar.setTitle("Add Rule");
    bar.setSubtitle("select event for rule");
    bar.setDisplayShowTitleEnabled(true);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
    bar.setDisplayHomeAsUpEnabled(true);

    bar.addTab(bar.newTab().setText("Select Event")
            .setTabListener(new TabListener(mPager)));
    bar.addTab(bar.newTab().setText("Select Action")
            .setTabListener(new TabListener(mPager)));
    bar.addTab(bar.newTab().setText("Save Rule")
            .setTabListener(new TabListener(mPager)));

    if (savedInstanceState != null) {
        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }
    mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            // When swiping between pages, select the
            // corresponding tab.
            if (bar.getSelectedNavigationIndex() != position)
                bar.setSelectedNavigationItem(position);
            tab = position;
        } 
```

然后当这个片段附加到活动时，我添加了一个进度布局（标题（对于一个框架布局并基于选定的选项卡，为细节框架布局添加另一个片段（用于输入）。这里显示：

```
public class FrEventDetails extends Fragment {
Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = (Context) activity;
    int tab = AddRule1.tab;
    android.app.FragmentTransaction ft = activity.getFragmentManager()
            .beginTransaction();
     ft.add(R.id.fr_rule_progress_container, new FrProgress());

    if (tab == 1) {
        ft.replace(R.id.fr_event_input_container, new FrActionSelect(),
                "cell1_1").commit();
    } else if (tab == 0) {
        ft.replace(R.id.fr_event_action_container, new FrEventSelect(),
                "cell1_2").commit();
    }

} 
```

**此主要片段的NOTE***布局很简单，包含两个框架布局。

**结果：**它在第一个选项卡上漂亮地显示标题和细节，但在第二个选项卡上，只有主要片段，当我滑动到第三个片段并返回时，第二个片段被漂亮地填充（显示 1 秒后）但第一个片段现在是空的。我不明白该怎么办。
请给这两天泪流满面的问题一些解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:00:04.017

1.  To Show all Tabs at the same time in start, increase PagerOffSetLimit (to 2 in this case for 3 tabs)
2.  For refreshing state of fragment or calling some methods on your fragment in the tab beside your current tab, use the Pager.instantiateItem method.
    1.  One second delay is because you have on the animateLayoutChanges in your xml.

# android - 当我打电话给另一个 func 时无法启动接收器 请帮助我坚持了五个小时

> ID：15321826
> 
> 赞同：-1
> 
> 时间：2013-03-10T11:44:30.137
> 
> 标签：android, broadcastreceiver

```
public class MainActivity extends Activity {

private ArrayList<BroadcastReceiver> _senders;
private IMsgSender _sender;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // xml....
    _sender = new HTTPMsgSender("http://localhost:8080/SyncDroidServer/AndroidServlet", "user", "12345");

    _senders = new ArrayList<BroadcastReceiver>();
    _senders.add(new SmsListener(_sender));

//////////////////////

public class SmsListener extends BroadcastReceiver {

    private IMsgSender _messageSender;

    public SmsListener(IMsgSender messageSender) {
        super();
        this._messageSender = messageSender;
    }    
@Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Toast.makeText(context, "goooodddddddd", Toast.LENGTH_SHORT).show();
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            SyncSmsMessage smsMessage = new  SyncSmsMessage();
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
                Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
                smsMessage.Id = 1; // produce a uniqe id
                smsMessage.ReceiveDate = null; // put the current date
                smsMessage.MessageText = msgs[i].getMessageBody().toString(); // get the string from the sms
                smsMessage.SenderNum = msgs[i].getOriginatingAddress();

                _messageSender.SendMsg(smsMessage);
            }
    /////////////////////
    public interface IMsgSender 
    {
    public void SendMsg(MessageBase messageToSend);
    }
    ///////////////////////
    public class HTTPMsgSender  implements IMsgSender{

        @Override
        public void SendMsg(MessageBase messageToSend) 
        {
        }
    } 
```

LogCat 显示

```
 03-10 10:30:41.902: E/AndroidRuntime(878): FATAL EXCEPTION: main
03-10 10:30:41.902: E/AndroidRuntime(878): java.lang.RuntimeException: Unable to start receiver com.example.syncapp.SmsListener: java.lang.NullPointerException
03-10 10:30:41.902: E/AndroidRuntime(878):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1805)
03-10 10:30:41.902: E/AndroidRuntime(878):  at android.app.ActivityThread.access$2400(ActivityThread.java:117)
03-10 10:30:41.902: E/AndroidRuntime(878):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
03-10 10:30:41.902: E/AndroidRuntime(878):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-10 10:30:41.902: E/AndroidRuntime(878):  at android.os.Looper.loop(Looper.java:123)
03-10 10:30:41.902: E/AndroidRuntime(878):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-10 10:30:41.902: E/AndroidRuntime(878):  at java.lang.reflect.Method.invokeNative(Native Method)
03-10 10:30:41.902: E/AndroidRuntime(878):  at java.lang.reflect.Method.invoke(Method.java:507)
03-10 10:30:41.902: E/AndroidRuntime(878):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-10 10:30:41.902: E/AndroidRuntime(878):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-10 10:30:41.902: E/AndroidRuntime(878):  at dalvik.system.NativeStart.main(Native Method)
03-10 10:30:41.902: E/AndroidRuntime(878): Caused by: java.lang.NullPointerException
03-10 10:30:41.902: E/AndroidRuntime(878):  at com.example.syncapp.SmsListener.onReceive(SmsListener.java:59)
03-10 10:30:41.902: E/AndroidRuntime(878):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
03-10 10:30:41.902: E/AndroidRuntime(878):  ... 10 more 
```

当我在主要活动中这样做时

```
public class MainActivity extends Activity {

private ArrayList<BroadcastReceiver> _senders;
private IMsgSender _sender;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // xml....
    _sender = new HTTPMsgSender("http://localhost:8080/SyncDroidServer/AndroidServlet", "user", "12345");

    SyncSmsMessage s= new SyncSmsMessage();
    s.Id=1;
    s.MessageText="sfsa";
    _sender.SendMsg(s); 
```

所有代码都在 onReceive 方法的最后一行运行，并且应用程序崩溃了。(_messageSender.SendMsg(smsMessage);) 在 SendMsg 中我什么也不做。我需要做什么？？？

java.lang.RuntimeException：无法启动接收器 com.example.syncapp.SmsListener：java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:23:23.730

我觉得有两种可能

1.  _sender 要么为空（可能性较小）..
2.  在创建 SmsListener 之前调用 onReceive。（有机会吗？）。

在 SmsListener 构造函数中写一个日志，看它是否被正确调用。在添加到 arraylist 之前还要检查 _sender 是否为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:27:33.403

因为 onrecive 是系统服务，所以 soulutin 与 Intents 一起使用。

# database - 基于多列选择行

> ID：15321827
> 
> 赞同：0
> 
> 时间：2013-03-10T11:44:36.553
> 
> 标签：database

假设我有一张如下表

```
reg   sub1   sub2   sub3
1      A      F      F
2      F      F      A
3      A      B      B
4      A      B      F
5      A      F      F 
```

sub1、sub2、sub3 是三个不同的科目，值 A、B 和 F 是 A 和 B 获得某些分数但 F 不及格的成绩......现在我想要拥有一个“F”的学生的注册（即只有一科不及格）和两科，三科等等......怎么办......

我对一个 F 的学生的期望输出（即只有一门科目不及格）是......

```
 reg   sub1   sub2   sub3
    4      A      B      F 
```

并且有两个 F（即两门科目不及格）的学生是......

```
 reg   sub1   sub2   sub3
    1      A      F      F
    2      F      F      A    
    5      A      F      F 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:00:59.073

首先，就像@Mat 在上面的评论中所说，如果你标准化你的数据模型，这会容易得多。

其次，我假设您正在寻找一个 SQL 查询。第三，由于您根本没有提到您使用的是什么数据库系统（SQL Server、DB2、Oracle、Postgres 等），所以我将展示一个至少适用于 SQL Server 的解决方案：

```
SELECT *
FROM grades
WHERE (CASE sub1 WHEN 'F' THEN 1 ELSE 0 END) + 
      (CASE sub2 WHEN 'F' THEN 1 ELSE 0 END) +
      (CASE sub3 WHEN 'F' THEN 1 ELSE 0 END) = 2 
```

这将在您的表 ( `grades`) 中找到所有记录，其中恰好有 2 个`F`等级。它所做的是将每个等级转换`F`为 1，每隔一个等级转换为 0，然后构建这些数字的总和。也就是说，它计算`F`每条记录的 s 数。

# javascript - Google Maps API v3：Ground Overlay 的平滑缩放

> ID：15321832
> 
> 赞同：2
> 
> 时间：2013-03-10T11:45:15.960
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个静态图像，我希望能够使用 Google Maps API 放大它。但是，我没有任何更高分辨率的图块可用，所以我的想法是简单地放大一个图像并相应地拉伸它。`getTileURL()`如果我制作函数，这很好用`return null`，而是将图像定义为 GroundOverlay。问题是，为 GroundOverlays 放大图像必须调整它们的大小和重新定位它们，您可以清楚地注意到该过程。这是谷歌地图开发者指南中的一个例子，它有同样的问题：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/groundoverlay-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/groundoverlay-simple)

如果您放大地图，您会注意到图像再次以常规尺寸出现一瞬间，然后被拉伸并重新定位以适应坐标。

有没有办法完全禁用它？我知道它可以平滑地放大图像，因为它使用常规图像图块来实现，一旦加载了更高分辨率的图块，它就会放大并替换它们。是否有可能以某种方式模拟 GroundOverlays 的这种效果？

# ios - 如何多次调用 viewDidLoad

> ID：15321841
> 
> 赞同：1
> 
> 时间：2013-03-10T11:47:30.423
> 
> 标签：ios, objective-c, uiview, uiviewcontroller, uikit

我知道`viewDidLoad`在 的生命周期中可能会多次调用该方法`UIViewController`。但这怎么可能？如何让它多次调用而不是直接调用它？我试过这样做：

```
 UIView *view  = [[UIView alloc] initWithFrame:self.view.frame];

view.backgroundColor = [UIColor greenColor];

self.view = view; 
```

而我的观点实际上改变了，`viewDidLoad`没有被调用。谁能举个例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:53:09.053

第一次访问 viewController 的`view`属性时，将使用该视图创建视图`loadView`，然后您将收到`viewDidLoad`调用。

除非视图被销毁，否则您将不会`viewDidLoad`再次收到呼叫 - 如果您的 viewController 离开屏幕并`UIKit`决定清除任何不可见的视图，则可能会发生这种情况。因此，下次您访问该`view`属性时，它会注意到它不存在并再次创建一个，`loadView`然后调用`viewDidLoad`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:02:10.990

viewWillAppear 方法是一个 UIViewController 方法。为什么不直接打电话？

顺便说一句，没有办法做到这一点，当您将 UIView 分配给您的 self.view 时，如果您没有在 init 或 loadView 或 didLoad 方法中执行此操作..

生命周期是：

*   在里面
*   loadView //在这里改变你的视图
*   viewDidLoad

然后您呈现视图并：

*   视图将出现：
*   viewDidAppear:

如果你想在你的 uiviewcontroller 生命周期中改变视图，你应该这样做：

```
UIView *view  = [[UIView alloc] initWithFrame:self.view.frame];

view.backgroundColor = [UIColor greenColor];
[self viewWillAppear:NO]; //set to yes if you are making some kind of animation
self.view = view;
[self viewDidAppear:NO]; 
```

will消失和确实消失将根据UIVIewController生命周期调用。

# paypal - Paypal 退还拆分交易

> ID：15321842
> 
> 赞同：0
> 
> 时间：2013-03-10T11:47:39.970
> 
> 标签：paypal, payment-gateway, paypal-sandbox

我已经在我的网站中构建了 paypal 的并行支付选项。这里有 % 进入我的网站 paypal 帐户，剩余的进入商家的 paypal 帐户之一。当我需要退款时，我怎样才能让它在我的部分和商家部分都自动退款的情况下工作？我尝试了 paypal 退款 API，但它只适用于我的部分，但对于商家部分，它说我没有权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:41:49.143

您需要让与您分摊付款的其他商家向您的 API 授予 API 权限，以便能够发放退款。否则，您将无法使用您的凭据从他们的帐户退款。

# asp.net - ASP.net 中的简单购物车

> ID：15321846
> 
> 赞同：0
> 
> 时间：2013-03-10T11:47:49.757
> 
> 标签：asp.net

我需要在 asp.net 中创建一个简单的购物车。我设法使用会话将物品转移到购物车中，但我坚持使用 ajax 从购物车中删除一个/所有物品。任何类型的帮助或有用的链接将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:02:07.503

您可以通过以下链接浏览 MSDN 购物车教程。

[带有 Ajax 更新的购物车](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-8)

虽然它是在 ASP.NET MVC 中，但您仍然可以理解它。他们有你需要的所有解释。

# xml - RESTful Web 服务的轻量级描述语言

> ID：15321847
> 
> 赞同：1
> 
> 时间：2013-03-10T11:48:06.040
> 
> 标签：xml, json, web-services, rest, wsdl

我需要描述我的宁静 Web 服务，以便我可以轻松处理它。我尝试使用 wsdl 2.0，现在尝试使用 wadl，但我很好奇是否有一种语言使用 JSON 而不是 XML？

谢谢帮助..

# smalltalk - 在 Smalltalk 中使用双大于号 (>>) 定义方法

> ID：15321848
> 
> 赞同：5
> 
> 时间：2013-03-10T11:48:10.360
> 
> 标签：smalltalk, gnu-smalltalk

在Kent Beck 的[Smalltalk Best Practice Patterns](https://rads.stackoverflow.com/amzn/click/com/013476904X)一书中，双大号 ( `>>`) 用于定义如下方法：

```
Point class>>x: xNumber y: yNumber
    ^self new
        setX: xNumber
        y: yNumber

Point>>setX: xNumber y: yNumber
    x := xNumber.
    y := yNumber.
    ^self 
```

但是，我无法让它在 GNU Smalltalk 中运行。

在 Smalltalk 的某些实现中它是有效的语法吗？或者它只是一种伪代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:54:31.720

实际上这是伪代码。

在其他语言中，您会使用`.`来告诉人们该方法在此类中，但在 smalltalk 中您编写`>>`

你会在像[Squeak](http://www.squeak.org/)或[Pharo](http://www.pharo-project.org/pharo-download)这样的 Smalltalk 中做什么

```
Point class>>x: xNumber y: yNumber
    ^self new
        setX: xNumber
        y: yNumber 
```

1.  打开系统浏览器
2.  单击类，一个按钮，将显示类的类的一面。
3.  将方法粘贴到带有源代码的文本区域中：

    ```
    x: xNumber y: yNumber
        ^self new
            setX: xNumber
            y: yNumber 
    ```

4.  strg -s 保存代码

为了

```
Point>>setX: xNumber y: yNumber
    x := xNumber.
    y := yNumber.
    ^self 
```

你会做同样的事情，但不使用课堂端

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T16:06:04.637

另外，请注意，确实，#>> 是您可以发送给类的消息，它基本上可以访问符号的方法字典（选择器参数）。请参阅，行为类、方法 >>

```
 >> selector 
"Answer the compiled method associated with the argument, selector (a 
Symbol), a message selector in the receiver's method dictionary. If the 
selector is not in the dictionary, create an error notification."

^self compiledMethodAt: selector 
```

所以你可以做，例如（检查）

```
 Point class >> #x:y: 
```

但是请注意，这里我们发送 #class 因为 #x:y: 是类端方法。如果你想访问一个实例端方法，比如#normalized，那么你可以这样做：

```
 Point >> #normalized 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T08:54:08.730

GNU Smalltalk 的正确语法如下所示：

```
Point class extend [
    x: xNumber y: yNumber [
        ^self new
            setX: xNumber
            y: yNumber ]
]

Point extend [
    setX: xNumber y: yNumber [
        x := xNumber.
        y := yNumber.
        ^self ]
] 
```

有关 GNU Smalltalk 语法的更多信息，请参见[此处](http://www.gnu.org/software/smalltalk/manual/html_node/Syntax.html)。

# ms-access - 为什么这个记录计数返回 1？

> ID：15321849
> 
> 赞同：8
> 
> 时间：2013-03-10T11:48:16.650
> 
> 标签：ms-access, vba

在我的 MS Access DB 中，我在 VB 中运行一个查询，它应该返回两条记录。当我在 SQL 中运行它时，我得到两条记录，但从 VBA 运行时，我得到两条。这是获取两条记录的 SQL 视图中的代码：

```
SELECT *
FROM tblWebMeetingData
WHERE [Last Name] LIKE 'Marx'; 
```

当我像这样在 VBA 中调用它时：

```
SQL = "SELECT * FROM tblWebMeetingData WHERE [Last Name] LIKE 'Marx';"
Set rst = CurrentDb.OpenRecordset(SQL)  
MsgBox ("Number of records: " & rst.RecordCount) 
```

我得到一条记录的记录数。记录计数不应该计算从 SQL 语句或表返回的所有记录吗？我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-10T12:05:14.760

除了最简单的查询（性能优化）之外，DAO 不会一次检索整个结果集。`rst.MoveLast`在打开记录集之后和检索之前强制使用完整的检索和有效 的记录计数`rst.RecordCOunt`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-26T08:57:30.733

对于 recordcount 属性，您需要将游标类型设置为

RS.Open SQL、MyConn、adOpenStatic、adLockReadOnly、adCmdText

如果它无法执行，那么您需要使用 ADOVBS.INC 作为页面顶部的包含文件，您可以从 Internet 下载并使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-08T18:22:36.870

以上答案都很好。微软关于 RecordCount 的文档有这样的：

使用 RecordCount 属性可以查明 Recordset 或 TableDef 对象中有多少条记录已被访问。在访问所有记录之前，RecordCount 属性不会指示动态集、快照或仅转发类型的 Recordset 对象中包含多少记录。访问最后一条记录后，RecordCount 属性指示 Recordset 或 TableDef 对象中未删除记录的总数。要强制访问最后一条记录，请在 Recordset 对象上使用 MoveLast 方法。您还可以使用 SQL Count 函数来确定查询将返回的大致记录数。

笔记

使用 MoveLast 方法填充新打开的 Recordset 会对性能产生负面影响。除非在打开 Recordset 后必须立即获得准确的 RecordCount，否则最好等到使用其他代码部分填充 Recordset 后再检查 RecordCount 属性。

# sql-server - 插入来自不同表的两列

> ID：15321855
> 
> 赞同：0
> 
> 时间：2013-03-10T11:48:56.157
> 
> 标签：sql-server, database, sql-insert

我需要编写一个插入查询来使用来自不同表的数据将一些行插入到一个表中。我有：

*   `@ID`包含表中新插入行的 ID 的变量。(1)
*   `ID`表( 2) 包含一些
*   表 (3) 定义了上述两个表之间的关系。

现在我需要`ID`在表 (3) 中为 (2) 中的每个插入一个新行。

因此，如果`@ID=2`和 IDs = `1, 2, 3, 4, 5, 6`，我想在表 (3) 中插入以下行：

```
table1_ID    table2_ID
---------    ---------
1            1
1            2
1            3
1            4
1            5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:12:14.487

假设该值`6`不应该被丢弃（如果是，请解释逻辑）。还假设您只想将表 2 中的每一行插入到表 2 中。

```
INSERT dbo.Table3(table1_ID, table2_ID)
  SELECT @ID, ID
    FROM dbo.Table2
    -- WHERE ID <> 6???
  ; 
```

* * *

**如果 ID 列表确实是 CSV**，则：

首先创建一个拆分函数（[这里描述了几个替代方法，除了它们输出字符串而不是整数](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)），例如

```
CREATE FUNCTION dbo.SplitInts
(
    @List       VARCHAR(MAX),
    @Delimiter  VARCHAR(255)
)
RETURNS @t TABLE(Item INT)
AS
BEGIN
    INSERT @t(Item) SELECT CONVERT(INT, SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number))
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
        FROM sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter;

    RETURN;
END
GO 
```

现在您的存储过程可以简单地说：

```
CREATE PROCEDURE dbo.whatever
  @ID INT,
  @IDs VARCHAR(MAX)
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.Table3(table1_ID, table2_ID)
    SELECT @ID, Item
      FROM dbo.SplitInts(@IDs, ',');
END
GO 
```

但是，如果您使用的是 SQL Server 2008 或更高版本，并且此逗号分隔 ID 列表来自您的应用程序（例如，来自 DataTable 或其他集合），您可以使用[表值参数](http://msdn.microsoft.com/en-us/library/bb510489%28v=sql.100%29.aspx)并避免拆分的需要。

```
CREATE TYPE dbo.SetOfIntegers
( Number INT );
GO

CREATE PROCEDURE dbo.whatever
  @ID INT,
  @IDs dbo.SetOfIntegers READONLY
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.Table3(table1_ID, table2_ID)
    SELECT @ID, Item
      FROM @IDs;
END
GO 
```

然后，您必须更改 C# 代码以传递您`DataTable`的 as`SqlDbType.Structured`而不是将您的 CSV 作为字符串传递。更多信息在这里：

[http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)

# ios - 对值可能包含重复项的自定义对象的 NSMutableDictionary 进行排序

> ID：15321859
> 
> 赞同：0
> 
> 时间：2013-03-10T11:49:13.387
> 
> 标签：ios, sorting, nsarray, nsmutabledictionary

我有一个“分数”类型的自定义对象的 NSMutableDictionary，它由一个 int 类型的分子变量和一个也是 int 类型的分母变量组成。从 NSMutableDictionary 中提取所有值并放入 NSArray 后，我可以对它们进行排序。然而，我刚刚发现了一个新问题。因为我的 NSMutableDictionary 是“分数”对象的集合，所以这些对象中的一些很可能是彼此重复的，这意味着从原始 NSMutableDictionary 中找到相应的“键”值也会导致问题。我该如何克服呢？我有一个 NSMutableDictionary，其中包含用于键的 NSStrings，以及用于值的自定义“分数”对象。我有一个包含这些自定义“分数”对象的 NSArray，从大到小排序。问题是其中一些对象可能是相同的（例如1/2、1/3、1/3、1/4）。我想知道的是如何为其各自的“分数”对象提取每个键，尽管存在重复项？

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:18:24.293

要检索特定对象的所有键，请`allKeysForObject:`使用`NSDictionary`.

# c++ - 类 C 实现的 C++ 等效性能版本

> ID：15321860
> 
> 赞同：2
> 
> 时间：2013-03-10T11:49:16.463
> 
> 标签：c++, smart-pointers, pimpl-idiom

当我遇到这种情况时，我正在学习 C++，我想在 C++ 中实现以下 C 符号代码的等效有效版本。

```
<header.h>
struct Obj;
Obj* create(...);
void do_some_thing(Obj*);
void do_another_thing(Obj*);
void destroy(Obj*); 
```

要求是：

*   该实现在库（静态/动态）中提供，并且标头不公开除接口以外的任何细节
*   它应该同样有效

使用虚函数公开接口（类 COM）是不合格的；这是一种启用多态性（通过同一接口公开多个实现）的解决方案，但事实并非如此，而且由于我不需要它带来的价值，我不明白为什么我应该支付调用函数的成本通过2个间接指针。所以我的下一个想法是 pimpl 成语：

```
<header.h>
class Obj {
public:
  Obj();
  ~Obj();
  void do_some_thing();
  void do_another_thing();
private:
  class Impl;
  smart_ptr<Impl>  impl_; // ! What should I use here, unique_ptr<> or shared_ptr<> ?
}; 
```

shared_ptr<> 似乎不符合条件，我会为原始实现中不存在的不必要的互锁递增/递减付费。另一方面， unique_ptr<> 使 Obj 不可复制。这意味着客户端不能调用他自己的函数来获取 Obj 的值，而 Obj 只是一个指针的包装器，所以本质上他不能通过值传递指针！他可以在原始版本中做到这一点。（通过引用传递仍然不合格：他仍在传递指向指针的指针）

那么在 C++ 中实现这一点的同样有效的方法应该是什么？

编辑：我给了它更多的想法，我来到了这个解决方案：

```
<header.h>
class ObjRef // I exist only to provide an interface to implementation
{            //  (without virtual functions and their double-level indirect pointers)
public:
  ObjRef();
  ObjRef(ObjRef);           // I simply copy pointers value
  ObjRef operator=(ObjRef); // ...
  void do_some_thing();
  void do_another_thing();
protected:
  class Impl;
  Impl*  impl_; // raw pointer here, I'm not responsible for lifetime management
};

class Obj : public ObjRef
{
  Obj(Obj const&);            // I'm not copyable
  Obj& operator=(Obj const&); // or assignable 
public:
  Obj(Obj&&);                 // but I'm movable (I'll have to implement unique_ptr<> functionality)
  Obj& operator=(Obj&&);
  Obj();
  ~Obj(); // I destroy impl_
  // and expose the interface of ObjRef through inheritance
}; 
```

现在我回到客户端Obj，如果客户端需要通过调用他的一些其他函数来分配Obj的使用，他可以将它们声明为

```
void use_obj(ObjRef o);

// and call them:
Obj o = call_my_lib_factory();
use_obj(o); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:55:12.637

为什么不保留C原始？您不必在 C 版本中支付引用计数溢价的原因是 C 版本依赖调用者来记录`Obj*`正在使用的副本数。

通过尝试确保替换是可复制的，并确保`destroy`仅在最后一个引用被销毁后才调用底层方法，您对原始方法施加了额外的要求，因此正确的解决方案是很自然的（在我看来be `shared_ptr`) 比原版有一些有限的额外费用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T15:22:07.993

我认为首先需要指向对象的指针是有原因的。因为最简单、最有效的方法就是在堆栈上创建它：

```
{
  Obj x(...);
  x.do_some_thing();
  x.do_another_thing();
} // let the destructor handle `destroy()` when the object goes out of scope 
```

但是假设您需要在堆上创建它，无论出于何种原因，大部分都一样简单，同样高效：

```
{
  std::unique_ptr<Obj> x = Obj::create(...); // if you want a separate `create` function
  std::unique_ptr<Obj> x = new Obj(...); // Otherwise, a plain constructor will do

  x->do_some_thing();
  x->do_another_thing();
} // as before, let the destructor handle destruction 
```

不需要继承、接口或虚函数。您正在编写 C++，而不是 Java。C++ 的基本规则之一是“不要为不使用的东西付费”。*默认情况下*，C++ 的性能与 C 一样。您不必做任何特别的事情来获得良好的性能。如果您不需要它们，您所要做的就是不要使用具有性能成本的功能。

您在 C 版本中不需要引用计数，那么为什么要在 C++ 版本中使用引用计数（带有`shared_ptr`）？您不需要虚拟函数在 C 版本中提供的功能（它将通过函数指针实现），那么为什么要在 C++ 函数中创建虚拟函数呢？

但是 C++ 可以让您特别整理创建/销毁的东西，这不会花费您任何费用。所以用那个。在其构造函数中创建对象，并让其析构函数销毁它。只需将对象放置在适当的范围内，这样当您希望将其销毁时，它就会超出范围。它为您提供了更好的语法来调用“成员”函数，因此也可以使用它。

> 另一方面， unique_ptr<> 使 Obj 不可复制。这意味着客户端不能调用自己的函数来获取 Obj 的值，而 Obj 只是一个指针的包装器，所以本质上他不能通过值传递指针！他可以在原始版本中做到这一点。（通过引用传递仍然不合格：他仍在传递指向指针的指针）

如果您使用移动语义，客户端可以按值获取 Obj。但是，如果您希望复制对象，则让它被复制。使用我的第一个示例，并在堆栈上创建对象，当需要按值传递时，只需按值传递即可。它包含任何复杂的资源（例如指向已分配内存的指针），然后确保编写适当的复制构造函数和赋值运算符，然后您可以创建对象（在堆栈上，或任何您需要的地方），传递它如您所愿，按值、按引用、将其包装在智能指针中或通过移动它（如果您实现了必要的移动构造函数和移动赋值运算符）。

# c# - Sql COUNT 查询 3 列并显示在 asp.net 网页的一个模板字段中

> ID：15321861
> 
> 赞同：0
> 
> 时间：2013-03-10T11:49:29.347
> 
> 标签：c#, asp.net, sql

我正在创建一个 asp.net 网络应用程序，其中包含一个用于学习的火车预订小型数据库。我只是在asp.net的学习阶段，所以请原谅我的错误。

**情况：**我有两个表第一个 Train_Details，列有 Train_No、1AC-Berths、2AC_Berths、3AC_Berths。我的第二个表是带有 Train_No、Class_Type 列的 Passenger_Details（用户在 1AC、2AC 或 3AC 之间进行选择）。

**问题：**我试图用下面提到的列创建查询

```
Train no      Date of journey            Status (Template field)

ABC           18/03/2013                    
                                                 1AC : 
                                         2AC :
                                         3AC  :

Xyz         18/03/2013                1AC : 
                                      2AC :
                                      3AC : 
```

**要求**：在状态栏中，1AC 标签应显示 {count no. PASSENGERS_Detail 表中的行数，其中火车编号、DOJ 和类别匹配为 1AC 并将其显示为编号}。2AC 和 3AC 的情况也一样。1AC、2AC 和 3AC 的所有标签都应仅适用于所有列车的状态栏，这是不明智的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:31:32.353

您的帖子中缺少某些信息，例如`Date of journey`来自哪里。因此，凭借您有限的信息，我设法想出了：

```
SELECT
  p.Train_No, 
  CASE
    WHEN p.Class_Type = 1 THEN '1AC: '
    WHEN p.Class_Type = 2 THEN '2AC: '
    WHEN p.Class_Type = 3 THEN '3AC: '
  END + CAST(COUNT(p.Class_Type) AS NVARCHAR(50)) AS Status
FROM Train_Details AS t
JOIN Passenger_Details AS p
  ON p.Train_No = t.Train_No
GROUP BY p.Train_NO, p.Class_Type; 
```

[SQL小提琴](http://sqlfiddle.com/#!3/cda9b/2)

**编辑：**

您还必须在 C# 代码中转换 Class_Type。

```
SELECT
  p.Train_No, 
  p.Class_Type,
  COUNT(p.Class_Type) AS Status
FROM Train_Details AS t
JOIN Passenger_Details AS p
  ON p.Train_No = t.Train_No
GROUP BY p.Train_NO, p.Class_Type; 
```

# c++ - 什么是glVertexPointer中的步幅，VBO中的glTexCoordPointer

> ID：15321867
> 
> 赞同：1
> 
> 时间：2013-03-10T11:50:23.340
> 
> 标签：c++, opengl-es, vbo, blackberry-10, stride

嗨，我在使用 VBO 绘图时遇到问题。[所以我在这里](https://stackoverflow.com/questions/15310777/vbo-doesnt-drawing-anything)问了一个问题。我找不到我的问题的答案。但是通过讨论那里给出的一个答案，我现在有另一个关于 VBO 进展的问题。我对它是什么和做什么感到困惑。

在[这里](http://www.gamedev.net/topic/189323-vbo-stride-question/) 我发现有人回答

> 如果您将所有顶点数据放在一个数组中（数组：读取为 malloc''ed 指针），所有法线都在另一个数组中，等等。那么您的步幅为 0。例如，如果顶点、法线等是这样存储的：
> 
> [顶点0][顶点1][顶点2]...
> 
> [正常0][正常1][正常2]...
> 
> [texcoord0][texcoord1][texcoord2]...
> 
> 如果您的顶点、法线等是这样包装的：
> 
> [vertex0][normal0][texcoord0][vertex1][normal1][texcoord1][vertex2][normal2][texcoord2]...
> 
> 然后你应该设置一个非空步幅，它对应于从一个元素切换到下一个元素所需的偏移量。（这个步幅被计为字节）

从那个解释中，我认为步幅实际上是指缓冲区中一个顶点的末端和另一个顶点的起点之间的距离。在第一种情况下，它的值为 0，因为所有顶点都是连续存储的。纹理也是如此。但后来我在同一个线程中阅读了另一个关于跨步定义的答案。

> 关于 VBO 步幅往往有点混乱，主要是因为它对 0 的特殊含义。
> 
> 在这种情况下，“步幅”是指内存中一个值的开始与内存中下一个值的开始之间的距离。它不是一个结束与下一个开始之间的距离。因此，在作为结构数组的 VBO 中，该结构的每个元素的步幅将是整个结构的大小。请记住，结构填充会影响这一点。

这与另一个答案所说的相反。或者我对第一个答案的含义有误？谁能帮我解决这个问题。如果有人能举例回答，我将不胜感激。我在这个尚未解决的问题的开头给出了我实现 VBO 的链接。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T13:29:36.100

第一个答案*试图*说的是两个元素之间的“步幅”是一个元素的开头和下一个元素的开头之间的字节偏移量。
*但是*，如果您传递的元素是连续的（即它们之间没有空格），您可以为 stride 参数传递 0。

我会说在这种情况下声称“步幅为 0”是错误的 - 步幅*是* `sizeof(element)`，但值 0 得到特殊处理并被认为是`sizeof(element)`。
这样做很可能是为了让可怜的程序员不必`sizeof`在通常情况下使用两个（容易出错的）参数相同时。

# windows-installer - 卸载 msi 不会删除应用程序文件

> ID：15321870
> 
> 赞同：2
> 
> 时间：2013-03-10T11:50:29.603
> 
> 标签：windows-installer

当我卸载我的应用程序时，它不会删除应用程序文件夹，也不会删除应用程序文件夹中的文件（exe 和 dll）。

当我安装较新版本的 Windows 应用程序时遇到问题，只要它们具有相同的程序集版本，它就不会覆盖 dll 并继续使用旧 dll。

我通过升级 dll 程序集版本解决了这个问题，但我仍然想在升级时删除旧文件。

# c++ - 如何在 C++ 中为不同的温度单位制作不同的构造函数？

> ID：15321872
> 
> 赞同：1
> 
> 时间：2013-03-10T11:50:44.067
> 
> 标签：c++, visual-c++, constructor, temperature

因此，您应该能够以 C、K 或 F 的形式输入温度，这将为它们中的每一个调用不同的构造函数。这些构造函数有何不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T11:55:41.430

假设您使用的是 C++11，您可以使用用户定义的文字来表示一个数字是华氏、开尔文或摄氏度。

如果您不使用 C++11，则始终可以在构造函数中使用枚举类型参数来表达这一点。不过，用户定义的文字方法可能要好得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T11:59:11.470

**如果您使用温度值**的专用数据类型，例如：

```
struct Celsius { double value; }
struct Kelvin  { double value; }
struct Farahemsomething { double value; } 
```

那么你可以只使用简单的重载：

```
class MyClass
{
public:
    MyClass(Celsius temp) {   .... = temp.value; ... }
    MyClass(Kelvin temp) {   .... = temp.value; ... }
    ...
} 
```

但是，如果您在任何地方都只使用`double`所有值，那么您将不得不将构造函数与**其他东西区**分开来。枚举可能非常有用，但您将在同一个构造函数中使用它，并且必须切换枚举值：

```
enum TemperatureUnits
{ Celsius,Kelvin, Farahemsomething };

class MyClass
{
public:
    MyClass(TemperatureUnits unit, double value) {
        if(unit == Celsius)
        { ... }
        else if(unit == ....
           ...
        ...
    }
} 
```

您还可以将“空心类型”与原始双精度混合以人为地启用重载，但这会变得很棘手：

```
struct Celsius { }
struct Kelvin  { }
struct Farahemsomething { }

class MyClass
{
public:
    MyClass(Celsius unit, double value) {   .... = value; ... }
    MyClass(Kelvin unit, double value) {   .... = value; ... }
    ...
} 
```

在这里，请注意“unit”只是一个空结构，允许您选择正确的重载，因此您使用简单的空“Celsius”调用构造函数，后跟 234.55 值。

编辑：我又一次忘记了 C11 的特性。AnotherTest 关于自定义文字的建议可能是最简单的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T13:26:39.207

我知道我对此有点晚了，但这是我想出的：

```
#include <iostream> 

namespace units {
    template<int> struct temp_unit { };
    typedef temp_unit<1> celcius;
    typedef temp_unit<2> fahrenheit;
    typedef temp_unit<3> kelvin;
    typedef temp_unit<4> reaumur;
    typedef temp_unit<5> rankine;
}

namespace priv {
    struct converter_impl {
        virtual ~converter_impl() { }

        virtual float to_celcius() const = 0;
        virtual float to_fahrenheit() const = 0;
        virtual float to_kelvin() const = 0;
        virtual float to_reaumur() const = 0;
        virtual float to_rankine() const = 0;
    };

    struct from_celcius : converter_impl {
    protected:
        float m_value;
    public:
        from_celcius(float v) : m_value(v) { }

        float to_celcius() const { return m_value; }
        float to_fahrenheit() const { return (m_value * 1.8) + 32; }
        float to_kelvin() const { return (m_value + 273.15); }
        float to_reaumur() const { return (m_value * 0.8); }
        float to_rankine() const { return (m_value * 1.8 +32 + 459.67); }
    };

    struct from_fahrenheit : converter_impl {
    protected:
        float m_value;
    public:
        from_fahrenheit(float v) : m_value(v) { }

        float to_celcius() const { return ((m_value - 32) / 1.8); }
        float to_fahrenheit() const { return m_value; }
        float to_kelvin() const { return ((m_value + 459.67) / 1.8); }
        float to_reaumur() const { return ((m_value - 32) / 2.25); }
        float to_rankine() const { return (m_value + 459.67); }
    };

    struct from_kelvin : converter_impl {
    protected:
        float m_value;
    public:
        from_kelvin(float v) : m_value(v) { }

        float to_celcius() const { return (m_value - 273.15); }
        float to_fahrenheit() const { return ((m_value * 1.8) - 459.67); }
        float to_kelvin() const { return m_value; }
        float to_reaumur() const { return ((m_value - 273.15) * 0.8); }
        float to_rankine() const { return (m_value * 1.8); }
    };

    struct from_reaumur : converter_impl {
    protected:
        float m_value;
    public:
        from_reaumur(float v) : m_value(v) { }

        float to_celcius() const { return (m_value * 1.25); }
        float to_fahrenheit() const { return ((m_value * 2.25) + 32); }
        float to_kelvin() const { return ((m_value * 1.25) + 273.15); }
        float to_reaumur() const { return m_value; }
        float to_rankine() const { return ((m_value * 2.25) + 32 + 459.67); }
    };

    struct from_rankine : converter_impl {
    protected:
        float m_value;
    public:
        from_rankine(float v) : m_value(v) { }

        float to_celcius() const { return ((m_value - 32 - 459.67) / 1.8); }
        float to_fahrenheit() const { return (m_value  - 459.67); }
        float to_kelvin() const { return (m_value / 1.8); }
        float to_reaumur() const { return ((m_value - 32 - 459.67) / 2.25); }
        float to_rankine() const { return m_value; }
    };
}

struct temp_converter {
protected:
    priv::converter_impl * m_impl;
public:
    temp_converter(float value, units::celcius)     : m_impl(new priv::from_celcius(value)) { }
    temp_converter(float value, units::fahrenheit)  : m_impl(new priv::from_fahrenheit(value)) { }
    temp_converter(float value, units::kelvin)      : m_impl(new priv::from_kelvin(value)) { }
    temp_converter(float value, units::reaumur)     : m_impl(new priv::from_reaumur(value)) { }
    temp_converter(float value, units::rankine)     : m_impl(new priv::from_rankine(value)) { }
    ~temp_converter() { delete m_impl; }

    float to_celcius() const    { return m_impl->to_celcius(); }
    float to_fahrenheit() const { return m_impl->to_fahrenheit(); }
    float to_kelvin() const     { return m_impl->to_kelvin(); }
    float to_reaumur() const    { return m_impl->to_reaumur(); }
    float to_rankine() const    { return m_impl->to_rankine(); }

    inline float as(units::celcius) const       { return to_celcius(); }
    inline float as(units::fahrenheit) const    { return to_fahrenheit(); }
    inline float as(units::kelvin) const        { return to_kelvin(); }
    inline float as(units::reaumur) const       { return to_reaumur(); }
    inline float as(units::rankine) const       { return to_rankine(); }
};

int main(int argc, char ** argv) {
    temp_converter tc(-31, units::reaumur());

    std::cout << "Celcius: " << tc.to_celcius() << std::endl;
    std::cout << "Fahrenheit: " << tc.to_fahrenheit() << std::endl;
    std::cout << "Kelvin: " << tc.to_kelvin() << std::endl;
    std::cout << "Réaumur: " << tc.to_reaumur() << std::endl;
    std::cout << "Rankine: " << tc.to_rankine() << std::endl;

    return 0;
} 
```

我知道您只问如何区分单位，但我在编写示例时被带走了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T11:56:09.310

有很多方法可以实现这一点，您可以在构造函数参数中使用枚举指定单位 - 具有单个构造函数的解决方案。在这种情况下，您将传递一个原始数字，而枚举定义了如何解释其值。

如果您真的需要不同的构造函数，您可以指定自己的摄氏温度、华氏温度和开尔文类型并将它们传递给不同的构造函数。

```
struct Fahrenheit {
    Fahrenheit (double d = 0) : t(d) {}
    double t;
};

struct Celsius {
    Celsius(double d = 0) : t(d) {}
    double t;
};

struct Kelvin {
    Kelvin(double d = 0) : t(d) {}
    double t;
};

class Temperature {
public:
    Temperature(Fahrenheit f) {
        temperature.t = (f.t + 459.67) * 5 / 9;
        cout << "Fahrenheit constructor" << endl;
    }

    Temperature(Celsius c) {
        temperature.t = c.t + 273.15;
        cout << "Celsius constructor" << endl;
    }

    Temperature(Kelvin k) : temperature(k) {
        cout << "Kelvin constructor" << endl;
    }

    double getTemperature() {
        return temperature.t;
    }

private:
    Kelvin temperature;
}; 
```

主要是：

```
Temperature t1(Kelvin(50)), t2(Fahrenheit (90)), t3(Celsius(23));
cout << t1.getTemperature() << " " << t2.getTemperature() << " " << t3.getTemperature() << endl; 
```

输出：

```
Kelvin constructor
Fahrenheit constructor
Celsius constructor
50 305.372 296.15 
```

该类将在内部将温度存储为开尔文（最科学的 IMO），并将其他单位转换为开尔文。

# android - 我如何允许用户访问我的谷歌云存储

> ID：15321877
> 
> 赞同：1
> 
> 时间：2013-03-10T11:51:10.973
> 
> 标签：android, google-api, google-cloud-storage

我正在开发一个安卓应用程序。
在 android 应用程序中，用户从我的谷歌云存储中读取文件并将文件更新到其中，尽管这不是应用程序的主要目的。
现在，我对如何允许用户访问我的谷歌云存储感到很困惑。
Google 建议使用 OAuthn 2.0 身份验证。所以，我在下面的网站上尝试了它是如何工作的。

[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

在操场上，我允许“oauthplayground”访问我的谷歌云存储。
但我不需要这一步，因为我总是希望允许 android 应用程序访问我的谷歌云存储。
思索之后，我有了使用安卓应用的授权码来访问我的谷歌云存储的想法。
但这是一个坏主意，因为授权码有过期时间。

在这种情况下，我如何允许用户访问我的谷歌云存储？
请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:04:28.153

如果隐私不是问题，您可以将存储桶上的 ACL 设置为 public-write。如果隐私是一个问题，您可以使用[签名 URL](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)功能。您可以在 GitHub 上的[storage-signedurls-python](https://github.com/GoogleCloudPlatform/storage-signedurls-python)存储库中找到使用签名 URL 功能的示例。

# java - VisualVM 结果不同于手动测量

> ID：15321882
> 
> 赞同：3
> 
> 时间：2013-03-10T11:51:47.243
> 
> 标签：java, visualvm, execution-time

我正在使用带有插件的 Eclipse 来运行 VisualVM。现在 VisualVM 说函数的方法调用总是在 180 毫秒左右返回，而如果我使用手动方法：

```
long start = System.nanoTime();
searchConnections(bsTree, connectionList);
double elapsedTimeInSec = (System.nanoTime() - start) * 1.0e-6; 
```

我得到大约 50 毫秒！为什么有区别？那么 VisualVM 中的测量值是否错误？我需要对某些项目进行测量，这就是为什么尽可能精确地测量它们很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:19:28.483

要回答您的问题，由于 JVM 的性质以及它将如何在运行时优化代码，没有一种简单的方法可以知道为什么这些值是不同的。更不用说 System.nanotime() 是一个特定于平台的实现，我不会完全相信它对任何准确的价值。

我更可能相信 VisualVM 的结果而不是内联测量，因为 VisualVM 实际上正在测量它。如果您关心基准测试或想真正专注于获得准确的结果，我建议您使用[Caliper](https://code.google.com/p/caliper/)等工具来完成此任务。

# python - Python中的动态变量

> ID：15321886
> 
> 赞同：-2
> 
> 时间：2013-03-10T11:52:05.573
> 
> 标签：python

如何在 Python 中使用用户名创建动态变量？例如有一个用户“John”，所以我将创建一些名为“John”的变量，例如变量 john1,john2,john3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:02:54.767

很容易，但可能并不理想。我会再次查看您的设计，并考虑字典是否是更好的前进方式。

但是，既然你问了这个问题，你可以使用`exec`bultin：

```
var  = 'John1'
value = 42

exec "%s = %d" % (var,value)
exec "print %s" % (var)

print (dir()) 
```

给出：

```
42
['John1', '__builtins__', '__doc__', '__file__', '__name__', '__package__', 'value', 'var'] 
```

(Python 2.7.3)

编辑：@BrianOakley 的评论有道理。使用这样的机制有点像喝酒。在当时看来是个好主意，可以暂时解决你的问题，但你知道你早上会后悔的。从长远来看，它只会引起更多的悲伤，而且你知道你的母亲不会喜欢你这样做。

# android - 某些用户的 UnsatisfiedLinkError

> ID：15321894
> 
> 赞同：0
> 
> 时间：2013-03-10T11:53:16.840
> 
> 标签：android, exception, android-ndk, java-native-interface

我有一个使用 Vuforia 增强现实 SDK 的已发布应用程序。对于我所有的设备和大多数用户来说，该应用程序的使用都没有问题。但是，我收到了一些来自用户的 UnsatisfiedLinkErrors ACRA 自动报告。我不确定如何进一步诊断。

在主要活动的静态 {} 块中，我有以下代码：

```
static {
    loadLibrary("QCAR");
    loadLibrary("MYLIB");
} 
```

没有问题..然后我还声明了一堆本机侧函数，其中第一个是：

```
public native void setX(int x);

Java_domain_mine_MainActivity_setX(JNIEnv *env, jobject, jint x) { 
```

在 MainActivity 的 onCreate() 方法中，会执行少量与 JNI 无关的代码，然后第一个 JNI 调用 setX(x) 会引发 UnsatisfiedLinkErrors 异常。

现在正如我所说，这段代码对我和我的大多数用户来说运行良好，所以我认为上面的代码是可以的。在这种情况下，我能否得出 100% 的结论，即带有 setX 函数的库没有正确加载？或者这是否意味着库还没有完成加载？

我假设加载库的静态 {} 调用在主线程上运行，因此对 setX 的调用应该在 loadLibrary 调用之后进行，因此库将完成加载尝试，失败或成功但不是他们的情况仍然在另一个线程上初始化。

有没有其他人遇到过类似的问题，如果有，您是如何处理的？

顺便说一句，我在有这个问题的设备上看不到任何相似之处。一个是 2.3.6，另一个是 4.1.1。两个不同的制造商...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T04:57:41.270

如果您正在构建不同的 ABI，例如 mips、x86、armeabi-v7a，请使用

`APP_ABI := all`在你的 mk 文件中

但我认为问题不在于那里，因为谷歌有过滤器检查 [http://developer.android.com/google/play/filters.html](http://developer.android.com/google/play/filters.html)

转到 >> 其他过滤器 >> CPU 架构 (ABI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T09:21:26.940

您的本机代码未编译。

如果你使用 eclipse 开发代码，你必须添加 NDK 支持来编译原生代码

# c# - 如何将网络摄像头视频 + 音频发送到 rtsp/rtmp 服务器

> ID：15321896
> 
> 赞同：2
> 
> 时间：2013-03-10T11:53:29.850
> 
> 标签：c#, rtsp, rtmp

我正在寻找一种将视频和音频发送到 rtsp/rtmp 服务器的方法。它应该与笔记本网络摄像头和 USB 网络摄像头兼容。我想用 C# 来做。

我找到了一些名为 rtmpclient 的库，但它看起来无法向服务器发送消息。我还发现了一个支持网络摄像头的框架，它可以为每个捕获的帧执行操作。但是我找不到任何类似的解决方案来发送带有图像的声音。

如何将视频和音频发送到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:41:23.240

查看[https://net7mma.codeplex.com/](https://net7mma.codeplex.com/)（我是作者）

它支持 Rtsp 和 Rtp 而不是 Rtmp，但是它可以通过一些更改来支持 Rtmp。根据您想要实现的目标，它可能已经能够做到......您可以将 Rtmp 数据包伪装成 RtpPacket 并且库不会在意。

如果您需要 Rtmp，请查看

[http://www.broccoliproducts.com/softnotebook/rtmpclient/rtmpclient.php](http://www.broccoliproducts.com/softnotebook/rtmpclient/rtmpclient.php)

或者

[http://www.fluorinefx.com/docs/fluorine/netconnectionrtmp.html](http://www.fluorinefx.com/docs/fluorine/netconnectionrtmp.html)

需要帮助请叫我！

# c# - 填充：SelectCommand.Connection 属性尚未初始化

> ID：15321898
> 
> 赞同：0
> 
> 时间：2013-03-10T11:53:34.750
> 
> 标签：c#, asp.net, c#-4.0

我正在使用以下代码访问 MS Access 数据库。但是我收到一条错误消息填充：SelectCommand.Connection 属性尚未初始化。我该如何解决这个问题。

```
common.cs
=========
public static bool DBConnectionStatus()
        {
            try
            {
                string conString = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=|DataDirectory|db_admin.mdb; Jet OLEDB:Database Password=admin";
                using (OleDbConnection conn = new OleDbConnection(conString))
                {
                    conn.Open();
                    return (conn.State == ConnectionState.Open);
                }
            }
            catch (OleDbException)
            {
                return false;
            }

protected void btn_general_Click(object sender, EventArgs e)
        {
            try
            {
                bool state = common.DBConnectionStatus();
                if (state == true)
                {
                    cmd = new OleDbCommand("select * from tbl_admin");
                    da = new OleDbDataAdapter(cmd);
                    DataSet ds = new DataSet();

                    da.Fill(ds); // Error Here 
                    if (ds.Tables[0].Rows.Count > 0)
                    {

                    }

                }
            }
            catch (Exception e1)
            {
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:20:49.253

> 我确实建议您将代码修改为以下内容：

```
private DataTable YourData()  
{  
    string conString = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=|DataDirectory|db_admin.mdb; Jet OLEDB:Database Password=admin";  
    DataSet ds = new DataSet();  
    using (SqlConnection conn = new SqlConnection(conString))  
    {  
        try  
        {  
            conn.Open();  
            SqlCommand command = new SqlCommand("select * from tbl_admin", conn);  
            command.CommandType = CommandType.Text;  

            SqlDataAdapter adapter = new SqlDataAdapter(command);  
            adapter.Fill(ds);  

            if (ds.Tables[0].Rows.Count > 0)  
            {  
                // do somethign here  
            }  
        }
        catch (Exception)  
        {
            /*Handle error*/  
        }  
    }  
    return ds.Tables[0];  
} 
```

> 接着：

```
protected void btn_general_Click(object sender, EventArgs e)
{          
     this.YourData(); // you will get the Data here. you can then use it the way you want it         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:33:14.380

您正在初始化`Command`用于构造 a 的 a `DataAdapter`，但两者均未设置所需的`Connection`属性：

```
cmd = new OleDbCommand("select * from tbl_admin"); // <-- no connectuion assigned
da = new OleDbDataAdapter(cmd);  // <-- no connectuion assigned 
```

所以你的例外是不言自明的。

最后一点：`using`will `dispose`/ `close`the `connection`，因此该方法`DBConnectionStatus`毫无意义。所以不要使用它，而是`using`首先使用 in ：

```
try
{
    using(var con = new OleDbConnection(connectionString))
    using(var da = new OleDbDataAdapter("elect * from tbl_admin", con))
    {
        var table = new DataTable();
        da.Fill(table); // note that you don't need to open the connection with DataAdapter.Fill
        if (table.Rows.Count > 0)
        {
            // ...
        }
    }
}
catch (Exception e1)
{
    // don't catch an exception if you don't handle it in a useful way(at least loggging)
    throw;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T05:19:53.527

根据您的要求，您还可以使用 SqlDataAdapter 代替 ExecuteReader。

```
public void ReadMyData(string connectionString)
{
    string queryString = "SELECT OrderID, CustomerID FROM Orders";
    using (OleDbConnection connection = new OleDbConnection(connectionString))
    {
        OleDbCommand command = new OleDbCommand(queryString, connection);
        connection.Open();
        OleDbDataReader reader = command.ExecuteReader();

        while (reader.Read())
        {
            Console.WriteLine(reader.GetInt32(0) + ", " + reader.GetString(1));
        }
        // always call Close when done reading.
        reader.Close();
    }
} 
```

# static-analysis - SQALE 中的“生命周期期望”是什么意思？

> ID：15321901
> 
> 赞同：0
> 
> 时间：2013-03-10T11:54:06.230
> 
> 标签：static-analysis, code-metrics

我正在浏览[这篇关于 SQALE（基于生命周期期望的软件质量评估）的 wiki 文章](http://en.wikipedia.org/wiki/SQALE)。其中的*软件质量保证*部分很清楚。但我无法理解模型的“*基于生命周期期望*”部分。有人可以清楚地解释*生命周期期望*部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:11:11.130

自从我第一次遇到 SQALE 以来，我一直怀疑创作者正在从首字母缩略词向后工作，而“生命周期期望”是他们能想出的最好的，但还没有被采用。（在软件质量领域还有其他类似缩写的指南或方法，例如[Squale](http://www.squale.org/)和[SQuaRE](http://www.iso.org/iso/catalogue_detail.htm?csnumber=35683)）。

除了最基本的软件质量模型之外，所有的软件质量模型都包含了软件产品整个生命周期（从“在某人眼中闪烁”阶段一直到最终退役）的质量概念，而不仅仅是它在初始交付时的状态。

这样的模型还承认，对软件质量的任何给定方面（例如：可维护性）的理想投资对于所有软件产品来说都是不相等的。例如，对于一个希望销售（和升级）多年的盒装式软件产品与一个在上线一个月后将停用的短期营销促销网站，人们往往会在可维护性投资方面做出非常不同的决定.

所以......所有“生命周期期望”位可能暗示的内容类似于涵盖影响产品生命周期多个部分的软件质量方面，以及允许调整/校准以适应对各种质量特征的不同期望。

如果您对 SQALE 作者的意思感兴趣（假设他们不只是试图将名称硬塞到首字母缩写词中），可以从[http://www下载 SQALE 手册中的一些提示.sqale.org/download](http://www.sqale.org/download)。他们似乎觉得他们在按时间顺序在产品生命周期中预测 ISO/IEC 9126 质量特性方面做了一些新颖而有用的事情，也许这就是这个名称所要反映的意思。

顺便说一句，如果您对软件质量感兴趣并想更深入地了解这种质量建模，我建议您看一下 SQuaRE（包括 ISO/IEC 9126 中尚无 SQuaRE 替代品的部分）。这不一定是最令人兴奋的读物，但我发现它为评估各种质量方法和工具的实用性提供了极好的背景。

# iphone - Google Analytics for iOS 中仅显示部分视图

> ID：15321902
> 
> 赞同：2
> 
> 时间：2013-03-10T11:54:07.540
> 
> 标签：iphone, ios, objective-c, xcode

我在使用适用于 iOS 的 Google Analytics SDK 时遇到了一个奇怪的问题。我能够很好地跟踪某些视图，但其他视图根本不会出现。我不确定问题是什么......这是一个常见问题吗？我的所有观点都是一致的，并且具有如下所列的 .h 和 .m 引用。他们中的一些人有 tableview 代表等。但我认为这不是问题。是否有另一种方法可以在似乎无法正常工作的情况下实现这一点？

**.h 文件：**

```
#import "GAITrackedViewController.h"

@interface ViewController : GAITrackedViewController {
    IBOutlet UILabel *label;
} 
```

**.m 文件：**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.trackedViewName = @"Title to Track";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T06:18:33.003

如果您使用的是谷歌分析 3.02，您可以这样做：

您的 .h 文件很好；

在您的 .m 文件中：

添加这个：

> `- (void)viewDidAppear:(BOOL)animated { self.screenName = @"Title to Track"; [super viewDidAppear:animated]; }`

而不是在 viewDidLoad 方法中添加 trackingViewName :)

# ruby-on-rails - rails 数据库迁移 - 多个迁移的版本号为 x

> ID：15321905
> 
> 赞同：2
> 
> 时间：2013-03-10T11:54:21.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

好的，我已经完成了迁移。我尝试通过删除重复项、对 schema.rb 等进行排序来对其进行排序，但我认为我做得不对。

当我尝试部署到 heroku，或者更确切地说是 heroku run rake db:migrate 时，我得到

多次迁移的版本号为 20130307005437

迁移在 localhost 上运行良好，但在 heroku 上运行良好。

不幸的是，当我查找迁移编号 20130307005437 时，它不在我的 db/migrate 中。

我怎样才能找到它来解决问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:42:04.203

虽然此文件可能在您的目录列表中不可见，但我怀疑您的 Git 存储库中可能已经有一个文件，这就是导致此错误出现在 Heroku 而不是本地的原因。

请确保您在该 Git 存储库中仅使用该编号进行了一次迁移。

# java - 字数示例错误

> ID：15321908
> 
> 赞同：1
> 
> 时间：2013-03-10T11:54:30.123
> 
> 标签：java, eclipse, hadoop, word-count

有谁知道如何解决这个错误？我读过我可以用 编辑`fileutils.setPermission`和删除行`checkReturnValue`，但我不知道如何。

```
13/03/10 13:04:14 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/03/10 13:04:14 ERROR security.UserGroupInformation: PriviledgedActionException as:Nesreen.Mamdouh cause:java.io.IOException: Failed to set permissions of path: \tmp\hadoop-Nesreen.Mamdouh\mapred\staging\Nesreen.Mamdouh64097525\.staging to 0700
Exception in thread "main" java.io.IOException: Failed to set permissions of path: \tmp\hadoop-Nesreen.Mamdouh\mapred\staging\Nesreen.Mamdouh64097525\.staging to 0700
at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:689)
at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:662)
at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
at org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:189)
at org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:116)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:856)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Unknown Source)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
at BigDataPackage.WordCount.main(WordCount.java:55) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:41:04.293

您可以使用以下解决方法来抑制此错误：

1.  在您的 hadoop 目录下，转到 src->core->org->apache->hadoop->fs
2.  打开 FileUtil.Java
3.  在第 685 行注释掉 checkReturnValue 函数内的代码。
4.  重新创建 hadoop-core-1.0.4.jar 并将其包含在 Eclipse 项目的构建路径中。

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:23:24.523

我相信你在 Windows 上运行这个程序。[我相信这里](https://github.com/congainc/patch-hadoop_7682-1.0.x-win)解决了类似的问题

[在此处](http://ebiquity.umbc.edu/Tutorials/Hadoop/00%20-%20Intro.html)查看有关 Windows-hadoop 安装的一些信息

# lua - 如何在一张表lua中创建多个函数？（电晕SDK）

> ID：15321910
> 
> 赞同：0
> 
> 时间：2013-03-10T11:54:32.080
> 
> 标签：lua, coronasdk, lua-table

我正在尝试创建具有 2 个不同功能的 ncar 表：setup ans main_frame

```
local ncar=
{
    img=display.newImageRect("test_car.png",50,120,true);
    x=0;
    y=0;
    frames=0;
    setup=function(self)
        return self;
    end
    main_frame=function(self)
        self.frames=self.frames+1;
        return function(event)
            self.img.x=self.x;
            self.img.y=self.y;
        end
    end

} 
```

但是编译器说，当我添加它时，他希望在第二个函数（在本例中为 main_frame）开始时看到“}”。原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:56:55.020

`setup`函数定义后需要逗号或分号。
这是因为您正在通过列出应该彼此分开的字段来创建表。

# c# - REST API 令牌认证

> ID：15321911
> 
> 赞同：10
> 
> 时间：2013-03-10T11:54:33.093
> 
> 标签：c#, api, rest, aes, token

我刚刚开始在 .NET 中开发我的第一个 REST API。由于它将是无状态的，我将使用令牌进行身份验证：

**基本思想（System.Security.Cryptography）：**

*   AES 加密 + HMACSHA256 完整性
*   令牌数据将包含具有属性的对象：用户名、发行日期和超时
*   数据库将保存用户名、散列密码和 HMAC 散列

**登录：**

*   检查凭据是否有效（用户名，将散列密码与 db 值进行比较）
*   如果为真，加密数据对象
*   在生成的令牌上使用 HMAC 并将其存储到数据库
*   将令牌（不带 HMAC）返回给用户（cookie/字符串）

**对需要身份验证的方法的请求：**

*   用户随每个请求发送令牌
*   令牌被解密
*   如果过期，报错
*   如果未过期，则使用 HMAC 并将用户名 + 生成的哈希与 db 值进行比较
*   如果 db 检查有效，则用户已通过身份验证

**在我看来，这种方法具有以下优点：**

*   即使 db 被破坏，它也不包含实际的令牌（哈希无法反转......）
*   即使攻击者拥有令牌，他也无法通过更新字段来增加过期时间，因为过期日期在令牌本身中

现在首先，我想知道这是否是一个好方法。

除此之外，我仍然没有弄清楚，在服务器上存储 AES 和 SHA256 密钥的位置（我应该对它们进行硬编码吗？如果我将它们放入 web.config 或使用机器密钥，那么在负载平衡服务器的情况下我会遇到问题， ...）。

最后，我在哪里存储 AES IV 向量，因为 Crypto.CreateEncryptor 需要它来解密？这是否意味着用户必须在每个请求中发送令牌 + IV？

我希望这有任何意义，我提前感谢您的回答。

**更新：**

好的，现在我做了更多的研究并得出了这个解决方案：

*   令牌将包含最初指定的数据（用户名、发行日期和超时）
*   [使用encrypt-then-mac](https://stackoverflow.com/a/10366194/637900)生成令牌（它包括 AES 加密数据、IV 向量 + 用于身份验证的这 2 个值的标记，使用 HMACSHA265 生成）
*   令牌标签将被写入 db
*   如果满足以下条件，用户将被验证：
    *   标签有效（令牌认证）
    *   数据可以解密
    *   令牌尚未过期
    *   标签与数据库中写入的标签匹配
    *   用户未在数据库中被阻止（令牌按需失效）
*   密钥将存储在 web.config 单独的部分中。每个服务器上都必须有相同的密钥（当然是每个应用程序）

我没有使用 FormsAuthenticationTicket，因为在 .NET 中存在以下问题：

*   相同的密钥用于不同的目的（用于查看状态、资源和表单的机器密钥）
*   .NET 使用的 mac-then-encrypt[不如 encrypt-then-mac 安全](https://crypto.stackexchange.com/questions/202/should-we-mac-then-encrypt-or-encrypt-then-mac)
*   在令牌过期之前没有内置方法[使令牌失效](http://software-security.sans.org/blog/2012/04/05/forms-authentication-remember-me-its-hard-not-too?utm_source=twitterfeed&utm_medium=twitter)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T18:49:21.973

这是该问题下评论线程的跟进。

您似乎对 OAuth 到底是什么有点困惑，所以希望我能在这里澄清一下。

OAuth 不是 Web 服务或您使用的东西。它是一种协议，描述了站点可以根据服务对用户进行身份验证的方式，而无需让站点知道用户的凭据是什么。作为附带的好处，大多数 OAuth 提供者还有一个 Web 服务来查询用户的信息，并且可以同时授予这样做的权限。

通常，您有兴趣从站点（例如 AcmeWidgets.com）的角度实现 OAuth，以便用户可以通过 Facebook 或 Google 或其他方式登录。但是，您也可以实现服务端（例如，Facebook 通常所在的位置），并允许其他人针对您进行身份验证。

因此，例如，假设您有一个 Web 服务，允许第三方站点为用户提供 Acme 品牌的小部件。您的第一个第三方实现者是流行的 MyBook.org。流程看起来像这样：

1.  有人邀请用户在其 MyBook 个人资料中使用“Acme Widgets”应用程序。
2.  用户单击该按钮，该按钮将重定向到 AcmeWidgets.com。URL 类似于：

    `http://acmewidgets.com/oauth/user?r=http%3A%2F%2Fmybook.org%2Foauth%2Fclient&appid=12345`

3.  系统会询问用户是否要允许 MyBook 访问他们的数据和配置小部件。
4.  用户单击是，Acme Widgets 随即指出用户已允许这样做。
5.  用户被重定向回 MyBook，网址如下：

    `http://mybook.org/oauth/client?token=ABCDEFG`

6.  MyBook，在服务器端，现在获取该令牌，并将 Web 服务调用 BACK 到 AcmeWidgets：

    `http://acmewidgets.com/oauth/validate?token=ABCDEFG&appid=12345&appsecret=67890`

7.  AcmeWidgets 使用标识用户的最终身份验证令牌进行回复。
8.  或者，它失败了，这意味着用户试图伪造一个令牌，或者他们拒绝了许可或其他一些失败条件。
9.  MyBook 现在可以使用令牌调用 AcmeWidgets API：

    `http://acmewidgets.com/api/provision?appid=12345&token=ABC123&type=etc`

这被称为 OAuth 舞蹈。请注意，这里有许多实现定义的东西，例如 URL、编码各种令牌的方法、令牌是否可以过期或被撤销等。

希望这可以为您解决所有问题！

# python - 安装numpy，还是有问题

> ID：15321915
> 
> 赞同：2
> 
> 时间：2013-03-10T11:55:11.127
> 
> 标签：python, numpy, python-2.7

我按照[http://nltk.org/install.html](http://nltk.org/install.html)上的说明进行操作。我的python版本是2.7。

当我尝试这样做时：

```
sudo pip install -U numpy 
```

这不起作用：

```
 File "numpy/core/setup.py", line 271, in check_types

    "Cannot compile 'Python.h'. Perhaps you need to "\

SystemError: Cannot compile 'Python.h'. Perhaps you need to install python-dev|python-devel. 
```

有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-26T12:35:26.680

[正如用户](https://stackoverflow.com/users/1320237/user)在评论中指出的那样，执行

```
sudo apt-get install python-dev 
```

在命令行中将解决此问题

# android - 以编程方式添加片段期间出现意外错误

> ID：15321917
> 
> 赞同：0
> 
> 时间：2013-03-10T11:55:19.153
> 
> 标签：android

我正在使用本教程 - 以[编程方式添加片段](http://android-er.blogspot.com/2011/12/programmatically-add-fragment.html)

我完全按照该教程中的方式进行操作，但发现此错误-

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragmentdemo/com.example.fragmentdemo.MainActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

这是我的代码

```
public class MainActivity extends FragmentActivity {

       /** Called when the activity is first created. */
       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);

           // get an instance of FragmentTransaction from your Activity
           FragmentManager fragmentManager = getSupportFragmentManager();
           FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

           //add a fragment
           simpleFragment myFragment = new simpleFragment();
           fragmentTransaction.add(R.id.myfragment, myFragment);
           fragmentTransaction.commit();

       }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

public class simpleFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view=inflater.inflate(R.layout.simple_fragment,container);
        return view;
    }

} 
```

布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="horizontal" >

   <TextView
       android:layout_width="0px"
       android:layout_weight="1"
       android:layout_height="match_parent"
       android:text="It's TextView in main Activity"
       android:background="#555555"/>
   <LinearLayout
       android:id="@+id/myfragment"
       android:layout_width="0px"
       android:layout_weight="4"
       android:layout_height="match_parent" />

</LinearLayout> 
```

布局 2

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >
   <TextView
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="It's Fragment" />
   <ImageView
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:src="@drawable/ic_launcher"/>
</LinearLayout> 
```

# macos - Clojure 仅依赖于 Java 1.5？

> ID：15321918
> 
> 赞同：6
> 
> 时间：2013-03-10T11:55:27.197
> 
> 标签：macos, clojure, jvm, version

*我希望这对 SO 来说不是题外话（我在 SO 和programmers.stackexchange 之间犹豫不决）*，但据我所知，这是一个*“编程行业独有的实用、可回答的问题”，*因此它符合常见问题解答。

您需要哪个版本的 JVM 才能运行哪个版本的 Clojure（Clojure on the JVM，这个问题与 ClojureScript 无关）？

此处的页面：http: [//clojure.org/getting_started](http://clojure.org/getting_started)指出：

> Clojure 只需要 Java 1.5 或更高版本

但这种情况总是会发生吗？

那么像 Leiningen 这样的 Clojure 生态系统呢？

基本上我想知道我是否可以指望 Clojure 能够开发一个桌面应用程序，该应用程序应该在系统上运行，包括 OS X 系统，这些系统永远不会获得 Java 6 或更新的 Java 版本（例如一些 OS X 版本 Apple 表示没有 JVM 6 会出现）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T16:34:32.793

我不在 Clojure/核心团队，所以我没有内部信息，但这是我处理这种情况的方法。

使用最新版本的 Clojure（撰写本文时为 1.5）并针对 Java 1.5 进行测试，以了解您需要做的事情*以及*您需要使用并坚持使用的任何 Clojure 库。如果 Clojure 1.5 与 Java 1.5 兼容，那么它将始终如此，因为该版本是不可变的。

我**不会**假设 1.5 之后的所有 Clojure 版本都将与 Java 1.5 兼容，而且您绝对不能假设 Clojure 库会兼容。例如，我刚刚发布了一个需要 Java 1.7 的 Clojure 库（因为它使用了 Java 1.7 中引入的 java.util.concurrent 类）。

如果您针对 Java 1.5 测试所有库和您选择的 Clojure 版本并且它们可以工作，Leiningen 会为您提供类似 maven 的依赖解决方案，那么只要您想保持应用程序运行，您就可以坚持使用该组版本化依赖项。那时您唯一的风险是非核心库的某些错误修复版本*可能*不再与 Java 1.5 兼容。这种风险与您需要使用多少非核心 Clojure 库成正比。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T05:05:04.107

如果您对使用的库有选择性，那么**以 Java 1.5 为目标当然是可行**的。

*   Clojure 对其 Java 版本要求非常保守——因此仅依赖于 1.5 版本。
*   许多库仅依赖于 Clojure 本身，因此在 1.5 JVM 上运行得非常愉快
*   一些库需要 >1.5，这些往往是更高级的库，需要与特定 Java 功能（例如更新的并发代码）进行互操作。

**注意**：我个人编写的所有应用程序/库都针对 Java 1.6，因为我认为这是一个合理的最小值，并且绝大多数基于 Java 的系统都在 1.6 或更高版本。我愿意忍受一些卡在 1.5 上的用户的潜在损失。此外，即使 Clojure 的未来版本确实放弃了 1.5，我预计它将在很长一段时间内继续支持 Java 1.6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T04:49:04.117

值得注意的是，在 Clojure 1.6 中，他们将 Java 的版本提升到了 1.6：

[Clojure 1.6 发行说明](http://dev.clojure.org/jira/secure/ReleaseNote.jspa?projectId=10010&version=10157) 包括此票证： CLJ-1268 ：[Clojure 至少需要 Java 1.6](http://dev.clojure.org/jira/browse/CLJ-1268)

因此，“**否**”是对原始发帖人问题“但是 [Clojure 仅需要 Java 1.5 或更高版本] 总是如此吗？”的答案？

# python - Python：从站点收集链接

> ID：15321922
> 
> 赞同：0
> 
> 时间：2013-03-10T11:55:41.790
> 
> 标签：python, url, hyperlink, urllib

**我的目标：**我想获取给定站点上存在的所有链接。

**我的问题：**如果网站打开并且一段时间后没有显示其他内容，则以下方法可以正常工作。

```
import lxml.html, urllib
connection = urllib.urlopen('http://www.youtube-mp3.org/?c#v=l8F4vdF-bJc')
dom =  lxml.html.fromstring(connection.read())
for link in dom.xpath('//a/@href'):
   print(link) 
```

不幸的是，上面的代码无法从一段时间后显示的网站内容中获取链接。（例如本站：[http](http://www.youtube-mp3.org/get?video_id=KMU0tzLwhbE) ://www.youtube-mp3.org/get?video_id=KMU0tzLwhbE 提供了转换完成后文件的链接，上述方法无法捕捉到该链接）

**我的问题：**如何在一段时间后获得显示在网站上的 Python 链接？

# c# - 将文件保存在特定文件夹中

> ID：15321925
> 
> 赞同：0
> 
> 时间：2013-03-10T11:55:56.447
> 
> 标签：c#, winforms, file-io

在我的 Windows 窗体项目中，我试图将生成的文件保存到名为“Invoice”的文件夹中。我可以保存到桌面，但如何保存到子文件夹？我知道这是非常简单的解决方法，但做了一些研究，但解决方案没有运气。

```
PdfWriter writer = PdfWriter.GetInstance(doc, 
    new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\" + ord + ".pdf",
    FileMode.Create)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:58:53.710

您可以像添加文件名一样添加文件夹名称：

```
PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\Invoice\\" + ord + ".pdf", FileMode.Create));
//                                                                                                                           ^^^^^^^^^^^^ 
```

您还可以使用`string.Format`来组合路径，如下所示：

```
var pathToPdf = string.Format(
    "{0}\\{1}\\{2}.pdf"
,   Environment.GetFolderPath(Environment.SpecialFolder.Desktop)
,   "Invoice"
,   ord
);
PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(pathToPdf, FileMode.Create)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:59:41.920

将 "\\" 替换为 "\Invoice\" + ord + ".pdf"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:00:48.917

如果该文件夹不存在，那么您需要创建该文件夹，然后写入

使用[Directory.CreateDirectory](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)

```
Directory.CreateDirectory Method (String)

Creates all directories and subdirectories as specified by path. 
```

例子：

```
string fileName = @"C:\Users\SomeUser\My Documents\Foo\Bar\Baz\text1.txt";
Directory.CreateDirectory(Path.GetDirectoryName(fileName));

using (FileStream fs = new FileStream(fileName, FileMode.Create))
{
    // ...
} 
```

完成后，您可以像这样写入文件夹

```
PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\Invoice\\" + ord + ".pdf", FileMode.Create)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T12:01:42.020

您还可以使用[保存文件对话框](http://msdn.microsoft.com/en-us/library/sfezx97z.aspx)并将 FileStream 的第一个参数替换为保存文件对话框返回的路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T12:04:11.957

我不喜欢把所有东西都放在一条线上……这就是我要做的

```
string myFolder = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "MyFolder");
string filePath = Path.Combine(myFolder, ord + ".pdf");
PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(filePath, FileMode.Create)); 
```

# android - 安卓。如何知道检测到的位置是来自 GPS 还是网络提供商

> ID：15321926
> 
> 赞同：4
> 
> 时间：2013-03-10T11:56:01.393
> 
> 标签：android, gps, position, location-provider

我正在尝试实现一个应用程序，它可以从 GPS 和网络提供商处感知位置并将其显示在 Google 地图上。我成功地做到了，但我有一个问题：我在我的 Activity 的 onCreate() 中获取了提供者（它扩展了 LocationListener）

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();
provider = locationManager.getBestProvider(criteria, false);
location = locationManager.getLastKnownLocation(provider); 
```

它工作正常，我的问题是，当调用 onLocationChange() 时，如果调用它的提供者是 GPS 或 NETWORK，我应该采取不同的行动。有没有办法知道哪个？为了更清楚：

何时`onLocationChanged(Location location)`被调用，是否有机会知道是哪个提供者进行了调用？我尝试`if`在提供程序字符串上使用 an ，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:07:40.720

您是否需要知道位置提供商（GPS、WIFI 或网络）或其准确性？

> [`getAccuracy()`](http://developer.android.com/reference/android/location/Location.html#getAccuracy%28%29)
> 
> 获取此位置的估计精度，以米为单位。
> 
> 我们将准确度定义为 68% 置信度的半径。换句话说，如果你以这个位置的经纬度为中心画一个圆，半径等于精度，那么有 68% 的概率是真正的位置在这个圆内。

如果你真的关心提供者，你可能会使用[`isProviderEnabled()`](http://developer.android.com/reference/android/location/LocationManager.html#isProviderEnabled%28java.lang.String%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:56:26.123

检查精度是否 <= 30m：

```
boolean isGPS = (location.getAccuracy() <= 30); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T12:34:30.143

我想你想知道哪个提供商提供了上次位置更新.....

您已将 Provider 创建为字符串，只需在代码中使用该字符串，例如 if (provider.matches("GPS")){}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-05T18:25:19.987

我看到了几个答案，虽然它们可能有用，但没有一个能解决所提出的实际问题：

> 当 onLocationChanged(Location location) 被调用时，是否有机会知道哪个提供者进行了调用？

要知道它是触发`GPS_PROVIDER`还是`NETWORK_PROVIDER`触发，`onLocationChanged`您可以使用该`getProvider()`方法（或`provider`Kotlin 中的值）：

```
@Override
public void onLocationChanged(Location location){
    //obtain a string, 'gps' or 'network', from the location
    System.out.println(location.getProvider());
} 
```

或者在 Kotlin 中：

```
override fun onLocationChanged(location: Location?) {
    println(location!!.provider)     
} 
```

文档参考[这里](https://developer.android.com/reference/android/location/Location.html#getProvider())

# php - 从数据库以文本形式返回的图像

> ID：15321931
> 
> 赞同：1
> 
> 时间：2013-03-10T11:56:22.167
> 
> 标签：php, mysql, database

我从数据库中选择了一行，行内是一个名为 image 的字段。这是一个 blob 数据类型，其中包含数据库中的图像，但是当我尝试通过 php 显示图像时，它显示图像的文本版本而不是实际图像。

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');
$player = $this->player;
$name = $player->forename . " " . $player->surname;
$handed = $player->handed;
$image = $player->image;
?>

<div class="thumbnail"><?php echo '<img src="' . $image . '" alt="' . $name . '" />'?></div> 
```

这可能是一个简单的修复，我确实看过尝试：

```
$mime = "image/jpeg";

$b64Src = "data:".$mime.";base64," . base64_encode($image["img"]);
echo '<img src="'.$b64Src.'" alt="" />';
?> 
```

但这仅输出：

```
<img src="data:image/jpeg;base64,/w==" alt=""> 
```

非常感谢任何帮助，提前谢谢你

# javascript - Expressjs / Node.js - res.redirect() 未加载页面

> ID：15321933
> 
> 赞同：3
> 
> 时间：2013-03-10T11:56:47.663
> 
> 标签：javascript, node.js, mongoose, express

我有一个页面，其中的路线`GET /team`正在加载团队列表，并且`DEL /team`正在从`/team/:key`. 因此，您导航到团队的个人资料页面并从那里删除它们，删除时它应该将您重定向到该`/team`页面。我已将日志放入控制台，它成功地删除了`team`并且奇怪的是，它说它正在加载`/team`但浏览器没有加载它。我把我的代码放在下面，有什么想法吗？

路线：

```
 app.get('/team'/*, lim("Must be logged in to see teams")*/, getAllTeams, function(req, res){
    util.log('Serving request for url [GET] ' + req.route.path);
    // Pass it the list of all Teams
    res.render('team', {'teamsList' : req.teamsList} );
  });

  app.get('/team/:key', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    Team.findByKey(req.params.key, function(err, teamData){
      if(!err && teamData){
        teamData = teamData;
        res.render('teamDetails', { 'teamData' : teamData } );
      } else {
        util.log('Error in fetching Team by key : ' + req.params.key);
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team by key ' + req.params.key
        });
      }
    });
  });

  /**
    * DEL /team/:key
    * Delete Team by key
    */
  app.del('/team/:key', getAllTeams, function(req, res) {
    util.log('Serving request for url [DEL] ' + req.route.path);    
    Team.remove({key : req.params.key}, function(err){
      var message = '';
      var retStatus = '';
      if (!err) {
        util.log('Successfully deleting Team with key: ' + req.params.key);
        message = 'Successfully deleting Team with key: ' + req.params.key;
        retStatus = 'Success';
        res.redirect('/team');
      } else {
        util.log('Error deleting Team with key: ' + req.params.key + 'Error: ' + util.inspect(err));
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team with key ' + req.params.key
        });
      }
    });
  }); 
```

JavaScript + HTML 模板：

```
 button#teamDelete.btn.btn-danger.btn-mini(type="submit", value="Delete Team") Delete
        script(type='text/javascript')
            $('#teamDelete').live('click',function(){ 
                var teamId = #{teamData.key};
                $.post('/team/' + teamId, { _method : 'delete' }, function(response) {
                    console.log(response);
                    if(response.retStatus === 'Success') {
                        if('/team' && '/team' !== "") {
                            window.location = '/team';
                        }
                    }
                });
            }); 
```

控制台日志：

```
10 Mar 11:52:01 - Serving request for url [GET] /team
10 Mar 11:52:02 - Serving request for url [GET] /team/:key
10 Mar 11:52:03 - Serving request for url [DEL] /team/:key
10 Mar 11:52:03 - Successfully deleting Team with key: 1362855941128
10 Mar 11:52:03 - Serving request for url [GET] /team 
```

获取所有团队：

```
var getAllTeams = function(req, res, next){
  Team.getAll(function(err, teamsList){
    if(!err && teamsList){
      req.teamsList = teamsList;
      return next();
    }
  });
}; 
```

Team.getAll（团队架构）

```
Team.statics.getAll = function(cb){
    var query = this.find({});
    query.sort({key : -1});
    return query.exec(cb);
  }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:08:09.100

为了快速解决方法，只需将重定向 url 添加到响应中，然后在客户端执行以下操作：

```
if (redirectUrl && redirectUrl !== "")
    window.location = redirectUrl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:53:44.367

你的请求是 POST ($.post)，你的路由是 app.del，所以它永远不会到达 app.del 路由中的 res.redirect。

为什么不使用 app.post？

**更新：**

假设 $.post 在这里发送 HTTP DEL 请求发生了什么：服务器发送没有数据的 302 响应，但浏览器从不向 GET 路由发送另一个请求，因为服务器指示它（或者 jQuery 是否也处理重定向？不确定）。res.redirect() 是实际的 HTTP 响应，而不是一些内部服务器端指令，用于将请求重新路由到另一个路由，就像您在 ASP.NET 中可以做的那样（实际上这是错误的）......路由旨在接收请求，回复回复并忘记它。您需要将路由与处理它们的实际函数分开，然后您将能够调用该函数而不是发送重定向。

**代码建议**

在 app.del('/team/:key' ...

```
...
    retStatus = 'Success';
    // res.redirect('/team');
    res.send({
      retStatus : retStatus,
      redirectTo: '/team',
      msg : 'Just go there please' // this should help
    });
... 
```

客户端在 $.post('/team/' ...

```
...
    $.post('/team/' + teamId, { _method : 'delete' }, function(response) {
        console.log(response);
        if(response.retStatus === 'Success') {
            // not sure what did you mean by ('/team' && '/team' !== "")
            // if('/team' && '/team' !== "") {
            if (response.redirectTo && response.msg == 'Just go there please') {
                window.location = response.redirectTo;
            }
        }
    });
... 
```

不确定它是否会起作用，因为我不明白你的`getAllTeams`工作以及你为什么存储`teamList`在 req.xml 中。如果你想存储在会话中，而不是假设中间件配置正确，你需要使用 req.session。如果您只需要在请求中存储它并且您的 getAllTeams 准备了此团队列表，则最好将其存储在 res.locals（如 res.locals.teamList）中。并确保您的 getAllTeams 接下来调用。所以基本上你的 getAllTeams 应该是这样的：

```
function getAllTeams (req, res, next) {
    res.locals.teamList = [/* whatever */];
    next();
} 
```

然后你可以在你的路由处理程序中使用 res.locals.teamList 而不是 req.teamList。

```
res.render('team', {teamsList : res.locals.teamsList} ); 
```

而“团队”模板也可能有问题......

**表达建议:)**

此外，您使用 Express 的方式也使得扩展/管理应用程序变得非常困难。我不记得确切的位置，但是他们在文档中的某个地方写道，Express 应该用作您的应用程序框架的基础，而不是像大多数 PHP 框架那样作为一个完整的框架。它为您提供了强大的功能和灵活性，但也使您有必要提前考虑您的应用程序架构。

express 最强大的功能是您可以让许多特定于路由的处理程序/中间件处理任何路由，并通过 next() 将控制权传递给彼此。我有一个静态表，它定义了在每条路由上使用哪些处理程序，允许在一页上查看整个应用程序，其中包含 30 条左右的路由。并且该表用于在应用程序启动时动态组装路由。它带来了很大的灵活性、可管理性（我可以在路由之间移动/复制粘贴处理程序 - 每个处理程序都表示为一个单词）和代码重用。我还在客户端中使用相同的路由定义散列进行客户端路由。

# java - 对象冒泡排序错误：NullPointerException

> ID：15321934
> 
> 赞同：0
> 
> 时间：2013-03-10T11:56:52.330
> 
> 标签：java, exception, null

当尝试对对象数组进行冒泡排序时，某些东西似乎读为 null，但它似乎不是 null 什么被读为 null？

```
for(int i =0; i<(count-1); i++)
 {
     for(int j=(i+1);i<count;j++)
     {
         if((books[j].getAuthor()).compareTo((books[i].getAuthor()))>0)
         {
             temp = books[i];
             books[i] = books[j];
             books[j] = temp;

         }

     }

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T11:57:37.890

您正在检查`i`而不是`j`在内部循环中。所以改变这个：

```
for(int j=(i+1);i<count;j++) 
```

对此：

```
for(int j=(i+1);j<count;j++) 
```

# ios - 在uiwebview前面打开全屏UIMoviePlayerController

> ID：15321936
> 
> 赞同：0
> 
> 时间：2013-03-10T11:57:11.207
> 
> 标签：ios, uiwebview

我有一个 SDK，它通过收件箱提示用户，它的提示方式如下：

```
[[UIApplication sharedApplication].keyWindow addSubview:viewToShow]; 
```

输入特定消息后，以相同的方式提示：

```
[[UIApplication sharedApplication].keyWindow addSubview:messageVC.view]; 
```

问题是当消息视图（显示 uiwebview）具有视频 url 时，并且每当视频开始并调整为全屏时，都会在这两个视图后面提示它，因此它对用户隐藏。

我的问题是，我怎样才能全屏显示视频，以便在这些视图前面正确显示？

我已经尝试注册`UIMoviePlayerControllerDidEnterFullscreenNotification`通知，并进行以下操作：

```
for (UIView *view in [[self.view superview] subviews]) {
    [view setHidden:YES];
} 
```

对于`UIMoviePlayerControllerDidExitFullscreenNotification`通知：

```
for (UIView *view in [[self.view superview] subviews]) {
    [view setHidden:NO];
} 
```

它正在工作，但我不确定解决方案有多好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T17:26:37.507

我有同样的问题，你有没有得到任何地方？我发现在我的情况下它是 NavigationController 的一个问题。通过手动创建 NavigationBar 而不是使用 NavigationController，我能够解决这个问题。

我不喜欢这个解决方案，因为 iOS7 有很多 NavigationController 特定的行为。

# javascript - 为什么要使用 next() 多次添加和删除一个类？

> ID：15321937
> 
> 赞同：0
> 
> 时间：2013-03-10T11:57:14.797
> 
> 标签：javascript, jquery, addclass, next, removeclass

我真的很想知道为什么在下面的代码`function(next)`中使用它很重要。`next()`如果没有`next()`，您只能`.open-sidebar`在添加该类后通过单击 删除一次`.header__menu__button--profile`。

我以为`next()`是用来选择元素的以下同级的！

为什么`.open-sidebar`每次单击时都需要它来删除类`.sidebar__top__button--close`？

```
$('.header').on('click','.header__menu__button--profile',function(){
    $('.sidebar').addClass('open-sidebar');
});

$('.sidebar').on('click','.sidebar__top__button--close',function() {

    if($('.sidebar').hasClass('open-sidebar'))
    {
        $('.sidebar').delay(300).queue(function(next){
            $('.sidebar').removeClass('open-sidebar');
            next();
            });         
    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:59:42.810

在这种情况下，`next`是jQuery 传递给回调的*参数*，它是对动画队列中*下一个函数的引用。*`.queue`

 *`.next()`它与从 jQuery 集合中选择下一个兄弟元素的函数无关。

使用它是`.queue`因为一旦你完成了你需要做的任何事情，你就必须告诉 jQuery 处理剩余的动画队列，即：

```
.queue(function(next) {
    // do stuff
    ...
    next();
}) 
```

或者您可以`.dequeue`改用：

```
.queue(function() {  // NB: no parameter
     // do stuff
     ...
     $(this).dequeue();
}) 
```

后者实际上是执行此操作的较旧方式 - 该参数是在 jQuery 1.4 中引入的，如果使用多个队列可以避免在和调用`next`中重复队列名称的需要。`.queue``.dequeue`*

# javascript - 字符范围内的正则表达式字符类未能通过 intellij 的 jsLint 检查

> ID：15321938
> 
> 赞同：2
> 
> 时间：2013-03-10T11:57:18.317
> 
> 标签：javascript, regex, intellij-idea, jslint

![在此处输入图像描述](../Images/16180121bd254d32b3f746435567898b.png)

纠正我的检查失败的最简单方法是什么？在 intellij（我可以找到）中没有允许字符范围内的字符类的选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T12:06:54.437

如果您想`-`在字符类中允许使用文字连字符，则需要在打开之后立即放置（请参阅[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)`[`上的“字符类”部分）或紧接在结束（我发现至少有一些语言的作品），否则它被认为表示一个范围。`]`

还要注意@IanMackinnon 对[这个 SO 问题](https://stackoverflow.com/questions/4109214/jslint-insecure-in-regular-expression)的评论（尽管经过非常简短的搜索后我找不到权威来源）：“*在字符类中显式转义连字符是另一个 JSLint 建议。* ” - 这是写在*文字*连字符的上下文。无论 jsLint 是否*需要*通过检查，这样做可能是一种很好的做法，以便在未来开发人员通过在（未转义的）连字符和左（或右）括号。

因此，我认为您的正则表达式中当前读取为 as 的部分`[\w-+\s]`应重写为`[\-\w+\s]`)。

以及随后`[\w-+]`的 as`[\-\w+]`等...

# mysql - 将动态代码传递给 MySQL 执行

> ID：15321940
> 
> 赞同：0
> 
> 时间：2013-03-10T11:57:31.933
> 
> 标签：mysql, ruby-on-rails, ruby

我正在编写一些报告代码，这需要执行复杂的 sql 代码并使用原始连接执行它。我很适合静态参数，但不确定如何处理动态值。

我准备动态sql，然后创建一个语句对象

```
st = conn.prepare(dynamic_sql_string)
st.execute(dynamic values). 
```

如何创建此动态值代码？在一个它将是

```
st.execute(@first_name) 
```

在第二种情况下，它将是

```
st.execute(@last_name). 
```

如何编写此动态代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:02:14.140

明白了，你用

```
eval "st.execute(dynamic values"). 
```

# mysql - Mysql 配置/设置

> ID：15321941
> 
> 赞同：0
> 
> 时间：2013-03-10T11:57:33.483
> 
> 标签：mysql, key, settings, configure

删除某些值时，我需要选择哪些设置来维护有序队列。我创建带有自动增量和主键的 id 表。当我第一次插入值时没关系。就像`1,2,3,4,5...`删除某些值时，顺序会发生变化`1,5,3...`。而且脚本效果不好。

一些代码：

```
if(isset($submit)){

    if($pav2 == ""){
        header('Location: index.php');  
    }

    else {

    $select = mysql_query("SELECT new_id from naujiena ORDER by new_id");
    $zym = mysql_num_rows($select);

    if($zym == 0) {
    $query = mysql_query("INSERT INTO naujiena (new_id,new_pav) VALUES ('1','$pav2')");
    header('Location: index.php');
    }

    else {
         $select2 = mysql_query("SELECT new_id from naujiena ORDER BY new_id DESC LIMIT 1");
         $max_public_id = mysql_fetch_row($select2);
         $query2 = mysql_query("INSERT INTO naujiena (new_id,new_pav) VALUES ('$max_public_id[0]'+1,'$pav2')");

         header('Location: index.php');
    }

    }
} 
```

当 new_pav 和 new_id 刚刚添加时： 示例：

```
new_id new_pav
5      some_value
4      some_value
3      some_value
2      some_value
1      some_value 
```

当我删除某些内容时，它变成：例如：

```
new_id new_pav
4      some_value
2      some_value
3      some_value
1      some_value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:13:58.457

您在这里关心的是对数据库中的表是什么的常见误解。

当您从一个空白表开始并添加几行时，主键将为您提供一系列升序的唯一值。做一个简单的`SELECT * FROM MyTable`会给你这个：

```
MyTable
ID  other columns
1   row1
2   row2
3   row3
4   row4
5   row5 
```

漂亮又漂亮，嗯？现在，当您从该表中删除行时，例如第 2 行和第 4 行，您会*期望*相同的选择为您提供：

```
MyTable
ID  other columns
1   row1
3   row3
5   row5 
```

不幸的是，这*不是*它的工作原理，你可能会得到这个：

```
MyTable
ID  other columns
1   row1
5   row5
3   row3 
```

没那么漂亮。原因很简单：当您运行`SELECT * FROM MyTable`查询时，查询返回的行的顺序是*undefined*。除非您指定特定的顺序，否则数据库可能会*按照它想要的任何顺序*给出 tham 。

如果您确实希望行具有某种一致的顺序，则需要*这样说*。

`SELECT * FROM MyTable ORDER BY id`会给你你正在寻找的东西。

现在为什么它首先起作用？为什么在你删除东西之前这些行是完美的？它恰好是数据库可以从新表中检索数据的最有效顺序——仅此而已。如果数据库有任何更有效的方法来执行此操作，那么它首先会以不同的顺序开始。

**编辑：**事实证明，自从您进行编辑以来，您的问题与我最初的想法不同。您似乎担心当您删除具有最高 id 的行时，新行将获得相同的 id。那是因为你让整个事情变得比它需要的更复杂。

第 1 步：更改数据库

将您的`new_id`列设置`INT AUTO_INCREMENT PRIMARY KEY`为此[SQL Fiddle中所示](http://sqlfiddle.com/#!2/fbb66/1/0)

第 2 步：将您的代码更改为（还修复了原始代码的 SQL 注入问题）

```
if(isset($submit)){

    if($pav2 == ""){
        header('Location: index.php');  
    }
    else {
         $query2 = mysql_query("INSERT INTO naujiena (new_id,new_pav) VALUES (0,'". mysql_real_escape_string($pav2)."')");

         header('Location: index.php');
    }

    }
} 
```

# r - 使用公式界面时出现问题的随机森林训练运行时

> ID：15321947
> 
> 赞同：8
> 
> 时间：2013-03-10T11:58:29.870
> 
> 标签：r, performance, machine-learning, formula

[从http://www.kaggle.com/c/icdar2013-gender-prediction-from-handwriting/data](http://www.kaggle.com/c/icdar2013-gender-prediction-from-handwriting/data)运行随机森林示例，以下行：

```
forest_model <- randomForest(as.factor(male) ~ ., data=train, ntree=10000) 
```

需要几个小时（不确定它是否会结束，但这个过程似乎确实有效）。

该数据集有 1128 行和约 7000 个变量。

是否可以估计随机森林训练何时结束？我可以以某种方式分析 R 以获得更多信息吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T13:58:11.733

发现了问题，在 randomForest 中使用公式造成了巨大的性能下降。

有关此以及如何估计随机森林运行时间的更多信息，请参见： [https](https://stats.stackexchange.com/questions/37370/random-forest-computing-time-in-r) ://stats.stackexchange.com/questions/37370/random-forest-computing-time-in-r和[http://www.gregorypark。 org/?p=286](http://www.gregorypark.org/?p=286)

这是最终代码：

```
forest_model <- randomForest(y=train$male, x=train[,-2], ntree=10000,do.trace=T) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T12:12:00.297

控制收敛的一个想法是使用`do.trace`详细**模式**

```
iris.rf <- randomForest(Species ~ ., data=iris, importance=TRUE,
+                         proximity=TRUE,do.trace=TRUE)
ntree      OOB      1      2      3
    1:   8.62%  0.00%  9.52% 15.00%
    2:   5.49%  0.00%  3.45% 13.79%
    3:   5.45%  0.00%  5.41% 11.76%
    4:   4.72%  0.00%  4.88%  9.30%
    5:   5.11%  0.00%  6.52%  8.89%
    6:   5.56%  2.08%  6.25%  8.33%
    7:   4.76%  0.00%  6.12%  8.16%
    8:   5.41%  0.00%  8.16%  8.16%
 ....... 
```

# php - Chrome HTML 正文扰乱了标签并破坏了设计

> ID：15321948
> 
> 赞同：0
> 
> 时间：2013-03-10T11:58:32.837
> 
> 标签：php, html, css, google-chrome, google-chrome-devtools

我在使用 chrome 时遇到了这个网页的问题。当我访问其他页面时它很好，但是当我访问我的 reservation.php 页面时，我在检查视图中的 html 中插入了一个空白空间，但在源视图中很好。它破坏了我的设计，我尝试了很多修复，但仍然无法正常工作。它破坏了我的网页设计。这个问题只发生在chrome和尝试过的opera中，ie和firefox它工作得很好。

**HTML 源视图 网页** ![在此处输入图像描述](../Images/16247a96b989000e14640e67fe3f36fe.png) **视图** ![在此处输入图像描述](../Images/d07d9b1c2344397aab2ae4d48c379b05.png)

**CHROME INSPECT**
正如您在此处看到的，元数据插入到正文中，元数据之前有一个空白空间。 ![在此处输入图像描述](../Images/4c6751f5e3762a9d744626b7fcab3523.png)

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta charset="utf-8">
    <!--meta name="viewport" content="width=device-width, initial-scale=1" /-->
    <title>Vasquez Compound</title>
    <link rel="stylesheet" type="text/css" href="http://localhost//public/styles/reset.css" />
    <link rel="stylesheet" type="text/css" href="http://localhost//public/styles/default.css" />
    <link rel="stylesheet" type="text/css" href="http://localhost//public/styles/style.css" />
    <link rel="stylesheet" type="text/css" href="http://localhost/public/scripts/javascripts/jquery-ui/themes/jquery.ui.all.css">
        <link rel="stylesheet" type="text/css" href="http://localhost//public/styles/reserved-units.css" />
    <link rel="icon" type="image/png" href="http://localhost//public/favicon.png" />
    <!--[if gte IE 9]>
      <style type="text/css">
        * {
           filter: none;
        }
      </style>
    <![endif]-->
    <!--[if lt IE 9]>
    <script language="javascript" type="text/javascript" src="public/scripts/javascripts/html5.js"></script>
    <![endif]-->
    <script language="javascript" type="text/javascript" src="http://localhost//public/scripts/javascripts/jquery.1.8.2.js"></script>
    <script language="javascript" type="text/javascript" src="http://localhost/public/scripts/javascripts/jquery-ui/jquery.ui.core.js"></script>
    <script language="javascript" type="text/javascript" src="http://localhost/public/scripts/javascripts/jquery-ui/jquery.ui.widget.js"></script>
    <script language="javascript" type="text/javascript" src="http://localhost/public/scripts/javascripts/jquery-ui/jquery.ui.datepicker.js"></script>
    <script language="javascript" type="text/javascript" src="http://localhost//public/scripts/javascripts/main.js"></script>
    </head>
    <body>
    <noscript>
        <div id="no-script-browser">
            <h1>
                Opss its seems your browser this likes our site. Activate your Javascript to  view our website.
                <br> You will be redirected to google.com after 10 seconds.
            </h1>
        </div>
        <div id="no-script-browser-overlay">
            <table> <tr><td></td></tr> </table>
        </div>
        <meta http-equiv="refresh" content="10;url=http://google.com/">
    </noscript>
    <div id="wrapper">
      <div id="header">
        <div id="topbar">
          <div id="topbar-content">
            <div class="left upper">For tenants click here to <a href="login.php">LOGIN</a><!--OR <a href="">CREATE AN ACCOUNT</a>--> </div>
            <div class="left mleft10"> 
                <a href="contact-us.php">SUPPORT</a> <!--| <a href="">MY UNIT</a!--> | 
                <a href="reservation.php">RESERVED UNITS (<span id="session-reserved-units">1</span>)</a> </div>
            <div class="right">
              <form method="get">
                <input type="text" name="q" id="q" placeholder="Keyword to search" />
                <input type="submit" value="Search" />
              </form>
            </div>
          </div>
          <div class="clear"></div>
        </div>
        <div id="nav">
          <ul>
            <li id="home"><a href="http://localhost/"><img src="http://localhost//public/styles/images/home.png" width="24" height="26"></a></li>
            <li><a href="units.php">Units</a></li>
            <li><a href="locations.php">Locations</a></li>
            <li><a href="reservation.php" class="selected">Reservation</a></li>
            <li><a href="quote.php">Make a Quote</a></li>
            <li><a href="contact-us.php">Contact Us</a></li>
            <li><a href="about.php">About</a></li>
          </ul>
          <div class="clear"></div>
        </div>
            <div id="banner">
          <div class="left"> 
                    <img src="http://localhost//public/images/banners/reservation.png" width="745" height="250">
          </div>
          <div class="right">
            <ul id="utypes">
              <li> <a href="" class="odd-type">Bungalows</a> </li>
              <li> <a href="" class="even-type">Duplex</a> </li>
              <li> <a href="" class="odd-type">Condominiums</a> </li>
              <li> <a href="" class="even-type">Apartments</a> </li>
            </ul>
          </div>
          <div class="clear"> </div>
        </div>
          </div>
      <div id="contents"> <script language="javascript" type="text/javascript">
        $(document).ready(function(e) {
            $("input.mau").click(function(e) {
                $("input.mau").each(function(index, element) {
                    element.disabled = true;
                });
                $("input.umau").each(function(index, element) {
                    element.disabled = false;
                });
                $("input.chk").each(function(index, element) {
                    element.checked = true;
                });
            });
            $("input.umau").click(function(e) {
                $("input.mau").each(function(index, element) {
                    element.disabled = false;
                });
                $("input.umau").each(function(index, element) {
                    element.disabled = true;
                });
                $("input.chk").each(function(index, element) {
                    element.checked = false;
                });
            });
            $("input.chk").each(function(index, element) {
                $(element).click(function(e) {
                    $("input.mau").each(function(i, el) {
                        el.disabled = $("input.chk:checked").get().length  == $("input.chk").get().length ? true : false;
                    });
                     $("input.umau").each(function(i, el) {
                        el.disabled = $("input.chk:checked").get().length  > 0 ? false : true;
                    });
                });
            });
        });
    </script>
    <div class="page-contents">
      <div id="reserved-units">
        <form method="post">
        <div class="controls"> 
            <input type="button" value="Check All Units" class="mau" />
            <input type="button" value="Uncheck All Units" class="umau"  disabled />
            <input type="submit" value="Post Reservations" class="right" name="post-reservation"  />
            <input type="submit" value="Remove Selected Units" class="right" name="remove-units"  />
        </div>
            <div class="img-unit"> <img src="http://localhost//public/images/units/d1f92cf44b49d8ecaeda81ded08c8f97.jpg" class="unit-image">
          <div class="label">
            <input type="checkbox" value="1" class="chk" name="uid[]" />
            <b title="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus quis lectus metus, at posuere neque. Sed pharetra nibh eget orci convallis at posuere leo convallis.Unit 1"> Lorem Ipsum Dolor Sit Ame... </b> </div>
        </div>
            <span class="clear"></span>
        </form>
      </div>
    </div>

    </div>
    <div id="footer"> 
        <div id="footer-content">
            <div class="left pd10 ftw">
                <h4>HOUSE TYPES</h4>
                <hr />
                <ul>
                  <li> <a href="" class="odd-type">Bungalows</a> </li>
                  <li> <a href="" class="even-type">Duplex</a> </li>
                  <li> <a href="" class="odd-type">Condominiums</a> </li>
                  <li> <a href="" class="even-type">Apartments</a> </li>
                </ul>
            </div>
            <div class="left pd10 ftw">
                <h4>Services</h4>
                <hr />
                <ul>
                  <li> <a href="" class="odd-type">Make a quote</a> </li>
                  <li> <a href="" class="even-type">Maintainance</a> </li>
                  <li> <a href="" class="odd-type">Emergency response</a> </li>
                  <li> <a href="" class="even-type">Other Services</a> </li>
                </ul>
            </div>
             <div class="right pd10">
                <h4>Contact Us</h4>
                <hr />
                <form method="post" action="contact-us.php" id="frmFooterContactForm">
                <ul class="left">
                  <li><input type="text" name="fname" placeholder="Enter full name" required /></li>
                  <li><input type="email" name="email" placeholder="Enter valid email address" required /></li>
                  <li><input type="text" name="mno" placeholder="Enter mobile number" required /></li>
                  <li><input type="text" name="subject" placeholder="Enter subject" required /></li>
                </ul>
                <div class="right rbox">
                <textarea placeholder="Enter your message" name="content" required></textarea>
                </div>
                <input type="submit" name="smsg" id="smsg" value="Send Message" required class="clear" />
                </form>
            </div>
          </div>
           <div class="clear align-center" id="end">  
                &copy; UVCCS Students &trade; All Rights Reserved 2013-2014        </div>
      </div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:04:28.073

您的 HTML 中的某个地方一定有错误，因为在 Chrome 检查器中，`<meta>`and`<link>`标签放在 . `<body>`，而不是`<head>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:26:38.293

好的..我找到了解决方案..似乎有一些看不到的未知字符..我不知道它是如何到达那里的，但是我尝试复制代码并粘贴到记事本++中，然后从记事本++复制代码然后替换php文件..它解决了...

感谢您的所有帮助和建议...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T16:00:44.787

我遇到了同样的问题，我的所有代码都符合 W3C 标准，并且在 Chrome 检查器中，所有头部内容都在 body 标记中。经过研究，我发现当文件使用 UTF-8 WITH BOM 编码时，Chrome Inspector 会出错。

要解决此问题，请使用**UTF-8 WITHOUT BOM**对文件进行编码。

# json - 将 Json 过滤成 JSP

> ID：15321952
> 
> 赞同：0
> 
> 时间：2013-03-10T11:58:58.583
> 
> 标签：json, jsp, parsing, filtering

嗨！我需要知道如何将一些 json 数据过滤/解析到 JSP 中。这将是为了创建一种“小”API。我通过 PHP 做了一个测试，事情就是这样。我向这样的 URL 发送参数 records.php?artist='tame impala'

在我的 php 文件中，首先我继续修剪参数艺术家，然后我将所有记录与 JSON 进行比较，最后我只打印来自“驯服黑斑羚”的记录。

是否可以在没有任何 servlet 或类似文件的 JSP 文件中执行此操作？

非常感谢！

# delphi - 使用动态路径指向 DLL

> ID：15321959
> 
> 赞同：1
> 
> 时间：2013-03-10T11:59:37.320
> 
> 标签：delphi, delphi-xe3

我的问题不是导出函数，而是导入它。我确信函数和 DLL 都可以工作，因为我使用了硬编码路径来指向 DLL。

这是目前的工作：

```
function RoamingAppDataPath: String; external 'C:\Users\Peter\AppData\Roaming\ss\Application\ss.dll'; 
```

但是我需要用动态值指向 DLL，所以我试图做的是

1.  声明一个全局变量（DLLPath: String）
2.  为 DLLPath 分配值 - RoamingAppDataPath+'\ss\Application\ss.dll'

注意： RoamingAppDataPath 是一个输出漫游应用数据文件夹路径的函数。

我试图运行的代码是：

```
function RoamingAppDataPath: String; external DLLPath; 
```

当我编译代码时，Delphi 告诉我它需要一个常量表达式：

```
E2026 Constant expression expected 
```

解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:30:01.023

您必须在运行时绑定，这意味着您需要使用 LoadLibrary 和 GetProcAddress：

```
var
  lib: HMODULE;
  RoamingAppDataPath: function: string;

lib := LoadLibrary(dllfilename);
if lib=0 then 
  RaiseLastOSError;
Pointer(RoamingAppDataPath) := GetProcAddress(lib, 'RoamingAppDataPath'); 
```

然后你可以调用它：

```
radp := RoamingAppDataPath; 
```

一些评论：

*   当它存在于标准系统库中时，我不知道为什么要编写此函数。
*   跨 DLL 边界使用字符串可能会失败。您需要使用 ShareMem 并确保所有代码都使用相同的 Delphi 版本构建。最好在调用代码中分配缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T12:40:35.320

即使可以使用变量，也无法为 DLLPATH 设置值，因为如果不能使用静态 DLL，则不会使用初始化。如果要定义 DLL 的路径，则必须使用动态加载。

```
 procedure Test;external 'Notexists.DLL';
var
  Form2: TForm2;

implementation

{$R *.dfm}
procedure TForm2.Button1Click(Sender: TObject);
begin
  test;
end;

initialization
Showmessage('Hallo'); // will never be seen if test is used. 
```

# asp.net-mvc - 为什么 ASP.NET MVC4 新的演示 Internet 应用程序在操作过滤器中初始化成员资格？

> ID：15321965
> 
> 赞同：0
> 
> 时间：2013-03-10T12:00:20.533
> 
> 标签：asp.net-mvc

我正在查看使用 SimpleMembership 的最新 ASP.NET MVC4 互联网应用程序。我看到以下内容放置在操作过滤器中：

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    } 
```

有人能告诉我为什么它是这样编码的吗？为什么不直接调用 global.asax 中的初始化代码，它会在每个应用程序启动时运行？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:09:38.317

我不知道它为什么放在那里。但是，如果您希望您的`Membership`函数执行良好，那么您将需要调用该方法一次。因此，如果您`Membership`在除 in 之外的任何地方调用任何相关方法`AccountController`，请确保您首先调用了`LazyInitializer`.

我相信该模板使用了一个属性进行数据库初始化，因此如果初始化失败，该站点的未经过身份验证的部分仍然可以工作。

对于大多数实际目的，最好只在`Application_Start`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:11:49.917

将初始化放在 ActionFilter 中对于代码重用来说会更好一些。您可以将控制器放在自己的程序集中（假设您使用 DI 容器来查找控制器），然后在多个项目中重用它。由于初始化是在控制器的过滤器上完成的，因此您无需确保它已在每个项目中注册，因为它会自动被拾取。

另一个原因是延迟初始化 - 如果您的站点大部分是匿名的，那么您不需要调用这个初始化例程。当然，它可能不会做太多，但这意味着初始加载延迟仅发生在需要登录的页面上，而不是您的主页上。

# gcc - “对‘pantheios_log_3_no_test’的未定义引用”

> ID：15321970
> 
> 赞同：0
> 
> 时间：2013-03-10T12:01:03.590
> 
> 标签：gcc, linker-errors, ld, pantheios

我在使用 gcc4.6 与 Linux 上的 Pantheios 链接时遇到问题，出现以下错误：

```
In function `pantheios::internal::log_dispatch_3(int, unsigned int, char const*, unsigned int, char const*, unsigned int, char const*)':
sig_writing_sink.cpp:(.text._ZN9pantheios8internal14log_dispatch_3EijPKcjS2_jS2_[pantheios::internal::log_dispatch_3(int, unsigned int, char const*, unsigned int, char const*, unsigned int, char const*)]+0x6d): undefined reference to `pantheios_log_3_no_test'
collect2: ld returned 1 exit status 
```

我正在链接：

*   `libpantheios.1.core.gcc46.mt.a`
*   `libpantheios.1.fe.simple.gcc46.mt.a`
*   `libpantheios.1.be.fprintf.gcc46.mt.a`
*   `libpantheios.1.bec.fprintf.gcc46.mt.a`
*   `libpantheios.1.util.gcc46.mt.a`
*   `libpantheios.1.appl.gcc46.mt.a`
*   `libpantheios.1.core.gcc46.mt.a`

在哪里`pantheios_log_3_no_test`？
我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:29:16.960

事实证明，在 gcc 中，符号仅向前链接，因此给定库中的依赖符号将仅从链接列表中跟随它的库中解析。有关更多详细信息，请参见[此处。](https://stackoverflow.com/questions/45135/linker-order-gcc)
通过将其他静态链接的库移动到Pantheios*之前，链接器成功了。*

# javascript - Three.js 和 colladaloader

> ID：15321971
> 
> 赞同：4
> 
> 时间：2013-03-10T12:01:14.433
> 
> 标签：javascript, three.js

我是 Three.JS 的新手，正在尝试通过 ColladaLoader 将一个非常简单的（单个立方体）Sketchup 模型加载到 Three.JS 中，我没有收到任何错误，但没有显示任何内容：

```
var renderer = new THREE.WebGLRenderer();
var loader = new THREE.ColladaLoader();
var scene = new THREE.Scene();
var camera = new THREE.Camera();
loader.load('Test.dae', function (result) {
  scene.add(result.scene);
});
camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 1, 10000 );
camera.position.set(0, 0, 5);
scene.add(camera);
renderer.render(scene,camera); 
```

任何人都可以发现任何直接错误吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:37:25.907

固定的。虽然我已经声明了渲染器，但我没有将它附加到文档中。以下代码有效：

```
var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 0.1, 1000);
var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
camera.position.set(0, 0, 4);
var loader = new THREE.ColladaLoader();
loader.load("test.dae", function (result) {
    scene.add(result.scene);
});

function render() {
    requestAnimationFrame(render);
    renderer.render(scene, camera);
}
render(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:05:39.210

您需要在加载 collada 后重新渲染场景。就像是

```
loader.load('Test.dae', function (result) {
  scene.add(result.scene);
  renderer.render(scene,camera);
}); 
```

此外：

*   相机可能在您的几何图形内。默认情况下，面是单面的，从背面/内部看时它们是不可见的。您可以尝试更改相机或对象位置和/或设置 material.side = THREE.DoubleSide 以便从正面和背面都可以看到面部。
*   模型的比例可能会很大，因此它可能太小或太大而无法显示。尝试不同的相机位置（例如 z= -1000, -100, -10, -1, 1, 10, 100, 1000）并使用 lookAt() 将其指向 0,0,0 或者，我认为 colladaloader 有现在的比例设置，不确定。
*   加载器默认位置为 0,0,0，因此是世界/场景的中心。这并不一定意味着屏幕中心，取决于相机。在某些情况下，Collada 模型本身可以使中心远离可见对象，因此当它被放置在场景中时，它可以有效地“偏离中心”。不过，这不太可能。
*   场景中没有任何灯光。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T01:57:53.953

```
 loader.load('test.dae', function colladaReady(collada) {

    localObject = collada.scene;

    localObject.scale.x = localObject.scale.y = localObject.scale.z = 2;
            localObject.updateMatrix();
scene.add(localObject); 
```

我认为您需要在 collada 场景中添加对象，否则您添加的对象的缩放可能存在问题，缩放它然后更新对象的矩阵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T08:59:46.767

如果您仍然遇到问题，可能是某些版本的 IE 会阻止您下载本地文件（您的 Test.dae），因此可能值得尝试使用 Firefox 或将您的代码放在服务器上。

# php - 如何在php中将带数字的字符串转换为数组？

> ID：15321978
> 
> 赞同：-2
> 
> 时间：2013-03-10T12:02:15.060
> 
> 标签：php

我有字符串：“33a49bc12d”，我想要这个数组 0 => 33、1=>a、2=>49、3=>bc、4=>12、5=>d。这不是我的本事。你可以帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:11:38.127

你可以从这个开始：

```
<?php
$text = "33a49bc12d";
preg_match_all("/([\d]+|[a-z]+)/i", $text, $out);
print_r($out[0]);
?> 

Array
(
    [0] => 33
    [1] => a
    [2] => 49
    [3] => bc
    [4] => 12
    [5] => d
) 
```

# ios - 退出程序（后台进入）后是否可以保持变量？

> ID：15321979
> 
> 赞同：0
> 
> 时间：2013-03-10T12:02:24.927
> 
> 标签：ios, objective-c

我有一个标签，该用户将在该用户点击按钮后设置数字，该数字将存储在数字变量中。在**appdelegate.m**我想**访问**已设置的数字。例如，标签的输入是**9:25** ，这就是我所做的。我认为在 appdelegate.m 中声明我的视图控制器是错误的，但我不知道还能做什么。

ShowOfNotificationViewController.h

```
@property(strong,nonatomic) NSString *numbers; 
```

ShowOfNotificationViewController.m

```
@implementation ShowOfNotificationViewController
@synthesize numbers;

- (IBAction)setTime:(id)sender {
numbers=TimeLabel.text;
} 
```

ShowOfNotificationAppDelegate.m

```
#import "ShowOfNotificationAppDelegate.h"
#import "ShowOfNotificationViewController.h"

    - (void)applicationDidEnterBackground:(UIApplication *)application
    {
        ShowOfNotificationViewController *m;

         NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
        [f setNumberStyle:NSNumberFormatterDecimalStyle];
        NSArray *listItems = [m.numbers componentsSeparatedByString:@":"];
        NSNumber * myNumber1 = [f numberFromString:listItems[0]];
        NSNumber * myNumber2 = [f numberFromString:listItems[1]];
        NSLog(@"%@",myNumber1);
        NSLog(@"%@",myNumber2);
    } 
```

输出为空，空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:14:22.157

```
<!-- @CodaFi: here you are --> 
```

**如果它不是敏感数据，**您可以将值存储在由操作系统持久保存到磁盘的用户默认值中：

```
[[NSUserDefaults standardUserDefaults] setObject:self.numbers forKey:@"Numbers"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

并检索它：

```
self.numbers = [[NSUserDefaults standardUserDefaults] objectForKey:@"Numbers"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:18:38.530

伙计，您应该分配初始化 ShowOfNotificationViewController 并将其存储到属性或某个类 ShowOfNotificationViewController * var...

你不能希望简单的 ShowOfNotificationViewController *m; 将允许您的应用程序知道您想要获取特定元素....

您只是在定义一个 var，但您没有分配它……程序应该如何处理它？

试着想一想：m应该是一个人，但他不在这里！他在哪里？谁知道。当然，当你说 m，你叫什么名字时，没有人会回答你。（无效的）

但如果你说 m = giovanni; 然后你问我他的名字他会回答“乔瓦尼”！

你需要做的是 ShowOfNotificationViewController *m = some ShowOfNotificationViewController 之前创建的；

这会奏效。

# c# - TimeSpan.ToString() 返回字符串，如 (d:hh:mm:ss)

> ID：15321980
> 
> 赞同：5
> 
> 时间：2013-03-10T12:02:39.847
> 
> 标签：c#, timespan

```
TimeSpan Ts = new TimeSpan(5, 4, 3, 2);
return Ts.ToString("?"); 
```

我应该用问号替换什么表达式来获得这种格式： ***5d:4h:3m:2s***？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T12:10:03.783

```
TimeSpan timeSpan = new TimeSpan(5, 4, 3, 2);
string str = timeSpan.ToString(@"d\d\:h\h\:m\m\:s\s", System.Globalization.CultureInfo.InvariantCulture); 
```

有关如何格式化s ，请参阅[自定义 TimeSpan 格式字符串。](http://msdn.microsoft.com/en-us/library/ee372287.aspx)`TimeSpan`

虽然请注意，负`TimeSpan`s 无法与正 s 区分开来。它们看起来像是被[否定](http://msdn.microsoft.com/en-us/library/system.timespan.negate.aspx)了。因此`-new TimeSpan(5,4,3,2)`仍将显示为`5d:4h:3m:2s`。如果你想显示负数，你应该通过`TimeSpan`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T12:17:37.250

您可以通过使用当前代码来完成此操作

```
TimeSpan Ts = new TimeSpan(5, 4, 3, 2);
var RetValue = string.Format("{0}d:{1}h:{2}m:{3}s",
    Ts.Days,
    Ts.Hours,
    Ts.Minutes,
    Ts.Seconds); 
```

将其作为格式化结果产生`"5d:4h:0m:2s"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T12:20:58.890

这对我有用

```
"d'd:'h'h:'m'm:'s's'" 
```

在这里找到[http://msdn.microsoft.com/en-us/library/ee372287.aspx](http://msdn.microsoft.com/en-us/library/ee372287.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-25T02:24:49.897

这是一个 TimeSpan 扩展方法，它将隐藏空的大时间部分。

```
public static string ToShortString(this TimeSpan Ts)
{
    if(Ts.TotalDays > 1d)
        return Ts.ToString("d'd:'h'h:'m'm:'s's'");

    if(Ts.TotalHours > 1d)
        return Ts.ToString("h'h:'m'm:'s's'");

    if(Ts.TotalMinutes > 1d)
        return Ts.ToString("m'm:'s's'");

    if(Ts.TotalSeconds > 1d)
        return Ts.ToString("s's'");

    if(Ts.TotalMilliseconds > 1d)
        return Ts.ToString("fffffff'ms'");

    return Ts.ToString();
} 
```

# android - 媒体播放器不播放时如何隐藏搜索栏？

> ID：15321981
> 
> 赞同：1
> 
> 时间：2013-03-10T12:02:43.347
> 
> 标签：android, media-player, seekbar

我正在开发一个媒体播放器，我只想在播放歌曲时显示搜索栏，当歌曲没有播放或暂停时，我想隐藏搜索栏，请帮助实现这一点。我正在 htc 野火上开发 android 应用程序，其中运行着 android froyo 2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T19:07:36.063

使用类似的东西：

```
 if(mediaPlayer.isPlaying() == false)
    {
       seekBar.setVisibility(View.GONE);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T18:59:19.070

```
setVisibility(View.GONE); 
```

调用搜索栏应该可以解决问题。随后，要使其在其他操作调用期间重新出现：

```
setVisibility(View.VISIBLE); 
```

希望这可以帮助。

# java - 在 JBOSS 上使用 CXF 处理 SOAP 请求时出现 java.lang.ClassNotFoundException

> ID：15321983
> 
> 赞同：0
> 
> 时间：2013-03-10T12:03:03.317
> 
> 标签：java, security, jboss, cxf, ws-security

我们有一个使用 CXF 实现并在 JBoss 5.1 上运行的 Web 服务。最近我们将 CXF 从 2.3.1 升级到了 2.5.9。我们还在我们的服务中添加了 WS-Policy，因此来自客户端的 soap 请求包括一个 x509 证书令牌。但是，在处理请求时，框架`ClassNotFoundException`在尝试加载`org.apache.ws.security.components.crypto.Merlin`时抛出，位于`wss4j-1.6.9.jar`. 这是异常的完整调用堆栈：

```
java.lang.ClassNotFoundException: org.apache.ws.security.components.crypto.Merlin 
at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:303)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
at org.apache.ws.security.util.Loader.loadClass(Loader.java:252)
at org.apache.ws.security.util.Loader.loadClass(Loader.java:245)
at org.apache.ws.security.util.Loader.loadClass(Loader.java:239)
at org.apache.ws.security.components.crypto.CryptoFactory.getInstance(CryptoFactory.java:109)
at org.apache.ws.security.components.crypto.CryptoFactory.getInstance(CryptoFactory.java:78)
at org.apache.cxf.ws.security.wss4j.PolicyBasedWSS4JInInterceptor.getSignatureCrypto(PolicyBasedWSS4JInInterceptor.java:383)
at org.apache.cxf.ws.security.wss4j.PolicyBasedWSS4JInInterceptor.checkAsymmetricBinding(PolicyBasedWSS4JInInterceptor.java:221)
at org.apache.cxf.ws.security.wss4j.PolicyBasedWSS4JInInterceptor.computeAction(PolicyBasedWSS4JInInterceptor.java:585)
at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.handleMessage(WSS4JInInterceptor.java:238)
at org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor.handleMessage(WSS4JInInterceptor.java:100)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122)
at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:233)
at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:209)
at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:189)
at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:223)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:143)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:199)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Thread.java:619) 
```

有趣的是，同一个 JAR 中的其他类已成功加载。例如`org.apache.ws.security.util.Loader`，可以在调用堆栈中看到。我试图将 JAR 放在我的 WAR 和 JBoss lib 文件夹中，但它没有解决任何问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:45:29.057

找到了解决方案：从属性文件中获取的类名有一个尾随空格。删除空格后，加载类没有问题。

# python - 如何在python 33中使用过滤器功能

> ID：15321986
> 
> 赞同：1
> 
> 时间：2013-03-10T12:03:31.240
> 
> 标签：python, list

我现在开始学习python，但过滤功能有问题。

如果我跑

```
list=list(range(10))

def f(x): return x % 2 != 0

print(((filter(f,list)))) 
```

我会得到结果是

```
filter object at 0x00000000028B4E10

Process finished with exit code 0 
```

如果我将代码修改为

```
list=list(range(10))

def f(x): return x % 2 != 0

print(list(filter(f,list))) 
```

我得到的结果将是

```
Traceback (most recent call last):
   File "C:/Users/Vo Quang Hoa/PycharmProjects/HelloWorld/Hello.py", line 6, in <module>
     print(list(filter(f,list)))
TypeError: 'list' object is not callable

Process finished with exit code 1 
```

发生了什么。如何获取列表 1 3 5 7 9 感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:05:34.703

您重命名`list`了 ，赋予它不同的值。不要那样做，你隐藏了内置类型。更改您的代码以使用不同的名称：

```
some_list = list(range(10))

def f(x): return x % 2 != 0

print(list(filter(f, some_list))) 
```

然后`filter()`工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T12:08:38.823

您的主要问题是您调用了`list`变量 um, `list`。您不能使用与其他对象相同的名称！将您的列表称为其他名称，和/或使用大写驼峰式命名约定；

```
Fred=list(range(10))

def f(x): return x % 2 != 0

print(list(filter(f,Fred))) 
```

# opengl - 使用 GLSL 实现立方体贴图

> ID：15321991
> 
> 赞同：0
> 
> 时间：2013-03-10T12:03:37.883
> 
> 标签：opengl, glsl

我目前使用一些着色器代码，但其中一些让我感到困惑。它使用传入的 gl_vertex 计算出 eyevector，然后反射向量。最后传递给 frag 着色器。在 frag 着色器的传递中，通过 textureCube 提取 texl。我的问题是每个 gl_Vertex 是否只有一个像素？这些着色器的插值在哪里？

```
 vertex shader:
    uniform vec4 eyepos;  
    varying vec3 reflectvec;
    void main(void)  { 

    vec4 pos = normalize(gl_ModelViewMatrix * gl_Vertex);     
    pos = pos / pos.w;          
    vec3 eyevec = normalize(eyepos.xyz - pos.xyz);     
    vec3 norm = normalize(gl_NormalMatrix * gl_Normal);          
    reflectvec = reflect(-eyevec, norm);          
    gl_Position = ftransform(); 

    }

    frag shader:
    uniform samplerCube cubemap;  
    varying vec3 reflectvec; 

    void main(void)  {     
    vec4 texcolor = textureCube(cubemap, reflectvec);      
    gl_FragColor = texcolor;  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:50:25.033

> 这些着色器的插值在哪里？

为每个片段执行片段着色器。一个像素至少包含 1 个片段。在顶点和片段着色器之间，对片段着色器的输入变化被重心插值。

# linker - EClipse CDT/Juno 和链接器选项 --start-group

> ID：15321992
> 
> 赞同：5
> 
> 时间：2013-03-10T12:03:38.697
> 
> 标签：linker, eclipse-cdt

我知道链接的 -l 和 -L 选项，但我希望将 --start-group 和 --end-group 以及我的所有库设置到 CDT/Juno 下的 C 项目（属性）中，但我应该把它放在哪里选项 ？？？？-Xlinker ?

谢谢马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-07T10:12:00.690

您可以通过“专家设置：命令行模式”插入此选项。
要插入选项`-Wl,--start-group`，`-Wl,--end-group`您可以编辑此字段。请按照以下步骤操作：

1.  单击选项 GCC C/C++ Linker
2.  编辑字段命令行模式

从

```
${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS} 
```

至

```
 ${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} $(OBJS) -Wl,--start-group $(USER_OBJS) -Wl,--end-group $(LIBS) 
```

请注意，我们打开了`${INPUTS}`等于的变量`INPUT="$(OBJS) $(USER_OBJS) $(LIBS)"`。检查生成的 makefile 中的结果。

3.  在 GCC C/C++ Linker -> Miscellaneous -> Other objects 部分中插入您的静态文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T16:13:04.787

我遇到了同样的问题 - 我使用的一个快速解决方法是让我的工具链链接器“其他对象”中的第一个条目列出值“-Wl，--start-group”和最后一个条目“-Wl，--end -团体”。

# python - 反转元组列表中的元组

> ID：15321993
> 
> 赞同：0
> 
> 时间：2013-03-10T12:03:43.780
> 
> 标签：python, numpy, matplotlib

我有一个数组`[(126,150),(124,154),(123,145),(123,149)]`（只是数字的一个样本，数组太大而无法显示所有这些），然后我用它`imshow`来将结果绘制到矩阵上。我想要的是找到数组的倒数，`[(150,126),(154,124),(145,123),(149,123)]`然后再做一个`imshow`。

如何反转数组以实现我想要做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:09:23.433

```
>>> arr = [(126,150),(124,154),(123,145),(123,149)]
>>> reverseArr = [x[::-1] for x in arr]
>>> reverseArr
[(150, 126), (154, 124), (145, 123), (149, 123)]
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T12:10:42.267

如果您不介意迭代器：

```
a = [(126,150),(124,154),(123,145),(123,149)]

inverse = map(reversed, a) 
```

或者如果你想要元组，这里有几个选项：

```
inverse = map(tuple, map(reversed, a))

inverse = map(lambda x: (x[1], x[0]), a)

inverse = zip(*reversed(zip(*a))) 
```

通过几个快速测试，我发现列表推导是处理短列表最有效的方法，而 zip 方法对于长列表最有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:09:37.767

```
array = [(126,150),(124,154),(123,145),(123,149)]
inversed = [(item[1],item[0]) for item in array] 
```