# StackOverflow 问答 13153000-13153999

# asp.net-mvc-3 - 如何将会话变量转换为字符串数组？

> ID：13153003
> 
> 赞同：1
> 
> 时间：2012-10-31T07:15:12.790
> 
> 标签：asp.net-mvc-3

我正在尝试将数组存储在会话变量中，然后像这样使用它：

```
 Session["sessionVariable"] = searchString; 
```

现在在这里我试图将会话变量存储到一个字符串变量中。

```
 String[] sv = Session["sessionVariable"]; 
```

当我这样做时，我得到了他的错误。

无法将类型 'Object' 显式转换为 'String[]'，存在显式转换，（您的任务是演员吗？）

我尝试了各种转换，但找不到正确的转换。你能帮我找到正确的转换吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T07:32:41.343

试试这个：

放：

```
Session["test"] = new string[] { "1", "2", "3" }; 
```

得到：

```
string[] array = Session["test"] as string[]; 
```

# debugging - 如何在 web.xml 和 log4j.properties 中配置 log4j 输出文件路径？

> ID：13153004
> 
> 赞同：8
> 
> 时间：2012-10-31T07:15:23.247
> 
> 标签：debugging, configuration, log4j, web.xml, properties-file

我开发了一个 Web 应用程序，我可以在其中注册员工。

我的`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

  <display-name>Employee Registration</display-name>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
  <servlet-name>sapient</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
  <servlet-name>sapient</servlet-name>
  <url-pattern>*.htm</url-pattern>
  </servlet-mapping>

</web-app> 
```

现在，当我单击`Register`html 页面中的按钮时。它进入一个控制器类，我在其中编写了一个用于记录的代码，

```
@org.springframework.stereotype.Controller
public class RegController  {
    private static final Logger LOGGER = Logger
            .getLogger(RegController.class.getName());

@RequestMapping(value = "/register.htm", method = RequestMethod.GET)
public ModelAndView handleRequest(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
    LOGGER.debug("ENTERING the contoller class");
    ModelAndView mav = new ModelAndView("register");
    LOGGER.debug("exiting the contoller class");
    return mav;

} 
```

}

我创建了一个名为的包`resource`并在其中创建了一个 log4j.properties 文件

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\loging.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

但是我的日志不是在`C:`驱动器中创建的。

我需要在 web.xml 中配置一些东西吗？我已经包含了 log4j.jar 文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T09:56:25.650

你需要包括 -

```
 <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/resource/log4j.properties</param-value>
    </context-param>

     <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener> 
```

在您的 web.xml 中。那么它会正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:30:40.423

您的问题与 Spring MVC 无关。这只是一个 Log4J 配置问题。（请编辑您的问题）

您是否正确设置了记录器？（例如，允许调试级别，并将您的`file`附加程序设置为记录器）

在你的配置中有这样的东西（我只是凭记忆回忆语法，如果有什么问题自己修复）

```
log4j.rootLogger.level=INFO, file
log4j.logger.your.package.RegController=DEBUG 
```

类似的东西。

此外，请确保您在类路径中没有其他 log4j.properties 或 log4j.xml。Log4J 可能会加载它们而不是您的，这会导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T07:20:31.347

在资源文件夹中包含以下 log4j.properties 文件。

```
log4j.rootCategory=INFO,S,rollingFile

log4j.appender.S =org.apache.log4j.ConsoleAppender
log4j.appender.S.layout =org.apache.log4j.PatternLayout
log4j.appender.S.layout.ConversionPattern = %d{yyyy-MM-dd HH:mm:ss} %c{1} [%p] %m%n

log4j.appender.rollingFile = org.apache.log4j.DailyRollingFileAppender

#provide path to your location where you want logs created. For now its logs folder of   tomcat.
log4j.appender.rollingFile.File = ${catalina.home}/logs/loging.log
log4j.appender.rollingFile.Append = true
log4j.appender.rollingFile.MaxFileSize=2000KB 
log4j.appender.rollingFile.MaxBackupIndex=9 

log4j.appender.rollingFile.Threshold = ALL

log4j.appender.rollingFile.DatePattern = '.'yyy-MM-dd
log4j.appender.rollingFile.layout = org.apache.log4j.PatternLayout
log4j.appender.rollingFile.layout.ConversionPattern = %d{yyyy-MM-dd HH:mm:ss} %c{1} [%p] %m%n 
```

用这个替换你的代码。肯定会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T08:51:15.787

在您的 web.xml 添加此代码

```
 <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/resource/log4j.properties</param-value>
    </context-param>

     <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener> 
```

并在 /WEB-INF/resource/ 下使用此代码添加文件 log4j.properties

```
 # Root logger option 
   log4j.rootLogger=DEBUG, file # Redirect log messages to a log file
   log4j.appender.file=org.apache.log4j.RollingFileAppender #outputs to
   Tomcat home log4j.appender.file.File=${catalina.home}/logs/myapp.log
   log4j.appender.file.MaxFileSize=5MB
   log4j.appender.file.MaxBackupIndex=10
   log4j.appender.file.layout=org.apache.log4j.PatternLayout
   log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss}
   %-5p %c{1}:%L - %m%n 
```

并在您的班级中添加此代码

```
private static final Logger logger = Logger.getLogger(NameOfYourrClass.class); 
```

并在您的函数中添加此代码

```
logger.debug("This is Error message", new Exception("Testing")); 
```

# email - Unix shell 脚本 - 邮件发送

> ID：13153006
> 
> 赞同：2
> 
> 时间：2012-10-31T07:15:32.133
> 
> 标签：email, unix

我正在尝试执行一个 Unix shell 脚本来使用`mailsend`. 我需要使用它的内容类型将其格式化为 HTML 文件

我的脚本如下，

```
sender="xxxx@xxxx.com"
subject="My Subject"
server=000.000.000.000
message=`cat fun.txt`
email_add="test@test.com"
nohup ./mailsend -f $sender -t $email_add -u "$subject" -m "$message" -s $server
  -l fcbulog 
```

如何使用上述脚本实现 HTML 格式的电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:21:55.933

您可以设置`Content-Type`为`text/html`然后只使用您的 html 作为消息的正文。

# session - struts 应用程序中所有登录用户的主列表

> ID：13153008
> 
> 赞同：1
> 
> 时间：2012-10-31T07:15:34.840
> 
> 标签：session, logging, struts2, admin

在我的 struts2 应用程序中，在登录操作中，我将用户和角色置于会话中。

我想跟踪所有登录的用户，以便执行以下操作：

1.  避免多次登录同一个用户名。
2.  检查用户是否登录！或者任何具有管理员角色的机构都已登录或未登录！
3.  以及其他一些动作！

怎么做有什么建议！

以及如何维护诸如

*   用户不登录就关闭浏览器！ETC

任何具有更多会话信息的材料也可以真正提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:49:50.967

您可以在用户表中有一个名为`logged_in_time`( `timestamp`type) 的列，并使用用户登录的时间对其进行更新，并在用户注销时使其为空。

*   **避免多次登录相同的用户 ID:** : 检查此列是否具有某些值。
*   **检查用户是否登录**：检查该列是否为空。
*   **用户在不注销的情况下关闭浏览器**：可能是一个调度程序作业，它以固定的时间间隔运行以检查用户的会话（可能使用 sessionid）并相应地更新此字段。

查看[此讨论](https://stackoverflow.com/questions/3771103/how-do-i-get-a-list-of-all-httpsession-objects-in-a-web-application)以获取更多信息。还有[一个](https://stackoverflow.com/questions/12963174/absolute-session-expiration-after-n-minutes-even-if-user-is-using-the-system)。

# android - 服务还是广播？

> ID：13153009
> 
> 赞同：0
> 
> 时间：2012-10-31T07:15:38.483
> 
> 标签：android, service, location, broadcastreceiver

**设想：**

用户可以选择一个时间间隔（如5h）。每隔 15 分钟，我会检查用户的当前位置，并根据位置采取行动。

**问题：**

那么，哪个最好？

我需要一个`LocationListener`或`getLastKnowLocation()`基于一些标准应该解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:17:59.293

`BroadcastReceiver`用`AlarmManager`那个实现`setInexactRepeating`。在它处理你`getLastKnowLocation()`的条件并在你想要的任何地方发送广播之后

# javascript - 将事件侦听器附加到动态元素

> ID：13153010
> 
> 赞同：2
> 
> 时间：2012-10-31T07:15:44.100
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 1.7 - 将 live() 变成 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)

我曾经很喜欢`.live()`jQuery 的功能。您将添加它，瞧，任何与标识符匹配的未来元素都将具有该功能。

然后它被弃用了，建议使用`.on()`. 但它不起作用。下面是我放置在`$(document).ready()`.

**这有效**

```
$('#membership_number').live('change',function(e) {
    alert("VALUE CHANGED");
}); 
```

**这不**

```
$('#membership_number').on('change',function(e) {
    alert("VALUE CHANGED");
}); 
```

有没有其他方法可以达到与我相同的效果，`.live()`或者我只是没有`.on()`正确使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T07:18:06.907

您必须将事件订阅到父项并提供要绑定的选择器。如果您不想给父母，您可以使用文档。阅读更多关于**[这里](http://api.jquery.com/on/)**

```
$(document).on('change', '#membership_number',function(e) {
    alert("VALUE CHANGED");
}); 
```

**或者**

```
$('#parentId').on('change', '#membership_number',function(e) {
    alert("VALUE CHANGED");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:18:13.443

在 jQuery 1.7 + 中处理动态元素时，您使用的是 on 选择器。它期望事件绑定到在页面加载时准备就绪且可用的静态元素，因此事件可以正确地在链中冒泡并在找到父元素时触发。

```
$(document).on('change', '#membership_number', function(e){
    alert("VALUE CHANGED");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T07:18:17.610

您需要使用父元素来附加处理程序。例如文档。

```
$(document).on('change', '#membership_number', function(e) {
    alert("VALUE CHANGED");
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T07:24:18.397

[`.on()`](http://api.jquery.com/on/)由于事件冒泡直到匹配选择器的方式，您需要在祖先元素处绑定。这可以是 DOM 中的任何东西，它是您希望事件绑定到的元素的祖先。

您当然可以使用终极祖先，`document`. 例如：

```
$(document).on('change', '#membership_number', function(){}); 
```

`.live()`实际上是通过在其上绑定一个事件在幕后完成的`document`，然后在正确的元素上进行过滤。使用尽可能本地的元素来进行活动会更有效和实用。例如，如果我想在动态添加`<li>`一些元素的元素上单击事件`<li>`，我会将事件绑定到父级`<ul>`并进行*过滤*，`<li>`如下所示：

```
$('ul').on('click', 'li', function(){}); 
```

这也比在每个`<li>`.

# php - 页面未正确重定向，服务器正在以永远不会完成的方式重定向对该地址的请求

> ID：13153011
> 
> 赞同：0
> 
> 时间：2012-10-31T07:15:46.567
> 
> 标签：php, .htaccess

当我尝试打开我的网站登录页面时，它显示错误，例如“服务器正在以一种永远不会完成的方式重定向对该地址的请求”......我认为问题可能出在 .HTACCESS！..请帮帮我？

这是.HTACCESS：

开启 URL 重写

```
RewriteEngine On
Installation directory <BR>
RewriteBase /<BR><BR>
Allow any files or directories that exist to be displayed directly<BR>
RewriteCond %{REQUEST_FILENAME} !-f <BR>
RewriteCond %{REQUEST_FILENAME} !-d

Rewrite all other URLs to index.php/URL <BR>
RewriteRule .*/ index.php/$0 [PT,L] " 
```

编码的东西不是那么好听吗..你能帮我吗..顺便说一句，我已经使用 wamp 服务器在我的系统上成功测试了这个项目……它是献血者数据库的开源项目，请帮助我吗？ .我提供了所有相关文件的下载链接...请下载并检查它有什么问题..提前谢谢..链接： [http](http://www.uploadmb.com/dw.php?id=1351767344) ://www.uploadmb.com/dw.php? id= [1351767344](http://www.uploadmb.com/dw.php?id=1351767344)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:25:42.300

您的页面似乎将您重定向回同一页面，即登录页面，这就是您收到此错误的原因。尝试再次检查您的编码，页面将您重定向到哪里？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:22:30.700

您可以查看响应标头以确定问题所在。有几种方法可以做到这一点，[Fiddler](http://www.fiddler2.com/fiddler2/)一个 GUI 应用程序，或者你可以运行

```
curl http://www.yourhost.com -I 
```

# c#-4.0 - 如果没有快捷键，则默认浏览器

> ID：13153014
> 
> 赞同：0
> 
> 时间：2012-10-31T07:15:50.573
> 
> 标签：c#-4.0, silverlight-4.0

在我的用户控件中，我覆盖了 keydown ，例如我检查

```
 if (Keyboard.Modifiers == ModifierKeys.Control && e.Key == System.Windows.Input.Key.E)
       {

       } 
```

但我注意到像 Ctrl+P 这样的浏览器主要快捷方式不起作用，如果我在 keydown 中检查 ctrl+e 以执行某些任务，知道如何在 Internet Explorer 中修复它，快捷方式执行浏览器快捷方式应该执行的操作

任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:33:25.450

您提到了浏览器，我假设您要求使用 javascript。[请考虑http://www.openjs.com/scripts/events/keyboard_shortcuts/](http://www.openjs.com/scripts/events/keyboard_shortcuts/)中的 shortcut.js
阅读：[http ://www.openjs.com/scripts/events/keyboard_shortcuts/#keys](http://www.openjs.com/scripts/events/keyboard_shortcuts/#keys)

```
Example:
shortcut.add("Down",function() {
    alert("keydown!");
});

//Remove the shortcut
shortcut.remove("Down"); 
```

# wordpress - WordPress 自动将标题中的连字符转换为破折号

> ID：13153019
> 
> 赞同：1
> 
> 时间：2012-10-31T07:16:25.443
> 
> 标签：wordpress

在我的 WordPress 博客中，我发现它会自动将连字符转换为破折号。

例如，我创建了一篇具有以下 TITLE 的博客文章：

维基百科——免费的百科全书

但是，当我检查帖子时，我发现标题显示为：

维基百科——免费的百科全书

我检查了 HTML 的源代码：

```
<title>Wikipedia &#8211; the free encyclopedia</title> 
```

那么，连字符 (-) 改为破折号 (-)，这是为什么呢？

如何禁用这种转换？

# silverlight - 无法在 lightswitch 中为 DevExpress Xtrareport 加载文件或程序集

> ID：13153020
> 
> 赞同：1
> 
> 时间：2012-10-31T07:16:27.113
> 
> 标签：silverlight, devexpress, visual-studio-lightswitch, xtrareport

当我试图将我的电灯开关项目从我的工作笔记本电脑移动到另一台完全相同的电脑时，我遇到了这个奇怪的错误，一切正常.. 两台笔记本电脑的规格相同，当我运行我的应用程序时突然出现这个错误

我正在使用 xtraReport Extinsion 在应用程序中做一些报告.. 可能是什么问题..

我已经搜索过它并没有发现有人告诉我它是因为silverlight 5，但它也安装在我的另一台笔记本电脑上，一切正常

任何人都可以帮助我吗？

![无法加载文件错误](../Images/17d9198088e2df78c0606f7ab953ee78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:15:19.907

请尝试从[DevExpress 支持中心](http://www.devexpress.com/Support/Center)[回答类似问题](http://www.devexpress.com/Support/Center/p/Q340244.aspx)。

# iphone - 权利的用途是什么以及如何创建权利？

> ID：13153026
> 
> 赞同：0
> 
> 时间：2012-10-31T07:16:54.973
> 
> 标签：iphone, entitlements

我创建了一个小应用程序，我没有使用任何`.entitlement`文件在模拟器和设备中运行。它的工作也很好......但我不知道这个`.entitlement`文件在哪里使用以及如何创建它。它对应用程序重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:27:15.000

权利是应用程序可以获得额外特权和访问系统某些功能的特殊权利，例如访问钥匙串（`keychain-access-groups`权利）、像 SpringBoard 一样启动应用程序（`com.apple.springboard.launchapplications`权利）等等。

Xcode 附带`Entitlements.xml`的官方工具和开发人员工具以及可用于在越狱设备上进行虚假代码签名的实用程序在对应用程序进行代码签名时都会使用文件。本质上，它是一个包含一个或多个这些权利的属性列表文件，其内容将在代码设计过程中**合并到可执行文件中。**当操作系统尝试运行应用程序并查找二进制文件的签名时，它会找到现在硬编码的权利文件，并指示沙盒守护程序根据该文件的内容解除某些特权禁令。`codesign_allocate``ldid`

 **以下是iOS 的[所有已记录权利](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html)，其他未记录的权利也可以通过查看 iOS 中的一些可执行文件来找到。**

# ios - 不想授予此版本的应用内购买权限

> ID：13153034
> 
> 赞同：0
> 
> 时间：2012-10-31T07:17:35.033
> 
> 标签：ios, in-app-purchase, appstore-approval

我目前有一个处于等待审核状态的应用程序。我想在应用程序的下一个版本中实现应用程序购买，而不是他的。我可以创建新产品并使用应用内购买测试我的应用的新版本，而不会给审核团队带来问题吗？

这些新产品不应反映在此版本的应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:19:42.203

是的，当然你可以.. 只是不要将它们添加到应用程序的元数据的应用内购买部分......

# php - GoogleDrive API 日期/时间

> ID：13153036
> 
> 赞同：4
> 
> 时间：2012-10-31T07:17:43.123
> 
> 标签：php, google-api, google-drive-api

我遇到了 Google Drive API 的 createdDate/modifiedDate 问题。当我得到数据时显示时间：2012-10-26T09:27:09.382Z

有没有人可以指导我如何在“正常”中安排这样的日期 2012-10-26 09:27:.382Z

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:34:24.053

这些是 RFC 3339 时间戳。这是一个 Python 示例：

```
def rfc3339_internet(date):
  d = date.strftime('%Y-%m-%dT%H:%M:%S%z')
  return d[:-2] + ':' + d[-2:] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:32:56.530

我不知道处理这个问题的*正确*方法，但似乎这个字符串可以在“T”字符上展开，然后从新数组中产生的两个字符串创建一个新的日期。

爆炸T上的日期

```
$date = explode('T', 2012-10-26T09:27:09.382Z); 
```

$date 包含一个由两部分组成的数组，分别是 T 之前和之后的内容。

```
date('D M d, Y', strtotime($date[0])); 
```

第二件将是秒字符串。

```
date('g:i:s a', strtotime($date[1])) 
```

我不确定该字符串中的 Z 是什么，但如果您不希望它返回，此时您可以 str_replace 替换 Z 。

```
date('g:i:s a', strtotime(str_replace('Z', '', $date[1]))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:12:42.617

在Java中；

```
com.google.api.services.drive.model.File lGoogleFile = lMyDriveHelper.getRootFile();
com.google.api.client.util.DateTime lGoogleCreatedDate = lGoogleFile.getCreatedDate();
java.util.Date lTheNormalJavaDate = new Date(lGoogleCreatedDate.getValue()); 
```

Java 日期行为“正常”；）

# php - jQuery scrollExtend 后 Facebox 不工作

> ID：13153039
> 
> 赞同：0
> 
> 时间：2012-10-31T07:18:05.490
> 
> 标签：php, jquery-plugins, facebox

我在我的网站上使用[Facebox 。](http://github.com/defunkt/facebox)它工作正常，除非在调用 jQuery scrollExtend 时，在这种情况下，它在调用 scrollExtend 后的附加脚本中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:03:30.750

最后我修复了这个错误:)。我将facebox应用于具有相对属性facebox的锚标签。在头文件中，我正在调用facebox函数以在使用scrollExtend之前将face box应用于提要。以前的代码是这样的

jQuery(文档).ready(函数() {

```
$("#newsFeedMainID").scrollExtend({ 
        "target": "div#newsFeedSubID",          
        "url": "loadNewsFeed.php", 
        "newElementClass": "list_item more_content",            
        beforeStart: function(){
            $("#loadNewsFeed").show();              
                return true;
        },
        onSuccess: function(){
            return true;
        }                   
    }); 
```

});

我只是将代码更改如下

jQuery(文档).ready(函数() {

```
$("#newsFeedMainID").scrollExtend({ 
        "target": "div#newsFeedSubID",          
        "url": "loadNewsFeed.php", 
        "newElementClass": "list_item more_content",            
        beforeStart: function(){
            $("#loadNewsFeed").show();              
            $("'a[rel *=facebox]").removeAttr("rel");
            return true;
        },
        onSuccess: function(){
            $("#loadNewsFeed").hide();              
              $('a[rel *=facebox]').facebox({
                loadingImage : 'js/facebox/loading.gif',
                closeImage   : 'js/facebox/closelabel.png'
              })
            return true;
        }                   
    }); 
```

});

它现在可以工作了:)

# css - IE8中的模态弹出背景变成黑色

> ID：13153046
> 
> 赞同：1
> 
> 时间：2012-10-31T07:18:26.523
> 
> 标签：css, internet-explorer, overlay, modal-dialog

我正在使用 asp.net ajax 模态弹出扩展器来显示模态覆盖。它按预期工作，我面临的问题是它在 IE 8 中将背景设置为黑色而不是透明的。它工作正常 FF 和 Chrome。

标记。

```
 <cc1:ModalPopupExtender ID="mpError" runat="server" PopupControlID="pnlError" TargetControlID="btn"
            CancelControlID="ancClose" BackgroundCssClass="modalBackground">
        </cc1:ModalPopupExtender>
        <asp:Panel ID="pnlError" runat="server" CssClass="modalPopup" align="center" Style="display: none">
            <div class="dvPopup">
                &nbsp;&nbsp; <a id="ancClose" style="float: left; cursor: pointer; margin: 10px 0 0 10px;">
                    <img alt="Close" src="Images/x_button.png" /></a>
                <br />
                <br />
                <span class="spanPop">You can only vote once!</span>
            </div>
        </asp:Panel> 
```

CSS类。

```
 .modalBackground
        {
            background-color: #d2d2d2;
            filter: alpha(opacity=60%);
            opacity: 0.8;
        }
        .modalPopup
        {
            padding-top: 10px;
            padding-left: 10px;
            width: 486px;
            height: 215px;
        }

      .dvPopup
        {
            background-image: url('images/error2_window.png');
            width: 486px;
            height: 215px;
        } 
```

IE8 中的不透明度存在一些问题，但不要解决。任何建议，Css hacks 都会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:58:08.583

通过更改模态背景类来解决此问题。

```
 filter: alpha(opacity=50);
            opacity: 0.5; 
```

# c++ - 由于#pragma pack 错误导致的内存损坏 - 标准映射损坏 - 插入时崩溃

> ID：13153047
> 
> 赞同：6
> 
> 时间：2012-10-31T07:18:31.920
> 
> 标签：c++, stl, crash

我有一个项目正在处理，我对 std 映射有一些奇怪的行为。

我有自己的 typedef 映射定义了将字符串映射到自定义类型的指针。在我将第一对添加到地图后，只要我超出地图，应用程序就会崩溃。

经过一番混乱后，我将地图更改为 a 并将其移至应用程序中的第一个调用，但它仍然崩溃。我不知道会发生什么。任何帮助，将不胜感激。

这是目前崩溃的代码。

```
LoggerPtr syslogger(Logger::getLogger("CISInterface"));

int main(int argc, char *argv[])
{
    typedef std::map<string, string> MyMapDef;
    MyMapDef tmpString;
    tmpString.insert(MyMapDef::value_type("0000", "d"));
    tmpString.insert(MyMapDef::value_type("1111", "d")); //Crashes here.
    tmpString.insert(MyMapDef::value_type("2222", "d"));

//  std::string configFile;
//  int c;
//  if(argc < 2)
//  {
//      //Must have c option
//      std::cout << "Usage -c configFileName" << std::endl;
//      exit(EXIT_FAILURE);
//  }
//Rest of main commented out. 
... 
```

这是堆栈跟踪 -

```
CISInterface Debug [C/C++ Application]  
    gdb/mi (10/31/12 6:02 PM) (Suspended)   
        Thread [1] (Suspended: Signal 'SIGSEGV' received. Description: Segmentation fault.) 
            6 std::basic_string<char, std::char_traits<char>, std::allocator<char> >::compare(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const()  0x00000032fd49c416    
            5 std::operator< <char, std::char_traits<char>, std::allocator<char> >() basic_string.h:2317 0x0000000000417ec7 
            4 std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator() stl_function.h:230 0x000000000041706f  
            3 std::_Rb_tree<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_insert_unique() stl_tree.h:1170 0x0000000000415d00    
            2 std::map<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::insert() stl_map.h:500 0x00000000004150eb   
            1 main() CISInterface.cpp:29 0x000000000041916d 
gdb (10/31/12 6:02 PM)  
/home/cillian/workspace/CISInterface/Debug/CISInterface (10/31/12 6:02 PM) 
```

我应该关注哪些其他领域可能会导致问题。它可能在我链接的库中吗？我创建了第二个项目，只有这些代码行链接到相同的库（但没有任何代码调用它们。）并且它不会崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:55:58.773

问题解决了。

以为我会在这里添加它，以防其他人做过同样的事情。

我慢慢删除了项目中的文件，以尝试找到有问题的文件。我在想它一定是在导致问题的头文件中定义的东西（比如静态）。花了很长时间，但我想我已经找到了。我有一个定义了许多结构的头文件。这些被序列化到线路上，所以我使用 #pragma pack (push) 将它们对齐 1 个字节，我把它放在文件的顶部，#pragma pack (pop) 在底部。但是我随后在第一个 #pragma 定义之后添加了几个 #include 语句，这意味着这些包含错误地对齐并导致了一些不确定的行为。感谢所有看过的人。应该可能使用**属性**语法，我不会有问题。为了完整性，违规代码如下。

```
#pragma pack (push)
#pragma pack (1)

#include <string> //Wrong place for includes!
#include <Units.h> 

typedef struct 
{ 
....
}
#pragma pack (pop) 
```

感谢所有看过最初问题的人。

# coffeescript - Meteorjs - 从另一个模板中选择一个模板的 DOM

> ID：13153050
> 
> 赞同：0
> 
> 时间：2012-10-31T07:19:23.387
> 
> 标签：coffeescript, meteor

我有以下

```
<div id="header">
    {{> header}}
</div>

<div class="hidden content_box">
    {{> content}}
</div> 
```

“content_box”在开始时是隐藏的。

模板“标题”有一个按钮。

```
<template name="header">
    <button id="display_content">Click to display content</button>
</template> 
```

模板“内容”只是一个简单的 div

```
<template name="content">
    It's me, content
</template> 
```

当我单击标题中的按钮时，我想“显示” content_box。

我如何实现这一目标？- 或者更好的是，在您需要从另一个模板的事件访问模板的 DOM 的情况下，实现这种效果的最佳方法是什么？

```
Template.header.events "click button#display_content": (e) ->
  Template.content.show() ????? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:57:43.317

我不知道这是否是最好的方法，但在类似的情况下，我之前所做的是使用会话参数来存储 div 的显示/隐藏状态。在您的点击事件中，您只需要更改会话标志的值。在要显示/隐藏的 div 模板中，您只需返回类名。

**JS 中的示例：**

```
Template.header.events({
    "click button#display_content": function () {
        Session.set('contentShow', true);
    }
});

Template.content.className = function (input) {
    return Session.equals('contentShow', true) ? '' : 'hidden';
}; 
```

html

```
<template name="content">
    <div class="{{className}} content_box">
        It's me, content
    </div>
</template> 
```

`Meteor.startup()`例如，您需要将会话标志初始化为 false `Session.set('contentShow', false);`。由于会话是反应式的，当您更改会话标志时，将自动重新评估 div 类名。

# php - php函数货币换算

> ID：13153053
> 
> 赞同：1
> 
> 时间：2012-10-31T07:19:35.977
> 
> 标签：php, curl

我的 PHP 脚本有问题。如果我将少于 20 美元转换为 INR，它工作正常，但如果我使用超过 19（美元），那么它只显示结果输出的第 1 位。我想要完整的结果输出来使用这个脚本。如果有人帮助我解决这个问题，我感到很高兴。

这是代码：

```
function currency($from_Currency,$to_Currency,$amount) {
    $amount = urlencode($amount);
    $from_Currency = urlencode($from_Currency);
    $to_Currency = urlencode($to_Currency);
    $url = "http://www.google.com/ig/calculator?hl=en&q=$amount$from_Currency=?$to_Currency";
    $ch = curl_init();
    $timeout = 0;
    curl_setopt ($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,  CURLOPT_USERAGENT , "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $rawdata = curl_exec($ch);
    curl_close($ch);
    $data = explode('"', $rawdata);
    $data = explode(' ', $data['3']);
    $var = $data['0'];
    return round($var,3);
}

$from_Currency ="USD";
$to_Currency ="INR";
$amount ="20";

echo currency($from_Currency,$to_Currency,$amount); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:43:40.260

试试这个

```
$data = explode('"', $rawdata);
preg_match_all("/([0-9]+(\.[0-9]+)?\s?[kBM]?)/", $data[3], $match1);
$var = implode(",", $match1[0]);
$var = str_replace(",", "", $var);
return round($var, 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:30:42.957

我修改了你的代码。这工作如下所示的功能...

```
function currency($from_Currency,$to_Currency,$amount) {
    $amount = urlencode($amount);
    $from_Currency = urlencode($from_Currency);
    $to_Currency = urlencode($to_Currency);
    $url = "http://www.google.com/ig/calculator?hl=en&q=$amount$from_Currency=?$to_Currency";
    $ch = curl_init();
    $timeout = 0;
    curl_setopt ($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,  CURLOPT_USERAGENT , "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $rawdata = curl_exec($ch);
    curl_close($ch);
    $data = preg_replace("/((\"?[^\"]+\"?)[ ]*:[ ]*([^,\"]+|\"[^\"]*\")(,?))/i", '"\\2": \\3\\4', str_replace(array('{', '}'), array('',''), $rawdata));
    return json_decode( '{' . $data . '}' );
}

$from_Currency ="USD";
$to_Currency ="INR";
$amount ="20";

$amt = currency($from_Currency,$to_Currency,$amount);
//print_r($amt);

// The actual converted amount can be obtained with
$converted_amount = $amt->rhs; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:34:06.523

那是因为如果 rhs 值 > 1000，谷歌似乎会返回一个奇怪的数字。打印整个响应，您将看到。返回的值是 18 美元的 969 和 20 美元的 1á082.30965。我不认识那里的额外字符，也没有可用的文档。

使用解决方法 - 转换 1 个单位，然后乘以数量。

# ios - WSDL 和 WEB 服务

> ID：13153054
> 
> 赞同：0
> 
> 时间：2012-10-31T07:19:36.753
> 
> 标签：ios, web-services

即使在观看了大量视频并阅读了大量有关 WSDL 的教程之后，我还是 Web 服务的新手，我无法理解如何从 WSDL 获取 Web 服务方法的 URL。我提供的 WSDL 文件是这个[http://cons.epackagepro.com/m/Service.svc?wsdl](http://cons.epackagepro.com/m/Service.svc?wsdl)我想调用这个 Web 服务的登录方法。有人能解释一下如何从 WSDL 文件中提取 Web 服务/Web 服务方法的准确 url，以及如何将参数传递给 Web 服务（在这种特殊情况下，我想调用 login）。我看过的所有教程都告诉我 WSDL 文件的服务标签有一个地址标签，它告诉我们服务的 url，但是这个 WSDL 不包含一个。

最后一件事，我可以用肥皂调用这个服务吗，甚至肥皂不用于绑定。如果我想使用 HTTP GET / HTTP POST 方法调用它，将如何提供参数。

我主要关心的是如何从 WSDL 获取 Web 服务/Web 服务方法的 url？我想使用它的平台是IOS。

提前致谢。

# objective-c - 如何从 UIdatePIcker 中删除 AM/PM

> ID：13153061
> 
> 赞同：0
> 
> 时间：2012-10-31T07:20:02.310
> 
> 标签：objective-c, ios, uidatepicker

我需要 UIdatePIcker 来选择月/小时/分钟并且不想要 AM 或 PM。我们不在我的地区使用它。真的我找不到简单的解决方案。只是为了创建我自己的 UIdatePicker。

也许有人已经这样做并且可以分享如何删除 Am/PM ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:25:42.843

日期选择器将根据当前语言环境显示时间，因此对于美国，您将获得上午/下午，对于乌克兰，我将获得 24 小时选择器。Apple 建议您坚持使用用户区域设置，但您可以使用`locale`属性覆盖它。有关更多讨论，请参阅[此问题](https://stackoverflow.com/questions/2140388/how-to-disable-am-pm-in-uidatepicker)。

# c++ - How to convert string to int with different bases?

> ID：13153065
> 
> 赞同：4
> 
> 时间：2012-10-31T07:20:08.567
> 
> 标签：c++, hex, base-conversion

I want to convert `string` to `int` but the conversion has to consider the prefixes `0x` or `0` if any and consider the input as `hex` or `oct` respectively. Using `istringstream`, you need to explicitly specify the base. Is there any way than explicitly coding to check for characters `0x`?

*Edit:* The conversion should implicitly find the base based on the prefix. Just like `int i = 0x123;` does.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T07:22:19.703

You can use the [std::stoi](http://en.cppreference.com/w/cpp/string/basic_string/stol) family of functions from C++11.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T07:22:36.970

You can use C function `strtol` : [http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/) It understands 0x/0 prefices.

# eclipse - 抑制 JavaScript 验证中的错误

> ID：13153068
> 
> 赞同：4
> 
> 时间：2012-10-31T07:20:32.930
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, jsdt

我目前正在开发一个 Eclipse 插件。这个插件包含一个依赖于 jsdt 的 JavaScript 特性的项目特性。

现在在一些细节上，我的项目可以包含的 JavaScript 有点特别。

*   它们可以包含“编译器提示”，它们基本上是以 # 开头的语句
*   它们可以包含函数之外的返回语句

但是在这两点上，jsdt 的标准验证进来并将它们标记为错误（这通常是正确的）。我已经设法在 JavaScript 验证器的属性中过滤掉了这个错误（手动）。

我的问题是，我怎样才能将这些错误排除在自动为具有我性质的项目的 jsdt 验证中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:03:52.157

JSDT 使用生成语法错误的具体语法解析器。你不能禁用它。只能配置语义错误或警告。

但是，您可以禁用 JSDT 的整个验证。

下面的解决方案将抑制在我们保存对 java 脚本文件的一些更改时生成的错误和警告。（自动构建，构建）

1.  打开项目的属性对话框。
2.  选择**建造者**项目。
3.  取消选中“JavaScript 验证器”。并按**确定**按钮。
4.  **从问题视图**中删除当前错误和警告

 **此解决方案无法在您编辑时消除编辑器中的错误或警告注释。仅当您对其进行编辑时，它们才会暂时显示在编辑器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:54:50.487

经过**大量**研究，数小时的删除标记和调试后，我**终于**设法删除了我想要的错误。当然，这是一种*糟糕的糟糕*方式，但我已经到了一个地步，我只想让它不管它是如何完成的。

如果您想删除在 jsdt 验证过程中创建的现有问题，您需要执行以下操作（并且您不能省略任何内容）：

*   创建一个类扩展[`org.eclipse.wst.jsdt.core.compiler.ValidationParticipant`](http://help.eclipse.org/helios/topic/org.eclipse.wst.jsdt.doc/reference/api/org/eclipse/wst/jsdt/core/compiler/ValidationParticipant.html)
*   覆盖`isActive()`,`buildStarting()`和`reconcile()`方法。

因此，您基本上必须关心两件事。

1.  在验证过程**结束**时将创建或已经创建的实际问题标记。

2.  验证过程产生的问题。它们属于类型`CategorizedProblem`，可以通过传递给方法的`ReconcileContext`对象获得。`reconcile()`

在我看来，`CategorizedProblem`在验证过程之后 s 将被转换为问题标记。

所以你需要做的是：

*   删除其中所有文件的所有不需要的问题标记`buildStarting`（这会从项目中即将验证的所有文件中删除问题标记）
*   迭代( )的`CategorizedProblem`对象`ReconcileContext``getProblems()`
*   创建一个仅包含`CategorizedProblem`您要保留的 s的新数组
*   将此新数组设置为`ReconcileContext`with`putProblems()`
*   再次删除该文件的不需要的标记（我不知道为什么需要这样做，请不要问，我不在乎 :-/）

这种validationParticipant 的示例实现可能如下所示：（这将过滤掉抱怨方法之外的return 语句的问题：

```
[...ommited imports ...]

public class MyValidationParticipant extends  org.eclipse.wst.jsdt.core.compiler.ValidationParticipant{

@Override
public boolean isActive(IJavaScriptProject project) {
    return true;
}

@Override
public void buildStarting(BuildContext[] files, boolean isBatch) {      
    super.buildStarting(files, isBatch);    
    for(BuildContext context : files){
        IFile file = context.getFile();
        deleteUnwantedMarkers(file);
    }
}

@Override
public void reconcile(ReconcileContext context) {

    IResource resource = context.getWorkingCopy().getResource();
    CategorizedProblem[] newProblems = new CategorizedProblem[0];
    ArrayList<CategorizedProblem> newProblemList = new ArrayList<CategorizedProblem>();

    CategorizedProblem[] probs = context.getProblems("org.eclipse.wst.jsdt.core.problem");
    if(probs != null){
        for(CategorizedProblem p : probs){
            if(!(p.getMessage().equals("Cannot return from outside a function or method."))){                   
                    newProblemList.add(p);                      
                }                   
            }
        }
    }           
    context.putProblems("org.eclipse.wst.jsdt.core.problem", newProblemList.toArray(newProblems));      

    deleteUnwantedMarkers(resource);
}

public static void deleteUnwantedMarkers(IResource resource){
    if(resource.isSynchronized(IResource.DEPTH_INFINITE)){
        try {                   
            IMarker[] markers = resource.findMarkers(IMarker.PROBLEM, true, IResource.DEPTH_INFINITE);
            if(markers != null && markers.length > 0){
                for(IMarker m : markers){
                    Object message = m.getAttribute(IMarker.MESSAGE);
                    if(message.equals("Cannot return from outside a function or method.")){                         
                        m.delete(); 
                    }                                   
                }
            }

        }catch (CoreException e) {              
            e.printStackTrace();
        }
    }       
}
} 
```

正如我所说，这是一个糟糕的解决方案，因为代码依赖于错误消息的字符串。应该有更好的方法来识别您不想遇到的问题。

不要忘记在您的 plugin.xml 中为`ValidationParticipant`.**

# iphone - iPhone上的插座连接

> ID：13153070
> 
> 赞同：0
> 
> 时间：2012-10-31T07:20:58.420
> 
> 标签：iphone, objective-c, sockets, mpmovieplayercontroller, nsxmlparser

我想在 iphone 和具有自己的 IP 地址、服务名称（例如“_abc._tcp”）的 Web 服务之间建立套接字连接，并且它还包含有关存储文件的信息。我怎样才能做到这一点？您能否提供一些示例代码或链接。

我的目标是开发一个应用程序，该应用程序将从该服务器获取视频文件到我的 iphone 并播放它。起初我尝试获取文件的信息，但我不知道如何连接到该服务器并使视频在我的 iPhone 上播放。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:25:20.050

在这里[CocoaAsyncSocket中有一个很棒的 objc 套接字编程库](https://github.com/robbiehanson/CocoaAsyncSocket)

这将对您有很大帮助。这些示例还展示了如何使用 NSNetServices 来广播 Bonjour 服务。

# class - 类是在内部构建的吗？

> ID：13153071
> 
> 赞同：2
> 
> 时间：2012-10-31T07:21:20.173
> 
> 标签：class, struct

我们可以使用结构实现类（带有方法的函数指针）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:24:01.907

这是*可以*做到的。事实上，在非常非常早期，C++ 是使用生成 C 代码的预处理器实现的，然后由 C 编译器编译。因此，如果您的语言具有结构和函数指针但没有类，则*可以*完成。它不是特别漂亮。

# iphone - 在 iOS 6 中的我的应用程序中显示 Iphone 的本机地图应用程序中的地图

> ID：13153077
> 
> 赞同：1
> 
> 时间：2012-10-31T07:21:42.493
> 
> 标签：iphone, objective-c, xcode4.5, ios6-maps

我想在 iphone 地图应用程序中显示地图。所以，当我点击地图按钮时，它应该导航到 iphone 应用程序。我的代码在 ios 6 之外运行良好。但我想要它在 ios 6.thanks 提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:26:36.400

[Apple在此处](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)记录其地图 URL 方案。您必须替换`maps.google.com`为`maps.apple.com.`

# javascript - 网络音频：Karplus 强弦合成

> ID：13153078
> 
> 赞同：7
> 
> 时间：2012-10-31T07:21:43.510
> 
> 标签：javascript, audio, html5-audio, web-audio-api

编辑：稍微清理了代码和播放器（在 Github 上），以便更容易设置频率

我正在[尝试](https://github.com/achalddave/Audio-API-Frequency-Generator/blob/master/strings.js)使用[Karplus Strong 字符串合成](http://en.wikipedia.org/wiki/Karplus%E2%80%93Strong_string_synthesis)算法来合成字符串，但我无法正确调整字符串。有谁有想法吗？

如上链接，代码在 Github：[https](https://github.com/achalddave/Audio-API-Frequency-Generator) ://github.com/achalddave/Audio-API-Frequency-Generator （相关位在 中`strings.js`）。

Wiki 有以下图表：

![Karplus 强弦合成图](../Images/4dbc64b8b8061b6b2a4919d7e69595e2.png)

所以本质上，我产生了噪声，然后将其输出并同时发送到延迟滤波器。延迟滤波器连接到低通滤波器，然后与输出混合。根据维基百科，延迟应该是 N 个样本，其中 N 是采样频率除以基频 ( `N = f_s/f_0`)。

我的代码摘录：

产生噪音（`bufferSize`是 2048，但这不应该太重要）

```
var buffer = context.createBuffer(1, bufferSize, context.sampleRate);
var bufferSource = context.createBufferSource();
bufferSource.buffer = buffer;

var bufferData = buffer.getChannelData(0);
for (var i = 0; i < delaySamples+1; i++) {
    bufferData[i] = 2*(Math.random()-0.5); // random noise from -1 to 1
} 
```

创建延迟节点

```
var delayNode = context.createDelayNode(); 
```

我们需要延迟`f_s/f_0`样品。但是，延迟节点以秒为单位获取延迟，因此我们需要将其除以每秒样本数，我们得到`(f_s/f_0) / f_s`，即`1/f_0`。

```
var delaySeconds = 1/(frequency);
delayNode.delayTime.value = delaySeconds; 
```

创建低通滤波器（据我所知，截止频率不应该影响频率，更多的是字符串“听起来”是否自然）：

```
var lowpassFilter = context.createBiquadFilter();
lowpassFilter.type = lowpassFilter.LOWPASS; // explicitly set type
lowpassFilter.frequency.value = 20000; // make things sound better 
```

将噪声连接到输出和延迟节点（`destination = context.destination`之前已定义）：

```
bufferSource.connect(destination);
bufferSource.connect(delayNode); 
```

将延迟连接到低通滤波器：

```
delayNode.connect(lowpassFilter); 
```

将低通连接到输出并返回延迟*：

```
lowpassFilter.connect(destination);
lowpassFilter.connect(delayNode); 
```

有没有人有任何想法？我不知道问题是我的代码、我对算法的解释、我对 API 的理解，还是（尽管这不太可能）是 API 本身的问题。

* * *

*请注意，在 Github 上，实际上在低通和输出之间有一个增益节点，但这对输出并没有太大的影响。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T19:39:09.083

这就是我认为的问题所在。我不认为该`DelayNode`实现旨在处理如此紧密的反馈循环。例如，对于 441 Hz 音调，这只有 100 个延迟样本，并且`DelayNode`实现可能以 128 个或更多块的形式处理其输入。~~（`delayTime`属性是“k-rate”，意味着对它的更改仅在 128 个样本的块中进行处理。这并不能证明我的观点，但它暗示了这一点。）所以反馈来得太晚了，或者只是部分地，或者其他的东西。~~

编辑/更新：正如我在下面的评论中所说，实际问题是一个循环中的延迟节点在输出和输入之间添加了 128 个样本帧，因此观察到的延迟`128 / sampleRate`比指定的长几秒。

我的建议（以及我已经开始做的）是实施整个 Karplus-Strong，包括您自己的延迟线 a `JavaScriptNode`（现在称为 a `ScriptProcessorNode`）。这并不难，一旦我摆脱了一个不可能存在但不知何故存在的恼人错误，我将发布我的代码。

顺便说一句，你（和我）用`delayTime`of `1/440`（应该是A）得到的音调似乎是G，比它应该的低两个半音。将频率加倍将其提高到 B，高四个半音。（我可能会偏离一个或两个八度音阶 - 很难说。）也许人们可以从像这样的更多数据点中弄清楚（数学上）发生了什么，但我不会打扰。

编辑：这是我的代码，经认证无错误。

```
var context = new webkitAudioContext();

var frequency = 440;
var impulse = 0.001 * context.sampleRate;

var node = context.createJavaScriptNode(4096, 0, 1);
var N = Math.round(context.sampleRate / frequency);
var y = new Float32Array(N);
var n = 0;
node.onaudioprocess = function (e) {
  var output = e.outputBuffer.getChannelData(0);
  for (var i = 0; i < e.outputBuffer.length; ++i) {
    var xn = (--impulse >= 0) ? Math.random()-0.5 : 0;
    output[i] = y[n] = xn + (y[n] + y[(n + 1) % N]) / 2;
    if (++n >= N) n = 0;
  }
}

node.connect(context.destination); 
```

# .net-4.5 - 在哪种情况下我们需要 ReadOnlyCollection？

> ID：13153083
> 
> 赞同：0
> 
> 时间：2012-10-31T07:22:26.647
> 
> 标签：.net-4.5

Dotnet 4.5 引入了[ReadOnlyCollection](http://msdn.microsoft.com/en-us/library/ms132474.aspx)。我的问题是它的实际用途是什么？什么场景下我们可能需要这种数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:26:19.943

当您的 API 将集合对象返回给调用者时，您需要只读集合，复制成本太高，您希望远离返回`IEnumerable<T>`。在需要对返回的集合进行随机访问的情况下，这通常是可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:26:27.163

当你想返回一个调用者不应该修改的集合，但你仍然希望得到一个保证`IList`，`IEnumerable`例如一个免费的 .Count 属性、一个索引器以及安全地多次迭代它的能力, 两者都不能保证在`IEnumerable`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:28:22.860

此类在多线程应用程序中很有用。在多线程环境中，拥有一组对象可能是一个真正的问题，这些对象可能会被其他线程更改。这确保了线程安全并降低了代码的复杂性。

# c# - asp.net gridview & sqldatasource 仅用于更新模式

> ID：13153089
> 
> 赞同：1
> 
> 时间：2012-10-31T07:22:57.343
> 
> 标签：c#, asp.net, gridview, updates

我有一个数据是从一个in函数`gridview`绑定的`arraylist``page_load`

```
 Node node = new Node();
    node.buildTree("all", "arraylist");
    al = node.getArrayList();
    GridView2.DataSource = al;
    GridView2.DataBind(); 
```

我想为此 gridview 启用更新模式，但我只知道使用`sqldatasource`来执行此操作。网格视图必须使用

```
DataSourceID="SqlDataSource1" 
```

链接数据源。但是在我使用之后

```
GridView2.DataSource = al;
GridView2.DataBind(); 
```

`gridview`限制我使用，`DataSourceID="SqlDataSource1"`要求我删除一个定义。

如何为此网格启用更新模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:02:30.857

如果你想使用网格视图的更新模式这个链接帮助你 [http://www.aspdotnet-suresh.com/2011/02/how-to-inserteditupdate-and-delete-data.html](http://www.aspdotnet-suresh.com/2011/02/how-to-inserteditupdate-and-delete-data.html)

但以其他方式，您可以使用 ItemCommand 事件。在这种情况下，您为字段“UpdateCommand”设置命令，然后在 ItemCommand 事件中检查 CommandName 是否为“UpdateCommand”，转到其他页面以获取更新记录。

# bash - 意外标记 `(' 附近的语法错误

> ID：13153101
> 
> 赞同：4
> 
> 时间：2012-10-31T07:23:54.983
> 
> 标签：bash, shell, ubuntu, cmd

我是在 ubuntu 中编写脚本的新手。

```
FOR /F "tokens=2 skip=4" %%G IN ('svn info --revision HEAD') DO... 
```

我收到以下错误-“意外标记'（'附近的语法错误”。有人可以告诉我为什么会收到此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:04:59.287

所以基本上你想做的是

1.  遍历命令输出的行`svn info --revision HEAD`
2.  从第 5 行开始
3.  将第二项/字段/列分配给变量`%%G`

在 Bash 中执行此操作的众多方法之一是

```
for variable in $(svn info --revision HEAD | awk 'NR>4 {print $2}'); do
  ... something fun ...
done 
```

这是做什么的

1.  您通过管道/“发送”`svn info --revision HEAD`到`awk`命令的输出。
2.  如果 NR（到目前为止处理的记录/行数）大于 4（即跳过前 4 行），`awk`则打印出第二列/字段/项目。
3.  然后整体`$(..)`被替换`awk`为类似的结果

    ```
    item2_line5
    item3_line6
    item2_line7
    .... 
    ```

4.  由于 Bash 的分词，每一行都被视为列表中的一个项目，并`for`遍历列表中的每个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:30:41.487

您的命令是**Windows**命令：在[此处](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true)`FOR`查看 Windows文档。

如果您在 Ubuntu 中工作，`man for`请在终端中输入，您将获得文档。

# grails - Flyway 对 Groovy 迁移和条件环境特定数据插入的支持

> ID：13153104
> 
> 赞同：4
> 
> 时间：2012-10-31T07:24:03.453
> 
> 标签：grails, groovy, flyway

我们正在开发一个 Grails 项目，并探索 Flyway 作为我们的数据库迁移工具。

在我们当前的架构中，我们依赖 Groovy 迁移脚本（在应用程序启动时执行）来进行条件环境特定的数据插入（例如，针对同一表中的 'other-data' 的生产，在 'tableA' 中使用 'some-data'表 A' 用于预生产）。

Q1。Flyway 是否支持 Groovy 迁移脚本？

Q2。如果不是，那么我们如何才能最好地实现有条件的特定于环境的数据插入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:08:10.007

**Q1：**基于 Java 的迁移在运行时作为二进制类加载。源代码是 Java 还是 Groovy 在这里并不重要。**所以是的，用 Groovy 编写它们应该可以工作。**

**Q2：** Flyway 支持从**多个位置**加载迁移。然后可以**根据环境对这些位置进行不同的配置**（在您的情况下为 PROD 和 PRE-PROD）。您可以使用它来包含基于 Flyway 运行环境的不同数据。

# iphone - 使用 facebook api 创建 facebook 活动并使用 flex mobile 发送邀请

> ID：13153107
> 
> 赞同：-1
> 
> 时间：2012-10-31T07:24:08.943
> 
> 标签：iphone, apache-flex, flex-mobile

我正在为 iphone 创建一个应用程序，用户可以在其中使用 facebook 登录，当他单击邀请时，必须在 facebook 中创建一个事件，并将其发送给 facebook 朋友。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:34:35.477

请参阅 facebook 开发人员文档以获取与创建事件相关的参考： [https ://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

您可以使用 FBFriendPickerDelegate 来选择朋友，然后使用他们的 id 来邀请参加活动

# debugging - 如何检测 MinGW 下的堆损坏错误？

> ID：13153110
> 
> 赞同：4
> 
> 时间：2012-10-31T07:24:18.557
> 
> 标签：debugging, mingw, heap-memory

如何调试 mingw 构建的二进制文件以检测堆错误？我看到关于这个主题有几个问题，但它们是一般性的，很难找到可以与 MinGW 一起工作的工具。我花了很多时间寻找解决方案，我希望合并后的主题会有所帮助。

例如，当有人在 Visual Studio 调试器下运行库时报告了您的库中的错误，这样的工具变得很有必要，该调试器以“堆错误”停止。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T07:24:18.557

Microsoft 提供了一个名为[Application Verifier](http://msdn.microsoft.com/es-es/library/ms220948(v=vs.90).aspx)的工具。它是一个 GUI 工具，可以更改系统设置以在受控环境中运行选定的应用程序。**如果它导致可检测的内存错误，**这使得您的程序崩溃成为可能。这是可以调试的受控崩溃。

幸运的是，它可以从 Microsoft[单独下载](http://www.microsoft.com/en-us/download/details.aspx?id=20028)。获得它的另一种方法是安装 Windows SDK 并选中*Application Verifier*复选框。SDK 还提供了一个选项*Application Verifier redistributable*。

在您配置应用程序验证程序以关注您的应用程序后，您需要对其进行调试。在 MinGW 下调试是一个更常见的主题，已经在 stackoverflow 上进行了解释。[[mingw] [debugging]](https://stackoverflow.com/questions/tagged/mingw+debugging)对 stackoverflow 的查询给出了有趣的文章。其中之一是[如何使用 MinGW gdb 调试器在 Windows 中调试 C++ 程序？](https://stackoverflow.com/q/4671900/772981). 我用的是gdb。

一般问题[如何调试堆损坏错误？](https://stackoverflow.com/q/1010106/772981)和[C++ 的堆损坏检测工具](https://stackoverflow.com/q/4689274/772981)有助于找到这个工具，但我不确定它是否与 MinGW 兼容。这是。

# core-data - 数据同步等核心数据的 iCloud 替代方案

> ID：13153119
> 
> 赞同：1
> 
> 时间：2012-10-31T07:25:11.270
> 
> 标签：core-data, synchronization, icloud

我计划开发一个使用数据库的应用程序。该数据库需要跨多个设备同步。我需要 iCloud + CoreData 之类的东西，但也可以在 Android 和 Windows 上工作

你知道这个神奇的东西是否存在吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:41:13.480

如果您需要连接没问题（没有完全离线模式） - StackMob 可以为您提供帮助。他们的 iOS SDK 甚至提供 CoreData 接口，如果你不喜欢它们 - 你有 REST API

您还应该看看：- Simperium（没有 Android SDK，只有 REST API）- Parse.com

# dynamic - 如何在 Angular.js 中延迟路由定义？

> ID：13153121
> 
> 赞同：33
> 
> 时间：2012-10-31T07:25:23.343
> 
> 标签：dynamic, configuration, url-routing, angularjs, deferred

我已经配置了一些所有用户在登录之前都可以使用的基本路由：

```
App.config(function ($routeProvider) {
    $routeProvider.
        when('/login', { templateUrl: 'views/login.html', controller: PageStartCtrl.Controller }).
        otherwise({ redirectTo: '/login' });
}); 
```

所以用户唯一能做的就是登录。用户登录后，我想注册额外的路由，如下所示：

```
$http
  .post('api/Users/Login', {   User: userName, Password: userPassword })
  .success(function (response : any) {
    App.config(function ($routeProvider) {
      $routeProvider
        .when('/dashboard', 
              { templateUrl: 'part/dashboard.html', 
              controller: DashboardCtrl.Controller });
  }); 
```

但是，我想我应该只调用一次 .config 方法，因为 $routeProvider 是全新的实例，对 /login 路由一无所知。进一步的调试表明，解决视图更改时使用了 $resourceProvider 的第一个实例。

Q：以后有办法注册路由吗？

[将路由和模板动态添加到 $routeProvider 的](https://groups.google.com/d/msg/angular/mrcy_2BZavQ/Mqte8AvEh0QJ)解决方案可能有效，但非常难看（涉及全局变量`nastyGlobalReferenceToRouteProvider`）。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-01T08:47:11.953

由于路由是在提供者级别定义的，因此通常只能在配置块中定义新路由。问题是在配置块中所有重要的服务仍然是未定义的（最值得注意的是`$http`）。所以，表面上看起来 w 不能动态定义路由。

现在，事实证明，**在应用程序生命周期的任何时候添加/删除路由都非常容易！**查看`$route` [源代码](https://github.com/angular/angular.js/blob/master/src/ng/route.js#L74)，我们可以看到所有路由定义都简单地保存在`$route.routes`哈希中，可以随时修改，如下所示（简化示例）：

```
myApp.controller('MyCtrl', function($scope, $route) {    
    $scope.defineRoute = function() {
        $route.routes['/dynamic'] = {templateUrl: 'dynamic.tpl.html'};
    };
}); 
```

这是演示此操作的 jsFiddle：http: [//jsfiddle.net/4zwdf/6/](http://jsfiddle.net/4zwdf/6/)

实际上，如果我们想要接近 AngularJS 所做的事情，那么路由定义逻辑应该更复杂一些，因为 AngularJS 还在定义重定向路由以正确处理`/`最后的路由（使其有效地可选）。

因此，虽然上述技术可行，但我们需要注意以下几点：

*   **这种技术取决于内部实现，如果 AngularJS 团队决定改变定义/匹配路由的方式，它可能会中断**。
*   也可以使用 定义`otherwise`路由，`$route.routes`因为默认路由存储在`null`键下的相同哈希中

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-19T04:43:22.927

我发现@pkozlowski.opensource 的答案仅适用于 angularjs 1.0.1。但是，angular-route.js在以后的版本中成为独立文件后，直接设置$route是行不通的。

查看代码后，我发现 $route.routes 的 key 不再用于匹配位置，而是使用 $route.route[key].RegExp 代替。在我复制原点时和 pathRegExp 函数后，路由工作。见jsfiddle：http: [//jsfiddle.net/5FUQa/1/](http://jsfiddle.net/5FUQa/1/)

```
 function addRoute(path, route) {
     //slightly modified 'when' function in angular-route.js
  }
  addRoute('/dynamic', {
    templateUrl: 'dynamic.tpl.html'
  }); 
```

# python - python中异常处理的库文件

> ID：13153128
> 
> 赞同：0
> 
> 时间：2012-10-31T07:25:57.543
> 
> 标签：python, exception-handling

我已经在 python 中编写了一个脚本，它对所有运行时异常都有除处理（catch 块）。如果我将 try 块与脚本放在同一个文件中，那么它会打印异常，但我需要的是 try 块是否位于不同的文件中文件然后是什么程序，它将使用脚本中编写的 catch 块。

```
import traceback
import sys
import linecache

try:
    # execfile(rahul2.py)

    def first():
        second()

    def second():
        i=1/0;

    def main():
        first()

    if __name__ == "__main__":
        main()    

except SyntaxError as e:
    exc_type, exc_value, exc_traceback = sys.exc_info()
    filename = exc_traceback.tb_frame.f_code.co_filename
    lineno = exc_traceback.tb_lineno
    line = linecache.getline(filename, lineno)
    print("exception occurred at %s:%d: %s" % (filename, lineno, line))
    print("**************************************************** ERROR ************************************************************************")
    print("You have encountered an error !! no worries ,lets try figuring it out together")
    print(" It looks like there is a syntax error in the statement:" , formatted_lines[2], " at line number " , exc_traceback.tb_lineno)
    print("Make sure you look up the syntax , this may happen because ")
    print(" Remember this is the error message always thrown " "'" ,e , "'") 
```

同样，我已经为其他例外写了...

现在我的问题是假设我想将此脚本用于所有程序，或者假设 try 块在不同的文件中......那么我如何链接我的脚本和具有 try 块的程序..

或者，如果我用不同的话来说，那么我想要的是每当有一个 try catch 块时，catch 块应该根据我的脚本而不是内置库执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:44:13.963

如果要在调用此异常的脚本中处理此异常，则需要引发异常。例如：

```
except SyntaxError as e:
       exc_type, exc_value, exc_traceback = sys.exc_info()
       filename = exc_traceback.tb_frame.f_code.co_filename
       lineno = exc_traceback.tb_lineno
       line = linecache.getline(filename, lineno)
       print("exception occurred at %s:%d: %s" % (filename, lineno, line))
       print("**************************************************** ERROR ************************************************************************")
       print("You have encountered an error !! no worries ,lets try figuring it out together")
       print(" It looks like there is a syntax error in the statement:" , formatted_lines[2], " at line number " , exc_traceback.tb_lineno)
       print("Make sure you look up the syntax , this may happen because ")
       print(" Remember this is the error message always thrown " "'" ,e , "'")
       #### Raise up the exception for handling in a calling script ####
       raise e 
```

然后在您的调用脚本中，您只需放置另一个 try-except 块（假设您编写的“库文件”称为 mymodule.py 并且两个文件都位于同一个工作目录中），如下所示

```
try:
   import mymodule
   mymodule.main()
except SyntaxError as e:
   print("Exception found") # Optional: Add code to handle the exception 
```

请记住，如果您未能处理此重新引发的异常，它将导致您的脚本失败并退出（打印异常消息和堆栈跟踪）。*这是一件好事。*如果恢复方法未知或无法以编程方式处理，则遇到致命错误的脚本*应该以引起用户注意的方式失败。*

# iphone - 电影播放完毕后在电影播放器 中显示控件

> ID：13153131
> 
> 赞同：3
> 
> 时间：2012-10-31T07:26:25.010
> 
> 标签：iphone, ios, video, mpmovieplayercontroller, movieplayer

我想在电影完成后显示电影播放器​​控件，所以我将观察者添加到 NSNotificationCenter ：

```
- (void)movieFinishedCallback:(NSNotification*)aNotification
{
    // Obtain the reason why the movie playback finished
    NSNumber *finishReason = [[aNotification userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];

    if ([finishReason intValue] == 0)
    {
        [self showControls];
    }

   // Handle other reasons 
}

- (void)showControls
{
    for(id views in [[[self.playerVC moviePlayer] view] subviews]){
        for(id subViews in [views subviews]){
            for (id controlView in [subViews subviews]){
                [controlView setAlpha:1.0];
                [controlView setHidden:NO];
            }
        }
    }
} 
```

到目前为止，一切都运行良好并且控件出现了，但是当我点击屏幕以隐藏它们时，控件消失并再次快速出现（类似于闪光灯），然后我需要再次点击视图以隐藏控制..

有人知道我为什么会遇到这个问题吗？或者有另一个想法在视频完成时显示控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-02T04:18:56.757

首先调试并打印 MPMoviePlayerView 的子视图并记下子视图并找到控制视图的名称。

这是我在我的应用程序中得到的调试。

```
Printing description of subViews:
<MPVideoContainerView: 0x7f936950f6e0; frame = (0 0; 375 667); autoresize = W+H; layer = <CALayer: 0x7f936950fa30>>
Printing description of controlView:
<MPVideoPlaybackOverlayView: 0x7f9369659a70; frame = (0 0; 375 667); alpha = 0; hidden = YES; autoresize = W+H; tag = 1004; layer = <CALayer: 0x7f93696c4710>>
Printing description of subViews:
<MPVideoContainerView: 0x7f936950f6e0; frame = (0 0; 375 667); autoresize = W+H; layer = <CALayer: 0x7f936950fa30>>
Printing description of views:
<MPSwipableView: 0x7f9369510290; frame = (0 0; 375 667); autoresize = W+H; gestureRecognizers = <NSArray: 0x7f9369510d30>; layer = <CALayer: 0x7f9369510620>>
```

然后我只是检查了控制视图的名称并将其从播放器中删除。将其设置为隐藏。

```
- (void)hideControls
{
    for(id views in [[player view] subviews]){
        for(id subViews in [views subviews]){
            for (id controlView in [subViews subviews]){
                if ( [controlView isKindOfClass:NSClassFromString(@"MPVideoPlaybackOverlayView")] ) {
                    [controlView setAlpha:0.0];
                    [controlView setHidden:YES];
                }
            }
        }
    }
}
```

# mysql - 如何在 Windows 上使用 check_mysql_health 插件？

> ID：13153145
> 
> 赞同：0
> 
> 时间：2012-10-31T07:27:19.733
> 
> 标签：mysql, nagios

如何在 windows 上使用 check_mysql_health 插件，请列出所有步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:26:57.847

这个链接 - [http://labs.consol.de/nagios/check_mysql_health/](http://labs.consol.de/nagios/check_mysql_health/)
解释了 check_mysql_health 的安装

*   假设您已准备好 Nagios 设置

*   假设您已按照创建插件的优秀绅士提到的所有步骤进行操作

*   假设您已允许 MySQL 通过 Windows 防火墙

*   假设您有可以访问 MySQL 的所有 USAGE 信息的用户（您可以使用 root 用户）

*   假设您可以从 Nagios 机器访问 windows MySQL 服务器（使用上述步骤中的同一用户）

任务完成。*（或者我根本没有理解问题）*

*你还需要步骤吗？*

# ldap - 在 TeamCity 7 中设置多个登录模块

> ID：13153148
> 
> 赞同：2
> 
> 时间：2012-10-31T07:27:29.843
> 
> 标签：ldap, continuous-integration, teamcity, teamcity-7.0

我将 TeamCity 7.1.1 用于我的持续集成服务器。对于我和我的所有同事，我设置了 jetbrains.buildServer.serverSide.impl.auth.LDAPLoginModule，它允许每个人使用他们的 Windows 帐户登录。

一些客户希望及时了解构建状态，因此我想创建自定义用户（没有 Active Directory 登录）并赋予他们“项目查看者”的角色。这不能以某种方式完成。我不想让用户创建自己的帐户。

我用谷歌搜索了一个解决方案，但我找不到它。我在 main-config.xml 的 auth-type 标记中添加了一个新的 login-module 标记，但这也不起作用。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:02:30.713

我在 jetbrains 问题跟踪器中提出了这个问题。请参阅此处的回复：http: [//youtrack.jetbrains.com/issue/TW-24268](http://youtrack.jetbrains.com/issue/TW-24268)

# android - Android中画廊的最佳替代品是什么？

> ID：13153149
> 
> 赞同：13
> 
> 时间：2012-10-31T07:27:32.797
> 
> 标签：android

我需要实现一个可以水平滚动的可点击图像库，并且不推荐使用*Gallery*小部件。什么是最好的替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:34:08.410

您可以使用`ImageView`which 将在滑动时水平滚动。对于滑动，您可以使用`onFling()`可以处理左右滑动的方法。阅读此帖子以进行手势[检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:34:18.043

您可能想要使用自定义水平列表视图（来自 dev-smart.com 的 Paul Soucy） [https://github.com/vieux/Android-Horizo ​​ntal-ListView](https://github.com/vieux/Android-Horizontal-ListView)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:02:27.270

使用[DevsmartLib-Android](https://github.com/dinocore1/DevsmartLib-Android)。此外，如果您不关心投掷，您可以使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T23:29:31.313

这个要好得多：[https ://github.com/sephiroth74/Horizo​​ntalVariableListView](https://github.com/sephiroth74/HorizontalVariableListView)

祝你好运！

# wcf - System.ServiceModel.Security.SecurityNegotiationException

> ID：13153151
> 
> 赞同：1
> 
> 时间：2012-10-31T07:27:45.130
> 
> 标签：wcf, wcf-security

我们有一个 WCF 服务，如果它部署在*localhost*上，我们就可以调用 service 方法，这意味着一切正常。

但是，当我们将服务部署到另一台服务器时，会出现错误：

```
System.ServiceModel.Security.SecurityNegotiationException occurred
  Message="The caller was not authenticated by the service."
  Source="mscorlib"
  StackTrace:
    Server stack trace:
        System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout)
        System.ServiceModel.Security.SspiNegotiationTokenProvider.OnOpen(TimeSpan timeout)
        System.ServiceModel.Security.WrapperSecurityCommunicationObject.OnOpen(TimeSpan timeout)
        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
        System.ServiceModel.Security.CommunicationObjectSecurityTokenProvider.Open(TimeSpan timeout)
        System.ServiceModel.Security.SecurityUtils.OpenTokenProviderIfRequired(SecurityTokenProvider tokenProvider, TimeSpan timeout)
        System.ServiceModel.Security.SymmetricSecurityProtocol.OnOpen(TimeSpan timeout)
        System.ServiceModel.Security.WrapperSecurityCommunicationObject.OnOpen(TimeSpan timeout)
        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
        System.ServiceModel.Channels.SecurityChannelFactory`1.ClientSecurityChannel`1.OnOpen(TimeSpan timeout)
        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
        System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.DoOperation(SecuritySessionOperation operation, EndpointAddress target, Uri via, SecurityToken currentToken, TimeSpan timeout)
        System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.GetTokenCore(TimeSpan timeout)
        CryptoPro.Sharpei.ServiceModel.CPSecuritySessionSecurityTokenProvider.GetTokenCore(TimeSpan timeout)
        System.IdentityModel.Selectors.SecurityTokenProvider.GetToken(TimeSpan timeout)
        System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecuritySessionChannel.OnOpen(TimeSpan timeout)
        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
        System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
        System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
        System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
        System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)
        System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
        System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
        System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
        System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]:
        System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
        System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
        Parus.BusinessObjects.ExternalServicesProxy.IAsurService.LoadCatalogItems(Decimal rn)
        Parus.BusinessObjects.ExternalServicesProxy.AsurServiceClient.LoadCatalogItems(Decimal rn) ? F:\!Work\8561\src\P8WebClient\Sources\Parus.BusinessObjects\Service References\ExternalServicesProxy\Reference.cs:?????? 154
        Parus.BusinessObjects.AsurDictionaries.AsurDictionariesLoader.Execute(ExternalAction action, ContentProvider contentProvider, IContextValueHolder contextValueHolder, ActionContext actionContext, OracleConnection connection) ? F:\!Work\8561\src\P8WebClient\Sources\Parus.BusinessObjects\AsurDictionaries\AsurDictionariesLoader.cs:?????? 19
  InnerException: System.ServiceModel.FaultException
       Message="Запрос маркера безопасности не удалось удовлетворить из-за сбоя проверки подлинности."
       Source="System.ServiceModel"
       Action="http://www.w3.org/2005/08/addressing/soap/fault"
       StackTrace:
            ? System.ServiceModel.Security.SecurityUtils.ThrowIfNegotiationFault(Message message, EndpointAddress target)
            ? System.ServiceModel.Security.SspiNegotiationTokenProvider.GetNextOutgoingMessageBody(Message incomingMessage, SspiNegotiationTokenProviderState sspiState)
       InnerException: 
```

我想我们应该更改 web.config 文件中的一些设置，但我不确定哪个以及它应该在服务端（在服务器上）还是在客户端或两者兼而有之？

# ios - 在 Web 服务调用响应中自动填充文本

> ID：13153154
> 
> 赞同：7
> 
> 时间：2012-10-31T07:28:02.097
> 
> 标签：ios, web-services, asynchronous-wcf-call, sendasynchronousrequest

我是 ios 编程的新手，需要实现类似谷歌搜索框的东西，即自动填充文本字段。我的场景如下 1.当用户在文本字段中输入 2.后台调用 web 服务获取数据（**请求数据 = 文本字段数据**）。

例如：- 如果用户在文本字段中键入“abc”，则 Web 服务调用的请求数据应为“abc”，并且 Web 服务会对此做出响应。现在下次用户键入“d”即文本字段包含“abcd”服务响应时必须考虑附加文本。（**类似于谷歌搜索字段**） 3.web 服务调用应该是异步的。4.response应该显示在下拉列表中。

ios可以吗？？？任何教程或示例将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:17:52.110

看在上帝的份上，我会假设您正在谈论的是 Restful Web 服务而不是 SOAP！

**是的，当然有可能**。您可以采用这种方法，我可以使用诸如[AFNetworking](https://github.com/AFNetworking/AFNetworking)之类的 HTTP 库来发出请求，但为了简单起见，我只是在后台使用 URL 的内容初始化 NSData 并使用[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)在主线程上更新 UI 。

1.  将您的 UITextField 委托设置为您正在处理的 ViewController`viewDidLoad:`方法

    ```
    textField.delegate = self; 
    ```

2.  覆盖`UITextField`委托方法`textField:shouldChangeCharactersInRange:replacementString:`：

    ```
    - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

        // To increase performance I advise you to only make the http request on a string bigger than 3,4 chars, and only invoke it
        if( textField.text.length + string.length - range.length > 3) // lets say 3 chars mininum
        {
            // call an asynchronous HTTP request
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

                NSURL * url = [[NSURL alloc] initWithString:[NSString stringWithFormat:@"http:/example.com/search?q=%@", textField.text]];
                NSData * results = [NSData dataWithContentsOfURL:url];
                NSArray * parsedResults = [NSJSONSerialization JSONObjectWithData: results options: NSJSONReadingMutableContainers error: nil];
               // TODO: with this NSData, you can parse your values - XML/JSON
               dispatch_sync(dispatch_get_main_queue(), ^{
                   // TODO: And update your UI on the main thread
                   // let's say you update an array with the results and reload your UITableView
                   self.resultsArrayForTable = parsedResults;
                   [tableView reloadData];
               });
            });

        }

        return YES; // this is the default return, means "Yes, you can append that char that you are writing
        // you can limit the field size here by returning NO when a limit is reached
    } 
    ```

如您所见，您需要习惯以下概念列表：

*   JSON 解析（我可以解析 XML，但为什么呢？！ JSON 更好！）
*   HTTP 请求（您可以使用 AFNetworking 而不是我上面所做的）
*   异步 HTTP 请求（不阻塞主线程）
*   GCD（`dispatch_async`东西）
*   代表（在本例中为 UITextField）

**性能更新**

*   在检查大小是否大于 3 个字符时，您甚至可以每 2/3 个字符发出一次 HTTP 请求，比方说，只请求 if `length % 3`。

我建议你读一些关于那些的

# django - 如何将 mongodb 2.2 的聚合功能与预聚合报告/集合一起使用

> ID：13153157
> 
> 赞同：0
> 
> 时间：2012-10-31T07:28:03.727
> 
> 标签：django, mongodb, pymongo, aggregation-framework

我有如下方式的预聚合集合：

```
DAILY_ANALYTIC.update(
{
  "_id": id_daily,
  "metadata": {"date": d,},
},
{
  "$inc": {
      "call_daily": 1,
      "call_hourly.%d" % (hour,): 1,
      "call_minute.%d.%d" % (hour, minute,): 1,                
    }
}, upsert=True) 
```

我想对 call_hourly 数据进行分组，为此我尝试了以下方式，但没有尝试

```
[
    {'$match': query_var},
    {'$group': {
        '_id': {'$substr': ['$_id', 0, 8]},            
        'call_per_hour': {'$addToSet' : '$call_hourly'},            
        }
    },
    {'$project': {            
        'call_per_hour': 1,            
        }
    },        
    {'$sort': {
        '_id': -1,            
        }
    }
] 
```

知道如何获得类似的结果

```
data['result'] = {'_id': '20121102', 'call_per_hour':[{u'3': 5, u'12': 6}]} 
```

或者

```
data['result'] = {'_id': '20121102', 'call_per_hour':[{u'0': 5, u'1': 6, u'2': 4,....,u'23': 2}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:34:05.463

按照您执行此操作的方式，您已经在文档中获得了所有可用的每小时呼叫计数。

由于您要为每次通话增加日期文档中的字段，因此如果您这样做：

```
db.daily_analytic.find({}, {"metadata.date":1, _id:0, call_hourly:1}) 
```

或类似的东西。

如果您觉得需要汇总并执行“ `$group`by”（即使您的代码已经在原始文档中预先分组），请从您的集合中提供几个示例文档（通过 mongo shell，您只需执行`db.daily_analytic.find().limit(2).pretty()`并粘贴输出到您的问题中），然后更容易看到您没有预先计算的值的聚合可能性。

# perl - 使用列号和行号制作错误日志

> ID：13153158
> 
> 赞同：1
> 
> 时间：2012-10-31T07:28:03.970
> 
> 标签：perl

我需要错误日志：我正在对 xml 文件进行标记验证和 DTD 验证。

XML:

```
 <?xml version="1.0"?>
 <purchaseOrder orderDate="1999-10-20">
    <shipTo country="US">
       <name>Alice Smith</name>
       <street>123 Maple Street</street>
       <city>Mill Valley</city>
       <state>CA</state>
       <zip>90952</zip>
    </shipTo>
     <billTo country="US">
        <name>Robert Smith</name>
        <street>8 Oak Avenue</street>
        <city>Old Town</city>
        <state>PA</state>
        <zip>95819</zip>
     </billTo>
     <comment>Hurry, my lawn is going wild<!/comment>
     <items>
        <item partNum="872-AA">
           <productName>Lawnmower</productName>
           <quantity>1</quantity>
           <USPrice>148.95</USPrice>
           <comment>Confirm this is electric</comment>
        </item>
        <item partNum="926-AA">
           <productName>Baby Monitor</productName>
           <quantity>1</quantity>
           <USPrice>39.98</USPrice>
           <shipDate>1999-05-21</shipDate>
        </item>
     </items>
  </purchaseOrder> 
```

脚本：

```
 use XML::LibXML;
my $parser = XML::LibXML->new;
$parser->validation(1);
$parser->parse_file("purchase.xml"); 
```

我的日志不正确，我需要

Error.log：purchase.xml：行号：列号：错误文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:44:40.310

您未能提供“不正确日志”的输出。

使用[Try::Tiny](https://metacpan.org/module/Try%3a%3aTiny)捕获验证错误并将其解析为您喜欢的格式。

```
use XML::LibXML;
use Try::Tiny;
my $parser = XML::LibXML->new;
$parser->validation(1);

try {
    $parser->parse_file("purchase.xml");
} catch {
    warn "XML parsing found errors: $_";
    parse_xml_error($_);
};

sub parse_xml_error {
    my $errors = shift;
    # ... left as en exercise for the reader
} 
```

# multithreading - 不同子进程中线程之间的共享队列

> ID：13153160
> 
> 赞同：1
> 
> 时间：2012-10-31T07:28:10.053
> 
> 标签：multithreading, perl, unix

我有 N 个 fork()ed 进程，每个进程都有 M 个线程（但当然，还有其他方法吗？）。线程应该等待作业被提交到某个队列中，并最终在同一个队列中发布一些结果。所有线程具有相同的优先级并尊重相同的数据流（deque() 一个任务， enque() 它的结果是一个新任务列表）。我应该如何进行队列实现？

我尝试使用[IPC::](http://search.cpan.org/~msouth/IPC-Shareable-0.61/lib/IPC/Shareable.pm) Shareable作为[@queue](http://cpansearch.perl.org/src/JDHEDDEN/Thread-Queue-2.12/lib/Thread/Queue.pm)快速重写[Thread::Queue](http://search.cpan.org/~jdhedden/Thread-Queue-2.12/lib/Thread/Queue.pm)，其中[enqueue()/dequeue()](http://cpansearch.perl.org/src/JDHEDDEN/Thread-Queue-2.12/lib/Thread/Queue.pm)使用两级（线程/进程）锁，但结果是错误的（真的不能[:share](http://search.cpan.org/~jdhedden/threads-shared-1.42/lib/threads/shared.pm) [IPC::Shareable](http://search.cpan.org/~msouth/IPC-Shareable-0.61/lib/IPC/Shareable.pm)的绑定数组）。我想我不想让每个线程都携带自己的[IPC::Shareable](http://search.cpan.org/~msouth/IPC-Shareable-0.61/lib/IPC/Shareable.pm)实例（不用想太多）？

[我是否应该通过IPC::Msg](http://search.cpan.org/~mhx/IPC-SysV-2.03/lib/IPC/Msg.pm)冻结/解冻任务并使用信号量实现锁和 CV，保持每个线程[IPC::Msg](http://search.cpan.org/~mhx/IPC-SysV-2.03/lib/IPC/Msg.pm)实例？在线程中直接实例化 IPC 原语听起来很奇怪（因此我尝试在线程级别：share IPC::Shareables）。

你们中的一些僧侣是否同时做到了正确和听起来？一个平面实现，没有中间件队列管理器等？你能分享一个想法，也许是一个模块？

谢谢！

PS 我宁愿不选择像 mpi、rabbitmq 等繁重的现有实现。

```
#!/usr/bin/perl
use strict;
use warnings;
use Carp qw/croak/;
use threads;
use threads::shared;

use insert::your::queue::impl::here;     

que_make_init();

my $numthreads = 4;
my $numprocs = 4;

sub runthreads 
{
    foreach (1..$numthreads) {
    @retcodes = map { $_->join } threads->create( sub {
        my $q = que_get_process_level_shared_instance();
        while ( (my $task = @q->get())) {
            @q->put(process($task));
        }
    });
    }
    #do_something(@retcodes) ...
    exit(0);

}

my %proctable = map {
        croak unless defined (my $pid = fork());
        runthreads if $pid == 0;
        $pid => -1;
    } (0..$numprocs-1);

#waitpid(), etc
__END__ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:03:55.510

您可以使用 Cache::FastMmap。在每个线程/进程中使用相同的 share_file ，你就很好了。

窗体 POD：

“通过 mmap 文件实现的共享内存缓存。它的核心是用 C 语言编写的以提高性能。它使用 fcntl 锁定来确保多个进程可以同时安全地访问缓存。”

```
my $Cache = Cache::FastMmap->new(raw_values => 1, share_file => "/tmp/shared_file.shm"); 
```

# c# - 将代码从 MFC 移植到 C#

> ID：13153164
> 
> 赞同：0
> 
> 时间：2012-10-31T07:28:26.960
> 
> 标签：c#, interface, mfc, porting

我将一些代码从 c++ MFC 更改为 c# 并有几个问题：

1) 在 MFC 中，我有一个 CByteArray 变量。在 c# 中我应该给这个变量什么类型？

2）我有我必须使用的ac#接口。在 MFC 中，我使用 CoCreate 连接到它：

```
hRet = m_pConverterImpl.CoCreate ( CLSID_Converter, IID_IConverter ); 
```

我应该如何从 c# 连接到这个接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:42:58.517

1.  您可以使用[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) : `List<byte>`。根据您的使用情况，[MemoryStream](http://msdn.microsoft.com/en-us/library/9a84386f.aspx)也可能是合适的。
2.  这是一个*COM*接口。[在您的项目中添加对其 DLL 的引用](http://msdn.microsoft.com/en-us/library/ms404285.aspx)，VisualStudio 将为您创建一个合适的 C# 包装类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:04:37.333

可以使用 Activactor.CreateInstance(Type.GetTypeFromCLSID(clsId));

# list - 使用列表从 SQLite 检索数据时出现问题

> ID：13153167
> 
> 赞同：0
> 
> 时间：2012-10-31T07:28:53.287
> 
> 标签：list

我正在从表中获取数据作为列表并将其添加到子列表中，但我得到了我没想到的输出。我不知道如何解决这个问题，这样我才能得到我需要的输出。我附上了代码，请帮我解决这个问题？

```
public List<List<String>> fetchData(){
        List<List<String>> main= new ArrayList<List<String>>();
        List<String> sub= new ArrayList<String>();
        String qry="SELECT * FROM "+myTable+"";
        SQLiteDatabase db= this.getReadableDatabase();
        Cursor cursor=db.rawQuery(qry, null);
        if (cursor.moveToFirst()) {
            do {
                System.out.println("-TblPOmaster-");
                sub.add(cursor.getString(0));               
                sub.add(cursor.getString(1));
                sub.add(cursor.getString(2));
                main.add(sub);
                System.out.println("Data:"+main);
            } while (cursor.moveToNext());      
        }
        cursor.close();
        db.close();
        return main;
    }

Output what i'm Getting Now
Data:[[a1,a2,a3]]
Data:[[a1,a2,a3,b1,b2,b3],[a1,a2,a3,b1,b2,b3]]
Data:[[a1,a2,a3,b1,b2,b3,c1,c2,c3],[a1,a2,a3,b1,b2,b3,c1,c2,c3],[a1,a2,a3,b1,b2,b3,c1,c2,c3]]

    Output what i need
        Data:[[a1,a2,a3]]
        Data:[[a1,a2,a3],[b1,b2,b3]]
        Data:[[a1,a2,a3],[b1,b2,b3],[c1,c2,c3]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:34:18.550

使用它，因为您必须重新引用新的数组列表

```
public List<List<String>> fetchData(){
    List<List<String>> main= new ArrayList<List<String>>();

    String qry="SELECT * FROM "+myTable+"";
    SQLiteDatabase db= this.getReadableDatabase();
    Cursor cursor=db.rawQuery(qry, null);
    if (cursor.moveToFirst()) {
        do {
            System.out.println("-TblPOmaster-");
            List<String> sub= new ArrayList<String>();
            sub.add(cursor.getString(0));               
            sub.add(cursor.getString(1));
            sub.add(cursor.getString(2));
            main.add(Sub);
            System.out.println("Data:"+main);
        } while (cursor.moveToNext());      
    }
    cursor.close();
    db.close();
    return main;
} 
```

# sql - SQL 使用 SQL 脚本更改 varchar2 数据类型中的值

> ID：13153170
> 
> 赞同：0
> 
> 时间：2012-10-31T07:29:01.940
> 
> 标签：sql, oracle

我这里有问题。在我的数据库中，我在`mobile_phone`列中有值，`628932323`但我想更改使用的每一行`62 to 0`

```
old value : 628932323
new value : 08932323 
```

有人可以帮我解决我的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:26:28.433

如果您使用的是 oracle 10g 或更高版本，则可以使用 regexp_replace 函数[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm)

```
select regexp_replace(your_column, '62([:digit:]*)', '0\2')
from your_table; 
```

或者更老式的方式没有：

```
select case
         when your_column like '62%' then '0' || substr(your_column, 3)
       else
         your_column
       end
from your_table; 
```

请注意电话号码字符串中的前导空格或其他字符。

# mysql - 来自不同表的同名列

> ID：13153171
> 
> 赞同：1
> 
> 时间：2012-10-31T07:29:06.370
> 
> 标签：mysql

有以下代码：

```
SELECT a.*
 , tb_media.filename
 , tb_galleries.name
 , tb_media_iptc.description
 , tb_media_iptc.title
 , tb_media_iptc.headline
 , tb_folders.name
FROM 
```

我对列名（不是我的数据库设计）无能为力，如何区分结果中称为“名称”的两个列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:36:31.593

您应该为具有相同名称的任何列提供别名：

```
SELECT a.*
 , tb_media.filename
 , tb_galleries.name as Name1
 , tb_media_iptc.description
 , tb_media_iptc.title
 , tb_media_iptc.headline
 , tb_folders.name as Differentname
FROM 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T07:30:33.953

您应该使用别名 -

```
SELECT a.*
 , tb_media.filename
 , tb_galleries.name AS gallery_name
 , tb_media_iptc.description
 , tb_media_iptc.title
 , tb_media_iptc.headline
 , tb_folders.name AS folder_name
FROM 
```

关键字**AS**可以省略 -`tb_galleries.name gallery_name`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T07:30:41.987

只需在使用`AS`.

例子：

```
SELECT a.*
 , tb_media.filename
 , tb_galleries.name AS 'tb_g_name'
 , tb_media_iptc.description
 , tb_media_iptc.title
 , tb_media_iptc.headline
 , tb_folders.name AS 'tb_f_name'
FROM 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T07:32:26.123

```
SELECT a.*
 , tb_media.filename
 , tb_galleries.name AS name_1
 , tb_media_iptc.description
 , tb_media_iptc.title
 , tb_media_iptc.headline
 , tb_folders.name AS name_2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T07:30:48.243

```
SELECT a.*
 , tb_media.filename
 , tb_galleries.name as Name1
 , tb_media_iptc.description
 , tb_media_iptc.title
 , tb_media_iptc.headline
 , tb_folders.name as Name2
FROM 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T07:37:51.017

您可以使用列别名来区分名称。

```
 Have the following code:

       SELECT a.*
       , tb_media.filename
       , tb_galleries.name  as gallery_name ---(or whatever name u want)
       , tb_media_iptc.description
       , tb_media_iptc.title
       , tb_media_iptc.headline
       , tb_folders.name as folder_name ---(or whatever name u want)
       FROM 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-31T07:42:38.527

您可以使用 AS 关键字：

```
SELECT a.*
 , tb_media.filename
 , tb_galleries.name AS galleryName
 , tb_media_iptc.description
 , tb_media_iptc.title
 , tb_media_iptc.headline
 , tb_folders.name AS foldersName
FROM 
```

这将更改列的显示名称...

# java - 如何处理不同 url 的 servlet 会话？

> ID：13153176
> 
> 赞同：0
> 
> 时间：2012-10-31T07:29:35.983
> 
> 标签：java, jakarta-ee, servlets

我有一个使用过滤器 servlet 来创建会话的 Web 应用程序，但我遇到的会话问题如下：

```
url1: localhost:8080/home.html

url2: localhost:8080/user/1.html 
```

如果用户访问第`url1`一个，它将创建一个会话，如果用户导航到`url2`. 它不会创建第二个会话。

但是如果用户`url2`首先访问，它将创建一个会话，如果用户导航到`url2`. 它将创建第二个新会话。

它出什么问题了？

如果用户首先访问，它看起来会创建一个 JSESSIONID cookie`/`和另一个。`/user``url2`

我的代码在这里：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException  {
String errorMsg = null;
if (request instanceof HttpServletRequest && response instanceof HttpServletResponse)
{
  final HttpServletRequest httpRequest = (HttpServletRequest) request;
  final HttpServletResponse httpResponse = (HttpServletResponse) response;
  httpRequest.setCharacterEncoding("UTF-8");
  HttpSession httpSession = httpRequest.getSession(false);
  String path = httpRequest.getServletPath();

  if ("/login.htm".equals(path)){
       String mail = httpRequest.getParameter("mail");
      String password = httpRequest.getParameter("password"); 

      if ((!Utils.isNull(mail)) && (!Utils.isNull(password)))
      {
        UserDTO dto = new UserDTO();
        dto.setPassword(password);
        dto.setMail(mail);
        dto = is.loginValidate(dto);

        if(dto!=null){
            dto.setClientid(httpRequest.getHeader("User-Agent") + httpRequest.getRemoteAddr());
            httpSession.setAttribute("system.userinfo", dto);
            is.saveLastLoginDate(httpRequest);
        }
      }
  }else{
      if(httpSession==null){
          httpSession = httpRequest.getSession(true);
      }
      Object obj = httpSession.getAttribute("system.userinfo");
      if(obj==null){
        UserDTO dto = new UserDTO();
        dto.setUid(GUESTID);
        dto.setClientid(httpRequest.getHeader("User-Agent") + httpRequest.getRemoteAddr());
        httpSession.setAttribute("system.userinfo", dto);
      }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:11:21.997

看来是环境问题，换一台电脑，问题就解决了

# c# - 如何生成 soundcloud oauth 令牌（访问令牌）

> ID：13153177
> 
> 赞同：1
> 
> 时间：2012-10-31T07:29:44.733
> 
> 标签：c#, asp.net, soundcloud

我有一个 asp.net Web 应用程序，我正在尝试使用此方法在 Soundcloud 上上传曲目：[Connecting to and uploading track with Soundcloud API using C# .NET](https://stackoverflow.com/questions/11892440/connecting-to-and-uploading-tracks-with-soundcloud-api-using-c-sharp-net)

我在 soundcloud 上创建了一个应用程序，但我不知道如何生成我的 oauth 令牌 [oauth_token]

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:23:40.717

oauth 令牌是每个用户在授权您的应用后获得的东西。对于服务器端 Web 应用程序，您可以使用应用程序的 API 凭据将用户重定向到 SoundCloud 授权 URL，以便他们可以登录并批准您的请求。

当他们批准您的授权请求时，它们会被发送到`redirect_uri`您在注册您的应用程序时指定的。此响应中有一个代码（`code`在查询字符串中），您将交换所需的 oauth 令牌（在本例中称为 oauth 令牌`access_token`）。然后你需要保存它`access_token`（与该用户相关联）。

我最近创建了一个 SO 帖子，其中`C#`包含详细说明如何执行此操作的代码：[如何让用户使用 SoundCloud 登录我的网站](https://stackoverflow.com/questions/14973017/how-to-authenticate-soundcloud-via-oauth2)。您还可以将其用作您网站的身份验证方法（以及帖子的内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:04:19.517

您不会自己生成它，而是从 SoundCloud API 获得它。您必须首先使用您的 client_id、client_secret 和 redirect_url 进行授权，然后在 redirect_url（soundcloud 服务器将调用它应该是您服务器上的某个脚本）中，您可以从 GET 参数“code”中获取令牌。然后在下一步中，您可以将代码交换为访问令牌。

这是他们在 PHP 中的示例代码：

```
<?php
// start.php
require_once 'Services/Soundcloud.php';

// create client object with app credentials
$client = new Services_Soundcloud('CLIENT_ID', 'CLIENT_SECRET', 'REDIRECT_URL');

<?php
// callback.php
// exchange authorization code for access token
$code = $_GET['code'];
$access_token = $client->accessToken($code); 
```

# html - HTML 颜色和边距呈现不同（相同的代码、css 和浏览器）

> ID：13153178
> 
> 赞同：0
> 
> 时间：2012-10-31T07:29:53.580
> 
> 标签：html, css, nginx, margins, php

在此处输入图像描述有一个 div 网格，其间隔为 margin-left:13px。当您在 herokuapp.com 上查看该站点时，它看起来是正确的（13px 边距）。当我在自己的内部服务器上查看它时，即使 css 和代码相同，它也是 17px。当我用 chrome 检查元素时，它显示 13px 的边距和无法解释的 4px 的添加，我似乎无法在任何地方追踪！

背景颜色也不同，十六进制代码相同（#F2D900）...我认为它必须是我的网络服务器（因为它是唯一的区别），但我不知道网络服务器会影响页面的方式呈现客户端？

有人听说过这个吗？

我的服务器是： - nginx 1.2.1 - php-fpm（尽管页面没有 php 代码）运行在：Amazon AMI ec2）

正确的![在此处输入图像描述](../Images/dde64398e08ac5028c98dcb8a27638da.png)

万基 ![在此处输入图像描述](../Images/5b2889a085bc0bcba2696526ff9f611d.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T07:43:41.367

服务器生成的页面上的某处可能有某种工件。这可能会影响页边距在网站某处的显示方式。

# c# - 构建错误需要重新启动 Visual Studio 2010

> ID：13153180
> 
> 赞同：1
> 
> 时间：2012-10-31T07:30:01.537
> 
> 标签：c#, visual-studio-2010, tfs, build-error

我们正在使用 Windows 7 64 位作为操作系统，使用 Visual Studio 2010 和 Team Foundation Server 2010 开发 C#-Application。

本地编译时经常发生构建错误。重新启动 Visual Studio 后，这些错误就消失了。

我认识到，当从 TFS 签出代码库中的较大更改时尤其如此。清洁溶液无济于事。

这看起来像是 Visual Studio 的一个非常奇怪的行为。有谁知道如何解决这个问题？

# android - 从用户登录的帐户发送电子邮件 - Android

> ID：13153182
> 
> 赞同：0
> 
> 时间：2012-10-31T07:30:30.803
> 
> 标签：android

我正在开发一个 android 应用程序，我在其中遇到了这个问题，需要在后台从我的应用程序发送一封电子邮件，而用户在 android 设备中同步的帐户中没有任何 UI。需要一些想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:44:32.323

您可以使用 JavaMail API 来处理您的电子邮件任务。JavaMail API 在 JavaEE 包中可用，其 jar 可供下载。请注意，它不能直接在 Android 应用程序中使用，因为它使用与 Android 不兼容的 AWT 组件。所以你需要为此使用android端口：

您可以在此处找到 JavaMail 的 Android 端口：

[http://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)

将罐子添加到您的应用程序并使用 SMTP 方法。

有关如何执行此操作的示例，请参见此线程：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

如果没有以下任何一项，就无法静默发送电子邮件：

*   首先让用户知道并接受它（通过使用意图和电子邮件提供商）

*   在使用上述电子邮件 API 之前询问用户名和密码（用户将通过输入这些值隐含地批准您发送/接收电子邮件）

这种设计是出于安全原因，不太可能改变。

有一个正在进行的项目可以让你这样做，但它可能还不成熟，我不建议这样做。这是链接：

[https://code.google.com/p/google-authenticator-for-android/](https://code.google.com/p/google-authenticator-for-android/)

# automated-tests - 小工具的自动化测试

> ID：13153184
> 
> 赞同：0
> 
> 时间：2012-10-31T07:30:34.967
> 
> 标签：automated-tests, wso2, opensocial, google-gadget

我正在寻找一些我将在 WSO2 小工具服务器中运行的[小](http://docs.opensocial.org/display/OS/Home)[工具](http://wso2.com/products/gadget-server/)。在开始之前，我想了解如何使用自动化测试框架测试小工具。

标准的网络浏览器自动化测试（例如 selenium）可以用于小工具吗？如果没有，是否有任何文档或 wiki 页面显示如何进行自动化小工具测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:32:59.530

Selenium 是对小工具进行自动化测试的最佳选择。因为它将从 UI 级别进行测试。

# sockets - Opera-Mini 使用什么协议进行 Socket 通信？

> ID：13153195
> 
> 赞同：2
> 
> 时间：2012-10-31T07:31:07.197
> 
> 标签：sockets, networking, network-protocols, opera-mini

我用opera-mini记录了我的手机浏览网页，并用wireshark查看了流量。我试图理解它使用的协议，因为它对我来说并不熟悉。我认为这将是某种 socks5 协议，但它不是，它可能是一些私有加密协议“驱动”在 tcp 端口 1080 上，而不是 RFC 中的 Socks 协议？这种交互还有其他协议吗？socks5 数据以“05”开头，但opera-mini tcp 数据以其他内容开头。我看不到所有客户端-服务器数据包或服务器-客户端数据包共享的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:21:06.603

Opera Mini 与其代理的通信通过服务器以[Opera 二进制标记语言](http://dev.opera.com/articles/view/opera-binary-markup-language/)提供内容进行[加密](http://en.wikipedia.org/wiki/Opera_Mini#Privacy_and_security)。

由于 Opera 在这里同时控制客户端和服务器，因此它们无需使用任何现有的开放协议进行客户端-服务器通信。他们可以自由定义他们喜欢的任何协议，对其使用进行优化以允许更快的页面加载并对其进行加密以使用户受益和/或保护他们向网络运营商收取代理费用的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:58:22.747

该协议前段时间已经进行了逆向工程，甚至还有一个 Google Chrome 客户端 - [OMPD](http://ompd-proxy.narod.ru/)。检查其源代码（解压缩 crx 文件）以了解其工作原理。

# php - 使用 PHP 的长浮点数

> ID：13153198
> 
> 赞同：-4
> 
> 时间：2012-10-31T07:31:23.470
> 
> 标签：php

我有号码`2.23456789`，我想通过使用 PHP 获得它只有 2.23，但我不知道如何做到这一点，请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:33:22.780

您可以使用该`round(value,precision)`功能。在您的情况下，请使用：

```
round(2.23456789,2); 
```

有关更多信息，请查看 PHP 手册： http: [//php.net/manual/en/function.round.php](http://php.net/manual/en/function.round.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:33:10.550

你只是想要[`round`](http://php.net/round)号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:33:52.127

使用 phps[`number_format`](http://php.net/manual/en/function.number-format.php)函数。

# android - Android：动画编辑文本的问题？

> ID：13153199
> 
> 赞同：8
> 
> 时间：2012-10-31T07:31:28.553
> 
> 标签：android, animation, android-edittext

当用户开始编辑它时，我尝试为 edittext 设置动画。我试过下面的代码，

```
 EditText txtPassword = (EditText) findViewById(R.id.editText1);  
 Animation  anim = AnimationUtils.loadAnimation(getApplicationContext(),R.anim.anim);
 anim.setInterpolator((new AccelerateDecelerateInterpolator()));
 anim.setFillAfter(true);
txtPassword.startAnimation(anim);

anim.xml
````````
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromYDelta="0" android:toYDelta="-50%p" android:duration="100"/>
</set> 
```

动画效果很好。但是edittext在动画后停止了用户交互。如果用户触摸屏幕编辑文本的前一个位置，就会出现键盘。但实际上在新位置的edittext应该响应。我必须做什么？

![在此处输入图像描述](../Images/8c72009325d26b0abf7c7ad3426709f7.png)

![在此处输入图像描述](../Images/2db0c176e04b80e7d7928e312a1a3f30.png) 我希望有人可以用正确的英文格式编辑我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:53:22.937

（有用的提示：有一个 Android 库用于在所有版本的平台上使用 Honeycomb (Android 3.0) 动画 API 回到 1.0！。它被称为[NineOldAndroid](http://nineoldandroids.com/)。）

（有用的提示（Android 开发者，[View](http://developer.android.com/reference/android/view/View.html)）：从 Android 3.0 开始，动画视图的首选方式是使用 android.animation 包 API。这些基于 Animator 的类会更改 View 对象的实际属性，例如 alpha 和 translationX。这种行为与 3.0 之前的基于动画的类的行为形成对比，后者仅对视图在显示器上的绘制方式进行动画处理。特别是，ViewPropertyAnimator 类使这些 View 属性的动画制作变得特别容易和高效。）

（请注意：以下解决方案适用于预蜂窝。）

与 iOS 相比，android 的动画有点难以理解。你需要知道这一点；

*   只有 Android View 子类的幽灵是动画的。
*   坟墓还在祖先坐标

所以解决方案可能是；

*   阻止触摸事件查看

    `animatingView.setEnabled(FALSE);`

*   动画视图

*   删除动画视图

    `animatingView.setVisibility(GONE); (animatingView.getParent()).removeView(animatingView);`

*   将视图的精确副本添加到新坐标。

# android - 如何在 Android 中使用 TextView 显示圆形文本

> ID：13153201
> 
> 赞同：15
> 
> 时间：2012-10-31T07:31:33.687
> 
> 标签：android, android-layout, textview

我想在我的android应用程序中显示圆形文本。我知道它是用custome textview完成的，但是一些朋友可以给我正确的代码。我还附上了我想要的外观类型的图像。

![在此处输入图像描述](../Images/ecea1d7a90c70edacc15f18858884a14.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-07T15:27:21.723

您可以尝试这个经过测试且完整的工作代码：

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new GraphicsView(this));
    }

    static public class GraphicsView extends View {
        private static final String QUOTE = "This is a curved text";
        private Path circle;
        private Paint cPaint;
        private Paint tPaint;

        public GraphicsView(Context context) {
            super(context);

            int color = Color.argb(127, 255, 0, 255);

            circle = new Path();
            circle.addCircle(230, 350, 150, Direction.CW);

            cPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            cPaint.setStyle(Paint.Style.STROKE);
            cPaint.setColor(Color.LTGRAY);
            cPaint.setStrokeWidth(3);

            setBackgroundResource(R.drawable.heart);

            tPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            tPaint.setStyle(Paint.Style.FILL_AND_STROKE);
            tPaint.setColor(Color.BLACK);
            tPaint.setTextSize(50);
        }
        @Override
        protected void onDraw(Canvas canvas) {
            canvas.drawTextOnPath(QUOTE, circle, 485, 20, tPaint);
        }
    }
} 
```

输出将是：

![在此处输入图像描述](../Images/ab67d417a137159e2bfced051b69da18.png)

希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T07:53:51.283

创建自定义视图并覆盖 onDraw。在 onDraw 中，创建一个路径并使用 drawTextOnPath。像这样的东西。textToDraw 是您要显示的文本。油漆是你想要的任何油漆。

```
@Override onDraw(Canvas canvas){
    Path path = new Path();
    path.addCircle(x, y, 200, Path.Direction.CW);
    canvas.drawTextOnPath(textToDraw, path, textX, textY, paint);
} 
```

[http://developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html) [http://developer.android.com/reference/android/graphics/Canvas.html#drawTextOnPath(java.lang.String, android.graphics .Path、float、float、android.graphics.Paint)](http://developer.android.com/reference/android/graphics/Canvas.html#drawTextOnPath%28java.lang.String,%20android.graphics.Path,%20float,%20float,%20android.graphics.Paint%29)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T12:02:31.897

您必须像这样创建自己的对象“视图”

```
public class YourView extends View {
    private static final String YOUR_TEXT = "something cool";
    private Path _arc;

    private Paint _paintText;

    public YourView(Context context) {
      super(context);

      _arc = new Path();
      RectF oval = new RectF(50,100,200,250);;
      _arc.addArc(oval, -180, 200);
      _paintText = new Paint(Paint.ANTI_ALIAS_FLAG);
      _paintText.setStyle(Paint.Style.FILL_AND_STROKE);
      _paintText.setColor(Color.WHITE);
      _paintText.setTextSize(20f);

    }

    @Override
    protected void onDraw(Canvas canvas) {
      canvas.drawTextOnPath(YOUR_TEXT, _arc, 0, 20, _paintText);
      invalidate();
    }
} 
```

然后将其用作您的 TextView :) 希望对您有所帮助

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-07T14:22:08.950

您可以在 SDK 目录中查看与 android SDK 捆绑在一起的 APIDemo 源代码。

示例“图形/文本对齐”（文件 TextAlign.java）显示了如何沿路径显示文本： ![路径的屏幕截图](../Images/1a48a94cf1773fd03c7c77f68e7a733b.png)

然后你可以调整它来构建你的屏幕。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-31T08:00:49.313

您已经使用自定义视图来实现它，例如在 onDraw 方法中：

```
Path path = new Path();
path.addCircle(x, y, radius, Path.Direction.CW);
myCanvas.drawTextOnPath(myText, path, offset, 0, myPaint); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-03T06:15:26.660

试试下面的代码..

```
onDraw(Canvas canvas){
 Path path = new Path();
 path.addArc(oval, startAngle, sweepAngle) 
 path.addArc(oval, 0, 180) 
 } 
```

这可能有效....

* * *

## 回答 #7

> 赞同：-11
> 
> 时间：2012-10-31T07:36:46.260

你不需要做自定义视图。找到正确`TypeFace`的，放入您的项目并设置为您的`TextView`

或使用 microsoft office word art 并将图像复制到您的项目

![在此处输入图像描述](../Images/dbf8ad022b46cb7b347f4313f0d00d5b.png)

# ios - 如何在 iOS 应用程序中缓冲视频并保存在本地数据库中？

> ID：13153202
> 
> 赞同：0
> 
> 时间：2012-10-31T07:31:41.380
> 
> 标签：ios, database, core-data, video, video-streaming

我正在创建一个应用程序，其中有一个链接可以下载大约 50 MB 大小的视频并播放。当用户点击链接时，视频应该开始缓冲（就像在 YouTube 中一样）并且应该保存在本地数据库中。我试图为每个任务运行一个单独的线程。一个线程将缓冲，另一个线程将下载视频并保存在本地数据库中，但是由于视频的大小约为 50 MB，因此极大地增加了内存分配，所以有什么方法可以完成此任务，我的意思是播放视频和在本地保存？我可以将视频数据保存为缓冲吗？如果有任何用于此目的的示例应用程序，请告诉我，如果我在任何时候不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:02:05.987

我对这个问题的处理方法与你的略有不同。

我会将任何视频下载并保存为文件，并且只将它们的位置存储在您的核心数据数据库中。然后可以将主线程上的视频播放器定向到正在下载的本地文件，大概在另一个线程中。

# eclipse-plugin - Eclipse 插件安装错误——MD5 未匹配

> ID：13153206
> 
> 赞同：1
> 
> 时间：2012-10-31T07:31:54.150
> 
> 标签：eclipse-plugin

我的 Eclipse 设置有问题。我无法通过市场安装任何插件。我在公司防火墙后面，对于互联网连接，我们使用的是 http 代理。

以下是我面临的错误

```
!SESSION 2012-10-31 10:58:24.690 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.6.0_31
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product --clean
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product --clean

!ENTRY org.eclipse.equinox.p2.engine 4 4 2012-10-31 11:04:54.223
!MESSAGE An error occurred while collecting items to be installed
!SUBENTRY 1 org.eclipse.equinox.p2.engine 4 0 2012-10-31 11:04:54.223
!MESSAGE session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
!SUBENTRY 1 org.eclipse.equinox.p2.artifact.repository 4 0 2012-10-31 11:04:54.223
!MESSAGE Problems downloading artifact: osgi.bundle,org.zeroturnaround.eclipse,5.1.0.RELEASE-201210221548.
!SUBENTRY 2 org.eclipse.equinox.p2.artifact.repository 4 1203 2012-10-31 11:04:54.223
!MESSAGE MD5 hash is not as expected. Expected: 4301b98a3bd7585b8f569a7576c541cd and found 2de8fa46c5bbe202ef4d1e67e1d7e1bd. 
```

在此先感谢您的帮助 ！！！

# c# - Windows 服务给出说明：

> ID：13153214
> 
> 赞同：20
> 
> 时间：2012-10-31T07:32:30.037
> 
> 标签：c#, windows-services

我已经厌倦了通过注册表卸载禁用的 Windows 服务它已从注册表中删除，但仍显示在 Services.msc 中

> 描述：未能读取描述错误代码 2

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-10T09:36:14.257

**直觉/你是如何到达那里的 -**

我假设您执行了其中一项或两项操作以进入此错误消息。a.通过 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services 从注册表中手动删除密钥并从此处删除服务）

b.此服务处于“自动”启动状态-因此，删除该服务以某种方式误导了“自动启动”-因此产生了此代码 Failed to read description 错误代码 2 。原因如下 - 在执行此操作之前，您应该停止服务，或将其更改为“手动启动”。

**如何解决它以及对我有用的方法-**

[1]在管理员模式下进入 cmd 提示符（意思是选择 cmd ->“以管理员身份运行”）

你应该在**"C:/windows/system32/"** [如果你在管理员模式下，这应该是默认的，如上所述] 类型 -> **sfc /scannow** 在此之后扫描将开始并且将出现以下日志 -

> 开始系统扫描。这个过程需要一些时间。
> 
> 开始系统扫描的验证阶段。验证 100% 完成。Windows 资源保护发现损坏的文件，但无法修复其中一些。详细信息包含在 CBS.Log windir\Logs\CBS\CBS.log 中。例如 C:\Windows\Logs\CBS\CBS.log
> 
> 系统文件修复更改将在下次重启后生效。

**[2]**最后重新启动您的系统！并且该服务将不再出现在 services.msc 中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-24T07:23:03.560

1.  使用“以管理员身份运行”打开cmd
2.  在 cmd 下运行：`sc delete "service name which you want to delete"`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-31T13:15:14.677

按照这些[说明删除服务](http://www.coretechnologies.com/WindowsServices/FAQ.html#DeleteWindowsService)。确保您使用服务的名称，而不是其显示名称！

之后，该服务不应显示在 Services.msc 中，但您可能在事件查看器中仍有无法正确显示其描述的旧项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-03T10:42:18.690

此错误表示注册表 [ **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services** ] 中的服务描述键已删除，但内存中的服务描述尚未清除。要解决此问题，请重新启动 PC / 服务器并重试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-25T06:19:53.010

我还使用 Windows 注册表删除了我的服务。

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services] 
```

在我的情况下，我没有重新启动我的电脑，我只是重新启动任务管理器并且删除的服务不再存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-27T15:59:17.513

我尝试了上面列出的几乎所有解决方案。最终对我有用的是从任务管理器中删除它。

我正在使用 Apache 的 ProcRun 应用程序将我的 Java 代码包装在 Windows 服务中。而任务管理器中的命令行详细信息有助于识别运行服务的进程。只需删除该过程即可解决问题！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-11T09:54:25.037

对于因为在不应该从注册表中删除服务而出现在这里的任何人，只需重新启动计算机并再次安装该服务就可以了。

# java - 在从 @Configuration 创建 bean 定义之后

> ID：13153216
> 
> 赞同：0
> 
> 时间：2012-10-31T07:32:47.927
> 
> 标签：java, spring, spring-annotations

问题：

我有一个`ConversionService`需要创建 s 集合的 bean ( ) `Converter`。因此，在我的`@Configuration`班级中，我有一个`@Bean`带有`Collection<Converter>`特定`@Qualifier`.

对于 my ，我使用 my像这样`ConversionService` `@Bean`接收`Converter`集合作为参数：`@Qualifier`

```
@Bean
public ConversionService createConversionService(@Qualifier("converters") converters) {
    // here I perform the ConversionService creation
} 
```

这有效，这正是我想要的。但是我有几个`@Configuration`班级，每个班级都应该能够向`Converter`集合中添加一些东西。我最初虽然可能有一种方法可以实现从`@Configuration`类中读取 bean 定义后调用的方法。像这样的东西：

```
@Configuration
public class MyConfiguration {

    @Autowired
    @Qualifier("converters")
    private Collection<Converter> converters;

    public void init() {
        converters.add(xy);
    }

} 
```

甚至

```
@Configuration
public class MyConfiguration {

    public void init(@Qualifier("converters") Collection<Converter> converters) {
        converters.add(xy);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:35:48.237

您应该能够使用注释`converters`在`@Configuration`带注释的类中添加一些东西[`@PostConstruct`](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-postconstruct-and-predestroy-annotations)。

```
@Configuration
public class MyConfiguration {

    @Autowired
    @Qualifier("converters")
    private Collection<Converter> converters;

    @PostConstruct
    public void init() {
        converters.add(xy);
    }

} 
```

# .net - 采样 .net 4/64 位

> ID：13153220
> 
> 赞同：2
> 
> 时间：2012-10-31T07:32:52.263
> 
> 标签：.net, stack

所以我在下面尝试了 rtllookupfunctionentry 并展开。这会导致堆栈损坏。所以任何人都有这个工作

```
 GetThreadContext(hThread, &context))
    FunctionID Id = 0;
            ip=(LPCBYTE)context.Rip;
            HRESULT funcResult = info2->GetFunctionFromIP(iPointer, &id);

                ULONG64                       base = NULL;
                PRUNTIME_FUNCTION             func;
                func= RtlLookupFunctionEntry(context.Rip,               
                      &base, &unwindtbl);

                if (!func)
                {
                    // leaf
                    context.Rip  = (ULONG64)(*(PULONG64)context.Rsp);
                    context.Rsp += 8;
                }
                else
                {
                    ef = 0;
                    hd = NULL;

                    RtlVirtualUnwind(0, base, context.Rip, func,                    
                        &context, &hd,&ef,NULL); 
```

# iphone - 如何使用 UIBezierPath 裁剪图像？

> ID：13153223
> 
> 赞同：26
> 
> 时间：2012-10-31T07:33:12.930
> 
> 标签：iphone, objective-c, ios, uibezierpath

我想从`UIBezierpath`封闭路径中获取图像（见图）。我在`UIView`using`drawRect`方法上绘制图像，并使用该方法绘制线条`drawRect`。如何获得特定的封闭路径图像？请帮我。提前致谢。

此代码用于绘制贝塞尔路径。

```
UIBezierPath *aPath = [UIBezierPath bezierPath];
for (NSString *pointString in pointArray) {
    if ([pointArray indexOfObject:pointString] == 0)
        [aPath moveToPoint:CGPointFromString(pointString)];
    else
        [aPath addLineToPoint:CGPointFromString(pointString)];
}
[aPath closePath]; 
```

![在此处输入图像描述](../Images/77186d27201b205d571584551d3df8ba.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T00:21:23.270

你可以使用 a `shapeLayer`。就像是，

```
UIBezierPath *aPath = [UIBezierPath bezierPath];
for (NSString *pointString in pointArray) {
    if ([pointArray indexOfObject:pointString] == 0)
        [aPath moveToPoint:CGPointFromString(pointString)];
    else
        [aPath addLineToPoint:CGPointFromString(pointString)];
}
[aPath closePath];

CAShapeLayer *shapeLayer = [CAShapeLayer layer];
shapeLayer.path = aPath.CGPath;
[view.layer setMask:shapeLayer];//or make it as [imageview.layer setMask:shapeLayer]; 
//and add imageView as subview of whichever view you want. draw the original image
//on the imageview in that case 
```

要将其作为图像，

```
UIGraphicsBeginImageContext(view.bounds.size);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

`image`应该有对应的图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-12T19:24:57.353

对于**Swift**试试这个：[ZImageCropper](https://github.com/ZaidPathan/ZImageCropper)

ZImageCropper 使用以下内容作为核心部分：

*   UIBezierPath
*   UITouch 事件
*   CAShapeLayer
*   核心图形

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T05:19:06.263

嗯，有几件事你必须注意。

1.  你传递你的 UIImageView 而不是你的 UIView 吗？
2.  如果是，您是否为触摸处理启用了图像视图？
3.  将您的 UIImageView 子类化并用于`drawrect()`为您处理这些内容。

如果您只想要图像的一部分（如猫），那么您需要根据 UIBezierPath 对图像进行子掩码。

**更新**

以下是一个完整的工作示例，将其更改为您的要求。

视图控制器.h：

```
@interface ViewController : UIViewController
{
  UIBezierPath *aPath;
}
@property (nonatomic,retain) NSMutableArray *pathArray;
@property (nonatomic,retain) NSMutableDictionary *dic;
@property (nonatomic,retain) IBOutlet UIImageView *imgView;

@end 
```

视图控制器.m：

```
@interface ViewController ()
 - (IBAction)Crop:(id)sender;
@end

@implementation ViewController
@synthesize pathArray,dic,imgView;
- (void)viewDidLoad
 {
   [super viewDidLoad];

 }
 - (void) setClippingPath:(UIBezierPath *)clippingPath : (UIImageView *)imgView;
{

    NSLog(@"Mask Paths %@",clippingPath);

    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = self.imgView.frame;
    maskLayer.path = [clippingPath CGPath];
    maskLayer.fillColor = [[UIColor whiteColor] CGColor];
    maskLayer.backgroundColor = [[UIColor clearColor] CGColor];

    self.imgView.layer.mask = maskLayer;

}
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
 {

   UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
   self->aPath = [[UIBezierPath alloc]init];
   [aPath moveToPoint:[mytouch locationInView:imgView]];

}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
 {

  UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
  [aPath addLineToPoint:[mytouch locationInView:imgView
                       ]];

 }
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
 {

 }
- (IBAction)Crop:(id)sender
 {
  [self setClippingPath:aPath :imgView];
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-09T02:55:14.357

使用这个 pod [ios-helpers](https://github.com/eleven-huang/ios-helpers#uibezierpathimage)

```
- (UIImage *)imageWithStrokeColor: (UIColor *)stroke_color andFillColor: (UIColor *)fill_color {

    // adjust bounds to account for extra space needed for lineWidth
    CGFloat width = self.bounds.size.width + self.lineWidth * 2;
    CGFloat height = self.bounds.size.height + self.lineWidth * 2;
    CGRect bounds = CGRectMake(self.bounds.origin.x, self.bounds.origin.y, width, height);

    // create a view to draw the path in
    UIView *view = [[UIView alloc] initWithFrame:bounds];

    // begin graphics context for drawing
    UIGraphicsBeginImageContextWithOptions(view.frame.size, NO, [[UIScreen mainScreen] scale]);

    // configure the view to render in the graphics context
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    // get reference to the graphics context
    CGContextRef context = UIGraphicsGetCurrentContext();

    // reverse the y-axis to match the opengl coordinate space
    CGContextScaleCTM(context, 1, -1);
    CGContextTranslateCTM(context, 0, -view.bounds.size.height);

    // translate matrix so that path will be centered in bounds
    CGContextTranslateCTM(context, -(bounds.origin.x - self.lineWidth), -(bounds.origin.y - self.lineWidth));

    // stroke color
    [stroke_color setStroke];
    [self stroke];

    //fill color
    [fill_color setFill];
    [self fill];

    // get an image of the graphics context
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

    // end the context
    UIGraphicsEndImageContext();

    return viewImage;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T04:09:36.140

如果您在代码中绘制所有内容，只需使用 - `addClip`，即：

```
UIBezierPath *aPath = [UIBezierPath bezierPath];
for (NSString *pointString in pointArray) {
    if ([pointArray indexOfObject:pointString] == 0)
        [aPath moveToPoint:CGPointFromString(pointString)];
    else
        [aPath addLineToPoint:CGPointFromString(pointString)];
}
[aPath closePath];

CGContextSaveGState(context);
{
    [aPath addClip];
    // draw image
    [aPath stroke];
}
CGContextRestoreGState(context); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-05T09:14:20.823

iDev 的回答很好，但是如果你需要透明背景，那么除了 `UIGraphicsBeginImageContext(view.bounds.size);` 你应该使用

```
UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 1.0); 
```

默认情况下，图像上下文是使用 opaque == YES 创建的，因此您必须将其更改为 NO。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-11T15:20:07.187

这对我有用...

```
UIBezierPath *path = ....//your path
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef    context    = CGBitmapContextCreate(nil, frame.size.width, frame.size.height, 8, 4*frame.size.width, colorSpace, (CGBitmapInfo)kCGImageAlphaPremultipliedFirst);

CGContextAddPath(context, path.CGPath);
CGContextClip(context);
CGContextDrawImage(context, frame, image.CGImage);

[UIImage imageWithCGImage:CGBitmapContextCreateImage(context)]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-02T07:04:25.440

```
// This Work 100% 
```

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

```
mouseSwiped = NO;
UITouch *touch = [touches anyObject];
lastPoint = [touch locationInView:self.view];
megView = [[UIImageView alloc]initWithFrame:CGRectMake(lastPoint.x , lastPoint.y , k_POINT_WIDTH , k_POINT_WIDTH )];
//[megView setImage:[UIImage imageNamed:@"b_image22.png"]];
[megView setContentMode:UIViewContentModeScaleToFill];
megView.alpha = 2;
//megView.layer.backgroundColor = [UIColor whiteColor].CGColor;
//megView.layer.cornerRadius = megView.frame.size.width / 2;
megView.clipsToBounds = YES;
[self.main_uiview addSubview:megView];

self.bezierPath = [UIBezierPath bezierPath];
[self.bezierPath moveToPoint:lastPoint]; 
```

}

```
 // Touchmove method

 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = YES;
UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self.view];
UIGraphicsBeginImageContext(self.main_uiview.frame.size);
[self.bg_imageview.image drawInRect:CGRectMake(0, 0, self.main_uiview.frame.size.width, self.main_uiview.frame.size.height)];
megView.frame = CGRectMake( currentPoint.x - k_POINT_WIDTH/2 , currentPoint.y - k_POINT_WIDTH/2 , k_POINT_WIDTH , k_POINT_WIDTH );
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextStrokePath(UIGraphicsGetCurrentContext());

CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red,green ,blue, 0.20);
CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeCopy);
  self.bg_imageview.image = UIGraphicsGetImageFromCurrentImageContext();
  [self.bg_imageview setAlpha:opacity];

 UIGraphicsEndImageContext();

 lastPoint = currentPoint;

[self.bezierPath addLineToPoint:lastPoint]; 
```

}

```
 // TouchEnd Method

   - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

{

```
[megView removeFromSuperview]; 
```

}

```
 // Image Crop Method

    -(UIImage *)croppedImage
   {
UIImage *myImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[self.bezierPath closePath];
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 0.0);
_b_image = self.bg_imageview.image;
CGSize imageSize = _b_image.size;
CGRect imageRect = CGRectMake(0, 0, imageSize.width, imageSize.height);
UIGraphicsBeginImageContextWithOptions(imageSize, NO, [[UIScreen mainScreen] scale]);
[self.bezierPath addClip];
[_b_image drawInRect:imageRect];

UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return croppedImage; 
```

}

# ios - 从苹果网站将配置文件导入其他 mac

> ID：13153227
> 
> 赞同：1
> 
> 时间：2012-10-31T07:33:22.460
> 
> 标签：ios, iphone, certificate, provisioning

我有一个包含我的苹果配置文件的mac，这个mac已经“死”了，现在我想使用其他mac，如何导入我的旧配置文件（通过苹果认证）？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T07:57:41.370

1.**从您的新 Mac 机器吊销并创建新证书**，更新配置文件，下载并安装所有似乎都按预期工作。

**注意**：如果您计划在***多个系统***上进行开发和测试，您需要将您的私钥导入您将要使用的所有系统上。

1.  要导出您的私钥和证书以进行安全保存并在多个系统上进行开发，请打开钥匙串访问应用程序并选择“钥匙”类别。

2.  Control-单击与您的 iPhone 开发证书关联的私钥，然后单击菜单中的“导出项目”。私钥由 iPhone 开发人员识别：与之配对的公共证书。

3.  以个人信息交换 (.p12) 文件格式保存您的密钥。

4.  当您尝试在另一台计算机上导入此密钥时，系统将提示您创建密码。

5.  您现在可以在系统之间传输此 .p12 文件。双击 .p12 将其安装到系统上。系统将提示您输入在步骤 4 中输入的密码

6.  下载并安装新的配置文件

# android - 为什么 Android xml 布局文件无法通过 ctrl+space 识别内容辅助？

> ID：13153229
> 
> 赞同：8
> 
> 时间：2012-10-31T07:33:24.473
> 
> 标签：android, xml, eclipse, layout

我面临 Eclipse 的问题，即当我使用 Android xml 布局文件设计屏幕时，我尝试将属性添加到我已经创建的元素。我曾经键入属性的两个字母，然后点击 ctrl+空格，这样它将通过 IntelliSense 显示所有可用属性的列表。现在它没有显示任何内容，而是在屏幕底部显示一条消息，如下图所示。

有人遇到过问题并解决了吗？

感谢您的帮助，因为它减慢了我的工作速度。

![在此处输入图像描述](../Images/581e74a83cb3c4979eb07a033d9d466d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:14:37.390

**答案更新：**

就这样，

我猜您正在尝试访问`Parameter Hints (Ctrl+Shift+Space)`而不是 Default `Content Assist (Ctrl+Space)`。

1.  如果我们按下`(Ctrl+Shift+Space)`java 文件，它将为您提供详细的参数描述以及特定的方法名称列表。

2.  如果我们`(Ctrl+Shift+Space)`在 xml 文件中按，它会给出以下错误，

    (a.) 元素或任何东西是未知的。

    (b.) 当前位置不提供内容辅助。

    (c.) 没有可用的完成。

**老答案：**

根据**Eclipse 内容辅助**文档，

错误是`Element Unknown`因为，

的`Element`，我们要找的是没有定义的`in-scope schema definitions`。

`XML Content Assist`将从`schema`文件和所属`xml`文件描述中加载。

所以基本上没有机会被错过`Elements`。`android sdk`

检查以下内容是否遗漏`preferences`，

**Window-preferences-XML-XML Files-Editor-Content Assist** 勾选`priorities`或**重置**。

我想，你可能错过了某个地方，因为我注意到在你附加的图片中，

**`Graphical Layout.xml`**是您的布局名称。不能这样命名， In `android`，它应该**没有任何空格**并且应该**“以小写开头”**。

如果您提供**详细**的**错误报告**，那么有人可能会解决它。

您提到，对于`layout`您遇到相同错误的所有文件，您可以创建一个简单的示例布局并粘贴您的问题。

所以我的建议是，请通过定义和提供优先级来检查xml文件中的某个地方是否出错。

并检查**Window-Preferences**菜单`XML Content Assist`中的。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:22:50.200

（没有双关语或ecipse bashing意图）有很多理由让eclipse阻塞某些文件，几乎从来没有解决方案 - 你只希望它有效。对于 android，我建议您切换到 IDEA - android 插件受限制在免费社区版中并且像魅力一样工作（并且应该存在问题，jetbrains 支持通常会在几个小时内提供有用且正确的答案）

甚至还有 UI 的预览模式，它会在您键入时更新，让您可以提取主题等。**

# android - 带有 MODE_PRIVATE、MODE_WORLD_READABLE、MODE_WORLD_WRITABLE 的 Android SharedPreferences

> ID：13153231
> 
> 赞同：44
> 
> 时间：2012-10-31T07:33:26.800
> 
> 标签：android

`SharedPreferences`在 Android 中是本地应用程序，而不是在不同应用程序之间共享。当我说

```
SharedPreferences preferences = getSharedPreferences(PREF_NAME, MODE_WORLD_READABLE); 
```

做出这种偏好意味着什么`MODE_WORLD_READABLE`，`MODE_WORLD_WRITABLE`或者 `MODE_PRIVATE`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-31T07:37:13.027

`getSharedPreferences(String name, int mode)`[在这里](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)解释

```
MODE_PRIVATE: File creation mode: the default mode, where the created file can only be accessed by the calling application (or all applications sharing the same user ID).

MODE_WORLD_READABLE: File creation mode: allow all other applications to have read access to the created file.

MODE_WORLD_WRITEABLE : File creation mode: allow all other applications to have write access to the created file. 
```

更多信息[在这里](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)

编辑从 API 17 开始，不推荐使用`MODE_WORLD_READABLE`and `MODE_WORLD_WRITEABLE`：

> 此常量在 API 级别 17 中已弃用。
> 创建世界可读文件非常危险，并且可能会导致应用程序中的安全漏洞。强烈建议不要这样做；相反，应用程序应该使用更正式的交互机制，例如`ContentProvider`、`BroadcastReceiver`和`Service`。无法保证此访问模式将保留在文件上，例如在进行备份和恢复时。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-31T07:49:50.827

首选项存储在文件系统中。该模式定义了谁可以访问您的应用程序的首选项。

简单来说：

*   `MODE_PRIVATE`是首选项的操作模式。这是默认模式，意味着创建的文件只能由调用应用程序访问。
*   在`MODE_WORLD_READABLE`其他应用程序中可以读取创建的文件但不能修改它。
*   如果`MODE_WORLD_WRITEABLE`其他应用程序也对创建的文件具有写权限。

推荐的方式是使用默认模式，不指定文件名

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-31T09:03:45.260

共享偏好也保存在文件系统中的文件中。这些模式定义了其他应用程序是否有权读取文件中的分片首选项。

`MODE_PRIVATE`意味着只有创建共享首选项的应用程序才能读写首选项

`MODE_WORLD_READABLE`意味着其他应用程序也可以使用共享首选项 API 读取这些首选项，但不能在此首选项文件中写入值

`MODE_WORLD_WRITEABLE`意味着其他应用程序也可以使用共享首选项 API 读取和写入首选项文件

以下链接也有一些很好的解释和代码示例来解释模式：

[http://thedevelopersinfo.com/2009/11/25/getting-sharedpreferences-from-other-application-in-android/](http://thedevelopersinfo.com/2009/11/25/getting-sharedpreferences-from-other-application-in-android/)

[http://chrisrisner.com/Accessing-the-Shared-Preferences-of-a-Different-Application-in-Android](http://chrisrisner.com/Accessing-the-Shared-Preferences-of-a-Different-Application-in-Android)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-11T07:11:29.633

MODE_PRIVATE 是指由您的应用程序创建的用于存储应用程序偏好数据的文件，该文件只能由您自己的应用程序访问。

没有其他应用程序能够访问该文件。

# sql-server - 动态备份文件名

> ID：13153235
> 
> 赞同：3
> 
> 时间：2012-10-31T07:33:39.503
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我每天都使用`SQL Server 2008 R2`并希望用于创建我的数据库的备份。`Backup Devices`如何在“备份设备”中创建动态文件名。

在下面的代码中，我创建了一个备份设备，但希望在我的备份文件中有当前日期 (YYYY-MM-DD)。

```
EXEC master.dbo.sp_addumpdevice  @devtype = N'disk', @logicalname = N'My Database Backup Location', @physicalname = N'D:\Backup\Backup YYYY-MM-DD.bak' 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:28:02.583

试试这个

```
DECLARE @fn nvarchar(200)
SET @fn=N'D:\Backup\Backup'+CONVERT(VARCHAR(8), GETDATE(), 112) +'.bak'

EXEC master.dbo.sp_addumpdevice  @devtype = N'disk', 
                @logicalname = N'My Database Backup Location',
                @physicalname = @fn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:25:06.967

您可以使用中间变量，存储附加 DD-MM-YYYY 的文件名。并在您的 EXEC 语句中使用此中间变量。

请参阅下面的链接了解如何： [在存储过程参数列表中使用表达式（例如函数调用）的结果？](https://stackoverflow.com/questions/4936180/cast-integer-and-concatenate-to-varchar-in-tsql)

# java - 为什么合并不是在一对多关系上级联

> ID：13153237
> 
> 赞同：17
> 
> 时间：2012-10-31T07:33:48.677
> 
> 标签：java, jpa, eclipselink, ejb-3.1

我在这里的问题几乎与我的另一个问题[Explicit delete on JPA Relations](https://stackoverflow.com/questions/13150537/explicit-delete-on-jpa-relationships)类似， 但我想进一步简化它以保证更详细的答案。

想象一下，我在父母和孩子之间有一个 OneToMany 关系。

```
@Entity
public class Parent {
    private String name;
    @OneToMany(mappedBy="owner",cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    private List<Child> children;
}
@Entity
public class Child {
    private String name;
    @ManyToOne
    private Parent owner;
} 
```

在我的 UI 中，我显示了一个父级列表。用户可以选择一位父母，他/她可以编辑其孩子的列表。为了说明这一点，我使用了一个 currentParent 变量来表示当前编辑的父级。用户可以选择添加/编辑孩子的名字。

单击按钮后，我将使用 EJB 调用保存新的子列表。

```
@ViewScoped
public class MyBean(){
    private Parent currentParent;
    @EJB
    private MyEJB myEJB;

    public void saveChanges(){
        myEJB.save(currentParent);
    }
} 
```

我的 EJB 调用如下所示。

```
@Stateless
public class MyEJB{
    @PersistenceContext(unitName = "MyPU")
    private EntityManager em;

    public void save(Parent parentNew){
        Parent pOld = em.find(entityClass,  p.getId());
        if(pOld !=null){
            pOld.setName(parentNew.getName());
            pOld.setChildren(parentNew.getChildren());
            em.merge(pOld);
        }
    }
} 
```

我的问题是，我可以更改父级的名称，但对子级列表的任何更改都不会反映到数据库中。它不会更改或执行任何 SQL 来删除/更新/添加子项。

可能是什么原因？

**更新**

经过一些试验和错误并通过各种链接阅读后，似乎在我的@onetomany 中设置 orphanRemoval 选项可以解决我的问题。Eclipselink 在合并期间自动删除孤立行。

JPA 的复杂性就这么多..

```
@Entity
public class Parent {
    private String name;
    @OneToMany(mappedBy="owner",cascade=CascadeType.ALL, fetch=FetchType.EAGER,orphanRemoval = true)
    private List<Child> children;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T12:37:18.257

这是合并的标准问题。对集合中子对象的更改将被拾取。

合并调用只能级联列表中的对象，因此对不在列表中的对象的更改会丢失。不幸的是，oneToMany 不拥有该关系：孩子的 ManyToOne 拥有。因此，需要合并子实体才能看到更改并将其推送到数据库。子实体是独立的对象，改变时需要单独合并。那，或添加到不同的父/树以合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:44:52.547

你的问题`What could be the cause?`。原因是 的价值内容`parentNew`。如果`parentNew`是以下原因之一，则不会影响/更新子级。

1.  无参考实例亲子签证。--->**它会抛出异常。**
2.  `Parent`参数值有 null 或空列表`Clild`-->**这将是你的原因。**
3.  `Child`不要从 UI 获取更新的名称。-->**这将是你的原因。**

例子。我赶紧写。没关系。

数据库中已经存在数据

```
Parent                      Child
==================    =======================================
'P001', 'Parent 1'   'C002', 'Child 2', 'P001'
                     'C003', 'Child 3', 'P001'
                     'C001', 'Child 1', 'P001' 
```

更新后：

```
Parent                      Child
==================          =======================================
'P001', 'Update Parent 1'   'C002', 'Update Child 2', 'P001'
                            'C003', 'Update Child 3', 'P001'
                            'C001', 'Update Child 1', 'P001'

List<Child> clidList = new ArrayList<Child>();
Parent parent = new Parent("P001", "Update Parent 1", clidList);
Child c1 = new Child("C001", "Update Child 1", parent);
Child c2 = new Child("C002", "Update Child 2", parent);
Child c3 = new Child("C003", "Update Child 3", parent);
clidList.add(c1);
clidList.add(c2);
clidList.add(c3);

Parent existingParent = em.find(Parent.class, parent.getId());
existingParent.setName(parent.getName());
existingParent.setChildren(parent.getChildren());
em.merge(existingParent); 
```

# tomcat - 在 tomcat 中托管 grails 应用程序

> ID：13153238
> 
> 赞同：0
> 
> 时间：2012-10-31T07:33:51.033
> 
> 标签：tomcat, grails, amazon-web-services

我做了一个非常简单的 grails 应用程序并尝试将其推送到我的 tomcat。

我做了：

```
grails war 
```

并将生成的战争文件放入我的 tomcat/webapps 目录并重新启动它。这场战争被命名为`ec2.war`。我能打`localhost:8080`。但我无法点击：`localhost:8080\ec2`- 我收到`404`错误代码。

我在 catalina.out 得到以下堆栈跟踪：

```
NFO: Deploying web application archive /var/lib/tomcat7/webapps/ec2.war
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: stacktrace.log (Permission denied)
        at java.io.FileOutputStream.openAppend(Native Method)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
        at org.apache.log4j.FileAppender.setFile(FileAppender.java:294)
        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165)
        at org.apache.log4j.spi.OptionHandler$activateOptions.call(Unknown Source)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
        at org.codehaus.groovy.grails.plugins.log4j.Log4jConfig.createFullstackTraceAppender(Log4jConfig.groovy:237)
        at org.codehaus.groovy.grails.plugins.log4j.Log4jConfig.configure(Log4jConfig.groovy:201)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:64)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
        at org.codehaus.groovy.grails.plugins.log4j.Log4jConfig.initialize(Log4jConfig.groovy:70)
        at org.codehaus.groovy.grails.plugins.log4j.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:48)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679) 
```

什么可能导致此错误，我该如何解决？

请注意，tomcat 在 ec2 中运行，这里`localhost`指的是我的公共 IP，以防万一`5.x.x.x.x`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:22:54.017

您需要检查您的 tomcat 文件夹的所有权。做一个：

```
ls -lisa /var/lib/tomcat7/webapps/ 
```

并检查所有权。如果您只想让它运行，最简单的方法可能是：

```
sudo chown -R root:root  /var/lib/tomcat
sudo chmod -R 777 /var/lib/tomcat 
```

并做一个

```
sudo /var/lib/tomcat/bin/startup.sh 
```

但这不是最安全的方式:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:36:53.627

默认情况下，`stacktrace.log`当tomcat 启动时，Grails 应用程序会尝试创建一个以当前目录命名的日志文件。所以你有两个选择

1.  通过在启动脚本中放置一个合适的来控制它在哪个目录`cd`中启动，并确保该目录可由运行 tomcat 的用户 id 或
2.  更改您的 grails 配置以将 stacktrace.log 放在其他位置（或根本不创建它）。您可以在 中的`log4j`闭包中执行此操作，有关详细信息，请参阅[用户指南章节中有关日志记录配置](http://grails.org/doc/latest/guide/conf.html#logging)`Config.groovy`的“完整堆栈跟踪”部分。

# c# - 如何在线程.timer延迟后执行方法？

> ID：13153245
> 
> 赞同：-2
> 
> 时间：2012-10-31T07:34:06.613
> 
> 标签：c#, .net, multithreading, timer

我有一个创建**线程 .timer**的类。

```
 System.Threading.Timer timer;
  TimerCallback cb = new TimerCallback(ProcessTimerEvent);
    timer = new Timer(cb, reset, 1000, Convert.ToInt64(this.Interval.TotalSeconds));
}

private void ProcessTimerEvent(object obj)
{
    if (Tick != null)
        Tick(this, EventArgs.Empty);
} 
```

我想在其中放置 Timer，然后计时器工作。

在我的 TickEvent 中，我执行了一个方法，但没有对此进行编译。

```
 void MyTimer_Tick(object sender, EventArgs e)
{
 if(value)
   MyFunction();
} 
```

计时器必须停止，直到 MyFunction 完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:42:18.580

假设您的计时器持有者类有 name `MyTimer`。您需要的是定义方法`Stop`，该方法将处理您`Threading.Timer`并关闭引发的事件。

```
public class MyTimer
{    
    System.Threading.Timer timer;
    bool enabled;
    TimeSpan interval;
    public event EventHandler Tick;

    public MyTimer(TimeSpan interval)
    {
        enabled = true;
        this.interval = interval;
        timer = new Timer(TimerCallback, null, 1000, (int)interval.TotalSeconds);
    }

    private void TimerCallback(object state)
    {
        if (!enabled)
           return;

        if (Tick != null)
            Tick(this, EventArgs.Empty);          
    }

    public void Stop()
    {
        timer.Dispose();
        timer = null;
        enabled = false;
    }

    public void Start()
    {
        enabled = true;
        timer = new Timer(TimerCallback, null, 1000, (int)interval.TotalSeconds);
    }
} 
```

然后将 Tick 事件发送者投射到您的计时器对象并在处理事件时停止您的计时器。处理后再次启动计时器。

```
void MyTimer_Tick(object sender, EventArgs e)
{
  MyTimer timer = (MyTimer)sender;
  timer.Stop(); // tick events will not be raised
  if(value)
     MyFunction();

  timer.Start(); // start timer again
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:23:37.150

我使用此代码。

尝试进入/退出。在这种情况下无需停止/重新启动计时器；重叠调用不会立即获取锁并返回。

```
object lockObject = new object();

private void ProcessTimerEvent(object state) 
 {
  if (Monitor.TryEnter(lockObject))
  {
   try
   {
   // Work here
   }
   finally
    {
   Monitor.Exit(lockObject);
    }
   }
  } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T07:56:13.240

要停止计时器，您[应该 Timer.Change 方法](http://msdn.microsoft.com/en-us/library/yz1c7148%28v=vs.90%29.aspx)

```
public bool Change(int dueTime, int period) 
```

> dueTime 指定 Timeout.Infinite 以防止计时器重新启动。
> 
> period 指定 Timeout.Infinite 以禁用周期性信号。

```
void MyTimer_Tick(object sender, EventArgs e)
{
    if(value)
    {
        //this stop the timer because dueTime is -1
        _timer.Change(Timeout.Infinite, Timeout.Infinite);
        MyFunction();
        //this start the timer
        _timer.Change(Convert.ToInt64(this.Interval.TotalSeconds), Convert.ToInt64(this.Interval.TotalSeconds));
    }
} 
```

> Timeout.Infinite 对于 -1 是常数

# c# - 如何在同一个母版页中调用另一个用户控件中的用户控件功能

> ID：13153247
> 
> 赞同：0
> 
> 时间：2012-10-31T07:34:12.780
> 
> 标签：c#, asp.net

我有两个用户控件，它们都在同一个母版页中，其中一个我有一个计数器，另一个有一些代码，如果我重新加载到整个页面，计数器会增加和减少计数器的工作原理好吧，得到正确的数字，但是如果我在第二个用户控件中进行了任何更改，直到下一页重新加载它才感觉到

我想要的是谁能让柜台立即感受到变化

提前致谢

那是代码

```
<%@ Master Language="C#" AutoEventWireup="true"  MasterPageFile="~/MasterPages/Main.Master" CodeBehind="InboxMails.master.cs" Inherits="NAQQAB_Web.MasterPages.InboxMails" %>
<%@ Register Src="~/userControls/InboxMails.ascx" TagName="Mails" TagPrefix="InboxMailsUS" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

    <InboxMailsUS:Mails ID="InboxMailsLists" runat="server" />
</asp:Content>

<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Main.master.cs" Inherits="NAQQAB_Web.MasterPages.Main"  %>

<%--<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">--%>
<%--<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">--%>
<%@ Register Src="~/userControls/SearchBar.ascx" TagName="SearchBar" TagPrefix="SearchBarUC" %>
<%@ Register Src="~/userControls/UserStatusBar.ascx" TagName="LogIn_LogOutBar" TagPrefix="Shura"  %>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">

<body marginheight="0" marginwidth="0" style="margin-bottom:0; margin-left:0; margin-right:0; margin-top:0;  ">
    <form id="form1" runat="server" method="post" target="_parent">
    <div>
        <asp:ScriptManager runat="server" ID="ScriptManager1"  ScriptMode="Release">
        </asp:ScriptManager>
        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="height: 100%;">
            <tbody>

                <tr>

                    <td width="834" height="100%">
                        <table id="table2" border="0" cellpadding="0" cellspacing="0" width="100%" style="height: 100%;">
                            <tbody>
                                <tr>
                                    <td valign="top" height="231">
                                        <table id="table3" border="0" cellpadding="0" cellspacing="0" width="100%">
                                            <tbody>
                                                <tr>
                                                    <td valign="top">
                                                        <table id="table8" border="0" cellpadding="0" cellspacing="0" width="100%">
                                                            <tbody>
                                                                <tr>

                                                                    <td style="background-image: url(images/topBG.jpg);" align="right" bgcolor="#1a1e1f"
                                                                        valign="top">
                                                                        <br>

                                                                        <Shura:LogIn_LogOutBar ID="userStatus" runat="server" Visible="True" />

                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </td>

                </tr>
            </tbody>
        </table>
    </div>
    </form>
</body>

</html> 
```

当收件箱邮件页面后面的代码完成更改后，我想从用户状态栏中的代码后面调用函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:41:40.117

尝试使用 javascript 或 jquery 库...这样您就不必一次又一次地重新加载...如果您使用的是 ScriptManager，您也可以使用更新面板...但我将始终保证 Javascript...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:54:11.543

在第二个控件中增加或减少计数器以使第一个控件取正确的值后，尝试将 postpack 强制执行到整个页面

坦率地说，我觉得您对同一页面下的 2 个用户控件的假设有些不恰当，其中一个在另一个内部调用函数这个问题是母版页的责任，所以您需要在母版页中设置事件，并且在它旁边调用用户控件来增加、减少和显示计数器

希望我的帖子有用！

# php - 无法使用 codeIgniter 从 gmail smtp 服务器发送电子邮件？

> ID：13153249
> 
> 赞同：1
> 
> 时间：2012-10-31T07:34:17.993
> 
> 标签：php, codeigniter

我不知道我在哪里做错了。我只关注 codeIgniter 用户指南。我粘贴控制器的代码......

```
function do_upload()
{
    $config['upload_path'] = 'C:\xampp\htdocs\upload\application';
    $config['allowed_types'] = 'doc|docx|pdf';
    $config['max_size'] = '10240';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload_form', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        echo "Resume Successfully uploaded to database.............";
    }

    $file = $data['upload_data']['full_path'];

    $config = Array(
      'protocol' => 'smtp',
      'smtp_host' => 'ssl://smtp.googlemail.com',
      'smtp_port' => 465,
      'smtp_user' => '****************', // change it to yours
      'smtp_pass' => '******', // change it to yours
      'mailtype' => 'html',
      'charset' => 'iso-8859-1',
      'wordwrap' => TRUE
    );

      $this->load->library('email', $config);
      $this->email->set_newline("\r\n");
      $this->email->from('*************'); // change it to yours
      $this->email->to('***************'); // change it to yours
      $this->email->subject('Email using Gmail.');
      $this->email->message('Working fine ! !');

      if($this->email->send())
     {
      echo 'Email sent.';
     }
     else
    {
     show_error($this->email->print_debugger());
    }
} 
```

> 遇到以下 SMTP 错误：185667876 无法找到套接字传输“ssl” - 您在配置 PHP 时是否忘记启用它？无法发送数据：AUTH LOGIN 发送 AUTH LOGIN 命令失败。错误：无法发送数据：MAIL FROM：
> 
> 来自：遇到以下 SMTP 错误：无法发送数据：RCPT TO：
> 
> to：遇到以下 SMTP 错误：无法发送数据：DATA
> 
> 数据：遇到以下 SMTP 错误：无法发送数据：用户代理：CodeIgniter 日期：2012 年 10 月 31 日，星期三 08:36:21 +0100 来自：返回路径：收件人：test@example.com 主题：=？ iso-8859-1?Q?Email_using_Gmail.?= Reply-To: "test@example.com" X-Sender: test@example.com X-Mailer: CodeIgniter X-Priority: 3 (Normal) Message-ID: < 5090d4f5df7bb@gmail.com> Mime 版本：1.0 内容类型：multipart/alternative；boundary="B_ALT_5090d4f5df7d8" 这是一个 MIME 格式的多部分消息。您的电子邮件应用程序可能不支持这种格式。--B_ALT_5090d4f5df7d8 内容类型：文本/纯文本；charset=iso-8859-1 Content-Transfer-Encoding: 8bit 工作正常！！--B_ALT_5090d4f5df7d8 内容类型：文本/html；charset=iso-8859-1 Content-Transfer-Encoding:quoted-printable 工作正常！！
> 
> 遇到以下 SMTP 错误：无法使用 PHP SMTP 发送电子邮件。您的服务器可能未配置为使用此方法发送邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:55:24.280

伙计...您应该先尝试上传，完成后，您尝试解决电子邮件问题。你不需要它：'smtp_host' => ' **ssl://** smtp.googlemail.com' ssl:// 部分

# sql - SQL查询中分组后如何进行相互比较？

> ID：13153255
> 
> 赞同：1
> 
> 时间：2012-10-31T07:34:39.610
> 
> 标签：sql, sql-server

我有一张`Information`像这样的桌子：

```
ID    From     To        Product          Date  
1         A         B          ProdA         2012-10-01  
2         A         B          ProdA         2012-10-13  
3         A         B          ProdB         2012-10-17  
4         A         B          ProdC         2012-10-18  
5         A         C          ProdB         2012-10-02  
6         A         C          ProdC         2012-10-04  
7         A         C          ProdD         2012-10-12  
8         A         C          ProdE         2012-10-14  
9         A         D          ProdA         2012-10-11  
10       A         D          ProdA         2012-10-14 
```

我们将 From 和 To 的组合称为关系。所以 (A,B) 和 (A, C) 是关系。
我需要做的是在一周的时间内找到那些发送/接收**不同产品的关系。**所以在上面的例子中，查询应该返回：

```
A    B
A    C 
```

因为这些行匹配：

```
2         A         B          ProdA         2012-10-13  
3         A         B          ProdB         2012-10-17  
4         A         B          ProdC         2012-10-18  

5         A         C          ProdB         2012-10-02  
6         A         C          ProdC         2012-10-04  

7         A         C          ProdD         2012-10-12  
8         A         C          ProdE         2012-10-14 
```

我知道我应该从头开始，`SELECT ID, From, To, Product, Date FROM Information GROUP BY From, To`但我不知道下一步是什么。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:08:38.780

```
select Distinct [From],[TO],year([Date]) as y ,datepart(wk,[Date]) as w
into #tmp
From Tablex

Select t1.*
from #tmp t1
Join #tmp t2 on t1.From=t2.From and t1.y=t2.y and t1.w=t2.y and t1.to<>t2.to
 Drop table #tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:32:51.270

可能是这样的：

```
declare @t table(id int identity(1,1), [from] char default 'A', [to] char, product char(5), date date)
-- populating testdata works with sql server 2008+
insert @t ([to],product, date) values
('B','ProdA','2012-10-01'),('B','ProdA','2012-10-13'),
('B','ProdB','2012-10-17'),('B','ProdC','2012-10-18'),
('C','ProdB','2012-10-02'),('C','ProdC','2012-10-04'),
('C','ProdD','2012-10-12'),('C','ProdE','2012-10-14'),
('D','ProdA','2012-10-11'),('D','ProdA','2012-10-14')

select * from @t t where exists 
(select 1 from @t where t.[from] = [from] and t.[to] = [to] and 
t.product <> product and t.date between dateadd(day, -7, date) and 
dateadd(day, 7, date)) 
```

# windows-phone - 导航到页面时发生参数异常

> ID：13153258
> 
> 赞同：0
> 
> 时间：2012-10-31T07:35:24.040
> 
> 标签：windows-phone

我在导航到页面时遇到问题，并且 filename.g.cs 文件中出现异常。这个问题都是在我尝试将 PhoneApplicationPage 切换到文件夹时开始的，我没有发现 .xaml 或 .xaml.cs 文件有任何问题.it 出现在 g.cs 文件中![在此处输入图像描述](../Images/abf743386b55627487e91270c50e19e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:42:44.703

此特定行的异常通常意味着您的 XAML 代码中有问题。不幸的是，这些错误很难追踪，所以这里有一些建议：

*   检查异常的详细信息，尤其是调用堆栈和内部异常。它可以提供有关 XAML 的哪个部分错误的更多信息
*   开始从 XAML 中删除元素，直到停止引发异常。这样，您可以准确地知道错误在哪里。从样式、资源和绑定开始，因为它们最有可能是罪魁祸首。

# .net - Visual Studio 2012 Express 和 .NET 2.0

> ID：13153262
> 
> 赞同：8
> 
> 时间：2012-10-31T07:35:41.420
> 
> 标签：.net, visual-studio

创建新项目时，我安装的 VS 2012 Express 未显示 .NET Framework 2.0。我知道 VS 2012 支持 2.0，但它没有显示在菜单中，如下所示。

![新项目截图](../Images/80031e3dd419e211583119bd27d420ca.png)

当我使用其中一个可用选项（4.0/4.5）创建一个项目，然后将其更改回 2.0 时，它会在构建时产生大量错误。

有没有办法让 VS 2012 在菜单中显示旧版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T21:16:52.507

在创建操作期间您不能设置 2.0（或除 4.0 或 4.5 之外的任何内容），但您可以在创建项目后通过项目属性更改它。这适用于 VS express Web 和 VS express 桌面（没有尝试其他）。 ![VS Express 2012 目标](../Images/b3012197bdb14dc9df834096463bf3ca.png)

您必须更新您的参考资料以匹配适当的目标。还需要删除各种 using 语句，例如 System.Linq 和 System.Threading.Tasks。

Obv MS 正在他们的产品中推动 4.0 和 4.5，但谢天谢地，对旧东西的支持仍然存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T07:39:37.133

听起来您需要下载 2.0 的[目标包](http://msdn.microsoft.com/en-us/hh454951.aspx)。[此页面](http://msdn.microsoft.com/en-US/hh487283.aspx)列出了可用于 VS 2012 的目标包；看起来这只是下载[.NET 3.5 SP1 运行时](http://www.microsoft.com/en-us/download/details.aspx?id=22)包的问题，​​然后应该启用 .NET 2、3 和 3.5 目标。

编辑：我刚刚注意到您正在使用 Express。我不知道目标包是否与 Express 版本的工作方式相同，但我至少会尝试一下。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T07:47:55.403

Visual Studio 2012 的 Express 版本仅支持 .NET Framework 4.0 和 4.5。如果您想开发针对旧版本 .NET Framework 的应用程序，您必须选择 Visual Studio 的其他 Express 版本，例如 Visual Studio 2010 Express。

# php - PHP表两列

> ID：13153263
> 
> 赞同：0
> 
> 时间：2012-10-31T07:35:42.150
> 
> 标签：php, html-table

例如，如何在 PHP 中使用两列和 10 个变量制作表格（无循环）？

例如：

```
$var1= $row['name'];
$var2= $row['age']; 
```

我想在表格中显示它的方式：

```
 ______________________
   | Customer Name | $var1|
   | Customer Age  | $var2| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:38:41.097

没有循环：

```
echo '
<table>
  <tr>
    <td>Customer Name</td>
    <td>', $var1, '</td>
  </tr>
  <tr>
    <td>Customer Age</td>
    <td>', $var2, '</td>
  </tr>
  <tr>
    <td>Customer ...</td>
    <td>', $var3, '</td>
  </tr>
</table>'; 
```

使用 foreach 循环

```
$myFields = array("Customer Name" => $row['Name'], 
                  "Customer Age"  => $row['Age']);

echo '<table><tr>';

foreach($myFields as $field_title => $field_value)
   echo '<td>', $field_title, '</td>
         <td>', $field_value, '</td>';

echo '</tr></table>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:39:25.403

简单的。使用此语法：

```
<table >
    <tr>
        <th>Customer Name</th>
        <td><?php echo $var1; ?></td>
    </tr>
    <tr>
        <th>Customer Age</th>
        <td><?php echo $var2; ?></td>
    </tr>
    <tr>
        <th>Customer Name</th>
        <td><?php echo $var3; ?></td>
    </tr>
    <tr>
        <th>Customer Age</th>
        <td><?php echo $var4; ?></td>
    </tr>
    <tr>
        <th>Customer Name</th>
        <td><?php echo $var5; ?></td>
    </tr>
    <tr>
        <th>Customer Age</th>
        <td><?php echo $var6; ?></td>
    </tr>
    <tr>
        <th>Customer Name</th>
        <td><?php echo $var7; ?></td>
    </tr>
    <tr>
        <th>Customer Age</th>
        <td><?php echo $var8; ?></td>
    </tr>
    <tr>
        <th>Customer Name</th>
        <td><?php echo $var9; ?></td>
    </tr>
    <tr>
        <th>Customer Age</th>
        <td><?php echo $var10; ?></td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:40:42.057

你可以使用这样的东西：

```
$array = array();
$array[0]["name"];
$array[0]["age"]; 
```

或者代替那个，你可以使用一个循环：

```
$i=0;
while($i<10){
$array[$i]["name"]=...;
$i++;
}

print_r($array); 
```

# php - strripos 返回第一个索引而不是 php 中的最后一个索引？

> ID：13153271
> 
> 赞同：0
> 
> 时间：2012-10-31T07:36:37.113
> 
> 标签：php, string, compare

我正在执行此操作。

```
$title = "Group CIO, Member of the Executive Committee";

 $pos = strripos($title,"cio"); 
```

而不是`$pos`像`8`我一样获得价值，而是获得`$pos`价值`6`。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:41:47.553

`*pos*`我知道的所有函数都返回匹配*开始*的索引。如果您想知道匹配在哪里*结束*，只需将字符串的长度相加并减去 1：

```
$pos = strripos($title, "cio") + strlen("cio") - 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:40:11.123

因为它的位置是6...

```
0123456
Group CIO, Member... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T07:41:31.687

> 在 haystack 字符串中查找最后一次出现 needle 的数字位置。

最后一次出现是句子中的第二个单词，**从**位置 6开始

你为什么期待第 8 位？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T07:41:47.113

你为什么期待8？

让我演示一下：

```
000000000011111111112
012345678901234567890
Group CIO, Member of ...
      ^ 
```

从[手册](http://de3.php.net/manual/en/function.stripos.php)：

> 返回针相对于 haystack 字符串开头的位置（与偏移量无关）。另请注意，字符串位置从 0 开始，而不是 1

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-31T07:41:52.917

`strripos`查找*最后一次*出现的针的*第一个*字符。您必须手动添加针长

 *```
$pos = strripos($title,"cio")+strlen("cio")-1; 
```*

# android - 具有多个发件人的 GCM

> ID：13153275
> 
> 赞同：1
> 
> 时间：2012-10-31T07:37:02.277
> 
> 标签：android, push-notification, google-cloud-messaging

GCM 引入了多发送者功能，允许多个用户向同一个应用程序发送推送消息。多个用户被赋予相同的注册 ID。

如果多个用户的数量是三个 - Andy、Bob 和 Chris - Andy 被 Google 阻止使用 GCM 服务，那么收到的注册 ID 是否仍然有效？

如果收到的注册 ID 被 Google 阻止，其他人（Bog 和 Chris）是否也被阻止发送推送消息？

Google 如何管理和阻止恶意用户？

另外，我想知道谷歌是如何管理注册ID的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:24:52.773

如果一个应用程序向多个发送者（即多个 Google API 项目 ID）注册 GCM 服务，它将收到一个注册 ID，它应该将其发送到所有发送者的服务器。注册后，所有发件人（包括在注册请求中）都可以使用相同的注册 ID 向该应用程序发送消息。我假设如果 Google 阻止了其中一个发件人，其他人仍然可以使用该注册 ID 来发送消息。注册 ID 未分配给任何发件人。它被分配给特定设备上的特定应用程序。

# soa - 是否可以使用小工具构建复杂的应用程序

> ID：13153280
> 
> 赞同：0
> 
> 时间：2012-10-31T07:37:18.267
> 
> 标签：soa, opensocial, google-gadget

[小工具](http://opensocial.org/)似乎专注于构建小块用户界面功能。

是否可以构建仅使用小工具构建 UI 的复杂应用程序？如果是这样，这种方法的缺陷是什么？是否有任何基于复杂小工具的 UI 的在线示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:14:01.913

简而言之，是的。

归根结底，小工具使用 HTML、CSS 和 JavaScript，因此它们本质上是 Web 应用程序，可以做任何其他 Web 应用程序可以做的事情（在 OpenSocial 案例中更多）。您的整个应用程序可以由一个或多个小工具组成。如果有多个小工具，它们甚至可以相互通信。如果信息来自分散的系统并且您想要构建可重用的组件，您可能希望从多个小工具组成一个应用程序。在这些情况下要注意的一件事是页面上所有内容的加载时间，因为每个小工具都是自己的 iframe。

# c++ - Qt char* 到 QString

> ID：13153281
> 
> 赞同：0
> 
> 时间：2012-10-31T07:37:28.070
> 
> 标签：c++, qt, encoding, char, qstring

我正在尝试转换`char*`为`QString`. 这应该是一项微不足道的任务，但问题是，我有以下输入：

```
item    char [512] "N"  char [512]
    [0] 78 'N'  char
    [1] 0 '\0'  char
    [2] 73 'I'  char
    [3] 0 '\0'  char
    [4] 70 'F'  char
    [5] 0 '\0'  char
    [6] 84 'T'  char
    [7] 0 '\0'  char
    [8] 89 'Y'  char
    [9] 0 '\0'  char
    [10]    0 '\0'  char 
```

注意每个字符 '\0' 后面的空字符。简单地尝试转换它只会产生字符串**"N"**，因为它应该导致字符串**"NIFTY"**。

我不确定它是unicode还是Ansi `string`（实际上我对此了解不多）。谁能解决这里出了什么问题或我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:53:24.400

这对我有用：

```
 char * chr = "N\0I\0F\0T\0Y\0\0";
    QString str = QString::fromUtf16((ushort*)(chr));
    qDebug() << str; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-08-19T10:52:50.717

```
 char name[13] = "StudyTonight";

 int namelen = strlen(name);

 QString  result = QString::fromUtf8((const char *)name,namelen);

 qDebug() << result 
```

# mongodb - 如何在pymongo中实现方差和标准差？

> ID：13153285
> 
> 赞同：2
> 
> 时间：2012-10-31T07:38:01.387
> 
> 标签：mongodb, pymongo

是否可以在 pymongo 聚合框架中进行标准差？我找不到任何原子操作，如 $avg、$sum、$min、$max。

我唯一的另外两种可能性是

1.  遍历行并在python中计算它
2.  使用地图减少。

我可以很容易地用 python 编写它，但我认为这是一个坏主意，因为我会在性能上妥协。而且 map reduce 似乎是一件非常难以精益的事情。在这一点上，我无法理解 map 和 reduce 的真正含义。

在我开始消化 map reduce 之前，我想问问 Stackoverflow 社区是否有现成的东西，这样我就不会最终重新发明轮子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-09T05:21:11.423

看看即将发布的 3.2 版本的 Mongo。他们添加了一些新的聚合方法，其中之一是[标准差](https://docs.mongodb.org/manual/release-notes/3.2-reference/#grp._S_stdDevSamp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:05:56.543

$avg、$sum、$min、$max 都支持作为管道中 $group 的一部分。见这里：[http ://docs.mongodb.org/manual/reference/aggregation/#_S_group](http://docs.mongodb.org/manual/reference/aggregation/#_S_group)

# qt - 如何使 QTreeWidget 中的项目默认展开？

> ID：13153286
> 
> 赞同：10
> 
> 时间：2012-10-31T07:38:05.383
> 
> 标签：qt

我必须在构造函数中调用 expandAll() ，但这看起来没有必要，

![在此处输入图像描述](../Images/fbb6778679eda6be262a91a730e8aeef.png)

我在表单编辑器中添加的东西刚刚折叠，我在右边的框中找不到属性，我应该如何将它默认全部展开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-08T00:28:13.890

您可以使用

```
setExpanded(true); 
```

为父母

```
QTreeWidgetItem 
```

例如：

```
QTreeWidget *treewidget = new QTreeWidget(this);
QTreeWidgetItem *tools = new QTreeWidgetItem(treewidget);
tools->setExpanded(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T08:52:24.310

我用 QTreeWidget 编写了简单的程序。Assistant qt 有属性描述`itemsExpandable()`：

> 此属性保存项目是否可由用户展开。此属性保存用户是否可以交互地展开和折叠项目。默认情况下，此属性为 true。

正如你所说， QTreeWidget 有 expandAll() 插槽。

我在构造函数中调用它。这个插槽工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-03T15:39:49.010

您可以编写自己的函数来添加项目，然后使用它来填充树：

```
void addRootNode(const QString& value) {
    QTreeWidgetItem* treeItem = new QTreeWidgetItem();
    treeItem->setText(value);
    ui->treeWidget->addTopLevelItem(treeItem);
    ui->treeWidget->expandItem(treeItem);
} 
```

# javascript - JQgrid 搜索字符串生成器

> ID：13153287
> 
> 赞同：3
> 
> 时间：2012-10-31T07:38:07.893
> 
> 标签：javascript, jquery, sql, jqgrid

有没有办法为 JQgrid 搜索字符串生成器？即当我按下搜索按钮时，它应该自动生成为网格提供的搜索条件的搜索字符串。

# delphi - xmpp - 当我的朋友登录时我如何收到通知，他在我的名册列表中 - delphi

> ID：13153289
> 
> 赞同：1
> 
> 时间：2012-10-31T07:38:28.050
> 
> 标签：delphi, xmpp, delphi-2010

经过一天的搜索和阅读 rfc，我还没有找到任何关于这个主题的提示。

我编写了delphi组件来访问openFire服务器，到目前为止所有步骤都很好，但我面临一个问题是：

我的花名册列表中有很多朋友，例如， 当帐户**“B@localhost”登录时，我的帐户是****“A@localhost”** ，据此我没有收到任何通知。

 **“B”帐户已添加到我的名册列表中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:50:17.010

XMPP 的存在是双方的协议；您的朋友必须接受您的在线状态订阅请求。尝试在其他地方联系他并要求他这样做。**

# android - 使用andengine移动背景图像不流畅

> ID：13153292
> 
> 赞同：0
> 
> 时间：2012-10-31T07:38:44.377
> 
> 标签：android, andengine

我正在创建一个安卓游戏并使用 AndEngine。我正在使用 AutoparallaxBackground 来移动背景。背景移动不顺畅，**卡住后移动**。如何顺利移动背景。？

```
final AutoParallaxBackground autoParallaxBackground = new AutoParallaxBackground(0, 0, 0, 5);
      autoParallaxBackground.addParallaxEntity(new ParallaxEntity(-50.0f, new Sprite(0, 0, this.texRegBg1)));
     autoParallaxBackground.addParallaxEntity(new ParallaxEntity(-60.0f, new Sprite(0, 0, this.texRegBg2)));
     autoParallaxBackground.addParallaxEntity(new ParallaxEntity(-70.0f, new Sprite(0, 0, this.texRegBg3)));
     autoParallaxBackground.addParallaxEntity(new ParallaxEntity(-80.0f, new Sprite(0, 0, this.texRegBg4))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:17:25.537

1.  AndEngine 中包含一个视差示例，请在您的设备上试用并确保其运行顺畅。

2.  用您的纹理替换视差样本中的一个（单个！）纹理，看看它是否仍然可以顺利工作。如果没有 - 更改和修改您的纹理，直到它变得平滑。

3.  一张一张地添加更多纹理。让他们顺利工作。

# scala - Scala 没有推断出合适的方法

> ID：13153306
> 
> 赞同：6
> 
> 时间：2012-10-31T07:39:47.443
> 
> 标签：scala, generics, type-inference

我有以下方法

```
def show[E: Writes, T: Writes](block: RequestWithUser[AnyContent] => Either[E, T]): Action[AnyContent] = {
  withErr(block)
} 
```

我从控制器中这样使用：

```
def show(id: Long) = CrudAuthAction.show { request =>
  IdeaType.findByIdWithErr(id)
} 
```

而且我希望请求方法是可选的，所以我为同一方法定义了另一个签名：

```
def show[E: Writes, T: Writes](block: => Either[E, T]): Action[AnyContent] = {
  withErr(request => block)
} 
```

它工作正常，我可以省略请求参数

但是当我尝试用另一种方法做同样的事情时

```
def list[T: Writes](block: RequestWithUser[AnyContent] => T): Action[AnyContent] = {
  fromRequest(block)
}

def list[T: Writes](block: => T): Action[AnyContent] = {
  fromRequest(request => block)
} 
```

当我想这样使用它时：

```
def list = CrudAuthAction.list { request =>
  IdeaType.find(request.queryString)
} 
```

它告诉我请求缺少参数类型，我必须像这样指定它：

```
def list = CrudAuthAction.list { request: RequestWithUser[AnyContent] => 
```

我看不出与第一种情况有什么不同，但 scala 似乎无法推断出正确的请求类型......

我看到的唯一区别是，在第一种情况下，该块返回一个 Either[E，T]，但在第二种情况下，它只返回一个通用 T...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:20:44.097

The problem is that in the second example the compiler does not know which of the overloaded methods to pick, because T could well be a function type. Since `Either` is clearly not a function, it works in the first case.

To work around this issue, you could change the second method to

```
def list[T: Writes](block: => Foo[T]): Action[AnyContent] = {
  fromRequest(request => block.v)
} 
```

With Foo defined like that:

```
case class Foo[T](val v:T) 
```

Unfortunately, adding an implicit conversion to Foo breaks things again, unless you create an implicit conversion for each type in the `Writes` type class.

# iphone - 如何在 iOS 6 中进行 Facebook 登录？

> ID：13153307
> 
> 赞同：3
> 
> 时间：2012-10-31T07:39:48.740
> 
> 标签：iphone, objective-c, facebook, ios6

我的应用程序使用 facebook 登录来验证用户身份，我听说 facebook 集成变成了 iOS SDK 本身，

现在，如果集成在 iOS 本身内部，我可以使用它登录而不导入 facebook SDK，如果可以，怎么办？我的应用程序也将运行 iOS 6 作为发布目标吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T07:55:13.897

好吧，首先您必须将`Social.framework`in 添加到您的项目中。

**第 2 步**：您需要导入两个类。导入所需的类。

```
#import <Social/Social.h>
#import <Accounts/Accounts.h> 
```

**第 3 步**：我假设您的应用程序中有一个 Facebook 按钮。在按钮上单击写下这些行。你完成了。:-)

```
- (IBAction)facebookButtonClicked:(id)sender
{
    if([SLComposeViewController isAvailableForServiceType: SLServiceTypeFacebook])
    {
        // Facebook Service Type is Available

        SLComposeViewController *slVC   =   [SLComposeViewController composeViewControllerForServiceType: SLServiceTypeFacebook];
        SLComposeViewControllerCompletionHandler handler    =   ^(SLComposeViewControllerResult result)
        {
            if (result == SLComposeViewControllerResultCancelled)
            {
                NSLog(@"Cancelled");

            }
            else
            {
                NSLog(@"Done");
            }

            [slVC dismissViewControllerAnimated:YES completion:Nil];
        };
        slVC.completionHandler          =   handler;
        [slVC setInitialText:@"Test Post from iOS6"];
        [slVC addURL:[NSURL URLWithString:@"http://www.apple.com"]];
        [slVC addImage:[UIImage imageNamed:@"someimage.png"]];

        [self presentViewController:slVC animated:YES completion:Nil];
    }
    else
    {
        NSLog(@"Service Unavailable!!!");
    }
} 
```

以上给出的是基本步骤。有关更多信息，您可以参考[This](http://developers.facebook.com/blog/post/2012/09/25/facebook-sdk-for-ios-and-the-ios-6-facebook-integration/)。

**编辑**：有关 Facebook 用户信息，请参阅此[答案](https://stackoverflow.com/questions/12904079/facebook-ios-6-get-user-info)。

快乐编码。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:53:31.480

无论如何，您都需要导入 Facebook SDK 3.x。登录 poroces 的唯一区别是，如果用户已经使用本机 facebook 集成登录，则当用户尝试登录时，您的应用将不会发送到后台。换句话说，登录没有打开 facebook 的网页或可选安装的 facebook 应用程序。Ios 显示一个 uilaertview，说明您的应用程序想要访问 Facebook ant 仅此而已。如果用户单击确定，您的应用程序将被允许，您可以在 facebook 的设置应用程序中看到它.

从实现的角度来看，它没有任何区别。您可以使用 facebook 开发人员主页上的教程。

[http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

# c# - C#如何将IEnumerable匿名列表转换为数据表

> ID：13153310
> 
> 赞同：2
> 
> 时间：2012-10-31T07:39:59.217
> 
> 标签：c#, linq, datatable, ienumerable

许多解决方案都可以将列表转换为`DataTable`使用反射的方法，并且可以用于转换匿名类型。但是，它有*很多*匿名类型列表，那么性能可能是一个问题。

这是`DataTable`从列表创建的唯一方法吗？有更快的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T07:55:59.297

使用正确命名的 POCO/DTO/etc 类绝对会更好，但它仍然可以完成。反射的成本可以通过使用元编程来消除，理想情况下是使用诸如[FastMember 之](http://nuget.org/packages/FastMember)类的预卷库，如下所示。

请注意，匿名类型的使用已强制使用`IList`此处（而不是`IList<T>`等`List<T>`）。使用命名类型最好使用通用版本。这将允许进行一些更改 - 特别`itemType`是`typeof(T)`，并且即使对于空表也可以创建正确的列。也许更重要的是，它将*强制*列表是同质的，而不必对此做出假设。

```
using FastMember;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
static class Program
{
    static void Main()
    {
        var list = GetList();
        var table = ToTable(list);
    }
    static DataTable ToTable(IList source)
    {
        if (source == null) throw new ArgumentNullException();
        var table = new DataTable();
        if (source.Count == 0) return table;

        // blatently assume the list is homogeneous
        Type itemType = source[0].GetType();
        table.TableName = itemType.Name;
        List<string> names = new List<string>();
        foreach (var prop in itemType.GetProperties())
        {
            if (prop.CanRead && prop.GetIndexParameters().Length == 0)
            {
                names.Add(prop.Name);
                table.Columns.Add(prop.Name, prop.PropertyType);
            }
        }
        names.TrimExcess();

        var accessor = TypeAccessor.Create(itemType);
        object[] values = new object[names.Count];
        foreach (var row in source)
        {
            for (int i = 0; i < values.Length; i++)
            {
                values[i] = accessor[row, names[i]];
            }
            table.Rows.Add(values);
        }
        return table;
    }
    static IList GetList()
    {
        return new[] {
            new { foo = "abc", bar = 123},
            new { foo = "def", bar = 456},
            new { foo = "ghi", bar = 789},
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T01:10:22.957

改进了[@MarcGravell](https://stackoverflow.com/a/13153479/538763)对支持的回答：

1.  一个可选的字段列表，指定要保留的列及其顺序。
2.  可空类型。

    ```
    static public DataTable ToDataTable(this IList anonymousSource, List<string> keepOrderedFieldsOpt = null)
    {
        // https://stackoverflow.com/a/13153479/538763 - @MarcGravell
        // Added keepOrderedFieldsOpt, nullable types - @crokusek

        if (anonymousSource == null) throw new ArgumentNullException();
        DataTable table = new DataTable();
        if (anonymousSource.Count == 0) return table;

        // blatently assume the list is homogeneous
        Type itemType = anonymousSource[0].GetType();
        table.TableName = itemType.Name;            

        // Build up orderedColumns
        //
        List<PropertyInfo> orderedColumns;            
        if (keepOrderedFieldsOpt != null)
        {
            Dictionary<string, PropertyInfo> propertiesByName = itemType.GetProperties()
                .ToDictionary(p => p.Name, p => p);

            orderedColumns = new List<PropertyInfo>();
            List<string> missingFields = null;

            foreach (string field in keepOrderedFieldsOpt)
            {
                PropertyInfo tempPropertyInfo;
                if (propertiesByName.TryGetValue(field, out tempPropertyInfo))
                    orderedColumns.Add(tempPropertyInfo);
                else
                    (missingFields ?? (missingFields = new List<string>())).Add(field);
            }

            if (missingFields != null) 
                throw new ArgumentOutOfRangeException("keepOrderedFieldsOpt", "Argument keepOrderedFieldsOpt contains invalid field name(s): " + String.Join(", ", missingFields));
        }
        else
            orderedColumns = itemType.GetProperties().ToList();

        List<string> names = new List<string>();
        foreach (PropertyInfo prop in orderedColumns)
        {
            if (prop.CanRead && prop.GetIndexParameters().Length == 0)
            {
                names.Add(prop.Name);

                // Nullable support from stackoverflow.com/a/23233413/538763 - @Damith
                table.Columns.Add(prop.Name, Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType);
            }
        }
        names.TrimExcess();

        TypeAccessor accessor = TypeAccessor.Create(itemType);
        object[] values = new object[names.Count];
        foreach (var row in anonymousSource)
        {
            for (int i = 0; i < values.Length; i++)
                values[i] = accessor[row, names[i]];

            table.Rows.Add(values);
        }
        return table;
    } 
    ```

# node.js - 将 Meteor 和 MongoDB 部署到 Heroku

> ID：13153314
> 
> 赞同：4
> 
> 时间：2012-10-31T07:40:22.327
> 
> 标签：node.js, mongodb, heroku, meteor

我正在尝试按照特定指南（http://bytesofpi.com/post/20898722298/pushing-your-meteor-project-to-heroku）将我的项目部署到 Heroku

其中一个步骤指出

```
var mongo_url = process.env.MONGOHQ_URL; 
```

需要替换 server/server.js 中的“MONGO_URL”。

问题是我根本找不到那个变量，唯一提到那个变量的是下面的代码

```
 // check for a valid MongoDB URL right away
    if (!process.env.MONGO_URL)
         throw new Error("MONGO_URL must be set in environment"); 
```

有没有人有这方面的经验，或者知道在哪里可以找到“MONGO_URL 以更改它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T00:34:46.790

我建议您不要使用您提到的文章作为指南，而是执行以下操作：

使用 Meteorite 构建和运行本地 Meteor 项目：

```
https://github.com/oortcloud/meteorite 
```

说明在那个页面上。

然后使用这个 buildpack：

```
https://github.com/oortcloud/heroku-buildpack-meteorite 
```

同样，自述文件介绍了如何在 Heroku（单行）上创建您的应用程序

本自述文件底部的注释意味着您需要使用支付卡验证您的 Heroku 帐户，以便您可以将 mongohq:free 插件添加到您的应用程序中。一旦验证运行：

```
heroku addons:add mongohq:sandbox 
```

在 Heroku 上添加数据库。

然后另一个步骤是为您的应用程序设置 ROOT_URL，在应用程序提交后（仅第一次）在您的本地应用程序目录中键入：

```
heroku config:set ROOT_URL=<<domain of your app>> 
```

除非您使用自定义名称，否则 <> 将类似于

```
http://appname.herokuapp.com 
```

如果你然后运行：

```
heroku config 
```

您会看到 MONGOHQ_URL 已与 BUILDPACK_URL 和 ROOT_URL 一起设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:45:43.793

Oortcloud buildpack 是我用过的最好的 Heroku buildpack。

话虽如此，Heroku 是一个死胡同，因为它不支持会话亲和性。至少，您可能能够在 Heroku 上启动并运行您的应用程序，但您永远无法使用多个 dyno 对其进行扩展，除非 Heroku 人员决定更换所有负载均衡器。供参考。死路。

CloudBees 看起来可能是更好的 Meteor 托管平台... [https://github.com/CloudBees-community/meteor-clickstart](https://github.com/CloudBees-community/meteor-clickstart)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-19T07:40:24.097

我多次浏览这个标题，试图找到一个最新的解决方案，将我的本地 Meteor Mongo db 部署到 Heroku。所以我在这里为任何做同样事情的人发布这个答案，尽管问题实际上是关于设置 MONGO_URL。

这是一个更新的解决方案（Meteor 1.3.2.4），用于使用（免费）mLabs 将本地 Meteor Mongo 数据库推送到 Heroku。我的应用程序没有使用陨石，它使用了“马”构建包。

**1\. 转储本地 mongo db**

在您的应用程序文件夹中的终端（不是 mongo shell）中，

```
mongodump --port=3001 -o ../dump 
```

**2\. 将 db 文件从“dump/your-db-name”移到“dump”**

在我的本地流星实例中，/dump 文件夹放置在我的应用程序上方的文件夹中，因此“转储”与我的应用程序文件夹位于同一目录中。“dump”包含一个以我的数据库命名的文件夹（“dump/my-database-name/”）。这会导致下一个脚本失败，并出现 mongorestore 错误“不知道如何处理 'my-database-name'”。为防止出现错误，请将文件夹“my-database-name”中的所有文件向上移动到“dump”，然后删除“my-database-name”文件夹。

默认情况下，您的数据库名称是“meteor”，因此如果您没有更改它，请查找“dump/meteor/”。

**3\. 在 mLabs 中，如果您还没有这样做，请创建一个具有管理员权限的用户。**对我来说，设置时分配的默认用户不起作用。

**4\. 将转储的数据库推送到 Heroku 应用程序的 mLabs。**这假设您在 Heroku 应用程序中添加了 mLabs 插件，并在 Heroku 应用程序配置中设置了“MONGO_URL”。如果这些都没有完成，就必须先完成。

在终端（不是 mongo shell）中，从您的应用程序目录更改为包含“转储”目录的目录。就我而言，它只是“cd ../”。

转到 Heroku 应用程序的 mLabs 插件，然后单击“工具”选项卡，获取默认的“导入”脚本。这个脚本对我不起作用，但它可能对你有用。如果不是，请粘贴此脚本，用您的变量替换括号中的变量（也替换括号）。

```
mongorestore -h [your mLabs value]  -d [your mLabs default user name] -u [your mLabs created user name] -p [your mLabs created user's password] 
```

脚本运行后，您应该能够刷新您的 mLabs“集合”选项卡并查看您推送的数据。

祝你好运:) 我希望这对某人有帮助！

# vb.net - 用户登录后被授权访问页面

> ID：13153315
> 
> 赞同：0
> 
> 时间：2012-10-31T07:40:23.603
> 
> 标签：vb.net, ms-access

嗨，我如何在我的系统中编写代码，即

1) 用户 1：添加、删除、更新、查看 2) 用户 2：仅更新 3) 用户 3：仅查看

我使用 vb.net 和访问数据库。有一些我的代码

```
Dim strConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\user\Documents\MIS\LabSystem\LabTestSystem\LabSystemDB.mdb"
 Dim conn As New OleDbConnection(strConnectionString)

    conn.Open()
    'Enter default login details username and password
    cmd = New OleDbCommand("select * from Login where username='" & TextBox1.Text & "' and password='" & TextBox2.Text & "'", conn)
    dt.Clear()
    da = New OleDbDataAdapter(cmd)
    da.Fill(dt)
    If dt.Rows.Count > 0 Then
        Session("username") = TextBox1.Text
        Response.Redirect("Main.aspx")

    Else
        TextBox1.Text = ""
        TextBox2.Text = ""
        Label1.Text = "Incorrect value: Invalid login or password."
        Label1.ForeColor = System.Drawing.Color.Red
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:59:05.770

通过查看您提供的代码，我认为这是您正在开发的 asp.net Web 应用程序？

要限制站点用户进行固定范围的操作，您需要在站点中实施基于角色的授权机制。用户 1 将在角色 1 中，角色 1 中的用户可以添加、更新、删除和查看。角色 2 的用户只能更新，角色 3 的用户只能查看。

查看以下链接，了解如何为您的站点实施角色提供程序：

[http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)

[http://www.codeproject.com/Articles/281573/ASP-NET-Membership-and-Role-Provider](http://www.codeproject.com/Articles/281573/ASP-NET-Membership-and-Role-Provider)

# java - 如何在不阻塞 HTTP 响应的情况下通过 Flying Saucer 创建 PDF？

> ID：13153316
> 
> 赞同：0
> 
> 时间：2012-10-31T07:40:23.260
> 
> 标签：java, pdf, flying-saucer

我已经开始使用飞碟从 JSF 文件创建 PDF，这很棒！现在我有一个问题：我想在我们的应用程序中使用它来创建 PDF 而不阻塞 HTTP 响应。

请看下面的代码：

```
ServletOutputStream outputStream = response.getOutputStream();
ITextRenderer renderer = new ITextRenderer();
renderer.setDocument(new URL("http://localhost:8080/pdf2.faces").toString());
renderer.layout();
renderer.createPDF(outputStream);
outputStream.flush(); 
```

根据我的理解，ITextRenderer 在第 3 行（在函数 loadDocument 中）加载整个 JSF。这意味着 ITextRenderer 要求整个 JSF 将由服务器创建。

然后，ITextRenderer 在第 4 行创建 PDF 布局，并将其放入第 5 行的 outputStream 中。

如果创建 JSF 需要很长时间怎么办？上面的代码将堆叠在第 3 行，直到服务器创建整个 JSF。因此，如果我想将第 1-6 行的代码放入 servlet 中，它可能会阻止 HTTP 响应并可能导致超时问题。我希望 Flying Saucer 将开始创建输出流 HTTP 响应，而无需等到创建整个原始 JSF。最好的方法是什么？飞碟有任何API支持吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:36:45.030

我使用 Flying Saucer API 找到了以下解决方法：

1) 我重新设计了我原来的 JSF 并分部分加载它

2）我从 JSF 部分创建了单个 PDF，如 Flying Saucer WIKI 中所述

[http://code.google.com/p/flying-saucer/wiki/FAQPDF#How_can_I_print_multiple_pages_on_to_one_PDF,_if_they_come_from_multiple_documents](http://code.google.com/p/flying-saucer/wiki/FAQPDF#How_can_I_print_multiple_pages_on_to_one_PDF,_if_they_come_from_multiple_documents)

它有效，但它仍然是解决方法。如果 JSF 部分的加载需要很长时间，则可能会导致超时问题。如何解决问题？任何帮助将不胜感激。

# c# - 使用按钮单击更改 LinqDataSource

> ID：13153322
> 
> 赞同：0
> 
> 时间：2012-10-31T07:41:06.507
> 
> 标签：c#, asp.net, .net, asp.net-mvc, c#-4.0

我的 asp 页面上有一个 GridView。我想通过单击按钮来更改 LinqDataSource。这是因为我有 2 个数据库视图，您必须能够根据需要查看其中一个视图。当我尝试将 GridView 绑定到我的任何 LinqDataSource' 时，我的问题是没有任何反应。

我的 C# 代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    this.Grid.DataSource = lqds_Grid1;
    this.Grid.DataBind();
}

protected void Button1_Click(object sender, EventArgs e)
{
    if (this.Grid.DataSource == lqds_Grid1)
    {
        this.Grid.DataSource = lqds_Grid2;
        this.Grid.DataBind();
    }
    else
    {
        this.Grid.DataSource = lqds_Grid1;
        this.Grid.DataBind();
    }
} 
```

我的 asp 代码：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="AddressReporting._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:LinqDataSource ID="lqds_Grid1" runat="server" 
        ContextTypeName="AddressReporting.MobileGateway" EntityTypeName="" 
        OrderBy="AdrID, Country" TableName="BarcodeWithLocation">
    </asp:LinqDataSource>
    <asp:LinqDataSource ID="lqds_Grid2" runat="server" 
        ContextTypeName="AddressReporting.MobileGateway" EntityTypeName="" 
        OrderBy="AdrID, Country" TableName="BarcodeWithLocationSorted">
    </asp:LinqDataSource>
    <asp:GridView ID="Grid" runat="server" AllowPaging="True" 
        AutoGenerateColumns="False" Height="217px" Width="268px">
</asp:GridView>
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:01:37.280

这是因为`page_load`方法（事件）工作时间页面加载所以不太正确所以

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!isPostBack) {
       this.Grid.DataSource = lqds_Grid1;
       this.Grid.DataBind();
   }
} 
```

你应该检查页面是否有回发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:58:31.817

首先你可以尝试在给它新值之前将你的数据源设置为null，在分配新值之后你可以调用数据网格的刷新方法来强制它重绘自己

```
this.Grid.DataSource = null;
this.Grid.DataSource = lqds_Grid1;
this.Grid.DataBind();
this.Grid.DataSource.Refresh(); 
```

# php - 使用 PHPSpec2 测试 Paris 模型

> ID：13153325
> 
> 赞同：1
> 
> 时间：2012-10-31T07:41:20.140
> 
> 标签：php, phpspec

我有一个[巴黎](https://github.com/kevinsperrine/paris)模特，像这样：

```
class User extends Model
{
    public function authenticate($signature)
    {
        $hash = hash_hmac('sha256', $this->email, $this->password);

        if ($hash == $signature)
            $this->_authenticated = true;

        return $this->_authenticated;
    }
} 
```

我想用[PHPSpec2](https://github.com/phpspec/phpspec2)来指定这个，但我遇到了一些问题。我想做类似的事情：

```
$this->authenticate('test')->shouldReturn(true); 
```

但是我如何访问我的规范中的 authenticate() 方法？我认为答案可能很简单，但我真的无法理解它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:08:44.563

```
<?php

namespace spec;

use PHPSpec2\ObjectBehavior;

class UserSpec extends ObjectBehavior
{
    function it_should_be_initializable()
    {
        $this->shouldHaveType('User');
    }

    function it_should_authenticate_if_proper_signature_given()
    {
        $signature = '...';
        $this->setEmail('...');
        $this->setPassword('...');

        $this->authenticate($signature)->shouldReturn(true);
    }
} 
```

您需要先在规范中使用电子邮件和密码创建您的签名。在 User 类中实现一些电子邮件和密码设置器。一般来说，这应该可以解决问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:21:56.213

对此有几点想法。

您的用户模型正在与合作者合作以实现其自己的行为 - 该合作者是 hash_hmac 函数。PHPSpec 的黄金法则是 [Subject Under Specification](http://everzet.com/post/33178339051/sus-collaborators)，一次处理一个类，稍后再考虑协作者的实现细节。我发现这有助于我在设计课程时考虑到关注点分离原则，而且我经常发现自己在问这个问题——这个课程真正关心的是什么？

例如，您`UserModel`不应该真正关心您的系统使用哪种哈希算法来保护密码。然而，它可以知道一个对象，称为它`HashingProvider`，它能够散列密码，甚至只接收一个或多个字符串并返回某种散列表示。

通过以这种方式重新构建您的架构`UserModel`，您将能够充分利用 PHPSpec 中的 Mocking（[这里很棒](http://www.slideshare.net/marcello.duarte/mocking-demystified)）来专注于实现您的`UserModel`第一个，然后继续`HashingProvider`

您的规范可能如下所示：

```
<?php

namespace spec;
use PHPSpec2\ObjectBehavior;

class User extends ObjectBehavior
{
   function it_should_be_initializable()
   {
        $this->shouldHaveType('User');
   }

   /**
    * @param /Some/HashingProvider $hashProvider
    */
   function it_should_authenticate_if_proper_signature_given($hashProvider)
   {
      $this->setEmail('email');
      $this->setPassword('password');
      $hashProvider->hash('email', 'password')->willReturn('signature');

      $this->authenticate('signature', $hashProvider)->shouldReturn(true);
   }

   /**
    * @param /Some/HashingProvider $hashProvider
    */
   function it_should_not_authenticate_if_invalid_signature_given($hashProvider)
   {
      $this->setEmail('email');
      $this->setPassword('password');
      $hashProvider->hash('email', 'password')->willReturn('signature');

      $this->authenticate('bad_signature', $hashProvider)->shouldReturn(false);
   }
} 
```

然后，您的用户模型可以按照您的规范描述的方式使用该协作者：

```
<?php
class User extends Model
{
    public function authenticate($signature, $hashProvider)
    {
        $hash = $hashProvier->hash($this->email, $this->password);

        if ($hash == $signature)
            $this->_authenticated = true;

        return $this->_authenticated;
    }
} 
```

# javascript - 用于验证地址的 JavaScript 正则表达式

> ID：13153338
> 
> 赞同：2
> 
> 时间：2012-10-31T07:42:24.167
> 
> 标签：javascript, regex

我想使用正则表达式在 JavaScript 中验证居住地址，但我对正则表达式了解不多，我尝试构建自己的正则表达式 ( `/^[a-zA-Z\s](\d)?$/`)，但它似乎无法正常工作。

我想要实现的是允许字母、空格和至少一个数字（这是必需的），并且应该有可能插入斜杠`/`，但不应该是必需的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T07:58:26.673

我会让你开始，但是当你习惯了正则表达式时，你会发现自己变得更加具体。首先，让我们检查您的正则表达式：

```
/^[a-zA-Z\s](\d)?$/ 
```

这里要注意的重要一点是，这个正则表达式最多只能匹配一个两个字符的字符串！字符类 ,`[ ... ]`匹配*单个*字符：在您的情况下，是字母和空格。您需要将其与所谓的*量词*结合起来，*例如* `*`，意思是“零或更多”，`+`意思是“一个或多个”，`?`意思是“零或一”。您在其他地方使用了量词，`(\d)?`，您说的是“零或一个”数字字符。但你真正想要的看起来更像这样：

```
/^[a-zA-Z\s\d\/]+$/ 
```

在这里，我们说的是“一个或多个”字母、空格、数字或斜杠（请注意，正斜杠必须使用反斜杠进行转义）。

最后，您说要*要求*“至少一个”数字。这可以通过正则表达式中更高级的构造来实现，称为“环视断言”。你要这个：

```
/^(?=.*\d)[a-zA-Z\s\d\/]+$/ 
```

特别是，这是一个*积极的前瞻性断言*，您可以自己研究。没有前瞻断言的另一种方法是：

```
/^[a-zA-Z\s\d\/]*\d[a-zA-Z\s\d\/]*$/ 
```

这显然更复杂，但是当你能够理解这一点时，你就知道你已经在理解正则表达式的路上了。祝你好运！

# php - MySQL 查询 - 选择所有帖子并计算每个帖子的评论数

> ID：13153340
> 
> 赞同：4
> 
> 时间：2012-10-31T07:42:38.910
> 
> 标签：php, mysql, zend-framework, zend-db, zend-db-select

在我的国家是凌晨 3:30，所以我需要睡觉，但我不能没有这个：

我正在尝试获取所有帖子（使用`Zend_Db`）并计算每个帖子的评论。

**架构**

`blog_posts`：

```
+---------------+------------------+------+-----+---------+----------------+
| Field         | Type             | Null | Key | Default | Extra          |
+---------------+------------------+------+-----+---------+----------------+
| id            | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| title         | varchar(255)     | NO   |     | NULL    |                |
| content       | text             | NO   |     | NULL    |                |
| alias         | varchar(100)     | NO   |     | NULL    |                |
| user_id       | int(11)          | NO   |     | NULL    |                |
| created_date  | datetime         | NO   |     | NULL    |                |
| modified_date | datetime         | YES  |     | NULL    |                |
| thumbnail     | varchar(255)     | YES  |     | NULL    |                |
+---------------+------------------+------+-----+---------+----------------+ 
```

这是`blog_comments`：

```
+---------------+------------------+------+-----+---------+----------------+
| Field         | Type             | Null | Key | Default | Extra          |
+---------------+------------------+------+-----+---------+----------------+
| id            | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| user_id       | int(11)          | NO   |     | NULL    |                |
| post_id       | int(11)          | NO   |     | NULL    |                |
| comment       | text             | NO   |     | NULL    |                |
| created_date  | datetime         | NO   |     | NULL    |                |
| modified_date | datetime         | YES  |     | NULL    |                |
+---------------+------------------+------+-----+---------+----------------+ 
```

*注意： 与`blog_comments.post_id`链接`blog_posts.id`。*

* * *

**我想要一个这样的结果表：**

```
+---------------+------------------+------+-----+---------+----------------+
| Field         | Type             | Null | Key | Default | Extra          |
+---------------+------------------+------+-----+---------+----------------+
| id            | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| title         | varchar(255)     | NO   |     | NULL    |                |
| content       | text             | NO   |     | NULL    |                |
| alias         | varchar(100)     | NO   |     | NULL    |                |
| user_id       | int(11)          | NO   |     | NULL    |                |
| created_date  | datetime         | NO   |     | NULL    |                |
| modified_date | datetime         | YES  |     | NULL    |                |
| thumbnail     | varchar(255)     | YES  |     | NULL    |                |
+---------------+------------------+------+-----+---------+----------------+
| TEMPOROARY COLUMN IN OBJECT ($post->comment)                             |
+---------------+------------------+------+-----+---------+----------------+
| comments      |                  |      |     |         |                |
+---------------+------------------+------+-----+---------+----------------+ 
```

* * *

现在，这是我现在的查询：

```
SELECT `p`.*, `c`.*
FROM `blog_posts` `p`
LEFT JOIN (
    SELECT COUNT(*) 
    FROM `blog_comments` `c`
    WHERE c.post_id = p.id
) ON `p`.`comments`; 
```

但它给了我一个错误：

```
Error Code: 1248\. Every derived table must have its own alias 
```

因此，如果有人可以帮助我，将不胜感激！

* * *

***重要说明*** 我正在使用`Zend_Db`，`Zend_Db_Select`所以我必须能够使用`joinLeft()`我需要的功能或任何东西。

这是我的模型`select()`：

```
$select = $this->table->select();

if ($alias) {
    $select->where('alias = ?', $alias);
    return $this->table->fetchRow($select);
}
if ($withComments) {
    // I WILL PLACE THE CODE HERE, EXEMPLE:
    $select->joinLeft(...);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:35:29.090

```
SELECT p.*, x.*
FROM blog_posts p
LEFT JOIN 
(
    SELECT post_id, COUNT(*) as cc
    FROM blog_comments
    GROUP BY post_id
) x 
ON x.post_id = p.id; 
```

# python - 你如何解决：NameError: name 'poll' 没有在 Django 中定义？

> ID：13153341
> 
> 赞同：0
> 
> 时间：2012-10-31T07:42:42.657
> 
> 标签：python, django

我正在做 Django 教程，在那里我创建了一个模型，做了 syncdb，并启动了 python shell。但是，当我运行代码 poll.objects.all() 时，它显示错误：

```
>>> poll.objects.all()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'poll' is not defined 
```

无论我尝试什么，同样的错误不断出现： NameError: name 'poll' is not defined

我试图弄清楚如何解决这个问题，以便我可以使用各种数据库查找功能。我已经导入了这些类：

> > > 从 polls.models 导入民意调查，选择

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:46:35.373

您必须像 from your_app.models import Poll Poll.objects.all() 一样导入模型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:47:56.507

你有一个错字。尝试`Poll`代替`poll`

```
 Poll.objects.all() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:49:11.437

您正在导入`Poll`然后使用`poll`. Python 区分大小写。

# php - 如何使用日期正确地将 JSON 从 php 传递到 Javascript？

> ID：13153343
> 
> 赞同：0
> 
> 时间：2012-10-31T07:42:51.963
> 
> 标签：php, javascript, jquery, json

我正在修改 Jquery 每周日历插件（您可以在此处查看完整演示：skedyul.herokuapp.com）

现在，我正在尝试使用 PHP 动态放置一些事件，但我对 JSON 的概念还很陌生。

这是我要编码为 JSON 的示例 php 数组：

```
<?php 
        $events = array(
            array(
            "id" => 1,
            "start" => date("D M j Y H:i:s "),
            "end" =>  date("D M j Y H:i:s ",strtotime("+30 minutes")),
            "title" => "College Algebra"
            ),
            array(
            "id" => 2,
            "start" => date("D M j Y H:i:s ",strtotime("+30 minutes +1 day")),
            "end" =>  date("D M j Y H:i:s ",strtotime("+45 minutes +1 day")),
            "title" => "Calculus"
            )
        );
?> 
```

这是带有一些示例数据的工作 Javascript 代码：

```
<script type="text/javascript">

        function getEventData() {
          var year = new Date().getFullYear();
          var month = new Date().getMonth();
          var day = new Date().getDate();
          console.log(new Date(year, month, day, 12));
          return {
             events : [
                {
                   "id":1,
                   "start": new Date(year, month, day, 12),
                   "end": new Date(year, month, day, 13, 30),
                   "title":"College Algebra",
                },
                {
                   "id":2,
                   "start": new Date(year, month, day, 14),
                   "end": new Date(year, month, day, 14, 45),
                   "title":"Statistics and Probability"
                }
             ]
          };
       } 
```

在这里，我把上面的Javascript改成了这个（把json编码的php关联数组）

```
<script type="text/javascript">

            function getEventData() {
              var year = new Date().getFullYear();
              var month = new Date().getMonth();
              var day = new Date().getDate();
              console.log(new Date(year, month, day, 12));
              return {
                 events : <?php echo json_encode($events)?>
              };
           }
</script> 
```

它似乎工作并且不会喷出错误，但问题在于日期。它没有在日历上正确显示..

**如何正确地从 PHP 传递带有日期的 JSON？** 谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:53:34.027

请考虑：来自[http://code.google.com/p/datejs](http://code.google.com/p/datejs)
的 date.js 您可以使用**Date.parse()**或**Date.parseExact()** 在您的情况下，您可以使用 Date.parseExact(dateString, "d MMM d yyyy HH:mm:ss")

在您的页面中，包含 date.js。

```
<script src="http://yoursite/path/to/date.js"></script> 
```

然后尝试以下...

```
var dateobj = Date.parseExact(dateString, "d MMM d yyyy HH:mm:ss")
alert(dateobj.toString()); 
```

请阅读[http://code.google.com/p/datejs/wiki/FormatSpecifiers](http://code.google.com/p/datejs/wiki/FormatSpecifiers)了解日期格式

# mysql - 在连接中，如何在所有列名前加上它来自的表

> ID：13153344
> 
> 赞同：69
> 
> 时间：2012-10-31T07:42:54.237
> 
> 标签：mysql, sql

我正在分析一个相当可怕的遗留数据库/代码库，试图通过将查询组合到连接中来减少服务器负载（包括通常调用超过一百万个单独查询的电子邮件警报 cron 作业）。

```
SELECT * FROM 
class_alerts_holding ah 
INNER JOIN class_listings l ON l.id = ah.lid 
INNER JOIN class_users u ON u.id = ah.uid
LEFT JOIN class_prodimages pi ON pi.pid = ah.lid 
```

这吐出120列......

```
aid | id | lid | uid | oid | catName | searchtext | alertfreq | listType | id | owner | title | section | shortDescription | description | featured | price | display | hitcount | dateadded | expiration | url | notified | searchcount | repliedcount | pBold | pHighlighted | notes | ... 
```

为了帮助我分析如何构建新查询，如果我可以在结果中的列前面加上它们在 JOIN 中来自的表，那就太棒了

```
class_alerts_holding.aid | class_alerts_holding.id | class_listings.lid | ... 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-31T07:51:11.773

你可以

```
select ah.*, l.*, u.*, pi.* from ... 
```

那么这些列将至少按表排序返回。

为了更好地区分每两组列，您还可以添加“分隔符”列，如下所示：

```
select ah.*, ':', l.*, ':', u.*, ':', pi.* from ... 
```

^(*（编辑以删除不必要的显式别名，请参阅评论。）*)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-31T07:48:47.990

您可以命名查询中的字段并给它们起别名：

```
SELECT     ah.whateverfield1 AS 'ah_field1',
           ah.whateverfield2 AS 'ah_field2',
           l.whateverfield3 AS 'l.field3',
           [....]
FROM       class_alerts_holding ah 
INNER JOIN class_listings l ON l.id = ah.lid 
INNER JOIN class_users u ON u.id = ah.uid
LEFT JOIN  class_prodimages pi ON pi.pid = ah.lid 
```

如果您有这么多字段，手动设置需要做一些工作，但是您可以使用此查询来简化它...

```
SHOW FULL FIELDS FROM your_table_name; 
```

...和一个好的文本编辑器和复制粘贴。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-09-07T10:43:15.653

我确信在连接中使用表名作为前缀和/或后缀字段名称的这种功能应该包含在**ANSI SQL STANDARD**中。目前，在 2019 年，仍然没有优雅的跨平台方式来做到这一点，剩下的就是使用别名的丑陋且容易出错的手动黑客，或涉及动态 sql 的特定于平台的解决方案。每个人都会真正受益于能够为“点星”(.*) 表示的字段指定自定义前缀或/和后缀。添加此类功能后的示例选择将是：

```
select a.* use prefix,b.* use postfix '_b' from table_a a inner join table_b b on a.id=b.id 
```

如您所见，默认情况下前缀或后缀将等于表名（或别名），并且可以用任何所需的字符串文字覆盖。

还需要添加到标准中的是能够从“已加星标”(*) 输出中排除某些字段，这是选择所有字段的快捷方式。由于减少网络数据传输或/和简洁的原因，我将添加***except***关键字以列出我不想包含在内的字段，例如：

```
select * except large_binary_data_field,another_notneeded_field,etc from my_table 
```

这样的特性将允许避免显式指定需要的完整（并且可能很大）字段列表的*必要性*，而不是仅指定星号和一些*不需要*的字段。

所以拜托，无论谁阅读了这篇文章并能够接触到 ANSI SQL 标准的影响者，你都知道该怎么做）

**PS** *又一个丑陋的，但至少是自动化和通用的动态 sql 包装器*

对于使用 psycopg 的 Python 拥护者，这是我使用的方便的子程序（严格在内部，因为它很容易发生 sql 注入）

```
def get_table_fields(table,alias,prefix='',suffix='',excluding=''):
    if type(excluding)==str: excluding=excluding.split(',')
    cur.execute('select * from '+table+' where 0=1');cur.fetchall()
    if not (cur.description is None):        
        return ','.join([alias+'.'+col.name+' '+prefix+col.name+suffix for col in cur.description if not (col.name in excluding)]) 
```

以及调用代码，我将在其中加入 3 个表并希望避免从***数据集表中获取大******数据***字段：

 *```
sql="""select %s,%s,%s from tasks t,features_sets f,datasets d 
        where 
                t.is_active=true and f.is_active=true 
                and f.task=t.id and t.train_dataset=d.id 
    """ % (
        get_table_fields('tasks','t',prefix='ts_'),
        get_table_fields('features_sets','f',prefix='fs_'),
        get_table_fields('datasets','d',prefix='ds_',excluding='data')
    ) 
```

它为我展开成强大的

```
select t.id ts_id,t.project ts_project,t.name ts_name,***,
    fs_id,f.task fs_task,f.name fs_name,f.description fs_description,***,
    d.id ds_id,d.project ds_project,d.name ds_name,***
from tasks t,features_sets f,datasets d 
    where 
        t.is_active=true and f.is_active=true 
        and f.task=t.id and t.train_dataset=d.id 
```

其中 *** 表示大量其他有用的字段，其中一些在多个表中很常见（因此需要前缀）。*cur*显然是 psycopg 游标，并且 0=1 条件旨在仅检索没有真实数据的字段名称。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-06-06T15:35:40.793

动态命名列的方法是生成一个引用 information_schema 的准备好的语句。这会给你你正在寻找的结果。

```
SET @sql = NULL;
SELECT CONCAT(
   'SELECT ',GROUP_CONCAT(c.TABLE_NAME,'.',c.COLUMN_NAME,' AS `',c.TABLE_NAME,'.',c.COLUMN_NAME,'`'),'
    FROM class_alerts_holding 
    INNER JOIN class_listings ON class_listings.id = class_alerts_holding.lid 
    INNER JOIN class_users ON class_users.id = class_alerts_holding.uid
    LEFT JOIN class_prodimages ON class_prodimages.pid = class_alerts_holding.lid'
)
INTO @sql
FROM INFORMATION_SCHEMA.COLUMNS c
WHERE c.TABLE_NAME IN ('class_alerts_holding','class_listings',
                       'class_users','class_prodimages');    
PREPARE sql_statement FROM @sql;
EXECUTE sql_statement; 
```

GROUP_CONCAT() 函数的默认限制为 1024 个字符，因此根据表中的列数，您可能需要提高此限制才能生成准备好的语句。

```
SET SESSION group_concat_max_len = 1000000; 
```

如果需要，此命令将提高组连接限制。-

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-03-24T16:39:03.923

我最终只是为查询构建了字段集，截至 2020 年，这仍然不受支持。

但是，作为一个懒惰的程序员，我显然不想为查询中的所有表手动输入这些内容。所以我写了一个查询来构建选择语句：

```
SELECT
    CONCAT(table_name, ".", column_name, " AS ", CHAR(34), table_name, ".", column_name, CHAR(34)) field_names
FROM
    information_schema.columns
WHERE
    table_schema = "my_database"
    AND table_name IN(
        "table_1",
        "table_2"
    ); 
```

这将输出如下内容：

```
| field_names                        |
|------------------------------------|
| table_1.id AS "table_1.id"         |
| table_1.name AS "table_1.name"     |
| table_2.id AS "table_2.id"         |
| table_2.number AS "table_2.number" | 
```

然后可以轻松地将其复制到您的`SELECT`声明中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-26T10:49:42.240

根据 koljaTM 和 AndriyM 提出的解决方案，也许更好的解决方案是这样编写您的查询：

```
select
  '--TABLE_AAA:--', TABLE_AAA.*,
  '--TABLE_BBB:--', TABLE_BBB.*,
  '--TABLE_CCC:--', TABLE_CCC.*,
  '--TABLE_DDD:--', TABLE_DDD.*
from ... 
```

不幸的是，当一个（或多个）表包含的列名超过屏幕宽度时，这仍然不够好。（因此您可能会在屏幕上看到 20 列，但在屏幕上仍然看不到它们来自的表的名称。）

如果 SQL 提供了一种自动为列名添加表名前缀的方法，那就更好了……

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-31T08:15:37.603

我在这个问题中发现了一些有用的东西[MySQL concat() to create column names to be used in a query?](https://stackoverflow.com/questions/985842/mysql-concat-to-create-column-names) . 我认为这可能是解决方案之一。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-15T10:03:19.917

@alden-w，您可以将 TABLE_SCHEMA 条件添加到不要混淆来自不同模式的相同表名的位置

```
WHERE c.TABLE_SCHEMA='YOUR_SCHEMA_NAME' AND c.TABLE_NAME IN (....) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-07T06:11:46.603

```
CREATE OR REPLACE FUNCTION getAlias (mytable text, my_alias text, my_prefix text)
RETURNS SETOF TEXT AS $$
   SELECT my_alias || column_name || ' as ' || my_prefix
   FROM information_schema.COLUMNS
   WHERE TABLE_NAME = mytable;
$$ LANGUAGE SQL 
```

-- 你可以在db中编写函数。此函数需要成为 SQL 中的标准。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-08-31T08:06:51.137

您可以尝试动态 sql 根据表定义随时随地创建查询。

```
declare @col varchar(max)
set @col = Select stuff( 
          (select ', ' + column_name + '.' + table_name 
           from information_schema.columns 
           where table_name in ( 'table1', 'table2' ...) for xml 
           path('')),1,1,'')

declare @query nvarchar(max) = '
select ' + @col + ' 
from table1 
inner join table2 on table1.id = table2.id '

exec sp_executesql @query 
```*

# asp.net-mvc-3 - 如何在 OnActionExecuting() 中添加 QueryString？

> ID：13153347
> 
> 赞同：0
> 
> 时间：2012-10-31T07:43:18.730
> 
> 标签：asp.net-mvc-3, onactionexecuting

如果不存在，我想在当前请求 URL 中添加两个 queryString

**编辑：**

我试过这个---

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
if (filterContext.RequestContext.HttpContext.Request.QueryString["mid"] == null && filterContext.RequestContext.HttpContext.Request.QueryString["mod"] == null)
{
mid = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)["mid"]);
mod = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)["mod"]);
if (!string.IsNullOrEmpty(mid) || !string.IsNullOrEmpty(mod))
{
RouteValueDictionary redirecttargetDictionary = new RouteValueDictionary();
NameValueCollection Qstr = null;
if (filterContext.HttpContext.Request.RequestType == "GET")
{
Qstr = HttpUtility.ParseQueryString(filterContext.HttpContext.Request.Url.Query);
foreach (string item in Qstr)
{
redirecttargetDictionary.Add(item, Qstr[item]);
}
if (Qstr["mid"] == null)
{
redirecttargetDictionary.Add("mid", mid);
}
if (Qstr["mod"] == null)
{
redirecttargetDictionary.Add("mod", mod);
}
filterContext.Result = new RedirectToRouteResult(redirecttargetDictionary);
}
}
} 
```

这段代码工作正常。- 检查 quesrystring 是否存在，如果不存在 - 然后从 'Urlreferrer' 中获取 qstring 值 - 如果请求类型是 GET - 然后添加两个带有现有查询字符串的查询字符串

但是，如果当前请求中的查询字符串的`null`值 url`http://localhost:53372/question/index?type=&stage`如b null 然后在再次点击操作之前`OnActionExecuting()`首先调用'if'不正确然后`index`方法调用但我没有得到类型 n 阶段查询字符串，假设为 null 我在地址栏中找到的 url 是`http://localhost:53372/question/index?mid=1&mod=5`。如果我删除过滤器，我在`http://localhost:53372/question/index?type=&stage=&mid=1&mod=5`这里得到了 URL，虽然它为空，但我得到了两个阶段 n 类型的查询字符串。

**已编辑——**

```
[HttpGet]
        public ActionResult Index(ProjectType? projectType, int? projectStageID, int? page)
        {
            int currentPageIndex = page.HasValue ? page.Value - 1 : 0;
            IPagedList<ProjectModule> moduleList = null;
            IDictionary<string, string> queryParam = new Dictionary<string, string>();
            queryParam["ProjectType"] = string.Empty;
            queryParam["ProjectStageID"] = string.Empty;
            ViewBag.ProjectType = null;
            ViewBag.ProjectStage = null;
            ViewBag.message = "";
            if ((projectType != null || projectType.HasValue) && projectStageID.HasValue && page.HasValue)
            {

                queryParam["ProjectType"] = Request.QueryString["ProjectType"];
                queryParam["ProjectStageID"] = Request.QueryString["ProjectStageID"];
                //
                //Set View Bag
                //
                ViewBag.ProjectType = Enum.Parse(typeof(ProjectType), Request.QueryString["ProjectType"]);
                ViewBag.ProjectStage = Convert.ToInt32(Request.QueryString["ProjectStageID"]);
                //
                // Set Query String formcollection for Pagging purpose
                //           
                ViewBag.QueryParam = queryParam;
                moduleList = new ProjectModuleService().GetProjectModulesByProjectStageID(Convert.ToInt32(Request.QueryString["ProjectStageID"])).ToPagedList(currentPageIndex, Utility.ConstantHelper.AdminDefaultPageSize); ;
                if (moduleList.Count == 0)
                {
                    ViewBag.message = "Record(s) not found.";
                }
                return View(moduleList);

            }
            else
            {
                if (!string.IsNullOrEmpty(Request.QueryString["ProjectType"]) && !string.IsNullOrEmpty(Request.QueryString["ProjectStageID"]) && !string.Equals(Request.QueryString["ProjectStageID"], "0"))
                {
                    if (!string.IsNullOrEmpty(Request.Params.Get("Index")))
                    {
                        queryParam["ProjectType"] = Request.QueryString["ProjectType"];
                        queryParam["ProjectStageID"] = Request.QueryString["ProjectStageID"];
                        //
                        //Set View Bag
                        //
                        ViewBag.ProjectType = Enum.Parse(typeof(ProjectType), Request.QueryString["ProjectType"]);
                        ViewBag.ProjectStage = Convert.ToInt32(Request.QueryString["ProjectStageID"]);
                        //
                        // Set Query String formcollection for Pagging purpose
                        //           
                        ViewBag.QueryParam = queryParam;
                        moduleList = new ProjectModuleService().GetProjectModulesByProjectStageID(Convert.ToInt32(Request.QueryString["ProjectStageID"])).ToPagedList(currentPageIndex, Utility.ConstantHelper.AdminDefaultPageSize); ;
                        if (moduleList.Count == 0)
                        {
                            ViewBag.message = "Record(s) not found.";
                        }
                        return View(moduleList);
                    }

                    else if (!string.IsNullOrEmpty(Request.Params.Get("Create")))
                    {
                        return RedirectToAction("Create", new { projectStageID = Convert.ToInt32(Request.QueryString["ProjectStageID"]) });
                        //return RedirectToAction("Create", new { projectStageID = Convert.ToInt32(Request.QueryString["ProjectStageID"]), projectType = Enum.Parse(typeof(ProjectType), Request.QueryString["ProjectType"]) });
                    }

                }
                if (Request.QueryString["ProjectType"] == "" || Request.QueryString["ProjectStageID"] == "" || string.Equals(Request.QueryString["ProjectStageID"], "0"))
                {
                    ViewBag.message = "Please select all fields.";
                    return View();
                }
                return View();
            }
        } 
```

**我在做什么错？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:06:32.433

这里我的理解是，如果 URL 中没有查询字符串，则需要添加两个查询字符串参数。**如果您要显式添加这两个查询字符串参数，则它将是该查询参数的默认值**。

最好在操作方法中提供默认值，而不是在 URL 中添加查询参数。您可以通过以下代码实现。

```
public ActionResult ComposeEmail(int queryParameter1 = 0,string queryParameter2 = string.Empty)
{
} 
```

如果您有任何疑问，请告诉我。

# javascript - Javascript 正则表达式替换文本 div 和 < >

> ID：13153349
> 
> 赞同：0
> 
> 时间：2012-10-31T07:43:22.367
> 
> 标签：javascript, regex

```
var text='<div id="main"><div class="replace">&lt; **My Text** &gt;</div><div>Test</div></div>' 
```

我想用 class="replace" 替换 div 并且 html 实体**`&lt; &gt;`** 在该 div 中带有一些其他文本。

即输出：

```
'<div id="main"> Hello **My Text** Hello <div>Test</div> </div>' 
```

我试过了

```
var div = new RegExp('<[//]{0,1}(div|DIV)[^><]*>', 'g');
text = text.replace(div, "Hello"); 
```

但这将替换所有 div。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:54:41.773

如果可以接受 Jquery 解决方案：

```
text = $(text) // Convert HTML string to Jquery object
         .wrap("<div />") // Wrap in a container element to make...
         .parent()        // the whole element searchable
         .find("div.replace") // Find <div class="replace" />
           .each(function()   // Iterate over each div.replace
           {
             $(this)
               .replaceWith($(this).html() // Replace div with content
                .replace("&lt;", "<sometext>")
                .replace("&gt;", "</sometext>")); // Replace text
           })
         .end().html(); // return html of $(text) 
```

这设置`text`为：

```
<div id="main"><sometext> My Text </sometext><div>Test</div></div> 
```

并再次将其替换回来：

```
text = text.replace('<sometext>', '<div class="replace">&lt;')
           .replace('</sometext>', '&gt;</div>'); 
```

[http://api.jquery.com/jquery/#jQuery2](http://api.jquery.com/jquery/#jQuery2)
[http://api.jquery.com/each/](http://api.jquery.com/each/)
[http://api.jquery.com/find/](http://api.jquery.com/find/)
[http://api.jquery.com/html/](http://api.jquery.com/html/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:03:23.973

在纯 JS 中，它会是这样的：

```
var elements = document.getElementsByClassName('replace');
var replaceTag = document.createElement('replacetext');
for (var i = elements.length - 1; i >= 0; i--) {
    var e = elements[i];
    e.parentNode.replaceChild(replaceTag, e);
};​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:19:43.227

这是一个与您想要的匹配的疯狂正则表达式：

```
var text='<div id="main"><div class="replace">&lt; **My Text** &gt;</div><div>Test</div></div>'

var r = /(<(div|DIV)\s+class\s*?=('|")\s*?replace('|")\s*?>)(\s*?&lt;)(.*?)(&gt;\s*?)(<\/(div|DIV)\s*?>)/g; 
```

可以使用以下方式进行整个更换：

```
text.replace(r, function () {
         return 'Hello' + arguments[6] + 'Hello';
    }); 
```

如果解决方案有问题，请告诉我:)。

顺便说一句：我完全反对像答案中的那个正则表达式......如果你用那个复杂的正则表达式做到了，那么可能有更好的方法来处理这个问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:19:13.283

考虑改用 DOM；你已经有了你想要的结构，所以换掉节点本身（大量借用[@maxwell的代码](https://stackoverflow.com/a/13153564/36537)，但也移动孩子）：

```
var elements = document.getElementsByClassName('replace');
for(var i = elements.length-1; i>= 0; --i) {
    var element = elements[i];
    var newElement = document.createElement('replacetext');
    var children = element.childNodes;
    for(var ch = 0; ch < children.length; ++i) {
        var child = children[ch];
        element.removeChild(child);
        newElement.appendChild(child);
    }
    element.parentNode.insertBefore(newElement,element);
    element.parentNode.removeChild(element);
} 
```

然后，对于给定类的每个元素，它会将其每个子元素移动到新元素，然后使用该元素的位置插入新元素并最终移除自身。

我唯一的疑问是getElementByClassName对数组返回的item的修改是否会出问题；它可能需要在处理之前额外检查元素是否有效，或者您可能更喜欢将其编写为递归函数并首先从最深的节点处理树。

它可能看起来需要更多的工作，但这应该更快（在你改变它之后不需要重新解析 html，元素移动只是参考值分配）并且更健壮。[尝试解析 HTML 可能会损害您的健康。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

重读问题（总是一个好计划），你从字符串中的文本开始。如果这确实是起点（即，您不只是将其从 innerHTML 值中提取出来），那么要使用上述内容，只需创建一个临时父元素：

```
var fosterer = document.createElement('div');
fosterer.innerHTML = text; // your variable from the question 
```

然后继续使用`fosterer.getElementsByClassName`.

# java - struts 应用程序中 db 24 小时后引发的事件

> ID：13153350
> 
> 赞同：3
> 
> 时间：2012-10-31T07:43:25.210
> 
> 标签：java, mysql, struts2, scheduling

在我的 struts 应用程序中，票据正在被提出，并且它们在创建时存储在 db 中。

现在我的要求是在该令牌创建时间的 24 小时后引发一个事件。

我知道一个 Quatz 时间表可以每 24 小时引发一次事件。但我的要求是基于数据库某行中的时间。

我可以找到上述任何工具来执行此操作吗？

如何在对数据库的点击最少的情况下做到这一点？

请问有人可以建议我一些想法吗？我用的是MYSQL，可能需要回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:49:23.693

在以前的一个项目中，我们曾经让用户配置任意触发的提醒，

*   根据项目的截止日期，
*   在未来的某个时候
*   基于项目的非活动期等，

我们曾经有一个 Quartz Job，它每 5 分钟运行一次，并识别数据库中满足上述条件之一的项目记录，然后检索它们并执行操作（在我们的例子中，我们需要向配置的某些收件人发送提醒电子邮件）。

根据您的要求，您可以配置类似的作业并决定周期。如果您的表太大，您可以每 5 分钟/10 分钟运行一次作业，这意味着该事件可能会在 24 小时后以 5 分钟/10 分钟的延迟引发。如果您的表足够小，您可以每分钟运行一次作业。

HTH。

# linux - root shrc 的权限被拒绝

> ID：13153356
> 
> 赞同：2
> 
> 时间：2012-10-31T07:44:31.543
> 
> 标签：linux, shell, command-line, command, centos

每当我在 Centos5.1 上打开终端时，总是会收到此错误

```
/root/.cshrc Permission denied 
```

然后我不能使用网络命令（ip，ifconfig，...），因为它们被报告为未知命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:09:52.813

验证您是否有权读取 .cshrc 要执行该问题：

ls -l /root/.cshrc

如果输出以破折号开头，则表示您没有。授予自己对此文件问题的读取权限：

chmod +r /root/.cshrc

现在，如果您运行`ls -l /root/.cshrc`输出应该以`-r`.

# backbone.js - 如何使用启用 require.js 的 yeoman 引导 Backbone 应用程序

> ID：13153359
> 
> 赞同：7
> 
> 时间：2012-10-31T07:44:44.337
> 
> 标签：backbone.js, requirejs, amd, yeoman

我现在和约曼一起玩了一段时间。我想知道如何完成引导 Backbone 应用程序并同时启用 require.js。

```
yeoman init 
```

为我提供了一个设置，我可以在其中使用 AMD 风格的模块。

```
yeoman init backbone:all 
```

为我提供了一个 Backbone 脚手架，但我必须在 index.html 中手动“包含”我所有的模型、集合等。

有没有办法两者兼得？

问候菲利克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T18:25:41.987

我们更新了 Yeoman[主干生成器](https://github.com/yeoman/generator-backbone)以支持[RequireJS](https://github.com/yeoman/generator-backbone/pull/22)。但它没有正式添加到 npm。但是您可以尝试使用

```
npm install git://github.com/yeoman/generator-backbone.git 
```

讨论：[在 npm install 中找不到](https://github.com/yeoman/generator-backbone/issues/9)

主干生成器支持 yeoman 1.0beta。尝试

```
yo backbone 
```

您将收到 RequireJS 的条件提示。

**更新 1**

[骨干生成](https://npmjs.org/package/generator-backbone)器在 npm 上可用。
尝试`npm install generator-backbone`

**[主干生成器 v0.2.2](https://github.com/yeoman/generator-backbone/releases)现在支持**UPDATE 2**
RequireJS with option`--coffee`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T16:28:59.333

这已经是一个未[解决](https://github.com/yeoman/generator/issues/76)的问题。在那里添加您的想法:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T07:47:49.620

Hi I developed a generator for that, take a look at [https://github.com/abiee/generator-backbone-amd](https://github.com/abiee/generator-backbone-amd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T22:20:29.467

我今天也在尝试。我最终所做的是首先执行 yeoman init。然后再次 yeoman 安装骨干网。控制台会询问您是否要覆盖文件。不要覆盖 main.js 和 index.html。你可以休息一下。

这不会给你完美的开始。但是，大多数事情都会到位。**

# struts2 - struts2中以表格形式显示数据库内容

> ID：13153360
> 
> 赞同：0
> 
> 时间：2012-10-31T07:45:07.177
> 
> 标签：struts2

在struts2中以带有文本字段的形式显示数据库的内容。这是一个情景。这只是一个示例。有一个显示员工列表的 jsp 页面 (abc.jsp)。此页面包含一个按钮（添加员工），当用户单击此按钮时，将调用一个操作 abcAction，该操作将打开 xyz.jsp，要求用户填写必要的信息，如 emp_ID、emp_name 等。成功时打开 abc.jsp 页面，显示输入的信息在一张桌子上。与此信息一起，“编辑”按钮出现在同一页面 (abc.jsp) 上。现在如何在用户单击编辑按钮时显示 xyz.jsp 页面以及用户根据 emp_ID 输入的必要字段。

# java - 始终从顶部开始垂直滚动条

> ID：13153363
> 
> 赞同：0
> 
> 时间：2012-10-31T07:45:25.357
> 
> 标签：java, swing, jscrollpane

```
nspQuestionArea = new NScrollPane(); 
nspQuestionArea.setVerticalScrollBarPolicy
(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);  

nspQuestionArea.setVerticalScrollBarPolicy
(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);  

nspQuestionArea.setViewportView(getNpQuestionArea());    
//where getNpQuestionArea() return a panel    
nspQuestionArea.getVerticalScrollBar().setValue(0);             
nspQuestionArea.getVerticalScrollBar().setValue(0);    
nspQuestionArea.getVerticalScrollBar().setUnitIncrement(5);    
nspQuestionArea.setOpaque(false); 
```

如果我打开面板，垂直滚动条从面板中间开始，我需要始终从顶部启动滚动条。

有什么方法可以这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:15:27.507

I'm not really sure what an `NScrollPane` is, or what the component returned from `getNpQuestionArea()` is, but it looks like they're probably just an extension of `JComponent`s. In that case, you can probably call the following...

```
getNpQuestionArea().scrollRectToVisible(new Rectangle(0,0,0,0)); 
```

Also, assuming that `NScrollPane` is an extension of `JScrollPane`, if you pass in the `getNpQuestionArea()` into the constructor of the `NScrollPane`, I believe it should automatically be at the top. So, something like this...

```
nspQuestionArea = new NScrollPane(getNpQuestionArea()); 
```

If you parse the `JComponent` into the `NScrollPane` constructor, I believe it positions the scrollbar at the top-left of the `JComponent`. However, if you add the `JComponent` later by calling `setViewportView()`, it positions it centrally by default. It has something to do with the way that the `JComponent`s are layed-out when generating the display - if you add it in the constructor, it lays out the `NScrollPane` to the correct size and location for the `JComponent` that you pass to it. However, if you create a default `NScrollPane` and only give it the `JComponent` later, it just creates a `NScrollPane` at a default size, rather than fitting it appropriately to the `JComponent`.

Give both of these a try and see how you go.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:28:20.157

setCaretPosition(0) 为我工作

# java - 二维数组空指针异常错误

> ID：13153367
> 
> 赞同：2
> 
> 时间：2012-10-31T07:46:02.763
> 
> 标签：java, arrays, object, 2d

```
public class DoubleMatrix
{
    private double[][] doubMatrix;

    public DoubleMatrix(int row, int col)
    {              
            if(row > 0 && col > 0)
            {
                    makeDoubMatrix(row,col);
            }
            else
            {
                    row = 1;
                    col = 1;
            }
    }

    public DoubleMatrix(double[][] tempArray)
    {
            if(tempArray != null)
            {
                    for(int i = 0; i < tempArray.length-1;i++)
                    {
                            if(tempArray[i].length == tempArray[i+1].length)
                            {
                                    tempArray = doubMatrix;
                            }
                    }
            }
            else
            {
                    makeDoubMatrix(1,1);
            }
    }

    public int getDim1()
    {
            return doubMatrix.length;
    }

    public int getDim2()
    {
            return doubMatrix[0].length;
    }

    private void makeDoubMatrix(int row, int col)
    {
      double[][] tempArray  = new double[row][col];
      for (int i = 0;i < row;i++)
      {
          for(int j = 0;j < col;j++)
          {
              tempArray[i][j] = Math.random() * (100);            
              doubMatrix[i][j] = tempArray[i][j];
         }
      }  
   }
    public DoubleMatrix addMatrix(DoubleMatrix secondMatrix)
    {      
            //this. doubMatrix = doubMatrix;
            double[][] tempArray;
            if(secondMatrix.doubMatrix.length == doubMatrix.length)
                    if(secondMatrix.doubMatrix[0].length == doubMatrix[0].length)
                    {
                            tempArray = new double[doubMatrix.length][doubMatrix[0].length];
                            for(int i = 0; i< secondMatrix.doubMatrix.length;i++)
                                  for(int j = 0; j< secondMatrix.doubMatrix[i].length;j++ )
                                  {
                                      tempArray[i][j] = secondMatrix.doubMatrix[i][j] + doubMatrix[i][j];// add two matrices
                                  }//end for    
                            return new DoubleMatrix (tempArray);
                    }

                            return  new DoubleMatrix(1,1);                                                                 
    }

    public DoubleMatrix getTransposedMatrix()
    {
            double[][] tempArray = new double[doubMatrix.length][doubMatrix[0].length];
            for(int i = 0;i < doubMatrix.length;i++)
            for(int j = 0;j < doubMatrix[i].length;j++)
            {
                tempArray[j][i] = doubMatrix[i][j];// transposed    matrix2          
            }//end for         
            return new DoubleMatrix(tempArray);
    }

    public DoubleMatrix multiplyingMatrix(DoubleMatrix secondMatrix)
    {
            double[][] tempArray = new double[secondMatrix.doubMatrix.length][doubMatrix[0].length];
            //check if dimension of matrix1 equal to dimension of matrix2  
            if(secondMatrix.doubMatrix[0].length == doubMatrix.length)
                    if(doubMatrix.length == secondMatrix.doubMatrix[0].length)
            {

                             for (int i = 0; i <secondMatrix.doubMatrix.length; i++)
                   {
                       for(int j = 0; j < doubMatrix[0].length; j++)
                        {

                           for (int k = 0; k < doubMatrix.length; k++)
                           {
                               tempArray[i][j] = tempArray[i][j] + secondMatrix.doubMatrix[i][k]*doubMatrix[k][j]; // multiply 2 matrices

                           }
                        }
                   }//end for  
            }// end if

                            return new DoubleMatrix(1,1);                                  
    }

    public void printMatrix(String text)
    {
            System.out.println(text);// output string
            for(int i = 0; i< doubMatrix.length;i++)
            {
                  for(int j = 0; j< doubMatrix[i].length;j++ )      {                                
                      System.out.printf("%9.1f", doubMatrix[i][j]);// out put value for matrices                   
                  }  
                  System.out.println();
            }
    }
}

public class Program3
{
public static void main(String[] args)
{
        int num1 = (int) (Math.random()*(10-3+1)+3);
        int num2 = (int) (Math.random()*(10-3+1)+3);
        DoubleMatrix doubMatObj1 = new DoubleMatrix(num1,num2);
        DoubleMatrix doubMatObj2 = new DoubleMatrix(doubMatObj1.getDim1(),doubMatObj1.getDim2());
        DoubleMatrix doubMatObj3;

        doubMatObj2.getDim1();

        doubMatObj3 = doubMatObj1.addMatrix(doubMatObj2);
        doubMatObj1.printMatrix("First Matrix Object");
        doubMatObj2.printMatrix("Second Matrix Object");
        doubMatObj3.printMatrix("Result of Adding Matrix Objects");
        doubMatObj2 = doubMatObj2.getTransposedMatrix();
        doubMatObj2.printMatrix("Result of inverting Matrix Object");
        doubMatObj3 = doubMatObj1.multiplyingMatrix(doubMatObj2);
        doubMatObj3.printMatrix("Result of Multiplying Matrix Objects");
}
} 
```

嗨，我`NullPointerException`在 makeDoubMatrix 方法的最后一行语句以及第一个构造函数的 if 语句中的调用 makedoubMatrix 中有一个错误。当我已经初始化它时，doubMatrix 似乎为空。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:49:21.843

您要初始化数组，即：

```
private double[][] doubMatrix = new double[size1][size2]; 
```

其中 size1 和 size2 是任意大小。你可能想要的是：

```
if(row > 0 && col > 0)
{
    doubMatrix = new double[row][col];
    makeDoubMatrix(row,col);
}
else
{
    doubMatrix = new double[1][1];
    makeDoubMatrix(1,1);
} 
```

如果 row 和 col 都大于 0，则将数组 doubMatrix 初始化为 row*col 的大小，否则为 1*1，然后使用其初始化大小调用 makeDoubMatrix（您可以在 if-else 之后调用此方法，使用`doubMatrix.size`和`doubMatrix[0].size`，但我认为它现在更具可读性）。

使用相同的推理更改第二个构造函数（它采用 2D 数组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:49:12.343

你*没有*初始化`doubMatrix`. 唯一分配值的行`doubMatrix`是注释掉的行：

```
//this. doubMatrix = doubMatrix; 
```

（这无济于事。）

问问自己，你*认为*你在哪里初始化它——你*认为*你在哪里有类似的东西：

```
doubMatrix = new double[1][2]; 
```

...或从另一个数组复制值的赋值：

```
doubMatrix = someOtherVariable; 
```

如果您没有任何语句为其分配值，则您*没有*对其进行初始化，因此它将始终具有默认值`null`.

# php - MySQL 的简单 PHP 表单无法正常工作，可能是表格不准确？

> ID：13153368
> 
> 赞同：0
> 
> 时间：2012-10-31T07:46:04.383
> 
> 标签：php, mysql, forms

以下代码由[本](http://www.html-form-guide.com/php-form/php-form-processing.html)教程编写。数据库结构在这里：[http ://www.shareimages.com/image.php?62275-pJqgl5ejk6Col5yVnaY-local_mysql_screen.gif](http://www.shareimages.com/image.php?62275-pJqgl5ejk6Col5yVnaY-local_mysql_screen.gif)

如果我尝试将数据插入更简单的“成员”表，代码运行良好，但不适用于“用户”表。在这种情况下，我无法弄清楚障碍。请推荐一些解决方案。

```
<?php
function PrepSQL($value)
{
    // Stripslashes
    if(get_magic_quotes_gpc())
    {
        $value = stripslashes($value);
    }
    // Quote
    $value = "'" . mysql_real_escape_string($value) . "'";
    return($value);
}

    if(!empty($_POST['submit'])) {

        $company=$_POST['company'];
        $vat=$_POST['vat'];
        $city=$_POST['city'];
        $zip=$_POST['zip'];
        $str=$_POST['str'];
        $nr=$_POST['nr'];
        $other=$_POST['other'];
        $email=$_POST['email'];
        $tel=$_POST['tel'];
        $url=$_POST['url'];

        $db = mysql_connect('localhost', 'asd', 'asdpass');
        if(!$db) die("Error connecting to MySQL database.");
        mysql_select_db("fc" ,$db);

        $sql = "INSERT INTO member (company,vat,city,zip,str,nr,other,email,tel,url) VALUES (".
                 PrepSQL($company) . ", " .
                 PrepSQL($vat) . ", " .
                 PrepSQL($city) . ", " .
                 PrepSQL($zip) . ", " .
                 PrepSQL($str) . ", " .
                 PrepSQL($nr) . ", " .
                 PrepSQL($other) . ", " .
                 PrepSQL($email) . ", " .
                 PrepSQL($tel) . ", " .
                 PrepSQL($url) . ")";

        mysql_query($sql);
        echo "data saved";
    }
?> 
```

```
<form action="#" method="POST" >
    <input name="company" type="text" id="company" class="text required" placeholder="Cégnév" />
    <input name="vat" type="text" id="vat" class="text " placeholder="Adószám" />
    <fieldset>
    <select name="city" id="city" class="item select city r4 required " title="Település kiválasztása" placeholder="Település"  />
        <option value="31353">Aba</option><option value="16547">Abádszalók</option>
    </select>
    <input name="zip" type="text" id="zip" class="text required" placeholder="isz." />
    <input name="str" type="text" id="str" class="text required" placeholder="közterület neve" />
    <input name="nr" type="text" id="nr" class="text required" placeholder="szám" />
    <input name="other" type="text" id="other" class="text " placeholder="egyéb" />
    <input name="email" type="email" pattern="[^ @]*@[^ @]*" id="email" class="text required" placeholder="email" value="@" />
    <input name="tel" type="tel" pattern="[\+]\d{2}[\ ]\d{2}[\ ]\d{4}\d{3}" id="tel" class="text required" value="+36 " title="Telefonszám: +36 00 1234567"  placeholder="+36 00 1234567" />
    <input name="url" type="url" id="url" class="text " value="http://" />
    <input name="submit" type="submit" value="Adatok elküldése" class="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:31:13.190

在您的 SQL 查询中，它不是表“用户”而不是“成员”吗？

```
 $sql = "INSERT INTO user (company,vat,city,zip,str,nr,other,email,tel,url) VALUES (".
                 PrepSQL($company) . ", " .
                 PrepSQL($vat) . ", " .
                 PrepSQL($city) . ", " .
                 PrepSQL($zip) . ", " .
                 PrepSQL($str) . ", " .
                 PrepSQL($nr) . ", " .
                 PrepSQL($other) . ", " .
                 PrepSQL($email) . ", " .
                 PrepSQL($tel) . ", " .
                 PrepSQL($url) . ")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T12:35:58.470

您的插入语句有缺陷。给定的列与您的 db 列不匹配。

```
$sql = "INSERT INTO member (company,vat,city,zip,str,nr,other,email,tel,url) 
```

将“电话”更改为“电话”，它应该可以工作。

# c# - ASP.NET MVC 3 是否缓存过滤器？

> ID：13153370
> 
> 赞同：3
> 
> 时间：2012-10-31T07:46:19.470
> 
> 标签：c#, asp.net-mvc-3, c#-4.0, castle-windsor

我有一个 UnitOfWork 属性，如下所示：

```
public class UnitOfWorkAttribute : ActionFilterAttribute
{
    public IDataContext DataContext { get; set; }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {            
        if (filterContext.Controller.ViewData.ModelState.IsValid)
        {
            DataContext.SubmitChanges();
        }

        base.OnActionExecuted(filterContext);
    }
} 
```

如您所见，它具有`DataContext`由 Castle.Windsor 注入的属性。`DataContext`具有 PerWebRequest 的生活方式 - 意味着为每个请求重用单个实例。

问题是，有时我`DataContext is Disposed`在这个属性中遇到异常，我记得 ASP.NET MVC 3 试图以某种方式缓存操作过滤器，那么这可能会导致问题吗？

如果是这样，如何解决这个问题 - 通过不使用任何属性并尝试使用 ServiceLocator 内部方法？

如果它缓存过滤器，是否可以告诉 ASP.NET MVC 不缓存过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:49:27.857

我强烈建议不要使用这样的构造。有几个原因：

1.  提交数据上下文不是控制器（或控制器装饰属性）的责任。
2.  这会导致大量重复的代码（你必须用这个属性装饰很多方法）。
3.  在执行（在`OnActionExecuted`方法中）的那个时刻，提交数据是否实际上是安全的。

尤其是第三点应该引起你的注意。模型有效这一事实并不意味着可以提交数据上下文的更改。看这个例子：

```
[UnitOfWorkAttribute]
public View MoveCustomer(int customerId, Address address)
{
    try
    {
        this.customerService.MoveCustomer(customerId, address);
    }
    catch { }

    return View();
} 
```

当然这个例子有点幼稚。你几乎不会吞下每一个例外，那是完全错误的。但它确实表明，当不应该保存数据时，操作方法很有可能成功完成。

但除此之外，提交事务真的是 MVC 的一个问题，如果你确定它是，你是否还想用这个属性装饰所有的动作方法。如果您无需在 Controller 级别执行任何操作就实现这一点，会不会更好？因为，在此之后您要添加哪些属性？授权属性？记录属性？追踪属性？它停在哪里？

相反，您可以尝试对需要在事务中运行的所有业务操作进行建模，以一种允许您动态添加此行为的方式进行建模，而无需更改任何现有代码或在各处添加新属性。一种方法是为这些业务操作定义一个接口。例如：

```
public interface ICommandHandler<TCommand>
{
    void Handle(TCommand command);
} 
```

使用此界面，您的控制器将如下所示：

```
private readonly ICommandHandler<MoveCustomerCommand> handler;

// constructor
public CustomerController(
    ICommandHandler<MoveCustomerCommand> handler)
{
    this.handler = handler;
}

public View MoveCustomer(int customerId, Address address)
{
    var command = new MoveCustomerCommand
    {
        CustomerId = customerId,
        Address = address,
    };

    this.handler.Handle(command);

    return View();
} 
```

对于系统中的每个业务操作，您定义一个类（一个[DTO](https://en.wikipedia.org/wiki/Data_transfer_object)和[Parameter Object](https://en.wikipedia.org/wiki/Data_transfer_object)）。在示例中的`MoveCustomerCommand`类。此类仅包含数据。实现是在一个实现的类中定义的`ICommandHandler<MoveCustomerCommand>`。例如：

```
public class MoveCustomerCommandHandler
    : ICommandHandler<MoveCustomerCommand>
{
    private readonly IDataContext context;

    public MoveCustomerCommandHandler(IDataContext context)
    {
        this.context = context;
    }

    public void Handle(MoveCustomerCommand command)
    {
        // TODO: Put logic here.
    }
} 
```

这看起来像是一大堆额外的无用代码，但这实际上非常有用（如果你仔细观察，它实际上并没有那么多额外的代码）。

有趣的是，您现在可以定义一个装饰器来处理系统中所有命令处理程序的事务：

```
public class TransactionalCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private readonly IDataContext context;
    private readonly ICommandHandler<TCommand> decoratedHandler;

    public TransactionalCommandHandlerDecorator(IDataContext context,
        ICommandHandler<TCommand> decoratedHandler)
    {
        this.context = context;
        this.decoratedHandler = decoratedHandler;
    }

    public void Handle(TCommand command)
    {
        this.decoratedHandler.Handle(command);

        this.context.SubmitChanges();
    }
} 
```

这并不比你的代码多多少`UnitOfWorkAttribute`，但不同的是，这个处理程序可以包装任何实现并注入任何控制器，而控制器不需要知道这一点。在执行命令后直接是真正知道是否可以保存更改的唯一安全位置。

您可以在本文中找到有关这种设计应用程序的方式的更多信息：[同时...在我的架构的命令端](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:00:49.377

今天我偶然发现了问题的原始问题。
从问题中可以看出，过滤器具有由 注入的属性，`Castle.Windsor`因此使用的人`ASP.NET MVC`知道，要使其工作，您需要具有`IFilterProvider`实现，该实现将能够使用 IoC 容器进行依赖注入。

`FilterAttributeFilterProvider`所以我开始研究它的实现，并注意到它是从`FilterAttributeFilterProvider`构造函数派生而来的：

```
public FilterAttributeFilterProvider(bool cacheAttributeInstances) 
```

因此，您可以控制是否缓存您的属性实例。

禁用此缓存后，站点被`NullReferenceExceptions`.

问题是，在我们添加`Castle.Windsor`过滤器提供程序之后，原始过滤器没有被删除。因此，当启用缓存时，IoC 过滤器提供程序正在创建实例，并且默认过滤器提供程序正在重用它们，并且所有依赖项属性都填充了值 - 这并不明显，除了过滤器在缓存被禁用后运行两次的事实，默认provider 需要自己创建实例，因此未填充依赖属性，这就是`NullRefereceExceptions`发生的原因。

# apache-flex - 如何使用 HTTPService 在 flex 4 中处理来自 RESTful Web 服务的流式响应？

> ID：13153373
> 
> 赞同：1
> 
> 时间：2012-10-31T07:46:38.833
> 
> 标签：apache-flex

是否可以通过 HTTP Get 方法处理来自 RESTful Web 服务（Web 服务部署在 Tomcat 服务器上）的流数据。我用来访问返回流数据的 Tomcat 服务器上的 resful web 服务。代码：

```
<s:HTTPService  id="getList" url="<rest webservice url>" showBusyCursor="true" useProxy="false" method="GET" resultFormat="xml" result="resultHandler(event)" fault="faultHandler(event)" >

 <s:request xmlns="">
 <sessionid>a3a1d1f1-cf55-465e-b369-0c484d8ec38f</sessionid>
 </s:request>
 </s:HTTPService> 
```

上面的 web 服务实际上从服务器返回了一些设备记录，如果记录少说大约 10 或 20 ，我可以在结果事件中看到数据。但是假设有大约 1000 条记录需要在一个系列数据包，不生成结果事件。关于如何接收完整数据以便在数据网格上显示的任何输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:56:53.527

如果您只发出 GET 请求，请使用 URLStream 类而不是 HTTPService。这可以满足您的需求，并允许您在数据包中访问数据。

# ios - UIView，在一些基础知识上苦苦挣扎（xcode，iOS）

> ID：13153374
> 
> 赞同：1
> 
> 时间：2012-10-31T07:46:48.923
> 
> 标签：ios, xcode, uiview

我在基于故事板的 iOS 应用程序中遇到了一些基础知识。

我喜欢加载一些在 NIB 文件 (xib) 中构建的 UIView。如果我加载视图，`initWithCoder`将调用 - 方法。

现在我喜欢加载“绿色”视图；我读到，我可以在其中放置一些其他初始化`initWithCoder`- 但只有“新”对象，什么都没有，关于视图本身，比如 self.backgroundColor 导致内存（可能对象没有完全初始化）观点）。

在视图类本身中`setBackgroundColor`添加一些东西的最佳位置在哪里？`setCornerRadius`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:02:23.433

我这样做是这样的：

```
NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"MyCustomView" owner:nil options:nil];
self = [nibViews objectAtIndex: 0]; //here it would be best practice to loop through nibViews and get the first view that is member of your class. 
```

此外，nib 文件中的视图设置为 a`MyCustomView`而不是`UIView`. 在这两行之后，您可以设置所需的任何值。但是请注意，如果您将框架设置为 super 例如，它将被 xib 文件中的值覆盖。所以最好在加载 nib 之后设置所有内容，而不是之前。

据我所知，`UIView`加载`viewDidLoad`时没有回调`UIViewController`。

希望这可以帮助。

干杯!

编辑：

你可以这样做：

```
- (id)initWithInfo:(MyInfoClass *) selectedInfo Body:(NSString *) _body
{
    if ((self = [super init]))
    {
         NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"MyCustomClass" owner:nil options:nil];
         self = [nibViews objectAtIndex: 0];

         [self setInfo:selectedInfo];
         [self setBody:_body];
    }
} 
```

然后就用那个`initWithInfo: Body:`方法。

# ruby-on-rails - 如何为 Rails 管理员禁用 has_many_association？

> ID：13153375
> 
> 赞同：1
> 
> 时间：2012-10-31T07:46:48.957
> 
> 标签：ruby-on-rails, rails-admin

我注释掉了 has_many ，但是在重启 rails 服务器后，同一个导出页面有很多

```
 config.model 'User' do

  #   # You can copy this to a 'rails_admin do ... end' block inside your user.rb model definition

  #   # Found associations:

      # configure :canvases, :has_many_association 
      # configure :level, :has_many_association 
      # configure :tags, :has_many_association 

  #   # Found columns:

      configure :id, :integer 
      configure :name, :string 
      configure :email, :string 
      configure :raw_info, :serialized 
      configure :created_at, :datetime 
      configure :updated_at, :datetime 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:13:21.707

实际上，您应该删除注释以强制执行特定配置。

尝试这个：

```
configure :canvases, :has_many_association do hide end  
configure :level, :has_many_association do hide end  
configure :tags, :has_many_association do hide end 
```

# python - Python字母数字验证服务器端使用正则表达式

> ID：13153376
> 
> 赞同：1
> 
> 时间：2012-10-31T07:46:49.690
> 
> 标签：python, django, validation

我在python中有这段代码。实际上我想使用 python 在服务器端验证密码字段。我希望密码本质上是字母数字，这就是我到目前为止所做的

```
def valid():
    num = "[a-zA-Z0-9]"
    pwd = "asdf67AA"
    match  = re.match(pwd, num)
    if match:
        return True
    else:
        return False 
```

它总是返回 false 。**它没有达到 IF 条件**。我错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:50:01.217

你颠倒了 match 的论点

```
re.match(pattern, string, flags=0) 
```

它应该是

```
match  = re.match(num, pwd) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:52:51.003

您可以执行此操作来确定字符串是否为字母数字

```
pwd = "asdf67AA"
if pwd.isalnum():
    # password is alpha numeric
else:
    # password is not alpha numeric 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:34:11.073

您错过了将参数放在方法 reverse it 中。

它会起作用的。

但是，如果您在字符串中设置符号，这也匹配。所以，我建议你应用这个东西：

密码 =“test5456”

pwd.isalnum():

此方法仅适用于您的字符串包含字符串或数字的情况。

如果您强烈希望您的密码同时包含数字和字符串，那么此代码将为您提供帮助。

```
 test = "anil13@@"
 new = tuple(test)
 data = list(new)
 is_symb =False
 is_digit = False
 is_alpha = False

 for d in data :
    if d.isdigit() :
       is_digit = True
    if d.isalpha():
       is_alpha = True
    if not d.isdigit() and not d.isalpha():
       is_symb =True
       break
if is_symb == False and is_digit == True and is_alpha == True:
   print "pwd matchd::::"
else :
   print "pwd dosen't match..." 
```

注意：此代码非常适用于数字和符号

问候， 阿尼尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T08:34:55.527

这是一个非常简单的答案，最好使用正则表达式进行验证，而不是使用有线 if else 条件。

```
import re
password = raw_input("Enter Your password: ")
if re.match(r'[A-Za-z0-9@#$%^&+=]{6,}', password):
    print "Password is match...."
else:
    print "Password is not match...."
#6 means length of password must be atleast 6 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T09:26:58.327

你可以通过使用 python 的 isalnum() 方法来做到这一点

```
pwd.isalnum() 
```

它会告诉一个数字是否是字母数字，然后会点击 if 条件

# c#-4.0 - e.output 在 WF Completed 事件中为空

> ID：13153378
> 
> 赞同：1
> 
> 时间：2012-10-31T07:47:04.760
> 
> 标签：c#-4.0, workflow-foundation-4

我正在使用 WF 4，我希望当活动失败时，完成 WF 并将回调发送到带有输入/输出参数的客户端。

但是，在 Completed 事件中， e.output 为空。

为什么会发生？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:11:07.813

如果您的工作流程失败，则没有输出。因此，要么使用异常将数据传递给调用者，要么在工作流中处理异常并使其正常终止。

# java - 使用 SWIG 使用 Java 字节数组设置 char * 类型的 C 结构的成员

> ID：13153380
> 
> 赞同：2
> 
> 时间：2012-10-31T07:47:13.323
> 
> 标签：java, swig

例如我们有以下结构：

```
typedef struct Foo
{
    unsigned char * data;
} Foo; 
```

我想`data`用 Java 字节数组 ( `byte[]`) 设置成员。我只想设置方法而不是获取。我已经阅读了[将 char * 类型的成员获取到字节数组的内容](https://stackoverflow.com/questions/11965992/convert-a-member-of-structure-of-type-signed-char-to-byte-array-in-java-byte)的内容，但我无法进行设置。有谁能够帮我？

**更新**：

我创建了一些类型映射并且取得了成功：

```
%typemap(jni) unsigned char * data "jbyteArray"
%typemap(jtype) unsigned char * data "byte[]"
%typemap(jstype) unsigned char * data "byte[]"
%typemap(javaout) unsigned char * data {
    return $jnicall;
}
%typemap(out) signed char * data {
    $result = JCALL1(NewByteArray, jenv, arg1->contentLength);
    JCALL4(SetByteArrayRegion, jenv, $result, 0, arg1->contentLength, $1);
}
%typemap(in) unsigned char *data {
    $1 = (unsigned char *)JCALL2(GetByteArrayElements, jenv, $input, 0);
}
%typemap(javain) unsigned char *data "$javainput" 
```

我有一些内存泄漏吗？我做错了还是有更可靠的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:33:22.157

Or we could do it with [JavaCPP](http://code.google.com/p/javacpp/) instead. Something like this should work:

```
public static class Foo extends Pointer {
    static { Loader.load(); }
    public Foo() { allocate(); }
    public Foo(Pointer p) { super(p); }
    private native void allocate();

    public native @MemberSetter void data(@Cast("unsigned char*") BytePointer data);
} 
```

That is IMO much more readable.

# mysql - Zend 框架 - 仅插入少于 500 行

> ID：13153381
> 
> 赞同：1
> 
> 时间：2012-10-31T07:47:15.183
> 
> 标签：mysql, zend-framework, insert

我正在将 Zend 框架与 Mysql 一起使用。我的应用程序将数据从 csv 文件加载到 mysql 数据库中。该表有两列 (`id`和`name`)。应用程序用于`file_get_contents`读取 csv 文件并使用 Zend_Db_Table 的 $this->insert($data)。该文件恰好有两列与表类似。

我面临的问题是，在插入数据时，它只插入了大约 500 行。剩余的行不会插入到数据库中。浏览器中没有显示任何错误，应用程序就像什么也没发生一样工作。我尝试了不同的数据，但问题是一样的。

```
$file = file_get_contents($filename, FILE_USE_INCLUDE_PATH);
$lines = explode("\n", $file);
$i=1;
for($c=1; $c < (count($lines)-1); $c++) {
list($field1, $field2) = explode(",", $lines[$i]);
$borrower= new Application_Model_DbTable_TempB();
$borrower->uploadborrower($field1, $field2); 
$i++; 
```

uploadborrower 函数只需使用 -A 生成数组 $data 并`this->insert($data)`插入

谁能帮我找出问题所在以及如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:07:19.387

会不会是超时的问题？如果 CSV 很大，它可能会发生。

尝试：

```
set_time_limit(0); 
```

在执行您的代码之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:21:54.663

```
$file = file_get_contents($filename, FILE_USE_INCLUDE_PATH);
$lines = explode("\n", $file);
set_time_limit(0);
$i=1;
for($c=1; $c < (count($lines)-1); $c++) {
list($field1, $field2) = explode(",", $lines[$i]);
$borrower= new Application_Model_DbTable_TempB();
$borrower->uploadborrower($field1, $field2); 
$i++; 
```

# performance - 相同的查询，Oracle 9 慢，Oracle 10 快

> ID：13153395
> 
> 赞同：0
> 
> 时间：2012-10-31T07:48:27.397
> 
> 标签：performance, oracle, query-optimization

我们有一个名为 的表`t_reading`，具有以下架构：

```
MEAS_ASS_ID     NUMBER(12,0)
READ_DATE       DATE
READ_TIME       VARCHAR2(5 BYTE)
NUMERIC_VAL     NUMBER
CHANGE_REASON   VARCHAR2(240 BYTE)
OLD_IND         NUMBER(1,0) 
```

该表的索引如下：

```
CREATE INDEX RED_X4 ON T_READING
(
  "OLD_IND",
  "READ_DATE" DESC,
  "MEAS_ASS_ID",
  "READ_TIME"
) 
```

这个确切的表（具有相同的数据）存在于两台服务器上，唯一的区别是每台服务器上安装的 Oracle 版本。

有问题的查询是：

```
SELECT * FROM t_reading WHERE OLD_IND = 0 AND MEAS_ASS_ID IN (5022, 5003) AND read_date BETWEEN to_date('30/10/2012', 'dd/mm/yyyy') AND to_date('31/10/2012', 'dd/mm/yyyy'); 
```

此查询在 Oracle 10 上执行不到一秒，在 Oracle 9 上执行大约一分钟。

我们错过了什么吗？

编辑：

Oracle 9 的执行计划： ![在此处输入图像描述](../Images/5c4d67bdf45d0da0f1cc86f8525cea10.png)

Oracle 10 的执行计划： ![在此处输入图像描述](../Images/4fb0ae465414bfa7d53cf049984078f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:46:23.323

几个可能的解释：

*   您正在范围扫描不同的索引。
*   假设您在 10g 表上有相同的索引，但您只是将其称为不同的东西，解释计划是不同的。

我主要担心的是 9i 查询的解释计划的行、字节和成本列中缺少信息。默认情况下， Oracle 9i 不*收集*统计信息，此详细信息表明您尚未收集此表的统计信息。用于[`dbms_stats`](http://docs.oracle.com/cd/B10501_01/server.920/a96533/stats.htm#33861)收集有关您的表和索引的统计信息。具体程序[`gather_table_stats`](http://docs.oracle.com/cd/B10501_01/appdev.920/a96612/d_stats2.htm#1003993)：

```
BEGIN

    DBMS_STATS.GATHER_TABLE_STATS (
       ownname => user, 
       tabname => 'T_READING', 
       estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE
       method_opt => 'FOR ALL INDEXED COLUMNS',
       cascade => TRUE, -- gather index statistics
        );
END: 
```

如果您有兴趣，还有很多其他选择。假设索引不同，这*可能*有助于 CBO（假设它“打开”）选择正确的索引。

其他选项包括它们所在的服务器以及数据库参数是什么。如果它们在不同的服务器上，那么相对的“功率”、磁盘速度、I/O 和其他选项的无穷无尽的列表很容易造成差异。如果数据库参数不同，那么您将遇到同样的问题。

数据库调优既是一门艺术，也是一门科学。Oracle 有[一整本书，](http://docs.oracle.com/cd/B10501_01/server.920/a96533/toc.htm)还有很多其他资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:00:08.967

> “我们错过了什么吗？”

几乎可以肯定，但我们很难告诉你是什么。

CBO 从 9i 到 10g 有一些性能改进，但不太可能有那么大的不同。所以它一定是你的系统有一些变化，这显然是我们最难以诊断的事情，因为我们是盲目的和远程的。

所以，首先要排除的是一般系统差异——磁盘速度、I/O 瓶颈、内存大小等。你说你有两台服务器，它们有不同的规格吗？虽然调查这些事情需要系统管理员类型的帮助，但我们可以用一个问题打折扣：只是这个查询，还是你能用许多不同的查询重现这种效果？

如果只是查询，至少有三种可能的解释。

一是数据分布。两个数据库中的数据是如何填充的？如果 10g 是从 9i 数据库中导出的，它是否以某种方式排序？即使 ETL 过程不可能压缩和组织数据并以改善访问时间的方式构建新索引。

另一个是统计数据。10g 的统计数据是否新鲜且真实，而 9i 的统计数据是否陈旧且具有误导性？

第三种可能性是存储的执行计划。（您发布了一个带有文字的查询，这只适用于带有绑定变量的查询。）众所周知，日期范围的搜索很难调整。日期范围`to_date('30/10/2012', 'dd/mm/yyyy') AND to_date('31/10/2012', 'dd/mm/yyyy')`适合一种计划，而日期范围`to_date('01/01/2010', 'dd/mm/yyyy') AND to_date('31/10/2012', 'dd/mm/yyyy')` 可能很适合不同的方法。如果 9i 数据库上的现有计划适合更广泛的范围，那么对狭窄范围的查询可能需要很长时间。

* * *

当我一直在打字时，您已经发布了解释计划。杀手级细节在 9i 计划的底部：

```
Note: rule-based optimization 
```

您没有*任何*表或索引的统计信息，因此优化器正在应用 RBO 的哑默认值。你真的应该解决这个问题，但这不是一个简单的任务。您可能需要收集所有表格的统计信息。您可能需要更改 init.ora 文件中的 OPTIMIZER_MODE。您可能需要对数据库上的所有查询进行回归测试。所以，这不是你应该轻易做的事情。

同时，如果这个查询困扰着你，你需要用老式的方式来处理基于规则的优化器。 [了解更多](http://docs.oracle.com/cd/B10500_01/server.920/a96533/rbo.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:13:41.483

几点观察：

*   您的索引是 DESCENDING 索引。这是一个基于函数的索引，因此在 RULE 优化器下它不会像预期的那样工作。
*   您的 9i 计划仅显示对 OLD_IND 的访问，您的 10g 计划（您切断了重要的谓词位）显示了范围扫描 + inlist 迭代器，因此根据 RED_PK，它可能在 MEAS_ASS_ID 上访问，这可能更具选择性。
*   在索引方面，回答您的查询，`WHERE OLD_IND = 0 AND MEAS_ASS_ID IN (5022, 5003) AND read_date BETWEEN`即`OLD_IND equality, MEAS_ASS_ID equality and read_date range scanned, a better index is (OLD_IND , MEAS_ASS_ID , READ_DATE)`：最后进行范围扫描以减少 IO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:42:07.520

您是否尝试过对两台服务器上的查询运行解释，9i 的查询优化器与 10g 的查询优化器不同。10g 查询优化器更快且并行化。查看以下链接[升级查询优化器](https://docs.google.com/viewer?a=v&q=cache%3aZEdJXILEvmwJ%3awww.oracle.com/technetwork/database/bi-datawarehousing/twp-bidw-optimizer-10gr2-0208-130973.pdf%20&hl=en&gl=za&pid=bl&srcid=ADGEESgbKYCwwZFXJJABSOXhRyda6fgVzrnMcd-BfJgk4hm2-e_M9Rk1Zcsl-NuxDsNLkqVMBEQnwOVUATttLZ7Zgvu0Feo27kmi3GW4cpIFk0EQZi6zMMnCnCrUHNpJRoM5TlJxlXES&sig=AHIEtbTImxmc8QumgsIMMjp9sUd3QpRnAQ)

```
explain SELECT * FROM t_reading WHERE OLD_IND = 0 AND MEAS_ASS_ID IN (5022, 5003) AND read_date BETWEEN to_date('30/10/2012', 'dd/mm/yyyy') AND to_date('31/10/2012', 'dd/mm/yyyy'); 
```

# vmware - 将ip分配给vmware播放器

> ID：13153399
> 
> 赞同：0
> 
> 时间：2012-10-31T07:49:03.670
> 
> 标签：vmware

我有一个专用的 windows server 2008

我在上面安装了 vmware player 5 和 vwmare 中的 ubuntu 10.04 现在我买了一个新的 ip

ip是：

IP：78.157.60.141

私人：192.168.150.50

我想将此 ip 设置为 vwmare

我的问题是我必须怎么做？

我没有任何可以访问地址 192.168.150.1 中的默认网关的权限

主机告诉我，我最常将 vmware 的 ip 设置在这个私有 ip 的范围内

当我用这个命令分配 ip

```
start /wait vnetlib.exe -- stop nat
start /wait vnetlib.exe -- stop dhcp
start /wait vnetlib.exe -- set vnet vmnet8 mask 255.255.255.0 
start /wait vnetlib.exe -- set vnet vmnet8 addr 192.168.150.0 
start /wait vnetlib.exe -- update dhcp vmnet8
start /wait vnetlib.exe -- update nat vmnet8
start /wait vnetlib.exe -- update adapter vmnet8 
start /wait vnetlib.exe -- start dhcp
start /wait vnetlib.exe -- start nat
start /wait vnetlib.exe -- stop dhcp 
```

然后我将vmware player的网络设置为net模式

现在 ubuntu auth1 无法连接并且 ubuntu 处于离线模式

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:53:00.810

转到 VMware 播放器设置 -> 在网络适配器中从 NAT 更改为桥接。然后你可以设置你的IP。现在您的 IP 出现在外部网络中。希望能解决你的问题

# javascript - 如何使用javascript更改HTML文本字段的值

> ID：13153403
> 
> 赞同：11
> 
> 时间：2012-10-31T07:49:11.500
> 
> 标签：javascript, html, forms

```
<head>
<script type="javascript">
function display()
    {
        document.getElementById("textField1").value = "abc";
    }
</script>
</head>
<body>

<form id="form1" action="http://google.com">

<input id="textField1" type="text" value="0" align="right" size="13"/><br>

<input id="button1" type="button" value="1" onclick="display()">
</form>
</body> 
```

但是 textfield 的值没有改变。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T07:53:37.210

尝试

```
<script type="text/javascript"> 
```

代替

```
<script type="javascript"> 
```

. 我相信后者不是有效的语法。

完全删除该`type`属性也可以：

```
<script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T07:56:30.597

你的线路

```
document.getElementById("textField1").value = "abc"; 
```

是对的，试试

```
 <head>
<script>
function display() {
        document.getElementById("textField1").value = "abc";
    }
</script>
</head>
<body>

<form id="form1" action="http://google.com">

<input id="textField1" type="text" size="13" value="clear" /><br>

<input type="button" onclick="display()">
</form>
</body> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T07:53:46.867

`type`从您的`script`标签中删除。这是不正确的，并且使浏览器不会将`script`内容视为 JavaScript。[在这里它不起作用](http://jsbin.com/aqokax/1)，而[在这里它正在工作](http://jsbin.com/aqokax/2)（已`type="javascript"`删除）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T07:57:40.547

它一定要是

```
<script type="text/javascript">
function display()
    {
        document.getElementById("textField1").value = "abc";
    }
</script> 
```

并不是

```
<script type="javascript">
function display()
    {
        document.getElementById("textField1").value = "abc";
    }
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-12T06:20:21.273

如果文本字段没有 id 属性和 name 属性，那么，

采用

```
document.getElementsByName("name")[0].value="ert";
```

getElementsByName() 返回具有该特定名称的对象数组，这就是我们使用索引 0 的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T07:53:48.597

您的代码没有任何问题，它在[这个 fiddle](http://jsfiddle.net/A2Xab/)中运行良好。

我只是推测，但您可以尝试删除脚本标签的类型属性，或者将其更改为`type="text/javascript"`适合使用的类型。如果不指定，浏览器默认将其视为 JavaScript。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-02T08:09:11.730

这实际上是正确的，但如果它不起作用，请尝试这样：

```
document.getElementById("textfield1").innerHtml = "ABC"; 
```

# cookies - 如何在 Spring Security 中使用记住我进行自定义身份验证

> ID：13153404
> 
> 赞同：1
> 
> 时间：2012-10-31T07:49:19.440
> 
> 标签：cookies, spring-security, session-cookies, remember-me

任何人都可以告诉我如何在spring security中使用记住我复选框进行自定义身份验证，

这是我在登录页面中的记住我字段

这是 secuirty.xml 中的配置

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:50:23.297

[如Spring Docs](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-remember-me)中所定义，当声明“remember-me”时，“user-service-ref”应该是：

> “记住我的服务实现需要访问 UserDetailsS​​ervice，因此必须在应用程序上下文中定义一个。”

但是，在您的情况下，您的 user-service-ref 是对 MyCustomAuthentication 类型的 bean 的引用。这就是为什么您会收到 ClassCastException “MyCustomAuthentication cannot be cast to UserDetailsS​​ervice”。

您应该定义如下内容：

```
<security:user-service id="userDetailsService">
    <security:user name="username" password="pass" authorities="ROLE_USER" />
</security:user-service> 
```

并在“user-service-ref”中使用此 id

PS恕我直言，您还必须修复您的身份验证提供程序

高温高压

对于您的要求，更准确地说：

```
 <http auto-config="true" use-expressions="true">
             ...    
             <remember-me  user-service-ref="customUserDetailsManager"/>
        </http>

        <b:bean id="customUserDetailsManager"
            class="com.something.something.MyCustomUserDetailsManager" />

        <authentication-manager>
            <authentication-provider user-service-ref="customUserDetailsManager">
            </authentication-provider>

        </authentication-manager>

    </b:beans> 
```

注意 MyCustomUserDetailsManager 应该实现 UserDetailsManager

另一个重要说明（来自文档）：

> 请注意，两个（Spring 的）实现都需要 UserDetailsS​​ervice。如果您使用的身份验证提供程序不使用 UserDetailsS​​ervice（例如，LDAP 提供程序），那么除非您的应用程序上下文中还有一个 UserDetailsS​​ervice bean，否则它将无法工作。

# c++ - COM，删除内存而不是调用 Release()

> ID：13153408
> 
> 赞同：0
> 
> 时间：2012-10-31T07:49:46.933
> 
> 标签：c++, memory-leaks, com, release, delete-operator

我对 COM 知之甚少，在 Google 中搜索 COM somhow 根本没有找到 COM（可能是因为它搜索的是 .com 地址）。

我们正在使用视频捕获硬件。它的 SDK 允许我们在捕获帧时注册回调。对象接口作为参数传递给该回调，我们可以通过查询该对象来获取大缓冲区地址（到捕获的帧像素）和其他信息。

现在看来，调用Release()实际上并没有删除内存，而是减少了引用计数，当计数达到0时，它被删除了，对吧？那么，关于上面提到的那个大缓冲区地址，使用“delete”关键字“删除”缓冲区怎么样？

似乎我们的程序（不是我写的，编写程序的人退出了公司）将指向缓冲区的指针复制到某个类中，但从未在回调中调用任何 Release()。后来，缓冲区在类中被“删除”。似乎 Release()ing 框架接口对象也删除了缓冲区。但它们是一样的吗？

COM 以某种方式计算引用，但如果用户的代码只是删除该内存会发生什么？如果我的问题含糊不清，我很抱歉。简而言之，删除从 COM 对象获取的缓冲区是否安全。

简化代码：可疑情况

```
void mycallback(IFrame f)
{
  char* buffer;
  f->GetBuffer(buffer);
  MyClass m(buffer);
  ...
}

MyClass::DeleteBuffer()
{
  delete m_buffer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:51:51.430

当代码将帧缓冲区内容复制到自己的缓冲区中时，并没有发生什么特别的事情。帧缓冲区仍归 COM 代码所有，代码自己的缓冲区仍归该代码所有。不要删除 COM 缓冲区，当 COM 代码**也**删除它时，这将调用未定义的行为。如果您先调用 AddRef()，则只应在 COM 接口指针上调用 Release()。在这样的场景中，AddRef() 调用是由 COM 代码在调用回调之前进行的。并且 Release() 调用将在回调返回后进行。

在回调中看到帧被复制是很正常的，帧缓冲区通常只在回调期间保持有效。所以以后用的话就得复制。

如果您正在追踪内存泄漏，那么这不太可能是罪魁祸首。如果帧缓冲区存在引用计数问题，那么程序在消耗所有可用内存之前不能持续超过一分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:35:13.430

处理 COM 接口更棘手:-)

1.  确保匹配 IUnknown::AddRef() 和 IUnknown::Release() 调用
2.  只要您处于相同的上下文中，您就可以显式删除缓冲区，即使您是从 COM 接口获取的。但请确保在删除后使指针无效，以免出现后期处理问题。

    MyClass::DeleteBuffer() { if(m_buffer) { 删除 m_buffer; m_buffer = null; } }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:49:06.120

尝试使用这个地方操作符删除，CoTaskMemFree

# reporting-services - 图表过滤器未按预期工作

> ID：13153410
> 
> 赞同：0
> 
> 时间：2012-10-31T07:49:55.477
> 
> 标签：reporting-services, charts, ssrs-2008

我有一个这样的数据集：

```
Item   Value   Date          Show  
IT1    10      2012 01 01    1  
IT1    9       2012 01 02    1  
IT1    11      2012 01 03    1  
IT2    8       2012 01 01    1  
IT2    5       2012 01 02    1  
IT2    3       2012 01 03    1 
```

在图表中，我有一个过滤器，它检查`Show`值并只留下`Show`1 的行。问题是我看到的不是 2 个项目，而是 1，即使它们都有`show = 1`.

**编辑：**

我试过的过滤表达式：
`=Fields!Show.Value`= `=1`
`=CInt(Fields!Show.Value)`= `=1`
`=CInt(Fields!Show.Value)`= `=CInt(1)`
`=CBool(Fields!Show.Value)`= `=CBool(1)`
`=CBool(Fields!Show.Value)`=`=CBool(True)`

使用这些表达式后，我得到如下数据集：

```
Item   Value   Date          Show  
IT1    10      2012 01 01    1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:05:09.530

我对您的示例感到困惑-您的数据集有 6 行，其中 show = 1 ？

无论如何，SSRS 过滤器是如此晦涩难懂，通常最好避免使用，但这种技术似乎更可靠：

过滤器表达式：=Fields!Show.Value = 1 结果类型：布尔运算符：= 值：True

# php - 如何获取执行文件的完整路径？

> ID：13153414
> 
> 赞同：1
> 
> 时间：2012-10-31T07:50:18.787
> 
> 标签：php, filepath

我试图在 PHP 中获取当前执行文件的完整路径。

`realpath()`*返回没有*脚本文件名的路径。
`pathinfo()`如果不通过它，你就不能使用它来分解整个路径。
`__FILE__`获取调用文件的路径（即，调用`__FILE__`常量的位置），它可能在`included file`; 我不想要。

`$_SERVER`变量, &不返回完整路径`REQUEST_URI`。`SCRIPT_NAME``PHP_SELF`

最有希望的是除了警告之外的`$_SERVER`变量..`SCRIPT_FILENAME`

> 如果使用 CLI 执行脚本，作为相对路径，例如 file.php 或 ../file.php，$_SERVER['SCRIPT_FILENAME'] 将包含用户指定的相对路径。

我想要确切的`$_SERVER['SCRIPT_FILENAME']`返回值，例如`/home/site/public_html/index.php`，但不是 100% 确定在所有情况下使用它是否安全？

后者是最好的使用方法吗？除了 CLI，它是否总是为正常的 Web 请求返回正确的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:03:01.590

这应该有效：

```
$a = get_included_files();
echo $a[0]; 
```

[`get_included_files()`](http://php.net/manual/en/function.get-included-files.php)从文档中引用：

> 最初调用的脚本被认为是“包含文件”，因此它将与 include 和 family 引用的文件一起列出。

# 测试

```
<!-- main.php -->
<?php include "middle.php"; ?>

<!-- middle.php -->
<?php include "inner.php"; ?>

<!-- inner.php -->
<?php var_dump(__FILE__, $_SERVER["PHP_SELF"], get_included_files()); ?> 
```

# 输出

```
string(21) "C:\inetpub\wwwroot\inner.php"
string(9) "/main.php"
array(3) {
  [0]=>
  string(20) "C:\inetpub\wwwroot\main.php" <-- this is what you are looking for
  [1]=>
  string(22) "C:\inetpub\wwwroot\middle.php"
  [2]=>
  string(21) "C:\inetpub\wwwroot\inner.php"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:56:41.077

如果您想要当前文件，您可以使用全局实例检索它

```
__FILE__ 
```

有关详细信息，请参阅[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)如果您想检索文件所在的目录

```
// PHP < 5.3 
dirname(__FILE__);

// PHP > 5.3 
__DIR__ 
```

请参阅[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)和[http://nl1.php.net/manual/en/function.dirname.php](http://nl1.php.net/manual/en/function.dirname.php)

编辑：要检索当前正在**执行的脚本**，您可以获得

```
$_SERVER['SCRIPT_FILENAME'] 
```

这将返回执行文件的文件名。有关详细信息，请参阅[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:55:51.730

您可以使用`dirname(__FILE__);`，或者如果您使用的是 php > 5.3`__DIR__;`

手册： http: [//php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

# tinymce - Tinymce 选择代码

> ID：13153415
> 
> 赞同：1
> 
> 时间：2012-10-31T07:50:24.050
> 
> 标签：tinymce

在tinymce编辑器上有这段代码

```
// Theme options

"styleselect,formatselect,fontselect,fontsizeselect", 
```

这是选择框吗

> 样式选择、格式选择、字体选择、字体大小选择

插件的一部分，或者它们是否在单独的 .js 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:32:07.340

我这样解决了。我打开了

> /var/www/tinymce/jscripts/tiny_mce/themes/advanced/editor_template.js

我知道什么高级控制被命名为例如theme_advanced_blockformats：

这是具有块格式的控件。要更改它们的显示名称，我将其放入此代码

```
theme_advanced_blockformats : "Header 1=header1;Header 2=header2;Header 3=header3;Table Row=tableRow1", 
```

它奏效了。

tinymce 网站上`theme_advanced_styles`有一个很好的例子[http://www.tinymce.com/wiki.php/Configuration:theme_advanced_styles](http://www.tinymce.com/wiki.php/Configuration:theme_advanced_styles)

# c# - C# 中 {0}\{1} 的含义

> ID：13153417
> 
> 赞同：3
> 
> 时间：2012-10-31T07:50:29.547
> 
> 标签：c#

在c#中是什么意思`{0}\{1}`，它返回一些字符串，但是以什么格式，什么样的字符串呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T07:51:45.593

这意味着它期望在字符串中替换参数。就像是。

```
string.Format("{0}{1}","parameter1","parameter2"); 
```

您可能会看到：[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

> 复合格式字符串和对象列表用作支持复合格式功能的方法的参数。复合格式字符串由零个或多个固定文本与一个或多个格式项混合而成。固定文本是您选择的任何字符串，每个格式项对应于列表中的一个对象或盒装结构。复合格式功能返回一个新的结果字符串，其中每个格式项都替换为列表中相应对象的字符串表示形式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T07:52:29.157

这些是字符串格式函数中通常使用的参数/参数：

```
DateTime dat = new DateTime(2012, 1, 17, 9, 30, 0); 
string city = "Chicago";
int temp = -16;
string output = String.Format("At {0} in {1}, the temperature was {2} degrees.",
                              dat, city, temp);
Console.WriteLine(output);
// The example displays the following output: 
//    At 1/17/2012 9:30:00 AM in Chicago, the temperature was -16 degrees. 
```

请参阅[文档](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T07:52:52.407

它们是格式说明符，与`string.Format`or`StringBuilder.AppendFormat`和类似功能一起使用。

有关详细说明，请参阅[string.Format 的手册。](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

# jsf-2 - 禁用富面 4 日历组件中的天数

> ID：13153419
> 
> 赞同：2
> 
> 时间：2012-10-31T07:50:44.913
> 
> 标签：jsf-2, richfaces

我使用两个 ric:calendar 一个作为开始日期，另一个作为结束日期。

结束日期应根据开始日期选择自动禁用所有以前的日期。

可以使用 dayDisableClass 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:15:45.847

换个`disabledDay`方式...

看看这篇文章：[在丰富的日历上禁用天数](http://devharbor.blogspot.co.il/2009/08/disable-days-on-richcalendar.html)

您也可以使用日历`CalendarDataModel`-> `CalendarDataModelItem`->`isEnabled()`

```
Boolean isEnabled() returns "true" if date is "selectable" on the calendar, the default implementation returns "true" 
```

看看[演示](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=calendar&sample=dataModel&skin=blueSky)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:09:48.650

您可以使用日历的属性**dayDisableFunction**并定义您的 JavaScript 函数，该函数将定义哪些天被禁用：

```
<rich:calendar dayDisableFunction="disablementFunction" ...</rich:calendar> 
```

示例 JS 函数：

```
function disablementFunction(day) {
    if (day.isWeekend) return false;
    return true;
} 
```

# sql - 从提供的变量列名创建临时表

> ID：13153420
> 
> 赞同：1
> 
> 时间：2012-10-31T07:50:53.160
> 
> 标签：sql, sql-server, insert, temp-tables

我想创建一个临时表，其中的列将是我作为参数提供的列，由分隔符分隔。

例如，如果列名是：id、name、address..相应的表应该包含相同的列的数量和标题名称。同样，下次列号和名称可能会有所不同。

在这方面有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:17:39.840

尝试这个 ：-

```
CREATE PROCEDURE GenerateTempTable 
@tableName as nvarchar(max),
@Col1 as nvarchar(255),
@Col2 as nvarchar(255)
AS
BEGIN
Declare @sql nvarchar(max)

set @sql='CREATE TABLE #'+ @tableName  + '
         ('+ @col1+ ' nvarchar(255),'+
          @col2 + ' nvarchar(255)
         )'

-- Select @sql   Check the DDL 

EXECUTE sp_executesql @sql,
N'@tableName nvarchar(max),@Col1 nvarchar(255),@Col2 nvarchar(255)',
@tableName = @tableName,@Col1=@Col1,@Col2=@Col2 

END 
```

上述查询的问题是临时表是使用动态块查询创建的，因此在块之后无法访问它。为了访问范围之外的表，您需要创建`global temp table ##`

编辑：- 全局临时表和静态表名的示例

```
ALTER PROCEDURE GenerateTable 
@Col1 as nvarchar(255),
@Col2 as nvarchar(255)
AS
BEGIN
Declare @sql nvarchar(max)

If object_id('tempdb..##TempTable') is not null 
Drop table ##TempTable

set @sql='CREATE TABLE ##TempTable 
        ('+ @col1+ ' nvarchar(255),'+
        @col2 + ' nvarchar(255)
        )'

-- Select @sql   Check the DDL 

 EXECUTE sp_executesql @sql,
 N'@Col1 nvarchar(255),@Col2 nvarchar(255)',
 @Col1=@Col1,@Col2=@Col2 

 END 
```

要执行 SP，sql 是：-

```
 Declare @tableName varchar(max),
 @Col1 varchar(70),
 @Col2 varchar(70)

 Exec GenerateTable @col1='ColA',@Col2='ColB' 
```

编辑2： -

如果您确定参数的数量不会超过 x 值（比如说 5）。那么您可以创建 5 个默认参数。查看[此](https://stackoverflow.com/questions/7162752/default-parameter-values-in-sql-server-2008-stored-procedure)链接以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-21T19:06:48.747

你能不能从这些“动态字段名称”所在的地方从一个不同的列表中构建一个表......然后将它作为一个字符串列表推入......就像......我用颜色构建了一个表然后得到了一个名称字段现在我要把它推入一个可用于构建表格标题的字符串中......数量不限......

```
SELECT @Fields = coalesce(@Fields + ',', '') +  convert(varchar(50),[name])
                FROM #TempCols
                WHERE column_id > 1
                ORDER BY column_id 
```

其中 Column_ID 只是一个 Windowed ROW_Number ...

我不同意它永远不可能的概念。总有一种方法，我们现在可能看不到，但总有一种方法可以嵌套或滥用，以使任何规则符合我们的需要。

# javascript - 使用 JS SDK 将照片发布到 Facebook 粉丝页面中的相册

> ID：13153421
> 
> 赞同：1
> 
> 时间：2012-10-31T07:51:05.483
> 
> 标签：javascript, facebook, sdk

我正在使用 Facebook API 发出一个非常烦人的问题。如果有人可以帮助我，那就太好了。

我正在使用 Facebook 的 JS SDK，我最终需要完成的是将照片发布到用户粉丝页面中的一个特定相册中。我确实成功地将照片发布到用户个人资料中的特定相册，但是 - 当涉及到页面时......它只是不起作用。

我尝试使用的代码如下：

```
var imgURL = "http://newsimg.ngfiles.com/178000/178187_asfasf.jpg";
FB.api('/ALBUMID/photos', 'post', { 
    message: 'Sweet',
    url: imgURL,
    access_token: 'PAGE ACCESS TOKEN'
}, function (response) {
    if (!response || response.error) {
        alert('Error occured');
    } else {
        alert('Post ID: ' + response.id);
    }
    console.log(response);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:43:07.547

好的，我刚刚发现了问题。为了将照片发布到 FB 粉丝页面，您还需要获得“photo_upload”权限。

# iphone - 在电影播放器 中隐藏音量条

> ID：13153426
> 
> 赞同：0
> 
> 时间：2012-10-31T07:51:35.797
> 
> 标签：iphone, ios, mpmovieplayercontroller, mpmovieplayer, mpvolumeview

如何隐藏电影播放器​​中的音量条并保持其他控件出现（播放，前进......）？我想展示一些没有声音的视频，所以音量条完全没用。

我可以这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:14:17.187

将 的 `controlStyle`设置`MPMoviePlayer`为`MPMovieControlStyleNone`。

```
moviePlayer.controlStyle = MPMovieControlStyleNone; 
```

但这将隐藏视图中的所有控件。

设置为 后`MPMovieControlStyleNone`，如果要显示播放/暂停选项和搜索栏，则需要添加自定义控件。（我之前做过，我使用滑块作为搜索栏，并将其与工具栏按钮一起放在一个`UIToolBar`。按钮用于播放/暂停选项）

> **MPMovieControlStyle**
> 
> 描述播放控件样式的常量。
> 
> 枚举 { MPMovieControlStyleNone, MPMovieControlStyleEmbedded,
> MPMovieControlStyleFullscreen, MPMovieControlStyleDefault = MPMovieControlStyleFullscreen }; typedef NSInteger MPMovieControlStyle;
> 
> **常数**
> 
> MPMovieControlStyleNone
> 
> ```
> No controls are displayed.
> 
> Available in iOS 3.2 and later.
> 
> Declared in MPMoviePlayerController.h. 
> ```
> 
> MPMovieControlStyleEmbedded
> 
> ```
> Controls for an embedded view are displayed. The controls include a start/pause button, a scrubber bar, and a button for toggling 
> ```
> 
> 全屏和嵌入式显示模式之间。
> 
> ```
> Available in iOS 3.2 and later.
> 
> Declared in MPMoviePlayerController.h. 
> ```
> 
> MPMovieControlStyle全屏
> 
> ```
> Controls for fullscreen playback are displayed. The controls include a start/pause button, a scrubber bar, forward and reverse 
> ```
> 
> 搜索按钮，一个用于在全屏和嵌入式显示模式之间切换的按钮，一个用于切换纵横比填充模式的按钮，以及一个完成按钮。点击完成按钮会暂停视频并退出全屏模式。
> 
> ```
> Available in iOS 3.2 and later.
> 
> Declared in MPMoviePlayerController.h. 
> ```
> 
> MPMovieControlStyleDefault
> 
> ```
> Fullscreen controls are displayed by default.
> 
> Available in iOS 3.2 and later.
> 
> Declared in MPMoviePlayerController.h. 
> ```

参考[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:02:05.420

除了“破解”子视图之外，没有其他方法可以做到这一点。您可以继承 MPMoviePlayerViewController 并迭代子视图。在我的一个应用程序中，我使用这样的代码来删除媒体控件之类的东西：

```
- (void)removeMediaControls
{
    @try
    {
        // Search for the MPSwipeableView
        for (UIView *view1 in [self.view subviews])
        {
            // Check for the MPSwipeableView
            if ([[[view1 class] description] isEqualToString:@"MPSwipableView"])
            {
                // Search for the MPVideoBackgroundView
                for (UIView *view2 in [view1 subviews])
                {
                    // Check for the MPVideoBackgroundView
                    if ([[[view2 class] description] isEqualToString:@"MPVideoBackgroundView"])
                    {
                        // Search for the UIView
                        for (UIView *view3 in [view2 subviews])
                        {
                            // Check for the MPWildcatFullScreenVideoOverlay
                            if ([[[view3 class] description] isEqualToString:@"MPWildcatFullScreenVideoOverlay"])
                            {
                                // Search for the MPWildcatFullScreenNavigationBar
                                for (UIView *view4 in [view3 subviews])
                                {
                                    // Check for the UIImageView
                                    if ([[[view4 class] description] isEqualToString:@"UIImageView"])
                                    {
                                        // Remove the overlay
                                        [view4 removeFromSuperview];
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    @catch (NSException * e)
    {

    }
} 
```

上面的代码太旧了，它适用于 iOS 4.3。在 iOS 5 和 iOS 6 上，视图层次结构发生了变化，因此您可能必须使用每个新的 iOS 版本更新代码。另请参阅：[MPMoviePlayerController 隐藏音量滑块](https://stackoverflow.com/questions/12159735/mpmovieplayercontroller-hide-volume-slider)

# jquery - 在 jQuery Mobile 中，我将如何在出现 5 秒后关闭弹出窗口？

> ID：13153429
> 
> 赞同：3
> 
> 时间：2012-10-31T07:51:48.393
> 
> 标签：jquery, jquery-mobile

我现在出现了一个弹出窗口，我只想显示弹出窗口 5 秒钟然后关闭它，但我不确定要添加到以下代码中的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html> 
<head> 
    <title>popup</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset= ISO-8859-5">
    <script>
    $(document).ready(function () {
        $("#popupBasic").popup();
        $("#popupBasic").popup("open");
    });
    </script>
</head> 
<body> 

<div data-role="page">
    <div data-role="content">   
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ultrices, odio vitae mollis gravida, magna augue fringilla dui, id consectetur purus enim vitae erat. Praesent aliquet imperdiet nibh quis pretium. Cras condimentum, purus at auctor ullamcorper, nunc massa congue metus, sed imperdiet leo dolor vel odio. Quisque at leo mi, et vulputate urna. Sed facilisis porta posuere. Maecenas justo velit, pharetra id pellentesque commodo, semper non leo. Aenean ut lobortis risus. Nulla enim libero, posuere eu dapibus sed, commodo at lacus. Praesent at eros arcu.</p>
    <p>In consectetur porttitor convallis. Quisque volutpat laoreet commodo. Praesent eu justo volutpat lacus aliquet consequat eget et enim. Morbi molestie ipsum non velit molestie condimentum. Quisque dolor elit, fermentum vestibulum pellentesque vel, molestie quis elit. Phasellus quis dolor at nisl hendrerit volutpat ac non nunc. Maecenas sed turpis lorem. Suspendisse imperdiet imperdiet dictum. Pellentesque tincidunt purus vitae leo hendrerit at auctor sem lobortis. Suspendisse sapien tellus, dignissim vel iaculis in, ornare a erat. Donec placerat sollicitudin lectus, eu commodo turpis mollis a. Vestibulum et nisi neque, ac luctus purus.</p>
    <p>Curabitur in massa ultrices metus malesuada vehicula. Morbi vel purus enim, tincidunt tincidunt nulla. Nam rutrum tempus dapibus. Nulla adipiscing tristique dui ac posuere. Nunc vitae tortor in sapien suscipit scelerisque. Aliquam porttitor aliquam tortor tincidunt aliquet. Integer justo sapien, pulvinar et commodo eu, congue at diam. Suspendisse porta nulla nec lectus porttitor molestie. Duis lacus velit, molestie et pharetra et, viverra vitae risus. Duis pretium bibendum velit quis tempor.</p>
    </div>

    <div data-role="popup" id="popupBasic">
        <p>This is a completely basic popup, no options set.</p>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T19:18:03.353

查看修改后的示例，然后再次将您的脚本放入正文

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
    <html>
    <head>
        <title>popup</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset= ISO-8859-5">
    </head>
    <body>

      <div data-role="page" id="myPage">
        <div data-role="content">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ultrices, odio vitae mollis gravida, magna augue fringilla dui, id consectetur purus enim vitae erat. Praesent aliquet imperdiet nibh quis pretium. Cras condimentum, purus at auctor ullamcorper, nunc massa congue metus, sed imperdiet leo dolor vel odio. Quisque at leo mi, et vulputate urna. Sed facilisis porta posuere. Maecenas justo velit, pharetra id pellentesque commodo, semper non leo. Aenean ut lobortis risus. Nulla enim libero, posuere eu dapibus sed, commodo at lacus. Praesent at eros arcu.</p>
          <p>In consectetur porttitor convallis. Quisque volutpat laoreet commodo. Praesent eu justo volutpat lacus aliquet consequat eget et enim. Morbi molestie ipsum non velit molestie condimentum. Quisque dolor elit, fermentum vestibulum pellentesque vel, molestie quis elit. Phasellus quis dolor at nisl hendrerit volutpat ac non nunc. Maecenas sed turpis lorem. Suspendisse imperdiet imperdiet dictum. Pellentesque tincidunt purus vitae leo hendrerit at auctor sem lobortis. Suspendisse sapien tellus, dignissim vel iaculis in, ornare a erat. Donec placerat sollicitudin lectus, eu commodo turpis mollis a. Vestibulum et nisi neque, ac luctus purus.</p>
          <p>Curabitur in massa ultrices metus malesuada vehicula. Morbi vel purus enim, tincidunt tincidunt nulla. Nam rutrum tempus dapibus. Nulla adipiscing tristique dui ac posuere. Nunc vitae tortor in sapien suscipit scelerisque. Aliquam porttitor aliquam tortor tincidunt aliquet. Integer justo sapien, pulvinar et commodo eu, congue at diam. Suspendisse porta nulla nec lectus porttitor molestie. Duis lacus velit, molestie et pharetra et, viverra vitae risus. Duis pretium bibendum velit quis tempor.</p>
        </div>

        <div data-role="popup" id="popupBasic">
          <p>This is a completely basic popup, no options set.</p>
        </div>

        <script>
          $( '#myPage' ).bind( 'pageinit',function(event){
            setTimeout(function(){
              $("#popupBasic").popup();
              $("#popupBasic").popup("open");
            }, 100);
            setTimeout(function(){
              $("#popupBasic").popup("close");
            }, 5000);
          });
        </script>
      </div>

    </body>
    </html> 
```

编辑：现在为打开弹出窗口添加了 100 毫秒的延迟，现在它可以在 Firefox 和 Chrome 上运行......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T07:56:03.060

您是否尝试过使用 setTimeout()，可能...

`setTimeout(function() {
$("#popupBasic").popup("close");
}, 5000);​`

# android - 使用xml的动画在android中不起作用

> ID：13153434
> 
> 赞同：0
> 
> 时间：2012-10-31T07:52:14.383
> 
> 标签：android, animation, drawable

我创建了一个简单的演示项目，它使用 Android 的 AnimationDrawable 类来制作动画。这是我的java代码：

```
public class TestAnimationActivity extends Activity {
    /** Called when the activity is first created. */

    ImageView imgCircleWhite,imgCircleYellow;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        imgCircleYellow = (ImageView)findViewById(R.id.imgCircleYellow);

        animateState(true, imgCircleYellow);

    }

    public void animateState(boolean flag,ImageView imageView)
    {
        imgCircleYellow.setBackgroundResource(R.drawable.animate_circle_sensor_1);
        AnimationDrawable yourAnimation = (AnimationDrawable) imageView.getBackground(); 
        if(!flag)
        {   
            //imageView.getAnimation().reset();
            imageView.setBackgroundResource(R.drawable.circle_label_white_1);           
            yourAnimation.stop();           
        }
        else
        {
            imageView.setBackgroundResource(R.drawable.animate_circle_sensor_1); 
            yourAnimation = (AnimationDrawable) imageView.getBackground(); 
            yourAnimation.start();
        }
    }
} 
```

这是我的 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />
    <ImageView android:id="@+id/imgCircleYellow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/circle_label_yellow_1"/>

</LinearLayout> 
```

下面是我的 animate_sensor_circle_1.xml，我已将其放入可绘制文件夹中以供使用：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false" >

    <item
        android:drawable="@drawable/circle_label_white_2"
        android:duration="50"/>
    <item
        android:drawable="@drawable/circle_label_yellow_1"
        android:duration="50"/>
</animation-list> 
```

当我运行该应用程序时，仅显示上述 xml 文件中的第一项，但动画不会像应有的那样重复出现。谁能指导我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:06:50.720

现在不是打电话的合适时机`AnimationDrawable.start()`。您应该在视图初始化完成后执行此操作。试试这个：

```
final ImageView imgCircleYellow = (ImageView)findViewById(R.id.imgCircleYellow);
imgCircleYellow.setBackgroundResource(R.drawable.animate_circle_sensor_1);
imgCircleYellow.post(new Runnable() {
    @Override
    public void run() {
        animateState(true, imgCircleYellow);
    } 
```

检查此以获取更多信息：[https ://stackoverflow.com/a/5490922/813135](https://stackoverflow.com/a/5490922/813135)

# ios - iOS SqlCipher Sqlite Simulator 好的，在设备上部署错误

> ID：13153439
> 
> 赞同：2
> 
> 时间：2012-10-31T07:52:42.653
> 
> 标签：ios, sqlite, ios-simulator, sqlcipher

在我的 iOS 应用程序中，我使用的是 SqlCipher。当我使用模拟器运行我的项目时 - 一切正常（Xcode 4.5，iOS 模拟器 5.1）。

但是当我尝试在我的 iPhone 4 (iOS 5.1.1) 上部署我的项目时，我遇到了 20 个错误。

架构 armv7s 的未定义符号：“_sqlite3_reset”，引用自：...

“_sqlite3_prepare_v2”，引用自：... “_sqlite3_open”，引用自：...。

我试图将 libsqlite3.dylib 包含在 Link Binary With Libraries 中，但我仍然有一些错误（在 SQLcipher 文档中，他们精确地删除了 libsqlite3.dylib）：

架构 armv7s 的未定义符号：“_sqlite3_key”，引用自：

我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:31:32.100

尝试删除`armv7s`并改为 target `armv7`，如下所示：

![构建设置](../Images/d12ccff212d1cf261da137cbcdc11aff.png)

但是，据此[，](http://sqlcipher.net/blog/2012/9/27/sqlcipher-now-supports-iphone-5-xcode-45-and-armv7s.html) SQLCipher 现在支持`armv7s`，您使用的是旧版本吗？

# javascript - Javascript脚本计时器问题

> ID：13153440
> 
> 赞同：0
> 
> 时间：2012-10-31T07:52:43.120
> 
> 标签：javascript, jquery

我正在尝试做一个倒数计时器。我设法制作了一个，但问题是当我关闭浏览器时它会停止。因此，当用户重新访问我的网站时，它会再次重新启动。我想要的是保留那个计时器。*例如，如果用户在计时器 22:14:09 离开我的站点。所以计时器将继续。假设用户在一小时后重新访问我的网站，因此时间应该是 21:14:09。* 我怎样才能做到这一点？

这是我的 JS

```
$(function () {
var hrs, mins, secs, TimerRunning, TimerID,
    Timer = {
        init: function () {
            hrs          = 23;
            mins         = 59;
            secs         = 59;
            TimerRunning = false;
            Timer.StopTimer();
            Timer.StartTimer();
         },

         StopTimer: function () {
            if(TimerRunning)
               clearTimeout(TimerID);
            TimerRunning=false;
         },

         StartTimer: function () {
            TimerRunning = true;
            $('.timer').html(Timer.Pad(hrs) + ":" + Timer.Pad(mins) + ":" + Timer.Pad(secs));
            TimerID = self.setInterval("StartTimer()", 1000);

            if(hrs == 0 && mins == 0 && secs == 0)
               StopTimer();

            if (secs == 0) {
               mins--;
               secs = 59;
            }
            if (mins == 0) {
                hrs--;
                mins = 59;
            }
            secs--;
            setTimeout(function () { Timer.StartTimer(); }, 1000);
         },

         Pad: function (number) {
            if(number < 10)
               number = 0+""+number;
            return number;
         }

    };

Timer.init();
}); 
```

**更新**

[演示](http://jsfiddle.net/TH2fp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:49:32.157

这是我对这个问题的解决方案。

```
// use hours, minutes & seconds to set time limit
var hours = 1, 
    minutes = 30, 
    seconds = 0,
    maxTime =  ( ( hours * 3600 ) + ( minutes * 60 ) + seconds ) * 1000,
    // if timeleft not in localStorage then default to maxTime
    timeLeft = ( localStorage.timeLeft || maxTime ),
    startTime = new Date(),
    intervalRef;

// check if user has already used up time
if( timeLeft > 0 ) {

    intervalRef = setInterval( setTimeLeft, 5000 );
} else {

    stopTrackingTime();
}

function setTimeLeft( ) {

    // if user has used up time exit
    if( localStorage.timeLeft < 0 ) {

        stopTrackingTime();
    }

    // calculate how long user has left
    var elapsed = ( new Date() - startTime );
    localStorage.timeLeft = timeLeft - elapsed;
};

// function called once user has used up time
function stopTrackingTime( ) {

    clearInterval( intervalRef );
    alert( "end of time allowed" );
} 
```

[在这里](http://jsfiddle.net/bruno/TH2fp/28/)提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:31:11.847

您可以修改您的 StartTimer 函数，以便每次调用它时都会将本地时间戳 ( `new Date`) 保存在 cookie 或 localStorage 中。此外，setTimeout 不是很可靠，你应该时不时地实时调整时间计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:05:03.933

您可以将时间存储在 中`LocalStorage`，并且它会在浏览器重新启动时保持不变。

在你的情况下，事情很简单

```
localStorage["mytimer"] = JSON.stringify([hrs, mins, secs]); 
```

应该用于存储，你可以做

```
var previousTime = JSON.parse(localStorage["mytimer"]); 
```

检索以前的值。

你可以在这里阅读更多关于它的信息：http: [//diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)。

# iphone - Flurry to iphone, add details are not opening

> ID：13153446
> 
> 赞同：1
> 
> 时间：2012-10-31T07:53:18.127
> 
> 标签：iphone, objective-c

我已经将flurry集成到我的项目中并且添加显示成功。但问题是当我点击添加时它就像“safari无法打开页面”一样，我使用了下面的代码，请帮助我哪里出错了或者我会怎么做？

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [FlurryAds setAdDelegate:self];
    [FlurryAds fetchAndDisplayAdForSpace:@"BANNER_MAIN_VIEW" view:self.view size:BANNER_TOP];
}

-(void) viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

    // Reset delegate
    [FlurryAds removeAdFromSpace:@"BANNER_MAIN_VIEW"];
} 
```

在控制台中我越来越喜欢：

```
webView:shouldStartLoadWithRequest:[http://itunes.apple.com/app/id505821326?partnerId=30&siteID=PIA/JJ6Lt9U]navigationType:5 
```

# android - 如何使用数据库（mysql）中的 gps 位置找到两个地理点之间的人口？

> ID：13153457
> 
> 赞同：0
> 
> 时间：2012-10-31T07:54:04.757
> 
> 标签：android, geolocation, gps, geocoding

我想在android中创建一个应用程序，用户可以在其中输入两个地理点（纬度和经度），并通过这两个点在数据库表（mysql）中进行查询，其中已经存储了人们的gps位置信息（纬度和经度）通过使用上述查询，我​​想在输入的起点和终点之间搜索人。

例如：用户 A 输入了起点：德里和终点：孟买，现在他将点击搜索按钮，所有的人都会来到孟买和德里之间的 gps 位置。如果可以的话。所有人员都将显示为列表视图。

希望我已经解释得很好。请有人告诉我如何实现这一目标？我使用 php mysql 作为后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:35:33.893

如果你想知道谁在由两点分隔的正方形区域中，你必须检查人的位置是否在两个点的纬度和经度之间。例子：

```
//Delimiting points:
    Dehli:    28°36′36″N 77°13′48″E
    Mumbai:   18°58′30″N 72°49′33″E

//People:
    Person A: 28°40′52″N 73°21′47″E
    Person B: 22°03′44″N 75°56′11″E

Person A is OUTSIDE the square area between Dehli and Mumbai because the latitude
he is on is greater than the greatest latitude of both points:
    Mumbai lat. < Dehli lat. < Person A lat.

Person B is INSIDE the square area between Dehli and Mumbai because the latitude
and longitude he is on is between both points latitude and longitude:
    Mumbai lat. < Person B lat. < Dehli lat.
    Mumbai lon. < Person B lon. < Dehli lon. 
```

如果你想计算距离，你可以依靠[大圆公式](http://williams.best.vwh.net/avform.htm#GCF)。这可用于在 X 英里半径范围内寻找人员。

# ios - 捏合和缩放在 ipad 上不起作用

> ID：13153461
> 
> 赞同：3
> 
> 时间：2012-10-31T07:54:14.630
> 
> 标签：ios, ipad, safari

我无法在 ipad 上进行捏合和缩放，我猜下面给出的代码可能会影响代码，请给出任何完美的解决方案。body子事件的绑定是否有问题或者需要计算不同变量的touch，并进行手动计算。

```
 ///I-Pad evenet Binding
   $(document).ready(function () {

       $("body").children().bind('touchstart touchmove touchend touchcancel', function () {
           var touches = event.changedTouches, first = touches[0], type = "";
           switch (event.type) {
               case "touchstart": type = "mousedown";
                   break;
               case "touchmove": type = "mousemove";
                   break;
               case "touchend": type = "mouseup";
                   break;
               default: return;
           }

           var simulatedEvent = document.createEvent("MouseEvent");
           simulatedEvent.initMouseEvent(type, true, true, window, 1,
                  first.screenX, first.screenY,
                  first.clientX, first.clientY, false,
                  false, false, false, 0/*left*/, null);
           if (touches.length < 2) {
               first.target.dispatchEvent(simulatedEvent);
               event.preventDefault();
           }

       });

   (function () {
            var last_x = null, last_y = null, w_area = workarea[0],
                panning = false, keypan = false, dopanning = false;

            $("#svgroot").bind('mousemove mouseup', function (evt) {
                if (dopanning === false) return;
                var clientxnew = +$("#svgcontent")[0].getAttribute("x"),
                clientynew = +$("#svgcontent")[0].getAttribute("y");
                clientxnew += (evt.clientX - last_x);
                clientynew += (evt.clientY - last_y);
                last_x = evt.clientX;
                last_y = evt.clientY;
                //this.setAttribute("viewBox", vb.join(' '));
                // updateCanvas(true);
                $("#svgcontent").show();
                $("#svgcontent")[0].setAttribute("x", clientxnew);
                $("#svgcontent")[0].setAttribute("y", clientynew);
                svgedit.select.getSelectorManager().selectorParentGroup.setAttribute("transform", "translate(" + clientxnew + "," + clientynew + ")");
                if (evt.type === 'mouseup') { dopanning = false; }

                return false;
            }).mousedown(function (evt) {

                var mouse_target = svgCanvas.getMouseTarget(evt);
                if (svgCanvas.getMode() == "text" || svgCanvas.getMode() == "textedit") {
                    dopanning = false; return;
                }
                if ((mouse_target.id.indexOf("grouplayerdragged") > -1 || mouse_target.id.indexOf("hotspot") > -1 ||
                mouse_target.id.indexOf("clonediv") > -1 || mouse_target.tagName === "text")) { dopanning = false; return; }
                if (selectedElement != null) {
                    dopanning = false; return;
                }
                if (evt.button === 0) {
                    dopanning = true;
                    last_x = evt.clientX;
                    last_y = evt.clientY;
                    svgCanvas.clearSelection(true);
                    return false;

                }
            });

            $(window).mouseup(function () {
                panning = false;
                dopanning = false;
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:06:35.523

你应该使用手势改变。试试这种方式（这不是你的确切解决方案，但你可以破解它）

```
var angle = 0;
var newAngle;
var scale = 1;
var newScale;

function saveChanges() {
    angle = newAngle;
    scale = newScale;
}
function getAngleAndScale(e) {

    // Don't zoom or rotate the whole screen
    e.preventDefault();
    // Rotation and scale are event properties
    newAngle = angle + e.rotation;
    newScale = scale * e.scale;
    // Combine scale and rotation into a single transform
    var tString = "scale(" + newScale + ")";
    document.getElementById("theDiv").style.webkitTransform = tString;
}
function init() {
    // Set scale and rotation during gestures
    document.getElementById("theDiv").addEventListener("gesturechange", getAngleAndScale, false);
    // Preserve scale and rotation when gesture ends
    document.getElementById("theDiv").addEventListener("gestureend", saveChanges, false);
} 
```

* * *

<**身体**>

```
<div style="width:300px;height:300px;overflow:scrool;-webkit-overflow-scrolling: touch;">
   <img id="theDiv" style="width:100%;" src="http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg" />
</div> 
```

[在你的 iPad 上试试这个](http://ugurozpinar.com/code/drag/)

# actionscript-3 - 带有接口的 AS3 代码突然开始给出“调用可能未定义的方法”

> ID：13153463
> 
> 赞同：1
> 
> 时间：2012-10-31T07:54:20.187
> 
> 标签：actionscript-3

GameWorld.as，第 96 行 1180：调用可能未定义的方法初始化。

我正在向实现 IController 的 GameWorld 添加一个控制器：

```
addController(new BackgroundController(this));

public function addController(controller:IController):void
{
    controller.initialize();
    controllers.push(controller);
}

public interface IController 
{
    function initialize():void;         //setup the controller
    function getType():String;          //define the controller by a type string
    function update():void;             //perform update actions
    function destroy():void;            //cleanup the controller
} 
```

initialize 是来自 IController 的方法，但现在突然未定义

我没有收到任何语法错误，而且似乎无法将我的代码恢复到工作状态。

这可能是什么原因造成的？

这是背景控制器：

```
package controller 
{
    import Entity;
    import flash.display.Bitmap;
    import flash.display.Sprite;

    public class BackgroundController implements IController
    {
        private var world:GameWorld;
        private var images:Vector.<Bitmap>;
        private var bgImage:Sprite;

        public function BackgroundController(world:GameWorld)
        {
            this.world = world;
        }

        public function initialize():void
        {
            bgImage = new Sprite();
            images = new Vector.<Bitmap>();

            var ypos:int = 0;

            for (var i:int = 0; i < 3; i++ )
            {
                var tempBmp:Bitmap = new Bitmap(new grasstile(0, 0));
                images.push(tempBmp);
                bgImage.addChild(tempBmp);
                tempBmp.y = ypos;
                ypos += 500;
            }

            GameWorld.lowerLayer.addChild(bgImage);
        }
        public function update():void 
        {
            //update the background tiles
            for (var i:int = 0; i < 3; i++ )
            {
                images[i].y -= world.gameSpeed;
                if (images[i].y < -500 )
                {
                    images[i].y += 1500;
                }
            }
        }

        public function getType():String
        {
            return "Background";
        }

        public function destroy():void 
        {

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:21:21.253

**一些全局检查**

*   您是否使用运行时共享资产、多个文件？确保你已经构建了它们。
*   确保没有其他运行时/构建错误
*   在 FDT（您使用哪个编辑器？）中，有一个名为“重置 MXML 编译器并强制完整构建”的功能。这会清除缓存并强制执行全新的构建而不是增量构建。
*   在 Flashdevelop 中，您必须使用工具 > flash 工具 > 重建类路径
*   在 Flash IDE 中，您可以清除 ASO 文件（CS5-）/清除发布缓存（CS6）。
*   重新启动/杀死编辑器+相关进程以确保没有奇怪的缓存冲突并且所有语法检查都是最新的。

**代码检查**

```
// make sure it has implemented the IController
trace("controller is IController: "  + (controller is IController) ); 
```

和..

```
// detect what kind of class it really is. Goto that class, check the interface.
trace("controller is : "  + getQualifiedClassName(controller) ); 
```

还要确保没有其他`IController`接口，或检查所有导入语句，以确保在任何地方都使用了正确的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T03:26:23.593

发现自己处于同样的境地。

发现问题是由于包和定义的变量之间的名称冲突问题。

所以，在你的情况下，只是改变

```
public function addController(controller:IController):void
{
    controller.initialize();
    controllers.push(controller);
} 
```

至

```
public function addController(controllerImpl:IController):void
{
    controllerImpl.initialize();
    controllers.push(controllerImpl);
} 
```

应该已经解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:00:29.893

接口只是为类定义规则，在这种情况下，说明任何实现的类`IController`都必须包含这四个方法的定义。您实际上在控制器类中定义了一个初始化方法吗？

# android - 构造函数未定义错误

> ID：13153466
> 
> 赞同：1
> 
> 时间：2012-10-31T07:54:35.323
> 
> 标签：android, button, android-intent

我在 Main.java 类中编写了这段代码，但程序没有运行。为什么？程序有错误是`Intent i=new Intent(this,Location.class);`什么问题？？

```
package org.example.loyaltier;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.widget.Button;
import android.content.Intent;

public class Main extends Activity {

private WebView mWebView;
private Button mHome;
private Button mProduct;
private Button mPlaces;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mWebView = (WebView)findViewById(R.id.web_view);

    mHome = (Button)findViewById(R.id.button_home);
    mProduct=(Button)findViewById(R.id.button_product);
    mPlaces=(Button)findViewById(R.id.button_places);

    mHome.setOnClickListener(onClickListener);

}
private OnClickListener onClickListener=new OnClickListener(){
    public void onClick(View v){
        switch(v.getId()){
        case R.id.button_home:
            mWebView.loadUrl      ("http://loyaltier.com/app/mobile/code/home/home.php");
            break;
        case R.id.button_product:
            mWebView.loadUrl("http://loyaltier.com/app/mobile/design/catalog/catalog1.php");
            break;
        case R.id.button_places:
            Intent i=new Intent(this,Location.class);
            startActivity(i);
            break;
        }
    }
};
} 
```

问题是： `The constructor Intent(new View.OnClickListener(){}, Class<Location>) is undefined` 但我不明白问题是什么，我该如何解决？

请快点帮我;)

日志猫::

```
10-31 11:35:04.135: D/AndroidRuntime(16626): Shutting down VM
10-31 11:35:04.135: W/dalvikvm(16626): threadid=1: thread exiting with uncaught exception (group=0x40a3e1f8)
10-31 11:35:04.159: E/AndroidRuntime(16626): FATAL EXCEPTION: main
10-31 11:35:04.159: E/AndroidRuntime(16626): java.lang.IllegalStateException: Could not find a method Places(View) in the activity class org.example.loyaltier.Main for onClick handler on view class android.widget.Button with id 'button_places'
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.view.View$1.onClick(View.java:3026)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.view.View.performClick(View.java:3480)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.view.View$PerformClick.run(View.java:13983)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.os.Handler.handleCallback(Handler.java:605)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.os.Looper.loop(Looper.java:137)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.app.ActivityThread.main(ActivityThread.java:4340)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at java.lang.reflect.Method.invokeNative(Native Method)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at java.lang.reflect.Method.invoke(Method.java:511)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at dalvik.system.NativeStart.main(Native Method)
10-31 11:35:04.159: E/AndroidRuntime(16626): Caused by: java.lang.NoSuchMethodException: Places [class android.view.View]
10-31 11:35:04.159: E/AndroidRuntime(16626):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at java.lang.Class.getMethod(Class.java:915)
10-31 11:35:04.159: E/AndroidRuntime(16626):    at android.view.View$1.onClick(View.java:3019)
10-31 11:35:04.159: E/AndroidRuntime(16626):    ... 11 more
10-31 11:35:04.190: D/dalvikvm(16626): GC_CONCURRENT freed 212K, 3% free 14282K/14599K, paused 2ms+2ms
10-31 11:35:09.057: I/Process(16626): Sending signal. PID: 16626 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:59:18.880

`this`中的指`new Intent(this,Location.class);`的是匿名`View.OnClickListener`对象的实例。您需要提供`Context`. 尝试：

```
Intent i=new Intent(Main.this,Location.class); 
```

# c# - WPF 布朗运动：使用线程更新状态

> ID：13153470
> 
> 赞同：2
> 
> 时间：2012-10-31T07:55:01.727
> 
> 标签：c#, wpf

这是 WPF 中的一个小布朗运动演示：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Shapes;
using System.Windows.Threading;
using System.Threading;

namespace WpfBrownianMotion
{
    static class MiscUtils
    {
        public static double Clamp(this double n, int low, double high)
        {
            return Math.Min(Math.Max(n, low), high);
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Width = 500;
            Height = 500;

            var canvas = new Canvas();

            Content = canvas;

            var transform = new TranslateTransform(250, 250);

            var circle = new Ellipse()
            {
                Width = 25,
                Height = 25,
                Fill = Brushes.PowderBlue,
                RenderTransform = transform
            };

            canvas.Children.Add(circle);

            var random = new Random();

            var thread =
                new Thread(
                    () =>
                    {
                        while (true)
                        {
                            Dispatcher.Invoke(
                                DispatcherPriority.Normal,
                                (ThreadStart)delegate()
                                {
                                    transform.X += -1 + random.Next(3);
                                    transform.Y += -1 + random.Next(3);

                                    transform.X = transform.X.Clamp(0, 499);
                                    transform.Y = transform.Y.Clamp(0, 499);
                                });
                        }
                    });

            thread.Start();

            Closed += (s, e) => thread.Abort();
        }
    }
} 
```

我的问题是这个。在这种不使用标准 WPF 动画工具的情况下，是否使用上述方法`Thread`和`Dispatcher`推荐的方法？

一般来说，我有时会遇到需要更新和渲染的状态，而动画工具并不适合。所以我需要一种在单独的线程中进行更新和渲染的方法。只是想知道上述方法是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:35:13.683

上面评论中的 Clemens 建议使用`DispatcherTimer`. 事实上，这确实大大简化了代码。这是采用这种方法的版本：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Shapes;
using System.Windows.Threading;

namespace WpfBrownianMotion
{
    static class MiscUtils
    {
        public static double Clamp(this double n, int low, double high)
        {
            return Math.Min(Math.Max(n, low), high);
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Width = 500;
            Height = 500;

            var canvas = new Canvas();

            Content = canvas;

            var transform = new TranslateTransform(250, 250);

            var circle = new Ellipse()
            {
                Width = 25,
                Height = 25,
                Fill = Brushes.PowderBlue,
                RenderTransform = transform
            };

            canvas.Children.Add(circle);

            var random = new Random();

            var timer = new DispatcherTimer();

            timer.Tick += (s, e) =>
                {
                    transform.X += -1 + random.Next(3);
                    transform.Y += -1 + random.Next(3);

                    transform.X = transform.X.Clamp(0, 499);
                    transform.Y = transform.Y.Clamp(0, 499);
                };

            timer.Start();
        }
    }
} 
```

# c# - 了解错误日志实现

> ID：13153473
> 
> 赞同：0
> 
> 时间：2012-10-31T07:55:11.323
> 
> 标签：c#, asp.net, .net, error-logging

我在其中一个应用程序中发现了这种错误记录方式。

**它实际上在哪里记录错误？**

错误日志调用

```
ErrorLog oLogError = new ErrorLog();
oLogError.ErrorInfo[3] = ex.Message;
oLogError.ErrorInfo[4] = ex.StackTrace;
oService.LogError(oLogError.ErrorInfo);
oService.Dispose(); 
```

oService.LogError() 的定义；

```
[System.Web.Services.Protocols.SoapDocumentMethodAttribute
    ("http://tempuri.org/LogError", RequestNamespace="http://tempuri.org/",                     ResponseNamespace="http://tempuri.org/",                            Use=System.Web.Services.Description.SoapBindingUse.Literal,                 ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
public void LogError(string[] errorInfo) {
        this.Invoke("LogError", new object[] {
                    errorInfo});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:58:34.993

这：

```
 this.Invoke("LogError", new object[] {
                        errorInfo}); 
```

新建一个对象，该对象接收您`errorInfo`并记录错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:19:17.120

我不太确定您的“LogError”字符串在 . 中的含义是什么。`this.Invoke("LogError", new object[]`理想情况下，它应该是方法名称而不是字符串。

[正确定义](http://msdn.microsoft.com/en-us/library/a1hetckb.aspx)

```
public Object Invoke(
    Delegate method,
    params Object[] args
) 
```

您基本上是在捕获数组上的错误信息。然后将其传递给 Logerror 方法。方法反过来调用调用方法。

Invoke 使用作为第二个参数传递的对象数组执行指定为委托的方法（第一个参数应该是方法名称）`errorInfo`。执行发生在控件拥有的线程上。

# ios - AVPlayer 不播放超过一次

> ID：13153476
> 
> 赞同：6
> 
> 时间：2012-10-31T07:55:40.950
> 
> 标签：ios, avfoundation, avplayer

我在通过 AVPlayerItem 和 AVPlayer 播放音频时遇到了一些奇怪的问题。

我有录音机和 iPod 项目选择器，来自它们的流都通过这样的代码：

```
 AVAudioSession *audioSession = [AVAudioSession sharedInstance];
  [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
  [audioSession setActive:YES error:nil];

  _playerItem = [[AVPlayerItem alloc] initWithURL:_soundFileURL];
  _player = [[AVPlayer alloc] initWithPlayerItem:_playerItem];
  [_player play]; 
```

一切实际上都很好，除了一件事，我不能第二次或更长时间地播放这个流。就是停了，停了之后就没有声音了。有没有人可以提供建议，可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T16:42:40.023

您必须使用 prepareToPlay 将 AVPlayer 设置回流的开头并将 currentPlaybackTime 设置为 0。

```
self.avPlayer.currentPlaybackTime = 0;
[self.avPlayer prepareToPlay]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-21T07:42:10.463

**在斯威夫特 4**

您可以使用下面的线再次播放。

```
self.player?.seek(to: CMTime.zero)
self.player?.play() 
```

**乐意效劳 ：）**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T15:21:54.927

以下是在我的 Swift 5、Xcode 12、macOS 11、iOS 14.2 组合上发生的情况：

*   我只播放一个简短的 drop.wav 声音来将一块棋子放在游戏板上
*   几个月前 player.play() 在我的环境中使用较低版本
*   今天 player.play() 只播放一次，下一段是无声的
*   添加 player.seek(to: CMTime.zero) “有效”，但只有第一次听起来正常，第二次，第三次......声音不同，较弱
*   我的解决方法是每次播放前重新加载声音文件
*   我为这个实验录制了一个视频[https://youtu.be/t6863IZkwTQ](https://youtu.be/t6863IZkwTQ)

# mocking - Smalltalk：如何修改自我行为

> ID：13153484
> 
> 赞同：4
> 
> 时间：2012-10-31T07:56:16.877
> 
> 标签：mocking, metaprogramming, smalltalk

我正在将我最喜欢的 Java/JavaScript Mocktito 库移植到 Smalltalk。我目前正处于实施 Spy 以对真实对象进行存根的阶段。当一个被监视的对象调用它自己的被存根的方法时，我的问题就出现了。代替：

```
self aMethod. 
```

我宁愿将调用委托给 spy 对象：

```
spyObject aMethod. 
```

这是预期行为的场景测试：

```
realObject := RealObjectForTesting new.
spyedObject := Spy new: realObject.
spyedObject when: #accesorWhichReturnsValue thenReturn: 'stubbed value'.

spyedObject accesorWhichCallsSelf.

self assert: (spyedObject verify: #accesorWhichReturnsValue). 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:17:58.983

您可以使用[ObjectsAsMethodsWrapper 库](http://www.squeaksource.com/ObjectsAsMethodsWrap.html)直接包装`RealObjectUnderTest`s 。这提供了一个方便的 API 来安装和删除包装器，以及一些方便的预定义包装器。`CompiledMethod`

这些将拦截自发送，因为包装器安装在真实对象的方法字典中，因此可以在将消息传递给底层之前对消息执行任意更改`CompiledMethod`。

虽然[我的示例](http://www.lshift.net/blog/2012/08/31/intercession-without-source-changes)展示了如何在不接触源代码的情况下记忆方法调用，但它应该为您提供模拟方法调用所需的基本知识。

这种特殊的技术确实有一个限制：它会拦截自我发送到类本身定义的消息。因此，如果`Foo`子类`Bar`并且您在 上安装包装器`Foo`，您将不会拦截构成`Bar`' 协议一部分的消息（当然，除非您也包装了这些消息）。

您*将无法*`ifTrue:ifFalse:`在 Squeak 或 Pharo 图像中截获`timesRepeat`或类似的消息（也可能在 GNU Smalltalk 中），因为这些不是消息发送：编译时转换将这些消息发送到跳转字节码中。（消息发送的错觉相对令人信服，因为`Decompiler`知道如何将字节码转换回`ifTrue:ifFalse:`或其他任何内容。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:38:08.593

您使您的“间谍”成为仅实现的“包装器”对象，`doesNotUnderstand:`然后使用`become:`.

将为所有消息调用spy 的`doesNotUnderstand:`方法，然后您可以记录其参数（这是一个 Message 对象）并将其发送到原始对象。

如果您浏览`doesNotUnderstand:`Smalltalk 图像中的实现者，您可能会发现几个示例（例如，在 Squeak 中有`MessageCatcher`和`ObjectViewer`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T17:31:19.877

Smalltalk 没有用于拦截发送给自己的内置机制，因此您将不得不求助于奇异的措施。

可能最简单的方法是从原始对象中动态窃取方法。正如伯特建议的那样，您的间谍将使用#become: 替换目标。然后，当间谍接收到消息时，您不会将消息转发给原始对象，而是在其类中查找选择器并以间谍作为接收者来执行它。针对任意接收者执行编译方法的机制因方言而异。在 Squeak 中，它是 CompiledMethod 类>>receiver:withArguments:executeMethod:。

正如我所说，这是非常奇特的——您需要在创建 spy 时为其生成一个自定义类，并确保它与目标对象具有相同的结构，以便编译的方法可以与新的接收器正确工作。您还必须将目标的状态复制到间谍中，并在完成间谍后将其复制回原始对象。最后，您必须找到一个存放目标的地方，因为间谍的状态必须与目标的状态相匹配。这一切都是可行的，但并不简单。您将动态生成类和方法，这需要对系统有低层次的了解。

# javascript - qTip2 和面向对象编程

> ID：13153488
> 
> 赞同：0
> 
> 时间：2012-10-31T07:56:34.153
> 
> 标签：javascript, jquery, qtip2

我正在开发一个日历，我想在用户单击日历单元格时打开一个 qTip2 工具提示。

根据[Raynos](https://stackoverflow.com/a/5134494/1148260)给出的建议，我正在尝试按照 OOP 原则开发我的 jQuery 代码。所以我尝试了一个非常基本的示例，只需将我的代码放在构造函数中并在单元格的 HTML 中调用它。

这是HTML代码

```
<td onclick="new CalendarEvent('2012-10-22')" id="2012-10-22"> 
```

和 Javascript 的

```
var CalendarEvent = function (date) 
{
    this.date = date;

    $('#'+this.date).qtip({
            content: 
            {
                text: 'Lorem ipsum',
                title: {
                    text: 'Lorem ipsum',
                    button: true
                }
            },
            position: {
                    my: 'left center', 
                    at: 'center'
            },
            show: {             
                    solo : true 
            },
            hide: 'click',
            style: {
                    tip: true,
                    classes: 'ui-tooltip-light'
            }
    });
} 
```

很多问题：

*   当我单击一个单元格时，什么也没有发生，但是当我将光标移出单元格然后我再次将鼠标悬停在单元格上时会出现工具提示；
*   关闭按钮不起作用；
*   单击第二个单元格，第一个工具提示关闭并打开一个新工具提示，但是当我将鼠标悬停在第一个单元格上时，旧工具提示再次出现。

显然，当以程序方式使用相同的代码时，一切都很好......

谢谢

# java - 使用积极的后视或后向参考更有效吗？

> ID：13153489
> 
> 赞同：5
> 
> 时间：2012-10-31T07:56:39.920
> 
> 标签：java, regex

[以我刚刚回答的问题的代码为例](https://stackoverflow.com/questions/13152866/add-an-identifier-when-a-space-is-followed-by-four-digits/13152957#13152957)

从字符串开始

```
30-Nov-2012 30-Nov-2012 United Kingdom, 31-Oct-2012 31-Oct-2012 United
Arab Emirates, 29-Oct-2012 31-Oct-2012 India 
```

如果我们想用一个`@`这样的替换每个四位数字后面的空格，你会得到这样的结果：

```
30-Nov-2012@30-Nov-2012@United Kingdom, 31-Oct-2012@31-Oct-2012@United
Arab Emirates, 29-Oct-2012@31-Oct-2012@India 
```

使用后向引用而不是积极的后视（如果有的话）效率高多少？

反向引用：

```
inputString.replaceAll("(\\d{4})\\s", "$1@"); 
```

正面回顾：

```
inputString.replaceAll("(?<=\\d{4})\\s", "@"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:06:53.560

第一个示例中没有反向引用，它是对输出中编号的*捕获组*的引用。

两种情况下的搜索效率是一样的；区别仅在于捕获的内容。因此，性能上的整体差异将归结为替换字符串内容的差异：在第一种情况下，将两个字符串组合在一起形成替换，而在第二种情况下，只使用一个字符串。从理论上讲，第一种情况应该需要更多的工作，但在实践中，这种差异不太可能很明显。

**编辑：**正如[acheong87](https://stackoverflow.com/users/925913/acheong87)的测试所示，在 Java 中使用正向前瞻的效率降低了近 50%。此外，这种低效率似乎并不是特定于 Java 的（尽管它在 Java 中的幅度是压倒性的：[相当于`acheong87`'s](http://ideone.com/vafueM)的 C# 程序在 Mono 下显示出大约 24% 的速度下降，在 Windows 下显示出大约 21% 的速度）。

我想这个练习的带回家的教训是，表达式的理论近似等效并不能保证实践中的等效时间：没有替代实际实现的分析。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T08:34:31.610

我承认我的测试方法很粗糙并且可能存在缺陷（此外，我不懂 Java，只学够写这个答案），但我的初步证据证明与@dasblinkenlight 的答案相反。我运行了以下代码：

```
import java.util.*;
import java.lang.*;

class Main
{
    private static void test (String regex, String replace, int repetitions)
    {
        long startTime = System.currentTimeMillis();
        for (int i = 0; i < repetitions; i++)
        {
            String str = "30-Nov-2012 United Kingdom, 31-Oct-2012 31-Oct-2012 United Arab Emirates, 29-Oct-2012 31-Oct-2012 India, ";
            str.replaceAll(regex, replace);
        }
        long endTime = System.currentTimeMillis();
        System.out.println("Execution time: " + Long.toString(endTime - startTime));
    }

    public static void main (String[] args) throws java.lang.Exception
    {
        test("(\\d{4})\\s", "$1@", 10000);
        test("(?<=\\d{4})\\s", "@", 10000);
        test("(\\d{4})\\s", "$1@", 10000);
        test("(?<=\\d{4})\\s", "@", 10000);
        test("(\\d{4})\\s", "$1@", 10000);
        test("(?<=\\d{4})\\s", "@", 10000);
        test("(\\d{4})\\s", "$1@", 10000);
        test("(?<=\\d{4})\\s", "@", 10000);
    }
} 
```

...在这里，[http://ideone.com/WkHLMN](http://ideone.com/WkHLMN)，输出是：

```
Execution time: 164
Execution time: 140
Execution time: 96
Execution time: 135
Execution time: 95
Execution time: 133
Execution time: 94
Execution time: 130 
```

忽略第一组案例作为与初始化有关的异常值，其余案例似乎表明*后一个*表达式，使用积极的后向断言，可能会多做 50% 的工作！我怀疑可能是这种情况，因为在传递了感兴趣的字符*之后*，反向引用需要*返回*以检查断言是否为真。

# android - 用于 tr/td onclick 事件的三星 Galaxy Tab 10.1 和 -webkit-tap-highlight-color 样式？

> ID：13153492
> 
> 赞同：3
> 
> 时间：2012-10-31T07:56:49.037
> 
> 标签：android, onclick, galaxy-tab

```
<table width=100% style="border:#d9d9d9 2px solid;margin-bottom:10px;background:#ffffff">
   <tr>
      <td height=80 width=100% valign=center onclick="javascript:alert('dsfasdfds');">sdfasdfaasdfasdfasdfasdfasdfasd
   </tr>
</table>
```

当我单击网页时，突出显示在大多数设备上都很好用，但在我的 Galaxy Tab 10.1 上却不行。

我希望总是能在`td`or`tr`标签上获得“亮点”。

# delphi - 为什么无法获取控制面板名称？

> ID：13153493
> 
> 赞同：1
> 
> 时间：2012-10-31T07:56:49.733
> 
> 标签：delphi, windows-shell, controlpanel

我使用 Shell 来获取控制面板

代码：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  psfDeskTop: IShellFolder;
  psfWork: IShellFolder; 
  pidworkDir: PITEMIDLIST;
  pidChild: PITEMIDLIST;
  pEnumList: IEnumIDList;
  celtFetched: ULONG;
  FileInfo: SHFILEINFOW;

begin

  Memo1.Clear;
  SHGetDesktopFolder(psfDeskTop);
  //control panel
  SHGetSpecialFolderLocation(0, CSIDL_CONTROLS, pidworkDir);  
  psfDeskTop.BindToObject(pidworkDir, nil, IID_IShellFolder, psfWork);
  psfWork.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_FOLDERS or SHCONTF_INCLUDEHIDDEN, pEnumList);
  while pEnumList.Next(1, pidChild, celtFetched) = 0 do
  begin

    SHGetFileInfo(LPCTSTR(pidChild), 0, FileInfo, SizeOf(FileInfo), SHGFI_PIDL
      or SHGFI_TYPENAME or SHGFI_DISPLAYNAME or SHGFI_USEFILEATTRIBUTES);

    Memo1.Lines.Add(FileInfo.szDisplayName + '   +');

  end;  
end; 
```

它无法获取`FileInfo.szDisplayName`，我只是 `' +'` 用来制作 Memo1 显示。为什么无法获取控制面板名称？

![在此处输入图像描述](../Images/af8210073d00f49baf05224525bc9b5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:10:27.447

我不是shell专家。事实上，我几乎一无所知。但是通过阅读文档，我可以收集到以下信息：

1.  `SHGetFileInfo`期望绝对 PIDL。
2.  `IEnumIDList`枚举相关的 PIDL。

所以你的代码肯定会因此而失败。也许还有其他错误。我说不出来。

无论如何，我认为解决问题的简单方法是使用`IShellFolder.GetDisplayNameOf`获取所需的名称：

```
uses
  ..., ShLwApi, ...
....
var
  StrRetName: TStrRet;
  Name: PChar;
....  
while pEnumList.Next(1, pidChild, celtFetched) = 0 do
begin
  OleCheck(psfWork.GetDisplayNameOf(pidChild, SHGDN_NORMAL, StrRetName));
  OleCheck(StrRetToStr(@StrRetName, nil, Name));
  Memo1.Lines.Add(Name);
  CoTaskMemFree(Name);
  CoTaskMemFree(pidChild);
end; 
```

# mongodb - 在 JRuby 中构建大型 BasicDBObjects 时堆空间不足

> ID：13153495
> 
> 赞同：1
> 
> 时间：2012-10-31T07:56:54.993
> 
> 标签：mongodb, jruby, mongodb-java

我正在将 JRuby 1.7.0.preview1 用于应用程序。此应用程序在 Mongodb 中存储了许多文档。

我的问题是，我的文档很大并且结构很深。当我构建这些文档时，我的 Java 堆空间非常快。（实际上我使用 2GB 的堆空间）

通过内存分析器，我发现存在太多的 BasicDBObjects。

是否有另一种方法可以在 jruby 中为 mongodb 构建文档？

谢谢您的帮助！

# iphone - 使用 iPhone 相机检测心率

> ID：13153496
> 
> 赞同：5
> 
> 时间：2012-10-31T07:56:56.320
> 
> 标签：iphone, ios, camera, heartbeat

> **可能重复：**
> [使用相机检测心率](https://stackoverflow.com/questions/9274027/detecting-heart-rate-using-the-camera)

我正在检测 iOS 中的脉搏率。我做了一些搜索，现在我可以使用能够读取心跳的外部蓝牙设备来读取心跳。但现在我对使用 iPhone 摄像头检测脉搏非常好奇。我试图了解如何做到这一点？这背后的实际理论是什么？任何人都可以对此有所了解吗？

根据我的搜索，我发现我需要在视频模式下使用相机。我需要比较该视频中的每一帧的颜色变化。当我们的心脏将血液泵入体内时，每一次泵血都会改变颜色。那么我将如何使用相机获得颜色变化，或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:02:49.020

麻省理工学院媒体实验室的某个人打败了你：P

[http://www.cardiio.com/](http://www.cardiio.com/)

点击“它是如何工作的”。

我相信它的要点是该应用程序测量由于血液增加/减少而从您的脸上反射的光量。基于此，他们可以确定您的心率。

不知道底层算法。如果我知道，我不会坐在这里，我会写 MIT 应用程序：D

显然有一个阈值被认为是“标准”心率。

> 研究表明，在光线充足的环境中休息时，我们的心率测量值在临床脉搏血氧仪的 3 bpm 以内（Poh 等人，Opt. Express 2010；Poh 等人，IEEE Trans Biomed Eng 2011）。

你可能需要一些精密的设备来记录你的结果，比如真正的心率测量机，这样你就可以比较不同心率下不同帧之间的 RGB（以 255,255,255 个三元组值），而且你必须确保你坐在与受控照明大致相同的环境。

如果你试图在家里做，你将一无所获。例如，如果天空变暗，您将获得不同的 RGBA 值。

# php - 有没有办法将文件从服务器移动到本地目录？

> ID：13153498
> 
> 赞同：0
> 
> 时间：2012-10-31T07:57:20.133
> 
> 标签：php, javascript, jquery, ajax, xul

我在 php/javascript/xul 中搜索了一个函数/命令，它可以将文件从 http 服务器传输到本地目录，但没有找到任何足够的答案。

是否有任何函数/命令可以使用 PHP/Javascript/XUL 中的任何一个来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:00:05.557

[http://php.net/manual/en/book.ftp.php](http://php.net/manual/en/book.ftp.php)，这是一个很好的例子[http://www.php.net/manual/en/ftp.examples-basic.php](http://www.php.net/manual/en/ftp.examples-basic.php)

试试这个功能[http://www.php.net/manual/en/function.ftp-get.php](http://www.php.net/manual/en/function.ftp-get.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:03:01.277

这不能用 javascript 完成，但在 PHP 中，您必须发送正确的标头，然后像这样提供文件：

示例：强制下载 CSV 文件

```
header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename=example.csv');
header('Pragma: no-cache');
readfile("/path/to/yourfile.csv"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:14:54.467

这是文件下载的php脚本：

```
 if (file_exists($file))
    {
        if (FALSE!== ($handler = fopen($file, 'r')))
        {
            header('Content-Description: File Transfer');
            header('Content-Type: application/octet-stream');
            header('Content-Disposition: attachment; filename='.basename($file));
            header('Content-Transfer-Encoding: chunked'); 
            header('Expires: 0');
            header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
            header('Pragma: public');       
            //Send the content in chunks
            while(false !== ($chunk = fread($handler,4096)))
            {
                echo $chunk;
            }
        }
        exit;
    }
    echo "<h1>Content error</h1><p>The file does not exist!</p>"; 
```

# python - 如何配置 pyftpdlib 以创建仅“活动”的 FTP 服务器？

> ID：13153499
> 
> 赞同：2
> 
> 时间：2012-10-31T07:57:20.683
> 
> 标签：python, ftp

我需要为涉及连接到仅接受“活动”FTP 连接的服务器的 FTP 客户端创建一个测试用例。对于其他情况，我使用的是 pyftpdlib，它的工作原理很迷人，但我看不到一种简单的方法来将其配置为仅在 FTP 主动模式下运行，而不是被动模式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:50:35.403

如果你在标题中写的意思是“字面上禁用 PASV（被动）”模式，你可以告诉 pyftpdlib 不要解释该命令。未测试：

```
from pyftpdlib.ftpserver import FTPHandler
handler = FTPHandler
del handler.proto_cmds['PASV']
del handler.proto_cmds['EPSV']
... 
```

这样 pyftpdlib 将拒绝任何带有“550 命令 PASV 不理解”的 PASV/EPSV 请求。

# linux - tar Linux 命令排除子目录的层次结构（但包括它们的文件）

> ID：13153503
> 
> 赞同：0
> 
> 时间：2012-10-31T07:57:50.007
> 
> 标签：linux, file, command, directory, tar

我的文件夹`a`有两个文件（1,2），子文件夹`b`有另外两个文件（3,4）。

我想在`a`tar 文件中使用 '1,2,3,4' 文件进行 tar，但不包括`b`.

（默认情况下（`tar cvf`），`b`被添加，'3,4'在里面`b`。我该怎么做？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:42:22.687

你可以使用这样的脚本：

```
# ! /bin/sh
files=`cat list.list`
tarname="test.tar"
tarpath=`pwd`
#create empty tar
tar -cvf $tarpath/$tarname --files-from /dev/null

for curr_file in $files
do
   #add each file separatly
   cd `dirname $curr_file`
   tar -uvf $tarpath/$tarname `basename $curr_file`
   cd -
done 
```

并使用如下命令创建文件列表：

```
find -type f > list.list 
```

# java - 春季安全奇怪的行为

> ID：13153504
> 
> 赞同：0
> 
> 时间：2012-10-31T07:57:54.973
> 
> 标签：java, spring-mvc, spring-security

我正在使用 spring security 和 MongoDB 进行测试，所以我使用 MongoDB 构建了一个自定义 UserDetailService 并且我让它工作但突然它开始抛出异常，我试图解决这个问题但我不能所以我将我的代码恢复到之前的状态实现自定义 UserDetailService 并再次开始工作，我重新实现了 UserDetailService 并发生了完全相同的事情，它只是停止工作，甚至没有更改任何内容，只需停止并重新启动 tomcat。

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="3.0"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<display-name />
<listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener>
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>
<filter>
    <description>
        generated-spring-security-session-integration-filter
    </description>
    <filter-name>
        SpringSecuritySessionIntegrationFilter
    </filter-name>
    <filter-class>
        org.springframework.security.web.context.SecurityContextPersistenceFilter
    </filter-class>
</filter>
<filter>
    <description>generated-sitemesh-filter</description>
    <filter-name>Sitemesh Filter</filter-name>
    <filter-class>
        com.opensymphony.module.sitemesh.filter.PageFilter
    </filter-class>
</filter>
<filter>
    <description>generated-spring-security-filter</description>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>
        SpringSecuritySessionIntegrationFilter
    </filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>Sitemesh Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<servlet>
    <description>generated-servlet</description>
    <servlet-name>MongoSecurity Servlet</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:MongoSecurity-web-context.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet>
    <description>generated-resources-servlet</description>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>
        org.springframework.js.resource.ResourceServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
    <url-pattern>/resources/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>MongoSecurity Servlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我得到的例外是：

```
java.lang.ClassCastException: org.springframework.security.web.firewall.FirewalledResponse cannot be cast to org.springframework.security.web.context.SaveContextOnUpdateOrErrorResponseWrapper
org.springframework.security.web.context.HttpSessionSecurityContextRepository.saveContext(HttpSessionSecurityContextRepository.java:99)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:65)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) 
```

这是我的security-context.xml：

```
<http auto-config="true">
    <intercept-url pattern="/pages/login.jsp" />
    <intercept-url access="ROLE_ADMIN" pattern="/secure/**" />
    <form-login authentication-failure-url="/pages/login.jsp?login_error=true" login-page="/pages/login.jsp" />
<logout invalidate-session="true" logout-success-url="/pages/logout-redirect.jsp" />
    <remember-me key="formsRMKey" user-service-ref="userDetailsService" />
</http>
<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder hash="sha" />
    </authentication-provider>
</authentication-manager>
<beans:bean id="userDetailsService" class="com.realestate.service.MongoUserDetailService" /> 
```

以及 MongoUserDetailService 的实现：

```
public UserDetails loadUserByUsername(String username)
        throws UsernameNotFoundException {
    UserAccount user = userDao.findByUsername(username);
    if(user == null){
        return null;
    }
    return new User(user.getUsername(), user.getPassword(), true, true, true, true, getGrantedAuthorities(user.getRoles()));
}

public static List<SimpleGrantedAuthority> getGrantedAuthorities(List<Role> roles) {
    List<SimpleGrantedAuthority> authorities = new ArrayList<SimpleGrantedAuthority>();
    for (Role role : roles) {
        authorities.add(new SimpleGrantedAuthority(role.getName()));
    }
    return authorities;
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:35:19.380

我有类似的问题，从 web.xml 中删除 SecurityContextPersistenceFilter 解决了我的问题。http-config 元素使用它自己的 SecurityContextPersistenceFilter 创建过滤器链，因此显式声明的过滤器会出现故障。顺便说一句，您的 web.xml 中还有一些其他 Spring Security 过滤器，所以也许您不仅需要删除这个过滤器才能让事情正常工作。请参阅[Spring Security 核心过滤器文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/core-web-filters)以获取有关默认注册的 Spring Security 过滤器的信息。

# python - 如何将脚本中的多个字符串返回到 booggie 2 中的规则序列？

> ID：13153506
> 
> 赞同：2
> 
> 时间：2012-10-31T07:58:03.610
> 
> 标签：python, booggie

这是一个特定于在 booggie 2 中使用 python 脚本的问题。

我想将多个字符串返回到序列中并将它们存储在变量中。

脚本应如下所示：

```
def getConfiguration(config_id):
    """ Signature:  getConfiguration(int): string, string"""

    return "string_1", "string_2" 
```

在我想要的序列中：

```
(param_1, param_2) = getConfiguration(1) 
```

请注意：booggie 项目不再存在，但导致开发了涵盖相同功能的[Soley Studio 。](https://www.soley.io/en/pr-soley-studio/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T08:23:27.450

booggie 2 中的脚本仅限于单个返回值。但是您可以返回一个包含您的字符串的数组。遗憾的是 Python 数组与 GrGen 数组不同，因此我们需要先转换它们。

所以你的例子看起来像这样：

```
def getConfiguration(config_id):
    """ Signature:  getConfiguration(int): array<string>"""

    #TypeHelper in booggie 2 contains conversion methods from Python to GrGen types
    return TypeHelper.ToSeqArray(["string_1", "string_2"]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T07:58:53.140

返回一个元组

```
return ("string_1", "string_2") 
```

看这个例子

```
In [124]: def f():
   .....:     return (1,2)
   .....:

In [125]: a, b = f()

In [126]: a
Out[126]: 1

In [127]: b
Out[127]: 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T11:23:51.147

Still, it's not possible to return multiple values but a python list is now converted into a C#-array that works in the sequence.

The python script itself should look like this

```
def getConfiguration(config_id):
    """ Signature:  getConfiguration(int): array<string>"""

    return ["feature_1", "feature_2"] 
```

In the sequence, you can then use this list as if it was an array:

```
config_list:array<string>               # initialize array of string
(config_list) = getConfigurationList(1) # assign script output to that array

{first_item = config_list[0]}           # get the first string("feature_1") 
{second_item = config_list[1]}          # get the second string("feature_2") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T16:46:51.497

对于上面的示例，我建议使用以下代码来访问数组中的条目（按顺序）：

```
 config_list:array<string>               # initialize array of string
    (config_list) = getConfigurationList(1) # assign script output to that array

    {first_item = config_list[0]}           # get the first string("feature_1") 
    {second_item = config_list[1]}          # get the second string("feature_2") 
```

# file - 如何禁用从网站下载文件？

> ID：13153508
> 
> 赞同：1
> 
> 时间：2012-10-31T07:58:18.270
> 
> 标签：file, download, directory

我的网站上有一些 mp3 文件，我想使用 SCM 音乐播放器进行流式传输，但是如果我为目录设置密码或重定向方法，那么流式传输显然不起作用。有没有其他方法可以禁用文件下载但仍然可以通过音乐播放器流式传输文件？

解决方案：

`.htaccess`我使用这一行禁用了索引：

```
Options -Indexes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:09:18.337

将文件存储在数据库而不是目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:05:19.160

试着放

```
<Files ~ "\.(mp3)$">
    Order allow,deny 
    Deny from all
</Files> 
```

在您的 .htaccess 中，这可能也会拒绝您的音乐播放器的 mp3，但您可以轻松配置 .htaccess 以允许来自您的 IP 或域的 mp3

# core-audio - iOS 核心音频录制缓冲区问题

> ID：13153511
> 
> 赞同：2
> 
> 时间：2012-10-31T07:58:31.170
> 
> 标签：core-audio, recording, circular-buffer

我正在尝试将一堆样本写入 TPCircularBuffer，由[http://atastypixel.com/blog/a-simple-fast-circular-buffer-implementation-for-audio-processing/comment-page-提供的 Michael Tyson 1/#comment-4988](http://atastypixel.com/blog/a-simple-fast-circular-buffer-implementation-for-audio-processing/comment-page-1/#comment-4988)

我成功地实时回放了这些录制的样本。监视器之类的东西。

但是，我希望将样本保留在 TPCircularBuffer 中以供以后播放，因此我实现了 2 个标志，rio->recording 和 rio->playing。我的想法是我会使用按钮激活 rio->recording 为 YES。录制一段时间，然后通过将标志设置为 NO 来停止录制。理论上，TPCircularBuffer 会保存我的音频信息。

但是，当我在播放回调中将 rio->playing 激活为 YES 时，我只是听到一些与我录制的内容不同的抖动声音。

我是否正确使用了缓冲区？或者这通常以另一种方式完成？

谢谢。

码头。

```
static OSStatus recordingCallback(void *inRefCon, 
                              AudioUnitRenderActionFlags *ioActionFlags, 
                              const AudioTimeStamp *inTimeStamp, 
                              UInt32 inBusNumber, 
                              UInt32 inNumberFrames, 
                              AudioBufferList *ioData) {

RIO *rio = (RIO*)inRefCon;
AudioUnit rioUnit = rio->theAudioUnit;
//ExtAudioFileRef eaf = rio->outEAF;
AudioBufferList abl = rio->audioBufferList;

SInt32 samples[NUMBER_OF_SAMPLES]; // A large enough size to not have to worry about buffer overrun
abl.mNumberBuffers = 1;
abl.mBuffers[0].mData = &samples;
abl.mBuffers[0].mNumberChannels = 1;
abl.mBuffers[0].mDataByteSize = inNumberFrames  * sizeof(SInt16);

OSStatus result;
result = AudioUnitRender(rioUnit, 
                         ioActionFlags, 
                         inTimeStamp,
                         inBusNumber, 
                         inNumberFrames, 
                         &abl);

if (noErr != result) { NSLog(@"Obtain recorded samples error"); }

// React to a recording flag, if recording, save the abl into own buffer, else ignore
if (rio->recording)
{   
    TPCircularBufferProduceBytes(&rio->buffer, abl.mBuffers[0].mData, inNumberFrames  * sizeof(SInt16));
    NSLog(@"Recording!"); 
}
else
{
    NSLog(@"Not Recording!");
}
// once stop recording save the circular buffer to a temp circular buffer

    return noErr;
}

static OSStatus playbackCallback(void *inRefCon, 
                             AudioUnitRenderActionFlags *ioActionFlags, 
                             const AudioTimeStamp *inTimeStamp, 
                             UInt32 inBusNumber, 
                             UInt32 inNumberFrames, 
                             AudioBufferList *ioData) {    

RIO *rio = (RIO*)inRefCon;

int bytesToCopy = ioData->mBuffers[0].mDataByteSize;
SInt16 *targetBuffer = (SInt16*)ioData->mBuffers[0].mData;

// Pull audio from playthrough buffer
int32_t availableBytes;

if (rio->playing)
{
    SInt16 * tempbuffer = TPCircularBufferTail(&rio->buffer, &availableBytes);
    memcpy(targetBuffer, tempbuffer, MIN(bytesToCopy, availableBytes));
    TPCircularBufferConsume(&rio->buffer, MIN(bytesToCopy, availableBytes));
    NSLog(@"Playing!");
}
else
{
   NSLog(@"Playing silence!");

   for (int i = 0 ; i < ioData->mNumberBuffers; i++){
    //get the buffer to be filled
    AudioBuffer buffer = ioData->mBuffers[i];
    UInt32 *frameBuffer = buffer.mData;

    //loop through the buffer and fill the frames
       for (int j = 0; j < inNumberFrames; j++){
           frameBuffer[j] = 0;
       }
   }
}

   return noErr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:57:51.077

我会自己回答这个问题。基本上，垃圾声音是由于 TPCircularBuffer 没有足够大来容纳声音。播放回调只是在播放垃圾，因为缓冲区不再包含有效的音频数据。

基本上，使 TPCircularBuffer 更大解决了我的问题。（呃！）

码头。

# visual-studio-2010 - 在 IWizard 中设置项目项子属性？

> ID：13153515
> 
> 赞同：2
> 
> 时间：2012-10-31T07:58:55.380
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-extensions

我有一个要添加到 Sharepoint 项目的自定义项目模板。我需要确保我的模块仅与我的功能相关联，即使项目已经包含其他功能。

通过修改方法中的`projectItemReference`.feature 文件中的元素替换 ID很简单。`replacementsDictionary``RunStarted`

例如，我有以下`SampleModule_WebParts.feature`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<feature xmlns:dm0="http://schemas.microsoft.com/VisualStudio/2008/DslTools/Core" dslVersion="1.0.0.0" Id="$SampleFeatureID$" activateOnDefault="false" description="Sample Web Part" featureId="$SampleFeatureID$" scope="Site" solutionId="00000000-0000-0000-0000-000000000000" title="Contoso Intranet Sample Module Web Parts" version="" deploymentPath="$SharePoint.Project.FileNameWithoutExtension$_$SharePoint.Feature.FileNameWithoutExtension$" xmlns="http://schemas.microsoft.com/VisualStudio/2008/SharePointTools/FeatureModel">
  <projectItems>
    <projectItemReference itemId="$SampleModuleID$" />
  </projectItems>
</feature> 
```

替换`$SampleModuleID$`和`$SampleFeatureID$`修改方法是微不足道`replacementsDictionary`的。`IWizard.RunStarted`但是如何修改生成的`.csproj`文件片段？

```
<None Include="Features\SampleModule_WebParts\SampleModule_WebParts.feature">
  <FeatureId>{78185D58-6398-4ED2-B0D0-3DC20946FF8F}</FeatureId>
</None>
<Compile Include="SPItems\SampleModule\SampleWebPart\SampleWebPart.cs" />
<Compile Include="SPItems\SampleModule\SampleWebPart\SampleWebPartUserControl.ascx.cs">
  <DependentUpon>SampleWebPartUserControl.ascx</DependentUpon>
  <SubType>ASPXCodeBehind</SubType>
</Compile>
<Compile Include="SPItems\SampleModule\SampleWebPart\SampleWebPartUserControl.ascx.designer.cs">
  <DependentUpon>SampleWebPartUserControl.ascx.cs</DependentUpon>
</Compile>
<None Include="SPItems\SampleModule\SampleWebPart\SampleWebPart.webpart" />
<None Include="SPItems\SampleModule\SampleWebPart\SharePointProjectItem.spdata">
  <SharePointProjectItemId>{D982D304-E7FB-4E8C-899B-7D4096A55892}</SharePointProjectItemId>
</None> 
```

在这种情况下，我需要为and项设置`FeatureId`and`SharePointProjectItemId`属性。如果我什么都不做，Visual Studio 将自动生成这些 GUID，但它们与我的. 这反过来会导致我的文件中的引用损坏，并且我的模块可能与错误的功能相关联。`.feature``.spdata``replacementsDictionary``.feature`

如何设置这些自定义属性，以便`.csproj`在用户保存文件时将它们持久保存到文件中？`IWizard.ProjectItemFinishedGenerating`似乎是正确的实现方法，我可以检查`ProjectItem`参数以确定何时生成`.spdata`和`.feature`文件，但*我*应该在那里设置`FeatureId`和`SharePointProjectItemId`属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:46:52.980

解决方案是将`Project`引用转换为一个`ISharePointProject`和调用 `ISharepointProject.Synchronize()`。之后，我可以遍历 SharePoint 项目的对象模型。

```
var sp = project.DTE as Microsoft.VisualStudio.OLE.Interop.IServiceProvider;
var projectService = new ServiceProvider(sp).GetService(typeof(ISharePointProjectService)) as ISharePointProjectService;
var sharepointProject = projectService.Convert<Project, ISharePointProject>(project);
sharepointProject.Synchronize(); 
```

`ProjectItems`从and属性返回的集合中找到我的模块和我的功能后`Features`，我可以简单地将模块与功能相关联：

```
sampleFeature.ProjectItems.Add(sampleModule); 
```

因为我可以以编程方式修复引用，所以我可以将旧模块 GUID 保留在文件中，并通过修改集合`.feature`来清理无效关联。`sampleFeature.Model.ProjectItems`

```
var invalidSampleModuleAssociation = (from projectItem in sampleFeature.Model.ProjectItems
                                      where projectItem.ItemId == originalSampleModuleID
                                      select projectItem).First();
sampleFeature.Model.ProjectItems.Remove(invalidSampleModuleAssociation); 
```

最后，我需要从项目可能具有的任何其他功能中删除我的模块，因为 Visual Studio 会自动将新模块与具有适当范围的第一个功能相关联。

```
var unneededAssociations = (from otherFeature in sharepointProject.Features
                            where otherFeature.Name != sampleFeature.Name
                            from projectItem in otherFeature.ProjectItems
                            where projectItem.Name == sampleModule.Name
                            select new
                            {
                                Feature = otherFeature,
                                ModuleToRemove = projectItem
                            }).ToArray();
foreach (var moduleAssociation in unneededAssociations)
{
    moduleAssociation.Feature.ProjectItems.Remove(moduleAssociation.ModuleToRemove);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:23:52.913

AFAIK，您也可以在任何文件中进行替换，包括 .csproj（在文件名和内容中）

如果您在 replacementDictionary 中有要替换的 Guid，只需检查 .vstemplate 以确保文件替换为真：

```
<Project
    File="MyProject.proj"
    TargetFileName="$safeprojectname$.csproj"
    ReplaceParameters="true">
</Project> 
```

并正确编辑 .csproj，替换 Guid：

```
<None Include="Features\SampleModule_WebParts\SampleModule_WebParts.feature">
  <FeatureId>{$SampleFeatureID$}</FeatureId>
</None>
<Compile Include="SPItems\SampleModule\SampleWebPart\SampleWebPart.cs" />
<Compile Include="SPItems\SampleModule\SampleWebPart\SampleWebPartUserControl.ascx.cs">
  <DependentUpon>SampleWebPartUserControl.ascx</DependentUpon>
  <SubType>ASPXCodeBehind</SubType>
</Compile>
<Compile Include="SPItems\SampleModule\SampleWebPart\SampleWebPartUserControl.ascx.designer.cs">
  <DependentUpon>SampleWebPartUserControl.ascx.cs</DependentUpon>
</Compile>
<None Include="SPItems\SampleModule\SampleWebPart\SampleWebPart.webpart" />
<None Include="SPItems\SampleModule\SampleWebPart\SharePointProjectItem.spdata">
  <SharePointProjectItemId>{$SampleModuleID$}</SharePointProjectItemId>
</None> 
```

**重要的！替换字典，因为 IDictionaryl 区分大小写！！**

# android - ExpandableListView 内的 Android GridView 项目单击事件处理程序

> ID：13153517
> 
> 赞同：1
> 
> 时间：2012-10-31T07:59:07.907
> 
> 标签：android, android-intent, android-listview, android-gridview

我在 ExpandableListView 中有一个 Android GridView。所有数据看起来都很好，但我找不到处理 GridView Item Click 事件的方法。我只想在单击网格的单元格时打开另一个 Intent 并将值传递给 Intent。

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T12:10:14.727

```
YourGrid.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View v,
                        int position, long id) {
                    Intent intent = new Intent(this,
                            MyNewActivity.class);
                    startActivity(intent);
                }
            }); 
```

确保在您的 GridLayout 中没有像按钮这样的可点击内容，否则它们会被触发而不是这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:04:42.130

> grid.setOnChildClickListener();

可以解决你的问题！

# android - Android Listview 的 onItemClick 问题与自定义 ViewGroup

> ID：13153519
> 
> 赞同：0
> 
> 时间：2012-10-31T07:59:28.820
> 
> 标签：android, listview, android-listview

嘿，我做了一个自定义视图组扩展了相对布局并覆盖了 onTouchEvent()：

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            doMyWork();

            break;

        case MotionEvent.ACTION_CANCEL:
        case MotionEvent.ACTION_UP:
            endMywork();

            break;

        default:
            break;
    }
    return super.onTouchEvent(event);
} 
```

我还为列表视图添加了 onItemClick 侦听器。但我无法收到：

```
case MotionEvent.ACTION_CANCEL:
case MotionEvent.ACTION_UP: 
```

我的视图组中的事件...有人可以帮助我吗？

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:05:54.907

尝试：

```
 public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        doMyWork();

        return true;

    case MotionEvent.ACTION_CANCEL:
    case MotionEvent.ACTION_UP:
        endMywork();

        break;

    default:
        break;
  }
  return super.onTouchEvent(event);
} 
```

# javascript - 在谷歌分析跟踪代码中，他们为什么使用闭包

> ID：13153525
> 
> 赞同：6
> 
> 时间：2012-10-31T08:00:01.213
> 
> 标签：javascript, closures

为什么在谷歌分析跟踪代码中，他们将这些行包装在一个闭包中？

```
(function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

如果没有父关闭，它会不会一样工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T08:01:53.663

它的工作原理相同，但如果您声明了一个带有 Google 代码中使用的标识符的变量，它可能很容易破坏您页面上的其他脚本。

通过将声明包装在闭包中，变量的作用域是匿名函数，并且不会泄漏到全局作用域。

例如，考虑这个具有新范围的示例：

```
var ga = "something important for my script"; // Not overwritten in this scope

(function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

而这个没有它的例子：

```
var ga = "something important for my script"; // Overwritten!

var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T08:02:16.990

只要没有使用相同名称定义的全局范围变量，它就可以正常工作。将代码包装在闭包中会将其置于自己的范围内，以便它独立于页面上的任何其他代码。

# django - 在 Django 中有多个装饰器并且只使用一个

> ID：13153527
> 
> 赞同：3
> 
> 时间：2012-10-31T08:00:05.863
> 
> 标签：django, decorator, django-authentication

我正在使用[django-tokenapi](https://github.com/jpulgarin/django-tokenapi)来允许对使用 Django 作为后端的 Android 项目进行身份验证。该项目还有一个网络界面。

django-tokenapi 使用`@token_required`装饰器来保护某些视图。Django 使用`@login_required`装饰器来保护某些视图。

我想要的是只有一个受`@login_required`OR保护的视图，`@token_required`因此它可以与 webapp 或 Android 应用程序一起使用。

所以，理想情况下，它看起来像这样：

```
@token_required
@login_required
def names_update(request):
    ....
    .... 
```

然而，这是行不通的。有没有更好的方法来做到这一点？或者正确的做法是拥有两个视图，一个是 webapp，一个是 Android，它们受到适当的装饰器的保护，然后导致相同的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:41:13.580

您可以尝试将新视图变量分配给旧视图：

```
@token_required
def names_update_token(request):
    ...

@login_required
names_update_login = names_update_token 
```

这应该具有创建名为 names_update_login 的第二个视图的效果，该视图只是指向第一个视图的指针，因此代码保持不变。

编辑：

另一个想法，也是我使用过的一个想法，是创建一个更“通用”的视图，并从其他每个视图中调用它：

```
def update_token(request):
    ...

@token_required
def names_update_token(request):
    update_token(request)

@login_required
def names_update_login(request):
    update_token(request) 
```

这解决了您提到的问题，同时仍然只维护实现视图的实际代码的一个副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:40:46.797

不，如果可能的话，没有简单的方法可以`OR`根据您的描述编写一个通用的装饰器。

但是，您可以编写一个完全符合您要求的新装饰器：

```
from functools import wraps
from django.contrib.auth import authenticate, login
from django.views.decorators.csrf import csrf_exempt

def token_or_login_required(view_func):
    """
    Decorator which ensures the user is either logged in or
    has provided a correct user and token pair.
    """

    @csrf_exempt
    @wraps(view_func)
    def _wrapped_view(request, *args, **kwargs):
        user = request.REQUEST.get('user')
        if user and user.is_authenticated:
            return view_func(request, *args, **kwargs)

        token = request.REQUEST.get('token')

        if user and token:
            user = authenticate(pk=user, token=token)
            if user:
                login(request, user)
                return view_func(request, *args, **kwargs)
        return HttpResponseForbidden()
    return _wrapped_view 
```

这个装饰结合了装饰器[`token_required`](https://github.com/jpulgarin/django-tokenapi/blob/master/tokenapi/decorators.py#L10)和[`login_required`](https://github.com/django/django/blob/master/django/contrib/auth/decorators.py#L44)装饰器，如果用户登录或令牌有效，将允许访问视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:24:46.373

可以在单个视图上使用多个装饰器。但在这种情况下，我认为您应该分开视图并单独应用装饰器。否则`token_required`，装饰器将尝试使用在使用浏览器发出的请求时不可用的令牌进行身份验证。

# c# - 如何创建 WCF 服务中的所有会话都可以访问的属性？

> ID：13153529
> 
> 赞同：3
> 
> 时间：2012-10-31T08:00:17.333
> 
> 标签：c#, wcf, service, windows-services, nettcpbinding

我有 nettcpbinding 服务并使用 Windows 服务托管它。该服务必须在网络上运行，并且它处理来自 100 多个客户端的传入消息。

问题：我想要一个所有会话都可以访问的属性。像这样 ：

```
class a
{
   list<string> strList=new list<string>();

class b{}
class c{}
...
} 
```

在此示例中，所有类都可以访问 strList。我想要一个所有会话都可以访问它的列表（在该列表中添加或删除东西）。

服务配置是缓冲的，没有安全性。和服务属性在这里：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
[ServiceContract(SessionMode = SessionMode.Required)] 
```

**编辑：** 我不想创建只是一个例子的类。我只需要一个所有会话都可以访问它的列表。当您拥有 InstanceContextMode.PerSession 服务时，该服务类将为每个客户端创建，然后每个客户端都有自己的服务类，现在我希望创建的每个会话都可以访问一个公共列表。

**EDIT2：** 此列表在服务器中，只有服务器可以访问它，不需要向客户端发送列表。它是计算某些东西的服务器变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T14:03:41.513

您可以在服务类中使用静态属性，例如：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
[ServiceContract(SessionMode = SessionMode.Required)]
public class MyService : IMyService {

    // this is your static data store which is accessible from all your sessions
    private static List<string> strList = new List<string>();

    // an object to synchronize access to strList
    private static object syncLock = new object();

    public void AddAction(string data) {

        // be sure to synchronize access to the static member:
        lock(syncLock) {
            strList.Add(data);
        }
    }

} 
```

WCF 将为连接到您的服务的每个新客户端创建一个新的 MyService 实例。他们都可以访问静态属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:57:59.997

您可能希望您的 ConcurrencyMode 设置为 Multiple，并且您需要确保将您的对象视为多线程，因为这就是您基本设置的内容。在这种需要多重锁定的情况下，有一种模式可以避免死锁。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/orm-9780596521301-02-08.aspx)。

```
[SerivceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Multiple)]
class MyService : IMyContract
{

//Here is your shared object
static List<string> _strList = new List<string>();

//Only access the property for thread safety, not the variable
static List<string> StrList
{
    get
    {
        lock(typeof(MyService)
        {
            return _strList;
        }
    }
    set
    {
        lock(typeof(MyService)
        {
            _strList = value;
        }
    }
}

void DoSomeThing()
{
    lock(typeof(MyService))
    {
        //Do something with your list here, other threads are blocked from accessing
        // objects in lock
        StrList.Add("Something");
    }
}
} 
```

但是，如果您正在考虑使用集合，我建议您查看[并发集合](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)对象，因为这些对象是为多线程访问而设计的。这些对象不需要锁定，因为它们具有自包含锁定，这在您将来忘记的情况下很好。

编辑：只是为了补充信息，锁定将阻止其他线程执行该锁中的代码或访问锁定的属性。出于这个原因，不建议在锁中进行冗长的操作，因为它会减慢所有客户端的速度。此外，您的 InstanceContextMode 设置为 PerCall 将为您的服务的每次调用创建一个新的服务类实例。相反，如果您没有任何活动并且您的所有服务实例都被清理或关闭，那么您也将丢失您的共享对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:08:08.383

我认为你应该建立一个 DataContract

例子 ：

```
 [DataContract]
    public class A
    {
     [DataMember]
     list<string> strList { get; set; }

     class B
       {
       }

     class C
       {
       }
   } 
```

# matlab - 在matlab中将每两周的年度温度数据插值到每小时的测量值中

> ID：13153534
> 
> 赞同：4
> 
> 时间：2012-10-31T08:00:45.583
> 
> 标签：matlab, time, interpolation

我有一个每两周记录一次的年度温度测量数据集。数据类似于以下内容：

```
t = 1:14:365;
% GENERATE DATA
y = 1 + (30-1).*rand(1,length(t));
y1 = 20*sin(2*pi*t/max(t));        % Annual variation °C
y1(y1<0) = [];
tt = 365/14;
time = 1:tt:365;
plot(time,y1,'-o'); 
```

它显然遵循年度温度循环。

由此我想知道是否可以在数据上添加一个正弦函数（代表昼夜温度范围）？例如，从每两周一次的数据中，如果我们要对系列进行插值以进行 8760 次测量，即每小时测量一次，那么为了使系列可信，除了年度温度周期外，还需要以昼夜温度周期为特征。此外，昼夜温度循环需要是当时温度测量值的函数，即夏季比冬季大。所以也许最好首先使用线性插值来获取数据以表示每小时间隔，然后添加正弦函数。有没有办法将其写入脚本？或者有没有人对如何准确地实现这一点有意见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:03:32.967

您可以首先使用类似的东西插入您的数据（最多 1 小时）

```
x = 1:inv(24):365;
T_interp = interp1(t,y1,x,'spline'); 
```

查看[interp1](http://www.mathworks.se/help/matlab/ref/interp1.html)的 Matlab 文档（示例 2）

然后在其上添加一个正弦。接下来是周期 1（24 小时）的正弦波，幅度为 A，在凌晨 3 点有最小值。

```
T_diurn = -A*sin(2*pi*x+(3/24)*2*pi); 
```

然后

```
T_total = T_diurn + T_interp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:26:08.987

第一：你知道好看的剧情是世上最容易误导人的东西吗？对每 14 天收集一次的数据进行插值，以使其看起来像*每小时*收集一次的数据，这在大多数圈子中被认为至少是不好的做法......

话虽如此，我会使用`spline`s 进行插值——当从每两周和每小时更改为任意其他组合时，它们会更加灵活，而且每年的温度变化也会更加平滑。

就是这样：

```
% Create spline through data
pp = spline(time, y1);

% define diurnal variation (this one is minimal at 4 AM)    
T_diurn = @(t) -A*cos(2*pi*(t-(4/24)));

% plot example 
t = 150 : 1/24 : 250;    
plot( t, ppval(pp,t)+T_diurn(t) , 'b') 
```

# html - 在 Outlook 中为 HTML 电子邮件设置最大宽度 - 为什么它与 Gmail 不同？

> ID：13153538
> 
> 赞同：4
> 
> 时间：2012-10-31T08:01:14.957
> 
> 标签：html, css, email, outlook, mailchimp

我一直在努力设计一个 HTML 电子邮件，出于某种原因，它在 MailChimp/Chrome/GMail 中看起来很棒，但在 Outlook 中，这些列被拉伸并且看起来很糟糕（见截图）。我对 HTML 不是很好，我尝试将几个最大宽度参数更改为 600 像素而不是 100%，但没有成功。

我希望电子邮件始终为 600 像素宽。

任何帮助是极大的赞赏。

![网页视图](../Images/db82576ff617a27160fe7e55978808ef.png)

^它在 Chrome/Gmail 中的外观

![展望视图](../Images/314c52aaacb94188fc8c450974bf3301.png)

^它在 Outlook 中的外观（顶部蓝色部分为 600 像素，其余部分被拉伸）

这是我正在使用的 HTML 代码：

```
<style type="text/css">
        #outlook a{
            padding:0;
        }
        body{
            width:600 !important;
        }
        .ReadMsgBody{
            width:100%;
        }
        .ExternalClass{
            width:100%;
        }
        body{
            -webkit-text-size-adjust:none;
        }
        body{
            margin:0;
            padding:0;
        }
        img{
            height:auto;
            line-height:100%;
            outline:none;
            text-decoration:none;
        }
        #backgroundTable{
            height:100% !important;
            margin:0;
            padding:0;
            width:100% !important;
        }
        body,#backgroundTable{
            background-color:#314A66;
        }
        h1,.h1{
            color:#FFFFFF;
            display:block;
            font-family:Verdana;
            font-size:26px;
            font-weight:bold;
            line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
            text-align:center;
        }
        h2,.h2{
            color:#0E385F;
            display:block;
            font-family:Verdana;
            font-size:22px;
            font-weight:bold;
            line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
            text-align:left;
        }
        h3,.h3{
            color:#0E385F;
            display:block;
            font-family:Verdana;
            font-size:20px;
            font-weight:bold;
            line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
            text-align:left;
        }
        h4,.h4{
            color:#0E385F;
            display:block;
            font-family:Verdana;
            font-size:12px;
            font-weight:bold;
            line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
            text-align:left;
        }
        #templatePreheader{
            background-color:#36C0CC;
        }
        .preheaderContent div{
            color:#CCCCCC;
            font-family:Lucida Sans,Lucida;
            font-size:10px;
            line-height:110%;
            text-align:left;
        }
        .preheaderContent div a:link,.preheaderContent div    a:visited,.preheaderContent div a .yshortcuts {
            color:#EEEEEE;
            font-weight:normal;
            text-decoration:underline;
        }
        #templateHeader{
            background-color:#36C0CC;
            border-bottom:0;
        }
        .headerContent div{
            color:#FFFFFF;
            font-family:Verdana;
            font-size:14px;
            font-weight:normal;
            line-height:100%;
            padding-top:20px;
            padding-right:20px;
            padding-bottom:20px;
            padding-left:10px;
            text-align:left;
            vertical-align:top;
        }
        .headerContent div a:link,.headerContent div a:visited,.headerContent div a .yshortcuts {
            color:#336699;
            font-weight:normal;
            text-decoration:underline;
        }
        .headerContent div img{
            height:auto;
            max-width:600px;
        }
        #templateContainer,.bodyContent{
            background-color:#FFFFFF;
        }
        #templateBody{
            border:0px none #10263F;
        }
        .bodyContent div,#social div{
            color:#505050;
            font-family:Verdana;
            font-size:12px;
            line-height:150%;
        }
        .bodyContent div{
            text-align:justify;
        }
        .bodyContent div a:link,.bodyContent div a:visited,.bodyContent div a .yshortcuts ,#social div a:link,#social div a:visited{
            color:#336699;
            font-weight:normal;
            text-decoration:none;
        }
        .bodyContent div img{
            display:inline;
            height:auto;
            max-width:360px;
        }
        #social{
            padding-top:20px;
            padding-right:20px;
            padding-bottom:20px;
            padding-left:20px;
        }
        #social div{
            text-align:center;
        }
        #social div img{
            max-width:560px;
        }
        #templateSidebar{
            background-color:#accb50;
            border-left:0px dotted;
        }
        .sidebarContent div{
            color:#ffffff;
            font-family:Lucida Sans,Lucida;
            font-size:11px;
            line-height:150%;
            text-align:justify;
        }
        .sidebarContent div a:link,.sidebarContent div a:visited,.sidebarContent div a .yshortcuts {
            color:#336699;
            font-weight:normal;
            text-decoration:none;
        }
        .sidebarContent img{
            display:inline;
            height:auto !important;
            margin-bottom:10px !important;
        }
        #templateFooter{
            background-color:#36C0CC;
            border-top:2px solid #111111;
        }
        .footerContent div{
            color:#CCCCCC;
            font-family:Verdana;
            font-size:10px;
            line-height:125%;
            text-align:left;
        }
        .footerContent div a:link,.footerContent div a:visited,.footerContent div a .yshortcuts {
            color:#EEEEEE;
            font-weight:normal;
            text-decoration:underline;
        }
        .footerContent img{
            display:inline;
        }
        #utility{
            background-color:#36C0CC;
            border:0;
        }
        #utility div{
            text-align:center;
        }
        #monkeyRewards img{
            max-width:190px;
        }
        body,#backgroundTable{
            background-color:#ffffff;
        }
        h1,.h1{
            color:#ffffff;
            text-align:left;
            font-family:Lucida Sans,Lucida;
            line-height:110%;
        }
        .footerContent div a:link,.footerContent div a:visited,.footerContent div a .yshortcuts{
            color:#4D4C4C;
        }
        .bodyContent div,#social div{
            font-family:Lucida Sans,Lucida;
            font-size:11px;
            color:#545454;
            line-height:150%;
        }
        #templateContainer,.bodyContent{
            background-color:#E2E2E2;
        }
</style></head>
    <body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0" style="-webkit-text-size-adjust: none;margin: 0;padding: 0;background-color: #ffffff;width: 600 !important;">
        <center>
            <table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable" style="margin: 0;padding: 0;background-color: #ffffff;height: 100% !important;width: 100% !important;">
                <tr>
                    <td align="center" valign="top">
                        <!-- // Begin Template Preheader \\ -->
                        <table border="0" cellpadding="10" cellspacing="0" width="600" id="templatePreheader" style="background-color: #36C0CC;">
                            <tr>
                                <td valign="top" class="preheaderContent">

                                    <!-- // Begin Module: Standard Preheader \ -->
                                    <table border="0" cellpadding="10" cellspacing="0" width="100%">
                                        <tr>
                                            <td valign="top">
                                                <div style="color: #CCCCCC;font-family: Lucida Sans,Lucida;font-size: 10px;line-height: 110%;text-align: left;"><a href="www.scandit.com" target="_blank" style="color: #EEEEEE;font-weight: normal;text-decoration: underline;"><img align="left" alt="" height="57" src="http://gallery.mailchimp.com/3c1958ec76b5e1d93c32cf088/files/scandit_logo_white_wtag2.png" style="width: 147px;height: 57px;float: left;border-width: 0px;border-style: solid;line-height: 100%;outline: none;text-decoration: none;" width="147"></a> </div>
                                            </td>
                                            <!-- *|IFNOT:ARCHIVE_PAGE|* -->
                                            <td valign="top" width="190">
                                                <div style="color: #CCCCCC;font-family: Lucida Sans,Lucida;font-size: 10px;line-height: 110%;text-align: left;">
                                                    Is this email not displaying correctly?<br><a href="*|ARCHIVE|*" target="_blank" style="color: #EEEEEE;font-weight: normal;text-decoration: underline;">View it in your browser</a>.
                                                </div>
                                            </td>
                                            <!-- *|END:IF|* -->
                                        </tr>
                                    </table>
                                    <!-- // End Module: Standard Preheader \ -->

                                </td>
                            </tr>
                        </table>
                        <!-- // End Template Preheader \\ -->
                        <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateContainer" style="background-color: #E2E2E2;">
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Header \\ -->
                                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateHeader" style="background-color: #36C0CC;border-bottom: 0;">
                                        <tr>
                                            <td class="headerContent">
                                                <div style="color: #FFFFFF;font-family: Verdana;font-size: 14px;font-weight: normal;line-height: 100%;padding-top: 20px;padding-right: 20px;padding-bottom: 20px;padding-left: 10px;text-align: left;vertical-align: top;"><span style="font-size:24px;"><strong>&nbsp;Howdy!</strong><br></span></div>
               <div id="_com_1" uage="JavaScript" style="color: #FFFFFF;font-family: Lucida Sans,Lucida;font-size: 14px;line-height: 150%;text-align: justify; padding-left: 20px;">
                Welcome!<br><br>

                <br></div>
                                            </td>
                                        </tr>
                                    </table>
                                    <!-- // End Template Header \\ -->
                                </td>
                            </tr>
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Body \\ -->
                                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateBody" style="border: 0px none #10263F;">
                                        <tr>
                                            <td valign="top">
                                                <table border="0" cellpadding="0" cellspacing="0">
                                                    <tr>
                                                        <td valign="top" class="bodyContent" style="background-color: #E2E2E2;">

                                                            <!-- // Begin Module: Standard Content \\ -->
                                                            <table border="0" cellpadding="20" cellspacing="0" width="100%">
                                                                <tr>
                                                                    <td valign="top">
                                                                        <div style="color: #545454;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;"><div style="text-align: left;color: #545454;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;">
    <div style="color: #545454;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;">
        <div style="color: #545454;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;">
                <strong>Features</strong><br>
                <hr>

                </div>
                <ul>

                </ul>

                &nbsp;</div>

                <hr>
                &nbsp;<br>
                <center><FORM METHOD="LINK" ACTION="https://SAMPLE TEXT SAMPLE TEXT SAMPLE TEXT">
<INPUT TYPE="submit" VALUE="SAMPLE TEXT SAMPLE TEXT SAMPLE TEXT">
</FORM></center>
                &nbsp;<br>
                &nbsp;<br>
                SAMPLE TEXT 
                <br>

                </div>

        </div>
    </div>
</div>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <!-- // End Module: Standard Content \\ -->

                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <!-- // Begin Sidebar \\  -->
                                            <td valign="top" width="300" id="templateSidebar" style="background-color: #accb50;border-left: 0px dotted;">
                                                <table border="0" cellpadding="0" cellspacing="0" width="00">
                                                    <tr>
                                                        <td valign="top" class="sidebarContent" style="padding-bottom:20px;">
                                                            <table border="0" cellpadding="20" cellspacing="0" width="100%">
                                                                <tr>
                                                                    <td valign="top" style="padding-bottom:0;">
                                                                        <div style="color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;"><h4 class="h4" style="color: #0E385F;display: block;font-family: Verdana;font-size: 12px;font-weight: bold;line-height: 100%;margin-top: 0;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;">

<span style="color:#fff0f5;">Getting Started</span></h4>
<hr>
<div style="text-align: left;color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;">
    <strong><span style="font-size:12px;"><span style="color: rgb(255, 240, 245); ">
    <ul>
                <li>Barcode Scanner SDK Documentation
                <ul>
                </ul>
                &nbsp;<br>
                SAMPLE TEXTSAMPLE TEXTSAMPLE TEXT <a href="" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">FAQs</a> or <a href="mailto:SAMPLETEXT.com" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">contact us</a>.<br>

    <h4 style="color: #0E385F;display: block;font-family: Verdana;font-size: 12px;font-weight: bold;line-height: 100%;margin-top: 0;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;">
    <br><br>

    <span style="color:#fff0f5;">Get in Touch</span></h4>
<hr>
SAMPLE TEXT SAMPLE TEXT SAMPLE TEXT<br>
<h4 style="color: #0E385F;display: block;font-family: Verdana;font-size: 12px;font-weight: bold;line-height: 100%;margin-top: 0;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;">
    <br><br>

    <span style="color:#fff0f5;">Connect with us</span></h4>
<hr>
</div>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <!-- // Begin Module: Social Block with Icons \\ -->
                                                            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                                                <tr>
                                                                    <td valign="top" style="padding-left:20px; padding-right:20px;">
                                                                        <table border="0" cellpadding="0" cellspacing="4">
                                                                            <tr mc:hideable="hideable_1" mchideable="hideable_1">
                                                                                <td align="left" valign="middle" width="16">
                                                                                    <img src="http://gallery.mailchimp.com/653153ae841fd11de66ad181a/images/sfs_icon_facebook.png" style="margin: 0 !important;height: auto !important;line-height: 100%;outline: none;text-decoration: none;display: inline;margin-bottom: 10px !important;">
                                                                                </td>
                                                                                <td align="left" valign="top">
                                                                                    <div style="color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;"><div style="text-align: left;color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;">
    <span style="font-size:11px;"><a href="http://www.facebook.com/pages/Scandit/127334280653842" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">Friend us on Facebook</a></span></div>
</div>
                                                                                </td>
                                                                            </tr>
                                                                            <tr mc:hideable="hideable_2" mchideable="hideable_2">
                                                                                <td align="left" valign="middle" width="16">
                                                                                    <img src="http://gallery.mailchimp.com/653153ae841fd11de66ad181a/images/sfs_icon_twitter.png" style="margin: 0 !important;height: auto !important;line-height: 100%;outline: none;text-decoration: none;display: inline;margin-bottom: 10px !important;">
                                                                                </td>
                                                                                <td align="left" valign="top">
                                                                                    <div style="color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;"><a href="http://www.twitter.com/scandit" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">Follow us on Twitter</a> </div>
                                                                                </td>
                                                                            </tr>
                                                                            <tr mc:hideable="hideable_3" mchideable="hideable_3">
                                                                                <td align="left" valign="middle" width="16">
                                                                                    <img src="http://gallery.mailchimp.com/27aac8a65e64c994c4416d6b8/images/sfs_icon_rss.1.png" style="margin: 0 !important;height: auto !important;line-height: 100%;outline: none;text-decoration: none;display: inline;margin-bottom: 10px !important;">
                                                                                </td>
                                                                                <td align="left" valign="top">
                                                                                    <div style="color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;"><a href="http://www.scandit.com/blog" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">Read our blog</a> </div>
                                                                                </td>
                                                                            </tr>
                                                                            <tr mc:hideable="hideable_4" mchideable="hideable_4">
                                                                                <td align="left" valign="middle" width="16">
                                                                                    <img src="http://gallery.mailchimp.com/653153ae841fd11de66ad181a/images/sfs_icon_forward.png" style="margin: 0 !important;height: auto !important;line-height: 100%;outline: none;text-decoration: none;display: inline;margin-bottom: 10px !important;">
                                                                                </td>
                                                                                <td align="left" valign="top">
                                                                                    <div style="color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: justify;"><div style="text-align: left;color: #ffffff;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;">
    <a href="*|FORWARD|*" style="color: #336699;font-weight: normal;text-decoration: none;">Sign up for our newsletter</a></div>
</div>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <!-- // End Module: Social Block with Icons \\ -->

                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <!-- // End Sidebar \\ -->
                                        </tr>
                                        <tr>
                                            <td colspan="2" valign="middle" id="social" style="padding-top: 20px;padding-right: 20px;padding-bottom: 20px;padding-left: 20px;">
                                                <div style="color: #545454;font-family: Lucida Sans,Lucida;font-size: 11px;line-height: 150%;text-align: center;"><a href="" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">follow on Twitter</a> | <a href="" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">friend on Facebook</a> | <a href="http://www.scandit.com/blog/" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">read our blog</a> | <a href="*|FORWARD|*" style="color: #336699;font-weight: normal;text-decoration: none;">forward to a friend</a>&nbsp; </div>
                                                <center><em>SAMPLE TEXTSAMPLE  <a href="" target="_blank" style="color: #336699;font-weight: normal;text-decoration: none;">SAMPLE TEXT</a>.</em></center>
                                            </td>
                                        </tr>
                                    </table>
                                    <!-- // End Template Body \\ -->
                                </td>
                            </tr>
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Footer \\ -->
                                    <table border="0" cellpadding="10" cellspacing="0" width="600" id="templateFooter" style="background-color: #36C0CC;border-top: 2px solid #111111;">
                                        <tr>
                                            <td valign="top" class="footerContent">

                                                <!-- // Begin Module: Standard Footer \\ -->
                                                <table border="0" cellpadding="10" cellspacing="0" width="100%">
                                                    <tr>
                                                        <td valign="top" width="350">
                                                            <div style="color: #CCCCCC;font-family: Verdana;font-size: 10px;line-height: 125%;text-align: left;">
                                                                <em>Copyright &copy; *|CURRENT_YEAR|* *|LIST:COMPANY|*, All rights reserved.</em>
                                                                <br>
                                                                *|IFNOT:ARCHIVE_PAGE|*
                                                                *|LIST:DESCRIPTION|*
                                                                <br>
                                                                <strong>Our mailing address is:</strong>
                                                                <br>
                                                                *|HTML:LIST_ADDRESS_HTML|*
                                                                <br>
                                                                *|END:IF|*
                                                            </div>
                                                        </td>
                                                        <td valign="top" width="190" id="monkeyRewards">
                                                            <div style="color: #CCCCCC;font-family: Verdana;font-size: 10px;line-height: 125%;text-align: left;">
                                                                *|IF:REWARDS|* *|HTML:REWARDS|* *|END:IF|*
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2" valign="middle" id="utility" style="background-color: #36C0CC;border: 0;">
                                                            <div style="color: #CCCCCC;font-family: Verdana;font-size: 10px;line-height: 125%;text-align: center;">
                                                                &nbsp; <a href="*|ARCHIVE|*" style="color: #4D4C4C;font-weight: normal;text-decoration: underline;">view email in browser</a>*|END:IF|*&nbsp;
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <!-- // End Module: Standard Footer \\ -->

                                            </td>
                                        </tr>
                                    </table>
                                    <!-- // End Template Footer \\ -->
                                </td>
                            </tr>
                        </table>
                        <br>
                    </td>
                </tr>
            </table>
        </center>
    </body>
</html>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-12T02:04:24.717

电子邮件的最佳做法是使用基于表格的布局和内联样式。如果您使用 MailChimp 的模板系统来构建此电子邮件，您定义的 CSS 样式将在发送时自动嵌入。但是，您仍然应该使用基于表格的布局。

例子：

```
<table width="600" cellpadding="0" cellspacing="0">
    <tr>
        <td style="background: #36C0CC" colspan="2">Blue Section</td>
    </tr>
    <tr>
        <td style="background: gray">Gray Section</td>
        <td style="background: #accb50">Green Section</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-24T17:46:43.093

您可以使用[Outlook 条件标记](https://gist.github.com/elidickinson/5525752)来模仿它。您只需将应用最大宽度的 div 夹在中间。用它。

```
<!--[if mso]>
 <center>
 <table><tr><td width="580">
<![endif]-->

 <div style="max-width:580px; margin:0 auto;">

 <p>This text will be centered and constrained to 580 pixels even on Outlook which does not support max-width CSS</p>

 </div>
<!--[if mso]>
 </td></tr></table>
 </center>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T08:05:26.880

我想你已经忘记了`px`600后

```
 body{
       width:600 !important;
        } 
```

所以它应该有效

```
 body{
            width:600px !important;
        } 
```

而且再设置身体也不好，你做了两次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-16T17:29:29.857

试试这个最大宽度流体示例。它结合使用了 max-width、Outlook 条件和 Outlook '11 的媒体查询（基于 webkit 并且不能以 Outlook 条件为目标）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title></title>
  <style type="text/css">
    /* Client-specific Styles - last updated 18 Feb 2014 */
    #outlook a {padding:0;}
    body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;} /* force default font sizes */
    .ExternalClass {width:100%;} .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Hotmail */
    a:active, a:visited, a[href^="tel"], a[href^="sms"] { text-decoration: none; color: #005288 !important; pointer-events: auto; cursor: default;}
    .link1 a, .link1 a:active, .link1 a:visited {color: #005288 !important; text-decoration: none;}
    .link2 a, .link2 a:active, .link2 a:visited {color: #FFFFFE !important; text-decoration: none;}
    table td {border-collapse: collapse;}
    @media only screen and (min-width: 600px) { .maxW { width:600px !important; } }
  </style>
</head>
<body style="margin: 0px; padding: 0px; -webkit-text-size-adjust:none; -ms-text-size-adjust:none;" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" bgcolor="#FFFFFF"><table bgcolor="#252525" width="100%" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td valign="top">
<!--[if (gte mso 9)|(IE)]>
<table width="600" align="center" cellpadding="0" cellspacing="0" border="0"><tr><td valign="top">
<![endif]-->
<table width="100%" class="maxW" style="max-width: 600px; margin: auto;" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td valign="top" align="center" style="padding-top:30px; padding-bottom:30px;">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF" style="margin: auto;">
  <tr>
    <td align="left" style="padding:30px;">
      Content
    </td>
  </tr>
</table>

</td></tr></table>
<!--[if (gte mso 9)|(IE)]>
</td></tr></table>
<![endif]-->
</td></tr></table></body></html> 
```

# android - 在Activity中启动一个服务来监控未接来电

> ID：13153540
> 
> 赞同：1
> 
> 时间：2012-10-31T08:01:24.863
> 
> 标签：android

我正在尝试执行程序来监控未接来电。我在 Activity 中启动一个服务，并在服务中使用 BroadcastReceiver 来监控未接来电。Activity销毁后如何继续监听未接来电？现在我想通过一个背景来实现这一点。谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:08:49.170

这是一个关于 android 服务的非常好的教程：

[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

据此，即使您的应用程序处于后台或已关闭，您的服务将继续在后台工作，直到它被明确停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:47:21.170

除非您明确停止服务，否则服务始终在后台运行...这是一个很好的教程，可以帮助您入门：

[http://mindtherobot.com/blog/37/android-architecture-tutorial-developing-an-app-with-a-background-service-using-ipc/](http://mindtherobot.com/blog/37/android-architecture-tutorial-developing-an-app-with-a-background-service-using-ipc/)

# jax-ws - 我们如何将 JAX-WS 和 JAX-RS 结合在一起？

> ID：13153543
> 
> 赞同：2
> 
> 时间：2012-10-31T08:01:37.427
> 
> 标签：jax-ws, jax-rs

Apache CFX 可以完成这项任务。但我想在没有任何弹簧依赖的情况下将它结合起来。提前谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T10:31:52.090

JAX-WS 和 JAX-RS 都是[Java EE 6](http://www.oracle.com/technetwork/java/javaee/tech/index.html)的一部分。因此，您可以构建一个应用程序，它可以在不使用 Spring 的情况下同时导出 JAX-WS 和 JAX-RS 接口。有关介绍，请参阅[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnayk.html)。

**注意：** JAX-WS 和 JAX-RS 实现*了非常*不同的概念。虽然 JAX-WS 基本上是 SOAP，但 JAX-RS 是 REST 概念的实现。就 API 而言，我建议*不要混合这两个概念。*[SOAP](https://stackoverflow.com/tags/soap/info)是关于方法调用的，而[REST](https://stackoverflow.com/tags/rest/info)是关于资源和表示的。

# php - 阿拉伯语网站上的空间变成大写“i”

> ID：13153545
> 
> 赞同：1
> 
> 时间：2012-10-31T08:01:48.550
> 
> 标签：php, html, css

我正在使用 PHP 构建一个阿拉伯语网站。这可能是一个编码错误，但由于某种原因，阿拉伯语中的空格变成了大写的“i”。我在网站的主 CSS 中包含了[UTF-8 编码，但错误仍然存​​在。](http://en.wikipedia.org/wiki/UTF-8)

注意：这仅在 Windows 操作系统上使用 Chrome 时发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:06:26.953

经过深入研究，这似乎不是字符集问题。我改变了一些 CSS 标签中的字体，“i”出现在一些字体中，而在另一些字体中消失了。所以，我选择了一个有效的。感谢大家的帮助。

# php - 基于位置的通配符重定向

> ID：13153546
> 
> 赞同：0
> 
> 时间：2012-10-31T08:01:48.957
> 
> 标签：php, wordpress, redirect, geolocation, location

如何设置具有两个不同区域的基于位置的通配符重定向？特别专注于 PHP/LAMP 设置，具有多个 Wordpress 站点。

所以有两个域：

```
http://website.com/ --- Serves Australia
http://website.com/international/ --- Serves Everywhere Else 
```

[http://website.com](http://website.com/international)上的所有页面也存在于[http://website.com/international](http://website.com)上，因此：

```
http://website.com/about-page/
http://website.com/international/about-page/ 
```

这样当美国的用户访问[http://website.com/about-page/](http://website.com/about-page/)时，他们会被重定向到[http://website.com/international/about-page/](http://website.com/international/about-page/)

任何想法/建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:42:50.990

如果您能够安装库（或者如果您已经安装了它，您可能不需要它）我鼓励您使用[GeoIP](http://php.net/manual/es/book.geoip.php)（您可以找到它作为[PECL 扩展](http://pecl.php.net/package/geoip)）。这是查询用户所在国家的最快、最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:25:09.680

我相信您需要读取用户的IP地址并将其映射到国家。

欲了解更多信息，请参阅：

[http://www.phptutorial.info/iptocountry/the_script.html](http://www.phptutorial.info/iptocountry/the_script.html)

# php - cURL 请求中的错误：名称查找超时

> ID：13153557
> 
> 赞同：14
> 
> 时间：2012-10-31T08:02:26.210
> 
> 标签：php, zend-framework, curl, dns, zend-http-client

我编写了一些代码来填写登录表单并通过 post 方法提交。喜欢：

```
 $config = array(
        'adapter' => 'Zend_Http_Client_Adapter_Curl',
    );      

    $this->siteObj = new Zend_Http_Client('http://example.com', $config);
    $this->siteObj->setCookieJar();
    $this->siteObj->setUri('http://example.com/login');
    $this->siteObj->setParameterPost( 'data[User][name]', 'user' );
    $this->siteObj->setParameterPost( 'data[User][password]', 'password' );
    $response = $this->siteObj->request('POST'); 
```

它工作正常，但有时会发生此错误：

```
Error in cURL request: name lookup timed out

Error: An Internal Error Has Occurred. 
```

有什么问题？我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-13T08:42:39.583

我遇到了同样的问题：

*   从外壳， curl 工作。
*   在 shell 中，PHP 脚本起作用了。
*   PHP 无法 ping 该网站。
*   DNS 配置是正确的。

重新启动 Apache 后，它工作了。这么奇怪。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T12:34:58.947

It can be a **timeout** problem. Try adjusting the connection timeout:

```
$config = array(
  'adapter' => 'Zend_Http_Client_Adapter_Curl',
  'timeout' => 100
); 
```

you can also set single **curl** options:

```
$config = array(
    'adapter'   => 'Zend_Http_Client_Adapter_Curl',
    'curloptions' => array(
        CURLOPT_USERAGENT      => 'Zend_Curl_Adapter',
        CURLOPT_HEADER         => 0,
        CURLOPT_VERBOSE        => 0,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_TIMEOUT        => 10,
        CURLOPT_SSL_VERIFYPEER => false,
    ),
); 
```

If you find out that it is a timeout issue, I would not suggest to increase too much the timeout parameter, but rather to make a **for** loop with a number of retries.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T08:12:37.120

这意味着您的 DNS 服务器未能及时返回响应。检查您的 DNS 配置（例如 Linux 上的 /etc/resolv.conf），并确保它们处于活动状态且正常运行。还尝试从同一服务器 ping URL 中的主机，以了解问题是仅在 PHP 中还是在服务器上运行的任何应用程序（更有可能）。

# magento - Magento - 发送关于状态未付款的订单电子邮件

> ID：13153558
> 
> 赞同：1
> 
> 时间：2012-10-31T08:02:32.683
> 
> 标签：magento, sendmail

有人知道未支付订单时如何在magento中触发订单电子邮件吗？我有一个支付提供商（multisafepay），他们在结账后的第一步创建了状态为未付款的订单。此时订单电子邮件未发送。仅在此之后的步骤中发送订单电子邮件（已付款状态）

问题是有时人们走到第一步，然后认为嘿我需要更多或没有钱并返回站点，订单已创建但未发送任何通知。对于很多商品，我们只有 1 件库存，因此他们无法再次订购。

谢谢

# tsql - T-SQL 按空格排序

> ID：13153569
> 
> 赞同：0
> 
> 时间：2012-10-31T08:03:49.417
> 
> 标签：tsql, sql-order-by, whitespace

我想问你这个简单的 ORDER BY (in T-SQL) 子句。假设我们在一个表中有这些 varchars。（表有ID、名称、其他列）

```
'Peter'
''
''
'Anna'
'Michael'
'Bert'
''
''
'' 
```

目标是按升序对它们进行排序，但这样空格将跟随而不是继续这些名称。（我知道这听起来有点不合逻辑，但我需要所有数据行 - 包括空格 - 该表实际上有更多列，我无法更改任何内容）。当然，这些字符的代码在字母表之前，但是如何欺骗它来产生这个输出呢？

`SELECT name FROM table ORDER BY name`

```
'Anna'
'Bert'
'Michael'
'Peter'
''
''
''
''
'' 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:06:28.200

您可以[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)使用`ORDER BY`：

```
SELECT 
   name 
FROM 
   dbo.table 
ORDER BY 
   CASE WHEN name IS NULL OR name='' THEN 1 ELSE 0 END ASC
 , name ASC 
```

该查询首先将全部分成两组：

1.  有名字
2.  没有名字

然后它将首先按第一组排序，然后按名称本身。然后它将附加没有名称的组。

# java - 以矩阵形式显示我的输出

> ID：13153571
> 
> 赞同：0
> 
> 时间：2012-10-31T08:03:52.763
> 
> 标签：java, netbeans

![我的应用程序序列对齐](../Images/71250776d55bdd932835cc06eb161023.png)

以上是我的应用程序的图像。我正在构建一个应用程序来对齐两个字符串。将比较两个字符串并填充一个二维数组。二维数组的值将是矩阵的值。所有工作得很好，我唯一可能遇到的问题是，当它打印矩阵的值时，我希望它以矩阵格式打印，如下例所示，而不是输出“0000000011011000002100013”，我希望它显示为这样

```
 0 0 0 0 0
   0 0 1 0 0
   0 0 1 0 0
   0 1 0 2 1
   0 1 0 1 3 
```

打印出来时，它必须查看打印的字符数是否等于我的行大小，然后移动到下一行并继续打印，直到显示所有矩阵值。以下是我的代码片段。提前谢谢

我的计算矩阵按钮的代码

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)        {                                         
   match_reward = Integer.parseInt (match_tf.getText());
   mismatch_penalty =Integer.parseInt (mismatch_tf.getText());
   gap_cost=Integer.parseInt(gap_tf.getText());
   build_matrix();
   collumn_tf.setText(String.valueOf(max_col));
   row_tf.setText(String.valueOf(max_row));
   highest_score_tf.setText(String.valueOf(max_score));
  StringBuilder sb = new StringBuilder();
  for (int i =0; i < rows; i++) {
   for (int j = 0; j < cols; j++) {

          sb.append(String.valueOf(matrix[i][j]));
    sb.append(' ');
    }
}
 matrix_tf.setText(sb.toString());
} 
```

构建我的矩阵的代码

```
 private void build_matrix() {
    String seq1 = sequence1_tf.getText();
    String seq2 = sequence2_tf.getText();

    int r, c, ins, sub, del;

    rows = seq1.length();
    cols = seq2.length();

    matrix = new int [rows][cols];

    // initiate first row
    for (c = 0; c < cols; c++)
        matrix[0][c] = 0;

    // keep track of the maximum score
    max_row = max_col = max_score = 0;

    // calculates the similarity matrix (row-wise)
    for (r = 1; r < rows; r++)
    {
        // initiate first column
        matrix[r][0] = 0;

        for (c = 1; c < cols; c++)
        {
                        sub = matrix[r-1][c-1] +     scoreSubstitution(seq1.charAt(r),seq2.charAt(c));
                        ins = matrix[r][c-1] + scoreInsertion(seq2.charAt(c));
                        del = matrix[r-1][c] + scoreDeletion(seq1.charAt(r));

            // choose the greatest
            matrix[r][c] = max (ins, sub, del, 0);

            if (matrix[r][c] > max_score)
            {
                // keep track of the maximum score
                max_score = matrix[r][c];
                max_row = r; max_col = c;

            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:06:45.993

只需`\n`在内循环后添加一个换行符：

```
for (int i =0; i < rows; i++) {
    for (int j = 0; j < cols; j++) {
        sb.append(String.valueOf(matrix[i][j]));
        sb.append(' ');
    }
    sb.append('\n');
} 
```

# magento - Magento 升级到 1.7

> ID：13153573
> 
> 赞同：0
> 
> 时间：2012-10-31T08:04:34.480
> 
> 标签：magento

在尝试使用 magento connect 升级 magento 时，升级前端和后端后显示此错误。

> 致命错误：在第 23 行的 /var/www/vhosts/dressfromeurope.com/avmmaxx/includes/src/Mage_Core_Model_Resource_Setup.php 中找不到类“Mage_Sales_Model_Resource_Setup”有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:10:19.507

似乎编译器已打开，将其关闭（也缓存）并重试。

如果成功，再次运行编译过程并启用编译和缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:44:02.377

您是否在 magento 中对核心文件进行了一些更改。
因为如果在 magento 的核心文件中进行了一些修改，则会在升级时引起问题。

# wordpress - WORDPRESS：如何删除 post_format 库的单个帖子页面上的某些内容？

> ID：13153575
> 
> 赞同：1
> 
> 时间：2012-10-31T08:04:37.747
> 
> 标签：wordpress, loops, format, gallery, standards

首先，我从头开始创建了自己的主题。我昨天一整天都在想办法解决这个问题。最终使用了几个二十一和二十一的文件来完成这个。然后删除它们，因为没有成功。我要做的就是删除出现在我的单个帖子页面底部的某些文本，例如“归档于”和“发布者”。我希望标准单篇文章页面具有元数据，而画廊单篇文章页面没有元数据。

我尝试使用 loop.php、loop-single.php、loop-gallery.php、content.php 方法，但没有什么对我有用。我在哪里可以开始让这两种不同的帖子格式在它们的单个页面上以不同的方式显示？有什么我需要添加到我的 functions.php 文件中才能使其工作的吗？我需要重新创建循环文件吗？请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:10:01.843

如果“画廊”是一个类别，您可以编辑您的`single.php`模板并使用**[`is_category()`](http://codex.wordpress.org/Function_Reference/is_category)**：

```
<?php if ( in_category('gallery') ) : ?>
    <!-- Single post style for gallery posts -->
<?php else: ?>
    <!-- Normal single post style -->
<?php endif; ?> 
```

如果它是自定义帖子类型，您可以在条件中使用**[`get_post_type()`](http://codex.wordpress.org/Function_Reference/get_post_type)**并`single.php`使用其结果，例如

```
<?php 
$post_type = get_post_type( $post->ID ); 

if ( $post_type == 'gallery' ): ?>
    <!-- Single post style for gallery posts -->
<?php else: ?>
    <!-- Normal single post style -->
<?php endif; ?> 
```

如果是帖子格式，请使用**[`get_post_format()`](http://codex.wordpress.org/Function_Reference/get_post_format)**，例如

```
<?php 
$post_format = get_post_format( $post->ID ); 

if ( $post_format == 'gallery' ): ?>
    <!-- Single post style for gallery posts -->
<?php else: ?>
    <!-- Normal single post style -->
<?php endif; ?> 
```

# c# - 使用绑定数据集中的值设置 Gridview 行背景颜色

> ID：13153579
> 
> 赞同：5
> 
> 时间：2012-10-31T08:05:08.657
> 
> 标签：c#, asp.net, gridview, datatable

我有一个包含 Column 的 GridView`ID`

我有一个包含两列的 DataTable

```
ID
DONE 
```

我正在`ID`将 DataTable 中的列绑定到 GridView。直到没有它的罚款。

`DONE`但现在我需要根据DataTable 中的列值设置 GridView 行的背景颜色。（如果`DONE`值是`true`必须更改行背景颜色。）

`DONE`在不将Row 绑定到 GridView的情况下如何实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T08:09:43.500

为您的 GridView创建`GridView1_RowDataBound`事件。

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    //Check your condition here
    //Get Id from here and based on Id check value in the 
    //underlying dataSource Row where you have "DONE" column value
    // e.g.
    // (gridview.DataSource as DataTable), now you can find your row and cell 
    // of "Done"
    If(Condition True)
    {
        e.Row.BackColor = Drawing.Color.Red;  // your color settings 
    }
} 
```

示例代码片段：

```
protected void EmployeeAvailabilityGridView_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            try
            {
               if (e.Row.RowType == DataControlRowType.DataRow)
                {                  
                    if(Convert.ToBoolean(DataBinder.Eval(e.Row.DataItem, "DONE")))
                    {
                        e.Row.BackColor = System.Drawing.Color.LightPink;
                    }
                }
            }
            catch (Exception ex)
            {
                //ErrorLabel.Text = ex.Message;
            }
        } 
```

有关更详细的实现，请参阅以下链接：
[根据条件更改 GridView 行颜色](https://stackoverflow.com/questions/5048762/change-gridview-row-color-based-on-condition-in-c-sharp)

**注意**：如果 DataSource 中不存在该行，那么您必须有一些逻辑才能从其他地方获取该行。可能是您`ID`在另一个表中作为外键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T04:17:11.787

此链接可能对您有所帮助

[http://deepak-sharma.net/2012/01/27/how-to-change-the-background-color-of-rows-in-a-gridview-based-on-the-value-of-a-列在-asp-net-3-5/](http://deepak-sharma.net/2012/01/27/how-to-change-the-background-color-of-rows-in-a-gridview-based-on-the-value-of-a-column-in-asp-net-3-5/)

```
if (e.Row.RowType == DataControlRowType.DataRow)
    {
            // determine the value of the UnitsInStock field
            if((DataBinder.Eval(e.Row.DataItem,"strShift")).ToString() =="Alarm")
            {
                    // color the background of the row yellow
                    e.Row.BackColor = Color.Yellow;
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:11:51.893

为您的 GridView 创建 MyGridView _RowDataBound 事件。

```
if (e.Row.RowType = DataControlRowType.DataRow)
{
    //Check your condition here, Cells[1] for ex. is DONE/Not Done column 
    If(e.Row.Cells[1].Text == "DONE")
    {
        e.Row.BackColor = Drawing.Color.Green // This will make row back color green
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:03:50.317

我也解决了我的情况。但是对于替代行类型，没有设置背景颜色。

```
 if (e.Row.RowType == DataControlRowType.DataRow)
        {
          Label LabelStatus = (Label)e.Row.FindControl("lblStatus");
            if(LabelStatus.Text.Trim().ToLower().Equals("inactive"))
            {
                e.Row.BackColor = System.Drawing.Color.Gray;
            }                   

        } 
```

你能告诉我可能是什么原因吗？

# objective-c - 翻译 UIDatePicker

> ID：13153583
> 
> 赞同：0
> 
> 时间：2012-10-31T08:05:38.180
> 
> 标签：objective-c, ios5, uidatepicker

我想翻译 UIDatePicker。我用它来表示日期和时间，现在是天、小时、分钟

![输入图片描述她](../Images/dd440035ac2e1370982cec2ff9019691.png)

例如，我想将 -> Fri Oct 26 翻译成我的语言。

我找不到如何做到这一点。也许有人可以帮助我

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:52:35.373

本地化取决于 iPhone 区域格式设置（在模拟器或设备中设置）。看看这些答案：

[我可以本地化 UIDatePicker 吗？](https://stackoverflow.com/questions/1151335/can-i-localize-a-uidatepicker)

[UIDatePicker - 问题本地化](https://stackoverflow.com/questions/2894161/uidatepicker-problem-localizing)

[iphone uidatepicker 本地化](https://stackoverflow.com/questions/5165859/iphone-uidatepicker-localization)

# c - _mm_shuffle_ps() 等价于整数向量 (__m128i)？

> ID：13153584
> 
> 赞同：8
> 
> 时间：2012-10-31T08:05:43.200
> 
> 标签：c, sse

内在函数允许将`_mm_shuffle_ps()`浮点输入交错为输出的低 2 个浮点数和高 2 个浮点数。

例如：

```
R = _mm_shuffle_ps(L1, H1, _MM_SHUFFLE(3,2,3,2)) 
```

将导致：

```
R[0] = L1[2];
R[1] = L1[3];
R[2] = H1[2];
R[3] = H1[3] 
```

我想知道整数数据类型是否有类似的内在函数可用？需要两个`__m128i`变量和一个掩码进行交错的东西？

`_mm_shuffle_epi32()`内在函数只需要一个 128 位向量而不是两个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T08:18:47.667

Nope, there is no integer equivalent to this. So you have to either emulate it, or cheat.

One method is to use `_mm_shuffle_epi32()` on `A` and `B`. Then mask out the desired terms and OR them back together.

That tends to be messy and has around 5 instructions. (Or 3 if you use the SSE4.1 blend instructions.)

Here's the SSE4.1 solution with 3 instructions:

```
__m128i A = _mm_set_epi32(13,12,11,10);
__m128i B = _mm_set_epi32(23,22,21,20);

A = _mm_shuffle_epi32(A,2*1 + 3*4 + 2*16 + 3*64);
B = _mm_shuffle_epi32(B,2*1 + 3*4 + 2*16 + 3*64);

__m128i C = _mm_blend_epi16(A,B,0xf0); 
```

* * *

The method that I prefer is to actually cheat - and floating-point shuffle like this:

```
__m128i Ai,Bi,Ci;
__m128  Af,Bf,Cf;

Af = _mm_castsi128_ps(Ai);
Bf = _mm_castsi128_ps(Bi);
Cf = _mm_shuffle_ps(Af,Bf,_MM_SHUFFLE(3,2,3,2));
Ci = _mm_castps_si128(Cf); 
```

What this does is to convert the datatype to floating-point so that it can use the float-shuffle. Then convert it back.

Note that these "conversions" are bitwise conversions (aka reinterpretations). No conversion is actually done and they don't map to any instructions. In the assembly, there is no distinction between an integer or a floating-point SSE register. These cast intrinsics are just to get around the type-safety imposed by C/C++.

However, be aware that this approach incurs extra latency for moving data back-and-forth between the integer and floating-point SIMD execution units. So it will be more expensive than just the shuffle instruction.

# jquery - jquery获取href值新选择的类

> ID：13153586
> 
> 赞同：1
> 
> 时间：2012-10-31T08:05:54.160
> 
> 标签：jquery, html, css

嗨，我有一个 html 片段如下：-

```
<ul id="userTabs" class="clearfix">

                <li class="selected"><a href="">Profile Home</a></li>

                <li><a href="/test">test</a></li>

                <li><a href="/test2">test2</a></li>

                <li><a href="/test3">test3</a></li>

                <li><a href="/test4">test4</a></li>

    </ul> 
```

我的 jquery 代码片段是-

```
$("#userTabs li").click(function(e){
  e.preventDefault();
  $("#userTabs li").removeClass('selected');
  $(this).addClass('selected');
  var href = $('li:selected a').attr('href');
  alert(href);

}); 
```

现在的问题是，当我单击链接时，我需要获取一个值 o href，上面的代码会将当前选定的类替换为新的选定链接。但我无法获取选定的类 href 值。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:08:29.083

问题是您在这一行使用了 a`:`而不是 a `.`：

```
var href = $('li:selected a').attr('href');
//              ^-- This should be a . since `selected` is a class name 
```

但是您可以只使用对 的引用来`li`获取其子`a`元素，而不是再次遍历整个 DOM：

```
var href = $(this).children("a").attr("href"); 
```

更好的是，您可以将事件处理程序委托给`ul`效率更高的元素（只有一个事件处理程序，而不是每个`li`元素一个）：

```
var tabs = $("#userTabs");
tabs.on("click", "li", function (e) {
    e.preventDefault();
    tabs.children(".selected").removeClass("selected");
    var href = $(this).addClass("selected").children("a").attr("href");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T08:08:51.700

请尝试此代码：

```
$("#userTabs li").click(function(e){
  e.preventDefault();
  $("#userTabs li").removeClass('selected');
  $(this).addClass('selected');
  var href = $(this).children('a').attr('href');
  alert(href);

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T08:13:11.590

试试这个：

```
var href = $("li.selected a").attr("href"); 
```

或者

```
$("#userTabs li a").click(function(e){
e.preventDefault();
   $("#userTabs li").removeClass("selected");
   $(this).parent().addClass("selected");
   var href = $("li.selected a").attr("href");
   alert(href);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:11:15.123

尝试拉取 href 时，您的选择器是错误的，经过测试并且可以按此[jsFiddle所示工作](http://jsfiddle.net/k5EGH/)

```
$("#userTabs li").click(function(e){
  e.preventDefault();
  $("#userTabs li").removeClass('selected');
  $(this).addClass('selected');
  var href = $(this).find('a').attr('href');
  alert(href);

});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T08:14:13.863

我希望这对你有帮助。使用这个jquery，使用错过的孩子`a`

```
$("#userTabs li a").click(function(e){
e.preventDefault();
$("#userTabs li").removeClass('selected');
$(this).addClass('selected');
var href = $(this).attr('href');
alert(href);
}); 
```

演示：[小提琴](http://jsfiddle.net/zFk6j/)

# java - Hibernate 多对多条件连接

> ID：13153592
> 
> 赞同：4
> 
> 时间：2012-10-31T08:06:09.067
> 
> 标签：java, sql, hibernate, many-to-many, hql

```
+-------+    +--------------|     +-------+
| BOY   |    | BOY_GIRL     |     | GIRL  | 
+-------+    +--------------|     +-------+
| id    |    | id           |     | id    |
| name  |    | boy_id       |     | name  |
| birth |    | girl_id      |     | birth |
+-------+    | start_dating |     +-------+
             +--------------| 
```

`START_DATING`是类型`TIMESTAMP`或`DATE`

我有两个豆子男孩和女孩具有多对多关系

```
@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "BOY_GIRL", joinColumns = {@JoinColumn(name = "BOY_ID")}, inverseJoinColumns = {@JoinColumn(name = "GIRL_ID")})
public Set<Girl> getGirls() {
    return girls;
} 
```

现在，如果我想获得有条件的女孩名单，我该如何使用 HQL 进行选择查询：

```
where boy_id = (some_boy_id) and START_DATING > (some_timestamp) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:06:37.133

我认为您的实体模型不正确，您需要表示关系属性的第三个实体，并且您应该将 Boy 和 Girl 尽可能多地映射到该实体。否则，无法将关系属性（在您的情况下为starting_date）指定为查询中的条件。查看[此链接](http://en.wikibooks.org/wiki/Java_Persistence/ManyToMany#Additional_columns_in_join_table.)，您可以找到有关如何使用附加属性映射连接表的详细说明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T09:11:24.357

我认为您必须创建一个`BoyGirl`类，因为 table`BOY_GIRL`不是简单的多对多表（如果是，那么列必须是`boy_id`and `girl_id`）。所以你应该做的是创建`BoyGirl`类，然后映射`BOY`到`BOY_GIRL`一对多，也映射`GIRL`到`BOY_GIRL`一对多

**表关系**

```
+-------+               +--------------+               +-------+
| BOY   |               | BOY_GIRL     |               | GIRL  | 
+-------+               +--------------|               +-------+
| id    | 0..* --- 1..1 | id           | 1..1 --- 0..* | id    |
| name  |               | boy_id       |               | name  |
| birth |               | girl_id      |               | birth |
+-------+               | start_dating |               +-------+
                        +--------------+ 
```

**类**

```
public class BoyGirl {
  private long id;
  private Boy boy;
  private Girl girl;
  private Date startDating;
}

public class Boy {
  //other attributes omitted
  private Set<BoyGirl> boyGirls;
}

public class Girl {
  //other attributes omitted
  private Set<BoyGirl> boyGirls;
} 
```

**您需要的选择查询**

```
// I'm using criteria here, but it will have the same result as your HQL

public List getGirls(Boy boy, Date startDating) {
  Criteria c = sessionFactory.getCurrentSession().createCriteria(BoyGirl.class);
  c.add(Restrictions.eq("boy.id", boy.getId());
  c.add(Restrictions.lt("startDating", startDating);

  List<BoyGirl> boyGirls = (List<BoyGirl>) c.list();
  // at this point you have lazily fetch girl attributes
  // if you need the girl  attributes to be initialized uncomment line below
  // for (BoyGirl boyGirl : boyGirls) Hibernate.initialize(boyGirl.getGirl());

  return boyGirls;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:13:09.020

由于中间表`BOY_GIRL`有一些附加属性 ( `start_dating`)，您需要在域模型中为其创建另一个中间实体，例如：

```
@Table(name="BOY_GIRL")
class Relationship {

  @Id
  long id;

  @ManyToOne
  Boy boy;

  @ManyToOne;
  Girl girl;

  @Column
  Date startDating;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:19:58.847

我认为将约会信息直接保存在连接表中并不好（因为这样做的目的应该只是关联一个男孩和一个女孩）。

但是，如果您真的想保留当前结构并使用 HQL 解决它，您应该能够执行类似的操作

```
SELECT g FROM GIRL g, BOY_GIRL bg 
WHERE bg.start_dating = :revelantdate 
    AND bg.boy_id = :boyid
    AND g.id = bg.girl_id 
```

# android - Android中处理ImageView图片

> ID：13153594
> 
> 赞同：1
> 
> 时间：2012-10-31T08:06:15.750
> 
> 标签：android, imageview, image

我对 Android 中 ImageView 中的图片有疑问。

我的问题是，我想在 ImageView 中显示的图片对于我的智能手机屏幕来说似乎太大了。因此它不在我在 xml 中设置的位置...

这是一张你知道我的意思的图片：[http](http://www10.pic-upload.de/31.10.12/iuebxzkvr3e.png) ://www10.pic-upload.de/31.10.12/iuebxzkvr3e.png 灰色区域是我的横幅，它应该位于我的活动之上......如果我缩放图片，它应该可以工作（越小，越高直到它适合），但我认为其他分辨率不同的智能手机应该再次与我的应用程序有同样的问题..

这是我的 XML：

```
<ImageView android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:id="@+id/ivBanner"
               android:src="@drawable/banner"/> 
```

没什么特别的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:19:04.427

you can set scaleType for ImageView to fitXY, or centerCrop

```
android:scaleType = "fitXY" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:22:30.447

在您的布局中，您应该将其高度和宽度设置为绝对 dp 值：

这是一个 px 到 dp 的转换器：

[http://labs.skinkers.com/content/android_dp_px_calculator/](http://labs.skinkers.com/content/android_dp_px_calculator/)

这解决了我的问题，对于每个屏幕尺寸，您需要不同的值（hdpi/xhdpi）。

# perl - 使用数组名称和对数组的引用来反转数组

> ID：13153608
> 
> 赞同：3
> 
> 时间：2012-10-31T08:07:27.253
> 
> 标签：perl

我已经声明了一个数组，以及对该数组的引用，如下所示：-

```
my @array = (1, 2, 3, 4);
my $aref = \@array; 
```

现在，我正在尝试使用数组名称和引用名称来反转数组。

```
print reverse @array, "\n";
print reverse @{$aref}, "\n"; 
```

这工作正常，并在两种情况下打印反转数组： -

```
4321
4321 
```

但是，如果我尝试在同一行打印反向，它会给我一个奇怪的结果：-

```
print reverse @array, reverse @{$aref}, "\n"; 
```

现在，我得到了这个输出： -

```
1234
4321 
```

如果我在两者之间添加换行符： -

```
print reverse @array, "\n", reverse @{$aref}, "\n"; 
```

我得到了这个输出： -

```
1234

4321 
```

**因此，您可以看到两个问题：-**

*   **1st，**数组没有因为使用名称而反转
*   **第二，**在两个反向数组之间打印了一个额外的换行符。

我无法理解这种行为，为什么会发生这种情况。我还浏览了该函数的文档`reverse`以检查是否在任何地方提到了这种行为，但我没有吃任何东西。谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T08:10:33.273

```
reverse @digits, reverse @$digits, "\n" 
```

方法

```
reverse(@digits, reverse(@$digits, "\n")) 
```

你要

```
reverse(@digits), reverse(@$digits), "\n" 
```

或者干脆

```
reverse(@$digits, @digits), "\n" 
```

# java - Maps.newHashMap 与新 HashMap 返回的 HashMap

> ID：13153609
> 
> 赞同：19
> 
> 时间：2012-10-31T08:07:35.477
> 
> 标签：java, spring, collections, guava

我第一次尝试番石榴，我发现它真的很棒。

我在 Spring jdbc 模板上执行了几个参数化检索查询。DAO ( `AbstractDataAccessObject`) 中的方法是这样的。这里没问题。

```
public Map<String,Object> getResultAsMap(String sql, Map<String,Object> parameters) {
    try {
        return jdbcTemplate.queryForMap(sql, parameters);
    } catch (EmptyResultDataAccessException e) {
        //Ignore if no data found for this query
        logger.error(e.getMessage(), e);

    }
    return null;
} 
```

这是问题所在：

当我使用调用此方法时

```
getResultAsMap(query, new HashMap<String,Object>(ImmutableMap.of("gciList",gciList))); 
```

效果很好。

但是当我这样做时

```
getResultAsMap(query, Maps.newHashMap(ImmutableMap.of("gciList",gciList))); 
```

编译器生气地说

`The method getResultAsMap(String, Map<String,Object>) in the type AbstractDataAccessObject is not applicable for the arguments (String, HashMap<String,List<String>>)`

我是不是做错了什么，或者这个投诉的原因是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-31T08:22:21.370

这是类型推断失败。`Maps.newHashMap`是静态参数化方法。它允许您使用

```
Map<String,Integer> map = Maps.newHashMap() 
```

代替

```
Map<String,Integer> map = new HashMap<String,Integer>() 
```

使您不必键入`<String,Integer>`两次。在 Java 7 中，菱形运算符允许您使用

```
Map<String,Integer> map = new HashMap<>() 
```

所以该方法是多余的。

要回答您的问题，只需使用`new HashMap`版本，因为类型推断不适用于方法参数。（您可以使用`Maps.<String,Object>newHashMap()`，但这违背了使用该方法的意义）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-06T20:09:33.220

在这里添加一个迟到的答案：

在类型推断出现在 java 之前，大部分好处已经消失了。（耶）但我想知道任何性能差异。这是代码`google.common.collect.maps`

```
 /**
   * Creates a <i>mutable</i>, empty {@code HashMap} instance.
   *
   * <p><b>Note:</b> if mutability is not required, use {@link
   * ImmutableMap#of()} instead.
   *
   * <p><b>Note:</b> if {@code K} is an {@code enum} type, use {@link
   * #newEnumMap} instead.
   *
   * @return a new, empty {@code HashMap}
   */
  public static <K, V> HashMap<K, V> newHashMap() {
    return new HashMap<K, V>();
  } 
```

它的代码相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T18:45:51.290

这里的问题是您的方法需要`Map<String, Object>`，但这实际上并不是您想要的。您想要*任何*类型的值`Map`的`String`键。那不是，是。*`Map<String, Object>``Map<String, ?>`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:10:23.453

更新：我误读了编译器错误 - 抱歉！随意删除我的答案！

“Map”的确切类型是什么 - 它真的是 java.util.Map 和 HashMap 的确切类型 - 它真的是 java.util.HashMap 吗？这里似乎有一个不匹配。

原始“答案”：显然 Maps.newHashMap 返回 Map 接口的实现，这是未知的，但是 getResultAsMap 需要一个 HashMap （这是一个不寻常的要求）。getResultAsMap 应该被重构以接受接口，而不是具体的实现。*

# ruby-on-rails - 使用 Rails、Paperclip 和 Backbone 上传文件

> ID：13153610
> 
> 赞同：2
> 
> 时间：2012-10-31T08:07:53.267
> 
> 标签：ruby-on-rails, ruby, backbone.js, paperclip

我通过创建一个简单的图像板来学习 Rails。我希望用户能够将图像上传到服务器，然后我就可以为它们提供服务。

我正在使用 rails-backbone 和回形针。

以下是相关部分：

应用程序/模型/image.rb

```
class Image < ActiveRecord::Base
  attr_accessible :url
  attr_accessible :data
  has_attached_file :data, :styles => { :medium => "300x300>", :thumb => "100x100>" }
end 
```

app/assets/javascripts/backbone/templates/images/submit.jst.ejs

```
<form id="new-image" name="image" data-remote="true" enctype="multipart/form-data">
  <div class="field">
    <label for="data"> image:</label>
    <input type="file" name="data" id="data">
  </div>

  <div class="actions">
    <input type="submit" value="Create Image" />
  </div>
</form> 
```

应用程序/控制器/images_controller.rb

```
def create
  @image = Image.new(params[:image])
  respond_to do |format|
    if @image.save
      format.html { redirect_to @image, notice: 'Image was successfully created.' }
      format.json { render json: @image, status: :created, location: @image }
    else
      format.html { render action: "new" }
      format.json { render json: @image.errors, status: :unprocessable_entity }
    end
  end
end 
```

我也运行了这个迁移：

```
class AddAttachmentDataToImages < ActiveRecord::Migration
  def self.up
    add_attachment :images, :data 
  end

  def self.down
    remove_attachment :images, :data
  end
end 
```

在尝试保存名为“fruits.png”的文件时，我在控制台中得到以下输出：

```
Started POST "/images" for 127.0.0.1 at 2012-10-31 00:55:07 -0700
Processing by ImagesController#create as JSON
  Parameters: {"image"=>{"url"=>nil, "data"=>"C:\\fakepath\\fruits.png"}}
Completed 500 Internal Server Error in 2ms

Paperclip::AdapterRegistry::NoHandlerError (No handler found for "C:\\fakepath\\fruits.png"):
  app/controllers/images_controller.rb:16:in `new'
  app/controllers/images_controller.rb:16:in `create' 
```

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:45:01.720

Rail 的 UJS 不知道如何远程提交多部分的表单。`data-remote="true"`从表单标签中删除。

如果表单是通过 ajax 发送的，那么除非您知道您正在使用 JavaScript 中的 FileData API，否则它可能没有被正确编码。您可以使用 XHR Level 2 和[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)正确编码多部分表单。在对它进行编码之前，您必须使用 FileData 读取文件内容。

# php - FPDF 单元格定位

> ID：13153612
> 
> 赞同：5
> 
> 时间：2012-10-31T08:08:03.833
> 
> 标签：php, mysql, fpdf

因为我需要为我的工作生成 PDF 文件，所以我开始学习 FPDF。这很容易学习，但我在自定义表格时遇到了一些问题。

看，这些代码行：

```
<?php
require('fpdf/fpdf.php');
require("aacfs.php"); //database connection

$a=mysql_query("select * from reservation where reservno='00112'") or die(mysql_error());
$b=mysql_fetch_array($a);
$k=$b['fdate'];
$j=$b['acode'];

$t=mysql_query("select location from location_list where reservno='00112'") or die(mysql_error());

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',11);
$pdf->Cell(40,10,'Flight Details and Costing');
$pdf->Ln(8);
$pdf->SetFont('Arial','',10);
$pdf->Cell(60, 6, 'Aircraft', 1);
$pdf->Cell(129, 6, $j, 1);
$pdf->Ln();
$pdf->SetFont('Arial','',10);
$pdf->Cell(60, 6, 'Date', 1);
$pdf->Cell(50, 6, 'Itinerary', 1);
$pdf->Cell(19.75, 6, 'ETD', 1, 0, 'C');
$pdf->Cell(19.75, 6, 'ETA', 1, 0, 'C');
$pdf->Cell(19.75, 6, 'Block', 1, 0, 'C');
$pdf->Cell(19.75, 6, 'Waiting', 1, 0, 'C');
$pdf->Ln();
$date = array($k, $k, $k,  '');
foreach($date as $dates)
{
    $pdf->Cell(60, 6, $dates, 1);
    $pdf->Ln();
}
while($u=mysql_fetch_array($t))
{
    $pdf->Cell(50, 6, $u['location'], 1);
    $pdf->Ln();
}

$pdf->Output();
?> 
```

生成一个如下所示的 PDF 文件：

![在此处输入图像描述](../Images/d980d033bbe1508fe57c66b462a5697e.png)

但我想做的是得到这段代码的结果：

```
while($u=mysql_fetch_array($t))
    {
        $pdf->Cell(50, 6, $u['location'], 1);
        $pdf->Ln();
    } 
```

也就是： `Davao - Cebu` `Cebu - Bohol` `Bohol - Davao` 要在 下`Itinerary`，像这样：![在此处输入图像描述](../Images/7a68545053c5bfb3c8ba78ebbec4193a.png)

我知道 Cell() 参数`ln`，它指示调用后当前位置应该去哪里，唯一的选项是: `0 - to the right`，`1 - to the beginning of the next line`并且`2 - below`没有我需要的选项。我很难，因为我从 MySQL 数据库中获取数据，所以我不知道如何根据我的需要重新定位它，因为输出在一个数组中。非常感谢任何关于如何实现我想要的想法的想法。或者我想要的不能通过这个实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T08:22:12.337

在每个日期之后立即输出位置单元：

```
while($u=mysql_fetch_array($t))
{
    $pdf->Cell(60, 6, $k, 1);
    $pdf->Cell(50, 6, $u['location'], 1);
    $pdf->Ln();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-11T14:58:46.983

您需要先完成每一行，然后再进行下一步。这样做并定位然后下一行并重复

```
<?php
require('fpdf/fpdf.php');
require("aacfs.php"); //database connection

//$a=mysql_query("select * from reservation where reservno='00112'") or die(mysql_error());
//$b=mysql_fetch_array($a);
$k='2012-08-09';
$j='RP-A009';
$t=array('Davao - Cebu', 'Cebu - Bohol', 'Bohol - Davao');

//$t=mysql_query("select location from location_list where reservno='00112'") or die(mysql_error());

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',11);
$pdf->Cell(40,10,'Flight Details and Costing');
$pdf->Ln(8);
$pdf->SetFont('Arial','',10);
$pdf->Cell(60, 6, 'Aircraft', 1);
$pdf->Cell(129, 6, $j, 1);
$pdf->Ln();
$pdf->SetFont('Arial','',10);
$pdf->Cell(60, 6, 'Date', 1);
$pdf->Cell(50, 6, 'Itinerary', 1);
$pdf->Cell(19.75, 6, 'ETD', 1, 0, 'C');
$pdf->Cell(19.75, 6, 'ETA', 1, 0, 'C');
$pdf->Cell(19.75, 6, 'Block', 1, 0, 'C');
$pdf->Cell(19.75, 6, 'Waiting', 1, 0, 'C');
$pdf->Ln();
$date = array($k, $k, $k,  '');
$i = 0;
/*
foreach($date as $dates)
{
    $pdf->Cell(60, 6, $dates, 1);
    $pdf->Ln();
}
 */
//while($u=mysql_fetch_array($t))
foreach($t as $location)
{
        $pdf->Cell(60, 6, $date[$i], 1);
        $pdf->Cell(50, 6, $location, 1, 0);
        $pdf->Ln();
        $i++;
}
//$pdf->Output();
$pdf->Output("F","flight.pdf");
?> 
```

# xml - 使用 XSLT 选择 html 中的特定标签并将标签的内容打印到 XML

> ID：13153615
> 
> 赞同：0
> 
> 时间：2012-10-31T08:08:15.207
> 
> 标签：xml, xslt, html-parsing

对上一篇文章感到抱歉。

现在我会尝试更清楚。

我需要从 html 中选择几个标签，并且我有以下 xslt

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="node()|@*">
 <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="a"><xsl:apply-templates/></xsl:template>
<xsl:template match="img"/>
</xsl:stylesheet> 
```

根据我的理解，这是从 html 页面/文档中选择`<a>`和`<img>`标记并打印标签内的内容（如果我的理解是错误的，请告诉我）。但是上面的 XSLT 输出页面的整个 html。谁能指出我哪里出了问题以及需要做些什么才能使它正确。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:59:05.307

我觉得你的理解不太对。依次查看 XSLT 中的模板，您从标准标识模板开始

```
<xsl:template match="node()|@*">
   <xsl:copy>
     <xsl:apply-templates select="node()|@*"/>
   </xsl:copy>
</xsl:template> 
```

这将简单地复制元素及其属性，然后继续处理其子元素。因此，如果您的 HTML 中有一个**h1**标签，它将按原样输出。

然后，您跟进元素**的模板。**

```
 <xsl:template match="a"><xsl:apply-templates/></xsl:template> 
```

因为这比身份模板更具体，所以它会优先考虑。在您的情况下，它不会复制**a**元素，但会处理其子元素。假设您**的 a**元素仅包含文本，则应根据需要输出。

您的最终模板与**img**元素匹配

```
<xsl:template match="img"/> 
```

但这一切所做的只是完全无视它。

值得注意的是，XSLT 具有内置模板，当找不到匹配项时会使用这些模板。这些不会复制元素，但会继续处理其子元素。因此，如果您不想复制所有 HTML 元素，您可以只依赖内置模板，并且只为您希望对其执行特定操作的元素添加模板。

我不是 100% 确定您的要求，但如果您只是想获取一些 XHTML 并仅输出元素中的文本**，**您可以使用这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output omit-xml-declaration="yes" indent="yes"/>
   <xsl:strip-space elements="*"/>

   <xsl:template match="a/text()">
       <xsl:value-of select="." />
   </xsl:template>

   <xsl:template match="text()" />

</xsl:stylesheet> 
```

因此，`<xsl:template match="a/text()">`将输出**a**元素内的文本，而不太具体的`<xsl:template match="text()">`将忽略所有其他文本。内置模板用于其他元素，如上所述，这不会输出它们，只是处理它的子元素（因此最终它将到达文本节点）。

所以，例如，如果你有这个 HTML

```
<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <h1>Test</h1>
    Welcome!
    <img src="test.jpg" alt="Test Image" />
    <p><a href="test.html">Test Link</a></p>
  </body>
</html> 
```

所有将输出的将是

```
Test Link 
```

# c# - 如何将整数四舍五入到接近百位？

> ID：13153616
> 
> 赞同：50
> 
> 时间：2012-10-31T08:08:16.207
> 
> 标签：c#, .net, math

我不知道我的命名是否正确！无论如何，这些是我拥有的整数，例如：

```
76
121
9660 
```

而且我想将它们四舍五入到接近一百，例如它们必须变成：

```
100
100
9700 
```

如何在 C# 中更快地做到这一点？我考虑了一种算法，但也许 C# 上有一些实用程序？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-31T08:24:38.057

试试`Math.Round`方法。就是这样：

```
Math.Round(76d / 100d, 0) * 100;
Math.Round(121d / 100d, 0) * 100;
Math.Round(9660d / 100d, 0) * 100; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-31T08:18:26.600

不久前我写了一个简单的扩展方法来概括这种舍入：

```
public static class MathExtensions
{
    public static int Round(this int i, int nearest)
    {
        if (nearest <= 0 || nearest % 10 != 0)
            throw new ArgumentOutOfRangeException("nearest", "Must round to a positive multiple of 10");

        return (i + 5 * nearest / 10) / nearest * nearest;
    }
} 
```

它利用整数除法来找到最接近的舍入。

示例使用：

```
int example = 152;
Console.WriteLine(example.Round(100)); // round to the nearest 100
Console.WriteLine(example.Round(10)); // round to the nearest 10 
```

在你的例子中：

```
Console.WriteLine(76.Round(100)); // 100
Console.WriteLine(121.Round(100)); // 100
Console.WriteLine(9660.Round(100)); // 9700 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-31T08:10:59.867

试试这个表达式：

```
(n + 50) / 100 * 100 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-04-05T09:00:02.643

只是对[@krizzzn](https://stackoverflow.com/users/964821/krizzzn)接受的答案的一些补充......

请注意，以下将返回 0：

```
Math.Round(50d / 100d, 0) * 100; 
```

考虑使用以下内容并使其返回 100：

```
Math.Round(50d / 100d, 0, MidpointRounding.AwayFromZero) * 100; 
```

根据您在做什么，使用小数可能是更好的选择（注意**m**）：

```
Math.Round(50m / 100m, 0, MidpointRounding.AwayFromZero) * 100m; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-07-29T05:16:42.263

我知道这是一个旧线程。我写了一个新方法。希望这对某些人有用。

```
 public static double Round(this float value, int precision)
        {
            if (precision < -4 && precision > 15)
                throw new ArgumentOutOfRangeException("precision", "Must be and integer between -4 and 15");

            if (precision >= 0) return Math.Round(value, precision);
            else
            {
                precision = (int)Math.Pow(10, Math.Abs(precision));
                value = value + (5 * precision / 10);
                return Math.Round(value - (value % precision), 0);
            }
        } 
```

例子：

```
 float value = 6666.677777F;
    Console.Write(value.Round(2)); //6666.68
    Console.Write(value.Round(0)); //6667
    Console.Write(value.Round(-2)); //6700 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-06T14:19:17.253

嗨，我写了这个扩展名，你传递的每个数字都会得到下一个百

```
/// <summary>
    /// this extension gets the next hunfìdred for any number you whant
    /// </summary>
    /// <param name="i">numeber to rounded</param>
    /// <returns>the next hundred number</returns>
    /// <remarks>
    /// eg.:
    /// i =   21 gets 100
    /// i =  121 gets 200
    /// i =  200 gets 300
    /// i = 1211 gets 1300
    /// i = -108 gets -200
    /// </remarks>
    public static int RoundToNextHundred(this int i)
    {
        return i += (100 * Math.Sign(i) - i % 100);
        //use this line below if you want RoundHundred not NEXT
        //return i % 100 == byte.MinValue? i : i += (100 * Math.Sign(i) - i % 100);
    }

    //and for answer at title point use this algoritm
    var closeHundred = Math.Round(number / 100D)*100;

    //and here the extension method if you prefer

    /// <summary>
    /// this extension gets the close hundred for any number you whant
    /// </summary>
    /// <param name="number">number to be rounded</param>
    /// <returns>the close hundred number</returns>
    /// <remarks>
    /// eg.:
    /// number =   21 gets    0
    /// number =  149 gets  100
    /// number =  151 gets  200
    /// number = -149 gets -100
    /// number = -151 gets -200
    /// </remarks>
    public static int RoundCloseHundred(this int number)
    {
        return (int)Math.Round(number / 100D) * 100;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-14T08:13:14.440

如果您只想将整数向上取整（就像 OP 实际所做的那样），那么您可以求助于这个解决方案：

```
public static class MathExtensions
{
    public static int RoundUpTo(this int number, int nearest)
    {
        if (nearest < 10 || nearest % 10 != 0)
            throw new ArgumentOutOfRangeException(nameof(nearest), $"{nameof(nearest)} must be a positive multiple of 10, but you specified {nearest}.");

        int modulo = number % nearest;
        return modulo == 0 ? number : modulo > 0 ? number + (nearest - modulo) : number - modulo;
    }
} 
```

如果要执行浮点（或十进制）舍入，请求助于@krizzzn 和@Jim Aho 的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-31T08:20:51.533

```
int num = 9660;
int remainder = num % 100;
Console.WriteLine(remainder < 50 ? num - remainder : num + (100 -remainder)); 
```

注意：我还没有彻底测试过。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-03T18:00:49.753

我在内部有一个类似的项目，业务需求是在给定数字的 100 范围内搜索并找到重复的数据库记录。因此，如果用户使用第 856 行，我将搜索 800 - 899。如果用户使用 8567，我将搜索 8500 - 8599。不是精确的 100 舍入，但我认为我会将我的独特方法作为其中一些基本编码问题嵌入在更大的业务项目中。为了测试这一点，我从 1 到 99999 播种了一个十进制列表，并将结果吐出到一个文件中。

```
 /// <summary>
    /// This method accepts an inbound Line Number and returns the line range
    /// in the form of lowest to highest based on 100's
    /// Example would be 9122 returns 9100 - 9199
    /// It's used for generating some additional BOM Temp functionality.
    /// </summary>
    /// <param name="inboundNumber"></param>
    /// <returns></returns>
    public static ProjectLineRange CalculateLineRange(decimal inboundNumber)
    {
        var lineRange = new ProjectLineRange();
        var numberLength = inboundNumber.ToString(CultureInfo.InvariantCulture).Length;

        switch (numberLength)
        {
            case 0: //NULL?
                break;
            case 1: //Represents 1 - 9
                lineRange.LineBottom = 1;
                lineRange.LineTop = 99;
                break;
            case 2: //Represents 10 - 99
                lineRange.LineBottom = 1;
                lineRange.LineTop = 99;
                break;
            case 3: //Represents 100 - 999
                lineRange = CalculateHundredsRange((int)(inboundNumber / 100));
                break;
            case 4: //Represents 1000 - 9999
                lineRange = CalculateThousandsRange(
                    Convert.ToInt32(inboundNumber.ToString(CultureInfo.InvariantCulture).Substring(1, 1)),
                    Convert.ToInt32(inboundNumber.ToString(CultureInfo.InvariantCulture).Substring(0, 1)));
                break;
            case 5: //Represents 10000 - 99999
                lineRange = CalculateTenThousandsRange(
                    Convert.ToInt32(inboundNumber.ToString(CultureInfo.InvariantCulture).Substring(2, 1)),
                    Convert.ToInt32(inboundNumber.ToString(CultureInfo.InvariantCulture).Substring(1, 1)),
                    Convert.ToInt32(inboundNumber.ToString(CultureInfo.InvariantCulture).Substring(0, 1)));
                break;
        }

        return lineRange;
    }

public class ProjectLineRange
    {
       public decimal LineBottom { get; set; }
       public decimal LineTop { get; set; }
    }

    /// <summary>
    /// Helper method to return the range for the 100's place
    /// </summary>
    /// <param name="hundredsPlaceValue"></param>
    /// <returns></returns>
    public static ProjectLineRange CalculateHundredsRange(int hundredsPlaceValue)
    {
        var tempLineRange = new ProjectLineRange();
        tempLineRange.LineBottom = hundredsPlaceValue * 100;
        tempLineRange.LineTop = tempLineRange.LineBottom + 99;

        return tempLineRange;
    }

    /// <summary>
    /// Helper method to return the range for the 100's place when factoring a 1000's number
    /// </summary>
    /// <param name="hundredsPlaceValue"></param>
    /// <param name="thousandsPlaceValue"></param>
    /// <returns></returns>
    public static ProjectLineRange CalculateThousandsRange(int hundredsPlaceValue, int thousandsPlaceValue)
    {
        var tempLineRange = new ProjectLineRange();
        var tempThousands = thousandsPlaceValue * 1000;
        var hundredsRange = CalculateHundredsRange(hundredsPlaceValue);
        tempLineRange.LineBottom = tempThousands + hundredsRange.LineBottom;
        tempLineRange.LineTop = tempThousands + hundredsRange.LineTop;

        return tempLineRange;
    }

    /// <summary>
    /// Helper method to return the range for the 100's place when factoring a 10000's number
    /// </summary>
    /// <param name="hundredsPlaceValue"></param>
    /// <param name="thousandsPlaceValue"></param>
    /// <param name="tenThousandsPlaceValue"></param>
    /// <returns></returns>
    public static ProjectLineRange CalculateTenThousandsRange(int hundredsPlaceValue, int thousandsPlaceValue, int tenThousandsPlaceValue)
    {
        var tempLineRange = new ProjectLineRange();
        var tempThousands = thousandsPlaceValue * 1000;
        var tempTenThousands = tenThousandsPlaceValue * 10000;
        var hundredsRange = CalculateHundredsRange(hundredsPlaceValue);
        tempLineRange.LineBottom = tempTenThousands + tempThousands + hundredsRange.LineBottom;
        tempLineRange.LineTop = tempTenThousands + tempThousands + hundredsRange.LineTop;

        return tempLineRange;
    } 
```

# ios6 - iCarousel iOS 6 - 故事板

> ID：13153617
> 
> 赞同：3
> 
> 时间：2012-10-31T08:08:27.293
> 
> 标签：ios6, storyboard, sigabrt, icarousel

我试图完全根据 Nick Lockwood 的 StoryboardExample 将 iCarousel 放入我的 Storyboard 项目（我的 XCode 已更新到 iOS 6）。

但是在我 ctrt+拖动 UIView 以将 dataSource、delegate 和 carousel 与 ViewController 连接并让应用程序运行时，应用程序无法运行并显示 SIGABRT。

有人知道出了什么问题吗？一些设置...

谢谢您的帮助！

伊娃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:22:26.460

尼克已经帮助其他人解决了这个问题 - 这里：

[https://github.com/nicklockwood/iCarousel/issues/119](https://github.com/nicklockwood/iCarousel/issues/119)

将 initWithNibName:bundle: 替换为

```
- (void)awakeFromNib

{
//the setup code from your initWithNibName:bundle: method
} 
```

谢谢：）

# javascript - 如何根据jquery中的段落元素调整字体大小

> ID：13153621
> 
> 赞同：-2
> 
> 时间：2012-10-31T08:08:38.390
> 
> 标签：javascript, jquery, html, css

我有一个看起来像这样的段落元素![在此处输入图像描述](../Images/3c5eeff94bee44e195bb865b6cd16c37.png)

当有 3 个数字字符时它工作正常，但它以某种方式从 div 元素溢出。谁能建议一种根据段落元素自动调整字体大小的方法？

这个 div 的代码是这样的

```
<div class="details">
            <a><span
                    style="display: block;line-height: 22px;padding-top: 20px;"><b>8375</b></span>
                <span style="display: block;font-size: 17px;padding-top: 5px;">posts</span></a>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:14:23.423

jQuery

```
$(".text").css("font-size", $("#details").height()/4); 
```

CSS

```
<style>
    #details {
        width: 100px;
        height: 100px;
        background:red;
        border:1px solid green;
        }
</style> 
```

html

```
<div id="details">
<a>
    <span class="text"><b>8375</b></span>
    <span class="text">posts</span>
</a> 
```

现在，如果您的字体大小将根据块高度调整大小:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:12:40.530

```
<div class="details" style="width:auto;"> 
```

# php - PHP函数在两个发布日期之间循环工作日

> ID：13153624
> 
> 赞同：1
> 
> 时间：2012-10-31T08:08:58.953
> 
> 标签：php, date, loops

> **可能重复：**
> [使用 PHP 从 MySQL 打印两个日期之间的业务日期的 Ymd 列表](https://stackoverflow.com/questions/11904033/print-y-m-d-list-of-business-dates-between-two-dates-from-mysql-using-php)

我是这种 PHP 编程的新手，所以请多多包涵。

我希望用户能够发布两个日期，一个开始日期和一个结束日期，并从这些日期计算营业日期（不包括周六和周日）并将其插入到`MySQL`

例如，如果我有这个表格......

```
<form action='update.php' method='post'>
  <input type='text' name='start_date'>
  <input type='text' name='end_date'>
  <input type='submit' name='submit'>
</form> 
```

**更新.php**

```
if(isset($_POST['submit'])) {

   $start_date = $_POST['start_date']; //Let's say this is 2012-10-01
   $send_date = $_POST['end_date']; //Let's say this is 2012-10-10

} 
```

现在我想遍历日期并创建一个运行如下的 MySQL 查询：

```
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-01');
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-02');
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-03');
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-04');
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-05');
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-08');
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-09');
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-10'); 
```

我知道这可能不是一个好的解决方案，但这正是我需要的。

如何创建循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:19:48.170

```
$startDate = $start_date;
$endDate = $send_date;

// Convert to UNIX timestamps
$currentTime = strtotime($startDate);
$endTime = strtotime($endDate);

// Loop until we reach the last day
$result = array();
while ($currentTime <= $endTime) {
  if (date('N', $currentTime) < 6) {
    $result[] = date('Y-m-d', $currentTime);
  }
  $currentTime = strtotime('+1 day', $currentTime);
}

// start insertion
foreach($result as $value)
{
  mysql_query("INSERT INTO tbl_dates (date_value) VALUES '".$value."'");
} 
```

Source : [Print Y-m-d list of business dates between two dates from MySQL using PHP](https://stackoverflow.com/questions/11904033/print-y-m-d-list-of-business-dates-between-two-dates-from-mysql-using-php)

Omg! I just realized that it's a thread started by you. You already have your answer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:15:24.717

用于[`date('N', $timestamp)`](http://www.php.net/manual/en/function.date.php)获取星期几。然后，您可以检查这一天是否符合您的要求。

PS`date('N')`是在 PHP 5.1.0 中引入的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:24:54.343

仅基于您的`PHP`标签以您的风格编写代码 ->

```
<?php

$_POST['start_date'] = '2012-10-01';
$_POST['end_date'] = '2012-10-10';

$start = explode('-',$_POST['start_date']);
$end   = explode('-',$_POST['end_date']);
$i = (int)$start[2];
for($i; $i<$end[2]; $i++)
{
$i = sprintf('%02d', $i);
echo "INSERT INTO tbl_dates (date_value) VALUES ('2012-10-$i')";
echo "<br />";
}

?> 
```

**输出**

```
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-01')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-02')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-03')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-04')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-05')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-06')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-07')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-08')
INSERT INTO tbl_dates (date_value) VALUES ('2012-10-09') 
```

# android - Android 谷歌地图按关键字搜索

> ID：13153625
> 
> 赞同：2
> 
> 时间：2012-10-31T08:09:02.230
> 
> 标签：android, maps, keyword

我在查询中遇到关键字组成问题。我需要进行一个查询，例如，在一个查询中按“spord doctor”或“doctors”或“medicine”进行搜索（&keywod="sport doctor"|"medicine"|"sport"|"doctor"。这个查询不起作用，但如何正确执行此操作）。我无法在一个查询中编写它。是否有任何解决方案如何做到这一点，因为在文档中我只看到一个示例，其中通过一个关键字或短语进行搜索。最后，我想做一个长查询，不同语言的“运动医生”在哪里。

我找到了解决方案。但它在浏览器 URL 栏中工作，而不是在应用程序中工作。我用管道“|” 作为查询中的 OR 语句：[https ://maps.googleapis.com/maps/api/place/search/json?location=59.436347,24.752356&radius=34572.53586&keyword=spordiarst|sport&sensor=false&key=AIzaSyCEVB4rY2A_AEyJ5JeopxaGz4zqm47yLuY](https://maps.googleapis.com/maps/api/place/search/json?location=59.436347,24.752356&radius=34572.53586&keyword=spordiarst|sport&sensor=false&key=AIzaSyCEVB4rY2A_AEyJ5JeopxaGz4zqm47yLuY)

但是如果我输入这样的内容，我的应用程序就会出错：

```
HttpUriRequest request = new HttpGet("https://maps.googleapis.com/maps/api/place/search/json?" + 
            "location=" + ((lat == 0 || lat == gpsLat) ? gpsLat : lat) + ","+ ((lon == 0 || lon == gpsLon) ? gpsLon : lon) +
            "&radius=" + radius +
            "&keyword=\"spordiarst\"|\"sport\"" +
            "&types=establishment" +
            "&sensor=false&" +
            "key=" + GOOGLE_MAPS_KEY); 
```

错误：原因：java.lang.IllegalArgumentException：索引 127 处的查询中存在非法字符：[https](https://maps.googleapis.com/maps/api/place/search/json?location=59.435330809999996,24.7727237&radius=1404.114013671875&keyword=) ://maps.googleapis.com/maps/api/place/search/json?location=59.435330809999996,24.7727237&radius=1404.114013671875&keyword= ” spordiarst"|"sport"&types=建立&sensor=false&key=这是我的钥匙

如何解决？如我所见，没有空格和特定符号，但它崩溃了。似乎是由于管道“|” 或双引号\"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:01:43.507

您是否尝试过[URLEncoding](http://developer.android.com/reference/java/net/URLEncoder.html)参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T18:47:36.077

```
String types = "restaurant|food";
try {
     types = URLEncoder.encode(types, "UTF-8");
} catch (UnsupportedEncodingException e1) {
    // TODO Auto-generated catch block
     e1.printStackTrace();
} 
```

使用此编码器使管道与 HttpGet 一起工作，否则您将收到 Illegar Character 异常

# objective-c - 有没有办法让动画的默认持续时间是iOS？

> ID：13153636
> 
> 赞同：3
> 
> 时间：2012-10-31T08:09:29.663
> 
> 标签：objective-c

有人知道 iOS 中的默认动画持续时间列表吗？例如：

*   键盘向下/向上滑动需要多长时间？
*   状态栏消失需要多长时间？
*   UITableView 的所有默认行动画的持续时间是多少？等等

有没有办法获得这些值？包含它们的列表或可能通过代码？

我真的很感激任何帮助，谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:15:35.860

我认为 API 中没有明确的列表。在某些情况下，您可以观察到通知，例如为您`UIKeyboardWillShowNotification`提供`UIKeyboardAnimationDurationUserInfoKey`精确的时间值。其他时候，您根本不应该依赖界面中的这些时间或手动调整时间，并接受您可能需要在未来的 iOS 更新中对其进行调整。

# iphone - 在iphone中将gps点绘制为一条线

> ID：13153640
> 
> 赞同：0
> 
> 时间：2012-10-31T08:10:12.290
> 
> 标签：iphone, gps, draw

我想创建一个包含类似于 NIKE+ 应用程序的部分的 iphone 应用程序。我需要绘制 GPS 点的集合。任何人有任何想法，

注意：我不想在地图上绘制这些点

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:24:46.347

如果您不需要在地图上绘制，您可能只需要创建一个自定义 UIView 并使用 Quartz 2D 进行绘制。话虽如此，如果您要定期重绘，则需要查看优化，例如仅重绘某些区域或缓存 CGContextRef。[Apple 的 Quartz 文档很好地解释了这一切。](https://developer.apple.com/library/mac/ipad/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)

# javascript - 对于 Google Chart，如何确定具有日期时间格式的连续 h 轴的间隔？

> ID：13153641
> 
> 赞同：0
> 
> 时间：2012-10-31T08:10:17.500
> 
> 标签：javascript, charts, google-visualization

目前我正在使用谷歌图表（柱形图）来显示最近 48 小时内每小时的目标数量。我的代码如下：

```
var oChartOptions = {   
    height:250,
    hAxis: {
      viewWindowMode:'explicit',
      viewWindow: {
        max: new Date()
        },
      format: "MM/dd h':00'",
      textStyle:{fontSize: 10},
      titleTextStyle: {
        color: 'red',"font-weight":"bold"
      },
      maxTextLines: 12
    }
  };

var nChart = new google.visualization.ColumnChart(nTarget);
var oChartData = new google.visualization.DataTable();
oChartData.addColumn('datetime','Time');
oChartData.addColumn('number','Quantity');                 
oChartData.addRows(aData);    
nChart.draw(oChartData, oChartOptions); 
```

目前效果很好，但是对于h轴，它每6小时显示一次时间标签，我想将这个间隔从6缩短到2。在我对[文档](https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart)进行了很多尝试之后，我仍然没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:50:55.793

`chxr`您可以使用标签的最后一个参数（可选）指定刻度间隔。这是一个例子：

```
chxr: 0,0,15,1 
```

它将在第一个轴上定义一个 [0,15] 间隔，每个值都有一个刻度。

# jquery - 如何获取锚标记的文本内容？

> ID：13153643
> 
> 赞同：2
> 
> 时间：2012-10-31T08:10:21.517
> 
> 标签：jquery, html, anchor

我正在使用锚标记，并且必须在 jQuery 中访问其内容。我必须从中访问“文本”。我知道`$("#AnchorID").attr("href")`或其他什么，但有什么方法可以获取它的值（'文本'）？

```
<a href="">text</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T08:11:29.100

使用 $("#AnchorID").text(),

**[现场演示](http://jsfiddle.net/nLh5K/)**

```
<a id="AnchorID" href="">text</a> 
```

**获取文本**

```
textOfAnchor = $("#AnchorID").text(); 
```

**更改文本**

```
$("#AnchorID").text("new text"); 
```

**获取 html**

```
htmlOfAnchor = $("#AnchorID").html(); 
```

# matlab - 仅在 32 位上的 Matlab GUI 独立应用程序运行时错误

> ID：13153645
> 
> 赞同：0
> 
> 时间：2012-10-31T08:10:27.907
> 
> 标签：matlab, matlab, 32bit-64bit, matlab-deployment, matlab-compiler

我有一个[matlab](/questions/tagged/matlab "显示标记为“matlab”的问题") GUI 应用程序，我可以从中为 [ **Windows 64 位**] 和 [ **Windows 32 位**] 生成一个独立的可执行应用程序。

独立应用程序的*Windows 64 位*版本可以正常工作，没有任何问题，但*Windows 32 位*版本有一些运行时错误，应用程序的某些功能无法正常工作，我无法调试以查看在哪里准确的错误。

作为独立应用程序的 GUI 本身在 Windows 32 位和 Windows 6 位中都可以正常工作。

这里可能是什么问题？

# linq - 在 EF 查询中使用枚举

> ID：13153646
> 
> 赞同：0
> 
> 时间：2012-10-31T08:10:30.587
> 
> 标签：linq, entity-framework, enums

我有以下查询（EF5，.NET4.5）：

```
from p in repository
select new Person() {
    Name = p.Name, 
    Birthday = p.Birthday,
    MyEnumValue = MyEnum.Value1
}; 
```

其中*MyEnumValue*的**枚举**定义如下：

```
public enum MyEnum : byte
{
    Value1 = 1,
    Value2 = 2
} 
```

在运行时此代码导致异常：

*从具体化的“System.Byte”类型到“MyApp.Domain.Models.MyEnum”类型的指定转换无效。*

但是如果我将枚举定义更改为

```
public enum MyEnum { ... } 
```

一切正常。

是否可以修复异常不要将 MyEnum 更改为 int？（并且没有额外的字节属性:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:22:22.770

这是 MySQL .NET 连接器错误。所以只有一个选择 - 做出解决方法并等待下一个版本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-31T10:21:03.510

尝试像这样投射：

```
from p in repository
select new Person() {
    Name = p.Name, 
    Birthday = p.Birthday,
    MyEnumValue  = (MyEnum) Enum.Parse(typeof(MyEnum), MyEnum.Value1, true)
}; 
```

如果“Person”的“MyEnumValue”字段是字节，那么转换为字节......

# sql-server - MSSQL - 返回选择

> ID：13153648
> 
> 赞同：1
> 
> 时间：2012-10-31T08:10:33.410
> 
> 标签：sql-server, tsql

我想准备一个需要 2 个参数（Int，string）的过程如果表中存在某些行，我将得到 @dane = 1; 最后我想选择@dane，但我的程序不好。我不能使用 return @dane。

```
 USE [SS]
    GO

    SET ANSI_NULLS ON
    GO
    SET QUOTED_IDENTIFIER ON
    GO

    CREATE PROCEDURE [permission].[CheckSkill] 
(
    @SkillId INT, -- Identyfikator użytkownika 
    @Description NVARCHAR(100) = NULL
)
AS
BEGIN
    SET NOCOUNT ON;
    DECLARE @dana as int
    SET @dana = 0

    -- this is redundant:
    --SET @Description = RTRIM(LTRIM(ISNULL(@Description,'')))

    IF EXISTS (SELECT * FROM permission.UserXSkill Where permission.UserXSkill.SkillId = @SkillId)
    BEGIN
      SET @dana = 1;
    END

    SELECT @dana AS ID;
END
GO 
```

主题 [关闭] 感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:22:01.340

为变量赋值时需要使用`SET`or 。`SELECT`

`EXISTS`似乎满足您所在`IF`街区的要求

该`@Description`参数未使用且是多余的

```
USE [SS]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [permission].[CheckSkill] 
(
    @SkillId INT, -- Identyfikator użytkownika 
    @Description NVARCHAR(100) = NULL,

)
AS
BEGIN
    SET NOCOUNT ON;
    DECLARE @dana as int
    SET @dana = 0

    -- this is redundant:
    --SET @Description = RTRIM(LTRIM(ISNULL(@Description,'')))

    IF EXISTS (SELECT * FROM permission.UserXSkill Where permission.UserXSkill = @SkillId)
    BEGIN
      SET @dana = 1;
    END

    SELECT @dana AS ID;
END
GO 
```

# c# - 在 ASP.NET 中打开 .chm 文件

> ID：13153649
> 
> 赞同：0
> 
> 时间：2012-10-31T08:10:35.550
> 
> 标签：c#, asp.net, iis, chm, html-help-workshop

我正在使用下面的代码打开帮助文件`asp.net`

```
protected void lblHelp_Click(object sender, EventArgs e)
{
    string filepath = Server.MapPath(@"VersionControlHelp.chm");    
    Process.Start(filepath);
} 
```

`IIS`这在我的本地机器上运行良好，但在我发布到服务器时不起作用。有什么`IIS`我应该修改的设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:10:11.363

如果您`Process.Start()`在 Web 服务器上调用，您将在 IIS 应用程序池用户的上下文中打开服务器上的 CHM 文件，该用户没有附加控制台（因此不会发生任何事情）。

我确定这不是你想要的。

我认为您正在尝试在客户端计算机上打开 CHM 文件。为此，请`Response.Redirect("pathto/yourchmfile.chm")`从您的`lblHelp_Click`方法中调用。这将导致浏览器下载 CHM 文件，然后用户可以选择打开它（视浏览器警告而定）或保存它。我认为这与您将得到的差不多。

（顺便说一下，它在本地工作，因为与 Visual Studio 捆绑在一起的 ASP.NET 开发服务器只是一个系统托盘应用程序，在用户登录时加载 - 所以如果这发出 a `Process.Start()`，CHM 文件将在用户运行的上下文中打开Visual Studio，即您，附加到控制台会话，即您的屏幕。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:04:55.280

Process.Start 可能需要足够的权限才能运行。所以你需要检查你网站当前的应用程序池标识，这是否有足够的权限在服务器上启动一个进程？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:39:19.490

如果这已经在本地工作，那么可能是因为权限或路径不正确。如果您以静默方式捕获异常，您可能看不到错误，例如 Access denied, Path not found

如果该文件位于您的 Web 应用程序的根目录中，您可以试试这个

```
protected void lblHelp_Click(object sender, EventArgs e)
{
    string filepath = Server.MapPath("~/VersionControlHelp.chm");    
    Process.Start(filepath);
} 
```

此外，`@`不需要 is 符号，因为您没有使用反斜杠 ( `\`) 或任何特殊字符

# windows - windows下如何重命名TGitCache持有的git根文件夹

> ID：13153651
> 
> 赞同：0
> 
> 时间：2012-10-31T08:10:42.503
> 
> 标签：windows, git, tortoisegit

目标是重命名 git 根文件夹。主题[如何重命名 git 根文件夹？](https://stackoverflow.com/questions/7199659/rename-git-root-folder)提到这样做是安全的，但我不能因为 TGitCache.exe 持有该文件夹。

如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:56:49.527

只需终止 TGitCache.exe，据我所知这样做没有害处，它会自行重启。

# jquery - document.ready() 只触发一次点击

> ID：13153653
> 
> 赞同：1
> 
> 时间：2012-10-31T08:10:49.813
> 
> 标签：jquery

我试图找出在函数中`click()`编写时执行一次的原因。`document.ready()`

这是我所做的：

```
$(document).ready(function() {

    $('td').click(function(){

        $('#xyz').html($(this).parent().index());  // here div gets filled with current rowIndex
    });

}); 
```

**单击表格单元格时，div 显示当前行索引。*但这只会发生一次，我希望它在每次点击时都显示出来***。

**这是 js.fiddle 的链接[Click Me](http://jsfiddle.net/XZtLz/7/) 如果单击行的任何单元格，它只执行一次单击..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:30:16.530

尝试使用这个：

```
$('td').click(function() {
    $('.xyz',this).html($(this).parent().index());
});​ 
```

我已经使用 .xyz div 类来填充索引，因为您应该在页面上提供超过 1 个元素的相同 id。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:31:23.737

只有在您编写了 onready 函数时呈现页面时，该点击才会起作用。在完全接收到图像等所有资产之前，不会触发此事件

```
$(document).ready(function() {//your code here}); 
```

并且在页面加载或刷新之后发生渲染活动。每次加载或刷新页面时，您的功能都会工作一次。

# c# - 在 C# .NET 中对部分文档进行 Xml 签名验证失败

> ID：13153661
> 
> 赞同：2
> 
> 时间：2012-10-31T08:11:26.253
> 
> 标签：c#, xml, saml-2.0, xml-signature, signedxml

给定一个 XML 文档，其中根节点使用 RSA+SHA2 签名进行签名，其中包含一个使用 RSA+SHA2 再次单独签名的 XML 元素，我发现：

*   根节点上的签名无效
*   子节点上的单独签名无效

将签名的子节点复制到新的 XML 文件中时，还将 xmlns: 声明移动到该节点以维护命名空间范围，我发现

*   签名有效

XML 结构类似于。在现实生活中，XML 是一个签名的 SAML2 ArtifactResolve 元素，其中包含一个签名的 SAML2 断言。

```
<Root id="_1">
  <ds:Signature reference="_1" />
  <Child id="_2">
    <ds:Signature reference="_2" />
  </Child>
</Root> 
```

用于验证所有这些的代码非常简单，即 SignedXml 类。

```
 SignedXml signedDocument = new SignedXml(document.DocumentElement);
  signedDocument.LoadXml(GetSignatureElement(document.DocumentElement));
  Console.WriteLine("Document valid: {0}", 
    signedDocument.CheckSignature(cert, true)); // returns false 
```

我的主要问题是能够通过将节点复制到新的 XML 文件中来验证节点的奇怪行为。如果我通过 XPath 查询该节点并将其加载到 SignedXml 中，它将失败。

```
 XmlElement element = (XmlElement)document.SelectSingleNode("//Child");
  SignedXml signedDocument = new SignedXml(element);
  signedDocument.LoadXml(GetSignatureElement(element));
  Console.WriteLine("Element valid: {0}", 
    signedDocument.CheckSignature(cert, true));  // returns false 
```

现在，如果 SignedXml 上有大量设置我可以搞砸，嘿，但没有那么多。加载 Xml，加载签名，验证。

任何人都知道为什么这种行为是这样的？已经尝试在 XmlDocument 上使用 PreserveWhitespace=true 但这没有帮助。

非常感激！

沃特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T15:09:46.687

我有一个类似的问题。这是[问答](https://stackoverflow.com/questions/25394137/verify-signature-on-saml-assertion "验证 SAML 断言的签名")。首先，引用属性应该是 format `reference="#{insert id here}"`。这应该会导致文档签名生效。然后将子签名移动/附加到根元素，然后子签名应该验证。

说实话，我遇到的问题是文档尚未签名，但子元素已签名，我无法验证该签名。至少现在还没有。如果我弄清楚了，我会更新。

# html - 当标签具有固定宽度时，如何在标签开始之前显示星号

> ID：13153666
> 
> 赞同：8
> 
> 时间：2012-10-31T08:11:48.810
> 
> 标签：html, css

我想在我的标签前显示星号，表明它是必填字段。以下是我的标签 css id 代码，

```
#label{
    float: left;
    height: 30px;
    padding-right: 4px;
    padding-top: 2px;
    position: relative;
    text-align: right;
    vertical-align: middle;
    width: 73px;
} 
```

上面的输出是，*标签，但我希望它像，*标签谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T08:36:39.417

使用 :before 伪类

```
 .label:before{
     content:"*" ;
     color:red   
     } 
```

或者

```
 #req:before{
    content:"*" ;
    color:red    
    }
​ 
```

**[演示更新](http://jsfiddle.net/HCvAd/1/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-30T05:25:28.130

```
Simple approach is like this
<font color="red">*</font>UserName<input type="text" name="userID"/>

It will display the asterik. 
```

**编辑**

HTML5 不支持**字体**标签。改用 CSS。

[字体链接](https://www.w3schools.com/tags/tag_font.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:15:36.863

如果没有看到 HTML，我们很难知道发生了什么。`white-space`如果星号与#label 位于同一元素中，我怀疑您将能够使用鲜为人知的属性解决您的问题。尝试使用`white-space: pre`.

这是更多信息： [http ://www.w3schools.com/cssref/pr_text_white-space.asp](http://www.w3schools.com/cssref/pr_text_white-space.asp)

# r - 从列表中提取具有唯一元素的数据框

> ID：13153672
> 
> 赞同：0
> 
> 时间：2012-10-31T08:12:10.443
> 
> 标签：r, list, dataframe

嗨，我有一个这样的清单

```
$`2`
  chr.pos  nt.pos CNV GRP
      1  783605   1   2
      1  888149   1   2
      1  991311   1   2
      1 1089305   1   2
      1 1177669   1   2

$`4`
 chr.pos  nt.pos CNV GRP
      2 1670488   1   4
      2 1758800   1   4

$`6`
 chr.pos  nt.pos CNV GRP
      2 1902924   1   6
      2 1978088   1   6 
```

我想为每个元素提取唯一的染色体、CNV和组以及最高和最低的nt.pos，所以输出是，我更喜欢一个数据框

```
chr.pos  Start     End       GRP
 1         783605    1177669   2
 2         1670488   175880    4
 2         1902924   1978088   6 
```

我试过这个

```
results<-lapply(mylist, function(x){

return(as.data.frame(unique(x$chr.pos),range(x$nt.pos)[1],range(x$nt.pos)  [2],unique(x$GRP)))

}
) 
```

但是，当然，我得到的是一个清单。

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:50:10.420

假设您的列表名为“dat”，如下所示：

```
dat <- read.table(header = TRUE, text = "chr.pos  nt.pos CNV GRP
1  783605   1   2
1  888149   1   2
1  991311   1   2
1 1089305   1   2
1 1177669   1   2
2 1670488   1   4
2 1758800   1   4
2 1902924   1   6
2 1978088   1   6")
dat <- split(dat, dat$GRP) 
```

首先，一个问题：你真的需要它作为一个`list`，还是可以只是一个长的`data.frame`？如果它必须保留一个列表，也许可以尝试以下方法：

1.  应用（）

    ```
    data.frame(t(sapply(dat, function(x) 
      data.frame(chr.pos = unique(x["chr.pos"]), 
                 Start = min(x["nt.pos"]), 
                 End = max(x["nt.pos"]), 
                 GRP = unique(x["GRP"]))))) 
    ```

2.  拉应用（）

    ```
    do.call(rbind, lapply(dat, function(x) 
      data.frame(chr.pos = unique(x["chr.pos"]), 
                 Start = min(x["nt.pos"]), 
                 End = max(x["nt.pos"]), 
                 GRP = unique(x["GRP"])))) 
    ```

两者都会导致：

```
#   chr.pos   Start     End GRP
# 2       1  783605 1177669   2
# 4       2 1670488 1758800   4
# 6       2 1902924 1978088   6 
```

其次，如果它可以很长`data.frame`，那么探索`data.table()`：

```
library(data.table)
DaT <- data.table(do.call(rbind, dat), key = "GRP")
DaT[, list(chr.pos = unique(chr.pos),
           Start = min(nt.pos),
           End = max(nt.pos)), by = key(DaT)]
#    GRP chr.pos   Start     End
# 1:   2       1  783605 1177669
# 2:   4       2 1670488 1758800
# 3:   6       2 1902924 1978088 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:40:59.160

这可以解决问题：（假设`dat`是您的数据框列表。）

```
structure(
    as.data.frame(cbind(do.call(rbind,
                                lapply(dat,
                                       function(x) c(x[["chr.pos"]][1], 
                                                     range(x[["nt.pos"]])))),
                        as.numeric(names(dat)))),
    .Names = c("chr.pos", "Start", "End", "GRP"))

#   chr.pos   Start     End GRP
# 2       1  783605 1177669   2
# 4       2 1670488 1758800   4
# 6       2 1902924 1978088   6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:33:19.953

谢谢斯文，

我用这个以类似的方式做到了

```
N <- length(results)  #
DF <- data.frame(chr=rep(NA, N), Start=rep(NA, N), End=rep(NA,N), Group=rep(NA,N), stringsAsFactors=FALSE)

for (i in 1:length(results)){

  DF[i, ] <- c(unique(results[[i]]$chr.pos), range(results[[i]]$nt.pos)[1], range(results[[i]]$nt.pos)[2],unique(results[[i]]$GRP))

} 
```

# vb.net - 打开未保存的文本文件

> ID：13153674
> 
> 赞同：0
> 
> 时间：2012-10-31T08:12:20.393
> 
> 标签：vb.net, process.start

在我的 vb.NET 项目中，我引用了一个名为`check_output.txt`. 在我打开此文件的代码中，将其写入，然后在默认文本编辑器中显示该文件。我使用的代码是这样的：

```
Dim FILE_NAME As String = Application.StartupPath & "\" & "check_output.txt"

If System.IO.File.Exists(FILE_NAME) = True Then

    Dim objWriter As New System.IO.StreamWriter(FILE_NAME)

    objWriter.Write(txtOutput.Text)
    objWriter.Close()

    System.Diagnostics.Process.Start(FILE_NAME)
Else

    MsgBox("Impossibile trovare il file di testo di default", vbCritical, "Errore")

End If 
```

我想把txt文件当作一个临时文件，所以它总是空的，除非我写进去。但我不想让用户在其中保存，所以当他关闭文件时，应该会出现“另存为”对话框。关闭后文件应返回空。这很难获得吗？我怎样才能做到这一点？

换句话说，我希望编辑器在您执行“文件->新建”时充当...所以您有一个临时文件，而不是存储在硬盘中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:38:49.857

1.  Write your data to the file and save it.
2.  Change the properties of the file to "Read-Only" (this will disallow "Save" in most editors and only allow "Save As".
3.  After the user completes their work (or closes the application, or whatever), reset the file properties and clear the file.

# jquery - 如何从子窗口设置window.opener的onbeforeunload状态？

> ID：13153676
> 
> 赞同：-1
> 
> 时间：2012-10-31T08:12:25.807
> 
> 标签：jquery, internet-explorer-8, popup, parent-child, onbeforeunload

我创建了以下代码，可以在 Firefox 和 Chrome 中顺利运行。在 IE8 中，window.opener.onbeforeunload = null 行不会触发。谁能给我建议如何为 IE8 获得类似的结果，即从子窗口停用父窗口的所有先前 onbeforeunload 设置，然后更改（父）window.location？

谢谢！

```
// this is just the activation of the site's onbeforeunload...
jQuery(document).ready(function(){
 var preventUnloadPrompt;
 jQuery('form').live('submit', function() { preventUnloadPrompt = true; });
 window.onbeforeunload = function() {
  var rval;
  if(preventUnloadPrompt) {
   return;
  } else {
   return 'Do you want to continue?';
  }
  return rval;
 }

//Now when clicking a button on the main site, a popup is opening 
//via popup = window.open{...}. In the popup there is another 
//button "Test" which should set the parent window's onbeforeunload 
//to zero and load another website in there. The function test() is 
//defined in the header, but here it is again to make reading easier:
//function test(){window.opener.onbeforeunload = null;
//window.opener.location="http://www.google.com";}

$("#button").click(function(){
 var content = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" dir="ltr"><head><title>Popup</title><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js?v=1.4.4"></script><script type="text/javascript">function test(){window.opener.onbeforeunload = null; window.opener.location="http://www.google.com";}</script></head><body><div id="popup-message-stopbutton"><input type="button" value="Test" onclick="test()" /></div></body></html>';

 var popup = window.open('','', 'width="100",height="100"');
 popup.document.write(content);
 popup.document.close();
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:21:44.290

尝试使用 jQuery 访问开启器并取消绑定事件，如下所示：

```
$(window.opener).unbind('onbeforeunload'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T01:20:27.730

我看到这是一篇较旧的帖子，但我只是想分享一下我如何让 onbeforeunload 在父窗口中与子窗口解除绑定。希望它会帮助某人。

在父窗口的js中，写一个函数解除绑定事件

```
function unbindOBE(){
     $(window).unbind('beforeunload');
} 
```

在子窗口的 js 中，只需在重新加载或分配或您拥有什么之前调用该函数。

```
window.opener.unbindOBE(); 
```

话虽如此，如果您尝试更改位置，

> window.opener.location="http://www.google.com";

如果您使用其中一种分配或替换方法，效果会更好

```
window.opener.location.assign("http://www.google.com"); 
```

我没有在 IE 中尝试过这个，所以 YMMV

# php - 如何将 for 循环中的值存储到 php 中的会话中，以便我可以单独访问它们？

> ID：13153682
> 
> 赞同：1
> 
> 时间：2012-10-31T08:12:40.857
> 
> 标签：php, session, for-loop

我正在尝试将 的值`"rand".$i`和 的值存储`"fontr".$i`在会话或其他内容中，以便我可以在下一页中访问它们，并且我需要使用`fontr1, fontr2 ...`和`rand1, rand2 ...`作为名称来访问它们。

```
<?php
for($i=1;$i<=$rand;$i++)
{ ?>

<input type=text name=rand<?=$i?> value=" <?php $var1="rand".$i; if(isset($_POST[$var1])) {echo $_POST[$var1]; } else {echo "Rand".$i;} ?> " size=15><BR>

<select name="fontr<?=$i?>">
<?php $var3="fontr".$i; ?>
<option value='Fonts/arial.ttf' <?php if(isset($_POST[$var3]) && $_POST[$var3]=='Fonts/arial.ttf') echo 'selected="selected"'?> >Arial</option>
<option value='Fonts/comic.ttf' <?php if(isset($_POST[$var3]) && $_POST[$var3]=='Fonts/comic.ttf') echo 'selected="selected"'?> >Comic Sans</option>
</select>

<?php } ?> 
```

我知道如何在这样的会话中存储值

```
<?php 
if(isset($_POST['culoaresup']))
$_SESSION['culoaresup'] = $_POST['culoaresup']; ?>

 if(isset($_POST['Vizualizeaza']))
 $_SESSION['rand'] = $rand; 
```

但我不知道如何存储我可以单独访问的 for 循环中的值。

希望你能理解我。你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:27:12.860

```
<?php
   session_start();

   for($i = 0;$i < $rand; $i++) { 
?>
    <input type="text" name="rand[]" value="<?php 
        if(isset($_SESSION[$i][0])) {
            echo $_SESSION[$i][0]; 
        } else {
            echo "Rand" . ($i + 1);
        } ?> " size="15"><BR>

    <select name="fontr[]">
        <option value="Fonts/arial.ttf" <?php 
              if(isset($_SESSION[$i][1]) && $_SESSION[$i][1]=='Fonts/arial.ttf') 
                 echo 'selected="selected"'; ?> >Arial</option>
        <option value="Fonts/comic.ttf" <?php 
              if(isset($_SESSION[$i][1]) && $_SESSION[$i][1]=='Fonts/comic.ttf') 
                 echo 'selected="selected"'; ?> >Comic Sans</option>
    </select>

<?php 
   } 
?> 
```

提交表格后，您可以：

```
<?php
    session_start();

    for($i = 0; $i < count($_POST['rand']); $i++) {
        $_SESSION[$i][0] = $_POST['rand'][$i]; // store the rand
        $_SESSION[$i][1] = $_POST['fontr'][$i]; // store the fontr
    }
?> 
```

您也可以像这样单独定义它

```
$_SESSION['rand' . $i] = $_POST['rand'][$i] 
```

然后你可以调用它，`$_SESSION['rand0']`或者你可以简单地创建一个新变量，比如

```
${'rand' . $i} = $_POST['rand'][$i];
echo $rand0; 
```

我也希望你能理解我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:28:30.950

试试这个：-

```
for($i=1;$i<=$rand;$i++)
{
   $_SESSION['rand'.$i] = $_POST['rand'.$i];
   $_SESSION['fontr'.$i] = $_POST['fontr'.$i];

   echo $_SESSION['rand'.$i]." ".$_SESSION['fontr'.$i]."<br/>";   
} 
```

检索值的方式与输入和选择的 for 循环相同。还有一件事，您必须超过 $rand 值，以便用于检索数据的 for 循环将循环直到您拥有的最后一个数据。

只需尝试运行此代码即可查看结果。

# three.js - Three.js-移植这个自定义着色器

> ID：13153684
> 
> 赞同：0
> 
> 时间：2012-10-31T08:12:46.920
> 
> 标签：three.js

我正在将 WebGL 项目移植到 Three.js。事实上，我对Shader和Custom Shader不是很熟悉，所以我不能使用这个shader。请帮助我在 Three.js 中使用它。

```
<script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;
    varying vec4 color;

    void main(void) {
        gl_FragColor = vec4(color.xyz,1);
    } 
</script>

<script id="shader-vs" type="x-shader/x-vertex">        
    attribute vec4 vertex;      
    attribute vec3 normal;              
    uniform mat4 matrix;
    uniform vec3 diffuse_color;
    uniform mat3 matrixIT;
    varying vec4 color;     

    vec3 SpecularColor = vec3(1.0,1.0,1.0);
    void main(void) {
        vec3 toLight = normalize(vec3(0.0,1.0,1.0));
        vec3 normal_cal = normalize(matrixIT*normal);       
        float NDotL = max(dot(normal_cal, toLight), 0.0);
        vec3 eyeDir = vec3(1.0,1.0,1.0);
        float NDotH = 0.0;
        vec3 SpecularLight = vec3(0.0,0.0,0.0);
        if(NDotL > 0.0)
        {
            vec3 halfVector = normalize( toLight + eyeDir);
            float NDotH = max(dot(normal_cal, halfVector), 0.0);
            float specular = pow(NDotH,25.0);
            SpecularLight = specular * SpecularColor;
        }
        color = vec4((NDotL * diffuse_color.xyz) + (SpecularLight.xyz ), 0.5);
        gl_Position = matrix * vertex;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:33:50.427

乍一看，它看起来像是某种 Phong 光照着色器。由于您要迁移到 Three.js，因此可能值得尝试其内置功能。即创建一个灯光（可能是`THREE.PointLight`或`THREE.DirectionalLight`），将其添加到场景中并[`THREE.MeshPhongMaterial`](https://github.com/mrdoob/three.js/blob/master/src/materials/MeshPhongMaterial.js)用于您的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:36:01.490

这是你的顶点着色器：

```
 uniform vec3 diffuse_color;
    varying vec4 color;     

    vec3 SpecularColor = vec3(1.0,1.0,1.0);
    void main(void) {
        vec3 toLight = normalize(vec3(0.0,1.0,1.0));
        //vec3 normal_cal = normalize(matrixIT*normal);
        vec3 normal_cal = normalMatrix * normal;
        float NDotL = max(dot(normal_cal, toLight), 0.0);
        vec3 eyeDir = vec3(1.0,1.0,1.0);
        float NDotH = 0.0;
        vec3 SpecularLight = vec3(0.0,0.0,0.0);
        if(NDotL > 0.0)
        {
            vec3 halfVector = normalize( toLight + eyeDir);
            float NDotH = max(dot(normal_cal, halfVector), 0.0);
            float specular = pow(NDotH,25.0);
            SpecularLight = specular * SpecularColor;
        }
        color = vec4((NDotL * diffuse_color.xyz) + (SpecularLight.xyz ), 0.5);
        //gl_Position = matrix * vertex;
        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * mvPosition;
    } 
```

片段着色器可以保持不变

这是您的着色器材质定义：

# c++ - Eclipse CDT 无法解析 STL 容器中元素的方法

> ID：13153688
> 
> 赞同：6
> 
> 时间：2012-10-31T08:13:12.133
> 
> 标签：c++, eclipse, stl, eclipse-cdt

我正在使用带有 CDT 的 Eclipse Juno 来使用自定义 makefile 开发我的 C++ 项目。我还在使用 C++11 功能，我必须按照此处关于 SO 的建议使用 Eclipse 的解析器。

问题是 Eclipse 无法解析在 STL 容器元素上访问的方法或字段。例如：

*主应用程序.h*

```
typedef struct _PlayerCalibrationData {
    [...]
    std::string getSamplesStr()
    {
            [...]
    }
} PlayerCalibrationData;

std::vector<MainApp::PlayerCalibrationData> m_calibrationData; 
```

*主应用程序.cpp*

```
m_calibrationData[0].getSamplesStr(); 
```

`getSamplesStr()`将带有下划线并标记为错误，并显示消息“无法解析方法'getSamplesStr'”。

但是，无论我是从 Eclipse 还是从命令行调用它，编译器都不会抱怨。

此外，当我键入时`m_calibrationData.`，所有向量方法都会通过内容辅助弹出（即，这不是 Eclipse 找不到向量包含的问题），但是一旦我通过`[]`or访问元素`at()`，内容辅助就会安静，并且手动键入的任何内容都会被标记作为一个错误。

这不起作用是正常的吗？如果是，有没有办法可以专门关闭基于模板的容器的辅助/校正？

**编辑**

我现在还尝试禁用 c++11 支持，如果我这样做了，问题就消失了——但是当然 c++11 类型和语法无法识别。

**编辑 2**

我导入了第二个项目，输入了完全相同的设置，并且对于这个项目，解析工作正常。唯一的区别是项目布局（makefile 的不同位置）。但即使我删除并重新导入第一个项目，它仍然不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:57:33.280

这对我有用：

“您的项目名称”->右键单击->属性：

C/C++ 常规 -> 预处理器包含路径、宏等 -> 切换到名为“Providers”的选项卡：

*   对于“配置”选择“发布”（然后选择“调试”）

*   关闭所有提供程序，只需选择“CDT GCC 内置编译器设置”

*   取消选中“在项目之间共享设置条目（全局提供者）”

*   在“获取编译器规格的命令：”中添加不带引号的“-std=c++11”（也可以使用引号）

*   点击应用并关闭选项

*   重建索引

这适用于我在家里和工作中的两个 mashine，win7 x64，最新的官方 eclipse， 来自 sourceforge 上的 mingwbuilds 项目的cdt [mingw-w64 gcc 4.7.2](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/64-bit/threads-posix/sjlj/x64-4.7.2-release-posix-sjlj-rev10.7z/download)

# phalcon - Phalcon volt模板引擎

> ID：13153691
> 
> 赞同：1
> 
> 时间：2012-10-31T08:13:27.500
> 
> 标签：phalcon, volt

```
$di = new \Phalcon\DI\FactoryDefault();

/**
 * The URL component is used to generate all kind of urls in the application
 */
$di->set('url', function() use ($config) {
    $url = new \Phalcon\Mvc\Url();
    $url->setBaseUri($config->application->baseUri);
    return $url;
});

$di->set('voltService', function()  {
    $volt = new Phalcon\Mvc\View\Engine\Volt($view, $di);
    $volt->setOptions(array(
        "compiledPath" => "../app/compiled/",
        "compiledExtension" => ".php"
    ));
    return $volt;
});

/**
 * Setting up the view component
 */
$di->set('view', function() use ($config) {
    $view = new \Phalcon\Mvc\View();
    $view->setViewsDir($config->application->viewsDir);
    $view->registerEngines(array(".phtml" => 'voltService'));
    return $view;
}); 
```

我使用这篇文章：[http](http://docs.phalconphp.com/en/0.6.0/reference/volt.html) ://docs.phalconphp.com/en/0.6.0/reference/volt.html ，但提示错误消息

> 注意：未定义变量：查看 /var/www/html/phalconblog/public/index.php 第 40 行
> 
> 注意：未定义的变量：第 40 行 /var/www/html/phalconblog/public/index.php 中的 di
> 
> 致命错误：在第 42 行的 /var/www/html/phalconblog/public/index.php 中调用未定义的方法 Phalcon\Mvc\View\Engine\Volt::setOptions()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:29:06.273

我也试过了，也有类似的问题——不知道为什么。

*编辑*

正确的方法是：

```
// Register Volt as a service
$di->set(
    'volt', 
    function($view, $di) 
    {
        $volt = new Phalcon\Mvc\View\Engine\Volt($view, $di);

        $volt->setOptions(
            array(
                'compiledPath'      => $config->volt->path,
                'compiledExtension' => $config->volt->extension,
                'compiledSeparator' => $config->volt->separator,
                'stat'              => (bool) $config->volt->stat,
            )
        );

        return $volt;
    }
);

// Register Volt as template engine
$di->set(
    'view', 
    function() 
    {
        $view = new \Phalcon\Mvc\View();
        $view->setViewsDir($config->application->viewsDir);

        $view->registerEngines(array(".volt" => 'volt'));

        return $view;
    }
); 
```

以下是一种解决方法，但不建议使用：

```
/**
 * Setting up the view component
 */
$di->set(
    'view', 
    function() use ($config, $di) 
    {
        $view = new \Phalcon\Mvc\View();
        $view->setViewsDir($config->application->viewsDir);

        $volt = new \Phalcon\Mvc\View\Engine\Volt($view, $di);
        $volt->setOptions(
            array(
                'compiledPath'      => $config->volt->path,
                'compiledExtension' => $config->volt->extension,
                'compiledSeparator' => $config->volt->separator,
                'stat'              => (bool) $config->volt->stat,
            )
        );

        /**
         * Register Volt
         */
        $view->registerEngines(array('.phtml' => $volt));

        return $view;
    }
); 
```

# r - 从统计输出创建可发布的表

> ID：13153692
> 
> 赞同：0
> 
> 时间：2012-10-31T08:13:29.043
> 
> 标签：r, statistics, output, publish, tabular

我想知道是否有人可以指出我可以从不同统计测试的输出（在**R**或其他软件中）制作漂亮的可发布表的东西。

现在，我有一个 .txt 格式的大杂乱输出（来自使用 scipy/numpy 的脚本）格式和来自 ks.test 的**R**输出。对于 ks.test 的输出，我在**R**中查看了一些 xtable。但是当将 ks.test 的输出分配给一个字符串时，例如 ks=ks.test(x,y) 然后尝试使用 xtable，我得到了错误：

> 没有适用于“xtable”的方法应用于“htest”类的对象

表格的格式最好是 .pdf 或 .eps（未嵌入）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:34:03.770

如果你想生成 LaTeX 表格，你可以使用`xtable`包，也可以`latex`从`Hmisc`包中使用。您可以将 LaTeX 文件呈现为 pdf，这样出版商可能会接受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:00:49.923

您可能会将`pander`包视为格式化输出的另一种方式。它有几个用于创建最终文件类型的选项，并且确实有一个用于`htest`s 的方法。

但是对于发布，您通常不希望使用与默认输出相同的格式，最好从 htest 对象中提取关键部分并自行格式化。类似`sweave`和的工具`knitr`可用于创建您想要的格式并将重要信息插入到您的格式中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T09:04:28.057

您显示的错误是因为输出`ks.test`不是表格输出，也不是可以`xtable`理解的格式。输出如下所示：

```
> x <- rnorm(50)
> y <- runif(30)
> # Do x and y come from the same distribution?
> (res <- ks.test(x, y))

    Two-sample Kolmogorov-Smirnov test

data:  x and y 
D = 0.46, p-value = 0.0004387
alternative hypothesis: two-sided 
```

这不是真正的表格。为了让它与你一起工作，`ks.test`你需要`xtable`为类编写一个方法`"htest"`（这是由`ks.test`. 返回的对象类型。其他类型的对象已经存在几种方法：

```
> require(xtable)
Loading required package: xtable
> methods(xtable)
 [1] xtable.anova*           xtable.aov*            
 [3] xtable.aovlist*         xtable.coxph*          
 [5] xtable.data.frame*      xtable.glm*            
 [7] xtable.lm*              xtable.matrix*         
 [9] xtable.prcomp*          xtable.summary.aov*    
[11] xtable.summary.aovlist* xtable.summary.glm*    
[13] xtable.summary.lm*      xtable.summary.prcomp* 
[15] xtable.table*           xtable.ts*             
[17] xtable.zoo*            

   Non-visible functions are asterisked 
```

类`"htest"`是相当常见的（它用于大多数而不是所有的 R 经典测试），所以我敢说，没有一个`xtable.htest`是因为像这样的假设检验的结果不适合表格输出——只有例如，在 KS 测试输出中感兴趣的两个数字。

正如我在评论中所说，我只会引用测试统计数据`D`和`p-value`文本中的内联。

如果您有多个测试并想要总结它们，请将多次运行的输出收集`ks.test`到一个数据框中，然后`xtable`在该数据框上使用（这将起作用，因为它有一种方法）。要将多个 ks 测试组合到一个表（一个数据框）中，您可以执行类似的操作

```
df.res <- data.frame(D = c(res$statistic, res$statistic),
                     `p value` = c(res$p.value, res$p.value))
xtable(df.res) 
```

这使：

```
> df.res <- data.frame(D = c(res$statistic, res$statistic),
+                      `p value` = c(res$p.value, res$p.value))
> xtable(df.res)
% latex table generated in R 2.15.2 by xtable 1.7-0 package
% Wed Oct 31 09:19:16 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrr}
  \hline
 & D & p.value \\ 
  \hline
1 & 0.46 & 0.00 \\ 
  2 & 0.46 & 0.00 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

然后查看**xtable**`print.xtable`包的手册，了解如何格式化数据框的名称等以在 LaTeX 输出中获得更好的输出。

 *** * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T08:38:57.573

如果你希望你的表格以 LaTeX 或 HTML 格式打印，你可以试试这个`xtable`包。例如：

```
my.R.table <- matrix(runif(21), ncol=3)
my.x.table <- xtable(my.R.table,
                     caption = c("The long caption for this",
                                 "The short caption"),
                     label = c("my.latex.label"),
                     align = c("l", "l", "r", "c"),
                     digits = 3)
print(my.x.table, caption.placement = "top",
      include.rownames = FALSE, type="html") 
```

对于统计模型，还存在一个名为`stargazer`. 我还没有尝试过这个。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-28T09:33:10.113

根据您使用的统计测试，一个不错的选择可能是 sjPlot： http: [//www.strengejacke.de/sjPlot/](http://www.strengejacke.de/sjPlot/)

它的一些选项是：

*   sjt.corr - 作为 HTML 表的相关性
*   sjt.lm - 作为 HTML 表格的线性模型
*   sjt.lmer - 作为 HTML 表格的线性混合模型
*   sjt.pca - 主成分分析作为 HTML 表

使用“文件”参数，您可以保存输出。

```
library(sjPlot)
sjt.lm(fitted_model, file = "file_name.pdf") 
```

使用上述代码的线性模型的发布就绪表示例（来自： http: [//www.strengejacke.de/sjPlot/sjt.lm/](http://www.strengejacke.de/sjPlot/sjt.lm/)）：

[![在此处输入图像描述](../Images/a1d9be37d026d296b2672da3d9e19157.png)](https://i.stack.imgur.com/wCyp0.png)**

# javascript - JavaScript 解析错误

> ID：13153695
> 
> 赞同：0
> 
> 时间：2012-10-31T08:13:46.767
> 
> 标签：javascript, jquery, d3.js

这基本上是 javascript 问题我试图通过 Ajax 获取数据并将它们放入数组但是当我在控制台中记录数组时出现 Parse 错误。我正在使用 d3.js 库来创建动态图。但我猜这个错误纯粹是由于错误地应用了 Javascript 概念。

```
 var n = 40,
   random = function(){
   d3.json("/server/file/path", function(graphdata){// This is the way we perform ajax call in d3,js
       return graphdata;
     });
   },
   data = d3.range(n).map(random);// Here I am putting into the array n = 40 elements obtained in the ajax call. But I am getting Parse error NaN for number values.

  //Afterwards I am just drawing the graph    
   var margin = {top: 10, right: 10, bottom: 20, left: 40},
  width = 960 - margin.left - margin.right,
  height = 500 - margin.top - margin.bottom;

var x = d3.scale.linear()
.domain([0, n - 1])
.range([0, width]);

var y = d3.scale.linear()
.domain([-1, 1])
.range([height, 0]);

var line = d3.svg.line()
.x(function(d, i) { return x(i); })
.y(function(d, i) { return y(d); });

var svg = d3.select("body").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("defs").append("clipPath")
.attr("id", "clip")
.append("rect")
.attr("width", width)
.attr("height", height);

 svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(d3.svg.axis().scale(x).orient("bottom"));

svg.append("g")
.attr("class", "y axis")
.call(d3.svg.axis().scale(y).orient("left"));

var path = svg.append("g")
.attr("clip-path", "url(#clip)")
.append("path")
.data([data])
.attr("class", "line")
.attr("d", line);

tick();

function tick() {

// push a new data point onto the back
data.push(random());

// redraw the line, and slide it to the left
path
  .attr("d", line)
  .attr("transform", null)
  .transition()
  .duration(500)
  .ease("linear")
  .attr("transform", "translate(" + x(-1) + ")")
  .each("end", tick);

// pop the old data point off the front
data.shift();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:29:51.520

感谢大家。

正如我认为它确实是一个 JavaScript 错误，当尝试绑定代码以使用来自服务器的实际数据生成图形时，ajax 调用获取数据有点晚。因此 JavaScript 解释器正在生成解析错误，因为它期望数据值存在，但 ajax 异步无法完成数据检索。我也做了一些变量全局变量来解决这个问题。

我的解决方案如下

```
 $(function(){
 // data is a global variable
  data = $.ajax({ type:"GET", 
       url:"location/to/fetch/data",
       }).responseText;
   draw();

}
   function draw(){

  var n = 40,
  random = function(){
              var result = $.ajax({
               url : /to/fetch/live data/,
               type:'GET' 
               }).rsponseText;
              return result;
             }

 //Afterwards I am just drawing the graph    
  var margin = {top: 10, right: 10, bottom: 20, left: 40},
   width = 960 - margin.left - margin.right,
  height = 500 - margin.top - margin.bottom;

  x = d3.scale.linear()
 .domain([0, n - 1])
 .range([0, width]);

 y = d3.scale.linear()
 .domain([-1, 1])
 .range([height, 0]);

line = d3.svg.line()
 .x(function(d, i) { return x(i); })
 .y(function(d, i) { return y(d); });

  svg = d3.select("body").append("svg")
  .attr("width", width + margin.left + margin.right)
 .attr("height", height + margin.top + margin.bottom)
  .append("g")
  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  svg.append("defs").append("clipPath")
   .attr("id", "clip")
   .append("rect")
   .attr("width", width)
   .attr("height", height);

  svg.append("g")
   .attr("class", "x axis")
   .attr("transform", "translate(0," + height + ")")
   .call(d3.svg.axis().scale(x).orient("bottom"));

   svg.append("g")
    .attr("class", "y axis")
    .call(d3.svg.axis().scale(y).orient("left"));

   path = svg.append("g")
   .attr("clip-path", "url(#clip)")
   .append("path")
   .data([data])
    .attr("class", "line")
  .attr("d", line);

 tick();
 }
 function tick() {

 // push a new data point onto the back
   data.push(random());

// redraw the line, and slide it to the left
   path
  .attr("d", line)
  .attr("transform", null)
  .transition()
  .duration(500)
  .ease("linear")
  .attr("transform", "translate(" + x(-1) + ")")
  .each("end", tick);

  // pop the old data point off the front
   data.shift();
} 
```

})

# java - 如何在java字符串中用'/'替换'\'

> ID：13153697
> 
> 赞同：9
> 
> 时间：2012-10-31T08:14:08.830
> 
> 标签：java, string

我已经生成了一个文件名并存储在一个字符串变量路径中尝试过使用

```
path=path.replaceAll('\','/') 
```

但这不起作用

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-31T08:23:50.180

`replaceAll()`需求`Strings`作为参数。所以，如果你写

```
path = path.replaceAll('\', '/'); 
```

它失败了，因为你应该写

```
path = path.replaceAll("\", "/"); 
```

但这也失败了，因为字符“\”应该输入“\\”。

```
path = path.replaceAll("\\", "/"); 
```

这在执行过程中会失败`PatternSyntaxException`，因为 fisr`String`是一个正则表达式（感谢@Bhavik Shah 指出）。所以，把它写成一个正则表达式，正如@jlordo 在他的回答中给出的那样：

```
path = path.replaceAll("\\\\", "/"); 
```

是你要找的。

为了优化您的核心，您应该使其独立于操作系统，因此请使用@Thai Tran 的提示：

```
path = path.replaceAll("\\\\", File.separator); 
```

但这失败了`StringIndexOutOfBoundsException`（我不知道为什么）。如果您`replace()`不使用正则表达式，它会起作用：

```
path = path.replace("\\", File.separator); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-31T08:19:33.187

If it is a file path, you should try "File.separator" instead of '\' (in case your application works with Nix platform)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-31T08:28:00.537

您`path=path.replaceAll('\','/');`将无法编译，因为您必须转义反斜杠，

使用`path=path.replace('\\','/');`（它将替换所有出现，请参阅 JavaDoc）

或`path=path.replaceAll("\\\\", "/");`（此正则表达式转义反斜杠）;-)

在评论中有一个解释，为什么你需要 4 个“\”来为一个“\”制作正确的正则表达式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T08:15:27.683

您应该使用该`replace`方法并转义反斜杠：

```
path = path.replace('\\', '/'); 
```

请参阅[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replace%28char,%20char%29)：

```
public String replace(char oldChar, char newChar) 
```

> 返回一个新字符串，该字符串是用 newChar 替换此字符串中所有出现的 oldChar 所产生的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T09:55:24.863

由于它是一个文件路径，因此您完全不需要执行此操作。Java 理解这两种语法。如果您尝试将 File 转换为 URL 或 URI，它具有执行此操作的方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-31T08:19:13.827

the `\` is not just some character in java.

it has its significance, some characters when preceeded by `\` have a special meaning,

refer [here](http://docs.oracle.com/javase/tutorial/java/data/characters.html) section `escape sequence` for details

Thus if you want to use just `\` in your code, there is an implementation `\\` for it.

So replace

```
path=path.replaceAll("\","/") 
```

with

```
path=path.replaceAll("\\","/") 
```

And this will fail during execution giving you a `PatternSyntaxException`, because the first String is a regular expression So based on @jlordo answer , this is the way to go

```
path = path.replaceAll("\\\\", "/"); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-31T09:20:37.300

```
 String s="m/j/"; 
   String strep="\\\\";
   String result=s.replaceAll("/", strep);
    System.out.println(result); 
```

# android - SQLiteOpenHelper 更新数据库中的表

> ID：13153704
> 
> 赞同：0
> 
> 时间：2012-10-31T08:14:22.923
> 
> 标签：android

我有一个扩展 SQLiteOpenHelper 的类。重载的两个函数是

```
@Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase dataBase, int oldVersion,
            int newVersion) {

    } 
```

在 OnCreate 函数中，我添加 SQL 脚本来创建表。现在，如果我想升级数据库中的表怎么办。

何时调用 onUpgrade 函数？

oldVersion 和 newVersion int 值是多少？

这些是否允许我在我的数据库上创建版本控制？

就像在版本 2 中我想添加一个新表一样，在版本 3 中我想向现有数据库表添加一个新列？

我怎样才能做到这一点 ？

每次我创建类的对象时都会调用 onCreate 函数，还是 Android 只会在安装应用程序时调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:32:51.957

> `oldVersion`和`newVersion`int 值是什么？

这些用于对数据库进行版本控制。数据库版本在 SQLiteOpenHelper 的构造函数中传递。

> 什么时候`onUpgrade`调用函数？

`onUpgrade`当你`newVersion`>`oldVersion`

> 这些是否允许我在我的数据库上创建版本控制？

是的，这些值允许您对数据库进行版本控制。

> 就像在版本 2 中我想添加一个新表一样，在版本 3 中我想向现有数据库表添加一个新列？

在该`onUpgrade`方法中执行一个`CREATE TABLE`查询，该查询将在您的数据库中创建一个新表。同样，如果要添加新列，请使用该`ALTER TABLE`语句。

> 每次我创建类的对象时都会调用 onCreate 函数，还是 Android 只会在安装应用程序时调用它？

`OnCreate`如果您的应用程序尚未创建数据库，则会调用它，例如 - 您第一次启动您的应用程序，在清除其数据后第一次运行该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:20:15.497

I give you a snipped, here i set database version to 1\. And if i need to upgrade all database, i'll make it 2 or something else and SQLiteOpenHelper will know that this is a new version of database, and call onUpgrade method...

```
private final int DATABASE_VERSION = 1;
private final String DATABASE_NAME = "yourDatabase";

private class DBOpenHelper extends SQLiteOpenHelper {

    public DBOpenHelper(Context context) {
        super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_SIGNIN_FIRST);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
         // you can drop table and re create it here.
    }

} 
```

# matlab - 如何读取由数字和文本值组成的单元格中的特定字符？

> ID：13153710
> 
> 赞同：0
> 
> 时间：2012-10-31T08:14:57.953
> 
> 标签：matlab

我想从包含数字和文本的混合单元格中读取（在 matlab 中）特定字符。我怎么能在matlab中做到这一点？有人可以帮我写代码吗，拜托。

这是示例：

* * *

r1200i000-0ln140010.LID

这表示单元格中的文件名。我在单列中有超过 100000 行。我想读取第 14 个和第 15 个字符（这里是 14）并将这个值写在同一行的不同列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:16:14.300

如果您将字符串（单元格的内容）视为字符数组，则可以使用 (n:m) 约定索引各个成员，即

```
>> string = 'a string';
>> part = string(3:4)
st 
```

请记住，输出也将是一个字符串。如果您想将其用作数字，则可以使用[str2num](http://www.mathworks.co.uk/help/matlab/ref/str2num.html)。

# windows - 使 Metro 磁贴出现在第一个视图中

> ID：13153716
> 
> 赞同：0
> 
> 时间：2012-10-31T08:15:29.733
> 
> 标签：windows, windows-8, microsoft-metro

我有一个快捷方式，用于在 Windows 8 中创建 Metro 磁贴。当我将快捷方式放在 中`%appdata%\Microsoft\Windows\Start Menu\Programs`时，磁贴出现在我需要滚动查看它的最后。有没有办法控制排序，让它总是出现在第一个屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:59:55.750

没有。Windows 8 的基本主题之一是用户负责，因此一般来说，不允许开发人员在其应用程序中所做的任何会覆盖或破坏用户对其体验的控制的事情。用户当然可以在开始屏幕上将磁贴移动到任何他或她想要的位置。

# ios5 - 在iOS中拍摄之前可以调整图片的亮度吗？

> ID：13153723
> 
> 赞同：1
> 
> 时间：2012-10-31T08:15:38.780
> 
> 标签：ios5, uiimagepickercontroller, brightness

像缩放一样，我们也可以在使用 UIImagePickerController 或任何其他方式捕获图像之前使用滑块调整亮度吗？

# android - ListView OnClickListener 没有提供想要的结果

> ID：13153725
> 
> 赞同：0
> 
> 时间：2012-10-31T08:15:39.530
> 
> 标签：android, listview, onitemclicklistener

我想使用 ListView ClickListener 在 ListView 中获取所选子项的名称，但它始终将项目的位置返回为 0，这是不正确的，因为我在列表视图中有 5 个子项。这是列表视图：

```
private static org.secure.sms.Main.DiscussArrayAdapter adapter;

    ListView childView = (ListView)findViewById(R.id.listViewChild);
    adapter = new DiscussArrayAdapter(getApplicationContext(), R.layout.listitem_discuss);
    childView.setAdapter(adapter);
    adapter.add(new OneComment(true,c,cn.getTime()));

    childView.setOnItemClickListener(new AdapterView.OnItemClickListener()                      
    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
    {                                              
    CreateAlertDialog(parentFileAddress);
    String a = childView.getAdapter().getItem(position).toString();
    }}); 
```

这是我将值传递给适配器的类：

```
public class OneComment {
    public boolean left;
    public String comment;
    public long timeLeft;

    public OneComment(boolean left, String comment,long timeLeft) 
    {
        super();
        this.left = left;
        this.comment = comment;
        this.timeLeft = timeLeft;
    }
} 
```

这是处理适配器功能的类：

```
public class DiscussArrayAdapter extends ArrayAdapter<OneComment> {

    private TextView countryName;
    private List<OneComment> countries = new ArrayList<OneComment>();
    private LinearLayout wrapper;
    public View row;

    @Override
    public void add(OneComment object) 
    {
        try
        {
            countries.add(object);
            super.add(object);
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in add() of DiscussArrayAdapter.java");
        }
    }

    public DiscussArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public int getCount() 
    {
        try
        {
        return this.countries.size();
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in getCount() of DiscussArrayAdapter.java");
        }
        return this.countries.size();
    }

    public OneComment getItem(int index)
    {
        try
        {
        return this.countries.get(index);
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in getItem() of DiscussArrayAdapter.java");
        }
        return null;        
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        try
        {
        row = convertView;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.listitem_discuss, parent, false);
        }

        wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

        OneComment coment = getItem(position);

        countryName = (TextView) row.findViewById(R.id.comment);

        countryName.setText(coment.comment);

        TextView TimeLeft = (TextView) row.findViewById(R.id.timeleft);

        int hours,minutes,seconds; 

        if(coment.timeLeft > 0) // When the time is greater than 0
        {
            if(TimeLeft == null)
            {
                ((ViewGroup) row).addView(TimeLeft);
            }

            long t = coment.timeLeft;

            seconds = (int) (t  / 1000) % 60 ;
            minutes = (int) (t / (1000*60)) % 60;
            hours = minutes / 60;

            TimeLeft.setText("Time Remaining: "+hours+" : "+minutes+" : "+seconds); 
        }
        else
        {
            if(TimeLeft != null)
            {
                ((ViewGroup)TimeLeft.getParent()).removeView(TimeLeft); 
            }   
        }

        wrapper.setGravity(coment.left ? Gravity.LEFT : Gravity.RIGHT);

        return row;
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in View getView(int position, View convertView, ViewGroup parent) of DiscussArrayAdapter.java");
        }
        return row;
    }
} 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:46:03.217

```
 childView.setOnItemClickListener(new AdapterView.OnItemClickListener()                      
    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
    {                                              
    CreateAlertDialog(parentFileAddress);
    String a = childView.getAdapter().getItem(position).toString();
    }}); 
```

修改上面的代码如下：-

```
childView.setOnItemClickListener(new OnItemClickListener()                      
    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
    {                                              
    CreateAlertDialog(parentFileAddress);
    String a = childView.getItemIdAtPosition(position).toString();
    }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:49:04.883

//带有onclick的数组适配器。

```
public class DiscussArrayAdapter extends ArrayAdapter<OneComment> {

    private Vector<OneComment> countries;
    Context context;

    public View row;

    /**
     * Method just to test the items
     */
    public void AddTestItems(){

        for(int i = 0; i<5 ; i++){
            OneComment comment = new OneComment(true, "India"+ i, System.currentTimeMillis());
            countries.add(comment);
        }
    }

    public DiscussArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        countries = new Vector<OneComment>();
        //Remove it f you do not want to perform test cases. Just to test the listview.
        AddTestItems();
        this.context = context;
    }

    @Override
    public void add(OneComment object) {
        countries.add(object);
        super.add(object);
    }

    @Override
    public int getCount() {
        return countries.size();
    }

    @Override
    public OneComment getItem(int position) {
        return countries.elementAt(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        row = convertView;
        Holder holder = null;
        if(row == null){
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.listitem_discuss, parent, false);
            holder = new Holder();
            holder.countryName =  (TextView) row.findViewById(R.id.comment);
            holder.wrapper = (LinearLayout) row.findViewById(R.id.wrapper);
            holder.timeLeft = (TextView) row.findViewById(R.id.timeleft);
            row.setTag(holder);
        }else{
            holder = (Holder) row.getTag();
        }

        OneComment coment = countries.get(position);

        holder.countryName.setText(coment.comment);

        int hours,minutes,seconds; 

        if(coment.timeLeft > 0) // When the time is greater than 0
        {
            holder.timeLeft.setVisibility(View.VISIBLE);
            long t = coment.timeLeft;

            seconds = (int) (t  / 1000) % 60 ;
            minutes = (int) (t / (1000*60)) % 60;
            hours = minutes / 60;

            holder.timeLeft.setText("Time Remaining: "+hours+" : "+minutes+" : "+seconds); 
        }
        else
        {
            holder.timeLeft.setVisibility(View.GONE);
        }

        holder.wrapper.setGravity(coment.left ? Gravity.LEFT : Gravity.RIGHT);

        row.setOnClickListener(new OnClickListenerOneComment(position));

        return row;
    }

    /**
     * Class which sets the click listener for the rows in the list.
     */
    public class OnClickListenerOneComment implements OnClickListener{

        int position;

        public OnClickListenerOneComment(int position){
            this.position = position;
        }

        public void onClick(View v) {
            //Perform whatever you wanna do on click here.
            Toast.makeText(context, position + "", Toast.LENGTH_SHORT).show();

        }

    }

    /**
     * Class to create a holder for all the inflated elements for your view.
     * Best way to do it.
     *
     */
    static class Holder{

        TextView countryName;
        TextView timeLeft;
        LinearLayout wrapper;
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T08:49:03.377

试试这个 ：

```
static ArrayList<OneComment> oneComment; 
```

现在在您的项目中单击：

```
public void onItemClick((AdapterView<?> parent, View v, int position, long id) 
{
   String a = oneComment.get(pos).comment;
} 
```

您可以获得该职位的 listitem 值。

# asp.net - 如何在 ASP.Net 的 CKEditor 中获取上传图像的 URL

> ID：13153728
> 
> 赞同：0
> 
> 时间：2012-10-31T08:15:47.937
> 
> 标签：asp.net

我想在 ASP.Net 的 CKEditor 中获取上传图像的 URL。谁能告诉我如何将 URL 存储在字符串中？每次上传图片时我都想要 URL。我已经结合了 CKEditor 和 CKFinder。

```
string urlvalue = CKEditor1.FilebrowserImageUploadUrl.ToString(); 
```

这让我回来了

```
ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Image 
```

但我只想要上传图片的 URL，如下所示：

```
/Novo-app-Backend/userfiles/images/Bulletin/146632_Papel-de-Parede-WebDeveloper_1280x800.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:40:15.240

我想你可以在 .ashx 文件中获取它。希望这个网址能帮到你

[http://www.codedigest.com/Articles/ASPNET/423_Upload_Images_and_Integrate_with_CKeditor_in_AspNet.aspx](http://www.codedigest.com/Articles/ASPNET/423_Upload_Images_and_Integrate_with_CKeditor_in_AspNet.aspx)

# javascript - 如何读取 Localizable.strings 的内容并将其放入 UIWebView

> ID：13153732
> 
> 赞同：0
> 
> 时间：2012-10-31T08:16:13.907
> 
> 标签：javascript, objective-c, ios, uiwebview, localizable.strings

在我的应用程序中，我有一个包含以下内容的文本文件：

```
<html>
    <style rel="stylesheet" type="text/css">
        body {
            font-family: Arial, sans-serif;
            font-size: 18px;
            color: #333333;
            padding: 14px;
            text-align: justify;
        }
        h2 {
            font-size: 18px;
        }
    </style>
    <body>
        <p>
        This is the first statement.
        <br>
        This is the second statement.
        </p>
    </body>
</html> 
```

此数据将加载到 UIWebView 并且一切正常。但是，我希望文本可本地化，因此我正在考虑将它们放入 Localizable.strings。所以，Localizable.strings 有这样的东西：

```
FIRST_STATEMENT = "This is the first statement";
SECOND_STATEMENT = "This is the second statement"; 
```

现在，问题是，我将如何访问 Localizable.strings 中的数据，以便将它们放入 UIWebView 对象的内容中？我正在考虑javascript，但我不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:30:56.723

可以尝试制作一个html文件模板并放

> %@

在您想要本地化字符串的地方/标签处，然后将模板文件放在 App Bundle/Documents 目录中并使用它-

> NSString *anHtmlStr = [[NSBundle mainBundle] pathForResource:@"templateFile" ofType:@"html"];//如果文件在App Bundle中否则使用
> 
> //NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
> 
> anHtmlStr = [NSString stringWithContentsOfFile:anHtmlStr 编码:NSUTF8StringEncoding 错误:&err];
> 
> anHtmlStr = [NSString stringWithFormat:anHtmlStr,NSLocalizedString(@"key", @"comment")];
> 
> [webView loadHTMLString:anHtmlStr baseURL:baseURL];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:03:43.577

从 UIWebView 来看，我假设您正在使用 xcode 和 Objective-c。你可以这样做：

```
// message body
NSString *htmlString = [NSString stringWithFormat:
            @"<body>"
            "<p>"
            "%@" // first statement.
            "<br />"
            "%@" // second statement
            "<br />"
            "%d" // some integer value
            "</p>"
            "</body>",
            NSLocalizedString(@"This is the first statement.", nil),
            NSLocalizedString(@"This is the second statement.", nil),
            intSomeValue]; 
```

您可以将字符串拆分为多行。顺便说一句，如果您有很多文本，那么您确实需要注释行来跟踪哪个 %@ 表示什么字符串替换值。

# android - 没有得到包名

> ID：13153733
> 
> 赞同：1
> 
> 时间：2012-10-31T08:16:53.473
> 
> 标签：android

我正在尝试从原始文件夹中动态检索文件，代码如下

```
try{
        DataInputStream dataIO= new DataInputStream(getResources().getIdentifier("raw/"+chapter, null ,<what to write>);
        String strLine= null;
        while((strLine = dataIO.readLine())!=null){
            buffer.append(strLine);
            buffer.append("\n");
        }
        dataIO.close();
    }catch(Exception e){} 
```

如果我直接在“要写的内容”部分中键入包名称，则会显示错误。请给出一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:53:00.830

假设您要动态检索原始资源的 id，以下代码片段将很有用：

```
int id = getResources().getIdentifier(chapter, "raw", getPackageName()); 
```

并且您的 DataInputStream 对象应该这样构造：

```
DataInputStream dataIO= new DataInputStream(getResources().openRawResource(id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:54:04.183

完全限定的资源名称的格式为“package:type/entry”，您的代码中缺少该名称。我使用下面的代码来访问原始资源。

getResources().getIdentifier("package:type/entry", null, null);

# c++ - 指向类成员函数的泛型函数指针

> ID：13153738
> 
> 赞同：0
> 
> 时间：2012-10-31T08:17:00.820
> 
> 标签：c++, function-pointers

我怎样才能拥有通用函数指针。考虑下课。

```
#ifndef PERSON_HPP_
#define PERSON_HPP_

#include <string>

class Person {
public:
  Person() {
  }
  void SetName(std::string person_name) {
    m_name = person_name;
  }
  void setDept(std::string dept_name) {
    m_dept = dept_name;
  }
  void setAge(int person_age ) {
    m_age = person_age;
  }
  std::string getName() {
    return m_name;
  }
  std::string getDept() {
    return m_dept;
  }
  int getAge() {
    return m_age;
  }
private:
  std::string m_name;
  std::string m_dept;
  int m_age;
};

#endif 
```

我想将函数指针存储在`std::vector`for `setName`, `setDept`,`constructor`等等`...`

对于正常功能，我可以使用以下方法实现此目的

```
#include <vector>

int mult(int a) { 
  return 2*a; 
}

int main()
{
    int b;

    std::vector<void *(*)(void *)> v;
    v.push_back((void *(*)(void *))mult);
    b = ((int (*)(int)) v[0])(2);        // The value of b is 2.

    return 0;
} 
```

`Boost`在我的情况下不允许。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:25:39.973

你可以写：

```
// Pointer to member function as a data type. 
typedef void (Person::*MethodPtr)(std::string); 
std::vector<MethodPtr> v; 
```

指向成员的指针与任何其他数据类型没有任何不同。只有它应该用作二元运算符：

```
Person *bad_guy = ...;
bad_guy->*v[4]("abcd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:27:14.597

似乎您想避免重写该`getter/setter`方法，该方法通常内部有类似的代码。
但是，将函数指针用于此类任务是一个坏主意，因为它会降低可读性，增加复杂性并且不允许编译器进行与**内联**相关的优化。

如果您想自动生成代码以供使用，请`getter/setter`使用具有生成 getter/setter 功能的编辑器，例如 eclipse，或者在这种情况下您可以求助于宏：

```
#define SETTER(TYPE,FIELD) \
  set##FIELD (const TYPE FIELD) \
  { \
    this->m_##FIELD = FIELD; \
  }
#define GETTER(FIELD) \
  get##FIELD () const \
  { \
    return this->m_##FIELD; \
  } 
```

并将其用作，

```
class Person {
public:
  Person() {
  }
  void SETTER(std::string, name);
  void SETTER(std::string, dept);
  void SETTER(int, age);

  int GETTER(name);
  int GETTER(dept);
  int GETTER(age);

private:
  std::string m_name;
  std::string m_dept;
  int m_age;
};

#undef SETTER
#undef GETTER 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:37:06.403

如果您*确实*需要将成员指针转换为通用类型（如 void*），您可以执行以下操作：

```
template <typename T>
void* castToVoidStar(T x) {
  return *reinterpret_cast<void**>(&x);
}

void *afterCast = castToVoidStar(&Person::getName) 
```

但是，我认为这样做并不明智。C++ 有类型安全是有原因的。

# jquery - 将列表项动态添加到 j-Query 移动列表视图

> ID：13153739
> 
> 赞同：2
> 
> 时间：2012-10-31T08:17:02.770
> 
> 标签：jquery, html, listview, jquery-mobile

我正在尝试使用 j query mobile 填充列表视图

我的html代码是

```
<!DOCTYPE html> 
```

```
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>

<title>Demo Page</title> 
```

```
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css"/>

function onDeviceReady() {}
document.addEventListener("deviceready", onDeviceReady, false);

function Button_onclick() {

for(i=0; i < 3; i++){
        $("#numbers").append('<li>' +i+'</li>' );
} 
```

}

```
<div >
    <input id="Click_Button" type="button" value="Submit" onclick="Button_onclick()" />
</div>

<div id="divList" data-role="content">
    <ul id="numbers" data-role="listview" data-inset="true"> </ul>
</div> 
```

预期结果是这样的

![结果我预期](../Images/daea610a1350acb46fdb24c210e0caca.png)

但我得到的结果是这样的

![获得的结果](../Images/8958c7ad8761afd0a2bc8e770a714cb0.png)

谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:52:49.513

因为您动态更改列表视图，所以您需要刷新它以便 JQM 应用正确的样式。每次将一个（或多个）项目添加到列表时，您都需要执行此操作。

这可以通过以下语句来实现：

```
$('#numbers').listview('refresh'); 
```

如果您想了解更多相关信息，我想推荐您参考 JQM 文档：http: [//jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html)（更新列表，位于页面底部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:21:44.413

附加这个`onbuttonclick.`

```
$("#numbers").append('<li style="list-style-position:inside;border: 1px solid black;">'+i+'</li>' ); 
```

`li style="list-style`将`li`文本保留在内部并 `border`在周围创建框`li`

并将其用于第一个和最后一个 li 项目。

```
//for first child
li:last-child{
border-bottom-left-radius: 6px;
border-bottom-right-radius: 6px;
}
//for last child
li:first-child{
border-top-left-radius: 6px;
border-top-right-radius: 6px;
} 
```

# html - 有没有办法在表单中提交跨度的 innerHTML？

> ID：13153743
> 
> 赞同：2
> 
> 时间：2012-10-31T08:17:17.580
> 
> 标签：html, forms

我有一个 span 元素，它打开一个日期选择器，然后在选择后显示日期。

有没有办法将其内容与所有其他值一起发送？

我正在使用一个隐藏的输入，它在跨度发生变化时采用它的值，所以我没有被卡住，但我想知道是否有更直接的解决方案。

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:23:53.160

查看 W3C HTML 4.01 规范[here(1)](http://www.w3.org/TR/html401/interact/forms.html#control-name)和[here(2)](http://www.w3.org/TR/html401/interact/forms.html#submit-format)，只有成功的控件才会在表单提交时发送。

成功的控件在第二个链接中定义，而哪些元素被视为控件在第一个链接中。

正如我们所料，只有与表单相关的标签才被认为是有效的控件，所以答案是**否定**的，我们不能将 span 元素与表单一起提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:24:38.333

这似乎非常模糊。访问元素内容的最“直截了当”的解决方案是使用 javascript，但是您想将您的价值发送到哪里？一个.js文件？一个PHP文件？

在任何使用 javascript 的地方，您都可以直接访问 span 的值，但究竟发生了什么？当您说它“打开”一个日期选择器时，这是否意味着它包含一个小部件、另一个 HTML 元素，或者日期选择器也是一个输入？请更具体地描述问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:01:40.397

在 span 元素而不是输入框中显示日期的原因是因为我不希望用户能够手动输入日期。

我刚刚发现文本输入有一个只读属性。使用它而不是那个解决方法可以解决我的问题。

无论如何，感谢我在自己寻找解决方案时收到的答案！

# c# - 如何暂停和继续 TPL 任务？

> ID：13153745
> 
> 赞同：2
> 
> 时间：2012-10-31T08:17:22.833
> 
> 标签：c#, multithreading, task-parallel-library

我有几个后台任务（TPL 任务）按各自的时间表运行的场景。任务 1 被认为具有比任务 2 更高的优先级。

如果调度程序要运行任务 1，我需要检查任务 2 是否正在运行并在任务 1 完成执行时暂停它。

这甚至可能吗？如果是，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:01:14.947

您可以使用信号构造来实现此目的。

```
static ManualResetEvent mre = new ManualResetEvent(false);

var Task1=Task.Factory.StartNew(() =>
{
    Console.WriteLine("Executing Task 1");
    Thread.Sleep(2000); //A Long running operation
    Console.WriteLine("Task 1 Completed");
    mre.Set(); //signal the task completion to task 2.
});

var Task2=Task.Factory.StartNew(() =>
{
    if (!Task1.IsCompleted) //check if task1 is completed.
    {
        mre.WaitOne(); //wait until Task 1 Completes
        Console.WriteLine("Executing Task 2");
        Thread.Sleep(2000);
        Console.WriteLine("Task 2 Completed");    
        doSomeTask();
    }
     else
    {
        //Task 1 is already completed
        doSomeTask();
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T21:44:11.977

简单，非阻塞的方法是`Task.Delay`：

[http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.delay(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.delay(v=vs.110).aspx)

```
// Some code here

await Task.Delay(2000); // Pause for 2 seconds, without blocking

// Code to execute after waiting 
```

# haskell - 使用 cabal 构建黑线鳕文档时出错

> ID：13153747
> 
> 赞同：0
> 
> 时间：2012-10-31T08:17:31.147
> 
> 标签：haskell, cabal, haddock

我目前正在Haskell 上开发[小型应用程序。](https://github.com/m0nhawk/XComposeChecker)我也有所有记录`main`。但`cabal haddock --executables`显示错误：

```
Running Haddock for XComposeChecker-0.1...
Preprocessing executables for XComposeChecker-0.1...
Warning: The documentation for the following packages are not installed. No
links will be generated to these packages: rts-1.0
haddock coverage for ./XComposeChecker.hs:    8/13  62%
Warning: Couldn't find TyThing for exported Main.main: main:Main.main; not documenting.
haddock coverage for dist/build/tmp3599/./Main.hs:     1/2  50%
Warning: Main: could not find link destinations for:
    Main.main
Documentation created: dist/doc/html/XComposeChecker/checker/index.html 
```

而`Main.hs`它本身：

```
import Text.ParserCombinators.Parsec
import System.Directory
import System.FilePath

import XComposeChecker

-- | Main
main = do
         homedir <- getHomeDirectory
         result <- parseFromFile parseXComposeFile (joinPath [homedir, ".XCompose"])
         print result 
```

为什么`haddock`找不到文档`main`？

使用`ghc-7.0.4`,`cabal-1.10.2.0`和。`haddock-2.9.2`_`Fedora 17`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:18:03.470

黑线鳕文档必须附加到类型签名中。试试这个：

```
-- | Main
main :: IO ()
main = do
    print 3 
```

**补充：**还需要补充：

```
module Main(main) where 
```

在 的开头`Main.hs`，这允许`haddock`查找和记录`main`函数。

# iphone - 如果用户在 textFields 为空时按下提交按钮，则摇动 UIAlertView

> ID：13153749
> 
> 赞同：3
> 
> 时间：2012-10-31T08:17:50.180
> 
> 标签：iphone, ios, ipad, uialertview

`UIAlertView`如果用户按下提交按钮而不在文本字段中输入任何数据，我想动摇。在iOS中可以吗？

![在此处输入图像描述](../Images/3ccdd72d72fb286e9fd5ff670c5de00c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:25:31.647

首先添加里面的头文件添加

```
int direction;
int shakes; 
```

用于防止 UIAlertView 关闭。请参阅[keep-uialertview-displayed](https://stackoverflow.com/questions/9200616/keep-uialertview-displayed)链接。另请参阅[prevent-alertview-dismissal](https://stackoverflow.com/questions/12802709/prevent-alertview-dismissal)链接。

使用 UIAlertView 委托：

```
- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
  if (buttonIndex == 0)
    //do here something
  else if (buttonIndex == 1){
    if(txtField.text.length == 0 || txtField1.text.length == 0) //check your two textflied has value
    {
      direction = 1;
      shakes = 0;
    }
  }
} 
```

添加这个方法：

```
-(void)shake:(UIAlertView *)theOneYouWannaShake
{
  [UIView animateWithDuration:0.03 animations:^
                                  {
                                    theOneYouWannaShake.transform = CGAffineTransformMakeTranslation(5*direction, 0);
                                  } 
                                  completion:^(BOOL finished) 
                                  {
                                    if(shakes >= 10)
                                    {
                                      theOneYouWannaShake.transform = CGAffineTransformIdentity;
                                      return;
                                    }
                                    shakes++;
                                    direction = direction * -1;
                                    [self shake:theOneYouWannaShake];
                                  }];
} 
```

请参阅[此处有关动画的更多信息](https://stackoverflow.com/questions/10294451/animating-uitextfield-to-indicate-a-wrong-password)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:45:34.387

[ShakingAlertView](https://github.com/stringer630/ShakingAlertView)是实现此功能的 UIAlertView 子类。

免责声明：我是 ShakingAlertView 的开发者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:25:16.467

这里的代码调用此方法作为验证失败

```
- (void)animateView 
{
  CAKeyframeAnimation *animation;
        animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
        animation.duration = 2.0;
        animation.cumulative = NO;
        animation.repeatCount = MAXFLOAT;
        animation.values = [NSArray arrayWithObjects:
                            [NSNumber numberWithFloat: 0.0], 
                            [NSNumber numberWithFloat: DEGREES_TO_RADIANS(-4.0)], 
                            [NSNumber numberWithFloat: 0.0],
                            [NSNumber numberWithFloat: DEGREES_TO_RADIANS(4.0)],
                            [NSNumber numberWithFloat: 0.0], nil];
        animation.fillMode = kCAFillModeBoth;
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
        animation.removedOnCompletion = NO;
        [[alertView layer] addAnimation:animation forKey:@"effect"];
} 
```

每当你想停止动画时调用这个动画

```
- (void)stopAnimatiomn
{
    [[alertView layer] removeAnimationForKey:@"effect"];
} 
```

# php - PHP 给出了奇怪的差异。及时

> ID：13153750
> 
> 赞同：0
> 
> 时间：2012-10-31T08:17:52.907
> 
> 标签：php

嗨，我有一个脚本，它的返回时间差异。在差异上。当所有计算机都在同一个网络上时，它在站点上的返回时间相同，但当 1 个比较时。在差异。网络它返回差异。时间

我正在为此苦苦挣扎我知道 php 是服务器端语言我已经检查过没有任何 JavaScript 代码因此它不会占用客户端时间

它的使用

```
 <?php
 echo time();
 ?> 
```

我无法发布完整代码，但它使用 time() 然后从保存的 mysql 时间中减去

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:25:43.207

我想你可能想设置时区

```
date_default_timezone_set('UTC'); 
```

# erlang - RabbitMQ in Action:queue in cluster

> ID：13153755
> 
> 赞同：0
> 
> 时间：2012-10-31T08:18:19.443
> 
> 标签：erlang, rabbitmq

> Not to worry: you can have your consumers reconnect to the cluster and recreate the queues, right? Only if the queues weren’t originally marked durable. If the queues being re-created were marked as durable, redeclaring them from another node will get you an ugly 404 NOT_FOUND error. **This ensures messages in that queue on the failed node don’t disappear when you restore it to the cluster.** The only way to get that specific queue name back into the cluster is to actually restore the failed node. But if the queues your consumers try to re-create are not durable, the redeclarations will suc- ceed and you’re ready to rebind them and keep trucking.

In the author says that durable queue cannot be redeclared for eusuring data not lossing , How to comprehend this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:47:22.223

问题在于 RabbitMQ 将发布的消息保存在哪里。如果您在节点 A 中声明一个队列，则队列消息将存在于该节点中。复制的是队列元数据，即队列属性，而不是消息。因此，如果节点 A 死亡，那么在该节点中，您将拥有已发布到该队列的消息。

因此，假设现在您转到节点 B 并重新声明该队列，该队列也是持久的，就像在节点 A 中一样。如果允许该过程，那么您将丢失来自节点 B 的所有消息，因为代理会认为该队列存在在节点 B。

# javascript - 弹出窗口始终在同一个选项卡中打开

> ID：13153758
> 
> 赞同：0
> 
> 时间：2012-10-31T08:18:33.173
> 
> 标签：javascript, html, css

当用户单击它时，我需要一直打开一个新选项卡。但目前在我的实现中，单个新选项卡一直在刷新。

这是我的代码

```
<a target="_new" href="http://mylink" class="personallink"><img src="myimage.png" alt="Personal"></a> 
```

如何始终在单击时创建一个新选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:23:07.570

代替

```
<a target="_new" href="http://mylink" class="personallink"><img src="myimage.png" alt="Personal"></a> 
```

采用

```
<a target="_blank" href="http://mylink" class="personallink"><img src="myimage.png" alt="Personal"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:22:46.187

```
<a target="_blank" href="http://mylink">My Link</a> 
```

# qt4 - 如果我不指定它的父级，这个小部件会被删除吗？

> ID：13153759
> 
> 赞同：0
> 
> 时间：2012-10-31T08:18:37.130
> 
> 标签：qt4

假设我有一个堆叠的小部件，我使用以下代码，

```
QWidget *a = new QWidget; // no qobject parent
stackedWidget->addWidget (a); // does this set the parent of "a" ? 
```

当我删除stackedWidget时，我不需要手动删除“a”，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:24:03.973

根据 Qt 文档：“addWidget() 将给定的小部件附加到 QStackedWidget 并返回索引位置。小部件的所有权传递给 QStackedWidget。”

所以我认为你是对的！

# php - XML 解析成 PHP

> ID：13153762
> 
> 赞同：-2
> 
> 时间：2012-10-31T08:18:41.830
> 
> 标签：php, xml-parsing

我需要帮助将具有许多级别节点的 XML 解析为 PHP，如下所示：

**目录.xml**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Catalog>
<Category>
<Name>Biscuit</Name>
<Type>
<Type1>Chocolate Chips</Type1>
<Ingredient>Flour, Chocolate Chips</Ingredient>
<Duration>15 minute Oven Bake</Duration>
</Type>
<Type>
<Type2>Lemon Puff</Type2>
<Ingredient>Flour, Lemon Extract</Ingredient>
<Duration>15 minute Oven Bake</Duration>
</Type>
</Category>
<Category>
<Name>Cake</Name>
<Type>
<Type1>Fruit Cake</Type1>
<Ingredient>Flour, Egg, Fresh Cream, Fruits</Ingredient>
<Duration>30 minute Conventional Oven Bake</Duration>
</Type>
<Type>
<Type2>Mango Cake</Type2>
<Ingredient>Flour, Egg, Fresh Cream, Mango, Nuts</Ingredient>
<Duration>30 minute Oven Bake</Duration>
</Type>
</Category>
</Catalog> 
```

**菜单.php**

```
<?php
$xml = simplexml_load_file("catalog.xml");
foreach ($xml->xpath('//Category') as $category)
{
echo $category->Name;
foreach($xml->xpath('//Site') as $site)
{
echo $site->ID;
}
}
?> 
```

我的 php 中有些地方不对劲，我试图通过示例解决但仍然有问题。抱歉，这是我的第一个 php 编码项目。在此先感谢许多专家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:28:55.470

试试这个我还没有测试过，但你可以大致了解你应该做什么

```
 foreach ($xml as $row_xml){

      $category=$row_xml->Category();
      $site= $row_xml->site();
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:34:56.327

我没有看你的代码，但是我有两段代码是我使用对象和函数来解析XML的，你可以参考以下

注意使用中文，但不影响你阅读代码

```
<?php 
//不适合大本地文件跟远程文件
$dom=new DOMDocument();
$dom->load("user.xml");
$persons=$dom->getElementsByTagName("person");
//文本类型：3
/*
$person->item(0)->nodeType;//echo 输出节点类型
$person->item(0)->nodeName;//echo 输出节点名字
$person->item(0)->nodeValue;//echo 输出节点值
*/
//echo $person->item(0)->childNodes->item(0)->childNodes->item(0)->nodeType;
//找下一个的同胞节点
//echo $person->item(0)->childNodes->item(0)->nextSibling->nodeName;
echo '<table border="1" width="500" align="center">';
foreach($persons as $person){
    echo '<tr>';

    echo '<td>'.$person->getAttribute("id").'</td>';
    $usernames=$person->getElementsByTagName("username");
    echo '<td>'.$usernames->item(0)->childNodes->item(0)->nodeValue.'</td>';
    $phones=$person->getElementsByTagName("phone");
    echo '<td>'.$phones->item(0)->childNodes->item(0)->nodeValue.'</td>';
    echo '</tr>';
}
//header("Content-type:text/xml");
//echo $dom->saveXML();

<?php
//第一步 创建解析器 xml_parser_create(编码);
$xml = xml_parser_create('utf-8');
//xml_parser_set_option — 为指定 XML 解析进行选项设置
//xml_parser_set_option($xml,XML_OPTION_CASE_FOLDING,false); false原样输出
//注册事件,将遇到开始和结束表计时使用什么函数
xml_set_element_handler($xml,"starttag","endtag");

xml_set_character_data_handler($xml,"content");

function starttag($x,$tagName,$args){
    if($tagName=="USERS")
        echo "<table border='1' width='800' align='center' ><caption>{$tagName}";
    else if($tagName == "USER"){
        echo "<tr>";
        echo "<td>{$args['ID']}</td>";
    }else
        echo "<td>";
}

function endtag($x,$tagName){
    if($tagName=="USERS")
        echo "</caption></table>";
    else if($tagName == "USER")
        echo "</tr>";
    else
        echo "</td>";

}

function content($x,$content){
    echo $content;
}

$printerror=false;

$xmlfile="user.xml";
//第二步 读取数据
$fp=fopen($xmlfile,"r");

while(!feof($fp)){
    $data=fread($fp,1024);
    //开始解析
    if(!xml_parse($xml,$data)){
        $printerror=true;
    }
}

//关闭文件
fclose($fp);
if($printerror){
    $row=xml_get_current_line_number($xml);
    $col=xml_get_current_column_number($xml);
    $errormess=xml_error_string(xml_get_error_code($xml));

    echo "在文件{$xmlfile}中,[{$row}行，{$col}列]：{$errormess}.";
}
//关闭解析器
xml_parser_free($xml); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:38:48.820

请阅读[http://devzone.zend.com/240/simplexml/](http://devzone.zend.com/240/simplexml/)
示例：

```
<?php
// $xml = simplexml_load_file("catalog.xml");
$catalog = new SimpleXMLElement(data());

foreach ( $catalog->Category as $category ) {
    echo 'Name: ', $category->Name, "\n";
    foreach( $category->Type as $type ) {
        if ( isset($type->Type1) ) {
            echo "  type1: ", $type->Type1, "\n";
        }
        else if ( isset($type->Type2) ) {
            echo "  type2: ", $type->Type2, "\n";
        }
        else {
            echo "  unknown type\n";
        }
        echo '    Ingredient:', $type->Ingredient, "\n";
        echo '    Duration: ', $type->Duration, "\n";
    }
}

function data() {
    return <<< eox
<?xml version="1.0" encoding="ISO-8859-1"?>
<Catalog>
<Category>
<Name>Biscuit</Name>
<Type>
<Type1>Chocolate Chips</Type1>
<Ingredient>Flour, Chocolate Chips</Ingredient>
<Duration>15 minute Oven Bake</Duration>
</Type>
<Type>
<Type2>Lemon Puff</Type2>
<Ingredient>Flour, Lemon Extract</Ingredient>
<Duration>15 minute Oven Bake</Duration>
</Type>
</Category>
<Category>
<Name>Cake</Name>
<Type>
<Type1>Fruit Cake</Type1>
<Ingredient>Flour, Egg, Fresh Cream, Fruits</Ingredient>
<Duration>30 minute Conventional Oven Bake</Duration>
</Type>
<Type>
<Type2>Mango Cake</Type2>
<Ingredient>Flour, Egg, Fresh Cream, Mango, Nuts</Ingredient>
<Duration>30 minute Oven Bake</Duration>
</Type>
</Category>
</Catalog>
eox;
} 
```

印刷

```
Name: Biscuit
  type1: Chocolate Chips
    Ingredient:Flour, Chocolate Chips
    Duration: 15 minute Oven Bake
  type2: Lemon Puff
    Ingredient:Flour, Lemon Extract
    Duration: 15 minute Oven Bake
Name: Cake
  type1: Fruit Cake
    Ingredient:Flour, Egg, Fresh Cream, Fruits
    Duration: 30 minute Conventional Oven Bake
  type2: Mango Cake
    Ingredient:Flour, Egg, Fresh Cream, Mango, Nuts
    Duration: 30 minute Oven Bake 
```

# jquery - 上传图片时jquery.form.js在IE中不起作用

> ID：13153766
> 
> 赞同：2
> 
> 时间：2012-10-31T08:18:49.127
> 
> 标签：jquery, html, internet-explorer, image-uploading

我`jquery.form.js(version 3.18)`在我的页面中使用来上传图片。它在 FF 和 Chrome 中运行良好，但在 IE 中不行。

在 IE 中，图像可以成功上传，但我无法从服务器获取 json 返回，并且 IE 显示“访问被拒绝”。ps jquery 版本为 v1.5.1。谁能帮忙？？

这是我的js代码：

```
var options = {
    target: '#bar_img_info',
    url: 'dealUploadImg.jsp',
    type: 'POST',
    success: function(msg){
    $('#bar_img_info').html(msg);
    }
};

$("#uploadForm").ajaxSubmit(options); 
```

这是我的html：

```
<label>Bar Image：&lt;/label>
<input type="file" name="bar_img" value="" id="bar_img"/> <strong style="color: red;"    
    id="bar_img_info"></strong><br />
<a href="javascript:dealUploadImg();" class="btn">upload</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:23:45.103

我认为您正在使用`AJAX`Internet Explorer 8 中不支持的上传`multiple file upload`。这已经在[这里](https://stackoverflow.com/questions/6207388/is-it-possible-to-select-and-upload-multiple-files-at-one-time-in-internet-explo)讨论过了。

# c# - 以任何形式（Json、xml 等）序列化 Dictionary<string、dictionary<string、string>></string、dictionary<string、string>

> ID：13153767
> 
> 赞同：1
> 
> 时间：2012-10-31T08:18:50.903
> 
> 标签：c#, windows, windows-8

将Dictionary<String, Dictionary<String, String>> 序列化到可以存储的地步，稍后反序列化。我进行了相当多的谷歌搜索，但找不到与 .NET 4.5 完全兼容的类或函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:38:48.407

开箱即用的[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)应该能够应付你的字典。它也应该提供非常紧凑的输出。

```
var source = new Dictionary<string, Dictionary<string, string>>
{
    { "one", new Dictionary<string, string> { { "a", "1a"}, { "b", "1b" } } },
    { "two", new Dictionary<string, string> { { "a", "2a"}, { "b", "2b" } } }
};

var serializer = new JavaScriptSerializer();

// This gives {"one":{"a":"1a","b":"1b"},"two":{"a":"2a","b":"2b"}}
string serialized = serializer.Serialize(source);

// This gives a clone of the original dictionary.
var deserialized = serializer.Deserialize
    <Dictionary<string, Dictionary<string, string>>>(serialized); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:02:03.793

好吧，我发现解决方案是使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)

```
public String Serialize(Dictionary<int, Dictionary<String, String>> all)
        {

            String abc = JsonConvert.SerializeObject(all, Formatting.None, new JsonSerializerSettings
                        {
                            TypeNameHandling = TypeNameHandling.Objects,
                            TypeNameAssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple
                        });
            return abc;
        }

         public Dictionary<int, Dictionary<String, String>> DeSerialize(String text)
         {

             Dictionary<int, Dictionary<String, String>> abc;
             abc = JsonConvert.DeserializeObject<Dictionary<int, Dictionary<String, String>>>(text, new JsonSerializerSettings
             {
                 TypeNameHandling = TypeNameHandling.Objects,
                 TypeNameAssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple,
             });
             return abc;
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:37:21.693

你可以看看[SerializableDictionary](http://www.codeproject.com/Articles/141955/Both-XML-and-Binary-Serializable-Dictionary)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:00:45.840

你应该使用以下，它会让你的生活更轻松。

[存储助手](http://codepaste.net/gtu5mq)

或使用

[WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)

# actionscript-3 - as3 Privacy dialog will be displayed till user accept

> ID：13153768
> 
> 赞同：0
> 
> 时间：2012-10-31T08:18:58.757
> 
> 标签：actionscript-3, flash

I'm quite new to AS3 so take it easy on me ;) I'm working on a Flash application and it requires the use of the microphone. I got the Privacy dialog. So far so good.

One of the requirements for using the application is to accept Privacy dialog for using the mic. If the user denies the access to the mic, the application should display again the Privacy dialog.

So...How can I do to display the privacy dialog again and again till the user accept it?

As an example, in the airtime website, after registering with facebook, you get a Privacy Dialog. Clicking on the deny button will make to display another Privacy Dialog.

Updated: Here you can check my code.

```
public function SecurityDialog () {
        log("hello world");
        mic = Microphone.getMicrophone();
        if (mic != null) {
            log("microphone name: " + mic.name + ", muted: " + mic.muted);
            mic.addEventListener(ActivityEvent.ACTIVITY, this.onMicActivity); 
            mic.addEventListener(StatusEvent.STATUS, this.onMicStatus); 
            // Determine if the user has already allowed access for us
            if (mic.muted) {
                Security.showSettings(SecurityPanel.PRIVACY);
            }
        }
        log("done");
    } 
```

In the privacy dialog, if the user denies the access to the mic and click on the close button, the Privacy dialog should be displayed again. Do you know how can I do that?

Thanks again people

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:17:45.673

这`StatusEvent`不会帮助您，因为它只会通知用户是否接受了对网络摄像头/麦克风的访问。几个月前我也遇到过同样的问题，最后的解决办法是用jQuery去掉SwfObject容器DIV，重新嵌入。是的，这很可怕，但我还没有找到更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:51:11.457

您是否尝试过：

```
Security.showSettings(SecurityPanel.PRIVACY); 
```

# ios - User Defined Runtime Attributes accessibility

> ID：13153773
> 
> 赞同：5
> 
> 时间：2012-10-31T08:19:14.753
> 
> 标签：ios, interface-builder

I created a User Defined Runtime Attributes to my custom UIView in IB, and the interesting thing is, that I can access it in touchesBegan:withEvent: method but not in initWithCoder: Do you know why?

![](../Images/d153b599b0b5f1c653f84b5a9e679159.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T01:45:55.070

如果您需要在设置视图而不是在`initWithCode:`使用中处理它时访问这些值`awakeFromNib`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T08:32:24.313

这是因为来自 IB 的视图在`initWithCoder`. 以下将帮助您了解该过程。它被解释为`UIViewControllers`，但概念是相同的（来自[ViewController Programming Guide](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)）：

> 当您在故事板中创建视图控制器时，您在 Interface Builder 中配置的属性将被序列化为存档。稍后，当视图控制器被实例化时，这个存档被加载到内存中并被处理。结果是一组对象，其属性与您在 Interface Builder 中设置的属性相匹配。通过调用视图控制器的 initWithCoder: 方法来加载存档。

# ruby-on-rails - 为什么我不能在 Rails 3 视图 Lazy Lookup 中使用符号？

> ID：13153775
> 
> 赞同：0
> 
> 时间：2012-10-31T08:19:29.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, localization

我有下表：

```
# views/students/index.html.haml
%table.table
  %thead
    %tr
      %th=t :first_name  # doesn`t work
      %th=t '.last_name' # works
  %tbody
    - @students.each do |s|
      %tr
        %td=s.first_name
        %td=s.last_name 
```

这是我的语言环境文件：

```
pl:
  students:
    index:
      first_name: "Imię"
      last_name: "Nazwisko" 
```

可以使用符号而不是字符串 '.first_name' 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:28:10.833

它可以使用`:'.first_name'`（我假设您所指的“符号”是句号）

# ruby-on-rails - App Fog Rails 迁移数据库

> ID：13153777
> 
> 赞同：2
> 
> 时间：2012-10-31T08:19:39.023
> 
> 标签：ruby-on-rails, database, command-line, migrate, appfog

我应该如何在**App Fog中迁移***Rails*应用程序数据库？

 **例如，在第一次部署后的 Heroku 上，您必须运行：

```
$ heroku run rake db:migrate 
```

有没有类似的命令或者数据库自动部署在App Fog上？

PS我没有找到这方面的文档。`database.yml`它是否像 Heroku 一样通过生成文件来自动配置数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:18:27.003

实际上[这里](http://docs.appfog.com/frameworks/ruby#rake-db-seed)有一些文档。

基本上，您创建一个[Caldecott 隧道](http://docs.appfog.com/services/tunneling)，`af tunnel`然后在本地运行迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T07:20:15.967

运行一个选项`af services`来查看您的活动服务。然后将显示 System Services 和 Provisioned Services，为您的应用复制 mysql Provisioned Service 并运行`af tunnel my-app-mysql-4234`，其中 my-app-mysql-4234 是复制的 Provisioned Service 的名称。现在将显示 3 个选项，选择 1（1 个选项为无）。打开 Windows 终端的其他选项卡并运行`RAILS_ENV=production rake db:migrate`其中 production 是 config/database.yml 中的名称。

`RAILS_ENV=production rake db:seed`如果需要，不要忘记运行。

如果不清楚，请查看本教程：[http ://eftakhairul.com/deploy-your-first-ror-app-at-appfog/](http://eftakhairul.com/deploy-your-first-ror-app-at-appfog/)

再见！**

# ruby - 如何在 Ruby 中修改复数的实部或虚部？

> ID：13153780
> 
> 赞同：0
> 
> 时间：2012-10-31T08:19:53.787
> 
> 标签：ruby

我不习惯 Ruby 中的 Complex 类。我阅读了[文档](http://www.ruby-doc.org/core-1.9.3/Complex.html)，但我不知道如何修改这样一个复数的实部或虚部。未提供修改这些字段的访问器。

c=Complex(1,2) c.real= 4 # 不可能

所以我的问题是：如何在 Ruby 中修改复数的实部或虚部？

我特别认为基于公开课的解决方案应该是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:30:57.527

```
c = Complex(4, c.imaginary) 
```

如果你做一个

```
c.methods - 1.methods  # => [:marshal_dump, :marshal_load] 
```

你可以看到复数有哪些普通整数没有的方法。只有这两个，它们显然不会让你设置真实的部分，这意味着除了创建一个新的部分之外你根本无法做到这一点。您当然可以通过对其进行算术运算来更改数字，但如果您想显式设置实部，重新分配变量是唯一的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:25:56.603

您不能修改数字，但您可以基于它创建新的数字并将结果分配给相同的变量：

```
c = Complex(1, 2)
c = Complex(4, c.imaginary)
c            # => (4+2i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T08:27:27.430

您将不得不创建一个新的复数：

```
c = Complex(1, 2)
c = Complex(2, c.imag) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T08:30:03.907

这是一个例子：

```
c = Complex(2, 3)
# incrementing the real part:
c + 2
=> (4+3i)

# incrementing the imaginary part:
c + Complex(0,2)
=> (2, 5i) 
```

# websphere - RedHat 6 support in WebSphere 6

> ID：13153781
> 
> 赞同：1
> 
> 时间：2012-10-31T08:19:54.667
> 
> 标签：websphere, redhat

I have a server side of IBM's WebSphere version 5 and I am running on RedHat version 4, this is working good.

If I will upgrade to WebSphere version 6 and RedHat version 6 Shall I get a problam? or they work well together?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:38:28.597

什么是官方支持的，没有。[RedHat 6 不支持 WebSphere 6.0](http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg27007256)。事实上，无论如何， [WebSphere 6.0 已经完全停止服务。](http://www-01.ibm.com/software/websphere/support/lifecycle/)

独立于支持问题，我无法谈论这种组合是否真的有效或可靠。

# paypal - PayPal API Error -- This payment request must be authorized by the sender

> ID：13153789
> 
> 赞同：7
> 
> 时间：2012-10-31T08:20:24.623
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments, chained

In the delayed chained adaptive Paypal the primary pay is successfully sent when i execute a payment with the pay key it shows an error like this

How could i authorize to send amount to secondary from primary receiver

```
PayPal API Error

responseEnvelope.timestamp: 2012-10-31T01:12:05.386-07:00
responseEnvelope.ack:   Failure
responseEnvelope.correlationId: fd2c71e75c133
responseEnvelope.build: 3988550
error(0).errorId:   550001
error(0).domain:    PLATFORM
error(0).subdomain: Application
error(0).severity:  Error
error(0).category:  Application
error(0).message:   This payment request must be authorized by the sender 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T11:06:23.593

我收到此错误，当我尝试执行付款时，该用户尚未付款，即您提出付款请求，然后收到付款密钥，然后使用此付款密钥用户必须按照 url 和付款（钱将转到主要收款人），毕竟您应该执行付款以将钱转给二级收款人。

我在沙箱中使用的网址供用户付款：

```
https://www.sandbox.paypal.com/webscr&cmd=_ap-payment&paykey={{pay_key}}, 
```

`{{pay_key}}`支付请求的密钥在哪里。

# hadoop - 在hadoop中重新平衡单个数据节点

> ID：13153790
> 
> 赞同：4
> 
> 时间：2012-10-31T08:20:29.700
> 
> 标签：hadoop, hdfs

在下面的 hadoop 常见问题解答中：

[http://wiki.apache.org/hadoop/FAQ#On_an_individual_data_node.2C_how_do_you_balance_the_blocks_on_the_disk.3F](http://wiki.apache.org/hadoop/FAQ#On_an_individual_data_node.2C_how_do_you_balance_the_blocks_on_the_disk.3F)

他们确实为单个数据节点不平衡提供了解决方案。但我仍然有疑问。

假设我有 2 个磁盘：“/disk1”和“/disk2”。在每个磁盘中，有数据目录“./data”。所以有 2 个数据目录“/disk1/data”和“/disk2/data” .这是问题：

我可以将“/disk1/data/current”中的**块和元对**移动到“/disk2/data/current/”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:42:27.990

是的，您可以在磁盘之间安全地移动块对（blk_X 数据文件和 blk_X_*.meta CRC 文件）（在任何磁盘中的父*current/*或正确`Block-Pool ID`的*current/*目录下），但请确保特定的 DataNode 已关闭在此操作时。

您还可以毫无顾虑地将整个子目录（您会发现它们命名为`subdirX`（X 是生成的数字）从磁盘移动到磁盘，并将块从任何子目录移动到任何其他子目录 - 无需担心路径的粘性，只要数据节点已关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T23:47:33.587

将成为带有 Hadoop 3 的 HDFS 的一部分：

*   [https://issues.apache.org/jira/browse/HDFS-1312](https://issues.apache.org/jira/browse/HDFS-1312)（在 HDFS 3.0 中添加）
*   相关 - AvailableSpaceVolumeChoosingPolicy - [https://issues.apache.org/jira/browse/HDFS-1804](https://issues.apache.org/jira/browse/HDFS-1804)（在 HDFS 2.1 中添加） - 这不是默认设置，但我们在生产中使用它。基本上，AvailableSpaceVolumeChoosingPolicy 允许卷最终达到平衡，因为在分配新块时将首选具有更多空间的磁盘。

# tfs - Team Build 无法访问映射的网络驱动器

> ID：13153792
> 
> 赞同：2
> 
> 时间：2012-10-31T08:20:48.037
> 
> 标签：tfs, tfsbuild

在我的解决方案中，我引用了放在网络位置并将该网络映射到驱动器号 (P:) 的程序集文件。项目文件也引用了该驱动器中的程序集（如 P:\Assembly.dll），我有 snk 文件来对同一网络驱动器中的程序集进行签名。现在，我正在尝试使用 TFS 2010 Build 构建项目。但是，当我运行团队构建时，它会抛出错误说

> CSC：签署程序集时加密失败--'读取密钥文件时出错--系统找不到指定的路径

谁能知道如何启用对映射网络驱动器的访问？

> 注意：构建控制器在已映射网络驱动器并有权访问路径的用户下运行。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T20:57:01.600

构建服务在没有映射驱动器的身份下运行。您可以使用文件共享位置 (\myserver\myshare..\myfile)，而不是使用映射驱动器

# java - GWT 单选按钮更改处理程序

> ID：13153801
> 
> 赞同：6
> 
> 时间：2012-10-31T08:21:28.077
> 
> 标签：java, gwt, radio-button, listener

我有一个带有 RadioButton 选项和标签投票的投票小部件

1.  当用户选择一个选项时，选项票应该+1；
2.  当另一种选择选择时，旧选择投票应该--1和新选择选票应该+1。

我为此使用了 ValueChangeHandler：

```
valueRadioButton.addValueChangeHandler(new ValueChangeHandler<Boolean>() {
            @Override
            public void onValueChange(ValueChangeEvent<Boolean> e) {
                if(e.getValue() == true)
                {
                    System.out.println("select");
                    votesPlusDelta(votesLabel, +1);
                }
                else
                {
                    System.out.println("deselect");
                    votesPlusDelta(votesLabel, -1);
                }
            }
        }); 

private void votesPlusDelta(Label votesLabel, int delta)
{
    int votes = Integer.parseInt(votesLabel.getText());
    votes = votes + delta;
    votesLabel.setText(votes+"");
} 
```

当用户选择新选项时，较旧的选项监听器应该跳转到 else 语句，但它不会（只有 +1 部分有效）。我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T11:35:50.990

它在[RadioButton javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/RadioButton.html)中说，当单选按钮被清除时，您将不会收到 ValueChangeEvent。不幸的是，这意味着您必须自己完成所有簿记工作。

作为 GWT 问题跟踪器中建议的创建自己的 RadioButtonGroup 类的替代方法，您可以考虑执行以下操作：

```
private int lastChoice = -1;
private Map<Integer, Integer> votes = new HashMap<Integer, Integer>();
// Make sure to initialize the map with whatever you need 
```

然后当您初始化单选按钮时：

```
List<RadioButton> allRadioButtons = new ArrayList<RadioButton>();

// Add all radio buttons to list here

for (RadioButton radioButton : allRadioButtons) {
    radioButton.addValueChangeHandler(new ValueChangeHandler<Boolean>() {
            @Override
            public void onValueChange(ValueChangeEvent<Boolean> e) {
                updateVotes(allRadioButtons.indexOf(radioButton));
        });
} 
```

updateVotes 方法看起来像这样：

```
private void updateVotes(int choice) {
    if (votes.containsKey(lastChoice)) {
        votes.put(lastChoice, votes.get(lastChoice) - 1);
    }

    votes.put(choice, votes.get(choice) + 1);
    lastChoice = choice;

    // Update labels using the votes map here
} 
```

不是很优雅，但它应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:45:15.477

在[GWT 问题跟踪器](http://code.google.com/p/google-web-toolkit/issues/detail?id=3462)上，这个特定问题存在一个未解决的缺陷。最后一条评论有一个建议，基本上看起来你需要在所有单选按钮上都有 changehandlers 并自己跟踪分组......

干杯，

# python - 如何打破循环？

> ID：13153803
> 
> 赞同：0
> 
> 时间：2012-10-31T08:21:43.067
> 
> 标签：python, progress-bar, break, maya

我正在检查进度条的值，如果它是 100，我想退出，这样完成的上传就不会被打印两次。如果我查询进度条，我不知道为什么 100 会出现两次。

```
def callback(self,*args):
  cmds.progressBar('progbar', edit=True, step=1)
  if cmds.progressBar('progbar',q=True, progress=True)==100:
    print "Finished Uploading."
    break 
```

我找到[了一个类似的线程](https://stackoverflow.com/questions/11730452/break-is-outside-the-loop-python)，但我的情况略有不同......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:14:39.177

您没有提供足够的代码示例来帮助您。首先，您的 callback() 函数包含一个 break 语句，即使该函数中实际上没有循环。

无论如何，我编写了以下示例进行检查，实际上它仅在达到 100 时打印一次“完成上传”。

```
import maya.cmds as cmds

cmds.progressBar('progressBar') # initialise the progress bar

def callback():  
  # Begin loop from 0 to 100 - remember range(n) returns numbers from 0 (inclusive) to n (exclusive)
  for i in range(101):
      cmds.progressBar('progressBar', edit=True, step=1) # increase step by 1
      if (cmds.progressBar('progressBar',q=True, progress=True)==100):
          print "Finished Uploading."
          break
          # Theoretically, breaking is simply here so that you stop wasting iterations in some cases,
          # but it's not necessary for the printout, since we have only specified that the print will
          # happen when the progress value is equal to exactly 100.
          # Finally, if there is NO loop (like the code you pasted originally), then you shouldn't have
          # a break.

callback() 
```

您的问题的一个可能原因是您的进度条进度超过 100 步，并且进度条的最大值为 100。在这种情况下，随着您不断增加步数，该值将保持在 100（即最大值），因此每次查询它是否等于 100 时，它都会返回 True。

不幸的是，如果没有您提供的更具体的信息，我无法回答任何更具体的问题。

# mysql - 包含在简单库存数据库中的内容

> ID：13153807
> 
> 赞同：2
> 
> 时间：2012-10-31T08:22:09.057
> 
> 标签：mysql

我想创建一个简单的库存系统来：

*   保留库存记录
*   当产品缺货时提醒用户
*   跟踪销售和购买
*   当产品即将到期时提醒用户（可能提前 7 天）
*   admin 创建用户帐户（所有用户必须登录）。

我不确定**我应该有多少张桌子以及要包括什么**。我尝试了以下方法，但似乎不起作用：

> 销售（序列号、名称、单位、数量、金额、销售日期） 购买（序列号、名称、单位、数量、金额、购买日期、到期日期） 用户（工作 ID、名字、姓氏、用户名、密码、确认密码）

我正在使用 Visual Studio 2010 和 MySQL

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:39:57.480

我最近编写了一个库存系统，其中一些字段被证明非常有用。我确保为所有行和一个“IsActive”位包含一个“创建”日期时间，当您选择删除某些内容时将其设置为 false（因此每次删除都是软删除）并从那里确保我有一个很好但不过分的规范化模式来描述我的数据。

如果您想要一个简单的库存并且认为它可以被 2 或 3 张桌子覆盖，那么您最终可能会得到 20 到 30 个，甚至可能更多。例如，让您的项目是一个表，itemtypes 是另一个，itemcategories 是另一个。确保有一个单独的项目、购买、销售等历史记录表。

从最广泛的类别开始。用您可能需要描述的所有表格充实它们，例如，您的库存。如果您有盒子、钉子、锤子，您可能需要一个列出“容器”、“硬件”、“工具”的类别表。

对于您添加到库存中的每个锤子，它应该是您的项目表中的一个新行，它引用您的项目类型“锤子”。然后随着每件商品的售出，您可以更改每件商品的状态。如果您想知道您有多少个锤子，您可以在项目表中查询所有具有可用状态的“锤子”类型的项目。如果锤子卖了，你把它换成卖的。如果返回的锤子状况良好，则将该特定项目改回可用。

不要删除行，只需将它们的“IsActive”位设置为 false。这样，如果它链接到“已删除”项目，稍后报告您的数据仍然可以正常工作，并且在一般使用期间，您可以只查询 IsActive = 1 的项目。

希望这会有所帮助，这是我的技术，尽管我相信还有很多其他的。欢迎评论，学习总是好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:24:31.470

*   > 保留库存记录

    使用您当前的数据结构，这将不是一件容易的事：您必须查看整个历史记录并考虑哪些购买已用于完成每笔销售（并假设该确定实际上是正确的）。维护一个可用库存的附加表会容易得多：

    ```
    available_stock ( Serial_Number, Quantity, Expiry_Date ) 
    ```

    然后，您可以使用 MySQL 的[事件调度程序](http://dev.mysql.com/doc/en/events.html)自动删除过期库存：

    ```
    CREATE EVENT remove_expired_stock
    ON SCHEDULE EVERY DAY STARTS CURRENT_DATE
    DO DELETE FROM available_stock WHERE Expiry_Date < CURRENT_DATE 
    ```

    确保在每个表上使用 InnoDB 存储引擎，以便您可以将数据库操作包装在事务中以确保原子性：

    ```
    START TRANSACTION;

    SELECT SUM(Quantity) FROM available_stock WHERE Serial_Number = ? FOR UPDATE;

    -- only proceed if quantity is sufficient for a sale

    SET @q := ?;  -- quantity required

    UPDATE   available_stock
    SET      Quantity = GREATEST(@d, 0)
    WHERE    Serial_Number = ?
         AND (@d := Quantity - @q) IS NOT NULL
         AND (@q := -LEAST(@d, 0)) IS NOT NULL
    ORDER BY Expiry_Date;

    DELETE FROM available_stock WHERE Quantity = 0;

    INSERT INTO Sales ...

    COMMIT; 
    ```

    您甚至可以在表格上定义一个[触发器](http://dev.mysql.com/doc/en/triggers.html)`Purchases`以自动将新库存插入`available_stock`表格中：

    ```
    CREATE TRIGGER new_stock AFTER INSERT ON Purchases FOR EACH ROW
      INSERT INTO available_stock
        ( Serial_Number, Quantity, Expiry_Date )
      VALUES
        ( NEW.Serial_Number, NEW.Quantity, NEW.Expiry_Date ); 
    ```

*   > 当产品缺货时提醒用户

    尚不完全清楚您所说的“警报”是什么意思，但您可能希望定期从应用程序代码中运行某种检查，然后在需要时发送通知（通过任何方式：电子邮件、SMS 等）。

*   > 跟踪销售和购买

    您现有的结构使您能够做到这一点。

*   > 当产品即将到期时提醒用户（可能提前 7 天）

    如上。

*   > admin 创建用户帐户（所有用户必须登录）。

    这将在您的应用程序中强制执行，尽管您可能会像您所做的那样将用户存储在数据库中。请注意，滚动自己的身份验证系统有许多常见的陷阱：虽然它可能并不都与您的项目直接相关，但[基于表单的网站身份验证的权威指南](https://stackoverflow.com/a/477578)仍然是一个很好的资源。

*   > 我不确定我应该有多少张桌子以及要包括什么。

    这在很大程度上取决于您自己项目的要求。或许你需要坐下来好好想想你想记录什么级别的信息以及如何使用它？

    但是，有几点观察：

    1.  而不是在每个表中包含“名称”和“单位”，而是将外键放入包含该信息`Serial_Number`的单独表中。`Products`

    2.  不要在表中同时包含`Password`和：您只想记录已经确认的密码（此时，您应该只记录加盐哈希而不是明文密码本身 - 请参阅上面链接的身份验证指南） .`Confirm_Password``Users`

*   > 我尝试了以下方法，但似乎不起作用：

    正如[@Olaf Dietsche 评论](https://stackoverflow.com/questions/13153807/what-to-include-in-a-simple-inventory-database#comment17894732_13153807)的那样，如果您解释*什么*“似乎不起作用”通常会很有帮助。就目前而言，我们不知道您是否已经编写了 10,000 行代码并且正在为一小部分而苦苦挣扎，或者您是否“我们只创建了这些表，并期待整个库存管理系统神奇地出现！

# yii - 在帖子 yii 上显示评论

> ID：13153808
> 
> 赞同：0
> 
> 时间：2012-10-31T08:22:10.503
> 
> 标签：yii

我只想显示属于每个帖子的评论，

我已经这样做了：在帖子`view.php`中我渲染了一个视图：

```
<?php 

 $this->renderPartial('/TblComments/_comment',array(

     'comments'=>$model_comments,
        )); 
```

?>

这是`_comment.php`

```
<div class="view">

    <b><?php echo CHtml::encode($data->getAttributeLabel('id')); ?>:</b>
    <?php echo CHtml::link(CHtml::encode($data->id), array('view', 'id'=>$data->id)); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('user_id')); ?>:</b>
    <?php echo CHtml::encode($data->user_id); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('post_id')); ?>:</b>
    <?php echo CHtml::encode($data->post_id); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('comment_body')); ?>:</b>
    <?php echo CHtml::encode($data->comment_body); ?>
    <br />

        <?php echo CHtml::link('Edit', array('tblComments/update', 'id'=>$data->id)); ?>
        <br/>
        <?php echo CHtml::link('Delete', array('tblComments/delete', 'id'=>$data->id)); ?>

</div> 
```

现在的问题是：

```
Undefined variable: data 
```

我不知道为什么 ？请解释并帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:36:00.743

那是因为你没有将`$data`变量传递给`_comment.php`，你只是`$comments`在调用时传递了一个变量`renderPartial()`。

像上面的示例那样采用`$data`参数的文件通常设计为在 CListView 或类似内容中使用，您需要传递[数据提供程序](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider)而不是数组（我假设`$model_comments`是这样吗？）。

CListView 接受一个数据提供者，它为数据提供者中的每条记录转换为一个`$data`变量（就像您在文件中看到的那样）。`_comments.php`

假设`$model_comments`您的模型是“评论”关系，这应该是模型对象的数组吗？如果是这种情况，您不必创建新的 CDataProvider 来与 CListView 一起使用，您可以使用[CArrayDataProvide](http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider)将该关系数组转换为可在 CListView 中使用的数据提供程序。所以这样的事情可能对你有用；

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>new CArrayDataProvider($model_comments, array()),
    'itemView'=>'/TblComments/_comment',
)); 
```

未经测试，您可能需要编辑才能品尝。

# c# - 保护查找集合和项目不被编辑

> ID：13153809
> 
> 赞同：0
> 
> 时间：2012-10-31T08:22:11.577
> 
> 标签：c#, collections, readonly, readonly-collection

我根本不希望这些内容是可编辑的。对于集合，使用 ReadOnlyCollection 似乎非常清楚（尽管我不知道它是否总是从集合中创建新的 ReadOnlyCollection 的好方法（成本高吗？））。

```
public static class Lookups
{
    private static Collection<MyBusinessObject> businessObjects;
    // [...]

    public static ReadOnlyCollection<MyBusinessObjects> BusinessObjects
    {
        get
        {
            return new ReadOnlyCollection<MyBusinessObject>(businessObjects);
        }
    }
    // [...]
} 
```

但更重要的是：我如何处理集合中的项目？我希望这个测试通过任何想法？

```
 [TestMethod]
    public void Items_Should_Not_Be_Editable()
    {
        var businessObject = Lookups.BusinessObjects.First();

        businessObject.Id = 1337;

        Assert.AreNotEqual(1337, Lookups.BusinessObjects.First().Id);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:33:36.540

您应该从接口继承 MyBusinessObject 并将其公开。

```
internal class MyBusinessObject : IMyBusinessObject {
    public string Id { get; set; }
}

public interface IMyBusinessObject {
    public string Id { get; }
} 
```

然后在集合 MyCollection 中公开这个接口。

也许对集合做同样的事情，不要公开添加、删除等方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:45:05.123

使用[ReadonlyCollection](http://msdn.microsoft.com/en-us/library/ms132474.aspx)时，您不必每次都创建一个新实例。另一种方法是公开一个 IEnumerable，因为它也是只读的。Readonlycollection 提供了更强的保护，如[这里](https://stackoverflow.com/a/491591/1069200)所示。

> ReadOnlyCollection 泛型类的实例始终是只读的。只读集合只是一个带有防止修改集合的包装器的集合；因此，如果对基础集合进行了更改，则只读集合会反映这些更改。有关此类的可修改版本，请参见 Collection。

```
[Test]
public void TestNameTest()
{
    var names = new List<string>() {"Johan", "Tkrause"};
    var readOnlyCollection = new ReadOnlyCollection<string>(names);
    names.Add("Lars");
    Assert.AreEqual(3,readOnlyCollection.Count);
} 
```

在你的情况下：

```
private List<IMyBusinessObjectType> _businessObjects= new List<IMyBusinessObjectType>();
private ReadOnlyCollection<IMyBusinessObjectType> _readOnlybusinessObjects;
public ReadOnlyCollection<IMyBusinessObjectType> BusinessObjects
{
    get
    {
        if(_readOnlybusinessObjects==null)
            _readOnlybusinessObjects=new ReadOnlyCollection<IMyBusinessObjectType>(_businessObjects);
        return _readOnlybusinessObjects;
    }
} 
```

```
public interface IMyBusinessObjectType
{
    string Name { get; }
}

public class MyBusinessObjectType : IMyBusinessObjectType
{
    public string Name { get; set; }
} 
```

至于业务对象，它们可以具有私有设置器或按照 Lars 的建议实现只读接口。

# c++ - 如何将宏用作其他宏参数列表之一

> ID：13153811
> 
> 赞同：2
> 
> 时间：2012-10-31T08:22:16.197
> 
> 标签：c++, visual-c++

这是一个虚拟示例：

```
#define DEFINE_STRUCTURE(Result, Structure, a, b, c)  int a;
#define MEMBER_INT(name, width)                       Int, name, width 
```

当我在做

```
DEFINE_STRUCTURE(Result, Structure,  MEMBER_INT(b, c)) 
```

我收到这个警告：

> 警告 C4003：宏“DEFINE_STRUCTURE”的实际参数不足

但我希望它扩展到

```
DEFINE_STRUCTURE(Result, Structure,  Int, b, c) 
```

我如何定义宏来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:09:47.030

您需要在替换过程中再添加一个步骤。

```
#define DEFINE_STRUCTURE(Result, Structure, a, b, c)  int a;
#define MEMBER_INT(name, width)                       Int, name, width

#define DEFINE_STRUCTURE2(Result, Structure, x) DEFINE_STRUCTURE(Result, Structure, x)
DEFINE_STRUCTURE2(Result, Structure,  MEMBER_INT(b, c)) 
```

请记住：在调用类似函数的宏时，会识别参数，然后单独评估每个参数，然后将参数替换为评估结果。

# debian - 为“cat /proc/stat > /some/file”制作守护程序脚本

> ID：13153816
> 
> 赞同：0
> 
> 时间：2012-10-31T08:22:37.730
> 
> 标签：debian, daemon

我需要每 3 秒调用一次命令的守护程序脚本： cat /proc/stat > /some/file

谁能帮我制作和设置这个？（系统是debian挤压）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:57:44.730

像这样？

```
#!/bin/sh
while true
do
   cat /proc/stat > /some/file
   sleep 3
done 
```

并运行它`/path/to/scrip.sh &`

（使用拖尾`&`在后台运行，即：“守护进程”模式）

它不是很复杂（例如，一旦它开始就停止它的唯一方法就是杀死它），但是会按照您的要求进行。

# sql - 如何在不使用子查询的情况下仅选择具有最大序列的行？

> ID：13153819
> 
> 赞同：10
> 
> 时间：2012-10-31T08:22:43.427
> 
> 标签：sql, sql-server, oracle, common-table-expression

我试图只为每个 ID 选择具有最高 seq 的行

```
ID  |  Seq   |  Age
-------------------
 A      1       20   
 A      2       30
 B      1       25
 B      2       32
 B      3       44
 B      4       48
 C      1       11 
```

这似乎有效

```
SELECT ID, Age
FROM Persons a
WHERE Seq = (SELECT MAX(Seq) FROM Persons b WHERE a.ID = b.ID) 
```

但这是最好的方法，唯一的方法吗？如果我不需要的话，我不喜欢使用子查询，我记得你可以使用一些东西，但我忘记了它是什么。任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T08:25:46.063

假设 SQL-Server (>= 2005) 或 Oracle (10g?)：

```
WITH CTE AS
( 
   SELECT
       ROW_NUMBER() OVER (PARTITION BY ID  ORDER BY Seq DESC) AS RN
       , ID, Age
   FROM 
       Persons
)
SELECT ID, Age 
FROM CTE
WHERE RN = 1 
```

[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)返回结果集分区内行的序号。

**编辑**：也可以在 Oracle 中使用，您可以在此处看到：[http ://sqlfiddle.com/#!4/b7e79/2/0](http://sqlfiddle.com/#!4/b7e79/2/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:26:07.153

通常，您需要使用窗口或排名函数 - `Rank()`、`Row_number()`等。

```
select *
from
(
    select *, row_number() over (partition by id order by age desc) rn
    from yourtable
) v
where rn = 1 
```

这将适用于 SQL Server 2005+ - 在 oracle 中，您可能需要显式指定字段名称，而不是`*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T08:47:29.583

万一您使用不支持窗口函数的 RDBMS，您可以使用：

```
SELECT  Persons.ID, Persons.Age, Persons.Seq
FROM    Persons
        INNER JOIN
        (   SELECT  Persons.ID, MAX(Seq) AS Seq
            FROM    Persons
            GROUP BY Persons.ID
        ) MaxP
            ON MaxP.ID = Persons.ID
            AND MaxP.Seq = Persons.Seq 
```

它仍然涉及一个子查询，但是我看不到没有子查询的方法，我也不真正理解您为什么要避免使用它们。

# ruby-on-rails - 自定义 Rails 脚手架模板

> ID：13153821
> 
> 赞同：3
> 
> 时间：2012-10-31T08:22:48.367
> 
> 标签：ruby-on-rails, erb, scaffolding, customizing

我想自定义 Rails 脚手架中的“新”和“编辑”页面。我在哪里可以自定义它。

任何人都可以为我提供一个教程。

我试图覆盖默认的 _form.html.erb 页面并出现错误

```
create  app/models/
      exists  app/controllers/
      exists  app/helpers/
      exists  app/views/books
      create  app/views/layouts/
      create  test/functional/
      create  test/unit/
      create  test/unit/helpers/
      create  public/stylesheets/
      create  app/views/books/index.html.erb
      create  app/views/books/show.html.erb
      create  app/views/books/new.html.erb
      create  app/views/books/edit.html.erb
      create  app/views/books/_form.html.erb
undefined local variable or method `f' for #<Rails::Generator::Commands::Create:0xb70eae04> 
```

我的 _form.html.erb 页面是

```
<%% form_for(@<%= singular_name %>) do |f| %>
  <%%= f.error_messages %>

<% for attribute in attributes -%>
      <% if attribute.name != "id" && attribute.name !="created_at" && attribute.name !="updated_at" %>  
      <div class="field">  
        <div class="label">  
          <%= f.label "#{attribute.name}".to_sym  %>  
      </div>  

        <% if attribute.type == :integer || attribute.type == :float || attribute.type == :string %>  
        <% if attribute.name =~ /_id$/ # is this a id/foreign key field %>  
          <% attribute_class = attribute.name.gsub(/_id$/, '').classify.constantize %>    
          <% if attribute_class %>  
            <%= collection_select(attribute.class.name.underscore.to_sym, attribute.name.to_sym, attribute_class.all, :id, :name, :prompt => true) %>  
          <% else %>  
            <%= f.text_field attribute.name.to_sym  %>  
          <% end %>  
        <% else %>  
          <%= f.text_field attribute.name.to_sym  %>  
        <% end %>  
      <% elsif attribute.type == :text %>  
        <%= f.text_area attribute.name.to_sym  %>  
      <% elsif attribute.type == :datetime %>  
        <%= f.datetime_select attribute.name.to_sym  %>    
      <% elsif attribute.type == :boolean %>  
        <%= f.check_box attribute.name.to_sym  %>        
      <% else %>  
        <% # Unknown attribute Type %>  
      <% end %>       
      </div>  
    <% end %>   
    <% end %> 
```

我将我的页面更新为：

```
<% form_for(@<%= singular_name %>) do |f| %>
      <%= f.error_messages %>

    <% for attribute in attributes -%>
          <% if attribute.name != "id" && attribute.name !="created_at" && attribute.name !="updated_at" %>  
          <div class="field">  
            <div class="label">  
              <%= f.label "#{attribute.name}".to_sym  %>  
          </div>  

            <% if attribute.type == :integer || attribute.type == :float || attribute.type == :string %>  
            <% if attribute.name =~ /_id$/ # is this a id/foreign key field %>  
              <% attribute_class = attribute.name.gsub(/_id$/, '').classify.constantize %>    
              <% if attribute_class %>  
                <%= collection_select(attribute.class.name.underscore.to_sym, attribute.name.to_sym, attribute_class.all, :id, :name, :prompt => true) %>  
              <% else %>  
                <%= f.text_field attribute.name.to_sym  %>  
              <% end %>  
            <% else %>  
              <%= f.text_field attribute.name.to_sym  %>  
            <% end %>  
          <% elsif attribute.type == :text %>  
            <%= f.text_area attribute.name.to_sym  %>  
          <% elsif attribute.type == :datetime %>  
            <%= f.datetime_select attribute.name.to_sym  %>    
          <% elsif attribute.type == :boolean %>  
            <%= f.check_box attribute.name.to_sym  %>        
          <% else %>  
            <% # Unknown attribute Type %>  
          <% end %>       
          </div>  
        <% end %>   
        <% end %> 
```

现在错误是：

```
(erb):32:in `template': compile error (SyntaxError)
(erb):1: syntax error, unexpected $undefined, expecting ')'
_erbout = '';  form_for(@<%=singular_name; _erbout.conc...
                         ^
(erb):32: syntax error, unexpected kEND, expecting $end
;  end ; _erbout.concat "   \n    "
      ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:22:57.397

通过将表单页面编辑为解决它

```
<%% for column in object.class.columns %>  
    <%% if column.name != "id" && column.name !="created_at" && column.name !="updated_at" %>
    <div class="field">  
        <div class="label">  
          <%%= f.label "#{column.name}".to_sym  %>  
      </div>  

        <%% if column.type == :integer || column.type == :float || column.type == :string %>  
        <%% if column.name =~ /_id$/ # is this a id/foreign key field %>  
          <%% column_class = column.name.gsub(/_id$/, '').classify.constantize %>    
          <%% if column_class %>  
            <%%= collection_select(object.class.name.underscore.to_sym, column.name.to_sym, column_class.all, :id, :name, :prompt => true) %>  
          <%% else %>  
            <%%= f.text_field column.name.to_sym  %>  
          <%% end %>  
        <%% else %>  
          <%%= f.text_field column.name.to_sym  %>  
        <%% end %>  
      <%% elsif column.type == :text %>  
        <%%= f.text_area column.name.to_sym  %>  
      <%% elsif column.type == :datetime %>  
        <%%= f.datetime_select column.name.to_sym  %>    
      <%% elsif column.type == :boolean %>  
        <%%= f.check_box column.name.to_sym  %>        
      <%% elsif column.type == :date %>  
         <%%= f.text_field column.name.to_sym, :id=>"date_picker"  %>       
      <%% else %>  
        <%% # Unknown Column Type %>  
      <%% end %>       
      </div>  
    <%% end %>   
    <%% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:46:02.263

也许

```
<% form_for(@<%= singular_name %>) do |f| %> 
```

应该是

```
<% form_for(@singular_name) do |f| %> 
```

PS：
请使用 case-when-then-else attribute.type 代替 if-elseif-else-end
PPS：
使用 haml 代替 erb，你的代码看起来更易读

```
- form_for(@singular_name) do |f|
  = f.error_messages
  - for attribute in attributes
    - if attribute.name != "id" && attribute.name !="created_at" && attribute.name !="updated_at"
      .field
        .label
          = f.label "#{attribute.name}".to_sym
          - if attribute.type == :integer || attribute.type == :float || attribute.type == :string
            - if attribute.name =~ /_id$/ # is this a id/foreign key field
              - attribute_class = attribute.name.gsub(/_id$/, '').classify.constantize
              - if attribute_class
                = collection_select(attribute.class.name.underscore.to_sym, attribute.name.to_sym, attribute_class.all, :id, :name, :prompt => true)
              - else
                = f.text_field attribute.name.to_sym
            - else
              = f.text_field attribute.name.to_sym
        - elsif attribute.type == :text
          = f.text_area attribute.name.to_sym
        - elsif attribute.type == :datetime
          = f.datetime_select attribute.name.to_sym
        - elsif attribute.type == :boolean
          = f.check_box attribute.name.to_sym
        - else
          -# Unknown attribute Type 
```

# batch-file - 如何批处理文本文件中的目录列表？

> ID：13153829
> 
> 赞同：0
> 
> 时间：2012-10-31T08:23:09.353
> 
> 标签：batch-file

我正在尝试为朋友清理一些旧数据。数据放置在多个文件夹中，如下所示。

1.  C:\理货\数据\0000
2.  D:\理货\数据\1092
3.  C:\新建文件夹\Tally7.2\Data\0001

现在，我使用正则表达式 ^[0-9][0-9][0-9][0-9]$ 和一个名为 Everything 的搜索引擎来查找所有可能的具有四位数名称的文件夹，例如 0000我已经导出到一个文本文件，每行都包含一个目录路径，两边都用双引号括起来。

我需要编写一个批处理脚本来执行以下操作。

1.  逐行读取文本文件。
2.  检查目标目录中是否已存在具有该名称的文件夹。
3.  如果是，则重命名文件夹并复制它。
4.  如果没有，请复制而不重命名文件夹。
5.  最后，我想按顺序重命名目标中以 0000 开头的所有文件夹。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:11:19.207

```
@echo off
setlocal EnableDelayedExpansion
set destination=C:\put the destination folder here
set newName=10000
rem Read the text file line by line
for /F "delims=" %%a in (thefile.txt) do (
   rem Check if a folder with that name already exists in the destination directory.
   set "folder=%%~Na"
   if exist "%destination%\!folder!" (
      rem If yes, then rename the folder and copy it.
      call :getNewName folder
   )
   rem If not, copy without renaming the folder.
   md "%destination%\!folder!"
   copy "%%~a" "%destination%\!folder!"
)
rem Finally, I want to sequentially rename all the folders in the destination starting with 0000\. 
cd /D "%destination%"
set n=9999
for /D %%a in (*) do (
   set /A n+=1
   if "%%a" neq "!n:~-4!" (
      ren "%%a" "!n:~-4!"
   )
)
goto :EOF

:getNewName folder
   set /A newName-=1
   set folder=%newName%
   if exist "%destination%\%folder%" goto getNewName
exit /B 
```

# asp.net - 在上传时显示适当的消息

> ID：13153831
> 
> 赞同：0
> 
> 时间：2012-10-31T08:23:17.687
> 
> 标签：asp.net, upload, updates

我有一个 asp.net 网站。每当我想更新网站时，我都会删除所有旧页面，然后上传新文件。

在这段时间里，所有访问者得到的都是例外。显示这样的适当消息的最佳方式是什么？

“我们正在更新网站，请稍后访问”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:26:00.430

您必须将`App_Offline.htm`称为 a`Holding Page`的内容放在您的 Web 应用程序的根目录中，并且您可以在其中编写任何您想要的内容。

当一个名为的文件`app_offline.htm`被添加到应用程序的根文件夹时，ASP.NET 应用程序将被自动删除。

并在站点准备好备份时删除或重命名该文件的其他名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:25:47.450

您可以做的是创建一个名为的文件`App_Offline.htm`，并在您想要显示消息时将其添加到 Web 应用程序的根目录中。在该 html 文件中，您可以添加自定义消息。然后当你完成后，只需将其删除或重命名即可。

> 当 ASP.NET 看到这个文件时，它将关闭应用程序的应用程序域（而不是为请求重新启动它），而是发回 app_offline.htm 的内容。

[在此处](http://weblogs.asp.net/scottgu/archive/2006/04/09/442332.aspx)阅读更多相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:25:58.397

然后，您可以将 app_offline.htm 文件添加到根目录。

# orchardcms - 围绕图像果园 CMS 的简单换行文本

> ID：13153837
> 
> 赞同：0
> 
> 时间：2012-10-31T08:23:54.800
> 
> 标签：orchardcms

这是一个简单的方法，任何人都知道在 Orchard CMS 中添加内容时如何使文本整齐地围绕图像？

在我看来，它是网页内容的基础，但它是 Orchard 似乎无法处理的唯一“开箱即用”的东西

我确定有一种解决方法可能带有样式标签或其他东西，但我宁愿不实施软糖，以防我在这里遗漏了一些简单的东西

目前，如果我通过首先将“I”光束光标放在文本中间最左边的字符位置 0 来添加图像，则编辑器会生成以下 HTML。注意以粗体显示的图像没有格式化，所以看起来很糟糕。

任何意见表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:29:36.197

你可以做几件事。

首先，当您打开媒体选择器时，会出现一个名为`Allignment`. 例如`Left`，如果您选择 ，文本将从图像的右侧换行。如果选择`Right`，图像将向右移动，文本将从图像左侧换行。

但是，从设计的角度来看，在图像周围环绕文本的首选方式是使用 CSS 样式。

这是您需要从图像右侧换行文本的样式示例：

```
img {
    float: left;
    padding: 5px;
} 
```

这是从图像左侧包装它的示例：

```
img {
    float: right;
    padding: 5px;
} 
```

请注意，此样式将有效地应用于站点中的所有图像，并且我在图像周围添加了一些间距。如果您希望它仅应用于特定图像，则需要更改 CSS 选择器以适应您要执行的操作。

要从 Orchard 管理中实际看到这一点，您必须将此样式添加到`/Modules/TinyMce/Scripts/themes/advanced/skins/default/content.css`浏览器并清除缓存。

要在您的主题上看到这一点，您必须将此样式添加到主题的 CSS 中。

# maven - nexus maven 工件从存储库中消失

> ID：13153838
> 
> 赞同：1
> 
> 时间：2012-10-31T08:23:58.903
> 
> 标签：maven, nexus, artifacts

1-5 天后，我的一些 nexus maven 工件从存储库中消失。还不能重现。

怎么会这样？

Maven 设置.xml：

```
<settings>
<mirrors>
    <mirror>
        <id>nexus</id>
        <mirrorOf>*,!codehaus.snapshots,!snapshots</mirrorOf>
        <url>http://192.168.2.252:8080/nexus/content/groups/public</url>
    </mirror>
    <mirror>
        <id>nexus-snapshots</id>
        <mirrorOf>codehaus.snapshots,snapshots</mirrorOf>
        <url>http://192.168.2.252:8080/nexus/content/groups/public-snapshots</url>
    </mirror>
</mirrors>
<profiles>
    <profile>
        <id>nexus</id>
        <!--Enable snapshots for the built in central repo to direct -->
        <!--all requests to nexus via the mirror -->
        <repositories>
            <repository>
                <id>central</id>
                <url>http://central</url>
                <releases>
                    <enabled>true</enabled>
                    <updatePolicy>always</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                    <updatePolicy>always</updatePolicy>
                </snapshots>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <id>central</id>
                <url>http://central</url>
                <releases>
                    <enabled>true</enabled>
                    <updatePolicy>always</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                    <updatePolicy>always</updatePolicy>
                </snapshots>
            </pluginRepository>
        </pluginRepositories>
    </profile>
</profiles>
<activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
</activeProfiles> 
```

从公共和公共快照组下载的工件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:11:33.010

公共存储库中的快照版本很可能会被清除。你将无法控制这一点。

快照修订本质上是临时的。

# imagemagick - 使用imagemagick将EPS转换为PNG时如何添加填充？

> ID：13153846
> 
> 赞同：13
> 
> 时间：2012-10-31T08:24:37.263
> 
> 标签：imagemagick, imagemagick-convert

使用imagemagick将EPS转换为PNG时如何添加填充？

我想做类似的事情：

```
convert logo.eps -size 128x128 logo.png 
```

但是希望实际的 logo 是 96x96px，居中，被透明背景包围，达到 128x128 像素。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-31T08:28:40.950

我自己发现了：

```
convert logo.eps -background transparent -gravity center -scale 96x96 -extent 128x128 logo.png 
```

# iphone - 在表格视图中切换图像时如何采取任何行动？

> ID：13153855
> 
> 赞同：2
> 
> 时间：2012-10-31T08:25:09.740
> 
> 标签：iphone, ios, ipad

我有一个带有复选标记按钮的表格视图的应用程序。使用 UIcontroll 的子类化。使用这个

[如何在屏幕上显示 UIControl 的子类，](https://stackoverflow.com/questions/6247290/how-to-display-a-subclass-of-uicontrol-on-the-screen?lq=1.But)它只会切换图像。在我的情况下，我有两个部分。当我选择第 0 部分上的按钮时，它必须取消选择所有其他选择的按钮。仅适用于该按钮，而且我还需要知道用户选择了哪个按钮。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:35:26.400

在 ui 元素之间进行通信的最简单方法是发布事件。因此，在这种情况下，您想要的是捕获触摸事件或复选框更改事件，然后发布一个您的按钮被选中的事件。在其他单元格中，监听事件，当另一个复选框被选中时，单元格将其复选框设置为取消选中。

在选择单元格中：

```
NSDictionary *userInfo = [NSDictionary dictionaryWithObject:checkbox forKey:@"selectedCheckbox"];
   [[NSNotificationCenter defaultCenter] postNotificationName:@"checkboxSelected" object:nil userInfo: userInfo]; 
```

在其他单元格中：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(clearSelection) name:@"checkboxSelected:" object:userInfo];
... look in the 
-(void) checkboxSelected: (NSNotification *) note  {
    NSDictionary * userInfo = note.userInfo;
    checkbox = (UnMessage *)[userInfo objectForKey:@"selectedCheckbox"];
    if(checkbox == myCheckbox) return; // ignore
// deselect my checkbox... 
```

在单元格上的 dealloc 上：

```
 [[NSNotificationCenter defaultCenter] removeObserver:self name:@"checkboxSelected" object:nil]; 
```

# html - html页面显示struts2错误

> ID：13153856
> 
> 赞同：1
> 
> 时间：2012-10-31T08:25:13.687
> 
> 标签：html, css, jsp, model-view-controller, struts2

`addActionMessage`我使用and`addActionError`方法在 struts2 动作类中添加了我的错误和消息。现在我想要在 html 页面中显示此消息和此错误的代码？是否可以打印？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:47:26.790

放

```
<s:actionerrors /> 
```

和

```
<s:actionmessages /> 
```

JSP 中的标签

并且，为了获得更好的图形结果，请使用特定的 div 容器（例如，一个红色，一个绿色）并在之前检查是否有消息或错误（仅在不为空时打印 div）：

```
<s:if test="hasActionErrors()">
   <div class="feedError">
       <s:actionerrors />
   </div>
</s:if>

<s:if test="hasActionMessages()">
   <div class="feedOk">
       <s:actionmessages />
   </div>
</s:if> 
```

在 CSS 中

```
.feedError{
    width: 100%;
    border: 10px solid red;
}

.feedOk{
    width: 100%;
    border: 10px solid green;
} 
```

* * *

编辑：不，据我所知，您无法直接从 HTML 获取操作错误和消息。您可以对从 Session 中检索它们并在 JSon 中返回它们的操作进行 ajax 调用，但这确实是矫枉过正、设计不佳且没有必要。

作为一种解决方案，您可以使用另一种视图技术来代替 JSP；它不仅仅是普通的 HTML，但至少你不能在页面内使用 Scriptlet，如果这是你使用 JSP 的问题的话。

例如，您可以使用[FreeMarker 模板](http://freemarker.sourceforge.net/)。

之前的 JSP 片段在 .ftl 文件中会变成这样（未经测试）：

```
<#if (actionErrors?size>0)>
    <div class="feedError">
        <@s.actionerror />
    </div>
</#if>

<#if (actionMessages?size>0)>
    <div class="feedOk">
        <@s.actionmessage />
    </div>
</#if> 
```

或[速度](http://velocity.apache.org/engine/index.html)（再次，未经测试）：

```
#if( $actionErrors.size() > 0 )
   <div class="feedError">
   #foreach( $msg in $actionErrors )
       [$msg]<br />
   #end
   </div>
#end

#if( $actionMessages.size() > 0 )
   <div class="feedOk">
   #foreach( $msg in $actionMessages )
       [$msg]<br />
   #end
   </div>
#end 
```

* * *

注意：如果不使用 JSP 的原因是为了阻止 scriptlet，您可以在 web.xml 添加配置此行为

```
<jsp-config>
        <jsp-property-group>
                <url-pattern>*.jsp</url-pattern>
                <scripting-invalid>true</scripting-invalid>
        </jsp-property-group>
</jsp-config> 
```

将 JSP 与 Struts2 一起使用并不是唯一的方法，但它是最简单和最快的，恕我直言。

# asp.net - 具有成员资格和相同应用程序名称的多个应用程序

> ID：13153857
> 
> 赞同：0
> 
> 时间：2012-10-31T08:25:14.283
> 
> 标签：asp.net, asp.net-mvc, login, web-config, asp.net-membership

我的问题是一样的： [使用相同登录数据库的多个应用程序相互注销](https://stackoverflow.com/questions/2454623/multiple-applications-using-same-login-database-logging-each-other-out)

> 我在一台机器上设置了两个 ASP.NET 应用程序，它们的 web.config 文件在 AspNetSqlMembershipProvider 项中包含相同的 applicationName 值，因此它们共享用户和角色。
> 
> 问题顺序是：
> 
> 用户登录到应用程序 A，在浏览器中打开新选项卡登录到应用程序 B，他在应用程序 A 中的登录被注销，反之亦然。
> 
> 我应该使用不同的方法在两个应用程序之间共享登录信息吗？

问题是该解决方案仅避免在应用程序之间退出，但应用程序不共享用户登录信息。我要那个。

*   用户登录应用程序 A
*   他打开新选项卡并转到应用程序 B --> 用户已登录应用程序 B，因为他已登录 A。
*   反之亦然

我怎么能做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:35:17.140

也许如果您按照以下说明操作： http:
[//telligent.com/support/telligent_evolution_platform/w/documentation/common-things-to-check-when-using-forms-authentication.aspx](http://telligent.com/support/telligent_evolution_platform/w/documentation/common-things-to-check-when-using-forms-authentication.aspx)

保持 cookiename、域和机器密钥相同。这对我有用，但我的应用程序位于另一个应用程序的子目录中。

# mysql - 哪个是在 MySQL 中为 Web 项目存储性别列的最佳方法

> ID：13153863
> 
> 赞同：3
> 
> 时间：2012-10-31T08:25:43.827
> 
> 标签：mysql, database, enums

我已经建立了一个 JavaEE 项目，需要在 MySQL 中存储用户的性别。我想在添加新用户帐户时显示此属性。例如

```
<select name="gender">
    <option value="0">Male</option>
    <option value="1">Female</option>
</select> 
```

现在我找到了 2 种方法来将此属性存储在 MySQL 中。

1.  使用整数/字符存储性别列：

    ```
    gender tinyint(1) not null; 
    ```

    在这种情况下，我必须在我的 Java 代码中编写这些：

    ```
    public class StaticData {
        public static final short MALE = 0;
        public static final short FEMALE = 1;
    } 
    ```

    如果是这样，我的数据库将依赖我的 Java 代码来限制值范围并解释 0/1 代表什么（低级别取决于高级别）。我认为这不是一个好主意。

2.  使用枚举存储性别列：

    ```
    gender enum("MALE", "FEMALE") not null 
    ```

    在这种情况下，我的 Java 代码将取决于枚举的值。有两种方法可以获取这些值：

    1) public enum Gender { MALE, FEMALE }，这与方法1几乎相同的问题。

    2) 从 MySQL 中检索这些值，例如 "SHOW COLUMNS FROM user LIKE \"gender\"" ，然后使用正则表达式拆分字符串。但这是一种冗长的方法。每次加载 JSP 时都必须从 db 查询。我想会很贵。

这有一个通用的成语吗？如果不是，在为我的项目选择合适的解决方案时，我需要考虑哪些因素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-03T00:18:45.180

大多数应用程序*可能*不需要询问性别，但如果您绝对需要，我建议您也提供“其他”和“未知”选项，前者适用于不完全适合二进制文件的人性别模型，另一个用于如果该人选择不透露它。

对于这 4 个值，最简单的方法可能是将其作为`CHAR(1)`或 an存储在您的数据库中`ENUM("F", "M", "O", "U")`（请注意，我按字母顺序选择了这些值，而不是令人惊讶的典型“男性优先”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:50:58.420

我会制作一个以 id 作为键的表“性别”，并且应该向用户显示文本：

*   ID - 文本
*   1 - 男性
*   2 - 女性

在 Person 中，您将性别 ID 保存为外键。

当您想显示您加入的人时，可以将性别加入该人并打印出文本。对于选择控件，您选择性别表中的所有行并使用这些行生成 html。

如果有新的性别需要支持，直接在数据库中添加即可，不需要编辑java代码...

# expressionengine - login_form 中的返回值不起作用

> ID：13153871
> 
> 赞同：9
> 
> 时间：2012-10-31T08:26:01.470
> 
> 标签：expressionengine

我在以下页面有一个登录表单：

**site.com/en/downloads**

“en” 是 user_language （并存储在全局变量中）

当我登录时，表单会将我重定向到：

**site.com/downloads**

虽然它应该使用我的 user_language 将我重定向到 URL

我尝试了很多东西，但**返回值的值总是被忽略。**

*   返回 =”{site_url}/{user_language}/downloads”</li>
*   返回 =”{site_url}”</li>
*   返回 =“http://site.com”</li>
*   返回 =“http://google.com”</li>
*   return =“关于/索引”</li>

他们都重定向到 site.com/downloads。

正在输出的代码（对于最后一个示例）如下所示：

```
<form method="post" action="http://site.com/"  >
<div class='hiddenFields'>
<input type="hidden" name="XID" value="9fae3b1b5fcf882776da6638706595af73a7b15d" />
<input type="hidden" name="ACT" value="7" />
<input type="hidden" name="RET" value="about/index" />
<input type="hidden" name="site_id" value="1" />
</div> 
```

我有一个看起来像这样的 .htaccess：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

* * *

**更新：**

我尝试按照建议使用freemember，但问题仍然存在：

**I've set the return value to "about/index", but I'm still being redirected to site.com/downloads.**

The code generated by freemember looks solid though, so something must be overriding the return value.

```
<form method="post" action="http://site.com/downloads"  >
<div class='hiddenFields'>
<input type="hidden" name="XID" value="d9483688fbf63d9ea47e89a66e074b99f5b8465c" />
<input type="hidden" name="ACT" value="18" />
<input type="hidden" name="_params" value="wvkEsN96mPfmlhgerM2ppxGbMmiLJrz0Ntn7apKer/rmBpQaUozvSM0TvkVN66QlX/ptCM1IQGsuZuw7X3mzlOMCFIUyYFpbZy5h7nfPJMiHLdpqXqwBFOiA/zcNW0GKAIicv4JPAS2mfHKQE+mb2Ct0L+jhGz0NlSdELuMOeqQPJJ3B7U90D5w/sKTeaX5zaOMSvKJ4LZ7xP0Dn+UxE9g==" />
<input type="hidden" name="return_url" value="about/index" />
<input type="hidden" name="site_id" value="1" />
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:10:59.247

I finally figured it out.

Apparently I was still using a small plugin called "Twomile Login Redirect" which hijacked my login code ( even when it was disabled, I had to remove it )

So all is well now.

Lesson learned: remove old plugins :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:46:07.550

When you use the `return="{user_language}/about/index"` parameter as you mentioned above, does it correctly output the `RET` variable in the HTML code? How about just adding your own `RET` hidden input field? Just put this inside your login form somewhere:

```
<input type="hidden" name="RET" value="{user_language}/about/index" /> 
```

According to the HTML spec, if two inputs have the same `name`, then the later one will override any previous ones, so there is no problem doing it this way.

Alternatively, you could try using the [Freemember](https://exp-resso.com/freemember) plugin - you might have more luck with the return URL, and you can avoid the nasty grey redirect pages as well. `</shameless-plug>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T20:15:58.210

i might be looking at this to superficcially, but couldn't you use

```
return =”{segment_1}/downloads” 
```

# javascript - 整个功能自动运行

> ID：13153873
> 
> 赞同：0
> 
> 时间：2012-10-31T08:26:11.017
> 
> 标签：javascript

在我的代码中，我的整个函数运行一次意味着它们没有断点。程序这样运行，当我在第一个文本框中给出值时，它会在我制作的所有文本框中给我 0。请告诉我我在做什么。我的编码是：

```
<html>
<head>
<title>Puchase Recipt</title>
<script type="text/javascript">
function recipt()
{
var a = Number(document.f1.amount.value);
var b = Number(document.f1.quantity.value);
var pro = a*b;
if (pro > 100)
{
    var c = Number(document.f1.discount.value);
    var per = Number(pro * c / 100);
    var d = Number(document.f1.subtract.value);
    document.f1.subtract.value = per;
    }
var e = Number(document.f1.total.value);
var total = pro - per;
document.f1.total.value = total;
}
</script>
</head>
<body>
<h1>Purchase Recipt</h1>
<table border="1" bordercolor="#000099">
<form name="f1">
<tr>
<th>Amount per KG</th>
<td><input type="text" placeholder="Amount" name="amount" onChange="recipt()"/></td>
</tr>
<tr>
<th>Quntity of item</th>
<td><input type="text" placeholder="Quantity" name="quantity" onChange="recipt()"/></td>
</tr>
<tr>
<th>Discount in %</th>
<td><input type="text" placeholder="Discount" name="discount" onChange="recipt()"/></td>
</tr>
<tr>
<th>Deduct Amount</th>
<td><input type="text" placeholder="Deduct Amount" name="subtract" onChange="recipt()"/></td>
</tr>
<tr>
<th>Total Amount</th>
<td><input type="text" placeholder="Total Amount" name="total" onChange="recipt()"/></td>
</tr>
<th>Reset</th>
<td><input type="reset"/></td>
</tr>
</form>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:36:17.740

尝试在javascript中使用此代码..

```
function recipt()
{
var a = Number(document.f1.amount.value);
var b = Number(document.f1.quantity.value);
var pro = a*b;
var per=0;
if (pro > 100)
{
    var c = Number(document.f1.discount.value);
    per = Number(pro * c / 100);
    var d = Number(document.f1.subtract.value);
    document.f1.subtract.value = per;
    }
var e = Number(document.f1.total.value);
var total = pro - per;
document.f1.total.value = total;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:36:33.333

你应该首先纠正的事情。

1.  您不应该`recipt`在每个输入的更改事件上调用该函数。相反，您应该调用该文本框的更改事件，该事件预计将是最后一个被填充的事件，或者更好的方法是为其提供一个按钮并在按钮单击时调用该函数。

2.  在进行任何计算之前，首先验证文本框是否为空。如果它们不为空，请检查文本框是否包含任何非数字数据，否则您的计算将失败。

尝试这样做，一些小工作将解决您的问题

# android - Tabhost 标题错误（“您不能将自定义标题与其他标题功能相结合”）

> ID：13153874
> 
> 赞同：1
> 
> 时间：2012-10-31T08:26:12.033
> 
> 标签：android, android-layout, custom-component

我的一个屏幕上有一个标签主机，我在同一个屏幕上做了一个自定义标题。现在我想在自定义标题中添加一个按钮，但我收到“您不能将自定义标题与其他标题功能结合起来”错误。我尝试了所有这样的情况，[但](https://stackoverflow.com/questions/2686556/try-to-use-window-feature-custom-title-but-got-exceptionyou-cannot-combine-cust)它对我不起作用。

我的代码是：

```
requestWindowFeature( Window.FEATURE_CUSTOM_TITLE );
    setContentView(R.layout.routes);        
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,R.layout.customtitle);
    super.onCreate(savedInstanceState); 
```

我试过这个代码其他屏幕（这不包括tabhost）它工作。怎么了？有谁能够帮我？

**编辑：**

```
 <style name="CustomWindowTitleBackground">
    <item name="android:background">#084B8A</item>
</style>

<style name="CustomTheme" parent="android:Theme">
    <item name="android:windowTitleSize">65dip</item>
    <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
  </style> 
```

**在我的清单中：** `android:theme="@style/CustomTheme"`

我没有在 Java 类中编写任何代码片段。我只是这样声明。也许是不对的？可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:39:23.810

您的活动是否扩展了 Activity 或 TabActivity？

# java - 将 Spring Batch 与 Spring MVC 集成

> ID：13153876
> 
> 赞同：2
> 
> 时间：2012-10-31T08:26:20.470
> 
> 标签：java, spring, spring-mvc, integration, spring-batch

你们能指导我一些不错的教程，其中包含`Context-Configuration`（**applicationContext.xml** ）详细信息和一些示例代码，用于在我的[Spring MVC Web 应用程序中使用](http://static.springsource.org/spring-batch/)[Spring Batch](http://static.springsource.org/spring-batch/)运行简单的批处理作业，或者仅在此处以同样的方式帮助我。

*谢谢*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:55:05.947

请在发布问题之前更多地搜索网络。这些链接可能会对您有所帮助

[http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-1.html](http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-1.html)

[http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-2.html](http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-2.html)

[http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-3.html](http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-3.html)

[http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-4.html](http://krams915.blogspot.com/2012/02/spring-batch-tutorial-part-4.html)

# java - 如何在 SimpleRenderer 上设置抗锯齿选项

> ID：13153889
> 
> 赞同：7
> 
> 时间：2012-10-31T08:27:21.547
> 
> 标签：java, image-processing, ghostscript, ghost4j

我正在使用 Ghost4J SimpleRenderer 将我的 PDF 转换为图像。默认情况下，输出 png 图像没有抗锯齿。

我该如何设置它。？

我知道，使用 Core API 我们可以做到。但是，高级 API 中有什么方法可以设置它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T00:55:56.340

它根本不是内置的。只需查看`SimpleRenderer`正在使用的命令行选项：http: [//ghost4j.svn.sourceforge.net/viewvc/ghost4j/trunk/src/main/java/net/sf/ghost4j/renderer/ SimpleRenderer.java?revision=143&view=markup](http://ghost4j.svn.sourceforge.net/viewvc/ghost4j/trunk/src/main/java/net/sf/ghost4j/renderer/SimpleRenderer.java?revision=143&view=markup)

我建议`SimpleRenderer`使用此处提到的选项来改进[http://ghostscript.com/doc/current/Use.htm#Rendering_parameters](http://ghostscript.com/doc/current/Use.htm#Rendering_parameters)

我认为添加`"-dTextAlphaBits=4","-dGraphicsAlphaBits=4"`就`gsArgs`足够了。

# jasper-reports - 居中和合并行交叉表（jasper 报告）

> ID：13153893
> 
> 赞同：2
> 
> 时间：2012-10-31T08:27:29.100
> 
> 标签：jasper-reports, ireport

我正在尝试运行一个简单的碧玉报告（交叉表），其中第一列包含与以下相同的值：

```
Besmir  20
Besmir  21
Besmir  22 
```

我需要的是将第一列合并成这样的内容：PDF

```
 20
Besmir  21
        22 
```

我生成到 Excel 失败了。

```
Besmir  20

        21
        22 
```

我尝试取消选择打印重复值，但只打印第一行。

如果有人找到解决方案，请告诉我。

**** 适用于 PDF。但不能生成 EXCEL。****

[CROSSTAB 中的这个 PIC 考试](https://stackoverflow.com/questions/13082897/how-to-create-a-multiple-crosstab-report-in-jasper)

# javascript - 内容变化引起的过渡元素大小

> ID：13153897
> 
> 赞同：6
> 
> 时间：2012-10-31T08:28:14.343
> 
> 标签：javascript, jquery, html, css

我有一个按钮，里面有一些文字。当你按下它时，文本会改变。这使得按钮的宽度发生变化。如果可以通过以下方式转换元素宽度的变化，那就太好了：

```
#el {
    transition: width 150ms ease-out;
} 
```

当然，这仅在您明确更改`width`属性时才有效。

有谁知道实现这种效果的**优雅方法？**[这是一个（尚未起作用的）小提琴来破解](http://jsfiddle.net/namuol/cLDqj/).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:40:00.970

试试这个使用 jQuery 完成的[小提琴。](http://jsfiddle.net/cLDqj/8/)

```
$('button').click(function() {
    var width = $(this).css('width');
    var height = $(this).css('height');
    $(this).html('Hello, World!');
    var newWidth = $(this).css('width');
    $(this).css({'width': width, 'height': height});
    $(this).animate({'width': newWidth}, 1000);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T21:44:21.060

随着[莫里斯的回答](https://stackoverflow.com/a/13154047/2624876)，按钮的文本溢出到第二行，这是通过强制按钮的高度到其原始高度来解决的。相反，使用

```
button {
    white-space: nowrap;
} 
```

以便按钮的文本保持在一行并在转换时显示。然后代码不再需要处理按钮的高度，因此它可以变得更简单：

```
$('button').click(function() {
    var width = $(this).css('width');
    $(this).text('Hello, World!');
    var newWidth = $(this).css('width');
    $(this).css({'width': width});
    $(this).animate({'width': newWidth}, 400);
}); 
```

[http://jsfiddle.net/2rr54vp2/1/](http://jsfiddle.net/2rr54vp2/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T04:09:40.240

我想这是不可能的，因为浏览器无法获得准确的目标宽度；假设它在转换之前获得了值，但此时按钮已经到达宽度！也许这种转变存在，我们看不到。所以你需要一个初始宽度，你也需要知道目标宽度，我们 js

# javascript - 如何从 HTML5 颜色选择器中获取值

> ID：13153903
> 
> 赞同：6
> 
> 时间：2012-10-31T08:28:50.677
> 
> 标签：javascript, jquery

我正在尝试根据使用颜色输入类型的选择来更改 h1 元素的颜色，但我似乎无法让它工作。我尝试将颜色变量输出到警报，它只返回未定义。

```
 $(function(){

        $("#changeColor").click(function(){

          var color =  $("#colorChoice").value

          $("h1").css("color" + '"' + color + "'")

        });

    });

    </script>

</head>
  <html>
  <body>

  <h1>This is the default text</h1>
  <form>
  <fieldset>
      <select id="changeFont">
        <option>Arial</option>
        <option>Georgia</option>
        <option>Helevtica</option>
    </select>
    <input type="color" id="colorChoice">
    <button id="changeColor" class="btn-primary pull-right">Change</button>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T08:33:38.850

试试看`var color = $("#colorChoice").val();`jQuery[文档](http://api.jquery.com/val/)

您不妨将回调绑定到 onChange 事件而不是 onClick 事件：

```
$("#colorChoice").change(function(){
  $("h1").css('background', $(this).val());
}); 
```

[工作样本](http://jsfiddle.net/mv6We/2/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-10T06:58:59.747

你的语法不正确。

JavaScript：

```
var color = document.getElementById("colorChoice").value; 
```

jQuery：

```
var color =  $("#colorChoice").val(); 
```

我推荐使用 vanilla JS，因为它比 jQuery 更快。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-14T04:13:46.153

不要为此使用 Jquery。vanillaJS 工作得很好

```
document.getElementById("colorChoice").value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-16T12:38:10.617

试试这个：

```
document.getElementById("colorChoice").addEventListener('change', (e) => {

color = e.target.value;

}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-03T22:41:25.723

如果您不指定颜色输入类型标记的 value 属性，它将不会使用 javascript 获取颜色

第一：保持 value 属性为任何颜色的十六进制值。

```
<input type="color" value="#858585" id="colorChoice"> 
```

第二：使用jQuery属性值。例如，

```
$('#colorChoice').on('change', function() {
    var newbgcolor = this.value;
    $('#playground').css('background', newbgcolor);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-11T15:08:56.260

使用 vanilla JavaScript 试试这个。

```
function changeColor(){
    document.getElementById("colorChoice").addEventListener('change', (e) => {
        let color = e.target.value;
        document.getElementById('bgColor').style.backgroundColor = color; 
    });
};

changeColor(); 
```

不要忘记将这些 id 添加到您的 HTML 中。在我的例子中，我使用#bgColor 作为 div 和 #colorChoice 作为颜色纠察队员输入。

# c - 快速排序进入无限循环

> ID：13153905
> 
> 赞同：2
> 
> 时间：2012-10-31T08:29:18.133
> 
> 标签：c, algorithm, quicksort

我正在尝试编写快速排序的代码，但它一直在无限循环中，我已经努力在以下代码中找到错误，任何人都可以帮忙。

```
#include<stdio.h>
#include<stdlib.h>

int arr[100];

void quicksort(int low,int high)
{
    int i = low,j = high,pivotIndex,pivot;
    pivotIndex = rand()%20;
    pivot = arr[pivotIndex];

    if(i>=j)
        return;

    while(i<j)
    {

        while(arr[i]<pivot && i<j)
        {
            i++;
        }

        while(arr[j]>pivot && j>i)
        {
            j--;
        }

        if(i<j)
        {
            int temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
        }

    }
    quicksort(low,i);
    quicksort(i+1,high);
}

int main()
{
    int i,j,temp;

    for(i=0;i<20;i++)
        arr[i] = rand()%21;

    for(i=0;i<20;i++)
        printf("%d ",arr[i]);
    printf("\n");

    quicksort(0,19);

    for(i=0;i<20;i++)
            printf("%d ",arr[i]);
    printf("\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T08:32:30.210

您的枢轴选择是错误的，您应该在 (index) range`[low,high)`中选择一个枢轴，而您在 range 中选择了一个枢轴`[0,20)`：

```
pivotIndex = rand()%20; 
```

它稍后会使分区不顺利，并且`i`您稍后用于递归的 的值 - 将是错误的。

* * *

**编辑：**

另一个问题是分区，它还应该考虑如何处理枢轴元素及其副本 - 应该有某种“决胜局” - 枢轴应该转到数组的一侧（或其他替代方案）。
例如，假设枢轴是`5`并且数组是`[5,3,8,5]`：
您将一遍又一遍地无限交换 5，这绝对是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:05:06.563

作为排序插件的作者，我可以向您保证，重新发明这些算法真的会像谚语一样咬住您。;o)

必须特别注意（如前所述）选择枢轴，算术将如何影响枢轴值（例如，VBA 在浮点中进行整数运算，导致各种奇怪），其中“剩菜”去吧，最后一步如何处理最后一个分区（你不会是第一个在这里跳过几条记录的人）。

这是许多语言的排序算法的链接：

[http://rosettacode.org/wiki/Sorting_algorithms/Quicksort](http://rosettacode.org/wiki/Sorting_algorithms/Quicksort)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T08:39:47.833

```
 pivotIndex = rand()%20;
 pivot = arr[pivotIndex]; 
```

每次调用快速排序时，您的 pivotIndex 可能不在范围内（低，高）。您可以使用

```
pivotIndex = low+rand()%(high-low); 
```

我确信这将生成范围内的 pivotIndex。

# javascript - 如何让我的选择列表滚动到底部？

> ID：13153906
> 
> 赞同：1
> 
> 时间：2012-10-31T08:29:22.817
> 
> 标签：javascript, jquery, knockout.js

我创建了一个多选列表、输入文本框和一个添加按钮。用户可以通过输入框和添加按钮在多选列表中插入新选项。我还创建了一个示例小提琴：

[http://jsbin.com/exuwis/7/edit](http://jsbin.com/exuwis/7/edit)

我在示例中使用了 knockout.js。选择列表定义为“size="5"。在列表中获得超过 5 个条目后，如果不手动滚动到底部，我将看不到任何新条目。我希望当用户在列表中输入任何新条目时，滚动条会自动移动到列表底部。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T11:25:37.500

添加绑定处理程序：

```
ko.bindingHandlers.scrollDown = {
update: function (elem, valueAccessor) {
    var shouldBeSelected = ko.utils.unwrapObservable(valueAccessor());
    if (shouldBeSelected) {
        //scroll
        $(elem).scrollTop(val);
        // back to previous state
        var boundProperty = valueAccessor();
        if (ko.isWriteableObservable(boundProperty))
            boundProperty(false);
    }
}}; 
```

将数据绑定添加到滚动元素：

```
 select data-bind="scrollDown: scrollDown ... 
```

添加到 MainModel：

```
self.scrollDown = ko.observable(false);
self.CourseOptions.subscribe(function(){
  setTimeout(function () { 
    self.scrollDown(true); 
  }, 0); 
}); 
```

示例：http: [//jsbin.com/exuwis/14/edit](http://jsbin.com/exuwis/14/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:35:33.373

考虑在其他选项之上添加新选项。

自动滚动内容不是一个好习惯。

采用

`self.CourseOptions.unshift(self.OptionToAdd());`

代替

`self.CourseOptions.push(self.OptionToAdd());`

在数组的乞求处插入项目。

# android - MediaScanner, onScanCompleted 没有被调用

> ID：13153907
> 
> 赞同：1
> 
> 时间：2012-10-31T08:29:24.467
> 
> 标签：android, memory-leaks, android-activity, android-mediascanner

我对 MediaScanner 有疑问。我用它用这个代码扫描一个文件：

```
public class SingleMediaScanner implements MediaScannerConnectionClient {

private static final String TAG = "SingleMediaScanner";

public MediaScannerConnection mMs;
private String mFile;

public SingleMediaScanner(Context context, String s) {
    mFile = s;
    mMs = new MediaScannerConnection(context, this);
    mMs.connect();
}

public void onMediaScannerConnected() {
    Log.d(TAG, "MediaScanner conectado");
    mMs.scanFile(mFile, null);
}

public void onScanCompleted(String path, Uri uri) {
    Log.d(TAG, "MediaScanner terminó de escanear");
    mMs.disconnect();
}
} 
```

如果我在活动（onCreate）开始时扫描文件，它会完美运行。扫描仪已连接，它扫描文件，然后完成。

但是如果我调用扫描仪然后我转到另一个活动，MediaScanner 会泄漏内存，因为它没有调用 onScanCompleted 方法。而且，如果我在离开活动之前将 unbindService() 与扫描仪一起使用，则扫描仪将无法工作（该文件不会出现在图库应用程序中）。

我离开活动时需要使用扫描仪。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:56:40.540

还有其他方法可以使用静态 scanFile() 方法或发送广播将文件添加到库中。通常这些应该适合您的需要。如果您需要对添加过程进行一些控制，则只需要 MediaScannerConnection。

我写了一篇关于如何使用其他[方法来触发 MediaScanner](http://www.grokkingandroid.com/adding-files-to-androids-media-library-using-the-mediascanner/)的博客文章。

# c# - 移动 TextBlock，并使其大小适合内容

> ID：13153908
> 
> 赞同：1
> 
> 时间：2012-10-31T08:29:36.107
> 
> 标签：c#, windows-8, microsoft-metro

目前，我有以下 XAML 代码，可以达到以下效果。

![在此处输入图像描述](../Images/0b8bcf004103ee958c2a53829168585d.png)

```
<UserControl
    x:Class="FacionMetro.Gui.HealthIndicatorView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FacionMetro.Gui"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <StackPanel>
        <Grid>
            <TextBlock Name="message" FontSize="22" Text="120 is good" Margin="250,0,-250,0"/>
        </Grid>
        <Grid>
            <TextBlock Name="arrow" FontSize="22" Text="▼" Margin="350,0,-350,0" />
        </Grid>
        <Grid Height="200">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="8*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="1">
                    <Grid.Background >
                        <LinearGradientBrush EndPoint="1,0" StartPoint="0,0">
                            <GradientStop Color="#ff00ff00"/>
                            <GradientStop Color="#ffffff00" Offset="0.25" />
                            <GradientStop Color="#ffffa500" Offset="0.75" />
                            <GradientStop Color="#ffff0000" Offset="1" />
                        </LinearGradientBrush>
                    </Grid.Background>
                </Grid>
            </Grid>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" FontSize="22" HorizontalAlignment="Center">40</TextBlock>
                <TextBlock Grid.Column="1" FontSize="22" HorizontalAlignment="Center">60</TextBlock>
                <TextBlock Grid.Column="3" FontSize="22" HorizontalAlignment="Center">100</TextBlock>
                <TextBlock Grid.Column="4" FontSize="22" HorizontalAlignment="Center">120</TextBlock>
            </Grid>
        </Grid>
    </StackPanel>
</UserControl> 
```

**我希望根据彩条当前值动态移动三角形箭头和消息的 x 位置（?? 好）。**

![在此处输入图像描述](../Images/bf121e207bde8ba67f3e48435e8945ee.png)

我当前的代码片段如下。它还不可行。

```
public sealed partial class HealthIndicatorView : UserControl
{
    public HealthIndicatorView()
    {
        this.InitializeComponent();
    }

    public void setValue(int value)
    {
        // Margin X. For both left and right sides.
        double offsetX = this.ActualWidth / 10;

        if (value < 40) {
            // I wish to move the message and arrow the left most. How?
            // The below code is having error :
            // Cannot modify the return value of 'Windows.UI.Xaml.FrameworkElement.Margin' because it is not a variable
            message.Margin.Left = offsetX;
            arrow.Margin.Left = offsetX;
            return;
        }

        if (value > 120) {
            // messageSize and arrowSize are incorrect. As the TextBlock isn't fit to the string content.
            double messageSize = message.Width;
            double arrowSize = arrow.Width;

            double rightMostPosForMessage = this.ActualWidth - offsetX - messageSize;
            double rightMostPosForArrow = this.ActualWidth - offsetX - arrowSize;

            // I wish to move the message and arrow the right most. How?
            // The below code is having error :
            // Cannot modify the return value of 'Windows.UI.Xaml.FrameworkElement.Margin' because it is not a variable
            message.Margin.Left = offsetX;
            arrow.Margin.Left = offsetX;
        }

    }
} 
```

1.  **如何`TextBlock`根据彩条值移动周围？**（要知道*移动*是什么意思，请看 2 个不同的屏幕截图，当颜色条值分别为 40 和 120 时）
2.  **我怎样才能使`TextBlock`, 完全适合字符串内容？我需要这个，因为我需要知道字符串内容占用的空间，这样我就不会将它们移出界限。**（正如你在“120 好”的截图中看到的，虽然字符串内容只是一条短消息，但 TextBlock 占用了太多空间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:14:47.290

## 移动 TextBlock

要四处移动`TextBlock`，您需要定义

```
<StackPanel>
    <Grid>
        <TextBlock Name="message" FontSize="22" Text="120 is good">
            <TextBlock.RenderTransform>
                <TranslateTransform x:Name="messageTransform" />
            </TextBlock.RenderTransform>
        </TextBlock>
    </Grid>
    ... 
```

然后在您的 C# 代码中。

`messageTransform.X = offsetX;`

## 适合字符串内容

```
<Grid>
    <TextBlock Name="arrow" FontSize="22" Text="▼" HorizontalAlignment="Left">
        <TextBlock.RenderTransform>
            <TranslateTransform x:Name="arrowTransform" />
        </TextBlock.RenderTransform>                
    </TextBlock>
</Grid> 
```

采用`HorizontalAlignment="Left"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:50:02.143

回答你的第二个问题。

您可以添加`TextBlock`到 a`Grid`并将其设置`Width`为**Auto**。也用于`TextBlock.Width`将其绑定到`Grid.Width`. 这样宽度将自动调整为内容。

```
message.Width="{Binding ElementName=NameOfYourGrid}" 
```

# git - git 的 svn:mergeinfo 等价物是什么？

> ID：13153913
> 
> 赞同：5
> 
> 时间：2012-10-31T08:29:44.013
> 
> 标签：git, svn, merge

我在 git 中缺少干净的合并信息：

*   提交合并了哪些提交（包括评论的列表）
*   哪些提交没有被提交合并。

我怎样才能得到那些？在 SVN 中有一个非常有用的 mergeinfo 概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:39:49.130

我不确定您要解决的具体情况。

*   `foo`您可以使用以下命令列出尚未合并到分支中的分支提交`bar`：

    ```
    git log bar..foo 
    ```

*   您可以使用以下命令列出来自任何本地分支但未合并到分支中的所有提交`bar`：

    ```
    git log --branches --not bar 
    ```

*   如果您想要远程分支，请使用`--remotes`. 查看`git-rev-list(1)`更多变体。

*   也许这就是您想要查看自合并的双方父母的共同祖先以来哪些提交是新的，尽管我认为这个问题并不明确：

    ```
    git log <merge-commit>^1...<merge-commit>^2 
    ```

*   您可以使用`git cherry`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:55:19.480

对于完整的 SVN 分支合并，Git 等效于完整的 Git 分支合并（即存在合并提交与多个父级）。

对于 SVN 樱桃挑选，没有严格的等价物。但是如果你使用`git cherry-pick`命令，它会保留提交信息。我个人使用此提交消息来了解更改是否存在于某个分支中。

# php - document.cookie 在 Firefox 16.0.2 中不起作用

> ID：13153914
> 
> 赞同：0
> 
> 时间：2012-10-31T08:29:53.440
> 
> 标签：php, javascript

我正在尝试存储 cookie 并检索它，但它在 IE 中的所有其他浏览器中运行良好，但在 FF 中不起作用

我设置 cookie 的代码是

```
var startTime = e.timeStamp;
var setStartCookie = "startTime="+startTime;
document.cookie=setStartCookie; 
```

当我使用

```
$_COOKIE['startTime'] 
```

请尽快帮助我...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:40:23.343

您在上面提供的代码在 Firefox 16 上对我有用。请确保浏览器配置为接受 cookie。

# objective-c - 推送 ssl 证书在钥匙串中缺少私钥

> ID：13153916
> 
> 赞同：4
> 
> 时间：2012-10-31T08:30:01.960
> 
> 标签：objective-c, cocoa, push, ssl-certificate, provisioning

我正在更新应用商店中的一些应用以集成推送通知，但推送 ssl 证书存在问题。

当我在没有推送的情况下创建应用程序时，我使用了通配符 App ID `myradio.*`，然后我创建了与应用程序的捆绑包 ID 相对应的新的显式 App ID，例如`myradio.radioname`.

我已经使用证书配置了推送，但目前没有使用它，现在我需要使用这些 App ID，当我安装开发和生产推送 SSL 证书时，它们在钥匙串中缺少私钥。也许是因为我吊销了我的开发证书。但是对于某些应用程序来说一切正常。

无法创建具有相同后缀的另一个 App ID，也无法使用现有的，所以您知道如何更新我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:17:39.327

您是否可以只更改应用程序中的捆绑标识符，然后使用新标识符创建新的 App ID 和配置文件？例如，您的应用程序当前捆绑 ID 是 com.myradio.radioname 为什么不直接将其更改为 com.radio.radioname。我希望我明白你在问什么。我个人只是使​​用[Parse.com 的推送通知](https://parse.com/tutorials/ios-push-notifications)，它非常容易设置，我建议你研究一下。

# php - 我想在 windows phone 7.5 中播放 .mp4 视频，但它不适用于 PHP

> ID：13153919
> 
> 赞同：2
> 
> 时间：2012-10-31T08:30:16.963
> 
> 标签：php, windows-phone-7, mp4

我已经为 android 和 Iphone 编写了代码，但它在 Windows Phone 7.5 中不起作用。我搜索论坛，但我什么也没找到。

设备打开播放器但不加载视频。

我不知道需要什么标题，知道吗？

我的 android 代码是这样的：

```
$file

$fp = @fopen($file, 'rb');

$size   = filesize($file); // File size
$length = $size;           // Content length
$start  = 0;               // Start byte
$end    = $size - 1;       // End byte

header('Content-type: video/mp4');
header("Accept-Ranges: 0-$length");
if (isset($_SERVER['HTTP_RANGE'])) {

    $c_start = $start;
    $c_end   = $end;

    list(, $range) = explode('=', $_SERVER['HTTP_RANGE'], 2);
    if (strpos($range, ',') !== false) {
        header('HTTP/1.1 416 Requested Range Not Satisfiable');
        header("Content-Range: bytes $start-$end/$size");
        exit;
    }
    if ($range == '-') {
        $c_start = $size - substr($range, 1);
    }else{
        $range  = explode('-', $range);
        $c_start = $range[0];
        $c_end   = (isset($range[1]) && is_numeric($range[1])) ? $range[1] : $size;
    }
    $c_end = ($c_end > $end) ? $end : $c_end;
    if ($c_start > $c_end || $c_start > $size - 1 || $c_end >= $size) {
        header('HTTP/1.1 416 Requested Range Not Satisfiable');
        header("Content-Range: bytes $start-$end/$size");
        exit;
    }
    $start  = $c_start;
    $end    = $c_end;
    $length = $end - $start + 1;
    fseek($fp, $start);
    header('HTTP/1.1 206 Partial Content');
}
header("Content-Range: bytes $start-$end/$size");
header("Content-Length: ".$length);
header("Content-Disposition: inline; filename=".$outname);

$buffer = 1024 * 8;
while(!feof($fp) && ($p = ftell($fp)) <= $end) {

    if ($p + $buffer > $end) {
        $buffer = $end - $p + 1;
    }
    set_time_limit(0);
    echo fread($fp, $buffer);
    flush();
}

fclose($fp);
exit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:49:12.483

Windows Phone 7.5 支持具有以下编解码器的 MP4 容器（[来源](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087%28v=vs.92%29.aspx)）：

*   AAC-LC
*   AAC+
*   eAAC+

您应该尝试在桌面版 IE9 上打开视频并进行调试（它与移动版 IE9 具有相同的代码库）。

# javascript - icefaces 3 form onkeydown 事件不会触发

> ID：13153921
> 
> 赞同：0
> 
> 时间：2012-10-31T08:30:43.623
> 
> 标签：javascript, icefaces-3

我正在使用 Icefaces 3 。

我想在表单上按下回车键时执行 javascript 功能。

我在以前的应用程序（在 Icefaces 1.8 上）中使用了这段代码，它运行良好。但现在这在 Icefaces3 中不起作用：

这是我的代码：

```
<ice:form id="queryForm" onkeydown="submitOnEnter(event);"> 
```

在我的标题中，我有：

```
<script type="text/javascript">
    function submitOnEnter(event){
        alert("submitOnEnter");
    if( event.keyCode == 13 || evt.keyCode == 13 )
         {
    document.getElementById('queryForm:formSubmit').click();
    }
 };
 </script> 
```

当我使用按键事件时，javascript 不起作用，但是当我使用鼠标事件时，它们可以正常工作

我怎样才能解决这个问题？

# curl - 卷曲 CA 证书问题

> ID：13153922
> 
> 赞同：-1
> 
> 时间：2012-10-31T08:30:53.907
> 
> 标签：curl

我尝试使用 curl 访问特定的 url，这反过来又给出了典型的错误 60 作为回报。

curl: (60) SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败更多详细信息：[http ://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

[我尝试用http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)替换当前证书，还尝试使用使用[http://mxr.mozilla.org/mozilla/source/security/nss/lib/创建的证书ckfw/builtins/certdata.txt?raw=1](http://mxr.mozilla.org/mozilla/source/security/nss/lib/ckfw/builtins/certdata.txt?raw=1)

仍然没有运气。除了这个之外，所有其他 url 都在工作。

但 Url 在 Chrome 和 IE9 上运行良好。操作系统使用 Windows 7 和 CentOS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:51:11.470

我在测试期间错过了 Firefox。从 Firefox 我能够检索到存储所用证书的确切 CA 证书链接。我将该部分添加到我现有的证书中。它解决了这个问题。

PS：Chrome 和 IE 在搜索证书时会将您定向到同一位置。但是 Firefox 有自己的东西。

感谢 Lex 提醒有关 Firefox 的信息。:)

# jquery - jQuery datepicker 显示下个月，如果接近本月末

> ID：13153930
> 
> 赞同：2
> 
> 时间：2012-10-31T08:31:35.860
> 
> 标签：jquery, jquery-ui-datepicker

如果当前日期接近月底，如何将日历设置为自动显示下个月？

解决日历一直默认的问题。

![在此处输入图像描述](../Images/ee9945f263f730d908439d039322d1f1.png)

目前我有：

```
$(predecessor+"input.datePicker").datepicker({
    minDate: 0,
    changeMonth: true,
    dateFormat: "dd/mm/yy",
    firstDay: 1,
    hideIfNoPrevNext: true,
    showAnim: 'slideDown',
    showOn: "both",  
    showOtherMonths: true,
    showStatus: true,
    maxDate: '-1d'
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:50:00.667

使用`beforeShow`Event 设置属性`numberOfMonths`

```
$('#calendar').datepicker({
    //minDate: 0,
    changeMonth: true,
    dateFormat: "dd/mm/yy",
    firstDay: 1,
    hideIfNoPrevNext: true,
    showAnim: 'slideDown',
    showOn: "both",  
    showOtherMonths: true,
    showStatus: true,
    //maxDate: '-1d'
    beforeShow: function(text, inst){        
        var next_day = new Date(
            inst.selectedYear,
            inst.selectedMonth,
            inst.selectedDay
        );        
        next_day.setDate(next_day.getDate()+1);
        console.log(inst.selectedMonth);
        console.log(next_day.getMonth());
        if(inst.selectedMonth != next_day.getMonth())
            return {numberOfMonths: 2};
        else
            return {numberOfMonths: 1};
    }
}).datepicker("setDate", "+0d" );​ 
```

演示： http: [//jsfiddle.net/Z44PQ/1/](http://jsfiddle.net/Z44PQ/1/)，选择11月30日再次打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:21:01.860

Datepicker 有一个 defaultDate 选项，它指定从哪一天开始突出显示。

所以，如果你想出你的逻辑来确定下个月什么时候开始，它应该很简单。

```
var defaultDate = new Date();
if(advanceMonth){
  defaultDate = new Date(defaultDate.getYear(), defaultDate.getMonth() + 1, 1, 0, 0,0)
}

$(predecessor+"input.datePicker").datepicker({
  defaultDate: defaultDate
}); 
```

# c# - UDP 数据包，包括标头

> ID：13153931
> 
> 赞同：1
> 
> 时间：2012-10-31T08:31:42.207
> 
> 标签：c#, udp

我制作了简单的 UDP 客户端/服务器应用程序。客户端向服务器发送一条文本消息。一切正常。我的问题是：当我打开 Wireshark 时，我看到数据包的总长度比我在代码中看到的要大，我认为这是因为附加到数据的标头。有没有办法在服务器端获取完整的数据包（标头+有效负载）？我在 winpcap 上看到了多个线程，但这不是我想要的。我需要 UDP 侦听器，它将接收带有标头的数据作为字节数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:29:39.990

您无法使用本机 .Net 执行此操作。读取/写入原始帧是网络堆栈的工作，而不是应用程序。你确定你真的需要这样做吗？

如果你真的必须，你将不得不使用诸如[Pcap.Net 之](http://pcapdotnet.codeplex.com/)类的 winpcap 包装器。

# sql - 为了提高性能，我在 SSIS 中选择较少列的位置是否重要？

> ID：13153932
> 
> 赞同：0
> 
> 时间：2012-10-31T08:31:48.010
> 
> 标签：sql, performance, select, ssis

假设在数据流任务中，我有一个 OLE DB 源。我想提高 SSIS 的性能。我在哪里选择更少的列有关系吗？

1.  在数据库中创建一个 SELECT 较少列的视图，将其用作源。

2.  在源中键入 SQL SELECT 以选择更少的列。

3.  选择表，然后取消选中源内的列。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T08:56:45.440

在 SSIS 中，您不应该使用`Table name or view from a variable` 它们，因为它们倾向于提取所有数据。它的行为类似于[Select *](http://www.mssqltips.com/sqlservertip/1840/sql-server-integration-services-ssis-best-practices/)。

```
The adapter opens a rowset-based on the table or view. Then it calls OpenRowset
in the validation phase to retrieve column metadata, and later in the execution
phase to read out the data. 
```

最好的方法是输入提高性能的 SQL 命令。但是使用 View ，性能提高了很多倍。查看[这篇](http://blogs.msdn.com/b/sqlperf/archive/2007/04/29/set-up-ole-db-source-to-read-from-view-efficiently.aspx)文章在 OLEDB SOURce 中使用 View

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T12:41:28.570

对@praveen 的回答的一个微不足道的澄清。由于打开的行集调用的开销，在下拉列表中选择一个表和编写等效的 SELECT * （即使这样，枚举列）之间存在性能差异，无论多么微小。

也就是说，如果您需要从 SSIS 中获得最佳性能，请尽可能明确。如果您只需要 30 列中的 5 列，请明确选择这些列。SSIS 可能会拉回所有 30 列并在客户端过滤它们。您只是浪费了网络带宽*，并且*您必须读取聚集索引才能获取可能存在覆盖索引的所有数据。增加读取成本 + 增加网络成本 + 增加 SSIS 将要丢弃的列的内存成本？在任何工作开始之前，您都需要预先支付大量费用。

You cannot get faster throughput than your starting component supplies.

# java - Java MySQL 连接

> ID：13153933
> 
> 赞同：0
> 
> 时间：2012-10-31T08:32:03.567
> 
> 标签：java, mysql, linux, jdbc

> **可能重复：**
> [Mysql JDBC 驱动程序 ClassNotFoundException](https://stackoverflow.com/questions/6271453/mysql-jdbc-driver-classnotfoundexception)

我使用一个函数连接到 Linux 上的 MySQL 服务器，它是：

```
protected void connectMYSQL() {
    if (!this.userName.isEmpty() && !this.password.isEmpty() && !this.URL.isEmpty()) {
        try {
            try {
                Class.forName("com.mysql.jdbc.Driver").newInstance(); 
            } catch (Exception ex2) {
                 System.out.println("class.forname exception : " + ex2);
                 return;
            }
            connection = DriverManager.getConnection(URL, userName, password);
        } catch(SQLException ex) {
            System.out.println("can not connect to mysql : " + ex);
        }
    }
} 
```

有变量

```
userName = root
password = xxxxxxxxxx
URL = jdbc:mysql://127.0.0.1/parkDevelop?profileSQL=true 
```

但我收到一个错误

```
class.forname exception : java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

这次当我删除线路`Class.forName("com.mysql.jdbc.Driver").newInstance();`时，我收到连接失败的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:37:28.213

您需要从[此处](http://www.mysql.com/products/connector/)下载连接器 并将其包含在您的类路径中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:34:20.407

您可能缺少[Java 的 MySQL 连接器](http://www.mysql.fr/downloads/connector/j/)。将其添加到您的类路径中，以便您的程序可以找到该类`com.mysql.jdbc.Driver`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T08:38:15.123

您的 JDBC-MySQL 连接器驱动程序不在您的类路径中。将 mysql-connector-xxx.jar 的链接添加到您的 CLASSPATH 环境变量中。

`echo "export CLASSPATH=$CLASSPATH:/path/to/your/mysql-connector.jar" > ~/.bashrc`

我也认为`URL = jdbc:mysql://127.0.0.1/parkDevelop?profileSQL=true`应该是：

`URL = jdbc:mysql://127.0.0.1:3306/parkDevelop?profileSQL=true`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:01:00.770

此错误表明您的 mysql-connector-java-5.0.8-bin.jar 文件在 WEB-INF/lib 文件夹中丢失。所以你添加这个jar文件并重新启动tomcat服务器。对于添加 jar 文件，使用将首先复制该 jar 文件，然后在 Eclipse 的 WEB-INF/lib 文件夹中粘贴（ctrl+v）。

# mysql - Mysql：从两个表中选择数据，其中电子邮件地址列在两个表中都匹配

> ID：13153937
> 
> 赞同：0
> 
> 时间：2012-10-31T08:32:25.857
> 
> 标签：mysql

我试图从两个表中获取数据，它们是 wp_users 和 opt_in。

这两个表都有一个电子邮件列（它们之间唯一的共同点），我试图获得如下所示的结果，其中我有 wp_users 登录名和 opt_in 表数据的其余部分：

`wp_users.user_login, email, opt_in.first_name, opt_in.last_name`

我写的查询太慢了。每个表中有大约 100k 行，如果不对查询进行限制，我就没有得到结果。我一定没有使用正确的工具来完成这项工作。告诉我我的方式的错误。

这是一个查询示例，它为我提供了正确的数据，但速度很慢：

```
SELECT wp_users.user_email, opt_in.first_name, opt_in.last_name 
FROM wp_users, opt_in 
WHERE wp_users.user_email = opt_in.email; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:39:46.727

您应该在该列上[创建索引。](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)

对于电子邮件字段，您可以使用 UNIQUE 索引，它还可以帮助您删除重复条目。

如果您想检查表上的现有索引。在 phpmyadmin / mysql 控制台中使用以下查询

```
show indexes from TABLENAME; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:11:38.913

*   尝试使用 JOIN - [http://dev.mysql.com/doc/refman/5.5/en/join.html](http://dev.mysql.com/doc/refman/5.5/en/join.html)

> SELECT wp_users.user_email, opt_in.first_name, opt_in.last_name
> FROM wp_users
> INNER JOIN (opt_in)
> ON (opt_in.email = wp_users.user_email)

*   使用 EXPLAIN 来了解发生了什么

*   如前所述，索引在提高查询执行速度方面发挥着巨大作用

*   很少有其他链接可以解释为什么任何人都应该使用 JOIN 而不是多个 Select

    *   [SQL 左连接与 FROM 行上的多个表？](https://stackoverflow.com/questions/894490/sql-left-join-vs-multiple-tables-on-from-line)

    *   [使用逗号 (,) 从多个表中左连接或选择](https://stackoverflow.com/questions/4779174/left-join-or-select-from-multiple-table-using-comma)

# html - 如何在 HTML 中重复一个字符？

> ID：13153944
> 
> 赞同：5
> 
> 时间：2012-10-31T08:33:08.367
> 
> 标签：html, css

有没有办法在 HTML（不是 HTML5！）的表格单元格中重复打印一个字符？

*（仅使用 HTML 或仅使用 HTML 和 CSS）

** 需要打印“.” 通过一个细胞的全长。不知道单元格的确切宽度！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T20:12:08.030

好的，在您详细说明您的问题后，我有解决方案。一个带有虚线底部边框和顶部带有白色背景的文本的 div。

例子 ：

CSS：

```
.line{
    border-bottom:1px dotted black;
    position:relative;
    height:16px;
}

.line span{
    display:inline-block;
    position:relative;
    background:white;
    bottom:-2px;
    height:100%;
    padding:0 5px;
}
.line .price{
    position:absolute;
    right:0;
}​ 
```

HTML：

```
<div class="line">
    <span class="title">name</span>
    <span class="price">123.23$</span>
</div>
<div class="line">
    <span class="title">name</span>
    <span class="price">123.23$</span>
</div>​ 
```

[http://jsfiddle.net/bKuVe/](http://jsfiddle.net/bKuVe/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-13T18:14:32.690

我不小心遇到了这个问题，无法阻止自己发布自己的答案。

我使用这种方法已有几年了，我喜欢它的简单性。整个想法是`float: left|right`用于带有文本的元素，而`block`围绕它的元素将产生边距。`overflow: hidden`我们通过添加到块元素来利用这一点。
这里的另一个改进是使用`::after`伪类而不是实际的块元素。这很有意义，因为点应该更像样式表的一部分。

```
.line {
    padding: 60px 0;
}
.title {
    float: left;
}
.price {
    float: right;
}
.line::after {
    content: "\0020";
    display: block;
    min-height: 1em;
    border-bottom: 1px dotted;
    overflow: hidden;
}
```

```
<div class="line">
    <span class="title">name</span>
    <span class="price">123.23$</span>
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:36:13.250

制作背景图像和重复-x 怎么样？

```
 background:url(character.png) repeat-x; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-13T19:43:25.400

如果你喜欢编码，你可以尝试这样的事情：

```
var tag = [tag];
var h = tag[0].getBoundingClientRect().height;
while(h===tag[0].getBoundingClientRect().height){
    tag[0].innerHTML+='-';
};
tag[0].innerHTML=tag[0].innerHTML.replace('-',''); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-31T08:43:07.793

如果您使用纯 HTML（我的意思是不使用任何服务器生成的 HTML），请多次写入该字符。如果您使用服务器生成的 HTML（如 PHP、JSP 等），您可以多次编写字符或使用循环。***除非***您使用 JavaScript ，否则这无法在客户端完成。

# css - 如何在继承第一个表样式的表中停止表？

> ID：13153946
> 
> 赞同：1
> 
> 时间：2012-10-31T08:33:20.320
> 
> 标签：css, css-tables

好的，首先我不是用表格或类似的东西来设计页面，只是想把它排除在外，哈哈。

基本上，我有一张表格，列出了服务、价格和添加到购物车的 paypal 按钮。

一切都很好，看起来很棒，除了我使用了两个内联样式，我想把它们带到一个外部样式表中。

我使用内联样式的原因：其中一个 paypal 按钮有一个下拉选项菜单……该选项菜单由 . 所有的贝宝按钮，包括带有选项菜单的按钮都在我的主表中，所以带有选项按钮的贝宝正在一个表中创建一个表，该表继承了为我的主表设置的样式。样式是围绕选项按钮的边框。

我可以阻止它的唯一方法是使用内联样式。

我尝试添加一些将边框设置为无的 CSS：

```
.noborder {border:none;} 
```

然后将 HTML 类添加到 paypal td 部分：，但这不起作用。只有内联样式会像这样停止边框：

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:38:44.960

尝试相同的 CSS 解决方案，但使用 强制样式`!important`，如下所示：

```
.noborder {border:none !important;} 
```

# function - 如何将此函数转换为使用尾调用

> ID：13153953
> 
> 赞同：3
> 
> 时间：2012-10-31T08:34:00.623
> 
> 标签：function, recursion, f#, functional-programming, tail-recursion

递归函数：

```
let rec listMerge (l1 : 'a list) (l2 : 'a list) =
    if l1.IsEmpty then      l2 
    elif l2.IsEmpty then    l1 
    else                    l1.Head :: l2.Head :: listMerge l1.Tail l2.Tail 
```

现在，除非我很高兴地弄错了，否则这实际上并没有执行尾调用，如果不考虑这`::`是正确的关联，它可能看起来像它。

然后，我的印象（从我读过的东西，但现在找不到）通过使用额外的`fun`东西可以很容易地转换为尾递归。

那么，有可能吗？代码？

**我的回答：**所以，这就是我更改功能的方式，感谢以下答案：

```
let listMerge l1 l2 =
    let rec mergeLoop  (l1 : 'a list) (l2 : 'a list) acc =
        if l1.IsEmpty then      (List.rev acc) @ l2 
        elif l2.IsEmpty then    (List.rev acc) @ l1
        else                    mergeLoop l1.Tail l2.Tail (l2.Head :: l1.Head :: acc)
    mergeLoop l1 l2 [] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T09:15:36.960

正如@Ramon 建议的那样，您应该使用[模式匹配](http://msdn.microsoft.com/en-us/library/dd547125.aspx)以获得更好的可读性：

```
let rec listMerge xs ys =
    match xs, ys with
    | [], _ -> ys
    | _, [] -> xs
    | x::xs', y::ys' -> x::y::listMerge xs' ys' 
```

如您所见，两个 cons 构造函数`(::)`是最后的操作，`listMerge`因此该函数不是尾递归的。

您可以使用累加器以尾递归方式获取结果：

```
let listMerge xs ys =
    let rec loop xs ys acc =
        match xs, ys with
        | [], zs | zs, [] -> (List.rev zs)@acc
        | x::xs', y::ys' -> loop xs' ys' (y::x::acc)
    List.rev (loop xs ys []) 
```

在上面的函数中，`List.rev`如果您添加更多模式来解构两个列表，直到它们都为空，则可以避免第一次调用。

[在 F# 中，有一种使用序列表达式](http://msdn.microsoft.com/en-us/library/dd233209.aspx)的尾递归方法，它遵循[延续传递风格](http://en.wikipedia.org/wiki/Continuation-passing_style)：

```
let listMerge xs ys =
    let rec loop xs ys =
        seq {
            match xs, ys with
            | [], zs | zs, [] -> yield! zs
            | x::xs', y::ys' -> 
                yield x
                yield y
                yield! loop xs' ys'
        }
    loop xs ys |> Seq.toList 
```

我喜欢这种方法，因为它方便且接近您的原始配方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:00:18.697

可以在后续调用中将构造的结果累加`listMerge`，最后返回累加的结果。我的 F# 技能相当生疏，但这里有一个简单的 Lisp 函数。

```
(defun list-merge (xs ys &optional acc)
  (cond ((< 0 (length xs)) (list-merge (rest xs) ys (cons (first xs) acc)))
        ((< 0 (length ys)) (list-merge xs (rest ys) (cons (first ys) acc)))
        (t acc)))

(list-merge '(1 2 3) '(3 4 5)) ;=> (5 4 3 3 2 1)
(list-merge '() '(1 2))        ;=> (2 1)
(list-merge '() '())           ;=> nil 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:16:20.740

使用累加器的简单版本：

```
let rec listMerge (l1 : 'a list) (l2 : 'a list) acc =
    if l1.IsEmpty then      (List.rev l2)@acc 
    elif l2.IsEmpty then    (List.rev l1)@acc
    else                    listMerge l1.Tail l2.Tail (l1.Head :: l2.Head :: acc) 
```

我用两百万个元素列表对此进行了测试，并且没有堆栈溢出，所以我有理由相信这是尾递归。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:52:02.507

我认为您必须重用在[F# PowerPack](http://fsharppowerpack.codeplex.com/)中找到的原始 F# 代码。
实际上，您需要的是`List.fold2`，如果列表大小不同，该函数不应该抛出异常`SR.listsHadDifferentLengths`，而是处理较长列表的其余部分，如下所示：

```
let l1 = ["A1"; "A2"; "A3"; "A4"; "A5"; "A6"; "A7"]
let l2 = ["B1"; "B2"; "B3"; "B4"]

let expectedResult = ["A1"; "B1"; "A2"; "B2"; "A3"; "B3"; "A4"; "B4"; "A5"; "A6"; "A7"] 
```

我们是这样做的：

```
[<CompiledName("Fold2Tail")>]
let fold2Tail<'T1,'T2,'State> f g1 g2 (acc:'State) (list1:list<'T1>) (list2:list<'T2>) = 
    let f  = OptimizedClosures.FSharpFunc<_,_,_,_>.Adapt(f)
    let g1 = OptimizedClosures.FSharpFunc<_,_,_>.Adapt(g1)
    let g2 = OptimizedClosures.FSharpFunc<_,_,_>.Adapt(g2)
    let rec loop acc list1 list2 =
        match list1, list2 with 
        | [], [] -> acc
        | _,  []  -> g1.Invoke(acc, list1)
        | [], _   -> g2.Invoke(acc, list2)
        | (h1::t1),(h2::t2) -> loop (f.Invoke(acc,h1,h2)) t1 t2
    loop acc list1 list2 
```

`g1`and是and`g2`类型的谓词，相应地。他们告诉如何处理两个列表的其余部分。请注意，其中有两个，因为在一般情况下和是不同的类型。是的，这有点开销，但您可以轻松地将其减少到您的需要，牺牲通用性。`'State -> 'T1 list -> 'State``'State -> 'T2 list -> 'State``'T1``'T2`

用法：

```
let ret =
    fold2Tail
        (fun s x y  -> [ yield! s; yield x; yield y ] ) // f
        List.append // g1
        List.append // g2
        []          // 'State
        l1 l2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T13:18:20.487

您应该使用模式匹配：

```
let rec merge xs ys =
  match xs, ys with
  | [], xs | xs, [] -> xs
  | x::xs, y::ys -> x::y::merge xs ys 
```

要获得尾调用，您可以使用累加器：

```
let merge xs ys =
  let rec loop xys xs ys =
    match xs, ys with
    | [], xs | xs, [] -> List.fold (fun xs x -> x::xs) xs xys
    | x::xs, y::ys -> loop (y::x::xys) xs ys
  loop [] xs ys 
```

或延续传球风格：

```
let merge xs ys =
  let rec loop xs ys k =
    match xs, ys with
    | [], xs | xs, [] -> k xs
    | x::xs, y::ys -> loop xs ys (fun xys -> k(x::y::xys))
  loop xs ys id 
```

# asp.net - 通过使用计时器刷新gridview，模态弹出窗口自动关闭

> ID：13153960
> 
> 赞同：0
> 
> 时间：2012-10-31T08:34:25.340
> 
> 标签：asp.net

我正在为网格视图列使用模式弹出，其中网格视图设置为计时器。

```
<asp:UpdatePanel ID="GridPanel" runat="server">
            <ContentTemplate>
             <asp:Timer ID="autorefresh" runat="server" Interval="5000" />
            <asp:GridView ID="SigmaGrid" runat="server" AutoGenerateColumns="False" 
            onrowcommand="SigmaGrid_RowCommand" CssClass="mGrid" PagerStyle-CssClass="pgr" 
                    AlternatingRowStyle-CssClass="alt" AllowPaging="True" 
                    onpageindexchanging="SigmaGrid_PageIndexChanging">
           <AlternatingRowStyle CssClass="alt" />
            <PagerStyle />
            <Columns>
                <asp:TemplateField HeaderText="FirstName" SortExpression="FirstName">                    
                    <ItemTemplate>
                        <asp:LinkButton ID="FirstName" runat="server" Text='<% # Eval("FirstName") %>' CommandName="Select"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
                <PagerStyle CssClass="pgr" />
        </asp:GridView>

<asp:Panel ID="DtlsPanel" runat="server" BackColor="White" Height="400" Width="500px" >
     <table style="border: Solid 3px #626262; width: 100%; height: 100%"
                            cellpadding="0" cellspacing="0">
                     <tr style="background-color: #626262">
                                <td colspan="2" style="height: 10%; color: White; font-weight: bold; font-size: larger"
                                    align="center">                                  
                                Records                                  
                                </td>
                     </tr>                        
                     <tr>
                                <td style="color: Black">
                                    First Name:
                                </td>
                                <td align="center" style="color: Black">        
                                <asp:Label ID="FNamelbl2" runat="server"></asp:Label>
                                </td>
                     </tr>
     </table>
     </asp:Panel>
       <asp:Button ID="btnPopUp" runat="server" Style="display: none" />

     <asp:ModalPopupExtender ID="DetailsPopUp1" runat="server" BackgroundCssClass="modalBackground"
                     TargetControlID="btnPopUp" PopupControlID="DtlsPanel" CancelControlID="btnCancel"
                     PopupDragHandleControlID="PopupHeader">
</asp:ModalPopupExtender>
    </ContentTemplate>   

 </asp:UpdatePanel> 
```

**代码**

```
protected void SigmaGrid_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Select")
        {
            LinkButton FirstName = (LinkButton)e.CommandSource;
            GridViewRow row = (GridViewRow)FirstName.NamingContainer;

            FNamelbl2.Text = FirstName.Text;

            this.DetailsPopUp1.Show();
        }
    } 
```

**问题**

当我单击名字列时，我会弹出一个显示行详细信息的弹出窗口。由于我使用了计时器，gridview 已刷新并且弹出窗口会自动关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:39:00.860

如果您使用的是`ModalPopupExtender`回发，则应确保在代码隐藏中显示弹出窗口。因此，您可以使用它的方法`Show`。

例如在页面或 UserControl 中`PreRender`：

C＃

```
protected void Page_PreRender(object sender, System.EventArgs e)
{
    if (this.Visible) {
        this.DetailsPopUp1.Show();
    }
} 
```

VB.NET

```
Private Sub Page_PreRender(sender As Object, e As System.EventArgs) Handles Me.PreRender
    If Me.Visible Then
        Me.DetailsPopUp1.Show()
    End If
End Sub 
```

# ios5 - 如何在 ios 设备上通过解析创建徽章编号？

> ID：13153961
> 
> 赞同：2
> 
> 时间：2012-10-31T08:34:25.997
> 
> 标签：ios5, ios6, xcode4.5, badge, parse-platform

我正在尝试在我的应用程序上创建推送通知，并在应用程序 didReceiceRemoteNotification 函数上使用此脚本粘贴：

```
NSDictionary *data = [NSDictionary dictionaryWithObjectsAndKeys:
    messageContent, @"alert",
    @"Increment", @"badge",
    nil];
PFPush *push = [[PFPush alloc] init];
[push setChannel:chatRoomName];
[push setData:data];
[push sendPushInBackground]; 
```

但是，我只能显示推送消息，我的应用程序右上角没有显示徽章编号.. 是什么导致了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:05:12.200

要设置徽章编号，您需要参考以下网址。这将提供您所需的答案。

[在 iPhone SDK 中更改徽章和推送通知](https://stackoverflow.com/questions/3956585/change-badge-and-push-notification-in-iphone-sdk)

# java - Java将集合放入地图

> ID：13153963
> 
> 赞同：5
> 
> 时间：2012-10-31T08:34:33.110
> 
> 标签：java, map, set

将集合放入地图的最快方法是什么？

```
public class mySet<T> 
{
    private Map<T, Integer> map;

    public mySet(Set<T> set) 
    {
        Object[] array = set.toArray();

        for(int i =0; i< array.length; i++)
        {
            T v = (T)array[i];
            map.put(v, 1);
        }
    }
} 
```

现在，我只是将 set 转换为数组并循环遍历数组并将它们一一放入。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T08:35:57.797

一种选择是：

```
for (T value : set) {
  map.put(value, 1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:40:43.597

最快的方法是*根本不*将其放入新的 Map 中，而是创建您自己的 Map 接口的动态实现，该接口动态地将请求委托给集合实例。当然，这仅在您需要地图的实时视图或集合不可变时才有效。此外，根据您在 Map 上所需的 API，这可能会成为很多工作，但是 AbstractMap 将在这里为您提供很多帮助。

# perl - 如何确保在 perl 脚本中每 7 天更改一次用户的密码

> ID：13153976
> 
> 赞同：1
> 
> 时间：2012-10-31T08:35:55.543
> 
> 标签：perl

我是 perl 的新手，我想做的是确保每个用户至少 7 天不断修改他的密码。如果他没有，系统将促使他更改密码或将他注销。但在我的例子中，包含所有用户 ID 和密码的文件都在一个文件中`userid_passwd.txt`。因此，如果单个用户修改或更改了他的密码，则文件戳`userid_passwd.txt`将被更改。因此，即使一个用户遵循每周修改一次密码的规范并休息一下，他们也将能够登录。

```
open WORDSLIST, $filename
    or die "can't open wordlist: $!";

if (-M WORDSLIST < 7.0) {  

    while ($name = <WORDSLIST>) {
        \\Do Something
    }
}
close WORDSLIST
    or die "couldn't close wordlist: $!"; 
```

但是代码部分`if (-M WORDSLIST < 7.0) {` 不是我想要的，因为我的文件包含每个用户的用户 ID 和密码，顺序是后者分配给一个哈希变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:50:53.097

当用户上次更改密码时，您必须在*某个地方进行跟踪。*或者，保留 7 份密码文件的副本，从 1 到 7 天，并查看用户的密码是否与原来相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:38:20.257

我假设您的文件当前同时包含`username`和`password`，您还可以添加 a`last_changed`作为日期时间并基于此执行您的逻辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T10:46:05.003

如果你想构建一个更灵活和成熟的解决方案，你可以使用一个简单的[SQLite](http://sqlite.org)数据库和[ORLite](http://p3rl.org/ORLite)来存储密码（[加盐哈希！](http://perlgems.blogspot.de/2012/05/password-storage-with-salted-hashes.html)）和最后修改的时间戳，如下所示（不完整，只是为了让你开始）：

```
#!/usr/bin/env perl
use strict;
use warnings;
use feature 'say';
use FindBin '$Bin';
use Crypt::SaltedHash;
use ORLite {
    file    => "$Bin/login.db",
    create  => sub { shift->do('
        CREATE TABLE login (
            user            TEXT    NOT NULL PRIMARY KEY,
            salted_hash     TEXT    NOT NULL,
            last_modified   INTEGER NOT NULL
        )
    ')},
};

# ...

my $login = Login->load($name);
say 'password ok' if $crypter->validate($login->salted_hash, $password);
say 'password change ok' if time - $login->last_modified < 60 * 60 * 24 * 7; 
```

# php - .val() 上的错误 80020101

> ID：13153987
> 
> 赞同：0
> 
> 时间：2012-10-31T08:36:27.273
> 
> 标签：php, jquery

> **可能重复：**
> [由于错误 80020101 无法完成操作。IE](https://stackoverflow.com/questions/10903989/could-not-complete-the-operation-due-to-error-80020101-ie)

我的 jQuery 代码遇到了一点问题。

我的第一页有一些字段，例如：[代码 1] [代码 2] [代码 3]

用户在其中一个输入中键入一些内容，我得到的结果是我使用 .load 方法加载到另一个页面中的。这是代码：

```
$(function() {
    $("#code_cip").autocomplete({
            source: tab,
            minLength: 6,
            delay: 1000,
            select: function(event, ui) {
                        var selectedObj = ui.item;
                        $("#code_cip_ind").val(selectedObj.value);
                        $("#test").load("test.php?id="+selectedObj.value);
            }
        });
    }); 
```

这个，很好用。它正确加载具有良好值的“test.php”页面。但是...在 test.php 页面中，我有一个表格，我尝试像这样填写它：

测试.php：

```
<?php
    $gest_medecin = new gest_medecin($db);
    $medecin = $gest_medecin->returnValues();
    $adresse = $medecin->Adresse;
    echo $adresse // This, output the good value of the attribut
?>
<script>
    adresse = <?php echo $adresse;?>;
    alert(adresse);
    $("#adresse").val(adresse);
</script>
<input name="adresse" id="adresse" type="text" /> 
```

问题是：当我尝试提醒“地址”变量，或将其与我的 .val 方法一起使用时，我在 IE 中收到错误 80020101，而在 Firefox 中，什么也没有发生……

我试图用一些像这样的测试字符串填充变量：

```
adresse = <?php echo "123456" ?> 
```

这很好用......如前所述，我检查了`$medecin->Adresse`我的是否正确，`echo`它是正确的。它包含类似“word1 word2”的内容

我真的不知道为什么我的代码不起作用......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:38:52.157

始终查看最终结果以发现错误。

你缺少引号

```
 adresse = "<?php echo $adresse;?>"; 
```

字符串总是需要引号。

它可以使用，`123456`因为这是一个不需要引号的整数值。

Firefox 会在其错误控制台中通过更好的错误消息告诉您这一点。

# java - textinput 限制接受具有四位小数精度的数字

> ID：13153990
> 
> 赞同：0
> 
> 时间：2012-10-31T08:36:34.593
> 
> 标签：java, apache-flex, flex3

我有一个文本字段，我想在其中限制用户只输入 .(dot) 之前 14 位和 .(dot) 之后 4 位的有效数字。

我已经尝试过使用：

```
<mx:TextInput id="txtValue1" restrict="[0-9]*\.?[0-9]" maxChars="19"/> 
```

它不适用于 .(dot) 之后的 4 位限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:40:20.790

A more common way would be to use a NumberValidator, and set the precision attribute of the validator to 4\. Also, set the maxValue of the NumberValidator to whatever suits, then set the source of the NumberValidator to the textInput id. That should work I'd say, and it will also allow you to set the error fields of the validator which will pop up beside the textInput if incorrect number is entered

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:01:24.103

您可以从此[LINK](https://github.com/gastonf/GRepo/tree/master/NumberInput)在我的公共存储库中查看和下载代码（这有效！） 。基本上，我基于 Adob​​e 的 TextInput 类创建了一个类（NumberInput），两个类的区别在于 textFieldChanged 方法，我在此处添加了对 myFormat 函数（）的调用。此功能可以满足您的需求。小心这个类，不要将它用作最终解决方案，但无论如何我都会找到你需要的。查看名为 NumberInputTest.swf 的 SWF，源代码在 src\NumberInput.as 中。我希望这对你有帮助。对不起我的英语：D。

# winforms - 在visual-studio-2012 express中本地化winforms

> ID：13153992
> 
> 赞同：0
> 
> 时间：2012-10-31T08:36:40.180
> 
> 标签：winforms, localization, visual-studio-express

我有一个以前在 Visual Studio Express 2010 中开发的应用程序。它使用本地化的 winforms 和代码中使用的 resx 资源。

在同一台计算机上使用 Visual Studio Express 2012 打开和编译项目时，不会应用本地化字符串，只找到默认代码。

该应用程序运行良好，并且在 winforms 设计器中我可以更改语言以查看和编辑控件的本地化文本。我还尝试了以下代码来确定使用的语言是否在运行时存在，它确实报告了使用的语言。

```
 CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures);
        foreach (CultureInfo culture in cultures)
        {
            try
            {
                ResourceSet rs = resources.GetResourceSet(culture, true, false);
                // or ResourceSet rs = rm.GetResourceSet(new CultureInfo(culture.TwoLetterISOLanguageName), true, false);
                if (rs == null)
                    continue;
                string isSupported = (rs == null) ? " is not supported" : " is supported";
                Console.WriteLine(culture + isSupported);
            }
            catch (Exception)
            {
                Console.WriteLine(culture + " is not available on the machine or is an invalid culture identifier.");
            }
        } 
```

尽管如此，当应用程序运行时，我得到的只是默认语言的资源。

我使用以下方法检索资源：

```
 ResourceManager resources = new ResourceManager(form.GetType());
        form.Text = resources.GetString("$this.Text", lang); 
```

我已经验证 lang 是正确的，但也使用

```
 System.Threading.Thread.CurrentThread.CurrentUICulture = lang;
        System.Threading.Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(lang.Name); 
```

其次是 MyLangResxFile.MyStringResource 的使用。返回的字符串仍然只是默认的。

Visual Studio Express 2010 - 2012 之间的 resx 本地化支持是否存在更改或限制？

**更新：** 我注意到如果使用 3.5 中的 msbuild.exe 编译本地化工作，但使用 4.0 时......如上所述，本地化缺失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:54:21.503

很抱歉“回答”这个问题，但评论不起作用。我只想问你是否可以同时解决这个问题，因为我有完全相同的问题。

我什至注意到只有在选择目标框架 < 4.0 时才会出现此问题。对于目标框架 4.0 和 4.5，本地化在 VS 2010 中和以前一样工作......

# c++ - 为什么用括号包裹的标记不是右值表达式？

> ID：13153993
> 
> 赞同：11
> 
> 时间：2012-10-31T08:36:41.987
> 
> 标签：c++, parentheses, rvalue

考虑以下代码：

```
#include <iostream>

struct Foo
{
  Foo() : bar( 0 ) {}

  int bar;
};

int main()
{
  Foo foo;

  ++(foo.bar);

  std::cout<< foo.bar << std::endl;

  system("pause");
  return 0;
}; 
```

为什么`foo.bar`评估为 1？

中的括号不会`(foo.bar)`创建一个未命名的（r 值）表达式，然后递增？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T08:42:46.370

因为标准在 3.4.2 第 6 段中明确指出：

> 带括号的表达式是主要表达式，其类型和值与括起来的表达式相同。**括号的存在不会影响表达式是否为左值。**

强调我的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:43:13.590

不，括号除了改变运算顺序之外没有任何意义。

要创建右值，您需要使用特殊功能`std::move(x)`。

# groovy - groovy 中的 terminate() 和 stop() 有什么区别

> ID：13153994
> 
> 赞同：0
> 
> 时间：2012-10-31T08:36:42.483
> 
> 标签：groovy

在以下网址中

[http://www.gpars.org/guide/](http://www.gpars.org/guide/)

它有时使用terminate()，有时使用stop()。他们是一样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:51:05.403

这是文档[`stop`](http://gpars.org/0.12/javadoc/groovyx/gpars/actor/impl/SequentialProcessingActor.html#stop%28%29)

> 向actor发送消息以停止。队列中的所有消息将在停止之前处理，但在此之后不会接受新消息

和[`terminate`](http://gpars.org/0.12/javadoc/groovyx/gpars/actor/impl/SequentialProcessingActor.html#terminate%28%29)

> 终止 Actor。后台线程将被中断，未处理的消息将传递给 afterStop 方法（如果存在）。如果 Actor 未启动，则无效。

看到不同？这完全是关于它如何处理关闭以及它如何处理未处理的消息。

# java - Java 字节码优化

> ID：13153995
> 
> 赞同：-1
> 
> 时间：2012-10-31T08:36:47.140
> 
> 标签：java, bytecode

下面是Java字节码，

```
0: iconst_1
1: istore_1
2: iload_1
3: ... 
```

我可以优化它

```
0: iconst_1
1: ... 
```

但是，我想知道这是否总是安全的，或者我们什么时候可以确保这种优化是安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:26:16.300

如果方法代码中的某处存在另一条指令，则此优化是*不安全的。*`iload_1`

更重要的是，这种手动优化毫无意义。JIT 编译器本身很容易清除过多的数据分配，因此原始代码和“优化”代码在编译后会产生相同的机器代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:39:05.093

JIT 查找编译器生成的集合模式并对其进行优化。如果您手动生成或更改代码，您必须确保您生成的代码对您来说看起来更简单，但无法通过 JIT 轻松优化，即导致执行速度变慢。

正如@Alexei 所说，它不安全，我怀疑它不会更快但可能会更慢。