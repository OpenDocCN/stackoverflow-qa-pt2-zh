# StackOverflow 问答 15646000-15646999

# c - 使用递归函数编程数学

> ID：15646000
> 
> 赞同：0
> 
> 时间：2013-03-26T19:42:05.897
> 
> 标签：c, math, recursion

我想编程数学函数`f(x)=sqrt(1^1+sqrt(2^2+sqrt(3^3)+...+sqrt(x^x)))`，x 应该在哪里`1 <= x <= 10`。我试图像这样对函数进行编程：

```
double f1Rek(int x)
{ 
   if( x < 1 ) return sqrt(power(x,x));
   return sqrt(power(x,x) + f1Rek(x-1));
} 
```

函数 power 也是一个自创的递归函数：

```
double power(int x, int n)
{
   if( n == 0 ) return 1.0;
   if( x == 0 ) return 0.0;
   if( exp > 0 )
   {
       return n * power(n, exp - 1);
   }
   if( exp < 0 )
   {
       return 1 / ( n * power(n, -(exp-1));
   }
} 
```

问题在于`f1Rek(int x)`函数，因为它以`sqrt(x^x + sqrt( x-1^x-1...`. 如何以非常优雅的方式解决问题？

更新：

在 Jim Balter 的回答下，我创建了一个带有 2 个参数的函数：

```
double f2Rek(int i, int x)
{
   if( i <= x )
   {
      return sqrt(power(i,i) + f2Rek(i+1, x));
   }
   else return 0.0;
} 
```

是否有可能定义一个只有一个参数的递归函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:49:51.380

> f(x)=sqrt(1^1+sqrt(2^2+ **(** sqrt(3^3)+...+ **(** sqrt(x^x))) **)...**

（假设粗体字）

等效地，

> f(x) = g(1, x)

在哪里

> g(i, n) = sqrt(i^i + g(i+1, n)) 如果 i <= n，否则为 0

您应该能够从中优雅地编写递归函数。

关于具有一个参数的函数：

f*是*一个有一个参数的函数。它调用一个带有两个参数的递归辅助函数。很明显，递归内部函数需要两个参数，其中一个是终止值 x。在具有本地函数的语言中，可以将参数从函数中提升出来，例如，

```
double f(int x)
{
   double g(int i)
   {
       return (i <= x)? sqrt(pow(i, i) + g(i+1)) : 0.0;
   }

   return g(1);
} 
```

GCC 支持本地函数，但它们不在标准 C 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:55:48.443

```
double f1Rek(int x)
{  
   double res = 0.0;
   for(int i=x; i > 0; i--) {
     res = sqrt(power(i,i) + res));
   }
   return res;
} 
```

# java - 是否有处理常用语言中单数/复数单词的单行代码？

> ID：15646004
> 
> 赞同：2
> 
> 时间：2013-03-26T19:42:21.140
> 
> 标签：java, python, localization, plural, singular

我经常看到网站做 1 次浏览、1 天还剩 1 次或 1 次回答之类的事情。对我来说，这只是懒惰，因为它通常很容易修复，例如：

```
if(views == 1)
   print views + " view"
else print views + " views" 
```

我想知道的是，是否有一个通用语言（如 java、python、php 等）的衬里，我可以在执行此操作的网站上发表评论并说，就像将其添加到您的代码中一样简单。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:49:21.367

在我的网站上处理此问题时，我使用[三元运算符。](http://en.wikipedia.org/wiki/Ternary_operator)看起来许多基于 c 的编程语言都支持三元运算符。在 php 中就这么简单：

```
<?= $views . ' view' . ($views == 1 ? '' : 's'); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T01:21:16.143

如果您使用的是 django (python)，则可以使用[复数](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#pluralize)过滤器：

```
You have {{ num_messages }} message{{ num_messages|pluralize }}. 
```

它也支持特殊情况。看看[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#pluralize)。

如果你想在普通的 python 代码中做类似的事情，看看[inflect](https://pypi.python.org/pypi/inflect)模块。看起来它可以很强大，而且显然猜对了大多数复数：

```
import inflect
p = inflect.engine()
print("You have {}.".format(p.no('message',num_messages))) 
```

哪个会输出字符串

```
You have no messages.
You have 1 message.
You have 34 messages. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:53:56.943

您可以使用条件或三元运算符来处理问题，但看起来不同，我们经常以以下方式显示复数/单数词

```
1 view(s), 1 day(s) left, or 1 answer(s) 
```

当添加条件可能不简单时，这通常很有用，例如作为输入字段？

对于 Python，您可以创建一个函数来执行重复的比较任务并为您添加一个额外的 's'

```
>>> def pluralize(n, text):
    return "{} {}{}".format(n,text, 's' if n > 1 else '')

>>> pluralize(3,'word')
'3 words'
>>> pluralize(1,'word')
'1 word' 
```

# java - 使用 Apache Zoo Keeper 读取 zoo.cfg 的 Java 类

> ID：15646009
> 
> 赞同：0
> 
> 时间：2013-03-26T19:42:45.890
> 
> 标签：java, apache, io, apache-zookeeper

我一直在使用 apache zookeeper，并被要求阅读包含以下属性的 zoo.cfg：

```
tickTime=2000
dataDir=/var/lib/zookeeper
clientPort=2181

server.1=192.168.100.125:2888:3888
server.2=192.168.3.41:2888:3888 
```

我一直在寻找一个框架类（org.apache.zookeeper ...），但我没有找到任何东西，我搜索了一些信息，但我发现了一些与 jar 中不包含的 Hadoop 类相关的东西我正在使用，并且不允许添加其他库。在我得到的代码中，我看到：

```
 System.setProperty("java.security.auth.login.config","conf/zoo.conf"); 
```

我打算从系统属性中读取它，但我不知道这是否是一个好习惯。你会推荐什么？或者有什么建议吗？

在此先感谢您的帮助。此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:07:14.287

您可以使用[java.util.Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)并将**zoo.cfg**文件加载到其中。不同的值将表示为字符串。[Java 配置 API](http://commons.apache.org/proper/commons-configuration/)会更复杂，但需要包含 2 或 3 个额外的库。

问候， 克里斯蒂安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:15:56.527

碰巧我在这个链接中找到了一个类[https://hbase.apache.org/0.94/xref/org/apache/hadoop/hbase/zookeeper/ZKConfig.html](https://hbase.apache.org/0.94/xref/org/apache/hadoop/hbase/zookeeper/ZKConfig.html)

但它不包含在基本的 zookeeper 库中，因为它来自 hadoop（以前的版本）。尽管如此，我还是设法模拟了我发现的这个类的行为，但它给了我一些错误。所以我发现更容易实现我自己的辅助类并读取我准备的使用服务器 (ip) 和端口的数据的自定义文件。

感谢您的评论和回答。此致。

# verilog - 在 Verilog 中避免代码重复

> ID：15646016
> 
> 赞同：0
> 
> 时间：2013-03-26T19:43:32.957
> 
> 标签：verilog

我发现这在 Verilog 代码中经常发生：

```
wire my_module_output_1;
wire my_module_output_2;
wire my_module_output_3;
...

MyModule my_module(
    .output_1(my_module_output_1),
    .output_2(my_module_output_2),
    .output_3(my_module_output_3),
    ...
);

MyOtherModule my_other_module(
    .input_1(my_module_output_1),
    .input_2(my_module_output_2),
    .input_3(my_module_output_3),
    ...
); 
```

我**希望**我能做的是：

```
MyModule my_module();
MyOtherModule my_other_module(
    .input_1(my_module.output_1),
    .input_2(my_module.output_2),
    .input_3(my_module.output_3),
    ...
); 
```

有没有这样的方法可以让我达到同样的效果，即避免每次我需要从某个地方连接的某个模块的输出时一遍又一遍地重复自己？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T04:13:11.510

您可以使用以下几种方法来减少重复次数。

## 起点

这是一个连接两个子模块的简单示例。正如您在问题中指出的那样，将它们缝合在一起需要大量重复。

```
module source(output A, output B);
  assign A = 0;
  assign B = 1;
endmodule

module sink(input A, input B);
  initial begin
    #1 $display("A=%0d B=%0d", A, B);
  end
endmodule

module top();

  wire A;
  wire B;

  source the_source(
    .A(A),
    .B(B)
  );

  sink the_sink(
    .A(A),
    .B(B)
  );

endmodule 
```

* * *

## 使用隐式连线

Verilog 允许隐式声明连线。因此，如下所示，您不需要将`A`and声明`B`为连线。如果它们出现在端口映射中，它们将被隐式声明。唯一的问题是它们总是被声明为单比特线/网。因此，虽然这对单比特信号很有效，但对于总线，仍然需要明确声明互连。

```
// Verilog, implicit wires
module top();

source the_source(
  .A(A),
  .B(B)
);

sink the_sink(
  .A(A),
  .B(B)
);

endmodule 
```

* * *

## 使用 Verilog 模式 AUTO

[Verilog-Mode emacs 包](http://www.veripool.org/wiki/verilog-mode)可以极大地帮助减少将模块拼接在一起所需的输入量。这是上面使用 AUTO 的示例。

在扩展 AUTO 之前：

```
// Verilog, explicit connections using AUTOs
module top();

  /*AUTOWIRE*/

  source the_source (/*AUTOINST*/);

  sink the_sink (/*AUTOINST*/);

endmodule 
```

展开 AUTO 后：

```
// Verilog, explicit using AUTOs
module top();

  /*AUTOWIRE*/
  // Beginning of automatic wires (for undeclared instantiated-module outputs)
  wire                A;                      // From the_source of source.v
  wire                B;                      // From the_source of source.v
  // End of automatics

  source the_source (/*AUTOINST*/
                     // Outputs
                     .A               (A),
                     .B               (B));

  sink the_sink (/*AUTOINST*/
                 // Inputs
                 .A                   (A),
                 .B                   (B));

endmodule 
```

正如布赖恩在他的回答中指出的那样，您不需要使用 emacs 来使用 Verilog-Mode。我也使用 Vim 并使用[这个 Vim 脚本](http://www.vim.org/scripts/script.php?script_id=1875)在 Vim 中启用 Verilog-Mode。

* * *

## SystemVerilog 选项

如果可以使用 SystemVerilog，则可以使用点星符号按名称连接端口。这非常方便，但您仍然必须声明对等模块之间的互连线。

```
// SystemVerilog, dot-star notation
module top();

  wire A;
  wire B;

  source the_source(.*);
  sink the_sink(.*);

endmodule 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T01:08:37.340

人们仍然没有到处使用 Verilog AUTOs 吗？

[http://www.veripool.org/wiki/verilog-mode/Verilog-mode-Help](http://www.veripool.org/wiki/verilog-mode/Verilog-mode-Help)

特别要注意关于 AUTOINST 的部分。这并不能解决你所有的问题，但是明智地使用 AUTO 可以减少生成结构 Verilog 的大量乏味。

不要介意它是一个 Emacs 节点。我自己是一个 vim 人，但是当我需要更新我的 AUTOs 时，我只是通过 emacs 管道加载我的缓冲区并加载此模式。

# android - 仍然无法通过连接到数据库来运行我的登录应用程序。我应用了异步任务

> ID：15646025
> 
> 赞同：0
> 
> 时间：2013-03-26T19:44:03.220
> 
> 标签：android

仍然无法通过连接到数据库来运行我的登录应用程序。我应用了 asynctask，但仍然没有运气。请检查一下。提前致谢。首先，当我单击运行按钮时，我会收到此错误。你能帮我检查一下代码并告诉我什么是错的吗？提前致谢。

```
 public class MainActivity extends Activity implements OnClickListener {

                EditText etUser, etPass;
                Button bLogin;

                //Create string variables that will have the input assigned to them
                String username, password;

                //Create a HTTPClient as the form container
                HttpClient httpclient;

                //Use HTTP POST method
                HttpPost httppost;

                //Create an array list for the input data to be sent
                ArrayList<NameValuePair> nameValuePairs;

                //Create a HTTP Response and HTTP Entity
                HttpResponse response;
                HttpEntity entity;

                @Override
                public void onCreate(Bundle savedInstanceState) {

                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_main);

                    initialise();

                }

                private void initialise() {
                    etUser = (EditText) findViewById(R.id.etUser);
                    etPass = (EditText) findViewById(R.id.etPass);
                    bLogin = (Button) findViewById(R.id.etSubmit);
                    //Now to set an onClickListener
                    bLogin.setOnClickListener((android.view.View.OnClickListener) this);
                }

                public void onClick(View v)  {
                    // This is where we will be working now

                    new MyAsyncTask().execute();

                }//END onClick()

                private static String convertStreamToString(InputStream is) {
                    /*
                     * To convert the InputStream to String we use the BufferedReader.readLine()
                     * method. We iterate until the BufferedReader return null which means
                     * there's no more data to read. Each line will appended to a StringBuilder
                     * and returned as String.
                     */
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                    StringBuilder sb = new StringBuilder();

                    String line = null;
                    try {
                        while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                        }
                    } catch (IOException e) {
                        e.printStackTrace();
                    } finally {
                        try {
                            is.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                    return sb.toString();
                }//END convertStreamToString()

                private class MyAsyncTask extends AsyncTask<Void, Void, Void>
            {
                    ProgressDialog mProgressDialog;
                    @Override
                    protected void onPostExecute(Void result) {
                        mProgressDialog.dismiss();
                    }

                    @Override
                    protected void onPreExecute() {
                        mProgressDialog = ProgressDialog.show(MainActivity.this, "Loading...", "Data is Loading...");
                    }

                    @Override
                    protected Void doInBackground(Void... params) {

                        //Create new default HTTPClient
                        httpclient = new DefaultHttpClient();

                        //Create new HTTP POST with URL to php file as parameter
                        httppost = new HttpPost("http://10.0.2.2/myteamapp/index.php"); 

                        //Assign input text to strings
                        username = etUser.getText().toString();
                        password = etPass.getText().toString();

                        //Next block of code needs to be surrounded by try/catch block for it to work
                        try {
                            //Create new Array List
                            nameValuePairs = new ArrayList<NameValuePair>(2);

                            //place them in an array list
                            nameValuePairs.add(new BasicNameValuePair("user", "username"));
                            nameValuePairs.add(new BasicNameValuePair("pass", "password"));

                            //Add array list to http post
                            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                            //assign executed form container to response
                            response = httpclient.execute(httppost); //response from the PHP file

                            //check status code, need to check status code 200
                            if(response.getStatusLine().getStatusCode() == 200){

                                //assign response entity to http entity
                                entity = response.getEntity();

                                //check if entity is not null
                                if(entity != null){

                                    //Create new input stream with received data assigned
                                    InputStream instream = entity.getContent();

                                    //Create new JSON Object. assign converted data as parameter.
                                    JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                                    //assign json responses to local strings
                                    String retUser = jsonResponse.getString("user");//mySQL table field
                                    String retPass = jsonResponse.getString("pass");

                                    //Validate login
                                    if(username.equals(retUser)&& password.equals(retPass)){ //Check whether 'retUser' and 'retPass' matches username/password 

                                        //Display a Toast saying login was a success
                                        Toast.makeText(getBaseContext(), "Successful", Toast.LENGTH_SHORT).show();

                                    } else {
                                        //Display a Toast saying it failed.

                                        Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();
                                    }

                                }

                            }

                        } catch(Exception e){

                           // e.printStackTrace();
                            //Display toast when there is a connection error
                            //Change message to something more friendly
                           Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();
                           Toast.makeText(getBaseContext(), "Connection Error", Toast.LENGTH_SHORT).show();

                           return null;
                        }

                        return null;
                    }
                }

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:02:30.547

您正试图在 doInBackGround 中执行 UI 操作，正如@codeMagic 指出的那样，他说的是对的，但他指出了一些不同的东西。

问题是您`Toast`在 doInBackground 中显示消息。

IE

```
 Toast.makeText(getBaseContext(), "Successful", Toast.LENGTH_SHORT).show();
 Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show(); 
```

并在 Catch

```
 Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();
 Toast.makeText(getBaseContext(), "Connection Error", Toast.LENGTH_SHORT).show(); 
```

由于 doInBackground 在非 UI 线程上工作，您不能在其中执行 UI 操作..

因此，当您尝试获取基本上下文时，它将为您返回 null 并导致 NullPointerException。

要在 doInBackground 中删除这些`Toast`消息并在 onPostExcecute 上显示它们，因为 onPostExecute 在 UI 线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:06:54.083

正如@Pragnani 所说，Toast 可以在`onPostExecute()`方法中使用。但是，如果您希望它本身在那里使用，您可能会使用它`runOnUiThread`来显示 Toast 消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:48:55.733

当您单击时，您没有引用任何按钮。

```
 public void onClick(View v) {
    switch (v.getId()) {
    case R.id.bLogin:
        new MyAsyncTask().execute();
        break;
    default:
        break;
    }} 
```

# javascript - iphone布局中的文本框被截断

> ID：15646026
> 
> 赞同：0
> 
> 时间：2013-03-26T19:44:04.727
> 
> 标签：javascript, html, css

当您将浏览器窗口缩小为 iphone 布局时....您可以看到不同的布局....问题是文本字段的右侧被截断...如何修复它...提供我的下面的代码......

[http://jsfiddle.net/jPvzL/1/](http://jsfiddle.net/jPvzL/1/)

```
<input type="text" placeholder="Company Name " name="fullname" maxlength="30" required="required" id="id_username">
<input type="text" placeholder="Contact Name" name="company" maxlength="30" required="required" id="id_company">
<input type="text" placeholder="Address1" name="email" maxlength="75" required="required" id="id_email">
<input type="password" placeholder="Address2" name="password" maxlength="16" required="required" id="id_password">
<input type="password" placeholder="Address3" name="repassword" required="required" id="id_repassword">
<input type="text" placeholder="City " name="fullname" maxlength="30" required="required" id="id_username">
<div class="controls">
    <select name="select" id="state" style="width: 300px;height: 38px;">
        <option value="California" selected="">California</option>
        <option value="New York">New York</option>
        <option value="Texas">Texas</option>
    </select>
</div>
<input type="text" placeholder="Zip" name="email" maxlength="75" required="required" id="id_email">
<div class="controls">
    <select name="select" id="country" style="width: 300px;height: 38px;">
        <option value="USA" selected="">USA</option>
        <option value="India">India</option>
        <option value="Korea">Korea</option>
        <option value="Vietnam">Vietnam</option>
    </select>
</div>
<input type="text" placeholder="Phone" name="company" maxlength="30" required="required" id="id_company">
<input type="text" placeholder="Fax" name="email" maxlength="75" required="required" id="id_email">
<input type="password" placeholder="Email" name="password" maxlength="16" required="required" id="id_password">
<input type="text" placeholder="URL" name="company" maxlength="30" required="required" id="id_company">
<input type="text" placeholder="GL Account" name="email" maxlength="75" required="required" id="id_email">
<input type="password" placeholder="" name="password" maxlength="16" required="required" id="id_password">
<textarea name="inquiry" placeholder="Notes" rows="3" required="required" id="id_inquiryForm" style="width:290px;"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:58:16.330

几周前有这个问题。我不知道您的 CSS 是什么样的，但请尝试在您的输入字段中添加百分比宽度：

```
form input{width: 99%;} 
```

YMMV。您可能还需要为您的 textarea 添加一些内容并选择字段并根据需要调整百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:53:08.600

看起来您的#signup-modal div 设置为 125px 的宽度。只需将其增加到适合输入的正确尺寸即可。或删除“溢出：隐藏”

# android - 从 onActivityResult 调用新的 StartActivityForResult

> ID：15646029
> 
> 赞同：0
> 
> 时间：2013-03-26T19:44:08.133
> 
> 标签：android, android-activity

我试图从“onActivityResult”函数中调用一个新的 Intent，但结果不是我所希望的。它要么无限循环，要么提前退出。

在“主要”活动中，我创建了一个包数组，然后为每个包创建一个意图，等待当前活动返回“完成”，然后使用下一个包开始一个新活动。

问题是“主要”活动在每次调用 onActivityResult 后重新启动，这意味着它的 onStart 再次被调用，并且我的所有包都在无限循环中重新创建。避免这种情况的唯一方法似乎是添加“finish();” 到 onActivityResult 函数的末尾，但这会在仅调用一次 onActivityResult 后停止整个过程。

下面是代码（删节）：

```
public class mainActivity extends Activity {

   ArrayList<Bundle> bundles;
   int taskId = 0;
   // A few other things here; nothing important to this question.

    public void onCreate(savedInstanceState)) {
        super.onCreate(savedInstanceState);
        bundles = new ArrayList<Bundle>();
    }

    public void onStart() {
        // Here I perform a loop that creates a number of bundles
        // and adds them to the "bundles" array (not shown).

        // Start the first activity:
        Intent firstIntent = new Intent(this, StuffDoer.class);
        firstIntent.putExtras(bundles.get(0));
        startActivityForResult(firstIntent, taskId);
        bundles.remove(0);
    }

    public void onActivityResult(int requestCode, int result, Intent data) {
        super.onActivityResult(requestCode, result, data);
        if (result == RESULT_OK) {
            if (bundles.size() > 0) {
                taskId += 1;
                Intent intent = new Intent(this, StuffDoer.class);
                intent.putExtras(bundles.get(0));
                startActivityForResult(intent, taskId);
                bundles.remove(0);
            } else {
                Log.v(TAG, "No more to do, finishing");
                finish();
            }
        } else {
            Log.v(TAG, "Did not get the expected return code");
        }
        // finish(); // If I uncomment this, it only performs this function 
                     // once before quitting. Commented out, it loops forever 
                     // (runs the onStart, adds more bundles, etc.).
    }
} 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:14:30.143

我不清楚您要做什么，但是如果您只需要在活动首次启动时创建您的 Bundle，请在 onCreate() 中进行。通常，您为活动实现的回调是 onCreate、onPause 和 onResume。在活动的正常生活中，它处于 onResume 和 onPause 之间的生命周期循环中。

不过，我很好奇。为什么每次都需要回到主活动？听起来好像您的主要活动“控制”了其他活动。通常，Android 应用程序的更好模型是让每个活动独立工作，并在必要时切换到另一个活动。这本质上是一个没有“主要”的“程序”，除了当用户单击启动器中的应用程序图标时启动的“平等中的第一个”活动。

# sas - 获取输入格式

> ID：15646032
> 
> 赞同：0
> 
> 时间：2013-03-26T19:44:29.633
> 
> 标签：sas

所以，我只是买了sas的介绍书。但它只包含大量几乎/没有解释的示例。我试图在网上找到一些教程，但我找不到这种格式的解释。我只是想知道这两者之间有什么不同：

```
INPUT Name $16\. Age 3\. +1 height 5.1 
```

我想知道，什么是“。” 意思是。有什么不同：

```
INPUT Name $16 
```

和

```
INPUT Name $ 1-16 
```

符号“+1”是什么意思？

“5.1”是什么意思？这和“5.”有什么不同？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:43:52.663

格式总是包含句点；句点可以用于将宽度与小数分开，即 5.1 是 5 个总宽度，1 个小数 - 所以`xxx.d`（实际上`-xx.d`，，但它也会`xxx.d`正确显示）。对于字符值和其他不能有小数部分的值，句点后面永远不会有数字，但它仍然存在；DATE 格式的变量也是如此`DATE9.`（具体来说，看起来像“19JAN2013”​​），长度为 9 个字符（与`DATE7.`, 或 19JAN13 相反）。

一般来说，SAS 有许多不同的输入选项。找一本更好的书，或阅读在线文档（[http://support.sas.com/documentation/92/index.html](http://support.sas.com/documentation/92/index.html)或您的 SAS 版本的类似文档）。 `input Name $16.`输入名称作为 16 位字符变量。您有很多输入选项的变体，因此请查看文档以了解更多信息。

+1 专门告诉 SAS 将指针向前移动一位 - 因此，它跳过了 Age 和 Height 之间的空格，而不是 Name 的 16 个字符，Age 的 3 位，Height 的 5 位；所以`NAMENAMENAMENAMEage heigh`不是`NAMENAMENAMENAMEageheigh`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:48:41.350

你可以从这里开始： [输入语句](http://support.sas.com/documentation/cdl/en/lestmtsref/63323/HTML/default/viewer.htm#n0oaql83drile0n141pdacojq97s.htm)

# c++ - 无法使用 Q_OBJECT 构建 Qt 示例（我可以避免使用 Qmake 吗？）

> ID：15646034
> 
> 赞同：2
> 
> 时间：2013-03-26T19:44:35.240
> 
> 标签：c++, qt, visual-studio-2010

正如在[使用 Qt 编译测试程序时出现的错误中](https://stackoverflow.com/questions/2320426/errors-while-compiling-a-test-program-using-qt)一样，我也在关注 Jasmin Blanchette 和 Mark Summerfield 所著的“C++ GUI Programming with Qt 4”一书。我没有那个错误，无论如何我无法构建它。在我开始编写构造函数之前，它一直能够构建。我通过 Qt 插件使用 Qt 4.8 和 MSVC 2010。

**[编辑]** 我可以避免在 Qt Visual Studio 插件中使用 Qmake 吗？ **[/编辑]**

我的代码：

查找对话框.h

```
#ifndef FindDialog_H
#define FindDialog_H
#include <qdialog.h>

class QCheckBox;
class QLabel;
class QLineEdit;
class QPushButton;

class FindDialog : public QDialog
{
    Q_OBJECT

public:
    FindDialog(QWidget *parent=0);

signals:
    void findNext(const QString &str, Qt::CaseSensitivity cs);
    void findPrev(const QString &str, Qt::CaseSensitivity cs);

private slots:
    void findClicked();
    void enableFindButton(const QString &text);

private:
    QLabel *label;
    QLineEdit *lineEdit;
    QCheckBox *caseCheckBox;
    QCheckBox *backwardCheckBox;
    QPushButton *findButton;
    QPushButton *closeButton;
};

#endif 
```

查找对话框.cpp

```
#include <QtGui>
#include <finddialog.h>

FindDialog::FindDialog(QWidget *parent) : QDialog(parent)
{
    label = new QLabel(tr("Find &what: "));
    lineEdit = new QLineEdit;
    label->setBuddy(lineEdit);
    caseCheckBox = new QCheckBox(tr("Match &case"));
    backwardCheckBox = new QCheckBox(tr("Serch backward"));
    findButton = new QPushButton(tr("&Find"));
    findButton->setDefault(true);
    findButton->setEnabled(false);
    closeButton = new QPushButton(tr("CLose"));

    connect(lineEdit, SIGNAL(textChanged(const QString &)), this, SLOT(enableFindButton(const QString &)));
    connect(findButton, SIGNAL(findClicked()), this, SLOT(clicked()));
    connect(closeButton, SIGNAL(clicked()), this, SLOT(close()));

    QHBoxLayout *topLeftLayout = new QHBoxLayout;
    topLeftLayout->addWidget(label);
    topLeftLayout->addWidget(lineEdit);

    QVBoxLayout *leftLayout = new QVBoxLayout;
    leftLayout->addLayout(topLeftLayout);
    leftLayout->addWidget(caseCheckBox);
    leftLayout->addWidget(backwardCheckBox);

    QVBoxLayout *rightLayout = new QVBoxLayout;
    rightLayout->addWidget(findButton);
    rightLayout->addWidget(closeButton);

    QHBoxLayout *mainLayout = new QHBoxLayout;
    mainLayout->addLayout(leftLayout);
    mainLayout->addLayout(rightLayout);

    setLayout(mainLayout);

    setWindowTitle(tr("Find"));
    setFixedHeight(sizeHint().height());
}

void FindDialog::findClicked()
{
    QString text = lineEdit->text();
    Qt::CaseSensitivity cs = caseCheckBox->isChecked() ? Qt::CaseSensitive : Qt::CaseInsensitive;

    if(backwardCheckBox->isChecked())
        emit findPrev(text, cs);
    else emit findNext(text, cs);
}

void FindDialog::enableFindButton(const QString &text)
{
    findButton->setEnabled(!text.isEmpty());
} 
```

主文件

```
#include <qapplication.h>
#include <finddialog.h>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    FindDialog *dialog = new FindDialog;
    dialog->show();

    return app.exec();
} 
```

和输出：

```
1>------ Build started: Project: ex1, Configuration: Release Win32 ------
1>Build started 26.03.2013 23:36:17.
1>InitializeBuildStatus:
1>  Touching "Release\ex1.unsuccessfulbuild".
1>ClCompile:
1>  finddialog.cpp
1>  main.cpp
1>  Generating Code...
1>finddialog.obj : error LNK2019: unresolved external symbol "public: static struct QMetaObject const FindDialog::staticMetaObject" (?staticMetaObject@FindDialog@@2UQMetaObject@@B) referenced in function "public: static class QString __cdecl FindDialog::tr(char const *,char const *)" (?tr@FindDialog@@SA?AVQString@@PBD0@Z)
1>finddialog.obj : error LNK2019: unresolved external symbol "protected: void __thiscall FindDialog::findNext(class QString const &,enum Qt::CaseSensitivity)" (?findNext@FindDialog@@IAEXABVQString@@W4CaseSensitivity@Qt@@@Z) referenced in function "private: void __thiscall FindDialog::findClicked(void)" (?findClicked@FindDialog@@AAEXXZ)
1>finddialog.obj : error LNK2019: unresolved external symbol "protected: void __thiscall FindDialog::findPrev(class QString const &,enum Qt::CaseSensitivity)" (?findPrev@FindDialog@@IAEXABVQString@@W4CaseSensitivity@Qt@@@Z) referenced in function "private: void __thiscall FindDialog::findClicked(void)" (?findClicked@FindDialog@@AAEXXZ)
1>finddialog.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall FindDialog::metaObject(void)const " (?metaObject@FindDialog@@UBEPBUQMetaObject@@XZ)
1>finddialog.obj : error LNK2001: unresolved external symbol "public: virtual void * __thiscall FindDialog::qt_metacast(char const *)" (?qt_metacast@FindDialog@@UAEPAXPBD@Z)
1>finddialog.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall FindDialog::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@FindDialog@@UAEHW4Call@QMetaObject@@HPAPAX@Z)
1>C:\Users\Family\Documents\Visual Studio 2010\Projects\ex1\Win32\Release\\ex1.exe : fatal error LNK1120: 6 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:02.21
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

谢谢你。

**代码之前已经运行过。**它在没有任何 make-file 的情况下工作。只需在 MSVC2010 中进行简单编译：

```
#include <QApplication>
#include <QHBoxLayout>
#include <QSlider>
#include <QSpinBox>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QWidget *window = new QWidget;
    window->setWindowTitle("Enter Your Age");

    QSpinBox *spinBox = new QSpinBox;
    QSlider *slider = new QSlider(Qt::Horizontal);
    spinBox->setRange(0, 130);
    slider->setRange(0, 130);

    QObject::connect(spinBox, SIGNAL(valueChanged(int)),
                     slider, SLOT(setValue(int)));
    QObject::connect(slider, SIGNAL(valueChanged(int)),
                     spinBox, SLOT(setValue(int)));
    spinBox->setValue(35);

    QHBoxLayout *layout = new QHBoxLayout;
    layout->addWidget(spinBox);
    layout->addWidget(slider);
    window->setLayout(layout);

    window->show();

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T07:52:49.600

也许这是一个初学者的问题。但如果我有这样一个，也许它对其他人会有所帮助。

由于我使用 Q_OBJECT 出现错误，所以我的应用程序在没有 moc 的情况下无法运行。第二个示例正常工作，因为没有宏并且不一定需要 moc。

我可以避免编写 Qmake 和 moc 吗？我可以。Qt Visual Studio 插件会自动生成所有需要的文件。如果有一些问题，比如

```
1>finddialog.obj : error LNK2019: unresolved external symbol "public: static struct QMetaObject const FindDialog::staticMetaObject" (?staticMetaObject@FindDialog@@2UQMetaObject@@B) referenced in function "public: static class QString __cdecl FindDialog::tr(char const *,char const *)" (?tr@FindDialog@@SA?AVQString@@PBD0@Z)
1>finddialog.obj : error LNK2019: unresolved external symbol "protected: void __thiscall FindDialog::findNext(class QString const &,enum Qt::CaseSensitivity)" (?findNext@FindDialog@@IAEXABVQString@@W4CaseSensitivity@Qt@@@Z) referenced in function "private: void __thiscall FindDialog::findClicked(void)" (?findClicked@FindDialog@@AAEXXZ)
1>finddialog.obj : error LNK2019: unresolved external symbol "protected: void __thiscall FindDialog::findPrev(class QString const &,enum Qt::CaseSensitivity)" (?findPrev@FindDialog@@IAEXABVQString@@W4CaseSensitivity@Qt@@@Z) referenced in function "private: void __thiscall FindDialog::findClicked(void)" (?findClicked@FindDialog@@AAEXXZ)
1>finddialog.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall FindDialog::metaObject(void)const " (?metaObject@FindDialog@@UBEPBUQMetaObject@@XZ)
1>finddialog.obj : error LNK2001: unresolved external symbol "public: virtual void * __thiscall FindDialog::qt_metacast(char const *)" (?qt_metacast@FindDialog@@UAEPAXPBD@Z)
1>finddialog.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall FindDialog::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@FindDialog@@UAEHW4Call@QMetaObject@@HPAPAX@Z) 
```

然后重新加载头文件，其中定义了 Q_OBJECT 类（只需排除该文件，然后再次添加）。将创建新的 moc.cpp 文件。然后重建项目。

我找不到 Qt 插件的任何帮助。如果有人有，请给个链接。

# actionscript-3 - 颈背移动平台

> ID：15646041
> 
> 赞同：0
> 
> 时间：2013-03-26T19:44:45.373
> 
> 标签：actionscript-3, physics-engine

好吧，我对nape比较陌生，我在做游戏的过程中，我做了一个KINEMATIC类型的叫做平台的Body，我只是想在舞台上的某个范围内前后移动它。有人可以看看我哪里出错了，谢谢。

```
private function enterFrameHandler(ev:Event):void
{
if (movingPlatform.position.x <= 150 )
            {
                movingPlatform.position.x +=  10;
            }
            if (movingPlatform.position.x >= 260)
            {
                movingPlatform.velocity.x -=  10;
            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:25:44.380

首先，在其中一个 if 块中，您将递增`position.x`10，而在另一个块中，您将递减`velocity.x`10。我猜您的意思`position.x`是两者。

其次，想象`movingPlatform.position.x`是 150，你`enterFrameHandler`跑了一次。`movingPlatform.position.x`将变为 160，并且在下一次`enterFrameHandler`调用时，不会执行任何 if 块，因为 160 既不小于或等于 150，也不大于或等于 260。

您可以使用速度来指示其移动的一侧，并在超出边缘后将其反转，例如：

```
// assuming velocity is (1,0)
private function enterFrameHandler(ev:Event):void {
    if (movingPlatform.position.x <= 150 || movingPlatform.position.x >= 260) {
        movingPlatform.velocity.x = -movingPlatform.velocity.x;
    }

    movingPlatform.position.x += movingPlatform.velocity.x;
} 
```

显然，如果对象已经在假设 x=100，这可能会导致问题，它只会继续反转它的速度，所以要么确保将它放在 150-260 之间，要么添加额外的检查以防止它多次反转它的方向.

这可能是一种更好的方法：

```
// assuming velocity is (1,0)
private function enterFrameHandler(ev:Event):void {
    if (movingPlatform.position.x <= 150) {
        movingPlatform.velocity.x = 1;
    } else if (movingPlatform.position.x >= 260) {
        movingPlatform.velocity.x = -1;
    }

    movingPlatform.position.x += movingPlatform.velocity.x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:57:15.460

一般来说：

运动学物体应该仅以速度移动，如果您直接改变它们的位置，那么它们实际上并没有像“瞬移”那样移动，并且就物理学而言，它们的速度仍然恰好为 0，因此诸如碰撞和摩擦不会像您预期的那样起作用。

如果您仍然想使用位置而不是速度，那么在 Body 类上有一个为运动学设计的方法 setVelocityFromTarget：

```
body.setVelocityFromTarget(targetPosition, targetRotation, deltaTime); 
```

其中 deltaTime 是您将在以下对 space.step() 的调用中使用的时间步长；

所有这一切实际上是根据当前位置/旋转、目标位置/旋转以及到达那里应该花费的时间来设置适当的速度和 angularVel。

# asp.net - 从 serverasp 更改注销按钮的可见性

> ID：15646042
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:44:47.980
> 
> 标签：asp.net, sql

我现在正在构建一个包含用户数据库的站点。如果会话存在，我想在菜单上添加“注销”按钮。我认为在检查会话存在后，我会更改 CSS 中的可见性属性。我怎样才能做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:53:41.803

好的，这样的事情怎么样：

javascript:

```
PageMethods.IsSessionActive(isActive, onSuccess, onError);

function onSuccess(result) {
  if (result == "true") {
  //logic where the logout button is set to visible
  } else {
    //set to hidden
  }
} 
```

C# 服务器端 web 方法：

```
[WebMethod] public static string IsSessionActive(string isActive) {  
//check if session is active   //is active set isActive = "true";

return isActive; } 
```

# actionscript-3 - AS3如何设置初始阶段大小

> ID：15646044
> 
> 赞同：3
> 
> 时间：2013-03-26T19:44:51.103
> 
> 标签：actionscript-3, flash, flashdevelop, stage

如果我使用 FlashDevelop 工具在纯 AS3 中进行开发，如何设置初始阶段大小（高度/宽度）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T19:47:22.667

您可以右键单击您的项目并转到属性以在那里设置尺寸，或者您可以将以下内容放在您的主类声明中：

```
[SWF(width="1280", height="800", backgroundColor="#000000", frameRate="30")]
public class Main extends Sprite 
{
...
} 
```

# javascript - 以脚本呈现的 ID 为目标

> ID：15646045
> 
> 赞同：2
> 
> 时间：2013-03-26T19:44:57.473
> 
> 标签：javascript, getelementbyid

我正在使用一个漂亮的小脚本，称为 Tabifier ( [http://www.barelyfitz.com/projects/tabber/](http://www.barelyfitz.com/projects/tabber/) )

现在，长话短说，我在 head 标签中运行的这个脚本创建了一个`<ul>`包含`<li>`s 的`<a>`s。同样在 head 标签中，它为这些`<a>`s 创建 ID。当我检查加载的站点时，我可以清楚地看到存在的 ID 标签。但是，我不能使用 getElementById 调用它们。我一直在使用

```
<script>
    document.getElementById('rightpanelnav1').style.padding='200px';    
</script> 
```

作为我代码不同部分的示例脚本，但无济于事。我想知道是不是这些东西在我的代码中定义的位置或顺序导致它无法识别 ID。你怎么看？

编辑：我在下面收到了一个很好的答案，但我仍然无法获得 'rightpanelnav1' 来注册 onclick 事件......？是的，应该没有问题吧？当我点击它时，整个页面已经加载了几秒钟......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:49:04.757

首先，为了访问 DOM 中的元素，该元素必须是 DOM ( `document`) 的一部分。因此，如果您将`<script>`with`getElementById`放置在页面中加载元素之前的位置，它将不会在 DOM 中看到该元素。

其次，您使用的这个库很可能会在页面加载时对其进行修改，这意味着无论您将其放置在何处，`<script>`它在运行之前都没有机会看到这些元素。

因此，您也应该让脚本等待，然后执行以下操作：

```
window.onload = function(){
 document.getElementById('rightpanelnav1').style.padding='200px';
}; 
```

或者对于点击事件

```
window.onload = function(){
 document.getElementById('rightpanelnav1').onclick = function(){
  alert("clicked!");
 };
}; 
```

# php - 仅当文件在同一目录中时包含才有效

> ID：15646049
> 
> 赞同：0
> 
> 时间：2013-03-26T19:45:12.200
> 
> 标签：php, include

我有我正在制作的这个网站。当我包含来自同一文件夹的 php 文件时，它可以工作，但是当我这样做时

```
<?php include('/ioanblog/appstore/header.php');?> 
```

它不起作用或

```
<?php include('http://www.domain.co.uk/appstore/header.php');?> 
```

那也行不通。

所有标题都包含样式表和 Piwik 代码，它还将包含导航。

![在此处输入图像描述](../Images/5e92de2f540c5fd6356a01626e5dbf5d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:48:53.230

很难说为什么在不知道文件夹结构的情况下包含不起作用。但是你可以用绝对路径试试：/home/user/domain/public_html/etc...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:56:48.857

利用`<?php include('../../header.php');?>`

`appstore`这是我的猜测...据我所知，您在任何地方都没有目录。

编辑：使用正确的路径更新...来自`libreoffice`目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:47:56.770

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T19:49:02.133

尝试删除第一个斜线`include('ioanblog/appstore/header.php');`

# asp.net-mvc - ASP.NET MVC - 没有 HTML 的状态码

> ID：15646055
> 
> 赞同：0
> 
> 时间：2013-03-26T19:45:19.473
> 
> 标签：asp.net-mvc, iis-express, http-status-codes

我正在使用 IIS Express 使用 Visual Studio 2010 在我的本地机器上开发一个 ASP.NET MVC 4 项目。我有一个控制器，它通过`HttpStatusCodeResult`. 我注意到 IIS Express 正在返回 HTML 以及我的状态代码。

我不想拖着所有这些额外的 HTML。纯 HTTP 标头是我的 JavaScript 所关心的全部。这是我可以在 web.config 中关闭的东西还是特定于 IIS Express？

`customErrors`我也很好奇我的状态代码和该部分之间是否会有任何交互。如果我返回 a `404`，它会重定向到我的 404 页面吗？从我的测试来看，这似乎不是问题，但我想确定一下。

# ruby-on-rails - Prawn PDF - 如何获取文本框的高度

> ID：15646058
> 
> 赞同：5
> 
> 时间：2013-03-26T19:45:30.170
> 
> 标签：ruby-on-rails, prawn

我有一个包含动态文本的 formatted_text_box。在没有给出特定尺寸的情况下，盒子似乎可以很好地扩展。

问题是它似乎没有将光标移动到框的底部，因此我的文本与 formatted_text_box 中的文本重叠。

如果我可以确定文本框的高度，我可以相应地使用 move_down。

有没有办法确定页面上 text_box 的高度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-14T18:37:34.940

扩展亚伯拉罕的回答：

1.  创建格式化文本框，确保传入通常传递给辅助方法的选项`pdf.formatted_text_box`

    ```
    features_box = ::Prawn::Text::Formatted::Box.new(feature_text.flatten, {
        at: [@pdf.bounds.left + 3.in, @pdf.bounds.top - 0.7.in],
        inline_format: true,
        document: @pdf
      }
    ) 
    ```

2.  dry_run 盒子`features_box.render(dry_run: true)`

3.  抓取盒子高度`@height = features_box.height`

4.  真实渲染盒子`features_box.render`
5.  移动光标或在新高度开始另一个框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:30:18.353

您是否尝试过使用 :dry_run=> true 选项？

[http://prawn.majesticseaacreature.com/docs/0.11.1/Prawn/Text/Box.html](http://prawn.majesticseacreature.com/docs/0.11.1/Prawn/Text/Box.html)

这里有一个类似的案例：[https ://groups.google.com/d/msg/prawn-ruby/fjPBlaqtQ3A/iGKNThxbq0oJ](https://groups.google.com/d/msg/prawn-ruby/fjPBlaqtQ3A/iGKNThxbq0oJ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T20:54:13.873

这是我的解决方案，它呈现一个编号列表。每行由一个数字、文本数组组成，例如 ["1.", "list item 1", "2.", "list item 2"]

```
h = data.collect{|d| pdf.height_of(d[0])}.max
data.each do |row|
  pdf.formatted_text(format_line(row[0]))
  pdf.formatted_text_box(format_line(row[1]), :at=>[w, pdf.cursor+h])
  pdf.move_down pdf.height_of_formatted(format_line(row[1]))-h
end
pdf.move_down pdf.height_of_formatted(format_line(data.last[1])) 
```

向下移动格式化文本的高度以呈现下一行。

# ios - 防止 UIWebView 为电话链接显示 UIPopoverController

> ID：15646062
> 
> 赞同：4
> 
> 时间：2013-03-26T19:45:40.473
> 
> 标签：ios, objective-c, ipad

我正在使用 UIWebView（部署目标 iOS 5.0+）开发 iPad 应用程序。

当用户点击电子邮件、地址和电话号码时，我的 UIWebView 应该什么**都不做。**

**我的电话号码**有问题。如果 html 页面包含这样的链接：`<a href="tel:555-555-5555">555-555-5555</a>`当用户点击此链接时 UIPopoverController 出现（添加到联系人，复制）。

我尝试了下一个：

*   关闭 UIWebView 的 xib 文件中的检测
*   `webView.dataDetectorTypes = UIDataDetectorTypeNone;`
*   调用 JS -`document.documentElement.style.webkitTouchCallout = "none";`

**UIWebView 委托方法`shouldStartLoadWithRequest`不适用于 iPad 上的电话号码，但适用于 iPhone**。

你有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:08:51.580

特定电话号码链接没有被禁用的原因是它不是*检测到*的电话号码，它只是一个常规的旧`<a href=foo>`链接，恰好具有其`href`属性的电话链接。设置`dataDetectorTypes`您正在做的事情是禁用电话号码检测的正确方法。因此，如果您的电话号码只是出现在某处的网页文本中，并且您想防止这些电话号码成为链接，请继续使用`webView.dataDetectorTypes = UIDataDetectorTypeNone;`.

如果您想禁用所有看起来像电话号码的链接，您需要在页面完成加载后执行 JavaScript。在您的 UIWebView 的委托`webViewDidFinishLoad`方法`[webView stringByEvaluatingJavaScriptFromString:]`中，使用并传入 JavaScript 来替换有问题的链接。这是一个示例 JavaScript，它将用显示电话号码的文本元素替换所有 tel 样式链接。您可能想要一些稍微不同的东西，或者您可能只想从 DOM 中完全删除链接。

```
var links = document.getElementsByTagName('a');
for (var j = 0; j < links.length; j++) {
    var href=links[j].getAttribute('href');
    var prefix = href.substring(0,4);
    if (prefix == "tel:") {
        var parentNode = links[j].parentNode;
        var replacementNode = document.createTextNode(href.substring(prefix.length, href.length));
        parentNode.replaceChild(replacementNode, links[j]);
    }
} 
```

# ajax - 在html Ajax中加载时如何只附加一次

> ID：15646063
> 
> 赞同：0
> 
> 时间：2013-03-26T19:45:43.290
> 
> 标签：ajax, json, append

我从我创建的灯箱中的 JSON 文件加载内容。灯箱打开另一个 html。在该 html 中，我将从 JSON 文件加载的数据附加到各种元素。但是我只想在他们打开灯箱时附加一次，我该怎么做？

```
$(document).on('click', '.mch-overlay-info', function(e){
    e.preventDefault();
    var href = $(this).attr('href');
    $('#mch-overlay-content').html('');
    $('#mch-overlay').fadeIn(300);
    $('#mch-overlay-content').load(href, function() {
        showInfo(); 
    });
});

function showInfo(){

        $(".start .text3").append(data[lang]['startpage']['text3']);
        $(".start .text4").append(data[lang]['startpage']['text4']);
        $(".start .text5").append(data[lang]['startpage']['text5']);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:57:07.823

我假设你的问题是每次他们点击它都会附加？两种选择：

1.  不要附加它。只需用于`$().html()`设置内容并替换旧内容。
2.  用变量控制

    ```
    var hasBeenAppended = false;

    //etc...

    function showInfo(){
        if(!hasBeenAppended) {
            hasBeenAppended = true;
            $(".start .text3").append(data[lang]['startpage']['text3']);
            $(".start .text4").append(data[lang]['startpage']['text4']);
            $(".start .text5").append(data[lang]['startpage']['text5']);
        }

    } 
    ```

# javascript - jQuery .add() 使用生成的元素不起作用

> ID：15646065
> 
> 赞同：0
> 
> 时间：2013-03-26T19:45:47.573
> 
> 标签：javascript, jquery

我正在尝试遍历一个数组，使用它的值来创建一个元素集合，以便稍后添加到 DOM 中。

为此，我正在使用以下代码：

```
$().add($('<span />', {
    class: 'child',
    text: 'test'
})).appendTo('.container'); 
```

或类似的东西......生成的元素不会添加到集合中。这是一个说明相同的小提琴：http: [//jsfiddle.net/Dygerati/WTYSQ/2/](http://jsfiddle.net/Dygerati/WTYSQ/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:48:17.703

无需创建一个空的 jQuery 对象。此外，您的 HTML 中没有`.container`。使用此代码：

```
var spans=$('<span />', {
    class: 'child',
    text: 'test'
});  

$('.container').append(spans); 
```

工作[的jsFiddle](http://jsfiddle.net/WTYSQ/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:49:19.153

只需使用一个简单的数组并将新元素推送到您的数组。

```
var spans = new Array();
console.log(spans.length);

spans.push($('<span />', {
    class: 'child',
    text: 'test'
}));

console.log(spans.length);   
$('.container').append(spans); 
```

[http://jsfiddle.net/WTYSQ/4/](http://jsfiddle.net/WTYSQ/4/) 在您发布的小提琴中，您还混合了容器和父类，这就是为什么`append()`仍然无法工作的原因。我命名了两个容器。

# javascript - 如何在搜索后打开信息窗口并平移到谷歌地图上的位置

> ID：15646070
> 
> 赞同：0
> 
> 时间：2013-03-26T19:46:02.357
> 
> 标签：javascript, google-maps, search, infowindow

我尝试在搜索后打开信息窗口并平移到谷歌地图上的位置。有人能帮我吗？谢谢你。

```
var availableTags = [];
for (i=0;i<mapLocationsJSON.length;i++){
    availableTags[i]=mapLocationsJSON[i].title;
}

//This is the autocomplete text field
$(function() {
    $( "#search" ).autocomplete({
      source: availableTags
    });
});

//Insert the function here for what you want it to do when you search
function myFunc(searchTerm){
    var validSearch=false;
    var markerNumber;

    //Check to see if the term they searched for matches any of the locations in the map data
    for (i=0;i<mapLocationsJSON.length;i++){
        if(searchTerm==mapLocationsJSON[i].title){
            validSearch=true;
            markerNumber=i;
            break;
        }
    }
    if(validSearch){
        //Pan to the position and zoom in.
        map.panTo(markers[markerNumber].getPosition());
        map.setZoom(7);

        //I'm not sure how to open the info window.... ?
        //infowindow.open(map,markers[markerNumber]);
    }else{
        //if the data doesn't match a term, ask them to search again. 
        alert("Please try again")
    };
} 
```

搜索完位置后我应该怎么做才能打开信息窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:38:24.923

假设您在标记上有一个预先存在的点击侦听器（您没有包含定义标记的代码），最简单的方法是：

```
if(validSearch){
        //Pan to the position and zoom in.
        map.panTo(markers[markerNumber].getPosition());
        map.setZoom(7);
        // click on the marker
        google.maps.event.trigger(markers[markerNumber],'click');
}else{
        //if the data doesn't match a term, ask them to search again. 
        alert("Please try again")
} 
```

# xml - 从函数读取 XML 输出

> ID：15646071
> 
> 赞同：0
> 
> 时间：2013-03-26T19:46:04.270
> 
> 标签：xml, vbscript, xml-parsing

我有一个带有函数的 VBScript，它将返回 XML 作为输出。如何读取输出文件并从 xml 中获取标签 (emp_id) 中的值？

```
strResult = myfunction (Str1,Str2)

Set objXML = Server.CreateObject("Msxml2.DOMDocument")
objXML.LoadXml(strResult) 
```

当我尝试加载 Xml 时，Server 和 objXml 为空。

strResult 包含一个带有许多标签的 xml。其中我只对一个标签（emp_id）感兴趣

在'strResult'中输出xml

```
<?xml version="1.0" encoding="UTF-8"?>
<NewDataSet>
 <xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns="">
 <xs:element name="NewDataSet" msdata:IsDataSet="true"><xs:complexType><xs:choice maxOccurs="unbounded">
 <xs:element name="ReturningDataSet"><xs:complexType><xs:sequence><xs:element name="sno" type="xs:int" minOccurs="0"/>
<xs:element name="alternate_id" type="xs:string" minOccurs="0"/>
<xs:element name="cusip" type="xs:string" minOccurs="0"/>
<xs:element name="alternate_id_type_cd" type="xs:string" minOccurs="0"/>
<xs:element name="isin" type="xs:string" minOccurs="0"/>
<xs:element name="emp_id" type="xs:string" minOccurs="0"/>
<xs:element name="sedol" type="xs:string" minOccurs="0"/>
<xs:element name="issuer_id" type="xs:string" minOccurs="0"/>
<xs:element name="iv_type" type="xs:string" minOccurs="0"/>
<xs:element name="idType" type="xs:string" minOccurs="0"/>
<xs:element name="couponRate" type="xs:double" minOccurs="0"/>
<xs:element name="maturityDt" type="xs:dateTime" minOccurs="0"/>
 <xs:element name="datedDt" type="xs:dateTime" minOccurs="0"/>
 <xs:element name="branch" type="xs:string" minOccurs="0"/>
<xs:element name="securityName" type="xs:string" minOccurs="0"/>
<xs:element name="iso_currency" type="xs:string" minOccurs="0"/>
<xs:element name="dayCountPer" type="xs:string" minOccurs="0"/>
<xs:element name="dayCountYr" type="xs:string" minOccurs="0"/>
<xs:element name="marketExch" type="xs:string" minOccurs="0"/>
<xs:element name="inputPrcForm" type="xs:string" minOccurs="0"/>
<xs:element name="iso_country" type="xs:string" minOccurs="0"/>
<xs:element name="settlementConv" type="xs:string" minOccurs="0"/>
<xs:element name="settlementMeth" type="xs:string" minOccurs="0"/>
<xs:element name="firstCpnDt" type="xs:dateTime" minOccurs="0"/>
<xs:element name="securityMinDen" type="xs:double" minOccurs="0"/>
<xs:element name="securityMinInc" type="xs:double" minOccurs="0"/>
<xs:element name="country" type="xs:string" minOccurs="0"/>
<xs:element name="currency" type="xs:string" minOccurs="0"/>
<xs:element name="programId" type="xs:string" minOccurs="0"/>
<xs:element name="programName" type="xs:string" minOccurs="0"/>
<xs:element name="warningMessages" type="xs:string" minOccurs="0"/>
                                </xs:sequence></xs:complexType></xs:element></xs:choice></xs:complexType>
                                </xs:element></xs:schema><ReturningDataSet id="ReturningDataSet1" rowOrder="0">
                                <sno>1</sno>
                                <alternate_id>02R99BBM5                     </alternate_id>
                                <cusip>            </cusip>
                                <alternate_id_type_cd>FMRID </alternate_id_type_cd>
                                <isin>            </isin>
                                ****<emp_id>02R349BXC5</emp_id>****
                                <sedol>       </sedol>
                                <issuer_id>02R99B</issuer_id>
                                <iv_type>YCD </iv_type>
                                <idType>FMRID </idType>
                                <couponRate>0.7</couponRate>
                                <maturityDt>2012-12-26T00:00:00.0000000</maturityDt>
                                <datedDt>2012-12-11T00:00:00.0000000</datedDt>
                                <branch>NYC </branch>
                                <securityName>ASB Y$CD .7% 12/26/12         </securityName>
                                <iso_currency>USD </iso_currency>
                                <dayCountPer>ACT</dayCountPer>
                                <dayCountYr>360</dayCountYr>
                                <marketExch>OT</marketExch>
                                <inputPrcForm>C                             </inputPrcForm>
                                <iso_country>NZ  </iso_country>
                                <settlementConv>DT</settlementConv>
                                <settlementMeth>DTCF           </settlementMeth>
                                <country>NEWZ</country>
                                <currency>USA</currency>
                                <programId>            </programId>
                                <programName>        </programName>
<warningMessages>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;NewDataSet&gt;&lt;xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns=""&gt;&lt;xs:element name="NewDataSet" msdata:IsDataSet="true"&gt;&lt;xs:complexType&gt;&lt;xs:choice maxOccurs="unbounded"&gt;&lt;xs:element name="ReturningDataSet"&gt;&lt;xs:complexType&gt;&lt;xs:sequence&gt;&lt;xs:element name="errorSev" type="xs:string" minOccurs="0"/&gt;&lt;xs:element name="errorId" type="xs:string" minOccurs="0"/&gt;&lt;xs:element name="errorText" type="xs:string" minOccurs="0"/&gt;&lt;/xs:sequence&gt;&lt;/xs:complexType&gt;&lt;/xs:element&gt;&lt;/xs:choice&gt;&lt;/xs:complexType&gt;&lt;/xs:element&gt;&lt;/xs:schema&gt;&lt;ReturningDataSet id="ReturningDataSet1" rowOrder="0"&gt;&lt;errorSev&gt;20&lt;/errorSev&gt;&lt;errorId&gt;CDA1356&lt;/errorId&gt;&lt;errorText&gt;FDWarning1: Freq of interest Payment not available from prefered data source FREQ_RATE_CHANGE_CD. Data system defaulted.            &lt;/errorText&gt;&lt;/ReturningDataSet&gt;&lt;/NewDataSet&gt;</warningMessages>
</ReturningDataSet>
</NewDataSet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:04:45.707

创建一个`Msxml2.DOMDocument`，配置它（例如使用 XPath），使用它的 .loadXml 方法来加载您的函数返回/XML 代码（片段），并通过 XPATH（可能是 .selectSingleNode）访问您感兴趣的项目。

（我相信不需要文件。）

**添加：**

“有效”的东西：

```
 Dim sXML   : sXML      = "<emp><empid>123</empid></emp>"
  Dim oXDoc  : Set oXDoc = CreateObject( "Msxml2.DOMDocument.6.0" )
  Dim sXPath : sXPath    = "/emp/empid"
  oXDoc.setProperty "SelectionLanguage", "XPath"
  oXDoc.async = False
  oXDoc.loadXml sXML

  If 0 = oXDoc.ParseError Then
     WScript.Echo oXDoc.selectSingleNode(sXPath).text
  Else
     WScript.Echo oXDoc.parseError.reason
  End If 
```

输出：

```
123 
```

**补充二：**

为了展示命名空间的处理原则，我减少/缩短了您的示例：

```
 Dim sXML   : sXML = Join(Array( _
      "<?xml version=""1.0""?>" _
    , "<NewDataSet>" _
    , "<xs:schema id=""NewDataSet"" xmlns:xs=""http://www.w3.org/2001/XMLSchema"" xmlns:msdata=""urn:schemas-microsoft-com:xml-msdata"" xmlns="""">" _
    , "<xs:element name=""emp_id"" type=""xs:string"" minOccurs=""0""/>" _
    , "</xs:schema>" _
    , "<ReturningDataSet id=""ReturningDataSet1"">" _
    , "<emp_id>02R349BXC5</emp_id>" _
    , "</ReturningDataSet>" _
    , "</NewDataSet>" _
  ), vbCrLf)
  Dim sNS    : sNS      = "xmlns:xs='http://www.w3.org/2001/XMLSchema'  xmlns:msdata='urn:schemas-microsoft-com:xml-msdata'"
  Dim oXDoc  : Set oXDoc = CreateObject( "Msxml2.DOMDocument.6.0" )
  Dim sXPath : sXPath    = "/NewDataSet/ReturningDataSet/emp_id"
  oXDoc.setProperty "SelectionLanguage", "XPath"
  oXDoc.setProperty "SelectionNamespaces", sNS
  oXDoc.async = False
  oXDoc.loadXml sXML

  If 0 = oXDoc.ParseError Then
     WScript.Echo oXDoc.selectSingleNode(sXPath).text
  Else
     WScript.Echo oXDoc.parseError.reason
  End If 
```

输出：

```
02R349BXC5 
```

# gdb - GDB“信息功能”仅在二进制文件中？

> ID：15646072
> 
> 赞同：0
> 
> 时间：2013-03-26T19:46:05.893
> 
> 标签：gdb, reverse-engineering

有没有办法只显示在 GDB 中调试的二进制文件已实现的功能？除了正则表达式过滤器之外，“信息函数”似乎没有任何其他选项。我在想可能可以查看二进制文件所在的内存地址，然后根据完整“信息函数”中函数地址的位置确定每个是二进制文件的一部分，还是其他东西的一部分。但是，我不知道如何在 gdb 中执行此操作 - 我知道 vmmap 会显示此类信息。

有人知道怎么做吗？建议？

# sql - 从数字文本框中删除默认 0

> ID：15646074
> 
> 赞同：5
> 
> 时间：2013-03-26T19:46:09.413
> 
> 标签：sql, asp.net-mvc-3

我的模型有一个 EditorFor，它绑定到数据库中的非空数字字段。我希望将此字段保留为空白，以便用户可以在该字段中输入或扫描数字。不幸的是，它默认为 0。有没有一种简单的方法可以删除 0，同时保持字段不为空？

```
@Html.EditorFor(model => model.RackNumber, new { id = "RackNumber"}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T21:47:47.633

将模型属性类型更改为可为空：`public int? RackNumber {get;set;}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T20:25:32.020

您可以像这样提供 Value 属性：

```
@Html.EditorFor(model => model.RackNumber, new { Value = Model.RackNumber == 0 ? "" : Model.RackNumber.ToString(), id = "RackNumber"}) 
```

# powershell - 调用 WebRequest GetSystemWebProxy()

> ID：15646079
> 
> 赞同：9
> 
> 时间：2013-03-26T19:46:28.687
> 
> 标签：powershell, powershell-3.0

在 PowerShell 2.0 下，我知道您可以通过执行以下操作来设置要使用的代理，而无需知道确切的代理设置：

```
$proxy = [System.Net.WebRequest]::GetSystemWebproxy()
$proxy.Credentials = [System.Net.CredentialCache]::DefaultCredentials 
```

现在，我的问题是，如果我不知道代理设置，我可以使用上述设置并将其与 PowerShell 3.0 结合使用`Invoke-WebRequest`。这是我希望能够做到的：

```
$proxy = [System.Net.WebRequest]::GetSystemWebproxy()
$proxy.Credentials = [System.Net.CredentialCache]::DefaultCredentials

$WS.Proxy = $proxy

$login = Invoke-WebRequest https://website.com/login_form.html -SessionVariable WS 
```

但是，当我尝试这样做时，我收到一个错误（显然来自我的公司代理），表明我的凭据无法验证。我希望这最终会奏效，但也许我只是犯了一个简单的错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T20:02:06.527

也许这会有所帮助，我将其保存在我的个人资料中。它使用新的`$PSDefaultParameterValues`首选项变量来设置新 Web cmdlet 的默认代理值。该代码检测我是否在我的办公环境中并相应地设置设置。这样可以节省我每次使用这些命令时指定设置的时间。

```
if(Test-Connection myCorpProxy -Count 1 -Quiet)
{
    $global:PSDefaultParameterValues = @{
        'Invoke-RestMethod:Proxy'='http://myCorpProxy:8080'
        'Invoke-WebRequest:Proxy'='http://myCorpProxy:8080'
        '*:ProxyUseDefaultCredentials'=$true
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-10-27T14:38:21.893

使用可以使用此代码：

```
$dest = "http://www.google.fr"
$proxyurl = ([System.Net.WebRequest]::GetSystemWebproxy()).GetProxy($dest)
Invoke-WebRequest $dest -Proxy $proxyurl -ProxyUseDefaultCredentials 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T18:51:42.333

上面代码的实际问题（即使 Shay 更优雅）是您试图在变量存在之前对其设置属性。SessionVariable "$WS" 在您调用 Invoke-WebRequest 之前不存在，但您尝试在其上方设置 .Proxy 属性。

如果它在某一时刻有效，您可能之前已经创建了一个 $WS 实例，因此能够在测试期间使用该对象，但是在脚本自顶向下处理时进行全新/空运行时，它还不存在.

# android - 收到错误“无法从 CursorWindow 读取第 0 行，第 2 列。确保您的光标已正确初始化。”

> ID：15646080
> 
> 赞同：0
> 
> 时间：2013-03-26T19:46:30.303
> 
> 标签：android, sqlite

我正在开发 Android 应用程序。我正在尝试显示用户输入，但是当我尝试这样做时，我收到了上述错误消息。我不知道我做错了什么。这是我使用的代码。谢谢你。

```
try {

        Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT catgram FROM adresse_definition WHERE definition='"+word[0].toLowerCase().trim()+"'", null);

        //Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT index_nom_adresse" + word[0].toLowerCase().trim() + " FROM adresse_definition JOIN   definition ON adresse_definition.definition = definition.data_id ", null);
        //Cursor cursor = dictionary.getDictionaryDatabase().query("adresse_definition", null, "index_nom_adresse= '" + word[0].toLowerCase().trim() + "' or definition= '" + word[0].toUpperCase().trim() + "' ", null, null, null, null);
        cursor.moveToFirst();
        if (cursor.getCount() != 0) {

            if (word[1] == null || word[1].equals("English")) {
                translatedWord = cursor.getString(2);
            } else {
                translatedWord = cursor.getString(1);
            }
        } else {
            translatedWord = "The word is not in database";
        }
        cursor.close();
    } catch (SQLiteException sqle) {
        translatedWord = "The word is not in database";
    }

    dictionary.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:57:46.630

该代码仅读取 Cursor 中的一列，并且列索引从零开始。

```
"SELECT catgram FROM adresse_definition WHERE definition=word[0].toLowerCase().trim()"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:58:40.250

检查您是否选择了原始查询中将从光标获得的所有列。现在，您只在查询中选择一列，并在 cursor.getString 中获取两列。只需将查询更改为：

```
Select * from table_name Where ... 
```

# javascript - 避免 FullCalendar 中的事件叠加

> ID：15646086
> 
> 赞同：1
> 
> 时间：2013-03-26T19:46:49.403
> 
> 标签：javascript, fullcalendar

您好我正在尝试避免`FullCalendar`应用程序中的重叠事件。我已经定义了回调，因此它会检查任何重叠事件，并通过相应地更改和调用`eventDrop`将当前移动的事件移动到重叠事件的末尾，然后调用.`event.start``event.end``.fullCalendar('updateEvent', event)`

这是我的代码，`moment`调用的是[http://momentjs.com/docs/](http://momentjs.com/docs/)，这是一个用于 javascript 的时间处理工具库，我认为这不是问题的罪魁祸首。如果我评论那些做的行`event.start = start; event.end = end`，那么一切正常。如果我不这样做，它会以完全相同的方式中断，无论我是否调用`updateEvent`。发生的情况是：事件确实被移到了前一个事件的末尾，但是如果我稍后尝试将事件向前移动（当天晚些时候到一个空白空间），前一个事件在视觉上会被延长，直到新的开始当前正在修改的事件。

`self.collection`是一个主干集合，因此仅使用`event.start=`注释位调用此代码会显示事件重叠，但是如果我刷新页面，则事件会显示在正确的位置（不重叠）

```
eventDrop: function(event, dayDelta,
                    minuteDelta, allDay,
                    revertFunc, jsEvent, ui, view) {
    var start = moment(event.start);
    var end = moment(event.end);
    var overlap = self.calendar.fullCalendar('clientEvents', function(ev) {
        if( ev == event)
            return false;
        var estart = moment(ev.start);
        var eend = moment(ev.end);
        return estart.unix() < end.unix() && eend.unix() > start.unix();
    });
    if( overlap.length ) {
        overlap = overlap[0];
        var estart = moment(overlap.start);
        var eend = moment(overlap.end);
        var duration = eend - estart;
        start = eend;
        end = start.clone();
        end.add(duration);
        event.start = start.toDate();
        event.end = end.toDate();
        self.calendar.fullCalendar('updateEvent', event);
    }
    event.model.save({start: start.unix(), end: end.unix()});
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:12:00.817

好的，找到问题了。

说的那一行

```
start = eend; 
```

应该

```
start = eend.clone(); 
```

因为将它包装在一个**对象**`moment`中不会这样做，它只是保留一个引用，并将新移动事件的`start`日期设置为与`Date` **`overlap.end`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:57:32.207

你还有一个错误，持续时间应该是

```
var duration = end - start; 
```

因为在您的方法中，它会计算重叠事件的持续时间，而不是您刚刚移动的事件**

# mysql - Nginx 与 Apache 解决网站负载问题

> ID：15646087
> 
> 赞同：0
> 
> 时间：2013-03-26T19:46:58.807
> 
> 标签：mysql, apache, networking, operating-system, system

因此，拥有一个包含 10-12 个页面的 Web 应用程序，其中包含许多 POST/GET DB 调用。当站点流量达到 1000 左右（并发用户数）非常少时，我们通常会遇到 apache 崩溃/其他问题，我们已经更新了具有良好 RAM 和资源的服务器。当我们的系统管理员对 blitz 和其他自定义脚本进行负载测试并建议远离 Apache 时。有些事情对我来说没有意义。考虑到我们有用于缓存的 cloudflare，像 Apache 处理几千个并发用户也不错。以下是他的建议：

用 Nginx+php-fpm 替换 Apache+mod_fcgi 可以让服务器处理更多的用户，然后进行测试。或 2\. 用于测试：需要 10-20 台服务器来运行场景。基本上，需要的是一个更复杂的 blitz.io 类似物。创建一台服务器，这需要花费所有这些时间，然后只需将其克隆到云中并支付大约 1 小时的测试费用乘以所需的服务器数量。

再次有许多 DB 调用和 HT 访问。在这种情况下，是什么让 Nginx 比 apache 更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:47:57.957

[我会先检查这个比较。](http://www.wikivs.com/wiki/Apache_vs_nginx)基本上，nginx 是基于事件的，因此它能够同时处理更多请求。但是，由于 MySQL DB 似乎是这里的瓶颈，nginx 很可能无法解决您的所有问题。也许迁移到 NoSQL 类型的数据库，这种数据库更擅长水平扩展，会有所帮助（如果可行的话）。

# c# - 如何在 . 从用户输入解析为整数？（例如，将使用 . 格式化的 IP 地址已经在其中）

> ID：15646096
> 
> 赞同：-2
> 
> 时间：2013-03-26T19:47:33.927
> 
> 标签：c#, ip-address, string-split

```
string strSeverIP = Console.ReadLine();
string serverIpAddress = String.Split(".", strSeverIP); 
```

我试图在服务器地址期间拆分这个字符串，以便我可以将每个单独的字符串解析为一个整数。这些整数将作为数字而不是文本插入到地址格式中以进行比较。String.Split 不断出错，“最佳重载方法匹配'string.Split(string[], System.StringSplitOptions)' 有一些无效参数。” 我没有看到问题出在哪里。我在网上查看了示例，但仍然找不到问题。感谢那些解决这个问题的人，我感谢你的耐心。我不是最好的措辞者，当我生气时，我不会考虑我做了什么来尝试这个问题。再次感谢您的耐心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:58:20.810

如果字符串是 IP 地址，最好使用 IPAddress 类：

```
string inputStr = "10.30.0.72";
System.Net.IPAddress ipAddress;
if (System.Net.IPAddress.TryParse(inputStr, out ipAddress))
{
    byte[] addressByte = ipAddress.GetAddressBytes();
} 
```

这会给`addressByte[4] = {10, 30, 0, 72}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:53:48.640

```
string[] serverIpAddress = strSeverIP.Split('.');
int[] ips = new int[serverIpAddress.Length];
for (int i = 0; i < serverIpAddress.Length; ++i)
{
   if (!int.TryParse(serverIpAddress[i], out ips[i]))
      {
           //replace with whatever :)
           throw new Exception("Invalid ip!");
      }
} 
```

# r - 根据名称选择列表元素

> ID：15646098
> 
> 赞同：6
> 
> 时间：2013-03-26T19:47:38.293
> 
> 标签：r, list

我有一个命名的向量列表，代表来自 2 个样本“A”和“B”的事件：

```
l.temp <- list(
SF1_t_A = c(rep(1:10)),
SF2_t_A = c(rep(9:15)),
SF1_t_B = c(rep(8:12)))

l.temp
$SF1_t_A
 [1]  1  2  3  4  5  6  7  8  9 10

$SF2_t_A
[1]  9 10 11 12 13 14 15

$SF1_t_B
[1]  8  9 10 11 12 
```

现在我只想选择来自样本“A”或“B”的列表元素。我可以用一个循环来做这件事，但是当 plyr 出现时，这有点违背了使用 list 的意义。这和变化，是我迄今为止尝试过的：

```
llply(l.temp , function(l){
    if ((unlist(strsplit(names(l), "_"))[3]) == "A"){ 
                 return(l)}

}) 
```

这是我得到的错误：

```
Error in unlist(strsplit(names(l), "_")) : 
  error in evaluating the argument 'x' in selecting a method for function 'unlist': 
Error in strsplit(names(l), "_") : non-character argument 
```

感谢您对我做错的事情的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T19:51:00.117

You can find the pattern in the names of the list, which gives you an index of which ones:

```
 grep("_A$", names(l.temp)) 
```

And then use it to subset:

```
 l.temp[grep("_A$", names(l.temp))] 
```

# sql-server - 选择 MMM 格式的月份

> ID：15646099
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:47:44.413
> 
> 标签：sql-server

如何选择月份字段为 MMM 格式的月份，例如。iMonth 字段的月份列为 Jan、Feb、Mar。我使用了 datepart 函数，但目标字段类型为 nvarchar 格式，并且出现以下错误。错误：将 nvarchar 值“Mar”转换为数据类型 int 时转换失败。

当我使用 dataname 函数时，查询运行但没有输出被拉出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:50:11.167

选项

1.  将您的类型转换`iMonth`为实际`date`类型
2.  为 3 位数月份和`JOIN`您的查询创建一个查找表。

# xcode - .gitignore for everything inside the xcuserdata folder does not ignore an xcuserstate file

> ID：15646107
> 
> 赞同：42
> 
> 时间：2013-03-26T19:47:59.067
> 
> 标签：xcode, git, gitignore

I'm working in a Xcode project, and I'm trying to configure the .gitignore to not get anything inside the xcuserdata folder.

I have the following .gitignore:

```
# Xcode
.DS_Store
*/build/*
*.pbxuser
!default.pbxuser
*.mode1v3
!default.mode1v3
*.mode2v3
!default.mode2v3
*.perspectivev3
!default.perspectivev3
xcuserdata
profile
*.moved-aside
DerivedData
.idea/
*.hmap
xcuserdata/* 
```

but every time that I build/run the project and execute `git status`, it still shows the following midified file:

```
modified: MyProject.xcodeproj/project.xcworkspace/xcuserdata/fernando.xcuserdatad/UserInterfaceState.xcuserstate 
```

Does anybody have any idea what's wrong?

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-26T20:10:17.013

我找到了解决方案

问题不在 .gitignore 文件中

问题是未从 git 服务器中删除的 UserInterfaceState.xcuserstate，在以下链接中找到了解决方案：

[不能忽略 UserInterfaceState.xcuserstate](https://stackoverflow.com/questions/6564257/cant-ignore-userinterfacestate-xcuserstate)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-02T02:15:24.597

附加信息

我也遇到过这种情况，并且似乎不起作用，因为 .gitignore 在提交后仍然添加它们。我添加的内容对我来说很有魅力

.... .gitignore 无法读取此内容：

```
xcuserdata/* 
```

添加这对我有用：

```
*xcworkspace/xcuserdata/* 
```

或阅读：

```
*/xcuserdata/* 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-05-07T17:46:40.720

除了添加`*.xcuserstate`到您的`.gitignore`文件之外，请记住删除您的缓存`*.xcuserstate`

`git rm --cached [YourProjectName].xcodeproj/project.xcworkspace/xcuserdata/[ YourUsername].xcuserdatad/UserInterfaceState.xcuserstate`

[https://www.programmersought.com/article/1594916500/](https://www.programmersought.com/article/1594916500/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-05T02:23:26.890

如果你使用过 git，你可以添加 .gitignore

```
# Xcode
*.pbxuser
!default.pbxuser
*.mode1v3
!default.mode1v3
*.mode2v3
!default.mode2v3
*.perspectivev3
!default.perspectivev3
*.moved-aside
DerivedData
.idea/
*.xccheckout
*.moved-aside
xcuserdata/
*.hmap
*.ipa
*.xcworkspace
*.xcuserstate // <--- Here
!default.xcworkspace 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-03T21:53:06.693

我在这里看不到任何逻辑。但是，在我的情况下，仅移动 `xcuserdata/` 到 .gitignore 文件的最底部会有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-10T12:54:39.347

除了这对我来说没有任何效果，因为我想提交其中也有 .xcuserdata 的 Pod：

```
**/xcuserdata/* 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-05T10:13:07.577

对我来说没有任何效果，但这

将此行添加到您的 gitignore

```
*.xcuserdata 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-27T06:28:16.017

迟到了这个问题，但这个网站帮助我解决了这个问题：

[https://www.gitignore.io/](https://www.gitignore.io/)

具体使用实验室`swift`并`xcode`生成以下内容：

[https://www.gitignore.io/api/xcode,swift](https://www.gitignore.io/api/xcode,swift)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-04T16:34:37.350

FWIW，我的 xcuserdata 文件夹还没有被 git 跟踪，并且仍然显示在`git status`. 问题是我之前`xcuserdata`在 .gitignore 文件中有一个空格。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-06-19T07:47:36.767

你可以简单地做

```
 git checkout -- <file>..." to discard changes in working directory 
```

例子：

```
 modified:
        mySwa.com.xcworkspace/xcuserdata/bibscy.xcuserdatad/UserInterfaceState.xcuserstate

   git checkout -- mySwa.com.xcworkspace/xcuserdata/bibscy.xcuserdatad/UserInterfaceState.xcuserstate 
```

# highcharts - highcharts 堆积面积

> ID：15646108
> 
> 赞同：2
> 
> 时间：2013-03-26T19:47:59.473
> 
> 标签：highcharts

所以我想我可能在堆叠面积方面遇到了一个 Highcharts 错误：

[JSFiddle Highcharts 示例](http://jsfiddle.net/dRL6t/2/)

在此示例中，“社交”在“在线视频”之前有一个起点，并且似乎不规则地渲染了堆叠区域的点。如果您从左到右取消选择图表，然后从右到左选择它们，图表将正确呈现。有人遇到过这种情况么？

```
$('#container').highcharts({
"xAxis": [
    {
        "name": "Date",
        "unitType": "DATE",
        "title": {
            "text": null
        }
    }
],
"yAxis": [
    {
        "name": "Currency",
        "unitType": "CURRENCY",
        "title": {
            "text": null
        }
    }
],
"series": [
    {
        "yAxis": 0,
        "xAxis": 0,
        "data": [
            {
                "x": 1329724800000,
                "y": 9523.873333333333
            },
            {
                "x": 1330329600000,
                "y": 12646.573333333334
            },
            {
                "x": 1330934400000,
                "y": 12028.853333333333
            },
            {
                "x": 1331535600000,
                "y": 14016.48895104895
            },
            {
                "x": 1332140400000,
                "y": 16497.35533466533
            },
            {
                "x": 1332745200000,
                "y": 17799.29238095238
            },
            {
                "x": 1333350000000,
                "y": 21495.82333333334
            },
            {
                "x": 1333954800000,
                "y": 20261.55833333333
            },
            {
                "x": 1334559600000,
                "y": 22963.80833333332
            },
            {
                "x": 1335164400000,
                "y": 20498.47333333335
            },
            {
                "x": 1335769200000,
                "y": 23846.87499999998
            },
            {
                "x": 1336374000000,
                "y": 26080.86166666669
            },
            {
                "x": 1336978800000,
                "y": 25838.83666666667
            },
            {
                "x": 1337583600000,
                "y": 25501.14666666666
            },
            {
                "x": 1338188400000,
                "y": 23663.95
            },
            {
                "x": 1338793200000,
                "y": 31292.4716666667
            },
            {
                "x": 1339398000000,
                "y": 32823.2983333333
            },
            {
                "x": 1340002800000,
                "y": 33355.595
            },
            {
                "x": 1340607600000,
                "y": 35104.4816666667
            },
            {
                "x": 1341212400000,
                "y": 32984.61190476187
            },
            {
                "x": 1341817200000,
                "y": 34481.88142857143
            },
            {
                "x": 1342422000000,
                "y": 35663.83
            },
            {
                "x": 1343026800000,
                "y": 39744.7383333333
            },
            {
                "x": 1343631600000,
                "y": 37313.0559523810
            },
            {
                "x": 1344236400000,
                "y": 38950.5057142857
            },
            {
                "x": 1344841200000,
                "y": 43884.575
            },
            {
                "x": 1345446000000,
                "y": 43548.8683333333
            },
            {
                "x": 1346050800000,
                "y": 45227.9250000000
            },
            {
                "x": 1346655600000,
                "y": 38555.2130952382
            },
            {
                "x": 1347260400000,
                "y": 46228.5085714285
            },
            {
                "x": 1347865200000,
                "y": 50614.2016666666
            },
            {
                "x": 1348470000000,
                "y": 50058.0150000000
            },
            {
                "x": 1349074800000,
                "y": 53320.6133333333
            },
            {
                "x": 1349679600000,
                "y": 49347.0885714286
            },
            {
                "x": 1350284400000,
                "y": 49264.8047619050
            },
            {
                "x": 1350889200000,
                "y": 54185.2733333332
            },
            {
                "x": 1351494000000,
                "y": 55563.9733333333
            },
            {
                "x": 1352102400000,
                "y": 55708.3243786982
            },
            {
                "x": 1352707200000,
                "y": 48733.7656213019
            },
            {
                "x": 1353312000000,
                "y": 58758.0033333332
            },
            {
                "x": 1353916800000,
                "y": 61759.9366666667
            },
            {
                "x": 1354521600000,
                "y": 63097.59
            },
            {
                "x": 1355126400000,
                "y": 62201.8799999998
            },
            {
                "x": 1355731200000,
                "y": 54752.3342857144
            },
            {
                "x": 1356336000000,
                "y": 64890.0257142858
            },
            {
                "x": 1356940800000,
                "y": 69159.9916666666
            },
            {
                "x": 1357545600000,
                "y": 69436.6916666667
            }
        ],
        "name": "Online Video",
        "unitType": "CURRENCY",
        "type": "area"
    },
    {
        "yAxis": 0,
        "xAxis": 0,
        "data": [
            {
                "x": 1328515200000,
                "y": 47191.90571428572
            },
            {
                "x": 1329120000000,
                "y": 34517.37428571429
            },
            {
                "x": 1329724800000,
                "y": 29077.13374999999
            },
            {
                "x": 1330329600000,
                "y": 31860.52625
            },
            {
                "x": 1330934400000,
                "y": 33656.41
            },
            {
                "x": 1331535600000,
                "y": 29916.92209424082
            },
            {
                "x": 1332140400000,
                "y": 28745.66540575918
            },
            {
                "x": 1332745200000,
                "y": 33738.3710714285
            },
            {
                "x": 1333350000000,
                "y": 31722.8264285715
            },
            {
                "x": 1333954800000,
                "y": 31198.835
            },
            {
                "x": 1334559600000,
                "y": 33476.54857142855
            },
            {
                "x": 1335164400000,
                "y": 33601.01892857145
            },
            {
                "x": 1335769200000,
                "y": 30943.41749999996
            },
            {
                "x": 1336374000000,
                "y": 30949.72500000004
            },
            {
                "x": 1336978800000,
                "y": 34241.68125
            },
            {
                "x": 1337583600000,
                "y": 30031.54875
            },
            {
                "x": 1338188400000,
                "y": 29886.5087500001
            },
            {
                "x": 1338793200000,
                "y": 34003.4012499999
            },
            {
                "x": 1339398000000,
                "y": 32008.1424999999
            },
            {
                "x": 1340002800000,
                "y": 31957.5975000000
            },
            {
                "x": 1340607600000,
                "y": 33813.8885714286
            },
            {
                "x": 1341212400000,
                "y": 33055.4214285715
            },
            {
                "x": 1341817200000,
                "y": 30489.5225000001
            },
            {
                "x": 1342422000000,
                "y": 30702.0503571428
            },
            {
                "x": 1343026800000,
                "y": 32966.3821428571
            },
            {
                "x": 1343631600000,
                "y": 29196.9012500001
            },
            {
                "x": 1344236400000,
                "y": 32688.0837499999
            },
            {
                "x": 1344841200000,
                "y": 33855.33
            },
            {
                "x": 1345446000000,
                "y": 28549.045
            },
            {
                "x": 1346050800000,
                "y": 30542.815
            },
            {
                "x": 1346655600000,
                "y": 32192.9671428571
            },
            {
                "x": 1347260400000,
                "y": 30028.8653571429
            },
            {
                "x": 1347865200000,
                "y": 28983.9975
            },
            {
                "x": 1348470000000,
                "y": 32102.2757142857
            },
            {
                "x": 1349074800000,
                "y": 34292.6042857143
            },
            {
                "x": 1349679600000,
                "y": 31773.625
            },
            {
                "x": 1350284400000,
                "y": 32021.5964285715
            },
            {
                "x": 1350889200000,
                "y": 32087.5610714285
            },
            {
                "x": 1351494000000,
                "y": 29137.7275
            },
            {
                "x": 1352102400000,
                "y": 32548.594404145
            },
            {
                "x": 1352707200000,
                "y": 34536.862738712
            },
            {
                "x": 1353312000000,
                "y": 32442.137857143
            },
            {
                "x": 1353916800000,
                "y": 30339.53125
            },
            {
                "x": 1354521600000,
                "y": 32420.4666071429
            },
            {
                "x": 1355126400000,
                "y": 32267.5671428571
            },
            {
                "x": 1355731200000,
                "y": 30140.21625
            },
            {
                "x": 1356336000000,
                "y": 31462.2751785714
            },
            {
                "x": 1356940800000,
                "y": 35181.4085714286
            },
            {
                "x": 1357545600000,
                "y": 32100.06375
            },
            {
                "x": 1358150400000,
                "y": 30464.51625
            },
            {
                "x": 1358755200000,
                "y": 32761.15
            },
            {
                "x": 1359360000000,
                "y": 30037.86625
            }
        ],
        "name": "Social",
        "unitType": "CURRENCY",
        "type": "area"
    },
    {
        "yAxis": 0,
        "xAxis": 0,
        "data": [
            {
                "x": 1327910400000,
                "y": 71932.20333333334
            },
            {
                "x": 1328515200000,
                "y": 71015.56999999998
            },
            {
                "x": 1329120000000,
                "y": 64489.10809523810
            },
            {
                "x": 1329724800000,
                "y": 59054.29357142863
            },
            {
                "x": 1330329600000,
                "y": 59434.56785714285
            },
            {
                "x": 1330934400000,
                "y": 60617.94047619045
            },
            {
                "x": 1331535600000,
                "y": 57584.68013972055
            },
            {
                "x": 1332140400000,
                "y": 61606.9281936127
            },
            {
                "x": 1332745200000,
                "y": 55198.8326190476
            },
            {
                "x": 1333350000000,
                "y": 60385.3257142858
            },
            {
                "x": 1333954800000,
                "y": 54881.3528571429
            },
            {
                "x": 1334559600000,
                "y": 50847.6321428571
            },
            {
                "x": 1335164400000,
                "y": 50746.7521428572
            },
            {
                "x": 1335769200000,
                "y": 46697.2161904761
            },
            {
                "x": 1336374000000,
                "y": 48913.2923809524
            },
            {
                "x": 1336978800000,
                "y": 48944.0592857142
            },
            {
                "x": 1337583600000,
                "y": 49093.3221428572
            },
            {
                "x": 1338188400000,
                "y": 47704.8195238095
            },
            {
                "x": 1338793200000,
                "y": 49798.9383333334
            },
            {
                "x": 1339398000000,
                "y": 43637.2907142858
            },
            {
                "x": 1340002800000,
                "y": 46993.1742857142
            },
            {
                "x": 1340607600000,
                "y": 36354.43
            },
            {
                "x": 1341212400000,
                "y": 45646.7442857143
            },
            {
                "x": 1341817200000,
                "y": 38892.2640476190
            },
            {
                "x": 1342422000000,
                "y": 40631.3088095237
            },
            {
                "x": 1343026800000,
                "y": 36735.4161904764
            },
            {
                "x": 1343631600000,
                "y": 38958.0166666666
            },
            {
                "x": 1344236400000,
                "y": 33788.2871428572
            },
            {
                "x": 1344841200000,
                "y": 35576.4728571428
            },
            {
                "x": 1345446000000,
                "y": 33276.48
            },
            {
                "x": 1346050800000,
                "y": 32337.60
            },
            {
                "x": 1346655600000,
                "y": 27020.6400000002
            },
            {
                "x": 1347260400000,
                "y": 31333.0899999998
            },
            {
                "x": 1347865200000,
                "y": 28894.44
            },
            {
                "x": 1348470000000,
                "y": 30565.8733333333
            },
            {
                "x": 1349074800000,
                "y": 28436.5023809525
            },
            {
                "x": 1349679600000,
                "y": 23404.8109523810
            },
            {
                "x": 1350284400000,
                "y": 25939.9719047618
            },
            {
                "x": 1350889200000,
                "y": 22661.6014285714
            },
            {
                "x": 1351494000000,
                "y": 20579.0985714286
            },
            {
                "x": 1352102400000,
                "y": 22585.2552906402
            },
            {
                "x": 1352707200000,
                "y": 18785.2475665026
            },
            {
                "x": 1353312000000,
                "y": 19557.5735714284
            },
            {
                "x": 1353916800000,
                "y": 18670.1550000002
            },
            {
                "x": 1354521600000,
                "y": 15432.11
            },
            {
                "x": 1355126400000,
                "y": 18287.7600000002
            },
            {
                "x": 1355731200000,
                "y": 12086.7666666666
            },
            {
                "x": 1356336000000,
                "y": 13091.7819047619
            },
            {
                "x": 1356940800000,
                "y": 10996.8747619046
            }
        ],
        "name": "Affiliate",
        "unitType": "CURRENCY",
        "type": "area"
    }
],
"plotOptions": {
    "line": {
        "type": "lineOptions",
        "stacking": null
    },
    "area": {
        "type": "areaOptions",
        "stacking": "normal"
    },
    "column": {
        "type": "columnOptions",
        "stacking": "normal"
    }
},
"title": {
    "text": null
},
"chart": null
 }
); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-04T16:42:47.000

我也有 Stacked Area 的渲染问题`Highcharts`

JSFiddle在这里：http: [//jsfiddle.net/qrbzg/4/](http://jsfiddle.net/qrbzg/4/)

现在将联系他们的支持团队。

# php - 在 Heroku Worker 上运行 gearman

> ID：15646109
> 
> 赞同：1
> 
> 时间：2013-03-26T19:48:05.613
> 
> 标签：php, heroku, gearman

我有一个在 heroku（雪松堆栈）上运行的 PHP 应用程序。我正处于需要开始将工作交给工人的地步。

我看过 RabbitMQ 和 gearman。对于我的应用程序来说，最好/最简单的解决方案似乎是使用 gearman。

所以我猜测 gearman 服务器将在主 webapp dyno 上运行，然后 gearman workerapi 将在单独的 heroku 工作人员上运行，以及应该完成工作的 php 代码。

我怎样才能用 Heroku 做这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:30:57.667

排队最好使用插件[https://addons.heroku.com/#queues](https://addons.heroku.com/#queues)完成。ficuscr 对您的问题的评论中的链接 ( devcenter.heroku.com/articles/background-jobs-queueing ) 应该为您提供一些关于如何准确实施您的工人的见解。

# django - Heroku 自定义域：错误不是免费的？

> ID：15646116
> 
> 赞同：0
> 
> 时间：2013-03-26T19:48:22.407
> 
> 标签：django, heroku, domainservices

我在雪松堆栈上，似乎

> heroku 域：添加 myDomainName

不管用 ：

> ！开发应用程序不能有自定义域。升级到基本或生产以继续。

基本包是 18 美元/平方米……而人们到处都在说 Heroku 可以免费使用自定义域……:(。

我尝试通过以下方式联系 Heroku 支持人员：

> 我没有看到您的应用位于开发层。此层不允许自定义域。如果您有兴趣在此应用程序上拥有自定义域，则需要升级到该应用程序的基本层。

我真的很困惑，因为到处有人说它是免费的：s。

请问有人知道答案吗？

非常感谢！雷米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:02:05.087

也许他们更新了他们的政策——如果是这样的话，他们会认为这是更大的新闻：[来自其他 stackoverflow 帖子的截图](http://dl.dropbox.com/u/30200856/Screen%20shot%202013-02-13%20at%203.20.03%20PM.png)

也许他们正在对新帐户的转换进行一些测试？

# mysql - 如何通过mysql表分区成两层？

> ID：15646119
> 
> 赞同：0
> 
> 时间：2013-03-26T19:48:36.177
> 
> 标签：mysql, database, indexing, database-partitioning, database-tuning

我想对表进行分区，此代码将向您显示表的结构。该表目前有大约 500 万条记录。

我需要这个表的 MySql 分区语法，就像这样

主分区是归档的 trigger_on 分区类型范围“按年份”，然后按字段的子分区称为状态。

如何在这个现有表上创建分区/子分区？

```
CREATE TABLE `phone_calls` (
`phone_call_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`account_id` int(11) unsigned NOT NULL,
`team_id` int(11) unsigned NOT NULL,
`call_code_id` int(11) unsigned NOT NULL,
`result_code_id` int(11) unsigned NOT NULL DEFAULT '0',
`trigger_on` datetime NOT NULL,
 `created_on` datetime NOT NULL,
`first_attempt_on` datetime DEFAULT NULL, 
`first_attempt_by` int(11) unsigned DEFAULT NULL,
`call_subject` char(100) NOT NULL,
`status` tinyint(1) NOT NULL COMMENT '0= purge, 1=active, 2 = completed', `workflow_generated` tinyint(1) NOT NULL DEFAULT '0' COMMENT '1= generated by system flow, 0 created by a user',
`last_attempt_on` datetime DEFAULT NULL,
`last_attempt_by` int(11) unsigned DEFAULT NULL,
`total_attempts` tinyint(3) unsigned NOT NULL DEFAULT '0',
`modified_by` int(11) unsigned DEFAULT NULL,
`last_call_id` int(11) unsigned NOT NULL,
`call_direction` enum('INBOUND','OUTBOUND') NOT NULL COMMENT 'INBOUND or OUTBOUND', `call_notes` text NOT NULL,
`owner_id` int(11) NOT NULL,
`call_duration` smallint(5) unsigned NOT NULL DEFAULT '0',
`modified_on` datetime DEFAULT NULL,
PRIMARY KEY (`phone_call_id`),
KEY `owner_id` (`owner_id`),
KEY `call_code_id` (`call_code_id`),
KEY `result_code_id` (`result_code_id`),
KEY `account_id` (`account_id`),
KEY `trigger_on` (`trigger_on`),
KEY `created_on` (`created_on`),
KEY `status` (`status`),
KEY `pcto` (`trigger_on`,`status`,`owner_id`))
ENGINE=InnoDB
AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T15:49:29.667

试试这个 sql

```
CREATE TABLE `phone_calls` (
`phone_call_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`account_id` int(11) unsigned NOT NULL,
`team_id` int(11) unsigned NOT NULL,
`call_code_id` int(11) unsigned NOT NULL,
`result_code_id` int(11) unsigned NOT NULL DEFAULT '0',
`trigger_on` datetime NOT NULL,
 `created_on` datetime NOT NULL,
`first_attempt_on` datetime DEFAULT NULL, 
`first_attempt_by` int(11) unsigned DEFAULT NULL,
`call_subject` char(100) NOT NULL,
`status` tinyint(1) NOT NULL COMMENT '0= purge, 1=active, 2 = completed', `workflow_generated` tinyint(1) NOT NULL DEFAULT '0' COMMENT '1= generated by system flow, 0 created by a user',
`last_attempt_on` datetime DEFAULT NULL,
`last_attempt_by` int(11) unsigned DEFAULT NULL,
`total_attempts` tinyint(3) unsigned NOT NULL DEFAULT '0',
`modified_by` int(11) unsigned DEFAULT NULL,
`last_call_id` int(11) unsigned NOT NULL,
`call_direction` enum('INBOUND','OUTBOUND') NOT NULL COMMENT 'INBOUND or OUTBOUND', `call_notes` text NOT NULL,
`owner_id` int(11) NOT NULL,
`call_duration` smallint(5) unsigned NOT NULL DEFAULT '0',
`modified_on` datetime DEFAULT NULL,
PRIMARY KEY (`phone_call_id`,`trigger_on`,`status`),
KEY `owner_id` (`owner_id`),
KEY `call_code_id` (`call_code_id`),
KEY `result_code_id` (`result_code_id`),
KEY `account_id` (`account_id`),
KEY `trigger_on` (`trigger_on`),
KEY `created_on` (`created_on`),
KEY `status` (`status`),
KEY `pcto` (`trigger_on`,`status`,`owner_id`))
PARTITION BY RANGE( YEAR(`trigger_on`) )
SUBPARTITION BY HASH( `status` )
SUBPARTITIONS 2(
  PARTITION p0 VALUES LESS THAN (1990),
  PARTITION p1 VALUES LESS THAN MAXVALUE
) 
```

[SQL 小提琴](http://www.sqlfiddle.com/#!2/7c3422)

# django - Django-SocialAuth 是否与 Django1.5 自定义用户兼容？

> ID：15646123
> 
> 赞同：1
> 
> 时间：2013-03-26T19:48:48.090
> 
> 标签：django, django-socialauth, django-1.5

我对 Django-SocialAuth 不是很有经验，但我想知道它是否因为新的 Django 1.5 自定义用户而不起作用，您可以在其中使用电子邮件而不是用户名登录。实现了自定义用户后，我只是尝试将 SocialAuth 实现到我现有的 Django 1.5 项目中。无法使用 Twitter 登录。

是否有任何 SocialAuth 专业人士在这里为我可能遗漏的内容提供建议？

我一直在看很多教程，但似乎没有任何效果：

**设置.py**

```
LOGIN_URL = '/login/'
LOGIN_REDIRECT_URL = '/logged-in/'
LOGIN_ERROR_URL    = '/login-error/'

SOCIAL_AUTH_COMPLETE_URL_NAME  = 'socialauth_complete'
SOCIAL_AUTH_ASSOCIATE_URL_NAME = 'socialauth_associate_complete'

AUTH_USER_MODEL = 'my_app.User'
SOCIAL_AUTH_USER_MODEL = 'my_app.User'

TWITTER_CONSUMER_KEY         = 'xx'
TWITTER_CONSUMER_SECRET      = 'xx'

AUTHENTICATION_BACKENDS = (                           
                           'social_auth.backends.twitter.TwitterBackend',
                           'django.contrib.auth.backends.ModelBackend',
                           )

TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",    
    "django.core.context_processors.request",    
    'social_auth.context_processors.social_auth_by_name_backends',
    'social_auth.context_processors.social_auth_backends',
    'social_auth.context_processors.social_auth_by_type_backends',
    'social_auth.context_processors.social_auth_login_redirect',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'widget_tweaks',
    'pipeline',
    'south',
    'social_auth',
    'my_app',    
) 
```

**网址.py**

```
url(r'', include('social_auth.urls'),name="twitter"),
(r'^login/$', custom_login), 
```

**登录.html**

```
<a href='{% url "socialauth_begin" "twitter" %}'>twitter</a> 
```

**错误信息：**

```
URLError at /login/twitter/
<urlopen error [Errno 110] Connection timed out>
Request Method: GET
Request URL:    http://127.0.0.1:8000/login/twitter/
Django Version: 1.5
Exception Type: URLError
Exception Value:    
<urlopen error [Errno 110] Connection timed out>
Exception Location: /usr/lib/python2.7/urllib2.py in do_open, line 1181 
```

**更新**

根据要求，这是完整的回溯。似乎令牌不被接受（unauthorized_token）。我已经仔细检查了 Twitter 密钥和密钥。一切似乎都是正确的。

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/login/twitter/

Django Version: 1.5
Python Version: 2.7.3
...
Traceback:
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/social_auth/decorators.py" in wrapper
  29\.             return func(request, request.social_auth_backend, *args, **kwargs)
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/social_auth/views.py" in auth
  31\.     return auth_process(request, backend)
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/social_auth/views.py" in auth_process
  97\.         return HttpResponseRedirect(backend.auth_url())
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/social_auth/backends/__init__.py" in auth_url
  620\.         token = self.unauthorized_token()
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/social_auth/backends/__init__.py" in unauthorized_token
  679\.         return Token.from_string(self.fetch_response(request))
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/social_auth/backends/__init__.py" in fetch_response
  701\.         response = dsa_urlopen(request.to_url())
File "/home/kave/vc/d-env/local/lib/python2.7/site-packages/social_auth/utils.py" in dsa_urlopen
  255\.     return urlopen(*args, **kwargs)
File "/usr/lib/python2.7/urllib2.py" in urlopen
  127\.     return _opener.open(url, data, timeout)
File "/usr/lib/python2.7/urllib2.py" in open
  401\.         response = self._open(req, data)
File "/usr/lib/python2.7/urllib2.py" in _open
  419\.                                   '_open', req)
File "/usr/lib/python2.7/urllib2.py" in _call_chain
  379\.             result = func(*args)
File "/usr/lib/python2.7/urllib2.py" in https_open
  1219\.             return self.do_open(httplib.HTTPSConnection, req)
File "/usr/lib/python2.7/urllib2.py" in do_open
  1181\.             raise URLError(err)

Exception Type: URLError at /login/twitter/
Exception Value: <urlopen error [Errno 110] Connection timed out> 
```

# javascript - window.location.hash 未创建浏览器历史记录条目

> ID：15646130
> 
> 赞同：5
> 
> 时间：2013-03-26T19:49:11.343
> 
> 标签：javascript, url, hash, browser-history

我正在运行一个简单的：

```
window.location.hash = "hash"; 
```

在页面加载后立即在 URL 中添加哈希。我明白了，mySite.com/aPage#hash。当我单击后退按钮时，我希望 url 更改回 mySite.com/aPage 而没有任何实际加载/返回。相反，我被带回到 mySite.com/aPage 之前的历史条目。

它运行良好，当我调用 window.location.hash 例如在用户触发的点击事件回调中。

我创建了一个测试： http: [//jsbin.com/idukiz/1/](http://jsbin.com/idukiz/1/) 查看代码：http: [//jsbin.com/idukiz/1/edit](http://jsbin.com/idukiz/1/edit)

只有在 setTimeout 函数中添加的最后一个哈希的行为与我预期的一样。任何想法如何在没有 setTimeout 的情况下使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:06:10.130

> 任何想法如何在没有 setTimeout 的情况下使其工作？

`<a>`一个用*href*动态创建的`#yourHash`，你[`dispatchEvent`](https://developer.mozilla.org/en-US/docs/DOM/element.dispatchEvent)可以点击鼠标。

```
window.onload = function () {
    location.hash = 'foo'; // no history item created, just to help visibility
    var a = document.createElement('a'),
        ev = document.createEvent("MouseEvents");
    a.href = '#bar'; // this will create history item
    ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    a.dispatchEvent(ev); // dispatch click
}; 
```

代码演示在[**这里**](http://jsbin.com/exikic/1/edit)。在谷歌浏览器 25 中测试。

# window - 语言和平台

> ID：15646131
> 
> 赞同：0
> 
> 时间：2013-03-26T19:49:14.080
> 
> 标签：window, frame, video-capture, video-processing, frame-rate

我对 Windows 平台真的很陌生。

我想知道你们是否可以给我一个关于从哪种语言开始以及哪个平台是最好的和易于学习和使用的提示

*   我将从事视频剖析、帧率测量。与视频帧和图像处理测量有关的一切。
*   性能是一个非常大的问题。所以我将无法使用 Java 或任何其他语言。我会表现得像 C/C++。
*   请给我参考，我也可以从哪里开始。

OpenCV 是一个不错的选择吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:16:01.720

OpenCV 绝对是一个很好的起点。该库是用 C++ 编写的，具有良好的 API，并且高度优化。OpenCV 的 cv::Mat 数据结构快速且易于使用，并允许您在矩阵上进行线性代数。该图书馆拥有庞大的用户社区，因此您应该能够轻松地在线找到帮助。您可以将其他库与 OpenCV 结合使用或实现您自己的自定义函数。

我还建议使用 GPU 的功能进行图像处理（在适当的时候）。OpenCV 有一些在 GPU 上实现的功能。这个数字可能会增加，因为库正在不断更新（更新版本大约每 3 到 4 个月发布一次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:05:44.483

是的，OpenCV 是非常好的开始选择。它非常容易学习，因为它被广泛使用并且可以在线获得很多帮助。您可以用最少的代码完成工作。

# sql - Silverlight - 来自 sql 数据库 vb.net 的分层树视图

> ID：15646137
> 
> 赞同：0
> 
> 时间：2013-03-26T19:49:30.973
> 
> 标签：sql, silverlight

我需要一些帮助来从 sql 数据库填充树视图，很简单，只需查看数千个示例并进行调整即可。问题是我已经尝试了大约一个星期来使用许多不同的样本，但我仍然无处可去。我不是程序员，所以很难理解每个人都认为理所当然的一些基础知识。我开发了一个 asp.net 网络应用程序，它可以跟踪项目及其管理人员审查的截止日期，该应用程序已完成且正在运行，但现在想移至 Silverlight 并收到执行委员的请求，将整个结构显示为树视图（当然，没问题，很容易）

这是场景：

**所有部门**

```
 Coffee Exco
       Project 1
            Action 1
            Action 2
       Project 2
            Action 1
  Credit Analytics
       Project 3
            Action 1 
```

目前我有 2 个表来存储树视图所需的数据。我可以毫无问题地获取数据，它试图将其放入我似乎无法正确处理的分层树视图中。

数据库中的样本数据：

```
Tab1ID|Department|Project|Deadline|Owner|Completed
 1 Coffee Exco     Project      3/31/2013Public          0
 2 Credit AnalyticsProject      4/20/2013Public          0
 3 Coffee Exco     Project       5/1/2013Public          0

Tab2ID|Project|Action|ActionDeadline|Progress
 1Project 1     Action 1                   10
 2Project 1     Action 2                    0
 3Project 2     Action 1                    0 
```

就像我说的，我尝试了这么多不同的样本，我现在不知道该怎么做，如果有人可以一步一步地引导一只老狗完成这个过程并假设他不是最聪明的，我将永远感激不尽。我不介意通过 XAML 或代码隐藏来实现。如果可能的话，我会很感激一个端到端的例子。

亲切的问候，雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:57:31.100

是的，我记得多年来一直在树视图上苦苦挣扎以使其正常工作。

我发现的诀窍是让您了解项目模板。这是我使用的一个例子：

```
 <controls:TreeView Name="TreeViewCategories"
                       Height="372" HorizontalAlignment="Left" Margin="12,12,0,0" VerticalAlignment="Top" Width="419">
        <controls:TreeView.ItemTemplate>
            <common:HierarchicalDataTemplate ItemsSource="{Binding ChildCategories}" >
                <TextBlock Text="{Binding Name, Mode=TwoWay}" Name="TxtCategoryName" />
            </common:HierarchicalDataTemplate>
        </controls:TreeView.ItemTemplate>
    </controls:TreeView> 
```

以上是类别的树视图（因此您有一个类别，在该子类别中，在子子类别中，然后继续）。请注意，它在每个级别都是相同的类——即顶级是“类别”类型，它们的子类别也是“类别”类型，并且继续下去。我稍后会回到这一点。

所以我们有外部树视图控件。然后在里面我们有项目模板。ItemsSource 是需要注意的地方。这告诉绑定在哪里寻找子对象。对我来说，每个类别都包含“ChildCategories”的集合。

最后在里面我有我希望项目显示的方式，这对我来说是一个文本块。

我给树视图一个 itemsSource，它只是顶级类别的集合，然后树视图将在其中显示它们及其子项。

我只使用了每个项目都属于同一类的树视图。这是一个相当直接的实现，因为上面的 ItemTemplate 在每个级别都是相同的 - 它总是在相关类别中寻找“ChildCategories”，无论它是顶级、第二级还是任何其他级别。

在您的情况下，情况会有所不同-您的最高级别将寻找项目。但是每个项目都会在内部寻找行动。

还回到顶部的表格结构 - 您在第一个表格中有部门，也许有一个单独的部门表会更清教徒。

您将拥有部门，在其中寻找项目。项目会在其中寻找行动。

树视图设置为在每个级别始终具有相同的类 - 每个级别使用相同的 ItemTemplate，因此查找相同的子集合（在我的情况下，它总是在我们正在查看的任何内容中查找“ChildCategories”）。

给你的想法：

1.  在你的项目周围放置某种形式的包装类，所以它总是一样的。

2.  尝试仅使用您当前的类，但在客户端添加属性，以便它们都有，例如，一个名为“Children”的集合和一个名为“DisplayNameForTreeView”的字符串。

我希望这可以帮助您解决您的特定问题，当然正是这个概念让我坚持了一段时间。

您可以尝试阅读以下内容： [如何在单个 Silverlight TreeView 节点中拥有多种类型的子节点？](https://stackoverflow.com/questions/4318206/how-can-i-have-multiple-types-of-children-in-a-single-silverlight-treeview-node) [http://social.msdn.microsoft.com/Forums/en-US/silverlightcontrols/thread/5d648c2f-f636-4093-9616-883fe43d5524/](http://social.msdn.microsoft.com/Forums/en-US/silverlightcontrols/thread/5d648c2f-f636-4093-9616-883fe43d5524/)

# cryptography - 禁用 diffie-hellman 或设置会话密钥

> ID：15646138
> 
> 赞同：1
> 
> 时间：2013-03-26T19:49:32.170
> 
> 标签：cryptography, public-key-encryption, openssh, diffie-hellman

您知道是否可以禁用 Diffie-Hellman 或为 openssh 设置固定会话密钥？实际上我想用 WireShark 分析流量，我需要解密它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:38:02.030

您使用 SSH 和 Wireshark 的选项非常有限。Wireshark[无法解密 SSH 流量](http://wiki.wireshark.org/SSH)，因为它使用从 DH 派生的会话密钥。OpenSSH 没有“固定会话密钥模式”，因为这真的很不安全，并且基本上不可能将密钥烤箱解析为开放通道。

您需要在客户端和服务器之间放置一个 MITM，记录解密流量的 pcap 文件以供wireshark 分析。 [Ettercap](http://ettercap.github.com/ettercap/)是一个很好的工具。

# android - 我可以在一个 XML 文件中定义多个 ColorStateLists 吗？

> ID：15646144
> 
> 赞同：0
> 
> 时间：2013-03-26T19:50:06.643
> 
> 标签：android, android-resources

在我的应用程序中，我有很多控件可以在更改可绘制状态时更改其文本颜色。Android 提供了一种方法 - 颜色状态列表。对于每个颜色状态列表，我必须创建一个单独的 XML 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:color="#398ede" android:state_pressed="true"/>
    <item android:color="#808080"/>
</selector>
```

有没有办法避免为每个颜色状态列表创建一个单独的文件并将它们全部定义在一个文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T02:53:02.010

您现在一定已经找到了答案，但是为了那些再次访问此链接的人，我们这样做了。

如果您有一个定义多种颜色的资源文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<color name="xBlack">#FF000000</color>
<color name="xYellow">#FFFFFF00</color>
</resources> 
```

您需要将此文件放在值下（而不是颜色）要访问您需要使用的值：

```
dummy_button_id.setBackgroundColor(getResources().getColor(R.color.xBlack)); 
```

# python - Python中使用行数作为输入变量来拆分大型文本文件的快速方法

> ID：15646148
> 
> 赞同：4
> 
> 时间：2013-03-26T19:50:16.500
> 
> 标签：python, performance, optimization, split

我正在使用行数作为变量来拆分文本文件。我编写此函数是为了将吐出的文件保存在临时目录中。每个文件有 400 万行，除了最后一个文件。

```
import tempfile
from itertools import groupby, count

temp_dir = tempfile.mkdtemp()

def tempfile_split(filename, temp_dir, chunk=4000000):
    with open(filename, 'r') as datafile:
        groups = groupby(datafile, key=lambda k, line=count(): next(line) // chunk)
        for k, group in groups:
            output_name = os.path.normpath(os.path.join(temp_dir + os.sep, "tempfile_%s.tmp" % k))
            for line in group:
                with open(output_name, 'a') as outfile:
                    outfile.write(line) 
```

主要问题是此功能的速度。为了将一个 800 万行的文件拆分为两个 400 万行的文件，我的 windows 操作系统和 Python 2.7 的时间超过 30 分钟

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T19:53:02.460

```
 for line in group:
            with open(output_name, 'a') as outfile:
                outfile.write(line) 
```

正在打开文件，并为组**中的每一行**写一行。这很慢。

相反，每组写一次。

```
 with open(output_name, 'a') as outfile:
                outfile.write(''.join(group)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:24:06.297

您可以直接在上下文管理器中使用[tempfile.NamedTemporaryFile ：](http://docs.python.org/2/library/tempfile.html#tempfile.NamedTemporaryFile)

```
import tempfile
import time
from itertools import groupby, count

def tempfile_split(filename, temp_dir, chunk=4*10**6):
    fns={}
    with open(filename, 'r') as datafile:
        groups = groupby(datafile, key=lambda k, line=count(): next(line) // chunk)
        for k, group in groups:
            with tempfile.NamedTemporaryFile(delete=False,
                           dir=temp_dir,prefix='{}_'.format(str(k))) as outfile:
                outfile.write(''.join(group))
                fns[k]=outfile.name   
    return fns                     

def make_test(size=8*10**6+1000):
    with tempfile.NamedTemporaryFile(delete=False) as fn:
        for i in xrange(size):
            fn.write('Line {}\n'.format(i))

    return fn.name        

fn=make_test()
t0=time.time()
print tempfile_split(fn,tempfile.mkdtemp()),time.time()-t0 
```

在我的电脑上，该`tempfile_split`部件在 3.6 秒内运行。它是 OS X。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:18:48.687

刚刚使用 800 万行文件（正常运行时间行）进行了快速测试，以运行文件的长度并将文件分成两半。基本上，一次通过获取行数，第二次通过进行拆分写入。

在我的系统上，执行第一次运行所需的时间约为 2-3 秒。要完成拆分文件的运行和写入，总时间不到 21 秒。

没有在 OP 的帖子中实现兰巴函数。下面使用的代码：

```
#!/usr/bin/env python

import sys
import math

infile = open("input","r")

linecount=0

for line in infile:
    linecount=linecount+1

splitpoint=linecount/2

infile.close()

infile = open("input","r")
outfile1 = open("output1","w")
outfile2 = open("output2","w")

print linecount , splitpoint

linecount=0

for line in infile:
    linecount=linecount+1
    if ( linecount <= splitpoint ):
        outfile1.write(line)
    else:
        outfile2.write(line)

infile.close()
outfile1.close()
outfile2.close() 
```

不，它不会赢得任何性能或代码优雅测试。:) 但是除了性能瓶颈之外，lambda 函数导致文件缓存在内存中并强制交换问题，或者文件中的行非常长，我不明白为什么需要 30分钟读取/拆分 800 万行文件。

编辑：

我的环境：Mac OS X，存储是单个 FW800 连接的硬盘驱动器。文件是全新创建的，以避免文件系统缓存的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T07:44:31.917

如果您在 linux 或 unix 环境中，您可以稍微作弊并使用`split`python 内部的命令。对我有用，而且速度也很快：

```
def split_file(file_path, chunk=4000):

    p = subprocess.Popen(['split', '-a', '2', '-l', str(chunk), file_path,
                          os.path.dirname(file_path) + '/'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    p.communicate()
    # Remove the original file if required
    try:
        os.remove(file_path)
    except OSError:
        pass
    return True 
```

# ios - 不同字体的UILabel

> ID：15646149
> 
> 赞同：0
> 
> 时间：2013-03-26T19:50:19.673
> 
> 标签：ios, objective-c

我有这个字符串，我想在标签中显示：

```
 NSString *criticsScore=[NSString stringWithFormat:@"%@\%%",[dict objectForKey:@"critics_score"]];

 _criticRating.text=criticsScore; 
```

我想设置一个小字体`\%%`和一个大字体`[dict objectForKey:@"critics_score"]];`
这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T20:13:55.903

您需要使用自己的控件来绘制一个`NSAttributedString`，例如[`TTTAttributedLabel`](https://github.com/mattt/TTTAttributedLabel).

```
NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"Blah1:blah-blah%d. Blah2:-%d%%", [currentCoupon.couponPrice intValue],[currentCoupon.couponDiscountPercent intValue]];
[str addAttribute:NSBackgroundColorAttributeName value:[UIColor clearColor] range:NSMakeRange(0,30)];/// Define Range here and also BackGround color which you want
[str addAttribute:NSForegroundColorAttributeName value:[UIColor blackColor] range:NSMakeRange(0,30)];/// Define Range here and also TextColor color which you want
[str addAttribute:NSFontAttributeName value:[UIFont fontWithName:@"HelveticaNeue-Bold" size:20.0] range:NSMakeRange(20, 10)];
lblWithText.attributedText = str; 
```

以上代码我来自[如何在标签内的单个字符串上使用多种字体样式？](https://stackoverflow.com/questions/14068962/how-to-use-multiple-font-stylings-on-a-single-string-inside-a-label)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:06:26.587

你必须用两个 UILabel 来做。您可以将第一个标签设置为除 \%% 之外的所有文本，并使用 sizeWithFont: 在该标签中的文本上获取该标签的大小。然后将第二个标签设置为从该标签帧的末尾开始。

因此，它看起来像这样，根据您想要标签的位置更改坐标：

```
NSString *criticsScore = [NSString stringWithFormat:@"%@",[dict objectForKey:@"critics_score"]];
NSString *str2 = @"\%%";

UIFont *criticsFont = [UIFont systemFontOfSize:[UIFont systemFontSize]];
UIFont *font2 = [UIFont systemFontOfSize:12.0];

//Get the sizes of each text string based on their font sizes.
CGSize criticsSize = [criticsScore sizeWithFont:criticsFont];
CGSize size2 = [str2 sizeWithFont:font2];

int x = 0;
int y = 0;
//The first label will start at whatever x and y are.
UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(x,y,criticsSize.width,criticsSize.height)];
[label1 setFont:criticsFont];
//Create a second label with the x starting at x+criticsSize.width;
//The y will start at y+criticsSize.height-size2.height, so that it will be aligned with the bottom.
//Change these to align it differently.
UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(x+criticsSize.width,y+criticsSize.height-size2.height,size2.width,size2.height)];
[label2 setFont:font2];
[self.view addSubview:label1];
[self.view addSubview:label2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:04:28.063

阅读这篇[文章](https://stackoverflow.com/questions/3786528/iphone-ipad-how-exactly-use-nsattributedstring)。大约是`NSAttributedString`s。我认为这就是你所需要的。

# android - 选择器不适用于android中的ImageButton

> ID：15646153
> 
> 赞同：1
> 
> 时间：2013-03-26T19:50:31.587
> 
> 标签：android, xml, selector, imagebutton

我的选择器代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:drawable="@drawable/mmb11" ></item>
    <item android:drawable="@drawable/mmb1"></item>

</selector> 
```

我的 xml 文件 4 布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/mmb"
    android:clickable="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="25dp"
        android:gravity="center"
        android:orientation="horizontal" 
        android:clickable="true">

        <ImageButton
            android:id="@+id/mmb1"
            android:layout_width="250dp"
            android:layout_height="80dp"
            android:background="@drawable/mmb1custom" 
            android:clickable="true"/>

        <ImageButton
            android:id="@+id/mmb5"
            android:layout_width="250dp"
            android:layout_height="80dp"
            android:background="@drawable/mmb5custom" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="115dp"
        android:gravity="center"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/mmb2"
            android:layout_width="250dp"
            android:layout_height="80dp"
            android:background="@drawable/mmb2custom" />

        <ImageButton
            android:id="@+id/mmb4"
            android:layout_width="250dp"
            android:layout_height="80dp"
            android:background="@drawable/mmb4custom" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="205dp"
        android:gravity="center"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/mmb3"
            android:layout_width="250dp"
            android:layout_height="80dp"
            android:background="@drawable/mmb3custom"
            android:gravity="center" />
    </LinearLayout>

</RelativeLayout> 
```

当按下它时，它并没有像它想象的那样改变图像......正如你所看到的，我尝试设置点击......但是没有工作，应用程序运行时没有错误......只是它没有显示按下选择器 4 按钮....提前谢谢...

# c# - 反编译的程序集 - 异常代码

> ID：15646155
> 
> 赞同：2
> 
> 时间：2013-03-26T19:50:41.663
> 
> 标签：c#, .net, events, decompiling, ilspy

我使用 ILSpy 反编译了一个程序集，其中一个类特别引起了我的注意：

```
public class CustomTextStream : NetworkStream
{
    private EventHandler<CustomEventArgs> someEvent;
    public event EventHandler<CustomEventArgs> SomePublicEvent
    {
        add
        {
            EventHandler<CustomEventArgs> eventHandler = this.someEvent;
            EventHandler<CustomEventArgs> eventHandler2;
            do
            {
                eventHandler2 = eventHandler;
                EventHandler<CustomEventArgs> value2 = 
                    (EventHandler<CustomEventArgs>)Delegate.Combine(eventHandler2, value);
                eventHandler = 
                    Interlocked.CompareExchange<EventHandler<CustomEventArgs>>(
                    ref this.someEvent, value2, eventHandler2);
            }
            while (eventHandler != eventHandler2);
        }
        remove
        {
            // similar stuff...
        }
    }
} 
```

在代码中，似乎私有委托用于触发实际事件：

```
if (something != null && somethingElse != 0)
{
    this.someEvent(this, new CustomEventArgs(someArg));
} 
```

问题：假设没有发生一些“编译/反编译魔术”，有人能猜出这个自定义访问器背后的想法是什么吗？我对IL不太熟悉，顺便说一句...

（旁注：应用程序是多线程的，并且显然利用了网络。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T20:03:58.930

这是编译器生成的新事件处理程序代码。它是在 C# 4 中引入的（C# 3 版本不同）

Interlocked.CompareExchange 将第一个参数与第三个参数进行比较，如果它们相等，则将第一个参数替换为第二个。这是一个线程安全的操作。循环用于在分配变量 eventHandler2 之后检查之前，另一个线程更改此委托的情况。在这种情况下，Interlocked.CompareExchange 不执行交换，循环条件不评估为真，并进行下一次尝试。

C# 3 在事件处理程序中生成了简单的代码：

```
add { lock(this) { changed = changed + value; } } 
```

其性能较低并且可能引入死锁。

关于这个主题有很多文章：

[事件在 C# 4 中进行了一些大修](http://blogs.msdn.com/b/cburrows/archive/2010/03/05/events-get-a-little-overhaul-in-c-4-part-i-locks.aspx)

[事件在 C# 4 中进行了一些大修，第二部分](http://blogs.msdn.com/b/cburrows/archive/2010/03/08/events-get-a-little-overhaul-in-c-4-part-ii-semantic-changes-and.aspx)

# jquery - 有一个奇怪的 JSON 解析问题

> ID：15646156
> 
> 赞同：1
> 
> 时间：2013-03-26T19:50:42.740
> 
> 标签：jquery, ajax, json

我知道之前发布了很多 JSON 解析问题，但没有一个对我有帮助。

I am sending JSON back to my page from PHP via ajax. According to JSONLint.com I am using valid JSON.

My issue is everytime I go to access properties of my object they come back as undefined. I `console.log` the json object and it comes out fine. I am confused!

## PHP

```
 $returnData[] = array("trainingAccess" => "$trainingAccess", 
    "destinationUrl" => "$destinationUrl", "errorMessage" => "$errorMessage");  

  echo json_encode($returnData); 
```

## JS

```
 $.ajax({  
        type: "POST",  
        url: "submit_login.php",
        data: {
          userName: $("#userName").val(),
          password: $("#password").val()
        },
        success: function(data) {
          var obj = JSON.parse(data);

          console.log(obj);//Works
          alert(obj.destinationURL);//Doesn't work.
        } 
```

## Solution

I was making an array of arrays in PHP.

`$returnData = array("trainingAccess" => "$trainingAccess", "destinationUrl" => "$destinationUrl", "errorMessage" => "$errorMessage");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:59:36.073

该`ajax`方法将猜测结果的数据类型，如果它带有正确的内容类型，则可能会对其进行解析。

指定数据类型，以便您确定发生了什么，然后您知道数据已经为您解析：

```
 $.ajax({  
    type: "POST",  
    url: "submit_login.php",
    data: {
      userName: $("#userName").val(),
      password: $("#password").val()
    },
    dataType: 'json',
    success: function(data) {
      console.log(data);
      alert(data[0].destinationUrl);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:53:04.073

尝试

```
alert(obj[0].destinationUrl); 
```

大写小写问题。

编辑以显示实际解决方案供其他人查看...

# php - Merging arrays even if they don't exist with PHP

> ID：15646161
> 
> 赞同：3
> 
> 时间：2013-03-26T19:51:08.107
> 
> 标签：php, arrays, merge

I currently have 3 arrays, $A, $B and $C that I need to merge into a singe array called $allArrays.

I know I can do this with array_merge

```
$allArrays = array_merge($A,$B, $C); 
```

But sometimes not all 3 arrays will exist. Depending on if a user of this site I am working on activates an option that would create an array, I sometimes might only end up with 1 of the three, 2 of the three or maybe all 3\.

So if user 1 actives an option that creates array $A and $B, while user 2 actives an option that creates array $A and $C, regardless one, both, or all three need to be merged to $allArrays.

How can I do this? Currently, if I don't active all three arrays, allArrays comes back blank and empty, 0\.

I feel like I could easily achieve this with multiple if statements to see if all arrays exists but I feel like that's a bit excessive. I am new with PHP so looking into what to search for has been difficult.

Thanks for any help!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T19:59:23.147

在合并之前尝试简单的类型转换..

```
$A = $B = $C = null;
$allArrays = array_merge((array) $A, (array) $B, (array) $C); 
```

# facebook - Social Plugin Comments Shows Wrong Count

> ID：15646162
> 
> 赞同：0
> 
> 时间：2013-03-26T19:51:16.227
> 
> 标签：facebook, social, facebook-comments

The Comments plugin is showing a count of 14 comments. 7 comments show. Clicking "Click here for 4 more" does nothing. Is this a bug or have we overlooked something?

```
<div class="fb-comments" data-href="http://climatecontrolprofessionals.com/trust-climate-control" data-num-posts="10" data-width="610"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:05:08.110

大约一周后，它开始显示与评论​​数量相匹配的计数。一定是他们的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:53:37.783

我有一个怀疑而不是一个灌篮可证明的答案。Facebook 评论社交插件[不允许每个 Facebook 用户发表公开评论](https://www.facebook.com/help/community/question/?id=424116631001496)。可能对页面进行了一些无法公开查看的评论。

# c# - Change value of Reference type

> ID：15646164
> 
> 赞同：1
> 
> 时间：2013-03-26T19:51:32.860
> 
> 标签：c#

Please consider this code

```
some v1=new some();
v1.x=10;
some v2=v1;
v1.x=15;
Console.Write(v2.x);//Show 15 
```

When I change x property on v1 why change value of x on v2?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:53:35.400

因为只有一个对象实例。

变量`v1`和`v2`是对同一对象的引用。当您分配`v1`给`v2`您时，您不会获得对象的新实例，您只需复制引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:54:10.357

因为`v1`是对类型对象的引用`some`。当您声明`some v2 = v1;`您创建此引用的副本时，而不是实际对象的副本。要创建一个新对象，您需要通过运行构造函数再次实例化该类`some v2 = new some();`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:07:46.173

确切的行为取决于变量类型，更准确地说取决于该类型是值类型还是引用类型。

这`Point`是一个`struct`，即一个值类型：

```
var p1 = new System.Drawing.Point(10, 20);
var p2 = p1; // This creates a copy of p1.
p1.X = 15;
Console.WriteLine(p1.X); // ==> 15
Console.WriteLine(p2.X); // ==> 10 
```

然而，这个声明声明了一个引用类型（类总是引用类型）：

```
public class Vector
{
    public Vector(double x, double y)
    {
        X = x;
        Y = y;
    }

    public double X { get; set; }
    public double Y { get; set; }
} 
```

这将发生：

```
var v1 = new Vector(10.0, 20.0);
var v2 = v1; // Now the reference v2 points to the same object as v1.
v1.X = 15.0;
Console.WriteLine(v1.X); // ==> 15.0
Console.WriteLine(v2.X); // ==> 15.0 
```

引用类型的变量包含对由 动态创建的对象的引用`new`。另一方面，`new`关键字仅定义 a 的值`struct`，但不创建`struct`，因为变量包含对象本身。

* * *

在 Visual Studio 中更改值类型的显示颜色是个好主意：

菜单：工具 > 选项 ![在此处输入图像描述](../Images/97ae345fb8619d1e8e8feb9a998577bf.png)

您也可以更改委托、接口和枚举的显示颜色。像这样你会立即看到它们不是 VS 编辑器中的（普通）类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T19:52:23.637

因为 v2 有对 v1 对象的引用，所以为什么

v1 和 v2 都指向同一个对象，即同一个对象引用。

```
some v2=v1; 
```

它没有复制它只是复制参考

要创建对象的副本，请参考以下答案：[Creating a copy of an object in C#](https://stackoverflow.com/questions/6569486/creating-a-copy-of-an-object-in-c-sharp)

# gcc - CMake (cotire) precompiled headers and disable warnings

> ID：15646166
> 
> 赞同：6
> 
> 时间：2013-03-26T19:51:39.000
> 
> 标签：gcc, cmake, warnings, suppress-warnings, precompiled-headers

I'm using cotire([https://github.com/sakra/cotire](https://github.com/sakra/cotire)) plugin for CMake, which handles several nice things related to compilation speedup(for example precompiled headers).

The problem is that I include several headers (Boost related or Protobuf) as system ones - in which warnings are disabled. After they are being precompiled I've got a lot of warnings.

Can I disable warnings in precompiled headers?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T13:12:02.213

I don't think there's a built in way to do this, we modified the cotire function cotire_add_pch_compilation_flags (line 1244 cotire.cmake version 1.5.1) to add the "-w" flag when compiling the precompiled header. We changed the GNU|CLang section to read

```
elseif (_compilerID MATCHES "GNU|Clang")
        # GCC / Clang options used
        # -x specify the source language
        # -c compile but do not link
        # -o place output in file
        set (_xLanguage_C "c-header")
        set (_xLanguage_CXX "c++-header")
        if (_flags)
            # append to list
            list (APPEND _flags "-x" "${_xLanguage_${_language}}" "-w" "-c" "${_prefixFile}" -o "${_pchFile}")
        else()
            # return as a flag string
            set (_flags "-x ${_xLanguage_${_language}} -w -c \"${_prefixFile}\" -o \"${_pchFile}\"")
        endif() 
```

This suppresses all warnings for us, we have a lot of warnings turned on - including -Werror, so it was an essential change!

# algorithm - Create binary tree from inorder and post order traversal

> ID：15646167
> 
> 赞同：0
> 
> 时间：2013-03-26T19:51:41.323
> 
> 标签：algorithm, tree, binary-tree, tree-traversal, inorder

我试图熟悉在给定中序和后序遍历的情况下创建树的问题。我编写了以下代码，但有些事情出了问题，我无法找出。有人可以帮我吗？

样本 i/p ：

int in[] = {4,10,3,1,7,11,8,2}; int post[] = {4,1,3,10,11,8,2,7};

```
public static TreeNode buildInorderPostorder( int post[], int n, int offset,Map<Integer,Integer> indexMap,int size) {     
      if (size <= 0) return null;
      int rootVal = post[n-1];
      int i = (indexMap.get(rootVal) - offset);
      TreeNode root = new TreeNode(rootVal);
      root.setLeft(buildInorderPostorder( post, i, offset,indexMap,i-offset));
      root.setRight(buildInorderPostorder(post, n-1, offset+i,indexMap,n-1-i));
      return root;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:03:48.213

`root.setRight`似乎是错误的。offset 不应该是`offset+i`，应该是`offset+i+1`：

```
root.setRight(buildInorderPostorder(post, n-1, offset+i+1,indexMap,n-1-i)); 
```

# jqplot - jqplot 图例事件处理程序单击

> ID：15646169
> 
> 赞同：0
> 
> 时间：2013-03-26T19:51:43.637
> 
> 标签：jqplot

嗨，我正在尝试将事件处理程序插入到 jqplot 图例中的每一行，例如

$('#chart3').bind('jqplotDataClick', function (ev, seriesIndex, pointIndex, data) { alert(1);});); 但是对于图例行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:11:46.027

这对我有用：

```
$('#chart-id tr.jqplot-table-legend').bind('click', function() {
    alert($(this).children().last().text());
}); 
```

所以这将做的是`alert`系列的名称。

# php - 如何确定一个字符串是否是 PHP 正则表达式？

> ID：15646170
> 
> 赞同：1
> 
> 时间：2013-03-26T19:51:44.437
> 
> 标签：php, regex, validation

有没有办法做到这一点，而不使用错误控制运算符`@preg_match`？:)

因为 PHP 要求模式被包裹在一个字符之间，所以我想这样做：

1.  获取第一个字符。
2.  查找该字符在字符串中的最后一次出现：

    ```
    $rpos = strrpos($string, $string[0]); 
    ```

3.  获取修饰符列表：

    ```
    $mods = substr($rpos, strlen($string)); 
    ```

4.  [查明此列表中是否有任何无效修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)。如果有返回 false，否则正则表达式似乎是有效的。

这个解决方案的可靠性如何？有没有更好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:59:03.087

我总是在 Symfony2 Finder 组件中使用[这个函数：](https://github.com/symfony/Finder/blob/master/Expression/Regex.php#L64-74)

```
if (preg_match('/^(.{3,}?)([imsxuADU]*)$/', $expr, $m)) {
    $start = substr($m[1], 0, 1);
    $end   = substr($m[1], -1);

    if (($start === $end && !preg_match('/[*?[:alnum:] \\\\]/', $start)) || ($start === '{' && $end === '}')) {
        // It's a regex!
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:07:04.440

在 commets 中已经以简短的方式描述了它。[`filter_var`](http://php.net/filter-var)但是您可以使用方法检查正则表达式是否可以

```
$string = "String to match";

if (filter_var($string, FILTER_VALIDATE_REGEXP, array("options" => array("regexp" =>  "/abc/")))) {
    echo "Regex is OK";
} else {
    echo "Regex not okay";
} 
```

# javascript - 使用 Jquery 悬停鼠标时创建标题滑动

> ID：15646172
> 
> 赞同：2
> 
> 时间：2013-03-26T19:51:47.243
> 
> 标签：javascript, jquery, html

我有 h2 标签，宽度只有 100px，但 h2 标签内的文本内容超过 100px，我想显示文本内容只出现在一行中。我想让它像在 brazzers.com 上一样，当用户将鼠标悬停在帖子标题上时，帖子的长标题将滑动以显示所有内容。有没有办法使用 jquery 创建它？对不起我的新手问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:57:44.063

似乎这是你可以用 CSS 和悬停行为做的事情

```
#test {
    width:30px;
    overflow:hidden;
    white-space:nowrap;
}
#test:hover
{
    overflow:visible;
} 
```

[http://jsfiddle.net/tYEfs](http://jsfiddle.net/tYEfs)

*另外，也许参考链接上的 nsfw 警告？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:58:26.717

我会创建一个带有溢出的 div：隐藏，并且在这个 div 内部将是 h2 标记，其位置设置为相对或绝对（取决于您的结构和预期行为）。一旦鼠标悬停在 div 上，我将使用[http://api.jquery.com/animate/](http://api.jquery.com/animate/)将 css“left”属性设置为负值。

PS：没有查看示例，由于正在工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:05:20.870

请试试这个例子：

[http://jsfiddle.net/QKstB/2/](http://jsfiddle.net/QKstB/2/)

这是一个脚本：

```
var textWidth = $('h1 nobr').outerWidth(),
    totalWidth = $('h1').outerWidth(),
    diff = totalWidth - textWidth;

$('h1').hover( function() {
    $('h1 nobr').animate({ 'margin-left': diff }, 5000, function() { 
        $(this).css('margin-left', 0)
    });
}, function() { 
    $('h1 nobr').stop(true, true);
}); 
```

# java - MySQL和Java - 插入表时抛出异常

> ID：15646174
> 
> 赞同：0
> 
> 时间：2013-03-26T19:52:10.540
> 
> 标签：java, mysql, sql, database

我是新的 MySQL 用户，试图编写通过 Java 操作数据库的程序。

`users`用以下属性命名表`| USERNAME | EMAIL | ROLE |`，其中 `USERNAME`is`PRIMARY KEY`和其余属性是`NOT NULL`。

可以说我这样做`INSERT INTO users`了，因为`USERNAME`MySQL 上有主键约束应该抛出错误。这个错误将如何抛出以及如何在 JAVA 中捕获它？我是否需要编写存储过程来引发错误或`INSERT INTO`语句也具有此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:51:16.563

如果违反了主键，`SQLException`则会抛出一条消息，其中包含违反的约束名称。您的异常处理可能如下所示：

```
try {
    //do the insert
} catch (SQLException e) {
    if(e.getMessage().contains("MY_CONSTRAINT_NAME")) {
        //duplicate key
    } else {
        //some other error
    }
} 
```

另一种方法是检查`SQLException.getSQLState()`或`SQLException.getErrorCode()`。

我建议使用[Spring JDBC](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html)，它负责[SQLException 转换](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html#jdbc-SQLExceptionTranslator)，通常会减少您需要编写的 JDBC 代码量。

# mysql - 复杂的 CakePHP 查询重构

> ID：15646179
> 
> 赞同：0
> 
> 时间：2013-03-26T19:52:32.957
> 
> 标签：mysql, sql, cakephp, model

我刚刚继承了一个项目，我需要重新编写一些代码，以便无限滚动条的分页仍然正常工作。

现在，代码正在获取所有类别及其产品和列表。我需要对其进行编辑，以便仅返回具有有效列表的产品的类别。

这是最终起作用的代码：

```
 $catData = $this->find('all',array(
            'conditions' => array(
                'Indexer.type' => 'Category',
                'Listing.listing_id IS NOT NULL'
            ),
            'joins' => array(
                array('table' => 'peeka_product_category_link',
                    'alias' => 'Link',
                    'type' => 'LEFT',
                    'conditions' => array(
                        'Link.category_id = Category.category_id'
                    )
                ),
                array('table' => 'peeka_products',
                    'alias' => 'Product',
                    'type' => 'LEFT',
                    'conditions' => array(
                        'Product.product_id = Link.product_id'
                    )
                ),
                array('table' => 'peeka_listings',
                    'alias' => 'Listing',
                    'type' => 'LEFT',
                    'conditions' => array(
                        'Listing.product_id = Product.product_id',
                        'Listing.listing_end_date >=' => $date, 
                        'Listing.listing_start_date <=' => $date,
                        "Listing.listing_status = 'Active'"
                    )
                ),
            ),
            'order' => 'Category.category_name ASC',
            'limit' => $set_limit,
            'fields' => array('Category.category_id, Category.category_name, Indexer.url'),
            'group' => 'Category.category_id',
            'recursive' => 0
        )); 
```

**编辑：**感谢戴夫，这正在工作，我只是想发布它以供将来参考。也许它会帮助别人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:31:06.210

> “...仅返回具有有效列表的产品的类别。”
> 
> “...一种将这三个查询组合为一个的方法，以便第一个 Category->find() 函数检索所有有效数据。”

要检索数据并根据关联模型的字段对其进行限制，您需要使用[CakePHP 的 JOIN](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。

如果不为您编写代码，很难进一步回答您的问题，所以 - 尝试 JOIN，然后如果您有任何问题，请回来询问另一个更具体的问题。

# entity-framework - 如何避免规则形式的业务逻辑贫乏的领域模型

> ID：15646184
> 
> 赞同：7
> 
> 时间：2013-03-26T19:53:09.310
> 
> 标签：entity-framework, domain-driven-design, entity, business-logic, anemic-domain-model

我正在设计一个具有简单实体框架支持的域对象的系统，该对象具有我需要根据一系列规则更新的字段 - 我想逐步实现这些规则（以敏捷风格）并且当我使用 EF 时我持怀疑态度关于将每个规则放入域对象中。但是，我想避免编写“程序代码”和使用贫血的域模型。这一切都需要可测试。

例如，对象是：

```
class Employee { 
 private string Name; 
 private float Salary; 
 private float PensionPot;
 private bool _pension;
 private bool _eligibleForPension;

} 
```

我需要建立一些规则，例如“如果 Salary 高于 100,000 并且 _eligibleForPension 为 false，则将 _eligibleForPension 设置为 true”和“如果 _pension 为 true，则将 _eligibleForPension 设置为 true”。

大约有 20 条这样的规则，我正在寻找是否应该在 Employee 类或类似 EmployeeRules 类中实现它们的建议？我的第一个想法是为从“Rule”继承的每个规则创建一个单独的类，然后将每个规则应用于 Employee 类，可能使用访问者模式，但我必须将所有字段暴露给规则才能做到这一点感觉不对。虽然在 Employee 类上设置每条规则也感觉不太正确。这将如何实施？

第二个问题是实际的员工是支持数据库的实体框架实体，所以我不乐意为这些“实体”添加逻辑 - 特别是当我需要模拟对象以对每个规则进行单元测试时。如果他们有我在同一个对象上测试的规则，我怎么能嘲笑他们？

我一直在考虑在应用规则之前使用 AutoMapper 转换为更简单的域对象，但随后需要自己管理对字段的更新。对此也有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T20:20:06.437

一种方法是使规则成为`Employee`. 这种方法的好处是字段可以保持私有。此外，规则的调用可以由 Employee 类本身强制执行，确保它们总是在需要时被调用：

```
class Employee
{
    string id;
    string name;
    float salary;
    float pensionPot;
    bool pension;
    bool eligibleForPension;

    public void ChangeSalary(float salary)
    {
        this.salary = salary;
        ApplyRules();
    }

    public void MakeEligibleForPension()
    {
        this.eligibleForPension = true;
        ApplyRules(); // may or may not be needed
    }

    void ApplyRules()
    {
        rules.ForEach(rule => rule.Apply(this));
    }

    readonly static List<IEmployeeRule> rules;

    static Employee()
    {
        rules = new List<IEmployeeRule>
        {
            new SalaryBasedPensionEligibilityRule()
        };
    }

    interface IEmployeeRule
    {
        void Apply(Employee employee);
    }

    class SalaryBasedPensionEligibilityRule : IEmployeeRule
    {
        public void Apply(Employee employee)
        {
            if (employee.salary > 100000 && !employee.eligibleForPension)
            {
                employee.MakeEligibleForPension();
            }
        }
    }
} 
```

这里的一个问题是 Employee 类必须包含所有的规则实现。这不是一个主要问题，因为这些规则体现了与员工养老金相关的业务逻辑，因此它们确实属于同一类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T05:20:25.753

业务规则通常是一个有趣的话题。聚合/实体不变量和业务规则之间肯定存在差异。业务规则可能需要外部数据，我不同意更改聚合/实体的规则。

您应该考虑规则的规范模式。该规则应该基本上只返回它是否被破坏，并可能带有某种描述。

在您的示例`SalaryBasedPensionEligibilityRule`中，如 eulerfx 使用的那样，可能需要一些`PensionThreshold`. 该规则确实看起来更像是一项任务，因为该规则实际上并未检查实体的任何有效性。

所以我建议规则是一种决策机制，任务是为了改变状态。

话虽如此，您可能想在这里向实体寻求建议，因为您可能不想公开状态：

```
public class Employee
{
    float salary;
    bool eligibleForPension;

    public bool QualifiesForPension(float pensionThreshold) 
    {
        return salary > pensionThreshold && !eligibleForPension;
    }

    public void MakeEligibleForPension()
    {
        eligibleForPension = true;
    }
} 
```

这符合命令/查询分离的想法。

如果您直接从您的 ORM 对象构建并且不想或不能包含所有行为，那没关系 --- 但它肯定会有所帮助:)

# wordpress - 使用 wp_mail 显示内联图像附件

> ID：15646187
> 
> 赞同：9
> 
> 时间：2013-03-26T19:53:19.657
> 
> 标签：wordpress, email, base64, attachment

我有个问题。

我想将图像附加到电子邮件并内联显示它，以及其他一些 php 生成的内容。问题是我不知道如何使用 wp_mail 用来附加的内联文件附件数组。

我的解决方案是将图像编码为 base64 并将它们内联到 HTML 中，如下所示：

```
<img alt="The Alt" src="data:image/png;base64,*etc*etc*etc" /> 
```

但问题是 Gmail / Outlook 从图像中删除了 src 数据。所以它降落为

```
<img alt="The Alt" /> 
```

任何线索要修改什么（与base64一起使用的标头）或如何使用附件将它们嵌入内联？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-15T13:35:08.883

`wp_mail`使用`PHPMailer`类。此类具有内联附件所需的所有功能。要在 wp_mail() 发送电子邮件之前更改 phpmailer 对象，您可以使用 filter `phpmailer_init`。

```
$body = '
Hello John,
checkout my new cool picture.
<img src="cid:my-cool-picture-uid" width="300" height="400">

Thanks, hope you like it ;)'; 
```

这是一个如何在您的电子邮件正文中插入图片的示例。

```
$file = '/path/to/file.jpg'; //phpmailer will load this file
$uid = 'my-cool-picture-uid'; //will map it to this UID
$name = 'file.jpg'; //this will be the file name for the attachment

global $phpmailer;
add_action( 'phpmailer_init', function(&$phpmailer)use($file,$uid,$name){
    $phpmailer->SMTPKeepAlive = true;
    $phpmailer->AddEmbeddedImage($file, $uid, $name);
});

//now just call wp_mail()
wp_mail('test@example.com','Hi John',$body); 
```

就这样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-13T22:58:36.533

如果您收到意外的 T_FUNCTION 错误，这是由于 PHP 版本 < 5.3。在这种情况下，创建一个函数以更传统的方式执行此操作：

```
function attachInlineImage() {  
  global $phpmailer;  
  $file = '/path/to/file.jpg'; //phpmailer will load this file  
  $uid = 'my-cool-picture-uid'; //will map it to this UID  
  $name = 'file.jpg'; //this will be the file name for the attachment  
  if (is_file($file)) {  
    $phpmailer->AddEmbeddedImage($file, $uid, $name);  
  }  
}  

add_action('phpmailer_init','attachInlineImage'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-26T12:44:21.073

我需要一种更好的方式，因为我一步发送多封邮件，并非所有邮件都应该具有相同的嵌入图像。所以我使用康斯坦丁的这个解决方案，但我的修改:-)

```
wp_mail('test@example.org', 'First mail without attachments', 'Test 1');

$phpmailerInitAction = function(&$phpmailer) {
    $phpmailer->AddEmbeddedImage(__DIR__ . '/img/header.jpg', 'header');
    $phpmailer->AddEmbeddedImage(__DIR__ . '/img/footer.png', 'footer');
};
add_action('phpmailer_init', $phpmailerInitAction);
wp_mail('test@example.org', 'Mail with embedded images', 'Example <img src="cid:header" /><br /><img src="cid:footer" />', [
    'Content-Type: text/html; charset=UTF-8'
], [
    __DIR__ . '/files/terms.pdf'
]);
remove_action('phpmailer_init', $phpmailerInitAction);

wp_mail('test@example.org', 'Second mail without attachments', 'Test 2'); 
```

第一个`wp_mail`将没有附件。第二个`wp_mail`将包含嵌入的图像。第三个`wp_mail`将没有附件。

现在工作正常

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-04T09:40:10.373

我创建了这个类来管理将图像添加到电子邮件正文并自行清理。

此外，如果您定义`SENDGRID_PASSWORD`，它将使用 Sendgrid 而不是您的服务器来发送电子邮件

本文是有关如何使用 wordpress 在电子邮件正文中嵌入图像的分步指南

[https://codewriteups.com/embed-images-in-email-body-using-wp_mail-and-phpmailer](https://codewriteups.com/embed-images-in-email-body-using-wp_mail-and-phpmailer)

```
<?php

/*
 * Send HTML Emails with inline images
 */
class Custom_Mailer
{
    public $email_attachments = [];

    public function send($to, $subject, $body, $headers, $attachments)
    {
        /* Used by "phpmailer_init" hook to add attachments directly to PHPMailer  */
        $this->email_attachments = $attachments;

        /* Setup Before send email */
        add_action('phpmailer_init', [$this, 'add_attachments_to_php_mailer']);
        add_filter('wp_mail_content_type', [$this, 'set_content_type']);
        add_filter('wp_mail_from', [$this, 'set_wp_mail_from']);
        add_filter('wp_mail_from_name', [$this, 'wp_mail_from_name']);

        /* Send Email */
        $is_sent = wp_mail($to, $subject, $body, $headers);

        /* Cleanup after send email */
        $this->email_attachments = [];
        remove_action('phpmailer_init', [$this, 'add_attachments_to_php_mailer']);
        remove_filter('wp_mail_content_type', [$this, 'set_content_type']);
        remove_filter('wp_mail_from', [$this, 'set_wp_mail_from']);
        remove_filter('wp_mail_from_name', [$this, 'wp_mail_from_name']);

        return $is_sent;
    }

    public function add_attachments_to_php_mailer(&$phpmailer)
    {
        $phpmailer->SMTPKeepAlive=true;

        /* Sendgrid */
        if (defined('SENDGRID_PASSWORD')) {
            $phpmailer->IsSMTP();
            $phpmailer->Host="smtp.sendgrid.net";
            $phpmailer->Port = 587;
            $phpmailer->SMTPAuth = true;
            $phpmailer->SMTPSecure = 'tls';
            $phpmailer->Username="apikey";
            $phpmailer->Password = SENDGRID_PASSWORD;   /* api key from sendgrid */
        }

        /* Add attachments to mail */
        foreach ($this->email_attachments as $attachment) {
            if (file_exists($attachment['path'])) {
                $phpmailer->AddEmbeddedImage($attachment['path'], $attachment['cid']);
            }
        }
    }

    public function set_content_type()
    {
        return "text/html";
    }

    public function set_wp_mail_from($email)
    {
        //Make sure the email is from the same domain
        //as your website to avoid being marked as spam.
        return strip_tags(get_option('admin_email'));
    }

    public function wp_mail_from_name($name)
    {
        return get_bloginfo('name');
    }
} 
```

## 用法：

```
/* Set mail parameters */
$to = 'test@example.com';
$subject = 'Inline Img';
$body = '<h1>Image:</h1> <img src="cid:my_img_cid"/>';
$headers = "";
$my_attachments = [
    [
        "cid" => "my_img_cid", /* used in email body */
        "path" => plugin_dir_path(__FILE__) . '/my_img.png',
    ],
];

$custom_mailer = new Custom_Mailer();
$custom_mailer->send($to, $subject, $body, $headers, $my_attachments); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-24T09:27:35.837

将以下代码添加到 functions.php 中，以将您的图像包含在所有电子邮件中（如签名徽标）。

```
function attachInlineLogo() {
    global $phpmailer;
    if (!( $phpmailer instanceof PHPMailer )) {
        require_once ABSPATH . WPINC . '/class-phpmailer.php';
        require_once ABSPATH . WPINC . '/class-smtp.php';
        $phpmailer = new PHPMailer(true);
    }
    $strFilePath = 'ABSOLUTE LOGO PATH';
    $strFileUID  = 'UNIQUE-UID'; //UID TO USE IN HTML TEMPLATE
    $strFileName = 'LOGO NAME';
    if (is_file($strFilePath)) {
        $phpmailer->SMTPKeepAlive = true;
        $phpmailer->AddEmbeddedImage($strFilePath, $strFileUID, $strFileName);
    }
}

add_action('phpmailer_init', 'attachInlineLogo'); 
```

在您的 HTML 代码中

```
<img src='cid:UNIQUE-UID' /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-27T13:00:37.557

AddEmbeddedImage 只接受两个参数，因此请确保不要像示例中那样包含 $name 参数。

# java - 关于字符串实例化的最佳实践好奇心

> ID：15646188
> 
> 赞同：3
> 
> 时间：2013-03-26T19:53:20.190
> 
> 标签：java, string, instantiation

我正在阅读一些关于 Java 最佳实践的建议，我得到了以下让我感到好奇的想法

此外，无论何时你想实例化一个 String 对象，都不要使用它的构造函数，而总是直接实例化它。

例如：

```
//slow instantiation
String slow = new String("Yet another string object");

//fast instantiation
String fast = "Yet another string object"; 
```

为什么是这样？'fast' 不会调用默认的字符串构造函数吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T19:57:55.737

当您使用时，`new`您会得到一个*新的字符串对象*，但如果您使用*字符串文字*，[请参见此处](http://en.wikipedia.org/wiki/String_interning)：

> 在计算机科学中，字符串实习是一种仅存储每个不同字符串值的副本的方法，该副本必须是不可变的。驻留字符串使某些字符串处理任务更节省时间或空间，但代价是创建或驻留字符串时需要更多时间。不同的值存储在字符串实习池中。每个字符串的单个副本称为其“实习生”，通常由字符串类的方法查找，例如 Java 中的 String.intern()。Java 中的所有编译时常量字符串都使用此方法自动进行实习。

如果你这样做：

```
String a = "foo";
String b = "foo"; 
```

那么`a==b`是*真的*！

只有在没有被实习的情况下才会*创建一个字符串。*一个对象将在第一次创建，并将存储在一个称为*字符串常量池*的地方。

但是使用`new`which 将为每个字符串创建一个不同的对象，将输出*false*。

```
String a = new String("foo");
String b = new String("foo"); 
```

现在`a==b`是*假*的。

因此，当使用文字时，它更容易阅读，而且编译器更容易进行优化。所以..尽可能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:05:07.750

JVM 维护一个`String`用于优化的文字池。当您`String`使用构造函数创建一个时，

```
String s1 = new String("foo"); 
```

创建了一个新`String`对象，并将文字`"foo"`添加到池中。在此之后，无论何时您`"foo"`在代码中使用，都会`"foo"`引用池中的项目并且不会创建新对象。由于`String`是不可变的，因此不会产生任何问题。

因此，当您`String`使用“快捷方式”创建一个时：

```
String s2 = "foo" 
```

JVM查看池，如果`"foo"`已经存在，它将`s2`引用池中的项目。

这是可能影响性能的一个主要区别：构造函数总是创建一个对象，如果池中尚不存在该字面量，则将其添加到池中。快捷方式引用池中的项目，并且仅当 liuteral 不在池中时才创建新对象。

# php - 仅在 WordPress 中使用时与独立 Ajax CRUD 脚本冲突 - 无法更新值

> ID：15646189
> 
> 赞同：0
> 
> 时间：2013-03-26T19:53:29.643
> 
> 标签：php, ajax, wordpress, crud

我正在尝试将“ajaxCRUD”类（[http://ajaxcrud.com/](http://ajaxcrud.com/)）与 WordPress 集成。我希望实现的是有一个页面模板，它使用这个特定的类显示来自数据库的值。

ajaxCRUD 本身是可靠的，单独工作也很好。但是，我认为与 WordPress 中的某些内容存在一些冲突，因为一旦我将其放入页面模板中，我就失去了更新记录的能力。此时正在显示数据表，但在编辑/提交任何值时，正在加载 wordpress 主页/索引页面。奇怪的是，在加载索引页面而不是更新值时，URL 中有一个参数，其中包含我试图更新的列名和值！

EX：链接显示：localhost/dealerwp/?text_tblDemofldField11=myupdatetext 其中 fldField1 是我要更新的列，（pkID 为 1）& tblDemo 是表的名称 & myupdatetext 是我在尝试更新时输入的文本价值

这里会发生什么？

我迷路了，拔掉剩下的头发……会不会是与 WordPress 的 ajax 冲突？或者也许是.htaccess？我一生都无法弄清楚为什么曾经包装在一个 wordpress 页面模板中，以前工作的代码现在被破坏了，并将数据发布到它应该用来更新表格的 URL 参数。

如果有人想看一看，我正在使用的代码如下。

再次，提前感谢您的任何帮助/指向正确的方向。

```
<?php
/**
 * Template Name: DealerCRUD Template
 * Description: A Page Template that showcases Sticky Posts, Asides, and Blog Posts
 *
 * The showcase template in Twenty Eleven consists of a featured posts section using sticky posts,
 * another recent posts area (with the latest post shown in full and the rest as a list)
 * and a left sidebar holding aside posts.
 *
 * We are creating two queries to fetch the proper posts and a custom widget for the sidebar.
 *
 * @package WordPress
 * @subpackage Twenty_Eleven
 * @since Twenty Eleven 1.0
 */
require_once('./preheader.php'); // <-- this include file MUST go first before any HTML/output

#the code for the class
include ('./ajaxCRUD.class.php'); // <-- this include file MUST go first before any HTML/output

#this one line of code is how you implement the class
########################################################
##

$tblDemo = new ajaxCRUD("Item", "tblDemo", "pkID", "/");

##
########################################################

## all that follows is setup configuration for your fields....
## full API reference material for all functions can be found here - http://ajaxcrud.com/api/
## note: many functions below are commented out (with //). note which ones are and which are not

#i can define a relationship to another table
#the 1st field is the fk in the table, the 2nd is the second table, the 3rd is the pk in the second table, the 4th is field i want to retrieve as the dropdown value
#http://ajaxcrud.com/api/index.php?id=defineRelationship
//$tblDemo->defineRelationship("fkID", "tblDemoRelationship", "pkID", "fldName", "fldSort DESC"); //use your own table - this table (tblDemoRelationship) not included in the installation script

#i don't want to visually show the primary key in the table
$tblDemo->omitPrimaryKey();

#the table fields have prefixes; i want to give the heading titles something more meaningful
$tblDemo->displayAs("fldField1", "Field1");
$tblDemo->displayAs("fldField2", "Field2");
$tblDemo->displayAs("fldCertainFields", "Certain Fields");
$tblDemo->displayAs("fldLongField", "Long Field");
$tblDemo->displayAs("fldCheckbox", "Is Selected?");

#set the textarea height of the longer field (for editing/adding)
#http://ajaxcrud.com/api/index.php?id=setTextareaHeight
$tblDemo->setTextareaHeight('fldLongField', 150);

#i could omit a field if I wanted
#http://ajaxcrud.com/api/index.php?id=omitField
//$tblDemo->omitField("fldField2");

#i could omit a field from being on the add form if I wanted
//$tblDemo->omitAddField("fldField2");

#i could disallow editing for certain, individual fields
//$tblDemo->disallowEdit('fldField2');

#i could set a field to accept file uploads (the filename is stored) if wanted
//$tblDemo->setFileUpload("fldField2", "uploads/");

#i can have a field automatically populate with a certain value (eg the current timestamp)
//$tblDemo->addValueOnInsert("fldField1", "NOW()");

#i can use a where field to better-filter my table
//$tblDemo->addWhereClause("WHERE (fldField1 = 'test'");

#i can order my table by whatever i want
//$tblDemo->addOrderBy("ORDER BY fldField1 ASC");

#i can set certain fields to only allow certain values
#http://ajaxcrud.com/api/index.php?id=defineAllowableValues
$allowableValues = array("Allowable Value 1", "Allowable Value2", "Dropdown Value", "CRUD");
$tblDemo->defineAllowableValues("fldCertainFields", $allowableValues);

//set field fldCheckbox to be a checkbox
$tblDemo->defineCheckbox("fldCheckbox");

#i can disallow deleting of rows from the table
#http://ajaxcrud.com/api/index.php?id=disallowDelete
//$tblDemo->disallowDelete();

#i can disallow adding rows to the table
#http://ajaxcrud.com/api/index.php?id=disallowAdd
//$tblDemo->disallowAdd();

#i can add a button that performs some action deleting of rows for the entire table
#http://ajaxcrud.com/api/index.php?id=addButtonToRow
//$tblDemo->addButtonToRow("Add", "add_item.php", "all");

#set the number of rows to display (per page)
$tblDemo->setLimit(3);

#set a filter box at the top of the table
//$tblDemo->addAjaxFilterBox('fldField1');

#if really desired, a filter box can be used for all fields
$tblDemo->addAjaxFilterBoxAllFields();

#i can set the size of the filter box
//$tblDemo->setAjaxFilterBoxSize('fldField1', 3);

#i can format the data in cells however I want with formatFieldWithFunction
#this is arguably one of the most important (visual) functions
$tblDemo->formatFieldWithFunction('fldField1', 'makeBlue');
$tblDemo->formatFieldWithFunction('fldField2', 'makeBold');

//$tblDemo->modifyFieldWithClass("fldField1", "zip required");  //for testing masked input functionality
//$tblDemo->modifyFieldWithClass("fldField2", "phone");         //for testing masked input functionality

//$tblDemo->onAddExecuteCallBackFunction("mycallbackfunction"); //uncomment this to try out an ADD ROW callback function

?>
            <div style="float: left">
            Total Returned Rows: <b><?=$tblDemo->insertRowsReturned();?></b>    <br />
    </div>

    <div style="clear:both;"></div>

<?

     #actually show the table
     $tblDemo->showTable();

    #my self-defined functions used for formatFieldWithFunction
    function makeBold($val){
    return "<b>$val</b>";
  }

    function makeBlue($val){
    return "<span style='color: blue;'>$val</span>";
  }

    function myCallBackFunction($array){
    echo "THE ADD ROW CALLBACK FUNCTION WAS implemented";
    print_r($array);
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T23:46:54.957

您的脚本是否位于 ajaxCRUD 目录中？在 ajaxCRUD.class.php 中检查 $ajaxcrud_root 的设置（在第 307 行附近）一旦你设置了它，你就可以摆脱`, "/"`：

```
$tblDemo = new ajaxCRUD("Item", "tblDemo", "pkID", "/"); 
```

# php - 像在 php 中查询多维数组的地方

> ID：15646192
> 
> 赞同：4
> 
> 时间：2013-03-26T19:53:37.343
> 
> 标签：php, multidimensional-array

假设我有一个这样的 php 数组：

```
$shop = array( array("name"=>"Tom", "level"=> 1.25 ),
               array("name"=>"Mike","level"=> 0.75 ),
               array("name"=>"John","level"=> 1.15 ) 
             ); 
```

我想过滤这个数组，类似于过滤带有 where 条件的 mysql 表。假设我想要每个级别高于 1 的数组。我可以遍历并检查 if 语句。有没有任何php解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T19:56:46.950

[array_filter](http://www.php.net/manual/en/function.array-filter.php)是您正在寻找的：

```
$results= array_filter($shop, function($item) { return $item['level'] > 1; });

print_r($results); 
```

输出：

```
Array
(
    [0] => Array
    (
        [name] => Tom
        [level] => 1.25
    )

    [2] => Array
    (
        [name] => John
        [level] => 1.15
    )
) 
```

# ios - 通过两个一对一关系查找核心数据实体

> ID：15646194
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:53:40.823
> 
> 标签：ios, objective-c, core-data

边界 <--> 数据集 <-->> 数据A

我想找到`DataA`属于`Boundary`boundary1的所有实体；

我试过了：

```
NSPredicate *predication = [NSPredicate predicateWithFormant:@"datasets.boundary.boundaryID == %@", myBoundaryID]; 
```

但是在尝试查找`Boundary`的属性时出现问题。

我的另一个想法是：

```
NSArray *savedAnalysis = [NSArray arrayWithArray:[dataset.savedAnalysis allObjects]];

NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:NAME ascending:TRUE];
NSArray *descriptors = [NSArray arrayWithObject:sortDescriptor];

self.datasourceSavedAnalysis = [NSArray arrayWithArray:[savedAnalysis sortedArrayUsingDescriptors:descriptors]]; 
```

但我不知道如何对数组中的核心数据实体进行排序。

我不是数据库专家，我无法弄清楚这些东西的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:00:15.897

尝试以下操作：

```
NSPredicate *predication = [NSPredicate predicateWithFormant:@"datasets.boundary == %@", myBoundary]; 
```

wWhere`myBoundary`是一个边界实体。

# c# - 使用 Schedule for NServiceBus 的时间延迟

> ID：15646201
> 
> 赞同：1
> 
> 时间：2013-03-26T19:54:01.643
> 
> 标签：c#, delay, nservicebus

在对 NServiceBus 使用 Schedule 方法时，我发现在经过的作业之间存在一致的延迟。如果我将间隔设置为一分钟。下一个工作不会在一分钟后发生，而是额外延迟了 5 秒。

如果我将时间间隔设置为仅一秒，那么额外的延迟也会缩小到仅 0.7 秒。过了一分钟，延迟仍然停留在大约 5 秒。

下面是使用分钟间隔的代码片段：

```
previousTime = DateTime.Now.TimeOfDay;            
Schedule.Every(TimeSpan.FromSeconds(60)).Action(() =>
{
    DateTime currentTime = DateTime.Now;
    ServiceBus.WriteToLog(string.Format("Start of Schedule: {0}, {1} delay", currentTime, currentTime.TimeOfDay - previousTime));
    previousTime = DateTime.Now.TimeOfDay;
}); 
```

这是我的日志中的一个片段：

> 2013-03-26 12:20:58,483 [3] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:20:58，00:01:04.9931640 延迟
> 
> 2013-03-26 12:22:03,514 [19] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:22:03，00:01:05.0302735 延迟
> 
> 2013-03-26 12:23:08,532 [4] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:23:08，00:01:05.0185546 延迟
> 
> 2013-03-26 12:24:13,553 [3] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:24:13，00:01:05.0206625 延迟
> 
> 2013-03-26 12:25:18,577 [4] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:25:18，00:01:05.0244141 延迟
> 
> 2013-03-26 12:26:24,451 [22] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:26:24，00:01:05.8740234 延迟
> 
> 2013-03-26 12:27:28,695 [3] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:27:28，00:01:04.2441406 延迟
> 
> 2013-03-26 12:28:33,739 [22] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:28:33，00:01:05.0439454 延迟
> 
> 2013-03-26 12:29:38,753 [4] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:29:38，00:01:05.0138266 延迟
> 
> 2013-03-26 12:30:39,029 [19] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:30:39，00:01:00.2757029 延迟
> 
> 2013-03-26 12:31:43,878 [19] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:31:43，00:01:04.8492417 延迟
> 
> 2013-03-26 12:32:48,951 [4] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:32:48，00:01:05.0732422 延迟
> 
> 2013-03-26 12:33:53,950 [3] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:33:53，00:01:04.9990235 延迟
> 
> 2013-03-26 12:34:58,950 [3] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:34:58，00:01:04.9999930 延迟
> 
> 2013-03-26 12:36:03,950 [3] INFO RollingFileAppender [(null)] - 计划开始：3/26/2013 12:36:03 PM，00:01:05 延迟
> 
> 2013-03-26 12:37:08,970 [22] INFO RollingFileAppender [(null)] - 计划开始：3/26/2013 12:37:08 PM，00:01:05.0195313 延迟
> 
> 2013-03-26 12:38:10,185 [22] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:38:10，00:01:01.2150069 延迟
> 
> 2013-03-26 12:39:14,354 [3] INFO RollingFileAppender [(null)] - 计划开始：2013 年 3 月 26 日下午 12:39:14，00:01:04.1694596 延迟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:03:48.363

5 秒延迟是因为我们实际上只每 5 秒轮询一次，请参阅[此代码](https://github.com/NServiceBus/NServiceBus/blob/develop/src/NServiceBus.Core/Timeout/Hosting/Windows/TimeoutPersisterReceiver.cs#L66)
我在 gihub 中提出了一个问题来解决此问题，请参阅[https://github.com/NServiceBus/NServiceBus/issues/1077](https://github.com/NServiceBus/NServiceBus/issues/1077)

如果您设置的时间间隔 <= 1 秒，那么您将不会有 5 秒的延迟，因为我们绕过轮询并立即执行该代码，请参阅[此代码](https://github.com/NServiceBus/NServiceBus/blob/develop/src/NServiceBus.Core/Timeout/Core/DefaultTimeoutManager.cs#L33)。
所以 0.7 秒的延迟是立即执行的代码。

# spring - 带有 iText 和 Spring MVC 的 PDF 模板

> ID：15646206
> 
> 赞同：1
> 
> 时间：2013-03-26T19:54:24.233
> 
> 标签：spring, pdf, spring-mvc, pdf-generation, itext

我想从 Spring MVC 中的模板（使用[此处](http://ashwinrayaprolu.wordpress.com/2011/06/07/pdf-templates-using-openoffice-draw-and-itext-in-java/)所示的 pdf 表单）创建 PDF并将其输出到浏览器，但`AbstractPdfView`我不知道如何`Document`从.. ? 以下是我到目前为止的代码，谢谢`PdfStamper``PdfWriter`

```
public class RecipePdf extends AbstractPdfView {

@Override
protected void buildPdfDocument(Map<String, Object> model, Document document,
        PdfWriter pdfWriter, HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    PdfReader pdfTemplate = new PdfReader ("/WEB-INF/template/recipe.pdf");
    FileOutputStream fileOutputStream = new FileOutputStream("test.pdf");
    PdfStamper stamper = new PdfStamper(pdfTemplate, fileOutputStream);
    stamper.setFormFlattening(true);

    stamper.getAcroFields().setField("number", "12345");

    stamper.close();
    pdfTemplate.close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-17T07:52:25.017

Spring 的 AbstractPdfStamperView 和 iText 可用于使用预定义模板生成 PDF。

```
package com.pdf.view;

import java.util.Locale;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.context.MessageSource;
import org.springframework.context.MessageSourceAware;
import org.springframework.web.servlet.view.document.AbstractPdfStamperView;

import com.lowagie.text.pdf.PdfStamper;

public class PDFView extends AbstractPdfStamperView implements
        MessageSourceAware {

    private MessageSource messageSource;

    @Override
    public void setMessageSource(MessageSource messageSource) {
        this.messageSource = messageSource;
    }

    @Override
    protected void mergePdfDocument(Map<String, Object> model,
            PdfStamper stamper, HttpServletRequest request,
            HttpServletResponse response) throws Exception {

        stamper.setFormFlattening(true);
            String customerName = (String) model.get("customerName");

        Locale locale = request.getLocale();
        stamper.getAcroFields().setField("customerNameLabel",
                messageSource.getMessage("label.customername", null, locale));

        stamper.getAcroFields().setField("customerNameValue", customerName);

        stamper.close();
    }
} 
```

我使用了 XMLViewResolver。下面是 spring-servlet.xml 中的条目：

```
 <bean class="org.springframework.web.servlet.view.XmlViewResolver">
      <property name="location">
         <value>/WEB-INF/spring-pdf-views.xml</value>
      </property>
   </bean> 
```

下面是 spring-pdf-views.xml 的内容

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <bean id="invoicePDF"
        class="com.pdf.view.PDFView">
        <property name="url" value = "/WEB-INF/resources/templates/invoiceTemplate.pdf" />
    </bean>
 </beans> 
```

下面是控制器代码中定义的方法，它将呈现视图。此处 ModelAndView 中设置的视图名称与上面 spring-pdf-views.xml 中定义的相同。

```
@RequestMapping(value = "/pdf",method = RequestMethod.POST)
public ModelAndView renderPDF(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        ModelAndView mav = new ModelAndView("invoicePDF");
        mav.addObject("customerName", "XYZ"); 
        return mav;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:35:25.993

1）我在本地开发我的文档生成器并使用 jUnit 测试它们 2）如果您只需要 PDF，那么它应该在输出目录中...但是... 3）但是...如果您需要加入该文档成一个更大的文档，然后使用类似以下的内容阅读它：

```
 Document document = new Document();

    PdfWriter writer = PdfWriter.getInstance(document, outputStream);

    document.open();
    PdfContentByte cb = writer.getDirectContent();

    for (String pdfFileName : pdfFileNamesList) {
        InputStream in = new FileInputStream(pdfFileName);
        PdfReader reader = new PdfReader(in);
        int numberOfPages = reader.getNumberOfPages();
        for (int i = 1; i <= numberOfPages; i++) {
            document.newPage();
            //import the page from source pdf
            PdfImportedPage page = writer.getImportedPage(reader, i);
            //add the page to the destination pdf
            cb.addTemplate(page, 0, 0);
        }
     } 
```

# java - 如何创建基于类的某些属性排序的优先队列？

> ID：15646207
> 
> 赞同：2
> 
> 时间：2013-03-26T19:54:31.183
> 
> 标签：java, priority-queue

我创建了一个节点类：

```
public class Node {
int vertex;
double latency;
Node predecessor;}

 public double getLatency()
{
    return latency;
} 
```

我想创建一个优先级队列，按延迟从最小到最大对节点进行排序。经过研究，我相信我需要覆盖比较器？

```
PriorityQueue<Node> pqueue = new PriorityQueue<Node>(numVertices, new Comparator<Node>({
        @Override

            ???
        }
    } 
```

我不太确定如何覆盖它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T22:48:53.780

您实际上只需要比较两种延迟。这意味着覆盖`compare`比较两个输入的延迟类 Comparator的方法`Node`：

```
PriorityQueue<Node> pqueue = new PriorityQueue<Node>(numVertices, new Comparator<Node>({
    @Override
    public int compare(Node a, Node b) {
        return Integer.compare(a.getLatency(), b.getLatency());
    }
} 
```

但是，这仅适用于 Java 7，对于其他版本：

```
new Integer(a.getLatency()).compareTo(new Integer(b.getLatency())); 
```

如果您不想创建新对象，请`int`照常比较两者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:17:29.220

这 ”？？？” 在您的示例中可以替换为以下内容：

```
public int compare(Node a, Node b) {
    if (a.getLatency() < b.getLatency())
        return -1;
    else if (a.getLatency() > b.getLatency())
        return 1;
    return 0;
} 
```

# arduino - 处理 + bitWrite + arduino

> ID：15646210
> 
> 赞同：0
> 
> 时间：2013-03-26T19:54:45.753
> 
> 标签：arduino, bit-manipulation, processing, frequency-analysis

我正在使用 Arduino 并使用 Arduino 库进行处理。

我收到错误“该函数`bitWrite(byte, int, int)`不存在。”；它接缝处理+ Arduino bitWrite 函数不能一起工作。由于这条线，它被提出：

```
arduino.bitWrite(data,desiredPin,desiredState); 
```

我在这个项目中的目标是修改音乐反应草图以使用移位寄存器。

这是我的完整代码：

Arduino_Shift_display

```
import ddf.minim.*;
import ddf.minim.analysis.*;
import processing.serial.*;
import cc.arduino.*;

int displayNum = 8;

Arduino arduino;
//Set these in the order of frequency - 0th pin is the lowest frequency,
//while the final pin is the highest frequency
int[] lastFired = new int[displayNum];

int datapin = 2; 
int clockpin = 3;
int latchpin = 4;
int switchpin = 7;

byte data = 0;

//Change these to mess with the flashing rates
//Sensitivity is the shortest possible interval between beats
//minTimeOn is the minimum time an LED can be on
int sensitivity = 75;
int minTimeOn = 50;

String mode;
String source;

Minim minim;
AudioInput in;
AudioPlayer song;
BeatDetect beat;

//Used to stop flashing if the only signal on the line is random noise
boolean hasInput = false;
float tol = 0.005;

void setup(){
  // shift register setup
  arduino.pinMode(datapin, arduino.OUTPUT);
  arduino.pinMode(clockpin, arduino.OUTPUT);  
  arduino.pinMode(latchpin, arduino.OUTPUT);
  arduino.digitalWrite(switchpin, arduino.HIGH);

  //Uncomment the mode/source pair for the desired input

  //Shoutcast radio stream
  //mode = "radio";
  //source = "http://scfire-ntc-aa05.stream.aol.com:80/stream/1018";

  //mode = "file";
  //source = "/path/to/mp3";

  mode = "mic";
  source = "";

  size(512, 200, P2D);

  minim = new Minim(this);
  arduino = new Arduino(this, Arduino.list()[1]);

  minim = new Minim(this);

  if (mode == "file" || mode == "radio"){
    song = minim.loadFile(source, 2048);
    song.play();
    beat = new BeatDetect(song.bufferSize(), song.sampleRate());
    beat.setSensitivity(sensitivity);
  } else if (mode == "mic"){
    in = minim.getLineIn(Minim.STEREO, 2048);
    beat = new BeatDetect(in.bufferSize(), in.sampleRate());
    beat.setSensitivity(sensitivity);
  }
}

void shiftWrite(int desiredPin, int desiredState)

// This function lets you make the shift register outputs
// HIGH or LOW in exactly the same way that you use digitalWrite().

// Like digitalWrite(), this function takes two parameters:

//    "desiredPin" is the shift register output pin
//    you want to affect (0-7)

//    "desiredState" is whether you want that output
//    to be HIGH or LOW

// Inside the Arduino, numbers are stored as arrays of "bits",
// each of which is a single 1 or 0 value. Because a "byte" type
// is also eight bits, we'll use a byte (which we named "data"
// at the top of this sketch) to send data to the shift register.
// If a bit in the byte is "1", the output will be HIGH. If the bit
// is "0", the output will be LOW.

// To turn the individual bits in "data" on and off, we'll use
// a new Arduino commands called bitWrite(), which can make
// individual bits in a number 1 or 0.
{
  // First we'll alter the global variable "data", changing the
  // desired bit to 1 or 0:

  arduino.bitWrite(data,desiredPin,desiredState);

  // Now we'll actually send that data to the shift register.
  // The shiftOut() function does all the hard work of
  // manipulating the data and clock pins to move the data
  // into the shift register:

  arduino.shiftOut(datapin, clockpin, MSBFIRST, data);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

  // Once the data is in the shift register, we still need to
  // make it appear at the outputs. We'll toggle the state of
  // the latchPin, which will signal the shift register to "latch"
  // the data to the outputs. (Latch activates on the high-to
  // -low transition).

  arduino.digitalWrite(latchpin, arduino.HIGH);
  arduino.digitalWrite(latchpin, arduino.LOW);
}

void draw(){
  if (mode == "file" || mode == "radio"){
    beat.detect(song.mix);
    drawWaveForm((AudioSource)song);
  } else if (mode == "mic"){
    beat.detect(in.mix); 
    drawWaveForm((AudioSource)in);
  }

  if (hasInput){ //hasInput is set within drawWaveForm
    for (int i=0; i<displayNum-1; i++){
      if ( beat.isRange( i+1, i+1, 1) ){
        shiftWrite(i, 1);
        lastFired[i] = millis();
      } else {
        if ((millis() - lastFired[i]) > minTimeOn){
          shiftWrite(i, 0);
        }
      }
    } 
  }
}  //End draw method

//Display the input waveform
//This method sets 'hasInput' - if any sample in the signal has a value
//larger than 'tol,' there is a signal and the lights should flash.
//Otherwise, only noise is present and the lights should stay off.
void drawWaveForm(AudioSource src){
  background(0);
  stroke(255);

  hasInput = false;

  for(int i = 0; i < src.bufferSize() - 1; i++)
  {
    line(i, 50 + src.left.get(i)*50, i+1, 50 + src.left.get(i+1)*50);
    line(i, 150 + src.right.get(i)*50, i+1, 150 + src.right.get(i+1)*50);

    if (!hasInput && (abs(src.left.get(i)) > tol || abs(src.right.get(i)) > tol)){
      hasInput = true;
    }
  } 
}

void resetPins(){
  for (int i=0; i<ledPins.length; i++){
    arduino.digitalWrite(ledPins[i], Arduino.LOW);   
  } 
}

void stop(){
  resetPins();  
  if (mode == "mic"){
    in.close();
  }  
  minim.stop();
  super.stop();
} 
```

节拍监听器

```
class BeatListener implements AudioListener
{
  private BeatDetect beat;
  private AudioPlayer source;

  BeatListener(BeatDetect beat, AudioPlayer source)
  {
    this.source = source;
    this.source.addListener(this);
    this.beat = beat;
  }

  void samples(float[] samps)
  {
    beat.detect(source.mix);
  }

  void samples(float[] sampsL, float[] sampsR)
  {
    beat.detect(source.mix);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-02T01:32:24.097

您可以使用标准的按位运算符来实现相同的目的。要打开一点：

```
data |= 1 << bitNumber; 
```

右侧 ( `1 << bitNumber`) 是用于创建合适的位掩码的位移操作。它采用单个“1”位并将其向左移动，直到到达所需位置。按位或赋值 ( `|=`) 将新的位掩码与`data`. 这将打开所需的位，但其余部分保持不变。

关闭的代码略有不同：

```
data &= ~(1 << bitNumber); 
```

您可以在此处看到相同的位移操作。但是，它前面是一元否定运算符 ( `~`)。这会将所有的 1 交换为 0，并将所有的 0 交换为 1。结果与我们之前使用的位掩码完全相反。不过这次您不能进行按位或运算，否则您将打开所有其他位。按位与赋值 ( `&=`) 用于将此掩码与`data`变量组合。这确保了所需的位被关闭，而其余的则保持不变。

在您的代码中，`desiredPin`相当于`bitNumber`.

对按位运算如何工作的完整解释可能非常冗长。如果您需要更多帮助，我建议您在线寻找一个好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T22:39:35.277

还有`bitSet`和`bitClear`Arduino 宏可以使代码比位移和使用`AND`和更具可读性`OR`。格式为`bitSet(what_to_modify,bit_number)`和`bitClear(what_to_modify,bit_number)`。这些转换为非常有效的代码，可用于操作变量和硬件寄存器。例如，如果您想打开 Arduino UNO 上的引脚 13，您首先需要查看 Arduino 引脚 13 实际上是 Atmel atmega328 芯片的 PORTB 上的引脚 5。所以命令是：

```
bitSet(PORTB,5); 
```

# c++ - 数据结构实现代码理解

> ID：15646211
> 
> 赞同：0
> 
> 时间：2013-03-26T19:54:58.783
> 
> 标签：c++, algorithm, data-structures

我正在学习算法和数据结构器的课程，我的导师希望我实现几个数据结构器（如 BST、堆栈等）和算法（如快速搜索、DFS 等）。我想相信我了解基础知识，但是每次我开始计划代码时，我都会遇到同样的困难：

这是我目前的任务：我的导师希望我为有向图（使用 c++）**实现 DFS（深度优先搜索）。**

我的问题是 - 我应该如何实现图表？我应该使用邻接矩阵吗？还是我应该使用邻接列表？既不是这个也不是那个？？所以我问我的导师，他的回答是：“把图表想象成一个*黑盒子*”......比以前更困惑，我冲到*stackoverflow*上，我在这里发布这个问题......我不找人告诉我如何实现 DFS（或任何其他算法——我也可以用谷歌搜索！）——我只需要有人解释**我应该得到什么作为输入，我应该提供什么作为输出？**

我会很感激任何评论！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:25:05.520

他所说的*黑匣子*的意思只是在你做 DFS 之前你看不到节点以及它们是如何连接的。您可能只需要从那里探索根节点和您的算法。至于你应该输出什么——这取决于任务。您在寻找特定数据吗？如果不是，也许是按顺序访问了哪些节点的详细信息。

# java - 如何在 Jetty 9 中访问实例化的 WebSocket？

> ID：15646213
> 
> 赞同：15
> 
> 时间：2013-03-26T19:55:02.813
> 
> 标签：java, websocket, jetty

这可能很明显，但我对这种范式很陌生。我创建了一个 Jetty 服务器并注册了我的 websocket 类，如下所示：

```
 Server server = new Server(8080);
        WebSocketHandler wsHandler = new WebSocketHandler()
        {
            @Override
            public void configure(WebSocketServletFactory factory)
            {
                factory.register(MyEchoSocket.class);
            }
        };
        server.setHandler(wsHandler); 
```

websocket 接收消息正常。我还希望能够在没有先从客户端收到消息的情况下从服务器发送消息。如何访问连接打开时创建的 MyEchoSocket 实例？或者，更一般地说，如何在 MyEchoSocket 中的 onText 方法之外的套接字上发送消息？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-27T00:13:18.863

两种常用技术，在此以超级简化的聊天室概念呈现。

**选项 #1：让 WebSocket 将其状态报告回中心位置**

```
@WebSocket
public class ChatSocket {
    public Session session;

    @OnWebSocketConnect
    public void onConnect(Session session) {
        this.session = session;
        ChatRoom.getInstance().join(this);
    }

    @OnWebSocketMessage
    public void onText(String message) {
        ChatRoom.getInstance().writeAllMembers("Hello all");
    }

    @OnWebSocketClose
    public void onClose(int statusCode, String reason) {
        ChatRoom.getInstance().part(this);
    }
}

public class ChatRoom {
    private static final ChatRoom INSTANCE = new ChatRoom();

    public static ChatRoom getInstance()
    {
        return INSTANCE;
    }

    private List<ChatSocket> members = new ArrayList<>();

    public void join(ChatSocket socket) 
    {
        members.add(socket);
    }

    public void part(ChatSocket socket) 
    {
        members.remove(socket);
    }

    public void writeAllMembers(String message) 
    {
        for(ChatSocket member: members)
        {
            member.session.getRemote().sendStringByFuture(message);
        }
    }

    public void writeSpecificMember(String memberName, String message) 
    {
        ChatSocket member = findMemberByName(memberName);
        member.session.getRemote().sendStringByFuture(message);
    }

    public ChatSocket findMemberByName(String memberName) 
    {
        // left as exercise to reader
    }
} 
```

然后只需使用中央位置与您选择的 websocket 对话。

```
ChatRoom.getInstance().writeSpecificMember("alex", "Hello");

// or

ChatRoom.getInstance().writeAllMembers("Hello all"); 
```

**选项 #2：使用 WebSocketCreator 手动创建 WebSocket**

```
@WebSocket
public class ChatSocket {
    public ChatRoom chatroom;

    public ChatSocket(ChatRoom chatroom)
    {
        this.chatroom = chatroom;
    }

    @OnWebSocketConnect
    public void onConnect(Session session) {
        chatroom.join(this);
    }

    @OnWebSocketMessage
    public void onText(String message) {
        chatroom.writeAllMembers(message);
    }

    @OnWebSocketClose
    public void onClose(int statusCode, String reason) {
        chatroom.part(this);
    }
}

public class ChatCreator implements WebSocketCreator
{
    private ChatRoom chatroom;

    public ChatCreator(ChatRoom chatroom)
    {
        this.chatroom = chatroom;
    }

    public Object createWebSocket(UpgradeRequest request, 
                                  UpgradeResponse response)
    {
        // We want to create the Chat Socket and associate
        // it with our chatroom implementation
        return new ChatSocket(chatroom);
    }
}

public class ChatHandler extends WebSocketHandler
{
    private ChatRoom chatroom = new ChatRoom();

    @Override
    public void configure(WebSocketServletFactory factory)
    {
        factory.setCreator(new ChatCreator(chatroom));
    }
} 
```

此时，您可以使用与上述相同的技术与您选择的 websocket 通信。

# c# - C#将点击事件添加到列表框

> ID：15646214
> 
> 赞同：2
> 
> 时间：2013-03-26T19:55:03.693
> 
> 标签：c#, listbox, onclick

我正在尝试将单击事件添加到列表框中，但由于某种原因，当我单击列表框中的项目时没有任何反应。

我的猜测和我读过的内容，代码应该是这样的

```
private void listBox1_Click(object sender, EventArgs e)
        {
            //Code Ex. TextBox1.Text = "Success";
    } 
```

但这行不通。任何人都知道如何让这发生？也不介意知道双击和其他点击变体......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:59:25.713

您对事件处理程序进行了编码，但没有将其添加到单击事件中……如下所示：

```
listBox1.Click += new EventHandler( listBox1_Click ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:59:27.980

如果您希望它在您“单击框中的项目”时触发，为什么不尝试 SelectedIndexChanged 呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-19T21:20:49.613

您是否检查过属性“AutoPostBack”已启用（=“True”）？:-) 这经常发生在我身上！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T19:56:30.607

网络表格？如果是这样，您是否检查了'autopostback' = true？

selectindexchanged 的​​示例：

```
<asp:ListBox ID="ListBox1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="ListBox1_SelectedIndexChanged">
    <asp:ListItem>a</asp:ListItem>
    <asp:ListItem>b</asp:ListItem>
</asp:ListBox>

protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
{

} 
```

一旦用户单击一个项目，这将进行回发。我不确定这种东西是否有双击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T19:58:00.920

我不确定点击事件是否适用于列表框项目，可能只是父框。我会遍历这些项目并注册事件。或者在数据绑定上进行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-06T07:13:11.097

在 Microsoft Visual Studio 2017 中，将您的主表单（带有列表框）放入表单设计视图中选择您已拖动到主表单上的列表框项目现在列表框的属性框已在右侧生效开发窗口现在查看带有“闪电锯齿”的菜单项的属性框顶部单击它...瞧，您的双击事件就在那里

```
private void lbx _DoubleClick(object sender, EventArgs e)
{
    /*  Do good stuff here  */
} 
```

干杯我亲爱的吉姆

# c# - 加载带有值的下拉列表

> ID：15646219
> 
> 赞同：0
> 
> 时间：2013-03-26T19:55:23.493
> 
> 标签：c#, html, .net, entity-framework, c#-4.0

我有一个动态获取数据的下拉列表，我想在页面加载时显示现有选择，并让用户根据需要从列表中选择一个。

有一个网站包含与网站相关的所有数据，我希望我的下拉菜单从 site.market 获取现有价值，比如说纽约。下拉列表是动态创建的。这是aspx

```
<tr>

  <td class="large"><asp:DropDownList ID="dropmarket" runat="server"  ></asp:DropDownList></td>

</tr> 
```

在 aspx.cs 中

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (!Page.IsPostBack)
        {

            market();
            CellSiteUtility utility = new CellSiteUtility();
            var siteID = Guid.Parse(Request.QueryString["ID"].ToString());

            var site = utility.GetCellSiteByID(siteID);

            if (site != null)
            {

                txtsitename.Text = site.SiteName;
                txtaddress.Text = site.SiteAddress;
                txtzip.Text = site.SiteCityStateZip;
                dropmanager.SelectedValue = site.Manager;
                dropmarket.SelectedValue = site.Market;

            }
        }

    private void market()
    {
        CellSiteUtility utility = new CellSiteUtility();
        var siteID = Guid.Parse(Request.QueryString["ID"].ToString());
        var market = utility.getMarketsByCellsiteID(siteID);

        foreach (t_Market m in market)
        {
            dropmarket.Items.Add(new ListItem(m.MarketName.ToString(),
                m.MarketId.ToString()));
        }
    } 
```

`site.market`页面加载时如何`dropmarket`加载？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:51:04.373

您可以在 Page_Load 上选择一个列表项：

```
ListItem selectedListItem = dropmarket.Items.FindByValue(site.Market);
if (selectedListItem != null)
{
    selectedListItem.Selected = true;
}; 
```

或者

```
dropmarket.SelectedIndex = 0;
if (dropmarket.Items.Contains(site.Market))
   dropmarket.SelectedIndex = dropmarket.Items.IndexOf(entry); 
```

* * *

## 编辑：

此示例假定 site.Market 是下拉列表中的值。如：

```
<option value="somevalue">SomeText</option> 
```

如果 site.Market 是下拉列表中的文本，请使用：

```
ListItem selectedListItem = dropmarket.Items.FindByText(site.Market); 
```

希望这可以帮助！

维韦克

# neo4j - 无法使模式与单个 gremlin 语句匹配

> ID：15646221
> 
> 赞同：0
> 
> 时间：2013-03-26T19:55:30.693
> 
> 标签：neo4j, cypher, gremlin, tinkerpop

我有一个依赖关系图：

```
dep1 -> dep2 -> ... -> dep3 -> ...
    |                   ^
    +-> dep4            |
    |                   |
    +-------------------+ 
```

我正在寻找不必要的依赖关系，这些依赖关系存在直接链接，但也存在通过子依赖关系的链接。在上面的例子中，链接“dep1 -> dep3”是不必要的。

找到这些的密码语句将是：

```
start n = node(*)
match n -[:dependency]-> n2,
      n -[:dependency*2..]-> n2
 with n, n2
return distinct id(n), n.name, id(n2), n2.name 
```

我试图用一个 gremlin 语句（使用“table”-step）来解决这个问题，但我就是无法让它工作。这甚至可能吗，还是我必须用多个语句来解决这个问题？

任何提示、提示、想法将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:01:15.693

值得一提的是，这里的 gremlin-users 组讨论/回答了这个问题：

[https://groups.google.com/forum/?fromgroups=&hl=en#!topic/gremlin-users/N9NYG-aBrvw](https://groups.google.com/forum/?fromgroups=&hl=en#!topic/gremlin-users/N9NYG-aBrvw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:20:38.123

感谢 Marko 和 Stephen，我们提出了这个解决方案：

```
g.V.transform{
    s-> singleStep = [];
        s.as('origin')
            .out('dependency').aggregate(singleStep)
            .out('dependency')
                .loop(1){ true }{ true }
            .retain(singleStep).as('redundant')
            .dedup()
            .table(new Table(), ['origin', 'redundant']){ it.name + '(' + it.id + ')' }
            .cap().next()
}.filter{ it.size() > 0 } 
```

# android - 有人在使用 MediaPlayer 作为服务时遇到 ANR 吗？

> ID：15646227
> 
> 赞同：3
> 
> 时间：2013-03-26T19:55:56.627
> 
> 标签：android

嗨，我收到 ANR（应用程序无响应）错误，但我不明白为什么。如果我单击“等待”，一切都会正常运行，并且 ANR 不会再回来了。

现在，我知道当使用 MediaPlayer 作为服务时，使用 .prepareAsync 和 onPrepared() 方法而不是简单的 .prepare() 和 .start() 是一种很好的做法。它不会锁定 UI 线程并且效果很好。

问题是我所有的 ANR 在打开文件时都没有发生（你会猜到那里有更高的处理器），而是在播放时随机发生并且 cpu 最多只有几个 %。正如我之前提到的，NOTHING 几乎没有响应，并且 UI 线程上几乎没有剩下什么。

唯一的线索是我第一次播放曲目时没有收到 ANR，但只有在更改曲目后才会收到 ANR。我认为 prepareAsync 线程正在发生冲突，我自己添加了一个锁。没变。

每次开始新曲目之前，我都会尝试释放媒体播放器。没变

我尝试在许多序列中重置、停止等。没变。

有没有人经历过同样的事情？

作为一种解决方法，有没有办法自动关闭 ANR？我知道这不是答案，但我找不到任何选择。我在一个有根的平板电脑上（我编译了 ROM），它仅供我自己使用 - 没有分发

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:02:55.947

标准服务实际上在主线程上运行，如果您看到 ANR，也许您应该将整个 MediaPlayer 移动到另一个线程。引用[文档](https://developer.android.com/reference/android/app/Service.html#WhatIsAService)

> 关于 Service 类的大多数困惑实际上都围绕着它不是什么：
> 
> *   服务**不是**一个单独的进程。
> *   服务**不是**线程。它本身并不是一种脱离主线程工作的方法（以避免应用程序无响应错误）。

您已经在使用`prepareAsync()`，但正如您所说的错误发生在 MediaPlayer 正在运行而不是准备时。如果没有更多关于究竟是什么导致 ANR 的详细信息，我相信切换到 HandlerThread 是您的最佳选择。

# encryption - 这是什么加密？44 个字符，以 = 结尾

> ID：15646230
> 
> 赞同：-4
> 
> 时间：2013-03-26T19:56:32.543
> 
> 标签：encryption

基本上我尝试了很多不同的解密，但我找不到它。

我很确定它是一种加密方法而不是散列，因为必须使用数据。

它们都是 44 个字符长并以`=`

例子：

```
5yFKMmoA+QNC1ch4islRw2l11jHkUD7xrhN2g4v+lok=
6n08mzA1AwzSQHkw9pLVg/AqjDlgz7gUFCDbnSX6irI=
Y7ewexuPNgRAf2sz3qQ26by2p1M2fQ8z6NaM5mniWkg= 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:02:50.167

似乎是 Base64 编码的 33 字节字符串 (44*6=264/8=33)。

见：[http ://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)

# sql-server-2008 - SQL server - 转换失败错误但不是真的

> ID：15646231
> 
> 赞同：1
> 
> 时间：2013-03-26T19:56:43.967
> 
> 标签：sql-server-2008, split, type-conversion

我有一个用户定义的函数，可以将整数列表拆分为值表。我正在使用它来解析输入以选择一组给定类型或状态的记录。

这有效：

```
select * from RequestStatus
where RequestStatusUID in (select [value] from dbo.SplitIDs('1,2,3', ',')) 
```

这不会：

```
select * from Requests
where RequestStatusUID in (select [value] from dbo.SplitIDs('1,2,3', ',')) 
```

Requests 查询返回错误“**将 varchar 值 '1,2,3' 转换为 int 数据类型时转换失败。** ”两个表上的 RequestStatusUID 都是 int 列。两个解释计划在我看来都是一样的。该函数在不相关的查询中的工作方式完全相同。据我所知，只有 Requests 表有问题。

```
CREATE TABLE [dbo].[Requests]  ( 
[RequestUID]        int IDENTITY(1,1) NOT NULL,
[UserUID]           int NOT NULL,
[LocationUID]       int NOT NULL,
[DateOpened]        date NULL,
[DateClosed]        date NULL,
[RequestStatusUID]  int NOT NULL,
[DiscussionUID]     int NULL,
[RequestTypeUID]    int NOT NULL,
[RequestNo]         varchar(16) NOT NULL,
[LastUpdateUID]     int NOT NULL,
[LastUpdated]       date NOT NULL,
CONSTRAINT [PK_Requests] PRIMARY KEY NONCLUSTERED([RequestUID]) 
```

如果我使用返回 varchars 的不同函数并且我也将 RequestStatusUID 列转换为 varchar，它确实有效：

```
select * from Requests
where cast(RequestStatusUID as varchar(4)) in (select [value] from dbo.Split('1,2,3', ',')) 
```

作为参考，我正在使用的 SplitIDs 函数（[Arnold Fribble 解决方案](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=50648)的修改版本）。Split 函数与最后没有强制转换为 int 相同：

```
ALTER FUNCTION [dbo].[SplitIDs] ( @str VARCHAR(MAX), @delim char(1)=',' )
RETURNS TABLE
AS
RETURN
(
    with cte as (
        select 0 a, 1 b
        union all
        select b, cast(charindex(@delim, @str, b) + 1 as int)
        from cte
        where b > a
    )
    select cast(substring(@str,a,
    case when b > 1 then b-a-1 else len(@str) - a + 1 end) as int) [value]      
    from cte where a >0
) 
```

我可以使用转换为字符串的解决方案，但我真的很想知道为什么这首先会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:15:04.200

我想你会发现这种语法表现得更好：

```
SELECT r.* FROM dbo.Requests AS r
INNER JOIN dbo.SplitIDs('1,2,3', ',') AS s
ON r.RequestStatusUID = s.value; 
```

由于您的函数选择，谓词仍然有一堆隐式转换，但连接消除了昂贵的表假脱机。如果您使用适当的列列表（仅限于您需要的实际列，而不是使用`SELECT *`. [即使您确实需要所有列，也应该更改此设置](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)。

您的`IN ()`查询，带有昂贵的表线轴（[点击放大](https://i.stack.imgur.com/umzBv.png)）：

![在此处输入图像描述](../Images/f68e15e3a8dd3d8c2a0ed508792dffb9.png)

我的`JOIN`版本，成本转移到你正在做的扫描（[点击放大](https://i.stack.imgur.com/izhqX.png)）：

![在此处输入图像描述](../Images/3f22444b55b186268743d069a061990d.png)

以下是运行时指标（当然基于少量行）-（[点击放大](https://i.stack.imgur.com/31Mz5.png)）：

![在此处输入图像描述](../Images/b2030122294df6f83c829707e167a8fa.png)

转换错误似乎源于该功能。所以我替换了我自己的（下）。即使添加了我们最初不知道的外键，[我也无法重现错误](http://sqlfiddle.com/#!3/c4044/1)。我不确定原始函数到底有什么问题，但它创建的所有隐式转换似乎都会在某些时候给优化器带来问题。所以我建议改用这个：

```
CREATE FUNCTION dbo.SplitInts
(
   @List       VARCHAR(MAX),
   @Delimiter  VARCHAR(255) = ','
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN 
   (  
      SELECT [value] = y.i.value('(./text())[1]', 'int')
      FROM 
      ( 
        SELECT x = CONVERT(XML, '<i>' 
          + REPLACE(@List, @Delimiter, '</i><i>') 
          + '</i>').query('.')
      ) AS a CROSS APPLY x.nodes('i') AS y(i)
   );
GO 
```

所以，在我看来你想摆脱这个功能。

此外，这是使用连接的一种方法，并且仍然使参数可选：

```
DECLARE @param VARCHAR(MAX) = NULL;-- also try = '1,2,3';

SELECT r.*
FROM dbo.Requests AS r
LEFT OUTER JOIN dbo.SplitInts(@param, default) AS s
ON r.RequestStatusUID = s.value
WHERE (r.RequestStatusUID = s.value OR @param IS NULL); 
```

# javascript - marginLeft 仅在调用两次时重置

> ID：15646234
> 
> 赞同：1
> 
> 时间：2013-03-26T19:56:54.107
> 
> 标签：javascript, jquery

我创建了一个基本的轮播类型 slidshow，但是为了让它工作，我必须调用以下函数两次才能将 margin-left 属性实际设置为 0px。

`$("#slide ul").stop().css('marginLeft', '0px');`

我想知道我做错了什么，因为我是 jquery 的新手。

整个事情可以在这里找到[http://jsfiddle.net/xZBZK/](http://jsfiddle.net/xZBZK/)

只是为了方便起见的JavaScript：

```
var offset = 0;
var count;
var width = 500;
var height = 333;
var interval;

$(document).ready(function() {
    count = $("#slide ul").children().length;
    // Add the first image to the end so it loops.
    $("#slide ul").children().first().clone().appendTo("#slide ul");
    start();
});

function nextImage() {
    $("#slide ul").stop();
    offset+=width;
    if(offset / width == count) { 
        $("#slide ul").animate({'marginLeft':'-'+offset+'px'}, 700, 'linear', resetImage);
    }
    $("#slide ul").animate({'marginLeft':'-'+offset+'px'}, 700);
    return offset;
}

function resetImage() {
    $("#slide ul").stop().css('marginLeft', '0px');
    $("#slide ul").stop().css('marginLeft', '0px');
    offset = 0;
    //start();
}

function stop() {
    clearInterval(interval);
}

function start() {
    interval = setInterval(nextImage, 3000);
} 
```

我正在使用**JQuery 1.9.1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:02:15.503

是因为您将两个动画加载到队列中吗？

```
if(offset / width == count) { 
    $("#slide ul").animate({'marginLeft':'-'+offset+'px'}, 700, 'linear', resetImage);
}
$("#slide ul").animate({'marginLeft':'-'+offset+'px'}, 700); 
```

也许你想要：

```
if(offset / width == count) { 
    $("#slide ul").animate({'marginLeft':'-'+offset+'px'}, 700, 'linear', resetImage);
}else{
    $("#slide ul").animate({'marginLeft':'-'+offset+'px'}, 700);
} 
```

我认为`.stop()`只会停止当前动画并且不会清除队列。所以它默认为之前的动画。

# google-api - 如何重置 google oauth 2.0 授权？

> ID：15646235
> 
> 赞同：21
> 
> 时间：2013-03-26T19:56:56.967
> 
> 标签：google-api, oauth-2.0, google-oauth, google-api-client

我正在使用[适用于 JavaScript 的 Google API 客户端库（Beta 版）](https://developers.google.com/api-client-library/javascript/)在 Web 应用程序上授权用户 google 帐户（用于 youtube 操作）。一切正常，但我不知道如何从我的应用程序中“注销”用户，即重置访问令牌。

例如，以下代码检查用户授权，如果没有，则显示弹出窗口供用户登录帐户并允许 Web 应用程序访问用户数据：

```
gapi.auth.authorize({client_id: CLIENT_ID, scope: SCOPES, immediate: false}, handleAuth); 
```

但是客户端库没有重置授权的方法。

有将用户重定向到“accounts.google.com/logout”的[解决方法](https://groups.google.com/forum/?fromgroups=#!topic/google-api-javascript-client/PCs8xXV4wxk)，但我不需要这种方法：因此我们不仅从我的应用程序，而且在任何地方都从谷歌帐户注销用户。

谷歌常见问题和客户端库描述都没有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T00:34:00.143

尝试撤销访问令牌，这应该会撤销实际授权，因此自动批准将停止工作。我认为这将解决您的问题。

[https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke](https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-23T13:29:14.850

它非常简单。只需撤销访问权限。

```
void RevokeAcess()
{
    try{
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/revoke?token="+ACCESS_TOKEN);
    org.apache.http.HttpResponse response = client.execute(post);
    }
    catch(IOException e)
    {
    }
} 
```

但它应该在 asyncTask

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-24T14:10:22.730

这取决于您重置授权的含义。我可以想到三种方法来做到这一点：

1.  删除服务器上的授权
    转到 myaccount.google.com/permissions，找到您的应用并将其删除。下次您尝试登录时，您必须使用帐户选择器和同意屏幕完成完整的授权流程。

2.  在客户端上
    注销 gapi.auth2.getAuthInstance().signOut();
    这样，Google 授权服务器仍会记住您的应用，并且授权令牌仍保留在浏览器存储中。

3.  退出并断开
    gapi.auth2.getAuthInstance().signOut();
    gapi.auth2.getAuthInstance().disconnect();
    这等效于 (1) 但在客户端上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-03T15:59:30.853

只需使用：`gapi.auth.setToken(null);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-10T14:21:53.070

dotnet 的解决方案，调用下面的 API 并传递访问令牌，文档 - [https://developers.google.com/identity/protocols/oauth2/web-server#tokenrevoke](https://developers.google.com/identity/protocols/oauth2/web-server#tokenrevoke)

```
 string url = "https://accounts.google.com/o/oauth2/revoke?token=" + profileToken.ProfileAccessToken;
        RestClient client = new RestClient(url);

        var req = new RestRequest(Method.POST);
        IRestResponse resp = client.Execute(req); 
```

# ruby-on-rails - 从数据库信息创建图表

> ID：15646236
> 
> 赞同：0
> 
> 时间：2013-03-26T19:56:57.503
> 
> 标签：ruby-on-rails, html

我一直在尝试查看很多库，但找不到可以帮助我的库，我已经查看了 diagramo 和 gojs 以及许多可以让您从浏览器中绘制图表的画布库。

我正在开发一个应用程序，该应用程序根据用户键入的信息创建因果图，此信息保存在数据库中，我需要从数据库中创建一个类似这样的图表

[http://www.fao.org/WAIRdocs/x5405s/x5405s0h.gif](http://www.fao.org/WAIRdocs/x5405s/x5405s0h.gif)

您可能知道的任何好的图书馆可以帮助我吗？我使用 ROR 作为开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T06:00:28.977

这两个有什么问题？

我正在用 GoJS 做这件事，它很棒——不幸的是，那个库的价格很高。

# windows - Windows 8 应用程序部署无需上传到 Windows 商店？

> ID：15646240
> 
> 赞同：2
> 
> 时间：2013-03-26T19:57:18.163
> 
> 标签：windows, windows-runtime

我已经使用 Visual Studio Express Edition 2012 开发了一个 Windows 8 应用程序，我想将该应用程序安装在 Windows 8 平板电脑上

我不想将应用程序上传到 windows 商店，它只适用于一群人，如何在 windows 8 平板电脑中安装应用程序包

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:39:11.363

转到商店菜单并选择“创建应用程序包”（或类似的 - 我在完整的 VS 中执行此操作，我认为它应该在 Express 中类似）。创建一个包并选择一个选项以不将其保存到商店。完成后 - 您应该获得一个指向保存包的文件夹的链接以及用于安装它的 PowerShell 脚本。只需将整个包复制到您要部署它的机器上并在该机器上运行脚本。

这是一个开发人员选项，需要在测试机器上输入您的免费开发人员帐户凭据，但可能比我不太熟悉的企业侧载的其他选项更容易。

# javascript - jQuery将单个类与元素具有多个类的预定义列表匹配

> ID：15646253
> 
> 赞同：4
> 
> 时间：2013-03-26T19:58:07.777
> 
> 标签：javascript, jquery, event-handling

我试图弄清楚是否有办法`.hasClass()`多次执行以查看我正在使用的活动元素是否具有当前四个特定类之一，我还试图找出最优化的方法来执行此操作，而元素(s) 作为触发器（或活动元素）有多个类，主要用于样式目的。

HTML 示例：

```
<div class="form_row">
    <div class="primary_row">1</div>
</div>
<div class="form_row">
    <div class="primary_row subexists">1</div>
    <div class="primary_row_sub">1a</div>
</div>
<div class="form_row">
    <div class="primary_row subexists">1</div>
    <div class="primary_row_sub subexists">1a</div>
    <div class="secondary_row">2</div>
</div>
<div class="form_row">
    <div class="primary_row subexists">1</div>
    <div class="primary_row_sub subexists">1a</div>
    <div class="secondary_row subexists">2</div>
    <div class="secondary_row_sub">2a</div>
</div> 
```

我目前正在构建它，所以这仍然是一个粗略的草案，但可以安全地假设根据需要在各种元素上存在更多类。我担心的四个主要课程是`primary_row, primary_row_sub, secondary_row, secondary_row_sub`。我正在构建一个点击处理程序，例如：

```
$('.form_row > div').click(function()
{
   //code
}); 
```

在这个点击处理程序中，我希望能够检测点击的元素是否是上述四个之一。如果它在哪里，我想根据它做一些事情。因此，确定哪个类是单击的元素，而不是为每种类型构建四个单击处理程序。我希望我可以将其优化并包含在单个处理程序中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:17:56.520

一种选择：

```
var classMap = {"one": function () { alert("one");}, 
                "two": function () { alert("two");},
                "three": function () { alert("three");} 
               }
,   classes = "";

$('div').click(function (e) {
    classes = this.className.split(" ");
    for (key in classMap) {
        if ($.inArray(key, classes) !== -1) {
            classMap[key]();
        }   
    }
}); 
```

[http://jsfiddle.net/wp9X7/5/](http://jsfiddle.net/wp9X7/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:04:04.650

```
if ($(this).is(".primary_row")) {
    ...
} elseif ($(this).is(".primary_row_sub")) {
    ...
} and so on 
```

# python - Python数组组合

> ID：15646264
> 
> 赞同：0
> 
> 时间：2013-03-26T19:58:32.533
> 
> 标签：python, arrays

我正在尝试将一些 Python 代码移植到 Java。我对 Python 不熟悉，以前从未在任何语言中看到过这种情况：

```
return [c,] + s 
```

这条线到底是什么意思？特别是 [c,] 部分。它是结合两个数组还是什么？s 是整数数组，c 是整数。完整功能如下（来自维基百科：[http](http://en.wikipedia.org/wiki/Ring_signature) ://en.wikipedia.org/wiki/Ring_signature ）

```
def sign(self,m,z):
    self.permut(m)
    s,u = [None]*self.n,random.randint(0,self.q)
    c = v = self.E(u) 
    for i in range(z+1,self.n)+range(z):
        s[i] = random.randint(0,self.q)
        v = self.E(v^self.g(s[i],self.k[i].e,self.k[i].n)) 
        if (i+1)%self.n == 0: c = v
    s[z] = self.g(v^u,self.k[z].d,self.k[z].n)
    return [c,] + s 
```

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:00:37.803

逗号是多余的。它只是创建一个元素列表：

```
>>> [1,]
[1]
>>> [1] == [1,]
True 
```

实践来自于在 Python中创建*元组；*单元素元组需要逗号：

```
>>> (1)
1
>>> (1,)
(1,)
>>> (1) == (1,)
False 
```

该`[c,] + s`语句创建一个新列表，其值为`c`第一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T20:00:28.397

`[c,]`与 完全相同`[c]`，即单项列表。

（请参阅[此答案](https://stackoverflow.com/a/11597911/770830)以了解为什么需要此语法）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:02:30.123

对于列表，多余的逗号是多余的，可以忽略。如果它是一个元组而不是一个列表，那么它唯一会有所作为

```
[c,] and [c] are the same but,
(c,) and (c) are different. The former being a tuple and later just a parenthesis around an expression 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:06:00.263

要回答您的两个问题，该行连接两个列表，这两个列表中的第一个是单元素列表，因为逗号只是被 python 忽略

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T20:39:50.537

I believe you are correct, it is combining two "arrays" (lists in python). If I'm not mistaken, the trailing comma is unnecessary in this instance.

```
x = [1,2,3]
y = [1] + x

#is equivalent to

x = [1,2,3]
y = [1,] + x 
```

The reason Python allows the use of trailing commas in lists has to do with another data type called a tuple and ease of use with multi-line list declaration in code.

[Why does Python allow a trailing comma in list?](https://stackoverflow.com/questions/11597901/trailing-comma-in-list-not-invalid-syntax)

# flash - 如何从 Flash 库中加载图像？

> ID：15646265
> 
> 赞同：0
> 
> 时间：2013-03-26T19:58:40.283
> 
> 标签：flash, flash-cs5, flashdevelop

我正在开发一个涉及鼠标悬停缩放效果的广告。目前它正在加载放置在同一文件夹中的外部图像。

我在找什么：我需要从同一个 Flash 库中加载图像。任何人都可以快速帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:57:47.980

您不能从库中加载某些内容，但可以从 Flash 库中创建对象实例。您必须在库中设置库中图像属性中的类字段。示例：类 - 测试

在代码中创建此图像的实例

```
var Example:Class = getDefinitionByName("Test") as Class;
var image:BitmapData = new Example(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:05:00.480

在 ActionScript 中，Loader 类是一个 DisplayObject，因此您可以执行以下操作：

```
var imageLoader:Loader = new Loader();
var image:URLRequest = new URLRequest("path/to/image.format");
imageLoader.load(image);
addChild(imageLoader);
imageLoader.x = 200;
imageLoader.y = 300; 
```

请注意，您需要导入适当的类（请参阅 AS3 文档并查找上述类并使用相应的导入语句），并且传递给 URLRequest 构造函数的路径是相对于您导出的 .swf 文件而不是到您的源文件夹。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:09:28.870

如果要制作图形库，则必须执行以下操作：

1) 创建（或使用现有的）.fla，在 Flash CS 中打开它。

2）将您的图片导入其中（使用文件-导入-导入到舞台）；

3) 在图像的属性中选择 ActionScript 选项卡并选择“Export for ActionScript”和“Export in frame 1”。为您的图像设置名称（在我的示例中，我将其设置为“myImage”）并将 BaseClass 设置为 flash.display.BitmapData。

4) 保存您的 .fla 并将其发布为 .swc（您必须在文件 - 发布设置中选择此格式）。

5) 在您的项目中包含 .swc（执行此操作的方式取决于您使用的 IDE）。

6）瞧，您可以使用以下代码访问 lib 中的任何图像：

```
var img:BitmapData = new myImage(); 
```

*如果您使用Flash CS编写代码，即使不创建.swc也可以调用您的位图，因此您可以忽略步骤4和5。只需导入图像并将其设置为AS3链接。

# nsstring - NSnumber 到 NSstring

> ID：15646270
> 
> 赞同：0
> 
> 时间：2013-03-26T19:58:51.663
> 
> 标签：nsstring, nsnumber

```
Stock *stockObject;

stockObject = [[Stock alloc]initWithIssuingCompany:addCompany stockName:@"one" stockPrice:[NSNumber numberWithFloat:150.3]];       

[availableStocks addObject:stockObject];

float myfloat = [s.stockPrice floatValue]; 
```

NSLog(@"singleton@%f", myfloat);

试试这段代码，但它会迷恋：

```
float myfloat = [s.stockPrice floatValue]; 
```

没有错误。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:03:05.037

shouldn't it be `[stockObject.stockPric floatValue]` ?

# neo4j - neo4j 中的多个负载

> ID：15646272
> 
> 赞同：1
> 
> 时间：2013-03-26T19:58:58.107
> 
> 标签：neo4j

我已经使用批量导入器在 neo4j 图形数据库中加载了一些数据。现在让我们说，如果我必须加载更多数据，那么我是否必须跟踪外部插入的内容，或者 Neo4j 的标准功能可用于：

1）获取插入的最后一个节点的ID，以便我知道需要插入的新节点的ID并相应地索引。

2）获取数据库中已经存在的节点列表，以便我可以检查将要插入的节点的唯一性。如果数据库中已经存在一个节点，我将只使用相同的 id 而不会创建新节点。

3) 检查三元组的唯一性 - 假设 neo4j 数据库中已经存在一个三元组“January Month is_a”，假设我要插入的新数据也有相同的三元组，我不想插入它，因为它会给我重复的结果。

例如：如果您使用批处理导入器在 neo4j 图形数据库中添加以下数据：[https ://github.com/jexp/batch-import](https://github.com/jexp/batch-import)

```
$ cat nodes.csv
name age works_on
Michael 37 neo4j
Selina 14
Rana 6
Selma 4

$ cat nodes_index.csv
0 name age works_on
1 Michael 37 neo4j
2 Selina 14
3 Rana 6
4 Selma 4

$ cat rels.csv
start end type since counter:int
1 2 FATHER_OF 1998-07-10 1
1 3 FATHER_OF 2007-09-15 2
1 4 FATHER_OF 2008-05-03 3
3 4 SISTER_OF 2008-05-03 5
2 3 SISTER_OF 2007-09-15 7 
```

现在，如果您必须向同一个数据库添加更多数据，那么您需要了解以下内容：

1）如果节点已经存在，那么它们的 id 是什么，以便您可以在创建三元组时使用它们，如果没有，则创建此类节点的列表（不在数据库中），然后从上次导入中未使用的 id 开始并将其用作创建新 nodes_index.csv 的起始 id

2）如果数据库中已经存在三元组，则不要再次创建该三元组，因为在对数据库运行密码查询时会导致重复结果。

似乎这里也提出了同样的问题：[https ://github.com/jexp/batch-import/issues/27](https://github.com/jexp/batch-import/issues/27)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:22:52.810

1-为什么你需要知道最后一个节点 id ..你不需要知道 id 来插入新节点，它将自动添加到图中的第一个空闲 id

2-为了唯一性，为什么你不使用创建唯一查询“也用于节点和关系”

在这里您可以查看参考资料：[http ://docs.neo4j.org/chunked/1.8/cypher-query-lang.html](http://docs.neo4j.org/chunked/1.8/cypher-query-lang.html)

# matlab - 曲线拟合错误和其他语法问题

> ID：15646278
> 
> 赞同：0
> 
> 时间：2013-03-26T19:59:05.717
> 
> 标签：matlab, curve-fitting, linear-regression

我有一组向量“measured_data”，其中包含 200 个正浮点值的样本数据。我很难找到适合这个数据的模型。下面的代码在每一步都返回错误，即在评论预测（）时，下一个命令抛出另一个错误......所以似乎没有任何工作。我彻底去了通过文档，我似乎无法理解问题出在哪里以及哪里出错了。如果有人可以通过代码并帮助减轻问题，我将不胜感激。谢谢。

```
Undefined function 'predict' for input
arguments of type 'double'.

Error in Untitled (line 157)
model2_pred = predict(model2_coeff, model2_data, 1); 
```

代码

```
model1 = ar(measured_data, 2,'yw');
model2 = ar(measured_data, 5,'yw');
coeffs1 = model1.a;
model1_coeff=[coeffs1(2) coeffs1(3)]
coeffs2 = model2.a;
model2_coeff=[coeffs2(2) coeffs2(3) coeffs2(4) coeffs2(5)]
x(1) = 0.0;
x(2) = 0.0;
y(1) = 0.0;
y(2) = 0.0;

y(3) = 0.0;
y(4) = 0.0;

%Solve for Model1 by putting in the coefficient values
for i=3:200
  x(i) = coeff1(2) *x(i-1) +coeff2(3)*x(i-2) ;
end  

model1_data=x;

%Solve for Model2 by putting in the coefficient values
for i=5:200
  y(i) = coeff2(2) *y(i-1) +coeff2(3)*y(i-2) +coeff2(4)*y(i-3) +coeff2(5)*y(i-4) ;

end  
model2_data=y;

model1_pred = predict(model1_coeff, model1_data, 1);
model1_residual=model1_data-model1_pred;
model1_err = resid(model1_coeff,measured_data);  %prediction errors
model2_err = resid(model2_coeff,measured_data);
subplot(1,2,1);
plot(model1_err);
subplot(1,2,2);
plot(model2_err);

model1_mse=sqrt(mean((measured_data-model1_coeff).^2));  %Mean square error
model2_mse=sqrt(mean((measured_data-model2_coeff).^2));

compare(measured_data,model1_coeff,'g',model2_coeff,'b'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:26:38.057

如果您提供错误类型的输入，则可能会出现此错误。例如，文档中的标准示例对我来说很好，但如果我尝试一些无意义的事情，我会得到同样的错误：

```
predict(1,1,1) 
```

检查：

1.  第一个输入是 idmodel 或 idnlmodel 对象（可以从 ar 获得的 idpoly）。
2.  第二个输入（数据）是一个 iddata 对象（时间序列）。

# grails - 具有内部内容的 Grails GSP 外部模板？

> ID：15646286
> 
> 赞同：0
> 
> 时间：2013-03-26T19:59:33.377
> 
> 标签：grails, grails-2.0, gsp

Grails GSP中有没有办法替换以下内容

```
<tmpl:/templates/header />
<!-- tmpl namespace call is equivalent to <g:render template="/templates/header" /> -->    

<!-- definition of inner content -->

<tmpl:/templates/footer /> 
```

使用外部模板？本质上，一种导入包装外部模板的方法，

```
<outertemplate:templatename>
<!-- header will be rendered from outer template -->

<!-- definition of inner content -->

<!-- footer will be rendered from outer template -->
</outertemplate:templatename> 
```

并且外部模板的定义类似于

```
<!-- definition of header content -->

<!-- placeholder or attr for inner content -->

<!-- definition of footer content --> 
```

将包装内容封装在一个模板而不是两个模板中。IIRC 在 JSF 下有一种方法可以做到这一点，但我在 GSP 下找不到等价物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:15:26.140

好的，所以我一直在寻找[Grails 的 SiteMesh 布局支持](http://grails.org/doc/latest/guide/theWebLayer.html#layouts)，它允许我以比模板更雄辩的方式定义常用的视图标记。

所以页眉和页脚内容可以放在布局内

```
<html>
    <head>
        <title><g:layoutTitle/></title>
        <g:layoutHead />
    </head>
    <body>
        <!-- HEADER CONTENT DEFINED HERE (or for stuff in head in the head above -->
        <g:layoutBody />
        <!-- FOOTER CONTENT DEFINED HERE -->
    </body>
</html> 
```

然后使用布局，

```
<html>
    <head>
        <title>An Example Page</title>
        <meta name="layout" content="main" />
    </head>
    <body>This is my content!</body>
</html> 
```

我认为这比页眉和页脚模板更干净。

[您还可以嵌套布局。](http://mrhaki.blogspot.com/2011/03/grails-goodness-applying-layouts-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:25:51.500

您可以使用标签库创建类似的内容。

```
class SimpleTagLib {
    def emoticon = { attrs, body ->
       out << body() << (attrs.happy == 'true' ? " :-)" : " :-(")
    }
} 
```

`emoticon`这定义了一个可以在 gsp 中使用的标签，如下所示：

```
<g:emoticon happy="true">Hi John</g:emoticon> 
```

`body()`用于渲染标签正文内容。

[（示例是从官方grails 文档](http://grails.org/doc/latest/guide/theWebLayer.html#6.3%20Tag%20Libraries)中复制的）

# image - matlab中具有静态阈值的蒙版图像

> ID：15646288
> 
> 赞同：1
> 
> 时间：2013-03-26T19:59:44.050
> 
> 标签：image, matlab, video, image-processing, morphological-analysis

我需要在 matlab 中以平均强度的 10% 的静态阈值对图像进行二值化。我发现使用平均强度`mean2(Image)`，这会在其中一个图像中返回一个平均值`15.10`。因此我的平均阈值是`1.51`。`im2bw(image,level)`在 0 到 1 之间取阈值。在这种情况下，如何在 matlab 中对我的图像进行二值化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:07:27.603

1) 您可以先使用 . 将原始图像转换为双格式`im2double()`。然后所有像素值都将在 0 和 1 之间。然后你可以使用`im2bw(im,level)`.

2）如果您不想将图像转换为double，那么您可以这样做。假设阈值是平均值的 10%，例如`threshold = 1.51`。让我们表示您拥有的图像是`im`. 然后`im(im<threshold) = 0; im(im>=threshold)=1`。经过这两次操作，`im`就会变成二值图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:13:25.553

如果要使用，您需要对图像的平均值与最大强度的结果进行归一化`im2bw`（提到的其他解决方案当然是正确且有效的）：

```
ImageN=Image./max(Image(:))
t = mean2(ImageN) * 0.1 % Find your threshold value 
im2bw(Image,t) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T20:04:17.860

您可以使用简单的逻辑语句对图像进行二值化。为了完整起见，我还添加了阈值确定。

```
threshold = mean(Image(:));

binaryMask = Image > 0.1 * threshold; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T20:09:30.167

假设您的图像是一个矩阵`img`，您可以执行以下操作：

```
t = mean2(img) * 0.1 % Find your threshold value
img(img < t) = 0 % Set everything below the treshold value to 0
img(img ̃= 0) = 1 % Set the rest to 1 
```

# sql - Sqlite 事务 - 保留锁什么时候生效

> ID：15646289
> 
> 赞同：1
> 
> 时间：2013-03-26T19:59:46.440
> 
> 标签：sql, sqlite, transactions

在发出 SqliteConnection BeginTransaction() 调用后，我想知道 Reserve Lock 是否参与并开始阻止写入？

Reserve Lock 是否对应于实际的 BeginTransaction 调用，还是仅在调用 Commit 并且事务运行之后？

我问 b/c，为了利用我现有的数据访问层，并且每次我需要一个来防止竞争条件时都不必编写自定义事务，我不想调用 BeginTransaction()，然后调用任何组合现有的 Select/Insert/Update 包装器来解决手头的问题，同时拥有独占写入访问权限，然后最终调用 Commit。为了防止我试图避免的竞争条件，我会要求事务上的保留锁在调用 BeginTransaction 时“立即”处于活动状态（即，在它返回之前的某个时间）。

如果需要更多说明或详细信息，请告诉我，我很乐意提供。谢谢你的专业知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:26:09.053

[文档](http://www.sqlite.org/lang_transaction.html)说：

> 对数据库的第一个读操作创建一个共享锁，第一个写操作创建一个保留锁。

当所有更改都适合页面缓存时，第一个实际写入操作将在`COMMIT`.

要在执行时强制 SQLite 锁定，请`BEGIN`使用以下命令启动事务`BEGIN IMMEDIATE`：

> 在 BEGIN IMMEDIATE 之后，没有其他数据库连接能够写入数据库或执行 BEGIN IMMEDIATE 或 BEGIN EXCLUSIVE。但是，其他进程可以继续从数据库中读取。

如果您想防止读取（这不是必需的，因为在任何情况下所有事务都已正确序列化），请使用`BEGIN EXCLUSIVE`.

# css - 调整页面大小时显示\隐藏 Div 定位中断

> ID：15646290
> 
> 赞同：1
> 
> 时间：2013-03-26T19:59:54.207
> 
> 标签：css, html, show-hide

第一篇文章和一个菜鸟。

我正在学习 html\css 并且通常在这里通过一些搜索来解决大多数问题。我似乎无法通过下面的页面解决这个问题。基本上我想要几个围绕一个包含隐藏文本的 div 的圆圈中的图像。当我将鼠标悬停（或稍后单击）图像时，应显示相关文本 - 然后在下一个图像悬停时隐藏\更改（想想人物和个人资料）

到目前为止，页面做了我想要的 - 全屏。当我缩小浏览器窗口时，文本保持不变，所有其他元素都移动。我知道我有位置：固定在图像 .hover 上，这就是问题所在。但是如果我将 :fixed 更改为任何其他值，它会中断吗？

我在这里阅读了很多答案，我花了几个小时试图弄清楚但失败了，现在我对我无法解决我确信这是一个非常简单的问题感到沮丧。

我想要的只是在调整浏览器窗口大小时将文本保持在图像圈中心的 div。我需要在此代码中进行哪些更改才能实现此目的？有没有更好的方法来做我想做的事？

我希望你能理解我的挫败感，不要给我太多时间 :-) 我以前从来没有遇到过定位问题——直到试图显示\隐藏一个 div。

```
<!DOCTYPE html>
<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>Untitled</title>

<style>

#image {
    position:relative;
    width:180px;
    height:140px;

}

#image .hover {
    display:none ;
    position:fixed;

}

#image:hover .hover {
    display:block;

}

#wrapper{
    width:960px;
    margin :0px auto ; 
    text-align: center ;
}

#banner{
    height:250px;
}

#content{

}

</style>

</head>

<body>

<div id="wrapper">

    <div id="banner"></div>

    <div id="content">

        <div id="image" style="left: 383px; top: 31px; width: 135px; height: 192px;">
            <img src="images/img-placeholder.jpg" alt="" height="176" width="127"/>

            <div class="hover" style="left: 440px; top: 480px; width: 388px; height: 440px">
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>

            </div>

        </div>

        <div id="image" style="left: 97px; top: -83px; width: 135px; height: 192px;">
            <img src="images/img-placeholder.jpg" alt="" height="176" width="127"/>

            <div class="hover" style="left: 440px; top: 480px; width: 388px; height: 440px">

                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>

            </div>

        </div>

        <div id="image" style="left: 652px; top: -272px; width: 135px; height: 192px;">
            <img src="images/img-placeholder.jpg" alt="" height="176" width="127"/>

            <div class="hover" style="left:  440px; top: 480px; width: 388px; height: 440px">

                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>

            </div>

        </div>

        <div id="image" style="left: 91px; top: 50px; width: 135px; height: 192px;">
            <img src="images/img-placeholder.jpg" alt="" height="176" width="127"/>

            <div class="hover" style="left: 440px; top: 480px; width: 388px; height: 440px">

                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
            </div>

        </div>

        <div id="image" style="left: 370px; top: -80px; width: 135px; height: 192px;">
            <img src="images/img-placeholder.jpg" alt="" height="176" width="127"/>

            <div class="hover" style="left:  440px; top:480px; width: 388px; height: 440px">

                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>

            </div>

        </div>

        <div id="image" style="left: 650px; top: -318px; width: 135px; height: 192px;">
            <img src="images/img-placeholder.jpg" alt="" height="176" width="127"/>

            <div class="hover" style="left:  440px; top: 480px;width: 388px; height: 440px">

            <p>Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
                <p>Eight Lines of text here Eight Lines of text here</p>
            </div>

        </div>

</div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:08:46.460

通常将 margin:auto 添加到元素可以工作，但对于 position 它可能不会。

您最好的选择是使用 JavaScript（甚至 jQuery）来获取屏幕高度和宽度。您可能还需要在调整大小时再次检查并获取屏幕尺寸。

这是一篇很好的文章，可以帮助您入门： [Using jQuery to center a DIV on the screen](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)

如果你不想使用 JS...

尝试这样的事情：http: [//jsfiddle.net/RbFnm/10/](http://jsfiddle.net/RbFnm/10/)

```
#box{margin: auto; background: #000; position: relative; z-index: 1; width: 300px; height: 300px;}
#subbox{background: #ccc; position: absolute; width: 50px; height: 50px; z-index: 3; top: 10px; left: 10px;}
#special{background: #ccc; width: 90px; height: 90px; position: absolute; top: 50%; left: 50%; margin: -45px 0 0 -45px; z-index: 5;} 
```

以及垂直对齐的提示：http: [//phrogz.net/css/vertical-align/](http://phrogz.net/css/vertical-align/)

# java - 当我在我的电子邮件客户端中设置阻止 HTML 电子邮件时会发生什么

> ID：15646292
> 
> 赞同：2
> 
> 时间：2013-03-26T19:59:56.877
> 
> 标签：java, html, html-email, email-client

当我选择在我的电子邮件客户端中阻止 HTML 电子邮件时会发生什么？

1.  它会从我的电子邮件中删除 HTML 内容吗？
2.  它是否在 MIME 内容中寻找替代文本部分？

我尝试了 Outlook 2010，它剥离了 HTML 内容并只显示了文本。我不确定它是否因为它找不到文本内容或 Outlook 只是停止寻找文本内容并剥离 HTML。

下面是我的代码片段，

```
//HTML Version
BodyPart htmlBodyPart = new MimeBodyPart();
htmlBodyPart.setContent(htmlContent, "text/html");

//Text Version
BodyPart textBodyPart = new MimeBodyPart();
textBodyPart.setContent(textContent, "text/plain");

Multipart multipart = new MimeMultipart("alternative");
multipart.addBodyPart(textBodyPart); //add text part
multipart.addBodyPart(htmlBodyPart); //add html part 
```

令人惊讶的是，谷歌在这方面没有帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:30:37.673

Outlook 似乎不使用 text/plain 替代方案，并且当配置为将消息显示为纯文本时，它使用 text/html 部分，转换为纯文本。

我在以下链接中找到了对该行为的确认：

*   [http://www.campaignmonitor.com/blog/post/2520/testing-the-plain-text-version](http://www.campaignmonitor.com/blog/post/2520/testing-the-plain-text-version)
*   [http://answers.microsoft.com/en-us/office/forum/office_2007-customize/outlook-multipart-text-only-version/41b88569-fa64-e011-8dfc-68b599b31bf5](http://answers.microsoft.com/en-us/office/forum/office_2007-customize/outlook-multipart-text-only-version/41b88569-fa64-e011-8dfc-68b599b31bf5)
*   [http://social.technet.microsoft.com/Forums/en-US/exchangesvrclientslegacy/thread/7bcb49d9-8d2c-4993-8f00-47984a079a63/](http://social.technet.microsoft.com/Forums/en-US/exchangesvrclientslegacy/thread/7bcb49d9-8d2c-4993-8f00-47984a079a63/)
*   [http://www.pcreview.co.uk/forums/text-plain-part-multipart-message-ignored-html-part-converted-instead-outlook-2003-a-t2726684.html](http://www.pcreview.co.uk/forums/text-plain-part-multipart-message-ignored-html-part-converted-instead-outlook-2003-a-t2726684.html)

其他（大多数？）电子邮件客户端，例如 Thunderbird，在配置为将消息显示为文本时将显示 text/plain 替代。但是 Outlook 所做的（使用 text/html 部分）似乎不是一个错误 - 来自 Wikipedia [MIME](http://en.wikipedia.org/wiki/MIME#Alternative)：

> 然后系统可以选择它们能够处理的“最佳”表示；一般来说，这将是系统可以理解的最后一部分，尽管其他因素可能会影响这一点。

显然，还建议在 HTML 和 TEXT 版本中包含相似的内容，以避免被归类为垃圾邮件 - 来自同一个 Wikipedia 页面：

> 反垃圾邮件软件最终赶上了这个技巧，在多部分/替代消息中惩罚具有非常不同文本的消息。

所以，我建议构建 text/plain 部分，将 text/html 部分的内容转换为文本，以便

*   所有配置为将电子邮件显示为文本的电子邮件客户端都以相同的方式显示电子邮件内容
*   由于内容不同，被分类为垃圾邮件的概率不会增加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:49:12.913

大多数现代浏览器将使用 text/plain 替代方案来显示没有 HTML 的电子邮件（因此它们将切换到电子邮件的纯文本版本。如果不可用，它们将剥离 HTML 并仅显示文本。或者，在换句话说，解析 html 而不要使用它。除此之外，我很确定您将能够找到一些无法剥离 html 的邮件客户端，并且只会向您显示原始 html 代码。

# android - 如何在 Google Maps v2 上进行即时刷新

> ID：15646295
> 
> 赞同：0
> 
> 时间：2013-03-26T20:00:22.823
> 
> 标签：android, google-maps, service, google-maps-markers

我正在使用服务从存储在数据库中的一些地址计算 LatLng。当我有很多地址时，计算速度会变慢，当我打开谷歌地图时，屏幕上并没有显示所有标记，因为服务仍在后台计算。有没有办法在地图仍然打开的情况下自动出现标记？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:10:37.033

您可能应该在将数据输入数据库时​​而不是在显示时对数据进行地理编码。如您所见，地理编码很慢，最好缓存地理编码结果。或者至少在您第一次遇到地址时保存地理编码结果。

注意：Google 对您可以使用其地理编码服务的用途有限制。如果您使用了 Google 的地理编码，那么您只能在 Google Maps API 中使用该 lat/lng。

确实存在免费/开源的地理编码器。在我看来/经验中，谷歌的地理编码器比开源的更好。（但它有限制。）

# extjs - ExtJS 服装店代表

> ID：15646296
> 
> 赞同：0
> 
> 时间：2013-03-26T20:00:26.573
> 
> 标签：extjs, store

如果有任何 ExtJS 方式可以加载存储数据并且加载后我可以在主面板中创建其他我的组件（自定义面板）以我的特定方式显示该数据，我会徘徊吗？

![在此处输入图像描述](../Images/58af0dce75e20b9558580e48a8585dfc.png)

我想用我的自定义组件在面板中显示数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:47:26.607

你有两个选择：

1.  如果您只需要显示数据，那么[DataView](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View)就是为此任务量身定制的。
2.  如果您确实需要一个组件（即，封装用户交互而不仅仅是显示的组件），那么您需要创建此组件，并在您的商店加载时为每个记录创建一个组件并将其添加到您的主面板。

要复制 dataview 的[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View)示例（选项 1）：

```
Ext.define('Image', {
    extend: 'Ext.data.Model',
    fields: [
        { name:'src', type:'string' },
        { name:'caption', type:'string' }
    ]
});

Ext.create('Ext.data.Store', {
    id:'imagesStore',
    model: 'Image',
    data: [
        { src:'http://www.sencha.com/img/20110215-feat-drawing.png', caption:'Drawing & Charts' },
        { src:'http://www.sencha.com/img/20110215-feat-data.png', caption:'Advanced Data' },
        { src:'http://www.sencha.com/img/20110215-feat-html5.png', caption:'Overhauled Theme' },
        { src:'http://www.sencha.com/img/20110215-feat-perf.png', caption:'Performance Tuned' }
    ]
});

var imageTpl = new Ext.XTemplate(
    '<tpl for=".">',
        '<div style="margin-bottom: 10px;" class="thumb-wrap">',
          '<img src="{src}" />',
          '<br/><span>{caption}</span>',
        '</div>',
    '</tpl>'
);

Ext.create('Ext.view.View', {
    store: Ext.data.StoreManager.lookup('imagesStore'),
    tpl: imageTpl,
    itemSelector: 'div.thumb-wrap',
    emptyText: 'No images available',
    renderTo: Ext.getBody()
}); 
```

# html - 无论溢出如何，都在其父级中修复子 div

> ID：15646298
> 
> 赞同：0
> 
> 时间：2013-03-26T20:00:31.997
> 
> 标签：html, css, positioning

我试图让子 div 相对于“div 窗口”固定在其父 div 的底部；即，无论用户是否滚动，我都希望子 div 保持固定在 div 的底部。

当没有内容溢出时，我可以使用以下方法实现此目标：

HTML：

```
<div id="outer">
    <div id="inner"></div>
</div> 
```

CSS：

```
#outer {
    position: relative;
    overflow-y: scroll;
    color: red;
}

#inner {
    bottom: 0;
    position: absolute;
    color: blue;
} 
```

结果是这样的：

![图片没问题](../Images/7cf7bfda45873fe42681a8759a5199e9.png)

`#outer`当内容溢出并且用户滚动时遇到问题：

![使用中断溢出](../Images/b070716752fd8f9d9de2eddc5a79d105.png)

[JS Fiddle of Image #2（溢出使用`<br>`）](http://jsfiddle.net/Kgf8a/)。

这就是我的问题：无论滚动如何，我都希望`#inner`（蓝色框）保持固定在`#outer`（红色框）的底部——这种效果类似于`position:fixed`在具有`height:100%`. 但我想使用设置高度不是 100% 的 div 来实现效果。

我觉得有一个非常简单的解决方案，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:06:45.083

如果添加第二个外部元素，则`<div>`可以在该元素内绝对定位而不是滚动`<div>`，如果`#outter`div 是静态定位的：http: [//jsfiddle.net/Kgf8a/1/](http://jsfiddle.net/Kgf8a/1/)

* * *

或者，您可以考虑使用`position:sticky`：[http ://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)

但我不知道你会得到什么样的浏览器支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:36:22.320

尝试这个

身体标签：

```
<body onLoad="test();"> 
```

文件

```
function test() {
    document.getElementById("outer").addEventListener ("scroll", bottom);   
}
function bottom(){
  var o = document.getElementById("outer");
  var i = document.getElementById("inner");
  i.style.bottom =  - o.scrollTop;
} 
```

这是德 JSBIN [http://jsbin.com/ocijeg/1/edit](http://jsbin.com/ocijeg/1/edit)

# android - 在 SlidingMenu 上使用自定义列表

> ID：15646302
> 
> 赞同：1
> 
> 时间：2013-03-26T20:00:48.303
> 
> 标签：android

我试图在 jfeinstein10 的 SlidingMenu 中实现 Koush 的小部件[https://github.com/koush/Widgets](https://github.com/koush/Widgets)但我可以弄清楚如何去做或者它是否可行

我都在工作，我可以将小部件添加到任何活动中，还可以使用单独的 xml 获得滑动菜单。

[我使用来自https://github.com/koush/Widgets](https://github.com/koush/Widgets)的示例代码作为基础

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:45:41.033

好吧，我通过使用框架的滑动菜单中的示例和网络上的其他一些示例来解决这个问题。这是我使用 Koush 小部件的片段类

```
 @SuppressLint("ValidFragment")
    public class MyListFragment extends BetterListFragment  {

@Override
protected void onCreate(Bundle savedInstanceState, View view) {
    super.onCreate(savedInstanceState, view);
    addItem("test", new ListItem(getInternal(), R.string.hello_world, 0, R.drawable.ic_launcher));
}

   } 
```

这是我构建滑动菜单的基本活动

```
 public class BaseActivity extends SlidingFragmentActivity {

    protected BetterListFragment mFrag;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        //set the Behind View
        setBehindContentView(R.layout.menu_frame);
        if (savedInstanceState == null) {
            FragmentTransaction t = this.getSupportFragmentManager().beginTransaction();
            mFrag = new MyListFragment();
            t.replace(R.id.menu_frame, mFrag);
            t.commit();
        } else {
            mFrag = (MyListFragment)this.getSupportFragmentManager().findFragmentById(R.id.menu_frame);
        }

        //customize the SlidingMenu
        SlidingMenu sm = getSlidingMenu();
        sm.setShadowWidthRes(R.dimen.shadow_width);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        sm.setFadeDegree(0.35f);
        sm.setBehindWidth(250);
        sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        setSlidingActionBarEnabled(false);
 }
  } 
```

这是我的主要活动

```
 public class MainActivity extends BaseActivity   {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

   }

   } 
```

希望它可以帮助其他人:)

# angularjs - AngularJS 如何在 ng-repeat 中 $watch 这些案例？

> ID：15646304
> 
> 赞同：8
> 
> 时间：2013-03-26T20:00:54.830
> 
> 标签：angularjs

我知道 AngularJS 在 ng-repeat 上设置了一些监视。此时设置的是什么类型的手表？

另外，有人可以解释每种情况下会发生什么吗？如果我有很多物品，我想知道如果我以其他方式编写它，用户不会被可能被淘汰的手表所困扰。

一

```
<div ng-repeat="item in items">
  <div>{{item.property}}</div>
</div> 
```

二

```
<div ng-repeat="item in items">
  <div>{{item.property | myFormatter}}</div>
</div> 
```

三

```
<div ng-repeat="item in items">
  <div>{{format(item.property)}}</div>
</div> 
```

四

```
<div ng-repeat="item in items">
  <div>{{item.something()}}</div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T20:23:39.607

每个`ng-repeat`人都会在`items`. （如果看[ng-repeat 源码](https://github.com/angular/angular.js/blob/4efda14b499fa1dbc115f17bb3bf42385a00e239/src/ng/directive/ngRepeat.js#L92)，大部分是 $watch 方法的 watchExpression 函数）。每次运行 Angular[摘要循环](http://docs.angularjs.org/guide/concepts#runtime)时，此 watch 函数都会检查每个`item`in 。`items`（请注意，在摘要循环中，可以多次调用此 watch 函数）。

每个人都`{{}}`设置了一个 $watch。如果`item.property`{{}} 中有类似内容，则每个摘要周期至少对其进行一次脏检查。

如果一个函数在 {{}} 内，则该函数在每个摘要循环中至少调用一次。

我不确定`x | filter`，但[这个小提琴](http://jsfiddle.net/mrajcok/R3ZsC/)似乎表明过滤器在每个摘要周期至少被调用一次，即使`x`没有改变。

# algorithm - 图直径的算法？

> ID：15646307
> 
> 赞同：16
> 
> 时间：2013-03-26T20:01:12.143
> 
> 标签：algorithm, graph, language-agnostic, graph-algorithm

如果你有一个图，并且需要找到它的直径（即两个节点之间的最大距离），你怎么能做的很`O(log v * (v + e))`复杂。

维基百科说你可以[`Dijkstra's algorithm`](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Running_time)使用`binary heap`. 但我不明白这是如何工作的。有人可以解释一下吗？

或者显示一个伪代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-23T13:28:44.473

我知道我迟到了一年，但我不相信这些答案中的任何一个都是正确的。OP 在评论中提到边缘未加权；在这种情况下，最好的算法在 O(n ^ω log n) 时间内运行（其中 ω 是矩阵乘法的指数；Virginia Williams 目前的上限为 2.373）。

该算法利用了未加权图的以下属性。令*A*为图的邻接矩阵，每个节点都添加了自环。那么 (A ^k ) [ij]非零当且仅当 d(i, j) ≤ k。我们可以利用这个事实通过计算 A ^k的 log n 值来找到图形直径。

以下是该算法的工作原理：设 A 是图的邻接矩阵，每个节点都添加了自循环。设置 M [0] = A。当 M [k]包含至少一个零时，计算 M [k+1] = M [k] ²。

最终，您会找到一个包含所有非零项的矩阵 M [K。]我们知道 K ≤ log n 由上面讨论的性质；因此，到目前为止，我们只执行了 O(log n) 次矩阵乘法。我们现在可以继续在 M [K] = A ^(2 ^K)和 M [K-1] = A ^(2 ^(K-1))之间进行二分搜索。设置 B = M [K-1]如下。

设置直径 = 2 ^(k-1)。对于 i = (K-2 ... 0)，执行以下测试：

将 B 乘以 M [i]并检查结果矩阵是否为零。如果我们找到任何零，则将 B 设置为该矩阵乘积，并将 2 ^i添加到 DIAMETER。否则，什么也不做。

最后，返回直径。

作为一个次要的实现细节，在执行每个矩阵乘法之后，可能需要将矩阵中的所有非零条目设置为 1，这样这些值就不会变得太大且难以在短时间内写下来。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T08:26:47.620

对于一般 Graph `G=(V,E)`，没有`O(log V * (V + E))`已知的用于计算直径的时间复杂度算法。当前的最佳解决方案是`O(V*V*V)`，例如，通过使用 Floyd Warshall 算法计算所有最短路径。对于稀疏图，即何时`E`在 中`o(N*N)`，约翰逊算法为您提供`O(V*V*log(V)+V*E)`了更好的时间复杂度。

如果您的图表具有某些属性，例如非循环（树），您会变得更好。

所以坏消息是，Dijkstra 在一般情况下是不够的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T05:42:39.133

正如 eci 所提到的，其中一种解决方案是使用 Floyd-Warshall 算法。如果您需要它的代码，可以在[此处](https://stackoverflow.com/questions/23082126/how-to-compute-directed-graph-diameter-in-c/23083227#23083227)找到它的 C++ 版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-03T19:30:31.833

Boost BGL 有一个名为“rcm_queue”的小型扩展双端队列类，可以通过简单的广度优先搜索找到顶点的偏心率，这意味着 O(E) 的复杂性。

[http://www.boost.org/doc/libs/1_54_0/boost/graph/detail/sparse_ordering.hpp](http://www.boost.org/doc/libs/1_54_0/boost/graph/detail/sparse_ordering.hpp)

由于可以通过遍历所有顶点的偏心率来计算直径，因此可以计算复杂度为 O(V*E) 的图的直径。

特别是对于一个 deg(G) <<< V 非常稀疏的图，我没有找到任何运行时间更好的东西。

我没有研究 Floyd Warshall 算法。我只是在处理一个具有 > 5.000.000 个顶点但任何顶点的最高度数小于 15 的图，我认为，这可能会优于具有 V*V*log(V) 复杂度的算法。

**编辑**

当然，这仅适用于无向图而不是负加权（甚至仅未加权？我不确定 atm）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-19T14:05:31.053

图描述——无向无权，*n个*节点，*m*条边对于图的直径，我们需要计算所有节点对之间的最短路径。源节点到所有其他节点之间的最短路径可以使用 BFS 算法计算无向和未加权图。1 个节点的时间复杂度为*O(n + m)*。在这里，由于我们需要对 n 个节点进行 BFS，因此在所有节点对之间找到最短路径的总时间复杂度变为*O(n(n + m))*。由于有*n(n-1)/2*对节点，所以我们有*n(n-1)/2*所有节点之间的最短路径的值。对于直径，我们需要获得这些值的最大值，也就是 O(n*n)。所以最终的时间复杂度变为：

```
 O(n(n + m)) + O(n*n) = O(n(2n + m)) = O(n(n + m)) 
```

用于获取所有节点对之间最短路径的伪代码。我们使用一个名为 Shortest_paths 的矩阵来存储任意两对节点之间的最短路径。我们正在使用一个名为 flag 的字典，其值为 true 或 false ，指示顶点是否已被访问。对于 BFS 的每次迭代，我们将这个字典初始化为全为 false。我们使用队列 Q 来执行 BFS。算法 BFS（适用于所有节点）

```
Initialize a matrix named Shortest_paths[n][n] to all -1\. 
    For each source vertex s
        For each vertex v
            Flag[v] = false
        Q = empty Queue
        Flag[s] = true
        enQueue(Q,s)
        Shortest_paths[s][s] = 0
        While Queue is not empty
            Do v = Dequeue(Q)
            For each w adjacent to v
                Do if flag[w] = false
                    Flag[w] = true
                    Shortest_paths[s][w] = Shortest_paths[s][v] + 1
                    enQueue(Q,w) 
    Diameter = max(Shortest_paths)
    Return Diameter 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-06T05:44:47.433

假设图未加权，则以下步骤可以在 O(V * ( V + E )) 中找到解，其中 V 是顶点数，E 是边数。

让我们将 2 个顶点 u, v 之间的距离定义为 u 和 v 之间的最短路径的长度。用 d(u, v) 表示 定义顶点 v 的偏心率为 e(v) = max {d(u,五）| u ∈ V(G)} (V(G) 是图 G 中的顶点集) 定义 Diameter(G) = max{e(v) | v ∈ V(G)}

现在到算法：

1- 对于 V(G) 中的每个顶点 v 运行 BFS(v) 并构建从每个顶点到其他顶点的距离的二维数组。（计算每个顶点到其他顶点的距离在[BFS 算法](https://en.wikipedia.org/wiki/Breadth-first_search#Pseudocode)中很容易做到）

2- 计算步骤 1 中创建的二维数组中每个顶点的 e(v) 3- 通过从步骤 2 中找到最大 e(v) 来计算直径 (G)

现在分析这个算法，很容易看出它是由O（V *（V + E））的第一步主导的

[在维基百科中阅读有关直径的这部分内容](https://en.wikipedia.org/wiki/Distance_(graph_theory)#Related_concepts)

另一种在线性时间 O(V + E) 中运行的算法 1- 在任意随机顶点 v ∈ V(G) 上运行 BFS 2- 选择距离最大的顶点 u 3- 在该顶点 u 上再次运行 BFS 4- 直径是从第 3 步生成的最大距离

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-18T10:34:31.707

首先，您需要找到[图形的凸包](http://en.wikipedia.org/wiki/Convex_hull_algorithms)（找到它是 O(nh)，其中 h 是 hull 上的节点数）。直径点将位于凸包上，因此问题将减少到在 h 个点中找到最远的点。因此，总订单将是 O(nh+h*h)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-04T21:59:58.183

实际上，如果图形非常大，您将需要使用 Dijkstra 算法来找到最短距离。所以这取决于 OP 的图有多少节点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-05T18:50:26.427

你不能一直单调地将 A 提高到下一个幂并跟踪哪些 (i,j) 有一些 A^k 的非零条目吗？一旦所有 i,j 在先前计算的 A^k 中都有一个非零值，无论你在什么 k 上都是图形的直径。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-07-17T15:12:31.387

这只能发生在未加权的图上。其中 bfs 给出了 o(v+e) 中的最短路径树，你对 v 源重复相同的操作。

# asp.net - Kendo TabStrip：获取选定事件的选定索引（MVC 4）

> ID：15646308
> 
> 赞同：4
> 
> 时间：2013-03-26T20:01:14.243
> 
> 标签：asp.net, asp.net-mvc, telerik, kendo-ui

我的 TabStrip 如下：

```
 @(Html.Kendo().TabStrip()
              .Name("tabApplications")
              .Items(items =>
                  {
                      items.Add().Text("Online").Selected(true);
                      items.Add().Text("Trading");
                  })
              .Animation(false)
              .Events(e=>e.Select("tabstrip_select"))
              ) 
```

在 Javascript 中，我得到了所选项目：

```
 function tabstrip_select(e) {
         var x = e.item;
     } 
```

**问题**：如何从该函数中获取选定索引（即“1”）。我查看了 Item 对象，但没有看到任何明显的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T20:21:06.797

`index()`您可以通过调用`$(e.item)`

```
function tabstrip_select(e) {
    var x = e.item;
    var selectedIndex = $(e.item).index();
} 
```

使用[JSFiddle](http://jsfiddle.net/SLs7J/)的演示。

# multithreading - C# 中的多线程服务器实现

> ID：15646309
> 
> 赞同：1
> 
> 时间：2013-03-26T20:01:18.223
> 
> 标签：multithreading, service, while-loop, namedpipeserverstream

我正在创建一个 Windows 服务，该服务具有一个组件，该组件侦听命名管道以与从用户空间运行的程序进行交互。我已[将此答案](https://stackoverflow.com/a/5054851/1479211)中的代码用作多线程服务器实现的基础，但是我从在紧密循环中调用的 ProcessNextClient 操作中获得了强烈的代码气味，如下所示。真的没有比重复捕获 IOException 并重试更好的方法来知道何时将另一个流的开口添加到命名管道？

```
 public void ProcessNextClient()
    {
        try
        {
            NamedPipeServerStream pipeStream = new NamedPipeServerStream(PipeName, PipeDirection.InOut, 254);
            pipeStream.WaitForConnection();

            //Spawn a new thread for each request and continue waiting
            Thread t = new Thread(ProcessClientThread);
            t.Start(pipeStream);
        }
        catch (Exception e)
        {//If there are no more avail connections (254 is in use already) then just keep looping until one is avail
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T02:17:27.087

您可以按照 WCF 来处理管道吗？您将从使用 IO 完成端口的中断驱动系统中受益，以便在应用程序建立新连接时通知您的应用程序代码。

如果您需要通过将绑定从管道更改为 TCP/http 绑定，将应用程序转移到多个节点上，那么实施 WCF 的痛苦也将使您能够扩展一台机器。

[此处是 WCF 服务的示例实现](http://tech.pro/tutorial/855/wcf-tutorial-basic-interprocess-communication)。它还展示了如何在管道或 TCP 上托管相同的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:08:18.283

在我看来，代码将位于

```
pipeStream.WaitForConnection(); 
```

直到检测到客户端，然后继续。我不认为它会像你描述的那样循环它，除非它被客户锤击。你总是可以添加一个断点来检查。

# binary - 带有二进制代码的文本

> ID：15646311
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:01:19.470
> 
> 标签：binary

HELLO 的二进制代码是 0100100001000101010011000100110001001111** 但我找不到如何将例如 A 转换为二进制代码。

由于在 HELLO 的二进制代码中看不到可用空格，我该如何转换它并创建一个像 WORLD 这样的词？

例如*WORLD*，什么是*W*，什么是*O*，什么是*R* ....

我是否应该在不同的代码之间添加一些东西（例如：如果 W 是 1010101、O - 000101、R - 1010111、L - 100001、D - 111111 是不是**1010101** *000101* **1010111** *100001* **111111** WORLD？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:06:20.993

只需使用[ascii 表](http://www.asciitable.com/index/asciifull.gif)即可获取字母的十进制数。

例如：

O = 79 -> 1001111

P = 80 -> 1010000

S = 83 -> 1010011

只需使用计算器将十进制数转换为二进制数，因此：

OPS = 100111110100001010011

像这样的东西。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:05:15.067

字符串的二进制表示完全取决于其[编码](http://en.wikipedia.org/wiki/Character_encoding)。如果您想使用简单的[ASCII](http://en.wikipedia.org/wiki/Ascii)大小写（每个字符一个字节），那么您需要做的就是查找您关心的字符的十六进制代码，例如 'A' 的 0x41。从这一点来看，将其转换为二进制序列是微不足道的。重要的是要注意，像[Endianness](http://en.wikipedia.org/wiki/Endianness)这样的东西会在实际的二进制表示中发挥作用。

对于 UTF-8、UNICODE 或多字节编码等编码，该过程不太直接，您最好使用库函数来获取二进制表示。

# c# - 防止从 USB 存储器复制应用程序

> ID：15646314
> 
> 赞同：0
> 
> 时间：2013-03-26T20:01:42.233
> 
> 标签：c#, c++, security, usb, code-duplication

我编写了基于 USB 记忆棒内存序列号的自动运行应用程序。这意味着该应用程序仅适用于 USB 记忆棒\设备的特定注册序列号。

我发现高级用户可以更改 USB 存储设备的序列号，只需将我的应用程序从一个 USB 记忆棒存储设备复制到另一个。我是 C++\C# 开发人员，有什么办法可以防止将我的应用程序从一个 USB 棒复制到另一个？

# c# - linq 查询中区分大小写

> ID：15646317
> 
> 赞同：1
> 
> 时间：2013-03-26T20:01:59.787
> 
> 标签：c#, linq

此代码使用身份验证人登录，我的问题是密码，例如，如果

pass=AAaa，我们在系统中输入aaaa登录，搜索时区分大小写怎么办？

```
Inspector inspector = context.Inspectors.Where(i => i.InspectorUserName == userName

                && i.InspectorPssWord == passWord).FirstOrDefault(); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T20:22:17.570

Linq（以及 C#）**已经做了区分大小写的检查**，所以你不必修改你的代码来包含它。

不过，另一方面，您应该**真正**散列这些密码:)

# c++ - 如何禁用 Googletest (gtest) 参数化测试？

> ID：15646318
> 
> 赞同：18
> 
> 时间：2013-03-26T20:02:02.400
> 
> 标签：c++, googletest

Googletest (GTest) 允许您通过添加禁用单个测试

> *已禁用_*

测试名称的前缀。

参数化测试怎么样——我如何禁用它们？将前缀添加到测试名称不会禁用它们。

例如，如何禁用 GTest[文档](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#value-parameterized-tests)提供的示例测试：

```
class FooTest : public ::testing::TestWithParam<const char*> {
  // You can implement all the usual fixture class members here.
  // To access the test parameter, call GetParam() from class
  // TestWithParam<T>.
};

TEST_P(FooTest, HasBlahBlah) {
  ...
}

INSTANTIATE_TEST_CASE_P(InstantiationName,
                        FooTest,
                        ::testing::Values("meeny", "miny", "moe")); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-26T20:02:02.400

您需要添加

> *已禁用_*

实例化名称的前缀，如下所示：

```
INSTANTIATE_TEST_CASE_P(DISABLED_InstantiationName,
                        FooTest,
                        ::testing::Values("meeny", "miny", "moe")); 
```

# django - 如何在 Django 中制作主细节模型/屏幕？

> ID：15646323
> 
> 赞同：4
> 
> 时间：2013-03-26T20:02:06.600
> 
> 标签：django, django-models, django-templates

我总是遇到的一件事是如何用 Django 实现一个主从应用程序。典型的例子是 Invoice 和 InvoiceLines。

要讨论的事情是：

*   如何构建用于保存、加载等主模型和详细模型的代码
*   视图：文件和模板，详细信息行的模板，如何动态添加
*   自动计算的字段（如父行的总数），此代码在哪里？

编辑/添加：

[关于自动计算的字段，这是我的第一个解决方案， http](http://pastebin.com/ZGqNnHuC) : //pastebin.com/ZGqNnHuC，在模型的保存方法中会不会更好？

主模型需要来自详细模型的值。（即首先需要计算每个细节的总计，保存每一行，然后求和并保存主数据） 它是如何以比调用 calculate() 方法更 Django 的方式制作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:19:02.013

*   [主模型和详细模型是通过一对多关系](https://docs.djangoproject.com/en/3.2/topics/db/examples/many_to_one/)关联的两个独立模型。要将它们合并到相同的表单中，您必须使用*模型表单集*（更多[详细信息在这里](https://docs.djangoproject.com/en/3.2/topics/forms/modelforms/#model-formsets)）。
*   要动态添加行，您可以考虑[这个答案](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax)
*   这同样适用于自动计算字段，您可以在纯 javascript 中或通过对“计算视图”的 ajax 调用来执行此操作（因此代码位于模板或视图中，最终调用模型等其他模块，这实际上取决于哪个你在做计算吗）

# php - MYSQL PHP 警告：mysql_query() 期望参数 1 为字符串

> ID：15646325
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:02:14.703
> 
> 标签：php, mysql

我在尝试向 MYSQL 发送查询时遇到了一个非常奇怪的 PHP 问题。这是我的代码

```
$newlogforuser="CREATE TABLE ".$username."-log (date CHAR(30),time CHAR(30),ipaddress CHAR(30))";

// Execute query
if (mysql_query($conl,$newlogforuser))
{
  echo "Response from server: Log created successfully";
}
else
{
  echo "Response from server: Error creating log: " . mysql_error();
} 
```

错误：警告：mysql_query() 期望参数 1 为字符串

我知道我已成功连接到我的 MYSQL 数据库，所以这不是问题。我知道 StackOverflow 上有很多关于同一问题的帖子，但其中一篇解决了我的问题。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:05:43.643

`mysql_query`期望第一个参数是字符串。资源必须是第二个参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:15:03.437

试试这个代码它会帮助你......将表名单独作为变量并将变量放在mysql查询中

```
<?php
     $con= mysql_connect("your host","username","password");
     $db=mysql_select_db("Your database");
    $tableName = $username."-log";
    $newlogforuser="CREATE TABLE '".$tableName."'(date CHAR(30),time CHAR(30),ipaddress CHAR(30))";
$sqlst=mysql_query($con,$newlogforuser);
    if($sqlst)
    { 
    echo "Response from server: Log created successfully";} 
    else { echo "Response from server: Error creating log: " . mysql_error(); 
    }
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:07:52.943

只需使用 mysql_query($query)，使用 mysql_connect 连接到您的数据库。$query = $newlogforuser 这里是[mysql_query 手册](http://php.net/manual/en/function.mysql-query.php)

# c# - 如何分解 Any 子句中的 Linq 表达式

> ID：15646327
> 
> 赞同：0
> 
> 时间：2013-03-26T20:02:16.110
> 
> 标签：c#, .net, linq, wcf-data-services, odata

我正在尝试进行模块化 Linq 查询（对 OData 源）。

这是我的查询的简化版本：

```
// Any clause that I want to be modular
Func<Encounter, bool> orderAnyClause = x => x.OrderName.StartsWith("Order 00");

// Query using the any clause
var result = entities.Customers.Where(cust=> cust.Orders.Any(orderAnyClause));

// A method to do the selection.  It works just fine.
IQueryable<SearchSelectionResult> selectedResults = SelectResults(result); 

// This throws the exception shown below
var list = selectedResults.ToList(); 
```

这一切都编译得很好，但是当我运行它时，我的 any 子句会导致此异常：

> 无法将“System.Linq.Expressions.ConstantExpression”类型的对象转换为“System.Linq.Expressions.LambdaExpression”类型。

我知道这是我的 any 子句，因为如果我将该子句嵌入到语句中，一切正常。

**为什么我会收到此错误？我怎样才能打破这个陈述而不得到错误？**

* * *

**更新：使用表达式**

我尝试使用这样的表达式：

```
Expression<Func<Encounter, bool>> orderAnyClause = 
                                      x => x.OrderName.StartsWith("Order 00"); 
```

我收到以下编译时错误消息：

```
Instance argument: cannot convert from System.Data.Services.Client.DataServiceCollection<ODataComponetizedQueriesTest.MyEntities.Order>' to 'System.Linq.IQueryable<ODataComponetizedQueriesTest.MyEntities.Order>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:07:47.080

您可以尝试像这样定义 orderAnyClause：

```
Expression<Func<Encounter, bool>> orderAnyClause = 
                                        x => x.OrderName.StartsWith("Order 00"); 
```

我没有测试它，但是查询理解的工作方式（并且基于错误），除非它作为表达式得到它，否则它将无法对它做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:07:54.970

您`IQueryable`需要使用[*表达式树*](http://msdn.microsoft.com/en-us/library/bb397951.aspx)来转换查询 - 换句话说，它需要将代码视为数据，而不仅仅是可执行代码。

现在我不是 100% 确定这会起作用，但我*希望*你可以使用：

```
Expression<Func<Encounter, bool>> orderAnyClause =
    x => x.OrderName.StartsWith("Order 00"); 
```

...然后保持相同的代码。这样，您的`orderByClause`变量指的是表达式树，而不是委托。现在这可能不起作用 - 因为您在此处的另一个 lambda 表达式中使用它：

```
cust => cust.Orders.Any(orderAnyClause) 
```

...并且该 lambda 表达式*也*将转换为表达式树。这实际上取决于 OData 提供者如何处理它。您*可能*需要编写一个方法来做一些时髦的事情来构建`cust.Orders.Any(orderAnyClause)`- 但值得首先尝试简单的方法。

# android - 带有 Android 的 Eclipse 中的奇怪错误

> ID：15646332
> 
> 赞同：0
> 
> 时间：2013-03-26T20:02:39.557
> 
> 标签：android, eclipse

这直到今天才开始发生，但我想知道是什么原因造成的。每当我编译时，就像突然之间每 10 次中出现一次一样，出现相同的 2 个错误，指向

```
this.onBackPressed(); 
```

和

```
android:theme="@android:style/Theme.Holo" 
```

两者都给出了“要求 API 级别为 5”或“要求 API 级别为 16”的错误。

问题是，每次单击 Project>>Clean 都会消除错误，所以因为它运行良好，我每次都这样做，但它一直在发生。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:09:43.183

这些是[Lint](http://developer.android.com/tools/debugging/improving-w-lint.html)错误，如果您使用的 API 级别功能高于您的`minSdkVersion`（在您的 中设置`AndroidManifest.xml`），则会向您发出警告。

例如，[onBackPressed](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)是在 API 级别 5 中引入的。尝试在 API 级别 4 或更低级别的设备上调用它会导致应用程序崩溃。

当然，如果您在设备 API 级别 5 或更高级别上运行您的应用程序，它就可以正常工作，因此它似乎总是可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:46:46.687

如果最低 API 级别（您在项目开始时设置）**低于 5**（您得到的错误），Eclipse 将给您一个错误，因为任何运行**API 4 或更低**版本的设备都不支持`this.onBackPressed();`，并且设备Holo 主题不支持运行**API 15 或更低版本。**

为**避免这些错误**，您可以**将项目的 API 级别更改为 16**，也可以**删除** `android:theme ...`. 然后您可以将项目**的 API 级别更改为****5**，因为现在大多数设备都是 Android 2.2，即 API 8。

# php - OOPHP MySQLi 参数化查询不起作用？

> ID：15646334
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:02:45.983
> 
> 标签：php, oop, mysqli

几天来，我一直在努力完成这项工作。我想发展我对 PHP 和数据库安全性的了解，并希望使用 OOPHP 和参数化查询。我想我会从简单地连接到数据库并执行选择并显示结果开始。我知道参数化查询本身可以工作，但是当我将它放在一个类中并调用它时，它不会获取结果并显示它们。这是我一直在处理的代码：

```
<?php

class connect
    {
    public static function run()
        {
        $mysqli = new mysqli("*****", "*****", "*****");

        $db = "sales";
        mysqli_select_db($db);

        if(!$mysqli)
            {
            printf("Connection Failed: %s\n", mysqli_connect_error());
            }
            else
                {
                echo("MariaDB Connection Successfull!!!");
                }
        }
    }

//call_user_func(array($className, 'run'));

class contacts
    {
    public function select()
        {
        if($stmt = $mysqli->prepare("SELECT CON_ID, CON_FNAME, CON_LNAME, CON_EMAIL FROM contacts"))
            {
            $stmt->execute();
            $stmt->bind_result($id,$fname,$lname,$email);

            echo("<table align='center' width='40%'");
            echo("<tr>");
            echo("<td align='center' width='25%'>Contact ID</td>");
            echo("<td align='center' width='25%'>First Name</td>");
            echo("<td align='center' width='25%'>Last Name</td>");
            echo("<td align='center' width='25%'>Email Address</td>");
            echo("</tr>");

            while($stmt->fetch())
                {
                echo("<tr>");
                echo("<td align='center' width='25%'>");
                printf("%s",$this->$id);
                echo("</td>");
                echo("<td align='center' width='25%'>");
                printf("%s",$this->$fname);
                echo("</td>");
                echo("<td align='center' width='25%'>");
                printf("%s",$this->$lname);
                echo("</td>");
                echo("<td align='center' width='25%'>");
                printf("%s",$this->$email);
                echo("</td>");
                echo("</tr>");
                }
            printf("</table>");
            $stmt->close();
            }
            else
                {
                printf("Prepared Statement Error: %s\n", $mysqli->error());
                }
        }
    }

$connect = "connect";
$connect::run();
$contact = "contacts";
$contact::select();
?> 
```

当我运行该页面时，我收到的唯一输出是“MariaDB 连接成功！！！”，但它似乎没有在“联系人”类中运行 select()。我正在寻找更好的 PHP 编码方法，所以如果有更好的方法，我很想学习它！

我将非常感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:30:49.387

您的代码有两个主要问题

1.  您正在使用 mysqli 而不是[PDO](https://stackoverflow.com/tags/pdo/info)，使您的目标难以实现十倍
2.  你试图一次做所有事情。这不是要走的路。尝试让自己熟悉 API，只使用纯文本代码运行一些查询。然后将这些代码组合成函数。然后才开始上课。

# javascript - 如何在链接悬停时为自定义形状制作重叠背景

> ID：15646337
> 
> 赞同：3
> 
> 时间：2013-03-26T20:02:54.310
> 
> 标签：javascript, html, css

图像示例：

![在此处输入图像描述](../Images/49270f8df55825a7c5cb1ba47e2753ba.png)

我有 2 个链接：**1**和**2**
两个背景渐变图像：**blue-green**和**yellow-red**。

将鼠标悬停在其中一个（1 或 2）上后，我想要具有适当扩展背景的三角形。

例如，当悬停在**1**上时，我想要**蓝绿色**渐变三角形的开始，与**2**相同，但渐变的位置正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:00:24.550

通过对边框宽度进行各种模糊处理来制作纯 css 形状。我尝试了一些尝试将[三角形规则](http://css-tricks.com/snippets/css/css-triangle/)与[边框渐变规则](http://css-tricks.com/examples/GradientBorder/)结合起来，但无法让它们合作（无论如何在 Chrome 中）。边框图像的工作原理是将图像切成 9 位（4 个角、4 个边缘和中心）；它似乎总是覆盖硬形状边框规则所依赖的透明和有角度的边缘。

这就是说我没有适合你的解决方案，但就纯 css 解决方案而言，即使使用 CSS3，你也可能不走运。您可能需要一些 JS 或图像技巧来获得您正在寻找的效果。

# ruby-on-rails - Rspec 测试所需参数

> ID：15646339
> 
> 赞同：3
> 
> 时间：2013-03-26T20:02:56.380
> 
> 标签：ruby-on-rails, rspec

我正在为我的测试框架使用 FactoryGirl 和 Rspec。我有一个模型，上面有 validates_presence_of 验证。基本的 Rspec 框架包括一个测试：

```
describe "with invalid params" do
  it "assigns a newly created but unsaved disease as @disease" do
    # Trigger the behavior that occurs when invalid params are submitted
    Disease.any_instance.stub(:save).and_return(false)
    post :create, :disease => {}
    assigns(:disease).should be_a_new(Disease)
  end
end 
```

编辑： `diseases_controller.rb`

```
 # POST /diseases
 # POST /diseases.xml
 def create
   @disease = Disease.new(disease_params)

   respond_to do |format|
     if @disease.save
       format.html { redirect_to(@disease, :notice => 'Disease was successfully created.') }
       format.xml  { render :xml => @disease, :status => :created, :location => @disease }
     else
       format.html { render :action => "new" }
       format.xml  { render :xml => @disease.errors, :status => :unprocessable_entity }
     end
   end
 end

 private
 def disease_params
   params.require(:disease).permit(:name, :omim_id, :description)
 end 
```

此测试不适用于我的应用程序的工作方式。它不会在不正确的帖子上返回新疾病，而是返回错误：

```
Required parameter missing: disease 
```

问题 #1：我不知道如何查看 Rspec 返回的内容。在这种`response`情况下似乎没有创建对象？打印`assigns(:disease)`似乎不包含任何内容。我通过将 cURL 帖子提交到带有空数据的正确 URL 收到了我之前发布的错误消息（这是 rspect 帖子应该做的），但我不知道如何获取 Rspec 从那里收到的信息发表声明。

问题 #2：我如何正确测试应该发生的响应 - 它收到一条错误消息，指出缺少必需的参数？

编辑：所以我的控制器似乎表明它应该呈现一种新的疾病，但测试失败。如果我尝试在网站上提交缺少所需参数的疾病，那么它会发出一个快速通知，上面写着“名称不能为空”。我不确定如何在 rspec 中进行测试。

编辑#2：包括上面的代码。`strong_parameters`disease_params 根据使用gem的建议在控制器底部定义。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:39:13.427

要回答问题 1（“我不知道如何查看 Rspec 所返回的内容”）...您可以在规范中（即在`it`块内）使用“puts”语句。例如，您可以尝试这样的事情：

```
describe "with invalid params" do
  it "assigns a newly created but unsaved disease as @disease" do
    # Trigger the behavior that occurs when invalid params are submitted
    Disease.any_instance.stub(:save).and_return(false)
    post :create, :disease => {}
    puts :disease
    assigns(:disease).should be_a_new(Disease)
  end
end 
```

这是一个有价值的调试工具。当 RSpec 运行时，输出将在终端中的 .s 和 Fs 中。

对于问题 2，我不太确定您在寻找什么，但我不知道您需要（或应该）测试无效疾病是否被指定为 @disease。我倾向于以以下样式对控制器规范进行模式化（取自[Everyday Rails Testing with RSpec](http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html)，这是我学习如何编写控制器规范的地方）。

POST 创建规范示例：

```
context "with invalid attributes" do
  it "does not save the new contact" do
    expect{
      post :create, contact: Factory.attributes_for(:invalid_contact)
    }.to_not change(Contact,:count)
  end

  it "re-renders the new method" do
    post :create, contact: Factory.attributes_for(:invalid_contact)
    response.should render_template :new
  end
end 
... 
```

您可能有理由更彻底地测试我不知道的控制器方法。在这种情况下，请忽略我对问题 2 的回答，希望我的其他回答有用！

# excel - 为什么在指定范围之前应用自动筛选三行

> ID：15646345
> 
> 赞同：0
> 
> 时间：2013-03-26T20:03:31.983
> 
> 标签：excel, vba

以下代码将自动筛选器应用于工作表“'Grand Totals'！B1”中设置的日期条件的多个工作表，应用于工作表范围 A6，其格式为日期。第 1-5 行包含标题和公式。但是，第 3-5 行与从 A6 开始的过滤行一起消失。谁能明白为什么？据我所知，A6 行上方的所有内容都应该保持可见。再次感谢你的帮助。

子 ApplyFilterDate()

```
 Dim Ws As Worksheet
    Application.ScreenUpdating = False 'Turn off ScreenUpdating to speed filtering
        For Each Ws In ActiveWorkbook.Worksheets
            If Ws.Name <> "Grand Totals" Then
                Ws.Activate
                Ws.AutoFilterMode = False 'Remove any existing filters
                Ws.Range("A6").AutoFilter Field:=1, Criteria1:=Range("'Grand Totals'!B1").Text
                Range("G2").Activate
                Center_it 'Puts next data entry cell in approximate center of screen
            End If
        Next
    Sheet1.Activate
    Range("B2").ClearContents
    Range("B1").Interior.ColorIndex = 3 'Set color of cell showing filter date
    Range("B1").Activate
    Application.ScreenUpdating = True 'Turn on ScreenUpdating 
```

结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:08:30.833

您要求自动过滤器仅在单元格 A6 上运行。这没有意义，因此 Excel 会扩展选择范围以包括周围的单元格。您需要指定应用自动过滤器的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:11:38.923

使用以下语法来避免您的问题：

```
Ws.Range("A6:e6").AutoFilter '... and so on with exact range address 
```

# javascript - AJAX 响应后禁用然后重新启用按钮

> ID：15646347
> 
> 赞同：0
> 
> 时间：2013-03-26T20:03:39.467
> 
> 标签：javascript, html, internet-explorer

所以我试图在处理javascript时禁用一个按钮，然后在javascript完成后重新启用它。下面的代码适用于我尝试过的所有浏览器，除了 IE7。在 IE7 中，它似乎只是忽略了禁用和重新启用，并且看起来它仍然一直处于启用状态。那么如何才能在 IE7 中获得正确的行为呢？

```
 <script>
      function doSomething()
      {
        document.getElementById("myButton").disabled = true;
        ...
        xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", url, false);
        xmlhttp.send(null);
        response = xmlhttp.responseText();

        if (response != "false")
        {
          document.getElementById("myButton").disabled = false;
        }
        ...
      }
    </script>
    <form onsubmit="doSomething(); return false;">
      <input type="submit" id="myButton" value="Do Stuff"/>
    </form>
    <div id="results"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:07:11.010

`disabled`不是真/假切换。如果您想在禁用某些内容后启用它，您可以`disabled`完全删除该属性。

设置：`document.getElementById("myButton").setAttribute("disabled","disabled");`

清除：`document.getElementById("myButton").removeAttribute("disabled");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:43:17.217

所以这是 IE7 的重绘问题，所以在执行所有操作之前都不会重绘。因此，经过更多的研究和多次尝试让 IE 在我想要的时候重绘它，这最终奏效了，这真的很糟糕，我希望找到一种更好的方法来做到这一点，但它现在有效。

```
<script>
  function doSomething()
  {
    document.getElementById("myButton").disabled = true;
    setTimeout(doSomething2(), 1);
    return false;
  }

  function doSomething2()
  {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", url, false);
    xmlhttp.send(null);
    response = xmlhttp.responseText();
    document.getElementById("results).innerHtml = response;
    setTimeout(doSomething3(), 1);
    return false;
  }

  function doSomething3()
    document.getElementById("myButton").disabled = false;
    return false;
  }
</script>
<form onsubmit="doSomething(); return false;">
  <input type="submit" id="myButton" value="Do Stuff"/>
</form>
<div id="results"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:32:17.053

您需要将该`disabled = false`部分放入 ajax 响应处理程序中：

```
function doSomething() {
  var btn = document.getElementById("myButton");
  btn.disabled = true;

  var xhr = new XMLHttpRequest();
  xhr.open("GET", url, false);
  xhr.send(null);
  var response = xhr.responseText;

  // Test this stuff!
  alert(response);

  btn.disabled = false;

  // Test more!
  alert(btn.disabled);
} 
```

# javascript - 关于javascript函数

> ID：15646348
> 
> 赞同：4
> 
> 时间：2013-03-26T20:03:41.107
> 
> 标签：javascript

我在 Javascript 中发现了一个奇怪的行为：

```
function() {
    return 10;
}(); 
```

此构造不适用于所有浏览器，因为它存在语法错误。但是这种构造有效（返回十）：

```
+function() {
    return 10;
}(); 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:06:22.070

让 js 引擎在这个`+`函数表达式和函数定义之间做出区分。

为了提高可读性，我们通常使用

```
(function() {
    return 10;
})(); 
```

见[相关文章](http://dmitrysoshnikov.com/ecmascript/chapter-5-functions/#function-expression)

# data-structures - 优先队列 O(1) 插入和移除

> ID：15646356
> 
> 赞同：3
> 
> 时间：2013-03-26T20:04:26.403
> 
> 标签：data-structures

优先级队列是否可以同时具有 O(1) 插入和删除？

可以使用堆来实现优先级队列，并查看斐波那契堆的运行时间，似乎每次删除都无法获得比 O(logN) 更好的运行时间。

我正在尝试实现一个数据结构，其中给定 N 个项目，我将有一半在最大优先级队列中，一半在最小优先级队列中。然后我将依次删除所有 N 项。

我可以在 O(N) 时间内插入所有 N 个元素，但删除所有 N 个元素将花费 O(N*logN) 所以我想知道另一种方法是否更合适。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:49:12.937

如果您可以构造一个具有 O(1) 插入和 O(1) 删除的优先级队列，则可以使用它在 O(n) 时间内对包含 n 个项目的列表进行排序。正如[这个答案](https://stackoverflow.com/a/7155425/555045)中所解释的，在一般情况下你不能在 O(n) 中排序，所以如果不对输入做出更多假设，就不可能构造一个具有 O(1) 插入和 O(1) 删除的优先队列.

例如，可以构造具有 O(1) 插入和 O(k)（k 是可以插入的最大元素）移除的优先级队列。保留一个包含 k 个链表的表。插入`x`只是将一个项目添加到第一个`x`列表的前面。删除必须扫描表以找到第一个非空列表（然后删除列表的第一项并返回该列表的索引）。只有 k 个列表，因此删除需要 O(k) 时间。如果 k 是一个常数，则可以去除 O(1)。

在实践中，使用计数表会更好。除非您使用摊销分析（这就是我在上一段中没有使用它的原因），否则递增可变长度整数不是恒定时间，但实际上您无论如何都不需要可变长度计数。此外，在实践中，即使 k 是常数，它也会对较大的 k 不利 - 您会很快耗尽内存并且扫描第一个非零元素可能需要一段时间。

# java - 如何在jtree中仅列出非隐藏和非系统文件

> ID：15646358
> 
> 赞同：3
> 
> 时间：2013-03-26T20:04:29.950
> 
> 标签：java, swing, file-io, jtree, filefilter

```
File f=new File("C:/");
File fList[] = f.listFiles(); 
```

当我使用它时，它会列出所有系统文件以及隐藏文件。

当我使用它在 jTree 中显示时，这会导致**空指针异常，如下所示：**

```
 public void getList(DefaultMutableTreeNode node, File f) {
 if(f.isDirectory()) {
     DefaultMutableTreeNode child = new DefaultMutableTreeNode(f);
     node.add(child);
     File fList[] = f.listFiles();
     for(int i = 0; i  < fList.length; i++)
         getList(child, fList[i]);
     }
} 
```

我应该怎么做才能不给出**NullPointerException**并且只显示jTree 中的**非隐藏和非系统文件？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T20:08:52.887

对隐藏文件执行此操作：

```
File root = new File(yourDirectory);
File[] files = root.listFiles(new FileFilter() {
    @Override
    public boolean accept(File file) {
        return !file.isHidden();
    }
}); 
```

这不会返回隐藏文件。

至于系统文件，我认为这是一个 Windows 概念，因此可能不受`File`试图独立于系统的接口的支持。但是，您可以使用命令行命令（如果存在）。

或者使用@Reimeus 在他的回答中的内容。

可能喜欢

```
 File root = new File("C:\\");

    File[] files = root.listFiles(new FileFilter() {
        @Override
        public boolean accept(File file) {
            Path path = Paths.get(file.getAbsolutePath());
            DosFileAttributes dfa;
            try {
                dfa = Files.readAttributes(path, DosFileAttributes.class);
            } catch (IOException e) {
                // bad practice
                return false;
            }
            return (!dfa.isHidden() && !dfa.isSystem());
        }
    }); 
```

[DosFileAttributes 是在 Java 7 中引入的。](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/DosFileAttributes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T20:10:05.887

如果在 Windows 下运行，Java 7 引入了[DosFileAttributes](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/DosFileAttributes.html)，它可以过滤系统和隐藏文件。这可以与一个`FileFilter`

```
Path srcFile = Paths.get("myDirectory");
DosFileAttributes dfa = Files.readAttributes(srcFile, DosFileAttributes.class);
System.out.println("System File? " + dfa.isSystem());
System.out.println("Hidden File? " + dfa.isHidden()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-15T17:43:39.003

如果您尝试列出所有文件，`C:/`请记住还有其他文件既不是隐藏文件也不是系统文件，但仍然无法打开，因为它们需要特殊权限/权限。所以：

```
String[] files = file.list();

if (files!=null) {
    for (String f : files) open(f);
} 
```

因此，只需比较数组是否为空，并设计递归，使其跳过`list()`函数数组为空的文件。

```
private void nodes(DefaultMutableTreeNode top, File f) throws IOException {

if (f.isDirectory()) {
    File[] listFiles = f.listFiles();

    if (listFiles != null) {
        DefaultMutableTreeNode b1[] = new DefaultMutableTreeNode[listFiles.length];
        for (int i = 0; i < b1.length; i++) {
            b1[i] = new DefaultMutableTreeNode(listFiles[i].toString());
            top.add(b1[i]);
            File g = new File(b1[i].toString());
            nodes(b1[i], g);
        }
    }
} 
```

这是我用来使用 jtree 创建窗口文件资源管理器的代码。

# symfony - 如何将 phirehose lib 集成到 symfony2？

> ID：15646360
> 
> 赞同：0
> 
> 时间：2013-03-26T20:04:40.550
> 
> 标签：symfony, phirehose

我正在编写应该与 twitter 流 api 一起使用的应用程序。为了与流 api 交互，我使用 phirehose lib ( [https://github.com/fennb/phirehose](https://github.com/fennb/phirehose) )。它作为单独的 php 项目运行良好。带有 Phirehose lib 的 php 文件用作后台进程，它不断地消耗推文，现在我想将它保存在 Db 中，所以我需要以某种方式在我的简单 php 文件中使用 symfony 框架的 DB 来使用所有的优势来使用推文。有没有办法做到这一点，除了将 phirehose 放在 symfony 的供应商文件夹中（我不想这样做，因为在手册中我发现这并不容易，重命名 lib 的文件和类，这可能会导致 lib 内部出现问题)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:04:48.480

这个库很容易与作曲家一起使用。看看[composer.json](https://github.com/fennb/phirehose/blob/master/composer.json)文件。

将以下内容添加到您的 symfony composer.json 然后运行`composer update`

```
"fennb/phirehose": "dev-master" 
```

当扩展 phirehose 类时

```
class TwitterStuff extends \Phirehose
{
   ......... 
```

# python - Python 查询“模块”对象没有属性“test_func”

> ID：15646363
> 
> 赞同：0
> 
> 时间：2013-03-26T20:04:49.463
> 
> 标签：python, module, attributes

我正在尝试创建一个新模块和方法作为现有库的一部分。

现有库称为 Bly.Pht。我在这个名为 Distance.py 的目录中创建了一个新的 *.py 文件。在 Distance.py 我有以下内容：

```
class Distance:
    def __init__(self, handle):
        self.handle = handle

    def test_func(t1, t2):
        print "correctly executing" 
```

在 Python shell 中，我执行以下操作：

```
from Bly.Pht import Distance    #this works fine

dist = Distance.test_func(input1, input2) 
```

我得到错误`'module' object has no attribute 'test_func'`

谁能告诉我为什么会这样？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:07:58.717

您不是在导入`Distance`类，而是在导入包含`Distance`该类的模块。它可以固定为：

```
dist = Distance.Distance.test_fund(input1, input2) 
```

如果您不打算在 中包含其他功能`Distance.py`，最好将类定义放在`Bly/Pht/__init__.py`或 中`Bly/Pht.py`，在这种情况下，您可以像以前一样导入它。（与其他语言不同，Python 不鼓励每个类都有自己的文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:09:25.897

Python 不是 Java。如果您创建了一个名为的**文件**`Distance.py`，该文件定义了一个名为的**类**`Distance`，则需要`from Bly.Pht.Distance import Distance`。或者，如果没有充分的理由将其设为类，则直接在模块中编写方法。

# javascript - parent.document 在 Chrome 中给出 undefined

> ID：15646364
> 
> 赞同：0
> 
> 时间：2013-03-26T20:04:52.520
> 
> 标签：javascript

我的 HTML 页面中有两级父子 iframe 层次结构。我想在其子文档中获取父窗口文档的对象以进行一些操作。我主要使用谷歌浏览器。

parent.document 在 Google Chrome 中给出“未定义”，而在 Mozilla 中它工作正常。有什么问题？

作为参考，请在下面找到演示该问题的三个文件的内容，

**第一个文件：'one.html'**

```
<html>
<head>
</head>
<body>
    <input type="hidden" id="one_1" name="one_1" />
    <iframe id="one" name="one" src="two.html">
</body>
</html> 
```

**第二个文件：'two.html'**

```
<html>
<head>
</head>
<body>
    <input type="hidden" id="two_1" name="two_1" />
    <iframe id="two" name="two" src="three.html">
</body>
</html> 
```

**第三个文件：'three.html'**

```
<html>
<head>
<script type="text/javascript">

    function callme() {
        alert(parent.document)
        alert(top.document)
    }
</script>
</head>
<body>
    <input type="hidden" id="three_1" name="three_1" />
    <button id="click" name="click" onclick="return callme()">Click Me</button>
</body>
</html> 
```

假设“one.html”是用谷歌浏览器打开的，当我点击“点击我”按钮时，会出现两个连续的警报框，其中包含“未定义”值。当我在 Mozilla 中打开“one.html”时，会出现两个“objectHTMLDocument”值的警告框。

单击“单击我”按钮时，请在控制台消息下方找到，

```
Unsafe JavaScript attempt to access frame with URL file:///C:/Users/user/Desktop/two.html from frame with URL file:///C:/Users/user/Desktop/three.html. Domains, protocols and ports must match.
                                                                 three.html:6
callme                                                           three.html:6
onclick                                                         three.html:13

Unsafe JavaScript attempt to access frame with URL file:///C:/Users/user/Desktop/one.html from frame with URL file:///C:/Users/user/Desktop/three.html. Domains, protocols and ports must match.
                                                                 three.html:7
callme                                                           three.html:7
onclick                                                         three.html:13 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:24:58.613

我会从自上而下注入，而不是自下而上访问。我会在 iFrame 中设置一个变量，方法是选择它并将其存储到一个变量中，如下所示：

```
var frame = document.getElementById('one'); 
```

然后注入对父级的引用：

```
frame.contentWindow.frame_parent_reference = window; 
```

然后在下一个子 iFrame 中执行此操作，将“one”替换为“two”。这样，通过third.html，我们不要求parent或top，但可以执行以下操作：

```
alert(frame_parent_reference.document);
alert(frame_parent_reference.frame_parent_reference.document); 
```

也许不是超级优雅，但它确实给了你很多控制权（你可以检查自定义引用是否存在以确保安全）。

祝你好运！

# r - r 中同时点位置之间的距离

> ID：15646365
> 
> 赞同：3
> 
> 时间：2013-03-26T20:05:02.577
> 
> 标签：r, datetime, distance, sequential

我正在计算“同时”记录的 UTM 位置之间的距离（以米为单位），但我遇到了问题。它现在写的方式我只计算只有一个“时间最近”的个体之间的距离。我希望它计算所有及时“接近”的个体之间的距离。

在我的示例中，我有 3 只驼鹿和 3 只狼。我想拿驼鹿 1 并计算同时记录的 wolf 1 然后 wolf 2 然后 wolf 3 位置之间的距离。现在脚本只搜索任何狼之间的绝对最小时间差并计算那只狼的距离而不是所有其他人。

这是我的测试数据：

驼鹿位置数据：

```
structure(list(id = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L), .Label = c("F07001", 
"F07010", "M07012"), class = "factor"), x = c(1482445L, 1481274L, 
1481279L, 1481271L, 1480849L, 1480881L, 1480883L, 1480880L, 1482448L, 
1482494L, 1482534L, 1482534L, 1482553L, 1482555L, 1482414L, 1482852L, 
1476120L, 1476104L, 1476101L), y = c(6621768L, 6619628L, 6619630L, 
6619700L, 6620321L, 6620427L, 6620438L, 6620423L, 6616403L, 6616408L, 
6616395L, 6616408L, 6616406L, 6616418L, 6616755L, 6616312L, 6623655L, 
6623646L, 6623652L), date = structure(c(1173088800, 1173096000, 
1173103260, 1173110400, 1173117600, 1173211200, 1173218400, 1173139200, 
1173088800, 1173096000, 1173103260, 1173110400, 1173117600, 1173211200, 
1173218400, 1173139200, 1173270600, 1173277800, 1173282960), class = c("POSIXct", 
"POSIXt"), tzone = "UTC")), .Names = c("id", "x", "y", "date"
), row.names = c(NA, -19L), class = "data.frame") 
```

狼定位数据：

```
structure(list(id = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L), .Label = c("HF7572", 
"Htest", "UM1347"), class = "factor"), x = c(1480610L, 1480640L, 
1480613L, 1480613L, 1480555L, 1480567L, 1480627L, 1480532L, 1480593L, 
1484394L, 1484394L, 1483940L, 1483933L, 1483935L, 1483930L, 1483855L, 
1483793L, 1483802L, 1484392L, 1483855L), y = c(6619853L, 6619739L, 
6619759L, 6619862L, 6619838L, 6619772L, 6619902L, 6619899L, 6619887L, 
6619589L, 6619602L, 6619899L, 6619907L, 6619905L, 6619896L, 6619834L, 
6619702L, 6619672L, 6619558L, 6619834L), date = structure(c(1173088800, 
1173096060, 1173103440, 1173111600, 1173117780, 1173213600, 1173218400, 
1173141120, 1173266100, 1173095940, 1173099600, 1173103200, 1173106920, 
1173110400, 1173208800, 1173211200, 1173222000, 1173266100, 1173362100, 
1173211200), class = c("POSIXct", "POSIXt"), tzone = "UTC")), .Names = c("id", 
"x", "y", "date"), row.names = c(NA, -20L), class = "data.frame") 
```

到目前为止，这是我的脚本：

```
mloc=read.csv("moose.csv", head = T)
wloc=read.csv("wolf.csv", head=T)
mloc$date<-as.POSIXct(strptime(mloc$date,"%Y-%m-%d %H:%M"),tz="UTC")
wloc$date<-as.POSIXct(strptime(wloc$date,"%Y-%m-%d %H:%M"),tz="UTC")

#sort the data sequentially by date time then convert to number
Sortmoose = mloc[order(mloc$date),]
Sortwolf = wloc[order(wloc$date),]
m <- as.numeric(Sortmoose$date)
w <- as.numeric(Sortwolf$date)

#Creates index of the time intervals
id <- findInterval(m, w, all.inside=TRUE)
id_min <- ifelse(abs(m-w[id])<abs(m-w[id+1]), id, id+1)
Sortmoose$wolfID = Sortwolf$id[id_min]
Sortmoose$wolfdate =Sortwolf$date[id_min]
Sortmoose$wolfx = Sortwolf$x[id_min]
Sortmoose$wolfy = Sortwolf$y[id_min]
Sortmoose$dist= sqrt((Sortmoose$wolfx-Sortmoose$x)^2+(Sortmoose$wolfy-Sortmoose$y)^2) 
```

只要位置是在“同一”时间记录的，我想计算每对驼鹿/狼对之间的距离。我希望输出包含驼鹿信息和相关的狼信息以及这两点之间的距离（以米为单位）。我也想要时差，所以我可以过滤掉那些> 45分钟或类似的东西，但这是我认为我以后可以做的事情。基本上类似于：mooseID mooseDate mooseX mooseY wolfID wolfDate wolfX wolfY Distance(m) TimeDiff (min)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:22:26.980

**新的解决方案**。这是执行您想要的代码（近似匹配）。关键思想是创建一个带有新列的新数据表，`date1`这样对于`date = 05:17:13`原始数据中的每个，它将具有`date1 = 04:00:00`,`05:00:00`和`06:00:00`（以及所有其他列重复），然后对这个新列进行合并。这将保证原始数据中彼此相隔一小时内的每两个事件将被合并。

之后我们只计算距离和时间差。

请注意，使用`data.table`对速度至关重要，因为您的数据帧太大 - 使用常规`data.frame`会太慢。

```
library(data.table)
library(lubridate)

mloc <- data.table(mloc)
wloc <- data.table(wloc)

# Returns a new data table with one new column (date1) and length(range)
# rows for each row in the initial data table, duplicating all other fields.
# Example: for row with date = '2013-01-15 05:17:23' and for the default range
# argument it will add rows with date1 = '2013-01-15 04:00:00', '2013-01-15 05:00:00'
# and '2013-01-15 06:00:00'
AddTimeBoundaries <- function(dt, range = -1:1) {
  dt1 <- rbindlist(lapply(range, 
             function(x) data.table(id = dt$id, date = dt$date, 
                        date1 = floor_date(dt$date, 'hour') +
                        hours(x))))
  setkey(dt1, id, date)
  setkey(dt, id, date)
  result <- dt[dt1]
  setkey(result, date1)
  result
}

mloc.1 <- AddTimeBoundaries(mloc)
wloc.1 <- AddTimeBoundaries(wloc)

x <- mloc.1[wloc.1, allow.cartesian = TRUE][!is.na(id)]
result <- unique(x[, list(id, date, x, y, id.1, date.1, x.1, y.1, 
              distance = sqrt((x-x.1)^2 + (y-y.1)^2),
              time.diff = date - date.1)]) 
```

结果在 1 小时内包含所有事件（有时在 2 小时内，但您可以轻松过滤掉这些事件）。

```
> head(result, 10)
        id                date       x       y   id.1              date.1     x.1     y.1  distance  time.diff
1: F07001 2007-03-05 10:00:00 1482445 6621768 HF7572 2007-03-05 10:00:00 1480610 6619853 2652.2538     0 secs
2: M07012 2007-03-05 10:00:00 1482448 6616403 HF7572 2007-03-05 10:00:00 1480610 6619853 3909.0592     0 secs
3: F07001 2007-03-05 10:00:00 1482445 6621768 UM1347 2007-03-05 11:59:00 1484394 6619589 2923.4640 -7140 secs
4: M07012 2007-03-05 10:00:00 1482448 6616403 UM1347 2007-03-05 11:59:00 1484394 6619589 3733.2977 -7140 secs
5: F07001 2007-03-05 12:00:00 1481274 6619628 HF7572 2007-03-05 10:00:00 1480610 6619853  701.0856  7200 secs
6: M07012 2007-03-05 12:00:00 1482494 6616408 HF7572 2007-03-05 10:00:00 1480610 6619853 3926.5100  7200 secs
7: F07001 2007-03-05 10:00:00 1482445 6621768 HF7572 2007-03-05 12:01:00 1480640 6619739 2715.6705 -7260 secs
8: F07001 2007-03-05 12:00:00 1481274 6619628 HF7572 2007-03-05 12:01:00 1480640 6619739  643.6435   -60 secs
9: M07012 2007-03-05 10:00:00 1482448 6616403 HF7572 2007-03-05 12:01:00 1480640 6619739 3794.4380 -7260 secs
10: M07012 2007-03-05 12:00:00 1482494 6616408 HF7572 2007-03-05 12:01:00 1480640 6619739 3812.2011   -60 secs 
```

**旧解决方案**。*这不起作用，因为 OP 需要日期的近似匹配（1 小时内），而不是精确匹配。*

假设我正确解释了您的问题，这里是使用`data.table`package.json 的解决方案。我调用了您的测试数据中的第一个结构`mloc`和第二个结构`wloc`。

步骤 1\. 将两个数据帧都转换为`data.table`并设置 key on `date`：

```
library(data.table)
mloc <- data.table(mloc)
wloc <- data.table(wloc)
setkey(mloc, date)
setkey(wloc, date) 
```

步骤 2\. 通过键合并两个表`date`，创建“笛卡尔积”并计算距离：

```
x <- mloc[wloc, allow.cartesian = TRUE][!is.na(id)]
x[, distance := sqrt((x-x.1)^2 + (y-y.1)^2)]

> x
                   date     id       x       y   id.1     x.1     y.1  distance
 1: 2007-03-05 10:00:00 F07001 1482445 6621768 HF7572 1480610 6619853 2652.2538
 2: 2007-03-05 10:00:00 M07012 1482448 6616403 HF7572 1480610 6619853 3909.0592
 3: 2007-03-05 16:00:00 F07001 1481271 6619700 UM1347 1483935 6619905 2671.8759
 4: 2007-03-05 16:00:00 M07012 1482534 6616408 UM1347 1483935 6619905 3767.2019
 5: 2007-03-06 20:00:00 F07001 1480881 6620427 UM1347 1483855 6619834 3032.5443
 6: 2007-03-06 20:00:00 M07012 1482555 6616418 UM1347 1483855 6619834 3655.0042
 7: 2007-03-06 20:00:00 F07001 1480881 6620427  Htest 1483855 6619834 3032.5443
 8: 2007-03-06 20:00:00 M07012 1482555 6616418  Htest 1483855 6619834 3655.0042
 9: 2007-03-06 22:00:00 F07001 1480883 6620438 HF7572 1480627 6619902  593.9966
10: 2007-03-06 22:00:00 M07012 1482414 6616755 HF7572 1480627 6619902 3618.9747 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:56:51.083

我想我有一个部分解决方案，它可以让您根据需要修改“关闭”窗口。

```
# Convert to data.table:
mloc<-as.data.table(mloc)
wloc<-as.data.table(wloc)

# Rename columns to make them less ambiguous:
setnames(mloc,paste0("m",names(mloc)))
setnames(wloc,paste0("w",names(wloc)))

# Adjustable rounding factor:
r <- 45 /60/24 # Need to convert minutes to days

# Add the rounded date column to the two tables:
mloc[,rdate:=round(as.numeric(mdate-as.POSIXct("1970-01-01", tz="GMT"))/r)*r*60*60*24+as.POSIXct("1970-01-01", tz="GMT")]
wloc[,rdate:=round(as.numeric(wdate-as.POSIXct("1970-01-01", tz="GMT"))/r)*r*60*60*24+as.POSIXct("1970-01-01", tz="GMT")]

# Set the keys:
setkey(mloc,rdate)
setkey(wloc,rdate)

# Join the wolf and moose tables on the rounded date:
wloc[mloc, allow.cartesian=T,nomatch=0]

##                  rdate    wid      wx      wy               wdate    mid      mx      my               mdate
## 1: 2007-03-05 09:45:00 HF7572 1480610 6619853 2007-03-05 10:00:00 F07001 1482445 6621768 2007-03-05 10:00:00
## 2: 2007-03-05 09:45:00 HF7572 1480610 6619853 2007-03-05 10:00:00 M07012 1482448 6616403 2007-03-05 10:00:00
## 3: 2007-03-05 12:00:00 UM1347 1484394 6619589 2007-03-05 11:59:00 F07001 1481274 6619628 2007-03-05 12:00:00
## 4: 2007-03-05 12:00:00 HF7572 1480640 6619739 2007-03-05 12:01:00 F07001 1481274 6619628 2007-03-05 12:00:00
## 5: 2007-03-05 12:00:00 UM1347 1484394 6619589 2007-03-05 11:59:00 M07012 1482494 6616408 2007-03-05 12:00:00
## 6: 2007-03-05 12:00:00 HF7572 1480640 6619739 2007-03-05 12:01:00 M07012 1482494 6616408 2007-03-05 12:00:00
## 7: 2007-03-05 14:15:00 UM1347 1483940 6619899 2007-03-05 14:00:00 F07001 1481279 6619630 2007-03-05 14:01:00
## 8: 2007-03-05 14:15:00 HF7572 1480613 6619759 2007-03-05 14:04:00 F07001 1481279 6619630 2007-03-05 14:01:00
## 9: 2007-03-05 14:15:00 UM1347 1483940 6619899 2007-03-05 14:00:00 M07012 1482534 6616395 2007-03-05 14:01:00
##10: 2007-03-05 14:15:00 HF7572 1480613 6619759 2007-03-05 14:04:00 M07012 1482534 6616395 2007-03-05 14:01:00
##11: 2007-03-05 15:45:00 UM1347 1483935 6619905 2007-03-05 16:00:00 F07001 1481271 6619700 2007-03-05 16:00:00
##12: 2007-03-05 15:45:00 UM1347 1483935 6619905 2007-03-05 16:00:00 M07012 1482534 6616408 2007-03-05 16:00:00
##13: 2007-03-05 18:00:00 HF7572 1480555 6619838 2007-03-05 18:03:00 F07001 1480849 6620321 2007-03-05 18:00:00
##14: 2007-03-05 18:00:00 HF7572 1480555 6619838 2007-03-05 18:03:00 M07012 1482553 6616406 2007-03-05 18:00:00
##15: 2007-03-06 20:15:00 UM1347 1483855 6619834 2007-03-06 20:00:00 F07001 1480881 6620427 2007-03-06 20:00:00
##16: 2007-03-06 20:15:00  Htest 1483855 6619834 2007-03-06 20:00:00 F07001 1480881 6620427 2007-03-06 20:00:00
##17: 2007-03-06 20:15:00 UM1347 1483855 6619834 2007-03-06 20:00:00 M07012 1482555 6616418 2007-03-06 20:00:00
##18: 2007-03-06 20:15:00  Htest 1483855 6619834 2007-03-06 20:00:00 M07012 1482555 6616418 2007-03-06 20:00:00
##19: 2007-03-06 21:45:00 HF7572 1480627 6619902 2007-03-06 22:00:00 F07001 1480883 6620438 2007-03-06 22:00:00
##20: 2007-03-06 21:45:00 HF7572 1480627 6619902 2007-03-06 22:00:00 M07012 1482414 6616755 2007-03-06 22:00:00 
```

我说这是部分的，因为当一个值向上取整而另一个向下取整时，它将错过近距离匹配。例如，`wdate`of`2007-03-05 16:20:00`向上舍入为`2007-03-05 16:30:00`，`mdate`of`2007-03-05 16:00:00`向下舍入为`2007-03-05 15:45:00`，因此即使这两个事件仅相隔 20 分钟且窗口为 45 分钟，连接中也不存在匹配项。

我有另一个`data.table`不四舍五入的部分解决方案，而是使用`roll=-45*60`and `roll=45*60`（然后将两个结果`rbindlist`一起编辑）。它选择了这个示例记录，但看起来还有一些我需要调查的其他问题......

# c# - 从 XmlCompiledTransform 中删除特殊字符

> ID：15646373
> 
> 赞同：0
> 
> 时间：2013-03-26T20:05:39.093
> 
> 标签：c#, asp.net, xslt, encoding, special-characters

我正在使用`DataSet`，将其加载到`XmlDocument`中，使用 XSLT 文件对其进行转换，并尝试从我的输出文件中删除特殊字符。

缩写代码：

```
DataSet ds = GetData(); //queries database
XmlDocument doc = new XmlDocument();
doc.LoadXml(ds.GetXml());

XslCompiledTransform trans = new XmlCompiledTransform();
trans.Load("myTemplate.xslt");

XmlTextWriter writer = new XmlTextWriter("C:\output.xml", Encoding.GetEncoding("ISO-885901"));

trans.Transform(doc, null, writer);
writer.Close(); 
```

XSLT 标头

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" > 
```

我认为它只是与编码有关，这就是为什么我把它`Encoding.GetEncoding("ISO-8859-1")`放在那里，尽管我可能有错误的。具体来说，我需要从输出中删除像 ® 这样的字符。如果不是编码，那么有什么办法可以去掉这些字符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:35:19.190

您可以尝试使用正则表达式。这将删除所有特殊字符

```
public static string RemoveSpecialCharacters(string specialCharacters)
{
    Regex regex = new Regex("(?:[^a-z0-9 ]|(?<=['\"])s)", RegexOptions.IgnoreCase |  RegexOptions.CultureInvariant | RegexOptions.Compiled);
    return regex.Replace(specialCharacters, String.Empty);
} 
```

然后只需调整您的代码，以便您可以保留一些您需要的特殊字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:13:09.867

显然切换编码不是要走的路，因为这个字符存在于 ISO-8859-1 中，所以它仍然出现。切换到像 ASCII 这样的基本编码只是最终将那些它无法识别的符号更改为问号。

我的解决方案就像 Jhigs，但我不想遍历`DataSet`行，手动对事物应用正则表达式过滤器。我使用了这个问题的答案：

[仅针对特定标签通过 XSLT 从 XML 中删除特殊字符](https://stackoverflow.com/questions/3205763/remove-special-characters-from-xml-via-xslt-only-for-specific-tags)

```
<Description>
    <xsl:value-of select="translate(DESC, '&lt;/&gt;&#x2122;&#xAE;', '')" />
</Description> 
```

# hadoop - Cloudera CDH 上的 Impala “无法创建日志文件：权限被拒绝”

> ID：15646377
> 
> 赞同：1
> 
> 时间：2013-03-26T20:05:50.797
> 
> 标签：hadoop, cloudera

我通过 CDH 4.2.0-1.cdh4.2.0.p0.10 集群上的 Cloudera Manager 4.5 中的包裹安装了 Impala。

当我尝试启动服务时，它在所有节点上都失败并显示此消息

```
 perl -pi -e 's#{{CMF_CONF_DIR}}#/run/cloudera-scm-agent/process/800-impala-IMPALAD#g' /run/cloudera-scm-agent/process/800-impala-IMPALAD/impala-conf/impalad_flags
    '[' impalad = impalad ']'
    exec /opt/cloudera/parcels/IMPALA-0.6-1.p0.109/lib/impala/../../bin/impalad --flagfile=/run/cloudera-scm-agent/process/800-impala-IMPALAD/impala-conf/impalad_flags
Could not create logging file: Permission denied
COULD NOT CREATE A LOGGINGFILE 20130326-204959.15015!log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: /var/log/impalad/impalad.INFO (Permission denied)
    at java.io.FileOutputStream.openAppend(Native Method)
...
at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)
    at org.apache.hadoop.fs.FileSystem.<clinit>(FileSystem.java:92)
+ date 
```

[完整的 StdErr 日志](http://pastebin.com/tw9M1xkz)

我不确定权限问题是否是 Impala 未运行的原因，或者是否有其他东西崩溃并且权限问题只是因为无法写入崩溃日志而出现。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:44:22.763

从调试二进制文件运行 impala，如下所述：

[https://issues.cloudera.org/browse/IMPALA-160](https://issues.cloudera.org/browse/IMPALA-160)

似乎与 Kernel 12.04.1 LTS 中的 JVM 有关

原始答案：[https ://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/impala-user/4MRZYbn5hI0](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/impala-user/4MRZYbn5hI0)

# gradle - 是否有合适的方法来为 Gradle 任务建模“之后执行”而不是“依赖于”？

> ID：15646378
> 
> 赞同：0
> 
> 时间：2013-03-26T20:05:51.310
> 
> 标签：gradle

我不确定是否有可能，但我希望能够做这样的事情：

```
task myTask(executeAfter: myOtherTask) << {
     //do something
} 
```

其中 myTask 将在执行之前等待 myOtherTask 完成，但如果在构建脚本调用期间未显式命名 myOtherTask，它将不会作为 myTask 的依赖项执行（如 dependsOn 会导致发生）。

我有使用[ExpandoMetaClass](http://groovy.codehaus.org/ExpandoMetaClass)来添加它的想法，但我不确定它是否真的可以在 Gradle 的生命周期中以这种方式实现。

```
Task.metaClass.executeAfter = { dependencyTask ->
     if(<some condition>) {
         this.dependsOn(dependencyTask)
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:05:51.310

看起来这是[在工作中，](https://stackoverflow.com/a/15283605/555642)但还没有。拉取请求在[这里](https://github.com/gradle/gradle/pull/134)。

# android - Android 小部件尺寸：单个单元格的高度是 80dp 还是 40dp？

> ID：15646380
> 
> 赞同：2
> 
> 时间：2013-03-26T20:05:54.827
> 
> 标签：android, android-layout, android-widget

我在理解一些谷歌文档时遇到了一些麻烦。具体来说，[此链接](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size)建议对于小部件，1 个单元格的高度和宽度为 40dp，2 个单元格的高度和宽度为 110dp，等等。

然而，在实践中，在我的小部件从 1x1 小部件切换到 2x2 小部件之前，我似乎可以将 minHeight 和 Width 设置为高达 80dp。有谁知道如何解释这种变化？（关于这个问题，为什么文档中的第一个单元格是 40dp，但是如果您想占用 2 个单元格，那么您有两倍以上的空间？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:25:37.447

如果您指的是启动器单元格，则值会发生变化（取决于不同启动器中的网格大小。

对于普通启动器，这些是每个单元的 dp。

1 40dp

2 110dp

3 180dp

4 250dp

n 70 × n - 30

来源：http: [//developer.android.com/guide/practices/ui_guidelines/widget_design.html](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)

# ios - 在 iPod iTouch 上开发 - UIView 问题

> ID：15646384
> 
> 赞同：1
> 
> 时间：2013-03-26T20:06:20.253
> 
> 标签：ios, xcode, uiview, ipod-touch

所以我一直在使用这个网站来解决我的很多问题。我非常擅长谷歌搜索问题和调试最糟糕的错误代码，但这是我无法弄清楚的相当基本的东西。

我的 UIView 与我在 iTouch 上实际看到的相比总是有点不同。我不确定这是否是 xCode 的 IB 的按钮只有更大的图形，但通常有 20px 的高度差，如果我在 UIView 的底部设置一个按钮，它就会被切断。（我以为它应该是 320x460 ..）

通常我对此不以为然，因为在我开始使用登录屏幕滚动到位之前，这一直不是问题。xCode 声称我的视图是 320x548，我的应用程序说它是 320x480。如果我将滚动大小调整为 320x480，iTouch 上的视图会缩小，留下很大的间隙。

我一直在 IB 中使用 UIViews 而不是 ViewController，因为我正在使用一些导航控件进行子视图。

有什么我做错了吗？

[http://oi49.tinypic.com/rrnjit.jpg](http://oi49.tinypic.com/rrnjit.jpg) （首次加载时）

[http://oi50.tinypic.com/j8matu.jpg](http://oi50.tinypic.com/j8matu.jpg)（向下滚动约 20 像素..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:07:43.137

您需要正确使用弹簧和支柱或自动布局。您可能正在为 4 英寸屏幕设计您的应用程序 - 在您的 Storyboard 中，有一个选项可以查看它在 3:5 英寸屏幕上的外观。按那个。

更多信息，谷歌自动布局。

# mule - CloudHub 使用什么版本的 Java？

> ID：15646388
> 
> 赞同：0
> 
> 时间：2013-03-26T20:06:26.940
> 
> 标签：mule, mule-studio, cloudhub

谁能告诉我各种版本的 CloudHub 正在运行什么版本的 Java？我猜在某处有一份文件详细说明了这一点，但我一直没能找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:15:12.563

I don't know of any doc specifying this, but I can see that *as of today*, CloudHub runs with: `1.6.0_24 Vendor: Sun Microsystems Inc.`.

# android - 是否可以在 linux 上构建/编译 ios、windows 8 和 windows 7 应用程序？

> ID：15646389
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:06:33.477
> 
> 标签：android, ios, linux, windows-8

我正在构建一个跨平台应用程序。它将为 windows 8、IOS、android 和 windows 7 构建。

**问题**：在服务器上我有 4 个不同的代码库。1 用于 Windows 8，1 用于 Windows 7，1 用于 android，1 用于 Ios。在后端和一些脚本的帮助下，我将更改代码库。因此，每次发生变化时，都需要在服务器上构建/编译应用程序。（我正在使用phonegap）

我们可以在 linux 服务器上构建/编译这些应用程序吗？如果没有，最好的解决方案是什么？

我需要为不同的应用程序获取单独的服务器吗？ios（ios服务器）、windows 8（windows 8服务器）、windows 7（windows 7服务器）和android（linux服务器）？

**编辑**：我知道我们的应用程序需要 windows8 和 ios。我将在开发环境中的这些操作系统上对其进行测试，然后在服务器上为我的客户更新它。之后，他们想要更改应用程序中的内容。为此正在创建一个后端，它将在某些脚本的帮助下使用新数据更新代码库。现在这些应用程序必须自己构建在生产环境中。即它需要自动化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:25:11.707

**注意**：可能是错误的答案；由于评论而删除/取消删除它。**PhoneGap**看起来很复杂！

> 我们可以在 linux 服务器上构建/编译这些应用程序吗？

是的你可以。这是否理智是另一个问题。

但是，您**可以**在 Linux 机器上获得`mingw`交叉编译器。这能够为 Windows 7 和 8 构建二进制文件；我绝对做到了这一点。*此外，为 Linux 制作iOS*交叉编译器当然是可能的。问题是你需要所有的头文件和库。即，您需要在 Linux 上建立一个完整的*影子开发目录。*

这一切都不简单。如果你有 Ubuntu/Debian，我很确定它提供了一些[*mingw*包](http://packages.debian.org/search?keywords=mingw&searchon=names&suite=stable&section=all)。

这个问题绕过了与程序相关的界限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:15:16.350

你需要一个用于 iOS 的 Mac 和用于 Windows 8 应用程序的 Windows 8

# bash - 在bash中的case语句中使用通配符

> ID：15646392
> 
> 赞同：1
> 
> 时间：2013-03-26T20:06:49.177
> 
> 标签：bash, wildcard

我正在制作一个简单的 bash 脚本。它接受 2 个选项（-d 和 -f）。我还想允许这个选项的长版本（-directory 和 -file）。我尝试使用大括号通配符，但它不起作用。有什么建议么？

谢谢！

```
#!/bin/bash

while test $# != 0
do
  case $1 in
  -f)
    # do something
    ;;
  {-d,-directory})
    # do something
    ;;
  *)
    echo "error"
    ;;
  esac
  shift
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:13:41.540

使用管道符号：

```
case $1 in
    -f)
        # do something
        ;;
    -d|-directory)
        # do something
        ;;
    *)
        echo "error"
        ;;
 esac 
```

case 语句中的各种选项都是 shell 脚本*模式*，其中一个*模式* 实际上可以是由这个管道符号分隔的多个模式`|`。您还可以在此模式中使用正则表达式，例如

```
-[dD]|-directory) 
```

将匹配`-d`,`-D`和`-directory`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:15:50.023

您可以使用

```
-d|-directory)
    # do something
    ;; 
```

但是您应该考虑使用双破折号来匹配“长选项”，例如 in `--directory`。

# android - INSERT INTO android SQL语句麻烦

> ID：15646393
> 
> 赞同：0
> 
> 时间：2013-03-26T20:06:51.317
> 
> 标签：android, sql

我无法使用 INSERT INTO 语句直接将一些数据插入 SQLite，这可能是一个愚蠢的错误，但我找不到它。

```
 String sql = ("INSERT INTO task(task_goal) VALUES('ASDA');");
            this.ourDatabase.execSQL(sql); 
```

错误是：

```
 table task has no column named task_goal 
```

显然有一个名为任务目标的列，所以我不确定为什么会发生这个错误？

```
db.execSQL("CREATE TABLE " + DATABASE_TASK3 + " (" +

            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            KEY_GOAL + " TEXT NOT NULL);"       
    ); 
```

在哪里：

```
public static final String KEY_ROWID = "_id";
public static final String KEY_GOAL = "task_goal";
private static final String DATABASE_TASK3 = "task"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:09:19.623

您似乎在至少运行一次应用程序后更改了定义表的 Java 代码，但尚未更新 SQL 模式。您需要递增`DATABASE_VERSION`以告诉 SQLiteOpenHelper 有一个新模式，它不会为您检查。

* * *

`DATABASE_VERSION`是一个传递给 SQLiteOpenHelper 构造函数的公共变量，它不是通用的，如果你自己不使用这个变量，你只需要增加你传递给[SQLiteOpenHelper 构造函数](https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29)的任何值：

```
SQLiteOpenHelper (Context context, String name, 
        SQLiteDatabase.CursorFactory factory, int version) 
```

# android - 检测片段中的 onContextMenu 点击

> ID：15646395
> 
> 赞同：0
> 
> 时间：2013-03-26T20:06:57.210
> 
> 标签：android, android-fragments, contextmenu

所以我已经成功地将上下文菜单弹出连接到片段中的列表视图。这些项目出现了，但是当我单击它们时，它们`onContextMenuItemSelectedMenu()`会被忽略，而是`onMenuItemClick()`在父活动中被调用。当我单击上下文菜单项时，我该如何做到这一点，`onContextMenuItemSelectedMenu()`而不是在片段中调用。谢谢。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo)
{
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add("item1");
    menu.add("item2");
    menu.add("item3");      
}

@Override
public boolean onContextItemSelected (android.view.MenuItem item){
    Log.i("cTest", "clicked context menu");
            return true;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:22:07.810

我想到了。原来它和按钮一样。两者都在片段中：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo){

        super.onCreateContextMenu(menu, v, menuInfo);
        menu.add("item0").setOnMenuItemClickListener(this);
        menu.add("item1").setOnMenuItemClickListener(this);

}

@Override
public boolean onMenuItemClick(MenuItem item){
    if(itemName.equals("item0))
    {

    }
    else if (itemName.equals("item1"))
     {
     }

} 
```

# javascript - 从父框架中拖动一个项目并将其放置在子 iframe 中的可放置对象中

> ID：15646402
> 
> 赞同：1
> 
> 时间：2013-03-26T20:07:19.030
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我正在尝试将项目从父框架拖到可放置元素中，但在 iframe 中。它在将项目放在同一帧中的可放置元素上时有效，但在跨帧尝试时，它什么也不做。

我试图解决这个问题很多次，但没有成功。

这是父框架的代码：

```
<html>
<head>
    <title></title>
    <link rel="stylesheet"                             href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<style>
  #draggable { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
  #droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
  </style>
  <script>
  $(function() {
    $( "#draggable" ).draggable();
    $( "#droppable" ).droppable({
      drop: function( event, ui ) {
        $( this )
          .addClass( "ui-state-highlight" )
          .find( "p" )
            .html( "Dropped!" );
      }
    });
  });
  </script>
</head>
<body>
    <div id="draggable" class="ui-widget-content">
  <p>Drag me to my target</p>
</div>

<div id="droppable" class="ui-widget-header">
  <p>Drop here</p>
</div>
<iframe src="P1.html" width = "500px" height = "500px">
</iframe>

</body>
</html> 
```

这是 iframe 的代码：

```
<html>
<head>
    <title></title>
    <link rel="stylesheet"                             href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<style>
  #draggable { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
  #droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
  </style>
  <script>
  $(function() {
    $( "#draggable" ).draggable();
    $( "#droppable" ).droppable({
      drop: function( event, ui ) {
        $( this )
          .addClass( "ui-state-highlight" )
          .find( "p" )
            .html( "Dropped!" );
      }
    });
  });
  </script>
</head>
<body>
    <div id="draggable" class="ui-widget-content">
  <p>Drag me to my target</p>
</div>

<div id="droppable" class="ui-widget-header">
  <p>Drop here</p>
</div>    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:14:44.560

不幸的是，框架是独立的窗口对象，因此您无法将对象从一个 DOM 树拖到另一个窗口的 DOM 树中。网页基于窗口 DOM 的当前状态呈现。当您拖动元素时，DOM 会发出重新绘制的信号，并且网页会根据元素的样式重新呈现（在拖动的情况下，顶部和左侧的样式属性通常是罪魁祸首）。

当您的页面上有两个框架（或窗口对象）时（在这种情况下，一个在另一个内部），您也有这个 DOM 对象的两个完全独立的实例，因此，它的行为。当一个在另一个内部并一起执行一个更大的 DOM 渲染时，DOM 不会协作；它们是完全不同的范围（包括 JavaScript），它的设计方式是有原因的（主要是为了安全，因为您可以将外部网站加载到嵌入式窗口/iFrame 对象中）。

# c++ - 显示电子邮件标头，dkim=hardfail（测试模式）和 dkim=permerror（错误 sig）

> ID：15646404
> 
> 赞同：2
> 
> 时间：2013-03-26T20:07:21.340
> 
> 标签：c++, email, smtp, smtpclient, dkim

我正在尝试通过 c++ 和 OpenSSL 编写电子邮件客户端应用程序。当我通过此应用程序检查和发送电子邮件时，Gmail 和 Yahoo 都在我的电子邮件标题中显示错误。

**Gmail 显示 >“dkim=hardfail（测试模式）header.i=@”。**

**雅虎显示 > “dkim=permerror (bad sig)”。**

我的 Gamil 电子邮件标题：

```
Delivered-To: rajforever6@gmail.com
Received: by 10.112.41.134 with SMTP id f6csp80981lbl;
        Tue, 26 Mar 2013 02:25:15 -0700 (PDT)
X-Received: by 10.68.59.199 with SMTP id b7mr22705642pbr.167.1364289914515;
        Tue, 26 Mar 2013 02:25:14 -0700 (PDT)
Return-Path: <no_feed@korcot.info>
Received: from smtp.korcot.info ([103.18.168.250])
        by mx.google.com with SMTP id ak6si16720576pbd.344.2013.03.26.02.25.08;
        Tue, 26 Mar 2013 02:25:14 -0700 (PDT)
Received-SPF: softfail (google.com: domain of transitioning no_feed@korcot.info does not designate 103.18.168.250 as permitted sender) client-ip=103.18.168.250;
Authentication-Results: mx.google.com;
       spf=softfail (google.com: domain of transitioning no_feed@korcot.info does not designate 103.18.168.250 as permitted sender) smtp.mail=no_feed@korcot.info;
       dkim=hardfail (test mode) header.i=@korcot.info
Date: Tue, 26 Mar 2013 02:25:14 -0700 (PDT)
DKIM-Signature: v=1; 
    a=rsa-sha256; 
    s=mail; 
    d=korcot.info; 
    t=1364289917; 
    c=relaxed/relaxed; 
    h=from:to:subject:message-id:mime-version:content-type; 
    bh=Q3K/t162lFKWTLs4xBY2FR1vT5pThpI6rnqM7i6p/Vo=; 
    b=Tgrc2nelY/3HA0M14s4RXFvhonXQzFRtDAD/X/0ITvln6JSWjIxgQSX7WOrfAxb4K
    kTXV+Bbw6DKK+2aVi2WrCYdduP5wXJpTVnjaCJQTs2+DtAo3sL1re6tz3uHOpa0PmRS
    3qRzfXQqN8QczOv63UjAGO6sL+o5atU3vbRYMxg=
From: "Comfirm"<no_feed@korcot.info>
To: "Kuntal"<rajforever6@gmail.com>
Subject: Key6gg6 ?
Message-ID: <20030712040037.46341.5F8J@football.korcot.info>
MIME-Version: 1.0
Content-Type: text/html 
```

我的 Yahoo 电子邮件标头：

```
From Comfirm Wed Mar 27 02:26:20 2013
X-Apparently-To: raja_kuntal_majumder@yahoo.com via 106.10.150.84; Tue, 26 Mar 2013 11:26:20 -0700
Return-Path: <no_feed@korcot.info>
Received-SPF: softfail (transitioning domain of korcot.info does not designate 103.18.168.135 as permitted sender)
 bm5lciByZWFkeSBJcyBkaW5uZXIgcmVhZHkgSXMgZGlubmVyIHJlYWR5IElz
 IGRpbm5lciByZWFkeSBJcyBkaW5uZXIgcmVhZHkgPyBKb2UuIAEwAQEBAQ--
X-YMailISG: v3YQap0WLDt5n8clVc4Zd9ENB5oCUMcfvdmbG1QujbCK18hQ
 nhRHHgRhlvqfyO8lOyt.Rwjm8Y1_i35XTte6Pt.JxYeVZXQtQqLe66qLvndr
 _RhG.PTZE2AWeRN.tMHi.aAIcS9WfKzOzi9i3tYtSSzZMPBMlBwFu5hBV4qI
 v3KO9LCaMGeCe3W4mLsxgbkdddDi_8r8afEb7jAUKVn8i2VyRaJQGELdL5xb
 .lNzJ0h_vMs5HseAhRPefe.o9W4A_oMpcairIa9OfDkC3zmZWYbyntXcxNgi
 uKtvTwaqyeuUvuyIxrRGlpUy8RFxRaLOlp6s8riVCfLyu1dEE6Bpa9KFlVa0
 JtRm0XZ3znl2WBzw1PnHskYZ3X2SHrzz8q7LfmUETa7idziLtkLNqdzZbvJE
 nnoc3W3aYmxkgZob25oRD8Q338f9774TfJMjeqTaQLbmMflOW5GqoPYneB0v
 hKqmdYUcqeZpVfcRXBVSxzS2_lK7spwOJX_wXKAH5TbiRXORouWvbkw9EHgc
 yxqKoTQAqpnc8ibxcfT9cmVQ2KXYXlrl7d0VotpJ.m8I0sMY0mTviVkt6vCI
 FJUYScRuGMxjOaYqyURUU5mDM_bxQXRl1WFzEhYBQKsyMOhZVtBBrPyEsCLs
 NHASPNKPUS7wuB712WAI3aMqTNV.kNize8nwrm.hj9f9fb2nJwcB.IvuQvKx
 Ujd9Pq68B9u80Wd8gtp5rAIy7.B_0x6JHwK14fDWgh1Yr7k1PB8A_daUJh.G
 d2f4rgY0CFbg3chmWC7O5AGvODB79.pFfkl8ooZsUpYqdsj5.KX5XLQjsfud
 JCsO1870Gtty31aPGvSHRPDGOTJ_lQ6v25BMaCnGS8AtvYbtjW9avY0MHTJw
 rnT0_Hzca6oXayZG0CCcvQ6CMd.UnOlIt4pFEWwd9Zlo5BIJ4hd9N99qMbul
 mGgNYVRBc0f7DokmkLiHSI29k34ifNyh8Z1qbeKWTRo4FXDBa.vfc9cVWqpp
 DVF8FbkpuThc7QJ63cszp98TCdZy2Bq5yOMrqEdK85e141MndRChrWmjUplJ
 4e_UWqNmaL17cGPzXuJc3TAD3nsdK9qh1ax.9K.jkRwSm4zgWscqosCPAgOJ
 lIOo3L3QScOP9iQ6xOfuzm7dxw44Z3WBHMthoOgw_MGt488EClyDr2PiJT.f
 1_BklnxGS2iuYH2TLyY69ESKE0Y4pPGmaboLASqBQkQZ6xaoFM8HDoIB20zK
 KrNadXnlkMW.t6RuIcaPX3fOrKzvnKPerZ3NA1kn
X-Originating-IP: [103.18.168.135]
Authentication-Results: mta1360.mail.bf1.yahoo.com  from=korcot.info; domainkeys=neutral (no sig);  from=korcot.info; dkim=permerror (bad sig)
Received: from 127.0.0.1  (HELO smtp.korcot.info) (103.18.168.135)
  by mta1360.mail.bf1.yahoo.com with SMTP; Tue, 26 Mar 2013 11:26:19 -0700
DKIM-Signature: v=1; 
    a=rsa-sha256; 
    s=mail; 
    d=korcot.info; 
    t=1364322363; 
    c=relaxed/simple; 
    h=from:to:subject:mime-version:content-type; 
    bh=Q3K/t162lFKWTLs4xBY2FR1vT5pThpI6rnqM7i6p/Vo=; 
    b=THj4wE+EOSKThXGIUPBgcTlWTICIDFikgEvlQVpBotViQTNW+k/dpr58kVZ1HAght
    KTdACtbEO2m3A17vxrY1kEQazhwu7pbWIW5TwBfUtIU9SbFBL88AQz2fxxi6BHqEfNh
    WYeGG0mEskG9J2JFeNVG0WaaNJ9gTh5t/4nqvVc=
From: "Comfirm" <no_feed@korcot.info>
To: "Kuntal" <raja_kuntal_majumder@yahoo.com>
Subject: Key6gg6 ?
MIME-Version: 1.0
Content-Type: text/html
Content-Length: 287 
```

我在 DNS(godaddy.com) 中的 TXT 记录：

@>>>>`v=spf1 a mx mx:smtp.korcot.info ip4:103.18.168.250 ~all`

mail._domainkey >>>>`k=rsa; t=y; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCjKsxH3Hb8UrNZ+Aar7GfJ30dcbS19i+89JA8SSlDEhsFfTAR9UZIolxKtD3HgPzhWGfcoLkQg28NS/Y3tT/WTvfXxryDyFRIbKJox6VbVmmvSmATsik1l2YQSkTTpeHX6nzxgzRwDVvmLfZBZBbO3n+y0YNTucOUsfNFYCL/UAwIDAQAB`

_domainkey >>>>`t=y; o=~;`

我真的不知道为什么 Gmail 和 Yahoo 显示**"dkim=hardfail (test mode) header.i=@"**和**"dkim=permerror (bad sig)"**，两个标题都应该是**"dkim=pass (ok)"**。 .

所以请给我建议。

请告诉我我该怎么做才能解决这个问题..

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:11:51.470

您没有提到您是使用标准库来计算 DKIM 签名，还是自己完成了。如果您还没有，我强烈推荐[OpenDKIM作为一个很好的库来使用。](http://opendkim.org/)

另一个测试的地方是通过 sa-test@sendmail.net 向邮件反射器发送消息。它可能会为您提供更多诊断信息。

您应该检查在您最初发送的内容和收到的内容之间签名的标头字段（From、To、Subject、Mime-Version 和 Content-Type）。一些邮件程序“有用”地重写了这些标头字段，在此过程中破坏了签名。例如，它可以签署 no_feed@smtp.korcot.info 并随后将其更改为 no_feed@korcot.info。

# python - UnicodeDecodeError: 'ascii' codec can't decode byte ... Python 2.7 和

> ID：15646407
> 
> 赞同：0
> 
> 时间：2013-03-26T20:07:27.797
> 
> 标签：python, unicode

我正在阅读一个包含来自许多不同国家/地区的 unicode 字符的文本文件。文件中的数据也是 JSON 格式。

我正在使用 CentOS 机器。当我在终端中打开文件时，unicode 字符显示得很好（所以我的终端配置为 unicode）。

当我在 Eclipse 中测试我的代码时，它工作正常。当我在终端中运行我的代码时，它会抛出一个错误：UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 17: ordinal not in range(128)

```
for line in open("data-01083"):
    try:
        tmp = line
        if tmp == "":
            break
        theData = json.loads(tmp[41:]) 

        for loc in theData["locList"]:
            outLine = tmp[:40] 
            outLine = outLine + delim + theData["names"][0]["name"]
            outLine = outLine + delim + str(theData.get("Flagvalue"))
            outLine = outLine + delim + str(loc.get("myType"))
            flatAdd = ""
            srcAddr = loc.get("Address")
            if srcAddr != None:
                flatAdd = delim + str(srcAddr.get("houseNumber"))
                flatAdd = flatAdd + delim + str(srcAddr.get("streetName"))
                flatAdd = flatAdd + delim + str(srcAddr.get("postalCode"))
                flatAdd = flatAdd + delim + str(srcAddr.get("CountryCode"))
            else:
                 flatAdd = delim + "None" + delim + "None" + delim +"None" + delim +"None" + delim +"None"

            outLine = outLine + FlatAdd

            sys.stdout.write(("%s\n" % (outLine)).encode('utf-8'))
    except:
        sys.stdout.write("Error Processing record\n") 
```

所以一切正常，直到它到达 StreetName，它与 UnicodeDecodeError 一起崩溃，这是非 ascii 字符开始出现的地方。

我可以通过添加 .encode('utf-8') 来修复该实例：

```
 flatAdd = flatAdd + delim + str(srcAddr.get("streetName").encode('utf-8')) 
```

但随后它在下一行出现 UnicodeDecodeError 崩溃：

```
outLine = outLine + FlatAdd 
```

一个月来，我一直在纠结这些类型的问题。任何反馈将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:37:18.277

Robᵩ ( [http://nedbatchelder.com/text/unipain.html](http://nedbatchelder.com/text/unipain.html) ) 的介绍真的帮助我理解了 unicode。强烈推荐给任何有 unicode 问题的人。

我的外卖：

*   将所有内容转换为 unicode，然后将其摄取到您的应用程序中。
*   在您的代码中仅使用 unicode 字符串
*   从应用程序输出数据时指定编码。

对我来说，我正在从标准输入和一个文件读取并输出到标准输出：

对于标准输入：

```
inData = codecs.getreader('utf-8')(sys.stdin) 
```

对于一个文件：

```
inData = codecs.open("myFile","r","utf-8") 
```

对于标准输出（在向标准输出写入任何内容之前执行一次）：

```
sys.stdout = codecs.getwriter('utf-8')(sys.stdout) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:11:58.603

这可能会解决您的问题。我说可能是因为编码有时会发生奇怪的事情；）

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

text_file_utf8 = text_file.encode('utf8') 
```

从这一点开始，您应该摆脱这些消息。如果不是这样，请就您拥有的文件类型和语言提供反馈。也许一些文件头数据。

`text_file.decode("ISO-8859-1")`也可能是一个解决方案。

如果一切都失败了，看看`codecs()`这里；[http://docs.python.org/2/library/codecs.html](http://docs.python.org/2/library/codecs.html)

```
with codecs.open('your_file.extension', 'r', 'utf8') as indexKey:
    pass
    # Your code here 
```

# java - Richfaces 3.3 extendedDataTable onRowClick 是从前一行点击设置数据

> ID：15646409
> 
> 赞同：0
> 
> 时间：2013-03-26T20:07:38.703
> 
> 标签：java, jsf, richfaces, jsf-1.2

我有这个带有 a4j:support 标签的数据表，所以当有人点击一行时，我想根据所选行的状态显示或隐藏某些按钮。

问题是我的支持 bean 中的数据总是一键落后。

```
<rich:extendedDataTable
    id="formSummaryTableId"
    var="dataSummary"
    value="#{FormSearch.summaries}"
    binding="#{FormBacking.table}"
    selection="#{FormSearch.selection}"
    rowKeyVar="rkv"
    frozenColCount="0"
    sortMode="single" height="500px" width="795px"
    cellpadding="0" cellspacing="0" border="0" rowClasses="even, odd"
    selectedClass="itemSelected">

    <a4j:support event="onRowClick" actionListener="#{FormBacking.onClickForm}"
        reRender="DesignerForm:formEditToolbar" />
.... 
```

FormBacking.onClickForm

```
public void onClickForm(ActionEvent e) 
{
    Iterator<Object> selectionKeys = getFormSearch().getSelection().getKeys();
    LOG.info("selectionKeys = "+selectionKeys.hasNext());
    if (selectionKeys.hasNext())
    {
        LOG.info("selectionKeys.next()");
        Integer lookupKey = (Integer) selectionKeys.next();
        LOG.info("lookupKey = "+lookupKey);
    } else {
        LOG.info("THERE is no keys");
    }
} 
```

**编辑**

我发现由于某种原因，当我单击一行时，它的设置不正确。就好像它比我的点击慢了 1 步。例如，如果我单击数据表的第 1 行，我的方法将进入“没有键”，但如果我现在单击第 2 行，我的方法将具有我单击的第一行的键。

为什么会落后 1 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:04:36.277

使用`onselectionchange`事件：

```
<a4j:support event="onselectionchange" ... 
```

我想问题`onRowClick`在于它在选择更改发生之前被触发，因此它提交先前的选择值。

# ruby - 如何使用 ruby gem 'rodf' 添加电子表格列？

> ID：15646410
> 
> 赞同：1
> 
> 时间：2013-03-26T20:07:42.637
> 
> 标签：ruby, rubygems, openoffice.org, openoffice-calc, rodf

我正在尝试将单列开放式办公室电子表格作为 ruby​​ 脚本的输入，并在其旁边的列中为该列中的每个单元格写入结果。所以，为了说明：

输入：

```
 A
--------
1| XXX |
--------
2| YYY | 
```

输出：

```
 A |  B
-------------------
1| XXX | result1  |
-------------------
2| YYY | result 2 | 
```

我正在尝试使用 rodf ruby​​gem 来完成此操作，但我不知道如何创建新列。

```
 ss.table 'My first table from Ruby' do
   row { cell 'Hello, rODF world!' }
   row { cell 'next?'
 end 
```

会写“下一个？” 到第一个下面的单元格（即A2）。

当我尝试这个时，我得到了一个例外：

```
ss.table 'My first table from Ruby' do
   row { cell 'Hello, rODF world!' }
   column { row { cell 'wtf?' } }
end
NoMethodError: undefined method `row' for #<ODF::Column:0x00000000f4c2c0 @elem_attrs={}>
from (irb):35:in `block (2 levels) in irb_binding'
from (eval):4:in `instance_eval'
from (eval):4:in `column'
from (irb):35:in `block in irb_binding'
from (eval):4:in `instance_eval'
from (eval):4:in `table'
from (irb):33
from /usr/bin/irb:12:in `<main>' 
```

如何访问 B 列中的单元格？

文档不清楚，我无法从源代码中判断 column.rb 是否真的在做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:25:49.723

所以它实际上是这样的：

```
ss.table 'My first table from Ruby' do
  row do
    cell 'This goes into A1'
    cell 'This goes into B1'
    cell 'This goes into C1'
    cell 'And on, and on, and on...'
  end
  row do # this starts a new row
    cell 'This goes into A2'
    cell 'This goes into B2'
    cell 'Got it? ;-)'
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:45:29.880

总猜测在这里：

```
ss.table 'My first table from Ruby' do
   row { cell 'Hello, rODF world!', 'next?' }
end 
```

# c# - 每个团队成员和分支的不同 *.csproj / *.config 设置

> ID：15646415
> 
> 赞同：12
> 
> 时间：2013-03-26T20:07:48.797
> 
> 标签：c#, .net, version-control, visual-studio-2012, csproj

这个问题是二合一的，但两者都与同一个问题有关。

我们是一个由 10 名开发人员组成的团队，一些开发人员更喜欢使用 IIS 的完整实例，而另一些开发人员更喜欢使用 IIS-Express。使用其中任何一种都有优点，例如，IIS 最接近生产环境，而 IIS-Express 允许编辑并继续调试。

除了 10 个开发人员工作团队外，我们还使用源代码控制，并且我们有一个分支结构。每个分支可能有不同的 web.config / app.config 设置，例如数据库连接字符串。开发人员一次可能在多个分支上工作，因此我们通常每个分支有一个数据库，我们正在研究具有本地数据库的开发人员，但是无论采用哪种方法，命名冲突仍然是一个问题（即开发人员可能有 2本地数据库，每个分支一个）。

第一个问题是带有 csproj 文件的问题，特别是 Web 服务器设置。如果一个开发人员签入使用 IIS-Express 的 csproj 文件，而另一个开发人员执行*Get Latest*，它将覆盖他们的配置，浪费时间并造成挫败感。

当然，最简单的解决方案是强制每个人使用一种工具、一种配置，但我宁愿不这样做，特别是对于与结果输出（编译代码）无关的东西。

第二个问题是配置文件，配置文件存储在源代码管理中（就像任何其他文件一样），所以当我们进行分支合并时，这些文件必须在之后手动更新。我知道配置文件有调试和发布转换，我们可以在两者中使用不同的连接字符串，但这并不能解决两个单独的开发人员可能在同一个分支上工作但使用不同的连接字符串的问题。

显而易见的解决方案是每个人都始终拥有完全相同的设置，但一些开发人员可能想要使用 LocalDB 实例，其他人可能想要使用 SQL-Express，而临时服务器使用完整的 SQLServer 实例。同样，这是另一个与最终结果无关的设置。

在管理团队成员之间以及分支/合并之间的配置方面，我还没有看到任何解决我的特定问题的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T20:19:42.670

专门针对 Web 服务器，VS 有一个“将服务器设置应用于所有用户（存储在项目文件中）”复选框 - 如果未选中，则设置存储在本地 .csproj.user 文件中，因此每个人都可以在那里进行自己的设置.

对于连接字符串，您可以在每台机器上拥有一个“user.config”文件（不在源代码管理中），开发人员可以将他们的连接字符串放入其中。主配置文件可以加载此文件以获取连接字符串。有几种方法可以做到这一点，但我已经尝试过：

```
App.config or Web.config:
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings configSource="user.config"></connectionStrings>
</configuration>

user.config:
<connectionStrings>
  <add name="test" connectionString="Server=.;Database=...;"/>
</connectionStrings> 
```

如果它是 Windows 应用程序，您需要在 user.config 文件上设置“复制到输出目录”属性，以便 Visual Studio 将其复制到您的 bin 目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:19:18.010

如果我正确理解您的问题，您基本上希望将您的 app.config / web.config / 某些其他文件排除在检入之外？出于某种原因，这似乎是一个隐藏的选项......

我们最终通过在解决方案资源管理器中选择 .config 文件并单击 (Visual Studio) `File`-> `Source Control`->找到了类似问题的答案`Exclude selection from Source Control`。

这将防止选中的文件被签入并覆盖其他开发人员的文件。

（注意：这在 VS2010 中有效，我不能保证这个选项在 2012 年存在）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T15:10:13.553

我有一个类似的问题，我有 3 个数据库用于 3 个环境的 3 个分支。

生产服务器 ==> 生产数据库 ==> 产品分支 ==> 产品连接字符串 测试服务器 ==> 主数据库 ==> 主分支 ==> 主连接字符串本地开发 ==> 本地数据库 ==> 开发人员分支 == > 开发者连接字符串 ...

在 .git 文件夹中，有 git 挂钩，您可以在其中放置脚本以在您签出分支时执行。我有结帐后脚本，它每次结帐时都会自行执行，并为我更新连接字符串，这样我就不用手动更改 web.config 文件：

# !/bin/bash

. 配置评估 $(git 分支 | grep " *" | sed "s/* //")

sed -es/{SERVER}/$server/g -es/{DATABASE}/$database/g -es/{USER}/$user/g -es/{PASS}/$pass/g -es/{SITE_TYPE }/$site_type/g \

# php - codeigniter 项目数据库升级脚本

> ID：15646419
> 
> 赞同：1
> 
> 时间：2013-03-26T20:08:03.790
> 
> 标签：php, database, codeigniter

我正在寻找想法来正确处理跨环境的项目的 mysql 表更新。我看过这`CI DB Forge`门课，我相信这*可能会对*我有所帮助。我的想法是：

1.  为每个数据库安装、表升级或更改创建一个新文件。该文件将包含执行每个相关任务的原始 mysql 查询
2.  在加载任何控制器之前通过钩子运行升级脚本
3.  继续加载项目

这是正确的想法吗？这与 Magento 处理每个扩展的数据库升级的方式非常相似。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T20:46:46.557

听起来您正在寻找[Migrations 课程](http://www.codeigniter.com/user_guide/libraries/migration.html)。这是一个相当新的库，我认为目前的文档不太好。

如果您启用此库`application/config/migrations.php`并加载它，它将创建一个名为`migrations`. 那里的工作流程如下：

1.  在`application/migrations`确保您使用按顺序编号的文件名（如`001_some_descriptive_name.php`. 格式很重要，**正好是 3 个数字**，并且在它们之后至少有一个`_`。
2.  在新文件中创建一个以文件名命名的类，因此`001_some_descriptive_name.php`应该保存一个名为`Migration_Some_descriptive_name`并扩展该类的`CI_Migration`类。类名大小写很重要，首先是**一个大写**`Migration_`字母，然后是小写。
***   在类中创建公共`up`和公共`down`方法*   在 up 方法中添加您的迁移代码，这会更改数据库。您可以使用 db forge 库或只是普通的旧`$this->db->query()`调用。如果您需要支持多个数据库系统，那么 Dbforge 更便携，使用它可能会更好。*   在`down`方法内添加将反转`up`. 如果`up`添加列，`down`则应删除该列，如果`up`创建表，`down`则应删除该表，依此类推。*   完成迁移课程后，请`migration_version`在迁移配置文件中进行碰撞。*   创建一个控制器加载迁移库并调用`$this->migration->current()`它将检查`migration`数据库表中的版本并运行迁移类`up`或`down`方法，以达到您在步骤 6 中设置的配置文件中的迁移版本。例如，如果数据库说您是版本 2，并且配置说你应该在 5，然后它将按顺序运行带有, ,文件名`up`的迁移方法。如果您设置较低的数字，则将调用当前的方法。数据库从 0 开始计数，所以不要创建文件。`003_...``004_...``005_..``down``000_...`**

 **如果您喜欢冒险，您可以创建一个加载迁移类并`get_instance()->migration->latest()`在每个页面加载时运行的钩子，这样一旦您部署新的迁移类，每个环境都会自动更新数据库。**

# mysql - MySQL - 比较表后更新两个表中的列

> ID：15646420
> 
> 赞同：0
> 
> 时间：2013-03-26T20:08:07.457
> 
> 标签：mysql

我绝不是 MySQL 专家。也就是说，我遇到了跨表匹配和数据更新的问题。相信我，在发布之前我确实搜索了很长时间，但是我发现的每个解决方案都提到加入表格，当我尝试时，我的查询一直冻结。

下面的查询选择了我想要操作的所有数据：

```
SELECT t1.1, t2.1, t1.2, t2.2, t1.3, t2.3, t1.4, t2.4
FROM t1, t2
WHERE 
t1.1='1111111' &&
t1.1 = t2.1 &&
t1.2 = t2.2 &&
t1.3 = t2.3 &&
t1.4 = t2.4 &&
; 
```

这似乎工作正常，并向我展示了我想看到的内容。但是，接下来我想根据上面找到的结果更新来自 t1 的附加列和来自 t2 的列，这就是我遇到的问题。

我可以将其转换为使用类似 WHERE 部分的某种更新查询，但也可以更新来自 t1 和 t2 的列（附加列，例如 t1.5 和 t2.5）？

*请注意，这些表的列并不完全相同，但上述所有列在 WHERE 中重叠*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:49:23.070

你可以做类似的事情

```
UPDATE t1
SET ...
WHERE id IN (
  SELECT a.id
  FROM t1 a, t2 b
  WHERE
    a.1 = '1111111' AND
    a.1 = b.1 AND
    a.2 = b.2 AND
    a.3 = b.3 AND
    a.4 = b.4 AND
) 
```

UPDATE 查询将使用一个大且 JOINy 的子查询来干净整洁。

我不知道你的`SET`部分会是什么样子，所以我不知道这是否会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:59:25.390

事实证明，我尝试过的所有事情可能都可以正常工作。但是，我使用的数据库/表从未被索引过。我的查询似乎挂起，但实际上可能需要很长时间才能完成。

其次，一个表中的一些值被设置为 varchar 而不是 int。在我们解决这个问题之前，即使是索引也无助于这些比较。

在上述更新之后，我能够使用以下查询来完成这项工作，现在只需几分之一秒：

```
UPDATE t1, t2
SET t1.5="x", t2.5="x"
FROM t1, t2
WHERE 
t1.1='1111111' &&
t1.1 = t2.1 &&
t1.2 = t2.2 &&
t1.3 = t2.3 &&
t1.4 = t2.4 &&
; 
```

# css - div背景上的多种背景颜色

> ID：15646423
> 
> 赞同：2
> 
> 时间：2013-03-26T20:08:25.220
> 
> 标签：css

嘿，我正在努力用 CSS 创建多色背景。我试过`gradient`了，但它会产生我不想要的阴影。我想用 CSS 创建这个：

![我想用 CSS 创建的示例](../Images/d65ccaefda2af8fbf2a3603b87b880b3.png)

有谁知道如何在没有我使用时得到的阴影的情况下创建它`gradient`。

这是我的html代码。

```
<div id="head">
        <h1>Mira's place</h1><br>
        <h2><span id="quote">Mira is creating huge game named Rock Paper!</span></h2>
        <ul>
            <li>Home</li>
            <li>Games</li>
            <li>Applications</li>
            <li>Contact</li>
        </ul>    
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:18:29.717

使用渐变再试一次，但使用以下代码：

```
#head /* or body */
{
        -webkit-background-size: 40px 40px;
        -moz-background-size: 40px 40px;
        background-size: 40px 40px;         
        background-image: -webkit-gradient(linear, left top, right bottom,
                                color-stop(.25, rgba(255, 255, 255, .05)), color-stop(.25, transparent),
                                color-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .05)),
                                color-stop(.75, rgba(255, 255, 255, .05)), color-stop(.75, transparent),
                                to(transparent));
        background-image: -webkit-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%,
                            transparent 75%, transparent);
        background-image: -moz-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%,
                            transparent 75%, transparent);
        background-image: -ms-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%,
                            transparent 75%, transparent);
        background-image: -o-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%,
                            transparent 75%, transparent);
        background-image: linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%,
                            transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%,
                            transparent 75%, transparent);

         -moz-box-shadow: inset 0 -1px 0 rgba(255,255,255,.4);
         -webkit-box-shadow: inset 0 -1px 0 rgba(255,255,255,.4);       
         box-shadow: inset 0 -1px 0 rgba(255,255,255,.4);
         width: 100%;
         border: 1px solid;
         color: #fff;
         padding: 15px;
         position: fixed;
         _position: absolute;
         text-shadow: 0 1px 0 rgba(0,0,0,.5);
} 
```

顺便说一句：我从 www.red-team-design.com 获得此代码。这是[链接](http://www.red-team-design.com/cool-notification-messages-with-css3-jquery)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:18:13.110

不知道，你说的阴影是什么意思。以下内容看起来不像您想要的吗？（可能需要一些修改，但它显示了要走的路）

```
background: linear-gradient(135deg, #ffffff 0%,#ffffff 25%,#0011ff 25%,#0011ff 35%,#ffffff 35%,#ffffff 65%,#ff0000 65%,#ff0000 75%,#ffffff 75%,#ffffff 100%); 
```

这是[小提琴](http://jsfiddle.net/tg8AM/2/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:17:32.057

```
.element{
    border-bottom: 25px solid #2C58DF;
    border-top: 25px solid #D71E26;
    height: 25px;
    width: 150px;
    -webkit-transform-origin: top left;
    -webkit-transform: translateX(165px) translateY(55px) rotate(135deg);
    -moz-transform-origin: top left;
    -moz-transform: translateX(165px) translateY(55px) rotate(135deg);
    transform: translateX(165px) translateY(55px) rotate(135deg);
    transform-origin: left top 0;
} 
```

[http://jsfiddle.net/etW25/](http://jsfiddle.net/etW25/)

# c# - 绘制正方形时缺少角

> ID：15646428
> 
> 赞同：0
> 
> 时间：2013-03-26T20:08:51.167
> 
> 标签：c#, drawing

我只是不知道为什么我在画画时没有得到一个完美的正方形。我有这些`PointF's`：

*   [0] = {X = 1.80000067 Y = 101.8}
*   [1] = {X = 1.80000067 Y = 103.6}
*   [2] = {X = 101.8 Y = 103.6}
*   [3] = {X = 101.8 Y = 101.8}

我正在使用这段代码来绘制：

```
Bitmap pic = new Bitmap(1000, 1000);
Graphis g = Graphics.FromImage(pic);

g.DrawPolygon(Pens.Black,pointsUpThere); 
```

我正在使用`DrawPolygon()`，因为这些并不总是正方形的角落。它可以是更复杂的形状。

所以，在这个例子中，我得到的不是正方形，而是： [![](../Images/9bc32e01fde7fb991320d6540cfcc720.png)](https://i.stack.imgur.com/LdZcG.png)

没看懂，问题出在哪里？

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:43:13.170

嗯，点之间的 X 差是 100（百）。Y 差为 1.8。

听起来像一个长长的矩形。

# javascript - 如何使用 Javascript 将类添加到 div 的内部 HTML？

> ID：15646432
> 
> 赞同：2
> 
> 时间：2013-03-26T20:09:07.287
> 
> 标签：javascript, jquery, wordpress, innerhtml, addclass

我正在尝试解决 Wordpress 看似不可能的自定义。这是`<?php the_category();?>`打印出来的内容：

```
<ul class="post-categories" >
 <li>
  <a rel="category-tag" title="..." href="...">Category One</a>
 </li>
 <li>
  etc.
 </li>
</ul> 
```

我需要在所有的中添加/插入一个类`<a>`，使其看起来像这样：

```
<ul class="post-categories" >
 <li>
  <a class="btn" rel="category-tag" title="..." href="...">Category One</a>
 </li>
 <li>
  etc.
 </li>
</ul> 
```

到目前为止，我只找到了将附加类分配给具有现有 ID 或类的元素的方法。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:12:20.240

使用 jQuery：

```
$(".post-categories a").addClass("btn"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T20:10:58.733

由于标题说**使用 JavaScript**

试试这个 JavaScript 解决方案：

```
var links = document.getElementsByTagName("a");

for (var i = 0; i < links.length; i++)
{
    if (links[i].parentNode.className == "post-categories")
    {
        links[i].className = "btn";
    }
} 
```

或者，如果您对孩子不满意并且可以使用 jQuery，您可以这样做：

```
$(".post-categories > a").addClass("btn"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:13:08.200

使用 jQuery

```
$(function() {
$(".post-categories a").addClass("btn");
}) 
```

# ios - 使用 CMMotionManager 测量倾斜角度

> ID：15646433
> 
> 赞同：38
> 
> 时间：2013-03-26T20:09:14.777
> 
> 标签：ios, cmmotionmanager

假设您将 iphone/ipad 垂直放在您的面前，屏幕朝向您，纵向放置。您将设备倾斜到一侧，使屏幕始终面向您。您如何使用 CMMotionManager 测量静态倾斜角？这似乎是一个简单的问题，应该有一个简单的答案，但我找不到任何不会消失在四元数和旋转矩阵中的方法。

谁能指出我一个可行的例子？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-26T20:51:05.830

看`gravity`：

```
self.deviceQueue = [[NSOperationQueue alloc] init];
self.motionManager = [[CMMotionManager alloc] init];
self.motionManager.deviceMotionUpdateInterval = 5.0 / 60.0;

// UIDevice *device = [UIDevice currentDevice];

[self.motionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXArbitraryZVertical
                                                        toQueue:self.deviceQueue
                                                    withHandler:^(CMDeviceMotion *motion, NSError *error)
{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        CGFloat x = motion.gravity.x;
        CGFloat y = motion.gravity.y;
        CGFloat z = motion.gravity.z;
    }];
}]; 
```

使用此参考系 ( `CMAttitudeReferenceFrameXArbitraryZVertical`)，如果`z`接近于零，则您将其保持在与地面垂直的平面上（例如，就好像您将其靠在墙上一样）并且当您在该平面上旋转它时，`x`值`y`会发生变化。垂直是`x`接近零且`y`接近 -1 的位置。

* * *

看这篇[文章](http://www.opengl.org/discussion_boards/showthread.php/159883-converting-a-3D-vector-into-three-euler-angles#post1136474)，我注意到如果你想把这个向量转换成角度，你可以使用以下算法。

如果要计算设备从垂直方向旋转多少度（其中正为顺时针，负为逆时针），您可以将其计算为：

```
// how much is it rotated around the z axis

CGFloat angle = atan2(y, x) + M_PI_2;           // in radians
CGFloat angleDegrees = angle * 180.0f / M_PI;   // in degrees 
```

您可以使用它来计算通过 Quartz 2D`transform`属性旋转视图的程度：

```
self.view.layer.transform = CATransform3DRotate(CATransform3DIdentity, -rotateRadians, 0, 0, 1); 
```

`startDeviceMotionUpdates`（就个人而言，我在方法中更新旋转角度，并`transform`在 a中更新它`CADisplayLink`，这将屏幕更新与角度更新分离。）

您可以通过以下方式查看您向后/向前倾斜了多远：

```
// how far it it tilted forward and backward

CGFloat r = sqrtf(x*x + y*y + z*z);
CGFloat tiltForwardBackward = acosf(z/r) * 180.0f / M_PI - 90.0f; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-17T10:14:21.430

这是一个迟到的答案，但您可以[在 github](https://github.com/dulaccc/DPMeterView)和随附的[博客文章上找到一个工作示例。](http://www.dulaccc.me/2013/03/computing-the-ios-device-tilt.html)

总结上面提到的文章，你可以使用四元数来避免你在垂直握住 iPhone 时可能面临的[云台锁定问题。](http://en.wikipedia.org/wiki/Gimbal_lock)

这是计算倾斜（或偏航）的编码部分：

```
CMQuaternion quat = self.motionManager.deviceMotion.attitude.quaternion;
double yaw = asin(2*(quat.x*quat.z - quat.w*quat.y));

// use the yaw value
// ... 
```

你甚至可以添加一个简单的[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)来缓解偏航：

```
CMQuaternion quat = self.motionManager.deviceMotion.attitude.quaternion;
double yaw = asin(2*(quat.x*quat.z - quat.w*quat.y));

if (self.motionLastYaw == 0) {
    self.motionLastYaw = yaw;
}

// kalman filtering
static float q = 0.1;   // process noise
static float r = 0.1;   // sensor noise
static float p = 0.1;   // estimated error
static float k = 0.5;   // kalman filter gain

float x = self.motionLastYaw;
p = p + q;
k = p / (p + r);
x = x + k*(yaw - x);
p = (1 - k)*p;
self.motionLastYaw = x;

// use the x value as the "updated and smooth" yaw
// ... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-27T03:15:20.280

这是一个旋转 UIView`self.horizon`以在您倾斜设备时使其与地平线保持水平的示例。

```
- (void)startDeviceMotionUpdates 
{
    CMMotionManager* coreMotionManager = [[CMMotionManager alloc] init];
    NSOperationQueue* motionQueue = [[NSOperationQueue alloc] init]
    CGFloat updateInterval = 1/60.0;
    CMAttitudeReferenceFrame frame = CMAttitudeReferenceFrameXArbitraryCorrectedZVertical;
    [coreMotionManager setDeviceMotionUpdateInterval:updateInterval];
    [coreMotionManager startDeviceMotionUpdatesUsingReferenceFrame:frame
                            toQueue:motionQueue
                            withHandler:
     ^(CMDeviceMotion* motion, NSError* error){
         CGFloat angle =  atan2( motion.gravity.x, motion.gravity.y );
         CGAffineTransform transform = CGAffineTransformMakeRotation(angle);
         self.horizon.transform = transform;
     }];
} 
```

这有点过于简单了——您应该确保在您的应用程序中只有一个 CMMotionManager 实例，因此您希望预先初始化它并通过属性访问它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-14T17:39:15.570

由于 iOS8 CoreMotion 还返回一个`CMAttitude`对象，其中包含`pitch`,`roll`和`yaw`属性，以及四元数。使用它意味着您不必进行手动数学运算即可将加速度转换为方向。

# wpf - 转换 DataTable 中的数值以进行编辑而不标记为已修改

> ID：15646438
> 
> 赞同：0
> 
> 时间：2013-03-26T20:09:36.510
> 
> 标签：wpf, xaml, wpfdatagrid

我有一个 sql 表，我读入了`DataTable`. 其中一列是小数比例，但我希望将值显示为用户编辑的百分比（*即*乘以 100）。有没有一种简单的方法可以在`DataGrid`（或其他地方？）中执行此翻译，这样我就不必遍历每条记录以乘以 100、显示，然后在最后全部除以 100？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:17:52.090

不确定这是否适合您，但您可以尝试设置`StringFormat`- 就像在这个...

```
<TextBox Text="{Binding Path=Percentage, StringFormat={}{0:P2}}"/> 
```

[百分比值的格式小数？](https://stackoverflow.com/questions/1790975/format-decimal-for-percentage-values)
[http://msdn.microsoft.com/en-us/library/dwhawy9k(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k(v=vs.100).aspx)

注意：这个实际上有效:) - 例如，它将转换`0.8555`为`85.55%`（随意添加百分比）

**编辑：**
实际上，对于两种方式的编辑 - 你需要一个转换器。

你可以在这里使用这个[WPF 中的两种百分比格式绑定](https://stackoverflow.com/questions/4968478/two-way-percentage-formatted-binding-in-wpf/4968527#4968527)

# c# - 将连接字符串传递给 activeX 时出错

> ID：15646439
> 
> 赞同：1
> 
> 时间：2013-03-26T20:09:38.373
> 
> 标签：c#, asp.net, activex

我在我的 Web 应用程序的一个页面中使用 ActiveX，它在我的 PC 中正常工作，我正在从包含 activex 的网页传递连接字符串，如下所示：

这是页面中将连接字符串传递给 activex 的 javascript 代码：

```
 <script language="javascript" type="text/javascript">
  function Connect() {
      var doc = document.forms[0];

      var PrinterControl = document.applets('PrinterObject1');
      PrinterControl.UserText = document.form1.hdnConString.value + ',' + document.form1.hdnCategory.value + ',' + document.form1.hdnLoginID.value + ',' + document.form1.hdnPassword.value + ',' + document.form1.hdnCategoryType.value;

  }          
  </script> 
```

. . . .

在 activeX 代码中，我收到连接字符串和其他值，如下所示：

```
 public String UserText
    {
        get 
        { 
            return conString; 
        }
        set
        {
             conString = value;

             string[] arrID = conString.Split(',');
             conStr = Convert.ToString(arrID[0]);
             category = Convert.ToString(arrID[1]);
             loginID = Convert.ToString(arrID[2]);
             password = Convert.ToString(arrID[3]);
             categoryType = Convert.ToString(arrID[4]);
        }
    } 
```

一切都在我的电脑上正常工作，但是当我在客户的服务器上安装这个应用程序时，使用 activex 生成错误的页面虽然它在我的电脑上工作并且我通过网络在我公司的其他电脑上测试它仍然工作正常，客户使用 Windows2008 和 sql server 2012。

以下是使用activex的页面在尝试加载activex时产生的错误信息：

***建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 = 无法打开与 SQL Server 的连接）***

请帮忙

谢谢

# asp.net-mvc - Visual Studio 未将 html / javascript 更新到服务器 / 浏览器

> ID：15646447
> 
> 赞同：28
> 
> 时间：2013-03-26T20:10:06.323
> 
> 标签：asp.net-mvc, visual-studio, asp.net-mvc-4, single-page-application

这是一个使用 Hot Towel SPA 模板的 MVC 4 应用程序。每当我更改 HTML 和/或 javascript 中的任何内容时，我可以让新代码显示的唯一方法是清除浏览器缓存。F5，cntrl-F5，shift-F5，没有任何效果。

我通常不是网络开发人员，只是学习这个。我以前做过常规的 MVC 并且没有遇到这个问题，也许它与我的项目中 HTML 和 javascript 的位置（即 /App 文件夹中）有关？我要疯了，试图弄清楚这一点。

我可以完全删除一个 HTML 文件并运行该应用程序，它仍然可以正常运行。清除缓存并运行，然后我得到更新。

它使用 IIS express 使用 Firefox、Chrome、IE 运行...

谢谢..

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-07-01T04:01:14.507

在 Opera 和 Chrome（可能还有其他）中，您可以在“开发模式”下禁用缓存。

在 DevTools 中，设置菜单中的第二个选项是

> 禁用缓存（在 DevTools 打开时）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-26T20:17:08.433

转到您的 web.config 文件并在其中进行更改。无论您进行什么更改。例如键入一个字符然后删除它并构建项目并再次运行它。我希望它可以工作。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-02-22T19:58:34.187

我也遇到了这个问题，结果发现它与缓存有关。

如果使用**Chrome DevTools**，您可以通过导航到`Network`选项卡并勾选来简单地禁用缓存`Disable Cache`

这只会在开发工具打开时禁用缓存。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-16T08:50:19.800

ctrl+shift+F5 可以解决问题！似乎浏览器缓存是问题的一部分:)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-01-21T09:23:40.683

在我的情况下，iis express 没有更新站点，但是由 iis Manager 创建的站点工作正常吗？

此问题的可能解决方案是在位于选项-> 项目和解决方案-> Web 项目的 Visual Studio 中设置“使用此 64 位版本的 iis express 用于网站和项目”选项

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-26T23:31:40.257

浏览器默认缓存。您可以在浏览器中关闭缓存以获取更改的文件。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-08-26T13:03:02.003

我发现我在**Chrome Developer Tools -> Sources View**中打开了 .js 文件。

当我**在那里关闭文件**并**刷新页面**时，新的 .js 文件按预期显示。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-26T23:46:10.243

我在服务器上移动 .ts 和 .html 文件时遇到问题，必须：

1.  停止调试
2.  清除我的 ClientApp 中的整个 output/dist 文件夹
3.  再次开始调试
4.  Ctrl-F5 强制缓存在浏览器上刷新

简单地禁用浏览器的缓存，或强制 .net 应用程序重新编译，甚至运行 ng serve 都没有效果。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-06-05T06:47:12.393

上面列出的方法都不能始终如一地工作，如果认为任务窗格中使用了不同的浏览器，具体取决于所使用的 Windows 版本/构建，那么您可能必须在每种情况下清除不同浏览器的缓存。

但是，似乎真正的问题不在于浏览器缓存，而在于 VS 决定将哪些文件部署到用于测试/开发的本地 IIS Express 服务器。在许多情况下，当按下“开始”按钮时，即使您还修改了 web.config 文件，修改后的 html 和/或 js 文件也不会进入本地部署。

我始终如一地完成这项工作的方式是选择 Web 应用程序项目（在解决方案资源管理器中），打开属性，单击“打包/发布 Web”选项卡，然后在“要部署的项目”下选择“此项目中的所有文件”。

对我来说很好！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-19T21:28:23.467

如果你只是想在本地测试你可以试试

A）创建虚拟目录遵循以下路径：项目/属性/网络
查找服务器部分单击创建虚拟目录

B）遵循以下路径： Project / Properties / Web
Find Servers 部分单击下拉并在 Express 和 Local 之间更改所选值，然后创建虚拟目录

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-28T06:09:11.563

如果禁用缓存和编辑 web.config 文件不起作用。

只需关闭解决方案并重新打开它并尝试。奇怪，但它对我有用。

# eclipse - Mac eclipse 将工作区设置为 dropxbox 导致启动崩溃

> ID：15646448
> 
> 赞同：0
> 
> 时间：2013-03-26T20:10:07.387
> 
> 标签：eclipse, macos, crash, dropbox, startup

Eclipse 工作正常，直到我决定将工作区切换到我的保管箱文件夹。之后，尝试启动 eclipse 会弹出 logo 启动屏幕，随后会出现崩溃，提示“发生错误”，并带有要引用的日志文件。我很确定只有在使用 Dropbox 作为工作区时才会这样做。通过进入终端并使用 ./eclipse -clean，我设法让 eclipse 再次运行。然后我通过切换到我的桌面并切换回 Dropbox（用于工作区）再次测试了这个问题，只有当我将 Dropbox 作为工作区时 Eclipse 才会启动。任何人都知道这是为什么或如何解决这个问题？谢谢

2008 年初的 Macbook Pro 山狮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:05:56.723

检查 Dropbox 是否没有重命名在 .metadata 文件夹中存在冲突的任何二进制文件。我遇到了这个问题，这就是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:58:30.210

尝试仅将您的项目文件夹而不是整个工作区文件夹放入 Dropbox 文件夹中。也就是说，放置包含 .project 文件的文件夹，而不是包含 .metadata 目录的父文件夹。

（当然，更好的解决方案是使用适当的软件存储库。例如，[Git](http://git-scm.com/)或[Subversion](http://en.wikipedia.org/wiki/Apache_Subversion)。在这种情况下，您不仅可以使用它来备份和共享您的代码，还可以维护您的更改记录。）

# c# - Splicer 库不支持 mp3 格式

> ID：15646449
> 
> 赞同：0
> 
> 时间：2013-03-26T20:10:07.527
> 
> 标签：c#, .net, windows, video, mp3

我正在尝试在 C#.NET 中创建一个简单的应用程序，它可以从图像流和音频文件中生成视频文件。我选择了[Splicer](http://splicer.codeplex.com)，它在我的部分代码中工作得非常好。但是，当我尝试输入 mp3 音频格式时，它显示**错误：指定了无效的媒体类型。** 我扫描了 Splicer 论坛，但没有得到任何有用的信息。任何形式的帮助表示赞赏。这是一个简单的代码：

```
 using (ITimeline timeline = new DefaultTimeline())
        {
            IGroup audioGroup = timeline.AddAudioGroup();
            ITrack rootTrack = audioGroup.AddTrack();
            rootTrack.AddAudio("testinput.mp3");

            using (
                WindowsMediaRenderer renderer =
                    new WindowsMediaRenderer(timeline, "output.avi", WindowsMediaProfiles.LowQualityAudio))
            {
                renderer.Render();
            }
        } 
```

# c++ - STL 优先级队列和指针重载

> ID：15646451
> 
> 赞同：6
> 
> 时间：2013-03-26T20:10:16.363
> 
> 标签：c++, operator-overloading, priority-queue

这是我第一次使用优先队列。我正在尝试为学校实现 Dijkstra 的算法，我想我需要一个最小堆来做到这一点。现在我的节点是指针，我想比较它们的权重，但我不认为我可以用指针重载 > 和 <？有没有办法我可以做到这一点？

代码到此为止：

```
priority_queue<Node*, vector<Node*>, node_comparison> minHeap; 
```

然后我有一个结构来比较节点的权重

```
struct node_comparison 
{
   bool operator<( const Node* a, const Node* b ) const 
   {
    return a->totalWeight < b->totalWeight;
   }
}; 
```

但是它说这个操作符函数的参数太多了。一段时间以来，我一直在试图弄清楚如何用我的节点管理最小堆优先级队列并一直卡住。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T20:13:34.950

如果我正确理解您的问题，我相信您真正想要的是制作`node_comparison`一个*函子*（更具体地说，是一个二元谓词）：

```
struct node_comparison 
{
    bool operator () ( const Node* a, const Node* b ) const 
    {
        return a->totalWeight < b->totalWeight;
    }
}; 
```

仿函数是一个类，其对象提供调用运算符 ( `operator ()`) 的重载，因此可以使用与调用函数相同的语法来调用：

```
Node* p1 = ...;
Node* p2 = ...;
node_comparison comp;
bool res = comp(p1, p2) // <== Invokes your overload of operator () 
```

在内部，`std::priority_queue`将或多或少地实例化您的谓词，就像我在上面的代码片段中所做的那样，并以这种方式调用它来执行其元素之间的比较。

* * *

函子相对于常规函数的优势在于它们可以保存*状态*信息（您可能暂时不需要这些信息，但事实证明这通常是可取的）：

```
#include <cmath>

struct my_comparator
{
    my_comparator(int x) : _x(x) { }

    bool operator () (int n, int m) const
    {
        return abs(n - _x) < abs(m - _x);
    }

    int _x;
}; 
```

例如，上述谓词根据整数与构造时提供的另一个整数的距离来比较整数。这就是它的使用方式：

```
#include <queue>
#include <iostream>

void foo(int pivot)
{
    my_comparator mc(pivot);
    std::priority_queue<int, std::deque<int>, my_comparator> pq(mc);

    pq.push(9);
    pq.push(2);
    pq.push(17);

    while (!pq.empty())
    {
        std::cout << pq.top();
        pq.pop();
    }
}

int main()
{
    foo(7);

    std::cout << std::endl;

    foo(10);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:14:21.510

你需要你的比较函子来实现`bool operator()(....)`，而不是`bool operator<(....)`：

```
struct node_comparison 
{
   bool operator()( const Node* a, const Node* b ) const 
   {
    return a->totalWeight < b->totalWeight;
   }
}; 
```

# java - Java 数字验证

> ID：15646453
> 
> 赞同：3
> 
> 时间：2013-03-26T20:10:17.613
> 
> 标签：java, spring, validation, model-view-controller

我在 int 属性中使用验证：

```
@Digits(integer=6,fraction=0)
private Integer idOrder; 
```

但我希望这个属性正好有 6 位数字。

我怎样才能做到这一点？（使用JSP+Spring+Hibernate）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T21:25:08.893

由于您需要 6 位数字，我认为您应该对属性使用字符串。如果在某些情况下你需要它作为 int，你做一个

```
 public int getIdOrder(){ return Integer.parseInt(idOrder);} 
```

在字符串上，您可以使用模式验证。它会是这样的：

```
@Pattern(regexp="\\d{6}")
private String idOrder; 
```

另一种选择是将 idOrder 保持为 int 并为字符串创建一个 getter：

```
public String getIdOrgetAsString(){
    String s = "000000" + idOrder;
    return s.substring(s.length() - 6);
} 
```

无论如何，有一些选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:27:37.370

你确定你的验证有效吗？

休眠文档说：

> 检查属性是否为最多包含整数位和小数位的数字。[1](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/)

6位数是什么意思？是否支持前导零？或者该数字应该在 100.000 和 999.999 之间。在第一种情况下，我猜你的号码应该是一个字符串（带有@Length），在第二种情况下，我猜你应该使用@Min 和@Max。

# android - Neuroph 图像识别和 Android 错误

> ID：15646455
> 
> 赞同：0
> 
> 时间：2013-03-26T20:10:45.233
> 
> 标签：android, image-recognition

我正在尝试使用 Neuroph Framework 和 Eclipse 为 android 创建一个图像识别应用程序，但我不断收到此错误

（使用 2.7 框架版本） 03-26 17:05:20.533: E/AndroidRuntime(3107): FATAL EXCEPTION: dataLoader 03-26 17:05:20.533: E/AndroidRuntime(3107): java.lang.NoClassDefFoundError: org .neuroph.core.NeuralNetwork 03-26 17:05:20.533: E/AndroidRuntime(3107): at com.example.meuprojetoandroid1.MainActivity$1.run(MainActivity.java:49) 03-26 17:05:20.533: E /AndroidRuntime(3107): 在 java.lang.Thread.run(Thread.java:856)

（使用 2.6 框架版本） 03-26 17:05:44.299: E/AndroidRuntime(3478): java.lang.StackOverflowError 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.util.HashMap .get(HashMap.java:298) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectStreamClass.getReflectionField(ObjectStreamClass.java:190) 03-26 17:05:44.299: E /AndroidRuntime(3478): 在 java.io.ObjectInputStream.readFieldValues(ObjectInputStream.java:1091) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java: 455) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.util.ArrayList.readObject(ArrayList.java:649) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.lang.reflect.Method。调用(Method.java:511) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1354) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1266) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851 ) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java .io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05 :44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。readFieldValues(ObjectInputStream.java:1137) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:455) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1369) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1266 ) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java .io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05 :44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readFieldValues(ObjectInputStream.java:1137) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:455) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1369 ) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1266) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java .io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05 :44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/ AndroidRuntime(3478): at java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect.Method.invoke(Method.java:511) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1354) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1266) 03-26 17: 05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299:E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java :1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478):在 java.io.ObjectInputStream.readFieldValues(ObjectInputStream.java:1137) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:455) 03-26 17 :05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1369) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。读取层次结构（ObjectInputStream.java:1266）03-26 17:05:44.299：E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java :787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478):在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readFieldValues(ObjectInputStream.java:1137) 03-26 17 :05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:455) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。 readObjectForClass(ObjectInputStream.java:1369) 03-26 17:05:44.299:E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1266) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java :1851) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478):在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17 :05:44.299: E/AndroidRuntime(3478): 在 java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect。 Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java在爪哇在爪哇在 java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1266) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17 :05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。 readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/ AndroidRuntime(3478): at java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java在 java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1266) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17 :05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。 readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/ AndroidRuntime(3478): at java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 javareadHierarchy(ObjectInputStream.java:1266) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999 ) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java .util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05: 44.299: E/AndroidRuntime(3478): 在 javareadHierarchy(ObjectInputStream.java:1266) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999 ) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java .util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05: 44.299: E/AndroidRuntime(3478): 在 java在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17 :05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。 readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java在 java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1851) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17 :05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.io.ObjectInputStream。 readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 javareadNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.util.ArrayList.readObject(ArrayList.java:657 ) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 javareadNonPrimitiveContent(ObjectInputStream.java:787) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999) 03-26 17:05:44.299: E/ AndroidRuntime(3478): 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.util.ArrayList.readObject(ArrayList.java:657 ) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 javaE/AndroidRuntime(3478): 在 java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native方法) 03-26 17:05:44.299: E/AndroidRuntime(3478): at javaE/AndroidRuntime(3478): 在 java.util.ArrayList.readObject(ArrayList.java:657) 03-26 17:05:44.299: E/AndroidRuntime(3478): 在 java.lang.reflect.Method.invokeNative(Native方法) 03-26 17:05:44.299: E/AndroidRuntime(3478): at java

在 2.6 上，它确实适用于示例 [http://neuroph.sourceforge.net/tutorials/android_image_recognition_using_neuroph.htm](http://neuroph.sourceforge.net/tutorials/android_image_recognition_using_neuroph.htm)

但是当我使用我的训练器 nnet 时，它给了我这个错误......我尝试训练几个神经网络，但不断收到这个错误......我使用 2.7 和 2.6 Neuroph Studio 来训练网络......

抱歉，如果重复此操作，但我也没有找到与答案相关的任何内容...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:49:27.173

[从 2.6 的文档中](http://neuroph.sourceforge.net/tutorials/android_image_recognition_using_neuroph.htm)，

重要提示：当你在 Android 中加载神经网络时，你需要在一个单独的线程中进行，并增加堆栈大小

`new Thread(null, loadDataRunnable, "networkLoader", 32000).start();`

或者你会得到一个 java.lang.StackOverflowError。

# c - 获取当前控制台大小

> ID：15646461
> 
> 赞同：0
> 
> 时间：2013-03-26T20:10:58.337
> 
> 标签：c, windows, console, console-application

我想以行和列的形式获取当前的控制台大小。使用[GetConsoleScreenBufferInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683171%28v=vs.85%29.aspx)函数，我可以获得一个[CONSOLE_SCREEN_BUFFER_INFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682093%28v=vs.85%29.aspx)结构，它具有以下内容：

```
typedef struct _CONSOLE_SCREEN_BUFFER_INFO {
  COORD      dwSize;
  COORD      dwCursorPosition;
  WORD       wAttributes;
  SMALL_RECT srWindow;
  COORD      dwMaximumWindowSize;
} CONSOLE_SCREEN_BUFFER_INFO; 
```

`dwMaximumWindowSize`顾名思义，最接近的字段是获取最大窗口大小的字段。有没有办法获取当前窗口大小（即行数和列数）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:00:26.017

窗口的大小在`srWindow`字段中：

> 窗口
> 
> 包含显示窗口左上角和右下角的控制台屏幕缓冲区坐标的 SMALL_RECT 结构。

# xcode - 如何使 TabBar 透明

> ID：15646464
> 
> 赞同：0
> 
> 时间：2013-03-26T20:11:11.217
> 
> 标签：xcode, background, transparency, tabbar

我想让标签栏透明并保留图标。因此，当您查看它时，标签栏上的图标看起来就像它们本身一样。我这样做的代码是什么？现在这是我的代码

```
 UIImage* tabBarBackground = [UIImage imageNamed:@""];
 [[UITabBar appearance] setBackgroundImage:tabBarBackground];
 [[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@""]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T10:24:04.313

The easiest way to make a tab bar transparent is by setting the tab bar background image to a transparent image in the interface builder. You can get a transparent png image whose height and width is equal to the tab bar's from the net.

Note: By changing the alpha value, you actually end up dimming the tab bar's icons as well. Make sure this is what you want, otherwise using a transparent background image is a better option.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:09:46.463

试试这个代码

```
- (void)viewDidLoad 
{
  [super viewDidLoad];

  CGRect frame = CGRectMake(0.0, 0, self.view.bounds.size.width, 48);

  UIView *trans_view = [[UIView alloc] initWithFrame:frame];

  [trans_view setBackgroundColor:[[UIColor alloc] initWithRed:0.0
                                       green:0.0
                                        blue:0.0
                                       alpha:0.5]];//you can change alpha value also

  [tabBar1 insertSubview:trans_view atIndex:0];//tabBar1 = your tabbar reference
  [trans_view release];
} 
```

这个[链接](http://www.jondack.com/index.php/2010/12/16/customizing-the-background-of-a-uitabbarcontroller/)也将帮助你

# php - 无法修复西里尔字母问题。htmlspecialchars/PHP/MySQL

> ID：15646465
> 
> 赞同：3
> 
> 时间：2013-03-26T20:11:16.500
> 
> 标签：php, mysql

伙计们。当我在西里尔文上键入任何内容时，例如：`Цветана Пиронкова`，然后单击提交（到表中），它会显示它（并将其保存在 mysql 表中），就像这样：`&amp;#1062;&amp;#1074;&amp;#1077;&amp;#1090;&amp;#1072;&amp;#1085;&amp;#1072; &amp;#1055;&amp;#1080;&amp;#1088;&amp;#1086;&amp;#1085;&amp;#1082;&amp;#1086;&amp;#1074;&amp;#1072;` 而且我不知道如何修复它。我认为问题来自`htmlspecialchars`，但我不知道。这是我的索引文件：

```
<?php // connect to the database
        include('connect-db.php');

        // get results from database
        $result = mysql_query("SELECT * FROM players") 
                or die(mysql_error());  

mysql_query("SET NAMES UTF8");

        // display data in table
        echo "<p><b>View All</b></p>";

        echo "<table class=\"table table-bordered table-hover\" border='1' cellpadding='10'>";
        echo "<tr> <th>ID</th> <th>Mqsto</th> <th>Ime</th> <th>Tochki</th> <th></th> <th></th></tr>";

        // loop through results of database query, displaying them in the table
        while($row = mysql_fetch_array( $result )) {

                // echo out the contents of each row into a table
                echo "<tr>";
                echo '<td>' . $row['id'] . '</td>';
                echo '<td>' . $row['mqsto'] . '</td>';
                echo '<td>' . $row['ime'] . '</td>';
                echo '<td>' . $row['tochki'] . '</td>';
                echo '<td><a href="editr.php?id=' . $row['id'] . '">Edit</a></td>';
                echo '<td><a href="deleter.php?id=' . $row['id'] . '">Delete</a></td>';
                echo "</tr>"; 
        } 

        // close table>
        echo "</table>";
        ?>
<p><a href="new.php">Add a new record</a></p><br><br> 
```

这是我的 new.php 文件：

```
<?php
/* 
 NEW.PHP
 Allows user to create a new entry in the database
*/

 // creates the new record form
 // since this form is used multiple times in this file, I have made it a function that is easily reusable
 function renderForm($mqsto, $ime, $tochki, $error)
 {
 ?>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <html>
 <head>
 <title>New Record</title>
 </head>
 <body>
 <?php 
 // if there are any errors, display them
 if ($error != '')
 {
 echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
 }
 ?> 

 <form action="" method="post">
 <div>
 <strong>Mqsto: *</strong> <input type="text" name="mqsto" value="<?php echo $mqsto; ?>" /><br/>
 <strong>Ime: *</strong> <input type="text" name="ime" value="<?php echo $ime; ?>" /><br/>
 <strong>Tochki: *</strong> <input type="text" name="tochki" value="<?php echo $tochki; ?>" /><br/>
 <p>* required</p>
 <input type="submit" name="submit" value="Submit">
 </div>
 </form> 
 </body>
 </html>
 <?php 
 }

 // connect to the database
 include('connect-db.php');

mysql_query("SET NAMES UTF8");

 // check if the form has been submitted. If it has, start to process the form and save it to the database
 if (isset($_POST['submit']))
 { 
 // get form data, making sure it is valid
 $mqsto = mysql_real_escape_string(htmlspecialchars($_POST['mqsto']));
 $ime = mysql_real_escape_string(htmlspecialchars($_POST['ime']));
 $tochki = mysql_real_escape_string(htmlspecialchars($_POST['tochki']));

 // check to make sure both fields are entered
 if ($mqsto == '' || $ime == '' || $tochki == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';

 // if either field is blank, display the form again
 renderForm($mqsto, $ime, $tochki, $error);
 }
 else
 {
 // save the data to the database
 mysql_query("INSERT players SET mqsto='$mqsto', ime='$ime', tochki='$tochki'")
 or die(mysql_error()); 

 // once saved, redirect back to the view page
 header("Location: ranglista.php"); 
 }
 }
 else
 // if the form hasn't been submitted, display the form
 {
 renderForm('','','','');
 }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:18:03.590

添加到 new.php 文件的顶部

```
echo "<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T20:19:39.860

您是否将**数据库字符集设置为 UTF-8**并在您的 html 中使用它？

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

还要记住，数据库中的 UTF-8 西里尔文需要 2 个字节，因此在设置 varchar 或类似大小时要注意（如果要显示 3000 个字符，则应设置大小为 6000）

# java - ClassCastException using Class.cast using Generics

> ID：15646468
> 
> 赞同：0
> 
> 时间：2013-03-26T20:11:26.637
> 
> 标签：java, class, generics, casting, classcastexception

我正在编写一个通用方法，它将通过在其上尝试 class.cast 来验证属性，但我不断收到 ClassCastException

... 测试类

```
public <T> T get(Properties p, String propKey, Class<T> clazz) throws Exception {

    T val = null;

    Object propValue = p.get(propKey);

    if(propValue== null) {
        throw new Exception("Property (" + propKey + ") is null");
    }

    try {
        val = clazz.cast(propValue); // MARKER

    } catch(Exception e) {
        throw new Exception("Property (" + propKey + ") value is invalid value of type (" + clazz + ")", e);
    }

    return val;
} 
```

... 测试类

```
@Before
public void setUp() {
    propUtil = new PropUtil();
    properties = new Properties();
    properties.setProperty("test.int.prop", "3");
}

@Test
public void testGet() {

    try {

        assertEquals(new Integer(3), propUtil.get(properties, "test.int.prop", Integer.class));
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

MARKER 处注释的代码导致 ClassCastException。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:23:25.590

该类`Properties`是一个`Hashtable`存储`String`对象，尤其是当您调用`setProperty`. 您添加了`String`“3”，而不是整数`3`。您实际上是在尝试将“3”转换为`Integer`，以便正确抛出`ClassCastException`. 尝试

```
assertEquals("3", propUtil.get(properties, "test.int.prop", String.class)); 
```

或者，如果您*想*返回`get`an `Integer`，则只需使用 a `Hashtable<String, Integer>`，或者更好的是使用 a `HashMap<String, Integer>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:22:20.303

假设`Properties`这里是`java.util.Properties`，值总是`String`s。

您应该使用该`getProperty()`方法，而不是`get()`碰巧从中可见的方法，`HashTable`因为当 Java 人员对组合与继承不太注意时，该类被写回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:23:49.227

这条线

```
properties.setProperty("test.int.prop", "3"); 
```

将 a`java.lang.String`放入属性

并且您将`Integer.class`通用方法传递给您。所以`ClassCastException`是意料之中的！

如果你想测试`Integer.class`你必须放一个整数

```
properties.put("test.int.prop", 3); 
```

请注意，在上一行中使用[put](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html#put%28K,%20V%29)因为[Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)类正在扩展[Hashtable](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)

如果您的意图是放置一个`String` 并测试一个，`Integer`那么您必须以某种方式将该字符串[解析](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)为一个整数值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:33:59.770

感谢您的回复。我意识到从 String 转换为 Integer 的基本行为是不可能的。我只是想让方法更流畅并为我做转换检查。我刚刚使用反射解决了我正在寻找的解决方案：

```
 Object propValue = p.get(propKey);
    Constructor<T> constructor = clazz.getConstructor(String.class);
    val = constructor.newInstance(propValue); 
```

即使用采用 String.class 的公共构造函数（即 String 属性值）

工作一种享受。

# java - 在 VisualVM/OQL 中，如何从某个包中获取所有对象实例的总大小

> ID：15646471
> 
> 赞同：1
> 
> 时间：2013-03-26T20:11:39.713
> 
> 标签：java, jvisualvm, oql

我正在使用 VisualVm 来分析在 Tomcat 中运行的 Web 应用程序。Tomcat 不断因内存不足错误而崩溃，所以我试图找出我的应用程序中是什么导致了它。当我从 VisualVm 运行内存分析器时，看起来大部分内存都被 String/Char[] 占用了，但除非我能找出这些字符串的更高级别的容器，否则知识对我没有什么好处。在做研究时，我发现了 OQL，`rsizeof()`所以我可以，`SELECT rsizeof(o) FROM instanceof my.package.class o`但我不知道我需要哪个类，所以我真的很想能够运行类似的东西，`SELECT it.name, rsizeof(o) FROM instanceof Filter(Heap.classes(), "/my.package./(it.name)");`但这不起作用。

那么什么是 OQL？理想情况下，我想限制在前 10 名左右，并按大小排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:17:47.593

我不确定我是否完全理解，但...

OQL 使用基于 JavaScript 的表达式语言，因此您可以使用以下语句，它将查找`java.util.regex`包内的所有对象（递归）并求和它们的大小，它将返回一个数字：

```
sum(filter(heap.objects(), "/^java.util.regex./(classof(it).name)"), 'rsizeof(it)') 
```

这将需要同样的时间，我只在小堆上进行了测试。注意`^`包名开头的。

# ruby-on-rails - 将哈希请求拆分为单独的字符串 rails

> ID：15646473
> 
> 赞同：-3
> 
> 时间：2013-03-26T20:11:51.230
> 
> 标签：ruby-on-rails, ruby

我将如何将此哈希请求拆分为两个不同的字符串？我想将它拆分为`#<ActionDispatch`，这标志着请求中选择的下一个图像的开始。我如何在红宝石中完成这个？

**要求**

```
{"image"=>{"picture"=>[#<ActionDispatch::Http::UploadedFile:0x10c986d88 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130404-53101-3c2whv-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"background-pic.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @content_type="image/jpeg",
 @original_filename="background-pic.jpg">,
 #<ActionDispatch::Http::UploadedFile:0x10c986d60 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130404-53101-bvdysw-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"bible-banner.png\"\r\nContent-Type: image/png\r\n",
 @content_type="image/png",
 @original_filename="bible-banner.png">],
 "album_id"=>"10"},
 "authenticity_token"=>"dr8GMCZOQo4dQKgkM4On2uMs8iORQ68vokjW0e4VvLY=",
 "commit"=>"Submit",
 "utf8"=>"✓",
 "album_id"=>"10"} 
```

**控制器**

```
class Admin::ImagesController < ApplicationController
    respond_to :html, :json
    def index
        @album = Album.find(params[:album_id])
        @images = @album.images.all
    end
    def new
        @album = Album.find(params[:album_id])
        @image = @album.images.new
        #@image.picture.size.times {@image.build}
    end
    def create
        @album = Album.find(params[:album_id])
        @image = @album.images.new(params[:image])
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, @album, :images]
        else
            render 'new'
        end
    end
    def show
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
    end
    def edit
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
    end
    def update
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
        if @image.update_attributes(params[:image])
            flash[:notice] = "Successfully updated Image"
            redirect_to [:admin, @album, :images]
        else
            render "edit"
        end
    end
    def destroy
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
        @image.destroy
        @albumid = @album.id
        @id = @image.id
        FileUtils.remove_dir("#{Rails.root}/public/uploads/image/picture/#{@albumid}/#{@id}", :force => true)
        redirect_to admin_album_images_path(@album)
    end
end 
```

**模型**

```
class Image < ActiveRecord::Base
  attr_accessible :title, :description, :picture, :image_id, :album_id, :albumcover, :image
  belongs_to :album
  accepts_nested_attributes_for :album
  mount_uploader :picture, PictureUploader
end 
```

**表单视图**

```
<%= form_for([:admin, :album, @image], :html => {:multipart => true}) do |f| %>
  <%= f.hidden_field :album_id, :value => @album.id %>
  <%= f.file_field :picture, :multiple => true %>
  <%= f.submit "Submit" %>
<%end%> 
```

**上传者载波**

```
class PictureUploader < CarrierWave::Uploader::Base

  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  # include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  # include Sprockets::Helpers::RailsHelper
  # include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.album_id}/#{model.id}"
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:30:25.343

正如上面的一些评论者所说，你所拥有的是一个散列（键/值对），`picture`其中的值已经是一个数组，其本质上被拆分为离散对象。

为了访问数组，您需要请求`picture`密钥，然后您可以`UploadedFile`使用[Array](http://www.ruby-doc.org/core-1.9.3/Array.html)方法访问每个数组。

所以从你的初始哈希开始：

```
hash_with_stuff = { "picture" => [#<UploadedFile1>,#<UploadedFile2>]}
  #=> { "picture" => [#<UploadedFile1>,#<UploadedFile2>]} 
```

为了得到数组：

```
array_of_pictures = hash_with_stuff["picture"]
  #=> [#<UploadedFile1>,#<UploadedFile2>] 
```

现在您有了数组，您可以像操作任何数组一样对其进行操作：

```
# to get single elements out
array_of_pictures[0] # where the number is the index of the object in the array (starting with 0)
  #=> #<UploadedFile1>   #this is an UploadedFile object and will respond to its own methods

# to operate on each element with some method
array_of_pictures.each do |picture|
  picture.create_thumbnail
end 
```

这是有道理的，还是有其他关于使用它的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:04:46.267

我想出了如何将此哈希请求拆分为单独的字符串。

**图像控制器**

```
def new
    @album = Album.find(params[:album_id])
    @image = @album.images.new
    end
    def create
        params[:image][:picture].each do |image|
            @album = Album.find(params[:album_id])
            @params = {}
            @params['picture'] = image
            @image = @album.images.create(@params)
       end
        if @image.save
            if params[:image][:picture].size > 1
                flash[:notice] = "Successfully added images!"
            else
                flash[:notice] = "Successfully added image!"
            end
            redirect_to [:admin, @album, :images]
        else
            render "new"
            flash[:notice] = "Did not successfully add image :("
        end
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:36:36.427

让我们看看这个哈希 h={"strings"=>["stirng_object_1","string_object_2"]} 几乎与您发布的哈希相似，只是数组中的对象是字符串而不是 ActionDispatch::Http ::UploadedFile 对象。

因此，从我引用的示例哈希中，如果我必须获取第一个字符串对象，我会这样做

> h[“字符串”][0]

同样，如果您想访问第一个 ActionDispatch::Http::UploadedFile 对象，您可以这样做（假设您的哈希名称是 h ）

> h[“图片”][0]

# oauth - 从 google api 调用中检索用户的生日

> ID：15646474
> 
> 赞同：4
> 
> 时间：2013-03-26T20:11:55.787
> 
> 标签：oauth, google-signin

**问题**：我在通过 api 调用获取用户生日时遇到困难，而且我是 OAuth 新手。

**遵循的步骤**：（已遵循使用 google+ 实现登录所需的所有步骤）
1\. 创建了一个应用程序。
2.获取app_id和secret_key。
3.没有使用SDK，在php中实现了没有SDK的过程。
4.通过调用获取“CODE” `accounts[dot]google[dot]com/o/oauth2/auth?`
5.使用HTTPS POST方法请求访问令牌的URL参数中的代码`[https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)`，使用CURL
6.访问登录页面时，要求用户访问电子邮件等信息的权限，个人资料，出生日期等，但我无法找到获得该出生日期的方法
7\. 我尝试过访问。仍然没有运气`www[dot]googleapis[dot]com/plus/v1/people/***User_ID?key={THE_API_KEY}***`

请指导或建议我如何获得 DOB。如果还有其他我想分享的信息，请告诉我。

提前致谢。

干杯! 法尔汉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:00:20.963

好吧当然..它必须是来自谷歌的安全问题。

在我对不同场景进行了部分单元测试后，我了解到了一个简单的事情，即如果用户在他的个人资料设置中允许，谷歌只会回复生日信息。

如果出生年份被隐藏，它将在 HTTPS Post 方法的响应中抛出 0000 作为年份。

如果我提供的任何信息有误，请纠正我。

干杯! 法尔汉。

# maven - Maven - 带有 java.library.path 的 UnsatisfiedLinkError

> ID：15646481
> 
> 赞同：3
> 
> 时间：2013-03-26T20:12:16.647
> 
> 标签：maven, java-native-interface

我在尝试让 Maven 加载我的本机库时遇到问题。目前，我将我的库文件 (.so) 放入`src/main/resources/`其中，它给了我一个错误，即在 java.library.path 中找不到它。我也尝试将它放在项目的基本目录中，但给了我相同的结果。

下面是我试过的 maven 插件，但它似乎不起作用。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
      <systemProperties>
        <property>
          <name>java.library.path</name>
          <value>${project.build.directory}</value>
        </property>
      </systemProperties>
    </configuration>
  </plugin> 
```

如果有帮助，我会直接从 Eclipse 运行我的项目。我知道如何让它在 Eclipse 中工作，但希望它与 maven 一起工作。

@EDIT我也尝试在命令行上运行它，但我仍然收到同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-04T09:31:38.747

我在我的项目中做了以下事情：

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
        <argLine>-Djava.library.path=/path/to/your/libs:${java.library.path}</argLine>
        </configuration>
    </plugin>
</plugins> 
```

它对我有用。

# java - ArrayAdapter - 如何停止 getView 调用？

> ID：15646482
> 
> 赞同：1
> 
> 时间：2013-03-26T20:12:16.863
> 
> 标签：java, android, listview, android-arrayadapter, indexoutofboundsexception

如何停止 getView 调用，直到我再次调用 notifyDatasetChanged()？

我的问题：

我有一个在 textchange 上过滤适配器的文本字段。如果我过于频繁地更改文本，我会得到 ArrayIndexOutOfBoundsException，因为 getView 当然仍在访问适配器列表，而辅助过滤操作已经在运行。

所以ATM是这样的：

1.  在后台过滤 + notifyDatasetChanged
2.  多次调用 GetView
3.  在处理下一个过滤器时，由于第一个过滤器，GetView 仍在后台被调用。但是 GetView 由于列表访问（过滤操作更改列表）而获得异常。所以我想停止 GetView 调用，然后开始任何给定的过滤操作。

编辑：

如果我看到过滤器线程处于活动状态，我正在考虑立即从 getview 返回？

编辑：

OK 相关适配器代码：

```
@Override
    protected FilterResults performFiltering(CharSequence constraint) {
      filterLock.acquireUninterruptibly();

      FilterResults r = new FilterResults();
      List<T> items = null;
      m_Filter = constraint;

      if (constraint == null /* TextUtils.isEmpty(constraint) */) { // AR
        // auskommentiert
        // da
        // ungewünscht
        items = m_AllItems;
      } else {
        items = m_FilteredItems;
        items.clear();

        synchronized (SyncLock) {
          for (T item : m_AllItems) {
            if (DynamicArrayAdapter.this.filter(item, constraint)) {
              items.add(item);
            }
          }
        }
      }

      r.values = items;
      r.count = items.size();

      return r;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {

      m_Items = (List<T>) results.values;

      notifyDataSetChanged();

      filterLock.release();
    } 
```

这是从过滤器扩展而来的过滤器。m_Items 和 m_AllItems 在适配器中使用（第一个包含过滤的，第二个包含未过滤的）。如您所见，它们在 performFiltering() 中没有被修改。filterLock 也是一个大小为 1 的信号量，因此不会同时发生 2 个过滤操作。

编辑2：

另外，在我的 onTextChanged 中，我可以向您保证，我不会以任何方式修改适配器，也不会在从 performFiltering() 调用的 filter() 方法中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:24:16.860

不是从 UI 线程更改为适配器是导致您出现问题的原因。如果您将所有适配器修改发布到 UI 线程，它就不会发生，因为它会一个接一个地发生。

您可以在不同的线程中进行繁重的处理，但是当您想将更改放在适配器中时，您需要使用 Handler 或[`Activity.runOnUiThread`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29). 例如：

```
// Really heavy filtering process

runOnUiThread(new Runnable(){
          public void run(){
               // Change items of Adapter here
               // Now we are notifying that the data has changed.
               mAdapter.notifyDataSetChanged();
          }
    }); 
```

看到你的代码后：正如 Luksprog 所说，你不应该直接从其他线程更改列表，而是使用列表的副本。发生的情况是 ListView 接受大小为 X 的列表，但您已经将其更改为大小为 Y 并且 ListView 不知道它。您需要在项目列表的副本上完成工作，完成后，发布到 UI 线程 a`Runnable`更改适配器中的项目列表并调用`notifyDataSetChanged()`，这是您不会与 ListView 和您发生冲突适配器。

# python - python中的欧拉项目#11

> ID：15646483
> 
> 赞同：0
> 
> 时间：2013-03-26T20:12:19.187
> 
> 标签：python, multidimensional-array

我正在尝试做项目 euler #11 ( [http://projecteuler.net/problem=11](http://projecteuler.net/problem=11) ) ，但我一直错误地将 51267216 作为我的答案，我不知道为什么。现在，我首先将网格格式化为二维数组，然后遍历所有数字，不包括外部 3。然后遍历 8 个不同的方向并测试所有方向。如果它大于当前最大的，那么我将它存储为“顶部”任何帮助将不胜感激。

```
import pprint
def neg(l):
    for a in l:
        if a<0:
            return True
    return False
tg="""08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08
49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00
81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65
52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91
22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80
24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50
32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70
67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21
24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72
21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95
78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92
16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57
86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58
19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40
04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66
88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69
04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36
20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16
20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54
01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48"""
grid=tg.split("\n")
for a in range(0, len(grid)):
    i=grid[a]
    i=i.split(" ")
    for b in range(0, len(i)):
        i[b]=int(i[b])
    grid[a]=i

top=0
for y in range(0, 19):
    for x in range(0, 19):
        for b in range(-1, 2):
            for c in range(-1, 2):
                if b+c!=0:
                    try:
                        factors=[grid[x][y],grid[x+b][y+c],grid[x+(b*2)][y+(c*2)],grid[x+(b*3)][y+(c*3)]]
                        if not neg(factors):
                            cur=grid[x][y]*grid[x+b][y+c]*grid[x+(b*2)][y+(c*2)]*grid[x+(b*3)][y+(c*3)]
                            if cur>top:
                                top=cur
                    except IndexError:
                        pass

print(top) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:03:12.597

你有两个主要问题，首先：

```
except IndexError: 
```

不会捕获所有无效的四元组，因为 Python 列表允许负索引 ( `list[-k]`is `list[len(list)-k]`)，因此您还可以检查环绕网格末端的四元组。

第二，

```
if b+c!=0: 
```

完全不考虑一个方向——即最大乘积所在的方向。找到要排除的正确条件`(0,0)`。

第三（是的，我知道我在上面说了两个，但这也许不是主要的），

```
for b in range(-1, 2):
    for c in range(-1, 2): 
```

检查同一方向两次，一次为`(b,c)`，一次为`(-b,-c)`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-03T19:50:13.927

这太长了，但它会在 0.003 秒内回答

```
import time
start_time = time.time()
num = "08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08 \
49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00 \
81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65 \
52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91 \
22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80 \
24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50 \
32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70 \
67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21 \
24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72 \
21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95 \
78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92 \
16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57 \
86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58 \
19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40 \
04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66 \
88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69 \
04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36 \
20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16 \
20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54 \
01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48"
def product(num):
    rightup = 0
    right = 0
    rightdown = 0
    down = 0
    if not (17 <= i <= 19 or 37 <= i <= 39 or 57 <= i <= 59 or 77 <= i <= 79 \
            or 97 <= i <= 99 or 117 <= i <= 119 or 137 <= i <= 139 or 157 <= i <= 159 \
            or 177 <= i <= 179 or 197 <= i <= 199 or 217 <= i <= 219 or 237 <= i <= 239 \
            or 257 <= i <= 259 or 277 <= i <= 279 or 297 <= i <= 299 or 317 <= i <= 319 \
            or 337 <= i <= 339 or 357 <= i <= 359 or 377 <= i <= 379 or 397 <= i <= 399):
        if i <= 339:
            rightdown = my_list[i] * my_list[i + 21] * my_list[i + 42] * my_list[i + 63]
        right = my_list[i] * my_list[i+1] * my_list[i+2] * my_list[i+3]
        if i >= 60:
            rightup = my_list[i] * my_list[i-19] * my_list[i-38] * my_list[i-57]
    greatest_product = 0
    if i <= 339:
        down = my_list[i] * my_list[i+20] * my_list[i+40] * my_list[i+60]
    greatest_product = greatest_product
    return max(rightdown,right,rightup,down)

my_list = []
andis = 0
while andis < len(num):
    number = num[andis] + num[andis + 1]
    andis += 3
    my_list.append(int(number))
m = 0
for i in range(0,400):
    if product(i) > m:
        m = product(i)
print("the biggest priduct is: ",m)
print("this code took {} seconds".format(time.time()-start_time)) 
```

# java - 从 ArrayList (Java) 添加到堆栈

> ID：15646487
> 
> 赞同：10
> 
> 时间：2013-03-26T20:12:31.260
> 
> 标签：java, arraylist, stack

我有一个用硬编码值预定义的 ArrayList。如何将这些添加到堆栈中？这个想法是为了演示堆栈类的 pop、push、peek 功能。

```
ArrayList<String> al = new ArrayList<String>();

al.add("A");
al.add("B");
al.add("C");

Stack<String> st = new Stack<String>();

st.push(al); **// This doesn't seem to work.. Will I have to loop it in some way?**

System.out.println(st); 
```

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-26T20:13:33.757

像许多集合类一样，[Stack](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html)提供了一个[addAll](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html#addAll%28java.util.Collection%29)方法：

```
st.addAll(al) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:22:09.623

为什么不只遍历数组列表并将其推送到堆栈？

```
for(String str : al)
  st.push(str) 
```

# javascript - 在网络浏览器中阻止自定义广告对话框

> ID：15646488
> 
> 赞同：1
> 
> 时间：2013-03-26T20:12:33.757
> 
> 标签：javascript, .net, winforms, dialog, browser

我检查了其他线程，但对我不起作用。跟随他们，到目前为止我已经实现了这种方式：

```
 private void InjectAlertBlocker()
        {
            HtmlElement head = webBrowser4.Document.GetElementsByTagName("head")[0];
            HtmlElement scriptEl = webBrowser4.Document.CreateElement("script");
            IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;
            string alertBlocker = "window.showModalDialog = function () { };";
            alertBlocker += "window.alert = function () { };";
            alertBlocker += "getUrlParam(strParamName){};";
            alertBlocker += "getSpecialUrlsParam(strParamName) {};";
            alertBlocker += "closeButton();";

            element.text = alertBlocker;
            head.AppendChild(scriptEl);
        } 
```

从导航和完成的事件中调用 InjectAlertBlocker()。

我也试过：

```
 private void webBrowser_NewWindow(object sender, CancelEventArgs e)
    {
        WebBrowser wb = sender as WebBrowser;
        if (wb != null)
            añadeTextoDebug("Un navegador quiso abrir un popup: " + wb.Url);
        e.Cancel = true;
    } 
```

我想取消的网站网址是这样的：警告 SCAM-LIKE LINK [http://cdn.adbooth.net/src/autoshortner.html?section=3605070&url=url_i_want_goes_here.com](http://cdn.adbooth.net/src/autoshortner.html?section=3605070&url=url_i_want_goes_here.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:02:07.913

我分两步制作了一个补丁/修复解决方案......有点hacky......

检查 url，如果它被重定向，我们得到的下一个 url 等等以获取 adbooth 字符串。（[如何以编程方式延长缩短的网址](https://stackoverflow.com/questions/13474112/how-to-programatically-lengthen-shortened-urls)）

然后在导航事件（只是为了确定）和导航之前，在我可以的情况下，我修剪 url，如：

```
 private string noAdBooth(string lnk)
    {
        if (lnk.Contains("&url=") && lnk.Contains("adbooth"))
        {
            añadeTextoDebug("adbooth omitted");  //add txt debug
            lnk = lnk.Substring(lnk.IndexOf("&url=") + 5);
        }
        return lnk;
    } 
```

# c# - 从 MS Word 插件发送/接收 http 请求/响应

> ID：15646489
> 
> 赞同：2
> 
> 时间：2013-03-26T20:12:37.320
> 
> 标签：c#, visual-studio, vba, ms-word

我正在尝试为 MS Word 编写加载项。是否可以让 MS Word 加载项侦听特定端口并发送/接收 http 请求/响应？MS Word 和在 Word 之外运行的应用程序之间是否存在防火墙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:16:40.630

Office 加载项可以在不触发防火墙问题的情况下发出 HTTP 请求（在其默认配置中使用 Windows 防火墙），但它无法在不触发防火墙问题的情况下进行侦听。

如果您从 Word 内部向位于 Word 外部的服务发出请求，则该服务在侦听端口时可能会遇到防火墙问题。

Windows 防火墙，默认情况下[会阻止传入请求](http://windows.microsoft.com/en-us/windows-vista/understanding-windows-firewall-settings)。Windows 防火墙包含在所有版本的 Windows XP SP2 或更高版本中。

有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/office/aa140260%28v=office.10%29.aspx)。

此外，

```
Function GetRateCBR(dDate As Date) As String
Dim sUrlRequest, intTry As Integer, _
    strResponse As String
Dim oXMLHTTP As Object
Dim oResponse As Object

Set oResponse = CreateObject("MSXML2.DOMDocument")

'Build URL for request
sUrlRequest = _
    "http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=" _
    & Format(dDate, "dd.mm.yyyy") _
    & "&date_req2=" & Format(dDate, "dd.mm.yyyy") _
    & "&VAL_NM_RQ=" & "R01235"

'Try to get a response, 10 tries
intTry = 1
Do Until intTry > 10
    Set oXMLHTTP = CreateObject("MSXML2.XMLHTTP")
    oXMLHTTP.Open "GET", sUrlRequest, False
    oXMLHTTP.send
    If oXMLHTTP.Status = 200 Then
        If oResponse.loadXML(oXMLHTTP.responseText) Then _
            Exit Do
    End If
    If Not oXMLHTTP Is Nothing Then oXMLHTTP.abort: _
        Set oXMLHTTP = Nothing
    DoEvents
    intTry = intTry + 1
Loop
If Not oXMLHTTP Is Nothing Then oXMLHTTP.abort: _
    Set oXMLHTTP = Nothing
If intTry <= 10 Then
     GetRateCBR = Mid$(oResponse.Text, 3)
End If
If Not oResponse Is Nothing Then oResponse.abort: _
    Set oResponse = Nothing
End Function 
```

[通过访问博客](http://accessblog.net/2006/12/how-to-retrieve-data-from-web-server.html)的示例

# asp.net - asp.net Panel DefaultButton 属性在 Android 浏览器中不起作用？

> ID：15646500
> 
> 赞同：0
> 
> 时间：2013-03-26T20:13:13.260
> 
> 标签：asp.net, .net, android-browser

单击 android 键盘中的 go 按钮不会触发默认按钮。这适用于 iPhone

```
<asp:Panel runat="server" id="SubmitPanel" DefaultButton="Submit">
    <asp:LinkButton ID="Submit" runat="server" OnClick="SubmitButton_Click">
         Submit
    </asp:LinkButton>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T21:57:20.010

仅支持 Button 和 ImageButton 控件。 [不支持链接按钮。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T06:43:30.973

尝试这个

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        btnSubmit_Click(sender, e);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:34:22.177

确保具有焦点的文本框或文本输入对象（这是激活 android 键盘所必需的）包含在此提交面板中。

# java - Java 关闭/清理

> ID：15646501
> 
> 赞同：1
> 
> 时间：2013-03-26T20:13:16.917
> 
> 标签：java, resources, release

我有一个包含一些大对象的类：

```
public class MyClass {

    BigObject bo;

    public MyClass() { ... }
} 
```

我应该做一个像下面这样的关闭方法：

```
public void close() {
    bo = null;
} 
```

我认为这对垃圾收集有好处（？）我在正确的轨道上吗？我应该如何处理这些类的清理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:19:21.820

> 我认为这对垃圾收集有好处

不，它只会让代码更混乱。

什么会保存对 的实例的引用`MyClass`？如果您确实需要 的实例`MyClass`来保持活动状态，而不是`BigObject`，那么 - 并且只有这样 - 您应该费心将其设置`bo`为 null。但同时，你也应该考虑你的设计。通常，一个类的所有状态对它的整个生命周期都很重要。该规则有例外，但它们相对罕见。

当实例`MyClass`符合垃圾回收条件时，其`bo`变量的值将与实例`BigObject`是否符合垃圾回收条件无关，因此它是否被设置为 null 无关紧要......但它*确实*使在您最终不必编写尝试手动清理的代码量方面存在很大*差异*。

您应该清理诸如流、本机句柄等资源 - 但通常您可以让垃圾收集器处理内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:19:10.290

一旦您丢失了对外部`MyClass`对象的引用，内部`BigObject`引用就会自动被理解为不可访问，因此无论它是否对垃圾收集器都`null`没有影响。不要用这些不必要的代码弄乱你的代码库；编写代码，充分利用 Java 中复杂的垃圾收集子系统的优势和服务。

# java - 在 startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION) 上出现 NullPointException；

> ID：15646514
> 
> 赞同：0
> 
> 时间：2013-03-26T20:13:59.937
> 
> 标签：java, android, google-drive-api

因此，我正在使用 Google Drive[快速入门](https://developers.google.com/drive/quickstart-android)教程来帮助我了解与 Google Drive 交互的基础知识，并且代码在运行 Android 2.3.6 的 Samsung Ace 2 上运行良好，因此我能够将文件上传到我的 Google Drive 空间。我的问题是，当我在运行 Android 4.2.2 的三星 SII 上运行相同的应用程序时，它会找到该帐户并允许我创建一个新文件进行上传，但在以下情况下崩溃：

```
startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION); 
```

LogCat 给了我以下信息：

```
03-26 18:29:39.686: E/AndroidRuntime(6775): FATAL EXCEPTION: Thread-256
03-26 18:29:39.686: E/AndroidRuntime(6775): java.lang.NullPointerException
03-26 18:29:39.686: E/AndroidRuntime(6775):     at android.app.Activity.startActivityForResult(Activity.java:3370)
03-26 18:29:39.686: E/AndroidRuntime(6775):     at android.app.Activity.startActivityForResult(Activity.java:3331)
03-26 18:29:39.686: E/AndroidRuntime(6775):     at com.blitz_labs.Google$3.run(Google.java:209)
03-26 18:29:39.686: E/AndroidRuntime(6775):     at java.lang.Thread.run(Thread.java:856) 
```

相关代码

```
public void saveFileToDrive(final String fileName) {
Thread folder = new Thread(new Runnable() {

    @Override
      public void run() {
        try {

            Files.List request = service.files().list().setQ("mimeType='application/vnd.google-apps.folder' and trashed=false");

          final FileList files = request.execute();     
            request.setPageToken(files.getNextPageToken());
            if (!files.getItems().isEmpty()){
                for(int i=0; i < files.getItems().size(); i++){
                    if(files.getItems().get(i).getTitle().equals("APP FOLDER")){
                        parentKind = files.getItems().get(i).getKind();
                        parentID = files.getItems().get(i).getId();
                    } 
                } 
           }else{  

                 File body = new File();
                 body.setTitle("APP FOLDER");
                 body.setDescription("App folder");
                 body.setMimeType("application/vnd.google-apps.folder");
                // service is an authorized Drive API service instance
                File file = service.files().insert(body).execute();
                parentKind = file.getKind();
                parentID = file.getId();
                driveFile = file;

                        Log.v("file EXISTS HERE:",""+driveFile.getTitle());

            }

            String mediaStorageDir = "/sdcard/APP FOLDER/";
            fileUri = Uri.fromFile(new java.io.File(mediaStorageDir +java.io.File.separator + fileName));
          // File's binary content
          java.io.File fileContent = new java.io.File(fileUri.getPath());
          FileContent mediaContent = new FileContent("text/plain", fileContent);

          // File's metadata.
          File body = new File();  
          body.setTitle(fileContent.getName());
          body.setMimeType("text/plain");
          body.setParents(Arrays.asList(new ParentReference().setId(parentID) ));

          final File file1 = service.files().insert(body, mediaContent).execute();
          if (file1 != null) {   

               runOnUiThread(new Runnable() {
                      @Override
                      public void run() {
                        Toast.makeText(getApplicationContext() , "file uploaded: " + file.getTitle(), Toast.LENGTH_SHORT).show();
                        Log.v("SUCESSFULL UPLOADTO GOOGLEDRIVE",""+file1.getTitle());
                      }
                    });             
          }             

        } catch (UserRecoverableAuthIOException e) {
            startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
        } catch (IOException e) {
          e.printStackTrace();
        }

      }
});
folder.start();

  } 
```

有没有人对可能导致这种情况的原因有任何想法？

我已经包含了生成错误的文件上传功能。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:48:01.237

你做的事情像

```
 final FileList files = request.execute();     
        request.setPageToken(files.getNextPageToken()); 
```

如果您没有获得文件，那么您将在第二行获得 NPE。

您应该使用这样的代码保护自己免受该事件的影响

```
final FileList files = request.execute();     
if (files!=null){
        request.setPageToken(files.getNextPageToken());
} 
```

具体来说，对于您的错误，您需要像这样保护您的代码

```
if ((e!=null) && (e.getIntent()!=null)) {
   startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
}else if (e!=null){
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:08:00.627

我有同样的问题，我发现崩溃在 getIntent 本身内部。之前在三星note 2上运行良好，但现在失败了。我不知道为什么。Eclipse 调试器显示 getIntent 中的一些局部变量 o 为空，并且它与 NPE 一起崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T18:21:21.727

在 GoogleAccountCredential.usingOAuth2 方法的第一个参数中将“this”参数更改为“this.getApplicatinContext()”。

解决方案发布在这里： [Drive SDK for Android AuthIntent is null](https://stackoverflow.com/questions/17431727/drive-sdk-for-android-authintent-is-null)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T00:48:10.263

在调试我的代码后，我发现我的应用程序崩溃的原因是因为我试图通过另一个类的上传方法上传文件，这对我来说没问题，因为我运行了脚本的原始版本并授权了应用程序因此允许我将文件上传到谷歌，但不能上传到其他任何人。我的解决方案是在我的第二堂课上回到我的 Google 0Aauth

```
 Intent data = new Intent();
        data.putExtra("file", filename);

    if (getParent() == null) {
    setResult(Activity.RESULT_OK, data);
    } else {
   getParent().setResult(Activity.RESULT_OK, data);
    }
    finish(); 
```

还记得在 Google Oauth 页面上获取 Extra 参数

# ruby-on-rails - Rails 在用户字段上查看条件 if/elsif

> ID：15646515
> 
> 赞同：0
> 
> 时间：2013-03-26T20:14:09.267
> 
> 标签：ruby-on-rails, erb

我试图在我的网站上显示一个用户数据表 - 所以我正在使用一个循环来遍历用户并显示他们的信息。以前，这真的很简单，但我想添加条件来处理可能没有城市、州或任何一个输入的情况。当我只输入一个案例时，它工作正常。当我两者都有时，它工作正常。用户位置在模型中定义为城市和州的 JOIN。所以不用担心。但是当我两者都没有时，它不会显示我想要的'---'。我在这里想念什么？

```
<tr>
  <% @user.each do |user| %>
    <td><%= link_to user.username, public_profile_path(user.username) %><br/></td>

    <% if user.state != nil and user.city != nil %>
      <td><%= user.location %></td>
    <% elsif user.state != nil and user.city == nil %>
      <td><%= user.state %></td>
    <% elsif user.state == nil and user.city != nil %>
      <td><%= user.city %></td>
    <% else %>
      <td>---</td>
    <% end %>

    <% if user.phone != nil %>
      <td><%= user.phone %></td>
    <% else %>
      <td>-</td>
    <% end %>

    <td><%= mail_to user.email.to_s, "Email this User", :cc => "michaelomchenry@gmail.com",
        :subject => "Contact from Overflow Member" %></td> 

  </tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:23:22.307

我会添加一个辅助方法，称为 location_display 或类似的方法来处理应显示的所有逻辑。

```
def location_display(user)
  return user.location if user.state && user.city
  return user.state if user.state && user.city.blank?
  return user.city if user.city && user.state.blank?
  "----"
end 
```

然后，在您看来，只需将所有这些行替换为：

```
 <td><%= location_display(user) %></td> 
```

# xml - 根据使用 xsl 的 xml 输出显示不同的图像

> ID：15646517
> 
> 赞同：0
> 
> 时间：2013-03-26T20:14:20.360
> 
> 标签：xml, xslt

我有一个输出的 xml（我从外部部分获得）：

```
...<prop name="day">monday</prop>
<prop name="week">2</prop>... 
```

我想知道是否可以使用 xsl 来显示图像而不是当天的名称？一天的名称将随着 7 个可能的变量而改变，我需要为一周中的每一天显示不同的图像。

所以我希望的结果是这样的：

```
 <img src="mondayimage.jpg">
 <p>Week number 2</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:18:36.023

在 xslt 2.0 中，您可以使用 index-of xpath 函数来生成有效的查找：

```
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output indent="yes"/>

    <xsl:param name="days" select="('monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday')"/>
    <xsl:param name="day-image" select="('image1.png','image2.png','image3.png','image4.png','image5.png','image6.png','image7.png')"/>

    <xsl:template match="/root">
        <root>
            <xsl:apply-templates/>
        </root>
    </xsl:template>

    <xsl:template match="prop[@name='day']">
        <img src="{$day-image[index-of($days, current())]}"/>
    </xsl:template>

    <xsl:template match="prop[@name='week']">
        <p>Week number <xsl:value-of select="."/></p>
    </xsl:template>
</xsl:transform> 
```

[工作示例](http://xsltransform.net/6qM2e25)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:39:41.853

您可以使用 xsl:choose 来处理您的场景。

下面我包括您可以使用的代码片段

```
<xsl:template match="prop">
    <xsl:variable name="day" select="."/>
    <xsl:choose>
        <xsl:when test="$day='monday'">
            <img src="mondayimage.jpg"/>
        </xsl:when>
       <!-- repeat condition for all the days -->
        <xsl:otherwise>
            <p><xsl:value-of select="@name"/> number <xsl:value-of select="."/> </p>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:34:36.800

我建议为每种类型的道具使用不同的模板，以便以后更轻松地进行更改。您还可以在字符串中的“{}”中使用 XSL 代码来获得如下所示的模板：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="root/prop[@name='day']">
        <img src="{.}image.jpg"/>
    </xsl:template>
    <xsl:template match="root/prop[@name='week']">
        <p><xsl:value-of select="concat('Week number ',.)"/></p>
    </xsl:template>
</xsl:stylesheet> 
```

# html - 除非直接访问，否则不会播放 HTML 5 Mobile Safari 视频

> ID：15646526
> 
> 赞同：0
> 
> 时间：2013-03-26T20:14:42.487
> 
> 标签：html, jquery-mobile, safari, mobile-safari, html5-video

我正在使用 jquery mobile 和 video 标签来显示视频。我的视频在所有“桌面”浏览器上都可以正常播放，但是当我在移动 safari (iPhone) 中使用以下代码播放时，它只显示黑色矩形，没有任何控件。

我使用了 html5 示例中常用的视频。（来自[http://www.bigbuckbunny.org](http://www.bigbuckbunny.org)）所以它不应该是编码问题。

当我通过键入其网址[http://myurlofvideo.mp4](http://myurlofvideo.mp4)直接访问视频时，它会在移动 Safari 中正确播放。

是什么导致了问题？

先感谢您！

```
<video width="75%"  id="video1" controls="true"  autoplay="true">
<source src="videos/mov_bbb.mp4" type="video/mp4">
<source src="videos/mov_bbb.webm" type="video/webm">
Your browser does not support the video tag. 
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:56:06.883

我在 iphone 模拟器中尝试了下面的示例，它正在工作，请检查一下。

```
<video width="320" height="240" controls>
   <source src="http://techslides.com/demos/sample-videos/small.mp4" type="video/mp4">  
   Your browser does not support the video tag.
   </video> 
```

它显示视频的预览图像，当您单击它时，它会全屏播放。

# vb.net - 使用 VB.NET 表单上传和下载到 Google Drive

> ID：15646527
> 
> 赞同：3
> 
> 时间：2013-03-26T20:14:44.370
> 
> 标签：vb.net, winforms, google-drive-api

我正在尝试找出一个程序 ( `WinForms`) 的 Visual Basic .net 2008 的代码，该程序可以将一些文件上传到我的谷歌驱动器帐户和从我的谷歌驱动器帐户下载一些文件。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-17T05:55:36.690

花了很长时间才找到一些有效的代码，但我从来没有找到用 vb.net 编写的任何东西。我发现的所有内容都是为 C# 编写的。好吧，在做了一堆转换之后，我能够让一些事情正常工作。然而，它很少，我必须弄清楚其余的。因此，为了让其他人的生活更轻松，这里正在使用 Drive v2 和 OAuth 2.0 的 vb.net 代码：

```
 Imports System.Threading
    Imports System.Threading.Tasks

    Imports Google
    Imports Google.Apis.Auth.OAuth2
    Imports Google.Apis.Drive.v2
    Imports Google.Apis.Drive.v2.Data
    Imports Google.Apis.Services

    Imports Google.Apis.Auth
    Imports Google.Apis.Download

     'Dev Console:
     'https://console.developers.google.com/

     'Nuget command:
     'Install-Package Google.Apis.Drive.v2

    Private Service As DriveService = New DriveService

    Private Sub CreateService()
    If Not BeGreen Then
        Dim ClientId = "your client ID"
        Dim ClientSecret = "your client secret"
        Dim MyUserCredential As UserCredential = GoogleWebAuthorizationBroker.AuthorizeAsync(New ClientSecrets() With {.ClientId = ClientId, .ClientSecret = ClientSecret}, {DriveService.Scope.Drive}, "user", CancellationToken.None).Result
        Service = New DriveService(New BaseClientService.Initializer() With {.HttpClientInitializer = MyUserCredential, .ApplicationName = "Google Drive VB Dot Net"})
    End If
End Sub

    Private Sub UploadFile(FilePath As String)
    Me.Cursor = Cursors.WaitCursor
    If Service.ApplicationName <> "Google Drive VB Dot Net" Then CreateService()

    Dim TheFile As New File()
    TheFile.Title = "My document"
    TheFile.Description = "A test document"
    TheFile.MimeType = "text/plain"

    Dim ByteArray As Byte() = System.IO.File.ReadAllBytes(FilePath)
    Dim Stream As New System.IO.MemoryStream(ByteArray)

    Dim UploadRequest As FilesResource.InsertMediaUpload = Service.Files.Insert(TheFile, Stream, TheFile.MimeType)

    Me.Cursor = Cursors.Default
    MsgBox("Upload Finished")
End Sub

    Private Sub DownloadFile(url As String, DownloadDir As String)
    Me.Cursor = Cursors.WaitCursor
    If Service.ApplicationName <> "Google Drive VB Dot Net" Then CreateService()

    Dim Downloader = New MediaDownloader(Service)
    Downloader.ChunkSize = 256 * 1024 '256 KB

    ' figure out the right file type base on UploadFileName extension
    Dim Filename = DownloadDir & "NewDoc.txt"
    Using FileStream = New System.IO.FileStream(Filename, System.IO.FileMode.Create, System.IO.FileAccess.Write)
        Dim Progress = Downloader.DownloadAsync(url, FileStream)
        Threading.Thread.Sleep(1000)
        Do While Progress.Status = TaskStatus.Running
        Loop
        If Progress.Status = TaskStatus.RanToCompletion Then
            MsgBox("Downloaded!")
        Else
            MsgBox("Not Downloaded :(")
        End If
    End Using
    Me.Cursor = Cursors.Default
End Sub 
```

如果您不知道下载文件的 URL，则可以使用以下代码获取：

```
 Dim Request = Service.Files.List()
    Request.Q = "mimeType != 'application/vnd.google-apps.folder' and trashed = false"
    Request.MaxResults = 2
    Dim Results = Request.Execute
    For Each Result In Results.Items
        MsgBox(Result.DownloadUrl & vbCrLf & Result.Title & vbCrLf & Result.OriginalFilename)
    Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:22:18.137

请查看下面的 Google Drive SDK 网站上的 .NET 示例。

[Google 云端硬盘 SDK 文档](https://developers.google.com/drive/v3/web/quickstart/dotnet)

```
using Google.Apis.Auth.OAuth2;
using Google.Apis.Drive.v3;
using Google.Apis.Drive.v3.Data;
using Google.Apis.Services;
using Google.Apis.Util.Store;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace DriveQuickstart
{
    class Program
    {
        // If modifying these scopes, delete your previously saved credentials
        // at ~/.credentials/drive-dotnet-quickstart.json
        static string[] Scopes = { DriveService.Scope.DriveReadonly };
        static string ApplicationName = "Drive API .NET Quickstart";

        static void Main(string[] args)
        {
            UserCredential credential;

            using (var stream =
                new FileStream("credentials.json", FileMode.Open, FileAccess.Read))
            {
                // The file token.json stores the user's access and refresh tokens, and is created
                // automatically when the authorization flow completes for the first time.
                string credPath = "token.json";
                credential = GoogleWebAuthorizationBroker.AuthorizeAsync(
                    GoogleClientSecrets.Load(stream).Secrets,
                    Scopes,
                    "user",
                    CancellationToken.None,
                    new FileDataStore(credPath, true)).Result;
                Console.WriteLine("Credential file saved to: " + credPath);
            }

            // Create Drive API service.
            var service = new DriveService(new BaseClientService.Initializer()
            {
                HttpClientInitializer = credential,
                ApplicationName = ApplicationName,
            });

            // Define parameters of request.
            FilesResource.ListRequest listRequest = service.Files.List();
            listRequest.PageSize = 10;
            listRequest.Fields = "nextPageToken, files(id, name)";

            // List files.
            IList<Google.Apis.Drive.v3.Data.File> files = listRequest.Execute()
                .Files;
            Console.WriteLine("Files:");
            if (files != null && files.Count > 0)
            {
                foreach (var file in files)
                {
                    Console.WriteLine("{0} ({1})", file.Name, file.Id);
                }
            }
            else
            {
                Console.WriteLine("No files found.");
            }
            Console.Read();

        }
    }
} 
```

希望这对您有所帮助。

# javascript - 删除动态创建的内部选定 div

> ID：15646530
> 
> 赞同：0
> 
> 时间：2013-03-26T20:14:55.173
> 
> 标签：javascript, jquery, html

我一直在环顾四周，但我还没有找到解决方案。我的代码是这样的：

```
$('#addDiv').click( function() {

          var divNum = divNum + 1;
          var newdiv = document.createElement('div');
          var divIdName = 'mydiv';
          newdiv.setAttribute('id',divIdName+divNum);
          newdiv.className = 'imgDiv';

});

$('#cont-div').on('click', function(e) {

        //REMOVE clicked div

}); 
```

我有一个名为“cont-div”的 div，其中包含动态创建的 div。可能解决方案非常简单，但我找不到一种方法来识别“cont-div”中单击的 div，因此我可以将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:19:41.940

您可以使用事件委托，因为`div`s 是动态创建的：

```
$('#cont-div').on('click', 'div', function(e) {

        //REMOVE clicked div
        $(this).remove();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:18:59.420

嗯，您的代码意味着您可能有**多个具有相同 ID 的元素**。不要那样做，那样会让事情变得更难。只需使用您设置的类：

```
$('.imgDiv').on('click', function() {
    $(this).remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:17:29.323

```
$('#cont-div div').on('click', function(e) {

    var clickedDiv = e.target;

    if(clickedDiv != e.currentTarget)
    {
        //Remove the clicked div if it is not the parent.
        $(this).remove();
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:26:21.573

您可以使用 jquery remove() 删除元素。此外，您还需要一个委托来简单地处理动态插入的元素上的事件。

[**工作演示**](http://jsfiddle.net/xb256/)

**html:**

```
<input id="addDiv" type="button" value="click!" /> 
```

**Javascript：**

```
$(function(){
    $('body').on('click','.imgDiv',function(){
        $(this).remove();
    });
}); 
```

**编辑：**缩短代码片段，现在只显示相关部分。

# xslt - XSLT 在模板中获取孙节点属性值

> ID：15646539
> 
> 赞同：0
> 
> 时间：2013-03-26T20:15:18.907
> 
> 标签：xslt

给定这样的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Products>
  <Product someId="1EFAD9659EC">
    <Identifiers>
      <Identifier Id="234532423" Name="globalTradeItemNumber (GTIN)" Value="00671657621322" />
      <Identifier Id="99845898" Name="Internal Supplier Part #" Value="DEL 20 10B015000" />
      <Identifier Id="49348598" Name="MFG Model # (Series)" Value="DEL 20 10B015000" />
      <Identifier Id="439854985" Name="MFG Part # (OEM)" Value="DEL 20 10B015000" />
      <Identifier Id="2349832489" Name="UPC" Value="671657621322" />
    </Identifiers>
  </Product>    
  <Product someId="1EFAD9659EC">
    <Identifiers>
      <Identifier Id="234532423" Name="globalTradeItemNumber (GTIN)" Value="51651518" />
      <Identifier Id="99845898" Name="Internal Supplier Part #" Value="TIM 20 10B015000" />
      <Identifier Id="49348598" Name="MFG Model # (Series)" Value="TOM 20 10B015000" />
      <Identifier Id="439854985" Name="MFG Part # (OEM)" Value="TAK 20 10B015000" />
      <Identifier Id="2349832489" Name="UPC" Value="87468387468" />
    </Identifiers>
  </Product>    
      . . . 
```

我想最终得到类似的东西

```
...
  <Product upc="671657621322"/>
  <Product upc="87468387468"/>
... 
```

但我得到的是

```
...
  <Product upc="true"/>
  <Product upc="true"/>
... 
```

我不断得到我选择的布尔答案，而不是属性的值。我在这里做错了什么愚蠢的事情？这是我正在尝试的 XSLT：

```
...
    <xsl:template match="/">
        <Output>
            <xsl:apply-templates />
        </Output>
    </xsl:template>

    <xsl:template match="Product">
        <xsl:variable name="productCode" select="./Identifiers/Identifier/@Name='UPC'"/>
        <Product upc="{$productCode}">
        </Product>
    </xsl:template>
... 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:33:41.590

您使用了错误的 xpath 选择。利用：

```
select="Identifiers/Identifier[@Name='UPC']/@Value" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:36:15.720

如果您只对这两个节点值感兴趣，请将它们与模板匹配：

```
<xsl:template match="Product/Identifiers/Identifier[@Name='UPC']">
    <xsl:variable name="productCode" select="@Value"/>
    <Product upc="{$productCode}">
    </Product>
</xsl:template> 
```

# javascript - 过滤我的数据会导致 y 轴搞砸

> ID：15646547
> 
> 赞同：2
> 
> 时间：2013-03-26T20:15:52.430
> 
> 标签：javascript, d3.js

我正在使用 d3 创建一个柱形图。我有 263 个数据点，显示所有列会使图表过于拥挤。为了过滤数据点，我只需抓取每第 n 个项目（从数组的反向开始，因此我确保获得最新的数据点）。

我将 y 轴刻度值定义为包含*未过滤*数据集的最小值和最大值，因此用户可以看到数据集的*实际*最小值和最大值。我在过滤数据之前计算最小值和最大值：

```
var v = new Array();
data.forEach(function (d) {
    d.date = parseDate(d.date);
    d.close = +d.close;
    v.push(d.close); // v holds ALL our values...before we filter them
});
yAxisValues = [Math.min.apply(null, v),Math.max.apply(null, v)];

if(data.length > 100){ // make it so that the chart isn't as crowded

        var len = data.length;
        var n = Math.round(len/100); // ideally, we want no more than 100 items

        var tempData = [];
        data = data.reverse();

        for( var k = 0; k < len; k += n ){

            tempData.push( data[ k ] );
        }
        data = tempData;
        data = data.reverse();
    } 
```

但是，现在我的 y 轴搞砸了，-0.02 显示在 x 轴下方。我做错了什么？我的[小提琴](http://jsfiddle.net/gLnkf/1/)。（要查看 y 轴表现正常，只需注释掉我过滤数据的部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:02:51.440

您正在过滤之前创建 Y 轴**值**，但您仍在过滤数据上创建**比例：**

```
var y = d3.scale.linear().range([height - 5, 5]);
// here is where it look at the min/max of the filtered data rather than the min/max of the original
y.domain(d3.extent(data, function (d) {
    return d.close;
}));
var yAxis = d3.svg.axis().scale(y).orient('left').tickValues(yAxisValues); 
```

如果在过滤之前移动这部分应该没问题。

# android - Android Viewpager OutOfMemoryError 片段

> ID：15646548
> 
> 赞同：0
> 
> 时间：2013-03-26T20:15:59.083
> 
> 标签：android, android-viewpager

其中每个页面都是一个片段，其中设置了不同的图像作为背景。因为我需要确保它平滑滚动而没有延迟，所以我已将 offscreenpage 设置为 20（viewpager 中的项目数），但我经常收到此错误：

```
 java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我已经将图像压缩到最大（压缩 JPEGS），知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:35:08.600

在 Android 开发者网站的培训部分有一篇不错的文章：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html) ...它向您展示了如何在您的 android 应用程序中使用缓存机制。你可以在你的`ViewPager`实现中采用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:24:39.437

当您切换片段时，我会动态加载/卸载背景图像。它们应该加载得足够快以至于不会注意到，特别是如果您使用动画来隐藏过渡（淡入/淡出）。或者更好的是，加载 4 或 5 个（每个方向 2 个），这样只有在快速滚动时才会看到渐变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:33:24.013

位图大小取决于图像的像素密度。尝试减少背景图像 MPx。

# email - Zimbra 升级到 8.0.3 后无法从手机发送电子邮件

> ID：15646549
> 
> 赞同：0
> 
> 时间：2013-03-26T20:16:00.600
> 
> 标签：email, mobile, zimbra, emailrelay

我们最近将 Zimbra FOSS 电子邮件服务器升级到了 8.0.3 版，因为升级后所有手机（Android 和 iPhone）都会出现错误“收件人“email@domain.com”被服务器拒绝，因为它不允许中继。

我找不到任何看起来已经改变的东西。有谁知道这是否是版本 8.0.3 的已知问题？

感谢您对这个问题的任何帮助......我没有任何运气来修复它，甚至找不到任何与它真正相关的东西......

*编辑*

```
As an update:  I found the following information in my Zimbra.log...

Mar 26 16:58:21 server postfix/smtpd[22783]: NOQUEUE: reject: RCPT from 29.sub-174-237-227.myvzw.com[174.237.227.29]: 554 5.7.1 Service unavailable; Client host [174.237.227.29] blocked using zen.spamhaus.org; http://www.spamhaus.org/query/bl?ip=174.237.227.29; from=<me@server.net> to=<me@server.net> proto=ESMTP helo=<[10.246.232.147]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:38:33.743

在研究了上述编辑后，我们发现问题（显然）与 SpamHaus.org 阻止通过手机提供商将电子邮件中继到 Zimbra 有关。我关闭了 SpamHaus，现在一切正常...

希望对其他人有这个问题有所帮助...

# git - 使用两个不同的 git 服务器时如何使用多个 SSL 密钥？

> ID：15646551
> 
> 赞同：2
> 
> 时间：2013-03-26T20:16:07.940
> 
> 标签：git, ssl-certificate, gitblit

我目前在私人服务器上设置了[GitBlit](http://gitblit.com)的私人安装，用于私人回购。

我还必须为我们的公司项目使用公司安装的 GitBlit。

在一个完美的世界里，我将能够使用[ssh](https://help.github.com/articles/generating-ssh-keys)（就像 GitHub 一样）并为每个服务器配置不同的 ssh 密钥。

不幸的是，GitBlit 选择使用 SSL 而不是 SSH。为 git 安装单个 SSL 证书非常简单。

```
git config --global http.sslKey path/to/username.key 
```

但是在设置全局属性时，似乎我只能有一个键。解决这个问题的唯一方法是覆盖`GIT_SSL_KEY`项目中的，还是有什么方法可以在全局设置中使用两个不同的 SSL 密钥（IE：指向`http:sslKey`文件`.config`而不是`.key`文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:09:45.797

您可以通过删除`--global`参数以不同方式配置项目，并在您要配置的项目的文件夹中运行它。

例如：

1.  将公司 SSL 密钥配置为全局默认密钥

    ```
    git config --global http.sslKey path/to/company.key 
    ```

2.  使用您的私钥配置每个私人仓库

    ```
    cd /my/private/repo
    git config http.sslKey path/to/private.key 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:06:31.427

> 解决此问题的唯一方法是覆盖项目中的 GIT_SSL_KEY

这是一种方式，另一种是设置*本地*配置`http.sslKey`值（即`http.sslKey`每个 repo 一个）

# .net - 如何检查文件名是否与通配符模式匹配？

> ID：15646555
> 
> 赞同：3
> 
> 时间：2013-03-26T20:16:14.273
> 
> 标签：.net

我知道我能做到

```
Directory.GetFiles(@"c:\", "*.html") 
```

我将获得与 *.html 文件模式匹配的文件列表。

我想做相反的事情。给定文件名 abc.html，我想要一种方法来告诉我该文件名是否与 *.html 模式匹配。例如

```
class.method("abc.html", "*.html") // returns true
class.method("abc.xml", "*.html") // returns false
class.method("abc.doc", "*.?oc") // returns true
class.method("Jan24.txt", "Jan*.txt") // returns true
class.method("Dec24.txt", "Jan*.txt") // returns false 
```

该功能必须存在于 dotnet 中。我只是不知道它暴露在哪里。

将模式转换为正则表达式可能是一种方法。然而，似乎有很多边缘情况，可能比它的价值更麻烦。

注意：问题中的文件名可能还不存在，所以我不能只包装 Directory.GetFiles 调用并检查结果集是否有任何条目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T20:26:39.337

最简单的方法是将通配符转换为正则表达式，然后应用它：

```
public static string WildcardToRegex(string pattern)
{
  return "^" + Regex.Escape(pattern).
  Replace("\\*", ".*").
  Replace("\\?", ".") + "$";
} 
```

但是如果由于某种原因你不能使用正则表达式，你可以编写自己的通配符匹配实现。你可以在[这里](http://www.codeproject.com/Articles/188256/A-Simple-Wildcard-Matching-Function?msg=3872751#xx3872751xx)找到一个。

这是从 python 实现移植的另一个（编辑 2020-07：[固定 IndexOutOfRangeException](https://dotnetfiddle.net/sAgs2l)）：

```
using System;

class App
{
  static void Main()
  {
    Console.WriteLine(Match("abc.html", "*.html")); // returns true
    Console.WriteLine(Match("abc.xml", "*.html")); // returns false
    Console.WriteLine(Match("abc.doc", "*.?oc")); // returns true
    Console.WriteLine(Match("Jan24.txt", "Jan*.txt")); // returns true
    Console.WriteLine(Match("Dec24.txt", "Jan*.txt")); // returns false  
  }

  static bool Match(string s1, string s2)
  {
    if (s2=="*" || s1==s2) return true;
    if (s1=="" || s2=="") return false;

    if (s1[0]==s2[0] || s2[0]=='?') return Match(s1.Substring(1),s2.Substring(1));
    if (s2[0]=='*') return Match(s1.Substring(1),s2) || Match(s1,s2.Substring(1));
    return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:39:50.600

I don't think `searchPattern` of `GetFiles` does support full regex. Below code can be an alternative(but not very performant)

```
bool IsMatch(string fileName,string searchPattern)
{
    try
    {
        var di = Directory.CreateDirectory("_TEST_");
        string fullName = Path.Combine(di.FullName, fileName);
        using (File.Create(fullName)) ;
        bool isMatch = di.GetFiles(searchPattern).Any();
        File.Delete(fullName);
        return isMatch;
    }
    catch
    {
        return false;
    }
} 
```

# performance - 为什么要遍历哈希图 O(c/n)？

> ID：15646560
> 
> 赞同：0
> 
> 时间：2013-03-26T20:16:46.370
> 
> 标签：performance, hashmap

有很多链接告诉我哈希图的大 O 是：

```
get   O(1)
add   O(1)
contains O(1)
next item O(c / n)    c = table capacity (number of buckets) n = size 
```

为什么 get/add/contains 是 O(1) 有点明显，但我想知道为什么迭代是 O(c/n)。

当我在做的时候，我很想知道为什么大 O 是 ConcurrentHashmap、TreeMap 等的。

谁有好的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:53:15.230

链接的论文*没有*说迭代是`O(c/n)`. 它说“下一个条目”是`O(c/n)`. 迭代是每个 n 的“下一个条目”。

首先，请注意这`c (capacity) > n (entries)`是一个不变量 - 并且 c 是 n - so `O(c/n)`>的某个函数`O(1/n)`。（注意：根据评论，我并不完全确定我关于 HashMap 实现中的不变量的断言，该实现使用链来解决冲突。）

因此，这实际上说明的是，在标准 HashMap 中，在执行“下一个条目”时查看的一些存储桶是*空*的，必须被跳过。因此，“下一个条目”的界限是“超过`O(1/n)`”。但是，在阅读此边界时要小心，因为它*并不*意味着迭代越快越快`n`——它只是根据总`n`条目来描述“下一个条目”的边界。

由于迭代实际上只是所有 n 的“下一个条目”，因此对于 HashMap 的迭代：

```
O(1/n * n) -> O(n)
O(c/n * n) -> c*O(n) -> ~O(n) 
```

（因为它`c`是一个函数，在不同的情况下将它作为一个常数拉`n`出来*可能*会有点误导；因此是曲线。）

# qt - Qt区分两个键盘？（一个实际上是RFID阅读器）

> ID：15646563
> 
> 赞同：6
> 
> 时间：2013-03-26T20:16:54.230
> 
> 标签：qt, rfid

我有一个简单的 RFID 阅读器，它实际上充当键盘，并在最后返回带有返回字符的读取值。

我希望我的应用程序只听单个（不同的）键盘设备（我会以某种方式选择/区分）并为我获取读取值，而不是焦点在表单/应用程序上的仪表。

应用程序是用 Qt C++ 编写的

我想知道这是否可能以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-02T09:37:00.107

不知道这是否有帮助，但我们在检测来自条形码扫描仪的输入方面遇到了类似的挑战。扫描仪只是快速“输入”了一些数字；一些扫描仪以控制字符结束它，但由于它不是通用的，我们甚至不能依赖它。

我注意到`QEvent::KeyboardLayoutChange`当条形码扫描仪开始输入时会触发 a ，但我不确定这是否适用于所有可能的场景 - 但您可能需要检查一下。

我们最终安装了一个应用程序范围的事件过滤器`QApplication::installEventFilter`（它有明显的缺陷，但如果您需要一个非常通用的解决方案，您可能会对类似的东西感兴趣。此外，如果 RFID 输入总是返回一个控制字符，这可能会大大简化这种方法。`QEvent::ShortcutOverride``QEvent::KeyPress`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:39:58.650

在 WinAPI 的帮助下，这对于 Windows 操作系统是可能的。我从来没有使用过 QT，所以我不知道 QT 类中是否存在一些包装器用于此目的。您应该使用原始输入。检查此链接以获取快速参考： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms645536](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645536%28v=vs.85%29.aspx)`Using Raw Input` (v=vs.85).aspx（下面有示例）

也看看这个项目[http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)我理解它是用 C# 写的，但它可能会有所帮助

# post - 为什么Codeigniterload Input类不能，也找不到文件

> ID：15646564
> 
> 赞同：0
> 
> 时间：2013-03-26T20:17:01.200
> 
> 标签：post, include, codeigniter-2

我正在尝试使用 codeigniters 输入类来使用 post 方法。现在，我尝试将它加载到控制器和自动加载器中，但没有运气！我得到的错误是

```
Unable to load the requested file: helpers/input_helper.php 
```

在我试图通过查看我的代码寻找 Input 来找到它但 IDE 找不到任何东西之后。我只想本质上使用

```
$this->input->post('varname'); 
```

没什么疯狂的。那么，默认情况下，这个文件是否不包含在 codeigniter 中？几天前我从 github 获得了最新版本。我对codeigniter很陌生，所以如果我说一些愚蠢的话，请原谅我。一个解释将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:23:05.200

您根本不需要加载此帮助程序：[Input Class Docs](http://ellislab.com/codeigniter/user-guide/libraries/input.html)

> 注意：该类由系统自动初始化，无需手动初始化。

尝试删除您在控制器或其他地方自动加载的任何尝试，然后再试一次，看看是否有效。

# jquery - 许多带有大字符串的模态窗口

> ID：15646568
> 
> 赞同：1
> 
> 时间：2013-03-26T20:17:22.600
> 
> 标签：jquery, asp.net-mvc, asp.net-ajax, modal-dialog

在我使用 twitter 引导程序的 .Net MVC 应用程序中，我有一个绘制许多字段的视图。每个字段的值是一个 100 个字符长的缩短字符串。原始字符串总是超过 1000 个字符长（有时是 100k 个字符长）。

```
string long = result[i]; // really long string that's over 1000 characters long
string short = long.Substring(0, 99);
<section>
    <div class="row-fluid">
        <div class="span12">@short</div>
    </div>    
</section> 
```

对于我绘制的每个字段，我需要有一个链接，用户可以单击该链接以显示一个模式窗口，在该窗口中显示非缩短文本。

因此，我可能希望在同一页面上有 100 个指向模态窗口的链接，并且每个模态窗口都将显示自己的文本。

像这样的东西：http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)

但我的问题是：

1）我将在同一页面上有很多模式对话框，所以我想我需要为每个对话框设置一个唯一的 ID。

2）我将不得不将长文本（“字符串长”）传递给每个模式对话框。也许当我在客户端代码中绘制它们时我可以做到这一点，或者我可以通过将长文本发送到我的控制器来做到这一点。我不确定最好的方法是什么。

我一直在看这个：[ASP.NET MVC modal dialog/popup best practice](https://stackoverflow.com/questions/861235/asp-net-mvc-modal-dialog-popup-best-practice)，但我不太明白选中的答案指的是什么（“Lunchy 的对话框建议”？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:18:39.957

一种潜在的策略是让 html 仅用于一个模式对话框，并将字符串的所有长版本都保存在某种 javascript 数据结构中，例如哈希数组或其他东西。这将使您的页面因数百个模式对话框而被 HTML 臃肿

然后，当用户单击“显示长版本”链接时 - 您有一些查询将模式对话框中的内部文本替换为从哈希数组中检索到的字符串的适当“长版本”，然后显示对话。

如果您想变得更高级 - 您只需在页面中加载字符串的短版本，当用户单击链接时，它将通过 AJAX 检索字符串的“长版本”。

Twitter Bootstrap 带有一个模态对话框，请参见[此处](http://twitter.github.com/bootstrap/javascript.html#modals)，而 JQuery 具有一些将 HTML 插入元素的方法，请参见[此处](http://api.jquery.com/html/)。

如果您查看 Twitter Bootstrap Modal Dialog 的文档，您会看到它可以选择使用该`remote:`选项通过 AJAX 远程加载数据。

这是一个粗略的示例，说明如何使用 Twitter 引导程序通过 AJAX 执行此操作

控制器

```
public ActionResult Index()
{
    var model = GetLongStrings(); 
    return View(model);
}

public ActionResult FindLongString(string shortString)
{
    var longStrings = GetLongStrings();
    var longStringToReturn = longStrings
                            .FirstOrDefault(x => x.StartsWith(shortString));

    return Content(longStringToReturn);
} 
```

然后，您的视图看起来像这样

```
@foreach (var result in results)
{
    var shortString = result.Substring(0, 5);
    <section>
        <div class="row-fluid">
            <div class="span12">@shortString</div>
            @Html.ActionLink("See long version", "FindLongString", 
                             new { shortString = shortString }, 
                             new { data_toggle = "modal", 
                                   data_target = "#myModal", 
                                   aria_hidden = "true" })
        </div>
    </section>
}

<div id="myModal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
    </div>
    <div class="modal-footer">
        <a href="#" class="btn"  data-dismiss="modal">Close</a>
    </div>
</div> 
```

ActionLink 中的数据属性很重要，因为它们指示 Twitter Bootstrap 为您的对话使用哪些选项。

如果每个字符串都有一个 ID，则可以改进代码示例 -`FindLongString`可以接受一个 `int 作为参数，这意味着您可以在 ActionLink 中传递它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:33:25.770

StanK 的答案是您所需要的，所以如果它对您有帮助，请毫不犹豫地接受它。

不过，我只是有一个观察结果：通过短字符串检索长字符串并不是很可靠。我的意思是理论上所有字符串都可以以相同的 100 个字符开头（所有字符串甚至可以相同:)）。如果有 2 个字符串以相同的 100 个字符开头，则无论单击哪个短字符串，都只会返回第一个字符串。

一个更可靠的方法是为每个字符串提供一个唯一的标识符。这可以是任何东西，只要它们是独一无二的。这取决于您的服务器端逻辑。

*   如果字符串来自关系数据库，您通常可以使用表的主键（或任何唯一键。最好在大多数表上使用唯一的增量 id）。这种方法还可以产生非常快速和干净的数据库查询。但请记住，通过这种方式，您可以从数据库结构中揭示您可能想要的更多信息。
*   如果字符串在有序列表中并且顺序是固定的，则可以使用元素的索引。

因此，采用 StanK 的示例代码并为其引入数据库连接（在我的例子中是实体框架，但这可以是任何东西）：

控制器动作：

```
public ActionResult Index()
{
    using (Context ctx = new MyEntities())
    {
        var model = ctx.Strings.Select(o => new { Id = o.Id, longString = o.String });
        return View(model);
    }

}

public ActionResult FindLongString(string id)
{
    using (Context ctx = new MyEntities())
    {
        var record = ctx.Strings.SingleOrDefault(o => o.Id == id);
        if (record == null)
        {
            throw new HttpException(404, "The long string cannot be found");
        }
        else
        {
            return record.String;
        }
    }
} 
```

风景：

```
@foreach (var result in results)
{
    var shortString = result.String.Substring(0, 99);
    <section>
        <div class="row-fluid">
            <div class="span12">@shortString</div>
            @Html.ActionLink("See long version", "FindLongString", 
                             new { id = result.Id }, 
                             new { data_toggle = "modal", 
                                   data_target = "#myModal", 
                                   aria_hidden = "true" })
        </div>
    </section>
}

<div id="myModal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
    </div>
    <div class="modal-footer">
        <a href="#" class="btn"  data-dismiss="modal">Close</a>
    </div>
</div> 
```

# jquery - jQuery UI Sortable - 禁用横向移动

> ID：15646569
> 
> 赞同：6
> 
> 时间：2013-03-26T20:17:24.390
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

使用 jQuery UI 的可排序功能，用户可以向任何方向移动 div。我只希望用户能够上下拖动它。我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-26T20:20:58.977

具体到可排序：

[http://api.jqueryui.com/sortable/#option-axis](http://api.jqueryui.com/sortable/#option-axis)

`$( ".selector" ).sortable({ axis: "y" });`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T20:22:31.047

尝试这样的事情：

```
$('#items_wrapper').sortable({
    axis: 'y',
    containment: 'parent',
     ...
     ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:21:30.307

您将使用轴方法。[请参阅此处](http://api.jqueryui.com/sortable/#option-axis)的 api 。

# php - 在 php Arrayss 中排序

> ID：15646575
> 
> 赞同：0
> 
> 时间：2013-03-26T20:18:02.533
> 
> 标签：php, mysql, arrays

我的 sql 表由 ID、书名、流派和评级组成。目前我的 sql 表中的数组看起来像这样（输出）

```
Array ( 
   [book] => Array ( 
        [0] => Array
              ( [0] => 1 
                [1] => book one 
                [2] => Fantasy/Horror 
                [4] => 8.9 )
        [1] => Array ( 
                [0] => 2 
                [1] => book two 
                [2] => Comedy 
                [4] => 8.3 ) ) ) 
```

我想通过 ID 将这个数组排序到 DESC 也可以在将来按标题。数组变量是`$book`所以我写的`ksort($book)`也因为某种原因尝试过`arsort` 它不起作用？是因为数组吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:52:54.277

**如果你能够：** 使用 SQL 排序，因为它的速度和灵活性（在适当的地方使用 db-engine） 如果你真的需要，只使用数组功能！:-) 做类似的事情：

```
SELECT ID,Book name,Genre, ratings ORDER BY ID DESC 
```

**或者**

***如果您仍然必须使用数组排序***，请在 PHP 中使用 usort()：

```
<?php
//Book array
$bookArray['book'][0] = array(2, 'book one', 'Fantasy/Horror', 8.9);
$bookArray['book'][1] = array(1, 'book two ', 'Comedy', 8.3);

function sortByIndex($a, $b) {
    return $a[0] - $b[0];
}

usort($bookArray['book'], 'sortByIndex');

echo 'RESULT=' . print_r($bookArray,true);

?> 
```

输出结果：RESULT=Array ( [book] => Array ( [0] => Array ( [0] => 1 [1] => book two [2] => Comedy [3] => 8.3 ) [ 1] => 数组（[0] => 2 [1] => 第一本书 [2] => 奇幻/恐怖 [3] => 8.9）））

书二在这里首先出现，因为在我的示例中，我将第一个索引设置为 1，值为“书二”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:39:44.617

The easiest way is to add this to your SQL statement at the end:

```
ORDER BY id DESC 
```

Also if you really want to know how to do it in PHP you would do it this way:

```
function cmp($a, $b)
{
    if ($a[0] == $b[0]) {
        return 0;
    }
    return ($a[0] > $b[0]) ? -1 : 1;
}

usort($array['book'], "cmp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:40:46.317

只是您需要更改您的 Select 语句。应该是这样的——

```
select id,bookname,genre,ratings from yourtable ORDER BY id DESC,bookname; 
```

# android - 下载 HTML NullPointer 崩溃

> ID：15646578
> 
> 赞同：0
> 
> 时间：2013-03-26T20:18:15.253
> 
> 标签：android, httpclient

输入网址后我的程序崩溃了。出于测试目的，我输入`gethtml`可变id 的 URL`t`是“ [http://www.codebundle.net](http://www.codebundle.net) ”。该程序是为 API 9 及更高版本构建的。

```
package net.codebundle.gethtml;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.os.StrictMode.ThreadPolicy;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
    String s;
    Button b;
    EditText t;
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b = (Button) findViewById(R.id.gethtml);
        t = (EditText) findViewById(R.id.website);
        tv = (TextView) findViewById(R.id.output);
        ThreadPolicy tp = ThreadPolicy.LAX;
        StrictMode.setThreadPolicy(tp);
        b.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onClick(View v) {
    s = t.getText().toString();
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(s);
    HttpResponse response = null;
    String html = "";
    InputStream in = null;

    try {
        response = client.execute(request);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

            try {
        in = response.getEntity().getContent();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    StringBuilder str = new StringBuilder();
    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            str.append(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    try {
        in.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
    html = str.toString();
    //tv.setText(html);
    }

} 
```

任何人都知道为什么它在输入输入后崩溃。对不起，如果这写得不好，英语不是第一语言。发生崩溃的部分的 logcat 日志（红色）在这里[http://pastebin.com/RnSmqmY2](http://pastebin.com/RnSmqmY2)

# java - 使用 bouncycastle 在 java 中导入 PEM 加密密钥对

> ID：15646582
> 
> 赞同：2
> 
> 时间：2013-03-26T20:18:30.843
> 
> 标签：java, import, rsa, bouncycastle, pem

我正在编写一个使用 RSA 执行各种任务的程序。
我知道如何生成密钥对并将其写入文件，但我无法将加密的 (AES-256-CFB) 密钥对加载到 KeyPair 对象。

所以问题是：**如何使用 BouncyCastle 库将加密的 PEM 密钥对加载/解密为 java.security.KeyPair 对象？**

谢谢。

生成/导出代码：

```
public void generateKeyPair(int keysize, File publicKeyFile, File privateKeyFile, String passphrase) throws FileNotFoundException, IOException, NoSuchAlgorithmException, InvalidKeySpecException, NoSuchProviderException {
    SecureRandom random = new SecureRandom();
    KeyPairGenerator generator = KeyPairGenerator.getInstance("RSA", "BC");

    generator.initialize(keysize, random);

    KeyPair pair = generator.generateKeyPair();
    Key pubKey = pair.getPublic();

    PEMWriter pubWriter = new PEMWriter(new FileWriter(publicKeyFile));
    pubWriter.writeObject(pubKey);
    pubWriter.close();
    PEMWriter privWriter = new PEMWriter(new FileWriter(privateKeyFile));
    if (passphrase == null) {
        privWriter.writeObject(pair);
    } else {
        PEMEncryptor penc = (new JcePEMEncryptorBuilder("AES-256-CFB"))
                .build(passphrase.toCharArray());

        privWriter.writeObject(pair, penc);
    }
    privWriter.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-27T21:56:05.560

我假设您已将 BouncyCastle 设置为安全提供程序，例如：

```
Security.addProvider(new BouncyCastleProvider()); 
```

您提供的代码创建了两个密钥文件，一个用于私钥，一个用于公钥。但是，公钥隐含在私钥中，因此我们只需要读取私钥文件即可重构密钥对。

那么主要的步骤是：

*   创建一个`PEMParser`从密钥文件中读取。

*   `JcePEMDecryptorProvider`使用解密密钥所需的密码创建一个。

*   创建 a`JcaPEMKeyConverter`以将解密的密钥转换为`KeyPair`.

```
KeyPair loadEncryptedKeyPair(File privateKeyFile, String passphrase)
      throws FileNotFoundException, IOException {
  FileReader reader = new FileReader(privateKeyFile);
  PEMParser parser = new PEMParser(reader);
  Object o = parser.readObject();

  if (o == null) {
    throw new IllegalArgumentException(
        "Failed to read PEM object from file!");
  }

  JcaPEMKeyConverter converter = new JcaPEMKeyConverter();

  if (o instanceof PEMKeyPair) {
    PEMKeyPair keyPair = (PEMKeyPair)o;
    return converter.getKeyPair(keyPair);
  }

  if (o instanceof PEMEncryptedKeyPair) {
    PEMEncryptedKeyPair encryptedKeyPair = (PEMEncryptedKeyPair)o;

    PEMDecryptorProvider decryptor =
        new JcePEMDecryptorProviderBuilder().build(passphrase.toCharArray());

    return converter.getKeyPair(encryptedKeyPair.decryptKeyPair(decryptor));
  }

  throw new IllegalArgumentException("Invalid object type: " + o.getClass());
} 
```

示例用法：

```
File privKeyFile = new File("priv.pem");
String passphrase = "abc";

try {
  KeyPair keyPair = loadEncryptedKeyPair(privKeyFile, passphrase);
} catch (IOException ex) {
  System.err.println(ex);
} 
```

参考：用于键解析的 BouncyCastle 单元测试（[链接](https://github.com/bcgit/bc-java/blob/master/pkix/src/test/java/org/bouncycastle/openssl/test/ParserTest.java#L525)）。

# silverlight-5.0 - Silverlight Pivotviewer 可以处理 3 级语义缩放吗？

> ID：15646584
> 
> 赞同：1
> 
> 时间：2013-03-26T20:18:48.517
> 
> 标签：silverlight-5.0, pivotviewer

我可以让 2 个级别的 PivotViewerItemTemplate 工作得很好，但不是三个。

如果我将一个模板设置为 MaxWidth=130，下一个模板设置为 MaxWidth=400，然后第三个没有 MaxWidth，则第二个级别开始过渡到第 3 个大约 170 像素，并且仅在 280 像素处不再可见。我希望看到第 2 层，直到它有 400 像素宽。

关于我在这里做错了什么的任何提示？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:15:37.283

您的 MaxWidth 需要是 2 的幂：32、64、128 等。然后您可以拥有与幂一样多的级别 :) 我在这里写了一篇文章来更详细地解释它[http://www.rogernoble.com /2012/04/02/picking-maxwidth-for-pivotviewer-semantic-zoom](http://www.rogernoble.com/2012/04/02/picking-maxwidth-for-pivotviewer-semantic-zoom)

# facebook - 如何制作个人脸书应用

> ID：15646592
> 
> 赞同：0
> 
> 时间：2013-03-26T20:19:16.250
> 
> 标签：facebook, facebook-graph-api

我正在尝试制作一个可以在我自己的时间轴上执行某些操作的 facebook 应用程序。我无法理解facebook自己的手册，所以我不太确定那里的工作方式，所以我希望有人能在这里澄清一下。我不希望任何人安装该应用程序或以某种方式滥用它以我的名义在我的时间轴上发布内容。如果可能的话，我应该采取什么措施来防止这些事情发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:55:46.237

除了您所学的之外，您还可以使用 php-sdk 进行身份验证，然后检查访问者用户 ID。
*“当我们发现您正在尝试完成的事情时，我将在代码中进行编辑，明智地采取行动。”*

## php SDK 示例。

```
 // init php sdk here.  
        // check if we have a user
        // call api to get info about use
$user_profile = $facebook->api('/me');  

        // if we have a user, we can use that user id as a wrapper to filter content. 

if($user_profile[id]==='000000000'){ 
        // 000000000 is your facebook id for this example.
        // i am logged in, and only i can see this.
        // get some info, make a few posts, add photos etc; here.    
} 
```

## 卷曲示例

当您 curl 'me' 时，它会确保它是当前会话用户，然后当您将其与您的实际用户 ID 进行比较时，您可以选择只有您可以看到和使用的“可以这么说”的内容。卷曲到 me 连接只需要创建门，你可以在你知道是你做之后做所有其他的 curl 调用。

```
http://anotherfeed.com/curl.api.php?objid=me 
```

这是一个示例，当我卷曲我时，它会查找已登录的用户，如果有一个*我排除在此示例*中的访问令牌，它将返回一个包含我的“我”信息的数组，包括我的 id。

我将使用硬编码`$me=$curlresults[id]`，这是会话调用返回的我的用户 ID。

我只是简单地门

```
$me=$curlresults[id]
if($me==='myfacebookuserid'){
// do my other curl calls here, i know only i can see this.
} 
```

## **完整的 cURL 示例。**

1.  从下面的令牌工具获取您的应用程序的用户访问令牌，将其存储在安全的地方，以便您可以通过 url 参数或会话参数传递它...... [https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)
2.  在上面写着 myfacebookuserid 的地方添加您的 facebook 用户 ID
3.  为了确保这一点，您需要使用 post、get 或 session 传递访问令牌。
4.  对于这个例子，我们将使用 get 方法。

`yourpage.php?user_token=youruseraccesstoken`在这个例子中是如何传递的。

* * *

```
$access_token = $_GET['user_token'];
$build = 'https://graph.facebook.com/me?'.$access_token.'';
function GetCH($url){
$ch=null;
if(!$ch){
$ch = curl_init();
}
curl_setopt($ch, CURLOPT_URL, "".$url."");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FORBID_REUSE, true);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($ch, CURLOPT_TIMEOUT, 20);
curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);    
$return=curl_exec($ch);
 if(!curl_errno($ch)){
return $return;
 }else{
$fb_fail=curl_error($ch);
return $fb_fail;
}
curl_close($ch);
unset($ch);
};
$returned=GetCH($build);
$locs=json_decode($returned, true);
$meid=$locs[id];
if($meid==='myfacebookuserid'){
    // do my other curl calls here, i know only i can see this.
} 
```

# image - 从图像代码中分离文本和图像区域

> ID：15646596
> 
> 赞同：0
> 
> 时间：2013-03-26T20:19:22.657
> 
> 标签：image, image-processing, imagej

从图像中分离图像和文本区域是一个非常古老的问题，并且已经写了很多关于它的论文。最近的其中之一可以在[这里](http://www.cyut.edu.tw/~ijase/2006/4-3%28Microsoft%20Word%20-%20011-006-8%29.pdf)找到。

但我没有找到任何现有的代码。在实施之前，我认为询问 SO 社区是否有人知道现有的可能是个好主意。

如果您知道，请指点我现有的代码（最好是 Java）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:51:07.907

我还没有完全阅读您的 PDF，但从我所见，您可以在 AForge.Net 中找到用 C# 实现的类似算法。将代码转换为 Java 应该没什么大不了的。

请参阅[Horizo​​ntalRunLengthSmoothing 类](http://www.aforgenet.com/framework/docs/html/f61451b0-4f33-9f34-ca89-fb95ca040614.htm "Horizo​​ntalRunLengthSmoothing 类")和[VerticalRunLengthSmoothing 类](http://www.aforgenet.com/framework/docs/html/249b205e-b7e5-5a70-0eef-65efa5e61da8.htm "VerticalRunLengthSmoothing 类")

# c# - 测试调用函数是否锁住当前线程

> ID：15646597
> 
> 赞同：0
> 
> 时间：2013-03-26T20:19:29.927
> 
> 标签：c#, multithreading, tdd

我正在编写一个向串口发送一些命令并从中接收一些响应的应用程序。在某些时候，当某些命令被发送到端口调用线程应被锁定，直到收到一些响应。所以我试图为它写一个失败的测试。

问题是任何时候都不能完成测试才能通过！！！！！！

那么解决方案是什么？

编辑：我可以在我的测试中创建另一个线程，并在等待两秒钟后检查线程是否未完成，但它违反了简单性并及时进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:22:07.540

尝试获取锁一段时间，您认为这是不合理的，之后您停止尝试获取锁并失败？

使用类似[Monitor.TryEnter](http://msdn.microsoft.com/en-us/library/system.threading.monitor.tryenter.aspx)

# jsf-2 - 下载链接codedKeyStore

> ID：15646599
> 
> 赞同：1
> 
> 时间：2013-03-26T20:19:33.733
> 
> 标签：jsf-2, download

我已经通过 API 生成了一个 PKCS12 密钥库，但是该过程的返回是一个 KeyStore 对象。我需要发送，在客户端发送申请时直接到浏览器下载。

我怎样才能做到这一点？

我正在使用 java 和 jboss 5AS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:07:12.777

您可以使用[`KeyStore#store()`](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html#store%28java.io.OutputStream,%20char%5B%5D%29)将其写出到`OutputStream`.

```
keyStore.store(outputStream, password); 
```

基本上就是这样。`OutputStream`可能是 HTTP 响应之一。有关如何在 JSF 中提供文件下载的通用启动示例，其中您需要集成此行，请参阅此答案：[如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)使用内容[类型](http://en.wikipedia.org/wiki/Internet_media_type).`application/x-pkcs12`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:51:34.067

这是代码：

```
public void cadastrar () throws Exception
{       
    byte[] encodedKeyStore = controlador.cadastrar(certificadoModel);

    java.security.KeyStore keyStore = java.security.KeyStore.getInstance("PKCS12");
    keyStore.load(new ByteArrayInputStream(encodedKeyStore), certificadoModel.getPassword().toCharArray());

    FacesContext fc = FacesContext.getCurrentInstance();
    ExternalContext ec = fc.getExternalContext();

    ec.responseReset(); 
    ec.setResponseContentType("application/x-pkcs12"); 
    //ec.setResponseContentLength(contentLength); 
    ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + certificadoModel.getUsername() + ".p12" + "\""); 

    OutputStream output = ec.getResponseOutputStream();
    keyStore.store(output, certificadoModel.getPassword().toCharArray());

    fc.responseComplete(); 
} 
```

# iphone - 如何在Objective C中抽象类名或类型以用作变量？

> ID：15646603
> 
> 赞同：0
> 
> 时间：2013-03-26T20:19:45.443
> 
> 标签：iphone, ios, objective-c, abstract-class

我已经意识到我的几个列表视图控制器的行为方式相同，现在我想将它们抽象为一个名为 ListVC 的通用控制器。计划是在需要时创建 ListVC 的实例，并将该实例所需的所有特定内容传递给它。

例如，如果我需要一个客户列表，我会执行以下操作：

```
ListVC *customersVC = [[ListVC alloc] init];
customersVC.tableArray = self.customersList 
```

在 ListVC 中，有时我需要知道某个对象的类类型。在我的示例中，数组`self.customersList`中的对象来自 class `CustomerClass`。我知道我可以[将字符串转换为类名](https://stackoverflow.com/questions/4654568/convert-a-string-myexampleclass-into-a-class-name-myexampleclass)，但是当我在 ListVC 中有一个需要返回对象类型的方法时，这无济于事。例如，在 ListVC 中，这个旧的非抽象方法：

```
- (CustomerClass *)customerAfterFilter 
```

应该是这样的：

```
- (self.objectClass *)objectAfterFilter 
```

而且我会在它像这样实例化之后设置 objectClass 。

```
ListVC *customersVC = [[ListVC alloc] init];
customersVC.tableArray = self.customersList    
customersVC.objectClass = [CustomerClass class]; 
```

我该怎么做这样的事情？或者，如果我的方法是错误的，请提出正确的方法。我是编程初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:22:36.870

您不能像那样更改返回类型。您可以做的是返回一个`id`，它是指向任何类的对象的指针。

```
- (id)objectAfterFilter 
```

**编辑：**

```
Customer *c = [customersVC objectsAfterFilter];
[c duCustomerStuff]; 
```

或者：

```
[((Customer *)[customersVC objectsAfterFilter]) doCustomerStuff]; 
```

# ruby-on-rails - 如何在 Ruby 中以正确的格式返回 JSON？

> ID：15646608
> 
> 赞同：1
> 
> 时间：2013-03-26T20:20:01.733
> 
> 标签：ruby-on-rails, ruby, json

当我尝试以上面显示的格式返回 JSON 时，我的 JSON 看起来像这样

```
result = JSON.parse(data)
p result.to_json

#json from .to_json
\"is_claimed\": true,
\"rating\": 3.5,
\"mobile_url\": \"http: //m.yelp.com/biz/rudys-barbershop-seattle\",
... 
```

当我改用“p result”（没有.to_json）时，我得到以下信息：

```
"is_claimed"=>true,
"rating"=>3.5,
"mobile_url"=>"http://m.yelp.com/biz/rudys-barbershop-seattle",
.... 
```

第一个有一个'\'字符，第二个使用哈希火箭。如何以正常格式返回 JSON？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:22:27.153

您看到的格式是因为`p`输出信息的方式，请尝试将输出更改为`puts`.

```
data = '{
  "is_claimed":true,
  "rating":3.5,
  "mobile_url":"http://m.yelp.com/biz/rudys-barbershop-seattle"
}'
result = JSON.parse(data)
puts result.to_json 
```

`p`编辑：关于vs的一些附加信息`puts`：[p vs puts in Ruby](https://stackoverflow.com/questions/1255324/p-vs-puts-in-ruby)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:22:45.103

那是因为您正在使用`p`来显示`string`.

```
p "hi\"there"
"hi\"there"
=> "hi\"there"
[2] pry(main)> puts "hi\"there"
hi"there 
```

此外，您可能应该知道方法`as_json`和之间的区别`to_json`，请参阅[http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/](http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/)以了解区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:36:10.773

不确定您所说的“正常格式”是什么意思，我有时会说

```
puts JSON.generate(result) 
```

以友好的格式获取它。

# vba - Range对象上的excel VBA End方法-应用程序定义或对象定义的错误

> ID：15646611
> 
> 赞同：0
> 
> 时间：2013-03-26T20:20:07.947
> 
> 标签：vba, excel

我在使用范围对象的 End 方法时遇到错误。

下面的代码是我程序的摘录，当我到达最后一行时，出现以下错误：“应用程序定义或对象定义错误”

```
Sub DataGroup(testCell, j, k)
    Dim archive As Range
    Set dataCellsA = Worksheets("DATA").Range("B2")
    Set dataCellsB = Worksheets("DATA").Range("I2")
    For i = 0 To 30
        Set currentLine = testCell.Offset(i, 0)
        Set archive = Worksheets("ARCHIVE").Range("B4").End(x1Down) 
```

但是，在我的程序的后面部分，我有似乎是相同的实现，但我没有收到这部分的任何错误。

```
 Set dataCellsA = Worksheets("DATA").Range("C2")
    Set dataCellsB = Worksheets("DATA").Range("J2")

    Dim lastCellA As Range
    Dim lastCellB As Range

    Set lastCellA = dataCellsA.End(xlDown)
    Set lastCellB = dataCellsB.End(xlDown) 
```

两者有什么区别？我确保将我的变量声明为范围，并且我小心使用“Set”前缀来确保它是一个对象，而不是值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T22:21:00.567

所以，这就是答案：你有`x1Down`你应该有的地方`xlDown`（1 而不是 l）

# sql - 使用 CTE 索引视图

> ID：15646612
> 
> 赞同：8
> 
> 时间：2013-03-26T20:20:13.090
> 
> 标签：sql, sql-server, tsql, view, common-table-expression

所以，我刚刚发现 SQL Server 2008 不允许您在定义中使用 CTE 索引视图，但它允许您`alter`在查询中添加`with schemabinding`视图定义。这有充分的理由吗？由于某种我不知道的原因，这有意义吗？我的印象是，它`WITH SCHEMABINDING`的主要目的是让您索引视图

新的和改进的更多查询操作

```
;with x
as
(
    select   rx.pat_id
            ,rx.drug_class
            ,count(*) as counts
            from rx
            group by rx.pat_id,rx.drug_class

)
select   x.pat_id
        ,x.drug_class
        ,x.counts
        ,SUM(c.std_cost) as [Healthcare Costs]
    from x
    inner join claims as c
    on claims.pat_id=x.pat_id
    group by x.pat_id,x.drug_class,x.counts 
```

以及创建索引的代码

```
create unique clustered index [TestIndexName] on [dbo].[MyView]
( pat_id asc, drug_class asc, counts asc) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T20:29:51.500

1.  您不能使用 CTE 索引视图。即使视图*可以*有`SCHEMABINDING`。这样想吧。为了索引视图，它必须满足两个条件（以及许多其他条件）：（a）它已被创建`WITH SCHEMABINDING`和（b）它不包含 CTE。为了对视图进行模式绑定，它*不需要*满足不包含 CTE 的条件。

2.  我不相信存在视图具有 CTE*并且*将从被索引中受益的情况。这与您的实际问题无关，但我的直觉是您正试图索引此视图以神奇地使其更快。索引视图不一定比对基表的查询更快 - 存在限制是有原因的，并且只有特定的用例才有意义。请注意不要盲目地将您的所有视图索引为神奇的“更快”按钮。还要记住，索引视图需要维护。因此，它将增加工作负载中影响基表的任何和所有 DML 操作的成本。

3.  Schemabinding*不仅仅*用于索引视图。它还可以用于像 UDF 之类的东西以帮助说服确定性，可以用于视图和函数以防止对底层架构的更改，并且在某些情况下它可以提高性能（例如，当 UDF 不是架构绑定时，优化器可能必须创建一个表假脱机来处理任何底层 DDL 更改）。所以请不要认为可以模式绑定视图但不能索引它很奇怪。索引视图需要它，但这种关系不是相互的。

* * *

对于您的特定情况，我建议这样做：

```
CREATE VIEW dbo.PatClassCounts
WITH SCHEMABINDING
AS
  SELECT pat_id, drug_class, 
      COUNT_BIG(*) AS counts
    FROM dbo.rx
    GROUP BY pat_id, drug_class;
GO
CREATE UNIQUE CLUSTERED INDEX ON dbo.PatClassCounts(pat_id, drug_class);
GO
CREATE VIEW dbo.ClaimSums
WITH SCHEMABINDING
AS
  SELECT pat_id, 
    SUM(c.std_cost) AS [Healthcare Costs], 
    COUNT_BIG(*) AS counts
  FROM dbo.claims
  GROUP BY pat_id;
GO
CREATE UNIQUE CLUSTERED INDEX ON dbo.ClaimSums(pat_id);
GO 
```

现在您可以创建一个仅在这两个索引视图之间进行连接的非索引视图，它将利用索引（您可能必须`NOEXPAND`在较低版本上使用，不确定）：

```
CREATE VIEW dbo.OriginalViewName
WITH SCHEMABINDING
AS
    SELECT p.pat_id, p.drug_class, p.counts, c.[Healthcare Costs]
      FROM dbo.PatClassCounts AS p
      INNER JOIN dbo.ClaimSums AS c
      ON p.pat_id = c.pat_id;
GO 
```

现在，这一切都假设预先聚合这些信息是值得的——如果你不经常运行这个查询，但数据被修改了很多，最好不要创建索引视图。

另请注意，对于每个+组合，视图中的`SUM(std_cost)`from都是相同的，因为它仅聚合到. 我猜表中可能有一个也应该是连接标准的一部分，但我不确定。如果是这种情况，我认为这可以折叠为单个索引视图。`ClaimSums``pat_id``drug_class``pat_id``drug_class``claims`

# java - java上的鼠标中键无法正常工作

> ID：15646613
> 
> 赞同：0
> 
> 时间：2013-03-26T20:20:16.250
> 
> 标签：java, mouse-listeners

当我使用 mouseListener 并检查鼠标中键时，它没有正确反应我不知道为什么，但看起来我需要在单击时滚动以使事件发生在我的代码的某些部分（如果有帮助）

```
public void mouseClicked(MouseEvent e) {
    if(new Rectangle(0,0,1274,30).contains(Screen.mse)){
        TopMenu.click();
    }else if(new Rectangle(0,31,1100,549).contains(Screen.mse)){
        Map.cliked(e.getButton(),0);
        System.out.println("mouse:"+e.getButton());
    }else if(new Rectangle(1100,30,174,550).contains(Screen.mse)){
        //cliked ModeMenu
    }else if(new Rectangle(0,580,1100,164).contains(Screen.mse)){
        //cliked ToolsMenu
    }else{
        //cliked mode change
    }

    switch(e.getModifiers()) {
      case InputEvent.BUTTON1_MASK: {
        System.out.println("That's the LEFT button");     
        break;
        }
      case InputEvent.BUTTON2_MASK: {
        System.out.println("That's the MIDDLE button");     
        break;
        }
      case InputEvent.BUTTON3_MASK: {
        System.out.println("That's the RIGHT button");     
        break;
        }
      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:51:46.707

If you look at the javadoxs for MouseEvent, you can see that BUTTON1, BUTTON2 and BUTTON3 are not referred to the left, middle and right mouse buttons. It depends on the mouse what BUTTON 1,2 and 3 mean, so it can happen that BUTTON2 does not refer to the middle Button. To see if the middle Button of your mouse is recognized correctly, try the following:

```
public void mouseClicked(MouseEvent e){
System.out.println(e.getButton());
} 
```

Now press your middle mouse button. If there is no output in the console, your mouse has no middle button (or it is not recognized properly). If there is an output, it corresponds to the button(1=BUTTON1,2=BUTTON2,3=BUTTON3). If the ouput is 0, then the button is MouseEvent.NOBUTTON, which is unlikely to happen.

Another thing: Try using SwingUtilities.isMiddleButton(MouseEvent e). This may fix some problems with your mouse. If you do so, chage your mouseClicked() method to

```
public void mouseClicked(MouseEvent e)
{
    if(SwingUtilities.isLeftMouseButton(e))
    {
        System.out.println("That's the LEFT button"); 
    }
    else if(SwingUtilities.isMiddleMouseButton(e))
    {
        System.out.println("That's the MIDDLE button"); 
    }
    else if(SwingUtilities.isRightMouseButton(e))
    {
        System.out.println("That's the RIGHT button"); 
    }
} 
```

(of course with all the other code you wrote above the original switch statement)

# php - GET方法无法接收选择php

> ID：15646614
> 
> 赞同：1
> 
> 时间：2013-03-26T20:20:18.843
> 
> 标签：php, forms, get

当我提交一个输入文本时，我有一个包含 2 个输入文本的表单，该值包含“John & Smith”，第二个输入包含“Apple”，我的 url 返回

```
www.example.com/results.php?name=John&food=Apple 
```

我希望它在名称下包含 John & Smith，因为我将其用作我的搜索条件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:22:40.887

如果您希望表单值成为查询字符串的一部分，则必须对表单值进行 URL 编码。有关更多详细信息，请参阅[此 MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)。也许这应该是一个 POST 请求，但请求正文中有参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:32:04.763

表单数据在现代浏览器中自动进行 urlencoded。我只是在最新的 Chrome 浏览器版本中进行了测试。

如果您仍然坚持使用 GET 方法，请尝试使用此方法：

```
<form action="results.php" method="get" enctype="application/x-www-form-urlencoded">
   <input type="text" name="name" />
   <input type="text" name="food" />
   <input type="Submit" value="Submit form data" />
</form> 
```

但是，通常您只会使用预定义值的 GET 方法。

# extjs - 如何从 actioncolumn 处理程序中获取行

> ID：15646617
> 
> 赞同：0
> 
> 时间：2013-03-26T20:20:31.880
> 
> 标签：extjs, extjs4

问题说明了一切。我需要在 actioncolumn 中获取包含单击项目的行的 DOM 节点。

看起来这很容易，因为我有 rowIndex 但文档中没有任何内容建议如何使用它来获取行。至少没有什么相当明显的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:55:00.910

使用getNode：[http ://docs.sencha.com/ext-js/4-2/#!/api/Ext.grid.View](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.grid.View)

`grid.getView().getNode(rowIndex);`

# r - R中的意外符号请参阅代码

> ID：15646618
> 
> 赞同：3
> 
> 时间：2013-03-26T20:20:34.207
> 
> 标签：r, symbols

我试图编写一个函数来解析和合并一些数据。但是 R 抛出了一个意外的符号错误异常。我尝试了不同的方法来解决这个问题，但仍然不起作用。请帮忙。

见代码

```
$aggall = function(df,grp){numcols = sapply(df,class) %in% 
c('integer', 'numeric') result = aggregate(df[,numcols],df[grp],mean) 
 counts = as.data.frame(table(df[grp])) names(counts)[1] = 
 grp merge(counts, result, sort=FALSE)} 
```

错误：“aggall = function(go,grp){numcols = sapply(go,class) %in% c('integer','numeric') results”中出现意外符号

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T20:25:50.490

你在一条物理线上拥有你的全部功能。
因此，当`R`试图解析它时，它无法知道一行何时结束，下一行何时开始。

要解决此问题，请使用单独的行或在它们之间添加分号。

* * *

**或者，您可以让`formatR`包裹为您完成！** （非常棒的包）：

```
install.packages("formatR")
library(formatR)
tidy.source("mySource.R", reindent.space=5)

aggall = function(df, grp) {
     numcols = sapply(df, class) %in% c("integer", "numeric")
     result = aggregate(df[, numcols], df[grp], mean)
     counts = as.data.frame(table(df[grp]))
     names(counts)[1] = grp
     merge(counts, result, sort = FALSE)
} 
```

# c++ - Project Euler 16 2^1000 我得到了 1319？

> ID：15646619
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:20:36.220
> 
> 标签：c++

我检查了答案，与我的答案相差不大，但这仍然是一个错误。有人可以检查我的编码，看看是什么错误导致我得到 1319 的值吗？

```
#include <iostream>
#include <vector>
using namespace std;

int main()
{
int k = 0;
int o = 0;
vector<int> n(1,0);
n[0] = 1;
while (k < 1001)
{
    for (int l = 0; l < n.size(); l++)
        n[l] = n[l] * 2;
    for (int l = 0; l < n.size(); l++)
    {
        if (n[l] >= 1000000)
        {
            int m;
            if (l == n.size() - 1)
                n.resize(n.size() + 1);
            m = n[l] / 1000000;
            n[l] = n[l] % 1000000;
            n[l+1] = n[l+1] + m;
        }
    }
    k++;
}
for (int l = 0; l < n.size(); l++)
    o = o + int (n[l]/1000000) + int ((n[l] % 1000000) / 100000) + int ((n[l] % 100000) / 10000) + int ((n[l] % 10000) / 1000) + int ((n[l] % 1000) / 100) + int ((n[l] % 100) / 10) + n[l] % 10;
cout << o;
cin >> k;
return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:42:45.800

做了

```
while (k < 1000) 
```

在外循环条件下。

在`while`循环中，您从`2^k`向量中的表示开始，其值`k`在进入循环时具有。所以你实际上是在计算`2^1001`而不是`2^1000`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:25:45.377

在 C++ 中解决这个问题是数据类型限制，“int”不足以计算 2^1000。我已经为此解决了一个原型，即数字 2^4 的数字总和。2 ^ 4 的幂是 16，数字总和是 7。希望代码能够指导你。

```
 #include<iostream.h>
         #include<conio.h>

         void main()
             {
                 int count=1;

           int power=1;
                 int sum=0;
   while(count<=4)
   {   count++;
   power=power*2;

    }
   cout<<"The power is"<<power<<"\t";

    while(power!=0)
     {
           int digit=power%10;
        sum=sum+digit;
        power=power/10;

     }

     cout<<"The sum of digits is"<<sum;
     getch();
    } 
```

# css - 媒体查询不起作用

> ID：15646620
> 
> 赞同：3
> 
> 时间：2013-03-26T20:20:37.757
> 
> 标签：css, media-queries

这一定是一个非常愚蠢的问题，但我无法让这个媒体查询工作。当我调整页面大小时，页面并没有改变。

样式表.css：

```
@font-face {
    font-family: ubuntu;
    src: url('Ubuntu-L.ttf');
}
@font-face {
    font-family: ubuntu;
    src: url("Ubuntu-B.ttf");
    font-weight: bold;
}

html, body {
background-image: url('bg2.png');
background-repeat: repeat;
background-attachment: fixed;
font-family: ubuntu;
font-size: 48px;
margin: 0;
padding: 0;
text-align: center;
}

#menu {
width:900px;
height: 150px;
background: #FFF;
position: fixed;
left: 50%;
margin-left: -450px;
top: 50px;
}

#content {
width: 800px;
margin: 0px auto;
padding-top: 100px;

}

.block {

width: 100%;
height: 800px;
margin-top: 100px;
margin-bottom: 100px;
border-radius: 5px;
background: #FFF;

-moz-box-shadow: 0 0 25px 0px rgba(0,0,0,0.5);
-webkit-box-shadow: 0 0 25px 0px rgba(0,0,0,0.5);
box-shadow: 0 0 25px 0px rgba(0,0,0,0.5);
}

//MEDIA QUERY

@media screen and (max-width: 900px) {

    #content {
        width: 90%;
    }
    #menu {
        width: 100%;
        left: 0%;
        top: 0%;
        margin-left: 0px;
    }

} 
```

索引.html：

```
<html>
<head>

<link rel="shortcut icon" href="http://www.yellos.com/favi.ico" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>yellos</title>

<!--[if lt IE 9]>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="stylesheet.css" />

</head>

<body>

<div id="menu">

...

</div>

<div id="content">

<div class="block" id="1">

TEST

</div>

</div>

</body>

</html> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T20:35:27.883

错误是`//`CSS 中不允许注释。

改变

```
//MEDIA QUERY 
```

至

```
/* MEDIA QUERY */ 
```

# ajax - 如何使用 Ajax 创建 .cfc 文件？

> ID：15646622
> 
> 赞同：0
> 
> 时间：2013-03-26T20:20:50.690
> 
> 标签：ajax, jquery, coldfusion, coldfusion-7

我正在尝试创建一个 ColdFusion 组件（.cfc）文件并使用 Ajax 来传递我的查询。我这样做是否正确，我可以在 ColdFusion 7 中使用 Ajax 吗？

**从 OP 的编辑评论中添加**

> 我再次更新了它，正如我上面所说的，我的按钮单击有效，我的组件有效，但是对组件的调用什么也没做。有人可以再看一次，看看可能是什么问题。我觉得我很接近。另外，如何检索返回的值？

**从 OP 的编辑评论中添加**

> 我更新了代码，但我仍然没有得到任何东西。有人可以请帮我理解我所缺少的吗？

以下是在 form.cfm 中：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript">
    function validateFunding(){
        $('#Finalize').click(function(){  
        $.ajax({
             type:"get",
                url: "awardTotals.cfc?method=searchAward",
                data: {total: $("totals").val(), codeNum: $("CodeNum").val(), testYear: $("TestYear").val, selType: $("selType").val, selJuris: $("selJuris").val},
            success: function(data) {
            if (isTotals == true) { alert('There is a match');} else { alert('This does not match);}
            }
        });
          });
    } 
```

这是我的 AwardTotal.cfc。

```
 <cfcomponent>
        <cffunction name="searchAward" access="remote" returntype="any">
            <cfargument name="Total" type="numeric" required="true">
            <cfargument name="CodeNum" type="string" required="true">
                    <cfargument name="TestYear" type="numeric" required="true">
                    <cfargument name="SelType" type="numeric" required="true">
                    <cfargument name="SelJuris" type="numeric" required="true">
                <cfset var searchAwards = "">
            <cfquery name="searchAwards" datasource="Test">
             SELECT g.Code1 + g.Code2 + g.Code3 + g.Code4 AS GrandTotal
                     FROM Codes g 
                    WHERE g.CodeNumber = <cfqueryparam cfsqltype="cf_sql_varchar"  value="#arguments.CodeNum#">
                     AND g.TestYear = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.TestYear#">
                     AND g.SelType = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.SelType#">  
                       AND g.Jurisdiction = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.SelJuris#">   
             </cfquery> 
           <cfscript>
          if(arguments.Totals = searchAwards.GrandTotal){
             return true;
          } else {
             return false;
          }
        </cfscript>
        </cffunction>
    </cfcomponent> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:18:07.640

您正在传递grandTotal，您的方法正在寻找awardTotals。您正在返回一个空字符串并寻找一个布尔值。尝试这个 ：

```
function ValidateFunding(awardTotals){
    $.ajax({
        url: 'awardTotals.cfc',
        data: {method: 'searchAward',  awardTotals: numberToPass},
        success: function(data) {
        if (isTotals == true) { alert('There is a match');} else { alert('This does not match);}
        }
    });
} 
```

然后

```
<cfcomponent>
    <cffunction name="myFunction" access="public" returntype="Query">
        <cfargument name="awardTotals" type="string" required="true">

        <cfset var searchAward = queryNew()>
        <cfquery name="searchAward" datasource="Test">
                SELECT g.Code1 + g.Code2 + g.Code3 + g.Code4 AS GrandTotal
                FROM Codes g 
                WHERE g.CodeNumber = <cfqueryparam cfsqltype="cf_sql_varchar"  value="#form.CodeNum#">
                  AND g.TestYear = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.TestYear#">
                  AND g.SelType = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.SelType#">   
                  AND g.Jurisdiction = <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.SelJuris#">    
         </cfquery> 
       <cfscript>
          if(arguments.awardTotals eq searchAward.grandTotal){
             return true;
          } else {
             return false;
          }
    </cffunction>
</cfcomponent> 
```

@billy Cravens 是正确的。你不能使用 cfajaxproxy 但 jquery ajax 会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:52:44.743

cfajaxproxy 是在 ColdFusion 8 中引入的，因此在 CF7 上不可用。

但是，您可以通过将方法和参数附加到 URL 来在 jQuery ajax() 调用中调用 CFC：`awardTotal.cfc?method=myFunction&awardTotals=#awardTotals#`

您当然必须使用`access="remote"`并返回 JavaScript 可以处理的输出（同样在 CF7 上，您的选项有点有限，因为类似的功能也`serializeJson()`已在 CF8 中添加）

（请参阅[使用 AJAX 调用 ColdFusion 函数](https://stackoverflow.com/questions/999501/invoke-coldfusion-function-using-ajax)）

# java - 即使没有 volatile，线程值也不会被线程缓存？

> ID：15646623
> 
> 赞同：1
> 
> 时间：2013-03-26T20:20:51.117
> 
> 标签：java, multithreading, volatile

```
class Counter
{
    public int i=0;
    public void increment()
    {
        i++;
        System.out.println("i is "+i);
        System.out.println("i/=2 executing");
        i=i+22;
        System.out.println("i is (after i+22) "+i);
        System.out.println("i+=1 executing");
        i++;
        System.out.println("i is (after i++) "+i);
    }
    public void decrement()
    {
        i--;
        System.out.println("i is "+i);
        System.out.println("i*=2 executing");
        i=i*2;
        System.out.println("i is after i*2"+i);
        System.out.println("i-=1 executing");
        i=i-1;
        System.out.println("i is after i-1 "+i);
    }
    public int value()
    {
        return i;
    } }

class ThreadA
{
    public ThreadA(final Counter c)
    {
        new Thread(new Runnable(){
            public void run()
            {
                System.out.println("Thread A trying to increment");
                c.increment();
                System.out.println("Increment completed "+c.i);
            }
        }).start();
    }
}
class ThreadB
{
    public ThreadB(final Counter c)
    {
        new Thread(new Runnable(){
            public void run()
            {
                System.out.println("Thread B trying to decrement");
                c.decrement();
                System.out.println("Decrement completed "+c.i);
            }
        }).start();
    }
}
class ThreadInterference
{
    public static void main(String args[]) throws Exception
    {
        Counter c=new Counter();
        new ThreadA(c);
        new ThreadB(c); 
    }
} 
```

在上面的代码中，ThreadA 首先获得了对 Counter 对象的访问权，并在执行一些额外操作的同时增加了该值。ThreadA 第一次没有缓存值 i。但是在执行 i++ （在第一行）之后，它将缓存该值。后来值更新并得到 24。根据程序，由于变量 i 不是易失性的，因此更改将在 ThreadA 的本地缓存中完成，

现在，当 ThreadB 访问 decrement() 方法时，i 的值由 ThreadA 更新，即 24。这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:23:18.807

假设线程不会看到其他线程对共享数据所做的每个更新，这与假设所有线程*将*立即看到彼此的更新一样不合适。

重要的是要考虑到看不到更新的*可能性*——不要依赖它。

请注意，除了看不到其他线程的更新之外，还有另一个问题 - 您的所有操作都在“读取、修改、写入”的意义上进行......如果另一个线程在您阅读后修改了该值，您基本上会忽略它。

例如，假设`i`当我们到达这条线时是 5：

```
i = i * 2; 
```

...但是在它进行到一半时，另一个线程将其修改为 4。

这条线可以被认为是：

```
int tmp = i;
tmp = tmp * 2;
i = tmp; 
```

如果第二个线程`i`在“扩展”版本的第一行之后更改为 4，那么即使`i`是 volatile 的写入 4 仍然会有效丢失 - 因为到那时，`tmp`是 5，它将加倍到 10，然后10 会被写出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:44:19.487

如中所述[`JLS 8.3.1.4`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.4)：

> Java 编程语言允许线程访问共享变量（第 17.1 节）。作为一项规则，为了确保共享变量始终如一且可靠地更新，线程应该通过获取锁来确保它对这些变量具有独占使用权，按照惯例，对这些共享变量强制执行互斥......*一个字段可能被声明为 volatile，在这种情况下，Java 内存模型确保所有线程看到该变量的一致值*

虽然并非总是如此，但仍有可能线程之间的共享值不能一致且可靠地更新，这将导致程序的一些不可预测的结果。在下面给出的代码中

```
class Test {
    static int i = 0, j = 0;
    static void one() { i++; j++; }
    static void two() {
        System.out.println("i=" + i + " j=" + j);
    }
} 
```

如果一个线程重复调用方法一（但总共不超过 Integer.MAX_VALUE 次），而另一个线程重复调用方法二，那么方法二偶尔会打印出大于 i 值的 j 值，因为该示例不包括同步，并且 i 和 j 的共享值可能会乱序更新。
但是，如果您声明`i`and`j`是`volatile`，这允许方法一和方法二同时执行，但保证访问 和 的共享值发生的次数`i`和`j`顺序完全相同，就像它们在执行期间发生的一样每个线程的程序文本。因此，**共享值`j`永远不会大于`i`，因为在更新 j 之前，对 i 的每次更新都必须反映在 i 的共享值中**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:16:43.820

现在我知道公共对象（由多个线程共享的对象）不会被这些线程缓存。由于对象是常见的，Java 内存模型足够智能，可以识别线程缓存的常见对象可能会产生令人惊讶的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T14:39:58.863

> 这怎么可能？

因为 JLS 中没有任何地方说值必须缓存在线程中。

这就是规范所说的：

如果您有一个非易失性变量`x`，并且它是由一个线程更新的`T1`，则无法保证`T2`可以观察到`x`by的变化`T1`。保证`T2`看到变化的唯一方法`T1`是建立`happens-before`关系。

在某些情况下，Java 的某些实现会在线程中缓存非易失性变量。换句话说，您不能依赖缓存的非易失性变量。

# c# - 在 ajax 方法调用之前验证模型数据

> ID：15646624
> 
> 赞同：0
> 
> 时间：2013-03-26T20:20:53.163
> 
> 标签：c#, jquery, ajax, asp.net-mvc

我对我的应用程序有一个部分视图我正在部分视图上创建用户注册功能（不使用任何表单标记），我正在使用 ajax-jquery 调用控制器的操作方法并将用户详细信息（模型）传递给操作方法，然后再调用 ajax 方法我需要在客户端验证用户详细信息。我怎样才能做到这一点？

需要在 ajax 调用之前验证模型（不使用任何表单标签）。

```
@model MVC4Demo.Models.Student

<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script type="text/javascript">
function onClientClick() {        

    var obj = { FirstName: "name",  City: "abc" };
    $.ajax({
        url: "/Home/AjaxDemo",
        data: JSON.stringify(obj),
        type: "POST",
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            alert('success');                
        },
        error: function () {
            alert("error");
        }
    });
}
</script>

<div id="Main">
<label>Student</label>

<div class="editor-label">
    @Html.LabelFor(model => model.FirstName)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.FirstName)
    @Html.ValidationMessageFor(model => model.FirstName)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.LastName)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.LastName)
    @Html.ValidationMessageFor(model => model.LastName)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.City)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.City)
    @Html.ValidationMessageFor(model => model.City)
</div>

<p>
    <input type="submit" onclick="onClientClick()" value="Create" />
</p>
</div>

<div>
@Html.ActionLink("Back to List", "Index")
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:18:02.937

把你的模型变成形式。后：

```
<script>
$(function () {
    $('#myForm').unbind('submit');
    $('#myForm')
        .bind('submit', function () {
            var form = this;
            if ($("#myForm").valid()) {
                $.post('/Home/AjaxDemo', $(form).serialize(), function (data) {

                    if (data.success) {
                        alert('success');
                    } else {
                        alert("error");
                    }
                });
            }

            return false;
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:23:30.330

恐怕需要表单标签。还有别的东西，你可以预先

```
@Html.EnableClientValidation();
@Html.ValidationSummary(true); 
```

到表格。

# jsf - 点击后保留url参数

> ID：15646625
> 
> 赞同：1
> 
> 时间：2013-03-26T20:20:58.833
> 
> 标签：jsf, seam

我有一个页面，它以 id 作为 url 参数并使用它来获取对象并显示有关它的数据。在这个页面上，我们有一个包含文件上传组件的模式，所以我们不能使用 ajax 来处理保存。相反，我们这样做：

```
 <rich:modalPanel domElementAttachment="parent" id="profilePanel" styleClass="popUp" resizeable="false" moveable="false" autosized="true" zindex="200" top="-10">
        <a4j:form enctype="multipart/form-data" id="profilePanelFormId">
            <q:box title="Edit Advocacy Profile" width="width6x" wantFocus="true">
                <s:div id="profilePanelForm">
                    <rich:messages rendered="#{messagesUtil.errorsExist}"/>
                    <a4j:include viewId="/panel/advocacy/advocateProfileEdit.xhtml"/>
                </s:div>
                <h:commandButton id="cancel" immediate="true" value="Cancel" action="#{advocateManager.cancelEditCommitment}" styleClass="button cancel" tabindex="100"/>
                <h:commandButton id="save" value="Save" action="#{advocateManager.saveCommitment}" styleClass="submit" tabindex="101"/>
            </q:box>
        </a4j:form>
    </rich:modalPanel> 
```

我们在 pages.xml 中填充参数，如下所示：

```
<page view-id="/advocacy/advocateCommitmentView.xhtml" login-required="true">
    <param name="confirmationCode" value="#{advocateManager.commitmentId}"/>
</page> 
```

到目前为止，一切都很好。我们遇到的问题是当用户点击保存或取消时，url 会在没有必要的 id 参数的情况下被重写。如果用户然后刷新页面，它会抛出错误，因为它没有这个键。有谁知道我如何在不使用 ajax 的情况下调用我的保存方法并仍然保留 url 参数或拦截调用并重新添加参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:25:03.110

放在`?includeViewParams=true`操作字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:06:25.273

发生这种情况是因为`<h:commandButton/>`发布表单，并且表单帖子不包含 URL 中的参数。要添加参数，请创建重定向到同一页面的导航规则：

```
<navigation from-action="#{advocateManager.saveCommitment}">
    <rule>
        <redirect view-id="/same-page.xhtml" />
    </rule>
</navigation> 
```

进行重定向时，页面参数被编码并添加到 URL。请注意，这需要`#{advocateManager.commitmentId}`在重定向完成时填充。

# android - 关于android中图片上传的查询

> ID：15646632
> 
> 赞同：1
> 
> 时间：2013-03-26T20:21:26.913
> 
> 标签：android

在我的 android 应用程序中单击一个按钮时，它将打开相机应用程序。当在相机应用程序中拍摄照片时，照片会上传到服务器。

问题：拍照并在相机应用程序中单击“保存”时，直到照片上传到服务器后才返回应用程序。

这是因为我正在等待`Thread`上传图像的完成。

如何解决这个问题呢？我希望它从相机应用程序返回到应用程序并希望显示一个 ProgressBar。

为此，我的程序是：

-->`Intent`像这样打开相机应用程序：

```
Intent CameraIntent =new Intent("android.media.action.IMAGE_CAPTURE");
startActivityForResult(CameraIntent,CAMERA_PIC_REQUEST); 
```

--> 在方法`onActivityResult(int requestCode, int resultCode, Intent data)`中，我写了如下代码。我正在用 Base64 编码图像并调用`Thread`将 Base64 编码图像上传到服务器的 a。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode==CAMERA_PIC_REQUEST)
    {
            ThumbNail=(Bitmap) data.getExtras().get("data");
            ba=new ByteArrayOutputStream();

            ThumbNail.compress(Bitmap.CompressFormat.JPEG,100,ba);
            barray=ba.toByteArray();

            str_img=Base64.encodeToString(barray,Base64.DEFAULT);           

            if(resultCode==Activity.RESULT_OK )
            {               
            upload_image = new ThreadUploadImage(str_img);

            upload_image.start();

            while(upload_image.isAlive())
            {
                     Thread.sleep(100);
            }           
        }
    }
} 
```

ThreadUploadImage.java

```
public class ThreadUploadImage extends Thread {

    String str_img,result;
    String port=null,ip_addr=null;

    public ThreadUploadImage(String str_img)
    {
        this.str_img=str_img;
    }

    public void run()
    {
        try
        {
            HttpClient client =new DefaultHttpClient();

            ip_addr=StaticVariables.ip_addr;
            port=StaticVariables.port;

            if(ip_addr!=null && port!=null)
            {
                List<NameValuePair> l =new ArrayList<NameValuePair>();

                l.add(new BasicNameValuePair("img_str",str_img));
                post.setEntity(new UrlEncodedFormEntity(l));    
                HttpResponse response=client.execute(post);

                BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                StringBuilder builder = new StringBuilder();
                for (String line = null; (line = reader.readLine()) != null;) {
                    builder.append(line).append("\n");
                }

                this.result = builder.toString();
                Log.e("result_is",result);
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

问题：当照片被拍照并在相机应用程序中单击“保存”时，直到照片上传到服务器后才返回应用程序。

这是因为我正在等待上传图片的线程。

如何解决这个问题呢？我希望它从相机应用程序返回到应用程序，并且我想显示一个 ProgressBar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:28:41.363

删除等待`Thread`完成。

删除这个：

```
while(upload_image.isAlive())
{
    Thread.sleep(100);
} 
```

如果您需要阻止用户执行任何操作并且需要在上传完成时通知他，那么您应该设置一个`ProgressDialog`带有不确定进度指示器（即旋转等待图标）的图标。

完成`Thread`后，您需要`Activity`通过简单的回调或广播通知您，`dismiss()`并且`ProgressDialog`.

**回调示例**：

```
public static interface MyCallback {
    public void finished(final boolean success);
} 
```

**您的活动“实现” MyCallback**：

```
public class MyActivity implements MyCallback {
    ...
    public void finished(final boolean success) {
        if(success) {
            // Upload was successful!
        } else {
            // Upload failed.
        }
    }
} 
```

您的`ThreadUploadImage`类必须拥有一个`MyCallback`对象，并且必须在构造函数中将其设置为参数。然后，当线程完成时，您应该调用`mCallback.finished()`.

```
public class ThreadUploadImage extends Thread   {

    String str_img,result;
    String port=null,ip_addr=null;
    final MyCallback mCallback;

    public ThreadUploadImage(String str_img, final MyCallback callback)
    {
        this.str_img=str_img;
        mCallback = callback;
    }

    public void run()
    {
        try
        {
            HttpClient client =new DefaultHttpClient();

            ...

            Log.e("result_is",result);
            mCallback.finished(true);
        } catch(Exception e) {
            e.printStackTrace();
            mCallback.finished(false);
        }
    }
} 
```

# php - php 获取 youtube 用户订阅频道视频

> ID：15646633
> 
> 赞同：0
> 
> 时间：2013-03-26T20:21:27.667
> 
> 标签：php, arrays, youtube-api, youtube-channels

我如何使用 php 获取 youtube 用户订阅频道视频并显示所有频道供稿，我想创建一个类或函数，如果我传递用户名，php 类将检索用户订阅频道中的最新上传/活动并显示url 加上标题和图像，我还希望能够将标题和 url 传递给其他函数，以便我可以将其保存到数据库中。在另一个页面上，我发现此[从特定频道提取 YouTube 视频，](https://stackoverflow.com/questions/6510128/pulling-in-youtube-videos-from-specific-channel)但它仅适用于一个特定频道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:14:17.843

相关请求是针对YouTube GData API v2 中的[newsubscriptionvideos 供稿或较新的 YouTube Data API v3 中的](https://developers.google.com/youtube/2.0/developers_guide_protocol_subscriptions#Retrieving_new_subscription_videos)[activity.list()](https://developers.google.com/youtube/v3/docs/activities/list)。

`newsubscriptionvideos`[Zend GData 客户端库](http://framework.zend.com/downloads/latest)可能不原生支持（我没有在[开发人员指南](https://developers.google.com/youtube/2.0/developers_guide_php)中看到它），所以如果你走这条路，你可能应该用它`alt=jsonc`来取回易于解析的 JSON 数据提要. 例如，[https: //gdata.youtube.com/feeds/api/users/jeffposnicktest/newsubscriptionvideos?v=2&alt=jsonc](https://gdata.youtube.com/feeds/api/users/jeffposnicktest/newsubscriptionvideos?v=2&alt=jsonc)

另一种方法是使用 v3 的[PHP 客户端库](https://code.google.com/p/google-api-php-client/)来调用`activities.list()`.

# javascript - JavaScript 异常不起作用

> ID：15646638
> 
> 赞同：2
> 
> 时间：2013-03-26T20:21:45.180
> 
> 标签：javascript

我试图弄清楚为什么我的代码在使用以下语句调用它后没有抛出并显示错误消息（页面只是空白）：

> document.write(add(10,wrong_input));

**程序.js**

```
var add = function (a,b){
    if(typeof a !== 'number' || typeof b !== 'number'){
        throw{
            name: 'TypeError',
            message: 'add needs numbers'
        } catch(e){
            document.writeln(e.name + ': ' + e.message);
        }
    }
    return a + b;
} 
```

**程序.html**

```
<html>
    <body>
    <pre><script src="program.js"></script></pre>
    <div></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T20:25:36.847

该`throw`语句没有`catch`子句，`try`有。你应该分开扔和接。例如：

```
var add = function (a,b){
    if(typeof a !== 'number' || typeof b !== 'number'){
        throw{
            name: 'TypeError',
            message: 'add needs numbers'
        }
    }
    return a + b;
}

try {
    add('foo', 1);
} catch(ex) {
    alert(ex.message);
} 
```

请注意，我替换`document.writeln`为`alert`，因为前者在页面加载后运行时会覆盖整个文档。如果您想要更好看的东西，请直接操作 DOM（通过更改某些元素的 innerHTML、附加节点等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T20:26:07.570

您的错误处理代码略有偏差，您不能抛出错误然后尝试将其写出来。你要么这样做：

```
if(typeof a !== 'number' || typeof b !== 'number'){
    document.write("TypeError" + ": " + "add needs numbers");
} 
```

或者只是`throw`它：

```
if(typeof a !== 'number' || typeof b !== 'number'){
    throw {
        message: "add needs numbers",
        name: "TypeError"
    }
} 
```

然后`try catch`在你的函数调用中做你的。不过就个人而言，我会说坚持第一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:34:50.627

正如 bfaretto 评论的那样，您正在混合投掷和尝试。

throw 抛出您定义的异常，但您将其用作 try..catch 块。以下是你如何一起使用 throw 和 try..catch。

```
var add = function (a,b){
    try {
       if(typeof a !== 'number' || typeof b !== 'number'){
            var n = {
                name: 'TypeError',
                message: 'add needs numbers'
            };
            throw n;
        }
        // throws an exception with a numeric value
    } catch (e) {
       console.log(e.name);
    }
} 
```

# css - 将文本从 BreadCrumb 移到左侧

> ID：15646639
> 
> 赞同：0
> 
> 时间：2013-03-26T20:21:52.220
> 
> 标签：css, breadcrumbs

我想将 BreadCrumb“搜索”中的文本“主页”移动到左侧，使其位于侧边栏上方。

[您可以在本例](http://ntm.at/r0sa/)中看到它位于右侧。

当我键入`text align: left`时，它只会向左移动几个 px。什么是正确的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:55:17.030

从类“.BreadCrumb”中删除宽度或添加' `float :left;`'应该工作

# android - 使用单一意图来检索多条记录与为每条记录使用单独的意图

> ID：15646640
> 
> 赞同：0
> 
> 时间：2013-03-26T20:21:52.447
> 
> 标签：android, android-intent, performance-testing

我正在尝试评估在长期过程中使用单个意图与使用最多五个单独意图的收益和成本。

我的应用程序的用户从网络下载记录，这些记录被解析为数据库。用户可以在任何给定时间下载 1 到 5 个人的记录。

我有这样的应用程序设置：

```
 private OnClickListener mySubmitOnClick = new OnClickListener() {

    @Override
    public void onClick(View v) {

       ArrayList<String> idsOfRecordsArray = getIdsOfRecordsToDownload();

               Intent intentToRetrieve = new Intent(getActivity(),
                                                  RetrieveData.class);
        Messenger messenger = new Messenger(handler);
        intentToRetrieve.putExtra("MESSENGER", messenger);

        intentToRetrieve.putStringArrayListExtra ("IdList",
                                                     idsOfRecordsArray);

        v.getContext().startService(intentToRetrieve);

        showDialog("Some Message");

        }
      } 
```

这行得通，但由于解析数据需要时间，我有时会遇到超时错误。

我把它改成这样：

```
 private OnClickListener mySubmitOnClick = new OnClickListener() {

    @Override
    public void onClick(View v) {

       ArrayList<String> idsOfRecordsArray = getIdsOfRecordsToDownload();
               while(iCount < idsOfRecordsArray.size()) {
        ArrayList<String> currentID = new ArrayList<String>();

        currentAthleteID.add(athleteIdArray.get(iCountAthletes));
        Intent intentToRetrieve = new Intent(getActivity(),
                                              RetrieveData.class);
        Messenger messenger = new Messenger(handler);
        intentToRetrieve.putExtra("MESSENGER", messenger);

        intentToRetrieve.putStringArrayListExtra ("IdList",
                                                              currentID);

        v.getContext().startService(intentToRetrieve);

        showDialog("Some Message");

        iCount++;
        }
        } 
```

因此，我现在最多可以同时触发五 (5) 个意图。这看起来很稳定，足够了。但是，处理进度对话框有点麻烦。如果我只打开 1 个对话框，它会在进程完成之前关闭。

关于哪种方法更好的想法？或者也许我应该放弃两者以采用其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:15:41.003

使用 IntentService 在后台完成工作。您可以根据需要触发任意数量的意图，但 IntentService 一次只会处理一个。同时，您不会超时，用户可以继续工作。我认为用户会接受结果不会立即到达，只要他们在等待时可以做其他事情。

请参阅 Android 培训课程[在后台服务中运行](http://developer.android.com/training/run-background-service/index.html)作为示例。

# javascript - 如何使用 JS 制作 Google 的 +1 滚动动画？

> ID：15646644
> 
> 赞同：1
> 
> 时间：2013-03-26T20:22:12.507
> 
> 标签：javascript, jquery

当您在 Google+ 上点击帖子下方的 +1 按钮时，右侧的计数器会增加，但它会通过滚动动画来增加，有点像旧的里程表：

![观察右边的滚动动画](../Images/f5c64ed3489c58e917f6dfc718b5a3f4.png)

如何使用 Javascript 创建这样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:34:56.323

好的，我已经提供了解决方案。基本上，我在第一个数字下方附加了一个新数字。动画他们两个。删除第一个数字。将第二个数字设置到正确的位置。

```
$(function () {
    $(document).on('click', 'button', function (evt) {
        var num, element, self;
        self = $(".number").first();
        num = parseInt($(".number:last").text());
        num = num + 1;
        element = '<div class="number">' + num.toString() + '</div>';
        $(".container").append(element);
        $(".number").animate(
            { top: "-=20" }, 
            150, 
            function () {
                self.remove();
                $(".number").css("top", "0px");
            }
        );
    });
}); 
```

这是解决方案 [http://jsfiddle.net/Dtwigs/KrpGp/](http://jsfiddle.net/Dtwigs/KrpGp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T21:14:45.207

这里有一些东西可以帮助你开始：

[http://jsfiddle.net/XKmJf/](http://jsfiddle.net/XKmJf/)

```
.wrapper {

    position:relative;

}

.wrapper .number-1 {

position:absolute;
top:0;
left:0;
    background-color:white;

}

<div class="wrapper">
    <a class="number-1">1</a>
    <a class="number-2">2</a>
</div>

$(document).ready(function(){

    $(".wrapper .number-1").animate({top:"-100px"}, 1000);

}); 
```

# c# - 如何在 C# 中导入公钥？

> ID：15646645
> 
> 赞同：1
> 
> 时间：2013-03-26T20:22:17.103
> 
> 标签：c#, client-server, rsa

我可以创建服务器和客户端的非对称密钥，然后导出它们并尝试交换它们。我的问题是我想将服务器的公钥导入客户端程序，但我一直无法找到解决方案。它以字节 [] 的形式出现，但我需要能够将其用作 RSAParameters 才能加密数据以发送到服务器。如何将 byte[] 转换为 RSAParameters 类型？

```
private void secureButton_Click(object sender, EventArgs e)
        {
            clientRSA = new RSACryptoServiceProvider();
            byte[] clientPublicKey = clientRSA.ExportCspBlob(false);

            stm.Write(clientPublicKey, 0, clientPublicKey.Length);
            stm.Read(serverPublicKey, 0, serverPublicKey.Length);
        } 
```

我知道这不是一种“安全”的方式，因为容易受到 MITM 的攻击，但我正面临着艰难的学校截止日期，这是我需要克服的障碍，然后才能继续前进。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T12:51:14.310

我会继续做这个答案，然后：

我从来没有做过blob，但我通常做的是`RSACryptoServiceProvider.ToXMLString()`用来导出成XML。然后我将该 XML 放入我的应用程序的资源中，然后在将来用于`RSACryptoServiceProvider.FromXMLString()`重新加载关键参数。

您不必保护公钥。是公开的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T21:11:30.913

要将 byte[] 公钥转换为 RSAParameters，您可以使用相同的类**RSACryptoServiceProvider**；

```
byte[] clientPublicKey = ...
var provider = new RSACryptoServiceProvider();
provider.ImportCspBlob(clientPublicKey);
var parameters = provider.ExportParameters(false); 
```

# php - 使用 Ajax 和 PHP 上传图片和一些文本

> ID：15646652
> 
> 赞同：0
> 
> 时间：2013-03-26T20:22:26.927
> 
> 标签：php, javascript, ajax, html, canvas

我正在尝试从文本字段上传图像和 2 个值，但我不能使用 input type="file" 作为资源，因为我首先使用相机捕获和预览图像选择文件`<img ...`，然后替换图像的 src带有调整大小的图像（最大 500kb）和我尝试上传的图像的标签。如果我使用输入 type="file" ，则上传第一张图片，而不是调整大小。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:04:33.767

您可以捕获凸轮图像并将其（base64 编码）独立于表单传输到您的服务器。或者将 base64 编码的图像放入隐藏的输入中。

# css - 在 icenium 中覆盖默认的 kendo-ui 样式

> ID：15646664
> 
> 赞同：2
> 
> 时间：2013-03-26T20:23:11.633
> 
> 标签：css, telerik, overriding, kendo-mobile, icenium

我的目标是在 Icenium 中设计一个 kendo-ui 移动应用程序，使其在使用的每台设备上看起来都一样。当前目标包括Android和IOS。

我的样式表是 head 部分的最后一个链接，以确保它覆盖应用程序中的任何其他样式。不过，这并没有帮助，因为 Telerik 的特异性噩梦让我跳了无数圈，却几乎没有取得任何成就。

我束手无策-我已按照[http://www.icenium.com/mobile-app-platform/videos-demos/video/kendo-ui-mobile-and-icenium](http://www.icenium.com/mobile-app-platform/videos-demos/video/kendo-ui-mobile-and-icenium)上的教程进行操作，到目前为止，已经能够覆盖很少的样式。

例如：

```
.km-ios #tabstrip-scan .km-navbar
{
    background-image:none;
} 
```

根据 Telerik 的教程，应该是我需要覆盖默认 ios 标题栏的所有内容。但是，它摆脱了背景图像，但给我留下了背景颜色，它不允许我覆盖（它也不允许我改变文本颜色）。换句话说：

```
.km-ios #tabstrip-scan .km-navbar
{
    background-image:none;  // works
    background-color: #d9d1ba; //doesn't work
    color: #333333;  //doesn't work either
} 
```

我的按钮类也有同样的问题：

```
.km-ios .km-button 
{
    height: 32px; // works
    width: 100% // doesn't work;
    background-image: none; // doesn't work
} 
```

并带有输入：

```
.km-ios input[type=text]
{
    width:100% // doesn't work
    border-radius: 3px; // doesn't work
    -webkit-border-radius: 3px // also doesn't work;
} 
```

有一次，我什至注释掉了整个剑道默认样式表，当我在虚拟机中运行应用程序时，仍然获得剑道默认样式。

如何覆盖 kendo-ui-mobile 默认设置并设置应用程序的样式我希望它看起来如何（在每个设备上都相同），而不是 Telerik 认为它应该看起来如何（更接近原生 ui）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:18:17.293

将平台强制设置为特定平台，并在此处使用 Kendo UI Mobile ThemeBuilder 对其进行样式设置：

[http://demos.kendoui.c​​om/mobilethemebuilder/index.html](http://demos.kendoui.com/mobilethemebuilder/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T16:32:40.447

您可能会在此处参考我的帖子[Kendo 移动模板样式/格式不起作用](https://stackoverflow.com/questions/14389522/kendo-mobile-template-styling-formatting-not-working)- 我遇到了类似的问题，我的帖子可能会有所帮助。

# android - 发布应用程序后无法让 android maps api v2 工作

> ID：15646668
> 
> 赞同：1
> 
> 时间：2013-03-26T20:23:19.810
> 
> 标签：android, intellij-idea, android-maps-v2

几天前我发布了我的应用程序，所以我不得不将我的地图 api 调试密钥更改为实时密钥。现在我想再次调试，我在 AndroidManifest.xml 中设置了调试映射 api 键，但运行我的应用程序后映射保持空白。

我使用 Intellij 作为 IDE。

# database - Laravel中具有两个外键字段的数据库一对多

> ID：15646678
> 
> 赞同：15
> 
> 时间：2013-03-26T20:24:04.093
> 
> 标签：database, laravel, eloquent

我一直在尝试定义一些数据库模式来使用 laravel 框架。我想模拟一场足球比赛。我想做的第一步是定义实体关系图，但我发现这（我认为这很简单）在某些方面令人困惑。

首先，显而易见的方法是说一个 Match 与两个 Teams 相关，而一个 Team 与任意数量的 Matches 相关。所以，我们会有一个“多对多”的关系。

但是多对多关系的实现是有两个表和一个中间表来关联两个实体。我认为这太过分了，因为我知道一个 Match 总是有两个 Teams 并且只需有两列（local_id 和 visitant_id）以及 Teams 表的外键就足够了。另外，我希望能够做到：

```
Match::find(1)->local() or Match::find(1)->visitant(); 
```

因此，考虑到这一点，我正在实施“一对多”关系，但是对此我还有另一个问题。要检索团队参加过的所有比赛，我想做：

```
Team::find(1)->matches(); 
```

但是我不能这样做，因为我在 eloquent 中定义matches() 方法时只能指定一个键列（默认情况下是team_id，但应该是visitant_id 和local_id）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-13T17:45:45.220

在深入研究源代码后，我发现有一种方法可以实际保持我的数据库模式并实现我想要的（至少在 Laravel 4 中）。我在 github 上发布了我的问题，Taylor Otwell（框架的创建者）给了我正确的答案：[https ://github.com/laravel/framework/issues/1272](https://github.com/laravel/framework/issues/1272)

引用他的话，应该就这么简单：

```
class Team extends Eloquent  {
    public function allMatches()
    {
        return $this->hasMany('Match', 'visitant_id')->orWhere('local_id', $this->id);
    }
} 
```

接着...

```
$team = Team::find(2);
$matches = $team->allMatches; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T01:44:07.250

这是著名的数据库设计问题之一。例如，友谊关系也面临同样的困难。由于您使用的是 Eloquent，我建议您坚持使用多对多方法并`local`在中间表上添加一个额外的布尔列

```
class Match extends Eloquent {
    public $includes = array('team'); // Always eager load teams
    public function teams() {
        return $this->has_many_and_belongs_to('team')->with('local');
    }
    public function get_local() {
        foreach ($this->teams as $team) {
            if ($team->pivot->local) return $team;
        }
    }
    public function get_visitant()   {
        foreach ($this->teams as $team) {
            if (!$team->pivot->local) return $team;
        }
    }
}

class Team extends Eloquent  {
    public function matches() {
        return $this->has_many_and_belongs_to('match')->with('local');
    }
    // I'm doing separate queries here because a team may have
    // hundreds of matches and it's not worth looping through
    // all of them to retrieve the local ones
    public function matches_as_local()  {
        return $this->has_many_and_belongs_to('match')->with('local')
            ->where('pivot_local', '=', 1);
    }
    public function matches_as_visitant()  {
        return $this->has_many_and_belongs_to('match')->with('local')
            ->where('pivot_local', '=', 0);
    }
} 
```

**观察：**

该方法`has_many_and_belongs_to(...)->with('field')`与预加载无关。它告诉 Eloquent 加载中间表列`field`并将其放入数据透视表中。

**用法：**

```
$match = Match::find(1);

$match->local; // returns local team
$match->visitant; // returns visitant team

$team = Team::find(1);
$team->matches; // returns all matches
$team->matches_as_local; // ...
$team->matches_as_visitant; // ...

foreach ($team->matches as $match) {
    if ($match->pivot->local) {
        // put nice local icon here
    } else {
        // put nice visitant icon here
    }
} 
```

# c++ - std::reference_wrapper 的隐式 T& 构造函数 使用起来很危险？

> ID：15646681
> 
> 赞同：24
> 
> 时间：2013-03-26T20:24:21.143
> 
> 标签：c++, c++11

`boost::reference_wrapper<T>`有一个**显式** `T&`构造函数，而`std::reference_wrapper<T>`有一个**隐**式构造函数。因此，在以下代码中：

```
foo = bar; 
```

如果`foo`是 a `boost::reference_wrapper`，则代码将无法编译（这很好，因为**与**`reference_wrapper`实际引用的语义不同。

 **如果`foo`是 a `std::reference_wrapper`，代码将“重新绑定”`foo`对的引用`bar`（而不是像人们可能错误地期望的那样分配值）。

这可能会导致难以捉摸的错误...考虑以下示例：

*在一些假设库的**1.0版中：***

```
void set_max(int& i, int a, int b) {
    i = (a > b) ? a : b;
} 
```

*在新版本（**1.1**）中，`set_max`转换为模板以接受任何宽度（或 UDT）的整数，而无需更改接口：*

```
template<typename T1, typename T2, typename T3>
void set_max(T1& i, T2 a, T3 b) {
    i = (a > b) ? a : b;
} 
```

*最后，在一些使用该库的应用程序中：*

```
// i is a std::reference_wrapper<int> passed to this template function or class
set_max(i, 7, 11); 
```

在这个例子中，库改变了它的实现`set_max`而不改变调用接口。这会默默地破坏任何传递它的代码，`std::reference_wrapper`因为参数将不再转换为`int&`，而是“重新绑定”到一个悬空引用（`a`或`b`）。

**我的问题：**为什么标准委员会选择允许隐式转换（从`T&`到`std::reference_wrapper<T>`）而不是遵循`boost`并使`T&`构造函数显式？

* * *

**编辑：（** *回应乔纳森维克利提供的答案）......*

原始演示（在上面的部分中）有意简洁地展示细微的库更改如何导致使用`std::reference_wrapper`将错误引入应用程序。

`reference_wrapper`为了响应 Jonathan Wakely 的观点，提供了下一个演示以展示“通过接口传递引用”的真实合法用途。

*   **来自开发商/供应商 A**

*类似于`std::bind`但假装它专门用于某些任务的东西：*

```
template<typename FuncType, typename ArgType>
struct MyDeferredFunctionCall
{
    MyDeferredFunctionCall(FuncType _f, ArgType _a) : f(_f), a(_a) {}

    template<typename T>
    void operator()(T t) { f(a, t); }

    FuncType f;
    ArgType a;
}; 
```

*   **来自开发商/供应商 B**

*一个`RunningMax`函子类。在这个虚构库的 1.0 和 1.1 版本之间，实现`RunningMax`被更改为更通用，而没有更改其调用接口。**出于本演示**的目的，旧实现定义在命名空间中`lib_v1`，而新实现定义在`lib_v2`：*

```
namespace lib_v1 {
    struct RunningMax {
        void operator()(int& curMax, int newVal) {
                if ( newVal > curMax ) { curMax = newVal; }
            }
    };
}
namespace lib_v2 {
    struct RunningMax {
        template<typename T1, typename T2>
        void operator()(T1& curMax, T2 newVal) {
                if ( newVal > curMax ) { curMax = newVal; }
            }
    };
} 
```

*   **最后但并非最不重要的是，上述所有代码的最终用户：**

*一些开发人员使用供应商/开发人员 A 和 B 的代码来完成某些任务：*

```
int main() {
    int _i = 7;
    auto i = std::ref(_i);
    auto f = lib_v2::RunningMax{};

    using MyDFC = MyDeferredFunctionCall<decltype(f), decltype(i)>;
    MyDFC dfc = MyDFC(f, i);
    dfc(11);

    std::cout << "i=[" << _i << "]" << std::endl; // should be 11
} 
```

**请注意以下事项：**

*   最终用户使用`std::reference_wrapper`预期的方式。

*   **单独**来看，没有任何代码有错误或逻辑缺陷，并且一切都与 Vendor **B**的库的原始版本完美配合。

*   boost::reference_wrapper 在升级库时将无法编译，而 std::reference_wrapper 默默地引入了一个可能会或可能不会在回归测试中发现的错误。

*   跟踪这样的错误将很困难，因为“重新绑定”不是诸如工具之类的工具会捕获的*内存错误。*`valgrind`此外，滥用的实际站点`std::reference_wrapper`将在供应商**B**的库代码中，而不是最终用户的。

**底线：** `boost::reference_wrapper`通过将其构造函数声明为显式，似乎更安全`T&`，并且可以防止引入这样的错误。删除显式构造函数限制的决定`std::reference_wrapper`似乎为了方便而损害了安全性，这在语言/库设计中应该很少发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:48:08.977

> 这将默默地破坏任何传递它的代码，`std::reference_wrapper`因为参数将不再转换为`int&`，而是“重新绑定”到一个悬空引用（a 或 b）。

所以不要那样做。

`reference_wrapper`用于*通过*接口传递引用，否则会产生按值复制，而不是用于传递*给*任意代码。

还：

> `// i is a std::reference_wrapper<int> (perhaps b/c std::decay wasn't used)`

`decay`不会改变任何东西，它不会影响引用包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:24:52.003

Nate Kohl 提供的[**DR-689**](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#689)链接充分解释了**隐式转换**( `T&`--> `reference_wrapper<T>`) 允许**但**`std::reference_wrapper<T>`不允许的原因。总结一下： **`boost::reference_wrapper<T>`[](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#689)**

 ****2007 年，C++0x/C++11*库工作组*(LWG) 提议将 # **DR-689**更改为标准的部分`20.8.3.1 [refwrap.const]`：

> **reference_wrapper 的构造函数当前是显式的**。这背后的*主要*动机是与右值相关的安全问题，该问题由 [DR-688] 的提议决议解决。因此，我们应该***考虑放宽***对构造函数的要求，因为隐式转换的请求不断出现。
> 
> **建议的解决方案：**从 reference_wrapper 的构造函数中删除显式。

值得指出的是：

*   `boost::reference_wrapper`并[**没有**](http://www.boost.org/doc/libs/1_53_0/doc/html/ref.html)以这种方式放宽，似乎也没有针对它的提议，这造成`boost::reference_wrapper`和的语义不一致`std::reference_wrapper`。

*   根据 DR-689 中的措辞（特别是“请求不断浮出水面”部分），LWG 似乎将这种变化简单地视为安全性和便利性之间的可接受折衷（与其对应的 boost 相比）。

*   目前尚不清楚 LWG 是否预见到其他潜在风险（例如本页提供的示例中所展示的风险），因为 DR-689 中提到的唯一风险是绑定到右值（如上一条条目中所述和解决的，DR -688)。******

# snmp - Windows 计算机 CPU 核心温度的 SNMP OID

> ID：15646682
> 
> 赞同：2
> 
> 时间：2013-03-26T20:24:23.383
> 
> 标签：snmp, temperature, oid

我正在开发一个 Android 应用程序来使用 SNMP 从计算机中检索一些信息。是否可以通过 SNMP 获取 CPU 温度（或设备内的任何温度）？如果可能，访问信息的 OID 是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:17:46.010

这取决于硬件和操作系统。对于 Linux 服务器，您可以使用 lm-sensors。lm-sensors 支持主板上的温度和风扇速度。lm 传感器有一个 MIB。我只在 SLES 上使用了 lm-sensors，你必须在那里下载并安装它的支持。

我不知道 Windows 上是否支持 lm-sensors。也许您可以通过 WMI 获取一些东西...？

如果是“真实服务器”，供应商（HP 等）可能有一个 SNMP 代理和 MIB 已经支持它。那么它可能适用于 Linux 和 Windows。

另请参阅[如何获取 PC 主板的温度（和其他硬件统计信息）？](https://stackoverflow.com/questions/123575/how-to-get-the-temperature-of-motherboard-of-a-pc-and-other-hardware-statistics)

# wpf - Windows 8 桌面应用程序：打开 tabtip.exe 到辅助键盘（用于数字文本框）

> ID：15646684
> 
> 赞同：9
> 
> 时间：2013-03-26T20:24:29.563
> 
> 标签：wpf, windows-8, desktop-application, on-screen-keyboard

我们正在开发一个在 Windows 7 平板电脑上运行的**桌面 WPF**应用程序，并且正在将一些带有 Windows 8 的 Surface Pro 单元添加到组合中。

我们立即注意到，当 TextBox 获得焦点时，小键盘图标不再显示。我们通过在所有文本框的 MouseDown 事件上运行“tabtip.exe”来解决它。

虽然我们有一些数字文本框（订单中商品的数量），并且想要打开屏幕键盘进行数字输入，但默认情况下它会使用 qwerty 键打开。

我一直在广泛搜索可以传递给 tabtip.exe 以更改其输入模式的任何命令行参数，但没有运气。对于 Metro 风格的应用来说，这似乎是一项微不足道的任务，但在桌面端却是不可能的。

我可以使用 tabtip.exe 的命令行参数来完成此操作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-16T09:32:58.027

继@tymes 提供的答案之后，这是一个快速控制台应用程序，它演示了如何打开键盘并更改各种设置（C#）。：

```
using System;
using System.Diagnostics;
using Microsoft.Win32;

namespace CSharpTesting
{
    class Program
    {
        /// <summary>
        /// The different layout types on the virtual keyboard.
        /// </summary>
        public enum KeyboardLayoutMode
        {
            Default,
            ThumbLayout,
            Handwriting
        }

        /// <summary>
        /// The registry key which holds the keyboard settings.
        /// </summary>
        private static readonly RegistryKey registryKey = Microsoft.Win32.Registry.CurrentUser.CreateSubKey("Software\\Microsoft\\TabletTip\\1.7");

        static void Main(string[] args)
        {
            SetKeyboardDockedMode(true);
            SetKeyboardLayoutMode(KeyboardLayoutMode.ThumbLayout);
            ShowKeyboard(true);
        }

        /// <summary>
        /// Shows the onscreen keyboard.
        /// </summary>
        /// <param name="killExistingProcess">If true, kill any existing TabTip.exe process.</param>
        public static void ShowKeyboard(bool killExistingProcess)
        {
            if (killExistingProcess)
            {
                // If the user presses the close button on the keyboard then TabTip.exe will still run in the background. If we have made registry
                // changes to the keyboard settings, they don't take effect until the process is started again so killing this ensures the keyboard
                // will open with our new settings.
                foreach (var process in Process.GetProcessesByName("TabTip"))
                {
                    process.Kill();
                }
            }

            string onScreenKeyboardPath = @"C:\Program Files\Common Files\Microsoft Shared\ink\TabTip.exe";
            Process.Start(onScreenKeyboardPath);
        }

        /// <summary>
        /// Sets if the keyboard is in docked or floating mode.
        /// </summary>
        /// <param name="isDocked">If true set to docked, if false set to floating.</param>
        private static void SetKeyboardDockedMode(bool isDocked)
        {
            registryKey.SetValue("EdgeTargetDockedState", Convert.ToInt32(isDocked), RegistryValueKind.DWord);
        }

        /// <summary>
        /// Changes the layout mode of the keyboard.
        /// </summary>
        /// <param name="mode">The layout mode to use.</param>
        private static void SetKeyboardLayoutMode(KeyboardLayoutMode mode)
        {
            switch (mode)
            {
                case KeyboardLayoutMode.Handwriting:
                    registryKey.SetValue("KeyboardLayoutPreference", 0, RegistryValueKind.DWord);
                    registryKey.SetValue("LastUsedModalityWasHandwriting", 1, RegistryValueKind.DWord);
                    break;
                case KeyboardLayoutMode.ThumbLayout:
                    registryKey.SetValue("KeyboardLayoutPreference", 1, RegistryValueKind.DWord);
                    registryKey.SetValue("LastUsedModalityWasHandwriting", 0, RegistryValueKind.DWord);
                    // 0 = small, 1 = medium, 2 = large
                    registryKey.SetValue("ThumbKeyboardSizePreference", 2, RegistryValueKind.DWord);
                    break;
                default:
                    registryKey.SetValue("KeyboardLayoutPreference", 0, RegistryValueKind.DWord);
                    registryKey.SetValue("LastUsedModalityWasHandwriting", 0, RegistryValueKind.DWord);
                    break;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-06T06:51:36.127

在`HKEY_CURRENT_USER\Software\Microsoft\TabletTip\1.7`(Windows 8) 中更改 REG_DWORD`KeyboardLayoutPreference` 的值`0`是常规布局值`1`是中间​​带有数字键盘的拆分键盘

REG_DWORD`LastUsedModalityWasHandwriting`也必须是`0`或者如果`1`，当 tabtip 再次启动时，它将与笔手写区域一起打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:33:21.027

您可以通过 Tabtip 的注册表设置来控制输入模式。查找名称为 KeyboardLayoutPreference 的注册表项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-20T00:06:40.007

我从未使用过 win 8，但在 win 10 中，您可以使用[InputScope](https://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.inputscope%28v=vs.95%29.aspx?f=255&MSPPError=-2147217396)来控制使用的屏幕键盘：

```
<TextBox Grid.Row="0"
         InputScope="Number" />
<TextBox Grid.Row="1"
         InputScope="Default" /> 
```

# java - 为什么我会收到 ClassCastException，我该如何解决？

> ID：15646686
> 
> 赞同：1
> 
> 时间：2013-03-26T20:24:30.517
> 
> 标签：java, casting

为什么我会收到 ClassCastException，我该如何解决？我收到以下异常消息。代码如下：

`Exception in thread "main" java.lang.ClassCastException`：

```
java.lang.String cannot be cast to java.lang.Integer
        at HighScores.sort(HighScores.java:32)
        at HighScores.main(HighScores.java:10) 
```

这是我的代码：

```
import java.util.*;

public class HighScores {
    public static void main( String args[] )
    {
        ArrayList<String> names = new ArrayList();
        ArrayList<Integer> scores = new ArrayList();
        initialize( names, scores );
        sort( names, scores );
        display( names, scores );
    }

    public static void initialize( ArrayList names, ArrayList scores )
    {
        Scanner in = new Scanner( System.in );
        for ( int i = 0; i < 5; i++ )
        {
            System.out.println( "Enter the name for score # " + (i + 1) + ": " );
            names.add( in.next() );
            System.out.println( "Enter the score for score # " + (i + 1) + ": " );
            scores.add( in.next() );
        }
    }

    public static void sort( ArrayList<String> names, ArrayList<Integer> scores )
    {
        for ( int i = 0; i < (4); i++ )
        {
            for ( int j = (i + 1); j < (3); j++ )
            {
/*Line 32 -->*/ if ( scores.get( i ) < scores.get( j ) )
                {
                    int tempScore = scores.get( i );
                    scores[i] = scores[j];
                    scores[j] = tempScore;
                    String tempName = names.get( i );

                    names[i] = names[j];
                    names[j] = tempName;

                    scores.add( i, maxValue );
                    scores.remove( j );
                    scores.add( j, temp );

                    String tempName = names.get( i );
                    String maxName = names.get( j );
                    names.remove( i );
                    names.add( i, maxName );
                    names.remove( j );
                    names.add( j, tempName );

                }
            }
        }
    }

    public static void display( ArrayList names, ArrayList scores )
    {
        System.out.println( "Top Scorers: " );
        System.out.println( names );
        System.out.println( scores );
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:42:11.923

问题是您正在读取分数`String`，并试图将分数放入 ArrayList 中`Integer`。

您需要将分数读取为整数，或将分数解析为整数。

请参阅下面的 API 链接

[http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt()) [http://docs.oracle.com/javase/7/docs/api/java/lang /Integer.html#parseInt(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String))

# android - Titanium.Network.HTTPClient 缓存 responseData。我该如何防止呢？

> ID：15646687
> 
> 赞同：1
> 
> 时间：2013-03-26T20:24:35.620
> 
> 标签：android, caching, titanium

我想知道如何防止`Titanium.Network.HTTPClient`缓存我的`responseData`？这发生在 android 的目录`/sdcard/Android/data/com.packagename/cache/_tmp`中，文件的文件名遵循这种模式`tihttp-XXXXXXXXXXXtmp`。我已经在应用程序私有数据目录中实现了自定义缓存。所以我不需要它发生两次并浪费用户宝贵的数据空间在他们的 sdcard 上。另外，sdcard 中的缓存并不总是存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:41:21.693

```
var client = Ti.Network.createHTTPClient({
     onload : function(e) {
         Ti.API.info("Received text: " + this.responseText);
         alert('success');
     },
     timeout : 5000,
     cache : false,

 }); 
```

上面的内容仅在稍微查看后才适用于 iPhone，但如果您将标头直接设置为请求，它应该适用于 iPhone 和 Android：

```
client.setRequestHeader('Cache-Control','no-cache');
client.setRequestHeader('Cache-Control','no-store'); 
```

这必须在打开之后，但在请求发送之前调用，即：

```
var client = Ti.Network.createHTTPClient();
client.open('GET','http://google.com/');
client.setRequestHeader('Cache-Control','no-cache');
client.setRequestHeader('Cache-Control','no-store');
client.send('nice'); 
```

# wpf - 仅调整打开的扩展器的大小

> ID：15646689
> 
> 赞同：0
> 
> 时间：2013-03-26T20:24:45.577
> 
> 标签：wpf, xaml, expander, window-resize

我在一个窗口中有 3 个扩展器，我想知道是否有办法拥有它，这样如果我打开了扩展器 2 和 3，但没有打开 1，它只会拉伸这 2 个。目前正在平等地拉伸所有三个。此外，当它们关闭时，内容会关闭，但列保持与打开时相同的宽度。

让它们仅在展开时拉伸并在折叠时返回到 10 像素宽的小尺寸的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T21:22:49.963

You could set `Triggers` on the `ColumnDefinitions` to set the `Width` to Fixed when the `Expander` is closed and set to proportional when the `Expander` is open.

Example:

```
 <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition>
                <ColumnDefinition.Style>
                    <Style TargetType="ColumnDefinition">
                        <Setter Property="Width" Value="20" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsExpanded, ElementName=expander1}" Value="True">
                                <Setter Property="Width" Value="20*" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ColumnDefinition.Style>
            </ColumnDefinition>
            <ColumnDefinition>
                <ColumnDefinition.Style>
                    <Style TargetType="ColumnDefinition">
                        <Setter Property="Width" Value="20" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsExpanded, ElementName=expander2}" Value="True">
                                <Setter Property="Width" Value="20*" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ColumnDefinition.Style>
            </ColumnDefinition>
            <ColumnDefinition>
                <ColumnDefinition.Style>
                    <Style TargetType="ColumnDefinition">
                        <Setter Property="Width" Value="20" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsExpanded, ElementName=expander3}" Value="True">
                                <Setter Property="Width" Value="20*" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ColumnDefinition.Style>
            </ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Expander Name="expander1" Grid.Column="0" Header="Expander1" />
        <Expander Name="expander2" Grid.Column="1" Header="Expander2" />
        <Expander Name="expander3" Grid.Column="2" Header="Expander3" />
    </Grid> 
```

Result:

![enter image description here](../Images/85f3f37be0da3425f5d154abdaa5574c.png) ![enter image description here](../Images/9e1ae651572f4c57905f650eaeb7b83f.png)

![enter image description here](../Images/09d02f010c0e41fcc8a3c18035b9445a.png) ![enter image description here](../Images/f4862458a99072c45d1a7a8ddc91747b.png)

# java - 链接到底是什么（符号或其他）

> ID：15646691
> 
> 赞同：0
> 
> 时间：2013-03-26T20:24:52.750
> 
> 标签：java, file, io, hyperlink, nio

我正在使用 NIO.2 开发一个 java 项目，我遇到了 Files.createLink 方法。在对 The Java Tutorials 进行一些研究后，我发现这些似乎类似于 Windows 快捷方式，但我不确定它们是否是这样的。如果不是，我怎么能创建一种独立于平台的方式来创建快捷方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:28:42.393

**创建符号链接**

> **如果您的文件系统支持它**，您可以使用 createSymbolicLink(Path, Path, FileAttribute) 方法创建符号链接。第二个 Path 参数表示目标文件或目录，可能存在也可能不存在。以下代码片段创建一个具有默认权限的符号链接：

**来源：** [http ://docs.oracle.com/javase/tutorial/essential/io/links.html](http://docs.oracle.com/javase/tutorial/essential/io/links.html)

# ios - Json 加速器和 AFNetworking

> ID：15646693
> 
> 赞同：0
> 
> 时间：2013-03-26T20:24:59.037
> 
> 标签：ios, json, afnetworking

操作运行时，无法在由加速器创建的 JSON 模型中输入数据。你能告诉我我做错了什么吗？

```
{
    [super viewDidLoad];

NSLog(@"you are in a tableViewController");
self.title = @"NavigationOrdini";

NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.stampa6x3.com/json.php?azione=ordini"]];
AFJSONRequestOperation* operation;

operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:req
                                                            success:^(NSURLRequest *request, NSURLResponse *response, id JSON)
{

    [[ordiniModel alloc] initWithDictionary:JSON];

}
             failure:^(NSURLRequest *request, NSURLResponse *response, NSError
                       *error, id JSON) {
                 [self setTitle:@"Dictionary"];
                 NSLog(@"failed! %d",[error code]);
             }];
[operation start];

ordiniModel*test;

NSLog(@"il valore è %@",test.ordini.description);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:34:55.693

AFJSONRequestOperation 是异步的，这意味着代码在应用程序的其余部分运行时继续执行。完成块在代码实际完成时运行。

所以试试：

```
NSLog(@"you are in a tableViewController");
self.title = @"NavigationOrdini";
ordiniModel *test;  // <-- create variable here

NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.stampa6x3.com/json.php?azione=ordini"]];
AFJSONRequestOperation* operation;

operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:req
                                                            success:^(NSURLRequest *request, NSURLResponse *response, id JSON)
{

    test = [[ordiniModel alloc] initWithDictionary:JSON]; // <-- Assign here
    NSLog(@"il valore è %@",test.ordini.description);

}
             failure:^(NSURLRequest *request, NSURLResponse *response, NSError
                       *error, id JSON) {
                 [self setTitle:@"Dictionary"];
                 NSLog(@"failed! %d",[error code]);
             }];
[operation start]; 
```

# php - PHP回显代码不起作用

> ID：15646703
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:25:37.600
> 
> 标签：php, mysql, ajax

以下是试图打印一些语句的 PHP 代码。但它所做的只是打印以下错误：

解析错误：语法错误，第 8 行 C:\Program Files\Apache Group\Apache2\htdocs\chat_status.php 中的意外 T_STRING

编码：

```
<?php
session_start();
$con=mysql_connect("localhost","hi","hello");
mysql_select_db("my_db",$con);
$check_table=mysql_query("SELECT * FROM `$row[studentid]"."to"."$_GET[id]`);
if($check_table!=FALSE)
{
$asd="no suggestion";
echo $asd;
}
else
{
$result1=mysql_query("SELECT * FROM students WHERE email='$_SESSION[user_name]'");
$row=mysql_fetch_array($result1);
$create_table="CREATE TABLE `$row[studentid]"."to"."$_GET[id]`(post_number int not null 
auto_increment,primary key(post_number),data text(20000))";
$result=mysql_query($create_table,$con);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:28:53.880

尝试这个

```
 <?php
 session_start();
 $con=mysql_connect("localhost","hi","hello");
 mysql_select_db("my_db",$con);
 $check_table=mysql_query("SELECT * FROM '$row[studentid]'.'to'.'$_GET[id]' ");
 if($check_table!=FALSE)
 {
 $asd="no suggestion";
 echo $asd;
 }
 else
 {
$result1=mysql_query("SELECT * FROM students WHERE email='$_SESSION[user_name]'");
$row=mysql_fetch_array($result1);
$create_table="CREATE TABLE '$row[studentid]'.'to'.'$_GET[id]' (post_number int not  null 
 auto_increment,primary key(post_number),data text(20000))";
 $result=mysql_query($create_table,$con);
 }

 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:26:53.477

将以下行更改为：

```
$check_table=mysql_query("SELECT * FROM `$row[studentid]"."to"."$_GET[id]`"); 
```

注意关闭`"`。

另**请注意**@jamie0726 的评论（谢谢）：

> 在任何情况下，请不要在查询中使用 $_GET。这是一个严重的安全错误（SQL 注入，例如使用您的代码很容易删除您的数据库。）。您可以轻松避免这种情况。查看

# css - IE6/7 列布局 CSS 问题

> ID：15646704
> 
> 赞同：1
> 
> 时间：2013-03-26T20:25:38.167
> 
> 标签：css, asp.net-mvc-4, internet-explorer-7, internet-explorer-6

我正在尝试在我的布局模板的标题部分构建一个包含 3 列（固定 - 液体 - 液体）的标题，`ASP.NET MVC4`但我无法完全使用 IE6+、Chrome、FF 等。

具体来说，我需要它看起来像

```
 |--------------------------------------|
 | wrapper                              |
 | |---------| |----------| |---------| |
 | | left    | |   title  | | right   | |
 | |---------| |----------| |---------| |
 |--------------------------------------| 
```

问题（除了必须支持 IE6 和 IE7）是当窗口小于 500 像素时，我需要进行一些换行；看起来像。这种包装只需要在支持媒体查询的浏览器上进行。（因此，对于 IE < 9，它可以在缩小上例中的“标题”时将其缩小）。

```
 |--------------------------------------|
 | header-wrapper                       |
 | |---------|              |---------| |
 | | left    |              | right   | |
 | |---------|              |---------| |
 |                                      |
 | |----------------------------------| |
 | |              title               | |
 | |----------------------------------| |
 |--------------------------------------| 
```

这是我到目前为止的CSS

```
.content-wrapper {
    margin: 0 auto;
    max-width: 1140px;   
}
.header-wrapper {
    text-align: center;
    vertical-align: text-bottom;
}
.header-left-box {
    float: left;
    width: 160px;
}
.header-right-box {
    float: right;
    margin:auto;    
}
.header-center-box {
    min-width: 200px;
    background:none;
    margin:auto;
    width:50%;
    padding: 4px;
}
.site-logo
{
    background-image:url('/Content/images/logo.png');
    background-repeat: no-repeat;
    background-position: top left;    
    display:block;        
    width:130px;
    height:80px;    
    margin-bottom: 5px;
} 
```

这是MVC4模板的相关部分

```
<header>
    <div class="content-wrapper header-wrapper">
        <div class="header-left-box">
            <div class="site-logo"></div>      
        </div>
        <div class="header-right-box">
            <nav>
                <ul id="menu"><li>Quit</li></ul>
            </nav>               
        </div>                        
        <div class="header-center-box">
            <p>title</p>
        </div>
    </div>
</header> 
```

我更喜欢利用 CSS 和 HTML 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:51:43.900

除了 Jason 的回答之外，对于特定于浏览器的编码或样式表，您可以将 javascript 用于 IE 以外的浏览器。

```
if (navigator.userAgent.toLowerCase().indexOf('chrome') != -1) {
    document.write('<link rel="stylesheet" type="text/css" href="style-ch.css" media="all" />');
} 
```

就像`<!--[if IE 6]><![endif]-->`，仅当使用的浏览器是指定的浏览器时，才会运行一些代码（在上面的示例中，加载特定于 chrome 的样式表）。

当然你也可以指定浏览器版本，像这样： `.indexOf('chrome 11')`

*确保在声明常规/跨浏览器样式表之后*声明此代码，否则它可能不起作用。

不过，我不明白您为什么要为 IE6 和 IE7 进行优化，因为它们真的太老了。但这当然是您个人的选择:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:58:48.953

问题中提供的代码适用于我需要的一切，除了 IE6 和 IE7。

我决定在我的布局中添加以下内容来替换原来的 body 标签。

```
<!--[if IE 6]> <body class="ie6"> <![endif]-->
<!--[if IE 7]> <body class="ie7"> <![endif]-->
<!--[if gt IE 7]><!--> <body> <!--<![endif]--> 
```

有了这个，我可以使用以下样式作为问题中已经定义的样式的补充。

```
.ie6 .header-wrapper,
.ie7 .header-wrapper {
    text-align: center;
    vertical-align: text-bottom;        
    height: 85px;
}

.ie6 .header-left-box,
.ie7 .header-left-box {    
    float: left;
    width: 25%;
    height: 82px;
}

.ie6 .header-right-box,
.ie7 .header-right-box {
    float: right;
    width: 25%;
    height: 82px;
    text-align: right;    
}

.ie6 .header-center-box,
.ie7 .header-center-box {    
    padding: 4px;       
    margin-left: 26.2%;
    margin-right: 26.2%;
    width: 40%;
} 
```

这可以处理我需要列对所有浏览器执行的所有操作，包括 IE6 和 IE7 中的列换行。

# javascript - Web Worker 内存泄漏？

> ID：15646705
> 
> 赞同：5
> 
> 时间：2013-03-26T20:25:39.130
> 
> 标签：javascript, google-chrome, memory-leaks, google-chrome-devtools, web-worker

我一直在使用[Chrome 的时间轴](https://developers.google.com/chrome-developer-tools/docs/timeline)视图来尝试追踪我页面中的一些内存泄漏。我发现了一个特殊的内存泄漏，它是由实例化网络工作者导致的，我似乎无法弄清楚如何摆脱它。

我已经剥离了页面，只加载了 web worker 而没有做任何其他事情。每次刷新页面时，Chrome 时间轴视图上的 Document Count 都会永久增加 1。如果我注释掉对 Worker 构造函数的调用，并开始刷新页面，文档计数会先增加后减少，实际上保持不变。手动终止/关闭工作人员并不能解决问题（尽管当我查看开发人员工具的 Sources 选项卡时可以看到工作人员消失了）。

这是我精简的 .htm 文件。我可以用这一小段 html/javascript 重现这个问题：

```
<html>
<script type="text/javascript">
var worker_blob = new Blob(["var test = 1;"]);
var worker_url = window.URL.createObjectURL(worker_blob);
// Comment out the line below and the memory leak goes away
var worker = new Worker(worker_url);
window.URL.revokeObjectURL(worker_url);
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:09:24.840

This is a memory leak in Chrome v25\. It appears to be fixed in Chrome v26, as the issue can no longer be reproduced.

# c# - 带有子报表的 Microsoft ReportViewer System.IOException，RV 在错误的目录中查找

> ID：15646708
> 
> 赞同：0
> 
> 时间：2013-03-26T20:25:48.860
> 
> 标签：c#, reportviewer, subreport, report-viewer2010

我正在处理的项目中有几份报告是由不再为公司工作的其他人创建的。报告都可以正常工作，大多数都有多个子报告也可以正常工作。我一直在处理的一份特定报告也有多个子报告，但它们不起作用。

子报表按应有的方式显示和显示，因此从外部看，它们看起来一切正常。但是，当我显示报告时，我会为每个子报告获得大约 5 组 System.IOExceptions。例外情况表明无法找到子报表文件，并且由于某种原因它正在“c:/”目录中查找子报表文件。我无法弄清楚为什么会发生这种情况，以及为什么只有这一份报告会发生这种情况。

我知道子报表文件应该与它们正在使用的报表位于同一目录中，并且它们实际上就在那里。我查看了每个报告和子报告文件中的源代码，其中没有任何内容表明不抛出异常的报告与抛出异常的报告之间存在任何差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:51:59.773

问题是文件访问权限问题。我将项目保存在根目录下，但将其移动到默认位置（“Documents/Visual Studio 2010/Projects/”）解决了这个问题。

# php - 如何在 CodeIgniter 的一个视图中使用多种语言？

> ID：15646716
> 
> 赞同：5
> 
> 时间：2013-03-26T20:26:23.213
> 
> 标签：php, codeigniter

例如，我将加载类似的语言（顺便说一句。我认为只有这两种语言中的第一种，英语将被加载，其他忽略）：

```
$this->lang->load('module_messages', 'english');
$this->lang->load('module_messages', 'czech'); 
```

但我只能使用这样的东西：

```
echo $this->lang->line('language_key'); 
```

这不起作用：

```
echo $this->lang->line('language_key', 'english'); 
```

任何想法如何在同一视图中同时回显两种语言翻译，例如：

```
echo $this->lang->line('language_key', 'english');
echo $this->lang->line('language_key', 'czech'); 
```

如何实现这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T03:31:58.410

不幸的是，目前没有办法做这样的事情，因为密钥是为一种语言文件加载的。加载多个文件并不典型。

但是，有一种解决方法，那就是使用如下前缀：

```
$this->lang->load('en_module_messages', 'english');
$this->lang->load('cs_module_messages', 'czech');

echo $this->lang->line('en_language_key');
echo $this->lang->line('cs_language_key'); 
```

如果您将语言文件和键命名为相同，它们当然会发生冲突。因此，我们在语言文件和线路键中添加了 ISO 语言前缀。这样两种语言就保持分离，让您可以同时使用它们。

# asp.net-mvc - 自动化 Azure VIP 交换

> ID：15646717
> 
> 赞同：1
> 
> 时间：2013-03-26T20:26:26.477
> 
> 标签：asp.net-mvc, azure

我有一个作为 Azure Web 角色托管的 ASP.NET MVC 4 应用程序。我想做一些看起来应该很标准的事情：**我想创建一个我可以调用的函数，它启动 VIP 交换并在 VIP 交换操作完成时引发和事件（或调用回调）。**

只是为这种情况添加一些背景信息：我的网站实施了一个大约需要一个小时（或更短时间）才能完成的工作流程。如果我要发布一个新版本的网站代码，可以先让所有当前用户完成工作流程，这样新代码就不需要处理由以前版本的代码创建的数据。因此，我网站中的管理功能首先会在数据库中插入一个值，以禁用新的工作流程；然后它会等到所有当前的工作流程都完成；然后它会调用“VIP交换”例程；最后，当 VIP 交换例程发出完成信号时，它将戳数据库值以重新启用新的工作流程。

我在这里找到了有关如何以编程方式启动 VIP 交换的 Microsoft 文档：http: [//msdn.microsoft.com/en-us/library/ee460814.aspx](http://msdn.microsoft.com/en-us/library/ee460814.aspx)

该过程涉及到 POST 到魔术 URL 并在 POST 中包含一些标头，然后定期执行对魔术 URL 的 GET 并检查响应代码。

我想得越多，它似乎就越不平凡。除了连接后台计时器和完成通知的基本复杂性之外，我不知道如果有的话，我可能会在 IIS 环境中尝试做这些事情。我什至可以在后台线程上执行 HTTP 操作吗？就此而言，我是否会因为尝试使用 .NET 中包含的六种左右不同的“在后台做事”机制中的任何一种而遇到麻烦？

任何帮助或指导将不胜感激。特别是，**如果有人能指出这个功能的现成实现，我会欣喜若狂！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:09:27.517

我认为你不会找到一个简单的解决方案，因为结构控制器设置为在没有你参与的情况下做一些非常花哨的事情。在云计算环境中运行长达一小时的工作流程，可以从您下方拉出一个实例（从调用 OnStopping 事件开始最多 5 分钟进行清理）要求您做其他工作以确保你所有的任务都完成了。

一个简单的问题是“如果实例在工作流仍在运行时出现故障，你会怎么做？” 您是重新启动它们还是丢失了它们？如果它们迷路了，那么您无论如何都不会在意，因此终止升级的工作流程同样不重要。如果您重新启动它们，则使用相同的机制来决定节点是否应该关闭，并相应地分配作业。这种模式与[Hadoop JobTracker](http://wiki.apache.org/hadoop/JobTracker)非常相似。不要只在任何 'ol 实例上运行工作流。将它们提交给决定做什么的（工作跟踪器）服务。然后，（作业跟踪器）服务可以使用服务管理 API 来扩展您需要运行所需版本的任意数量的实例，在适当的节点上运行工作流，并在不再需要或过时时关闭它们。

不幸的是，这可能不是您正在寻找的简单解决方案，但您的架构中的某些内容需要更改，而不是试图强制 PaaS 适应您当前的方法。分解您的工作负载、创建松散耦合的服务、针对故障进行设计，以及需要考虑的其他一些云/分布式计算实践。Hadoop 以这种方式构建是有原因的——它以能够在一堆有点不可靠的商品硬件上完成工作而闻名。

# jquery - 如何使用 jquery 从 html 下拉列表中删除重复项？

> ID：15646721
> 
> 赞同：0
> 
> 时间：2013-03-26T20:26:43.857
> 
> 标签：jquery, html, xml, drop-down-menu

我查看了一些线程，但是使用我拥有的代码我无法完成这项工作。我的 jquery 使用 xml 文件中的信息创建一个 html 下拉列表。我需要删除下拉菜单的重复选项。这不是必需的，但我还需要弄清楚如何仅显示从下拉列表中选择的类别中的项目。

所以现在它显示每个类别的次数与它在 xml 中出现的次数一样多。目标是让它显示每个类别一次。还非常感谢有关如何仅显示包含该类别的项目的提示。

jQuery：

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "XML/store.xml",
        dataType: "xml",
        success: function (xml) {
            $(xml).find("info").each(function () {
                var option = $(this).find('category').text();

                $('#dropdown').append('<option>' + option + '</option>');

            });
        }
    });
}); 
```

HTML：

```
<form>
<select id="dropdown">
    <option></option>
</select>
</form> 
```

XML 示例：

```
<products>
<info>
<image>
  <src>images/bosubalancetrainer.jpg</src>
</image>
<name>Bosu Sport Balance Trainer</name>
<brand>Bosu</brand>
<price>$85.95</price>
<category>Bosu Ball</category>
</info>
<info>
<image>
  <src>images/bosupro.jpg</src>
</image>
<name>Bosu Pro Balance Trainer</name>
<brand>Bosu</brand>
<price>$149.95</price>
<category>Bosu Ball</category>
</info>
<info>
<image>
  <src>images/bowflexdumbbell.jpg</src>
</image>
<name>552 Adjustable Dumbbells</name>
<brand>Bowflex</brand>
<price>$349.00</price>
<category>Weights</category>
</info>
<info>
<image>
  <src>images/bowflexbench.jpg</src>
</image>
<name>5.1 Series Bench</name>
<brand>Bowflex</brand>
<price>$259.00</price>
<category>Equipment</category>
</info>
</products> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T12:14:22.820

```
$(document).ready(function(){
   $("select").each(function () {
       var selectedItem = $(this).find('option').filter(':selected').text();
       var selectedItemValue = $(this).find('option').filter(':selected').val();
       $(this).children("option").each(function(x){
           if(this.text == selectedItem && $(this).val() != selectedItemValue) {
               $(this).remove();
            }
        });
    }); 
}); 
```

打这个！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:33:22.677

添加检查条件..

```
success: function (xml) {
      var arr = new Array();
      $(xml).find("info").each(function () {
           var option = $(this).find('category').text();
           if($.inArray(option, arr) > -1) {
               // Do nothing 
           }
           else {
               $('#dropdown').append('<option>' + option + '</option>');
                // Push into array
               arr.push(option);
           }
     });
} 
```

# ios - 如何在objective-c中增加一个Json对象

> ID：15646722
> 
> 赞同：0
> 
> 时间：2013-03-26T20:26:45.087
> 
> 标签：ios, objective-c, arrays, json, increment

如何增加 Json 数组？

我有这个数组，这个“jsonObjects”从webservice加载一个Json：

```
 arrBusca = [jsonObjects objectForKey:key]; 
```

如果我打印这个数组，结果如下：

```
2013-03-26 16:50:48.167 teste[6645:907] array 1: (
    {
    idMarca = 118;
    idTipo = 1;
    marca = "";
    ordem = 9999;
    tipo = Carro;
    },
    {
    idMarca = 60;
    idTipo = 1;
    marca = " -";
    ordem = 2;
    tipo = Carro;
    },
    {
    idMarca = 117;
    idTipo = 1;
    marca = "---";
    ordem = 2;
    tipo = Carro;
   }
} 
```

我想增加这个数组，所以我尝试：

```
 marcas *myPerson = [[marcas alloc] init];
    myPerson.marca = [NSString stringWithFormat:@"Fiat %d", i];
    myPerson.idMarca = [NSString stringWithFormat:@"%d", i];
    [arrBusca addObject:myPerson]; 
```

但结果是：

```
2013-03-26 16:50:48.167 teste[6645:907] array 1: (
    {
    idMarca = 118;
    idTipo = 1;
    marca = "";
    ordem = 9999;
    tipo = Carro;
    },
    {
    idMarca = 60;
    idTipo = 1;
    marca = " -";
    ordem = 2;
    tipo = Carro;
    },
    {
    idMarca = 117;
    idTipo = 1;
    marca = "---";
    ordem = 2;
    tipo = Carro;
   },
"<marcas: 0x1fd807e0>",
"<marcas: 0x1fd89e40>",
"<marcas: 0x1fd80c90>",
"<marcas: 0x1fd8a1b0>",
"<marcas: 0x1fd8ada0>",
"<marcas: 0x1fd89cb0>",
} 
```

任何人都知道如何增加 jsonobject 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:30:08.643

您需要提供 NSCoder 方法来归档和取消归档您的“ `marcas`”对象。

现在，当您将对象添加到“ `arrBusca`” NSMutableArray（它*是*可变的，对吗？）时，它们被添加为“ `marcas`”对象，而不是您从 JSON 解码的原始非 marcas 对象）。

# javafx - tabPaine 更改后的 javafx setFocus

> ID：15646724
> 
> 赞同：0
> 
> 时间：2013-03-26T20:26:51.573
> 
> 标签：javafx, tabpanel

问题：
让 tabPane 选项卡正常。
在第一个选项卡中有一个文本字段。启动应用程序时，我能够专注于该领域。更改选项卡并返回第一个选项卡后，我希望将焦点放在此文本字段上（条形码阅读器应在此字段中处于活动状态），而不必用鼠标选择该字段。

我可以从标签中捕获事件

```
 tp.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<Tab>()
   { etc 
```

（无法发布代码）

我能够为第一个选项卡触发事件。但是 field.requestFocus(); 不起作用。可能是因为此方法出现在呈现文本字段之前。

所以这是我的问题：

单击 TabPane 中的选项卡后如何将焦点设置在控件上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:28:10.310

如果您处理鼠标释放事件，它会起作用：（doFocus 仅在选项卡选择之前更改时启用 requestFocus 处理，否则每次单击 TabPane 中的某个位置时它都会启动。）

```
 final SimpleBooleanProperty doFocus = new SimpleBooleanProperty(false);
    tabPane.setOnMouseReleased(new EventHandler<Event>() {
        @Override
        public void handle(Event event) {
            if (!doFocus.get()) {
                return;
            }
            doFocus.set(false);
            switch (tabPane.selectionModelProperty().getValue().selectedIndexProperty().intValue()) {
            case 0: tf1b.requestFocus(); break;
            case 1: tf2a.requestFocus(); break;
            default: break;
            }
        }
    });
    tabPane.selectionModelProperty().getValue().selectedIndexProperty().addListener(new ChangeListener<Number>() {
        @Override
        public void changed(ObservableValue<? extends Number> observable,
                Number oldValue, Number newValue) {
            doFocus.set(true);
        }
    }); 
```

当 TabPane 具有焦点时，可以使用光标键更改选项卡选择，并且 TextFields 也不会通过基于选择的方法获得焦点。如果您需要，这可能也应该处理。

（最近我遇到了类似的问题。我注意到，当您按下鼠标按钮时，TabPane 会立即切换选项卡。我的猜测是，基于选择的方法请求在鼠标按下后立即关注 TextField，但继续按下鼠标会窃取焦点回到 TabPane。或者甚至可能改变选择的单个鼠标按下事件导致焦点回到 TabPane。但是，我对原因的假设可能不正确，因为我是 JavaFX 的新手。）

编辑：这种处理当然不是最佳的。例如，如果您使用键更改选项卡，doFocus 将被启用，然后单击 TabPane 中的任意位置将触发 requestFocus 调用。我认为应该提到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T08:53:37.477

[另外，当用户更改所选选项卡（使用鼠标或键盘） https://stackoverflow.com/a/19046535/2791746](https://stackoverflow.com/a/19046535/2791746)时，请查看我在 TextArea 上设置焦点的解决方案

# visual-studio - Visual Studio 2012 无需询问即可更改 IIS 应用程序目录

> ID：15646726
> 
> 赞同：7
> 
> 时间：2013-03-26T20:26:52.307
> 
> 标签：visual-studio, iis

如果您有一个使用 IIS 配置 Web 应用程序的解决方案，Visual Studio 将设置虚拟目录并将它们指向您的代码。如果该解决方案有多个分支，则相同的 IIS 应用程序将有不同的目录。如果您从与 IIS 应用程序当前指向的分支不同的分支打开解决方案，VS2010 会警告您，然后询问您是否要更改目录。VS 2012 不会警告您，它只是在不询问的情况下更改目录。

有没有办法让这个警告回来？有没有办法将 VS2012 设置为不更改目录或手动执行此操作的工具？

我经常在一个分支中工作，但我想查看另一个分支中的代码。如果我在 VS2012 中打开该分支，它会更改 IIS 中的目录，现在应用程序指向错误的代码。2010 会问我，如果我不希望它更改目录，我可以告诉它“不”。

谢谢，马修

# php - 在php上将日期时间从mysql更改为字符串格式

> ID：15646730
> 
> 赞同：-2
> 
> 时间：2013-03-26T20:27:07.827
> 
> 标签：php, mysql

我需要帮助将我的日期时间格式转换为我的 php 页面上的字符串格式

例如，如果我有这种日期格式：2013-03-26 20:18:55

我希望它在我的页面上显示为：2013 年 3 月 26 日 20:18:55。

这是我从 mysql 获取值的查询

```
 while($row = mysqli_fetch_assoc($result)){
                        echo 
                        'Date:' . $row['postDate'] . 
                        '</br>Posted by: ' . $row['firstName'] . 
                        '</br>Post :' . $row['post']. 
                        '<br/> <p>';}
mysqli_close($db); 
```

请注意，我的“postDate”的日期类型是日期时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:28:54.857

```
$datetime = new DateTime($row['postDate']);
$datetime->format('F d, Y H:i:s'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:29:10.210

```
echo date('F d, Y H:i:s', strtotime($row['postDate'])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:35:09.780

这里有两个选项：

您可以更改查询以将日期格式化为您想要的格式
[参见 DATE_FORMAT()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

或使用 PHP 的 strtotime() 和 date() 函数

```
date('F j,Y, H:i:s',strtotime($row['postDate'])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:32:30.313

您可以使用名称为一月、二月...的数组，当您获取数据时，只需用“-”分割您的日期，然后检查月份号..例如，如果您有 02，则显示二月。您可以使用开关盒进行检查。

# python - 如果在 Python 3.3 中，有没有一种很好的方法来让步？

> ID：15646733
> 
> 赞同：4
> 
> 时间：2013-03-26T20:27:17.030
> 
> 标签：python, python-3.x, generator, yield

有没有办法让这段代码更漂亮？

```
强 = li.find_all("强")
如果强：
  产量 li.find_all("强")

```

我的意思是这样的：

```
强 = li.find_all("强")
yield li.find_all("strong") if strong

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T20:32:46.893

你会使用：

```
strong = li.find_all("strong")
if strong:
    yield strong 
```

`find_all()` *而不是再次*调用（在 BeautifulSoup 中，它会给出相同的结果，但会*再次*完成工作）。

没有“条件收益”。你可以玩把戏，`yield from`但我建议不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T08:31:29.053

你可以这样做：

```
strong = li.find_all("strong")
strong and (yield strong) 
```

它简洁漂亮，但很难理解它在调试过程中做了什么。

# java - 文件在 Java 1.5 中有效，但在 Java 7 中无效（java.io.FileNotFoundException Permission Denied）

> ID：15646736
> 
> 赞同：1
> 
> 时间：2013-03-26T20:27:19.950
> 
> 标签：java, filenotfoundexception, permission-denied

我有一个我正在尝试访问的文件。当我在 Java 1.5 中访问它时，它很好。我已经升级到 Java 7，现在我收到了 java.io.FileNotFoundException Permission Denied 错误。

```
java.io.FileNotFoundException: /folder/test.xml (Permission denied)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
at SerializeUtil.write(Unknown Source) 
```

它实际上是在尝试使用 XMLEncoder 写入文件

```
XMLEncoder encoder = new XMLEncoder(new BufferedOutputStream(new FileOutputStream(filename)));
encoder.writeObject(object);
encoder.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:40:37.110

如果您在 Unix/Linux 下，请在运行 java $ touch /folder/test.xml 的用户下尝试以下命令

如果您的文件位于其他位置（例如 /home/AAA/folder/test.xml），请替换上述路径。

这个想法是测试您当前的用户是否可以写入文件

# javascript - 避免 HTML 和 Scripts 标签呈现

> ID：15646737
> 
> 赞同：1
> 
> 时间：2013-03-26T20:27:24.040
> 
> 标签：javascript, jquery, node.js, socket.io

我一直在聊天框中工作，我使用 Node.js + socket.io 进行客户端-服务器通信，所以我无法执行 PHP 代码（我已经读过这是可能的，但不推荐并且很难实现）。一切正常，除非用户发送带有 HTML 或 Scripts 标签的消息。

我尝试使用在[此处](http://phpjs.org/functions/strip_tags/)找到的功能删除这些标签。它工作正常，但仅适用于 HTML 标签，然后我想：好吧，我可以先使用正则表达式删除 Script 标签。像这样的东西

`.replace(/<script.*>.*<\/script>/ims, " ")`

然后删除HTML标签，但我不确定这种方法是否是黑客证明，**而且每条发送的消息都有很多过程。**

是否有任何形式的附加文本`$("#div").append(message);`而不呈现 HTML/JavaScript 代码？--- 按原样打印文本，例如在[twitch.tv](http://www.twitch.tv/)中，如果您发送带有 HTML/JS/PHP 代码的消息，则消息的打印方式与您键入的方式一样。

或者，有没有其他方法可以删除标签？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:31:43.980

只需附加一个将消息设置为文本的 div。

```
$("#div").append( $("<div>").text(message) ); 
```

# ruby-on-rails - 两个 belongs_to 相同的模型使用名称分配 id

> ID：15646746
> 
> 赞同：0
> 
> 时间：2013-03-26T20:28:12.077
> 
> 标签：ruby-on-rails, associations, has-many, belongs-to

我是 RoR 的新手，正在创建一个数据库。每个主机有两个系统管理员。我试图将创建主机时给定的名称与其各自的系统管理员相关联。我该怎么做呢？

如果用户输入系统管理员的名称，那么我如何使用该名称获取 id 并将该 id 插入 primary_sadmin_id 字段？

系统管理员.rb

```
class Systemadmin < ActiveRecord::Base
  attr_accessible :id, :email, :location, :name, :netid, :priphone, :secphone
  has_many :primary_sysadmin, :class_name => 'Host', :foreign_key => 'primary_sadmin_id'
  has_many :seconday_sysadmin, :class_name => 'Host', :foreign_key => 'seconary_sadmin_id'
end 
```

主机.rb

```
class Host < ActiveRecord::Base
  attr_accessible :iogroup, :ip, :location, :name, :opsystem, :primary_sadmin_id, :purpose, :secondary_sadmin_id, :host_type
  belongs_to :primary_sadmin, :class_name => 'Systemadmin', :foreign_key => 'primary_sadmin_id'
  belongs_to :secondary_sadmin, :class_name => 'Systemadmin', :foreign_key => 'secondary_sadmin_id'

end 
```

主机控制器.rb

```
def create
@host = Host.new(params[:host])
@host.primary_sadmin_id = Systemadmin.find_by_name(:sa_name1)
@host.secondary_sadmin_id = Systemadmin.find_by_name(:sa_name2)
respond_to do |format|
  if @host.save
    format.html { redirect_to @host, notice: 'Host was successfully created.' }
    format.json { render json: @host, status: :created, location: @host }
  else
    format.html { render action: "new" }
    format.json { render json: @host.errors, status: :unprocessable_entity }
  end
end
end 
```

架构.rb

```
create_table "hosts", :force => true do |t|
t.string   "name"
t.integer  "ip",                  :precision => 38, :scale => 0
t.string   "location"
t.string   "host_type"
t.string   "opsystem"
t.string   "iogroup"
t.integer  "primary_sadmin_id",   :precision => 38, :scale => 0
t.integer  "secondary_sadmin_id", :precision => 38, :scale => 0
t.string   "purpose"
t.datetime "created_at",                                         :null => false
t.datetime "updated_at",                                         :null => false
end

create_table "systemadmins", :force => true do |t|
t.string   "name"
t.string   "netid"
t.integer  "priphone",   :precision => 38, :scale => 0
t.integer  "secphone",   :precision => 38, :scale => 0
t.string   "email"
t.string   "location"
t.datetime "created_at",                                :null => false
t.datetime "updated_at",                                :null => false
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:55:39.120

使用 find_or_create_by_name 解决了它。

```
类主机'Systemadmin'，：foreign_key => 'primary_sadmin_id'
  belongs_to :secondary_sadmin, :class_name => 'Systemadmin', :foreign_key => 'secondary_sadmin_id'
  has_many :database, :class_name => '主机'

  def sa_name1
    primary_sadmin.try(:sa_name1)
  结尾

  def sa_name1=(sa_name1)
    self.primary_sadmin = Systemadmin.find_or_create_by_name(sa_name1) 如果 sa_name1.present？
  结尾

  def sa_name2
    secondary_sadmin.try(:sa_name2)
  结尾

  def sa_name2=(sa_name2)
    self.secondary_sadmin = Systemadmin.find_or_create_by_name(sa_name2) 如果 sa_name2.present？
  结尾

结尾

```

# css - 为什么不定位：Chrome 中的粘性工作？

> ID：15646747
> 
> 赞同：43
> 
> 时间：2013-03-26T20:28:12.200
> 
> 标签：css, google-chrome

你如何开始`position: sticky`工作？

我在 Chrome 26.0.1410.43 m 中尝试了以下操作，但它不起作用：

```
thead {
    position: -webkit-sticky;
    position: -moz-sticky;
    position: -ms-sticky;
    position: -o-sticky;
    position: sticky;
    top: 10px;
} 
```

[http://jsfiddle.net/8LRms/](http://jsfiddle.net/8LRms/)

据此，它应该工作：

[http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)

Chrome 23.0.1247.0 似乎支持它，但现在它在 26.0.1410.43 m 中不起作用。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-10-06T18:15:46.093

有一段时间，Chrome`--enable-experimental-webkit-features`在其 about:flags 部分的标志后面启用了此功能。但是，由于浏览器重绘的效率低下，它很快就被删除了。

**从[Chrome 56](https://blog.chromium.org/2016/12/chrome-56-beta-not-secure-warning-web.html)开始，此功能在没有标志的情况下再次启用。**

* * *

`--enable-experimental-webkit-features`从 Chrome 52.0.2743.116 开始，该功能再次由标志启用。

* * *

要回答关于**为什么它被删除**的更新问题：由于规范的未完成性质，谷歌（Chromium）删除了对的支持`position: sticky`，同时他们将专注于其他滚动功能：

> “我们最终希望实现 position:sticky，但**当前的实现并没有以与现有滚动和合成系统很好集成的方式设计**。例如，position:sticky 依赖于 updateLayerPositionsAfterDocumentScroll 才能正常运行，但该功能已经没有其他用途，可以通过其他方式移除。类似地，position:sticky 对复合溢出滚动根本不起作用，它现在是引擎中驱动滚动的默认机制。
> 
> 一旦我们的滚动和合成房子井井有条，我们应该回到位置：粘性并**以与引擎其余部分很好集成的方式实现该功能**。然而，目前，这个 CL 删除了我们当前的实现，因此我们可以专注于改进我们已经发布的滚动功能的实现。”

强调我的。**[你可以在这里](https://code.google.com/p/chromium/issues/detail?id=231752#c28)**阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-26T20:30:57.727

**编辑**：您需要`--enable-experimental-webkit-features`通过启用标志启动`about:flags`。

**更新：**这在 Chrome v35 到 v51 上不起作用，Chrome 52 使用实验性 Web 平台功能标志重新启用此功能。从 Chrome 56 开始，`position: sticky`开箱即用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-09T08:32:41.753

FilamentGroup 为`position: sticky`. 看看：[https ://github.com/filamentgroup/fixed-sticky](https://github.com/filamentgroup/fixed-sticky)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-11-28T15:21:05.023

`overflow: hidden`如果有一个设置了属性的父节点，它似乎在 iOS7 Safari 上不起作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-14T21:33:21.603

When Chrome switched over to the Blink rendering engine with version 28, they dropped Webkit, which is the only engine to support this (on Mac and iOS.)

So unless you're using Safari on Mac or iOS, or Chrome on iOS (for now) you will not be able to support this in other browsers.

Sad, it's a great and easy way to float elements.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-09-13T07:15:51.127

它确实 - 现在至少查找[https://caniuse.com/#feat=css-sticky](https://caniuse.com/#feat=css-sticky)

您的目标是`<thead>`Chrome 和 Blink 引擎（Chrome、Edge、Opera）不支持此功能。Gecko(Mozilla Firefox) 和 Webkit(Safari) 可以。而是尝试以`<th>`如下所示为目标。

同样`overflow: hidden`在父母会打破`position:sticky`

请务必包括您的[供应商前缀](https://developer.mozilla.org/en-US/docs/Glossary/Vendor_Prefix)。

运行代码段，它应该显示一个功能性的粘性标题。

```
thead > tr > th {
    background: white;
    position: -webkit-sticky;
    position: -moz-sticky;
    position: -ms-sticky;
    position: -o-sticky;
    position: sticky;
    top: 10px;
}
```

```
<h1>Position sticky</h1>
<table>
    <thead>
        <tr>
            <th>column 1</th>
            <th>column 2</th>
            <th>column 3</th>
            <th>column 4</th>            
        </tr>    
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
        </tr>
    </tbody>
</table>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-20T08:51:37.483

**[好消息](https://developers.google.com/web/updates/2016/12/position-stickyhttp://)是，从Chrome 56（目前为 2016 年 12 月的测试版，2017 年 1 月稳定）开始：粘性现在又回到了 Chrome 中。**
因此，在不久的将来，除了用于移动设备的浏览器之外，所有浏览器中只有 Edge 将成为唯一一个尚未实现它的浏览器，但我希望他们也能尽快实现它。

# ajax - 如何渲染 json 并同时使用 AJAX (Rails) 刷新部分

> ID：15646751
> 
> 赞同：0
> 
> 时间：2013-03-26T20:28:32.277
> 
> 标签：ajax, json, ruby-on-rails-3

我有一个控制器操作（我们称之为 some_controller_action），它需要渲染出一些 json（以便 javascript 拾取），同时使用 some_controller_action.js.erb 刷新/重新渲染部分。

我的代码建议是这样的：

```
def some_controller_action

  #
  # lots of code here
  #

  respond_to do |format|
    render :json => {:something => something}, :status => :ok
    format.html {
      redirect_to somewhere
    }
    format.js
  end
end 
```

客户端 ajax/javascript 触发此操作并接收 json 作为响应。它看起来像这样：

```
someCoffeescripAction = ->
  $.ajax
    type: "post"
    dataType: "json"
    data:
      some_data_name: some_data_content
    url: "some_url/some_controller_action"
    success: (data, status, xhr) ->
      do_something_with_the_response(data)

    error: (xhr, textStatus, errorThrown) -> 
```

当然这不起作用，因为我不允许在同一个动作中渲染两次。但是接下来该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:01:15.587

你的 javascript 是什么样的？您是否通过 ajax 获取控制器操作？如果是这样，那么您只需要等到 ajax 调用完成，然后通过使用刚刚获取的 json 数据或调用另一个 ajax 函数来触发您的部分的重新渲染。

# php - 如何使用 DOMDocument 方法更改节点的根？

> ID：15646757
> 
> 赞同：1
> 
> 时间：2013-03-26T20:28:51.593
> 
> 标签：php, xml, domdocument, appendchild, removechild

如何仅更改 DOM 节点的根标签名称？

在 DOM-Document 模型中，我们不能改变对象的属性`documentElement`，`DOMElement`所以，我们需要“重建”节点……但是如何用`childNodes`属性“重建”呢？

* * *

注意：我可以通过[使用 saveXML 转换为字符串并通过正则表达式切割根来](https://stackoverflow.com/q/15636739/287948)做到这一点......但这是一种解决方法，而不是 DOM 解决方案。

* * *

# 试过但不起作用，PHP 示例

PHP 示例（不起作用，但为什么？）：

### 试一试

```
 // DOMElement::documentElement can not be changed, so... 

 function DomElement_renameRoot1($ele,$ROOTAG='newRoot') { 
    if (gettype($ele)=='object' && $ele->nodeType==XML_ELEMENT_NODE) {
   $doc = new DOMDocument();
   $eaux = $doc->createElement($ROOTAG); // DOMElement

       foreach ($ele->childNodes as $node)  
       if ($node->nodeType == 1)  // DOMElement 
               $eaux->appendChild($node);  // error!
       elseif ($node->nodeType == 3)  // DOMText
               $eaux->appendChild($node); // error!
       return $eaux;
    } else
        die("ERROR: invalid DOM object as input");
  } 
```

`appendChild($node)`产生错误的原因：

```
 Fatal error: Uncaught exception 'DOMException' 
 with message 'Wrong Document Error' 
```

### 尝试2

来自@can 建议（仅指向链接）和我对糟糕的[dom-domdocument-renamenode 手册的](http://php.undmedlibrary.org/manual/en/function.dom-domdocument-renamenode.php)解释。

```
 function DomElement_renameRoot2($ele,$ROOTAG='newRoot') {
$ele->ownerDocument->renameNode($ele,null,"h1");
    return $ele;
 } 
```

renameNode() 方法导致错误，

```
Warning: DOMDocument::renameNode(): Not yet implemented 
```

### 试一试 3

来自[PHP 手册，评论 1](http://php.undmedlibrary.org/manual/en/function.dom-domdocument-renamenode.php)。

```
 function renameNode(DOMElement $node, $newName)
 {
     $newNode = $node->ownerDocument->createElement($newName);
     foreach ($node->attributes as $attribute)
        $newNode->setAttribute($attribute->nodeName, $attribute->nodeValue);
     while ($node->firstChild)
        $newNode->appendChild($node->firstChild); // changes firstChild to next!?
     $node->ownerDocument->replaceChild($newNode, $node); // changes $node?
     // not need return $newNode; 
 } 
```

replaceChild() 方法导致错误，

```
Fatal error: Uncaught exception 'DOMException' with message 'Not Found Error' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T20:15:20.730

首先，您需要了解它`DOMDocument`只是文档树的层次根。它的名字永远是`#document`。您要重命名根元素，即`$document->documentElement`.

如果要将节点从一个文档复制到另一个文档，则需要使用[importNode()](http://php.net/manual/en/domdocument.importnode.php)函数：`$document->importNode($nodeInAnotherDocument)`

**编辑：**

`renameNode()`还没有实现，所以你应该做另一个根，然后用旧的替换它。如果您使用`DOMDocument->createElement()`，您以后不需要使用`importNode()`它。

```
$oldRoot = $doc->documentElement;
$newRoot = $doc->createElement('new-root');

foreach ($oldRoot->attributes as $attr) {
  $newRoot->setAttribute($attr->nodeName, $attr->nodeValue);
}

while ($oldRoot->firstChild) {
  $newRoot->appendChild($oldRoot->firstChild);
}

$doc->replaceChild($newRoot, $oldRoot); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-01T08:32:27.250

由于尚未真正回答此问题，因此您遇到的错误 not found 是因为`renameNode()`您复制的函数中存在一些错误。

在[关于重命名 DOM 中不同元素的一些相关问题中，](https://stackoverflow.com/questions/16307103/use-domdocument-to-replace-all-header-tags-with-the-h4-tags)我也看到了这个问题，并[在我的答案中采用了该函数](https://stackoverflow.com/a/16314814/367456)，但没有出现此错误：

```
/**
 * Renames a node in a DOM Document.
 *
 * @param DOMElement $node
 * @param string     $name
 *
 * @return DOMNode
 */
function dom_rename_element(DOMElement $node, $name) {
    $renamed = $node->ownerDocument->createElement($name);

    foreach ($node->attributes as $attribute) {
        $renamed->setAttribute($attribute->nodeName, $attribute->nodeValue);
    }

    while ($node->firstChild) {
        $renamed->appendChild($node->firstChild);
    }

    return $node->parentNode->replaceChild($renamed, $node);
} 
```

你可能已经在函数体的最后一行发现了它：这是 using`->parentNode`而不是`->ownerDocument`. 由于`$node`不是文档的孩子，您确实收到了错误。假设它应该是错误的也是错误的。而是使用父元素在其中搜索子元素以替换它；）

到目前为止，PHP 手册用户注释中尚未对此进行概述，但是，如果您确实点击了最初建议该`renameNode()`功能的博客文章的链接，您也可以在其下方找到提供此解决方案的评论。

无论如何，我的变体在这里使用了稍微不同的变量命名，并且在类型上更加不同。就像 PHP 手册中的示例一样，它错过了处理命名空间节点的变体。我还没有预订什么是最好的，例如创建一个处理它的附加函数，从节点接管命名空间以重命名或在不同的函数中显式更改命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T20:02:51.623

ISTM 在您的方法中尝试从*另一个**导入节点*，因此您需要使用以下方法： *`DOMDocument`[`importNode()`](http://php.net/manual/en/domdocument.importnode.php)*

 *```
$d = new DOMDocument();

/* Make a `foo` element the root element of $d */
$root = $d->createElement("foo");
$d->appendChild($root);

/* Append a `bar` element as the child element of the root of $d */
$child = $d->createElement("bar");
$root->appendChild($child);

/* New document */
$d2 = new DOMDocument();

/* Make a `baz` element the root element of $d2 */
$root2 = $d2->createElement("baz");
$d2->appendChild($root2);

/* 
 * Import a clone of $child (from $d) into $d2,
 * with its child nodes imported recursively
 */
$child2 = $d2->importNode($child, true);

/* Add the clone as the child node of the root of $d2 */
$root2->appendChild($child2); 
```

但是，将子节点附加到新的父元素（从而移动它们）并用该父元素替换旧的根要容易得多：

```
$d = new DOMDocument();

/* Make a `foo` element the root element of $d */
$root = $d->createElement("foo");
$d->appendChild($root);

/* Append a `bar` element as the child element of the root of $d */
$child = $d->createElement("bar");
$root->appendChild($child);

/* <?xml version="1.0"?>
   <foo><bar/></foo> */
echo $d->saveXML();

$root2 = $d->createElement("baz");

/* Make the `bar` element the child element of `baz` */
$root2->appendChild($child);

/* Replace `foo` with `baz` */
$d->replaceChild($root2, $root);

/* <?xml version="1.0"?>
   <baz><bar/></baz> */
echo $d->saveXML(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T11:26:35.383

这是我的“Try-3”（见问题）的变体，**效果很好**！

```
 function xml_renameNode(DOMElement $node, $newName, $cpAttr=true) {
      $newNode = $node->ownerDocument->createElement($newName);
      if ($cpAttr && is_array($cpAttr)) {
        foreach ($cpAttr as $k=>$v)
             $newNode->setAttribute($k, $v);
      } elseif ($cpAttr)
        foreach ($node->attributes as $attribute)
             $newNode->setAttribute($attribute->nodeName, $attribute->nodeValue);

      while ($node->firstChild)
          $newNode->appendChild($node->firstChild);
      return $newNode;
  } 
```

当然，如果您展示了如何使用[DOMDocument::renameNode](http://php.undmedlibrary.org/manual/en/function.dom-domdocument-renamenode.php)（没有错误！），那么您将获得*赏金*！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-03T23:24:50.097

我希望我没有遗漏任何东西，但我碰巧遇到了类似的问题，并且能够通过使用解决它 use `DomDocument::replaceChild(...)`。

```
 /* @var $doc DOMDocument */
   $doc = DOMImplementation::createDocument(NULL, 'oldRoot');

   /* @var $newRoot DomElement */
   $newRoot = $doc->createElement('newRoot');
   /* all the code to create the elements under $newRoot */

   $doc->replaceChild($newRoot, $doc->documentElement);

   $doc->documentElement->isSameNode($newRoot) === true; 
```

最初让我失望的是那是只读的，但如果是用相同的方法创建的，`$doc->documentElement`上述方法似乎是更简单的解决方案，否则您需要按照上述方法执行解决方案。从您的问题看来，可以从相同的. `$newRoot``DomDocument``importNode``$newRoot``$doc`

让我们知道这是否适合您。干杯。

编辑：在版本 20031129 中注意到，如果设置，则在您最终调用时`DomDocument::$formatOutput`不会格式化输出`$newRoot``$doc->saveXML()`*

# salesforce - 更新前和更新后的触发器会消除竞争条件吗？

> ID：15646761
> 
> 赞同：0
> 
> 时间：2013-03-26T20:29:00.300
> 
> 标签：salesforce

我有一个发票对象和一个付款对象。我希望能够将付款添加到发票中，直到发票上的未结金额为零。在任何情况下，发票上的未付金额都不应小于零。

我可以创建一个更新触发器，而不是检查即将应用于发票的付款金额，并引发 AddError 以防止数据提交。但是，我应该在更新前使用还是在更新后使用？

能有比赛条件吗？如果两个人在一张未付金额为 200 美元的发票上几乎同时支付 200 美元。对于两个触发器，发票上的未结金额是否可以是 200 美元，因此两个付款都应用于发票。这将使总数为负数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:18:16.857

查看[Locking Statements](http://www.salesforce.com/us/developer/docs/apexcode/Content/langCon_apex_locking_statements.htm)文档中的`For Update`关键字。

使用这将确保事务在另一个用户可以更新之前完成。

# wpf - WPF MVVM 依赖属性

> ID：15646766
> 
> 赞同：1
> 
> 时间：2013-03-26T20:29:14.813
> 
> 标签：wpf, mvvm, wpf-controls, dependency-properties

我有以下情况：

1.  我有一个用户控件，里面只有一个网格。
2.  Grid 的第一列是复选框列，它绑定到 CustomerModel 的 IsSelected 属性
3.  网格的 ItemsSource 绑定到 List<CustomerModel>
4.  当用户选中任何 CheckBoxes 时，CustomerModel 的相应 IsSelected 属性正在更新

询问：

1.  我向名为“SelectedCustomerItems”的 UserControl 添加了一个依赖属性，我希望它返回一个 List<CustomerModel>（仅适用于 IsSelected = true）

2.  此 UserControl 放置在另一个 Window 上

3.  依赖属性“SelectedCustomerItems”绑定到 WindowViewModel 内的“SelectedCustomers”属性

但我没有通过这个依赖属性获得 SelectedCustomer 项目。断点未在 Get{} 中命中 请建议....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T16:43:26.783

以这种方式实现您的 DP：

```
#region SomeProperty
/// <summary>
/// The <see cref="DependencyProperty"/> for <see cref="SomeProperty"/>.
/// </summary>
public static readonly DependencyProperty SomePropertyProperty =
    DependencyProperty.Register(
        SomePropertyPropertyName,
        typeof(object),
        typeof(SomeType),
        // other types here may be appropriate for your situ
        new FrameworkPropertyMetadata(null, OnSomePropertyPropertyChanged));

/// <summary>
/// Called when the value of <see cref="SomePropertyProperty"/> changes on a given instance of <see cref="SomeType"/>.
/// </summary>
/// <param name="d">The instance on which the property changed.</param>
/// <param name="e">The <see cref="System.Windows.DependencyPropertyChangedEventArgs"/> instance containing the event data.</param>
private static void OnSomePropertyPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    (d as SomeType).OnSomePropertyChanged(e.OldValue as object, e.NewValue as object);
}

/// <summary>
/// Called when <see cref="SomeProperty"/> changes.
/// </summary>
/// <param name="oldValue">The old value</param>
/// <param name="newValue">The new value</param>
private void OnSomePropertyChanged(object oldValue, object newValue)
{

}

/// <summary>
/// The name of the <see cref="SomeProperty"/> <see cref="DependencyProperty"/>.
/// </summary>
public const string SomePropertyPropertyName = "SomeProperty";

/// <summary>
/// 
/// </summary>
public object SomeProperty
{
    get { return (object)GetValue(SomePropertyProperty); }
    set { SetValue(SomePropertyProperty, value); }
}
#endregion 
```

您必须了解 DependencyProperty 不仅仅是添加了一堆垃圾的属性，它是**WPF 绑定系统**的挂钩。这是一个庞大而复杂的系统，位于海平面以下，您的 DP 优雅地漂浮在其上。它的行为方式出乎你的意料，除非你真的学会了它。

您正在体验我们所有人对 DP 的第一个启示：绑定不通过属性访问器（即`get`和`set`方法）访问 DependencyProperty 值。**这些属性访问器是您只能**从代码中使用的便捷方法。您可以放弃它们并使用[DependencyObject.GetValue 和 DependencyObject.SetValue](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.getvalue.aspx)，它们是系统中的实际挂钩（请参阅上面示例中的 getter/setter 的实现）。

如果您想收听更改通知，您应该按照我在上面的示例中所做的操作。您可以在注册 DependencyProperty 时添加更改通知侦听器。您还可以*覆盖*继承的 DependencyProperties 的“元数据”（我一直这样做`DataContext`）以添加更改通知（有些`DependencyPropertyDescriptor`人为此使用 ，但我发现它们缺少）。

**但是，无论您做什么，都不要在DependencyProperties的`get`和方法中添加代码！`set`** 它们不会被绑定操作执行。

有关 DependencyProperties 如何工作的更多信息，[我强烈建议您阅读 MSDN 上的这篇精彩概述。](http://msdn.microsoft.com/en-us/library/ms752914.aspx)

# python - 余弦评分在嗖嗖，蟒蛇

> ID：15646767
> 
> 赞同：2
> 
> 时间：2013-03-26T20:29:16.757
> 
> 标签：python, whoosh

我已经实现了一些 python 代码来使用 BM25 在 whoosh 上运行搜索并且一切正常，但是现在我正在尝试将评分机制更改为余弦，我收到了这个错误：

> 文件“TFIDF.py”，第 18 行，在 tfidf 中使用 ix.searcher(weighting=whoosh.scoring.Cosine()) 作为搜索器：AttributeError: 'module' object has no attribute 'Cosine'

如果我导入余弦

```
from whoosh.scoring import Cosine 
```

我明白了：

```
File "TFIDF.py", line 4, in <module>
    from whoosh.scoring import Cosine
ImportError: cannot import name Cosine 
```

我的代码如下：

```
import whoosh
from whoosh.scoring import Cosine
from whoosh.fields import *
from whoosh.scoring import *
from whoosh.qparser import *
from whoosh.query import *
from whoosh.index import open_dir

#Index path
lab3dir= "../lab3/Aula3_1/"
ix = open_dir(lab3dir + "indexdir") #Index generated in previous lab

def cosine(queryTerms):
    list=[]
    dict={} # dict com ID do doc e Similiaridade 
    with ix.searcher(weighting=whoosh.scoring.Cosine()) as searcher:
        query = QueryParser("content", ix.schema, group=OrGroup).parse(u(queryTerms))
        results = searcher.search(query, limit=100)
        for i,r in enumerate(results):
            list.append(r["id"])
            print r, results.score(i)
            dict[r["id"]]= results.score(i)
    return dict 
```

有什么想法？？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:57:03.407

[http://pythonhosted.org/Whoosh/searching.html#the-searcher-object](http://pythonhosted.org/Whoosh/searching.html#the-searcher-object)上的文档，我认为您正在查看的内容与您发现的不正确。查看文档（[http://pythonhosted.org/Whoosh/api/scoring.html#module-whoosh.scoring](http://pythonhosted.org/Whoosh/api/scoring.html#module-whoosh.scoring)）或源代码（[https://bitbucket.org/mchaput/whoosh/src/362fc2999c8cabc51370f433de7402fafd536ec6/src/ whoosh/scoring.py?at=default](https://bitbucket.org/mchaput/whoosh/src/362fc2999c8cabc51370f433de7402fafd536ec6/src/whoosh/scoring.py?at=default) ) 用于实际可用的选项。

# c# - int 的范围被视为字符串

> ID：15646768
> 
> 赞同：1
> 
> 时间：2013-03-26T20:29:18.120
> 
> 标签：c#, entity-framework, asp.net-mvc-4, jquery-validate

我有一个用 C#、MVC4 EF（数据优先）制作的项目。

在我的创建视图中，我有许多数字字段，我想使用 Range 为其指定允许的值。出于某种奇怪的原因，我的数字被视为字符串，这会破坏验证。

让我们以字段“LengthInch”为例：在数据库中它是一个 int。

在我看来，我有代码：

```
@Html.EditorFor(model => model.LengthInch)
@Html.ValidationMessageFor(model => model.LengthInch) 
```

最后在我的元数据文件（用于模型）中，我有代码：

```
[Range(0, 11, ErrorMessage = "Value for {0} must be between {1} and {2}.")]
public Nullable<int> LengthInch { get; set; } 
```

如果我在字段中输入 0、1、10 或 11，一切都很好，但如果我输入 2，我会收到一个验证错误，提示“LengthInch 的值必须介于 0 和 11 之间”。3 到 9 也是如此。因此，出于某种原因，这些数字似乎被视为字符串。任何人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:09:09.460

马尔科姆关于“新”项目工作的观点为我指明了正确的方向，谢谢！似乎 jquery.validate 家伙做了一个 bug 修复推送来解决这个[问题](https://github.com/jzaefferer/jquery-validation/pull/666)。

```
 // convert the value to a number for number inputs, and for text for backwards compability
        // allows type="date" and others to be compared as strings
        if ( /min|max/.test( method ) && ( type === null || /number|range|text/.test( type ) ) ) {
            value = Number(value);
        }

        if ( value ) {
            rules[method] = value;
        } else if ( type === method && type !== 'range' ) {
            // exception: the jquery validate 'range' method
            // does not test for the html5 'range' type
            rules[method] = true;
        } 
```

一旦我对 jqueryvalidation-1.11.1 进行了 nuget 更新，它就解决了这个问题，欢迎来到 JS 包地狱！

# html - 当我给它一个负边距时，为什么我的 div 会在另一个元素下

> ID：15646772
> 
> 赞同：2
> 
> 时间：2013-03-26T20:29:49.847
> 
> 标签：html, css

所以我有`(.section-page-layout)`一个边距为`(margin-top:-200px)`的 div ，并且 div`(.section-page-layout)`正在 div 下方`(.section-page-header)`，它应该越过它。我将代码上传到了一个演示链接，您可以在其中使用 Firebug 或其他工具查看它。我还包括了我的代码。

[http://kmgp.us/stackoverflow/section_page_template.html](http://kmgp.us/stackoverflow/section_page_template.html)

提前致谢！

CSS 代码

```
/* Header */
.section-page-header {
    background: url("../img/frontcover.jpg") no-repeat;
    background-size: cover;
    width: auto;
    height: auto;
    min-height: 727px;
    min-width: 1280px;
}
.section-page-header-title_container {
    width: 1280px;
    position: relative;
    margin: 0 auto;
}
.section-page-header-title {
    margin-top: 83px;
    border-top: 7px #5b461c solid;
    width: 1170px;
    float: left;
    height: 167px;
    background: #000000;
    -webkit-border-radius: 0px 0px 50px 0px;
    border-radius: 0px 0px 50px 0px;
    /* IE 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
    /* IE 5-7 */
    filter: alpha(opacity=90);
    /* Gecko */
    -moz-opacity: 0.9;
    /* Safari 1.x */
    -khtml-opacity: 0.9;
    /* CSS3 */
    opacity: 0.9;
}
.section-page-header-title h1 {
    font-family: 'QuicksandBook';
    margin-left: 147px;
    margin-top: 46px;
    font-size: 50px;
    color: #FFFFFF;
    text-transform: uppercase;
}
.section-page-header-title p {
    margin-top: 12px;
    margin-left: 147px;
    font-family: 'junctionregularRegular';
    color: #ff9900;
    text-transform: uppercase;
}
.section-page-layout-container {
    background:#984B09;
    background: url('../img/section-page-oj_gradient-background.png') repeat-y;
    background-size:contain;
    width: 100%;
    overflow: hidden;
}
.section-page-layout {
    width: 1280px;
    position: relative;
    margin: 0 auto;
    height: auto;
    overflow: visible;
    margin-top:-200px;
}
.left-section-container {
    width: 585px;
    height: 500px;
    background: #FFFFFF;
    float: left;
} 
```

代码

```
<!-- ===============
=== Section Page Template
=============== -->
<header class="section-page-header">
    <div class="section-page-header-title_container">
        <div class="section-page-header-title">
            <h1>ABOUT <b>US</b></h1>
            <p>A simple glance into our company</p>
        </div>
    </div>
</header>
<section class="section-page-layout-container">
    <div class="section-page-layout">
        <div class="left-section-container">
            <header> </header>
            <div class="left-section">
            </div>
        </div>
        <div class="right-module-section">

        </div>
    </div>
</section>
<div class="clear"><!-- Clear --></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:39:58.783

If you have `overflow:hidden` on a parent element then when you move the child outside of the parent it will be hidden.

# c# - 在使用 [Import(AllowDefault = true)] 之前不调用 MEF [ImportingConstructor]

> ID：15646774
> 
> 赞同：5
> 
> 时间：2013-03-26T20:29:52.673
> 
> 标签：c#, mef, composition

我正在使用 MEF1 并遇到一个奇怪的场景。

这个构造函数永远不会被调用：

```
[ImportingConstructor]
public LogViewModuleRoot(INavigationCommandManager navigationCommandManager,
                         ISettingsManager settingsManager,
                         IBusyService busyService)
{
    NavigationCommandManager = navigationCommandManager;
    SettingsManager = settingsManager;
    BusyService = busyService;
} 
```

当更改为此时，使用正确的值调用构造函数：

```
[ImportingConstructor]
public LogViewModuleRoot(INavigationCommandManager navigationCommandManager,
                         ISettingsManager settingsManager,
                         [Import(AllowDefault = true)] IBusyService busyService)
{
    NavigationCommandManager = navigationCommandManager;
    SettingsManager = settingsManager;
    BusyService = busyService; // Properly hydrated - i.e. not null
} 
```

通常，如果没有匹配的导出，则不会调用 ImportingConstructor，但如果没有匹配的导出，则当*AllowDefault*设置为*true*时也无法加载。

什么问题可能导致这种行为？

如果这与组合图中的循环依赖和*IBusyService*的构建时间有关，是否有工具可以找到问题的根源？

### 更新

似乎没有深层循环依赖。即使出口`IBusyService`没有自己的进口，问题仍然存在。`IBusyService`另请注意，导出的实例在`ImportingConstructor`尝试运行之前很久就已加载。

### 附加信息

使用 MEFX Visualizer，这两种情况都表明没有合成问题，并且所有导入都得到满足。

这是 MEFX CompositionInfo 的输出：

```
[Part] ****.Modularity.Logging.CallbackLogger from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Export] ****.Modularity.Logging.CallbackLogger (ContractName="****.Modularity.Logging.CallbackLogger")

[Part] ****.Modularity.Modules.ModuleManager from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Export] ****.Modularity.Modules.ModuleManager (ContractName="****.Modularity.Modules.IModuleManager")
  [Import] ****.Modularity.Modules.ModuleManager.ImportedModules (ContractName="****.Modularity.IModule")
    [SatisfiedBy] Debug.Module.ModuleRoot (ContractName="****.Modularity.IModule") from: Debug.Module.ModuleRoot from: AssemblyCatalog (Assembly="Debug.Module, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
    [Unsuitable] Logging.Module.LogConfigurationModuleRoot (ContractName="****.Modularity.IModule") from: Logging.Module.LogConfigurationModuleRoot from: AssemblyCatalog (Assembly="Logging.Module, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
    [Unsuitable] Logging.Module.LogViewModuleRoot (ContractName="****.Modularity.IModule") from: Logging.Module.LogViewModuleRoot from: AssemblyCatalog (Assembly="Logging.Module, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Modules.ModuleManager..ctor (Parameter="moduleCatalog", ContractName="****.Modularity.Modules.IModuleCatalog")
    [SatisfiedBy] ****.Modularity.Modules.IModuleCatalog
  [Import] ****.Modularity.Modules.ModuleManager..ctor (Parameter="logger", ContractName="****.Modularity.Logging.ILogger")
    [SatisfiedBy] ****.Modularity.Logging.ILogger
  [Import] ****.Modularity.Modules.ModuleManager..ctor (Parameter="exServiceLocator", ContractName="****.Modularity.IExtendedServiceLocator")
    [SatisfiedBy] ****.Modularity.IExtendedServiceLocator

[Part] ****.Modularity.Shells.ConsoleShell from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
  [Export] ****.Modularity.Shells.ConsoleShell (ContractName="****.Modularity.Shells.ConsoleShell")
  [Import] ****.Modularity.Shells.ConsoleShell..ctor (Parameter="navigationManager", ContractName="****.Modularity.Windows.Navigation.INavigationManager")
    [SatisfiedBy] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Modularity.Windows.Navigation.INavigationManager") from: ****.Modularity.Windows.Navigation.NavigationManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.ConsoleShell..ctor (Parameter="logger", ContractName="****.Modularity.Logging.CallbackLogger")
    [SatisfiedBy] ****.Modularity.Logging.CallbackLogger (ContractName="****.Modularity.Logging.CallbackLogger") from: ****.Modularity.Logging.CallbackLogger from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.ConsoleShell..ctor (Parameter="locator", ContractName="****.Modularity.IExtendedServiceLocator")
    [SatisfiedBy] ****.Modularity.IExtendedServiceLocator
  [Import] ****.Modularity.Shells.ConsoleShell..ctor (Parameter="viewModel", ContractName="****.Modularity.Shells.ViewModel.ShellViewModel")
    [SatisfiedBy] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Shells.ViewModel.ShellViewModel") from: ****.Modularity.Shells.ViewModel.ShellViewModel from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")

[Part] ****.Modularity.Shells.****LegacyNavigation from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
  [Export] ****.Modularity.Shells.****LegacyNavigation (ContractName="****.Modularity.Shells.****LegacyNavigation")
  [Import] ****.Modularity.Shells.****LegacyNavigation..ctor (Parameter="navigationManager", ContractName="****.Modularity.Windows.Navigation.INavigationManager")
    [SatisfiedBy] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Modularity.Windows.Navigation.INavigationManager") from: ****.Modularity.Windows.Navigation.NavigationManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.****LegacyNavigation..ctor (Parameter="logger", ContractName="****.Modularity.Logging.CallbackLogger")
    [SatisfiedBy] ****.Modularity.Logging.CallbackLogger (ContractName="****.Modularity.Logging.CallbackLogger") from: ****.Modularity.Logging.CallbackLogger from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.****LegacyNavigation..ctor (Parameter="locator", ContractName="****.Modularity.IExtendedServiceLocator")
    [SatisfiedBy] ****.Modularity.IExtendedServiceLocator
  [Import] ****.Modularity.Shells.****LegacyNavigation..ctor (Parameter="dataContext", ContractName="****.Modularity.Windows.Shell.IShellDataContext")
    [SatisfiedBy] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.Shell.IShellDataContext") from: ****.Modularity.Shells.ViewModel.ShellViewModel from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")

[Part] ****.Modularity.Shells.KioskShell from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
  [Export] ****.Modularity.Shells.KioskShell (ContractName="****.Modularity.Shells.KioskShell")
  [Import] ****.Modularity.Shells.KioskShell..ctor (Parameter="navigationManager", ContractName="****.Modularity.Windows.Navigation.INavigationManager")
    [SatisfiedBy] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Modularity.Windows.Navigation.INavigationManager") from: ****.Modularity.Windows.Navigation.NavigationManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.KioskShell..ctor (Parameter="logger", ContractName="****.Modularity.Logging.CallbackLogger")
    [SatisfiedBy] ****.Modularity.Logging.CallbackLogger (ContractName="****.Modularity.Logging.CallbackLogger") from: ****.Modularity.Logging.CallbackLogger from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.KioskShell..ctor (Parameter="dataContext", ContractName="****.Modularity.Windows.Shell.IShellDataContext")
    [SatisfiedBy] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.Shell.IShellDataContext") from: ****.Modularity.Shells.ViewModel.ShellViewModel from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")

[Part] ****.Modularity.Shells.ViewModel.ShellViewModel from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
  [Export] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.Shell.IShellDataContext")
  [Export] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.Commanding.INavigationContext")
  [Export] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.IBusyService")
  [Export] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Shells.ViewModel.ShellViewModel")
  [Import] ****.Modularity.Shells.ViewModel.ShellViewModel..ctor (Parameter="navigationCommandManager", ContractName="****.Modularity.Windows.Commanding.INavigationCommandManager")
    [SatisfiedBy] ****.Modularity.Windows.Commanding.INavigationCommandManager
    [Unsuitable] ****.Modularity.Windows.Commanding.NavigationCommandManager (ContractName="****.Modularity.Windows.Commanding.INavigationCommandManager") from: ****.Modularity.Windows.Commanding.NavigationCommandManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.ViewModel.ShellViewModel..ctor (Parameter="menuCommandManager", ContractName="****.Modularity.Windows.IMenuCommandManager")
    [SatisfiedBy] ****.Modularity.Windows.Commanding.MenuCommandManager (ContractName="****.Modularity.Windows.IMenuCommandManager") from: ****.Modularity.Windows.Commanding.MenuCommandManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.ViewModel.ShellViewModel..ctor (Parameter="applicationInformation", ContractName="****.Modularity.Shells.IApplicationInformation")
    [SatisfiedBy] ****.Modularity.Shells.IApplicationInformation
  [Import] ****.Modularity.Shells.ViewModel.ShellViewModel..ctor (Parameter="manager", ContractName="****.Modularity.Modules.IModuleManager")
    [SatisfiedBy] ****.Modularity.Modules.ModuleManager (ContractName="****.Modularity.Modules.IModuleManager") from: ****.Modularity.Modules.ModuleManager from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Shells.ViewModel.ShellViewModel..ctor (Parameter="actionExecuter", ContractName="****.Modularity.IActionExecuter")
    [SatisfiedBy] ****.Modularity.IActionExecuter

[Part] ****.Modularity.Windows.Commanding.MenuCommandManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Export] ****.Modularity.Windows.Commanding.MenuCommandManager (ContractName="****.Modularity.Windows.IMenuCommandManager")
  [Import] ****.Modularity.Windows.Commanding.MenuCommandManager..ctor (Parameter="moduleManager", ContractName="****.Modularity.Modules.IModuleManager")
    [SatisfiedBy] ****.Modularity.Modules.ModuleManager (ContractName="****.Modularity.Modules.IModuleManager") from: ****.Modularity.Modules.ModuleManager from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
  [Import] ****.Modularity.Windows.Commanding.MenuCommandManager..ctor (Parameter="navigationManager", ContractName="****.Modularity.Windows.Navigation.INavigationManager")
    [SatisfiedBy] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Modularity.Windows.Navigation.INavigationManager") from: ****.Modularity.Windows.Navigation.NavigationManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")

    [Part] ****.Modularity.Windows.Commanding.NavigationCommandManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
      [Export] ****.Modularity.Windows.Commanding.NavigationCommandManager (ContractName="****.Modularity.Windows.Commanding.INavigationCommandManager")
      [Import] ****.Modularity.Windows.Commanding.NavigationCommandManager..ctor (Parameter="moduleManager", ContractName="****.Modularity.Modules.IModuleManager")
        [SatisfiedBy] ****.Modularity.Modules.ModuleManager (ContractName="****.Modularity.Modules.IModuleManager") from: ****.Modularity.Modules.ModuleManager from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
      [Import] ****.Modularity.Windows.Commanding.NavigationCommandManager..ctor (Parameter="navigationManager", ContractName="****.Modularity.Windows.Navigation.INavigationManager")
        [SatisfiedBy] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Modularity.Windows.Navigation.INavigationManager") from: ****.Modularity.Windows.Navigation.NavigationManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")

    [Part] ****.Modularity.Windows.Commanding.MenuNavigationCommandManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
      [Export] ****.Modularity.Windows.Commanding.MenuNavigationCommandManager (ContractName="****.Modularity.Windows.Commanding.MenuNavigationCommandManager")
      [Import] ****.Modularity.Windows.Commanding.MenuNavigationCommandManager..ctor (Parameter="moduleManager", ContractName="****.Modularity.Modules.IModuleManager")
        [SatisfiedBy] ****.Modularity.Modules.ModuleManager (ContractName="****.Modularity.Modules.IModuleManager") from: ****.Modularity.Modules.ModuleManager from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
      [Import] ****.Modularity.Windows.Commanding.MenuNavigationCommandManager..ctor (Parameter="navigationManager", ContractName="****.Modularity.Windows.Navigation.INavigationManager")
        [SatisfiedBy] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Modularity.Windows.Navigation.INavigationManager") from: ****.Modularity.Windows.Navigation.NavigationManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
      [Import] ****.Modularity.Windows.Commanding.MenuNavigationCommandManager..ctor (Parameter="menuCommandManager", ContractName="****.Modularity.Windows.IMenuCommandManager")
        [SatisfiedBy] ****.Modularity.Windows.Commanding.MenuCommandManager (ContractName="****.Modularity.Windows.IMenuCommandManager") from: ****.Modularity.Windows.Commanding.MenuCommandManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")

    [Part] ****.Modularity.Windows.Navigation.NavigationManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
      [Export] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Framework.ViewModel.INavigationService")
      [Export] ****.Modularity.Windows.Navigation.NavigationManager (ContractName="****.Modularity.Windows.Navigation.INavigationManager")
      [Import] ****.Modularity.Windows.Navigation.NavigationManager..ctor (Parameter="moduleManager", ContractName="****.Modularity.Modules.IModuleManager")
        [SatisfiedBy] ****.Modularity.Modules.ModuleManager (ContractName="****.Modularity.Modules.IModuleManager") from: ****.Modularity.Modules.ModuleManager from: AssemblyCatalog (Assembly="****.Modularity.Mef, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")

    [Part] Logging.Module.LogConfigurationModuleRoot from: AssemblyCatalog (Assembly="Logging.Module, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
      [Export] Logging.Module.LogConfigurationModuleRoot (ContractName="****.Modularity.IModule")
      [Import] Logging.Module.LogConfigurationModuleRoot..ctor (Parameter="logConfiguration", ContractName="Logging.ViewModel.Interfaces.ILogConfiguration")
        [SatisfiedBy] Logging.ViewModel.LogConfigurationViewModel (ContractName="Logging.ViewModel.Interfaces.ILogConfiguration") from: Logging.ViewModel.LogConfigurationViewModel from: AssemblyCatalog (Assembly="Logging.ViewModel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")

    [Part] Logging.Module.LogViewModuleRoot from: AssemblyCatalog (Assembly="Logging.Module, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
      [Export] Logging.Module.LogViewModuleRoot (ContractName="****.Modularity.IModule")
      [Import] Logging.Module.LogViewModuleRoot..ctor (Parameter="navigationCommandManager", ContractName="****.Modularity.Windows.Commanding.INavigationCommandManager")
        [SatisfiedBy] ****.Modularity.Windows.Commanding.INavigationCommandManager
        [Unsuitable] ****.Modularity.Windows.Commanding.NavigationCommandManager (ContractName="****.Modularity.Windows.Commanding.INavigationCommandManager") from: ****.Modularity.Windows.Commanding.NavigationCommandManager from: AssemblyCatalog (Assembly="****.Modularity.Windows, Version=2.4.0.347, Culture=neutral, PublicKeyToken=null")
      [Import] Logging.Module.LogViewModuleRoot..ctor (Parameter="settingsManager", ContractName="****.Modularity.ISettingsManager")
        [SatisfiedBy] ****.Modularity.ISettingsManager
      [Import] Logging.Module.LogViewModuleRoot..ctor (Parameter="busyService", ContractName="****.Modularity.Windows.IBusyService")
        [SatisfiedBy] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.IBusyService") from: ****.Modularity.Shells.ViewModel.ShellViewModel from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")

    [Part] Logging.ViewModel.LogConfigurationViewModel from: AssemblyCatalog (Assembly="Logging.ViewModel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
      [Export] Logging.ViewModel.LogConfigurationViewModel (ContractName="Logging.ViewModel.Interfaces.ILogConfiguration")
      [Import] Logging.ViewModel.LogConfigurationViewModel..ctor (Parameter="viewModelManager", ContractName="****.Framework.ViewModel.ViewModelManager")
    [SatisfiedBy] ****.Framework.ViewModel.ViewModelManager

      [Import] Logging.ViewModel.LogConfigurationViewModel..ctor (Parameter="settingsManager", ContractName="****.Modularity.ISettingsManager")
        [SatisfiedBy] ****.Modularity.ISettingsManager
      [Import] Logging.ViewModel.LogConfigurationViewModel..ctor (Parameter="busyService", ContractName="****.Modularity.Windows.IBusyService")
        [SatisfiedBy] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.IBusyService") from: ****.Modularity.Shells.ViewModel.ShellViewModel from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
      [Import] Logging.ViewModel.LogConfigurationViewModel..ctor (Parameter="actionExecuter", ContractName="****.Modularity.IActionExecuter")
        [SatisfiedBy] ****.Modularity.IActionExecuter

    [Part] Debug.Module.ModuleRoot from: AssemblyCatalog (Assembly="Debug.Module, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
      [Export] Debug.Module.ModuleRoot (ContractName="****.Modularity.IModule")
      [Import] Debug.Module.ModuleRoot..ctor (Parameter="container", ContractName="System.ComponentModel.Composition.Hosting.CompositionContainer")
        [SatisfiedBy] System.ComponentModel.Composition.Hosting.CompositionContainer
      [Import] Debug.Module.ModuleRoot..ctor (Parameter="catalogs", ContractName="System.ComponentModel.Composition.Primitives.ComposablePartCatalog")
        [SatisfiedBy] System.ComponentModel.Composition.Primitives.ComposablePartCatalog
      [Import] Debug.Module.ModuleRoot..ctor (Parameter="shell", ContractName="****.Modularity.Windows.Shell.IShellDataContext")
        [SatisfiedBy] ****.Modularity.Shells.ViewModel.ShellViewModel (ContractName="****.Modularity.Windows.Shell.IShellDataContext") from: ****.Modularity.Shells.ViewModel.ShellViewModel from: AssemblyCatalog (Assembly="****.Modularity.Shells, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")
      [Import] Debug.Module.ModuleRoot..ctor (Parameter="settingsManager", ContractName="****.Modularity.ISettingsManager")
        [SatisfiedBy] ****.Modularity.ISettingsManager 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T15:58:45.077

由于 ShellViewModel 导出 IBusyService 并且 LogViewModuleRoot 导入 IBusyService

您确实有一个预导出（即构造函数导入）周期：

ShellViewModel -> IModuleManager -> IModule(s) -> LogViewModuleRoot

AllowDefault=true 允许该循环中断，它不为空的原因是由于它们的构造顺序。例如，如果您首先拉入 LogViewModuleRoot 对象，则它不是确定性的，并且在另一种情况下很可能为空。

打破循环并确保始终设置它的最佳方法可能是将 IBusyService 切换到 LogViewModuleRoot 上的属性导入。

# python - Arduino命中计数器

> ID：15646779
> 
> 赞同：2
> 
> 时间：2013-03-26T20:30:01.847
> 
> 标签：python, arduino, hitcounter

我们在从串口获取数据时遇到问题。我们有这个 python 代码，它的目的是从文件中获取一个值然后递增它。我们正试图用电机伺服将它连接到 arduino，这样当它检测到增量时，伺服就会移动。

```
#
# fetch counter 
#

import time
import urllib
import serial

# usb serial connection to arduino
ser = serial.Serial('COM3', 9600)

last_counter = open("hitcounter.txt")
for b in last_counter:
b = b.strip()
while (True):
counter = open("hitcounter.txt")
for a in counter:
    a = a.strip()

delta = int(a) - int(b)
ass = delta+1
print ass
print "counter: %s, delta: %s" % (a, delta)
x=chr(ser.write(chr(ord(chr(delta)))))
print type(x)
print "%s" %(x)
y=ser.write(ass)

print type(y)
print "%s" %(y)
b = a
time.sleep(10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:43:13.287

在您的代码中：

```
while (True): 
```

它后面的行没有缩进，所以不是代码块的一部分。您的代码将在这里简单地空闲循环。:(

假设我了解您的代码逻辑：

```
#
# fetch counter 
#

import time
import urllib
import serial

# usb serial connection to arduino
ser = serial.Serial('COM3', 9600)

last_counter = open("hitcounter.txt")

for b in last_counter:
    b = b.strip()

while (True):
    counter = open("hitcounter.txt")
    for a in counter:
        a = a.strip()

    delta = int(a) - int(b)
    ass = delta+1
    print ass
    print "counter: %s, delta: %s" % (a, delta)
    x=chr(ser.write(chr(ord(chr(delta)))))
    print type(x)
    print "%s" %(x)
    y=ser.write(ass)

    print type(y)
    print "%s" %(y)
    b = a
    time.sleep(10) 
```

# c++ - 节点优先队列

> ID：15646780
> 
> 赞同：0
> 
> 时间：2013-03-26T20:30:03.270
> 
> 标签：c++, nodes, priority-queue

我创建了一个节点的优先级队列，我已经将节点“推”到队列中，并假设它将按照整数值的顺序对节点进行排序。我想我错了。该节点具有属性 int freq 和 char c。我希望它按整数顺序排序，从最小到最大。

```
priority_queue<Node*> Q;
for(i =0; i< 95; i++){
    Q.push(node_array[i]);
}

for(i =0; i< 95; i++){
    cout<< Q.top() << endl;
    Q.pop();
} 
```

我怎样才能让它按“频率”的顺序排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:32:41.137

您的 priority_queue 比较是比较指针，即内存地址。您需要提供一个节点比较二进制函子，它需要两个`Node*`并实现所需的逻辑：

```
struct node_cmp
{
   bool operator()( const Node* a, const Node* b ) const 
   {
    return a->someField < b->someField;
   }
}; 
```

使用它来实例化优先级队列：

```
std::priority_queue<Node*, std::vector<Node*>, node_cmp> Q; 
```

# html - iframe 内的锚链接什么都不做

> ID：15646782
> 
> 赞同：6
> 
> 时间：2013-03-26T20:30:04.973
> 
> 标签：html, iframe, anchor

**是否可以在滚动 div 内有一个非滚动 iFrame，并且 iFrame 内的锚链接可以正常工作？** iFrame 内的锚链接应该滚动到 iFrame 内的位置，我不需要/不希望它们指向父页面上的元素。

这是我的 jsFiddle 和一个简单的例子：

[http://jsfiddle.net/shopguy/WjmHG/](http://jsfiddle.net/shopguy/WjmHG/)

及其代码：

```
<div style="width: 100%; height: 300px; overflow: auto;">
<iframe style="width: 100%; height: 2000px;" src="http://www.hypergurl.com/anchors.html" scrolling="no"></iframe>
</div> 
```

我与示例中使用的 hypergurl.com 链接没有关联，这只是我可以找到的第一个示例，其中包含一个带有 id/name 语法链接的锚点的页面。

如果您加载 JSFiddle 并单击 iFrame 内的“跳转到底部”链接，它不会执行任何操作（使用 FireFox 19.0.2 进行测试）。在使用各种页面进行测试时，它在 FireFox 中永远无法工作，在 Chrome 中，它有时会在第一次单击时工作，但如果您向上滚动并再次单击它就无法工作。在 IE8 中，它大部分时间都在工作（滚动）。

如果我让 iFrame 本身具有滚动条（删除滚动=“否”），滚动始终正常工作。但这对我来说不是一个实用的解决方案，因为我在框架之外有想要滚动的内容。在我的真实代码中，我动态设置 iFrame 的高度以填充其内容，这样它看起来更像是我页面上的内容。

关于我为什么需要这样做的附加信息：

我正在创建一个基于 Web 的电子邮件客户端，到目前为止，如果我在 iframe 中显示电子邮件的 HTML 正文，而不是尝试在我的页面内的表格单元格或 div 中显示，似乎问题最少。我希望这些类型的链接能够正常工作。我确实对内容有一定的控制权，它来自我的服务器，我可以对其进行一些修改（但不想过多地破解它）。例如，我已经修改了所有链接以在新窗口中打开（但不是以 # 开头的链接，所以这不是我的问题）。

我知道 GMail 不使用 iFrame，但我的 XFINITY（由 Comcast 有线电视提供）基于 Web 的电子邮件客户端使用，并且他们设法让这些工作（但到目前为止还没有弄清楚他们在做什么）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-11T19:15:39.630

查看这篇文章：[在 iFrame 中跳转链接](https://stackoverflow.com/questions/9687085/jump-link-inside-an-iframe)

如果您的 iframe 具有不同的域，那么您将无法使用 javascript 解决方案来解决此问题，但如果是，那么您可以将 target="_parent" 属性添加到 iframe 中的所有锚点。

```
var iframe = document.getElementById('iframeId');
var doc = (iframe.contentDocument)? iframe.contentDocument: iframe.contentWindow.document;

var anchors = doc.getElementsByTagName('a');
for (var i = 0; i < anchors.length; i++)
    anchors[i].target = '_parent'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T14:24:54.140

我最近向这个库添加了代码，以解决 iFrame 内的锚链接的所有问题。

**[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)**

它拦截页面导航的所有请求并将父页面滚动到正确的位置。如果在 iFrame 中找不到锚点，它会将其冒泡到父页面并在那里查找。

# java - Glassfish 3 独立客户端在 ejb 查找期间挂起

> ID：15646785
> 
> 赞同：1
> 
> 时间：2013-03-26T20:30:15.553
> 
> 标签：java, java-ee-6, glassfish-3

根据本指南[http://docs.oracle.com/cd/E18930_01/html/821-2418/gkusn.html#gkusp](http://docs.oracle.com/cd/E18930_01/html/821-2418/gkusn.html#gkusp)我正在尝试从远程独立客户端访问 ejb 组件。执行远程客户端时，我在类路径中有 gf-client.jar，并包含 jvm 属性

```
-Dorg.omg.CORBA.ORBInitialHost=<remoteHost>
-Dorg.omg.CORBA.ORBInitialPort=3700 
```

但是，当我的代码查找 bean 时，它挂起，没有抛出异常。在运行 Glassfish 的远程机器上，我可以执行 netstat 并查看从客户端机器到端口 3700 的已建立连接。关于如何解决此问题的任何想法？

编辑：不确定异常在哪里被吞下，但我能够在我的 IDE 中运行它，并且在查找时抛出了这个异常，之后客户端挂起。

```
org.jvnet.hk2.component.ComponentException: injection failed on org.glassfish.api.invocation.InvocationManagerImpl.invHandlers with class [Lorg.glassfish.api.invocation.ComponentInvocationHandler;
    at org.jvnet.hk2.component.InjectionManager.error_injectionException(InjectionManager.java:284)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:161)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:93)
    at com.sun.hk2.component.AbstractCreatorImpl.inject(AbstractCreatorImpl.java:126)
    at com.sun.hk2.component.ConstructorCreator.initialize(ConstructorCreator.java:91)
    at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:82)
    at com.sun.hk2.component.SingletonInhabitant.get(SingletonInhabitant.java:67)
    at com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139)
    at com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78)
    at org.jvnet.hk2.component.Habitat.getByContract(Habitat.java:1050)
    at org.jvnet.hk2.component.Habitat.getComponent(Habitat.java:779)
    at com.sun.enterprise.iiop.security.SecurityMechanismSelector.postConstruct(SecurityMechanismSelector.java:166)
    at com.sun.hk2.component.AbstractCreatorImpl.inject(AbstractCreatorImpl.java:131)
    at com.sun.hk2.component.ConstructorCreator.initialize(ConstructorCreator.java:91)
    at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:82)
    at com.sun.hk2.component.SingletonInhabitant.get(SingletonInhabitant.java:67)
    at com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139)
    at com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78)
    at org.jvnet.hk2.component.Habitat.getBy(Habitat.java:1056)
    at org.jvnet.hk2.component.Habitat.getByType(Habitat.java:1037)
    at com.sun.hk2.component.InjectInjectionResolver.getComponentInjectValue(InjectInjectionResolver.java:159)
    at com.sun.hk2.component.InjectInjectionResolver.getValue(InjectInjectionResolver.java:90)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:143)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:93)
    at com.sun.hk2.component.AbstractCreatorImpl.inject(AbstractCreatorImpl.java:126)
    at com.sun.hk2.component.ConstructorCreator.initialize(ConstructorCreator.java:91)
    at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:82)
    at com.sun.hk2.component.SingletonInhabitant.get(SingletonInhabitant.java:67)
    at com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139)
    at com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78)
    at org.jvnet.hk2.component.Habitat.getBy(Habitat.java:1056)
    at org.jvnet.hk2.component.Habitat.getByType(Habitat.java:1037)
    at org.jvnet.hk2.component.Habitat.getComponent(Habitat.java:781)
    at com.sun.enterprise.iiop.security.Lookups._getSecurityContextUtil(Lookups.java:97)
    at com.sun.enterprise.iiop.security.Lookups.getSecurityContextUtil(Lookups.java:92)
    at com.sun.enterprise.iiop.security.SecClientRequestInterceptor.<init>(SecClientRequestInterceptor.java:119)
    at com.sun.enterprise.security.appclient.AppclientIIOPInterceptorFactory.getClientInterceptorInstance(AppclientIIOPInterceptorFactory.java:127)
    at com.sun.enterprise.security.appclient.AppclientIIOPInterceptorFactory.createClientRequestInterceptor(AppclientIIOPInterceptorFactory.java:96)
    at org.glassfish.enterprise.iiop.impl.GlassFishORBInitializer.post_init(GlassFishORBInitializer.java:132)
    at com.sun.corba.ee.impl.interceptors.PIHandlerImpl.postInitORBInitializers(PIHandlerImpl.java:915)
    at com.sun.corba.ee.impl.interceptors.PIHandlerImpl.initialize(PIHandlerImpl.java:265)
    at com.sun.corba.ee.impl.orb.ORBImpl.postInit(ORBImpl.java:643)
    at com.sun.corba.ee.impl.orb.ORBImpl.set_parameters(ORBImpl.java:704)
    at com.sun.corba.ee.impl.orb.ORBImpl.setParameters(ORBImpl.java:691)
    at com.sun.corba.ee.spi.osgi.ORBFactory.initialize(ORBFactory.java:107)
    at org.glassfish.enterprise.iiop.impl.GlassFishORBManager.initORB(GlassFishORBManager.java:581)
    at org.glassfish.enterprise.iiop.impl.GlassFishORBManager.getORB(GlassFishORBManager.java:263)
    at org.glassfish.enterprise.iiop.impl.GlassFishORBFactoryImpl.createORB(GlassFishORBFactoryImpl.java:93)
    at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:152)
    at com.sun.enterprise.naming.impl.SerialContext.getORB(SerialContext.java:364)
    at com.sun.enterprise.naming.impl.SerialContext.getProviderCacheKey(SerialContext.java:371)
    at com.sun.enterprise.naming.impl.SerialContext.getRemoteProvider(SerialContext.java:401)
    at com.sun.enterprise.naming.impl.SerialContext.getProvider(SerialContext.java:346)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:504)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at com.sun.enterprise.naming.impl.SerialContext.listBindings(SerialContext.java:866)
    at javax.naming.InitialContext.listBindings(InitialContext.java:466)
    at com.apihotels.docrepo.test.DocUploaderTest.setup(DocUploaderTest.java:68)
    at com.apihotels.docrepo.test.DocUploaderTest.junitTestSetup(DocUploaderTest.java:54)
    at com.apihotels.docrepo.test.DocUploaderTest.main(DocUploaderTest.java:43)
Caused by: org.jvnet.hk2.component.ComponentException: Failed to create class com.sun.enterprise.resource.pool.PoolManagerImpl
    at com.sun.hk2.component.ConstructorCreator.create(ConstructorCreator.java:71)
    at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:80)
    at com.sun.hk2.component.SingletonInhabitant.get(SingletonInhabitant.java:67)
    at com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139)
    at com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78)
    at org.jvnet.hk2.component.Habitat$5.get(Habitat.java:703)
    at java.util.AbstractList$Itr.next(AbstractList.java:358)
    at java.util.AbstractCollection.toArray(AbstractCollection.java:188)
    at com.sun.hk2.component.InjectInjectionResolver.getArrayInjectValue(InjectInjectionResolver.java:113)
    at com.sun.hk2.component.InjectInjectionResolver.getValue(InjectInjectionResolver.java:81)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:143)
    ... 58 more
Caused by: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/resource/ResourceException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.newInstance0(Class.java:343)
    at java.lang.Class.newInstance(Class.java:325)
    at com.sun.hk2.component.ConstructorCreator.create(ConstructorCreator.java:65)
    ... 68 more 
```

编辑2：

我试图访问的远程接口。

```
@Remote
public interface TheRemoteInterface {
   public void method1();
}

@Stateless
public class TheImpl implements TheRemoteInterface {
   // no members
   @Override
   public void method1() {
   }
} 
```

# android - speakToUser 未在 Eclipse 中定义

> ID：15646788
> 
> 赞同：1
> 
> 时间：2013-03-26T20:30:20.927
> 
> 标签：android

谁能告诉我为什么 speakToUser 在 Eclipse 中未定义。我无法在网上获得太多帮助。我编写了一个扩展 AccessibilityService 的类 abcAccService，从开发人员站点获取代码，我想使用 speakToUser 函数。但是我在eclipse中得到了未定义的函数。这可能是什么原因。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:40:51.057

我相信这是您所指[的代码：](https://developer.android.com/training/accessibility/service.html#events)

```
// Do something nifty with this text, like speak the composed string
// back to the user.
speakToUser(eventText);
... 
```

那不是真正的方法。他们没有解释清楚，但这只是您需要自己编写的一种理论方法。

* * *

要创建一个`speakToUser()`方法，您需要使用[TextToSpeech](https://developer.android.com/reference/android/speech/tts/TextToSpeech.html)类，您可以按照[教程](http://www.tutorialforandroid.com/2009/09/using-official-texttospeech-in-android.html)来帮助您。SDK 中甚至包含一个示例项目，在 Eclipse 中转到：

*   `New -> Other...`
*   然后`Android > Android Sample Project`
*   最终选择`TtsEngine`。

# asp.net-mvc - 为什么不将仅默认变量的值作为查询字符串的一部分添加到出站 URL？

> ID：15646789
> 
> 赞同：1
> 
> 时间：2013-03-26T20:30:22.970
> 
> 标签：asp.net-mvc, asp.net-mvc-4

为什么不将*默认变量* 的值作为*查询字符串*`myVar`的一部分添加到*出站 URL*：

 *```
 routes.MapRoute("MyRoute", "{controller}/{action}",
        new { myVar = 1 }); 
```

**索引.cshtml：**

```
 @Html.ActionLink("click me", "CustomVariable", "Home", 
                  new { myVar = 1, newMyVar = 1000 }, null); 
```

从上面的*路由系统*生成：

```
 <a href="/Home/CustomVariable?newMyVar=1000">click me</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:37:27.903

在您的路由规则中，您声明如果未提供默认值，则使用此值。

所以当它与默认值相同时，确实不需要提供该值，因为它只会使用默认值。*

# javascript - blockui $.unblockUI() 不工作

> ID：15646794
> 
> 赞同：2
> 
> 时间：2013-03-26T20:30:40.417
> 
> 标签：javascript, jquery, html, css, blockui

我一直在使用 blockUI 开发一个非常简单的模式，它会弹出并询问用户是否达到一定年龄。我总是尝试先在它自己的页面中开发一段代码以避免冲突，这就是我在这里所做的。我有一个简单的 html/javascript 页面，但它没有按应有的方式运行。

每当页面加载时，它就会出现。然而，当试图解除封锁（即使不使用按钮）时，它不会做任何事情。它只是与加载图标一起坐在那里。

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.blockUI.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            // A bit of a work-around. BlockUI tries to center based on location of
            // the div. By attaching block to the html tag immediately, we avoid
            // this issue completely.
            $('html').block({
                message: $('#message'),

                centerX: true,
                centerY: true,

                css: {
                    width: '600px',
                    height: '300px',
                    border: '3px solid #FF9900',
                    backgroundColor: '#000',
                    color: '#fff',
                    padding: '25px'
                }
            });

            $('#over').click(function() {
                alert('clicked!');
                $.unblockUI();
                return false;
            });

            $('#under').click(function() {
                $.unblockUI();
                return false;
            });

        });
    </script>
</head>

<body>
<div id="message" style="display:none;">
    <img src="logo.png" border="0" />
    <br />
    <h1>Welcome!</h1>

    You may not view this page unless you are 21 or over.<br />

    <button id="over">I am 21 or over</button>&nbsp;&nbsp;&nbsp;<button id="under">Under 21</button>

</div>
It's dusty under here! Let me be seen!
</body>
</html> 
```

Chrome 的控制台中没有显示任何错误，我真的找不到不应该关闭的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:39:50.890

When you call `$.unblockUI()` try calling it on an element instead, eg. `$('html').unblock();`:

```
<div class="body">
    <div id="message" style="display:none;">
        <img src="logo.png" border="0" />
        <br />
        <h1>Welcome!</h1>
        You may not view this page unless you are 21 or over.
        <br />
        <button id="over">I am 21 or over</button>&nbsp;&nbsp;&nbsp;
        <button id="under">Under 21</button>
    </div>
    It's dusty under here! Let me be seen!
</div> 
```

The JS would be:

```
$('.body').block({
    message: $('#message'),
    centerX: true,
    centerY: true,
    css: {
        width: '600px',
        height: '300px',
        border: '3px solid #FF9900',
        backgroundColor: '#000',
        color: '#fff',
        padding: '25px'
    }
});
$('#over').click(function () {
    alert('clicked!');
    $('.body').unblock();
    return false;
});
$('#under').click(function () {
    $('.body').unblock();
    return false;
}); 
```

See working example: [http://jsfiddle.net/amyamy86/Taw83/](http://jsfiddle.net/amyamy86/Taw83/)

Read more about *Element Blocking* here: [http://www.malsup.com/jquery/block/#element](http://www.malsup.com/jquery/block/#element)

# ruby-on-rails - Rails form remove 有很多关系

> ID：15646795
> 
> 赞同：0
> 
> 时间：2013-03-26T20:30:41.337
> 
> 标签：ruby-on-rails

如何通过 rails 中的输入标签删除有很多关系？

我有一个名为 invoice 的模型。

```
has_many :expenses 
```

我正在尝试删除发票的所有关联模型：

```
input name="invoice[expense_ids][]" value="" 
```

但这似乎不起作用。输入标签在更新操作中为 update_attributes 函数提供正确格式的参数的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:34:41.120

我是怎么做的在控制器中

```
invoice.expense_ids = [] if invoice.persisted?
invoice.update_attributes(params[:invoice]) 
```

这将在更新记录之前基本上删除任何费用关联，因此现有的将被添加回来，如果没有传入，它将为空白。

更长的方法是基本上删除任何不再在数组中的

```
ids = invoice.expense_ids
ids = ids.keep_if{|i|, params[:invoice][:expense_ids].include?(i)}
invoice.expense_ids = ids 
```

# shell - 在 FreeBSD 中为 shell 脚本创建启动守护进程

> ID：15646797
> 
> 赞同：4
> 
> 时间：2013-03-26T20:30:41.820
> 
> 标签：shell, freebsd

我正在尝试在 rc.d/ 中创建一个文件，该文件将启动我编写的 /bin/sh 脚本。我正在关注此处找到的一些示例：

[http://www.freebsd.org/doc/en/articles/rc-scripting/article.html#rc-flags](http://www.freebsd.org/doc/en/articles/rc-scripting/article.html#rc-flags)

```
#!/bin/sh -x

# PROVIDE: copyfiles

. /etc/rc.subr

name=copyfiles
rcvar=copyfiles_enable
pidfile="/var/run/${name}.pid"

command="/var/etc/copy_dat_files.sh -f /var/etc/copydatafiles.conf"
command_args="&"

load_rc_config $name
run_rc_command "$1" 
```

看来我的pidfile有问题。我的脚本是否必须是创建 pid 文件的脚本，还是会自动创建？我已经尝试了这两种方法，无论我是否让我的脚本创建一个 pid 文件，我都会收到一个错误，即 pid 文件不可读。

如果我的脚本应该成功，那么制作 pid 文件的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:18:09.250

例如，查看现有的守护进程（例如 /etc/rc.d/mountd）。然后查看 /etc/rc.subr 中的子例程——那里有检查 PID 文件的代码，但没有创建它。

换句话说，您可以在守护进程启动脚本中声明 PID 文件是什么，但创建它取决于守护进程。说到守护进程，如果您的守护进程实际上是一个 shell 脚本，您可能希望使用 daemon(8) 实用程序。该实用程序将为您创建 PID 文件。（如果守护程序是用 C 编写的，您可以/应该使用 daemon(3) 函数。）

顺便说一句，在我自己看来，守护进程在打开 PID 文件进行创建时，也应该*锁定*它们（使用flock(3) 或 fcntl(2) 或 lockf(3)）。这样，如果一个实例在没有删除 PID 文件的情况下崩溃（或被杀死），那么下一个实例将没有问题确定该文件是陈旧的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:56:33.757

一般来说，一个守护进程应该创建和清理它自己的 PID 文件。

从 shell 脚本中，您可以使用以下命令来创建它；

```
echo $$ >/var/run/${name}.pid 
```

不要忘记在退出脚本之前删除文件。编写一个执行此操作的`cleanup()`函数，并`trap`在某些信号发生时调用该函数。还要在退出脚本之前调用 cleanup。

# bash - 如何替换unix文件中特定行的单词

> ID：15646800
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:30:48.773
> 
> 标签：bash, unix, replace

我在这里研究了其他问题，但还没有真正找到适合我的问题。我正在尝试从文件中选择特定行并将该行上的字符串替换为另一个字符串。所以我有一个名为 my_course 的文件。我正在尝试修改 my_course 中以“123”开头的一行。在那一行我想用“1”替换字符串“0”。帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T20:33:28.097

一种可能性是使用**sed**：

```
sed '/^123/ s/0/1/' my_course 
```

*   在第一`/../`部分中，您只需指定要查找`^123`以 123 开头的行的模式。

*   在`s/from/to/`您已指定要执行的替换的部分中。

请注意，默认情况下，替换后文件将被写入标准输出。你可能想要：

*   使用重定向输出`... > my_new_course`

*   `-e`使用切换到 sed执行“就地”替换

如果您正在使用破坏性的就地变体，您可能还想使用`-iEXTENSION`原始版本的给定 EXTENSION 副本，以防出现问题。

**编辑：** 要与存储在变量中的前缀匹配所需的内衬，您必须用双引号将 sed 脚本括起来`"`，因为使用单个 qoutes`'`将防止变量扩展：

```
sed "/^$input/ s/0/1/" my_course 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T20:34:11.690

你试过这个： sed -e '[line]s/old_string/new_string/' my_course

PS：不应该使用 [ ] ，只是为了说明您应该将数字放在“s”之前。

干杯!

其实这种情况下的 -e 不是必须的，我可以直接写

```
sed '<line number>s/<old string>/<new string>/' my_course 
```

# php - 需要帮助创建一个 mysql 查询

> ID：15646805
> 
> 赞同：0
> 
> 时间：2013-03-26T20:31:08.543
> 
> 标签：php, mysql

假设我有一个名为“users”的表，其中包含以下相关列：

*   用户名
*   邮政编码

我们还假设我有一个名为“shops”的表，其中包含以下相关列：

*   店铺名称
*   邮政编码

我们还假设我有一个名为“preferred_shops”的表，其中包含以下相关列：

*   店铺名称
*   用户名

我们还假设我有一个名为“zipData”的表，其中包含以下相关列：

*   邮政编码
*   纬度
*   隆

目前我可以成功运行此代码：

```
$lat="49.886436"; // Value should be obtained from the zipData table by doing a "SELECT FROM zipData WHERE zipcode=(users_zip_code)" or similar query 
$lon="-97.14553"; // Value should be obtained from the zipData table by doing a "SELECT FROM zipData WHERE zipcode=(users_zip_code)" or similar query
$radius=5;

$query="SELECT zipcode FROM zipData
    WHERE (POW((69.1*(lon-\"$lon\")*cos($lat/57.3)),\"2\")+
           POW((69.1*(lat-\"$lat\")),\"2\"))<($radius*$radius)"; 
```

上面的查询将成功显示在提供的纬度/经度的给定半径内的所有其他邮政编码，但我没有兴趣知道还有哪些其他邮政编码......我想知道半径内有哪些商店。

您可以提供的任何帮助将不胜感激。

==== 编辑，因为我意识到它实际上有点复杂 ====

这是我需要做的...

*   从“用户”表中检索用户的邮政编码
*   从 zipData 表中查找用户的纬度/经度
*   查找给定半径内的所有商店，这些商店也在“preferred_shops”表中，给定用户在“用户名”列中

需要考虑的问题：“zipData”中的邮政编码没有空格，但“users”和“shops”中的邮政编码出于美观原因有空格……例如“A1A 1A1”格式的加拿大邮政编码

==== 编辑发布解决方案 ====

系统说我不能回答我自己的问题。这听起来很奇怪，因为在其他人的帮助下我已经找到了答案。作为一项工作，我正在编辑原始帖子。这是解决方案...

好的，所以我想通了（在回复的人的帮助下）......这就是我所做的。

它可能会更短更干净，所以如果你知道更好的方法，请随时让它变得更好。

```
$query = "SELECT * FROM preferred_shops
    WHERE `username`='{$_SESSION['account_name']}'
";

$result = mysql_query($query);
if (mysql_errno())
{ 
    die( "ERROR ".mysql_errno($link) . ": " . mysql_error($link) );
}

$num_rows = mysql_num_rows($result);

while($row = mysql_fetch_array($result))
{

    // Get user's preferences and postal code
    $query2 = "SELECT * FROM seekers
        WHERE `username`='{$_SESSION['account_name']}'
    ";

    $result2 = mysql_query($query2);
    if (mysql_errno())
    { 
        die( "ERROR ".mysql_errno($link) . ": " . mysql_error($link) );
    }
    $num_rows2 = mysql_num_rows($result2);

    $row2 = mysql_fetch_array($result2);

    $radius=$row2['radius']; // Didn't mention that is column was in the table but that didn't matter... the value could have come from anywhere.

    // Get user's lat/lon
    // Remove white space from the postal code
    $query3="SELECT * FROM zipData WHERE zipcode=replace('{$row2['postal']}',' ','')";
    $result3 = mysql_query($query3);
    if (mysql_errno())
    { 
        die( "ERROR ".mysql_errno($link) . ": " . mysql_error($link) );
    }
    $num_rows3 = mysql_num_rows($result3);

    $row3 = mysql_fetch_array($result3);

    $lat=$row3["lat"];
    $lon=$row3["lon"];

    $query4="SELECT shop_name FROM zipData,shops
        WHERE (POW((69.1*(lon-\"$lon\")*cos($lat/57.3)),\"2\")+POW((69.1*(lat-\"$lat\")),\"2\"))<($radius*$radius)
        AND replace(shops.zipcode,' ','') = zipData.zipcode
        AND shops.shop_name={$row['shop_name']}
    ";

    $result4 = mysql_query($query4);
    if (mysql_errno())
    { 
        die( "ERROR ".mysql_errno($link) . ": " . mysql_error($link) );
    }
    $num_rows4 = mysql_num_rows($result4);

    $num_jobs=$num_rows4;

    $i=0;
    while($row4 = mysql_fetch_array($result4))
    {
        $shopArray[$i]=$row4["shop_name"];
        $i++;
    }
    var_dump($shopArray);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:37:17.667

您需要加入到商店表中

```
SELECT shop_name FROM zipData,shops
WHERE (POW((69.1*(lon-\"$lon\")*cos($lat/57.3)),\"2\")+
       POW((69.1*(lat-\"$lat\")),\"2\"))<($radius*$radius) and
    shops.zipcode = zipdata.zipcode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:37:02.593

```
select shopname from shops where zipcode in ( <your other working query> ) 
```

# algorithm - 评分系统建议 - 加权机制？

> ID：15646809
> 
> 赞同：10
> 
> 时间：2013-03-26T20:31:43.243
> 
> 标签：algorithm, math, discrete-mathematics, scoring

我正在尝试验证用户提供的一系列单词。我正在尝试提出一个评分系统，该系统将确定一系列单词确实是有效单词的可能性。

假设以下输入：

```
xxx yyy zzz 
```

我做的第一件事是根据我拥有的单词数据库单独检查每个单词。所以，假设它`xxx`在数据库中，所以我们 100% 确定它是一个有效的词。然后假设`yyy`数据库中不存在它，但存在其拼写的可能变化（例如`yyyy`）。我们不会给出`yyy`100% 的分数，但可能会更低（比如说 90%）。然后`zzz`在数据库中根本不存在。因此，`zzz`得分为 0%。

所以我们有这样的事情：

```
xxx = 100%
yyy = 90%
zzz = 0% 
```

进一步假设用户要么去：

1.  提供所有有效单词的列表（最有可能）
2.  提供所有无效词的列表（可能）
3.  提供有效和无效词的混合列表（不太可能）

总体而言，确定作为`xxx yyy zzz`一系列有效单词的置信度分数的良好评分系统是什么？我不是在寻找任何太复杂的东西，但是获得分数的平均值似乎并不正确。如果单词列表中的某些单词是有效的，我认为这会增加在数据库中找不到的单词也是实际单词的可能性（这只是数据库的限制，它不包含该特定单词）。

注意：输入通常至少为 2 个单词（大部分是 2 个单词），但可以是 3、4、5（在某些极少数情况下甚至可能更多）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T07:18:25.433

**编辑**我添加了一个新部分，该部分旨在将单词组区分为英语组和非英语组。这是在估计任何给定单词是否为英语的部分下方。

* * *

我认为你直觉你在这里解释的评分系统并不能完全解决这个问题。

找到字典中的单词很棒 - 这些单词可以立即给出 100% 并忽略，但是不匹配的单词呢？你如何确定他们的概率？这可以通过包含完全相同字母的句子之间的简单比较来解释：

1.  Abergrandly 收到 wuzkinds
2.  Erbdnerye wcgluszaaindid vker

两个句子都没有任何英语单词，**但**第一句话看起来是英语 - 它可能是关于某人（Abergrandly）收到（有拼写错误）几个项目（wuzkinds）。第二句话显然只是我的婴儿敲击键盘。

因此，在上面的示例中，即使不存在英语单词，说英语的人说它的可能性也很高。第二句是英语的概率为 0%。

我知道一些有助于检测差异的启发式方法：

**字母的简单[频率分析](http://en.wikipedia.org/wiki/Frequency_analysis_(cryptanalysis))**

![英文字母的典型分布。 来自维基百科](../Images/fdce4dadc5c9e5ae36df9c4271d40905.png)

在任何语言中，有些字母比其他字母更常见。简单地计算每个字母的出现率并将其与语言平均值进行比较可以告诉我们很多。

有几种方法可以从中计算概率。一种可能是：

1.  准备
    1.  计算或获取合适英语语料库中字母的频率。[NLTK](http://nltk.org/)是一个很好的开始方式。相关的[Natural Language Processing with Python 书提供了](http://nltk.org/book/)非常丰富的信息。
2.  考试
    1.  计算要测试的短语中每个字母出现的次数
    2.  计算[线性回归](http://en.wikipedia.org/wiki/Simple_linear_regression)，其中每个字母点的坐标为：
        1.  X轴：从1.1以上预测的频率
        2.  Y轴：实际计数
    3.  对数据 执行[回归分析](http://en.wikipedia.org/wiki/Regression_analysis#Regression_diagnostics)
        1.  英语应报告接近 1.0 的正 r。计算 R^2 作为这是英语的概率。
        2.  0 或以下的 r 要么与英语没有相关性，要么字母具有负相关性。不太可能是英语。

优点：

*   计算非常简单

缺点：

*   对于小样本（例如“斑马、木琴”）效果不佳
*   “Rrressseee”似乎是一个很可能的词
*   不区分我上面给出的两个例句。

**[Bigram 频率](http://en.wikipedia.org/wiki/Bigram)和 Trigram 频率**

这是字母频率的扩展，但着眼于字母**对**或**三连音**的频率。例如，au 以 99% 的频率跟随 aq（为什么不是 100%？dafuq）。同样，NLTK 语料库非常有用。

![有向图频率基于 40,000 个单词的样本](../Images/e84a2e9b9e6837da1cca83de056f64c2.png)

以上来自： http: [//www.math.cornell.edu/~mec/2003-2004/cryptography/subs/digraphs.jpg](http://www.math.cornell.edu/~mec/2003-2004/cryptography/subs/digraphs.jpg)

这种方法在整个行业中被广泛使用，从语音识别到软键盘上的预测文本。

三元组特别有用。考虑到'll'是一个非常常见的有向图。因此，字符串 'llllllllll' 仅包含常见的有向图，而有向图方法使其看起来像一个单词。Trigraphs 解决了这个问题，因为 'llll' 永远不会出现。

使用三元组计算一个单词的概率不能用简单的线性回归模型完成（绝大多数三元组不会出现在单词中，因此大多数点将在 x 轴上）。相反，您可以使用马尔可夫链（使用二元组或三元组的概率矩阵）来计算单词的概率。马尔可夫链的介绍在[这里](http://www.aw-bc.com/greenwell/markov.pdf)。

首先建立一个概率矩阵：

*   X 轴：每个二元组（“th”、“he”、“in”、“er”、“an”等）
*   Y 轴：字母表中的字母。
*   矩阵成员由二合图之后的字母的概率组成。

要从单词的开头开始计算概率，X 轴有向图需要包括空格-a、空格-b 到空格-z - 例如，有向图“空格”t 表示以 t 开头的单词。

计算单词的概率包括迭代有向图并获得给定有向图的第三个字母的概率。例如，“他们”这个词被分解为以下概率：

*   h 跟随“空格”t -> 概率*x* %
*   e 跟随 th -> 概率*y* %
*   y 跟随他 -> 概率*z* %

总概率 = *x* * *y* * *z* %

此计算通过将“wcgl”突出显示为具有 0% 的概率来解决简单频率分析的问题。

请注意，任何给定单词的概率将非常小，并且在统计上每个额外字符会小 10 倍到 20 倍。但是，通过检查大型语料库中 3、4、5、6 等字符的已知英文单词的概率，您可以确定一个截断值，低于该截断值该单词极不可能出现。每个极不可能的三合字母都会将成为英语的可能性降低 1 到 2 个数量级。

然后，您可以规范化一个单词的概率，例如，对于 8 个字母的英文单词（我已经编造了下面的数字）：

*   来自马尔可夫链的概率：
    *   最佳英语单词的概率 = 10^-7 (10% * 10% * .. * 10%)
    *   截止（最不可能的英语单词的概率）= 10^-14 (1% * 1% * .. * 1%)
    *   测试词的概率（比如“coattail”）= 10^-12
*   “标准化”结果
    *   取日志：最佳 = -7；测试 = -12；截止 = -14
    *   使正面：最佳= 7；测试 = 2; 截止 = 0
    *   在 1.0 和 0.0 之间标准化：最佳 = 1.0；测试 = 0.28；截止 = 0.0
    *   （您可以轻松地将上限和下限调整到 90% 到 10% 之间）

现在我们已经研究了如何获得任何给定单词是英语的更好概率，让我们看看单词组。

该组的定义是最少 2 个单词，但可以是 3、4、5 或（在少数情况下）更多。您没有提到单词之间有任何压倒一切的结构或关联，所以我不假设：

*   任何组都是一个短语，例如“坦克指挥官”、“红字日”
*   该组是一个句子或从句，例如“我口渴”、“玛丽需要一封电子邮件”

*但是*，如果这个假设是错误的，那么对于较大的词组，问题就会变得更容易处理，因为这些词将符合英语的语法规则——我们可以使用[NLTK](http://nltk.org)来解析子句以获得更多洞察力。

* * *

**看一组词是英文的概率**

好的，为了了解问题，让我们看一下不同的用例。在下面的：

*   我将忽略所有单词或所有非单词的情况，因为这些情况是微不足道的
*   我会考虑你不能被假设在字典中的类似英语的单词，比如奇怪的姓氏（例如 Kardashian）、不寻常的产品名称（例如 stackexchange）等等。
*   我将使用概率的*简单平均值*，假设随机乱码为 0%，而类似英语的单词为 90%。

**两个字**

1.  (50%) 红色 ajkhsdjas
2.  (50%) Hkdfs 星期五
3.  (95%) 卡戴珊计划
4.  (95%) 使用 Stackexchange

从这些示例中，我认为您会同意 1\. 和 2\. 可能不可接受，而 3\. 和 4\. 可以。简单的平均计算似乎是两个词组的有用鉴别器。

**三个词**

用一个可疑的话：

1.  (67%) 红黎明 dskfa
2.  (67%) Hskdkc 共产党宣言
3.  (67%) 经济 jasdfh 危机
4.  (97%) 卡戴珊十五分钟
5.  (97%) stackexchange 用户体验

显然 4\. 和 5\. 是可以接受的。

但是 1.、2\. 或 3\. 呢？1.、2\. 或 3\. 之间是否存在任何*实质性差异？*可能不会，排除使用贝叶斯统计。但是这些是否应该归类为英语？我想这是你的电话。

用两个可疑的词：

1.  (33%) 红色 ksadjak adsfhd
2.  (33%) jkdsfk dsajjds 宣言
3.  (93%) Stackexchange 向卡戴珊发送电子邮件
4.  (93%) Stackexchange 卡戴珊账户

我会冒险认为 1\. 和 2\. 是不可接受的，但 3\. 和 4\. 肯定是。（嗯，除了卡戴珊在这里有一个账户——这不是好兆头）。再次，简单平均值可以用作简单的鉴别器 - 您可以选择它是高于还是低于 67%。

**四个字**

排列的数量开始变得疯狂，所以我只举几个例子：

1.  一个可疑的词：
    1.  (75%) 今天的 jhjasd 语言编程
    2.  (93%) 绝望的卡戴珊电视剧
2.  两个可疑的词：
    1.  (50%) 今天编程 kasdhjk jhsaer
    2.  (95%) Stackexchange 实现 Kasdashian 过滤器
3.  三个可疑词：
    1.  (25%) 编程 sdajf jkkdsf kuuerc
    2.  (93%) Stackexchange 咬牙切齿的卡戴珊推特甲板

在我看来，很明显哪些词组是有意义的，除了 2.1 之外，哪些词组与简单平均值一致——这又是你的决定。

有趣的是，四个词组的截止点可能与三个词组不同，因此我建议您的实现为每个组设置不同的配置设置。具有不同截止值的结果是，从 2->3 到 3->4 的量子跃迁不符合平滑、连续概率的概念。

*为这些组实现不同的截止值直接满足您的直觉“现在，我只是有一种“直觉”感觉我的 xxx yyy zzz 示例确实应该高于 66.66%，但我不确定如何将其表达为公式。”* .

**五个字**

你明白了 - 我不打算在这里再列举了。然而，当你读到五个单词时，它开始获得足够的结构，可以引入几个新的启发式方法：

1.  贝叶斯概率/统计的使用（鉴于前两个词是一个词，第三个词是一个词的概率是多少？）
2.  使用 NLTK 解析组并查看它是否具有语法意义

**问题案例**

英语有许多非常短的单词，这可能会导致问题。例如：

1.  胡言乱语：r xu r
2.  这是英文吗？我是一个

您可能需要编写代码来专门测试 1 和 2 个字母的单词。

**TL;DR 总结**

1.  可以测试非字典单词的“英语”（或法语或西班牙语等）如何使用字母和三元组频率。挑选类似英语的单词并给予高分是区分英语组的关键
2.  最多四个词，简单平均具有很大的辨别力，但您可能希望为 2 个词、3 个词和 4 个词设置不同的截止值。
3.  五个字及以上你大概可以开始使用贝叶斯统计
4.  较长的词组**如果应该是句子或句子片段**，可以使用自然语言工具（例如 NLTK）进行测试。
5.  这是一个启发式过程，最终会出现混淆值（例如“我是一个”）。因此，如果编写一个完美的统计分析例程可能会被大量异常所混淆，那么与简单的平均值相比，它可能不是特别有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T18:20:47.553

也许您可以使用[贝叶斯公式](http://www.math.cornell.edu/~mec/2008-2009/TianyiZheng/Bayes.html)。

您已经对每个单词是真实的概率进行了数字猜测。

下一步是对整个列表是好、坏或混合的概率进行有根据的猜测（即将“最有可能”、“可能”和“不太可能”转换为数字。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T05:50:51.660

我将给出一个贝叶斯层次模型解决方案。它有一些必须手动设置的参数，但在这些参数方面它非常稳健，如下面的模拟所示。它不仅可以处理单词列表的评分系统，还可以处理输入单词的用户的可能分类。处理可能有点技术性，但最终我们将有一个例程来计算分数作为 3 个数字的函数：列表中的单词数，数据库中完全匹配的单词数，以及部分匹配的人数（如`yyyy`）。该例程是在 R 中实现的，但如果您从未使用过它，只需下载解释器，将代码复制并粘贴到它的控制台中，您就会看到此处显示的结果。

顺便说一句，英语不是我的第一语言，所以请耐心等待... :-)

**一、型号规格：**

有 3 类用户，分别命名为 I、II、III。我们假设每个单词列表都是由单个用户生成的，并且该用户是从一组用户中随机抽取的。我们说这个宇宙是 70% 的 I 类、25% 的 II 类和 5% 的 III 类。当然，这些数字是可以更改的。我们到目前为止

概率[用户=我] = 70%

概率[用户=II] = 25%

概率[用户=III] = 5%

给定用户，我们假设*条件独立*，即用户不会查看之前的单词来决定他是否会输入有效或无效的单词。

用户I倾向于只给出有效词，用户II只给出无效词，用户III是混合的。所以我们设置

概率[字=确定 | 用户=我] = 99%

概率[字=确定 | 用户=II] = 0.001%

概率[字=确定 | 用户=III] = 50%

给定用户的类别，单词无效的概率是互补的。请注意，我们给出了一个非常小但非零的 II 类用户输入有效单词的概率，因为即使是打字机前的猴子也会最终输入一个有效单词。

模型规范的最后一步是关于数据库。我们假设，对于每个单词，查询可能有 3 个结果：完全匹配、部分匹配（如`yyyy`）或不匹配。在概率方面，我们假设

概率[匹配 | 有效] = 98%（并非所有有效词都会被找到）

概率[部分 | 有效] = 0.2%（罕见事件）

概率[匹配 | INvalid] = 0（数据库可能不完整，但没有无效词）

概率[部分 | 无效] = 0.1%（罕见事件）

不必设置找不到单词的概率，因为它们是互补的。就是这样，我们的模型设置好了。

**2.符号和目的**

我们有一个离散随机变量 U，取 {1, 2, 3} 中的值和两个离散随机向量 W 和 F，每个向量的大小为 n（= 单词数），其中 W_i 如果单词有效则为 1，如果单词有效，则 W_i 为 2如果单词无效，如果在数据库中找到该单词，则 F_i 为 1，如果部分匹配，则为 2，如果未找到，则为 3。

只有向量 F 是可观察的，其他的都是潜在的。使用贝叶斯定理和我们在模型规范中设置的分布，我们可以计算

(a) 概率[用户=我 | F]，

即，给定观察到的匹配，用户属于 I 类的*后验*概率；和

(b) Prob[W=所有有效| F]，

即，给定观察到的匹配，所有单词都是有效的后验概率。

根据您的目标，您可以使用一种或另一种作为评分解决方案。例如，如果您有兴趣区分真实用户和计算机程序，则可以使用 (a)。如果您只关心单词列表是否有效，则应使用 (b)。

我将尝试在下一节中简要解释该理论，但这是贝叶斯层次模型中的常用设置。参考文献是 Gelman (2004)，“贝叶斯数据分析”。

如果需要，您可以使用代码跳转到第 4 节。

**3\. 数学**

在这种情况下，我将像往常一样使用轻微的符号滥用，写作

p(x|y) 用于 Prob[X=x|Y=y] 和 p(x,y) 用于 Prob[X=x,Y=y]。

目标 (a) 是计算 p(u|f)，因为 u=1。使用贝叶斯定理：

p(u|f) = p(u,f)/p(f) = p(f|u)p(u)/p(f)。

p(u) 是给定的。p(f|u) 来自：

p(f|u) = \prod_{i=1}^{n} \sum_{w_i=1}^{2} (p(f_i|w_i)p(w_i|u))

p(f|u) = \prod_{i=1}^{n} p(f_i|u)

= p(f_i=1|u)^(m) p(f_i=2|u)^(p) p(f_i=3)^(nmp)

其中 m = 匹配数， p = 部分匹配数。

p(f) 计算如下：

\sum_{u=1}^{3} p(f|u)p(u)

所有这些都可以直接计算出来。

目标 (b) 由下式给出

p(w|f) = p(f|w)*p(w)/p(f)

在哪里

p(f|w) = \prod_{i=1}^{n} p(f_i|w_i)

p(f_i|w_i) 在模型规范中给出。

p(f) 是上面计算的，所以我们只需要

p(w) = \sum_{u=1}^{3} p(w|u)p(u)

在哪里

p(w|u) = \prod_{i=1}^{n} p(w_i|u)

所以一切都准备好实施了。

**4\. 守则**

代码编写为 R 脚本，常量在开头设置，根据上面讨论的内容，输出由函数给出

(a) p.u_f(u, n, m, p)

和

(b) p.wOK_f(n, m, p)

计算选项（a）和（b）的概率，给定输入：

u = 所需的用户类别（设置为 u=1）
n = 词数
m = 匹配
数 p = 部分匹配数

代码本身：

```
### Constants:

# User:

# Prob[U=1], Prob[U=2], Prob[U=3]

Prob_user = c(0.70, 0.25, 0.05)

# Words:

# Prob[Wi=OK|U=1,2,3]

Prob_OK = c(0.99, 0.001, 0.5)

Prob_NotOK = 1 - Prob_OK

# Database:

# Prob[Fi=match|Wi=OK], Prob[Fi=match|Wi=NotOK]:

Prob_match = c(0.98, 0)

# Prob[Fi=partial|Wi=OK], Prob[Fi=partial|Wi=NotOK]:

Prob_partial = c(0.002, 0.001)

# Prob[Fi=NOmatch|Wi=OK], Prob[Fi=NOmatch|Wi=NotOK]:

Prob_NOmatch = 1 - Prob_match - Prob_partial

###### First Goal: Probability of being a user type I, given the numbers of matchings (m) and partial matchings (p).

# Prob[Fi=fi|U=u]
#
p.fi_u <- function(fi, u)
{
    unname(rbind(Prob_match, Prob_partial, Prob_NOmatch) %*% rbind(Prob_OK, Prob_NotOK))[fi,u]
}

# Prob[F=f|U=u]
#
p.f_u <- function(n, m, p, u)
{
    exp( log(p.fi_u(1, u))*m + log(p.fi_u(2, u))*p + log(p.fi_u(3, u))*(n-m-p) )
}

# Prob[F=f]
#
p.f <- function(n, m, p)
{
    p.f_u(n, m, p, 1)*Prob_user[1] + p.f_u(n, m, p, 2)*Prob_user[2] + p.f_u(n, m, p, 3)*Prob_user[3]
}

# Prob[U=u|F=f]
#
p.u_f <- function(u, n, m, p)
{
    p.f_u(n, m, p, u) * Prob_user[u] / p.f(n, m, p)
}

# Probability user type I for n=1,...,5:

for(n in 1:5) for(m in 0:n) for(p in 0:(n-m))
{
    cat("n =", n, "| m =", m, "| p =", p, "| Prob type I =", p.u_f(1, n, m, p), "\n")
}

##################################################################################################

# Second Goal: Probability all words OK given matchings/partial matchings.

p.f_wOK <- function(n, m, p)
{
    exp( log(Prob_match[1])*m + log(Prob_partial[1])*p + log(Prob_NOmatch[1])*(n-m-p) )
}

p.wOK <- function(n)
{
    sum(exp( log(Prob_OK)*n + log(Prob_user) ))
}

p.wOK_f <- function(n, m, p)
{
    p.f_wOK(n, m, p)*p.wOK(n)/p.f(n, m, p)
}

# Probability all words ok for n=1,...,5:

for(n in 1:5) for(m in 0:n) for(p in 0:(n-m))
{
    cat("n =", n, "| m =", m, "| p =", p, "| Prob all OK =", p.wOK_f(n, m, p), "\n")
} 
```

**5\. 结果**

这是 n=1,...,5 以及 m 和 p 的所有可能性的结果。例如，如果您有 3 个单词、一个匹配、一个部分匹配和一个未找到，您可以 66.5% 确定它是 I 类用户。在相同的情况下，您可以将 42.8% 的分数归因于所有单词都是有效的。

请注意，选项 (a) 不会对所有匹配的情况给出 100% 的分数，但选项 (b) 会。这是意料之中的，因为我们假设数据库没有无效词，因此如果它们都被找到，那么它们都是有效的。OTOH，II 类或 III 类用户输入所有有效单词的可能性很小，但随着 n 的增加，这种可能性会迅速降低。

（一个）

```
n = 1 | m = 0 | p = 0 | Prob type I = 0.06612505 
n = 1 | m = 0 | p = 1 | Prob type I = 0.8107086 
n = 1 | m = 1 | p = 0 | Prob type I = 0.9648451 
n = 2 | m = 0 | p = 0 | Prob type I = 0.002062543 
n = 2 | m = 0 | p = 1 | Prob type I = 0.1186027 
n = 2 | m = 0 | p = 2 | Prob type I = 0.884213 
n = 2 | m = 1 | p = 0 | Prob type I = 0.597882 
n = 2 | m = 1 | p = 1 | Prob type I = 0.9733557 
n = 2 | m = 2 | p = 0 | Prob type I = 0.982106 
n = 3 | m = 0 | p = 0 | Prob type I = 5.901733e-05 
n = 3 | m = 0 | p = 1 | Prob type I = 0.003994149 
n = 3 | m = 0 | p = 2 | Prob type I = 0.200601 
n = 3 | m = 0 | p = 3 | Prob type I = 0.9293284 
n = 3 | m = 1 | p = 0 | Prob type I = 0.07393334 
n = 3 | m = 1 | p = 1 | Prob type I = 0.665019 
n = 3 | m = 1 | p = 2 | Prob type I = 0.9798274 
n = 3 | m = 2 | p = 0 | Prob type I = 0.7500993 
n = 3 | m = 2 | p = 1 | Prob type I = 0.9864524 
n = 3 | m = 3 | p = 0 | Prob type I = 0.990882 
n = 4 | m = 0 | p = 0 | Prob type I = 1.66568e-06 
n = 4 | m = 0 | p = 1 | Prob type I = 0.0001158324 
n = 4 | m = 0 | p = 2 | Prob type I = 0.007636577 
n = 4 | m = 0 | p = 3 | Prob type I = 0.3134207 
n = 4 | m = 0 | p = 4 | Prob type I = 0.9560934 
n = 4 | m = 1 | p = 0 | Prob type I = 0.004198015 
n = 4 | m = 1 | p = 1 | Prob type I = 0.09685249 
n = 4 | m = 1 | p = 2 | Prob type I = 0.7256616 
n = 4 | m = 1 | p = 3 | Prob type I = 0.9847408 
n = 4 | m = 2 | p = 0 | Prob type I = 0.1410053 
n = 4 | m = 2 | p = 1 | Prob type I = 0.7992839 
n = 4 | m = 2 | p = 2 | Prob type I = 0.9897541 
n = 4 | m = 3 | p = 0 | Prob type I = 0.855978 
n = 4 | m = 3 | p = 1 | Prob type I = 0.9931117 
n = 4 | m = 4 | p = 0 | Prob type I = 0.9953741 
n = 5 | m = 0 | p = 0 | Prob type I = 4.671933e-08 
n = 5 | m = 0 | p = 1 | Prob type I = 3.289577e-06 
n = 5 | m = 0 | p = 2 | Prob type I = 0.0002259559 
n = 5 | m = 0 | p = 3 | Prob type I = 0.01433312 
n = 5 | m = 0 | p = 4 | Prob type I = 0.4459982 
n = 5 | m = 0 | p = 5 | Prob type I = 0.9719289 
n = 5 | m = 1 | p = 0 | Prob type I = 0.0002158996 
n = 5 | m = 1 | p = 1 | Prob type I = 0.005694145 
n = 5 | m = 1 | p = 2 | Prob type I = 0.1254661 
n = 5 | m = 1 | p = 3 | Prob type I = 0.7787294 
n = 5 | m = 1 | p = 4 | Prob type I = 0.988466 
n = 5 | m = 2 | p = 0 | Prob type I = 0.00889696 
n = 5 | m = 2 | p = 1 | Prob type I = 0.1788336 
n = 5 | m = 2 | p = 2 | Prob type I = 0.8408416 
n = 5 | m = 2 | p = 3 | Prob type I = 0.9922575 
n = 5 | m = 3 | p = 0 | Prob type I = 0.2453087 
n = 5 | m = 3 | p = 1 | Prob type I = 0.8874493 
n = 5 | m = 3 | p = 2 | Prob type I = 0.994799 
n = 5 | m = 4 | p = 0 | Prob type I = 0.9216786 
n = 5 | m = 4 | p = 1 | Prob type I = 0.9965092 
n = 5 | m = 5 | p = 0 | Prob type I = 0.9976583 
```

(二)

```
n = 1 | m = 0 | p = 0 | Prob all OK = 0.04391523 
n = 1 | m = 0 | p = 1 | Prob all OK = 0.836025 
n = 1 | m = 1 | p = 0 | Prob all OK = 1 
n = 2 | m = 0 | p = 0 | Prob all OK = 0.0008622994 
n = 2 | m = 0 | p = 1 | Prob all OK = 0.07699368 
n = 2 | m = 0 | p = 2 | Prob all OK = 0.8912977 
n = 2 | m = 1 | p = 0 | Prob all OK = 0.3900892 
n = 2 | m = 1 | p = 1 | Prob all OK = 0.9861099 
n = 2 | m = 2 | p = 0 | Prob all OK = 1 
n = 3 | m = 0 | p = 0 | Prob all OK = 1.567032e-05 
n = 3 | m = 0 | p = 1 | Prob all OK = 0.001646751 
n = 3 | m = 0 | p = 2 | Prob all OK = 0.1284228 
n = 3 | m = 0 | p = 3 | Prob all OK = 0.923812 
n = 3 | m = 1 | p = 0 | Prob all OK = 0.03063598 
n = 3 | m = 1 | p = 1 | Prob all OK = 0.4278888 
n = 3 | m = 1 | p = 2 | Prob all OK = 0.9789305 
n = 3 | m = 2 | p = 0 | Prob all OK = 0.485069 
n = 3 | m = 2 | p = 1 | Prob all OK = 0.990527 
n = 3 | m = 3 | p = 0 | Prob all OK = 1 
n = 4 | m = 0 | p = 0 | Prob all OK = 2.821188e-07 
n = 4 | m = 0 | p = 1 | Prob all OK = 3.046322e-05 
n = 4 | m = 0 | p = 2 | Prob all OK = 0.003118531 
n = 4 | m = 0 | p = 3 | Prob all OK = 0.1987396 
n = 4 | m = 0 | p = 4 | Prob all OK = 0.9413746 
n = 4 | m = 1 | p = 0 | Prob all OK = 0.001109629 
n = 4 | m = 1 | p = 1 | Prob all OK = 0.03975118 
n = 4 | m = 1 | p = 2 | Prob all OK = 0.4624648 
n = 4 | m = 1 | p = 3 | Prob all OK = 0.9744778 
n = 4 | m = 2 | p = 0 | Prob all OK = 0.05816511 
n = 4 | m = 2 | p = 1 | Prob all OK = 0.5119571 
n = 4 | m = 2 | p = 2 | Prob all OK = 0.9843855 
n = 4 | m = 3 | p = 0 | Prob all OK = 0.5510398 
n = 4 | m = 3 | p = 1 | Prob all OK = 0.9927134 
n = 4 | m = 4 | p = 0 | Prob all OK = 1 
n = 5 | m = 0 | p = 0 | Prob all OK = 5.05881e-09 
n = 5 | m = 0 | p = 1 | Prob all OK = 5.530918e-07 
n = 5 | m = 0 | p = 2 | Prob all OK = 5.899106e-05 
n = 5 | m = 0 | p = 3 | Prob all OK = 0.005810434 
n = 5 | m = 0 | p = 4 | Prob all OK = 0.2807414 
n = 5 | m = 0 | p = 5 | Prob all OK = 0.9499773 
n = 5 | m = 1 | p = 0 | Prob all OK = 3.648353e-05 
n = 5 | m = 1 | p = 1 | Prob all OK = 0.001494098 
n = 5 | m = 1 | p = 2 | Prob all OK = 0.051119 
n = 5 | m = 1 | p = 3 | Prob all OK = 0.4926606 
n = 5 | m = 1 | p = 4 | Prob all OK = 0.9710204 
n = 5 | m = 2 | p = 0 | Prob all OK = 0.002346281 
n = 5 | m = 2 | p = 1 | Prob all OK = 0.07323064 
n = 5 | m = 2 | p = 2 | Prob all OK = 0.5346423 
n = 5 | m = 2 | p = 3 | Prob all OK = 0.9796679 
n = 5 | m = 3 | p = 0 | Prob all OK = 0.1009589 
n = 5 | m = 3 | p = 1 | Prob all OK = 0.5671273 
n = 5 | m = 3 | p = 2 | Prob all OK = 0.9871377 
n = 5 | m = 4 | p = 0 | Prob all OK = 0.5919764 
n = 5 | m = 4 | p = 1 | Prob all OK = 0.9938288 
n = 5 | m = 5 | p = 0 | Prob all OK = 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-30T05:19:38.850

由于单词的顺序在您的描述中并不重要，因此自变量是有效单词的比例。如果分数是完美的 1，即发现所有单词都与 DB 完美匹配，那么您完全可以肯定得到所有有效的结果。如果它为零，即数据库中的所有单词都是完全未命中的，那么您完全肯定会得到完全无效的结果。如果你有 0.5，那么这肯定是不太可能的混合结果，因为其他两个都不可能。

你说混合结果不太可能，而两个极端情况更是如此。你追求的是完全有效的结果的可能性。

让有效词的分数（匹配的“确定性”之和/词的数量）为 f，因此所有有效结果的期望可能性为 L(f)。通过到目前为止的讨论，我们知道 L(1)=1 和 L(f)=0 对于 0<=f<=1/2 。

为了尊重您的信息，即混合结果不太可能低于全有效（和全无效）结果，L 的形状必须单调且快速地从 1/2 上升到 1，并在 f=1 时达到 1。

由于这是启发式的，我们可以选择任何具有此字符的合理函数。如果我们很聪明，它将有一个参数来控制台阶的陡度，也许还有一个参数来控制它的位置。这让我们可以调整中间情况下“不太可能”的含义。

对于 1/2 <= f <= 1，这样的函数之一是：

```
L(f) = 5 + f * (-24 + (36 - 16 * f) * f) + (-4 + f * (16 + f * (-20 + 8 * f))) * s 
```

0 <= f < 1/2 时为零。虽然看起来很毛茸茸，但它是与 (1/2,0) 和 (1,1) 相交的最简单的多项式，在 f=1 处斜率为 0，在 f=0 处斜率为 s。

您可以设置 0 <= s <= 3 来更改阶梯形状。这是 s=3 的镜头，这可能是您想要的：![函数图的屏幕截图](../Images/9e419719316137cbc92925d3261a94f5.png)

如果您设置 s > 3，它会在稳定下来之前高于 1，这不是我们想要的。

当然还有无限多的其他可能性。如果这个不起作用，请发表评论，我们会寻找另一个。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T21:53:26.353

如果“平均”由于数据库缺少单词而无法解决，我会说：扩展数据库:)

另一个想法可能是，“权衡”结果，获得调整后的平均值，例如：

```
100% = 1.00x weight
90%  = 0.95x weight
80%  = 0.90x weight
...
0%   = 0.50x weight 
```

因此，对于您的示例，您将：

```
(100*1 + 90*0.95 + 0*0.5) / (100*1 + 100*0.95 + 100*0.5) = 0.75714285714
 => 75.7%
regular average would be 63.3% 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T21:45:11.677

当然，平均是垃圾。如果单个单词的概率是准确的，那么所有单词都是正确的概率只是*乘积*，而不是平均值。如果您对个人概率的不确定性进行了估计，则可以计算出他们的乘积在所有个人概率上都被边缘化了。

# ruby-on-rails - 如何在保留空数组和 nil 值的 Rails 中将 XML 转换为哈希

> ID：15646811
> 
> 赞同：1
> 
> 时间：2013-03-26T20:31:44.180
> 
> 标签：ruby-on-rails, xml, xml-parsing, xml-nil

当我`Hash.from_xml(@xml)`在 Rails 中将 XML 结构转换为散列时，解析器不区分空数组和 nil 值，而 XML 将立即终止`\`为空数组的节点描述`<audio_languages/>`为与属性`nil="true"`被解释为 nil的节点价值观。

XML 结构（我可以控制如何生成）如下所示：

```
<response>
  <medias>
    <media>
      <id>1</id>
      <name>Media-1</name>
      <audio_languages/>
      <avg_rating nil="true"></avg_rating>
    </media>
    <media>
      <id>2</id>
      <name>Media-2</name>
      <audio_languages/>
      <avg_rating nil="true"></avg_rating>
    </media>
  </medias>
</response> 
```

的预期输出`Hash.from_xml(@xml)`将是：

```
{"response"=>{"medias"=>{"media"=>[{"id"=>"1", "name"=>"Media-1", "audio_languages"=>[], "avg_rating"=>nil}, {"id"=>"2", "name"=>"Media-2", "audio_languages"=>[], "avg_rating"=>nil}]}}} 
```

`audio_languages`相反，我得到和的 nil 值`avg_rating`：

```
{"response"=>{"medias"=>{"media"=>[{"id"=>"1", "name"=>"Media-1", "audio_languages"=>nil, "avg_rating"=>nil}, {"id"=>"2", "name"=>"Media-2", "audio_languages"=>nil, "avg_rating"=>nil}]}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:00:51.743

我最终使用解析节点，`libxml`并且正在检查节点是否具有我正在寻找的签名，以确定我是否要转换为空数组与 nil 值。

```
# Usage: Hash.from_xml_with_libxml(xml)
require 'xml/libxml'
# adapted from 
# http://movesonrails.com/articles/2008/02/25/libxml-for-active-resource-2-0

class Hash 
  class << self
    def from_xml_with_libxml(xml, strict=true) 
      LibXML::XML.default_load_external_dtd = false
      LibXML::XML.default_pedantic_parser   = strict
      result = LibXML::XML::Parser.string(xml).parse 
      return { result.root.name.to_s => xml_node_to_hash_with_libxml(result.root)}
    end 

    def xml_node_to_hash_with_libxml(node) 
      # If we are at the root of the document, start the hash 
      if node.element? 
        if node.children? 
          result_hash = {} 

          node.each_child do |child| 
            result = xml_node_to_hash_with_libxml(child) 

            if child.name == "text"
              if !child.next? and !child.prev?
                return result
              end
            elsif result_hash[child.name]
              if result_hash[child.name].is_a?(Object::Array)
                result_hash[child.name] << result
              else
                result_hash[child.name] = [result_hash[child.name]] << result
              end
            else 
              result_hash[child.name] = result
            end
          end
          return result_hash 
        else 
          # Nodes of sort <audio_languages/>, are arrays, 
          # and nodes like <average_rating "nil"="true"/> are nil values.
          if node.to_s.match(/^\<(.+)\/\>$/) && nil == node.attributes["nil"]
            return []
          end
          return nil 
        end 
      else 
        return node.content.to_s 
      end 
    end          
  end
end 
```

# asp.net - 将通用模型的子类传递给剃刀视图

> ID：15646812
> 
> 赞同：12
> 
> 时间：2013-03-26T20:31:51.090
> 
> 标签：asp.net, asp.net-mvc-3, oop, razor

**大图：**

我发现了 Razor 的一个限制，我很难想出一个好的方法来解决它。

**玩家们：**

假设我有一个这样的模型：

```
public abstract class BaseFooModel<T>
    where T : BaseBarType
{
    public abstract string Title { get; } // ACCESSED BY VIEW
    public abstract Table<T> BuildTable();

    protected Table<T> _Table;
    public Table<T> Table // ACCESSED BY VIEW
    {
        get
        {
            if (_Table == null)
            {
                _Table = BuildTable();
            }
            return _Table;
        }
    }
} 
```

还有一个像这样的子类：

```
public class MyFooModel : BaseFooModel<MyBarType>
{
    // ...
}

public class MyBarType : BaseBarType
{
    // ...
} 
```

我希望能够传递`MyFooModel`到这样定义的剃刀视图：

```
// FooView.cshtml
@model BaseFooModel<BaseBarType> 
```

但是，这是行不通的。我收到一个运行时错误，说`FooView`期望`BaseFooModel<BaseBarType>`但得到`MyFooModel`. 回想一下，`MyFooModel`在继承自`BaseFooModel<MyBarType>`和`MyBarType`继承自`BaseBarType`。

**我试过的：**

我在非剃须刀的土地上尝试过这个，看看是否也是如此，它是。我必须在视图中使用模板参数才能使其工作。这是非剃刀视图：

```
public class FooView<T>
    where T : BaseBarType
{
    BaseFooModel<T> Model;
    public FooView(BaseFooModel<T> model)
    {
        Model = model;
    }
} 
```

使用该结构，以下**操作确实有效**：

```
new FooView<MyBarType>(new MyFooModel()); 
```

**我的问题：**

**我怎么能用 Razor 做到这一点？**我怎样才能传递我正在使用的类型`FooView`？
**我不能**，但是有什么办法解决这个问题吗？我能以某种方式实现相同的架构吗？

让我知道我是否可以提供更多信息。我正在使用 .NET 4 和 MVC 3。

* * *

**编辑：**
现在，我只是为`BaseFooModel<BaseBarType>`. 我对此并不感到兴奋，因为我不想每次添加新模型时都必须创建新视图。

另一种选择是利用这样一个事实，即我*能够*在没有剃刀的情况下在常规 c# 类中使用它。我可以让我的剃刀查看`@inherits`c# 视图，然后调用一些渲染方法。我不喜欢这个选项，因为我不喜欢有两种呈现 html 的方式。

还有其他想法吗？我知道当我用`Foo`and给出类名时很难理解问题的上下文`Bar`，但我不能提供太多信息，因为它有点敏感。对此我深表歉意。

* * *

**到目前为止，我使用本杰明的回答：**

```
public interface IFooModel<out T> 
    where T : BaseBarModel
{
    string Title { get; }
    Table<T> Table { get; } // this causes an error:
                            // Invalid variance: The type parameter 'T' must be 
                            // invariantly valid on IFooModel<T>.Table. 
                            // 'T' is covariant.
}

public abstract class BaseFooModel<T> : IFooModel<T>
    where T : BaseBarModel
{
    // ...
} 
```

**什么最终起作用：**

```
public interface IFooModel<out T> 
    where T : BaseBarModel
{
    string Title { get; }
    BaseModule Table { get; } // Table<T> inherits from BaseModule
                              // And I only need methods from BaseModule
                              // in my view. 
}

public abstract class BaseFooModel<T> : IFooModel<T>
    where T : BaseBarModel
{
    // ...
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-28T20:44:50.183

您需要在类层次结构中引入一个带有[协变](http://msdn.microsoft.com/en-gb/library/dd469487.aspx)泛型类型参数的接口：

```
public interface IFooModel<out T> where T : BaseBarType
{
} 
```

并从上述接口派生您的 BaseFooModel 。

```
public abstract class BaseFooModel<T> : IFooModel<T> where T : BaseBarType
{
} 
```

在您的控制器中：

```
[HttpGet]
public ActionResult Index()
{
    return View(new MyFooModel());
} 
```

最后，将视图的模型参数更新为：

```
@model IFooModel<BaseBarType> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T08:40:25.910

在 ASP.NET MVC 2 和 MVC 3 之间使用基于接口的模型是故意改变的。

[你可以在这里看到](http://connect.microsoft.com/VisualStudio/feedback/details/636341/modelmetadata-fromlambdaexpression-has-changed-in-asp-net-mvc-3-rtm)

MVC 团队：

我们不鼓励使用基于接口的模型（考虑到错误修复所施加的限制，我们也不可以实际支持）。切换到抽象基类可以解决这个问题。

《斯科特·汉塞尔曼》

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:56:02.437

您遇到的问题不是 Razor 错误，而是 C# 错误。尝试用类来做到这一点，你会得到同样的错误。这是因为模型不是`BaseFooModel<BaseBarType>`, 但是`BaseFooModel<MyFooModel>`，并且两者之间不能发生隐式转换。通常，在程序中，您必须进行转换才能做到这一点。

但是，在 .NET 4 中，引入了[逆变和协变](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)，这听起来像是您正在寻找的能力。这只是 .NET 4 的一项功能，老实说，我不知道 .NET 4 中的 Razor 是否使用它。

# python - 通过 Post 表单下载文件

> ID：15646813
> 
> 赞同：6
> 
> 时间：2013-03-26T20:31:52.290
> 
> 标签：python, forms, post, download

有一个网站列出了我要下载的文件。为了简化这个过程，我尝试编写一个脚本来为我做这件事。（即使我可以同时选择多个选项，单击提交也只会下载第一个文件）

网页 url，webpage/list.php，与表单中的操作不同。我不确定在此处发布实际网址的政策是什么。

```
<form action="webpage/data.php" method="post">
  <table align="center">
    <tbody>
      <tr><td>
        <select name="data[]" size="8" multiple="multiple">
          <option value="downloadable_file1.tar">Downloadable file1</option>
          <option value="downloadable_file2.tar">Downloadable file2</option>
          <option value="downloadable_file3.tar">Downloadable file3</option>
        </select>
      </td></tr>
    </tbody>
  </table>
  <input type="submit">
</form> 
```

我的脚本是这样的：

```
import urllib
import urllib2
import shutil

req = urllib2.Request('webpage/list.php')
values = { 'data[]': 'downloadable_file1.tar'}
req.add_data(urllib.urlencode(values))
resp = urllib2.urlopen(req)

myfile = open('downloadable_file1.tar', 'wb')
shutil.copyfileobj(resp.fp, myfile)
myfile.close() 
```

运行脚本时，服务器似乎没有确认请求，只是为我提供带有文件列表的同一个网页。有没有我错过的选项？可能有som重定向问题吗？

这是我在使用 Chrome 时得到的信息：

```
Request URL:webpage/data.php  
Request Method:POST  
Status Code:200 OK  

Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3  
Accept-Encoding:gzip,deflate,sdch  
Accept-Language:sv-SE,sv;q=0.8,en-US;q=0.6,en;q=0.4  
Cache-Control:max-age=0  
Connection:keep-alive  
Content-Length:26  
Content-Type:application/x-www-form-urlencoded  
Host:webpage 
Origin:webpage  
Referer:webpage/list.php  
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22  
data[]:downloadable_file1.tar  

Accept-Ranges:bytes  
Cache-control:private  
Connection:Keep-Alive  
Content-Disposition:attachment; filename="downloadable_file1.tar.gz"  
Content-Length:1043436  
Content-Transfer-Encoding:binary  
Content-Type:application/x-gzip  
Date:Tue, 26 Mar 2013 20:18:58 GMT  
Expires:Mon, 26 Jul 1997 05:00:00 GMT  
Keep-Alive:timeout=5, max=100  
Pragma:private  
Server:Apache/2.2.9 (FreeBSD) mod_ssl/2.2.9 OpenSSL/0.9.7e-p1 DAV/2 PHP/5.2.6 with Suhosin-Patch
X-Powered-By:PHP/5.2.6 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T21:04:07.807

您应该考虑使用“请求”库：[http ://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)

我相信这可以使用 requests 库来完成：

```
data={'data[]':'downloadable_file1.tar'}
req = requests.post('webpage/data.php', data)
with open('file.data', 'wb') as file:
    file.write(req.content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:50:05.117

该行：

```
req = urllib2.Request('webpage/list.php') 
```

正在请求原始网页，但表单将数据发布到`webpage/data.php`. 这会更好吗？

```
req = urllib2.Request('webpage/data.php') 
```

# objective-c - objc 对象指向

> ID：15646819
> 
> 赞同：0
> 
> 时间：2013-03-26T20:32:08.393
> 
> 标签：objective-c, oop

我正在尝试访问方法如下所示的实现文件中的对象： `- (Boolean)humanIsAlive:(id)humanobj;`但是，Xcode 抱怨不存在这样的对象并且构建失败。

在主文件中`main.m`，我会在函数中写下这个`main()`：

```
int main(int argc, const char * argv[]) {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    Human *human = [[Human alloc] init];
    MyHuman *myhuman = [[MyHuman alloc] init];

    [human create:@"John Doe" age:25];
    if ([human humanIsAlive:myhuman]) {
        NSLog(@"%@ is alive and well.", myhuman.humanName);
    } else {
        NSLog(@"%@ is dead and gone.", myhuman.humanName);
    }

    [pool drain];
    return 0;
} 
```

这是 Xcode 抱怨的代码：

```
- (Boolean)humanIsAlive:(id)humanobj {
    if (humanobj.living == YES) {
        return YES;
    }
    return NO;
} 
```

这似乎是合法的，但 Xcode 抱怨这个对象中不存在这样的属性并且不存在这样的对象。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:35:55.027

具有类型的对象的属性`id`不能安全地解析为任何一个对象的实例方法，因此它们被语言禁止。此外，如果您可以为其`id`自身添加属性，那么我们将使用一种搞砸的语言。

您需要做的只是更具体：

```
- (BOOL) humanIsAlive:(MyHuman*)humanobj { //... } 
```

如果您绝对需要处理两种不同类型的对象，请对它和使用更安全一点`-isKindOfClass:`，然后在适当的地方转换对象以使用它的属性。

# javascript - 将 Input Value 属性设置为带空格的变量。

> ID：15646820
> 
> 赞同：1
> 
> 时间：2013-03-26T20:32:08.497
> 
> 标签：javascript, jquery, html

我正在尝试将输入按钮的值设置为字符串变量。即“校车指南”；但是当 HTML 加载时，只有第一个单词出现在按钮中。我的代码如下。谢谢您的帮助。

```
var title="A Guide to the School Bus";
var htmlString= "<div class="+title+ ">"+"<input type="+"button  "+"value="+title+"  onclick=loadBook()>"+"</div>";
$(htmlString).appendTo(attachPoint); 
```

附加点是我使用以下内容获得的 HTML 中的引用。

```
var attachpoint=document.querySelector('.buttonAttachPoint'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:34:05.210

问题是因为您没有在属性值周围加上引号。尝试这个：

```
var htmlString= '<div class="'+title+'"><input type="button" value="'+title+'"  onclick="loadBook()"></div>'; 
```

您可以转义`"`字符串中的所有内容，或者像我所做的那样，在`'`and之间切换`"`。`"`将显示为普通字符，`'`用于标记字符串的开始和结束。

顺便说一句，您可能不想将变量放在`title`the`class`上，`div`因为它将每个单独的单词添加为一个类，因此在您的示例中，div 将添加 6 个类。

# javascript - Fancybox - 实现 afterClose 回调

> ID：15646822
> 
> 赞同：4
> 
> 时间：2013-03-26T20:32:14.810
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我的 javascript 语法是菜鸟级别的，但我正在学习 :>

我正在使用 Fancybox 2.1.4 来显示一个 inline `<div id="content">`。传统上，`<div>`将设置为`style="display:none"`Fancybox 将在激活时将其更改为阻止，并`none`在关闭时返回。

就我而言，我实际上`<div>`在不同位置的页面上显示了该内容的内容（这对项目来说是正确的，我知道那里可以有各种意见）。

所以我需要`<div id="content">`在关闭fancybox（它本机消失）后避免消失。

经过一番研究，我发现使用回调，我可以简单地更改或添加to`afterClose`的内联样式（这解决了问题。`id"content"``display:block`

问题...是我的菜鸟：>我尝试了很长时间，只是不确定将代码放在哪里以及正确的语法。

我如何将它添加`afterClose`到我的fancybox函数中？

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox(
        );
    }); 
</script> 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T20:43:14.993

这是格式：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox({
           afterClose : function(){
             // here any javascript or jQuery to execute after close
           }
        }); // close fancybox
    }); // close ready
</script> 
```

# javascript - 有没有办法一次禁用一堆表单元素？

> ID：15646823
> 
> 赞同：16
> 
> 时间：2013-03-26T20:32:20.793
> 
> 标签：javascript, jquery, html, forms, knockout.js

我想根据某些条件禁用一部分 HTML 表单元素。这似乎是做到这一点的理想方式：

```
<fieldset disabled>
    <input value="one" />
    <input value="two" />
</fieldset> 
```

现在，这两个输入被禁用。但是，这在 IE8 上似乎完全无聊。输入*显示*为已禁用，但我仍然可以输入它们。

[小提琴](http://jsfiddle.net/CvafW/)（不像 JsFiddle 真的在 IE8 中*工作）*

是否有针对此问题的跨浏览器解决方案，而无需为每个表单元素添加*禁用*（这会使我的脚本复杂化）。我可能会做一些棘手的事情，比如`<fieldset>`在 jQuery 中选择，然后`.each()`通过所有表单元素并禁用它们 - 但是，我实际上是`disabled`使用 Knockout 绑定设置属性，所以真的没有地方*添加*这样的代码。我最后的手段是使用自定义的 Knockout 绑定，它也会禁用所有的孩子，但是 le sigh。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T20:55:58.003

好的，我提出了一个特定于 Knockout.js 的实现，希望能帮助同一条船上的其他人。只需稍加努力，该解决方案就可能适用于其他解决方案和平台。

首先，我创建了一个 Knockout 绑定：

```
ko.bindingHandlers.allowEdit = {
   init: function(element, valueAccessor)
   {
      if(!valueAccessor())
      {
         element.disabled = true;
         element.readOnly = true;

         if(element.tagName === 'FIELDSET')
         {
            $(':input', element).attr('disabled', 'disabled');
         }
      }
   }
}; 
```

`update`请注意，如果您想允许更改此绑定，您也必须实现该方法。我没有这个要求。

然后，您可以像这样使用绑定：

```
<fieldset data-bind="allowEdit: someExpression">
   <input value="One" />
   <input value="Two" />
</fieldset> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T20:49:08.350

简而言之：**没有**。这背后的原因是因为缺乏对IE8的支持以及元素`disabled`上的属性。`fieldset`

[资源](http://www.standardista.com/html5/html5-web-forms/#fieldset_element)

> 在 IE7 和 IE8 中，该属性只禁用 <legend> 中的表单元素。

恐怕您应该寻找自定义解决方案，例如其他用户的答案/您自己的自定义绑定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T20:38:04.520

使用 jQuery 的解决方案：

```
var disabledFiedset=$('fieldset[disabled]');
$('input',disabledFiedset).attr('disabled','disabled'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T20:39:32.720

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T07:04:20.653

为您的字段集标签提供 id（或者您也可以直接在 jquery 代码中使用标签名称）并使用以下代码使用 jquery 禁用该字段集中的所有字段。

$("#fieldset id" 或 "fieldset").children().attr("disabled", "disabled");

# outlook - NetOffice 在 Outlook 新邮件窗口中添加自定义表单字段

> ID：15646825
> 
> 赞同：0
> 
> 时间：2013-03-26T20:32:28.560
> 
> 标签：outlook

**问题**：我找不到在 Outlook 新邮件窗口中添加自定义表单字段的解决方案。我正在使用 NetOffice，到目前为止，我已经实现了使用 Outlook 中的用户帐户。

**关于如何在发送邮件按钮下方添加带有自定义文本的自定义下拉按钮的**必要指导。****

 **提前致谢。

干杯! 法尔汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T18:28:43.613

我相信在 net office 中，您需要向与要开始更改的表单相关的 MAPI 文件夹声明一个变量，然后浏览该文件夹的 View 集合。可以在这里找到在 VBA 中完成的良好开端：

[http://www.vbforums.com/showthread.php?492714-RESOLVED-Outlook-Programmatically-add-user-defined-field](http://www.vbforums.com/showthread.php?492714-RESOLVED-Outlook-Programmatically-add-user-defined-field)

此链接详细介绍了自定义字段的制作，然后将其添加到相应的文件夹视图默认表单中。您可以轻松地将上述链接中的 VBA 代码改编为 NetOffice，因为它使用相同的方法逐步执行，例如

```
 dim _outlookapplication as Outlook.Application
    dim olNamespace as Outlook._Namespace = _outlookapplication.GetNameSpace("MAPI")
    dim olFolder as Outlook.Folder = olNamespace.GetDefaultFolder(olDefaultFolders.olFolderContacts)
    dim olView as Outlook.View 
```

祝你好运！**

# jquery - Fancybox 链接不适用于提交按钮

> ID：15646826
> 
> 赞同：0
> 
> 时间：2013-03-26T20:32:30.220
> 
> 标签：jquery, html, fancybox, fancybox-2

好的，所以我有一个fancybox，现在正在工作，但它不能完全正常工作。它仅适用于实际的文本链接，而不是当我将它作为提交按钮时。好吧，我不应该说它不起作用，而是它起作用了，fancybox 会在一秒钟内自动关闭，或者如果我幸运的话，它会持续大约一秒钟，但它永远不会保持打开状态（它确实从文字链接）。

FB代码：

```
<script>
$(document).ready(function() {
 $("#top-login-button").click(function() {
  $.fancybox({
   padding    : 15,
   href       : "#login_form_ajax",
   afterClose : function(){ // it was onClosed for v1.3.4
    $("#login_error").hide();
   }
  }); // fancybox
 }); //click

 $("#login_form_ajax").bind("submit", function() {
  if ($("#login_name").val().length < 1 || $("#login_pass").val().length < 1) {
   $("#login_error").show();
   $.fancybox.update(); // it was $.fancybox.resize(); for v1.3.4
   return false;
  }
  $.fancybox.showLoading(); // it was $.fancybox.showActivity(); for v1.3.4
  $.ajax({
   padding : 15,
   type    : "POST",
   cache   : false,
   url     : "anyPage.php?page=ajax",
   data    : $(this).serializeArray(),
   success: function(data) {
    $.fancybox(data);
   }
  });
  return false;
 }); // bind
}); // ready
</script> 
```

Fancybox 打开链接：

```
<a id="top-login-button" href="#login_form_ajax" rel="gallery">Open login form</a> 
```

以上工作。下面的一个，工作和自动关闭。

```
<a id="top-login-button" href="#login_form_ajax" style="text-decoration:none" title="X">  
<input class="czas" type="submit" name="ajax" value="X"></a> 
```

有任何想法吗？我不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:45:10.413

用我的原始代码修改了 JFK 所说的最终结果，效果很好：

```
<input class="czas" id="top-login-button" data-fancybox-href="#login_form_ajax" type="button" name="ajax" value="Enter Starting Time"> 
```

不知道如何正确感谢 JFK，因为他没有发布问题的答案......

# sql-server - T-SQL GROUP BY ISSUE WITH CASE 语句

> ID：15646829
> 
> 赞同：0
> 
> 时间：2013-03-26T20:32:37.560
> 
> 标签：sql-server, tsql

我有一个带有`CASE`语句的查询，我需要对`GROUP BY`别名做一个。我知道这做不到，所以我尝试使用子查询，但它不起作用。

这是我正在处理的查询：

```
SELECT
    a.Vendor,
    a.Month_Sold
    --SUM(sd.SBQSHP) AS Sales_Qty,
    --SUM(sd.SBEPRC) AS Sales_Dlr
FROM
(SELECT
    sd.IFPRVN AS Vendor,
    vn.ACNAME AS Vendor_Name,
    CASE
        WHEN sd.SBINDT BETWEEN '2012-07-30' AND '2012-08-26' THEN 'August 2012'
        WHEN sd.SBINDT BETWEEN '2012-08-27' AND '2012-09-30' THEN 'September 2012'
        WHEN sd.SBINDT BETWEEN '2012-10-01' AND '2012-10-28' THEN 'October 2012'
        WHEN sd.SBINDT BETWEEN '2012-10-29' AND '2012-11-25' THEN 'November 2012'
        WHEN sd.SBINDT BETWEEN '2012-11-26' AND '2012-12-31' THEN 'December 2012'
        WHEN sd.SBINDT BETWEEN '2013-01-01' AND '2013-01-27' THEN 'January 2013'
        WHEN sd.SBINDT BETWEEN '2013-01-28' AND '2013-02-24' THEN 'Febuary 2013'
        WHEN sd.SBINDT BETWEEN '2013-02-25' AND '2013-03-31' THEN 'March 2013'
    END AS Month_Sold
FROM
    dbo.SalesData sd
    INNER JOIN dbo.S2K_VEND vn ON vn.ACVEND = sd.IFPRVN
WHERE
    sd.SBINDT > '2012-07-29'
AND
    sd.SBCLS IN ('1500')
AND
    sd.SBDIV NOT IN ('4000')
)a
GROUP BY
    a.Vendor,
    a.Month_Sold
ORDER BY
    a.Vendor,
    a.Month_Sold 
```

被注释掉的两列需要以某种方式包含在内。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:03:50.290

确实，在您的日期输出上贴上漂亮的标签应该是表示层的工作。`FORMAT()`在 C# 等中非常强大。除此之外，在最后一个可能的点之前不要转换为漂亮的字符串标签，这将需要一层：

```
SELECT 
  Vendor, 
  DATENAME(MONTH, Month_Sold) + ' ' + RTRIM(YEAR(Month_Sold)),
  Sales_Qty,
  Sales_Dlr
FROM
(
  SELECT
    Vendor,
    Month_Sold,
    SUM(SBQSHP) AS Sales_Qty,
    SUM(SBEPRC) AS Sales_Dlr
  FROM
  (
    SELECT
      sd.IFPRVN AS Vendor,
      vn.ACNAME AS Vendor_Name, -- why is this here?
      CASE
        WHEN sd.SBINDT BETWEEN '2012-07-30' AND '2012-08-26' THEN '2012-08-01'
        WHEN sd.SBINDT BETWEEN '2012-08-27' AND '2012-09-30' THEN '2012-09-01'
        ...
        WHEN sd.SBINDT BETWEEN '2013-01-28' AND '2013-02-24' THEN '2013-02-01'
        WHEN sd.SBINDT BETWEEN '2013-02-25' AND '2013-03-31' THEN '2013-03-01'
      END AS Month_Sold
    FROM dbo.SalesData sd
      INNER JOIN dbo.S2K_VEND vn 
      ON vn.ACVEND = sd.IFPRVN
    WHERE sd.SBINDT > '2012-07-29'
    AND sd.SBCLS IN ('1500')
    AND sd.SBDIV NOT IN ('4000')
  ) AS a
  GROUP BY Vendor, Month_Sold
) AS b
ORDER BY
    Vendor,
    Month_Sold; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:34:01.570

只需使用别名“a”选择您需要在子查询中聚合的值

添加到子查询“a”选择语句：

```
SELECT    
    sd.IFPRVN AS Vendor,
    vn.ACNAME AS Vendor_Name,
    sd.SBQSHP,
    sd.SBEPRC
    CASE
        ... 
```

在顶级 select 语句中取消注释 SUM 语句，但将别名从“sd”更改为“a”

```
SUM(a.SBQSHP) AS Sales_Qty,
SUM(a.SBEPRC) AS Sales_Dlr 
```

# c# - 使用 Kinect 和 EMGU（OpenCV 包装器）对机器人进行定位

> ID：15646834
> 
> 赞同：1
> 
> 时间：2013-03-26T20:32:52.903
> 
> 标签：c#, opencv, localization, kinect

我正在开发小型 WPF 桌面应用程序来跟踪机器人。我的办公桌上有一个适用于 Windows 的 Kinect，我能够执行基本功能并运行深度相机流和 RGB 相机流。

我需要的是跟踪地板上的机器人，但我不知道从哪里开始。我发现我应该使用 EMGU（OpenCV 包装器）

我想要做的是跟踪机器人并使用深度相机找到它的位置。基本上，它用于使用立体三角测量对机器人进行定位。然后使用 TCP 和 Wifi 向机器人发送一些命令，使用 RGB 和深度相机将他从一个地方移动到另一个地方。RGB 摄像头还将用于映射该区域内的物体，以便机器人能够采取最佳路径并避开物体。

问题是我以前从未使用过计算机视觉，这实际上是我的第一次，我没有被最后期限所束缚，我非常愿意学习所有相关的东西来完成这个项目。

我正在寻找细节、解释、提示、链接或教程来满足我的需要。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:47:41.433

机器人本地化是一个非常棘手的问题，我自己已经苦苦挣扎了几个月，我可以告诉你我取得了什么成就但是你有很多选择：

*   **基于光流的里程计**：（也称为视觉里程计）：
    1.  从一张图像或特征中提取关键点（我使用了 Shi-Tomashi 或 cvGoodFeaturesToTrack）
    2.  对连续图像执行相同操作
    3.  匹配这些特征（我使用了 Lucas-Kanade）
    4.  从 Kinect 中提取深度信息
    5.  计算两个 3D 点云之间的变换。

上面的算法正在做的是试图估计两帧之间的相机运动，这将告诉你机器人的位置。

*   **Monte Carlo Localization**：这相当简单，但您也应该使用车轮里程计。查看[本文](http://old.ee.duke.edu/files/ece/GWDD2012_Marron.pdf)了解基于 ac# 的方法。

上述方法使用概率模型来确定机器人的位置。

可悲的是，尽管 C++ 中存在库可以很容易地完成您需要的工作，但将它们包装为 C# 是一项艰巨的任务。但是，如果您可以编写包装器，那么您的工作就完成了 90%，要使用的关键库是[PCL](http://pointclouds.org)和[MRPT](http://mrpt.org)。

最后一个选项（目前为止最简单，但最不准确）是使用 Kinect SDK 1.7 中内置的 KinectFusion。但是我在机器人本地化方面的经验非常糟糕。

您必须阅读[Slam for Dummies](http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-412j-cognitive-robotics-spring-2005/projects/1aslam_blas_repo.pdf)，它将使有关 Monte Carlo Localization 的事情变得非常清楚。

残酷的现实是，这非常棘手，您很可能最终会自己动手。我希望你能深入研究这个庞大的话题，并且会学到很棒的东西。

有关更多信息或我写的包装器。只需在下面发表评论... :-)

最好的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T04:04:41.133

不确定是否对您有帮助......但我整理了一个可能有帮助的 Python 模块。

[http://letsmakerobots.com/node/38883#comments](http://letsmakerobots.com/node/38883#comments)

# php - 从 php 脚本显示虚拟主机？

> ID：15646835
> 
> 赞同：2
> 
> 时间：2013-03-26T20:33:04.317
> 
> 标签：php, apache2, vhosts

我希望能够构建一个脚本来显示在我的 Apache (Ubuntu) 开发机器下运行的所有虚拟主机。

迄今为止，我还没有找到任何示例或任何接近我想要的东西，这就是：

“显示在这台机器上运行的所有虚拟主机”。（服务器名称、别名等）。

我在想我可能能够读取 /etc/apache2/sites-available 文件夹，其中包含虚拟主机的所有 conf 文件，但在走这条路之前，我想我先在这里问一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:57:15.600

您可以使用`apachectl`（或`apache2ctl`）命令向`httpd`Apache 服务器发送信号以转储虚拟主机信息：

```
 apache2ctl -St 
```

以下是使用[apachectl](http://httpd.apache.org/docs/current/programs/apachectl.html)发送信号和[httpd 标志](http://httpd.apache.org/docs/current/programs/httpd.html)的链接。

这是我的 Apache / Ubuntu 系统上的样子（我是一个拥有一堆虚拟主机的 Web 开发人员）：

```
VirtualHost configuration:
wildcard NameVirtualHosts and _default_ servers:
*:80                   is a NameVirtualHost
         default server 127.0.1.1 (/etc/apache2/sites-enabled/000-default:1)
         port 80 namevhost 127.0.1.1 (/etc/apache2/sites-enabled/000-default:1)
         port 80 namevhost adaleco (/etc/apache2/sites-enabled/adaleco:1)
         port 80 namevhost amcham (/etc/apache2/sites-enabled/amcham:1)
         port 80 namevhost cake (/etc/apache2/sites-enabled/cake:1)
         port 80 namevhost cakeplate (/etc/apache2/sites-enabled/cakeplate:1)
         port 80 namevhost coord (/etc/apache2/sites-enabled/coord:1)
         port 80 namevhost dru1 (/etc/apache2/sites-enabled/dru1:1)
         port 80 namevhost flaming (/etc/apache2/sites-enabled/flaming:1)
         port 80 namevhost flaming6 (/etc/apache2/sites-enabled/flaming6:1)
         port 80 namevhost food (/etc/apache2/sites-enabled/food:1)
         port 80 namevhost fun (/etc/apache2/sites-enabled/fun:1)
         port 80 namevhost marc (/etc/apache2/sites-enabled/marc:1)
         port 80 namevhost sugar (/etc/apache2/sites-enabled/sugar:1)
         port 80 namevhost vol (/etc/apache2/sites-enabled/vol:1)
         port 80 namevhost xmas (/etc/apache2/sites-enabled/xmas:1)
Syntax OK 
```

# asp.net - gif 图像文件在 IE 上显示红色“x”

> ID：15646840
> 
> 赞同：0
> 
> 时间：2013-03-26T20:33:20.410
> 
> 标签：asp.net, transparency, bing-maps, gif, system.drawing

首先，我搜索了 google & SO（[图像在 IE 上显示为红色 x，在其他浏览器中显示正常](https://stackoverflow.com/q/7193350/72324)），尝试了这些建议，但它们并没有解决我的问题。

我正在尝试按照以下所示的代码创建透明图像：[如何使用 System.Drawing 绘制透明图像？](https://stackoverflow.com/q/189392/72324). 我正在使用第 3 方映射控件“ [Simplovation](https://simplovation.com/default.aspx) ”

但是，这是我在运行网页时得到的：
![在此处输入图像描述](../Images/10119091d9c0991d5023fa92d61c5288.png)

如何让实际图像出现？我尝试转换为 RGB，但没有运气。

根据“[如何使用 System.Drawing 绘制透明图像](https://stackoverflow.com/q/189392/72324)”中的代码，实际图像应如下所示：
![在此处输入图像描述](../Images/61f8436d17a569e46a12b87f0f88aebc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:08:55.133

这里可能有很长的潜在问题列表，让我们解决其中的 3 个问题：

*   权限
    您暗示您正在从代码创建此图像。你是怎么做到的？如果在应用程序池帐户的用户上下文中运行的 IIs 工作进程正在创建此映像，它是否会创建/保存到可匿名访问的位置？（或无论您的身份验证模型是什么）
*   文件被锁定？
    同样，既然您暗示您正在从代码创建图像，那么您是否正确关闭了文件句柄？
*   小路。
    你说图片Url是正确的，但你真的100%确定吗？在 IE 上按 F12 并使用开发人员工具确定在 IE 尝试请求图像时是否收到任何类型的 HTTP 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:03:37.680

IE 对图像类型和实际图像内容非常具体。换句话说，如果图像类型和内容不匹配，IE 将无法显示。

例如，仅重命名文件扩展名 - bmp 到 gif - 在 IE 中不起作用，尽管在其他浏览器中这不是问题。

最简单的检查方法是在其他浏览器中浏览该页面。如果您在其他浏览器中可以看到图像，则可以确定图像格式不正确。

# string - 如何使用 DisplayFormat 在数字之间添加空格

> ID：15646851
> 
> 赞同：2
> 
> 时间：2013-03-26T20:34:01.750
> 
> 标签：string, delphi, mask, reportbuilder

如何使用**DisplayFormat**在数字之间添加空格。

像这个例子：

```
50130301037855000150550010000000131000000132 
```

我需要这个：

```
5013 0301 0378 5500 0150 5500 1000 0000 1310 0000 0132 
```

有人有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:42:54.793

您不能仅使用 DisplayFormat 属性进行这样的格式化，但您可以依靠 OnGetText 事件来实现这一点。

我假设您的字段是字符串类型，例如：

```
function InsertBlankEach4Chars(S: string): string;
begin
  Result := '';
  while S <> '' do
  begin
    Result := Result + Copy(S, 1, 4) + ' ';
    Delete(S, 1, 4);
  end;
  Result := Trim(Result);
end;

procedure TMyForm.MyQueryFieldGetText(Sender: TField;
  var Text: string; DisplayText: Boolean);
begin
  if DisplayText then
    Text := InsertBlankEach4Chars(Sender.AsString)
  else
    Text := Sender.AsString;
end; 
```

[**免责声明**：此代码是在浏览器中编写的，未经测试。如果你打算在时间敏感的过程中使用它，我警告你这个函数可能会被优化以获得更好的性能。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T21:17:14.213

**我使用DisplayFormat**找到了答案

 **```
9999 9999 9999 9999 9999 9999 9999 9999 9999 9999 9999;0; 
```

谢谢大家。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-09T10:27:35.237

如果您不想将其用作货币，请使用它。

```
procedure TForm1.Edit1Change(Sender: TObject);
var  a :Currency;
begin
ThousandSeparator :=' ';
if edit1.Text <>'' then  a:=strtofloat(edit1.Text) else a:=0;
edit2.Text :=FloatToStrF(a,ffNumber, 12, 2);
end; 
```**

# entity-framework - 在 EF 5 Code First 中将数据库记录展开为 Master/Detail

> ID：15646852
> 
> 赞同：0
> 
> 时间：2013-03-26T20:34:02.900
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, code-first

我有一个具有以下结构的旧数据库表

```
CREATE TABLE [dbo].[MASTER_PROJECT](
    [DATA_ID] [bigint] IDENTITY(1,1) NOT NULL,
    ......
    [GENRE_DATA_ID] [bigint] NULL,  
    [ADDITIONAL_GENRE_DATA_ID] [bigint] NULL,
    [ADDITIONAL_GENRE_2_DATA_ID] [bigint] NULL ) 
```

我想使用 EF 5 映射以下类（代码优先）

```
public class Project {
   public long Id {get;set;}
   public ICollection<Genre> Genres {get;set;}
}

public class Genre {
   public long Id {get;set;}
   // other stuff
} 
```

起初我尝试让 Genres 成为一个数组并像这样映射

```
 HasOptional(t => t.Genres[0]).WithOptionalDependent().Map(m => m.MapKey("GENRE_DATA_ID"));
    HasOptional(t => t.Genres[1]).WithOptionalDependent().Map(m => m.MapKey("ADDITIONAL_GENRE_DATA_ID"));
    HasOptional(t => t.Genres[2]).WithOptionalDependent().Map(m => m.MapKey("ADDITIONAL_GENRE_2_DATA_ID")); 
```

但这会产生一个错误，即 t.Genres[0] 不是有效属性。（这是有道理的）

关于我将如何做这件事的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:49:28.997

在 Moho 的帮助下，我终于得到了我想要的东西。

此外，您需要确保包含此域实体的项目授予映射项目可见的内部结构。（在 AssemblyInfo.cs 中）

```
[assembly: InternalsVisibleTo("YOUR.MAPPING.PROJECT")] 
```

实体定义

```
public class Project 
{
        private ObservableCollection<Genre> _genres;
        protected internal virtual Genre Genre1 { get; set; }
        protected internal virtual Genre Genre2 { get; set; }
        protected internal virtual Genre Genre3 { get; set; }

        public IList<Genre> Genres
        {
            get
            {
                if (_genres == null)
                {
                    _genres = new ObservableCollection<Genre>(new[] {Genre1, Genre2, Genre3});
                    _genres.CollectionChanged += GenresCollectionChangedHandler;
                }
                return _genres;
            }
        }
        private void SetGenreByIndex(int index, Genre g)
        {
            switch (index)
            {
                case 0: Genre1 = g; break;
                case 1: Genre2 = g; break;
                case 2: Genre3 = g; break;
            }
        }

        private void GenresCollectionChangedHandler(object sender, NotifyCollectionChangedEventArgs e)
        {                
            _genres.CollectionChanged -= GenresCollectionChangedHandler;

            int max = 3;
            switch (e.Action)
            {
                case NotifyCollectionChangedAction.Add:
                    if (_genres.Count > max)
                    {
                        _genres.RemoveAt(max);
                        _genres.CollectionChanged += GenresCollectionChangedHandler;
                        throw new IndexOutOfRangeException("Not allowed to store more than 3 genres.");
                    }
                    SetGenreByIndex(_genres.Count - 1, e.NewItems[0] as Genre);
                    break;

                case NotifyCollectionChangedAction.Replace:
                    for (var i = 0; i < e.NewItems.Count; i++)
                        SetGenreByIndex(i + e.NewStartingIndex, e.NewItems[i] as Genre);
                    break;

                case NotifyCollectionChangedAction.Reset:
                    Genre1 = null;
                    Genre2 = null;
                    Genre3 = null;
                    _genres.Clear();
                    break;
            }
            _genres.CollectionChanged += GenresCollectionChangedHandler;
        }
} 
```

这是代码优先映射类

```
public class ProjectConfiguration
{
    public ProjectConfiguration()
    {
        // ...
        // GENRES collection
        Ignore(t => t.Genres);
        HasOptional(t => t.Genre1).WithMany().Map(m => m.MapKey("GENRE_DATA_ID"));
        HasOptional(t => t.Genre2).WithMany().Map(m => m.MapKey("GENRE_DATA_ID_1"));
        HasOptional(t => t.Genre3).WithMany().Map(m => m.MapKey("GENRE_DATA_ID_2"));
    }
} 
```

这是一种确保其有效的测试方法

```
[TestClass]
public class ProjectUnitTests
{
    [TestMethod]
    public void SwapGenresInListAndSaveTest()
    {
        //Arrange
        Genre original1 = null;
        Genre original2 = null;

        using (var context = new MyContext())
        {
            context.Configuration.LazyLoadingEnabled = true;

            //ACT
            var project = context.Projects.Find(2341);
            original1 = project.Genres[0];
            original2 = project.Genres[1];

            genres[0] = original2;
            genres[1] = original1;

            //Save to DB
            context.SaveChanges();
        }

        //ASSERT
        using (var context = new MyContext())
        {
            var project1 = context.Projects.Find(2341);

            //ASSERT
            Assert.IsNotNull(project1);
            Assert.IsNotNull(project1.Genres);
            Assert.AreEqual(3, project1.Genres.Count);
            Assert.AreEqual(original2.DataId, project1.Genres[0].DataId);
            Assert.AreEqual(original1.DataId, project1.Genres[1].DataId);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:02:31.950

您想要做的与 EF 无关 - 您需要使用返回项目集合的新方法或属性来实现此实体的部分类。当然，您需要使用各种流派数据 ID 属性中的值填充此集合。例如：

```
public ICollection<Genre?> GenreDataIDs
{
    get 
    {
        var col = new List<Genre?>() { GENRE_DATA_ID_NavProperty, ADDITIONAL_GENRE_DATA_ID_NavProperty, ..., ADDITION_GENRE_N_DATA_ID_NavProperty };

        return col;
    }
} 
```

您的导航属性可能命名为 Genre1、Genre2；出于说明目的，我只是将 _NavProperty 添加到列名。

如果您想使用集合来更新底层数据库记录，它会变得更加复杂（最简单的实现是实现 SetGenreDataID(int index, int?value) 方法）

# vb.net - 省略vb.net中的冲突？

> ID：15646855
> 
> 赞同：1
> 
> 时间：2013-03-26T20:34:09.077
> 
> 标签：vb.net, ellipse, collision

我在我的游戏中遇到了一些问题，事实上我必须检测到椭圆-椭圆碰撞我更喜欢 vb.net 语言的代码，因为我无法理解其他任何对想法或代码有帮助的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:51:02.567

`Region`您可以简单地检查与对象和`Region.Intersect`方法的冲突：

```
Dim gp1 As New Drawing2D.GraphicsPath()
gp1.AddEllipse(rect1)

Dim gp2 As New Drawing2D.GraphicsPath()
gp2.AddEllipse(rect2)

Dim reg1 As New Region(gp1)
Dim reg2 As New Region(gp2)

reg1.Intersect(reg2)

If reg1.GetRegionScans(New Drawing2D.Matrix(1, 1, 0, 1, 1, 0)).Length > 0 Then
    MessageBox.Show("Collision!")
End If 
```

在这个例子中`rect1`，and `rect2`are `Rectangle`s 定义（包含）椭圆，就像用矩形绘制椭圆一样：

```
Dim rect1 As New Rectangle(5, 5, 150, 100)
Me.CreateGraphics.DrawEllipse(Pens.Blue, rect1) 
```

**编辑：**

对于性能和选项，您最好使用游戏引擎。检查此链接：

*   [游戏引擎表，](http://en.wikipedia.org/wiki/List_of_game_engines)包含每个引擎的信息和链接
*   [Vb.NET](http://www.dreamincode.net/forums/topic/183852-game-engines-for-vbnet/)的游戏引擎列表

# iphone - 如何在 iphone sdk 中添加视频作为 HUD 元素

> ID：15646856
> 
> 赞同：0
> 
> 时间：2013-03-26T20:34:10.403
> 
> 标签：iphone, ios, objective-c

我想添加一个在我调用它时显示的视频，但不是一个典型的（拉伸到边界）视图，类似于在中间加载并使背景变暗的 ProgressHud 视图。如何从 LBYoutubeController 或本机加载视频？谢谢！

编辑：理想情况下，视频框将占据屏幕的 60-70%，但会再次居中并遮盖背景

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:11:07.230

您需要使用`MPMoviePlayerController`. 您可以设置`controlStyle`为`MPMovieControlStyleEmbedded`，这将为您提供一个没有控件的播放器。设置`scalingMode`为`MPMovieScalingModeFill`以使视频符合您为其设置的帧，无论视频的自然布局如何。只需将电影播放器​​添加`view`到您的视图层次结构中，您就可以开始了。

```
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] init];
moviePlayer.scalingMode = MPMovieScalingModeFill;
moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
[myView addSubview:moviePlayer.view]; 
```

要在其后面添加调光视图：

```
UIView *back = [[UIView alloc]initWithFrame:myView.bounds];
back.backgroundColor = UIColor.blackColor;
back.alpha = 0.7;
[myView insertSubview:back belowSubview:myView]; 
```

# regex - 非单词字符 vim

> ID：15646864
> 
> 赞同：-2
> 
> 时间：2013-03-26T20:34:50.553
> 
> 标签：regex, vim

我正在尝试使用 vim 的正则表达式引擎来语法高亮 @ 而没有任何与之相邻的单词字符，例如：

```
 The @ matches
 The@does not match. 
```

我要么匹配所有@s，要么只匹配@s 与周围的空格（意味着行首的那些不匹配。

看起来 vim 实际上并没有以非常严格的方式遵守正则表达式标准，这在编写语法文件时令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:09:34.863

我觉得 vim 中的正则表达式非常强大，尽管有时语法有点奇怪。

给出以下作为示例输入：

```
@ foo
foo @ bar
foo @
foo@bar 
```

这一行：（由`/`（搜索）引导）

```
/\v(^| )\zs\@\ze($| ) 
```

匹配`@`1-3 行，但不匹配第 4 行。

你可以考虑使用`\s`而不是`space`太。

# javascript - 努力使对象始终跟随 box2dweb 中的鼠标

> ID：15646867
> 
> 赞同：0
> 
> 时间：2013-03-26T20:34:55.270
> 
> 标签：javascript, box2dweb

我正在尝试学习如何使用 box2dweb 并希望有一个对象（在本例中为一个圆圈）始终跟随鼠标，而不仅仅是在拖动时。这个想法可以用于空气曲棍球类型的游戏，其中圆圈是你的桨。

然而，圆并没有正确地附着在鼠标上，而是围绕鼠标光标所在的点摆动，并且如果其中一个对象是鼠标光标，它的行为更像是距离关节。

我不知道我做错了什么，但我还是新手，所以任何帮助都将不胜感激。

你可以在这里看到我到目前为止的代码（基于演示代码）：http: [//jsbin.com/ejafoj/1/edit](http://jsbin.com/ejafoj/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:46:41.237

设法弄清楚这一点，我的问题是对 mousejoint 定义目标和 mousejoint 目标之间的区别的误解。我需要将定义目标设置为球的中心，而不是鼠标光标。一旦我这样做了，它就完美地工作了。

# php - 仅警告从文件输入中选择的文件名

> ID：15646869
> 
> 赞同：0
> 
> 时间：2013-03-26T20:35:01.583
> 
> 标签：php, javascript, jquery, ajax, json

我有这个 ajax 调用，它检查数据库中是否已经存在多个文件输入的选定文件名。如果他们这样做，它会提醒一条消息告诉他们。问题是我只能让它从结果循环中警告所有文件名。我怎样才能编辑它，以便它只提醒选择的文件名？谢谢。

```
var file = $('#file')[0];
$.get('existing-filenames.php', function(data){

   for (var i=0; i<file.files.length; i++) {
   var fname = file.files[i].name;

   if(~data.indexOf(fname)){ 
    // only alert selected file names
    alert("these files already exist:" + data); 
     return false;
    }
  }
},'json'); 
```

并在现有文件名.php

```
$allfiles = $db->query("SELECT filename FROM files WHERE email = '$_SESSION[email]'");

$result = [];
while( $files = $allfiles ->fetch_assoc() ){
       $result[] = $files['filename'];
   }
       echo json_encode($result); 
```

和 html

```
<input name = "file[]" type = "file" id = "file" multiple /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:49:58.353

如有疑问，请添加更多 jQuery：

```
$('#file').on('change', function () {
    var self = this;
    $.get('existing-filenames.php', function (data) {
        $.each(self.files, function () {
            if (data.indexOf(this.name) != -1) {
                alert("these files already exist:" + this.name);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:44:50.720

你不应该提醒 fname 而不是 data 吗？

这是你如何做到的：

```
myfiles = '';

for(var i = 0; i < file.files.length; i++)
{
     if(~data.indexOf(fname)){
          myfiles += fname;
     }
}

if(myfiles !== ''){
     alert("these files already exist:" + myfiles);
} 
```

那有意义吗？我们保留了我们添加的文件的运行字符串，并在最后提醒它们。你可以在它们之间添加逗号，或者空格，或者任何你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:45:08.307

警告`fname`而不是`data`删除`return false;`

```
 if(~data.indexOf(fname)){ 
     // only alert selected file names
     alert("these files already exist:" + fname); 
    } 
```

# android - 如何将 Parcelable Extra 传递给另一个活动

> ID：15646870
> 
> 赞同：0
> 
> 时间：2013-03-26T20:35:04.100
> 
> 标签：android

[我正在尝试使用此示例](https://stackoverflow.com/questions/7400564/android-parcelable-retailerorderactivity-java-return-null/7400675#7400675)将 Parceble Extra 传递给另一个活动，但是当我尝试在我的第二个活动 NullPointerExeception 中获取它时，有人可以帮助我吗？

我的 Parcelable 类：

```
public class MetaDados implements Parcelable {

    private int codigoInstituicao;
        // . . .

    public MetaDados(int codigoInstituicao, int ano, String offlineUuid, String sigla, String nameInst,
            String startedDate, String name, String finishedDate, long size) {
        this.codigoInstituicao = codigoInstituicao;
        // . . .

    }

    public int getCodigoInstituicao() {
        return codigoInstituicao;
    }

    public void setCodigoInstituicao(int codigoInstituicao) {
        this.codigoInstituicao = codigoInstituicao;
    }

    //getters and setters . . .

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeInt(codigoInstituicao);
        // . . .

    }

    public static final Parcelable.Creator<MetaDados> CREATOR = new Parcelable.Creator<MetaDados>() {
        public MetaDados createFromParcel(Parcel in) {
            return new MetaDados(in);
        }

        public MetaDados[] newArray(int size) {
            return new MetaDados[size];
        }
    };

    private MetaDados(Parcel in) {
        codigoInstituicao = in.readInt();
        //. . .
    }
} 
```

我的 AsynkTask 如何开始我的其他活动：

```
ArrayList<MetaDados> metaDadosFull = new ArrayList<MetaDados>();
ArrayList<MetaDados> metaDadosPres = new ArrayList<MetaDados>();

Intent it = new Intent(activity, DownloadSelectionActivity.class);
            it.putExtra("metaDadosFull", metaDadosFull);
            it.putExtra("metaDadosPres", metaDadosPres);

            activity.startActivity(it); 
```

还有我尝试获取它的 DownloadSelectionActivity：

```
ArrayList<MetaDados> fullList = (ArrayList<MetaDados>) getIntent().getParcelableExtra("metaDadosFull");

        for (MetaDados metaDados : fullList) {
            Log.d(Constants.DOWNLOAD_SELECTED_ACTIVITY, metaDados.getName());
        }

        ArrayList<MetaDados> presList = (ArrayList<MetaDados>) getIntent().getParcelableExtra("metaDadosPres");

        for (MetaDados metaDados : presList) {
            Log.d(Constants.DOWNLOAD_SELECTED_ACTIVITY, metaDados.getName());
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:43:38.373

使用 Intent.putParcelableArrayListExtra() 代替 putExtra()，并使用 getParcelableArrayListExtra() 代替 getParcelableExtra()。你也可以失去演员表，这可能是它爆炸的地方。

# objective-c - 在代码中修改 NSOutlineView 的颜色

> ID：15646872
> 
> 赞同：0
> 
> 时间：2013-03-26T20:35:06.420
> 
> 标签：objective-c, nsoutlineview

我有一个 NSOutlineView 的子类，它使用 View 作为单元格（我使用 TextField）。问题是我可以简单地更改 IB 中行的颜色来更改 TextFieldCell 颜色，但我不能在代码中这样做。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:14:43.047

经过大量研究，我发现解决方案是覆盖该`NSOutlineView`方法`- (void)highlightSelectionInClipRect:(NSRect)theClipRect`并绘制您的自定义突出显示。

# cakephp - CAKEPHP - 如何留下插件 url

> ID：15646878
> 
> 赞同：0
> 
> 时间：2013-03-26T20:35:27.080
> 
> 标签：cakephp, plugins, cakephp-2.0

我有一个 ACL 插件，我希望能够从这个插件重定向回用户/索引。但我最终得到了不存在的有趣 url。如`/cakephp/admin/acl/users/index`

我怎样才能让它去`cakephp/users/index`

我浏览了 HTML 帮助程序，我很困惑。

我也会在cakephp[聊天室](https://chat.stackoverflow.com/rooms/26939/cakephp)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:41:25.513

您可以通过在创建链接时将其设置为“false”来“重置”插件；

例如;

```
echo $this->Html->link('go to user overview', array(
    'controller' => 'users',
    'action' => 'index',
    'plugin' => false
); 
```

**更新**

我的猜测是您同时使用 *前缀路由*和*插件*。要重置插件和前缀，请执行此操作；

```
echo $this->Html->link('go to user overview', array(
    'controller' => 'users',
    'action' => 'index',
    'plugin' => false,      // resets the plugin
    'admin'  => false,      // resets the admin-prefix
); 
```

# c# - 反射生成和泛型类型

> ID：15646881
> 
> 赞同：14
> 
> 时间：2013-03-26T20:35:32.387
> 
> 标签：c#, reflection.emit

我在`Reflection.Emit`类型管理方面又遇到了麻烦。

比如说，我有一个名为的类型`MyType`，它是在动态生成的程序集中定义的。在 a 中调用`MyType.GetMethods()`结果`NotSupportedException`，这使我不得不编写自己的一组包装器和查找表。但是，当我在`GetMethods()`使用我自己的类型作为泛型参数的标准泛型类型上调用或任何其他自省方法时，也会发生同样的情况：

*   `Tuple<int, string>`=> 工作正常
*   `Tuple<int, MyType>`=> 例外

我可以从泛型类型定义中获取方法列表：

`typeof(Tuple<int, MyType).GetGenericTypeDefinition().GetMethods()`

但是，这些方法具有通用占位符而不是实际值（例如`T1`等`TResult`），我不想编写另一个将通用参数追溯到其原始值的 kludge。

代码示例：

```
var asmName = new AssemblyName("Test");
var access = AssemblyBuilderAccess.Run;
var asm = AppDomain.CurrentDomain.DefineDynamicAssembly(asmName, access);
var module = asm.DefineDynamicModule("Test");

var aType = module.DefineType("A");
var tupleType = typeof(Tuple<,>);
var tuple = tupleType.MakeGenericType(new [] { typeof(int), aType });

tuple.GetProperty("Item1"); // <-- here's the error 
```

所以问题是：

1.  如何检测类型是否可以安全调用`GetMethods()`以及类似的方法？
2.  如果类型不安全，如何获取方法的实际列表及其通用参数值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T05:53:31.373

我在[后续问题](https://stackoverflow.com/questions/15669387)中得到了答案。该类`TypeBuilder`有一堆静态重载，它们完全可以做到这一点：

```
var genericTuple = typeof(Tuple<,>);
var myTuple = genericTuple.MakeGenericType(typeof(int), myType);
var ctor = TypeBuilder.GetConstructor(myTuple, genericTuple.GetConstructors().First()); 
```

奇怪的是，没有过载`GetProperty`。但是，仍然可以使用以下方法解析属性 getter 和 setter `GetMethod`：

```
var genericGetter = typeof(Tuple<,>).GetProperty("Item1").GetMethod;
var actual = TypeBuilder.GetMethod(myTuple, genericGetter); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T21:15:02.123

我会让你参考文档：

[使用反射发射定义类型](http://msdn.microsoft.com/en-us/library/5kyyyeh2.aspx)

它说

> 虽然 TypeBuilder 是从 Type 派生的，但是 Type 类中定义的一些抽象方法在 TypeBuilder 中并没有完全实现。这些 TypeBuilder 方法抛出 NotSupportedException。可以通过使用 Type.GetType 或 Assembly.GetType 检索创建的类型并反映检索到的类型来获得所需的功能。

所以：

> 如何检测类型是否可以安全地调用 GetMethods() 和类似方法？

如果类型对象是 TypeBuilder，或者如果该类型引用了属于 TypeBuilder 的任何类型，那么这样做是不安全的。

> 如果类型不安全，如何获取方法的实际列表及其通用参数值？

我会再次向您推荐文档。实际上将类型发出到程序集中，然后将其从程序集中取出。

# javascript - 检索输入值

> ID：15646885
> 
> 赞同：0
> 
> 时间：2013-03-26T20:35:57.177
> 
> 标签：javascript, forms, function, dom

我有这个：

```
<?php $i=0;?>
<?php foreach($x as $y): ?>
<input type="hidden" id="theid<?php echo $i;?>" value="<?php echo $someVariable;?>"/>
<?php $i = $i + 1; ?>
<?php endforeach; ?> 
```

我需要像这样获取每个“theid”的值：

```
<script type="text/javascript">
function somefunction(element, optionTitle) {
var num = document.getElementById('theid').value;
...
</script> 
```

考虑到“theid”添加了 $i 的事实，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:38:49.310

如果您有多个输入字段并且您想对多个输入字段执行相同的操作，您可以使用`getElementsByClassName`代替`getElementById`：

PHP

```
<input type="hidden" class="theclassname" id="theid<?php echo $i;?>" value="<?php echo $someVariable;?>"/> 
```

JS：

```
<script type="text/javascript">
    function somefunction(element, optionTitle) {
        var myEles = document.getElementsByClassName('theclassname');
        // loop over myEles and act on each one
        for (var i=0; i < myEles.length; i++) {
            alert("Input with id: " + myEles[i].id + " has value: " + myEles[i].value);
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:41:39.123

我建议使用 jQuery，jQuery 选择器支持通配符：

```
$('input[id^=theid]') 
```

有关此主题的进一步阅读，请参阅[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:46:35.633

如果你使用 jQuery 会很简单：

```
$('input[id^="theid"]').each(function () {
  console.log($(this).val()); //value of each theid
}); 
```

这是一个[jsBin](http://jsbin.com/ucahik/2/edit)。

# vba - Excel VBA 函数在 Visual Basic 中有效，但在工作表中失败

> ID：15646887
> 
> 赞同：2
> 
> 时间：2013-03-26T20:36:04.807
> 
> 标签：vba, excel

我正在尝试使用“CurrentRegion”构建一个二维数据数组。

```
Function ProcessData()
Dim dataList()
dataList = Range("A1").CurrentRegion
' TODO Process the dataList
End Function 
```

当我在 Visual Basic (Run/F5) 中测试它时，效果很好；我的 dataList 构建没有问题。但是，如果我将工作表中的一个单元格设置为：

```
= ProcessData() 
```

该函数在“CurrentRegion”步骤中静默失败。为什么会这样？我该如何补救？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:45:41.177

如果从 Excel 单元格调用函数（即作为用户定义函数/UDF），则只能访问通过参数传递给函数的范围。对其他范围（并且是一个范围）的任何访问`.CurrentRegion`都将导致执行的“循环引用”潜在取消。

此外，在 UDF 中，您不能修改工作表上的任何内容 - 只能返回函数的结果！

有关更多详细信息，请查看此[链接](http://www.excel-it.com/UDF.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T22:12:07.790

我刚刚遇到这个Q&A有同样的问题。我认为在 UDF 中使用存在一种错误，`CurrentRegion`原因并不像彼得在他的回答中所建议的那样。

比较这两个函数：

```
Function GetAddressOfColumn(TopCell As Range)
    GetAddressOfColumn = TopCell.CurrentRegion.Address
End Function

Function GetAddressOfColumnOK(TopCell As Range)
    GetAddressOfColumnOK = Range(TopCell, TopCell.End(xlDown)).Address
End Function 
```

两个函数都使用不同类型的范围引用。如果彼得是对的，那么两者都应该返回错误的结果。所以，看看下面的数据范围和两个函数的结果。如您所见，第二个函数结果符合预期且正确。

![在此处输入图像描述](../Images/c72d0bbc0e1767bb99c57371dc532981.png)

# android - 绑定套接字 Android

> ID：15646894
> 
> 赞同：1
> 
> 时间：2013-03-26T20:36:33.377
> 
> 标签：android, sockets, bind, ipv4

我在安卓上有问题。我有一个应用程序向用户询问本地 IP 地址（来自设备的接口）和另一个远程地址。应用程序必须绑定到指定的本地地址并连接到远程地址。很简单，但实际上，bind 并没有像我预期的那样工作..

我在清单文件上添加了以下权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

源代码如下：

```
public class MainActivity extends Activity
{
String Tag = "TAG";
private int LOCAL_PORT = 4444;
private int REMOTE_PORT = 80;
private EditText LOCAL;
private EditText REMOTE;
private Button Connect;
private TextView STATUS;
private Context context = this;

@Override
public void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);   

    LOCAL = (EditText) findViewById(R.id.editText1);
    REMOTE = (EditText) findViewById(R.id.editText2);
    Connect = (Button) findViewById(R.id.button1);

    Connect.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v)
        {
            BotleneckHandle WORK;

            Toast.makeText(getApplicationContext(), "Proceeding to connect",
                 Toast.LENGTH_SHORT).show();
        /*  
            if(LOCAL.getText().toString() == null || REMOTE.getText().toString() == null || LOCAL.getText().toString().equals(" ") || REMOTE.getText().toString().equals(" ") || LOCAL.getText().toString().equals("") || REMOTE.getText().toString().equals(""))
                Toast.makeText(context, "Wrong parameters", 2000);
            else
        {
            Toast.makeText(getApplicationContext(), "Proceeding to connect",Toast.LENGTH_SHORT).show();

        }*/

            WORK = new BotleneckHandle();       
            WORK.execute();
        }
    });

    STATUS = (TextView) findViewById(R.id.textView1);
}

 private class BotleneckHandle extends AsyncTask <Void , Void , String>
 {
     Socket Skt = null;
     String ReturnStatemente = new String();
     SocketAddress localAddr = new InetSocketAddress(LOCAL.getText().toString(), LOCAL_PORT);

    protected void onPreExecute(){  }
    protected String doInBackground(Void... params) 
    {

        try 
        {

            String s=new String();

            s+= "Local="+LOCAL.getText().toString()+":"+LOCAL_PORT+"  Remote="+REMOTE.getText().toString()+":"+REMOTE_PORT;  //so far so good, Confirmed by debug

            Toast.makeText(getApplicationContext(), s,Toast.LENGTH_SHORT).show();  //Does not show anything due the fact that i didn't published it as an assync task update.. 

            //binding to a local address
            Skt.bind(localAddr);            //cannot make the bind :-/

            //connecting to remote host
            Skt=new Socket(REMOTE.getText().toString(), REMOTE_PORT);   //if bind is comment, still does not work.. I bet
            ReturnStatemente = "Connected";

        } 
        catch (UnknownHostException e) 
        {   
            e.printStackTrace();
            Toast.makeText(context, "Unknown remote host", 2000);
            ReturnStatemente = "Not Connected";
        } 
        catch (IOException e) 
        {   
            e.printStackTrace();        
            Toast.makeText(context, "Connection fail", 2000);   
            ReturnStatemente = "Not Connected";
        }
        finally{try {
            Skt.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }}
        return ReturnStatemente;   

    }

    protected void onPostExecute(String result)  {    STATUS.setText(" CONECTION STATUS == " + result);    }

  } 
```

}

我在绑定上做错了什么？据我所知，当我寻找它的好处时..我错过了什么吗？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:04:13.170

您试图在分配任何内容之前对变量调用 bind 。所以它仍然为空。那是行不通的。您需要先创建一个 Socket 实例，然后才能对其调用方法。

# java - 多线程在 Asynctask 中意外停止

> ID：15646895
> 
> 赞同：0
> 
> 时间：2013-03-26T20:36:40.660
> 
> 标签：java, android, multithreading, android-asynctask

我正在尝试扫描我的 Android 设备中的所有文件。我使用了这样的多线程类：

```
public class FileScanner {

// subfolders to explore
private final Queue<File> exploreList = new ConcurrentLinkedQueue<File>();

private long fileCounter = 0;

List<File> listFile = new ArrayList<File>();

public void count() {
    fileCounter++;
}

public long getCounter() {
    return this.fileCounter;
}

public List<File> getListFile() {
    return this.listFile;
}

int[] threads;

public FileScanner(int numberOfThreads) {
    threads = new int[numberOfThreads];
    for (int i = 0; i < threads.length; i++) {
        threads[i] = -1;
    }
}

void scan(File file) {

    // add the first one to the list
    exploreList.add(file);

    for (int i = 0; i < threads.length; i++) {
        FileExplorer explorer = new FileExplorer(i, this);
        Thread t = new Thread(explorer);
        t.start();
    }

    Thread waitToFinish = new Thread(new Runnable() {

        @Override
        public void run() {

            boolean working = true;
            while (working) {
                working = false;

                for (int i = 0; i < threads.length; i++) {
                    if (threads[i] == -1) {
                        working = true;
                        break;
                    }
                }

                try {
                    Thread.sleep(1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }

        }
    });

    waitToFinish.start();
}

public void done(int id, int counter) {
    threads[id] = counter;
}

public boolean isFinished() {
    for (int i = 0; i < threads.length; i++) {
        if (threads[i] == -1) {
            return false;
        }
    }
    return true;
}

class FileExplorer implements Runnable {

    public int counter = 0;
    public FileScanner owner;
    private int id;

    public FileExplorer(int id, FileScanner owner) {
        this.id = id;
        this.owner = owner;
    }

    @Override
    public void run() {
        while (!owner.exploreList.isEmpty()) {

            // get the first from the list
            try {
                File file = (File) owner.exploreList.remove();

                if (file.exists()) {

                    if (!file.isDirectory()) {
                        count();
                        listFile.add(file);
                    } else {

                        // add the files to the queue
                        File[] arr = file.listFiles();
                        if (arr != null) {
                            for (int i = 0; i < arr.length; i++) {
                                owner.exploreList.add(arr[i]);
                            }
                        }
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
                // silent kill :)
            }

            try {
                Thread.sleep(1);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        owner.done(id, counter);
    }

} 
```

我在我的 Asynctask 中调用它：

私有类 FetchResidualAsynctask 扩展 AsyncTask { FileScanner fileMachine;

```
 @Override
    protected void onPreExecute() {
        super.onPreExecute();
        listResidualFileTemp.clear();
        listResidualFileThumbnail.clear();
        listResidualAppAds.clear();
        listResidualAppLeftOvers.clear();
        findAllStorage();
        for (int i = 0; i < listStorage.size(); i++) {
            fileMachine = new FileScanner(20);
            fileMachine.scan(listStorage.get(i));
            listFile.addAll(fileMachine.getListFile());
        }
    }

    @Override
    protected Void doInBackground(Void... params) { 
    numberOfFiles = listFile.size();
        Log.i("numberOfFiles", "NUmber: " + numberOfFiles);
        processindex = 0;
        getActivity().runOnUiThread(new Runnable() {
            public void run() {
                mBtnClean.setText(R.string.btn_rescan);
                mBtnClean.setEnabled(false);
                txtResidualFile.setText("");
                mProgressbar.setVisibility(View.VISIBLE);
                mProgressbar.setProgress(0);
                mBtnClean.setText(R.string.btn_stop);
                mBtnClean.setEnabled(true);
                mProgressbar.setMax(numberOfFiles);
            }
        });

        for (int i = 0; i < listFile.size(); i++) {
            getFilePath(listFile.get(i));
        }

    } 
```

问题是返回的文件列表非常混乱。当我调试时，每次测试的结果都不同。第一次它返回的文件数量很少（例如：160），下一次会更大（1200）。

我认为 FileScanner fileMachine.scan() 尚未完成并强制停止运行到 DoInBackground。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:15:14.630

这看起来过于复杂并且充满了竞争条件。您的主要错误可能是线程在队列实际为空之前检测到队列为空（然后线程退出）......即在某个时刻队列暂时为空（最后一个线程 remove()d item) 但随后一个线程将某些内容添加回它。

要等待您的工作人员完成......您可以使用 Thread.join() 或信号量，而不是您已经获得的那种复杂的不安全轮询。

你确定并行这样的事情有好处吗？我想 20 个线程都试图同时敲击文件系统实际上并不能享受大量的同时执行。甚至可能是文件系统驱动程序序列化了所有 IO 请求！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:12:17.230

好问题。一般来说，不可能触发一堆线程并以某种方式让它们“工作”。相反，您需要创建一个预定义大小的线程池，并在您有工作要做时分配一个新的线程池。在某些时候，您想在线程上运行的任务将等待，因为没有线程可用。这是预期的行为。为了方便多线程使用，请提前确定您想要的最大线程数，建立一个线程池，然后才开始工作。[将操作发送到多个线程](http://developer.android.com/training/multiple-threads/index.html)的培训课程对此进行了一些详细的描述。

# java - Scala 的 Java 类

> ID：15646896
> 
> 赞同：0
> 
> 时间：2013-03-26T20:36:41.213
> 
> 标签：java, android, scala

请帮助我处理这个 Scala 的类，我想在 Java 上实现它，它是：

```
class StretchVideoView(context:Context, attr:AttributeSet)
extends VideoView(context, attrib) {
    def measure(measureSpec:Int):Int = {
        val specMode = View.MeasureSpec.getMode(measureSpec)
        View.MeasureSpec.getSize(measureSpec)
    }

    override def onMeasure(widthMeasureSpec:Int, heightMeasureSpec:Int) {
        val (w,h) = (measure(widthMeasureSpec), measure(heightMeasureSpec))
        getHolder().setFixedSize(w,h)
       super.onMeasure(widthMeasureSpec, heightMeasureSpec)
    }
} 
```

我也尝试自己做，这是我的 Java 代码：

```
class StretchVideoView extends VideoView {

        public StretchVideoView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public int measure(int measureSpec) {
        int specMode = View.MeasureSpec.getMode(measureSpec)
        ??? View.MeasureSpec.getSize(measureSpec); // may be + here ???

        return specMode;  // ???
    }

        // and I'm not sure about this
    @Override
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {    
        int w = measure(widthMeasureSpec);
        int h = measure(heightMeasureSpec);
        getHolder().setFixedSize(w,h);
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);   
    }
} 
```

任何建议如何在Java上实现它？

这是带有此代码的原始文章： [原始代码](http://makerwannabe.blogspot.com/2012/02/androids-videoview-doesnt-always.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:38:51.280

我认为你需要做这样的事情`measure`：

```
public int measure(int measureSpec) {
    int specMode = View.MeasureSpec.getMode(measureSpec)
    return View.MeasureSpec.getSize(measureSpec);
} 
```

# java - 进一步对已排序的列表进行排序

> ID：15646900
> 
> 赞同：1
> 
> 时间：2013-03-26T20:36:51.827
> 
> 标签：java, android, list

我有一个列表`maps`，我已经按一种类型排序，但现在我想进一步排序该列表

原始排序

```
Collections.sort(list, new Comparator<Map<String,Object>>(){

  @Override
  public int compare(Map<String, Object> m1,Map<String, Object> m2) {

      return m1.get("type").toString().compareTo(m2.get("type").toString()); //type is a 1 or 0
  }         
}); 
```

现在我想做的是保持该顺序，但我想按人的姓氏进一步对该列表进行排序。我是否必须将其拆分为 2 个列表，一个类型列表`0`和另一个类型列表，`1`然后将列表添加在一起？

基本上我想复制一个我会做的 SQL 排序，`type ASC, lastName ASC`并给我一个按类型排序的列表，其中类型按姓氏排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:39:02.420

你可以这样做：

```
int compareType = m1.get("type").toString().compareTo(m2.get("type").toString());
if(compareType != 0) {
   return compareType;
}
return m1.get("name").toString().compareTo(m2.get("name").toString()); 
```

如果您要对许多键进行排序，这会更干净：

```
for(String key : new String[] { "type", "name" }) {
   int compare = m1.get(key).toString().compareTo(m2.get(key).toString());
   if(compare != 0) {
      return compare;
   }
}
return 0; 
```

# c# - 带有 linq 的内左连接返回太多结果

> ID：15646903
> 
> 赞同：2
> 
> 时间：2013-03-26T20:37:04.027
> 
> 标签：c#, linq, linq-to-sql, repository-pattern

自从我上次使用内部连接以来，我已经有好几年了，所以我有点生疏了。它有 3 张桌子

相册、相册图片和用户

现在首先在我的存储库中，i Inner Left Join Album 和 AlbumsImages，问题是我只想要 Albumsimages 中的第一个条目，按第一个 Cover Desc 然后 Id Desc 排序（AlbumImages 中可以有 0 个图像！）。之后，我是否加入我的用户表，在相册中的用户 ID 到用户 ID。我的问题是我不仅得到 1 张专辑，而且得到了 AlbumsImages 中每张图片的结果，我只想要 1 张。我在这里做错了什么？

```
 public IQueryable<Album> Get()
    {
        return (from a in context.Albums
                join i in _imageRepository.Get() on a.Id equals i.AlbumId into albumImages
                from cover in albumImages.DefaultIfEmpty()
                orderby cover.Cover descending, cover.Id ascending 
                select new Album()
                    {
                        Id = a.Id,
                        UserId  = a.UserId,
                        Name  = a.Name,
                        Created  = a.Created,
                        LastEdit  = a.LastEdit,
                        Description  = a.Description,
                        Views  = a.Views,
                        Location  = a.Location,
                        Photoshoot  = a.Photoshoot,
                        Cover = cover,
                    });
    }

var albums = (from a in AlbumRepository.Get()
                            join u in UserRepository.Get() on a.UserId equals u.Id
                            orderby a.Id descending
                            select new AlbumDisplayModel()
                                {
                                    Album = a,
                                    User = u
                                }).ToList(); 
```

测试：

```
 return (from i in _imageRepository.Get()
            join album in context.Albums on i.AlbumId equals album.Id into albums
            from a in albums.DefaultIfEmpty()
            select new Album()
                {
                    Id = a.Id,
                    UserId  = a.UserId,
                    Name  = a.Name,
                    Created  = a.Created,
                    LastEdit  = a.LastEdit,
                    Description  = a.Description,
                    Views  = a.Views,
                    Location  = a.Location,
                    Photoshoot  = a.Photoshoot,
                    Cover = i,
                }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:42:29.673

`DefaultIfEmpty`从起飞`albumImages`。无论是否匹配（左连接），这都会返回专辑图像。

# php - 使用 PHP 转换坐标

> ID：15646905
> 
> 赞同：0
> 
> 时间：2013-03-26T20:37:13.577
> 
> 标签：php, google-maps

我有像 S 23° 25' 33.8"、W 47° 35' 58.4" 这样的坐标，我想转换为 -23.426056、-47.599556。

我怎样才能使用 PHP 做到这一点？

编辑

抱歉，正确的问题是：

当我在谷歌地图中放置 S 23° 34' 55.9" ， W 47° 31' 14.2" 时，他会自动将绿色标记指向我想要的位置，但如果我在示例 gmaps-samples.googlecode.com/svn/ 中放置相同的坐标树干/地理编码器/…，它几乎只在街道上指向一个标记，我如何在我的应用程序中将绿色标记与谷歌地图相似

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:49:03.910

用简单的数学来做：

*   弧秒是 1⁄3,600 度
*   弧分是 1/60 度
*   S、E 负、N、W 正

    例如：S 23° 25' 33.8: -1 * 23+25/60+33.8/3600 = -23,426055555555555555555555555556°

# android - 为什么自定义样式用于评级栏错误膨胀？

> ID：15646907
> 
> 赞同：0
> 
> 时间：2013-03-26T20:37:19.533
> 
> 标签：android, android-layout

我对 ratingBar 的自定义样式有疑问？

```
03-26 15:22:12.229: E/AndroidRuntime(2075): FATAL EXCEPTION: main
03-26 15:22:12.229: E/AndroidRuntime(2075): android.view.InflateException: Binary XML file line #54: Error inflating class android.widget.RatingBar
03-26 15:22:12.229: E/AndroidRuntime(2075):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
03-26 15:22:12.229: E/AndroidRuntime(2075):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-26 15:22:12.229: E/AndroidRuntime(2075):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
......
03-26 15:22:12.229: E/AndroidRuntime(2075): Caused by: java.lang.NumberFormatException: unable to parse 'res/drawable/ratingbar_yellow.xml' as integer 
```

我的 ratingbar_yellow.xml

```
<item
    android:id="@+android:id/background"
    android:drawable="@drawable/rate_star_small_off"/>
<item
    android:id="@+android:id/secondaryProgress"
    android:drawable="@drawable/rate_star_small_half"/>
<item
    android:id="@+android:id/progress"
    android:drawable="@drawable/rate_star_small_on"/> 
```

我的风格

```
 <style name="yellowRatingBarSmall" parent="@android:style/Widget.RatingBar">
    <item name="android:progressDrawable">@drawable/ratingbar_yellow</item>
    <item name="android:secondaryProgress">@drawable/ratingbar_yellow</item>
    <item name="android:minHeight">14dip</item>
    <item name="android:maxHeight">14dip</item>
    <item name="android:isIndicator">true</item>
    <item name="android:indeterminateOnly">false</item>
</style> 
```

在我的布局中

```
<RatingBar
    android:id="@+id/restaurant_rating"
    style="@style/yellowRatingBarSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:41:56.533

> 原因：java.lang.NumberFormatException：无法将“res/drawable/ratingbar_yellow.xml”解析为整数

我认为问题是您的`ID`. 你这样做不正确。

```
android:id="@+android:id/background" 
```

它应该是这样的：

```
android:id="@+id/background" 
```

# php - 适用于本地计算机但不适用于服务器的脚本

> ID：15646908
> 
> 赞同：1
> 
> 时间：2013-03-26T20:37:23.083
> 
> 标签：php, gallery, localhost, wamp

我找到了一个非常好的画廊（EasyGallery）脚本，我将它集成到我的网站中，它在我计算机上的 wamp 服务器上运行良好。但是，当我将它上传到我的虚拟主机（付费、支持 php、数据库等）时，脚本不会加载。我尝试了 3 个不同的虚拟主机，包括脚本的原始版本和集成到我网站中的修改版本。

所以我的问题是为什么可以在这里找到的画廊脚本[http://www.freitagmorgen.de/#/](http://www.freitagmorgen.de/#/) 在我的计算机上与 WAMP 一起工作，但在服务器上却不起作用。

* * *

PHP版本：

付费主机 - PHP 版本 5.2.17 Wamp - 5.3.13 其他虚拟主机 - 5+（正确的）

脚本要求：4+

* * *

关于他们网站上的说明：我已经为图片文件夹（+子文件夹）设置了正确的权限 - 0755

* * *

网站和画廊的地址是[http://dmbathrooms.co.uk/test/gallery.php#/](http://dmbathrooms.co.uk/test/gallery.php#/)

它可以读取样式位，因此是灰色背景，但不能读取其余部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:43:13.597

到目前为止，最可能的原因是存在相对/绝对路径问题，因此在您的本地计算机上它可以工作，但是当联机时路径计算不正确。如果没有代码或损坏页面的链接，我无法说出错误设置的路径，但这是从本地主机开发到在线发布网站时出现问题的一个极其常见的原因。

另一个最常见的原因是目录权限，因为这在 localhost 上几乎从来不是问题，而在托管服务器上几乎总是一个问题。但是，只有您可以检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:41:20.210

来自同一网站：

```
INSTALLATION

    Extract and copy to your Webserver
    Make the PICTURES/ folder writeable (chmod 775)
    Copy your images to the PICTURES/ folder

You need a Webserver with at least PHP 4 installed. 
```

检查服务器上的 php 版本。

# postgresql - 我可以在学说 2 中使用窗口函数吗？

> ID：15646912
> 
> 赞同：5
> 
> 时间：2013-03-26T20:37:30.767
> 
> 标签：postgresql, symfony, doctrine-orm, window-functions

```
SELECT invoice.id, 
COUNT(slip.id),
SUM(projected_minutes)  OVER (PARTITION BY task.id) AS projected_minutes
FROM invoice
INNER JOIN task ON task.invoice_id = invoice.id
LEFT JOIN slip ON slip.task_id = task.id 
```

上面的查询在 postgresql 中，我想将其转换为 DQL，但我在 DQL 中找不到任何关于窗口函数的文档，这是在教义中本机支持的，还是我必须为此创建一个自定义 dql 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:39:07.017

Doctrine 中不支持此供应商特定功能。创建自定义 DQL 函数或使用本机 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-03T11:57:16.080

正如其中一条评论所要求的，我为 COUNT() OVER() 附加了我的自定义字符串函数

```
<?php

namespace Example\Doctrine\CustomFunctions;

use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\Lexer;

/**
 * Class CountOverSql
 */
class CountOverSql extends FunctionNode
{
    /**
     * @var string
     */
    private $field;

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return "COUNT(".$this->field->dispatch($sqlWalker).") OVER()";
    }

    public function parse(\Doctrine\ORM\Query\Parser $parser): void
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->field = $parser->StringPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

您只需将此代码添加到您的学说配置中：

```
$entityManager->getConfiguration()->addCustomStringFunction('count_over', function ($name) use ($c) {
    return new Example\Doctrine\CustomFunctions\CountOverSql($name);
}); 
```

要使用它，请将此代码添加到您的 select 语句中：

```
$queryBuilder->select('table_name', 'count_over(table_name.id)'); 
```

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-21T19:19:05.027

窗口函数类的版本略有不同。它更通用，因为您可以在这里使用任何聚合函数 + 在 window.properties 中使用“Order By”子句。

```
use Doctrine\ORM\Query\AST\AggregateExpression;
use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\AST\OrderByClause;
use Doctrine\ORM\Query\Lexer;
use Doctrine\ORM\Query\Parser;
use Doctrine\ORM\Query\SqlWalker;

class Over extends FunctionNode
{
    /** @var AggregateExpression */
    private $functionExpr;

    /** @var OrderByClause */
    private $orderByExpr;

    /**
     * {@inheritdoc}
     *
     * @throws \Doctrine\ORM\Query\AST\ASTException
     */
    public function getSql(SqlWalker $sqlWalker): string
    {
        if (!empty($this->orderByExpr->orderByItems)) {
            return "{$this->functionExpr->dispatch($sqlWalker)} OVER ({$this->orderByExpr->dispatch($sqlWalker)})";
        }

        return "{$this->functionExpr->dispatch($sqlWalker)} OVER ()";
    }

    /**
     * @param Parser $parser
     *
     * @throws \Doctrine\ORM\Query\QueryException
     */
    public function parse(Parser $parser): void
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->functionExpr = $parser->StringPrimary();
        $parser->match(Lexer::T_COMMA);
        $this->orderByExpr = $parser->OrderByClause();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

并像这样使用它：

```
$aggregateQueryResult = $this->createQueryBuilder('agg')
      ->select('OVER(sum(agg.quantity), ORDER BY agg.date, agg.id) as aggregated_sum') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-19T23:52:01.770

[这是在 Doctrine 2 https://github.com/elshafey/doctrine-window-functions](https://github.com/elshafey/doctrine-window-functions)中提供寡妇函数功能的扩展

您可以按以下方式使用扩展程序

```
// configure the extension first
$entityManager->getConfiguration()->addCustomStringFunction(
    'WINDOW',
    \Elshafey\DoctrineExtensions\WindowFunctions\Query\Mysql\Window::class
);

// use your window function formula
SELECT invoice.id, 
COUNT(slip.id),
WINDOW(SUM(projected_minutes))  OVER (PARTITION BY task.id) AS projected_minutes
FROM invoice
INNER JOIN task ON task.invoice_id = invoice.id
LEFT JOIN slip ON slip.task_id = task.id 
```

# python - 复杂查询：选择每天的最新对象，或者如果存在，则选择标记的对象

> ID：15646915
> 
> 赞同：0
> 
> 时间：2013-03-26T20:37:53.180
> 
> 标签：python, sql, django

好的，所以我正在使用博客 (zinnia)，模型是 Entries。我想制作一个执行以下操作的特殊查询：

1.  每天最多选择一个条目。
2.  如果条目标记为“精选”，请选择该条目。
3.  否则选择最新的

精简型号：

```
class EntryAbstractClass(models.Model):
    """Base Model design for publishing entries"""
    creation_date = models.DateTimeField(_('creation date'),
                                         default=timezone.now)
    start_publication = models.DateTimeField(_('start publication'),
                                             blank=True, null=True,
                                             help_text=_('date start publish'))
    end_publication = models.DateTimeField(_('end publication'),
                                           blank=True, null=True,
                                           help_text=_('date end publish'))
    featured = models.BooleanField(_('featured'), default=False) 
```

更复杂的是，用于“最新”的输入日期是：

```
if start_publication != None:
    latest_date = start_publication
else:
    latest_date = creation_date 
```

我不确定如何在 SQL 中执行此操作，更不用说 django 过滤器了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:08:38.717

嗯，也许使用 Q 对象？我不确定我是否 100% 理解，请查看： [https ://docs.djangoproject.com/en/dev/topics/db/queries/](https://docs.djangoproject.com/en/dev/topics/db/queries/)

像这样的东西怎么样（完全未经测试）：

```
from datetime import datetime
from django.db.models import Q

filters = Q()

# If an item is featured
filters |= Q(featured=True)

# or if it was "published" today
filters |= Q(start_publication__day=datetime.today())

# or if it was "created" today
filters |= Q(creation_date__day=datetime.today())

# grab just one
entry_of_the_day_yall = Entries.objects.filter(filters)[:1] 
```

# c# - 添加 SharePoint 子网站时出错

> ID：15646917
> 
> 赞同：0
> 
> 时间：2013-03-26T20:37:57.903
> 
> 标签：c#, sharepoint-2010, ssis

我正在使用 SSIS 脚本任务来尝试创建 SharePoint 子网站。错误并没有告诉我任何事情。我知道问题出在 ClientContext 行。带有 SSIS 的 SQL Server 服务器是与我的 SharePoint 服务器分开的服务器。有任何想法吗？

```
 using System;
    using System.Data;
    using Microsoft.SqlServer.Dts.Runtime;
    using System.Windows.Forms;
    using Microsoft.SharePoint;
    using Microsoft.SharePoint.Client;
    using System.Collections.Generic;
    using Microsoft.SharePoint.Client.Utilities;

namespace ST_a1ecfb3e46dc4211ac17435ad3bb67ec
{

    [Microsoft.SqlServer.Dts.Tasks.ScriptTask.SSISScriptTaskEntryPointAttribute]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        public void Main()
        {
            try
            {
                string SiteDescription = "This is my first site creation using Client Object Model.";
                int SiteLanguage = 1033;
                string SiteTitle = "Test Site";
                string SiteUrl = "Test";
                bool SitePermissions = true;
                string mywebTemplate = "STS#0";

                ClientContext clientContext = new ClientContext("http://extranet.domain.local/");

                //Retreive the web from the Client Context. This web is the root web by default.
                /*Web oWebsite = clientContext.Web;

                //Create a new webCreateInformation object to specify the properties of the new site being created.

                WebCreationInformation webCreateInfo = new WebCreationInformation();
                webCreateInfo.Description = SiteDescription;
                webCreateInfo.Language = SiteLanguage;
                webCreateInfo.Title = SiteTitle;
                webCreateInfo.Url = SiteUrl;
                webCreateInfo.UseSamePermissionsAsParentSite = SitePermissions;
                webCreateInfo.WebTemplate = mywebTemplate;

                //Adding a new site under the root web

                Web oNewWebsite = oWebsite.Webs.Add(webCreateInfo);*/

                Dts.TaskResult = (int)ScriptResults.Success;
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message.ToString(), "Error", MessageBoxButtons.OK);

            }
        }

        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };

    }
} 
```

# background - three.js - 如何使用 WebGLDeferredRenderer 更改背景

> ID：15646921
> 
> 赞同：1
> 
> 时间：2013-03-26T20:38:07.717
> 
> 标签：background, three.js

使用 WebGLDeferredRenderer 时似乎找不到如何更改背景颜色。

渲染器.clearColor = 0xff0000; 不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-10T14:11:55.003

WebGLDeferredRenderer 只是 WebGLRenderer 的一个包装器，您可以通过 WebGLDeferredRenderer.renderer 访问 WebGLRenderer 的功能，例如：

```
renderer.renderer.setClearColor(clearColor); 
```

# ruby-on-rails - 通过表单将额外的值传递给部分和创建操作

> ID：15646924
> 
> 赞同：0
> 
> 时间：2013-03-26T20:38:30.807
> 
> 标签：ruby-on-rails

在我的rails 应用程序中，我有一个views/questions/show.html.erb 页面，除了预期的@question 变量之外，它还可以访问@answers 变量来显示特定问题的所有答案。

在显示特定问题的所有答案的循环内部，我希望显示一个区域供用户评论（在答案而不是问题上），所以我创建了一个评论部分，其中遵循另一个 SO 的建议答案，我创建了一个“本地”哈希来传递变量。在评论控制器的创建操作中，我希望能够访问答案（评论属于答案）和问题（其中 has_many :answers），所以我将答案和问题 id 传递到部分中，就像这样

```
 <% for answer in @answers %>
    ....(code ommitted)
    <%= render :partial => 'comments/form', :locals => { :answer_id => answer.id, :question_id => @question.id } %>
    ...(code ommitted)

    <% end %> 
```

我通过评论部分中的隐藏字段传递 answer_id 和 question_id 像这样

```
 <%= simple_form_for @comment do |f| %>
   <%= f.input :content, as: :text, label: 'comment'%>
   <%= f.hidden_field :user_id, :value => current_user.id %>
   <%= f.hidden_field :answer_id, :value => answer_id %>
   <%= f.hidden_field :question_id, :value => question_id %>
   <%= f.button :submit %>
   <% end %> 
```

在评论控制器的创建动作中，我这样做

```
def create
    @question = Question.find(params[:comment][:question_id])
    @answer = Answer.find(params[:comment][:answer_id])
    @comment = @answer.comments.build(params[:comment])
    if @comment.save
        flash[:notice] = "Successfully created comment"
        redirect_to root_path
        # redirect_to question_answers_path(@question) (will eventually want to redirect to the question)
    else
        render :action => 'new'
    end 
end 
```

第一个问题，我觉得我不得不通过以下方式提取问题ID（和答案ID）做了一些尴尬的事情

```
@question = Question.find(params[:comment][:question_id]) 
```

但是，这些是提交我的表单后可用的参数

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"VtogfCsI137lbk2l64RXtrfRn/+Rt1/jM8pfDVY29gM=", "comment"=>{"content"=>"test", "user_id"=>"12", "answer_id"=>"25", "question_id"=>"22"}, "commit"=>"Create Comment"} 
```

所以我必须像这样挖出question_id`params[:comment][:question_id]`

第二个更具挑战性的问题（对我来说具有挑战性）是 Rails 告诉我

```
Can't mass-assign protected attributes: question_id 
```

我没有理由将 question_id 存储在评论模型上，所以我没有在数据库中为它创建一个列。但是，当我这样做时

```
@comment = @answer.comments.build(params[:comment]) 
```

由于 question_id 是 :comment 中的参数之一（我在表单中为其设置了隐藏字段），Rails 正试图将其保存在评论表中。但是，我真正想要在 comments_controller.rb 的创建操作中访问问题的唯一原因是在保存后使用它重定向回问题。

你能建议我能做些什么来解决这个问题吗？我觉得因为我没有太多使用 Rails 的经验，所以我做的每件事都很尴尬，这可能是它不起作用的原因。我想解决这个问题的简单方法是在评论模型中添加一个 question_id 列，但是它们之间没有“关联”，所以我认为这是错误的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:55:45.230

你的第一个问题不是问题。没有太多方法可以做到这一点。

第二个问题，你必须这样做

`@comment = @answer.comments.build(params[:comment][:content].merge(user_id: params[:comment][:user_id], answer_id: params[:comment][:answer_id]))` 因为否则您将尝试分配表中没有的属性

或者你可以用另一种方式

```
params[:comment].delete('question_id') 
```

接着

```
@comment = @answer.comments.build(params[:comment]) 
```

# sublimetext2 - Sublime text：如何自定义语法高亮？

> ID：15646926
> 
> 赞同：12
> 
> 时间：2013-03-26T20:38:31.750
> 
> 标签：sublimetext2, sublimetext

我使用*Smarty*生成 html 模板。我目前使用 html 突出显示，这很好，除了它不突出 smarty 标签，例如`{foreach}` 我尝试安装 Smarty 包，但这看起来不太好。

所以基本上我需要能够将大括号内的任何内容突出显示到标准 HTML 着色中。**如何才能做到这一点？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-08T19:38:27.240

# 背景

@MattDMo 是正确的，`.tmTheme`文件是控制突出显示的主要文件。它是一个带有一系列正则表达式和标记的 XML 文件，这些正则表达式和标记表示哪个 RegEx 匹配哪种类型的句法元素。

你可以在 GitHub 上搜索，发现很多人已经创建了包含`.tmTheme`文件的 Sublime Text 包。请注意，您可以直接使用为 TextMate 创建的包，因为 Sublime Text 使用相同的约定。（至少就文件而言，这是正确的`.tmTheme`。`.tmPreferences`）

例如，我可以直接为 ChucK 语言获取一个语法高亮包，最初是为 TextMate 制作的，并使用它 SublimeText2。通过`.tmTheme`复制与 TextMate 一起使用的文件立即工作。我刚刚删除了额外的垃圾文件，然后对 进行了一些更改`.tmTheme`，并添加了对包管理器的支持。

在此处查看该项目：[https](https://github.com/nathanleiby/ChucK.tmbundle) ://github.com/nathanleiby/ChucK.tmbundle 。

# 如何安装新语法

*包装控制*

理想情况下，您已经想要的语法包含在 Sublime Text Package Control 中可供下载。在 Package Control 中搜索并直接安装。（如果你还没有Package Control，你必须得到它：[https](https://github.com/wbond/package_control_channel/) ://github.com/wbond/package_control_channel/ ）

*手动*

如果您下载`.tmTheme`文件或`.tmBundle`直接下载文件，则需要将其复制到 ST 中相应的包文件夹中。注意有`/Packages`文件夹和`/Packages/User`文件夹。ST2 文档建议复制到后者，因为即使在更新过程中删除/修改了主文件夹中的其他包，也可以保证保留它。

在 OSX 上，该目录是：`~/Library/Application Support/Sublime Text 2/Packages/User/`

（注意：你可能更喜欢`git clone`打包到这个文件夹中，这样你可以很容易地更新它。）

# 如何创建自己的

如果您想深入了解并自定义语法突出显示，这里有几个地方可以开始。

*   复习你的正则表达式。
*   [语法定义的 Sublime Text 文档](http://docs.sublimetext.info/en/latest/extensibility/syntaxdefs.html)
*   `<ctrl> + <shift> + p`. 每当您查看文件时，选择任何单词并按下此组合键，然后查看页脚栏中。您应该会看到一系列语法描述。例如：我刚刚在我正在查看的 SQL 文件中突出显示了一个单词，响应是：`source.sql string.other.quoted.backtick.sql`.
*   您可能更喜欢使用 JavaScript/JSON 而不是 XML 来解析您的语法。使用[PackageDev](https://github.com/SublimeText/PackageDev)。您可以通过 Package Control 获得此信息。它具有允许您在 .json (JSON) 和 .tmTheme (XML) 文件之间来回切换的命令。
*   StackOverflow 上的一个[相关问题](https://stackoverflow.com/questions/15010032/how-to-add-syntax-highlighting-to-sublime-text-2)。

# 警告

这可能很明显，但语法高亮的用处与您在 Sublime Text 中选择的配色方案有关。（崇高文本 2 -> 首选项 -> 颜色方案 -> ...）

我还没有机会详细探索/验证这一点，但似乎某些配色方案可能会区分更多/更少类型的语法元素。

出于这个原因，我强烈推荐“Monokai”配色方案（特别是“Monokai Soda”变体）——它似乎“带出颜色”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T22:03:33.720

您可能需要修改您的`.tmTheme`以添加自定义突出显示通过将您的语法设置为 Smarty 定义的范围。目录中应该有一个`Smarty.tmlanguage`文件`Packages/Smarty/Syntaxes`。它是 XML，因此对于随意阅读可能有点困难，但如果您了解正则表达式并且范围被智能命名，您应该能够弄清楚如何修改您的主题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-22T23:06:13.090

这很简单

1.  使用 Sublime Text 2 默认安装
2.  打开文件“Packages\HTML\HTML.tmLanguage”，如果您搜索字符串**`<!--`**，您会注意到（当前）有两个对“Smarty”的引用被注释了。取消评论这些。
3.  在您的`Smarty.tmLanguage`文件中搜索字符串**`scopeName`**. 这实际上是一个键，相关的字符串应该是**`text.html.smarty`**.
4.  将该字符串复制到`HTML.tmLanguage`代替（您刚刚取消注释的最后一个块末尾**`source.smarty`**的键的字符串）`include`

而已。享受

# facebook-graph-api - 从像 Hootsuite 等 API 访问数据（无需用户登录）

> ID：15646933
> 
> 赞同：1
> 
> 时间：2013-03-26T20:38:55.730
> 
> 标签：facebook-graph-api

我最近一直在使用 API，主要是 Facebook API，现在是 Instagram 和 Twitter API。但是它们的一个共同点是它们的工作方式，从这个意义上说，用户必须同时在该计算机/网络浏览器上登录到他们的服务。

例如，如果我要创建一个页面，您可以在其中阅读您的 Facebook 提要，那么用户必须在我的页面上创建一个帐户，同时在 Facebook 上登录并授权该应用程序。下一次，如果他使用相同的计算机/网络浏览器并且没有退出 Facebook，那就没问题了。但如果他使用另一台计算机或确实退出了，他将看到 Facebook 登录信息。

我没有在我的数据库中存储任何数据，所有内容都是直接从 Facebook 访问的。

但是像[HootSuite](http://www.hootsuite.com)这样的服务却不是这样工作的。我可以在 HootSuite 注册一次，选择 Facebook，登录并授权该应用程序，然后在世界上任何一台计算机上访问我的提要，只需在 HootSuite 登录一次。他们如何做到这一点？他们是否与 Facebook 签订了特殊协议，或者这是我可以自己学习和使用的东西（一种服务/每个 Facebook 应用程序开发人员都可以访问的东西）？

他们究竟在数据库中存储了什么？他们是否存储了我的 Facebook 用户名/密码，或者他们发送给 Facebook 以进行确认的一串数据（我没有撤销任何权限）而我没有看到它？

希望你们中的一些人知道这一点，这很有趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T08:40:46.817

嗨，我目前正在为 hoosuite 开发，看到没有人回答您的问题，我会尝试为您提供一些见解。

Hootsuite 内部使用了 LinkedIn、facebook、Twitter 和其他社交网络提供的开发者 API。有使用这些 API 的文档化方法。通常，它涉及在这些社交网络上创建一个应用程序（这里是一个 hoosuite 应用程序）。这个应用程序在这些网络上有自己的 id。当您在 hoosuite 上创建帐户时，它会要求您添加您的社交网络帐户。

当您单击社交网络名称时，hoosuite 应用程序会向所选社交网络发送访问请求。目标社交网络首先验证您的应用 ID（在本例中为 hoosuite），然后验证用户凭据（用户名和密码），然后向您显示授权屏幕，您希望 hoosuite 应用访问您的个人资料中的哪些数据。

该信息现在被压缩为一个包含这些授权参数的对象以及一个 oauthaccess 令牌被发送回 hoosuite 网站。这些 oauth 令牌有一个生命周期（例如，linkedin 访问令牌生命周期是 60 天），这意味着它的有效期为 60 天。

hoosuite 从不存储您的（twitter、facebook 等网络）用户名或密码，它存储 oauth 令牌值并在您使用 hoosuite 时重复使用。因此，oauth 令牌对于您的社交网络帐户和 hoosuite 帐户是唯一的，它就像一个超级通行证来读取您的数据。

这是我的比喻。希望能帮助到你。

# ios - 如何确定 iOS 中的第一周日期？

> ID：15646940
> 
> 赞同：10
> 
> 时间：2013-03-26T20:39:23.050
> 
> 标签：ios, objective-c, locale, nscalendar

我在我的应用程序中使用 Tapku 的日历，我想根据用户的设置确定一周应该从星期日还是星期一开始。我打电话给 firstWeekday，但由于某种原因，它在内置日历从星期一开始几周的设备上返回 1（星期日）（因此它应该返回 2）：

```
NSCalendar* cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[cal firstWeekday]; 
```

关于我可能缺少什么的任何建议？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T20:41:09.530

好的，事实证明这是正确的做法：

```
[[NSCalendar currentCalendar] firstWeekday] 
```

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2014-09-02T00:15:33.753

如何更改 iPhone 和 iPad 日历中一周的默认开始日期 在 iPhone 或 iPad 上启动“设置”应用程序。向下滚动并点击邮件、通讯录、日历。在日历部分下，点击开始周。在这里，您可以更改日历开始的星期几。

# jquery - 用于 Google 地图的 jQuery Mobile 双弹出联系我们页面

> ID：15646941
> 
> 赞同：1
> 
> 时间：2013-03-26T20:39:30.547
> 
> 标签：jquery, jquery-mobile, jquery-plugins, google-maps-api-3, jquery-mobile-popup

**意图：**

> 我有一个单一模板的 jQM 页面，我想要列出我们拥有的不同商店。
> 
> > **这是一个活生生的例子：[http ://bit.ly/WU7N1P](http://bit.ly/WU7N1P)**
> 
> 我想`DIV`为弹出窗口提供一个可重复使用的容器，然后在用户点击一个位置或另一个位置时更新`src`嵌套的容器。`iframe`我的实现基础来自 jQM Google Map 插件，并且我已添加到其中。
> 
> 我正在创建一个被点击位置的纬度和经度参数，然后将其传递`URL`给`showMap.html`文件，该文件是`iframe` `src`谷歌地图在 iframe 中加载的位置。我还在地图上添加了一个标记，以便用户可以看到商店的确切位置。

* * *

**问题：**

> 当用户点击按钮打开地图时，似乎有两 (2) 个弹出窗口被加载？因此，当您关闭地图弹出窗口并且第二个空白弹出窗口仍然存在时，它也需要关闭。
> 
> ***注意：**大多数情况下，您可以在第一个“打开地图”按钮上重新创建此问题，但可能需要点击第二个不同的“打开地图”按钮才能重新创建问题*
> 
> 我已经完全坚持了几个星期，希望有人可以为我阐明这个问题。
> 
> > **这里也是一个可以使用的 jsFiddle。 [http://jsfiddle.net/hmQZk/3/](http://jsfiddle.net/hmQZk/3/)**

* * *

> 非常感谢您提前！
> 
> WizzyBoom

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:37:03.770

您的问题在于 popupbeforeposition 状态和行：

```
 $('#popupMap iframe').attr('src', 'http://map.matchstickcrew.com/showMap.html?latlng=' + latlng); 
```

我已将其删除并将其放入：

```
$('.btnShowMap').on('click', function() { 
    latlng = $(this).attr('data-latlng'); 
    $('#popupMap iframe').attr('src', 'http://map.matchstickcrew.com/showMap.html?latlng=' + latlng);
}); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/hmQZk/5/](http://jsfiddle.net/Gajotres/hmQZk/5/)

但是如果你想听我的建议，你应该放弃这个 iframe 解决方案并切换到[gMap v3 api](http://code.google.com/p/jquery-ui-map/wiki/Examples)。基本上你会在不使用 iframe 作为代理的情况下得到同样的结果。

# php - 带有文件信息验证的错误消息

> ID：15646942
> 
> 赞同：0
> 
> 时间：2013-03-26T20:39:32.377
> 
> 标签：php, validation, fileinfo

我收到错误消息，使用下面的 infofile 脚本来验证上传的文件是否为 pdf 并通过 phpmailer 发送。

第 66 行是“默认：”所在的位置。如果我删除默认值，下一行将变为错误，依此类推。不知道脚本有什么问题。有人可以帮忙吗。谢谢。

> 解析错误：语法错误，第 66 行 /test.php 中的意外“默认”（T_DEFAULT）

```
if ($_FILES['upload']['error'] !== UPLOAD_ERR_OK) {
die("Upload failed" . $_FILES['upload']['error']);
}
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime = finfo_file($finfo, $_FILES['upload']['tmp_name']);
$ok = false;
switch($mime) {
case 'application/pdf'
default:
   die("not permitted file type");
 $ok = true;
    foreach($_FILES['upload']['tmp_name'] as $uploadfile) 
    $mail->AddAttachment($uploadfile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:42:13.620

您在第一个 (non-default) 之后错过了冒号`case`。应该：

```
switch($mime) {
case 'application/pdf':
//                    ^
default: 
```

另外：我不确定在第一种情况下你想发生什么，但如果这是允许的情况，你也应该`break`在这种`default`情况下使用。否则解释器也会执行它（或它之后的任何其他情况）。

# python - 给定正则表达式的附加长度检查

> ID：15646961
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:40:32.660
> 
> 标签：python, regex

我有以下正则表达式：

```
valueRegex = re.compile('^(?P<DevID>.{2})(?P<CMD>TMPA|BATT)(?P<Value>-?[\d\.]+)-*$', re.I) 
```

现在，我想另外检查给定字符串的确切长度是否为 11 个字符。通常，这不是问题，但在这种情况下，我不知道如何实现它。几次尝试都没有奏效，我没有想法。：/

也许，我只是看不到非常简单的解决方案:)

这是我需要检查字符串的函数：

```
def parseMessages(llapMsg):
    rawMsgs = llapMsg.split('a')
    result = []

    data = [valueRegex.match(val) for val in rawMsgs]

    for val in data:
        if val is not None:
            result.append(val.groupdict())

    return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:48:55.677

*之后*只测试比赛的长度会更容易。

使用可选`-?`部分，再加上表达式中的 the`+`和`*`multipliers，将其更改为匹配 11 个字符将是......棘手的。

您可以使用`MatchObject` `.start()`and`.end()`方法快速访问匹配的长度：

```
for val in data:
    if val is not None and (val.end() - val.start()) == 11:
        result.append(val.groupdict()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:47:27.980

您可以在列表理解中添加您需要的其他检查。因此，您可以执行以下操作：

```
data = [valueRegex.match(val) != None and len(val) == 11 for val in rawMsgs] 
```

然后，当您浏览列表时，值将是`True`or `False`，因此您只想检查值本身：

```
for val in data:
    if val:
        ... 
```

# c - 越界访问数组有多危险？

> ID：15646973
> 
> 赞同：233
> 
> 时间：2013-03-26T20:41:30.020
> 
> 标签：c, arrays, memory

访问超出其边界的数组（在 C 中）有多危险？有时可能会发生我从数组外部读取的情况（我现在明白我会访问程序的其他部分甚至超出该部分使用的内存），或者我试图为数组外部的索引设置一个值。该程序有时会崩溃，但有时只是运行，只会给出意想不到的结果。

现在我想知道的是，这到底有多危险？如果它损坏了我的程序，那还不错。另一方面，如果它破坏了我的程序之外的某些东西，因为我以某种方式设法访问了一些完全不相关的内存，那么我想这是非常糟糕的。我读了很多“任何事情都可能发生”、[“分段可能是最不严重的问题”](https://stackoverflow.com/questions/8313852/what-happens-if-my-pointer-crosses-the-array-bounds)、“你的硬盘可能会变成粉红色，而独角兽可能会在你的窗户下唱歌”，这些都很好，但真正的危险是什么？

我的问题：

1.  除了我的程序之外，从数组外部读取值会损坏任何东西吗？我想只看东西不会改变任何东西，或者它会改变我碰巧到达的文件的“上次打开时间”属性吗？
2.  除了我的程序之外，在数组之外设置值会损坏任何东西吗？从这个 [Stack Overflow question](https://stackoverflow.com/questions/671703/array-index-out-of-bound-in-c)我收集到可以访问任何内存位置，没有安全保证。
3.  我现在从 XCode 中运行我的小程序。这是否为我的程序提供了一些额外的保护，使其无法到达自己的内存之外？它会伤害 XCode 吗？
4.  关于如何安全地运行我固有的错误代码的任何建议？

我使用 OSX 10.7、Xcode 4.6。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-26T21:20:23.557

就 ISO C 标准（语言的官方定义）而言，访问超出其边界的数组具有“*未定义行为*”。这句话的字面意思是：

> 使用不可移植或错误程序结构或错误数据时的行为，本国际标准对此没有要求

非规范性说明对此进行了扩展：

> 可能的未定义行为范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出的诊断消息）。

这就是理论。现实是什么？

在“最佳”情况下，您将访问一些内存，这些内存要么由您当前正在运行的程序拥有（这可能导致您的程序行为异常），要么*不*属于您当前正在运行的程序（这可能会导致您的程序因分段错误而崩溃）。或者您可能会尝试写入您的程序拥有的内存，但它被标记为只读；这也可能会导致您的程序崩溃。

这是假设您的程序在试图保护同时运行的进程彼此之间的操作系统下运行。如果您的代码在“裸机”上运行，比如它是操作系统内核或嵌入式系统的一部分，那么就没有这种保护；你的行为不端的代码应该提供这种保护。在这种情况下，损坏的可能性要大得多，在某些情况下，包括对硬件（或附近的事物或人）的物理损坏。

即使在受保护的操作系统环境中，保护也不总是 100%。例如，存在允许非特权程序获得 root（管理）访问权限的操作系统错误。即使拥有普通用户权限，故障程序也会消耗过多的资源（CPU、内存、磁盘），可能会导致整个系统瘫痪。许多恶意软件（病毒等）利用缓冲区溢出来获得对系统的未经授权的访问。

（一个历史例子：我听说在一些带有[核心内存](http://en.wikipedia.org/wiki/Core_memory)的旧系统上，在紧密循环中重复访问单个内存位置可能会导致该内存块融化。其他可能性包括破坏 CRT 显示器，并移动读取/用驱动器柜的谐波频率写入磁盘驱动器的磁头，使其穿过桌子并掉到地板上。）

而且总是有[天网](http://en.wikipedia.org/wiki/Skynet_(Terminator))需要担心。

底线是这样的：如果您可以编写一个程序来*故意*做坏事，那么至少从理论上讲，一个有缺陷的程序可能会*意外*地做同样的事情。

实际上，在 MacOS X 系统上运行的有缺陷的程序*不太*可能发生比崩溃更严重的事情。但是不可能*完全*防止有缺陷的代码做坏事。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-26T20:59:29.707

通常，当今的操作系统（无论如何都是流行的）使用虚拟内存管理器在受保护的内存区域中运行所有应用程序。事实证明，简单地读取或写入存在于已分配/分配给您的进程的区域之外的真实空间中的位置并不是非常容易（本身）。

直接回答：

1.  读取几乎不会直接损坏另一个进程，但是如果您碰巧读取了用于加密、解密或验证程序/进程的 KEY 值，它可能会间接损坏一个进程。如果您根据正在阅读的数据做出决定，那么越界读取可能会对您的代码产生一些不利/意外的影响

2.  通过写入内存地址可访问的位置来真正损坏某些东西的唯一方法是，如果您正在写入的内存地址实际上是硬件寄存器（实际上不是用于数据存储而是用于控制某些硬件的位置） ) 不是 RAM 位置。事实上，除非您正在编写一些不可重写的一次性可编程位置（或类似性质的东西），否则您通常仍然不会损坏某些东西。

3.  通常从调试器内部运行以调试模式运行代码。在调试模式下运行确实倾向于（但并非总是）在您做了一些被认为不合时宜或完全非法的事情时更快地停止您的代码。

4.  永远不要使用宏，使用已经内置数组索引边界检查的数据结构，等等......

**补充** 我应该补充一点，上述信息实际上仅适用于使用带有内存保护窗口的操作系统的系统。如果为嵌入式系统或什至使用没有内存保护窗口（或虚拟寻址窗口）的操作系统（实时或其他）的系统编写代码，则在读取和写入内存时应更加谨慎。同样在这些情况下，应始终采用 SAFE 和 SECURE 编码实践来避免安全问题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-27T11:50:41.333

不检查边界会导致丑陋的副作用，包括安全漏洞。丑陋的其中之一是[任意代码执行](http://en.wikipedia.org/wiki/Arbitrary_code_execution)。在经典示例中：如果您有一个固定大小的数组，并用于`strcpy()`将用户提供的字符串放在那里，用户可以给您一个溢出缓冲区并覆盖其他内存位置的字符串，包括当您的函数时 CPU 应该返回的代码地址完成。

这意味着您的用户可以向您发送一个字符串，该字符串将导致您的程序本质上调用`exec("/bin/sh")`，这将把它变成 shell，在您的系统上执行他想要的任何东西，包括收集您的所有数据并将您的机器变成僵尸网络节点。

有关如何做到这一点的详细信息，请参阅[Smashing The Stack For Fun and Profit 。](http://insecure.org/stf/smashstack.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-26T20:54:00.227

你写：

> 我读了很多“任何事情都可能发生”、“分段可能是最不严重的问题”、“你的硬盘可能会变成粉红色，而独角兽可能会在你的窗下唱歌”，这些都很好，但真正的危险是什么？

让我们这么说吧：装枪。将它指向窗外，没有任何特别的目标和射击。有什么危险？

问题是你不知道。如果您的代码覆盖了导致程序崩溃的内容，那您很好，因为它会将程序停止到定义的状态。但是，如果它没有崩溃，那么问题就会开始出现。哪些资源在您的程序的控制之下，它可能对它们做什么？我知道至少有一个主要问题是由这种溢出引起的。问题出在一个看似毫无意义的统计函数中，它弄乱了生产数据库的一些不相关的转换表。结果是之后进行了一些***非常***昂贵的清理工作。实际上，如果这个问题会格式化硬盘，它会更便宜，更容易处理......换句话说：粉红色的独角兽可能是你最小的问题。

您的操作系统将保护您的想法是乐观的。如果可能的话，尽量避免写越界。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-26T20:50:28.903

不以 root 或任何其他特权用户身份运行您的程序不会损害您的任何系统，因此通常这可能是一个好主意。

通过将数据写入某个随机内存位置，您不会直接“损坏”计算机上运行的任何其他程序，因为每个进程都在其自己的内存空间中运行。

如果您尝试访问任何未分配给您的进程的内存，操作系统将停止您的程序执行，并出现分段错误。

因此，直接（无需以 root 身份运行并直接访问 /dev/mem 之类的文件）不会有您的程序会干扰操作系统上运行的任何其他程序的危险。

尽管如此 - 可能这就是你听说过的危险 - 通过偶然盲目地将随机数据写入随机内存位置，你肯定会损坏你能够损坏的任何东西。

例如，您的程序可能想要删除由存储在程序中某处的文件名给出的特定文件。如果您不小心覆盖了存储文件名的位置，您可能会删除一个非常不同的文件。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-26T20:54:09.777

`NSArray`s in Objective-C are assigned a specific block of memory. Exceeding the bounds of the array means that you would be accessing memory that is not assigned to the array. This means:

1.  This memory can have any value. There's no way of knowing if the data is valid based on your data type.
2.  This memory may contain sensitive information such as private keys or other user credentials.
3.  The memory address may be invalid or protected.
4.  The memory can have a changing value because it's being accessed by another program or thread.
5.  Other things use memory address space, such as memory-mapped ports.
6.  Writing data to unknown memory address can crash your program, overwrite OS memory space, and generally cause the sun to implode.

From the aspect of your program you always want to know when your code is exceeding the bounds of an array. This can lead to unknown values being returned, causing your application to crash or provide invalid data.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-27T01:33:52.180

当你测试你的代码时，你可能想尝试在[Valgrind](http://valgrind.org/)[`memcheck`](http://valgrind.org/docs/manual/mc-manual.html#mc-manual.overview)中使用该工具——它不会在堆栈帧中捕获单个数组边界违规，但它应该会捕获许多其他类型的内存问题，包括那些会导致微妙、更广泛的内存问题单个功能范围之外的问题。

从手册：

> Memcheck 是一个内存错误检测器。它可以检测以下 C 和 C++ 程序中常见的问题。
> 
> *   访问您不应该访问的内存，例如溢出和未运行堆块、溢出堆栈顶部以及在内存被释放后访问内存。
> *   使用未定义的值，即尚未初始化的值，或从其他未定义的值派生的值。
> *   不正确地释放堆内存，例如双重释放堆块，或 malloc/new/new[] 与 free/delete/delete[] 的不匹配使用
> *   在 memcpy 和相关函数中重叠 src 和 dst 指针。
> *   内存泄漏。

**ETA：**不过，正如 Kaz 的回答所说，它不是灵丹妙药，而且并不总是提供最有用的输出，尤其是当您使用*令人兴奋*的访问模式时。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-04T01:53:20.837

如果您曾经进行过系统级编程或嵌入式系统编程，那么如果您写入随机存储器位置，可能会发生非常糟糕的事情。较旧的系统和许多微控制器使用内存映射 IO，因此写入映射到外围寄存器的内存位置可能会造成严重破坏，尤其是在异步完成的情况下。

一个例子是对闪存进行编程。通过将特定的值序列写入芯片地址范围内的特定位置，可以启用存储芯片上的编程模式。如果在此过程中另一个进程要写入芯片中的任何其他位置，则会导致编程周期失败。

在某些情况下，硬件将环绕地址（地址的最高有效位/字节被忽略），因此写入超出物理地址空间末尾的地址实际上会导致数据被写入事物的中间。

最后，像 MC68000 这样的旧 CPU 可以锁定到只有硬件重置才能让它们再次运行的程度。几十年来一直没有处理它们，但我相信它是在尝试处理异常时遇到总线错误（不存在的内存）时，它会简单地停止，直到硬件复位被断言。

我最大的建议是一个产品的公然插件，但我对它没有个人兴趣，我与他们没有任何关系 - 但基于几十年的 C 编程和可靠性至关重要的嵌入式系统，Gimpel 的 PC Lint 不仅会检测到这些错误，它还会通过*不断地*对你的坏习惯喋喋不休，让你成为一个更好的 C/C++ 程序员。

如果您可以从某人那里获得副本，我还建议您阅读 MISRA C 编码标准。我没有看到任何最近的，但在过去的日子里，他们很好地解释了为什么你应该/不应该做他们所涵盖的事情。

不知道你，但大约第二次或第三次我从任何应用程序中得到一个核心转储或挂断，我对任何生产它的公司的看法下降了一半。第 4 次或第 5 次，无论包裹是什么，都变成了架子，我用木桩穿过包裹/光盘的中心，它进来只是为了确保它永远不会回来困扰我。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-26T23:02:44.597

我正在使用 DSP 芯片的编译器，该芯片故意生成代码，该代码从 C 代码中访问超出数组末尾的代码，而 C 代码没有！

这是因为循环是结构化的，因此迭代结束时会为下一次迭代预取一些数据。因此，在最后一次迭代结束时预取的数据从未实际使用过。

编写这样的 C 代码会调用未定义的行为，但这只是标准文档中的一种形式，它涉及最大的可移植性。

更常见的是，越界访问的程序没有得到巧妙的优化。这简直是​​越野车。该代码获取一些垃圾值，并且与上述编译器的优化循环不同，该代码然后在后续计算中*使用*该值，从而破坏它们。

捕获这样的错误是值得的，因此即使仅仅因为这个原因，也值得将行为设为未定义：以便运行时可以生成诊断消息，如“main.c 的第 42 行中的数组溢出”。

在具有虚拟内存的系统上，可能碰巧分配了一个数组，使得后面的地址位于虚拟内存的未映射区域中。然后访问将轰炸程序。

> 顺便说一句，请注意，在 C 语言中，我们可以创建一个指针，该指针位于数组末尾之后。并且这个指针必须比任何指向数组内部的指针都要大。这意味着 C 实现不能将数组放在内存的末尾，因为加号地址会环绕并且看起来比数组中的其他地址要小。

然而，访问未初始化或越界值有时是一种有效的优化技术，即使不是最大程度地可移植。这就是为什么 Valgrind 工具在访问发生时不报告对未初始化数据的访问，但仅在以后以某种可能影响程序结果的方式使用该值时才报告。您会得到类似“xxx:nnn 中的条件分支取决于未初始化的值”之类的诊断信息，并且有时很难找到它的来源。如果所有此类访问都立即被捕获，那么编译器优化代码以及正确手动优化的代码将会产生很多误报。

说到这一点，我正在使用来自供应商的一些编解码器，当它移植到 Linux 并在 Valgrind 下运行时会发出这些错误。但是供应商让我相信只有**几位**正在使用的值实际上来自未初始化的内存，并且这些位被逻辑小心地避免了。只有值的好位被使用，Valgrind 没有能力追踪到单个位。未初始化的材料来自读取编码数据位流末尾的单词，但代码知道流中有多少位，并且不会使用比实际更多的位。由于超出位流数组末尾的访问不会对 DSP 架构造成任何损害（数组后没有虚拟内存，没有内存映射端口，并且地址不换行），因此它是一种有效的优化技术。

“未定义的行为”实际上并没有多大意义，因为根据 ISO C，简单地包括一个未在 C 标准中定义的标头，或调用未在程序本身或 C 标准中定义的函数，都是未定义的示例行为。未定义的行为并不意味着“地球上的任何人都没有定义”，只是“ISO C 标准没有定义”。但是，当然，有时未定义的行为确实*不是*由任何人定义的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-26T20:49:03.390

除了您自己的程序之外，我认为您不会破坏任何东西，在最坏的情况下，您将尝试从与内核未分配给您的进程的页面相对应的内存地址读取或写入，从而生成适当的异常并被杀死（我的意思是，你的过程）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-24T16:01:50.730

具有两个或更多维度的数组提出了超出其他答案中提到的考虑因素。考虑以下函数：

```
char arr1[2][8];
char arr2[4];
int test1(int n)
{
  arr1[1][0] = 1;
  for (int i=0; i<n; i++) arr1[0][i] = arr2[i];      
  return arr1[1][0];
}
int test2(int ofs, int n)
{
  arr1[1][0] = 1;
  for (int i=0; i<n; i++) *(arr1[0]+i) = arr2[i];      
  return arr1[1][0];
} 
```

gcc 处理第一个函数的方式不允许尝试写入 arr[0][i] 可能会影响 arr[1][0] 的值，并且生成的代码无法返回除硬编码值 1。尽管标准将 的含义定义`array[index]`为精确等同于`(*((array)+(index)))`，但在涉及对数组类型的值使用 [] 运算符的情况下，gcc 似乎以不同的方式解释数组边界和指针衰减的概念，而不是那些使用显式的指针算术。

# iphone - 从javascript调用objective c方法

> ID：15646977
> 
> 赞同：0
> 
> 时间：2013-03-26T20:41:38.860
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

我已经实现了一个 simpleHttpServer，它运行良好。我有一个 index.html 页面，当它们连接到服务器（iPhone）时，它会显示在客户端浏览器上。有没有办法从这个 index.html 页面访问 Objective-C 方法。

# spring-mvc - 屏幕级和字段级规则实现 Spring MVC

> ID：15646981
> 
> 赞同：0
> 
> 时间：2013-03-26T20:41:55.250
> 
> 标签：spring-mvc, user-roles

我的 Web 应用程序正在使用 Spring MVC。每个用户都有多个角色。每个角色都有一个访问级别。访问级别定义用户是否有权访问特定屏幕。它还定义了在特定屏幕上可以修改哪些字段？

访问级别、屏幕和字段之间的关系现在在一个表中定义。这真的很复杂，添加、删除、更新的唯一方法是通过脚本。

有人可以建议我用其他方法吗？

问候，帕万。

# asp.net - 根据请求在 SQL Server 上创建重要的数据库

> ID：15646984
> 
> 赞同：2
> 
> 时间：2013-03-26T20:41:56.690
> 
> 标签：asp.net, sql-server

我在一个命令中使用从 ASP.NET 作为批处理发送的 17000 行代码长脚本来创建新数据库缓慢的问题。问题是在高峰时段执行此脚本有时需要 20 多秒。如果我在 SQL Server Management Studio 中运行此脚本，则需要 2 秒。

根据请求创建数据库、将脚本放入存储过程、数据库克隆、预创建以及重命名数据库的最佳实践是什么？我们需要确保它与负载下的并发环境兼容。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:51:25.123

Sending 17000 lines over the wire to a SQL server seems like an awful amount of overhead and slow as all get out. So does using the SQL client for ASP.NET to do anything like this.

Yes, I am in favor of you using a stored proc to do this. Not too sure about the DB cloning and re-naming operation; I would bet you could get away from that by using parameters to your stored proc to define that.

# ios - NSArray 为 null 而对象具有值

> ID：15646986
> 
> 赞同：-1
> 
> 时间：2013-03-26T20:42:02.250
> 
> 标签：ios, objective-c

以下代码让我发疯：

```
-(void)fetchEventDetails
{    
    NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://domain.com/ios/read.php"]];
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];

    for(id object in dict){
    //NSLog(@"city : %@",object[@"city"]);
//        NSLog(@"title : %@",object[@"title"]);
//        NSLog(@"description : %@",object[@"description"]);
        [_eventsTitles addObject:object[@"title"]];
        [_eventsCity addObject:object[@"city"]];
    }

    NSLog(@"Array : %@", _eventsCity);
} 
```

因此，如果我取消注释 for 循环的第一行，它会打印所有城市。如果我打印 NSArray，它显示为空。两者在.h 文件中的定义方式相同，即eventsTitles 和eventsCity。有什么问题？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:44:12.683

你在其他地方定义`_eventsTitles`吗`_eventsCity`？

尝试这个：

```
-(void)fetchEventDetails
{    
    NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://domain.com/ios/read.php"]];
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];

    _eventsTitles = [[NSMutableArray alloc] init];
    _eventsCity = [[NSMutableArray alloc] init];
    for(id object in dict){
    //NSLog(@"city : %@",object[@"city"]);
//        NSLog(@"title : %@",object[@"title"]);
//        NSLog(@"description : %@",object[@"description"]);
        [_eventsTitles addObject:object[@"title"]];
        [_eventsCity addObject:object[@"city"]];
    }

    NSLog(@"Array : %@", _eventsCity);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:45:29.730

你有没有初始化`self.eventsCity`和`self.eventsTitles`空`NSMutableArray`s？简单地将`@properties`它们声明为 `nil。

您也应该不将它们作为实例变量引用，而是作为`self.arrayName`. 您也可以通过这种方式进行惰性实例化，因此您不会遇到此问题 =)

编辑：添加惰性实例化代码，这样你就有了我的意思的例子：

```
- (NSMutableArray)eventsCity
{
    if (_eventsCity == nil)
       _eventsCity = [[NSMutableArray alloc] init];
    }
    return _eventsCity;
} 
```

使用它，如果您在引用时还没有创建一个空数组，它将为您创建一个空数组`self.eventsCity`

# asp.net-mvc - 为 ASP.NET MVC 网站推荐的博客引擎

> ID：15646988
> 
> 赞同：3
> 
> 时间：2013-03-26T20:42:09.220
> 
> 标签：asp.net-mvc, blogs

我正在用 ASP.NET MVC 4 构建一个网站。我想对该网站进行大量控制。出于这个原因，我没有使用完整的 CMS。但是，我想将博客引擎集成到我的网站中。

对于 ASP.NET MVC 站点，最推荐的博客引擎是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:57:01.720

[oxite](http://oxite.codeplex.com/)它是一个 mvc 博客引擎。还有很多其他的博客使用网络表单，实现起来并不难

# jsp - JPA：如何在 JSP 页面中显示 OneToMany 数据？

> ID：15646992
> 
> 赞同：0
> 
> 时间：2013-03-26T20:42:21.213
> 
> 标签：jsp, jakarta-ee, servlets, jpa, jstl

我必须上课： Student 和 Address ，具有 OneToMany 关系，所以每个学生都可以有一个或多个地址，

现在我尝试在 JSP 页面中显示给定的学生详细信息（其学生 + 其地址详细信息），但仅显示学生信息而不显示其地址。

这是 sevlet 页面：

```
 @WebServlet(name = "TestServlet", urlPatterns = {"/TestServlet"})
          public class TestServlet extends HttpServlet {
        @EJB
        private StudentDaoLocal studentDao;

        protected void processRequest(HttpServletRequest request, HttpServletResponse response)
                throws ServletException, IOException {

            String studentIdStr = request.getParameter("studentId");

            if (studentIdStr != null && !studentIdStr.equals("")) {
                int studentId = Integer.parseInt(studentIdStr);

                Student student = studentActions(studentId);

                request.setAttribute("student", student);
                request.getRequestDispatcher("info.jsp").forward(request, response);
            }

        }

        private Student studentActions(int studentId)
                throws ServletException, IOException {
            Student student;
            student = studentDao.getStudent(studentId);

            return student;
        } 
```

JSP 页面：

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    </head>
        <body>
            <h1> Student Details</h1>

                   Student Details
                <br>
                <table border="1">
                    <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Year Level</th> 
                    </tr>

                     <c:forEach>
                        <tr>  
                        <td>${student.studentId}</td>
                        <td>${student.firstname}</td>
                        <td>${student.lastname}</td>
                        <td>${student.yearLevel}</td>
                        </tr>
                </c:forEach>

            </table>  

    </br>
            Student'Adresse
            <table border="1">
                <tr>
                <th>Street</th>
                <th>City</th>
                <th>Country</th>
                </tr>

                <h1>${student.addresses}</h1>  

                     <c:forEach items="${student.addresses}" var="address"> 
                         <tr> 
                             <td>${address.street}</td> 
                             <td>${address.city}</td> 
                             <td>${address.country}</td> 
                         </tr> </c:forEach>
            </table> 

    <br>
</body>
</html> 
```

学生班：

```
 @Entity
     @Table
     @NamedQueries({@NamedQuery(name="Student.getAll",query="SELECT e FROM Student e") })

public class Student implements Serializable{
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column
    private int studentId;
    @Column
    private String firstname;
    @Column
    private String lastname;
    @Column
    private int yearLevel;
    @OneToMany(mappedBy="student", cascade=CascadeType.ALL)
    private List<Address> addresses;

public int getStudentId() {
    return studentId;
}

public void setStudentId(int studentId) {
    this.studentId = studentId;
}

public String getFirstname() {
    return firstname;
}

public void setFirstname(String firstname) {
    this.firstname = firstname;
}

public String getLastname() {
    return lastname;
}

public void setLastname(String lastname) {
    this.lastname = lastname;
}

public int getYearLevel() {
    return yearLevel;
}

public void setYearLevel(int yearLevel) {
    this.yearLevel = yearLevel;
}

public List<Address> getAddresses() {
    return addresses;
}

public void setAddresses(List<Address> addresses) {
    this.addresses = addresses;
}

public Student(int studentId, String firstname, String lastname, int yearLevel) {
    this.studentId = studentId;
    this.firstname = firstname;
    this.lastname = lastname;
    this.yearLevel = yearLevel;
}

public Student(int studentId, String firstname, String lastname, int yearLevel, List<Address> addresses) {
    this.studentId = studentId;
    this.firstname = firstname;
    this.lastname = lastname;
    this.yearLevel = yearLevel;
    this.addresses = addresses;
}

public Student(){}

public void addAddress(Address address){
    this.addresses.add(address);
    if(address.getStudent() != this){
        address.setStudent(this);
    }
   }
  } 
```

和地址类：

```
 @Entity
        @Table
        public class Address implements Serializable{
        @Id
        @GeneratedValue(strategy=GenerationType.AUTO)
        @Column
        private int addressId;
        @ManyToOne(fetch=FetchType.LAZY)
        @JoinColumn(name="studentId")
        private Student student;
        @Column
        private String street;
        @Column
        private String city;
        @Column
        private String country;

public Address(){}
public Address(int addressId, String street, String city, String country) {
    this.addressId = addressId;
    this.street = street;
    this.city = city;
    this.country = country;
}

public Address(int addressId, Student student, String street, String city, String country) {
    this.addressId = addressId;
    this.student = student;
    this.street = street;
    this.city = city;
    this.country = country;
}

public Student getStudent() {
    return student;
}

public void setStudent(Student student) {
    this.student = student;
}

public int getAddressId() {
    return addressId;
}

public void setAddressId(int addressId) {
    this.addressId = addressId;
}

public String getStreet() {
    return street;
}

public void setStreet(String street) {
    this.street = street;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}

public String getCountry() {
    return country;
}

public void setCountry(String country) {
    this.country = country;
}

@Override
public String toString() {
    return street + ", " + city + ", " + country;
}
public boolean isEmptyAddress(){
    return this.getStreet().isEmpty() && this.getCity().isEmpty() && this.getCountry().isEmpty();
}
public void updateAddress(Address address){
    this.street = address.street;
    this.city = address.city;
    this.country = address.country;
} 
```

这就是问题所在；地址部分未加载。

1: - 那么现在我如何打印 servlet 中的地址

那么现在如何在将学生对象传递给jsp之前首先检查地址是否正在加载？一位朋友告诉我，我可以在 servlet 中打印地址，但我不知道该怎么做。

2： - JSP 代码可以显示学生的地址吗？

（两者之间，我是 Java EE 世界的新手，所以......）

![JSP 页面](../Images/6b7370d7aa8f98c775a726345d579001.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:06:28.893

要查看是否正在填充地址，您可以在 servlet 中执行此操作：

```
Student student = studentActions(studentId);
if(student.getAddresses() != null) {
    for(Address address : student.getAddresses()) {
        System.out.println(address);
    }
} 
```

jsp代码在打印学生信息的部分有一个额外的`<c:forEach>`标签，应该删除。外部`<c:forEach>`没有指定`collection`or`var`属性，如果这是您的实际代码的方式，它不会打印任何内容。

```
<c:forEach>
    <tr> 
        <c:forEach> <!-- REMOVE THIS -->
            <td>${student.studentId}</td>
            <td>${student.firstname}</td>
            <td>${student.lastname}</td>
            <td>${student.yearLevel}</td>
    </tr>
</c:forEach> 
```

# ios - 在两点之间来回滑动按钮

> ID：15646997
> 
> 赞同：1
> 
> 时间：2013-03-26T20:42:31.927
> 
> 标签：ios, objective-c, uipangesturerecognizer

我正在尝试使用`UIPanGestureRecognizer`在两点之间滑动按钮（如音量滑块）。以下代码允许我来回滑动按钮，但按钮不会每次都停在同一点（即，当我向右滑动时，有时它会停在它应该停的地方，有时它会停+/ - 距离应有的位置 10 个像素）。我究竟做错了什么？

```
- (void)handlePan:(UIPanGestureRecognizer *)recognizer {

    CGPoint location = [recognizer locationInView:self];

    // 1
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        // if the gesture just started, record current center location
        _originalCenter = self.sliderButton.center;
    }

    // 2
    if (recognizer.state == UIGestureRecognizerStateChanged) {
        // move the checkmarks and main label based on touch
        //CGPoint translation = [recognizer translationInView:self];

        // move slider button
        if (location.x < 70 + 178 && location.x > 70) {
            self.sliderButton.center = CGPointMake(location.x,  _originalCenter.y);
        } 

        // determine whether the item has been dragged far enough to initiate a removal
        if (location.x > 170 + 70) {
            _draggedToEnd = YES;
        } else {
            _draggedToEnd = NO;
        }
    }

    // 3
    if (recognizer.state == UIGestureRecognizerStateEnded) {

        if (_draggedToEnd) {
            // notify the delegate that this item should be deleted
            [self buttonDraggedToEnd];
        }

    }
} 
```

# javascript - 我怎样才能摆脱这段代码中的重复

> ID：15646998
> 
> 赞同：0
> 
> 时间：2013-03-26T20:42:35.987
> 
> 标签：javascript, jquery

我的代码中有很多 $(this).css() ......我是 JS 新手，所以我不确定删除这种重复并让我的代码干净的最佳方法是什么......

这是我的小提琴的链接 [http://jsfiddle.net/d0okie0612/7Y2Qp/](http://jsfiddle.net/d0okie0612/7Y2Qp/)

```
 $(".btn-pvPanels").on('click', function(event) {
  var selected;
  selected = $(this).val();
  if(selected === "on-panel") {
  $(this).css({
    'background': 'orange', 
    'color': 'white'
  });
  $(this).parent().find('.btn-off').css({
    'background': '#F1F1F1', 
    'color': '#8E8D8D'
  });
  $('.aon_poff').fadeIn('slow');
  } 

else if(selected === "off-panel")  {
  $(this).css({
    'background': 'orange', 
    'color': 'white'
  });
  $(this).parent().find('.btn-on').css({
    'background': '#F1F1F1', 
    'color': '#8E8D8D'
  });
  $('.aon_poff').fadeOut('slow');
  }

else if(selected === "on-accessories")  {
  $(this).css({
    'background': 'orange', 
    'color': 'white'
  });
  $(this).parent().find('.btn-on').css({
    'background': '#F1F1F1', 
    'color': '#8E8D8D'
  });

  }

else if(selected === "on-accessories" && "on-panel")  {
  $(this).css({
    'background': 'orange', 
    'color': 'white'
  });
  $(this).parent().find('.btn-on').css({
    'background': '#F1F1F1', 
    'color': '#8E8D8D'
  });
     alert('hey')
  }

});

   $(".btn-accessories").on('click', function(event) {
var selected;
selected = $(this).val();
if(selected === "on-accessories") {
  $(this).css({
    'background': 'orange', 
    'color': 'white'
  });
  $(this).parent().find('.btn-off').css({
    'background': '#F1F1F1', 
    'color': '#8E8D8D'
  });
  $('.aoff_pon').fadeIn('slow');
  } 

else if(selected === "off-accessories")  {
  $(this).css({
    'background': 'orange', 
    'color': 'white'
  });
  $(this).parent().find('.btn-on').css({
    'background': '#F1F1F1', 
    'color': '#8E8D8D'
  });
  $('.aoff_pon').fadeOut('slow');
  }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:45:29.680

使用 CSS 类名来设置样式：

```
.selected { 
    background-color: orange;
    color: white;
}
.deselected {
    background-color: #F1F1F1;
    color: #8E8D8D;
} 
```

现在代替设置`.css()`，您可以使用：

`addClass('selected')`和`removeClass('selected')`橙色背景。

`addClass('deselected')`和`removeClasS('deselected')`灰色背景。