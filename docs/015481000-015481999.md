# StackOverflow 问答 15481000-15481999

# svg - 用于 webkit wkhtmltopdf 或定义专色的 SVG 中的 ICC 颜色配置文件

> ID：15481004
> 
> 赞同：1
> 
> 时间：2013-03-18T15:47:11.840
> 
> 标签：svg, webkit, wkhtmltopdf

webkit/wkhtmltopdf 是否不支持 SVG 图像中填充颜色的 icc-color 配置文件？

我有一个颜色定义为的图像：

```
#e22e27 icc-color(U.S.-Web-Coated--SWOP--v2, 0.0558938, 0.95947204, 0.98716716, 0.00204471) 
```

哪个应该是红色的（并且在inkscape中）

但是，chrome（和其他浏览器）只是将其打开为黑色（我猜是因为它无法获得填充颜色？）而且 wkhtmltopdf 也显示为黑色。

有没有办法做到这一点？或者更具体地说，是否有任何方法可以在 SVG 中定义设备专色，以便最终的 PDF 可以具有专色红色（而不是 RGB 的复合色）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-14T12:43:23.673

如果您在删除 sRGB 值后在 Inkscape 0.92 中打开 SVG，`#e22e27`我希望您会看到黑色而不是红色。这是因为即使使用 CMYK 颜色选择器，Inkscape 也会从/向 SVG 文件读取和写入备用 sRGB 值。据我所知，原生 CMYK 支持仍在 Inkscape 的未来。

在开源的 PDF 渲染器中，mPDF 支持[通过 CMYK 值定义专色](https://github.com/mpdf/mpdf-examples/blob/development/example55_new_mPDF_v5-1_color_and_other_features.php)，还支持在 HTML 中嵌入 SVG 的子集，这表明它可以原生读取一些 SVG 语法。根据其 GitHub 项目中的第 39 期问题，对于完全开源的解决方案而言，这将是一个比完全不支持 CMYK 输出的 wkhtmltopdf 更好的起点。

在专有渲染器中，PDFreactor 支持将[CMYK 值从 SVG](http://www.pdfreactor.com/product/doc_html/index.html#SVG-CMYK)直接传递到渲染器，只要它们没有被光栅化，尽管语法似乎与 W3C SVG 规范不匹配并且没有 sRGB 回退，因此每个 SVG 都必须是特制。这对于源自 Inkscape 的简单图形来说非常容易；只需在您的 SVG 中替换例如：

```
style="fill:#e22e27 icc-color(U.S.-Web-Coated--SWOP--v2, 0.0558938, 0.95947204, 0.98716716, 0.00204471);fill-opacity:1;fill-rule:nonzero;stroke:none" 
```

仅使用 C、M、Y、K 值：

```
style="fill:cmyk(0.0558938, 0.95947204, 0.98716716, 0.00204471);fill-opacity:1;fill-rule:nonzero;stroke:none" 
```

我最近使用这种技术来尝试匹配 SVG 和 CSS 中为文档指定的 CMYK 值之间的颜色，例如徽标和字体颜色之间的颜色。有关新兴语法，请参阅*CSS 颜色模块级别 4 ；*`device-cmyk`与此同时，PDFreactor 使用非标准`cmyk`的 CSS 语法，如上面的 SVG 示例所示。

一般来说，我想知道在原生 CMYK SVG 中嵌入颜色配置文件的价值。也许假设是我们从 sRGB 值开始并需要它的近似值，但在我的工作流程中，我从 CMYK 值开始。我欢迎对此作出澄清。此外，仅仅因为印刷机、大陆或纸张发生了变化，重新创建每个 SVG 文件将相当耗时。

# excel - 与另一个单元格的值相关的单元格查找

> ID：15481007
> 
> 赞同：1
> 
> 时间：2013-03-18T15:47:15.687
> 
> 标签：excel

我正在开发一种用于教育的目标跟踪设备，但有点卡住了。到目前为止，我已经为孩子可以达到的每个子级别制作了一个工作表，并生成了孩子的目标作为每个子级别的第一个未实现的目标（值 0）。

我还进行了查询以返回孩子已完全达到的子级别。我现在需要通过查看他们实现的子级别并从下一个子级别引用目标列来生成子目标。

我试过这个：

=if(F2=WT, [=Sheet1!AE2, =if(Sheet1!F2=1C, 'Level 1B'!AE2, =(if(Sheet1!F2=1B, 'Level 1A'!AE2, 0))

但它说语法不正确。请问你能帮忙吗？我很感激我有点菜鸟，可能完全失败了，所以请耐心等待我！

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:09:15.190

您需要在文本部分周围加上双引号 ("")。

您还需要对括号进行一些修改。

最后，您只需要在公式的开头使用 = ，除非您想在公式内部比较部分。

```
=if(F2="WT", Sheet1!AE2, if(Sheet1!F2="1C", 'Level 1B'!AE2, if(Sheet1!F2="1B", 'Level 1A'!AE2, 0))) 
```

# android - Android 模拟器似乎不信任浏览器中的安全证书

> ID：15481011
> 
> 赞同：2
> 
> 时间：2013-03-18T15:47:29.720
> 
> 标签：android, ssl, android-emulator, certificate

所以我在安卓模拟器上运行了一些自动化测试。我有两个环境，我的开发 PC 运行 android 模拟器，我们的测试服务器运行 android 模拟器。当我打开模拟器和模拟器中的浏览器应用程序时，我可以毫无问题地导航到安全网站。（例如，谷歌邮件）。但是，在我的测试服务器环境中，我在证书应该受到信任的站点上看到证书错误。我缺少的证书是否有模拟器配置选项？模拟器是否需要连接到服务来验证证书并且没有访问权限？

![为了皮特的缘故，即使它是谷歌，SSL 证书也不是从受信任的身份验证中读取的。](../Images/40a02ed5f86b24786d5bc4a4b8e287e4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:53:32.693

确保在模拟器上正确设置了日期和时间。不正确的时间设置很可能会使证书无效，因为它不在有效期内。

# php - 即使 timeout = 0，缓存条目也会从 apc 缓存中消失

> ID：15481018
> 
> 赞同：0
> 
> 时间：2013-03-18T15:47:41.140
> 
> 标签：php, zend-framework, apc

我正在处理一个显示数据的页面，其中一些存储在 DB 中，另一些则从 API 中检索。为了限制 API 调用（我每天受限），我将 API 中的数据存储在缓存条目中。我使用 APC 来缓存我的数据。

首先我检查缓存中是否有对象。

```
$cacheEmpty = false;
if (($myData = Zend_Registry::get('MY_ZEND_CACHE')->load("myObject")) === false){
        //I have to use the API
        $cacheEmpty = true;
} 
```

然后当我处理数据时，如果我使用了 API，我会保存数据。

```
 if ($cacheEmpty){
    Zend_Registry::get('MY_ZEND_CACHE')->save($myData, "myObject", array(), 2592000); 
   } 
```

我可以看到 myObject 存储在缓存中。但随机（显然） myObject 从缓存中消失。我检查了保持为 0 的缓存完整计数。我总是有超过 25% 的可用内存。我已经搜索了有关该问题的信息，但没有任何帮助。

提前感谢您回答我的问题。

# asp.net - 从表单设置对象值

> ID：15481021
> 
> 赞同：0
> 
> 时间：2013-03-18T15:47:43.273
> 
> 标签：asp.net, .net, vb.net

我有以下代码根据用户在 Web 表单中选择的内容设置某些对象（CarsCourse）值。

该代码有效，但我的一位同事表示这是最糟糕的做法。但是，他无法提出任何建议。

那么有没有更好的方法来实现这一点？

谢谢

```
 If Not String.IsNullOrEmpty(tbDisplayName.Text) Then CarsCourse.DisplayName = tbDisplayName.Text
    If Not String.IsNullOrEmpty(tbDescription.Text) Then CarsCourse.Description = tbDescription.Text
    If Not String.IsNullOrEmpty(tbOfficialStartDate.Text) Then CarsCourse.OfficialStartDate = DateTime.Parse(tbOfficialStartDate.Text)
    If Not String.IsNullOrEmpty(tbOfficialEndDate.Text) Then CarsCourse.OfficialEndDate = DateTime.Parse(tbOfficialEndDate.Text)
    If Not String.IsNullOrEmpty(tbBtmDatepicker1.Text) Then CarsCourse.VisibleStartDate = DateTime.Parse(tbBtmDatepicker1.Text)
    If Not String.IsNullOrEmpty(tbBtmDatepicker2.Text) Then CarsCourse.VisibleEndDate = DateTime.Parse(tbBtmDatepicker2.Text)
    If Not String.IsNullOrEmpty(ddlDepartment.SelectedValue) Then CarsCourse.SecondarySpecialtyName = ddlDepartment.SelectedValue
    If Not String.IsNullOrEmpty(ddlOptionType.SelectedValue) Then CarsCourse.OptionType = ddlOptionType.SelectedValue
    If Not String.IsNullOrEmpty(ddlOfficialName.SelectedValue) Then CarsCourse.OfficialCourseID = Guid.Parse((ddlOfficialName.SelectedValue)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:40:19.950

我认为您的代码设计得不是很好。正确实现这一点的方法是使用*state*和*validation*。

所以主要你有一个表单，它保存一个对象的当前值。我建议将相应的对象*直接*绑定到 Web 表单。无论是 null 还是空，这些值都是实际*设置*的。

一旦用户按下 OK 按钮，就会在相应的对象上执行`Save()`or`Validate()`方法，并检查值的有效性。*如果验证失败，则取消*保存过程并告诉用户相应地更新他的输入。

# django - Django Admin list_display - 如何使用 list_display 从 JSON 字段中列出字典值

> ID：15481022
> 
> 赞同：2
> 
> 时间：2013-03-18T15:47:46.317
> 
> 标签：django, json, dictionary, admin

我想在 Django Admin list_display 中显示 JSON 字段中的特定值。

```
models.py:
class Foo(models.Model):
client = models.ForeignKey(Client, verbose_name="Kunde")

description = models.CharField(verbose_name=u'Titel', max_length=100)
description_file = models.FileField(verbose_name="Vorschau", upload_to='postings', blank=True, help_text=u'Vorschau/Endfassung')
accepted_by_client = models.BooleanField(verbose_name="abgenommen", help_text=u"")
needs_correction = models.BooleanField(verbose_name=u"Korrektur nötig", help_text=u"")
active = models.BooleanField(verbose_name="Publiziert", help_text=u"")
ctime = models.DateTimeField(verbose_name="Angelegt am", blank=True, null=True)
valid_until = models.DateField(verbose_name=u"gültig bis", blank=True, null=True, default = lambda: datetime.datetime.now()+datetime.timedelta(days=28) )
valid_from = models.DateField(verbose_name=u"gültig ab", blank=True, default=datetime.datetime.now ) 
link = models.CharField(verbose_name="Formular", max_length=255, blank=True, help_text="generierter Link zum Formular")
admin_notes = models.TextField(u'Notizen für Mitarbeiter', blank=True, help_text=u"")
client_notes = models.TextField(verbose_name=u"Notizen für Kunde", blank=True, help_text=u"")

context = JsonField()

def __unicode__(self):
    return self.client.company_name + ' : ' + str(self.id)

admin.py:

class FooAdmin(admin.ModelAdmin):
    #list view
    def apis(self, object):
        data = Foo.context['bar']
        return data

    list_display = (
        'id', 
        'client',
        'description', 
        'active', 'ctime', 
        'valid_until',
        'valid_from',
        'clickable_preview_link',
        'clickable_editor_link',
        'apis'
    )

admin.site.register(Foo, FooAdmin) 
```

我的问题是，我无法从 JSON 字段“上下文”访问单个值。我只收到一个空列。

我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:21:50.807

```
class FooAdmin(admin.ModelAdmin):
    #list view
    def apis(self, object):
        data = Foo.context['bar']
        return data

    list_display = (
        'id', 
        'client',
        'description', 
        'active', 'ctime', 
        'valid_until',
        'valid_from',
        'clickable_preview_link',
        'clickable_editor_link',
        'apis',
        'json_data'
    )

    def json_data(self, obj):
        for key, value in obj.context:
            return "{0}: {1}".format(key, value)
        return '' 
```

# java - AWT-EventQueue-0 错误

> ID：15481032
> 
> 赞同：0
> 
> 时间：2013-03-18T15:48:14.147
> 
> 标签：java, awt, keylistener

我已经编写了以下代码。如果输入的字符不是空格，基本上我想激活自动完成（在 RSyntaxTextArea 环境中）。一切都很顺利，但有时我会收到 AWT-EventQueue-0 错误。该程序仍将运行并运行，但会显示错误消息。

我的代码中还有其他元素，但我很确定它来自这一点添加的代码。这有什么特别的原因吗？当我将鼠标移动到第二个屏幕时，我注意到发生了这个错误。

```
public static CompletionProvider provider = createModelCompletionProvider();

public static AutoCompletion ac = new AutoCompletion(provider);

public static KeyListener ListenerTOntology = new KeyListener() {

@Override
public void keyPressed(KeyEvent e) {}

@Override
public void keyReleased(KeyEvent e) {}

@Override
public void keyTyped(KeyEvent e) {
dumpInfo("Typed", e);}

private void dumpInfo(String s, KeyEvent e) {
    char temp = e.getKeyChar();
    if(temp!=' ' )
   ac.doCompletion();}
}; 
```

错误信息：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at org.fife.ui.rtextarea.FoldIndicator.findOpenFoldClosestTo(FoldIndicator.java:162)
at org.fife.ui.rtextarea.FoldIndicator.access$300(FoldIndicator.java:60)
at org.fife.ui.rtextarea.FoldIndicator$Listener.mouseMoved(FoldIndicator.java:671)
at java.awt.AWTEventMulticaster.mouseMoved(AWTEventMulticaster.java:329)
at java.awt.Component.processMouseMotionEvent(Component.java:6550)
at javax.swing.JComponent.processMouseMotionEvent(JComponent.java:3339)
at java.awt.Component.processEvent(Component.java:6274)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4505)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:688)
at java.awt.EventQueue$3.run(EventQueue.java:686)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:702)
at java.awt.EventQueue$4.run(EventQueue.java:700)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T10:44:43.880

所以，我发现了造成这种情况的原因。您需要使用 CaretListener 而不是 KeyListener。由于 RSyntaxTextArea 不包含 DocumentListner。

# java - 如果 JUnit 测试失败则停止测试

> ID：15481034
> 
> 赞同：2
> 
> 时间：2013-03-18T15:48:31.090
> 
> 标签：java, android, unit-testing, junit, android-webview

我试图弄清楚**如何让我的 JUnits 测试按特定顺序运行，以及如果其中一个测试失败，则停止所有测试**。下面我只包含了一些简单的操作栏项目测试。我基本上要确保的是，当我通过命令行运行构建/测试时，如果其中一个测试失败，我希望测试停止。有什么建议吗？

```
public void testPreconditions() {
    assertNotNull(instrumentation);
    assertNotNull(mWeb);
    assertNotNull(mActivity);
}

protected void setUp() throws Exception {
    super.setUp();

    instrumentation = getInstrumentation();
    mActivity = getActivity();
    setActivityInitialTouchMode(false);
    mWeb = (WebView) mActivity
            .findViewById(com.jaisonbrooks.webview.R.id.webview_main);
    mMockWebViewClient = new MockWebViewClient();
    mWeb.setWebViewClient(mMockWebViewClient);
    mSettings = mWeb.getSettings();
}

public void testThatButtonReloadWorks() {
    final View view = mActivity
            .findViewById(com.jaisonbrooks.webview.R.id.menu_refresh);
    mActivity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            view.requestFocus();
            view.callOnClick();
        }
    });
}

public void testThatButtonForwardWorks() {
    final View view = mActivity
            .findViewById(com.jaisonbrooks.webview.R.id.menu_forward);
    mActivity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            view.requestFocus();
            view.callOnClick();
        }
    });
}

public void testThatButtonBackWorks() {
    final View view = mActivity
            .findViewById(com.jaisonbrooks.webview.R.id.menu_back);
    mActivity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            view.requestFocus();
            view.callOnClick();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:52:38.703

如果您使用 JUnit 进行集成测试，您可以在方法名称前加上 _1、_2 等：

```
public void _1_testThatButton()...
public void _2_testSomethingSecond()... 
```

我想您可以调用 System.exit() 而不是抛出异常，但是如果您的测试花费的时间太长，那么这可能是将来添加更多测试的坏兆头（添加更多测试可能会阻止您运行它们）。

如果你使用的是 ant，你可以试试这个：[How to make junit testing to stop after first failed test](https://stackoverflow.com/questions/188606/how-to-make-junit-testing-to-stop-after-first-failing-test)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:56:53.430

我还没有为 Android 应用程序做过 Junit 测试，但根据我对 Web 应用程序的经验，我建议这个答案。

当我遇到这种情况时，我会用返回类型的单独方法调用它们

例子：

```
public void testCheckFunctions()
{
boolean returnval=false;

returnval=test1();
if(returnval)
{
returnval=test2();
}
if(returnval)
{
returnval=test3();
}
} 
```

如果上述任一条件失败，您可以退出测试。

# .htaccess - 使用 .htaccess 文件删除 CodeIgniter 中的 index.php

> ID：15481035
> 
> 赞同：7
> 
> 时间：2013-03-18T15:48:35.130
> 
> 标签：.htaccess, codeigniter, codeigniter-routing

我目前正在使用 CodeIgniter 开发一个网站，最近我偶然发现了一个路由和 .htaccess 问题。

基本上，我的简单网站的结构（为了简单起见，我们将我的项目称为“CIExample”）如下：

-首页 -
关于我们-我们
的服务
-新闻
资讯 -联系我们

我使用页面控制器实现的。该控制器有 5 个函数调用各自的页面视图，即：

Home()，它调用视图'Home'
About()，它调用视图'About Us'等等。

以前，要访问“主页”，我需要`http://localhost/CIExample/index.php/page/home`在 url 窗口中输入内容，但在设置以下路由后，我能够删除“页面”（类名）部分：

```
$route['default_controller'] = 'page/home';
$route['home'] = 'page/home';
$route['about'] = 'page/about';
$route['service'] = 'page/service';
$route['news'] = 'page/news';
$route['contact'] = 'page/contact'; 
```

但是，当我尝试删除“index.php”时，棘手的部分就来了。我希望能够通过键入来访问主页`http://localhost/CIExample/home`。

所以我在CI论坛/教程/堆栈溢出上做了很多搜索，发现了一些.htaccess文件的代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

或[http://ellislab.com/forums/viewthread/197675/#929904](http://ellislab.com/forums/viewthread/197675/#929904)
我尝试了两种代码，但都没有工作..

`http://localhost/CIExample/home`会引导我到 404 not found 页面，但`http://localhost/CIExample/index.php/home`可以正常工作。

我想知道出了什么问题？是我的 routes.php 或 .htaccess 还是两者兼而有之？谢谢。

注意：我还更改了我的 'config/config.php' 文件 ->`$config['index_page'] = '';`

**编辑：** 终于成功了！调整 config 文件夹中的 config.php 文件并设置以下内容`$config['uri_protocol'] = 'PATH_INFO';`（来自“AUTO”）。

可用值：

```
| 'AUTO'            Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO 
```

不知道有什么不同，但根据[http://www.jotorres.com/2011/12/removing-index-php-from-url-in-codeigniter/](http://www.jotorres.com/2011/12/removing-index-php-from-url-in-codeigniter/)中的评论之一，相同的代码可能/可能不起作用生产服务器。

任何人都可以解释原因吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-30T08:09:00.020

您只需将其粘贴到您的 .htaccess 文件中：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L,QSA]
</IfModule> 
```

并对您的 application/config/config.php 文件进行此更改：

```
$config['index_page'] = ''; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-09T13:29:08.543

我使用了以下方法，它在**UBUNTU**中运行良好......！！

首先验证您是否**`phpinfo()`**在 index.php 文件中启用了 mod_rewrite（您可以使用 验证）。

IF DISABLED mod_rewrite then RUN: 1\. `sudo a2enmod rewrite` 2.只需将Tag(<'Directory /var/www/'>) 中的`sudo gedit /etc/apache2/sites-available/defaut` “AllowOverride None”替换为“ ” 3\. 然后请运行`AllowOverride All``sudo service apache2 restart`

Ok Good... 现在在 Codeigniter 的根目录 -> 查找`.htaccess`文件，如果找不到，请按**ctrl+h**，仍然找不到然后创建一个文件`.htaccess`

在`.htaccess` 粘贴以下代码：

```
<IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /ROOT DIRECTORY NAME/

        # Directs all EE web requests through the site index file
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

好的，最后只是更换`ROOT DIRECTORY NAME`

不要忘记 从文件中**删除** 使该行像 `index.php``application/config/config.php``$config['index_page'] = '';`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T16:39:22.493

我将这个 htaccess 用于我所有的 CodeIgniter 项目。它也支持子文件夹。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-10T06:21:38.333

在你的`system/application/config/config.php`, 改变

```
$config['index_page'] = "index.php"; 
```

至

```
$config['index_page'] = ""; 
```

在您的 .htaccess 中，添加以下内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|stylesheets|scripts|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-21T12:50:20.943

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

居住：

```
#RewriteRule ^(.*)$ index.php?/$1 [QSA,L] 
```

当地的：

```
#RewriteRule .* index.php/$0 [PT,L] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-22T19:18:27.130

```
for Codeigniter 3.1.4

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php56” package as the default “PHP” programming language.
<IfModule mime_module>
  AddType application/x-httpd-ea-php56 .php .php5 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit

# BEGIN cPanel-generated php ini directives, do not edit
# Manual editing of this file may result in unexpected behavior.
# To make changes to this file, use the cPanel MultiPHP INI Editor (Home >> Software >> MultiPHP INI Editor)
# For more information, read our documentation (https://go.cpanel.net/EA4ModifyINI)
<IfModule php5_module>
   php_flag asp_tags On
   php_flag display_errors On
   php_value max_execution_time 30
   php_value max_input_time 60
   php_value max_input_vars 1000
   php_value memory_limit 512M
   php_value post_max_size 128M
   php_value session.gc_maxlifetime 1440
   php_value session.save_path "/var/cpanel/php/sessions/ea-php56"
   php_value upload_max_filesize 128M
   php_flag zlib.output_compression Off
</IfModule>
# END cPanel-generated php ini directives, do not edit
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L,QSA]
</IfModule> 
```

# javascript - ckeditor 插件对话框选择从选定的获取描述

> ID：15481040
> 
> 赞同：5
> 
> 时间：2013-03-18T15:48:44.417
> 
> 标签：javascript, ckeditor

我正在为**CKEDITOR**开发一个占位符插件，它基本上已经完成。我遇到的问题是我试图从对话框中的**选择中获取值和****描述**，而我只得到了值。包含描述和值的数组如下所示

 ****-->** `items: [['description1', 'value1'], ['description2', 'value2']]` **<--**

在*返回 -> 内容 -> 元素*中，`ID` `dropdown`我拥有`setup`和`commit`功能。在这些函数中，我需要像从选择选项中获取名称一样获取描述。

真的需要这方面的帮助，在此先感谢

**示例 -->**

```
<select>
    <option value="value1">description1</option>
    <option value="value2">description2</option>
</select> 
```

**示例 <--**

```
(function () {

    function placeholderDialog(editor, isEdit) {

        var lang = editor.lang.phlink,
            generalLabel = editor.lang.common.generalTab;

        return {
            title: lang.title,
            minWidth: 300,
            minHeight: 80,
            contents: [
                {
                    id: 'info',
                    label: generalLabel,
                    title: generalLabel,
                    elements: [
                    {
                        id: 'dropdown'
                        , type: 'select'
                        , label: lang.chooseVal
                        , 'default': 'Detta är default'
                        , items: [['description1', 'value1'], ['description2', 'value2']]
                        , setup: function (data) {
                            // need the description
                            this.setValue(data.title);
                        }
                        , commit: function (data) {
                            // need the description
                            data.title = this.getValue();
                        }
                    },
                    {
                        id: 'text',
                        type: 'text',
                        style: 'width: 100%;',
                        label: lang.text,
                        'default': '',
                        required: true,
                        validate: CKEDITOR.dialog.validate.notEmpty(lang.textMissing),
                        setup: function (data) {
                            this.setValue(data.text);
                        },
                        commit: function (data) {
                            data.text = this.getValue();
                        }
                    }
                ]
                }
            ],
            onShow: function () {
                var data = { tag: 'link', content: "detta är innehåll", title: "Länk till svar", text: "detta är text" };
                if (isEdit) {
                    this._element = CKEDITOR.plugins.phlink.getSelectedPlaceHolder(editor);
                    data.title = this._element.getAttribute('title');
                    data.text = this._element.getText();
                    data.tag = this._element.getAttribute('data-jztag');
                }

                this.setupContent(data);
            },
            onOk: function () {
                var data = { tag: 'link', content: null, title: null, text: null };

                this.commitContent(data);

                CKEDITOR.plugins.phlink.createPlaceholder(editor, this._element, data);

                delete this._element;
            }
        };
    }

    CKEDITOR.dialog.add('createplaceholder', function (editor) {
        return placeholderDialog(editor);
    });
    CKEDITOR.dialog.add('editplaceholder', function (editor) {
        return placeholderDialog(editor, 1);
    });
})(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T09:01:24.077

使用以下内容获取选项的文本：

```
var input = this.getInputElement().$;
console.log( input.options[ input.selectedIndex ].text );
>> "description1" 
```**

# azure - Azure 网站和部署期间的停机时间

> ID：15481044
> 
> 赞同：3
> 
> 时间：2013-03-18T15:48:47.880
> 
> 标签：azure, azure-web-app-service

我在 Azure 网站上有一个网站设置，它使用保留模式并有 2 个实例。但是当我对我的网站进行更新时，该网站会出现停机时间。无论如何我可以让部署一次更新一次实例，这样就不会停机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:54:54.480

如果您正在寻找可热插拔的新代码部署，您应该考虑运行 WebRole。WebRole 有两个环境可以通过 CNAME 开关进行热交换。这使您在停机期间不会丢失任何流量。

Azure 网站（作为 Azure 提供的更简单但功能较少的产品）将在升级过程中的某个时间关闭，并在部署代码和重新编译应用程序时恢复。

# opengl - OpenGL 中的 2D 剪辑

> ID：15481047
> 
> 赞同：1
> 
> 时间：2013-03-18T15:48:57.520
> 
> 标签：opengl

我对 OpenGL 中的裁剪有疑问。所以我有一个小视口，我想渲染大图像的一部分。如果我画一个像这样的大图像

```
glEnable(GL_TEXTURE_RECTANGLE)

glColor3f(1,1,1)

glTexCoord2f(0,height)
glVertex2f(0,0)

glTexdoord2f(width,height)
glVertex2f(width,0)

glTexCoord2f(width,0)
glVertex2f(width,height)

glTexCoord(0,0)
glVertex2f(0,height) 
```

宽度和高度是**图像（纹理）的大小，比视口大得多。**

我的问题是：OpenGL 是先根据视口的大小裁剪矩形然后绘制，还是先渲染整个图像然后裁剪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:58:25.503

它将首先剪裁几何图形，然后进行绘制。更具体地说，OpenGL 在渲染单个帧缓冲区元素（像素）之前会进行所有几何处理。这是来自 3.3 GL 规范（第 2.4 节）的相关引用：

> 最终生成的图元被裁剪到查看体积中，为下一阶段光栅化做准备。光栅器使用点、线段或多边形的二维描述生成一系列帧缓冲区地址和值。

# asp.net-web-api - 如何创建和保存新实体的示例，Breezejs

> ID：15481054
> 
> 赞同：0
> 
> 时间：2013-03-18T15:49:15.597
> 
> 标签：asp.net-web-api, breeze

我试图从 Breeze 示例中创建一个非常基本的 Todo 实体。我在做：

```
manager.createEntity("Todo",{Description:"Test",Id:32,IsDone:false}); 
```

但是我一直收到一个错误，控制台告诉我它找不到类型“Todo”。我已经尝试了所有我能想到的类型。任何人都可以为我提供一个如何为微风WebApiSample ..因为这让我发疯了..

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:07:49.910

Breeze 需要元数据来创建任何类型的实体。该元数据既可以从服务器返回，也可以在本地创建。我的猜测是你还没有完成这些。来自服务器的元数据通常由 Breeze 在其对服务器的第一次查询期间自动获取。或者，您可以通过 MetadataStore.fetchMetadata 方法直接获取它。

希望这可以帮助。

# ajax - android设备中的跨域ajax请求失败

> ID：15481055
> 
> 赞同：0
> 
> 时间：2013-03-18T15:49:15.847
> 
> 标签：ajax, wordpress, jquery, cordova, jquery-mobile

我有一个非常基本的 jqm/phonegap 应用程序

这是我的html

```
<html>
<head>
<title>jQuery Mobile Web App</title>
<link href="jquery-mobile/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css">
<script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>

</head>
<body >
<div data-role="page" id="home"  >
  <div data-role="header">
    <h1>p</h1>
  </div>
  <div data-role="content" style="text-align:right" id="c1">

  </div>
  </div>
</div>
</div> 
```

这是我的 js 代码，它位于 html 代码的主体中

```
 <script>

    function get_news_list(id , link_ , refresh_ ){

        jQuery.support.cors = true;

        $.ajax({
        url :  link_ ,  
        success:function(data){
            $('#c1').html(data);

                        } ,
        error : function(data) {

            alert(data.toSource);

            }
        });
    }

  get_news_list('latest' , 'http://pnup.ir/?feed=json' , refresh_);

    </script> 
```

当我将它作为网页运行时，我得到

如果 Firefox 出现此警报

```
function toSource() {
    [native code]
} 
```

镀铬

```
 undefined 
```

我认为没问题，因为它是一个跨域 ajax 请求，它在网络浏览器中失败（尽管在 firebug 中它的状态是好的 200 它只是没有返回任何响应）但是当我在我的 android 设备上测试它时我得到了一样`undefined`。我认为跨域 ajax 请求一旦我在 android 设备中运行它作为应用程序就没有问题？

我错过了什么吗？我应该使用 jsonp 吗？它是一个 wordpress 网站和 json 提要插件，它的提要以 json 格式提供，但获取 jsonp 提要将是一场噩梦……至少我不知道怎么做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:48:42.167

我最近在我的一个 phonegap + jquerymobile 项目中实现了 jsonp，我遇到了同样的问题，但我使用 asp.net 作为我的服务

像下面这样调用服务对我有用，你所要做的就是添加 ?fnCallBack=? 在网址的末尾

```
$.ajax({        
        url : link_+'?fnCallBack=?',
        contentType : "application/json; charset=utf-8",
        dataType : "json",
        jsonp : 'json',
        cache : false,
        success : function(result) {
            if (result != 'Error') {
                var valX = JSON.stringify(result);
                valX = JSON.parse(valX);
            } else {
                navigator.notification.alert("An error occured, Please try later");
            }
        }
    }); 
```

在服务器端，当您发送 json 响应时，只需像这样添加 fnCallBack

```
 string jsoncallback = context.Request["fnCallBack"];
        context.Response.Write(string.Format("{0}({1})", jsoncallback,jsonData)); 
```

这样我解决了我的跨域问题，所以希望你能从中得到线索

# c++ - 如何使用 *.o 和 *.d 文件？

> ID：15481056
> 
> 赞同：5
> 
> 时间：2013-03-18T15:49:17.423
> 
> 标签：c++, compilation, makefile

我正在尝试使用库运行示例。在库的文档中写道，我需要将所有文件复制到我的目录中，然后键入`make`. 之后，我需要转到“调试”文件夹并键入`./lib_examples`以运行示例。

我执行了这个序列。结果，我在“调试”子目录中有很多文件`*.o`。`*.d`其中有`lib_examples.o`和`lib_examples.h`文件。但是没有`lib_example`我应该执行的文件。

有谁知道应该发生什么以及哪里出了问题。我应该再做一步才能使用`*.o`和`*.d`归档吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T19:10:05.827

“.o”文件可能是应该从中创建实际可执行程序的中间文件。

“.d”文件可能是 makefile 使用的内部状态，仅当您更改源代码然后“增量”重建时才重要。

如果运行后`make`只有这些文件而没有可执行文件，那么最可能的解释是`make`在创建可执行文件时遇到错误。如果是这种情况，那么由 生成的最后几行输出`make`应该会告诉您更多信息。

# php - 使用 UTF8 将 Javascript 十六进制转换为二进制

> ID：15481059
> 
> 赞同：4
> 
> 时间：2013-03-18T15:49:24.133
> 
> 标签：php, javascript, character-encoding

我将数据存储在`SQLite`数据库中`BINARY(16)`，其值由32 个字符的十六进制字符串上`PHP`的函数确定。[`hex2bin`](http://php.net/manual/en/function.hex2bin.php)

例如，字符串`434e405b823445c09cb6c359fb1b7918`返回`CN@[4EÀ¶ÃYûy`.

存储在此数据库中的数据需要由 操作`JavaScript`，为此我使用了以下函数（改编自[Andris](https://stackoverflow.com/users/217076/andris)[在此处](https://stackoverflow.com/a/7695514/215384)的回答）：

```
// Convert hexadecimal to binary string
String.prototype.hex2bin = function ()
{

    // Define the variables
    var i = 0, l = this.length - 1, bytes = []

    // Iterate over the nibbles and convert to binary string
    for (i; i < l; i += 2)
    {
        bytes.push(parseInt(this.substr(i, 2), 16))
    }

    // Return the binary string
    return String.fromCharCode.apply(String, bytes)

} 
```

这按预期工作，`CN@[4EÀ¶ÃYûy`从`434e405b823445c09cb6c359fb1b7918`.

然而，我遇到的问题是，当直接处理`PHP`'s`hex2bin`函数返回的数据时，我得到的是字符串`CN@[�4E����Y�y`而不是`CN@[4EÀ¶ÃYûy`. 这使我无法在两者之间工作（对于上下文，`JavaScript`它被用于为离线 iPad 应用程序供电，该应用程序与从`PHP`Web 应用程序检索的数据一起工作），因为我需要能够`JavaScript`生成 32 个字符的十六进制字符串，将其转换为二进制字符串，并使其与`PHP`'`hex2bin`函数（和`SQLite`'[`HEX`](http://www.sqlite.org/lang_corefunc.html#hex)函数）一起使用。

我相信这个问题是`JavaScript`使用`UTF-16`而二进制字符串存储为`utf8_unicode_ci`. 然后，我最初的想法是我需要将字符串转换为`UTF-8`. 使用谷歌搜索将我带到[这里](http://ecmanaut.blogspot.co.uk/2006/07/encoding-decoding-utf8-in-javascript.html)，搜索 StackOverflow 让我在[这里找到](https://stackoverflow.com/a/1993893/215384)[bobince](https://stackoverflow.com/users/18936/bobince)的答案，两者都推荐使用。但是，这确实返回了我需要的（）：`unescape(encodeURIComponent(str))``CN@[�4E����Y�y`

```
// CN@[Â4EÃÂÂ¶ÃYÃ»y
unescape(encodeURIComponent('434e405b823445c09cb6c359fb1b7918'.hex2bin())) 
```

那么，我的问题是：

**如何使用`JavaScript`将十六进制字符串转换为`UTF-8`二进制字符串？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:06:46.343

给定一个十六进制编码的 UTF-8 字符串，‘hex’，

```
hex.replace(/../g, '%$&') 
```

将产生一个 URI 编码的 UTF-8 字符串。

`decodeURIComponent`将 URI 编码的 UTF-8 序列转换为 JavaScript UTF-16 编码的字符串，所以

```
decodeURIComponent(hex.replace(/../g, '%$&')) 
```

应该解码一个正确的十六进制编码的 UTF-8 字符串。

`hex2bin`您可以通过将其应用于文档中的示例来查看它的工作原理。

```
alert(decodeURIComponent('6578616d706c65206865782064617461'.replace(/../g, '%$&')));
// alerts "example hex data" 
```

* * *

您提供的字符串不是 UTF-8 编码的。具体来说，

```
434e405b823445c09cb6c359fb1b7918
        ^ 
```

82 必须跟在一个至少设置了前两位的字节之后，而 5b 不是这样的字节。

[RFC 2279](http://www.ietf.org/rfc/rfc2279.txt)解释：

> 下表总结了这些不同八位字节类型的格式。字母 x 表示可用于对 UCS-4 字符值的位进行编码的位。
> 
> ```
> UCS-4 range (hex.)           UTF-8 octet sequence (binary)
> 0000 0000-0000 007F   0xxxxxxx
> 0000 0080-0000 07FF   110xxxxx 10xxxxxx
> 0000 0800-0000 FFFF   1110xxxx 10xxxxxx 10xxxxxx 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:18:15.850

您的应用程序在任何时候都不必处理二进制文件。插入是最新的可能点，这就是您最终转换为二进制的地方。选择是最早可能的点，这就是您转换为十六进制的地方，并在整个应用程序中使用十六进制字符串。

插入时，您可以替换`UNHEX`为 blob 文字：

```
INSERT INTO table (id)
VALUES (X'434e405b823445c09cb6c359fb1b7918') 
```

选择时，您可以`HEX`：

```
SELECT HEX(id) FROM table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T06:43:38.063

扩展迈克的答案，这里有一些编码和解码的代码。

请注意，这些`escape/unescape()`功能已弃用。如果你需要 polyfills，你可以在这里查看更全面的 UTF-8 编码示例：http: [//jsfiddle.net/47zwb41o](http://jsfiddle.net/47zwb41o)

```
// UTF-8 to hex
var utf8ToHex = function( s ){
    s = unescape( encodeURIComponent( s ) );
    var chr, i = 0, l = s.length, out = '';
    for( ; i < l; i++ ){
        chr = s.charCodeAt( i ).toString( 16 );
        out += ( chr.length % 2 == 0 ) ? chr : '0' + chr;
    }
    return out;
};

// Hex to UTF-8
var hexToUtf8 = function( s ){
    return decodeURIComponent( s.replace( /../g, '%$&' ) );
}; 
```

# python - PIL jpeg，如何保留像素颜色

> ID：15481062
> 
> 赞同：7
> 
> 时间：2013-03-18T15:49:28.717
> 
> 标签：python, image, image-processing, python-imaging-library

我对 JPEG 进行了一些实验，[文档](http://effbot.org/imagingbook/format-jpeg.htm)说“100 完全禁用 JPEG 量化阶段”。

但是，我在保存过程中仍然进行了一些像素修改。这是我的代码：

```
import Image
red = [20,30,40,50,60,70];
img = Image.new("RGB", [1, len(red)], (255,255,255))
pix = img.load()

for x in range(0,len(red)):
    pix[0,x] = (red[x],255,255)

img.save('test.jpg',quality=100)

img = Image.open('test.jpg')
pix = img.load()

for x in range(0,len(red)):
    print pix[0,x][0], 
```

我得到了意外的输出：`22 25 42 45 62 65` 我应该怎么做才能保留像素值？请注意，我还尝试使用[imagejpeg](http://php.net/manual/en/function.imagejpeg.php)使用 PHP ，当质量 = 100 时它给了我正确的值。

我可以`png`用来保存，但我想知道这背后的原因以及是否有任何选择可以避免

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:56:26.850

JPEG 将始终存在有损风险，请参阅[当质量设置为 100 时 Jpeg 是否无损？](https://stackoverflow.com/q/7982409/1730674).

最好的选择是使用另一种格式，特别是如果您的实验是为了科学:) 即使您被迫从 JPEG 开始（这似乎不太可能），您也应该立即转换为无损格式以进行任何类型的分析和修改。

如果您真的想尝试使用 python 进行无损 JPEG 工作，您可以尝试[`jpegtran`“来自 Independent Jpeg Group 的无损 jpeg 图像转换软件”](http://ebiznisz.hu/python-jpegtran/)，但正如 @Mark 所指出的，这不会让您走得太远。

顺便说一句，量化用于有损或无损压缩，所以我的猜测是

> ...100 完全禁用 JPEG 量化阶段。^([[1]](http://www.pythonware.com/library/pil/handbook/format-jpeg.htm))

只是意味着它根本没有被压缩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T16:11:12.823

JPEG 由许多不同的步骤组成，其中许多会引入一些损失。通过使用仅包含红色的示例图像，您可能遇到了最严重的违规行为 -[下采样或色度二次采样](http://en.wikipedia.org/wiki/Jpeg#Downsampling)。一半的颜色信息被丢弃，因为眼睛对亮度变化比对颜色变化更敏感。

一些 JPEG 编码器可以配置为关闭子采样，包括 PIL 和 Pillow，通过设置[`subsampling=0`](https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html#jpeg). 无论如何，它不会给你一个完全无损的文件，因为还有其他步骤会引入损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-28T06:26:14.673

相信我已经弄清楚如何保持当前的颜色二次采样和其他质量细节：

```
from PIL import Image, JpegImagePlugin as JIP

img = Image.open(filename)
img.save(
    filename + '2.jpg',                 # copy
    format='JPEG',
    exif=img.info['exif'],              # keep EXIF info
    optimize=True,
    qtables=img.quantization,           # keep quality
    subsampling=JIP.get_sampling(img),  # keep color res
) 
```

根据[https://www.exiv2.org/tags.html](https://www.exiv2.org/tags.html)我发现 YCbCrSubSampling 标记未保存在 JPEG 文件的 EXIF 中：

> 在 JPEG 压缩数据中，使用 JPEG 标记代替此标记。

这一定是为什么在一个看似偏僻的地方有另一个功能可以抓住它。

# parsing - EBNF语法解释

> ID：15481063
> 
> 赞同：0
> 
> 时间：2013-03-18T15:49:29.217
> 
> 标签：parsing, tree, ebnf

我如何将其解释为 ENBF 语法？

```
<assign>--> <id> = <expr>

<id>--> A | B | C

<expr> --> <expr> * <expr>

<expr> --> <expr> + <expr>

| <id> + <expr>

|( <expr> )

| <id> 
```

* * *

我可以使用这个语法生成任何语句的解析树和推导，但是在使用 EBNF 时遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:52:12.900

```
<assign>--> <id> = <expr> 
```

An`assign`是序列：`id`等号`expr`。

```
<id>--> A | B | C 
```

An`id`是 之一`A`，`B`或`C`

```
<expr> --> <expr> * <expr>
<expr> --> <expr> + <expr>
| <id> + <expr>    
|( <expr> )    
| <id> 
```

表达式可以是：

1.  两个表达式的乘积（中缀符号）
2.  两个表达式的加法（中缀表示法）
3.  添加标识符和表达式（这是添加两个表达式的特殊情况，其中第一个表达式只是`<id>`）
4.  带括号的表达式。
5.  一个标识符。

# jquery - h:commandLink 不适用于 jquery ajax

> ID：15481068
> 
> 赞同：0
> 
> 时间：2013-03-18T15:49:44.570
> 
> 标签：jquery, jsf-2, primefaces

我有 primefaces 数据表。数据表中的数据是用 h:commandLink 创建的。我用 jquery ajax 浏览器后退按钮开发。使用哈希， location.hash="#paginator="+x; 一切正常，没有问题。

我的问题是。当我第一次点击链接时，链接一开始不起作用。只会删除 url 中的哈希。第二次它起作用了。但是浏览器后退按钮不起作用。点击时 h:commandLink 如何正常工作。

```
<script type="text/javascript">

    $("span.ui-paginator-page").live('click',function(e){
      var x = $(this).text();
      location.hash = "#paginator="+x;
      e.preventDefault();
    }); 

    $(document).ready(function(){
      window.onhashchange = ajaxhistory;
    });

    function ajaxhistory(){
      var wert2 = window.location.hash;
      jQuery.ajax({
        type: 'POST',
        data: myvalue, 
        success: function(myvalue){
          $('#content_data').load('index.xhtml #content_data');
          var fragment = document.getElementById('fragment');
          fragment.value = window.location.hash;
          fragment.onchange();
        }
      });  
   };
</script>   

<h:inputText id="fragment" value="#{paginatorBean.fragment}">
  <f:ajax event="change" execute="@form" listener="#{paginatorBean.processFragment}" />
</h:inputText>

<p:dataTable id="content_data" value="#{myDataBean.lazyModel}" var="item"
                             paginator="true" rows="10" 
                             paginatorPosition="bottom"
                             paginatorTemplate="  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} "  
                             rowsPerPageTemplate="5,10,15"
                             lazy="true" 
                             >  

  <p:column >
   <h:commandLink class="mybutton" value="#{item.name} #{item.autotextcomplete}"  action="#{myDataBean.goto(item.id)}"/>

  </p:column> 
```

# sql-server - SQL Server 死锁：如何读取此日志？

> ID：15481069
> 
> 赞同：1
> 
> 时间：2013-03-18T15:49:46.423
> 
> 标签：sql-server

有人可以帮我解释这个日志吗？我该如何解决这个问题？我使用序列化作为我的隔离级别，我认为这就是问题所在。另外，我知道这个僵局与 Company 表有关。

请坦白我缺乏 SQL 技能。我是新手。

**更新** 当我尝试使用以下查询获取对象时，我没有得到任何匹配的记录：

```
 select * from sysobjects where id = 72057594047692800 
```

![日志](../Images/995319e16f8ef402c9d980c3905b7162.png)

![公司表](../Images/f5035dfaf6347ad2f47ae1dc8fc81255.png)

# mysql - 将 unqiue 记录插入到一 个表中，并将结果插入到第二个表中

> ID：15481070
> 
> 赞同：0
> 
> 时间：2013-03-18T15:49:48.923
> 
> 标签：mysql, sql

使用 MySQL 和 PHP，我有两个表 ResponseTable 和 EntryTable

响应表有

```
 RespID(pk,uq,ai, int), Response(string) 
```

入口表有

```
 EntryID(pk,uq,ai,int), RespID(int), UserID(int) 
```

我想在 Response 不存在的 ResponseTable 中插入一个响应，然后根据响应对应的 ResponseTable 中的 RespID 在 EntryTable 中插入一个条目。

如何用最少的语句来做到这一点？

编辑：响应是独一无二的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:08:55.487

来自前端的最少语句是使用存储过程。但是，无论如何，您仍然需要有两个 INSERT 语句。你只是不能用一个查询插入两个不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:11:20.000

mysql 支持[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。您可以将一个添加到您的 ResponseTable 中，该表将激活“AFTER”“INSERT”，您可以让它使用正在使用 NEW 关键字插入的值。

触发器的主体可以是一个插入条目

就像是：

```
 CREATE TRIGGER `response_after_insert` AFTER INSERT ON `response`
  FOR EACH ROW
 BEGIN INSERT INTO entry SET RespID=NEW.RespID ON DUPLICATE KEY UPDATE operation=1;END; 
```

因此，一旦您设置好触发器，只要您在响应中插入，触发器就会被激活

# parameters - Crystal Reports - 使用公式替代参数

> ID：15481072
> 
> 赞同：0
> 
> 时间：2013-03-18T15:50:01.353
> 
> 标签：parameters, crystal-reports, report, formula

我有一份报告显示前一天的一些统计数据。通常这是前一天 (dateadd("d", -1, CurrentDate)) 但如果是星期一 (dayOfWeek=2)，我需要它使用前三天 (dateadd("d", -3, CurrentDate ））。我知道如何做到这一点，但我需要这些值作为参数的默认值，并且能够让用户能够更改此日期。据我所知，您不能将参数的默认值设置为变量。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:23:07.103

我会让你的日期参数可选（在 CR 2008 和更高版本中可用）。如果最终用户未选择任何值，则使用您描述的逻辑，否则，使用他们选择的日期。报表的记录选择公式中的此逻辑示例：

```
if hasvalue({?DateParameter}) then {table.field}={?DateParameter}
else 
  if dayofweek(currentdate)=2 then //today is Monday
    {table.field} in dateadd("d",-3,currentdate) to dateadd("d",-1,currentdate)
  else {table.field}=dateadd("d",-1,currentdate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:58:22.920

你的公式应该基于你的变量。您还可以在 Crystal 中拥有一个全局变量。我现在没有水晶，但一个代码示例是：

```
numbervar myVariable := {?yourParameter};
(dateadd("d", -myVariable, CurrentDate)) 
```

# windows - 批处理脚本读取文件并设置为环境变量

> ID：15481078
> 
> 赞同：0
> 
> 时间：2013-03-18T15:50:13.460
> 
> 标签：windows, batch-file, command

我正在编写一个 shell 脚本来读取包含 key=value 对的文件并将这些变量设置为环境变量。我尝试使用以下代码，

```
if EXIST "test.dat" (
    for /F "tokens=*" %%I in (test.dat) do @set %%I
    echo setting JAVA_HOME to :: %JAVA_HOME%
    echo setting JAVA to %JAVA%
) 
```

假设`test.dat`has`JAVA_HOME=c:\JDK1.6`和`JAVA=c:\JDK1.6\bin\java` Running 上面的代码没有设置这些变量，即使我`set %%I`在`do`. 这两个 echo 语句没有打印任何内容。我在这里想念什么？为什么从文件中读取的行没有设置到环境中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:19:38.060

**包含在%**字符中的环境变量在*解析*代码行时计算，而不是在*执行*时计算。如果您希望 cmd 在执行代码行时评估环境变量，您需要启用“延迟变量扩展”并将环境变量名称包含在**!** 而不是**%**。例如：

```
...
setlocal enableextensions enabledelayedexpansion
...
if EXIST "test.txt" (
  for /F "tokens=*" %%I in (%SEURAT_SERVER_DIR%\server-variables.dat) do @set %%I
  echo setting JAVA_HOME to :: !JAVA_HOME!
  echo setting JAVA to !JAVA!
)
echo JAVA_HOME=%JAVA_HOME%
echo JAVA=%JAVA% 
```

账单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:12:36.533

这在这里工作：

```
if exist test.dat for /f "delims=" %%i in (test.dat) do set %%i
set java 
```

输出：

```
JAVA=c:\JDK1.6\bin\java
JAVA_HOME=c:\JDK1.6 
```

# java - Hibernate 是否可以通过一次选择获取两个级别的集合？

> ID：15481083
> 
> 赞同：2
> 
> 时间：2013-03-18T15:50:34.333
> 
> 标签：java, hibernate, one-to-many, hibernate-onetomany

我有三个实体：

```
@Entity
@Table(name="a")
class A {

  @Id
  Long id;

  @OneToMany(fetch = FetchType.EAGER)
  @JoinColumn(name = "a_id")    
  Set<B> bs;

  // ... other fields
}

@Entity
@Table(name = "b")
class B {

  @Id
  Long id;

  @OneToMany(fetch = FetchType.EAGER)
  @JoinColumn(name = "c_id")
  Set<C> cs;

  // ... other fields
}

@Entity
@Table(name = "c")
class C {

  @Id
  Long id;

  // ... other fields
} 
```

当我使用 JPA 的 Criteria API 来获取 A 时，Hibernate 首先只获取 A，然后是每个 A、所有 B，最后是每个 B 所有 C。

是否可以通过一个理论上可能的选择来强制获取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:05:07.543

Hibernate 不支持很好地获取多个 Eager 集合。看看这里。

顺便说一句，你真的需要那些急切加载的集合吗？

[Hibernate 不能同时获取多个包](https://stackoverflow.com/questions/4334970/hibernate-cannot-simultaneously-fetch-multiple-bags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:00:23.690

听起来好像没有`internal iteration`.

在这种情况下，我想建议[Hibernate Native Sql query](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)。

# javascript - 如何在 Array.prototype.slice.call(arguments) 中设置“this”上下文

> ID：15481087
> 
> 赞同：2
> 
> 时间：2013-03-18T15:50:39.220
> 
> 标签：javascript

有很多问题和答案涵盖了这种技术，但我似乎无法找到如何`this`为 call() 或 apply() 设置所需上下文的答案。

我明白那个

`Array.prototype.slice.call(arguments)`

有点等价于

`arguments.slice()`

被`arguments`转换成一个正确的数组对象，但是如果我尝试对我自己的对象使用这个约定，它就不起作用。我试图写一个小测试这样做：

```
var Logger = function(){};
Logger.prototype.print = function(msg){ 
   console.log ((new Date()).getTime().toString() + msg); 
};

(function(){
   var o = {
    name: "Hi Bob!",
   };

   var l = new Logger();
   l.print(o.name); //works fine
   Logger.prototype.print.call(o.name); //calls print method, but 'msg' is undefined
}()); 
```

关于允许该功能应用程序在没有必要上下文的情况下工作`Array.prototype`的对象或对象是否有什么特别之处？`arguments`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:53:50.510

`slice`和你的函数之间的区别在于它`slice`使用上下文 ( `this`) 而你的函数只使用它的参数。

如果您真的想`call`与您的功能一起使用，请将其用作

```
Logger.prototype.print.call(null, o.name); 
```

但你不妨使用

```
 Logger.prototype.print(o.name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:56:42.743

您的`Logger.prototype.print`print 不会在`this`任何地方使用该变量，因此使用`call()`是没有意义的。您的函数期望`msg`作为参数传递。这就是为什么`l.print(o.name);`有效。

正如您在问题中所说：

```
Array.prototype.slice.call(arguments) 
```

类似于`arguments.slice()`。所以：

```
Logger.prototype.print.call(o.name); 
```

类似于`o.name.print()`。如您所见，这没有任何意义。

如果你*真的*想使用`.call()`，你可以这样：

```
Logger.prototype.print.call(null, o.name); 
```

但是，正如您所看到的，这很愚蠢，而且比仅仅`l.print(o.name);`.

# css - 未加引号的数据 URI 在 CSS 中是否有效？

> ID：15481088
> 
> 赞同：10
> 
> 时间：2013-03-18T15:50:45.973
> 
> 标签：css, w3c-validation, data-uri

```
#something {
    background: url(data:image/png;base64,ABCDEF);
} 
```

这个片段在所有支持数据 URI 的浏览器中都**有效**（显然，除了 ABCDEF 之外）。

此外，根据[CSS 2.1 规范](http://www.w3.org/TR/CSS21/syndata.html#uri)，它是有效的：

> ...**可选**的单引号 (') 或双引号 (") 字符后跟 URI 本身...

但是[验证器](http://jigsaw.w3.org/css-validator/)不会接受它没有引号：

> 值错误：背景 url(data:image/png;base64,ABCDEF) 是不正确的 URL

如果您用单引号或双引号将 URI 括起来，则它会验证。

我错过了什么吗？它是验证器中的错误吗？**编辑**：[是的](https://github.com/w3c/css-validator/issues/42)！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T15:53:17.283

只要 URI 本身不`url()`以任何方式破坏语法（例如`(`，并且`)`必须进行转义或 URI 编码，这样它们就不会过早地结束函数令牌，也在规范中提到），即使未引用它也应该是有效的.

这可能是一个验证器错误。具体来说，它似乎不以任何形式处理未引用的数据 URI，因为当我简单地更改为时`data`（`http`即使它显然不像典型的 HTTP 地址）：

```
#something {
    background: url(http:image/png;base64,ABCDEF);
} 
```

...然后它神奇地通过了验证。

# android - Jfeinstein10 滑动菜单主题

> ID：15481091
> 
> 赞同：2
> 
> 时间：2013-03-18T15:50:50.407
> 
> 标签：android, slidingmenu

我有一个关于使用[jfeinstein10 SlidingMenu的 API<=10 运行时主题切换的问题](https://github.com/jfeinstein10/SlidingMenu)

onCreate 是这样的

```
super.onCreate(savedInstanceState);
setTheme(themeA);
setContentView(R.layout.main);
SlidingMenu menu = new SlidingMenu(context);
menu.setMode(SlidingMenu.LEFT);
menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
menu.setShadowWidthRes(R.dimen.shadow_width);
menu.setShadowDrawable(R.drawable.shadow);
menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
menu.setFadeDegree(0.35f);
menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
menu.setMenu(R.layout.config_sliding_menu); 
```

和 onButtonClick 我做这样的事情

```
... themeA=newTheme ....
finish();
startActivity(new Intent(activity, activity.getClass())); 
```

API> 10 时一切正常（“重新启动”后的 config_sliding_menu 和主布局显示为 newTheme ）但 API<=10 config_sliding_menu 显示为 style.xml 中定义的默认应用程序主题，主布局显示为 newTheme。

有一种方法可以强制 API<10 上的 SlidingMenu 菜单采用 newTheme？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:04:56.657

不鼓励在您的代码中使用 setTheme()，请参阅[此](https://code.google.com/p/android/issues/detail?id=4394)。

相反，请在应用的清单中声明主题。

```
<application
...
android:theme="@style/themeA" > 
```

# c# - 响应消息的内容类型application/xml;charset=utf-8 与绑定的内容类型不匹配（text/xml;charset=utf-8）

> ID：15481092
> 
> 赞同：16
> 
> 时间：2013-03-18T15:50:51.730
> 
> 标签：c#, wcf, wcf-binding

我尝试使用独立应用程序来使用 WCF Web 服务。我可以使用 Internet Explorer 查看此服务，也可以在 Visual Studio 服务引用中查看。

这是我得到的错误

```
The content type text/html; charset=UTF-8 of the response message does not match the content type of the binding (text/xml; charset=utf-8). 
```

如何更改它以使用正确的内容类型？

这是我的配置文件

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="G2WebServiceSoap11Binding" />
        </basicHttpBinding>
        <customBinding>
            <binding name="G2WebServiceSoap12Binding">
                <textMessageEncoding messageVersion="Soap12" />
                <httpTransport />
            </binding>
        </customBinding>
    </bindings>
    <client>
        <endpoint address="http://XXX.XX.XX.XX:XX/janus/services/G2WebService.G2WebServiceHttpSoap11Endpoint/"
            binding="basicHttpBinding" bindingConfiguration="G2WebServiceSoap11Binding"
            contract="G2ServiceReference.G2WebServicePortType"
            name="G2WebServiceHttpSoap11Endpoint" />
        <endpoint address="http://XXX.XX.XX.XX:XX/janus/services/G2WebService.G2WebServiceHttpSoap12Endpoint/"
            binding="customBinding" bindingConfiguration="G2WebServiceSoap12Binding"
            contract="G2ServiceReference.G2WebServicePortType"
            name="G2WebServiceHttpSoap12Endpoint" />
    </client>
</system.serviceModel> 
```

这是堆栈

```
{System.ServiceModel.ProtocolException: The content type application/xml;charset=utf-8 of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. 
The first 1024 bytes of the response were: '<Exception>org.apache.axis2.AxisFault: The endpoint reference (EPR) for the Operation not found is /janus/services/G2WebService and the WSA Action = null&#xd;
    at org.apache.axis2.engine.DispatchPhase.checkPostConditions(DispatchPhase.java:89)&#xd;
    at org.apache.axis2.engine.Phase.invoke(Phase.java:333)&#xd;
    at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:264)&#xd;
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:163)&#xd;
    at org.apache.axis2.transport.http.util.RESTUtil.invokeAxisEngine(RESTUtil.java:136)&#xd;
    at org.apache.axis2.transport.http.util.RESTUtil.processURLRequest(RESTUtil.java:130)&#xd;
    at org.apache.axis2.transport.http.AxisServlet$RestRequestProcessor.processURLRequest(AxisServlet.java:829)&#xd;
    at org.apache.axis2.transport.http.AxisServlet.doGet(AxisServlet.java:255)&#xd;
    at com.rm.janus.webservice.GroupCallServlet.doGet(GroupCallServlet.java:33)&#xd;
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)&#xd;
    at javax.servlet.http.HttpSer'. ---> System.Net.WebException: The remote server returned an error: (500) Internal Server Error.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory`1 factory, WebException responseException, ChannelBinding channelBinding)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at InetgrisG2TestApp.G2ServiceReference.G2WebServicePortType.getStudentData(getStudentDataRequest request)
   at InetgrisG2TestApp.G2ServiceReference.G2WebServicePortTypeClient.G2TestApp.G2ServiceReference.G2WebServicePortType.getStudentData(getStudentDataRequest request) in c:\Users\s\Documents\Visual Studio 2012\Projects\G2TestApp\InetgrisG2TestApp\Service References\G2ServiceReference\Reference.cs:line 2981
   at InetgrisG2TestApp.G2ServiceReference.G2WebServicePortTypeClient.getStudentData(ServiceRequest serviceReq) in c:\Users\s\Documents\Visual Studio 2012\Projects\G2TestApp\G2TestApp\Service References\G2ServiceReference\Reference.cs:line 2987
   at InetgrisG2TestApp.Program.Main(String[] args) in c:\Users\s\Documents\Visual Studio 2012\Projects\G2TestApp\G2TestApp\Program.cs:line 57} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-18T16:05:25.057

您的 WCF 服务可能正在返回 HTML。在这种情况下，您需要在服务端设置一个绑定以返回 XML。但是，这不太可能：如果*是*这种情况，请告诉我，我将进行更详细的编辑。

更可能的原因是您的服务抛出了一个错误，即返回一个 HTML 错误页面。如果您想了解详细信息，可以查看[此博客文章。](http://noamlewis.wordpress.com/2012/12/03/custom-error-pages-and-wcf-exceptions-in-iis-and-case-of-bad-ui/)

**tl; dr：** 错误页面有几种可能的配置。如果您在 IIS 上托管，则需要`<httpErrors>`从 WCF 服务`web.config`文件中删除该部分。如果没有，请提供您的服务托管方案的详细信息，我可以进行编辑以匹配它们。

**编辑：**

看到您的编辑后，您可以看到返回的完整错误。Apache 无法判断您要调用哪个服务，因此会抛出错误。一旦您拥有正确的端点，该服务就会正常工作 - 您被指向错误的位置。不幸的是，我无法从可用的信息中判断正确的位置是什么*，*但是您的操作（当前`null`！）或 URL 不正确。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-29T15:52:32.707

当我遇到这个错误时，我花了几个小时试图找到解决方案。

我的问题是，当我去保存文件时，我不小心在 web.config 中按下了击键“G”。我有一个散乱的角色坐在外面，所以 web.config 不知道如何解释格式不正确的数据。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-30T08:30:50.893

以防万一...
如果您使用的是**SoapUI 模拟服务**（作为服务器），请从**C# WCF**调用它：

```
WCF --> SoapUI MockService 
```

在这种情况下，您会遇到相同的错误：

```
The content type text/html; charset=UTF-8 of the response message does not match the content type of the binding (text/xml; charset=utf-8). 
```

在 SoapUI 编辑您的 Mock Response 并添加一个 Header 到它： [![在此处输入图像描述](../Images/73a5b2b8ac1e3e41a78fffdf933eb9ad.png)](https://i.stack.imgur.com/3Pf4R.png)

在我的场景中，这可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-06T14:50:26.387

我们使用 IIS 的 Url Rewrite 扩展将所有 HTTP 请求重定向到 HTTPS。当尝试在 http://... 地址上调用未使用传输安全性的服务时，出现此错误。

因此，可能值得检查您是否可以通过浏览器同时访问服务的 http 和 https 地址，并且它不会自动向您转发 303 状态代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-07T07:56:49.920

在 WCF 服务项目中，此问题可能是由于引用 System.Web.Mvc.dll 的不同版本或可能是任何其他 DLL 的不同版本问题。所以这可能是DLL不同版本的兼容性问题

当我使用

**System.Web.Mvc.dll 版本 5.2.2.0** -> 它抛出**错误**内容类型 text/html；响应消息的charset=utf-8

但是当我使用

**System.Web.Mvc.dll 版本 4.0.0.0 或更低版本**-> 这在我的项目中**运行良好**并且没有错误。

我不知道这个不同版本的 DLL 问题的原因，但是当我更改与您的 WCF 项目兼容的 DLL 版本时，它可以正常工作。

**当您在 WCF 项目中添加其他项目的引用并且此引用项目具有不同版本的 System.Web.Mvc DLL 或可能是任何其他 DLL 时，甚至会生成此错误。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-06T23:58:56.873

就我而言，这只是 web.config 中的一个错误。

我有：

```
<endpoint address="http://localhost/WebService/WebOnlineService.asmx" 
```

它应该是：

```
<endpoint address="http://localhost:10593/WebService/WebOnlineService.asmx" 
```

地址中缺少端口号 (:10593)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-27T17:51:38.400

这可能是 web.config 文件中的错误。

在浏览器中打开您的 URL，例如：

```
http://localhost:61277/Email.svc 
```

检查您是否有 500 错误。

```
HTTP Error 500.19 - Internal Server Error 
```

在这些部分中查找错误：

配置错误

配置文件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-31T06:50:02.753

尝试在 IIS 中浏览 WCF，看看它是否还活着并正常工作，

就我而言，这是因为 WCF 的物理路径被误导了。

# c - C 错误：未定义的引用

> ID：15481094
> 
> 赞同：0
> 
> 时间：2013-03-18T15:50:52.950
> 
> 标签：c, sockets, winsock

我使用 Winsock 库在 C (Windows) 中创建了以下套接字服务器。

```
#undef UNICODE

#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>
#include <stdlib.h>

// Need to link with Ws2_32.lib
#pragma comment(lib, "WS2_32.lib")

#define DEFAULT_PORT "27015"
#define DEFAULT_BUFLEN 512

int __cdecl main(void) {

WSADATA wsaData;
int iResult;

SOCKET ListenSocket = INVALID_SOCKET;
SOCKET ClientSocket = INVALID_SOCKET;

struct addrinfo *result = NULL; 
struct addrinfo hints;

char recvbuf[DEFAULT_BUFLEN];
int iSendResult;
int recvbuflen = DEFAULT_BUFLEN;

// Initialize Winsock
iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
if(iResult != 0) {
    printf("WSAStartup failed: %d\n", iResult);
    return 1;
}

ZeroMemory(&hints, sizeof(hints));
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;
hints.ai_flags = AI_PASSIVE;

// Resolve the local address and port to be used by the server
iResult = getaddrinfo(NULL, DEFAULT_PORT, &hints, &result);
if(iResult != 0) {
    printf("getaddrinfo failed: %d\n", iResult);
    WSACleanup();
    return 1;
}

// Create a SOCKET for the server to listen for client connections
ListenSocket = socket(result->ai_family, result->ai_socktype, result->ai_protocol);
if(ListenSocket == INVALID_SOCKET) {
    printf("Error at socket(): %ld\n",  WSAGetLastError());
    freeaddrinfo(result);
    WSACleanup();
    return 1;
}

// Set up a TCP listening socket
iResult = bind(ListenSocket, result->ai_addr, (int)result->ai_addrlen);
if (iResult == SOCKET_ERROR) {
    printf("bind failed with error: %d\n", WSAGetLastError());
    freeaddrinfo(result);
    closesocket(ListenSocket);
    WSACleanup();
    return 1;
}
freeaddrinfo(result), // to free the memory allocated by getaddrinfo function

// Listen on a socket
iResult = listen(ListenSocket, SOMAXCONN);
if(iResult == SOCKET_ERROR) { // SOMAXCONN indicates the backlog value, maximum length of the queue of pending connections to accept
    printf("Listen failed with error: %d\n", WSAGetLastError());
    closesocket(ListenSocket);
    WSACleanup();
    return 1;
}

// Accept connection on a socket
ClientSocket = accept(ListenSocket, NULL, NULL);
if(ClientSocket == INVALID_SOCKET) {
    printf("accept failed: %d\n", WSAGetLastError());
    closesocket(ListenSocket);
    WSACleanup();
    return 1;
}
closesocket(ListenSocket); // No longer need server socket

// Receive until the peer shuts down the connection
do {
    iResult = recv(ClientSocket, recvbuf, recvbuflen, 0);
    if(iResult > 0) {
        printf("Bytes received: %d\n", iResult);

        // Echo buffer back to the sender
        iSendResult = send(ClientSocket, recvbuf, iResult, 0);
        if(iSendResult == SOCKET_ERROR) {
            printf("send failed: %d\n", WSAGetLastError());
            closesocket(ClientSocket);
            WSACleanup();
            return 1;
        }
        printf("Bytes sent: %d\n", iSendResult);
    } else if(iResult == 0) {
        printf("Connection closing...\n");
    } else {
        printf("recv failed: %d\n", WSAGetLastError());
        closesocket(ClientSocket);
        WSACleanup();
        return 1;
    }
} while(iResult > 0);

// Shutdown the send half of the connection since no more data will be sent
iResult = shutdown(ClientSocket, SD_SEND);
if(iResult == SOCKET_ERROR) {
    printf("shutdown failed: %d\n", WSAGetLastError());
    closessocket(ClientSocket);
    WSACleanup();
    return 1;
}

//cleanup
closesocket(ClientSocket);
WSACleanup();

return 0;
} 
```

当我尝试编译它时，Winsock 库中的每个函数都会出现以下错误：

```
C:\Users\Victor\AppData\Local\Temp\ccOwFjRF.o:socketServer.c:(.text+0x4a): undef
ined reference to `WSAStartup@8' 
```

我将 Winsock 库所在的目录添加到路径中，但似乎我需要做其他事情。有人对这个问题有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:25:12.420

为了使编译成功，您需要执行以下更改：

1.  在您的源文件中，您必须`#define _WIN32_WINNT 0x0501`在包含标题之前进行定义。请参阅此较早[的帖子](https://stackoverflow.com/questions/5220190/undefined-reference-to-getaddrinfo)以获取更多详细信息。

2.  来源中有错别字。请替换`closessocket`到`closesocket`第行号。121 的源文件。

3.  使用以下命令编译

    `gcc -o socketServer socketServer.c -lws2_32 -lwsock32 -L $MinGW\lib`

`$MinGW`MinGW软件的安装目录在哪里

通过这些更改，我能够成功编译您的代码。

# php - 在 PHP soapCall 中为实际的函数标签添加属性

> ID：15481095
> 
> 赞同：4
> 
> 时间：2013-03-18T15:50:54.953
> 
> 标签：php, soap, soap-client

我需要在对soap接口（特别是zimbra接口）的调用中向表示函数/方法的标记添加属性。

我了解如何将属性添加到*参数*标签，但不了解实际的方法标签。

例如，要将它们添加到参数中，可能会执行以下操作：

```
 $var = new SoapVar('<account by="name">' . $account . '</account>', XSD_ANYXML);
    $params = array(new SoapParam($var, 'account'));

    try {
        $result = $this->SoapClient->__soapCall(
            "GetAccountInfoRequest", $params, null, $header
        );
    } catch (SoapFault $fault) {
        return false;
    } 
```

这将生成以下预期的 XML：

```
<body>
    <GetAccountInfoRequest>
        <account by="name">*someAccountName*</account>
    </GetAccountInfoRequest>
</body> 
```

但是当需要将属性添加到实际方法标记时会发生什么，例如在[Zimbra setPasswordRequest](http://files.zimbra.com/docs/soap_api/8.0/soapapi-zimbra-doc/api-reference/zimbraAdmin/SetPassword.html)中。

该请求期望 XML 与以下内容不同：

```
<body>
    <SetPasswordRequest id="someAccountId" newPassword="s3cr3tP@ss" />
</body> 
```

这只是表示具有属性和 0 参数的方法的标记。

我尝试了以下方法（无济于事）：

```
 $var = new SoapVar('<SetPasswordRequest id="'.$accountInfo->id
        .' newPassword="'.$newPass.'"/>', XSD_ANYXML);
    $params = array(new SoapParam($var, 'SetPasswordRequest'));

    try {
        $result = $this->SoapClient->__soapCall(
            "SetPasswordRequest", $params, null, $header
        );
    } catch (SoapFault $fault) {
        return false;
    } 
```

令我懊恼的是，它创建了一个嵌套标签，如下所示：

```
<body>
    <ns1:SetPasswordRequest>
        <SetPasswordRequest id="5329ee70-fb5b-4fa1-a6cb-4c5a3f7f8a91 newPassword="DpJsPX3w?"/>
    </ns1:SetPasswordRequest>
</body> 
```

目前，我正在为这样的请求手动序列化soap XML，并使用curl发送它，但是必须有一种方法可以使用SoapClient来做到这一点，我担心未来开发人员的代码可读性和可移植性，我不'不希望有人为了能够发送请求而不得不学习使用我自己的 SOAP 序列化程序迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-11T05:00:25.630

看起来上面的代码中缺少一个结束双引号。

```
$var = new SoapVar('<SetPasswordRequest id="'.$accountInfo->id
        .'" newPassword="'.$newPass.'"/>', XSD_ANYXML);
    $params = array(new SoapParam($var, 'SetPasswordRequest')); 
```

另请参阅这篇文章以获取替代方法。 [PHP SoapVar 对象属性？](https://stackoverflow.com/questions/7223896/php-soapvar-object-attribute)

# grails - Grails 插件：Jasper 插件 - 没有此类报告规范错误

> ID：15481096
> 
> 赞同：0
> 
> 时间：2013-03-18T15:51:06.117
> 
> 标签：grails, jasper-reports, jasper-plugin

尝试运行 Grails Jasper 插件演示页面中的任何演示报告时出现错误。我想我缺少一些配置，但插件文档没有提供更多细节。

```
Error 500: Internal Server Error
URI
/testGrailsProject01/jasper/
Class
java.lang.Exception
Message
No such report spec: /reports\sample-jasper-plugin (jasper or .jrxml)
Around line 195 of PageFragmentCachingFilter.java
192:            if (CollectionUtils.isEmpty(cacheOperations)) {
193:                log.debug("No cacheable annotation found for {}:{} {}",
194:                        new Object[] { request.getMethod(), request.getRequestURI(), getContext() });
195:                chain.doFilter(request, response);
196:                return;
197:            }
198:
Around line 63 of AbstractFilter.java
60:     try {
61:         // NO_FILTER set for RequestDispatcher forwards to avoid double gzipping
62:         if (filterNotDisabled(request)) {
63:             doFilter(request, response, chain);
64:         }
65:         else {
66:             chain.doFilter(req, res);
Trace
   Line | Method
->> 195 | doFilter in PageFragmentCachingFilter.java
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    63 | doFilter in AbstractFilter.java
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:37:53.900

看起来插件根本没有提供报告，至少我找不到任何报告。你需要在 Jasper 中创建一个基本的测试报告，然后将它放在你的 /reports/ 文件夹中。

# php - MySQL加载文件无效整数

> ID：15481097
> 
> 赞同：0
> 
> 时间：2013-03-18T15:51:13.197
> 
> 标签：php, mysql, database, csv

我正在尝试使用以下设置将以下 CSV 数据导入到新的干净表中。并不断添加两个条目，然后发出警告。为什么会报错？我已将其从 Inno 更改为 MyISAM，因为我认为这可能是问题所在，但没有运气。

```
16,"Data point 1"
15,"Data point 2"
14,"Point 3a"
13,"Data total" 
```

运行此 SQL 后

> LOAD DATA LOCAL INFILE 'C:/Users/Me/CSV.csv' INTO TABLE points 由 ',' 终止的字段 可选地由 '"' 包围 由 '\r' 终止的行

我收到以下警告

> 2 行受影响，2 个警告：1366 不正确的整数值：第 2 行的列“id”的“15”

该表设置如下。

```
id INT(11) Default 0 PK
value VARCHAR(45) Default NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:01:37.500

可能您的行实际上并不仅仅由“\r”终止，而是由“\r\n”终止。

如果是这种情况，您很可能会遇到您所描述的错误

也许尝试类似：

```
load data local infile '<path2csv>' into table test.test_table fields terminated by ',' optionally enclosed by '"' lines terminated by '\r\n' 
```

我还会使用编辑器检查实际的文本文件，该编辑器可以选择显示隐藏字符，例如 Vi（我相信你可以获得 Windows 版 Vim 的图形版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:08:32.923

也许您的行实际上并未由 \r 终止，而是由 \r\n 终止？这将解释*Incorrect integer value: '15'*中的空白字符- 它只是 \n。

所以试试吧`LINES TERMINATED BY '\r\n'`。

# javascript - 模块中的 Joomla 外部动态 Javascript

> ID：15481102
> 
> 赞同：0
> 
> 时间：2013-03-18T15:51:23.510
> 
> 标签：javascript, dynamic, joomla, external

我创建了一个带有扩展名*php*的外部 javascript 文档，并在文档中使用了行：`Header("content-type: application/x-javascript");` 以确保它作为 javascript 加载。然后我将它加载到我的模块中，`$doc->addScript()`但似乎我无法从 js 文档中获取模块参数。

有谁知道我如何从这个外部脚本访问模块的参数？我已经尝试 print_r'ing _GET 和 _POST 并且那里什么都没有。

有谁知道如何在外部加载的脚本/样式表中获取这些参数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:20:29.647

将参数保存到 session 或 cookie 或显式移交：

后者将要求您调用外部模块，例如：

```
$doc->addScript("path/to/your/js.php?option1=$value1&amp;option2=$value2"); 
```

我希望你能明白。

# jasper-reports - 如何在 jasperreport 中显示超出动态折线图的字段值？

> ID：15481104
> 
> 赞同：3
> 
> 时间：2013-03-18T15:51:25.280
> 
> 标签：jasper-reports, linechart

我使用 jasperreports 并尝试在折线图的 x 轴标签之外显示一些额外的数据，但我遇到了几个问题。我要显示的值存储在一个字段中，该字段的值需要水平打印，并且它们还必须完全超出图表的相关 x 轴标签。此外，x 轴标签的数量可以动态变化（但始终与要打印在标签下方的字段值相同），具体取决于所选的报告周期。这是一个在 x 轴上有四个标签的图表示例。

![示例图表的外观](../Images/1678677bc69e2c0f389d83a0f7950ba8.png)

有没有完成所有的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:19:23.417

我终于想出了怎么做。图片显示了我的解决方案。这次我用条形图完成了它，但它当然也适用于折线图。我有点滥用条形图来匹配我的规格。在静态文本元素“附加数据”下方，我放置了另一个条形图，其中包含我想要显示的字段数据，作为类别表达式的值。其他一切都被隐藏了（例如，通过给它背景颜色）。我隐藏了轴和标签，并将报表元素的大小减小到“50”。似乎你不能把它变小，因为类别轴的刻度标签就会消失。您需要注意的是不能有重复的类别表达式值，因为它们将被统一到一个标签中。我通过实现一个实现可比较接口的新类来解决这个问题，这样我就可以创建具有相同 toString() 表示但具有不同 ID 的对象。我知道这是一个 HACK，但至少它似乎可以工作并且它看起来（有点）像我想要的那样。如果有人有更好的解决方案，请告诉我。

![您看到的实际上是两个条形图，但其中一个隐藏了大部分元素](../Images/7fdcb8b5f7bd50b445416c8258b7a805.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:26:37.863

我有同样的问题，我没有找到任何解决方案，你可以做什么，你可以在下面的折线图上创建一个表格报告，你可以在其中显示值。您可以将鼠标悬停属性添加到折线图。

否则，使用相同的查询创建一个新的表格报表，并将该报表与折线图超链接，让用户决定他是否也想查看这些值，如果他想查看数据点，他可以向下钻取报表。

# c# - 鼠标事件如何在 WPF 中工作？

> ID：15481106
> 
> 赞同：2
> 
> 时间：2013-03-18T15:51:33.197
> 
> 标签：c#, wpf, wpf-controls

WPF 控件如何知道鼠标事件发生在它上面，以便它可以引发鼠标事件。

例如，Button 控件如何知道捕获 MouseDown 和 MouseUp 事件并将其转换为单击事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:01:32.880

Windows 使用消息传递模型来通知 GUI 元素正在发生的事情。Windows 将这些消息放入一个消息队列中，每个窗口都不断地检查这个队列以查看存在哪些消息。这通常称为消息循环。然后窗口负责接收发往它自己的消息，并执行必要的操作（例如引发用户代码响应的事件）。我建议阅读[此](http://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows)和[此](http://msdn.microsoft.com/en-us/library/windows/desktop/ff381405(v=vs.85).aspx)以了解有关消息循环和消息的更多信息。

在 WinForms 中，每个控件都是自己的窗口，因此每个控件都有自己的消息队列。这不是 WPF 的情况。WPF 以不同的方式处理这一点，因为 WPF 将整个窗口视为一个项目，在运行时组合必要的元素。我建议阅读[本文](http://www.abhishekshukla.com/wpf/advanced-wpf-part-5-of-5-interop-in-windows-presentation-foundation/)以了解有关 WPF 如何处理这种情况的更多信息。

除了我在这里列出的资源之外，还有许多其他资源，如果您只是搜索 Windows 消息、Windows 消息循环并将 WPF 加入其中。

# java - Java socket 消息到达顺序

> ID：15481112
> 
> 赞同：4
> 
> 时间：2013-03-18T15:51:48.390
> 
> 标签：java, sockets

我想写一个套接字程序...

```
Socket socket = new Socket("127.0.0.1",12345);
DataOutputStream output = new DataOutputStream( socket.getOutputStream() );
output.writeUTF("Hello");
output.writeUTF("World");
 ...
 ... 
```

“Hello”、“World”……哪个字符串先到达？socket有保证订单吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T16:08:41.687

TCP 协议保证所有消息都按顺序完整发送。所以你可以依靠“世界”总是在“你好”之后到达的前提。如果“Hello”数据包由于某种原因丢失，“World”数据包到另一个应用程序的传递将被延迟，而“Hello”数据包被再次重新请求。

这是由相关主机的操作系统的网络堆栈自动处理的——作为应用程序程序员，您无需为此做任何事情。

有关 TCP 协议如何工作的更多信息，我可以向您推荐[有关它的维基百科文章](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)。

另一方面，当您使用 UDP 套接字时，情况就不同了。UDP 不保证顺序或可靠性，因此一个数据包可能会超过另一个数据包（因此用户在“Hello”之前收到“World”），或者甚至丢失了一个数据包（用户只收到“Hello”或只有“世界”）。

然而，标准的[Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)类默认使用 TCP。这可以通过在构造函数中通过`true`作为第三个参数传递（已弃用）来告诉它使用 UDP 来覆盖，或者当您将自定义套接字实现传递给使用 UDP 的静态方法[Socket.setSocketImplFactory](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSocketImplFactory%28java.net.SocketImplFactory%29)时（这将是疯狂的 -这种方法的目的是实现既不是 UDP 也不是 TCP 的外来传输层协议）。

通常，UDP 套接字由[DatagramSocket](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html)类表示。

# jquery - 用于灯箱的 jquery 下一个/上一个按钮

> ID：15481119
> 
> 赞同：0
> 
> 时间：2013-03-18T15:52:00.730
> 
> 标签：jquery, button, image-gallery, next

我是一个初学者，我正在尝试用 jquery 制作一个灯箱网络画廊。这是一个基本的图库，当您单击列表中的图像（缩略图）时，jquery 会显示隐藏的灯箱 div，这会使背景变暗并显示带有白色边框的当前图像（全尺寸），带有下一个/上一个和关闭边框上的按钮。我的下一个/上一个按钮只能工作一次，我不知道如何修复它。（我没有用 prev 按钮做任何事情，所以这显然根本不起作用。）有什么想法吗？这是代码：

html

```
<ul class="gallery">
        <li> <a href="img/gallery/fullsize/full_foto001.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto001.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto002.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto002.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto003.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto003.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto004.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto004.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto005.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto005.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto006.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto006.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto007.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto007.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto008.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto008.jpg"> </a> </li>
        <li> <a href="img/gallery/fullsize/full_foto009.jpg" class="lightbox_trigger"> <img src="img/gallery/thumbnail/thumbnail_foto009.jpg"> </a> </li>
    </ul>

<div id="lightbox">

<div id="gallery_content">

</div> 
```

jQuery

```
 $('.lightbox_trigger').click(function(e) {
    //prevent default action (hyperlink)
    e.preventDefault();

    $('#lightbox').show('slow');

    var image_href = $(this).attr("href");

    var image_href2 = $(this).parent().next('li').children('a').attr("href");

   $('#gallery_content').html('<img src="' + image_href + '" />' + 
   '<div id="gallery_close"> <img src="img/gallery/lightbox/close.png"/> </div>' + 
   '<div id="gallery_next"> <img src="img/gallery/lightbox/next.png"/> </div>'+
   '<div id="gallery_prev"> <img src="img/gallery/lightbox/previous.png"/> </div>');

   //next
   $(document).on('click', '#gallery_next', function(){
        $('#gallery_content').html('<img src="' + image_href2 + '" />' +
        '<div id="gallery_close"> <img src="img/gallery/lightbox/close.png"/> </div>' + 
        '<div id="gallery_next"> <img src="img/gallery/lightbox/next.png"/> </div>'+
        '<div id="gallery_prev"> <img src="img/gallery/lightbox/previous.png"/> </div>');

   });

   //previous
   $('#gallery_prev').click(function(){

   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:32:11.927

我想到了。我不知道它有多“优雅”，但它确实有效。这里是：

```
$(document).ready(function() {
 $('.lightbox_trigger').click(function(e) {
        //prevent default action (hyperlink)
        e.preventDefault();

        $('#lightbox').show('slow');

        $(this).attr('class','this');

        var image_href = $(this).attr("href");

        var image_href2 = $('.this').parent().next('li').children('a').attr("href");

       $('#gallery_content').html('<img src="' + image_href + '" />' + 
       '<div id="gallery_close"> <img src="img/gallery/lightbox/close.png"/> </div>' + 
       '<div id="gallery_next"> <img src="img/gallery/lightbox/next.png"/> </div>'+
       '<div id="gallery_prev"> <img src="img/gallery/lightbox/previous.png"/> </div>');

 });

  //next
  $(document).on('click', '#gallery_next', function(){
            var image_href2 = $('.this').parent().next('li').children('a').attr("href");
            $('#gallery_content').html('<img src="' + image_href2 + '" />' +
            '<div id="gallery_close"> <img src="img/gallery/lightbox/close.png"/> </div>' + 
            '<div id="gallery_next"> <img src="img/gallery/lightbox/next.png"/> </div>'+
            '<div id="gallery_prev"> <img src="img/gallery/lightbox/previous.png"/> </div>');

            $('.this').attr('class', 'remove');
            $('.this').removeAttr('class', 'this');
            $('.remove').parent().next('li').children('a').attr('class', 'this');
            $('.remove').removeAttr('class', 'remove');

  });

  //previous

 //hide 
 $(document).on("click", "#gallery_close", function(event){
        $('.lightbox_trigger').removeAttr('class', 'this');
        $('.lightbox_trigger').removeAttr('class', 'remove');

        $('#lightbox').hide();

 });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:55:33.043

我会说类似

```
$('.lightbox_trigger').click(function(e) {
    //prevent default action (hyperlink)
    e.preventDefault();

    $('#lightbox').show('slow');

    var image_href = $(this).attr("href");

    var image_href2 = $(this).parent().next('li').children('a').attr("href");

   $('#gallery_content').html('<img src="' + image_href + '" />' + 
   '<div id="gallery_close"> <img src="img/gallery/lightbox/close.png"/> </div>' + 
   '<div id="gallery_next"> <img src="img/gallery/lightbox/next.png"/> </div>'+
   '<div id="gallery_prev"> <img src="img/gallery/lightbox/previous.png"/> </div>');
});
//next
    $('#gallery_next').live('click', function(){
         $('#gallery_content').html('<img src="' + image_href2 + '" />' +
         '<div id="gallery_close"> <img src="img/gallery/lightbox/close.png"/> </div>' + 
         '<div id="gallery_next"> <img src="img/gallery/lightbox/next.png"/> </div>'+
         '<div id="gallery_prev"> <img src="img/gallery/lightbox/previous.png"/> </div>');
    });
// prev
    $('#gallery_prev').live('click', function() { ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:06:16.927

你检查过javascript错误控制台吗？如果触发了错误，脚本将停止执行，这就是某些东西只触发一次的常见原因。此外，我只会替换图像的 src，而不是该 div 中的整个 html。

# c# - HtmlTextWriter 中的 RenderControl - InvalidOperationException

> ID：15481121
> 
> 赞同：0
> 
> 时间：2013-03-18T15:52:11.410
> 
> 标签：c#, asp.net

我想呈现一个 Control 对象，该对象是在用户发送回发请求时动态创建的。为此，我使用以下代码：

```
StringBuilder sb = new StringBuilder();
HtmlTextWriter ht = new HtmlTextWriter(new StringWriter(sb));
Rating r = new Rating("r", 5, 3, No, Big);
r.RenderControl(ht); 
```

不幸的是`InvalidOperationException`，在最后一行产生了一个并出现以下错误：

> 该页面不能为空。确保在 ASP.NET 请求的上下文中执行此操作。

我可能误解了我应该使用这种`RenderControl`方法的方式，希望你能帮助我解决我的问题。

谢谢你，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:08:58.420

在尝试呈现之前，您似乎没有将新的 Rating 控件附加到 Page 控件。

[从RenderControl](http://msdn.microsoft.com/en-us/library/htwek607.aspx)的 MSDN文档中，调用的内部将寻找封闭的 Page，并根据 Page 对象的设置执行一些活动。

您可以在页面中添加一个占位符并在尝试呈现之前将 Rating 控件插入其中。

# java - TomEE：CDI 扩展 - 未找到提供程序错误

> ID：15481123
> 
> 赞同：0
> 
> 时间：2013-03-18T15:52:13.073
> 
> 标签：java, jakarta-ee, cdi, apache-tomee

我正在运行 TomEE+ 1.5.1 并尝试创建 CDI 扩展。我创建了一个实现*javax.enterprise.inject.spi.Extension*的类，并将该类名放入文件*META-INF/services/javax.enterprise.inject.spi.Extension*

类本身很简单：

```
import java.util.HashSet;
import java.util.Set;

import javax.enterprise.event.Observes;
import javax.enterprise.inject.spi.Extension;
import javax.enterprise.inject.spi.ProcessAnnotatedType;

public class ScanAllClassesExtension implements Extension {

    private Set<Class<?>> allClasses;

    public void handleProcessAnnotatedTypeEvent(@Observes ProcessAnnotatedType<?> processAnnotatedTypeEvent) throws Exception {
        Class<?> type = processAnnotatedTypeEvent.getAnnotatedType().getJavaClass();
        getAllClasses().add(type);
    }

    public Set<Class<?>> getAllClasses() {
        if (allClasses == null) {
            allClasses = new HashSet<Class<?>>();
        }
        return allClasses;
    }

} 
```

在 TomEE 上部署时出现此错误：

```
java.util.ServiceConfigurationError: javax.enterprise.inject.spi.Extension: Provider test.extensions.ScanAllClassesExtension not found 
```

在 OpenEJB 中调试时，此错误是由 ClassNotFoundException 引起的，但正确的路径在类加载器的 url 列表中。

我不知道为什么会这样，我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:30:35.547

你能试试tomee 1.6快照吗（[https://repository.apache.org/content/groups/snapshots/org/apache/openejb/apache-tomee/1.6.0-SNAPSHOT/apache-tomee-1.6.0-20130330.041018-36 -webprofile.zip](https://repository.apache.org/content/groups/snapshots/org/apache/openejb/apache-tomee/1.6.0-SNAPSHOT/apache-tomee-1.6.0-20130330.041018-36-webprofile.zip) )

顺便说一句，你在你的应用程序中提供了 api 吗？它可能会导致某些版本的类加载问题

# highcharts - 尝试在 HighStock 中的条形图上设置最小高度

> ID：15481125
> 
> 赞同：9
> 
> 时间：2013-03-18T15:52:20.457
> 
> 标签：highcharts, highstock

![在此处输入图像描述](../Images/ce8740f702cc4e2f8aae5e49b0db53ca.png)我们正在开展一个项目，该项目可以绘制两组每个国家/地区的销售额图表。挑战在于，由于我们的原型专注于美国，因此在美国的销售量总是让所有其他国家都相形见绌。我们想要做的是为大于 0 的任何条设置最小高度，以便用户能够看到所有条并知道将鼠标悬停在悬停状态的计数。

我附上了一张图片，以显示美国的销售规模如何使右侧国家/地区的销售额看起来像 0。在大多数情况下，只有美国出现，但我们永远不会在底部显示一个国家，除非有至少 1 次销售。

无论如何要定义一个最小高度，以便始终存在一些条？我们尝试添加边框，但在销售量相对于大条形图如此小的情况下不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-18T16:26:09.480

是的，您可以使用 minPointLength：[http ://api.highcharts.com/highstock#plotOptions.column.minPointLength](http://api.highcharts.com/highstock#plotOptions.column.minPointLength)

除非这些数据的普通查看者习惯于使用对数缩放的数据，否则以这种方式缩放它不是一个好主意。人们会按他们应该的方式比较条形的长度，并且会对数据产生完全不切实际的印象。

在大多数情况下，1 像素和 0 像素之间的差异足以表明存在一个值，但不足以以任何有意义的方式扭曲数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:57:28.990

您可以考虑的一件事是使用对数刻度：

[http://www.highcharts.com/demo/line-log-axis](http://www.highcharts.com/demo/line-log-axis)

```
yAxis: {
    type: 'logarithmic'
}, 
```

即使一个条比其他条大几个数量级，这也可以让您可视化不同的高度。

如果它真的太小以至于在您最初绘制它时看不到它，那么其他任何东西都会扭曲您的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-13T10:02:59.420

我解决了这个问题，如下所示

```
 events: {
        load: function(event) {
        // Following code is added to make tiny stack visible
            var chart = this;
            var totalValue = 82870; // Sum of all stacks
            var minimumPercentageValue = 0.8;

            this.series.forEach(function(series) {
                series.points.forEach(function(point) {
                    var valueInPercentage = (point.y * 100) / totalValue;
                    if (valueInPercentage < minimumPercentageValue) {
                        point.update({
                            y: ((minimumPercentageValue+valueInPercentage)*totalValue)/100,
                            realValue: point.y
                        }, false);
                    }
                });
            });

            this.redraw();
        }
    } 
```

```
var chart = Highcharts.chart('chart-container', {
    credits: false,
    chart: {
        type: 'bar',
        animation:false,
        height:200,
        events: {
            load: function(event) {
            // Following code is added to make tiny stack visible
                var chart = this;
                var totalValue = 82870; // Sum of all stacks
                var minimumPercentageValue = 0.8;

                this.series.forEach(function(series) {
                    series.points.forEach(function(point) {
                        var valueInPercentage = (point.y * 100) / totalValue;
                        if (valueInPercentage < minimumPercentageValue) {
                            point.update({
                                y: ((minimumPercentageValue+valueInPercentage)*totalValue)/100,
                                realValue: point.y
                            }, false);
                        }
                    });
                });

                this.redraw();
            }
        }
    },
    title:{
        text:"Shifts"
    },
    xAxis: {
        visible:false,
        endOnTick:false,
        categories: ['Shifts'],
    },
    yAxis: {
        endOnTick:false,
        visible:false,
        max: 82870,
    },
    legend: {
    		reversed: true,
        align: 'left',
        padding:0,
        itemPaddingBottom:15,
        itemMarginBottom:5,
        symbolRadius:0,
        verticalAlign: 'bottom',
        floating: true,
    	  itemMarginBottom:5,
        useHTML: true,
        labelFormatter: function (params) {
            return '<div><div>'+this.name+'</div><div style="font-weight:normal">'+this.userOptions.start_time+'</div><div style="font-weight:normal">'+this.userOptions.end_time+'</div></div>';
        }
    },
    plotOptions: {
        series: {
            stacking: 'normal',
            pointWidth: 50,
            pointPlacement:'on',
            states: {
              hover: {
                enabled: false
              },
              inactive: {
                opacity: 1
              },
              marker: {
                enabled: false
              }
            }
        },
    },
    series: [{"name":"Shift 1","start_time":"12\/06\/2019 05:46:47 PM","end_time":"13\/06\/2019 02:47:46 PM","data":[75659]},{"name":"Break","start_time":"03\/06\/2019 03:42:11 PM","end_time":"03\/06\/2019 03:42:31 PM","data":[20]},{"name":"Shift 2","start_time":"03\/06\/2019 03:41:39 PM","end_time":"03\/06\/2019 03:42:11 PM","data":[32]},{"name":"Shift 3","start_time":"29\/05\/2019 08:17:32 PM","end_time":"29\/05\/2019 10:14:43 PM","data":[7031]},{"name":"Shift 4","start_time":"29\/05\/2019 08:16:32 PM","end_time":"29\/05\/2019 08:17:32 PM","data":[60]},{"name":"Shift 5","start_time":"29\/05\/2019 08:15:24 PM","end_time":"29\/05\/2019 08:16:32 PM","data":[68]}],
});
```

```
<script src="https://code.highcharts.com/highcharts.js"></script>
<div id="chart-container" style="height:400px; width:100%" ></div>
```

# ruby-on-rails - 将产品标记为已使用，Rails 方式？

> ID：15481131
> 
> 赞同：1
> 
> 时间：2013-03-18T15:52:43.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

今天我正在尝试实现以下内容：

网站上有产品，有用户。如果用户已登录（如果 current_user），他可以标记产品，就像他正在消费该产品一样。稍后他可以单击一个按钮，并将其从已消耗的按钮中删除。

我正在为此苦苦挣扎：

路线.rb

```
resources :users do
    member do
        get :product_add
        get :product_remove
    end
end 
```

* * *

```
class UsersController < ApplicationController
    def product_add
      if current_user
         @product = Product.find(params[:id])
         @user = current_user
         @user.product = []
         @user.product << @product.id
         redirect_to @product, notice: "succesful..."
      else
         redirect_to @product, notice: "error..."
      end
    end
end 
```

* * *

```
class AddProductsToUsers < ActiveRecord::Migration
  def change
    add_column :users, :product, :text
  end
end 
```

必须有一种 Rails 方法可以做到这一点:) 如果可以，请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:00:00.327

您应该创建三个表`User`：`Product`和`ConsumedProducts`。表`product`和`user`表是多对多的关系。中间表将是`ConsumedProducts`您存储用户 ID 和产品 ID 的位置。

```
Class User < ActiveRecord::Base
   has_many :consumed_products;
   has_many :products, :through => :consumed_products
end

Class Product < ActiveRecord::Base
   has_many :consumed_products;
   has_many :users, :through => :consumed_products
end

Class ConsumedProducts < ActiveRecord::Base
   belongs_to :user
   belongs_to :product
end 
```

每次用户点击他消费了一个产品时，您将使用 user_id 和 product_id 填写中间表。每次他取消选中产品时，您都会删除该记录。

**另一种选择是使用 has_and_belongs_to_many**，请参阅文档以了解差异（如果您的中间表没有额外属性，则使用第二个，这是您的情况，在命名额外表时要小心）。

如果你真的想这样实现，你可以像你实现的那样，但改变 HTTP 方法：

```
resources :users do
    member do
        post :product_add
        delete :product_remove
    end
end 
```

您可以查看此文献以获得更多帮助： http: [//guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:02:43.993

创建`many-to-many`关系：

```
class CreateUsersProducts < ActiveRecord::Migration
  def change
    create_table :users_products, :id => false do |t|
      t.integer :user_id
      t.integer :product_id
    end
  end
end

Class User < ActiveRecord::Base
   has_and_belongs_to_many :products    
end

Class Product < ActiveRecord::Base
   has_and_belongs_to_many :users
end

def product_add
  if current_user
     @product = Product.find(params[:id])
     @user = current_user
     @user.products << @product.id
     redirect_to @product, notice: "succesful..."
  else
     redirect_to @product, notice: "error..."
  end
end 
```

`has_many with :through`当你有`common attributes`桌子时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:03:02.293

看看 Rails 的[嵌套资源](http://guides.rubyonrails.org/routing.html#nested-resources)。它使您能够轻松地在其他路线内创建路线。例如：

```
resources :users do
  resources :products
end

POST users/12/products/449    products#create
PUT  users/12/products/449    products#update
... 
```

然后，在您的 ProductsController 中，您将可以访问 a`param[:user_id]`和`param[:product_id]`. 尽管您可能希望为 Products 创建一个新表以及 Products 和 Users 之间的映射表（可能是 UserProducts？）。

查看[Rails 关联基础知识](http://guides.rubyonrails.org/association_basics.html)以了解有关将表链接在一起的更多信息。

# .net - 为什么 System.Runtime.InteropServices.ClassInterfaceType 枚举中没有 AutoUnknown 值？

> ID：15481134
> 
> 赞同：1
> 
> 时间：2013-03-18T15:52:52.607
> 
> 标签：.net, com, interopservices, tlbexp

.NET 中的[System.Runtime.InteropServices.ClassInterfaceType](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.classinterfacetype.aspx)枚举有一个`AutoDispatch`值和一个`AutoDual`值，但没有`AutoUnknown`值。**为什么不呢，有没有人已经想出了一种相当自动化的方法来完成它，这样我就不必重新发明轮子了？**

对于更多背景知识，以下是当前枚举中的三个值以及它们的作用：

*   `ClassInterfaceType.None`不会为您创建类接口。这是 Microsoft 的推荐值。如果没有类接口，您必须使用您想要的任何成员创建自己的接口，并让您的类实现它。然后，您可以在接口上使用[System.Runtime.InteropServices.ClassInterfaceAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.classinterfaceattribute.aspx)属性使其成为分派接口（支持后期绑定客户端）、未知接口（支持早期绑定客户端）或双重接口（支持早期绑定客户端和后期绑定客户端）。
*   `ClassInterfaceType.AutoDispatch`创建一个派生自`IDispatch`没有显式成员的类接口。由于没有显式成员，它只能支持后期绑定的调用者。
*   `ClassInterfaceType.AutoDual`创建一个派生自该类接口的类接口，`IDispatch`该接口**确实**具有该类的所有公共非静态成员以及其基类和任何已实现接口的所有成员的显式成员。Microsoft 强烈反对使用这个值，“因为版本限制”，因为如果类的任何成员发生变化，类接口也会发生变化。（因此，在类更改后不重新绑定的调用者最终可能会调用错误的方法或传递不正确的参数。）

所以我想知道的是为什么没有一个调用的值`ClassInterfaceType.AutoUnknown`会创建一个派生自该类接口的类接口，该接口`IUnknown`明确声明您的类的成员（不是基类或它实现的其他接口）。

虽然我们在这里，但我也希望有`ClassInterfaceType.AutoDualDirect`类似 AutoDual 的东西，除了它不会公开基类中的所有成员和所有实现的接口，它只会公开类的直接成员，因为其他成员可以通过其他 COM 接口检索。

那么这里的故事是什么，我错过了什么？我知道微软表示，由于“版本控制挑战”，它建议不要使用 AutoDual，并且这些担忧在某种程度上也适用于 AutoUnknown。但尽管有这个建议，他们仍然**有**AutoDual。为什么他们也没有 AutoUnknown？

关于那些“版本控制挑战”的一句话：这些问题中最危险的方面只适用于后期绑定的调用者。AutoUnknown 将生成一个 -`IUnknown`派生接口，而不是 -`IDispatch`派生接口，因此我们只需要关注早期绑定客户端可能遇到的版本控制问题。并且由于任何自动生成的类接口的 IID 都会在类的公共非静态成员发生变化时发生变化，因此早期绑定的客户端将无法对现有成员进行“错误调用”，它只会失败 QueryInterface( ) 用于类接口。仍然是失败，但可以管理，而不是崩溃或任何事情。这甚至没有打破不允许接口改变的 COM 规则；它没有改变，它正在成为一个新接口（新 IID）。的确，`IUnknown`AutoDual 机制的一半（减去派生成员）。事实上，它比 AutoDual 遇到的“版本控制挑战”*更少*，因为 AutoDual 也有所有后期绑定的挑战。

所以我不得不再次问：如果 AutoUnknown 不存在，为什么 AutoDual 存在！

为了给出一些实际示例，请考虑以下 C# 代码：

```
using System.Runtime.InteropServices;

[ComVisible(true)]
[ClassInterface(ClassInterfaceType.AutoDual)]
public class F
{
    public int foo()
    {
        return 5;
    }
} 
```

生成以下 idl：

```
[
  uuid(1F3A7DE1-99A1-37D4-943E-1BF5CFDF7DFA),
  version(1.0),
  custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "F")
]
coclass F {
    [default] interface _F;
    interface _Object;
};

[
  odl,
  uuid(3D0A1144-1C0B-3877-BE45-AD8318898790),
  hidden,
  dual,
  nonextensible,
  oleautomation,
  custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "F")    

]
interface _F : IDispatch {
    [id(00000000), propget,
      custom(54FC8F55-38DE-4703-9C4E-250351302B1C, 1)]
    HRESULT ToString([out, retval] BSTR* pRetVal);
    [id(0x60020001)]
    HRESULT Equals(
                    [in] VARIANT obj, 
                    [out, retval] VARIANT_BOOL* pRetVal);
    [id(0x60020002)]
    HRESULT GetHashCode([out, retval] long* pRetVal);
    [id(0x60020003)]
    HRESULT GetType([out, retval] _Type** pRetVal);
    [id(0x60020004)]
    HRESULT foo([out, retval] long* pRetVal);
}; 
```

很好，但我建议 AutoUnknown 将有助于生成此 idl：

```
[
  uuid(1F3A7DE1-99A1-37D4-943E-1BF5CFDF7DFA),
  version(1.0),
  custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "F")
]
coclass F {
    [default] interface _F;
    interface _Object;
};

[
  odl,
  uuid(BC84F393-DACC-353F-8DBE-F27CB2FB4757),
  version(1.0),
  oleautomation,
  custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "_F")    

]
interface _F : IUnknown {
    HRESULT _stdcall foo([out, retval] long* pRetVal);
}; 
```

如果现在没有办法自动执行此操作，我将编写一些使用反射来执行此操作的内容，因此我也会很感激有关这方面的任何建议。例如，我需要检查方法上的任何属性吗？关于参数？我深入研究了 IL`System.Runtime.InteropServices.TypeLibConverter`以了解它是如何做到的，但不幸的是，所有好东西都在我无法使用的私有内部调用 nConvertAssemblyToTypeLib() 函数中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:14:10.810

真正的问题是你想达到什么目标？

来自`ClassInterface`文档：*“指示要为暴露给 COM 的类生成的类接口的类型，如果生成了接口的话。”*

背后的想法`ClassInterface`是让 COM 客户端可以使用类的编程接口——这就是为什么你会看到完整的接口，包括基类方法。目标不是为类功能的子集提供视图。这就是接口的用途（和`ClassInterfaceType.None`）

提供一个没有后期绑定能力的类接口（即`IDispatch`）是你不应该做的事情（`ClassInterface`幸运的是没有启用它），因为它直接取决于你的类的布局才能正常工作。这意味着类和它的基类都不应该改变。这是很难保证的，为什么这通常是个坏主意，除了它违背了整个 COM 哲学。早期绑定的客户端与界面的 vtable 布局紧密耦合——布局中的每一次更改都会破坏它。后期绑定的客户端不会出现这个问题，因为方法是按名称解析的，它们可以正确处理丢失的方法。

如果您确实需要，使用`AutoDual`已经提供了对方法的早期绑定访问，所以我不明白您为什么要重新发明轮子。

# visual-studio-2012 - Visual Studio 2012 和 SQL Server Express

> ID：15481138
> 
> 赞同：2
> 
> 时间：2013-03-18T15:53:14.593
> 
> 标签：visual-studio-2012, sql-server-2012-express

是否有可能安装在我的机器上的 Visual Studio Ultimate 不包括 SQL Server Express，他们在安装时没有关闭任何选项，他们只是按照默认选项安装它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T12:08:08.347

它带有 SQL Server，但实例名称是 (LocalDb)\v11.0 而不是 .\sqlexpress

# java - Android 翻译动画导致 Clicklistener 问题

> ID：15481142
> 
> 赞同：1
> 
> 时间：2013-03-18T15:53:22.183
> 
> 标签：java, android, android-animation, translate-animation, clicklistener

在动画运行后，我在 android 中创建的翻译动画出现问题，我设置的任何点击侦听器都保持在它们在导致异常问题之前所处的确切坐标中，我花了几天时间研究这个问题，但还没有找到修复程序，我发现的一些建议包括将我的目标开发级别更改为 4.0 并更改 myLayout.layout(x,x,x,x)，这些都不适合我，关于如何更改此代码的任何建议使任何clicklisteners 与布局一起移动？

```
upperView = (LinearLayout) findViewById(R.id.upperView);
    hiddenMenu = (LinearLayout) findViewById(R.id.hiddenMenu);

    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    Integer width = metrics.widthPixels;

    upperView.getLayoutParams().width = width;
    hiddenMenu.getLayoutParams().width = (int) (width * 0.75);

    int theDistance = hiddenMenu.getLayoutParams().width;

    //Run animation
    TranslateAnimation anim = new TranslateAnimation(0, theDistance - 0 , 0, 0);
    anim.setDuration(1000);
    anim.setFillAfter( true );
    upperView.startAnimation(anim); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T14:08:59.357

问题是 TranslateAnimation 不修改视图的实际位置，只平移视图的绘制位置。

尝试使用[PropertyAnimation](http://developer.android.com/guide/topics/graphics/prop-animation.html)来执行此操作。他们已经定位到实际查看，而不是仅仅定位绘制的视图。

更新：尝试使用类似的东西

```
upperView.animate().setDuration(1000).translationX(theDistance - 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:17:03.133

您需要了解几件事。android 或较旧的 sdk 将 on click 侦听器保留在对象的原始位置，重要的是您要么在新位置为 on click 创建一个不可见的视图，要么使用较新的[sdk](http://developer.android.com/reference/android/animation/Animator.html)。

# android - ActionScript 3：如何保持准确的 BPM 计数器？

> ID：15481143
> 
> 赞同：0
> 
> 时间：2013-03-18T15:53:24.763
> 
> 标签：android, actionscript-3, air, timer, audio-processing

我希望在 ActionScript 3（作为 Adob​​e AIR Android 应用程序）中创建一个鼓机，它将保持用户定义的速度 (BPM)。

我正在努力寻找一种方法来保持项目的及时性，目前我已经做到了 5 种不同的声音以 8 个方格的行表示，用户可以单击每个方格来选择何时播放该声音（希望这是有道理的）。

目前我正在使用 Timer 来保持项目的及时性，这是非常滞后和不一致的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:00:33.720

使用计时器是个坏主意，我说过...

问题是计时器有一个漂移并在几毫秒后触发。尝试一个简单的测试，其中您有一个每 500 毫秒执行一次的计时器，然后比较`getTimer()`计数。我在实验中发现计时器不断关闭，并且看起来它不能自我纠正。我尝试过使用自校正计时器，它会根据`getTimer()`自上次运行以来的差异来更改触发时间，但它仍然不可靠。并且无论何时您的处理器负载增加，计时器都会关闭。

处理这个问题的正确方法是使用 byteArray 数据作为声音的来源。根据采样分辨率的计算，您可以提前使用数据填充流，并且声音将按时播放，几乎可以保证。我还没有去创造自己做的东西。但是您可以使用几个库来帮助您解决这个问题。

我的前两个递减库是 SiON 和 tonfall

您可以在[http://wonderfl.net/c/qf4b看到 SiON 的示例，在](http://wonderfl.net/c/qf4b)[http://tonematrix.audiotool.com/](http://tonematrix.audiotool.com/)
看到 tonfall 示例

虽然我还没有在 android 上尝试过，但我认为两者都应该工作

# c# - 如何在动态添加的表中添加动态链接

> ID：15481147
> 
> 赞同：1
> 
> 时间：2013-03-18T15:53:38.657
> 
> 标签：c#, asp.net, dynamic

我是新手，很难添加链接，在动态添加的表格中显示为 img。

```
 string search = Search.Text;
 IMyData members = new MyData();
 DataTable dt = new DataTable();

 dt = members.Search(search);

 Table t = new Table();
 t.ID = "tblTable";
 TableRow row = null;

 for (int i = 0; i < dt.Rows.Count; i++)
 {
    HyperLink link = new HyperLink();
    row = new TableRow();
    for (int j = 0; j < dt.Columns.Count; j++)
    {
       TableCell cell = new TableCell();
       if (j == dt.Columns.Count - 1)     //This last field may hava a number
       {
          if (Convert.ToInt32(dt.Rows[i][j].ToString()) > 0)
          {
             link.ID = "link" + i + "_" + j;
             link.NavigateUrl = "members.aspx?showLease=" + dt.Rows[i][j].ToString();
             link.ImageUrl = "img/document.png";
             Page.Controls.Add(link);      // How to put this in a cell, not on page 
          }
          else
          { 
             cell.Text = dt.Rows[i][j].ToString();
          }
        }
        row.Cells.Add(cell);
      }
      t.Rows.Add(row);
    }
    pnlTable.Controls.Add(t); 
```

如何将超链接放到单元格而不是页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:08:57.953

您可以像在 Page 中那样在 TableCell 中添加控件。像这样更改您的代码

```
Page.Controls.Add(link);//Will add control in page
cell.Controls.Add(link);//Will add control in table cell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:23:52.420

见下文，我将 Page.Controls.Add(link) 更改为 cell.Controls.Add(link) 并将您的超链接声明移动到单元格循环中。否则 if 只会添加到最后一个单元格中。但是如果我看到你的代码，似乎只有最后一个单元格会有链接或文本，因为 j == dt.Columns.Count - 1

```
for (int i = 0; i < dt.Rows.Count; i++) {
    row = new TableRow();
    for (int j = 0; j < dt.Columns.Count; j++)
    {
       HyperLink link = new HyperLink();
       TableCell cell = new TableCell();
       if (j == dt.Columns.Count - 1)     //This last field may hava a number
       {
          if (Convert.ToInt32(dt.Rows[i][j].ToString()) > 0)
          {
             link.ID = "link" + i + "_" + j;
             link.NavigateUrl = "members.aspx?showLease=" + dt.Rows[i][j].ToString();
             link.ImageUrl = "img/document.png";
             cell.Controls.Add(link);      // How to put this in a cell, not on page 
          }
          else
          { 
             cell.Text = dt.Rows[i][j].ToString();
          }
       }
       row.Cells.Add(cell);
     }
     t.Rows.Add(row);
} 
```

# ruby - gearman 任务队列因已完成的任务而溢出

> ID：15481150
> 
> 赞同：2
> 
> 时间：2013-03-18T15:53:49.873
> 
> 标签：ruby, gearman

我在我的项目中使用 Gearman Job 服务器。我使用“gearman-ruby”宝石。应用程序中有一个任务队列。一项任务有 4 个部分。
适当地，我有 4 名工人来解决这部分任务。

我的系统在没有 Gearman 的情况下在 10 分钟内解决了 1 个任务。但是当我使用 gearman 时，解决 10 个任务的时间是 2-3 小时 :(
Gearman 队列位于 mysql 中。队列溢出。

Cron 启动设置任务的客户端。一项任务 - 解析一页。第一名工人 - 获取页面（初始化），第二名 - 获取照片（图像），第三名 - 获取评论（文本），第四名 - 获取特征（文本）。第一个工作人员获取页面，其他工作人员从该页面解析不同的数据。

齿轮人配置：

```
 $cat /etc/sysconfig/gearmand 
    ## Settings for gearmand
    OPTIONS="--listen=127.0.0.1
             --job-retries=3 \
             --log-file=/var/log/gearman.log \
             --queue-type=MySQL \
             --mysql-host=localhost \
             --mysql-port=3306 \
             --mysql-db=gearman \
             --mysql-table=queue"

    $gearmand --version
    gearmand 0.35 
```

请帮我设置齿轮员以加快工作速度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:58:55.107

1.  我在我的代码中发现了一个事件，通过该事件任务不会返回“true”。在 gearman 协议中，完成的任务必须返回“真”。
2.  我设置了没有持久性存储的 gearman 配置。

```
 OPTIONS="--listen=127.0.0.1
                 --job-retries=3 \
                 --log-file=/var/log/gearman.log \
                 --threads=12" 
```

З. 我使用 '--threads=threds_count' 参数为 gearman 作业服务器添加了更多线程。

现在我的系统工作又快又稳定！:)

* * *

如果您使用持久性存储并且您的队列溢出：您可以定期运行脚本来清理 gearman_queue。我通过定期调用 sh 脚本解决了这个问题（为此我使用了 cron ）：

```
 # stop gearman
    sudo /etc/init.d/gearman stop
    # delete tasks from DB
    mysql -Bse 'DELETE FROM queue' gearman -u root
    # start gearmand back
    sudo /etc/init.d/gearman start
    echo '*** gearman queue cleaned. ***' 
```

# sql-server - 内联查询：运行一堆小查询还是一个大查询更高效？

> ID：15481153
> 
> 赞同：1
> 
> 时间：2013-03-18T15:53:56.597
> 
> 标签：sql-server, performance

对于我正在开发的应用程序，方向是我们将使用参数化的内联 MS-SQL 查询从我们的数据库中获取数据。

我正在处理的查询之一相当庞大且复杂，因此我正在考虑将其分解为多个方法，每个方法运行子查询，并将值作为一些字符串返回，该字符串合并到超级查询中，超级查询将运行执行一些操作。

但这让我想到了性能；这种“子查询”方法的性能比保持我的查询大而统一吗？

（请记住，这是我第一次涉足数据库技术，超越了简单的 PL/SQL 和 MS/SQL 查询。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:39:58.173

使用许多小查询而不是大查询是您可能犯的最严重的性能错误。[请参阅这篇关于 RBAR 的简单谈话文章，逐行痛苦。](https://www.simple-talk.com/sql/t-sql-programming/rbar--row-by-agonizing-row/).

# r - 我的数据同时存储为矩阵和列表？

> ID：15481154
> 
> 赞同：1
> 
> 时间：2013-03-18T15:53:56.913
> 
> 标签：r, tabular

我正在使用该`tabular()`函数在 r （`tables`库）中生成表。

我想从输出中的数据计算 CI（让`mytable`输出来自`tabular()`）。我想很简单，除非我从矩阵中调用一个值，否则我得到错误`Error in mytable[1, i] - 1 : non-numeric argument to binary operator`。我认为这很奇怪，因为当我调用矩阵的特定单元格（其中`as.matrix`返回 true 时`mytable`），例如`mytable[1, i]`对于某些 i，我得到一个整数。然后我`as.list`为 mytable 做，也变得真实，所以我不确定这意味着什么。我猜该`tabular()`函数将结果存储为一种特殊的矩阵。

我只是想提取平均值、sdev 和 n，我可以通过键入单元格位置来提取，例如`mytable[1, i]`将返回 86。但是，当我尝试调用`qt(.975,df=(mytable[1,i]-1))`例如其中的值时，我得到上面的错误。除了手动将值输入另一个矩阵（我想避免）之外，不确定如何处理这个问题。或者，如果我可以直接在`tabular()`也可以工作的函数中计算 CI。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:01:27.380

我将为您引用有关该功能的文档的价值部分`?tabular`：

> S3 类“表格”的对象。这是一个模式列表矩阵，其条目是计算的汇总值，具有以下属性：
> 
> rowLabels - 行的标签矩阵。这将具有与主矩阵相同的行数，但可能有多个列用于不同的嵌套级别的标签。如果标签覆盖多行，则在第一行输入，NA 用于填充后续行。
> 
> colLabels - 与 rowLabels 类似，但标记列。
> 
> table - 显示的原始表表达式。原始格式规范的列表作为“fmtlist”属性附加。
> 
> 格式 - 与主要结果形状相同的矩阵，包含默认格式的 NA 或格式列表的索引。

正如文档所说，矩阵的每个元素都是一个列表。如果您的`tabular`对象被称为`tab`type`tab[1,1]`并且您应该看到一个包含您的表值之一的列表。如果我想修改该值，我可能会执行以下操作：

```
tab[1,1]$term <- value 
```

就像您修改任何其他列表中的值一样。

键入`attributes(tab)`，您将看到上面列出的项目，其中包含许多格式信息和行/列标题。

# sqlite - 选择取决于其他列值的值

> ID：15481155
> 
> 赞同：0
> 
> 时间：2013-03-18T15:53:57.720
> 
> 标签：sqlite

如果用户选择显示他们的位置，我希望查询返回距离。这就是我所拥有的：

```
SELECT 
  showpos, 
  CASE distance WHEN showpos=1 THEN distance ELSE "N/A" END 
FROM table 
```

我也有 showpos (1=True/0=False) 的 case 语句，但这没有任何错误。这没有返回正确的结果。如何让它仅在 showpos=1 时显示距离并在 showpos=0 时返回“N/A”？

原始数据：

![原始数据](../Images/63ec02969a40dac8100f777671b454a5.png)

查询结果后：

![返回数据](../Images/c3806d92a261fe38dd7ede802ed11d83.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:57:16.957

```
SELECT showpos, 
       CASE WHEN showpos = 1 THEN distance ELSE 'N/A' END
FROM mytable 
```

或者

```
SELECT showpos, 
       CASE showpos WHEN 1 THEN distance ELSE 'N/A' END
FROM mytable 
```

# node.js - Sublime Text 构建：“节点”未被识别为内部或外部命令

> ID：15481156
> 
> 赞同：6
> 
> 时间：2013-03-18T15:53:57.830
> 
> 标签：node.js, build, sublimetext2

使用 Windows XP，我通过 Package Control 在 SublimeText2 上安装了 CoffeeScript 插件。当我尝试构建 test.coffee 时，我得到：

> 'node' 不是内部或外部命令、可运行程序或批处理文件。

但是在 cmd 控制台中输入“node -v”会返回“v0.10.0”，因为我的 PATH 变量包含“C:\Program Files\nodejs\”。

我发现人们在使用 SublimeText 的构建阶段陷入困境的线程，但没有一个符合我的问题。无论如何，这是我的 CoffeeScript.sublime-build，因为它经常扮演核心角色：

```
{
    "cmd": ["cake", "sbuild"]
    ,"windows":
        {
            "cmd": ["cake.cmd", "sbuild"]
        }
    ,"selector": "source.coffee"
    ,"working_dir": "$project_path"
    ,"path": "C:\\Documents and Settings\\User\\Application Data\\npm"
    ,"variants":
        [
            {
                "name": "Run",
                "cmd": ["coffee", "$file"]
            }
        ]
} 
```

**更新：感谢**[Sublime Text build: cannot find the file specified](https://stackoverflow.com/questions/12135313/sublime-text-build-cannot-find-the-file-specified) ，我到了那里，其答案与我的其他来源，[此博客](http://kevinpelgrims.com/blog/2011/12/28/building-coffeescript-with-sublime-on-windows)及其评论相同。但我仍然卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:31:23.190

实际上[，这个类似的问题和解决方案](https://stackoverflow.com/questions/15058244/path-variable-for-coffeescript-build-in-sublime-on-windows)是有效的，**您只需要关闭并重新打开 Sublime Text**即可使其生效。因为编辑 CoffeeScript.sublime-build 和迭代构建会弄乱 Sublime 的“路径”变量。
感谢那些提出想法的人，对于琐碎的问题感到抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T16:26:37.827

确保将 lessc 添加到您的环境变量 -> 路径变量中。lessc 目录应该列在 PATH 中。这将确保您可以在 cmd 行的任何位置使用它。还要确保如果您打开了 cmd 行，则需要将其关闭并重新打开以使操作生效。

在此之后，您可以在命令行上键入 c:> lessc，然后将向您显示如何运行选项。

c:>lessc -h

用法：lessc [option option=parameter ...] [destination]

如果源设置为“-”（破折号或连字符-减号），则从标准输入读取输入。

选项：-h、--help 打印帮助（此消息）并退出。--include-path=PATHS 设置包含路径。`:'. Use`用;'分隔 在 Window 上。-M, --depends 将生成文件导入依赖列表输出到标准输出 --no-color 禁用彩色输出。

……

# c# - 创建具有可变条件逻辑的可重用方法

> ID：15481160
> 
> 赞同：0
> 
> 时间：2013-03-18T15:54:18.470
> 
> 标签：c#, selenium, methods

我在用于 Selenium 测试的方法中有以下代码的几种变体（在返回之前等待某些事件），我想重构它并使其可重用，因此我有控制延迟和 try/catch 的逻辑通用方法，但能够根据情况换入和换出条件。

有没有简单的方法来实现这一目标？

代码：

```
for (int second = 0; second <= 10; second++)
    {
            try
            {
                // bit that needs to vary
                matchedAddresses = driver.FindElements(By.ClassName("addresslookup"));
                if (matchedAddresses.Count > 0)
                {
                    break;
                }

            }
            catch (Exception)
            {
            }
            Thread.Sleep(1000);
        }          
return matchedAddresses.Count; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:03:19.387

You want function that takes argument of something like `Func<int>` - method that returns number of elements (or enumerable `Func<IEnumerable<sometype>>`)

```
public int GetCountOfElementsWithWait(Func<int> test)
{
    .....
    var count = test();
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:57:01.810

似乎有点太明显了，但这行得通吗？

```
public int GetCountOfElementsByClassName(string className)
{
    for (int second = 0; second <= 10; second++)
    {
        try
        {
            // bit that needs to vary
            matchedElements = driver.FindElements(By.ClassName(className));
            if (matchedElements.Count > 0)
            {
                break;
            }

        }
        catch (Exception)
        {
        }
        Thread.Sleep(1000);
    }          
    return matchedElements.Count;
} 
```

# javascript - jquery获取里面的文字

> ID：15481162
> 
> 赞同：24
> 
> 时间：2013-03-18T15:54:25.013
> 
> 标签：javascript, jquery, html

我有这个 div

```
<div class="RestauranstSection">
    <label>
        Restaurant:
    </label>
    <input type="text"/>
    <input type="button" value="Search"/>
    <ul>
        <?php while ($row = $restaurants->fetch()) {
            ?>
            <li id="<?php echo $row['ID']; ?>">
                <?php echo $row['name']; ?>
            </li>
        <?php } ?>
    </ul>
</div> 
```

我想在按下任何`li`元素时提醒其文本，

```
$(".RestauranstSection").on('click','li',function (){}); 
```

请问怎么样？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-18T15:56:13.247

```
$(".RestauranstSection").on('click','li',function (){
    alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T16:01:48.607

您只需要选择 li 并像这样注册点击事件

```
$(".RestauranstSection li").click(function (){
    alert($(this).text());
}); 
```

（您可能还想拼写检查 RestaurantsSection ；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:55:52.040

尝试

```
$(".RestauranstSection").on('click','li',function (){
    alert($(this).html())
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/u899C/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-29T05:17:20.960

如果您使用 ES2015 箭头函数语法进行`click`回调，您可能需要使用`$(e.currentTarget).text()`

`$(".RestauranstSection li").click((e)=>{ alert($(e.currentTarget).text()); });`

# c++ - 将函数作为参数传递给 C++ 中的方法

> ID：15481165
> 
> 赞同：0
> 
> 时间：2013-03-18T15:54:31.103
> 
> 标签：c++, oop, class, parameters, function-pointers

我想为（数学）矩阵类创建一个方法来处理具有参数中给定函数的对象，但我被函数指针所困扰！

我的代码：

```
#include <iostream>
class Matrix{
  public:
    Matrix(int,int);
    ~Matrix();
    int getHeight();
    int getWidth();
    float getItem(int,int);
    void setItem(float,int,int);
    float getDeterminans(Matrix *);
    void applyProcessOnAll(float (*)());
  private:
    int rows;
    int cols;
    float **MatrixData;
};

Matrix::Matrix(int width, int height){
  rows = width;
  cols = height;
  MatrixData = new float*[rows];
  for (int i = 0;i <= rows-1; i++){
    MatrixData[i] = new float[cols];
  }
}

Matrix::~Matrix(){}
int Matrix::getWidth(){
  return rows;
}
int Matrix::getHeight(){
  return cols;
}
float Matrix::getItem(int sor, int oszlop){
  return MatrixData[sor-1][oszlop-1];
}
void Matrix::setItem(float ertek, int sor, int oszlop){
  MatrixData[sor-1][oszlop-1] = ertek;
}
void Matrix::applyProcessOnAll(float (*g)()){
  MatrixData[9][9]=g(); //test
}
float addOne(float num){ //test
  return num+1;
}

int main(void){
  using namespace std;
  cout << "starting...\r\n";
  Matrix A = Matrix(10,10);
  A.setItem(3.141,10,10);
  A.applyProcessOnAll(addOne(3));
  cout << A.getItem(10,10);
  cout << "\r\n";
  return 0;
} 
```

编译器给了我这个错误：错误：没有匹配函数调用'Matrix::applyProcessOnAll(float)'注意：候选是：注意：void Matrix::applyProcessOnAll(float ( *)()) 注意：没有已知的参数转换1 从 'float' 到 'float (* )()'</p>

谢谢您的帮助！

现在它起作用了！谢谢！

# 改装件

```
void Matrix::applyProcessOnAll(float (*proc)(float)){
    for(int i = 0; i <= rows-1;i++)
        for(int j = 0; j <= cols-1;j++)
            MatrixData[i][j]=proc(MatrixData[i][j]);
} 
```

主要是：

```
A.applyProcessOnAll(*addOne); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:56:54.987

因为你`float (*g)()`不接受争论，你`addOne`接受`float`争论。将您的函数指针更改为`float (*g)(float)` ，现在它应该可以工作了。

此外，您应该将函数分配给指针，而不是调用它。

```
A.applyProcessOnAll(&addOne, 3); //add args argument to `applyProcessOnAll` so you can call `g(arg)` inside. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:01:01.380

你有两个问题。

第一个是[Tony The Lion](https://stackoverflow.com/a/15481228/5987)指出的：您指定该函数不应采用任何参数，但您正在使用一个采用单个参数的函数。

第二个是您使用`applyProcessOnAll`函数调用的结果进行调用，而不是指向函数的指针。

# cakephp - Cakephp 简单身份验证教程页面未重定向到当前页面

> ID：15481167
> 
> 赞同：0
> 
> 时间：2013-03-18T15:54:33.650
> 
> 标签：cakephp

我开始浏览 cakephp 教程，我完全按照教程中的说明复制源代码。

我已经完成了博客教程，一切似乎都很好，现在我进入了“简单的身份验证和授权应用程序”（[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/ auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html) ) 教程，但遇到了这个问题。

1.  添加页面加载正常：

    “.../app/webroot/index.php/Users/add”

2.  点击提交后，它会将我重定向到此 url（带有附加的“用户”字符串）并显示错误消息。

    “.../app/webroot/index.php/Users/Users/add”

    ```
    Missing Method in UsersController

    Error: The action Users is not defined in controller UsersController

    Error: Create UsersController::Users() in file: app/Controller/UsersController.php.

    class UsersController extends AppController {

    public function Users() {

    }

    } 
    ```

让我知道我应该从哪里开始检查，谢谢。

* * *

应用控制器

```
 class AppController extends Controller {
        public $components = array(
            'Session',
            'Auth' => array(
                'loginRedirect' => array('controller' => 'posts', 'action' => 'index'),
                'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home'),
                'authorize' => array('Controller') // Added this line
            )
        );

        public function beforeFilter() {
            $this->Auth->allow('index', 'view');
       }

        public function isAuthorized($user) {
        // Admin can access every action
        if (isset($user['role']) && $user['role'] === 'admin') {
            return true;
        }

        // Default deny
        return false;
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:29:31.787

因为我仍然无法发表评论，所以我会在这里告诉你，如果我知道的话，我会编辑这个答案。

给我看看你的`AuthComponent`配置`AppController.php`。

编辑：

答案在下面的评论中。:)

# javascript - 如何从 2 个字符串中连接参数名称？

> ID：15481174
> 
> 赞同：0
> 
> 时间：2013-03-18T15:54:46.133
> 
> 标签：javascript

我有以下变量：

```
var MyVar = "8"; 
```

例如，我有 2 个字符串：

```
var foo = "My";
var bar = "Var"; 
```

现在我想提醒 MyVar 值，意思是提醒“8”而不是“MyVar”

```
alert(foo + bar) // returns "MyVar" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:57:58.657

这是需要的罕见情况`eval`：

**代码**

```
var MyVar = "8",
    foo = "My",
    bar = "Var";
alert(eval(foo + bar)) 
```

**链接：http:** [//jsfiddle.net/howderek/wcVNU/](http://jsfiddle.net/howderek/wcVNU/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T15:58:05.320

假设它是一个全局变量：

```
alert(window[foo + bar]) 
```

但是你可能最好使用对象和属性。对象属性也可以用括号表示法访问：

```
var obj = {
    MyProp : 8
};
var foo = "My";
var bar = "Prop";
alert(obj[foo + bar]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:02:23.800

无需将上下文更改为您正在执行的大部分操作，您就可以使用该`eval`功能。但是，您必须非常小心。

```
var MyVar = 8;

var foo = "My";
var bar = "Var";

alert(eval(foo + bar)); 
```

虽然有很多方法可以做到这一点，但这取决于你在做什么。如果您指定`MyVar`为某些上下文的一部分，例如`this`, 或者`window`您可以简单地使用键作为变量名来查找值。

窗口上下文

```
(function () {
  window.MyVar = 8;

  var foo = "My";
  var bar = "Var";

  alert(window[foo+bar]);
})(); 
```

函数上下文

```
new (function () {
  this.MyVar = 8;

  var foo = "My";
  var bar = "Var";

  alert(this[foo+bar]);
})(); 
```

对象上下文

```
(function () {
  var obj = {}
  obj.MyVar = 8;

  var foo = "My";
  var bar = "Var";

  alert(obj[foo+bar]);
})(); 
```

# c++ - 如何迭代 long long 的二进制掩码？

> ID：15481176
> 
> 赞同：0
> 
> 时间：2013-03-18T15:54:51.947
> 
> 标签：c++, binary

如何迭代唯一的（`...000010000...`）二进制掩码`long long`？我的意思是像面具一样`0001, 0010, 0100, 1000`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:03:29.037

如果您的意思是每个掩码都设置一个位：

```
for (unsigned long long mask = 1; mask != 0; mask <<= 1) {
    // Do something with mask
} 
```

请注意，您必须使用`unsigned`才能在班次溢出时定义行为。

我假设您并不是指所有可能的掩码值；遍历所有这些需要很长时间。

# mysql - 我应该如何在 mysql-slow.log 中解决这个慢速投票查询？

> ID：15481177
> 
> 赞同：0
> 
> 时间：2013-03-18T15:54:55.523
> 
> 标签：mysql, django, django-voting

我目前在我的网站上使用[django-voting 。](https://github.com/brosner/django-voting)但事实证明，当 vote.Vote.objects.counts() 的数量达到 10, 000 时，这个查询很慢（1.03 秒）并且出现在 mysql-slow.log

```
# Query_time: 1.031839  Lock_time: 0.000069 Rows_sent: 1  Rows_examined: 72754                                                                            
SET timestamp=1363621528;                                                                                                                                 
SELECT (COALESCE(SUM(vote), 0)) AS `score`, (COALESCE(COUNT(vote), 0)) AS `num_votes`   FROM `votes` WHERE (`votes`.`object_id` = 10136  AND `votes`.`content_type_id` = 48 ) LIMIT 1; 
```

我想知道是否有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:32:25.007

您应该`votes`通过 mysql 客户端查看该表，然后执行说明选择：

```
EXPLAIN SELECT (COALESCE(SUM(vote), 0)) AS `score`, (COALESCE(COUNT(vote), 0)) AS `num_votes`   FROM `votes` WHERE (`votes`.`object_id` = 10136  AND `votes`.`content_type_id` = 48 ) LIMIT 1; 
```

然后检查在此查询期间是否对列“投票”进行了索引，如果没有 - 您应该在“投票”列上添加新索引。

# java - Java 位掩码范围

> ID：15481180
> 
> 赞同：0
> 
> 时间：2013-03-18T15:55:03.013
> 
> 标签：java, bit-manipulation, bit-shift, bits

我需要从现有的 long 中提取精确的位范围，特别是我需要从 64 位值中提取位 51:12。

值为：

```
0x0000000415B2C01E 
```

所以位 51:12 的值应该是：

```
0x0000415B2C 
```

对于如何实际提取该范围或任何范围，我有点困惑。我被告知只需左移 12（值 << 12）即可获得我需要的位，但这给了我以下值：

```
0x415B2C01E000 
```

现在我可能完全误解了位移的工作原理，但我无法理解如何提取位范围。我在上面找到了很多现有的东西，但我现在对此更加困惑。

如果有人可以帮助我，那将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:01:01.993

移位和掩码：

```
answer = value >> 12 & 0xFFFFFFFFFFF; 
```

# javascript - 下拉隐藏在jQuery滑块后面

> ID：15481186
> 
> 赞同：3
> 
> 时间：2013-03-18T15:55:10.517
> 
> 标签：javascript, jquery, css

![在此处输入图像描述](../Images/eabee2d23d74a2208f72e0b0b16e9cfb.png)

如何根据下图在滑块顶部显示自定义下拉菜单

我在下面的链接中使用了滑块

[http://www.bitrepository.com/content-sliders.html](http://www.bitrepository.com/content-sliders.html)

对于下拉菜单，我使用了以下链接

[http://www.mindstick.com/Articles/f649279c-dc3a-42cb-ab10-e24ae9a1bb90/?Stylish%20Dropdown%20in%20HTML](http://www.mindstick.com/Articles/f649279c-dc3a-42cb-ab10-e24ae9a1bb90/?Stylish%20Dropdown%20in%20HTML)

任何建议将不胜感激。请帮我！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:06:49.257

通过查看您正在使用的滑块的演示，我认为问题出在`<div id="featured">`因为它具有 css 属性`overflow:hidden`，因此 div 之外的任何内容都不会被看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:10:24.950

就像 Adrift 说的那样，我认为如果你提供 Fiddle 来展示你的问题会更好。如果你不能，那么你的下拉菜单就像

```
<div><!-- You content slider main DIV -->
   <select style="position: relative; z-index: 1000;"></select>
</div> 
```

如果您不喜欢使用内联样式，可以使用 class 代替。

# c# - 在 IE、webdriver 中处理动作链后的警报

> ID：15481187
> 
> 赞同：0
> 
> 时间：2013-03-18T15:55:11.043
> 
> 标签：c#, internet-explorer, selenium, webdriver, alert

我有一个自定义的下拉菜单，我需要单击其中一个选项。单击它后 - 出现警报。所以我建立了一个链条

```
InvokeChain(() => Actions.MoveToElement(button).MoveToElement(targetOption).Click(targetOption));

protected static void InvokeChain(Func<Actions> chain)
        {
            chain.Invoke().Build().Perform();
        } 
```

在 chrome 中它可以正常工作，但在 IE 中 - 驱动程序无法处理退出链。我认为，这是因为警觉而发生的。链线上的错误消息：

> 对远程 WebDriver 服务器的 HTTP 请求 URL http://..... click 在 60 秒后超时。

问题是我怎样才能从链中释放驱动程序来处理警报？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:25:35.053

设置 EnableNativeEvents = true

```
 InternetExplorerOptions internetExplorerOptions = new InternetExplorerOptions
{
   EnableNativeEvents = true
};
IWebDriver driver = new InternetExplorerDriver(internetExplorerOptions); 
```

# php - Magento：商店，商店视图，交易中的网站

> ID：15481193
> 
> 赞同：1
> 
> 时间：2013-03-18T15:55:26.803
> 
> 标签：php, web, e-commerce, magento-1.7

我有关于商店、商店视图和网站创建的小问题。我在客户登记册上创建了商店（一个客户有一个网站、一个商店视图和一个商店），一切都很好，但是当保存例如商店视图时出现错误，数据库中的其他元素。

编码：

```
// Root Category
$category = new Mage_Catalog_Model_Category();
$category->setStoreId(0);
$category->save();

// Website
$website = new Mage_Core_Model_Website();
$website->setData(array(
    'code' => $codes,
    'sort_order' => 10
))->save();

// Create store group (store view)
$storeGroup = new Mage_Core_Model_Store_Group();
$storeGroup->setData(array(
    'website_id' => $website->getId(),
    'root_category_id' => $category->getId()
))->save();

// Create store
$store = new Mage_Core_Model_Store();
$store->setData(array(
    'code' => $codes,
    'website_id' => $website->getId(),
    'group_id' => $storeGroup->getId(),
));
$store->save(); 
```

我需要编辑代码，以便这些东西将在事务中创建并在出现错误时回滚。我不知道该怎么做，因为在每个对象保存后我都需要一个 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:56:14.590

好的，自己解决了

```
try {
    $write = Mage::getSingleton('core/resource')->getConnection('core_write');
    $write->beginTransaction();

    $category = Mage::getModel('catalog/category')
                    ->setStoreId(0)
                    ->setName($code)
                    ->setParentId(Mage_Catalog_Model_Category::TREE_ROOT_ID)
                    ->setPath(Mage_Catalog_Model_Category::TREE_ROOT_ID)
                    ->setDisplayMode(Mage_Catalog_Model_Category::DM_PRODUCT)
                    ->setIsActive(TRUE)
                    ->setId(NULL)
                    ->save();
    $website = Mage::getModel('core/website')
                   ->setCode($code)
                   ->setName($code)
                   ->setSortOrder(10)
                   ->setId(NULL)
                   ->save();
    $storegr = Mage::getModel('core/store_group')
                   ->setWebsiteId($website->getId())
                   ->setName($code)
                   ->setRootCategoryId($category->getId())
                   ->setId(NULL)
                   ->save();
    $store = Mage::getModel('core/store')
                 ->setCode('1'.$code)
                 ->setWebsiteId($website->getId())
                 ->setGroupId($storegr->getId())
                 ->setName($code)
                 ->setSortOrder(10)
                 ->setIsActive(TRUE)
                 ->setId(NULL)
                 ->save();
    $write->commit();
} catch (Exception $e) {
    $write->rollback();
} 
```

# php - 什么可能导致 GeoRequest：无法连接到源；表达式引擎中的错误？

> ID：15481194
> 
> 赞同：0
> 
> 时间：2013-03-18T15:55:27.083
> 
> 标签：php, google-maps, expressionengine

我工作的公司的一位客户将 Expression Engine 用于他们的自定义站点。它是在我入职前大约 2 年建成的，它是我们唯一的 EE 网站。建造者不再在这里工作，因此修复/更新网站是每个相关人员的任务。

他们利用了在 EE 中似乎很常见的位置搜索功能，所以我怀疑它是自定义的。它与谷歌地图相关联。初始页面加载良好，有几个位置，当我导航到各个位置时，这些页面加载良好。但是，search_results 页面会抛出此错误：**GeoRequest : Can't connect to source;**

我用谷歌搜索了这个错误，我遇到的大多数事情都说要检查服务器上的 PHP 版本是否发生了变化。我知道事实并非如此。网站上没有任何变化。我们记录了所有内容，一个多月以来没有任何内容被触及。它只是突然停止工作。

我觉得这里很瞎。任何导致此特定错误的常见事物？任何 EE 专家都知道在哪里最好地追踪错误源？

更新：似乎正在使用 MX Google Map for EE。希望这可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:32:01.157

您安装的 MX Google Maps 版本可能正在使用现已过时的 Google Maps API 版本。您可能会首先查看控制面板的插件菜单，查看您已安装的 MX Google 地图插件的版本号，并将其与[devot-ee.com 上的最新版本进行比较](http://devot-ee.com/add-ons/mx-google-maps)。插件开发者通过[他自己的支持站点](http://support.addons.mx)提供支持。

# ios - 我有一个显示 UIActionSheet 的 UITableViewController，如何使操作表选项显示模式视图？

> ID：15481197
> 
> 赞同：-2
> 
> 时间：2013-03-18T15:55:39.970
> 
> 标签：ios, objective-c, ios6, storyboard, uitableview

我在这方面遇到了很多麻烦，我似乎无法找到专门针对这种情况的答案。

我有一个 UITableViewController，它有一个按钮，点击它会显示一个带有几个选项的 UIActionSheet。我想要一个选项来调出我已经在我的故事板中出现的另一个视图控制器，准备显示。

UIActionSheet 已完全实现，`actionSheet:clickedButtonAtIndex:`我只是不知道在其中做什么。

我试着在里面放这个：

```
NSString *buttonTitle = [actionSheet buttonTitleAtIndex:buttonIndex];

if ([buttonTitle isEqualToString:@"Text"]) {
    AddTextViewController *addTextViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"addTextViewController"];
    [self presentViewController:addTextViewController animated:YES];
} 
```

但我收到一个错误消息：`No visible @interface for 'RootViewController' declares the selector 'presentViewController:animated:`所以这也不起作用。

我到底应该在这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:57:57.320

没有这样的方法`presentViewController:animated:`。方法其实是`presentViewController:animated:completion:`。

所以改变：

```
[self presentViewController:addTextViewController animated:YES]; 
```

到：

```
[self presentViewController:addTextViewController animated:YES completion:nil]; 
```

如果需要，传入一个实际的完成块。

# vb.net - 替换双双引号

> ID：15481198
> 
> 赞同：2
> 
> 时间：2013-03-18T15:55:42.587
> 
> 标签：vb.net

我需要替换双双引号，但不要用空值替换字段。

问题：如何替换双双引号而不替换空列？

* * *

原线

""小屋"","新泽西州彭宁顿","","123456789"

预期结果

"小屋","新泽西州彭宁顿","","123456789"

* * *

我创建了一个可以解决问题的类，但它替换了所有双引号，包括空字段：

* * *

我的代码结果

"小屋","新泽西州彭宁顿","123456789"

正如您所看到的，我的代码修复了 COTTAGE，但在 ,NJ 之后删除了空列以使用单个双引号。

* * *

> 公共类 FixFileErrors
> 
> ```
> Public Shared Sub RemoveDoubleDoubleQuotes(ByVal FilePathandName As String)
> 
>     Dim OriginalFile, RevisedFile, LineofText As String
> 
>     OriginalFile = FilePathandName
>     RevisedFile = Replace(OriginalFile, ".txt", "revised.txt")
> 
>     Dim srFileReader As System.IO.StreamReader
>     srFileReader = System.IO.File.OpenText(OriginalFile)
>     'Dim srFileWritter As System.IO.StreamWriter
>     Dim srFileWritter As New System.IO.StreamWriter(RevisedFile)
> 
>     Do Until srFileReader.EndOfStream
>         LineofText = srFileReader.ReadLine
>         LineofText = ReplaceDoubleDoubleQuotes(LineofText)
>         srFileWritter.WriteLine(LineofText)
>         LineofText = Nothing
>     Loop
> 
> End Sub
> 
> Public Shared Function ReplaceDoubleDoubleQuotes(ByVal Line As String) As String
>     Dim NewLine As String
> 
>     Dim strFindText As String = Chr(34) & Chr(34)
>     Dim strReplaceText As String = Chr(34)
> 
>     NewLine = Replace(Line, strFindText, strReplaceText)
> 
>     Return NewLine
> 
> End Function 
> ```
> 
> 结束类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:02:31.420

```
Public Shared Function ReplaceDoubleDoubleQuotes(ByVal Line As String) As String
    Dim NewLine As String

    Dim doubleDoubleQuotes As String = Chr(34) & Chr(34)
    Dim doubleQuote As String = Chr(34)

    'Your original replacement
    NewLine = Replace(Line, doubleDoubleQuotes, doubleQuote)

    'Replacement to fix double-quotes between commas
    NewLine = Replace(NewLine, "," & doubleQuote & ",", "," & doubleDoubleQuotes & ",")

    Return NewLine

End Function 
```

# javascript - 在 Drupal 页面上添加内联 javascript

> ID：15481199
> 
> 赞同：0
> 
> 时间：2013-03-18T15:55:43.730
> 
> 标签：javascript, drupal, drupal-6

我有一个要添加到 module.page.inc 的内联 javascript。我怎样才能以最简单的方式做到这一点？

```
<script>
$(function() {
$("a[rel][href!='']").overlay({
mask: {
color: '#000',
loadSpeed: 200,
opacity: 0.8
},
effect: 'apple',
onBeforeLoad: function() {
var overlaid = this, overEl = this.getOverlay();
overEl.find(".contentWrap").load(
this.getTrigger().attr("href"));
overEl.appendTo("body");
$(".close", this.getOverlay()).click(function(e){
overlaid.close();
});
}
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:40:05.923

尝试使用该功能：

```
drupal_add_js('jQuery(INSERT YOUR JS HERE, 'inline'); 
```

您需要将内联脚本放在变量中或直接放在我放置该占位符的位置。小心你的引号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T07:50:17.920

您可以在没有脚本标签的情况下使用它

drupal_add_js('jQuery(document).ready(function () { alert("Hello!"); });', 'inline');

# sql - 可以在没有子查询的情况下进行此查询吗？

> ID：15481203
> 
> 赞同：1
> 
> 时间：2013-03-18T15:55:47.850
> 
> 标签：sql, postgresql, null, left-join, sql-in

想象一下这 3 张桌子：

```
User             Login:            LoginInfo:
----             -----             -----
id:integer       id:integer        id:integer
name:string      user_id:integer   login_id:integer 
```

是否可以在不进行子查询/子选择的情况下选择所有没有的用户`LoginInfos`（我在没有检查数据库的情况下写了这个）：

```
select id from users 
where id not in (
  select distinct(user_id) from logins 
  right join login_infos on logins.id = login_infos.login_id
) 
```

我使用 Postgres 作为数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:32:16.920

为什么**`RIGHT JOIN`**？

您可能会添加`NULL`到子查询的结果中，这是`NOT IN`构造中的常见缺陷。

考虑这个简单的演示：

```
SELECT 5 NOT IN (VALUES (1), (2), (3))         --> TRUE
      ,5 NOT IN (VALUES (1), (2), (3), (NULL)) --> NULL (!)
      ,5     IN (VALUES (1), (2), (3))         --> FALSE
      ,5     IN (VALUES (1), (2), (3), (NULL)) --> NULL (!) 
```

换句话说：
*“我们不知道是否`5`在集合中，因为至少有一个元素是未知的并且可能是 5。”*
由于`WHERE`仅在一个子句`TRUE`中是相关的（既`NULL`没有通过测试也没有`FALSE`通过测试），所以它根本不会影响`WHERE id IN (...)`。

但是会影响

```
WHERE id **NOT IN** (...)
```

只要右手集中有 a， 这个表达式就**永远不合格。** 可能不像预期的那样？`NULL`

* * *

## 解决方案

要求是

> 选择所有没有 LoginInfos 的用户

这可以包括在表中也没有行的用户`login`。因此，我们需要`LEFT JOIN`两次。而且由于没有定义一个用户是否可以在 中拥有多行`login`，我们还需要`DISTINCT`or `GROUP BY`：

```
SELECT DISTINCT u.*
FROM   users u
LEFT   JOIN login     l ON l.user_id  = u.id
LEFT   JOIN logininfo i ON i.login_id = l.id
WHERE  i.login_id IS NULL 
```

这涵盖了所有可能发生的情况。你*可以*...

*   如果每个用户*最多*`DISTINCT`只能登录一次，请删除。
**   如果每个用户*至少*`LEFT JOIN`有一行，则替换第一个。`JOIN`*`login`**

 **这种*替代方案*使用[`NOT EXISTS`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)子查询。
但无论 table 中每个用户可以有多少行，它都有效`login`。并且它没有表现出任何上述问题`NOT IN`：

```
SELECT u.*
FROM   users u
WHERE  NOT EXISTS (
   SELECT 1
   FROM   login     l
   JOIN   logininfo i ON i.login_id = l.id
   WHERE  l.user_id = u.id
   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:02:44.113

```
select distinct u.id
from
    user u
    inner join
    login l on u.id = l.user_id
    left join
    logininfo li on l.id = li.login_d
where li.id is null 
```**

# ios - UIButton：将背景图像设置为禁用状态会更改默认状态的显示

> ID：15481204
> 
> 赞同：1
> 
> 时间：2013-03-18T15:55:48.750
> 
> 标签：ios, uibutton

在 Storyboard 中，我定义了一个`UIButton`必须由程序启用/禁用的。它的默认状态没有背景图片，并且标题为“默认”。如果其禁用状态既没有背景图像，也没有不同的标题“禁用”，并且我通过程序在两种状态之间切换，`UIButton`则在模拟器和设备中按预期显示两种状态：![在此处输入图像描述](../Images/f9b53f5e290ed840f6441bfa120c2b9e.png)
但是，如果我只分配给禁用状态为背景图片，`UIButton`按预期显示为禁用状态，但默认状态现在有透明图片和背景图片，即只显示标题：
![在此处输入图像描述](../Images/75dccde0abfd9d882bfe27a9c2ae2e92.png)
我希望将背景图片分配给禁用状态不将分配更改为默认状态。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:05:32.813

重新启用时将 backgroundImage 设置为 nil：

 ~~~~```
[myButton setBackgroundImage:nil forState:UIControlStateNormal]; 
```~~  ~~```
[myButton setBackgroundImage:nil forState:UIControlStateDisabled]; 
```

这使我的按钮再次显示正常。

附加阅读：http: [//developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/c_ref/UIButtonType](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/c_ref/UIButtonType)~~~~

# python-2.7 - .ix (Pandas) 上的按位运算

> ID：15481205
> 
> 赞同：3
> 
> 时间：2013-03-18T15:55:48.910
> 
> 标签：python-2.7, pandas, dataframe

为什么开发人员不允许对 .ix 进行按位运算？好奇这是技术限制问题还是我忽略的逻辑问题。

```
df.ix[df["ptdelta"]<=0 & df["ptdelta"]>5] 
```

回溯是：

```
TypeError: ufunc 'bitwise_and' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule 'safe' 
```

'''

**注意**：从 Pandas v0.20 开始，`.ix` [不推荐使用索引器](http://pandas.pydata.org/pandas-docs/version/0.20/whatsnew.html#whatsnew-0200-api-breaking-deprecate-ix)以支持`.iloc`/ `.loc`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T16:13:21.407

我认为您误解了方括号内`.ix`发生的事情 - 与它无关。如果你适当地括号，这有效：

```
>>> df = pd.DataFrame({"a": [-1,2,-3,4,6,-8.2]})
>>> df.ix[(df['a'] <= 0) | (df['a'] > 5)]
     a
0 -1.0
2 -3.0
4  6.0
5 -8.2 
```

否则，您将尝试对（大概）浮点数执行按位运算。例如，如果它是一个 int，那么它会“工作”：

```
>>> df['a'] <= 0 & df['a']
Traceback (most recent call last):
  File "<ipython-input-40-9173361ec31b>", line 1, in <module>
    df['a'] <= 0 & df['a']
TypeError: ufunc 'bitwise_and' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule 'safe'

>>> df['a'] <= 0 & df['a'].astype(int)
0     True
1    False
2     True
3    False
4    False
5     True
Name: a, Dtype: bool 
```

# python - 使用 django 和 sqlite 存储 BLOB 数据

> ID：15481208
> 
> 赞同：2
> 
> 时间：2013-03-18T15:55:55.603
> 
> 标签：python, django, orm, blob, blobstorage

首先，我知道有很多类似的问题，但其他解决方案不包括我的具体情况：

在我的 sqlite-database 中有现有的二进制数据（SHA1 和类似的哈希）。通过谷歌搜索和阅读[django-docs](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/ "文档")我想出了以下内容：

```
import base64

class BlobField(models.Field):
""" 
Stores raw binary data
"""

description = 'Stores raw binary data'
__metaclass__ = models.SubfieldBase

def __init__(self, *args, **kwds):
    super(BlobField, self).__init__(*args, **kwds)

def get_internal_type(self):
    return "BlobField"

def get_db_prep_value(self, value, connection=None, prepared=False):
    return base64.decodestring(value)

def to_python(self, value):
    return base64.encodestring(value) 
```

这是我想要的，值在正确的时刻被编码和解码，但是在将模型保存到数据库中时，它给了我以下错误：

> DatabaseError：您不得使用 8 位字节串，除非您使用可以解释 8 位字节串的 text_factory（如 text_factory = str）。强烈建议您将应用程序切换为 Unicode 字符串。

我怎样才能解决这个问题？（可能不会破坏我在应用程序其余部分的所有 unicode 兼容性）

我无法更改 db-columns 的格式，因为数据被另一个应用程序使用。

* * *

编辑：正如@filip-dupanovic 所建议的，我采用了 BinaryField 类，如下所示：

class BinaryField(models.Field): description = _("原始二进制数据")

```
def __init__(self, *args, **kwargs):
    kwargs['editable'] = False
    super(BinaryField, self).__init__(*args, **kwargs)
    if self.max_length is not None:
        self.validators.append(validators.MaxLengthValidator(self.max_length))

def get_internal_type(self):
    return "BinaryField"

def get_default(self):
    if self.has_default() and not callable(self.default):
        return self.default
    default = super(BinaryField, self).get_default()
    if default == '':
        return b''
    return default

def get_db_prep_value(self, value, connection, prepared=False):
    #value = super(BinaryField, self
    #    ).get_db_prep_value(value, prepared, connection=connection)
    #if value is not None:
    #    return connection.Database.Binary(value)
    return value 
```

请注意我必须在 处插入的注释`get_db_prep_value()`，就像这样，它按预期工作，如果我取消注释这些行，我会收到错误

> TypeError：get_db_prep_value() 为关键字参数“连接”获取了多个值

我可以忍受这一点，但不完全理解将其排除在外的含义。即使没有调用它仍然可以工作`super()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:13:01.657

不久前关闭的工单[#2417](https://code.djangoproject.com/ticket/2417)`BinaryField` ，添加了一个模型字段。您应该查看[此提交](https://github.com/django/django/commit/8ee1eddb7e148de89aebde9e68da495633fc1ec9)，特别是与如何将内部`BlobField`字段类型映射到数据库支持的适当类型相关的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:10:04.333

```
def get_db_prep_value(self, value, connection, prepared=False):
    value = super(BinaryField, self
        ).get_db_prep_value(value, connection, prepared)
    if value is not None:
        return connection.Database.Binary(value)
    return value 
```

# css - 删除 HTML 列表上的缩进

> ID：15481211
> 
> 赞同：1
> 
> 时间：2013-03-18T15:56:12.987
> 
> 标签：css, indentation

我正在为移动网站制作动态 HTML 列表。基本概念有效，但我想删除列表一侧的间距。我已经尝试过`margin-left`and `padding-left`，但它仍然不起作用。

例子 ：

```
/* Now */
    List1
    List2
    List3

/* And I want */
List1
List2
List3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:06:26.183

Safari 上的计算样式`<ul>`

```
display: block;
font-family: 'Lucida Grande', Arial, Helvetica;
font-size: 12px;
height: 30px;
list-style-type: disc;
margin-bottom: 12px;
margin-left: 0px;
margin-right: 0px;
margin-top: 12px;
padding-bottom: 0px;
padding-left: 40px;
padding-right: 0px;
padding-top: 0px;
width: 795px; 
```

对于`<li>`（如您所见，主要是从 parent 继承的`<ul>`）

```
display: list-item;
font-family: 'Lucida Grande', Arial, Helvetica;
font-size: 12px;
height: 15px;
list-style-type: disc;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
text-align: -webkit-auto;
width: 795px; 
```

左填充（也继承）；

```
padding-left: 40px; 
```

将其设置为更低的值：

```
padding-left: 0px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:05:09.847

听起来您需要`padding`从列表项的容器（`ul`或`ol`）中删除`menu`：

```
ul {
    padding-left:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:06:16.523

只需从 ul 中删除填充：

```
 ul {padding-left:0} 
```

我想这可能意味着你还没有设置 css 重置，把它放在你的 css 文件的顶部：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
} 
```

# .htaccess - Joomla .htaccess 重写

> ID：15481213
> 
> 赞同：0
> 
> 时间：2013-03-18T15:56:13.837
> 
> 标签：.htaccess, joomla, url-rewriting, rewrite

只是想将我的 URL 从[http://bruteforce.tv/index.php/streams/shinigamily](http://bruteforce.tv/index.php/streams/shinigamily)更改 为 [http://bruteforce.tv/shinigamily](http://bruteforce.tv/shinigamily)

我在管理面板中激活了重写选项并使用了原始的 joomla htaccess 文件，并且 url 去了

```
http://bruteforce.tv/streams/shinigamily 
```

在这一点上，我写了`RewriteRule ^streams/(.*)/?$ /$1 [L,NC,R]`之后`# RewriteBase /`

不知何故，它不起作用。我的虚拟主机已经编辑了他`httpd.conf`的

```
<Directory "/home/htdocs/webX/html">
AllowOverride All
Options +FollowSymLinks +SymLinksIfOwnerMatch
</Directory> 
```

但它也没有改变任何东西。

> 现在，困难的方法要先进得多，需要您执行以下操作：
> 
> 修改 Joomla 的 SEF 核心文件以从 URL 中删除类别名称。（注意：有几个文件需要更改。）
> 
> 确保您在上面所做的更改包含在您的 .htaccess 文件中。
> 
> 确保您不会因此代码更改而破坏任何功能。

黑报价`http://www.itoctopus.com/how-to-remove-the-category-name-from-the-url-in-joomla`

现在我觉得沉没了。

这是我的 htacces 文件：

```
##
# @package      Joomla
# @copyright    Copyright (C) 2005 - 2013 Open Source Matters. All rights reserved.
# @license      GNU General Public License version 2 or later; see LICENSE.txt
##

##
# READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE!
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
##

## Can be commented out if causes errors, see notes above.

Options +FollowSymLinks

## Mod_rewrite in use.

RewriteEngine On

## Begin - Rewrite rules to block out some common exploits.
# If you experience problems on your site block out the operations listed below
# This attempts to block the most common type of exploit `attempts` to Joomla!
#
# Block out any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL.
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
## End - Rewrite rules to block out some common exploits.

## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
## End - Custom redirects

##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##

# RewriteBase /

## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
RewriteRule ^streams/(.*)/?$ /$1 [L,NC,R]
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for something within the component folder,
# or for the site root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section. 
```

# ant - Jenkins：如何使来自工具的某些日志消息无法构建？

> ID：15481214
> 
> 赞同：2
> 
> 时间：2013-03-18T15:56:18.597
> 
> 标签：ant, jenkins, continuous-integration

我的构建过程中有一个工具，它对错误和警告非常宽容。它通常只会将它们记录到控制台，但不会使构建失败。目前，我正在以 Ant 任务的形式使用该工具，但这可能会改变。

我希望错误和警告使构建失败。有没有办法做到这一点？如果合适，我可以以某种方式监视控制台输出并使构建失败吗？

（以防万一您感兴趣，该工具是声纳。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:10:05.977

插件[Post build task](http://wiki.hudson-ci.org/display/HUDSON/Post+build+task)看起来对您来说是一个很好的解决方案。

您可以使用正则表达式对其进行配置以检查构建日志，然后启动可能导致构建失败的脚本（使用该`"Escalate script execution status to job status"`属性）

# sql - 根据字段 1 中的唯一值在 SQL 表中多次插入同一行

> ID：15481218
> 
> 赞同：1
> 
> 时间：2013-03-18T15:56:30.543
> 
> 标签：sql

我目前有一个表，其中第 1 列是其余列的唯一标识符，我需要为每个唯一标识符在表中插入一个新值。示例如下：

```
第 1 栏 第 2 栏 第 3 栏
10 地址真
10 城市错误
10 状态真
20 地址真
20城真
20 状态真
```

我需要根据第 1 列中的每个唯一标识符插入一个新行，如下所示：

```
第 1 栏 第 2 栏 第 3 栏
10 地址真
10 城市错误
10 状态真
*10 新新*
20 地址真
20城真
20 状态真
*20 新 新*
```

出于某种原因，用于快速查找和插入的 SQL 脚本只是在星期一早上让我忘记了。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:51:37.417

您可以尝试 Marlin Pierce 建议的变体：

```
INSERT INTO [table-name]
([Column 1], [Column 2], [Column 3])
SELECT [Column 1], 'NEW', 'NEW*' from [table-name] where [Column 2] = 'Address' group by [Column 1]; 
```

这将为您现有的每一行创建一个新行。

有关可执行示例，请参阅[SqlFiddle](http://sqlfiddle.com/#!6/fc679/5/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:04:06.590

```
insert into table-name
(Column1, Column2, Column3)
select Column1, 'NEW', 'NEW*' from table-name group by Column1 
```

您也可以在子选择中使用 distinct，但我已经开始切换到 group by，如果我想将查询更改为 count 或其他内容，它会更加灵活。

# iphone - UINavigationController 双倍大小（高度）

> ID：15481221
> 
> 赞同：0
> 
> 时间：2013-03-18T15:56:38.957
> 
> 标签：iphone, objective-c, uinavigationcontroller, uinavigationbar

我有这段代码可以在模式屏幕中打开 UINavigatonController：

```
NT_WebViewController *privacyPolicyViewController = [[NT_WebViewController alloc] initWithFilePath:filePath];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:privacyPolicyViewController];
[self presentModalViewController:navController animated:YES]; 
```

在这种情况下，栏会显示得很高并覆盖了内容的一部分。任何人都知道为什么会这样？

![在此处输入图像描述](../Images/9de85105166b6c315d9ece95338eafac.png)

# c# - 是否可以像在 C++ 中一样在 C# 中创建“私有”或“公共”块？

> ID：15481222
> 
> 赞同：8
> 
> 时间：2013-03-18T15:56:40.503
> 
> 标签：c#

在 C++ 中，可以通过隐私创建成员“块”：

```
private :
    int var1;
    char var2;
    ...

public :
    int var3;
    char var4;
    ... 
```

我试图在 C# 中找到相同的示例，但找不到。我试图在 Visual Studio 中编写这样的块，但出现错误。

是否有在 C# 中有效的类似语法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:58:05.867

简短的回答是**否定的，没有。** 你总是应该在你的字段/方法前面写访问说明符。

```
public int var1;
public char var2; 
```

请注意，这`private`是默认说明符。这是一个设计问题，但我总是会明确指定修饰符。（即使只是为了一致的缩进！）

在 msdn上阅读有关[可访问性级别 (C#)的更多信息。](http://msdn.microsoft.com/en-us/library/ba0a1yw2%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T15:58:07.003

不，您应该在每个成员（属性、字段或方法）之前编写访问修饰符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:58:49.497

简短的回答：没有。您需要在*每一*行前面加上访问说明符之一。如果您不这样做，则有一个默认值（成员为私有，类型为内部）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:01:46.677

这是**不可能**的。这里还有一些其他提示：

如果您想实现不同的读写访问，请尝试以下操作：

```
public int Var1 { get; private set; } 
```

如果您的目的只是缩短您的代码，这至少可以节省一些字符。

```
private int _var1, _var2, _var3;
private char _char1, _char2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T15:59:33.317

不，这是不可能的，但如果你想将班级成员分组到逻辑组中，你可以使用[region](http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.71%29.aspx)：

```
#region Private properties

private int var1;

#endregion 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T16:05:23.090

目前，答案是否定的。添加访问修饰符的意图

```
public string name;
public string address; 
```

是为了使代码更具可读性。

# vb.net - 如何在 VB.Net 中设置从网页导出的 word 文档的样式

> ID：15481227
> 
> 赞同：0
> 
> 时间：2013-03-18T15:56:54.880
> 
> 标签：vb.net, visual-studio-2010, ms-word

我正在尝试将从数据库检索到的文本导出到 VB.Net 中的 word 文档中，虽然我有一个工作示例，但我需要弄清楚如何适当地设置文档的某些部分的样式。

我从 MS Online 资源（例如[这个](http://support.microsoft.com/kb/316383 "如何从 VB.Net 自动化 Word")）中找到了一些工作示例，我发现这些示例可以涵盖一些基础知识：

```
para.Range.Text = "Quad Chart"
para.Range.Style = "Heading 1"
para.Range.Bold.Font = True 
```

但它甚至没有涵盖一些最简单的格式，例如：

*   你如何对齐文本（左，右，中心）？
*   你如何指定出租？
*   你如何开始一个列表样式？

我试图找到的要么是对这些的直接答案，要么是（甚至更好）一个允许大多数格式的命令的明确列表。

另外，我宁愿不使用 Spire，这似乎是一个常见的答案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:12:36.453

所以，你有几个例子。Office VBA 是 VB6 的精简版，不如在 Word 中录制一些宏，打开 VB 编辑器看看它的作用。这也是浏览 Word 对象模型帮助的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:36:16.623

[VBA 对象模型](http://msdn.microsoft.com/en-us/library/kw65a0we%28v=vs.80%29.aspx)描述了可用于标记内容的所有类、它们的方法和属性。

强烈建议您使用样式作为将代码与演示文稿分开的一种方式。创建一个文档模板（.dot 或 .dotx，取决于 Word 版本）并将其附加到您的文档中。然后，当文档打开时，它将继承模板的布局和表示并正确呈现。

列表创建有点复杂，因为如果您使用编号，则需要重新启动列表。

如果您对完全不同的方法感兴趣，可以查看在[Microsoft Office Word 2003 XML 软件开发工具包中应用 XSLT 转换](http://msdn.microsoft.com/en-us/library/office/ee364545%28v=office.11%29.aspx)。这描述了如何生成 XML 文档并使用 XSL 转换来描述表示。更通用，但设置起来肯定更复杂。

您的首选方法取决于您是要使用模板生成本机文档，还是要求您的用户使用 SDK 中的工具安装转换。

# mysql - 搜索不同列时 SQL 忽略 WHERE

> ID：15481229
> 
> 赞同：2
> 
> 时间：2013-03-18T15:56:58.487
> 
> 标签：mysql, sql, where, sql-like

我有一个忽略 WHERE 函数部分的 SQL 查询。

```
SELECT col1, col2, col3, col4
FROM table
WHERE col1 = 'yes'
AND col2 = 'no'
AND col3 || col4
LIKE '%maybe%' 
```

如果没有最后一个`AND`函数，它会带回正确的行，但是使用 LIKE 函数，它将带回 'no' in 的行`col1`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:11:15.187

我将猜测您打算`LIKE`分发该声明 - 在这种情况下您想要：

```
SELECT col1, col2, col3, col4
FROM table
WHERE col1 = 'yes'
AND col2 = 'no'
AND (col3 LIKE '%maybe%'  OR col4 LIKE '%maybe%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:09:07.467

如果要连接`col3`and `col4`，mysql 中的正确语法是使用[CONCAT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)函数：

```
SELECT
  col1, col2, col3, col4
FROM
  table
WHERE
  col1 = 'yes'
  AND col2 = 'no'
  AND CONCAT(col3, col4) LIKE '%maybe%' 
```

而|| 是 OR 运算符。

请[在此处](http://sqlfiddle.com/#!2/e4e18/1)查看小提琴。

# list - 该程序的声明式解释，说明元素是否属于列表

> ID：15481234
> 
> 赞同：3
> 
> 时间：2013-03-18T15:57:05.570
> 
> 标签：list, prolog, declarative

**根据我的理解，声明式范式表明什么对解决方案很重要，而不是如何达到解决方案，**但是习惯于程序化思考，我经常混淆......

所以解决方案是这个：

```
mymember(X, [X|_]).
mymember(X,[_|T]) :- mymember(X,T). 
```

这是我对这个简单程序的**声明式解释：**

1) **X 属于该列表，如果 X 是该列表的头为 TRUE**（如果列表的头元素与我知道是否在列表中的 X 元素**统一）**

2）如果第一个事实不正确（X 不与第一个列表元素统一），则程序尝试执行第二个规则（也许在这里我有一些解释问题）。这条规则说：如果规则的主体为真，则头部为真）

规则的负责人说：X属于列表的TAIL（我使用匿名变量使用**_**字符表示不关心列表的第一个元素）

**所以这条规则说：如果 X 元素属于列表的尾部为 TRUE，则 X 元素属于没有头部的列表为 TRUE**

这是对该程序的正确声明和逻辑解释还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:20:00.837

您将它们阅读为*异或*，但它们实际上是*包容或*。1) 和 2) 都是正确的，减去连接词“如果第一个事实不正确”。对于 2) 保持，1) 没有必要为假。换句话说，`X`既是列表的头部又出现在列表的尾部（例如`mymember(a, [a, b, a])`.

**编辑**：回复您的评论。

这里有一个语言障碍问题，所以让我试着用是和否来回答你的问题。

是的，使用`;`产生另一个答案是 Prolog 能够计算替代答案的证据。在某种意义上，`;`手动触发回溯，但在另一种意义上，Prolog 会询问您这是否是您想要的答案，然后您可以说“是”或“否”。当你说`;`你是在告诉 Prolog 时，本质上，“这不是正确的答案”。但这不是触发回溯的*唯一方法；*事实上，大多数时候你根本不会手动触发它。

例如，让我们看一下：

```
even_member(X, L) :- member(X, L), 0 is X mod 2.

?- even_member(X, [1,5,17,23,4,19]).
X = 4 ;
false. 
```

所以在这里我定义了一个谓词，声明式地说，如果 X 是 L 的成员并且 X mod 2 = 0，则 X 是 L 的 even_member。当我使用谓词时，我们得到了答案`X = 4`。然后我们按着`;`说，这不是正确的答案，Prolog 说没有更多的答案。但是在内部，member(X, L) 在找到满足谓词第二部分的元素之前回溯了 5 次——换句话说，该语句`0 is X mod 2`告诉 Prolog 1、5、17 和 23 以同样的方式“错误”我们通过`;`交互按下来做到这一点。当我们说我们想要另一个答案时，我们使用了相同的机器，所以 Prolog 回到 member(X, L)，找到 19，然后发现 19 不能被 2 整除并放弃。

Prolog 回溯了六次，其中五次只是为了得到一个答案。我们只要求它回溯一次，碰巧这是最后的可能性，所以它没有再次回溯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:08:16.847

让我尝试：

```
mymember(X, [X|_]). 
```

如果 X 是列表的第一个元素，则 X 是列表的成员

```
mymember(X,[_|T]) :- mymember(X,T). 
```

如果 X 是列表其余部分的成员，则 X 是列表的成员。

假设我给你一堆（纸质）程序员简历并说“看看其中有没有懂 Prolog 的程序员”

你做什么工作？你看看最上面的简历。如果那个程序员知道 Prolog，你就完成了。

如果不是，那么只有这样一份简历的唯一方法就是它是否在堆栈的其余部分中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:23:43.167

第 2 点）不成立：Prolog 将尝试搜索解决方案的*每个规则。*

但它将遵循严格指定的顺序在您的数据库中搜索，从而导致对解决方案空间的深度优先搜索。

我会读

如果 X 是第一个元素（即统一头部，第 1 条），或者是尾部的成员（第 2 条），则 X 是列表的成员。

# c# - 重定向回 Default.aspx

> ID：15481237
> 
> 赞同：2
> 
> 时间：2013-03-18T15:57:12.927
> 
> 标签：c#, jquery, ajax, postback, webmethod

我有一个 default.aspx (c#) 页面，它有一个简单的 Post AJAX 调用，`WebMethod`它返回一个 JSON 对象，这样我就可以填充一个 DataTable。在我引入登录页面之前一切正常。现在，当用户被重定向到默认页面时，登录后，帖子永远不会出现在 FireBug 中。

这是我的 AJAX 调用：

```
$.ajax({
            type: 'POST',
            url: '/Default.aspx/GetValueDateSummary',
            contentType: 'json',
            data: {},
            sucess: function (response) {
                renderTable(response.d);
            },
            error: function (errMsg) {
                $('#errorMessage').text(errMsg);
            }
        });
    }); 
```

后面的代码是：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
public static List<ValueDateSummary> GetValueDateSummary()
{
    some code in here.....

   return drList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:32:49.157

```
sucess: function (response) { 
```

应该

```
success: function (response) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:25:50.693

您使用的是 ScriptManager 对象吗？如果是这样，我相信您需要启用页面方法才能使其工作。

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">
</asp:ScriptManager> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:55:10.400

好的，我整理了。

这是完整的 Ajax 调用，似乎我缺少正确的 contentType 和 dataType

```
 $.ajax({
               type: 'POST',
               url: 'Default.aspx/GetValueDateSummary',
               contentType: 'application/json;charset=utf-8',
               dataType: 'json',
               success: function (response) {
                   console.log(response);
                   alert(response.d);
                   renderTable(response.d);
               },
               error: function (errMsg) {
                   $('#errorMessage').text(errMsg);
               }
           }); 
```

# python - python optimize.leastsq：将圆拟合到 3d 点集

> ID：15481242
> 
> 赞同：6
> 
> 时间：2013-03-18T15:57:25.520
> 
> 标签：python, optimization, curve-fitting, least-squares

我正在尝试对 3D 数据集使用[圆形拟合代码](http://www.scipy.org/Cookbook/Least_Squares_Circle)。我已经为 3D 点修改了它，只在必要时添加了 z 坐标。我的修改对一组点效果很好，对另一组点效果不好。请查看代码，如果它有一些错误。

```
import trig_items
import numpy as np
from trig_items import *
from numpy import *
from matplotlib import pyplot as p
from scipy import optimize

# Coordinates of the 3D points
##x = r_[36, 36, 19, 18, 33, 26]
##y = r_[14, 10, 28, 31, 18, 26]
##z = r_[0, 1, 2, 3, 4, 5]

x = r_[ 2144.18908574,  2144.26880854,  2144.05552972,  2143.90303742,  2143.62520676,
  2143.43628579,  2143.14005775,  2142.79919654,  2142.51436023,  2142.11240866,
  2141.68564346,  2141.29333828,  2140.92596405,  2140.3475612,   2139.90848046,
  2139.24661021,  2138.67384709,  2138.03313547,  2137.40301734,  2137.40908256,
  2137.06611224,  2136.50943781,  2136.0553113,   2135.50313189,  2135.07049922,
  2134.62098139,  2134.10459535,  2133.50838433,  2130.6600465,   2130.03537342,
  2130.04047644,  2128.83522468,  2127.79827542,  2126.43513385,  2125.36700593,
  2124.00350543,  2122.68564431,  2121.20709478,  2119.79047011,  2118.38417647,
  2116.90063343,  2115.52685778,  2113.82246629,  2112.21159431,  2110.63180117,
  2109.00713198,  2108.94434529,  2106.82777156,  2100.62343757,  2098.5090226,
  2096.28787738,  2093.91550703,  2091.66075061,  2089.15316429,  2086.69753869,
  2084.3002414,   2081.87590579,  2079.19141866,  2076.5394574,   2073.89128676,
  2071.18786213]
y = r_[ 725.74913818,  724.43874065,  723.15226506,  720.45950581,  717.77827954,
  715.07048092,  712.39633862,  709.73267688,  707.06039438,  704.43405908,
  701.80074596,  699.15371526,  696.5309022,   693.96109921,  691.35585501,
  688.83496327,  686.32148661,  683.80286662,  681.30705568,  681.30530975,
  679.66483676,  678.01922321,  676.32721779,  674.6667554,   672.9658024,
  671.23686095,  669.52021535,  667.84999077,  659.19757984,  657.46179949,
  657.45700508,  654.46901086,  651.38177517,  648.41739432,  645.32356976,
  642.39034578,  639.42628453,  636.51107198,  633.57732055,  630.63825133,
  627.75308356,  624.80162215,  622.01980232,  619.18814892,  616.37688894,
  613.57400131,  613.61535723,  610.4724493,   600.98277781,  597.84782844,
  594.75983001,  591.77946964,  588.74874068,  585.84525834,  582.92311166,
  579.99564481,  577.06666417,  574.30782762,  571.54115037,  568.79760614,
  566.08551098]
z = r_[ 339.77146775,  339.60021095,  339.47645894,  339.47130963,  339.37216218,
  339.4126132,   339.67942046,  339.40917728,  339.39500353,  339.15041461,
  339.38959195,  339.3358209,   339.47764895,  339.17854867,  339.14624071,
  339.16403926,  339.02308811,  339.27011082,  338.97684183,  338.95087698,
  338.97321177,  339.02175448,  339.02543922,  338.88725411,  339.06942374,
  339.0557553,   339.04414618,  338.89234303,  338.95572249,  339.00880416,
  339.00413073,  338.91080374,  338.98214758,  339.01135789,  338.96393537,
  338.73446188,  338.62784913,  338.72443217,  338.74880562,  338.69090173,
  338.50765186,  338.49056867,  338.57353355,  338.6196255,   338.43754399,
  338.27218569,  338.10587265,  338.43880881,  338.28962141,  338.14338705,
  338.25784154,  338.49792568,  338.15572139,  338.52967693,  338.4594245,
  338.1511823,   338.03711207,  338.19144663,  338.22022045,  338.29032321,
  337.8623197 ]

# coordinates of the barycenter
xm = mean(x)
ym = mean(y)
zm = mean(z)

### Basic usage of optimize.leastsq

def calc_R(xc, yc, zc):
    """ calculate the distance of each 3D points from the center (xc, yc, zc) """
    return sqrt((x - xc) ** 2 + (y - yc) ** 2 + (z - zc) ** 2)

def func(c):
    """ calculate the algebraic distance between the 3D points and the mean circle centered at c=(xc, yc, zc) """
    Ri = calc_R(*c)
    return Ri - Ri.mean()

center_estimate = xm, ym, zm
center, ier = optimize.leastsq(func, center_estimate)
##print center

xc, yc, zc = center
Ri       = calc_R(xc, yc, zc)
R        = Ri.mean()
residu   = sum((Ri - R)**2)
print 'R =', R 
```

因此，对于第一组`x, y, z`（在代码中注释）它运行良好：输出是`R = 39.0097846735`. 如果我使用第二组点（未注释）运行代码，则生成的半径为`R = 108576.859834`，几乎是直线。我画了最后一个。![](../Images/639bb56a3834f4dae863625d3f421ae9.png)

蓝点是给定的数据集，红点是结果半径的弧`R = 108576.859834`。很明显，给定数据集的半径比结果小得多。

这是另一组点。![](../Images/c9fe6d54ba400534d8c9c8fea4d8386e.png)

很明显，最小二乘不能正常工作。

请帮我解决这个问题。

**更新**

这是我的解决方案：

```
### fit 3D arc into a set of 3D points             ###
### output is the centre and the radius of the arc ###
def fitArc3d(arr, eps = 0.0001):
    # Coordinates of the 3D points
    x = numpy.array([arr[k][0] for k in range(len(arr))])
    y = numpy.array([arr[k][4] for k in range(len(arr))])
    z = numpy.array([arr[k][5] for k in range(len(arr))])
    # coordinates of the barycenter
    xm = mean(x)
    ym = mean(y)
    zm = mean(z)
    ### gradient descent minimisation method ###
    pnts = [[x[k], y[k], z[k]] for k in range(len(x))]
    meanP = Point(xm, ym, zm) # mean point
    Ri = [Point(*meanP).distance(Point(*pnts[k])) for k in range(len(pnts))] # radii to the points
    Rm = math.fsum(Ri) / len(Ri) # mean radius
    dR = Rm + 10 # difference between mean radii
    alpha = 0.1
    c = meanP
    cArr = []
    while dR  > eps:
        cArr.append(c)
        Jx = math.fsum([2 * (x[k] - c[0]) * (Ri[k] - Rm) / Ri[k] for k in range(len(Ri))])
        Jy = math.fsum([2 * (y[k] - c[1]) * (Ri[k] - Rm) / Ri[k] for k in range(len(Ri))])
        Jz = math.fsum([2 * (z[k] - c[2]) * (Ri[k] - Rm) / Ri[k] for k in range(len(Ri))])
        gradJ = [Jx, Jy, Jz] # find gradient
        c = [c[k] + alpha * gradJ[k] for k in range(len(c)) if len(c) == len(gradJ)] # find new centre point
        Ri = [Point(*c).distance(Point(*pnts[k])) for k in range(len(pnts))] # calculate new radii
        RmOld = Rm
        Rm = math.fsum(Ri) / len(Ri) # calculate new mean radius
        dR = abs(Rm - RmOld) # new difference between mean radii

    return Point(*c), Rm 
```

它不是非常优化的代码（我没有时间对其进行微调），但它可以工作。

![](../Images/08e2dd453371d174b2f995289de57420.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:04:53.543

我猜问题出在数据和相应的算法上。如果最小二乘法产生局部抛物线最小值，那么它就可以很好地工作，这样简单的梯度法就会接近方向最小值。不幸的是，您的数据不一定如此。您可以通过保持一些粗略估计`xc`和`yc`固定并绘制残差平方和作为和的函数`zc`来检查这一点`R`. 我得到一个回旋镖形状的最小值。根据您的起始参数，您可能会以偏离实际最小值的分支之一结束。一旦进入谷底，这可能会非常平坦，以至于您超过最大迭代次数或获得在算法容差范围内接受的东西。与往常一样，您的起始参数越好，认为越好。不幸的是，你只有一个小圆弧，所以很难变得更好。我不是 Python 方面的专家，但我认为这`leastsq`可以让您使用雅可比和梯度方法。尝试与宽容以及。简而言之：代码在我看来基本上没问题，但是您的数据是病态的，您必须使代码适应这种数据。Karimäki 有一个 2D 中的非迭代解决方案，也许你可以适应 [这种方法](http://www.hep.ph.ic.ac.uk/~hallg/UA9/Karimaki_1991.pdf)到3D。你也可以看看[这个](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CFQQFjAF&url=http://posgrado.escom.ipn.mx/biblioteca/Robust%2520Fitting%2520of%2520Circle%2520Arcs.pdf&ei=dx1cUZThA_TT7Aba-IDYBw&usg=AFQjCNF211iKfbiq0qK4J_zfCNUcs-VssQ&sig2=C-3OV9zuynTsPfpXjvrlvw&bvm=bv.44697112,d.ZGU&cad=rja)。当然你会发现更多的文献。

我刚刚使用单纯形算法检查了数据。正如我所说，最低限度的表现不佳。在这里看到一些残差函数的削减。只有在 xy 平面中，您才能获得一些合理的行为。zr- 和 xr- 平面的特性使得寻找过程非常困难。

![在此处输入图像描述](../Images/3386dc516117969c89e33991dfb2b18d.png)

所以一开始单纯形算法找到了几个几乎稳定的解。您可以在下图中将它们视为平坦的台阶（蓝色 x、紫色 y、黄色 z、绿色 R）。最后，算法必须沿着几乎平坦但非常伸展的山谷走下去，导致 z 和 R 的最终转换。不过，如果容差不足，我希望许多区域看起来像一个解决方案。在 10^-5 的标准容差下，算法在大约 350 次迭代后停止。我必须将其设置为 10^-10 才能获得此解决方案，即 [1899.32, 741.874, 298.696, 248.956]，这看起来还不错。

![在此处输入图像描述](../Images/7ae4b72922d466533301d8b3595c0477.png)

**更新**

如前所述，解决方案取决于工作精度和要求的精度。所以你手工制作的梯度方法可能效果更好，因为这些值与内置最小二乘拟合相比是不同的。尽管如此，这是我的版本，适合两步。首先，我为数据拟合了一个平面。在下一步中，我在这个平面内拟合一个圆圈。这两个步骤都使用最小二乘法。这次它起作用了，因为每一步都避免了关键形状的最小值。（当然，如果弧段变小并且数据实际上位于一条直线上，则平面拟合会遇到问题。但所有算法都会发生这种情况）

```
from math import *
from matplotlib import pyplot as plt
from scipy import optimize
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
import pprint as pp

dataTupel=zip(xs,ys,zs) #your data from above

# Fitting a plane first
# let the affine plane be defined by two vectors, 
# the zero point P0 and the plane normal n0
# a point p is member of the plane if (p-p0).n0 = 0 

def distanceToPlane(p0,n0,p):
    return np.dot(np.array(n0),np.array(p)-np.array(p0))    

def residualsPlane(parameters,dataPoint):
    px,py,pz,theta,phi = parameters
    nx,ny,nz =sin(theta)*cos(phi),sin(theta)*sin(phi),cos(theta)
    distances = [distanceToPlane([px,py,pz],[nx,ny,nz],[x,y,z]) for x,y,z in dataPoint]
    return distances

estimate = [1900, 700, 335,0,0] # px,py,pz and zeta, phi
#you may automize this by using the center of mass data
# note that the normal vector is given in polar coordinates
bestFitValues, ier = optimize.leastsq(residualsPlane, estimate, args=(dataTupel))
xF,yF,zF,tF,pF = bestFitValues

point  = [xF,yF,zF]
normal = [sin(tF)*cos(pF),sin(tF)*sin(pF),cos(tF)]

# Fitting a circle inside the plane
#creating two inplane vectors
sArr=np.cross(np.array([1,0,0]),np.array(normal))#assuming that normal not parallel x!
sArr=sArr/np.linalg.norm(sArr)
rArr=np.cross(sArr,np.array(normal))
rArr=rArr/np.linalg.norm(rArr)#should be normalized already, but anyhow

def residualsCircle(parameters,dataPoint):
    r,s,Ri = parameters
    planePointArr = s*sArr + r*rArr + np.array(point)
    distance = [ np.linalg.norm( planePointArr-np.array([x,y,z])) for x,y,z in dataPoint]
    res = [(Ri-dist) for dist in distance]
    return res

estimateCircle = [0, 0, 335] # px,py,pz and zeta, phi
bestCircleFitValues, ier = optimize.leastsq(residualsCircle, estimateCircle,args=(dataTupel))

rF,sF,RiF = bestCircleFitValues
print bestCircleFitValues

# Synthetic Data
centerPointArr=sF*sArr + rF*rArr + np.array(point)
synthetic=[list(centerPointArr+ RiF*cos(phi)*rArr+RiF*sin(phi)*sArr) for phi in np.linspace(0, 2*pi,50)]
[cxTupel,cyTupel,czTupel]=[ x for x in zip(*synthetic)]

### Plotting
d = -np.dot(np.array(point),np.array(normal))# dot product
# create x,y mesh
xx, yy = np.meshgrid(np.linspace(2000,2200,10), np.linspace(540,740,10))
# calculate corresponding z
# Note: does not work if normal vector is without z-component
z = (-normal[0]*xx - normal[1]*yy - d)/normal[2]

# plot the surface, data, and synthetic circle
fig = plt.figure()
ax = fig.add_subplot(211, projection='3d')
ax.scatter(xs, ys, zs, c='b', marker='o')
ax.plot_wireframe(xx,yy,z)
ax.set_xlabel('X Label')
ax.set_ylabel('Y Label')
ax.set_zlabel('Z Label')
bx = fig.add_subplot(212, projection='3d')
bx.scatter(xs, ys, zs, c='b', marker='o')
bx.scatter(cxTupel,cyTupel,czTupel, c='r', marker='o')
bx.set_xlabel('X Label')
bx.set_ylabel('Y Label')
bx.set_zlabel('Z Label')
plt.show() 
```

其半径为 245。这与另一种方法给出的（249）接近。所以在误差范围内我得到了相同的结果。![平面拟合和圆近似数据](../Images/3df58a734d2ca3e55d29b436cfddb9e3.png)

绘制的结果看起来很合理。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T04:42:31.563

感觉您错过了第一个版本代码中的一些限制。该实现可以解释为将球体拟合到 3d 点。这就是为什么第二个数据列表的第二个半径几乎是直线的原因。它的想法就像你在一个大球体上给它一个小圆圈。

# wcf - 405 - REST - 不允许使用带点访问路径的动词

> ID：15481249
> 
> 赞同：1
> 
> 时间：2013-03-18T15:57:33.727
> 
> 标签：wcf, rest

我有一个带有`UriTemplate="Action/{object}"`. 此界面在 上运行良好`IIS`，但在 上`ASP.NET development host`，它给了我`405`，例如，`The HTTP verb POST used to access path '/x.svc/Action/a.b.c' is not allowed.`在调试器中，我`Application_BeginRequest`在它失败之前到达。

`{object}`对于不包含点的值，我没有问题。

根据我的发现，这似乎与路由规则冲突。就好像与将视为文件路径`UriTemplate`的更高优先级规则相冲突。`URI`

有没有办法让 ASP.NET 开发服务器的行为与 ASP.NET 开发服务器相同`IIS`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:50:47.960

> 有没有办法让 ASP.NET 开发服务器的行为与 IIS 相同？

您可以使用[`IIS Express`](http://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx)代替卡西尼。它的行为与成熟的 IIS 服务器完全相同。`<system.webServer>`如果您切换到 IIS express，您可能需要将所有 http 模块和处理程序移动到该部分。

# c# - IoC 框架在 MVC 应用程序中的用途是什么？

> ID：15481250
> 
> 赞同：14
> 
> 时间：2013-03-18T15:57:36.473
> 
> 标签：c#, .net, design-patterns, inversion-of-control, ioc-container

我试图理解使用像 StructureMap 这样的 IoC 框架，但我不禁认为这些“设计模式”只是无稽之谈，使代码变得更加复杂。

让我从一个我认为 IoC 有点用处的例子开始。

我认为 IoC 在处理 MVC 框架中控制器类的实例化时可能很有用。在这种情况下，我正在考虑 .NET MVC 框架。

通常，控制器类的实例化由框架处理。这意味着您不能真正将任何参数传递给控制器​​类的构造函数。这就是 IoC 框架可以派上用场的地方。`constructor`在 IoC 容器中的某处，您可以指定在调用控制器类时应该实例化哪个类并将其传递给您的控制器。

当您想要对控制器进行单元测试时，这也很方便，因为您可以模拟传递给它的对象。

但就像我说的，我可以理解为什么人们想将它用于他们的控制器类。但不在此之外。从那里你可以简单地做正常的*依赖注入*。

但为什么不简单地这样做：

```
public class SomeController
{
    public SomeController() : this( new SomeObj() ) 
    {
    }

    publiv SomeController(SomeObj obj)
    {
        this.obj = obj;
    }
} 
```

现在您不必使用任何第 3 方 IoC 框架，这也意味着更低的学习曲线。因为您也不必了解该框架的规范。

您仍然可以在单元测试中模拟该对象。所以那里也没有问题。

你唯一能说的是，“但是现在你的类是*紧密耦合*到的`SomeObj`”。这是真实的。但谁在乎！？这是一个控制器类！我永远不会重用那个类..那么我到底为什么要担心这种紧密耦合..？我可以模拟传递给它的对象。这是唯一重要的事情。

那么我为什么要费心使用 IoC 呢？我真的错过了重点吗...？对我来说，IoC 模式只是一些被高估的模式。向您的应用程序添加更多、复杂的层...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T16:04:14.667

您提出了一个很好的问题，在您的示例中，我会说 IoC 会/可能是矫枉过正，但只需考虑将您的代码扩展到以下内容，然后您可能会开始看到让 IoC 为您完成所有这些工作的好处。

```
public class SomeController
{
    public SomeController() : this( new SomeObj(new configuration(), new SomethingElse(new SomethingElseToo())) ) 
    {
    }

    publiv SomeController(SomeObj obj)
    {
        this.obj = obj;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T16:03:41.953

IoC 容器可以为您做很多事情。

显而易见的是提供依赖项的实现，这在其他地方很有意义，而不仅仅是在控制器中 - 如果您决定替换`SomeObj`为`SomeObj2`，您可以只在一个地方完成，而不是 57 个地方。

另一个是处理生命周期问题，即您可以指定对象的范围（单例、每个线程、每个请求、瞬态......）。

此外，IoC 容器可以设置您的可选依赖项（即属性注入），这比编写此代码更容易：

```
var svc = new Service(new MyRepository())
svc.Logger = logger;
svc.XY = xy 
```

以及这里陈述的所有充分理由：[为什么我需要一个 IoC 容器而不是简单的 DI 代码？](https://stackoverflow.com/questions/871405/why-do-i-need-an-ioc-container-as-opposed-to-straightforward-di-code)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T16:05:20.397

> 但谁在乎！？这是一个控制器类！我不会重用那个类，永远..

**这是一个很好的观点，但是如果您有嵌套的依赖项，并且具有不同的生命周期**，请考虑代码的简洁程度。例如，您可以有一些应用程序级别的单例，需要“按请求”的东西等等。IoC 使您的代码更简洁，并且易于修改。

# android - 在android中查询sqlite

> ID：15481253
> 
> 赞同：1
> 
> 时间：2013-03-18T15:57:48.950
> 
> 标签：android, sqlite

我正在为我的游戏创建一个数据库，一切正常，直到我想查询一个项目。

我一直在尝试几种不同的方法，但我无法让它发挥作用。我只是在我的代码中看不到错误。

代码如下：

```
 public Item getItem(String icon) {
       String[] columns = {KEY_ID, KEY_TYPE, KEY_ICON, KEY_LEVEL, KEY_ARMOR, KEY_DAMAGE, KEY_BUY, KEY_SELL};
       Cursor cursor = db.query(DB_TABLE, columns, KEY_ICON + "=" + icon,
       null, null, null, null);
      Item item=null;
       if(cursor != null && cursor.moveToFirst()) {
           item= new Item(cursor.getString(TYPE_COLUMN), 
                     cursor.getString(ICON_COLUMN),
                     cursor.getString(LEVEL_COLUMN),
                     cursor.getString(ARMOR_COLUMN),
                     cursor.getString(DAMAGE_COLUMN),
                     cursor.getString(BUY_COLUMN),
                     cursor.getString(SELL_COLUMN)
                           );
       }
       return item;
   } 
```

我得到的错误是

> 没有这样的列：fast_boots（代码 1）：编译时：SELECT id、type、icon、level、armor、damage、buy、sell from items where icon=fast_boots

当试图找到 .getItem("fast_boots"); 我确实在我的 sql 数据库中看到了 fast_boots

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:10:44.963

为了使查询工作，也许你应该试试这个：

```
KEY_ICON + "= '" + icon + "' " 
```

因为 ' `icon`' 是一个字符串值。由于您没有指定它，它可能试图将其理解为投影中的一列

但是，这是实现此类功能的错误方法。不要对`getItem()`方法本身（主线程）执行数据库查询，它应该在后台运行，因此不会影响主线程。

请阅读[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:14:13.793

尝试这个

```
Cursor cursor = db.query(DB_TABLE, columns, KEY_ICON + "='" + icon +"'",
       null, null, null, null); 
```

我添加了`'`

# ruby-on-rails-3 - nginx 无法加载此类文件 -- ruby gems/path_support

> ID：15481262
> 
> 赞同：1
> 
> 时间：2013-03-18T15:58:05.287
> 
> 标签：ruby-on-rails-3, nginx

我在 nginx + 乘客 + rails 3.2.1 下，当我尝试启动我的应用程序时，我得到了

```
cannot load such file -- rubygems/path_support 
```

gem 环境的输出是

```
RubyGems Environment:

- RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-11-10 patchlevel 327) [i686-linux]
  - INSTALLATION DIRECTORY: /root/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /root/.rbenv/versions/1.9.3-p327/bin/ruby
  - EXECUTABLE DIRECTORY: /root/.rbenv/versions/1.9.3-p327/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /root/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1
     - /root/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

在我的 nginx.conf 我有

```
user root;

http {
      passenger_root /root/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/passenger-3.0.19;
      passenger_ruby /root/.rbenv/versions/1.9.3-p327/bin/ruby;
    passenger_default_user root;
    passenger_default_group root;
.... 
```

我还能检查什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:16:43.267

多谢 ！你的配置文件中的代码救了我的命：

```
passenger_default_user root;
passenger_default_group root; 
```

我遇到了同样的错误并用你的配置文件解决了，详细的答案在这里：[https ://stackoverflow.com/a/15777738/445908](https://stackoverflow.com/a/15777738/445908)

# c# - LinqTOEntities 差异 beteen 存在并包含

> ID：15481272
> 
> 赞同：-3
> 
> 时间：2013-03-18T15:58:31.277
> 
> 标签：c#, linq-to-entities

`exists`使用over和有什么区别`contains`

```
var s = new int[] { 1, 2, 3, 4, 5 };
dbset.where(x => s.contains(x.id); 
```

或者

```
var s = new int[] { 1, 2, 3, 4, 5 };
dbset.Where(x => s.Exists(y => x.id)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:15:43.277

1.  [Exists](http://msdn.microsoft.com/en-us/library/bfed8bca.aspx)是 的一种方法，在数组或扩展`List<T>`上没有这种方法。`IEnumerable<T>`
2.  此方法的正确用法是`x => s.Exists(y => y == x.id)`（您应该传递谓词，即返回布尔值的方法）
3.  不同之处在于 - `Contains`Linq to Entities 支持，`Exists`不支持。

# bigdata - 使用 SiSense 棱镜的经验

> ID：15481273
> 
> 赞同：1
> 
> 时间：2013-03-18T15:58:33.137
> 
> 标签：bigdata

我很想知道构成 SiSense Prism BI 平台的语言/技术。它看起来像一个非常强大的平台，具有相当令人印象深刻的凭据。

[SiSense 网站 - 棱镜](http://www.sisense.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:35:13.573

SiSense Prism 主要在后端使用 C/C++ 编写，C# 用于桌面工具，JavaScript/HTML5 用于交互式 Web 应用程序。

Prism 套件中嵌入了许多独特的技术。这些技术中的大多数对您来说是“不可见的”，范围从压缩算法到指令回收和 CPU 缓存感知（非常可怕的东西）。

这些技术（统称为 ElastiCube）实现了 Prism 最基本的功能——使非技术用户在单个商品服务器上实时（按需）分析 TB 级数据。

您可以在此处阅读有关 SiSense 技术的更多信息： [http ://www.sisense.com/product/technology](http://www.sisense.com/product/technology)

HTH, Elad 以色列 | SiSense 创始人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-18T09:22:38.620

很明显后端大量使用了monetDB： [https ://www.monetdb.org](https://www.monetdb.org)

通过检查软件包附带的 dll、存储在磁盘上的数据和服务器的内部连接流，可以很容易地观察到这一点。

显然回收、压缩、缓存和 CPU 利用率是所有专业开发人员用于创建软件的技术（monetDB 似乎是一个很好的参考），所以这并不是真正独特的......

# c# - 以发布模式发布应用程序并自动将调试设置为 false

> ID：15481274
> 
> 赞同：1
> 
> 时间：2013-03-18T15:58:37.557
> 
> 标签：c#, .net, asp.net-mvc

在我发布我的项目之前，我需要将其设置为发布模式，并在 web.config 文件中将调试标志设置为 false。如果定义了发布符号，有没有办法使用预处理器指令将调试标志设置为 false？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:00:09.700

您可以创建依赖于当前构建配置的 web.config 文件转换。看看：[http ://www.asp.net/web-forms/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-web-config-file-transformations -3-of-12](http://www.asp.net/web-forms/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-web-config-file-transformations-3-of-12)

# c# - C# 检查 MaskedTestBox 是否为空

> ID：15481278
> 
> 赞同：1
> 
> 时间：2013-03-18T15:59:06.723
> 
> 标签：c#, maskedtextbox

如何检查 C# 中的屏蔽文本框是否为空，即用户没有输入任何内容？

我的文本框只允许输入 4 个数字。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:06:10.380

您可以检查`Text`MaskedTextBox 的属性是否`null`为`String.Empty`

```
if (String.IsNullOrEmpty(maskedTextBox1.Text))
{
    //no input
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T16:11:21.783

试试这个：

```
maskedTextBoxInput.TextMaskFormat = MaskFormat.ExcludePromptAndLiterals;
if (maskedTextBoxInput.Text == "")
{
    ...
} 
```

# sql - 涉及连接的 SQL 查询

> ID：15481281
> 
> 赞同：1
> 
> 时间：2013-03-18T15:59:13.247
> 
> 标签：sql, ms-access-2007

对于 SQL 评估，我必须执行一个查询，其中我需要列出按销售员代码排序的过去一个月的汽车销售情况。我创建了一条 SQL 语句。但是，当我运行它时，除了我在查询中包含的列名之外，它什么都没有列出。我使用的 SQL 代码如下：

```
SELECT CarForSale.SalesmanCode, 
  Salesman.SalesmanName, 
  Customer.CustomerCode, 
  Customer.CustomerName, 
  Customer.CustomerAddress
FROM 
(
  Centre 
  INNER JOIN Customer 
    ON Centre.CentreCode = Customer.CentreCode
) 
INNER JOIN CarForSale 
  ON (Customer.CustomerCode = CarForSale.CustomerCode) 
  AND (Centre.CentreCode = CarForSale.CentreCode), Salesman
WHERE CarForSale.CFSSoldDate BETWEEN CVDATE('01/02/2013') AND  CVDATE('01/03/2013')
ORDER BY Salesman.SalesmanCode; 
```

如果有人有任何反馈或知道我哪里出错了，我将非常感谢有关此问题的一些帮助。

以下是要求的一些示例数据：

*   粮安委表

    ```
     CFSCode CFSMake CFSModel CFSSellingPrice 
     000001 Mercedes  W168         45000             

     CFSSoldDate CentreCode SalesmanCode CustomerCode
     01/03/2013   00000001   0000000001 00000001 
    ```

*   推销员表

    ```
    SalesmanCode SalesmanName SalemanCommThisYear SalesmanStatus CentreCode
    0000000001    Liam Jones       2250         senior        00000001 
    ```

*   客户表

    ```
    CustomerCode    CustomerName    CustomerAddress   CentreCode    CustomerStatus
    00000001    Gina Smith       1, The Lake,       00000002         good
                                 Merthyr Tydfil 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:05:03.637

在您当前的查询中，您有一些不寻常的语法：

```
AND (Centre.CentreCode = CarForSale.CentreCode), Salesman -- what's this 
```

我不确定`, Salesman`应该做什么。但是，如果您尝试`JOIN`在`Salesman`桌子上，那么您的查询将是：

```
SELECT CarForSale.SalesmanCode, 
  Salesman.SalesmanName, 
  Customer.CustomerCode, 
  Customer.CustomerName, 
  Customer.CustomerAddress
FROM ((Centre 
INNER JOIN Customer 
  ON Centre.CentreCode = Customer.CentreCode) 
INNER JOIN CarForSale 
  ON (Customer.CustomerCode = CarForSale.CustomerCode) 
  AND (Centre.CentreCode = CarForSale.CentreCode)))
INNER JOIN Salesman
  ON CarForSale.SalesmanCode = Salesman.SalesmanCode
WHERE CarForSale.CFSSoldDate BETWEEN #01/02/2013# AND #01/03/2013#
ORDER BY Salesman.SalesmanCode; 
```

同样在 MS Access 中，使用日期时，它们应该被 pound sigs 包围`#`。您的查询应该是：

```
SELECT CarForSale.SalesmanCode, 
  Salesman.SalesmanName, 
  Customer.CustomerCode, 
  Customer.CustomerName, 
  Customer.CustomerAddress
FROM ((Centre 
INNER JOIN Customer 
  ON Centre.CentreCode = Customer.CentreCode) 
INNER JOIN CarForSale 
  ON (Customer.CustomerCode = CarForSale.CustomerCode) 
  AND (Centre.CentreCode = CarForSale.CentreCode)))
INNER JOIN Salesman
  ON CarForSale.SalesmanCode = Salesman.SalesmanCode
WHERE CarForSale.CFSSoldDate BETWEEN #01/02/2013# AND #01/03/2013#
ORDER BY Salesman.SalesmanCode; 
```

编辑＃1，我不确定您为什么要加入`Centre`表格，因为您没有将它用于任何事情。我刚刚使用您的示例数据在 MS Access 中运行了以下查询并得到了结果：

```
SELECT CarForSale.SalesmanCode, 
  Salesman.SalesmanName, 
  Customer.CustomerCode, 
  Customer.CustomerName, 
  Customer.CustomerAddress
FROM (Customer 
INNER JOIN CarForSale 
  ON Customer.CustomerCode = CarForSale.CustomerCode)
INNER JOIN Salesman
  ON CarForSale.SalesmanCode = Salesman.SalesmanCode
WHERE CarForSale.CFSSoldDate BETWEEN #01/02/2013# AND #01/03/2013#
ORDER BY Salesman.SalesmanCode; 
```

# youtube-api - Youtube 视频搜索 API：按标签过滤已损坏？

> ID：15481299
> 
> 赞同：2
> 
> 时间：2013-03-18T16:00:28.857
> 
> 标签：youtube-api

我正在使用以下 API 调用来提取`<TAG>`来自的所有视频`<CHANNEL>`：

```
http://gdata.youtube.com/feeds/api/users/<CHANNEL>/uploads/-/<TAG>/?v=2&alt=jsonc&start-index=1&max-results=50&orderby=published 
```

但是对于某些标签名称，结果是错误的，甚至是空的。例如

```
http://gdata.youtube.com/feeds/api/users/NintendoFR/uploads/-/n3ds/?v=2&alt=jsonc&start-index=1&max-results=50&orderby=published 
```

只有 1 个结果，但另一方面，我知道至少有 20 个带有标签“n3ds”的视频

```
http://gdata.youtube.com/feeds/api/users/NintendoFR/uploads/-/wiiu/?v=2&alt=jsonc&start-index=1&max-results=50&orderby=published 
```

给出预期的 36 个结果。有任何想法吗？或者有类似问题的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T16:23:19.407

有同样的问题（按标签搜索不再有效）。

Youtube API 团队有进行未经宣布的更改的历史。

例如，几个月前，“视频描述”字段被截断 - 没有任何更改公告 - 没有更新 doco 以反映更改

这看起来像一个类似的变化，即标签搜索已被贬低（关闭）。

解决方法（针对您的视频）是在视频说明的前 150 个字符左右包含标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:06:13.727

我们也有类似的问题。几天或几周前，发送这些请求的一段代码停止提供结果。经过一番研究，我们发现得到结果是随机的：

*   在某些情况下，我们会得到正确的结果
*   在某些情况下，我们没有得到任何结果。

我们可以在两个请求中发现的唯一区别是请求中缺少一个参数。在请求 XML 中的答案时，在提要节点中缺少一个项目：

```
 <feed xmlns:media='http://search.yahoo.com/mrss/'></feed> 
```

虽然我们不知道为什么会这样，但至少现在你知道你不是唯一一个有这个问题的人。

# c++ - 如何将此 Python 分区代码转换为 C++？

> ID：15481300
> 
> 赞同：0
> 
> 时间：2013-03-18T16:00:44.583
> 
> 标签：c++, python

我有这个算法来生成 n 的分区：

```
def partitions(n):
    if n == 0:
        yield []
        return
    for p in partitions(n-1):
        yield [1] + p
        if p and (len(p) < 2 or p[1] > p[0]):
            yield [p[0] + 1] + p[1:] 
```

但是，我什至不确定如何将其翻译成 C++，主要是因为我不知道 yield 功能或子字符串切片或列表连接等的速记等效项。最直接的翻译是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:39:54.443

为了您的方便，我在[这篇](https://stackoverflow.com/questions/10716324/partition-function-in-c)文章中稍微编辑了 BLUEPIXY 的答案。

```
#include <iostream>
#include <vector>

void save(std::vector<std::vector<int> > & dest, std::vector<int> const & v, int level){
    dest.push_back(std::vector<int>(v.begin(), v.begin() + level + 1));
}

void partition(int n, std::vector<int> & v, std::vector<std::vector<int> > & dest, int level = 0){
    int first; /* first is before last */
    if(0 == n){
        return;
    }
    v[level] = n;
    save(dest, v, level);

    first = (level == 0) ? 1 : v[level - 1];

    for(int i = first; i <= (n / 2); ++i){
        v[level] = i; /* replace last */
        partition(n - i, v, dest, level + 1);
    }
}

int main(int argc, char ** argv) {
    int N = 30;

    std::vector<int> vec(N);
    std::vector<std::vector<int> > partitions;
    // You could change N * N to minimize the number of relocations
    partitions.reserve(N * N);

    partition(N, vec, partitions);

    std::cout << "Partitions: " << partitions.size() << std::endl;
    for(std::vector<std::vector<int> >::iterator pit = partitions.begin(); pit != partitions.end(); ++pit) {
        std::cout << '[';
        for(std::vector<int>::iterator it = (*pit).begin(); it != (*pit).end(); ++it) {
            std::cout << *it << '\t';
        }
        std::cout << ']' << std::endl;
    }
    return 0;
} 
```

[ideone](http://ideone.com/xTml8P)上的输出

# jquery - 使用 jQuery grep() 查找匹配项的最简洁方法？

> ID：15481303
> 
> 赞同：1
> 
> 时间：2013-03-18T16:00:59.207
> 
> 标签：jquery

我想知道是否有办法提高这个函数的优雅：

```
 function findById(id) {
    var items = [
      { Id: 1, Value: 'My value 1' },
      { Id: 2, Value: 'My value 2' }
     ];

    var result = $.grep(items, function (obj) { return obj.Id === id; });

    return result.length > 0 ? result[0] : null;
  } 
```

特别是，我宁愿它看起来像这样：

```
 function findById(id) {
    var items = [
      { Id: 1, Value: 'My value 1' },
      { Id: 2, Value: 'My value 2' }
     ];

    return $.grep(items, function (obj) { return obj.Id === id; })[0] || null;
  } 
```

这显然是一大堆失败，但想法是也许有一种更清洁的方法来编写函数。没什么大不了的，但我想我会写下来以防我遗漏了什么。

[编辑] 正如所指出的，理想的代码工作得很好。我错误地认为访问空数组的第一个元素会引发错误，而是返回未定义。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:04:58.743

您的“理想”代码工作正常。在 C# 中，此功能称为`FirstOrDefault`.

这目前没有内置到 JavaScript（或 jQuery afaik）中，但[它可能会](https://github.com/Ralt/or/issues/1#issuecomment-14940411)在下一个版本中添加。

我们的好朋友 Florian 写了一个小函数，可以让你使用你想要的语法，叫做[`or`](https://github.com/Ralt/or/blob/master/lib/or.js).

这里是：

```
function or(arr, callback, context) {
    var el;
    for (var i = 0, l = arr.length; i < l; i++) {
        el = arr[i];
        if (callback.call(context, el, i, arr)) {
            return el;
        }
    }
    return null;//to return null and not undefined
} 
```

例子：

```
or([1,2,3],function(elem){ return i>2;}); //returns 3;
or([1,2,3],function(elem){ return i>3;}); //returns null;
or([1,2,3],function(elem){ return i>1;}); //returns 2; 
```

在你的例子中，那将是

```
return or(items, function (obj) { return obj.Id === id; }); 
```

一个优点是如果它在中间找到匹配项，它将不会遍历整个数组。如果您的阵列很大，那将是一个很大的不同。

# ruby-on-rails - Rails 生产中的错误指纹

> ID：15481305
> 
> 赞同：1
> 
> 时间：2013-03-18T16:01:00.177
> 
> 标签：ruby-on-rails, deployment

我正在尝试将我的 rails 应用程序部署到生产服务器 - Ubuntu / Apache 2.2 / Passenger。我在让资产管道正常工作时遇到了很大的问题。

应用程序生成的链接

```
 <img alt="Icon_twitter" src="/assets/icon_twitter-d7c26009c533fda2272d24ebd9e1d008.png" /> 
```

与预编译创建的不匹配。如果我 ssh 进入服务器并运行生产 Rails 控制台（`RAILS_ENV=production rails c`），那么

```
foo = ActionView::Base.new
foo.image_tag('icon_twitter.png') 
```

给出正确的 src url /assets/icon_twitter-98c828459b123bb84cf09f0070d95757.png，我也可以通过浏览器 [访问 http://www.ip-to-server.com/assets/icon_twitter-98c828459b123bb84cf09f0070d95757.png](http://www.ip-to-server.com/assets/icon_twitter-98c828459b123bb84cf09f0070d95757.png)，所以基本的 apache 配置应该是正确的。

什么地方出了错？我在哪里可以找到关于为什么这些指纹不匹配的帮助？

我在 Ruby 1.8.7 上使用 Rails 3.2.5，我的配置`RAILS_ENV=production rails c`来自`config = Rails.configuration`：

```
config.cache_classes: true
config.consider_all_requests_local: false
config.action_controller.perform_caching: true
config.serve_static_assets: false
config.assets.compress: true
config.assets.compile: false
config.assets.digest: true 
```

# sctp - SCTP 多流：无限循环

> ID：15481308
> 
> 赞同：1
> 
> 时间：2013-03-18T16:01:04.563
> 
> 标签：sctp

我在 SCTP 上有一个简单的客户端-服务器应用程序！客户端连接到打开 3 个流的服务器，服务器为每个流发送一个文件。问题是我不知道如何控制 3 个流，要知道流 i 0 中的 sctp_rcvmsg() 何时结束，这意味着该流的文件传输已结束……但似乎 sctp_recvmsg() 永远不会停止。这是我的代码。客户

```
#include <sys/types.h>
#include <sys/socket.h>
#include <signal.h>
#include <netinet/in.h>
#include <netinet/sctp.h>
#include <arpa/inet.h>
#include <string.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/ioctl.h>
#include <net/if.h>
#include <stdlib.h>
#include <time.h>

#define BUFFERSIZE 1024

int main(int argc, char** argv) {

int i, sockCliSCTP, flags, res;

/* Server netwrok informations */
struct sockaddr_in servAddr;

/* To get which stream it has received data from */
struct sctp_sndrcvinfo sndrcvinfo;

/* Init message to setup number of streams */
struct sctp_initmsg initmsg;

/* Catching events */
struct sctp_event_subscribe events;

/* Buffer to receive files */
char buffer[BUFFERSIZE];

/* Remove previous recently used files */
remove("first.txt");
remove("second.txt");
remove("third.txt");

char ipServ[32] = "127.0.0.1";
short int servPort = 29008;

/* BEGIN SCTP PART */
/* Creating client socket for SCTP protocol */
sockCliSCTP = socket( AF_INET, SOCK_STREAM, IPPROTO_SCTP );

/* Specify that a maximum of 3 streams will be available per socket */
memset( &initmsg, 0, sizeof(initmsg) );
initmsg.sinit_num_ostreams = 3; /* output streams */
initmsg.sinit_max_instreams = 3; /* input streams */
initmsg.sinit_max_attempts = 2;
setsockopt(sockCliSCTP, IPPROTO_SCTP, SCTP_INITMSG, &initmsg, sizeof(initmsg) );

/* Initializing server network data structs */
bzero( (void *)&servAddr, sizeof(servAddr) );
servAddr.sin_family = AF_INET;
inet_pton(AF_INET, ipServ, &servAddr.sin_addr);
servAddr.sin_port = htons(29008);
int sizeServ = sizeof(servAddr);

/* Connect to server */
res = connect(sockCliSCTP, (struct sockaddr *)&servAddr, sizeof(servAddr));
if (res < 0) {
    printf("Connection to server refused!\n");
    exit(1);
}

memset( (void *)&events, 0, sizeof(events) );
events.sctp_data_io_event = 1;
res = setsockopt(sockCliSCTP, SOL_SCTP, SCTP_EVENTS, (const void *)&events, sizeof(events));
if (res < 0) {
    printf("setsockopt failed!\n");
    exit(1);
}

/* The clients simply waits and receives for three files from the server.
 * The size of the files is increased each time this client is launched. */

FILE *oneF, *twoF, *threeF;
oneF = fopen("first.txt", "a"); /* Stream 0 */
twoF = fopen("second.txt", "a"); /* Stream 1 */
threeF = fopen("third.txt", "a"); /* Stream 2 */

/* To measure time */
time_t timeStart;
time_t timeEnd;
time_t timeRes = 0;

time(&timeStart);

int count0 = 0, count1 = 0, count2 = 0;

int checkRead[3];
for(i = 0; i<3; i++) {
    checkRead[i] = 1;
}

/* Receiving in parallel the files from 3 streams */
while(checkRead[0] || checkRead[1] || checkRead[2]) {

    printf("%d %d %d\n", checkRead[0], checkRead[1], checkRead[2]);

    res = sctp_recvmsg(sockCliSCTP, (void*)buffer, sizeof(buffer), (struct sockaddr*)&servAddr, (socklen_t *)&sizeServ, &sndrcvinfo, &flags);

    if (res == 0) {
        printf("%d stream is zero\n", sndrcvinfo.sinfo_stream);
        checkRead[sndrcvinfo.sinfo_stream] = 0;
        continue;
    }

    /* Check from which stream the data came in */
    switch(sndrcvinfo.sinfo_stream) {

    /* Write on file oneF --> first.txt */
    case 0:
        count0++;
        printf("Message received from stream 0\n");
        //printf("%s\n\n", buffer);
        fprintf(oneF, "%s", buffer);
        break;

    /* Write on file twoF --> second.txt */
    case 1:
        count1++;
        printf("Message received from stream 1\n");
        //printf("%s\n\n", buffer);
        fprintf(twoF, "%s", buffer);
        break;

    /* Write on file threeF --> third.txt */
    case 2:
        count2++;
        printf("Message received from stream 2\n");
        //printf("%s\n\n", buffer);
        fprintf(threeF, "%s", buffer);
        break;

    }

    memset(buffer, 0, sizeof(buffer));
    sleep(1);
}

close(sockCliSCTP);

time(&timeEnd);
timeRes = timeEnd - timeStart;
printf("Time elapsed is: %d seconds\n", (int)timeRes);

printf("%d messages on stream 0,\n %d messages on stream 1,\n %d messages on stream 2\n", count0, count1, count2);

} 
```

和服务器：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <signal.h>
#include <netinet/in.h>
#include <netinet/sctp.h>
#include <arpa/inet.h>
#include <string.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/ioctl.h>
#include <net/if.h>
#include <stdlib.h>
#include <time.h>
#include <sys/stat.h>
#include <fcntl.h>

#define BUFFERSIZE 1024

int main(int argc, char** argv) {

int sockCli, sockServ, one, two, three, i, res;

struct sockaddr_in client, server;

/* data struct to declarate streams */
struct sctp_initmsg initmsg;

/* buffer to read from file */
char buffer[BUFFERSIZE];

/* socket server listening */
sockServ = socket(AF_INET, SOCK_STREAM, IPPROTO_SCTP);

bzero( (void *)&client, sizeof(client));
bzero( (void *)&server, sizeof(server));

/* Preparing sever data struct and bind() */
bzero( (void *)&server, sizeof(server) );
server.sin_family = AF_INET;
server.sin_addr.s_addr = htonl( INADDR_ANY );
server.sin_port = htons(29008);

bind(sockServ, (struct sockaddr *)&server, sizeof(server));

/* Maximum of 3 streams will be available per socket */
memset( &initmsg, 0, sizeof(initmsg) );
initmsg.sinit_num_ostreams = 3;
initmsg.sinit_max_instreams = 3;
initmsg.sinit_max_attempts = 2;

res = setsockopt(sockServ, IPPROTO_SCTP, SCTP_INITMSG, &initmsg, sizeof(initmsg));
if (res < 0) {
    printf("setsockopt() failed!\n");
    exit(1);
}

/* Preparing the three files to be sent */
one = open("files/first.txt", O_RDONLY);
if (one < 0) {
    printf("Error on opening first file!\n");
    exit(1);
}

two = open("files/second.txt", O_RDONLY);
if (two < 0) {
    printf("Error on opening second file!\n");
    exit(1);
}

three = open("files/third.txt", O_RDONLY);
if (three < 0) {
    printf("Error on opening third files!\n");
    exit(1);
}

int checkFiles[3];
for(i=0; i<3; i++) {
    checkFiles[i] = 1;
}

res = listen(sockServ, 5);
if (res < 0) {
    printf("listen() failed!\n");
    exit(1);
}

while(1) {

    ssize_t readRes;
    int len = sizeof(client);
    sockCli = accept(sockServ, (struct sockaddr*)&client, &len);

    if (sockCli < 0) {
        printf("Error on accept()!\n");
        exit(1);
    }

    printf("Associated to client!\n");

    while(1) {

        memset(buffer, 0, sizeof(buffer));
        if ((readRes = read(one, (void*)buffer, sizeof(buffer))) > 0) {
            sctp_sendmsg(sockCli, (void*)buffer, (size_t)strlen(buffer), NULL, 0, 0, 0, 0 /* stream number */, 0, 0);
        }

        memset(buffer, 0, sizeof(buffer));
        if ((readRes = read(two, (void*)buffer, sizeof(buffer))) > 0) {
            sctp_sendmsg(sockCli, (void*)buffer, (size_t)strlen(buffer), NULL, 0, 0, 0, 1 /* stream number */, 0, 0);
        }

        memset(buffer, 0, sizeof(buffer));
        if ((readRes = read(three, (void*)buffer, sizeof(buffer))) > 0) {
            sctp_sendmsg(sockCli, (void*)buffer, (size_t)strlen(buffer), NULL, 0, 0, 0, 2 /* stream number */, 0, 0);
        }

        else {break;}

    }

    close(sockCli);
    close(one);
    close(two);
    close(three);

}

} 
```

我在哪里犯错？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:00:46.853

**sctp_recvmsg**不接收来自单个流的消息。它只是返回收到的任何消息，然后应用程序可以确定消息来自哪个流。

在执行此代码时，您的客户端收到所有数据后：

```
res = sctp_recvmsg(sockCliSCTP, (void*)buffer, sizeof(buffer), (struct sockaddr*)&servAddr, (socklen_t *)&sizeServ, &sndrcvinfo, &flags);

if (res == 0) {
    printf("%d stream is zero\n", sndrcvinfo.sinfo_stream);
    checkRead[sndrcvinfo.sinfo_stream] = 0;
    continue;
} 
```

**res**变为 0，因为没有收到消息并且**sndrcvinfo**结构**没有**改变。因此**sndrcvinfo.sinfo_stream**将保持等于最后一条消息来自的任何流，并且您将陷入循环，因为您不会更改**checkRead[]**值。

还有一些其他错误会使服务器/客户端行为异常。

例如，您不能在没有分段错误的情况下连续运行客户端两次，因为服务器关闭了文件描述符并且第二次不会发送任何数据。因此，当你这样做时，你会出现段错误：

```
 checkRead[sndrcvinfo.sinfo_stream] = 0; 
```

因为**sndrcvinfo**将是一个空指针。

# c# - 使用 Azure publishsettings 文件获取存储客户端凭据

> ID：15481313
> 
> 赞同：1
> 
> 时间：2013-03-18T16:01:20.990
> 
> 标签：c#, azure

我有 Azure 发布设置文件。现在我必须在订阅中访问具有指定名称的存储帐户。

如何在 C# 中完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:12:50.780

我在下面写了一些代码并验证它是否有效。它基于 Wade 的帖子：[使用新的 .publishsettings 文件以编程方式安装和使用您的管理证书](http://www.wadewegner.com/2011/11/programmatically-installing-and-using-your-management-certificate-with-the-new-publishsettings-file/)。然后我调用[Get Storage Account Keys](http://msdn.microsoft.com/en-us/library/windowsazure/ee460785.aspx)方法。Wade 的帖子中提到的几个指针：最好创建一个证书并将其安装在本地，然后使用它来调用 SM API，以便您可以删除 .publishsettings 文件。它里面有你的 SM API 证书信息，所以你应该删除它或保证它的安全。为简洁起见，此代码没有进行安装，但 Wade 的帖子中有。

```
 var publishSettingsFile =
        @"C:\yourPublishSettingsFilePathGoesHere";

        XDocument xdoc = XDocument.Load(publishSettingsFile);

        var managementCertbase64string =
            xdoc.Descendants("PublishProfile").Single().Attribute("ManagementCertificate").Value;

        var managementCert = new X509Certificate2(
            Convert.FromBase64String(managementCertbase64string));

        // If you have more than one subscription, you'll need to change this
        string subscriptionId = xdoc.Descendants("Subscription").First().Attribute("Id").Value;
        string desiredStorageService = "yourStorageServiceName";

        var req = (HttpWebRequest)WebRequest.Create(
            string.Format("https://management.core.windows.net/{0}/services/storageservices/{1}/keys",
                                            subscriptionId,
                                            desiredStorageService));
        req.Headers["x-ms-version"] = "2012-08-01";
        req.ClientCertificates.Add(managementCert);

        XNamespace xmlns = "http://schemas.microsoft.com/windowsazure";

        XDocument response = XDocument.Load(req.GetResponse().GetResponseStream());

        Console.WriteLine("Primary key: " + response.Descendants(xmlns + "Primary").First().Value);
        Console.WriteLine("Secondary key: " + response.Descendants(xmlns + "Secondary").First().Value);

        Console.Read(); 
```

# visual-studio-2010 - 在 Visual C++ 中找不到 CUDA 5.0 的构建自定义

> ID：15481314
> 
> 赞同：5
> 
> 时间：2013-03-18T16:01:21.790
> 
> 标签：visual-studio-2010, cuda

我第一次尝试 CUDA gpu 编程，在设置构建自定义时遇到了问题。我不确定我是否只是做错了什么。基本上，当我将项目构建自定义设置为 CUDA 5.0 时，它不起作用。我尝试制作一个 .cu（甚至是 .cpp）文件，但我收到一条错误消息：

> 未找到导入的项目“C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\BuildCustomization\CUDA 5.0.props”。确认声明中的路径正确，并且该文件存在于磁盘上。c:\Users\"用户名"\documents\visual studio 2010\Projects\"项目名称"\"项目名称".vcxproj

之后项目属性页面变为空，只有一个框架和参考页面是空的。关闭 CUDA 声明什么也不做。

我曾尝试卸载 CUDA 工具包并重新安装它，但无济于事。

我对此很陌生，但任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T09:40:56.113

为了使用 CUDA 构建自定义，应将一些文件复制到 Visual Studio 文件夹，在您的情况下 CUDA 5.0.props 缺少

`C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\BuildCustomization\`

为了解决这个问题，请`CUDA 5.0.props`在您的`C:`驱动器中搜索并将其复制到上述路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-23T19:09:06.423

这发生在我身上，我所做的解决方案是重新运行 CUDA 安装程序并确保选择 Visual Studio 集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-19T09:09:24.663

如果您没有在机器上安装 CUDA，也会发生这种情况。这可能很常见，例如您可能正在使用笔记本电脑开发项目并且它没有 CUDA 卡。无论如何要解决这个问题，您需要编辑 Visual Studio 项目文件 .vcxproj（来自 NVIDIA 的任何人在听吗？）

改变

```
<Import Project="$(VCTargetsPath)\BuildCustomizations\CUDA 8.0.props" />** 
```

至

```
<Import Project="$(VCTargetsPath)\BuildCustomizations\CUDA 8.0.props" Condition="exists('$(VCTargetsPath)\BuildCustomizations\CUDA 8.0.props')" /> 
```

接着

```
<Import Project="$(VCTargetsPath)\BuildCustomizations\CUDA 8.0.targets" /> 
```

至

```
<Import Project="$(VCTargetsPath)\BuildCustomizations\CUDA 8.0.targets" Condition="exists('$(VCTargetsPath)\BuildCustomizations\CUDA 8.0.targets')" /> 
```

然后右键单击 Visual Studio 中的项目图标并选择重新加载选项，即使您没有在该特定机器上安装 CUDA，项目也应该重新加载。

您可能需要做一些进一步的步骤，例如。使用 #ifdef 排除这些包含文件和其他 cuda 代码部分。

# selenium - Selenium 服务器 - 500 MB 内存使用是否正常？

> ID：15481316
> 
> 赞同：1
> 
> 时间：2013-03-18T16:01:24.663
> 
> 标签：selenium, selenium-webdriver

我正在使用 HTMLUnit 驱动程序运行 Selenium webdriver。我启动驱动程序：

```
java -jar selenium-server-standalone-2.31.0.jar 
```

然后我启动 Python 并加载一个网页。我正在使用 HtmlUnit。

```
from selenium import webdriver
driver = webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.HTMLUNITWITHJS)
driver.get('http://www.google.com') 
```

服务器的最终内存使用量为 550 MB。这是我分配的内存使用量的两倍，一切都崩溃了。

这是正常的内存使用还是我使用不正确？如果这是正常使用，那么我可能无法使用 Selenium:( 内存是我为托管它的地方支付的费用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:16:17.450

我不运行独立的 selenium 服务器，但如果您正在寻找增加可用内存的方法，请将您的 java 命令更新为以下内容：

```
java -Xms1024m -Xmx1024m -jar selenium-server-standalone-2.31.0.jar 
```

有关更多详细信息，请参见[-X 命令行选项](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html)。（该链接实际上指向非标准 JVM 版本，但 java 命令行的文档应该适用。）

# javascript - 是否可以通过 ExternalInterface 调用允许 FileReference.save() ？

> ID：15481318
> 
> 赞同：1
> 
> 时间：2013-03-18T16:01:27.313
> 
> 标签：javascript, flash, security

在 JavaScript 的侦听器中，我通过尝试显示文件保存对话框`onClick`调用 Flash 方法。`ExternalInterface`然而：

```
Error: Error #2176: Certain actions, such as those that display a pop-up window, may only be invoked upon user interaction, for example by a mouse click or button press.
    at flash.net::FileReference/_save()
    at flash.net::FileReference/save()
    at <my code>
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at flash.external::ExternalInterface$/_callIn()
    at Function/<anonymous>() 
```

有什么办法可以让它工作吗？也许我可以设置一个安全策略，或者让用户批准？我不想在 Flash 中实现整个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:47:43.883

不幸的是，即使响应浏览器中的某些用户交互，也无法调用`FileReference.save()`或`FileReference.browse()`通过。`ExternalInterface`这些函数仅在响应 Flash Player 本身中的直接用户交互事件时才允许使用。[这些安全限制是在 Flash Player 10 中添加的。您可以在此处](http://www.leebrimelow.com/flash-player-10-filereference-changes/)阅读有关它们的更多信息。

因此，您不得不直接在 Flash 影片中使用按钮。或者，您可以尝试在 HTML 按钮上放置一个隐藏的 Flash 按钮以捕捉鼠标点击。

# android - Android LVL 开发人员测试不起作用

> ID：15481319
> 
> 赞同：1
> 
> 时间：2013-03-18T16:01:28.417
> 
> 标签：android, testing, android-lvl

我总是从谷歌得到“ERROR_NOT_MARKET_MANAGED”响应......而且我第一次总是得到“RETRY”响应

我已经确定：

*   我正在使用正确的公钥
*   我的测试手机上只有我的谷歌开发者帐户
*   我已在开发者控制台中将许可测试答案设置为许可

据我所知，我不必上传我的应用程序来使用开发者帐户对其进行测试（写在许可证测试答案下拉字段下方）

我还需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:04:55.633

据*我*记得，您*确实*必须上传您的应用程序草稿以使用开发人员帐户进行测试，而不是使用管理员帐户进行测试。但无论如何，上传它，你会没事的。

# java - 使用通过 PUT 方法发送的字符串

> ID：15481324
> 
> 赞同：0
> 
> 时间：2013-03-18T16:01:49.950
> 
> 标签：java, rest, put

我正在使用 Jersey 开发 REST 服务。在 PUT 方法中，我想使用一个字符串，然后在另一个方法中使用它。

类似于：我在“内容”字段（TEST REST WEB SERVICES 页面）中输入一个字符串，然后在**注销**方法中使用该字符串：

```
@PUT
@Path("logout")
@Produces({"application/json", "text/plain"})
@Consumes(**xxxxx**)
public String logout(**xxxxx**) throws Exception
{
     String reponse = null;
     reponse = new UserManager().logout(**xxxxx**);
     return reponse;
} 
```

所以，我想知道在 ** xxxxx ** 字段中放什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:05:43.617

只需使用字符串参数。JAX-RS 运行时会将请求正文编组到其中。

```
@PUT
@Path("logout")
@Produces({"application/json", "text/plain"})
public String logout(String data) throws Exception {
     String response = null;
     reponse = new UserManager().logout(data);
     return response;
} 
```

您应该将其定义`@Consumes`为您希望允许客户端能够发送的任何内容类型，或者完全忽略它以接受任何内容类型。

# jquery - 初始化后如何设置jqueryui datepicker minDate？

> ID：15481326
> 
> 赞同：8
> 
> 时间：2013-03-18T16:01:50.970
> 
> 标签：jquery, jquery-ui

我有两个日期选择器（jqueryui），我想将第二个输入（minDate 属性）限制为第一个选择的值。我该怎么做？我写了以下代码，但没有成功：

```
 $("#picker1").button().click(function() {
        var minDate = $( "#picker1" ).datepicker( "getDate" );
        $( "#picker2" ).datepicker( "option", "minDate", minDate );  
        $( "#picker2" ).datepicker( "refresh");  
        }); 
```

你能帮我解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T16:09:19.757

尝试

```
$('#p1, #p2').datepicker();

$('#p1').change(function(){
    $('#p2').datepicker('option', 'minDate', $('#p1').datepicker('getDate'))
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/9j5BV/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:15:09.073

我怀疑`getDate`返回字符串。你可以这样尝试。

```
$("#picker1").button().click(function() {
        var minDate = $( "#picker1" ).datepicker( "getDate" );      
        $( "#picker2" ).datepicker( "option", "minDate",  new Date(minDate));  
        $( "#picker2" ).datepicker( "refresh");  
        }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T20:41:08.753

几天后，对我来说工作的是：

```
$("#picker1").datepicker({
    onClose: function(selectedDate){
     $("#picker2").datepicker("option", "minDate",selectedDate);
    }
}); 
```

检索自：[jQueryUi](http://jqueryui.com/datepicker/#date-range "jQueryUI")

在此日期之前的答案没有奏效。@Arun P Johny 的回答在 Fiddle 中运行良好，但在我的系统中却不行（我不知道为什么）。

# php - 何时在 php 函数中将变量作为地址传递

> ID：15481329
> 
> 赞同：2
> 
> 时间：2013-03-18T16:02:06.947
> 
> 标签：php

我知道＆符号在函数中的含义，这意味着您必须通过地址传递变量。但是我还没有遇到需要将一些变量作为地址传递的情况。你们能帮我澄清一下吗？例如

```
function dollarx($x) {
    echo $x[1];
}

function dollar(&$x) {
    echo $x[1];
}

$x[0] = 1;
$x[1] = 2; 
```

两个函数显示相同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:05:05.530

当您希望函数能够更新变量的值时，您可以“通过引用”传递。

例如：

```
function dollar(&$x){
    $x[1] = 12;
}

$x = array(1, 2);
dollar($x);

var_dump($x); // array(1, 12); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:05:58.487

您可以使用它为您设置一个函数集变量。例如，您可以让函数返回带有结果的数组，或者您可以通过引用使用变量。

```
function GetUsernameAndEmailAddress(&$user, &$email) {
  //get values from database or session or whatever.

  $user = 'username';
  $email = 'email@example.com';
}

$username = '';
$email = '';
GetUsernameAndEmailAddress($username, $email);

echo 'Hello '. $username. '. I have sent an e-mail to '.$email; 
```

# ruby-on-rails - Omniauth-google-oauth2 未正确传递 oauth 的“范围”

> ID：15481334
> 
> 赞同：0
> 
> 时间：2013-03-18T16:02:23.417
> 
> 标签：ruby-on-rails, oauth-2.0, omniauth, google-oauth

首先，背景：我正在编写一个小网络应用程序来为我做一些自定义的谷歌分析报告。

在我的 Gemfile 中：

```
gem 'omniauth'
gem 'omniauth-google-oauth2' 
```

在我的`config/initializers/omniauth.rb`：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, ENV["GOOGLE_KEY"], ENV["GOOGLE_SECRET"]
    {
      :scope => "userinfo.email,userinfo.profile,analytics.readonly",
      :approval_prompt => "auto"
    }
end 
```

当我进入 google 上的身份验证屏幕时，它只要求我提供权限，而`userinfo.email`没有.`userinfo.profile``analytics.readonly`

在我进行身份验证时查看 URL，我可以看到它只请求前两个权限。如果我手动添加分析权限，它会授予正确的权限。所以，我把问题缩小到

1.  我如何将范围传递给`omniauth-google-oauth2`策略，或者
2.  该策略如何处理/忽略范围哈希。

此外，我已在 Google API 控制台中仔细检查了我的 OAuth 密钥的 Analytics API 是否已打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:38:15.843

格式错误的代码，我在`ENV["GOOGLE_SECRET"]`. 下面是固定代码。

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, ENV["GOOGLE_KEY"], ENV["GOOGLE_SECRET"],
    {
      :scope => "userinfo.email,userinfo.profile,analytics.readonly",
      :approval_prompt => "auto"
    }
end 
```

# c - 为什么 write() 不能正常工作？

> ID：15481336
> 
> 赞同：0
> 
> 时间：2013-03-18T16:02:36.147
> 
> 标签：c

```
int main() {
    int in = STDIN_FILENO;
    int out = STDOUT_FILENO;
    char word[100];
    int count;

    while ((count = read(in, word, 100)) != 0) {
        write(out, word, strlen(word));
        memset(word, 0, 255);
        count = read(in, word, 5);
    }
} 
```

在我得到的控制台中

```
hello world
hello world
hello stackoverflow
 stackoverflow
abcd
efgh
efgh 
```

为什么这个程序没有完全按照它写的那样回显？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:04:20.737

`memset(word, 0, 255);`导致未定义的行为。您正在访问超出范围的 word 索引。另请注意，当您`strlen`在 word 上使用时，您应该始终零终止，因为 read 不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:07:16.873

你在循环`count = read(in, word, 5);`结束时调用了。`while`那 5 个字节被丢弃。这就是`"hello"`in`"hello stackoverflow"`和`"abcd\n"`in`"abcd\nefgh"`被删除的原因。

# matlab - 如何在 MATLAB 中为 ax+by-c 绘制一条线？

> ID：15481337
> 
> 赞同：2
> 
> 时间：2013-03-18T16:02:39.290
> 
> 标签：matlab, graph, plot, linear-programming

标题基本上说明了一切。我正在做一项作业，需要包括我的散点图和由`linprog()`.

我跑了`linprog()`，得到了值：

```
1.0000
1.0000
16.5000
12.5000 
```

, `a`, `b`,`c`和`f`, 分别。我的线的方程式是：

```
ax + by - c = 0 
```

我知道这是一个简单的问题，但我整晚都在寻找答案，但什么都没有出现。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:14:31.953

设置`x`您感兴趣的范围，求解`y`并插入`x`。

```
x = 0:0.01:10;
y = (-a*x + c)/b;
plot(x,y) 
```

# jquery - set Nivo Slider path to absolute

> ID：15481346
> 
> 赞同：0
> 
> 时间：2013-03-18T16:02:58.543
> 
> 标签：jquery, wordpress, absolute-path, nivo-slider

I am using the jQuery Nivo Slider plugin in Wordpress (but not the Wordpress Plugin of the same name) with custom posts, it works perfectly and is simple as pie, EXCEPT it is adding the site root to the image path. I am pulling in an absolute path for my image

```
http://www.site.com/images/image.jpg 
```

but Nivo is prepending the site root to the path, which generates:

```
www.site.com/http://www.site.com/images/image.jpg 
```

I can't find an option in Nivo's documentation to set it to take an absolute path... any ideas??

Here is my template code:

```
 <?php global $post;
                 $myposts = get_posts('post_type=homepageslider&numberposts=4&order=asc');
                 foreach($myposts as $post) :
                 setup_postdata($post);?>

                <a href="<?php the_field('link'); ?>"><img src="<?php the_field('image'); ?>" data-thumb="<?php the_field('image'); ?>" /></a>

            <?php endforeach; ?> 
```

a few comments:

*   print_r shows 'image' is echoing this exact path: [http://www.mysite.com/wp-content/uploads/product1.jpg](http://www.mysite.com/wp-content/uploads/product1.jpg) (which is correct)
*   when pulled out of the slide code, that loop generates the 4 images perfectly fine with no broken image icon.
*   I tried using a Nivo Slider WP plugin and it worked fine but gave the same issue: broken path, broken link icon (even though the image was loading).

Below is the rendered HTML from the browser. As you can see, the "current slide" path is fine. The problem is with the content in the nivo-slice divs: it's adding an extra root to them. This is the SAME issue I had when using the plugin without any of my custom posts or fields.

```
<a class="nivo-imageLink" href="http://www.mysite.com/products/product1/" style="display: none;">
<a class="nivo-imageLink" href="http://www.mysite.com/products/product2/" style="display: none;">
<a class="nivo-imageLink" href="http://www.mysite.com/products/product3/" style="display: none;">
<a class="nivo-imageLink" href="http://www.mysite.com/products/product4/" style="display: block;">
<img class="nivo-main-image" src="http://www.mysite.com/wp-content/uploads/product1.jpg" style="display: inline; height: 377px;">

<div class="nivo-caption"></div>

<div class="nivo-slice" name="0" style="left: 0px; width: 971px; height: 377px; opacity: 1; overflow: hidden;">
    <img style="position:absolute; width:971px; height:auto; display:block !important; top:0; left:-0px;" src="www.mysite.com/http://www.mysite.com/wp-content/uploads/product1.jpg">
</div> 
```

(and the div nivo-slice is repeated [name from 0 - 14] with the different slides)

Here is the error being generated in the console (Repeating every time the slider rotates)

```
GET http://www.mysite.com/http:/www.mysite.com/wp-content/uploads/product1.jpg 404 (Not Found) /http:/www.mysite.com/wp-content/uploads/product1.jpg:1
GET http://www.mysite.com/http:/www.mysite.com/wp-content/uploads/product.jpg 404 (Not Found) 
```

*Another Update:* I took the wordpress loop out completely and put in 4 static image links. The rotator works fine, shows the images fine, but is having the same issue, broken image icon and prepending the site url to the existing path.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:56:46.063

在插件中，您可以指定绝对路径。Wordpress 已经使用以下代码内置了它：

```
$wpDir = ABSPATH;
print_r($wpDir) // path to wp install 
```

您可以查看显示的内容，然后相应地调整图像路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:01:18.853

线索在您收到的 404 错误消息中。

```
http:/www.mysite.com/wp-content/uploads/product1.jpg 
```

该 URL 格式错误，因为该方案缺少一个额外的正斜杠，我想这会被解释为一个相对 URL。

# android - Android: VideoView within Fragment only playing audio, not displaying video

> ID：15481352
> 
> 赞同：4
> 
> 时间：2013-03-18T16:03:10.593
> 
> 标签：android, android-videoview

I have a fragment that allows users to select from a mixed list of video and image content. When selecting a multimedia item, display is toggled between an `ImageView` and `VideoView` depending on the media type. The problem is, when the user selects a video, only the audio is played, and the `VideoView` remains black.

This is the code for displaying video: (Most of the code at the bottom is trial-and-error to see if something is missing to fix this issue)

```
mainVideo.setVisibility(View.VISIBLE);
mainImage.setVisibility(View.INVISIBLE);
getActivity().getWindow().setFormat(PixelFormat.TRANSLUCENT);
parent.showLoader(R.string.buffering);

mainVideo.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        parent.hideLoader();
        mainVideo.requestFocus();
        mainVideo.start();
    }
});
mainVideo.setOnErrorListener(new MediaPlayer.OnErrorListener() {
    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) {
        showErrorMessage(R.string.multimedia_load_failed, R.string.please_try_again_later);
        parent.hideLoader();
        return true;
    }
});
Uri video = Uri.parse(mm.url);
mainVideo.setMediaController(new MediaController(parent));
mainVideo.setKeepScreenOn(true);
mainVideo.bringToFront();
mainVideo.setDrawingCacheEnabled(true);
mainVideo.setActivated(true);
mainVideo.setEnabled(true);
mainVideo.setVideoURI(video);

Log.i(TAG, "Loading video: " + video.toString()); 
```

(`parent` is a reference to the activity that has some convenience functions like `showLoader` and whatnot.)

Here is my layout:

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:orientation="vertical">

        <FrameLayout 
            android:layout_width="275dp"
            android:layout_height="275dp"
            android:layout_gravity="center_horizontal"
            android:padding="1dp"
            android:background="@color/light_grey">
            <ImageView
                android:id="@+id/mm_main_image"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:background="@color/black"
                android:scaleType="fitXY"/>
            <RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">
                <VideoView 
                    android:id="@+id/mm_main_video"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_alignParentTop="true"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentRight="true">
                </VideoView>
            </RelativeLayout>
        </FrameLayout>

        <TextView
            android:id="@+id/mm_index_count"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:textAppearance="?android:attr/textAppearanceSmall" 
            android:layout_margin="@dimen/large_padding"
            android:layout_gravity="center_horizontal"
            android:textColor="@color/white"/>

        <HorizontalScrollView 
            android:id="@+id/mm_horizontal_scroll"
            android:layout_height="110dp"
            android:layout_width="wrap_content">
            <LinearLayout 
                android:id="@+id/mm_media_list"
                android:layout_height="match_parent"
                android:layout_width="wrap_content">
                <!-- Content filled dynamically -->
            </LinearLayout>
        </HorizontalScrollView>
    </LinearLayout>
</ScrollView> 
```

I have looked all over StackOverflow and around the web for the last two days, but cannot find a solution to this problem anywhere. Any help is appreciated.

All of the videos (and images for that matter) are remote, they are not on the Android device.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-05T09:06:32.810

尝试删除 xml 中定义的任何背景颜色。它可能会覆盖视频视图。

# json - JSON accepted format according to Newtonsoft Json

> ID：15481356
> 
> 赞同：1
> 
> 时间：2013-03-18T16:03:25.497
> 
> 标签：json, json.net

I am trying to parse some JSON objects which is made just of (string,string) pairs, in order to emulate Resjson behaviour. The file I am parsing contains this.

```
{
   "greeting":"Hello world",
   "_greeting.comment":"Hello comment.",
   "_greeting.source":"Original Hello",
} 
```

Please note the last comma is incorrect, and I also used [http://jsonlint.com/](http://jsonlint.com/) to test JSON syntax. It tells me it is incorrect, as I expected. My - slightly modified - code is :

```
string path = @"d:\resjson\example.resjson";
string jsonText = File.ReadAllText(path);

IDictionary<string, string> dict;
try
{
    dict = JsonConvert.DeserializeObject<IDictionary<string, string>>(jsonText);
}
catch(Exception ex)
{
    // code never reaches here
} 
```

My above code returns the IDictionary with the 3 keys as if the formatting was correct. If I serialize back, the string obtained is without the last comma.

My questions are :

*   Is Newtonsoft.Json so permissive that it allows users slight errors ?
*   If so, can I set the permissiveness so that it is more strict ?
*   Is there a way to check if a string is valid JSON format, using Newtonsoft.Json with and/or without the permissiveness?

# php - 从 PHP while 循环中保留变量

> ID：15481359
> 
> 赞同：1
> 
> 时间：2013-03-18T16:03:36.013
> 
> 标签：php, javascript

我一直在寻找一种方法来做到这一点。

我使用 PHP while 循环从数据库中获取一些变量：

```
<?php while ($row = mysql_fetch_array($query)) {
$id = $row["ID"];
?>

<script type="text/javascript">
<!--
function go_there()
{
var id= "<?php echo $id ?>"
var where_to= confirm("Are you sure you want to delete?");
 if (where_to== true)
 {
   window.location="index.php?p=delete&id=" + id;
 }
 else
 {

  }
}
//-->
</SCRIPT>
<td><form><INPUT TYPE="button" value="Go!" onClick="go_there()"></form></td></tr>
<? } //end while
?> 
```

有时我得到 10 个结果，然后我做 10 个 Go！底部。但是当我来到删除页面时，$is 变量关闭，原因与上一个结果相同，无论我按什么底部。

关于如何解决这个问题的任何想法，所以我得到确认框，并且仍然保留要删除的正确 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:15:06.387

您正在为每个条目创建一个名为“go_there”的全局函数，因此只保留最后一个。取而代之的是，只创建**一个**函数，并从按钮上的属性中获取“id”值。

```
function go_there(button)
{
  var id= button.getAttribute("data-id");
  var where_to= confirm("Are you sure you want to delete?");
  if (where_to== true)
  {
    window.location="index.php?p=delete&id=" + id;
  }
} 
```

然后：

```
<INPUT TYPE="button" value="Go!" onClick="go_there(this)" data-id="<?php echo $id ?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:15:21.090

在我看来，您似乎也在循环中创建您的 javascript 函数，因此它只会触发其中一个（您正在创建多个具有相同名称的函数。它应该如何知道使用哪一个）。您应该创建 1 个 javascript 函数并将 id 作为 aa 参数传递给它

```
<script type="text/javascript">

function go_there(id)
{

 var where_to= confirm("Are you sure you want to delete?");
 if (where_to== true)
 {
   window.location="index.php?p=delete&id=" + id;
 }
 else
 {

  }
 }

 </SCRIPT>
 <?php while ($row = mysql_fetch_array($query)) {
$id = $row["ID"];

 echo '<td><form><INPUT TYPE="button" value="Go!" onClick="go_there(<?php echo $id; ?>)"></form></td></tr>'
 } //end while
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:17:54.110

总的来说，这是一种糟糕的方法。您应该避免将处理程序内联写入，除非您有特定的情况，这是唯一的方法。如果您将处理程序附加到有问题的元素上会更好（[工作小提琴](http://jsfiddle.net/QVAjC/)-无论如何对于firefox......）：

```
<!-- output our inputs with the id value in an attribute data-id-value -->
<?php while ($row = mysql_fetch_array($query)): $id = $row["ID"]; ?>
   <td><form><INPUT class="go-button" TYPE="button" value="Go!" data-id-value="<?php echo $id ?>"></form></td></tr>
<?php endwhile; ?>

<script type="text/javascript">
   var goButtons = document.querySelectorAll('input.go-button'), // select all out buttons
       // define our handler function
       goThere = function (event) {

            // get the id the we encoded from php from our data attr
            var id = event.target.getAttribute('data-id-value');

            if(confirm('Are you sure you want to delete?')) {

                // if confirm is true then redirect to the delete url
                window.location = "index.php?p=delete&id=" + id;
            }
       };

   // loop over the buttons and attach the handler
   for (var i = 0; i < goButtons.length; i++) {
       goButtons[i].addEventListener('click', goThere);
   }
</script> 
```

这里的问题是这不一定是跨浏览器。这通常是人们使用 jQuery 或类似库之类的库的原因之一，这样他们就不必规范 dom 查询和侦听器附件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-18T16:09:26.397

这是一个更正的脚本。

```
<?php while ($row = mysql_fetch_array($query)) {
$id = $row["ID"];
?>      
<SCRIPT language="JavaScript">
<!--
function go_there()
{
var id= "<?php echo $id ?>"
var where_to= confirm("Are you sure you want to delete?");
 if (where_to == true)
 {
   window.location="index.php?p=delete&id=" + id;
 }
 else
 {

  }
}
-->
</SCRIPT>
  <td><form><INPUT TYPE="button" value="Go!" onClick="go_there()"></form></td></tr> 
```

您的按钮将不起作用，因为您已添加注释标记`<!--`和`-->`功能。如果您需要帮助，请发表评论。

另外，你能在评论中澄清你的问题吗？那时我们可以更好地帮助您。

# android - 将应用程序置于后台，然后置于前台

> ID：15481364
> 
> 赞同：4
> 
> 时间：2013-03-18T16:03:47.717
> 
> 标签：android, android-activity, activity-lifecycle

我应该使用什么方法将我的应用程序移至后台，然后再次将其移至前台？我尝试使用 moveTaskToBack(true) 并将活动成功移至后台，但随后我无法将其移至前台。我尝试使用 startActivity() 再次启动活动，但没有成功，似乎没有方法 moveTaskToFront() 或类似的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T16:22:24.967

用于`moveTaskToBack()`将您的应用移至后台。

要将其移至前台，请使用以下代码：

```
Intent intent = getPackageManager().getLaunchIntentForPackage(getPackageName());
startActivity(intent); 
```

如果您尝试从`Service`or执行此操作，`BroadcastReceiver`则需要在调用之前执行此操作`startActivity()`：

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T03:40:24.910

谢谢它通过添加以下意图对我有用

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

# ios - uicollectionview 加载奇怪

> ID：15481365
> 
> 赞同：2
> 
> 时间：2013-03-18T16:03:50.003
> 
> 标签：ios, ipad, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我使用自定义集合 cell.set 创建了一个集合视图，其中 flowlayout 为

```
UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
[flowLayout setItemSize:CGSizeMake(250, 480)];
[flowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
[self.templateCollectionView setCollectionViewLayout:flowLayout]; 
```

我将它设置为水平但仍然有一个单元格在图中`att mmp`放错了位置，如果我们滚动并加载它，它将回到正确的位置。谁能建议这有什么问题？

![收藏](../Images/5f9e6654a0f94fb4fc867b335fb739d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:51:45.070

[这个答案](https://stackoverflow.com/questions/12927027/uicollectionview-flowlayout-not-wrapping-cells-correctly-ios/13389461#13389461)有一个对我有用的解决方法。以下是我为水平滚动编辑的修复程序。基本上只是过滤掉下面提供坏帧的属性项。

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
     NSArray *attributes = [super layoutAttributesForElementsInRect:rect];
     NSMutableArray *newAttributes = [NSMutableArray arrayWithCapacity:attributes.count];
     for (UICollectionViewLayoutAttributes *attribute in attributes) {
          if (attribute.frame.origin.y + attribute.frame.size.height <=    self.collectionViewContentSize.height) {
               [newAttributes addObject:attribute];
          }
     }
     return newAttributes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:37:00.903

当我们没有给出适当的单元格间距时，通常会发生这种情况。确保在填充 uicollectionview 的单元格时，应给出单元格间距。还要通过[UICollectionView flowLayout 不正确地包装单元格（iOS）](https://stackoverflow.com/questions/12927027/uicollectionview-flowlayout-not-wrapping-cells-correctly-ios?lq=1)它可以帮助你。

# c++ - 模板类中使用了错误的构造函数

> ID：15481368
> 
> 赞同：0
> 
> 时间：2013-03-18T16:04:14.123
> 
> 标签：c++, templates

我需要在我的模板类中使用 a`boost::interprocess::mutex` 在我的函数中，我以下面的方式声明了我的变量

```
 named_mutex mutex(open_only, m_name.c_str() 
  ,permissions(0666)); 
```

我不知道为什么我不能编译，我在下面得到一个错误。编译器怎么可能不使用正确的构造函数（它试图匹配具有 const 引用的构造函数）以及如何强制使用正确的构造函数？

```
 error: no matching function for call to   
    boost::interprocess::named_mutex::named_mutex(const 
    boost::interprocess::open_only_t&,   const char*, boost::interprocess::permissions)’
    /usr/local/include/boost/interprocess/sync/named_mutex.hpp:140: note: 
    candidates are: 
    boost::interprocess::named_mutex::named_mutex(boost::interprocess::open_only_t, const char*) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:14:23.773

接受 an 的构造函数`open_only_t`不接受权限参数。真的没有意义 - 你试图打开一个现有的互斥锁，而不是创建一个。

删除权限，它应该找到适当的重载。

# java - 试图在我的 ActionListener 中放置一个播放音频方法

> ID：15481372
> 
> 赞同：0
> 
> 时间：2013-03-18T16:04:27.093
> 
> 标签：java, class, user-interface, audio, actionlistener

我正在尝试将 play 方法放在我的`Audioapp`班级中`ActionListener`，我尝试将其放入但出现错误。

我已阅读 javadoc`ActionListener`但找不到

这是我的音频：

```
public class Audioapp extends JApplet // find out how to implement play method into action listener?
{
    public class Sound // Holds one audio file
    {
        private AudioClip song; // Sound player
        private URL songPath; // Sound path
        Sound(String filename)
        {
            try
            {
                songPath = new URL(getCodeBase(),"G:\\Uni\\Programming\\Rolling assignements\\Week0\\Programming week21");  // This is the place were im getting error
                song = Applet.newAudioClip(songPath); // Load the Sound
            }
            catch(Exception e){e.printStackTrace();} 
        }
        public void playSound()
        {
            song.play(); // Play
        }
    }
} 
```

这是我的`actionListener`：

```
class PlayStoHandler implements ActionListener {
    public void actionPerformed(ActionEvent event) {
        String computerRand = sps.computerChoice();
        txtComputerRand.setText(computerRand);
        String result = sps.play(Sps.ROCK);
        txtResult.setText(result);

        scis.setVisible(false);
        open.setVisible(false);
        stone.setVisible(true);
        pap.setVisible(false);
        win.setVisible(false);
        none.setVisible(false);
        lose.setVisible(false);

        if (result == "User Wins"){
            win.setVisible(true);

                              song.play(); // here i tried putting the song.play in this if section, the error I got was "song cannot be resolved"
        }

        else if (result == "Draw"){
            none.setVisible(true);
        }
        else {
            lose.setVisible(true);
        }
    } 
```

我是初学者，所以这很可能是一个非常愚蠢的基本错误

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:16:29.690

```
songPath = new URL(getCodeBase(),"G:\\Uni\\Programming\\Rolling assignements\\Week0\\Programming week21"); 
```

URL 构造函数期望第二个字符串代表一个相对 URL，而您已经放置了一个文件路径。URL 总是有正斜杠，并且`file:`基于 URL 没有什么意义（WAV 托管在您的站点上，而不是最终用户的 HD）。

如果小程序正在由站点根目录的 HTML 加载，而没有`codebase`在 HTML 中声明，则调用 wav `moo.wav`并位于名为`Week0/Programming week21`正确路径的子目录中：

```
songPath = new URL(getCodeBase(),"Week0/Programming week21/moo.wav"); 
```

但是为了让事情变得更简单，至少目前，将 HTML、applet*和*剪辑放在***同一个目录***中并使用：

```
songPath = new URL(getCodeBase(),"moo.wav"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:07:36.587

`song`是私人的。您创建了一种播放声音的方法，因此请使用它。

获取您的实例`Audioapp`并运行该`playSound()`方法。

# android - setonclicklistner 动态生成文本视图数组

> ID：15481373
> 
> 赞同：-4
> 
> 时间：2013-03-18T16:04:30.173
> 
> 标签：android, android-widget, textview

我有一个动态生成的文本视图数组

```
for(int i = 0; i < blog_link_counter; i++) {
textViewArray[i] = new TextView(this);
textViewArray[i].setText(Html.fromHtml(array_blog_text[i]+"<br>"));
textViewArray[i].setId(i);
textViewArray[i].setOnClickListener(this);
((LinearLayout) linearLayout).addView(textViewArray[i]);
} 
```

现在我有一个活动，其中有许多文本视图。我需要将 onclick 侦听器功能添加到所有文本视图。

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:id="@+id/info"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="#FFFFFF" /> 
```

我在java文件中添加了onclicklistner。之后我实现了onclicklistner接口

```
public void onClick(View v) {
    // TODO Auto-generated method stub

switch(v.getId())
{
case R.id.    <--  ?
}

}} 
```

我如何匹配它所指的 Textview id？我的意思是如果 id 是静态的，我可以像 R.id.idfromxmlfile 那样做，但在这种情况下我应该怎么做？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:07:00.167

您不必*使用*`R.id.xxx`，只需使用您在循环中使用的相同数字即可：

```
switch(v.getId())
{
case 0:
case 1:
//etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:08:34.573

View.setTag() 函数更适合于此。设置标签而不是设置id

```
// Use .setTag
textViewArray[i].setTag(new Integer(i)); 
```

然后，您可以通过调用 .getTag() 来检索视图

```
Integer tag = (Integer) v.getTag();
switch(tag)
{
case 0:
case ...:
case blog_link_counter - 1:
} 
```

# python - 如何从公式中近似值

> ID：15481374
> 
> 赞同：3
> 
> 时间：2013-03-18T14:00:38.477
> 
> 标签：python, math

`1 to N`所以我有一个 alpha 向量，一个 beta 向量，当所有估计值（对于 alpha's和 beta's `1 to N`）的总和等于 60时，我试图找到一个 theta ：

![\sum_{i=1}^N \frac{e^{\alpha_i(\theta-\beta_i)}}{1 + e^{\alpha_i(\theta-\beta_i)}} = 60](../Images/847cdd54eb21e91ef042215a29eca4e0.png)

```
def CalcTheta(grensscore, alpha, beta):
    theta = 0.0001
    estimate = [grensscore-1]
    while(sum(estimate) < grensscore):
        theta += 0.00001
        for x in range(len(beta)):
            if x == 0:
                estimate = []
            estimate.append(math.exp(alpha[x] * (theta - beta[x])) /
                            (1 + math.exp(alpha[x] * (theta - beta[x]))))
    return(theta) 
```

基本上我所做的是从 开始`theta = 0.0001`，遍历，计算所有这些总和，当它低于 60 时，继续每次添加 0.0001，而高于 60 意味着我们找到了 theta。

我通过`theta`这种方式找到了价值。问题是，我使用 Python 花了大约 60 秒，才找到 0.456 的 theta。

找到这个 theta 的更快方法是什么（因为我想将它应用于其他数据）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:38:29.673

*如果您知道θ*的下限和上限，并且函数在这两者之间的范围内是单调的，那么您可以使用[二分算法](http://en.wikipedia.org/wiki/Bisection_algorithm)轻松快速地找到所需值。

# javascript - knockout.js - 设置一个空的选择

> ID：15481380
> 
> 赞同：19
> 
> 时间：2013-03-18T16:05:04.970
> 
> 标签：javascript, knockout.js

我正在尝试使用 knockout.js 来填充和管理一个`<select/>`框。我希望初始值为空。

但是，我在任何时候都无法强制托管值为空，更不用说一开始了。

例如，考虑[这个小提琴](http://jsfiddle.net/XjVBN/1/)：

HTML：

```
<select data-bind="options: myOptions, value: myValue"></select> aka
<span data-bind="text: myValue"></span>

<div>
    <button data-bind="click: setMyValue(null)">clear the selection</button>
    <button data-bind="click: setMyValue('one')">select "one"</button>
    <button data-bind="click: setMyValue('four')">select "four"</button>
</div>
<ul data-bind="foreach: log">
    <li>message: <span data-bind="text: message"></span></li>
</ul> 
```

JS：

```
function Model() {
    var self = this;
    self.myOptions = ['one', 'two', 'three', 'four'];
    self.myValue = ko.observable();
    self.setMyValue = function (val) {
        return function(){
            this.log.push({
                message: "ok, trying to set value as " + val
            });
            self.myValue(val);
        };
    };
    self.log = ko.observableArray([]);
}
var model = new Model();
ko.applyBindings(model); 
```

和按钮通过强制更新 来更改`select "one"`选择。但是，清除选择按钮不起作用。选择没有被清除，[这是我认为的正确方法](https://stackoverflow.com/questions/8137222/knockoutjs-clear-selected-value-in-combobox)。`select "four"``myValue()``myValue(null)`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-18T16:08:15.763

您需要[optionsCaption](http://knockoutjs.com/documentation/options-binding.html#parameters)绑定集。

```
<select data-bind="options: myOptions, value: myValue, optionsCaption: 'select...'"></select> 
```

[更新小提琴](http://jsfiddle.net/XjVBN/2/)

# json - 如何使用 JSON 或 AJAX 将表单字段值发送到 REST 服务

> ID：15481382
> 
> 赞同：0
> 
> 时间：2013-03-18T16:05:07.537
> 
> 标签：json, jquery, jsonp

我在网站上有一个表单字段（电子邮件注册），电子邮件提供商希望我将其提交到他们的 REST Web 服务并获得回复。在如此挣扎之前，我从未使用过 JSON 或 AJAX！

的HTML：

```
<form>
  <input type="hidden" name="gid" value="12345678">
  <input type="hidden" name="user.CustomAttribute.NewsletterPopUp" value="Global">
  <input type="hidden" name="user.CustomAttribute.NewsletterOptIn" value="True">" value="True">
  <input type="text" name="uemail" class="email_input_field" value="please enter your email" size="30" maxlength="64" onFocus="clearText(this)">
  <input type="submit" name="signup" value="signup" class="email_submit_button">
</form> 
```

目前，使用 Javascript 并使用 window.location 访问 URL（创建操作而不是发布操作），他们希望将其转换为带有 XML 响应的表单发布操作。现在会发生什么：

```
$(".email_submit_button").click(function(){
    var uemail = $('.email_input_field').val();
    window.location = "http://example.com/automated/action.jsp?action=register&errorPage=/automated/action.jsp&gid=12345678&uemail="+uemail+"&user.CustomAttribute.NewsletterPopUp=Global&user.CustomAttribute.NewsletterOptIn=True";
    return false;
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:21:20.793

我看到您正在使用 jQuery，因此您可以使用 $.post 像这样发布到服务器：

```
var url = "http://example.com/automated/action.jsp"
var data ={
    "gid": form.gid,
    "action": register,
    "uemail": form.uemail,
    "errorPage": "/automated/action.jsp",
    "user.CustomAttribute.NewsletterOptIn": user.CustomAttribute.NewsletterOptIn,
    "user.CustomAttribute.NewsletterPopUp": user.CustomAttribute.NewsletterPopUp
};
var success_func = function(data){
    //do what you want with the returned data
};
$.post(url, data, success_func); 
```

[$.post 的文档](http://api.jquery.com/jQuery.post/)。
或者您可以使用 $.post 文档中提到的纯较长 Ajax 版本。
**编辑：**
我忘记了您不能对需要使用 JSONP 的其他域执行 xhttpresuext，这是另一个[SO 帖子的链接，详细解释了所有内容](https://stackoverflow.com/questions/5345493/using-put-post-delete-with-jsonp-and-jquery)
希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:28:22.213

```
$(".email_submit_button").submit(function(e) {
                // stop form from submitting
                e.preventDefault();
                // Grab all values 
                var uemail = $('.email_input_field').val();
                // make a POST ajax call 
                $.ajax({
                    type: "POST",
                    url: "YOUR URL", // set your URL here
                    data: { 
                    uemail: uemail // send along this data (can add more data separated by comma)
                },
                beforeSend: function ( xhr ) {
                // maybe tell the user that the request is being processed
                    $("#status").show().html("<img src='images/preloader.gif' width='32' height='32' alt='processing...'>");
                }
                }).done(function( response ) {
                    // do something with the received data/response
                    //$("#status").html(response);
                });
            }); 
```

不确定“.email_submit_button”是否是提交按钮或表单的类..您需要使用表单的id或类而不是提交按钮..希望这会有所帮助

# php - PHP函数阻止网站加载

> ID：15481386
> 
> 赞同：0
> 
> 时间：2013-03-18T16:05:10.453
> 
> 标签：php, sql, function, include, loading

我在这里有点绝望，我不是一个非常有经验的 PHP 开发人员，现在我正在独自工作，遇到一个我无法解决的问题。

我有 30 或 40 个网站，位于 30 或 40 个域（每个国家/地区的网站）

所有网站都使用完全相同的代码，它们完全相同）

然而，我的网站之一没有出现。它只是没有加载没有错误它只是没有加载。我整天都在研究它，我相信这是由于一个功能，但我看不出它有什么问题。

头文件调用配置文件@

```
<? include('config.php'); ?> 
```

配置文件调用函数文件

```
include('functions.php'); 
```

为了弄清楚可能是哪个功能的问题，我从底部开始，每次刷新页面都将它们删除。最终我得到了一个功能，一旦删除，我的页面就会加载，但由于缺少功能，显然还有其他错误。

我认为问题的功能是：

```
function get_contenttitle($SectionID,$languageid){
global $languageid;
global $mysql_connect;
if($languageid==''){$languageid=$_SESSION["SelectLanguage"];}
$query='SELECT * FROM website.content WHERE SortOrder="'.$SectionID.'" AND LanguageID="'.$languageid.'" AND Active=1 AND LanguageID IN (1, 2, 3, 4, 5, 6, 8, 11, 12, 14, 15, 16, 30)';
//$content=dbqueryintoarray($query);
$content=db_query_into_array_enhanced($mysql_connect,$query);
if(count($content)>0){
    $return=$content[0]["ContentTitle"];
    }else{
    if($languageid==''){$languageid=$_SESSION["SelectLanguage"];}
    $query='SELECT * FROM website.content_auto WHERE SortOrder="'.$SectionID.'" AND LanguageID="'.$languageid.'" AND Active=1 AND LanguageID IN (1, 2, 3, 4, 5, 6, 8, 11, 12, 14, 15, 16, 30)';
    //$content=dbqueryintoarray($query);
    $content=db_query_into_array_enhanced($mysql_connect,$query);
    if(count($content)>0){
        $return=$content[0]["ContentTitle"];
        }else{
        $query='SELECT * FROM website.content WHERE SortOrder="'.$SectionID.'" AND LanguageID="1" AND Active=1';
        //$content=dbqueryintoarray($query);
        $content=db_query_into_array_enhanced($mysql_connect,$query);
        if(count($content)>0){
            $return=$content[0]["ContentTitle"];
            }else{
            $return='<b><font color="#FF0000">Warning:</font></b> Content does not exist';          
            }
        }
    }
$return=str_replace(chr(10),'<br>',$return);
return $return;
} 
```

现在这个函数在顶部导航中被调用。如果我删除该功能，页面会加载到调用它的导航，然后显然会停止。一旦我将功能放回页面中，就会完全停止加载。

此函数使用 db_query_into_array_enhanced 函数，如下所示：

```
function db_query_into_array_enhanced($mysql_connect,$query){
global $mysql_debug_comments;
global $total_query_count;
global $total_query_time;
global $total_function_time;
global $log_to_firephp;
global $query_results_to_firephp;
global $output_stats_to_browser;
global $firephp;
global $slow_query_time;
global $query_time;

$bt=debug_backtrace();
$file=$bt[1]["file"];
$pos=strrpos($file,'/');
$calling_script=substr($file,($pos+1));
$calling_line=$bt[1]["line"];

settype($retval,"array");

$query_start=getmicrotime();
$result=mysqli_query($mysql_connect,$query);
$query_end=getmicrotime();
$query_time=($query_end-$query_start);
$total_query_time=$total_query_time+$query_time;
$query_time_ms=round($query_time*1000);

if(!$result){$mysql_debug_comments.="<!-- db_query_into_array_enhanced | Called By: ".$calling_script." | Line: ".$calling_line." | Query FAILED ".$query." -->\n\n";}

if($result){
    $success=true;
    $function_start=getmicrotime();
    $row_count=mysqli_num_rows($result);
    for($x=0;$x<$row_count;$x++){$row=mysqli_fetch_array($result,MYSQLI_ASSOC);array_push($retval,$row);}
    mysqli_free_result($result_set);
    $function_end=getmicrotime();
    $function_time=($function_end-$function_start);
    $total_function_time=$total_function_time+$function_time;
    $mysql_debug_comments.="<!-- Function: db_query_into_array_enhanced | Called By: ".$calling_script." | Line: ".$calling_line." | Status: OK | Results: ".count($retval)." rows | Query Time: ".$query_time_ms."ms | Total Time: ".round($total_query_time*1000)." ms ";
    if($query_time_ms>$slow_query_time){$mysql_debug_comments.=" | Query: ".$query." ";}
    $mysql_debug_comments.="-->\n\n";
    $total_query_count++;
    }

if($log_to_firephp==true){
    $query_time_ms=round($query_time*1000);
    $function_time_ms=round($function_time*1000);
    $total_time=$query_time+$function_time;
    $query_perc=round(($query_time/$total_time)*100,2);
    $function_perc=round(($function_time/$total_time)*100,2);
    $log_type='info';
    if($success==true){
        $message1='db_query_into_array_enhanced | Query: "'.$query.'"';
        $message2='db_query_into_array_enhanced | Rows: '.count($retval).' | MySQL Time: '.$query_time_ms.'ms ('.$query_perc.'%) | Function Time: '.$function_time_ms.'ms ('.$function_perc.'%) | Total Time: '.($query_time_ms+$function_time_ms).'ms';
        if(($query_time>0.5) or ($function_time>0.5) or ($query_time+$function_time>0.5)){$log_type='warn';}
        }else{
        $message1='db_query_into_array_enhanced | Query: "'.$query.'" | QUERY FAILED!';
        $log_type='error';
        }
    if($log_type=='info'){$firephp->info($message1);$firephp->info($message2);}
    if($log_type=='warn'){$firephp->warn($message1);$firephp->warn($message2);}
    if($log_type=='error'){$firephp->error($message1);}
    }

if($query_results_to_firephp==true){        
    $headings=array_keys($retval[0]);
    $table=array();
    $table[]=$headings;
    for($r=0;$r<count($retval);$r++){
        $row=array();
        for($c=0;$c<count($retval[0]);$c++){array_push($row,$retval[$r][$headings[$c]]);}
        $table[]=$row;
        }
    $firephp->table('Results from MySQL Query "'.$query.'" Rows: '.count($retval).' Time: '.($query_end-$query_start).'s', $table);
    }

if($output_stats_to_browser==true){
    echo 'Query: '.$query.'<br>';
    echo 'Query Time: '.$query_time_ms.'ms ('.$query_perc.'%)<br>';
    echo 'Function Time: '.$function_time_ms.'ms ('.$function_perc.'%)<br>';
    echo 'Total Time: '.($query_time_ms+$function_time_ms).'ms<br>';
    echo 'Rows returned: '.count($retval).'<br>';
    }

return $retval;
} 
```

我已经对照其他工作站点检查了每一段代码，一切都是一样的。完全相同的。

我在这里疯了，有人可以请帮帮我吗

非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:15:45.497

我的猜测是函数“get_contenttitle”正在从未连接到的数据库中查找数据。而且我也没有在其他函数“db_query_into_array_enhanced”中看到连接。有连接数据库的功能吗？如果是这样，请检查一下。确保与其中一个工作站点完全相同。

# silverlight - 如何在 Silverlight 中显示数据点标签？

> ID：15481387
> 
> 赞同：0
> 
> 时间：2013-03-18T16:05:11.020
> 
> 标签：silverlight, xaml, charts, label, datapoint

我看不到在 Silverlight 中显示数据点标签的任何属性（应该始终可见），谷歌也没有给我带来任何乐趣......

任何线索如何做到这一点？

这是我的 XAML

```
 <toolkit:Chart Height="400" Width="600" Title="Cumulative Age Dispersions" >

                <toolkit:Chart.Axes>
                    <toolkit:CategoryAxis Title="Content Items"  Orientation="X" />
                    <toolkit:CategoryAxis Title="Seconds" Orientation="Y" Location="Right" />
                </toolkit:Chart.Axes>

                <toolkit:ColumnSeries  Title="Male" ItemsSource="{Binding MaleSerie}" IndependentValueBinding="{Binding ItemName}"
                    DependentValueBinding="{Binding Count}"   ToolTipService.ToolTip="{Binding Count}"
                    AnimationSequence="Simultaneous" 
                    HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266"/>

                <toolkit:ColumnSeries  Title="Female" ItemsSource="{Binding FemaleSerie}" IndependentValueBinding="{Binding ItemName}"
                    DependentValueBinding="{Binding Count}"  ToolTipService.ToolTip="{Binding Count}"
                    AnimationSequence="Simultaneous" 
                    HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266">

                </toolkit:ColumnSeries>

            </toolkit:Chart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:14:12.570

OK完成...

```
 <toolkit:Chart.Axes>
            <toolkit:CategoryAxis Title="Content Items"  Orientation="X" />
            <toolkit:CategoryAxis Title="Seconds" Orientation="Y" Location="Right" />
        </toolkit:Chart.Axes>

        <toolkit:ColumnSeries  Title="Male" ItemsSource="{Binding MaleSerie}" IndependentValueBinding="{Binding ItemName}"
            DependentValueBinding="{Binding Count}"   ToolTipService.ToolTip="{Binding Count}"
            AnimationSequence="Simultaneous" 
            HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266"/>

        <toolkit:ColumnSeries  Title="Female" ItemsSource="{Binding FemaleSerie}" IndependentValueBinding="{Binding ItemName}"
            DependentValueBinding="{Binding Count}"  ToolTipService.ToolTip="{Binding Count}"
            AnimationSequence="Simultaneous" 
            HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266">

            <toolkit:ColumnSeries.DataPointStyle>
                <Style TargetType="toolkit:ColumnDataPoint">
                    <Setter Property="Background" Value="Green"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="toolkit:ColumnDataPoint">
                                <Grid>
                                    <Rectangle
                            Fill="{TemplateBinding Background}"
                            Stroke="Black"/>
                                    <Grid
                            Background="#aaffffff"
                            Margin="0 -40 -10 0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center">
                                        <TextBlock
                                Text="{TemplateBinding FormattedDependentValue}"
                                FontWeight="Bold" Width="40"
                                Margin="2"/>
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </toolkit:ColumnSeries.DataPointStyle>

        </toolkit:ColumnSeries>

    </toolkit:Chart> 
```

# sql - 为什么 Postgresql 搜索 Text 索引比 Int 索引更快？

> ID：15481393
> 
> 赞同：3
> 
> 时间：2013-03-18T16:05:27.600
> 
> 标签：sql, postgresql

```
CREATE TABLE index_test
(
  id int PRIMARY KEY NOT NULL,
  text varchar(2048) NOT NULL,
  value int NOT NULL
);
CREATE INDEX idx_index_value ON index_test ( value );
CREATE INDEX idx_index_value_and_text ON index_test ( value, text );
CREATE INDEX idx_index_text_and_value ON index_test ( text, value );
CREATE INDEX idx_index_text ON index_test ( text ); 
```

该表填充了 10000 个随机行，“值”列具有从 0 到 100 的整数，“文本”列具有随机 128 位 md5 哈希。很抱歉使用了错误的列名。

我的搜索是：

```
select * from index_test r where r.value=56;
select * from index_test r where r.value=56 and r.text='dfs';
select * from index_test r where r.text='sdf'; 
```

每当我进行一些搜索...

1.  如果只显示 'text' 和/或 'value' 列的索引
2.  如果结合（'text' 和 'value' 一起）索引被呈现

...所以，每当我看到以下图片时：

整数列“值”的搜索是

*   慢点
*   由 2 个搜索组合而成：*index_test 上的位图堆扫描*和 idx_index_value 上的位图索引扫描*

对 varchar 列“文本”的搜索是

*   快点
*   总是使用索引扫描

为什么搜索字符串比搜索整数更容易？为什么搜索计划如此不同？有没有类似的情况可以重现这种效果并且对开发者有帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:37:18.200

由于文本是一个散列，根据定义是唯一的，因此在表的 10k 行中将只有一行与该文本匹配。

56 值将在 10k 行中存在大约 100 次，并将分散在整个表格中。所以规划器首先进入索引并找到这些行所在的页面。然后它访问每个分散的页面以检索行。

# jquery - 滚动顶部 JQuery 在 IE 中无法正常工作

> ID：15481394
> 
> 赞同：0
> 
> 时间：2013-03-18T16:05:28.113
> 
> 标签：jquery, internet-explorer, cross-browser, scrolltop

我正在使用 JQuery Scroll Top 自动上下滚动。目前，当我点击“联系人”时，它并没有走到底部，而是有点摇摇晃晃。有人知道为什么会这样吗？这是链接： [http ://computerwebservices.net/creative/](http://computerwebservices.net/creative/)

```
 <div id ="header">
    <div class ="scrollBg"><img src="images/creativefolio.png" /></div>
    <div id ="menu">
    <ul>
    <li><a href="#home">Home</a></li>
    <li><a href="#portbox">Portfolio</a></li>
    <li><a href="#resume">Resume</a></li>
    <li><a href="#contact">Contact</a></li>
    </ul>
    </div><!--end of menu holder -->
    </div><!--end of header holder -->

    </div><!--end of header case -->

  <script type="text/javascript">
            $(function() {
                $('#menu ul a').bind('click',function(event){
                    var $anchor = $(this);

                    $('html, body').stop().animate({
                        scrollTop: $($anchor.attr('href')).offset().top
                    }, 1500,'easeInOutExpo');
                                        /*
                    if you don't want to use the easing effects:
                    $('html, body').stop().animate({
                        scrollTop: $($anchor.attr('href')).offset().top
                    }, 1000);
                    */
                    event.preventDefault();
                });
            });
        </script>
        <script>
        $(document).ready(function(){
  $(window).scroll(function () { 
    $('#headercase').css('top', $(document).scrollTop()); 
  });
});
</script> 
```

# iphone - FileExistsAtPath 从 UIImagePickerController 对电影返回 NO

> ID：15481402
> 
> 赞同：1
> 
> 时间：2013-03-18T16:05:44.727
> 
> 标签：iphone, ios, objective-c, uiimagepickercontroller

我从 UIImagePickerController 保存了一个电影文件的路径，我知道它存在，因为我可以在设备上播放它。包含电影文件路径的字符串上的 NSLog 会返回：

```
file://localhost/private/var/mobile/Applications/E694555D-3959-4CC5-A829-4260323C2C65/tmp//trim.6JemAI.MOV 
```

但是，当这样使用此字符串时，它会返回`NO`：

```
NSLog(@"file exists: %i", [[NSFileManager defaultManager] fileExistsAtPath:media.movie]); 
```

知道这是失败的吗？它是否与存储为路径的值有关，或者路径可能包含`//`在某一点上？这些只是我的一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:08:30.360

您需要将 URL 转换为文件路径。

```
NSURL *url = info[UIImagePickerControllerMediaURL];
NSString *path = [url path];
NSLog(@"file exists: %i", [[NSFileManager defaultManager] fileExistsAtPath:path]); 
```

路径没有前导`file://localhost`。

# xml - xslt模板匹配具有特定属性的子元素值？

> ID：15481404
> 
> 赞同：1
> 
> 时间：2013-03-18T16:05:49.710
> 
> 标签：xml, xslt, transform

假设有这个基本的 xml 文档：

```
<result name="response" numFound="73" start="0">
    <doc>
        <str name="contentType">Content1</str>
        <str name="content">Some content here</str>
    </doc>
    <doc>
        <str name="contentType">Content2</str>
        <str name="content">Some other content</str>
    </doc>
</result> 
```

我计划为每种内容类型使用不同的模板。模板匹配参数是什么？当只有 contentType 字段是特定值时，我无法弄清楚如何匹配 doc 的其他子项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:22:15.747

听起来你想要的是这样的：

```
<xsl:template match="doc[str[@name = 'contentType'] = 'Content1']
                     /str[name = 'Content']">
   <!-- Process Content1 content str -->
</xsl:template>

<xsl:template match="doc[str[@name = 'contentType'] = 'Content2']
                     /str[name = 'Content']">
   <!-- Process Content2 content str -->
</xsl:template> 
```

或者可能是这样的？

```
<xsl:template match="doc[str[@name = 'contentType'] = 'Content1']">
   <!-- Process Content1 doc -->
</xsl:template>

<xsl:template match="doc[str[@name = 'contentType'] = 'Content2']">
   <!-- Process Content2 doc -->
</xsl:template> 
```

这些中的任何一个都是您正在寻找的吗？

# sql - 子查询练习

> ID：15481406
> 
> 赞同：1
> 
> 时间：2013-03-18T16:05:57.397
> 
> 标签：sql, oracle11g

我需要编写一个包含子查询的查询，其中将列出部门名称和每个部门在其 job_title 中具有“代表”一词的员工人数，并且该列表必须按部门 ID 排序。

我写了这个查询

```
SELECT d.department_name, emp.employee_id
FROM departments d, employees emp, jobs j
WHERE emp.department_id=d.department_id
AND j.job_title LIKE '%Representative%'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:17:30.363

如果需要使用子查询，那么以下将实现您正在寻找的内容：

```
select   d.department_id,
         d.department_name,
         (select count(*)
          from   employees emp
          join   jobs j
          on     j.job_id = emp.employee_job -- I've made some assumptions, here!
          where  emp.department_id = d.department_id
          and    j.job_title like '%Representative%') reps
from     departments d
order by d.department_id; 
```

但是，就个人而言，我会使用这样的查询：

```
select   d.department_id,
         d.department_name,
         count(emp.employee_id) reps
from     departments d
join     employees emp
on       emp.department_id = d.department_id
join     jobs j
on       j.job_id = emp.employee_job -- Same assumption as before!
where    j.job_title like '%Representative%'
group by d.department_id,
         d.department_name
order by d.department_id; 
```

我发现它更容易阅读/解释，但这最终取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:17:36.070

您的示例中缺少一些连接逻辑，但这样的事情可能对您有用：

```
select d.department_name, count(emp.employee_id)
from departments d, employees emp, jobs j
where j.job_title in (select job_title from jobs where job_title like '%Representative%')
group by d.department_name 
```

SQL 可能不是 100% 正确，但您可以明白这一点。如果没有所有的连接逻辑，就很难完成它。

这应该会返回所有部门名称和员工职位包含代表的员工人数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:23:41.303

您不需要为此设置子查询。使用简单的`JOIN`.

```
 SELECT d.department_name, COUNT(*) AS cnt
    FROM employee e JOIN department d
         ON e.department_id = d.department_id
    JOIN jobs j ON e.jobid = j.jobid
   WHERE j.job_title LIKE '%Representative%'
GROUP BY d.department_name 
```

或者，如果这只是一个练习，我建议使用以下查询：

```
SELECT d.department_name
       , (SELECT COUNT(e.*)
            FROM employees e JOIN jobs j ON e.jobid = j.jobid
           WHERE e.department_id = d.department_id
             AND j.job_title LIKE '%Representative%') AS cnt
  FROM departments d 
```

然而，在现实世界中，您编写代码是为了方便，而不仅仅是为了锻炼。您的代码应该便于所有参与软件开发过程的人员阅读、理解和维护。如果这只是一个练习，那么您可以使用第二个查询。但是，如果您必须在实时应用程序中使用查询，则第一个查询中的方法对您周围的每个人都更好。

# sencha-touch-2 - Sencha Touch 2 自定义 rest 代理 url

> ID：15481408
> 
> 赞同：0
> 
> 时间：2013-03-18T16:05:58.190
> 
> 标签：sencha-touch-2

我有一个rest api，对于用户身份验证，rest url 是： [https](https://api.abc.com/user/) ://api.abc.com/user/ {username}/{password}。所以我需要为其余代理设置两个参数。谁能帮帮我吗？

这是我的用户模型：

```
Ext.define('NCAPP.model.User', {
extend:'Ext.data.Model',

config:{
    fields:[
        { name:'id', type: 'int'},           
        { name: 'username', type: 'string'},
        { name: 'netshop_id', type:'int'},
        { name: 'firstname', type: 'string'},
        { name: 'lastname', type: 'string'},
        { name: 'address', type: 'string'},
         { name:'password', type:'string'},

    ],

    proxy: {
        type:'rest',
        url:https://api.abc.com/user/',
        noCache: false,           
        reader: {
            type:'json',
            rootProperty:'user'
        }            

    }

} 
```

});

这是我在登录按钮点击功能上的 LoginController：

```
 onLoginButtonTap:function(){

    var values=this.getLoginForm().getValues(); 

    Ext.ModelMgr.getModel('NCAPP.model.User').load(values.username,{
        success:  function(user){
            if(user==null)
                {
                    Ext.Msg.alert('NCAPP',"Invalid username or password!");
                }
                else
                {
                    Ext.Msg.alert('NCAPP','Welcome! '+user.get('username'));
                    //do after login implementation
                }

        },
        failure: function(user){
            console.log("Uff, Something went worng!");
        }
    });    
}, 
```

在以下行中，我想传递用户名和密码： Ext.ModelMgr.getModel('NCAPP.model.User').load(values.username, values.password, {.....

谁能帮我实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:33:38.553

您可以使用“setProxy”方法将代理动态添加到您的模型/存储中。

```
var values = this.getLoginForm().getValues();
YOURMODEL.setProxy({
    proxy: {
        type: 'rest',
        url: 'https://api.abc.com/user/'+ values.username +'/'+ values.password,
        noCache: false,           
        reader: {
            type: 'json',
            rootProperty: 'user'
        }            

    }
}); 
```

# ios - 带有 sendAsynchronousRequest 的 iPad 1 “400 BadRequest”，全部在 iPad 3 上运行

> ID：15481412
> 
> 赞同：2
> 
> 时间：2013-03-18T16:06:07.643
> 
> 标签：ios, objective-c, ipad, nsurlconnection

我有一个带有一些 api 的服务器，我将这个 api 与 iPad 一起用作客户端。代码如下：

```
 NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://***/api/user"]];
    req.HTTPMethod = @"put";
    req.HTTPBody = data; // it is string data from json dictionary

    [NSURLConnection sendAsynchronousRequest:req queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

        NSString *userData = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
//...
    }]; 
```

一切都在 iPad 3 上运行，但是当我尝试在 iPad 1 上测试该代码时，出现错误。更具体地说：我的服务器只返回 JSON，即使有一些错误，所以我可以查看错误是在客户端还是在服务器端。因此，通常，userData 应该包含一些带有字典的字符串：

```
{ "auth": 1, "email":"some@mail.com", "error": 0} 
```

有时服务器可以返回（如果我尝试向它发送不正确的身份验证数据）：

```
{ "auth": 0, "email":"", "error": 400, "errorMessage":"Bad Request"} 
```

但我在 iPad 1 上得到的是 html 字符串：

```
<html>
<head><title>400 Bad Request</title></head>
<body bgcolor="white">
<center><h1>400 Bad Request</h1></center>
<hr><center>nginx/1.2.1</center>
</body>
</html> 
```

我有点困惑，因为有完全相同的选项，相同的互联网连接，但 iPad 1 和 iPad 3 的行为不同。重要提示：iPad 1 有 iOS 5.1.1，iPad 3 有 6.1。应该有一个非常简单的解决方案，但我想不通。我也不确定 iPad 的型号是否真的很重要。另外，我尝试了同步请求，但它也没有奏效......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:27:17.237

根据[http://w3.org/Protocols/rfc2616/rfc2616-sec5.html](http://w3.org/Protocols/rfc2616/rfc2616-sec5.html)，HTTP方法区分大小写，所以你应该使用

```
req.HTTPMethod = @"PUT"; 
```

似乎 iOS 6 自动将请求方法转换为大写，而 iOS 5 没有（可以使用网络监视器检查）。

# c++ - 返回类型扣除：首选什么方法？

> ID：15481425
> 
> 赞同：1
> 
> 时间：2013-03-18T16:06:46.727
> 
> 标签：c++, templates, c++11

我有一个类 Foo，它有两个 A 和 B 类型的任意数据成员。对 Foo::operator()(Arg &&) 的调用将参数转发给这两个成员并返回结果的总和。我可以看到几种方法来实现所有必要的类型推导。是否有一些首选方法可以减少编译器的压力？我的意思是编译时意义上的“应变”，如果嵌套太深会达到内部限制等。你能概括一下，还是它对给定的编译器高度特定？

我可以做“天真的”自动 decltype 变体：

```
template <typename A, typename B>
class Foo
{
public:
  Foo(A a, B b) : m_a(std::move(a)), m_b(std::move(b)) { }

  template <typename Arg>
  auto operator()(Arg && arg) -> decltype(m_a(std::forward<Arg>(arg)) + m_b(std::forward<Arg>(arg)))
  {
    return m_a(std::forward<Arg>(arg)) + m_b(std::forward<Arg>(arg));
  }
private:
  A m_a;
  B m_b;
}; 
```

我可以编写一个辅助结构，它只对类型而不是在“真实”实例上运行，而是在 std::declval<> 创建的实例上运行

```
template <typename A, typename B, typename Arg>
struct Foo_Returns
{
  typedef decltype(std::declval<A>()(std::declval<Arg>()) +
                   std::declval<B>()(std::declval<Arg>())) type;
}

template <typename A, typename B>
class Foo
{
public:
  Foo(A a, B b) : m_a(std::move(a)), m_b(std::move(b)) { }

  template <typename Arg>
  typename Foo_Returns<A, B, Arg>::type
  operator()(Arg && arg)
  {
    return m_a(std::forward<Arg>(arg)) + m_b(std::forward<Arg>(arg));
  }
private:
  A m_a;
  B m_b;
}; 
```

还有更多的可能性吗？

现在让它变得更难：我们有两个特征 is_green<> 和 is_blue<>。如果 Arg 为绿色，Foo 的 operator() 应将 Arg 转发给 A 和 B 的成员函数绿色并返回结果之和，类似于 Arg 为蓝色。一种类型永远不会同时是绿色和蓝色。应该可以添加其他类型的风格（因此不允许使用 bool 值来指示蓝色或绿色）。

一种变体将尽可能使用标签调度和 auto -> decltype(...) ：

```
struct green_tag { };
struct blue_tag { };
struct error_tag;

template <typename T>
struct category
{
  typedef typename std::conditional<is_green<T>::value, 
                                    green_tag,
                                    typename std::conditional<is_blue<T>::value,
                                                              blue_tag,
                                                              error_tag
                                                             >::type
                                   >::type type;
}

template <typename A, typename B>
class Foo
{
public:
  Foo(A a, B b) : m_a(std::move(a)), m_b(std::move(b)) { }

  template <typename Arg>
  auto operator()(Arg && arg) -> decltype(impl(std::forward<Arg>(arg), typename category<Arg>::type()))
  {
    return impl(std::forward<Arg>(arg), typename category<Arg>::type());
  }

private:
  template <typename Arg>
  auto impl(Arg && arg, green_tag) -> decltype(m_a.green(std::forward<Arg>(arg)) + m_b.green(std::forward<Arg>(arg)))
  {
    return m_a.green(std::forward<Arg>(arg)) + m_b.green(std::forward<Arg>(arg));
  }

  template <typename Arg>
  auto impl(Arg && arg, blue_tag) -> decltype(m_a.blue(std::forward<Arg>(arg)) + m_b.blue(std::forward<Arg>(arg)))
  {
    return m_a.blue(std::forward<Arg>(arg)) + m_b.blue(std::forward<Arg>(arg));
  }

  A m_a;
  B m_b;
}; 
```

另一个版本可以使用辅助结构：

```
template <typename A, typename B, typename Arg, typename Category = typename category<Arg>::type>
struct Foo_Returns;

template <typename A, typename B, typename Arg>
struct Foo_Returns<A, B, Arg, green_tag>
{
  typedef decltype(std::declval<A>().green(std::declval<Arg>()) +
                   std::declval<B>().green(std::declval<Arg>())) type;

  type operator()(A & a, B & b, Arg && arg) const
  {
    return a.green(std::forward<Arg>(arg)) + b.green(std::forward<Arg>(arg));
  }  
};

template <typename A, typename B, typename Arg>
struct Foo_Returns<A, B, Arg, blue_tag>
{
  typedef decltype(std::declval<A>().blue(std::declval<Arg>()) +
                   std::declval<B>().blue(std::declval<Arg>())) type;

  type operator()(A & a, B & b, Arg && arg) const
  {
    return a.blue(std::forward<Arg>(arg)) + b.blue(std::forward<Arg>(arg));
  }  
};

template <typename A, typename B>
class Foo
{
public:
  Foo(A a, B b) : m_a(std::move(a)), m_b(std::move(b)) { }

  template <typename Arg>
  typename Foo_Returns<A, B, Arg>::type
  operator()(Arg && arg)
  {
    return Foo_Returns<A, B, Arg>()(m_a, m_b, std::forward<Arg>(arg));
  }

private:
  A m_a;
  B m_b;
}; 
```

有更好的版本吗？还有哪些可能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:13:28.207

我会避免所有辅助类/结构。每个帮助器都需要编译器将其存储在某个地方并进行额外的查找。如果没有这些类，编译器至少有机会优化事物，但我无法想象辅助类可以改善您展示的示例中的情况。

对于您的绿色/蓝色示例，我什至会考虑使用 SFINAE 来缩短代码并减少实例化类/方法的数量：

```
template <typename A, typename B>
class Foo
{
public:
  Foo(A a, B b) : m_a(std::move(a)), m_b(std::move(b)) { }

  template <typename Arg>
  auto operator()(const Arg & arg) ->
    typename std::enable_if< is_green<Arg>::value,
      decltype(m_a.green(arg) + m_b.green(arg) >::type
  {
    return m_a.green(arg) + m_b.green(arg);
  }

  template <typename Arg>
  auto operator()(const Arg & arg) ->
    typename std::enable_if< is_blue<Arg>::value,
      decltype(m_a.blue(arg) + m_b.blue(arg)) >::type
  {
    return m_a.blue(arg) + m_b.blue(arg);
  }

private:
  A m_a;
  B m_b;
}; 
```

我还认为这更易于维护，YMMV。对于编译时性能，一如既往，只有一个真正的建议：衡量它。

**编辑：**我将参数从`Arg&&`to更改为`const Arg&`并删除了 double `std::forward<Arg>(...)`，因为这是非法的，请参阅评论。

# python - 模拟函数的静态变量

> ID：15481431
> 
> 赞同：1
> 
> 时间：2013-03-18T16:07:00.260
> 
> 标签：python

**解决方案**：错误是我的函数实际上是一个方法。

我正在尝试使用装饰器来模拟函数的变量。为什么我在下面的最后一行收到此错误？`global name 'onecmd' is not defined`

```
def static_var(varname, initial_value):
  def decorate(func):
        setattr(func, varname, initial_value)
        return func
  return decorate

@static_var("last", None)
def onecmd(self, line):
    if line == "lastcmd":
        line = onecmd.last
    else:
        onecmd.last = line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:20:24.173

您的代码似乎希望能够`onecmd`作为全局访问，但这是一种*方法*。在模块级别定义的函数确实可以通过它们的名称访问（因为它们存储为全局），但类方法仅存储在类对象中。

您需要通过定义 this 的类或通过`self`属性找到函数对象，然后返回类和函数：

```
@static_var("last", None)
def onecmd(self, line):
    onecmd = type(self).onecmd.im_func  # im_func is the wrapped function
    if line == "lastcmd":
        line = onecmd.last
    else:
        onecmd.last = line 
```

由于您已经有一个类方法，因此最好将变量存储在*类*中：

```
class Foo(object):
    last = None

    def onecmd(self, line):
        if line == "lastcmd":
            line = type(self).last
        else:
            type(onecmd).last = line 
```

甚至将其改为类方法：

```
class Foo(object):
    last = None

    @classmethod
    def onecmd(cls, line):
        if line == "lastcmd":
            line = cls.last
        else:
            cls.last = line 
```

# c# - 选择后更改整个数据网格行的背景颜色

> ID：15481432
> 
> 赞同：2
> 
> 时间：2013-03-18T16:07:01.377
> 
> 标签：c#, .net, wpf, datagrid, styles

我目前正在使用 DataGrid 建立一个 WPF 窗口来保存一个表。绑定和更新工作正常，我也很鄙视样式，但在选择时遇到了麻烦。这是先决条件：

*   表是只读的
*   整行选择

这是我的表格的源代码：（是的，我知道我确实设置了 3 次选择颜色，一次用于 DataGrid，一次用于行，一次用于单元格。我认为其中一个可能会有所帮助，但事实并非如此案子。）

```
<DataGrid x:Name="dgv" SelectionMode="Single" SelectionUnit="FullRow" AutoGenerateColumns="False" Grid.Column="0" Grid.RowSpan="3" Margin="8" RowHeight="32" GridLinesVisibility="Horizontal" HeadersVisibility="Column" HorizontalScrollBarVisibility="Hidden"
              CanUserAddRows="False"
              CanUserDeleteRows="False"
              CanUserReorderColumns="False"
              CanUserResizeColumns="False"
              CanUserResizeRows="False"
              CanUserSortColumns="True"
              IsReadOnly="True"
              LoadingRow="dgv_LoadingRow"
              >
        <DataGrid.CellStyle>
            <Style TargetType="DataGridCell">
                <Style.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"></SolidColorBrush>
                </Style.Resources>
                <Setter Property="VerticalAlignment" Value="center"></Setter>
                <Setter Property="Padding" Value="4"></Setter>
                <Setter Property="Margin" Value="4"></Setter>
            </Style>
        </DataGrid.CellStyle>
        <DataGrid.RowStyle>
            <Style TargetType="DataGridRow">
                <Style.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"></SolidColorBrush>
                </Style.Resources>
            </Style>
        </DataGrid.RowStyle>
        <DataGrid.Style>
            <Style TargetType="DataGrid">
                <Style.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"></SolidColorBrush>
                </Style.Resources>
            </Style>
        </DataGrid.Style> 
```

然后它继续 Column- 和 RowDefinitions ...

我遇到以下问题：

*   只有单元格被选中，而不是整行。单元格中的边距使它看起来很奇怪（见截图）
*   当我单击单元格的边距（屏幕截图中未以红色呈现的区域）时，该行没有选择 - 使得选择行非常不直观......
*   我单击以选择行的单元格仍然被高亮显示（注意所选行中“Peter Müller”周围的黑色边框）

这是结果的屏幕截图：

![在此处输入图像描述](../Images/f4a6f3854b71de5a20aa2c6e0affa3aa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:01:15.993

如果您要删除单元格定义中的边距怎么办？这说明了单元格占用了额外的空间，而红色没有覆盖该空间。如果您删除了边距，您是否得到了您正在寻找的东西。我认为真正的答案可能在`DataGrid.RowBackground`[Property][1] 中。

属性值 类型：System.Windows.Media.Brush 绘制行背景的画笔。注册的默认值为空。有关可能影响值的更多信息，请参阅 DependencyProperty。

您可以在 IsSelected 状态上使用触发器来设置颜色。默认情况下，选择 DataGrid 的整行。

```
<DataGrid Name="dataGrid1" Margin="12,12,0,0">
    <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
            <Setter Property="Background" Value="LightBlue" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="Red"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:01:45.403

为了更改默认背景行选择。您需要 1）编辑 datagridrow 样式和模板（即[http://msdn.microsoft.com/en-us/library/cc278066%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc278066%28v=vs.95%29.aspx)） 2）处理 selectionchanged 事件和更改的行背景. 3）或在数据网格行加载事件上获取等于“BackgroundRectangle”的childrenoftype矩形并设置您想要的颜色 - 因此使用它会影响数据网格中的所有行，它类似于1但在代码后面执行此操作。

希望这能给你一些想法。

# android - 检测服务内的来电

> ID：15481438
> 
> 赞同：0
> 
> 时间：2013-03-18T16:07:14.450
> 
> 标签：android, android-broadcast

在我拥有的服务中：

```
// subscribe to incoming call notifications
registerReceiver(mIncomingCallReceiver, new IntentFilter("android.intent.action.PHONE_STATE")); 
```

但是 onReceive 永远不会被调用：

```
// incoming call receiver
private BroadcastReceiver mIncomingCallReceiver = new BroadcastReceiver() {
   @Override
   public void onReceive(Context context, Intent intent) { 
```

这里有什么问题？我不想通过清单和附加类来声明它，因为它需要额外的代码来调用我的服务中的相应方法。

PS 我需要做的是在注册来电时停止服务播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:13:15.277

也许您的清单未命中

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# curl - 在 JSON 中为 ElasticSearch 中的 _msearch POST 新行

> ID：15481445
> 
> 赞同：0
> 
> 时间：2013-03-18T16:07:45.700
> 
> 标签：curl, angularjs, elasticsearch

我正在尝试使用浏览器中的 ElasticSearch 执行 _msearch，但不知道如何复制此 CURL 命令。

```
curl -XPOST http://localhost.com:9200/ratecards/_msearch -d '

{}
{"query":{"term":{"_id": "1"} }}' 
```

注意新行的存在。这就是我想要复制的。

这是我正在使用的 JavaScript，它使用 Angular 的 $http，它只是 jQuery 的 ajax 命令的一个薄包装器。

```
 if (routing) {
        address += '?routing=' + routing;
      }

      var data = '\n';

      _.each(payloads, function addPayload(payload) {
        data += '{}\n' + JSON.stringify(payload);
      })

      var config = { data: data, method: 'POST', url: address };
      $http(config).success(doStuff); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:57:59.070

终于想通了，使用直接的 jquery 我可以为我的数据做到这一点。

```
config.data = '\n\n{}\n' + JSON.stringify(myQueryObject)
config.type = 'POST' 
```

然后使用

$.ajax(配置)

# hibernate - 在 Grails 中使用多对一

> ID：15481451
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:08:08.823
> 
> 标签：hibernate, grails, grails-orm

我已经像这样创建了多对一关系 N:1

```
class Score {
    Double value
    Criteria criteria
    static belongTo = [criterias: Criteria]
}

class Criteria {
    String name
} 
```

所以我的问题是我想用来`g:select`将某些标准名称的分数存储到数据库中。我有这个表格

```
 <g:form controller="audition" action="assignScore">

    <label for="vocal" class="control-label">vocal</label>
    <div class="controls">
        <g:select  from="${['0','10','20','30','40','50','60','70','80','90','100']}" name="vocal" value="score"   noSelection="['':'-choose Score please-']"/>
        <span class="help-inline">${hasErrors(bean: contestantInstance, field: 'vocal', 'error')}</span>

</div>

    <label for="stage" class="control-label">stage</label>
    <div class="controls">
        <g:select  from="${['0','10','20','30','40','50','60','70','80','90','100']}" name="stage" value="score"   noSelection="['':'-choose Score please-']"/>
        <span class="help-inline">${hasErrors(bean: contestantInstance, field: 'stage', 'error')}</span>

</div>
       <div class="form-actions">
           <g:submitButton name="save" class="btn btn-primary" value="save" />
           <button class="btn" type="reset">Cancel</button>
       </div>

   </g:form> 
```

和控制器中的动作

```
 def assignScore = {
    //find a criteria  name
  def criteriaInstance =  Criteria.findByNameLike(params.vocal)  ?: new Criteria(name: "vocal").save(flush: true)
    if (params.vocal == "vocal"){
    def score = new Score()

        score.properties=params.vocal

        criteriaInstance.addToScores(score)
        criteriaInstance.save(flush: true)
    }

    def criteriaInstanceStage =  Criteria.findByNameLike(params.stage)  ?: new Criteria(name: "stage").save(flush: true)

    if (params.stage == "stage"){
        def score = new Score()
        score.properties=params.stage

        criteriaInstanceStage.addToScores(score)
        criteriaInstanceStage.save(flush: true)
    }

} 
```

问题是我无法保存与某些标准相关的分数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:55:40.870

请参阅[文档](http://grails.org/doc/2.1.0/ref/Tags/select.html)，您可以毫无问题地使用 g:select。

```
<g:select name="criteria"
          from="${Criteria.list()}"
          value="${criteria}"
 /> 
```

请注意，Criteria 可能是保留字。

# c# - 响应消息返回 403 禁止 - youtube 分析 api（服务帐户）

> ID：15481452
> 
> 赞同：0
> 
> 时间：2013-03-18T16:08:10.593
> 
> 标签：c#, youtube-api

```
 HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create("https://www.googleapis.com/youtube/analytics/v1/reports?ids=channel%3D%3D{channelid}&start-date=2012-01-01&end-date=2012-02-01&metrics=views");
        service.Authenticator.ApplyAuthenticationToRequest(myHttpWebRequest);
        HttpWebResponse response = myHttpWebRequest.GetResponse() as HttpWebResponse; 
```

我收到 403 禁止错误。错误发生在 GetResponse() 行上。范围已设置为“ [https://www.googleapis.com/auth/yt-analytics.readonly](https://www.googleapis.com/auth/yt-analytics.readonly) ”。标头包含访问令牌承载。

编辑：我正在使用服务帐户，这可能是个问题吗？

# mysql - MySQL 中一组 innoDB 行占用的字节数

> ID：15481453
> 
> 赞同：0
> 
> 时间：2013-03-18T16:08:11.937
> 
> 标签：mysql, innodb

考虑到某些列是 varchars 的事实，我想知道是否有一种方法可以测量磁盘上一定数量的行占用的字节数。

非常感谢，

弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:18:54.080

要测量磁盘上的行占用的字节数，您必须知道每种数据类型需要多少磁盘空间。

**文档：**
[数据类型存储要求](http://dev.mysql.com/doc/refman/5.6/en/storage-requirements.html)
[CHAR 和 VARCHAR 类型](http://dev.mysql.com/doc/refman/5.6/en/char.html)

**示例：**
一个表由 2 个字段（一个 BIGINT 字段和一个 VARCHAR(400) 字段）组成。BIGINT 字段将始终使用 8 个字节。VARCHAR 字段使用 2 个字节 + 实际存储的字符数。
因此，如果一条记录存储 300 个字符，则该记录使用的总字节数将为：8+2+300 = 310 字节

> 与 CHAR 相比，VARCHAR 值存储为 1 字节或 2 字节长度前缀加上数据。长度前缀表示值中的字节数。如果值需要不超过 255 个字节，则一列使用一个长度字节，如果值可能需要超过 255 个字节，则使用两个长度字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:50:56.923

[阅读InnoDB 中记录的物理结构和我的](http://blog.jcole.us/2013/01/10/the-physical-structure-of-records-in-innodb/)[InnoDB](http://blog.jcole.us/innodb/)系列中的其他文章可能很有用。如果您提供了表架构（来自`SHOW CREATE TABLE`），我也很乐意以它为例。不幸的是，实际上没有办法测量 MySQL 中内置的物理行大小。

# for-loop - 如何降低复杂度？

> ID：15481456
> 
> 赞同：1
> 
> 时间：2013-03-18T16:08:28.553
> 
> 标签：for-loop, complexity-theory, reduce

我必须使用动态编程解决问题。

```
for(int i = 3; i < N; i++){
   for(int j= 3; j < T; j++){
   .. 
```

我想降低复杂性。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:02:37.210

我需要了解您的递归的基本情况是什么。我认为有了这些信息，我可以把它变成一个更有效的循环结构。但是根据我现在所知道的，我只是将您的第一个功能定义转录成它在逻辑上等效的 C#...

```
int S(int i, int j)
{
    if (?) // the base case, must be at least one, can have more then one.  (e.g. when i=N or j=T)
        return ?; // What gets returned ultimately controls how efficient we can make this.

    var maxValue = S(i-1, j-1);
    for (var k = j-2; k < i-3; k++)
        maxValue = Math.Max( maxValue, S(k, j-3) );
    return maxValue;
} 
```

在 for 循环中，我们可以通过自己的比较而不是调用 Math.Max 来提高效率。我使用 Math.Max simple 是因为它更易于阅读，但一个简单的性能增强是将 S 的返回值放入一个临时变量中，然后使用 >?: 设置 maxValue。

# php - php正则表达式过滤数据

> ID：15481458
> 
> 赞同：3
> 
> 时间：2013-03-18T16:08:30.433
> 
> 标签：php, regex

我只是被 php 正则表达式卡住来过滤数据。我想使用正则表达式检测'Results 1 - 20 of 60'，然后从中删除数据`$content`

```
$content="We have Results 1 - 20 of 60 some blah blah blah";
$content = preg_replace("/regular-expression/", " ", $content); 
```

这里的预期输出是：有`We have some blah blah blah`
什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:10:32.443

很快，这里有一个解决方案

```
$content="We have Results 1 - 20 of 60 some blah blah blah";
$content = preg_replace("/(Results)(\\s+)(\\d+)(\\s+)(-)(\\s+)(\\d+)(\\s+)(of)(\\s+)(\\d+)/", " ", $content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:11:43.500

你可以使用这个正则表达式

```
 $content = preg_replace("/\s*results\s+\d+\s+-\s+\d+\s+of\s+\d+\s*/i", " ", $content); 
```

删除`Results 1 - 20 of 60`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:13:52.687

您可以通过

```
<?php
    $str="We have Results 1 - 20 of 60 some blah blah blah";
    echo preg_replace("/(Results)(\\s+)(\\d+)(\\s+)(-)(\\s+)(\\d+)(\\s+)(of)(\\s+)(\\d+)/", " ", $str);
?> 
```

**输出**

```
We have some blah blah blah 
```

# javascript - 向正则表达式添加总字符数限制

> ID：15481462
> 
> 赞同：1
> 
> 时间：2013-03-18T16:08:35.503
> 
> 标签：javascript, regex

我有以下工作正常的正则表达式，但我需要对字符数添加一个全面限制，使其长度不能超过 50

```
^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$ 
```

有任何想法吗？我尝试在不同的地方添加 {1,50} 但没有一个有效！

我知道电子邮件地址可以超过 50 个字符，但由于我不会进入的原因，我需要限制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:12:10.007

您可能不应该将它添加到您的正则表达式中，因为它似乎已经很复杂了。相反，也许您应该考虑在评估和返回您的通过/失败标准所需的任何内容之前捕获字符串长度。

```
var inp = document.getElementById('myinput');
inp.onkeyup = function() {
  alert(inp.value.length);
}​ 
```

或者，您可以简单地限制 HTML 中的输入字段长度

```
<input type="text" id="Textbox" name="Textbox" maxlength="50" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:11:58.677

您可以将正则表达式的主体包装在一个非捕获组中，并将 50 个字符的限制放在那里：

```
^(?:([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)){1, 50}$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:14:16.897

如果您需要知道字符串是否少于 50 个字符，您可以`length`在执行正则表达式之前检查它的属性。像这样的东西应该工作：

```
if ( emailString.length <= 50 ) {
    // The string is an acceptable length, apply regexp check
} else {
    // The string is too long, no need to check via regexp
} 
```

当然，您也可以将长度约束添加到正则表达式，但将长度和格式视为单独的验证类型可能更容易。希望有帮助。干杯!

# jquery - jquery 日期选择器 jquery to UK 格式

> ID：15481463
> 
> 赞同：7
> 
> 时间：2013-03-18T16:08:35.463
> 
> 标签：jquery

我正在使用网站上的 Jquery datepicker 来允许用户选择日期，并且想知道显示的日期是否可以显示为英国格式的日期，例如 2012 年 9 月 22 日在英国显示为 22/ 2012 年 9 月 2012 年 9 月 22 日美国格式

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T16:16:14.890

试试这个：

```
$('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }); 
```

* * *

```
$.datepicker.formatDate( format, date, settings ) 
```

将日期格式化为指定格式的字符串值。

格式可以是以下组合：

```
d - day of month (no leading zero)
dd - day of month (two digit)
o - day of the year (no leading zeros)
oo - day of the year (three digit)
D - day name short
DD - day name long
m - month of year (no leading zero)
mm - month of year (two digit)
M - month name short
MM - month name long
y - year (two digit)
yy - year (four digit)
@ - Unix timestamp (ms since 01/01/1970)
! - Windows ticks (100ns since 01/01/0001)
'...' - literal text
'' - single quote
anything else - literal text 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-29T17:41:07.733

使用以下之一

`$('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' });`

`$('#datepicker').datepicker({ dateFormat: 'dd/mm/yy' });`

`$('#datepicker').datepicker({ dateFormat: 'dd-M-yy' });`

`$('#datepicker').datepicker({ dateFormat: 'dd-MM-yy' });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T12:26:32.227

根据[ebram tharwat 的](https://stackoverflow.com/users/1295905/ebram-tharwat)回答：

我改变了：这对我`$('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' });`有用`$('#datepicker').datepicker({ format: 'dd-mm-yy' });`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T16:27:39.633

根据@user2903379 对@campervancoder 的问题回答：

```
$('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }); 
```

将改变日/月/年的顺序

```
$('#datepicker').datepicker({ format: 'dd-mm-yyyy' }); 
```

还将值之间的 /（斜杠）更改为 -（连字符），以便日期的表示方式与 MySQL 中存储的方式相同（尽管是从后到前）。请注意，我还必须使用 4 个字母的年份表示，否则日期选择器仅返回 2 位数的年份。

# vb.net - 来自相同实体的继承和组合关系

> ID：15481465
> 
> 赞同：0
> 
> 时间：2013-03-18T16:08:38.440
> 
> 标签：vb.net, design-patterns

有什么反对做这样的事情：

```
Public Class clsLocation

        Inherits clsEntity
    End Class

    Public Class clsPerson
        Inherits clsEntity
    End Class

    Public Class clsEntity

    End Class

    Public Class clsEvent
        Inherits clsEntity

        Private persons() As clsPerson
        Private locations() As clsLocation        
    End Class 
```

Location 是 Entity，Person 是 Entity（clsEntity 中的一些函数在 clsPerson 和 clsLocation 中被覆盖）。事件有一个或多个人，事件有一个或多个位置。

我以前没有见过这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:34:15.303

我看不出拥有像您所拥有的那样的类架构有任何缺点，尽管我会为 clsEntity 使用一个抽象类（如果您永远不需要实例化它）而不是在类名称前加上“cls”。

我首先会问自己，为什么 Event 类中只有 1 个数组，因为它们继承了同一个类（即`Private entities() as clsEntity`），但实际上这完全取决于您的业务逻辑，如果您的 Event 有 2 个明显不同的关系具有不同意思，那么就保持这种方式。

PS。有一个专门的 stackexchange 用于代码审查，您可能更愿意将其用于此类问题：[https ://codereview.stackexchange.com/](https://codereview.stackexchange.com/)

# webbrowser-control - 添加带有 JavaScript 的新输入控件并从浏览器触发 onclick

> ID：15481466
> 
> 赞同：1
> 
> 时间：2013-03-18T16:08:40.953
> 
> 标签：webbrowser-control

我用javascript注入了一个新的输入控件

```
 element = axWebBrowser.Document.CreateElement("input");
                element.SetAttribute("id", "inpinp");
                element.SetAttribute("type", "button");
                element.SetAttribute("value", "Hello World");
                element.SetAttribute("onclick", "javascript: alert('hello');"); 
```

它在浏览器中显示控件，但是当我单击无操作时。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:27:29.600

这会注入一个按钮，然后为 click 事件设置一个不显眼的事件侦听器：

```
HtmlElement myElem = webBrowser1.Document.CreateElement("input");
HtmlElement script = webBrowser1.Document.CreateElement("script");

dynamic element = myElem.DomElement;
element.SetAttribute("value", "Hello, World!");
element.SetAttribute("type", "button");
element.SetAttribute("id", "myButton");

dynamic elemScript = script.DomElement;
elemScript.text = "function bindEvent() { var myButton = document.getElementById('myButton'); if(myButton.addEventListener){ myButton.addEventListener('click',clicked,false);}else if(myButton.attachEvent){myButton.attachEvent('onclick',clicked);}} function clicked(){alert('clicked');}";
((HtmlElement)webBrowser1.Document.GetElementsByTagName("body")[0]).AppendChild(myElem);
((HtmlElement)webBrowser1.Document.GetElementsByTagName("body")[0]).AppendChild(script);
webBrowser1.Document.InvokeScript("bindEvent"); 
```

祝你好运！

# antlr4 - 标签“标签”类型与之前的定义不匹配：TOKEN_LABEL!=RULE_LABEL

> ID：15481471
> 
> 赞同：1
> 
> 时间：2013-03-18T16:08:51.207
> 
> 标签：antlr4

我注意到我不能写这样的规则：

```
ausdruck: label=ausdruck 'x' #One
        | label='foo'    #Two
        ; 
```

它给出了以下错误：

> 标签“标签”类型与之前的定义不匹配：TOKEN_LABEL!=RULE_LABEL

看起来这是因为一次标签引用解析器规则，一次引用词法分析器规则。如果我稍微改变规则：

```
ausdruck: label=ausdruck 'x' #One
        | label2='foo'    #Two
        ; 
```

一切正常。但为什么？我的第一次尝试有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:21:53.843

您似乎发现了一个特定于使用`#One`标记替代方案的语法的错误。

每个标签对应于生成代码中具有具体类型的字段。规则`ausdruck`返回`AusdruckContext`，匹配令牌`'foo'`返回 a `TerminalNode`。这些类型不兼容，因此通常标签名称必须不同。但是，由于您标记了外部替代项`#One`和`#Two`，您*应该*能够在两个不同上下文中的每一个中包含具有相同名称的标签。

# php - PHP/jquery/ajax 在设定的时间间隔内加载小型 php 脚本

> ID：15481472
> 
> 赞同：1
> 
> 时间：2013-03-18T16:08:53.200
> 
> 标签：php, jquery, ajax

我有我的主文件，其中显示了一些图表等 - 这很好用。

现在我想出了以更及时的方式显示一些温度的想法 - 例如 - 每隔 2 到 10 秒刷新一次。

我添加了一个小 php 脚本，它可以分解传感器信息并对其进行格式化，这本身就可以正常工作：

```
$sensor1 = file_get_contents('sensor1');
$sensorinfo1 = explode ("t=", $sensor1);

$sensor2 = file_get_contents('sensor2');
$sensorinfo2 = explode ("t=", $sensor2);

printf("Aktuelle Temperaturen:  Sensor1: %s  Sensor2: %s", $sensorinfo1[1] / 1000,$sensorinfo2[1] / 1000); 
```

我对 Javascript、Ajax 和 jQuery 的了解相当……好吧。让我们不谈论它。在搜索了一段时间后，我为该部分提出了以下内容（它不起作用，我不知道为什么）：

```
setInterval(function () {
    $('#curtemp').load('grabsensorinfo.php', function () {
        }, 5000);
}); 
```

和 div 元素：

```
<div class="curtemp">
</div> 
```

所以我想要的是每 X 秒更新一次 div 元素。有人知道我哪里出错了吗？

这就是我现在要做的 - 仍然无法工作：

```
var tempUpdate=function() {
    $('#curtemp').load('grabsensorinfo.php')
    };   
setInterval(tempUpdate,5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:13:49.147

您必须以`()`这种方式调用不带 的函数：

```
var callme=function () {
      $('#curtemp').load('grabsensorinfo.php');
    }; 
```

编辑：调用时不需要传递空函数`load()`，只需将页面地址作为 URL 调用即可。在 Firefox 控制台的 Chrome 中尝试它以检查它是否正常工作

然后（按照建议加载页面后）：

`$(function(){setInterval(callme,5000);});`

否则，JavaScript 将在开始时调用该函数一次，然后*调用返回值*。

看起来很奇怪，假设现在您说的是“*请每 5000 毫秒调用一次此函数的返回值*”，而不是“*每 5000 毫秒调用一次此函数*”。

# c# - ASP.NET 成员按用户角色重定向到页面

> ID：15481473
> 
> 赞同：1
> 
> 时间：2013-03-18T16:08:53.407
> 
> 标签：c#, asp.net, asp.net-membership

我有 3 个角色，即经理、员工和会计师。我正在使用 asp.net 会员资格。当这些角色中的所有用户都登录后，他们会转到 Default.aspx。如何通过检查他们的角色来重定向他们？即当用户以经理角色登录时，他应该去Manager.aspx。那些登录的用户可以输入 Login.aspx 并看到它。他们登录时不应该看到它。我该如何处理这些问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:12:59.800

就像是：

```
if (HttpContext.Current.User.IsInRole("Manager")
{
    Response.Redirect("~/ManagerPage.aspx");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:11:46.263

方法

```
Roles.IsUserInRole( String roleName ) 
```

应该做你正在寻找的东西。

如：

```
if ( Roles.IsUserInRole( "Manager" ) )
{
    Response.Redirect( "~/ManagerLandingPage.aspx" );
} 
```

# java - Java Updater 游戏启动器

> ID：15481478
> 
> 赞同：0
> 
> 时间：2013-03-18T16:09:06.730
> 
> 标签：java, launcher

我正在尝试为我的游戏制作 Java 游戏更新程序启动器。类似于我的世界的工作方式。然而，我的世界只有几个 .jar 文件可供下载，而我需要重新下载所有游戏资产。Java是否有任何简单的方法来检查需要对其进行操作的文件？我的一个想法是使用 .7z 文件，因为这些文件可以压缩得非常小。不过那行不通，因为我似乎无法让 Java 连接到 7zip 操作。我的另一个想法是，如果它确定是否需要更新，它会读取带有一组命令的文件，如下所示：删除 assets/models/malecharacter.obj add assets/models/alien.obj ...等

但我不确定这是否非常有效，而且我也无法在管理文件方面找到很多帮助。任何帮助和想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-04T14:49:23.180

我最近用 Java 做了一个游戏启动器，我还有一些问题需要解决，比如如何更新启动器本身。

无论如何，对于游戏更新/版本，我只有一个“版本”文件夹，每个下载版本都有一个文件夹，它可能不是最漂亮的解决方案，但它适用于多个版本并且很容易制作。

我的启动器检查来自我的专用服务器的 URL，该服务器具有所有可用版本，我称之为版本列表，然后由于服务器上的版本文件夹遵循路径顺序，我可以调用版本列表中的任何版本。我下载选定的版本并将其解压缩到用户 PC 上的单独版本文件夹中。

# android - 在 Android 中使用 SQL Server 的 Web 服务？

> ID：15481483
> 
> 赞同：0
> 
> 时间：2013-03-18T16:09:17.947
> 
> 标签：android, web-services, ksoap2

我正在尝试连接我的数据库，我需要一些选择，插入 vb。命令。我在互联网上有一个独立运行或与其他 .net 应用程序一起运行的 Web 服务。我为 android 编写了一些代码，但我无法正确运行。

```
public class MainActivity extends Activity {
    final static String NAMESPACE = "http://tempuri.org/";
    final static String METHOD_NAME = "MQ_Insert";
    final static String SOAP_ACTION = "http://tempuri.org/MQ_Insert";
    final static String URL = "http://mysite/Service1.asmx";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText txt1 = (EditText) findViewById(R.id.editText1);
        final EditText txt2 = (EditText) findViewById(R.id.editText2);
        final EditText txt3 = (EditText) findViewById(R.id.editText3);
        final EditText txt4 = (EditText) findViewById(R.id.editText4);
        final TextView txt=(TextView) findViewById(R.id.textView1);

        Button btn=(Button) findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                SoapObject Request = new SoapObject(NAMESPACE,METHOD_NAME);
                Request.addProperty("QA", txt1.getText().toString());
                Request.addProperty("H_ID", Integer.parseInt(txt2.getText().toString()));
                Request.addProperty("MC_ID", Integer.parseInt(txt3.getText().toString()));
                Request.addProperty("CC_ID", Integer.parseInt(txt4.getText().toString()));

                SoapSerializationEnvelope soapEnvelop;
                soapEnvelop = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                soapEnvelop.dotNet=true;
                soapEnvelop.setOutputSoapObject(Request);

                HttpTransportSE htp=new HttpTransportSE(URL);
                try {
                    htp.call(SOAP_ACTION, soapEnvelop);
                    //SoapPrimitive resultString = (SoapPrimitive)soapEnvelop.getResponse();
                    //String id = resultString.toString();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                String result;
                try {
                    result= "final:"+(SoapPrimitive) soapEnvelop.getResponse();
                    txt.setText(result);
                } catch (SoapFault e) {
                    e.printStackTrace();
                }                   
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

当我尝试使用 AVD 时，它被此代码停止，但在 eclipse 中似乎没问题。下面的 Web 服务代码，它工作正常。我找不到我的错误:(

```
 [WebMethod]
        public string MQ_Insert(string QA, int H_ID, int MC_ID, int CC_ID)
        {
            conn = new SqlConnection(constring);
            conn.Open();

            comm = new SqlCommand();
            comm.Connection = conn;
            comm.CommandType = System.Data.CommandType.StoredProcedure;
            comm.CommandText = "MQ_Insert";
            comm.Parameters.AddWithValue("@QA", QA);
            comm.Parameters.AddWithValue("@H_ID", H_ID);
            comm.Parameters.AddWithValue("@MC_ID", MC_ID);
            comm.Parameters.AddWithValue("@CC_ID", CC_ID);
            try
            {
                comm.ExecuteNonQuery();
                return "Record Saved";
            }
            catch (Exception)
            {
                return "Not Saved";
            }
            finally
            {
                conn.Close();
            }
        } 
```

尝试此操作时出现错误：

![在此处输入图像描述](../Images/13062b113c76131e78d5d95e495e3e1d.png)

# vb.net - 错误 - 事务与当前连接无关或已完成

> ID：15481488
> 
> 赞同：1
> 
> 时间：2013-03-18T16:09:31.790
> 
> 标签：vb.net

在我的网络应用程序中出现此错误。

事务要么与当前连接无关，要么已完成。

```
#Region "Database Queries"
Private Shared oSqlConnection As SqlConnection
Private Shared oSqlDataAdapter As SqlDataAdapter
Private Shared oSqlCommand As SqlCommand
Private Shared oSqlTransaction As SqlTransaction

Private Shared _strCommand As String

Public Shared Property strCommand() As String
    Get
        Return _strCommand
    End Get

    Set(ByVal value As String)
        If Not InTransaction Then RollBack_Transaction()
        _strCommand = "SET DATEFORMAT mdy " & vbCrLf & value
        DbQuery()
    End Set
End Property

Protected Shared Sub DbQuery()
    'Try

    If Not InTransaction Then
        RollBack_Transaction()

        oSqlCommand = New SqlCommand(_strCommand, oSqlConnection)
    Else
        oSqlCommand = oSqlConnection.CreateCommand
        If _InTransaction_Initial Then
            oSqlConnection.Open()
            oSqlTransaction = oSqlConnection.BeginTransaction(IsolationLevel.ReadCommitted)
            _InTransaction_Initial = False
        End If

        oSqlCommand.Transaction = oSqlTransaction
        oSqlCommand.CommandText = _strCommand
        oSqlCommand.CommandTimeout = 0
    End If

    oSqlDataAdapter = New SqlDataAdapter(oSqlCommand)
    Ds = New DataSet
    oSqlDataAdapter.Fill(Ds) '**<- - - The error occurs here**'

    'Catch ex As Exception
    '    SetMessage(ex)
    '    ' MsgBox("Server: " & ServerName & vbCrLf & "User Id: " & SqlID & vbCrLf & "Password: " & SqlPassword & vbCrLf & "Database: " & MainDb)
    'End Try

    'oSqlConnection.Close()

End Sub

Private Shared _InTransaction_Initial As Boolean = False
Private Shared InTransaction As Boolean

Public Shared Sub StartTransaction()
    _InTransaction_Initial = True
    InTransaction = True
End Sub
Public Shared Sub RollBack_Transaction()
    Try
        oSqlTransaction.Rollback()
    Catch ex As Exception
    End Try
    Try
        oSqlConnection.Close()
    Catch ex As Exception
    End Try

    InTransaction = False
End Sub

Public Shared Sub Commit_Transaction()
    Try
        oSqlTransaction.Commit()
    Catch ex As Exception
    End Try
    Try
        oSqlConnection.Close()
    Catch ex As Exception
    End Try

    InTransaction = False
End Sub

Function dsCount() As Long
    Return Ds.Tables(0).Rows.Count
End Function 
```

请参阅代码中的粗体文本。

希望听到您的积极回应。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:41:23.223

发生错误是因为您使用了**Shared member variables**。

您可以使用共享函数，但您应该完全避免共享变量或成员。
不要在共享上下文中“保存”任何信息。这些在应用程序范围内可用，并且对于来自不同用户的不同请求可能是相同的。

在共享（静态）函数中运行数据访问操作应该没有问题。
但是拥有共享成员会导致完整性和并发性问题，使应用程序不稳定

将这些作为变量放在方法中

```
oSqlConnection As SqlConnection
oSqlDataAdapter As SqlDataAdapter
oSqlCommand As SqlCommand
oSqlTransaction As SqlTransaction 
```

将解决问题。

# cuda - 在 gpu 共享内存中加载结构

> ID：15481489
> 
> 赞同：1
> 
> 时间：2013-03-18T16:09:34.997
> 
> 标签：cuda, shared-memory

我正在使用一组结构，每个 cuda 块将使用一个结构（并且只有一个）的数据并围绕它进行大量计算。为了使程序正常工作，我想将结构加载到共享内存中。

我尝试使用这样的 memcpy 函数：

```
struct LABEL_2D{
    int a;
    float * b[MAX];
};

__shared__ struct LABEL_2D self_label;

if(threadIdx.x == 0){
memcpy(&self_label,
           label+(blockIdx.x*sizeof(struct LABEL_2D)),
           sizeof(struct LABEL_2D));
}
 __syncthreads(); 
```

但在执行时出现以下错误：未指定的启动失败 cudaGetLastError()

我想知道是否可以在共享内存中加载结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:35:54.570

您不应该使用 memcpy() 复制数据。

您可以像以前一样分配第一个线程，以简单地初始化共享内存变量：

```
struct LABEL_2D{
    int a;
    float * b[MAX];
};

__shared__ LABEL_2D self_label;

if(threadIdx.x == 0){
    slef_label = label[blockIdx.x];

}
 __syncthreads(); 
```

**编辑**：删除了其他解决方法，因为它们实际上没用。

# django - 为什么 django 在数据库中创建许多会话对象？

> ID：15481491
> 
> 赞同：2
> 
> 时间：2013-03-18T16:09:40.483
> 
> 标签：django, django-sessions

我有一个带有名为 'app' 的应用程序的香草 django 项目。它有views.py 和middleweres.py。

```
#views.py
from django.http.response import HttpResponse

def home(request):
    return HttpResponse('')

#settings.py

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'app.middlewares.M',
)

#middlewares.py
class M(object):
    def process_request(self, request):
        request.session['a']='a' 
```

Django 在每次请求时都会在 db 中的会话表中添加一行。为什么？

UPD：我仍然很困惑。我为这个问题做了一个 github 项目：[https](https://github.com/vinograd19/django-session-problem/) ://github.com/vinograd19/django-session-problem/ 你可以在那里找到我的代码并在你的机器上运行它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:59:24.540

您的自定义中间件 M 正在修改每个请求的会话字典（[编写您自己的中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/#process-request)）：

> 在 Django 决定执行哪个视图之前，每个请求都会调用 process_request()。

即使您正在修改每个请求的会话，但每个用户（同一浏览器上的同一访问者）应该只有一行。如果同一访问者发出多个请求，则应在每个请求上**更新**其相应的会话行（因为您的中间件“M”）。不会为同一访问者创建额外的行，但会在新访问者访问您的网站时创建新行。来自 Django 文档：

> 考虑数据库后端会发生什么。当用户登录时，Django 会在 django_session 数据库表中添加一行。每次会话数据更改时，Django 都会更新此行。如果用户手动注销，Django 会删除该行。但是，如果用户没有注销，则该行永远不会被删除。文件后端也会发生类似的过程。

如果您在**DB 会话**表中发现了很多行，那么您可能有需要清除[的过期会话（清除会话存储](https://docs.djangoproject.com/en/dev/topics/http/sessions/#clearing-the-session-store)）

> Django 不提供过期会话的自动清除。因此，定期清除过期会话是您的工作。为此，Django 提供了一个清理管理命令：clearsessions。建议定期调用此命令，例如作为每日 cron 作业。

在这种情况下，您应该调用[clearsessions 命令](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-clearsessions)：

```
django-admin.py clearsessions 
```

您应该设置一个 cron 作业来定期调用此命令并清除过期的会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:42:26.637

从[文档](https://docs.djangoproject.com/en/dev/topics/http/sessions/#when-sessions-are-saved)：

> **保存会话时**
> 
> 默认情况下，Django 仅在会话被修改时才保存到会话数据库中——也就是说，如果它的任何字典值已被分配或删除：

# math - 数学 - 如何改变函数的值，就好像它们被旋转了指定的角度一样

> ID：15481494
> 
> 赞同：0
> 
> 时间：2013-03-18T16:09:59.097
> 
> 标签：math, rotation

我想知道是否有一种数学方法（肯定有！）来旋转由多项式方程制成的曲线。

例如，我有一个多项式`x^3 + 2x^2 + 1 = 0`，如果我从该多项式绘制一条曲线，它平行于 x 轴（或多或少 - 它是一条曲线 :)。所以我有`x`值和`y`对应于`x`值的值，因为`y = f(x)`. 因此，在计算了某个范围的所有值之后，我将拥有 2D 数组，其中键号为`x`，值为`y`。
我应该如何转换`x`'s 和`y`'s 以获得值，就好像所有坐标系都会顺时针移动（例如）10度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:13:08.600

应用[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)。也就是说，对于每个`(x, y)`，计算

```
new_x = x * cos(theta) - y * sin(theta);
new_y = x * sin(theta) + y * cos(theta); 
```

在您的示例中（顺时针旋转 10 度），`theta`等于 -10 度。您可能需要将其转换为弧度。

# java - 获取当前手机的电话号码

> ID：15481496
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:10:02.280
> 
> 标签：java, android

我正在尝试获取当前手机的电话号码，并且我使用了此代码（我已经在清单中拥有权限）：

```
TelephonyManager mTelephonyMgr;    
mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);     

String phoneNumber = mTelephonyMgr.getLine1Number(); 
```

我在android模拟器中尝试了这段代码，它工作正常并给了我一个号码（我猜是模拟器的电话号码），

但是，当我在手机（galaxy s2）上尝试此代码时，它返回了一个空字符串。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:13:49.783

[getLine1Number()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getLine1Number%28%29)不保证返回电话号码。仅当您设备中的 SIM 卡上存储了该号码时，它才有效。

您可以通过访问`Settings -> About -> Status`并查看电话号码是否可用来检查它是否存在。如果不是，那么您的运营商不会将号码保留在 SIM 卡上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:13:58.397

来源：[读取设备电话号码抛出 NULLPointerException](https://stackoverflow.com/questions/11534534/android-reading-device-phone-number-throws-nullpointerexception)

在印度一些运营商，返回的这个电话号码是存储在 SIM 卡的 MSISDN 上的，一些运营商没有填写。所以它返回空尝试与其他 SIM 卡。

的[文档](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getLine1Number%28%29)说，`getLine1Number()`如果数字“不可用”，此方法将返回 null，但它没有说明数字何时可能不可用。

# jquery - 什么是替代 jQuery 工具的好库？

> ID：15481499
> 
> 赞同：3
> 
> 时间：2013-03-18T16:10:07.543
> 
> 标签：jquery, jquery-tools

最近的[jQuery 工具被严重忽视了。](http://jquerytools.org/)[在github](https://github.com/jquerytools/jquerytools)上进行了一些很棒的更新，但这还不够。从 jQuery 1.9 开始，[覆盖插件已损坏](https://stackoverflow.com/questions/14923301/uncaught-typeerror-cannot-read-property-msie-of-undefined-jquery-tools)。很遗憾，因为我喜欢这个库给你的控制权，无论是对 javascript 还是样式。

对我来说，jQuery UI 和 jQuery mobile 不是选项，它们的样式是一场噩梦，使用主题滚轮来模拟我已经编写的样式表是多余且烦人的。

我在很多项目中使用[范围输入滑块](http://jquerytools.org/documentation/rangeinput/index.html)、[可滚动](http://jquerytools.org/documentation/scrollable/index.html)和[叠加。](http://jquerytools.org/documentation/overlay/index.html)有人对与 jQuery 保持同步的库有什么建议吗？谢谢。

编辑 - 可能重复。我的搜索没有找到[这个答案](https://stackoverflow.com/questions/5561409/jquery-tools-alternatives/5958269#5958269)。

# c# - 如何编写用于将分隔字符串转换为列表的通用扩展方法？

> ID：15481504
> 
> 赞同：9
> 
> 时间：2013-03-18T16:10:26.310
> 
> 标签：c#, .net, linq, list, type-conversion

我们经常需要将值由某个字符分隔的字符串转换为列表。我想编写一个通用扩展方法，将字符串转换为指定类型的列表。这是我到目前为止所拥有的：

```
 public static List<T> ToDelimitedList<T>(this string value, string delimiter)
    {
        if (value == null)
        {
            return new List<T>();
        }

        var output = value.Split(new string[] { delimiter }, StringSplitOptions.RemoveEmptyEntries);
        return output.Select(x => (T)x).ToList();
    } 
```

但我得到一个错误。

> 无法将类型“字符串”转换为类型“T”。

有没有更好的方法来做到这一点，或者我是否需要为不同类型的列表和 do`Convert.ToInt32()`等创建多个扩展方法？

## 更新

我正在尝试做这样的事情：

```
var someStr = "123,4,56,78,100";
List<int> intList = someStr.ToDelimitedList<int>(","); 
```

或者

```
var someStr = "true;false;true;true;false";
List<bool> boolList = someStr.ToDelimitedList<bool>(";"); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T16:14:24.733

[`Convert.ChangeType`](http://msdn.microsoft.com/en-us/library/cytax8kf.aspx)将适用于原始和许多框架类型（假设默认解析规则足够好）：

```
return output.Select(x => (T) Convert.ChangeType(x, typeof(T)))
             .ToList(); 
```

如果您需要它来为您自己的自定义类型工作，您必须让它们实现[`IConvertible`](http://msdn.microsoft.com/en-sg/library/system.iconvertible.aspx)接口。

请记住，这不够复杂，无法使用自定义转换规则，也不够强大，无法正确处理故障（除了引发异常并使整个操作失败）。如果您需要对此的支持，请提供一个接受[`TypeConverter`](http://msdn.microsoft.com/en-sg/library/system.componentmodel.typeconverter.aspx)或转换委托的重载（如 mike z 的回答）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T16:14:59.377

没有将字符串转换为任意类型的内置方法`T`。您的方法必须接受某种委托：

```
public static List<T> ToDelimitedList<T>(this string value, string delimiter, Func<string, T> converter)
{
    if (value == null)
    {
        return new List<T>();
    }

    var output = value.Split(new string[] { delimiter }, StringSplitOptions.RemoveEmptyEntries);
    return output.Select(converter).ToList();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-18T16:12:05.213

好像你可以使用`String.Split`and `Enumerable.Select`？

```
var list = "1,2,3".Split(",").Select(s => int.Parse(s)); 
```

但是，如果您必须进行扩展，请尝试此...

```
public static List<T> ParseDelimitedList<T>(this string value, string delimiter, Func<string, T> selector)
{
    if (value == null)
    {
        return new List<T>();
    }

    var output = value.Split(new string[] { delimiter }, StringSplitOptions.RemoveEmptyEntries);
    return output.Select(selector).ToList();
}

var list = "1,2,3".ParseDelimitedList(",", s => int.Parse(s)); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-18T16:13:54.230

这不是 LINQ 的完美任务吗？

您可以执行以下操作：

```
"1,2,3,4,5".Split(',').Select(s => Convert.ToInt32(s)).ToList(); 
```

您可以根据您的情况更改**通用委托。** `Select()`

# sql-server - 连接两个表后的 SQL 更新

> ID：15481505
> 
> 赞同：13
> 
> 时间：2013-03-18T16:10:32.220
> 
> 标签：sql-server

我是 SQL 新手，使用 Microsoft SQL Server Management Studio。

我正在尝试编写一个在两个表连接后执行更新的 SQL 语句。

我有两张桌子：`myTable1`和`myTable2`。两者共享一个领域`MyID`，这将是我加入的领域。`myTable1`包含一个名为 的列`BitToUpdate`。MyTable2 包含一个名为`BitToCheck`.

我想设置`BitToUpdate`为`myTable1`1，其中`BitToCheck`in`myTable2`也是 1。

这是我所拥有的：

```
SELECT M.MyID, BitToUpdate, BitToCheck
INTO #temp_table
FROM myTable1 as T1
LEFT JOIN myTable2 as T2
ON M.MyId = PO.MyId 
```

所以首先我尝试加入这两个表`myTable1`和`myTable2`它们的 ID，并将结果存储在一个临时表中。

接下来，我想更新`BitToUpdate`为 1，其中`BitToCheck`1。

所以要在临时表中做到这一点，我有：

```
UPDATE #temp_table
SET 
    `BitToUpdate` = 1
WHERE
    `BitToCheck` = 1 
```

这将`BitToUpdate`成功更新#temp_table。但是，当我对 进行选择时`myTable1`，我发现它`BitToUpdate`没有改变。我想这是有道理的，因为 #temp_table 并不是真正的“指针”......

但是，处理这种加入和更新的正确方法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-18T16:17:57.147

您不需要在`LEFT JOIN`此处使用 a，因为您正在检查表 2 中的条件，因此`INNER JOIN`此处应该更好。

```
UPDATE T1
SET T1.BitToUpdate = 1
FROM myTable1 T1
INNER JOIN myTable2 T2
    ON T1.MyId = T2.MyId
WHERE T2.BitToCheck = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T16:14:11.743

您在第一个查询中所做的是更新名为`#temp`. 更新永远不会进入实际表`myTable1`或`mayTable2`. 要在加入其他表时更新记录，请尝试以下操作：

```
UPDATE T1
SET T1.BitToUpdate = 1
FROM myTable1 as T1
LEFT JOIN myTable2 as T2 (ON T1.MyId = T2.MyId)
WHERE T2.BitToCheck = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:15:22.077

```
--SELECT M.MyID, BitToUpdate, BitToCheck
--INTO #temp_table
update t1
  set t1.BitToUpdate = 1
FROM myTable1 as T1
LEFT JOIN myTable2 as T2
ON t1.MyId = t2.MyId
where t2.bittocheck = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:16:40.470

```
UPDATE T1
SET BitToUpdate=1
FROM myTable1 T1
LEFT JOIN myTable2 T2
ON T1.MyId=T2.MyId
WHERE T2.BitToCheck=1 
```

# scheme - 为什么 (quote '"foo") 在 Scheme 中是有效的语法？

> ID：15481508
> 
> 赞同：1
> 
> 时间：2013-03-18T16:10:36.030
> 
> 标签：scheme

为什么`(quote '"foo")`要通过 Scheme 解释器？根据 Scheme 中表达式的构造方式，它在语法上应该是多余的或错误的。`quote`每当一个人想要使用一个符号而不认为它是一个变量并且字符串**不是** [有效的符号](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-7.html#node_sec_4.2.4)时使用，那么为什么运算符的缩写在`quote`字符串前缀时是有效的？奇怪的是`(quote '"foo")`回报`(quote "foo")`。*冗余？*

`(symbol? '"foo")`评估另一个奇怪的实验`#f`，以证明引用的字符串仍然不是符号*（如果引用在语句中以这种方式工作）*。那么，`'`字符串上的忽略还是在其他地方有某种用途？我正在使用鸡计划。

*有点微不足道，但同时有点令人难以置信。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:16:27.587

如[规范](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html)中所述：

> `(quote <datum>)`计算为由（参见第 4.3 节）表示的基准值。此表示法用于包括常量。

以上不排除字符串的引用，实际上该部分中的示例之一就是这个：

```
'"abc" => "abc" 
```

由此可见，这也是有效的：

```
''"abc" => ''"abc" 
```

# paypal - 贝宝沙盒帐户空白

> ID：15481509
> 
> 赞同：5
> 
> 时间：2013-03-18T16:10:38.693
> 
> 标签：paypal, paypal-sandbox

**我通过 PayPal 沙箱（在[http://developer.paypal.com/](http://developer.paypal.com/)创建）创建的帐户是零余额且没有信用卡，无论我在创建帐户时设置了什么**。

这将导致： 在付款页面上，要求我为帐户输入信用卡 没有贝宝余额（通过登录贝宝沙箱进行测试）。

我尝试创建多个帐户，其中几个帐户余额为`$3,000`美元，一个帐户设置为信用卡，另一个帐户设置为贝宝，并且始终使用 Visa 的信用卡类型。它们总是被创建为空白。

**这是与 PayPal 相关的问题，还是我没有正确创建沙盒帐户？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:52:47.350

我们能够重现此问题，PayPal 正在努力解决它。解决此问题后，我会尽快回复。带来不便敬请谅解。

谢谢，

# jquery - id/class 的 jQuery 第 n 项

> ID：15481510
> 
> 赞同：15
> 
> 时间：2013-03-18T16:10:38.723
> 
> 标签：jquery

我想使用 id 选择器：

```
$("#id") 
```

有没有办法只对页面上具有该 ID 的第 n 个元素执行此操作？IE

```
$("#id:n") 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-18T16:11:23.343

页面中只能有一个具有给定 id 的元素。

从[HTML 规范](http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.id)：

> 文档中不能有多个元素具有相同的 id 值。

现在假设您想在页面中获取具有给定类的第 n 个元素，您可以使用[eq](http://api.jquery.com/eq/)：

```
$('.myclass').eq(index) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T16:11:54.623

你可以这样做：

```
$("#id:eq(n)") 
```

但就像@dystroy 的回答一样，它应该只有一个页面中的 1 个 id，所以你最好使用类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T16:12:56.743

您可以使用`:eq(n)`选择器获取第 n 个项目，但 id 应该是唯一的。

您应该使用该`class`属性对相似的元素进行分组。

# javascript - 重置 tinyMce 内容

> ID：15481512
> 
> 赞同：2
> 
> 时间：2013-03-18T16:10:44.950
> 
> 标签：javascript, tinymce

我正在尝试重置 tinymce 内容。

一开始有一些'A内容'。用户将其更改为一些“B 内容”，但他不想保存它，因此他可以单击“取消”按钮，整个内容回到“A”版本。

内容是较早保存的文本，因此它不是恒定的。如何将 tinyMce 文本重置为原始文本？html:

```
<div id="someDiv">Content A</div> 
```

很高兴看到这样的事情。如果内容被修改，取消按钮会将内容重置为原始内容：

```
if($('#someDiv').tinymce().isDirty()) {:
    $('#someDiv').tinymce().reset();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:53:02.057

这很容易做到。

您需要将此（使用[设置参数](http://www.tinymce.com/wiki.php/Configuration:setup)）添加到您的配置中：

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onInit.add(function(ed, evt) {
          ed.init_content = ed.getContent();
      });
   }
}); 
```

在 buttonclick 上，您调用以下命令来重置编辑器内容

```
var ed = tinymce.get('your_editor_id');
ed.setContent(ed.init_content); 
```

**编辑**- 对于 tinymce 4.x，附加编辑器事件的语法已经改变，现在是：

```
tinymce.init({
    ...
    setup: function (ed) {
        ed.on('init', function () {
            ...
        });
    }
}); 
```

# c++ - 系统访问冲突异常：试图读取或写入受保护的内存

> ID：15481515
> 
> 赞同：0
> 
> 时间：2013-03-18T16:10:49.133
> 
> 标签：c++, winapi

我的应用程序有 CAN Dll 程序，它是单独使用的。现在我已将 Drivers 程序包含在我的应用程序中，但我遇到了这个错误`System Access Violation Exception:Attempted to read or write protected memory`。错误有什么用？我附上了引发此错误的 Dll 代码和应用程​​序代码。

CAN Dll 代码

```
int receive_data(unsigned char *data_output, int *MsgId, XLportHandle g_xlPortHandle){
    XLstatus xlStatus, xlStatus_new;
    XLevent xlEvent;
    unsigned int msgsrx=RECEIVE_EVENT_SIZE;
    char *local_data ="11111111";
    DWORD status;

    xlStatus_new = xlSetNotification(g_xlPortHandle, &h, 1);

    WaitForSingleObject(h,1);
    xlStatus = XL_SUCCESS;

    while(!xlStatus){
        msgsrx = RECEIVE_EVENT_SIZE;
        xlStatus = xlReceive(g_xlPortHandle, &msgsrx, &xlEvent);---------->Here is the error
        if ( xlStatus!=XL_ERR_QUEUE_IS_EMPTY ) {
            memcpy(data_output,xlEvent.tagData.msg.data,8);
            *MsgId = xlEvent.tagData.msg.id;
            return 0;
        }

        else{
            return XL_ERR_QUEUE_IS_EMPTY;
        }
    }
} 
```

所以这个程序成功构建并且在执行它时我得到了错误

```
Receive thread quit Unexpectedly
system Access violation Exception:Attempted to read or write protected memory.This is often an indication that other memory is corrupt at
xlreceive(int32,Uint32*,s_xl_event*)
at receive_data(Byte*data_output,int32*MsgId,Int32 g_xlPortHandle). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-10T09:28:12.270

由于缺少 XLevent 结构的初始化，我遇到了相同/类似的错误。

这可以通过初始化列表来实现：

```
XLevent xlEvent = {0}; 
```

或者，如果您已经在使用动态内存管理，则 memset 可以解决问题：

```
XLevent xlEvent;
memset(&xlEvent, 0, sizeof(xlEvent)); 
```

这些是部分等效的（输出将是相同的）。有关更多信息，请查看此线程： [struct {0} 和 memset 0 之间有什么区别](https://stackoverflow.com/questions/14031727/what-is-the-difference-between-struct-0-and-memset-0)

# android - 每秒发送和接收许多意图

> ID：15481516
> 
> 赞同：3
> 
> 时间：2013-03-18T16:10:51.480
> 
> 标签：android, android-intent

发送和接收是否有任何缺点，比如说每秒 5-10 个意图？我有一个线程每秒接收几个包，并且必须通知每个包的活动。我希望这两个组件是独立的，即类不应该持有对另一个对象的引用。所以我打算为每个包发送广播意图并在活动类中接收它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:16:56.163

我想只要您确保您的程序*永远不会*被阻止，这应该不是问题。确保在并行线程中运行所有内容。

不要使用 AsyncTask，据我所知，Android 有 128 个线程池限制。那将在几秒钟内填满。

# java - Java / Groovy 泛型类型推断

> ID：15481519
> 
> 赞同：2
> 
> 时间：2013-03-18T16:10:59.747
> 
> 标签：java, generics, groovy, type-inference

我正在编写在 JDK6 下运行的 Groovy (1.8.8) 代码，似乎以下内容是合法的：

```
ConcurrentMap<Foo, Bar> statsRegistry = new ConcurrentHashMap<>() 
```

为什么允许省略右侧的类型？这是一个新的 Groovy 功能​​，还是 Java 6 也允许这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:21:22.887

“菱形运算符”（类型推断）是在 Groovy 1.8 中引入的，请参阅[发行说明的这个项目](http://groovy.codehaus.org/Groovy+1.8+release+notes#Groovy18releasenotes-Diamondoperator)，并且 Groovy 1.8 与 JDK6 配合得很好。

# ios - UINavigationBar 比它必须要小

> ID：15481520
> 
> 赞同：2
> 
> 时间：2013-03-18T16:11:02.723
> 
> 标签：ios, objective-c, uinavigationbar

我正在开发一个应用程序，我有一个登录/注销过程。当用户单击退出按钮时，我希望将用户带到主屏幕。为此，我在应用程序委托中创建了以下方法：

```
- (void) restartAppWhenLogOut{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    WelcomViewController *welcomeViewController = [[WelcomViewController alloc]init];
    self.navController = [[UINavigationController alloc] initWithRootViewController:welcomeViewController];
    [self.window setRootViewController:navController];
    [self.window makeKeyAndVisible];
} 
```

当用户单击“注销”按钮时，我称之为：

```
[[UIApplication sharedApplication].delegate restartAppWhenLogOut]; 
```

它工作正常，除了一件事。UINavigationBar 比它应该的要小！这是它的外观截图：

![在此处输入图像描述](../Images/54131209d9788b8a1c391a312864c8af.png)

UINavigationBar 应该填充一条小黑线...

知道为什么会这样吗？

========================================编辑========== ==============================

`David M.`我删除了一条评论中告诉我要做的新窗口创建，但它仍然失败：

```
[self.navController popToRootViewControllerAnimated:NO];
WelcomViewController *welcomeViewController = [[WelcomViewController alloc]init];
self.navController = [[UINavigationController alloc] initWithRootViewController:welcomeViewController];
[self.window setRootViewController:navController]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:37:39.013

我试图找出错误..但没有发现..所以，我建议您尝试手动设置导航栏..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:35:42.230

禁止创建新窗口：[“要更改应用显示的内容，您可以更改窗口的根视图；不要创建新窗口。”](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html) UIKit 不打算以这种方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:22:41.343

遵循`json`建议，这是我在`viewDidLoad`UINavigationBar 问题的视图控制器中所做的：

```
[self.navigationController.navigationBar setFrame:CGRectMake(0, 20, 320, 44)]; 
```

我希望它有帮助！

# python - 如何将不同类型的数据从文件导入 Python Numpy 数组？

> ID：15481523
> 
> 赞同：16
> 
> 时间：2013-03-18T16:11:11.033
> 
> 标签：python, numpy

假设我有一个文件`myfile.txt`包含：

```
1   2.0000  buckle_my_shoe
3   4.0000  margery_door 
```

**如何将文件中的数据作为 int、float 和 string 导入 numpy 数组？**

我的目标是：

```
array([[1,2.0000,"buckle_my_shoe"],
[3,4.0000,"margery_door"]]) 
```

我一直在玩以下无济于事：

```
a = numpy.loadtxt('myfile.txt',dtype=(numpy.int_,numpy.float_,numpy.string_)) 
```

编辑：另一种方法可能是使用 ndarray 类型并在之后进行转换。

```
b = numpy.loadtxt('myfile.txt',dtype=numpy.ndarray)

    array([['1', '2.0000', 'buckle_my_shoe'],
       ['3', '4.0000', 'margery_door']], dtype=object) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T16:20:47.523

使用[`numpy.genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)：

```
import numpy as np
np.genfromtxt('filename', dtype= None)
# array([(1, 2.0, 'buckle_my_shoe'), (3, 4.0, 'margery_door')], 
#       dtype=[('f0', '<i4'), ('f1', '<f8'), ('f2', '|S14')]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T16:17:00.800

[Pandas](http://pandas.pydata.org/)可以为您做到这一点。您可以使用的功能的文档在[这里](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.from_csv.html)。

假设您的列是制表符分隔的，这应该可以解决问题（改编自[这个问题](https://stackoverflow.com/questions/9652832/python-pandas-how-do-i-load-a-tsv-file-into-a-pandas-dataframe)）：

```
df = DataFrame.from_csv('myfile.txt', sep='\t')
array = df.values # the array you are interested in 
```

# android - 如何在 Android 4.1 中以编程方式接听/结束通话？

> ID：15481524
> 
> 赞同：53
> 
> 时间：2013-03-18T16:11:11.997
> 
> 标签：android, telephony

我正在编写一个 android 应用程序，我需要在其中接听来电，做一些工作，然后结束通话。在谷歌搜索之后，我可以找到两种不同的方法来实现这一点，这两种方法都不适用于最新版本的 Android，特别是在 4.1 之后的 Jelly Bean。

I.) 在“android.intent.action.PHONE_STATE”的广播接收器中使用 Java 反射访问“com.android.internal.telephony.ITelephony”。下面的示例代码可以在数百篇相关帖子中找到：

```
public class PhoneCallReceiver extends BroadcastReceiver {
 Context context = null;
 private static final String TAG = "Phone call";
 private ITelephony telephonyService;

@Override
 public void onReceive(Context context, Intent intent) {
  if (!intent.getAction().equals("android.intent.action.PHONE_STATE")) 
    return;

  Log.v(TAG, "Receving....");
  TelephonyManager telephony = (TelephonyManager) 
  context.getSystemService(Context.TELEPHONY_SERVICE);  
  try {
      Log.v(TAG, "Get getTeleService...");
      Class c = Class.forName(telephony.getClass().getName());
      Method m = c.getDeclaredMethod("getITelephony");
      m.setAccessible(true);
      telephonyService = (ITelephony) m.invoke(telephony);
      telephonyService.silenceRinger();
      Log.v(TAG, "Answering Call now...");
      telephonyService.answerRingingCall();
      Log.v(TAG, "Call answered...");
      //telephonyService.endCall();
  } catch (Exception e) {
   e.printStackTrace();
   Log.e(TAG,
           "FATAL ERROR: could not connect to telephony subsystem");
   Log.e(TAG, "Exception object: " + e);
  }
 }
} 
```

这段代码的问题是

```
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" /> 
```

需要此方法才能工作，并且此权限已从 android v 2.3 定义为“仅适用于系统应用程序”。简而言之，普通用户应用程序无法再在清单文件中定义此权限。

II.) 另一种方法是模拟推送耳机挂钩，使 Android 接听电话。这是通过广播“Intent.ACTION_MEDIA_BUTTON”来完成的，如下面的代码所示。

```
public class PhoneCallReceiver extends BroadcastReceiver {
 Context context = null;
 private static final String TAG = "Phone call";

 @Override
 public void onReceive(Context context, Intent intent) {
     if (!intent.getAction().equals("android.intent.action.PHONE_STATE")) 
         return;

     String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
     if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
         String number = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);

         Intent answer = new Intent(Intent.ACTION_MEDIA_BUTTON);
         answer.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
         context.sendOrderedBroadcast(answer, null);
         Log.d(TAG, "Answered incoming call from: " + number);
     }   
     return;
 } 
} 
```

此方法一直有效到 Android 4.1，之后 android 已限制用户应用程序广播“Intent.ACTION_MEDIA_BUTTON”。

所以我的结论是，目前我们无法在 Android 4.1 或更高版本中实现这一点。

有没有其他人找到任何其他解决方案或解决这个问题的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T18:23:55.523

这适用于 Android 2.2 到 4.0，现在在将 try catch 添加到最后一行后，它适用于 4.1.2 和 4.2 坦率地说不知道它是如何工作的，但它对我有用。

```
Log.d(tag, "InSecond Method Ans Call");
// froyo and beyond trigger on buttonUp instead of buttonDown
Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);
buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
sendOrderedBroadcast(buttonUp, "android.permission.CALL_PRIVILEGED");

Intent headSetUnPluggedintent = new Intent(Intent.ACTION_HEADSET_PLUG);
headSetUnPluggedintent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
headSetUnPluggedintent.putExtra("state", 0);
headSetUnPluggedintent.putExtra("name", "Headset");
try {
    sendOrderedBroadcast(headSetUnPluggedintent, null);
} catch (Exception e) { 
    e.printStackTrace();
} 
```

这在 Android 4.1.2 中对我有用，并且我已经在 4.2 上进行了测试。这仍然会给出一个已处理的异常。

**编辑结束通话**

希望这可以帮助所有寻找接听和结束通话的整体解决方案的人。

```
/**
 * Reject button click listener will reject the incoming call.
 */
private class RejectCallOnClickListener implements OnClickListener {
    @Override
    public void onClick(View v) {
        Log.d(tag, "OnRejectButton: " + "Reject OnClick");
        ignoreCall();
        exitCleanly();
    }
}

/**
 * ignore incoming calls
 */
private void ignoreCall() {
    if (USE_ITELEPHONY)
        ignoreCallAidl();
    else
        ignoreCallPackageRestart();
}
/**
 * AIDL/ITelephony technique for ignoring calls
 */
private void ignoreCallAidl() {
    try {
        // telephonyService.silenceRinger();

        telephonyService.endCall();
    } catch (RemoteException e) {
        e.printStackTrace();
        Log.d(tag, "ignoreCall: " + "Error: " + e.getMessage());

    } catch (Exception e) {
        e.printStackTrace();
        Log.d(tag, "ignoreCall" + "Error: " + e.getMessage());

    }
}
/**
 * package restart technique for ignoring calls
 */
private void ignoreCallPackageRestart() {
    ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    am.restartPackage("com.android.providers.telephony");
    am.restartPackage("com.android.phone");
}
/**
 * cleanup and exit routine
 */
private void exitCleanly() {
    unHookReceiver();
    this.finish();

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-08T15:16:56.193

我的应用程序已使用以下代码接听电话约 6 个月：

```
Intent i = new Intent(Intent.ACTION_MEDIA_BUTTON);
i.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP,
            KeyEvent.KEYCODE_HEADSETHOOK));
context.sendOrderedBroadcast(i, null); 
```

我已经在 2.2 到 4.2.2 的 Android 版本上对此进行了测试。在我的测试 na 4.2.2 设备中，我没有看到 SecurityException 广播“Intent.ACTION_MEDIA_BUTTON”，也没有看到来自 Play 商店的崩溃报告表明正在发生此类异常。

我会说这并不总是有效。它不适用于 HTC 设备，因为 HTC 设备有一个 HeadsetObeserver 来监听有线耳机的实际插入。如果没有此事件（当前是第三方应用程序广播的 SecurityException），则 HeadsetHook KeyEvent 将被忽略。

前面的答案是误导。以下代码块什么都不做：

```
Intent headSetUnPluggedintent = new Intent(Intent.ACTION_HEADSET_PLUG);
headSetUnPluggedintent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
headSetUnPluggedintent.putExtra("state", 0);
headSetUnPluggedintent.putExtra("name", "Headset");
try {
    sendOrderedBroadcast(headSetUnPluggedintent, null);
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

除了生成一个 SecurityException 并捕获它。

在代码工作的其他答案中，这是因为 KeyEvent.KEYCODE_HEADSETHOOK 正在广播。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-28T13:44:09.433

**尝试** 使用此答案以编程方式结束通话。它对我来说工作正常。

```
try {

    String serviceManagerName = "android.os.ServiceManager";
    String serviceManagerNativeName = "android.os.ServiceManagerNative";
    String telephonyName = "com.android.internal.telephony.ITelephony";

    Class telephonyClass;
    Class telephonyStubClass;
    Class serviceManagerClass;
    Class serviceManagerStubClass;
    Class serviceManagerNativeClass;
    Class serviceManagerNativeStubClass;

    Method telephonyCall;
    Method telephonyEndCall;
    Method telephonyAnswerCall;
    Method getDefault;

    Method[] temps;
    Constructor[] serviceManagerConstructor;

    // Method getService;
    Object telephonyObject;
    Object serviceManagerObject;

    telephonyClass = Class.forName(telephonyName);
    telephonyStubClass = telephonyClass.getClasses()[0];
    serviceManagerClass = Class.forName(serviceManagerName);
    serviceManagerNativeClass = Class.forName(serviceManagerNativeName);

    Method getService = // getDefaults[29];
            serviceManagerClass.getMethod("getService", String.class);

    Method tempInterfaceMethod = serviceManagerNativeClass.getMethod(
            "asInterface", IBinder.class);

    Binder tmpBinder = new Binder();
    tmpBinder.attachInterface(null, "fake");

    serviceManagerObject = tempInterfaceMethod.invoke(null, tmpBinder);
    IBinder retbinder = (IBinder) getService.invoke(serviceManagerObject, "phone");
    Method serviceMethod = telephonyStubClass.getMethod("asInterface", IBinder.class);

    telephonyObject = serviceMethod.invoke(null, retbinder);
    //telephonyCall = telephonyClass.getMethod("call", String.class);
    telephonyEndCall = telephonyClass.getMethod("endCall");
    //telephonyAnswerCall = telephonyClass.getMethod("answerRingingCall");

    telephonyEndCall.invoke(telephonyObject);

} catch (Exception e) {
    e.printStackTrace();
    Log.error(DialerActivity.this,
            "FATAL ERROR: could not connect to telephony subsystem");
    Log.error(DialerActivity.this, "Exception object: " + e);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-05T12:03:26.327

作为该线程的结论，这里是适用于 Android 4.2.2 的代码。

--> 通过模拟耳机挂钩的推送并将广播保持在 try-catch 中，如@PravinDodia 在上面的线程中提到的那样来应答呼叫。（观察到在 catch 中抛出并处理了一个异常，无论如何调用都会被应答。所以我想我们可以忽略这个异常并继续生活，就好像什么都没发生一样！）

--> 使用 ITelephony 断开呼叫。

```
public class PhoneCallReceiver extends BroadcastReceiver {
 Context context = null;
 private static final String TAG = "Phone call";

 @Override
 public void onReceive(Context context, Intent intent) {
     if (!intent.getAction().equals("android.intent.action.PHONE_STATE")) 
         return;
     else {
         String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

         if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
             answerPhoneHeadsethook(context, intent);
             return;
         }
         else if(state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)){
             Log.d(TAG, "CALL ANSWERED NOW!!");
             try {
                    synchronized(this) {
                        Log.d(TAG, "Waiting for 10 sec ");
                        this.wait(10000);
                    }
                }
                catch(Exception e) {
                    Log.d(TAG, "Exception while waiting !!");
                    e.printStackTrace();
                }
             disconnectPhoneItelephony(context);
             return;
         }
         else {
             Log.d(TAG, "ALL DONE ...... !!");
         }
     }  
 }

 public void answerPhoneHeadsethook(Context context, Intent intent) {
     String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
     if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
         String number = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
         Log.d(TAG, "Incoming call from: " + number);
         Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);             
         buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
         try {
             context.sendOrderedBroadcast(buttonUp, "android.permission.CALL_PRIVILEGED");
             Log.d(TAG, "ACTION_MEDIA_BUTTON broadcasted...");
         }
         catch (Exception e) {
             Log.d(TAG, "Catch block of ACTION_MEDIA_BUTTON broadcast !");
         }

         Intent headSetUnPluggedintent = new Intent(Intent.ACTION_HEADSET_PLUG);
         headSetUnPluggedintent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
         headSetUnPluggedintent.putExtra("state", 1); // 0 = unplugged  1 = Headset with microphone 2 = Headset without microphone
         headSetUnPluggedintent.putExtra("name", "Headset");
         // TODO: Should we require a permission?
         try {
             context.sendOrderedBroadcast(headSetUnPluggedintent, null);
             Log.d(TAG, "ACTION_HEADSET_PLUG broadcasted ...");
         }
         catch (Exception e) {
                // TODO Auto-generated catch block
                //e.printStackTrace();
                Log.d(TAG, "Catch block of ACTION_HEADSET_PLUG broadcast");
                Log.d(TAG, "Call Answered From Catch Block !!");
         }
         Log.d(TAG, "Answered incoming call from: " + number);  
    }
    Log.d(TAG, "Call Answered using headsethook");
 }

 public static void disconnectPhoneItelephony(Context context) {
     ITelephony telephonyService;
     Log.v(TAG, "Now disconnecting using ITelephony....");
      TelephonyManager telephony = (TelephonyManager) 
      context.getSystemService(Context.TELEPHONY_SERVICE);  
      try {
          Log.v(TAG, "Get getTeleService...");
          Class c = Class.forName(telephony.getClass().getName());
          Method m = c.getDeclaredMethod("getITelephony");
          m.setAccessible(true);
          telephonyService = (ITelephony) m.invoke(telephony);
          //telephonyService.silenceRinger();
          Log.v(TAG, "Disconnecting Call now...");
          //telephonyService.answerRingingCall();
          //telephonyService.endcall();
          Log.v(TAG, "Call disconnected...");
          telephonyService.endCall();
      } catch (Exception e) {
       e.printStackTrace();
       Log.e(TAG,
               "FATAL ERROR: could not connect to telephony subsystem");
       Log.e(TAG, "Exception object: " + e);
      }
 }
} 
```

至少断开功能有效，我们知道它是如何工作的。所以那些想要开发呼叫限制应用程序的人可以继续。对于像我这样想接听电话的人，我想我们现在可以使用它，只希望它不会在下一个版本中停止工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-25T10:25:21.590

**试试这个 ：**

```
Intent buttonDown = new Intent(Intent.ACTION_MEDIA_BUTTON);
buttonDown.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK));
context.sendOrderedBroadcast(buttonDown, "android.permission.CALL_PRIVILEGED");

// froyo and beyond trigger on buttonUp instead of buttonDown
Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);
buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
context.sendOrderedBroadcast(buttonUp, "android.permission.CALL_PRIVILEGED"); 
```

**在AndroidManifest.xml**文件中添加权限为

```
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-17T11:22:21.070

ITelephony 方法在 4.4 上不起作用，我发现耳机/媒体按钮方法仍然允许在挂断前响起相当长的铃声。

这篇 chaps 博客文章展示了我在 4.4.2 Galaxy s4 和 HTC one mini 上测试过的一种新方法，它挂断速度更快，而且您也不会收到未接来电条目。

[http://aprogrammersday.blogspot.co.uk/2014/05/disconnect-block-drop-calls-android-4.html](http://aprogrammersday.blogspot.co.uk/2014/05/disconnect-block-drop-calls-android-4.html)

该技术使用如下运行时 exec，显然您可能需要为某些设备使用不同的数字。

```
public class HangupPhoneCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if (TelephonyManager.EXTRA_STATE_RINGING.equals(intent.getStringExtra(TelephonyManager.EXTRA_STATE))) {

            Executor eS = Executors.newSingleThreadExecutor();
            eS.execute(new Runnable() {
                @Override
                public void run() {
                    Runtime runtime = Runtime.getRuntime();
                    try {
                        Log.d(TAG, "service call phone 5 \n");
                        runtime.exec("service call phone 5 \n");
                    } catch (Exception exc) {
                        Log.e(TAG, exc.getMessage());
                    }
                }
            });

            return;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-01T05:27:57.607

使用 IT Telephony 断开呼叫不适用于 Samsung S Duos 等某些设备。但是你仍然可以让铃声保持沉默:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-01T06:51:00.390

要在旧版本中结束通话，然后 9.0 使用这个：

```
TelephonyManager tm = (TelephonyManager)context.getSystemService(TELEPHONY_SERVICE);

Method m1 = null;
try {
    m1 = tm.getClass().getDeclaredMethod("getITelephony");
} catch (NoSuchMethodException e) {
    e.printStackTrace();
}
m1.setAccessible(true);
Object iTelephony = null;
try {
    iTelephony = m1.invoke(tm);
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (InvocationTargetException e) {
    e.printStackTrace();
}

Method m3 = null;
try {
    m3 = iTelephony.getClass().getDeclaredMethod("endCall");
} catch (NoSuchMethodException e) {
    e.printStackTrace();
}

try {
    m3.invoke(iTelephony);
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (InvocationTargetException e) {
    e.printStackTrace();
} 
```

& 馅饼

```
TelecomManager telecomManager = (TelecomManager) context.getSystemService(Context.TELECOM_SERVICE);
if (telecomManager != null) {
    return telecomManager.endCall();
}

Make sure your compile SDK version is 28 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-27T09:10:41.360

```
private void PhoneControl(int nControl) {
    if(nControl == PHONE_END_CALL) { // End call, all Android version
        try {
            TelecomManager telecomManager = (TelecomManager) context.getSystemService(Context.TELECOM_SERVICE);
            if (telecomManager != null) {
                telecomManager.endCall();
            }
        }catch (Exception e) {}
        try {
            TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            if(tm == null)
                return;
            tm.getClass().getMethod("endCall").invoke(tm);
            bIsEnding = true;
        } catch (Exception e) {

            /* Do Nothing */ }
    }

    if(nControl == PHONE_ACCEPT_CALL) { // Accept phone call
//      if(!bCallAccepted) { // Call déjà accepté => pas d'action (évite double action)
            bCallAccepted = true;
            if(Build.VERSION.SDK_INT >= 26) { // Pris en charge Android >= 8.0
                if(context.checkSelfPermission("android.permission.ANSWER_PHONE_CALLS") == PackageManager.PERMISSION_GRANTED) {
                    TelecomManager tm = (TelecomManager) context.getSystemService(Context.TELECOM_SERVICE);
                    if(tm != null)
                        tm.acceptRingingCall();
                }
            }
            if(Build.VERSION.SDK_INT >= 23 && Build.VERSION.SDK_INT < 26) { // Hangup in Android 6.x and 7.x
                MediaSessionManager mediaSessionManager =  (MediaSessionManager) context.getSystemService(Context.MEDIA_SESSION_SERVICE);
                if(mediaSessionManager != null) {
                    try {
                        List<MediaController> mediaControllerList = mediaSessionManager.getActiveSessions
                                (new ComponentName(context, NotificationReceiverService.class));

                        for (MediaController m : mediaControllerList) {
                            if ("com.android.server.telecom".equals(m.getPackageName())) {
                                m.dispatchMediaButtonEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK));
                                m.dispatchMediaButtonEvent(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
                                break;
                            }
                        }
                    } catch (Exception e) {
//                      Toast.makeText(instance, "sdfsdf123123"+e, Toast.LENGTH_LONG).show();
                        Intent answerCalintent = new Intent(context, AcceptCallActivity.class);
                        answerCalintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                                Intent.FLAG_ACTIVITY_CLEAR_TASK  |
                                Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
                        context.startActivity(answerCalintent);
                        /* Do Nothing */ }
                }

//                new Thread(new Runnable() {
//
//                    @Override
//                    public void run() {
//                        try {
//                            Runtime.getRuntime().exec("input keyevent " +
//                                     Integer.toString(KeyEvent.KEYCODE_HEADSETHOOK));
//                        } catch (IOException e) {
//                             // Runtime.exec(String) had an I/O problem, try to fall back
//                             String enforcedPerm = "android.permission.CALL_PRIVILEGED";
//                             Intent btnDown = new Intent(Intent.ACTION_MEDIA_BUTTON).putExtra(
//                             Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN,
//                                      KeyEvent.KEYCODE_HEADSETHOOK));
//                             Intent btnUp = new Intent(Intent.ACTION_MEDIA_BUTTON).putExtra(
//                                        Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP,
//                                        KeyEvent.KEYCODE_HEADSETHOOK));
//
//                             context.sendOrderedBroadcast(btnDown, enforcedPerm);
//                             context.sendOrderedBroadcast(btnUp, enforcedPerm);
//                         }
//                     }
//
//                  }).start();
            }
            if(Build.VERSION.SDK_INT < 23) { // Prend en charge jusqu'à Android 5.1
                try {
                    if(Build.MANUFACTURER.equalsIgnoreCase("HTC")) { // Uniquement pour HTC
                        AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
                        if(audioManager!=null && !audioManager.isWiredHeadsetOn()) {
                            Intent i = new Intent(Intent.ACTION_HEADSET_PLUG);
                            i.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
                            i.putExtra("state", 0);
                            i.putExtra("name", "Orasi");
                            try {
                                context.sendOrderedBroadcast(i, null);
                            } catch (Exception e) { /* Do Nothing */ }
                        }
                    }
                    Runtime.getRuntime().exec("input keyevent " +
                            Integer.toString(KeyEvent.KEYCODE_HEADSETHOOK));
                } catch (Exception e) {
                    // Runtime.exec(String) had an I/O problem, try to fall back
                    String enforcedPerm = "android.permission.CALL_PRIVILEGED";
                    Intent btnDown = new Intent(Intent.ACTION_MEDIA_BUTTON).putExtra(
                            Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN,
                                    KeyEvent.KEYCODE_HEADSETHOOK));
                    Intent btnUp = new Intent(Intent.ACTION_MEDIA_BUTTON).putExtra(
                            Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP,
                                    KeyEvent.KEYCODE_HEADSETHOOK));

                    context.sendOrderedBroadcast(btnDown, enforcedPerm);
                    context.sendOrderedBroadcast(btnUp, enforcedPerm);
                }
            }
//       }
    }
}

<!--Incoming call state Listen-->
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <!--    Store Data in Device/Shared pref-->
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <!--Get Incoming Number-->
    <uses-permission android:name="android.permission.READ_CALL_LOG" />

    <!--Answer call-->
    <uses-permission android:name="android.permission.ANSWER_PHONE_CALLS" />
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
    <uses-permission
        android:name="android.permission.MODIFY_PHONE_STATE"
        tools:ignore="ProtectedPermissions" />

    <!--End Calll-->
    <uses-permission android:name="android.permission.CALL_PHONE" />

    public class NotificationReceiverService extends NotificationListenerService {
        public NotificationReceiverService() {
        }
    }

<service
    android:name=".notifications.NotificationReceiverService"
    android:enabled="true"
    android:exported="true"
    android:permission="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE">

    <intent-filter>
        <action android:name="android.service.notification.NotificationListenerService" />
    </intent-filter>
</service>

if(Build.VERSION.SDK_INT >= 26) { // Permission necessaire
    if(checkSelfPermission("android.permission.ANSWER_PHONE_CALLS") != PackageManager.PERMISSION_GRANTED) {
        String szPermissions[] = {"android.permission.ANSWER_PHONE_CALLS"};
        requestPermissions(szPermissions, 0);
    }
}
if(Build.VERSION.SDK_INT < 26 && Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP_MR1 )
{ // Permission pour Android 6.x et 7.x
    ContentResolver contentResolver = getContentResolver();
    String enabledNotificationListeners = Settings.Secure.getString(contentResolver, "enabled_notification_listeners");
    String packageName = getPackageName();
    if (enabledNotificationListeners == null || !enabledNotificationListeners.contains(packageName)) {
        Intent intent2 = null;
        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP_MR1) {
            intent2 = new Intent(Settings.ACTION_NOTIFICATION_LISTENER_SETTINGS);
        }
        startActivity(intent2);

        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                //Do something after 100ms
                Intent intent=new Intent(MainActivity.this, Main2Activity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(intent);

            }
        }, 1000);
    }
} 
```

# jpa-2.0 - 手动编写 JPA 2 元模型类

> ID：15481529
> 
> 赞同：0
> 
> 时间：2013-03-18T16:11:21.420
> 
> 标签：jpa-2.0, eclipselink

我想为我的一个实体类手动编写一个元模型类。
手动编写元模型类是否可能/简单（只有 3 个奇异字段）？
我知道有工具可以生成它，但对于一个简单的测试，我更喜欢手工编写它。将不胜感激以下课程的示例：

```
public class MyEntity {
  private Integer val;
  public Integer getVal()...
  public void setVal(Integer val):...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:13:02.907

对于这样一个简单的实体，元模型也非常少：

```
package same.as.myentity;

import javax.persistence.metamodel.SingularAttribute;
import javax.persistence.metamodel.StaticMetamodel;

@StaticMetamodel(MyEntity.class)
public class MyEntity_ {
  public static volatile SingularAttribute<MyEntity, Integer> val;
} 
```

[Hibernate](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/metamodel.html)提供了很好的文档。它直接取自 JPA 2.0 规范。

# c++ - 扩大积分类型？

> ID：15481532
> 
> 赞同：3
> 
> 时间：2013-03-18T16:11:23.217
> 
> 标签：c++, integer-promotion

想象一下你有这个功能：

```
void foo(long l) { /* do something with l */} 
```

现在您在呼叫站点这样称呼它：

```
foo(65); // here 65 is of type int 
```

为什么，（从技术上讲）当您在函数声明中指定您期望 a`long`并且您只传递一个没有`L`后缀的数字时，它是否被视为 a `int`？

现在，我知道这是因为 C++ 标准是这样说的，但是，技术上的原因是什么，它`65`不仅被提升为类型`long`，从而为我们节省了忘记`L`后缀以使其明确地变成 long 的愚蠢错误？

我在 C++ 标准中发现了这一点：

**4.7 积分转换[conv.integral]**

> 5 作为积分促销允许的转换不包括在积分转换集中。

我可以想，缩小转换不是隐式进行的，但这里的目标类型显然比源类型更宽。

**编辑**

这个问题是基于我之前看到[的一个问题](https://stackoverflow.com/questions/15480927/va-arg-64bit-issue/15481101)，当你没有指定`L`后缀时，它的行为很有趣。 [示例](http://liveworkspace.org/code/23yOdN$22)，但也许它是 C 的东西，而不是 C++？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:29:53.907

在 C++ 中，对象和值有一个类型，这与你如何使用它们无关。然后，当您使用它们时，如果您需要不同的类型，它将被适当地转换。

链接问题中的问题是可变参数不是类型安全的。它假定您传递了正确的类型，并且您将它们解码为它们是什么。在处理调用者时，编译器不知道被调用者将如何解码每个参数，因此它不可能为您转换它们。实际上，可变参数与转换为 a`void*`并转换回不同的类型一样类型安全，如果你做对了，你就会得到你推入的东西，如果你做错了，你就会得到垃圾。

另请注意，在这种特殊情况下，内联编译器*有*足够的信息，但这只是一般家庭中的一个小案例，如果错误。考虑`printf`函数族，根据第一个参数的内容，每个参数都被处理为不同的类型。尝试在语言级别修复这种情况会导致不一致，在某些情况下，编译器会做正确或错误的事情，并且用户不清楚什么时候可以预期，包括它可以做的事实如果在重构过程中函数定义被移动并且不能用于内联，或者如果函数的逻辑发生变化并且参数被处理为基于某个先前参数的一种或另一种类型，那么今天是正确的，明天是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:23:58.457

此实例中的函数确实接收 a `long`，而不是`int`。如果可能，编译器会自动将任何参数转换为所需的参数类型而不会丢失任何信息（如此处）。这是函数原型很重要的主要原因之一。

它本质上与表达式类似`(1L + 1)`- 因为整数`1`不是正确的类型，所以它被隐式转换为 a`long`来执行计算，结果是 a `long`。

如果您传入`65L`此函数调用，则无需进行类型转换，但没有实际区别 -`65L`无论哪种方式都可以使用。

虽然不是 C++，但这是 C99 标准的相关部分，它也解释了 var args 注释：

> 如果表示被调用函数的表达式具有包含原型的类型，则参数将隐式转换为相应参数的类型，就像通过赋值一样，将每个参数的类型作为其声明的非限定版本类型。函数原型声明器中的省略号会导致参数类型转换在最后一个声明的参数之后停止。默认参数提升是在尾随参数上执行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:27:04.100

> 为什么，（技术上）当你在你的函数声明中指定你期望一个 long 并且你只传递一个没有`L`后缀的数字时，它是否被视为一个`int`？

因为文字的类型仅由文字的形式指定，而不是使用它的上下文。对于整数，`int`除非该类型的值太大，或者使用后缀指定另一种类型。

> 现在，我知道这是因为 C++ 标准是这样说的，但是，这个 65 不只是被提升为类型的技术原因是什么，`long`从而为我们节省了忘记`L`后缀以使其`long`显式成为 a 的愚蠢错误？

`long`无论您是否明确指定该类型，该值都应提升，因为该函数被声明为采用 type 的参数`long`。如果这没有发生，也许您可​​以举一个失败的代码示例，并描述它是如何失败的？

更新：您给出的示例将文字传递给采用无类型省略号 ( `...`) 参数的函数，而不是类型`long`参数。在这种情况下，函数调用者不知道预期的类型，并且只应用*默认参数提升*。具体来说，一个类型的值在通过省略号参数传递时`int`仍然是一个。`int`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:28:46.050

我们必须对类型有一个标准的含义，因为对于较低级别的应用程序，类型真的很重要，尤其是对于整数类型。低级运算符（例如 bitshift、add 等）依赖于输入的类型来确定溢出位置。((65 << 2) 整数为 260 (0x104)，但单个字符为 4！(0x004))。有时你想要这种行为，有时你不想要。作为程序员，您只需要能够始终知道编译器将要做什么。因此，设计决策是让人类明确声明其常量的整数类型，其中“未修饰”作为最常用的类型整数。

编译器会在编译时自动“转换”您的常量表达式，因此传递给函数的有效值很长，但由于这个原因，在转换之前它被认为是一个 int。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T16:24:03.353

C标准规定：

> “整数常量的类型是可以表示其值的相应列表中的第一个。”

在 C89 中，此列表为：

> `int, long int, unsigned long int`

C99 将该列表扩展为包括：

> `long long int, unsigned long long int`

因此，当您编译代码时，文字 65 适合 int 类型，因此它的类型相应地是 int。然后在调用函数时将 int 提升为 long。

例如，如果 sizeof(int) == 2，而您的文字类似于 64000，则值的类型将是 long（假设 sizeof(long) > sizeof(int)）。

后缀用于覆盖默认行为并强制指定的文字值是某种类型。当整数提升成本很高时（例如，作为紧密循环中方程的一部分），这可能特别有用。

# php - PDO 搜索引擎故障

> ID：15481535
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:11:23.667
> 
> 标签：php, mysql, pdo

我正在尝试制作一个高级搜索引擎，您可以在其中按名字、姓氏、邮编、城市、州、电话、手机和电子邮件进行搜索。

我已经设法让它按名字搜索，但是你必须像其他任何东西一样正确输入名字，我拿出除了名字搜索之外的所有东西来找到我的问题，我还没有找到它，在这里是我正在尝试转换为 PDO 的搜索代码的 MySQL 版本。

MySQL：

```
<?php
    //This is only displayed if they have submitted the form 

    if ($searching =="yes")  {
        echo "<h2>Results</h2><p>";
        //If they did not enter a search term we give them an error 

        if ($find == "")
        if ($f == "")
        if ($info == "")
        if ($zip == "")
        if ($state == "")
        if ($email == "")

        {
            echo "<p>You forgot to enter a search term";
            exit;
        }

        // Otherwise we connect to our Database 
        mysql_connect("xxx", "xxxx", "xxx") or die(mysql_error());
        mysql_select_db("xxxx") or die(mysql_error());
        // We preform a bit of filtering 

        //Now we search for our search term, in the field the user specified 
$data = mysql_query("SELECT * FROM users WHERE fname 
LIKE '%" . mysql_real_escape_string($find)      . "%' AND lname 
LIKE '%" . mysql_real_escape_string($f)         . "%' AND info 
LIKE '%" . mysql_real_escape_string($info)      . "%' AND zip 
LIKE '%" . mysql_real_escape_string($zip)       . "%' AND state
LIKE '%" . mysql_real_escape_string($state)     . "%' AND email 
LIKE '%" . mysql_real_escape_string($city)  . "%' AND city
LIKE '%" . mysql_real_escape_string($email)     . "%'");
?>

<?php

 //And we display the results 
 while($result = mysql_fetch_array( $data ))
  { 
  echo "<hr><br>First Name:&nbsp;"; 
 echo $result['fname'];
 echo "<br>Last Name:&nbsp;"; 
 echo $result['lname']; 
 echo "<br>Home Phone:&nbsp;"; 
 echo $result['info']; 
 echo "<br>Cell Phone:&nbsp;"; 
 echo $result['cp']; 
 echo "<br>City:&nbsp;"; 
 echo $result['city']; 
 echo "<br>State:&nbsp;"; 
  echo $result['state']; 
 echo "<br>Zip:&nbsp;"; 
 echo $result['zip']; 
 echo "<br>Email:&nbsp;"; 
echo $result['email']; 
 echo "<br><hr>"; 

 } 

 //This counts the number or results - and if there wasn't any it gives them a little message explaining that 
 $anymatches=mysql_num_rows($data); 
 if ($anymatches == 0) 
 { 
 echo "Sorry, but we can not find an entry to match your query<br><br>"; 
 } 
 //And we remind them what they searched for 
 echo "<b>Searched For:
        </b> " .$find; 
  }
 ?> 
```

现在这是我的 PDO 版本：

```
<?
    $dsn = 'mysql:host=xxx;dbname=xxx;charset=utf8';
    $opt = array(
        PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    );
    $pdo = new PDO($dsn,'xxx','xxx', $opt);

$stmt = $pdo->prepare("SELECT * FROM users WHERE fname= ?");

if ($stmt->execute(array($fname)));
    while ($row = $stmt->fetch()) {

        print $row['fname'] . "<br>";
        print $row['lname'] . "\t<br>";
        print $row['info'] . "\n<br>";
        print $row['cp'] . "\n<br>";
        print $row['state'] . "\n<br>";
        print $row['city'] . "\n<br>";
        print $row['zip'] . "\n<br>";
        print $row['email'] . "\n<br>";

  }

    ?> 
```

欢迎和赞赏提示、建议和评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:30:08.703

我猜你会构建一个 sql-string 并使用参数。
您不会将用户留空的 sql 字段包含在您的 sql 字段中。

```
// **EDIT** check if there's any user-input...

if (!isset($_POST['fname']) && !isset($_POST['lname'])) { // add all your input-fields 

    echo "<p>please enter a search term!</p>";
    echo '<a href="search.php">try again</a>";
    exit();
}

    $sql = '';
    $bind = array();

if (strlen($_POST[‘firstname‘]) > 0) { // assuming your form-method is "post"
   $sql .= 'AND fname LIKE :fname ';
   $bind['fname'] = '%'.$_POST['firstname'].'%';
}

if (strlen($_POST['lastname']) > 0) 
    $sql .= 'AND lname LIKE :lname ';
    $bind['lname'] = '%'.$_POST['lastname'].'%';
}
// ...
// do this will all of your input-fields...

$sql = 'SELECT * FROM users WHERE ' . trim($sql, 'AND') . ' ORDER BY lname';

$stmt = $pdo->prepare($sql);
$stmt->execute(array($bind));
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

// go ahead and display your results with foreach... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:14:37.843

您最大的问题是您使用`AND`而不是`OR`在您的`WHERE`子句中。将其更改为：

```
SELECT *
FROM `table`
WHERE `name` LIKE '%string%'
OR `zip` LIKE '%string%'
// AND SO ON 
```

# perl - DBIx::Class::ResultSet 中列名的抽象

> ID：15481536
> 
> 赞同：2
> 
> 时间：2013-03-18T16:11:24.640
> 
> 标签：perl, catalyst, dbix-class

我正在开发一个[`DBIx::Class`](http://search.cpan.org/~abraxxa/DBIx-Class-0.08209/lib/DBIx/Class/ResultSet.pm)用于访问 MySQL 数据库的 Catalyst 应用程序。该应用程序对文件执行数据质量检查。这些文件被加载到一个表中`FileContent`：

```
 FILE_ID LINE_NUMBER FOO BAR BAZ
 -----------------------------------
 1       1           A   99  Blah
 1       2           B   11  Blargh
 1       3           A   4   Sproing
 1       4           B   7   Sproing
 1       5           B   10  Doink 
```

然后我有另一个表 ，`Format`它定义了每一列的验证操作：

```
 COL_ORDER COL_NAME VALIDATION
 1         FOO      regex:/^[AB]$/
 2         BAR      unique_number
 3         BAZ      regex:/\S/ 
```

我想要做的是`FileContent`逐行遍历给定文件，将所有规则`Format`应用于每一行：

```
my @lines  = $c->model('DB::FileContent')->search({file_id => 1});
my @format = $c->model('DB::Format')->search();

foreach my $line (@lines)
{
    foreach my $column (@format)
    {
        #Get the field matching this column from $line.
        #e.g. for first $column get $line->foo()  
    }
} 
```

但是，我不确定如何最好地从与格式中的当前列匹配的行中有效地获取列。访问列的正常方式是通过方法，例如`$line->foo`. `foo`但是当是变量时我该怎么办？

我不认为我想这样做：

```
eval "$line->${$column->col_name}"; 
```

我知道 get_column，但这对于从一行中获取单个值是否有效？

```
$line->get_column($column->col_name) 
```

根据另一个表中的值检索列的最有效方法是什么？我可以使用列名或列位置。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:09:16.830

尝试首先将所有验证规则放入 hashref（或哈希）中，并且 - 最重要的是 - 确保 FileContent 项通过[DBIx::Class::ResultClass::HashRefInflator](http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/ResultClass/HashRefInflator.pm)膨胀到 hashrefs 中。这使得在您循环浏览项目时访问项目中的字段更加方便。

像这样：

```
#------------------------------------------------------------------------------------------
# get all formats into a hashref
#------------------------------------------------------------------------------------------

my $format = $c->model('DB::Format')->search({}, { order_by => ['COL_ORDER'] } );
my @col_names = $format->get_column('COL_NAME')->all;
# @col_names now contains qw/FOO BAR BAZ/

my $formats;
@{$formats}{@col_names} = $format->get_column('VALIDATION')->all;

#------------------------------------------------------------------------------------------
# create an iterator over DB::FileContent, and make items inflate to hashrefs 
#------------------------------------------------------------------------------------------

my $file_content  = $c->model('DB::FileContent')->search({file_id => 1});
$file_content->result_class('DBIx::Class::ResultClass::HashRefInflator');
# this ensures that every item inflates into a hashref

# this way you can iterate over items, and don't have to put them all into an array 
while (my $hashref = $file_content->next) {
    # put relevant field values into an array
    my @values = @{$hashref}{@col_names};
} 
```

# jquery - 我怎样才能简化这个？

> ID：15481538
> 
> 赞同：0
> 
> 时间：2013-03-18T16:11:36.707
> 
> 标签：jquery, html

所以我想把它简化成一个函数，但我不知道怎么做。看来我应该能够从点击 id 中提取变量，然后在隐藏的 id 选择器中使用它。

```
$(document).ready(function(){
      $(".hidden").animate({opacity:'0'});
    $("#click1").click(function(){
        $(".hidden").animate({opacity:'0'});
        $("#hidden1").animate({opacity:'0'});
        $("#hidden1").animate({opacity:'1'},"slow");    
        $("#hidden1").stop();
        });  
    $("#click2").click(function(){
        $(".hidden").animate({opacity:'0'});
        $("#hidden2").animate({opacity:'0'});
        $("#hidden2").animate({opacity:'1'},"slow");    
        $("#hidden2").stop();
        });  
    $("#click3").click(function(){
        $(".hidden").animate({opacity:'0'});
        $("#hidden3").animate({opacity:'0'});
        $("#hidden3").animate({opacity:'1'},"slow");    
        $("#hidden3").stop();
        });  
    $("#click4").click(function(){
        $(".hidden").animate({opacity:'0'});
        $("#hidden4").animate({opacity:'0'});
        $("#hidden4").animate({opacity:'1'},"slow");    
        $("#hidden4").stop();
        });  
    });

    <p id="click1">hover</p>
    <p id="click2">hover</p>
    <p id="click3">hover</p>
    <p id="click4">hover</p>

    <p id="hidden1" class="hidden">hidden 1</p>
    <p id="hidden2" class="hidden">hidden 2</p>
    <p id="hidden3" class="hidden">hidden 3</p>
    <p id="hidden4" class="hidden">hidden 4</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:17:31.750

就像是

```
$(".hidden").css({opacity:'0'});
$("p[id^=click]").click(function(){
    var sufix = this.id.substring(5);
    var el = $("#hidden" + sufix);
    $(".hidden").stop().not(el).animate({opacity:'0'});
    el.animate({opacity:'1'},"slow");
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/eaSWK/3/)

您如果想要更好的性能使用`$('#click1, #click2, #click3, #click4')`而不是`$("p[id^=click]")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:17:39.000

给你所有的 hover-p 相同的类，例如`clickable`.

我还没有测试对 的调用`index`，但它应该可以正常工作或类似......

```
$(document).ready(function(){
      $(".hidden").animate({opacity:'0'});
      $(".clickable").click(function(){
          $(".hidden").animate({opacity:'0'});
          var idx = "#hidden" + $(".clickable").index(this);
          $(idx).animate({opacity:'0'});
          $(idx).animate({opacity:'1'},"slow");    
          $(idx).stop();
      });  
 }); 
```

编辑：或使用 Arun P Johny 的选择器加分：`p[id^=click]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:18:45.100

将标签拆分为一个共享类`click`和一个唯一标签，比如`index`. 然后侦听共享类的元素通常被单击。

在点击回调中，您可以使用`$(this)`. 从中我们`index`使用`attr('index')`. 鉴于我们只能将动画应用于相关的隐藏对象。

因此，首先使用 获取所有隐藏对象，`$(".hidden")`然后应用过滤器以找到具有正确`index`标签的元素`.filter('[index="' + number + '"]')`。

HTML

```
<p class="click" index="1">hover</p>
<p class="click" index="2">hover</p>
<p class="click" index="3">hover</p>
<p class="click" index="4">hover</p>

<p class="hidden" index="1">hidden 1</p>
<p class="hidden" index="2">hidden 2</p>
<p class="hidden" index="3">hidden 3</p>
<p class="hidden" index="4">hidden 4</p> 
```

JavaScript

```
$(document).ready(function(){

    $('.hidden').animate({ opacity:'0' });

    $('.click').click(function(){
        $('.hidden').animate({ opacity:'0' });

        var number = $(this).attr("index");

        $('.hidden').filter('[index="' + number + '"]')
               .animate({ opacity:'0' })
               .animate({ opacity:'1' },"slow")
               .stop();
    });
}); 
```

此外，您可以通过链接在同一对象上执行的函数来缩短代码，如上所示。

这是一个包含上面代码的[工作小提琴](http://jsfiddle.net/SHcXQ/)。（只是为了好玩，我也做了一个[风格化的版本](http://jsfiddle.net/SHcXQ/6/)。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:25:07.083

使用`data`属性。它易于使用，清晰易懂且有效。

```
<p class="click" data-id="1">hover</p>
<p class="click" data-id="2">hover</p>
<p class="click" data-id="3">hover</p>
<p class="click" data-id="4">hover</p>

<p class="hidden" data-id="1">hidden 1</p>
<p class="hidden" data-id="2">hidden 2</p>
<p class="hidden" data-id="3">hidden 3</p>
<p class="hidden" data-id="4">hidden 4</p>

<script>
    function get_by_data(selector, data_string, data_value) {
        return $(selector + '[data-' + data_string + '="' + data_value + '"]');
    }
    $(document).ready(function() {
        $('.hidden').animate({opacity: '0'});
        $('.click').click(function() {
            var id = $(this).data('id');
            var $hidden = get_by_data('.hidden', 'id', id);
            $('.hidden').animate({opacity: '0'});
            $hidden.animate({opacity:'1'},'slow').stop();
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-18T16:14:41.593

你可以使用for，从1到4。然后在里面你可以有

```
$("#click" + index).click(function(){
    $(".hidden").animate({opacity:'0'});
    $("#hidden" + index).animate({opacity:'0'});
    $("#hidden" + index).animate({opacity:'1'},"slow");    
    $("#hidden" + index).stop();
    }); 
```

# javascript - jQuery检查是否存在并具有价值

> ID：15481539
> 
> 赞同：82
> 
> 时间：2013-03-18T16:11:41.207
> 
> 标签：javascript, jquery

我有以下示例：

```
<input type="text" class="input1" value="bla"/> 
```

有没有办法检查这个元素是否存在并在一个语句中具有值？或者，至少，任何更短的时间

```
if($('.input1').length > 0 && $('input1').val() != '') 
```

只是对一英里长的条件感到沮丧。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-03-18T16:14:33.090

如果输入不存在，则输入将没有值。尝试这个...

```
if($('.input1').val()) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-18T16:13:30.370

你可以这样做：

```
if($('.input1').length && $('.input1').val().length) 
```

`length`当值为`false`时，在一个条件下计算为`0`。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-18T16:13:46.727

你可以这样做：

```
jQuery.fn.existsWithValue = function() { 
    return this.length && this.val().length; 
}

if ($(selector).existsWithValue()) {
        // Do something
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-18T16:37:22.743

只是为了它，我在 jQuery 代码中跟踪了这一点。.val() 函数目前从[attributes.js](https://github.com/jquery/jquery/blob/master/src/attributes.js)的第 165 行开始。这是相关部分，带有我的注释：

```
val: function( value ) {
    var hooks, ret, isFunction,
        elem = this[0];

        /// NO ARGUMENTS, BECAUSE NOT SETTING VALUE
    if ( !arguments.length ) {

        /// IF NOT DEFINED, THIS BLOCK IS NOT ENTERED. HENCE 'UNDEFINED'
        if ( elem ) {
            hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

            if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
                return ret;
            }

            ret = elem.value;

            /// IF IS DEFINED, JQUERY WILL CHECK TYPE AND RETURN APPROPRIATE 'EMPTY' VALUE
            return typeof ret === "string" ?
                // handle most common string cases
                ret.replace(rreturn, "") :
                // handle cases where value is null/undef or number
                ret == null ? "" : ret;
        }

        return;
    } 
```

因此，您将得到`undefined`or`""`或`null`-- 所有这些在 if 语句中评估为 false。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-01T21:19:00.757

您可以创建自己的**自定义选择器** `:hasValue`，然后使用它来查找、过滤或测试任何其他 jQuery 元素。

```
jQuery.expr[':'].hasValue = function(el,index,match) {
  return el.value != "";
}; 
```

然后你可以找到这样的元素：

```
var data = $("form input***:hasValue***").serialize(); 
```

或者测试当前元素[`.is()`](http://api.jquery.com/is/)

```
var elHasValue = $("#name").is("***:hasValue***"); 
```

```
jQuery.expr[':'].hasValue = function(el) {
  return el.value != "";
};

var data = $("form input:hasValue").serialize();
console.log(data)

var elHasValue = $("[name='LastName']").is(":hasValue");
console.log(elHasValue)
```

```
label { display: block; margin-top:10px; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<form>
  <label>
    First Name:
    <input type="text" name="FirstName" value="Frida" />
  </label>

  <label>
    Last Name:
    <input type="text" name="LastName" />
  </label>
</form>
```

**延伸阅读**：

*   [使 jQuery`:contains`不区分大小写](https://css-tricks.com/snippets/jquery/make-jquery-contains-case-insensitive/)
*   [制作你自己的自定义 jQuery 选择器](https://www.sitepoint.com/make-your-own-custom-jquery-selector/)
*   [探索 jQuery 选择器，第 3 部分](http://www.informit.com/articles/article.aspx?p=1946162&seqNum=2)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-08T22:49:42.023

```
if($('#user_inp').length > 0 && $('#user_inp').val() != '')
{

    $('#user_inp').css({"font-size":"18px"});
    $('#user_line').css({"background-color":"#4cae4c","transition":"0.5s","height":"2px"});
    $('#username').css({"color":"#4cae4c","transition":"0.5s","font-size":"18px"});

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-26T18:05:33.253

我会做这样的事情：`$('input[value]').something`。这会找到所有有价值的输入并对它们进行操作。

# c++ - XML::CanonicalizeXML Perl 包安装在 Windows 上

> ID：15481543
> 
> 赞同：1
> 
> 时间：2013-03-18T16:11:51.877
> 
> 标签：c++, xml, windows, perl, compiler-errors

我是 Perl 的新手，我开始从事一个需要一些模块的项目。其中之一是[`XML::CanonicalizeXML`](https://WWW.metacpan.org/module/XML%3a%3aCanonicalizeXML)似乎无法安装。

我正在使用 Strawberry Perl 和 CPAN 进行包处理。

我尝试从下载的 tar.gz 文件中手动编译包，但出现了与 g++ 编译中似乎发生的相同的错误：

```
 CPAN.pm: Building S/SJ/SJZASADA/XML-CanonicalizeXML-0.05.tgz

'xml2-config' is not recognized as an internal or external command,
operable program or batch file.
'xml2-config' is not recognized as an internal or external command,
operable program or batch file.
Checking if your kit is complete...
Looks good
'xml2-config' is not recognized as an internal or external command,
operable program or batch file.
'xml2-config' is not recognized as an internal or external command,
operable program or batch file.
MakeMaker (v6.64)
Warning (non-fatal): Target 'dynamic' depends on targets in skipped section 'dyn
amic_lib'
Warning (non-fatal): Target 'static' depends on targets in skipped section 'stat
ic_lib'
Writing Makefile for Mytest2::canon
Writing MYMETA.yml and MYMETA.json
Writing Makefile for XML::CanonicalizeXML
Writing MYMETA.yml and MYMETA.json
cp lib/XML/CanonicalizeXML.pm blib\lib\XML\CanonicalizeXML.pm
AutoSplitting blib\lib\XML\CanonicalizeXML.pm (blib\lib\auto\XML\CanonicalizeXML
)
cd canon && dmake
gcc -c  -I.     -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -
DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\"\"
        -DXS_VERSION=\"\"  "-IC:\strawberry\perl\lib\CORE"   canon.c
ar cr libcanon.a canon.o
rem libcanon.a
C:\strawberry\perl\bin\perl.exe C:\strawberry\perl\lib\ExtUtils\xsubpp  -typemap
 C:\strawberry\perl\lib\ExtUtils\typemap  CanonicalizeXML.xs > CanonicalizeXML.x
sc && C:\strawberry\perl\bin\perl.exe -MExtUtils::Command -e mv -- CanonicalizeX
ML.xsc CanonicalizeXML.c
Please specify prototyping behavior for CanonicalizeXML.xs (see perlxs manual)
gcc -c  -I.     -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -
DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\"0.
05\"    -DXS_VERSION=\"0.05\"  "-IC:\strawberry\perl\lib\CORE"   CanonicalizeXML
.c
CanonicalizeXML.xs: In function 'XS_XML__CanonicalizeXML_canonicalize':
CanonicalizeXML.xs:28:17: warning: passing argument 6 of 'canonicalize' from inc
ompatible pointer type [enabled by default]
canon/canon.h:2:12: note: expected 'char *' but argument is of type 'xmlChar **'

Running Mkbootstrap for XML::CanonicalizeXML ()
C:\strawberry\perl\bin\perl.exe -MExtUtils::Command -e chmod -- 644 Canonicalize
XML.bs
C:\strawberry\perl\bin\perl.exe -MExtUtils::Mksymlists \
     -e "Mksymlists('NAME'=>\"XML::CanonicalizeXML\", 'DLBASE' => 'CanonicalizeX
ML', 'DL_FUNCS' => {  }, 'FUNCLIST' => [], 'IMPORTS' => {  }, 'DL_VARS' => []);"

dlltool --def CanonicalizeXML.def --output-exp dll.exp
g++ -o blib\arch\auto\XML\CanonicalizeXML\CanonicalizeXML.dll -Wl,--base-file -W
l,dll.base -mdll -s -L"C:\strawberry\perl\lib\CORE" -L"C:\strawberry\c\lib" Cano
nicalizeXML.o  canon/libcanon.a C:\strawberry\perl\lib\CORE\libperl516.a -lmoldn
ame -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 -ladvapi32 -lshell32 -lole
32 -loleaut32 -lnetapi32 -luuid -lws2_32 -lmpr -lwinmm -lversion -lodbc32 -lodbc
cp32 -lcomctl32 dll.exp
CanonicalizeXML.o:CanonicalizeXML.c:(.text+0x118): undefined reference to `xmlIn
itParser'
CanonicalizeXML.o:CanonicalizeXML.c:(.text+0x15c): undefined reference to `xmlSt
rlen'
CanonicalizeXML.o:CanonicalizeXML.c:(.text+0x189): undefined reference to `_imp_
_xmlFree'
CanonicalizeXML.o:CanonicalizeXML.c:(.text+0x190): undefined reference to `xmlCl
eanupParser'
canon/libcanon.a(canon.o):canon.c:(.text+0x27): undefined reference to `xmlStrle
n'
canon/libcanon.a(canon.o):canon.c:(.text+0x35): undefined reference to `_imp__xm
lMalloc'
canon/libcanon.a(canon.o):canon.c:(.text+0xb3): undefined reference to `xmlParse
Memory'
canon/libcanon.a(canon.o):canon.c:(.text+0xc4): undefined reference to `__xmlLoa
dExtDtdDefaultValue'
canon/libcanon.a(canon.o):canon.c:(.text+0xd6): undefined reference to `xmlSubst
ituteEntitiesDefault'
canon/libcanon.a(canon.o):canon.c:(.text+0xf2): undefined reference to `xmlParse
Memory'
canon/libcanon.a(canon.o):canon.c:(.text+0x104): undefined reference to `xmlDocG
etRootElement'
canon/libcanon.a(canon.o):canon.c:(.text+0x13a): undefined reference to `xmlStrE
qual'
canon/libcanon.a(canon.o):canon.c:(.text+0x146): undefined reference to `xmlNode
GetContent'
canon/libcanon.a(canon.o):canon.c:(.text+0x15e): undefined reference to `xmlXPat
hNewContext'
canon/libcanon.a(canon.o):canon.c:(.text+0x194): undefined reference to `xmlXPat
hRegisterNs'
canon/libcanon.a(canon.o):canon.c:(.text+0x1ca): undefined reference to `_imp__x
mlFree'
canon/libcanon.a(canon.o):canon.c:(.text+0x1d4): undefined reference to `xmlXPat
hFreeContext'
canon/libcanon.a(canon.o):canon.c:(.text+0x1dc): undefined reference to `xmlFree
Doc'
canon/libcanon.a(canon.o):canon.c:(.text+0x1e4): undefined reference to `_imp__x
mlRealloc'
canon/libcanon.a(canon.o):canon.c:(.text+0x238): undefined reference to `xmlFree
Doc'
canon/libcanon.a(canon.o):canon.c:(.text+0x27d): undefined reference to `xmlXPat
hEvalExpression'
canon/libcanon.a(canon.o):canon.c:(.text+0x28d): undefined reference to `_imp__x
mlFree'
canon/libcanon.a(canon.o):canon.c:(.text+0x2a2): undefined reference to `xmlXPat
hFreeContext'
canon/libcanon.a(canon.o):canon.c:(.text+0x2aa): undefined reference to `xmlFree
Doc'
canon/libcanon.a(canon.o):canon.c:(.text+0x2db): undefined reference to `xmlC14N
DocDumpMemory'
canon/libcanon.a(canon.o):canon.c:(.text+0x2e7): undefined reference to `xmlXPat
hFreeObject'
canon/libcanon.a(canon.o):canon.c:(.text+0x2f3): undefined reference to `xmlFree
Doc'
canon/libcanon.a(canon.o):canon.c:(.text+0x301): undefined reference to `xmlMemo
ryDump'
canon/libcanon.a(canon.o):canon.c:(.text+0x393): undefined reference to `xmlFree
Doc'
canon/libcanon.a(canon.o):canon.c:(.text+0x435): undefined reference to `xmlFree
Doc'
canon/libcanon.a(canon.o):canon.c:(.text+0x46e): undefined reference to `_imp__x
mlFree'
canon/libcanon.a(canon.o):canon.c:(.text+0x478): undefined reference to `xmlFree
Doc'
collect2: ld returned 1 exit status
dmake.exe:  Error code 129, while making 'blib\arch\auto\XML\CanonicalizeXML\Can
onicalizeXML.dll'
  SJZASADA/XML-CanonicalizeXML-0.05.tgz
  C:\strawberry\c\bin\dmake.exe -- NOT OK
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible
Stopping: 'install' failed for 'XML::CanonicalizeXML'.
Failed during this command:
 SJZASADA/XML-CanonicalizeXML-0.05.tgz        : make NO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:35:30.987

问题是 CPAN 只下载了 xml2-config 的 UNIX Shell 脚本版本，需要将其替换为 Windows 批处理文件。如果其他人在这里需要它是：

```
@ECHO OFF

setlocal ENABLEDELAYEDEXPANSION
rem http://batcheero.blogspot.co.il/2007/06/how-to-enabledelayedexpansion.html - windows xp

SET SELFDIR=%~dp0
IF %SELFDIR:~-1%==\ SET SELFDIR=%SELFDIR:~0,-1%
set SELFDIR=%SELFDIR:\=/%

set prefix=%SELFDIR%
set exec_prefix=%prefix%
set includedir=%prefix%/include
set libdir=%exec_prefix%/lib

IF "%1"=="" GOTO usage0

rem whats the point of resettingthes flags...
rem set cflags=false
rem set libs=false

:loop

    IF "%1"=="" Exit /B 0

    IF "%1"=="--version" (
    echo 2.4.12
    Exit /B 0
    )

    IF "%1"=="--help" (
          GOTO usage0
    )

    rem the code below does: if next arg is not any known argument nor empty then the next arg is prefix value otherwise print the prefix
    IF "%1"=="--prefix" ( 
          IF "%2"=="" ( SHIFT
                        echo %prefix%) ELSE (
            IF "%2"=="--cflags" ( SHIFT
                                  echo %prefix% ) ELSE (
              IF "%2"=="--libs" ( SHIFT
                                  echo %prefix%) ELSE (
                IF "%2"=="--prefix" ( SHIFT
                                      echo %prefix%) ELSE (
                 SET /A prefix=%2
                 set exec_prefix=!prefix!
                 set includedir=!prefix!/include
                 set libdir=!exec_prefix!/lib
                 SHIFT
                 SHIFT
                )
              )
            )
          )
    )

    IF "%1"=="--cflags" (

        echo -I!includedir!/libxml2/libxml -I!includedir!/libxml2 
    SHIFT
    )

    IF "%1"=="--libs" (
        echo -L!libdir! -lxml2 -lz  -liconv -lm -Wl,-s -lwsock32 -liberty -lMsup -lMstubs 
    SHIFT
    )

    GOTO :loop

Exit /B 1

:usage0

echo Usage: xml-config [OPTION]
echo _
echo Known values for OPTION are:
echo _
echo   --prefix=DIR     change libxml prefix [default $prefix]
echo   --libs       print library linking information
echo   --cflags     print pre-processor and compiler flags
echo   --help       display this help and exit
echo   --version        output version information
Exit /B 0

:usage1

echo Usage: xml-config [OPTION]
echo _
echo Known values for OPTION are:
echo _
echo   --prefix=DIR     change libxml prefix [default $prefix]
echo   --libs       print library linking information
echo   --cflags     print pre-processor and compiler flags
echo   --help       display this help and exit
echo   --version        output version information
Exit /B 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:39:10.540

该`XML::CanonicalizeXML`模块依赖于`libxml2`. 由于`xml2-config`是`libxml2`命令，因此您似乎`libxml2`安装不正确或根本没有安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:43:49.353

它缺少必需的可执行文件。找出`xml2-config`程序安装（或放置）的位置，[并将该目录添加到您的 Windows PATH](http://www.computerhope.com/issues/ch000549.htm)中。

# xml - html AgilityPack XPath C# .net 4

> ID：15481546
> 
> 赞同：1
> 
> 时间：2013-03-18T16:12:01.750
> 
> 标签：xml, xpath, html-parsing, html-agility-pack

我必须定义 xpath 来访问第二个跨度文本，以解析加载到 AgilityPack 文档的以下名称-值 html 结构（见下文）。我会使用 xpath 和 C# 执行以下查询：

```
var valueSpan = doc.SelectNodes("//div[@class='container']/div[@class='value2' and ???]/span[2]"); 
```

问题：我不能为“第二个匹配的 div 与 class==”value2”编写 xpath 选择器。是否可以使用 xpath 选择第二个“value2”div 或者应该通过索引“容器”节点的子节点来完成（实际兄弟“value2”的索引可能会有所不同）？

```
<div class="container">
  <div class="value1">
    <span class="name">Title 1</span>
    <span class="value">some value</span>
  </div>
  <div class="value2">
    <span class="name">Title 2.1</span>
    <span class="value">some value</span>
  </div>
  <div class="value2">
    <span class="name">Title 2.2</span>
    <span class="value">some value</span>
  </div>
  <div class="value3">
    <span class="name">Title 3</span>
    <span class="value">some value</span>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:45:06.887

采用：

```
//div[@class='container']/div[@class='value2'][2] 
```

# javascript - 在新选项卡中打开一个页面并在旧窗口中加载不同的 URL

> ID：15481557
> 
> 赞同：2
> 
> 时间：2013-03-18T16:12:19.470
> 
> 标签：javascript, forms, perl, window.open

我正在使用 in 提交表单`action=abc.pl`，abc.pl 包含用于打开新选项卡并在同一页面上加载不同 URL 的代码。这是我正在做的代码（在 abc.pl 中）

```
window.open('$thisPage')
window.location.href='$nextPage'; 
```

但是`window.open`在新窗口中打开而不是新选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:17:20.647

根据 StackOverflow 上的上一个问题：[使用 JavaScript 在新选项卡（而不是新窗口）中打开 URL](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)

```
function open_in_new_tab(url )
{
  var win=window.open(url, '_blank');
  win.focus();
} 
```

或者

```
$('a').click(function() {
  $(this).attr('target', '_blank');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:18:30.840

使用第二个参数指定窗口名称：

```
window.open('page.html','newtaborsomething'); 
```

[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# c# - StreamReader 区分大小写

> ID：15481560
> 
> 赞同：1
> 
> 时间：2013-03-18T16:12:22.203
> 
> 标签：c#, streamreader, case-sensitive

我的程序当前读取一个文本文件并将其与文本框中的值进行比较，然后告诉我有多少匹配项，这目前有效。

我的问题是它区分大小写。有没有办法让它不管是大写还是小写？

这是我下面的代码：

```
if (!String.IsNullOrEmpty(CustodianEAddress.Text))
{
    for (AddressLength1 = 0; AddressLength1 < Length; AddressLength1++)
    {
        List<string> list1 = new List<string>();
        using (StreamReader reader = new StreamReader(FileLocation))
        {
            string line1;
            //max 500
            string[] LineArray1 = new string[500];

            while ((line1 = reader.ReadLine()) != null)
            {
                list1.Add(line1); // Add to list.

                if (line1.IndexOf(cust1[AddressLength1].ToString()) != -1)
                {
                    count1++;
                    LineArray1[count1] = line1;
                }
            }

            reader.Close();
            using (System.IO.StreamWriter filed = 
               new System.IO.StreamWriter(FileLocation, true))
            {
                filed.WriteLine("");
                filed.WriteLine("The email address " + 
             cust1[AddressLength1].ToString() + " was found " + count1 +
             " times within the recipient's inbox");
            }

            string count1a;
            count1a = count1.ToString();
        }
    }
}
else
{
    MessageBox.Show("Please Enter an Email Address");
} 
```

所以基本上，我需要将 in 的值`cust1[AddressLength1]`与在文本文件中的数组中找到的任何值进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:14:43.740

String.Compare() 接受一个可选参数，让您指定相等性检查是否应该区分大小写。

**为响应发布的代码而编辑**

两者的比较和索引都采用可选的枚举 StringComparison。如果您选择 StringComparison.OrdinalIgnoreCase，则将忽略大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:15:21.200

这是一种比较两个字符串而不检查大小写的快速方法：

```
string a;
string b;
string.Compare(a, b, true); 
```

这里`true`作为参数的值传递`ignoreCase`，这意味着将比较大小写字母，就好像它们都是相同的大小写一样。

**编辑：**

我已经清理了您的代码，并且还放入了比较功能。我在更改内容的地方添加了评论：

```
// Not needed: see below.  List<string> list1 = new List<string>();

using (StreamReader reader = new StreamReader(FileLocation))
{
    string line1;
    //max 500
    List<string> LineArray1 = new List<string>();

    while ((line1 = reader.ReadLine()) != null)
    {
        // list1.Add(line1); // Add to list.

        // By adding to the list, then searching it, you are searching the whole list for every single new line - you're searching through the same elements multiple times.
        if (string.Compare(line1, cust1[AddressLength1].ToString(), true) == 0)
        {
            // You can just use LineArray1.Count for this instead. count1++;
            LineArray1.Add(line1);
        }
    }

    // Not needed: using() takes care of this.  reader.Close();
    using (System.IO.StreamWriter filed =
        new System.IO.StreamWriter(FileLocation, true))
    {
        filed.WriteLine(); // You don't need an empty string for a newline.
        filed.WriteLine("The email address " +
        cust1[AddressLength1].ToString() + " was found " + LineArray1.Count +
        " times within the recipient's inbox");
    }

    string count1a;
    count1a = LineArray1.Count.ToString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:15:26.953

您是否从文件中读取的事实并不重要，比较时使用静态字符串 Comapare 函数：

```
public static int Compare(
    string strA,
    string strB,
    bool ignoreCase
) 
```

并将 true 作为最后一个参数传递。

# ruby-on-rails - AssociationTypeMismatch：期望一个模型但得到一个数组？Rails 3 嵌套表单

> ID：15481563
> 
> 赞同：2
> 
> 时间：2013-03-18T16:12:28.787
> 
> 标签：ruby-on-rails, nested-forms, type-mismatch

我有一个嵌套形式，其中还有另一个。基本上我拥有的是一堆成分，对于每种成分，我都有一个数量和单位，它存储在条目和成分之间的关​​联表中，称为 EntryIngredient。使用我的以下 JS，我可以添加动态字段，但是当我提交时，我收到 AssociationTypeMismatch 错误。不知道为什么，参数对我来说看起来不错（`"ingredients_attributes"=>{"0"=>{"name"=>"Salt", "entry_ingredients"=>{"quantity"=>"2.5", "unit"=>"tbspns"}, "_destroy"=>""}}}}`），我错过了什么？实际上，我认为这可能是因为它发送 as`entry_ingredients`而不是`entry_ingredients_attributes`，但我看不出我在第二个嵌套形式中做了什么不同。这是具有成分字段的第一个表单：

```
 <div id="ingredients">
      <p>Ingredient List:</p>
      <%= f.fields_for :ingredients, @entry.ingredients.build do |builder| %>
      <%= render 'ingredient_fields', :f => builder %>
      <% end %>
  </div>
  <div id='add_ingredient'>Add Ingredient</div>
  <div class="actions">
    <%= f.submit %> 
```

**这是 entry_ingredients 的代码：**

```
<ul id="ingredient_list">
    <li>
      <%= f.label :name %>
      <%= f.text_field :name, :class => "ingredient_field" %>
      <%= f.hidden_field :_destroy, :class => "delete_ingredient" %>
        <%= f.fields_for :entry_ingredients, @entry.entry_ingredients.build do |builder| %>
        <%= render 'entry_ingredient_fields', :f => builder %>
        <% end %>
      <%= link_to "Remove", "#", :class => "remove_fields" %>
    </li>
</ul> 
```

继承人我的 JS 用于动态添加新成分：

```
$('form').on('click', '#add_ingredient', function(){
    count = $('#ingredient_list li').length;
    field = $('#ingredient_list li').first()
        .clone()                                    //clone the first element in the list
            .find('input')                          //find all its inputs
                .val('')                            //set all input values to blank
                    .end()
                        .find($('.ingredient_field'))
                            .prop({id: 'entry_ingredients_attributes_' + count + '_name', name: 'entry[ingredients_attributes][' + count +'][name]'  })
                                .end()
                                    .find($('.delete_ingredient'))
                                        .prop({id: 'entry_ingredients_attributes_' + count + '__destroy', name: 'entry[ingredients_attributes][' + count +'][_destroy]', value: 'false'  })
                                            .end()
                                                .find($('.ingredient_quantity'))
                                                    .prop({id: 'entry_ingredients_attributes_' + count + '_entry_ingredients_quantity', name: 'entry[ingredients_attributes][' + count +'][entry_ingredients][quantity]'})
                                                        .end()
                                                            .find($('.ingredient_unit'))
                                                                .prop({id: 'entry_ingredients_attributes_' + count + '_entry_ingredients_unit', name: 'entry[ingredients_attributes][' + count +'][entry_ingredients][unit]'})
                                                                    .end();
    $('#ingredient_list').append(field);
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:18:00.303

表单助手检查模型之间的关系以确定如何提交参数。您是否包含`accepts_nested_attributes_for :entry_ingredients`在`Ingredient`模型中？

# mysql - 如何对存储在数据库中的查询运行 CONCAT

> ID：15481573
> 
> 赞同：0
> 
> 时间：2013-03-18T16:13:00.410
> 
> 标签：mysql, concat

我知道这是一个不好的例子，但我正在尝试简化事情，所以请以迂回的方式编写这段代码。假设我将查询存储在数据库中，例如

## 查询表

```
id    query
1     concat('SELECT * FROM table1 WHERE year = ', _year, 'order by name')
2     concat('SELECT * FROM table2 WHERE year = ', _year, 'order by name') 
```

* * *

我想运行以下例程

```
DECLARE _year;
SET _year= "2013";
SET @SQL = (SELECT query FROM queries WHERE id = 1);    
PREPARE stmt FROM @SQL;
EXECUTE stmt; 
```

这是我目前拥有的，但它不起作用。我正在尝试从数据库中选择一个查询，将一些变量传递给它，然后运行该查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:17:32.453

如果可以提前确定您的查询，特定参数除外，那么您可以考虑使用带有判别式的 UNION 查询。然后，使用您的查询表选择联合中的特定查询并将参数应用到它们。查询本身是在数据库的视图中定义的。

在大多数 DBMS 中，SQL 旨在不是动态的，试图颠覆这一点几乎肯定会导致性能下降和潜在的安全问题。

```
CREATE VIEW UnionView
AS SELECT *, 1 as Type, Value1 AS Param FROM Table1 
UNION ALL SELECT *, 2 as Type, Value2 AS Param FROM Table1
UNION ALL SELECT *, 3 as Type, Value3 AS Param FROM Table1;

SELECT * FROM UnionView WHERE Type = 2 AND Param = 2; 
```

有关演示行为的示例，请参见[SqlFiddle 。](http://sqlfiddle.com/#!6/d67a9/1/0)

# url - Joomla 网站网址

> ID：15481575
> 
> 赞同：0
> 
> 时间：2013-03-18T16:13:03.893
> 
> 标签：url, joomla, dns

我在 1and1 服务器上有一个网站。我的包裹上有 2 个域名；默认网址 somenumbers.websitehome.co.uk 和我的实际网址。

问题是，Joomla 在系​​统电子邮件中引用了 somoenumbers.websitehome.co.uk 而不是我的实际 URL。他们都指向同一个目录，我只是不想给我的用户一个愚蠢的 URL。

我想我已将其范围缩小到 $siteUrl 变量，但我不确定如何从这里开始。

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:45:32.967

起初我认为这听起来很像 DNS 问题 - 但后来您说您只有 1 个 Joomla 安装，并且两个域都指向该目录。

如果它们都指向同一个目录，那么两个域将显示相同的 Joomla 安装。也就是说，除非您正在检查它们来自哪里并根据它们如何到达您的站点来动态显示内容 - 但从您的评论来看，我怀疑您正在这样做。如果您将它们都指向同一个目录，则您的域的行为是预期的响应。

如果您想在同一主机上拥有 2 个站点？设置 2 个数据库（或为每个站点应用不同的前缀并使用 1 个数据库）并将每个站点设置在它自己的目录中。

调整每个域名（和子域名）的DNS指向相应的目录。

从那里，使用 .htaccess 文件和 SEF URL 删除目录的任何指示符，使其显示与站点位于根目录中一样。

这是完成您所追求的最佳方式 - 因为从它的声音来看，Joomla 正在做它应该做的事情，正确显示目录中的内容，因为两个域名都指向同一个目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:37:02.267

$siteUrl 应该留空。

# typescript - 在 Typescript 中初始化数组成员

> ID：15481578
> 
> 赞同：1
> 
> 时间：2013-03-18T16:13:09.453
> 
> 标签：typescript

如何在以下类中初始化数组成员。

```
 class EventObject {
        map:Array;
        constructor() {
            this.map = [];  // error :Cannot convert 'any[]' to  'Array'
            this.map = new Array(); // error :Cannot convert 'any[]' to  'Array'
        };
}

var obj = new EventObject();
console.log(obj.map[0]); 
```

此外，如果我将类型更改为 number[] ，我可以对其进行初始化。但是，当我检查它是否是 instanceof Array 时出现错误：

```
class EventObject {
            map:number[];
            constructor() {
                this.map = [];
                if(this.map instanceof Array)  //error here
                    alert("Type checking");
            };
} 
```

我想同时做：初始化和检查 instanceof（或 typeof）

**Javascript 数组与 Typescript 中的数组（由 '[]' 表示）**有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:33:41.843

```
map: number[]; 
```

是正确的语法。

不使用 instacenof Array 有几个原因。请参见此处：[检查对象是否为数组？](https://stackoverflow.com/questions/4775722/javascript-check-if-object-is-array)

如果要使用 instanceof，则必须将左运算符转换为：

```
var m: number[];
if (<any>m instanceof Array) {
} 
```

# selenium - Selenium RC PHPUnit 测试

> ID：15481582
> 
> 赞同：2
> 
> 时间：2013-03-18T16:13:14.543
> 
> 标签：selenium, phpunit, selenium-rc

我的测试用例因以下错误而崩溃：

```
 $this->open("/en");
        $this->type("id=LoginForm_username", "seleniumfree");
        $this->type("id=LoginForm_password", "seleniumfree");
        $this->click("name=login");
        $this->waitForPageToLoad("30000");
        $this->click("link=Calendar");
        $this->waitForPageToLoad("30000");
        $this->click("link=Add to agenda");
        $this->type("id=UserAgenda_date", "2013-10-10");
        $this->select("id=UserAgenda_time", "label=01:00");
        $note = $this->getEval("Math.floor(Math.random()*1000)").':note';
        $this->type("id=UserAgenda_note", $note);
        $this->click("name=yt0");
        sleep(5);
        try { //also tried with integer
            $this->assertEquals("2", $this->getXpathCount("//input[@value='"+ $note + "']"));
        } catch (PHPUnit_Framework_AssertionFailedError $e) {
            array_push($this->verificationErrors, $e->toString());
        }

 Invalid response while accessing the Selenium Server at 'http://localhost:4444/selenium-server/driver/':
 ERROR: Command execution failure. Please search the user group at https://groups.google.com/forum/#!forum/selenium-users for error details from the log window.  
The error message is: The expression cannot be converted to return the specified type. 
```

在 Firefox IDE 中，播放测试运行良好。还有其他方法可以按值计算输入吗？

# php - Authorize.net AIM退款交易错误3.2.33

> ID：15481583
> 
> 赞同：2
> 
> 时间：2013-03-18T16:13:20.767
> 
> 标签：php, parameters, authorize.net, authorize.net-aim

根据 authorize.net pdf 说明，我使用 AIM 参数：

"x_login" => $AimLoginID,

"x_tran_key" => $AimTransKey,

"x_version" => "3.1",

"x_delim_data" => "真",

"x_delim_char" => "|",

"x_relay_response" => "假",

"x_type" => $类型，

"x_trans_id" => $TransID,

"x_amount" => $金额，

"x_card_num" => $CCLast4,

"x_invoice_num" => $invoicenumber

在哪里

x_tran_key 是从 authorize.net 给我的原始交易 ID

type = CREDIT 因为我要退款

x_amount 等于我之前在信用卡上收取的确切金额

x_card_num 用信用卡的最后 4 位数字填充。

x_invoice_num 有我的发票号码

我收到的消息给了我一个错误。数组 ( [0] => 3 [1] => 2 [2] => 33 [3] => 需要定期计费。

这没有任何意义，因为它不是经常性计费？

一开始我在没有发票号码的情况下尝试过，但返回的错误代码告诉我我也需要给他们那个。我还尝试将参数 x_exp_date 设为 '' （我在网上看到了一个建议），但它不起作用，有相同的消息。

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:17:41.863

请检查`x_recurring_billing`- 也许它被启用为“必需”。

您需要访问您的商家界面。检查此字段是否设置为必填。只需将 FIELD 值更改为 NOT REQUIRED。

在此处查看更详细的问题说明[http://community.developer.authorize.net/t5/Integration-and-Testing/Receiving-Response-3-2-33-Recurring-Billing-is-required/td-p/718](http://community.developer.authorize.net/t5/Integration-and-Testing/Receiving-Response-3-2-33-Recurring-Billing-is-required/td-p/718)

# c++ - 根据编译时参数使方法可用

> ID：15481586
> 
> 赞同：6
> 
> 时间：2013-03-18T16:13:34.680
> 
> 标签：c++, c++11

有没有办法编译方法，取决于模板参数？我正在尝试创建一个可以处理 2、3 或更多维度的 Coordinate 类。我想将访问方法提供为`x()`,`y()`和`z()`，但我希望`z()`只有在维度大于 3 时才能访问方法。现在（如下所示），我使用 a`static_assert`来防止使用`z()`维度 2 的坐标。

```
template<typename DataType, int Dimension>
class Coord
{
private:
    std::array<DataType, Dimension> _data;

public:

    // how to achieve some kind of compile_if()
    DataType& z()
    {
        static_assert(Dimension >= 3, "Trying to access an undefined dimension.");
        return _data[2];
    }
}; 
```

我想做的是隐藏`z()`维度 2 的存在，这样

```
Coord<int, 2> ci2(0,0);
ci2.z() = 3;   // shouldn't compile 
```

不使用 static_assert 就无法编译。我已经看到很多关于 std::enable_if 的问题，但据我所知，它用于启用或禁用特定的重载。

问题是：有没有办法根据编译时参数使方法可用或不可用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T16:38:20.320

例如，您可以将函数声明为模板并`std::enable_if`像这样使用

```
template<typename DataType, int Dimension>
class Coord
{
private:
    std::array<DataType, Dimension> _data;

public:
    template <class T = DataType>
    typename std::enable_if<Dimension >= 3, T&>::type
    z()
    {
        return _data[2];
    }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T16:20:41.157

您可以为此使用专业化：

```
template<typename DataType, int Dimension, bool HaveZ = (Dimension >= 3)>
class Coord;

template<typename DataType, int Dimension>
class Coord<DataType, Dimension, false>
{
private:
    std::array<DataType, Dimension> _data;

public:
};

template<typename DataType, int Dimension>
class Coord<DataType, Dimension, true>
{
private:
    std::array<DataType, Dimension> _data;

public:

    DataType& z()
    {
        return _data[2];
    }
}; 
```

您可以将共享成员提升到单独的结构中以防止代码重复。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T16:31:04.373

您可以使用基于专业化专业化的这种方法：

```
#include <array>

template<typename DataType, int Dimension, bool = (Dimension < 3)>
class Coord
{
protected:
    std::array<DataType, Dimension> _data;
};

template<typename DataType, int Dimension>
class Coord<DataType, Dimension, false> : public Coord<DataType, Dimension, true>
{
public:
    DataType& z()
    {
        return this->_data[2];
    }
};

int main()
{
    Coord<double, 3> c3;
    c3.z(); // OK

    Coord<double, 2> c2;
    c2.z(); // ERROR!
} 
```

# c# - 寻找文件的变化

> ID：15481589
> 
> 赞同：2
> 
> 时间：2013-03-18T16:13:42.537
> 
> 标签：c#, perforce, p4api.net

我希望检测到文件不同版本的行更改，我的问题是，当我尝试获取文件的不同版本时，我总是得到最后一个版本，我该如何继续获取不同的版本

```
String password = "*****";
String ws_client = "****";

        Repository rep;
        P4Server ps = new P4Server(conStr, user, password, ws_client);
        Server server = new Server(new ServerAddress(conStr));
        rep = new Repository(server);
        rep.Connection.UserName = user;
        Options options = new Options();

        Console.WriteLine(options.ToString());
        Client c = new Client();

        options["Password"] = password;
        rep.Connection.Client = new Client();
        rep.Connection.Connect(options);
        rep.Connection.Login(password, options);
        Console.WriteLine(rep.ToString());

      string text1="";
        string text2="";
        P4Command cmd = new P4Command(ps);
        string[]cmdargs= new string[1];
        cmdargs[0] = "";
        Console.WriteLine(cmd.ToString());
        Console.WriteLine(ps.ToString());
        Console.WriteLine(server.ToString());

        // *********************************************************************

        #region mrigla2 using filehistory class

        FileSpec filespecs = new FileSpec(FileSpec.DepotSpec("//obms/Dot-NET/Main/FixDepthSource/SLC_FDS/clsFixEventsSource.vb").DepotPath, Revision.Head);
        Options opt = new Options();
       opt.Add("-m", "");

        IList<FileHistory> filehistories = new List<FileHistory>();
        filehistories = rep.GetFileHistory(new Options(), filespecs);
        if (filehistories != null)
        {
            foreach (FileHistory fh in filehistories)
            {

                string p = fh.DepotPath.Path;

                string dpath = "//obms/Dot-NET/Main/FixDepthSource/SLC_FDS/clsFixEventsSource.vb";
                if (p==dpath)
                {
                    Console.WriteLine("Client name:" + fh.ClientName);
                    Console.WriteLine("Description:" + fh.Description);
                    Console.WriteLine("username:" + fh.UserName);
                    Console.WriteLine("Date:" + fh.Date);

                    Console.WriteLine("changelist:" + fh.ChangelistId);
                    directoriesfile.Filedirectory fsd = Program.getpaths(p, ps); 
                    Console.BackgroundColor = ConsoleColor.Red;
                    Console.WriteLine("******************revision:" + fh.Revision+"**********************");
                    if (fh.Revision == 6)
                    {  text1 = System.IO.File.ReadAllText(fsd.localPath); }

                    if (fh.Revision == 5)
                    {text2 = System.IO.File.ReadAllText(fsd.localPath); }

                    Console.BackgroundColor = ConsoleColor.Black;
                    affichcontentFile(fsd.depotPath, ps, fsd.localPath);
                    Console.WriteLine("Action:" + fh.Action);
                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:44:02.440

要获取文件内容的历史记录，请使用“p4 annotate”。

要获取文件的历史记录（但不是其内容），请使用“p4 filelog”。

要获取文件的两个指定版本之间的差异，请使用“p4 diff2”。

将“p4 filelog”（找出哪些版本对应于哪些更改）和“p4 diff2”（计算两个版本之间的差异）放在一起将为您提供很多有用的信息。

或者做我做的事情：不要做任何这些事情，安装 P4V，并使用“延时视图”。这是一个漂亮的可视化工具，可以让探索文件的历史变得简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:01:56.750

```
FileSpec fso = new FileSpec(FileSpec.DepotSpec(fsd.depotPath).DepotPath, Revision.Head);

IList<FileSpec> fsos = new List<FileSpec>();
fsos.Add(fso);

Options opts = new Options();
opts.Add("-a", "");

IList<FileAnnotation> fas = rep.GetFileAnnotations(fsos, opts);

foreach (FileAnnotation fa in fas)
{
    Console.BackgroundColor = ConsoleColor.Yellow;
    lines5+= fa.Line;
    Console.BackgroundColor = ConsoleColor.Black;
} 
```

# javascript - 一个简单的事件系统 | 如何？

> ID：15481598
> 
> 赞同：1
> 
> 时间：2013-03-18T16:13:54.167
> 
> 标签：javascript, events, backbone.js

我想实现这个接口

```
addListener(name, callback);
removeListener(name, [callback]); // callback is optional
trigger(name); 
```

所有事件都将在内部事件总线上触发

```
var bus = {} 
```

这不是界面的一部分。

这是我能想象到的最简单的界面，它实际上很有用。

但是我仍然不知道如何从概念上实现这些接口。我仔细阅读了[主干事件系统](http://backbonejs.org/#Events)，但不太了解它们是如何实现这个核心功能的。

我只想写一个快速的 10-100 行事件系统，它尽可能简单，并且基于更复杂的 Backbone 事件系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:01:34.077

你可以使用 Backbone.Events 模块。

无耻地从迷失中[偷走](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)

您可以使用应用程序级别的事件聚合器：

```
MyApp = {};
MyApp.vent = _.extend({}, Backbone.Events);

MyApp.vent.on("some:event", function(){
  alert("some event was fired!");
});

MyApp.vent.trigger("some:event"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T19:40:26.723

查看最小事件总线库[minibus.js](https://github.com/axelpale/minibus)。它目前有不同的 API，但可能正是您正在寻找的。

```
var bus = Minibus.create();
bus.on(name, callback);  // add listener
bus.emit(name);          // trigger event
bus.off(name);           // remove listener 
```

# java - 静默调用java，Mac Os X

> ID：15481614
> 
> 赞同：3
> 
> 时间：2013-03-18T16:14:33.980
> 
> 标签：java, macos, console, operating-system

我有一个巨大的生成的 shell 脚本，里面有很多行，比如

```
java -jar <app_jar> <params> 
```

每次调用都会将一个 java 图标带到 Dock，使活动应用程序在调用 java 应用程序的每一行都失去焦点

有没有办法让它静默运行？

Java 应用程序是一个单一类、简单的控制台应用程序，带有文件 IO 例程，没有创建任何窗口

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:16:56.077

根据[oracle's doc](http://www.oracle.com/technetwork/articles/javase/headless-136834.html)，以下应该有效：

```
java -Djava.awt.headless=true 
```

# ios - iOS App Store：二进制上传后如何保留发布？

> ID：15481621
> 
> 赞同：1
> 
> 时间：2013-03-18T16:14:51.093
> 
> 标签：ios, app-store, app-store-connect

嘿，我已经向苹果商店提交了更新的应用程序二进制文件。最初我选择了“一经批准就发布”。我想将其更改为“为开发人员发布而保留”。知道如何改变它吗？我一直在窥探itunesconnect，但没有弹出任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:20:49.133

我很确定这是不可能的。您只有一次机会为每次更新做出选择。您必须拒绝您的二进制文件并重新提交并做出正确的选择。

抱歉，这不是您要找的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T16:54:07.277

似乎你不能不拒绝二进制文件并再次上传它；但是，如果您愿意，您可以转到**权利和定价**，并将可用日期移到以后的日期。在此期间，用户将无法下载您的应用程序，但当新版本获得批准时，现有用户将无法使用更新。

# php - 如何为我网站的所有页面设置基本 URL？

> ID：15481629
> 
> 赞同：10
> 
> 时间：2013-03-18T16:15:06.727
> 
> 标签：php, url

如何为我的网站设置基本 URL 并将其包含在每个页面中？

有没有办法让我轻松地将变量更改为网站的基本 url，例如`<?php $baseurl = "http://www.website.com/website/"; ?>`，并将其包含在每个页面上，以便所有 CSS、JavaScript、图像和 PHP 包含遵循此`$baseurl`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T16:21:21.483

您不能让 PHP 和客户端资产使用相同的基本 URL，除非您将 PHP 用于`echo`基本 URL 变量或页面常量。

通常的方法是在每个页面上包含一个引导文件，并在其中定义您的基本 URL 和其他站点范围的变量。

**引导程序.php：**

```
<?php
    define('BASE_URL', 'http://example.com'); 
```

**索引.php：**

```
<?php
    include('bootstrap.php');
?>
<!DOCTYPE html>
<html>
  <head>
    <!-- // -->
    <link rel="stylesheet" href="<?php echo BASE_URL; ?>/css/styles.css" />
  </head>
  <body>
    <!-- // -->
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-18T16:16:50.577

您可能想看看[html 基本标签](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base)。

在`<head>`您的 html 部分中，放置

```
<base href="http://www.website.com/website/"> 
```

最重要的是，您可能希望拥有一个`base.php`默认目录以及包含在项目中的其他内容。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-08-04T00:24:34.153

(xampp)，如何在本地计算机上使用。文件夹布局，

[http://www.resimagaci.com/img/90rvnrf.png](http://www.resimagaci.com/img/90rvnrf.png)

ust.php

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title></title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width">
</head>
<body> 
```

替代文件

```
</body>
</html> 
```

萨比特勒.php

```
<?php
#sabitler
define('BASE_URL', 'base-url');
?> 
```

索引.php

```
<?php
include 'kutuphane/sabitler.php';
?>
<?php
$ust= BASE_URL . '/kutuphane/ust.php';
$alt= BASE_URL . '/kutuphane/alt.php';
?>
<?php
include ($ust);
?>
<?php
include ($alt);
?> 
```

# java - java中.accdb访问数据库的JDBC连接

> ID：15481634
> 
> 赞同：0
> 
> 时间：2013-03-18T16:15:20.827
> 
> 标签：java, jdbc

给定程序中的每件事都是正确的，但未建立与数据库的连接。可能的原因是什么？是否与驱动程序相关的问题。我想在没有 DSN 的情况下执行此操作。

```
import java.awt.*;
import java.awt.event.*;
import java.sql.*;

public class FormAccess1 extends Frame implements ActionListener {

    private static ResultSet rs;
    Panel p1;
    TextField t1, t2;
    Button next;

    public FormAccess1() {
        super("Applicant Detail");
        setLayout(new GridLayout(5, 1));
        p1 = new Panel();
        t1 = new TextField(10);
        t2 = new TextField(10);
        add(p1);
        next = new Button("Next");
        p1.add(new Label("book-id"));
        p1.add(t1);
        p1.add(new Label("book-title"));
        p1.add(t2);
        p1.add(next);
        next.addActionListener(this);
        pack();
        setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == next) {
            try {
                rs.next();
            } catch (Exception em) {
            }
            showRecord(rs);
        }
    }

    public void showRecord(ResultSet rs) {
        try {
            t1.setText(rs.getString(1));
            t2.setText(rs.getString(2));
        } catch (Exception ex) {
        }
    }

    public static void main(String arg[]) {
        FormAccess1 app = new FormAccess1();
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String database = "jdbc:odbc:Driver={Microsoft Access Driver (*.accdb)};DBQ=MyDatabase.accdb;DriverID=01";
            Connection con = DriverManager.getConnection(database, "", "");
            Statement state = con.createStatement();
            System.out.println(rs.getString(1));
            System.out.println(rs.getString(2));
            rs.next();
            app.showRecord(rs);
        } catch (Exception ey) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T13:13:50.633

验证您的机器中有正确的访问驱动程序（Access 2013 可再发行组件）。它可以是 x86 或 x64。Jre/Jdk 应一致：x86 或 x64

# sql - 相同的 SQL 查询在一个数据库中运行的时间比在同一服务器下的另一个数据库要长

> ID：15481642
> 
> 赞同：4
> 
> 时间：2013-03-18T16:15:32.130
> 
> 标签：sql, sql-server, performance, sql-server-2008, sql-execution-plan

我有一个 SQL 数据库服务器和 2 个具有相同结构和数据的数据库。我在 2 个数据库中运行相同的 sql 查询，其中一个需要更长的时间，而另一个在不到 50% 的时间内完成。他们都有不同的执行计划。

视图查询如下：

```
SELECT DISTINCT  i.SmtIssuer, i.SecID, ra.AssetNameCurrency AS AssetIdCurrency, i.IssuerCurrency, seg.ProxyCurrency, shifts.ScenarioDate, ten.TenorID, ten.Tenor, 
                      shifts.Shift, shifts.BusinessDate, shifts.ScenarioNum
FROM         dbo.tblRrmIssuer AS i INNER JOIN
                      dbo.tblRrmSegment AS seg ON i.Identifier = seg.Identifier AND i.SegmentID = seg.SegmentID INNER JOIN
                      dbo.tblRrmAsset AS ra ON seg.AssetID = ra.AssetID INNER JOIN
                      dbo.tblRrmHistSimShift AS shifts ON seg.Identifier = shifts.Identifier AND i.SegmentID = shifts.SegmentID INNER JOIN
                      dbo.tblRrmTenor AS ten ON shifts.TenorID = ten.TenorID INNER JOIN
                      dbo.tblAsset AS a ON i.SmtIssuer = a.SmtIssuer INNER JOIN
                      dbo.tblRrmSource AS sc ON seg.SourceID = sc.SourceID
WHERE     (a.AssetTypeID = 0) AND (sc.SourceName = 'CsVaR') AND (shifts.SourceID =
                          (SELECT     SourceID
                            FROM          dbo.tblRrmSource
                            WHERE      (SourceName = 'CsVaR'))) 
```

我已经尝试过的事情是 - 重建和重组表上的索引（tblRRMHistSimShifts - 该表有超过 200 万条记录），检查服务器上的锁或其他后台进程或错误，服务器的最大并行度为 0。

您还有什么可以解决此问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:32:47.387

您在同一台服务器上有两个数据库并具有相同的数据集（如您所说）这一事实并不能确保相同的执行计划。

以下是查询计划可能不同的一些原因：

*   mdf 和 ldf 文件（对于每个数据库）位于不同的驱动器上。如果一个驱动器速度更快，那么该数据库也会更快地运行查询。
*   停滞的统计数据。如果您有一个数据库的统计信息比另一个数据库更新，SQL 就有更好的机会选择正确（且
    更快）的执行计划。
*   索引：我知道你说它们都是相同的，但我会检查你是否在两者上都有相同类型的索引。

专注于查看查询运行缓慢的原因或查看实际执行计划，而不是进行比较。检查慢查询的实际执行计划将提示您为什么运行较慢。

此外，我不会添加 NO LOCK 语句来解决此问题。根据我的经验，大多数慢查询可以通过代码或索引进行调整，而不是添加 NO LOCK 提示，这可能会让您修改或旧的结果集，具体取决于您的事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:42:12.377

最好的方法是重建和重组您的请求

```
SELECT DISTINCT  i.SmtIssuer, i.SecID, ra.AssetNameCurrency AS AssetIdCurrency, i.IssuerCurrency, seg.ProxyCurrency, shifts.ScenarioDate, ten.TenorID, ten.Tenor, 
                 shifts.Shift, shifts.BusinessDate, shifts.ScenarioNum
FROM dbo.tblRrmIssuer AS i INNER JOIN dbo.tblRrmSegment AS seg ON i.Identifier = seg.Identifier AND i.SegmentID = seg.SegmentID 
                           INNER JOIN dbo.tblRrmSource AS sc ON seg.SourceID = sc.SourceID
                           INNER JOIN dbo.tblRrmAsset AS ra ON seg.AssetID = ra.AssetID 
                           INNER JOIN dbo.tblRrmHistSimShift AS shifts ON seg.Identifier = shifts.Identifier AND i.SegmentID = shifts.SegmentID AND shifts.SourceID = sc.SourceID
                           INNER JOIN dbo.tblRrmTenor AS ten ON shifts.TenorID = ten.TenorID 
                           INNER JOIN dbo.tblAsset AS a ON i.SmtIssuer = a.SmtIssuer 
WHERE (a.AssetTypeID = 0) AND (sc.SourceName = 'CsVaR') 
```

# java - 通用 for 循环：有没有办法获取迭代信息？

> ID：15481644
> 
> 赞同：5
> 
> 时间：2013-03-18T16:15:36.007
> 
> 标签：java, loops

我习惯于用这样的泛型实现循环：

```
for (final Dog lDog : lAllDog) {
   ...
} 
```

不幸的是另一个业务案例我需要迭代的当前计数。我知道我可以通过编写类似的代码来解决这个问题：

```
for (int i = 0 ; i < lAllDog.length(); i++) {
   System.out.println(i);
} 
```

或者

```
int i = 0;
for (final Dog lDog : lAllDog) {
   ...
   i++;
} 
```

但是有没有办法用我的第一个代码示例获取当前的迭代计数，而无需声明新的`int`或更改整个循环头？

多谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:17:14.790

简而言之，没有。您必须使用索引方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:20:21.390

不，除了您在问题中描述的以外，没有其他方法可以计算迭代次数。您必须使用旧方法来定义计数器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:20:31.693

不，增强的 for 循环不包含索引。如果你想要一个，你必须自己介绍它。

原因是它基于[Iterable](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Iterable.html)接口。本质上，它使用一个迭代器来循环一个集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T16:21:08.970

不，如果您的列表有独特的元素

也许你可以试试这个

```
for (final Dog lDog : lAllDog) {

 int i=  lAllDog.indexOf(lDog);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T16:23:06.277

他们说计算机科学中的每一个问题都可以通过更间接的方式来解决

```
class Indexed<T>
    int index;
    T value;

static <T> Iterable<Indexed<T>> indexed(Iterable<T> iterable){ ... }

for(Indexed<Dog> idog : indexed(dogs))
    print(idog.index);
    print(idog.value); 
```

在 java 8 中，我们可能希望将这种控制模式抽象为

```
forEach(dogs, (index, dog)->{ 
    print(index);
    print(dog);
});

static <T> void forEach(Iterable<T> collections, Acceptor<T> acceptor){...}

interface Acceptor<T>
    void accept(int index, T value); 
```

# android - 如何在 Xamarin.Android 中使用“values-v11”文件夹

> ID：15481645
> 
> 赞同：1
> 
> 时间：2013-03-18T16:15:36.607
> 
> 标签：android, themes, xamarin.android

[此处的 android 文档](http://developer.android.com/guide/topics/ui/themes.html#SelectATheme)指出，我可以针对 Api Level 8+ 设备，但仍指定我想将 Holo 主题用于 API Level 11+ 的设备。我应该能够使用两个 theme.xml 文件来做到这一点：

*   对于 API 级别 8、9 和 10 的设备，可以进入 /Resources/values
*   对于 API 级别 11+ 的设备，可以进入 /Resources/values-v11

在 Xamarin.Android 项目中，使用 Xamarin Studio 它看起来不像在工作，我得到一个编译时错误：

```
Error retrieving parent for item: No resource found that matches the given name '@android:style/Theme.Holo'. 
```

我在这里做错了吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:25:38.277

Theme.Holo 仅适用于 API 11 及更高版本。

如果您的项目目标设置为自动，系统将根据所需的最低级别构建（我认为）。

尝试将其显式设置为更高的 API 版本。

# wordpress - 如何让一个 WordPress 页面在移动设备上以不同方式显示

> ID：15481646
> 
> 赞同：0
> 
> 时间：2013-03-18T16:15:38.247
> 
> 标签：wordpress

我有一个特定的 WordPress 页面，当在移动设备上查看它时，我需要以更大的字体显示它。我想过这样做：

```
@media handheld { /* rules for handheld devices */ } 
```

...但是看不到我可以将其放入页面标题的位置。对我来说最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:22:09.743

media="only screen and (max-width: 480px), only screen and (max-device-width: 480px)" href="/assets/css/small-device.css"

[http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:14:49.187

如果您想在 wordpress 中定位特定页面，您可以这样做。

在您的**header.php**中添加此代码而不是开始**`<body>`**标记

```
<body <?php $id = get_the_ID(); $title = str_replace(' ','-', strtolower(get_the_title($id)));  body_class($title); ?>> 
```

这将获取页面的标题，使其全部小写并添加破折号而不是空格。

因此，如果您有一个名为**The Neighborhood**的页面，那么您现在有一个名为**`.the-neighborhood`**

在你的主**style.css**页面中定位它

```
@media handheld { 
   body.the-neighborhood header {
      /*header styles for only the neighborhood page */
    }
} 
```

# listview - 列表视图 java.lang.NullPointerException

> ID：15481651
> 
> 赞同：0
> 
> 时间：2013-03-18T16:15:43.277
> 
> 标签：listview, nullpointerexception, bundle, adapter, simplecursoradapter

单击我的列表视图项时，下一个活动将不会启动，并且我收到 NullPointerException 错误。logcat 指向第 130 行（我认为），但我不确定要进行哪些更改。在我用内容提供者实现了一个游标加载器之前，这一直很好。

日志猫：

```
03-18 09:52:20.737: E/AndroidRuntime(1143): FATAL EXCEPTION: main
03-18 09:52:20.737: E/AndroidRuntime(1143): java.lang.NullPointerException
03-18 09:52:20.737: E/AndroidRuntime(1143):     at com.loginplus.home.LoginList.onItemClick(LoginList.java:130)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.widget.AbsListView$1.run(AbsListView.java:3168)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.os.Handler.handleCallback(Handler.java:605)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.os.Looper.loop(Looper.java:137)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at java.lang.reflect.Method.invoke(Method.java:511)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-18 09:52:20.737: E/AndroidRuntime(1143):     at dalvik.system.NativeStart.main(Native Method) 
```

列表显示：

```
39\. public void onCreate(Bundle savedInstanceState) {
40\. super.onCreate(savedInstanceState);
41.
42\. setContentView(R.layout.login_listview);
43\. getSupportLoaderManager().initLoader(LOADER_ID, null, this);
44.
45\. String[] from = { BaseColumns._ID, dataStore.COLUMN_NAME_SITE};
46\. int[] to = {R.id.rusName};
47.
48\. adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, from, to);
49\.             
50.
51\. loginList = (ListView)
52\. findViewById(R.id.loginlist);
53\. loginList.setOnItemClickListener(this);
54.
55\. webLogin = (Button)
56\. findViewById(R.id.button3);
57\. webLogin.setOnClickListener(this);   
58\. }
59.
60\. public Loader<Cursor> onCreateLoader(int id, Bundle args) {
61.
62\.     String[] projection = { BaseColumns._ID, dataStore.COLUMN_NAME_SITE};
63\.     CursorLoader cursorloader = new CursorLoader(this, ListProvider.CONTENT_URI, projection, null , null, null);
64\.     return  cursorloader;
65\.  }
66.
67\. public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
68\.     adapter.changeCursor(cursor);
69\.     }
70\. public void onLoaderReset(Loader<Cursor> cursorLoader) {
71\.     adapter.changeCursor(null);
72\. }
73.
74.
75\. @Override
76\. public void onClick (View v) {
77\. Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
78\. startActivity(webLoginIntent);
79\. }
80.
81\. public List<String> populateList (){
82.
83\. List<String> webNameList = new ArrayList<String>();
84.
85\. dataStore openHelperClass = new dataStore (this);
86.
87\. SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();
88.
89\. Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);
90.
91\. while (cursor.moveToNext()){
92\. String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
93\. String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
94\. String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
95\. String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
96\. String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));
97.
98\.  LoginDetails lpDetails = new LoginDetails();
99\.  lpDetails.setsName(sName);
100\. lpDetails.setwUrl(wUrl);
101\. lpDetails.setuName(uName);
102\. lpDetails.setpWord(pWord);
103\. lpDetails.setlNotes(lNotes);
104.
105\. loginArrayList.add(lpDetails);
106\. webNameList.add(sName);
107\. }
108.
109\. cursor.close();
110\. return webNameList;
111\. }
112.
113.
114.
115\. @Override
116\. protected void onResume() {
117\. super.onResume();
118.
119.
120\. adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, new String[] { dataStore.COLUMN_NAME_SITE}, new int[]{R.id.loginlist});
121\. loginList.setAdapter(adapter);  
122\. }
123.
124\. @Override
125\. public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
126\. Toast.makeText(getApplicationContext(), "Selected ID :" + arg2, Toast.LENGTH_SHORT).show();
127.
128\. Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);
129.
130\. LoginDetails clickedObject = loginArrayList.get(arg2);
131.
132\. Bundle loginBundle = new Bundle();
133\. loginBundle.putString("clickedWebSite",clickedObject.getsName());
134\. loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
135\. loginBundle.putString("clickedUserName",clickedObject.getuName());
136\. loginBundle.putString("clickedPassWord",clickedObject.getpWord());
137\. loginBundle.putString("clickedNotes",clickedObject.getlNotes());
138.
139\. updateDeleteLoginInfo.putExtras(loginBundle);
140.
141\. startActivityForResult(updateDeleteLoginInfo, 0);   
142\. }
143\. } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:18:20.247

这是因为 loginArrayList 为空。您应该在使用它之前对其进行初始化或填充。

# c# - 在服务器端代码 (WinForm) 上看不到服务参考

> ID：15481656
> 
> 赞同：0
> 
> 时间：2013-03-18T16:16:04.627
> 
> 标签：c#, web-services, remoting

我正在使用 C# 编写的客户端/服务器 winform 应用程序。

如果我向我的代码所在的项目（即服务器端）添加服务引用。我得到“找不到 xxx（您是否缺少 using 指令或程序集引用？）”

如果我在客户端项目中做同样的事情，那很好。

为什么我无法访问服务器端代码中的服务引用？

# gcc - 如何在没有命令的情况下执行 a.out 文件，如 Unix 中的 ./a.out

> ID：15481657
> 
> 赞同：2
> 
> 时间：2013-03-18T16:16:06.070
> 
> 标签：gcc, ubuntu, g++, solaris, execute

我想在终端中执行 c++ 二进制而不输入“./a.out”，只需输入“a.out”

在我学校的 PC(solaris10) 中，我只需键入 a.out 即可执行程序。但是，在我的 PC 上，solaris11 不只接受“a.out”。我相信有办法让它成为可能。如果你知道，请告诉我。如果可能的话，我想知道solaris、Ubuntu和macOS X的使用说明，因为我通常使用Ubuntu和mac。

提前致谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T16:21:00.600

听起来，PATH 变量已设置为包含您学校 PC 上的主目录。您会看到，每次您输入没有路径的命令时，它都会搜索您的整个 PATH（可以包含多个路径）以查找与您提供的文件名匹配的内容并执行它找到的第一件事。

检查此链接以获取一些说明：[http ://www.troubleshooters.com/linux/prepostpath.htm](http://www.troubleshooters.com/linux/prepostpath.htm)

要么你做一个临时修复，用

```
PATH=$PATH:/data/myscripts 
```

或者您编辑主目录中的隐藏文件`.bash_profile`以获得更永久的修复。

我希望这有帮助。

# ruby-on-rails - Rails 友好的前向重定向循环

> ID：15481659
> 
> 赞同：1
> 
> 时间：2013-03-18T16:16:11.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, redirect, controller

我有一个创建来宾用户的控制器操作。出于某种原因，当您单击访客登录链接时，在尝试将用户转发回上一页时，我会遇到重定向循环问题（不是一直，而是有时）。这是我的代码：

```
class ApplicationController < ActionController::Base
  before_filter :remember_location

  protected

  def remember_location
    session[:return_to] = request.referrer
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    clear_return_to
  end

  def clear_return_to
    session.delete(:return_to)
  end
end

class GuestUsersController < ApplicationController

  def create
    # do create thing...
    redirect_back_or(root_url)
  end

end 
```

似乎它应该工作。任何想法可能导致问题？故障排除提示也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:32:03.147

您不应该“记住”`create`您的`GuestUsersController`. 将此添加到该类的顶部。

```
skip_before_filter :remember_location, only: [ :create ] 
```

# c# - 使用 C# 在 .csproj 文件中查找节点

> ID：15481662
> 
> 赞同：4
> 
> 时间：2013-03-18T16:16:16.567
> 
> 标签：c#, xml

我在尝试从作为 XDocument 读入的 .csproj 文件中选择特定节点时遇到问题。

```
XDocument xmldoc = XDocument.Load("The full path of the .csproj file"); 
```

这会将 .csproj 文件加载到 XDocument 中而不会出现问题。我已经尝试过`Descendants`,`Elements`等尝试获取`TheNodeIWant`其价值，但无法弄清楚为什么我一直没有得到任何结果。

```
<?xml version="1.0" encoding="utf-8"?>
    <Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
        <PropertyGroup>
            <TheNodeIWant>The String I Want </TheNodeIWant>
        </PropertyGroup>
        <PropertyGroup>
        .......
        </PropertyGroup>
    </Project> 
```

如何选择`TheNodeIWant`和检索它的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:39:13.757

见[https://stackoverflow.com/a/4171468/1301310](https://stackoverflow.com/a/4171468/1301310)

```
XmlDocument xmldoc = new XmlDocument();
xmldoc.Load(@"c:\test.txt");

XmlNamespaceManager ns = new XmlNamespaceManager(xmldoc.NameTable);
ns.AddNamespace("msbld", "http://schemas.microsoft.com/developer/msbuild/2003");
XmlNode node = xmldoc.SelectSingleNode("//msbld:TheNodeIWant", ns);

if (node != null)
{
    MessageBox.Show(node.InnerText);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T16:19:36.823

您可以使用[MSBuild Project 类](http://msdn.microsoft.com/en-us/library/microsoft.build.buildengine.project.aspx)更好地`csproj`从代码中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:23:02.887

我建议使用[Xpath](http://msdn.microsoft.com/de-de/library/9x81sf5a%28v=vs.80%29.aspx)在您的 csproj 文件中导航。

# backbone.js - 在backbone.js中具有自身集合的嵌套模型

> ID：15481666
> 
> 赞同：0
> 
> 时间：2013-03-18T16:16:30.640
> 
> 标签：backbone.js, backbone.js-collections, backbone-model

我正在开发 Backbone.js 和 Jquery 中的应用程序，它需要 JSON 如下所示：-

```
{
      "FolderSummaryResponse": {
        "Status": "SUCCESS",
        "FolderItem": [
          {
            "Desc": "Immediate Action Required",
            "ID": "1",
            "RecordCnt": "0",
            "SeqCd": "1",
            "SubFolderItemList": {
              "FolderItem": [
                {
                  "Desc": "Customers to Call",
                  "ID": "10",
                  "RecordCnt": "0",
                  "SeqCd": "0"
                },
                {
                  "Desc": "PO Connect",
                  "ID": "17",
                  "RecordCnt": "0",
                  "SeqCd": "7",
                  "SubFolderItemList": {
                    "FolderItem": [
                      {
                        "Desc": "Inbound",
                        "ID": "73",
                        "RecordCnt": "0",
                        "SeqCd": "0"
                      },
                      {
                        "Desc": "Outbound",
                        "ID": "74",
                        "RecordCnt": "0",
                        "SeqCd": "1"
                      }
                    ]
                  }
                }
 ]
  }
    } 
```

. 基本上是一种父母和孩子的结构。如何在主干中为此创建模型和集合？请帮助我，因为我对主干.js 完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:38:00.170

有一个位于 Backbone.js 之上的 JavaScript 库，可以减少您必须编写的样板代码量，并且它们有一个 CompositeView 最适合嵌套集合。我已经包含了文档和一篇讨论使用它的文章。

[Marionette Composite 查看文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)

[木偶复合材料 查看文章](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

# c# - C# WPF XBAP Elements 可以脱离 tabitem

> ID：15481668
> 
> 赞同：0
> 
> 时间：2013-03-18T16:16:34.940
> 
> 标签：c#, wpf, grid, xbap, tabitem

我有一个 tabitem 里面的网格。网格可以有 1 到 n 个元素，所有元素的类型都与图片中的相同。

![在此处输入图像描述](../Images/09db9b00e76e1ea6b66b0cd72cbf3df2.png)

现在，我已经玩了很长时间并寻找答案，但找不到答案。问题是，元素可能会超出网格（仅从顶部开始，直到停靠面板出现），从而导致一些烦人的事情，如图片中所示。我希望有人知道如何解决这个问题。

现在，我尝试了什么？

*   将矩形添加到顶部，ZIndex 高于元素。
*   当元素到达网格顶部时隐藏元素 -> 不平滑。
*   不是真的其他人，因为我没有想法。

**编辑**

整个 XML：

```
<Page x:Class="WpfBrowserMindmap.Page1"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="473" d:DesignWidth="604"
      Title="Page1">
    <Grid Loaded="Grid_Loaded" SizeChanged="Grid_SizeChanged">
        <Label Height="28" HorizontalAlignment="Left" Margin="440,12,0,0" Name="label1" VerticalAlignment="Top" Content="Label1" AllowDrop="False" />
        <DockPanel Height="100" HorizontalAlignment="Left" Margin="12,100,0,0" Name="dockPanel1" VerticalAlignment="Top" Width="200">
            <TabControl Height="100" Name="tabControl1" Width="200" VerticalAlignment="Top" HorizontalAlignment="Left" SelectionChanged="tabControl1_SelectionChanged">
            </TabControl>
        </DockPanel>
    </Grid>
</Page> 
```

AddTab 功能：

```
private TabItem AddTab()
        {
            TabItem item = new TabItem();
            item.Header = "Empty work";

            Grid grid = new Grid();
            grid.Background = new SolidColorBrush(Colors.Transparent);

            UserControl control = new UserControl();
            control.Content = grid;

            item.Content = control;
            tabControl1.Items.Add(item);
            return item;
        } 
```

# php - php脚本在转储文件中执行sql语句

> ID：15481670
> 
> 赞同：0
> 
> 时间：2013-03-18T16:16:36.740
> 
> 标签：php, mysql, sql, exec

我有一个 php 脚本，它应该执行几个 mysql 语句，如果没有注释 /* */ 并且没有断线，一切正常......

你能帮我添加这个功能吗，也忽略 `--`评论

```
<?
$sqlFileToExecute = 'mysql_dump.sql';
$hostname          = 'localhost';
$db_user           = 'root';
$db_password      = '';
$database_name    = 'db_';
$link = mysql_connect($hostname, $db_user, $db_password);
if (!$link) {
  die ("error connecting MySQL");
}

mysql_select_db($database_name, $link) or die ("wrong DB");
$f = fopen($sqlFileToExecute,"r+");
$sqlFile = fread($f, filesize($sqlFileToExecute));

$sqlArray = explode(';',$sqlFile);
foreach ($sqlArray as $stmt) {

 //THIS SEEMS NOT TO WORK 
 if (strlen($stmt)>3 && substr(ltrim($stmt),0,2)!='/*') {
    $result = mysql_query($stmt);
    if (!$result) {
      $sqlErrorCode = mysql_errno();
      $sqlErrorText = mysql_error();
      $sqlStmt = $stmt;
      break;
    }
  }
}
if ($sqlErrorCode == 0) {
  echo "SETUP COMPLETED ;)";
} else {
  echo "FAIL!<br/>";
  echo "Error code: $sqlErrorCode<br/>";
  echo "Error text: $sqlErrorText<br/>";
  echo "Statement:<br/> $sqlStmt<br/>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:07:47.570

你确定你需要以这种方式运行它：

你也可以使用

```
$mysql -pxxx -u username db_name -vvv < sourcefile.sql >/tmp/outfile.log 
```

启用详细模式以检查统计信息，否则您可以省略 -vvv 选项

或者

```
mysql > source "sourcefile.sql" 
```

[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/batch-commands.html)查看更多选项

# javascript - 选择后由mysql填充的html下拉菜单加载另一个下拉菜单

> ID：15481673
> 
> 赞同：0
> 
> 时间：2013-03-18T16:16:40.437
> 
> 标签：javascript, jquery, html, forms

我正在使用 PHP 从 MySQL 表中提取，然后为 javascript 填充 XML 以获取该信息。

此处显示的表格结果示例 ![选择](../Images/47d0039662e67739fe5f7655a7842cd9.png)

我想为 hobbienames 创建一个下拉菜单，然后在进行该选择时显示另一个菜单，其中显示与 hobbiename 匹配的 hsnames。显然，如果 null 什么都不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:26:47.633

如果第一个下拉菜单不是很长，并且长度固定，那么您可以检索所有可能的下拉菜单并最初隐藏它们。从下拉菜单中选择一个项目后，您可以显示其相应的下拉菜单。

在另一种情况下，如果第一个下拉列表很长，则在其选择时，运行一个 AJAX 函数，该函数最终将填充另一个下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:40:25.327

这是一个示例代码，您可以将其用作参考...

[http://theitbranch.com/transfer/country.zip](http://theitbranch.com/transfer/country.zip)

# jquery - 循环到第一张幻灯片 flexslider

> ID：15481674
> 
> 赞同：3
> 
> 时间：2013-03-18T16:16:44.810
> 
> 标签：jquery, flexslider

我正在使用 flexslider，我从一张幻灯片移动到下一张，一次查看 3 张幻灯片。当它到达最后一张幻灯片时，如果您继续单击向右箭头，我希望它继续显示幻灯片。而不是停止或跳回第一个，就像一个连续的循环。这似乎不起作用。有任何想法吗？

```
$(window).load(function(){
              $('.slides').fadeIn(600)  
              $('.flexslider').flexslider({
                animation: "slide",
                animationLoop: true,
                itemWidth: 317,
                move: 1

              });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T14:35:22.570

用另一个滑块更改 flexlider :) [http://www.idangero.us/sliders/swiper/demos.php](http://www.idangero.us/sliders/swiper/demos.php) 这个可以解决问题...参见名为“Carousel & Loop mode. Infinite Scrolling”的演示

# java - 我的 jsp 找不到我的 servlet，给我一个 404

> ID：15481675
> 
> 赞同：1
> 
> 时间：2013-03-18T16:16:48.877
> 
> 标签：java, jsp, servlets

我正在尝试提交一个简单的表单以在 servlet 中进行处理，但每次提交时我都会收到 404。代码可以正常编译和部署。我已经完成了关于这个主题的几乎所有教程，所以我知道那里有很多关于它的信息。关于我犯了哪个菜鸟错误有什么建议吗？提前感谢您的帮助！

jsp 位于 /webapps/registerWidget servlet 位于 /webapps/registerWidget/WEB-INF/classes/com/sample/applet web.xml 位于 /webapps/registerWidget/WEB-INF

这是我的jsp：

```
 <!DOCTYPE HTML>
    <html>
    <head>
        <title>Sample Applet</title>
    </head>
    <body>
        <header>Please Register</header>
        <section>
            <form action="/register" method="POST">
                First name: <input type="text" name="firstname"><br>
                Last name: <input type="text" name="lastname"><br>
                Email: <input type="text" name="email"><br>
                <input type="submit" value="Submit">
            </form>
        </section>
    </body>
</html> 
```

这是我的小服务程序：

```
package com.sample.applet;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class RegisterServlet extends HttpServlet {

    public void doGet(HttpServletRequest req, HttpServletResponse res)
            throws IOException, ServletException {
        doPost(req, res);
    }

    public void doPost(HttpServletRequest req, HttpServletResponse res)
            throws ServletException {

        String first = req.getParameter("firstname");
        String last = req.getParameter("lastname");
        String email = req.getParameter("email");

        ....some processing code....

    }
} 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
    http://java.sun.com/xml/ns/j2ee/Web-app_2_4.xsd">

    <servlet>
        <servlet-name>registerServlet</servlet-name>
        <servlet-class>com.sample.applet.RegisterServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>registerServlet</servlet-name>
        <url-pattern>/register</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:20:48.717

表单中操作中的 url 以斜杠开头。这意味着您从服务器根目录开始，并在此时查找名为 register 的 servlet。但是，您的 servlet 实际上是在某种上下文中。因此，您可以说：/mycontext/register 或完全删除斜线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:24:04.217

在行动中使用“注册”而不是“/注册”

表单动作="注册"

'/register' 中的 '/' 告诉它在你的上下文根目录下搜索你的 servlet。

# c# - 如何为 ContentControl 建立 viewModel

> ID：15481684
> 
> 赞同：1
> 
> 时间：2013-03-18T16:17:06.803
> 
> 标签：c#, wpf, mvvm, contentcontrol

我有一个用户控件，它定义了这样的 ContentControl：

```
<ContentControl x:Name="PART_contentHost" Grid.Row="1"/> 
```

在视图模型中，我将获得一个视图模型，它将显示在 contentControl 中。为了建立与视图的链接，我有一个数据模板来建立它们之间的关系。

```
<DataTemplate DataType="{x:Type ViewModels:Test1ViewModel}">
        <Views:Test1View />
</DataTemplate> 
```

这意味着我希望 Test1ViewModel 显示在 contentControl 中。我无法在我的代码 C# 中稳定它。

```
//this gets the contentControl from de template
contentHost = this.Template.FindName(contentHostName, this) as ContentControl; 
//this assigns the test1ViewModel
contentHost.Content = content 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:04:37.117

您没有共享足够的代码让我确定您正在尝试做什么。虽然在某些情况下您需要解析模板，但通常有更好的方法。所以这就是我在 MVVM 上下文中如何理解你的情况，你能这样做吗？

![在此处输入图像描述](../Images/43108405b578b0844a2aa5a0800c9236.png)

xml:

```
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>
<Window.Resources>
    <DataTemplate DataType="{x:Type local:Test1ViewModel}">
        <local:Test1View />
    </DataTemplate>
</Window.Resources>
<Grid>
    <ContentControl Content="{Binding ContentModel}" />
</Grid> 
```

测试1视图：

```
<UserControl x:Class="WpfApplication1.Test1View" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <StackPanel>
        <TextBlock Text="{Binding Name}" Background="Beige" Padding="5"  />
        <TextBlock Text="{Binding Address}" Background="PeachPuff" Padding="5" />
    </StackPanel>
</UserControl> 
```

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private Test1ViewModel _contentModel;
    public Test1ViewModel ContentModel { get { return _contentModel; } set { _contentModel = value; OnPropertyChanged("ContentModel"); } }

    public ViewModel()
    {
        this.ContentModel = new Test1ViewModel() { Name = "John Higgins", Address = "Wishaw" };
    }

}

public class Test1ViewModel : INotifyPropertyChanged
{
    private string _name;
    public string Name { get { return _name; } set { _name = value; OnPropertyChanged("Name"); } }

    private string _address;
    public string Address { get { return _address; } set { _address = value; OnPropertyChanged("Address"); } }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:20:13.607

我以前做过类似的事情。此代码应该可以帮助您入门。

```
 public void FindAndSetTemplateContent( ContentControl target, ViewModelBase item)
    {
        if (target == null)
            throw new ArgumentNullException("target");

        if (item == null)
            throw new ArgumentNullException("item");

        var template = target.TryFindResource(new DataTemplateKey(item.GetType())) as DataTemplate; // this will pick up your resource for the viewmodel
        if (template == null)
            return null;

        var content = template.LoadContent() as ContentControl ;
        if (content != null)
        {
            content.DataContext = item;
        }
        return content;
    } 
```

# entity-framework - 在实体框架中查询 DbContext.Set(TypeVariable)

> ID：15481685
> 
> 赞同：5
> 
> 时间：2013-03-18T16:17:07.877
> 
> 标签：entity-framework

我正在重构应用程序以反转一些依赖项。部分原始代码用于`DbContext.Set<MyEntityType>()`获取要查询的集合。

通过反转，使用 MyEntityType 的代码不再明确知道`DbContext.Set<MyEntityType>()`，所以现在我正在使用`DbContext.Set(TypeVariable)`。

重构在返回正确 DbSet 的范围内起作用。

但是，类型`DbContext.Set(TypeVariable).Local`是`IList`（包含类型未知） where-as 的`DbContext.Set<MyEntityType>().Local`类型`ObservableCollection<MyEntityType>`。这意味着现在不可能针对 DbSet 执行 Linq。

我能够实现的最佳解决方法是转换为 MyEntityType 和其他实体类型实现的接口（为清楚起见省略了一些代码）

```
var set = Context.Set(targetType);
var entity = set.Local.OfType<IActionTarget>()
    .FirstOrDefault(l => l.Id == key.Id && l.EffectiveDate == key.EffectiveDate);
var querables = set as IQueryable<IActionTarget>;
entity = querables.FirstOrDefault(e => e.Id == key.Id && e.EffectiveDate == key.EffectiveDate); 
```

所以，两个问题：

为什么不`DbContext.Set(TypeVariable)`返回强类型集？

有没有更好的方法来进行依赖倒置？

**根据要求提供一些进一步的细节**

这都是关于依赖关系的。模型包含 POCO 类，这些类通过 EF Code First 以典型方式（但通过**Repository**）持久化。**ActionEvaluator**获取一些传入数据，并通过Repository 方法确定需要发生的操作 - 因此是针对 DbSet 的查询。

在原始代码中，只有一种类型的传入数据（特定格式的 CSV），并且 ActionEvaluator 对这些数据有紧密的依赖关系，并且知道哪些 POCO 类适用于哪些 CSV 记录。

现在，我们要扩展以使用不同的 CSV 格式和 Web api 消息。为此，我们需要反转依赖关系，以便**DataSource**告诉 ActionEvaluator 它的记录适用于哪些 POCO 类。这是通过类型变量完成的。

因此，ActionEvaluator 不能再使用泛型类型参数，但它可以将类型变量传递给 Repository，Repository 使用它来查找正确的 DbSet。

问题是找到 DbSet 的两种方法之间的区别 -`DbContext.Set<AnEntity>()`和`DbContext.Set(TypeVariable)`.

我想我要求增强 EF 以使这两个函数的返回值在功能上等效，但这可能是不可能的，因为第二个版本的类型是在运行时确定的。

这是所要求的完整方法代码：

```
 private IActionTarget DbContextGetEntity(Type targetType, IActionTarget key)
    {
        var set = Context.Set(targetType);
        if (set == null)
        {
            throw new Exception("Unable to find DbSet for type '{0}'".F(targetType.Name));
        }

        // Look in the local cache first
        var entity = set.Local.OfType<IActionTarget>()
            .FirstOrDefault(l => l.Id == key.Id && l.EffectiveDate == key.EffectiveDate);

        if (entity == null)
        {
            // If not found locally, hit the database
            var querables = set as IQueryable<IActionTarget>;
            if (querables != null)
            {
                entity = querables.FirstOrDefault(e => e.Id == key.Id && e.EffectiveDate == key.EffectiveDate);
            }
        }
        return entity;
    } 
```

理想情况下，我想更换

```
var entity = set.Local.OfType<IActionTarget>()
    .FirstOrDefault(l => l.Id == key.Id && l.EffectiveDate == key.EffectiveDate); 
```

和

```
var entity = set.Local.OfType(targetType)
    .FirstOrDefault(l => l.Id == key.Id && l.EffectiveDate == key.EffectiveDate); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:35:34.733

我还没有编译它，所以请原谅任何格式问题 - 你可以使用动态类型来实现同样的事情吗？

```
private IActionTarget DbContextGetEntity(Type targetType, IActionTarget key)
{
    dynamic instance = Activator.CreateInstance(targetType);
    return DbContextGetEntity(instance, key);
}

private IActionTarget DbContextGetEntity<T>(T instance, IActionTarget key)
    where T : class, IActionTarget
{
    var set = Context.Set<T>(targetType);
    if (set == null)
    {
        throw new Exception();
    }

    // Look in the local cache first
    var entity = set.Local
        .FirstOrDefault(l => l.Id == key.Id && l.EffectiveDate == key.EffectiveDate);

    if (entity == null)
    {
        // If not found locally, hit the database
        entity = set
            .FirstOrDefault(e => e.Id == key.Id && e.EffectiveDate == key.EffectiveDate);
    }
    return entity;
} 
```

# ruby-on-rails - 如何在 Rails 中添加两个具有 http 基本身份验证的登录？

> ID：15481686
> 
> 赞同：0
> 
> 时间：2013-03-18T16:17:10.683
> 
> 标签：ruby-on-rails

我想为我的应用创建两个登录名。可用于访问索引显示和编辑页面的一种。另一个登录只是为了新页面。我真的很想通过 http 基本身份验证来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:23:06.603

在您的控制器中，您可以执行以下操作：

```
before_filter :authenticate1, only: [:index, :show, :edit]
before_filter :authenticate2, only: [:new]

def authenticate1
  authenticate_or_request_with_http_basic do |user_name, password|
    session[:user] = 'admin' if user_name == 'admin' && password == 'admin'
  end
end

def authenticate2
  authenticate_or_request_with_http_basic do |user_name, password|
    session[:user] = 'other' if user_name == 'other' && password == 'other'
  end
end 
```

# angularjs - 布局问题中的 ng-switch 元素

> ID：15481691
> 
> 赞同：0
> 
> 时间：2013-03-18T16:17:18.267
> 
> 标签：angularjs, ng-repeat, ng-switch

我正在使用 ng-switch 在布局中创建过滤输入字段。我正在打开路由名称，并使用此字段过滤每页上 ng-repeat 中的数据。

```
div(ng-controller="NavbarCtrl", ng-switch on="route.current.name")
                input.filter(ng-switch-when='offers',type="text", ng-model="$parent.$parent.search.title")
                input.filter(ng-switch-when='merchants',type="text", ng-model="$parent.$parent.search.name") 
```

这种方法的问题在于，我在一个页面上输入的值在导航到另一条路线并过滤另一页上的数据时会保持保存。我正在使用内置的角度搜索过滤器，因此使用了模型名称。

我可以在路由更改时以某种方式重置过滤器的值吗？

另一个问题是我发现这个 $parent.$parent 范围访问不切实际，但我找不到更优雅的方式。

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:14:40.957

正如评论中所讨论的，混淆是围绕`search`属性，它不是 Angular 中的特殊过滤器，而只是将与 Angular 的[过滤](http://docs.angularjs.org/api/ng.filter:filter)器过滤器一起使用的属性的名称。

此外，`$parent`如果使用/引用了父范围对象上的属性，则不需要。即，如果`$scope.search = { ... }`在父作用域中定义，则子作用域（但不是指令隔离作用域）可以通过[正常的 JavaScript 原型继承](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)访问该对象。

# php - 条件 div 类不回显，只有其中的变量会回显

> ID：15481697
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:17:34.740
> 
> 标签：php

由于以下代码，有什么原因会发生这种情况吗？所显示的只是变量，即图像。

```
<?php $featured_image = the_post_thumbnail();?>
    <?php if (is_page(7) || is_page(12))
        echo '<div class="featured_image">' . $featured_image . '</div>'
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:23:03.083

```
<?php 
    $featured_image = the_post_thumbnail();

    if (is_page(7) || is_page(12)) { 
        echo '<div class="featured_image">' . $featured_image . '</div>';
    } 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:23:21.937

该函数本身与 img 相呼应： http: [//codex.wordpress.org/Function_Reference/the_post_thumbnail](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

尝试：

```
<?php
    if ( has_post_thumbnail() && (is_page(7) || is_page(12))) {
        echo '<div class="featured_image">';
        the_post_thumbnail();
        echo '</div>';
    } 
?> 
```

您看到的是 echo 函数的返回值。

# javascript - OpenLayers 点击选中的特征触发函数

> ID：15481702
> 
> 赞同：0
> 
> 时间：2013-03-18T16:17:41.600
> 
> 标签：javascript, events, maps, openlayers, feature-selection

我正在使用 OpenLayers 使用集群策略在地图上绘制点要素。

```
 strategy = new OpenLayers.Strategy.Cluster();

        clusters = new OpenLayers.Layer.Vector("Clusters", {
            strategies: [strategy],
            styleMap: new OpenLayers.StyleMap({
                "default": style,
                "select": {
                    fillColor: "#ff0000",
                    strokeColor: "#ffbbbb"
                }
            })
        });

        [.......]

        clusters.addFeatures(features); 
```

我还使用 SelectFeature 来选择地图上的点要素。

```
 select = new OpenLayers.Control.SelectFeature(
                clusters, {
                    clickout: false,
                    toggle: false, 
                    hover: false
                }
            );

        map.addControl(select);
        select.activate();

        clusters.events.on({"featureselected": clickPoint}); 
```

当用户选择一个聚类特征时，会出现一个弹出窗口，其中包含要选择的包含特征的列表。当他选择其中之一时，弹出窗口关闭并且集群特征保持选中状态。

现在问题来了。我希望能够单击集群功能，以便再次出现弹出窗口。我唯一能做的就是设置 toggle:true 但随后该功能被取消选择。

当用户单击所选功能时，有没有办法触发事件？

提前谢谢，illy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:53:46.250

为了解决这个问题，我改写`unselectAll`为：

```
mySelectControl.unselectAll = function(options) {
    OpenLayers.Control.SelectFeature.prototype.unselectAll.apply(
                              mySelectControl, arguments);
    if (options && options.except) {
        var myReselecteFeature = options.except;
        ... your code to show the popup of myReselecteFeature ...
    }
}; 
```

* * *

您可能有兴趣查看此示例：

[http://jorix.github.com/OL-FeaturePopups/examples/feature-popups.html](http://jorix.github.com/OL-FeaturePopups/examples/feature-popups.html)

它是一个控件，您可以执行此操作并执行更多操作。例如，使用集群缩放后保留选择。

注意：默认行为不是您要查找的，但可以自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T13:57:48.780

您也可以在选择功能时取消选择您的功能。对我来说，这是实现该功能的点击事件的最短方法。还将切换标志设置为 true 以在单击时触发取消选择事件。

```
var pdfFeatureSelector = new OpenLayers.Control.SelectFeature(pdfLayer,{
        clickout: true,
        multiple: true,
        toggle: true,
        autoActivate: true,
        onSelect: function(){
            OpenLayers.Control.SelectFeature.prototype.unselectAll.apply(
                    pdfFeatureSelector);//unselect the feature when it is selected
        }
}); 
```

# windows - 在批处理文件中使用另一个环境变量的一部分设置环境变量

> ID：15481705
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:17:43.377
> 
> 标签：windows, batch-file, cmd, set, environment

一旦已经定义了年份，我希望将新的环境变量设置为年份的最后两位数。

目前我有：

```
set Year=2013
set Yr=13 
```

但是我希望用户每次使用它时只需要更新 Year 并关闭 Year 的批处理文件键来定义 Yr。

谢谢你的帮助，凯瑟琳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:29:34.753

尝试这个：

```
@echo off
set Year=2013
set /a Yr=Year-2000
echo %Yr% 
```

输出：

```
13 
```

# jquery - 使用来自 websql 数据库的 Jquery 绑定 HTML5 下拉列表

> ID：15481706
> 
> 赞同：2
> 
> 时间：2013-03-18T16:17:45.633
> 
> 标签：jquery, binding, html-select

我想从 jquery 设置下拉选择的值。

我尝试了下面提到的不同方法，但它们都不起作用。

HTML：

```
<div class="ui-block-b">
<select id="interviewertyp" name="interviewerType" data-theme="b" data-mini="true"
data-native-menu="false" onchange="interviewerTypeFn(this.value)">
<option value="0">Insured</option>
<option value="1">Tenant</option>
<option value="2">Other</option>
</select><br />
</div> 
```

查询方法：

```
var valu = "";
if (row['rdWhowasinter'] == "Y")
valu = 0;
else if (row['rdWhowasinter'] == "N")
valu = 1;
else if (row['rdWhowasinter'] == "O")
valu = 2;
else {

}
alert(valu);

valu = "Insured";
$("#interviewertyp").selectmenu('refresh');
$("#interviewertyp option").each(function () {
if ($(this).text() == valu) {
alert($(this).text());

$(this).attr('selected', 'selected');
}
});
$("#interviewertyp").selectmenu('refresh');
$("#interviewertyp").selectmenu('refresh');
$("#interviewertyp option:selected").val(valu);
alert($("#interviewertyp option:selected").val())
$("#interviewertyp option:selected").val(valu);
$("#interviewertyp").selectmenu('refresh');
$("#interviewertyp").val("1"); 
```

jQuery 版本：1.7.2

# antlr - 用不明确的字符串值解析 ANTLR4 规则

> ID：15481707
> 
> 赞同：1
> 
> 时间：2013-03-18T16:17:45.857
> 
> 标签：antlr, antlr4

我有一个语法，我无法消除可能属于布尔值或字符串的值的歧义。

该语法有几个字符串类型和布尔类型的字段。字符串字段几乎可以包含引号内的任何内容，布尔值可以包含“Y”或“N”。问题：有时字符串字段也可以包含“Y”或“N”（通常作为多个单字符值列表的一部分）。

以下是相关的语法规则。我尝试使用谓词来消除布尔比较与字符串的歧义，只要该字符串是“Y”或“N”。

```
booleanLogical
: booleanAtom (EQ|NE) booleanAtom
| booleanAtom (EQ|NE) {_input.LT(1).getText().equals("\"Y\"") || _input.LT(1).getText().equals("\"N\"")}? STRING
;

booleanAtom
: BOOLEAN_FIELD
;

stringLogical
: stringAtom (EQ|NE|LT|LE|GT|GE) stringAtom
| STRING_FIELD (EQ|NE|LT|LE|GT|GE) ('"Y"'|'"N"')
;

stringAtom
: STRING_FIELD
| STRING
;

BOOLEAN_FIELD: ("BFIELD1","BFIELD2","BFIELD3");
STRING_FIELD: ("SFIELD1","SFIELD2","SFIELD3"); 
```

尝试解析布尔表达式时的错误消息：

```
BFIELD1="Y" 
```

是：

```
line 1:7: no viable alterative at input 'BFIELD1="Y"' 
```

在 antlr3 中，我只会使用前瞻，但这不再是一个选项。

那里有任何帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:30:43.663

由于`'"Y"'`在`stringLogical`规则中使用了文字，输入`"Y"`产生了一个特殊的标记，它不是`STRING`. 我建议您停止尝试在解析器中区分`"Y"`、`"N"`和其他字符串，而是在解析完成后使用侦听器来验证字符串。

```
booleanLogical
  : booleanAtom (EQ|NE) booleanAtom
  | booleanAtom (EQ|NE) STRING
  ; 
```

此外，重要的是要注意 ANTLR 4 仅评估出现在决策左边缘的谓词。您在原始`booleanLogical`规则中使用的谓词不在决策的左边缘，因此永远不会被评估。

# asp.net-mvc - NPoco StructureMap.MVC4 构造函数注入

> ID：15481708
> 
> 赞同：2
> 
> 时间：2013-03-18T16:17:49.873
> 
> 标签：asp.net-mvc, asp.net-mvc-4, structuremap, npoco

我有一个使用 StructureMap.MVC4 的 MVC4 应用程序。这是 IoC.cs 的片段

```
ObjectFactory.Initialize(x =>{
x.Scan(scan =>{
    scan.TheCallingAssembly();
    scan.WithDefaultConventions();});

x.For<IDbContext>().Use<EfDbContext>().Ctor<string>("connectionStringName").Is("DefaultDb");
x.For<IDatabase>().Use<Database>().Ctor<string>("connectionStringName").Is("DefaultDb");

x.For<IActionInvoker>().Use<InjectingActionInvoker>();
x.SetAllProperties(c=>c.OfType<IDbContext>());
... ... 
```

DbContext 注入工作正常，ActionFilters 的 setter 注入以及所有使用默认约定的 Service:IService 也可以正常工作。但我在尝试注入 IDatabase 时遇到以下错误：

```
Could not find a constructor parameter or property for NPoco.Database, NPoco, Version=1.0.0.0, 
Culture=neutral, PublicKeyToken=null named connectionStringName Parameter name: name 
```

如果我将其更改为

```
x.For<IDatabase>().Use(new Database("DefaultDb")); 
```

有用。任何想法为什么？我想知道是否通过使用 New，它最终会生成一个不同的 IDatabase 实例，尤其是在与 IDbContext 实例混合时。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:34:32.660

当有多个具有相似构造函数参数时，似乎与 StructureMap 相关的无法确定默认构造函数。在这种情况下，它有

```
Database(string connectionStringName)
Database(string connectionStringName, string Provider)
.... 
```

看起来这是稍微好一点的语法？

```
x.For<IDatabase>().Use(() => new Database("DefaultDb")); 
```

# java - Java ip ping

> ID：15481709
> 
> 赞同：0
> 
> 时间：2013-03-18T16:17:50.373
> 
> 标签：java, ip, ping, host

当我在 Java 中 ping 地址时，我使用此代码来测试它们是否可以访问

```
 reachable = (InetAddress.getByName(host).isReachable(5000)); 
```

我从数据库中获取主机。所以我的问题是，每次 ping 一个 IP 地址时，我需要将 ProgressBar 填充 1，但它有点问题导致此行 ping 所有 IP 地址，然后才显示结果。因此，如果进度条已满，则没有任何意义当 ping 完成时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:20:13.663

您可以使用[InetAddress.getAllByName()](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#getAllByName%28java.lang.String%29)获取该主机的所有 IP 地址，然后在每个 IP 地址上依次使用 isReachable() 吗？

```
foreach(InetAddress ia : InetAddress.getAllByName(host)) {
   if (ia.isReachable(5000)) {...

} 
```

# multithreading - Windows Azure 工作角色内的最大并发线程数

> ID：15481710
> 
> 赞同：1
> 
> 时间：2013-03-18T16:17:53.837
> 
> 标签：multithreading, azure, tcp-ip

我们正在开发一个服务器应用程序，它需要同时打开大量 TCP/IP 连接以等待一些小通知。我们计划使用 Windows Azure 云服务来轻松扩展服务器，但我们只有一个疑问。

**单个 Windows Azure 工作角色实例可以拥有的最大并发线程数（或等待消息的 tcp/ip 连接）是多少？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:52:02.497

工作角色中的 Windows Azure 实例是由 Azure AppFabric 控制器管理的常规 Windows Server VM。因此，每个服务器在逻辑上可以支持的线程或连接数没有 Azure 特定的限制。

但是，请注意，Azure 中的服务器可以具有不同的大小（功率），并且在物理上能够处理不同数量的正在运行的线程或打开的连接。理论上的最大数量还取决于线程/连接本身（它们占用多少资源是关键）。

在已部署的解决方案上运行负载测试可能有助于您可以打开并充分执行的最大线程/连接数。

此外，由于 Windows Azure 支持横向扩展，您可以使用[AzureWatch 之](http://www.paraleap.com)类的工具来监控性能计数器，了解正在运行的线程数或 TCP/IP 连接数，并自动将服务器添加/删除到您的 VM。

# asp.net-mvc - 在 DotNetNuke 示例模块中向 GetItems 添加参数

> ID：15481716
> 
> 赞同：0
> 
> 时间：2013-03-18T16:18:16.747
> 
> 标签：asp.net-mvc, linq, dotnetnuke, dotnetnuke-module

下面是来自 DotNetNuke 示例模块的代码，该模块从数据库中获取属于特定模块的项目集合。我想要的是为其过滤添加第二个参数。我猜这与修改范围 item.cs 类有关，但不确定具体如何。

```
 public IEnumerable<Item> GetItems(int moduleId)
    {
        IEnumerable<Item> t;
        using (IDataContext ctx = DataContext.Instance())
        {
            var rep = ctx.GetRepository<Item>();
            t = rep.Get(moduleId);
        }
        return t;
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T16:17:07.203

在 DAL2 中执行此操作的另一种方法是使用 .Find() 方法。如果您想查询表中的索引字段并且您不关心缓存范围，这很好：

```
public IEnumerable<Item> GetItemByName(int moduleId, string itemname)
{
    IEnumerable<Item> t;
    using (IDataContext ctx = DataContext.Instance())
    {
        var rep = ctx.GetRepository<Item>();
        t = rep.Find("WHERE ModuleId = @0 AND ItemName LIKE @1", moduleId, itemname);
    }
    return t;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:01:10.883

这是我使用 DAL2 的 SignalRChat 模块中的一些示例代码（[http://signalrchat.codeplex.com/SourceControl/changeset/view/71473#1272188](http://signalrchat.codeplex.com/SourceControl/changeset/view/71473#1272188)）

```
public IEnumerable<Message> GetRecentMessages(int moduleId, int hoursBackInTime, int maxRecords)
        {
            var messages = (from a in this.GetMessages(moduleId) where a.MessageDate.Subtract(DateTime.UtcNow).TotalHours <= hoursBackInTime select a).Take(maxRecords).Reverse();

            return messages.Any() ? messages : null;
        } 
```

这是一种方法，您也可以在控制器中使用 SQL 语句（[http://signalrchat.codeplex.com/SourceControl/changeset/view/71473#1272186](http://signalrchat.codeplex.com/SourceControl/changeset/view/71473#1272186)）

```
public ConnectionRecord GetConnectionRecordByConnectionId(string connectionId)
        {
            ConnectionRecord t;
            using (IDataContext ctx = DataContext.Instance())
            {
                var connections = ctx.ExecuteQuery<ConnectionRecord>(CommandType.Text,
                                                       string.Format(
                                                           "select top 1 * from {0}{1}SignalRChat_ConnectionRecords where ConnectionId = '{2}'",
                                                           _databaseOwner,
                                                           _objectQualifier,
                                                          connectionId)).ToList();

                if (connections.Any())
                {
                    t = connections[0];
                }
                else
                    return null;
            }
            return t;
        } 
```

# c# - Exchange Web 服务：UseDefaultCredentials 属性

> ID：15481717
> 
> 赞同：4
> 
> 时间：2013-03-18T16:18:19.313
> 
> 标签：c#, exchange-server, exchangewebservices, credentials

[此 Microsoft 页面](http://msdn.microsoft.com/en-us/library/exchange/ff597939%28v=exchg.80%29.aspx)表明，通过将 UseDefaultCredentials 属性设置为 true，无需登录名和密码即可与 Exchange 服务器通信。然而，这不是我的经验。

我的代码创建了一个名为 service 的 ExchangeService 实例：

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010); 
```

如果我手动设置凭据如下，一切正常：

```
service.Credentials = new WebCredentials("my@email.address", "my password"); 
```

但是，如果我删除该行并将其替换为以下内容，我的代码将不起作用：

```
service.UseDefaultCredentials = true; 
```

我已经搜索并搜索了解决方案，但我没有找到任何具体的东西。如果这里有人可以帮助我，我将不胜感激。

编辑：我尝试使用自己的凭据而不是默认凭据。

```
string smtpaddress = "somesharedsmtp@domain.com";
es.Url = new Uri("https://outlook.office365.com/EWS/Exchange.asmx");
es.Credentials = new WebCredentials("myemail", "mypassword");
es.AutodiscoverUrl(smtpaddress, RedirectionCallback);
FolderId SharedMailbox = new FolderId(WellKnownFolderName.Inbox, "somesharedsmtp@domain.com");
Folder sharedInbox = Folder.Bind(es, SharedMailbox); 
```

此时我可以检查包含收件箱详细信息的sharedInbox。我可以看到未读电子邮件计数和其他。

但是当我访问

```
ItemView itemView = new ItemView(100);
FindItemsResults<Item> findResults1 = es.FindItems(pqInbox.Id, itemView); 
```

我收到异常“SMTP 地址没有与之关联的邮箱”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:14:28.087

我在这种情况下的经验是，如果您设置 service.UseDefaultCredentials = true 您的电脑登录将被采取。如果您在与 exchangeserver 相同的 ActiveDirectory 结构中，这将是完美的。如果您尝试从 ADS 外部连接到交换服务器，则必须手动设置凭据。

我在工作时为我的工具使用默认凭据。如果我从家里连接，我必须设置凭据。

希望对你有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-20T17:42:06.503

从 MSDN 文档中，Exchange Online 中忽略了 UseDefaultCredentials。您必须为 Exchange Online 指定凭据。

[http://msdn.microsoft.com/en-us/library/office/microsoft.exchange.webservices.data.exchangeservicebase.usedefaultcredentials(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/office/microsoft.exchange.webservices.data.exchangeservicebase.usedefaultcredentials(v=exchg.80).aspx)

# vim - vim MRU 插件问题

> ID：15481723
> 
> 赞同：2
> 
> 时间：2013-03-18T16:18:37.567
> 
> 标签：vim

我尝试使用 MRU 插件：[http](http://www.vim.org/scripts/script.php?script_id=521) ://www.vim.org/scripts/script.php?script_id=521 。但是当我键入时，`:MRU`我收到以下错误消息：

```
Error detected while processing function <SNR>10_MRU_Cmd..<SNR>10_MRU_Open_Window:
line 125
E21: Cannot make changes, 'modifiable' is off:     $delete 
```

如何解决这个问题？

# sql - 具有 NULL 值的唯一列值组合

> ID：15481730
> 
> 赞同：1
> 
> 时间：2013-03-18T16:18:55.713
> 
> 标签：sql, postgresql

我正在尝试有条件地将一些数据插入到表中，其中列值的每个组合最多只能在表中出现一次。架构看起来像这样：

```
CREATE TABLE foobar (
    id SERIAL PRIMARY KEY,
    a_id INTEGER,
    b_id INTEGER,
    c_id INTEGER,
    ident VARCHAR(32),
    date_a timestamp,
    date_b timestamp,
    FOREIGN KEY a_id REFERENCES a (id) ON DELETE CASCADE,
    FOREIGN KEY b_id REFERENCES b (id) ON DELETE CASCADE,
    FOREIGN KEY c_id REFERENCES c (id) ON DELETE CASCADE)); 
```

(a_id, b_id, c_id, ident) 的组合是唯一的，但仅适用于 date_a AND date_b 均为 NULL 的行。

只有当 a_id、b_id、c_id、任务组合不在数据库中时，我才希望能够插入新行。如果是，它不需要做任何事情。

起初我尝试在这些列上创建唯一约束，但问题是允许 a_id、b_id 和 c_id 为 NULL，只要其中至少一个不为空。这破坏了唯一约束。因为 a、b 和 c_id 字段是外键，所以我不能将它们设置为其他一些存根值（如 -1）。

我尝试使用锁定（与我更好的判断相反），这在测试的几分钟内导致了死锁。

这个问题有没有标准的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:35:51.933

您可能应该在要检查的确切条件上使用唯一索引，而不是使用唯一约束。然后，您可以将空值合并为一个虚拟值，例如 -1。就像是：

```
CREATE UNIQUE INDEX
foobar_test ON foobar
(COALESCE(a_id, -1), COALESCE(b_id, -1), COALESCE(c_id, -1), ident) -- Nulls become -1
WHERE date_a is null and date_b is null; -- Only check when date_a and date_b is null 
```

这将确保`a_id`, `b_id`, `c_id`, 和`ident`是唯一的（包括它们的空值组合）对于所有`date_a`和`date_b`都是的行`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:07:01.443

在我的多个生产数据库中的类似情况下，我只是**将“默认行”添加到引用的表**中。我使用`id = 0`这些并在 10 或 100 处开始真正的代理键。或者，如果保留，您可以使用`-1`（或任何适合您的） 。`0`

这样，我可以将所有 fk 列设置为开箱即用的`NOT NULL DEFAULT 0`（部分）约束：`UNIQUE`

```
CREATE UNIQUE INDEX tbl_uni_idx ON tbl (a_id, b_id, c_id, ident)
WHERE date_a IS NULL AND date_b IS NULL; 
```

# ios - 使用 NSKeyUnarchiver 加载数据时应用程序崩溃

> ID：15481732
> 
> 赞同：1
> 
> 时间：2013-03-18T16:19:16.293
> 
> 标签：ios, xcode, compiler-errors, loading, nskeyedarchiver

我使用 NSKeyArchiver 将 Accounts 保存到一个文件中，但是当我尝试加载它们时，我的应用程序只是崩溃了，说 Account 没有实现 initWithCoder: 即使它实现了并且它也符合 NSCoding：

```
-[Account initWithCoder:]: unrecognized selector sent to instance 0xa947a00 
```

帐户.m

```
 - (id)initWithCoder:(NSCoder *)aDecoder
{
self = [super init];
if (self) {
    _name = [aDecoder decodeObjectForKey:@"name"];
    _accessToken = [aDecoder decodeObjectForKey:@"accessToken"];
    _refreshToken = [aDecoder decodeObjectForKey:@"refreshToken"];
    _selected = [aDecoder decodeBoolForKey:@"selected"];
    lastUpdate = [aDecoder decodeObjectForKey:@"lastUpdate"];
}
return self;
}

- (void)encodeWithCoder:(NSCoder *)aCoder
{
[aCoder encodeObject:_name forKey:@"name"];
[aCoder encodeObject:_accessToken forKey:@"accessToken"];
[aCoder encodeObject:_refreshToken forKey:@"refreshToken"];
[aCoder encodeBool:_selected forKey:@"selected"];
[aCoder encodeObject:lastUpdate forKey:@"lastUpdate"];
} 
```

AccountStore.m 我在这里加载它们：

```
NSString *path = [[self archivePath] stringByAppendingPathComponent:@"accounts.archive"];
accounts = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
if (!accounts) {
    accounts = [[NSMutableArray alloc] init];
} 
```

另外我应该提到它已经起作用了，但是从一秒钟到另一秒钟它就不再起作用了。我检查了 NSKeyedArchiver 是否正确保存：确实如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:41:26.577

问题可能是名称冲突。

Apple 的 Message.framework 包含一个名为`Account`. 虽然您永远不会直接链接此私有框架，但它可以从其他 Apple 框架间接加载，例如 MessageUI.framework。我可以想象您最近将此框架添加到您的项目中。这将是您的错误首次出现的时间。

唯一的解决方案是重命名您的`Account`课程。实际上，Apple 的框架中[有很多不带前缀的类](https://github.com/NikolaiRuhe/UnprefixedFrameworkClasses)，所以无论如何你[都应该使用名称前缀。](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html#//apple_ref/doc/uid/20001281-1002226-BBCJECED)

[您应该按照@bbum here](https://stackoverflow.com/a/2849965/104790)的建议提交一个错误。

# ruby-on-rails - ruby on rails 在特定列名之后添加一列

> ID：15481733
> 
> 赞同：22
> 
> 时间：2013-03-18T16:19:18.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我试图在表中的特定列之后向表中添加一列。这是我所做的：

```
rails generate migration add_reaction_id_to_patient_allergies reaction_id: integer :after => 'patient_id' 
```

这是我的迁移文件的样子：

```
class AddReactionIdToPatientAllergies < ActiveRecord::Migration
  def change
    add_column :patient_allergies, :reaction_id, :string
    add_column :patient_allergies, :integer, :string
    add_column :patient_allergies, :, :after
    add_column :patient_allergies, :=, :string
  end
end 
```

我认为命令进行得并不顺利。我在上面的文件中看到了一个“=”。我不认为它应该在那里。如果我错过了什么，有人可以告诉我吗？

如果是这样，我该如何撤消上述操作？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-18T16:21:50.007

我怀疑它是否允许您实际进行`rake db:migrate`此迁移，因此您不必回滚。只需删除底部的三个`add_column`s 并将顶部的替换为

```
add_column :patient_allergies, :reaction_id, :integer, after: :patient_id 
```

迁移应该没问题。为了将来参考，您输入的命令如下所示：

```
rails generate migration add_reaction_id_to_patient_allergies reaction_id:integer 
```

之前的空间`integer`让生成器认为这是一个新列。遗憾的是，您也不能`a => b`在命令行上使用 Ruby 语法 ( )。

# json - 中间人 JSON 本地数据

> ID：15481735
> 
> 赞同：1
> 
> 时间：2013-03-18T16:19:23.183
> 
> 标签：json, local, middleman

我对 Middleman 和 Ruby 很陌生，所以我提前道歉......

我正在尝试通过“中间人本地数据”读取我的数据文件夹中的一些 JSON 文件，然后将结果保存到环境变量中，这样我最终可以将它传递给我的 JS 文件。像这样的东西：

```
- data.test.each do |t|
    - set :json_data, t 
```

这实际上是在读取我的 /data/test.json 文件并将其保存到 json_data 变量中。但是，它不是 JSON 格式。这只是我所有节点的字符串连接。我的猜测是我需要在将 JSON 信息保存到变量之前对其进行解码。就像是？

```
- data.test.each do |t|
    - set :json_data, ActiveSupport::JSON.decode(t) 
```

但这也不起作用。我试图安装一个 json gem，但它确实有效。

有什么我可能会丢失的线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:50:28.687

ActiveSupport 是一个 Rails 模块，Middleman 没有。假设您已经安装了 JSON gem，您可以执行以下操作：

```
string = File.read('/path/to/json/file.json')

json = JSON.parse(string)

json.each do |node|
  # do your stuff here 
```

更多内容：[在 Ruby 中解析 JSON 字符串](https://stackoverflow.com/questions/5410682/parsing-a-json-string-in-ruby)

# ruby-on-rails-3 - 按月安排员工工作时间的 RESTful 方式

> ID：15481736
> 
> 赞同：0
> 
> 时间：2013-03-18T16:19:29.990
> 
> 标签：ruby-on-rails-3, rest, routes

我想知道选择什么路线。

我得到了一个包含员工工作时间的视图，路由文件如下所示：

```
resources :employees do
    resources :workhours do
end 
```

所以网址是：

```
/users/:user_id/workhours/:id 
```

我想做的只是显示每月的小时数以及下个月和上个月的链接。执行此操作的最 RESTful 方式是什么？我已经读过你不应该将 url 嵌套到很深，但我不知道。

提前致谢。

# php - 如何使用 PHP 连接到 MS SQL？

> ID：15481741
> 
> 赞同：0
> 
> 时间：2013-03-18T16:19:42.153
> 
> 标签：php, sql-server, ubuntu, database-connection

我有一个使用以下代码的 PHP 脚本：

```
$con = mssql_connect('192.168.152.2\webservice','sa','p@$$w0rd') or die('Could not connect to database server');     
mssql_select_db('mydatabase') or die('Could not connect to Database'); 
```

我需要在 2 台机器上运行这个脚本。一台服务器工作正常，另一台则不行。

好的，这是我知道/尝试过的一些事情：

*   两台机器都已连接到 MSSQL 数据库。他们安装了 php5-sybase 库。
*   我确信用于连接两者的 sa 用户没有任何限制——就它可以连接的主机而言。

我不知道如何检查/或可能影响事情的事情：

*   即使两台机器都有相同的 php 库。他们有相同版本的库吗？
*   MSSQL 用户可以在盒子上拥有的并发连接数。
*   无法连接的盒子正在运行 PHP 版本 5.2.4（但是可以连接到另一个 MS SQL 数据库）

我不知道我错过了什么。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:28:58.757

两台服务器都有不同的IP。

所以尝试其他服务器主机IP。

只需更改新服务器的主机它就可以正常工作。

```
$con = mssql_connect('192.168.152.2\webservice','sa','p@$$w0rd') or die('Could not connect to database server');     
mssql_select_db('mydatabase') or die('Could not connect to Database'); 
```

只需更改`192.168.152.2\webservice`为其他服务器主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:25:32.690

主机IP地址呢？他们一定是不同的吧？

1 号机器有效，因为它必须与 192.168.152.2 关联，其他机器必须有不同的 ip。所以试试2号机关联的IP

# ms-office - BY_HANDLE_FILE_INFORMATION 结构 - Microsoft Office 文件

> ID：15481743
> 
> 赞同：1
> 
> 时间：2013-03-18T16:19:51.297
> 
> 标签：ms-office, structure

即使在编辑文件之后，BY_HANDLE_FILE_INFORMATION 结构也应该保持唯一。当我在文本文件上测试它时，它运行良好，但是当它在 docx 和 xlsx 文件上测试时，它似乎发生了变化。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T12:23:28.113

这是 BY_HANDLE_FILE_INFORMATION 的声明

```
public struct BY_HANDLE_FILE_INFORMATION
{
    public uint FileAttributes;
    public FILETIME CreationTime;
    public FILETIME LastAccessTime;
    public FILETIME LastWriteTime;
    public uint VolumeSerialNumber;
    public uint FileSizeHigh;
    public uint FileSizeLow;
    public uint NumberOfLinks;
    public uint FileIndexHigh;
    public uint FileIndexLow;
} 
```

正如您所看到的，它包含一些大小信息、上次访问时间......因此我看不出它如何保持唯一性。

但是有 2 个字段保持唯一（即使您移动文件（在同一个磁盘上））`FileIndexHigh`和`FileIndexLow`

# ios - 将按钮框架设置为适合视图

> ID：15481744
> 
> 赞同：0
> 
> 时间：2013-03-18T16:19:53.403
> 
> 标签：ios, ipad, uibutton, bounds

我想在 UITableView 的标题部分显示一个 UIButton。这是我尝试过的代码

```
 UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0, 285, 44)];

    UIButton *headerViewButton = [UIButton buttonWithType:UIButtonTypeCustom];
    headerViewButton.frame = CGRectMake(headerView.bounds.size.width * 7/5, headerView.bounds.size.height * 1/4, 320.0, 30.0);
    headerViewButton.backgroundColor = [UIColor grayColor];
    [headerViewButton setTitle:@"Import main list from other field  >" forState:UIControlStateNormal];
    [headerViewButton addTarget:self
                          action:@selector(buttonPressed:)
                forControlEvents:UIControlEventTouchDown];

    [headerView addSubview:headerViewButton]; 
```

问题是我很难调整按钮框架，以便它适合横向模式和纵向模式。我对使用 Interface Builder 不太满意。如何正确调整按钮框架以使其适合视图。

我试过使用`setAutoresizingMask`

```
UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0, 320, 44)];
UIButton *headerViewButton = [UIButton buttonWithType:UIButtonTypeCustom];
    headerViewButton.frame = CGRectMake(headerView.bounds.size.width * 7/5, headerView.bounds.size.height * 1/4, 290, 30.0);
    headerViewButton.backgroundColor = [UIColor grayColor];
    [headerViewButton setTitle:@"Import main list from other field  >" forState:UIControlStateNormal];
    [headerViewButton addTarget:self
                         action:@selector(buttonPressed:)
               forControlEvents:UIControlEventTouchDown];

    [headerViewButton setAutoresizingMask:UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleWidth];

    [headerView addSubview:headerViewButton]; 
```

当应用程序第一次加载时，按钮丢失了，但是当我改变方向时，按钮出现了。每次我尝试，它的模式都是一样的。应用程序第一次加载时，按钮会丢失，之后它会出现在两个方向上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:33:53.707

尝试设置

```
[headerViewButton setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth]; 
```

这样，它将随着超级视图的变化而调整大小。（与在 IB 中设置自动调整大小选项相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:34:06.427

您需要将按钮设置`autoresizingMask`为适当的值。这些值取决于您希望按钮的大小和/或位置如何随着其父视图的大小变化而调整。

在您发布的代码中，奇怪的是您使按钮比其父视图更宽。

# r - ggplot2 中的多列图几乎相同

> ID：15481745
> 
> 赞同：-2
> 
> 时间：2013-03-18T16:19:54.263
> 
> 标签：r, statistics, ggplot2

我有一个看起来像这样的 .tsv 文件

```
MODEL           CA_RMSD BB_RMSD ALL_ATOM s1      s2     s3   
101_res_input   2.89    2.89    3.17    -84.37  -46.77  0.81   
102_res_input   3.29    3.29    3.52    -85.21  -50.49  1.04
103_res_input   3.74    3.73    3.98    -90.93  -48.18  1.65
104_res_input   3.09    3.07    3.34    -92.16  -49.63  1.03
105_res_input   3.44    3.43    3.69    -89.92  -49.81  1.08 
```

我想要的是一张有 CA_RMSD 与 s1 的图表，然后是另一个有 CA_RMSD 与 s2 的图表，以及另一个有 CA_RMSD 与 s3 的图表，依此类推。散点图可能是我想象的最好的。我是 ggplot2 的新手，但似乎我想要使用刻面，因为我希望在同一图像上显示所有图，但是对于每个图，y 轴需要采用不同的比例。

对于每个图，我可以获得规模上的线性回归，告诉我哪些数据集相关性最好？必须有一些我缺少的功能才能做到这一点。

Ĵ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:41:54.367

这个怎么样？

```
require(ggplot2)
require(reshape2)
df.m <- melt(df, id.var = "CA_RMSD", measure.var = c("X.s1", "s2", "s3"))
p <- ggplot(data = df.m, aes(x = CA_RMSD, y = value)) + 
    geom_point() + 
geom_smooth(method = "lm") + 
    facet_wrap(~ variable, nrow=1, scales="free")
cors <- ddply(df.m, .(variable), summarise, cor = round(cor(CA_RMSD, value), 2))
p + geom_text(data=cors, aes(label=paste("r=", cor, sep=""), 
                   x=c(3,3,3), y=c(-75, -50, 0))) 
```

![在此处输入图像描述](../Images/099f0a11c8d6c6e03c0b2a1480ee713e.png)

# gcc - 在 gdb 中故意创建脏堆？

> ID：15481748
> 
> 赞同：3
> 
> 时间：2013-03-18T16:20:07.153
> 
> 标签：gcc, gdb

我发现尝试在 gdb 中调试意外未初始化的数据可能很烦人。程序在命令行直接执行时会崩溃，但在 gdb 中检查时不会。看起来 gdb 的堆通常是干净的（全为零），而从命令行来看，显然不是。

是否有一个原因？如果是这样，我可以故意告诉 gdb 或 gcc 弄脏堆吗？IE，有没有办法指定一个“调试”分配器，它总是给`malloc()`和随机数据`new`？我想这可能涉及一个特殊的 libc？显然，如果有一种方法可以在不更改链接器选项的情况下做到这一点，那就太好了，这样发布版本就尽可能地与调试版本相似。

我目前正在使用 MinGW-w64（基于 gcc 4.7），但我会对一般答案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:25:43.553

这样做的 Linux 方法是使用 valgrind。在 Mac OS X 上，有控制分配调试的环境变量，[请参阅 malloc 的 Mac OS X 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/malloc.3.html "用于 malloc 的 Mac OS X 手册页")。Valgrind 对 Mac OS X 的支持开始出现，但在我写这篇文章时，10.8 的支持还不完整。

当您使用 MinGW-w64 时，我假设您使用的是 Windows。似乎[这个 SO question](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)谈到了 Windows 上 valgrind 的替代方案。一种解决方案是在 valgrind 下的 Linux 机器上的 Wine 中运行您的应用程序。

如果您的程序在 valgrind 下运行，则它不会直接在 CPU 上运行。Valgrind 正在模拟每条指令，因此您不能简单地将调试器附加到它。要使其工作，您需要使用 valgrind GDB 服务器，请参阅[此页面](http://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver)了解更多详细信息。

另一种方法是使用`calloc`而不是`malloc`，这将使您的堆分配归零。这不会给你一个故意弄脏的堆，但至少可以让你在有或没有调试器的情况下保持一致的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:02:03.950

是的，GDB 将所有内容归零，这既有用又很烦人。有用，只要保证一切都处于明确定义的状态（内存中没有随机值，只有零）。这意味着，从理论上讲，调试时不会出现令人讨厌的意外。
在实践中，这就是令人讨厌的地方，这个理论有时会失败。臭名昭著的*“工作正常，但在调试器中崩溃！？！”* 或*“在调试器中工作正常，但在其他情况下崩溃？！”* 问题就是一个例子。通常，这是一个未初始化的指针与一个善意的`if(ptr != NULL)`地方的组合，这完全因为“没有充分的理由”而崩溃，因为调试器将内存初始化为零，因此测试无法达到您的预期。

关于您关于故意乱码分配的数据的问题`malloc`，GCC 支持 malloc 钩子（请参阅[此处的文档](http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html)和[有关 SO 的问题](https://stackoverflow.com/q/269659/572743)）。

这使您能够以一种非常简单且非侵入性的方式将所有调用重定向到`malloc`您自己的函数。如果您愿意，您可以从那里调用 real`malloc`并用垃圾（或一些无效指针魔法值，如 ）填充分配的块`DEADBEEF`。

至于`operator new`，这恰好是一个包装器`malloc`（这是一个实现细节，但是 malloc 钩子已经是不可移植的，因此依赖它不会使事情变得更糟），因此 malloc 钩子也应该已经处理了这个问题。

# android - 获取我的应用程序分配的内存堆的函数

> ID：15481751
> 
> 赞同：2
> 
> 时间：2013-03-18T16:20:19.230
> 
> 标签：android, ddms

任何人都知道什么是 Android 功能来获取我的应用程序分配的内存信息，如 DDMS 中所示？

它是黄色突出显示的值：

![DDMS 堆信息](../Images/87c15ac20b80790a6f6abcffc66ab128.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:33:33.753

所以我找到了正确的功能：

```
 Runtime rt = Runtime.getRuntime();
  long heapSize = rt.totalMemory();
  long free = rt.freeMemory();
  long allocated = heapSize - free; 
```

这给出了 DDMS 报告的准确数字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T16:34:29.573

这是为了获取分配的内存 Debug.getNativeHeapAllocatedSize()

# python - 难以使用 d3 和烧瓶访问 json 文件

> ID：15481754
> 
> 赞同：6
> 
> 时间：2013-03-18T16:20:25.830
> 
> 标签：python, json, d3.js, flask

我正在使用 Flask 作为 Web 框架，并且我正在尝试实现Mike Dewar*的 D3 入门一书中的第一个示例。*我有一个名为的 Python 脚本`run.py`和两个目录`templates/`，分别`static/`包含`index.html`和[service_status.json](http://examples.oreilly.com/0636920025429/mikedewar-getting_started_with_d3-bdfc34e/visualisations/data/service_status.json)。不幸的是，我的代码根本没有呈现数据，也没有产生任何明显的错误。

这就是我所拥有的`run.py`：

```
#!/usr/bin/env python

from flask import Flask, render_template, url_for
app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

if __name__=="__main__":
    port = 5000
    app.debug = True
    app.run( port=port ) 
```

这就是我所拥有的`templates/index.html`：

```
<!DOCTYPE HTML>
<HTML>

<HEAD>
  <META CHARSET="utf-8">
  <SCRIPT SRC="http://d3js.org/d3.v3.min.js"></SCRIPT>
  <SCRIPT>
    function draw(data) {
        "use strict";
        d3.select("body")
        .append("ul")
        .selectAll("li")
        .data(data)
        .enter()
        .append("li")
        .text( function(d){
            return d.name + ": " + d.status;
            }
        );
    }
  </SCRIPT>
  <TITLE>MTA Data</TITLE>
</HEAD>

<BODY>
  <H1>MTA Availability Data</H1>
  <SCRIPT>
    d3.json("{{ url_for( 'static', filename='service_status.json') }}",draw); // <---- BIG PROBLEM
  </SCRIPT>
</BODY>

</HTML> 
```

我正在使用 Windows 7、Google Chrome 和 Python 2.7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:25:29.013

如果 JSON 文件不会更改，则应将其放在`static`目录中并使用

```
from flask import url_for
url_for('static', filename='service_status.json') 
```

为此，还要将 JavaScript 中的路径更改为`'/static/service_status.json'`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T17:09:44.187

默认情况下，像您的 json 文档这样的静态文件是从与模板不同的目录中提供的 -[默认情况下是“静态”](http://flask.pocoo.org/docs/quickstart/#static-files)

您不需要在视图中使用 url_for 调用，您可以在模板中使用它：

```
d3.json("{{ url_for('static', filename='service_status.json') }}",draw); 
```

总结一下：1）将您的 json 文档移动到静态文件夹（默认情况下，在您的模板文件夹旁边称为 static 的文件夹），以及 2）在您的模板中使用 url_for 调用来为您的 json 文档获取正确的 URI。

如果你想使用静态以外的文件夹，你可以通过传递[`static_folder`](http://flask.pocoo.org/docs/api/#application-object)给 Flask 对象构造器来改变它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:24:14.450

正如您在前面的评论中提到的，您似乎得到了 304 状态代码。我看到您的 JSON 具有以下日期/时间：

```
"Date": [
    "12/15/2011"
], 
"Time": [
    " 7:35AM"
], 
```

我不是 100% 确定，但这可能会有所帮助：

[http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#if-modified-since](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#if-modified-since)

基本上，它说

“此请求标头与 GET 方法一起使用以使其具有条件：如果请求的文档自此字段中指定的时间以来没有更改，则不会发送文档，而是发送未修改的 304 回复。此字段的格式相同至于日期：”

那么，您是否可以检查 JSON 上的时间戳并可能只是重新保存？

# c# - 在 C# 中解码嵌套的 JSON 对象

> ID：15481759
> 
> 赞同：0
> 
> 时间：2013-03-18T16:20:32.863
> 
> 标签：c#, javascript, asp.net, json

我正在尝试在 ASP.NET 服务器上转换嵌套的 JSON 对象。传入的 JSON 字符串看起来像这样 -

```
data: {
   user_id: 1,
   taskid: "1234",
   list: {
       "item-1": { one: 1, two: 2 },
       "item-2": { one: 1, two: 2 }   
       //.. where number of items is unknown
   }
} 
```

我尝试使用[JSON.Decode](http://msdn.microsoft.com/en-us/library/system.web.helpers.json.decode%28v=vs.111%29.aspx)这种方式解码数据

```
public class Data {
    public int user_id { get; set; }
    public string taskid { get; set; }
    public List<object> list { get; set; }
}

public class DataList {
    List<Data> data { get; set; }
}

// if isPost etc..

var decodedData = JSON.Decode<DataList>(Request["data"]) 
```

但是，当我尝试迭代 decodedData 时，我收到了一个错误 -

> foreach 语句无法对“ASP._Page_that_cshtml.DataList”类型的变量进行操作，因为“ASP._Page_that_cshtml.DataList”不包含“GetEnumerator”的公共定义

当我尝试以这种方式将解码数据转换为列表时 -

```
List<Data> decodedData = JSON.Decode<DataList>(Request["data"]) 
```

我抛出另一个错误

> CS0030: 无法将类型“ `ASP._Page_that_cshtml.DataList`”转换为“ `System.Collections.Generic.List<ASP._Page_that_cshtml.DataList>`”

您能否建议一种适当的方法将嵌套的 JSON 对象转换为 C# 对象并对其进行迭代？

PS：故意省略尾随分号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:24:10.440

```
List<Data> decodedData = JSON.Decode<DataList>(Request["data"]) 
```

应该

```
var decodedData = JSON.Decode<List<Data>>(Request["data"])
var myDataList = new DataList() { data = decodedData; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:22:14.963

尝试迭代`decodedData.data`。

`decodedData`是 a `DataList`，并且`DataList`该类有一个成员`data`是 a `List<Data>`。 `List<Data>`有一个`GetEnumerator`方法，由`foreach`.

或者，您可以添加一个`GetEnumerator`方法`DataList`：

```
public IEnumerator GetEnumerator() { return data.GetEnumerator(); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:23:26.897

您的示例[无效 json](http://jsonlint.com/)。您应该有一个`[]`列表集合：

```
data: {
    "user_id": 1,
    "taskid": "1234",
    "list": [
        {
            "one": 1,
            "two": 2
        },
        {
            "one": 1,
            "two": 2
        }
    ]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T16:23:53.143

您得到的第一个错误是非常正确的，您的类`DataList`不包含`GetEnumerator`foreach 语句所需的定义。您将需要迭代该属性，因此迭代decodedData.data。

第二个错误再次正确，因为您试图将 DataList 转换为 List 类型，而 C# 不知道该怎么做。您将再次需要创建 DataList，然后将属性数据设置为 List 类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T16:25:26.177

您可以尝试将 JSON 解码为 Data 对象数组，然后对该数组调用 ToList() 扩展方法。

```
var dataArray = JSON.Decode<Data[]>(Request["data"]);
var list = dataArray.ToList(); 
```

# javascript - 在 CSS3 列中获取文本？

> ID：15481764
> 
> 赞同：6
> 
> 时间：2013-03-18T16:20:49.473
> 
> 标签：javascript, html, css, html-table

我在项目中使用 CSS3 对列支持的支持（到目前为止，我发现它比大多数 JavaScript 解决方案更健壮和可靠）。

> **问题：**是否有可能以任何方式获取特定列中的文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-04T05:42:09.050

还有……什么，两个月后？我终于找到了这个问题的答案。它依赖于[document.caretRangeFromPoint (Webkit) 或 document.caretPositionFromPoint](https://developer.mozilla.org/en-US/docs/Web/API/document.caretPositionFromPoint)。

```
var getAllTextInColumn = function(rect){
    /*
        rect should be the size and x,y of the column
        { top, left, width, height }
    */

    if(document.caretRangeFromPoint){
        var caretRangeStart = document.caretRangeFromPoint(rect.left, rect.top);
        var caretRangeEnd = document.caretRangeFromPoint(rect.left+rect.width-1, rect.top+rect.height-1);
    } else {
        return null;
    }

    if(caretRangeStart == null || caretRangeEnd == null) return null;

    var range = document.createRange();
    range.setStart(caretRangeStart.startContainer, caretRangeStart.startOffset);
    range.setEnd(caretRangeEnd.endContainer, caretRangeEnd.endOffset);

    return range.toString();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:12:52.410

我唯一的猜测是开始用 替换空格`SPAN`，然后检测该 SPAN 的垂直位置何时变小，然后您就知道您在下一列。最后一个 SPAN 成为列标记。

然后，您可以复制开始/结束和/或列制造商之间的文本。

# iphone - 为什么 iPhone 应用程序会针对 iPad 而不是 iPhone 5 调整大小

> ID：15481766
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:21:01.447
> 
> 标签：iphone, ios, resize, xcode4.5

为什么 Xcode 中的原始 iPhone 应用程序（如 iPhone 4/4s 的正常屏幕尺寸）会自动为 iPad 调整大小，而不是为稍大的 iPhone 5 屏幕尺寸调整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:03:09.577

为了让 iPhone 4 的视图适合 iPad，每个点都等量缩放到两个方向。iPhone4 点的纵横比在 iPad 屏幕上不会改变。

为了使 iPhone 4 的视图适合 iPhone 5 的屏幕，每个点只能在垂直方向上进行缩放。这将扭曲每个点和视图，类似于您以错误的纵横比观看电影时得到的扭曲。iPhone 4 屏幕上的圆圈不会是 iPhone 5 上的圆圈。因此您无法像在 iPad 上那样在物理上调整像素大小。

在 iOS-Development 中，自动调整大小的面具来拯救。但是，如果自动调整大小将视图缩放到 iPhone 5 大小，则无法确定您的应用程序是否看起来不错。您必须在 iPhone 5 大小的屏幕上测试每个应用程序。苹果不想这样做，所以他们设置了一个选择加入，你必须主动启用。为此，他们选择使用 iPhone5 启动图像。

如果您的应用在垂直缩放时看起来不错，只需提供适当的启动图像。
如果您使用最佳实践来开发您的 iPhone 4 应用程序，这基本上就是您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:36:50.867

需要通过提供“Default-568h”启动图像来明确添加对 iPhone 5 的支持。

# sql - 使用操作数实现标签搜索

> ID：15481769
> 
> 赞同：1
> 
> 时间：2013-03-18T16:21:17.713
> 
> 标签：sql, search, web, tags, operators

我一直在尝试实现基于标签的搜索，用户可以使用运算符 & | 键入标签字符串。和 ！以及对搜索词进行分组的能力 [即 (X&Y)|!Z]。然后我的计划是能够将那里的短字符串翻译成一个完整的 SQL 查询，该查询可以搜索与特定标签链接的对象。

```
object    >--<    tags
object -< bond >- tags

 -----------    -----------------------    ------
| object    |  | bond                  |  | tag  |
 -----------    ---- -------- ---------    ------ 
| Id | Name |  | Id | textId | tagName |  | Name |
 ---- ------    ---- -------- ---------    ------ 
| 1  | A    |  | 1  | 1      | V       |  | V    |
| 2  | B    |  | 2  | 1      | W       |  | W    |
| 3  | C    |  | 3  | 1      | X       |  | X    |
 ---- ------   | 4  | 2      | Z       |  | Y    |
               | 5  | 3      | V       |  | Z    |
               | 6  | 3      | W       |   ------
               | 7  | 3      | X       |
               | 8  | 3      | Y       |
                ---- -------- ---------

SEARCH: 
    (X&Y)|Z

QUERY:{
    SELECT *
    FROM object
    WHERE object.id = bond.textId
    AND (
        (bond.tagName = 'X' AND bond.tagName = 'Y')
        OR bond.tagName = 'Z'
    )

RETURN: 
    2 | B
    3 | C 
```

我编写了以下内容来编译查询 [http://jsfiddle.net/wP7JR/1/](http://jsfiddle.net/wP7JR/1/)

以及以下测试我的查询 [http://sqlfiddle.com/#!2/139ca/3/0](http://sqlfiddle.com/#!2/139ca/3/0)

但是，我注意到一些问题并正在寻找指导：

*   首先，我一直在搜索和搜索讨论这个问题、这个问题的解决方案等的资源。然而，我最大的问题是我不知道最好的搜索是什么......我确信这类问题有一个名字，总是有的。

*   其次，我的 SQL 显然是业余和错误的，因为搜索 tagName <> 'Y' 我想返回对象 1 和 2，但我收到 1、2 和 3，因为对象 3 没有链接到 Y 的键。

*   我对 (tagName = 'X' & tagName = 'Y') 的搜索没有返回任何结果，我知道这样做的原因是标签 X 和 Y 同时链接的对象没有出现......

因此，因此，我正在寻找一些指导来解决我的问题。

想寻找类似的问题，解决方案（？），替代解决方案（？如果我的解决方案不是解决此问题的最佳方法）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:15:27.463

我认为您可以解决实现[Binary Expression Tree](http://en.wikipedia.org/wiki/Binary_expression_tree)的问题，然后给定该结构，您可以从最左边的节点开始创建 SQL（实际上，您必须使用 inorder、post-order 或 pre - 根据您的表达格式排序）。

其他稍微复杂一点的解决方案可能是使用词法分析器和解析器，生成您自己的语法..[阅读此](https://stackoverflow.com/questions/1823612/lexer-written-in-javascript)

作为您的其他问题，您首先必须定义运算符 '&' 会做什么.. tagname = 'X' & tagname = 'Y' 表示该项目至少有这两个标签，而不是该项目可能有 X 或 Y标签。

# symfony - 表单渲染自定义 symfony2

> ID：15481777
> 
> 赞同：0
> 
> 时间：2013-03-18T16:21:49.127
> 
> 标签：symfony

嗨，我正在尝试制作带有验证的表单。

我有这个表格：

```
<form  class="formulario" id="modificarmedico" action="{{ path('medico_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(edit_form) }}>
    <div id="mio_miobundle_medicotype">
    {{ form_row(edit_form.username) }}
    {{ form_row(edit_form.dni) }}
    {{ form_row(edit_form.nombre) }}
    {{ form_row(edit_form.apellido1) }}
    {{ form_row(edit_form.apellido2) }}
    {{ form_row(edit_form.localidad) }}
    {{ form_row(edit_form.provincia) }}
    {{ form_row(edit_form.direccion) }}
    {{ form_row(edit_form.email) }}
    {{ form_row(edit_form.telefono) }}
    {{ form_row(edit_form.movil) }}
    {{ form_row(edit_form.titulacion)}}
    {{ form_row(edit_form.numero)}}
    {{ form_row(edit_form.fechaalta)}}
    {{ form_row(edit_form.idioma)}}
    {{ form_row(edit_form.tema)}}
    {{ form_row(edit_form.color)}}
    {% if is_granted('ROLE_A') %}
        {% if entity.id == app.user.id %}
        {{ form_row(edit_form.password) }}
         {{ form_errors(form.password) }}
            <div class="empoculto"> 
                {{ form_row(edit_form.activo) }}
                {{ form_row(edit_form.generar) }}
            </div>
        {% else %}
        {{ form_row(edit_form.generar) }}
        {{ form_row(edit_form.activo) }}
        <div class="empoculto">
            {{ form_row(edit_form.password) }}
        </div>
        {% endif %}
    {% else %}
         {{ form_row(edit_form.password) }}
         {{ form_row(edit_form.password) }}
        <div class="empoculto">
        {{ form_row(edit_form.generar) }}
        {{ form_row(edit_form.activo) }}
        </div>
        {% endif %} 
```

但密码错误显示我在 div 之外。其他领域则不然：

```
<div>
   <label for="mio_miobundle_medicotype_movil" class=" required">Móvil</label>
   <ul>
      <li>El campo debe tener 9 números.</li>
      <li>El campo debe tener sólo números.</li>
   </ul>
   <input type="text" id="mio_miobundle_medicotype_movil" name="mio_miobundle_medicotype[movil]" required="required" maxlength="9" value="fgadfg" />
</div>
<div><label for="mio_miobundle_medicotype_color" class=" required">Color*</label><input type="text" id="mio_miobundle_medicotype_color" name="mio_miobundle_medicotype[color]" required="required" value="#1153ed" /></div>
<ul>
   <li>Las contraseñas deben ser iguales.</li>
</ul>
<div><label for="mio_miobundle_medicotype_password_Nueva contraseña" class=" required">Nueva contraseña</label><input type="password" id="mio_miobundle_medicotype_password_Nueva contraseña" name="mio_miobundle_medicotype[password][Nueva contraseña]" required="required" /></div>
<div><label for="mio_miobundle_medicotype_password_Repite contraseña" class=" required">Repite contraseña</label><input type="password" id="mio_miobundle_medicotype_password_Repite contraseña" name="mio_miobundle_medicotype[password][Repite contraseña]" required="required" /></div> 
```

我尝试了 form_bubbling symfony2 但没有解决我的问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:57:24.483

您的 if 语句在一种情况下将错误放在 div 中，在另一种情况下将错误放在 div 之外（实际上无法确定，因为您没有发布整个表单。）

```
 {% if entity.id == app.user.id %}
    {{ form_row(edit_form.password) }}
     {{ form_errors(form.password) }}          {# part of only one condition #}
        <div class="empoculto">                {# specifically handled here #}
            {{ form_row(edit_form.activo) }}
            {{ form_row(edit_form.generar) }}
        </div>
    {% else %}
    {{ form_row(edit_form.generar) }}
    {{ form_row(edit_form.activo) }}
    <div class="empoculto">                   {# how to handle errors #}
        {{ form_row(edit_form.password) }}    {# not specified here #}
    </div>                                    {# probably handled by #}
    {% endif %}                               {# form default #} 
```

还

```
{{ form_errors(form.password) }} 
```

应该是

```
{{ form_errors(edit_form.password) }} 
```

# facebook - 多语言开放图对象？

> ID：15481781
> 
> 赞同：5
> 
> 时间：2013-03-18T16:21:51.973
> 
> 标签：facebook, facebook-graph-api, localization

对于 Facebook 游戏，我想要具有多种语言（特别是英语和德语）标题的 Open Graph 图片对象。[我按照 Facebook 的开放图形国际化文档](https://developers.facebook.com/docs/opengraph/guides/internationalization/)中的描述做了所有事情，但不知何故，对象（和动作）总是在新闻源和活动中显示为英文标题 - 并且该应用程序在其配置中肯定是本地化的。

这是其中一个对象的 URL：http: [//apps.facebook.com/spot-it/opengraph/picture/pictures.1A24.html](http://apps.facebook.com/spot-it/opengraph/picture/pictures.1A24.html)

[如果我使用设置为 German](https://developers.facebook.com/tools/debug/og/echo?q=http://apps.facebook.com/spot-it/opengraph/picture/pictures.1A24.html?fb_locale=de_DE)的 fb_locale 参数通过 Facebook 的对象调试器获取它，我会看到：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# spot-it: http://ogp.me/ns/fb/spot-it#">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta property="og:locale:alternate" content="de_DE">
<meta property="og:locale:alternate" content="en_US">
<meta property="og:locale" content="de_DE">
<meta property="fb:app_id" content="419035224820013">
<meta property="og:type" content="spot-it:picture">
<meta property="og:url" content="http://apps.facebook.com/spot-it/opengraph/picture/pictures.1A24.html">
<meta property="og:title" content="Beißerchen">
<meta property="og:description" content="Findest du die Fehler in 'Beißerchen'?">
<meta property="og:image" content="http://d2tv32y5kdvj8c.cloudfront.net/assets/pictures/1A24_potd.jpg">
</head>
<body>
  <script type="text/javascript">
    self.location.href = "";
  </script>
</body>
</html> 
```

那么，为什么 Facebook 在向德国用户显示涉及该对象的操作时不使用德语版本呢？我做错了什么，还是开放图的国际化根本不起作用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-22T18:40:52.110

在[developers.facebook.com](https://developers.facebook.com/) > your app > “Localize”的应用设置中，您可以添加对其他语言的支持。

你可以设置：

*   显示名称
*   标语
*   描述
*   详细说明
*   权限说明
*   以及所有图片，例如徽标、图标、网页横幅、封面图片……</li>

我希望这就是你要找的；）

# javascript - 如何使用 .toggle 功能？

> ID：15481782
> 
> 赞同：0
> 
> 时间：2013-03-18T16:21:53.843
> 
> 标签：javascript, toggle, jsfiddle

我正在尝试使用`.toggle`波纹管，但它似乎不起作用。

我的目标是，当您单击单击文本时，一个框会从页面视图之外出现并水平进入某个位置。当您再次单击时，它会回到屏幕外的位置。贝娄我刚刚搞砸了垂直高度。但我似乎无法让切换功能工作？

```
$(document).ready(function () {

$("#click").toggle(Click1, Click2).click(function Click1() {
    $(".test").animate({
        top: "300px"
    });
});

$("#click").click(function Click2() {
    $(".test").animate({
        top: "30px"
    });
}); 
```

[提琴手](http://jsfiddle.net/maxmitch/UgEu6/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:37:18.760

`.toggle`为您绑定`.click`事件。你*不要同时*调用`.toggle`and `.click`。

由于您创建`Click1`and`Click2`函数的方式，它们*不会*被提升到范围的顶部。变量`Click1`和`Click2`仅在其*内部*定义，而不是在其更高范围内。

您应该像这样绑定事件：

```
$("#click").toggle(function() {
    $(".test").animate({
        top: "300px"
    });
}, function() {
    $(".test").animate({
        top: "30px"
    });
}); 
```

# facebook - facebook api 电子邮件权限

> ID：15481784
> 
> 赞同：5
> 
> 时间：2013-03-18T16:22:00.343
> 
> 标签：facebook, email, permissions

我正在使用范围电子邮件来让用户在 facebook api 上发送电子邮件。如何通过请求基本信息并通过一个简单的步骤请求电子邮件权限来获得用户电子邮件？到目前为止，我已经设法请求基本信息，然后分两步请求电子邮件权限。 [http://apps.facebook.com/slotomania/?fb_source=search&redirect_uri=http%3A%2F%2Fapps.facebook.com%2Fslotomania%2F%3Ffb_source%3Dsearch&src=yb3_22_S-C_C_A2-A11_Feb14_Sr&ref=ts&fref=ts](http://apps.facebook.com/slotomania/?fb_source=search&redirect_uri=http%3A%2F%2Fapps.facebook.com%2Fslotomania%2F%3Ffb_source%3Dsearch&src=yb3_22_S-C_C_A2-A11_Feb14_Sr&ref=ts&fref=ts)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-14T07:12:32.607

如果您进入开发者页面并单击应用设置，您可以编辑应用请求的权限。如果您单击“用户和朋友权限”字段并开始输入电子邮件，您可以告诉您的应用程序请求电子邮件权限。如果您然后单击“预览登​​录对话框”，您将看到它询问您链接到的确切内容。

![截屏](../Images/67aadf6f9cfef2be885d8dd096d88941.png)

# php - 父页面不显示在 Wordpress 网站上

> ID：15481788
> 
> 赞同：0
> 
> 时间：2013-03-18T16:22:09.157
> 
> 标签：php, wordpress

我在 Wordpress 的后端制作了三个页面（Work、Studio、CTHM+），但它们似乎没有出现在网站的前端：

[http://www.cthm.co.uk/work/](http://www.cthm.co.uk/work/)

header.php 文件已被编辑，但我不确定我是否遗漏了一些重要的东西。

```
<?php
/**
 * The Header for our theme.
 *
 * Displays all of the <head> section and everything up till <div id="main">
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */
?><!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" <?php language_attributes(); ?>>
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html <?php language_attributes(); ?>>
<!--<![endif]-->
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<title><?php wp_title( '|', true, 'right' ); ?></title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<?php // Loads HTML5 JavaScript file to add support for HTML5 elements in older IE versions. ?>
<!--[if lt IE 9]>
<script src="<?php echo get_template_directory_uri(); ?>/js/html5.js" type="text/javascript"></script>
<![endif]-->
<?php wp_head(); ?>

    <script type="text/javascript" src="http://www.cthm.co.uk/wp-content/themes/child/scripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="http://www.cthm.co.uk/wp-content/themes/child/scripts/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="http://www.cthm.co.uk/wp-content/themes/child/scripts/jquery.coda-slider-2.0.js"></script>

    <script type="text/javascript">
        $().ready(function() {
            $(".slider1").codaSlider({dynamicArrows: false, dynamicTabs: false} );          
            $(".slider1 .coda-nav-right-wrapper").mouseover(function(){ $(".nav1").css("display", "block"); });     
            $(".slider1 .coda-nav-right-wrapper").mouseout(function(){ $(".nav1").css("display", "none"); });
            $("#coda-nav-right-1 > a > .coda-nav-right-wrapper")
        }); 
    </script>   
</head>

    <body>

    <div id="header">

        <h1>
            <a href="http://www.cthm.co.uk/work">
                <img src="http://www.cthm.co.uk/wp-content/uploads/2013/02/logo2.png" alt="CTHM Logo" id="logo" width="140" height="44" />  
            </a>

<div id="contact-details">
26 Queen Anne Road, <br />
London, E9 7AH<br />
<a href="mailto:hello@cthm.co.uk">hello@cthm.co.uk</a>
</div>

        </h1>

    </div>

    <div id="content"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:34:02.047

您的标题正在显示，但您的代码错误。您需要将脚本添加到无冲突包装器中才能正常工作。如果您要添加任何类型的 javascript，我会考虑将其添加到 functions.php 部分，以便它适当地入队。

参考：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_script#Link_a_Theme_Script_Which_Depends_on_jQuery](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#Link_a_Theme_Script_Which_Depends_on_jQuery)

如何排队脚本：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

此外，如果您打算对二十十二主题进行大量更改，我还将考虑了解如何基于二十十二主题创建子主题 [http://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes)

# c# - 多线程冲突

> ID：15481794
> 
> 赞同：2
> 
> 时间：2013-03-18T16:22:29.663
> 
> 标签：c#, multithreading

我有我的 c# 表单运行两个线程，一个线程侦听数据进入，另一个正在处理数据，以便我可以使用它。由于某种原因，一旦进程线程启动，监听线程就不再执行。

```
Thread th1 = new Thread(new ThreadStart(zeroMQConn.Listen));
th1.Start();
Thread th2 = new Thread(() => ProcessData(zeroMQConn));
th2.Start(); 
```

当我调试它时，它开始 th1 进入它，然后 th2 开始，它永远不会回到 th1 并且我的数据返回 null。

```
public void Listen()
    {
        while (true)
        {
            try
            {
                byte[] zmqBuffer = new byte[102400];
                int messageLength;
                lockForZMQ.EnterWriteLock();
                messageLength = socket.Receive(zmqBuffer);
                lockForZMQ.ExitWriteLock();
                byte[] message = new byte[messageLength];
                Buffer.BlockCopy(zmqBuffer, 0, message, 0, messageLength);
                PriceBookData priceBook = PriceBookData.CreateBuilder().MergeFrom(message).Build();
                double Type = priceBook.GetPb(0).QuoteType;
                if (Type == 0.0)
                {
                    lockForList.EnterWriteLock();
                    CachedBidBooks = priceBook;
                    lockForList.ExitWriteLock();
                }
                else
                {
                    lockForList.EnterWriteLock();
                    CachedAskBooks = priceBook;
                    lockForList.ExitWriteLock();
                }
            }
            catch (ZmqException ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    }

 public void ProcessData(object connection)
    {
        while (true)
        {
            priceBookData = ((ZeroMQClass)connection).GetPriceBook();
        }

    }

 public List<PriceBookData> GetPriceBook()
    {
        List<PriceBookData> AskAndBid = new List<PriceBookData>();
        lockForList.EnterWriteLock();
        if (CachedAskBooks != null && CachedBidBooks != null)
        {
            AskAndBid.Add(CachedBidBooks);
            AskAndBid.Add(CachedAskBooks);
            CachedBidBooks = null;
            CachedAskBooks = null;
            lockForList.ExitWriteLock();
            return AskAndBid;
        }
        lockForList.ExitWriteLock();
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:35:08.573

您在这里拥有的是生产者-消费者模型，但您没有正确同步它们。问题在于，您拥有一个变量，并且您完全同步了对该变量的访问，而不是某种类型的缓冲区或准备处理的数据集合。这意味着生产者永远不能在消费者工作时工作。

每当处理生产者/消费者队列时，这`BlockingCollection<T>`是一个*很棒的类。*

```
var queue = new BlockingCollection<PriceBookData>();

Task.Factory.StartNew(() =>
{
    while (true)
    {
        byte[] zmqBuffer = new byte[102400];
        int messageLength;
        socket.Receive(zmqBuffer);
        byte[] message = new byte[messageLength];
        Buffer.BlockCopy(zmqBuffer, 0, message, 0, messageLength);
        PriceBookData priceBook = PriceBookData.CreateBuilder().MergeFrom(message).Build();
        double Type = priceBook.GetPb(0).QuoteType;
        queue.Add(priceBook);
    }
}, TaskCreationOptions.LongRunning);

Task.Factory.StartNew(() =>
{
    foreach (var item in queue.GetConsumingEnumerable())
    {
        //do stuff with item
    }
}, TaskCreationOptions.LongRunning); 
```

# c - C中的段错误链表递归

> ID：15481797
> 
> 赞同：0
> 
> 时间：2013-03-18T16:22:51.933
> 
> 标签：c, recursion, linked-list, segmentation-fault

我不知道为什么我会出现段错误。基本思想是使用链表以递归方式插入整数。

```
node* insert(node** head, int integer)
{
    node* temp = malloc(sizeof(node));
    node* temp1;
    node* newNode;

    if(*head == NULL)
    {
        temp->num = integer;
        temp->next = *head;
        *head = temp;
    }
    else if((*head)->num > integer)
    {
        temp = *head;
        temp1 = temp->next; //breaks the link
        temp->next = newNode;   //creates a new node
        newNode->num = integer;  //adds int
        newNode->next = temp1;   //links new node to previously broken node 
        temp1->next = *head; //next node is NULL 
        *head = temp1;  //Makes next node head again
    }

    else
        insert(&((*head)->next), integer);

    return(temp);
} 
```

我在 GDB 中运行了这段代码，它出现了错误，`temp1->next = *head`但我不明白为什么。我什至放了笔记来帮助自己，但我想它不起作用。有人可以告诉我为什么我会出现段错误吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:25:56.313

```
temp1 = temp->next; 
```

应该是之前

```
temp = *head; 
```

如果`(*head)->num > integer`你想在标题中插入整数，那么你的代码会很复杂而且是错误的。你可以这样做：

```
else if((*head)->num > integer)
    {
        temp->next = *head;
        temp->num = integer;
        *head = temp;
    } 
```

和

```
temp = malloc(sizeof(node)); 
```

应该只调用到

```
if(*head == NULL) 
```

并进入

```
else if((*head)->num > integer) 
```

所以你的最终功能可能是这样的

```
node* insert(node** head, int integer)
{
    node* temp;

    if(*head == NULL)
    {
        temp = malloc(sizeof(node));
        temp->num = integer;
        temp->next = *head;
        *head = temp;
    }
    else if((*head)->num > integer)
    {
        temp = malloc(sizeof(node));
        temp->next = *head;
        temp->num = integer;
        *head = temp;
    }

    else
        temp = insert(&((*head)->next), integer);

    return(temp);
} 
```

我使用以下方法测试插入功能：

```
int main (void) {

   node *tmp, *head = NULL;
   insert(&head, 5);
   insert(&head, 7);
   insert(&head, 3);
   insert(&head, 6);
   insert(&head, 4);
   insert(&head, 2);

   for (tmp = head; tmp!=NULL; tmp = tmp->next) {
        printf("tmp->num  %d\n",tmp->num);
   }

} 
```

它成功了！

```
$ ./test
tmp->num  2
tmp->num  3
tmp->num  4
tmp->num  5
tmp->num  6
tmp->num  7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:29:09.443

所以你第一次经历这个时， head 是空的，你有一个案例。

下一次遍历，head有指针，没有next节点。head->next 为 NULL。

所以当你到达：

```
temp1 = temp->next; 
```

那就是将它设置为NULL。当你到达

```
temp1->next = *head; //next node is NULL 
```

哇，temp1 为空。没有 temp1->next 之类的东西，它正在寻找一个没有的结构。

**编辑：**
当你设置`temp = *head`. 在确定需要内存之前，您可能不应该分配内存。`insert()`我的意思是，每次数字小于目标时，您都会调用一个新实例。每次通过时，您都会分配一些您实际不使用的内存。您可能想为 分配内存`newnode`，而不是`temp`。

而且您可能应该使用更好的命名方案。我的意思是，你第二次调用插入时，它不再是头部。`integer`可能更像是`intToInsert`or `newValue`。`temp1`更像是`savedTail`。小问题，但它有助于保持正确，这是一个养成的好习惯。

最后，想想当你遍历列表，找到新项目所属的位置，创建一个新节点，将它的`->next`字段设置为尾部的其余部分并返回时会发生什么。... 怎么办？前一个节点的`next`值仍然指向它之前的值。您还需要更新该链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:35:18.237

假设链表当前只有一个节点。

所以 *head = 某个节点。

*head->下一个 = NULL。

现在让我们看一下代码：

```
node* insert(node** head, int integer)
{
    node* temp = malloc(sizeof(node));
    node* temp1;
    node* newNode;

    if(*head == NULL)  // condition = false
    {
        temp->num = integer;
        temp->next = *head;
        *head = temp;
    }
    else if((*head)->num > integer)  // let's assume condition = true
    {
        temp = *head;
        temp1 = temp->next; //breaks the link   // temp1 = NULL
        temp->next = newNode;   //creates a new node  // temp1 is not changed
        newNode->num = integer;  //adds int
        newNode->next = temp1;   //links new node to previously broken node 
        temp1->next = *head; //next node is NULL // NULL->next !!!
        *head = temp1;  //Makes next node head again
    }

    else
        insert(&((*head)->next), integer);

    return(temp);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:27:29.323

```
*head = temp1; 
```

应该是之前

```
temp1->next = *head; 
```

# ipad - 是否可以在 iPad 上的 Chrome 上访问语音识别？

> ID：15481798
> 
> 赞同：0
> 
> 时间：2013-03-18T16:23:00.413
> 
> 标签：ipad, google-chrome

iPad 上的 Chrome 支持对您的搜索进行语音识别。您也可以[在自己的网页](http://www.labnol.org/software/add-speech-recognition-to-website/19989/)中使用它。

但它不适用于带有 Chrome 的 [我的] iPad 2。

我在网上找不到任何东西表明 iPad 是否支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:36:10.777

由于 Apple 的政治，也就是说应用程序不能“复制 iPhone 附带的功能”，应用程序商店中的所有功能齐全的浏览器都必须是 Safari 的外壳（默认 iOS webkit）。这意味着 iOS 版 Google Chrome 实际上只是外观不同的 Safari，并且不包含 Chrome 特定的 API。

# java - 更改另一个 MenuItem onClick of one

> ID：15481803
> 
> 赞同：0
> 
> 时间：2013-03-18T16:23:06.170
> 
> 标签：java, android

我的问题是我想将 MenuItem 的图标从可见更改为不可见，但这当然需要通过 onOptionsItemSelected 进行。如果我调用菜单，它会获取单击的 MenuItem，而需要隐藏另一个。而且我还检查了定义 MenuItem 和 findViewById，因为它没有视图，所以它不起作用。让我向您展示我的代码的一部分以使其更清楚：

```
@Override
public boolean onOptionsItemSelected(MenuItem menu) {
    switch (menu.getItemId()) {
    case R.id.menu_refresh:
        // Stuff
    case R.id.menu_settings:
        (Somehow point to R.id.menu_refresh).setVisible(false);
    }
    return super.onOptionsItemSelected(menu);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:30:16.263

如果你在做一个 2.3 风格的菜单，你不要在 onOptionsItemSelected 中改变它。您在下次启动菜单时在 onPrepareOptionsMenu 中执行此操作（通过保存适合保存的任何数据）。

如果您有操作栏，则需要在活动上调用 invalidateOptionsMenu 以重新加载菜单，并在创建函数中进行禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:32:42.057

我从[文档](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)中读到的内容，对于这种情况有一种特殊的方法：`onPrepareOptionsMenu(Menu menu)`.

> 准备要显示的屏幕标准选项菜单。每次显示菜单时，都会在菜单显示之前调用它。您可以使用此方法有效地启用/禁用项目或以其他方式动态修改内容。

所以这使它更像这样：

```
@Override
public boolean onOptionsItemSelected(MenuItem menu) {
    switch (menu.getItemId()) {
    case R.id.menu_refresh:
        // Stuff
    case R.id.menu_settings:
        showRefresh = false;
        //Stuff
    }
    return super.onOptionsItemSelected(menu);
}
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    menu.findItem(R.id.menu_refresh).setVisible(showRefresh);
    return super.onPrepareOptionsMenu(menu);
} 
```

# python - matplotlib：如果我设置无花果高度，x 图例被切断

> ID：15481808
> 
> 赞同：4
> 
> 时间：2013-03-18T16:23:17.660
> 
> 标签：python, matplotlib, plot

我正在尝试`fig1.set_size_inches(5.5,3)`在 python 上设置图形大小，但该图会产生一个图形，其中 x 标签不完全可见。图形本身有我需要的大小，但里面的轴似乎太高了，x 标签不再适合了。

这是我的代码：

```
fig1 = plt.figure()
fig1.set_size_inches(5.5,4)
fig1.set_dpi(300)
ax = fig1.add_subplot(111)
ax.grid(True,which='both')
ax.hist(driveDistance,100)
ax.set_xlabel('Driven Distance in km')
ax.set_ylabel('Frequency')
fig1.savefig('figure1_distance.png') 
```

这是结果文件：

![5.5x3 英寸的图像](../Images/05a15bdf3200b794e95112369bd6f86b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T16:34:24.180

您可以订购 save 方法以考虑 x-label 的艺术家。

这是通过 bbox_extra_artists 和紧凑布局完成的。结果代码将是：

```
import matplotlib.pyplot as plt
fig1 = plt.figure()
fig1.set_size_inches(5.5,4)
fig1.set_dpi(300)
ax = fig1.add_subplot(111)
ax.grid(True,which='both')
ax.hist(driveDistance,100)
xlabel = ax.set_xlabel('Driven Distance in km')
ax.set_ylabel('Frequency')
fig1.savefig('figure1_distance.png', bbox_extra_artists=[xlabel], bbox_inches='tight') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:34:35.447

如果我用`figsize`and初始化图形`dpi`，它对我有用`kwargs`：

```
from numpy import random
from matplotlib import pyplot as plt
driveDistance = random.exponential(size=100)
fig1 = plt.figure(figsize=(5.5,4),dpi=300)
ax = fig1.add_subplot(111)
ax.grid(True,which='both')
ax.hist(driveDistance,100)
ax.set_xlabel('Driven Distance in km')
ax.set_ylabel('Frequency')
fig1.savefig('figure1_distance.png') 
```

![驾驶距离](../Images/e38cec70d35a5825bf8c4b43c90c28e3.png)

# algorithm - 什么是 AABB Box 相交真/假检测算法的 3d 矢量？

> ID：15481812
> 
> 赞同：0
> 
> 时间：2013-03-18T16:23:32.513
> 
> 标签：algorithm, math, graphics, geometry

假设我们有一个 AABB（[Axis Aligned Bounding Box](http://encyclopedia.thefreedictionary.com/Axis-Aligned+Bounding+Box)），通过 2 个最小/最大向量 P、Q 形式 [x,y,z] 和一个向量 R 定义，我们尝试与它相交，形式相同。矢量 P、Q 和 R 的原点位于同一点 [0,0,0]。如何检测R是否与AABB相交？结果可能是真或假——不需要交点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:11:02.393

人们通常想要做的是将射线而不是矢量与 AABB 相交。我不确定将向量与 AABB（可能是射线的有限部分）相交意味着什么，在这种情况下，ray-AABB 算法可能会为您解决。参见 Andrew Woo 在“Graphics Gems”一书中的“Fast Ray-Box Intersection”。[程序代码](http://tog.acm.org/resources/GraphicsGems/gems/RayBox.c)可在线获取。

# .htaccess - 使用 htaccess 将损坏的 index.html 文件重定向到主页

> ID：15481813
> 
> 赞同：0
> 
> 时间：2013-03-18T16:23:35.147
> 
> 标签：.htaccess, mod-rewrite, redirect

我想`index.html`使用 htaccess 将损坏的文件从子文件夹重定向到主页

例子：-

```
http://blogs.hds.com/hdsblog/category/
http://blogs.hds.com/hdsblog/category/sustainability/page/ 
```

是损坏的链接（由 Google 网站管理员报告）。这些不存在。

我想更新我的 htaccess 文件，以便这些 URL 自动重定向到我网站的主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:11:40.517

[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)您可以对这些 URL使用简单的

```
RewriteRule ^hdsblog/category/ / [R,L] 
```

这会将所有以 开头的请求重定向`/hdsblog/category/`，包括`/hdsblog/category/sustainability/page/`到您的主页`http://blogs.hds.com/`。

如果只想重定向这些确切的请求，则必须指定多个`RewriteRule`s

```
RewriteRule ^hdsblog/category/$ / [R,L]
RewriteRule ^hdsblog/category/sustainability/page/$ / [R,L] 
```

# android - 当活动开始时，所有 OnClickListeners 都会在一个瞬间做出反应

> ID：15481818
> 
> 赞同：0
> 
> 时间：2013-03-18T16:23:42.310
> 
> 标签：android, view, android-activity, onclick, onclicklistener

我有活动`ListView`。我需要添加几个项目`userWillGo`并添加`OnClickListener`到它们。

这是一个简单的代码，它不起作用，因为我`OnClickListeners`只有在活动开始时才能得到所有项目的反应。

```
 public class UserDetailActivity extends Activity{
    ...
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.l_user_detail);

            Intent intent = getIntent();
            User user = (User) intent.getSerializableExtra("class");
            ...

            userWillGo = (LinearLayout) findViewById(R.id.linerLayout_userDetail_willGoTO);
            if (user.getUserWillGo().size() > 0)
                for (int i = 0; i < user.getUserWillGo().size(); i++) {
                    View myView = (View) LayoutInflater.from(getApplicationContext()).inflate(R.layout.item_list, userWillGo, false);
                    ...
                    myView.setOnClickListener(mOnClickListener(this, curentEvent));
                    userWillGo.addView(myView);
                }

                ...
        }

        private View.OnClickListener mOnClickListener(UserDetailActivity userDetailActivity, Event curentEvent) {
            Intent i = new Intent(userDetailActivity, EventDetailActivity.class);
            i.putExtra("class", curentEvent);
            startActivity(i);
            return null;
        } 
```

帮助修复此错误。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:27:05.277

你声明`mOnClickListener`为一个返回的函数`null`，但它的名字表明你想`mOnClickListener`成为一个变量......

```
private View.OnClickListener mOnClickListener(UserDetailActivity userDetailActivity, Event curentEvent) {
    ...
    return null;
} 
```

您需要创建一个自定义类来接受您的参数，创建此类的一个实例，然后使用它。

* * *

再三考虑，您可以使用以下内容：

```
private View.OnClickListener createOnClickListener(UserDetailActivity userDetailActivity, final Event currentEvent) {
    return new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(v.getContext(), EventDetailActivity.class);
            i.putExtra("class", currentEvent);
            startActivity(i);
        }
    };
} 
```

（有了这个版本，你甚至不需要`userDetailActivity`。）

# python - 在 python 中使用 re.search 时执行时间增加

> ID：15481821
> 
> 赞同：1
> 
> 时间：2013-03-18T16:23:50.680
> 
> 标签：python, regex

我正在处理一个 500MB 的文件。使用研究时处理时间增加。

请找到我测试过的以下案例。在所有情况下，我都在逐行读取文件并且只使用一个`if`条件。

情况1：

```
prnt = re.compile(r"(?i)<spanlevel level='7'>")
if prnt.search(line):
print "Matched"
out_file.write(line)
else:
out_file.write(line) 
```

读取整个文件需要 16 秒。

案例2：

```
if re.search(r"(?i)<spanlevel level='7'>",line):
print "Matched"
out_file.write(line)
else:
out_file.write(line) 
```

读取文件需要 25 秒。

案例3：

```
if "<spanlevel level='7'>" in line:
print "Matched"
out_file.write(line)
else:
out_file.write(line) 
```

读取文件仅需 8 秒。

有没有人能告诉我这三种情况的区别。Case3 的处理速度非常快，但我无法进行不区分大小写的匹配。如何在 Case3 中进行不区分大小写的匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:26:10.413

首先搜索 case 3 不区分大小写：

```
if "<spanlevel level='7'>" in line.lower(): 
```

通过 lowercasing `line`，您可以进行小写搜索。

至于为什么情况 2 慢得多：使用预编译的正则表达式会更快，因为这样您就可以避免从文件中读取的每一行的正则表达式模式的缓存查找。在引擎盖下，如果没有缓存副本已经存在并且额外的函数调用和缓存检查会花费你，`re.search()`也会调用。`re.compile()`

[`functools.lru_cache`这对 Python 3.3 来说是双重痛苦的，它使用装饰器](http://docs.python.org/3/library/functools.html#functools.lru_cache)切换到新的缓存模型，实际上比以前的实现要慢。请参阅[为什么在 Python 3 中未编译、重复使用的正则表达式要慢得多？](https://stackoverflow.com/questions/14756790/why-are-uncompiled-repeatedly-used-regexes-so-much-slower-in-python-3/14757032#14757032)

A simple text search with `in` is faster for exact text matches. Regular expressions are great for complex matching, you are simply looking for an exact match, albeit case insensitive.

# php - 将 JSON 字符串从 MySQL 和 INSERT 名称/值对解析到 MySQL

> ID：15481824
> 
> 赞同：1
> 
> 时间：2013-03-18T16:23:54.087
> 
> 标签：php, mysql, json

1.  我在“table_one”（MySQL）中有一个名为“other”的列，其中包含一个 JSON 字符串。

2.  该表有数百万条记录。

3.  A. 我想遍历 'table_one'，从 'other' 和 B. 读取所有 $values 到表 2（'table_two'）中相应的 $key 列中。foreach $row (?)

4.  我已经在“table_2”中创建了列。

5.  我宁愿不（我认为）从“table_one”创建一个静态文件（/path/some.json），因为与直接从数据库中读取相比，它似乎效率低下。

6.  JSON 中的某些值将为空，并且缺少某些键/值对。因此，能够“动态地”获取 $key(s) 和 $value(s) - 如果它们不存在则不会出错 - 是理想/关键的。

“其他”中的 JSON 示例：

```
{“firstName”：“Bob”，“lastName”：“Jones”，“email”：“bob.jones@yahoo.com”，“address”：“7206 maplehurst drive”，“city”：“PORT RICHEY”， “州”：“FL”，“zip”：“34668”，“ipAddress”：“208.54.85.233”，“性别”：“M”，“employer_name”：“bobs auto”，“months_address”：“2” , "years_address": "12"}
```

你会（我会）认为现在会有标准功能来解决这个问题。如果有，我再次道歉。

目前，我正在使用 ETL 工具来执行一个简单但极其复杂的修剪/拆分/映射过程。每个 JSON 字符串有 45 对。表结构的任何细微调整都需要重新映射整个事物。

*适用于 PHP、MySQL、JavaScript、jQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-06T15:27:32.420

110 天前提出的问题有点晚了，但是......

查看 common_schema，一个 MySQL 附加库： [http](http://code.google.com/p/common-schema/) ://code.google.com/p/common-schema/ 它有一个使用 XPath 说明符的 extract_json_value 函数。需要注意的是，它不会解析 JSON 数组（只是将数组值作为空格分隔的字符串返回）并且似乎不喜欢数组中未加引号的数字值。

是的，common_schema 还做了其他很酷的事情。

更强大的是这个可以解析（格式良好的）JSON 字符串的 UDF： [https ://github.com/kazuho/mysql_json](https://github.com/kazuho/mysql_json)

在带有 MySQL 5.5.29 的 Ubuntu 10.04.4 LTS 上轻松编译，而且速度非常快。需要注意的是，当它解析为不是值的东西时，它会返回字符串“object”，并且需要指定一系列属性键比 common_schemas.extract_json_value 的 XPath 说明符更尴尬。

更新：唉，common_schema a) 已关闭，并且 b) 与 MySQL 5.7 不兼容。Percona 可能会在某个时候更新它，但我没有屏住呼吸。

更新：**MySQL 5.7.8+ 具有原生 JSON 字段和函数**。JSON 函数使用路径，健壮且相当快。使用生成的（存储的）字段（希望虚拟字段的索引支持）有一些复杂的索引机会。注意事项（从 5.7.9 开始）：MySQL 可能会重新排序您的键，并且重复键的后续值被丢弃（这与许多其他丢弃重复键的先前值的 JSON 处理程序不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T05:10:51.203

mysql_json - 用于解析 JSON 的 MySQL UDF 适用于 Ubuntu 12.04.5 上的 gcc 版本 4.6.3 和 MySQL 5.5

它有说明如何安装和如何使用它的例子： [https ://github.com/ChrisCinelli/mysql_json](https://github.com/ChrisCinelli/mysql_json)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:02:17.560

我不知道标准功能，但我根据自己的心情以两种方式完成了。

**可靠的方法：** 写一个PHP脚本从DB读取，使用json_decode将json数据转换为数组，最后写回DB

**快速方法（当我懒惰以适当的方式做时）：** 使用定位和子字符串获取键之后的值直到下一个键，如下所示

```
substring(task_time_breakup, locate('","key1":"', task_time_breakup)+7, locate('""}',task_time_breakup)-locate('","key1":"', task_time_breakup)-7 ) 
```

# php - Mysql更新不更新

> ID：15481825
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:23:57.910
> 
> 标签：php, mysql

我在更新 mysql 数据库中的一行时遇到问题。我创建了一个文本区域，其中包含来自新闻文章的数据。如果我编辑数据并尝试更新它，什么也不会发生。我知道 mysql 扩展已贬值，所以请不要对此发表评论。

```
<?php
include 'db.php';

$data = mysql_query("SELECT news_content FROM news WHERE id= 1") ;
$info = mysql_fetch_array($data);
$news= $info['news_content']; 
?>
<h3>EDIT NEWS ARTICLE</h3>

<form id="EditNews" name="EditNews" method="POST"action="edit.php">            
<textarea rows="40" cols="90" name="editnewstext"><?php echo $news?></textarea> 
<input type="submit" name="Edit_News" id="Edit_News">

<?php
if(isset($_POST['Edit_news'])) {
    $contents= $_POST['editnewstext'];
    $sqlupdate = "UPDATE news SET news_content ='$contents' WHERE id=1";
    mysql_query($sqlupdate) or die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:30:49.820

```
<input type="submit" name="Edit_News" id="Edit_News">
                           ^^^^^^^^^^

if(isset($_POST['Edit_news'])) {
                 ^^^^^^^^^ 
```

大小写不匹配。PHP 数组键区分大小写。

话虽如此，您的代码对于[SQL 注入攻击](http://bobby-tables.com)是开放的。享受获得您的服务器 pwn3d 的乐趣。

# mysql - 返回 MySQL 中选择语句的实际持续时间

> ID：15481830
> 
> 赞同：1
> 
> 时间：2013-03-18T16:24:04.253
> 
> 标签：mysql, sql, time

当您在 MySQL 命令行中执行类似于下面的 SELECT 查询时。

```
SELECT * FROM MASTER LIMIT 1000; 
```

它返回：

> 集合中的 1000 行 <0.00 秒>

显然需要大约 1.5 秒以上才能完成。

谁能告诉我为什么会这样，甚至更好的是如何获得真实的持续时间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:27:59.860

1.5+ 秒意味着从数据库中获取行所需的时间。

您可以使用`SHOW ENGINE INNODB STATUS`打印活动交易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:28:50.060

您可以打开分析：

`set profiling=1`

然后;

`show profile for query...`

[http://dev.mysql.com/doc/refman/5.0/en/show-profile.html](http://dev.mysql.com/doc/refman/5.0/en/show-profile.html)

# java - Java：为什么在函数中更改数组的地址，当我们从该函数返回时不会更改其地址？

> ID：15481832
> 
> 赞同：0
> 
> 时间：2013-03-18T16:24:07.707
> 
> 标签：java, arrays, function, memory-address

我的意思是，当我们从该函数返回时，数组的地址与我们进入函数之前的地址相同。一个例子：

```
 class sdasd {
     public static void main(String[] args){
            int[] obj = new int [7];
            //obj has an address
            sdasd t = new sdasd();
            t.func(obj);
            //obj has the same address as before!!
            }
     void func(int[] obj){
        int[] otherObj = new int[13];
        obj=otherObj;``
        //we changed the address of the array 'obj'?
        }
   } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:28:13.753

在被调用函数`obj`中是**对数组的引用的副本**。这样你就有了，就在你进入的时候`func`，可以说是

```
 main::obj --> int[7];
  func::obj --> int[7]; 
```

分配新数组后，您有

```
 main::obj --> int[7];
  func::obj --> int[13]; 
```

参数是按值传递的，因此会创建它们的副本。当它是引用时，引用的副本指向原始对象；对引用的更改是该方法的本地更改（但对对象本身的更改由所有引用共享！）

为了明确最后一点，如果你已经完成了，而不是分配一个新的参考，就像

```
 void func(int[] obj) {
     obj[1] = 69;
 } 
```

那么变化将从`main::obj`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:25:40.290

那是因为对的*引用*是按`obj`值传递给`func`. 因此，在您的方法`func`中，您已将本地引用更改为新数组，但 main`obj`仍然引用原始数组。在 Java 中，数组也是对象，因此数组被声明为引用，就像普通对象一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:31:23.760

*   那是因为当您将 obj 数组传递给 func() 时，它实际上创建了数组 'obj' 的一个副本，然后将其作为参数传递。

    因此，对副本的任何更改都不会影响您原来的“obj”。

# c - 使用字节矩阵进行 LED 矩阵模式操作

> ID：15481835
> 
> 赞同：0
> 
> 时间：2013-03-18T16:24:15.000
> 
> 标签：c, matrix, arduino, dynamic-allocation, led

关于如何实现将字节矩阵添加到某些“模式”结构向量的函数，我几乎没有疑问。

这是我的代码结构：

```
struct pattern<br>
{
    byte** map;
    int size;
};

struct pattern* pvec;
int patterns = 0;

void add_pattern(byte** map, int size)
{
    struct pattern p;
    int i;

    p.size = size;

    p.map = (byte**) malloc(p.size * sizeof(byte*));
    for (i = 0; i < size; i++)
        p.map[i] = (byte*) malloc(4 * sizeof(byte));

    p.map = map;

    pvec[patterns] = p;
    patterns++;
} 
```

还有一个字节矩阵的例子：

```
{
    {B1000,B0000,B0000,B0000},
    {B0100,B0000,B0000,B0000},
    {B0010,B0000,B0000,B0000},
    {B0001,B0000,B0000,B0000},
    {B0000,B0001,B0000,B0000},
    {B0000,B0000,B0001,B0000},
    {B0000,B0000,B0000,B0001},
    {B0000,B0000,B0000,B0010},
    {B0000,B0000,B0000,B0100},
    {B0000,B0000,B0000,B1000},
    {B0000,B0000,B1000,B0000},
    {B0000,B1000,B0000,B0000}
} 
```

但我认为这不是一个好方法，因为我不知道如何将这个 byte** 参数发送给函数，考虑到我有一些“字节行”比其他模式少的模式。

我怎样才能以另一种方式做到这一点？也许发送一个预先构建的模式结构作为参数？

# asp.net - Gridview 中的按列更新

> ID：15481836
> 
> 赞同：0
> 
> 时间：2013-03-18T16:24:20.197
> 
> 标签：asp.net, gridview

我有一个绑定到 ObjectDataSource 的网格视图。用户完成数据更新后，我想将他们的用户名或用户 ID 放在 UpdatedBy 列中，以跟踪谁更新了哪些记录。UpdatedBy 列可以在页面上隐藏或只读，因此用户不能只在其中放置任何文本。

这是我的 UpdatedBy 字段：

```
 <asp:BoundField DataField="UpdatedBy" HeaderText="Updated By" SortExpression="UpdatedBy" />
    <asp:TemplateField HeaderText="Updated By">
        <asp:itemTemplate>
            <asp:Label ID="lblUpdatedBy" runat="server" Text='<% #Eval("UpdatedBy") %>' Width="30" ></asp:Label>
        </asp:itemTemplate>
        <asp:editItemTemplate>
            <asp:TextBox ID="txtUpdatedBy" runat="server" CssClass="Gridview_EditItem" Text='<% #Bind("UpdatedBy") %>' Width="30" ></asp:TextBox>
        </asp:editItemTemplate>
    </asp:TemplateField> 
```

我将更新代码放在 RowUpdating 事件中，但由于某种原因它不起作用。

```
protected void gvProductQuery_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
   GridViewRow gr = gvProductQuery.Rows[e.RowIndex];
   TextBox tb = gr.FindControl("txtUpdatedBy") as TextBox;
   tb.Text = cUser.DomainLogin;
} 
```

上面代码中的 tb 为 Null。请帮忙。或者有没有更简单的方法来做到这一点？我正在使用 VS2012

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:31:40.987

试试这个：

```
protected void gvProductQuery_RowEditing(object sender, GridViewEditEventArgs e)
{
   gvProductQuery.EditIndex = e.NewEditIndex;
   gvProductQuery.DataBind();
}

protected void gvProductQuery_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
   GridViewRow row = gvProductQuery.Rows[gvLevels.EditIndex];
   TextBox tb = row.FindControl("txtUpdatedBy") as TextBox;
   tb.Text = cUser.DomainLogin;
} 
```

# asp.net - Empty TextBox1.Text 给我一个错误

> ID：15481837
> 
> 赞同：0
> 
> 时间：2013-03-18T16:24:23.300
> 
> 标签：asp.net, sql-server, vb.net, .net-1.1, asp.net-1.1

我在我的网络表单上收到以下错误消息：

```
Cast from string "" to type 'Date' is not valid. 
```

我假设这是因为这条线（但我的假设可能不正确）：

```
command.Parameters.Add(New SqlParameter("col3", SqlDbType.DateTime, 8)).Value = some_date_parameter 
```

在一个函数中：

```
Function ProcessAction(ByVal col1 As Integer, ByVal col2 As String, ByVal col3 As Date, ByVal col4 As Integer, ByVal col5 As String) as something

    '...
    command.Parameters.Add(New SqlParameter("@col1", SqlDbType.Int, 4)).Value = col1
    command.Parameters.Add(New SqlParameter("@col2", SqlDbType.VarChar, 255)).Value = col2
    command.Parameters.Add(New SqlParameter("@col3", SqlDbType.DateTime, 8)).Value = col3
    command.Parameters.Add(New SqlParameter("@col4", SqlDbType.Int, 4)).Value = col4
    command.Parameters.Add(New SqlParameter("@col5", SqlDbType.VarChar, 255)).Value = col5

    '...

    Return something

End Function 
```

通过按钮调用：

```
Sub ButtonClick(ByVal Source As Object, ByVal E As EventArgs)

    '...

    structRecord = ProcessAction(TextBox1.Text, TextBox2.Text, TextBox3.Text, TextBox4.Text, TextBox5.Text)

    '...

End Sub 
```

在哪里`structRecord`：

```
Public Structure structRecord
    Public col1 As Integer
    Public col2 As String
    Public col3 As Date
    Public col4 As Integer
    Public col5 As String
End Structure 
```

实际错误在运行时显示在此行中，位于`ButtonClick`：

```
structRecord = ProcessAction(TextBox1.Text, TextBox2.Text, TextBox3.Text, TextBox4.Text, TextBox5.Text) 
```

如何纠正这个问题？我基本上希望允许用户继续使用 webapp 的其余部分，即使它`TextBox3.Text`是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:33:06.070

您可以尝试使用 dateTime.TryParse 方法来验证您传入的字符串是有效的日期/时间值。

[http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:30:02.873

通常，您将测试您的输入以确保它们在有效或可接受的范围内。

如果是日期，您需要验证该值是否会转换为日期，如果是，请将其作为参数传递。如果它不是有效日期，那么您可以将空值传递给查询。

查询应该足够聪明，可以接受日期或空值；但是，如果没有该查询，我将无法帮助您。

# arm - 使用 NEON 减去两个图像

> ID：15481839
> 
> 赞同：2
> 
> 时间：2013-03-18T16:24:26.980
> 
> 标签：arm, neon, intrinsics

我正在尝试通过使用 Neon 内在函数作为练习来减去两个图像（灰度），我不知道使用 C 内在函数减去两个向量的最佳方法是什么。

```
void subtractTwoImagesNeonOnePass( uint8_t *src, uint8_t*dest, uint8_t*result, int srcWidth)
{

    for (int i = 0; i<srcWidth; i++)
    {
        // load 8 pixels
        uint8x8x3_t srcPixels  = vld3_u8 (src);
        uint8x8x3_t dstPixels  = vld3_u8 (src);
        // subtract them
        uint8x8x3_t subPixels =  vsub_u8(srcPixels, dstPixels);
        // store the result
        vst1_u8 (result, subPixels);
        // move 8 pixels
        src+=8;
        dest+=8;
        result+=8;

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:22:23.017

看起来您使用了错误类型的加载和存储。您是否从三通道示例中复制了此内容？我认为这是你需要的：

```
#include <stdint.h>
#include <arm_neon.h>

void subtractTwoImagesNeon( uint8_t *src, uint8_t*dst, uint8_t*result, int srcWidth, int srcHeight)
{
    for (int i = 0; i<(srcWidth/8); i++)
    {
        // load 8 pixels
        uint8x8_t srcPixels = vld1_u8(src);
        uint8x8_t dstPixels = vld1_u8(dst);
        // subtract them
        uint8x8_t subPixels = vsub_u8(srcPixels, dstPixels);
        // store the result
        vst1_u8 (result, subPixels);
        // move 8 pixels
        src+=8;
        dst+=8;
        result+=8;
    }
} 
```

您还应该检查 srcWidth 是否是 8 的倍数。此外，您需要包括图像的所有行，因为您的代码似乎只处理第一行（也许您知道这一点，只需减少示例简单）。

# java - JSP EL/Apache Tiles --- 返回对象有复合键

> ID：15481844
> 
> 赞同：1
> 
> 时间：2013-03-18T16:24:36.287
> 
> 标签：java, spring, jsp, jakarta-ee, spring-roo

我使用 Spring MVC/Apache Tiles 发现了一个问题。

update.jspx 为当前实体（Position.java）提供了一个更新表单，它有一个复合键：

```
@RooJpaActiveRecord(persistenceUnit = "theUnit", transactionManager = "theManager", table = "theTable", identifierType = PositionPK.class)
Class Position{
    //User user;
    //Role role;
    //other fields....
} 
```

它是一个旧的遗留类，使用`User`和`Role`作为复合键（这意味着它不是一个好的设计，但我们必须忍受它）。所以我有另一个使用@RooIdentifier 的复合键类

```
@RooIdentifier
Class PositionPK extends Serializable {
    User user;
    Role role;
    //override equals and hashCode blahblah...
} 
```

问题是，在 update.jspx 页面上，我提供了一个字段来更新`User`位置，表单返回没有异常但返回`User`as `null`。

然后我尝试将 user 字段添加回 Position 类（也不是很好的设计，但出于调试目的，因此 User 存在于实体类和 PK 类中），现在应用程序向我抛出异常：

```
javax.validation.ValidationException: Call to TraversableResolver.isReachable() threw an exception 
```

调用 TraversableResolver.isReachable() 引发异常

我挖掘了似乎实体类可能缺少 getter/setter 或 id 的异常。由于 getter/setter 都是由 Roo 管理的，所以这应该不是问题，所以我认为问题在于 Spring MVC 如何将主键类转换为前端 jsp 视图的兼容性，反之亦然。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:37:02.080

在您提供的代码示例中，我没有看到用于自动生成 getter 和 setter 的注释。

既然您提到 Roo 将管理 getter 和 setter，您可以尝试`@RooJavaBean`在主键类中添加注释吗？

# matlab - Matlab中的多个函数图

> ID：15481846
> 
> 赞同：0
> 
> 时间：2013-03-18T16:24:42.590
> 
> 标签：matlab

我有 2 个函数，每个函数都会生成一个图表。我试图将它们都放在 1 个函数中，但它只输出 2 个图形中的 1 个（最后编写的函数的图形）。我的代码如下所示：

```
function [ output_args ] = Function3( input_args )
    Function1;
    Function2; 

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:27:44.203

`Function2`正在覆盖该图。所以，剧情`Function1`就输了。

如果你希望它们在单独的窗口中，你可以在和行`figure;`之间写。`Function1``Function2`

或者，如果您希望它们在一个窗口中，您可以使用`subplot`. 像这样：

```
subplot(2,1,2);
Function1;
subplot(2,2,2);
Function2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:16:54.453

希望它有效

```
 function [ output_args ] = Function3( input_args )
                figure, hold
                Function1;
                figure(1)
                Function2; 
           end 
```

在适当的地方使用保持功能

# wsdl - 在 SoapUI 中导入 WSDL 时出错

> ID：15481847
> 
> 赞同：9
> 
> 时间：2013-03-18T16:24:46.000
> 
> 标签：wsdl, soapui

我在尝试创建新的 SoapUI 项目并为 Web 服务模拟导入 WSDL 时收到此消息。该错误消息似乎不完整，因为它实际上并未说明未关闭的标签。

> 加载错误 [file:\C:\chad.wsdl]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: 不关闭标签

这是 WSDL：

```
 <wsdl:definitions name="Chad" targetNamespace="http://www.examples.com/wsdl/Chad.wsdl" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://www.examples.com/wsdl/Chad.wsdl" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

       <wsdl:message name="SayHiRequest">
          <wsdl:part name="text" type="xsd:string"/>
       </wsdl:message>
       <wsdl:message name="SayHiResponse">
          <wsdl:part name="text" type="xsd:string"/>
       </wsdl:message>

       <wsdl:portType name="Hello_PortType">
          <wsdl:operation name="sayHi">
             <wsdl:input message="tns:SayHiRequest"/>
             <wsdl:output message="tns:SayHiResponse"/>
          </wsdl:operation>
       </wsdl:portType>

       <wsdl:binding name="Hello_Binding" type="tns:Hello_PortType">
           <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
           <wsdl:operation name="sayHi">
              <soap:operation soapAction="sayHi"/>
              <wsdl:input>
                 <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:examples:chadservice" use="encoded"/>
              </wsdl:input>
              <wsdl:output>
                 <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:examples:chadservice" use="encoded"/>
              </wsdl:output>
           </wsdl:operation>
       </wsdl:binding>

       <wsdl:service name="Hello_Service">
          <wsdl:documentation>WSDL File for HelloService</documentation>
          <wsdl:port binding="tns:Hello_Binding" name="Hello_Port">
             <soap:address location="http://www.examples.com/chad/"/>
          </wsdl:port>
       </wsdl:service>
    </wsdl:definitions> 
```

我的 WSDL 似乎可以验证。

我在网上发现了一些类似的问题，其中 wsdl 是从 http url 导入的，并且导入会导致同样的错误，但我是直接从我的 C 驱动器导入（而不是通过 http），所以建议的解决方案不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-17T02:43:36.650

以下行中存在命名空间问题

原线

```
<wsdl:documentation>WSDL File for HelloService</documentation> 
```

变成

```
<wsdl:documentation>WSDL File for HelloService</wsdl:documentation> 
```

这是更新的wsdl

```
<?xml version='1.0' encoding="UTF-8"?>
<wsdl:definitions name="Chad" targetNamespace="http://www.examples.com/wsdl/Chad.wsdl" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://www.examples.com/wsdl/Chad.wsdl" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
       <wsdl:message name="SayHiRequest">
          <wsdl:part name="text" type="xsd:string"/>
       </wsdl:message>
       <wsdl:message name="SayHiResponse">
          <wsdl:part name="text" type="xsd:string"/>
       </wsdl:message>

       <wsdl:portType name="Hello_PortType">
          <wsdl:operation name="sayHi">
             <wsdl:input message="tns:SayHiRequest"/>
             <wsdl:output message="tns:SayHiResponse"/>
          </wsdl:operation>
       </wsdl:portType>

       <wsdl:binding name="Hello_Binding" type="tns:Hello_PortType">
           <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
           <wsdl:operation name="sayHi">
              <soap:operation soapAction="sayHi"/>
              <wsdl:input>
                 <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:examples:chadservice" use="encoded"/>
              </wsdl:input>
              <wsdl:output>
                 <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:examples:chadservice" use="encoded"/>
              </wsdl:output>
           </wsdl:operation>
       </wsdl:binding>

       <wsdl:service name="Hello_Service">
          <wsdl:documentation>WSDL File for HelloService</wsdl:documentation>
          <wsdl:port binding="tns:Hello_Binding" name="Hello_Port">
             <soap:address location="http://www.examples.com/chad/"/>
          </wsdl:port>
       </wsdl:service>
    </wsdl:definitions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T14:32:18.190

我能够在soapUI 4.5.2 中加载WSDL 而不会收到您遇到的错误。虽然，我确实收到了以下错误。

```
Tue Aug 20 11:30:21 ADT 2013:ERROR:Could not find element [{https://something.com/service/types}IsAvailableRequest] specified in part [parameters] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T00:30:20.623

我有同样的错误，但原因不同：

```
Instead of:
https://sitename.com/prefix/app/services.asxm 

Use:   
https://sitename.com/prefix/app/services.asxm?WSDL 
```

我以前没有使用过 SOAP，而且我没有立即明显地发现我缺少来自 url 的 ?WSDL。发布以防万一其他人有同样的问题。

# sql - 从未知结构的 XML 中选择

> ID：15481848
> 
> 赞同：0
> 
> 时间：2013-03-18T16:24:46.563
> 
> 标签：sql, sql-server, xml

我在 SQL Server 2008 中有一个表，其结构如下：

```
id     = int
numero = int
datos  = xml
[other_misc_fields] 
```

[您可以在此sql fiddle](http://www.sqlfiddle.com/#!3/5408e/1)上查看包含一些示例数据的表。正如您在链接上看到的，字段**datos** (data) 是一个 XML。此 XML 没有已知的结构。我所知道的是根是“lote”，每个字段都有一个属性“title”，它是该字段的“显示名称”。我希望能够沿着这条线查询一些东西

```
id | numero | display_name_field_1 | display_name_field_2 | display_name_field_3
 1 |   23   |     value_field_1    |     value_field_2    |     value_field_3 
```

使用一些[动态 sql](http://www.sommarskog.se/dynamic_sql.html)（来自[另一个所以回答](https://stackoverflow.com/questions/11604854/query-xml-creating-field-names-whithout-knowing-node-names)）我能够从每个节点获取值，但我无法弄清楚如何使用 title 属性重命名它：

```
select @SQL = 'select '+stuff(
  (
  select ',T.N.value('''+T.N.value('local-name(.)', 'sysname')+'[1]'', ''varchar(max)'') as '+T.N.value('local-name(.)', 'sysname')
  from @XML.nodes('/*[local-name(.)=sql:variable("@KnownName")]/*') as T(N)
  for xml path(''), type
  ).value('.', 'nvarchar(max)'), 1, 1, '')+
  ' from @XML.nodes(''/*[local-name(.)=sql:variable("@KnownName")]'') as T(N) 
```

其中@KnownName 是“lote”。

如何修改该查询以便将字段重命名为节点的**@title属性？**或者，有没有比动态 sql 更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:13:40.910

事实证明，这相对容易做到。唯一的问题是不能轻易地将列名设置为动态值。最后，我决定处理 XML 客户端，但这是一种类似于我想要做的事情的方法，以防万一有人感兴趣：

```
SELECT @SQL = 'select '+stuff(
      (
      SELECT ',T.N.value('''+T.N.value('local-name(.)', 'sysname')+'[1]'',''varchar(max)'') as '+ T.N.value('local-name(.)', 'sysname')+',  T.N.value(''('+T.N.value('local-name(.)', 'sysname')+'/@title)[1]'+''',''varchar(max)'') as '+ T.N.value('local-name(.)', 'sysname')+'@title'
      FROM @XML.nodes('/*[local-name(.)=sql:variable("@KnownName")]/*') AS T(N)
      FOR xml path(''), TYPE
      ).value('.', 'nvarchar(max)'), 1, 1, '')+
      ' from @XML.nodes(''/*[local-name(.)=sql:variable("@KnownName")]'') as T(N)' 
```

你可以在这个 sqlfiddle 中看到它“在行动”：[http ://www.sqlfiddle.com/#!3/5408e/13/0](http://www.sqlfiddle.com/#!3/5408e/13/0)

# servlets - 可能在 ServletContext 初始化后通知侦听器？

> ID：15481850
> 
> 赞同：1
> 
> 时间：2013-03-18T16:24:50.087
> 
> 标签：servlets, servlet-listeners

在 Servlet 3.0 中，应用程序的`ServletContainerInitializer`实现（如果有）在应用程序第一次 BEGINS 启动时被调用，并且任何`ServletContextListener`s（如果有）在不久之后被调用，但仍然因为上下文是 BEGINNING 初始化。同样，如果您有任何`Servlet`设置了 load-on-startup 的 s，它们的`init`方法在`Servlet`s 启动时被调用，但仍然在上下文完成初始化之前。

在所有这些情况下，上下文都没有完成初始化。这很好，我理解并同意这样做的原因。然而，我正在寻找的是一种在上下文完成初始化并开始营业后立即得到通知的方法。例如，这种监听器应该有可能（不是说我想这样做）对它所在的应用程序执行 Web 请求。对于上述任何监听器/初始化器来说，这是不可能的，因为它们在应用程序监听请求之前被调用。

是否有可能做到这一点？不必严格地是 Servlet 规范提供的方法。可能是 Spring Framework 或其他执行此任务的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T04:39:04.380

您可以使用[JBoss Seam](http://www.seamframework.org)他们有 servlet 生命周期事件[**@Initialized**](http://docs.jboss.org/seam/3/3.1.0.Final/reference/en-US/html/servlet-events.html#events.servlet_context_lifecycle_events)。

```
public void observeServletContextInitialized(@Observes @Initialized ServletContext ctx) 
{
    System.out.println(ctx.getServletContextName() + " initialized");
} 
```

# java - Mahout 中的 IndexOutOfBoundsException

> ID：15481853
> 
> 赞同：0
> 
> 时间：2013-03-18T16:24:59.627
> 
> 标签：java, mahout

我正在尝试在 CSV 文件上运行 mahout SGD 分类器，但出现此错误 -

```
 [vineet@localhost bin]$ ./mahout trainlogistic --input ./filtered.csv --output model --target target --categories 33 \
--features 200 --passes 10 --predictors subject --types text --rate 50

hadoop binary is not in PATH,HADOOP_HOME/bin,HADOOP_PREFIX/bin, running locally
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 6, Size: 4
        at java.util.ArrayList.rangeCheck(ArrayList.java:604)
        at java.util.ArrayList.get(ArrayList.java:382)
        at org.apache.mahout.classifier.sgd.CsvRecordFactory.processLine(CsvRecordFactory.java:245)
        at org.apache.mahout.classifier.sgd.TrainLogistic.mainToOutput(TrainLogistic.java:85)
        at org.apache.mahout.classifier.sgd.TrainLogistic.main(TrainLogistic.java:65)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
        at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:195) 
```

CSV 文件包含 unicode 文本和用引号字符括起来的大文本字段。

我已经在示例 donut.csv 上尝试了分类器，它工作正常。我还尝试更改我的标题行，使其像“id”、“subject”、“field2”等，但它仍然不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:27:10.330

有些行可能很脏 - 只有 4 个属性而不是 6 个。再次检查您的数据或尝试仅提供一行数据以验证我的猜测。

# java - 如何将 JPanel 从不同的类添加到 JFrame

> ID：15481855
> 
> 赞同：3
> 
> 时间：2013-03-18T16:25:02.980
> 
> 标签：java, swing, jframe, jpanel, layout-manager

如何将 JPanel 添加到 JFrame？这真的让我很困惑。我想将 JPanel 添加到 JFrame。我已经尝试了各种方法，包括扩展，但我无法让它工作。

## 事件

```
import javax.swing.JOptionPane;
import java.awt.Color;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

    public class events {

public static void main (String args[]) {
 Time timeObject = new Time();

    JFrame mainJFrame;
    mainJFrame = new JFrame();
    mainJFrame.setLayout(BorderLayout());
    mainJFrame.setVisible(true);        
    mainJFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainJFrame.setSize(600,400);
    mainJFrame.setVisible(true); 
    mainJFrame.setLayout(new BorderLayout());
    mainJFrame.setTitle("Travel Agent System");
    mainJFrame.setBackground(Color.BLUE);
    timeObject.selectButton();
}
} 
```

## 时间

```
 import javax.swing.JOptionPane;

    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;

public class Time{

  public static void selectButton()
  JButton timeButton = new JButton("Time");
  JButton moneyButton = new JButton("Money");
  JButton hotelButton = new JButton("Hotel");
  JButton exitButton = new JButton("Exit");
   JPanel buttonPanel = new JPanel();
  buttonPanel.setBackground(Color.RED);
  buttonPanel.add(timeButton,moneyButtons,hotelButton,exitButton);

  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T16:56:28.337

看看这个来源。注意评论。

```
import javax.swing.JOptionPane;
import java.awt.Color;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class events {

    public static void main (String args[]) {
        Time timeObject = new Time();

        JFrame mainJFrame;
        mainJFrame = new JFrame();
        // Coding by magic!
        //mainJFrame.setLayout(BorderLayout());
        mainJFrame.setLayout(new BorderLayout());
        mainJFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // don't do this, just call pack() later
        //mainJFrame.setSize(600,400);
        mainJFrame.setLayout(new BorderLayout());
        mainJFrame.setTitle("Travel Agent System");
        mainJFrame.setBackground(Color.BLUE);

        timeObject.selectButton();
        mainJFrame.add(timeObject.getGUI());

        mainJFrame.pack();
        // should be last.
        mainJFrame.setVisible(true);
    }
}

class Time {

    private JPanel buttonPanel;

    // don't use static unless necessary - it is not necessary.
    //public static void selectButton() {
    public void selectButton() {
        JButton timeButton = new JButton("Time");
        JButton moneyButton = new JButton("Money");
        JButton hotelButton = new JButton("Hotel");
        JButton exitButton = new JButton("Exit");
        buttonPanel = new JPanel();
        buttonPanel.setBackground(Color.RED);
        buttonPanel.add(timeButton);
        buttonPanel.add(moneyButton);
        buttonPanel.add(hotelButton);
        buttonPanel.add(exitButton);
    }

    public JComponent getGUI() {
        return buttonPanel;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T16:42:44.680

将 JFrame 对象传递给 selectButton() ：

```
timeObject.selectButton(mainJFrame); 
```

然后使用该 JFrame 对象将 JPanel 添加到它。

```
public static void selectButton(JFrame frame)
  {
    JButton timeButton = new JButton("Time");
    JButton moneyButton = new JButton("Money");
    JButton hotelButton = new JButton("Hotel");
    JButton exitButton = new JButton("Exit");
    JPanel buttonPanel = new JPanel();
    buttonPanel.setBackground(Color.RED);
    buttonPanel.add(timeButton,moneyButtons,hotelButton,exitButton);
    frame.getContentPane().add(buttonPanel,BorderLayout.CENTER); // i've added to CENTER.
  } 
```

这会将 JPanel 添加到 JFrame 的中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:42:30.423

这是实现 JFrame 类然后将 JPanel 添加到 JFrame 和其他 JPanel 的一个很好的示例。

[链接到另一个 StackOverflow 问题/答案](https://stackoverflow.com/questions/8248152/jframe-removing-jpanels-and-adding-a-new-jpanel)

# fft - 使用逆 DFT 从 DFT 中检索多项式系数

> ID：15481859
> 
> 赞同：1
> 
> 时间：2013-03-18T16:25:24.430
> 
> 标签：fft, discrete-mathematics, dft

我正在尝试使用 DFT 将两个多项式相乘，但我不知道如何从它们相乘的 DFT 中获得最后一位。

所以有 p(x) = x - 4, dft -3, i-4, -5, -i-4 和 q(x) = x^2-1, dft 0, -2, 0, -2

度（pq）= 3

所以我们得到统一 1, i, -1, -i 的第 4 个根

pq 的 dft 为 0, 8-2i, 0, 8+2i。

有人可以告诉我现在如何从它的 dft 中获取 pq 的系数吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:44:20.543

首先要理解的是，将两个多项式相乘与对系数[进行卷积相同。](http://en.wikipedia.org/wiki/Convolution#Discrete_convolution)

```
octave:1> p=[0 0 1 -4];
octave:2> q=[0 1 0 -1];
octave:3> conv(p,q)
ans =
    0   0   0   1  -4  -1   4 
```

其次，了解[循环卷积](http://en.wikipedia.org/wiki/Circular_convolution)等价于线性卷积的条件。

（另外，你的 DFT 系数似乎是错误的）

# c# - 使用 Roslyn 从外部文件执行代码

> ID：15481862
> 
> 赞同：0
> 
> 时间：2013-03-18T16:25:32.043
> 
> 标签：c#, regex, roslyn

我正在使用**Roslyn**在运行时执行 C# 代码。

首先我尝试了这段代码（效果很好）：

```
engine.Execute(@"System.Console.WriteLine(""Hello World"");"); 
```

之后，我想从文本文件中执行代码，所以我这样做了：

```
string line;

System.IO.StreamReader file = new System.IO.StreamReader("test.txt");
while ((line = file.ReadLine()) != null)
{
    engine.Execute(line);
} 
```

我将之前使用的字符串复制到名为 test.txt 的外部文件中。

所以我的 test.txt 包含以下行：`@"System.Console.Write(""Hello World"");"`

编译代码时，**我收到一个错误**，指出缺少某些内容。

所以我想通了，这只是反斜杠。

并将代码更改为：

```
string line;

System.IO.StreamReader file = new System.IO.StreamReader("test.txt");
while ((line = file.ReadLine()) != null)
{
    string toto = line;
    string titi = toto.Replace(@"\\", @"");

    engine.Execute(toto);
} 
```

现在，当我运行此代码时，**什么也没有发生**（没有错误）。

当我检查变量内容时，我得到了这个：

`toto : "@\"System.Console.Write(\"\"Hello World\"\");\""`

`titi : "@\"System.Console.Write(\"\"Hello World\"\");\""`

这正常吗！通常应该删除 baskslash，但事实并非如此。

有什么问题

`EDIT`

我想在代码中保留我传递给 Roslyn 的确切字符串，所以不要建议像更改文件中的字符串这样的答案。请另一种解决方案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T16:27:50.177

你误解了字符串。

`@"..."`是*字符串文字*；它创建一个值为 的字符串`...`。

因此，当您编写 时`Execute(@"System.Console.WriteLine(""Hello World"");")`，您传递给的实际`Execute()`值为`System.Console.WriteLine("Hello World");`

当您从文件中读取字符串时，您将获得该字符串的实际值。
`StreamReader`不假定文件包含 C# 字符串文字表达式（这将是非常奇怪、意外和无用的）。

因此，当您读取包含 text 的文件时`@"System.Console.WriteLine(""Hello World"");"`，您会得到一个带有实际 value 的字符串`@"System.Console.WriteLine(""Hello World"");"`。
（要将其写入字符串文字，您需要编写`@"@""System.Console.WriteLine(""""Hello World"""");""""`）

然后，当您将该字符串传递给 Roslyn 的`Execute()`方法时，Roslyn 会计算字符串文字表达式，并返回文字的字符串值。

# python - 更改构建 c 编译器

> ID：15481863
> 
> 赞同：1
> 
> 时间：2013-03-18T16:25:32.713
> 
> 标签：python, compiler-construction, g++, aix, xlc

我正在尝试从 AIX 6.5 机器上的源代码构建 python 2.6.8，但有几个模块无法成功构建。在构建过程中，有一个XLC手册页跳出来卡住了。我必须按下`q`以结束手册页，该过程将继续。所以我在想是否是因为构建调用了默认的 XLC 编译器，我正在尝试将默认编译器更改为 g++：

```
make clean
CC=/bin/gcc CXX=/bin/g++ ./configure
make 
```

但它似乎不起作用，XLC 手册页仍然弹出，并且模块无法构建。

我如何确保它将使用 g++ 而不是 XLC？谢谢。

**更新**

这是之后的日志`CC=/bin/gcc CXX=/bin/g++ ./configure`

```
-bash-3.2$ CC=/bin/gcc CXX=/bin/g++ ./configure
checking for --enable-universalsdk... no
checking for --with-universal-archs... 32-bit
checking MACHDEP... aix6
checking EXTRAPLATDIR... 
checking machine type as reported by uname -m... 00F63F144C00
checking for --without-gcc... 
checking for gcc... cc_r
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc_r accepts -g... yes
checking for cc_r option to accept ISO C89... -qlanglvl=extc89
checking for --with-cxx-main=<compiler>... no
checking how to run the C preprocessor... cc_r -qlanglvl=extc89 -E
checking for grep that handles long lines and -e... /opt/freeware/bin/grep
checking for egrep... /opt/freeware/bin/grep -E 
```

我看到这条线`checking whether we are using the GNU C compiler... no`，这是否意味着它没有使用 gcc？

而且还在make的日志中

```
checking for __attribute__((visibility("hidden")))... no
cc_r: 1501-210 (W) command option t contains an incorrect subargument 
```

在上面的日志之后，会弹出 xlc 的手册页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:08:38.737

cc_r 编译器是 IBM 编译器。IBM C 编译器（和 C++ 编译器）有多种调用方式。xlc 是一个，_r 变体（这意味着它们链接到可重入/线程安全库）是另一个。还有 cc 和 c99 的。你问那么多干嘛？好吧，每一个都是作为常用选项的简写提供的，在这种情况下，每一个都是针对不同的语言标准的。例如，c99 支持 C99 标准。因此，仅仅因为编译器没有“xl”前缀并不意味着它不是 IBM 编译器。

请注意，显示手册页的原因是在某处调用编译器时没有任何参数或不正确的参数。这是消息的原因

```
cc_r: 1501-210 (W) command option t contains an incorrect subargument 
```

[-t 标志](http://publib.boulder.ibm.com/infocenter/compbgpl/v9v111/index.jsp?topic=/com.ibm.xlcpp9.bg.doc/compiler_ref/opt_t_lower.htm)允许您交换编译器的某些部分，而您实际上很少想要这样做。它需要一个子参数，例如

```
cc_r -tI ... 
```

表示您将换出 IPA 优化器的编译时阶段（通常使用 -B 指定新组件的位置）。

在您的 makefile 中的某个地方，您正在指定 -t 并极大地混淆了可怜的编译器。

顺便说一句，如果你想在make中覆盖编译器，你可以直接在makefile中通过CC、CXX和CCC变量指定它。您可以在编辑 makefile 之前在命令行上指定它来进行试验。请注意，如果您再次运行 ./configure，这些更改将会丢失。

```
make CC=/bin/gcc CCC=/bin/g++ CXX=/bin/g++ 
```

# javascript - 无法将 jsfiddle 创建转移到网站

> ID：15481868
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:25:45.093
> 
> 标签：javascript, jquery, wordpress, jsfiddle

我正在尝试将 jsfiddle 创建转移到我的网站，但我无法这样做。这是它的链接：

[http://jsfiddle.net/mDc7p/213/](http://jsfiddle.net/mDc7p/213/)

```
/* 
    Eventbrite Examples - organizer event list

    If you copy this code, please set your own API Key in the example below.
    You can request one here: http://www.eventbrite.com/api/key
*/

Eventbrite({'app_key': "HSMTSI2CUDKAXFTXX2"}, function(eb){

    // define a few parameters to pass to the API
    // Options are listed here: http://developer.eventbrite.com/doc/organizers/organizer_list_events/
    var options = {
        'id'    : "1667880002"
    };

    // provide a callback to display the response data:
    eb.organizer_list_events( options, function( response ){
        $('.event_list').html(eb.utils.eventList( response, eb.utils.eventListRow ));
    });
}); 
```

我尝试将标签内关闭的 javascript 代码添加`<script type="text/javascript"></script>`到我的 header.php、footer.php 和模板文件的底部（我在该特定页面上使用的那个，但它不起作用。添加 javascript 代码后，我`<div class="event_list"></div>`在页面内容区域内添加，因为这是我希望代码工作但它不工作的地方。我将 jquery 库包含在 header.php 文件中的“head”标签内。我还尝试了 onLoad 方法，方法是添加代码到 javascript 的顶部，但遗憾的是，它不起作用。请帮助我。

PS 我的网站正在运行 Wordpress。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:29:05.800

您是否将其包装在 document.ready 中？您的 jQuery 不会作用于加载时不存在的元素。

```
$(document).ready(function() {
    ...
}); 
```

或速记

```
$(function() {
    ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:29:36.500

小提琴设置为在 DOM Ready 上运行的代码。因此，您需要将 JavaScript 部分中的代码包装在 onready 调用中。

```
<script>
$(function() {

    /* 
        Eventbrite Examples - organizer event list

        If you copy this code, please set your own API Key in the example below.
        You can request one here: http://www.eventbrite.com/api/key
    */

    Eventbrite({'app_key': "HSMTSI2CUDKAXFTXX2"}, function(eb){

        // define a few parameters to pass to the API
        // Options are listed here: http://developer.eventbrite.com/doc/organizers/organizer_list_events/
        var options = {
            'id'    : "1667880002"
        };

        // provide a callback to display the response data:
        eb.organizer_list_events( options, function( response ){
            $('.event_list').html(eb.utils.eventList( response, eb.utils.eventListRow ));
        });
    }

);    
});
</script> 
```

# full-text-search - 如何从 Sublime Text 2 中的 Find Results 跳转到文件？

> ID：15481873
> 
> 赞同：2
> 
> 时间：2013-03-18T16:25:57.683
> 
> 标签：full-text-search, sublimetext2

我很困惑。在 中进行文本搜索后`Sublime Text 2`，有时我可以双击 中的一行文本`Find Results`并跳转到文件。其他时候它只是突出显示光标下的单词。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:25:57.683

双击包含匹配文本的行将跳转到文件。
双击上下文行（不包含匹配文本的行）将突出显示光标下的单词。

# design-patterns - Mathematica：处理拟合参数

> ID：15481880
> 
> 赞同：4
> 
> 时间：2013-03-18T16:26:19.040
> 
> 标签：design-patterns, wolfram-mathematica, rule, data-fitting

我想访问 NonlinearModelFit 的拟合参数。这是代码

```
model = a*Cos[b*t + c];
fit = NonlinearModelFit[data, model, {a, b, c}, t, Method -> NMinimize] 
```

当我使用命令时：

```
fit["BestFitParameters"] 
```

值以下列格式返回：

```
{a -> 1, b -> 2, c -> -3} 
```

现在我想将 a 的值存储在变量 x 中

```
x=fit["BestFitParameters"][[1]] 
```

但这给了

```
x= a -> 1 
```

不，我想知道如何解决“-> - 运算符”以获得

```
x=1 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:40:25.473

嗯，你可以写

```
x = a/.{a -> 1, b -> 2, c -> -3} 
```

这将分配`a`to的值`x`。

我不完全确定你应该这样做，你可以简单地将规则列表存储在一个变量中，并在你想要的时候从中提取位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-16T12:40:46.507

我可以建议另一种方法：

```
C1fitparameters = 
Table[{C1fit["BestFitParameters"][[i, 1]], C1fit["BestFitParameters"][[i, 2]]}, 
{i, 1, Length[C1fit["BestFitParameters"]]}] 
```

它返回一个列表：

```
{{A, 5.11419}, {Beta, 14.2637}, {Omega_0, 174.118}, {Phi, -0.117246}} 
```

所以要访问变量名：

```
C1fitparameters[[1, 1]] 
```

返回 A。并且：

```
C1fitparameters[[1, 2]] 
```

返回 A 的值，即 5.11419。瞧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-01T02:55:41.457

你要

```
x = fit["BestFitParameters"][[1]][[2]] 
```

这将检索 a->1 的右侧。using`x = fit["BestFitParameters"][[1]][[1]]`将检索左侧（在本例中为“a”）

# linux - 在 ksh 或 bash 中解析并查找具有 UID 的进程信息

> ID：15481882
> 
> 赞同：1
> 
> 时间：2013-03-18T16:26:36.820
> 
> 标签：linux, bash, shell, unix

```
Alexey:Desktop Alexey$ ps -xla
UID   PID  PPID  F CPU PRI NI     SZ   RSS     WCHAN     S  ADDR TTY   TIME   CMD
0     1    0  80004004   0  31  0  2508844   3720 -   Ss   0  ??   0:04.39 /sbin/launchd
501    11    1   4004   0  33  0  2526496   4772 -    Ss   0 ??    0:00.31 /usr/libexec/UserEventA
        ...
        ... 
```

我正在编写显示我在 shell 中键入的用户进程信息的脚本

```
read userid 
```

命令`ps -xla`显示进程的完整信息

我需要解析这个输出并找到 UID=$userid 的字符串

请帮忙！必须找到最佳和简单的解决方案，可能是 grep 或 sed 或 awk 或其他几乎可以在任何地方 100% 工作的解决方案。请写一些变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:33:01.080

尝试这样做：

```
read userid  
pgrep -fl -U $userid 
```

或更完整：

```
read userid  
ps -u $userid -la 
```

或者

```
ps auxw |
    awk -v user=$USER '
        NR==1{
            for (i=1; i<=NF; i++) if ($i=="USER") {
                col=i
             }
        }
        NR>1 && $col==user
    ' 
```

或者如果你想`ps -la`：

```
ps -la | awk -v uid=1000 'NR==1{for (i=1; i<=NF; i++) if ($i=="UID"){col=i}} NR>1 && $col==uid' 
```

* * *

如果您需要在输出中使用[grep](/questions/tagged/grep "显示标记为“grep”的问题")，您可以使用特殊的正则表达式技巧来不显示`grep`进程本身：

```
ps -u $userid -la | grep '[f]oobar' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:34:37.910

ps 具有`-U`基于用户 ID 进行过滤的选项。您还必须删除该`-x`选项。

```
ps -Uuser_name -la 
```

# vb.net - VB.NET 中的自引用泛型成员变量

> ID：15481884
> 
> 赞同：0
> 
> 时间：2013-03-18T16:26:46.427
> 
> 标签：vb.net, generics

鉴于以下情况：

```
Public MustInherit Class A(Of X As A(Of X, Y), Y As B(Of X, Y))
End Class

Public MustInherit Class B(Of X As A(Of X, Y), Y As B(Of X, Y))
End Class

Public Class D

    Private _v As A(Of X As A(Of X, Y), Y AS B(Of X, Y))        

    Public Sub Initialize(Of X As A(Of X, Y), Y As B(Of X, Y))(ByVal v As A(Of X, Y))
        _v = v
    End Sub

End Class 
```

是否可以定义成员变量_v？定义成员变量时似乎没有“As”关键字，所以上面的不会编译，编译器会抱怨类型参数太少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:32:05.727

在泛型类型参数中的使用`As`是建立一个约束。这只能在定义类型参数的地方完成。在`_v`您声明特定类型的实例的情况下，可能使用现有的类型参数。 `As`在这一点上是不合法的，因为您没有定义新的类型参数。

你定义参数`D`并在声明中使用它们`_v`

# c# - Excel 将空白单元格保留为已使用的单元格

> ID：15481892
> 
> 赞同：1
> 
> 时间：2013-03-18T16:27:17.870
> 
> 标签：c#, excel, c#-4.0, oledb, oledbcommand

我尝试使用 OLEDB 在 excel 中插入行，问题是：

*   ：我在工作表的末尾插入了几行。
*   ：我打开我的 excel 文档并查看我插入的行。
*   ：我删除所有插入的行并重新启动我的应用程序。
*   : 在最后一行索引处继续插入行

**前任 ：**

*   在excel的第3020行插入的行
*   删除此行并保存
*   重新启动应用程序并再次插入
*   行将在 excel 中的第 3021 行

> 公共无效插入（字符串文本，Excel.Worksheet ws，字符串列）{
> 
> ```
>  OleDbCommand cmd1 = new OleDbCommand("INSERT INTO ["+ws.Name+"$] " +
>                            "([" + column + "]) VALUES(' " + text + " ')", _oleConn);
> 
>         cmd1.ExecuteNonQuery();
>     } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:42:32.280

可能是工作表将这些列的 XML 保留在幕后。您当前的代码将该行放在工作表的末尾。必须修改代码以删除要放入的行之前的空行，然后添加。一个例子是这样的：

```
public void Insert (string text, Excel.Worksheet ws, string column){
    OleDbCommand cmd0 = new OleDbCommand("DELETE FROM ["+ws.Name+"$] where /*column1*/ = '' AND /*column2*/ = '' /*...*/ AND /*columnN*/ = ''", _oleConn);

    cmd0.ExecuteNonQuery();

    OleDbCommand cmd1 = new OleDbCommand("INSERT INTO ["+ws.Name+"$] " +
                       "([" + column + "]) VALUES(' " + text + " ')", _oleConn);

    cmd1.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:30:24.197

删除行内的数据不会删除 Excel 中该行存在的记录。您可以通过选择整个事物（单击行号）然后右键单击并选择“删除”来删除该行。

# jquery - jQuery 新元素无法识别

> ID：15481895
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:27:19.980
> 
> 标签：jquery

提交表单（http post）后，我在同一个 php 页面上创建了一个新表单。jquery 事件中无法识别新生成的元素（按钮、标签、滑块）。jquery 在提交之前工作，但不是在提交之后。

```
$("#sliders").on("change", function(){
    var SliderValue = $("#slider0").val();
    if (SliderValue==10){
        $('#submit_next').button('enable');
    }
    else
        $('#submit_next').button('disable');
        $("#lblsum_scores").text(SliderValue+'/10');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:33:15.433

您需要将事件**委托**给**新创建的元素**

，而不是：

```
$("#sliders").on("change", function(){ 
```

你应该使用：

```
$("parentOfSliderNotGenerated").on("change", "#sliders", function(){ 
```

有关更多信息，请阅读[http://api.jquery.com/on/](http://api.jquery.com/on/)

# vba - 从 Excel 宏调用 Access 查询

> ID：15481898
> 
> 赞同：1
> 
> 时间：2013-03-18T16:27:32.290
> 
> 标签：vba, ms-access, excel-2010, ms-access-2010

我在 Excel 中有一个 VBA 宏，它调用 Access 数据库 (.mdb) 中的查询。但是，Access 已更新为 .accdb 文件，我不知道如何更改宏（和/或包含任何库，因为我还没有真正理解该部分）以便代码可以工作。

这是当前的“标题”代码：

```
'Step 1: Declare your variables
Dim MyDatabase As DAO.Database
Dim MyQueryDef As DAO.QueryDef
Dim MyRecordset As DAO.Recordset

'Step 2: Identify the database and query
Set MyDatabase = DBEngine.OpenDatabase("C:\Users\Ben\Google Drive\Database\Production\FOREAL PROD.mdb") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:57:07.917

如果您收到“无法识别的数据库格式”错误，那么您的 Excel 项目可能正在使用不知道如何处理 .accdb 文件的旧 DAO（数据访问对象）引用。

在 VBA 窗口中，选择`Tools > References...`. 如果您看到旧的 DAO 参考，例如...

“Microsoft DAO 3.6 对象库”

......那么这可以解释这个问题。

您需要将旧的 DAO 引用升级到这个...

“Microsoft Office 14.0 Access 数据库引擎对象库”

...为此，您需要从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=13255)下载并安装 Microsoft Access Database Engine 2010 Redistributable 。

# javascript - 用于多个 SPA 的 Durandal 和 MVC4 区域

> ID：15481899
> 
> 赞同：6
> 
> 时间：2013-03-18T16:27:33.597
> 
> 标签：javascript, asp.net-mvc-4, asp.net-mvc-areas, durandal

我有一个带有区域的 Internet 应用程序 mvc4，对于我的组织，每个区域都代表一个 SPA，并且通过“管理 NuGet 包”我安装了“Durandal 1.2.0”、“Durandal Transitions 1.2.0”和“Durandal Router 1.2.0”。我组织了文件夹并从 Durandal 的文件夹“App”中退出了“views”和“viewmodels”，并将新视图放在 mvc4 区域的文件夹“VIews”中，例如：

Areas-->NewArea-->Views-->ControllerFolder-->views-->shell.html

然后我将“viewmodels”放在“脚本”文件夹中，例如：

脚本-->NewArea-->ControllerFolder-->viewmodels-->shell.js

脚本-->NewArea-->ControllerFolder-->main.js

然后我更改了 durandal JS 的路径，例如在 main.js 中：

```
define(['../../../App/durandal/app',
    '../../../App/durandal/viewLocator',
    '../../../App/durandal/system',
    '../../../App/durandal/plugins/router',
    '../../../App/services/logger'], 
```

我在下一行更改了 main.js：

```
viewLocator.useConvention('viewmodels', '../Areas/NewArea/Views/ControllerFolder/views'); 
```

但是文件夹的配置失败了，因为下一行在其定义中多次调用模块“viewLocator”并用默认值重写“useConvention”的配置：

```
app.setRoot('viewmodels/shell', 'entrance'); 
```

只有当文件夹“views”和“viewmodels”不在“Durandal”的“App”文件夹下时才会发生这种行为。

请帮助我，如何在同一个项目中拥有各种 SPA？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:51:44.250

今天早上我遇到了完全相同的问题。我最初将项目格式化为：

*   应用程序/spa1/viewmodels
*   应用程序/水疗中心/视图
*   应用程序/spa2/viewmodels
*   应用程序/水疗中心/视图

使用这种结构，我碰到了与您完全相同的墙。阅读您的帖子后，我将项目重组为：

*   应用程序/viewmodels/spa1
*   应用程序/viewmodels/spa2
*   应用程序/视图/spa1
*   应用程序/视图/spa2

使用这种结构，导航工作正常。我设置了三个SPAS，并且能够浏览所有三个。这种结构的另一个好处是您现在遵循标准约定，因此您不必配置视图定位器。只需确保每个 spa 的 main.js 文件使用：

*   app.setRoot('查看模型/spa1/shell)、app.setRoot('查看模型/spa2/shell)等

最后，通过这种方式构建，您将 main.js 文件移到结构上，从而消除了所有定义中的 ../../../。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T02:28:01.537

您可能需要考虑您的部署策略。例如，如果您需要优化这个应用程序，两个 SPA 将最终在同一个文件中。但是，您可以创建单独的文件夹，并为每个 SPA 提供它自己的 main.js 文件，而不是将它们都放在 app 文件夹下。

In more advanced scenarios, you may create a "bootstrapper" app that loads one or another of the SPAs. The bootstrapper would contain code that is common to both SPAs. But each SPA (and the bootstrapper) can be optimized independently.

There are many options. Mainly, consider your final deployment strategy and that will help guide you here.

Also, the issue you have above is probably related to the fact that the standard conventions may not work in your setup, and you would need to override some functions with your own mapping.

# php - 在 Drupal 7 中创建自定义页面时出错

> ID：15481900
> 
> 赞同：0
> 
> 时间：2013-03-18T16:27:40.087
> 
> 标签：php, function, drupal, drupal-7, drupal-theming

（使用自适应主题）我想要一个新的自定义用户登录页面。所以，把这段代码放在我的 template.php 中：

```
function mythemename_theme() {
  $items = array();
  // create custom user-login.tpl.php
  $items['user_login'] = array(
  'render element' => 'form',
  'path' => drupal_get_path('theme', 'mythemename') . '/templates',
  'template' => 'user-login',
  'preprocess functions' => array(
  'mythemename_preprocess_user_login'
  ),
 );
return $items;
} 
```

将 mythemename 更改为我的自定义主题名称。并创建了 user-login.tpl.php 文件并输入以下代码：

```
<?php 
  print drupal_render($form['name']);
  print drupal_render($form['pass']);
  print drupal_render($form['form_build_id']);
  print drupal_render($form['form_id']);
  print drupal_render($form['actions']);
?> 
```

最后，清除我的网站缓存。但是当我点击 mysite.com/user 登录页面没有改变。

我在哪里出错？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:24:43.650

尝试将其放入 template.php，将*mythemename*更改为主题名称，然后刷新缓存。

```
function mythemename_theme($existing, $type, $theme, $path){
    $hooks['user_login']=array(
    'render element'=>'form',
    'template'=>'templates/user-login',
    );
    return $hooks;
} 
```

然后在 templates/user-login.tpl.php 中插入：

```
<?php
print render($form['name']);
print render($form['pass']);
print render($form['form_build_id']);
print render($form['form_id']);
print render($form['actions']);
?> 
```

或者

```
<?php print drupal_render_children($form) ?> 
```

# xml - XSLT 根据必须动态计算的值对 xml 进行排序

> ID：15481907
> 
> 赞同：0
> 
> 时间：2013-03-18T16:27:49.233
> 
> 标签：xml, sorting, xslt, xslt-grouping

我必须根据几个值对 xml 文件进行排序。输入 xml 具有以下结构：

```
<DataSet>
<Product>
    <Category>100</Category>
    <ProductGroup>2000</ProductGroup>
    <ProductNr>30003</ProductNr>
</Product>  
<Product>
    <Category>100</Category>
    <ProductGroup>2000</ProductGroup>
    <ProductNr>30001</ProductNr>
</Product>  
<Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30002</ProductNr>
</Product>
<Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30004</ProductNr>
</Product>
<Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30010</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>3000</ProductGroup>
    <ProductNr>30006</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>4000</ProductGroup>
    <ProductNr>30009</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>4000</ProductGroup>
    <ProductNr>30007</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>3000</ProductGroup>
    <ProductNr>30005</ProductNr>
</Product> 
```

此 xml 应按 Category 排序，然后按 ProductNr 但按 ProductGroup 分组。这意味着，如果在 ProductGroup 2000 中有一个 ProductNr 小于 ProductGroup 1000 中的 Product，那么 ProductGroup 2000 应该在 ProductGroup 1000 之前打印。

输出 xml 应如下所示：

```
<DataSet>
<Product>
    <Category>100</Category>
    <ProductGroup>2000</ProductGroup>
    <ProductNr>30001</ProductNr>
</Product>  
<Product>
    <Category>100</Category>
    <ProductGroup>2000</ProductGroup>
    <ProductNr>30003</ProductNr>
</Product>  
<Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30002</ProductNr>
</Product>
<Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30004</ProductNr>
</Product>
<Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30010</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>3000</ProductGroup>
    <ProductNr>30005</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>3000</ProductGroup>
    <ProductNr>30006</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>4000</ProductGroup>
    <ProductNr>30007</ProductNr>
</Product>
<Product>
    <Category>200</Category>
    <ProductGroup>4000</ProductGroup>
    <ProductNr>30009</ProductNr>
</Product> 
```

现在我的想法是根据以下逻辑生成用于排序目的的密钥： `key = Category + (smallest ProductNr in ProductGroup) + ProductNr`

然后我可以按这个键排序并得到正确的结果。

我是 XSLT 的新手，不知道如何计算 ProductGroup 中最小的 ProductNr，然后按此值排序。你能给我一个提示吗？

或者：有没有更好的技术来解决这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:15:40.433

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kProdInGroup" match="ProductNr" use="../ProductGroup" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:copy>
      <xsl:apply-templates select="Product">
        <!-- First sort by Category -->
        <xsl:sort select="Category" data-type="number" />
        <!-- Then by the min ProductNr per group -->
        <xsl:sort select="key('kProdInGroup', ProductGroup)
                             [not(. &gt; key('kProdInGroup', ../ProductGroup))]"
                  data-type="number" />
        <!-- Then by ProductNr -->
        <xsl:sort select="ProductNr" data-type="number" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

当应用于您的样本输入时，结果是：

```
<DataSet>
  <Product>
    <Category>100</Category>
    <ProductGroup>2000</ProductGroup>
    <ProductNr>30001</ProductNr>
  </Product>
  <Product>
    <Category>100</Category>
    <ProductGroup>2000</ProductGroup>
    <ProductNr>30003</ProductNr>
  </Product>
  <Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30002</ProductNr>
  </Product>
  <Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30004</ProductNr>
  </Product>
  <Product>
    <Category>100</Category>
    <ProductGroup>1000</ProductGroup>
    <ProductNr>30010</ProductNr>
  </Product>
  <Product>
    <Category>200</Category>
    <ProductGroup>3000</ProductGroup>
    <ProductNr>30005</ProductNr>
  </Product>
  <Product>
    <Category>200</Category>
    <ProductGroup>3000</ProductGroup>
    <ProductNr>30006</ProductNr>
  </Product>
  <Product>
    <Category>200</Category>
    <ProductGroup>4000</ProductGroup>
    <ProductNr>30007</ProductNr>
  </Product>
  <Product>
    <Category>200</Category>
    <ProductGroup>4000</ProductGroup>
    <ProductNr>30009</ProductNr>
  </Product>
</DataSet> 
```

# hyperlink - 链接到网页的特定部分

> ID：15481911
> 
> 赞同：117
> 
> 时间：2013-03-18T16:28:05.890
> 
> 标签：hyperlink

如何在我无法控制的另一个网站上创建指向长网页的一部分的链接？

我认为您可以在我的链接末尾使用#partofpage 的变体。有什么建议么？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-18T16:29:10.117

只需附加 a`#`后跟您尝试访问的`<a>`标记（或其他 HTML 标记，如 a ）的 ID。`<section>`例如，如果您尝试链接到此 HTML 中的标题：

```
<p>This is some content.</p>
<h2><a id="target">Some Header</a></h2>
<p>This is some more content.</p> 
```

您可以使用链接`<a href="http://url.to.site/index.html#target">Link</a>`。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-18T16:29:20.020

使用以下格式创建“跳转链接”：

```
http://www.somesite.com/somepage#anchor 
```

其中 anchor 是您希望在该页面上链接到的元素的 id。使用浏览器开发工具/查看源代码来查找您希望链接到的元素的 ID。

如果元素没有 id 并且您不控制该站点，那么您将无法执行此操作。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-18T16:30:26.007

只有当该站点在页面中声明了锚点时，这才有可能。它是通过给标签一个[name 或 id 属性](https://www.rapidtables.com/web/html/link/html-anchor-link.html)来完成的，所以寻找任何靠近你想要链接的地方。

然后语法将是

```
<a href="page.html#anchor">text</a> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-07-10T16:15:36.423

如果目标页面在同一个域上（即与您的页面共享**相同的来源**）并且您不介意创建新选项卡 (1)，您可以 (ab) 使用一些**JavaScript**：

`<a href="javascript:void(window.open('./target.html').onload=function(){this.document.querySelector('p:nth-child(10)').scrollIntoView()})">see tenth paragraph on another page</a>`

琐事：

```
var w = window.open('some URL of the same origin');
w.onload = function(){
  // do whatever you want with `this.document`, like
  this.document.querySelecotor('footer').scrollIntoView()
} 
```

您现在可以尝试的这种“利用”的工作示例可能是：

`javascript:(function(url,sel,w,el){w=window.open(url);w.addEventListener('load',function(){w.setTimeout(function(){el=w.document.querySelector(sel);el.scrollIntoView();el.style.backgroundColor='red'},1000)})})('https://stackoverflow.com/questions/45014240/link-to-a-specific-spot-on-a-page-i-cant-edit','footer')`

如果您将其输入位置栏中（请注意，Chrome`javascript:`从剪贴板粘贴时会删除前缀）或将其设`href`为此页面上任何链接的值（使用开发人员工具）并单击它，您将获得另一个（重复的）SO 问题页面滚动到页脚和页脚涂成红色。（添加延迟作为 ajax 加载的内容在加载后将页脚向下推的解决方法。）

笔记

*   在当前的 Chrome 和 Firefox 中测试，通常应该可以工作，因为它基于定义的标准行为。
*   无法在此处的交互式代码段中进行说明，因为它们与页面原点隔离。
*   [MDN: Window.open()](https://developer.mozilla.org/en-US/docs/Web/API/Window/open)
*   (1)`window.open(url,'_self')`似乎正在破坏`load`事件；基本上使`window.open`行为像普通的`a href=""`点击导航；还没有研究更多。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-07-08T19:46:48.413

即将推出的 Chrome“滚动到文本”功能正是您想要的......

[https://github.com/bokand/ScrollToTextFragment](https://github.com/bokand/ScrollToTextFragment)

您基本上`#targetText=`在 URL 的末尾添加，浏览器将滚动到目标文本并在页面加载后突出显示它。

它在我桌面上运行的 Chrome 版本中，但目前必须手动启用。据推测，它很快就会在生产 Chrome 版本中默认启用，其他浏览器也会随之而来，所以现在可以开始添加到您的链接，然后它将开始工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-26T22:50:07.777

第一个目标是指在您尝试链接的 HTML 代码或 chrome 开发人员工具中找到的 BlockID。每个代码都不同，您需要进行一些挖掘才能找到您尝试引用的 ID。它应该看起来像`div class="page-container drawer-page-content" id"PageContainer"`注意，这是整个引用部分的格式，而不是单个文本或图像。为此，您需要找到与您的目标块相关的同一段代码。例如`dv id="your-block-id"`，无论如何，我刚刚阅读了这个帖子，我想到了一个想法，如果你是 Shopify 用户并且想要这样做，那么它与所说的几乎相同。但不是

```
> http://url.to.site/index.html#target 
```

你会放

```
> http://storedomain.com/target 
```

例如，我正在设置一个免责声明页面，其中包含指向新闻通讯注册的链接和主页上的购物块，因此我插入`https://mystore-classifier.com/#shopify-section-1528945200235`了我的超链接。请注意，-classifier 仅供我内部使用，不适用于您。这只是为了让我可以跟踪我的商店。如果你想链接到你的主页以外的东西，你会放

```
> http://mystore-classifier.com/pagename/#BlockID 
```

我希望有人觉得这很有用，如果我的解释有问题，请告诉我，因为我不是 HTML 程序员，我的语言是 C#！

# android - Android UnitCase android.content.res.Resources$NotFoundException

> ID：15481912
> 
> 赞同：1
> 
> 时间：2013-03-18T16:28:05.817
> 
> 标签：android, unit-testing, maven-3

我最近在我的主应用程序中创建了一个单元测试项目。但是，当我运行单元测试时，我收到以下错误。

```
03-19 00:25:50.579: I/TestRunner(12465): android.content.res.Resources$NotFoundException: File RuimockUnitTestTest from xml type layout resource ID #0x7f030000
03-19 00:25:50.579: I/TestRunner(12465):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2391)
03-19 00:25:50.579: I/TestRunner(12465):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2346)
03-19 00:25:50.579: I/TestRunner(12465):    at android.content.res.Resources.getLayout(Resources.java:944)
03-19 00:25:50.579: I/TestRunner(12465):    at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
03-19 00:25:50.579: I/TestRunner(12465):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-19 00:25:50.579: I/TestRunner(12465):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
03-19 00:25:50.579: I/TestRunner(12465):    at android.app.Activity.setContentView(Activity.java:1892) 
```

我已经清理了我的项目，删除了 bin 和 gen 文件，但仍然没有希望。有人可以给一些建议吗？帮助表示赞赏。

编辑：
单元测试代码在这里，我还没有编写单元测试：

```
public class ServerAPITest extends ActivityUnitTestCase<SplashScreen>{
SplashScreen mainActivity;
private Solo solo;

public ServerAPITest(){
    super(SplashScreen.class);
}

@Override
protected void setUp() throws Exception {
    super.setUp();
    solo = new Solo(getInstrumentation(), (SplashScreen)getActivity());
    // Starts the MainActivity of the target application
    startActivity(new Intent(getInstrumentation().getTargetContext(), SplashScreen.class), null, null);

    // Getting a reference to the MainActivity of the target application
    mainActivity = (SplashScreen)getActivity();

}

@Override
protected void tearDown() throws Exception {
    super.tearDown();
    solo.finishOpenedActivities();  
}

@SmallTest
public void testHello() throws Throwable{
     //TODO Test Function
 } 
```

}

# scrapy - Scrapy：在抓取 .aspx 页面时遇到问题

> ID：15481913
> 
> 赞同：1
> 
> 时间：2013-03-18T16:28:08.920
> 
> 标签：scrapy, web-crawler, scrapyd

我正在尝试抓取一个 .aspx 页面，但它会将我重定向到一个不存在的页面。为了解决这个问题，我尝试设置 'dont_merge_cookies': True 和 'dont_redirect': True，并覆盖我的 start_requests，但现在，它给了我一个错误“'Response' object has no attribute 'body_as_unicode'”和我的响应类类型是'scrapy.http.response.Response'。

这是我的代码：

```
class Inon_Spider(BaseSpider):
    name = 'Inon'
    allowed_domains = ['www.shop.inonit.in']

    start_urls = ['http://www.shop.inonit.in/Products/Inonit-Men-Jackets/QUIRK-BOX/Toy-Factory-Jacket---Soldiers/pid-1177471.aspx?Rfs=&pgctl=713619&cid=CU00049295']

     #redirects to http://www.shop.inonit.in/Products/Inonit-Men-Jackets/QUIRK-BOX/Toy-Factory-Jacket---Soldiers/1177471

    def start_requests(self):
        start_urls = ['http://www.shop.inonit.in/Products/Inonit-Men-Jackets/QUIRK-BOX/Toy-Factory-Jacket---Soldiers/pid-1177471.aspx?Rfs=&pgctl=713619&cid=CU00049295']

        for i in start_urls:

            yield Request(i, meta = {
                     'dont_merge_cookies': True,
                     'dont_redirect': True,
                     'handle_httpstatus_list': [302]
                 },callback=self.parse)

    def parse(self, response):
        print "Response %s" %response.__class__

        resp = TextResponse
        item = DealspiderItem()
        hxs = HtmlXPathSelector(resp)

        title = hxs.select('//div[@class="aboutproduct"]/div[@class="container9"]/div[@class="ctl_aboutbrand"]/h1/text()').extract()
        price = hxs.select('//span[@id="ctl00_ContentPlaceHolder1_Price_ctl00_spnWebPrice"]/span[@class="offer"]/span[@id="ctl00_ContentPlaceHolder1_Price_ctl00_lblOfferPrice"]/text()').extract()
        prc = price[0].replace("Rs.  ","")

        description = []
        item['price'] = prc
        item['title'] = title
        item['description'] = description
        item['url'] = response.url
        return item 
```

# python - 操作字典中的集合

> ID：15481914
> 
> 赞同：2
> 
> 时间：2013-03-18T16:28:10.357
> 
> 标签：python, dictionary, set

我需要使用我拥有的集合来更新字典。我的程序本质上需要一个集合并将其分配给一个值（在字典中）。如果该集合已经存在，我需要更新它的值（继续将这些值相加）。

这是我的程序现在的工作方式：

```
 for line in fd:
    new_line = line.split(' ')
    for word in new_line:
        new_word = ''.join(l for l in word if l.isalpha())
        new_word = new_word.lower()
        ind_count = 0
        for let in new_word:
            c_dict[let, ind_count] = new_word
            ind_count += 1 
```

在我的`fd`文件中，它包含一个单词列表。

我希望我的结果看起来像这样：

```
print(c_dict)

{ (0, "h") : { "hello", "helps" } , (0, "c") : { "cow" } } 
```

这基本上从单词中获取一个字母，它是索引#，并将值设置为该单词。我的文件将有数百个在位置 0 处具有字母“h”的单词，基本上键 (0, 'h') 将具有包含所有这些单词的值。

现在，我的程序只是替换了这些值。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:31:27.243

[`dict.setdefault()`](http://docs.python.org/2/library/stdtypes.html#dict.setdefault)非常适合：

```
for line in fd:
    new_line = line.split(' ')
    for word in new_line:
        new_word = ''.join(l for l in word if l.isalpha())
        new_word = new_word.lower()
        for ind_count, let in enumerate(new_word):
            c_dict.setdefault((let, ind_count), set()).add(new_word) 
```

请注意，我还将最里面的 for 循环更改为使用，[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)而不是在循环内手动递增`ind_index`。

`c_dict.setdefault((let, ind_count), set()).add(new_word)`在行为上等同于以下代码：

```
if (let, ind_count) in c_dict:
    c_dict[let, ind_count].add(new_word)
else:
    c_dict[let, ind_count] = set([new_word]) 
```

# objective-c - cocoa bindings - [NSArrayController removeObjects] 并没有真正从数据库中删除对象，但它不会再次显示它

> ID：15481915
> 
> 赞同：0
> 
> 时间：2013-03-18T16:28:11.793
> 
> 标签：objective-c, core-data, cocoa-bindings

我正在开发一个数据驱动的 iOS 应用程序。我已经完成了一个带有核心数据和可可绑定的辅助 mac os 应用程序，以准备要在 iOS 应用程序上预加载的数据。

突然在使用预加载的 .sqldata 文件时，我发现了空对象。我在帮助应用程序中使用 NSArrayController 的 add/removeObjects 方法。我认为问题在于 removeObjects 并没有真正从数据库表中删除对象。

请帮助确保它从数据库中成功删除，而不仅仅是从阵列控制器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:15:29.920

> 我正在开发一个数据驱动的 iOS 应用程序……使用 NSArrayController 的 add/removeObjects 方法。

`NSArrayController`在 iOS 上不存在，因此您在尝试使用它时会遇到问题。我猜您此时正在使用模拟器。这很方便，但是模拟器可以让你摆脱在真实设备上无效的东西。如果您正在开发 iOS 应用程序，解决问题`NSArrayController`是浪费时间，最好的做法是尽快摆脱它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:52:05.480

好的，我解决了这个问题。问题是我从 NSArrayController 中删除了对象，但忘记先从 ManagedObjectContext 中删除它。

# c# - WPF RadioButton InverseBooleanConverter 不起作用

> ID：15481916
> 
> 赞同：3
> 
> 时间：2013-03-18T16:28:12.650
> 
> 标签：c#, wpf, radio-button, ivalueconverter

我有两个 RadioButtons，我将它们绑定到 ViewModel 中的布尔属性。不幸的是，我在转换器中遇到错误，因为“targetType”参数为空。

现在我没想到通过的 targetType 参数为空（我期待的是 True 或 False）。但是我注意到 RadioButton 的 IsChecked 属性是一个可以为空的布尔值，所以这种解释。

我可以更正 XAML 中的某些内容，还是应该更改解决方案的现有转换器？

这是我的 XAML：

```
<RadioButton Name="UseTemplateRadioButton" Content="Use Template" 
                GroupName="Template"
                IsChecked="{Binding UseTemplate, Mode=TwoWay}" />
<RadioButton Name="CreatNewRadioButton" Content="Create New"
                GroupName="Template"
                IsChecked="{Binding Path=UseTemplate, Mode=TwoWay, Converter={StaticResource InverseBooleanConverter}}"/> 
```

这是我正在使用解决方案范围内的 InverseBooleanConverter 的现有转换器：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if ((targetType != typeof(bool)) && (targetType != typeof(object)))
    {
        throw new InvalidOperationException("The target must be a boolean");
    }
    return !(((value != null) && ((IConvertible)value).ToBoolean(provider)));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:37:08.403

您需要更换转换器，或者更好的是，使用新的转换器。

```
[ValueConversion(typeof(bool?), typeof(bool))]
public class Converter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (targetType != typeof(bool?))
        {
            throw new InvalidOperationException("The target must be a nullable boolean");
        }
        bool? b = (bool?)value;
        return b.HasValue && b.Value;
    } 

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }

    #endregion
} 
```

# python - 使用python日志模块时，如何记录脚本启动时花费的时间而不是实际时间？

> ID：15481925
> 
> 赞同：3
> 
> 时间：2013-03-18T16:28:47.747
> 
> 标签：python, logging

我正在寻找一种方法来更改 python 日志记录模块以显示脚本启动时花费的时间而不是当前时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:54:15.503

您可以继承`logging.Formatter`和重新实现`formatTime`. 像这样的东西：

```
start_time = datetime.now()

class MyFormatter(logging.Formatter):

    def formatTime(self, record, datefmt=None):
        delta = (datetime.now() - start_time).total_seconds()
        return "{}".format(delta) 
```

进而：

```
handler = logging.StreamHandler()
fmt = MyFormatter('%(filename)s %(levelname)-8s [%(asctime)s]  %(message)s')
handler.setFormatter(fmt)

log = logging.getLogger('main')
log.addHandler(handler)
log.debug("=)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:55:43.773

你可以试试这样的。

在脚本开头定义自定义格式化程序：

```
import time
import logging
import datetime as dt

class MyFormatter(logging.Formatter):

    def __init__(self,fmt=None,datefmt=None):
        super(MyFormatter,self).__init__(fmt,datefmt)
        self.reftime = dt.datetime.fromtimestamp(time.mktime(time.localtime()))

    def formatTime(self, record, datefmt=None):
        ctime = dt.datetime.fromtimestamp(time.mktime(self.converter(record.created)))
        ct = (ctime - self.reftime).timetuple()
        if datefmt:
            s = time.strftime(datefmt, ct)
        else:
            t = time.strftime("%Y-%m-%d %H:%M:%S", ct)
            s = "%s,%03d" % (t, record.msecs)
        return s 
```

然后设置你的日志系统：

```
handler = logging.StreamHandler(MyFormatter())
logger = logging.getLogger()
logger.addHandler(handler) 
```

ETC...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T19:08:08.650

[如文档](http://docs.python.org/2/library/logging.html#logrecord-attributes)`%(relativeCreated)s`中所示，在您的格式字符串中使用。

**更新：**您可以使用普通的 Python 格式说明符来控制精度，例如`%(relativeCreated).0f`以零小数位显示浮点值。

# c# - 键盘事件教程c#

> ID：15481927
> 
> 赞同：0
> 
> 时间：2013-03-18T16:28:51.523
> 
> 标签：c#, events, code-snippets

有人可以给我一个片段，关于用户按下向下箭头按钮或向上箭头按钮时的事件，在控制台中要触发的示例

```
 Console.WriteLine("You have pressed up/down arrow "); 
```

也许这是一个愚蠢的问题，但我在活动中找不到它，但我需要参加活动，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:35:29.903

这是一个重复执行此操作的循环，直到用户按下 Ctrl+C：

```
while (true)
{
    ConsoleKeyInfo key = Console.ReadKey();

    if (key.Key == ConsoleKey.UpArrow || key.Key == ConsoleKey.DownArrow)
    {
        Console.WriteLine("You have pressed up/down arrow ");
    }
} 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:31:44.207

控制台应用程序没有 UI 事件，所以你被困在了`Console.ReadKey();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:37:11.883

控制台没有定义这些事件。您可以使用[`Console.ReadKey`](http://msdn.microsoft.com/en-us/library/x3h8xffw.aspx). 您必须定义自己的事件，然后：

```
var key = Console.ReadKey();
// create event parameters and dispatch the event 
```

显然，`Console.ReadKey`控制台上的块。如果需要，您可以将其放入线程中，然后从那里分派事件。但请注意，事件通知将进入一个单独的线程（即不是主线程）。

此外，您不能从同一个控制台读取两个不同的线程。好吧，你*可以*，但结果是不可预测的。例如，如果您的后台线程正在等待 a`ReadKey`而另一个线程调用`Console.ReadLine()`，则不知道输入将在哪里结束。

# java - 将应用程序置于后台

> ID：15481929
> 
> 赞同：0
> 
> 时间：2013-03-18T16:28:58.447
> 
> 标签：java, android, android-intent, alarm

我正在制作一个应用程序，当您靠近 GPS 位置时会发出警报。现在，当用户按下主页按钮时，这个应用程序会被发送到后面。当用户进入区域触发警报时，警报会触发，但应用程序不会发送到前台。我怎样才能做到这一点？

我试过这个

```
 Intent intent = new Intent(context, TrainActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
            intent.setAction(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_LAUNCHER);
            startActivity(intent); 
```

在警报的功能中，但这什么都不做？（trainactivity是在后台运行的类和需要在前台运行的类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:00:08.070

该`REORDER_TO_FRONT`标志仅控制活动历史记录的堆叠顺序。那不是你想要的。这是你想要的 ？-[用户单击主页按钮后将应用程序置于最前面](https://stackoverflow.com/questions/12074980/bring-application-to-front-after-user-clicks-on-home-button)

# jsf - Primefaces p：commandButton：仅在 f：setPropertyActionListener 之前禁用

> ID：15481931
> 
> 赞同：1
> 
> 时间：2013-03-18T16:29:03.813
> 
> 标签：jsf, primefaces

我正在使用`<p:dataTable>`并且在`<p:column>`我有一个`<p:commandButton>`必须在 bean 中指定的一种条件下禁用的。

这是表格：

```
<p:dataTable var="flusso" id="flussoList" rows="5"
            widgetVar="flussoTable" value="#{invioFlussiTUManagedBean.flussi}"
            filteredValue="#{invioFlussiTUManagedBean.filteredFlussi}"
            emptyMessage="#{i18n['tu.msg.emptysearch']}" paginator="true"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">

     <p:column style="width:100px;height:35px;">

             <p:commandButton
                        update=":invioFlForm:flussoList :invioFlForm:displayConfirm"
                        icon="ui-icon-extlink" oncomplete="confirmation.show()"
                        title="#{i18n['tu.button.flusso.invia']}"
                        rendered="#{flusso.statoFlusso.code == 'DS'}"
                        disabled="#{!invioFlussiTUManagedBean.dettaglio}">
                        <f:setPropertyActionListener value="#{flusso}"
                            target="#{invioFlussiTUManagedBean.selectedFlusso}" />
                        <f:setPropertyActionListener value="#{false}"
                            target="#{invioFlussiTUManagedBean.modoInvioTutti}" />
            </p:commandButton>
     </p:column>
</p:dataTable> 
```

在我的 ManagedBean 中：

```
public boolean isDettaglio() {
    return flussiTURepository.isDettaglio(selectedFlusso);
} 
```

此方法查询数据库并返回`true`或`false`取决于是否`selectedFlusso`响应条件。

问题是这样的：在方法中`isDettaglio()`，`selectedFlusso`在`f:setPropertyActionListener`. 当方法被调用时，`selectedFlusso`是`null`. 如何在is not`selectedFlusso`的 disabled 属性中进行设置？`<p:commandButton>``null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:10:17.560

如`<f:setPropertyActionListener>`您所料，在呈现按钮的 HTML 表示时不会调用 。相反，它仅在通过相关按钮提交表单并且其操作已排队时调用。

如果你想继续使用这种奇怪的设计——我会用

```
disabled="#{!flusso.dettaglio}" 
```

相反——那么你最好的选择是以编程方式`#{flusso}`在 getter 内部进行评估。

```
public boolean isDettaglio() {
    FacesContext context = FacesContext.getCurrentInstance();
    Flusso currentFlusso = context.getApplication().evaluateExpressionGet(context, "#{flusso}", Flusso.class);
    return flussiTURepository.isDettaglio(currentFlusso);
} 
```

请注意，如果您的环境支持使用参数调用方法的新 EL 2.2 功能，那么您可以使用

```
disabled="#{!invioFlussiTUManagedBean.isDettaglio(flusso)}" 
```

另请参阅[如何在 JSF 中调用带有参数的方法](https://stackoverflow.com/questions/5273729/how-to-call-a-method-with-a-parameter-in-jsf/5273864#5273864)。

无论基于当前设计的解决方案如何，这种设计都是“奇怪的”，因为它可能非常昂贵。另请参阅[为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:38:06.427

你可以使用类似的东西

```
<p:commandButton disabled=#{!invioFlussiTUManagedBean.isDettaglio(flusso)} 
```

在你的 bean 中：

```
public boolean isDettaglio(Flusso selectedFlusso) {
    return flussiTURepository.isDettaglio(selectedFlusso);
} 
```

# python - IOError: [Errno 2] 没有这样的文件 - Paramiko put()

> ID：15481934
> 
> 赞同：9
> 
> 时间：2013-03-18T16:29:07.207
> 
> 标签：python, python-2.7, sftp, paramiko

我正在通过 SFTP 使用[Paramiko](http://www.lag.net/paramiko/)和`sftp.put(localFile, remoteFile)`. 如果需要，我首先制作必要的目录

```
 makeCommand = 'mkdir -p "' + remotePath + '"'
    ssh.exec_command(makeCommand) 
```

这有时有效，但我偶尔会收到以下错误：

```
 sftp.put(localFile, remoteFile)
    File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 565, in put
    File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 245, in open
    File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 635, in _request
    File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 682, in _read_response
    File "build/bdist.macosx-10.8-intel/egg/paramiko/sftp_client.py", line 708, in _convert_status
    IOError: [Errno 2] No such file 
```

尽管本地文件确实存在（并且`localFile`是它的正确路径）并且远程路径已创建。[这里](https://bugs.launchpad.net/paramiko/+bug/492238)和[这里](https://stackoverflow.com/questions/11198364/paramiko-get-raises-ioerror-no-such-file-if-server-doesnt-support-df-hi)都有关于类似问题的讨论，但那里提出的任何观点都没有帮助我。我的服务器支持该`df -hi`命令。有没有人对此或可能的解决方案有任何建议？

**编辑**

在下面的建议之后，我尝试更改工作目录，`sftp.chdir(remoteDirectory)`但是这个调用产生了与上面完全相同的错误。所以看起来这不仅仅是一个上传问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T14:18:46.340

这似乎是一个远程文件夹权限问题。尽管远程文件夹是在文件上传之前创建的，但该文件夹的权限似乎阻止了上传。

问题与[此](https://stackoverflow.com/questions/15461404/permission-denied-to-other-app-after-makedirs/15461928#15461928)问题有关 - 如果我在上传之前对要上传到的文件夹设置打开权限，则程序可以正常上传。虽然我应该得到一个权限问题`IOError: [Errno 13] Permission denied`，但由于我进行了更改，我没有遇到任何错误。

我不确定是服务器给Paramiko的响应是问题，还是Paramiko本身的错误导致`IOError: [Errno 2] No such file`而不是a `Errno 13`，但这似乎已经解决了问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-01-24T15:13:37.793

put 方法有一个默认启用的确认参数，它将在传输后对文件进行统计。

就我而言，我将文件传输到的远程服务器立即将任何传输的文件移动到另一个位置以进行处理，这导致统计失败。将确认参数设置为 False 解决了这个问题。

```
def put(self, localpath, remotepath, callback=None, confirm=True): 
```

从 paramiko 源 sftp_client.py：

> :param bool confirm: 之后是否对文件执行 stat() 以确认文件大小（从 1.7.7 开始）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T17:12:11.333

是本地的`IOError`，因此（无论出于何种原因）似乎您的本地 python 找不到`localFile`. 在通话之前进行安全检查可能有助于追踪问题：

```
if os.path.isfile(localFile):
    sftp.put(localFile, remoteFile)
else:
    raise IOError('Could not find localFile %s !!' % localFile) 
```

如果您确定`localFile`确实存在，那么这可能只是一个路径问题 - 是`localFile`在绝对路径还是相对路径上？无论哪种方式，`if`上面的语句都会抓住它。

**编辑**

跟踪 paramiko 文件显示第 245 行`sftp_client.py`（引发异常的行）实际上是

```
fr = self.file(remotepath, 'wb') 
```

这是相当误导性的，因为 paramiko 会抛出`IOError`一个远程文件！我现在最好的猜测是，`remoteFile`要么是丢失的目录，要么是您无权访问的目录。

出于兴趣，你能列出远程目录吗

```
sftp.listdir(path=os.path.dirname(remoteFile)) 
```

检查它是否在那里（或者它在那里并且你可以写信给它）？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T13:07:05.223

您确定该目录已创建并且它是您的远程工作目录吗？Paramiko 有自己的方法来创建新目录和导航远程文件系统。考虑使用类似的东西：

```
sftp.mkdir(remotedirectory)
sftp.chdir(remotedirectory)
sftp.put(localfile, remotefile) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-14T14:28:13.100

我遇到了同样的问题。这是一个愚蠢的错误。

*   只需使用 sftp.stat（您的远程目录）来检查它是否存在。
*   然后使用 sftp.put(localfileabsolutepath, remotedir+filename)

它肯定会起作用。

# asp.net-mvc - ASP.NET MVC 应用程序中的多租户

> ID：15481940
> 
> 赞同：0
> 
> 时间：2013-03-18T16:29:29.727
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern, multi-tenant

在以下示例中，用最少的冗余代码实现多租户的有效方法是什么？在这种情况下，租户是学生。学生的学校有 2 个地点，每个地点都需要将数据（即课程）存储在单独的数据库中。当学生登录时，他们的位置决定了从哪个数据库中提取。

我正在使用实体框架和存储库模式。目前我有访问位置 1 数据库的实现。我已经研究了实现位置 2 的不同选项，例如在 HomeController 构造器中注入 TenantContext，但我被困在如何设置正确的数据库连接以及哪种方法最有效。

以下是仅位置 1 的代码。

**示例控制器**

```
public class HomeController : Controller
{
    ICourseRepository courseRepository;

    //How to set the correct repository to use based on location?
    public HomeController(ICourseRepository courseRepository)
    {
        this.courseRepository = courseRepository;
    }

    //Register for a new class
    public ViewResult Register()
    {
        var courseList = courseRepository.AvailableCourses();
        return View(courseList);
    }
} 
```

**课程资料库**

```
public class CourseRepository : ICourseRepository
{
    private Location1DB context = new Location1DB();

    public List<Course> AvailableCourses()
    {
        //Get available courses from Location 1 Course Table
    }
} 
```

**Location1Model.Context.cs** *（这是使用 EF DbContext Generator 生成的）*

```
public partial class Location1DB: DbContext
{
    public Location1DB()
        : base("name=Location1DB")
    {
    }

    public DbSet<Course> Courses { get; set; }
} 
```

**网页配置**

```
<connectionStrings>
     <add name="Location1DB" ... />
     <add name="Location2DB" ... />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:04:07.630

抱歉，我会在明天有时间的时候尝试编辑并提供更完整的答案，但请检查这个 SO[答案](https://stackoverflow.com/a/15353080/14515)和城堡温莎容器[doco](http://stw.castleproject.org/Default.aspx?Page=Inline-Dependencies&NS=Windsor&AspxAutoDetectCookieSupport=1)以帮助您入门（也不确定您使用的是什么容器，但所有主要容器都应该有此功能）。

想法是从 cookie 中读取 LocationID，获取正确的连接字符串并让容器将其作为参数传递给您的 dbcontext。

请记住，DbContext 是一个部分类，因此您可以声明自己的部分 DbContext 类，在其上放置一个接口并将其作为依赖项传递到您的存储库中。

# github - 重命名 github 中的基础分支

> ID：15481944
> 
> 赞同：1
> 
> 时间：2013-03-18T16:29:38.880
> 
> 标签：github, github-for-windows

我正在尝试纠正一个错字，即我创建的 github fork 名称中的拼写错误。`gwt-hightchart-dashboard-demo`从to删除一个“t”`gwt-highchart-dashboard-demo`

在通过一些 google/stackoverflow 搜索后，我无法找到如何做这个简单的练习。

1.  这可能吗？
2.  这可以通过 GitHub Web GUI 实现吗？如何？
3.  这可以通过 GitHub Windows GUI 实现吗？如何？
4.  这可以通过 Git 命令提示符实现吗？如何？

参考下图。

![在此处输入图像描述](../Images/1de349a0a538aa0aa4b35f6cb6dbdc02.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:53:31.000

我认为目前还不能通过 GUI 执行此操作，但您可以在本地执行此操作并推送更改：

```
git branch -m gwt-hightchart-dashboard-demo gwt-highchart-dashboard-demo 
```

您可以使用内置的分支重命名工具来执行此操作

```
git branch -m old_name new_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:26:19.943

转到您的存储库设置>>选项并查找“默认分支”选择框。它将包含您所有分支的列表。更改此设置将编辑您的基础分支。

# ruby - 红宝石udpsocket。找出经济重置源

> ID：15481946
> 
> 赞同：1
> 
> 时间：2013-03-18T16:29:50.463
> 
> 标签：ruby, sockets, econnreset

我有多个客户端连接在 UDP 上。他们的地址被存储以供将来通信。如果一个人死了并且消息被发送给它，那么 recvfrom(2) 会给我 econnreset。有没有办法知道此时哪个同伴死了？

场景看起来像这样

```
def broadcast message
  # one of the clients is dead
  clients.each { |x| @socket.send message, 0, x.ip, x.port }
end

def fill_inbox
  @inbox << @socket.recvfrom(1000) while IO.select([@socket],nil,nil,0)
rescue Errno::ECONNRESET => e
  # who died?
end 
```

# c# - 通用存储库方法引发转换错误

> ID：15481948
> 
> 赞同：1
> 
> 时间：2013-03-18T16:30:00.823
> 
> 标签：c#, asp.net-mvc, entity-framework

我有以下存储库方法，它应用过滤器然后对集合进行排序：

```
 public IQueryable<TE> SelectAll(Expression<Func<TE, bool>> predicate, 
            Expression<Func<TE, object>> sortExpression, bool orderDescending = false)
        {
            var list = _ctx.CreateQuery<TE>("[" + typeof(TE).Name + "]")
                .AsExpandable().Where(predicate);

            return orderDescending 
                ? list.OrderByDescending(sortExpression) 
                : list.OrderBy(sortExpression);
        } 
```

where 谓词可以正常工作，但是如果应用 OrderBy，我们会收到以下错误：

**无法将类型“System.Int32”转换为类型“System.Object”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。**

编辑：这是调用代码：

```
 var documentos = SelectAll(d => serviciosId.Contains(d.ServicioId) && d.TipoSociedadId == tipoSociedadId, d => d.Grupo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:19:45.963

试试这个：

```
public IQueryable<TE> SelectAll<TE, TKey>(Expression<Func<TE, bool>> predicate, 
            Expression<Func<TE, TKey>> sortExpression, bool orderDescending = false)
{
    var list = _ctx.CreateQuery<TE>("[" + typeof(TE).Name + "]")
                   .AsExpandable().Where(predicate);

    return orderDescending 
        ? list.OrderByDescending(sortExpression) 
        : list.OrderBy(sortExpression);
} 
```

问题是`Func`in`OrderBy`子句的第二个参数`object`在您的代码中，并且您传递给它一个`int`，然后它会尝试将其`int`转换为`object`. 在我上面粘贴的代码中，您有一个额外的通用参数，允许您为排序函数传递任何类型，所以应该可以。

# paypal - 未在移动设备上从 Paypal 接收自定义值

> ID：15481953
> 
> 赞同：2
> 
> 时间：2013-03-18T16:30:08.547
> 
> 标签：paypal

我的网站上有一个贝宝按钮，我有一个自定义值，在交易完成后从贝宝返回到我的网站。

它在台式机上运行良好，但由于某种原因，它无法在 Android 手机或 Ipad 等移动设备上运行。付款通过，但价值似乎没有传递到我的页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T02:26:19.553

看起来当付款从 mobile.paypal.com 返回时，'return' url 上的任何获取参数都首先被未编码，所以如果我传递给 paypal 的 url 中有 %2B，当它返回时，它是a + （意思是，您在发布后对它们进行解码，然后对其进行编码，而不是简单地对其进行编码）。%3D 与 = 一样返回，我会假设各种其他无效的东西。如果“回报”来自 www.paypal.com，则情况并非如此。我会报告一个错误，但我假设其他人会想知道这些信息。

克里斯

更新：我刚刚从 www.paypal.com/ca/cgi-bin/webscr 获得了这些格式错误的网址之一，所以它不仅仅是移动网站......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:34:39.987

感谢您与我联系。我们发现使用 RM=2 时，移动流不返回数据存在问题。要检索您选择切换到支付数据传输 (PDT) 以收集信息的数据。

我们将继续解决在移动流程中使用 RM=2 时不返回 Post 数据的问题，但至少我们实现了您的目标。

# .net - 如何通过错误报告反馈链接防止网站攻击？

> ID：15481962
> 
> 赞同：0
> 
> 时间：2013-03-18T16:30:35.547
> 
> 标签：.net, security, error-reporting, user-feedback

我正在开发一个目前主要是 Intranet 并使用自定义身份验证的网站。该网站需要错误报告功能。我已经在后端设置了所有内容（数据库表、用于跟踪从我的 ASP.NET MVC 网站到我的 WCF 服务的错​​误的相关标识符）。

当某些异常发生时，它会被记录下来，并向用户显示一个反馈表，他可以在其中填写其他详细信息。

问题是，显然有人可能会滥用该错误报告链接并开始发布一些垃圾数据，甚至可能使用该链接进行 DoS 攻击。我不想通过身份验证来保护这个页面，因为也许用户想报告他在登录时遇到了问题。

现在的问题是——**如何防止黑客和恶意用户通过错误报告表攻击网站？**是否有任何已知的方法和最佳实践（除了似乎有点不适合公司业务应用程序的验证码）？

我想让保护尽可能简单——在错误报告表单本身中出现另一个异常并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:26:44.623

如果该站点仅是 Intranet，为什么您的防火墙内有这么多黑客和恶意用户？:-)

**不过说真的，即使是经过身份验证**的用户，您也应该已经在应用最佳安全实践（例如防止跨站点脚本和 SQL 注入） 。如果其中一个人的计算机上有恶意软件，导致他们的浏览器在身份验证后将恶意内容发布到 Web 表单中怎么办？

对于 .net 开发人员来说，这一系列文章非常适合防御 10 大安全威胁： [http ://www.troyhunt.com/2011/12/free-ebook-owasp-top-10-for-net.html](http://www.troyhunt.com/2011/12/free-ebook-owasp-top-10-for-net.html)

一旦您对将这些最佳实践在全球范围内应用到代码中充满信心，我不明白为什么仅 Intranet 的反馈表会提出任何进一步的问题。

# php - 我不断收到“主机密钥验证失败”。在 Mac OS X 上从 PHP 调用 `ssh` 时

> ID：15481965
> 
> 赞同：1
> 
> 时间：2013-03-18T16:30:36.610
> 
> 标签：php, macos, apache, ssh

我已经设置了从我的笔记本电脑（OS X）到我的开发服务器（Linux）的无密码登录 - 这工作正常（使用`~/.ssh/id_rsa`私钥，并将内容`~/.ssh/id_rsa.pub`放入服务器`~/.ssh/authorized_keys`文件中）。到现在为止还挺好。

但是，我正在尝试从 PHP 脚本中连接到服务器。Apache 服务器应该以`_www`用户身份运行，我已经添加了必要的主机行，`~_www/.ssh/known_hosts`但没有解决问题。

我觉得我缺少一些关于 OSX 上的 Apache 如何工作的基本和基本的东西——关于我可能做错了什么的任何建议？

谢谢！

编辑：我已经确认这`_www`确实是当前登录的用户，并且主目录确实是`/Library/WebServer`. 我将已知主机添加到`/Library/WebServer/.ssh/known_hosts`，我也忘了提到私钥文件已被 _www 用户读取，当我调用脚本时，我调用了`ssh -i /path/to/private.key`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:17:02.087

我想通了 - 中的`.ssh`目录`/Library/WebServer`属于`root:wheel`（就像该目录中的其他文件和目录一样，因此在普通视图中隐藏了事实......）。我将所有权更改为`_www:wheel`，它现在应该像现在一样工作！谢谢，很抱歉浪费了您的时间。

# javascript - 从 iframe 中获取一个值到 mainPage

> ID：15481968
> 
> 赞同：1
> 
> 时间：2013-03-18T16:30:44.487
> 
> 标签：javascript, jquery, iframe

我想获得一个 Iframe 上的输入值。当我单击主页上的按钮时，我想获得这个值。

好吧，我有这段代码

主页上的 Javascript：

```
 var targetDiv = document.getElementById('CP_dem'); 
```

MainPage 上的 Html：一个选项卡，当您单击它时，它会加载 Iframe 和一个调用 javascript 函数的按钮

Iframe 上的 HTML：

```
 Zip Code : <input class="textForm" id="CP_dem" type="text" name="CP_dem" maxlength="5" size="5" value="42101"> 
```

我想在单击 MainPageButton 时获取输入值。

javascript 代码显示“targetDiv”为空。

你能帮我么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:43:36.143

你要说的第一件事是：

iframe 是否托管在与父网站相同的 http 主机上？如果没有，您将遇到 javascripts 同源保护，请访问：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

简而言之：您将无法访问内容。可是等等！有一个解决方法，我将在处理第二种情况后解释，其中 http 主机是相同的！

所以让我们谈谈第二种情况。那么工作很简单...

您只需要访问 iframe（可能给 iframe 标签一个 id “示例”）。然后您可以使用 example.contentWindow.document 或 example.contentDocument 访问该窗口

无论设置哪一个，都取决于浏览器。您将不得不在 js 中进行一些检查。就像是

```
if(document.getElementById('contentWindow.document').contentWindow) {
 ifdoc = document.getElementById('contentWindow.document').contentWindow.document
} else {
 ifdoc = document.getElementById('contentWindow.document').contentDocument
} 
```

然后您可以像在 javascript 中一样访问表单和元素，我不会在这里介绍...

所以让我们跳到这个答案的有趣部分！让我们围绕同一个起源策略工作。这也称为“跨站点脚本”（继续谷歌......）

所以基本上它归结为一件事：

子文档和父文档都可以访问一个属性！

它是 document.location 属性！

所以，你可以做什么？

子站点可以对其进行修改，然后父站点可以对其进行监视并对更改做出反应。

另一个不错的功能是 url 片段（# 之后的部分）。这部分不会重新加载网站，因此 javascript 可以愉快地修改它，并且父站点可以定期轮询它并对其做出反应......

基本上，这为可以处理的父子文档的通信提供了基础。有设计精美的图书馆！javscript版本的“用facebook登录”也是基于同样的原理！

这意味着子文档必须与父文档合作，因此这是有意的，并且双方基本上在工作中一起工作。

所以这没关系，他们可以围绕相同的原产地政策工作。

希望这在理论上涵盖了您的问题，并为您在实践中提供了一些帮助！

祝你有美好的一天:)

# symfony - 身份验证访问控制角色

> ID：15481969
> 
> 赞同：0
> 
> 时间：2013-03-18T16:30:47.873
> 
> 标签：symfony, fosuserbundle, fosfacebookbundle

使用 symfony2.1 和 FOSFacebookBundle：

如果用户正在键入 www.example.com，例如用户关闭了他的浏览器，那么如果他仍然经过身份验证，我想重定向到 www.example.com/secured。

如果用户通过身份验证，我无法进入 indexAction。

我的安全.yml：

```
security:
encoders:
    Symfony\Component\Security\Core\User\User: plaintext

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    in_memory:
        memory:
            users:
                user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }
    my_fos_facebook_provider:
            id: my.facebook.user
                 //How can I add here a ROLE_USER?

firewalls:

     //standard thing from FosFacebookBundle

access_control:
    - { path: ^/, roles: [IS_AUTHENTICATED_ANONYMOUSLY]  } 
```

我的索引操作：

```
if( $this->container->get('security.context')
    ->isGranted('IS_AUTHENTICATED_FULLY') ){
   echo 'asdf'; //this is working in the secured area www.example.com/secured/
} 
```

**我的错误消息：**安全上下文不包含身份验证令牌。一个可能的原因可能是没有为此 URL 配置防火墙。

在安全区域中，用户没有角色。我怎样才能改变它？

怎么了？

**更新**

```
namespace Frontend\FbAccountBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

 /**
 * User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity
 */
class User
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="bigint", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;

/**
 * @var integer
 *
 * @ORM\Column(name="facebook_id", type="bigint", nullable=false)
 */
private $facebookId;
/**
 * @param Array
 */
public function setFBData($fbdata)
{
    if (isset($fbdata['id'])) {
        $this->setFacebookId($fbdata['id']);
        $this->addRole('ROLE_FACEBOOK');
    }
} 
```

安全性.yml：

```
services:
my.facebook.user:
    class: Frontend\FbAccountBundle\Security\User\Provider\FacebookProvider
    arguments:
        facebook: "@fos_facebook.api"
        userManager: "@fos_user.user_manager"
        validator: "@validator"
        container: "@service_container" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:15:20.467

您需要编写一个用户提供程序来将角色添加到您的用户。这在 FOSFacebookBundle 文档中有介绍。查看页面底部附近 User 实体上的服务定义和 setFBData 方法。这应该给你一个坚实的开始。

[与 FOSUserBundle 集成](https://github.com/FriendsOfSymfony/FOSFacebookBundle/blob/master/Resources/doc/2-integration-with-fosuserbundle.md)

# php - 具有未知键的多维数组

> ID：15481971
> 
> 赞同：2
> 
> 时间：2013-03-18T16:30:54.453
> 
> 标签：php, multidimensional-array

我有一个多维数组，我不知道其中的键，我需要所有键的值。

我的数组已填充数据库：

```
$rows[$product_id][$productgroup_id] = $amount 
```

因此，该数组例如填充了 2 个产品：

```
$rows[108][3] = 2
$rows[2][5] = 4 
```

所以我的数组现在包含 2 个产品：

*   Product_id 108 来自产品组 3，数量为 2
*   产品组 5 中的 Product_id 2，数量为 4

现在我需要遍历数组，我需要密钥和数量。所以我在考虑一个foreach循环

```
foreach($rows as $row){
  foreach($row as $key => $value){
    echo "Key:".$key." Value: ".$value."<br>";"
  }
} 
```

但这只是回显第一个键 product_id 和数量。但我需要 product_id、productgroup_id 和金额。那么我如何获得 productgroup_id 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:33:57.817

到目前为止，您的代码几乎就在那里，您只需要使用 foreach 循环提取两个 id。

```
foreach($rows as $product_id => $group){
  foreach($group as $productgroup_id => $value){
    echo "Product ID:" . $product_id . " Group:".$productgroup_id." Value: ".$value."<br>";"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:41:29.870

如果您想查看/调试数组，可以使用 php 函数 print_r()，在您的情况下，它将是 echo print_r($row)。

# html - 当 HTML 表格内容过大时，在 HTML 表格内容中显示“...”

> ID：15481973
> 
> 赞同：1
> 
> 时间：2013-03-18T16:30:58.130
> 
> 标签：html, css, html-table

我给了我的 HTML 表格行空间 200px。但是可以在其中插入超过该空间的文本。如果内容大于该空间，我希望我的行在行尾显示“...”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:32:29.910

采用

```
width: 200px;
overflow: hidden;
text-overflow: ellipsis; 
```

在 CSS 中将溢出的文本替换为`...`.

但由于它不适用于 TD 元素，因此您必须在其间添加另一个元素，例如 div。

见[示范](http://jsbin.com/ojipod/1/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:32:31.033

这是您正在寻找的样式。

祝你好运！

```
text-overflow: ellipsis; 
```

更多信息：http: [//quirksmode.org/css/user-interface/textoverflow.html](http://quirksmode.org/css/user-interface/textoverflow.html)

# c# - mschart y 轴最小/最大设置问题（可能出现故障？）C#

> ID：15481978
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:03.063
> 
> 标签：c#, axis, mschart, max

我在为我的 mschart 的 y 轴设置最大值和最小值时遇到问题。将最大值或最小值设置为一个值（例如 10.025）时，图表设置为最大值的值为 10.024999618530273。

```
mainChart.ChartAreas[selectedChartArea].AxisY.Maximum = GetRoundYAxisMax(newYMax, newYRange);
mainChart.ChartAreas[selectedChartArea].AxisY.Minimum = GetRoundYAxisMin(newYMin, newYRange); 
```

GetRoundYAxisMax 方法只返回一个“round”值。代码如下。

```
private float GetRoundYAxisMax(double calculatedMax, double yAxisRange)
        {
            double rangeFactor = 0;

            if (yAxisRange > 10)
                rangeFactor = 1;
            else if (yAxisRange > 1)
                rangeFactor = 4;
            else if (yAxisRange > 0.1)
                rangeFactor = 40;
            else if (yAxisRange > 0.01)
                rangeFactor = 400;
            else if (yAxisRange > 0.001)
                rangeFactor = 4000;
            else if (yAxisRange > 0.0001)
                rangeFactor = 40000;
            else
                rangeFactor = 400000;

            float returnValue = (float)(Math.Round(calculatedMax * rangeFactor, MidpointRounding.ToEven) / rangeFactor);
            return returnValue;
        } 
```

舍入代码正确评估并返回正确舍入的值，但是当将此值设置为 y 轴上的最大值或最小值时，它会设置一个非常接近它的值，但未舍入。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:12:19.700

您可以将轴标签样式设置为舍入未舍入的值： `mainChart.ChartAreas[selectedChartArea].AxisY.LabelStyle.Format = "#.###";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T08:08:18.830

只是回答为什么是 10.024999618530273 而不是 10.025。计算机上没有什么是无限精确的。你有 (IIRC) 80 位来代表你的号码。部分是指数部分是尾数。正在发生的事情是 10.025 不是一个在该位数中具有完美表示的数字。你没有得到完整的数字线，你会沿着它得到整数标记。（取一个随机的 80 位双精度。这是数字轴上的一个点。现在，将最小的增量添加到可能的 80 位双精度。线上的另一个点。现在，在“真实”（双关语）世界中，有无数个实点。你试图在现实世界数线上表示的线上的任何点都将被表示为在 80 位世界中限制该点的两个点之一）。

# java - 春季提交表单时出现 HTTP 状态 404

> ID：15481981
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:07.620
> 
> 标签：java, spring, spring-mvc, login

我有一个表单，可以在春天将值提交给控制器。

这就是我的 servlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.anto.springsec.controllers" />

</beans:beans> 
```

这就是 web.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

这就是我的控制器：

```
package com.anto.springsec.controllers;

import java.security.Principal;

import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

public class LoginController {

    @RequestMapping(value="/login", method = RequestMethod.POST)
    public String printWelcome( ) {

        return "createContact";
    }

    @RequestMapping(value="/login", method = RequestMethod.GET)
    public String login(ModelMap model) {
        return "login";
    }

    @RequestMapping(value="/loginfailed", method = RequestMethod.GET)
    public String loginerror(ModelMap model) {
        model.addAttribute("error", "true");
        return "login";
    }

} 
```

这就是我的jsp文件：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ page session="false"%>
<html>
<head>
<title>Login</title>
<script type="text/javascript">
function login(){
    alert("login");
    document.forms[0].action="login";
    document.forms[0].method="post";
    document.forms[0].submit();
}

</script>
</head>
<body>
    <form class="form-2" action="login" method="post" >

    <table width="100%">
            <tr>
                <td align="center" colspan="2" width="100%"><b>  <h1> <span class="log-in">Login</span></h1></b></td>
            </tr>
            <tr>
                <td align="center" colspan="2" width="100%"></td>
            </tr>
            <tr class="float">
                <td align="right" class="icon-user" width="50%"><label for="login"><i class="icon-user"></i>Username</label> </td>
                <td align="left" class="field" width="50%"><input type="text" name="login" placeholder="Username "></td>
            </tr>
            <tr class="float">
                <td align="right" class="icon-lock" width="50%"><label for="password"><i class="icon-lock"></i>Password</label></td>
                <td align="left" class="field" width="50%"><input type="password" name="password" placeholder="Password" class="showpassword"> </td>
            </tr>
            <tr>
                <td align="right" colspan="2" width="50%"><input type="submit" name="CreateContact" value="Login" /><i class="icon-user"></i></td>
            </tr>
        </table>
        </form>
</body>
</html> 
```

我只想将控件重定向到登录控制器并获取用户名和密码并重定向到某个页面。

但是当我提交请求时，我得到了`404`例外，

由于我是春天的新手，我无法找出问题所在，请解释为什么会发生。

```
EDIT : 
```

这是来自服务器控制台：

```
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/springsec/login] in DispatcherServlet with name 'appServlet' 
```

请帮我解决这个问题。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:38:11.697

在你的 JSP 文件中，你需要在开头添加这个

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%> 
```

您还需要使用诸如等标签`<form:form>`。`<form:input>`请查看[Spring MVC 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html)。

如果您使用 html 标签`<form>`，则必须在您的帖子 URL 之前添加上下文根，例如

```
<form class="form-2" action="/<your-context-root>/login" method="post" > 
```

但是，很可能您需要在视图和支持 bean 之间进行数据绑定。所以我建议使用`<form:form>`, `<form:input>`，它会自动为你找出上下文根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:42:06.773

使用`${pageContext.request.contextPath}/login`.. 这将发布到 springsec/login

现在表格是邮寄到`/login`. `${pageContext.request.contextPath}`将 springsec 添加到路径中。您的应用程序可通过以下方式访问`localhost:8080/springsec`

在您的表格中使用

```
<form action="${pageContext.request.contextPath}/login" method="post"> 
```

或者如果通过 Js 提交。

```
document.forms[0].action="${pageContext.request.contextPath}/login";
document.forms[0].method="post";
document.forms[0].submit(); 
```

注意：只有当它们被写入 JSP 文件时，上述方法才有效。不在 HTML 或 JS 文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:45:31.183

我犯了一个非常愚蠢的错误，忘了补充`@Controller`是什么让我见鬼去吧。

无论如何，感谢您对这个问题的所有贡献。

# javascript - 检索 .json 对象并将其存储在变量中

> ID：15481985
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:21.143
> 
> 标签：javascript, json, d3.js

我的 .json 文件是：

```
{
"links":[
  {source: "algorithms cormen", target: "irodov", type: "default"},
  {source: "algorithms cormen", target: "skienna", type: "default"},
  {source: "irodov", target: "skienna", type: "default"},
  {source: "irodov", target: "algorithms cormen", type: "default"}
],
"data":[
    {node: "algorithms cormen", data: "bible of algos"},
    {node: "irodov", data: "bibile of physics"},
    {node: "skienna", data: "cool book"}
]
} 
```

现在在我的 javascript 文件中，我希望“链接”存储的数据转到链接变量。我想对“数据”做同样的事情我如何实现这一目标？我正在使用 d3.js 库，所以如果这个库中包含一些我可以使用的功能，请提及它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:41:07.597

只需解析 JSON 并将值分配给变量：

```
var json; // I am assuming this is populated with your JSON string
var jsonObj = JSON.parse(json);
var links = jsonObj.links;
var data = jsonObj.data; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T16:37:57.160

将 json 文件更新为（假设您在页面加载时包含 json 文件而不是通过 ajax）

```
var json-data = { 
     "links":[
         {source: "algorithms cormen", target: "irodov", type: "default"},
         {source: "algorithms cormen", target: "skienna", type: "default"},
         {source: "irodov", target: "skienna", type: "default"},
         {source: "irodov", target: "algorithms cormen", type: "default"}
],
    "data":[
        {node: "algorithms cormen", data: "bible of algos"},
        {node: "irodov", data: "bibile of physics"},
        {node: "skienna", data: "cool book"}
    ]
} 
```

然后访问

```
var links = json-data.links; 
var data = json-data.data; 
```

# geometry - 如何更新 Openlayers.Layer 中的功能？

> ID：15481987
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:22.030
> 
> 标签：geometry, openlayers, layer

我有一个带有坐标的 xml 文件，我想在 Openlayers 地图上绘制这些点的线。我已经有一个 Openlayers.Layer.Vector 并且我正在创建一个功能，如下所示：

```
var points = [];
for (var i = 0; i < coords.length; i++)
{
    point = new OpenLayers.Geometry.Point(aPointsArray[i].lon, aPointsArray[i].lat);
    points.push(point);
}
var geometry = new OpenLayers.Geometry.LineString(points);
var feature = new OpenLayers.Feature.Vector(geometry, null,
{
    strokeColor: aColor,
    strokeOpacity: 0.7,
    strokeWidth: 3
});
aLayer.addFeatures([feature]); 
```

这符合预期，我在地图上看到了一条线。现在的问题是，我从 .xml 获得的点被另一个程序动态更改，我想在我的地图上实时绘制这些更改。我已经有一种定期更新地图的方法，但是如何将特征/几何更新到新点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:49:36.670

尝试`aLayer.drawFeature(yourChangedFeature);`

# c++ - 将 Eigen MatrixXd 序列化为 XML

> ID：15481989
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:25.130
> 
> 标签：c++, serialization, boost, xml-serialization, eigen

我正在尝试使用 boost 序列化序列化特征矩阵。我已经看到[了这个问题](https://stackoverflow.com/questions/12851126/serializing-eigens-matrix-using-boost-serialization)并尝试使用该解决方案，但是我遇到了奇怪的编译器错误。

我有一个`shared_ptr`to a`MatrixXd`并尝试将其序列化如下：

```
#include <boost/archive/xml_oarchive.hpp>
#include <boost/serialization/shared_ptr.hpp>
#include "utils.hpp"
    boost::shared_ptr<std::map<int, boost::shared_ptr<Eigen::MatrixXd> > > class_to_inv_cov_mat;
    template<class Archive>
        void serialize(Archive& ar, const unsigned int version){
        ar & BOOST_SERIALIZATION_NVP(class_to_inv_cov_mat);
    } 
```

我也有 utils.hpp 其中包括：

```
namespace boost {

template<class Archive, typename _Scalar, int _Rows, int _Cols, int _Options, int _MaxRows, int _MaxCols>
   inline void serialize(
       Archive & ar, 
       Eigen::Matrix<_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols> & t, 
       const unsigned int file_version
   ) 
   {
       for(size_t i=0; i<t.size(); i++)
           ar & t.data()[i];
   }
} 
```

当我编译时，我收到以下错误：

```
/usr/include/boost/archive/detail/oserializer.hpp:148:5:   instantiated from ‘void boost::archive::detail::oserializer<Archive, T>::save_object_data(boost::archive::detail::basic_oarchive&, const void*) const [with Archive = boost::archive::xml_oarchive, T = Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001>]’
../src/Main.cpp:357:1:   instantiated from here

/usr/include/boost/archive/basic_xml_oarchive.hpp:92:9: error: no matching function for call to ‘assertion_failed(mpl_::failed************ boost::serialization::is_wrapper<const double>::************)’ 
```

我不懂这啥意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:16:01.617

需要更改 utils 中的代码以包含`BOOST_SERIALIZATION_NVP`ie

命名空间提升 {

模板内联 void 序列化（存档 & ar，Eigen::Matrix<_Scalar，_Rows，_Cols，_Options，_MaxRows，_MaxCols> & t，const unsigned int file_version）{ for（size_t i=0; i

# python - 在 Python 中计算 Fisher 标准

> ID：15481990
> 
> 赞同：1
> 
> 时间：2013-03-18T16:31:25.947
> 
> 标签：python, statistics, machine-learning, stat

是否有一个python模块，当给定两个向量x和y时，其中y是一个二类（0,1），它计算Fisher标准，如这里的公式所示[http://compbio.soe.ucsc.edu /genex/genexTR2html/node12.html](http://compbio.soe.ucsc.edu/genex/genexTR2html/node12.html)

请注意，我不打算应用Fisher 的线性判别式，只应用Fisher 标准:)。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:41:06.843

据我所知，你可以自己写（请测试这个结果是否正确，我只是根据我对公式的理解）。

```
import numpy as np

def fisher_criterion(v1, v2):
    return abs(np.mean(v1) - np.mean(v2)) / (np.var(v1) + np.var(v2)) 
```

例如，这给出了

```
>>> fisher_criterion([0, 1, 2], [0, 1])
0.54545454545454553 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:41:18.203

这看起来非常像[线性判别分析](http://en.wikipedia.org/wiki/Linear_discriminant_analysis)- 如果您对此感到满意，那么您可以充分满足[scikit-learn](http://scikit-learn.org/stable/auto_examples/plot_lda_qda.html)和[mlpy](http://mlpy.sourceforge.net/)或众多 SVM 软件包之一的需求。

# php - 更改文本颜色，取决于值

> ID：15481991
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:27.010
> 
> 标签：php, jquery, mysql

我是 PHP MySQL 和 jQuery 的新手，我正在制作服务台表单和数据库，我可以输入数据并以良好的格式显示数据。我只需要能够根据 MySQL 数据库中的值更改文本的颜色；比如status=delay，in-flight，加油，takeoff，landed，这5个都需要是不同的颜色，比如；延误 = 红色，加油 = 橙色，起飞 = 浅绿色，飞行中 = 深绿色，着陆 = 蓝色

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:35:24.367

如果它是 PHP 生成的页面，您可以在 css 文件中编写类，例如：

```
.blue {
     color: blue;
} 
```

等等...
然后使用 PHP 根据从 MYSQL 检索到的值放置正确的类。
希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:42:14.220

您应该从数据库中获取值并将其存储在一个变量中，如下所示： $response = DATA FROM DB 然后您可以使用 switch 语句检查响应并相应地设置颜色：

```
switch ($response)
{
 case "delayed":
   // maybe frame the element like so
   <span class="delayed">Delayed</span>
   // or set a class using a variable
   $class = "red";
break;
case "in-flight":
   <span class="in-flight">Delayed</span>
   //or
   $class = "orange";
   break;
   // always good to set a default value 
default:
  code to be executed if n is different from both delayed and in-flight;
} 
```

如果您使用 switch 语句来设置类名，那么您可以像这样将元素框在它下面：

```
 <span class="<?php echo $class; ?>">Delayed</span> 
```

然后使用 css

```
.red{
   color: red;
} 

.orange{
   color: orange
 } 
```

# javascript - 获取函数构造函数以使用参数？

> ID：15481993
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:27.780
> 
> 标签：javascript

*我正在用 Function constructor 做一些测试，只是为了学习）*

所以这是故事：

作为*首选*`Function constructor` 的方式，我已经管理[**（jsbin）**](http://jsbin.com/upazac/5/edit)通过它的名字来获取我的变量*`eval`[](http://jsbin.com/upazac/5/edit)**`regex`***

 ***```
var my1Pattern=/\d/ig; 
var my2Pattern=/\w/ig;
var my3Pattern=/\d+/ig;

var f=new Function( "return my"+3+"Pattern"); //3 or 2 or 1 , doesn't matter .

doWork(f()) //"[object RegExp]"

function doWork(r)
{
   alert(Object.prototype.toString.apply(r))
} 
```

但是，我希望将*数字**作为参数*发送给 Function ctor。

因此，我尝试替换：（[**jsbin#2**](http://jsbin.com/upazac/8/edit)）

```
var f=new Function("a", "return a")( "my"+5+"Pattern")
 doWork(f) 
```

但它会发出警报`"string"`。（这是正确的，因为我实际上是在发送一个字符串）。

**问题 ：**

如何让*第一个*代码**使用** `Function constructor`参数？

**换句话说，我希望能够将一个数字作为参数/字符串发送到函数构造函数，因此它将返回正则表达式。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:40:09.543

*干脆不要。*那太可怕了。

你还没有告诉我们你想要做什么，但我相信它是这样的：

```
var myPattern = [
   /\d/ig,
   /\w/ig,
   /\d+/ig
];

/** Apply my ith regex to str */
var f = function(str, i) {
   return str.apply(myPattern[i]);
};

console.log(f("hello!", 0));
console.log(f("hello!", 1));
console.log(f("hello!", 2)); 
```

您可以尽可能多地抱怨您不希望使用数组，但这并不能改变这样一个事实，即***这*是正确的方法，以及***任何人*向您推荐的方式都非常愚蠢。

***我们不会通过对象名称的字符串版本获取对对象的引用，既不使用`eval`也不使用`Function`构造函数。***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:44:21.167

的补充

```
function (a) {
    return eval("my"+a+"Pattern");
} 
```

将会

```
function (a) {
    return new Function("return my"+a+"Pattern")();
} 
```

但是你知道不要使用它们中的任何一个:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T07:38:16.963

我认为唯一的方法是使用另一个功能。

```
var f=new Function("a", "return a")( (new Function("return my"+3+"Pattern;")() );
doWork(f) 
```***

# xslt - 按名称对 XML 元素进行排序，并进一步按文本对元素进行排序

> ID：15481995
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:31.507
> 
> 标签：xslt

我想知道如何根据第一个元素名称对 XML 进行排序，而不是根据其中几个元素的文本进行排序。基本上，如果我在同一级别有元素“d、e、c、a、b”元素，我希望它们按“a、b、c、d、e”排序。另一个要求是按“b、c、d”元素中的文本对 a/b/c/d/e 组进行排序。因此，如果一组 b,c,d 包含 'b1, c1, d1'，而另一组包含 'b2, c2, d2'，那么带有 '1' 的集合应该首先出现（按字母顺序，我不需要数字命令）。（在 sql 术语中：按 b、c、d 排序）

我有 XML 之类的。

```
<top_tag>
 <next_tag>
  <a_element>valueX</a_element>
  <b_element>valueZ</b_element>
  <d_element>
   <property>on</property>
   <header>hello</header>
   <column_name>columnC</column_name>
   <a_element>valueX</a_element>
   <b_element>valueZ</b_element>
  </d_element>
  <c_element>valueC</c_element>
  <d_element>
   <property>off</property>
   <header>hi</header>
   <column_name>columnA</column_name>
   <a_element>valueX</a_element>
   <b_element>valueZ</b_element>
  </d_element>
 </next_tag>
 <next_tag>
  <a_element>valueA</a_element>
  <b_element>valueB</b_element>
  <d_element>
   <property>on</property>
   <header>hello</header>
   <column_name>columnAAA</column_name>
   <a_element>valueA</a_element>
   <b_element>valueB</b_element>
  </d_element>
  <c_element>valueC</c_element>
  <d_element>
   <property>off</property>
   <header>hi</header>
   <column_name>columnA</column_name>
   <a_element>valueA</a_element>
   <b_element>valueB</b_element>
  </d_element>
 </next_tag>
</top_tag> 
```

我想得到这个：（按'a_element和b_element'排序next_tag，并按'a_element，b_element和column_name'排序d_element）

```
<top_tag>
  <next_tag>
    <a_element>valueA</a_element>
    <b_element>valueB</b_element>
    <c_element>valueC</c_element>
    <d_element>
      <a_element>valueA</a_element>
      <b_element>valueB</b_element>
      <column_name>columnA</column_name>
      <header>hi</header>
      <property>off</property>
    </d_element>
    <d_element>
      <a_element>valueA</a_element>
      <b_element>valueB</b_element>
      <column_name>columnAAA</column_name>
      <header>hello</header>
      <property>on</property>
    </d_element>
  </next_tag>
  <next_tag>
    <a_element>valueX</a_element>
    <b_element>valueZ</b_element>
    <c_element>valueC</c_element>
    <d_element>
      <a_element>valueX</a_element>
      <b_element>valueZ</b_element>
      <column_name>columnA</column_name>
      <header>hi</header>
      <property>off</property>
    </d_element>
    <d_element>
      <a_element>valueX</a_element>
      <b_element>valueZ</b_element>
      <column_name>columnC</column_name>
      <header>hello</header>
      <property>on</property>
    </d_element>
  </next_tag>
</top_tag> 
```

我在这里找到了如何根据字母顺序对元素进行排序： [XSL​​T to sort nodes by name?](https://stackoverflow.com/questions/4091085/xslt-to-sort-nodes-by-name)

但是，如果我随后按元素应用顺序（很可能是错误的），所有元素名称都会被打乱（超出元素名称顺序）。

对于此处理，可以使用 xslt 的多次传递来获得最终结果，我不需要一个 xsl 文件同时进行（按元素和名称排序）

整个练习只是为了让我可以做一个“差异”（或超越比较）并能够理解 XML 中的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:43:21.687

`<xsl:sort>`您可以在一个`apply-templates`或中拥有多个`for-each`

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:strip-space elements="*"/>
  <xsl:output indent="yes" />

  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <xsl:template match="top_tag">
    <top_tag>
      <xsl:apply-templates select="next_tag">
        <xsl:sort select="a_element" />
        <xsl:sort select="b_element" />
      </xsl:apply-templates>
    </top_tag>
  </xsl:template>

  <xsl:template match="next_tag">
    <next_tag>
      <xsl:apply-templates select="*">
        <xsl:sort select="name()" />
        <xsl:sort select="a_element" />
        <xsl:sort select="b_element" />
        <xsl:sort select="column_name" />
      </xsl:apply-templates>
    </next_tag>
  </xsl:template>

  <xsl:template match="d_element">
    <d_element>
      <xsl:apply-templates select="*">
        <xsl:sort select="name()" />
      </xsl:apply-templates>
    </d_element>
  </xsl:template>
</xsl:stylesheet> 
```

这里的关键点是，`select`a的表达式`sort`应用了考虑排序的节点作为上下文节点，因此`next_tag`模板将首先按元素名称对其子节点进行排序，然后如果两个元素具有相同的名称，则将它们排序为他们各自的价值`a_element`，`b_element`和`column_name`孩子（如果有的话），按顺序。

# mamp - 在 mamp 中打开起始页

> ID：15481996
> 
> 赞同：1
> 
> 时间：2013-03-18T16:31:31.870
> 
> 标签：mamp

我无法在 mamp 中进入 phpmyadmin，为此我相信你必须通过起始页，我试图进入 mamp 程序并单击“打开起始页”，但这会将我带到 htdocs 文件夹，我也尝试过到 - localhost:8888/MAMP - 和 - localhost:8888/MAMP/?language=English

但是这两个都把我带到“无法连接 - Firefox 无法建立与服务器的连接......”错误页面，有什么想法可以让我进入 mamp 的正常起始页面吗？

我一直在摆弄它，并注意到如果我进入首选项 > 端口 > 并重置 MAMP 端口，然后转到 localhost:8889 - 得到一串 jiberish，然后`„#08S01Got packets out of order`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:34:55.273

哇很奇怪，它对我来说是开箱即用的:)。您确定确实安装了所有内容并且您已经使用 MAMP 控制面板启动了所有服务？确保在选项中关闭面板应用程序时它不会终止服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T01:49:15.897

需要转到首选项...并设置为默认 Apache 和 MySQL 端口。无论如何，那是我的解决方案。希望有人觉得这很有用

# javascript - 替换元素并单击返回旧元素

> ID：15481997
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:32.247
> 
> 标签：javascript, jquery

我有以下功能：

```
datum.on('change', function(){
    var url = '<?php echo base_url()  ?>admin/admin_tvprogram .tvprogram > *';
    tvprogram.empty().load(url, {'datum':$(this).val()}, function(){
        var izmeni = $(this).find('a');
        izmeni.on('click', function(){
            var sat = $(this).parent().find('.sat'),
            sat_vrednost = sat.text(),
            naziv = $(this).parent().find('.naziv'),
            naziv_vrednost = naziv.text(),
            vrati = $(this).parent().append('<span class=vrati>Vrati</span>');

            var novi_sat = sat.replaceWith('<input type=text name=sat value=' + sat_vrednost + ' >' ),
            novi_naziv = naziv.replaceWith('<input type=text name=naziv value=' + naziv_vrednost + ' >' );

        });
    });
}); 
```

一切正常，但我需要更多功能。当用户单击**vrati**（新附加的**span**元素）时，元素**sat**和**naziv**需要返回到原始形式。我怎样才能做到这一点？

激活加载功能后，我得到以下 HTML：

```
<ul>
    <li>
    <span class="sat">18:00</span>
    <span class="naziv">Opravka Traktora</span>
    <a data-id="2">Izmeni</a>
  </li>
</ul> 
```

**单击izmeni**后，我得到以下 HTML：

```
<ul>
<li>
<input type="text" value="18:00" name="sat">
<input type="text" traktora="" value="Opravka" name="naziv">
<a data-id="2">Izmeni</a>
<span class="vrati">Vrati</span></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:36:49.420

当用户单击时，您正在保存元素的值。

可能需要在加载之前保存值，然后单击中的相同代码将恢复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:45:59.207

从您定义的变量中填充您的列表输入表，然后将 j query .text 操作应用于您的 sat 和 naziv，然后在单击 vrati 时再次为它们提供该变量的参数

//函数 textvalueToggle 在文档加载时被调用，将值分配给 sat 和 naziv。然后将点击监听器附加到 vrati 以调用相同的函数重新分配值

```
 $(document).ready(function() {
           textvalueToggle();
           $('#vrati').click(textvalueToggle);
    });

    function textvalueToggle() {
       $('#sat').text('18:00');
       $('#naziv').text('Opravka Traktora');
   } 
```

# performance - 列表理解性能非常慢并且保持对资源的控制

> ID：15481999
> 
> 赞同：2
> 
> 时间：2013-03-18T16:31:36.033
> 
> 标签：performance, angularjs, list-comprehension

在 AngularJS 中，我使用列表推导来循环对象的属性，这在特定结果集中发生了 50 次：

```
<div class="property-value" ng-show="property.type == 'object'">
    <ul>
        <li ng-repeat="(k, v) in property.value"><span class="property-name">{{k}}:</span> {{v}}</li>
    </ul>
</div> 
```

发生的情况是，当我运行查询时，HTML 生成时间需要几秒钟，然后即使在呈现 HTML 之后也会保持性能。当我将列表理解注释掉时，性能问题就完全消失了。

什么会导致模板渲染后资源被占用？有没有办法在没有性能损失的情况下做我想做的事情？