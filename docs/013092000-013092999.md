# StackOverflow 问答 13092000-13092999

# php - 用于文件名的 PHP encdoe 函数

> ID：13092000
> 
> 赞同：0
> 
> 时间：2012-10-26T17:59:11.150
> 
> 标签：php, file-upload, encode

我正在学习函数`urlencode`。是否可以在文件名上使用它？所以 - 当您将文件上传到服务器然后稍后使用该文件名时，您可以在 url 中使用它吗？

```
$promotionpicture=$_FILES["promotionpicture"]["name"];
$promotionpicture=rawurlencode($promotionpicture); 
```

然后后来...

```
$imagesource="http://mysite.com/".$userID."/".$promotionpicture; 
```

我正在尝试这样做，但每次导航到图片时，我都会从服务器收到“错误请求”。我应该使用特定的 php 编码功能吗？还是这一切都错了？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:10:14.827

图片实际上只是原始数据，就像任何其他文件一样。可以做一些像你正在做的事情，但不一定是可取的。

如果你想做这样的事情，我建议你做一些事情来去除特殊字符。

```
$newfilename=preg_replace('/[^a-zA-Z0-9.]/','',$filename); 
```

（从[正则表达式匹配除字母和数字之外的所有字符](https://stackoverflow.com/questions/2167145/regex-to-match-all-characters-except-letters-and-numbers)）

也就是说，请记住其他人所说的话。您将如何处理文件名冲突？图像将存储在哪里以及如何存储？

一种更稳健地执行此操作的简单方法是将原始文件名和 MD5 哈希存储在数据库中。通过哈希而不是名称保存文件，并编写一个脚本，通过使用数据库将原始名称与 MD5 匹配来检索文件。如果存储文件类型，则可以发出正确的标题，当用户下载文件或使用它嵌入网页时，它将保留其原始名称，或分别按预期显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:03:33.460

urlencode and similar functions are for making an HTTP friendly URL. You would want to keep the normal filename and then when printing the img src, use urlencode.

Note that this is not really the preferred way to do it as you can run into duplicate filenames and misc security issues. It's better to generate a filename for it using a uuid or timestamp or something, that way you can bypass those types of issues.

# eclipse - 如何修改 Eclipse 的 library.path？

> ID：13092003
> 
> 赞同：1
> 
> 时间：2012-10-26T17:59:15.830
> 
> 标签：eclipse, ide, java.library.path

我有一个相当普遍的问题...我正在使用 Eclipse 作为我的 IDE...当我转到 ->帮助 ->关于 ECLIPSE SDK ->安装详细信息 ->配置时，我看到了行条目： **-Djava.class。路径**=C:\Eclipse\etc... 和 **java.library.path** =C:\Eclipse\etc...

我对此有两个问题... 1) -Djava.class.path 在 ECLIPSE 环境中是什么意思？2) 如何更改/修改 Eclipse 的 java.library.path 选项，以便我所做的更改在 HELP 菜单下的 Eclipse 配置窗口中可见，如上所述？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:02:54.320

```
-Djava.library.path=" something"... 
```

or you can simply add `-Djava.library.path=yourPath` to the `eclipse.ini.`

# field - Vaadin 使用函数 使用 addItemAt 时创建字段

> ID：13092005
> 
> 赞同：0
> 
> 时间：2012-10-26T17:59:25.163
> 
> 标签：field, vaadin

我对创建字段 vaadin 表有问题，nesesito 在表中定义一个字段，您可以在其中输入文本，为此创建字段，每次新行聚集时，该字段都应该具有焦点，所以我做了这样的事情：

```
public Field createField(Container container, Object itemId,
                Object propertyId, Component uiContext) {
            final TextField f=new TextField();      
            f.setVisible(true);

            f.addStyleName("txtronly-textfield");
            if((propertyId=="Cantidad"))
            {

                f.setStyleName("centerTxt");
                f.setReadOnly(true);
                f.setRequired(true);
                f.setMaxLength(9);
                f.focus();
            }
            return f;
} 
```

现在，当我插入一个项目时，使用 addItemAt (0, item) 插入顶部，但焦点字段是表中的最后一个。如果有人可以提供帮助，我找不到为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T11:09:24.720

您的 if 块中的代码将永远不会执行，因为 if 语句永远不会为真。始终使用 equals 方法比较字符串。

尝试以下操作：

```
if((propertyId.equals("Cantidad")))
        {
            ...
        } 
```

# iphone - 在子类上声明一个类别

> ID：13092007
> 
> 赞同：0
> 
> 时间：2012-10-26T17:59:44.243
> 
> 标签：iphone, objective-c, ios, subclass, categories

所以我想将一些代码重构为我们现有的 DataManager 代码。代码库太大，我们想使用数据访问对象模式将其拆分为单独的文件。所以我想做的是有一个

```
BaseDAO 
```

然后让各个 DAO 从该类继承。所以我有

```
BaseDAO : NSObject

SomeItemDAO : BaseDAO 
```

在里面

SomeItemDAO.m，我有

```
@implementation SomeItemDAO (DataManager) 
```

但我收到警告，“类别正在实现一个方法，该方法也将由其主类实现，即使它的方法名称不同。我读到，如果你有类似的东西

```
@interface NSArray (MyCAtegory) 
```

你不会得到那个编译器警告。

如果是这种情况，我该如何处理我的情况？我不能做

```
@interface BaseDAO (DataManager) 
```

编译器说它找不到接口 BaseDAO。有什么想法吗？谢谢。

编辑：

```
+ (SomeItemDAO *)sharedInstance {
    static SomeItemDAO *instance;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{
        instance = [[SomeItemDAO alloc] init];
    });
    return instance;
}

- (void)someTestMethod {
    NSLog(@"test method from condition");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:11:34.880

**要么：**实施你的，

`@interface SomeItemDAO (DataManager)`在`SomeItemDAO.h`文件中和

在那里写下以下内容，

```
@interface SomeItemDAO (DataManager)

+ (SomeItemDAO *)sharedInstance;
- (void)someTestMethod;

@end 
```

并从中删除这些方法声明`SomeItemDAO`，

```
@interface SomeItemDAO : BaseDAO
//remove sharedInstance and someTestMethod from here
@end 
```

**或：**将其从`@implementation SomeItemDAO (DataManager)`

```
@implementation SomeItemDAO (DataManager)
//remove sharedInstance and someTestMethod from here
@end 
```

并在此处添加，

```
@implementation SomeItemDAO

+ (SomeItemDAO *)sharedInstance {
    static SomeItemDAO *instance;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{
        instance = [[SomeItemDAO alloc] init];
    });
    return instance;
}

- (void)someTestMethod {
    NSLog(@"test method from condition");
}

@end 
```

因为您的警告消息说***“类别正在实现一个方法，该方法也将由其主类实现”***您的类别`SomeItemDAO (DataManager)`正试图实现一个已经在其主类中声明的方法`SomeItemDAO`。因此，您应该将其从主类中删除并将其`@interface`添加到该类别中。`@intefrace.``@implementation SomeItemDAO``@implementation SomeItemDAO (DataManager)`

# java - 是否有用于 KeyEvent 的 postActionEvent 版本（特别是用于 JTextArea）？

> ID：13092008
> 
> 赞同：4
> 
> 时间：2012-10-26T18:00:13.360
> 
> 标签：java, swing, action, jtextarea, keyevent

我正在编写一个在输入面板中包含多个 JTextField 和 2 个 JTextArea 的程序。我在底部有一个提交按钮。我已经设置好了，所以当用户在每个字段（包括 JTextAreas）中输入一些内容并点击 Enter 键时，它会更新一个文本文件，当他们按下提交按钮时它会更新文件，然后在其中输出一个新版本本地目录。

如果用户在任何字段中按 Enter，它会验证他们的输入，但是，我想在他们按下提交按钮时重新验证所有字段。每个字段（同样，包括 JTextAreas）在其 ActionListener 或 KeyListener（针对 JTextAreas）中都有自己的验证检查。对 JTextFields 使用 postActionEvent() 很容易，但是**JTextAreas 是否有类似的方法来强制触发 KeyEvent？** 我不想通过在 JButton 的 ActionEvent 中重写这两个组件的验证来复制代码并消耗内存。

不幸的是，我无法提供示例，因为我正在机密机器 (PC) 上编写程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:28:41.703

当您可以简单地调用您的方法（例如在伪代码中）时，为什么要尝试发布`KeyEvent`来触发验证`validate`

```
myTextArea.getDocument().addDocumentListener(){
  //in each of the method you call validate

}

private function validate( ){
  //do your validation
}

private function submitButtonFunction(){
  validate();
} 
```

另请注意，`DocumentListener`如果您想对 a 中的输入做出反应，推荐的方法是使用 a `JTextComponent`。例如，您`KeyListener`不会在拖放后触发。根据您的实现，`KeyListener`当您使用复制粘贴时，它也可能会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T18:55:54.173

您可以使用类和方法模拟`ENTER`被按下。您当然必须遍历组件上的所有内容并调用模拟按键（省略处理）：[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)`keyPress(..)``keyRelease(..)``JTextAreas``requestFocusInWindow(..)``Exception`

```
Robot robot = new Robot();//throws AWTException

...

Component[] components=getContentPane().getComponents();  

for(int i=0;i<components.length;i++)  
{
    if(components[i] instanceof JTextArea) { 
         components[i].requestFocusInWindow();
         simulateEnter();
     }
}

public static void simulateEnter() {
     robot.keyPress(KeyEvent.VK_ENTER);
     robot.keyRelease(KeyEvent.VK_ENTER);
} 
```

# java - 反序列化对象时出现 classnotfound 异常错误

> ID：13092012
> 
> 赞同：-1
> 
> 时间：2012-10-26T18:00:23.473
> 
> 标签：java, serialization, deserialization, classnotfoundexception, xml-deserialization

我在反序列化和对象时遇到错误。

```
13:47:00,679 INFO  [stdout] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) 2012-10-26 13:47:00,679 () DEBUG com.dipp.testMap - Error while reading the object to HashMap
13:47:00,680 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) java.lang.ClassNotFoundException: org.apache.xerces.jaxp.datatype.XMLGregorianCalendarImpl from [Module "deployment.DIPP.war:main" from Service Module Loader]
13:47:00,682 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)     at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
13:47:00,682 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) 
```

这是我的代码。

```
 try{
         transferObject = (HashMap)o.readObject();
            }
         catch(Exception e)
         {
             log.debug("Error while reading the object to HashMap");
             e.printStackTrace();
         } 
```

我有一个名为 EPOCHDATE 的字段，它位于 transferObject 中，并且具有 XMLGregorianCalendar 数据类型。有解决此问题的想法吗？我收到 classNotFound 异常。我相信，我必须在 POM 文件中添加依赖项。

提前致谢

健达富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:38:18.883

我得到了这个问题。我已将以下依赖项添加到我的 POM.xml

```
<dependency> 
```

xerces xercesImpl 2.8.1

# c# - 在 XNA 3D 中创建模型变化形状

> ID：13092015
> 
> 赞同：0
> 
> 时间：2012-10-26T18:00:31.793
> 
> 标签：c#, xna-4.0

我想创建一个移动的物体（比如人在移动或弹性弹簧），当移动时，物体的形状会发生变化。而且我不知道如何在 XNA 4.0 中创建 3D 模型形状变化。你能帮助我吗？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:17:05.387

我也许可以给你一些初学者对初学者的建议。

[我刚刚从这个例子](http://xbox.create.msdn.com/en-US/education/catalog/sample/simple_animation)中学会了如何制作一个模型，并根据你的问题，我对其中一个骨骼应用了一个额外的比例变换，看看我是否可以像操纵它的位置一样操纵它的大小，它确实有效。

所以我暗示你的问题的答案可能是，当模型的顶点数据保持不变时，你可以使用 Scale 变换使其改变形状。

这是我的模型：

```
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;

namespace SimpleAnimation
{
    public class Body
    {
        Model bodyModel;
        ModelBone headBone;
        ModelBone bodyBone;
        Matrix headTransform;
        Matrix bodyTransform;
        Matrix[] boneTransforms;

        public Body()
        {
            HeadScale = 1;
        }

        public void Load(ContentManager content)
        {
            // Load the tank model from the ContentManager.
            bodyModel = content.Load<Model>("body");

            // Look up shortcut references to the bones we are going to animate.
            headBone = bodyModel.Bones["head"];
            bodyBone = bodyModel.Bones["body"];

            // Store the original transform matrix for each animating bone.
            headTransform = headBone.Transform;
            bodyTransform = bodyBone.Transform;

            // Allocate the transform matrix array.
            boneTransforms = new Matrix[bodyModel.Bones.Count];
        }

        public void Draw(Matrix world, Matrix view, Matrix projection)
        {
            // Set the world matrix as the root transform of the model.
            bodyModel.Root.Transform = world;

            // Calculate matrices based on the current animation position.
            Matrix headRotation = Matrix.CreateRotationX(HeadRotation);
            Matrix headScale = Matrix.CreateScale(HeadScale);
            Matrix bodyRotation = Matrix.CreateRotationX(BodyRotation);

            // Apply matrices to the relevant bones.
            headBone.Transform = headScale * headRotation * headTransform;
            bodyBone.Transform = bodyRotation * bodyTransform;

            // Look up combined bone matrices for the entire model.
            bodyModel.CopyAbsoluteBoneTransformsTo(boneTransforms);

            // Draw the model.
            foreach (ModelMesh mesh in bodyModel.Meshes)
            {
                foreach (BasicEffect effect in mesh.Effects)
                {
                    effect.World = boneTransforms[mesh.ParentBone.Index];
                    effect.View = view;
                    effect.Projection = projection;

                    effect.EnableDefaultLighting();
                }

                mesh.Draw();
            }
        }

        public float HeadRotation { get; set; }

        public float HeadScale { get; set; }

        public float BodyRotation { get; set; }
    }
} 
```

# c# - 接口传入 Setter 编译错误

> ID：13092018
> 
> 赞同：1
> 
> 时间：2012-10-26T18:01:09.760
> 
> 标签：c#, interface

我在一个名为 Owner 的类上有一个名为 CustomerForOwner 的属性。我想要 Owner 类的只读版本，所以我创建了一个名为 OwnerReadOnly 的包装类。我遇到的问题是当我有引用类型属性时。为了创建该对象的只读版本，我使用了一个接口，以便 Owner 和 OwnerReadOnly 都可以拥有一个名为 CustomerForOwner (ICustomer) 的属性。OwnerReadOnly.CustomerForOwner 将返回 CustomerReadOnly，而 Owner.CustomerForOwner 将返回 Customer。

类的简化版本：

```
public class Owner : ProjectBase<Owner>, IOwner
{

    private Customer _customerForOwner;
    private string _ownerName

    public virtual ICustomer CustomerForOwner
    {
        get { return _customerForOwner; }
        set 
        {
            SetField(ref _customerForOwner, value, () => CustomerForOwner);
            value.PropertyChanged += this.OnItemPropertyChanged;
        }
    }

    public virtual string OwnerName
        {
            get { return _ownerName; }
            set { SetField(ref _ownerName, value, () => OwnerName); }
        }

    public Owner(DateTime created, string createdBy)  :
            base(created, createdBy) { }
    }

    public class OwnerReadOnly : Owner
    {

        public override ICustomer CustomerForOwner
        {
            get { return (CustomerReadOnly)base.CustomerForOwner; }
        }

        public override string OwnerName
        {
            get { return base.OwnerName; }
        }

        public OwnerReadOnly(DateTime created, string createdBy) :
            base(created, createdBy) 
        {
            throw new Exception("Object is ReadOnly, cannot create a new instance");
        }
     } 
```

基类：

```
public abstract class ProjectBase<T> : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

            private bool _isActive;

    public bool IsActive 
    { 
        get { return _isActive; } 
        set { SetField(ref _isActive, value,() => IsActive ); } 
    }

    public DateTime Created { get; private set; }
    public string CreatedBy { get; private set; }
    public DateTime? LastUpdated { get; protected set; }
    public string LastUpdatedBy { get; protected set; }
    public bool IsDirty { get; protected set; }

    private ProjectBase() { }

    protected ProjectBase(DateTime created, string createdBy)
    {
        IsActive = true;
        Created = created;
        CreatedBy = createdBy;
        LastUpdated = created;
        LastUpdatedBy = createdBy;
        IsDirty = false;
    }

    public abstract void Clone();
    public abstract void Create();
    public abstract void Update(DateTime lastUpdated, string lastUpdatedBy);
    protected abstract void Update();
    public abstract void Delete();

    protected bool SetField<TField>(ref TField field, TField value, Expression<Func<TField>> selectorExpression)
    {
        bool returnValue = false;

        if (EqualityComparer<TField>.Default.Equals(field, value))
            returnValue = false;
        else
        {
            field = value;
            IsDirty = true;
            OnPropertyChanged(selectorExpression);
            returnValue = true;
        }

        return returnValue;
    }

    protected virtual void OnPropertyChanged<TParam>(Expression<Func<TParam>> selectorExpression)
    {
        MemberExpression body;

        if (selectorExpression == null)
            throw new ArgumentNullException("selectorExpression");

        body = selectorExpression.Body as MemberExpression;

        if (body == null)
            throw new ArgumentException("The body must be a member expression");

        OnPropertyChanged(body.Member.Name);
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
            handler(this, new PropertyChangedEventArgs(name));

        IsDirty = true;
    }

    protected void OnItemPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        IsDirty = true;
    } 
```

我遇到的问题是使用 Owner.CustomerForOwner 属性行调用 SetField：

```
SetField(ref _customerForOwner, value, () => CustomerForOwner); 
```

我收到以下编译错误：无法从用法中推断方法 'ProjectBase.SetField(ref TField, TField, System.Linq.Expressions.Expression>)' 的类型参数。尝试明确指定类型参数。

我怎样才能通过 ICustomer 作为客户？我将其更改为：

```
SetField(ref _customerForOwner, (Customer)value, () => CustomerForOwner); 
```

但同样的错误。我还尝试在 Setter 的上一行将值设置为新客户，但返回了相同的编译错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:13:17.807

你有没有试过这个：

```
SetField(ref _customerForOwner, 
    (Customer)value, () => (Customer)CustomerForOwner); 
```

因为`CustomerOfOwner`是接口类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:20:29.217

方法

```
SetField(ref _customerForOwner, value, () => CustomerForOwner); 
```

采用单个类型参数 ( `TField`) 类型，但是

`_customerForOwner`is a `Customer`, `value`is an`ICustomer`和`CustomerForOwner`is an `ICustomer`，因此编译器无法推断类型，因为当它试图推断它时，`_customerForOwner`它`ICustomer`必须将具体类型转换为接口。

这是不允许的，因为 C# 语言规则是：

> ref 或 out 参数必须是可赋值变量

强制转换导致未分配的变量。

如果你这样做：

```
public virtual ICustomer CustomerForOwner
{
    get { return _customerForOwner; }
    set 
    {
        var customerForOwner = (ICustomer)_customerForOwner;
        SetField(ref customerForOwner, value, () => CustomerForOwner);
        _customerForOwner = customerForOwner as Customer;
        value.PropertyChanged += this.OnItemPropertyChanged;
    }
} 
```

然后代码将编译。我不确定它是否会起作用并做你想做的事。代码对我来说有点奇怪。:) 例如，`SetField`返回一个你没有使用的布尔值。

# mercurial - Mercurial：使一个分支与另一个分支相同

> ID：13092020
> 
> 赞同：4
> 
> 时间：2012-10-26T18:01:14.260
> 
> 标签：mercurial, branch

我正在与另一位相对较新的开发人员合作。为了让我对她的工作进行代码审查，我让她创建了一个分支，如果我对更改感到满意，我可以对其进行审查并定期合并。

那个分支已经被水洗了，所以我只想“重置”它，使它与主线相同，这样她就可以从干净的代码重新开始。

我可以创建一个新分支，但我想保持相同的名称并避免创建不必要的副本。

那么如何使分支 B 与分支 A 完全相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:22:17.023

（简单的好奇：那个分支是如何被“软管”的？）

您可以关闭当前的代码审查分支，然后使用`--force`.

```
hg com --close-branch -m "closing"
hg branch "same_name" --force 
```

# c - 哈希中的冲突检查

> ID：13092022
> 
> 赞同：2
> 
> 时间：2012-10-26T18:01:20.723
> 
> 标签：c, memory, data-structures, hash-collision, integer-hashing

我对**哈希概念有一些****理解问题**，如下所示：

 **假设，我已经实现了将键作为数字的哈希表（一维数组，比如**A[100] ）。**我有一个简单的哈希函数**H(Key) % Table_Size**，它将目标索引返回到哈希表中（同时访问与此特定键关联的值）。

假设，我想将**0**（键）存储到表中。当我将此键传递给**H**（哈希函数）时，它会返回随机索引，例如 25。

数组 A 中的这个位置有 2 种可能性（索引为 25）：

1.  **A[25] 包含除0**以外的一些键，已存储（以前）
2.  A[25] 包含**0**

第一种可能性有冲突并且很容易识别（因为当前密钥：0 和已存储的密钥：k 不同），所以第一个没有问题。

但是，对于第二个，我怎么知道天气是否有碰撞？

据我所知，哈希表或数组将是主内存的一部分。假设 A[25] 存储在内存位置 500 中。

我怎么知道这个位置（500）实际上是**空**的还是已经被其他键**填充了？**

存储单元的什么状态或值代表**EMPTY**或**NULL**或**UNUSED**位置？

而且，如果我想将**0**作为密钥存储到此位置进行碰撞检查怎么办？

我目前假设如果任何内存位置是**EMPTY**或**NULL**或**UNUSED**，那么它将处于 RESET 状态（所有单元格都是 0）。这是真的 ？

这可能是个愚蠢的问题，但我想知道在这种情况下如何检查碰撞。

--

提前致谢！！（海得拉巴海泰因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:12:54.430

这里的想法是您必须**找到**空单元格的表示。通常有以下三种：

第一个是：选择一个值，通常是 0 或 -1，你知道它永远不会出现在表格中来表示一个空单元格。然后，如果值在那里，你就知道你有一个空闲空间，你可以在那里放一些东西。

第二种是：使用指针数组：例如 int *array[100]。将指针初始化为 NULL。如果它们为 NULL，您可以分配一个整数并将位置设置为指向那里。

第三个是：使用辅助数组来判断位置 i 是否为有效位置。然后将所有初始化为空。每当您将某人放入数组 [i] 时，您就会设置为有效的有效 [i] 位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:43:45.893

这是一个建议，可以节省内存并允许整数键的所有值。

将哈希表一分为二，使用密钥中的一个位，该位具有大约相等的 0 或 1 概率，并使用它来选择要搜索的哈希表的哪一半。从密钥中删除该位...如果您的密钥是 32 位，那么您现在有一个 31 位`tag`，您可以在哈希表中搜索。使用哈希表条目中的一位来指示空 (0) 或有效 (1)，最初都是 0。添加条目时，您设置标签（键减去用于选择哪一半的位），然后设置有效位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:21:50.037

要么用你知道永远不会出现的数字填充你的哈希表，显然不是 0，也许是 -1，或者使用指向 int 的指针并将它们设置为 null 为空。**

# java - Teradata 和 JDBC 驱动程序 - classnotfoundexception ...但它在那里？

> ID：13092033
> 
> 赞同：1
> 
> 时间：2012-10-26T18:01:34.120
> 
> 标签：java, linux, classpath, teradata

尝试使用与 Teradata 的 JDBC 连接。当我在 Linux 中编译时，我已经加载了 tdgssconfig.jar 和 terajdbc4.jar 文件并使用 javac 将它们添加到类路径中。但是在尝试编译时我仍然得到一个 ClassnotFoundException 。

我有一段时间没有使用 java 了，但是我已经搜索了网络，看起来它应该可以工作。

简单代码：

```
import java.sql.*;
class TDtest {
    public static void main(String[] args) {    
        System.out.println(classpath);

        Class.forName("com.teradata.jdbc.TeraDriver");
    }
} 
```

*.jars 肯定存在：

```
[user1@box java]# ls -l /home/user1/test/java/libs/*
-rwxrwxrwx 1 user1 user1 2405 Oct 26 12:00 /home/user1/test/java/libs/tdgssconfig.jar
-rwxrwxrwx 1 user1 user1 873860 Oct 26 12:00 /home/user1/test/java/libs/terajdbc4.jar 
```

详细的错误日志 - 看起来类路径对我来说是正确的：

```
javac -verbose -cp ".:/home/user1/test/java/libs/tdgssconfig.jar:/home/user1/test/java/libs/terajdbc4.jar" TDtest.java
[parsing started TDtest.java]
[parsing completed 21ms]
[search path for source files: .,/home/user1/test/java/libs/tdgssconfig.jar,/home/user1/test/java/libs/terajdbc4.jar]
[search path for class files: /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/resources.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/rt.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/sunrsasign.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/jsse.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/jce.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/charsets.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/classes,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/ext/dnsns.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/ext/sunpkcs11.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/ext/localedata.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/ext/gnome-java-bridge.jar,/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/ext/sunjce_provider.jar,.,/home/user1/test/java/libs/tdgssconfig.jar,/home/user1/test/java/libs/terajdbc4.jar]
[loading java/lang/Object.class(java/lang:Object.class)]
[loading java/lang/String.class(java/lang:String.class)]
[checking TDtest]
[loading java/lang/Class.class(java/lang:Class.class)]
[loading java/lang/Error.class(java/lang:Error.class)]
[loading java/lang/ClassNotFoundException.class(java/lang:ClassNotFoundException.class)]
[loading java/lang/Exception.class(java/lang:Exception.class)]
[loading java/lang/Throwable.class(java/lang:Throwable.class)]
[loading java/lang/RuntimeException.class(java/lang:RuntimeException.class)]
TDtest.java:4: unreported exception java.lang.ClassNotFoundException; must be caught or declared to be thrown
        Class.forName("com.teradata.jdbc.TeraDriver"); 
```

我试过 un-jar'ing jdbc jar，它们肯定有 com/teradata/jdbc/TeraDriver.class。

我不知所措。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:06:43.647

编译器不是从您的 jar 文件中查找类，而是对语句`com.teradata.jdbc.TeraDriver`做出反应。`Class.forName()`

作为已[检查异常](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation)`Class.forName()`的throws ，您将需要处理它。`ClassNotFoundException`

您可以将异常包含在“try/catch”块中，也可以抛出异常进行编译：

```
 class TDtest  {
   public static void main(String[] args) {    
      System.out.println(classpath);

      try {
         Class.forName("com.teradata.jdbc.TeraDriver");
      } catch (ClassNotFoundException e) {
         e.printStackTrace();
         // more error handling..
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:04:21.930

问题不在于您的类路径。只是你想用 try/catch 块包装你的 Class.forName 行并捕获检查的异常 ClassNotFoundException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:16:55.207

试试这个

```
 try {
    Class.forName("com.teradata.jdbc.TeraDriver").newInstance();

     } catch (Exception e) {
    e.printStackTrace();

     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T21:44:01.700

我懂了

```
Exception in thread "main" java.lang.ClassNotFoundException: 
com.ncr.teradata.TeraDriver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:191)
at com.ebay.quality.bp.Z_Query_Teradata.main(Z_Query_Teradata.java:15) 
```

当我检查 Dependency Hierarchy 选项卡下的 pom.xml 文件时，我发现我在依赖项旁边进行了测试。

```
<dependency>
  <groupId>com.thirdparty.teradata</groupId>
  <artifactId>terajdbc4</artifactId>
  <version>14.10.00.17</version>
  <scope>test</scope>
</dependency> 
```

我删除了带有测试范围的行，它起作用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-27T11:10:35.430

我有一个版本为 16.20.00.06 的 ClassNotFoundException。我切换到 15.10.00.37 现在可以使用了。我的猜测是 16.20.00.06 可以使用比我更新的 Java 版本。

# javascript - 将 X,Y 网格坐标转换为 Crafty.js 等距坐标

> ID：13092038
> 
> 赞同：3
> 
> 时间：2012-10-26T18:02:03.243
> 
> 标签：javascript, algorithm, coordinates

我们正在开发一款基于 2D 棋盘坐标开发和定义的 Javascript 游戏。

我们正在尝试将我们当前拥有的 X,Y 坐标（即 0,0）转换为相应的 ISO 坐标，以便与 crafty.js 一起使用。

我们这样做的原因是因为服务器随机生成了一个传统的 15x15 空间网格的游戏板，我们希望将其渲染为等距 3D，但狡猾的 JS 使用从左上角开始的奇怪坐标系屏幕。

我们如何将 2D 网格映射到下图，左上板空间映射到 (0,6) 或任何？注释？

![在此处输入图像描述](../Images/4b68bb66e051114dc0ae132562a4133d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:59:36.927

我也在狡猾地工作，试图制作一个 17x17 的板。目前，我只是使用地图将每个位置转换为相应的狡猾位置。我意识到它非常hacky，可能很慢，但老实说我没有时间。

我在上面注意到上图中的数字有点偏离。下面是对 Crafty 在这种情况下如何工作的更好的可视化。白色数字是我从服务器获取的原始数据，黑色数字是 Crafty 渲染此板所需的： ![狡猾的布局](../Images/dd1b68db793dbf5e1d13f78ceb4794e6.png)

我基本上已经把它计算成一个有点有用的方程（但只在创建地图时有用）：

```
Even rows (starting at 0)
- y (row) = starting at row number (base 0) then increment by 1 for each x (column)
- x (col) = previous odds's first x, then follow pattern: +0, +0, +1, +1, +2, +2...
Odd rows (starting at 0)
- y (row) = starting at row number (base 0) then increment by 1 for each x (column)
- x (col) = +1 to previous even's first x, then follow pattern: +0, +1, +1, +2, +2, +3... 
```

所以我在下面有一张似乎可以工作的地图（这是 rawToCrafty 地图）：

```
//Row 0
"00.00": { "y": 0, "x": 8 }
"01.00": { "y": 1, "x": 8 }
"02.00": { "y": 2, "x": 9 }
"03.00": { "y": 3, "x": 9 }
"04.00": { "y": 4, "x": 10 }
"05.00": { "y": 5, "x": 10 }
"06.00": { "y": 6, "x": 11 }
"07.00": { "y": 7, "x": 11 }
"08.00": { "y": 8, "x": 12 }
... 
```

是的，有更好的方法，但这是蛮力的方法。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:38:43.707

这个通用概念的名称是[Projection](http://en.wikipedia.org/wiki/Projection_%28linear_algebra%29)。

要将游戏板绘制到屏幕上，您需要从游戏板坐标投影到屏幕坐标。

要获取鼠标点击位置并确定点击了棋盘上的哪个位置，您需要从屏幕坐标投影到游戏棋盘坐标。

这两个投影互为倒数。

在游戏编程中执行这些投影的常用方法是使用矩阵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:44:54.263

如果我理解正确，您希望将以下输入映射到以下输出：

输入：

```
0,0   0,1   0,2   0,3   0,4   0,5
1,0   1,1   1,2   1,3   1,4   1,5
2,0   2,1   2,2   2,3   2,4   2,5
3,0   3,1   3,2   3,3   3,4   3,5
4,0   4,1   4,2   4,3   4,4   4,5
5,0   5,1   5,2   5,3   5,4   5,5 
```

输出：

```
0,6   0,5   1,4   1,3   2,2   2,1
0,7   1,6   1,5   2,4   2,3   3,2
1,8   1,7   2,6   2,5   3,4   3,3
1,9   2,8   2,7   3,6   3,5   4,4
2,10  2,9   3,8   3,7   4,6   4,5
2,10  3,10  3,9   4,8   4,7   5,6 
```

我的矩阵很生锈。我敢肯定会有一种整洁的方式来使用它们来做到这一点，但我会给你我的老套答案。

假设这不是一个更普遍问题的实例，您可以执行以下操作：

```
function mapCoords(xIn,yIn){
    return {
        x:Math.floor((xIn+yIn)/2),
        y:6+xIn-yIn
    }
} 
```

将进行概括，以及更优雅的方法，但据我了解，这可以解决您的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T18:55:16.313

//笛卡尔到等距：

isoX = cartX - cartY

isoY = (cartX + cartY) / 2

//等距到笛卡尔：

购物车 = (2 * isoY + isoX) / 2

购物车 = (2 * isoY - isoX) / 2

# php - 使用 CodeIgniter 删除 url 中的 index.php

> ID：13092041
> 
> 赞同：2
> 
> 时间：2012-10-26T18:02:12.923
> 
> 标签：php, apache, codeigniter

我正在开发一个基于 Ubuntu & Apache2 & CodeIgniter 的应用程序

我有一个`Site`这样命名的控制器

```
class Site extends CI_Controller {
    public function view($page = 'home')
    {
        $this->load->view('site/'.$page, $data);
    }
} 
```

在`application/views/site`我有`home.php`&`about.php`

`localhost/index.php/about`效果很好
，但`localhost/about`得到
`Not Found,The requested URL /about was not found on this server.`

我已经

1.  确保`mod_rewrite`打开并`AllowOverride All`在 apache2 配置文件中。
2.  `$config['index_page'] = '';`在`application/config/config.php`

我也设置了路线

```
$route['default_controller'] = "site/view";  
$route['404_override'] = '';   
$route['(:any)'] = "site/view/$1"; 
```

这是我的`.htaccess`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]  

<Files "index.php">
AcceptPathInfo On
</Files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:42:16.343

这是我正在使用的 .htaccess（在 Yii 上，但应该可以互换）：

```
RewriteEngine on
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

和你的几乎一模一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T06:13:32.193

尝试关注这个关于[codeignitor pretty urls](http://www.fahdmurtaza.com/myblog/2008/08/22/codeigniter-clean-urls-apache-mod-rewrite-removing-indexphp-from-url-in-codeigniter-application.html)的页面。你的规则看起来是正确的，但我对正则表达式很糟糕。

需要研究的一些事情是使用 phpinfo(); 检查 mod_rewrite 是否可用。该链接中的第三步还讨论了使用 a2enmod 启用 mod_rewrite。并确保重新启动 Apache。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T11:24:34.780

来自我的 codeigniter 网站。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
</IfModule> 
```

# c++ - Win32 消息泵，DispatchMessage() 是处理整个消息队列还是仅处理顶部消息？

> ID：13092043
> 
> 赞同：0
> 
> 时间：2012-10-26T18:02:20.217
> 
> 标签：c++, winapi, loops, message, message-pump

所以我一直在阅读 Win32 消息泵，我很好奇 DispatchMessage() 函数是处理整个消息队列，还是只处理队列顶部的消息？

例如，我见过这样的循环：

```
while(true) 
{

    MSG  msg;

    if (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        if (msg.message == WM_QUIT) 
        {
            break;
        } 
        else 
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    } 

    do 
    {   
    } while (clock.getTimeDeltaMilliseconds() < 1.66f); // cap at 60 fps

    // run frame code here
} 
```

在此示例中，是否会处理每条消息，或者此循环结构是否会导致每帧仅处理一条消息？

如果它一次只处理一条消息，我是否应该将 if(PeekMessage) 语句更改为 while 循环以确保处理所有消息？：

```
while(true) 
{

    MSG  msg;

    while (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        if (msg.message == WM_QUIT) 
        {
            return;
        } 
        else 
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    } 

    do 
    {   
    } while (clock.getTimeDeltaMilliseconds() < 1.66f); // cap at 60 fps

    // run frame code here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:03:56.527

它只处理最上面的消息。`MSG`是一个保存有关**一条**`GetMessage`消息的信息的结构，当您调用or时填充`PeekMessage`，前者是一个阻塞函数。然后，您将有关一条消息的信息传递给`DispatchMessage`.

如果您想在循环中执行任何其他操作之前处理整个消息队列，则应将该部分包含在循环中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:10:18.663

`DispatchMesasge`与消息队列无关，它只处理您传递给它的消息，从消息队列中删除消息的实际功能是`PeekMessage`，它只删除或查看一条消息，所以你是对的，你应该使用`while`循环来处理所有消息在队列中

# iphone - 从 UITableView 中删除部分

> ID：13092044
> 
> 赞同：0
> 
> 时间：2012-10-26T18:02:26.417
> 
> 标签：iphone, ios, uitableview

我正在编写一个 iOS 应用程序，并且我有一个以 2 个部分开头的 UITableView。我想要的是，如果有人从第一部分中删除所有行，那么整个部分将消失。我的问题是，当我删除第 0 节时，剩下的部分现在会变成第 0 节吗？还是仍将其视为第 1 节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T18:04:29.920

> 当我删除第 0 部分时，剩余部分现在是否变为第 0 部分？

是的当然。您需要在提交删除之前正确更新您的数据模型，否则 UITableView 很可能会对您抛出一些严重的 NSExceptions（个人经验）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T09:36:57.770

是的，有可能。您只需要更新数据源。更新后，您只需要重新加载 tableView。它会得到反映。

# c# - Disable event handler from a method

> ID：13092050
> 
> 赞同：0
> 
> 时间：2012-10-26T18:02:53.677
> 
> 标签：c#, winforms, datagridview, telerik-grid

In my datagridview, I have got some columns are `read only`, so i have given in some color. When I load the the DGV in advance view with all columns including read only. When the user cliks on Normal View I want to just display the normal eitable cols and hide the read only columns and the color.

I'm on telerik and using radgrid.

I tried the below approach but it's not working. Is there any better way of doing this?? Thank you.

```
private void normalToolStripMenuItem_Click(object sender, EventArgs e)//Normal View
{
    DTURradGridView.Columns[2].IsVisible = false;
    DTURradGridView.Columns[3].IsVisible = false;
    DTURradGridView.Columns[4].IsVisible = false;
    DTURradGridView.Columns[5].IsVisible = false;
    DTURradGridView.Columns[7].IsVisible = false;
    DTURradGridView.Columns[11].IsVisible = false;

    DTURradGridView.Columns[2].ReadOnly = false;
    DTURradGridView.Columns[3].ReadOnly = false;
    DTURradGridView.Columns[4].ReadOnly = false;
    DTURradGridView.Columns[5].ReadOnly = false;
    DTURradGridView.Columns[7].ReadOnly = false;
    DTURradGridView.Columns[11].ReadOnly = false;

    DTURradGridView.CellFormatting -= DTURradGridView_CellFormatting;
}

private void advancedToolStripMenuItem_Click(object sender, EventArgs e) //Advanced View
{
    DTURradGridView.Columns[2].IsVisible = true;
    DTURradGridView.Columns[3].IsVisible = true;
    DTURradGridView.Columns[4].IsVisible = true;
    DTURradGridView.Columns[5].IsVisible = true;
    DTURradGridView.Columns[7].IsVisible = true;
    DTURradGridView.Columns[11].IsVisible = true;

    DTURradGridView.Columns[2].ReadOnly = true;
    DTURradGridView.Columns[3].ReadOnly = true;
    DTURradGridView.Columns[4].ReadOnly = true;
    DTURradGridView.Columns[5].ReadOnly = true;
    DTURradGridView.Columns[7].ReadOnly = true;
    DTURradGridView.Columns[11].ReadOnly = true;

    DTURradGridView.CellFormatting += DTURradGridView_CellFormatting;   
}

private void DTURradGridView_CellFormatting(object sender, CellFormattingEventArgs e)
{
    if (e.CellElement.ColumnIndex != 2 && e.CellElement.ColumnIndex != 3 && e.CellElement.ColumnIndex != 4
    && e.CellElement.ColumnIndex != 5 && e.CellElement.ColumnIndex != 7 && e.CellElement.ColumnIndex != 11) return;

    e.CellElement.DrawFill = true;
    e.CellElement.NumberOfColors = 1;
    e.CellElement.BackColor = Color.LightSlateGray;
    e.CellElement.GradientStyle = GradientStyles.Linear;    
} 
```

When I click on the normal view, I see the colors of the col index 2,3,4,5\. So the -= is not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:10:33.473

更好的方法是在表单启动时设置只读列及其颜色，最好是按名称。请参阅[如何更改 datagridview 中列的颜色？](https://stackoverflow.com/questions/7491700/how-to-change-color-of-a-column-in-datagridview)

然后遍历列并隐藏或显示那些只读的，具体取决于您所处的模式。像这样硬编码不是一个好习惯：

```
DTURradGridView.Columns[2].ReadOnly = true;
DTURradGridView.Columns[3].ReadOnly = true;
DTURradGridView.Columns[4].ReadOnly = true; 
```

谁知道2、3、4是什么？没有人。问题是您很容易迷失在自己的代码中。

# java - （作业）对话框窗口的问题，以及关闭对话框时执行的操作

> ID：13092056
> 
> 赞同：0
> 
> 时间：2012-10-26T18:03:20.817
> 
> 标签：java

我正在做一个家庭作业，它有四个文本字段和一个文本区域，以及一个将文本字段和文本区域保存到文本文件的按钮，每行一个元素。然后，一个对话框应该通知用户文件已保存。然后，当对话框关闭时，它应该清空文本字段和文本区域。但是，我在程序中遇到了一些问题。

关于对话框窗口，当我尝试编译时，程序显示以下错误：

```
emailProg.java:81: error: no suitable method found for showMessageDialog(emailProg.sendAction, String)

JOptionPane.showMessageDialog(this, "Saved");
           ^ 
```

其次，我不确定在关闭对话框后如何清空文本字段和文本区域。我知道可以通过使用以下代码来清空文本字段：

```
[textfield].setText(""); 
```

但我不确定如何在关闭对话框后执行此操作。

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;

public class emailProg extends JFrame {
    private JPanel panNorth;
    private JPanel panCenter;
    private JPanel panSouth;

    private JLabel toLabel;
    private JLabel ccLabel;
    private JLabel bccLabel;
    private JLabel subLabel;
    private JLabel msgLabel;

    private JTextField toField;
    private JTextField ccField;
    private JTextField bccField;
    private JTextField subField;
    private JTextArea msgArea;

    private JButton send;

//The Constructor
public emailProg() {
    setTitle("Compose Email");
    setLayout(new BorderLayout());

    panNorth = new JPanel();
    panNorth.setLayout(new GridLayout(4, 2));
    JLabel toLabel = new JLabel("To:");
    panNorth.add(toLabel);
    JTextField toField = new JTextField(15);
    panNorth.add(toField);
    JLabel ccLabel = new JLabel("CC:");
    panNorth.add(ccLabel);
    JTextField ccField = new JTextField(15);
    panNorth.add(ccField);
    JLabel bccLabel = new JLabel("Bcc:");
    panNorth.add(bccLabel);
    JTextField bccField = new JTextField(15);
    panNorth.add(bccField);
    JLabel subLabel = new JLabel("Subject:");
    panNorth.add(subLabel);
    JTextField subField = new JTextField(15);
    panNorth.add(subField);
    add(panNorth, BorderLayout.NORTH);

    panCenter = new JPanel();
    panCenter.setLayout(new GridLayout(2, 1));
    JLabel msgLabel = new JLabel("Message:");
    panCenter.add(msgLabel);
    JTextArea msgArea = new JTextArea(5, 15);
    panCenter.add(msgArea);
    add(panCenter, BorderLayout.CENTER);

    panSouth = new JPanel();
    panSouth.setLayout(new FlowLayout());
    JButton send = new JButton("Send");
    panSouth.add(send);
    add(panSouth, BorderLayout.SOUTH);

    send.addActionListener (new sendAction());
}

private class sendAction implements ActionListener {
    public void actionPerformed (ActionEvent event) {
        try {
            PrintWriter outfile = new PrintWriter("email.txt");
            outfile.print("To: ");
            outfile.println(toField.getText());
            outfile.print("CC: ");
            outfile.println(ccField.getText());
            outfile.print("Bcc: ");
            outfile.println(bccField.getText());
            outfile.print("Subject: ");
            outfile.println(subField.getText());
            outfile.print("Message: ");
            outfile.println(msgArea.getText());

            JOptionPane.showMessageDialog(this, "Saved");
        }
        catch(FileNotFoundException e) {
        System.out.println("File not found.");
        }
    }
}

public static void main(String[] args) {
    emailProg win = new emailProg();
    win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    win.pack();
    win.setVisible(true);
} 
```

}

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:09:56.993

`JOptionPane.showMessageDialog(...)`期望一个组件作为它的第一个参数。在您的情况下，您是从扩展 ActionListener 的类中调用它，因此*这*并不指代组件。您可以考虑为此参数传递一个空值。像这样的东西：

```
JOptionPane.showMessageDialog(null, "Saved"); 
```

另外作为旁注，考虑阅读[Java Naming Convention](http://www.cwu.edu/~gellenbe/javastyle/naming.html)。类名最好以大写字母开头。

**编辑：**如果您仔细查看代码，在构造函数中，您将创建与全局变量同名的局部变量并将它们添加到面板中。例如，您有一个 global `private JTextField toField;`，但是在您的构造函数中，您正在执行以下操作：

```
JTextField toField = new JTextField(15);
panNorth.add(toField); 
```

所以你的全局变量仍然是空的。当您尝试`actionPerformed()`使用此变量在代码中执行任何操作时，您将遇到 NullPointerException。

这是更新的代码供您参考。请注意，我进行了某些更改，尤其是对类名并添加`SwingUtilities.invokeLater(....)`以执行您的代码。要知道为什么这是必要的，请阅读[“事件调度线程”](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)和[“Swing 中的并发”](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileNotFoundException;
import java.io.PrintWriter;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class EmailProg extends JFrame {
    private JPanel panNorth;
    private JPanel panCenter;
    private JPanel panSouth;

    private JLabel toLabel;
    private JLabel ccLabel;
    private JLabel bccLabel;
    private JLabel subLabel;
    private JLabel msgLabel;

    private JTextField toField;
    private JTextField ccField;
    private JTextField bccField;
    private JTextField subField;
    private JTextArea msgArea;

    private JButton send;

    // The Constructor
    public EmailProg() {
        setTitle("Compose Email");
        setLayout(new BorderLayout());

        panNorth = new JPanel();
        panNorth.setLayout(new GridLayout(4, 2));
        toLabel = new JLabel("To:");
        panNorth.add(toLabel);
        toField = new JTextField(15);
        panNorth.add(toField);
        ccLabel = new JLabel("CC:");
        panNorth.add(ccLabel);
        ccField = new JTextField(15);
        panNorth.add(ccField);
        bccLabel = new JLabel("Bcc:");
        panNorth.add(bccLabel);
        bccField = new JTextField(15);
        panNorth.add(bccField);
        subLabel = new JLabel("Subject:");
        panNorth.add(subLabel);
        subField = new JTextField(15);
        panNorth.add(subField);
        add(panNorth, BorderLayout.NORTH);

        panCenter = new JPanel();
        panCenter.setLayout(new GridLayout(2, 1));
        msgLabel = new JLabel("Message:");
        panCenter.add(msgLabel);
        msgArea = new JTextArea(5, 15);
        panCenter.add(msgArea);
        add(panCenter, BorderLayout.CENTER);

        panSouth = new JPanel();
        panSouth.setLayout(new FlowLayout());
        send = new JButton("Send");
        panSouth.add(send);
        add(panSouth, BorderLayout.SOUTH);

        send.addActionListener(new SendAction());
    }

    private class SendAction implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            try {
                PrintWriter outfile = new PrintWriter("email.txt");
                outfile.print("To: ");
                outfile.println(toField.getText());
                outfile.print("CC: ");
                outfile.println(ccField.getText());
                outfile.print("Bcc: ");
                outfile.println(bccField.getText());
                outfile.print("Subject: ");
                outfile.println(subField.getText());
                outfile.print("Message: ");
                outfile.println(msgArea.getText());

                JOptionPane.showMessageDialog(null, "Saved");
            } catch (FileNotFoundException e) {
                System.out.println("File not found.");
            }
        }
    }

    public static void main(String[] args) {

        //Make sure that all your operations happens through the EDT
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                EmailProg win = new EmailProg();
                win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                win.pack();
                win.setVisible(true);

            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:08:53.643

`this`指的是非组件，因此它不能用作对话框的父级。

# bash - Why doesn't my bash script allow me to enter the python shell?

> ID：13092057
> 
> 赞同：1
> 
> 时间：2012-10-26T18:03:25.753
> 
> 标签：bash

I wrote a super simple bash script to get me into a python shell with everything set up like I need but it never actually enters the python shell. What am I doing wrong?

```
sudo su runnerdude
. /home/runnerdude/foo/env/bin/activate
cd /home/runnerdude/foo/bar
python manage.py shell 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:18:26.593

我认为问题在于 sudo 的工作方式。假设您的脚本名为 run_python.sh：

```
. /home/runnerdude/foo/env/bin/activate
cd /home/runnerdude/foo/bar
python manage.py shell 
```

然后你可以调用它：

```
sudo -u runnerdude run_python.sh 
```

或者，如果您坚持，您的脚本可能如下所示：

```
sudo -u runnerdude '. /home/runnerdude/foo/env/bin/activate; \
    cd /home/runnerdude/foo/bar; \
    python manage.py shell' 
```

注意将命令连接在一起的单引号和反斜杠。要运行您的脚本：

```
run_python.sh 
```

# eclipse - Eclipse Galileo Repository Installation error

> ID：13092061
> 
> 赞同：1
> 
> 时间：2012-10-26T18:03:38.203
> 
> 标签：eclipse, eclipse-plugin

I tried install new software on eclipse from "Web, XML, and Java EE Development" with this path

```
http://download.eclipse.org/releases/galileo 
```

I take this error while my proccess

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Eclipse Web Developer Tools 3.1.1.v200908120400-7R77FStEVw2z07WtDz-OZrhL5C-3 (org.eclipse.wst.web_ui.feature.feature.group 3.1.1.v200908120400-7R77FStEVw2z07WtDz-OZrhL5C-3)
  Software currently installed: Eclipse Platform 3.7.0.I20110613-1736 (org.eclipse.platform.ide 3.7.0.I20110613-1736)
  Only one of the following can be installed at once: 
    Equinox Provisioning Core 2.0.3.R36x_v20110111 (org.eclipse.equinox.p2.core 2.0.3.R36x_v20110111)
    Equinox Provisioning Core 2.0.2.R36x_v20100804 (org.eclipse.equinox.p2.core 2.0.2.R36x_v20100804)

    Equinox Provisioning Core 2.1.1.dist (org.eclipse.equinox.p2.core 2.1.1.dist)
    Equinox Provisioning Core 1.0.100.v20090520-1905 (org.eclipse.equinox.p2.core 1.0.100.v20090520-1905)
    Equinox Provisioning Core 2.0.0.v20100510 (org.eclipse.equinox.p2.core 2.0.0.v20100510)
  Cannot satisfy dependency:
    From: Equinox p2 Core Function 1.0.1.dist-8291FXcFLhV8CJ871602A41 (org.eclipse.equinox.p2.core.feature.feature.group 1.0.1.dist-8291FXcFLhV8CJ871602A41)
    To: org.eclipse.equinox.p2.core [2.1.1.dist]
  Cannot satisfy dependency:
    From: Equinox p2 Provisioning for IDEs. 2.1.2.dist-6-Bk8lt6MLqLsEf6-RFpFIpRdhQG (org.eclipse.equinox.p2.user.ui.feature.group 2.1.2.dist-6-Bk8lt6MLqLsEf6-RFpFIpRdhQG)
    To: org.eclipse.equinox.p2.core.feature.feature.group [1.0.1.dist-8291FXcFLhV8CJ871602A41]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.7.0.I20110613-1736 (org.eclipse.platform.ide 3.7.0.I20110613-1736)
    To: org.eclipse.equinox.p2.user.ui.feature.group [2.1.2.dist-6-Bk8lt6MLqLsEf6-RFpFIpRdhQG]
  Cannot satisfy dependency:
    From: org.eclipse.wst.server.discovery 1.0.1.v20100210
    To: bundle org.eclipse.equinox.p2.core [1.0.100,2.0.0)
  Cannot satisfy dependency:
    From: WST Server UI 3.1.1.v20090727b-7B3DPAtJZRZxULQRALIM4256 (org.eclipse.wst.server_ui.feature.feature.group 3.1.1.v20090727b-7B3DPAtJZRZxULQRALIM4256)
    To: org.eclipse.wst.server.discovery [1.0.1.v20100210]
  Cannot satisfy dependency:
    From: Eclipse Web Developer Tools 3.1.1.v200908120400-7R77FStEVw2z07WtDz-OZrhL5C-3 (org.eclipse.wst.web_ui.feature.feature.group 3.1.1.v200908120400-7R77FStEVw2z07WtDz-OZrhL5C-3)
    To: org.eclipse.wst.server_ui.feature.feature.group [3.1.1.v20090727b-7B3DPAtJZRZxULQRALIM4256]    Equinox Provisioning Core 1.0.101.R35x_v20090819 (org.eclipse.equinox.p2.core 1.0.101.R35x_v20090819) 
```

What can I do for this situation ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T11:30:16.910

根据您正在使用 Eclipse Indigo 并尝试从以前版本的 Eclipse Galileo 安装软件的错误。eclipse 的发行版因核心插件（也称为捆绑包）而异。“Web、XML 和 Java EE 开发”软件的安装需要您没有的 Galileo 核心捆绑包。因此 Eclipse 会尝试为您下载并安装它们。问题是现在您有两个不同版本的核心插件和Eclipse不知道链接对不对，解决办法是用Eclipse的Indigo版本链接：

[http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)

# android - 如何判断ListView的滚动方向

> ID：13092062
> 
> 赞同：4
> 
> 时间：2012-10-26T18:03:45.763
> 
> 标签：android, android-layout

我花了一整天的时间来弄清楚滚动的方向，`ListView`但找不到任何解决方案。我想要实现的是 ListView 的可移动标题，例如“Google Now”搜索，它在向下滚动时上升，并在您向上滚动时立即返回。

到目前为止我已经尝试过的：

实现了自定义 ListView 覆盖`onScrollChanged`，但它始终为所有属性提供 0。

谁能让我走上正轨。

![在此处输入图像描述](../Images/c5af9981092510f1f38b22ec620bc8bf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:30:22.253

这称为`Quick Return`模式。Roman Nurik 写了一篇博文，解释了它的工作原理，并提供了示例代码来自己实现它。你可以在这里找到：https: [//plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt](https://plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:55:34.113

像这样的东西应该工作。您只需要缓存旧位置和偏移量并使用它来检查方向。您可能还想过滤 scrollState ：

```
listView.setOnScrollListener(new OnScrollListener() {
    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        int position = listView.getFirstVisiblePosition();
        View v = listView.getChildAt(0);
        int offset = (v == null) ? 0 : v.getTop();

        if (mPosition < position || (mPosition == position && mOffset < offset) {
             // Scrolled up
        } else {
             // Scrolled down
        }
        mPosition = position;
        mOffset = offset;
    }
}); 
```

# python - Neo4django Relationship properties

> ID：13092066
> 
> 赞同：5
> 
> 时间：2012-10-26T18:04:02.617
> 
> 标签：python, django, neo4j, neo4django

So I've trying to model a small user-group relationship in Neo4j with Django. I am currently employing the Neo4django python package seen [here](https://github.com/scholrly/neo4django). Now, I have nodes representing my users, and nodes representing my groups, and relationships that link them indicating membership. What I'm hoping to also do in the near future is add properties to this relationship such as date_joined. I looked around but there isn't too much documentation on how to achieve this. I'm sure there is a way of doing it, just haven't seen any examples around.

Below is the declaration for my model.py if necessary, I think it's pretty straight forward.

```
class User(models.NodeModel):
    friends = models.Relationship('User', rel_type=Outgoing.FRIEND, related_single=False, related_name='friends')
    groups = models.Relationship('Group', rel_type=Outgoing.USER_GROUPS, related_single=False, related_name='groups')
    user_name = models.StringProperty(max_length=30, indexed=True)
    password = models.StringProperty(max_length=128)

class Group(models.NodeModel):
    users = models.Relationship('User', rel_type=Outgoing.MEMBER, related_single=False, related_name='members')
    group_type = models.Relationship('GroupType', rel_type=Outgoing.GROUP_TYPE, related_single=True, related_name='group_type')
    group_name = models.StringProperty(max_length=128, indexed=True)
    date_creation = models.DateProperty() 
```

Thanks for any pointers!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T19:05:37.780

According to the people maintaining Neo4django, there is work in progress to allow user to inherit from neo4django.db.model.Relationship in order to add properties similar to Models. This has yet to be implemented. The workaround in the meantime is to use a node in between two nodes to store properties about the relationship.

# authentication - iOS6 authenticateHandler is never called

> ID：13092069
> 
> 赞同：2
> 
> 时间：2012-10-26T18:04:26.970
> 
> 标签：authentication, gamekit

I have the following code to authenticate local user in GameKit. There are no diagnostics and no crash but the handler is never used and the local user is never authenticated. Can some one say why? This way of authenticating is following the Wenderlich blog on Cocos2d. The ANNOUNCE and CCLOG lines are mine for debugging and they show that the method is called but the handler is not called. The redundant-looking BOOLs are also from debugging. I'm testing on an iOS6 iPhone. This code is in the AppDelegate.

```
-(void) authenticateLocalPlayer {
    ANNOUNCE
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error) {
        [self setLastError:error];
        if ( [CCDirector sharedDirector].isPaused ) [[CCDirector sharedDirector] resume];
        CCLOG(@"inside authenticateHandler");
        if (localPlayer.authenticated) {
            _gameCenterFeaturesEnabled = YES;
            X.localPlayerAuthenticated = YES;
        } else if (viewController) {
            [[CCDirector sharedDirector] pause];
            [self presentViewController:viewController];
        } else {
            _gameCenterFeaturesEnabled = NO;
            X.localPlayerAuthenticated = NO;
        }
    };
    CCLOG(@"lastError: %@", self.lastError);
    CCLOG(@"localPlayer.authenticated: %d", localPlayer.authenticated);
} 
```

# elasticsearch - Elasticsearch custom scoring script -- check if field exists?

> ID：13092073
> 
> 赞同：4
> 
> 时间：2012-10-26T18:04:50.413
> 
> 标签：elasticsearch

I'd like check if a field exists in my custom scoring script when searching in elasticsearch.

This search works:

```
{
  "query": {
    "custom_score": {
      "script": "((doc['region'].value == '1') ? 1 : 0)",
      "query": {
        "constant_score": {
          "filter": {
            "and": [
              {
                "term": {
                  "id": "100"
                }
              }
            ]
          }
        }
      }
    }
  },
  "size": 1
} 
```

It will score the result as 1 if the region field value is 1.

However this query will not work: it will not score the document as 1 if the region field does not exist in the document:

```
{
  "query": {
    "custom_score": {
      "script": "((doc['region'].value == null) ? 1 : 0)",
      "query": {
        "constant_score": {
          "filter": {
            "and": [
              {
                "term": {
                  "id": "100"
                }
              }
            ]
          }
        }
      }
    }
  },
  "size": 1
} 
```

How do I check for missing values in a script?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-26T20:37:06.460

如果此字段具有数字类型，其中包括索引为 long 的日期，则缺失值由 0 表示。

# java - SWT - Changing the printer's paper size programmatically

> ID：13092074
> 
> 赞同：4
> 
> 时间：2012-10-26T18:04:55.153
> 
> 标签：java, printing, swt

I've a application that does some batch printing with the *SWT API*. For that printing, I've to set programmatically all attributes of the printing configuration. Currently I'm able to set all attributes avaliable at `PrinterData` class.

The problem is that this class doesn't support setting page size and in various cases I'll have to set it to ISO A5 or A3 format, for example.

My question is: Has anybody found himself in this situation? How to solve it? Is it possible to edit `PrinterData.otherData` to define this property programmatically or only through a PrinterDialog?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:24:51.907

这是我发现的：

1.  `PrinterData`当前无法设置纸张尺寸。[这](https://bugs.eclipse.org/bugs/show_bug.cgi?id=73290)是一个错误报告。
2.  有一个叫做 [swt-printdialog-extension](http://code.google.com/p/swt-printdialog-extension/)的东西，据说它可以让你用 windows 32bit 设置大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:39:50.500

到处走走，使用后`PrintDialog.open()`您可以获取它返回的PrinterData，其中`PrinterData.otherData`有页面大小。我使用此解决方法让 PaperClips 打印预览按我选择的页面大小显示打印预览

# c# - 覆盖 XDocument.Load 请求标头

> ID：13092079
> 
> 赞同：1
> 
> 时间：2012-10-26T18:05:18.403
> 
> 标签：c#, asp.net, linq-to-xml

我目前正在使用 Google 的 Finance API 来提取股票信息。（是的，我知道它已被弃用，可能很快就会停产）。

当我加载 XML 时：

```
XDocument doc = XDocument.Load("http://www.google.com/ig/api?stock=ticker"); 
```

我返回一个 503（可能是由于给定时间段内的许多请求。

无论如何我可以覆盖发送到或多或少地模仿来自chrome的用户代理标头的请求标头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:34:59.057

> 无论如何我可以覆盖发送到或多或少地模仿来自chrome的用户代理标头的请求标头？

在这种情况下，最简单的方法可能是不使用采用 URL 的重载。相反，创建一个`WebRequest`包含所有标头和您想要的任何其他自定义项、获取响应并将响应流传递给[`XDocument.Load(Stream)`](http://msdn.microsoft.com/en-us/library/cc838349.aspx).

# silverlight - 具有多个内容演示者的 silverlight 4 模板化控件

> ID：13092082
> 
> 赞同：2
> 
> 时间：2012-10-26T18:05:24.937
> 
> 标签：silverlight

我试图创建一个具有页眉、正文和页脚内容演示者的模板化控件。

所以我创建了一个名为 BaseDockedSectionControl 的类：

```
public class BaseDockedSectionControl:Control
{
    public BaseDockedSectionControl()
    {
        DefaultStyleKey = typeof(BaseDockedSectionControl);
    }

    public Grid Header
    {
        get { return (Grid)GetValue(HeaderProperty); }
        set { SetValue(HeaderProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Header.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty HeaderProperty =
        DependencyProperty.Register("Header", typeof(Grid), typeof(BaseDockedSectionControl), new PropertyMetadata(null));        

    public Grid Body
    {
        get { return (Grid)GetValue(BodyProperty); }
        set { SetValue(BodyProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Body.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BodyProperty =
        DependencyProperty.Register("Body", typeof(Grid), typeof(BaseDockedSectionControl), new PropertyMetadata(null));

    public Grid Footer
    {
        get { return (Grid)GetValue(FooterProperty); }
        set { SetValue(FooterProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Footer.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty FooterProperty =
        DependencyProperty.Register("Footer", typeof(Grid), typeof(BaseDockedSectionControl), new PropertyMetadata(null));

          } 
```

在 App.XAML 中，我向 Application.Resources 添加了一个样式：

```
<Style TargetType="local:BaseDockedSectionControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="local:BaseDockedSectionControl">
                        <Grid x:Name="RootElement">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="50"/>
                                <RowDefinition />
                                <RowDefinition Height="30"/>
                            </Grid.RowDefinitions>

                            <ContentPresenter Content="{TemplateBinding Header}"/>
                            <ContentPresenter Content="{TemplateBinding Body}"    Grid.Row="1"/>
                            <ContentPresenter Content="{TemplateBinding Footer}"  Grid.Row="2"/>                            
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

然后我创建一个名为 Test.xaml 的用户控件，并输入以下 xaml：

```
<UserControl x:Class="SilverlightIdeas.Test"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:SilverlightIdeas"
             xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <local:BaseDockedSectionControl>            
            <local:BaseDockedSectionControl.Header>
                <TextBlock Text="This is the header" />
            </local:BaseDockedSectionControl.Header>
        </local:BaseDockedSectionControl>

    </Grid>
</UserControl> 
```

当我输入 TextBlock 时，intellisense 无法识别它，当我输入它时，我收到消息“Property Header 不支持‘TextBlock’类型的值

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:06:49.357

有两件事解决了这个问题。

1.  我制作了类型对象的每个依赖属性

2.  事实证明，问题在于 ContentPresenter 似乎需要一个结束标记，而不是自结束标记：

变成

```
<ContentPresenter Content="{TemplateBinding Header}"></ContentPresenter> 
```

一旦我这样做了，事情就开始正常工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:24:05.940

您已将您的`Header`属性定义`BaseDockedSectionControl`为 type `Grid`。`TextBlock`不是一个`Grid`。`Header`将属性的类型更改为`Control`。

# asp.net - Internet Explorer 8 和 9 使用 display:table-cell 样式向 div 添加偏移量或边距

> ID：13092090
> 
> 赞同：1
> 
> 时间：2012-10-26T18:05:50.057
> 
> 标签：asp.net, css, internet-explorer

我对 IE 有一个独特且极其蹩脚的问题，`display:table-cell.`我想在 div 中将图像居中的样式，我发现最简单快捷的方法是使用 table 或 display:table-cell;。它适用于所有主流浏览器，但问题是 IE 8 和 9 会用这种风格抵消 div。

![IE 示例](../Images/6b999723b76f753b9cabf3aaa2b9b455.png)

蓝色轮廓显示了具有以下 CSS 的 div 的边界

```
 .user-photo div { height:200px; width:200px; display:table-cell; text-align:center; vertical-align:middle;} 
```

包含 div 的父级具有此 CSS

```
.user-photo { height:200px; width:200px; border:2px solid black; } 
```

据我所知，这可能是我在常规 HTML 中使用 ASP.NET 标记这一事实的问题。我仅使用 html 对此进行了测试，并且子 div 保持在其边界内。

这是上图中显示的 .ascx 控件的代码。

```
<div id="picture-edit-div" class="p20">
    <asp:Label ID="lblErrorMsg" runat="server" Text="" Visible="False" />

    <div class="left user-photo">
        <asp:PlaceHolder runat="server" ID="plcImage" Visible="True">
            <div id="<%= plcImageID %>" ><cms:UserPicture ID="picUser" runat="server" Visible="true" /></div>
        </asp:PlaceHolder>
        <asp:PlaceHolder runat="server" ID="plcImageActions" Visible="false">
            <div id="<%= placeholderID %>"  class="f12">PROFILE PHOTO</div>
        </asp:PlaceHolder>
    </div>

    <div class="right user-edit-photo">
        <span class="container-upload"><cms:CMSFileUpload runat="server" CssClass="UploaderInputFile" ID="uplFilePicture" size="14" /></span>
        <asp:Button ID="btnClearUpload" runat="server" Text="CLEAR" UseSubmitBehavior="False" CssClass="right" />
        <p class="mt16 f12">Uploaded files must be under 5MB and one of the following file formats: jpeg, png, bmp.</p>
        <p class="mt10 mb20 f12">Image will fit to 200x200 pixels</p>

        <asp:Button ID="btnSave" runat="server" Text="SAVE" OnClick="btnSave_Click" />
        <asp:Button ID="btnDelete" runat="server" Text="DELETE PHOTO" UseSubmitBehavior="False" CssClass="ml10" />
    </div>

    <asp:HiddenField runat="Server" ID="hiddenAvatarGuid" />
    <asp:HiddenField runat="Server" ID="hiddenDeleteAvatar" />

</div> 
```

这就是控件在 Firefox 中的呈现方式，在其他浏览器中也是如此。 ![FF 示例](../Images/008c8272664e7f0df11e9a8bd558900e.png)

我认为这是 IE 中偏移的错误，但我不能确定。对此问题的任何帮助将不胜感激。

编辑：查看开发人员工具中的 HTML>layout 选项卡以获取我的仅 HTML 解决方案，我发现问题反映在 offset 属性中。Firefox 在其开发人员工具中没有此属性，因此我认为我的 ASP.NET 标记与该属性有关。

EDIT-2：我到达这里，但可能是 IE 8/9 显示具有默认单元格填充和/或单元格间距的表格单元格，这是只能在标记中设置的表格属性。

EDIT-3：为 .ascx 控件呈现 html

```
 <td class="user-mid">

<!--
<script type="text/javascript">
    //<![CDATA[
function UpdateForm(){ ; } 

//]]>
</script>-->

<div id="picture-edit-div" class="p20">

    <div class="left user-photo" >

            <div id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_plcImage"><img alt="Avatar" src="/CMSModules/Avatars/CMSPages/GetAvatar.aspx?avatarguid=909868d6-120a-4e47-bca8-c4ea13b514a0&amp;maxsidesize=0" /></div>

    </div>
    <div class="right user-edit-photo">
        <span class="container-upload"><input type="file" name="ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$uplFilePicture" id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_uplFilePicture" class="UploaderInputFile" size="14" /><label for="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_uplFilePicture" id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_lblUpload_uplFilePicture" style="display:none;">Upload file</label></span>
        <input type="button" name="ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$btnClearUpload" value="CLEAR" onclick="javascript:__doPostBack(&#39;ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$btnClearUpload&#39;,&#39;&#39;)" id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_btnClearUpload" class="right" />
        <p class="mt16 f12">Uploaded files must be under 5MB and one of the following file formats: jpeg, png, bmp.</p>
        <p class="mt10 mb20 f12">Image will fit to 200x200 pixels</p>

        <input type="submit" name="ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$btnSave" value="SAVE" id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_btnSave" />
        <input type="button" name="ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$btnDelete" value="DELETE PHOTO" onclick="return deleteAvatar(&#39;ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_hiddenDeleteAvatar&#39;, &#39;ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_hiddenAvatarGuid&#39;, &#39;ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_plcImage&#39; );__doPostBack(&#39;ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$btnDelete&#39;,&#39;&#39;)" id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_btnDelete" title="Delete" class="ml10" />
    </div>
    <input type="hidden" name="ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$hiddenAvatarGuid" id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_hiddenAvatarGuid" />
    <input type="hidden" name="ctl00$plcMain$plcZone$lt$zoneCenter$UserSettings$UserPhoto$hiddenDeleteAvatar" id="ctl00_plcMain_plcZone_lt_zoneCenter_UserSettings_UserPhoto_hiddenDeleteAvatar" />
</div>

        </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:01:38.293

我在第二次编辑中的理论是正确的。我用没有单元格间距和没有单元格填充的表格替换了 div 和 display:table-cell。它完美呈现。为了证实这个理论，我取出了 0 cellpadding 和 0 cellspacing 的属性并再次渲染了表格。在 IE 和 firefox 中，表格被默认的 cellpadding 和 cellspacing 偏移。

IE 8/9 渲染显示：table-cell，默认表格属性为 cellspacing="2px"。由于这些是标记属性，因此无法使用 CSS 进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T08:10:25.810

您可以尝试将以下样式元素添加到包含的 div (.user-photo)：

```
display: table-row;
border-spacing: 0;
border-collapse: collapse; 
```

这应该与元素的`cell-spacing`属性具有相同的效果。`table`

我遇到了类似的问题并在这里找到了灵感：[Set cellpadding and cellspacing in CSS?](https://stackoverflow.com/questions/339923/how-to-set-cellpadding-and-cellspacing-in-css)

# programming-languages - 基于列表的树的统一算法

> ID：13092092
> 
> 赞同：4
> 
> 时间：2012-10-26T18:06:00.223
> 
> 标签：programming-languages, pattern-matching, logic-programming, unification

我需要一个统一算法来处理以下情况。

我的表达式树中的每个节点都有一个列表（关联）或一组（关联和交换）子级。我想获得与特定模式的所有可能匹配。

这是一个例子。假设我们正在处理矩阵，因此 + 是可交换的， * 是不可交换的

表达：`A + B*C*D + E`

或者：`Add(A, Mul(B, C, D), E)`

图案：`X + Y*Z`

我看到两场比赛

```
X: A + E
Y: B
Z: C * D

X: A + E
Y: B * C
Z: D 
```

问题：是否有任何标准算法可以处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:27:24.037

当我看到这一点时，我想到的只是用于匹配交换项的分区和子集。如果要将 n 项与 m > n 项匹配，则必须将 m 划分为 n 个部分，p。

然后你想要长度为 p_i 的子集，然后可以针对你的原始模式进行测试。找到最严格的术语并首先匹配它可能是有意义的。例如，如果 mul 将匹配，您可以查看是否存在 muls...如果是，那么您的初始问题已分为两部分：mul 部分和其余部分。最严格的术语是具有最高操作数的术语。所以 X + X*Y*Z + X*(Y+Z) 这两个 mul 项并列；领带可能会被打破，以支持添加更复杂的那个。所以也许 op_count 和操作类型的数量可能是复杂性的衡量标准。

在 SymPy 中：

```
>>> pat = X + X*Y*Z + X*(Y+Z)
>>> [(p.count_ops(), p.count_ops(visual=True).free_symbols) for p in Add.make_args(pat)]
[(0, set([])), (2, set([MUL])), (2, set([ADD, MUL]))] 
```

至于制定映射，让二进制数字为您选择项目是可行的。在 SymPy`from sympy.utilities.iterables import reshape, runs, permutations`中再次生效：

```
>>> N=list('ABC')
>>> M=list('abcde')
>>> n=[1]*len(N)
>>> m=[1]*len(M)
>>> n.extend([0]*(len(m) - len(n)))
>>> grouper = lambda x, xx: x==xx==0 or x==0 and xx==1
>>> demo = [1, 0, 0, 1, 1]
>>> runs(demo, grouper)
[[1, 0, 0], [1], [1]]
>>> nn=n[1:] # the first one will stay put; shuffle the rest
>>> for p in permutations(nn):
...   P = [1]+list(p)
...   shape = [[len(r)] for r in runs(P, grouper)]
...   print dict(zip(N, reshape(M, shape)[0])) 
{'A': ['a'], 'C': ['c', 'd', 'e'], 'B': ['b']}
{'A': ['a'], 'C': ['c', 'd', 'e'], 'B': ['b']}
{'A': ['a'], 'C': ['d', 'e'], 'B': ['b', 'c']}
{'A': ['a'], 'C': ['e'], 'B': ['b', 'c', 'd']}
{'A': ['a'], 'C': ['d', 'e'], 'B': ['b', 'c']}
{'A': ['a'], 'C': ['e'], 'B': ['b', 'c', 'd']}
{'A': ['a'], 'C': ['c', 'd', 'e'], 'B': ['b']}
{'A': ['a'], 'C': ['c', 'd', 'e'], 'B': ['b']}
{'A': ['a'], 'C': ['d', 'e'], 'B': ['b', 'c']}
{'A': ['a'], 'C': ['e'], 'B': ['b', 'c', 'd']}
{'A': ['a'], 'C': ['d', 'e'], 'B': ['b', 'c']}
{'A': ['a'], 'C': ['e'], 'B': ['b', 'c', 'd']}
{'A': ['a', 'b'], 'C': ['d', 'e'], 'B': ['c']}
{'A': ['a', 'b'], 'C': ['e'], 'B': ['c', 'd']}
{'A': ['a', 'b'], 'C': ['d', 'e'], 'B': ['c']}
{'A': ['a', 'b'], 'C': ['e'], 'B': ['c', 'd']}
{'A': ['a', 'b', 'c'], 'C': ['e'], 'B': ['d']}
{'A': ['a', 'b', 'c'], 'C': ['e'], 'B': ['d']}
{'A': ['a', 'b'], 'C': ['d', 'e'], 'B': ['c']}
{'A': ['a', 'b'], 'C': ['e'], 'B': ['c', 'd']}
{'A': ['a', 'b'], 'C': ['d', 'e'], 'B': ['c']}
{'A': ['a', 'b'], 'C': ['e'], 'B': ['c', 'd']}
{'A': ['a', 'b', 'c'], 'C': ['e'], 'B': ['d']}
{'A': ['a', 'b', 'c'], 'C': ['e'], 'B': ['d']} 
```

克里斯

# c++ - 不确定在哪里定义和声明我的结构。（获取未声明的标识符）

> ID：13092094
> 
> 赞同：0
> 
> 时间：2012-10-26T18:06:04.440
> 
> 标签：c++

我认为这是一个范围问题。我所有传递指针或实际结构（GLface 或 GLpoint）的尝试都给了我未声明的标识符错误。

然而，这两个结构都在 .h 文件中明确定义。

正常计算器.h

```
#pragma once
#include <vector>
#include <GL/glut.h>

class NormalCalculator
{

struct GLpoint
{
    GLfloat x,y,z;
};

struct GLface
{
    GLfloat x1,y1,z1,x2,y2,z2,x3,y3,z3;
};

public:
    NormalCalculator::NormalCalculator(void);
    NormalCalculator::~NormalCalculator(void);
    //put all of the face normal functions together 
    void NormalCalculator::generateFaceNormals(std::vector<GLfloat>* vertexArray, std::vector<GLubyte>* indexArray, std::vector<GLfloat>* normalArray);

private:
    //creates the line vectors from the the 3 points passed in as a part of the GLface
    void NormalCalculator::createLineVectorsFromFace(GLface facePassedIn, GLpoint* l_vec1, GLpoint* l_vec2); 
    //generates a normal vector for the 2 line vectors made by createLineVectorsFromFace
    void NormalCalculator::crossProductOfVecs(GLpoint* l_vec1, GLpoint* l_vec2, GLpoint* outPutNormal);
    //alters the normal vector so that it is of Unit length
    bool NormalCalculator::normalizeVector(GLpoint* normalVector, GLpoint* normalizedNormalVecContainer);
    GLpoint NormalCalculator::computeFaceNormal(GLface faceToNormal);
}; 
```

NormalCalculator.cpp 如下。

根据编译器，错误始于我将 GLface 传递给函数 createLineVectorsFromFace。如果有人想知道，GLface 作为对象而不是指向 GLface 的指针传递的事实是有意的。

```
#include "NormalCalculator.h"
#include <gl/glut.h>
#include <math.h>
#include <iostream>

void createLineVectorsFromFace( GLface facePassedIn, GLpoint* l_vec1, GLpoint* l_vec2)
{
    //from verts 1 & 2 initialize l_vec1
    l_vec1->x = facePassedIn.x1 - facePassedIn.x2;
    l_vec1->y = facePassedIn.y1 - facePassedIn.y2;
    l_vec1->z = facePassedIn.z1 - facePassedIn.z2;
    //do that same for l_vec2 from face 2 and 3
    l_vec2->x = facePassedIn.x2 - facePassedIn.x3;
    l_vec2->y = facePassedIn.y2 - facePassedIn.y3;
    l_vec2->z = facePassedIn.z2 - facePassedIn.z3;
}

void crossProductOfVecs(GLpoint* l_vec1, GLpoint* l_vec2, GLpoint* outPutNormal)
{
    //cross product dat hoe
    outPutNormal->x = (l_vec1->y * l_vec2->z) - (l_vec1->z * l_vec2->y);//x = aybz-byaz
    outPutNormal->y = (l_vec1->z * l_vec2->x) - (l_vec1->x - l_vec2->z);//y = azbx-bzax
    outPutNormal->z = (l_vec1->x * l_vec2->y) - (l_vec1->y - l_vec2->x);//z = axby-bxay
}

bool NormalCalculator::normalizeVector(GLpoint* normalVector, GLpoint* normalizedNormalVecContainer)
{
    //first we must work out the magnitude of the normal vector
    GLfloat mag = (sqrt((float) pow(normalVector->x,2) + pow(normalVector->y,2) + pow(normalVector->z,2)));

    if(mag)
    {
        normalizedNormalVecContainer->x = normalVector->x/mag;
        normalizedNormalVecContainer->y = normalVector->y/mag;
        normalizedNormalVecContainer->z = normalVector->z/mag;
        return true;
    }

    else return false;

}

GLpoint NormalCalculator::computeFaceNormal(GLface faceToNormal)
{
    //first we create a couple of container GLpoints for our 2 line vectors
    GLpoint a;
    GLpoint b;
    createLineVectorsFromFace(faceToNormal, &a, &b);
    //Create a container for our origional normal
    GLpoint firstNorm;
    //We have our line vectors, and a container. Now cross product them and put them in the container.
    crossProductOfVecs(&a, &b, &firstNorm);
    //create out last normal container
    GLpoint finalNorm;
    //normalize it
    normalizeVector(&firstNorm, &finalNorm);

    return finalNorm;

}

NormalCalculator::NormalCalculator(void)
{
}

NormalCalculator::~NormalCalculator(void)
{
} 
```

这只是一个疯狂的猜测，但我需要对 typedef 做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:08:45.327

```
void createLineVectorsFromFace( .... 
```

不一样

```
void NormalCalculator::createLineVectorsFromFace( .... 
```

编译器是正确的（像往常一样），你没有定义成员，你定义了一个自由函数。

也一样`crossProductOfVecs`。

# php - 将变量从 foreach 循环传递给 php

> ID：13092096
> 
> 赞同：0
> 
> 时间：2012-10-26T18:06:12.133
> 
> 标签：php, variables, foreach

我迷失了我正在解决的问题。

我有一个带有几个单选按钮和一个提交按钮的 HTML 表单。从此表单中，用户将能够选择其中一个单选按钮，然后单击提交。这将启动 PHP 脚本，并且脚本应该从字符串中提取与从单选按钮中选择的数字不匹配的单词。

虽然我对 HTML 很满意，但 PHP 给我带来了更多麻烦。

这是我卡住的地方：

```
 $myTok = strtok($fileContents, "\"!@#$%^&*(1234567890).,:;'_?\n\t-[]~{}");

while ($myTok != false){

    $myTok = strtok( "\"!@#$%^&*(1234567890).,:;'_?\n\t-[]~{}");

        foreach ($myTok as $key => $value){
            if (strlen($value == 1)){
                                   //not sure how to return the value to the $resultWords variable here

}
}

$resultWords = 
```

我有一个字符串（例如“我在使用 PHP 脚本时遇到了困难。”）我正在使用 strtok() 函数删除任何不需要的分隔符，这将算作我的 $value 中的额外字符foreach 循环，但我只想要单词。

因此，使用 foreach 循环，我将遍历每个标记值，以查看单词是否与用户选择的长度匹配。这些是我想从字符串中删除的单词。因此，如果用户选择单选按钮 4，我的新字符串将看起来像“我正在使用 PHP 脚本”。我想使用 foreach() 循环来执行此操作。我最大的困惑是如何将修改后的字符串从循环返回到变量 $resultWords，或者我什至是否正确设置了 foreach 循环的开头。

是否建议在 foreach 循环之前使用 explode() 函数将其全部设为数组？抱歉，我对此有点陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:12:17.440

您可以通过以下方式修改您的脚本。

```
$resultWords  = array();
foreach ($myTok as $key => $value){

 if (strlen($value == 1)){

        $resultWords[] = $value;                   

    }
}

//Make use of the array now. 
foreach($resultWords as $key => $value) {

    //$value will contain the words

} 
```

# report - 带有编译器警告的clang扫描构建报告？

> ID：13092097
> 
> 赞同：10
> 
> 时间：2012-10-26T18:06:14.640
> 
> 标签：report, clang, compiler-warnings, clang-static-analyzer

用于静态分析器的 clang 的 scan-build 驱动程序会生成漂亮的 html 报告。但这些仅包含分析器发现的问题。

有没有办法从编译器本身生成相同类型的警告（和错误）报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-25T03:32:17.890

我没有找到关于这个的文档，所以我挖掘了 clang 源代码。

事实证明，`scan-build`and `ccc-analyzer`（两个 perl 脚本）都不会输出这些错误报告。相反，HTML 报告的生成实际上是 clang 编译器的一部分。该`scan-build`脚本只是将各种输出文件联系在一起并添加一个报告索引。

看

[http://clang.llvm.org/doxygen/HTMLDiagnostics_8cpp_source.html](http://clang.llvm.org/doxygen/HTMLDiagnostics_8cpp_source.html)

对于 Clang 源代码。

要让 clang 为正常的警告/错误生成 HTML 报告，需要使用 `HTMLDiagnostics`静态分析器的外部。我对 Clang/LLVM 内部知之甚少，所以我不确定这需要多少努力。

# c# - 将 SQL 查询转换为 LINQ（子查询）

> ID：13092098
> 
> 赞同：1
> 
> 时间：2012-10-26T18:06:17.297
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

嗨，有一个用户可以对图像进行投票的网站。投票存储在表 Votes 中，我存储提交的 Id (FK_id)

这些表是：

**表格提交**
ID (uniqueidentifier)
名称 (varchar(50))
图片 (varchar(50))

**Table Votes**
Id (int)
Fk_id（Submissions.Id 的外键）

我是 linq 新手，所以我不知道如何翻译：

```
SELECT *, 
    isnull((SELECT count(*) 
    FROM Votes
    WHERE Fk_id = S.Id      
    GROUP BY Fk_id),0) as Votes 
FROM Submissions S 
```

我想要这样的东西：

```
List<Model> = (from p in ????
               select new Model
               {
                   Name = p.Name,
                   Image = p.Image,
                   Votes = p.Votes               
               }).ToList(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:41:56.077

而不是翻译你的Sql（我认为这太复杂了），你不想做类似的事情：

```
List<Model> = (from p in Submissions 
              select new Model
              {
                 Name = p.Name,
                 Image = p.Image,
                 Votes = p.Votes.Count() 
              }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:15:41.570

对我来说，这似乎是一个相当直接的端口，除了顺序`select`和`from`被颠倒。

```
Submissions.Select(sub => new
{
  //...other fields
  Votes = Votes.Where(vote => vote.Fk_id == sub.Id)
               .GroupBy(vote => vote.Fk_id)
               .Select(group => group.Count()),
} 
```

现在，查看查询，您可能可以直接在 Votes 上进行分组，而不是作为内部查询，它应该更有效率，但这完全取决于您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:36:22.643

这将是您的`SQL`代码的翻译，其中还考虑到`isnull`确保每次提交都有模型：

```
List<Model> list = (from s in Submissions
        select new Model
        {
            Id = s.Id,
            Name = s.Name,
            Image = s.Image,
            Votes = (from v in Votes
                     where v.Fk_id == s.Id
                     group v by v.Fk_id into g
                     select g.Count()).FirstOrDefault()
        }).ToList(); 
```

如果您正在使用`Entity Framework`，则应确保正确生成数据模型。在这种情况下，您的`Submission`实体已经包含`Votes`作为属性。然后一切都很简单：

```
List<Model> list = (from s in context.Submissions
                    select new Model
                    {
                        Id = s.Id,
                        Name = s.Name,
                        Image = s.Image,
                        Votes = s.Votes.Count()
                    }).ToList(); 
```

# php - jQuery ajax 不断出错而不是成功函数

> ID：13092104
> 
> 赞同：0
> 
> 时间：2012-10-26T18:06:25.080
> 
> 标签：php, jquery, ajax

我正在尝试在选择事件上执行 ajax 功能。基本上，我有一个 Google Maps API 连接，它根据给定的输入为我提供了一个下拉列表。当用户从结果列表中选择一个值时，必须执行 ajax 函数。基本任务：通过 Google Maps API 的给定坐标在数据库中查找结果。

出于某种原因，我无法让它工作，当到达脚本时，readyState 变为 4，状态为 200。有什么建议吗？

```
$('#SearchIn').autocomplete({
    source: // my google maps implementation (which works correctly),

    select: function(event, ui){
        $(this).autocomplete('close');
        $(this).val(ui.item.value);

        $.ajax({
            url:        ABS_BASE + 'ajax/ajax-get-results-from-location.php?data=123',
            success:    function(result) {
                            console.log('success');
                            console.log(result); 
                        },
            error:      function(jqXHR, textStatus, errorThrown) {
                            console.log(jqXHR);
                            console.log(textStatus);
                            console.log(errorThrown);
                        }
        });         
    }
}); 
```

更新; errorThrown 是“语法错误”。textStatus = 'parseerror' 但文件中的唯一内容是：

```
<?php
    include './ajax-base.php';

    echo 'OK I\'m here!'; 
```

有趣的是，来自 jqXHR 的 responseText 是产生的回声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:42:38.873

啊，我发现了错误。在我的 ajax-base.php 文件中，我设置了一个带有 contenttype 的标题`application/json`。这导致了我的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:19:26.827

我猜你错过了 PHP 的关闭：

```
<?php
include './ajax-base.php';

echo 'OK I\'m here!';
?> 
```

# php - PHP - 如何显示 POST 阐述结果单击上一页按钮而不是刷新页面

> ID：13092106
> 
> 赞同：0
> 
> 时间：2012-10-26T18:06:34.020
> 
> 标签：php, post, refresh, back

我正在开发一个 php 页面，该页面是一些 php 详细说明的结果，其中参数取自 POST 值。当我转到下一页并返回我正在开发的页面时，浏览器再次要求我发布重新加载整个页面的数据。我的问题与多个帖子请求无关，但我只想显示页面。我能做什么？谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:10:22.437

试试这个步骤：

1) 将一些 php 阐述的结果保存到会话中。
2) POST 请求提交并将结果保存到会话后，将用户重定向到将显示结果的其他页面。
3) 在用户输入数据的页面，在处理提交的数据之前清除会话存储。

因此，实际上您需要一些通常称为“会话消息堆栈”的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:17:53.540

Use the [Post/Redirect/Get (PRG) Pattern](http://en.wikipedia.org/wiki/Post/Redirect/Get).

# windows - 合并模块升级问题

> ID：13092117
> 
> 赞同：0
> 
> 时间：2012-10-26T18:07:31.597
> 
> 标签：windows, wix, windows-installer, drivers, merge-module

我有一个 MSI/WIX 安装程序项目，它包含一个合并模块，它为一些自定义 USB 硬件安装驱动程序。

安装程序的新版本会定期生成，但合并模块已经有一段时间没有改变了。但是，当使用我们的安装程序执行安装升级时，安装程​​序总是会重新安装驱动程序文件，这会提示 Windows 即插即用，重新安装 USB 设备的设备驱动程序。

如果合并模块没有更改，安装程序的目的是跳过驱动程序安装。合并模块的版本号没有改变，所以这是我期望发生的。

合并模块的版本号是否被主安装程序包含在内？在这种情况下，如果驱动程序文件没有更改，是否可以让安装程序不理会它们？

就目前而言，我们的构建系统从头开始构建所有内容以进行发布。也许解决方案是将合并模块作为二进制依赖项包含在内，并且仅在实际发生更改时才重建它（和驱动程序工件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:01:21.330

合并模块只是一堆表数据/组件。一旦它被合并到一个 MSI 中，它就不存在了。它只是不像你想象的那样工作。

相反，请关注 MSI 在主要和/或次要升级期间如何处理功能、组件和文件，并从这个角度进行攻击。

# excel - 关闭然后打开工作簿

> ID：13092121
> 
> 赞同：3
> 
> 时间：2012-10-26T18:07:47.327
> 
> 标签：excel, excel-2010, vba

我需要关闭我有一个宏的工作簿，然后在关闭后重新打开它。

它是在对某些设置值进行各种更改然后保存更改文件的副本的过程结束时。保存更改后的文件后，我想关闭当前工作簿（不保存更改）然后打开它，这样我就可以在更改发生之前打开它。

如果有比关闭然后打开更好的方法，那么无论如何都不会接受建议。

此逻辑需要发生在工作簿中，而不是工作簿之外的任何地方、IE 没有 Personal.xlsm 或其他不会随工作簿一起移动的个人方法位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T18:15:17.143

做这样的事情：

```
dim currentworkbookPath as string
'Store current workbook path to a string
currentworkbookPath = workbook.FullName
'Save the workbook somewhere else
Workbook.SaveAs 'I'll let you figure out the save as details yourself :P 
'Open the old workbook.
Workbooks.Open currentworkbookPath
'Close the saved workbook.
Workbook.Close 
```

Workbook 是您正在使用的实际工作簿，您可能想要使用`ThisWorkbook`，但我不想假设。

如果您不熟悉这里是[Workbook.FullName的参考](http://msdn.microsoft.com/en-us/library/office/ff834975.aspx)

# jquery - 返回false时获取url查询

> ID：13092123
> 
> 赞同：0
> 
> 时间：2012-10-26T18:08:02.340
> 
> 标签：jquery

我一直在google en SO上搜索这个，我得到了我想从url获取查询参数的功能（[链接到文章](http://jquery-howto.blogspot.be/2009/09/get-url-parameters-values-with-jquery.html)）。
但是我找不到我的问题的答案，我非常肯定的是它应该很容易解决，我什至觉得问起来很愚蠢，但我就是找不到这个具体的答案。

当我单击一个链接并在 jquery 中捕获该单击时，该函数返回 false（我不想要刷新），因此我想要的参数不会被解析为 url。我怎么得到这些？

```
CURRENT URL: index.php?page=search&action=searchAll
<h4 class="videoLink"><a href="index.php?page=search&amp;action=playVideo&amp;isAjax=true&amp;v={$result.link}" class="{$result.link}">{$result.title}</a></h4> 
```

简化的 jQuery

```
$('.videoLink').click(playVideo);  

function playVideo(){
   url = getUrlVars();
   return false;
}

function getUrlVars(){
   var vars = [], hash;
   var hashes = window.location.href.slice(window.location.href.indexOf('?')+1).split('&');

   for(var i = 0; i < hashes.length; i++){
       hash = hashes[i].split('=');
       vars.push(hash[0]);
       vars[hash[0]] = hash[1];
   }
return vars;
} 
```

所以当我跟踪 url 时，我只得到参数：page & action

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:30:01.587

在返回之前，`false`您可以获得链接并提取参数..

```
$('a').click(function(e){

    var href = this.href;
    var params = {};
    // remove the part of the href up to the first ? character
    // and then split the remaining at the & character
    // loop the resulting list of somekey=somevalue
    // and split at the = and store in the params variable
    $.each(href.replace(/^.*?\?/gi,'').split('&'), function(i,val){
        var parts = val.split('=');
        params[parts[0]] = decodeURIComponent(parts[1]);
    });

    // do what you want with the params here

    return false;
}); 
```

* * *

**更新**

如果您希望您的代码与浏览器位置以及传递给它的自定义 url 一起使用，您可以将其更改为

```
function getUrlVars(href){
   var vars = [], 
       hash,
       url = href || window.location.href;

   var hashes = url.slice(url.indexOf('?')+1).split('&');

   for(var i = 0; i < hashes.length; i++){
       hash = hashes[i].split('=');
       vars.push(hash[0]);
       vars[hash[0]] = hash[1];
   }
return vars;
} 
```

并这样称呼它

```
function playVideo(){
   url = getUrlVars(this.href);
   return false;
} 
```

# assembly - 在汇编中将 Int 转换为二进制 (pep8) - 一种优雅的方法

> ID：13092124
> 
> 赞同：1
> 
> 时间：2012-10-26T18:08:09.070
> 
> 标签：assembly, binary, int

我正在为我的一个程序集（pep8）中的一个课程编写程序。该程序应该接受一个介于 -32,768 和 32,767 之间的整数，并输出它的二进制等价物。下面的代码完成了这个任务，只是它向后打印了二进制数。

有没有一种优雅的方式让我以正确的顺序打印二进制数（即我不想将每个二进制数字存储在局部变量中，然后以相反的顺序打印它们）。

```
 BR main
int:             .EQUATE 0                ;local variable int
out:             .EQUATE 2                ;local variable out
index:           .EQUATE 4                ;local variable index
stack:           .EQUATE 6                ;local variable for dynamic memory allocation

main:            SUBSP       stack,i      ;allocate memmory
                 LDA         0,i          
                 STA         index,s      ;initialize index
                 DECI        int,s        ;get user input and store it in num 
while:           LDA         index,s      ;while (num <= 16)
                 CPA         16,i         ;
                 BRGE        endWhile     ;
                 ADDA        1,i          ;index++
                 STA         index,s      ;
                 LDA         int,s        ;
                 ANDA        0x0001,i     ;modulus 2 "%2"
                 STA         out,s        ;
                 DECO        out,s        ;output results 
                 LDA         int,s        ;
                 ASRA                     ;devide num by 2
                 STA         int,s        ;

                 BR          while        ;
endWhile:        ADDSP       stack,i      ;deallocate memmory
                 STOP
                 .END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:24:44.213

我不熟悉这种特殊的程序集，但是如果您将值左移并检查进位标志，则在所有体系结构中打印出二进制文件都相对容易`C`。

当您*将*寄存器向左移动时，其最高有效位以`C`. 现在将另一个寄存器设置为零，并在将源值左移后立即将其左移*。*原始值的最高有效位现在位于寄存器的最低有效位中：

```
Register   C   Value
--------   -   --------
00000000   x   11001010 // Initially
00000000   1   10010100 // After left-shifting the value
00000001   0   10010100 // After left-rotating the register 
```

输出寄存器，将其设置回零，然后继续。这将以正确的顺序输出位。

请注意，此技巧仅适用于汇编程序员。C/C++ 程序员无法访问它，因为进位标志`C`超出了他们的范围。

# shell - Windows bat 到 linux shell 脚本翻译问题

> ID：13092127
> 
> 赞同：2
> 
> 时间：2012-10-26T18:08:37.560
> 
> 标签：shell, batch-file

我有以下 Windows 批处理文件：

```
set url=http://localhost:20013

wsimport -keep -s . %url%/WSInicioDeSesion?wsdl
rm ws/*.class 
```

当我尝试制作它的 shell 脚本版本时，它失败了。这是我的 shell 脚本：

```
#!bin/sh

#here i set the path variable, not important

URL="http://localhost:20013"
wsimport -keep -s . $URL/WSInicioDeSesion?wsdl 
```

但是，如果我尝试 echo: `${URL}abcd`it prints `abcd://localhost:20013`，似乎变量替换出错了，这是怎么回事？

编辑：对不起，我复制/粘贴了第二部分错误，这就是它的样子。

所以我也尝试了类似rm {$URL}.txt的东西，令我惊讶的是它说找不到文件'http://localhost:20013\r.txt\r'，为什么要添加回车符每个句子？会不会是编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:58:08.410

您对问题的最后一次编辑似乎终于揭示了问题的实际原因。

您的shell 脚本可能已使用Windows 样式的换行符保存`\r\n`，即回车控制字符后跟换行控制字符。Unix 世界只使用`\n`. 因此，实际存储到`URL`变量中的值可能不仅仅是（其中`http://localhost:20013`代表回车字符）。这也解释了打印输出：值末尾的 CR 字符将光标移动到行首，并简单地覆盖初始的。`http://localhost:20013^R``^R``echo ${URL}abcd``abcd://localhost:20013``${URL}``abcd``http`

我认为如果你在几乎任何流行的 Linux 文本编辑器中打开脚本，你应该能够看到那些额外的`\r`符号为`^R`s。好吧，至少，这就是我记得在打开从某些 Windows 机器传输的文本文件时在 Midnight Commander 的内置编辑器和其他一些控制台编辑器中看到的内容。而且，当然，您也应该能够删除这些字符（在您的情况下应该这样做以解决问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:23:03.857

我必须从您的示例中更改的唯一一件事是 #! 行到 #!/bin/sh

```
#!/bin/sh

#here i set the path variable, not important

URL="http://localhost:20013/WSInicioDeSesion?wsdl"
echo ${URL}abcd 
```

为我打印出 'http://localhost:20013/WSInicioDeSesion?wsdlabcd'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:25:58.223

`wsimport wsimport -keep -s . $URL/WSInicioDeSesion?wsdl`可能应该是`wsimport -keep -s "." "${URL}"`虽然我无法复制你正在做的事情。以下`/`变量引用可能意味着您正在替换文本。我总是用符号指定变量`${}`以避免这样的事情。

# java - 为什么要覆盖 Java 中的 clone 方法

> ID：13092128
> 
> 赞同：15
> 
> 时间：2012-10-26T18:08:38.463
> 
> 标签：java, clone

我对在我想要克隆对象的类中覆盖克隆方法感到困惑。

对象类具有**受保护的对象**方法，并且根据受保护的行为，即**当方法受到保护时，只能由类本身、类的子类或与该类位于同一包中的类访问**。

由于 Java 中的每个类都从 Object 扩展而来，所以它应该有 clone 方法，但我们仍然被迫重写 clone。为什么需要它？

另外，我在某些地方阅读了覆盖克隆对象并将其公开的内容。我想知道，为什么会这样？

欢迎所有答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T18:11:55.737

> 由于 Java 中的每个类都从 Object 扩展而来，所以它应该有 clone 方法，但我们仍然被迫重写 clone

不，您不会被迫重写该`clone`方法。在继承中，当你继承一个类时，你不必重写它的方法。它的修饰符是 public 或 protected 并没有太大的区别。但是，如果您想直接在`super`类引用上调用方法，则该方法必须是`public`. 受保护的方法只能通过继承来访问。也就是说，您只能通过`subclass`引用访问它们。或者，如果您覆盖该方法，您可以通过`super`关键字访问它们。

话虽如此，您不应该重写`clone`方法，因为它是`broken`. 因为，要克隆一个类，你需要实现`Cloneable`接口。然后你`clone`的班级改用 class 的方法`Object`。因为，`Cloneable`interface 并没有任何方法用于`cloning`. 这将是一个更好的选择`Copy Constructor`。

```
public class A {
   private int data;
   public A() {
   }

   public A(A a) {
      this.data = a.data;
   }
} 
```

有关更多详细信息，我建议阅读`Joshua Bloch's`Effective Java 这一章，它涵盖了使用`clone`方法的所有方面。

[**有效的 Java - 第 11 条 - 明智地覆盖克隆**](http://my.safaribooksonline.com/book/programming/java/9780137150021/methods-common-to-all-objects/ch03lev1sec2#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODAxMzcxNTAwMjElMkZjaDAzbGV2MXNlYzQ=)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T18:12:03.727

我建议阅读 Joshua Bloch 的[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683) 2nd edition。它有一个很好的章节讨论克隆。

我不建议这样做。我认为这是 JDK 1.0 的错误。这本书会更清楚地说明这一点。

我建议编写一个复制构造函数来获得你想要的东西：

```
public class Foo {
    private String name;
    public Foo(String name) { this.name = name; }
    public Foo(Foo f) { this.name = f.name; }  // copy ctor here.
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T18:14:38.560

在许多情况下，并不清楚克隆对象应该是什么以及它应该如何表现，所以如果你希望你的类是可克隆的，你必须通过覆盖克隆并使其公开来明确说明。

克隆可能没有意义的情况包括代表某些资源的类，例如网络连接或同步锁。如果可以克隆这些对象，则不清楚克隆应该如何表现。例如，网络连接的克隆是否有自己的 TCP/IP 连接，或者它是否以某种方式使用现有的连接？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T18:30:28.147

克隆是类中的`Protected`方法，`Object`因此您可以在类中访问它。

关于访问——当一个方法被保护时，它只能被类本身、类的子类或与该类在同一个包中的类访问。

我看到一些关于克隆方法的误解

1.  `clone()`方法`protected`在`Object`类内，所以你不能 `clone()`在类外调用。例如`child.clone()`，除非您覆盖它并进行访问`public`
2.  `Cloneable`是标记接口，如果你不标记类`Cloneable`，那么你会得到`CloneNotSupportedException`如果你调用`clone()`方法
3.  如果一个类只包含原始字段或对不可变对象的引用，那么通常情况下，返回的对象中`super.clone`不需要修改任何字段。
4.  按照惯例，返回的对象应该通过调用`super.clone`. 如果一个类及其所有类都`superclasses (except Object)`遵守这个约定，那么`x.clone().getClass() == x.getClass()`.

方法签名如下

```
@Override
public Object clone() throws CloneNotSupportedException {
    return super.clone();
} 
```

参考 ：

1.  [对象#克隆（）](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)
2.  [可克隆](http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-22T03:42:47.857

```
 Why we do override clone() in cloning process?
    //clone() in Object class is protected
    package java.lang;

    protected native Object clone()
            throws CloneNotSupportedException;

    java.lang is default import in our java applications.

Note: If parent and sub class are both in same package then the methods in parent class are directly accessible. If they are in different package,then in subclass we have to override the parent class methods to use.

    Note:Object class is in java.lang package,we are using it in different package,so we have to override the clone() which is protected in Object class

first we will look into Protected method behavior.here is sample program to understand this
    //this class is in com.anusha.clonetrial
    package com.anusha.clonetrial;

    public class A {

        public A()
        {

        }
        protected void disp1()
        {
            System.out.println("class a");
        }
        protected void disp2()
        {
            System.out.println("class a");
        }
    }
    //below classes are in com.anusha.Test
    package com.anusha.Test;
    import com.anusha.clonetrial.A;

    class AA {

        protected void disp1()
        {
            System.out.println("class aa");
        }

        protected void disp2()
        {
            System.out.println("class aa");
        }
    }

    //class B derived from AA which is present in the same package
    class B extends AA
    {

        void show()
        {

            System.out.println("class b");
        }
    }

    //class C derived from A which is present in the different package

    class C extends A
    {

        @Override
        protected void disp1()
        {
            super.disp1();
        }
        void show()
        { 
            System.out.println("class c");
        }
    }

    package com.anusha.Test;

    public class CloneTest {

        public static void main(String[] args) {
            B b=new B();
            C c=new C();
            b.disp1();
            b.disp2();
            c.disp1();
            c.disp2();//gives error because it is not overridden.

        }

    } 
```

# java - 如果不访问类，静态初始化是否保证不会运行？

> ID：13092132
> 
> 赞同：5
> 
> 时间：2012-10-26T18:08:53.087
> 
> 标签：java, android, static-methods, dalvik, lazy-initialization

我知道有很多关于此的主题和资源，但我想知道一个非常具体的问题（可能需要很长时间才能检查所有来源以获得*明确*的答案）。

我知道 JVM/Dalvik 保证当您访问类的静态字段（`final static`原始值除外）时，该类的静态字段已经初始化。反之亦然吗？如果我*根本不*访问一个类（例如，因为`switch-case`另一个静态方法中的代码永远不会到达某个分支），是否可以保证 VM 不会**初始化**这个类的静态变量？

假设我有这样的课程：

```
public class Boo {
      public static int[] anything = new int[] { 2,3,4 };
      private static int[] something = new int[] { 5,6,7 }; // this may be much bigger as well

      public static final int[] getAndClear() {
           int[] st = something;
           something = null;
           return st;
      }
} 
```

我的应用程序是一个非常特殊的应用程序（在某些方面并不典型），它可能包含数百个类，例如`Boo`（由代码生成器生成），其中`something`可能是一个元素数量不同的数组（因此它可能包含很多元素，如有时好）。

根据应用程序的输入，许多这些预生成的类可能永远不会被访问。我*不*希望很多`int[]`对象被不必要地初始化，占用大量内存。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T18:13:03.157

> 我知道 JVM/Dalvik 保证当您访问一个类的静态字段（最终静态原始值除外）时，该类的静态字段已经初始化。

这大部分是正确的，但由于不断内联，某些静态字段并非如此。在

```
class A {
  public static final String FOO = "foo";

  static { System.out.println("loaded A"); }
}

public class B {
  public static void main(String... argv) {
    System.out.println("Got " + A.FOO);
  }
} 
```

JVM 将打印“Got foo”，但不会打印“loaded A”。事实上，即使 B`A.class`不在类路径上，B 也会运行，尽管在编译时至少有一个`A.java`or`A.class`必须可用`B.java`。

* * *

> 反之亦然吗？如果我根本不访问一个类（例如，因为另一个静态方法中的 switch-case 代码永远不会到达某个分支），是否可以保证 VM 不会初始化此类的静态？

是的。JLS 列出了类加载和初始化发生的确切条件，因此 JVM 实现不能自由地急切加载或初始化类。

[12.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)是感兴趣的章节。

> # 12.4.1\. 初始化发生时
> 
> 类或接口类型 T 将在以下任何一项第一次出现**之前立即初始化：**
> 
> 1.  T 是一个类，并创建了一个 T 的实例。
> 2.  T 是一个类，并且调用了 T 声明的静态方法。
> 3.  分配了一个由 T 声明的静态字段。
> 4.  使用了由 T 声明的静态字段，并且该字段不是常量变量（第 4.12.4 节）。
> 5.  T 是一个顶级类（第 7.6 节），并且执行在词法上嵌套在 T（第 8.1.3 节）中的断言语句（第 14.10 节）。

“紧接在前”的措辞禁止任何急切，并规定当两个类都尝试执行上述操作之一时会发生什么——有一个与已加载但未初始化的类相关联的锁，并且都等到第一个获取该操作的线程lock 执行初始化。

“并且该字段不是常量变量（第 4.12.4 节）”措辞是我上面`class B`使用的规则的例外`A.FOO`。

* * *

> ```
> public static final int[] getAndClear() { ... } 
> ```

可能应该是`synchronized`因为否则两个线程可能都获得相同的数组而不是一个接收`null`。我上面提到的类加载器锁不保护`getAndClear`.

# php - JSON PHP ForEach

> ID：13092133
> 
> 赞同：0
> 
> 时间：2012-10-26T18:08:54.227
> 
> 标签：php, json, foreach

JSON 提要：

```
 {
        "Group": [
          {
             "name": "HolderOne",
            "operators": [
            {
                "username": "ken",
                "status": 3
            },
     .....etc..... 
```

代码：

```
 <?php 
 $json = file_get_content('path to feed');
 $data=json_decode($json); 

 echo $data->cGroup[0]->operators[0]->username; //WORKS!

 if (is_array($data->Group->operators))
  { foreach($data->Group->operators as $operator) 
     {if($operator->username == "ken") {echo $operator->status;}} 
  } else { echo 'NOT AN ARRAY'; } //DOESNT WORK - DISPLAYS NOT AN ARRAY
 ?> 
```

我想说如果用户名是 Ken（或者我在编写更多代码时指定的任何内容）显示相应的状态。

所以...

```
 echo $data->Group[0]->operators[0]->username; //WORKS! 
```

但...

```
 foreach($data->Group->operators as $operator) {if($operator->username == "ken") {echo $operator->status;}} 
```

...不 - 可能很明显，但任何人都可以看到我的问题吗？

干杯安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:12:44.997

它必须是`$data->Group[0]->operators`, 或者循环`Groups`并在里面有另一个循环......

```
foreach($data->Group as $group){
    foreach($group->operators as $operator){
        if($operator->username == "ken") {echo $operator->status;}
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:20:35.570

我认为这是真的：

```
foreach($data["Group"]["operators"] as $operators)
{
     if($operators["username"] == "ken")
     {
          echo $operators["status"];
     }
     else
     {
          echo 'NOT AN ARRAY';
     }
} 
```

# html - 如何在 iframe 中使用 flashvars 参数？

> ID：13092135
> 
> 赞同：3
> 
> 时间：2012-10-26T18:09:01.747
> 
> 标签：html, wordpress, iframe, flashvars

我有一个自托管的 wordpress 博客，我正在尝试在网站上嵌入带有代码的视频：

```
<iframe src="http://www.viki.com/player/medias/80715" frameborder="0" width="640" height="360"</iframe> 
```

它工作正常，但是该视频具有自动播放功能，可以自动播放下一个视频，我希望它在最后停止。此外，该视频的字幕默认为英文，我希望加载西班牙文的而不是英文的。

我可以通过以下代码实现：

```
<embed src="http://a3.vikiassets.com/swfs/vikiplayer.swf?1320909340" flashvars="language_codes=es&amp;source=direct&amp;media_id=80715" type="application/x-shockwave-flash" wmode="transparent" width="640" height="360" allowfullscreen="true"</embed> 
```

但是，有什么方法可以通过 iframe 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:45:09.817

你有这个运气吗？我有一个类似的问题，但它不像我想要的那样整洁。

我有一个页面`domain1.com`，上面有一个`iFrame`从另一台服务器加载 Flash 文件的代码 - `domain2.com`.

`index.html`文件`domain1.com`：

```
<iframe name="iframe"  src="http://www.domain2.com/iframe.php?var1=myvar" scrolling="no" frameborder="no" height="600" width="970">
</iframe> 
```

在`domain2.com`iFrame 代码上是一个 PHP 页面，它请求这样的变量：

```
<?php $var1 = ($_REQUEST['var1']);

<object... (Flash embed etc)
<param name=FlashVars value="var1=<?php echo $var1;?>" /> 
```

我可以加载许多 Flash 变量来控制不同服务器上的 Flash 文件，但理想情况下，我想`swf`使用查询字符串进行 iframe，但这似乎可以解决问题。

如果您有更好的解决方案，那就太好了。
谢谢。

# mysql - 如果 post_id 相同，则使用其他 meta_key 的 meta_value 更新某些 meta_key 的 wp_postmeta meta_value

> ID：13092138
> 
> 赞同：1
> 
> 时间：2012-10-26T18:09:16.967
> 
> 标签：mysql, wordpress, sql-update

我已经搜索过，但我不能自己做这个

所以要完全清楚，我有 WP 数据库，其中有这样的 meta_keys：

```
ID ------ POST_ID -------- META_KEY ---- META_VALUE
1  ------   235  -------  book_price ---- 35$
2  ------   256  -------  book_price ---- 65$
3  ------   235  -------  tcp_book_price ---- 0
4  ------   256  -------  tcp_book_price ---- 0 
```

我希望 tcp_book_price 的 meta_value 从 book_price 接收具有相同 post_id 的 meta_value

最终结果希望：

```
ID ------ POST_ID -------- META_KEY ---- META_VALUE
1  ------   235  -------  book_price ---- 35$
2  ------   256  -------  book_price ---- 65$
3  ------   235  -------  tcp_book_price ---- 35$
4  ------   256  -------  tcp_book_price ---- 65$ 
```

我试过 UPDATE FROM SELECT 但我不能让它工作..

**提前致谢**

好的，我自己用 PHP 脚本找到了解决方案：

```
<?php

$conn = mysql_connect("localhost", "root", "root");

if (!$conn) {
echo "Impossible de se connecter à la base de données : " . mysql_error();
   exit;
}

if (!mysql_select_db("database_name")) {
   echo "Impossible de sélectionner la base database_name : " . mysql_error();
   exit;
}

$sql = "SELECT `post_id`, `meta_value` FROM `wp_postmeta` WHERE `meta_key` = 'book_price'";

// query the database
$resource = mysql_query($sql);

// loop through the results
while ($result = mysql_fetch_assoc($resource)) {
    // grab the value
    $price = $result['meta_value'];   // you should use quotes here, btw
    $pid = $result['post_id'];   // you should use quotes here, btw

    echo $price;
    echo $pid;

    // make your modifications;
//    ++$nox; // or whatever

    // build the query
    $sql = "UPDATE `wp_postmeta` SET `meta_value` = '$price' WHERE `meta_key` = 'tcp_price' AND `post_id` = '$pid'";

    // run the query
    mysql_query($sql);
}

?> 
```

# android - 如何使用现有数据在android中创建数据库？

> ID：13092140
> 
> 赞同：1
> 
> 时间：2012-10-26T18:09:44.627
> 
> 标签：android, database, sqlite

我对 sqlite 数据库有问题。我想用现有记录在 android 中创建数据库。我创建数据库：

```
public class PrzyslowiaArabskie  {

private static final String TABLE_NAME = "tabela_przyslowia";
private static final String DATABASE_NAME = "przyslowiadb";
private static final int DATABASE_VERSION = 1;
public static final String KEY_ID = "id";
public static final String KEY_PRZYSLOWIE = "przyslowie";

private DbHelper myHelper;
private final Context myContext;
private SQLiteDatabase myDatabase;

private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
         db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + 
                   KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                 KEY_PRZYSLOWIE + " TEXT NOT NULL);" );

    } 

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

        onCreate(db);
    }

}
public PrzyslowiaArabskie(Context c) {
    myContext = c;
}
public PrzyslowiaArabskie open() {
    myHelper = new DbHelper(myContext);
    myDatabase = myHelper.getWritableDatabase();
    return this;
}
public void close() {
    myHelper.close();
}
public long createEntry(String przyslowie) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_PRZYSLOWIE, przyslowie);
    return myDatabase.insert(TABLE_NAME, null, cv);

}
public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[] { KEY_ID, KEY_PRZYSLOWIE };
    Cursor c = myDatabase.query(TABLE_NAME, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndexOrThrow(KEY_ID);
    int iPrzyslowie = c.getColumnIndexOrThrow(KEY_PRZYSLOWIE);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iRow) + " " + c.getString(iPrzyslowie) + "\n";
    }

    return result;
} 
```

}

如果我想用现有记录创建数据库，我该怎么办。如何将记录与创建数据库一起添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:17:21.710

You can make a file containing all the insert statements needed to insert the data and put that file in your assets folder. After you create the database, then take each line of the file and run it through `rawQuery`.

There are other ways as well, as the other answer demonstrates.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:18:38.637

1）如果您已经有数据，使用firefox的sqlite manager插入数据会更容易。

2）如果您有其他形式的数据，例如“CSV”或“XML”，那么您可以使用 Firefox 的 sqlite 管理器将该文件简单地导入您的表中。

3）或者如果您必须从您的应用程序插入数据，那么最好创建一个 bean 对象将其发送到您的数据库助手类并使用任何查询将值插入到您的表中。

举个例子，

```
 void addStatesModel(StatesModel states) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, states.getName()); // StatesModel Name
    values.put(KEY_CODE, states.getCode()); // StatesModel Phone

    // Inserting Row
    db.insert(TABLE_STATES, null, values);
    db.close(); // Closing database connection
   } 
```

在此，我将状态作为 abean 对象传递给方法 addStatesModel。

4）或者，如果您在单独的数据库中有数据，您可以连接两个数据库，然后运行复制命令将数据从一个表传输到另一个表。或者只需使用 SQLite 管理器，您可以将表从一个数据库导出到 csv 文件或 xml文件，然后将该文件导入您的表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:16:14.053

You just need to insert values in the `onCreate()` method, after you've created the table:

```
@Override
public void onCreate(SQLiteDatabase db) {
  db.execSQL("CREATE TABLE " + TABLE_NAME + " ("
      + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
      + KEY_PRZYSLOWIE + " TEXT NOT NULL);" );

  ContentValues values = new ContentValues();
  values.put(KEY_PRZYSLOWIE , "My text");

  db.insert(TABLE_NAME, null, values);
  // ... etc...
} 
```

As a side note, if your database is more complicated than this simple example, you might want to delegate table creation and initialization to other methods or even classes.

# java - 调整 JComponent 中的重绘以提高性能

> ID：13092142
> 
> 赞同：2
> 
> 时间：2012-10-26T18:09:54.783
> 
> 标签：java, performance, opengl, theory, graphics2d

我正在尝试通过尝试不同的概念来设计和可视化环境来对 2D“游戏”编程进行一些测试。

在我的小步骤中，我使用 Swing 并使用 JComponent 的 paintComponent() 方法来检索一个 Graphics2D 对象，然后我用它来可视化我的游戏板。

它工作得很好，但我到了需要反复检查我的整个游戏模型并更新视图的地步，基本上每 1/10 秒一次，有些东西可能会改变。

我通过在我的 JComponent 上调用 repaint() 来绘制视觉效果以导致视图的完整更新：我检查我的游戏板上的每个图块以获取信息，并根据此数据为板上的每个图块绘制该图块。但是当我接近大约 1000 - 4000 块需要绘制的图块时，我发现绘制整个视图需要超过 100 毫秒，因此在做任何事情时都会出现持续的延迟。

现在的问题是：我正在寻找一种方法或意见，关于如何提高这种方法的性能。由于并非板上的每个图块都会更改每个“滴答”，因此我不需要“重新绘制”该图块。但相反，移动可视区域（相机偏移）会改变屏幕上每个图块的位置，因此需要在不同的位置重新绘制。此外，“将是”动画的后期实现将需要不断更新视觉区域，无论“发生”与否。当查看以 > 30 FPS 运行的具有高质量图形（甚至像我的世界这样的简单游戏）的 3D 游戏时，我想知道天气是否应该立即切换到 OpenGL，然后再遇到更多图形问题，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:26:20.460

您*可以*通过执行类似的操作来逐步更新 UI

```
void tileChanged(final Tile tile) {
    EventQueue.invokeLater(new Runnable() {
        @Override public void run() {
            tile.renderTo(jpanel.getGraphics());
        }
    };
} 
```

或者您可以尝试[调整 Java 2D 渲染](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/java2d.html#gcrua)，例如通过切换渲染管道。

或者您可以放弃 Java 2D，直接与 Open GL 对话，例如通过[LWJGL](http://www.lwjgl.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:24:42.343

`boolean`为每个图块声明一个 2 维数组，以及一个`int`保持更改常量的变量，并在每次更改时更新它们，例如：

```
public void updateTiles(){

    if(changeType == NO_CHANGE){
        //do something
    }
    else if(changeType == BOARD_MOVED){
        repaint();
    }
    else if(changeType == TILE_CHANGED) {
        for(int i = 0; i < changeList.length; i++) {
            for(int j = 0; j < changeList[i].length; j++) {
                if(changeList[i][j]) {
                    repaint(i * TILE_SIZE, j * TILE_SIZE, TILE_SIZE, TILE_SIZE );
                    changeList[i][j] = false;
                }
            }
        }
    }

    changeType == NO_CHANGE; 
} 
```

# html - 防止 CSS 水平下拉菜单“换行”

> ID：13092143
> 
> 赞同：4
> 
> 时间：2012-10-26T18:09:55.013
> 
> 标签：html, css

我对这样一个事实感到沮丧，一旦重新调整浏览器窗口的大小，这个漂亮的小菜单就会自动换行。无论窗口是否调整大小，如何防止换行并将其保持在固定状态？

```
<!DOCTYPE html>
<html>

<head>
<style type="text/css">
#menu{

    border-top: 1px solid #FFF;
    padding:0;
    margin:0;
    position: fixed;
    top: 30px;
    left: 0px;
    font-size: 8pt;
    width:100%;
}
#menu ul{
    padding:0;
    margin:0;
}
#menu li{
    position: relative;
    float: left;
    list-style: none;
    margin: 0;
    padding:0;
    white-space: nowrap;
} 

#menu li a{
    width:120px;
    height: 20px;
    display: block;
    text-decoration:none;
    line-height: 20px;
    background-color: #A9BBD3;
    color: #FFF;
} 

#menu li a:hover{
    background-color: #446087;
} 
#menu ul ul {
    position: absolute;
    top: 21px;
    visibility: hidden;
}

#menu ul ul li a {
    width: 115px;
    padding-left: 5px;
}
#menu ul li:hover ul{
    visibility:visible;
}
#menu > ul > li > a {
    text-align:center;
}
#menu > ul > li > a:hover {
    border-bottom: 1px solid #FFF;
}

</style>
</head>
<body>
    <div id="menu">
    <ul>
    <li><a href="#nogo">File</a>
    <ul>
    <li><a href="#nogo">Save</a></li>
    <li><a href="#nogo">Save & Exit</a></li>
    <li><a href="#nogo">Exit</a></li>
    </ul>
    </li>
    <li><a href="#nogo">Edit</a>
    <ul>
    <li><a href="#nogo">Add</a></li>
    <li><a href="#nogo">Delete</a></li>
    <li><a href="#nogo">Clear Form</a></li>
    </ul>
    </li>
    <li><a href="#nogo">Reports</a>
    <ul>
    <li><a href="#nogo">Export to Excel</a></li>
    <li><a href="#nogo">Export to HTML</a></li>
    </ul>
    </li>
    </ul>
    <ul>
    </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T18:22:51.760

添加以下 CSS：

```
#menu > ul { 
    white-space: nowrap;
}

#menu > ul > li {
  display: inline-block;
  float: none;
  margin: 0 -3px 0 0;
} 
```

`float: none`需要覆盖 rule `#menu li { float: left; }`，这会导致 parent`ul`的`white-space: nowrap`规则被忽略。

`display: inline-block`为列表项生成内联布局，但在大小和定位方面仍允许将它们视为块元素。

需要否定`margin-right`来覆盖 HTML 源中的换行符到单个空格的默认转换；没有它，您的顶级菜单项之间将有空格。

`display: inline-block`在 IE7 中无法正常工作。[此处](http://flipc.blogspot.ca/2009/02/damn-ie7-and-inline-block.html)描述了一个修复程序：

> 要让 Internet Explorer 中的任何元素都可以使用 inline-block，只需添加“zoom:1;*display:inline;_height:30px;” 到元素样式的末尾哦，是的，将高度更改为您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:11:05.467

只是尝试`li { display:table-cell; }`而不是`float:left`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:54:14.933

您设置`width: 100%;`了`<div id="menu">`，这意味着它将 100% 与其父级一样宽 - 这归结为浏览器窗口。

`width: 35em;`相反，在这种情况下，强制最小宽度大致等于元素内容的大小。基于文本大小的相对测量将随着更大的文本缩放，但如果内容更大，则需要增加它。

# javascript - 调试 Firebase 客户端连接

> ID：13092148
> 
> 赞同：1
> 
> 时间：2012-10-26T18:10:13.063
> 
> 标签：javascript, websocket, firebase

我们有一个用户报告说他们的数据没有加载到我们的应用程序中，我们无法调试为什么会发生这种情况。

我们目前正在与该用户共享屏幕，结果发现这样的调用永远不会返回：

`new Firebase("http://gamma.firebase.com/path/to/our/data").once('value', function(r) { console.log(r); });`

然而，这对其他客户来说效果很好。

我什至不知道我们将如何进行调试。我们如何确定回调没有触发的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:41:19.980

一些代理会阻止我们的实时传输代码。我们正在努力解决这个问题，但与此同时，请尝试使用这样的 SSL 连接：

```
new Firebase("https://..."); 
```

我们实际上建议所有生产应用程序都使用 SSL。

# bash - 使用变量进行 Bash 搜索和复制

> ID：13092156
> 
> 赞同：1
> 
> 时间：2012-10-26T18:10:33.687
> 
> 标签：bash, search, copy, find, cp

我有一组要搜索的目录，即

```
/home/*/Documents/Crashes 
```

我试图提取的文件是以下形式：

`A.log.20121022T160949Z`，其中前几个数字是日期（此处为 2012/10/22）。

我有一个带有用户名的文本文件，读取为 $line。

我只想从当前日期提取文件。我试过了：

```
D= date +%Y%m%d%t
cp -ru /home/$line/Documents/Crashes/A.log.$D* /home/$USER/Documents/Todayslogs 
```

它拉动了一切。也尝试找到没有运气...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:13:08.060

将其更改为：

```
D=$(date +%Y%m%d%t) 
```

语法是`$(...)`“命令替换”。在此示例中，它将打印到 stdout 的任何内容`date +%Y%m%d%t`与保存到`D`. （注意：命令替换不包括 stderr 输出，除非您明确添加`2>&1`！）

这样做`D= date +%Y%m%d%t`只会将日期信息打印到标准输出，而不会将其保存为`D`您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:14:13.777

你从来没有设置`D`变量，你只运行了 date 命令；

```
$ D= date +%Y%m%d%t
20121026
$ echo $D
<... nadda ...> 
```

而是这样做：

```
$ D=$(date +%Y%m%d%t)
$ echo $D
20121026 
```

# jsp - 为什么从 JSF2.0 开始，Facelets 优于 JSP 作为视图定义语言？

> ID：13092161
> 
> 赞同：36
> 
> 时间：2012-10-26T18:10:56.483
> 
> 标签：jsp, jsf, jsf-2, facelets

我看到从 JSF2.0 开始，Facelets 视图定义语言是首选的视图定义语言，而不是 JSP，它已被弃用为旧式后备。我想了解为什么从 JSF2.0 开始，Facelets 优于 JSP 作为视图定义语言？我知道 JSP 也有一些模板行为，这是采用 Facelets 的主要驱动点。

PS：我已经通过stackoverflow上[的这篇文章](https://stackoverflow.com/questions/4815722/jsf-vs-facelets-vs-jsp)，但我认为它不能回答我的问题。因此将其作为一个单独的问题发布。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-26T19:22:42.993

诚然，JSP 有*一些* [模板](https://stackoverflow.com/questions/1296235/jsp-tricks-to-make-templating-easier)功能，但在 JSF 中使用 JSP 的最大缺点是 JSP 一遇到模板文本内容就会写入响应，而 JSF 想用它做一些前/后处理。在 JSF 1.0/1.1 中，以下 JSF 代码

```
<h:outputText value="first"> second <h:outputText value="third"> fourth 
```

会产生

> 第二 第四 第一 第三

这是在 JSF 1.0/1.1 时代[令人头疼](https://stackoverflow.com/questions/5474178/jsf-facelets-why-is-it-not-a-good-idea-to-mix-jsf-facelets-with-html-tags)的问题。开发人员需要将模板文本`second`与`fourth`上面示例中的和`<f:verbatim>`在所有地方的标签中进行包装。JSF 1.2 已经通过改进的视图处理程序解决了这个问题，该处理程序解析 JSP 而不是执行它，但它在底层仍然非常笨拙，因为 JSP 语法不像 XML 那样“格式良好”。强烈需要基于 XML 的视图技术，以便可以使用基于 SAX 的高效解析器。Facelets 诞生了（在 Ken Paulsen 的“JSFTemplating”中）。

此外，统一的 EL`#{}`不能在 JSP 模板文本中使用，从而导致丑陋的（对于初学者来说[不直观](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el/4812883#4812883)）`${}`和`#{}`. 此外，JSTL 在 JSP 上的 JSF 1.x 中不能用作[视图构建时间标记](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense/3343681#3343681)。此外，带有事物的 JSP 语法`<% %>`是老派，在 JSP 中嵌入原始 Java 代码的可能性被认为是一种[非常糟糕的做法](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)，它打破了[MVC 意识形态](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/3542297#3542297)。

总而言之，从 JSF/MVC 的角度来看，JSP 简直丑陋而糟糕，而 Facelets 简直就是干净而令人敬畏。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-16T07:32:49.520

我在网上找到了以下答案。

[JSFToolbox 文档第 3 章](http://www.jsftoolbox.com/documentation/facelets/03-FaceletsConcepts/comparing-facelets-and-jsp.jsf)：

> **JSP 编译时开销**
> 
> 每次编辑、保存和重新加载 JSP 页面时，服务器的 JSP 编译器都会生成 Java servlet 代码并将其编译成 servlet。这称为 JSP 转换过程，通常需要 1-2 秒，具体取决于服务器性能。
> 
> **Facelets XML 编译**
> 
> 与 JavaServer Pages 不同，Facelets 页面不会编译成 servlet。由于 Facelets 页面与 XML 兼容，因此 Facelets 框架使用基于 SAX 的快速编译器来构建视图。此外，Facelets 可以配置为立即检测和呈现对页面的更改，从而加快 JSF 开发周期。

[来自 Ian Hlavats 的书“JSF 1.2 组件”，第 49 页](https://www.packtpub.com/sites/default/files/7627-developing-jsf-components-sample-chapter-2-facelets-components.pdf)：

> 在 JSF 应用程序开发过程中，我们经常对 JSF 页面进行更改，从而导致频繁地重新编译 JSP 页面，并且这种编译时开销可能会增加。
> 
> Facelets 页面是简单的 XML 文档（XHTMl 页面），它们从不编译为 servlet，而是使用基于 SAX 的编译过程为我们的视图构建 UI 组件树。因此，与 JSP 相比，Facelets 更快，因为它没有 JSP 转换开销。

# pycharm - Pycharm 新的目录控制台命令

> ID：13092165
> 
> 赞同：1
> 
> 时间：2012-10-26T18:11:03.270
> 
> 标签：pycharm

我对 Python 编程比较陌生，我渴望学习更多 Python 编程。我有一个包含两个包的 Pycharm 项目，我想使用 Python 控制台在 Pycharm 内置的控制台上使用 Python 命令将新目录和新 Python 文件创建到目录中。

请有人告诉我在包文件夹中创建新目录的 Python 控制台命令以及为目录创建新 Python 文件的命令。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-16T14:08:21.050

您在 Python 控制台中运行的只是 Python 代码。如果您希望能够创建目录和文件，您将使用创建目录和文件的 python 代码。这是创建目录和创建文件的 Python 控制台命令（以及输入命令后的输出）。

```
import os
os.getcwd()
'/Users/john/test'
os.mkdir('temp')
open('temp.txt', 'a')
<_io.TextIOWrapper name='temp.txt' mode='a' encoding='UTF-8'> 
```

`Import os`使操作系统python函数可用

`os.getwd()`显示当前工作目录

`os.mkdir('temp')`创建一个名为 temp 的新目录

`open('temp.txt', 'a')`创建（并打开）一个名为 temp.txt 的新文件

以上所有操作都是在不检查目录或文件是否存在的情况下完成的。

这是您要求的 Python 控制台的解决方案，但是，您还可以从 PyCharm 中访问终端，并且终端允许您输入 Bash/DOS 命令来创建目录。选择查看 -> 工具窗口 -> 终端或 Alt-F12 以显示终端窗口。

# javascript - 纯 Javascript 显示不会使事物不可见

> ID：13092167
> 
> 赞同：0
> 
> 时间：2012-10-26T18:11:05.427
> 
> 标签：javascript, html

我试图在页面加载时使用纯 Javascript 使表格中的一行不可见。我的代码看起来像这样：

```
<script language="javascript" type="text/javascript">
     window.onload = function () {
         document.getElementById("AmzDivSettings1").style.display = 'none';
     }</script> 
```

然后

```
<tr id="AmzDivSettings1"> ... </tr> 
```

它不起作用，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:13:06.853

您想隐藏行元素 [tr]，而不是单元格 [td]。

# uitableview - 重新排序后，uitableview 中的单元格在滚动时位于 customheaderviews 上方

> ID：13092170
> 
> 赞同：3
> 
> 时间：2012-10-26T18:11:21.600
> 
> 标签：uitableview, scroll

我创建了一个 UITableViewController。在其中，我创建了一个自定义视图，该视图从 viewForHeaderInSection 为标题返回。如果我进入编辑模式并重新排序单元格，则重新排序的单元格在滚动期间浮动在自定义标题视图上方。这将一直持续到使用 [tableview reload] 重新加载 tableview。就好像单元格在从重新排序中删除后被移动到视图堆栈的顶部。

我已经解决了 moveRowAtIndexPath 方法末尾的 [tableView reload] 问题，但我想知道这是否是预期的行为。我无法在文档或谷歌搜索中找到任何关于它的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:27:01.700

我认为这是 UITableView 中的一个错误。如果您在 moveRowAtIndexPath 方法期间检查表的视图层次结构，您可以看到有问题的单元格靠近层次结构的顶部 - 这是为了在您拖动单元格时支持它的外观。

您也不能在此方法中简单地将视图移动到层次结构的后面，因为它上面有一个动画，似乎覆盖了它。

我不习惯从数据更新方法中重新加载行，所以我的解决方案是包含以下代码：

```
UITableViewCell *movedCell = [tableView cellForRowAtIndexPath:fromIndexPath];
double delayInSeconds = 0.4;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [tableView sendSubviewToBack:movedCell];
}); 
```

0.4 秒的延迟是为了让单元格上的动画有时间完成。

[雷达： http](http://openradar.appspot.com/radar?id=2681402) ://openradar.appspot.com/radar?id=2681402

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T16:18:03.100

这是标题视图上的自动调整大小标志。在 xib 中删除它们。

# python - python中的记忆，一个错误

> ID：13092172
> 
> 赞同：2
> 
> 时间：2012-10-26T18:11:44.533
> 
> 标签：python, algorithm, runtime-error

我目前正在学习算法课程。我在 python 中测试了很多，包括动态编程。这是自下而上的杆切割实现的实现。

由于一个错误，它不起作用。python中是否有全局设置，我可以将默认数组索引更改为1而不是0？或者有人可以为我提供一个更好的策略来克服我遇到一百万次的错误。超级烦人。

```
def bottom_up_memo_cut_rod(p,n):
    r = [ 0 for i in range(n) ]
    r[0] = 0
    for j in range(n):
        q = -1
        for i in range(j):
            q = max(q, p[i] + r[j-i])
        r[j] = q
    return r[n]

bottom_up_memo_cut_rod([1,5,8,9], 4) 
```

在这种情况下，答案应该是 10，将 4 切割成 (2,2) 会产生 10 的最高价格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:20:30.583

Python中有几件事可以帮助你。内置`enumerate`是一个伟大的。

```
for idx, val_at_idx in enumerate(aList):
  # idx is the 0-indexed position, val_at_idx is the actual value. 
```

如果绝对必要，您还可以使用列表切片和 enumerate 来移动索引：

```
for idxOffBy1, val_at_wrong_idx in enumerate(aList[1:]):
  # idx here will be 0, but the value will be be from position 1 in the original list. 
```

但实际上，您不想尝试更改解释器以使列表从索引 1 开始。您想调整算法以使用该语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T19:11:19.527

在 Python 中，您通常可以完全避免使用索引。该算法可以这样写：

```
def bottom_up_memo_cut_rod(p,n):
    r = [0]
    for dummy in p:
        r.append(max(a + b for a, b in zip(reversed(r),p)))
    return r[-1]

print bottom_up_memo_cut_rod([1,5,8,9], 4)
#10 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T18:20:35.120

在您的情况下，一对一是`r[n]`where的结果`len(r)==n`。你要么写`r[n-1]`，或者，更优选地，，`r[-1]`这意味着“的最后一个元素`r`”，同样的方式`r[-2]`将意味着“倒数第二个”等等。

无关，但有用：`[ 0 for i in range(n) ]`可以写成`[0] * n`

# visual-studio-2010 - 卸载后仍显示 ReSharper 显示项目

> ID：13092179
> 
> 赞同：0
> 
> 时间：2012-10-26T18:12:23.910
> 
> 标签：visual-studio-2010, resharper, resharper-6.1

从 VS 2010 卸载 ReSharper 6.1 后，ReSharper 显示项目仍显示在字体和颜色设置中。我该如何删除这些？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:45:58.103

如果（卸载）安装程序出现问题，请尝试以下步骤：

1.  卸载所有 R# 版本。

2.  从下面删除任何剩余的 R# 文件`"C:\Program Files (x86)\Microsoft Visual Studio <version>\Common7\IDE\Extensions\JetBrains"`

3.  从下面删除任何剩余的 R# 文件`"%LOCALAPPDATA%\Microsoft\VisualStudio\<version>\Extensions\JetBrains"`（极不可能存在）。

4.  对于 VS11，触摸`"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\extensions.configurationchanged"`文件。

5.  运行`devenv.com /Setup`。

6.  对于 Fonts'n'colors 问题，请尝试清理`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\<version>\FontAndColors\Cache`注册表项。

# jquery - $.ajax 调用收到 Resource not Found 但 MVC 调试说路由被命中？

> ID：13092181
> 
> 赞同：0
> 
> 时间：2012-10-26T18:12:28.180
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我将尝试尽可能详细地解释我的设置。

1）我正在使用一个区域（MVC 4）。这是文件夹和文件设置： ![在此处输入图像描述](../Images/f59fae4c79eadbc2f9040f7ad877dd60.png) 2）我默认直接解析到我的区域（不是根视图中的 Home 控制器）（我真的不需要与这个问题无关的 Home 控制器，只是一些背景信息) 3) 我的 global.asax 路由注册如下所示：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RouteConfig.RegisterRoutes(RouteTable.Routes);

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    } 
```

4）我的 route.config 看起来像这样：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    // Purposely not going to use the Home Controller (just a convention I want in place)
    routes.MapRoute("Default", "", new { area = "Search", controller = "Member", action = "Index", id = UrlParameter.Optional }).DataTokens.Add("area", "Search");
} 
```

5）我所在地区的注册路由如下：

```
 public class MemberAreaRegistration : AreaRegistration
    {

        public override string AreaName
        {
            get { return "Search"; }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute("Search_Member_GetMemberByContractNumber", "Search/Member/{id}", defaults: new { controller = "Member", action = "GetMemberByContractNumber", id = UrlParameter.Optional });
            context.MapRoute("Search_Default", "Search/{controller}/{action}/{id}", defaults: new { controller = "Member", action = "Index", id=UrlParameter.Optional});
        }

    } 
```

6）我有一个执行此操作的控制器：

```
[HttpGet]
public JsonResult GetMemberByContractNumber(int contractNumber)
{
    Member memberDto = MemberCRUD.RetrieveMember(contractNumber);

    JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);

    Json(JsonConvert.SerializeObject(member));

    return member;
} 
```

7) 我有一个试图向该操作发送 ajax 请求的视图：

```
// Get the results & Bind to grid
$(function () {
    var members = [];
    $.getJSON('Search/Member/26049', function (data) {
        members = data;
        grid = new Slick.Grid("#searchResults-Grid", members, columns, options);
    });
}); 
```

**什么有效**：我可以运行该站点，它会触发我的会员 Index() 操作并加载会员的索引视图。这不是这里的问题。

**问题是什么**：我无法解决这个问题......它在 jQuery getJSON 请求“搜索/成员/26049”中找不到我的控制器和操作

** 我在 FireBug 中遇到的错误**：

```
http://localhost/OurappName/Search/Member/26049 404 Not Found
        19ms
in the response:
<b> Requested URL: </b>/ballysearch/Search/Member/26049<br><br> 
```

**我试过**的：最初在我所在地区的路线配置中，我在最后有第一行，所以尝试将它向上移动。我说的是 context.MapRoute("Search_Member_GetMemberByContractNumber", "Search/Member/{id}"..我在默认路线之后就有了。然后切换了，因为我认为它总是会明显达到我的默认路线..在这种情况下，这实际上应该只是最后的“包罗万象”路线。

我尝试了 getJSON 中 url 的几种变体，例如：'Member/26049'

我*很确定*我的控制器的设置方式很好。

我知道这可能是路线问题，但我不明白它是什么。

更新：

这是路由调试结果

![在此处输入图像描述](../Images/33d45338db9299f4e5646b573e33c110.png)

更新：

现在看起来也许我一直在想这是一个路线问题，但至少现在没关系，所以不确定这个错误的“资源”是什么意思

这是我现在似乎在我的 MemberAreaRegistration.cs 中工作的路线

![在此处输入图像描述](../Images/19a2c46f82debe89c5617b7a4fe22eed.png)

context.MapRoute("Search_Member", "Search/Member/{contractNumber}", new { controller = "Member", action = "GetMemberByContractNumber", contractNumber = UrlParameter.Optional }); context.MapRoute("Search_Default", "Search/{controller}/{action}/{id}", new {controller="Member", action = "Index", id = UrlParameter.Optional });

现在不知道为什么我会收到此资源错误。在 Firebug 中，有一些附加信息，但如果是这种情况，我仍然不知道我的控制器代码有什么问题，或者如果这也是一个问题，我仍然不知道我的 jQuery 代码有什么问题......我没有看到：

```
[HttpException]: The controller for path &#39;/OurAppName/Search/Member/1234&#39; was not found or does not implement IController. 
```

仍然对来自 firebug 的错误的更多看法：

![在此处输入图像描述](../Images/341441f9d40790434ca04b29336a9c66.png)![在此处输入图像描述](../Images/1ecb20e5cab98a2de5f1db13f0a93445.png)

**更新 --------------------------------------------------------** 2012 年 10 月 27 日：

**想将我当前的尝试详细信息发布到这一点**

我的路线在我的**Route.Config**中设置如下：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("favicon.ico");
        routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });
        routes.IgnoreRoute("{*staticfile}", new { staticfile = @".*\.(css|js|gif|jpg)(/.*)?" });
        routes.IgnoreRoute("{*robotstxt}", new { robotstxt = @"(.*/)?robots.txt(/.*)?" });

        // Purposely not going to use the Home Controller, we don't need it so hence the DataTokens to tell MVC to go straight to my Area called Search to look for the member controller for the default route when you first hit the View
        routes.MapRoute("Default", "", new { area = "Search", controller = "Member", action = "Index", id = UrlParameter.Optional }).DataTokens.Add("area", "Search");
    } 
```

我的区域的注册路线：

```
namespace OurApp.Web.Areas.Search.Views.Member
{
    public class MemberAreaRegistration : AreaRegistration
    {

        public override string AreaName
        {
            get { return "Search"; }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {

            context.MapRoute("Search_Member", "Search/Member/{contractNumber}", new { controller = "Member", action = "GetMemberByContractNumber", contractNumber = UrlParameter.Optional });
            context.MapRoute("Search_Default", "Search/{controller}/{action}/{id}", new {controller="Member", action = "Index", id = UrlParameter.Optional });
        }

    }
} 
```

最后我的整个控制器代码：

```
namespace OurApp.Web.Areas.Search.Controllers
{

    public class MemberController : Controller
    {

        public ActionResult Index()
        {
            return View();
        }

        [HttpGet]
        public JsonResult GetMemberByContractNumber(int contractNumber)
        {
            Member memberDto = MemberCRUD.RetrieveMember(contractNumber);

            JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);

            return Json(member, JsonRequestBehavior.AllowGet);

            return member;
        }

        [HttpGet]
        public ActionResult TestTheRoute(int daveIdTest)
        {
            return null;
        }
    }
} 
```

**1）**我的视图中没有开始表单标签。那是因为我只是想测试这个 $.ajax() 函数，稍后我将添加一个表单并从某个事件调用该调用。所以没关系，我还没有表单元素，对吧？我只是在我的视图顶部打开了 $.ajax 调用，因此它会自行触发。

**2)**正如您在上面看到的那样，它似乎可以到达我的路线。我只是想知道这是否是我在回调方面形成我的 $.ajax() 调用的方式，并且可能与我的控制器方法不完全正确有关？我正在从我的行动中返回 json，但我可以假设我拥有它。我不知道，除非我可以在返回 json 的操作方法中尝试不同的方法。我不知道我的 $.ajax 调用是否需要在回调中指定预期的返回类型，因为我只是在输入此内容时考虑过它，但我也会检查一下。

例如，当我像这样设置 $.ajax 调用时（见下文），我得到了回复，所以我认为这告诉我 IIS 能够在它到达我的路由和控制器后发送响应。所以我认为这是我的操作方法没有返回正确的 json 对象，不太确定，但在这一点上，如果来自 Phil Haack 的路由调试器显示它肯定会到达我的路由，那么它不可能是...... ajax 呼叫正在击中我的路线。

```
 $.ajax({
        url: 'OurApp/Search/Member/26049',
        type: "GET",
        dataType: "json",
        success: function (response) 
        {
            alert('we got a mother fing response!');
            grid = new Slick.Grid("#memberSearchResults-Grid", response.data, columns, options);
        },
        error: function (e) { alert('response error: '); }
    }); 
```

所以我收到了上面错误案例的警报，它正在命中这个。我不知道我是否总是会得到响应...可能我认为 IIS 会响应失败的请求和成功的路由请求...？

我尝试附加到工作进程，然后在该操作方法的第一行设置调试点后刷新页面，该操作方法在我的控制器中返回 json，但该行从未被命中。我不知道为什么。我无法获得任何调试点，不是

这是来自 firebug 的请求标头，仅供参考：

```
GET http://localhost/OurApp/Search/Member/26049 HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Proxy-Connection: keep-alive 
```

这是一些响应，有趣的是，即使它显示我的路线在我的控制器上被击中，这个错误说不，它没有击中你的控制器，所以我现在对 wtf 正在发生的事情以及在哪里感到目瞪口呆：

HeadersResponseCacheHTML

无法找到该资源。正文 {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} p {font-family:"Verdana";font-weight:normal;color:black;margin-顶部：-5px} b {字体系列：“Verdana”；字体重量：粗体；颜色：黑色；边距顶部：-5px} H1 { 字体系列：“Verdana”；字体重量：正常；字体-大小：18pt；颜色：红色 } H2 { 字体系列：“Verdana”；字体重量：正常；字体大小：14 磅；颜色：栗色 } 前 {字体系列：“Lucida 控制台”；字体大小：。 9em} .marker {字体粗细：粗体；颜色：黑色；文本装饰：无；} .version {颜色：灰色；} .error {margin-bottom：10px；} .expandable { 文本装饰：下划线；字体粗细：粗体；颜色：海军蓝；光标：手；}

```
<body bgcolor="white">

        <span><H1>Server Error in '/OurApp' Application.<hr width=100% size=1 color=silver></H1>

        <h2> <i>The resource cannot be found.</i> </h2></span>

        <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

        <b> Description: </b>HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable. &nbsp;Please review the following URL and make sure that it is spelled correctly.
        <br><br>

        <b> Requested URL: </b>/OurApp/Search/Member/26049<br><br>

        <hr width=100% size=1 color=silver>

        <b>Version Information:</b>&nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272

        </font>

</body> 
```

以及此请求的相关 mvc 路由调试器结果：

![在此处输入图像描述](../Images/dfaa0dc12b450790ddf55d14a4813976.png)

让我感到惊讶的是，它显示“路径的控制器'/OurApp/Search/Member/26049; 未找到或未实现 IController。” 但是如果路由调试说它正在被击中，wtf？我迷路了。同样，我无法调试它，所以它告诉我它没有击中我的控制器或控制器动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:48:04.717

您的操作是在寻找一个参数`contractNumber`，而不是`id`.

从此更改您的路线：

```
context.MapRoute("Search_Member_GetMemberByContractNumber", 
    "Search/Member/{id}", 
    defaults: new { 
        controller = "Member", 
        action = "GetMemberByContractNumber", 
        id = UrlParameter.Optional }); 
```

对此：

```
context.MapRoute("Search_Member_GetMemberByContractNumber", 
    "Search/Member/{contractNumber}", 
    defaults: new { 
        controller = "Member", 
        action = "GetMemberByContractNumber", 
        contractNumber = UrlParameter.Optional }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:06:29.950

我建议将 ajax 请求的 URL 存储在可以使用 Razor 并使用`@Url.Action()`. 这将确保您获得有效的路线。例如，如果`$.get`是单击链接`href`的结果，我将链接的 设置为我的视图中的结果`@Url.Action()`，然后执行`$.getJSON($(this).attr('href'), ...);`. 如果您稍后更改路由结构，它也会有所帮助；您无需通过 JavaScript 搜索和替换...

请求示例：

看法：

```
<div data-search-url='@Url.Action("Index", "Member", new { area = "Search", id = 26049 })' id="whatever">...</div> 
```

JavaScript：

```
var members = []; // Note that this will not be populated until $.getJSON returns
$(function () {
    $.getJSON($('#whatever').data('search-url'), function (data) {
        members = data;
        var grid = new Slick.Grid("#searchResults-Grid", members, columns, options);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T04:45:13.017

总是很愚蠢的事情对吧？我调试了或者终于可以调试了，单步执行。什么也没看到，但后来我注意到我的 MemberAreaRegistration 的命名空间被放置在我区域内的 Views 文件夹中。我将它移到 Area/Search 的根目录，现在它似乎正在找到我的控制器，因为名称空间现在更改为 Areas.Search

# php - 如何制作类似facebook的登录系统

> ID：13092186
> 
> 赞同：-1
> 
> 时间：2012-10-26T18:12:46.197
> 
> 标签：php, security, cookies

我有一个询问，现在这对我来说是一个严重的头脑风暴问题。首先做一件事，从手机访问 m.facebook.com，然后登录，然后从计算机登录并从该计算机更改密码，在更改密码时，系统会询问您是否取消对您的设备的身份验证以前登录过。如果你选择让他们登录，然后再次从手机打开fb，那么你不需要再次登录，现在问题是如何？因为如果 fb 不将散列密码存储在 cookie 中，那么它存储了什么并且它是安全的？有人知道这个登录认证系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T01:13:59.213

FB 可能正在使用一个寿命很长的 cookie。此 cookie 的值是用于从数据库中提取信息的大随机数。

将密码哈希存储在 cookie 中是一个非常愚蠢的漏洞，以至于仅仅阅读它就伤害了我的眼睛。 [它也是我在野外利用的东西](http://www.exploit-db.com/exploits/12510/)。

# mysql - Ruby Mysql 无法插入特殊字符

> ID：13092189
> 
> 赞同：0
> 
> 时间：2012-10-26T18:12:53.733
> 
> 标签：mysql, ruby, encoding

使用 ruby​​ 的 mysql gem，我将一个新行插入到一个表中，该表具有编码 utf8_spanish_ci。

这是我正在执行的代码

```
require 'mysql'
con = Mysql.new(#connecionparameters)
rs = con.query("INSERT INTO `qubi_horoscopo`.`signos` (`name`) VALUES ('acción')") 
```

当我查询表时，我得到以下结果：

> 身份证名称
> 
> 1 个

我已经检查过我在数据库、表和列中使用了相同的排序规则。所以我不知道出了什么问题。

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:51:12.260

我已经解决了这个执行

```
con.query("SET NAMES UTF8") 
```

就在我的插入查询之前。

我希望这可以帮助任何有同样问题的人。我不知道这是否是最好的解决方案。

# java - 变量类型清晰的 Java 命名约定

> ID：13092191
> 
> 赞同：0
> 
> 时间：2012-10-26T18:12:57.090
> 
> 标签：java, coding-style, naming-conventions

我是核心 Java 的新手，所以我试图从正确的方向开始。

我正在尝试确定是否存在使用“*类型缩写*”进行变量命名的公认约定。

例如

```
pulic class ShirtExample {

// String variables 

String foo = new String("String Variable");

//vs

String strFoo = new String("String Variable");

    // Array variables

    Shirt [] shirts = {
        new Shirt(),
        new Shirt(),
        new Shirt()
    };

//vs 

    Shirt [] arrShirts = {
        new Shirt(),
        new Shirt(),
        new Shirt()
    };

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:16:57.233

我会远离任何命名变量的约定，尤其是匈牙利符号等。这些名称应该代表您存储内容的意图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T18:25:36.787

我唯一一次看到与类型相关的命名约定是在以前的雇主那里，它不是针对 Java 的。

在某一时刻，我确信在变量名中包含类型信息是有用的，但在我个人看来，那个时代已经过去了。正如 tjg184 在他的回答中提到的那样，名称应该描述变量所包含的内容。遵循该建议将准确地传达类型，而无需为 99% 的变量明确编码。对于其他一切，一个好的 IDE（或者如果你正在使用类似 VIM 的东西进行快速文本搜索）会告诉你变量类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:17:08.647

复数通常用于集合和数组，但在命名变量时通常不使用类型指示符

# virtualization - Xen 用于办公和网络启动

> ID：13092196
> 
> 赞同：0
> 
> 时间：2012-10-26T18:13:09.307
> 
> 标签：virtualization, xen, hypervisor

我试图了解 Xen 是否能满足我的需求：

我需要一个 Windows 7 映像，我可以将其复制到不同的机器（具有不同的硬件），以便为办公室中的每个新条目进行默认安装并更快地更换。

是否可以为此使用管理程序？

是否可以使用网络引导以及管理程序而不是在每台机器上安装 Xen？

编辑：我可以使用多个显示器吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:10:12.000

当且仅当您在网络上的每台机器上都安装了 Xen 时，这可能不是一个好主意。Xen 和其他类型 1 管理程序通常用于将高端服务器多路复用到一组虚拟机中。Xen 还以其不适用于 Windows 的准虚拟化技术而闻名。

您有没有想过 VDI（虚拟桌面基础架构）解决方案？它使您能够在一台机器上拥有所有操作系统并将桌面传输到客户端。

# android - 使用 jquery.xdomainajax.js 的 html 解析在 PhoneGap 上不起作用

> ID：13092208
> 
> 赞同：3
> 
> 时间：2012-10-26T18:13:54.050
> 
> 标签：android, ajax, jquery, cordova, html-parsing

我正在使用 Phonegap 构建一个移动应用程序，使用 jquery.xdomainajax.js 来解析来自 url（另一个域）的 html 元素。我正在关注的教程在[这里](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)。

我的应用程序在网络浏览器中运行良好，但是当我在 android 设备上尝试时没有运行。

我试过改变**super.setIntegerProperty ("loadUrlTimeoutValue", 70000);** 来自**MyPhoneGapActivity.java**，但仍然失败。

这是我的**index.html**

```
 <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
 <script type="text/javascript" charset="utf-8" src="jquery.mobile/jquery-1.7.2.min"></script>
 <script type="text/javascript" src="js/jquery.xdomainajax.js"></script>
 <script type="text/javascript" src="js/main-link.js"></script>

    <ul id="jquery_snippets">
      <li>Gathering News...</li>
    </ul> 
```

这是我的**main-link.js**

> $(文档).ready(函数() {
> 
> $.get('http://example.com', function(res) { $(res.responseText).find('.art-block2 h3').each(function() { var anchor = $(this) .children('a:last'); jQuery('', { html: jQuery('', { href: anchor.attr('href'), text: anchor.text() })
> }).appendTo($ ('#jquery_snippets')); });
> 
> $('#jquery_snippets li:first').remove(); }); });

有什么问题？（我使用的是phoneGap 1.9.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:04:28.307

您是否创建了域白名单？

[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)

# ruby-on-rails-3 - Rails errors.full_messages 渲染方括号

> ID：13092214
> 
> 赞同：1
> 
> 时间：2012-10-26T18:14:19.283
> 
> 标签：ruby-on-rails-3

我正在`user#update`使用以下 HAML 循环遍历错误：

```
- if @user.errors.any?
  .alert.alert-error
    %ul
      = @user.errors.full_messages.each do |msg|
        %li= msg 
```

但是，我不仅显示消息，还得到方括号：

`First name can't be blank ["First name can't be blank"]`

我究竟做错了什么？

**编辑：**

如果我这样做，`p msg`那么控制台尾部*仅*显示消息，但在`<li>`括号内仍会呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:37:35.540

我想到了。

该行：

`= @user.errors.full_messages.each do |msg|`

应该阅读：

`- @user.errors.full_messages.each do |msg|`

Haml 在循环的基础上打印出数组。

# android - How to show the date difference in days?

> ID：13092216
> 
> 赞同：1
> 
> 时间：2012-10-26T18:14:36.843
> 
> 标签：android, date

I need to get the actual date and minus the date from the value in the database, the date now is `now` and the date in the database is `this.vencimento`.

```
 public boolean getDiasVencido() {
    boolean diasvencido = false;                

    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
    Date datahora = null;       
    try {
        datahora = (Date) formatter.parse(this.vencimento);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Date now = new Date();      
    if(datahora.compareTo(now) < 0 ) { 

        long diff = "DATE NOW - DATE FROM DATABASE (this.vencimento)";
        long days = diff / (24 * 60 * 60 * 1000);

        diasvencido = true; 

    }
    return diasvencido;
} 
```

the variables setted in the class:

```
 public class classetitulo {

private String documento;
private String vencimento;
private Double valor;
private Double multa;
private Double juros;

public classetitulo() {}

public classetitulo(String documento, String vencimento, Double valor, Double multa, Double juros) {
    this.documento = documento;
    this.vencimento = vencimento;
    this.valor = valor;
    this.juros = juros;
    this.multa = multa;
} 
```

I don't know much how to do it. thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:46:55.757

尝试这个：

`this.diasvencido = Integer.parseInt(""+(((now.getTime() - datahora.getTime()) / (1000 * 60 * 60 * 24))));`

它将及时获取日期，并将按天计算，将结果提供给 Days。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:08:39.973

你可以试试这个。这是如何计算到现在已经过去了多少天：

```
long now = System.currentTimeMillis();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
try {
     long dataHora = formatter.parse(this.vencimento).getTime();
     long duration = Math.abs(now - dataHora);
     long diff = duration / DateUtils.DAY_IN_MILLIS;
}
catch (ParseException e) {
     e.printStackTrace();
} 
```

[从 API 级别 3 开始可以使用DateUtils](http://developer.android.com/reference/android/text/format/DateUtils.html)类，但您始终可以`DateUtils.DAY_IN_MILLIS`自己计算 的值。

# c# - Binding combobox in a DataGrid

> ID：13092218
> 
> 赞同：0
> 
> 时间：2012-10-26T18:14:46.410
> 
> 标签：c#, wpf, xaml, mvvm, datagrid

I've got the following model class set as the source of my `DataGrid`:

```
public class AttributesModel
    {
        public string Field { get; private set; }

        [Display(Name = "Sort Order")]
        public SortOrder SortBy { get; set; }

        [Display(Name = "Group By")]
        public string GroupBy { get; set; }

        [Display(Name = "Having")]
        public string Having { get; set; }

        [Display(Name = "Display Order")]
        public string DisplayOrder { get; set; }

        [Display(Name = "Aggregate By")]
        public Aggregate AggregateBy { get; set; }

        public enum Aggregate
        {
            None,
            Sum,
            Minimum,
            Maximum,
            Average
        }

        public enum SortOrder
        {
            Unsorted,
            Ascending,
            Descending
        }

        public AttributesModel(string field)
        {
            Field = field;
        }
    } 
```

I'm basically trying to bind the columns in my DataGrid, with the prpoerties above. They all work except for the `enums` which are set up for the combo box columns.

I cannot seem to get the comboboxes to bind. This is what I've tried:

```
<DataGridComboBoxColumn Width="Auto" CanUserResize="False" CanUserReorder="False" CanUserSort="False" IsReadOnly="False" ItemsSource="{Binding ElementName=AttributesWindow, Path=SortOrder}">
                    <DataGridComboBoxColumn.Header>Order</DataGridComboBoxColumn.Header>
                </DataGridComboBoxColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:27:39.407

ItemsSource 需要一个`IEnumerable`值，`enum`不是`IEnumerable`。尝试这个：

```
public IEnumerable<SortOrder> SortOrderList
{
    get { return Enum.GetValues(typeof(SortOrder)).Cast<SortOrder>(); }
} 
```

# asp.net-mvc - 多语言网站中本地化解析器的自动映射器映射

> ID：13092222
> 
> 赞同：2
> 
> 时间：2012-10-26T18:14:54.237
> 
> 标签：asp.net-mvc, localization, automapper, cultureinfo

我找到了一种基于活动文化使用 Automapper 进行语言映射的方法。

问题是是否可以构建一个通用解析器来映射所有使用解析器的模型。

在这种情况下，要映射的模型始终具有相同的属性 Id 和 Name（包括语言属性 Name_PT、Name_FR 和 Name_EN）：

// 楷模

```
public class MakeDto
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
    public string Name_PT { get; set; }
    public string Name_FR { get; set; }
    public string Name_EN { get; set; }
}

public class MakeViewModel
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
}

public class ModelDto
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
    public string Name_PT { get; set; }
    public string Name_FR { get; set; }
    public string Name_EN { get; set; }
}

public class ModelViewModel
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
}

public class FuelDto
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
    public string Name_PT { get; set; }
    public string Name_FR { get; set; }
    public string Name_EN { get; set; }
}

public class FuelViewModel
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

// 自动映射器配置文件

```
public class DtoToViewModelMappingProfile : Profile
{
    public override string ProfileName
    {
        get { return "DtoToViewModelMappings"; }
    }

    protected override void Configure()
    {
        CreateMaps();
    }

    private static void CreateMaps()
    {
        Mapper.CreateMap<ModelDto, ModelViewModel>();
        Mapper.CreateMap<MakeDto, MakeViewModel>()
            .ForMember(dest => dest.Name, opt => opt.ResolveUsing<CultureResolver>());
        Mapper.CreateMap<FuelDto, FuelViewModel>();
    }

    public class CultureResolver : ValueResolver<MakeDto, string>
    {
        protected override string ResolveCore(MakeDto makeDto)
        {
            switch(Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName.ToUpperInvariant())
            {
                case "FR":
                    return makeDto.Name_FR;
                case "EN":
                    return makeDto.Name_EN;
            }
            return makeDto.Name_PT;
        }   
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T07:15:40.333

您可以提取如下界面：

```
public interface ILocalizable
{
    string Name { get; set; }
    string Name_PT { get; set; }
    string Name_FR { get; set; }
    string Name_EN { get; set; }
}

public class FuelDto : ILocalizable
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
    public string Name_PT { get; set; }
    public string Name_FR { get; set; }
    public string Name_EN { get; set; }
} 
```

然后调整您的解析器，如下所示：

```
public class CultureResolver : ValueResolver<ILocalizable, string>
{
    protected override string ResolveCore(ILocalizable dto)
    {
        switch(Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName.ToUpperInvariant())
        {
            case "FR":
                return dto.Name_FR;
            case "EN":
                return dto.Name_EN;
        }
        return dto.Name_PT;
    }   
} 
```

# selenium - SpecFlow + Selenium-WebDriver：跨步骤共享 WebDriver？

> ID：13092224
> 
> 赞同：3
> 
> 时间：2012-10-26T18:15:04.740
> 
> 标签：selenium, webdriver, bdd, specflow

假设我有一个使用包含在两个不同类中的步骤的场景。有没有办法让他们两个都可以在`IWebDriver`不经过的情况下处理同一个实例`ScenarioContext.Current["webdriverVariableName"]`？

太丑了 有没有更清洁的方法？

我打算创建一个具有`public static IWebDriver`在每个场景开始时分配的属性的类，以便我的所有步骤都可以引用它，但我认为当我开始并行运行它们时这将不起作用，因为每个场景将覆盖全局驱动程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T17:43:29.880

Specflow 提供了依赖注入机制，因此您可以在步骤中注入 Web 驱动程序实例。

见[https://github.com/techtalk/SpecFlow/wiki/Context-Injection](https://github.com/techtalk/SpecFlow/wiki/Context-Injection)

请参阅“高级选项”部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T09:51:00.640

我刚刚开始使用 Specflow，但这似乎可行；

1.  创建一个以 IObjectContainer 作为构造函数并具有 BeforScenario 方法来创建 WebDriver 实例的类；

    ```
    [Binding]
    public class WebDriverSupport
    {
        private readonly IObjectContainer _objectContainer;

        public WebDriverSupport(IObjectContainer objectContainer)
        {
            _objectContainer = objectContainer;
        }

        [BeforeScenario]
        public void InitializeWebDriver()
        {
            var webDriver = DriverFactory.CreateDriver();
            _objectContainer.RegisterInstanceAs<RemoteWebDriver>(webDriver);
        }
    } 
    ```

2.  使用带有 RemoteWebDriver 的构造函数创建您的步骤类；

    ```
    [Binding]
    public class POCSteps
    {
        private readonly IdlWebDriver _driver;

        public POCSteps(IdlWebDriver driver)
        {
            _driver = driver;
        }
    } 
    ```

您的步骤步骤现在可以访问完全实例化的 WebDriver 对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:48:27.257

我的测试，目前运行良好的多线程 webdriver 实例，正在使用基本步骤定义类来保存驱动程序实例。所有步骤定义都继承自此，因此驱动程序可用于所有步骤。

```
namespace Project.StepDefinitions
{
    [Binding]
    public class BaseStepDefinitions
    {
        private const string CurrentPageKey = "Current.Page";
        public static IWebDriver Driver { get; set; }

        protected LogonPageModel LogonPage
        {
            get { return (LogonPageModel)ScenarioContext.Current[CurrentPageKey]; }
            set { ScenarioContext.Current[CurrentPageKey] = value; }
        }

        protected RegisterPageModel RegisterPage
        {
            get { return (RegisterPageModel)ScenarioContext.Current[CurrentPageKey]; }
            set { ScenarioContext.Current[CurrentPageKey] = value; }
        }
    }
} 
```

//////////////

```
namespace SpecDriver.StepDefinitions
{
    [Binding]
    public class LoginSteps : BaseStepDefinitions
    {
        [Given(@"I navigate to the homepage")]
        public void GivenINavigateToTheHomepage()
        {
            Driver.Navigate().GoToUrl(SettingsManager.BaseUrl);
        }
    }
} 
```

等等等等……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-01T16:26:51.363

只需使用返回驱动程序的静态属性创建一个新的分离类：

```
static class DriverProvider
{
    private static IWebDriver _driver;
    public static IWebDriver Driver
    {
        get
        {
            if (_driver == null)
            {
                _driver = new ChromeDriver();
                _driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(40);
                _driver.Manage().Window.Maximize();
            }
            return _driver;
        }
    }

} 
```

每次您需要对驱动程序做某事时，只需以这样的方式调用它：

```
SomeMethod(DriverProvider.Driver);
//
IWebelement e = DriverProvider.Driver.FindElement(By.XPath("you_XPath"));
e.Click();
// etc etc etc 
```

# wget - Can't resume "wget --mirror" with --no-clobber (-c -F -B unhelpful)

> ID：13092229
> 
> 赞同：19
> 
> 时间：2012-10-26T18:15:26.483
> 
> 标签：wget

I started a wget mirror with "wget --mirror [sitename]", and it was working fine, but accidentally interrupted the process.

I now want to resume the mirror with the following caveats:

*   If wget has already downloaded a file, I don't want it downloaded it again. I don't even want wget to check the timestamp: I know the version I have is "recent enough".

*   I *do* want wget to read the files it's already downloaded and follow links inside those files.

I can use "-nc" for the first point above, but I can't seem to coerce wget to read through files it's already downloaded.

Things I've tried:

*   The obvious "wget -c -m" doesn't work, because it wants to compare timestamps, which requires making at least a HEAD request to the remote server.

*   "wget -nc -m" doesn't work, since -m implies -N, and -nc is incompatible with -N.

*   "wget -F -nc -r -l inf" is the best I could come up with, but it still fails. I was hoping "-F" would coerce wget into reading local, already-downloaded files as HTML, and thus follow links, but this doesn't appear to happen.

*   I tried a few other options (like "-c" and "-B [sitename]"), but nothing works.

How do I get wget to resume this mirror?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-24T15:15:49.210

显然这有效：

> 已解决：Wget 错误“不能同时标记和破坏旧文件。” 发布于 2012 年 2 月 4 日 在尝试恢复通过 Wget 运行的站点镜像操作时，我遇到了错误“不能同时时间戳和破坏旧文件”。事实证明，同时设置 -N 和 -nc 标志运行 Wget 是不可能的，所以如果你想用 noclobber 恢复递归下载，你必须禁用 -N。-m 属性（用于镜像）本质上设置了 -N 属性，因此您必须从 -m 切换到 -r 才能使用 noclobber。

来自： http: [//www.marathon-studios.com/blog/solved-wget-error-cant-timestamp-and-not-clobber-old-files-at-the-same-time/](http://www.marathon-studios.com/blog/solved-wget-error-cant-timestamp-and-not-clobber-old-files-at-the-same-time/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-17T10:07:22.330

`-m`，根据[wget手册](https://www.gnu.org/software/wget/manual/wget.html)相当于这个更长的系列设置`-r -N -l inf --no-remove-listing`：只需使用这些设置而不是`-m`，并且不使用`-N`（时间戳）。

现在我不确定是否有办法让 wget 从现有的 html 文件中下载 url。可能有一个解决方案，我知道它可以将 html 文件作为输入并抓取其中的所有链接。也许您可以使用 bash 命令将所有 html 文件连接到一个大文件中。

我通过删除所有 html 文件解决了这个问题，因为我不介意只重新下载它们。但这可能不适用于每个人的用例。

# github - 如何在 Github 上提交并在 Basecamp 上自动标记完成？

> ID：13092233
> 
> 赞同：12
> 
> 时间：2012-10-26T18:15:53.483
> 
> 标签：github, version-control, basecamp

我有一个 GitHub 帐户和 Basecamp 帐户。我已经通过选择`Service Hooks Menu`和设置我的 GitHub 以使用 Basecamp 服务挂钩`select basecamp`。填写所有必需的表格并以绿色正确识别设置工作。

现在，我有`to-do list`我的 Basecamp 帐户，但我不知道如何在 GitHub 提交评论和 Basecamp 待办事项列表之间进行交互。

例如，我通过评论提交我的代码`fixing to-do list #123`。但是在 Basecamp 上，我找不到像我以前使用的常见项目管理一样的待办事项列表 ID（例如：#123）。我也找不到有关它的文档。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T19:32:23.117

我认为现有的 github-basecamp 集成（预定义服务挂钩中的集成）不可能做到这一点。所以，简而言之：如果我是正确的，它不能以[关闭 github 问题的方式](https://github.com/blog/831-issues-2-0-the-next-generation)完成，你似乎也指的是。

所以基本上你需要自己做一些编码。你有两个主要选择。

1.  您可以在您的 github 服务挂钩中启用[webhook](https://help.github.com/articles/testing-webhooks) ，让它向您选择的 url 发出 POST 请求，并在该 url 使用[basecamp API](https://github.com/37signals/bcx-api)来更新列表的脚本。[todolists api](https://github.com/37signals/bcx-api/blob/master/sections/todolists.md)看起来很简单：您应该阅读 POST 请求中的提交消息，然后使用`"completed": true`.

2.  另一种选择是从本地 repo 与 Basecamp API 交互。似乎有一些现有的工具，称为[gitcamp](https://github.com/pdclark/Gitcamp)，由某人制作，可以帮助解决这个问题 - 但是由于 api 非常简单，以及您的要求，您可以使用作为钩子安装的自定义脚本来完成您的工作，并且可能使用更轻松。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T02:45:06.873

我已经向 github 和 basecamp 支持发送了同样的问题，并在下面他们回答。

## 大本营支持：

> 对与 GitHub 集成的混淆感到抱歉！目前，这种集成只会将您所做的提交引入“进度”页面并进行回顾。这是该集成背后的代码，因此您可以更好地了解该服务挂钩的内容：
> 
> [https://github.com/github/github-services/blob/master/services/basecamp.rb](https://github.com/github/github-services/blob/master/services/basecamp.rb)
> 
> 如果您有任何其他问题，请告诉我，我很乐意为您提供帮助。度过一个美好的星期天！
> 
> Chase Clemons
> 37signals 客户关怀

## Github 支持：

> Basecamp 挂钩适用于新的 Basecamp 系统，仅添加到项目的事件日志中。旧版 Basecamp 系统有一个 Basecamp Classic 挂钩。看起来该钩子仅创建 Basecamp 消息。目前似乎没有人编写过任何与 GitHub 集成的 Basecamp 待办事项。我们的第 3 方挂钩是由其他用户贡献的，因为我们实际上并未使用任何这些服务（包括 Basecamp）。欢迎您为他们做出贡献：
> 
> [https://github.com/github/github-services](https://github.com/github/github-services)

所以目前很清楚（当我写这篇文章时），我们提交并推送到 Github 存储库的内容会自动显示在 Basecamp 进度页面上。

# android - AndEngine 和 Box2D 中的弹簧墙

> ID：13092234
> 
> 赞同：1
> 
> 时间：2012-10-26T18:16:02.553
> 
> 标签：android, box2d, andengine

我在我的游戏中使用 Box2D，但我希望有一个漂亮的弹簧墙，以便在触摸时推动玩家。它看起来像这样（在 3 帧中）： ![在此处输入图像描述](../Images/b854aaa5a333678522fbdf514c2d52a1.png)

问题：如何实施？我可以将墙壁效果附加到动画精灵吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:11:06.437

答案是：棱柱接头。我将图像分为两部分：静态和动态（移动条）。以下代码用于在我的问题中的图像中创建方向的棱柱关节：

```
//prismatic joint
    final Sprite springFrameT = new Sprite(pX, pY, mSpringFrameTRegion, getVertexBufferObjectManager());
    final Sprite springBarT = new Sprite(pX, pY + mSpringFrameTRegion.getHeight()-mSpringBarTRegion.getHeight(), 
            mSpringBarTRegion, getVertexBufferObjectManager());        
    mMainScene.attachChild(springFrameT);
    mMainScene.attachChild(springBarT);        
    mMapSprites.add(springFrameT);
    mMapSprites.add(springBarT);

    final Body springFrameBody = PhysicsFactory.createBoxBody(mPhysicsWorld, springFrameT, BodyType.StaticBody, FIXTURE_DEF);
    final Body springBarBody = PhysicsFactory.createBoxBody(mPhysicsWorld, springBarT, BodyType.DynamicBody, SPRING_FIXTURE_DEF);        
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(springFrameT, springFrameBody, false, false));
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(springBarT, springBarBody, true, true));

    final PrismaticJointDef prismaticJointDef = new PrismaticJointDef();        
    prismaticJointDef.initialize(springFrameBody, springBarBody, springFrameBody.getWorldCenter(), // new Vector2(springFrameT.getWidth(), springFrameT.getHeight()/2), 
            new Vector2(0, 1.0f)); 
    prismaticJointDef.lowerTranslation = -0.5f;
    prismaticJointDef.upperTranslation = 0.5f;
    prismaticJointDef.enableLimit = true;
    prismaticJointDef.enableMotor = true;
    prismaticJointDef.maxMotorForce = 100.0f;
    prismaticJointDef.motorSpeed = 100000f;
    prismaticJointDef.collideConnected = false;
    this.mPhysicsWorld.createJoint(prismaticJointDef); 
```

# c# - 在 Visual Studio 2012 C# 中更改表单的图标

> ID：13092235
> 
> 赞同：1
> 
> 时间：2012-10-26T18:16:06.830
> 
> 标签：c#, .net, visual-studio, icons

我正在尝试更改表单的图标（左上角）以及我看到小方块默认图标的任何其他地方。

我试过了：

*   单击表单，转到“窗口样式”并将图标更改为我计算机上的 .ico 文件 - 这表明它实际上发生了变化 - 但每当我调试或发布时 - 它仍然是原始的默认图标。
*   转到项目的属性-资源-将图标添加为资源-回到属性下的应用程序-将“图标和清单”更改为资源图标。它在浏览按钮旁边显示了新图标 - 但实际程序中没有任何变化。

**请注意**，首先我为表单选择的背景图像也没有应用 - 我将通过表单更改它 - 属性 - 外观 - 背景图像 - 从计算机中选择。会显示为已更改，但只要我调试或发布或不在那里。- 将它添加到我的资源中，然后从 BackgroundImage 浏览中选择它 - 从项目资源中选择它，然后它就可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:56:25.807

找到了一个解决方案：我的背景图像在我将它放在资源中之前无法正常工作。我去了 Form1_load 事件并添加了以下代码：

```
System.Drawing.Icon ico = Properties.Resources.Untitled;
this.Icon = ico; 
```

由于“Properties.Resources.Untitled”是我添加到资源中的图标。

现在似乎可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:21:26.440

您还需要使用 Form 的 Icon 属性更改每个表单上的图标。

# api - Test panoramio result

> ID：13092237
> 
> 赞同：0
> 
> 时间：2012-10-26T18:16:10.380
> 
> 标签：api, jquery, panoramio

I`m using panoramio api to show some pictures about a destination. Unfortuanatly for some destinations they dont have any images.

How could i test if panoramio doesnt have any results so i can display something else.

I tried replacing it usig livequery:

```
$('#div_attr_ex_photo').find('.panoramio-wapi-empty-img').livequery(function(){
    //replace panoramio with something
}) 
```

This work, but only if i click, or press a button ( probably when any event occures ). Can`t imagine why...

Any other method that does the job is welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T08:31:01.123

很简单，只要去panoramio网站，然后从panoramio网站打开世界地图。然后去指定的位置，需要经纬度。

然后您在地址栏中找到纬度和经度，例如在此地址中。

[http://www.panoramio.com/map#lt=32.739485&ln=70.491211&z=9&k=1&a=1&tab=1&pl=all](http://www.panoramio.com/map#lt=32.739485&ln=70.491211&z=9&k=1&a=1&tab=1&pl=all)

lt=32.739485 =>纬度 ln=70.491211 =>经度

这个 Panoramio JavaScript API 小部件围绕纬度/经度对创建一个边界框，然后返回这些边界内的所有照片。

另一种 Panoramio JavaScript API 小部件，您还可以在其中通过[示例和代码](http://codespk.blogspot.com/2013/10/panoramio-javascript-api-widget-example.html)更改背景颜色。

作曲时不显示，发表后显示。

```
<div dir="ltr" style="text-align: center;" trbidi="on">
<script src="https://ssl.panoramio.com/wapi/wapi.js?v=1&amp;hl=en"></script>
<div id="wapiblock" style="float: right; margin: 10px 15px"></div>
<script type="text/javascript">
var myRequest = {
  'tag': 'kahna',
  'rect': {'sw': {'lat': -30, 'lng': 10.5}, 'ne': {'lat': 50.5, 'lng': 30}}
};
  var myOptions = {
  'width': 300,
  'height': 200
};
var wapiblock = document.getElementById('wapiblock');
var photo_widget = new panoramio.PhotoWidget('wapiblock', myRequest, myOptions);
photo_widget.setPosition(0);
</script>
</div> 
```

# mysql - Mysql：if() 返回 >1 行的解决方法

> ID：13092239
> 
> 赞同：0
> 
> 时间：2012-10-26T18:16:15.573
> 
> 标签：mysql

有这个 where 子句：

第一个和第二个占位符？可以有值：`1 || NULL`
第三个占位符是动态添加的（数组）

```
IF(ISNULL(?),1,xy.id) IN 
     (IF(ISNULL(?),1,(SELECT x.id FROM x WHERE name IN (?)))) 
```

我需要这种类型的 isnull 检查，因为如果发送的数据为空，我希望该子句始终返回 true。基本上，如果数据为空子句`1 IN 1`，如果它不为空，则找到对应的 ID，但`if()`函数限制我只返回 1 个结果（不是一组）。除了在 php 中动态构建整个查询之外，我还有哪些选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:32:39.373

您可以在您的`where`条款中执行此操作

```
WHERE (ISNULL(?) OR xy.id IN (SELECT x.id FROM x WHERE name IN (?))) 
```

# c++ - Is move assignment via destruct+move construct safe?

> ID：13092240
> 
> 赞同：9
> 
> 时间：2012-10-26T18:16:25.810
> 
> 标签：c++, c++11, move-semantics, placement-new, move-assignment-operator

Here's a very easy way to define move assignment for most any class with a move constructor:

```
class Foo {
public:
  Foo(Foo&& foo);                     // you still have to write this one
  Foo& operator=(Foo&& foo) {
    if (this != &foo) {               // avoid destructing the only copy
      this->~Foo();                   // call your own destructor
      new (this) Foo(std::move(foo)); // call move constructor via placement new
    }
    return *this;
  }
  // ...
}; 
```

Is this sequence of calling your own destructor followed by placement new on the this pointer safe in standard C++11?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T18:21:01.930

仅当您永远不会从此类派生类型时。如果这样做，这会将对象变成怪物。不幸的是，该标准将此作为解释对象生命周期的示例。在现实世界的代码中这样做是一件非常糟糕的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:29:23.693

*从技术上讲，这个小例子中*的源代码是安全的。但现实情况是，如果你甚至看到 Foo 很有趣，你就会调用 UB。它非常不安全，完全不值得。像其他人一样使用交换——这是有原因的，因为那是正确的选择。此外，自我分配检查也很糟糕。

# bugzilla - How to reset vote count in bugzilla

> ID：13092241
> 
> 赞同：0
> 
> 时间：2012-10-26T18:16:29.217
> 
> 标签：bugzilla

I am using Bugzilla 3.6.3\. I would like to reset the vote count for a bug back to zero if the status is changed to UNCONFIRMED. What perl file and method do I do this in and how would I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:58:36.053

有几种不同的方法可以做到这一点，都涉及钩子：

[http://www.bugzilla.org/docs/3.6/en/html/api/Bugzilla/Extension.html](http://www.bugzilla.org/docs/3.6/en/html/api/Bugzilla/Extension.html)

有如何使用钩子的例子`extensions/Example/Extension.pm`。

我这样做的方法是使用`bug_end_of_update`钩子。

里面的代码`extensions/Example/Extension.pm`几乎正是你想要的。如果其中一项更改为 to`bug_status`且新值为`UNCONFIRMED`，则直接操作数据库将投票数重置为 0，即`DELETE FROM bugs WHERE bug_id = ?`

另一种方法是使用`object_end_of_update`，这与 基本相同`bug_end_of_update`，但您必须检查对象是否为`Bugzilla::Bug`.

# null - Is it better to check for null and return or check for non-null and continue?

> ID：13092243
> 
> 赞同：0
> 
> 时间：2012-10-26T18:16:37.517
> 
> 标签：null, null-check

Given the following basic class:

```
 public class MyClass
{
    private object m_memberVariable;

    public MyClass()
    {
       this.m_memberVariable = new object();
    }
} 
```

Which of the following implementations of the `test` method is better programming practice?

```
 private void test()
{
   if(this.m_memberVariable == null)
   {
       return;
   }
   System.Diagnostics.Debug.Write(this.m_memberVariable.ToString());
} 
```

Or

```
 private void test()
{
   if(this.m_memberVariable != null)
   {
       System.Diagnostics.Debug.Write(this.m_memberVariable.ToString());
   }
} 
```

In trying to recollect from a professor some 10 years ago, best practice for an if statement is to have the condition that is likely to be true more often than false (the latter). However, recently I have been using a trial of ReSharper, and their suggestion is the former. The `m_memberVariable` member is initialized at instantiation of the class and will likely be non-null for the life of the class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:23:28.770

我总是尝试检查非 null 并继续 - 然后您只有一个函数退出点，因此退出例程必须仅放置在二进制代码中一次，这会导致较小的结果。但我猜现代编译器无论如何都会优化它，谁知道呢。

# javascript - 触发单选按钮更改

> ID：13092244
> 
> 赞同：0
> 
> 时间：2012-10-26T18:16:39.883
> 
> 标签：javascript, jquery, event-handling

在表单上，​​我有一个显示输入字段的单选组。该字段是必需的，取决于它是否显示。用户可以拉回表单，并用适当的数据重新填充字段。我的问题是表单最初加载的无线电组设置为`no`（隐藏输入字段'），我想触发侦听器正在处理的事件。

这是事件处理程序 ( `#custodian is a < tr>`)：

```
$('.passCustodian').change(function(){
    $('#custodian').toggle();
}); 
```

这是重新填充表单字段的函数的一部分：

```
if(typeof data["custodianData"][0] != 'undefined'){
    $("#requestForm").fillInputs(data["custodianData"][0]);
    //$('.custodianYes').attr('checked',true);  //this didn't work either
    $('.passCustodian').trigger('change');
} 
```

您可以看到我尝试使用 jQuery 触发事件，但它不起作用。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:20:16.697

为此，您不需要触发事件。

用这个

```
if(typeof data["custodianData"][0] != 'undefined'){
    $("#requestForm").fillInputs(data["custodianData"][0]);
    $('#custodian').toggle();
} 
```

或者

```
if($('#custodianData').is(':checked')){
        $("#requestForm").fillInputs(data["custodianData"][0]);
        $('#custodian').toggle();
    } 
```

# sql - 存储搜索结果以备将来使用

> ID：13092245
> 
> 赞同：0
> 
> 时间：2012-10-26T18:16:40.067
> 
> 标签：sql

我有以下情况，其中搜索返回用户 ID 值列表（1、2、3、4、5、6 等）。如果要再次运行搜索，则保证在一段时间内结果会发生变化. 但是我需要存储搜索结果的实例以供将来使用。

我们有一个当前的实现（旧版），它使用条件为 search_id 创建一条记录，并将返回的每一行插入到具有关联 search_id 的不同表中。

```
table search_results
   search_id unsigned int FK, PK (clustered index)
   user_id unsigned int FK 
```

这是一种不可接受的方法，因为该表已经增长到数百万条记录。我考虑过对表进行分区，但要么我会有很多分区（1000s）。

我已经优化了搜索结果过期的现有表，除非它们在其他地方使用，因此所有搜索结果都在其他地方引用。

在当前模式中，我无法将结果存储为序列化数组或 XML。我希望有效地存储搜索结果信息，以便以后可以有效地访问它而不受记录数量的影响。

编辑：谢谢您的回答，我自己运行搜索没有任何问题，但是在这种情况下，搜索的结果集被用于收件人列表，它将被一遍又一遍地使用，存储的目的是正是为了在给定时间获得数据的快照。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:08:51.103

答案是**不存储查询结果**。这是一个可怕的主意！

*   它引入了[有状态，除非你](http://en.wikipedia.org/wiki/State_%28computer_science%29)*真的*（**真的**）需要它，否则这很糟糕。
*   它不可[扩展](http://en.wikipedia.org/wiki/Scalability)（正如您所发现的）
*   数据一经存储就过时了

正确的方法是修复您的查询/数据库，以便它可以快速运行。

如果您不能使用更好的 SQL 和/或索引等使查询更快，我建议使用 [lucene](http://lucene.apache.org)（或任何基于文本的搜索引擎）并将您的数据库非规范化到其中。Lucene 查询速度非常快。

我最近在一个正在做你正在做的事情的大型网站上做到了这一点：它在会话对象中缓存来自生产关系数据库的查询结果，以尝试加快查询速度，但它一团糟，而且不是无论如何都快得多 - 在我之前，一位实际上是个白痴的“高级”Java 开发人员（他的名字以 Jam.. 开头，以 .illiams 结尾）认为这是一个好主意。

我安装了 Solr（一个为 java 定制的 lucene 实现）并让 Solr 与关系数据库保持同步（使用工作队列），现在 Web 查询只需几毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:25:32.037

是否有理由需要存储每次搜索？您肯定想要为用户提供最新的信息吗？

我首先承认，这不是一个很好的解决方案。

*   在当前数据库旁边设置另一个数据库 [SYS_Searches]
*   保存脚本可以使用 SELECT INTO [SYS_Searches].Results_{Search_ID}
*   检索的脚本可以从匹配表中执行简单的 SELECT。

**好处：**

*   每个搜索都整齐地打包到它自己的表中，[最好在另一个数据库中]
*   检索查询很简单
*   检索时间应该很快，没有大量的表扫描。

**缺点：**

*   对于用户可以存储的每个 x 用户 * y 搜索，您将拥有一个表。

除非涉及使结果过期的管理或用户只能拥有 1 个缓存的搜索结果集，否则这可能会很快变得非常愚蠢。

不漂亮，但我想不出别的办法。

# ssas - SSAS 中度量组之间的父子关系

> ID：13092247
> 
> 赞同：1
> 
> 时间：2012-10-26T18:16:41.893
> 
> 标签：ssas, parent-child, mdx, olap, dimensions

我很难弄清楚我应该如何在 SSAS 中的度量组之间实现父子关系。本质上，我只是在尝试重新创建标准 SQL 连接，以便在使用子组中的键时可以在父组中查找度量。

例如，假设我有以下维度：

*   家长
*   孩子（FK：ParentID）
*   时间

我有以下测量组

*   ParentFact（键：ParentID、TimeID - 随着时间的推移与父级相关的度量）
*   ChildFact（键：ChildID、TimeID - 随着时间的推移与孩子相关的度量）

我没有为我的任何事实表创建任何特定维度。

最后，我只想运行这样的查询来列出我的子表中的度量值，这些度量值与我的父表中的度量值相连：

```
SELECT
    {
        [ChildMeasure]
        , [ParentMeasure]        
    } ON COLUMNS
    , [Child].Children ON ROWS
FROM
    [MyCube]
WHERE
    [Time].[100] 
```

运行此查询时，正确列出了子行，以及时间 ID 100 的适当度量值。不幸的是，**ParentMeasure**完全相同，并且似乎是时间 ID 100 时所有父母的该值的聚合。我希望此列显示来自每个孩子的关联父母在时间 ID 100 的值。

我在这里做错了什么？我是否需要为每个 FactTable 创建 FactDimensions，并以某种方式将它们关联起来？我应该在我的数据源视图中创建父级和子级之间的关联吗？这是否会使其成为雪花模式，我认为我应该避免这种模式？

附带说明一下，我的 ChildFact 表实际上包含 ParentID 作为度量之一，因为它位于数据源中的关系表上（可能是由于数据库开发人员之前的一些非规范化工作）。我应该删除我的事实表中实际上是 FK 的任何措施，还是我想要做的事情以某种方式需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:22:00.527

由于明显的粒度问题，我认为您不应该尝试创建单个 Fact 表。

我认为您应该使用现有的 FK 列在您的子事实和父维度之间的多维数据集定义中添加维度关系。

可能将 ParentID 作为度量的唯一有效用途是获得不同的计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T14:09:44.200

这里不需要创建两个事实。

1.  创建单个事实表（ParentID、ChildID、TimeID）
2.  创建 3 维 DimParent、DimChild、DimTime
3.  Fact 表的 FK 将参考各自的维度表
4.  另外，检查属性关系如何用维度切片事实

# php - how do I fix this negative lookbehind regex?

> ID：13092253
> 
> 赞同：1
> 
> 时间：2012-10-26T18:17:04.403
> 
> 标签：php, regex, actionscript

I want to capture only `136.50` in the following

```
 $136.50 (was $195.00) 
```

I'm trying to use a negative lookbehind in order not to group a price if it is preceded by another price. This is what I have:

`(?<!\$.+)\$(?<price>[\d.,]+)`

what am I doing wrong?

EDIT: I think the problem might be that I can't use a variable length string inside a lookaround, but I'm not sure how to construct the regex without one.

EDIT: There will sometimes be only one price, in which case I want to group that price. This is why I did not use a positive lookahead to confirm a price is the first price.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:30:19.853

不要使用否定的后视，只取第一个价格（在第一组中，如果有分数，可能在第二组中）。可能是这样的？

```
/^.*?\$([\d,]+)(\.\d\d)?/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:37:46.400

好的，所以我认为您也应该采取第一个价格：

这应该匹配所有价格，包括。成千上万的 koma，就像来自 owlstead 的这个 `/^.*?\$(\d{1,3}(?:,\d{3})*(?:\.\d+)?).*$/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:37:56.463

你可以使用这样的东西

```
/(\$\d*.\d*)(?!.\1)/ 
```

这将匹配第一组，而不是同一组

# git - Git repo：将我的烂摊子分解成整齐的分支

> ID：13092255
> 
> 赞同：0
> 
> 时间：2012-10-26T11:07:24.697
> 
> 标签：git, branch

我想玩一个项目，所以 git 克隆了它，并按照它的说明为我的配置创建了一个本地分支（我想这样用户可以合并更新）。

起初我只是根据自己的喜好进行调整，所以我没有为任何进一步的分支而烦恼，但现在我有一些代码可能对其他人有用，但我的密码等在同一个分支中。

实际上，我有一个我想拥有的大分支：

*   Postgres 后端（默认），但我添加了一些新代码
*   使用相同的新代码的 MySQL 后端（我所做的最大更改）
*   ~~我的设置：我不能 git 忽略设置文件，因为我偶尔需要为新功能添加部分，但我需要将我的个人设置保留在公共分支之外！我想这将作为一个仅限本地的分支工作得最好。~~ *行。修复了这个。但主要问题仍然存在。*
*   开发分支，我将从 MySQL 分支。

从头开始，我想我可以弄清楚如何分支/合并各种更新，但是有没有一种**简单**的方法可以遍历现有的 repo 并选择将哪些提交应用于哪个分支？或者可能从上游点创建一个分支然后合并回来，不包括某些提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:22:56.620

我挂断了“将我的密码放入源代码管理”评论。以下是一些避免这样做的想法，按优先顺序递减：

1.  如果您的程序不需要密码来实现最基本的功能，请将其存储在密码管理器（例如 KeePassX）中，然后在启动时将其剪切并粘贴到您正在运行的程序中。

2.  将其作为环境变量存储在服务器上并让您的程序将其读入。每个操作系统都有环境变量，这让您在每台服务器上都有不同的密码。

3.  使用强公钥加密。为您自己和应用程序生成公钥和私钥。使用您的私钥和应用程序的公钥加密您的密码，这样只有应用程序的私钥才能解密它。然后让项目维护者使用应用程序的私钥做一些安全的事情（但不要通过电子邮件或源代码控制将其提供给他们，除非它是安全加密的）。这样，您和您的应用程序就拥有了您的密码，并且没有应用程序的私钥，其他任何人都无法获得它。

4.  如果以上都不可行，您可以使用平面文件执行#2，并在安装时手动填写密码。

5.  如果上述所有工作都太多，那么您可能没有安全的应用程序。考虑完全取消密码并公开您保护的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:29:04.177

好吧，我咬紧牙关。简而言之：

1.  将整个 repo 和工作目录复制到备份目录
2.  在该备份目录中，选择我的最新分支，使用“git log -p”t0 找到第一个要摆脱的提交。
3.  git rebase -i ~1
4.  在编辑器中将“pick”更改为“e”（“edit”），或删除该行以清除整个提交
5.  按照说明从提交中删除任何不需要的数据。
6.  交换备份目录和主目录。
7.  现在，使用闪亮的新工作目录，创建任何需要的分支，从存储库的其他地方或新的备份目录中获取所需的文件。

希望这会对某人有所帮助。

# c++ - Run Time Error: Program skipping prompt for second and third names

> ID：13092261
> 
> 赞同：0
> 
> 时间：2012-10-26T18:17:39.943
> 
> 标签：c++

> **Possible Duplicate:**
> [Program is skipping over Getline() without taking user input](https://stackoverflow.com/questions/3731529/program-is-skipping-over-getline-without-taking-user-input)

Alright, so I have a program that is running and at the start it prompts you for the data fill the data members. The program does this for 3 different objects.

My problem is that, at run time, after inputting data for the fist object the program proceeds to skip input for the second name and goes straight to the next option. It does the same thing for the third option's name. It also does this when you get the chance to change the data.

> "Enter CD Name: Microsoft Word
> 
> 1-Game
> 
> 2-Word
> 
> 3-Compiler
> 
> 4-Spreadsheet
> 
> 5-Dbase
> 
> 6-Presentation
> 
> Enter the number that corresponds with the CD's Type: 2
> 
> Input CD Cost: 15.23
> 
> Enter CD Name: 1-Game <- ((Skips the input part and takes you directly to the menu!))
> 
> 2-Word
> 
> 3-Compiler
> 
> 4-Spreadsheet
> 
> 5-Dbase
> 
> 6-Presentation
> 
> Enter the number that corresponds with the CD's Type:"

The issue is most likely in my member function, but I'm not sure what the issue is.

Here's my member function code:

```
void CDX::LoadInfo() //Prompts, validates and sets data members
{
cout << "Enter CD Name: ";
getline(cin, Name);

int choice=0;
do
{   cout << "1-Game\n2-Word\n3-Compiler\n4-Spreadsheet\n5-Dbase\n6-Presentation" << endl;
    cout << "Enter the number that corresponds with the CD's Type: ";
    cin >> choice;
} while ((choice <1)||(choice>6));

switch(choice)
//Code for case-switch statement goes here) 
```

So what am I missing? Is this a buffer issue or am I prematurely ending the code in some way that causes it to skip?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:27:24.367

当发现无法转换的字符时，数字的转换将停止。在这种情况下，字符是 '\n'

当你使用getline读取一行时，这个字符被读取并丢弃，但是当你读取一个数字时，它被读取（知道数字是否继续），如果它不是数字的一部分，它被留在下一次读取的缓冲区。

例子：如果你写：“29312”并按下回车，你的缓冲区将被“29312\n”填充。

如果您使用 cin >> number 来读取标准输入，它将消耗数字，但会在缓冲区中留下“\n”。下次调用 getline 时，它​​将读取缓冲区中留下的空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:23:18.460

我认为这是因为第一个'getline（cin，Name）'吞噬了最后一个换行键。当您输入成本并按 ENTER 时，呼叫`getline`完成。

您可以在收取费用后保留额外`getline`费用，以便消耗换行符。然后，我认为它会正确运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:23:20.220

您已阅读“CD 成本”，但换行符仍保留在输入缓冲区中。在读取 CD 名称之前跳过空格：

```
ws(cin); 
```

# awk - 求和或排序

> ID：13092263
> 
> 赞同：2
> 
> 时间：2012-10-26T18:17:50.287
> 
> 标签：awk, grep

我有一个数据文件，例如：

```
82 DEX26_28_h
82 DEX26_28_h
873 DEX34_h
89 DEX37_h
1 DEX34_h 
```

我打算通过 $2 进行排序，以便列中的每个项目（17 个唯一项）彼此相邻。然后我想在 1 美元中总结所有#，同时拴在 2 美元上

上述测试文件的理想结果：

```
164 DEX26_28_h
874 DEX34_h
89 DEX27_h 
```

有道理？基本上需要总结每个样本（$2）发生的序列总数（$1），并且 uniq 在保持总和的同时只需要 $2。这样最终的结果就变成了 17 行。

我是否应该通过 $2 中的 17 个标识中的每一个来查找，然后使用 awk 对它们求和？

你们有什么感想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:21:17.340

您可以在 awk 中使用数组进行求和：

```
awk '{arr[$2]+=$1} END {for (i in arr) {print arr[i],i}}' 
```

然后，您可以通过管道对其进行排序。

* * *

这是做什么的：

*   `arr[$2]+=$1`: 将 的值添加到具有索引 (key)`$1`的数组中的元素。（以前未定义的元素很方便地定义为 0，所以是的，您可以在这里做一个而不用担心键是否“存在”。）如果您不熟悉数组，这基本上是在内存中创建一个查找表基于你的领域。`arr``$2``+=``$2`

*   `END...`：在处理结束时执行一次

*   `for (i in arr)`：对于数组中的每个键`arr`，将该元素分配给`i`并运行以下块中的代码。

*   `print arr[i],i`：首先打印 key 中的值`arr`，`i`然后是 key`i`本身。

# postgresql - How to get a statement calling the function from inside the function itself?

> ID：13092265
> 
> 赞同：1
> 
> 时间：2012-10-26T18:18:05.963
> 
> 标签：postgresql, stored-procedures, plpgsql, postgresql-9.1

Let's say I have a function `show_files(IN file text, IN suffix text, OUT statement text)`. In next step the function is called:

```
 SELECT * FROM show_files(file := 'example', suffix := '.png'); 
```

My question is: Is there any solution that I could get statement that has called this function from inside that function?

I mean, after running the `SELECT` the output of function `(OUT statement text)` should be: `'SELECT * FROM show_files(file := 'example', suffix := '.png');'`, or is it possible to assign this statement to the variable inside the function?

I need the functionality like those with `TG_NAME`, `TG_OP`, etc. in trigger procedures.

Maybe is it possible to retrieve this statement from SELECT current_query FROM pg_stat_activity ?

When I'm trying to use it inside a function I've got an empty record:

```
CREATE OR REPLACE FUNCTION f_snitch(text)
  RETURNS text AS
$BODY$
declare
rr text;
BEGIN
    RAISE NOTICE '.. from f_snitch.';
    -- do stuff
    SELECT current_query  into rr FROM pg_stat_activity 
    WHERE current_query ilike 'f_snitch';
    RETURN rr;
END
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

Any help and suggestions would be happily welcome!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:58:55.360

`TG_NAME`和朋友是只存在于触发函数的特殊变量。常规的 plpgsql 函数没有这样的东西。我对如何在 plpgsql 中的*被调用函数中获得这个想法感到新鲜。*

您*可以*添加`RAISE NOTICE`到您的功能，以便获得所需的信息

```
CREATE OR REPLACE FUNCTION f_snitch(text)
  RETURNS text LANGUAGE plpgsql AS
$func$
BEGIN
    RAISE NOTICE '.. from f_snitch.';
    -- do stuff
    RETURN 'Snitch says hi!';
END
$func$; 
```

称呼：

```
SELECT f_snitch('foo') 
```

除了结果之外，这还会返回一个通知：

```
NOTICE:  .. from f_snitch. 
```

未能取悦于两个方面：

1.  *来电声明*不在通知中。
2.  通知中没有*上下文*。

对于**1.**您可以**`RAISE LOG`**改用（或将您的集群设置为也记录通知 - 我通常不这样做，对我来说太冗长了）。`STATEMENT`使用标准设置，您会在数据库日志中获得额外的一行：

```
LOG:  .. from f_snitch.
STATEMENT:  SELECT f_snitch('foo') 
```

对于**2\. ，请查看**[dba.SE](https://dba.stackexchange.com/q/7214/3684)上的这个相关问题。`CONTEXT`看起来像：

```
CONTEXT:  SQL statement "SELECT f_raise('LOG', 'My message')"
    PL/pgSQL function "f_snitch" line 5 at PERFORM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:58:31.307

好的，我知道了！

```
CREATE OR REPLACE FUNCTION f_snitch(text)
  RETURNS setof record AS
$BODY$
BEGIN
   RETURN QUERY
    SELECT current_query 
    FROM pg_stat_activity 
    <strike>ORDER BY length(current_query) DESC LIMIT 1;</strike>
    where current_query ilike 'select * from f_snitch%';
    -- much more reliable solution

END
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;

  select * from f_snitch('koper') AS (tt text); 
```

结果如下：

![在此处输入图像描述](../Images/20487f4b5c8d1ac06924a6c87c55b905.png)

它可能不是 100% 可靠的解决方案，但对于小型系统（对于少数用户）来说，这还不错。

# c++ - 为什么 nullptr 不能转换为 int？

> ID：13092266
> 
> 赞同：16
> 
> 时间：2012-10-26T18:18:10.240
> 
> 标签：c++, c++11, implicit-conversion, nullptr

摘要：`nullptr`转换为`bool`，又`bool`转换为`int`，那为什么不`nullptr`转换为`int`？

这段代码没问题：

```
void f(bool);
f(nullptr);      // fine, nullptr converts to bool 
```

这没关系：

```
bool b;
int i(b);        // fine, bool converts to int 
```

那为什么这不行呢？

```
void f(int);
f(nullptr);      // why not convert nullptr to bool, then bool to int? 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-26T18:20:02.707

因为这正是 的主要思想`nullptr`。

`nullptr`旨在避免这种行为：

```
struct myclass {};

void f(myclass* a) { std::cout << "myclass\n"; }
void f(int a) { std::cout << "int\n"; }

// ...

f(NULL); // calls void f(int) 
```

如果`nullptr`是可转换的，`int`就会发生这种行为。

所以问题是“*为什么它可以转换为* `bool`？”。

语法 - “糖”：

```
int* a = nullptr;
if (a) {
} 
```

这看起来比：

```
if (a == nullptr) {
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-26T18:21:42.520

在标准的 §4.1 中，它说明了如何执行转换：

> 标准转换是具有内置含义的隐式转换。第 4 条列举了所有此类转换。标准转换序列是按以下顺序的标准转换序列：
> 
> — 从以下集合中进行零次或一次转换：左值到右值的转换、数组到指针的转换和函数到指针的转换。
> 
> — 来自以下集合的零个或一个转换：整数提升、浮点提升、整数转换、浮点转换、浮点整数转换、指针转换、指向成员的指针转换和布尔转换。
> 
> — 零次或一次资格转换。

因此，编译器只对上述每种类型的转换中的一些、无或全部进行“零或一次转换”，而不是任意多。这*真是一件好事*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T18:34:50.223

要了解为什么会发生这种情况，您应该了解如何使用`nullptr`. 检查以下链接：

*   [http://en.wikipedia.org/wiki/C%2B%2B11](http://en.wikipedia.org/wiki/C%2B%2B11)
*   [nullptr 到底是什么？](https://stackoverflow.com/questions/1282295/what-exactly-is-nullptr)

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-25T03:24:06.317

在 c++11 中引入了keyworkd **nullptr ，因为 C** **NULL**的多个定义，并且在使用 int 参数和 NULL 重载函数时会混淆。

```
#define NULL 0
#define NULL (void*)0 
```

在圣经中 C++ 编程语言（第 4 期），第 270 页

> 指针到布尔值的转换在条件下很有用，但在其他地方会令人困惑。

所以我认为 nullptr_t 变量转换为 int 是不允许的，因为这就是它存在的原因，但它可以像 bool 变量一样用作测试条件。

# python - 如果 range() 是 Python 3.3 中的生成器，为什么我不能在范围上调用 next()？

> ID：13092267
> 
> 赞同：107
> 
> 时间：2012-10-26T18:18:13.930
> 
> 标签：python, python-3.x, iterator, generator, typeerror

也许我已经成为网络上错误信息的受害者，但我认为更有可能只是我误解了一些东西。根据我目前所了解的，range() 是一个生成器，并且生成器可以用作迭代器。但是，这段代码：

```
myrange = range(10)
print(next(myrange)) 
```

给我这个错误：

```
TypeError: 'range' object is not an iterator 
```

我在这里想念什么？我期待这会打印 0，并前进到`myrange`. 我是 Python 新手，所以请接受我对这个相当基本的问题的歉意，但我在其他任何地方都找不到好的解释。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-10-26T18:21:23.453

`range`是一类不可变的可迭代对象。它们的迭代行为可以类比为`list`s：你不能`next`直接调用它们；您必须使用`iter`.

所以不，`range`不是发电机。

你可能会想，“他们为什么不让它直接可迭代”？好吧，`range`s 有一些有用的属性是不可能的：

*   它们是不可变的，因此可以用作字典键。
*   它们具有`start`,`stop`和`step`属性（从 Python 3.3 开始）`count`和`index`方法，并且它们支持`in`,`len`和`__getitem__`操作。
*   `range`您可以多次迭代相同的内容。

* * *

```
>>> myrange = range(1, 21, 2)
>>> myrange.start
1
>>> myrange.step
2
>>> myrange.index(17)
8
>>> myrange.index(18)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: 18 is not in range
>>> it = iter(myrange)
>>> it
<range_iterator object at 0x7f504a9be960>
>>> next(it)
1
>>> next(it)
3
>>> next(it)
5 
```

# python - 如何使用 django ORM 在外键字段上连接两个表？

> ID：13092268
> 
> 赞同：32
> 
> 时间：2012-10-26T18:18:14.990
> 
> 标签：python, database, django, postgresql, orm

假设我有以下模型：

```
class Position(models.Model):
    name = models.CharField()

class PositionStats(models.Model):
    position = models.ForeignKey(Position)
    averageYards = models.CharField()
    averageCatches = models.CharField()

class PlayerStats(models.Model):
    player = models.ForeignKey(Player)
    averageYards = models.CharField()
    averageCatches = models.CharField()

class Player(models.Model):
    name = models.CharField()
    position = models.ForeignKey(Position) 
```

我想使用 django 的 ORM 执行等效的 SQL 查询：

```
SELECT *

FROM PlayerStats

JOIN Player ON player

JOIN PositionStats ON PositionStats.position = Player.position 
```

我将如何使用 django 的 ORM 来做到这一点？该查询并不完全正确，但我的想法是我想要一个使用 django 的 ORM 的单一查询，它可以让我根据玩家的位置`PlayerStats`加入。`PositionStats`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-12-16T19:54:34.447

我已经和 django 一起工作了一段时间，我在弄清楚表连接方面遇到了相当困难的时间，但我想我终于明白了，我想把它传递给其他人，这样他们就可以避免我遇到的挫败感用它。

考虑以下model.py：

```
class EventsMeetinglocation(models.Model):
    id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=100)
    address = models.CharField(max_length=200)

    class Meta:
        managed = True
        db_table = 'events_meetinglocation'

class EventsBoardmeeting(models.Model):
    id = models.IntegerField(primary_key=True)
    date = models.DateTimeField()
    agenda_id = models.IntegerField(blank=True, null=True)
    location_id = models.ForeignKey(EventsMeetinglocation)
    minutes_id = models.IntegerField(blank=True, null=True)

    class Meta:
       managed = True
       db_table = 'events_boardmeeting' 
```

在这里我们可以看到`location_id`in`EventsBoardmeeting`是 id in 的外键`EventsMeetinglocation`。这意味着我们应该能够通过 查询其中的`EventsMeetinglocation`信息`EventsBoardmeeting`。

现在考虑以下views.py：

```
def meetings(request):
    meetingData = EventsBoardmeeting.objects.all()
    return render(request, 'board/meetings.html', {'data': meetingData }) 
```

正如之前在其他帖子中多次提到的，django 会自动处理连接。当我们查询其中的所有内容时，`EventsBoardmeeting`我们也可以通过外键获取任何相关信息，但是我们在 html 中访问它的方式有点不同。我们必须通过用作外键的变量来访问与该连接相关的信息。例如：

```
{% for x in data %}
   {{ x.location_id.name }}
{% endfor %} 
```

以上引用了表中作为外键连接结果的所有名称。`x`本质上是`EventsBoardmeeting`表，所以当我们访问时，我们`x.location_id`访问的是外键，它使我们能够访问`EventsMeetinglocation`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-27T01:25:41.100

这不是一个查询，但它非常有效。这对涉及的每个表执行一个查询，并在 Python 中将它们连接起来。更多`prefetch_related`信息：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)

```
Player.objects.filter(name="Bob").prefetch_related(
        'position__positionstats_set', 'playerstats_set') 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-03-19T07:41:16.800

`select_related()`并且`prefetch_related()`是您的解决方案。它们的工作方式几乎相同，但有一些区别。

`select_related()`通过创建 SQL 连接并在 SELECT 语句中包含相关对象的字段来工作。为此，`select_related`在同一个数据库查询中获取相关对象。但它只适用于一对一或一对多的关系。示例如下 -

```
entry = Entry.objects.select_related('blog').get(id=5)
or
entries = Entry.objects.filter(foo='bar').select_related('blog') 
```

`prefetch_related()`另一方面，对每个关系进行单独的查找，并在 Python 中进行“加入”。这允许它预取多对多和多对一对象，这是使用`select_related`. 因此`prefetch_related`将只为每个关系执行一个查询。示例如下 -

```
Pizza.objects.all().prefetch_related('toppings') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-06-01T10:18:15.710

在 Django 3.2 中，框架在使用方法 QuerySet.filter() 时自动遵循关系

```
# The API automatically follows relationships as far as you need.
# Use double underscores to separate relationships.
# This works as many levels deep as you want; there's no limit.
# Find all Choices for any question whose pub_date is in this year
# (reusing the 'current_year' variable we created above).
>>> Choice.objects.filter(question__pub_date__year=current_year) 
```

这将编译为以下 SQL 查询：

```
SELECT
    "polls_choice"."id",
    "polls_choice"."question_id",
    "polls_choice"."choice_text",
    "polls_choice"."votes"
FROM
    "polls_choice"
INNER JOIN "polls_question" ON
    ("polls_choice"."question_id" = "polls_question"."id")
WHERE
    "polls_question"."pub_date" BETWEEN 2020-12-31 23:00:00 AND 2021-12-31 22:59:59.999999 
```

请参阅此处的教程：[https ://docs.djangoproject.com/en/3.2/intro/tutorial02/](https://docs.djangoproject.com/en/3.2/intro/tutorial02/)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-09-26T13:34:59.443

从`django.db`导入连接 在您看来，包括以下语句：

```
cursor = connection.cursor()
cursor.execute("select * From Postion ON Position.name = Player.position JOIN
PlayerStats ON Player.name = 
PlayerStats.player JOIN PositionStats ON Position.name = PositionStats.player")
solution = cursor.fetchall() 
```

# c# - 如何在代码中缩进 #if 指令？

> ID：13092271
> 
> 赞同：12
> 
> 时间：2012-10-26T18:18:26.687
> 
> 标签：c#, visual-studio

> **可能重复：**
> [如何强制 C# 条件指令缩进？](https://stackoverflow.com/questions/1321228/how-to-force-indentation-of-c-sharp-conditional-directives)
> [Visual Studio 可以自动缩进/格式化预处理指令吗？](https://stackoverflow.com/questions/10548319/can-visual-studio-automatically-indent-format-preprocessing-directives)

在以下示例代码中有一个`#if`指令，但请注意缺少缩进：

```
 else
                {
#if DEBUG
    Debug.Print(ex.Message);
#endif                    
                    return null;
                } 
```

我知道这对于一些*纯粹*的开发实践来说可能是这样的，但老实说，在 VS.NET 中我不在乎，并且希望它与我的代码保持一致。有没有办法让`#`指令与 VS.NET 中的其余代码内联自动缩进？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:30:44.990

我不确定您是否可以在本机使用 Visual Studio 来做到这一点。您可能必须使用 StyleCop 之类的插件。见[http://stylecop.codeplex.com/](http://stylecop.codeplex.com/)

我理解你为什么要缩进——因为条件指令目前看起来很混乱。但是，使用当前缩进的优点是它可以很容易地被正在阅读您的代码的人看到。由于条件指令可以在很大程度上改变你的代码流，它现在可能没问题。否则，您有插件选项:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:32:23.190

我试图在这里搜索一些东西：

> 选项 -> 文本编辑器 -> C#

但不幸的是，visualstudio 似乎没有内置任何东西允许您以这种方式缩进预处理器指令。但是谷歌搜索我找到[了这个答案](https://stackoverflow.com/questions/1321228/how-to-force-indentation-of-c-sharp-conditional-directives)，它建议使用[StyleCop](http://archive.msdn.microsoft.com/sourceanalysis)。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:27:50.070

我什么都不知道，但是 # pragma 无论如何都不应该缩进，因为它们不受代码的影响。当然可以缩进 Debug.Print。

# mongodb - 在 Erlang 中的 MongoDB 中创建和修改 Map

> ID：13092275
> 
> 赞同：2
> 
> 时间：2012-10-26T18:18:47.853
> 
> 标签：mongodb, map, erlang

我想在 Erlang 中使用 mongodb 作为地图。我找不到这样的例子。这是我到目前为止所拥有的：

```
application:start(mongodb).
Host = {localhost, 27017}.
{ok, Conn} = mongo:connect(Host).

mongo:do(safe, master, Conn, test, fun() ->
    mongo:delete(foo, {}),                 
    mongo:insert(foo, {x,1}),
    mongo:insert(foo, {a,12}),
    Pid = mongo:find(foo, {a}),    
    Result = mongo_cursor:rest(Pid),                
    mongo_cursor:close(Pid),
    Result end). 
```

结果：

```
{ok,[{'_id',{<<80,138,211,178,41,152,132,104,251,0,0,35>>},
            x,1},
     {'_id',{<<80,138,211,178,41,152,132,104,251,0,0,36>>},
            a,12}]} 
```

为什么它会创建两个地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:35:37.937

mongo 不是地图，是地图列表，无法自行修改地图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:52:18.330

您在没有指定任何值的情况下对 MongoDB 进行两次插入`_id`，因此最终得到两个文档和一个自动生成的唯一 ObjectId。如果您尝试使用类似于 a 的集合`map`，`dict`您应该提供一个`_id`值作为键并使用[`repsert`（又名 upsert）](http://api.mongodb.org/erlang/mongodb/mongo.html#repsert-3)更新文档（如果它已经存在，或者插入，如果它不存在）。

# hibernate - Hibernate @where 注释：用于@OnetoOne 关联的反面存在的属性。（映射者）

> ID：13092277
> 
> 赞同：1
> 
> 时间：2012-10-26T18:18:49.863
> 
> 标签：hibernate, where-clause

这是我的 Alpha 和 Beta 课程。Alpha 与 Beta 具有一对一的关系

我只想获取那些具有 Beta 的 Alpha 记录。

我无法为 Alpha 创建 where 子句注释，这将帮助我实现这一目标。

有没有更好的方法来安排注释，因为我想在获取 alpha 对象时避免代码中的任何额外查询。

```
/** CLass Alpha*/
@Entity
@Where(clause x =0  and y =0  and  ????????)
class Alpha {    

    @Column(name ="X")
    int x;

    @Column(name ="Y")
    int Y;

    @OneToOne(mappedBy = "alpha")
    Beta beta;
}

/** Class Beta*/
@Entity
class Beta {    
    @OneToOne
    @JoinColumn(name = "ALPHA_REF")
    Alpha alpha;    
} 
```

任何指针将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T04:35:08.097

您可以使用命名查询

```
@NamedQueries({
@NamedQuery(name = "<query-name>", query = "SELECT a FROM Alpha a WHERE a.beta is not null :}) 
```

# javascript - knockoutjs 在 with 中调用 click 方法

> ID：13092279
> 
> 赞同：0
> 
> 时间：2012-10-26T18:19:03.647
> 
> 标签：javascript, knockout.js

我在 with 模板中添加了一个 click 方法。

我不断收到 Uncaught ReferenceError: myMethod is not defined 但 Person 显然有该方法的错误

```
Person = (data) ->
    name = ko.observable(data.name)
    lname = ko.observable(data.lname)    
    myMethod = (data) -> 
        console.log 'person.myMethod' 
    test= -> 
        console.log 'person.test' 
    name:name
    lname:lname    
    myMethod:myMethod
    test:test 
```

这是模板

```
<div id="wrapper">
    <h4>Person</h4>
    <ul  >
        <li data-bind="with:person">
            <span data-bind="text: name"> </span> 
            <span data-bind="text: lname"> </span>  
            <a href="#" data-bind="click: function() {   myMethod($data) }" >CLICK </a>  
        </li> 
    </ul > 
</div> 
```

在匿名模板中，我不明白如何在 Person 对象上调用 myMethod，我尝试过类似的方法

```
$parent.person.myMethod
$root.person.myMethod
this.myMethod
person.myMethod 
```

[http://jsfiddle.net/eiu165/a7uTM/3/](http://jsfiddle.net/eiu165/a7uTM/3/)

非常感谢

**编辑** 修复以将方法名称添加到 myMethod

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:17:24.673

您的代码中有两个问题：

1.  你没有`myMethod`一个`methodCall`方法，所以`myMethod:myMethod`应该是`myMethod:methodCall`

2.  虽然有一个`myMethod`on`Person`但**你**的`person = ko.observable()`.

    因为使用表达式`person($.parseJSON(data))`，您只传递原始数据。所以你需要创建一个`Person`with`person(Person($.parseJSON(data)))`

这里是固定的[`JSFiddle`](http://jsfiddle.net/nemesv/fGtTp/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:21:18.430

我不会将函数或数据传递给单击。只需传递方法名称并在视图模型中提取所需的数据。

```
data-bind="click: myMethod" 
```

# java - 在java中与服务器通信到java

> ID：13092280
> 
> 赞同：2
> 
> 时间：2012-10-26T18:19:17.373
> 
> 标签：java

我知道如何使用带有 JSON 的 PHP 脚本与服务器通信，但如果服务器是用 Java 编写的，我将如何使用我的 Java 程序与服务器通信。

它会相同还是有一些更简单的方法可以排除 JSON？

我习惯这样做的方式是使用发布请求，然后在 JSON 中编码/解码

它不是网络服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:39:47.890

您可以使用如下所示的服务器套接字编程作为客户端您可以像这样编写代码

```
import java.io.*;
import java.net.*;
public class Client 
{
    public static void main(String args[])
    {
    try
        {
          Socket server;
          String str="";
          DataInputStream d=new DataInputStream(System.in);
          PrintStream toserver;
          BufferedReader fromserver;
          server=new Socket("117.198.219.36",1096);        //your ip to connect and port no through which you will connect to server
          InputStreamReader isr=new InputStreamReader(server.getInputStream());
          fromserver= new BufferedReader(isr);
          toserver=new PrintStream(server.getOutputStream());
          while(true)
           {
           str=":"+d.readLine();
           toserver.println(str);
           str=fromserver.readLine();
           System.out.println(str);
           }
        }
    catch(Exception e)
        {
         System.out.println(e);
        }
    }
} 
```

这是发送请求的客户端程序。

现在服务器端程序在下面，您将提供相同的端口号来连接到客户端。

```
import java.io.*;
import java.net.*;
public class Server
{
    public static void main(String args[])
    {
        ServerSocket sc;
        Socket client;
        DataInputStream d;
        PrintStream toClient;
        BufferedReader fromClient;
        String str="";
        try
              {
               d=new DataInputStream(System.in);
               sc=new ServerSocket(1096);         //the same port no that we had given at client side
               System.out.println("ServerStarted");
               client=sc.accept();
               InputStreamReader isr=new InputStreamReader(client.getInputStream());
               fromClient=new BufferedReader(isr);
               toClient=new PrintStream(client.getOutputStream());
               while(true)
                {
                str=fromClient.readLine();
                System.out.println(str);
                str=":"+d.readLine();
                toClient.println(str);
                }
              }
       catch(Exception e)
              {
                System.out.println(e);
              }
    }
} 
```

尝试使用它们，您将能够通过此连接。我希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T18:22:31.447

最有效的方法是使用[Sockets](http://docs.oracle.com/javase/tutorial/networking/sockets/)。本教程很好地展示了客户端/服务器示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:29:44.753

您可以随心所欲地进行交流，但是 java 开发人员更喜欢 rpc ( [http://en.wikipedia.org/wiki/Remote_procedure_call](http://en.wikipedia.org/wiki/Remote_procedure_call) ) 这是某些框架实现的最简单的方法，但是如果您需要完全控制您的消息，您可以做到认为 json 甚至直接通过套接字（但我不建议这样做）。

# android - 使用 setRequestedOrientation 了解旋转何时完成

> ID：13092281
> 
> 赞同：6
> 
> 时间：2012-10-26T18:19:17.590
> 
> 标签：android, rotation

我正在尝试编写一个 .apk 来测量旋转 Android 设备的屏幕需要多长时间（循环几个旋转）。

我正在使用调用来`setRequestedOrientation()`将屏幕重新定向到 4 个位置（、`PORTRAIT`和`LANDSCAPE`）。`REVERSE_PORTRAIT``REVERSE_LANDSCAPE`

我的问题是我无法判断轮换何时完成。我尝试了一些解决方案，但每个都有自己的问题。

1.  我尝试使用`onConfigurationChanged()`. 问题是当方向改变从传感器发生时，这个方法会被触发，而不是从`setRequestedOrientation()`. `setRequestedOrientation()`在我之前`FULL_SENSOR`调用.`onConfigurationChanged``setRequestedOrientation()`
2.  我尝试`setRequestedOrientation()`通过添加一个while循环来检查屏幕方向（以度为单位）来进行某种“阻塞”。`android.view.Display.getRotation()`我之前打电话`setRequestedOrientation()`并用while循环阻塞，直到它改变。不幸的是，它也不起作用。它在 UI 重新显示之前返回。
3.  我试图遵循活动的生命周期，等待`onCreate()`再次被调用，假设轮换完成。以前，我一直在循环，直到我的计数器达到一个值，在每次迭代调用`setRequestedOrientation()`. 在这种情况下，我的 while 循环变成了一个 if 语句，我假设`onCreate`每次都会调用该函数，但`onCreate()`在几次迭代后不会被调用。UI 似乎也没有重绘。
4.  我在网上找到的最终解决方案（但还没有完全实现）是`waitForIdleSync()`在`setRequestedOrientation()`. `waitForIdleSync()`是 Instrumentation 类的一部分，我认为这只是为了测试而不是标准的.apk。

任何想法都会受到欢迎。我将衷心感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:12:26.563

您应该尝试使用：http: [//developer.android.com/reference/android/view/OrientationEventListener.html](http://developer.android.com/reference/android/view/OrientationEventListener.html)

您需要先调用 enable()，然后您会收到有关设备每次旋转更改的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T08:57:49.673

没有直接的方法可以知道何时`setRequestedOrientation()`通过 Android API 完成。唯一知道的方法是在调用它之前和调用它之后检查当前方向`onCreate()`。

在你的`Activity`课堂上做：

```
long timeStamp;

public void onCreate(Bundle savedInstanceState) {
     if (savedInstanceState == null) {
          timeStamp = System.currentTimeMillis();     
     }
     else {
          timeStamp = savedInstanceState.getLong("state_time_stamp");
     }

     // For example, check how long it takes to switch from portrait to landscape. 
     // You can modify this part to check PORTRAIT, LANDSCAPE, REVERSE_PORTRAIT and REVERSE_LANDSCAPE.
     final int orientation = getResources().getConfiguration().orientation;    
     if (orientation == Configuration.SCREEN_ORIENTATION_PORTRAIT) {
          setRequestedOrientation(ActivityInfo.ORIENTATION_LANDSCAPE);
          return;
     }

     // We will reach here only after setRequestedOrientation() is done
     // and here's the time it took to change the orientation:
     final long elapsedTime = System.currentTimeMillis() - timeStamp; 
}

public void onSaveInstanceState(Bundle outState) {
     outState.putLong("state_time_stamp", timeStamp);
} 
```

# c# - 虚拟翻转视图中的 XAML RichTextBlock

> ID：13092283
> 
> 赞同：3
> 
> 时间：2012-10-26T18:19:18.403
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我一直在寻找有关将 html 内容绑定到我的项目详细信息页面上的翻转视图内的富文本块的帮助，但找不到任何有关如何做我所追求的信息。

我正在构建一个简单的新闻阅读器应用程序，它从我想在我的翻转视图中显示的提要中获取 html 内容。

我创建了一个新的默认项目详细信息页面并绑定了我的收藏：

```
this.DefaultViewModel["Group"] = feedItem.Category;
this.DefaultViewModel["Items"] = feedItem.Category.Items;
this.flipView.SelectedItem = feedItem; 
```

然后在我的翻转视图的 DataTemplate 中：

```
<common:RichTextColumns x:Name="richTextColumns" Margin="117,0,117,47">
    <RichTextBlock x:Name="richTextBlock" Width="560" Style="{StaticResource ItemRichTextStyle}">
        <Paragraph>
            <Run FontWeight="SemiLight" Text="{Binding Content}"/>
        </Paragraph> ... 
```

内容是我使用的模型上的字符串属性`HtmlUtilities.ConvertToText(html)`

这完美无缺。但是，我需要文章中的图像和标题（h1、h2 等）。

我的问题是实现这一目标的最佳方法是什么？

解析 html 并创建运行、包含图像等的内联 ui 容器不是问题。我为此使用了 html 敏捷包，但我的问题是如何将这些元素添加到richtextblocks 块集合中？

我尝试在翻转视图上加载一个事件，然后获取当前的翻转视图依赖对象（`this.flipView.ItemContainerGenerator.ContainerFromIndex(flipView.SelectedIndex);`然后遍历节点树以找到richtextblock，然后设置 blocks 属性，但它适用于第一项，然后停止工作，我猜与翻转视图如何虚拟化集合有关。

老实说，对于这肯定是一项简单的任务，它变得非常混乱！？xaml 团队肯定意识到人们可能希望将图像绑定到富文本块？

我以为您可以将富文本块的内容绑定到我的模型上的属性，然后返回块，但富文本块似乎没有任何方法可以做到这一点，至少从我能做到的看。

如果有人可以帮助我，将不胜感激。这真让我抓狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:17:07.233

我基本上有同样的问题。我的解决方案是将 HTML 分解为 pragraphs 列表并使用提到的`this.flipView.ItemContainerGenerator.ContainerFromIndex(flipView.SelectedIndex)`方法来查找 RichTextBlock，清除其 Inlines 并将所有 paragprahs 添加到 Inlines 集合中。FlipView 的 SelectedItemChanged 事件的调用过程

# r - 如何删除稀疏矩阵中所有元素为零的列？

> ID：13092285
> 
> 赞同：3
> 
> 时间：2012-10-26T18:19:20.930
> 
> 标签：r, matrix, sparse-matrix

例如， M 是一个稀疏矩阵，track_list 是矩阵的列名。

```
library(Matrix)
M <- Matrix(0,nrow = 3,ncol = 4)
M[1,2] = 1
M[2,3] = 1
M[3,2] = 1 
track_list = c('a','b','c','d')
colnames(M) = track_list

col_tmp <- M@p[-1] - M@p[-length(M@p)]
M <- M[,col_tmp!=0]
track_list = track_list[col_tmp!=0] 
```

结果将是：

```
> M
3 x 2 sparse Matrix of class "dgCMatrix"
     b c
[1,] 1 .
[2,] . 1
[3,] 1 . 
```

但是，设计很丑。那么该怎么做呢？

谢谢你 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T18:25:44.727

`summary()`使用获取`sparseSummary`包含非零条目的列的索引可能是最直接的。

```
library(Matrix)
M <- Matrix(c(0,0,0,1,0,0,0,1,1,1,0,0), nc=4)
M[,unique(summary(M)$j)]
# 3 x 3 sparse Matrix of class "dgCMatrix"
#           
# [1,] 1 . 1
# [2,] . 1 .
# [3,] . 1 .

## To see how it works, compare M and summary(M)
M 
# 3 x 4 sparse Matrix of class "dgCMatrix"
#             
# [1,] . 1 . 1
# [2,] . . 1 .
# [3,] . . 1 .

summary(M)
# 3 x 4 sparse Matrix of class "dgCMatrix", with 4 entries 
#   i j x
# 1 1 2 1
# 2 2 3 1
# 3 3 3 1
# 4 1 4 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T18:22:11.737

尝试这个 ：

```
M <- matrix(0,nrow = 3,ncol = 4)
M[1,2] = M[2,3] = M[3,2] = 1
M = M[,colSums(M != 0) != 0] 
```

如果您有兴趣使用`Matrix`包，您可以完全按照上述方式进行 - 只需`matrix(...)`更改`Matrix(...)`. 这些点是零值，不要担心它们：

```
M = Matrix(0,nrow = 3,ncol = 4)
M
# 3 x 4 sparse Matrix of class "dgCMatrix"
# [1,] . . . .
# [2,] . . . .
# [3,] . . . .

M[1,1]
# [1] 0 
```

`Matrix`实际上，该包似乎对*稀疏*矩阵（一些非零元素的矩阵）进行了优化。因此，它按点显示零，以更好地表示矩阵的稀疏程度。

# regex - 正则表达式从电话号码列表中分离同一网络的电话号码

> ID：13092291
> 
> 赞同：-1
> 
> 时间：2012-10-26T18:19:55.403
> 
> 标签：regex, preg-match

我一直很难弄清楚这一点。

让我这样解释我的需求：

1.  我正在制作一个 php 短信发件人脚本。

2.  收件人电话号码将在文本区域内输入，以逗号分隔，例如：`2348064356853,2347065478934,2348167456845,2347123454680`。

3.  这些号码将是来自不同移动网络的电话号码的混合

4.  不同的 API 将处理发送到不同电话组（移动网络）的短信（例如 API1，处理来自 NetworkA 和 NetworkB 的电话，而 API2 将处理 NetworkC 等）

5.  我已经知道分配给各种电话网络的号码格式。

以下是所有可用网络的格式：

*   所有电话号码，长度为 13 位，以 234 开头，
*   每个电话号码的前 6 位数字标识一个网络
*   所有网络都有超过 1 个唯一标识号

以下是分配给不同网络的编号：

*   网络 A -`234706, 234803, 234806, 234810, 234813, 234816 4235940,`
*   网络 B -`234705, 234805, 234807, 234815,`
*   网络 C -`234809, 234817, 234818, 234708`
*   网络 D -`234802, 234808, 234812`
*   网络 E - `234702、234819、234709、234704、234707

我的挑战是如何将电话号码从这些不同的网络中分离出来，并将它们分组到单独的变量中。

拜托，我需要有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:37:08.927

网络 A

```
/234(?:706|803|806|810|813|816)\d{7}/ 
```

网络 B

```
/234(?:705|805|807|815)\d{7}/ 
```

网络 C

```
/234(?:708|809|817|818)\d{7}/ 
```

网络 D

```
/234(?:802|808|812)\d{7}/ 
```

网络E

```
/234(?:702|704|707|709|819)\d{7}/ 
```

您可以使用`preg_match_all`上面的 per 表达式，并带有`PREG_SET_ORDER`选项，以便您的所有数字都整齐地放在一个数组中，`$matches[0]`.

表达式可以是锚定的（`^`或`$`），也可以使用边界或环视断言，但我不确定您的输入到底是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:41:23.570

1-单独的网络前缀，例如：

```
networks={
    "505 404 506 606",
    "236 848 488 993"
    etc
}; 
```

2- 获取一个数字是否有效，并将其分开： `/234(\d{3})(\d{7})/gm`这将组成 2 个组，一个带有前缀，另一个带有数字，因此您只需找到前缀并将数字发送到您找到的网络数组的索引上你的前缀。

编辑：[演示](http://regex101.com/r/hP8oW6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:50:54.090

这是你的正则表达式`(?P<NETA>234(?:706|803|806|810|813|816)\d{7})|(?P<NETB>234(?:705|805|807|815)\d{7})|(?P<NETC>234(?:809|817|818|708)\d{7})|(?P<NETD>234(?:802|808|812)\d{7})|(?P<NETE>234(?:702|819|709|704|707)\d{7})`

这里有一些有用的代码，下次创建您自己的代码

```
<?php

    $networx = array(
        'A'     => array( 706, 803, 806, 810, 813, 816 ),
        'B'     => array( 705, 805, 807, 815 ),
        'C'     => array( 809, 817, 818, 708 ),
        'D'     => array( 802, 808, 812 ),
        'E'     => array( 702, 819, 709, 704, 707 )
    );

    $regex = '';

    foreach ( $networx as $k => $nums ) {
        $nums = implode( '|', $nums );
        $regex .= ( $regex ? '|' : '' ) . "(?P<NET{$k}>234(?:{$nums})\d{7})";
    }

    $text = "Network A - 2347061234567, 234803, 234806, 234810, 234813, 23481 6 4235940,

    Network B - 234705, 2348051234567, 234807, 2348151234567,

    Network C - 234809, 234817, 2348181234567, 234708

    Network D- 234802, 2348081234567, 234812

    Network E - 234702, 234819, 234709, 234704, 234707";

    preg_match_all( "/{$regex}/", $text, $matches );

?> 
```

最终的 var`$matches`将包含诸如`NETA`, `NETB`, ...之类的键，`NETE`其中包含具有相应数字的数组。

```
[NETB] => Array
    (
        [0] => 
        [1] => 2348051234567
        [2] => 2348151234567
        [3] => 
        [4] => 
    ) 
```

# ruby-on-rails - Apache/Passenger 服务器上的“没有要加载的文件——捆绑器/设置”

> ID：13092293
> 
> 赞同：3
> 
> 时间：2012-10-26T18:20:01.877
> 
> 标签：ruby-on-rails, deployment, rubygems, rvm, bundler

我正在尝试部署我的第一个 Rails 应用程序的草稿。它在我的本地 WEBRick 服务器上运行良好。

但是，在我运行 Apache2 和 Passenger 的 Ubuntu VPS 上，当我在浏览器中导航到应用程序时，我得到：

```
Error message:
no such file to load -- bundler/setup
Exception class:
LoadError 
```

使用以下回溯：

```
0   /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `gem_original_require'
1   /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `require'
2   /home/user/public/foo.com/config/boot.rb    6   
3   /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `gem_original_require'
4   /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `require'
5   /home/user/public/foo.com/config/application.rb 1   
6   /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `gem_original_require'
7   /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `require'
8   /home/user/public/foo.com/config/environment.rb 2   
9   /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `gem_original_require'
10  /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb    36  in `require'
11  config.ru   3   
12  /usr/lib/ruby/vendor_ruby/rack/builder.rb   51  in `instance_eval'
13  /usr/lib/ruby/vendor_ruby/rack/builder.rb   51  in `initialize'
14  config.ru   1   in `new'
15  config.ru   1 
```

该应用程序是使用 Ruby v1.9.3（或者我认为是这样）构建的，我已经在 Ubuntu 上安装了它（在应用程序根目录中，`ruby -v`返回`ruby 1.9.3p286 (2012-10-12 revision 37165) [i686-linux]`）。

根据[这个问题](https://stackoverflow.com/questions/7270210/no-such-file-to-load-bundler-setup-ruby-on-rails)，我已经运行`gem install bundle`并`bundle install`在应用程序根目录中。我还`gemset`从我的本地机器导入了正确的 VPS 应用程序根目录。

根据[这个问题](https://stackoverflow.com/questions/10499364/no-such-file-to-load-bundler-setup-in-rails-3-2-with-passenger)，我试图将 gem set 更改为`/home/user/.rvm/gems/ruby-1.9.3-p286@foo`（其中 foo 是正在使用的 gemset 的名称），但这只会使回溯更长。

任何帮助进一步解决此问题将不胜感激！

**编辑：**在重新安装 Rails、Passenger 和 Ruby（但不是 RVM）之前，我终于通过卸载 Rails、RVM、Ruby（RVM 版本）和Passenger 让我的应用程序正常运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-05T07:41:32.307

如何设置正确的值

如果您不确定将passenger_ruby 设置为什么值，则可以按如下方式找出正确的值。

首先，找出乘客配置工具的位置并记下它：

```
 which passenger-config
    /opt/passenger/bin/passenger-config 
```

接下来，激活您要使用的 Ruby 解释器（如果适用，还可以激活 gemset）。例如，如果您在 RVM 上并且使用 Ruby 2.2.1，则可能需要运行以下命令：

```
 rvm use 2.2.1 
```

最后，使用其完整路径调用乘客配置，将 --ruby-command 作为参数传递：

```
 /opt/passenger/bin/passenger-config --ruby-command
    passenger-config was invoked through the following Ruby interpreter:
      Command: /usr/local/rvm/wrappers/ruby-1.8.7-p358/ruby
      Version: ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
      To use in Apache: PassengerRuby /usr/local/rvm/wrappers/ruby-1.8.7-   p358/ruby
      To use in Nginx : passenger_ruby /usr/local/rvm/wrappers/ruby-1.8.7-p358/ruby
      To use with Standalone: /usr/local/rvm/wrappers/ruby-1.8.7-p358/ruby /opt/passenger/bin/passenger start

    ## Notes for RVM users
    Do you want to know which command to use for a different Ruby interpreter? 'rvm use' that Ruby interpreter, then re-run 'passenger-config --ruby-command'. 
```

输出告诉你要设置什么值。

现在转到 /etc/apache2/mods-available 目录中的乘客.conf 并粘贴上面显示的所需行。

现在执行以下命令，它对我有用，

```
 a2dismod passenger
    a2enmod passenger
    service apache2 restart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T09:07:15.253

您是否更改了`/etc/apache2/mods-available/passenger.conf`ruby​​ 1.9.3 的路径？

不要忘记`a2dismod passenger`and`a2enmod passenger`一旦你这样做了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:10:48.723

尝试在虚拟主机的配置文件中设置 GEM_HOME：

```
<VirtualHost *:80>
  ServerName foo.com
  SetEnv GEM_HOME /home/user/.rvm/gems/ruby-1.9.3-p286
  DocumentRoot /home/user/public/foo.com/public
  <Directory /home/user/public/foo.com/public>
    AllowOverride all
    Options -MultiViews
  </Directory>
</VirtualHost> 
```

问题似乎是当你执行`bundle install`它时使用 rvm ruby​​，而当你执行乘客时它仍然使用 ruby​​ 1.8

# java - Hibernate 实体类不接

> ID：13092296
> 
> 赞同：0
> 
> 时间：2012-10-26T18:20:10.097
> 
> 标签：java, spring, hibernate

我正在尝试使用带有注释的休眠。我用@Entity（确保这是javax.persistance.Entity 而不是Hibernate 的实体）和@Table 注释了我的类。

当我试图用

```
session.createQuery("from HibernateMatchedInvoiceItem").list() 
```

但这失败了，但有以下例外

```
caused by: org.hibernate.hql.ast.QuerySyntaxException: HibernateMatchedInvoiceItem is not mapped [from HibernateMatchedInvoiceItem] 
```

我的会话工厂定义如下。

```
 <bean id="SessionFactory"
      class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"
      parent="AbstractSessionFactory" depends-on="AppConfigHelper">
    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
     </props>
    </property>
    <property name="dataSource" ref="dataSource" /> 
```

我没有定义persistant.xml 文件。这是这个例外背后的原因吗？我的疑问是，既然hibernate想要的一切（数据库连接和类映射）都是通过配置和注释指定的，为什么我们需要明确指定persistance.xml文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:34:01.130

如果您使用注释，那么您必须使用 class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"

例子 ：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="annotatedClasses">
        <list>
            <value>package.classname</value>
        </list>
    </property> 
```

# c# - 通过电子邮件发送使用 ASP 生成的图表

> ID：13092299
> 
> 赞同：1
> 
> 时间：2012-10-26T18:20:19.990
> 
> 标签：c#, email, razor, graph, asp.net-mvc-4

我有一个正在开发的 MVC4 应用程序，我正在尝试找到一种方法来生成一个折线图，然后我可以通过电子邮件发送该折线图。

客户还将在网站上查看类似数据的图表，我想对每个数据使用相同的工具（以实现视觉一致性和维护）。

我研究过使用 Microsoft Chart Controls，但找不到任何 MVC4/Razor 示例或教程。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:22:31.723

所有 Microsoft 图表控件都可以将图表另存为 PNG 文件。您需要保存图表并将其作为 HTML 格式的消息正文的一部分嵌入或附加图像。

**一些示例代码**

这并不多，但它应该让你开始。

```
var chart = new Chart
{
    Height = 300,
    Width = 500
};
chart.Legends.Add(new Legend());
chart.Series.Add(new Series());
chart.ChartAreas.Add(new ChartArea());
chart.Titles.Add(new Title());
chart.SaveImage(savePath); 
```

# extjs - 显示用于异步加载网格的不同掩码 - EXTJS

> ID：13092300
> 
> 赞同：0
> 
> 时间：2012-10-26T18:20:22.643
> 
> 标签：extjs

我有多个异步加载的网格，有没有办法为每个网格显示多个屏蔽消息。现在我有这个代码来显示消息

```
 loadText = 'Searching sentry Data...';
//Use the mask function on the Ext.getBody() element to mask the body element during Ajax calls
    Ext.Ajax.on('beforerequest',function(){Ext.getBody().mask(loadText, 'loading').setHeight(Ext.getBody().getHeight());}, Ext.getBody());
    Ext.Ajax.on('requestcomplete',Ext.getBody().unmask ,Ext.getBody());
    Ext.Ajax.on('requestexception', Ext.getBody().unmask , Ext.getBody()); 
```

我已经添加了代码以在商店的加载功能中添加掩码，但我认为只能显示一个模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:44:53.173

在网格上使用 loadMask:true

# wcf - 关于 wcf 服务托管

> ID：13092301
> 
> 赞同：0
> 
> 时间：2012-10-26T18:20:27.590
> 
> 标签：wcf

我是 wcf 的新手并开始学习。我有一个困惑，我创建了一个小型 wcf 服务，只是不在 IIS、控制台应用程序或 win 服务中托管它，但从另一个应用程序我可以添加 svc 文件的服务引用并发现它正在工作。如果 wcf 无需在“IIS、控制台应用程序或 win 服务”之类的任何地方托管即可工作，那么为什么人们总是在 IIS、控制台应用程序或 win 服务中托管 wcf 服务。谁能告诉我原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:23:47.373

人们通常使用 IIS 和 Windows 服务，因为它们更易于设置和更一致地运行。它们也可以更容易地托管在可以将服务配置为自动启动的服务器上，并且通常 wcf 用作服务器通信方法，通常这是您想要做的。

当您想在本地测试服务时，在控制台应用程序中托管通常更容易设置用于测试目的的简单示例。

虽然尽可能在应用程序中托管，但使用 wcf 在同一台机器上的 2 个应用程序之间进行通信的情况不太常见。

编辑：

您最初的问题是为什么人们总是谈论 IIS、服务等。我的意思是 wcf 通常用于 Web 服务，并且通常在本地计算机以外的服务器上运行。即使它可以用于同一台机器上的进程间通信，这也不是最常见的用例。这就是为什么您会看到很多使用 IIS 的示例，而在 Windows 窗体应用程序中托管它的示例不多。

# javascript - Javascript 历史记录功能不适用于从 iOS 6 上的主屏幕提供的网页

> ID：13092308
> 
> 赞同：21
> 
> 时间：2012-10-26T18:20:47.190
> 
> 标签：javascript, ios6, homescreen

我已经看到了一些其他关于 iOS 6 的新行为的帖子，其中网站保存到主屏幕/从主屏幕启动。在 iOS 5（及更早版本）上，我们能够为应用内的后退按钮使用 Javascript History 功能。但是，在 iOS 6 中，如果您只访问过站点中的一页，它就可以工作。但是，如果您访问过多个页面，则会引发页面未找到错误。它在 Safari 中运行良好（不是从主屏幕），如果我删除`<meta name="apple-mobile-web-app-capable" content="yes" />`标签它就可以工作。但后来我得到了我试图避免的丑陋的浏览器 chrome。

我看过类似的帖子，关于 iOS 6 的更改不再与 Safari 共享数据，但我希望有人遇到过类似的问题，即 iOS 6 中应用程序的主屏幕版本存储/使用的历史信息。

我们正在使用这个调用：`<a href="javascript:history.back();" class="back"></a>`

同样，它在 Safari 中运行良好，在所有旧操作系统中都运行良好。但是当用户点击的页面超过两个时，它会在主屏幕上的 iOS 6 上失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:47:50.207

我的理解是，如果您添加**apple-mobile-web-app-capable**标签 - 它会将已添加书签的页面缓存到主屏幕。

启动书签后的任何后续请求都将导致 safari 浏览器启动 url（添加了丑陋的 chrome）。

您可以进行一些基本的错误检查 - 如果有任何历史记录：

```
function GoBack() {
   if(history.length) {
       history.back();
       return false;
   }
   return true; //follow the regular link
} 
```

你真的应该给你的网址一个适当的 href 值：

```
<a href="http://your_standard_url" class="back" onClick="GoBack()"></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:50:13.647

Have your tried

```
onclick="history.go(-1)" 
```

*   This simple command should work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:15:11.507

尝试其中之一

> > window.history.pushState
> 
> [http://thelink.is/history-api-ios-bug](http://thelink.is/history-api-ios-bug)

或者

> window.history.pushState(data, title, 'a/new/url#');

或者

> window.history.pushState（数据，标题，'a/new/url'）；
> 
> window.location.hash = '新';

# php - 获取提要级别类别 (RSS)

> ID：13092313
> 
> 赞同：0
> 
> 时间：2012-10-26T18:21:02.097
> 
> 标签：php, rss, simplepie

我正在使用 SimplePie。

有没有办法获取提要的类别？现在我只能在提要的项目级别获取类别。我知道提要通常有一个类别，所以无论如何都可以检索这个而不是项目级别的类别？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T18:24:01.730

尝试使用[magpie rss](http://magpierss.sourceforge.net/)。它是最好的提要解析器之一。它易于使用。您实际上可以在“5 分钟”内配置所有内容。

# javascript - jquery删除重复内容的方法

> ID：13092321
> 
> 赞同：0
> 
> 时间：2012-10-26T18:21:45.283
> 
> 标签：javascript, jquery, jquery-selectors, twitter-bootstrap

我有一个使用引导弹出框的弹出框对话框，它从页面底部的另一个 div 填充内容。

html 看起来像：

**我正在循环的元素并将弹出窗口附加到：**

```
<sup id="cite_ref-3-0" class="reference bootstrap-footnote" data-original-title="">
  [<a href="#cite_note-3">3</a>]
</sup> 
```

**文档底部带有填充弹出窗口的引用：**

```
<li id="cite_note-1">
    <b><a href="#cite_ref-1-0">^</a> </b> 
    <a target="_blank" href="http://www.guardian.co.uk/music/musicblog/2009/aug/17/major-labels-spotify/">
         "Behind the music: The real reason why the major labels love Spotify"
    </a> 
    <i>The Guardian.</i>  17 August 2009
</li> 
```

而且我有一个 jquery 函数，它遍历页面上的所有引用，但我不知道如何在填充弹出框之前解析 html。我想删除`<b>`标签和里面的所有东西。

我在变量上尝试了 .remove("b") 的各种组合，但无济于事。我错过了什么？

```
 $element
            .addClass("bootstrap-footnote")
            .each(function(i,item) {
                var footnote_ref = $("a", this).attr("href");
                var footnote_val = $(footnote_ref).html(); //remove("b")
                var footnote = footnote_val; //remove("b")
                $(item).popover({
                    html: true,
                    title: null,
                    content: footnote,
                    delay: { show: 50, hide: 1500 },
                    //placement: "bottom",
                    trigger: "hover"
                });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:05:49.147

我想我明白你现在想要什么

```
$element.addClass("bootstrap-footnote").each(function(i, item) {        
    var liID = $('a',this).attr('href'); // this is your li's id
    var footnote = $(liID).clone().find('b').remove().end();   // clone the li - remove b

    $(item).popover({
        html: true,
        title: null,
        content: footnote.html(),
        delay: {
            show: 50,
            hide: 1500
        },
        //placement: "bottom",
        trigger: "hover"
    });
});​ 
```

# spring - Spring + TestNG 集成测试，注解注入DAO失败

> ID：13092322
> 
> 赞同：5
> 
> 时间：2012-10-26T18:21:48.727
> 
> 标签：spring, testing, testng, spring-annotations

我首先没有提到这个问题的关键组成部分是什么：我在这里使用 TestNG。

我有一个执行持久性的 DAO 层。它作为我的小 Web 应用程序的一部分运行良好（我有一个经典的控制器、服务、DAO 层设计）。如果需要，我可以用我的 XML 更新这个问题。

我的服务层

```
@Service
public class UserServiceImpl implements UserService {

    @Autowired
    private UserDao userDao;

    @Override
    public GoodVibeUserDetails getUser(String username) throws UsernameNotFoundException {

        GoodVibeUserDetails user = userDao.getDetailsRolesAndImagesForUser(username);

        return user;
    }

    // more methods...

} 
```

我的 DAO 层

```
@Repository
public class UserDaoImplHibernate implements UserDao {

    @Autowired
    private SessionFactory sessionFactory;

    // My methods using sessionFactory & "talking" to the Db via the sessionFactory
} 
```

这是我的测试课

```
@Component
public class UserDaoImplHibernateTests{

    @Autowired
    private UserDao userDao;

    private GoodVibeUserDetails user; 

    @BeforeMethod
    public void beforeEachMethod() throws ParseException{
        user = new GoodVibeUserDetails();
        user.setUsername("adrien");
        user.setActive(true);
        // & so on...
    }

    /*
     * When everything is fine - test cases
     */
    @Test
    public void shouldAcceptRegistrationAndReturnUserWithId() throws Exception{
        assertNotNull(userDao) ;
        user = userDao.registerUser(user);
        assertNotNull(user.getId()) ;
    }

    // more test cases...

} 
```

但是对于我的测试类 Autowiring，`userDao`总是返回**Null**，我才开始在 Spring 中进行测试，我有点迷茫。欢迎任何指点。

* * *

Boris Treukhov 回答后的最新编辑

```
import ...
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;
import static org.junit.Assert.assertNotNull;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/applicationContext.xml")
public class UserDaoImplHibernateTests{

    @Autowired
    @Qualifier("userDao")
    private UserDao userDao;

    private GoodVibeUserDetails user; 

    @BeforeMethod
    public void beforeEachMethod() throws ParseException{
        user = new GoodVibeUserDetails();
        user.setUsername("adrien");
        user.setActive(true);
        // & so on...
    }

    /*
     * When everything is fine - test cases
     */
    @Test
    public void shouldAcceptRegistrationAndReturnUserWithId() throws Exception{
        assertNotNull(userDao) ;
        user = userDao.registerUser(user);
        assertNotNull(user.getId()) ;
    }

    // more test methods...

} 
```

这是我的**applicationContext.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:context="http://www.springframework.org/schema/context" 
    xmlns:p="http://www.springframework.org/schema/p" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd 
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd" >

    <!-- the application context definition scans within the base package of the application -->
    <!-- for @Components, @Controller, @Service, @Configuration, etc. -->
    <context:annotation-config />
    <context:component-scan base-package="com.goodvibes" />

    <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" p:location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" 
        p:driverClassName="${jdbc.driverClassName}" p:url="${jdbc.databaseurl}" 
        p:username="${jdbc.username}" p:password="${jdbc.password}" />

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">${jdbc.show_sql}</prop>
                <prop key="hibernate.connection.SetBigStringTryClob">true</prop>
                <prop key="hibernate.jdbc.batch_size">0</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    [...]

</beans> 
```

我没有添加 repository-config.xml 因为这应该足以访问`userDao`. 我仍然让 userDao 等于 null。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T20:16:41.430

如果您创建单元测试，Spring IoC 功能将不可用（正如框架设计者所期望的那样），因为您正在隔离测试您的对象（即您只模拟完成测试所需的最小接口集）。在这种情况下，您应该手动注入您的模拟存储库，例如在 @Before 测试初始化​​方法中。整个想法是你的类只依赖于接口，所以基本上 Spring 容器评估使用哪个类作为接口实现，但是当你创建一个单元测试时，你需要严格控制调用了哪些接口方法（并且有一个最小的依赖集），这就是您手动执行注入的原因。

如果您正在进行集成测试，您应该启动并运行一个 Spring IoC 容器实例，为此您应该使用 jUnit（假设您正在使用 jUnit）特定的测试运行器，如[Spring 文档中的测试](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html)所述。

所以，回到这个问题，你对 jUnit 进行了一个简单的单元测试，并且没有使用 Spring 容器。所以，如果你要使用 Spring TestContext 框架，你应该有类似的东西

```
 @RunWith(SpringJUnit4ClassRunner.class)
   @ContextConfiguration(locations={"/path-to-app-config.xml", "/your-test-specific-config.xml"})
   public class UserDaoImplHibernateTests 
```

而不是`@Component`.

**在 TestNg 案例中更新**我认为应该是（我使用[Spring Dependency Injection 和 TestNG](https://stackoverflow.com/questions/2608528/spring-dependency-injection-with-testng)作为参考）

```
 @ContextConfiguration(locations={"/path-to-app-config.xml", "/your-test-specific-config.xml"})
   public class UserDaoImplHibernateTests extends AbstractTestNGSpringContextTests 
```

另请参阅：[集成测试和单元测试有什么区别？](https://stackoverflow.com/questions/10752/what-is-the-difference-between-integration-and-unit-tests)

# mysql - 比较来自不同表的 mySQL 全文搜索的相关性分数

> ID：13092326
> 
> 赞同：3
> 
> 时间：2012-10-26T18:22:05.140
> 
> 标签：mysql, full-text-search

**场景**：

我有 5 个表都需要搜索。我对每个都有适当的全文索引（索引？）。我可以使用 MATCH 和 AGAINST 单独搜索每个，并按相关性分数排序。

问题是我想组合和交织所有 5 个表的搜索结果，并将其基于相关性分数。像这样：

```
(SELECT *, MATCH(column) AGAINST (query) as score
FROM table1
WHERE MATCH (column) AGAINST (query))
UNION
(SELECT *, MATCH(column) AGAINST (query) as score
FROM table2
WHERE MATCH (column) AGAINST (query))
UNION
...
ORDER BY score DESC 
```

除了表 1 的行数可能是表 2 的两倍之外，这很好用。因此，由于 mySQL 考虑了相关性的唯一性，因此表 1 的结果得分通常明显高于表 2 的结果。

**最终**：如果我想对每个表的结果进行平均加权，如何对 5 个不同大小的表的结果分数进行标准化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:37:06.953

您`UNION`对五个表的结果的了解使我相信您可能应该将五个表合并为一个表（可能还有一个附加列，用于标识目前分布在五个表中的五种数据类型之一）。

同样，您可以仅将文本列存储在一个表中，如下所示：

```
CREATE TABLE text_table (
    text_col TEXT,
    fk INT, -- references the PK of an item in either table1, or table2, or...
    ref_table INT, -- identifies the related table, e.g. 1 means 'table1', etc.
    FULLTEXT INDEX (text_col)
) 
```

然后你可以在这个表上运行全文搜索。`JOIN`用实际的数据表计算结果似乎很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:45:45.587

作为说明：

YaK 上面的建议可能是大多数情况下提出这个问题的最佳选择。我实际采取的路线是记录 5 个表中每一个的平均最高相关性分数。然后，我将所有未来的相关性分数除以该因素，以尝试“标准化”分数，以便将它们与其他表中的相关性分数进行比较。到目前为止，它运行良好，但并不完美（尤其是大型查询）。

# http-headers - HTTP头解析

> ID：13092328
> 
> 赞同：1
> 
> 时间：2012-10-26T18:22:15.130
> 
> 标签：http-headers

您好，我想首先分析和理解，然后优化我网站的 HTTP 标头响应。当我从网站管理员那里获取 Google 时，我得到的是：

> `HTTP/1.1 200 OK`
> 
> `Date: Fri, 26 Oct 2012 17:34:36 GMT` *// 消息发送的日期和时间*
> 
> `Server: Apache` *// 服务器的名字*
> 
> `P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"` *// [P3P](http://en.wikipedia.org/wiki/P3P)电商需要这个吗？*
> 
> `ETag: c4241ffd9627342f5f6f8a4af8cc22ed` *// 标识资源的特定版本*
> 
> `Content-Encoding: gzip` *// 数据使用的编码类型*
> 
> `X-Content-Encoded-By: Joomla! 1.5` *// 这明明是 Joomla 生成的，直接去掉就没有问题吧？*
> 
> `Expires: Mon, 1 Jan 2001 00:00:00 GMT` *// 给出响应被认为是陈旧的日期/时间：由于设置的日期已经过期，这会产生任何冲突吗？*
> 
> `Cache-Control: post-check=0, pre-check=0` *// 这意味着网站没有被缓存？或者是什么？*
> 
> `Pragma: no-cache` *// 任何想法？*
> 
> `Set-Cookie: 5d962cb89e7c3329f024e48072fcb9fe=9qdp2q2fk3hdddqev02a9vpqt0; path=/` *// 为什么我需要为任何页面设置cookie？*
> 
> `Last-Modified: Fri, 26 Oct 2012 17:34:37 GMT`
> 
> `X-Powered-By: PleskLin` *// 这个可以去掉吗？*
> 
> `Cache-Control: max-age=0, must-revalidate` *// 有 2 个缓存控制，这需要修复吗？哪个是prefected？`max-age=0, must-revalidate`? `post-check=0, pre-check=0`?*
> 
> `Keep-Alive: timeout=3, max=100` *// 那是什么？*
> 
> `Connection: Keep-Alive`
> 
> `Transfer-Encoding: chunked` *// 这不应该是 deflate 或 gzip ??*
> 
> `Content-Type: text/html`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:46:50.243

*   **post-check** 定义一个以秒为单位的时间间隔，在此之后必须检查实体的新鲜度。检查可能在向用户显示资源后进行，但确保在下一次往返中缓存的副本将是最新的。 [http://www.rdlt.com/cache-control-post-check-pre-check.html](http://www.rdlt.com/cache-control-post-check-pre-check.html)
*   **pre-check** 定义一个以秒为单位的时间间隔，在该时间间隔之后，必须在向用户显示资源之前检查实体的新鲜度。
*   **Pragma:** no-cache 标头字段是用于请求的 HTTP/1.0 标头。这是浏览器告诉服务器和任何中间缓存它想要一个新版本的资源的一种方式，而不是让服务器告诉浏览器不要缓存资源。一些用户代理在响应中确实会注意此标头，但 HTTP/1.1 RFC 特别警告不要依赖此行为。
*   **Set-Cookie：**当用户以后浏览同一个网站时，网站可以检索cookie中存储的数据，通知网站用户之前的活动。 [1] Cookie 旨在成为网站记住网站状态或用户过去进行的活动的可靠机制。这可以包括单击特定按钮、登录或记录用户甚至在几个月或几年前访问过哪些页面。
*   **X-Powered-By：** 指定支持 Web 应用程序的技术（例如 ASP.NET、PHP、JBoss）。这属于常见的非标准响应标头，可以删除。
*   **Keep-Alive** 它旨在减少网站的连接数。与为网页中的每个图像/css/javascript 创建新连接不同，许多请求将重复使用相同的连接。
*   **Transfer-Encoding：**用于将实体安全地传输给用户的编码形式。当前定义的方法有：chunked、compress、deflate、gzip、identity。

# java - Windows 8 x64 上的 Maven 3.0.4 错误：用法：java [-options] 类 [args...]

> ID：13092330
> 
> 赞同：4
> 
> 时间：2012-10-26T18:22:15.963
> 
> 标签：java, windows, eclipse, maven, maven-3

这是我在这个论坛上的第一篇文章。我对 Maven 3 有疑问。操作系统：Windows 8 Professional RTM。

如果我运行任何 maven 命令（无论如何），我总是会得到以下答案：

> 用法：java [-options] class [args...]（执行一个类）或java [-options] -jar jarfile [args...]（执行一个jar文件）
> 
> 其中选项包括： -server 选择“服务器”虚拟机 -hotspot 是“服务器”虚拟机的同义词 [不推荐使用] 默认虚拟机是服务器。
> 
> ```
> -cp <class search path of directories and zip/jar files>
> -classpath <class search path of directories and zip/jar files>
>               A ; separated list of directories, JAR archives,
>               and ZIP archives to search for class files.
> -D<name>=<value>
>               set a system property
> -verbose[:class|gc|jni]
>               enable verbose output
> -version      print product version and exit
> -version:<value>
>               require the specified version to run
> -showversion  print product version and continue
> -jre-restrict-search | -jre-no-restrict-search
>               include/exclude user private JREs in the version search
> -? -help      print this help message
> -X            print help on non-standard options
> -ea[:<packagename>...|:<classname>]
> -enableassertions[:<packagename>...|:<classname>]
>               enable assertions
> -da[:<packagename>...|:<classname>]
> -disableassertions[:<packagename>...|:<classname>]
>               disable assertions
> -esa | -enablesystemassertions
>               enable system assertions
> -dsa | -disablesystemassertions
>               disable system assertions
> -agentlib:<libname>[=<options>]
>               load native agent library <libname>, e.g. -agentlib:hprof
>                 see also, -agentlib:jdwp=help and -agentlib:hprof=help
> -agentpath:<pathname>[=<options>]
>               load native agent library by full pathname
> -javaagent:<jarpath>[=<options>]
>               load Java programming language agent, see java.lang.instrument
> 
> -splash:<imagepath>
>               show splash screen with specified image 
> ```

我使用了谷歌和论坛搜索，但唯一的结果是一个不同的问题：这是环境变量的问题（其中大多数以附加斜杠结束路径）。

如果我执行 java -version 我得到：

> java 版本 "1.6.0_35" Java(TM) SE Runtime Environment (build 1.6.0_35-b10) Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01, 混合模式)

如果我执行 javac -version 我得到：

> javac 1.6.0_35

我使用的 Maven 版本是 3.0.4。这些是我添加的环境变量（我添加了 M2_HOME 和 MAVEN_HOME 因为我不确定哪个是正确的变量）：

```
CATALINA_OPTS=%MAVEN_OPTS%
CLASSPATH=%JAVA_HOME%\src.zip;%JAVA_HOME%\lib\tools.jar;
JAVA_HOME=C:\Program Files\Java\jdk1.6.0_35
M2_HOME=d:\software\apache-maven-3.0.4
MAVEN_HOME=d:\software\apache-maven-3.0.4
MAVEN_OPTS=-Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m
PATH=%JAVA_HOME%\bin;%MAVEN_HOME%\bin;d:\software\eclipse;%M2_HOME%\bin 
```

path 环境变量有更多路径，但我只是在这里粘贴了我为最后一年的项目添加的路径。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T19:41:22.523

您需要设置的唯一环境变量是：

```
JAVA_HOME=C:\Program Files\Java\jdk1.6.0_35
MAVEN_HOME=D:\software\apache-maven-3.0.4
PATH=%PATH%;%MAVEN_HOME%\bin;%JAVA_HOME%\bin 
```

注意，使用 D: 而不是 d:

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T08:58:19.680

我使用 apache-maven-3.3.1 并看到与我测试的 Alberto 相同的问题，发现当您在以下目录上运行命令时可能会发生错误：“C:\”“D:\”“E:\”.. . 应该去至少 1 个文件夹，例如：“D:\TestApp”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:48:51.140

尝试改变`JAVA_HOME="C:\Program Files\Java\jdk1.6.0_35"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-25T01:39:04.557

我创建了一个文件夹 P:\projects。

我在那个文件夹中运行了 mvn 。mvn 按预期运行。

我将目录更改为 P:\ 以运行 mvn。如本问题所述，mvn 使用 java 使用建议脱口而出错误。

我发现，通过撕开 mvn.bat，Maven 不能接受 JVM 属性

> “-Dmaven.multiModuleProjectDirectory=P:\”

当它的值是设备的根文件夹时。

我还没有在 Linux 中尝试过。

*顺便说一句，我还发现 mvn 有一条拼写错误的错误消息。错误消息是“未定义 multiModuleProjectDirectory**属性**”。起初我读到“multiModuleProjectDirectory 没有**正确**定义”。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-20T14:54:05.580

```
>I found that Maven cannot accept the JVM >property 
>
>
>"-Dmaven.multiModuleProjectDirectory=P:\"
>
>when it's value is the root folder of a device. 
```

除 c:\ 以外的任何目录作为当前目录，现在...

```
mvn -v works. 
```

# mysql - mysql选择号码溢出

> ID：13092337
> 
> 赞同：2
> 
> 时间：2012-10-26T18:22:32.957
> 
> 标签：mysql, sql, random

我有以下查询：

```
SELECT (RAND() * (SELECT MAX(id) FROM frag.test)) 
```

结果：-2.36835027969671e+18
id is a: `id`bigint(20) unsigned

事情是这样的

```
SELECT MAX(id) FROM frag.test 
```

结果15783548581713655808

如果我放置文字数字而不是选择它就可以了

```
SELECT (RAND() * 15783548581713655808 
```

结果为 1.50243050315076e+19

还有以下查询：

```
SELECT RAND()*id from frag.test; 
```

结果是：

```
+----------------------+
| RAND()*id            |
+----------------------+
| 2.90739099802377e+18 |
| 3.18790581714312e+18 |
| 4.55299756382674e+18 |
| 8.53310890373737e+18 |
| 5.32382972831492e+18 |
| 1.13192831652015e+19 |
+----------------------+ 
```

该问题似乎仅在使用 MAX() 时发生。

有人对这里可能发生的事情有任何想法吗？

谢谢！

**编辑：**

正如 coge 所指出的，这与铸造有关。我将查询更改为

```
SELECT (RAND() * (SELECT cast(MAX(id) as decimal(30,10)) FROM frag.test)); 
```

现在它按预期工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:30:22.537

我相信数据类型可能有问题。Rand() 返回一个浮点值。我不是 MySQL 专家，但我想知道浮点是否会继承转换为 int。

尝试将 Rand() 的结果转换为 int 或将 bigint 转换为浮点数或小数。

# c - 将 char[4] 与 int32 结合时克服小端序

> ID：13092338
> 
> 赞同：0
> 
> 时间：2012-10-26T18:22:33.967
> 
> 标签：c, endianness, unions

在我的 little-endian z80-esque 处理器上，我有一个 32 位`long int msk = 0xFFFFFF00`（子网掩码）。`(unsigned char *)&msk`今天早上，当我尝试传递给一个 `void bar(unsigned char * c);`遍历 this 值`&msk`并将它们存储到数据库的函数时，我了解了字节序 。

不幸的是，由于 z80 处理器的 little-endian-ness，数据库“向后”存储值，当另一个函数读回字节时，它会看到`0x00FFFFFF`，这不是正确的子网掩码。

工会有什么简单的方法吗？我想`char[3]`映射到我的 LSB `long int msk`，而不是现在的（`char[0]`获取 LSB）。

总之，Big-Endian 更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:30:44.377

解决字节序问题：每当您将整数序列化到磁盘或网络时，将它们转换为已知的字节顺序。网络顺序又名大端，是最简单的，因为 htonl 和 htons 函数已经存在。或者您可以通过反复拉低低位字节`byte & 0xFF; byte >>= 8`或高位字节来手动完成`((byte >> i*8) & 0xFF)`

如果您有一个`long int`值并且想要它的 LSB，那么使用位移和掩码操作而不是联合或强制转换更便于移植。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:36:38.957

`ntohl`将交换 32 位整数的字节序

# git - 在不更改历史记录的情况下将我的提交重新定位到 master

> ID：13092339
> 
> 赞同：0
> 
> 时间：2012-10-26T18:22:42.873
> 
> 标签：git, rebase, git-rebase

我有一个功能分支和一个主分支。我的功能分支已从 master 分支中签出，但在当前位于 master 分支上的一些提交之前。

我想在 master 分支上重新提交我的提交，但我不希望更改 master 的历史记录，我希望 rebase 一下子应用所有提交并保持回购历史的完整性远程分支。

这可能与 git rebase 吗？

在 master 上执行此操作

`git rebase feature-branch-name`

在我的功能分支上重播了大师的历史，这不是我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T18:31:09.137

是的，这是可能的，而且您的尝试非常接近。你只需要扭转它。

在功能分支中，运行以下命令：

```
git rebase master 
```

请注意，在此过程中可能会提示您解决合并问题。完成后，您将看到 master 的最新提交将出现在您的功能分支中，在您在功能分支中执行的任何提交之前。然后，从 master 分支，你可以运行这个：

```
git merge feature-branch-name 
```

这将导致主分支拥有来自您的功能分支的所有提交。合并时有多种选择。如果您不喜欢从默认设置中获得的内容，请参考 git 文档。

# formatting - 如何在java中格式化a yearsBetween？

> ID：13092342
> 
> 赞同：1
> 
> 时间：2012-10-26T18:22:57.627
> 
> 标签：formatting, jodatime

所以我需要一些帮助来格式化显示字段。

```
/**
 * Creates new form birthTest
 */
public birthTest() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    wrapper = new javax.swing.JPanel();
    jPanel1 = new javax.swing.JPanel();
    jLabel1 = new javax.swing.JLabel();
    innerWrap = new javax.swing.JPanel();
    monthField = new javax.swing.JTextField();
    dayField = new javax.swing.JTextField();
    yearField = new javax.swing.JTextField();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    ageField = new javax.swing.JTextField();
    birthdayField = new javax.swing.JTextField();
    calculate = new javax.swing.JButton();
    jLabel5 = new javax.swing.JLabel();
    jLabel6 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("test");

    jLabel1.setText("BirthDay Tester");

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(85, 85, 85)
            .addComponent(jLabel1)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addContainerGap(15, Short.MAX_VALUE)
            .addComponent(jLabel1)
            .addContainerGap())
    );

    yearField.setToolTipText("Enter a four number year");

    jLabel2.setText("M");

    jLabel3.setText("D");

    jLabel4.setText("Y");

    calculate.setText("Calculate");
    calculate.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            calculateActionPerformed(evt);
        }
    });

    jLabel5.setText("Age");

    jLabel6.setText("Birthday");

    javax.swing.GroupLayout innerWrapLayout = new javax.swing.GroupLayout(innerWrap);
    innerWrap.setLayout(innerWrapLayout);
    innerWrapLayout.setHorizontalGroup(
        innerWrapLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, innerWrapLayout.createSequentialGroup()
            .addContainerGap(16, Short.MAX_VALUE)
            .addComponent(jLabel2)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(monthField, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jLabel3)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(dayField, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jLabel4)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(yearField, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(11, 11, 11))
        .addGroup(innerWrapLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(innerWrapLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(birthdayField, javax.swing.GroupLayout.DEFAULT_SIZE, 67, Short.MAX_VALUE)
                .addComponent(ageField))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(innerWrapLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(innerWrapLayout.createSequentialGroup()
                    .addComponent(jLabel6)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(calculate))
                .addGroup(innerWrapLayout.createSequentialGroup()
                    .addComponent(jLabel5)
                    .addGap(0, 0, Short.MAX_VALUE)))
            .addContainerGap())
    );
    innerWrapLayout.setVerticalGroup(
        innerWrapLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, innerWrapLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(innerWrapLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(monthField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(dayField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(yearField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel2)
                .addComponent(jLabel3)
                .addComponent(jLabel4))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(innerWrapLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(ageField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel5))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(innerWrapLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(birthdayField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(calculate)
                .addComponent(jLabel6))
            .addContainerGap(28, Short.MAX_VALUE))
    );

    javax.swing.GroupLayout wrapperLayout = new javax.swing.GroupLayout(wrapper);
    wrapper.setLayout(wrapperLayout);
    wrapperLayout.setHorizontalGroup(
        wrapperLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, wrapperLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(innerWrap, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addContainerGap())
    );
    wrapperLayout.setVerticalGroup(
        wrapperLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(wrapperLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18)
            .addComponent(innerWrap, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(12, Short.MAX_VALUE))
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(wrapper, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(wrapper, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );

    pack();
}// </editor-fold>

private void calculateActionPerformed(java.awt.event.ActionEvent evt) {                                          
    int month = Integer.parseInt(monthField.getText());
    int day = Integer.parseInt(dayField.getText());
    int year = Integer.parseInt(yearField.getText());
    String birth = monthField.getText() + "/" + dayField.getText() + "/"
                    + yearField.getText();

    DateMidnight birthdate = new DateMidnight(year, month, day);
    DateTime now = new DateTime();
    Years age = Years.yearsBetween(birthdate, now);

    birthdayField.setText(String.valueOf(birth));
    ageField.setText(String.valueOf(age));
}                                         

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(birthTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(birthTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(birthTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(birthTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new birthTest().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JTextField ageField;
private javax.swing.JTextField birthdayField;
private javax.swing.JButton calculate;
private javax.swing.JTextField dayField;
private javax.swing.JPanel innerWrap;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JLabel jLabel5;
private javax.swing.JLabel jLabel6;
private javax.swing.JPanel jPanel1;
private javax.swing.JTextField monthField;
private javax.swing.JPanel wrapper;
private javax.swing.JTextField yearField;
// End of variables declaration 
```

这是我的程序，它目前正在运行并为我提供我想要接受的结果。

年龄输出在输出中有两个字母。我正在使用 joda 时间库。我已经阅读了尽可能多的内容，但无法弄清楚如何格式化输出以删除字母。任何帮助都会很棒，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:10:58.190

当您尝试`age`像以前那样转换为字符串时，`Years.toString()`会调用该方法。在那里，该值被格式化为 ISO8601 持续时间格式：10 年将显示为 P10Y。

要将年龄设为年，请使用

```
int age = Years.yearsBetween(birthdate, now).getYears(); 
```

并显示该值。

# tomcat - Tomcat webapps 目录

> ID：13092345
> 
> 赞同：0
> 
> 时间：2012-10-26T18:23:07.110
> 
> 标签：tomcat, web-applications

我安装了 eclipse 并从那里安装了 Tomcat。我用 eclipse 创建了一个应用程序，它运行良好。我知道Tomcat下的webapps dir中有示例，但它们不运行。我认为当我下载它以指向一个 webapps 文件夹时，eclipse 创建了一条路径，但我想要默认值。我找到了这个：

```
<Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false"> 
```

但它没有帮助我。我运行的应用程序位于“C:\Users\mike\workspace\HelloMike”中，我确信这是一个简单的配置，但我是新手。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:30:27.983

Eclipse WTP 创建一个基于 .metadata 的`CATALINA_BASE`文件，并在您点击部署时将您的应用程序部署到该目录。

# javascript - 在 knockout.js 中保存数据

> ID：13092347
> 
> 赞同：0
> 
> 时间：2012-10-26T18:23:15.130
> 
> 标签：javascript, knockout.js

请帮我解决knockout.js问题：

为什么变量 currentObject 未定义？如何将当前选定的对象保存在某个变量中？

我已经关注下拉列表的 html 视图：

```
 <select data-placeholder="Select object" class="span5" id="objects" data-bind="options: objects, optionsText: 'Name', optionsValue: 'Id', value: currentObject">
                    <option></option>
 </select> 
```

模型视图：

```
function baseViewModel() {
    self.objects = ko.observableArray([]);

    ...

    self.currentObject = ko.observable();

    ...

    self.func = function() {

        //allert(self.objects()[0].Name) //return correct Name
        alert(self.currentObject().Name) //returns undefinded

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:12:25.170

在您的数据绑定中，您确实会在 currentObject 和选择的*value*`value: currentObject`之间进行双向绑定。

 *选择的值设置为`Id`所选选项对象的字段（因为`optionsValue: 'Id'`在您的数据绑定中）。因此，currentObject 将被设置为所选对象的 Id 字段，这就是为什么这样做`.Name`会让你不确定。

我建议完全不要使用`optionsValue`，这样 KO 将处理该值，并且好像选择框的值是实际选择的对象，`value: currentObject`并将正确地将 currentObject 设置为选择的对象。（如果您确实想使用`optionsValue`，那么要知道 currentObject 将被设置为对象的字段，而不是对象本身）

小提琴：http: [//jsfiddle.net/antishok/KXhem/78/](http://jsfiddle.net/antishok/KXhem/78/)*

# powershell - 调用 powershell cmdlet 时参数顺序有多重要？

> ID：13092352
> 
> 赞同：4
> 
> 时间：2012-10-26T18:23:21.423
> 
> 标签：powershell, syntax, parameters, conventions

在 PowerShell (PS) 中，按照官方语法中定义的顺序使用 cmdlet 参数是否重要？

我正在将`-cc`参数添加到现有脚本中的 send-mailMessage 中。我`-cc`之后立即添加`-To`，它工作得很好，所以我倾向于独自离开。但是 cmdlet 的唯一参数集在帮助文本中定义如下：

```
Send-MailMessage [-To] <String[]> [-Subject] <String> [[-Body] <String> ] [[-SmtpServer] <String> ] -From <String> [-Attachments <String[]> ] [-Bcc <String[]> ] [-BodyAsHtml] [-Cc <String[]> ] [-Credential <PSCredential> ] [-DeliveryNotificationOption <DeliveryNotificationOptions> ] [-Encoding <Encoding> ] [-Port <Int32> ] [-Priority <MailPriority> ] [-UseSsl] [ <CommonParameters>] 
```

所以我认为最佳实践是运行这样的命令（在主题、正文、smtpserver 和 from 之后，按照帮助文本运行）：

```
send-mailmessage -to $mailTo -subject $mailSubj -body $msgbody -smtpserver smtp.domain.tld -from $mailFrom -cc $mailCC 
```

...而不是像这样（在许多其他参数之前 cc）：

```
send-mailmessage -to $mailTo -cc $mailCC -subject $mailSubj -body $msgbody -smtpserver smtp.domain.tld -from $mailFrom 
```

总的来说，我对此并没有特别小心，而且东西很有效。因此，按照这些思路返回并调整现有的功能脚本肯定是矫枉过正（更不用说容易出错了）。但也许值得在未来的脚本中尊重参数顺序？还是不值得麻烦？你说什么？

当然，您不想对哪个参数是默认参数做出错误的假设，然后省略参数名称；我也可以想象这种事情会因自定义函数等而变得混乱。但我的问题是关于更简单的情况，即显式命名内置 cmdlet 的参数时，如上面的`send-mailMessage`示例所示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T18:35:57.600

如果您在调用 cmdlet 时命名参数（例如`Get-ChildItem -Path *.txt`），那么指定它们的顺序无关紧要。所有内容都完全由名称指定，因此解析参数时不需要提供参数的顺序。

如果你没有命名你的参数（例如`Get-ChildItem *.txt`），那么它确实很重要。cmdlet 作者可以指定某些参数可以/应该按特定顺序在没有名称的情况下被预期。Powershell 引擎将尽最大努力实现这一点，并且通常它会尝试将未命名的参数与尚未分配的任何参数配对。

查看有关参数类型的[此页面](https://docs.microsoft.com/en-us/powershell/scripting/developer/cmdlet/types-of-cmdlet-parameters)以获取更多技术信息。

# c# - 如何使用 Regex 在整个 XML 中搜索单词？

> ID：13092353
> 
> 赞同：0
> 
> 时间：2012-10-26T18:23:25.247
> 
> 标签：c#, xml, regex, silverlight

在我的 XML 中，我想搜索 Text=" 如果它不存在，那么我想这样做

```
XMLString = Regex.Replace(XMLString,@"(?<=<Run[^<]*)>", " Text=\"",RegexOptions.IgnoreCase); 
```

现在在整个 XML 中查找 Text=" 的正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:41:05.870

```
if (Regex.IsMatch(XMLString," Text=\"")==false)
           XMLString = Regex.Replace(XMLString,@"(?<=<Run[^<]*)>", " Text=\"",RegexOptions.IgnoreCase); 
```

# ruby-on-rails - Rails form_for 正在吞噬整个 new.html

> ID：13092356
> 
> 赞同：0
> 
> 时间：2012-10-26T18:23:43.297
> 
> 标签：ruby-on-rails, ajax, forms, ruby-on-rails-3.2

我正在尝试放置一个引导模式来在另一个模型的新页面中创建一个模型。html如下：

新的.html：

```
<div class="page-header">
  <h1>Novo Parceiro</h1>
</div>

<%= render :partial => 'form' %>

<%= render :partial => "/contatos/form" %> 
```

_form.html：

```
<%= form_for @parceiro, :html => { :class => "ketchup" } do |f| %>

(fields and submit here...)

<% end %>

<script type="text/javascript">
    // some javascript here OUTSIDE the form
</script> 
```

但是当页面被加载时，new.html 中的所有内容，包括部分“/contatos/form”，它是另一个模型的 ajax-able 表单，都在@parceiro 的标记内呈现。

为什么 Rails 会这样做，以及如何将我的第二个表单保留在第一个表单之外？事实上，我不能使用 AJAX，因为嵌套表单不能很好地工作（事实上，即使是 html 规范也是错误的）

[编辑]：问题已解决，我在第一个表单中有一个带有自结束标记 () 的 div，所以我将其更改为常规结束标记，它现在可以工作了。

# bash - 如何删除bash中的多余空格？

> ID：13092360
> 
> 赞同：33
> 
> 时间：2012-10-26T18:23:59.370
> 
> 标签：bash, removing-whitespace

如何删除变量中的多余空格`HEAD`？

```
HEAD="    how to  remove    extra        spaces                     " 
```

结果：

```
how to remove extra spaces 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-26T18:25:37.177

尝试这个：

```
echo "$HEAD" | tr -s " " 
```

或者您可能想将其保存在变量中：

```
NEWHEAD=$(echo "$HEAD" | tr -s " ") 
```

**更新**

要删除前导和尾随空格，请执行以下操作：

```
NEWHEAD=$(echo "$HEAD" | tr -s " ")
NEWHEAD=${NEWHEAD%% }
NEWHEAD=${NEWHEAD## } 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-27T11:49:08.857

使用 awk：

```
$ echo "$HEAD" | awk '$1=$1'
how to remove extra spaces 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-26T20:22:15.207

利用不引用变量的分词效果

```
$ HEAD="    how to  remove    extra        spaces                     "
$ set -- $HEAD
$ HEAD=$*
$ echo ">>>$HEAD<<<"
>>>how to remove extra spaces<<< 
```

如果您不想使用位置参数，请使用数组

```
ary=($HEAD)
HEAD=${ary[@]}
echo "$HEAD" 
```

* * *

不引用的一个危险副作用是[文件名扩展](https://www.gnu.org/software/bash/manual/bashref.html#Filename-Expansion)将起作用。所以先关闭它，然后重新启用它：

```
$ set -f
$ set -- $HEAD
$ set +f 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-06T03:30:29.167

这匹马还没有完全死去：让我们继续打败它！*

## 读入数组

[其他人](https://stackoverflow.com/a/13583095/418413)已经提到过`read`，但是由于使用不带引号的扩展可能会导致不需要的扩展，因此使用它的所有答案都可以被视为或多或少相同。[你可以做](https://stackoverflow.com/a/13093896/418413)

```
set -f
read HEAD <<< $HEAD
set +f 
```

或者你可以做

```
read -rd '' -a HEAD <<< "$HEAD"  # Assuming the default IFS
HEAD="${HEAD[*]}" 
```

## 带有参数扩展的扩展通配符

```
$ shopt -s extglob
$ HEAD="${HEAD//+( )/ }" HEAD="${HEAD# }" HEAD="${HEAD% }"
$ printf '"%s"\n' "$HEAD"
"how to remove extra spaces" 
```

*实际上没有马受到伤害——这只是一个简单问题得到六个以上不同答案的隐喻。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-26T19:50:21.810

以下是我将如何使用 sed：

```
string='    how to  remove    extra        spaces                     '
echo "$string" | sed -e 's/  */ /g' -e 's/^ *\(.*\) *$/\1/'

=> how to remove extra spaces   # (no spaces at beginning or end) 
```

第一个 sed 表达式用一个空格替换任何超过 1 个空格的组，第二个表达式删除任何尾随或前导空格。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-13T17:59:50.307

`echo -e " abc \t def "|column -t|tr -s " "`

`column -t`将要：

1.  删除行首和行尾的空格
2.  将制表符转换为空格

`tr -s " "`将多个空间压缩到单个空间

* * *

顺便说一句，要查看您可以使用的整个输出`cat - -A`：显示所有空格字符，包括制表符和 EOL：

`echo -e " abc \t def "|cat - -A`

输出：`abc ^I def $`

`echo -e " abc \t def "|column -t|tr -s " "|cat - -A`

输出： `abc def$`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-06T14:05:45.443

空白可以采用***空格***和***制表符***的形式。尽管它们*是非打印字符*并且我们看不到，但`sed`其他工具将它们视为不同形式的空白，并且仅根据您的要求进行操作。即，如果您告诉`sed`删除 x 个***空格***，它将执行此操作，但表达式将不匹配***tabs***。反之亦然 - 提供一个***制表符***，`sed`它不会匹配***空格***，即使它们的数量等于***制表符***中的那些。

一个更具可扩展性的解决方案可以删除***空格***和***制表符***形式的额外空间（我已经在您的样本变量中测试了两者的混合）是：

```
echo $HEAD | sed 's/^[[:blank:]]*//g' 
```

或者我们可以收紧@Frontear 的`xargs` *不*使用的极好建议`tr`：

```
echo $HEAD | xargs 
```

但是，请注意，`xargs`这也会删除换行符。因此，如果您要`cat`创建一个文件并将其通过管道传输到`xargs`，则所有额外的空格（包括换行符）都将被删除，并且所有内容都放在同一行;-)。

在我的测试中，上述两项都达到了您想要的结果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-26T19:44:35.470

试试这个：

```
echo '    how to  remove    extra        spaces                     ' | sed 's/^ *//g' | sed 's/$ *//g' | sed 's/   */ /g' 
```

或者

```
HEAD="    how to  remove    extra        spaces                     "
HEAD=$(echo "$HEAD" | sed 's/^ *//g' | sed 's/$ *//g' | sed 's/   */ /g') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-25T15:41:11.643

不带引号的 echo 变量可以满足您的要求：

```
HEAD="    how to  remove    extra        spaces      "
echo $HEAD

# or assign to new variable
NEW_HEAD=$(echo $HEAD)
echo $NEW_HEAD 
```

输出：`how to remove extra spaces`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-09T23:15:50.733

我会使用[tr](https://linux.die.net/man/1/tr)来删除多余的空格，并使用[xargs](https://linux.die.net/man/1/xargs)来修剪前后。

```
TEXT="     This          is  some                             text   "
echo $(echo $TEXT | tr -s " " | xargs)

# [...]$ This is some text 
```

# ajax - 通过发送对象值的 Jquery Annotate / PHP 错误

> ID：13092365
> 
> 赞同：0
> 
> 时间：2012-10-26T18:24:21.983
> 
> 标签：ajax

发送 var annotation_id：

```
echo $json = json_encode(array('annotation_id'=>$save[0])); 
```

获取 var annotation_id：

```
if (image.useAjax) {
      $.ajax({
           url: image.saveUrl,
           data: form.serialize(),
           error: function(e) { 
             alert("An error occured saving that note.");
           },
           success: function(data) {
                 if (data.annotation_id != undefined) {
                     editable.note.id = data.annotation_id;                         
                     alert(editable.note.id);
                }
          },
          dataType: "json"
       });
 } 
```

那么......我的代码有什么问题？没有得到这个变量的值。

# c - 使用安全函数将字符串添加到 C 中的字符串

> ID：13092366
> 
> 赞同：4
> 
> 时间：2012-10-26T18:24:29.127
> 
> 标签：c, string, strcat-s

我想将一个文件名复制到一个字符串并将“.cpt”附加到它。但是我无法使用安全功能（strcat_s）来做到这一点。错误：“字符串不是空终止的！”。我确实设置了'\0'，如何使用安全功能解决这个问题？

```
size = strlen(locatie);
size++;
nieuw = (char*)malloc(size+4);
strcpy_s(nieuw, size, locatie);
nieuw[size] = '\0';
strcat_s(nieuw, 4, ".cpt"); // <-- crash
puts(nieuw); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T18:29:39.657

_s 函数的`size`参数是目标缓冲区的大小，而不是源缓冲区。该错误是因为第一个字符中没有空终止`nieuw`符。试试这个：

```
size = strlen(locatie);
size++;
int nieuwSize = size + 4;
nieuw = (char*)malloc(nieuwSize );
strcpy_s(nieuw, nieuwSize, locatie);
nieuw[size] = '\0';
strcat_s(nieuw, nieuwSize, ".cpt"); // <-- crash
puts(nieuw); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:47:27.600

也许一些标准解决方案？

```
const char * const SUFFIX = ".cpt";
size = strlen(locatie) + strlen(SUFFIX) + 1;  // +1 for NULL
nieuw = (char*)malloc(size);
snprintf(nieuw, size, "%s%s", locatie, SUFFIX); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:48:04.660

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void)
{
    char old[] = "hello";
    size_t size = strlen(old) + 5;;
    char *new_name = (char*)malloc(size);
    new_name[size-1] = '\0';
    strcpy_s(new_name, size, old);
    strcat_s(new_name, size, ".cpp");
    printf("%s\n", new_name);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T18:27:09.953

为什么不

```
size = strlen(locatie);
size++;
nieuw = (char*)malloc(size+6);
strcpy_s(nieuw, size, locatie);
strcat_s(nieuw, 4, ".cpt");
puts(nieuw);
nieuw[size + 5] = '\0'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T18:27:53.577

退房`asprintf`。它允许您打印到像 printf 这样的字符串

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T18:33:58.623

```
size = strlen(locatie);
size++;
nieuw = (char*)malloc(size+4);
strcpy_s(nieuw, size, locatie);
nieuw[size] = '\0';
strcat_s(nieuw, size, ".cpt");
puts(nieuw) 
```

;

# c# - C# 中用于字符串的 OR 操作数

> ID：13092367
> 
> 赞同：1
> 
> 时间：2012-10-26T18:24:34.880
> 
> 标签：c#, string, operands

C# 中没有用于字符串的 OR 操作数吗？

我正在查看 Microsoft C# 操作数页面 - 没有任何类型的 OR 字符串。

我有一个我正在尝试编写的 if 语句：

```
if (Convert.ToString(r["first_name"]) != "Antoine" || "Brad" || "Programming" || "Admin" || "Patricia")
                                   { 
```

哪个 C# 因此错误而窒息：

```
CS0019: Operator '||' cannot be applied to operands of type 'bool' and 'string' 
```

我习惯了 Python 和 PHP，在这些地方可以做类似的事情。

C# 的正确语法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T18:27:21.427

您可以将其设为集合，然后使用 contains

```
if (!(new []{"Antoine", "Brad", "Programming", "Admin", "Patricia"}.Contains(Convert.ToString(r["first_name"]))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T18:25:20.607

你不能那样做。

相反，你可以写

```
if (someString != "a" && someString != "b" && ...) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T18:27:05.583

```
if ((r["first_name"]) != "Antoine" || (r["first_name"]) != "Brad" || (r["first_name"]) !="Programming" || (r["first_name"]) != "Admin" ||r(["first_name"]) != "Patricia") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T18:30:37.873

在代码的某处，声明要检查的值。

```
var badNames = new HashSet<string> {"Antoine", "Brad", "Programming", "Admin", "Patricia"}; 
```

然后稍后当您需要查看该字符串是否在集合中时。

```
if(!badNames.Contains(Convert.ToString(r["first_name"]))){
    return "Its all good.";
} 
```

作为一个额外的好处，`HashSet`构造函数可以使用一个比较器，它可以让你进行不区分大小写的比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T18:29:39.730

在 C# 中，您可以将这些字符串放在一个数组中并验证是否包含 r["first_name"]：

```
 var names = new[]{ "Antoine", "Brad", "Programming", "Admin", "Patricia" };

        if (names.Contains(Convert.ToString(r["first_name"])))
        {
            //doSomething
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T18:30:13.350

我建议将您想要 OR 的字符串放入一个数组中，然后检查该数组是否包含名字。

所以：

```
var names = new [] {"Antoine", "Brad", "Programming", "Admin", "Patricia"}; 
```

然后：

```
var match = names.Contains(r["first_name"]); 
```

# javascript - javascript对象文字表示法和添加到对象之间的区别

> ID：13092371
> 
> 赞同：1
> 
> 时间：2012-10-26T18:24:54.810
> 
> 标签：javascript

有人可以解释下面的代码中发生了什么吗？我希望 toString 会同时为 foo 和 bar 调用，或者两者都不调用。文字对象表示法与在创建对象后向对象添加字段有何不同？

```
function Obj(v) {
    this.v = v;    
};

Obj.prototype.toString= function() {
    window.alert("to string called for " +
                this.v);
    return this.v.toString();
}        

var foo = new Obj('foo');
var bar = new Obj('bar');

// toString is not called here.
var map = {foo : 'blah'};
// toString is called here.
map[bar] = "blah2"; 
```

为什么对象文字不使用 toString() 而添加到现有对象确实使用 toString()？

[http://jsfiddle.net/pByGJ/2/](http://jsfiddle.net/pByGJ/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:34:03.690

对象文字不评估冒号左侧的标识符的主要原因是您不必强制引用所有文字名称（就像在 JSON 中所做的那样）。

括号表示法强制您引用属性名称，如果不这样做，它将被评估为变量。

`toString()`在第二个示例中调用的原因是`bar`必须将其转换为字符串才能用作属性名称。

在您的第一个示例中，您只是创建了一个文字对象（与 完全相同 `{"foo" : 'blah'}`）。所以从不使用变量`foo`

如果要使用变量名创建对象，则不能使用文字对象表示法，必须使用`[]`which 强制它调用`toString()`

这是一个在一个表达式中创建具有变量名的对象的函数。

```
function obj(key, value /*, key, value, ... */) {
    var obj = {};
    for (var i = 0, ln = arguments.length ; i < ln; i+=2) {
        obj[arguments[i]] = arguments[i+1];
    }
    return obj;
} 
```

# 更清晰的例子

您的变量名称和值相同的事实无助于理解问题。让我建议这段代码

```
var foo = new Obj('fooValue');
var bar = new Obj('barValue');

var map = {foo : 'blah'};
map[bar] = "blah2";

// You expect map to be {fooValue: 'blah', barValue: 'blah2'}
// But it's {foo: 'blah', barValue: 'blah2'} 
```

做你需要的，使用我的`obj`功能

```
// Almost as clear as literal notation ???
var map = obj(
    foo, 'blah',
    bar, 'blah2'
);
// map = {fooValue: 'blah', barValue: 'blah2'} Yay!! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:45:34.847

对象文字中的键被视为字符串，而不是解释为变量。这：

```
var map = {foo : 'blah'}; 
```

相当于：

```
var map = {"foo" : 'blah'}; 
```

还有这个：

```
var map = {};
map["foo"] = "blah"; 
```

但与此完全不同：

```
var map = {};
map[foo] = "blah"; 
```

# php - 删除部分 URL

> ID：13092373
> 
> 赞同：0
> 
> 时间：2012-10-26T18:25:05.563
> 
> 标签：php, wordpress, .htaccess, url-rewriting

我必须将一家商店从 Zen 购物车转移到 Wordpress Woocommerce，但该公司网站已经针对 SEO 进行了优化，并且列出得很好，而且他们已经在整个 google 上都有链接。

原始站点具有以下 url 结构

www.mysite.co.uk/{category-name} & www.mysite.co.uk/{category-name}/{product-name}

wordpress/woocommerce 网址看起来像这样

www.mysite.co.uk/product-category/{category-name} &

www.mysite.co.uk/product/{category-name}/{product-name}

我需要删除“产品类别”和“产品”。

目前我不在乎解决方案有多复杂，它不需要为将来添加的类别维护这种结构，只需要在谷歌上列出的类别。

我确实希望这能引起降神会，并会感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:36:23.273

最简单的解决方案是在 .htaccess 中使用 RewriteRule。

```
RewriteEngine on
RewriteRule ^product-category/(.+) $1 [L]
RewriteRule ^product/(.+) $1 
```

那样的东西，还没有测试通过，但我希望你有一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T09:32:10.937

为什么不进行 301 重定向到新链接？它会保留我认为的 url 值和位置..

# ios - 切换到另一个 ViewController 时如何停止播放视频？

> ID：13092374
> 
> 赞同：2
> 
> 时间：2012-10-26T18:25:05.917
> 
> 标签：ios, xcode, uiwebview, youtube

我有这个可以让我在我的 ipad 应用程序中播放 youtube 视频。但是，当我切换视图时，视频不会停止在后台播放。我是否必须添加任何内容以使其在视图切换时停止播放？

```
- (void)viewDidLoad
 {
    [super viewDidLoad];
    NSURL *videoURL = [NSURL URLWithString:@"http://www.youtube.com/embed/123456"];

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:videoURL];
    UIWebView * YoutubeVideo = [[UIWebView alloc] init];

    YoutubeVideo.frame = CGRectMake(176,243,556,335);

    [self.view addSubview:YoutubeVideo];

    [YoutubeVideo loadRequest:requestObj];

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:32:13.423

```
-(void)viewWillDisappear:(BOOL)animated
    {
        [self.YoutubeVideo loadHTMLString:nil baseURL:nil];
    } 
```

这应该可以工作。当视图消失时，webview 什么都没有，当视图返回 viewWillAppear 而不是 viewDidLoad 时，再次加载视频，将 youtubeVideo webview 保留为属性，以便您可以在每种方法中访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T19:05:41.363

Youtube 提供了名为 YTPlayer 的播放器。您可以导入其库，并按如下方式使用：

1.  在您的 podfile 中，您应该有以下行：

    pod "youtube-ios-player-helper", "~> 0.1.4"

2.  在 ViewController.h 文件中，您必须：

一个。导入 YTPlayer.h 文件：

```
#import "YTPlayer.h" 
```

湾。在界面中定义：

```
@property(nonatomic, strong) IBOutlet YTPlayerView *playerView; 
```

3.  在 ViewController.m 文件中，你有这个函数：

    *   (void)viewWillDisappear: (BOOL)animated {

        [self.playerView stopVideo];

    }

这个对我有用。

# iphone - UIGraphicsBeginImageContext，来自应用程序的电子邮件图像

> ID：13092377
> 
> 赞同：0
> 
> 时间：2012-10-26T18:25:33.550
> 
> 标签：iphone, ios, uiimage

我正在尝试附加从 UIGraphicsBeginImageContext 呈现的图像。作为测试，我也将图像添加到相册中。这一切都在模拟器上完美运行，但在设备上，正确的图像被添加到相册中，但不会正确显示在电子邮件附件中。我认为这是因为它是一个大图像，并且在 iPhone 3gs 上需要一些时间。这意味着我必须检查它是否已完成渲染图像。有没有办法做到这一点？这是我的代码：

```
UIGraphicsBeginImageContext(backGround.layer.frame.size);
[backGround.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
UIGraphicsEndImageContext();

MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
mailer.mailComposeDelegate = self;
NSData *imgData = UIImagePNGRepresentation(image);
[mailer addAttachmentData:imgData mimeType:@"image/png" fileName:@"myfilename"]; 
```

我想知道，也许它还没有完全完成图像，当我制作它的 PNG 表示时，它仍然有损坏的数据。我可以以某种方式检查 UIImage 是否“完成”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:39:23.150

尝试实现完成方法并检查它。一个例子是，

```
UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), NULL);

- (void)image:(UIImage *) image didFinishSavingWithError:(NSError *) error contextInfo: (void *) contextInfo {
        NSLog(@"SAVE IMAGE COMPLETE");
        if(error != nil) {
            NSLog(@"ERROR SAVING:%@", [error localizedDescription]);
        }

    } 
```

根据错误消息，您可以调试错误消息。查看[`UIImageWriteToSavedPhotosAlbum`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageWriteToSavedPhotosAlbum)以获取更多详细信息。

# ios - 如何针对四核 GPU 优化我的代码？

> ID：13092380
> 
> 赞同：-3
> 
> 时间：2012-10-26T18:25:42.777
> 
> 标签：ios, ipad, opengl-es-2.0, gpu

当前和以前的 iPad 型号使用四码 GPU。谁能告诉我如何——作为一个 3D 开发者——我可以充分利用多核架构。为了获得最佳性能，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:07:47.217

没有什么; 这是[对“四核”一词的滥用](http://www.extremetech.com/computing/121993-apple-a5x-is-the-new-ipad-quad-core-or-not)。

桌面 GPU 有数十或数百个“处理器”——顶点处理器、着色器处理器、“流处理器”（多个流处理器通常组合成一个着色器处理器）。这是因为典型的 3D 渲染本质上是并行的：顶点可以独立投影，像素通常可以为每个阶段独立渲染，相邻像素通常具有相邻输入（例如纹理的相同区域），这使得缓存更容易。所有这些通常由 GPU 处理。

如果您编写自己的像素着色器，您可能需要做更多的阅读和性能比较，但这并不真正取决于“核心”的数量——像素着色器语言中使用的结构默认情况下往往是可并行化的。（这并不意味着如果你尝试编写不可并行化的代码并不容易，但除非你试图获得糟糕的性能，否则你应该没问题。）

# html - 保证金已调整，但区块未调整

> ID：13092382
> 
> 赞同：0
> 
> 时间：2012-10-26T18:25:50.627
> 
> 标签：html, css

我在网站上的某些页面上遇到问题。它们都使用相同的代码 (index.php)，包括来自文本文件的内容。

主页上的页脚很好，大多数内页都很好。 [http://dev.epicwebdesign.ca/korokriver/?page=home](http://dev.epicwebdesign.ca/korokriver/?page=home)

然而，有些看起来像这样： [http ://dev.epicwebdesign.ca/korokriver/?page=mikwanwest](http://dev.epicwebdesign.ca/korokriver/?page=mikwanwest)

可以描述它的最佳方式是 -17px 边距将页脚向上移动，但不会缩小某些页面上的 #site 块，但在其他页面上工作正常。

使用 chrome 检查代码时，就好像该块从其余部分突出。我不知道这是怎么回事。

它与复制div的高度有关。如果它设置为 100% 高度，它看起来很好。`min-height:100%`仅有时有效。

蓝色是块，橙色是边距。他们应该是水平的。

![在此处输入图像描述](../Images/6396f2255632b59d0f1c3ce7ccd61bf8.png)

这就是它应该的样子 ![在此处输入图像描述](../Images/f5bd8fc71009027abc1eee2447e8cde0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:46:09.303

使用绝对定位。回答自己的问题，以便可以关闭。

# .net - 在TreeView的SelectedItem中修改Collection中的对象

> ID：13092384
> 
> 赞同：0
> 
> 时间：2012-10-26T18:26:06.783
> 
> 标签：.net, wpf, binding, treeview, datacontext

对象模型：客户有很多研究有很多科目有很多记录。树视图包含客户/研究/主题，记录在 MainDataGrid 中。

问题：当我修改数据网格中 Record 对象的双向绑定属性之一时，Record 对象上的 setter 永远不会被调用。我不确定如何解决这个问题，因为我仍然对 wpf 绑定模型/对象模型了解不够，无法找出原因。

这不是 MVVM 应用程序。在代码隐藏中，在 _loaded 事件期间，我加载了一些数据并通过良好实现的 ObservableCollection 将其分配给 TreeView 的数据上下文。在 TreeView 的 SelectedItemChanged 事件中，我加载相关记录和连接属性更改的处理程序。

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:HPA.Studies.MCA.Client"
Title="Medra Coding Assistant" Height="800" Width="1250" MouseRightButtonDown="HandleRightClick">
<Window.Resources>
    <local:HistoryTypeConverter x:Key="HistoryTypeConverter" />
    <DataTemplate x:Key="MedraValuesTemplate">
        <UniformGrid Columns="2" Rows="5">
            <TextBlock Grid.Row="0" Grid.Column="0" Text="MedDRA LLT:" />
            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding CodeValue2, Mode=TwoWay}"/>
            <TextBlock Grid.Row="1" Grid.Column="0" Text="MedDRA PT:" />
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding CodeValue1, Mode=TwoWay}"/>
            <TextBlock Grid.Row="2" Grid.Column="0" Text="MedDRA HLT:" />
            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding CodeValue3, Mode=TwoWay}"/>
            <TextBlock Grid.Row="3" Grid.Column="0" Text="MedDRA HLGT:" />
            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding CodeValue4, Mode=TwoWay}"/>
            <TextBlock Grid.Row="4" Grid.Column="0" Text="MedDRA SOC:" />
            <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding CodeValue5, Mode=TwoWay}"/>
        </UniformGrid>
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="8*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="0" Grid.ColumnSpan="3">
        <TextBlock Text="Medra Coding Assistant" FontSize="15" FontWeight="Bold" />
        <TextBlock Text="Available Batches:" />
    </StackPanel>
    <Grid x:Name="BindingRootGrid"  Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="5*"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>
        <TreeView x:Name="tvClients" Grid.Column="0" ItemTemplate="{StaticResource NavigatorTemplate}" ItemsSource="{Binding}">
        </TreeView>
        <GridSplitter Grid.Column="1" VerticalAlignment="Stretch" HorizontalAlignment="Left" Width="6" Panel.ZIndex="1" />
        <DataGrid x:Name="MainDataGrid" Grid.Column="1" AutoGenerateColumns="False"
                  DataContext="{Binding ElementName=tvClients, Path=SelectedItem}" ItemsSource="{Binding Path=Records}">
            <DataGrid.Columns>
                <DataGridHyperlinkColumn Header="    " />
                <DataGridTextColumn Header="Discrim" Binding="{Binding Discriminator, Mode=OneWay}" />
                <DataGridTextColumn Header="Field Name" Binding="{Binding FieldName, Mode=OneWay}" />
                <DataGridTextColumn Header="Field Value" Binding="{Binding FieldValue, Mode=OneWay}" Width="160">
                    <DataGridTextColumn.ElementStyle>
                        <Style>
                            <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                            <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTemplateColumn Header="MedDRA Value" CellTemplate="{StaticResource MedraValuesTemplate}" />
            </DataGrid.Columns>
        </DataGrid>
        <GridSplitter Grid.Column="2" VerticalAlignment="Stretch" HorizontalAlignment="Left" Width="6" Panel.ZIndex="1" />
        <DataGrid x:Name="HistoryDataGrid" Grid.Column="2" AutoGenerateColumns="False"
                  DataContext="{Binding ElementName=MainDataGrid, Path=SelectedItem, Mode=OneWay}" ItemsSource="{Binding Path=HistoryList}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="DateTime" Binding="{Binding Path=TimeStamp, Mode=OneWay}"/>
                <DataGridTextColumn Header="Event Type" Binding="{Binding Path=Description, Converter={StaticResource HistoryTypeConverter}, Mode=OneWay}"/>
                <DataGridTextColumn Header="Data" Binding="{Binding Path=Data, Mode=OneWay}" Width="80">
                    <DataGridTextColumn.ElementStyle>
                        <Style>
                            <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                            <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="User" Binding="{Binding Path=UserName, Mode=OneWay}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
    <Border Grid.Row="2" Grid.ColumnSpan="3">
        <TextBlock Text="Control Panel Goes here" />
    </Border>
</Grid> 
```

缺失的 TreeView ItemTemplate：

```
<HierarchicalDataTemplate x:Key="BatchesTemplate" ItemsSource="{Binding Formats}">
    <TextBlock Text="{Binding Path=BatchName}" />
    <HierarchicalDataTemplate.ItemTemplate>
        <HierarchicalDataTemplate>
            <TextBlock Text="{Binding Name}" />
        </HierarchicalDataTemplate>
    </HierarchicalDataTemplate.ItemTemplate>
</HierarchicalDataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:35:19.203

如果您想在更改 TextBox 中的文本后立即更改 Source，则需要将其设置为`UpdateSourceTrigger`。默认是`PropertyChanged`.`TextBox``LostFocus`

```
<TextBox Text="{Binding YourBinding, UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:02:26.077

原来与[这个问题](https://stackoverflow.com/a/12640543/996194)非常相似。该问题已通过将 UpdateSourceTrigger 设置为 LostFocus 得到解决。

这对我来说很奇怪，因为根据[MSDN on UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger(v=vs.100).aspx)：

> TwoWay 或 OneWayToSource 的绑定侦听目标属性中的更改并将它们传播回源。这称为更新源。通常，只要目标属性更改，就会发生这些更新。这适用于复选框和其他简单控件，但通常不适用于文本字段。每次击键后更新可能会降低性能，并且它会剥夺用户在提交新值之前退格和修复打字错误的通常机会。因此，Text 属性的默认 UpdateSourceTrigger 值是 LostFocus 而不是 PropertyChanged。

所以我不确定为什么会这样。

# css - 图片 z-index 后面的 IE7 菜单

> ID：13092387
> 
> 赞同：0
> 
> 时间：2012-10-26T18:26:24.823
> 
> 标签：css, internet-explorer-7

我无法获得图像前面的菜单，有人有任何线索吗？

[http://goo.gl/jAVDv](http://goo.gl/jAVDv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:36:56.883

我将 z-index:9999 给了菜单的主要父级之一。当我给他的曾祖父高 z-index 时，问题就解决了。

# ios - UIActivityViewController 崩溃，NSCFConstantString _beforeActivity 无法识别的选择器发送到实例

> ID：13092397
> 
> 赞同：7
> 
> 时间：2012-10-26T18:27:13.210
> 
> 标签：ios, ios6, uiactivityviewcontroller

我正在尝试使用 UIActivityViewController 将新的 iOS 6 共享功能添加到我的应用程序中。我有一些想要分享的文本，如果他们选择电子邮件，我也想自动设置电子邮件的主题。

```
NSArray *activityItems = @[resultString];
NSLog(@"items=%@", activityItems);

NSArray *acitivities = @[UIActivityTypeMail, UIActivityTypeMessage, UIActivityTypePrint, UIActivityTypePostToFacebook, UIActivityTypeCopyToPasteboard];

UIActivityViewController *activityController =
    [[UIActivityViewController alloc] initWithActivityItems:activityItems
                                      applicationActivities:activities];

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    self.popover = [[UIPopoverController alloc] initWithContentViewController:activityController];
    // the line above is where the error happens.
    [self.popover presentPopoverFromBarButtonItem:self.emailResultsButton permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} else {
    [self presentViewController:activityController
                       animated:YES
                     completion:nil];
} 
```

以下是包含错误消息的代码输出：

```
[694:907] items=(
    "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas porttitor accumsan mi eu mollis. Fusce condimentum dictum lectus, eu ultrices urna vulputate eu."
)
[694:907] -[__NSCFConstantString _beforeActivity]: unrecognized selector sent to instance 0x3ad971c8
[694:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString _beforeActivity]: unrecognized selector sent to instance 0x3ad971c8'
*** First throw call stack:
(0x35add2a3 0x37a1497f 0x35ae0e07 0x35adf531 0x35a36f68 0x361dc7a3 0x361dc52d 0x36067595 0x36434d31 0x3642fe07 0x2990b 0x361330ad 0x36133135 0x361330ad 0x3613305f 0x3613303d 0x361328f3 0x36132de9 0x3605b5f9 0x36048809 0x36048123 0x37bd15a3 0x37bd11d3 0x35ab2173 0x35ab2117 0x35ab0f99 0x35a23ebd 0x35a23d49 0x37bd02eb 0x3609c301 0x1ef9d 0x1ef30)
libc++abi.dylib: terminate called throwing an exception 
```

我在带有 iOS6 的 iPad 2 上运行它。有任何想法吗？

编辑：如果我不提供活动数组，那么似乎一切正常。仍在缩小问题范围。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T18:44:55.657

例外说明了一切：您正在传入一个*字符串*数组：

```
NSArray *acitivities = @[UIActivityTypeMail, UIActivityTypeMessage, UIActivityTypePrint, UIActivityTypePostToFacebook, UIActivityTypeCopyToPasteboard]; 
```

文档说该方法需要一个 UIActivity 对象列表：

> `applicationActivities`
> 
> 代表应用程序支持的自定义服务的 UIActivity 对象数组。此参数可能为零。

请注意，这是针对*自定义*活动的；例如，如果您想在现有服务之外提供自己的 DropBox 集成。

**编辑：**至于活动*类型*，它们似乎只用于`UIActivity.activityType`、`UIActivityItemProvider.activityType`、`UIActivityViewController.excludedActivityTypes`和`-[UIActivityItemSource activityViewController:itemForActivityType:]`。

# node.js - 异步等待条件满足

> ID：13092399
> 
> 赞同：4
> 
> 时间：2012-10-26T18:27:23.630
> 
> 标签：node.js, asynchronous

在我的代码中，我有三个变量，其值取决于外部函数调用，它们可以在任何时候以任何顺序设置为 true，因此，它们更像是标志。

我需要一个函数，只有在这三个变量设置为 true 时才存在。

如何以异步方式等待这三个变量为真，而不阻塞我的服务器？

（我不想被引用到外部库）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T18:53:30.283

我通常喜欢使用[异步](https://github.com/caolan/async)库来做这样的事情，但是因为你不想为此引用外部库。我将编写一个简单的函数，它会定期检查变量是否已设置。

* * *

**间隔检查方法**

```
var _flagCheck = setInterval(function() {
    if (flag1 === true && flag2 === true && flag3 === true) {
        clearInterval(_flagCheck);
        theCallback(); // the function to run once all flags are true
    }
}, 100); // interval set at 100 milliseconds 
```

* * *

**异步库并行方法**

```
var async = require('async');

async.parallel([
    function(callback) {
        // handle flag 1 processing
        callback(null);
    },

    function(callback) {
        // handle flag 2 processing
        callback(null);
    },

    function(callback) {
        // handle flag 3 processing
        callback(null);
    },
], function(err) {
    // all tasks have completed, run any post-processing.
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:22:55.900

如果您控制这些变量的状态 - 为什么在设置此变量时不触发某些事件？更好的是 - 有一些封装这个逻辑的对象。就像是：

```
function StateChecker(callback) {
    var obj = this;
    ['a', 'b', 'c'].forEach(function (variable) {
        Object.defineProperty(obj, variable, {
            get: function () { return a; }
            set: function (v) { values[variable] = v; check(); }
        });
    });
    function check() {
        if (a && b && c) callback();
    }
}

var checker = new StateChecker(function () {
    console.log('all true');
});

checker.a = true;
checker.b = true;
checker.c = true;
> 'all true' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-24T13:14:07.243

它也可以用事件发射器来完成。在示例中，我查看一个文件夹并等待以下文件。也可以`setTimeout`用于演示目的。

```
const counterEmitter = new EventEmitter();

// wait for the second file before processing the first file
let globalCounter = 0;
chokidar.watch(process.env.WATCH).on('add', (filePath) => {

     globalCounter++;
     const counter = globalCounter;        
     counterEmitter.once('counterEvent', (counterEvent) => {
         console.log('counterEvent', counterEvent);
         if (counter < counterEvent) {
              console.log("I waited", counter)
         }
     });
     counterEmitter.emit('counterEvent', globalCounter)
     ... 
```

# php - 方法，一会儿返回

> ID：13092403
> 
> 赞同：0
> 
> 时间：2012-10-26T18:27:52.893
> 
> 标签：php, while-loop, return

我正在上课，我有一个返回的方法：

```
while ($donnees = $reponse->fetch()){
        $temp[$i] = new Membres($donnees['id_membres']);
        return '' . $temp[$i]->getPseudo() . '<br>';
        $i++; 
```

它只返回当时的第一个数据，当我使用 echo 而不是 return 它工作但打印在页面顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:31:33.003

试试这个

```
$var = '';
while ($donnees = $reponse->fetch()){
        $temp[$i] = new Membres($donnees['id_membres']);
        $var .= '' . $temp[$i]->getPseudo() . '<br>';
        $i++;
}
return $var; 
```

# java - 从线程中获取消息

> ID：13092404
> 
> 赞同：1
> 
> 时间：2012-10-26T18:27:52.760
> 
> 标签：java, multithreading

在头等舱有方法“听”哪个监听客户端套接字

```
public void listen() throws IOException {       

        while (true) {
            socket = this.serverSocket.accept();

            DataOutputStream out = new DataOutputStream( socket.getOutputStream() );
            this.outputStreams.put(socket, out);

            Thread miltiServer;

            miltiServer = new Thread() {
                @Override
                public void run() {                    
                    InputStream sin = null;

                    try {                   
                        sin = socket.getInputStream();
                        ObjectInputStream in = new ObjectInputStream(sin);
                        message = (AgentData) in.readObject();

                    } catch (ClassNotFoundException ex) {

                    } catch (IOException ex) {

                    } 
                }
            };

            miltiServer.start();
        } 
```

在第二类中，我需要阅读和分析从客户端套接字接收到的消息。我不知道如何在其他班级收到消息。我有使用 Callable 接口的想法，但是如果我使用它，return 语句将退出不定式循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:30:37.090

您的套接字侦听器将消息传递给您的`Second`类的一种简单方法是通过[`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html). 侦听器将从套接字输入流中读取并调用`queue.put(...)`以将任何消息添加到队列中。

然后第二个类将在一个循环调用`queue.take();`中，当它被添加到队列中时，它将返回每条消息。如果您希望将无限的消息排队，那么[`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)就可以了。如果您想限制消息，那么有界队列[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)可能更合适。

两个线程都需要共享相同的`BlockingQueue`内容，因此您需要构造它并将其传递给两个线程，或者在您的`Second`类上放置一个名为类似的方法，`addMessage(...)`并且`BlockingQueue`将在您的`Second`类中。然后听众会打电话给`second.addMessage(...);`.

# java - java替换字符串特定索引中的子字符串

> ID：13092406
> 
> 赞同：1
> 
> 时间：2012-10-26T18:27:53.447
> 
> 标签：java

如何`10100`使用`10010`算法“将最后一个子字符串 10 替换为 01”来替换字符串。我试过了

```
s=s.replace(s.substring(a,a+2), "01"); 
```

但这会返回`01010`，替换 . 的第一个和第二个子字符串`"10"`。"a" 代表 s.lastindexOf("10");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T02:21:46.830

这是一个您可以使用的简单且可扩展的函数。首先是它的使用/输出，然后是它的代码。

```
String original  = "10100";
String toFind    = "10";
String toReplace = "01";
int ocurrence    = 2;
String replaced  = replaceNthOcurrence(original, toFind, toReplace, ocurrence);
System.out.println(replaced); // Output: "10010"

original  = "This and This and This";
toFind    = "This";
toReplace = "That";
ocurrence = 3;
replaced  = replaceNthOcurrence(original, toFind, toReplace, ocurrence);
System.out.println(replaced); // Output: "This and This and That" 
```

### 功能代码：

```
public static String replaceNthOcurrence(String str, String toFind, String toReplace, int ocurrence) {
    Pattern p = Pattern.compile(Pattern.quote(toFind));
    Matcher m = p.matcher(str);
    StringBuffer sb = new StringBuffer(str);
    int i = 0;
    while (m.find()) {
        if (++i == ocurrence) { sb.replace(m.start(), m.end(), toReplace); break; }
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:30:41.130

如果要访问字符串的最后两个索引，则可以使用：-

```
str.substring(str.length() - 2); 
```

这为您提供了从 index`str.length() - 2`到 的字符串`last character`，这正是最后两个字符。

现在，您可以用您想要的任何字符串替换最后两个索引。

**更新**： -

要访问最后一次出现的字符或子字符串，可以使用[`String#lastIndexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String%29)方法：-

```
str.lastIndexOf("10"); 
```

**好的，您可以尝试以下代码：-**

```
String str = "10100";
int fromIndex = str.lastIndexOf("10");
str = str.substring(0, fromIndex) + "01" + str.substring(fromIndex + 2);
System.out.println(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:42:43.507

最简单的方法：

```
String input = "10100";
String result = Pattern.compile("(10)(?!.*10.*)").matcher(input).replaceAll("01");
System.out.println(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T18:31:30.780

您可以使用字符串的 lastIndexOf 方法获取字符或子字符串的最后一个索引。请参阅下面的文档链接以了解如何使用它。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#lastIndexOf(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#lastIndexOf(java.lang.String) )

一旦知道子字符串的索引，就可以获取该索引之前所有字符的子字符串，以及搜索字符串中最后一个字符之后的所有字符的子字符串，然后进行连接。

这有点冗长，我实际上并没有运行它（所以我可能有语法错误），但它至少给了你我想要传达的意思。如果您愿意，您可以在一行中完成所有这些操作，但这也不能说明这一点。

```
string s = "10100";
string searchString = "10";
string replacementString = "01";
string charsBeforeSearchString = s.substring(0, s.lastIndexOf(searchString) - 1);
string charsAfterSearchString = s.substring(s.lastIndexIf(searchString) + 2);
s = charsBeforeSearchString + replacementString + charsAfterSearchString; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T18:31:35.390

`10100 with 10010`

```
String result = "10100".substring(0, 2) + "10010".substring(2, 4) + "10100".substring(4, 5); 
```

# shell - adb push 没有任何打印

> ID：13092407
> 
> 赞同：2
> 
> 时间：2012-10-26T18:27:53.430
> 
> 标签：shell, batch-file, adb

我使用下面的代码

```
adb push %DESKTOP_PATH%\Bill.txt %MOBILE_PATH% 
```

我收到

1663 KB/s（0.030 秒内 51182 字节）

有什么办法不显示上述信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:32:15.130

```
adb push %DESKTOP_PATH%\Bill.txt %MOBILE_PATH% 2>NUL >NUL

```

[使用命令重定向运算符](http://technet.microsoft.com/en-us/library/bb490982.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:32:29.663

将您的输出重定向到`nul`.

```
adb push %DESKTOP_PATH%\Bill.txt %MOBILE_PATH% > nul 
```

# python - 如何在 Python 中从不同的类调用函数

> ID：13092414
> 
> 赞同：1
> 
> 时间：2012-10-26T18:28:29.590
> 
> 标签：python, oop

我有以下 Python 程序大纲（使用 PyQt4）：

```
class Polygon( QtGui.QGraphicsItem ):

    def __init__(self):
        super(Polygon, self).__init__()

    def addpoint( self, point ):
        if last_point: 
            # trying to add auto-save here

class MainWidget(QtGui.QWidget):

    openFileName = ""
    list_of_polygons = []

    def __init__(self):
        super(MainWidget, self).__init__()

    def openFile( self ):
        call dialog
        self.openFileName = ...

    def saveFile( self ):
        # needs to access a couple something with self.variables, like self.openFileName

def main():

    app = QtGui.QApplication(sys.argv)
    ex = MainWidget()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

功能是一个图像查看器，我在其中创建多边形来标记对象。创建多边形后，我想调用自动保存。

所以为了保存一个多边形，我需要从`saveFile`函数`MainWidget`类中调用它。我的问题是保存功能是在 MainWidget 类中实现的，我不知道如何从`Polygon`类内部访问它们。

这样做最好的主意是什么？我应该将 saveFile 设为全局吗？如果是，那么我如何访问自我。MainWidget 的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:31:13.957

您可能需要在创建它时将小部件对象传递给 Polygon，以便它知道它的“父”小部件对象是什么：

```
class Polygon( QtGui.QGraphicsItem ):

    def __init__(self, parent):
        self.parent = parent
        # ... 
```

（然后`foo = Polygon(your_widget)`当你创建它时）。

* * *

然后你可以打电话`self.parent.saveFile(...)`或诸如此类。

# c++ - 如何从 C++ 自定义操作中获取 MSI 'UILevel' 属性

> ID：13092416
> 
> 赞同：0
> 
> 时间：2012-10-26T18:28:31.633
> 
> 标签：c++, visual-c++, wix, windows-installer

我试图从 C++ 自定义操作中获取“UILevel”MSI 属性，以确定用户是否在“无 UI 模式”下运行，但运气不佳。我正在调用的函数是从我在我的 DLL 中导出的函数（可能是“延迟”或“第一序列”操作）中传递给 MSIHANDLE 的。我看到的是它`MsiGetPropertyW`总是返回`ERROR_MORE_DATA`并且该`trueLength`字段始终为0。这是我的代码：

```
bool runningInNoUIMode(MSIHANDLE hInstall)
{
    unsigned long nBufLen = 64UL;
    WCHAR *wszValue = new WCHAR[nBufLen];

    DWORD trueLength = 0UL;
    UINT result = ::MsiGetPropertyW(hInstall, L"UILevel", L"", &trueLength); // Get the size of the property value first to see if there is enough storage allocated.
    if (ERROR_MORE_DATA == result || nBufLen <= trueLength)
    {
        if (NULL != wszValue)
        {
            delete [] wszValue;
        }

        // Allocate more memory for the property adding one for the null terminator.
        nBufLen = trueLength + 1;
        wszValue = new WCHAR[nBufLen];
    }

    if (NULL == wszValue)
    {
        WcaLog(LOGMSG_STANDARD, "Unable to determine the user interface level the MSI is being run with because we were unable to allocate storage for accessing the 'UILevel' property.");
        return false;
    }

    memset(wszValue, L'\0', nBufLen * sizeof(WCHAR));
    result = ::MsiGetPropertyW(hInstall, L"UILevel", wszValue, &trueLength);
    if (ERROR_SUCCESS != result)
    {
        WcaLog(LOGMSG_STANDARD, "Unable to determine the user interface level the MSI is being run with, error code = '%lu'.", result);
        delete [] wszValue;
        return false;
    }

    if (0 == wcscmp(L"2", wszValue)) // INSTALLUILEVEL_NONE == 2
    {
        delete [] wszValue;
        return true;
    }

    delete [] wszValue;
    return false;
} 
```

我相信我现在可以通过通过 WiX 传递“UILevel”属性并在 C++ 中以这种方式检查它来解决这个问题，但我很好奇这里的问题是什么。

我在带有 WiX 3.5.2519 的 Windows 7 上使用 Visual Studio/Visual C++ 2010。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:53:38.833

感谢@DanielGehriger，我们发现问题不在于代码，而在于自定义操作的调度。运行自定义操作时，`UILevel`MSI 属性根本*不可用*`deferred`（我发现代码对于计划为的自定义操作正常工作`firstsequence`）。通过使用 WiX 将自定义操作数据显式传递给它，我已经解决了这个限制：

```
<CustomAction Id="CustomAction.SetProperty" Property="CustomActionCall"
  Value="UILEVEL=[UILevel];" /> 
```

然后在 C++ 中使用`WcaIsPropertySet`and来检查这个`WcaGetProperty`。请注意，方括号之间的属性名称的字符大小写在这里很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:56:48.033

另一种更简单的方法是使用[MsiEvaluateCondition 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370104%28v=vs.85%29.aspx)。

```
BOOL bUI = MsiEvaluateCondition(L"UILevel<3"); 
```

在 C# 中使用 Microsoft.Deployment.WindowsIntaller (DTF) 它是：

```
var uiLevel = session["UILevel"]; 
```

在 C++ 中，[MsiGetProperty 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370134%28v=vs.85%29.aspx)有一个示例：

```
UINT __stdcall MyCustomAction(MSIHANDLE hInstall)
{
    TCHAR* szValueBuf = NULL;
    DWORD cchValueBuf = 0;
    UINT uiStat =  MsiGetProperty(hInstall, TEXT("MyProperty"), TEXT(""), &cchValueBuf);
    //cchValueBuf now contains the size of the property's string, without null termination
    if (ERROR_MORE_DATA == uiStat)
    {
        ++cchValueBuf; // add 1 for null termination
        szValueBuf = new TCHAR[cchValueBuf];
        if (szValueBuf)
        {
            uiStat = MsiGetProperty(hInstall, TEXT("MyProperty"), szValueBuf, &cchValueBuf);
        }
    }
    if (ERROR_SUCCESS != uiStat)
    {
        if (szValueBuf != NULL) 
           delete[] szValueBuf;
        return ERROR_INSTALL_FAILURE;
    }

    // custom action uses MyProperty
    // ...

    delete[] szValueBuf;

    return ERROR_SUCCESS;
} 
```

# php - 带有 BBCode 和 HTML 代码的文本区域中的 nl2br()

> ID：13092418
> 
> 赞同：0
> 
> 时间：2012-10-26T18:28:50.370
> 
> 标签：php, html, tags, nl2br

我有一个文本区域，用户可以使用 BBCode 和 HTML 代码在数据库中插入新闻。当我想在站点中显示此新闻时，PHP 脚本将 BBCode 转换为 HTML 实体，并将新闻内容（从数据库中获取）转换为 HTML 标准，保留 HTML 标记。问题是当我想用**nl2br()**函数将换行符转换为`<br />`标签时，因为它也在 HTML 标签之后添加，例如：**`<br />`**

 **```
<li>Some text</li><br /> 
```

或者

```
<table><br />
<tr><br />
etc. 
```

有没有办法避免这个烦人的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:37:52.303

我正在考虑一个正则表达式。这只有在文本没有被分隔时才有效`<p></p>`（我认为这会更好一些）。

```
$formattedText = preg_replace("/(<[a-zA-Z0-9=\"\/\ ]+>)<br\ \/>/", "$1", nl2br($text)); 
```

如前所述，另一种选择是在特定标签内查找文本，并环绕`<p>`标签。**

# iphone - Xcode 4.5 iOS 6 错误上传到 iTunes

> ID：13092420
> 
> 赞同：0
> 
> 时间：2012-10-26T18:29:10.133
> 
> 标签：iphone, ios, ios6, xcode4.5, uploading

我最近升级到 XCode 4.5 并一直在尝试发布我的应用程序的新版本。我去了iTunes连接门户并准备上传。我更改了捆绑包中的版本号。现在我将它存档，并验证它。这里没有问题。

问题是当我尝试分发它时出现此错误 ![上传到 iTunes 商店时出错](../Images/8da06940dff34f06f1c5b0444572f5af.png)

在你解决这个问题之前，我已经[在这里](https://stackoverflow.com/questions/5783481/an-error-occurred-uploading-to-the-itunes-store)、[这里](https://stackoverflow.com/questions/10022981/an-error-occurred-uploading-to-the-itunes-store)和[使用应用程序加载器尝试了这些修复](https://stackoverflow.com/questions/10045861/xcode-an-error-occurred-uploading-to-the-itunes-store)

我没主意了。我真的需要发布此更新，但我不知道为什么会收到此错误。如果其他人遇到过这个问题，尤其是使用 xcode 4.5（这似乎首先引发了这个问题），请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:02:01.803

好的，所以我终于解决了我的问题。正如许多其他答案所暗示的那样，它与 Java 相关，但是他们的解决方案对我不起作用。我从这个[Apple 论坛得到了一些帮助](https://discussions.apple.com/thread/4451649?start=0&tstart=0)

尽管如此，该解决方案仍然对我不起作用，所以我通过移动虚拟机文件做了一个轻微的解决方法。完成后，您始终可以将其移回。

```
sudo mv -f /Library/Java/JavaVirtualMachines/1.7*jdk ~ 
```

您可以通过检查当前的 java 版本来确认这是否有效

```
java -version 
```

哪个应该给你 1.6.x。这应该可以解决问题。另请注意，我仍然使用 Application Loader 2.7 来执行此操作（尽管我敢打赌它会以任何一种方式工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:52:00.003

你有这个问题多久了？

在这种情况下，可能是由于[iTunes Connect 计划维护](https://www.google.com/search?q=itunes+connect+scheduled+maintenance)。

# javascript - 用javascript拆分字符串2次

> ID：13092421
> 
> 赞同：1
> 
> 时间：2012-10-26T18:29:22.813
> 
> 标签：javascript, html, split

我试图通过首先将其拆分为由';'划分的部分来分解此字符串。然后我想将这些部分除以'，'。但它不起作用，我即将打破我的电脑。有人可以帮我解决这个问题。

如果你愿意，你可以玩我的 jsfiddle... [http://jsfiddle.net/ChaZz/](http://jsfiddle.net/ChaZz/)

```
var myString = "Call 1-877-968-7762 to initiate your leave.,-30,0,through;You are eligible to receive 50% pay.,0,365,through;Your leave will be unpaid.,365,0,After;";

var mySplitResult = myString.split(";");

for(i = 0; i < mySplitResult.length -1; i++){
    var mySplitResult2 = i.split(",");
    for(z = 0; z < mySplitResult2.length -1; i++) {
    //document.write("<br /> Element " + i + " = " + mySplitResult[i]);
        document.write("<br/>Element" + z + " = " + mySplitResult[z]);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T18:30:23.800

`i`是一个数字，因为这就是您定义它的方式。

要拆分字符串，您需要访问`i`Array 的成员。

```
var mySplitResult2 = mySplitResult[i].split(","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-11T16:03:44.523

如果可以的话，如果你必须用字符`a`然后字符分割`b`，最简单的是： `string.split('a').join('b').split('b')`

# php - 使用php从sqlite pdo连接查询中获取数组

> ID：13092430
> 
> 赞同：3
> 
> 时间：2012-10-26T18:29:47.513
> 
> 标签：php, sql, sqlite, pdo

我想从我的 sqlite 表中获取一个多维数组，并加入。我有两张桌子：

```
 TABLES:

- projects -----------        - images ------------------
- id                 -        - id                      -
- title              -        - filename                -
- images (has many)  -        - project_id (belongs to) -
----------------------        --------------------------- 

```

我想要以下数组

```
 PROJECT_ARRAY
{
   id:     1
   title:  My Project
   images: IMAGES_ARRAY
   {
        image1.jpg
        image2.jpg
        image3.jpg
   }
} 

```

如何使用 sql 查询加入我的表？

这不起作用：

```
 SELECT   project.title,        image.filename
FROM     project JOIN image
ON       image.project_id = project.id; 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:46:26.543

您无法从一个查询中获取包含子数组的数组。

此外，您的表名是复数，但您没有在查询中使用复数名称。

此查询应该可以帮助您：

```
SELECT   p.id, p.title, i.filename
FROM     projects p 
JOIN     images i ON i.project_id = p.id; 
```

这应该会为您提供如下结果集：

```
id: 1, title: My Project, filename: image1.jpg
id: 1, title: My Project, filename: image2.jpg
id: 1, title: My Project, filename: image3.jpg 
```

# html - 网站上的文字在 Firefox 中移动

> ID：13092431
> 
> 赞同：0
> 
> 时间：2012-10-26T18:29:48.517
> 
> 标签：html, css, firefox, browser

我几乎完成了我的投资组合页面，但是在我的一个页面上，我在 firefox 上显示时出现错误，在[http://www.jn-design.co.uk/about.html](http://www.jn-design.co.uk/about.html)页面上，右侧的技能部分有移动了我的一段文字（简历行）。这在任何其他浏览器中都不是问题，只是 firefox！

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:34:05.380

它实际上在 Firefox 中看起来不错，但在 Chrome 上被破坏了。无论如何，尝试在包含 cv 行的最后一段中添加“clear: both”样式。

# java - rmi 和网络服务

> ID：13092433
> 
> 赞同：1
> 
> 时间：2012-10-26T18:29:57.997
> 
> 标签：java, design-patterns, jax-ws, rmi

目前我有一个使用 Strus2 和 Spring（IoC、Transactions）构建的 Web 应用程序，我想把它分成 2 个应用程序；一个仅包含 Web 部件的客户端和一个将通过 Web 服务和/或 rmi 访问的核心服务。
我对“胶水”应该使用什么技术感到两难，因为我喜欢任何客户端（php、.net、...、mobile）都可以访问 web 服务这一事实，但据我所知，java rmi 更快网页服务。 我应该如何“攻击”这种情况？ 谢谢，
我正在考虑同时通过 web 服务和 rmi 公开功能......但我不知道该怎么做。
同样在我当前的应用程序中，我有一个从客户端到服务器每秒执行一次的 ajax 操作，在这个新配置中，我认为会因此产生一些性能损失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:34:59.483

好的。您正在运行 Spring，并且您已经拥有了所需的一切。只需放入几个 jars（spring webservices 和相关 jars）就可以了。

请参考：

[http://static.springsource.org/spring/docs/2.5.4/reference/ejb.html](http://static.springsource.org/spring/docs/2.5.4/reference/ejb.html) http://static.springsource.org/spring/docs/2.5.4/reference/remoting.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:35:26.300

> 但据我了解，java rmi 比 webservices 更快。

你为什么这么认为？你有引用来支持这一说法吗？

RMI 和 web 服务都使用 TCP/IP；两者都会产生类似的网络延迟。前者使用 Java 或 CORBA 序列化通过网络发送消息；后者使用 HTTP（用于 REST）或 XML over HTTP（用于 SOAP 或 RPC-XML）。

相对速度更多地取决于这些服务在做什么以及如何编码。

我更喜欢网络服务，因为简单而开放。如果使用 RMI，则仅限于 RMI/CORBA 客户端。

# c# - MVVM listview绑定到字典selecteditem问题

> ID：13092441
> 
> 赞同：3
> 
> 时间：2012-10-26T18:30:25.813
> 
> 标签：c#, wpf, listview

我正在使用 MVVM，并且我有一个列表视图，它绑定到我的视图模型中的字典。在我的 xaml 中，我设置了 selecteditem 以设置正确的选定项目，但不幸的是我正在做的事情不起作用。如果我将其更改为 selectedindex 并将属性数据类型更改为 int，我可以设置它。这是我的看法。

查看（xml）

```
<Grid Width="auto" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Margin="0,1,0,0">
    <Grid.RowDefinitions>
        <RowDefinition Height="auto"></RowDefinition>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="188"></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <ListView Name="lstNewPatient" HorizontalAlignment="Left" VerticalAlignment="Bottom" 
         Height="auto" Margin="0,0,0,0" ItemsSource="{Binding Path=TestList}" SelectedItem="{Binding Path=SelectedTestItem}" 
         FontSize="11" SelectionMode="Single">
        <ListView.View>
            <GridView>
                <GridView.ColumnHeaderContainerStyle>
                    <Style>
                        <Setter Property="FrameworkElement.Visibility" Value="Collapsed"/>
                    </Style>
                </GridView.ColumnHeaderContainerStyle>
                <GridViewColumn Width="69" DisplayMemberBinding="{Binding Key}"></GridViewColumn>
                <GridViewColumn Width="109" DisplayMemberBinding="{Binding Value}"></GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</Grid> 
```

视图模型

```
Dictionary<int, string> selectedTestItem= null;
public Dictionary<int, string> SelectedTestItem
{
    get 
    { 
        return selectedTestItem; 
    }
    set
    {
        selectedTestItem = value;
        OnPropertyChanged("SelectedTestItem");
    }
}

private Dictionary<int, string> TestList()
{
    var newTestList = new Dictionary<int, string>();

    newTestList.Add(1, "Apple");
    newTestList.Add(2, "Car");
    newTestList.Add(3, "Laptop");

    return newPtLevelList;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T18:34:44.740

`SelectedTestItem`应该`KeyValuePair<int, string>`,不是`Dictionary<int, string>`

# mysql - MySQL 5.1，全文搜索未找到“更多”一词

> ID：13092446
> 
> 赞同：1
> 
> 时间：2012-10-26T18:30:38.607
> 
> 标签：mysql, full-text-search

我有一个表格，其中有一列“volltext”类型是mediumtext。全文索引是“volltext”。我匹配了上面的单词

```
SELECT * FROM `volltextsuche` WHERE MATCH(volltext) AGAINST('+search' IN BOOLEAN MODE) 
```

这将正确找到任何发生。

但永远不会更多（无论它在文本中出现的频率如何）。

```
SELECT * FROM `volltextsuche` WHERE MATCH(volltext) AGAINST('+more' IN BOOLEAN MODE) 
```

文本示例：“更多 Gil Coste Corbo 更脆弱的美学”

用 ` 包裹这个词没有帮助。

```
SELECT * FROM `volltextsuche` WHERE MATCH(volltext) AGAINST('+`more`' IN BOOLEAN MODE) 
```

这是什么了不起的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:37:15.937

more是mysql全文搜索的停用词

[http://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html)

# javascript - 使用 JavaScript 检索 HTML 文本框数据的正确方法

> ID：13092450
> 
> 赞同：0
> 
> 时间：2012-10-26T18:30:47.437
> 
> 标签：javascript, html, decoupling

假设我有一个简单的 HTML 页面，如下所示：

```
<html>
  <head>...</head>

  <body>
    <input type="text" id="mytextarea" />
    <input type="button" id="button1" onClick="..." />
    <input type="button" id="button2" onClick="..." />
  </body>
</html> 
```

`id="mytextarea"`考虑到 button1 和 button2 导致对文本的不同操作，在不创建与 HTML 页面高度耦合的代码的情况下，使用 JavaScript 函数访问文本字段中文本的最佳方法是什么？

* * *

举个例子，假设我期望文本字段中有一个二进制数，并且 button1 会将其转换为整数十进制数，但按钮 2 会将其转换为小数十进制数。如何在不将 JavaScript 代码紧密耦合到 HTML 页面的情况下处理这个问题？有什么方法可以将 mytextarea 中的数据发送到 JavaScript 代码，而不必`document.getElementById('mytextarea')`在 JavaScript 函数本身中使用 a ？

* * *

也许我应该澄清一下，

我不是在寻找 using 的替代方法`getElementById`，而是在寻找一种编写 JavaScript 代码的方法，该代码可以在 HTML 页面中使用文本字段而不与它耦合。换句话说，我想知道如何编写 JavaScript 函数和 HTML 页面，以便 (1) JavaScript 函数可以对 HTML 页面中的数据执行工作，以及 (2) JavaScript 函数可以*移动到另一个*HTML 页面并在那里使用，无需更改所述功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:26:00.287

我认为这就是你想要的：

首先，您创建一个名为 Textarea 的对象，它允许您将 textarea 元素作为参数传递：

```
function Textarea(textarea) {
    this.container = textarea;
    this.value = textarea.value
}; 
```

然后您可以添加由每个实例共享的方法`Textarea object`：

```
Textarea.prototype.ChangeValue = function(){
    console.log( 'Please add your ' + this.value );
}; 
```

这样，你就可以`mytextarea`随心所欲地传递和修改它。这允许在您需要的其他文本区域或其他项目中重用对象中的属性和方法。

```
t = new Textarea(document.getElementById('mytextarea'));
t.ChangeValue(); 
```

演示：http: [//jsfiddle.net/SQ2EC/](http://jsfiddle.net/SQ2EC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:37:55.313

由于您需要*某种*方式来通知函数有关要操作的元素，因此有两个简单的选项。您可以在调用函数时将元素的引用作为参数传递，如

```
onclick="manipulate(document.getElementById('mytextarea'))" 
```

或者你可以只传递`id`属性值：

```
onclick="manipulate('mytextarea')" 
```

在这种情况下，函数需要使用`document.getElementById()`，但在其参数上，而不是连线字符串。

第一种方法更灵活，因为它也允许您以其他方式构造引用，例如`document.getElementsByTagName('textarea')[0]`.

您可以通过编写函数来组合这些方法，以便它可以处理这两种参数。例如，它可以首先检查它的参数是否是字符串类型，如果是则使用`document.getElementById()`它，否则期望它是对元素的引用。您可能应该在函数中进行一些健全性检查，测试您获得或构造的内容是否真的是对`textarea`元素的引用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-26T19:00:46.857

我知道你到底想做什么，但在这里你可以在它的更改事件中获取文本框的值

```
<script>
         $(document).ready(function () {
             $('input[id$=mytextarea]').change(function () {
                 alert($(this).val());
                 .............
                 now you have got the value so convert it to decimal and do other stuff
             });
         });
    </script> 
```

# r - R 中环境的目的是什么，当我需要使用多个环境时？

> ID：13092452
> 
> 赞同：5
> 
> 时间：2012-10-26T18:30:55.780
> 
> 标签：r

这是一个基本的 R 问题：R 有环境的概念。那么它有什么目的，我什么时候需要开始一个以上的，我如何在它们之间切换？多个环境的优势是什么（除了查找 .Rdata 文件的内容）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T19:32:21.470

环境的概念很重要，你一直在使用它们，但大多是在没有意识到的情况下。如果您只是使用 R 而没有做任何花哨的事情，那么您只需要间接使用环境，并且您不需要显式创建和操作环境。只有当您进入更高级的用法时，您才需要了解更多。您（间接）使用环境的主要地方是每个函数都有自己的环境，因此每次运行函数时，您都在使用新的环境。为什么这很重要，因为这意味着如果函数使用名为“x”的变量，并且您有一个名为“x”的变量，那么计算机可以保持它们正常并在需要时使用正确的变量以及您的“x”副本" 不会被函数版本覆盖。

您可能会使用环境的其他一些情况：每个包都有自己的环境，因此两个包都可以使用相同的内部函数名称加载，并且它们不会相互干扰。您可以通过附加一个新环境并将函数定义加载到该环境而不是全局或工作环境中来使您的工作空间更加干净。当您编写自己的函数并希望在函数之间共享变量时，您将需要了解环境。如果您曾经遇到过重要的情况（如果您不认识这些短语，那么它可能无关紧要），Environmets 可用于模拟传递引用而不是传递值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T18:59:36.010

You can think of `environment`s as unordered `list`s. Both datatypes offer something like the [hash table](http://en.wikipedia.org/wiki/Hashtable) data structure to the user, i.e., a mapping from names to values. The lack of ordering in `environment`s offers better performance when compared with `list`s on similar tasks.

The access functions `[[` and `$` work for both.

A nice fact about `environment`s which is not true for `list`s is that `environment`s pass by reference when supplied as function arguments, offering a way to improve performance when working large objects.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T18:42:03.987

就个人而言，我从不直接与环境打交道。相反，我将脚本划分为函数。这导致增加的可重用性和更多的结构。此外，每个函数都在自己的环境中运行，确保对变量等的干扰最小。

# lucene - Lucene - 使用布尔查询搜索子集

> ID：13092455
> 
> 赞同：0
> 
> 时间：2012-10-26T18:31:13.747
> 
> 标签：lucene

我有一个包含两行字段（例如 field1）的索引，一个是“short greg”，第二个是“great greg”。如果我搜索（使用 Luke）： field1:g* field1:greg

结果将是两行但得分相同！这是因为这两个词的首字母 G 相同。

我的期望是得分最高的“great greg”，其中 G* 更重视“GREAT GREG”的得分。

问题是：如何编写这个查询？不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:58:36.320

I'm not sure, but the identical score might be because your query is equivalent to:

`field1:g* OR field1:greg`

I would try in Luke:

`+field1:g* +field1:greg`

(which is equivalent to

`field1:g* AND field1:greg`

# javascript - HTML5 Canvas - 首次加载时未写入的文本

> ID：13092456
> 
> 赞同：1
> 
> 时间：2012-10-26T18:31:18.583
> 
> 标签：javascript, html, canvas

我正在为招聘人员进行技术测试，并且遇到了 html5/canvas/javascript 的非常烦人的错误。

该问题只是间歇性地发生，通常仅在页面的第一次加载时发生。

图像都可以正常加载，但是只有在我手动重新加载页面时才会加载 3 个字符的代码。

我已经尝试添加回调，甚至是 setTimeout，但在初始加载时似乎发生了一些事情，但我无法捕获它。

这是我的代码：

```
function Rectangle() {

    this.w = 111;
    this.h = 111;
    this.font_color = "white";
    this.font_family = "18pt Novecentowide";

}

Icon.prototype = new Rectangle();

function Icon(data) {

    this.code = data['code'];
    this.bg_color = data['bg_color'];
    this.x = data['x'];
    this.y = data['y'];
    this.code_x = data['code_x'];
    this.code_y = data['code_y'];
    this.icon_src = data['icon_src'];
    this.icon_x = data['icon_x'];
    this.icon_y = data['icon_y'];

    this.drawIcon = function () {

        // setup canvas
        var c = document.getElementById("canvasId");
        var ctx = c.getContext("2d");

        // draw rectangle
        ctx.fillStyle = this.bg_color;
        ctx.fillRect(this.x, this.y, this.w, this.h);

        // apply icon
        var img = new Image();
        img.src = this.icon_src;

        var icon_x = this.icon_x;
        var icon_y = this.icon_y;

        // get text values
        var font_color = this.font_color;
        var font_family = this.font_family;
        var code = this.code;
        var code_x = this.code_x;
        var code_y = this.code_y;

        img.onload = function () {
        // Once the image has finished loading, draw the 
        // image and then the text.

            function DrawScreen() {
                ctx.drawImage(img, icon_x, icon_y);
            }

            DrawScreen();

        };

        function DrawText() {
            ctx.fillStyle = font_color;
            ctx.font = font_family;
            ctx.fillText(code, code_x, code_y);
        }

        DrawText();

    }

}

var icon1 = new Icon({code: "ABC", bg_color: "c64918", x: 0, y: 0, code_x: 13, code_y: 98, icon_src: "images/shape_icon.png", icon_x: 0, icon_y: 0 });

var icon2 = new Icon({code: "DEF", bg_color: "d37724", x: 195, y: 0, code_x: 208, code_y: 98, icon_src: "images/shape_icon.png", icon_x: 195, icon_y: 0 });

var icon3 = new Icon({code: "GHI", bg_color: "556a70", x: 0, y: 151, code_x: 13, code_y: 249, icon_src: "images/hand_icon.png", icon_x: 0, icon_y: 151 });

var icon4 = new Icon({code: "JKL", bg_color: "55777f", x: 195, y: 151, code_x: 208, code_y: 249, icon_src: "images/hand_icon.png", icon_x: 195, icon_y: 151 });

var icon5 = new Icon({code: "MNO", bg_color: "68a03d", x: 0, y: 303, code_x: 13, code_y: 400, icon_src: "images/dollar_icon.png", icon_x: 0, icon_y: 303 });

icon1.drawIcon();

icon2.drawIcon();

icon3.drawIcon();

icon4.drawIcon();

icon5.drawIcon(); 
```

任何人都可以解释为什么会这样。

演示链接是：[http ://www.mpwa.co/html5](http://www.mpwa.co/html5)

任何帮助将不胜感激。

* * *

解决了这个问题。

我没有检查文档是否已加载，因此在画布上绘制的第一次尝试失败了。

基本！！

这是工作代码的关键部分......

* * *

函数初始化（）{

```
icon1.drawIcon();

icon2.drawIcon();

icon3.drawIcon();

icon4.drawIcon();

icon5.drawIcon(); 
```

}

var readyStateCheckInterval = setInterval(function () {

```
if (document.readyState === "complete") {

    init();

    clearInterval(readyStateCheckInterval);

} 
```

}, 10);

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:57:50.647

你应该这样做：

```
 img.onload = function () {
    // Once the image has finished loading, draw the 
    // image and then the text.           
        DrawScreen();
        DrawText();
    };
    function DrawScreen() {
        ctx.drawImage(img, icon_x, icon_y);
    }
    function DrawText() {
        ctx.fillStyle = font_color;
        ctx.font = font_family;
        ctx.fillText(code, code_x, code_y);
    } 
```

# php - JQuery Ajax 不向 PHP 文件发送数据或运行成功函数

> ID：13092463
> 
> 赞同：0
> 
> 时间：2012-10-26T18:31:40.357
> 
> 标签：php, jquery, ajax

我遇到了 jQuery Ajax 函数没有将数据发送到相应的 php 文件，然后没有运行成功函数的问题。这是我的js：

```
function meetMember(empl_id) {

var member = {id: empl_id}

$.ajax({
    type: 'POST',
    url: 'php/infocheck.php', 
    data: member, 
    dataType: 'json',
    success: function(data) {
        alert('hi');
        console.log(data);
        $('#member-info').append(data); 
    }   
});
} 
```

和 infocheck.php 代码：

```
<?php

ini_set('display_errors',1);
error_reporting(E_ALL);

include('db-info.php');

$id = $_POST['id'];

    $q = "SELECT * FROM team WHERE empl_id = $id LIMIT 1";
    $member = mysql_fetch_assoc(mysql_query($q));
    $met = $member['ifmet'];

    if($met != 1) {
        mysql_query("UPDATE team SET ifmet = 1 WHERE empl_id = $id");
    }

    echo "<img src=\"game/images/{$member['image']}\" alt='' style='padding:2px 10px 0px 0px; float:left;' />";
    echo "<h3>{$member['name']}</h3>";
    echo "<h4><em>{$member['title']}</em><h4>";
    echo "<p>{$member['description']}</p>";

?> 
```

当我在浏览器中查看 php 文件时，出现以下错误：

“注意：未定义的索引：第 8 行 /Applications/MAMP/htdocs/Development/ETL24/php/infocheck.php 中的 id

警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 12 行的 /Applications/MAMP/htdocs/Development/ETL24/php/infocheck.php 中给出的布尔值”

success 函数中的 console.log 和 alert 不运行。当我查看 php 文件时，我什至没有在控制台中得到回声。请让我知道您可能有的任何想法或问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:43:09.913

使用`dataType: 'html'` 您的文件返回`HTML`

当您在 browser() 上打开文件时，`GET`您会收到一个**错误**，因为它需要`id`通过 `POST`。

如果要调试它，请更改为`type: GET`url append`?id=1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:32:55.097

换行

```
var member = {id: empl_id} 
```

到

```
var member = "id="+empl_id; 
```

或者

```
 var member = {"id": empl_id} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:44:16.077

首先mysql的功能已经不维护了，考虑换成mysqli的功能。

这段代码：

```
var member = {id: empl_id} 
```

应该写

```
var member = {"id": empl_id}; // notice the semi-colon too 
```

由于您没有传递“id”参数，因此您的 $id 变量为空，因为 $_POST['id'] 实际上是空的。这解释了这个警告：

```
Notice: Undefined index: id in /Applications/MAMP/htdocs/Development/ETL24/php/infocheck.php on line 8 
```

您实际上将 $id 设置为空。

因此，您的查询变成了类似

```
SELECT * FROM team WHERE empl_id = LIMIT 1 
```

然后使您的 mysql_query 返回 false 而不是资源，这就是此错误的含义：

```
Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in /Applications/MAMP/htdocs/Development/ETL24/php/infocheck.php on line 12" 
```

抽象地说，只需将您的变量更改为 JSON 并开始使用 mysqli 函数

# sql-server - 在 NHibernate 中缓存公用表表达式 (CTE) 查询

> ID：13092464
> 
> 赞同：0
> 
> 时间：2012-10-26T18:31:45.193
> 
> 标签：sql-server, nhibernate, caching, common-table-expression

我有一个表格，其中包含我正在使用 NHibernate 从我的网络应用程序中查询的分层数据。这很简单

```
CREATE TABLE [dbo].[Relationships](
    [RelationshipId] [uniqueidentifier] NOT NULL,
    [ParentId] [uniqueidentifier] NULL,
    [ParentTypeId] [uniqueidentifier] NULL,
    [ChildId] [uniqueidentifier] NOT NULL,
    [ChildTypeId] [uniqueidentifier] NOT NULL
) 
```

现在要从该表中查询信息，我使用的是 SQL Server（自 2005 年以来）的一项功能，称为 Common Table Expressions，或简称为 CTE。它让我可以编写递归查询，这对于上面的表格非常有用。

```
WITH Ancestors(RelationshipId, ParentId, ChildId) 
AS 
(
    SELECT r.RelationshipId, r.ParentId, r.ChildId 
        FROM Relationships r 
        WHERE ChildId = :objectId 
    UNION ALL 
    SELECT r.RelationshipId, r.ParentId, r.ChildId 
        FROM Relationships r 
            INNER JOIN Ancestors 
                ON Ancestors.ParentId = r.ChildId 
) 
SELECT RelationshipId, ParentId, ChildId FROM Ancestors 
```

现在，这很好，性能也不错，但是当我尝试使用它来确定上树的祖先，或者更糟糕的是，使用类似的查询来确定后代时，它可能会很费力。

现在我想简单地缓存这个查询的结果，但是`Index was outside the bounds of the array.`如果我有`.SetCacheable(true)`. 如果我删除缓存支持，查询工作正常。

如果我从对`Session.CreateSQLQuery()`Now 的调用中删除缓存支持，则查询工作正常。

因此，虽然我很好奇**为什么**它不起作用，但我更感兴趣的是找到一种解决方法来让缓存与我在 nHibernate 中的 CTE 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:04:11.737

我可以查看错误的更多详细信息，但我会说您可以改用命名查询... http://geekswithblogs.net/TStewartDev/archive/2010/04/11/caching-nhibernate-named-queries .aspx

在 XML 中定义您的 SQL（如果需要，请调用 SP），然后声明结果集。您正在告诉 nhibernate 从调用中得到什么期望，所以我认为它可以解决如何缓存它（猜测）。我通常转换为dto。

请注意，如果 Db 发生更改，您将需要手动清除缓存。您没有使用实体，因此如果基础数据发生更改，您必须自己清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T00:39:56.920

最终只需执行以下操作。我还没有测试缓存，但我可能不得不牺牲它来支持 CTE 提供的灵活性。

```
const string query = "WITH Ancestors(RelationshipId, ParentId, ChildId) " +
                        "AS " +
                        "( SELECT por.RelationshipId, por.ParentId, por.ChildId " +
                        "FROM PseudoObjectRelationships por WHERE ChildId = :objectId " +
                        "UNION ALL " +
                        "SELECT por.RelationshipId, por.ParentId, por.ChildId " +
                        "FROM PseudoObjectRelationships por " +
                        "INNER JOIN Ancestors " +
                        "ON Ancestors.ParentId = por.ChildId " +
                        ") " +
                        "SELECT RelationshipId, ParentId, ChildId FROM Ancestors";

return ((DynamicObjectRepository<TObject>)dynamicObjectRepository).CreateSQLQuery(query)
        .SetGuid("objectId", objectId)
        .SetResultTransformer(Transformers.AliasToBean<Relationship>())
        .List<Relationship>(); 
```

# android - 开始活动时出现 NullPointerException（意图）

> ID：13092478
> 
> 赞同：2
> 
> 时间：2012-10-26T18:33:34.037
> 
> 标签：android, nullpointerexception

对于我的生活，我似乎无法找出我的代码有什么问题。

```
AgrUserLoginHome.java
        public void onClick(View v) 
         {
     if(v.getId()==R.id.btnSubmitLogin)
       {
    String username=txtUsername.getText().toString();
    String password=txtPassword.getText().toString();
    //this is passed to be used in next LoginClientServiceThread class
    LoginClientServiceThread verifyLog = new  
            LoginClientServiceThread(this,username,password);
        verifyLog.run();

         }
    } 
```

登录客户端服务线程.java

```
 public class LoginClientServiceThread extends Activity implements Runnable{

private Intent intent;
private String username,password;
private Context context;
public LoginClientServiceThread(Context cont,String user,String pass)
{
    username=user;
    password=pass;
    context=cont;
}
public void run() {
    try
    {
        try
        {
            JSONObject json = new JSONObject();
            json.put("username", username);
            json.put("password", password);

            DefaultHttpClient httpClient = new DefaultHttpClient();
            URI uri = new URI("http://10.0.2.2:80/BairyApp/Login.svc");

            HttpPost httppost = new HttpPost(uri + "/verifyLogin");
            httppost.setHeader("Accept", "application/json");
            httppost.setHeader("Content-type", "application/json; charset=utf-8");

            HttpResponse response = httpClient.execute(httppost);
            HttpEntity responseEntity = response.getEntity();

            long intCount = responseEntity.getContentLength();
            char[] buffer = new char[(int)intCount];
            InputStream stream = responseEntity.getContent();
            InputStreamReader reader = new InputStreamReader(stream, "UTF-8");

            try
            {
                reader.read(buffer);
                String str = new String(buffer);
                intent=new Intent(context,TrainerAccessScreen.class);
                intent.putExtra("reading",str);
                if(null!=intent)
                {
                    Toast.makeText(context, "Working",  
                            Toast.LENGTH_LONG).show();
                            //startActivity shows as null here
                    startActivity(intent);
                }
                Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
            }
            catch (IOException e)
            {
                e.printStackTrace();
                Toast.makeText(context, "IOException:"+e.getMessage(),  
                    Toast.LENGTH_LONG).show();
               }
               finally
            {
                stream.close();
            }

        }
        catch(URISyntaxException urise)
        {
            urise.printStackTrace();
            Toast.makeText(context, "urise", Toast.LENGTH_LONG).show();
        }
        catch(ClientProtocolException cpe)
        {
            cpe.printStackTrace();
            Toast.makeText(context, "cpe", Toast.LENGTH_LONG).show();
        }
        catch(IOException ioe)
        {
            ioe.printStackTrace();
            Toast.makeText(context, "ioe", Toast.LENGTH_LONG).show();
        }
    }
    catch(Exception e)
    {
        Toast.makeText(context, "Execution failed: "+e.getMessage(), 
                     Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    }
   }
   } 
```

我确定 startActivity 方法返回 null。我知道这一点，因为如果我将意图上下文更改为“this”，则它正下方的 IOException 中的 Toast 不会显示。

有任何想法吗？哦，顺便说一句，我是初学者，所以我知道代码看起来很糟糕

日志猫

```
10-26 20:28:48.756: I/dalvikvm(1133): Jit: resizing JitTable from 512 to 1024
10-26 20:41:57.906: W/System.err(1169): java.lang.NullPointerException
10-26 20:41:57.906: W/System.err(1169):     at android.app.Activity.startActivityForResult(Activity.java:2827)
10-26 20:41:57.906: W/System.err(1169):     at android.app.Activity.startActivity(Activity.java:2933)
10-26 20:41:57.916: W/System.err(1169):     at agr.mobile.service.LoginClientServiceThread.run(LoginClientServiceThread.java:76)
10-26 20:41:57.916: W/System.err(1169):     at agr.mobile.app.AgrUserLoginHome.onClick(AgrUserLoginHome.java:59)
10-26 20:41:57.916: W/System.err(1169):     at android.view.View.performClick(View.java:2485)
10-26 20:41:57.916: W/System.err(1169):     at android.view.View$PerformClick.run(View.java:9080)
10-26 20:41:57.916: W/System.err(1169):     at android.os.Handler.handleCallback(Handler.java:587)
10-26 20:41:57.916: W/System.err(1169):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-26 20:41:57.916: W/System.err(1169):     at android.os.Looper.loop(Looper.java:123)
10-26 20:41:57.916: W/System.err(1169):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-26 20:41:57.916: W/System.err(1169):     at java.lang.reflect.Method.invokeNative(Native Method)
10-26 20:41:57.916: W/System.err(1169):     at java.lang.reflect.Method.invoke(Method.java:507)
10-26 20:41:57.916: W/System.err(1169):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-26 20:41:57.926: W/System.err(1169):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-26 20:41:57.926: W/System.err(1169):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:53:02.580

你说那`LoginClientServiceThread`不是一个`Activity`，但你扩展了`Activity`。不要这样做。如果`Activity`要从非 Activity 类启动，请使用以下命令：

```
intent=new Intent(context,TrainerAccessScreen.class);
intent.putExtra("reading",str);
if(null!=intent)
{
    Toast.makeText(context, "Working",  
    Toast.LENGTH_LONG).show();
    context.startActivity(intent);
} 
```

`NullPointerException`当您`startActivity()`从. `this`_ `LoginClientServiceThread`但是，由于您尚未将该 Activity 启动并创建为普通 Activity，因此您有一个空引用。所以你的最终代码将如下所示：

```
public class LoginClientServiceThread implements Runnable{

    private Intent intent;
    private String username,password;
    private Context context;
    public LoginClientServiceThread(Context cont,String user,String pass)
    {
        username=user;
        password=pass;
        context=cont;
    }

    public void run() {
        try
        {
            try
            {
                JSONObject json = new JSONObject();
                json.put("username", username);
                json.put("password", password);

                DefaultHttpClient httpClient = new DefaultHttpClient();
                URI uri = new URI("http://10.0.2.2:80/BairyApp/Login.svc");

                HttpPost httppost = new HttpPost(uri + "/verifyLogin");
                httppost.setHeader("Accept", "application/json");
                httppost.setHeader("Content-type", "application/json; charset=utf-8");

                HttpResponse response = httpClient.execute(httppost);
                HttpEntity responseEntity = response.getEntity();

                long intCount = responseEntity.getContentLength();
                char[] buffer = new char[(int)intCount];
                InputStream stream = responseEntity.getContent();
                InputStreamReader reader = new InputStreamReader(stream, "UTF-8");

                try
                {
                    reader.read(buffer);
                    String str = new String(buffer);
                    intent=new Intent(context,TrainerAccessScreen.class);
                    intent.putExtra("reading",str);
                    if(null!=intent)
                    {
                        Toast.makeText(context, "Working",  
                            Toast.LENGTH_LONG).show();
                        //startActivity shows as null here
                        context.startActivity(intent);
                    }
                    Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                    Toast.makeText(context, "IOException:"+e.getMessage(),  
                        Toast.LENGTH_LONG).show();
                }
                finally
                {
                    stream.close();
                }

            }
            catch(URISyntaxException urise)
            {
                urise.printStackTrace();
                Toast.makeText(context, "urise", Toast.LENGTH_LONG).show();
            }
            catch(ClientProtocolException cpe)
            {
                cpe.printStackTrace();
                Toast.makeText(context, "cpe", Toast.LENGTH_LONG).show();
            }
            catch(IOException ioe)
            {
                ioe.printStackTrace();
                Toast.makeText(context, "ioe", Toast.LENGTH_LONG).show();
            }
        }
        catch(Exception e)
        {
            Toast.makeText(context, "Execution failed: "+e.getMessage(), 
                Toast.LENGTH_SHORT).show();
            e.printStackTrace();
        }
    }
} 
```

您根本不需要`Activity`在第二类中扩展。

# php - 代码点火器（PHP）中的注销问题

> ID：13092479
> 
> 赞同：3
> 
> 时间：2012-10-26T18:33:32.800
> 
> 标签：php, codeigniter

我将 loginuserid 存储在会话中并在注销时销毁会话。登录和注销工作正常，但我的问题是当用户注销并且我们按下后退按钮时，它仍然能够打开访问过的页面，即使他实际上已经注销。

当我们刷新页面时，用户进入登录页面。我希望用户即使按下后退按钮也不要访问访问过的页面。请帮帮我。提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:43:03.130

这实际上是因为浏览器缓存 -如果需要任何缓存，您应该禁用它并使用[CodeIgniters 缓存库。](http://codeigniter.com/user_guide/libraries/caching.html)

在需要用户登录的页面中添加以下内容：

```
//Prevent browsers from using history to browse in the user system.
$this->CI->output->set_header("Cache-Control: no-store, no-cache, must-revalidate");
$this->CI->output->set_header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
$this->CI->output->set_header("Pragma: no-cache"); 
```

当在浏览器中按回时，页面将被刷新，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:52:09.937

页面显示的原因是浏览器正在从缓存中获取它。要指示浏览器不应从缓存中显示您的页面，您可以在应用程序的每个安全页面中添加`no-cache`元标记：`<head>`

```
<meta http-equiv="Cache-Control" content="no-cache" /> 
```

如果您不想避免缓存，另一种选择（有点复杂）是让 javascript 对服务器进行 AJAX 调用，每次打开安全页面时检查用户是否已登录。像这样的东西：

```
$.getJSON('/user_logged_in.php', function(loggedIn) {
    if(!loggedIn)
        window.location.href = '/login.php';
}); 
```

该`user_logged_in.php`脚本应返回 TRUE 或 FALSE。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-03T22:30:20.147

有两个问题：

**第一个问题是即使您正在清除会话，该页面也会被存储的缓存访问。**

所以你必须清除缓存或不保存缓存。对于 __construct 函数中的代码。

```
$this->output->set_header('Last-Modified:'.gmdate('D, d M Y H:i:s').'GMT');
$this->output->set_header('Cache-Control: no-store, no-cache, must-revalidate');
$this->output->set_header('Cache-Control: post-check=0, pre-check=0',false);
$this->output->set_header('Pragma: no-cache'); 
```

执行此步骤后，即使您要转到上一页（登录后重定向的位置），然后

**如果用户已登录，您可以在该经过身份验证的页面上检查。如果他没有登录，他将无法进入该页面。**

**例子：**

```
public function after_log_in()
{
   if(!empty($SESSION['username'] && $SESSION['os_logged_in'] == true))
   {
      $this->load->view('clienview');
   }
   else
   {
      echo "You are not logged in!";
   }
} 
```

**因此，注销后，当您按下返回按钮时，它将检查用户是否已登录。如果您没有登录，它将向您显示错误。**

# c++ - 为特定进程的特定运行设置环境变量

> ID：13092481
> 
> 赞同：0
> 
> 时间：2012-10-26T18:33:46.077
> 
> 标签：c++, windows, environment-variables

是否可以使用 C++ 设置进程“A”的环境变量，使其仅对其当前运行有效（进程“A”将由我的进程启动）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:38:27.690

假设您准备依赖 Windows API，当您调用该[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425.aspx)函数来启动一个进程时，您拥有该`lpEnvironment`参数。

通常你通过`NULL`这意味着，*使用创建过程的环境*。但是，您可以提供将由新进程使用的环境块。

您传递的环境块是一个以空字符结尾的字符串块。例如：

```
"MyVar=MyValue\0MyOtheVar=MyOtherValue\0\0" 
```

定义了两个独立的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:48:14.077

如果更改环境变量不会对您当前的进程造成问题，请查看[Setting Environment Variables in C++](https://stackoverflow.com/questions/899517/set-local-environment-variables-in-c)。

提示：您的进程派生的任何程序都将只有您为它们提供的环境变量和值。

# emacs - 如何确定字符的可见缓冲区宽度

> ID：13092482
> 
> 赞同：0
> 
> 时间：2012-10-26T18:33:50.980
> 
> 标签：emacs, width, character

我正在使用自定义模式行，我开始了解如何配置它，但在这里我被困在如何获取我想要的信息：我想在每个缓冲区的模式行中显示字符宽度的缓冲区。

我也在使用 linum 模式（总是至少使用两列），理想情况下我想从宽度中推断出 linum 使用的字符数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:56:12.490

该功能`(window-width)`是您正在寻找的，这不包括使用的字符`linum-mode`但是您可以从中获取它们的宽度`(window-margins)`

# visual-studio-2008 - msbuild 和 tfs 构建和单元测试

> ID：13092493
> 
> 赞同：0
> 
> 时间：2012-10-26T18:34:31.957
> 
> 标签：visual-studio-2008, msbuild, tfsbuild

所以我正在构建一个非常基本的解决方案来练习 msbuild。它有一个库、网站和测试项目。我了解到我可以创建一个任务来运行 mstest 来运行我的所有测试。

但是我注意到在 tfs build 中，如果您想要它并运行它们，它会自动查找测试。

我读到了看起来也很吸引人的桌面版本。

因此，当我在本地处理我的项目时，在我看来，我需要一个 AfterBuild 任务来为我运行测试。

但是在我在 TFS 构建中检查它之后，它会自动执行测试。那么这是否意味着我的测试将运行两次？一次是因为它是我创建的任务，其次是因为 TFS 构建将运行它。这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:07:05.080

您应该能够使用条件`Condition=” ‘$(IsDesktopBuild)’ != ‘true’"`来解决此问题。

请参阅以下博客文章[http://www.morkeleb.com/2008/11/16/running-tests-in-desktopbuild/的详细信息](http://www.morkeleb.com/2008/11/16/running-tests-in-desktopbuild/)

# objective-c - Objective-C NSRegularExpressions，查找字符串中第一次出现的数字

> ID：13092498
> 
> 赞同：5
> 
> 时间：2012-10-26T18:34:53.100
> 
> 标签：objective-c, ios, regex, cocoa, nsregularexpression

我对 Objective-C 的正则表达式非常熟悉。我遇到了一些困难。

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\b([1-9]+)\\b" options:NSRegularExpressionCaseInsensitive error:&regError];
if (regError) {
    NSLog(@"%@",regError.localizedDescription);
}
__block NSString *foundModel = nil;
[regex enumerateMatchesInString:self.model options:kNilOptions range:NSMakeRange(0, [self.model length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop) {
    foundModel = [self.model substringWithRange:[match rangeAtIndex:0]];
    *stop = YES;
}]; 
```

我要做的就是拿一个像这样的字符串

```
150A 
```

并得到

```
150 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T18:48:27.290

首先是正则表达式的问题：

1.  您正在使用单词边界 ( `\b`)，这意味着您只是在寻找一个单独的数字（例如 15 但不是 150A）。
2.  你的号码范围不包括`0`所以它不会捕获`150`。它需要`[0-9]+`更好地使用`\d+`。

所以要解决这个问题，如果你想捕获任何数字，你只需要`\d+`. 如果您想捕获以数字开头的任何内容，则只需将单词边界放在开头`\b\d+`。

现在要获得第一次出现，您可以使用
`-[regex rangeOfFirstMatchInString:options:range:]`

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\b\\d+" options:NSRegularExpressionCaseInsensitive error:&regError];
if (regError) {
    NSLog(@"%@",regError.localizedDescription);
}

NSString *model = @"150A";
NSString *foundModel = nil;
NSRange range = [regex rangeOfFirstMatchInString:model options:kNilOptions range:NSMakeRange(0, [model length])];
if(range.location != NSNotFound)
{
    foundModel = [model substringWithRange:range];
}

NSLog(@"Model: %@", foundModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:48:07.600

怎么样`.*?(\d+).*?`？

[演示：](http://regex101.com/r/wC9nZ2) 这将反向引用该数字，您可以在任何地方使用它。

# asp.net - 在 window.resize 上调整 RadEditor 的宽度

> ID：13092501
> 
> 赞同：2
> 
> 时间：2012-10-26T18:35:25.687
> 
> 标签：asp.net, telerik, rad-controls, radeditor

出于某种原因，我无法`RadEditor`在`window.resize`. 我的 javascript 函数 getsCalled 但似乎没有任何东西可以修改`RadEditor`' 的外观。

首先，我认为它会自行调整大小，但它不是......它仅在从服务器更新其内容后才调整大小。

这是我的`RadEditor`：

```
 <telerik:RadEditor ID="RadEditor1" Runat="server"
                        OnClientLoad="OnRadEditorClientLoad" 
                        OnClientCommandExecuting="OnClientCommandExecuting"
                        EnableResize="true" ContentAreaMode="Div"
                        AutoResizeHeight="true"
                        Height="20px"
                        Width="100%" 
                        EditModes="Design"
                        Skin="Web20">
  </telerik:RadEditor> 
```

这是我的javascript函数：

```
window.onresize = ResizeControls;
    function ResizeControls() {
        var editor = $find("<%=RadEditor1.ClientID %>");
        editor.get_element().style.width = getDocWidth() + "px";
        editor.get_contentArea().style.width = getDocWidth() + "px";
    } 
```

在哪里`getDocWidth()`返回正确修改的宽度。（是的，“px”必须在那里）。如果我检查编辑器的宽度，它已被正确修改...我只需要刷新或重新绘制控件。

所以，在第一次加载时，我`RadEditor`正在占用`100%`窗口的宽度。但从to之后，`window.resize`' s 的宽度仍然是。`1000px``800px``RadEditor``1000px`

* * *

**显式解决方案**：在事件中移除`Width=100%`并调整：`width``OnClientLoad`

```
 <telerik:RadEditor ID="RadEditor1" Runat="server"
                    OnClientLoad="OnRadEditorClientLoad" 
                    OnClientCommandExecuting="OnClientCommandExecuting"
                    EnableResize="true" ContentAreaMode="Div"
                    AutoResizeHeight="true"
                    Height="20px"
                    EditModes="Design"
                    Skin="Web20">
  </telerik:RadEditor>

    function OnRadEditorClientLoad(editor, args) {
        editor.get_element().style.width = getDocWidth()= + "px";
    }

    window.onresize = AsjustRadEditorsWidth;
    function AsjustRadEditorsWidth() {
        var editor = $find("<%=EnonceContainer.ClientID %>");
        editor.get_element().style.width = getDocWidth() + "px";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:22:38.783

[RadControls for ASP.NET AJAX 文档 RadEditor setSize](http://www.telerik.com/help/aspnet-ajax/editor-setsize.html)

除了 setSize 方法调用，尝试重置编辑器的 div 元素的 min-width 和 min-height css 属性：

```
$telerik.$($find("<%=RadEditor1.ClientID %>")).css({"min-width": "", "min-height": ""}); 
```

# php - 当我在浏览器上运行以下 url 时，它运行良好，但是当我使用 php 函数时，它得到 505 Page 。任何人都可以帮助我吗

> ID：13092503
> 
> 赞同：0
> 
> 时间：2012-10-26T18:35:27.210
> 
> 标签：php

$output = file_get_contents("http://www.canadapost.ca/cpc2/addrm/hh/current/indexa/caONu-e.asp"); var_dump($输出);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:44:14.657

HTTP 505 状态表示网络服务器不支持客户端使用的 HTTP 版本（在本例中为您的 PHP 程序）。

您正在运行什么版本的 PHP，以及您在 PHP 程序中使用的 HTTP/Web 包？

[编辑...]

某些服务器故意阻止某些浏览器——您的代码可能“看起来像”服务器配置为忽略的浏览器。我会特别检查您的代码传递给服务器的用户代理字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:46:14.533

如果启用了[allow_url_fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)，请检查您的 PHP 安装（php.ini 文件） 。

否则，对 file_get_contents 的任何调用都将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:46:23.887

这对我来说可以。

该站点可能会阻止您用来访问它的服务器。

当您从浏览器运行 URL 时，您自己的 ISP 用于获取信息并在浏览器中显示。但是当您从 PHP 运行时，您的 Web 主机的 ISP 用于获取信息，然后将其传递回给您。

也许您可以这样做来检查并查看它为您返回的标题类型？

```
 $headers=get_headers("http://www.canadapost.ca/cpc2/addrm/hh/current/indexa/caONu-e.asp");
 print_r($headers); 
```

# registry - 对注册表条目感到困惑

> ID：13092506
> 
> 赞同：2
> 
> 时间：2012-10-26T18:35:44.833
> 
> 标签：registry

当涉及到注册表设置时，我很难记住哪个是哪个 - 00000000 是假的，而 00000001 是真的？

所以如果我有：

[HKEY_CURRENT_USER\Software\Policies\Microsoft\Internet Explorer\Restrictions] "NoPrinting"=dword:00000000

这意味着“NoPrinting”是错误的，因此允许打印？

因此：

[HKEY_CURRENT_USER\Software\Policies\Microsoft\Internet Explorer\Restrictions] "NoHelpMenu"=dword:00000001

意味着“NoHelpMenu”为真，因此用户将没有可用的帮助菜单？

“Nos”与开/关（真/假）结合起来有点混乱。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:39:19.767

实际上，上下文取决于调用注册表项的应用程序。就注册表而言，它只是一个 DWORD。如果你想要的话，你可以让 2,124,450 表示为真。但是，总的来说，我的观察是，通常将 1 视为“真”值，将 0 视为“假”。

我同意，“NoSomethingSomething”选项是疯狂的。那些人应该被判十年听斯利姆惠特曼的专辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:41:44.753

你是对的。通常1为真，0为假。但是，这取决于应用程序的实现方式。

例如，代码可以这样做：

```
if ( Registry.GetValue(myreg) == 1 ) { do something; } else { do something else; } 
```

您可以看到交换此代码和更改行为是多么容易。

要准确得出什么意思，请参阅 MSDN/产品规范。对于您指出的一些注册表，请在此处的 MSDN 链接中阅读：

[http://support.microsoft.com/kb/823057?wa=wsignin1.0](http://support.microsoft.com/kb/823057?wa=wsignin1.0)

# ruby-on-rails - 无法打开库“libcurl”：libcurl：无法打开共享对象文件：没有这样的文件或目录

> ID：13092509
> 
> 赞同：6
> 
> 时间：2012-10-26T18:36:15.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

我正在尝试执行 rake db:create 命令。我收到以下错误

无法打开库“libcurl”：libcurl：无法打开共享对象文件：没有这样的文件或目录。

```
Could not open library 'libcurl': libcurl: cannot open shared object file: No such file or directory.
Could not open library 'libcurl.so': libcurl.so: cannot open shared object file: No such file or directory 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T04:20:41.833

*   尝试安装`curl`.

*   如果它不起作用，请尝试命令`ldconfig`（实现库）

*   如果它不起作用：

    1.  去`/usr/lib`
    2.  运行`find . | grep curl`，找到 .so 文件（例如 curl_path.so 或最新的 libcurl.so.xx）
    3.  跑`ln -s {curl_path.so} /usr/lib/libcurl.so`
    4.  跑`ldconfig`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T03:16:26.880

实际上 - 解决问题的是安装 typhoeus：

```
gem install typhoeus 
```

或者 libcurl 实际需要的任何包。

# xna-4.0 - 如何用 XNA 制作 3D 赛车游戏？

> ID：13092519
> 
> 赞同：-1
> 
> 时间：2012-10-26T18:37:08.893
> 
> 标签：xna-4.0

我想知道如何用 xna 制作 3D 赛车游戏。我从未使用过它，但我想从那种游戏开始学习。

有没有人有任何想法，我可以从哪里找到任何教程？或者我该怎么办？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T04:19:27.040

有一本关于 XNA 的优秀书籍叫做[Professional XNA Programming: Building Games for Xbox 360 and Windows with XNA Game Studio](http://www.wrox.com/WileyCDA/WroxTitle/Professional-XNA-Programming-Building-Games-for-Xbox-360-and-Windows-with-XNA-Game-Studio-2-0-2nd-Edition.productCd-0470261285.html)。它没有解释每一个小细节，所以如果你想建立自己的方式，有几本关于 XNA 4.0 的书。查看 PacktPub [http://www.packtpub.com/books/all?keys=xna](http://www.packtpub.com/books/all?keys=xna)上的列表。如果您找到其他有关游戏编程的书籍，它们也会对您有所帮助。

# javascript - 如何使用 Javascript 使 HTML 表格中的几行不可见

> ID：13092520
> 
> 赞同：0
> 
> 时间：2012-10-26T18:37:14.223
> 
> 标签：javascript, html, css

我有一个 HTML 表格，该表格中有几行我想切换为作为一个组可见或不可见。既然我不能简单地将`<div>`它们放在一起，那么将它们“组合”在一起的好方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:45:09.633

您可以将它们分组到单独的`<tbody>`元素中*（因为您不能使用`<div>`元素，如您所说）*。

```
<table id="mytable">
    <tbody>
        <!-- some rows to group -->
    </tbody>
    <tbody>
        <!-- some rows to group -->
    </tbody>
    <tbody>
        <!-- some rows to group -->
    </tbody>
</table> 
```

然后选择你想要的tbody。

```
var table = document.getElementById("mytable");

table.tBodies[1].style.display="none"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:41:14.543

尝试以一种可以隐藏/可见并应用您的 css/js 的方式制作您的 html。

```
<table>
        <tr class="visible"><td></td></tr>
        <tr class="visible"><td></td></tr>
        <tr class="hidden"><td></td></tr>
        <tr class="visible"><td></td></tr>
        <tr class="visible"><td></td></tr>
        <tr class="hidden"><td></td></tr>
        <tr class="visible"><td></td></tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:45:06.217

您可以使用 tbody 标签。您可以在其上设置 id 属性。

> tbody id="customer1"

```
<table>
    <thead>
        <tr><th>Customer</th><th>Order</th><th>Month</th></tr>
    </thead>
    <tbody id="customer1">
        <tr><td>Customer 1</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 1</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 1</td><td>#3</td><td>March</td></tr>
    </tbody>
    <tbody id="customer2">
        <tr><td>Customer 2</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 2</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 2</td><td>#3</td><td>March</td></tr>
    </tbody>
    <tbody id="customer3">
        <tr><td>Customer 3</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 3</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 3</td><td>#3</td><td>March</td></tr>
    </tbody>
</table> 
```

然后使用 JQuery，您可以轻松隐藏/显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T18:44:47.310

纯 JavaScript [jsfiddle](http://jsfiddle.net/AC9wf/)

```
<table>
        <tr class="show"><td></td></tr>
        <tr class="show"><td></td></tr>
        <tr class="hide"><td></td></tr>
        <tr class="show"><td></td></tr>
        <tr class="show"><td></td></tr>
        <tr class="hide"><td></td></tr>
        <tr class="show"><td></td></tr>
</table> 
```

JS：

```
var trGroup = document.getElementsByClassName("hide");
for(var k=0; k < trGroup.length; k++){
     trGroup[k].style.display = "none";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T18:40:40.227

在要分组的行上放置一个公共类。而不是像这样工作

或者你有一些可见或隐藏的规则，行组你可以简单地使用 css + javascript 之类的

# HTML

```
<table id="myGroupTab">
    <tr class="group1"><td>&nbsp;</td></tr>
    <tr class="group1"><td>&nbsp;</td></tr>
    <tr class="group2"><td>&nbsp;</td></tr>
    <tr class="group2"><td>&nbsp;</td></tr>
    <tr class="group1"><td>&nbsp;</td></tr>
</table> 
```

你可以写一些css规则，比如

# CSS

```
#myGroupTab.showGrp1 .group1{ display:block;}
#myGroupTab.showGrp1 .group2{ display:none;}

#myGroupTab.showGrp2 .group1{ display:none;}
#myGroupTab.showGrp2 .group2{ display:block;} 
```

您可以使用 Javascript 之类的

# JS

```
document.getElementById('myGroupTab').className = "showGrp1"; //To Show Only tr.group1
document.getElementById('myGroupTab').className = "showGrp2"; //To Show Only tr.group2 
```

它甚至可以简单地显示不显示或阻止在父级上应用一个类，而不是循环每个 tr...

或者通过 jQuery 你可以实现这一点，使用 jQuery 使它们可见或隐藏。

```
$("tr.group1").hide() or  $("tr.group2").show() 
```

@user1689607 在表中使用多个 tbody 的解决方案也是一个很好的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T18:41:02.507

我会向您推荐一个 jQuery 解决方案。为您的所有`<tr>`标签提供一个通用类和一个唯一 ID（供个人选择）。然后你可以使用 jQuery 来抓取它们。

```
$('tr .commonClass').css("display", "none"); 
```

你也可以只用单独的 id 交换类

```
$('#someTR').removeClass("visibleClass");
$('#someTR').addClass("invisibleClass"); 
```

*注意：*为了记录，我更喜欢@Yograj Gupta 的方法，但他打败了我。

# java - 仅在首次访问时设置值——最佳实践，（微）性能？

> ID：13092524
> 
> 赞同：0
> 
> 时间：2012-10-26T18:37:32.087
> 
> 标签：java, performance, coding-style

在下面的代码中，假设`getAndClear()`将被调用数十亿次，即假设性能很重要。它只会在第一次调用时返回一个数组。它必须在所有进一步的调用中返回 null。（也就是说，我的问题是某种意义上的微优化，我知道这是不好的做法，但您也可以将其视为“哪个代码更好”或“更优雅”的问题。）

```
public class Boo {
   public static int[] anything = new int[] { 2,3,4 };
   private static int[] something = new int[] { 5,6,7 }; // this may be much bigger as well

   public static final int[] getAndClear() {
      int[] st = something;
      something = null;
      // ... (do something else, useful)            

      return st;
   }
} 
```

下面的代码更快吗？这是更好的做法吗？

```
public static int[] getAndClear() {
   int[] array = sDynamicTextIdList;
   if (array != null) {
      sDynamicTextIdList = null;
      // ... (do something else, useful)     
      return array;
   }
   // ... (do something else, useful)     

   return null;
} 
```

另一个变体可能是这样的：

```
public static int[] getAndClear() {
   int[] array = sDynamicTextIdList;
   if (array != null) {
      sDynamicTextIdList = null;
   }
   // ... (do something else, useful)     
   return array;
} 
```

我知道它可能分解为硬件架构级别和 CPU 指令（将某些内容设置为 0 与检查 0），并且在性能方面，这并不重要，但我想知道哪个是“好的实践”或更多质量代码。在这种情况下，问题可以简化为：

```
private static boolean value = true;       

public static int[] getTrueOnlyOnFirstCall() {
   boolean b = value;
   value = false;
   return b;
} 
```

如果方法被调用 100000 次，这意味着将不必要`value`地设置为99999 次。`false`另一个变体（更快？更好？）看起来像这样：

```
public static int[] getTrueOnlyOnFirstCall() {
   boolean b = value;
   if (b) { 
      value = false;
      return true;
   }
   return false;
} 
```

此外，编译时和 JIT 时优化也可能在这里发挥作用，所以这个问题可以扩展为“and what about in C++”。（如果我的示例不适用于这种形式的 C++，那么请随意用类的成员字段替换静态。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:47:13.860

恕我直言，不值得进行微优化。优化的一个缺点是它严重依赖于环境（正如您提到的 JIT——JDK 的版本起着重要作用；现在更快的东西将来可能会更慢）。

从长远来看，代码可维护性（在我看来）要重要得多。实现最清晰的版本。例如，我喜欢`getTrueOnlyOnFirstCall()`其中包含该`if`语句。

但是，在所有这些示例中，您需要围绕 getter 和修改布尔值的部分进行同步。

# mysql - 应用于非特权用户操作的触发器的 MySQL 特权

> ID：13092526
> 
> 赞同：1
> 
> 时间：2012-10-26T18:37:38.957
> 
> 标签：mysql, triggers, privilege

我正在为一个新项目创建一个新模式，我的基本要求是 2 个具有不同权限的用户。一个是普通用户，拥有最低权限，另一个是管理员，拥有比普通用户更高的权限。

我以这种情况为例：

`basicUser have INSERT Privilege over Table1 but`**`NO`**`Privilege over Table2 and Table3`

`adminUser have INSERT Privilege over All the tables`

现在，`Table1`为选项定义了一个触发器，`INSERT`该选项将记录插入表 2 和表 3，一旦将记录插入表 1，就从表 1 中获取值。

我想知道将`basicUser`数据插入时触发器是否会起作用`Table1`？请记住，他可以在 Table1 中插入数据，但他对由触发器填充的其他表没有特权，并且此触发器是由`basicUser's`操作引发的。

我的第一个猜测是肯定的！这应该有效。但我不确定。如果我错了，请纠正我。

如果是，那么如果记录被插入，有什么办法可以阻止触发器的动作`basicUser`？我需要一个故障安全的解决方法，因为我仍然需要 Table1 来保存插入的记录，`basicUser`但我不希望它将数据插入到其他表中。

如果不是，那么有什么方法可以记录一些`basicUser's`操作，记住他对用于存储日志的表没有特权？

# zsh - ZSH auto_vim (如 auto_cd)

> ID：13092533
> 
> 赞同：2
> 
> 时间：2012-10-26T18:38:14.923
> 
> 标签：zsh, zshrc

zsh 有一个特性（auto_cd），只要输入目录名就会自动转到（cd）那个目录。我很好奇是否有办法将 zsh 配置为对文件名执行类似的操作，如果我只键入文件名，则使用 vim 自动打开文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:52:37.330

我能想到三种可能。首先是可以自动翻译的后缀别名

```
% *.ps 
```

到

```
% screen -d -m okular *.ps 
```

在你做之后

```
alias -s ps='screen -d -m okular' 
```

. 但是您需要为每个文件后缀定义此别名。它也在大多数扩展之前被处理，所以如果

```
% *.p? 
```

匹配相同的文件，因为`*.ps`它不会打开任何东西。

其次是 command_not_found 处理程序：

```
function command_not_found_handler()
{
    emulate -L zsh
    for file in $@ ; do test -e $file && xdg-open $file:A ; done
} 
```

. 但这不适用于绝对或相对路径，仅适用于不包含正斜杠的内容。

第三是一个 hack 覆盖接受行小部件：

```
function xdg-open()
{
    emulate -L zsh
    for arg in $@ ; do
        command xdg-open $arg
    endfor
}
function _-accept-line()
{
    emulate -L zsh
    FILE="${(z)BUFFER[1]}"
    whence $FILE &>/dev/null || BUFFER="xdg-open $BUFFER"
    zle .accept-line
}
zle -N accept-line _-accept-line 
```

. 以上改变了历史（我可以展示如何避免这种情况）并且相当hackish。很好，它不会禁用后缀别名（`whence '*.ps'`返回别名的值），我曾经认为它会。它确实禁用了autocd。我可以避免这种情况（就`|| test -d $FILE`在`whence`测试之后），但谁知道还有多少其他事情正在腐败。如果您对第一种和第二种解决方案感到满意，最好使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T09:43:55.310

我猜你可以使用“ [fasd_cd](https://github.com/clvv/fasd) ”，它有一个别名 v，它使用 viminfo 文件来识别你至少打开过一次的文件。在我的环境中，它就像一个魅力。

Fast cd 还有其他你会喜欢的神奇的东西！不要忘记在 vim 上设置此别名以打开最后编辑的文件：

```
alias lvim="vim -c \"normal '0\"" 
```

# frameworks - 如何使用实体数据模型 (EDMX) 插入表

> ID：13092535
> 
> 赞同：2
> 
> 时间：2012-10-26T18:38:15.360
> 
> 标签：frameworks, insert, entity

我正在尝试在 VB.NET 中编写一个按钮处理程序，如果选中了复选框，它将从 gridview 读取行并将它们写入数据库。

我将此应用程序设置为使用 EntityDataSource 并将我的 .edmx 文件添加到 DAL 文件夹。我已经编写了按钮方法，但我对 EF 的了解不够，不知道如何处理来自 gridview 的数据。这是我的 btn_click 方法：

```
Private Sub btnGetChecks_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnGetChecks.Click
'********************************************
'* gets status of checkbox and writes to db *
'********************************************
Dim row As GridViewRow

Label6.Text = ""
For Each row In DvsGridView.Rows
  Dim RowCheckBox As CheckBox = CType(row.FindControl("chkStatus"), CheckBox)
  If RowCheckBox.Checked Then
    Label6.Text += row.Cells(5).Text & " Checked "
    ' Need to write checked data to the db
    ' ******* WHAT GOES HERE? *******
    Else

    Label6.Text += row.Cells(5).Text & " Unchecked "

  End If
Next
End Sub 
```

我对 EDMX 相当陌生，但了解 VB.net。任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:46:28.327

检查此示例代码并修改它以匹配您的实体和对象

```
 Using db As New DBEntities()

   'set values here
    Dim x As New TableNameE()

    x.col1 = "value1"
    x.col2 = "value2"

    db.AddToTableNameE(x)
    db.SaveChanges()
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T00:02:28.323

感谢@rs.，我能够找出我的问题。参考已接受的答案，对于那些想知道您的项目中应该包含什么 .AddToTableNameE() 的人，它只是 .Add(x)。对每一行使用 .SaveChanges() 也会对性能造成一定影响，您应该创建一个 Dim List(Of TableNameE()) 并将“x”添加到列表中，然后像这样使用 .AddRange() ：

```
//creating a data access class is one way to connect to your db by passing in db path
Dim context As New Namespace.YourContext(New DataAccessClass() With {.Path = aBrowsedForSDFFileTextBoxMaybe.Text})
Dim listOfTableObjects As List(Of Namespace.TableObject) = New List(Of Namespace.TableObject)

    For n = 1 To SomethingRelatedToRows
    Dim tableObject As New Namespace.TableObject() With {
                    .entityProp1 = TableObject(n).entityProp1,
                    .entityProp2 = TableObject(n).entityProp2,
                    .entityProp3 = TableObject(n).entityProp3,
                    .entityProp4 = TableObject(n).entityProp4,
                    .entityProp5 = TableObject(n).entityProp5,
                    .entityProp6 = TableObject(n).entityProp6
                }

        listOfTableObjects.Add(tableObject)

    Next n

    //.TableObjects being the DbSet from the ...Context.vb file
    context.TableObjects.AddRange(listOfTableObjects) 
    context.SaveChanges() 
```

# android - 需要有关如何在 android 和 iphone 市场中部署 HTML5 移动应用程序的建议

> ID：13092539
> 
> 赞同：0
> 
> 时间：2012-10-26T18:38:29.217
> 
> 标签：android, iphone, mobile-application

我制作了一个 HTML5 移动应用程序，我想在 android 和 iphone 应用程序市场上发布它。那么我能做到的最简单的方法是什么。我原本想制作一个小的 webview，这将是原生代码，适用于 android 和 iphone，它将作为 HTML5 应用程序的入口点，但我不确定这是否会通过验证，是否正确? 如果是这样，您对我如何解决问题有任何其他建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:00:44.197

我使用[PhoneGap](http://phonegap.com/)在本机应用程序中嵌入 javascript 和 html

# r - 将平均值与 R 中的特定数据值进行比较

> ID：13092541
> 
> 赞同：1
> 
> 时间：2012-10-26T18:38:39.017
> 
> 标签：r, dataframe, data.table

我有一个这样的数据框：

```
Date     Process Duration
1/1/2012 xnit     10
1/1/2012 xnit     15
1/1/2012 xnit     20
1/2/2012 telnet   80
1/2/2012 telnet   50
1/2/2012 telnet   40
8/1/2012 ftp      3
8/1/2012 ftp      11
8/1/2012 ftp     12 
```

转换为 x<-data.table(x) 后：

我可以这样计算每项工作的平均值：

```
x<-x[, mean := mean(Duration), by = Process] 
```

我喜欢将特定日期 Duration 的持续时间与平均值进行比较。我试过这个：

```
x<-x[, Aug1 := subset(x, Date==as.Date(c("2012-08-01")))$Duration, by = Process] 
```

一旦我得到这个值，我将把 Aug1 列与每个进程的平均值进行比较，以查看异常值。但是，此命令需要很长时间才能完成。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T03:25:08.697

使用时无需重新分配给 x ，`:=`因为这是通过引用分配给 x （尤其是从默认情况下不会打印的版本 1.8.3 开始）。我也不会使用子集或`$`data.tables，因为这会避免所有 data.table 效率。——</p>

尝试这样的事情

```
 x <- data.table(x)
 # add a column that is the by-process mean
 x[, mean_duration := mean(Duration), by = Process]

 # calculate the difference
 x[, diff_duration := Duration - mean_duration]

 # subset just the 1st of august
 x[Date==as.Date("2012-08-01")] 
```

This final subset could be done more efficiently if the `data.table` was keyed by `Date`. In the current form this final step is a vector scan, but a single vector scan should not be too inefficient.

I would recommend reading the introduction vignette to better utilize the data.table syntax and efficiency.

# c# - 使用 System.Diagnostics.Process 来反映引用的程序集？

> ID：13092545
> 
> 赞同：0
> 
> 时间：2012-10-26T18:38:59.650
> 
> 标签：c#, .net, reflection, process, .net-assembly

我有一个可执行文件，比如 abc.exe，它引用 a.dll（与可执行文件相同的文件夹）、b.dll（在随机文件夹中）和 c.dll（在随机文件夹中）。

但是，这些 DLL 不一定与可执行文件（或 GAC）在同一目录中，这是我无能为力的。

我尝试使用 System.Reflection.Assembly 来尝试查找 abc.exe 使用的所有引用程序集。

```
foreach (AssemblyName an in assembly.GetReferencedAssemblies())
{
    Assembly.Load(an);
} 
```

这似乎加载了可执行文件目录 (a.dll) 中的程序集，但毫不奇怪会为其他程序集抛出文件未找到异常。

我的想法是使用 System.Diagnostics.Process 加载进程，然后反映进程，因为这应该告诉我在哪里可以找到 b.dll 和 c.dll(?)

但是，我不知道该怎么做。这可能吗？如果可以，怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:09:25.327

所以事实证明这可以通过 System.Diagnostic.Process 来完成，例如：

```
public void findModules(string executablePath)
    {
         Process process = new Process();
         process.StartInfo.FileName = executablePath;
         process.Start();
         process.WaitForInputIdle();
         System.Threading.Thread.Sleep(10000);

         ProcessModuleCollection mods = process.Modules;

         foreach (ProcessModule m in mods)
         {
            Console.WriteLine(m.ModuleName + ":" + m.FileName);
         }
  } 
```

ModuleName 为您提供程序集的名称，FileName 为您提供正确的程序集路径，无论它在哪里（在网络上，在 C:\Windows 等中）

但是，当可执行文件完成加载所有模块时，我无法弄清楚如何“检测”。如果我删除睡眠线，我只会看到部分模块列表，我猜这些模块是由时间 process.Modules 完成加载的模块。

# java - 在循环中使用对象名称作为变量

> ID：13092546
> 
> 赞同：2
> 
> 时间：2012-10-26T18:39:07.230
> 
> 标签：java, for-loop

我有一段 Java 代码，其中有向量定义为`Vector1, Vector2, Vector3,.....VectorN`和`oldVector1, oldVector2, oldVector3,...oldVectorN`。

我需要编写一个循环来遍历所有这些向量并计算`Vector"i"`with的每个组合的标量积`oldVector"j"`。

实际上我知道最好的方法是用一个包含所有向量的数组替换单个向量并使用该数组。

但是，我不允许触摸其余代码，并且需要保留向量作为单独对象的定义。

我怎么能做这样的事情？

```
for (i = 1; i < 10; i++) {
  for (j = 1 ; i < 10; j++) {
    result[i][j] = dotproduct(Vector"i", oldVector"j");
  }
} 
```

基本上，Java中有什么方法可以构造类似于字符串的变量名 egeg `"Vector"+i`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:57:13.200

您可以添加中间集合吗？

例如，你可以做

```
Vector[] vectors = new Vector[];
Vector[] oldVectors = new Vector[];

vectors[1] = Vector1;
vectors[2] = Vector2;
... (etc.)

oldVectors[1] = oldVector1;
oldVectors[2] = oldVector2;

for (int i=1; i<10; i++) }
   for (int j=1; j<10; j++) {
      result[i][j] = dotproduct(vectors[i], oldVectors[j]);
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T18:54:44.893

而不是命名你的对象`Vector1`，等等`Vector2`，`Vector3`你应该把它们放在一个数组中。然后您可以使用`v[i]`.

您在问题中提到了这种方法并说您不能使用它。但是你可以。您只需要在旧代码和新代码之间添加一个层。像这样初始化数组：

```
v[1] = Vector1;
v[2] = Vector2;
// etc. 
```

现在您可以编写使用数组索引的代码，但仍然位于不允许修改的代码之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:09:29.997

这取决于这些引用是局部变量还是字段。如果它们是局部变量，那么您可能不走运。我可能会按照其他答案的建议将它们写入数组或集合中，或者（如果代码很简单或可以放入函数中）只是复制它。那很臭，但问题首先是臭的。

如果引用是对象的字段，那么您可以考虑使用反射对它们进行循环。这个想法是使用包含对象的类来解析字段名称。代码将如下所示：

```
ContainingType containingObject = ...;
for (int i = 1; i < 10; i++) for (int j = 1; j < 10; j++) {
    Field vectorField    = ContainingType.class.getField("vector"    + i);
    Field oldVectorField = ContainingType.class.getField("oldVector" + j);

    Vector vector    = (Vector) vectorIField.get(containingObject);
    Vector oldVector = (Vector) oldVectorField.get(containingObject);
    result[i][j] = dotProduct(vector,oldVector);
} 
```

# algorithm - 哪种排序算法使用最少的比较？

> ID：13092548
> 
> 赞同：20
> 
> 时间：2012-10-26T18:39:18.580
> 
> 标签：algorithm, sorting

想象一下两个元素的比较非常昂贵的情况。

你会使用哪种排序算法？

哪种排序算法在平均情况下使用最少的比较？

如果您可以预期很多被比较的元素是相同的，比如说在 80% 的比较中，该怎么办。这有什么不同吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-12-30T16:15:36.257

**[Merge-insertion sort](https://en.wikipedia.org/wiki/Merge-insertion_sort)**是插入排序的一种变体，被吹捧为几十年来已知比较最少的排序算法，并且可能仍然是用于最小比较的最佳自由记录排序算法：

> *合并插入排序是在n* ≤ 15 或 20 ≤ *n ≤ 22 时对**n 个*项目进行最小可能比较的排序算法，并且对于*n* ≤ 46 ，它具有最少的已知比较。

 ***[据报道， Glenn K. Manacher 的算法](https://doi.org/10.1145%2F322139.322145)“以及后来的破纪录排序算法”（不幸的是，目前似乎都没有免费记录）适应合并插入排序算法以提供更少的比较。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-26T18:50:47.540

获胜者是[Sleep Sort](http://rosettacode.org/wiki/Sorting_algorithms/Sleep_sort)，它不使用任何比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T18:56:44.827

### 很可能是[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)

* * *

正如他们所说，排序是其中的一个主题，*魔鬼在细节中。*通常，次要考虑因素支配着性能输入参数。

但是，如果比较非常昂贵并且如果大多数键是相同的，则输入可能被认为已经排序或几乎已经排序。

在这种情况下，您需要的是一种具有最快*最佳情况的合理算法，*并且几乎可以肯定是[*插入排序*。](http://en.wikipedia.org/wiki/Insertion_sort)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T19:04:37.207

这取决于你有什么数据。您是否需要稳定的算法？

在您的数据统一的地方，您可以使用桶排序（Θ（n），O（n ^ 2））

[计数排序](http://en.wikipedia.org/wiki/Counting_sort)（我认为这就是你要找的），它也是稳定的算法，但需要更多的内存（更少的是你有很多相同的记录）。

当然你可以使用睡眠排序，但是如果你有很多数据，它就不起作用了。

如果您的元素 80% 相同，也许有一种简单的方法可以说它们是相同的（完全相同）？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T18:46:40.303

[Shellsort](http://en.wikipedia.org/wiki/Shellsort)使用较少的比较。

而且你有很多相同的元素，[计数排序](http://en.wikipedia.org/wiki/Counting_sort)应该可以完成工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-15T23:54:55.267

也许像基数排序这样的非比较算法可能是答案，因为它在一般情况下也很快（需要时间 O(n)）。也不会在元素之间进行比较，但另一方面它需要大量内存

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-26T18:44:33.080

分布排序（使用散列数组）几乎不需要比较。

```
m = max number  may appear in the input + 1
hash = array of size m
initialize hash by zeroes

for i = 0 to n - 1
    hash[input[i]] = hash[input[i]] + 1
j = 0
for i = 0 to m - 1
    while hash[i] > 0
        sorted[j] = i
        j = j + 1
        hash[i] = hash[i] - 1 
```***

# java - 为什么 HttpGet 在没有超时的情况下工作，但超时会导致内部服务器错误？

> ID：13092550
> 
> 赞同：1
> 
> 时间：2012-10-26T18:39:20.237
> 
> 标签：java, android, http

我不知道 HttpClient 究竟是如何工作的，但我觉得很奇怪，如果我用初始化 httpclient 会收到内部服务器错误，`new DefaultHttpClient(httpParameters)`但如果我用`new DefaultHttpClient()`. 我还应该提到，第一次请求时不会发生错误。这是我的一段代码，有什么错误吗？

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 3000);
HttpConnectionParams.setSoTimeout(httpParameters, 5000);
HttpClient httpclient = new DefaultHttpClient(httpParameters);
HttpResponse response = httpclient.execute(new HttpGet(url));
int statusCode = response.getStatusLine().getStatusCode(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:52:40.377

尝试改变

```
HttpClient httpclient 
```

至

```
DefaultHttpClient httpclient 
```

# c# - 通过 DataAnnotations 创建自定义验证？

> ID：13092555
> 
> 赞同：2
> 
> 时间：2012-10-26T18:39:51.193
> 
> 标签：c#, .net, wcf, validation

好的，所以当我想验证一个属性时，我可能会写这样的东西：

```
 [Required]
    [StringLength(255)]
    [DataType(DataType.EmailAddress)]
    [RegularExpression(RegexStrings.Email, ErrorMessage = "Email is not valid.")]
    [DataMember(IsRequired = true, Name="Email", Order = 1)]
    public string Email { get; set; } 
```

我喜欢这个，因为在这种情况下，我将它指向我们在公共库中拥有的正则表达式字符串，并在它失败时指定错误消息。简单干净。

我的情况是这样的。这是在 WCF RESTful 服务中。*我想以这种方式*验证的属性之一需要使用自定义方法进行验证，该方法使用一些业务逻辑进行验证（它检查字符串长度和字节长度）。我可以（以及我如何）设置此自定义验证，以便我可以像上面示例中使用的那样使用它；所以它看起来像：

```
[StreamValidation(ValidationClass, ErrorMessage = "Serial number is invalid")]
public string Ksn { get; set; } 
```

更新：

我已经构建了以下类作为我的属性：

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field, AllowMultiple = false)]
public class KsnValidation : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        if (!(value is string)) return false;

        var val = (string) value;
        var bytes = Enumerable
            .Range(0, val.Length / 2)
            .Select(x => Byte.Parse(val.Substring(2 * x, 2), NumberStyles.HexNumber))
            .ToArray();
        return val.Length == 20 && bytes.Length == 10;
    }

    public override string FormatErrorMessage(string name)
    {
        return base.FormatErrorMessage(name);
    }
} 
```

然后装饰以下属性：

```
[KsnValidation(ErrorMessage = "Wrong Name")]
public string Ksn { get; set; } 
```

但我不确定如何对此进行单元测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:59:08.790

这个[SO answer](https://stackoverflow.com/questions/3413715/how-to-create-custom-data-annotation-validators)给出了 MVC2 的答案。

这是MVC3 及更高版本[的帖子](http://weblogs.asp.net/brijmohan/archive/2012/01/24/asp-net-mvc-3-custom-validation-using-data-annotations.aspx)。

基本上你创建一个属性：

```
public class MyValidationAttribute: ValidationAttribute
{
   public MyValidationAttribute()
   { }

    protected override ValidationResult IsValid(
           object value, ValidationContext validationContext)
    {

        ...
        if (somethingWrong)
        {
            return new ValidationResult(errorMessage); 
        }
        return null; // everything OK
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:06:28.327

[ValidationAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute%28v=vs.95%29.aspx)的文档显示了如何创建自定义验证属性。

# sql-server-2008 - 大量数据的内连接和拆分

> ID：13092561
> 
> 赞同：2
> 
> 时间：2012-10-26T18:40:47.227
> 
> 标签：sql-server-2008, tsql, large-data-volumes

我们正在处理大量数据（下面给出的行数）：

```
Table 1 : 708408568 rows  -- 708 million
Table 2 : 1416817136 rows -- 1.4 billion

Table 1 Schema:
----------------
ID -      Int PK
column2 - Int

Table 2 Schema
----------------
Table1ID - Int FK
SomeColumn - Int
SomeColumn - Int 
```

表 1 有 PK1，它作为表 2 的 FK 服务。

## 索引详情：

```
Table1 : 
PK Clustered Index on Id
Non Clustered (Non Unique) on column2

Table 2 :
Table1ID (FK) Clustered Index 
```

以下是需要执行的查询：

```
SELECT t1.[id]
      ,t1.[column2]
FROM  Table1 t1
inner join Table2 t2
    on s.id = cs.id
WHERE t1.[column2] in (select [id] from ConvertCsvToTable('1,2,3,4,5.......10000')) -- 10,000 Comma seperated Ids 
```

总而言之，ID 上的内部连接应该由 PK 和 FK 上相同 ID 上的聚集索引处理。至于column2上的“巨大”Where条件，我们有一个非聚集索引。

但是，对于 100 个 ID 的小子集，查询需要 4 分钟，我们需要传递 10,000 个 ID。

有没有更好的设计明智的方法可以做到这一点，或者表分区可能有帮助？

只是想获得一些方法来解决如何使用 Inner Join 和 Where IN 解决大量 Select。

注意：ConvertCsvToTable 是一个拆分函数，它已经被确定为最佳执行。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:03:14.947

这就是我会尝试的：创建一个具有函数返回结构的临时表。确保将列 ID 设置为主键，以便优化器将其考虑在内...

```
CREATE TABLE #temp
(id    int          not null
    ...
,PRIMARY KEY (id) ) 
```

然后调用函数

```
insert into #temp exec ConvertCsvToTable('1,2,3,4,5.......10000') 
```

然后使用查询中直接加入的临时表

```
SELECT t1.[id], t1.[column2]
FROM  Table1 t1, t2, #temp
where t1.id = t2.id
  and t1.[column2] = #temp.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:10:54.990

将条件带入连接
它使优化器有机会首先按 t1.[column2] 过滤
尝试不同的哈希提示

```
SELECT t1.[id], t1.[column2]
FROM  Table1 t1 with (nolock)
inner join Table2 t2 with (nolock)
   on s.id = cs.id
  and t1.[column2] in (select [id] from ConvertCsvToTable('1,2,3,4,5.......10000')) 
```

您可能需要告诉它在 Column2 上使用该索引。
但是给它一个做正确事情的机会。
在你没有给它机会做正确事情的地方。

如果您使用#temp，然后尝试
（并按照Rodolfo 所说的+1 在temp 上声明PK）
这将几乎迫使它从小桌子开始
它仍然可能会变得愚蠢首先在T2 上加入，但我对此表示怀疑。

```
SELECT t1.[id], t1.[column2]
FROM #temp 
JOIN Table1 t1 with (nolock)
  on t1.[column2] = #temp.ID 
join Table2 t2 with (nolock)
   on t2.ID = t1.ID 
```

# php - 我如何在php中注销？

> ID：13092564
> 
> 赞同：1
> 
> 时间：2012-10-26T18:40:58.817
> 
> 标签：php

```
<?php
    session_start();
    session_destroy();
    if(isset($_COOKIE['cookemail_id']) && isset($_COOKIE['cookpassword']))
    {
    setcookie("cookemail_id", "", time()-60*60*24*100, "/");
    setcookie("cookpassword", "", time()-60*60*24*100, "/");
    setcookie("cooktype", "", time()-60*60*24*100, "/");
    }

?> 
```

以上是我的注销代码。但是会话变量没有被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:55:14.447

```
<?php
session_start();
if (isset($_COOKIE['cookemail_id']) && isset($_COOKIE['cookpassword'])) {
    setcookie("cookemail_id", "", time()-42000, "/");
    setcookie("cookpassword", "", time()-42000, "/");
    setcookie("cooktype", "", time()-42000, "/");
}

$_SESSION = array();

if (ini_get("session.use_cookies")) {
    setcookie(session_name(), '', time() - 42000, '/');
}

session_destroy();
?> 
```

该示例就在页面[http://php.net/manual/en/function.session-destroy.php上](http://php.net/manual/en/function.session-destroy.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T18:43:23.627

放在声明`session_destroy();`之后`if`。您不想在创建会话后立即销毁它...

编辑：您的代码令人困惑。你在说什么会话变量？我没有看到。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T18:53:07.517

```
setcookie ("TestCookie", "", time() - 3600); 
```

见[php.net/manual/en/function.setcookie.php](http://at2.php.net/manual/en/function.setcookie.php)

> Example #2 setcookie() 删除示例

# jakarta-ee - Glassfish 服务器上的自动 EJB 计时器未触发

> ID：13092567
> 
> 赞同：3
> 
> 时间：2012-10-26T18:41:11.453
> 
> 标签：jakarta-ee, ejb, glassfish-3, ejb-3.1, ear

所以我在 Glassfish 3.1 上运行 Java EAR 应用程序。我在我的 EJB 模块中创建了一个带有单个注释计时器函数的无状态会话 bean。我没有确切的代码，但它看起来像这样：

```
@Stateless
public class SessionTimerBean {

    public SessionTimerBean(){
       System.out.println("Constructor Called");
    }

    @Schedule(second="*/10", minute="*", hour="*")
    public void scheduleTimer(final Timer t) {
       System.out.println("Timer Called");
    }
} 
```

当我启动 Glassfish 时，调试信息似乎表明它可以识别 EJB 计时器注释，并且 bean 的构造函数方法确实在启动时被调用。但是计时器方法本身似乎永远不会在任何时候被触发。

其他人遇到过这个问题吗？我还缺少其他配置吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:13:49.873

下面的计时器代码适用于 glassfish 3.1.2

```
import javax.ejb.Schedule;
import javax.ejb.Stateless;
import javax.ejb.Timer;

@Stateless
public class LabbBean {

    @Schedule(second="*/5", minute="*",hour="*", persistent=false)
    public void method123(final Timer timer) {
        System.out.println("Timer1234");
    }
} 
```

但是当我删除时停止工作

```
persistent=false 
```

所以在服务器日志中我发现：

```
INFO: keepstate is true and will not create new auto timers during deployment. 
```

所以我将“保持状态”更改为假。我不是它的专家，但是将其更改为 false 会使计时器在没有 persistent=false 的情况下工作

我在下面的文件中更改了它

glassfish-ejb.xml：

```
<glassfish-ejb-jar>
    <enterprise-beans>
    ...
    </enterprise-beans>
    <keep-state>false</keep-state>
</glassfish-ejb-jar> 
```

glassfish-application.xml

```
<glassfish-application>
    <keep-state>false</keep-state>
</glassfish-application> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:23:13.443

根据规范，定时器按照惯例是持久的：

> 计时器服务旨在为长期业务流程建模。计时器在容器崩溃、服务器关闭以及向它们注册的企业 bean 的激活/钝化和加载/存储周期中幸存下来。可以选择在每个计时器的基础上禁用这些持久性保证。

Aksel 演示了如何禁用持久保证。glassfish 服务器使用它的默认数据库来保存它的计时器（看[这里](http://docs.oracle.com/cd/E18930_01/html/821-2418/beahw.html)）。我可以想象它没有启动并运行，因此计时器不起作用。使用以下命令启动它：

```
asadmin start-database 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-18T14:53:18.973

我在学习教程时遇到了同样的问题。我使用的是 Glassfish 4.1（JavaEE 7 实现）。我遇到了同样的错误

> 信息：此服务器不拥有 EJB 计时器

我刚刚创建了一个动态 Web 模块。不是带有 EJB 模块的 EAR 项目。按照上述答案，我首先通过`persistent=false`像这样插入属性来更改我的 @Schedule() 注释

> @Schedule(second=" */10", minute="* ", hour="8-23", dayOfWeek="Mon-Fri", dayOfMonth=" *", month="* ", year="*", info="我的计时器”，持久=假）

然后我转到我的 glasshish-web.xml 部署描述符，并将以下配置`<keep-state>false</keep-state>`放在该部分中，如下所示：

```
<glassfish-web-app>
    <context-root>/HelloWorld</context-root>
    **<keep-state>false</keep-state>**
</glassfish-web-app> 
```

# tinymce - Event.add 按键不起作用？

> ID：13092571
> 
> 赞同：1
> 
> 时间：2012-10-26T18:41:28.650
> 
> 标签：tinymce, keypress

我们正在尝试将 tinyMCE 用于我们的一个应用程序。我们想将一些事件处理附加到 tinyMCE 中的特定元素。我们已经尝试使用

```
Event.add(element, 'keypress', getTag); 
```

其中*element*是我们试图将事件附加到的 HTML 元素，而*getTag*是我们希望在触发 keypress 事件时调用的函数。我们试图附加的特定元素是一个包含一些文本的 span 元素。我们想捕捉在 span 标签之间输入特定组合键（如 ctrl - F10）并弹出带有选项的菜单。

菜单中的选项将根据输入组合的特定 span 元素而有所不同。这就是为什么我们要附加到特定元素而不是全局附加到文档中的所有 span 元素（在 tinyMCE 内）。即 getTag 函数的行为会有所不同，使用闭包，这取决于输入组合的位置。

问题是当我们附加到特定元素并测试它们时，任何“按键”事件都不会发生。如果我们尝试使用“click”事件附加到 span 元素，一切都会按预期工作。一旦我们恢复使用“按键”，就不会再发生任何事情。

使用调试工具，我已经验证了几件事。事件侦听器附加到元素。似乎 tinyMCE 创建了一个顶级按键并单击（以及其他）到 tinyMCE 中的文档。我猜这就是 Editor.onKeyPress().add() 之类的函数的工作方式。当我使用 click 调试工作场景时，我可以看到为 document 和 span 元素触发事件的位置。在调试 keypress 事件时，我只看到为 document 元素触发的事件，而不是 span 元素。我认为 tinyMCE 正在抑制该事件，但我不知道如何以及需要做什么来阻止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:32:28.193

在您自己的插件中使用此处理程序或使用 tinymce 配置参数[设置](http://www.tinymce.com/wiki.php/Configuration%3asetup)

```
ed.onKeyDown.add(function onkeydown(ed, evt) {

   var is_in_span = ed.selection.getNode().nodeName == 'SPAN';   

   // check for caret in SPAN and F10-Key
   if (is_in_span && evt.keyCode == '121'){ // you may add other keyCodes here
      // do whatever you like here
      ...
   }
}); 
```

# objective-c - 在 sqlite 中按名称排序返回什么 un numberOfRowsInSection

> ID：13092575
> 
> 赞同：0
> 
> 时间：2012-10-26T18:41:56.550
> 
> 标签：objective-c

我在 sqlite 中按名称对数据进行了排序：

```
 char*sql="SELECT* FROM tblcocktail ORDER BY drinkname ;"; 
```

我不知道如何在按字母排序的表格中显示它：请指教:)

```
-(void)viewDidAppear:(BOOL)animated
{
Cocktails*cock=[[Cocktails alloc]init];
_arrcocktail=[cock getallcocktail];
[self.tableView reloadData];

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
 // Return the number of sections.
 return [_arr count]; //all the letters
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  //i don't not what to put here so it will show me the right name under the right letter
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:20:33.490

您可以简单地创建单元格并分配名称。

在`tableView:cellForRowAtIndexPath:`

```
static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...

cell.textLabel.text = [_arr objectAtIndex:indexPath.row];

return cell;
} 
```

# vb.net - VB 2010 打开 Word 文档并隐藏 Office 功能区

> ID：13092578
> 
> 赞同：1
> 
> 时间：2012-10-26T18:42:14.603
> 
> 标签：vb.net, visual-studio-2010, office-2010

我可以从我的 VB 2010 应用程序中打开 Word 文档。我需要在打开文档时隐藏 MS Office 功能区并将 Show Ruler 选项设置为 false。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:43:47.057

尝试`<startFromScratch = "true">`在功能区 xml 代码的开头添加功能区。代码可能如下所示：

```
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui">
<ribbon startFromScratch="true">

'your code here

</ribbon>
</customUI> 
```

# android - 使用外部 Admob jar 的 Proguard 运行时错误

> ID：13092580
> 
> 赞同：3
> 
> 时间：2012-10-26T18:42:21.630
> 
> 标签：android, jar, admob, proguard

签名的应用程序给出错误！

我的应用程序使用外部 Admob jar，但是 proguard 正在触摸 jar：

jar 文件位于 /libs/GoogleAdMobAdsSdk-6.2.1.jar

谢谢

LogCat 错误：

```
Proguard returned with error code 1\. See console
Warning: com.google.ads.m: can't find referenced class  
com.google.ads.internal.state.AdState
Warning: com.google.ads.m: can't find referenced class com.google.ads.internal.state.AdState
  You should check if you need to specify additional program jars.
Warning: there were 2 unresolved references to classes or interfaces.
     You may need to specify additional library jars (using '-libraryjars').
java.io.IOException: Please correct the above warnings first.
at proguard.Initializer.execute(Initializer.java:321)
at proguard.ProGuard.initialize(ProGuard.java:211)
at proguard.ProGuard.execute(ProGuard.java:86)
at proguard.ProGuard.main(ProGuard.java:492) 
```

这是在jar文件里面

配置 proguard-project.txt：

```
-libraryjars /libs/GoogleAdMobAdsSdk-6.2.1.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-keep public class * extends android.view.View {
public <init>(android.content.Context);
public <init>(android.content.Context, android.util.AttributeSet);
public <init>(android.content.Context, android.util.AttributeSet, int);
public void set*(...);
}

-keepclasseswithmembers class * {
public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
public void *(android.view.View);
public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
public static <fields>;
} 
```

添加后

```
-keep public class com.google.ads.** 
```

到该文件，eclipse控制台仍然给出以下错误：

```
Proguard returned with error code 1\. See console
Note: there were 160 duplicate class definitions.
Warning: com.google.ads.m: can't find referenced class     
com.google.ads.internal.state.AdState
Warning: com.google.ads.m: can't find referenced class    
com.google.ads.internal.state.AdState
You should check if you need to specify additional program jars.
Warning: there were 2 unresolved references to classes or interfaces.
You may need to specify additional library jars (using '-libraryjars').
java.io.IOException: Please correct the above warnings first.
at proguard.Initializer.execute(Initializer.java:321)
at proguard.ProGuard.initialize(ProGuard.java:211)
at proguard.ProGuard.execute(ProGuard.java:86)
at proguard.ProGuard.main(ProGuard.java:492) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T16:41:36.350

我刚刚添加了

```
-dontwarn com.google.ads.** 
```

到 proguard-project.txt 文件，签名的 apk 工作正常！这里推荐（就像 Eric 之前说的）：[Proguard can't find referenced class com.google.ads.internal.state.AdState](https://stackoverflow.com/questions/13040226/progaurd-returned-with-error-code-1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T04:06:33.287

这对我有用 看来您需要将这两项添加到 proguard 配置中：

```
-dontwarn com.google.ads.**
-keep class com.google.ads.**  {*;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T08:16:07.610

-dontwarn com.google.ads.** 如果您想保护您的课程，请在此处保护广告课程，然后添加 com.pkgname。**

# php - 使用 xpath 选择第一个结果的孩子

> ID：13092587
> 
> 赞同：3
> 
> 时间：2012-10-26T18:42:53.267
> 
> 标签：php, xml, xpath, simplexml

我有一段 XML，其中相同的信息可以显示为不同节点的子节点。如 ：

```
<root>
<category id=1>
        <product id="ABC123" >

              <sizes>
                    <size name="S"/>
                <size name="M"/>
                <size name="L"/>
                <size name="XL"/>
                <size name="2XL"/>
                <size name="3XL"/>
              </sizes>
            </product>

                 </products>
           </category>
<category id=2>
        <products>
        <product id="ABC123" >

              <sizes>
                    <size name="S"/>
                <size name="M"/>
                <size name="L"/>
                <size name="XL"/>
                <size name="2XL"/>
                <size name="3XL"/>
              </sizes>
            </product>

          <product id="PPP543" >

              <sizes>
                    <size name="S"/>
                <size name="M"/>
                <size name="L"/>
                <size name="XL"/>
              </sizes>
            </product>

                 </products>
           </category> 
```

我的目标是选择产品 id ABC123 的大小并将它们存储为数组。我拥有的当前代码是：

```
$arrTest=array();

    foreach($xml->xpath('//root/category/products/product[@id= "'.$productCall.'" ]/sizes/size') as $size){

              array_push($arrTest, $size["name"]);
      } 
```

$productCall 是我正在寻找的 id。在这种情况下，它是 ABC123。

输出为 S,M,L,XL,2XL,3XL,S,M,L,XL,2XL,3XL。这意味着它正在读取找到的两个条目。考虑到 foreach 循环，我预计会这样，但我似乎无法找到一种方法来获取第一个结果的输出。我尝试添加 [0] 和 [1] ：

```
$y=$xml->xpath('//root/category/products/product[@id= "'.$productCall.'" ][1]/sizes/size'); 
```

[0] 什么都不返回，[1] 返回的结果与我已经得到的结果相同。

我希望这是一个简单的问题，我错过了一些基本的东西或只是过度思考，因为我以前真的没有使用过 xpath。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:49:14.130

**使用**：

```
(/*/*//product[@id='ABC123']/sizes)[1]/size 
```

**或使用**：

```
((/*/*/product | /*/*/products/product)/sizes)[1]/size 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
    "(/*/*//product[@id='ABC123']/sizes)[1]/size"/>
========
  <xsl:copy-of select=
    "((/*/*/product | /*/*/products/product)/sizes)[1]/size"/>

 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于提供的 XML 文档时**（在将其更正为格式良好的文档之后）：

```
<root>
    <category id="1">
        <product id="ABC123" >
            <sizes>
                <size name="S"/>
                <size name="M"/>
                <size name="L"/>
                <size name="XL"/>
                <size name="2XL"/>
                <size name="3XL"/>
            </sizes>
        </product>
    </category>
    <category id="2">
        <products>
            <product id="ABC123" >
                <sizes>
                    <size name="S"/>
                    <size name="M"/>
                    <size name="L"/>
                    <size name="XL"/>
                    <size name="2XL"/>
                    <size name="3XL"/>
                </sizes>
            </product>
            <product id="PPP543" >
                <sizes>
                    <size name="S"/>
                    <size name="M"/>
                    <size name="L"/>
                    <size name="XL"/>
                </sizes>
            </product>
        </products>
    </category>
</root> 
```

**对两个 XPath 表达式进行求值，并将每个节点中的选定节点（在视觉上很好地定界）复制到输出——两者都是正确的**：

```
<size name="S"/>
<size name="M"/>
<size name="L"/>
<size name="XL"/>
<size name="2XL"/>
<size name="3XL"/>
========
  <size name="S"/>
<size name="M"/>
<size name="L"/>
<size name="XL"/>
<size name="2XL"/>
<size name="3XL"/> 
```

**请注意**：我希望第二个 XPath 表达式更有效（在足够大的文档上），因为它不使用`//`伪运算符。

# windows - Windows XP 批处理命令 schtasks 不运行远程脚本

> ID：13092589
> 
> 赞同：2
> 
> 时间：2012-10-26T18:43:03.753
> 
> 标签：windows, batch-file, cmd, scheduled-tasks

我正在尝试创建一个`batch`文件，以便在多台远程 PC 上运行自动脚本。
我的主机应该能够连接到任何远程 PC 并设置本地计划任务。
批处理文件使用以下命令：

```
schtasks /delete               <--- remove any previous version
         /S \\10.1.2.3         <--- the remote PC's IP
         /U theAdministrator   <--- the username to access the PC
         /P MyPassword         <--- the password to access the PC
         /TN MyTask            <--- task name
         /F                    <--- don't ask, just do it option

schtasks /create 
         /S \\10.1.2.3 
         /U theAdministrator 
         /P MyPassword 
         /RU theAdministrator  <--- the username to execute the task 
         /RP MyPassword        <--- the password to execute the task
         /SC dayly /MO 1       <--- run every day
         /TN MyTask 
         /TR C:\task.bat       <--- the script to run on the remote PC 
```

当我启动第一个`/delete`命令时，一切正常，但第二个返回警告：
*“任务已创建，但可能不会运行，因为无法设置帐户信息”*
（对不起，如果这不是确切的错误信息，但我必须自己翻译）

我确信用户名和密码是正确的，因为该`/delete`命令是可以的，并且`/create`即使它没有运行，也可以创建任务。

因此问题应该是`/RU`和`/RP`选项......

* * *

**解决方案：**

如果没有此错误消息，我无法执行命令本身，无论如何我已经达到了我的目标并找到了两个不同的选项：

***使用 AT 命令的最简单方法：***

```
AT \\10.1.2.3 12:00 C:\task.bat 
```

它没有问题，但需要指定一个小时才能运行；这意味着如果您希望立即执行任务，您将不得不聊天`%time%`变量。
此选项也不允许设置用户来运行任务（我已经以管理员身份对其进行了测试，并且任务设置为执行为`NT AUTHORITY/SYSTEM`）

***使用 PsTools 的全功能方式：***将命令
传递`schtasks /create``PsExec`

```
set command=schtasks /create /SC dayly /MO 1 /TN MyTask /TR C:\task.bat /RU theAdministrator /RP MyPassword
PsExec \\10.1.2.3 -u theAdministrator -p MyPassword %command% 
```

***注意。*** 访问远程 PC的目标*IP*、*用户*和*密码*必须在`PsExec`命令中设置，因此您不需要它们 on`schtasks`。
脚本 task.bat 已经存在于目标 PC 的根目录 C:\。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:14:00.877

PC是否在域中？
我以前在域上使用过 schtasks，它可以在没有`/ru`and的情况下工作`/rp`。我只是使用`/u`和`/p`作为我正在安排任务的机器的用户名和密码。
不过，从未在标准工作组/家庭组机器上尝试过。

您可能还想查看[此](https://serverfault.com/questions/241825/schtasks-cant-administer-remote-tasks)内容，并确保所有远程计算机上的 UAC 都已关闭，因为这可能会导致以后出现问题。

*编辑*

我刚刚尝试从一台笔记本电脑到另一台笔记本电脑（不涉及域）。这两行对我有用（在 CMD 中，所以应该通过批处理）

```
schtasks /delete /S \\xxx.xxx.xxx.xxx /U USERNAME /P PASSWORD /TN MyTask /F
schtasks /create /S \\xxx.xxx.xxx.xxx /U USERNAME /P PASSWORD /TN MyTask /SC once /st START_TIME /it /TR c:\test.bat 
```

需要注意的是；
- 显然，将 x 替换为您需要的 IP，并将 USERNAME 和 PASSWORD 替换为相关数据
- 我使用`/sc once /st START_TIME`的是 ，而不是你的`/sc daily /mo 1`，但这不应该有所作为
- 我已经添加了`/it`which（取自 CMD）“Enalbes交互式运行的任务...”（根据我的经验，不使用它会导致问题）
-我正在为其安排任务的笔记本电脑上的用户在我运行 schtasks 的笔记本电脑上不存在
-我运行的笔记本电脑上的用户schtasks from 在我为其安排任务的笔记本电脑上不存在（因此客户端/主机上不存在的用户无关紧要）

# string - 在asp vbscript中向字符串添加小于和大于字符

> ID：13092593
> 
> 赞同：0
> 
> 时间：2012-10-26T18:43:20.213
> 
> 标签：string, asp-classic, vbscript, special-characters

如何将这些字符“<>”添加到 asp vbscript 中的字符串中？每次我将它们放在我的字符串中时，字符串都会出现空白。

```
mystring = "<some text>"
output : 
```

我尝试了一些东西，但没有运气。我是这种语言的新手，不确定是否需要一些小技巧才能正确输出。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:47:09.820

```
mystring = "&lt;some text&gt;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:47:10.947

使用 < ( `&lt;`) 和 > ( `&gt;`) 的代码替换，应该可以。

# php - 排序日期关联数组

> ID：13092596
> 
> 赞同：1
> 
> 时间：2012-10-26T18:43:31.193
> 
> 标签：php

> **可能重复：**
> [在 PHP 中对关联数组进行排序](https://stackoverflow.com/questions/777597/sorting-an-associative-array-in-php)

我有这个数组

```
array
  0 => 
    array
      'start_date' => string '2012-11-14' (length=10)
      'end_date' => string '2012-11-19' (length=10)
  1 => 
    array
      'start_date' => string '1980-10-10' (length=10)
      'end_date' => string '1980-10-10' (length=10)
  2 => 
    array
      'start_date' => string '2012-11-20' (length=10)
      'end_date' => string '2099-10-10' (length=10) 
```

我想在 start_date 上对其进行排序。我不认为 sort() 方法适用于它。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:47:11.347

您可以使用[`usort`](http://php.net/manual/en/function.usort.php)：

### PHP 5.3+

```
usort($array, function($a, $b) {
   //return strtotime($a['start_date']) - strtotime($b['start_date']);
   return strcmp($a['start_date'], $b['start_date']);
}); 
```

### 旧版本的 PHP

```
function startDateCmp($a, $b) {
   //return strtotime($a['start_date']) - strtotime($b['start_date']);
   return strcmp($a['start_date']), $b['start_date']);
}

usort($array, 'startDateCmp'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:47:05.347

使用`usort`并提供您自己的功能来进行订购。

```
function cmp($a, $b)
{
    return $b['start_date'], $a['start_date'];
}

usort($array, "cmp"); 
```

# eclipse - 什么 maven-jetty-plugin 8 配置允许在 JSP 文件更改时重新加载它们？

> ID：13092601
> 
> 赞同：3
> 
> 时间：2012-10-26T18:43:52.567
> 
> 标签：eclipse, maven, struts2, jetty, maven-jetty-plugin

[考虑 Maven 中的默认 webapp 配置（对于我使用来自https://repository.apache.org/content/groups/public/archetype-catalog.xml](https://repository.apache.org/content/groups/public/archetype-catalog.xml)的 struts2-blank-archetype 的测试用例）。

这个原型带有 maven jetty 插件的版本 6。使用下面的配置，如果我**更改 /src/main/webapp/WEB-INF/ 下的 jsp**并保存，刷新浏览器将显示这些更改。

> ```
>  <plugin>
>             <groupId>org.mortbay.jetty</groupId>
>             <artifactId>maven-jetty-plugin</artifactId>
>             <version>6.1.21</version>
>             <configuration>
>                 <scanIntervalSeconds>10</scanIntervalSeconds>
>             </configuration>
>         </plugin> 
> ```
> 
> （请注意，甚至不需要放置 scantarget 元素，因为我们不希望仅在更改 jsp 时重新加载完整的容器）。

但是，**与插件版本 8 完全相同的配置**（见下文）不起作用。如果我更改相同的 jsp，刷新浏览器将显示旧的 JSP 内容。只有停止并启动服务器，我才能看到更改。

> ```
>  <plugin>
>             <groupId>org.mortbay.jetty</groupId>
>              <artifactId>jetty-maven-plugin</artifactId>
>              <version>8.1.7.v20120910</version>
>             <configuration>
>                 <scanIntervalSeconds>10</scanIntervalSeconds>
>             </configuration>
>         </plugin> 
> ```

这个配置有什么问题，什么**配置会在版本 8 中产生相同的结果**（即在不重新启动服务器的情况下自动刷新 jsp 内容）？

**编辑：** 这是一个 2 分钟的测试，您可以尝试：

1.  创建原型 struts2-archetype-convention ("mvn archetype:generate", 308, package war)。
2.  编辑 pom 并将 jetty 插件配置设置为上面列出的配置（版本 6）
3.  mvn码头：运行
4.  在“http://localhost:8080”上打开浏览器
5.  请参阅页面上的“语言”
6.  编辑 /src/main/webapp/WEB-INF/content/hello.jsp - 将“语言”更改为其他内容。节省。
7.  刷新浏览器并查看更改。
8.  重复这些步骤。在步骤 2 中，将 artifactId 和版本更改为上面列出的（版本 8）
9.  确认在 JSP 中执行更改后网页不会在刷新时更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:24:29.633

自 jetty-6 天以来，该插件已进行了大量改进，以运行各种不同的项目配置。查看插件的文档页面，选择最能满足您需求的方案并根据需要调整配置。我怀疑您的案例在“运行未组装的网络应用程序”下。

[http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)

我会注意到，对于 jetty-9，我们最终将插件带到了 eclipse 中，这样它就可以与将 groupId 更改为 org.eclipse.jetty 的项目一起使用，9.0.0.M2 的 jetty-maven-plugin 将下周初在中心（文档也将为此更新）

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:10:46.437

mmalmeida，我已经使用标准的 jetty-test-webapp 测试了这个场景。我在 src/main/webapp/jsp 中放了一个 jsp，它转发到 src/main/webapp/WEB-INF 中的另一个 jsp。使用 mvn jetty:run 启动 jetty maven 插件，前向发生正确。如果我让插件运行并修改 WEB-INF 中的 jsp，并在浏览器上执行 shift-reload，它会按预期拾取更改的页面。

请注意，您不需要声明 scanTargets 或任何其他类似性质的东西。上述行为（jsp 重新加载）是 jsp 引擎的一个功能，在开发模式下运行时，它会在接收请求时检查 jsp 文件上的时间戳，并根据需要即时重新编译。

我认为您必须提供有关您的特定 web 应用程序的更多详细信息 - 特别是您的设置与我刚才描述的测试场景有何不同 - 以便进一步了解这一点。

问候简

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:47:01.380

在之前的评论之后，我能够确定这个问题的根本原因。虽然这有点特定于我们的用例，但我还是与社区分享了这一点。

这基本上是由文件的时间戳引起的。我的工作目录是另一台服务器的 NFS 挂载。由于某种奇怪的原因*该服务器上的时钟延迟了。这意味着如果现在是 9:00 并且我更改了 JSP 文件，那么该文件的时间戳将是 8:40。

关于用于 JSP 文件重新加载的策略，Jetty 从 6 到 8 可能发生了变化——虽然 Jetty 6 似乎并不关心文件的时间戳并无论如何都会刷新，但 Jetty 8 更敏感并且不会重新加载文件。

所以这里的“解决方案”只是简单地更新远程 NFS 服务器的时钟。

*表示 NTP 守护进程正在运行，我可以 ping ntp 服务器，同一网络上的其他机器具有相同的 NTP 设置，但是这台机器仍然有时钟漂移

# c# - 收到错误：远程服务器返回错误：（401）未经授权。来自 WebClient 类

> ID：13092602
> 
> 赞同：1
> 
> 时间：2012-10-26T18:44:01.150
> 
> 标签：c#, asp.net, parsing, xpath

```
item = 535;
String URI = "http://localhost:3033/WebFormDesigner.aspx?fm_id=" + item.ToString();
//String URI = "http://www.google.com";
WebClient wc = new WebClient();
Stream s = wc.OpenRead(URI);
XPathDocument doc = new XPathDocument(s); 
```

它不适用于：

```
XPathDocument doc = new XPathDocument(URI); 
```

在上述方法中，使用 google URI 有效，但它似乎根本不喜欢 localhost 的 URI。我确认 URI 在放入浏览器时有效。不太清楚它发生了什么。

错误发生在 Stream 声明上。

```
The remote server returned an error: (401) Unauthorized. 
```

这是我另一篇文章的扩展：[如何在 asp.net 中获取网页的标记，类似于 php 的 get_file_contents](https://stackoverflow.com/questions/13033331/how-do-you-get-the-markup-of-a-webpage-in-asp-net-similar-to-phps-get-file-cont)

**编辑：这里正在查看的问题是没有查看页面的权限。被访问的页面是安全页面。我想要做的是给我的请求权限，因为页面在同一个项目中，但是使用假设它是外部源的 WebRequest。**

我试图通过几个不同的尝试来完成。两者都涉及cookies。

```
System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(URI);
        request.KeepAlive = true;
        request.Credentials = CredentialCache.DefaultCredentials;
        request.CookieContainer = new CookieContainer();
        HttpCookieCollection cookieJar = Request.Cookies;
        //foreach (string cookieString in Request.Cookies)
        for(int i = 0; i < cookieJar.Count; i++)
        {
            System.Web.HttpCookie cookie = cookieJar.Get(i);
            Cookie oC = new Cookie();
            oC.Domain = Request.Url.Host;
            oC.Expires = cookie.Expires;
            oC.Name = cookie.Name;
            oC.Path = cookie.Path;
            oC.Secure = cookie.Secure;
            oC.Value = cookie.Value;
            request.CookieContainer.Add(oC);
        }
        System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();

        Stream s = response.GetResponseStream(); 
```

这做了一些非常简单的事情，但我想我仍然做错了。我获取当前页面的 cookie，并将它们传递给目标页面的 cookiecollection。之后，我提交了回复请求。它也给出了上面的错误。

# jsf - 为什么 ui:insert 的 name 属性是可选的，但 ui:define 是必需的？

> ID：13092603
> 
> 赞同：1
> 
> 时间：2012-10-26T18:44:09.697
> 
> 标签：jsf, jsf-2, facelets, templating

据我了解，`ui:define`在文件中用作模板客户端，并`ui:insert`在文件中用作 Facelets 技术的主模板，两者之间的联系通过“名称”属性发生。但**我**看到“名称”**属性**对于. 为什么这样？`ui:insert`**`ui:define`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:18:29.733

`<ui:insert/>`也可以在标签文件中使用以插入标签正文内容。

例如

`/WEB-INF/tags/someTag.xhtml`

```
<ui:composition ...>
    <p>Some HTML ...</p>
    <ui:insert/>
    <p>Some other HTML...</p>
<ui:composition> 
```

这将用作

```
<my:someTag ...>
    <p>This content will end up in place of ui:insert.</p>
</my:someTag> 
```

* * *

顺便说一下，这对数据表特别有用：

`/WEB-INF/tags/dataTable.xhtml`

```
<ui:composition ...>
    <h:dataTable ...>
        <ui:insert/>
    </h:dataTable>
<ui:composition> 
```

这将用作

```
<my:dataTable ...>
    <h:column>...</h:column> <!-- can also be another tag file! -->
</my:dataTable> 
```

请注意，以上内容对于复合组件是不可能的。

### 也可以看看：

*   [如何为数据表列创建复合组件？](https://stackoverflow.com/questions/11439886/how-to-create-a-composite-component-for-a-datatable-column)
*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)**

# java - Bean 创建异常

> ID：13092607
> 
> 赞同：0
> 
> 时间：2012-10-26T18:44:33.610
> 
> 标签：java, spring, hibernate

我的应用程序上下文看起来像这样，

```
<bean id="caseTxBo" class="gov.case.rcp.bo.impl.caseTxBoImpl" >
            <property name="caseTxDao" ref="caseTxDao" />
    </bean>
    <bean id="caseTxDao" class="gov.case.rcp.dao.impl.caseTxDaoImpl" >
            <property name="sessionFactory" ref="sessionFactory" /> 
```

Action 类获取如下上下文：

```
ServletContext context = request.getSession().getServletContext();
     BeanFactory factory = WebApplicationContextUtils.
           getRequiredWebApplicationContext(context);
     CaseTxBOImpl caseTxBo = (

             caseTxBoImpl) factory.getBean("caseTxBo");

     List<caseTxPmt> errorVarList =       
     caseTxBo.getcaseTxDao().findAllcaseTx();

    model.put("caseTxList", caseTxList); 
```

BOImpl 实现了 Dao，DAOImpl 实现了 Dao：

DaoImpl 有实现并返回 caseTxList。

但我得到一个 runTimeException 作为

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'caseTxBo' defined in ServletContext resource [/WEB-INF/classes/applicationContext.xml]: Cannot resolve reference to bean 'caseTxDao' while setting bean property 'caseTxDao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'caseTxDao' defined in ServletContext resource [/WEB-INF/classes/applicationContext.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'sessionFactory' of bean class [gov.case.rcp.pp.dao.impl.CaseTxDaoImpl]: Bean property 'sessionFactory' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
follows:
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:275)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104) 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:52:29.707

> Bean 属性`'sessionFactory'`不可写或具有无效的 setter 方法。setter 的参数类型是否与 getter 的返回类型匹配？如下：在`org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference`( `BeanDefinitionValueResolver.java:275`)

错误信息非常清楚。打开你的`CaseTxDaoImpl`并确保那里有以下方法：

```
public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
} 
```

顺便说一句：

```
ServletContext context = request.getSession().getServletContext();
BeanFactory factory = WebApplicationContextUtils.
       getRequiredWebApplicationContext(context);
factory.getBean("caseTxBo") 
```

是 Spring 的低级用法和反模式。你在使用任何网络框架吗？通常，它们与 Spring 集成得很好。

# code-contracts - 在 AppHarbor 上使用代码合约构建

> ID：13092610
> 
> 赞同：4
> 
> 时间：2012-10-26T18:44:47.090
> 
> 标签：code-contracts, appharbor

我正在尝试部署我的第一个 AppHarbor 托管的应用程序，但我的构建遇到了问题。在代码合同尝试重写程序集之前，一切都很好。日志中的错误是：

```
CodeContractsRunCodeAnalysisInternal:
     CodeContracts: Task manager is unavailable (unable to run in background).
     CodeContracts: ABC: Run static contract analysis.
     CodeContracts: ABC: Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'System.Data.SqlServerCe, Version=3.5.1.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified.
     CodeContracts: ABC:    at Microsoft.Research.CodeAnalysis.SQLCacheDataAccessor.GetMetadataOrNull(String key, Boolean silent)
     CodeContracts: ABC:    at Microsoft.Research.CodeAnalysis.CacheManager`11.TestCache()
     CodeContracts: ABC:    at Microsoft.Research.CodeAnalysis.CacheManager`11..ctor(Dictionary`2 methodAnalyses, Dictionary`2 classAnalyses, GeneralOptions options)
     CodeContracts: ABC:    at Microsoft.Research.CodeAnalysis.CacheManager`11.Create(Dictionary`2 dictionary, Dictionary`2 dictionary_2, GeneralOptions generalOptions)
     CodeContracts: ABC:    at Microsoft.Research.CodeAnalysis.Clousot.TypeBinder`9..ctor(String[] args, IDecodeMetaData`9 mdDecoder, IDecodeContracts`5 contractDecoder, IDictionary assemblyCache, Action`3 setTargetPlatform, IOutputFullResultsFactory`2 externalOutputFactory)
     CodeContracts: ABC:    at Microsoft.Research.CodeAnalysis.Clousot.ClousotMain[Local,Parameter,Method,Field,Property,Event,Type,Attribute,Assembly](String[] args, IDecodeMetaData`9 mdDecoder, IDecodeContracts`5 contractDecoder, IDictionary assemblyCache, Action`3 setTargetPlatform)
     CodeContracts: ABC:    at Microsoft.Research.CodeAnalysis.CCI1Driver.Main(String[] args)
     CodeContracts: ABC: 
     CodeContracts: ABC: Static contract analysis done. 
```

我知道在使用 Visual Studio 在本地构建时，代码合同的内容在后台线程中运行。也许 AppHarbor 不允许创建这样的线程来执行此操作？但是关于 System.Data.SqlServerCe.dll 缺少这个错误是什么？我的代码肯定不使用它，但也许 MS 代码合同可以使用？

只是想知道是否有人成功地将其中包含代码合同的代码部署到 AppHarbor，如果是，您做了什么使其工作？可能需要通过 AppHarbor 安装 SQL Server CE 才能使代码契约正常工作。哦，我的构建并没有构建代码契约引用程序集，它只是尝试进行静态检查并进行重写以完成运行时检查。

最后，我确实尝试从 AppHarbor.sln 禁用代码契约，但该设置是项目设置而不是解决方案设置，因此它也会为我的常规解决方案文件禁用它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:44:49.727

弄清楚了。.NET 代码契约（System.Diagnostics.Contracts 命名空间，对于那些不知道的人）有一个功能，可以根据已放入代码中的契约对代码进行静态分析。如果您安装了用于代码合同的 Visual Studio 附加组件，您可以转到 VS 项目的属性页并单击代码合同选项卡。在静态检查部分有一个称为缓存结果的选项。如果启用此功能，则静态检查在构建时使用 SQL Server 嵌入式数据库，以使其对其静态代码分析所做的一切运行得更快（显然，此文件将在编译之间保留在您的项目目录中）。这是构建服务器对 SQL CE 的依赖，它与应用程序的运行时环境无关。

由于 AppHarbor 在其构建服务器上没有 SQL CE，我所做的是更改我的每个项目的代码合同属性，以执行运行时合同检查并为调试和发布构建执行静态合同检查，但对于发布构建执行静态合同检查部分中的缓存结果选项被禁用。（另请注意，由于 AppHarbor 不允许后台任务从 Visual Studio 运行，因此还必须禁用“执行静态合同检查”部分的“后台检查”选项。）

为什么看起来我是唯一一个使用 System.Diagnostics.Contracts 命名空间（除了 .NET Framework 本身）的人？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:30:50.500

我对代码合同不是很熟悉，但问题可能只是您缺少 SQL Server CE。您可能想尝试一个不使用 SQL Server CE 的项目来进行检查。考虑使用 NuGet 或作为可部署 bin 的程序集添加 SQL Server CE，以确保它在 AppHarbor 运行您的构建时可用。[此博客文章](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)中有更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T00:57:30.337

尽管 Code Contracts 生成的每条错误消息都表明您需要安装 SQL Server CE 3.5.1，但您确实必须安装**3.5.2**版本。

卸载所有其他 3.5.x 版本的 SQL Server CE 并安装它，[这](http://download.microsoft.com/download/E/C/1/EC1B2340-67A0-4B87-85F0-74D987A27160/SSCERuntime-ENU.exe)对我有用。是的，如果您在 64 位机器上，您确实需要 32 位和 64 位版本。

# facebook - Facebook 在本机对话框中共享网站

> ID：13092612
> 
> 赞同：1
> 
> 时间：2012-10-26T18:44:48.723
> 
> 标签：facebook, facebook-javascript-sdk

我在我的网站上使用 FB.ui 和 feed 方法进行共享和下载。事实上，没有问题发生，但奇怪的事情发生了——当我通过 fb 应用程序所有者的个人资料分享时，使用了[一个不错的原生 facebook 弹出窗口](http://i.stack.imgur.com/bLqNV.png)。但是当其他帐户共享时，他们会看到[加载了 url 的常规新窗口](http://i.stack.imgur.com/7z90E.png)。我错过了什么吗？可以是一些 FB 配置文件设置或 FB 应用程序设置吗？

# sql - Access SQL - 在计数查询中显示附加列

> ID：13092613
> 
> 赞同：3
> 
> 时间：2012-10-26T18:44:55.077
> 
> 标签：sql, ms-access, count, ms-access-2007

我正在尝试获取重复项的详细列表，`Foldername`即重复值。我需要重复实例和其他相应列的计数，例如`FullPath`每个重复实例。

我正在尝试返回每个完整路径的列表及其对应的文件夹名称计数，以及其他列，例如单位、大小等。

```
FolderName (has the possibility of a duplicate)
FullPath (is completly unique) 
```

我对此进行了一些尝试；在 SQL Server 中，这似乎更明显......但在 Access 中，我有点迷失了。

这是我到目前为止提出的基本 SQL：

```
 /* ''''''''''''''Works but doesn't return Count'''''''''''''' */
Select Snapshot.Unit, Snapshot.FolderName, Snapshot.FullPath
From Snapshot
Where Snapshot.FolderName in 
(
    Select Snapshot.FolderName
    From Snapshot
    Group by Snapshot.Foldername
    Having Count(Snapshot.FolderName)> 1
)
Order by Snapshot.FolderName, Snapshot.FullPath 
```

这是我想获得的示例输出：

```
Unit       FolderName     FullPath                          Count
BCU        Misc           C:\blah\blah\blah\Misc            2
ENV        Misc           R:\blah\blah\blah\Misc            2
CLR        Monkey         Q:\blah\blah\blah\blah\Monkey     17
ATL        Zebra          Z:\blah\blah\zoo\Zebra            24 
```

我参考过： [在 Access SQL 查询中使用 count() 时遇到问题](https://stackoverflow.com/questions/5507392/having-trouble-using-count-in-access-sql-query)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T18:57:34.073

在子查询中进行计数并`INNER JOIN`快照到子查询。

```
SELECT s.Unit, s.FolderName, s.FullPath, sub.num_dupes
FROM
    Snapshot AS s
    INNER JOIN
    (
        SELECT FolderName, Count(*) AS num_dupes
        FROM Snapshot
        GROUP BY FolderName
        HAVING Count(*)> 1
    ) AS sub
    ON s.FolderName = sub.FolderName
ORDER BY s.FolderName, s.FullPath 
```

# java - 如何在java中将字符串附加到现有的XML文件

> ID：13092615
> 
> 赞同：0
> 
> 时间：2012-10-26T18:45:01.220
> 
> 标签：java, xml, file-io

> **可能重复：**
> [将节点附加到现有的 xml-Java](https://stackoverflow.com/questions/1431238/append-node-to-an-existing-xml-java)

我有这个代码

```
private void nextActionPerformed(java.awt.event.ActionEvent evt) {
   File myfile;
   FileInputStream   myInputStream;
   InputStreamReader myInputStreamReader; 
   BufferedReader    myBufferedReader;

   String databasedir =
      "C:\\Users\\himu\\Documents\\NetBeansProjects\\database\\src\\database\\databases\\";
   try{
      myfile              = new File(databasedir+dbname.getText());
      myInputStream       = new FileInputStream(myfile);
      myInputStreamReader = new InputStreamReader(myInputStream);
      myBufferedReader    = new BufferedReader(myInputStreamReader);

      String xmlval =
         "<database>"
         + "<db id ="  +dbname.getText() +">"
         + " <dbfileloc>" +myfile
         + "</dbfileloc>  "
         + "</db>"
         + "</database>";
   }
   catch(Exception e)
   {
   }
} 
```

**我想在已创建的 dbrepoloc.xml 文件中的上一个 xmlval 条目之后附加字符串 xmlval，该文件具有此位置 C:\Users\himu\Documents\NetBeansProjects\database\src\database\dbrepoloc.xml 我是没有得到上面提到的地方的确切代码请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:52:10.987

您可能需要考虑使用 XML 解析器之一来读取和写入预先存在的 XML 文档。试试[Stax](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP2.html)

另请参阅[http://www.vogella.com/articles/JavaXML/article.html](http://www.vogella.com/articles/JavaXML/article.html)

# c - 声明说明符和声明符

> ID：13092620
> 
> 赞同：2
> 
> 时间：2012-10-26T18:45:34.730
> 
> 标签：c, variables, static, declaration, storage-class-specifier

参考问题[**在声明中可以放置存储类说明符的位置？**](https://stackoverflow.com/questions/13073952/where-in-a-declaration-may-a-storage-class-specifier-be-placed)我开始分析`declaration-specifiers`and的概念`declarators`。以下是我的理解的积累。

### 声明

*   通常，`C`声明遵循以下语法`declaration-specifiers declarators;`
*   `declaration-specifiers`包括`type-specifiers`,`storage-class-specifiers`和`type-qualifiers`
*   `declarators`可以是变量、指针、函数和数组等。

### 我假设的规则

*   `declaration-specifiers`可以按任意顺序指定，例如
*   不能超过一个`storage-class-specifier`
*   另一方面可以有多个`type-qualifiers`
*   `storage-class-specifier`不得与`declarator`

### 问题

Q1：在常量指针的声明中，我看到混合`declarator`和`type-qualifier`如下

```
const int *const ptr; //Need justification for the mix of declarator and type-specifier 
```

Q2：可以有一个指向`static int`. 是否有可能为指针提供`static`存储类？表示指针是静态的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:13:39.567

我不确定我是否完全理解你的第一个问题。就 C++03 而言，语法`const`是`cv-qualifier`. `cv-qualifier`可以出现在`decl-specifier-seq`（作为特定类型的`type-specifier`），它是声明的“公共”部分，也可以出现在 中`init-declarator-list`，它是单个声明符的逗号分隔序列。

该文法特别`const`规定了属于单个指针声明符的说明符必须*跟*在`*`. 第一个`const`之前的说明符`*`不被视为单个声明符的一部分。这意味着在这个例子中

```
int const *a, *b; 
```

`const`属于左侧：`decl-specifier-seq`，声明的“共同”部分。即两者`a`和`b`都被声明为`int const *`。同时这

```
int *a, const *b; 
```

只是格式错误，不会编译。

你的第二个问题我也不清楚。看来你把它弄反了。您声称“可以有一个指向`static int`”的指针？不，没有办法声明“指针`static int`”之类的东西。您可以声明一个静态`int`指针

```
static int *p; 
```

在这种情况下，指针本身是静态的，正如您所希望的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:48:22.497

> Q2：可以有一个指向静态int的指针。是否有可能为指针提供静态存储类？表示指针是静态的。

嗯，是：

```
static T *a; 
```

声明`a`一个指向`T`. `a`具有静态存储持续时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-11T15:12:35.443

通常，C 的“声明”就像这样的声明说明符声明符；

这里，“声明说明符”包括类型说明符、存储类说明符和类型限定符。

“声明符”可以是变量、指针、函数和数组等。

类似的错误：- [Error] 预期的声明说明符或字符串常量之前的“...” 这种类型的错误出现，原因是声明中的问题。

# sql - PostgreSQL Inner Join 在同一张表+第二张表上？

> ID：13092624
> 
> 赞同：3
> 
> 时间：2012-10-26T18:46:02.533
> 
> 标签：sql, postgresql

如果这是一个愚蠢的问题，请原谅我，我对 PostgreSQL 不是很熟悉。

我从我所在地区的二手车经销商处收集了库存数据，并将其存储在 postgreSQL 表中。我有第二张表，其中包含有关某些品牌和型号的特定详细信息。例如：

经销商表的结构如下：

```
-----------------------------------------
| Dealership | Make | Model | Year | ID |
----------------------------------------|
|     A      | Ford | F250  | 2003 |  1 |
|     A      | Chevy| Cobalt| 2005 |  2 |
|     B      | Ford | F250  | 2003 |  1 |
|     B      | Dodge| Chrgr | 2012 |  3 |
----------------------------------------- 
```

详细信息表的结构如下：

```
-----------------------------------------
|     ID     | DetailA| DetailB| DetailC|
-----------------------------------------
|     1      |  data  |  data  |  data  |
|     2      |  data  |  data  |  data  |
|     3      |  data  |  data  |  data  |
|     4      |  data  |  data  |  data  |
----------------------------------------- 
```

我的目标是从多个经销商处检索车辆匹配并显示适当的详细信息。在上面的例子中，我想看看：

```
-----------------------------------------------------
| Make | Model | Year | DetailA | DetailB | DetailC |
-----------------------------------------------------
| Ford | F250  | 2003 |   data  |  data   |  data   |
----------------------------------------------------- 
```

有了这个结果，我就知道A和B都有一辆2003福特F250在售，并且可以查看车辆的相关细节。

我尝试了许多不同的查询，但大多数都是这样的变体：

```
SELECT DISTINCT
    dealership_table.make,
    dealership_table.model,
    dealership_table.year
            details_table.detaila,
            details_table.detailb,
            details_table.detailc
FROM
    dealership_table
INNER JOIN
    details_table
    ON
    dealership_table.id = details_table.id
WHERE
     dealership_table.dealership = 'A'
     OR
     dealership_table.dealership = 'B' 
```

但是，这会从经销商为 A 或 B 的表中返回所有不同的匹配项。我尝试了多个内部连接，但我`details_table`多次指定了一个错误抱怨。

如果我做的事情真的很愚蠢，我道歉。就像我之前说的，我几乎是一个 SQL 菜鸟。

我究竟做错了什么？我应该如何去检索所需的结果？非常感谢任何建议、解决方案或建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:00:39.440

我可能误解了您的表格布局，但我认为您应该考虑更改为不同的结构。以下是我的建议：

**车辆**：

```
----------------------------
| ID | Make | Model | Year |
----------------------------
| 1  | Ford | F250  | 2003 |
| 2  | Chevy| Cobalt| 2005 |
| 3  | Dodge| Chrgr | 2012 |
---------------------------- 
```

**经销商**：

```
----------------------------
| Dealership | ID | Detail |
----------------------------
|     A      |  1 |  data  |
|     A      |  2 |  data  |
|     B      |  1 |  data  |
|     B      |  3 |  data  |
---------------------------- 
```

这样，您就不会将车辆信息（品牌/型号/年份）存储在多个地方。

在给定上述模式的情况下，您将如何编写所需的查询：

```
SELECT Make, Model, Year, A.Detail, B.Detail, C.Detail
FROM Vehicle V
LEFT OUTER JOIN Dealership A on A.Dealership = 'A' and A.id = V.id
LEFT OUTER JOIN Dealership B on B.Dealership = 'B' and B.id = V.id
LEFT OUTER JOIN Dealership C on C.Dealership = 'C' and C.id = V.id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T19:05:00.340

你可以写：

```
SELECT dealership_table1.make,
       dealership_table1.model,
       dealership_table1.year,
       details_table.detaila,
       details_table.detailb,
       details_table.detailc
  FROM dealership_table dealership_table1
  JOIN dealership_table dealership_table2
    ON dealership_table1.make  = dealership_table2.make
   AND dealership_table1.model = dealership_table2.model
   AND dealership_table1.year  = dealership_table2.year
  JOIN details_table
    ON dealership_table.id = details_table.id
 WHERE dealership_table1.dealership = 'A'
   AND dealership_table1.dealership = 'B'
; 
```

（注意`FROM dealership_table dealership_table1`和`JOIN dealership_table dealership_table2`设置了不同的“别名”，因此您可以在同一个查询中多次使用同一个表而不会出现名称冲突。）

# javascript - 尝试在页面加载时填充 Telerik ddl 时出错

> ID：13092630
> 
> 赞同：1
> 
> 时间：2012-10-26T18:46:42.143
> 
> 标签：javascript, jquery, asp.net-mvc, telerik-mvc

如何在页面加载时填充 Telerik 下拉列表？

当我尝试填充下拉列表时，出现以下错误（在下面强调的行）：

```
Error: 'data(...)' is null or not an object 
```

这是我尝试填充telerik ddl的方法：

```
$(function(){
var values = [];
for (var i = 1; i < 10; i++) { 

values.push({ Text: i, Value: i });
}
****$("#MyDdl").data("tDropDownList").dataBind(values);****
}); 
```

也尝试过这种方式：

```
 $(function(){
    onDataBinding();
    });

function onDataBinding(e) {
        var MyDdl = $('#MyDdl').data('tDropDownList');
        var values = [];
        for (var i = 1; i < 10; i++) {  
    values.push({ Text: i, Value: i });
    }
      ****MyDdl.dataBind(values);****
    }; 
```

但是在上面强调的行中得到以下未定义的错误：

```
Error: 'undefined' is null or not an object 
```

注意：添加按钮并在按钮单击事件上加载 ddl 会填充 Telerik 下拉列表。这样做非常好：

```
 $(function(){
   var values = [];
        for (var i = 1; i < 10; i++) {             
        values.push({ Text: i, Value: i });
        }
        $("#MyDdl").data("tDropDownList").dataBind(values);            
    }); 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:31:52.087

您需要在 DropDownList 的 OnLoad 事件处理程序中填充它：

```
.ClientEvents(events => events.OnLoad("ddl_onLoad").OnChange("ddl_onChange") 
```

处理程序：

```
function ddl_onLoad(e) {

    var ddl = $(this).data('tDropDownList');

    ddl.dataBind([
        { Text: 'Product 1', Value: '1' },
        { Text: 'Product 2', Value: '2', Selected: true },
        { Text: 'Product 3', Value: '3' },
        { Text: 'Product 4', Value: '4' }
    ]);
}

function ddl_onChange(e) {

    //var ddl = $(this).data('tDropDownList');
    console.log(e.value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:45:57.067

不要直接调用 onDataBinding() 函数..尝试将其链接到控件的客户端事件。

*查看*：

```
 <%= Html.Telerik().DropDownList()
                          .Name("DropDownList")
                          .ClientEvents(events => events
                          .OnDataBinding("onDropDownListDataBinding"))
        %> 
```

*JS*：

```
 <script type="text/javascript">
            function onDropDownListDataBinding(e) {
                    var MyDdl = $('#MyDdl').data('tDropDownList');
                     MyDdl .dataBind([
            { Text: "Product 1", Value: "1" },
            { Text: "Product 2", Value: "2", Selected: true },
            { Text: "Product 3", Value: "3" },
            { Text: "Product 4", Value: "4" },
            { Text: "Product 5", Value: "5" }            
        ]);
            };
    </script> 
```

# ios6 - 从 plist 读取，然后将对象保存到不同的 plist iOS

> ID：13092631
> 
> 赞同：2
> 
> 时间：2012-10-26T18:46:44.327
> 
> 标签：ios6, nsarray, plist

在四处搜索之后，我发现了大量关于我想做的点点滴滴的帖子，但没有一个可以一起工作。

基本上我有一个静态 plist 文件。我不想改变它的内容。plist 文件是从 plist 读取并存储在 NSArray 中的字典数组，数据显示在表格上。这是完全工作且简单的部分！

我现在想做的是有一个 plist，它将从静态 plist 数组读取的对象的用户收藏夹存储到收藏夹的 NSMutableArray 中。每当用户选择收藏夹部分时，都需要将该数组读入收藏夹表中

这个概念真的很简单，用户将按下“添加到收藏夹按钮”，字典对象将被添加到收藏夹数组中，但我的问题是正确检查收藏夹 plist 是否存在。如果是，则将该数据读入收藏夹数组。如果 is 不存在，则创建空 plist，它仍将读入收藏夹数组，但它将为空。

对于这种特殊情况，我不确定从哪里开始，有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:05:30.473

我自己也遇到了这个问题，第一次尝试做同样的事情。主要问题是您不能写入不存在的 plist。因此，您需要在捆绑包中制作一个，并将其复制到您需要的位置，“如果它不存在”。这是一个例子。这不仅仅是“最小”，但我认为它解释了问题。结果是通过将某些内容存储在文档目录中某处的“data.plist”中，从一次运行转移到另一次运行。

在`ViewController.m`（例如）：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

////////////////////////////
// BIG NOTE:
// In order for ANY of this to work, you need to make a data.plist in your supporting files, in your project,
// before compiling and running
// The plist should, at very least, have a single row with key "key1" and value "value1"
////////////////////////////

// returns path where plist file is
// "internal" means whether we want from one baked into the app (which is read-only, by the way), or one in our documents dir
-(NSString *)localPathForPlist:(NSString *)name internal:(bool)internal
{
    if( internal ) return [[NSBundle mainBundle] pathForResource:name ofType:@"plist"];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory
               // this just adds name and ".plist" to make a filename something like "data.plist"
               stringByAppendingPathComponent:[NSString stringWithFormat:@"%@%@", name, @".plist"]
           ];
}

// write value to key, either in internal plist or not
-(void) writeToPlist:(NSString *)key setValue:(NSString *)value internal:(bool)internal
{
    NSString* path = [ self localPathForPlist:@"data" internal:internal ];
    NSMutableDictionary *plistData = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
    [plistData setObject:value forKey:key];
    [plistData writeToFile:path atomically:YES];
}

// read value from key, either in internal plist or not
-(NSString *) readFromPlist:(NSString *)key internal:(bool)internal
{
    NSString* path = [ self localPathForPlist:@"data" internal:internal ];
    NSMutableDictionary *plistData = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
    return (NSString *)[plistData valueForKey:key];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // here we go through all the different cases, trying to edit things internally and in externally,
    // and copying the internal one to the external location, towards the end, if it's not already there

    NSString *localPath    = [self localPathForPlist:@"data" internal:FALSE];
    NSString *internalPath = [self localPathForPlist:@"data" internal:TRUE];

    NSLog( @"local path=%@", localPath );

    NSFileManager *fileManager = [NSFileManager defaultManager];
    BOOL localPlistExists = [fileManager fileExistsAtPath:localPath];

    // the first time you run this, it'll do one, then the other for all other runs:
    if( localPlistExists ) NSLog( @"local plist exists" );
    else                   NSLog( @"local plist does NOT exist" );

    NSLog( @"key1's value from internal=%@", [self readFromPlist:@"key1" internal:TRUE ] );
    NSLog( @"key1's value from external=%@", [self readFromPlist:@"key1" internal:FALSE] );

    NSLog( @"setting internal key1 to new-value1" );
    [self writeToPlist:@"key1" setValue:@"new-value1" internal:TRUE ];

    NSLog( @"setting external key1 to new-value1" );
    [self writeToPlist:@"key1" setValue:@"new-value1" internal:FALSE];

    NSLog( @"key1's value from internal=%@", [self readFromPlist:@"key1" internal:TRUE ] );
    NSLog( @"key1's value from external=%@", [self readFromPlist:@"key1" internal:FALSE] );

    // the first time you run this, it'll do one, then the other for all other runs:
    if( localPlistExists ) NSLog( @"since local plist exists, leaving alone" );
    else
    {
        NSLog( @"since local plist does NOT exist, cloning from internal copy");
        [fileManager copyItemAtPath:internalPath toPath:localPath error:nil];
    }

    NSLog( @"key1's value from internal=%@", [self readFromPlist:@"key1" internal:TRUE ] );
    NSLog( @"key1's value from external=%@", [self readFromPlist:@"key1" internal:FALSE] );

    NSLog( @"setting internal key1 to new-value1" );
    [self writeToPlist:@"key1" setValue:@"new-value1" internal:TRUE ];

    NSLog( @"setting external key1 to new-value1" );
    [self writeToPlist:@"key1" setValue:@"new-value1" internal:FALSE];

    NSLog( @"key1's value from internal=%@", [self readFromPlist:@"key1" internal:TRUE ] );
    NSLog( @"key1's value from external=%@", [self readFromPlist:@"key1" internal:FALSE] );

    // notice that from one run to another, changes to the internal one don't "carry over", because it's read-only
    // but ones in the external one do
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

第一次运行它的示例屏幕截图：![第一次执行](../Images/eae87b473cc4b6c6dd09f03b9bbb6aee.png)

连续运行的示例屏幕截图：![后来的处决](../Images/23ed0911b4a58c92fe6bc140ba3c3973.png)

# php - 如何选择几乎不同的行，包括 mysql 中的非不同列（来自 php）

> ID：13092632
> 
> 赞同：0
> 
> 时间：2012-10-26T18:46:43.297
> 
> 标签：php, mysql, sql, group-by, distinct

我正在运行以下查询，除非有重复记录（除了 id（主键，int）字段和修改的（时间戳）列之外的重复，有很多列被重复。重复是人的结果在表单上多次点击提交按钮（也必须解决这个问题，但这是另一个问题）。这是查询：

```
$sql = "SELECT COUNT(id) AS rcount,
    SUM(num_guests) AS gcount,
    DATE_FORMAT(modifed, '%%m-%%Y') AS adate,
    SUM(1st_visit REGEXP '^no') AS repeat_guest
    FROM reservation_stats
    WHERE establishmentid = %i
    AND num_guests > 0
    GROUP BY adate
    ORDER BY added"; 
```

我不希望 SUM 包含重复项。我正在使用 mysql 和 php。

谢谢

PS表结构：

```
 id     int(10)          
establishmentid     int(11)         
name    varchar(50)     
email   varchar(100)    
phone   varchar(30)     
num_guests  int(11)         

reservation_time    varchar(50)     
reservation_date    date            
1st_visit   varchar(10)     
data    text    
added   date        
modifed     timestamp 
```

PPS：我的查询现在是在汤姆的建议之后：

```
 $sql = "SELECT COUNT(*) as rcount, SUM(num_guests) AS gcount, 
DATE_FORMAT(added, '%%m-%%Y') AS adate, 
1 as repeat_guest 
FROM 
( SELECT added, name, email, phone, num_guests, 
  reservation_time, reservation_date 
FROM reservation_stats where establishmentid = %i 
GROUP BY added, name, email, phone, num_guests, 
  reservation_time, reservation_date 
\) dup 
group by adate 
order by added"; 
```

谢谢汤姆。这有效，除非我从原始查询中丢失了 repeat_guest 数据。我怎样才能保存它？

PPPS：等等，这个怎么样：

```
 $sql = "SELECT COUNT(*) as rcount, SUM(num_guests) AS gcount, DATE_FORMAT(added, '%%m-%%Y') AS adate,    SUM(repeat_guest)                       
            FROM
            (
             SELECT  added, name, email, phone, num_guests, reservation_time, reservation_date, SUM(1st_visit REGEXP '^no') AS repeat_guest
             FROM    reservation_stats
             where establishmentid = %i
             GROUP BY added, name, email, phone, num_guests, reservation_time, reservation_date
            ) dup
            group by adate order by added"; 
```

似乎有效，但它是否在做我认为的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:05:42.110

您可以这样做，其中 FIELD1、FIELD2 和 FIELD3 是可能重复的字段（和 num_guests）：

```
SELECT COUNT(*) rcount, SUM(num_guests) AS gcount

FROM
(
 SELECT  FIELD1, FIELD2, FIELD3, num_guests
 FROM    YOUR_TABLE
 GROUP BY FIELD1, FIELD2, FIELD3, num_guests
) dup 
```

# c++ - 我可以从 C++ 的库中包含/导入单个函数吗

> ID：13092635
> 
> 赞同：6
> 
> 时间：2012-10-26T18:47:04.340
> 
> 标签：c++, linker, g++, binutils

我只需要使用`iequals`BOOST 库中不区分大小写的字符串比较函数。

我正在使用`#include <boost/algorithm/string.hpp>`它来导入它。

有什么办法只能自己导入`iequals`函数吗？

我什至关心的原因（我真的只是好奇。）是因为如果我不这样做，编译的 DLL 大约为 230kB，如果我这样做`#include`，大约为 1.1MB。在这种特殊情况下，文件的大小并没有太大的区别，但似乎有很多东西被导入但从未使用过。如果库只有几 GB 而我只需要其中一个功能怎么办？然后这将成为一个问题，我想。

诚然，当涉及到任何与 cpp 相关的事情时，我都很天真，但我觉得在可能 90% 的代码没有使用时包含一些 750kB 的代码并不是很有效。可能是该`iequals`函数使用了所有 750kB，我不知道。

再说一次，如果`iequals`函数包含许多相同的库，文件仍然会一样大。

想法？

提前感谢您的任何建议。

编辑：

感谢您的回复。我正在尽我所能理解他们。

我是一名化学工程师，正在将一堆极其缓慢且优化不佳的 VBA 宏重写为 C++ DLL。到目前为止，结果非常出色，一切正常。如果我只需要在两个字符串之间进行单一类型的比较，我只是不认为需要额外的文件大小。

我需要做的比较示例如下：

```
if (SomeBSTR == "SomeTextHere") {
    // do stuff
} 
```

或更确切地说：

```
if (Gas == "Methane"    or
    Gas == "CH4"        or
    Gas == "C1")        return 1;

if (Gas == "Ethane"     or
    Gas == "C2H6"       or
    Gas == "C2")        return 2; 
```

如果这是我必须做的唯一比较类型，我可以以比以下更简单的方式进行比较：

```
int wStrCmp(const BSTR Str1, const wstring Str2) {

    wstring wStr1(Str1, SysStringLen(Str1));

    return boost::iequals(Str1, Str2);
} 
```

通过以下方式调用：

```
if (wStrCmp(Gas, L"Methane")      or
    wStrCmp(Gas, L"CH4")          or
    wStrCmp(Gas, L"C1"))          return 1; 
```

最后两个块实际上是从我的代码中粘贴的。

再次感谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:54:29.870

相信我，您已经包含`boost::algorithm::iequals`但它使用了`boost::range`，并且`std::locale`可能您不会在代码的其他地方使用它们，所以这会使您的代码变得更大，所以我想对于您的情况，除非您这样做，否则没有其他方法可以做到这一点使用一些非标准函数，如`stricmp`or `strcasecmp`。

如果您想在 Windows 上比较宽字符串（例如`BSTR`），您可以使用`_wcsicmp`CRT 或`lstrcmpiW`Windows 运行时（声明`Kernel32.lib`可能您已经与它链接）。

# c++ - 一元运算符重载C++中的特殊情况

> ID：13092642
> 
> 赞同：3
> 
> 时间：2012-10-26T18:47:33.903
> 
> 标签：c++, visual-c++, post-increment, unary-operator

我成功地完全重载了一元`++,--`后缀/前缀运算符，并且我的代码工作正常，但是在使用`(++obj)++`语句时它会返回意外结果

这是代码

```
class ABC
{
 public:
    ABC(int k)
    {
        i = k;
    }

    ABC operator++(int )
    {
        return ABC(i++);
     }

     ABC operator++()
     {
        return ABC(++i);
     }

     int getInt()
     {
      return i;
     }
    private:
   int i;
 };

 int main()
 {
    ABC obj(5);
        cout<< obj.getInt() <<endl; //this will print 5

    obj++;
     cout<< obj.getInt() <<endl; //this will print 6 - success

    ++obj;
    cout<< obj.getInt() <<endl; //this will print 7 - success

    cout<< (++obj)++.getInt() <<endl; //this will print 8 - success

        cout<< obj.getInt() <<endl; //this will print 8 - fail (should print 9)
    return 1;
   } 
```

有什么解决办法或理由？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T18:49:35.743

一般来说，预增量应该返回一个`ABC&`，而不是一个`ABC`。

您会注意到这会使您的代码无法编译。修复它相对容易（不要创建新的`ABC`，只需编辑现有的值，然后返回`*this`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:30:55.757

我发现最好在前增量方面实现后增量。

```
ABC operator++(int )
{
   ABC result(*this);
   ++*this; // thus post-increment has identical side effects to post-increment
   return result; // but return value from *before* increment
}

ABC& operator++()
{
   ++i; // Or whatever pre-increment should do in your class
   return *this;
} 
```

# python - 无法在 Mountain Lion 上安装 numpy

> ID：13092643
> 
> 赞同：11
> 
> 时间：2012-10-26T18:47:37.510
> 
> 标签：python, numpy, nltk

我对 Python 完全陌生，我正在尝试基于[http://nltk.org/install.html安装 NLTK](http://nltk.org/install.html)

我已经安装了所有东西`numpy`（它说`numpy`是可选的，但是当我尝试 import 时`nltk`，它说有一个错误，因为它找不到`numpy`模块）

在我跑之后`sudo pip install -U numpy`

我在 Mac 上运行 Mountain Lion，python v2.7.3

我收到以下错误（我只包括日志的结尾）：

> 文件“/private/tmp/pip-build/numpy/numpy/core/setup.py”，第 696 行，在 get_mathlib_info
> 
> raise RuntimeError("Broken toolchain: cannot link a simple C program")
> 
> RuntimeError：损坏的工具链：无法链接简单的 C 程序
> 
> * * *
> 
> 命令 python setup.py egg_info 失败，错误代码 1 在 /tmp/pip-build/numpy

有人见过这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:52:13.807

如果您打开命令提示符并键入`gcc`它是否运行没有错误？如果没有，您可能需要安装 XCode（可在应用商店中获得），然后安装命令行工具（[看起来与这篇文章类似](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools)），以便您可以完成 numpy 的安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-18T00:12:45.240

最近我一直看到这个：

> clang：错误：未知参数：'-mno-fused-madd' [-Wunused-command-line-argument-hard-error-in-future]

请参阅此处修复：

[clang 错误：未知参数：'-mno-fused-madd'（python 包安装失败）](https://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mno-fused-madd-python-package-installation-fa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-06T07:31:12.313

在我看来，这个问题已经在这里得到了回答：[pip install numpy 的问题 - RuntimeError: Broken toolchain: cannot link a simple C program](https://stackoverflow.com/questions/22388519/problems-with-pip-install-numpy-runtimeerror-broken-toolchain-cannot-link-a)

设置`ARCHFLAGS`使我能够安装 numpy（使用命令行工具 5.1.1 运行 Mavericks）：

`ARCHFLAGS=-Wno-error=unused-command-line-argument-hard-error-in-future pip install --upgrade numpy`

# jquery - 使主滚动条控制一个设置为溢出的 div：滚动？

> ID：13092644
> 
> 赞同：0
> 
> 时间：2012-10-26T18:47:40.890
> 
> 标签：jquery, css, scroll

我有一个 div 占据了我的大部分页面，它设置为溢出滚动，但 id 喜欢它做什么，它不是由 div 本身的滚动条而是由右侧的主滚动条控制浏览器窗口..

这是可能的吗？页面上没有其他可滚动的 div，所以它只会控制这个 ..

我想这样做的主要原因是不希望我的网站中间有滚动条，因为某些浏览器的默认滚动条相当难看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:50:09.160

放

CSS：

```
div{

overflow:auto;
} 
```

js：

```
$("div").height($("div")[0].scrollHeight); 
```

# c# - 如何从 datagridview 的列中显示文本框中选中复选框的数量？

> ID：13092647
> 
> 赞同：4
> 
> 时间：2012-10-26T18:47:59.257
> 
> 标签：c#, datagridview, checkbox, datagridviewcheckboxcell

我有一个带有 CheckBox 列的 DataGridView。（这是一个库存系统。）支票用于将项目的序列号从我们公司的一个位置移动到另一个位置。

我还有一个文本框，到目前为止，员工输入他要移动的物品数量，然后检查适当的序列号，然后移动物品。

我希望根据检查的序列号生成文本框中的数字。甚至可能吗？在这一点上，我已经尝试了大约一百种不同的解决方案，它们要么以奇怪的错误告终，要么没有给我任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:55:52.973

未经测试，但这应该足够接近。当我遇到同样的问题时，我曾经读过一篇或十篇关于这个的文章。诀窍是在单击框时立即提交编辑，然后触发`CellValueChanged`事件。然后，您可以从那里获取计数。

这应该会在您选中和取消选中复选框时更新文本框：

```
private void dgv_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    if (dgv.IsCurrentCellDirty && dgv.CurrentCell.OwningColumn.Name == "MyCheckColumn")
        dgv.CommitEdit(DataGridViewDataErrorContexts.Commit);
}

private void dgv_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.RowIndex == -1) //just a guard for the header row
        return;

    if (dgv.Columns[e.ColumnIndex].Name == "MyCheckColumn")
        textBox.Text = dgv.Rows.Cast<DataGridViewRow>().Count(r => Convert.ToBoolean(r.Cells["MyCheckColumn"].Value)).ToString();
} 
```

希望 Linq 能正常工作。`foreach`如果没有，您将不得不使用 sum 变量以老式方式进行操作。我知道`DataGridViewRowCollection`有时可能很挑剔。

# asp.net-mvc - ASP.Net MVC 默认文件结构

> ID：13092651
> 
> 赞同：0
> 
> 时间：2012-10-26T18:48:10.440
> 
> 标签：asp.net-mvc

新的 ASP.Net MVC 应用程序（按控制器、模型、视图等分组）上的默认文件结构是否有任何功能原因？

否则我会以一种对我来说更方便的方式来构建它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:02:04.277

Technically, you can put models and Controllers anywhere, since they're just code files that get compiled into a DLL. Other files, however, have stricter location requirements if you want to take advantage of the conventions that MVC asssumes.

Strictly speaking, you can place views anywhere. However, doing so has a number of consequences. You must specify the full path to the view in your View() method, and if you don't put views in the ~Views folder, then it's possible for people to download them directly (which you don't want).

In general, MVC works a lot more smoothly if you follow the conventions. If you go your own way, you lose a lot of automation and productivity.

# java - JAVA - 使用自定义套接字协议

> ID：13092652
> 
> 赞同：3
> 
> 时间：2012-10-26T18:48:12.783
> 
> 标签：java, sockets, byte

我正在尝试通过套接字与需要特定标头和数据主体的 C 应用程序连接，但是，在尝试遵守该格式时遇到了很多问题，应该是这样的：

标头：
- 2 个字节用于数据包开始。
- 4 个字节，表示数据包大小加上标头。
- 1 个字节用于数据包类型。

正文：
- 4 个字节，表示参数的数量。

每个参数的一个块：
- 参数经度的 4 个字节。
- X 字节的消息内容。
- 1 个字节用于转义字符。

这是服务器期望的示例：

[%%][13 00 00 00][0][12 00 00 00][0b 00 00 00][OPERATIONPERFORMED\0]

我遇到的问题是，当尝试通过 PrintWriter 发送信息时，另一端将十六进制值作为 ASCII 字符而不是实际值获取。我已经尝试过使用 ByteBuffer、DataOutputStream 和几个选项，但它们仍然以这种格式出现，甚至更奇怪。

从我正在调查的内容来看，似乎字节序是倒置的，所以它们得到了正确的字节，但顺序错误。

我现在正在尝试的实现如下：

```
 DataOutputStream stream = new DataOutputStream(socket.getOutputStream());
    PrintWriter writer = new PrintWriter(socket.getOutputStream()); 

    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    // Header
    stream.writeChar(37);
    stream.writeChar(37); 
    stream.writeInt(26);
    stream.writeChar('\\0');

    stream.writeInt(1);
    stream.writeInt(11);

    stream.writeUTF("SET_PROBLE\\0");

    stream.flush();

    StringBuilder sb = new StringBuilder();

    boolean state = true;

    while (state) {
        if (in.ready()) {
            sb.append((char) in.read());
        }
        else {
            if (sb.length() > 0) {
                state = false;
            }
        }
    }

    System.out.println(sb.toString().trim());

} 
```

你能帮我吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:08:21.990

当然，Tomasz 关于直接使用 OutputStream 和发送字节是正确的。我想对此进行扩展并说明为什么这是真的。

让我们回顾一下您的服务器期望的字节数。首先，您需要两个字节，每个字节的值为 37 (ascii %%)。 [DataOutputStream.writeChar](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeChar%28int%29)不会给你那个。正如文档明确指出的那样`Writes a char to the underlying output stream as a 2-byte value, high byte first.`

```
stream.writeChar(37);
stream.writeChar(37); 
```

将产生 4 个字节：0 37 0 37（或 00 25 00 25 hex）。同样，您需要几个 4 字节整数。请注意，根据您的服务器示例，这些整数以 little-endian 模式（低字节优先）进行序列化。所以[DataOutputStream.writeInt](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeInt%28int%29)不会有帮助，因为它`Writes an int to the underlying output stream as four bytes, high byte first`。

```
stream.writeInt(26) 
```

当您需要（1A 00 00 00）时，将产生 4 个字节 - 0 0 0 26（或 00 00 00 1A 十六进制）。你明白了。这只是行不通。

下面是一些示例代码，展示了如何通过放弃 DataOutputStream 并直接使用 OutputStream 来解决这些问题。

```
public static void myWriteInt(OutputStream out, int value) throws IOException
{
    out.write(value % 0xff);
    out.write( (value >> 8) % 0xff);
    out.write((value >> 16) % 0xff);
    out.write((value >> 24) % 0xff);

}
public static void main(String[] args) throws Exception
{

    ByteArrayOutputStream out = new ByteArrayOutputStream();
    // Replace with
    // OutputStream out = socket.getOutputStream()

    out.write((byte) 37);
    out.write((byte) 37);

    myWriteInt(out, 26);
    out.write((byte) 0);

    myWriteInt(out, 1);
    myWriteInt(out, 11);

    out.write("SET_PROBLE\0".getBytes("UTF-8"));

    System.out.println(DatatypeConverter.printHexBinary(out.toByteArray())); 
```

为了避免处理套接字，我正在写入 ByteArrayOutputStream，以便我们可以打印出十六进制值并显示它符合您的要求。只需替换为套接字输出流。

此代码打印出以下内容（为清楚起见，我添加了一些空格）

```
2525 1A000000 00 01000000 0B000000 5345545F50524F424C4500 
```

最后一个块是 SET_PROBLE，后跟一个 0。

此外，我还包括了一个自定义的 little-endian int marshaller (myWriteInt)，但还有其他方法 - 例如使用设置为 little endian 模式的临时 ByteBuffer。

希望这可以帮助。

# php - 在 Silex 中构造 index.php 文件的最佳方法是什么？

> ID：13092656
> 
> 赞同：1
> 
> 时间：2012-10-26T18:48:24.763
> 
> 标签：php, symfony, silex

我正在使用 Silex 开发一个网站，由于这种新方法对我来说（所有内容都在一个文件中），我有一些疑问。

**你如何构建你的控制器等等？**

我所做的是让 index.php 有 3 个单独的需要文件：

*   **config.php**：包括自动加载和任何必需的文件，保存所有配置并准备任何应该随时可以访问的信息。
*   **front_controllers.php**：做所有前面的事情。
*   **back_controllers.php**：包括与我的后端相关的任何控制器。

你觉得这是一个不错的选择吗？否则，我是否缺少任何东西（也许是组织所有这些的工作模式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:12:06.780

除了我的评论，我建议下一个文件结构

```
web
    frontend
        default.php
        blog.php
        forum.php
        ...
    backend
        default.php
        blog.php
        forum.php
        ... 
```

如果论坛控制器变得太大，您可以将其功能分成几个文件并将它们放在适当的文件夹中。例如：

```
web
    frontend
        forum
            default.php
            subjects.php
            posts.php
            ... 
```

# node.js - Node.js 和未发布的全局模块

> ID：13092657
> 
> 赞同：1
> 
> 时间：2012-10-26T18:48:25.137
> 
> 标签：node.js, module

`npm install -g xyz`将模块 xyz 安装到我称之为“全局模块目录”的位置，即`C:\Users\me\AppData\Roaming\npm\node_modules`在 Windows 7 中。

但是，似乎没有办法让我所有的节点项目都使用这些模块。

如果我有一个项目，`C:\temp\test.js`那么`require('xyz')`找不到该模块。

1.  将环境变量设置`NODE_PATH`为上述全局模块目录无济于事
2.  AFAIK`npm link`仅适用于已发布的模块而不是我自己未发布的模块

没有将我所有的项目放在全局模块目录的子文件夹中（以便节点遍历并找到 node_modules/），有没有办法重新使用这些全局模块？

如果是这样，-g 和“全局”模块的意义何在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:35:39.587

全局模块仅用于命令行工具。例如，如果您全局安装 Express.js，您可以使用它`express --session`来创建新项目。如果您需要在项目中使用 express，则需要将其安装在本地 node_modules 目录中。

# asp.net - 从 vb.net 到存储在 SQL Server 中的十进制转换

> ID：13092666
> 
> 赞同：1
> 
> 时间：2012-10-26T18:49:10.363
> 
> 标签：asp.net, sql-server, parsing, localization, decimal

我有这段代码

```
Dim lt As Decimal
Dim lg As Decimal
Decimal.TryParse(tbLat.Value.Replace(".", ","), lt)
Decimal.TryParse(tbLng.Value.Replace(".", ","), lg)
com.Parameters.AddWithValue("latitude", lt)
com.Parameters.AddWithValue("longtitude", lg) 
```

我试图将`lt`and`lg`参数存储在 column 中`decimal(9,6)`。

在本地 SQL Server 中它运行良好，但是当我部署到我的 Web 服务器时，它给了我这个错误

> *将数字转换为数字数据类型的算术溢出错误。该语句已终止。*

我决定将精度提高到 16，因此列变为`decimal(16,6)`. 现在它存储像 25252525.000000 这样的整数！

可能是本地化的问题，但我的问题是如何避免本地化并安全地存储数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:18:54.750

好的，在谷歌搜索和尝试之后，我按照[http://msdn.microsoft.com/en-us/library/ew0seb73.aspx](http://msdn.microsoft.com/en-us/library/ew0seb73.aspx)上的示例进行操作，这让我在代码中得到了驱动：

```
 Dim style As NumberStyles = NumberStyles.Number Or NumberStyles.AllowCurrencySymbol
            Dim culture As CultureInfo = CultureInfo.CreateSpecificCulture("en-GB")
            Dim lt As Decimal
            Dim lg As Decimal
            If Decimal.TryParse(tbLat.Value, style, culture, lt) Then
                com.Parameters.AddWithValue("latitude", lt)
            End If
            If Decimal.TryParse(tbLng.Value, style, culture, lg) Then
                com.Parameters.AddWithValue("longtitude", lg)
            End If 
```

它在本地和网络上都有效。感谢所有试图提供帮助的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:54:42.307

看来您在此过程中的某个时刻丢失了小数位。

在不了解您的语言环境的情况下，我建议删除“。”的替换。使用 "," 并以默认方式解析十进制值：

```
Dim lt As Decimal
Dim lg As Decimal
If (Decimal.TryParse(tbLat.Value, lt)) And (Decimal.TryParse(tbLng.Value, lg)) Then
   com.Parameters.AddWithValue("latitude", lt)
   com.Parameters.AddWithValue("longtitude", lg)
Else
   'Display Error
End If 
```

如果这不起作用，您应该进行一些调试并检查`tbLat.Value`, `tbLng.Value`, `lt`,`lg`和`com.Parameters`collection 以查看转换失败的位置。

如果您使用的是 MS SQL，则可以从那里使用 SQL Server Profiler 查看传递给 SQL 的值。您应该能够看到小数位丢失的位置，并直接修复它或在此处更新您的问题。

# node.js - Connect-Flash 和 Express 给我多条消息但不输入

> ID：13092668
> 
> 赞同：3
> 
> 时间：2012-10-26T18:49:17.577
> 
> 标签：node.js, coffeescript, express, pug, flash-message

我正在尝试在 Connect-Flash - Express 中询问多个闪存消息的类型，并给我多个字符串消息，但不是“类型”

在路线：

```
 app.get '/multiple-flash', (req, res) ->
    req.flash "info", ["Welcome", "Benvenuto"]
    res.redirect '/' 
```

在客户端：

```
doctype 5
html
  head
    title= 'Login'

  body
    p layout

      if message 
        p= message

    -console.log(message) 
```

在 localhost 获取 /multiple-flash，但控制台中的输出不显示“类型”。

```
GET /multiple-flash 302 1ms - 90
[ [ 'Welcome', 'Benvenuto', ] ] 
```

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:05:30.163

我希望它对那些遇到同样问题的人有所帮助。在路线“/”中将是：

```
 app.get '/', (req, res) -> 
    res.render '', 
      message: req.flash() 
```

相反，以前是错误的：

```
message: req.flash ('info') 
```

只返回信息的闪光。

# iphone - 后台线程绘图中的错误访问

> ID：13092669
> 
> 赞同：1
> 
> 时间：2012-10-26T18:49:28.070
> 
> 标签：iphone, objective-c, ios, core-graphics, cgimage

# 我正在努力完成的事情

1.  在后台线程中绘制图像
2.  将 转换`CGImage`为 a`UIImage`并将其添加到`UIImageView`主线程上的 a 。
3.  淡入图像视图，它位于`UICollectionViewCell`从 alpha 值 0 到 1 的子类上。
4.  这样做是为了在滚动时不会出现断断续续的情况`UICollectionView`

# 问题

该行为起初表现正常，但很快就偏离了不可预测性，并且通常很快导致`EXC_BAD_ACCESS`错误，发生在将 uiimage 转换为 cgimage 的过程中的某个地方，反之亦然。

# 编码

```
 //setup for background drawing
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGContextRef context;
    context = CGBitmapContextCreate(NULL, 250, backgroundHeight - 112, 8, 250 * 4, colorSpaceRef, kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);
    CGColorSpaceRelease(colorSpaceRef);

    //Take the image I want drawn, convert to cgimage for background drawing
    CGImageRef  image = contentImage.CGImage;
    CGContextDrawImage(context, CGRectMake(0, 0, 250, backgroundHeight - 112), image);
    CGImageRelease(image);
    CGImageRef outputImage = CGBitmapContextCreateImage(context);
    imageRef = outputImage;

    [self performSelectorOnMainThread:@selector(addImageToView) withObject:nil waitUntilDone:YES];
    CGContextRelease(context);
    CGImageRelease(outputImage); 
```

addImageToView 方法只是创建一个图像并添加到我的 UIImageView

```
UIImage * image = [UIImage imageWithCGImage:imageRef];
[photoView setImage:image]; 
```

这些方法在 cellForRowAtIndexPath 方法中被调用，以及我的方法 fadeInImage

```
[UIView animateWithDuration:.6 delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
    photoView.alpha = 1;
}completion:nil]; 
```

当我运行时，我会收到 Bad Access 调用并崩溃。我猜这与主线程和后台线程在彼此之间传递图像有关。有任何想法吗？多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:57:53.310

我认为，只要您没有使用`CGImageCreate`或使用创建图像`CGImageRetain`，您就不必使用`CGImageRelease(image);`. 一旦您停止使用它，它应该会自动释放。一探究竟。

[苹果文档](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:06:49.297

不要发布第一张图片`CGImageRelease(image);`

也许最好改变：

```
CGImageRef outputImage = CGBitmapContextCreateImage(context);
imageRef = outputImage;

[self performSelectorOnMainThread:@selector(addImageToView) withObject:nil waitUntilDone:YES]; 
```

至：

```
CGImageRef outputImage = CGBitmapContextCreateImage(context);
UIImage* result = [UIImage imageWithCGImage:imageRef]
[self performSelectorOnMainThread:@selector(addImageToView:) withObject:result waitUntilDone:YES]; 
```

接着：

```
- (void) addImageToView:(UIImage*) image {
    [photoView setImage:image];
} 
```

甚至：

```
[photoView performSelectorOnMainThread:@selector(setImage:) withObject:result waitUntilDone:YES]; 
```

# c# - 以编程方式切换屏幕后如何使表单居中

> ID：13092672
> 
> 赞同：4
> 
> 时间：2012-10-26T18:49:36.233
> 
> 标签：c#, winforms

鉴于`Form`我想在切换屏幕后将表单居中。我怎样才能完成任务？

```
 internal static void SetFormToBiggestMonitor(Form form, bool center = true)
    {
        Screen biggestScreen = FindBiggestMonitor();//assume this works
        form.Location = biggestScreen.Bounds.Location;

        if (center)
        {
            form.StartPosition = FormStartPosition.CenterScreen;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T18:58:54.410

One not so loopy way to accomplish the task...

```
 private static Point CenterForm(Form form, Screen screen)
    {
        return new Point(
                         screen.Bounds.Location.X + (screen.WorkingArea.Width - form.Width) / 2,
                         screen.Bounds.Location.Y + (screen.WorkingArea.Height - form.Height) / 2
                         );
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:08:41.213

在设置位置之前，您需要考虑监视器的偏移量，但除此之外，它应该相当简单。

```
if (center)
{
      form.Location = new Point
      (
         biggestScreen.WorkingArea.X + ((biggestScreen.WorkingArea.Width + form.Width)/2),
         biggestScreen.WorkingArea.Y + ((biggestScreen.WorkingArea.Height + form.Height)/2)
      );
} 
```

但是[Form.CenterToScreen()](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.centertoscreen.aspx)应该可以正常工作，但显然微软不建议使用它？不知道为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T05:42:58.183

如果您只使用[Form.CenterToScreen而不是所有这些计算怎么办](https://msdn.microsoft.com/en-us/library/system.windows.forms.form.centertoscreen.aspx)

```
this.CenterToScreen(); 
```

# c++ - 如何遍历类似场景图的树结构？

> ID：13092673
> 
> 赞同：0
> 
> 时间：2012-10-26T18:49:45.837
> 
> 标签：c++, directx, traversal, tree-traversal, scenegraph

我有一个场景图：

```
class Node
{
public:

struct
{
    COLLISION_TYPE collisionType;

    void* boundingVolume;
}collisionData;

struct
{
    XMFLOAT3 position;
    XMFLOAT3 rotation;
}leafData;

Node(Model* representModel, Node* parentNode)
{
    this->parentNode = parentNode;
    this->representModel = representModel;

    this->collisionData.collisionType = representModel->collisionDataDefault.collisionType;
    this->collisionData.boundingVolume = &representModel->collisionDataDefault.boundingVolumeDefault;
};

~Node()
{

};

std::vector< std::vector<XMFLOAT3*> > GetChildTransformStream()
{

};

void Transform(XMMATRIX *world)
{

};

Model* representModel;

Node* parentNode;
std::vector<Node*> childNodes;
}; 
```

所以在Transform方法中我想变换节点的坐标和它所有子节点的坐标，所以我必须首先用GetChildTransformStream获取所有子节点的列表，但我不知道如何遍历它，因为它可以有任意数量的子节点，它们可以有任意数量的子节点等等。你通常如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:27:14.590

一个简单的方法是递归函数：

```
void visit(Node *node) {
  // apply whatever needed to node
  for (int c = 0; c < node->childNodes.size(); ++c)
     visit(node->childNodes[c]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:18:52.387

进行树遍历的一种简单方法是使用堆栈。将所有子节点推入堆栈，弹出每个子节点，将其子节点推入堆栈，处理它等。

编辑：请注意，查克的回答只是这种情况的一个特例。在那里，用来存储遍历状态的栈其实就是函数调用栈。

编辑：源代码概述了使用堆栈的典型树遍历。

```
#include <vector>
#include <stack>
#include <iostream>

struct Node {
    std::vector<Node*> children;
    void Visit() const { std::cout << "Visited a node!\n"; }
};

void TraverseTree(Node* root) {
    std::stack<Node*> stack;
    stack.push(root);

    while (!stack.empty()) {
        Node* currentNode = stack.top();
        stack.pop();

        // push all children onto the stack:
        for (std::vector<Node*>::const_iterator i = currentNode->children.begin();
            i != currentNode->children.end();
            i++)
        {
            stack.push(*i);
        }

        // do any processing for this node here
        currentNode->Visit();
    }
}

int main(int argc, char** argv)
{
    Node a,b,c,d,e,f;
    a.children.push_back(&b);
    a.children.push_back(&c);
    b.children.push_back(&d);
    d.children.push_back(&e);
    d.children.push_back(&f);
    TraverseTree(&a);
} 
```

# java - JTextField 数组问题

> ID：13092677
> 
> 赞同：0
> 
> 时间：2012-10-26T18:50:08.160
> 
> 标签：java, swing, nullpointerexception, jtextfield, grid-layout

因此，我正在为数独程序使用 JTextField 的二维数组。

```
public JTextField[][] userInputArray = new JTextField[9][9]; 
```

现在。我得到一个持续的空指针异常，并且无法辨别如何修复它。它来自触发此方法：

```
 public void showTextFields()
{
    int rowCounter = 0;
    int columnCounter = 0;

    for (rowCounter = 0; rowCounter <= 8; rowCounter += 1)
    {
        for (columnCounter = 0; columnCounter <= 8; columnCounter += 1)
        {
            pane.setLayout(new GridLayout(9, 9));
            //pane.add(userInputArray[rowCounter][columnCounter]);
            //userInputArray[rowCounter][columnCounter].setColumns(1);
            //userInputArray[rowCounter][columnCounter].setVisible(true);
        }
    }
} 
```

注释掉的所有内容都会抛出空指针异常。

理想情况下，我的目标是在屏幕上显示 JTextField，并在网格上分配它们。

NullPointerException 发生在`pane.add(...)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:51:55.210

当您创建了二维数组来容纳您的字段时，您需要实例化`JTextField`数组中的组件。

```
for (int i =0; i < userInputArray.length; i++) {
   for (int j =0; j < userInputArray[0].length; j++) {
      userInputArray[i][j] = new JTextField();
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:57:36.413

当您声明数组时，它会使用默认值进行初始化。默认值`Object`是`null`，因此您需要先实例化对象，然后再使用它们

```
userInputArray[rowCounter][columnCounter] = new JTextField(); 
```

所以现在你的代码应该如下所示

```
for (columnCounter = 0; columnCounter <= 8; columnCounter += 1)
    {
        pane.setLayout(new GridLayout(9, 9));
        userInputArray[rowCounter][columnCounter] = new JTextField();
        pane.add(userInputArray[rowCounter][columnCounter]);
        userInputArray[rowCounter][columnCounter].setColumns(1);
        userInputArray[rowCounter][columnCounter].setVisible(true);
    } 
```

# javascript - 标题中带有复选框的可折叠div，Jquery Mobile

> ID：13092679
> 
> 赞同：0
> 
> 时间：2012-10-26T18:50:14.800
> 
> 标签：javascript, jquery, html, jquery-mobile, checkbox

这是我的html代码：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

<div id="questionsPage" data-role="page" data-add-back-btn="true">

<div data-role="header">
    <h1>Questions</h1>
</div>

<div data-role="content">
<div id="questions_list" data-role="collapsible-set" data-theme="a" data-content-theme="d" data-inset="false"></div>
</div>

</div>
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script src="js/questions_list.js"></script>
</body>

</html> 
```

这是 question_list.js：

```
$('#questionsPage').live('pageshow', function(event) {
    var id = getUrlVars()["id"];
    $.getJSON(serviceURL + 'api/questions.json?id=' + id, function(data) {
        questions = data;
        $.each(questions, function(index, question) {
            $('#questions_list').append('<div data-role="collapsible" id="section_' + question.id + '">' +
                                        '<h2>' + question.question + '<input type="checkbox" id="checkbox_' + question.id + '" /></h2>' +
                                        '<p>test</p></div>');
            $('#section_' + question.id).collapsible();
        });
    });
});

function getUrlVars() {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

好吧，我可以看到带有复选框的 div。但是当我点击复选框时，div 被折叠并且复选框未被选中。

我想要的是，当我点击复选框时，它会被选中。当我点击其他任何地方时，只有 div 会在没有选中复选框的情况下折叠。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:42:02.340

紧接着：

```
$('#questions_list').append('<div data-role="collapsible" id="section_' + question.id + '">' +
                                        '<h2>' + question.question + '<input type="checkbox" id="checkbox_' + question.id + '" /></h2>' +
                                        '<p>test</p></div>'); 
```

插入：

```
//  This will simply stop the check box from allowing its parent to be clicked (collapsed) while the checkbox itself is clicked
//  I havn't tested, but should work
$('#checkbox_' + question.id).on("click", function(e) { e.stopPropagation(); }); 
```

# azure - Windows Azure Ping 站点

> ID：13092681
> 
> 赞同：1
> 
> 时间：2012-10-26T18:50:24.493
> 
> 标签：azure

我正在使用 Windows Azure Cloud 运行一个站点。有没有办法每 20 分钟 ping 一次我的网站？我的网站流量很低，我需要一直阻止该网站启动和停止应用程序池。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:00:53.407

您可能能够设置 Cron 作业来执行 ping，查看任务[“使用 Cron 作业服务调度 Windows Azure 网站”](http://blog.ntotten.com/2012/08/05/task-scheduling-with-windows-azure-web-sites-using-a-cron-job-service/)以获取示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:32:09.860

如果您使用的是完整的云服务（又名 Web 角色），您可以使用启动任务将应用程序池设置为永不关闭。该脚本以及我发现有用的一些其他 IIS 配置更改都可以做到这一点。

```
@ECHO OFF

@REM A file to flag that this script has already run
@REM because if we run it twice, it errors out and prevents the Azure role from starting properly
@REM %~n0 expands to the name of the currently executing file, without the extension
SET FLAGFILE=c:\%~n0-flag.txt

IF EXIST "%FLAGFILE%" (
  ECHO %FLAGFILE% exists, exiting startup script
  exit /B
) ELSE (
  date /t > %FLAGFILE%
)

@REM Enable IIS compression for application/json MIME type
@REM This will fail the second time you run it on a machine (eg, your desktop). So don't do that. 
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/json',enabled='True']" /commit:apphost
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/json; charset=utf-8',enabled='True']" /commit:apphost

@REM Set IIS to automatically start AppPools
%windir%\system32\inetsrv\appcmd.exe set config -section:applicationPools -applicationPoolDefaults.startMode:AlwaysRunning /commit:apphost

@REM Set IIS to not shut down idle AppPools
%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.processModel.idleTimeout:00:00:00 /commit:apphost

@REM remove IIS response headers
%windir%\system32\inetsrv\appcmd.exe set config /section:httpProtocol /-customHeaders.[name='X-Powered-By'] 
```

# sql - SSIS 包 - 循环执行 SQL 任务的不同连接

> ID：13092682
> 
> 赞同：2
> 
> 时间：2012-10-26T18:50:24.667
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我正在创建一个 MSSQL2008 SSIS 包来从数据库表生成报告并通过电子邮件发送报告。它在单个数据库上完美运行。客户端正在运行由 3 个不同部门使用的 3 个不同的数据库。数据库结构完全相同。所有三个数据库都位于同一台服务器上，使用相同的安全/凭据。

我在我的 SSIS 包中创建了一个“For Each Loop Container”，它遍历 3 个项目的列表并将其填充到一个变量中。我现在如何将其传递给“执行 SQL 任务”以运行 3 次（每个数据库一次）？

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T20:59:55.723

这比我预期的要容易得多。

我转到“执行 SQL 任务”的属性，在“连接”的“表达式”下，我指定了 @varDBName，这是我在外部“for each”循环中填充的变量。我还需要将“DelayValidation”属性设置为“True”，因此它只在运行时进行评估。我希望这对其他人有帮助。

# jquery - 具有后备功能的 Ajax

> ID：13092686
> 
> 赞同：1
> 
> 时间：2012-10-26T18:50:38.347
> 
> 标签：jquery, ajax, web-applications, web

我目前正在开始一个新项目，并希望使用 Ajax（通过 jQuery）进行表单提交。如果用户禁用了 javascript，处理这种情况的最佳方法是什么？

我知道这是基本的网络知识，所以提前感谢。

**多谢你们**

感谢您的帮助 - 我设法在另一篇文章中找到了这个 - 很抱歉给您带来麻烦。我已经开始投票结束这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:53:15.140

有很多方法可以做到这一点。

一，效果很好。

创建一个可以覆盖大部分页面的 div。在这个 div 中放一条消息。当您的页面加载时，使用 javascript 隐藏/删除 div。如果他们没有启用 javascript，则 div 不会消失。

只是许多方法中的一种..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:54:02.560

忽略非JS用户？;-)

如果你不能忽略它们，你应该用标准形式（即经典的php）构建你的完整项目。稍后您可以添加 ajax 功能作为额外功能。在最好的情况下，ajax 调用会触发与标准表单相同的服务器功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:56:20.580

如果您的应用程序完全依赖 AJAX 和 javascript，那么请礼貌地告知用户，如果他们想使用您的应用程序，他们需要有一个启用了 javascript 的现代浏览器。

如果您可以以不依赖 AJAX 的方式制作您的应用程序（如果可能的话，最好采用这种方式），然后拥有一个分页系统，或者任何适合您的特定应用程序的系统，以提供尽可能接近 javascript 版本的体验。

根据经验，最好使用服务器端脚本编写应用程序（安全地处理持久性）、交付 html（所有浏览器都可以读取）、使用 css（为格式良好的 html 添加样式）和 javascript（对于客户端交互性，始终作为可选额外）。

# asp.net - 如何选择在 ASP 上显示的图像作为由 VB 变量定义的源？

> ID：13092689
> 
> 赞同：1
> 
> 时间：2012-10-26T18:50:55.587
> 
> 标签：asp.net, vb.net

我有一个字符串变量，其中包含我想要的图像所在位置的 url，如何将此值传递给图像？我试着做 <%my variable here%> 但它没有用。

```
<asp:Image ImageUrl="" runat="server"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:53:23.227

```
<asp:Image Id="image1" ImageUrl="<%= yourVariable %>" runat="server"/> 
```

另一种方法是在文件后面的代码中设置它：

```
image1.ImageUrl = "http://example/logo.png" 
```

# jquery - 如何将页面按钮添加到寻呼机 jqGrid？

> ID：13092695
> 
> 赞同：1
> 
> 时间：2012-10-26T18:51:14.653
> 
> 标签：jquery, jqgrid

默认情况下，在寻呼机上，我只有 Prev、Next、First 和 Last 按钮。

但我还需要为每个页面设置按钮。

我需要这个位置的按钮：

```
[FIRST] [PREV] [1] [2] [3] [4] [5] [NEXT] [LAST]
```

请帮忙。

# android - Andengine，缩放图像以填充屏幕大小，而不保持纵横比

> ID：13092696
> 
> 赞同：1
> 
> 时间：2012-10-26T18:51:23.660
> 
> 标签：android, size, screen, andengine, aspect-ratio

我正在尝试设置大小为 960x640 像素的图像...我的设备有 854x480 像素..

我所做的是加载精灵，然后设置为场景背景......

```
sprite = new Sprite(0, 0, fieldITexture, BaseActivity.getSharedInstance().getVertexBufferObjectManager());
setBackground(new SpriteBackground(sprite)); 
```

但显然该图像正在屏幕之外，我尝试使用 setScale 和 setScaleCenter，但我没有给出任何结果......请参阅这张图片：[http ://db.tt/pcuJa4vE](http://db.tt/pcuJa4vE)

要设置相机尺寸，我根据设备完成了它：

```
final Display display = getWindowManager().getDefaultDisplay();
CAMERA_WIDTH = display.getWidth();
CAMERA_HEIGHT = display.getHeight();
mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera); 
```

那么，我该怎么做才能将足球场缩放到屏幕尺寸呢？我不在乎方面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:08:26.677

只是把它放在那里，我相信这些设备有 2 个主要比例（5:3 和 4:3）。大多数其他人比 4:3 更接近 5:3（所以 5:3 应该是默认值）。

我想支持最好的图形，而不必经历所有的屏幕尺寸。所以我采用了这两个比率。

现在我做了这样的设置：

定义

```
String fileFolderForRatio = "";
    int CAMERA_WIDTH = 1280;
    int CAMERA_HEIGHT = 768;

@Override
    public EngineOptions onCreateEngineOptions() {
        instance = this;

        // getting the device's screen size
        Point screenSize = getScreenSizeByRatio();
        CAMERA_WIDTH = screenSize.x;
        CAMERA_HEIGHT = screenSize.y;

        mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        final EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
        engineOptions.getAudioOptions().setNeedsSound(true);
        engineOptions.getAudioOptions().setNeedsMusic(true);

        return engineOptions;

    } 
```

和功能（注意检查宽度和高度，有时 AndEngine 会反过来检测）

```
public Point getScreenSizeByRatio()
    {
        final Display display = getWindowManager().getDefaultDisplay();

        double sw = display.getWidth();
        double sh = display.getHeight();
        double ratio = sw / sh;
        if (sw < sh) ratio = sh/sw;

        Point screenPoints = new Point();
        if (ratio > 1.3 && ratio < 1.4)
        {

            fileFolderForRatio = "1024x768";
            screenPoints.x = 1024;
            screenPoints.y = 768;

        } else
        {

            fileFolderForRatio = "1280x768";
            screenPoints.x = 1280;
            screenPoints.y = 768;

        }

        Debug.e("RATIO", fileFolderForRatio);

        return screenPoints;
    } 
```

将图形（针对该屏幕尺寸进行了优化）放在 1024x768 文件夹和 1280x768 文件夹中。

这样你就有了半静态的屏幕尺寸。AndEngine 将为您调整其余部分的大小。

（请不要对精灵的屏幕定位进行检查，因为 2 的比例不一样。但是来自 Ios 开发人员，这并不难（iPad 和 iPhone）

希望能帮助到你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T19:09:12.043

不要使用 device.getWitdh() 和 device.getHeight() 使用固定的宽度和高度

```
public final static int CAMERA_WIDTH = 720;
public final static int CAMERA_HEIGHT = 480; 
```

AndEngine 将为您缩放所有图像，有时您会因为缩放而在屏幕边缘看到一个小黑条。但几乎不引人注目。

```
@Override
public EngineOptions onCreateEngineOptions()
{
    camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(), camera);
    return engineOptions;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-03T20:34:44.303

Replace: new RatioResolutionPolicy(WIDTH, HEIGHT) with: new FillResolutionPolicy ()

this fills up the whole screen.

# c++ - 如何将结构传递给另一个类中定义的 C++ 函数？

> ID：13092697
> 
> 赞同：0
> 
> 时间：2012-10-26T18:51:25.153
> 
> 标签：c++, visual-studio-2010

我有一个这样的课程：-

```
class Con
{
 public:
  struct MachineList
  {
    BSTR AccountId;
    BSTR MachineId;
    BSTR Make;
    char* Make1;
    BSTR Model;
    char* Model1;
    BSTR SerialNumber;
    BSTR IpAddress;
    char* IpAddress1;
    BSTR Port;
    int Port1;
    BSTR LocationCode;
    } machinelist[100] ;
   int w;
 } ; 
```

我创建了一个`Con`类对象`Con m_con;`

我还有一堂课`Test`

```
class Test
{
 public:
  void fun();//i want to pass the object of the structure that i created in Con
  //what arguments should i pass in fun function?
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:58:38.260

Do you want to pass the whole `machinelist` array?

```
void fun(const Con::MachineList (&argument)[100] ); 
```

But easier would be to typedef it:

```
class Con { 
 public:
    struct MachineList{ ... };
    typedef MachineList (Machines)[100];

    Machines machines;
}; 
```

and use

```
void fun(const Con::Machines& m); 
```

To be called like:

```
Con c;
fun( c.machines ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T19:02:53.697

```
class Con {
public:
   struct Machine {
      BSTR  AccountId;
      BSTR  MachineId;
      BSTR  Make;
      char* Make1;
      BSTR  Model;
      char* Model1;
      BSTR  SerialNumber;
      BSTR  IpAddress;
      char* IpAddress1;
      BSTR  Port;
      int   Port1;
      BSTR  LocationCode;
   };
   typedef Machine Machines[100];

   Machines machines;
   int      w;
};

/**
 * passing a reference to a single machine, which fun might change
 */
void fun0( Con::Machine & machine );

/**
 * passing a reference to a single machine, which fun cannot change
 */
void fun1( const Con::Machine & machine );

/**
 * passing a reference to the entire array of machines, which fun may change
 */
void fun2( Con::Machines & machines );

/**
 * passing a reference to the entire array of machines, which fun cannot change
 */
void fun3( const Con::Machines & machines ); 
```

我不明白你想要哪个版本的乐趣，所以我做了四个......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:55:57.607

```
class Test
{
public:
void fun(Con::MachineList);
};

Test t;
Con c;
t.fun(c.machinelist[0]); 
```

目前 Con::MachinList 类型看起来不适合复制，因此您应该定义适当的构造函数和赋值运算符，或者您应该通过声明`fun`as`void fun(Con::MachineList const &);`而不是我上面显示的那样通过引用传递。

MachinList 也可能需要一个适当的析构函数......

# google-apps-script - FormEmailer 正在从我的地址而不是 FormEmailer 发送电子邮件

> ID：13092698
> 
> 赞同：1
> 
> 时间：2012-10-26T18:51:26.723
> 
> 标签：google-apps-script

我已经以同样的方式设置了一年多的formemailer，但从未遇到过这个问题。我没有更改任何内容，但现在它突然开始在发件人字段中使用我的电子邮件地址发送所有表单回复。我该如何解决这个问题，它发生在我们拥有的 3 种不同形式上。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T06:41:14.257

我认为您看到的问题是由于[issue 2004](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2004)造成的。请在问题上加注星标，以便收到更新通知。FormEmailer 可能是这个错误的受害者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T17:01:10.650

我自己也遇到过这个问题，我很高兴地说我知道如何解决这个问题，而且*它确实涉及一些 javascript 编码*。

如果您收到电子邮件，这一定意味着您已经设置了自动触发器（时间驱动）并且您已经设置了将电子邮件发送到您的地址的设置（我假设是为了测试？）如果您有电子邮件您要向其发送电子邮件的地址列，该列应该是占位符引用的列。

要停止向自己发送数千封空白电子邮件，您必须调整代码，以便它知道何时触发！原始代码没有说明何时在自动触发器上停止发送电子邮件。

第 209 行：`var status = c.fs.getRange(2,1,last-1,1).getValues();`

第 209 行在你的监控函数中定义了一个变量。此变量“状态”正在获取指定范围内的值。具体来说，它正在获取当前表单范围。Google 应用程序脚本有 4 种不同的 getRange() 编写方式，本例有 4 个参数，如下所示：`getRange(row, column, numRows, numColumns)`

原始代码是这样说的，“从我当前的表单中，从第二行和第一列开始，一直到最后一行，并为整个一列（第 1 列）执行所有这些操作”。

但是，如果 B:Z 列的第 2:5 行有一些数据（javascript 中为 2:26），而第 6 行及以后的行没有数据怎么办？您的电子邮件将针对第 2:5 行发送，并且您将在第 1 列（javascript）或第 0 列（excel/google 表）中收到第 6:1000 行左右（无论“最后”是什么）的错误消息；换句话说，A 列将更新数百条错误消息，并且根据您的设置，您可能会收到数百封空白电子邮件！

在 getRange() 的最后一个参数处精确更新第 209 行，您可以在其中指定要收集数据的列数。选择您知道*总会*有数据的列，例如如果您使用谷歌表单，则选择时间戳列： var status = c.fs.getRange(2,1,last-1, ***1*** ).getValues() ;

您刚刚设置了一个参考列来检查是否有要通过电子邮件发送的数据！现在，下一个代码是您的 for 循环，它逐行或逐行检查状态。在第 211 行的代码中，您设置了何时运行名为“doIt”的电子邮件函数的条件。

照原样，第 211 行`if( status[i][0] === '' )`说“如果状态，在第一列，等于空白......然后运行函数 doIt”。但是 A 列不是我的数据所在的列！A 列是我的电子邮件状态和错误消息所在的位置。此条件仅阻止重新发送已发送的电子邮件，或阻止发送出现错误的电子邮件。

这是您的 if 语句在第 211 行的样子：

```
if( status[i][0] === '' && status[i][YOUR REFERENCE COLUMN] !== '' )
  doIt_(i+2);
if( status[i][0] === '' && status[i][YOUR REFERENCE COLUMN] === '' )
  return; 
```

此语句是说，“如果我的第一列的状态为空白且我的参考列不为空，则运行我的电子邮件功能 doIt...如果我的第一列的状态为空白且我的参考列为空白，则停止 for环形。”

保存您的代码。您刚刚更新了代码以接受自动触发器！设置您的时间驱动触发器并进行试运行！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T00:27:49.770

谷歌在 CDT 时间 10 月 26 日星期五上午 9:30 左右的某个时间出现了应用引擎故障。我最后一次成功更改名称变量的脚本电子邮件发送是在 2012 年 10 月 25 日晚上 11:33 到 10 月 26 日下午 12:16 之间...

我认为这些事件可能以某种方式相关 - 无论哪种方式，它们都在谷歌的末端......

# doxygen - 更改 html 输出 doxygen 链接

> ID：13092701
> 
> 赞同：0
> 
> 时间：2012-10-26T18:51:36.587
> 
> 标签：doxygen

我正在从事一个使用 doxygen 大量记录的项目。在 UI 中，我有一个所有可用类的列表——我希望能够打开我选择的类的正确文档页面。为了做到这一点，我需要一个易于阅读的链接，这样我就可以动态地构建和运行它。

有什么办法可以控制生成的html文件链接吗？因为我现在拥有的那些是不可能动态构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:13:10.170

您可以为此使用 Doxygen 的标记文件机制（请参阅配置文件中的 GENERATE_TAGFILE）。

标记文件是一个相当容易理解和解析的 XML 文件，它基本上列出了项目中的所有符号，每个符号都有对应的（相对）文档的 URL。

所以你可以从你的 UI 中解析标签文件，以一种健壮的方式解析到 doxygen 生成的文档的链接。

# sql - 如何迭代此 SQL 查询？

> ID：13092702
> 
> 赞同：0
> 
> 时间：2012-10-26T18:51:37.413
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我有这个查询：

```
SELECT TOP 1 A.ExamTemplateId, A.Id AS AnsweredTestId, AVG(B.Score) AS AvgScore, A.[Date]
FROM AnsweredTest AS A
INNER JOIN AnsweredWorksheet AS B ON (A.Id = B.AnsweredTestId)
WHERE A.StudentId = 'OPA-3DKCL2' AND A.ExamTemplateId = 1
GROUP BY A.Id, A.ExamTemplateId, A.[Date]
ORDER BY AvgScore DESC 
```

请检查我是否有`WHERE`收到静态号码的条件。查询结果为：

例 1 ![](../Images/7f5266774b02e9215d011916ab045ae6.png)

例 2 ![在此处输入图像描述](../Images/bca3aa5fcf9de263a0a4597ccc5d4170.png)

这是正确的！但现在，我想显示 ExamTemplate 表中的所有记录。但现在我不知道我该如何做到这一点。我正在考虑创建一个功能，但我不确定，这只是一个想法。

我想收到的最终输出是最后记录的并集：

```
1   1   0.7 2012-10-21 19:50:11.697
2   10  0.555555555555556   2012-10-22 18:58:24.163 
```

提前致谢。

更新：

我用黄色突出显示了我感兴趣的行。我在最后一个查询中设置，`TOP 1`因为我想获得最高平均分`ExamTemplateId`。这就是全部。

![在此处输入图像描述](../Images/06671231daa8ed06448b72a4da280fb9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:54:36.720

听起来您想`A.ExamTemplateId = 1`用值列表替换 。如果是这样，那么您应该能够使用类似于以下内容的内容：

```
SELECT A.ExamTemplateId, 
  A.Id AS AnsweredTestId, 
  AVG(B.Score) AS AvgScore, 
  A.[Date]
FROM AnsweredTest AS A
INNER JOIN AnsweredWorksheet AS B 
  ON (A.Id = B.AnsweredTestId)
WHERE A.StudentId = 'OPA-3DKCL2' 
  AND A.ExamTemplateId IN (SELECT ExamTemplateId -- use a SELECT statement to get all template id
                           FROM ExamTemplateTable)
GROUP BY A.Id, A.ExamTemplateId, A.[Date]
ORDER BY AvgScore DESC 
```

如果你只想要一个值，那么你可以使用这样的东西：

```
select ExamTemplateId,
    AnsweredTestId,
    AvgScore,
    [Date]
from 
(
  select ExamTemplateId,
    AnsweredTestId,
    AvgScore,
    [Date],
    row_number() over(partition by ExamTemplateId order by AvgScore) rn
  from
  (
    SELECT A.ExamTemplateId, 
      A.Id AS AnsweredTestId, 
      AVG(B.Score) AS AvgScore, 
      A.[Date]
    FROM AnsweredTest AS A
    INNER JOIN AnsweredWorksheet AS B 
      ON (A.Id = B.AnsweredTestId)
    WHERE A.StudentId = 'OPA-3DKCL2' 
      AND A.ExamTemplateId IN (SELECT ExamTemplateId -- use a SELECT statement to get all template id
                               FROM ExamTemplateTable)
    GROUP BY A.Id, A.ExamTemplateId, A.[Date]
  ) sc
) mx
where rn = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:54:10.300

使用分区依据。

```
With t AS (
    SELECT A.ExamTemplateId, A.Id AS AnsweredTestId, AVG(B.Score) AS AvgScore, A.[Date] 
    FROM AnsweredTest AS A
    INNER JOIN AnsweredWorksheet AS B ON (A.Id = B.AnsweredTestId)
    WHERE A.StudentId = 'OPA-3DKCL2' --AND A.ExamTemplateId in (...)
    GROUP BY A.Id, A.ExamTemplateId, A.[Date]
)
, w AS (
    SELECT *, 
        ROW_NUMBER() OVER (PARTITION BY ExamTemplateId ORDER BY AvgScore DESC) rank
    FROM t 
)
SELECT * FROM w 
WHERE rank = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:58:04.390

At first I thought you were looking to see all students, but I guess you want over all exam templates - any reason you can't just remove the top 1 filter and take the exam template out of the where? The averages would be computed per-exam template which is I think what you want.

```
SELECT A.ExamTemplateId, A.Id AS AnsweredTestId, AVG(B.Score) AS AvgScore, A.[Date]
FROM AnsweredTest AS A
INNER JOIN AnsweredWorksheet AS B ON (A.Id = B.AnsweredTestId)
WHERE A.StudentId = 'OPA-3DKCL2' 
GROUP BY A.Id, A.ExamTemplateId, A.[Date]
ORDER BY AvgScore DESC` 
```

# mongodb - MongoDB：内存不足

> ID：13092705
> 
> 赞同：3
> 
> 时间：2012-10-26T18:51:57.463
> 
> 标签：mongodb

我想知道 MongoDB 的内存消耗。我已经阅读了相应的手册部分和有关该主题的其他问题，但我认为这种情况有所不同。我可以征求你的意见吗？

这是来自数据库日志文件的错误：

```
Fri Oct 26 20:34:00 [conn1] ERROR: mmap private failed with out of memory. (64 bit build) 
Fri Oct 26 20:34:00 [conn1] Assertion: 13636:file /docdata/mongodb/data/xxx_letters.5 open/create failed in createPrivateMap (look in log for more information) 
```

这些是数据文件：

```
total 4.0G
drwxr-xr-x 2 mongodb mongodb 4.0K 2012-10-26 20:21 journal
-rw------- 1 mongodb mongodb  64M 2012-10-25 19:34 xxx_letters.0
-rw------- 1 mongodb mongodb 128M 2012-10-20 22:10 xxx_letters.1
-rw------- 1 mongodb mongodb 256M 2012-10-24 09:10 xxx_letters.2
-rw------- 1 mongodb mongodb 512M 2012-10-26 10:04 xxx_letters.3
-rw------- 1 mongodb mongodb 1.0G 2012-10-26 19:56 xxx_letters.4
-rw------- 1 mongodb mongodb 2.0G 2012-10-03 11:32 xxx_letters.5
-rw------- 1 mongodb mongodb  16M 2012-10-26 19:56 xxx_letters.ns 
```

这是的输出`free -tm`：

```
 total       used       free     shared    buffers     cached
Mem:          3836       3804         31          0         65       2722
-/+ buffers/cache:       1016       2819
Swap:         4094        513       3581
Total:        7930       4317       3612 
```

是否真的需要有足够的系统内存才能容纳最大的数据文件？为什么要增加这么多文件？（根据上面显示的顺序，我预计下一个文件是 4GB。）我将尝试扩展 RAM，但数据最终会增长得更多。或者这根本不是内存问题？

我有一个 64 位 Linux 系统并使用 64 位 MongoDB 2.0.7-rc1。有足够的磁盘空间，CPU负载为0.0。这是`uname -a`：

```
Linux xxx 2.6.32.54-0.3-default #1 SMP 2012-01-27 17:38:56 +0100 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T19:17:04.247

ulimit -a 解开谜团：

```
core file size (blocks, -c) 1
data seg size (kbytes, -d) unlimited
scheduling priority (-e) 0
file size (blocks, -f) unlimited
pending signals (-i) 30619
max locked memory (kbytes, -l) 64
max memory size (kbytes, -m) 3338968
open files (-n) 1024
pipe size (512 bytes, -p) 8
POSIX message queues (bytes, -q) 819200
real-time priority (-r) 0
stack size (kbytes, -s) 8192
cpu time (seconds, -t) unlimited
max user processes (-u) 30619
virtual memory (kbytes, -v) 6496960
file locks (-x) unlimited 
```

它在将最大内存大小和虚拟内存设置为无限制并重新启动一切后工作。顺便说一句，下一个文件又有 2GB。

很抱歉打扰你，但我很绝望。也许这有助于有人“谷歌搜索”遇到类似问题。

# ruby - 在 Ruby 中定义一个名为“new”的实例方法是否有效/可接受？

> ID：13092706
> 
> 赞同：0
> 
> 时间：2012-10-26T18:52:05.810
> 
> 标签：ruby

当我在 irb 中执行以下操作时，我得到以下输出：

```
>> class TestMe
>>   def new
>>     puts 'hi!'
>>   end
>> end
=> nil
>> TestMe.new.new
hi! 
```

此外：

```
>> class TestMe
>> end
=> nil
>> TestMe.new.new
NoMethodError: undefined method `new' for #<TestMe:0x00000101038750> 
```

但是当我在我选择的文本编辑器中编写一些代码时，它调用了一个名为`new`（但不是实例化新对象的`Object`方法）的实例方法，它会像保留关键字一样突出显示：`new``new`

```
@page = current_user.locations.new 
```

请注意，`locations`这里返回一个委托类，该类执行一些繁重的工作（通过此`new`方法）并最终返回一个`Location.new`实例，其中包含一些准备就绪的基本设置数据，但`new`它本身并没有在类对象上被调用。这是方法名称的可接受使用还是我会遇到问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:01:57.660

The first call to `.new` will invoke the constructor, and return an instance of your class. The second call to `.new` will invoke an instance method on that object. It's completely acceptable to define a `new` instance method.

In order to interfere with the constructor, you would have to define a *class-level* method called `new`. That method can invoke `super#new` (which invokes `Class#new`) to perform the actual creation of the object:

```
class Test
  def self.new
    puts "hi!"
    super
  end
end

x = Test.new # outputs "hi" 
```

It's completely valid to overwrite `new` at both an instance and class level, so long as you define your custom `new` method to do something *sane*.

# javascript - 使用 jquery 打印一个数组并比较 2 个日期

> ID：13092710
> 
> 赞同：0
> 
> 时间：2012-10-26T18:52:24.913
> 
> 标签：javascript, jquery, html

我对这个数组有一些奇怪的问题，我首先要做的是比较地图数组中的两个日期，如果它是真的，那么我会将它附加到容器中，如果它是假的，它不会做任何事情，但是出于某种原因它确实附加了 div 但不附加带有值的 img ;( ，如果我警告变量在那里但它在图像标签中不起作用。

所以继承人我在做什么：

```
var sabiasfechas = {
    '2012-01-02': '2012-12-02',
    '2012-01-02': '2012-12-02'
}
sabiasfotos=new Array(2);
sabiasfotos[0] ='sabias1.jpg';
sabiasfotos[1] ='promo-tablet.jpg';

$.each(sabiasfechas,function(key,value){
        $.each(sabiasfotos,function(otrovalue){
            var fechainisab = Date.parse(key);
             var fechafinalsab = Date.parse(value);
             var fechainicomsab = Date.today().compareTo(fechainisab);
             var fechafincomsab = Date.today().compareTo(fechafinalsab);
            if(fechainicomsab == 1 && fechafincomsab == -1){

                $("#imagenescontent").append("<div class='sombra'><img src='img/" + this+ "'/></div>");
            }
            else{
                console.log("nada")
            }
        })

}) 
```

有任何想法吗？编辑：我忘了关闭 img 标签 LOL tnx btw。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:03:42.783

您的 src 属性末尾没有关闭 '

# r - R提取数据框的所有值并将其组合到一个列表中

> ID：13092711
> 
> 赞同：1
> 
> 时间：2012-10-26T18:52:27.603
> 
> 标签：r

我有以下数据框：

```
 PD4115a PD4088a  PD4192a      
   1 ABCA8   ATRX     ADAM32      
   2 ANK2    CDH9     C11orf30
   3 ANO3    CKAP2L   CCBL2 
```

我想要的是一个包含所有值的列表：

```
 1 ABCA8 ATRX ADAM32 ANK2 CDH9 C11orf30 ANO3CKAP2L CCBL2 
```

请帮帮我，我是R中的菜鸟。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:56:05.667

由于 data.frames “真的” 是一种特殊的列表，您可以使用`unlist()`，如下所示：

```
df <- data.frame(A=letters[1:3], B=letters[4:6], stringsAsFactors = FALSE)
unlist(df)
#  A1  A2  A3  B1  B2  B3 
# "a" "b" "c" "d" "e" "f" 

## To help understand why it works, here are a few ways to see the sense 
## in which data.frames are lists 
is.list(df)         # Ask R
typeof(df)          # Check the storage mode
class(unclass(df))  # Strip off the "data.frame" class attribute 
```

# javascript - localStorage - 使用 getItem/setItem 函数或直接访问对象？

> ID：13092715
> 
> 赞同：54
> 
> 时间：2012-10-26T18:52:43.450
> 
> 标签：javascript, local-storage

与直接访问对象属性相比，使用在 localStorage 对象上定义的方法有什么好处吗？例如，而不是：

```
var x = localStorage.getItem(key);
localStorage.setItem(key, data); 
```

我一直在这样做：

```
var x = localStorage[key];
localStorage[key] = data; 
```

这有什么问题吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-26T19:22:13.313

不是真的，它们基本上是完全一样的。一种使用封装（getter/setter）来更好地保护数据和简单的使用。你应该使用这种风格（为了安全）。

另一个允许在名称（键）未知以及数组和循环时更好地使用。使用`.key()`和`.length`在不知道它们的实际键名的情况下遍历您的存储项目。

我发现这是一个很好的资源：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

这个问题也可能为某些人提供更多见解：[HTML5 localStorage key order](https://stackoverflow.com/questions/8340845/html5-localstorage-key-order)

## 附录：

显然，封装存在一些混淆。看看这个快速的[维基百科](https://en.wikipedia.org/wiki/Encapsulation_(computer_programming))。但说真的，我希望这个网站的用户知道如何用谷歌搜索。

继续前进，封装是指您制作很少的进出门户以与另一个系统进行通信。假设您正在制作一个[API](https://en.wikipedia.org/wiki/Application_programming_interface)包供其他人使用。假设您在该 API 系统中有一组信息，这些信息会通过用户输入进行更新。您可以让 API 的用户直接将该信息放入数组中......使用该`array[key]`方法。或者你可以使用封装。获取将其添加到数组的代码并将其包装在一个函数（例如，a`setArray()`或`setWhateverMakesSense()`函数）中，API 的用户调用该函数来添加此类信息。然后，在此`set`功能中，您可以检查数据是否存在问题，您可以以正确的方式将其添加到数组中，以防您需要以某种方式将其`push`编辑或编辑到数组中......等等。***你***`shift`*控制来自用户的输入如何进入实际程序。因此，它本身不会增加安全性，但允许您（API 的作者）编写安全性。这也允许更好的版本控制/更新，因为如果您决定进行内部更改，您的 API 用户将不必重写代码。但这无论如何都是好的[OOP所固有的。](https://en.wikipedia.org/wiki/Object-oriented_programming)*

 *（因此，为了回应 Natix 在下面的评论......）

这里的javascript和`localStorage`对象的例子，他们已经写了这个API，他们是作者，我们是它的用户。如果作者决定改变`localStorage`工作方式，那么如果使用了封装方法，就不太可能需要重写代码。但我们都知道，这种程度的变化极不可能发生，至少不会很快发生。而且由于作者在这里没有进行任何固有的*不同*安全检查，因此，目前，这两种使用`localStorage`方式基本上是相同的。这有点像垫片。但是，我们可以轻松地覆盖/替换现有的封装`localStorage`来进行我们自己的安全检查。因为 JavaScript 就是这么棒。

PT

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-26T19:02:59.073

我认为它们完全一样，文档中唯一的[说明](https://developer.mozilla.org/en-US/docs/DOM/Storage)是：

> 注意：虽然可以使用标准 JavaScript 属性访问方法设置和读取值，但建议使用 getItem 和 setItem 方法。

但是，如果使用完整的垫片，则说明：

> 使用方法 localStorage.yourKey = yourValue; 并删除 localStorage.yourKey；**使用此代码**设置或删除密钥**不是一种安全的方式** 。

 **和有限的垫片：

> **此代码不允许**使用方法 localStorage.yourKey 来获取、设置或删除密钥。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-13T19:04:25.623

我看到的最大好处之一是我不必在 JSON.parse() 之前检查一个值是否未定义，因为 getItem() 返回 NULL 而不是 undefined。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T20:12:30.137

只要您不使用像 window.localStorage.key 这样的“点表示法”，您可能就可以了，因为它在 Windows Phone 7 中不可用。我没有使用括号进行测试（您的第二个示例）。就我个人而言，我总是使用 set 和 get 函数（你的第一个例子）。***

# php - 在 PHP 中管理多个文件

> ID：13092716
> 
> 赞同：1
> 
> 时间：2012-10-26T18:52:45.853
> 
> 标签：php

我正在测试 php，因为我是这方面的大一新生。我将我的 php 代码放在免费服务器中，他们让我自己编写 index.php，管理一些 php 变量（如 register_globals、magic_quotes_gpc 等。我将它们保留为默认值），但显然我只能处理一个文件中的一个文件php代码，例如：

```
<?php

//--------Updating Data-------------
$cdc = intval($_POST['cantidadDeCapitulos']);
$toWrite = array('ctot' => $cdc);
for($i=1;$i<$cdc+1;$i += 1){
   $toWrite["cap".$i] = $_POST['numdeCap'.$i];
}//---------------------------------

$datos = file_get_contents("myfile.json.");

$toWrite = json_encode( $toWrite );

//Open a file in write mode

$fp = fopen("myfile2.json", "w");

if(fwrite($fp, "$toWrite")) { 
  echo "&verify=success&"; 
} else { 
  echo "&verify=fail&"; 
}
fclose($fp);
?> 
```

如果我注释掉这行`$datos = file_get_contents("myfile.json.");`，没关系！，在 myfile2.json 中写入了一些内容，但如果未注释，则数据不会更新。这两个文件的权限为 666，并且它们位于同一目录中，即 /root。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:56:30.097

```
$datos = file_get_contents("myfile.json."); 
```

好像出现了错别字。从文件中取下最后一个点。我的意思是，将行更改为：

```
$datos = file_get_contents("myfile.json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:34:41.170

尝试这个：

```
<?php
$file = 'myfile.json';
// Open the file to get existing content

$current = file_get_contents($file);

// Write the contents back to the file
file_put_contents($file, $current);
?> 
```

# sql - 没有窗口函数的行编号

> ID：13092718
> 
> 赞同：3
> 
> 时间：2012-10-26T18:53:01.150
> 
> 标签：sql, postgresql, postgresql-8.2

在 Postgresql 8.2 中，我想对行进行顺序编号。我`t`在[SQL Fiddle](http://www.sqlfiddle.com/#!10/f1f0d/1)有一张桌子：

```
 c 
   ---
    3
    2 
```

我要这个：

```
 c | i 
   ---+---
    2 | 1
    3 | 2 
```

我试过这个：

```
select *
from
    (select c from t order by c) s
    cross join
    generate_series(1, 2) i 
```

并得到：

```
 c | i 
   ---+---
    2 | 1
    3 | 1
    2 | 2
    3 | 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:27:26.683

我唯一能想到的就是一个序列。你可以这样做：

```
drop sequence if exists row_numbers;
create temporary sequence row_numbers;

select next_val('row_numbers'), dt.c
from (select c from t order by c) as dt; 
```

我也会加入`drop sequence row_numbers`，但`temporary`如果你忘记了，应该注意这一点。

这有点麻烦，但是您可以将其包装在一个函数中以隐藏一些丑陋。

请记住，8.2 不再受支持，但 8.4 支持且 8.4 具有窗口函数。

* * *

参考文献（8.2 版本）：

*   [创建序列](http://www.postgresql.org/docs/8.2/static/sql-createsequence.html)
*   [删除序列](http://www.postgresql.org/docs/8.2/static/sql-dropsequence.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:26:23.570

您可以使用“三角连接”，如下所示：

```
select a.c, (select count(*) from t where c <= a.c) as i
from t as a
order by i 
```

但是，这假定 的值`c`是唯一的，因为“行编号”方案只是对小于或等于当前行的行的计数。如有必要，这可以扩展为包括一个主键或其他用于平局的唯一列。

此外，以这种方式加入可能会对[性能产生一些影响。](http://www.sqlservercentral.com/articles/T-SQL/61539/)

# javascript - 如何将数据从隔离范围传递到父范围？

> ID：13092720
> 
> 赞同：5
> 
> 时间：2012-10-26T18:53:01.793
> 
> 标签：javascript, angularjs

我对使用 AngularJS 相当陌生，我想做的是创建一个指令并从其中的父范围调用函数。我能够做到这一点，但我似乎无法弄清楚如何通过表达式将数据从隔离范围传递到父范围。Angular Developer guide 中对此的解释有点混乱。

指令：

```
app.directive('myDir', function() {
    return {
        restrict: 'E',
        template: '<div ng-click="parentFunc(someValue)"><div>', 
        scope: {
           parentProp: '=property',
           parentFunc: '&func'
        },
        link: function(scope, element, attrs) {

        }
    }
}); 
```

标记：

```
<my-dir prop="foo" func="bar(someValue)"></my-dir> 
```

控制器：

```
app.controller('TstCtrl', function($scope) {
    $scope.foo = 'test';
    $scope.bar = function(value) {
       console.log(value);
    };
}); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T19:01:14.077

There may be other ways to do this but see [this fiddle](http://jsfiddle.net/CvzEk/1/) where you would pass in an object to the function using the same parameter names passed into your `func` attribute.

```
 link: function(scope, element, attrs) {
        scope.parentFunc({someValue:'testing'});            
    } 
```

So in this case since you called `bar(someValue)` in your `func` attribute you would want to pass in an object with `someValue` in your link function. You're calling `parentFunc` because that's what `&func` is linked to in your isolate scope.

# javascript - 如何在使用 ajax 时将 javascript 对象传递给 PHP 文件

> ID：13092725
> 
> 赞同：2
> 
> 时间：2012-10-26T18:53:14.820
> 
> 标签：javascript, object, serialization

我有一个 javascript 对象，我想在使用 jQuery 的 ajax 实现时将其传递给 PHP 文件。

我试图直接将它传递给它，但这不起作用，因为它没有被转义或任何东西。我试过使用 JSON.stringify 但这对我也不起作用。

有没有办法将 javascript 对象“序列化”为 POST 字符串？

更新，我再次使用 JSON.stringify() 。结果是：

JSON.stringify() 的结果是：

```
{\"label\":\"Borne, Overijssel, Nederland\",\"value\":\"Borne, Overijssel, Nederland\",\"geocode\":{\"address_components\":[{\"long_name\":\"Borne\",\"short_name\":\"Borne\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Borne\",\"short_name\":\"Borne\",\"types\":[\"administrative_area_level_2\",\"political\"]},{\"long_name\":\"Overijssel\",\"short_name\":\"OV\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Nederland\",\"short_name\":\"NL\",\"types\":[\"country\",\"political\"]}],\"formatted_address\":\"Borne, Nederland\",\"geometry\":{\"bounds\":{\"ca\":{\"b\":52.2832527,\"f\":52.3151634},\"ea\":{\"b\":6.688658900000064,\"f\":6.801415300000031}},\"location\":{\"Ya\":52.3002366,\"Za\":6.753725799999984},\"location_type\":\"APPROXIMATE\",\"viewport\":{\"ca\":{\"b\":52.2832527,\"f\":52.3151634},\"ea\":{\"b\":6.688658900000064,\"f\":6.801415300000031}}},\"types\":[\"locality\",\"political\"]}} 
```

当我执行`json_decode`它时，结果为 NULL。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:58:53.720

If your passing an object as a string thats in legitmate JSON format, to PHP try using

`json_decode()` on the php side of things. Example

```
<?php
   $ojb = json_decode($_POST['my_json_string']);
?> 
```

What this will do is turn your object into an array or object depending on which version of PHP you are using, and in some cases the object will turn into an array with multiple objects in it.. example:

```
Array(
    [0] stdClass (
            'key1'=>'val1'
            'key2'=>'val2'
            'key3'=>'val3'
         )
) 
```

which I know the above isnt a good representation, but its a representation in the lines there of.

After that PHP side you can work with the variable `$ojb` like any other array/object.

```
$something = $ojb[0]->key1; 
```

**EDIT** I notice your string now. The fact that the quotes are escaped in the string, breaks the fact that its a JSON object, with that you can do one of two things.. Either just pass the object to PHP through your post/get as is, without running it through strigify or.. you could try on the PHP side, if there is a need to strigfy it..

`$ojb = stripslashes($_POST['my_json_string']); $ojb = json_decode($ojb);`

which will attempt to remove the slashes from the quotes, before putting it through the decode process.

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:13:34.513

您可以指定 POST 请求的**原始正文**。原始数据将是`JSON.stringify`调用的结果，这意味着您应该指定适当的`Content-Type`标头。

```
$.ajax(url, {
  type: 'POST',
  contentType: 'application/json',
  data: JSON.stringify(data),
  processData: false // prevent escaping and other processing
}); 
```

然后，您可以像这样在 PHP 中反序列化对象：

```
$json = file_get_contents('php://input');
$data = json_decode($json); 
```

原始请求正文映射到特殊路径`php://input`

# json - 使用 GSON 将 Java 对象转换为 JSON 会导致 stackoverflow 错误

> ID：13092727
> 
> 赞同：3
> 
> 时间：2012-10-26T18:53:24.950
> 
> 标签：json, gson

我正在尝试使用 GSON 将列表格式的 java 对象转换为 JSON，我尝试了几种方法，但遇到了同样的错误。

### 第一次尝试

```
List<Techinv> techs = UserUtil.getTechModels(group, org);
Gson gson = new Gson();
String json = gson.toJson(techs); 
```

### 第二次尝试

```
List<Techinv> techs = UserUtil.getTechModels(group, org);
Type listType = new TypeToken<List<Techinv>>() {}.getType();
Gson gson = new Gson();
String json = gson.toJson(techs, listType); 
```

### 第三次尝试

```
List<Techinv> techs = UserUtil.getTechModels(group, org);
GsonBuilder gsonBuilder = new GsonBuilder();

new GraphAdapterBuilder()
    .addType(Techinv.class)
    .registerOn(gsonBuilder);
Gson gson = gsonBuilder.create();
String json = gson.toJson(techs); 
```

以上所有都失败了，a`stackoverflow error`或 a `can't convert java int`（我的 Techinv 类中的成员之一）到 java 向量，都在 GSON 库中。

请告诉我，我在所有这些示例中都遗漏了一些简单的东西:)

### 技术类（如果需要）

```
package org.cchit.inv.model;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.Lob;
import javax.persistence.ManyToOne;
import javax.persistence.NamedNativeQueries;
import javax.persistence.NamedNativeQuery;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

/**
 * The persistent class for the techinv database table.
 * 
 */
@Entity
@NamedNativeQueries ({
    @NamedNativeQuery(name="Techinv.deleteByOrgId",
            query="DELETE FROM techinv where org_id = ?")
})
@NamedQueries ({
    @NamedQuery(name="Techinv.removeUser",
            query="UPDATE Techinv t SET user_id = 0 where t.id = :techid"),
    @NamedQuery(name="Techinv.getAllByOrg",
            query="SELECT p FROM Techinv p where p.organization.liferayId = :orgid"),
    @NamedQuery(name="Techinv.getById",
            query="SELECT t FROM Techinv t where t.id = :id"),
    @NamedQuery(name="Techinv.getByProdOrg",
            query="SELECT p FROM Techinv p where p.organization.liferayId = :orgid and p.product.id = :prodid"),
    @NamedQuery(name="Techinv.delete",
            query="DELETE FROM Techinv t where t.id = :id")
    })
@Table(name="techinv")
public class Techinv implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue(strategy=GenerationType.IDENTITY)
    private int id;

    @Column(name="mu_mask")
    private long muMask;

    @Column(name="mu_assigned_mask")
    private long muAssignedMask;

    @Column(name="mu_asked_assign_mask")
    private long muAskedAssignedMask;

    @Column(name="mu_cert_mask")
    private long muWillCertMask;

    @Column(name="mu_ask_will_cert_mask")
    private long muAskedWillCertMask;

    @Column(name="certType")
    private String certType;

    @Temporal(TemporalType.DATE)
    @Column(name="Apply_date")
    private Date applyDate;

    @Temporal(TemporalType.DATE)
    @Column(name="Cert_date")
    private Date certDate;

    @Lob()
    private String notes;

    //bi-directional many-to-one association to OrgUser
    @ManyToOne
    @JoinColumn(name="user_id")
    private OrgUser orgUser;

    //bi-directional many-to-one association to Organization
    @ManyToOne
    @JoinColumn(name="org_id")
    private Organization organization;

    //bi-directional many-to-one association to Product
    @ManyToOne
    @JoinColumn(name="prod_id")
    private Product product;

    //bi-directional many-to-one association to Certification
    @ManyToOne
    @JoinColumn(name="cert_id")
    private Certification certification;

    public void setCertification(Certification certification) {
        this.certification = certification;
    }

    public Product getProduct() {
        return product;
    }

    public void setProduct(Product product) {
        this.product = product;
    }

    public Techinv() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getNotes() {
        return this.notes;
    }

    public void setNotes(String notes) {
        this.notes = notes;
    }

    public OrgUser getOrgUser() {
        return this.orgUser;
    }

    public void setOrgUser(OrgUser orgUser) {
        this.orgUser = orgUser;
    }

    public Organization getOrganization() {
        return this.organization;
    }

    public void setOrganization(Organization organization) {
        this.organization = organization;
    }

    public long getMuMask() {
        return muMask;
    }

    public void setMuMask(long muMask) {
        this.muMask = muMask;
    }

    public long getMuAssignedMask() {
        return muAssignedMask;
    }

    public void setMuAssignedMask(long muAssigned) {
        this.muAssignedMask = muAssigned;
    }

    public Certification getCertification() {
        return certification;
    }

    public long getMuWillCertMask() {
        return muWillCertMask;
    }

    public void setMuWillCertMask(long muWillCertMask) {
        this.muWillCertMask = muWillCertMask;
    }

    public long getMuAskWillCertMask() {
        return muAskedWillCertMask;
    }

    public void setMuAskedWillCertMask(long muAskedWillCertMask) {
        this.muAskedWillCertMask = muAskedWillCertMask;
    }

    /**
     * This will set the question to true. Once asked and answered, this cannot be unset.
     * @param mu
     */
    public void setMuAskedAssignedMask(Mu mu) {
        this.muAskedAssignedMask |= mu.getMask();
    }

    public boolean isCertified(Mu mu) {
        return getCertification() != null && (getCertification().getMuMask() & mu.getMask()) > 0;
    }

    public boolean isAssigned(Mu mu) {
        return (getMuAssignedMask() & mu.getMask()) > 0;
    }

    public boolean hasAskedToCertify(Mu mu) {
        return isAssigned(mu) && !isCertified(mu) && (getMuAskWillCertMask() & mu.getMask()) > 0;
    }

    public boolean isWillCertify(Mu mu) {
        return hasAskedToCertify(mu) && (getMuWillCertMask() & mu.getMask()) > 0;
    }

    public boolean hasMu(Mu mu) {
        return (getMuMask() & mu.getMask()) > 0;
    }

    public boolean hasAskedToAssign(Mu mu) {
        return (muAskedAssignedMask & mu.getMask()) > 0;
    }

    public String getCertType() {
        return certType;
    }

    public void setCertType(String certType) {
        this.certType = certType;
    }

    public Date getApplyDate() {
        return applyDate;
    }

    public void setApplyDate(Date applyDate) {
        this.applyDate = applyDate;
    }

    public Date getCertDate() {
        return certDate;
    }

    public void setCertDate(Date certDate) {
        this.certDate = certDate;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:01:29.130

You should check for circular references in your serialized classes and mark the appropriate properties @Transient. Post your TechModel class if you want help with that.

edit: as using @Transient is not an option for you , use Gson's @Expose . From the [GSON user guide](https://sites.google.com/site/gson/gson-user-guide) :

> This feature provides a way where you can mark certain fields of your objects to be excluded for consideration for serialization and deserialization to JSON. To use this annotation, you must create Gson by using new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create(). The Gson instance created will exclude all fields in a class that are not marked with @Expose annotation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:59:26.413

```
Type listType = new TypeToken<ArrayList<Techinv>>() {}.getType(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T21:46:11.793

You may try out the standard implementation of the [Java API for JSON processing](https://jsonp.java.net/index.html) which is part of [J2EE](http://docs.oracle.com/javaee/7/tutorial/doc/jsonp.htm).

I don't have access to your beans `OrgUser`, `Organization`, `Product`, and `Certification`. So I assume that each of them comprises an `id` and a `name`.

For your `List<Techinv> techList`.

```
final SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");

List<Techinv> techList = new ArrayList<Techinv>();
for (int i = 1; i <= 3; i++) {
    Techinv tech = new Techinv(i, 1L, 2L, 3L, 4L, 5L, "cert",
            new Date(), new Date(), "notes", new OrgUser(i, "orguser"),
            new Organization(i, "organization"), new Product(i,
                    "product"), new Certification(i, "certification"));
    techList.add(tech);
}
Techinv[] techArr = techList.toArray(new Techinv[techList.size()]);

JsonArrayBuilder techArrBuilder = Json.createArrayBuilder();
for (Techinv tech : techArr) {
    JsonObjectBuilder jsonObject = Json.createObjectBuilder()
        .add("id", tech.getId())
        .add("muMask", tech.getMuMask())
        .add("muAssignedMask", tech.getMuAssignedMask())
        .add("muAskedAssignedMask", tech.getMuAskedAssignedMask())
        .add("muWillCertMask", tech.getMuWillCertMask())
        .add("muAskedWillCertMask", tech.getMuAskedWillCertMask())
        .add("certType", tech.getCertType())
        .add("applyDate", sdf.format(tech.getApplyDate()))
        .add("certDate", sdf.format(tech.getCertDate()))
        .add("notes", tech.getNotes())

        .add("OrgUser", Json.createObjectBuilder()
        .add("id", tech.getOrgUser().getId())
        .add("name", tech.getOrgUser().getName()))

        .add("Organization", Json.createObjectBuilder()
        .add("id", tech.getOrganization().getId())
        .add("name", tech.getOrganization().getName()))

        .add("Product", Json.createObjectBuilder()
        .add("id", tech.getProduct().getId())
        .add("name", tech.getProduct().getName()))

        .add("Certification", Json.createObjectBuilder()
        .add("id", tech.getCertification().getId())
        .add("name", tech.getCertification().getName()));
    techArrBuilder.add(jsonObject);
}
JsonArray jsonArray = techArrBuilder.build();

Map<String, Object> prop = new HashMap<String, Object>() {
    {
        put(JsonGenerator.PRETTY_PRINTING, true);
    }
};
JsonWriter jsonWriter = Json.createWriterFactory(prop).createWriter(System.out);
jsonWriter.writeArray(jsonArray);
jsonWriter.close(); 
```

The output should be:

```
[
    {
        "id":1,
        "muMask":1,
        "muAssignedMask":2,
        "muAskedAssignedMask":3,
        "muWillCertMask":4,
        "muAskedWillCertMask":5,
        "certType":"cert",
        "applyDate":"2014-04-03",
        "certDate":"2014-04-03",
        "notes":"notes",
        "OrgUser":{
            "id":1,
            "name":"orguser"
        },
        "Organization":{
            "id":1,
            "name":"organization"
        },
        "Product":{
            "id":1,
            "name":"product"
        },
        "Certification":{
            "id":1,
            "name":"certification"
        }
    },
    {
        "id":2,
        "muMask":1,
        "muAssignedMask":2,
        "muAskedAssignedMask":3,
        "muWillCertMask":4,
        "muAskedWillCertMask":5,
        "certType":"cert",
        "applyDate":"2014-04-03",
        "certDate":"2014-04-03",
        "notes":"notes",
        "OrgUser":{
            "id":2,
            "name":"orguser"
        },
        "Organization":{
            "id":2,
            "name":"organization"
        },
        "Product":{
            "id":2,
            "name":"product"
        },
        "Certification":{
            "id":2,
            "name":"certification"
        }
    },
    {
        "id":3,
        "muMask":1,
        "muAssignedMask":2,
        "muAskedAssignedMask":3,
        "muWillCertMask":4,
        "muAskedWillCertMask":5,
        "certType":"cert",
        "applyDate":"2014-04-03",
        "certDate":"2014-04-03",
        "notes":"notes",
        "OrgUser":{
            "id":3,
            "name":"orguser"
        },
        "Organization":{
            "id":3,
            "name":"organization"
        },
        "Product":{
            "id":3,
            "name":"product"
        },
        "Certification":{
            "id":3,
            "name":"certification"
        }
    }
] 
```

# java - 将图表添加到缓冲区

> ID：13092729
> 
> 赞同：0
> 
> 时间：2012-10-26T18:53:30.283
> 
> 标签：java, jsp, jfreechart

我在 struts2.in 中创建了 web 项目，我使用我在 Action 类中实现的 jfreechart 绘制了一个图表。

[http://www.java2s.com/Code/Java/Chart/JFreeChartTimeSeriesDemo10withperminutedata.htm](http://www.java2s.com/Code/Java/Chart/JFreeChartTimeSeriesDemo10withperminutedata.htm)

它在我用谷歌搜索的单独的小程序类型的窗口中显示图表，并找到一种方法将此图表保存为图像，以便在我的 jsp 文件中包含此图像。但是在部署的最后，我不得不将我的项目转换为 WAR 文件，但是如果我将项目转换为 WAR，我无法访问根据用户请求更改的图像（图形）。所以我想保存图表/图像在缓冲区或其他东西中，以便稍后在请求新图形或用户注销时将其删除。

那么您能否就如何实现这一点给出一些想法。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:17:03.440

我写了一些类似于你正在尝试做的事情。我实现这一点的方法是拥有第二个 servlet（非常简单），它根据请求的图表接收参数并将图表生成为`PNG`. 基本上，您使用所需的参数调用 servlet。您获取这些参数并构建图表。返回图表的重要部分发生在`ChartUtilities.writeChartAsPNG(out, chart, 640, 480)`第一个参数是对调用页面的响应的输出流中。第二个参数是您构建的图表。最后两个参数用于图像的大小。当您调用此 servlet 时，它将位于

```
<img src="URL_to_Servlet" /> 
```

使用包含构建图表所需参数的 URL。

下面是您将需要的代码，仅专注于将图表作为动态构建的图像从`Servlet`.

```
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;

public class ChartServlet extends HttpServlet {

    /*
     * (non-Javadoc) @see
     * javax.servlet.http.HttpServlet#doGet(
     * javax.servlet.http.HttpServletRequest,
     * javax.servlet.http.HttpServletResponse)
     */
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
        JFreeChart chart = this.generateLineChart();
        ServletOutputStream out = resp.getOutputStream();
        resp.setContentType("image/png");
        ChartUtilities.writeChartAsPNG(out, chart, 640, 480);
        out.close();
    }

    /**
     * Generate chart.
     *
     * @return the j free chart
     * @throws IOException Signals that an I/O exception has occurred.
     */
    private JFreeChart generateLineChart() throws IOException {

        return chart;
    }

    /*
     * (non-Javadoc) @see javax.servlet.GenericServlet#init()
     */
    @Override
    public void init() throws ServletException {
        // TODO Auto-generated method stub
        System.out.println("Starting up charts servlet.");
    }
} 
```

# c# - 跨类的某些实例而不是其他实例的静态/共享变量

> ID：13092736
> 
> 赞同：3
> 
> 时间：2012-10-26T18:54:15.083
> 
> 标签：c#, .net, vb.net

这可能只是我表现出我缺乏知识/糟糕的编程实践，但我很想知道：a）这已经存在 b）如果它不存在，如果这样做是不好的编程实践

但这是我的问题：

假设我有一个类，我们称它为“计算机”，它保存公司中所有计算机的数据。现在，碰巧这家公司拥有数千台戴尔计算机和数千台惠普，仅此而已。（再次请坚持我，这只是一个例子来说明我的观点）

现在，我可以如下定义我的类：

```
Public Class Computer

Dim Type as string
Dim SerialNumber as string
Dim User as String
...

End Class 
```

现在，在我的代码中，我创建了两个列表：

```
Dim DellComps as new list(of computer)
Dim HPComps as new list(of computer) 
```

显然，对于`DellComps`，他们都将拥有`.Type = "Dell"`，对于`HPComps`，所有人都将拥有`.Type = "HP"`

现在，我知道我可以很容易地在构造函数中设置这个变量，但我想知道是否有更聪明的方法来在类中声明变量 - 类似于 VB Shared / C# Static 语句，其中类的所有实例共享同一个变量。

我的想法是：

1.  继承类并在子类中创建共享变量
2.  保持原样并在构造函数中声明 Type var
3.  也许这可以通过接口以某种方式完成
4.  最有可能 - 我只是不知道的事情

谢谢，我希望我的要求是有道理的！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T19:05:10.997

您最接近的事情是使用[abstract](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx)关键字。您将有一个抽象类`Computer`，然后将被具体的子类`DellComputer`和覆盖`HpComputer`。一个粗略的（C#）示例是：

```
public abstract class Computer
{
    public string Type { get; protected set; }
}

public class DellComputer : Computer 
{
    public DellComputer()
    {
       this.Type = "Dell"
    }
} 
```

您通常不希望在大量实例之间共享单个变量，因为这会破坏封装，并且在尝试对代码进行单元测试时更现实地可能会成为一个大问题。因此，您所说的纯粹形式并不是一个非常好的主意，但实际用例非常普遍，并且绝对受支持。

编辑：作为下面评论的一部分，这是一种使用非常密切相关的[虚拟](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.71%29.aspx)关键字的不同方法！

```
public abstract class Computer
{
    public virtual string Type { get; }
}

public class DellComputer : Computer 
{
    public override string Type 
    {
        get {
           return "Dell";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:58:41.130

如果您总是在构造函数中设置一个标志来指示计算机的类型（这不是典型的业务对象场景，可以编辑类型），那么您很可能可以使用子类真正解决您的问题。

子类计算机以创建 DellComputer 和 HpComputer 类。

在创建每种计算机类型的列表时，一种方法是拥有所有计算机的主列表，并使用 Linq 的[Enumerable.OfType(TResult)](http://msdn.microsoft.com/en-us/library/bb360913.aspx)来选择与您感兴趣的类型匹配的实例。

如果您确实希望在创建类后可以编辑类的类型，请改为提供一个属性来修改计算机的类型。为方便起见，您可以提供一个也设置属性的构造函数重载（尽管我个人会回避）。如果这样做，请让构造函数重载使用该属性来设置类型。

**更新**

工厂模式可能是什么样子的示例。

```
public abstract class Computer
{
    public virtual string Type { get; }
}

public class DellComputer : Computer 
{
    public override string Type 
    {
        get { return "Dell"; }
    }
}

public class HpComputer : Computer 
{
    public override string Type 
    {
        get { return "HP"; }
    }
}

// Here I'm using an enum to indicate the type desired.  You might use a string
// or anything else that makes sense in your problem domain.

public enum ComputerType
{
    Dell = 1,
    Hp = 2
}

public class ComputerFactory
{
    public Computer Create(ComputerType type)
    {
        switch (type)
        {
            case ComputerType.Dell:
                return new DellComputer();
            case ComputerType.Hp:
                return new HpComputer();
            default:
                throw new InvalidArgumentException();
        }
    }
}

// Usage would be something like:

List<Computer> computers = new List<Computer>();
computers.Add(ComputerFactory.Create(ComputerTypes.Dell);
computers.Add(ComputerFactory.Create(ComputerTypes.Dell);
computers.Add(ComputerFactory.Create(ComputerTypes.Hp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:00:35.637

您可以创建一个具有集合和其他数据的类。在这种情况下，PC 将没有类型。

```
public class Computers 
{
     private List<Computer> pcs= new List<computer>();

     public List<Computer> PCs get { return { pcs; } };

     public String Brand { get; private set; }

     public Computers(string brand) {Brand = brand;}
} 
```

关于静态变量。您不希望班级的所有成员共享品牌。

有了上面所说的，只需重复构造函数中的数据。
如果戴尔具有与 HP 相同的属性，那么我将使用相同的类。
如果你说购买一个新品牌，你真的想创建一个新的类或子类吗？
如果您想要一个结构化的品牌列表，那么我会使用 Enum 而不是每个品牌的单独类。

# .net - .NET 事件的签名

> ID：13092737
> 
> 赞同：4
> 
> 时间：2012-10-26T18:54:15.910
> 
> 标签：.net

> **可能重复：**
> [为什么 C# 中的事件应该采用 (sender, EventArgs)？](https://stackoverflow.com/questions/104674/why-should-events-in-c-sharp-take-sender-eventargs)

我刚刚在一个项目上运行了 VS2012 代码分析工具，发现它抱怨这个片段：

```
public delegate void PerMbHandler(long totalMb);

public event PerMbHandler NotifyMegabyteIncrement; 
```

> CA1009 将“MyWebClient.PerMbHandler”的第二个参数声明为 EventArgs，或扩展 EventArgs 的类型的实例，名为“e”。

[MSDN 解释](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CA1009%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)：

> 事件处理程序方法采用两个参数。第一个是 System.Object 类型，名为“发送者”。这是引发事件的对象。第二个参数的类型为 System.EventArgs，名为“e”。这是与事件关联的数据。例如，如果每次打开文件时都会引发事件，则事件数据通常包含文件的名称。

MSDN 只说明了约定是什么，而不是它存在的原因。

使用*long*参数而不是*EventArgs*的子类会出现什么问题？这是约定和程序员期望的问题，还是必须遵循该模式的一些微妙的技术原因？我说微妙，因为代码似乎工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T19:13:28.967

> 使用长参数而不是 EventArgs 的子类会出现什么问题？

**Event Args**
本身并没有错，但它不可扩展。为了争论，也许在 6 个月内你需要传递两个 long，或者添加一个字符串，或者添加一个完整的信息列表。在`EventArgs`签名中，您可以传递任何派生类型而不会破坏现有消费者；使用特定的值类型，您将受到很大限制。

EventArgs 还允许您与引发事件的类进行通信，例如`CancelEventArgs`.

**发件人**
老实说，我很少将发件人用于任何事情。它也可能有点模棱两可。例如，由输入到文本框触发的控件上的自定义事件......谁是发件人？文本框（可能更有用），还是声明自定义事件的控件？

尽管如此，它仍然是一个熟悉的约定，并且具有良好记录的界面，它可能很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T19:28:49.037

什么都不会出错，事件和事件处理程序签名经过严格的类型检查。消息所做的只是警告你减速带，这会给另一个使用你的事件的程序员，对为什么事件有如此不寻常的签名感到困惑。减速带会产生错误，例如程序员坚持需要获取*发送者*所产生的错误。

请记住 FxCop（又名“代码分析”）试图做什么。它不检查错误，这是编译器的工作。它可以让您知道您可能没有想到的事情。正因为如此，它有时会有点烦人，尤其是当它谈论 CAS 或不恰当地标记臭名昭著的 CA2000 时。但这肯定是一个很好的警告，你没有想到。

# php - 如何从 PHP 脚本访问远程 SQL Server

> ID：13092745
> 
> 赞同：0
> 
> 时间：2012-10-26T18:55:05.173
> 
> 标签：php, sql, database, web

> **可能重复：**
> [PHP 致命错误：调用未定义函数 mssql_connect()](https://stackoverflow.com/questions/9986804/php-fatal-error-call-to-undefined-function-mssql-connect)

我正在开发一个访问远程 SQL 服务器数据库的轻量级 PHP 应用程序。

到目前为止，我无法通过我的 PHP 脚本设置与 SQL Server db 的连接。

当我尝试连接到 sql DB 时，我不断收到此错误：

```
Fatal error: Call to undefined function mssql_connect() 
```

我也尝试时遇到类似的`sqlsrv_connect($myServer, $myUser, $myPass)`错误

**这是我已经尝试过的：**

我在网上搜索了几个小时的解决方案，但没有任何效果。

[我从http://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)下载了驱动程序 并将它们解压缩到 php/ext 文件夹中

修改 php.ini 以添加新下载的驱动程序行：

```
extension=php_sqlsrv_54_ts.dll
extension=php_pdo_sqlsrv_54_ts.dll

[sqlsrv]
sqlsrv.LogSubsystems = 1
sqlsrv.LogSeverity = 1
sqlsrv.WarningReturnAsErrors = 0 
```

重新启动 Apache 服务器

但是，**请参阅 phpinfo() 输出，其中没有 sqlserv** [http://bit.ly/TkMC6V](http://bit.ly/TkMC6V)

正如你所知，我正在通过安装 EasyPHP 在我的 Windows 机器上开发它。该网站将部署在 Unix 机器上。我试图在 Windows 和 Unix 机器上通过 php 连接 sql server，但没有成功。

版本信息：

```
SQL Server 9.0.5000    
PHP ver 5.4.6    
Apache 2.4 
```

我只是没有在我的 phpinfo() 中得到 sqlsrv，正如这个问题[PHP Fatal error: Call to undefined function mssql_connect()中提到的那样](https://stackoverflow.com/questions/9986804/php-fatal-error-call-to-undefined-function-mssql-connect)

除了我上面概述的之外，还有其他方法来安装驱动程序吗？

如果您需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:55:03.873

[通过仔细查看phpInfo()](http://bit.ly/TkMC6V)输出，我发现了问题

```
Loaded Configuration File   C:\Program Files (x86)\EasyPHP-12.1\apache\php.ini 
```

我正在修改 php 目录中的 php.ini。但是，我需要修改 apache 目录中的那个

我可以删除这个愚蠢的问题。但是，我认为这可能对面临类似问题的人有所帮助。

天哪，我在这个愚蠢的问题上花了 4 个小时。:)

# linux - 执行 npm install -g 时会发生什么

> ID：13092747
> 
> 赞同：3
> 
> 时间：2012-10-26T18:55:13.963
> 
> 标签：linux, node.js

这是一个非常新手的问题。但我真的无法通过谷歌搜索找到它。我想了解执行时会发生什么

```
 sudo npm install -g "node module name" 
```

我知道正确的模块通常会安装到 /usr/local/.... 但是，为什么这会在全球范围内可用？

例如，我在项目中本地安装了**node-inspector 。**但是当我输入“node-inspector”时，我的 shell 不明白。

但是一旦我在全球范围内安装它，

> 节点检查器 &

命令将为我做正确的事情。我真的很想了解这是怎么发生的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:00:58.740

Quoting [the npm's doc](https://npmjs.org/doc/folders.html):

> *   Local install (default): puts stuff in `./node_modules` of the current package root.
> *   Global install (with `-g`): puts stuff in `/usr/local` or wherever node is installed.
> *   Install it locally if you're going to `require()` it.
> *   Install it globally if you're going to run it **on the command line**.
> *   If you need **both**, then install it in both places, or use `npm link`.

It's quite a short description (which, I suppose, is still enough to see the difference), but the linked page describes the whole process of installing modules with `npm` in more details. )

# scala - 如何以函数式的方式编写 Scala——案例类和不变性等等？

> ID：13092759
> 
> 赞同：-1
> 
> 时间：2012-10-26T18:56:05.003
> 
> 标签：scala, functional-programming

我在现场观看了一个演讲，有人说他们在工作中正在使用 Scala 功能，他们使用案例类，将类型转换为另一种类型，无处不在的不变性等等。

这实际上是如何工作的？我很想看到一个带有纯函数方法的简单的 hello world 应用程序。

我也看不出我怎么能完全摆脱它，`var`因为有时我只是需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T19:05:51.497

Coursera上有一个[课程就是这样。](https://class.coursera.org/progfun-2012-001/class/index)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:01:42.363

“Hello world”并不是很好地展示函数式方法，因为它没有任何函数式。（事实上​​，正如@delnan 所指出的，写入标准输出被认为是一种副作用，所以这个程序永远不能成为纯粹的函数式。）

您需要的最可能原因`var`是使用命令式循环，这确实不是函数式方法。等效的功能是在集合上使用一些可用的过滤器/转换函数，或者使用递归。

简单示例：查找列表中以“F”开头的所有字符串。命令式风格（Java）：

```
List<String> result = new ArrayList<String>();

for (String s : strings) {
  if (s.startsWith("F")
    result.add(s);
} 
```

使用旧式迭代器循环时，命令性会更加明显。

相比之下，功能风格可能是这样的：

```
val result = strings.filter(_.startsWith("F")) 
```

# ruby - 为什么 Ruby Qt 时钟不更新？

> ID：13092762
> 
> 赞同：0
> 
> 时间：2012-10-26T18:56:16.530
> 
> 标签：ruby, qt

我正在尝试在 Ruby Qt 中编写一个自定义时钟小部件`gem install qtbindings`时钟应该每秒更新一次当前时间。它没有，代码看起来很完美，为什么这不起作用？

```
require "Qt4"

class ClockLabel < Qt::Label
    attr_accessor :timer
    def initialize(date_format = '%Y-%d-%mT%H:%M:%S')
        super()
        @date_format = date_format
        self.set_text(Time.now.strftime date_format)
    end

    def paint_event(event)
        super(event)
        painter = Qt::Painter.new(self)
        painter.draw_text(event.rect.x, event.rect.y, Time.now.strftime(@date_format))
    end

    def start
        @timer = Qt::Timer.new(self)
        self.connect(@timer, SIGNAL('timeout()'), self, SLOT('update()'))
        @timer.start(1000)
    end
end

if __FILE__ == $PROGRAM_NAME
    app = Qt::Application.new([])
    clock = ClockLabel.new()
    clock.start
    clock.show
    app.exec()
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:01:23.587

如果我`connect`用

```
 @timer.connect(SIGNAL :timeout) {
    set_text(Time.now.strftime @date_format)
    update
  } 
```

`paint_event`永远不会被调用，可以省略。这暗示了小部件没有改变，所以我们在定时器触发时改变它。

# .net - 在 0.3.1 上使用 SolrNet 进行 SOLR 基本身份验证

> ID：13092768
> 
> 赞同：1
> 
> 时间：2012-10-26T18:57:05.430
> 
> 标签：.net, solr, solrnet

我正在尝试使用 SOLRNet 实现基本身份验证，并且我正在使用 SolrNet 0.3.1 lib。我注意到 SolrNet 0.4.0 中有一个默认的 basicauth，但在 0.3.1 中看不到相同的。

我的问题分为两部分？

1.  如何使用 Solrnet 0.3.1 实现基本功能？

2.  NuGet 什么时候发布从 2012 年 3 月起没有更新的 0.4.0，但是 SolrNet 0.4 已经正式发布。

参考： [https ://nuget.org/packages/SolrNet/0.3.1](https://nuget.org/packages/SolrNet/0.3.1)

# android - 创建没有推送令牌的客户端通知

> ID：13092769
> 
> 赞同：0
> 
> 时间：2012-10-26T18:57:06.047
> 
> 标签：android, push-notification

据我了解，如果用户长时间不运行应用程序，推送令牌就会过期，并且推送通知将无法访问用户。我想知道是否可以安排一个 AlarmManager 让我们说未来 10 天，当用户第一次运行应用程序时，然后在那天它会从服务器端提取通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:54:41.307

默认情况下，android 中的推送通知最多存储[4 周](http://developer.android.com/guide/google/gcm/adv.html)。这对于您的用例应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:59:28.833

您无需*运行*该应用程序。*推送*服务的整个想法是您不需要*poll*。您应该在您的应用程序中注册一个接收器，并在意图过滤器中执行一个操作：

```
<action android:name="com.google.android.c2dm.intent.RECEIVE" /> 
```

因此，只要您在默认的 4 周内至少打开手机一次，您就会收到 GCM 消息。这一切都在开发人员指南中进行了解释。

# java - 带有 Canvas 类的 Java GUI NullPointerException

> ID：13092771
> 
> 赞同：1
> 
> 时间：2012-10-26T18:57:30.570
> 
> 标签：java, swing, nullpointerexception, awt, mixing

所以我正在为我的班级制作一个 GUI 项目，但我有点卡住了。我的问题与我的 GUI 方面有关，所以我想您可以忽略与排序有关的其他方法。到目前为止，我主要关心的是让 GUI 正常工作。但是，我一直遇到错误，确切地说是空指针异常：

```
Java.lang.NullPointerException
    at SortDriver$SortCanvas.paint(SortDriver.java:253)
    at SortDriver.init(SortDriver.java:197)
    at sun.applet.AppletPanel.run(AppletPanel.java:436)
    at java.lang.Thread.run(Thread.java:679) 
```

在阅读了我的代码之后，我认为我将其范围缩小到了我的 SortCanvas 类。我以前从未使用过它，但它是我的教授给我们的存根的一部分。也就是说它可以正常工作并正确显示图像，但看起来我的实现不正确。有人可以帮我弄清楚如何正确实现我的 SortCanvas“图片”吗？我阅读了 Canvas 的 Java 文档，但我仍然不明白我做错了什么。这是我的代码：

```
import java.awt.*;
import java.applet.Applet;
import javax.swing.*;
import java.awt.event.*;

public class SortDriver extends Applet {

private int array[];  // array to be sorted
private int limit = 1000;  // size of array to be sorted - you may have to make
// this bigger for faster sorts
private int largestNum; // need to know for color scaling purposes in paint()

// flag to tell paint() whether to paint a single location or the whole array
private enum PaintType {ALL, SINGLE};
private PaintType doPaint = PaintType.ALL;

private int index = -1;  // index of single array location to be painted

//this listener object responds to button events
private ButtonActionListener buttonListener;

//button to start the sort
private JButton sortButton;

//basic window frame
private JFrame mainFrame;

//layouts
private BorderLayout initialLayout;
private FlowLayout northLayout;
private BorderLayout centerLayout;
private BorderLayout southLayout;

//basic panel for window frame
private JPanel initialPanel;
//panels for window layout
private JPanel northPanel;
private JPanel centerPanel;
private JPanel southPanel;
//panels for radio buttons
private JPanel radioOrderPanel;
private JPanel radioSortPanel;
private JPanel radioColorPanel;

//north panel header labels
private JLabel topTitleLabel;
private JLabel bottomTitleLabel;
private JLabel arraySizeLabel;

//radio buttons for list order (radioOrderButton)
//random set, ordered set, reverse set
private JRadioButton rOB1, rOB2, rOB3;
//radio buttons for sort type (radioSortButton)
//bubblesort, insertionsort, mergesort, quicksort
private JRadioButton rSB1, rSB2, rSB3, rSB4;
//radio buttons for color choice (radioColorButton)
//green, red, white, blue
private JRadioButton rCB1, rCB2, rCB3, rCB4;

//radio button groups for each radio panel
private ButtonGroup orderGroup, sortGroup, colorGroup;

//text field for size of the array
private JTextField arraySizeTextField;

// the picture of the sort will appear on this canvas
private SortCanvas picture;
private final int pictureWidth = 500;  // size of the sort bar 1001
private final int pictureHeight = 50;

public void init() {

    buttonListener = new ButtonActionListener();

    array = new int[limit];
    // load the array
    largestNum = array[0] = (int) (Math.random()*1000000.0);
    for (int i=1; i<limit; i++) {
        array[i] = (int) (Math.random()*1000000.0);
        // also keep track of the largest so that we can scale by it in paint()
        if (array[i] > largestNum) largestNum = array[i]; 
    }

    //set up the main frame
    mainFrame = new JFrame();
    initialPanel = (JPanel) mainFrame.getContentPane();
    initialLayout = new BorderLayout();
    mainFrame.setResizable(false);
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainFrame.setSize(650, 750);
    initialPanel.setLayout(initialLayout);

    //set up north panel
    northPanel = new JPanel();
    northLayout = new FlowLayout();
    topTitleLabel = new JLabel("SortIt!");
    bottomTitleLabel = new JLabel("A program by Mike Sevilla");
    northPanel.setLayout(northLayout);
    northPanel.add(topTitleLabel, BorderLayout.NORTH);
    northPanel.add(bottomTitleLabel, BorderLayout.NORTH);
    initialPanel.add(northPanel, BorderLayout.NORTH);

    //set up center panel
    centerPanel = new JPanel();
    centerLayout = new BorderLayout();
    centerPanel.setLayout(centerLayout);
    //place array size label
    arraySizeLabel = new JLabel("Size:");
    //place array size text field w/ space for 5 chars
    arraySizeTextField = new JTextField("", 5);
    //place sort button
    sortButton = new JButton("Sort it!");
    // the listener is triggered when the button is clicked
    sortButton.addActionListener(buttonListener);
    centerPanel.setLayout(centerLayout);
    //place sort bar on top of center layout
    picture = new SortCanvas();
    centerPanel.add(picture, BorderLayout.CENTER);
    centerPanel.add(arraySizeLabel, BorderLayout.CENTER);
    centerPanel.add(arraySizeTextField, BorderLayout.CENTER);
    centerPanel.add(sortButton, BorderLayout.CENTER);
    initialPanel.add(centerPanel, BorderLayout.CENTER);

    //set up south panel
    southPanel = new JPanel();
    southLayout = new BorderLayout();
    southPanel.setLayout(southLayout);
    //set radio buttons and format layouts
    radioOrderPanel = new JPanel();
    radioOrderPanel.setLayout(new BoxLayout(radioOrderPanel, BoxLayout.Y_AXIS));
    radioSortPanel = new JPanel();
    radioSortPanel.setLayout(new BoxLayout(radioSortPanel, BoxLayout.Y_AXIS));
    radioColorPanel = new JPanel();
    radioColorPanel.setLayout(new BoxLayout(radioColorPanel, BoxLayout.Y_AXIS));
    //define radio buttons
    rOB1 = new JRadioButton("Random Order", true);
    rOB1.addActionListener(buttonListener);
    radioOrderPanel.add(rOB1);

    rOB2 = new JRadioButton("In Order", false);
    rOB2.addActionListener(buttonListener);
    radioOrderPanel.add(rOB2);

    rOB3 = new JRadioButton("In Reverse", false);
    rOB3.addActionListener(buttonListener);
    radioOrderPanel.add(rOB3);

    rSB1 = new JRadioButton("Bubble Sort", true);
    rSB1.addActionListener(buttonListener);
    radioSortPanel.add(rSB1);

    rSB2 = new JRadioButton("Insertion Sort", false);
    rSB2.addActionListener(buttonListener);
    radioSortPanel.add(rSB2);

    rSB3 = new JRadioButton("Merge Sort", false);
    rSB3.addActionListener(buttonListener);
    radioSortPanel.add(rSB3);

    rSB4 = new JRadioButton("Quick Sort", false);
    rSB4.addActionListener(buttonListener);
    radioSortPanel.add(rSB4);

    rCB1 = new JRadioButton("Green", true);
    rCB1.addActionListener(buttonListener);
    radioColorPanel.add(rCB1);

    rCB2 = new JRadioButton("Red", false);
    rCB2.addActionListener(buttonListener);
    radioColorPanel.add(rCB2);

    rCB3 = new JRadioButton("White", false);
    rCB3.addActionListener(buttonListener);
    radioColorPanel.add(rCB3);

    rCB4 = new JRadioButton("Blue", false);
    rCB4.addActionListener(buttonListener);
    radioColorPanel.add(rCB4);

    //add radio buttons to a button group
    orderGroup = new ButtonGroup();
    orderGroup.add(rOB1);
    orderGroup.add(rOB2);
    orderGroup.add(rOB3);       
    sortGroup = new ButtonGroup();
    sortGroup.add(rSB1);
    sortGroup.add(rSB2);
    sortGroup.add(rSB3);
    sortGroup.add(rSB4);
    colorGroup = new ButtonGroup();
    colorGroup.add(rCB1);
    colorGroup.add(rCB2);
    colorGroup.add(rCB3);
    colorGroup.add(rCB4);
    initialPanel.add(southPanel, BorderLayout.NORTH);

    picture.paint(picture.getGraphics());
    mainFrame.setVisible(true);
}

// this object is triggered whenever a button is clicked
private class ButtonActionListener implements ActionListener {
    public void actionPerformed(ActionEvent event) {

        // find out which button was clicked 
        Object source = event.getSource();

        // start sort button was clicked
        if (source == sortButton) {
            // call the sort
            doBubblesort();
        }
        // called when user hits return in text field
        if (source == arraySizeTextField) {
            int size = Integer.parseInt(arraySizeTextField.getText());
        }
    }    
}

private void doBubblesort() {
    int temp;

    // this is just bubblesort
    for (int i=0; i<limit-1; i++) {
        for (int j=0; j<limit-1-i; j++) {
            if (array[j]>array[j+1]) {
                temp = array[j]; array[j] = array[j+1]; array[j+1] = temp;

                // redraw only locations j and j+1
                doPaint = PaintType.SINGLE;  // try changing this to ALL and see what happens
                index = j; 
                picture.paint(picture.getGraphics());
                index = j+1; 
                picture.paint(picture.getGraphics());
            }
        }
    }
}      

class SortCanvas extends Canvas {
    // this class paints the sort bar 

    SortCanvas() {
        setSize(pictureWidth, pictureHeight);
        setBackground(Color.white);
    }

    public void paint(Graphics g) {

        if (doPaint == PaintType.ALL) {
            // paint whole array - this takes time so it shouldn't be done too frequently
            setBackground(Color.white);
            g.setColor(Color.white);
            g.fillRect(0, 0, pictureWidth, pictureHeight);

            for (int i=0; i<limit; i++) {
                // the larger the number, the brighter green it is
                // green is between 0.0 and 1.0
                // divide by the largest number to get a value between 0 and 1
                float green = (float)(array[i]/(float)largestNum);

                // clamp if necessary - it shouldn't be
                if (green<0f) green = 0f;
                if (green>1f) green = 1f;

                g.setColor(new Color(0.0f, green, 0.0f));
                // array location 0 is painted at left; 
                //   array location limit-1 is painted to right
                //this is a single vertical line in the bar
                g.drawLine((int)(i*pictureWidth/limit), 0, 
                        (int)(i*pictureWidth/limit), pictureHeight);
            }
        }
        else {
            // just paint one location on the bar
            float green = (float)(array[index]/(float)largestNum);
            if (green<0f) green = 0f;
            if (green>1f) green = 1f;
            g.setColor(new Color(0.0f, green, 0.0f));
            g.drawLine((int)(index*pictureWidth/limit), 0, 
                    (int)(index*pictureWidth/limit), pictureHeight);
        }   
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:12:32.860

这不是必需的；

```
picture.paint(picture.getGraphics()); 
```

`getGraphics``null`如果组件本身还没有被绘制，将返回。您应该避免使用此方法，它只是当前组件图形状态的快照（在您的情况下什么都不是）

您无法控制绘制过程，这取决于重绘管理器。您可以通过这些`repaint`方法请求更新。阅读[AWT 和 Swing 中的绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

您应该避免将重量级（Canvas）和轻量级组件（JFrame）混合在一起，在可能的情况下，您应该坚持使用 Swing 组件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:05:22.090

如您所见，直接调用`paint()`可能会导致意外行为，请`repaint()`改用：

```
picture.repaint(); 
```

# javascript - 打印谷歌地图

> ID：13092774
> 
> 赞同：0
> 
> 时间：2012-10-26T18:57:31.850
> 
> 标签：javascript, google-maps

我目前正在使用此代码打印谷歌地图

```
<script language="javascript">
var contents = window.opener.document.getElementById("map_container");
document.write(contents.innerHTML);
window.print();
</script> 
```

问题是一些奇怪的控件显示在左下角也带有谷歌版权水印。以下是图片： -缩小：http://imageshack.us/photo/my-images/833/zoomoutd.png/ -放大：[http](http://imageshack.us/photo/my-images/833/zoomoutd.png/) ://imageshack.us/photo/my-images/708/zoominb [。 .png/](http://imageshack.us/photo/my-images/708/zoominb.png/) . 我对右上角的控件没有问题，但我想摆脱底部的那些东西。顺便说一句，如果可以在所有浏览器中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:47:00.577

I don't think you're supposed to be a-printing the satellite view, Google has [details here](http://support.google.com/maps/bin/answer.py?hl=en&answer=144343). Likely, there's no supported way to do this. This questions has details on a [workaround using the static maps API](https://stackoverflow.com/questions/3532234/printing-api-generated-google-maps-from-internet-explorer), so that might be an option.

# web-services - 使用 JUnit 测试 Web 服务

> ID：13092780
> 
> 赞同：3
> 
> 时间：2012-10-26T18:57:54.633
> 
> 标签：web-services, unit-testing, junit

我正在开发一个应用程序来对各种 Web 服务执行一系列测试。这些 Web 服务使用并生成 json，对于它们中的每一个，我们都有一个类来对 json 请求和响应进行建模。例如：

如果 serviceX 的 json 请求是这样的：

```
{
  "name":"Alex",
  "id":"123"
} 
```

我们有一个这样的类`serviceXrequest`：

```
public class serviceXrequest {

   String name;
   String id;

   //Constructor, getters/setters, etc
   ...
} 
```

以该类的一个对象为起点，我们可以对 Web 服务进行一系列测试。这个想法是使这些测试尽可能通用，以便它们可以与任何 Web 服务一起使用，只需编写一个对其请求建模的类和一个对响应建模的类。

出于这个原因，到目前为止开发的所有测试方法都适用于普通的 java 对象。这是我想要的一个例子：

```
public class WebServiceTest {

    String serviceURL;
    String requestJson;
    String requestClass;
    String responseClass;

    public WebServiceTest() {}

    @Test
    public static void Test1() { ... }

    @Test
    public static void Test2() { ... }

    ....

    @Test
    public static void TestN() { ... }
} 
```

然后，从另一个类中，通过执行以下操作调用这些测试：

```
public class LoginTest { //To test the login web service, for example

    public static void main(String[] args) {

        WebServiceTest loginTest = New WebServiceTest();

        loginTest.setServiceURL("172.0.0.1/services/login");
        loginTest.setRequestJson("{"user":"ale","pass":"1234"}");
        ...
        loginTest.runTests();
    }
} 
```

我知道这不是那么简单，但是关于如何到达那里的任何想法？提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:55:54.213

您还可以查看[REST-assured](https://code.google.com/p/rest-assured/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:29:06.270

测试 Web 服务的最佳工具之一是[SOAP UI](http://www.soapui.org)，但这更适用于功能测试

我也很好地集成了[FitNesse](http://fitnesse.org)测试

JMeter 与 LoadUI 齐头并进。就 web 服务的压力和负载测试而言，类似的东西。

Junit...我从来没有直接应用到webservice本身。

大多数时候，我有一个由 WebService 接口（端口）的实现调用的 Spring 服务，我对它进行了单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T19:37:16.123

您应该考虑使用 http-matchers ( [https://github.com/valid4j/http-matchers](https://github.com/valid4j/http-matchers) )，它可以让您编写 JUnit 测试，使用常规 hamcrest-matchers（与 JUnit 捆绑）通过标准 JAX 测试您的 Web 服务- RS接口。

# c# - WCF 与视觉工作室 2012

> ID：13092781
> 
> 赞同：6
> 
> 时间：2012-10-26T18:58:00.697
> 
> 标签：c#, .net, wcf, visual-studio

我是新的 WCF 编程，我确实从以下链接遵循了一系列入门教程

[http://msdn.microsoft.com/en-us/library/ms734712.aspx](http://msdn.microsoft.com/en-us/library/ms734712.aspx)

我在控制台应用程序中托管了服务，但是当我尝试创建客户端并尝试添加服务引用时，出现以下异常。

> 下载“http: localhost:8000/GettingStarted/mex/_vti_bin/ListData.svc/$metadata”时出错。请求失败，HTTP 状态为 405：方法不允许。元数据包含无法解析的引用：'http: localhost:8000/GettingStarted/mex'。在 http: localhost:8000/GettingStarted/mex 上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。远程服务器返回错误：(404) Not Found。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

托管应用程序代码

```
class Program
{
    static void Main(string[] args)
    {
        // Step 1 Create a URI to serve as the base address.
        Uri baseAddress = 
            new Uri("http://localhost:8000/GettingStarted/");

        // Step 2 Create a ServiceHost instance
        ServiceHost selfHost = 
            new ServiceHost(typeof(CalculatorService), baseAddress);

        try
        {
            // Step 3 Add a service endpoint.
            selfHost.AddServiceEndpoint(typeof(ICalculator), 
                new WSHttpBinding(), 
                "CalculatorService");

            // Step 4 Enable metadata exchange.
            var smb = new ServiceMetadataBehavior();
            smb.HttpGetEnabled = true;
            selfHost.Description.Behaviors.Add(smb);

            // Step 5 Start the service.
            selfHost.Open();
            Console.WriteLine("The service is ready.");
            Console.WriteLine("Press <ENTER> to terminate.");
            Console.WriteLine();
            Console.ReadLine();

            // Close the ServiceHostBase to shutdown.
            selfHost.Close();
        }
        catch (CommunicationException ce)
        {
            Console.WriteLine("exception: {0}", ce.Message);
            selfHost.Abort();
        }
    }
} 
```

现在我无法弄清楚问题是什么。我正在使用 Visual Studio 2012 和 .net 平台 4.5。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T19:41:35.200

我也有类似的问题，搞砸了。是的，您似乎正确地遵循了本教程，但是如果您想连接到它并作为服务使用（如在制作服务引用中），您还必须添加 MEX 服务端点。在您的 selfhost.Description.Behaviors.Add(smb) 之后添加这一行：

```
selfhost.AddServiceEndpoint(
            typeof(IMetadataExchange),
            MetadataExchangeBindings.CreateMexHttpBinding(),
            "http://localhost:8000/GettingStarted/mex"); 
```

这应该使您能够通过“添加服务参考”进行连接。另外，我发现根据您的系统，您可能需要以管理员身份运行 VS 以允许连接到网络（以防您过去不小心告诉它不）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:01:02.183

从错误信息来看，指定端口似乎没有服务监听。当您尝试向其添加服务引用时，您需要运行托管服务的控制台应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:07:30.153

显然，服务没有运行，这意味着在您用来创建服务引用的 URL 上没有端点监听。

您可以在 IIS 中托管服务，或者让控制台应用程序像上面提到的 Damir 一样运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T19:12:00.830

当您尝试访问它时，请确保您的服务器正在运行。还要检查服务器上的配置并确保您的客户端的端点与服务器的端点匹配。确保在使用时也使用相同的绑定。确保服务器正在侦听并且服务器的防火墙没有阻止您。如果您对 WCF 服务进行了更改，请不要忘记为您的客户端应用程序重新生成服务引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T19:27:42.217

您确定您已定义 MEX 端点吗？这是提供有关您的服务的元数据信息的内容，以便工作室可以生成客户端代理。

在您链接到的教程中，它是[这一点](http://msdn.microsoft.com/en-us/library/ms730935.aspx)：

```
// Step 4 Enable metadata exchange.
ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
smb.HttpGetEnabled = true;
selfHost.Description.Behaviors.Add(smb); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-28T20:36:13.223

如果您在 IIS 中托管 Web 服务，请检查 web.config（在行为部分下）

httpsGetEnabled 设置为 True

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-28T16:13:31.310

我今天遇到了类似的问题。但是，正如@iMortalitySX 已经说过的那样，对我来说，我不需要显式添加端点。

我失败的原因不同：我绑定到[http://0.0.0.0](http://0.0.0.0)，认为监听 IP 无关紧要。事实上，通过 SoapUI，我**能够**连接并使用该服务。但是当试图在另一个 Visual Studio 项目中发现服务时，发现会失败，因为 VS 会得到初始响应，但随后会跟踪包含[http://0.0.0.0](http://0.0.0.0)的链接，然后失败。

因此，将[http://0.0.0.0](http://0.0.0.0)更改为我机器的正确 IP 解决了我的问题。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-03-22T07:57:58.873

尝试将 uri 地址放在您的浏览器中。在我的情况下，我能够看到一个 ExceptionDetail。

# jquery - 为 getJSON 响应创建变量

> ID：13092784
> 
> 赞同：0
> 
> 时间：2012-10-26T18:58:19.813
> 
> 标签：jquery, jsonp, getjson

我对 Javascript 和 JQuery 非常陌生，我一直在尝试不同的方法来提取和操作雅虎财务数据，并决定使用 jquery。我的第一个基本尝试是这样的：

```
$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20Name%2C%20LastTradePriceOnly%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22RHT%22%29&format=json&env=http%3A%2F%2Fdatatables.org%2Falltables.env" + "?callback=?", function(json) {

var lastprice = json[0].results.quote.LastTradePriceOnly

console.log(lastprice) 
```

它不起作用，错误控制台也没有任何帮助。我在这里搜索并发现了这个问题： [load json into variable](https://stackoverflow.com/questions/2177548/load-json-into-variable)并在考虑可能尚未从雅虎收到响应后尝试了这个：

```
var json = (function () {
    var json = null;
    $.ajax({
        'async': false,
        'global': false,
        'url': "http://query.yahooapis.com/v1/public/yql?q=select%20Name%2C%20LastTradePriceOnly%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22RHT%22%29&format=json&env=http%3A%2F%2Fdatatables.org%2Falltables.env",
        'dataType': "json",
        'success': function (data) {
            json = data;
        }
    });
    return json;
})(); 

    var lastprice = json.results.quote.LastTradePriceOnly

    console.log(lastprice)

}); 
```

这也是不对的。我觉得我很接近了。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:02:29.283

删除 url 的回调，您会从查询中获得以下 JSON 结果，它不是数组而是对象。

```
{
   "query":{
      "count":1,
      "created":"2012-10-26T19:00:18Z",
      "lang":"en-US",
      "results":{
         "quote":{
            "LastTradePriceOnly":"50.26",
            "Name":"Red Hat, Inc. Com"
         }
      }
   }
} 
```

您应该通过以下方式访问其数据：

```
var lastprice = json.query.results.quote.LastTradePriceOnly; 
```

这是修改后的代码的工作演示：[DEMO](http://jsfiddle.net/DdsAN/1)。

* * *

**编辑（警告）**

我正在测试该调用，我发现有时来自具有相同 URL 的服务的结果会返回以下错误：

```
{
   "error":{
      "lang":"en-US",
      "description":"No definition found for Table yahoo.finance.quotes"
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:05:33.897

数据将以这种格式返回：

```
{"query":
       {"count":1,"created":"2012-10-26T19:00:42Z","lang":"en-US","results":
          {"quote":
              {"LastTradePriceOnly":"50.28","Name":"Red Hat, Inc. Com"}}}} 
```

所以你得到的对象必须被遍历：**data.query.results.quote.LastTradePriceOnly**

```
>     $.ajax({
>         'async': false,
>         'global': false,
>         'url': "http://query.yahooapis.com/v1/public/yql?q=select%20Name%2C%20LastTradePriceOnly%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22RHT%22%29&format=json&env=http%3A%2F%2Fdatatables.org%2Falltables.env&callback=?",
>         'dataType': "json",
>         'success': function (data) {
>             alert(data.query.results.quote.LastTradePriceOnly);
>         }
>     }); 
```

这是一个演示它的jsfiddle：http: [//jsfiddle.net/erick382/Qghtu/](http://jsfiddle.net/erick382/Qghtu/)

# jsf - SelectManyCheckbox onHide with remoteCommand

> ID：13092791
> 
> 赞同：3
> 
> 时间：2012-10-26T18:58:41.957
> 
> 标签：jsf, jsf-2, primefaces

I ran into a very interesting issue. Here is my scenario:

**My Goal**

*   Use a SelectManyCheckbox with a nested tooltip.
*   Use SelectManyCheckbox onHide event to fire an Ajax (ActionListener) call and update the
*   SelectManyCheckbox label and nested tooltip text.

**My Approach**

*   Use a remoteCommand and tie it to the SelectManyCheckbox onHide event

**XHTML**

```
<p:selectCheckboxMenu id="sourceFilter"
                onHide="sourceFilterCommand();"
                value="#{viewRevenueBean.sourceSelectManyMenu.selectedValues}" 
                label="#{viewRevenueBean.sourceSelectManyMenu.label}"
                filter="true" filterMatchMode="contains"
                validator="#{viewRevenueBean.sourceSelectManyMenu.validate}"
                widgetVar="srcFilterDropDown">
                <f:selectItems id="sourceItems"
                              value="#{viewRevenueBean.sourceSelectManyMenu.availableItems}" 
                              var="source" itemLabel="#{source.label}" itemValue="#{source.value}" />
                <f:convertNumber type="number" />
                                    <p:tooltip id="srcToolTip" 
                                for="sourceFilter" 
                        value="#{viewRevenueBean.sourceSelectManyMenu.tooltipText}" 
                        showEffect="fade" 
                            hideEffect="fade"/>
                <p:remoteCommand name="sourceFilterCommand" update="sourceFilter"
                    actionListener=#{viewRevenueBean.sourceSelectManyMenu.defaultEventHandler}"/>       
</p:selectCheckboxMenu> 
```

**My Results**

*   Ajax (Action Listener) gets fired and SelectManyCheckbox label and nested tooltip are updated (expected behavior).
*   In Firebug, I noticed that each onHide event Ajax call is multiplying the preceding number of server side requests by two (unexpected behavior).

**e.g**

```
1st onHide event  = 1 Request
2nd onHide event  = 2 Requests
3rd onHide event  = 4 Requests  
4th onHide event  = 8 Requests  
5th onHide event  = 16 Requests 
```

etc.....

This is obviously not desired and leads to a big slow down after just a couple onHide events.

**Experiments I tried**

*   I created a p:command button which accomplished the desired Ajax call and correct element updates (without the multiplied request issue) . I then proceeded to steal it's Ajax JavaScript call via Firebug and placed it in my own JavaScript function, which I then used as my onHide callback. Again, I experience the same unwanted result, the label and tooltip are updated, but the requests start to multiply.

*   I tried placing the remoteCommand in different locations (outside the menu, inside it's own form etc). It doesn't make a difference. The problem is still encountered.

*   I tried simplifying the SelectManyCheckbox scenario (remove tooltip, coverter, tweak various attributes etc) to eliminate other possibilities. No difference.

*   I tried a p:ajax instead of p:remoteCommand using onchange. The Ajax requests work fine but obviously it's not what I am after. I need to trigger it onHide.

*   Instead of a SelectCheckboxMenu , i tried using a SelectManyCheckbox (no label) with onchange and keeping everything else the same. The remoteCommand works fine, the Ajax call gets called once and everything is nice and dandy. [/list] [list] * I tried the PrimeFaces 3.5-SNAPSHOT as well. No difference. Issue is still manifested.

    Haven't found any clues on the forum or the net thus far in regards to this issue. Does this sound like a bug or programmer clumsiness :roll: ? Of course any insight and/or suggestions are highly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:33:57.933

我在使用 p:remoteCommand 时遇到了类似的问题。我不能肯定地说根本原因在您的情况下是相同的，但这也许会有所帮助。

在我的情况下，问题是由 jquery 绑定的多次注册引起的；p:remoteCommand 似乎不使用 $(somesource).off("some_event").on("some_event", some_function)。这意味着 - 据我所知 - 如果您更新包含 p:remoteCommand 的组件，则每次更新时都会一遍又一遍地注册它的操作。这反过来意味着，如果您调用 p:remoteCommand 的名称，它将触发与注册时相同的次数。

你说你试图把它移到外面，仍然遇到同样的问题，所以也许这毕竟不是这个问题。在我的例子中，我使用 ap:commandLink 测试了这个假设，并调用了支持 bean。我的目标是确保删除任何以前的绑定注册，因此通过像上面提到的那样注册绑定：

$(somesource).off("some_event").on("some_event", some_function)，然后让some_function点击链接，至少可以检查一下是否解决了问题。

# c++ - linking Qt Creator plugin editor / highlighter

> ID：13092795
> 
> 赞同：0
> 
> 时间：2012-10-26T18:59:04.560
> 
> 标签：c++, qt, qt-creator

I'm working on a qt creator plugin that adds support for certain types of files by supplying customized editors, etc. Right now it registers a new IEditorFactory which produces editors that I based off of the TextEditor::BaseTextEditor and TextEditor::BaseTextEditorWidget.

Eventually I will be creating and using specialized highlighters and other things, but for now I want to utilize things from other qt creator plugins, and this is where I run into trouble.

In particular I want to use the TextEditor::Internal::Highlighter, which can load and utilize kate files. I'm already using other classes from the TextEditor plugin so I have

```
include($$QTCREATOR_SOURCES/src/plugins/texteditor/texteditor.pri) 
```

added to my project file. Inside texteditor.pri everything seems good

```
include(texteditor_dependencies.pri)
LIBS *= -l$$qtLibraryName(TextEditor) 
```

and, indeed, I'm able to compile my editor (which is dependent on things inside the texteditor plugin).

The only difference with the TextEditor::Internal::Highlighter -as far as I can tell- is that it's in a subfolder of the texteditor plugin. This should be fine, and the object files seem to all land in the same directory, but when I say

```
new TextEditor::Internal::Highlighter() 
```

(just as is done in texteditor/plaintexteditor.cpp) I get a linker error

```
Undefined symbols for architecture x86_64:
  "TextEditor::Internal::Highlighter::Highlighter(QTextDocument*)", referenced from:
      MyPlugin::MyEditorWidget::MyEditorWidget(QWidget*)in myeditor.o
      MyPlugin::MyEditorWidget::MyEditorWidget(QWidget*)in myeditor.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

What am I doing wrong? Are there more dependencies I have to declare? Is there a command I can use to force a folder of object files to be in my path while compiling?

Thnaks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:30:23.207

“内部”命名空间中的类和方法往往不会被导出，因此它们在提供它们的插件之外不可用。检查类定义：在类关键字和类名之间是否有“SOMETHING_EXPORT”？如果没有，那么你就不走运了。

默认情况下，导出尽可能少的符号：这让我们有机会实际改变事物，而不必担心在插件之外破坏代码。它还可以稍微减少加载时间。如果您有要导出符号的用例：请随时在 Qt Creator 邮件列表中询问，或者 - 更好的是 - 向 codereview.qt-project.org 提供补丁，将类移出 Internal命名空间并导出符号。

[Qt Creator 邮件列表](http://lists.qt-project.org/)和 freenode 网络上的#qt-creator IRC 频道可以更好地回答此类问题。

# html - 在 HTML 页面上循环浏览 Ruby 数组中的值

> ID：13092800
> 
> 赞同：3
> 
> 时间：2012-10-26T18:59:27.223
> 
> 标签：html, ruby-on-rails, ruby, ajax, ruby-on-rails-3

我正在使用以下查询从控制器中的数据库中获取一些行：

```
@main = connection.execute("select code_ver, result from mastertest;") 
```

现在在我的 html.erb 中，我在这样的表格中显示结果：

```
<% @level1.each do |row1| %>
<table id="tbl_main1" name="tbl_main1">
    <tr bgcolor="#D1D1D1">
        <td width="60%" <%= row1[0] %>></td>
        <td width="20%"><%= row1[2] %></td>
        <td width="20%"><%= row1[1] %></td> 
    </tr>
</table> 
```

我在这里取了很多行。但我想一次只显示 15 个结果，并且有一些按钮“下一个”和“上一个”可以循环显示结果。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:01:46.113

看看这个宝石[https://github.com/mislav/will_paginate](https://github.com/mislav/will_paginate)

Will_paginate 可能对您要查找的内容有用。

那里还有其他宝石，但我发现 will_paginate 可以满足分页需求。

**编辑** 如果您打算对您正在执行的数组进行分页，您可以执行以下操作：

`require 'will_paginate/array'`

进而`your_array.paginate page: x, per_page: y`

x 将是您要显示的页面，y 是每页的项目数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T19:43:11.360

如果您使用的是 Rails 3，请查看 kaminari 进行分页：[https](https://github.com/amatsuda/kaminari) ://github.com/amatsuda/kaminari 。您可能对[Paginating a generic Array object](https://github.com/amatsuda/kaminari#paginating-a-generic-array-object)功能感兴趣。但是，请记住，这不会为您的 SQL 查询添加偏移量和限制。

Kaminari 被广泛认为比 Rails 3 的 will_paginate 更好，因为它利用了 Rails 范围并且不会全局污染对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:11:47.920

我建议创建一个 Active Record 模型来表示您的 mastertest 数据库表。然后，在`will_paginate`gem 的帮助下，您可以在控制器中执行以下操作：

```
@mastertests = MasterTest.all.paginate(:page => params[:page], :per_page => 15) 
```

然后在你看来：

```
<% @mastertests.each do |mastertest| %>
  <td><%= mastertest.code_ver %></td>
  <td><%= mastertest.result %></td>
<% end %>
<%= will_paginate @mastertests %> 
```

视图助手将`will_paginate`生成分页链接，如 [prev] [1] [2] [3] [next]。查看 github 上的 will_paginate gem 以获取更多选项。

# jenkins - 詹金斯 - 如何获得两次跑步之间的差异

> ID：13092802
> 
> 赞同：3
> 
> 时间：2012-10-26T18:59:36.913
> 
> 标签：jenkins, hudson

每当测试发生变化时，我们都会触发 Jenkins 的作业 例如：添加/删除几个测试用例并运行作业 我需要查看与之前运行相比添加和删除了多少测试。我还需要将 Run1 详细信息与 RunX 详细信息进行比较。

请让我知道我们是否可以在 Jenkins 中执行这些操作？有没有相同的插件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:48:45.097

您可以回显可用测试的数量并使用[Plot Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin)来可视化动态。请看另一个[问题](https://stackoverflow.com/a/12780819/1435741)：

请注意，默认测试结果趋势为我完成了这项工作（它显示了测试总数）。

![在此处输入图像描述](../Images/d3de3aedc0a9edfa340c590780593924.png) ![在此处输入图像描述](../Images/64d95952d26028368c91e9ab0b089f47.png)

# google-app-engine - GAE - get_uploads: self.request.POST 不存在，但 self.request.request.POST 存在。get_uploads 返回空数组

> ID：13092803
> 
> 赞同：2
> 
> 时间：2012-10-26T18:59:59.630
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, pylons, pyramid

试图上传到我的本地主机。这是 HTML 位：

```
<form enctype="multipart/form-data" method="POST" action="http://localhost:8080/_ah/upload/ahRkZXZ-ZGV2LWN5YmVyc2NpZW5jZXIbCxIVX19CbG9iVXBsb2FkU2Vzc2lvbl9fGAsM"><input type="file" name="srcFile"><input type="submit" value="submit" name="submit"></form> 
```

以下是标题：

响应标头：

```
Cache-Control   no-cache
Content-Length  0
Content-Type    text/html
Date    Fri, 26 Oct 2012 19:19:56 GMT
Expires Fri, 01 Jan 1990 00:00:00 GMT
Server  Development/1.0 
```

请求标头：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Connection  keep-alive
Cookie  __utma=111872281.1477928994.1342991890.1351271332.1351275008.45; __utmz=111872281.1342991890.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); dev_appserver_login="me@gmail.com:False:[[int]]"; __utmc=111872281; __utmb=111872281.13.10.1351275008
Host    localhost:8080
Referer http://localhost:8080/diagnostics
User-Agent  Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0 
```

来自上传流的请求标头：

```
Content-Length  451
Content-Type    multipart/form-data; boundary=---------------------------19073888353745436471437703342 
```

以下是我在 project/__init__.py 中处理请求的方式：

```
 76     config.add_route('UHandler', '/uploads/test')
 77     config.add_view(UploadHandler,
 78                     attr="post",
 79                     route_name='UHandler',
 80                     context=Root,
 81                     renderer='uploads.jinja2') 
```

这是它命中的处理程序代码：

```
 class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
       def post(self):
           pdb.set_trace() 
```

在我运行的调试器中：

```
(Pdb) p self.get_uploads()
*** AttributeError: AttributeError("'Root' object has no attribute 'params'",)
(Pdb) p self
<cyberanatomy.view.uploads.UploadHandler object at 0x5130ad0>
(Pdb) p self.get_uploads('srcFile')
[]
(Pdb) p self.get_uploads('srcFile')[0]
*** IndexError: IndexError('list index out of range',)
(Pdb) dir(self)
['_BlobstoreUploadHandler__uploads', '__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'abort', 'app', 'dispatch', 'error', 'get_uploads', 'handle_exception', 'initialize', 'post', 'redirect', 'redirect_to', 'request', 'response', 'uri_for', 'url_for']
(Pdb) self.request.request.POST
MultiDict([(u'srcFile', FieldStorage(u'srcFile', u'Screen Shot 2012-09-21 at 12.47.19.png')), (u'submit', u'submit')]
(Pdb) p self.get_uploads('anyRandomString')
[] 
```

在 get_uploads 函数中移动我的断点：google_appengine/google/appengine/ext/webapp/blobstore_handlers.py

```
(Pdb) dir(self.request.params)
*** AttributeError: 'Root' object has no attribute 'params'
(Pdb) dir(self.request.request.params)
['_MutableMapping__marker', '__abstractmethods__', '__class__', '__contains__', '__delattr__', '__delitem__', '__dict__', '__doc__', '__eq__', '__format__', '__getattribute__', '__getitem__', '__hash__', '__init__', '__iter__', '__len__', '__metaclass__', '__module__', '__ne__', '__new__', '__nonzero__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__setitem__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_abc_cache', '_abc_negative_cache', '_abc_negative_cache_version', '_abc_registry', '_readonly', 'add', 'clear', 'copy', 'dict_of_lists', 'dicts', 'extend', 'from_fieldstorage', 'get', 'getall', 'getone', 'has_key', 'items', 'iteritems', 'iterkeys', 'itervalues', 'keys', 'mixed', 'pop', 'popitem', 'setdefault', 'update', 'values', 'view_list'] 
```

因此，将第 372 行从：

```
372       for key, value in self.request.params.items(): 
```

到：

```
372       for key, value in self.request.request.params.items(): 
```

结果是：

```
(Pdb) print self.get_uploads()
[<google.appengine.ext.blobstore.blobstore.BlobInfo object at 0x4a6eb50>]
(Pdb) self.get_uploads()[0]
<google.appengine.ext.blobstore.blobstore.BlobInfo object at 0x4a6eb50> 
```

这是怎么回事？这是标题中的内容类型的问题吗？这是金字塔如何处理 project/__init__.py 中的请求的问题吗？这是appengine中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T01:57:28.380

好吧，我不知道您的基类在做什么，但考虑到它正在返回并且您的视图配置为匹配 type 的上下文，`BlobStoreUploadHandler`它看起来好像已设置`self.request`为您的上下文。`self.request.params``AttributeError: 'Root' object has no attribute 'params'``Root`

# ios - 在 iOS 上的 applicationDidBecomeActive() 后 Unity3D 应用程序崩溃

> ID：13092804
> 
> 赞同：2
> 
> 时间：2012-10-26T19:00:06.340
> 
> 标签：ios, xcode, ios5, ios6, unity3d

遇到了一些与 Unity（在 Mac 上）、iOS 6 以及可能的自动旋转相关的问题。将 Unity 更新到 3.5.6f4，因为它应该在 iOS 6 下支持更好的自动旋转。但是在启动应用程序时它仍然崩溃，但是更新后不再有任何错误消息。

该应用程序在此日志后崩溃：

*   完成重新加载，在 0.229 秒内 -> applicationDidBecomeActive()

在 iOS 5 设备上它不会崩溃，日志如下：

*   完成重新加载，在 0.229 秒内 -> applicationDidBecomeActive() -> 强制加速度计注册 ...

那么“力加速度计注册”可能与自转有关吗？我应该指出，即使关闭了自动旋转，它仍然在 iOS 6 上崩溃，早期版本的统一工作！

附带说明一下，我在 iOS 6 上使用自动旋转运行 Unity 3.5.5 时出现的错误是：“应用程序应该在应用程序末尾有一个根视图控制器”

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:50:43.040

您需要： 1\. 从设备中删除应用程序 2\. 当您从统一构建时，选择“替换”选项

iOS 6 也可以杀死应用程序，如果加载时间过长 - 检查这个变体......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T07:24:43.410

问题与我错过了在另一个未在“模拟器”中运行但在设备上启动它的场景中连接unity3d中的一些游戏对象有关。

# javascript - jQuery Undelegate 从函数内部

> ID：13092806
> 
> 赞同：0
> 
> 时间：2012-10-26T19:00:12.667
> 
> 标签：javascript, jquery

如何取消对#submit 点击事件的委托？

```
$(document).ready(function(){
            $(".agent img").click(function(){
                $(".agent-form").remove();
                var agentid = $(this).attr("alt"),
                    response = "<form method='post' action='' class='agent-form'><textarea placeholder='Your Comment' name='comment' id='comment'></textarea><input type='button' value='submit' id='submit' /></form>";
                $(response).hide().appendTo(this.parentNode).fadeIn();
                $(".agent").delegate("#submit","click",function(){
                    var message = $("#comment").val();
                    message = escape(message);
                    var dataString = "agent="+agentid+"&message="+message;
                    $.ajax({
                        type: "POST",
                        url: "includes/newcomment.asp",
                        data: dataString,
                        success: function(){
                            console.log(dataString);
                        }
                    });
                });
            });
        }); 
```

我想取消所有在以前的 .agent img 点击上创建的 #submit 点击事件。问题是，如果用户单击代理 img 然后决定单击另一个 img，则 ajax 提交到不同的数据字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:02:34.357

您可以使用 jQuery 的 .unbind() 方法。

它记录[在这里](http://api.jquery.com/unbind/)

基本上..

```
$(".agent img").unbind("click"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:03:44.743

根据[jQuery 文档`.delegate()`](http://api.jquery.com/delegate/)，您可以使用它[`.undelegate()`](http://api.jquery.com/undelegate/)来删除事件处理程序。

您没有向我们展示您的 HTML，但这听起来更像是您应该只拥有一个始终存在的委托事件处理程序，而不是创建一个、删除一个、创建另一个等...您可以将 agentid 存储在表单元素中当您创建它然后像这样在提交处理程序上检索它时。

```
 $(document).ready(function(){

        $(document).delegate("#submit", "click", function() {
            var message = $("#comment").val();
            message = escape(message);
            // get agentid for this form
            var agentid = $(this).closest("form").data("agentid");
            var dataString = "agent="+agentid+"&message="+message;
            $.ajax({
                type: "POST",
                url: "includes/newcomment.asp",
                data: dataString,
                success: function(){
                    console.log(dataString);
                }
            });
        });

        $(".agent img").click(function(){
            $(".agent-form").remove();
            var agentid = $(this).attr("alt"),
            // build form HTML (embed agentid into it for later retrieval)
            var response = "<form method='post' action='' class='agent-form' data-agentid='" + agendid + "'><textarea placeholder='Your Comment' name='comment' id='comment'></textarea><input type='button' value='submit' id='submit' /></form>";
            $(response).hide().appendTo(this.parentNode).fadeIn();
        });
    }); 
```

# python - 如何根据索引数组拆分 ndarray？

> ID：13092807
> 
> 赞同：9
> 
> 时间：2012-10-26T19:00:12.487
> 
> 标签：python, numpy

我对 Python 很陌生，对 Numpy 也很陌生。

到目前为止，我有一个 ndarray 数据，其中是一个列表列表，并且我有一个索引数组。如何删除索引在索引数组内的每一行并将该行放入新的ndarray？

例如，我的数据看起来像

```
[[1 1 1 1]
 [2 3 4 5]
 [6 7 8 9]
 [2 2 2 2]] 
```

我的索引数组是

```
[0 2] 
```

我想要两个得到两个数组，一个

```
[[1 1 1 1]
 [6 7 8 9]] 
```

和

```
[[2 3 4 5]
 [2 2 2 2]] 
```

扩展示例，为清楚起见：例如，我的数据看起来像

```
[[1 1 1 1]
 [2 3 4 5]
 [6 7 8 9]
 [2 2 2 2]
 [3 3 3 3]
 [4 4 4 4]
 [5 5 5 5]
 [6 6 6 6]
 [7 7 7 7]] 
```

我的索引数组是

```
[0 2 3 5] 
```

我想要两个得到两个数组，一个

```
[[1 1 1 1]
 [6 7 8 9]
 [2 2 2 2]
 [4 4 4 4]] 
```

和

```
[[2 3 4 5]
 [3 3 3 3]
 [5 5 5 5]
 [6 6 6 6]
 [7 7 7 7]] 
```

我研究了 numpy.take() 和 numpy.choose() 但我无法弄清楚。谢谢！

编辑：我还应该补充一点，我的输入数据和索引数组的长度是可变的，具体取决于数据集。我想要一个适用于可变尺寸的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T19:24:46.633

抱歉，所以您已经拥有`take`并且基本上需要 的反面`take`，您可以通过一些索引很好地获得它：

```
a = np.arange(16).reshape((8,2))
b = [2, 6, 7]
mask = np.ones(len(a), dtype=bool)
mask[b,] = False
x, y = a[b], a[mask] # instead of a[b] you could also do a[~mask]
print x
array([[ 4,  5],
       [12, 13],
       [14, 15]])
print y
array([[ 0,  1],
       [ 2,  3],
       [ 6,  7],
       [ 8,  9],
       [10, 11]]) 
```

因此，您只需创建一个布尔掩码，该掩码为 True where`b`不会选择 from `a`。

* * *

实际上已经`np.split`有处理这个（它的纯python代码，但这不应该真的打扰你）：

```
>>> a = np.arange(16).reshape((8,2))
>>> b = [2, 6]
>>> print np.split(a, b, axis=0) # plus some extra formatting
[array([[0, 1],
       [2, 3]]),
 array([[ 4,  5],
       [ 6,  7],
       [ 8,  9],
       [10, 11]]),
 array([[12, 13],
       [14, 15]])] 
```

split 始终包含来自`0:b[0]`and的切片`b[0]:`，我想您可以为简单起见将它们从结果中切出。当然，如果您有常规拆分（所有相同的大小），您可能会更好地使用`reshape`.

另请注意，这将返回*views*。因此，如果您更改这些数组，除非您`.copy`先调用，否则您会更改原始数组。

# android - 动作栏中的三点动作溢出菜单？

> ID：13092808
> 
> 赞同：4
> 
> 时间：2012-10-26T19:00:14.920
> 
> 标签：android

![在此处输入图像描述](../Images/b70f0f737d975e96d62ceaca56a594bc.png)我注意到，在我的应用程序中，当我为没有硬件菜单按钮的新设备添加菜单时，它会将三个点添加到操作栏。但是，我在某些应用程序上看到您实际上可以将这三个点移到底部（在软件导航上）如何实现？如果这有所作为，我也在使用 actionbarsherlock。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T19:20:51.763

您可以通过设置`targetSdk`低于 14 来“实现”这一点。我说“实现”，因为这是不好的做法。对于具有软件键的设备，只要您使用带有 ActionBar 的主题，它就会在 ActionBar 上显示菜单。如果您使用的主题没有 ActionBar（非 Holo），它将显示三个点。

三个点是讨厌的。
三个点是邪恶的。
三个点必须。是。根除。

简而言之，我会避免它。:)

另见：[耻辱的菜单按钮](https://plus.google.com/107708120842840792570/posts/1LKf12xfLPQ#107708120842840792570/posts/1LKf12xfLPQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T15:09:51.730

所以，事实证明这很简单，我最近在我的应用程序中实现了。

需要在溢出菜单中显示的项目，将它们嵌套在一个菜单项下，如下所示：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/empty"
        android:orderInCategory="101"
        android:showAsAction="always"
        android:icon="@drawable/ic_action_overflow">

        <menu>        

            <item
                android:id="@+id/action_settings"
                android:orderInCategory="96"
                android:showAsAction="never"
                android:title="@string/menu_settings"
                android:icon="@drawable/ic_action_settings"/>

            <item
                android:id="@+id/action_share"
                android:orderInCategory="97"
                android:showAsAction="never"
                android:title="@string/menu_share"
                android:icon="@drawable/ic_action_share"/>

            <item
                android:id="@+id/action_rate"
                android:orderInCategory="98"
                android:showAsAction="never"
                android:title="@string/menu_rate"
                android:icon="@drawable/ic_action_important"/>

            <item
                android:id="@+id/action_feedback"
                android:orderInCategory="99"
                android:showAsAction="never"
                android:title="@string/menu_feedback"
                android:icon="@drawable/ic_action_edit"/>

            </menu>         
        </item>
</menu> 
```

现在，编辑主活动文件，如下所示：

```
package com.example.test;
//all your import statements go here

Menu mainMenu=null;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState); }

@Override
public boolean onCreateOptionsMenu(Menu menu) {     
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.main, menu);
mainMenu=menu;
return true; }

//Menu press should open 3 dot menu
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode==KeyEvent.KEYCODE_MENU) {
        mainMenu.performIdentifierAction(R.id.empty, 0);
        return true; }
    return super.onKeyDown(keyCode, event); } 
```

# java - Java: using ArrayList in HashMap with String as key

> ID：13092809
> 
> 赞同：2
> 
> 时间：2012-10-26T19:00:24.200
> 
> 标签：java, arraylist, hashmap

I don´t see where my bug is here, what I got is an array of Strings containing the following values, line by line:

```
San Jose -> San Francisco
San Jose -> Anchorage
New York -> Anchorage
New York -> San Jose
New York -> San Francisco
New York -> Honolulu
Anchorage -> New York
Anchorage -> San Jose
Honolulu -> New York
Honolulu -> San Francisco
Denver -> San Jose
San Francisco -> New York
San Francisco -> Honolulu
San Francisco -> Denver 
```

I want to put these values in a HashMap using the string on the right as the key, and have the value be an ArrayList, so that if I ask for destinations for 'San Jose', it will iterate through the list and return 'San Francisco' and 'Anchorage'. I haven´t managed to get the Key-Value relationship working correctly. Cause when the method is done running. For any city the value will be that of it´s last iteration, (San Francisco) returning New York, Honolulu and Denver for all keys.

```
 private void createDataBase()
{   
    ArrayList<String> tempValues = new ArrayList <String>();
    for (int i = 0; i < database.size();i++) 
    {
        String line = database.get(i);
        //String value = "";  
        if (line.length() > 1)
        {
            int keyStart = 0;
            int keyEnd = line.indexOf("-");

            int valueStart = keyEnd+3;
            int valueEnd = line.length();

            String key = line.substring(keyStart, keyEnd);
            String value = line.substring(valueStart, valueEnd);
            tempValues.add(value);
            System.out.println(keyValueDatabase.toString());
            keyValueDatabase.put(key, tempValues);

        }
        else 
        {
            tempValues.clear();
        }

    }
    System.out.println(keyValueDatabase.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:27:21.677

这是另一个值得关注的值：

我想您可以检查“keyValueDatabase”映射以查看该键是否已在映射中，如果它不存在，则添加一个新列表作为值，如果它确实抓取该列表并向其中添加一个项目。

```
private void createDataBase()
{
    for (int i = 0; i < database.size();i++) 
    {
    String line = database.get(i);
    //String value = ""; 
    if (line.length() > 1)
    {
        int keyStart = 0;
        int keyEnd = line.indexOf("-");

        int valueStart = keyEnd+3;
        int valueEnd = line.length();

        String key = line.substring(keyStart, keyEnd);
        String value = line.substring(valueStart, valueEnd);
        tempValues.add(value);
        System.out.println(keyValueDatabase.toString());

        //Check if the map already contains an entry for the key
        if(keyValueDatabase.containsKey(key))
        {
        //If yes, grab the value and add one to the list
        ArrayList<String> tempValues = keyValueDatabase.get(key);
        tempValues.add(value); //this should get updated in the same list due to reference
        }
        else
        {   ArrayList<String> tempValues = new ArrayList <String>();
        tempValues.add(value);
        keyValueDatabase.put(key, tempValues);
        }                        
    }
    }
    System.out.println(keyValueDatabase.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:07:51.667

除非您无法使用外部库，否则您可能需要考虑[MultiValueMap](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:13:02.567

您的这段代码是错误的：

```
tempValues.add(value);
System.out.println(keyValueDatabase.toString());
keyValueDatabase.put(key, tempValues); 
```

而不是上面的部分，你需要做这样的事情：

```
List<String> values = keyValueDatabase.get(key);
if (values == null) {
   values = new ArrayList <String>();
   keyValueDatabase.put(key, values);
}
values.add(value); 
```

...并删除`tempValues`.

# r - ggplot2 plotmatrix with free scales

> ID：13092823
> 
> 赞同：1
> 
> 时间：2012-10-26T19:00:58.970
> 
> 标签：r, statistics, ggplot2

I use plotmatrix to find correlations in a data frame:

```
# Reduce dataset to 1000 to make things run faster
d <- diamonds[sample(nrow(diamonds), 1000),]
plotmatrix(d[,-c(2:4)]) + geom_smooth(color="steelblue", method="lm") 
```

This works fine, as long as the different columns are of the same scale. If they are not, the columns with a small scale become useless. As you can see if you run the example above, price is the largest, and so it kills all the other columns.

To solve this problem in a grid, I would usually ask ggplot draw each scale independently using:

```
scales="free_x" 
```

However, how can I pass that into plotmatrix, or make plotmatrix scale Independently somehow?

![enter image description here](../Images/dbbc84130b8f10305a8e378fc10f3ec9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:55:57.273

根据上面 joran 的评论，使用 GGally 包中的 ggpairs：

```
# Reduce dataset to 1000 to make things run faster
d <- diamonds[sample(nrow(diamonds), 1000),]
ggpairs(d[,-c(2:4)], lower=list(continuous = "smooth")) 
```

# performance - Any way to move 2 bytes in 32-bit x86 using MOV without causing a mode switch or cpu stall?

> ID：13092829
> 
> 赞同：1
> 
> 时间：2012-10-26T19:01:36.367
> 
> 标签：performance, assembly, x86, intel

If I want to move 2 unsigned bytes from memory into a 32-bit register, can I do that with a `MOV` instruction and no mode switch?

I notice that you CAN do that with the `MOVSE` and `MOVZE` instructions. For example, with `MOVSE` the encoding `0F B7` moves 16 bits to a 32 bit register. It is a 3 cycle instruction, though.

Alternatively I guess I could move 4 bytes into the register and then somehow CMP just two of them somehow.

What is the fastest strategy for retrieving and comparing 16-bit data on 32-bit x86? Note that I am mostly doing 32-bit operations so I can't switch to 16-bit mode and stay there.

* * *

FYI to the uninitiated: the issue here is that 32-bit Intel x86 processors can `MOV` 8-bit data and 16-bit OR 32-bit data depending on what mode they are in. This mode is called the "D-bit" setting. You can use special prefixes 0x66 and 0x67 to use a non-default mode. For example, if you are in 32-bit mode, and you prefix the instruction with 0x66 this will cause the operand to be treated as 16-bit. The only problem is that doing this causes a big performance hit.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-11-27T17:28:41.343

**用于`movzx`在现代 CPU 上加载窄数据。** （或者`movsx`如果将其符号扩展而不是零扩展很有用，但`movzx`有时更快，而且从不慢。）

* * *

`movzx`只是在古老的[P5（原始 Pentium）](https://en.wikipedia.org/wiki/P5_(microarchitecture))微架构上很慢，本世纪没有任何东西。Pentium 品牌的 CPU 基于最近的微架构，如 Pentium G3258（Haswell，原始 Pentium 的 20 周年纪念版）是[完全不同的野兽](https://en.wikipedia.org/wiki/Pentium)，它们的性能与等效的 i3 相似，但没有 AVX、BMI1/2 或超线程。

不要根据 P5 指南/数字调整现代代码。然而，[Knight's Corner](https://en.wikipedia.org/wiki/Xeon_Phi#Design_and_programming) (Xeon Phi) 是基于修改后的 P54C 微架构，所以它可能也很慢`movzx`。Agner Fog 和[Instlatx64](http://instlatx64.atw.hu/)都没有 KNC 的每条指令吞吐量/延迟数。

* * *

**使用 16 位操作数大小的指令不会将整个流水线切换到 16 位模式或导致大的性能命中**。请参阅[Agner Fog 的 microarch pdf](http://agner.org/optimize/)以准确了解各种 x86 CPU 微架构（包括您似乎出于某种原因在谈论的与 Intel P5（原始 Pentium）一样古老的微架构）上什么是慢的和不慢的。

*在某些 CPU 上写入*16 位寄存器然后读取完整的 32/64 位寄存器会很慢（在 Intel P6 系列上合并时部分寄存器停顿）。在其他情况下，写入 16 位寄存器会合并到旧值中，因此即使您从未读取完整寄存器，在写入时也会对完整寄存器的旧值产生错误依赖。看看[哪个 CPU 做什么](https://stackoverflow.com/questions/41573502/why-doesnt-gcc-use-partial-registers/41574531#41574531)。（请注意，[Haswell/Skylake 仅单独重命名 AH](https://stackoverflow.com/questions/45660139/how-exactly-do-partial-registers-on-haswell-skylake-perform-writing-al-seems-to)，不像 Sandybridge（如 Core2/Nehalem）也将 AL / AX 与 RAX 分开重命名，但合并时不会停止。）

* * *

除非您特别关心有序 P5（或者可能是 Knight's Corner Xeon Phi，基于相同的内核，但 IDK 如果`movzx`在那里也很慢），请**使用**：

```
movzx   eax, word [src1]        ; as efficient as a 32-bit MOV load on most CPUs
cmp      ax, word [src2] 
```

`cmp`在所有现代 CPU 上有效解码的操作数大小前缀。在写入完整寄存器后读取 16 位寄存器总是可以的，另一个操作数的 16 位加载也可以。

操作数大小前缀不会改变长度，因为没有 imm16 / imm32。eg`cmp word [src2], 0x7F`很好（它可以使用符号扩展的 imm8），但
`cmp word [src2], 0x80`需要一个 imm16 并且会在某些 Intel CPU 上停止 LCP。（没有操作数大小前缀，相同的操作码将有一个 imm32，即指令的*其余部分*将是不同的长度）。相反，使用`mov eax, 0x80`/ `cmp word [src2], ax`。

地址大小前缀可以在 32 位模式下改变长度（disp32 与 disp16），但我们不想使用 16 位寻址模式来访问 16 位数据。我们仍在使用`[ebx+1234]`(or `rbx`)，而不是`[bx+1234]`.

* * *

在现代 x86 上：Intel P6 / SnB-family / Atom / Silvermont，至少从 K7 开始的 AMD，即**本世纪制造的任何东西，比实际的 P5 Pentium 更新，`movzx`负载*非常*有效**。

**在许多 CPU 上，加载端口直接支持`movzx`（有时也支持`movsx`），因此它仅作为加载 uop 运行，而不是作为加载 + ALU。**

**来自 Agner Fog 指令集表的数据**：请注意，它们可能无法涵盖所有​​极端情况，例如`mov`-load 数字可能仅适用于 32 / 64 位加载。另请注意，**Agner Fog 的加载延迟数字*不是***来自 L1D 缓存的**加载使用延迟；**`movzx`它们仅作为存储/重新加载（存储转发）延迟的一部分才有意义，但相对数字会告诉我们在其上增加了多少周期`mov`（通常没有额外的周期）。

（更新：[https](https://uops.info/) ://uops.info/具有更好的测试结果，实际上反映了负载使用延迟，并且它们是自动化的，因此更新电子表格时的拼写错误和文书错误不是问题。但 uops.info 只会返回英特尔的 Conroe（第一代酷睿 2），AMD 的只有 Zen。）

*   P5 Pentium（按顺序执行）： - `movzx`load 是 3 周期指令（加上`0F`前缀的解码瓶颈），而`mov`-loads 是单周期吞吐量。（不过，它们仍然有延迟）。

*   **英特尔**：

*   PPro / Pentium II / III: `movzx`/`movsx`仅在加载端口上运行，吞吐量与普通`mov`.

*   Core2 / Nehalem：相同，包括 64-bit `movsxd`，除了在 Core 2 上[的`movsxd r64, m32`负载需要负载 + ALU uop](https://uops.info/html-instr/MOVSXD_R64_M32.html)，它们不会微熔。

*   Sandybridge 系列（SnB 通过 Skylake 及更高版本）：`movzx`/`movsx`加载是单 uop（只是一个加载端口），并且执行与`mov`加载相同。

*   Pentium4 (netburst)：`movzx`仅在加载端口上运行，性能与`mov`. `movsx`是负载+ ALU，并且需要1个额外的周期。

*   Atom（按顺序）：Agner 的表不清楚内存源`movzx`/`movsx`需要 ALU，但它们肯定很快。延迟数仅适用于 reg,reg。

*   Silvermont：与 Atom 相同：速度快但不清楚是否需要端口。

*   KNL（基于 Silvermont）：Agner 将`movzx`/`movsx`与内存源列为使用 IP0 (ALU)，但延迟相同，`mov r,m`因此没有惩罚。（执行单元压力不是问题，因为 KNL 的解码器无论如何都几乎无法保持其 2 个 ALU 的馈送。）

*   **超微**：

*   Bobcat：`movzx`/`movsx`负载是每个时钟1个，5个周期延迟。 `mov`-load 是 4c 延迟。

*   Jaguar：`movzx`/`movsx`负载是每个时钟 1 个，4 个周期延迟。 `mov`负载为每个时钟 1 个，32/64 位延迟 3c，或 4c `mov r8/r16, m`（但仍然只有 AGU 端口，而不是像 Haswell/Skylake 那样的 ALU 合并）。

*   K7/K8/K10: `movzx`/`movsx`负载有 2-per-clock 吞吐量，延迟比`mov`负载高 1 个周期。他们使用 AGU 和 ALU。

*   Bulldozer-family：与 K10 相同，但`movsx`-load 有 5 个周期延迟。 `movzx`-load 有 4 个周期延迟，`mov`-load 有 3 个周期延迟。因此，理论上，如果来自 16 位加载的错误依赖不需要额外的 ALU 合并，或者为循环创建循环携带的依赖，那么它可能会降低到`mov cx, word [mem]`然后（1 个周期）的延迟。`movsx eax, cx``mov`

*   Ryzen: `movzx`/`movsx`负载仅在负载端口中运行，延迟与`mov`负载相同。

*   **通过**

*   通过 Nano 2000/3000：`movzx`仅在加载端口上运行，延迟与`mov`加载相同。 `movsx`是 LD + ALU，有 1c 的额外延迟。

当我说“性能相同”时，我的意思是不计算任何部分寄存器惩罚或缓存行拆分来自更广泛的负载。例如 a`movzx eax, word [rsi]`避免了与`mov ax, word [rsi]`Skylake 的合并惩罚，但我仍然会说它的`mov`性能与`movzx`. （我想我的意思是，`mov eax, dword [rsi]`没有任何缓存行拆分与 .）一样快`movzx eax, word [rsi]`。）

* * *

**[`xor`](https://stackoverflow.com/questions/33666617/what-is-the-best-way-to-set-a-register-to-zero-in-x86-assembly-xor-mov-or-and)-在写入 16 位寄存器之前[将完整寄存器归零](https://stackoverflow.com/questions/33666617/what-is-the-best-way-to-set-a-register-to-zero-in-x86-assembly-xor-mov-or-and)**可避免以后在英特尔 P6 系列上出现部分寄存器合并停顿，以及破坏错误的依赖关系。

如果您也想在 P5 上运行良好，那么这可能会更好一些，而在除 PPro 到 PIII 之外的任何现代 CPU 上都不会差很多，其中`xor`-zeroing 不会破坏深度，即使它仍然被认为是归零 -使 EAX 等同于 AX 的成语（在写入 AL 或 AX 后读取 EAX 时不会出现部分寄存器停顿）。

```
;; Probably not a good idea, maybe not faster on anything.

;mov  eax, 0             ; some code tuned for PIII used *both* this and xor-zeroing.
xor   eax, eax           ; *not* dep-breaking on early P6 (up to PIII)
mov    ax, word [src1]
cmp    ax, word [src2]

; safe to read EAX without partial-reg stalls 
```

操作数大小前缀对于 P5 并不理想，因此如果您确定它没有故障、跨越缓存线边界或导致最近的存储转发失败，您可以考虑使用 32 位加载16 位存储。

实际上，我认为 Pentium 上的 16 位`mov`加载可能比`movzx`/ `cmp`2 指令序列慢。对于像 32 位一样高效地处理 16 位数据，似乎真的不是一个好的选择！（当然，除了打包的 MMX 东西）。

有关 Pentium 的详细信息，请参阅 Agner Fog 的指南，但是操作数大小前缀在 P1（原始 P5）和 PMMX 上解码需要额外的 2 个周期，因此这个序列实际上可能比`movzx`负载更糟糕。在 P1（但不是 PMMX）上，`0F`转义字节（由 使用`movzx`）也算作前缀，需要一个额外的周期来解码。

显然`movzx`无论如何都不能配对。多周期`movzx`会隐藏 的解码延迟`cmp ax, [src2]`，因此`movzx`/`cmp`可能仍然是最佳选择。或安排说明，以便`movzx`更早完成，并且`cmp`可以与某些东西配对。无论如何，P1/PMMX 的调度规则相当复杂。

* * *

**我在 Core2 (Conroe) 上对这个循环进行了计时，以证明异或归零可以避免 16 位寄存器**和低 8 位寄存器（如 for `setcc al`）的部分寄存器停顿：

```
mov     ebp, 100000000
ALIGN 32
.loop:
%rep 4
    xor   eax, eax
;    mov   eax, 1234    ; just break dep on the old value, not a zeroing idiom
    mov   ax, cx        ; write AX
    mov   edx, eax      ; read EAX
%endrep

    dec   ebp           ; Core2 can't fuse dec / jcc even in 32-bit mode
    jg   .loop          ; but SnB does 
```

`perf stat -r4 ./testloop`在静态二进制文件中为此输出，该二进制文件在之后进行 sys_exit 系统调用：

```
 ;; Core2 (Conroe) with   XOR eax, eax
       469,277,071      cycles                    #    2.396 GHz
     1,400,878,601      instructions              #    2.98  insns per cycle
       100,156,594      branches                  #  511.462 M/sec
             9,624      branch-misses             #    0.01% of all branches

       0.196930345 seconds time elapsed                                          ( +-  0.23% ) 
```

每个周期 2.98 条指令有意义：3 个 ALU 端口，所有指令都是 ALU，并且没有宏融合，因此每个是 1 uop。所以我们以前端容量的 3/4 运行。循环有`3*4 + 2`指令/微指令。

Core2 上的情况*非常*不同，**带有`xor`-zeroing 注释并使用 the`mov eax, imm32`代替**：

```
 ;; Core2 (Conroe) with   MOV eax, 1234
 1,553,478,677      cycles                    #    2.392 GHz
 1,401,444,906      instructions              #    0.90  insns per cycle
   100,263,580      branches                  #  154.364 M/sec
        15,769      branch-misses             #    0.02% of all branches

   0.653634874 seconds time elapsed                                          ( +-  0.19% ) 
```

0.9 IPC（从 3 下降）与前端停止 2 到 3 个周期以在每个`mov edx, eax`.

Skylake 以相同的方式运行两个循环，因为`mov eax,imm32`它仍然会破坏依赖关系。（与大多数具有只写目标的指令一样，但要注意来自[和](https://stackoverflow.com/questions/21390165/why-does-breaking-the-output-dependency-of-lzcnt-matter)[/的](https://stackoverflow.com/questions/21390165/why-does-breaking-the-output-dependency-of-lzcnt-matter)[错误依赖关系`popcnt``lzcnt``tzcnt`](https://stackoverflow.com/questions/21390165/why-does-breaking-the-output-dependency-of-lzcnt-matter)）。

实际上，`uops_executed.thread`性能计数器确实显示出不同：在 SnB 系列上，异或归零不需要执行单元，因为它是在问题/重命名阶段处理的。（`mov edx,eax`在重命名时也被消除，因此 uop 计数实际上非常低）。无论哪种方式，循环计数都相同到不到 1%。

```
 ;;; Skylake (i7-6700k) with xor-zeroing
 Performance counter stats for './testloop' (4 runs):

         84.257964      task-clock (msec)         #    0.998 CPUs utilized            ( +-  0.21% )
                 0      context-switches          #    0.006 K/sec                    ( +- 57.74% )
                 0      cpu-migrations            #    0.000 K/sec                  
                 3      page-faults               #    0.036 K/sec                  
       328,337,097      cycles                    #    3.897 GHz                      ( +-  0.21% )
       100,034,686      branches                  # 1187.243 M/sec                    ( +-  0.00% )
     1,400,195,109      instructions              #    4.26  insn per cycle           ( +-  0.00% )  ## dec/jg fuses into 1 uop
     1,300,325,848      uops_issued_any           # 15432.676 M/sec                   ( +-  0.00% )    ###   fused-domain
       500,323,306      uops_executed_thread      # 5937.994 M/sec                    ( +-  0.00% )    ### unfused-domain
                 0      lsd_uops                  #    0.000 K/sec                  

       0.084390201 seconds time elapsed                                          ( +-  0.22% ) 
```

lsd.uops 为零，因为循环缓冲区被微码更新禁用。前端的瓶颈：uops（融合域）/clock = 3.960（共 4 个）。最后一个 .04 可能部分是操作系统开销（中断等），因为这仅计算用户空间微指令。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-30T01:11:33.977

坚持32位模式并使用16位指令

```
mov eax, 0         ; clear the register
mov ax, 10-binary  ; do 16 bit stuff 
```

> 或者我想我可以将 4 个字节移动到寄存器中，然后以某种方式 CMP 只有其中两个

```
mov eax, xxxx ; 32 bit num loaded
mov ebx, xxxx
cmp ax, bx    ; 16 bit cmp performed in 32 bit mode 
```

# php - 识别方法向字符串添加附加字符（编码/转义）

> ID：13092831
> 
> 赞同：1
> 
> 时间：2012-10-26T19:01:43.797
> 
> 标签：php, encoding, escaping

我正在使用一个 PHP 程序，该程序在多台服务器上运行并从其中两台服务器生成略有不同的字符串。

```
**Server 1 Request Data:**

a:10:{s:9:"locale";s:5:"en_US","url";s:18:"https://testingurl.com/index.php";}

**Server 2 Request Data:**

{"locale":"en_US","url":"https:\/\/testingurl.com\/index.php";} 
```

两台服务器都发送相同的变量，但格式略有不同。服务器 1 在请求之前添加了附加信息，例如 a:3:，而服务器 2 省略了这些细节，但转义了正斜杠。

**问题：** a:3: , s:9: 是一种通用编码，还是服务器配置可能添加到请求中的东西？我不熟悉格式，想知道它是否常见。我的目标是确定是 PHP 程序添加了附加信息还是服务器配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:07:35.523

很容易

*   服务器 1 正在发送 [PHP 序列化格式](http://php.net/manual/en/function.serialize.php)
*   服务器 2 正在发送[Json 格式](http://php.net/manual/en/function.json-decode.php)

当前的问题

此序列化格式无效

```
a:10:{s:9:"locale";s:5:"en_US","url";s:18:"https://testingurl.com/index.php";}
   ^    ^                               ^
   2    6                              32 
```

这就是我认为它应该看起来的样子

```
$server1 = 'a:2:{s:6:"locale";s:5:"en_US";s:3:"url";s:32:"https://testingurl.com/index.php";}';
var_dump(unserialize($server1));

$server2 = '{"locale":"en_US","url":"https:\/\/testingurl.com\/index.php"}';
var_dump(json_decode($server2, true)); 
```

输出

```
array
  'locale' => string 'en_US' (length=5)
  'url' => string 'https://testingurl.com/index.php' (length=32) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:07:01.950

第一种格式是用 编码的 php 序列化变量[`serialize`](http://www.php.net/manual/en/function.serialize.php)，第二种是[`JSON`](http://json.org)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:09:27.983

a:10 和 s:9 以及类似的字符是 PHP 序列化的，而整个字符串看起来像是 JSON 编码的。也就是说，格式看起来不正确（我假设您只是省略了一些输出），但这里有一个如何生成它的示例：

```
 $a=json_encode(array('locale'=>'en_US','url'=>'https://testingurl.com/index.php'));
 echo $a;
 echo "<br />";
 echo serialize($a); 
```

# operating-system - \n\r 在不同操作系统上的行为是否不同？

> ID：13092837
> 
> 赞同：0
> 
> 时间：2012-10-26T19:02:10.703
> 
> 标签：operating-system, terminal, telnet, eol

我有一个服务器和一个客户端程序，它们通过套接字连接相互通信。它发送我通过 telnet /（或终端？在 mac 上）监控的数据字符串。

当我使用我的 MAC 作为服务器并将我的 PC 作为客户端时，它工作正常。当我将 MAC 用作客户端并将 PC 用作服务器时，它不起作用**......**（！？）

可能是 `"\n\r"`因为有两个不同的操作系统，它的解释器（EOL？）不同吗？

有没有人有关于如何轻松解决这个问题的线索/提示/解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:13:56.203

Windows 实际上`\r\n`用作 EOL。不过，它不应该在不同的操作系统上表现不同。Mac 使用`\r`，因此它忽略`\n`，反之亦然 *nix。Windows 忽略两者`\r`，`\n`除非它们在 order 中彼此相邻`\r\n`。

使用 EOL 进行编程时，大多数语言仅`\n`在必要时使用并自动转换格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:16:36.247

如果我没记错的话，Mac 使用 CR ("\r") 作为它们的单个行尾字符。由于 Windows 使用 "\r\n" (CR-LF) 作为行尾，您可能需要在代码中对此进行补偿。

# java - 添加两个xml。使用 XSLT 转换器

> ID：13092839
> 
> 赞同：0
> 
> 时间：2012-10-26T19:02:25.430
> 
> 标签：java, xml, xslt, mule

我正在寻找一个让我很困扰的场景的解决方案。

我正在开发骡子 3.3。

我有一些传入的 XML 和来自丰富器的第二个 XML。

现在将来自浓缩器的 xml 添加到我的输入 XML 中。

我的流程如下所示（摘要）

```
<flow name="main" >
    <file:inbound  ....> 
    <enricher target="#[variable:myProperty]">
        <vm:outbound .... />
    </enricher>

    <xslt transformer .... />
    .......
    .......
    <file:outbound ..>
</flow> 
```

我的 Mule Flow 部分和 XSL 如下所示

```
 <mulexml:xslt-transformer   maxIdleTransformers="2" maxActiveTransformers="5"   xsl-file="C:\NSBTransformerXSL.xsl" outputEncoding="UTF-8" doc:name="XSLT">

        <mulexml:context-property key="RefXML"  value="#[header:INVOCATION:RefXML]" />
    </mulexml:xslt-transformer> 
```

我的 XSL 在下面给出

```
<xsl:param name="RefXML"></xsl:param>

<xsl:template match="@*|node()">        
    <xsl:copy   >             
        <xsl:apply-templates select="@*|node()"/>                  
    </xsl:copy>    
</xsl:template>

<xsl:template match="TXRequest">
    <xsl:copy copy-namespaces="no" >
        <xsl:apply-templates select="@* | node()"/>         
        <xsl:copy-of select="$RefXML"/>                         
    </xsl:copy>
</xsl:template> 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:02:54.960

使用 XSL-T 转换器并将您从扩充器获得的 XML 片段作为命名参数传递给您的 XSL。

这样您就可以轻松地组合两个 XML。

这样做的正确方法是解析`RefXML`为 DOM 元素，然后将其作为 XSL 参数传递，但[Mule 中的一个错误](http://www.mulesoft.org/jira/browse/MULE-6501)阻止了这一点:(

所以唯一的选择是字符串值的逐字复制`RefXML`：

```
<xsl:value-of select="$RefXML" disable-output-escaping="yes" /> 
```

不是超级令人满意，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:22:33.013

目前尚不清楚您的问题或问题是什么。我相信您很难将这两个 xml 片段结合起来。

如果是这种情况，我可能会建议使用 Datamapper -http://www.mulesoft.org/documentation/display/MULE3STUDIO/DataMapper+Transformer+Reference

尝试具体说明您的问题，人们也喜欢问您正在使用什么版本的骡子。（希望我能把这篇文章作为评论）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T10:38:27.473

您还可以使用[saxon:parse 扩展名](http://saxonica.com/documentation9.4-demo/html/extensions/functions/parse.html)。以下对我有用：

```
<xsl:param name="RefXMLIn"/>
<xsl:variable name="RefXML" select="saxon:parse($RefXMLIn)" xmlns:saxon="http://saxon.sf.net/"/> 
```

它将接收 XML 的参数重命名为文本，并用解析函数的结果填充原始变量。

这个扩展是特定于 Saxon 的，但是 Saxon 是 Mule 附带的默认 XML 库。

# php - 如何利用 Elo 的评分系统正确地进行所有事物之间的比较？

> ID：13092845
> 
> 赞同：1
> 
> 时间：2012-10-26T19:02:39.720
> 
> 标签：php, comparison, scalability

我已经设法在项目上实施 Elo 的评级系统。我正在比较的内容并不重要，但是例如，假设我们试图通过用户输入找出主观上最好的数字是（1|2|3|4|5，但这可以是任何范围/集合） .

最常用的做法是选择集合中的两个随机元素并让用户选择其中一个。请注意，这并不能正确地将所有内容与所有内容进行比较；您可能会得到重复的比较，并且某些组合可能永远不会被比较。

我的想法是使用正在比较的内容之间的所有唯一组合填充组合表（行数：{count Array elements}选择2 /示例：5 nCr 2）。A 和 b 是包含 elo 评级系统数据的分数表的外键。

如果元素消失，则可以清理表，当添加新元素时，会将一组新排列添加到表中。

```
id   a    b
1    1    2
2    1    3
3    1    4
4    1    5
5    2    3 
```

然后将向用户显示从组合表中随机选择的组合：( `[...] WHERE NOT id IN (ids of combinations this user has already set a vote for`))。如果什么都没有，将显示一条消息“所有内容都已与所有内容进行比较，在 {cron_time} 之后返回！”。

用户无需注册即可进行比较。即插即用。这是最先出现的问题之一。如何识别唯一用户？会话可以工作，但用户可以轻松地更新它们。想法？

这种实现的规模**非常可怕**。对于每个新用户（processed_combinations，即使每天被截断，也会变得很大）和组合表。当然，将 1 到 5 与少数用户进行比较可以正常工作，但如果我们想比较 1 到 100 甚至千位怎么办？

您对更好的实施有何想法？

# c# - 如何使用 cookie 请求.getresponse()

> ID：13092846
> 
> 赞同：0
> 
> 时间：2012-10-26T19:02:40.240
> 
> 标签：c#, webrequest

我想添加 Cookie 并获取 http 网站源如何将 Cookie 添加到我的代码中，以及当 getresponse() 网站读取我的 Cookie 时？

```
enter code here
WebRequest scienceRequest = WebRequest.Create("http://www.google.com");       
WebResponse scienceResponse = scienceRequest.GetResponse();
Stream ReceiveStream = scienceResponse.GetResponseStream();
scienceResponse = scienceRequest.GetResponse();
ReceiveStream = scienceResponse.GetResponseStream();
StreamReader readStream = new StreamReader(ReceiveStream, encode);
string strResponse = readStream.ReadToEnd();
readStream.Close();
scienceResponse.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:17:21.927

您可以`CookieContainer`为此使用 a 。您可以使用

```
CookieContainer cookieJar = new CookieContainer();
// Optionally add some values to the container
cookieJar.Add(new Uri("http://www.domain.com"), new Cookie("name", "Raeled")); 
```

然后，您可以将容器附加到您的请求（您可以一次又一次地这样做以继续使用相同的 cookie）：

```
(scienceRequest as HttpWebRequest).CookieContainer = cookieJar; 
```

然后，网页将使用容器中的 cookie，并在需要时更改它们。如果网页更改了它们，您可以使用以下命令将它们读回：

```
CookieCollection collection = cookieJar.GetCookies(new Uri("http://www.domain.com"));
string myValue = collection["name"].Value; 
```

要获取或设置，您需要提供 URI，因为 CookieContainer 可以在单个`CookieContainer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:16:32.183

我发现[了这个](http://msdn.microsoft.com/en-us/library/dd920298%28v=vs.95%29.aspx?ppud=4)：

```
private void ReadCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
    HttpWebResponse response = (HttpWebResponse)
        request.EndGetResponse(asynchronousResult);
    using (IsolatedStorageFile isf =
        IsolatedStorageFile.GetUserStoreForSite())
    {
        using (IsolatedStorageFileStream isfs = isf.OpenFile("CookieExCookies",
            FileMode.OpenOrCreate, FileAccess.Write))
        {
            using (StreamWriter sw = new StreamWriter(isfs))
            {
                foreach (Cookie cookieValue in response.Cookies)
                {
                    sw.WriteLine("Cookie: " + cookieValue.ToString());
                }
                sw.Close();
            }
        }

    }
} 
```

# pointers - 在 realloc 移动该数组的内存位置后如何更新和指向数组元素的指针数组

> ID：13092847
> 
> 赞同：0
> 
> 时间：2012-10-26T19:02:44.600
> 
> 标签：pointers, malloc, realloc

我是一个初学者，并且在动态内存分配方面遇到了很大的困难。如果有人可以帮助我解决这个问题，我将不胜感激。

我使用 malloc 将一些内存分配给数组节点，使用：

```
struct nodeT {
int id;
nodeT *parent, *T1, *T2;
};

struct nodeT* T;
T =  (struct nodeT*) malloc( 256*sizeof(struct nodeT) );

Then in order to reference T, I use a an array of pointers to T, call it Tptr:

struct nodeT** Tptr;
Tptr = (struct nodeT**) malloc( 256*sizeof(struct nodeT*) ); 
```

在我的代码中，我在 T 中填充数据，然后迭代地设置 *Tptr = T，如下所示：

```
nodeT* s = &T[ 1*21 ];
s->id=23;
s->T1=...
s->T2=...
s->parent=... 
```

接着

```
sptr = &Tptr[ 1*21 ];
*sptr=s;
and it works fine. 
```

但有时，当我调用 realloc 来增加 T 的大小，然后我检查 *sptr 时，它不再有效，我在运行时遇到分段错误。我认为 realloc 有时可能会将整个内存块移动到新位置，而 *sptr 则一直指向旧位置。

知道如何在每次重新分配后更新所有 Tptr。

如果我从一开始就使用大尺寸的 T 并为 T 禁用 realloc，一切正常。但我希望它能够动态增加数组大小。

最好的问候瓦贾哈特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:46:54.713

您对 malloc 的调用设置了 T。当您调用 re-alloc 时，您不能假设 T 将在同一个地方因为 Tptr 在调用后设置了 Tptr = T

```
T =  (struct nodeT*) malloc( 256*sizeof(struct nodeT) ); 
```

您的指针数组 TPtr 需要在 T 上的每个 realloc 之后重新填充。如果您不想自己执行此操作，请使用向量而不是数组和 realloc

# c# - 用非打印字符替换子字符串

> ID：13092849
> 
> 赞同：0
> 
> 时间：2012-10-26T19:02:54.713
> 
> 标签：c#, string, encoding

> **可能重复：**
> [编码为单字节扩展 ascii 值](https://stackoverflow.com/questions/4623650/encode-to-single-byte-extended-ascii-values)

在 C# 中，我试图用非打印字符（字节码高于 0xE0 的字符）替换字符串中的子字符串。我已经看到许多问题是相反的——即尝试从字符串中删除非打印字符——但不尝试插入非打印字符。下面的代码（不能正常工作）是我现在所在的位置：

```
string[] _symbol = {"Hello", "the", "man"};
string _source = "\"Hello, Hello,\" the man said.\n\"Hello,\" the woman replied.";
string _expect = "\"\xF3, \xF3,\" \xF2 \xF1 said.\n\"\xF3,\" \xF2 wo\xF1 replied.";

byte[] tblix = { 0xF3, 0x00 };
string _repl, _dest;

_repl = System.Text.Encoding.UTF8.GetString(tblix, 0, 1);
_dest = _source.Replace(_symbol[0], _repl);

tblix[0]--;
_repl = System.Text.Encoding.UTF8.GetString(tblix, 0, 1);
_dest = _dest.Replace(_symbol[1], _repl);

tblix[0]--;
_repl = System.Text.Encoding.UTF8.GetString(tblix, 0, 1);
_dest = _dest.Replace(_symbol[2], _repl);

bool check = (_dest == _expect);

File.WriteAllText("temp.dat", _dest); 
```

我期望在 _dest 中产生一个相当于 _expect 的字符串；如果我使用 ASCII 编码，非打印字符将恢复为“？”。UTF8 也不能正常工作。此外，我希望将输出作为单字节字符序列写入文件，因此将所有内容转换为多字节编码最终需要返回单字节表示。有没有一种方便的方法来做我想要完成的事情？在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:29:47.883

直接创建字符，而不是从编码...

```
 string file = @"C:\Temp\temp.dat";

        string[] _symbol = { "Hello", "the", "man" };
        string _source = "\"Hello, Hello,\" the man said.\n\"Hello,\" the woman replied.";
        string _expect = "\"\xF3, \xF3,\" \xF2 \xF1 said.\n\"\xF3,\" \xF2 wo\xF1 replied.";

        //byte[] tblix = { 0xF3, 0x00 };

        char c = (char)0xF300;

        string _repl, _dest;

        //_repl = System.Text.Encoding.UTF8.GetString(tblix, 0, 1);
        _dest = _source.Replace(_symbol[0], c.ToString());

        c -= (char)0x100;
        //_repl = System.Text.Encoding.UTF8.GetString(tblix, 0, 1);
        _dest = _dest.Replace(_symbol[1], c.ToString());

        c -= (char)0x100;
        //_repl = System.Text.Encoding.UTF8.GetString(tblix, 0, 1);
        _dest = _dest.Replace(_symbol[2], c.ToString());

        bool check = (_dest == _expect);

        File.WriteAllText(file, _dest); 
```

我相信这是试图转换为可打印的字符，而创建 char 会直接强制打印确切的字符（或在这种情况下不打印）。这是我从您那里复制并放入新控制台应用程序的代码的副本。完全按照你说的做了，我做了这些改变，然后它就起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:49:06.693

我能够使用 Windows-1252 编码使其工作，如下面的修改代码所示。我还必须确保该文件也以 1252 编码编写。

```
string file = @"C:\Temp\temp.dat";

string[] _symbol = { "Hello", "the", "man" };
string _source = "\"Hello, Hello,\" the man said.\n\"Hello,\" the woman replied.";
string _expect = "\"\xF3, \xF3,\" \xF2 \xF1 said.\n\"\xF3,\" \xF2 wo\xF1 replied.";
byte[] tblix = { 0xF3 };

string _repl, _dest;

Encoding e1252 = Encoding.GetEncoding(1252);
_repl = e1252.GetString(tblix);
_dest = _source.Replace(_symbol[0], _repl);

tblix[0]--;
_repl = e1252.GetString(tblix);
_dest = _dest.Replace(_symbol[1], _repl);

tblix[0]--;
_repl = e1252.GetString(tblix);
_dest = _dest.Replace(_symbol[2], _repl);

bool check = (_dest == _expect);

TextWriter tw = new StreamWriter(file, false, e1252);
tw.Write(_dest);
tw.Close(); 
```

# git - What is the difference between git diff origin/master ... origin/branch and git diff origin/master...origin/branch?

> ID：13092854
> 
> 赞同：3
> 
> 时间：2012-10-26T19:03:06.770
> 
> 标签：git

Git diff seems to return different changes when comparing:

```
git diff origin/master ... origin/branch
git diff origin/master...origin/branch 
```

What's the difference between the two? For those that can't see the difference in the first command, the `...` is buffered by spaces.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T21:51:01.693

Usually the "dots" notation is for specifying ranges and full doc on that is available in `git log --help` section "Specifying Revisions" and mostly used for listings like `git log`.

Briefly speaking you have two branches started from commit a:

```
a - b - c (master)
\d - e (topic) 
```

`git log master..topic` will show you commits that are reachable from topic but not reachable from master, effectively "d" and "e"

`git log topic..master` will show you commits that are reachable from master but not reachable from topic, effectively "b" and "c"

Now `git log master...topic` (note three dots) will show you all commits that are reachable from either master or topic but not from both, effectively b,c,d and e

The diff though is working with two points of history, not the ranges so for example the notation

```
git diff topic master 
```

or

`git diff topic..master`

should return the same result, i.e. the diff between the tips of the branches specified The three dots notation

`git diff topic...master`

should show the changes that occurred in master since the topic branch was forked off of it

As Jan pointed out the notation with the three dots surrounded by spaces is understood by git as the difference between the tips of the branches (like no dots or two dots) in case when HEAD is pointing to the same commit as one of the branches of interest. In cases when HEAD is neither topic or master it will result in three way diff.

Hope that helps!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T22:04:31.347

The correct syntax is without spaces and does diff from common ancestor to the right branch.

With spaces it should be an error, because `...` is neither revision nor path, but the argument parser takes it as synonym for HEAD. Probably side-effect of the fact, that `...branch` means `HEAD...branch` and `branch...` means `branch...HEAD`. Together with the fact that git diff can take any number of arguments and produces n-way diffs when given more than 2 *distinct* arguments. I've checked and indeed `git diff A ... B` produces a 3-way diff when neither `A` nor `B` point to the same revision as `HEAD`.

# android - Android - 如何将硬编码的 2 列布局切换为处理屏幕宽度的动态布局？

> ID：13092855
> 
> 赞同：0
> 
> 时间：2012-10-26T19:03:13.153
> 
> 标签：android, android-layout

我目前有这个 2 列布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:paddingLeft="4dip"
     android:layout_width="fill_parent"

     android:layout_height="wrap_content"
     android:orientation="horizontal">

     <TextView android:id="@+id/TRAIN_CELL"
         android:layout_width="0dip"
         android:layout_height="wrap_content"
         android:textSize="16sp"
         android:layout_weight="11"/>

     <TextView android:id="@+id/TO_CELL"
         android:layout_width="0dip"
         android:textSize="20sp"
         android:textStyle="bold" 
         android:gravity="center"
         android:textColor="@color/light_best_blue"
         android:layout_height="wrap_content"  
         android:layout_weight="1"/>

</LinearLayout> 
```

左边是文本，右边是这个字符“>”，向用户发出可以按下它的信号。我没有用像素数对列表进行硬编码，但是有没有办法让它更具动态性并消除屏幕百分比？

谢谢！

编辑：

我尝试了上面的布局，它看起来很奇怪，“>”字符显示为左侧文本之后的下一个字符。知道为什么会这样吗？

# python - Python：多个安装，如何修复一个 python 版本？

> ID：13092857
> 
> 赞同：0
> 
> 时间：2012-10-26T19:03:20.610
> 
> 标签：python, virtualenv

我正在运行 python `Macbook Air`，我意识到我通过多个路径安装了许多版本的 python

```
hhimanshu@air~ - 11:43:51  $ which python
python is /Users/hhimanshu/.virtualenvs/envs/bi/bin/python
python is /Library/Frameworks/Python.framework/Versions/Current/bin/python
python is /opt/local/bin/python
python is /usr/bin/python

(bi)hhimanshu@air~ - 11:56:54  $ /Users/hhimanshu/.virtualenvs/envs/bi/bin/python --version
Python 2.7.2

(bi)hhimanshu@air~ - 11:57:03  $ /Library/Frameworks/Python.framework/Versions/Current/bin/python --version
Python 2.7.3 -- EPD_free 7.3-2 (32-bit)

(bi)hhimanshu@air~ - 11:57:13  $ /opt/local/bin/python --version
Python 2.7.3

(bi)hhimanshu@air~ - 11:57:22  $ /usr/bin/python --version
Python 2.7.2 
```

我的`$PATH`价值看起来像

```
(bi)hhimanshu@air~ - 11:57:28  $ echo $PATH
/Users/hhimanshu/.virtualenvs/envs/bi/bin:/Users/hhimanshu/.pythonbrew/bin:/Library/Frameworks/Python.framework/Versions/Current/bin:/Users/hhimanshu/.rvm/gems/ruby-1.9.2-p318/bin:/Users/hhimanshu/.rvm/gems/ruby-1.9.2-p318@global/bin:/Users/hhimanshu/.rvm/rubies/ruby-1.9.2-p318/bin:/Users/hhimanshu/.rvm/bin:/Users/hhimanshu/.rbenv/shims:/Users/hhimanshu/.rbenv/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/mongodb/bin:/usr/local/sbin:/usr/local/mysql/bin:/Users/hhimanshu/.ec2/bin 
```

我看到了问题，因为当我使用`virtualenv`并查看我拥有的 python 版本时，我看到了

```
 $ yolk -l
    Python          - 2.7.2        - active development (/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload)
    pip             - 1.2.1        - active 
    setuptools      - 0.6c11       - active 
    wsgiref         - 0.1.2        - active development (/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7)
    yolk            - 0.4.3        - active 
```

但我需要的是

```
$ /Library/Frameworks/Python.framework/Versions/Current/bin/python --version
Python 2.7.3 -- EPD_free 7.3-2 (32-bit) 
```

如何修复我的环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:03:38.443

以下命令将为您提供帮助。

```
export PATH=/Library/Frameworks/Python.framework/Versions/Current/bin:$PATH 
```

并检查路径是否更新。

或者您可以编辑相应的配置（主目录中的 .profile）文件以在 Mac OS 中进行永久更改。（在 Unix 系统中有一个名为 .bash_profile 的文件应该被编辑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T05:41:57.097

你的问题是你已经把你的虚拟环境放在你的 中`PATH`，所以使用了第一个遇到的 Python - 这是 2.7.2。

你永远不应该把 venv 放在你的路上；这也会在以后引起其他问题。要激活虚拟环境，请`source /path/to/virtulaenv/bin/activate`稍后键入`deactivate`以重置您的 shell。

删除您的前两个组件`PATH`：

`/Users/hhimanshu/.virtualenvs/envs/bi/bin:/Users/hhimanshu/.pythonbrew/bin:`

（virtualenvrionment 和 pythonbrew）通过修改你的点文件；关闭并重新启动终端以使 PATH 更改生效。

# java - Java 中的时区验证

> ID：13092865
> 
> 赞同：15
> 
> 时间：2012-10-26T19:04:05.740
> 
> 标签：java, validation, timezone

我有一个字符串，我需要检查它是否是标准时区标识符。我不确定我需要使用哪种方法。

```
String timeZoneToCheck = "UTC"; 
```

我想检查它是否代表一个有效的时区。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-08-01T13:11:56.960

你可以写在一行

```
public boolean validTimeZone(String timezone) {
    return Set.of(TimeZone.getAvailableIDs()).contains(timezone);
} 
```

或者，您可以为其创建一个静态字段

```
private static final Set<String> TIMEZONES = Set.of(TimeZone.getAvailableIDs()) 
```

```
public boolean validTimeZone(String timezone) {
    return TIMEZONES.contains(timezone);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-26T19:05:19.710

[您可以使用getAvailableIDs()](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getAvailableIDs%28%29)获取所有支持的 ID

然后循环supportedID数组并与您的字符串进行比较。

例子：

```
String[] validIDs = TimeZone.getAvailableIDs();
for (String str : validIDs) {
      if (str != null && str.equals("yourString")) {
        System.out.println("Valid ID");
      }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-09-12T18:14:06.337

# `java.time.ZoneId`

很简单，只需使用[`ZoneId.of("Asia/Kolkata")`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZoneId.html#of(java.lang.String)).

```
try {
    ZoneId.of("Asia/Kolkataa");
} catch (Exception e) {
    e.printStackTrace();
} 
```

如果您插入无效的时区，它将引发异常

```
**java.time.zone.ZoneRulesException: Unknown time-zone ID: Asia/Kolkataa** 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-02T19:29:46.963

这是一种比遍历所有可能的 ID 更有效的解决方案。它检查`getTimeZone`.

[Java 文档 (TimeZone#getTimeZone)：](https://docs.oracle.com/javase/8/docs/api/java/util/TimeZone.html#getTimeZone-java.lang.String-)

> 返回： 指定的时区，如果给定的 ID 无法理解，则返回**GMT 时区。**

因此，如果输出是 GMT 时区，则输入无效，除非输入实际是“GMT”。

```
public static boolean isValidTimeZone(@NonNull String timeZoneID) {
    return (timeZoneID.equals("GMT") || !TimeZone.getTimeZone(timeZoneID).getID().equals("GMT"));
} 
```

或者，如果您想使用有效时区而不调用`getTimeZone`两次：

```
TimeZone timeZone = TimeZone.getTimeZone(timeZoneToCheck);
if(timeZoneToCheck.equals("GMT") || !timeZone.getID().equals("GMT")) {
    // TODO Valid - use timeZone
} else {
    // TODO Invalid - handle the invalid input
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-29T14:40:24.557

我想提出下一个解决方法：

```
public static final String GMT_ID = "GMT";
public static TimeZone getTimeZone(String ID) {
    if (null == ID) {
        return null;
    }

    TimeZone tz = TimeZone.getTimeZone(ID);

    // not nullable value - look at implementation of TimeZone.getTimeZone
    String tzID = tz.getID();

    // check if not fallback result 
    return GMT_ID.equals(tzID) && !tzID.equals(ID) ? null : tz;
} 
```

因此，如果时区 ID 无效或自定义时区无效，您将收到**null**。此外，您可以引入相应**的空**值处理程序（取决于用例） - 抛出异常等。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-04T00:56:02.700

```
private boolean isValidTimeZone(final String timeZone) {
    final String DEFAULT_GMT_TIMEZONE = "GMT";
    if (timeZone.equals(DEFAULT_GMT_TIMEZONE)) {
        return true;
    } else {
        // if custom time zone is invalid,
        // time zone id returned is always "GMT" by default
        String id = TimeZone.getTimeZone(timeZone).getID();
        if (!id.equals(DEFAULT_GMT_TIMEZONE)) {
            return true;
        }
    }
    return false;
} 
```

该方法针对以下情况返回 true：

```
assertTrue(this.isValidTimeZone("JST"));
assertTrue(this.isValidTimeZone("UTC"));
assertTrue(this.isValidTimeZone("GMT"));
// GMT+00:00
assertTrue(this.isValidTimeZone("GMT+0"));
// GMT-00:00
assertTrue(this.isValidTimeZone("GMT-0"));
// GMT+09:00
assertTrue(this.isValidTimeZone("GMT+9:00"));
// GMT+10:30
assertTrue(this.isValidTimeZone("GMT+10:30"));
// GMT-04:00
assertTrue(this.isValidTimeZone("GMT-0400"));
// GMT+08:00
assertTrue(this.isValidTimeZone("GMT+8"));
// GMT-13:00
assertTrue(this.isValidTimeZone("GMT-13"));
// GMT-13:59
assertTrue(this.isValidTimeZone("GMT+13:59"));
// NOTE: valid time zone IDs (see TimeZone.getAvailableIDs())
// GMT-08:00
assertTrue(this.isValidTimeZone("America/Los_Angeles"));
// GMT+09:00
assertTrue(this.isValidTimeZone("Japan"));
// GMT+01:00
assertTrue(this.isValidTimeZone("Europe/Berlin"));
// GMT+04:00
assertTrue(this.isValidTimeZone("Europe/Moscow"));
// GMT+08:00
assertTrue(this.isValidTimeZone("Asia/Singapore")); 
```

...并且以下时区为假：

```
assertFalse(this.isValidTimeZone("JPY"));
assertFalse(this.isValidTimeZone("USD"));
assertFalse(this.isValidTimeZone("UTC+8"));
assertFalse(this.isValidTimeZone("UTC+09:00"));
assertFalse(this.isValidTimeZone("+09:00"));
assertFalse(this.isValidTimeZone("-08:00"));
assertFalse(this.isValidTimeZone("-1"));
assertFalse(this.isValidTimeZone("GMT+10:-30"));
// hours is 0-23 only
assertFalse(this.isValidTimeZone("GMT+24:00"));
// minutes 00-59 only
assertFalse(this.isValidTimeZone("GMT+13:60")); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-26T19:05:45.197

如果[`TimeZone.getAvailableIDs()`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getAvailableIDs)包含有问题的 ID，则它是有效的：

```
public boolean validTimeZone(String id) {
    for (String tzId : TimeZone.getAvailableIDs()) {
            if (tzId.equals(id))
                return true;
    }
    return false;
} 
```

不幸的是[`TimeZone.getTimeZone()`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getTimeZone(java.lang.String))，方法默默地丢弃了无效的 ID 并返回 GMT：

> ### 回报：
> 
> 指定的时区，如果无法理解给定的 ID，则为 GMT 时区。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-26T19:05:49.547

您可以使用`TimeZone.getAvailableIDs()`获取支持的 ID 列表

```
for (String str : TimeZone.getAvailableIDs()) {
    if (str.equals("UTC")) {
        //found
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-19T03:33:35.793

由于`TimeZone#getTimeZone(String id)`如果值无效则返回默认值（而不是返回无效的时区），如果重新解释的值与初始值不匹配，则它无效。

```
private static boolean isValidTimeZone(@Nonnull String potentialTimeZone)
{
    // If the input matches the re-interpreted value, then the time zone is valid.
    return TimeZone.getTimeZone(potentialTimeZone).getID().equals(potentialTimeZone);
} 
```

# sql - SQL Server 2008：将列值转换为行

> ID：13092867
> 
> 赞同：1
> 
> 时间：2012-10-26T19:04:15.647
> 
> 标签：sql, sql-server, tsql, unpivot

我有以下格式的表格

```
国家代码 | 1960 | 1961 | 1962 | ..... | 2011
------------------------------------------------
IND | va11 | va12 | va13 | ..... | va1x
澳大利亚 | va21 | va22 | va23 | ..... | va2x
英文 | va31 | va32 | va33 | ..... | va3x

```

我想把它转换成下面的格式

```
国家代码 | 年份 | 价值
--------------------------
IND | 1960 | va11
IND | 1961 | va12
IND | 1962 | va13
.
.
IND | 2011 | va1x
澳大利亚 | 1960 | va21
澳大利亚 | 1961 | va22
澳大利亚 | 1962 | va23
.
.
澳大利亚 | 2011 | va2x
英文 | 1960 | va31
英文 | 1961 | va32
英文 | 1962 | va33
.
.
英文 | 2011 | va3x

```

这如何通过 sql 查询或 sql server 程序集来实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T19:07:03.477

你可以完成[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 如果您有已知数量的列，那么您可以对这些值进行硬编码：

```
select Country_Code, year, value
from yourtable
unpivot
(
  value 
  for year in ([1960], [1961], [1962], [2011])
) u 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1ea3b/2)

如果您有未知数量的列，那么您可以使用动态 sql：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
   @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name != 'Country_Code'
         for xml path('')), 1, 1, '')

set @query 
  = 'select country_code, year, value
     from yourtable
     unpivot
     (
        value
        for year in ('+ @colsunpivot +')
     ) u'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/26aa2/2)

你们甚至可以使用`UNION ALL`：

```
select country_code, '1960' year, 1960 value
from yourtable
union all
select country_code, '1961' year, 1961 value
from yourtable
union all
select country_code, '1962' year, 1962 value
from yourtable
union all
select country_code, '2011' year, 2011 value
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/26aa2/3)

# asp.net - html菜单导航不起作用

> ID：13092869
> 
> 赞同：0
> 
> 时间：2012-10-26T19:04:30.347
> 
> 标签：asp.net, .net, html, menu, hover

我的菜单html是这样的：

```
 <div id=navigation>
        <ul id=nav>
            <li>
                <asp:HyperLink ID=HyperLink1 runat=server
                    NavigateUrl=~/Home.aspx>Home</asp:HyperLink></li>
            <li>
                <asp:HyperLink ID=HyperLink2
                    runat=server NavigateUrl=~/UserSide/AboutUs.aspx>About  Us</asp:HyperLink></li>
            <li>
                <asp:HyperLink ID=HyperLink11 runat=server Products</asp:HyperLink>
                <ul>
                    <li>
                        <asp:HyperLink ID=HyperLink3 runat=server NavigateUrl=~/UserSide/Products/HomeTheatres.aspx>Home Theaters</asp:HyperLink></li>
                    <li>
                        <asp:HyperLink ID=HyperLink4 runat=server NavigateUrl=~/UserSide/Products/BurglarAlarmSystem.aspx>Burglar Alaram System</asp:HyperLink></li>
                    <li>
                        <asp:HyperLink ID=HyperLink5 runat=server NavigateUrl=~/UserSide/Products/AccessControlSystem.aspx>Access Control System</asp:HyperLink></li>
                    <li>
                        <asp:HyperLink ID=HyperLink6 runat=server NavigateUrl=~/UserSide/Products/AutomationSystem.aspx>Automation System</asp:HyperLink></li>
                    <li>
                        <asp:HyperLink ID=HyperLink7 runat=server NavigateUrl=~/UserSide/Products/CCTV.aspx>CCTV</asp:HyperLink></li>
                    <li>
                        <asp:HyperLink ID=HyperLink8 runat=server NavigateUrl=~/UserSide/Products/CentralMusicSystem.aspx>Central Music System</asp:HyperLink></li>
                    <li>
                        <asp:HyperLink ID=HyperLink9 runat=server NavigateUrl=~/UserSide/Products/PublicAddressSystem.aspx>Public Address System</asp:HyperLink></li>
                    <li>
                        <asp:HyperLink ID=HyperLink10 runat=server NavigateUrl=~/UserSide/Products/WiFiNetworks.aspx>WiFi Networks</asp:HyperLink></li>
                </ul>
            </li>
            <li>
                <asp:HyperLink ID=HyperLink12 runat=server NavigateUrl=~/UserSide/WhereToBuy.aspx>Where To Buy</asp:HyperLink></li>
            <li>
                <asp:HyperLink ID=HyperLink13 runat=server NavigateUrl=~/UserSide/Services.aspx>Services</asp:HyperLink></li>
            <li>
                <asp:HyperLink ID=HyperLink14 runat=server NavigateUrl=~/UserSide/ContactUs.aspx>Contact Us</asp:HyperLink></li>
        </ul>
    </div>

#navigation {
    background: #303030;
    display: block;
    width: 100%;
    float: left;
    max-height: 52px;
    margin: 0 0 15px 0;
}

#navigation ul,
#navigation li {
    list-style:none;
    padding:0;
    margin:0;
    display:inline;
}
#navigation ul li{
    float:left;
    position:relative;
}

#navigation ul li a { 
    display: inline-block;
    color: #fff;
    text-decoration: none;
    font-size: 12px;
    font-weight: bold;
    padding: 17px 25px;
    background: url(../images/navigation-divider.png) no-repeat right 50%;
}

#navigation ul li a:hover,
#current:hover 
{
    background: #72b626 !important;
    color: #fff;
    -webkit-transition: all 0.1s ease-in-out;
    -moz-transition: all 0.1s ease-in-out;
    -o-transition: all 0.1s ease-in-out;
    -ms-transition: all 0.1s ease-in-out;
    transition: all 0.1s ease-in-out;
}

#navigation ul ul {
    position: absolute;
    display: none;
    top: 51px;
    left: 0;
    background: #303030;
    z-index: 1000;
}

#navigation ul ul li a {color: #aaa;}
#navigation ul ul li a:hover {
    color: #fff;
}

#navigation ul ul li a {
    display: block;
    width: 150px;
    margin: 0;
    padding: 9px 18px;
    font-family: Arial, sans-serif;
    font-weight: normal;
    font-size: 12px;
    border-bottom: 1px solid #404040;
    background: none;
}

#navigation ul ul ul { 
    position: absolute; 
    top:0px; 
    left:100%; 
    z-index: 999;
}

#navigation ul ul ul li a { 
    border-bottom: 1px solid #404040 !important;
    border-top: 1px solid transparent;
    background: none;
}

#navigation ul ul li:last-child a, #navigation ul ul li:last-child a:hover {border-bottom: 1px solid transparent}
#navigation ul ul ul li:last-child a {border-bottom: 1px solid transparent !important}
#navigation ul li:hover>ul {opacity: 1; position:absolute; top:99%; left:0;}
#navigation ul ul li:hover>ul {position:absolute; top:0; left:100%; opacity: 1; z-index:497;}
#navigation ul li:hover > a {background: #72b626;}
#navigation ul ul li:hover > a {color: #fff;} 
```

当我将鼠标悬停在产品上时，下一个列表必须弹出，但它仅在我在主页上时才有效。当我在文件夹内的任何页面上时，它不会弹出。
有什么帮助吗？请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:16:58.837

您应该提供更多信息。你用什么弹出子菜单？`css`或`javascript`( `jquery`) ？

我想，问题是`src`你的**css/javascript**文件。听起来它是**相对**的，当您进入文件夹时，它找不到**css** **/script**文件。尽量做到绝对。

如果你的地址是这样`http://localhost:1000/MySiteName/`的

尝试：

```
<script src="/MySiteName/scripts/script.js"> 
```

代替 ：

```
<script src="scripts/script.js"> 
```

# c# - 在服务器上接收大量的 post 请求

> ID：13092876
> 
> 赞同：-1
> 
> 时间：2012-10-26T19:04:50.717
> 
> 标签：c#, iis, web, request

嗨，我是网页设计的新手。我目前正面临我的程序的一个问题。我的程序将在服务器上运行，它会动态创建许多带有短脚本的 aspx 页面，以在运行时存储发布请求数据。但是，当短时间内收到大量的post请求时，有些页面会变成空白，数据没有存储在页面中。有没有更好的方法来处理大量的 post 请求，以便我可以保证收到 post 请求数据？谢谢

页面代码：我相信这是问题

这是每个 aspx 页面包含的代码

```
<script runat="server" language=`enter code here`"C#">
    public static string IDValue;
    public static string incomeData;
    void Page_Load(object sender, System.EventArgs e)
    {
    incomeData = Request["RequestID"];
    if (incomeData != null && incomeData != ""){
        IDValue = incomeData ;
    }
    Response.Write(IDValue);
    } 
```

此页面基本上只是将 RequestID 存储在页面上，以便我将来可以检索 RequestID。它适用于大多数情况，但有时页面上没有写 1 或 2 页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:35:41.297

我认为您应该删除 static 关键字。

使用 static 关键字时，该值只有一个实例，在您的情况下，它很容易被同时发生的另一个请求覆盖。

您的代码应如下所示：

```
public string IDValue;  // If not referenced in the HTML, it should be moved inside the Page_Load method.
void Page_Load(object sender, System.EventArgs e)
{
    string incomeData = Request["RequestID"];
    if (incomeData != null && incomeData != "")
    {
        IDValue = incomeData ;
    }
    Response.Write(IDValue);
} 
```

希望这对您的追求有所帮助。

# jquery - 在加载的页面中更改 jQuery 单击处理程序锚点

> ID：13092877
> 
> 赞同：2
> 
> 时间：2012-10-26T19:04:54.743
> 
> 标签：jquery

我有一个母版页，可根据单击的链接将内容加载到 div 中。我通过使用 jQuery 为某些锚点添加点击处理程序来做到这一点：

```
<div id="nav">
  <a href="somepage.html">
  ...
</div>

<div id="content"/>

<script type="text/javascript">
  $(document).ready(function() {
    $('#nav a, #footer a').click(function(e) {
      $('#content').load($(this).attr('href'));
      return false;
    });
  });
</script> 
```

一些加载到#content 的页面也有我想为其添加点击处理程序的锚点（因此这些点击的结果也进入#content）。我试过这个：

```
$('#content a').click(function(e) {
  ...
}); 
```

但这似乎不起作用。有什么想法可以在这些加载页面中的锚点上设置点击处理程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:07:48.340

```
$(document).on('click', '#content a', function(e) {
  ...
}); 
```

应该管用。当您动态添加元素时，您需要使用`on()`将它们绑定到事件。从文档：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

理想情况下，您希望 DOM 中的父元素比`document`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:08:31.273

尝试：

```
$('#content').on("click", "a", function(e) {
    ...
}); 
```

# android - 获取文件夹中所有已删除文件的元数据

> ID：13092879
> 
> 赞同：0
> 
> 时间：2012-10-26T19:05:05.720
> 
> 标签：android, dropbox-api

即使文件被删除，我如何才能获取文件夹中所有文件的元数据。当前函数仅返回文件夹中存在且未删除的文件的元数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:14:16.820

请参阅API 方法参考：`included_deleted`https [://www.dropbox.com/developers/reference/api](https://www.dropbox.com/developers/reference/api)`metadata`

# api - Web Audio API：Chrome 中没有声音

> ID：13092880
> 
> 赞同：1
> 
> 时间：2012-10-26T19:05:06.520
> 
> 标签：api, audio, web

我正在使用 Chrome 22.0.1229.94，但无法弄清楚为什么我在使用 Web Audio API 的任何页面上都没有音频。我已经签入了标志，但似乎没有启用 API 的标志，我是否需要做其他事情才能让它工作？

我尝试运行一个简单的脚本来获得一些音频但没有声音。

```
<script type="text/javascript">
  var context = new webkitAudioContext(),
  oscillator = context.createOscillator();

  oscillator.type = 2;
  oscillator.frequency.value = 500;
  oscillator.connect(context.destination);
  oscillator.noteOn(0);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T15:51:39.983

根据[最新规范](http://www.w3.org/TR/webaudio/#DeprecationNotes)，noteOn() 已更改为 start()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-27T15:23:39.153

为了使用当前版本的 API，您需要使用 start() 代替 noteOn()，使用 stop() 代替 noteOff()，并将振荡器类型指定为字符串。

```
<script type="text/javascript">

var context = new webkitAudioContext();
var oscillator = context.createOscillator();

oscillator.type = "square";
oscillator.frequency.value = 500;
oscillator.connect(context.destination);

var now = context.currentTime;
oscillator.start(now);
oscillator.stop(now + 1);

</script> 
```

规范位于：[http ://webaudio.github.io/web-audio-api/](http://webaudio.github.io/web-audio-api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:47:02.733

这可能是您的 Chrome 的问题，但我还是看到脚本存在问题。在使用 Web Audio API 之前，您应该告诉它等待窗口完全加载。这是执行此操作的脚本版本：

```
var init = function () {
    var context, oscillator;
    try {
        context = new webkitAudioContext();
    } catch (e) {
        alert("Your browser does not support Web Audio API!");
        return;
    }
    oscillator = context.createOscillator();

    oscillator.type = 2;
    oscillator.frequency.value = 500;
    oscillator.connect(context.destination);
    oscillator.noteOn(0);
    oscillator.noteOff(1);
}
window.addEventListener("load", init); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T09:43:10.267

您忘记添加 noteOn(0);

```
<script type="text/javascript">
var context = new webkitAudioContext(),
oscillator = context.createOscillator();

oscillator.type = 2;
oscillator.frequency.value = 500;
oscillator.connect(context.destination);
oscillator.noteOn(0);

</script> 
```

# php - 一个表格2个按钮1个动态值

> ID：13092882
> 
> 赞同：0
> 
> 时间：2012-10-26T19:05:14.200
> 
> 标签：php, html

我有一个带有 2 个按钮的表单，它们具有来自产品 ID 的相同动态值。
我想要的是当您单击购物车按钮时，它发送到 cart.php，当您单击愿望按钮时，它发送到 wish.php

但是现在当我单击购物车按钮时，它会发送到 cart.php**和**wish.php，反之亦然。

有没有这样的表格，可以做我想要的？

```
<form id="form1" name="form1" method="post" >                   

<input type="hidden" name="pid"  value="<?php echo $id; ?>" />  
<input type="hidden" name="pidwish"  value="<?php echo $id; ?>" />  
<input type="SUBMIT" name="submit"  class="classname"  VALUE="add to cart" onClick="this.form.action='cart.php';this.form.submit()">

<input type="SUBMIT" name="submit"  class="classname"  VALUE="wishlist" onClick="this.form.action='memberSystem/wishes.php';this.form.submit()">

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:24:25.870

请试试这个：

```
<form id="form1" name="form1" method="post" >                   
    <input type="hidden" name="pid" id="pid" value="<?php echo $id; ?>" />  
    <input type="hidden" name="pidwish" id="pid_wish" value="<?php echo $id; ?>" />
    <input type="button" name="submit"  class="classname"  VALUE="add to cart" onClick="SubmitIt(1);">
    <input type="button" name="submit"  class="classname"  VALUE="wishlist" onClick="SubmitIt(2);">
</form> 
```

并使用 Jquery 进行表单提交。

```
<script>
function SubmitIt(checkVal)
{
    var pid = $("#pid").value;
    var pid_wish = $("#pid_wish").value;
    if(checkVal == 1)
    {
        //submit your form for add cart
    }
    else
    {
        //submit your form for wish
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:12:09.267

看到你传递的只是固定的隐藏值，有什么问题：

```
<form id="form1" name="form1" method="post" action="cart.php">                   
  <input type="hidden" name="pid"  value="<?php echo $id; ?>" />    
  <input type="SUBMIT" name="submit"  class="classname"  VALUE="add to cart">
</form>
<form id="form2" name="form1" method="post" action="memberSystem/wishes.php">                   
   <input type="hidden" name="pidwish"  value="<?php echo $id; ?>" />  
  <input type="SUBMIT" name="submit"  class="classname"  VALUE="wishlist">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:20:09.793

请尝试它会工作

**JavaScript：**

```
function submitForm(actionPath)
{
  document.form1.action =actionPath;
  document.form1.submit();
} 
```

**HTML：**

```
<form id="form1" name="form1" method="post" >                     
  <input type="hidden" name="pid"  value="<?php echo $id; ?>" />  
  <input type="hidden" name="pidwish"  value="<?php echo $id; ?>" />   
  <input type="SUBMIT" name="submit"  class="classname" VALUE="add to cart" onClick="submitForm('cart.php')">
  <input type="SUBMIT" name="submit"  class="classname" VALUE="wishlist" onClick="submitForm('memberSystem/wishes.php')">  
</form> 
```

# jquery - 在服务器上找不到 XML 文件 404

> ID：13092886
> 
> 赞同：0
> 
> 时间：2012-10-26T19:05:25.753
> 
> 标签：jquery, asp.net, xml

我正在构建一个简单的搜索工具。XML 中的后端，前端 javascript/jquery。它在本地工作正常，但是当我将文件移动到测试服务器时，即使路径和文件方向相同，也找不到 xml 文件。

我尝试了不同的方法来访问文件（.ajax、.get 等），但没有成功。**即使我尝试将 xml 路径直接插入地址窗口，我**也会收到相同的错误：“找不到资源”。我已经验证过，xml 格式正确......从那里几乎难倒。

我怀疑这与 webconfig 文件有关（服务器是 iis/asp.net，我无法访问较低级别的配置），但这只是一个猜测，因为我在那个特定领域几乎没有经验。

非常感谢您对此的任何帮助！

**这是我尝试过的两个版本的 jQuery xml 检索机制。都不工作。**

v1 >

```
$.get('data.xml', function(xml){...});  /*no dice*/ 
```

v2 >

```
$.ajax({
    type: "GET",
    url: "data.xml",
    dataType: "xml",
    success: function(xml) {        
    $(xml).find('facility').each(function(){...}
};   /* also, no dice*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:18:16.900

结果服务器管理员不得不在网站的根级别禁用 XML 处理程序。不知道这到底意味着什么，但问题现在已经解决了。

感谢大家的帮助！

# java - 什么是 Eclipse SWT Text 的合适监听器？

> ID：13092889
> 
> 赞同：1
> 
> 时间：2012-10-26T19:05:34.867
> 
> 标签：java, eclipse-plugin, swt

我有这种类型的类`org.eclipse.swt.widgets.Text`。它位于我正在开发的 Eclipse 插件中。我想处理用户从该字段中选择文本的事件。那就是……在集中注意力时，他们单击某些文本并向左或向右拖动以选择文本。选择此文本时，即是我需要触发事件的时候。

我仍然无法找到合适的听众来满足我的需要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T19:13:59.683

我认为`SWT.MouseUp`是您正在寻找的事件。如果要检查“箭头键和移位选择”，请同时收听`SWT.KeyUp`并检查`keyCode`事件：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(1, false));

    Text text = new Text(shell, SWT.BORDER);
    text.setText("BLABLABLA");

    text.addListener(SWT.MouseUp, new Listener() {

        @Override
        public void handleEvent(Event event) {
            Text text = (Text) event.widget;

            String selection = text.getSelectionText();

            if(selection.length() > 0)
            {
                System.out.println("Selected text: " + selection);
            }
        }
    });

    text.addListener(SWT.KeyUp, new Listener() {

        @Override
        public void handleEvent(Event event) {
            Text text = (Text) event.widget;

            String selection = text.getSelectionText();

            if(selection.length() > 0 && event.keyCode == SWT.SHIFT)
            {
                System.out.println("Selected text: " + selection);
            }
        }
    });

    shell.pack();
    shell.open ();
    while (!shell.isDisposed ()) {
        if (!display.readAndDispatch ()) display.sleep ();
    }
    display.dispose ();
} 
```

如果用户真的选择了某些东西，此代码只会打印选择。如果是没有选择的鼠标或键，则不会发生任何事情。

您可能希望将两者结合在一个侦听器中以节省空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T00:18:20.997

为了获得文本选择，您应该考虑使用 org.eclipse.swt.custom.StyledText。您需要注册一个选择侦听器。见下文：

```
public void addSelectionListener(SelectionListener listener) 
```

> 添加选择侦听器。当用户更改选择时，小部件会发送一个 Selection 事件。当 widgetSelected 被调用时，事件 x 和 y 字段包含选择的开始和结束插入符号索引。不为 StyledTexts 调用 widgetDefaultSelected。

# ios - uitableviewcontroller 上带有按钮的工具栏 [Monotouch 如果可能]

> ID：13092892
> 
> 赞同：0
> 
> 时间：2012-10-26T19:05:47.923
> 
> 标签：ios, xamarin.ios

我在 UITableViewController 的最底部添加了带有自定义按钮的图像（背景），但是当我添加更多单元格时，我的自定义图像和按钮不会停留在它应该停留的最底部，当我向下滚动时它会浮起来。我尝试将其添加为 TableFooterView 但它会显示在单元格的末尾...现在，是否可以将其固定在视图的页脚而不上下移动...请看下面的图片 ![在此处输入图像描述](../Images/3a5d204857ce9068ecf4429b2d057087.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:26:21.160

而不是使用`UITableViewController`为什么不使用 a`UIViewController`并将 a 添加`UITableView`到它，以及表格视图下方的自定义工具栏。这将确保表格视图滚动不会影响您的工具栏位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:00:05.817

您可以尝试覆盖 UITableViewController 中的 ViewDidLoad 方法并更改 TableView 的 Frame。

# django - 循环内的 Django 模板比较

> ID：13092899
> 
> 赞同：0
> 
> 时间：2012-10-26T19:06:09.623
> 
> 标签：django, templates, comparison

我需要将模型的值与模板中的聚合结果进行比较。像一个 ：

```
{% for valor in valores %}
    {{ valor.quantidade }}
{% endfor %}
results of my loop

{{ total.total_quantidade }}
this is the result of my Aggregate 
```

我怎样才能比较这个值？

我的结果列表`{% for valor ... %}`

```
1000
2000
3000 
```

我的汇总结果

```
1500 
```

`{% if total.quantidade_total >= valor.quantidade %}`显示等效值..依此类推，如果较小则显示另一个值

我该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:41:19.977

有什么困难？

```
{% for valor in valores %}
    {% if total.quantidade_total >= valor.quantidade %}
        Do something
    {% else %}
        Do something else
    {% endif %}
{% endfor %} 
```

# c++ - MFC 最佳实践和模块化

> ID：13092901
> 
> 赞同：0
> 
> 时间：2012-10-26T19:06:22.680
> 
> 标签：c++, oop, winapi, modularity

在 MFC 中，提供的某些机制允许程序员绕过模块化和封装以及信息隐藏，这可以说是面向对象框架最理想的特性。

一个（众多）示例是 Owner Drawn 控件：您可以选择`DrawItem`在子控件子类中实现并在该子类中完成该控件的所有绘图，使其看起来更加模块化：

```
class CustomButton: CButton{
     // --- Lots of stuff, DECLARE_DYNAMIC etc

     virtual void DrawItem(LPDRAWITEMSTRUCT lpdis){
          // Drawing code for this button in the button's subclass
     }
}; 
```

...或者您可以选择`WM_DRAWITEM`通过 OnDrawItem 在父 Window 类中处理消息

```
class MainFrame: CFrameWnd{
     // --- Lots of stuff, DECLARE_DYNAMIC etc

     CustomButton button; 

     afx_msg void OnDrawItem(LPDRAWITEMSTRUCT lpdis, UINT id){

          if(id == CUSTOM_BUTTON_ID){     
               // Drawing code for this button in the button's subclass
          }
     }
}; 
```

在后一种情况下，控件的绘制在控件子类之外，这意味着[“OOP 数据结构倾向于随身携带自己的运算符”](http://en.wikipedia.org/wiki/Object-oriented_programming#Overview)的概念被破坏了.. 对吗？

所以我的问题是：哪一个被认为是“最佳实践”？第二个存在一定是有原因的——任何人都可以提出破坏模块化是更好选择的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:11:48.087

这个问题似乎是在问什么时候让一个包含一个或多个子对象的父对象来处理用于子对象的消息而不是仅仅将消息传递给子对象让子对象处理它是合理的。

具体示例是 MFC 窗口类，其中包含其他窗口对象（在本例中为按钮）的窗口对象正在处理绘制消息，而不是仅将消息传递给子级进行处理。

基本答案是视情况而定。在某些情况下，您正在编写一个窗口对象，并且作为其中的一部分，您会超越子控件的绘图行为以更改子控件的外观。例如，如果您有一组按钮，您希望根据父窗口中的信息更改其外观，您可能希望覆盖子控件的绘图以更改外观。

这类似于拥有一个按钮对象，它通过允许父窗口向子控件提供绘图对象来允许多种不同类型的外观。结果将是子级将具有默认的绘图行为，父级将通过提供绘图对象来覆盖该行为。

请参阅[维基百科中关于策略模式的](http://en.wikipedia.org/wiki/Strategy_pattern)这篇文章或[这篇关于策略模式的文章以及其他模式的侧链接，](http://www.oodesign.com/strategy-pattern.html)其中提供了对此类编程问题的简要讨论。另一个例子可能是[责任链模式](http://www.oodesign.com/chain-of-responsibility-pattern.html)。

在这个特定的例子中，不是父级提供绘图描述对象给子级使用，而是父级只是截取绘图消息并自己进行绘图。

如果可以在不影响子控件的其他功能的情况下更改子控件的外观，那么这将是一个不错的方法，尽管它可能会使正在进行维护或其他更改的程序员感到困惑。然而，在其他情况下可以看到这种越权行为，例如窗口剪辑，其中一些窗口组件的绘图被剪辑，因此不会绘制窗口区域之外的组件的任何部分。

因此，让父对象拦截和处理以父对象的子对象为目标的消息的方法提供了很大的灵活性，允许不同的父对象根据父对象想要完成的内容来改变子对象的特定行为。

然而，这种灵活性确实是有代价的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T19:28:22.483

如果在第二种情况下，CUSTOM_BUTTON_ID 是控件内部使用的一些数据，那么 OOP 将不是最理想的。这将违反 David Parnas (http://www.cs.umd.edu/class/spring2003/cmsc838p/Design/criteria.pdf) 定义的信息隐藏概念。如果内部信息发生变化，则父窗口会受到变化的影响，需要对其自身进行更改以匹配。这就是信息隐藏促进模块化的方式；它将数据与需要它的东西捆绑在一起（并对不需要的东西隐藏它）。

根据评论，这是一个不好的例子，因为没有违反信息隐藏，因为 CUSTOM_BUTTON_ID 实际上是父窗口包含和使用的数据，而不是控件。控件的绘制还是在控件内部完成的；父窗口只是调用控件的 Draw 方法。

# perl - 在 Perl 中为 Facebook 添加频道文件

> ID：13092903
> 
> 赞同：0
> 
> 时间：2012-10-26T19:06:27.923
> 
> 标签：perl, cgi, facebook-javascript-sdk

[根据文档](https://developers.facebook.com/docs/reference/javascript/)，添加通道文件通过解决某些浏览器中的跨域通信问题，极大地提高了 Facebook JS SDK 的性能。

channel.html 文件的内容应该只有一行：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

频道文件应设置为尽可能长时间地缓存。

**在 PHP 中：-**

```
<?php
 $cache_expire = 60*60*24*365;
 header("Pragma: public");
 header("Cache-Control: max-age=".$cache_expire);
 header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
 ?>
 <script src="//connect.facebook.net/en_US/all.js"></script> 
```

如何在 Perl 中创建类似的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T07:14:39.177

首先，将您的 channel.html 文件设置为 cgi 脚本（假设服务器在 Apache 下运行） - 您需要编辑配置文件以添加如下内容：

```
<Files "channel.html">
AddHandler cgi-script .html
Options ExecCGI
</Files> 
```

然后用 Perl 重写这个文件：

```
#!usr/bin/perl

binmode STDOUT;
my $cache_expire = 60*60*24*365;
print "Pragma: public\n";
print "Cache-Control: max-age=",$cache_expire,"\n";
print 'Expires: ', Mailtime(time+$cache_expire),"\n";
print 'Content-Type: text/html; charset=utf-8'."\n\n";
print '<script src="//connect.facebook.net/en_US/all.js"></script>';

sub Mailtime { 
my @months = qw(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec); 
my @wdays = qw(Sun Mon Tue Wed Thu Fri Sat); 
my ($sec,$min,$hour,$mday,$mon,$year,$wday) = gmtime($_[0]); 
return sprintf("%s, %02d %s %d %02d:%02d:%02d GMT", $wdays[$wday], $mday, $months[$mon], $year+1900, $hour, $min, $sec); 
} 
```

# php - Delphi 代码在控制台中有效，但在 VLC 中无效

> ID：13092908
> 
> 赞同：2
> 
> 时间：2012-10-26T19:06:49.013
> 
> 标签：php, delphi, post, delphi-7, winsock

我让我的 OWN 单元使用 winsocket 从网络服务器获取 POST 请求。

这是我的单位：

```
unit uGetPost;

interface

uses
Winsock,
SysUtils,
Windows;

function GetPost(CompleteURL, PostData : String; var Results : String ; Port: Integer = 80) : Integer;

implementation

procedure RemoveCRLFFromEndAndBeginning (var s : String);
var
 i : Integer;
begin
  i := Length(s);
  while (s[i] = #10) or (s[i] = #13) do begin
    SetLength (s, i - 1);
    dec (i);  
  end;
  i := 1;
  while (s[i] = #10) or (s[i] = #13) do begin
    s := Copy (s, 2, Length(s));
    inc (i);  
  end;
end;

function GetIpFromDns(HostName: string): string;
type
  tAddr = array[0..100] of PInAddr;
  pAddr = ^tAddr;
var
  I: Integer;
  WSA: TWSAData;
  PHE: PHostEnt;
  P: pAddr;
begin
  Result := HostName;
  WSAStartUp($101, WSA);
  try
    PHE := GetHostByName(pChar(HostName));
    if (PHE <> nil) then
    begin
      P := pAddr(PHE^.h_addr_list);
      I := 0;
      while (P^[i] <> nil) do
      begin
        Result := (inet_nToa(P^[i]^));
        Inc(I);
      end;
    end;
  except
  end;
  WSACleanUp;
end;

function Parsing(Char, Str: string; Count: Integer): string;
var
  i                 : Integer;
  strResult         : string;
begin
  if Str[Length(Str)] <> Char then
    Str := Str + Char;
  for i := 1 to Count do
  begin
    strResult := Copy(Str, 0, Pos(Char, Str) - 1);
    Str := Copy(Str, Pos(Char, Str) + 1, Length(Str));
  end;
  Result := strResult;
end;

function GetPost(CompleteURL, PostData : String; var Results : String ; Port: Integer = 80) : Integer;
// 1 = Complete Success
// 2 = No Content (Length found) or wrong GET/POST
// 3 = Host found but no php file
// 4 = Host not found (Total FAIL!);
var
  WSA: TWSAData;
  Sock: TSocket;
  Addr: TSockAddrIn;
  SendBuffer: String;
  ReceiveBuffer: array[0..4096] of Char;
  ReceivedBytes: Integer;
  DNS, RemoteFilePath, FileName: string;
  i: integer;
  SentBytes: Integer;
  ContentLength : Integer;
begin
  result := 4;
  DNS := Copy(CompleteURL, Pos('http://', CompleteURL) + 7, Length(CompleteURL));
  RemoteFilePath := Copy(DNS, Pos('/', DNS), Length(DNS));
  DNS := Copy(DNS, 1, Pos('/', DNS) - 1);
  i := Length(RemoteFilePath);
  while (RemoteFilePath[i] <> '/') do
  begin
    FileName := RemoteFilePath[i] + FileName;
    Dec(i);
  end;  
  WSAStartup($101, WSA);
  Sock := Socket(AF_INET, SOCK_STREAM, 0);
  Addr.sin_family := AF_INET;
  if (Port < 1) or (Port > 65535) then Port := 80;
  Addr.sin_port := htons(Port);
  Addr.sin_addr.S_addr := inet_addr(PChar(GetIPfromDNS(PChar(DNS))));
  if Connect(Sock, Addr, sizeof(Addr)) = 0 then begin
    result := 3;
    SendBuffer := 'POST ' + RemoteFilePath + ' HTTP/1.1' + #13#10 +
    'Host: ' + DNS + #13#10 +
    'User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0' + #13#10 +
    'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' + #13#10 +
    'Accept-Language: en-US,en;q=0.5' + #13#10 +
    'Accept-Encoding: gzip, deflate' + #13#10 +
    'Connection: close' + #13#10 +
    'Cache-Control: max-age=0' + #13#10 +
    'Content-Type: application/x-www-form-urlencoded' + #13#10 +
    'Content-Length: ' + inttostr(Length(PostData)) + #13#10#13#10 +
    PostData;
    repeat
      SentBytes := Send(Sock, SendBuffer[1 + SentBytes], Length(SendBuffer) - SentBytes, 0);
    until SentBytes >= Length(SendBuffer);
    repeat
      ZeroMemory(@ReceiveBuffer, Sizeof(ReceiveBuffer));
      ReceivedBytes := Recv(Sock, ReceiveBuffer, Sizeof(ReceiveBuffer), 0);
      if ReceivedBytes > 0 then begin
        Results := Results + ReceiveBuffer;
      end;
    until (ReceivedBytes <= 0);
    CloseSocket(Sock);
  end;
  WSACleanup();
  if Copy (Results, 10, 6) = '200 OK' then begin
    result := 2;
    if Pos ('Content-Length: ', Results) <> 0 then begin
      i := 1;
      while Parsing(#13, Results, i) <> '' do begin
        if Pos ('Content-Length: ' , Parsing(#13, Results, i)) <> 0 then begin
          ContentLength := strtoint (Copy(Parsing(#13, Results, i), 18, Length (Results)));
          results := Copy (results,Length(results) - ContentLength + 1, ContentLength);
          break;
        end;
        inc (i);
      end;
      if ContentLength <> 0 then begin
        result := 1;
        RemoveCRLFFromEndandBeginning (results);
      end else begin
        results := '';
      end;
    end;
  end;
end;

end. 
```

我在这样的 VCL 应用程序中运行 GetPost 函数：

```
var
 Res : String;
begin
 GetPost ('http://guest1320958.studio2.coderun.com/PHPTest/', 'GET=VERSION', Res);
 ShowMessage (Res);
end; 
```

结果如下：

> HTTP/1.1 400 错误请求内容类型：文本/html 日期：2012 年 10 月 26 日星期五 18:56:03 GMT 连接：关闭内容长度：35
> 
> # 错误请求（无效动词）

如果我在这样的控制台应用程序中运行 SAME 函数：

```
program Project2;

{$APPTYPE CONSOLE}

uses
  uGetPost;

  var
   Res : String;

begin
  GetPost ('http://guest1320958.studio2.coderun.com/PHPTest/', 'GET=VERSION', Res);
  writeln (Res);
  readln;
end. 
```

它工作得很好。

我的 PHP 代码是这样的：

```
<?php
if (isset($_POST["GET"]))  {
$funcName = $_POST["GET"];
switch($funcName) {
case "VERSION":
echo "1.0";
break;
case "SOMETHINGELSE":
echo "...";
break;
case "ANDSOSON":
echo "...";
}
}
?> 
```

我使用[www.coderun.com](http://www.coderun.com)来测试我的 php。

为什么它在 VLC 中不起作用？顺便说一句。：如果您在 VCL 的线程中运行函数 GetPost，如下所示：

```
function MyThread ( p : pointer ) : Integer;stdcall;
var
 Res : String;
begin
 GetPost ('http://guest1320958.studio2.coderun.com/PHPTest/', 'GET=VERSION', Res);
 MessageBoxA (0, pchar(Res), '', 0);
end;

procedure StartGetPost;
var
 Dummy : DWORD;
begin
 CreateThread(NIL,0, @MyThread, NIL,0, Dummy);
end; 
```

......它突然工作......

这是为什么？可以请人帮助我吗？谢谢你。

编辑：这是来自wireshark的结果：http: [//dl.dropbox.com/u/349314/transfer.pcapng](http://dl.dropbox.com/u/349314/transfer.pcapng)

编辑：看起来实际的传输标题有问题：/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T19:57:45.207

Wireshark 捕获显示两次尝试之间的主要区别在于 GUI 版本在 HTTP 数据中有一个额外的空字符。也就是说，在第一行之前`POST /PHPWebSite/ HTTP/1.1`，有一个零字符。这就解释了为什么服务器抱怨一个无效的动词。

失败与在控制台或 GUI 模式下运行无关。相反，问题在于您在以下循环中使用了初始化变量：

```
repeat
  SentBytes := Send(Sock, SendBuffer[1 + SentBytes], Length(SendBuffer) - SentBytes, 0);
until SentBytes >= Length(SendBuffer); 
```

你还没有设置`SentBytes`，但你用它来索引`SendBuffer`. 在循环之前将其初始化为零。

编译器应该警告您未初始化的变量。永远不要忽略来自编译器的消息，即使它“只是”一个提示或警告。

在 VCL 线程中，该局部变量显然占用了以前持有非零值（可能是 -1）的内存。在其他情况下，它的值显然为 0，并且您的代码似乎按预期工作。这就是所谓的*未定义行为*。

# html - 如何在 Spring MVC 中添加 html5 占位符属性以形成输入元素

> ID：13092912
> 
> 赞同：0
> 
> 时间：2012-10-26T19:07:10.110
> 
> 标签：html, spring-mvc, dojo, spring-webflow

如何在 Spring MVC 中添加 html5 占位符属性以形成输入元素？

例子：

```
<input type="text" required="true" name="firstName" id="firstName" placeholder="Your Name" 
                dojoType="dijit.form.ValidationTextBox" missingMessage="Ooops!  You forgot your first name!" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:46:23.517

使用骆驼将“占位符”转换为“占位符”。程序化：

```
dojo.require("dijit.form.TextBox");
dojo.addOnLoad(function() {
    var inp = new dijit.form.TextBox({
        placeHolder: 'Your Name',
        name: 'firstName',
        id:'firstName'
    });
    dojo.byId('placeHolderNode').appendChild(inp.domNode);
});​ 
```

声明式：

```
 <input type="text" required="true" name="firstName" id="firstName" 

       placeHolder="Your Name" 

            dojoType="dijit.form.ValidationTextBox" missingMessage="Ooops!  You forgot your first name!" /> 
```

演示：http: [//jsfiddle.net/seeds/G6VYA/1](http://jsfiddle.net/seeds/G6VYA/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T17:22:31.230

据我所知，dojo（已选中 1.9）不使用 html5 占位符，而是创建了一个跨度来保存占位符文本。dojo 文档指出：

> 随着 Dojo 1.5 的出现，HTML5 占位符参数（也称为“提示”）已针对所有基于 TextBox 的小部件实现。占位符是小部件显示在空表单字段的输入区域内的灰色示例或提示文本，例如“John Doe”或“Your Name”。当用户聚焦该字段时，文本会消失。

这是不准确的，生成的代码没有 html5 标记。我希望它做到了。

# makefile - 如何在 Makefile 中转义 cvs 关键字？

> ID：13092922
> 
> 赞同：0
> 
> 时间：2012-10-26T19:07:54.400
> 
> 标签：makefile, cvs, gnu-make

我正在尝试从 CVS 标记自动设置生成文件中的版本。这是makefile的相关部分：

```
VERSION =$Name:  $ 
```

当我检查项目时，它工作正常。关键字被标签替换。问题是，除非替换关键字（即 $ 符号消失），否则 Makefile 不起作用，因此我不会在提交之前编译检查代码。如果我使用 $ 转义`$$Name $$`，则签出的版本将无法编译，因为它将变为 $$。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:21:59.007

在 GNU make 中，这种构造是有效的：

```
COMMAV := ,v
CVSFILE := $(patsubst %:,,$$RCSfile: Makefile,v $$)
CVSVERS := $(patsubst %:,,$$Revision: 1.130 $$)
CVSDATE := $(patsubst %:,,$$Date: 2012/10/09 22:02:16 $$)
CVSINFO := $(subst $$,,$(subst $(COMMAV),,$(CVSFILE))$(CVSVERS)$(CVSDATE))

```

就您而言，您正在寻找修订版，所以我相信直接的解决方案是：

```
VERSION := $(subst $$,,$(patsubst %:,,$$Revision: 1.130 $$))

```

# r - 在几个预测变量上循环 Cox 回归模型

> ID：13092923
> 
> 赞同：3
> 
> 时间：2012-10-26T19:07:57.270
> 
> 标签：r

我需要为几个变量运行 cox 回归模型，所以我想写一个循环来实现它。但无论如何它都不起作用。下面是我使用的代码

```
names(Gen) 
varlist <- names(hsb2)[8:11]  ## get the variables i want to involve in loop
models <- lapply(varlist, function(x) {
    coxph(substitute(Surv(Time, Status) ~ i, list(i = as.name(x))), data = Gen, ties="efron")
}) 
```

我得到的错误信息为

```
errors in terms.default(formula, special, data = data) : 
  no terms component nor attribute 
```

任何人都知道如何解决这个问题或如何编写代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T19:50:45.273

因为模型以有趣的方式评估他们的公式，所以您最好创建一个字符串并将其转换为一个公式~~，使用`reformulate`as 在 [是否有比字符串操作更好的替代方案来以编程方式构建公式？](https://stackoverflow.com/questions/12967797/in-r-is-there-a-better-alternative-than-string-manipulation-to-programmatically)~~而不是`substitute`. （`reformulate`通常更可取，因为它会测试输入的语法正确性，但在这种情况下，它会破坏响应变量。）

创建这个临时函数：

```
tmpfun <- function(x) as.formula(paste("Surv(Time,Status)",x,sep="~")) 
```

提供给的函数的主体`lapply`可以是：

```
coxph(tmpfun(x), data = Gen, ties="efron") 
```

（你没有提供一个可重复的例子，但我*认为*这应该工作......）

`lapply`为了获得额外的（但完全不必要的）酷感，您可以尝试用两个单独的调用替换整个调用`lapply`，一个从变量名称列表中制作公式列表，另一个从公式列表中制作拟合模型列表。

```
formlist <- lapply(varlist,tmpfun)
models <- lapply(formlist,data=Gen,ties="efron") 
```

# asp.net-mvc-3 - ASP.NET MVC3 从视图调用控制器方法

> ID：13092928
> 
> 赞同：0
> 
> 时间：2012-10-26T19:08:32.663
> 
> 标签：asp.net-mvc-3, view

下面是我的控制器和视图的摘要。我想从视图中调用 GetUserDistinguished 方法。这只是化妆品。Guid 很丑陋，对最终用户没有意义，但它是我为用户使用的唯一 ID。

```
namespace Users.Controllers
{ 
    public class UsersController : Controller
    {

        public ViewResult Index()
        {    
            var users = db.Users.Include("Users");    
            return View(users.ToList());
        }

        public string GetUserDistinguished(string Guid)
        {
            return ADHelper.ConvertGuidToDn(Guid);
        }
    }
}

@model IEnumerable<Test.GuidToDistinguishedName>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            Name from Guid
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Guid)
        </td>
    </tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:10:56.693

视图不应调用控制器。这打破了 MVC 模式。

相反，让您的控制器在将数据传递到视图之前对数据进行任何必要的修改，并让视图只负责数据的显示和新输入的获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:15:42.020

根据您想要实现的目标，您可以采用两种方法：

1.  如果你想在页面上显示成对的 Guid 和 Distinguished 名字，你应该只设置这些对的集合作为视图的模型。

2.  如果您想在用户单击某处时向用户显示一个专有名称，您应该添加一个接受该 guid 的操作并将其专有名称与其他所需数据一起设置为另一个视图的模型。

查看您的示例代码，我不确定您的情况是什么。

编辑：

根据您的评论，第一种方法是正确的：您需要为控制器中的视图准备所有数据并将其放入模型中。

您可以`Index`像这样修改您的方法以设置成对的 guid 和专有名称（当然，如果您需要传递更多数据，您始终可以使用自己的自定义类作为模型 - 甚至鼓励这样做）：

```
public ViewResult Index()
{    
    var users = db.Users.Include("Users").ToList();    
    var model = users.ToDictionary(u => u.Guid, u => GetUserDistinguished(u.Guid));
    return View(model);
} 
```

在视图中，您可以遍历这些对以在表格中显示它们：

```
<table>
  <tr>
    <th>
      Guid
    </th>
    <th>
      Name
    </th>
  </tr>

@foreach (var item in Model) {
  <tr>
    <td>
        @Html.DisplayFor(modelItem => item.Key)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Value)
    </td>
  </tr>
}

</table> 
```

不要忘记在页面顶部设置正确的模型类型，在我的例子中：

```
@model Dictionary<string, string> 
```

# bash - 在 bash 中重用通配符匹配

> ID：13092931
> 
> 赞同：2
> 
> 时间：2012-10-26T19:08:41.013
> 
> 标签：bash, wildcard

我想在 bash 中做这样的事情：

```
scp me@server:/data/stuff/*/needthis.txt ./?/needthis.txt 
```

那在哪里？在命令中将是任何与 *.

我的问题是有一堆目录，我想从中复制一个在每个目录中同名的文件，并且我想保留它们来自的目录的名称，但我不只是想复制整个“stuff”文件夹，因为这些目录中还有数百 MB 的其他文件，我不想浪费时间下载。

我可以轻松做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:22:19.243

也许`rsync`是你需要的：

```
rsync -a --exclude='*' --include=needthis.txt me@server:/data/stuff/. . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:42:59.020

这个解决方案非常笨拙，并且由于多次调用 scp 可能效率不高：

```
ssh me@server 'find /data/stuff -name needthis.txt' 2>/dev/null | \
    while read src; do
        dest=.${src#/data/stuff}
        echo mkdir -p $(dirname $dest)
        echo scp "me@server:$src" "$dest"
    done 
```

### 解释

1.  第一行：您远程登录到您的服务器，并找到所有感兴趣的文件。该`2>/dev/null`短语丢弃由 ssh 命令引起的额外输出。第一行的结果是文件名列表，包含完整路径，每行一个文件
2.  第二行：`while`语句将这些文件中的每一个读入变量`src`
3.  第三行：通过丢弃构造目标文件`/data/stuff`并将其替换为单个点（对于当前目录）。
4.  第四行和第五行：在本地机器上创建一个与源的目录结构匹配的目录结构，然后复制。但是， echo 命令会阻止实际执行。相反，会显示命令本身。

现在，运行这个相当长的命令并检查输出。满意后，删除这两个`echo`并再次运行——这次执行将真正发生。我知道这个解决方案很长而且很笨拙，所以我很感激大师们的投入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:43:57.540

如果目标文件都存在于本地计算机上，您可以执行以下操作：

```
for file in */needthis.txt; do
    scp me@server:/data/stuff/$file $file
done 
```

# python - 如何使用元数据按种类名称作为字符串查询数据存储

> ID：13092935
> 
> 赞同：0
> 
> 时间：2012-10-26T19:08:48.310
> 
> 标签：python, google-app-engine, python-2.7, google-cloud-datastore

这不起作用，但会说明我的问题：

```
query = "my_model".all()
print query.count() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:14:51.013

通过深入研究数据存储区代码，我找到了解决方案。

```
from google.appengine.ext import db

model_class = db.class_for_kind("my_model")     # this method is not published
query = model_class.all()
print query.count() 
```

db_class_for_kind 只有在模型已经导入时才能工作。但是您可以导入 model_class ：

```
__import__("my_model_path", globals(), locals(), ["my_model"]], -1) 
```

db.class_for_kind 未发布。另请参阅此功能请求：[http ://code.google.com/p/googleappengine/issues/detail?id=800](http://code.google.com/p/googleappengine/issues/detail?id=800)

# spring-mvc - 使用 Hibernate Validator(JSR 303) 与其他框架（ESAPI、Apache Commons 等）进行输入验证

> ID：13092936
> 
> 赞同：5
> 
> 时间：2012-10-26T19:08:50.657
> 
> 标签：spring-mvc, sql-injection, validation, hibernate-validator, esapi

我查看了用于输入验证的各种框架，包括用于 JSR 303 bean 验证的[**Hibernate Validator**](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html_single/#validator-gettingstarted-createproject) impl，以及**ESAPI**验证器接口及其[DefaultValidator](http://owasp-esapi-java.googlecode.com/svn/trunk_doc/latest/org/owasp/esapi/reference/DefaultValidator.html)实现。

ESAPI 输入验证通过 ESAPI.properties 文件围绕正则表达式模式匹配展开。

**ESAPI 路线**：

ESAPI.properties：

```
Validator.SafeString=[A-Za-z0-9]{0,1024}$ 
```

Java类：

```
ESAPI.validator().isValidInput("Name","darthvader", "SafeString", 255, false) 
```

**Hibernate Validator/Spring MVC 路由**

Hibernate 涉及使用各种约束注释（@NotNull、@Size、@Min、@Pattern、@Valid 等）来注释您的 bean。并为验证规则集成 Spring MVC。

```
@RequestMapping(value = "/appointments", method = RequestMethod.POST)
public String add(@Valid User user, BindingResult result) {
    ....
} 
```

似乎使用 Hibernate Validator/Spring MVC 提供了与正则表达式匹配等类似的功能。与Hibernate 验证器 api 相比，使用 ESAPI 库有什么**优势吗？**也许用于 SQL 注入/XSS 或任何类似性质的东西？为 ESAPI 输入验证框架提供开箱即用的 XSS/SQL 注入安全性？与使用其中一个或另一个相比的任何真正优势。提前致谢。

**回答我自己的问题：** 我想我为这篇文章找到了自己的解决方案。使用 Hibernate/Spring MVC 可以实现非常强大的 bean 验证功能。而Hibernate提供了@SafeHtml、@Pattern等安全注解。基本上我们可以设置一组提供bean验证的组合注解。[http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-22T14:30:10.067

> 与 Hibernate 验证器 api 相比，使用 ESAPI 库有什么优势吗？

我是一名安全人员，所以我要说的第一件事是，在您担心输入验证之前，请确保在您担心安全级别之前，您已经将上下文转义到后端的科学输入验证。如果数据要进入数据库，请确保您将其转义以进行查询（或准备好的语句或存储的过程），并且在处理该数据时，将其正确转义以发送到下游 Web 服务/命令行/等或当向用户重新呈现该数据时（html/javascript/actionscript/etc）

既然我已经排除了强制性部分，两个库都用于非常不同的事情。ESAPI 的一个主要设计目标是，它旨在帮助保护那些不幸从一开始就没有安全机制设计的应用程序。例如，它为 SQL 注入预先打包了编码数据的技术，由于复杂性/时间限制等，可能无法立即将其重写为参数化查询或存储过程。然而，Hibernate 被设计为 JPA 实现（如您所指出的），并且对[JSR 规范](http://beanvalidation.org/1.0/spec/#d0e112)的引用将对 Hibernate 的实现有所启发：

> 验证数据是贯穿整个应用程序的一项常见任务，从表示层到持久层。通常在每一层中实现相同的验证逻辑，这被证明是耗时且容易出错的。为了避免在每一层中重复这些验证，开发人员经常将验证逻辑直接捆绑到域模型中，将域类与验证代码混在一起，事实上，关于类本身的元数据。

这显然是为了处理域层验证，我偷偷怀疑 Hibernate 确实在应用程序的错误层提供了一些便利方法——可能是糟糕的应用程序设计从 Dao 层一直传递域对象到表示层。您不应该在域模型中清理或删除可能的 HTML。您应该将它放在最初从 HttpRequest 对象中提取数据的控制器/服务层。验证数据后，将数据转换为域对象，然后将其传递到后端。此外，如果/当数据是合法的 javascript 但不是合法的 HTML 时，即使使用 Hibernate`@SafeHtml`也不能保护您免受 javascript 攻击。 [这个](http://blog.infobytesec.com/2012/09/bypassing-wafs-with-non-alphanumeric-xss.html)这就是为什么输出转义比输入过滤重要 100 倍的原因。

回答你的第一个问题：

> 与 Hibernate 验证器 api 相比，使用 ESAPI 库有什么优势吗？

1.  首先，Hibernate 中的“@SafeHtml”不是 JSR 303 规范的一部分，因此使用它可以将 JPA 实现直接绑定到 Hibernate。这会损害维护。
2.  ESAPI 的验证器为您提供了更改验证的能力，`validator.properties`这意味着您可以处理生产中的业务问题，而无需像当前在注释驱动模型中那样进行开发来创建全新的构建。
3.  ESAPI 的验证器由安全专家设计、编写和测试。
4.  这是最重要的事情：ESAPI 为您提供了 在任何 ESAPI调用`ESAPI.encoder().canonicalize()`中隐式使用的方法。`Validator.getValidHtml(args...)`此方法本身允许您确定是否有人正在尝试对您的应用程序进行多重编码攻击。在我所知道的任何其他 Java 安全库中都不存在类似的调用，在 Hibernate 的验证器实现中绝对不存在——而且我永远不会期望 Hibernate 有这个调用，因为它是一个域库。

# 4 的重要性怎么强调都不为过，因为多重编码攻击是大多数 XSS 被注入野外应用程序的方式。这会强制所有输入最多为单个 URL 编码，并允许您立即识别尝试将此类输入输入应用程序的用户。

ESAPI*确实*有一个主要缺点。截至 2014 年秋季，由于社区发展停滞不前，它失去了 OWASP 的旗舰地位。时间会证明球是否开始使用 ESAPI 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T10:09:29.810

仅供参考，我基于 Hibernate Validator 创建了一组专用于输入验证的注解：

[https://github.com/righettod/hibernate-validator-security-contribs](https://github.com/righettod/hibernate-validator-security-contribs)

希望这可以帮助:)

# java - 如何使用带有 action 属性和 oncomplete 属性的 a4j:commandLink 来触发一些 JavaScript？

> ID：13092947
> 
> 赞同：4
> 
> 时间：2012-10-26T19:09:43.167
> 
> 标签：java, javascript, jsf, richfaces, ajax4jsf

我有一些代码可以在 Chrome、IE8 上运行，但在 FireFox 上不行。顺便说一句：我的 a4j: 命名空间是：

这个想法很简单，您希望在商品缺货时收到通知，因此您输入您的电子邮件，我们将小表格替换为简单的谢谢 div。

然而，在 FireFox 中，它通过操作和它的 bean 方法正确地汇总到数据库。然后 oncomplete 它会触发一个 JS 函数并显示感谢消息，但是我认为页面完成了重新加载并且原始表单重新出现，这是我们不想要的！

首先是首页codel中的RichFaces和Events

```
<h:inputText id="email" value="#{customer.stockWatch.email}"
    converter="TextTrimConverter"
    onfocus="if(this.value == 'Enter email address'){ this.value=''; }"
    onblur="if(this.value.trim() == ''){ this.value='Enter email address'; }"
    onkeypress="stockWatchEnterSubmit(event.keyCode);" />

<a:commandLink styleClass="b_submit" id="stockwatchSubmit"
    action="#{customer.stockWatch}"
    oncomplete="stockWatchTextChange(); return false;">
    <span>#{messages.submit}</span>
</a:commandLink> 
```

现在我使用的 2 个简单的 javascript 函数：

```
function stockWatchTextChange() {
    document.getElementById('fstockwatch').setAttribute('id', 'fstockwatch_thanks');
    document.getElementById('fstockwatch_thanks').innerHTML = 'Thank you. We\'ll send you an email once this item is back in stock';
}

function stockWatchEnterSubmit(keyCode) {
    if(keyCode == 13){
        document.getElementById('stockwatchSubmit').click();
    }
} 
```

谢谢你的帮助。让它在三分之二的浏览器中工作！但还不够好！！;)

JSF 是 1.2 版，而我认为 RichFaces 是 3.01？我找到了 RichFaces 的确切版本：
版本是richfaces-api-3.3.1.GA.jar

编辑：我希望我能提供更多信息。这实际上可能是 ajax4jsf / a4j 在网页上有多个单独的 a4j 逻辑时失败的情况......但问题是，它们显然都没有同时使用。所以像我所做的事情应该有效吗？接下来对代码进行一些更改：

```
<h:form id="detailForm" prependId="false">
<h:inputText id="email" value="#{customer.stockWatch.email}"
    converter="TextTrimConverter"
    onfocus="if(this.value == 'Enter email address'){ this.value=''; }"
    onblur="if(this.value == ''){ this.value='Enter email address'; }"
    onkeypress="if(event.keyCode == 13){document.getElementById('stockwatchSubmit').click(); if(event.preventDefault){event.preventDefault();}else{event.returnValue = false;}}" />

<a:commandLink styleClass="b_submit" id="stockwatchSubmit"
    action="#{customer.stockWatch}"
    oncomplete="stockWatchTextChange();">
    <span>#{messages.submit}</span>
</a:commandLink>
</h:form> 
```

我现在也只使用一个 JavaScript 函数，那就是更改包装器 div 的 id 值（因为它会更改 css），然后更新 innerHTML。

另一条可能有助于解决此问题的信息是，当我多次重写和重写 JSF/RICHFACES 以使其工作时——>在所有浏览器中按 ENTER 键并单击提交按钮..

我会看到 action 属性根本不会触发 bean 中的方法。一旦你输入方法，我就有一个系统输出，所以我可以在我的控制台中看到它。而这并没有发生。我们的系统非常强大，所以我不知道该怎么想。除了a4j坏了吗？至少在我们正在运行的版本中.. 我的意思是这是非常简单的代码，并且 action 属性没有进入方法！=)

我的意思是说，它有时确实有效，当我试图让它在所有浏览器上工作时，它会发生各种迭代，该方法确实会触发并将记录插入到数据库中。

但是其他版本的代码 action 属性根本不会触发。这就是我想说的。

再次感谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:54:13.420

您的具体问题是由输入键上的双重提交引起的。

在输入字段中，您有一个`onkeypress`处理程序，当按下回车键时，它会触发`click`提交按钮上的事件。但是您并没有阻止事件的默认行为（当没有`onkeypress`处理程序时会暴露）。在 Firefox 中，显然，通过按回车提交带有命令链接的 ajax 表单。

您基本上需要阻止事件的默认行为。实现这一点的最简单的跨浏览器方法是`false`从`onkeypress`处理程序返回。

```
onkeypress="if (event.keyCode == 13) { document.getElementById('stockwatchSubmit').click(); return false; }" 
```

如果你想将它重构为一个函数，让它返回一个布尔值。

```
onkeypress="return stockWatchEnterSubmit(event.keyCode)" 
```

和

```
function stockWatchEnterSubmit(keyCode) {
    if (keyCode == 13) {
        document.getElementById('stockwatchSubmit').click();
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T17:01:12.523

一些想法：

1.  尝试显式设置`reRender`您的属性`commandLink`以防止重新渲染相关区域。
2.  尝试`return false`从`oncomplete`您的`commandLink`.
3.  你的动作在做什么？您确定该`customerSession.stockWatch`操作不会以某种方式导致页面重新加载吗？

# maxima - Maxima - 在变量名中使用方括号

> ID：13092949
> 
> 赞同：1
> 
> 时间：2012-10-26T19:09:49.537
> 
> 标签：maxima

在 Maxima 中，我想使用函数对任意数量的变量`x[1]`...中的微分方程组进行数值求解 。我在变量名中使用方括号，以便我可以在 for 循环中索引变量。这是当 n = 2 时的示例调用：`x[n]``rk``rk`

```
rk([derivativeOfX[1],-2*x[1]+x[2],derivativeOfX[2],x[1]-2*x[2]], [X[1],derivativeOfX[1],X[2],derivativeOfX[2]], [1,1,2,0], [t,0,10,0.1]) 
```

不幸的是，我得到了错误：

```
define: in definition of f_rk_4, found bad argument X[1] 
```

如果我手动替换`X[1]`with`x1`和`X[2]`with `x2`，错误就会消失：

```
rk([derivativeOfX1,-2*x1+x2,derivativeOfX2,x1-2*x2], [x1,derivativeOfX1,x2,derivativeOfX2], [1,1,2,0], [t,0,10,0.1]); 
```

似乎`rk`不喜欢变量名中的方括号，但我需要它们来索引 for 循环中的变量。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:52:30.180

一个简单的解决方案是有两组变量。在循环中，您使用 x[1] 和 x[2]。在您的 rk(...) 表达式之前，设置 x1 等于 x[1] 和 x2 等于 x[2]。打电话给 rk。然后将 x1 存储在 x[1] 中，将 x2 存储在 x[2] 中。

请注意，您可以使用 concat 生成变量名称。例如 concat('x, 1) 将产生符号 x1。

# javascript - 使用 CSS，如何在不设置显式高度的情况下使两个元素填充 window.innerHeight？

> ID：13092950
> 
> 赞同：0
> 
> 时间：2012-10-26T19:09:49.540
> 
> 标签：javascript, html, css, layout

我编写了以下 jsfiddle，它显示了一个包含两个元素的简单布局。

[http://jsfiddle.net/64kps/RUjj2](http://jsfiddle.net/64kps/RUjj2)

## HTML

```
<div id="hello">hello hello hello hello hello hello hello</div>
<div id="donut">donut</div> 
```

## JavaScript

```
var hello = document.querySelector('#hello');
var donut= document.querySelector('#donut');

var resize = function (event) {
    var helloHeight = window.getComputedStyle(hello).height
    helloHeight = helloHeight.replace('px', '');
    helloHeight = parseFloat(helloHeight);

    donut.style.height = (window.innerHeight - helloHeight) + 'px';
};

window.addEventListener('resize', resize, false);
resize(); 
```

## 我的问题

黄色元素保持固定在顶部，并具有取决于其内容所需的任何高度（请注意，高度未明确指定）

红色元素占据了剩余的垂直空间来填充窗口。

需要注意的是，随着窗口宽度的变化，黄色和红色元素的高度都会发生变化。

我想知道是否有任何方法可以使用纯 CSS 而不必使用 JavaScript 来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:25:06.667

要填充窗口，请将 body 标记的背景设置为填充颜色。您的 CSS 将是：

```
body {
  background-color: red;
}
#hello {
  background-color: yellow;
  font-size: 50px;
} 
```

无需为#donut 设置背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:13:04.683

你必须给 body 或 parent div 一个特定的高度来实现这一点，看看：

```
#hello {
 background-color: yellow;
 font-size: 50px;
}
#donut {
 background-color: red;
 height:100%;
}
body{height:1000px;}​ 
```

[http://jsfiddle.net/hillsons/vqAaE/](http://jsfiddle.net/hillsons/vqAaE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:42:46.230

这是我对您问题的解决方案

hrml:

```
<div id="asd">
    <div id="hello">hello hello hello hello hello hello hello</div>
    <div id="donut">donut</div>
</div> 
```

CSS：

```
#hello {
    background-color: yellow;
    font-size: 60px;
}
#donut {
    background-color: red;
    height:100%;
}
#asd{
    position:absolute;
    height:auto;
    top:0;
    bottom:0;
} 
```

我在 ie8+、ff16 chrome 22 上测试过

小提琴链接：http: [//jsfiddle.net/RUjj2/8/](http://jsfiddle.net/RUjj2/8/)

# android - 我不知道如何解决的Android AsyncTask方法

> ID：13092956
> 
> 赞同：0
> 
> 时间：2012-10-26T19:11:17.713
> 
> 标签：android, android-asynctask

我调试了我的程序，我注意到我无法在同一个线程上运行网络（我像 2 天一样搜索了这个错误，因为在虚拟设备中应用程序没有问题 -.- ）。所以现在我知道我必须如何修复它，但我不知道如何将一些不全是字符串的参数提供给 doinBackground 方法。

我的方法需要一个 url 方法，我可以在 doInBackground 方法中使用 params[0] 和 params[1] 访问 afaik。但是 NameValuePairs 列表是怎么回事，我如何在 doInBackground 方法中访问它？

非常感谢您的帮助 ：）

这是我的课：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.params.ClientPNames;
import org.apache.http.client.params.CookiePolicy;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

public class JSONParser extends AsyncTask<String, Void, JSONObject>{

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // Funktion um JSON aus einer URL zu holen
    // Es wird ein POST oder ein GET Request gesendet
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // HTTP Request erstellen
        try {

            // Überprüfen welche Request Methode benutzt werden soll
            if(method == "POST"){
                DefaultHttpClient httpClient = new DefaultHttpClient();
                httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY,
                        CookiePolicy.BROWSER_COMPATIBILITY);
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }          

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        //Stream in ein String umwandeln
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Fehler!", "Fehler mein umwandeln von Stream in String: " + e.toString());
        }

        // JSON Object parsen
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // Das JSONObject zurückgeben
        return jObj;

    }

    @Override
    protected JSONObject doInBackground(String... params) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:42:42.463

我认为您没有完全理解 AsyncTasks 的完整概念。当您想在后台线程中运行操作时使用这些，这是完成此任务的一种非常好/灵活的方式。对我来说真正好的是`onPostExecute()`在主线程上执行，所以一旦你的工作在`doInBackground()`. 您应该记住，因为`onPostExecute()`确实在主线程上执行，所以您不想在这里执行任何网络操作。

**这是一个 AsyncTask 的简单示例：**

```
private class myAsyncTask extends AsyncTask<String, Void, Boolean> {

    @Override
    protected void onPreExecute() {
        // before we start working
    }   

    @Override
    protected Boolean doInBackground(String... args) {
        //do work in the background
        return true;
    }

    @Override
    protected void onPostExecute(Boolean success) {
        // the work is done.. now what?
    }       
} 
```

`doInBackground()`是你要做大部分工作的地方，所以我会尽力帮助你建立你想要的基本结构。我只是将您的代码复制并粘贴到我认为应该去的地方，所以这不是 100% 保证的，但希望它有助于开始您想做的事情：

```
private class JSONParser extends AsyncTask<String, Void, JSONObject> {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // variables passed in:
    String url;
    String method;
    List<NameValuePair> params;

    // constructor
    public JSONParser(String url, String method, 
        List<NameValuePair> params) {
        this.url = url;
        this.method = method;
        this.params = params;
    }

    @Override
    protected JSONObject doInBackground(String... args) {
        try {
            if(method == "POST"){
                DefaultHttpClient httpClient = new DefaultHttpClient();
                httpClient.getParams().setParameter(ClientPNames.COOKIE_POLICY,
                        CookiePolicy.BROWSER_COMPATIBILITY);
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            } else if(method == "GET"){
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Fehler!", "Fehler mein umwandeln von Stream in String: " + e.toString());
        }

        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        return jObj;
    }

    @Override
    protected void onPostExecute(JSONObject obj) {
        // Now we have your JSONObject, play around with it.
    }       
} 
```

编辑：

我忘了提到你也可以传入`args`which 是一个字符串数组。您可以在调用 AsyncTask 时创建 args 并将其传入：

```
new JSONParser(url, method, params).execute(args); 
```

你可以访问 args`doInBackground()`

以下是有关 AyncTask 的更多信息：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 如何为类集属性传递参数（不是类声明）

> ID：13092958
> 
> 赞同：3
> 
> 时间：2012-10-26T19:11:28.563
> 
> 标签：c#, class, properties, parameters, set

**背景：**

我正在制作 ac# 4.0 类以供重用，因此我可以将一个参数发送到我程序的大多数方法并传递一个“连接”对象，该对象可以包含以下内容：

*   连接字符串
*   DbConnection（即 OleDbConnection 或 SQLConnection）
*   DataReader（即 OleDbDataReader 或 SQLDataReader）

原因是我最终会升级到 SQL Server 并且不想更改我的方法参数或代码这么多。方法通常必须从同一个数据库中到处调用快速查询。

**问题：**

如何在下面的方法中为 DbType（现在硬编码为整数 1）正确设置（和调用）DRMDbConnection 'set' 参数的右侧：

```
set { drmDbConnection = SetDRMDbConnection(1); } 
```

**示例代码：**

```
public class Connections
{

public string DRMDbConnectionString { get; set; }
private object drmDbConnection;

public object DRMDbConnection
{
  get { return drmDbConnection; }
  set { drmDbConnection = SetDRMDbConnection(1); }
}

private object SetDRMDbConnection(int DbType)
{
  if (DbType == 1)
    return new System.Data.OleDb.OleDbConnection();
  else
    return new SqlConnection();
} 
```

}

**10 月 31 日编辑**

我更新了类代码以使用推荐的 IDbConnection、IDbCommand 和 IDataReader。注意：如果不更改 SQL Server 连接字符串，您将收到错误消息：“已经有一个打开的 DataReader 与此命令关联，必须先关闭。” 因此将其添加到连接字符串：“MultipleActiveResultSets=True;”

**更新的类代码**

```
public class Connections
// reusuable object to hold all database Connections and a convenient DataReader and Command object.
// Its purpose is to also be able to handle your choice of database connection, i.e. OleDb or SQL Server.
{
public string DRMConnectionString { get; set; }
public IDbConnection DRMConnection;

public IDbCommand DRMCommand
{
  get { return DRMConnection.CreateCommand(); }
  set { }
}

public int DRMConnectionType
// must be called to setup database connection and command.  The connectionstring must be previously set.
{
  set
  {
    if (value == 1)
      DRMConnection = new System.Data.OleDb.OleDbConnection(DRMConnectionString);
    else
      DRMConnection = new SqlConnection(DRMConnectionString);
  }
}

public void CloseConnections()
{
  if (DRMCommand != null)
    DRMCommand.Dispose();

  if ((DRMConnection != null) && (DRMConnection.State != ConnectionState.Closed))
    DRMConnection.Close();
}
} 
```

**呼叫代码**

```
var conn = new Connections();
conn.DRMConnectionString = "my connection string";
conn.DRMConnectionType = 2;
conn.DRMConnection.Open();
try
{
  using (var cmd = conn.DRMCommand)
  {
    cmd.CommandText = "SELECT * FROM MyTable";
    using (var rdr = cmd.ExecuteReader())
    {
      while (rdr.Read())      
      {
         CallSubMethodThatAlsoOpensDataReader(conn);  
      } 
    } 
  }
}
finally
{
  conn.CloseConnections();
} 

CallSubMethodThatAlsoOpensDataReader(Connections Conn)
{
  using (var cmd = Conn.DRMCommand)
  {
    cmd.CommandText = "SELECT * FROM MyOtherTable";
    using (var rdr = cmd.ExecuteReader())  // Error: There is already an open DataReader associated with this Command which must be closed first.
    {
       ; // do stuff
    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:13:46.200

属性 getter/setter 不能接受参数。您将需要将此作为方法来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:18:08.927

您可以按如下方式使其工作：

```
public IDbConnection DRMDbConnection // Note the change of the type
{
    get { return drmDbConnection; }
}
public int DrmDbConnectionType
{
    set {
        if (vale== 1)
            drmDbConnection = new System.Data.OleDb.OleDbConnection();
        else
            drmDbConnection = new SqlConnection();
    }
} 
```

> 原因是我最终会升级到 SQL Server 并且不想更改我的方法参数或代码这么多。

我认为这是您要解决的关键问题。不是针对特定的类进行编程，而是针对接口进行编程。具体来说，使用[`IDbConnection`](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.aspx)代替`SqlConnection`or`OleDbConnection`可以让您更好地隐藏确切的类型，而不是将其封装在`DRMDbConnection`.

# android - 使用 Phonegap 显示 PDF - 多平台

> ID：13092961
> 
> 赞同：1
> 
> 时间：2012-10-26T19:11:52.110
> 
> 标签：android, iphone, pdf, cordova, windows-phone-7.1

我正在尝试使用phonegap 制作一个可以从互联网打开（和保存）PDF 文件的移动应用程序。这个应用程序应该可以在 Iphone、android 和 windows phone 上运行（这就是我选择 Phonegap 的原因）

我想我尝试了我能找到的一切，但我无法在设备上实现这一点。我可以控制提供 PDF (aspx) 的网络服务。

有没有人有一个例子可能如何做到这一点？我尝试了 ChildBrowser 插件，但也没有运气。我可以打开网站（http://www.etc.com），但是当我尝试打开 PDF（http **s** ://something.com?GetPDF.aspx）时，我只在 cildbrowser 插件中看到一个白色窗口。使用 HTML5 对象 en embed 标签，我也无法显示 PDF。

任何帮助都会很棒，因为在这一点上我被卡住了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:15:11.703

在 cordova-2.5.0 中，我只使用 open.window 并将外部 PDF 传递给谷歌，如下所示：

```
onClick="window.open('http://docs.google.com/viewer?url=http://yoursite.com/thepdf.pdf','_blank', 'location=no'); return false; 
```

然后 pdf 打开带有 phonegap [InAppBrowser](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html)。非常基本，但允许在 iOS 和 Android 之间提供更标准化的体验。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T10:04:45.037

你需要先下载文件，然后在你打开这个pdf文件的地方创建文件资源管理器，或者你从互联网上打开文件，然后你需要试试这个代码：

```
childbrowser = ChildBrowser.install(); // create child browser
 var strrrPath = "http://www.section508.gov/docs/pdfguidanceforgovernment.pdf";
var path = strPath.substr(0,strPath.lastIndexOf('/')); //added file path - addres to file
childbrowser.showWebPage(encodeURI(path)); //open file 
```

# ruby - Ruby - Watir gem 来获取链接

> ID：13092964
> 
> 赞同：2
> 
> 时间：2012-10-26T19:12:01.747
> 
> 标签：ruby, watir, ruby-1.9

有没有办法获得给定属性的所有链接？

在树下，我得到了很多这样的标签：

```
<div class="name">
<a hef="http://www.example.com/link">This is a name</a>
</div> 
```

有没有办法做这样的事情：`b.links(:class, "name")`它会输出所有 div 名称类的所有超链接和标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:00:27.593

明确地描述您如何描述有关属性的浏览器对象，这就是您必须这样做的方式。否则，@SporkInventor 的答案就是链接属性。

```
@myLinks = Array.new
@browser.divs(:class => "name").each do |d|  
   d.links.each {|link| @myLinks << link }
end 
```

1.  创建一个新数组来收集我们的链接。
2.  对于浏览器中类等于“名称”的每个 div，抓取所有链接并将它们放入数组中。

    @myLinks.each {|链接| puts link.href } #etc 等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:29:07.280

在这种情况下，我会使用 CSS 选择器：

```
#If you want all links anywhere within the div with class "name"
browser.links(:css => 'div.name a')

#If you want all links that are a direct child of the div with class "name"
browser.links(:css => 'div.name > a') 
```

或者如果您更喜欢 xpath：

```
#If you want all links anywhere within the div with class "name"
browser.links(:xpath => '//div[@class="name"]//a')

#If you want all links that are a direct child of the div with class "name"
browser.links(:xpath => '//div[@class="name"]/a') 
```

**示例（CSS）**

假设您有一个 HTML，例如：

```
<div class="name">
    <a href="http://www.example.com/link1">
        This link is a direct child of the div
    </a>
</div>
<div class="stuff">
    <a href="http://www.example.com/link2">
        This link does not have the matching div
    </a>
</div>
<div class="name">
    <span>
        <a href="http://www.example.com/link3">
            This link is not a direct child of the div
        </a>
    </span>
</div> 
```

然后css方法会给出结果：

```
browser.links(:css, 'div.name a').collect(&:href)
#=> ["http://www.example.com/link1", "http://www.example.com/link3"]

browser.links(:css, 'div.name > a').collect(&:href)
#=> ["http://www.example.com/link1"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:45:38.257

我认为开箱即用的 watir 无法做到这一点。

但是，可以使用“waitr-webdriver”完全按照您的类型来完成。

```
irb(main):001:0> require 'watir-webdriver'
=> true
irb(main):002:0> b = Watir::Browser.new :firefox
=> #<Watir::Browser:0x59c0fcd6 url="about:blank" title="">
irb(main):003:0> b.goto "http://www.stackoverflow.com"
=> "http://stackoverflow.com/"
irb(main):004:0> b.links.length
=> 770
irb(main):005:0> b.links(:class, 'question-hyperlink').length
=> 91 
```

# jquery - jQuery过滤方法混淆

> ID：13092965
> 
> 赞同：0
> 
> 时间：2012-10-26T19:12:03.550
> 
> 标签：jquery, jquery-selectors

我正在尝试使用 filter 方法过滤 jQuery 对象，但没有得到我期望的结果。这是我的代码：

```
var $contents = $(".container");
var $spans = $contents.filter("span"); 
```

根据我对[jQuery 过滤器方法](http://api.jquery.com/filter/)的理解，这应该等同于以下内容：

```
var $spans = $(".container span"); 
```

但是，第一个示例没有将结果返回到 $spans 变量中，而第二个示例则符合我的预期。

谁能解释为什么第一个示例不返回容器中所有 span 元素的集合？

这是一个说明问题的 jsfiddle：http: [//jsfiddle.net/w8Sf7/](http://jsfiddle.net/w8Sf7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:14:39.833

过滤器 - 用于过滤掉您的结果

```
var $spans = $contents.filter("span"); // <-- filters out the span that are inside $contents collection 
```

所以过滤器正在寻找你`$(".container");`的跨度元素

您的过滤器等于

```
var $spans = $("span.container"); 
```

其他的

```
var $spans = $(".container span.container"); // <-- gets descendant spans inside .container 
```

所以这会返回任何后代`span`元素`$(".container");`

所以

```
var $spans = $(".container span") 
```

等于

```
var $spans = $(".container").find('span'); 
```

等于

```
var $spans = $('span',".container"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:15:33.480

那是因为您正在创建一个包含 div 标签的 jQuery 对象，因为集合中没有选定的 span 元素，长度为 0。

你想要的是`find`或`children`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:15:35.913

这些是等价的：

```
$contents.filter("span")
$("span.container"); 
```

因为两者都会找到属于`span`s 类的元素`container`。

那么，这些是等价的：

```
$contents.find("span");
$(".container span") 
```

因为两者都会找到`span`s 包含在具有类的元素中`container`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T19:20:00.170

`.filter()`查看被选中的元素。不在其子孙处。如果要选择后代，`<div class="container">`可以通过多种方式进行。以下是如何使用`find()`. 但这可能不是最有效的方法。

```
var $contents = $(".container");
$contents.find("*").filter("span"); 
```

这些可能更有效。

```
$(".container span")
$contents.find("span") 
```

如果你想要孩子，那么你可以使用以下内容。

```
$contents.children("span") 
```

还有`$(descendantsOfElement, element)`选择器。但是我认为在对代码进行故障排除时很难阅读它，所以我很少（如果有的话）使用它。

# java - Java：Runtime.exec 获取 Linux 发行版名称

> ID：13092970
> 
> 赞同：2
> 
> 时间：2012-10-26T19:12:24.250
> 
> 标签：java, command, exec

我想检查发行版名称，但 bash 执行命令时遇到问题。为什么此代码可以正常工作并打印文件夹内容

```
String cmd[] = {"ls","-a"};
Runtime run = Runtime.getRuntime(); 
try {
    Process proc = run.exec(cmd);
    BufferedReader read=new BufferedReader(new InputStreamReader(proc.getInputStream()));
    while(read.ready()) {
        System.out.println(read.readLine());
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

但`cmd[] = {"cat","/etc/*-release"};`不是吗？它根本不打印任何东西，既不是错误也不是发行版。办公室。它在终端中工作。那有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:16:53.470

它在 Bash 中工作的原因是 Bash 将其识别`/etc/*-release`为 glob 并执行必要的文件名扩展。`Process`不这样做；它只是`cat`使用您指定的确切参数调用。（换句话说，您正在运行相当于 Bash 命令`cat '/etc/*-release'`。）

我想，一种选择是实际调用 Bash 并让它为您处理：

```
String cmd[] = { "bash", "-c", "cat /etc/*-release" }; 
```

但我认为使用 Java 文件系统 API 搜索`/etc`名称以 结尾的文件`-release`并正常读取该文件的内容更有意义。（请参阅[Javadoc for`java.io.File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)和[Javadoc for`java.io.FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:22:32.953

试试这个：

```
 String[] cmd = {
    "/bin/sh", "-c", "cat /etc/*-release" };

    try {
        Process p = Runtime.getRuntime().exec(cmd);
        BufferedReader bri = new BufferedReader(new InputStreamReader(
                p.getInputStream()));

        String line = "";
        while ((line = bri.readLine()) != null) {
            System.out.println(line);
        }
    } catch (IOException e) {

        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:26:19.477

`Runtime.exec`不调用 shell（例如 bash），而是直接启动进程。当您输入`ls /etc/*-release`bash 时，bash 本身负责将 * 扩展为与该模式匹配的所有文件名。因此，当 bash 调用 ls 命令时， ls 将实际文件名视为参数。另一方面，当您的 java 代码调用 ls 命令时，ls 会看到实际的字符串“/etc/*-release”，这是一个不存在的文件。

最简单的解决方法是通过 /etc/lsb-release。更好的解决方案是调用`lsb_release -c`.

# jquery - 自动滚动到页面顶部 Jquery Mobile

> ID：13092974
> 
> 赞同：0
> 
> 时间：2012-10-26T19:13:01.787
> 
> 标签：jquery, jquery-mobile, blackberry

如何在加载页面时自动滚动到浏览器窗口的底部，从而将地址栏向上推？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:04:10.870

只要您的页面长于 iOS 设备的屏幕高度，下面的脚本就会起作用并隐藏 safari 应用程序顶部的地址栏，如果这是您想要实现的...

```
$(document).ready(function(){
    setTimeout(function(){
       window.scrollTo(0, 1);
    }, 0);
}); 
```

如果页面不长于视口高度，则无处可滚动，此脚本将不起作用！

但是，如果将网站添加到 iOS 设备的主屏幕，则以下行将隐藏所有界面组件

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

您可以在 Apple 文档中阅读相关内容：[Apple Dev Library](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/configuringwebapplications/configuringwebapplications.html)

# apache - 如果放在子目录中，htaccess 不起作用

> ID：13092977
> 
> 赞同：0
> 
> 时间：2012-10-26T19:13:05.937
> 
> 标签：apache, .htaccess

Apache 不会在我的别名目录中加载我的 .htaccess 文件。

如果我将 .htaccess 文件放在我的根文件夹 (D:/Development) 和项目文件夹 (D:/Development/code/project) 中，

`http://localhost/filename.html` 将我重定向到stackoverflow。

`http://localhost/project/filename.html` 返回未找到 404。

我在 Windows 7 64 位上运行 xampp。

为什么我不能在我的子目录中使用我的 .htaccess？

httpd.conf：

```
<Directory />
    Options +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Deny from all
</Directory>
<Directory "D:/Development">
    Options +Indexes +FollowSymLinks +Includes +ExecCGI
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

httpd-vhosts.conf：

```
 Alias /project "D:/Development/code/project/"
 <Directory "D:/Development/code/project/">
    Options +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

.htaccess（重定向用于测试）：

```
redirect 301 /filename.html http://stackoverflow.com
AddDefaultCharset utf-8
RewriteEngine ON
RewriteRule ^(stylesheet|images|favicon) - [L]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^.*$ /index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-07T09:27:44.900

因为您仅重定向文件 /filename.html
将代码的第一行替换为

```
redirect 301 filename.html http://stackoverflow.com 
```

# javascript - SVG JavaScript“饼楔”生成器

> ID：13092979
> 
> 赞同：1
> 
> 时间：2012-10-26T19:13:13.377
> 
> 标签：javascript, svg

我正在尝试创建一个“馅饼楔”。而且我不擅长。我已经很久没有参加trig了。我查看了很多示例，并在 JS 中生成了这个代码生成器：

```
var startPointX = 200;
var startPointY = 200;
var startAngle = 180;
var endAngle = 210;
var x1 = startPointX + 180*Math.cos(Math.PI*startAngle/180); 
var y1 = startPointY + 180*Math.sin(Math.PI*startAngle/180); 

var x2 = startPointX + 180*Math.cos(Math.PI*endAngle/180);
var y2 = startPointY + 180*Math.sin(Math.PI*endAngle/180);
console.log("M200,200 L" + x1 + "," + y1 + " A180,180 0 0,1 " + x2 + "," + y2 + " z"); 
```

效果很好！

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <path d="M200,200 L20,200 A180,180 0 0,1 44.1,110 z" fill="red" stroke="none" stroke-width="0" />
</svg> 
```

但是，我需要做的是**改变生成的“楔形”的半径**。我似乎无法弄清楚哪些参数对应，或者我将如何修改我的方程以进行补偿。替换所有的“180”给了我一些奇怪的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:23:46.777

弧中的前两个值（在 A 之后）是弧的起始坐标，因此应该等于 x1，y1。尝试：

```
var startPointX = 200;
var startPointY = 200;
var startAngle = 180;
var endAngle = 210;
var radius = 100;

var x1 = startPointX + radius * Math.cos(Math.PI * startAngle/180); 
var y1 = startPointY + radius * Math.sin(Math.PI * startAngle/180);     
var x2 = startPointX + radius * Math.cos(Math.PI * endAngle/180);
var y2 = startPointY + radius * Math.sin(Math.PI * endAngle/180);

console.log("M200,200 L" + x1 + "," + y1 + " A" + radius + "," + radius + " 0 0,1 " + x2 + "," + y2 + " z"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-26T00:53:35.297

我使用了已接受答案的修改版本，因为楔形变形的尺寸不同。我只是将绘制圆弧的圆的大小更改为圆的半径。这适用于小于 180 度的楔形。

```
var generateWedgeString = function(startX, startY, startAngle, endAngle, radius){
        var x1 = startX + radius * Math.cos(Math.PI * startAngle/180);
        var y1 = startY + radius * Math.sin(Math.PI * startAngle/180);
        var x2 = startX + radius * Math.cos(Math.PI * endAngle/180);
        var y2 = startY + radius * Math.sin(Math.PI * endAngle/180);

        var pathString = "M"+ startX + " " + startY + " L" + x1 + " " + y1 + " A" + radius + " " + radius + " 0 0 1 " + x2 + " " + y2 + " z";

        return pathString;

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:24:29.240

不要替换所有的 180，只是那些不涉及在度数和弧度之间转换的。因此，三角函数 ( `Math.cos(...)`, `Math.sin(...)`) 中出现的 4 次事件应该保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T16:09:01.523

谁想要 PHP 中的这个？你做！[我已经修改了 No Context 的答案，并与来自How to calculate the SVG Path for an arc (of a circle) 的](https://stackoverflow.com/questions/5736398/how-to-calculate-the-svg-path-for-an-arc-of-a-circle)opsb 的答案混合：

```
function polarToCartesian($centerX, $centerY, $radius, $angleInDegrees) {
    $angleInRadians = ($angleInDegrees - 90) * pi() / 180.0;
    return array(
        "x" => $centerX + ($radius * cos($angleInRadians)),
        "y" => $centerY + ($radius * sin($angleInRadians)),
    );
}

function describeArc($x, $y, $radius, $startAngle, $endAngle){
    $start = polarToCartesian($x, $y, $radius, $startAngle);
    $end = polarToCartesian($x, $y, $radius, $endAngle);
    $arcSweep = $endAngle - $startAngle <= 180 ? "0" : "1";

    return "M $x $y L $start[x] $start[y] A $radius $radius 0 $arcSweep 1 $end[x] $end[y] z";
} 
```

请注意，如果您想要一个到 360 的楔形，请使用 359.9999。

# hubot - 在 HipChat 上的 Hubot 中匹配用户名和@提及名称

> ID：13092980
> 
> 赞同：5
> 
> 时间：2012-10-26T19:13:23.743
> 
> 标签：hubot

有没有办法找到用户名的@提及名称（数字 xxxx_xxxxxx 或全名），反之亦然？

查看 msg.message 对象，有一个用户对象，其中包含消息来自的人的 id、jid 和姓名。我想找到那个人的@提及名称，以及他们在消息中@提及的任何人的用户名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-15T03:51:39.673

我也想要这个。但由于它不在 xmpp 消息中，因此hubot 不会知道它。我认为您需要添加一个命令，将提及名称设置为用户的属性。就像是：

```
robot.respond /mentionname is @?(.+)$/i, (msg) ->
  mentionname = msg.match[2]

  user = robot.brain.userForId(msg.envelope.user.id)
  user.mentionname = mentionname 
```

然后，您可以在其他自定义命令中查找它。您将另一个方法添加到大脑 userForMentionName，它的作用与 userForName 大致相同。在你的脚本初始化中将它添加到大脑中。

```
userForMentionName = (name) ->
  result = null
  lowerName = name.toLowerCase()

  for k of (robot.brain.data.users or { })
    mentionName = robot.brain.data.users[k]['mention_name']      
    if mentionName? and mentionName.toLowerCase() is lowerName
      result = robot.brain.data.users[k]
  result 
```

或者，您可以修改 userForName 以检查 userName 或提及名称字段，但这可能会破坏其他内容。无论哪种方式，您都需要您的用户告诉hubot他们的mentionname是什么......或者如果hubot-hipchat适配器有这些信息，它可能会查找它......我会看看。

- 编辑 -

忽略所有这些：D hipchat 适配器将“mention_name”字段添加到存储在大脑中的用户对象。因此，您所要做的就是遍历用户并找到具有匹配提及名称的用户

# c# - 2个不同的字符串可以在C#中具有相同的哈希码吗？

> ID：13092985
> 
> 赞同：5
> 
> 时间：2012-10-26T19:13:35.777
> 
> 标签：c#, string

> **可能重复：**
> [hashCode 的用途是什么？它是独一无二的吗？](https://stackoverflow.com/questions/7425142/what-is-hashcode-use-for-is-it-unique)

我正在生成很多字符串，那么我的问题是：

2 个不同的字符串可以在 C# 中具有相同的哈希码吗？

通过哈希码我的意思是：

```
string s = "Hello";
s.GetHashCode(); 
```

我的问题更多的是关于 C# 生成字符串的算法，也许当所有其他哈希码已经生成或者没有生成时，就会发生冲突。可能有人有这个答案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-26T19:14:50.690

是的。哈希码不是唯一的。有 2^32 (4,294,967,296) 个可能的哈希码（一个对应于 32 位整数中的每个整数值）。实际上有无数个可能的字符串。显然，无限数量的字符串中的每一个都不可能具有不同数量的有限数。

具有相同哈希码的两个不同字符串（或任何值）称为“冲突”。一个好的散列算法将尝试确保最大限度地减少冲突（尽管它们不能被消除）。这通常取决于实践中的实际数据类型；在这种字符串的情况下，这意味着相似或大小相似的字符串应该（理想情况下）不太容易发生冲突。

我假设您之所以问是因为您正在考虑使用字符串的哈希码作为字符串的唯一标识符。 [不要那样做](http://blogs.msdn.com/b/ericlippert/archive/2010/03/22/socks-birthdays-and-hash-collisions.aspx)。

[如果您有兴趣，这里](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)有一个链接，可以更详细地了解哈希码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T19:14:59.067

通常，一旦您拥有与散列空间大小的平方根一样多的元素，您应该期望散列冲突[http://en.wikipedia.org/wiki/Birthday_problem](http://en.wikipedia.org/wiki/Birthday_problem)

对于 32 位散列，您应该期待您的第一次碰撞围绕 65k 元素。这当然是统计的，所以你无法准确预测它何时会发生，但它对直觉很有用。如果你有 10 个字符串，你可能不需要担心碰撞，如果你有 100k，你肯定会担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:33:37.113

这取决于散列函数以及它使用的算法。

一般来说，一些散列技术可以将一个输入（您要散列的值）映射到一个输出（散列值），而另一些可能会将两个不同的输入映射到同一个输出，后者称为 Collision [http://en。 wikipedia.org/wiki/Collision_(computer_science)](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)

例如，如果一个散列函数将 100 个用户的名字编码为数字 0-9，我们就会有很多冲突。

回到`GetHashCode();`

参考MSDN上的这两篇文章：

[http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)

这个解释了这个功能，这是它底部的引用，检查第一个项目符号：

> > GetHashCode 旨在只做一件事：平衡哈希表。请勿将其用于其他任何用途。尤其：
> 
> *   它不提供对象的唯一键；碰撞概率极高。
> *   它不具有加密强度，因此请勿将其用作数字签名的一部分或等效密码
> *   它不一定具有校验和所需的错误检测属性。

这里有更多解释：

[http://blogs.msdn.com/b/ericlippert/archive/2010/03/22/socks-birthdays-and-hash-collisions.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/03/22/socks-birthdays-and-hash-collisions.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T19:14:38.257

简单的答案是“是”。使用哈希码，您总是有发生冲突的机会。

# ruby-on-rails - 在 Rails 中将临时文件附加到电子邮件时出错

> ID：13092987
> 
> 赞同：6
> 
> 时间：2012-10-26T19:13:45.700
> 
> 标签：ruby-on-rails, ruby, email, attachment, temporary-files

有文件在`@attachment`. 从调试：

```
"datafile"=>#<ActionDispatch::Http::UploadedFile:0x3eee9c0        @original_filename="filename.jpg",
 @content_type="image/jpeg",
 @headers="Content-Disposition: form-data; name=\"datafile\";   filename=\"filename.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @tempfile=#<File:C:/Users/.../RackMultipart20121026-2452-g369hf>>, 
```

它是通过用户表单上传的。

我正在尝试将其附加到电子邮件中：

```
...
attachments[@attachment.original_filename] = @attachment
mail(:to => "email@email.com", :subject => "test", :from => @fromaddress) 
```

哪些错误：

> # 未定义的方法“长度”

我也试过

```
attachments[@attachment.original_filename] = @attachment.tempfile 
```

哪些错误：

```
undefined method `[]' for #<Tempfile:0x5629e48> 
```

`@attachment.original_filename`返回正确的文件名（例如“filename.jpg”）

有什么明显的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T19:29:21.593

除非您将上传的文件保存到某个地方，否则您可以用它做什么（出于安全原因 - 您应该验证上传然后存储文件）。

但你应该能够`read`文件：

```
attachments[@attachment.original_filename] = @attachment.read 
```

注意：我没有测试过这个，也许你需要从`@attachment.tempfile`

# html - 如何让横幅占据整个屏幕宽度 CSS

> ID：13092990
> 
> 赞同：1
> 
> 时间：2012-10-26T19:13:57.617
> 
> 标签：html, css

我需要 div 栏占据屏幕的整个宽度。我试过使用 width:1920px; 但是如果我改变我的屏幕资源，它会给它一个滚动条。我也试过 width:100%; 但这也没有用！

CSS

```
#bar {
    background: white;
    font-family: Designio;
    margin-top: -76px;
    position: absoulte;
    top: 115px;
    padding: 15px;
    height: 60px;
    width: 1930px;
    margin-left: -600px;
    background-size: 100%;
}

body {
    min-width: 768px;
    margin: 0px;
    background: #0e6585;
    font-size: 40px;
}

img.top {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

#container {
    height: 768px;
    background: #0e6585;
    font-family: Designio
}

#inner {
    text-decoration: none;
    box-shadow: inset 1px 1px 10px 2px #fff;
    border-radius: 50px;
    margin: 0 auto;
    margin-top: 100px;
    width: 800px;
    height: 600px;
    background: #0e6585;
    padding: 20px;
    color: #946e44;
    text-align: center;
}

#nav a.active {
    background-color: #0e6586;
    color: white;
}

#nav {
    height: 10px;
    width: 100%;
    float: left;
    margin: 0 0 1em 0;
    padding: 0px;
    background-color: white;
    margin-top: -10px;
    border-bottom: 1px solid white;
}

#nav ul {
    list-style: none;
    width: 900px;
    margin: 0 auto;
    padding: 0;
    text-align: center
}

#nav li {
    float: left;
    text-align: center
}

#nav li a {
    margin-top: 15px;
    display: block;
    padding: 8px 15px;
    text-decoration: none;
    color: #0e6585;
    border-right: 1px solid #ccc;
    text-align: center
}

#nav li a:hover {
    color: #0e6586;
    background-color: white;
    text-align: center
} 
```

HTML

```
<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="css/Primary.css">
    </head>
    <body>
        <div id="container">

            <div id="inner">

                <div style="margin-top: -120px">

                    <div id ="bar">
                        <div id="nav">
                            <ul>
                                <li>
                                <li>
                                    <a href="home.html" class="active">Home</a>
                                </li>
                                <li>
                                    <a href="#">About</a>
                                </li>
                                <li>
                                    <a href="#">Graphics</a>
                                </li>
                                <li>
                                    <a href="#">Web Design</a>
                                </li>
                                <li>
                                    <a href="#">Contact</a>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:22:17.917

要让一个元素填充视口的宽度，它应该是绝对定位的，并且只能是也填充视口宽度的元素的后代（例如： ，没有设置宽度`body`的后代 div ），或者它`body`应固定位置。然后，该元素需要具有`left: 0`和`right: 0`。

`#bar`将您的规则集更改为：

```
#bar{
    background:white;
    font-family:Designio;
    position:absolute;
    left: 0;
    right: 0;
    padding:15px;
    height:60px;
    background-size:100%;      
} 
```

概括：

1.  删除所有多余的大小和负边距属性。
2.  修复样式表中的拼写错误 - 更改`position: absoulte`为`position: absolute`.
3.  设置`left: 0`和`right: 0`。

演示：http: [//jsbin.com/ofeful/1/edit](http://jsbin.com/ofeful/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:16:06.497

在您的父 div 上使用边距。

```
.container
{
    margin-left: 0px;
    margin-right: 0px;
} 
```

一个小提琴：http: [//jsfiddle.net/PVKbp/](http://jsfiddle.net/PVKbp/)

在另一个明显的阅读遗漏中，您的`#bar`元素被设置为绝对定位在其他两个元素中。您需要将其从容器中取出（除非您需要将其放置在容器内）才能`left: 0; right: 0`正常工作。如果您需要它在容器内，您还需要使用上面的边距属性扩展容器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-02T23:40:10.443

你可以使用`width:*;`. 这应该使它占据整个屏幕的宽度。

# iframe - 我如何只显示来自目标页面的内容

> ID：13092993
> 
> 赞同：1
> 
> 时间：2012-10-26T19:14:14.337
> 
> 标签：iframe

如何只加载目标 html 页面而不是周围的框架？

我使用此代码作为打开页面的链接：

`<a href="/apex/page" target ="myiframe">Customer</a> <br>`

我正在使用以下参数将内容加载到 html 页面中：

`<iframe name="myiframe" style="width: 100%; height: 100%; overflow-x: hidden; border: none;"></iframe>`

-谢谢

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:53:37.753

你试过了`style="overflow: hidden;"`吗？这个对我有用..

# youtube-api - 重新加载 youtube api

> ID：13092997
> 
> 赞同：4
> 
> 时间：2012-10-26T19:14:32.667
> 
> 标签：youtube-api

我需要加载、销毁和重新加载[YouTube Upload Widget](https://developers.google.com/youtube/youtube_upload_widget)，但不幸的是重新加载它不起作用。

我执行了以下步骤：

1.  **我按照howto- works**中的描述加载了Youtube Upload Widget
***   我从网络摄像头捕捉视频 -**有效***   我使用 ) 销毁小部件`widget.destroy(`-**有效***   我从 HTML 中删除脚本元素 -**有效***   我按照步骤 1 重新加载 API -**没有任何反应****

 **为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T01:10:23.933

`onYouTubeIframeAPIReady()``window.YT.*`当通过外部脚本加载界面时，每页只调用一次。从页面中删除`<script src="http://www.youtube.com/iframe_api">`元素然后重新添加它不会`onYouTubeIframeAPIReady()`再次触发。

如果您想销毁`<iframe>`包含上传小部件的 小部件，然后创建一个托管在新小部件中的新小部件，`<div>`那么这应该可以工作，但您不必`onYouTubeIframeAPIReady()`第二次从回调中执行此操作。`window.YT.UploadWidget()`那时已经可以使用了，所以您可以在代码中的任何地方直接使用该接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:33:12.037

**onYouTubeIframeAPIReady()**仅在加载 YouTube API 时调用一次。答案是在 YouTube 的第 2 步中添加另一项检查：

```
if (typeof tag === "undefined") { 
  // if first run load the YT API which will call the correct functions.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
} else {
   // if YT api already loaded, we need to call the function.
   onYouTubeIframeAPIReady();
} 
```

祝你好运。**

# wordpress - 在 WordPress 中动态注册小部件区域

> ID：13092998
> 
> 赞同：0
> 
> 时间：2012-10-26T19:14:36.087
> 
> 标签：wordpress

我试图让我的用户设置他们想要使用的小部件区域的数量。我设置了一个选项面板，让他们输入数字，然后设置我的小部件注册功能以使用 for 循环来注册该数量的小部件区域。这可行，除了每次我回到小部件管理区域时，小部件区域都是空的，不管我在其中放了什么。

这是我用来创建小部件区域的代码：

```
function fivepints_widgets_init() {

    register_sidebar( array(
        'name' => __( 'Main Sidebar', 'fivepints' ),
        'id' => 'sidebar-1',
        'before_widget' => '<div class="widget">',
        'after_widget' => "</div>",
        'before_title' => '<h3 class="widget-title">',
        'after_title' => '</h3>',
    ) );

    register_sidebar( array(
        'name' => __( 'Home Sidebar', 'fivepints' ),
        'id' => 'sidebar-2',
        'before_widget' => '<div class="widget">',
        'after_widget' => "</div>",
        'before_title' => '<h3 class="widget-title">',
        'after_title' => '</h3>',
    ) );

$fp_theme_options = get_option( 'fp_theme_options'); //get number from options panel

if ($fp_theme_options['fp_sidebars'] == ""){$num = 1;} //set number to 1 if options panel value isn't set
else {$num = $fp_theme_options['fp_sidebars']; }

for ($i=1; $i<=$num; $i++) 
  {
$sidebarName = 'Sidebar ' . $i;
$sidebarID = 'fp-sidebar-' . $i;
    register_sidebar( array(
        'name' => __( $sidebarName, 'fivepints' ),
        'id' => $sidebarID,
        'before_widget' => '<div class="widget">',
        'after_widget' => "</div>",
        'before_title' => '<h3 class="widget-title">',
        'after_title' => '</h3>',
    ) );

  }
}
add_action( 'widgets_init', 'fivepints_widgets_init' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:21:43.093

我刚刚注意到，如果我将一个小部件放在前两个小部件区域（主页或主区域）之一，而将其他区域留空，则当小部件管理员重新加载时，这些小部件就会消失。如果我将一个小部件放在动态生成的区域之一中，那么管理员的行为就会正常。我仍然希望能够将动态生成的区域留空（以防最终用户决定这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:34:28.040

弄清楚了。我必须使用 sidebar-a 和 sidebar-b 作为静态小部件区域的 id。