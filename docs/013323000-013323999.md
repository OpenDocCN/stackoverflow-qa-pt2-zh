# StackOverflow 问答 13323000-13323999

# linux - linux内核中的系统调用

> ID：13323002
> 
> 赞同：0
> 
> 时间：2012-11-10T14:42:17.977
> 
> 标签：linux, system-calls, operations

Linux 内核中通过系统调用提供的三种基本文件操作是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:50:56.440

我想说最基本的是四个：`open()`,`read()`和。`write()``close()`

# java - 如何将android的textview数据添加到arraylist

> ID：13323004
> 
> 赞同：1
> 
> 时间：2012-11-10T14:42:52.250
> 
> 标签：java, android

我不是编程专家。我已经在 Android 程序中实现了加速度传感器。我使用 textview 来显示 x、y 和 z 轴的加速度数据。

现在使用这个传感器数据，我想绘制一个实时图表。那么将文本视图放在数组列表中而不是绘图图是个好主意吗？或者有人有更好的解决方案。

如何将textview的数据添加到arraylist？如何绘制这个实时传感器数据的图表？

这是我的程序。

公共类 HelloAndroid 扩展 Activity 实现 SensorEventListener { private SensorManager sensorManager;

```
TextView xCoor; // declare X axis object
TextView yCoor; // declare Y axis object
TextView zCoor; // declare Z axis object

@Override
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    xCoor=(TextView)findViewById(R.id.xcoor); // create X axis object
    yCoor=(TextView)findViewById(R.id.ycoor); // create Y axis object
    zCoor=(TextView)findViewById(R.id.zcoor); // create Z axis object

    sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);
    // add listener. The listener will be HelloAndroid (this) class
    sensorManager.registerListener(this,
            sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);

    }

public void onAccuracyChanged(Sensor sensor,int accuracy){

}

public void onSensorChanged(SensorEvent event){

    if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){

        // assign directions
        float x=event.values[0];
        float y=event.values[1];
        float z=event.values[2];

        xCoor.setText("X: "+x);
        yCoor.setText("Y: "+y);
        zCoor.setText("Z: "+z);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:58:52.797

您可以观察 TextView 中的更改并运行您的代码，例如。：

```
 editText.addTextChangedListener(new TextWatcher() {
                    public void afterTextChanged(Editable s) {

                    }
                    public void beforeTextChanged(CharSequence s, int start, int count,
int after) {

                    }
                    public void onTextChanged(CharSequence s, int start, int before,     int count) {
                            String[] array = new String[] {TextView.getText().toString() , TextView1.getText().toString()
//Correct me if iam Wrong ...  } 
                    }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:01:22.177

如果您只想将 TextView 放入 arrayList

```
List<TextView> textViews= new ArrayList<TextView>();
textViews.add(TextView1);
textViews.add(TextView2);
textViews.add(TextView3); 
```

# android - 在 ksoap2 中调用 web 服务

> ID：13323005
> 
> 赞同：0
> 
> 时间：2012-11-10T14:42:58.660
> 
> 标签：android, web-services, ksoap2

我有这个网络服务的问题。我曾经在我的项目中调用不同的 ws，它工作正常。

```
private static final String URL2 = "http://46.248.168.51/webservice/soap/endpoint/apikey/cb7f1f308e82ca2be8541d5ba829dc1e/?wsdl";
        private static final String METHOD_NAME2 = "getObjectList";
        private static final String SOAP_ACTION2 = "http://46.248.168.51/webservice/soap/endpoint/apikey/cb7f1f308e82ca2be8541d5ba829dc1e/getObjectList";
        private static final String NAMESPACE2 = "http://46.248.168.51/webservice/soap/endpoint/apikey/cb7f1f308e82ca2be8541d5ba829dc1e/";

    protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.pp);

            SoapObject request = new SoapObject(NAMESPACE2, METHOD_NAME2);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);

            envelope.setOutputSoapObject(request);

            AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL2);

            httpTransport.debug = true;

            try {
                httpTransport.call(SOAP_ACTION2, envelope);

                SoapObject result = (SoapObject) envelope.getResponse();

            } catch (Exception e) {
                Log.d("e.getMessage()", e.getMessage());
                e.getMessage();
                e.printStackTrace();
            } 
```

**httpTransport.call 返回错误**

11-10 15:31:43.421：D/e.getMessage()(2550)：预期：START_TAG {http://schemas.xmlsoap.org/soap/envelope/}信封（位置：START_TAG @2:486 in java .io.InputStreamReader@4124e8d0)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:49:28.087

由于您的代码适用于其他几个 Web 服务。我认为您只更改了 URL、SOAP 操作和方法。因此，请检查天气响应是否包含 popper SOAP 消息。检查您是否可以在通信之间使用 TCPMon 之类的东西。

# mysql - MySQL 备份到另一个数据库

> ID：13323007
> 
> 赞同：0
> 
> 时间：2012-11-10T14:43:18.803
> 
> 标签：mysql

我在服务器 X 上有一个主 MySQL 服务器。

我希望它每 N 小时备份一次到另一个 MySQL 服务器（我们称之为 Y）。

我不知道这是否重要，但 X 是 windows 服务器，Y 是 Ubuntu linux。

我确实喜欢复制的想法，但我可以让它不是实时工作，而是一次让我们说 4 小时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:30:18.587

我在一个由于以前安装不完善而害怕复制的地方工作。

他们仍然有二进制日志，所以我会刷新二进制日志，将它们复制到第二个服务器，使用 mysqlbinlog 提取语句，然后将它们应用到第二个数据库。

您可以控制所有这些发生的频率、文件副本消耗的带宽等。

另外，如果您想切换到“真实”复制，这很容易！

祝你好运。

# image - 如何生成 json.org 风格的图像？

> ID：13323015
> 
> 赞同：1
> 
> 时间：2012-11-10T14:44:54.863
> 
> 标签：image

在[Json.org](http://json.org/)上有可视化 json 语法的图像。它们是如何创建的？

# android - FragmentTransaction.remove 没有效果

> ID：13323016
> 
> 赞同：9
> 
> 时间：2012-11-10T14:44:59.583
> 
> 标签：android, fragment, overlap

我的要求很简单：我有一个按钮应该用 FragmentB 替换 FragmentA。

这听起来很简单，几乎可以工作，最大的问题是旧片段没有被删除，新片段放在旧片段的前面，它们在我的布局中“生活”在一起。

![在此处输入图像描述](../Images/6bd1acb50c2951ae0091bc57974fbf89.png)

**编码：**

```
FragmentManager fragMgr = a.getSupportFragmentManager();
Fragment currentFragment = (Fragment) fragMgr.findFragmentById(R.id.fragmentitself);

if(currentFragment!=null){

     FragmentTransaction fragTrans = fragMgr.beginTransaction();
     fragTrans.remove(currentFragment);

     FragmentB newFragment = new FragmentB();
     fragTrans.replace(R.id.fragmentcontainer, newFragment);
     // I have also tried with R.id.fragmentitself
     fragTrans.addToBackStack(null);
     fragTrans.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
     fragTrans.commit();
} 
```

**布局：**

```
<FrameLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="2" 
    android:id="@+id/fragmentcontainer">

    <fragment
        android:id="@+id/fragmentitself"
        android:name="com.WazaBe.MyApp.FragmentA"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T15:08:09.843

**解决方案**

首先，您必须从 XML 中删除您的片段，并在那里保留空容器：

```
<FrameLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="2" 
    android:id="@+id/fragmentcontainer" /> 
```

然后你需要`com.WazaBe.MyApp.FragmentA`从代码中添加你的片段，即在`onCreate()`你的父活动中。

**解释**

这是因为您的交易操纵了`ViewGroup`诸如此类的内容`FrameLayouts`。问题是，您只能操作从代码中添加的元素，因为从 XML 布局膨胀的任何内容都被视为“只读”。因此，当您将 Fragment 直接放入 XML 布局时，它将成为视图层次结构的**永久**部分，并且因为它是永久的并且整个层次结构是“只读的”，所以它不能从代码中删除。

一旦您修复了布局并提取了 Fragment，`remove()`就不再需要调用 - 只需执行`replace()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-10T15:38:45.937

如果你想在 View Container 中放置 Fragment（例如 Framelayout），你必须确保你的容器是空的（只有这样你才能把 Fragment 放进去）。你不能替换写在 XML 文件中的 Fragment，你应通过JAVA代码将A添加到容器中，当您不需要id时，可以将其替换为B；

首先，你的容器是空的：

```
<FrameLayout
android:layout_width="0dp"
android:layout_height="match_parent"
android:layout_weight="2" 
android:id="@+id/fragmentcontainer">
</FrameLayout> 
```

好的，你把 FragmentA 放进去：

```
 FragmentTransaction fragTrans = fragMgr.beginTransaction();
 fragTrans.remove(currentFragment);
 FragmentA fragA= new FragmentA();
 fragTrans.add(R.id.fragmentcontainer, fragA).commit(); 
```

现在，如果你想更换：

```
FragmentTransaction fragTrans = fragMgr.beginTransaction();
 FragmentB newFragment = new FragmentB();
 fragTrans.replace(R.id.fragmentcontainer, newFragment);
 // I have also tried with R.id.fragmentitself
 fragTrans.addToBackStack(null);
 fragTrans.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
 fragTrans.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T11:24:45.147

如果我们在activity上使用Fragment容器，它需要选择一个默认的FragmentABC，即使我们使用ft.remove，默认的FragmentABC视图也无法移除。

如果您想在活动启动时看到片段的空视图，请使用 FrameLayout 容器而不是片段容器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T11:52:39.507

**Kotlin 中的相同答案**

```
 private fun showDetailView(position: Int) {
            val fragTrans: FragmentTransaction = supportFragmentManager.beginTransaction()
            val fragment: Fragment
            when (position) {
                0 -> fragment = FragmentA()
                1 -> fragment = FragmentB()
                else ->
                    fragment = FragmentC()
            }
            fragTrans.replace(
                    R.id.itemDetailContainer,
                    fragment).commit()
            fragTrans.addToBackStack(null);
            fragTrans.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        }

    } 
```

# javascript - 双击元素

> ID：13323021
> 
> 赞同：0
> 
> 时间：2012-11-10T14:45:32.213
> 
> 标签：javascript, jquery, click

我做一个脚本。在 img 标签中加载新图像。这是脚本：

```
button.click(function(e) {
    e.preventDefault();

    var url = $(this).attr("href");
    var img = $('#photo-gallery .teaser img');

    $('li', list).attr('data-flag', 'close');

    img.animate({ opacity: 0 }, 500, function() {
        $('img', teaser).attr("src", url);
    });

    img.animate({ opacity: 1 }, 500)

    $(this).closest('li').attr('data-flag', 'open');
}); 
```

但是，我对这个脚本有疑问。当您快速单击按钮时。如果你很快接连点击。比脚本执行所有单击事件。我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:48:50.993

使用标志将其设置为`true as soon as the event execution starts`并在执行结束时将其设置为 false。*如果在 alreadClicked 标志为真时触发了其他事件，则从事件返回而不采取任何操作*。

```
alreadClicked = false;

button.click(function(e) {      

    if(alreadClicked)
         return; 

    alreadClicked = true;
    e.preventDefault();
    var url = $(this).attr("href");
    var img = $('#photo-gallery .teaser img');

    $('li', list).attr('data-flag', 'close');

    img.animate({ opacity: 0 }, 500, function() {
        $('img', teaser).attr("src", url);
    });

    img.animate({ opacity: 1 }, 500)

    $(this).closest('li').attr('data-flag', 'open');
    alreadClicked = false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:49:53.113

JQuery [one](http://api.jquery.com/one/)只允许执行一次事件

```
button.one("click", function(e) {
    /* code ... */
}); 
```

# php - CodeIgniter 中的链接和控制器

> ID：13323023
> 
> 赞同：0
> 
> 时间：2012-11-10T14:45:46.383
> 
> 标签：php, codeigniter

我刚刚开始使用这个框架，而且我对 MVC 概念还很陌生。现在我正在关注官方文档上的教程，我的控制器看起来像这样：

```
class Pages extends CI_Controller {

public function view($page = 'home')
{
    if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); // Capitalize the first letter

        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);
}

public function goto($page)
{
    if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); // Capitalize the first letter

        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);
}

} 
```

我还有一个带有主页的 home.php 文件：

```
<?php $this->load->helper('url');?>
<div>
    <p>This is the home page</p>
</div>
    <a href="<?php echo base_url()./index.php/pages/goto/about;?>">About</a>
<div id="content">
    <form method="post" action="">
        <div>
            <label for="username">Username:</label>
            <input type="text" name="username"/>
        </div>
        <div>
            <label for="password">Password:</label> 
            <input type="password" name="password"/>
        </div>
        <div>
            <input type="submit" value="Login"/>
        </div>
    </form> 
</div> 
```

到目前为止一切正常，但我如何添加和使用新链接？我的意思是，假设您在主页中有一个链接列表；当用户单击其中一个链接时，我应该如何处理请求？我应该让他们通过“页面”控制器吗？我应该为网站的每个页面创建一个新的控制器吗？

在第一种情况下（对我来说这听起来更合乎逻辑），如何根据用户点击的链接正确重定向用户？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:55:59.920

> 我应该如何处理请求？

标准方式是`controller/methods/`，但当然你可以使用路由器。[路由器信息](http://codeigniter.com/user_guide/general/routing.html)

> 我应该让他们通过“页面”控制器吗？

依靠。这些`pages`与控制器有关吗？如果是，则包括。如果没有，就不要。重点是，将相关内容集中在一个控制器下。你不会想在`page`控制器中说管理功能。你？

> 我应该为网站的每个页面创建一个新的控制器吗？

简单的回答。不，原因在上面。

> 在第一种情况下（对我来说这听起来更合乎逻辑），如何根据用户点击的链接正确重定向用户？

又是第 1 点。

# java - 构造函数在应该得到浮点数时请求浮点数

> ID：13323024
> 
> 赞同：0
> 
> 时间：2012-11-10T14:45:54.897
> 
> 标签：java, android, constructor

我正在关注动态壁纸的在线教程。在此期间，我遇到了一个我觉得很奇怪的问题。问题是下面代码中的构造函数 MyPoint 说它正在获取 String、int、int 并且它需要 String、float、float。但是，此构造函数中的 x 和 y 引用本地**浮点**x 和 y。我通过在构造函数中选择 x 或 y 进行检查，本地浮点 x 或 y 会亮起，因此它应该将浮点数作为输入。那么为什么会出现这个错误呢？

```
@Override
public void onTouchEvent(MotionEvent event) {
if (touchEnabled) {

  float x = event.getX();
  float y = event.getY();
  SurfaceHolder holder = getSurfaceHolder();
  Canvas canvas = null;
  try {
    canvas = holder.lockCanvas();
    if (canvas != null) {
      canvas.drawColor(Color.BLACK);
      circles.clear();
      circles.add(new MyPoint(String.valueOf(circles.size() + 1), x, y));
      drawCircles(canvas, circles);

    }
  } finally {
    if (canvas != null)
      holder.unlockCanvasAndPost(canvas);
  }
  super.onTouchEvent(event);
}
} 
```

**编辑：**

确切的错误是：“构造函数 MyPoint(String, float, float) 未定义”

使用快速修复选项：“将构造函数 MyPoint(String, int, int) 更改为 MyPoint(String, float, float)”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:30:58.407

构造函数不*请求*任何东西。它*需要*您在构造函数签名中定义的任何类型的值。如果您没有提供正确类型的值，那么编译器将无法编译您的代码，因为您已经告诉它通过接收不存在的 String、float、float 的构造函数来实例化 MyPoint 的实例。

因此，错误至少在您的“MyPoint”类中。如果 MyPoint 构造函数确实需要整数，则显示的代码中也可能有错误。但是，查看您的代码，float 似乎更有可能。

错误及其解决方案很简单。

在 MyPoint 中，您有

```
public MyPoint(String name, int x, int y); 
```

你也应该有

```
public MyPoint(String name, float x, float y); 
```

我假设你想要两者。如果您不需要构造函数接收 x 和 y 作为整数，那么只需更改它。

# javascript - node.js - 查找 require()ing 模块的路径

> ID：13323025
> 
> 赞同：2
> 
> 时间：2012-11-10T14:46:09.980
> 
> 标签：javascript, node.js

考虑到以下要求，试图找到正确的方法来确定模块 require()ing mine 的路径：

*   必须符合严格模式
*   不能对程序 args 做任何假设（即 process.argv）
*   必须在任意位置的多个模块需要时工作一次执行（即我的模块被缓存）

我最终通过修补 Module._load() 并在闭包中捕获调用者路径来使其工作，如下所示：[github](https://github.com/bodenr/expose/blob/master/index.js)

然而，这感觉不对——我一定是遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:31:00.350

打补丁`module._load`是我认为最好的方式。你只能得到第一个调用你的模块的模块`module.parent.filename`。并且模块的整体`children`和`parent`属性只在第一次加载时为真。根据[源代码](https://github.com/joyent/node/blob/master/lib/module.js#L283)，如果它被缓存，你就不能依赖任何东西。您可以尝试将自己从缓存（`delete require.cache[__filename]`;）中删除，然后每次需要您的模块时，您都会获得正确的父级，但这会增加您的加载时间。

# javascript - 多个 SetTimeout 在 Firefox 和 IE 中不起作用

> ID：13323026
> 
> 赞同：-1
> 
> 时间：2012-11-10T14:46:13.400
> 
> 标签：javascript, html, internet-explorer, settimeout

我使用以下脚本在延时后播放 2 个声音文件

```
<html>
<head>
<script language="javascript" type="text/javascript">
    function playSound(soundfile,soundfile1) 
    {
        document.getElementById("sound").innerHTML= "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"true\" />";
        setTimeout(function(){document.write ('<EMBED src= "' + soundfile1 + '" hidden=true    autostart=true loop=false>')},2000);
        setTimeout(function(){alert("You have successfully launched the MedOrient website! \n Thank you for launching Sri sai medical jobs.");},3000);
        setTimeout("window.location='http://url'",8000);
    }
</script>
</head>

<body>
    <a href="#" onclick="playSound('clapping.mp3','fireworks56.mp3');"  ><img  src="ribbon-cutting.jpg"/></a> 
</body>
</html> 
```

这在 Chrome 中有效，但在 firefox 或 IE 中无效。soundfile1(fireworks56.mp3) 在几（大约 8）秒后播放，但它不会重定向。在它显示的Firefox状态栏中，

```
 Read http://url 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:56:46.723

不要使用`document.write`它会用新内容覆盖页面。

试试下面的代码，我更改`document.write`并分配了值 `document.getElementById("sound").innerHTML`

```
function playSound(soundfile,soundfile1) 
  {
    document.getElementById("sound").innerHTML= "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"true\" />";
    setTimeout(function(){document.getElementById("sound").innerHTML= '<EMBED src= "' + soundfile1 + '" hidden=true    autostart=true loop=false>'},2000);
    setTimeout(function(){alert("You have successfully launched the MedOrient website! \n Thank you for launching Sri sai medical jobs.");},3000);
    setTimeout("window.location='http://url'",8000);
  } 
```

# php - 数据不使用php通过WordPress表单进入mysql数据库

> ID：13323029
> 
> 赞同：0
> 
> 时间：2012-11-10T14:46:43.240
> 
> 标签：php, mysql, wordpress

我正在尝试在 WordPress 页面上创建一个表单，该表单允许我将数据输入到 mysql 表中。当我输入代码时，主键会自动增加，但是数据本身不会进入数据库。这是mysql中的表信息：

```
 CREATE TABLE `macscabs`.`customers` (
`custno` INT NOT NULL AUTO_INCREMENT ,
`sname` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`fname` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`homeaddr` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`commondest` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`mobileno` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`homeno` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`email` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
PRIMARY KEY ( `custno` ) 
) ENGINE = MYISAM CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

以下是来自 WordPress 页面的代码与 php 在同一页面上：

```
<table>
<form name="form1" method="post" action="<?php echo $_SERVER[PHP_SELF] ?>">
<strong>Please enter your information in order to download the Macs Cabs App</strong>
<tr><td>
Surmane Name:</td><td><input name="sname" type="text" id="sname"></td></tr>
<tr><td>
First Name:</td><td><input name="fname" type="text" id="fname"></td></tr>
<tr><td>
Home Address:</td><td><input name="homeaddr" type="text" id="homeaddr"></td></tr>
<tr><td>
Most common Destination:</td><td><input name="commondest" type="text" id="commondest"></td></tr>
<tr><td>
Mobile Number:</td><td><input name="mobileno" type="text" id="mobileno"></td></tr>
<tr><td>
Home Number:</td><td><input name="homeno" type="text" id="homeno"></td></tr>
<td>
Email Address:</td><td><input name="email" type="text" id="email"></td></tr>
<tr><td>
<input type="submit" name="Submit" value="Submit"></td></tr>
</form></table>

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("macscabs", $con);

$sql="INSERT INTO `customers` (`sname`, `fname`, `homeaddr`, `commondest`, `mobileno`,       `homeno`, `email`)  
VALUES    ('{$_POST['sname']}','{$_POST['fname']}','{$_POST['homeaddr']}','{$_POST['commondest']}','{$_POST['m    obileno']}',
'{$_POST['homeno']}','{$_POST['email']}')";

 if (!mysql_query($sql,$con))
 {
 die('Error: ' . mysql_error());
 }
 echo "1 record added";

$info = mysql_info(); echo $info;

mysql_close($con);
?> 
```

我还通过输入下面的代码手动插入数据而不使用表单来测试数据库和网页之间的连接，它可以工作。但是，当我尝试使用表单插入它时，我无法让它工作。

```
mysql_query("INSERT INTO customers (sname, fname, homeaddr, commondest, mobileno, homeno, email)
VALUES ('mcguinness','dave','moate','athlone','0254','56587',5)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:10:01.707

值（“'.$_post['EACH_NAME'].'”，“'.$_post['Next_Name_etc'].'”）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:05:11.150

当然，它会在没有输入数据的情况下添加到 mysql 表中，因为您没有指示单击提交按钮的条件，因此这意味着一旦加载页面，插入查询也正在执行。你为什么不试试这个

```
<?php
 if(isset($_POST['Submit'])){ // if the submit button is clicked

 $con = mysql_connect("localhost","root","");
 if (!$con)
 {
   die('Could not connect: ' . mysql_error());
 }

 mysql_select_db("macscabs", $con);

  //using @musicvicious insert query
  $sql="INSERT INTO `customers` (`sname`, `fname`, `homeaddr`, `commondest`, `mobileno`, `homeno`, `email`)  VALUES ('".$_POST['sname']."', '".$_POST['fname']."', '".$_POST['homeaddr']."', '".$_POST['commondest']."', '".$_POST['mobileno']."', '".$_POST['homeno']."', '".$_POST['email']."')";

  if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
  echo "1 record added";

  $info = mysql_info(); echo $info;

  mysql_close($con);

  }//end condition bracket
 ?> 
```

但最好的方法是使用 $wpdb->query(); 检查这个[wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T15:01:36.237

尝试这个：

```
$sql="INSERT INTO `customers` (`sname`, `fname`, `homeaddr`, `commondest`, `mobileno`, `homeno`, `email`)  
VALUES ('".$_POST['sname']."', '".$_POST['fname']."', '".$_POST['homeaddr']."', '".$_POST['commondest']."', '".$_POST['mobileno']."', '".$_POST['homeno']."', '".$_POST['email']."')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T17:01:06.967

```
this will do
<?php
        if (!empty($_POST)) {
        global $wpdb;
            $table = wp_achord;
            $data = array(
                'name' => $_POST['yourname'],
                'chord'    => $_POST['chord']
            );
            $format = array(
                '%s',
                '%s'
            );
            $success=$wpdb->insert( $table, $data, $format );
            if($success){
            echo 'data has been save' ; 
}
}
else   {
?>
        <form method="post">
        <input type="text" name="yourname">
        <textarea name="chord"></textarea>
        <input type="submit">
        </form>

       <?php }  ?> 
```

# c# - 获取网站图标

> ID：13323034
> 
> 赞同：1
> 
> 时间：2012-11-10T14:47:57.263
> 
> 标签：c#, web, favicon

> **可能重复：**
> [如何获取网站的图标？](https://stackoverflow.com/questions/5119041/how-can-i-get-a-web-sites-favicon)

我使用以下代码在 ac# windows 应用程序中获取站点图标，以在图片框中显示该图标。

```
HttpWebRequest web = (HttpWebRequest)HttpWebRequest.Create(downloadstring);
web.AllowAutoRedirect = true;
try
{
    HttpWebResponse res = (HttpWebResponse)web.GetResponse();
    System.Drawing.Image ico;
    using (Stream s = res.GetResponseStream())
    {
        ico = System.Drawing.Image.FromStream(s);
    }
    pictureBox1.Image = ico;
}
catch (Exception)
{

} 
```

问题是如果图标位于主根服务器（例如`www.example.com/favicon.ico`）中，它只会显示图标，但如果图标位于另一个文件夹中，它将不起作用。

如果网站图标位于根服务器的任何文件夹中，我如何获取它？

# c++ - 无法创建新的 wchar_t *

> ID：13323038
> 
> 赞同：1
> 
> 时间：2012-11-10T14:48:12.723
> 
> 标签：c++, new-operator, operator-keyword, wchar-t

我有这个运算符重载器。我的程序在创建新`wchar_t`数组时崩溃。

```
myObject &operator += (const myObject &s) {
    wchar_t *cat = wcscat(data, s.data);
    int len = wcslen(cat);
    wchar_t *test = new wchar_t[len + 1]; //this is killing!
    wcscpy(test, cat);

    delete data;
    data = test;

    return *this;
} 
```

有人知道发生了什么吗？

编辑完整的类定义

```
class myObject
{
    private:
        wchar_t *data;
    public:
        myObject() { data = 0; }
        ~myObject() { delete data; }

        myObject &operator += (const myObject &s) {
            wchar_t *cat = wcscat(data, s.data);
            int len = wcslen(cat);
            wchar_t *test = new wchar_t[len + 1];
            wcscpy(test, cat);

            delete data;
            data = test;

            return *this;
        }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:56:16.793

这段代码至少包含两个相当明显的问题：

1.  您显然使用分配数据，但您使用而不是使用`new wchar_t[n]`释放它。`delete p``delete[] p`
2.  问题的可能原因是您将两个字符串连接到一个字符串的内存中，*然后*分配足够的内存来复制数据。

你可能想要更多类似的东西：

```
myObject &operator += (const myObject &s) {
    size_t len = wcslen(this->data) + wcslen(s.data);
    std::unique_ptr<wchar_t[]> tmp(new wchar_t[len + 1]);
    wcscpy(tmp.get(), this->data);
    wcscat(tmp.get(), s.data);
    delete[] this->data;
    this->data = tmp.release();
    return *this;
} 
```

实际上，我认为您想使用`std::wstring`：此类已经提供了逻辑，无论如何可能以更有效的形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:02:50.570

正如 Dietmar 所说（但更详细地说明了幕后*可能发生的事情）：*

1) 调用`wcscat(data, s.data)`已超出 指向的缓冲区的末尾`data`。如果它没有溢出，那么你就不需要分配一个新的缓冲区，因为现有的缓冲区已经足够大了。我预计它还*不够*大。

2) 由于缓冲区溢出，内存分配器使用的数据结构被丢弃。当您尝试分配内存时，这会导致崩溃。当您释放内存时，它很容易导致崩溃，或者根本不会崩溃。

# java - 如何将流式传输到 MediaPlayer 的磁盘音频缓存到磁盘中？

> ID：13323039
> 
> 赞同：3
> 
> 时间：2012-11-10T14:48:12.787
> 
> 标签：java, android, caching, streaming, media-player

如何将流式传输到 MediaPlayer 的磁盘音频缓存到磁盘中？我想使用缓存的音频而不是每次都下载。不幸的是，`setDataSource`甚至不接受`InputStream`，所以我不知道解决方案..我的代码：

```
 mediaPlayer.setDataSource(context, Uri.parse(/* file url */));
    mediaPlayer.prepare();
    mediaPlayer.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:57:13.970

您可以将其下载到 SD 卡（或任何地方），然后使用`public void setDataSource (String path)`MediaPlayer 的方法播放

```
mediaPlayer.setDataSource(Environment.getExtrnalStorageDirectory() + "/yoursoundfile.mp3"); 
```

您可能需要调整路径以使其正确。

[http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource(java.lang.String](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource(java.lang.String) )

# php - 无法在 php 5.4.4 上安装 Xdebug

> ID：13323040
> 
> 赞同：0
> 
> 时间：2012-11-10T14:48:17.777
> 
> 标签：php, xampp, xdebug

我试图在我的`xampp`运行中安装 xdebug `php 5.4.4`，花了几个小时后，我仍然无法安装它！

这是我在 php.ini 中的设置

```
zend_extension = "Z:\xampp\php\ext\php_xdebug-2.2.1-5.4-vc9-x86_64.dll"
xdebug.remote_mode = "req"
xdebug.remote_enable=1
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp"
xdebug.profiler_enable=1
xdebug.profiler_output_dir="Z:\xampp\tmp" 
```

谁能发现任何错误？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T13:31:42.127

请参阅[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)上的向导- 它会告诉您要准确进行哪些设置，以及要下载哪个二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T15:56:32.110

我遇到了同样的问题，无法使用 xampp 和使用 IDE netbeans 运行 xdebug，我所做的是：-下载了为我的 php 版本 VC9 TS 指定的版本！（它需要是 TS） - 将 php.ini 中的行编辑为：

```
[XDebug]
zend_extension="c:\xampp\php\ext\php_xdebug.dll"
xdebug.remote_enable=1
xdebug.remote_host="127.0.0.1"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp" 
```

就是这样，希望它有所帮助。干杯

# c# - 如何为 Word 表格中的单元格添加文本和格式？

> ID：13323041
> 
> 赞同：1
> 
> 时间：2012-11-10T14:48:20.463
> 
> 标签：c#

我想从**数据网格**中将大量数据添加到单词表中。

如何将数据添加到**单词表**？

# ruby-on-rails - 使用 RSpec 测试布局

> ID：13323042
> 
> 赞同：10
> 
> 时间：2012-11-10T14:48:22.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

在 rails 3 布局中测试逻辑的最佳方法是什么？

示例：当用户登录我的网站时，如果他们尚未完成入职流程，我会在所有页面的屏幕顶部向他们显示警报。这个逻辑被放置在应用程序布局中。我只是检查登录用户的特定密钥。如果密钥不存在，我会显示警报。一旦密钥出现（意味着他们已经完成了入职），我就不会显示警报。

目前我正在尝试通过视图测试来做到这一点，但是通过包含应用程序布局，我得到了各种`ActionView::Template::Error: undefined method`“nil:NilClass”错误的身份验证，我似乎无法测试这个功能。

我需要确保我有这个正在测试，因为如果由于某种原因我的一个开发人员意外破坏了这个功能（显示的视图不完整），我们需要在构建时立即知道。

我试图在我的布局中测试的代码如下所示：

```
<% if user_signed_in? %>
    <% unless current_user.has_completed_onboarding? %>
      <div class="alert">
        You cannot accept payments from your clients until you set up your payment gateway.
        <%= link_to "Set up your", payment_gateway_path %> payment gateway. Its quick, we promise. :)
      </div>
    <% end %>
<% end %> 
```

我想确保如果未提供他们的入职详细信息，则将显示此消息，如果已提供，则不要显示此消息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T15:26:14.003

您可以像任何其他视图一样测试您的布局。只需在 中创建一个文件（必要时`application.html.erb_spec.rb`替换`erb`为） ，然后在该文件中像往常一样写下您的规格，例如：`haml``spec/views/layouts/`

```
require 'spec_helper'

describe 'layouts/application' do

  context 'signed-in user' do

    before { view.stub(:user_signed_in?) { true } }

    context 'completed onboarding' do

      before do
        user = double('user')
        user.stub(:has_completed_onboarding?) { false }
        assign(:current_user, user)
      end

      it "should display alert" do
        render
        rendered.should have_selector('.alert')
      end

    end

    ...

  end

  context 'signed-out user' do
    ...
  end

  ...

end 
```

我使用我的一个应用程序执行此操作，它没有问题，所以我不明白为什么它也不适用于您的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:14:03.713

您得到的错误`ActionView::Template::Error: undefined method authenticate for nil:NilClass`是由`user_signed_in?`视图中的方法调用引起的。您可以通过`user_signed_in?`在代码中显示的@shioyama 对测试中的方法进行存根来处理此问题。

以下代码显示了如何存根`user_signed_in?`方法并`true`在您希望`if`执行视图中的语句或`false`不执行时返回。 `view.stub(:user_signed_in?).and_return(true)`

# jquery - Facebook 应用幻灯片菜单

> ID：13323047
> 
> 赞同：1
> 
> 时间：2012-11-10T14:48:33.490
> 
> 标签：jquery, facebook, menu, slide, iscroll

我正在尝试创建一个像 Facebook 应用程序一样的幻灯片菜单，我可以让显示/隐藏菜单正常工作，但是，我被菜单本身的触摸滚动功能卡住了。

在我尝试过的3个解决方案中，它们都有问题，这些问题可以总结如下：

**CSS 触摸滚动** [jsFiddle 上](http://jsfiddle.net/sygad/GJuzA/)
的旧 iOS 不支持单指滚动 CSS触摸

**iScroll 插件解决方案**
菜单滚动正常，但它会阻止页面上的其他任何内容滚动。
[jsFiddle 上的 iScroll](http://jsfiddle.net/sygad/2njVa/) |

**Touch Scroll插件解决方案**
当我触摸滚动菜单时，它会直接从屏幕顶部
[滚动到jsFiddle上的Touch Scroll](http://jsfiddle.net/sygad/YNYWa/) |

我已经在以下移动浏览器中测试了这 3 种解决方案中的每一种。

*安卓 4.0.4*

*   安卓默认
*   歌剧移动
*   火狐
*   铬合金

*iOS 4.2.1*

*   苹果浏览器

任何人都知道如何让这两个插件玩得很好？

以下 3 个版本的代码

**CSS 版本**

```
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <title>Left Reveal - CSS</title>

    <style>
        html, body                                                  {margin:0; padding:0; font:1em/1.1em "Arial", sans-serif;}
        h1                                                          {clear:both; font-size:130%}

        a#reveal-trigger                                            {float:left; display:block; margin:0 0 20px; padding:10px;  text-decoration:none;
                                                                    border:1px solid #aaa; border-radius:3px; background:#ccc}

        #container-reveal                                           {position:relative; margin:0 auto; padding:0; overflow:hidden; border:1px solid black;}

            #menuContainer-reveal                                   {position:absolute; top:0; left:0; z-index:10; overflow-y:scroll; -webkit-overflow-scrolling: touch; background:#555;}

                #menuContainer-reveal #menu                         {margin:0; padding:0; list-style:none;}
                    #menuContainer-reveal #menu li                  {margin:0; text-align:center; background:#ccc; font-weight:bold;}
                    #menuContainer-reveal #menu li a                {display:block; padding:10px; color:black; border-bottom:1px solid black; text-decoration:none}
                    #menuContainer-reveal #menu li:last-child a     {border-bottom:0}

            #content-reveal                                         {position:relative; background:white; z-index:20; padding:10px; border-left:1px solid #ccc}
    </style>

</head>

<body>

    <div id="container-reveal">

        <div id="menuContainer-reveal">
            <ul id="menu">
                <li><a href="#">Test link - FIRST</a></li>
                <li><a href="#">Test link 1</a></li>
                <li><a href="#">Test link 3</a></li>
                <li><a href="#">Test link 4</a></li>
                <li><a href="#">Test link 5</a></li>
                <li><a href="#">Test link 6</a></li>
                <li><a href="#">Test link 7</a></li>
                <li><a href="#">Test link 8</a></li>
                <li><a href="#">Test link 9</a></li>
                <li><a href="#">Test link 10</a></li>
                <li><a href="#">Test link 11</a></li>
                <li><a href="#">Test link 12</a></li>
                <li><a href="#">Test link 13</a></li>
                <li><a href="#">Test link 14</a></li>
                <li><a href="#">Test link 15</a></li>
                <li><a href="#">Test link 16</a></li>
                <li><a href="#">Test link 17</a></li>
                <li><a href="#">Test link 18</a></li>
                <li><a href="#">Test link 19</a></li>
                <li><a href="#">Test link 20</a></li>
                <li><a href="#">Test link 21</a></li>
                <li><a href="#">Test link 22</a></li>
                <li><a href="#">Test link 23</a></li>
                <li><a href="#">Test link 24</a></li>
                <li><a href="#">Test link 25</a></li>
                <li><a href="#">Test link 26</a></li>
                <li><a href="#">Test link 27</a></li>
                <li><a href="#">Test link 28</a></li>
                <li><a href="#">Test link 29</a></li>
                <li><a href="#">Test link 30</a></li>
                <li><a href="#">Test link 31</a></li>
                <li><a href="#">Test link 32</a></li>
                <li><a href="#">Test link 33</a></li>
                <li><a href="#">Test link 34</a></li>
                <li><a href="#">Test link 35</a></li>
                <li><a href="#">Test link 36</a></li>
                <li><a href="#">Test link 37</a></li>
                <li><a href="#">Test link 38</a></li>
                <li><a href="#">Test link 39</a></li>
                <li><a href="#">Test link 40</a></li>
                <li><a href="#">Test link - LAST</a></li>
            </ul>
        </div>

        <div id="content-reveal">

            <a id="reveal-trigger" href="#">&lt; &gt;   </a>

            <h1>Reveal Menu - CSS</h1>

            <p>Lorem ipsum dolor sit amet, ipsum rebum scias sit in. Rei civibus nescis haec in rei completo litus Ephesum, carissimi deo apprehendit Apollonius eius ad te finis puellam. Nuptiarum cui ubi confudit huc apud senex lacrimis ut casus. Amen ad suis Tyrium coniugem eo auditis positam ac, recedite fit itaque filiam rex ut a lenoni vero non dum. Communicatio mihi cum autem quod tamen alius. Palpat venas tanquam vero diam nostra praedicabilium subsannio, theophile esse in deinde plectrum anni ipsa Invitamus me. Ante nesciret in rei finibus veteres hoc contra te sed. Tantus nata genere in rei completo litus Ephesum peteret sua in deinde cepit roseo commendavit auri. Deo adiuves finem imponunt hoc ambulare in. Illa eius non coepit cognitionis huius beneficium peregrina, volo erat bene accidentium in rei exultant deo.</p>
            <p>Epheso Tyrum reverteretur ad per sanctus primum gaudet uxoris tibi. Neminem habere homo tu mihi esse ait regem adventu nihil impetrat est amet amet amet amet constanter approximavit te. Dionysiadis eum est cum unde beata inter sacris christiana in, innocentis sit Mariae maximas hanc enim ad per. Taliarchum in modo ad suis est amet amet consensit cellula rei exultant deo adiuves finem imponunt hoc contra me. Theophile atque bona delata iuvenis ut casus inferioribus civitatis intelligitur sicut in. Visceribusque esocem manibus dimittit in, ephesum peteret sua confusus ait.</p>
            <p>Regem consolatus dum miror puella mihi Tyrum in lucem concitaverunt in deinde duas recitare ex auxilium volo. Auri est Apollonius non potentiae cognoscitivarum non ait. Diana praesentatis ne videret famis perisse naufrago, tharsiam si mihi Tyrum reverteretur. Quem est se vero cum autem quod una litus sua confusus eos. Ipso es sed quod una civitatis ut sua coniuge per accipere filia navem causa alia vero rex Dionysiadi. Iterum non ait in fuerat se est Apollonius mihi esse ait mea Stet consequat eiusdem ordo quos essem rogo me. Tempore Quaere allocutus ait mea in, tempor in modo invenit ubi ait. Eiusdem ea docentur Hellenicus sui Care die ad nomine Piscatore mihi Tyrum ad te. Testare in rei sensibilium acciperem qui auri. Facere potest ei primum intus vero rex Stranguillio eam in fuerat eum istam vero quo.</p>
            <p>Aureos mercatoris vidisset stabat somnis quidquid iterato scelere evenissent anulo quod eam est cum, mauricii materialia sola dum est amet amet amet Cur meae. Item ut diem finito servis meo avari levavit diam ' Apollonius in fuerat construeret cena reges undis Tharsiam eam eos. Atqui plurium venenosamque serpentium ne alicuius tuo lugenti permittis dicamus quia illum in modo genito in fuerat se sed. Euismod tollam auri tecum ait in rei completo litus tuos ratio indue villicus ut diem finito servis meo lateque digne. Occurrit erat in modo cavendum es illum ille sui 'maternam castitatis ipsi sacerdotes. Quicumque inimica meam celebrabantur Apollonius non coepit cenam veniebant est amet coram regis fine omnino inventa fuit. Tace mordeo tertia veni perfrictione cogente iniquam deus. Puto suam ad suis caelo in.</p>
            <p>Lorem ipsum dolor sit amet, ipsum rebum scias sit in. Rei civibus nescis haec in rei completo litus Ephesum, carissimi deo apprehendit Apollonius eius ad te finis puellam. Nuptiarum cui ubi confudit huc apud senex lacrimis ut casus. Amen ad suis Tyrium coniugem eo auditis positam ac, recedite fit itaque filiam rex ut a lenoni vero non dum. Communicatio mihi cum autem quod tamen alius. Palpat venas tanquam vero diam nostra praedicabilium subsannio, theophile esse in deinde plectrum anni ipsa Invitamus me. Ante nesciret in rei finibus veteres hoc contra te sed. Tantus nata genere in rei completo litus Ephesum peteret sua in deinde cepit roseo commendavit auri. Deo adiuves finem imponunt hoc ambulare in. Illa eius non coepit cognitionis huius beneficium peregrina, volo erat bene accidentium in rei exultant deo.</p>
            <p>Epheso Tyrum reverteretur ad per sanctus primum gaudet uxoris tibi. Neminem habere homo tu mihi esse ait regem adventu nihil impetrat est amet amet amet amet constanter approximavit te. Dionysiadis eum est cum unde beata inter sacris christiana in, innocentis sit Mariae maximas hanc enim ad per. Taliarchum in modo ad suis est amet amet consensit cellula rei exultant deo adiuves finem imponunt hoc contra me. Theophile atque bona delata iuvenis ut casus inferioribus civitatis intelligitur sicut in. Visceribusque esocem manibus dimittit in, ephesum peteret sua confusus ait.</p>
            <p>Regem consolatus dum miror puella mihi Tyrum in lucem concitaverunt in deinde duas recitare ex auxilium volo. Auri est Apollonius non potentiae cognoscitivarum non ait. Diana praesentatis ne videret famis perisse naufrago, tharsiam si mihi Tyrum reverteretur. Quem est se vero cum autem quod una litus sua confusus eos. Ipso es sed quod una civitatis ut sua coniuge per accipere filia navem causa alia vero rex Dionysiadi. Iterum non ait in fuerat se est Apollonius mihi esse ait mea Stet consequat eiusdem ordo quos essem rogo me. Tempore Quaere allocutus ait mea in, tempor in modo invenit ubi ait. Eiusdem ea docentur Hellenicus sui Care die ad nomine Piscatore mihi Tyrum ad te. Testare in rei sensibilium acciperem qui auri. Facere potest ei primum intus vero rex Stranguillio eam in fuerat eum istam vero quo.</p>
            <p>Aureos mercatoris vidisset stabat somnis quidquid iterato scelere evenissent anulo quod eam est cum, mauricii materialia sola dum est amet amet amet Cur meae. Item ut diem finito servis meo avari levavit diam ' Apollonius in fuerat construeret cena reges undis Tharsiam eam eos. Atqui plurium venenosamque serpentium ne alicuius tuo lugenti permittis dicamus quia illum in modo genito in fuerat se sed. Euismod tollam auri tecum ait in rei completo litus tuos ratio indue villicus ut diem finito servis meo lateque digne. Occurrit erat in modo cavendum es illum ille sui 'maternam castitatis ipsi sacerdotes. Quicumque inimica meam celebrabantur Apollonius non coepit cenam veniebant est amet coram regis fine omnino inventa fuit. Tace mordeo tertia veni perfrictione cogente iniquam deus. Puto suam ad suis caelo in.</p>
            <p>Lorem ipsum dolor sit amet, ipsum rebum scias sit in. Rei civibus nescis haec in rei completo litus Ephesum, carissimi deo apprehendit Apollonius eius ad te finis puellam. Nuptiarum cui ubi confudit huc apud senex lacrimis ut casus. Amen ad suis Tyrium coniugem eo auditis positam ac, recedite fit itaque filiam rex ut a lenoni vero non dum. Communicatio mihi cum autem quod tamen alius. Palpat venas tanquam vero diam nostra praedicabilium subsannio, theophile esse in deinde plectrum anni ipsa Invitamus me. Ante nesciret in rei finibus veteres hoc contra te sed. Tantus nata genere in rei completo litus Ephesum peteret sua in deinde cepit roseo commendavit auri. Deo adiuves finem imponunt hoc ambulare in. Illa eius non coepit cognitionis huius beneficium peregrina, volo erat bene accidentium in rei exultant deo.</p>
            <p>Epheso Tyrum reverteretur ad per sanctus primum gaudet uxoris tibi. Neminem habere homo tu mihi esse ait regem adventu nihil impetrat est amet amet amet amet constanter approximavit te. Dionysiadis eum est cum unde beata inter sacris christiana in, innocentis sit Mariae maximas hanc enim ad per. Taliarchum in modo ad suis est amet amet consensit cellula rei exultant deo adiuves finem imponunt hoc contra me. Theophile atque bona delata iuvenis ut casus inferioribus civitatis intelligitur sicut in. Visceribusque esocem manibus dimittit in, ephesum peteret sua confusus ait.</p>
            <p>Regem consolatus dum miror puella mihi Tyrum in lucem concitaverunt in deinde duas recitare ex auxilium volo. Auri est Apollonius non potentiae cognoscitivarum non ait. Diana praesentatis ne videret famis perisse naufrago, tharsiam si mihi Tyrum reverteretur. Quem est se vero cum autem quod una litus sua confusus eos. Ipso es sed quod una civitatis ut sua coniuge per accipere filia navem causa alia vero rex Dionysiadi. Iterum non ait in fuerat se est Apollonius mihi esse ait mea Stet consequat eiusdem ordo quos essem rogo me. Tempore Quaere allocutus ait mea in, tempor in modo invenit ubi ait. Eiusdem ea docentur Hellenicus sui Care die ad nomine Piscatore mihi Tyrum ad te. Testare in rei sensibilium acciperem qui auri. Facere potest ei primum intus vero rex Stranguillio eam in fuerat eum istam vero quo.</p>
            <p>Aureos mercatoris vidisset stabat somnis quidquid iterato scelere evenissent anulo quod eam est cum, mauricii materialia sola dum est amet amet amet Cur meae. Item ut diem finito servis meo avari levavit diam ' Apollonius in fuerat construeret cena reges undis Tharsiam eam eos. Atqui plurium venenosamque serpentium ne alicuius tuo lugenti permittis dicamus quia illum in modo genito in fuerat se sed. Euismod tollam auri tecum ait in rei completo litus tuos ratio indue villicus ut diem finito servis meo lateque digne. Occurrit erat in modo cavendum es illum ille sui 'maternam castitatis ipsi sacerdotes. Quicumque inimica meam celebrabantur Apollonius non coepit cenam veniebant est amet coram regis fine omnino inventa fuit. Tace mordeo tertia veni perfrictione cogente iniquam deus. Puto suam ad suis caelo in.</p>
            <p>Lorem ipsum dolor sit amet, ipsum rebum scias sit in. Rei civibus nescis haec in rei completo litus Ephesum, carissimi deo apprehendit Apollonius eius ad te finis puellam. Nuptiarum cui ubi confudit huc apud senex lacrimis ut casus. Amen ad suis Tyrium coniugem eo auditis positam ac, recedite fit itaque filiam rex ut a lenoni vero non dum. Communicatio mihi cum autem quod tamen alius. Palpat venas tanquam vero diam nostra praedicabilium subsannio, theophile esse in deinde plectrum anni ipsa Invitamus me. Ante nesciret in rei finibus veteres hoc contra te sed. Tantus nata genere in rei completo litus Ephesum peteret sua in deinde cepit roseo commendavit auri. Deo adiuves finem imponunt hoc ambulare in. Illa eius non coepit cognitionis huius beneficium peregrina, volo erat bene accidentium in rei exultant deo.</p>
            <p>Epheso Tyrum reverteretur ad per sanctus primum gaudet uxoris tibi. Neminem habere homo tu mihi esse ait regem adventu nihil impetrat est amet amet amet amet constanter approximavit te. Dionysiadis eum est cum unde beata inter sacris christiana in, innocentis sit Mariae maximas hanc enim ad per. Taliarchum in modo ad suis est amet amet consensit cellula rei exultant deo adiuves finem imponunt hoc contra me. Theophile atque bona delata iuvenis ut casus inferioribus civitatis intelligitur sicut in. Visceribusque esocem manibus dimittit in, ephesum peteret sua confusus ait.</p>
            <p>Regem consolatus dum miror puella mihi Tyrum in lucem concitaverunt in deinde duas recitare ex auxilium volo. Auri est Apollonius non potentiae cognoscitivarum non ait. Diana praesentatis ne videret famis perisse naufrago, tharsiam si mihi Tyrum reverteretur. Quem est se vero cum autem quod una litus sua confusus eos. Ipso es sed quod una civitatis ut sua coniuge per accipere filia navem causa alia vero rex Dionysiadi. Iterum non ait in fuerat se est Apollonius mihi esse ait mea Stet consequat eiusdem ordo quos essem rogo me. Tempore Quaere allocutus ait mea in, tempor in modo invenit ubi ait. Eiusdem ea docentur Hellenicus sui Care die ad nomine Piscatore mihi Tyrum ad te. Testare in rei sensibilium acciperem qui auri. Facere potest ei primum intus vero rex Stranguillio eam in fuerat eum istam vero quo.</p>
            <p>Aureos mercatoris vidisset stabat somnis quidquid iterato scelere evenissent anulo quod eam est cum, mauricii materialia sola dum est amet amet amet Cur meae. Item ut diem finito servis meo avari levavit diam ' Apollonius in fuerat construeret cena reges undis Tharsiam eam eos. Atqui plurium venenosamque serpentium ne alicuius tuo lugenti permittis dicamus quia illum in modo genito in fuerat se sed. Euismod tollam auri tecum ait in rei completo litus tuos ratio indue villicus ut diem finito servis meo lateque digne. Occurrit erat in modo cavendum es illum ille sui 'maternam castitatis ipsi sacerdotes. Quicumque inimica meam celebrabantur Apollonius non coepit cenam veniebant est amet coram regis fine omnino inventa fuit. Tace mordeo tertia veni perfrictione cogente iniquam deus. Puto suam ad suis caelo in.</p>

        </div>

    </div>

    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="assets/jquery-1.7.min.js">\x3C/script>')</script>

    <script>        
        $(document).ready(function()
        {
            //Get DOM nodes & dimensions
            var viewportHeight = $(window).height();
            var content = $('#content-reveal');
            var contentWidth = content.width()

            //Set the menu width & height
            $('#menuContainer-reveal').width(contentWidth-30).height(viewportHeight);

            /* REVEAL MENU */           
            $('#reveal-trigger').toggle(function(e)
            {           
                e.preventDefault();
                content.animate({'left':(contentWidth-30)}, 250);

            }, function(e)
            {
                e.preventDefault();
                content.animate({'left':0}, 250);
            })

        })
    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:53:29.123

我通过从初始化代码中删除这一行来修复 iScroll 防止其他所有内容滚动的问题

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

该插件现在可以完美运行，并且我页面上的所有内容都按预期工作。

如果原生不支持 1 个手指滚动，我将使用modernizr 测试溢出：滚动来提供此插件。

# grails - Paypal Sandbox 通知仅在用户单击返回按钮后才会发生

> ID：13323048
> 
> 赞同：1
> 
> 时间：2012-11-10T14:48:34.720
> 
> 标签：grails, paypal, paypal-ipn

我一直在尝试将贝宝集成到我们的一个 grails 应用程序中。我需要创建一个每月订阅，其中每月将自动从贝宝转移付款。出于测试目的，我在沙盒中创建了一个帐户并创建了一个用于定期付款的按钮。在创建按钮时，我还提到了 IPN 的成功 url 和取消 url。现在在测试应用程序时，我看到在按钮上单击用户被重定向到贝宝，并且在登录后付款也成功发生。但通知尚未发送。付款成功后，会出现一个按钮，询问用户是否要返回应用程序。如果用户单击此按钮，则他将被重定向到应用程序，否则不会向用户发送通知。而且我也从来没有收到任何取消定期付款的通知。如果有人之前遇到过这种情况，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:08:54.133

我是否正确理解您对 CancelURL 的使用感到疑惑？

如果有人在结帐期间单击取消链接，他们将简单地返回到您为此值设置的任何 URL。ReturnURL 是完成订阅设置后发送的位置。

也就是说，订阅设置并不总是保证立即付款。这可能会在以后发生，尽管它通常会立即发生。

如果您想获得配置文件付款的编程通知，或者当实际的当前配置文件被取消时，您需要使用[Instant Payment Notification](https://www.paypal.com/ipn)，它将所有交易数据发布到您在服务器上的脚本，以便您可以相应地处理数据。

# python - 字典的内存消耗：设置值无与删除项目

> ID：13323050
> 
> 赞同：7
> 
> 时间：2012-11-10T14:48:37.200
> 
> 标签：python

我知道这`del d[key]`将删除键值对，而`d[key]=None`只会取消引用该值。

但是，在内存管理方面，有什么区别吗？`None`假设没有其他变量引用该值，设置值是否会立即触发垃圾回收？

我做了一个小实验：

```
In [74]: import sys
In [75]: a = {'a': 'blah'}

In [76]: sys.getsizeof(a)
Out[76]: 280

In [77]: a['a'] = None

In [79]: sys.getsizeof(a)
Out[79]: 280

In [80]: del a['a']

In [81]: sys.getsizeof(a)
Out[81]: 280 
```

不确定该方法是否有效，但在字典的大小方面似乎完全没有区别。我必须在这里错过一些东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T14:55:55.677

`sys.getsizeof`测量字典本身的大小；不是它包含的值的大小。

`None`是一个对象。它需要一些内存。

要查找 dict的大小，*包括*它包含的值的大小，您可以使用[pymler](http://packages.python.org/Pympler/)：

```
In [26]: import pympler.asizeof as asizeof

In [27]: asizeof.asizeof({'a': None})
Out[27]: 168

In [28]: asizeof.asizeof({})
Out[28]: 136

In [29]: import sys

In [30]: 
In [31]: sys.getsizeof({})
Out[31]: 136

In [34]: sys.getsizeof({'a':None})
Out[34]: 136 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:02:02.130

unutbu 是正确的。但有时，python 垃圾收集器的吸收速度可能会有点慢。

对一个对象调用 del 并删除对该对象的所有引用意味着垃圾收集器可以在它准备好时收集它。这通常不会导致使用的内存量立即减少。

您可以使用 gc 模块强制收集并查看垃圾收集器实际看到的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T15:51:57.037

Python 字典在逻辑旁边包含指向所有键的指针和指向所有值的指针。

*   将值设置为 None 会使字典中的对象数量保持不变，它将一个值指针替换为指向 None 对象的指针。如果不再从其他地方引用旧值对象，它将被垃圾回收。钥匙会留下来。
*   删除一个值，如果这意味着不再引用键和/或值，将导致两者都被清理，并且原则上会减小字典本身的大小。字典是否真的会“缩小”是一个我不知道的实现细节。

在一个对象上进行测试可能不具有代表性。尝试一百万。此外，用一个短的“字符串”对象测试它可能不具有代表性，因为一个字符串可能是“内部的”，即它可能成为不可破坏的对象集的一部分，当解释器再次需要它时，这些对象会自动重用。

# c++ - LCA 实现中的分段错误

> ID：13323052
> 
> 赞同：2
> 
> 时间：2012-11-10T14:48:46.780
> 
> 标签：c++, segmentation-fault

```
/*  
if node in the first section then P[node]=1  
if node in the beginning of some section then P[node]=T[node]  
if none then P[node]=P[T[node]]  
*/
#define SIZE 102
int T[SIZE];//the father of node i in the tree
int L[SIZE];//level of the node i
int P[SIZE];//lowest ancestor of the node from the prev. section
//pre-process p using DFS
int N;
int nr;//sqrt(H)
list<int>Child[SIZE];
list<int>::iterator it;

 void dfs(int node)
    {
        if(L[node]<nr)
            P[node]=1;
            else
                {
                    if(L[node]%nr==0)//SEG-FAULT here node=6316144
                         P[node]=T[node];
                         else
                             P[node]=P[T[node]];
                 }
            //for each son k of node
         for(it=Child[node].begin();it!=Child[node].end();it++)
              {
                 dfs(*it);
              }
    }

//here's the code to initialize L and nr
int initialize()
  {
    //initialize the L array and the nr value by finding out value of H
    int root,i;
    for(i=1;i<=N;i++)
      {
        if(T[i]==-1)
          {
            root=i;
            break;
          }
      }
    queue<int>Q;
    queue<int>t;
    t.push(root);
    int s,l=0;//nodes at the same level

    //process all the nodes in the Q at this moment
     while(!t.empty())        
     {
       while(!t.empty())
        {
            s=t.front();
            t.pop();

            L[s]=l;
            Q.push(s);
        }   
        while(!Q.empty())
        {
           s=Q.front();
           Q.pop();
           for(it=Child[s].begin();it!=Child[s].end();it++)//children of node s
             t.push(*it);
        }
        l++;
     }  

    int height=l;
    nr=sqrt(height);
    return root;
}

//here's the code to obtain the tree
void getTree()
{
   // printf("\nHow many nodes?");
     scanf("%d",&N);
   //printf("\nNow enter the tree as parent #children children");
     int i,n,p,j,c;
     for(i=0;i<=N;i++)
         T[i]=-1;//all the nodes do not have parents
     for(i=0;i<N;i++)
       {
         scanf("%d%d",&p,&n);
           for(j=0;j<n;j++)
             {
               scanf("%d",&c);
               Child[p].push_back(c);//child is pushed in the correct parent's list
               T[c]=p;//parent is updated
             }
       }
 } 
```

以上是填充 P 数组以解决 LCA（最低公共祖先）问题的简单代码（来自 topcoder 文章）。nr=sqrt(H)（使用另一个函数计算）。列表的全局数组 Child 包含节点的子节点的索引。如果节点是叶子，则某些列表为空。L 数组包含使用 BFS 初始化的节点的级别（基于 0）（这是正确的）。问题是每当给出输入并且dfs（r）（根）被称为分段错误时，指示行中节点的值显示为6316144。我只是不明白出了什么问题......

# ruby - 为什么我不能将 1 添加到 ruby 中的哈希值？

> ID：13323056
> 
> 赞同：0
> 
> 时间：2012-11-10T14:49:00.093
> 
> 标签：ruby, sequel

我正在使用续集 ORM

```
@latestorder = Step.where(:tutorial_id =>data['tutorial_id']).order(Sequel.desc(:order)).limit(1) #data['tutorial_id'] is 1
@neworder = @latestorder[:order] +1; #<-- this line causes errors!

NoMethodError at /makenew/stepundefined method `+' for #<Step:0x2f85138> 
```

使用`.to_i`不起作用，我不能`DB[]`用于此查询。

**@latestorder 和 @latestorder[:order] 的输出**

```
<?r @latestorder.inspect ?> 
```

> #

```
<?r @latestorder.each do |late| ?>
#{late.inspect}
<?r end ?> 
```

> #13, :user_id=>1, :tutorial_id=>1, :order=>9, :title=>"选择一个组", :instruction=>"从组页面中，选择一个组继续。 \r\n\r\n如果您有 flyasakite 的密码，出于测试目的，请选择 All About Compesh 组", :url=>"http://compesh.com/groups", :datenumber=>"2012-11 -10", :datetimenumber=>"2012-11-10 13:18"}>

```
<?r @latestorder.each do |late| ?>
#{late.order.inspect}
<?r end ?> 
```

> 9

我需要能够将 1 添加到 LIMIT 为 1 的 @latestorder，而无需进入`.each`循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:04:52.827

你`@latestorder`是一个数组，获取第一个元素，并尝试使用它：

```
@neworder = @latestorder[0][:order] +1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:46:44.983

`@latestorder`是一个 Sequel::Dataset，如果你希望它是一个 Hash，你需要更改`limit(1)`为`first`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T15:14:50.537

或者因为 Sequel 具有不同的数组/哈希 id，具体取决于行的 id。

`@neworder = @latestorder.first.order +1`

# php - 在共享主机上为“apache”用户生成 ssh 密钥

> ID：13323057
> 
> 赞同：1
> 
> 时间：2012-11-10T14:49:11.653
> 
> 标签：php, git, apache

我正在使用带有 rsa 验证的 exec 从 PHP 发出 git clone 请求。这个过程似乎开始正常，但是，我很快就得到了错误

```
Could not create directory 'var/www/.ssh' 
```

我曾以为我已经克服了让 apache 使用 ssh-add 查看自己的目录的问题，但是，情况似乎并非如此。我的两条线：

```
exec('/usr/bin/ssh-add /path/to/home/dir/id_rsa > ssh.log.txt 2>&1');
exec('/usr/local/bin/git clone git@bitbucket.org:etc.git > git.log.txt 2>&1'); 
```

当您在受限的共享主机上时，有没有办法让 apache 用户使用 rsa 密钥调用 .git，这不会让您触摸 /var/www/？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:15:46.160

使用 GIT_SSH 环境变量：

```
mkdir /path/to/home/dir/.ssh/
chmod 0700 /path/to/home/dir/.ssh/
chown apache:apache /path/to/home/dir/.ssh/ 
```

为 ssh 创建包装器（在主目录 /path/to/home/dir/ssh_wrap 中）

```
#!/bin/sh
$target=$1;
$command=$2;
ssh -F /path/to/home/dir/.ssh/ssh_config -i /path/to/home/dir/id_rsa $target $command 
```

跑

```
chmod +x /path/to/home/dir/ssh_wrap 
```

创建文件/path/to/home/dir/.ssh/ssh_config：

```
 UserKnownHostsFile=/path/to/home/dir/.ssh/known_hosts
 StrictHostKeyChecking=no 
```

在 git clone add 之前的脚本中

```
 export GIT_SSH=/path/to/home/dir/ssh_wrap 
```

这可能需要改变，你需要明白。更多信息`man git` `man ssh`

# sql - 如何根据给定列获取前 3 列项目

> ID：13323059
> 
> 赞同：-1
> 
> 时间：2012-11-10T14:49:18.307
> 
> 标签：sql, sql-server

鉴于此示例表：

```
ID_no         name             grade
112           Micheal          81
113           Airi             90
114           Felix            76
115           Ana              87 
```

我如何根据他们的给定成绩获得前 3 名...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:58:34.840

您只需将该`TOP`子句与您想要的顺序结合使用：

```
SELECT TOP 3 Name, SUM(Grade)AS Grade
FROM table
GROUP BY Name
ORDER BY Grade DESC 
```

（假设等级越高越好）

请注意，您需要`SELECT TOP 3 WITH TIES`（如 John 所示）包括具有相同编号的所有行。因此，考虑到有 5 个名称具有相同的等级，我的查询将只返回 3，而`WITH TIES`确保返回所有 5。

# ruby-on-rails-3 - Carrierwave 直接上传到 s3，sidekiq 验证失败

> ID：13323061
> 
> 赞同：2
> 
> 时间：2012-11-10T14:49:52.333
> 
> 标签：ruby-on-rails-3, upload, amazon-s3, carrierwave, sidekiq

按照 Ryan Bates 教程使用 CarrierWave 和 Sidekiq 的后台作业直接上传到 S3。

我在 sidekiq 日志中的后台工作人员中看到以下错误。

```
 2012-11-10T14:33:56Z 44401 TID-owd2xrzdg WARN: {"retry"=>true, "queue"=>"default", "class"=>"Article::ImageWorker", "args"=>[44, "uploads/d8850e90-0d6d-0130-fecf-3c0754129341/mkv5E.jpg"], "jid"=>"8add5079541725ad30550f9c", "error_message"=>"Validation failed: Image could not download file", "error_class"=>"ActiveRecord::RecordInvalid", "failed_at"=>"2012-11-10T14:29:15Z", "retry_count"=>4, "retried_at"=>2012-11-10 14:33:56 UTC}
    2012-11-10T14:33:56Z 44401 TID-owd2xrzdg WARN: Validation failed: Image could not download file
    2012-11-10T14:33:56Z 44401 TID-owd2xrzdg WARN: /Users/kgoddard/.rvm/gems/ruby-1.9.3-head/gems/activerecord-3.2.8/lib/active_record/validations.rb:56:in `save!' 
```

这是我的上传器

```
class ImageUploader < CarrierWave::Uploader::Base
  # Include CarrierWave direct uploader to background upload task.
  include CarrierWaveDirect::Uploader

  # Include RMagick or MiniMagick support:
  include CarrierWave::RMagick
  # include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  # storage :file
  storage :fog

  # Set the mimetype of the upload incase it is incorrect.
  include CarrierWave::MimeTypes
  process :set_content_type

  process :resize_to_limit => [640, 640]

  version :thumb do
    process :resize_to_fill => [160, 120]
  end

end 
```

文章模型

```
class Article < ActiveRecord::Base
  attr_accessible :orientation, :shoot_id, :image
  belongs_to :shoot
  mount_uploader :image, ImageUploader

  after_save :enqueue_image

  def image_name
    File.basename(image.path || image.filename) if image
  end

  def enqueue_image
    ImageWorker.perform_async(id, key) if key.present?
  end

  class ImageWorker
    include Sidekiq::Worker

    def perform(id, key)
        article = Article.find(id)
        article.key = key
        article.remote_image_url = article.image.direct_fog_url(:with_path => true)
        article.save!
        article.update_column(:image_processed, true)
    end

  end

end 
```

CarrierWave 配置

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',       # required
    :aws_access_key_id      => ENV["AWS_ACCESS_KEY_ID"],       # required
    :aws_secret_access_key  => ENV["AWS_SECRET_ACCESS_KEY"],       # required
    :region                 => 'eu-east-1'  # optional, defaults to 'us-east-1'
  }
  config.fog_directory  = ENV["AWS_S3_BUCKET"]                       # required
end 
```

拍摄控制器显示负责渲染上传表单的动作

```
 # GET /shoots/1
  # GET /shoots/1.json
  def show
    # TODO: is this the best way to prevent users from accessing not owned resources.
    @shoot = Shoot.find(params[:id])
    @uploader = Article.new.image
    @uploader.success_action_redirect = new_admin_article_url    
    if @shoot
      respond_to do |format|
        format.html # show.html.erb
      end
    else
      redirect_to shoots_path, alert: 'No shoot found with id: #{params[:id]}'
    end
  end 
```

表演动作上传者表格

```
<div class="hero-unit">
  <h2><%= @shoot.name %></h2>
  <p><%= @shoot.overview %></p>
  <p>This shoot was taken on <%= @shoot.shoot_date %></p>
  <%= direct_upload_form_for @uploader do |f| %>
    <p><%= f.file_field :image, multiple: true, name: "article[image]" %></p>
    <p><%= f.submit "Add Media", :class => "btn btn-primary" %></p>
  <% end %>
</div><!-- /hero-unit --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:41:43.713

原来我的存储桶名称无效...确保您的存储桶名称仅包含字母、数字和破折号。

# javascript - 需要一个关于 OO JS 的建议

> ID：13323063
> 
> 赞同：0
> 
> 时间：2012-11-10T14:50:20.880
> 
> 标签：javascript, jquery, oop

我是面向对象 JS 的新手，我想知道是否有更好的方法来做到这一点：

```
this.aProperty = function(myCurrentInstance){ some code }(this); 
```

我只想让我的对象的一个​​属性获得一个函数返回的值，但是这个函数需要使用当前对象的其他属性，所以我必须给函数对象本身。

但是，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:56:51.533

函数作用域是 OOJS 中最棘手的问题之一！关键是要记住，对象方法只是一个*作为对象属性分配的函数*，因此如果调用不小心（例如，它作为回调传递给某个东西），那么它可能会在错误的上下文中运行，使用`this`正如您所发现的那样，错误的事情必然会发生。

请记住：

```
var someObj = {
    someMethod: function() {

    }
}

someObj.someMethod(); // in someMethod, this will be someObj

var someRef = someObj.someMethod;
someRef(); // the function will now run with this bound to the window object, which you probably don't want 
```

如果必须传递引用，则可以*绑定*该函数。在现代浏览器中，您可以使用`Function.prototype.bind`：

```
this.aProperty = (function() {}).bind(this); 
```

较旧的浏览器将需要 polyfill。jQuery 有一个：

```
this.aProperty = $.proxy(function() {    }, this); 
```

或者您可以编写自己的：

```
Function.prototype.bind = function(scope) {
    var fn = this;
    return function() {
        fn.apply(scope, arguments);
    }
} 
```

然后使用`.bind`第一个示例中的语法。

# javascript - 使用数组的 Javascript + jQuery 游戏（数字和图像）

> ID：13323064
> 
> 赞同：1
> 
> 时间：2012-11-10T14:50:29.437
> 
> 标签：javascript

对不起，我的标题不是很清楚。如果有人可以帮助我，我正在徘徊。我正在制作一个游戏，我想制作一个包含一个数字的数组（告诉你一些东西值多少钱），还有一个图像（显示你正在购买的东西）。我将所有这些数组放入一个滑块中，以便玩家可以看到他们可以购买的不同物品，这就是我到目前为止所做的。我的项目的网站是：theassets.staticloud.com 这只是我敲出来的东西，向你展示我在做什么的基本想法：

```
<html>
<head>
     <title>Test</title>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
     <script type="text/javascript">
var island = new Array();
island[0] = 7000;
island[1] = $islandimg;
     </script>
     </head>
     <body>
          <img src="http://avatarmaker.net/free-avatars/avatars/nature_217/scenery_275/moorea_island_avatar_100x100_83622.jpg" id="islandimg">
          <body>

</html> 
```

这就是我正在做的事情：

```
<!doctype html>

<html lang="en">
<body bgcolor="black">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Slider - Slider scrollbar</title>
<center>
<img src="theassetsimg.png">
<br />
<br />
<center><table>
<tr><td><img src="cooltext819230394.png" onmouseover="this.src='cooltext819230394MouseOver.png';" onmouseout="this.src='cooltext819230394.png';" /></td>
<td><img src="cooltext819231213.png" onmouseover="this.src='cooltext819231213MouseOver.png';" onmouseout="this.src='cooltext819231213.png';" /><a></td>
<td><img src="cooltext819232096.png" onmouseover="this.src='cooltext819232096MouseOver.png';" onmouseout="this.src='cooltext819232096.png';" /><a></td></tr>
</table></center>
</center>    
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    .scroll-pane { overflow: auto; width: 99%; float:left; }
    .scroll-content { width: 2440px; float: left; }
    .scroll-content-item { width: 100px; height: 100px; float: left; margin: 10px; font-size: 3em; line-height: 96px; text-align: center; }
    * html .scroll-content-item { display: inline; } /* IE6 float double margin bug */
    .scroll-bar-wrap { clear: left; padding: 0 4px 0 2px; margin: 0 -1px -1px -1px; }
    .scroll-bar-wrap .ui-slider { background: none; border:0; height: 2em; margin: 0 auto;  }
    .scroll-bar-wrap .ui-handle-helper-parent { position: relative; width: 100%; height: 100%; margin: 0 auto; }
    .scroll-bar-wrap .ui-slider-handle { top:.2em; height: 1.5em; }
    .scroll-bar-wrap .ui-slider-handle .ui-icon { margin: -8px auto 0; position: relative; top: 50%; }
    </style>
    <script>
    $(function() {
        //scrollpane parts
        var scrollPane = $( ".scroll-pane" ),
            scrollContent = $( ".scroll-content" );

        //build slider
        var scrollbar = $( ".scroll-bar" ).slider({
            slide: function( event, ui ) {
                if ( scrollContent.width() > scrollPane.width() ) {
                    scrollContent.css( "margin-left", Math.round(
                        ui.value / 100 * ( scrollPane.width() - scrollContent.width() )
                    ) + "px" );
                } else {
                    scrollContent.css( "margin-left", 0 );
                }
            }
        });

        //append icon to handle
        var handleHelper = scrollbar.find( ".ui-slider-handle" )
        .mousedown(function() {
            scrollbar.width( handleHelper.width() );
        })
        .mouseup(function() {
            scrollbar.width( "100%" );
        })
        .append( "<span class='ui-icon ui-icon-grip-dotted-vertical'></span>" )
        .wrap( "<div class='ui-handle-helper-parent'></div>" ).parent();

        //change overflow to hidden now that slider handles the scrolling
        scrollPane.css( "overflow", "hidden" );

        //size scrollbar and handle proportionally to scroll distance
        function sizeScrollbar() {
            var remainder = scrollContent.width() - scrollPane.width();
            var proportion = remainder / scrollContent.width();
            var handleSize = scrollPane.width() - ( proportion * scrollPane.width() );
            scrollbar.find( ".ui-slider-handle" ).css({
                width: handleSize,
                "margin-left": -handleSize / 2
            });
            handleHelper.width( "" ).width( scrollbar.width() - handleSize );
        }

        //reset slider value based on scroll content position
        function resetValue() {
            var remainder = scrollPane.width() - scrollContent.width();
            var leftVal = scrollContent.css( "margin-left" ) === "auto" ? 0 :
                parseInt( scrollContent.css( "margin-left" ) );
            var percentage = Math.round( leftVal / remainder * 100 );
            scrollbar.slider( "value", percentage );
        }

        //if the slider is 100% and window gets larger, reveal content
        function reflowContent() {
                var showing = scrollContent.width() + parseInt( scrollContent.css( "margin-left" ), 10 );
                var gap = scrollPane.width() - showing;
                if ( gap > 0 ) {
                    scrollContent.css( "margin-left", parseInt( scrollContent.css( "margin-left" ), 10 ) + gap );
                }
        }

        //change handle position on window resize
        $( window ).resize(function() {
            resetValue();
            sizeScrollbar();
            reflowContent();
        });
        //init scrollbar size
        setTimeout( sizeScrollbar, 10 );//safari wants a timeout
    });
    </script>
</head>
<body>

<div class="scroll-pane ui-widget ui-widget-header ui-corner-all">
    <div class="scroll-content">
        <div class="scroll-content-item ui-widget-header"><img src="http://avatarmaker.net/free-avatars/avatars/nature_217/scenery_275/moorea_island_avatar_100x100_83622.jpg" id=""></div>
        <div class="scroll-content-item ui-widget-header"><img src="http://i31.twenga.com/jewellery/watch/nixon-watches-all-gold-tp_531465411970057721.jpg"></div>
        <div class="scroll-content-item ui-widget-header"><img src="http://www.glitteringstones.com/Images/bluediamond.gif"></div>
        <div class="scroll-content-item ui-widget-header"><img src="http://www.rac.co.uk/images/tiles/car-driving.aspx"></div>
    </div>
    <div class="scroll-bar-wrap ui-widget-content ui-corner-bottom">
        <div class="scroll-bar"></div>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:11:41.197

您可能需要创建一个对象数组

```
var items = [];

items.push({
  name: 'Island',
  worth: 7000,
  image: 'http://../island.jpg'
});

items.push({
  name: 'Watch',
  worth: 100,
  image: 'http://../watch.jpg'
}); 
```

然后您可以遍历 items 数组并访问所需的属性

# wpf - 如何将变量存储在资源目录中？

> ID：13323068
> 
> 赞同：-1
> 
> 时间：2012-11-10T14:51:13.867
> 
> 标签：wpf, wpf-controls, resourcedictionary

我想将所有变量存储在资源目录中并在计算后保存所有信息并在页面上显示该信息。我知道如何显示信息我不知道如何保存计算后的信息请告诉我该怎么做它？？

你能给我看这样的小例子吗？我试图找到这种类型的例子，但我找不到......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:14:53.533

资源字典不是您要找的。这些旨在存储静态数据，例如不打算在应用程序运行时更改的样式和模板。但是，如果需要将 XAML 动态加载到应用程序中，则需要使用`XamlReader`该类。[这是一个例子](http://blogs.msdn.com/b/ashish/archive/2007/08/14/dynamically-loading-xaml.aspx)

# python - Python - 播放 mp3 文件

> ID：13323074
> 
> 赞同：2
> 
> 时间：2012-11-10T14:51:51.913
> 
> 标签：python

我知道以前有人问过这个问题，但没有一个解决方案对我有用。

我使用 Arch Linux。

这是我尝试过/调查过的：

1.  pyglet - 不起作用；他们自己的网站说“Linux 用户可以选择在 OpenAL 和 ALSA 之间进行音频输出。不幸的是，这两种实现都有严重的限制或实现错误，超出了 pyglet 的控制范围。

2.  pymedia - 不再支持；甚至他们网站上的示例也不起作用。

3.  pygame - 来自他们的网站：“请注意 MP3 支持是有限的”。

4.  wx.media - 这确实有效，但我的“应用程序”的其余部分在 tkinter 中。

5.  mp3play - 仅 win32

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:54:56.750

你可以试试[`sfml`](http://www.sfml-dev.org/index.php)，它有[音频支持](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Music.php)——有[最新版本的 Python 绑定](https://github.com/bastienleonard/pysfml-cython)，我用过它们，它们工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:57:30.533

我现在正在开发一个[音乐播放器项目](https://github.com/albertz/music-player)，在此过程中，我开发了一个 Python 模块，它提供了一个非常高级的接口来播放各种音频文件。它使用 FFmpeg 和 PortAudio。

这是模块：[ffmpeg](https://github.com/albertz/music-player/blob/master/ffmpeg.c)

在 Linux 上编译，请参阅自述文件；您可能需要最新的 FFmpeg / PortAudio 版本；至少 Debian 中的版本太旧了。

一个基于此模块的简单演示示例播放器在[这里](https://github.com/albertz/music-player/blob/master/test_ffmpeg.py)。

# c# - 如何让我的控件从屏幕边缘反弹？

> ID：13323075
> 
> 赞同：0
> 
> 时间：2012-11-10T14:52:17.853
> 
> 标签：c#, windows-8, windows-store-apps

我正在开发一个 Windows 应用商店应用程序。我的应用程序中有许多可拖动的用户控件（矩形）。如果用户足够快地拖动我的控件，该控件就会消失。否则，它将保留在屏幕上以防止不必要的删除。

现在我知道如何在`ManipulationDelta`事件处理程序中获得速度，但我不知道如何让我的控件从屏幕边缘反弹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:58:38.520

您的问题的复杂性可能会因很多变量而异。例如，您是否希望这些框相互旋转/碰撞等。

最完整的解决方案是使用第 3 部分解决方案，例如 Box2D（或其用于 c# 的名为[box2dx](http://code.google.com/p/box2dx/)的端口）。但是我不确定是否有可用的 Win-RT 版本。

如果不使用 box2dx 之类的东西，您将不得不推出自己的物理引擎。为此，您需要创建一个以固定间隔（例如 60Hz）更新的代码循环，并在该时间点检查每个矩形的位置和速度。如果您可以设置这样的循环，那么您可以使用[SUVAT](http://en.wikipedia.org/wiki/Equations_of_motion)计算下一帧每个矩形的位置/速度。

# python-2.7 - 掷n个骰子m次，得到至少1个6的概率是多少

> ID：13323080
> 
> 赞同：0
> 
> 时间：2012-11-10T14:53:14.613
> 
> 标签：python-2.7, probability, standard-library, dice

我有以下代码试图解决以下问题：

掷 n 次骰子 m 次，计算得到至少一个 6 的概率。

我知道掷 2 个骰子时至少得到 1 个 6 的确切概率是 11/36。

我下面的程序似乎希望概率为 0.333，这很接近，但应该是 11/36 对吧？

如果这些建议可以在我制作的标准代码上继续，那就太好了，但也感谢矢量化代码。

```
import random
from sys import argv

m = int(argv[1]) # performing the experiment with m dice n times
n = int(argv[2]) # Throwing m dice n times
s = 0            # Counts the number of times m dies shows at least one 6

print '%.g dice are thrown %.g times' % (m, n)

for i in xrange(n):
    list = []    # used to clear the list for new die count
    for q in xrange(m):
        r = random.randint(1,6)#Picks a random integer on interval [1,6]
        list.append(r)         #appends integer value
        if len(list) == m:     #when list is full, that is when m dice has been thrown
            for i in xrange(len(list)):
                #print list
                if list[i] == 6: #if the list of elements has a six add to the counter
                    s += 1
                    pass #I want the loop to exit when it finds an element = 6

print 'Number of times one of the n dice show at least one 6: %.g' % s  
print 'Probability of at least 1 six from %.g dice is = %2.3f' % (m,s/float(n)) 
```

如果不清楚，我将编辑代码和问题。

输出示例：

```
Terminal > python one6_ndice.py 2 1000000
2 dice are thrown 1e+06 times
Number of times one of the n dice show atleast one 6: 3e+05
Probability of atleast 1 six from 2 dice is = 0.333 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:05:03.703

我认为问题出在这里：

```
 pass #I want the loop to exit when it finds an element = 6 
```

`pass`不会退出循环。 `pass`是无操作命令；它什么都不做。您可能想要`break`（退出循环）。

顺便说一句，不要调用你的列表`list`——这会破坏内置的`list`.

对于更紧凑的表达式，您可以考虑

```
sum(any(random.randint(1,6) == 6 for die in xrange(n)) for trial in xrange(m)) 
```

或者

```
sum(6 in (random.randint(1,6) for die in range(n)) for trial in range(m)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:05:17.197

您不必在列表上循环，也不必检查它的长度。只需喂它并检查其中是否有 6：

```
for i in xrange(n):
    list = []
    for q in xrange(m):
        r = random.randint(1, 6)
        list.append(r)
    if 6 in list:
        s += 1 
```

如果您希望您的程序更紧凑并且不想每次都提供一个列表，您可以`break`在获得“6”时停止生成：

```
for i in xrange(n):
    for q in xrange(m):
        if random.randint(1, 6) == 6:
            s += 1
            break 
```

# java - Java Ant build.xml 问题

> ID：13323081
> 
> 赞同：4
> 
> 时间：2012-11-10T14:53:35.347
> 
> 标签：java, ant, build.xml

我正在为其基本运行、清理和编译属性编写构建文件。这是我所拥有的：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<project default="compile">
   <description>
      Compile and run the Java files for Lab7
   </description>

   <target name="prob1" depends='compile'>
      <java classname='prob1'>
         <classpath path='./'/>
         <arg value='Gertrude'/>
         <arg value='Justin'/>
      </java>
   </target>

   <target name="prob2" depends='compile'>
      <java classname='prob2'>
         <classpath path='./'/>
         <arg value='28'/>
      </java>
   </target>

   <target name="prob3" depends='compile'>
      <java classname='prob3'>
         <classpath path='./'/>
         <arg value='2000'/>
      </java>
   </target>

   <target name="prob4" depends='compile'>
      <java classname='prob4'>
         <classpath path='./'/>
         <arg value='2'/>
      </java>
   </target>

  <target name="compile">
    <javac srcdir='./' includeantruntime="false"/>
  </target>

  <target name="clean">
    <delete>
        <fileset dir="./">
            <include name='*.class'/>
        </fileset>
    </delete>
  </target>
</project> 
```

我试图一次用不同的参数运行每个概率。就像在 prob1 中一样，我想用第一个名字运行它，然后用第二个名字再次运行它，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:55:26.593

是的，使用 antlib 可以实现类似的功能，它提供了广泛的功能，例如 for 循环、if 条件和宏。您可以定义一个宏，如

```
<macrodef name="call-cc">
   <attribute name="target"/>
   <attribute name="param1">
   <attribute name="param2">
   <element name="yourtask">
      <java classname='$name'>
        <classpath path='./'/>
        <arg value='@{param1}'/>
        <arg value='@{param2}'/>
      </java>
   </element>

</macrodef> 
```

然后你可以这样称呼它

```
<call-cc target="unittests" param1="bla" param2="blabla"/> 
```

[您可以在手册](http://ant.apache.org/manual/index.html)中阅读有关 antlib的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:25:06.693

正如@Moataz 和@jheddings 所解释的，ANT[宏定义](http://ant.apache.org/manual/Tasks/macrodef.html)是抽象这些重复和参数化操作的最佳方式。

以下工作示例还演示了对构建的一些进一步改进，例如使用属性来抽象项目文件的位置以及使用 ANT 路径来控制运行时类路径。

```
<project default="compile">

    <description>
    Example build file. Demonstrates the following
    - Properties
    - Build paths
    - Running java programs using a macrodef
    </description>

    <property name="src.dir"     location="src/main/java"/>
    <property name="build.dir"   location="build"/>
    <property name="classes.dir" location="build/classes"/>

    <path id="runtime.path">
        <pathelement location="${classes.dir}"/>
    </path>

    <macrodef name="call-prog">
        <attribute name="classname"/>
        <attribute name="arg1"/>
        <attribute name="arg2" default=""/>
        <sequential>
            <java classname='@{classname}' classpathref="runtime.path">
                <arg value='@{arg1}'/>
                <arg value='@{arg2}'/>
            </java>
        </sequential>
    </macrodef>

    <target name="compile">
        <mkdir dir="${classes.dir}"/>
        <javac destdir="${classes.dir}" srcdir='${src.dir}' includeantruntime="false"/>
    </target>

    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

   <target name="prob1" depends='compile'>
        <call-prog classname="org.demo.App" arg1="Justin" arg2="Gertrude"/>
   </target>

   <target name="prob2" depends='compile'>
        <call-prog classname="org.demo.App" arg1="28"/>
   </target>

   ..
   ..   
</project> 
```

最后，当您建立了在所有构建中使用的通用 maccodef 存储时，您可以考虑将它们打包为[ANTlib](http://ant.apache.org/manual/Types/antlib.html)。在我看来，在 ANT 中共享构建逻辑的最佳方式。对于这个简单的例子，这将是矫枉过正。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-10T16:07:10.380

您可以使用`antcall`或`macrodef`这样做：

```
<target name="run-prob" depends="compile">
  <fail unless="prob-class" />
  <fail unless="prob-args" />

  <java classname="${prob-class}">
    <classpath path="./"/>
    <arg line="${prob-args}"/>
  </java>
</target>

<target name="prob1" depends="compile">
  <antcall target="run-prob">
    <param name="prob-class">prob1</param>
    <param name="prob-args">justin gertrude</param>
  </antcall>
</target>

<target name="prob2" depends="compile">
  <prob class="prob2">
    <arg value='28'/>
  </prob>
</target>

<macrodef name="prob">
  <attribute name="class" />
  <element name="args" implicit="true" />
  <sequential>
    <java classname="@{class}">
      <classpath path="./"/>
      <args />
    </java>
  </sequential>
</macrodef> 
```

使用的好处`antcall`是您可以从命令行执行调用，如下所示：

```
ant -Dprob-class=prob3 -Dprob-args=2000 run-prob 
```

使用的好处`macrodef`是在ant文件中看起来更干净、更明显。当然，您也可以混合使用这两种方法并从您的`antcall`目标调用宏，反之亦然。

# iphone - [[CAShapeLayer alloc] init] 和 [CAShapeLayer layer] 的区别

> ID：13323087
> 
> 赞同：0
> 
> 时间：2012-11-10T14:54:30.627
> 
> 标签：iphone, ios, cocoa-touch, graphics, core-graphics

我注意到大多数人在初始化`CAShapeLayer`使用时：

```
CAShapeLayer *shapeLayer = [CAShapeLayer layer]; 
```

而不是使用初始化程序：

```
CAShapeLayer *shapeLayer = [[CAShapeLayer alloc] init]; 
```

我想知道使用其中任何一种有什么特别的区别，或者哪一种通常更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:12:44.727

第一个返回一个自动释放的对象。由于它是自动发布的，因此您不是它的所有者。当自动释放池（它所在的）被释放时，该对象将自动为您释放。

第二个返回一个具有 +1 保留计数的对象。您是该对象的所有者，因此`release`对它负责。但是 - 使用 ARC，您可能不需要`release`像我们那样打电话。

相关链接：

1.  [Objective C 方法族](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#family)
2.  [基本内存管理规则](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)

# python - Django ORM 是否定义了一个构造，该构造从给定表的指定列下的每一行生成表？

> ID：13323089
> 
> 赞同：1
> 
> 时间：2012-11-10T14:54:33.980
> 
> 标签：python, database, django, orm, django-models

Django ORM 是否定义了一个构造，该构造从给定表的指定列下的每一行生成表？

示例：假设我们有下表。

```
Table: Person
id|name  |age
-------------
1 |John  |60      
2 |Isaac |24    
3 |Fred  |50      
4 |Will  |35 
```

`name`现在我想要一个从in下的每一行创建一个表的对象`Person`。对于`John`and`Isaac`条目，这会让我：

```
Table: John
id|name  |age_diff
------------------
1 |Isaac |36
2 |Fred  |10
3 |Will  |25

Table: Isaac
id|name  |age_diff
-------------------
1 |John  |36
2 |Fred  |26
3 |Will  |11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:37:25.153

不，没有。库存 django 表是由“syncdb”命令创建的，它的 ORM 不处理表的动态添加或修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:02:56.407

据我所知，Django 的 ORM 无法为您创建表。您可以通过原始 SQL 语句做到这一点：

```
from django.db import connection, transaction
name = 'John'
cursor = connection.cursor()
cursor.execute('CREATE TABLE '+name+'(id int NOT NULL AUTO_INCREMENT,\
                name VARCHAR(30) NOT NULL, age_diff int NOT NULL,\
                PRIMARY KEY(id))')
transaction.commit_unless_managed() 
```

但这很丑陋。我认为至少在您的示例中创建这些额外的表是没有意义的。似乎是对存储的巨大浪费而没有任何收益。您可以在需要时在 Python 代码中创建年龄差异。这也会更加直观。

# php - 这个 MySql 和 PHP 代码有什么问题

> ID：13323090
> 
> 赞同：-2
> 
> 时间：2012-11-10T14:54:47.593
> 
> 标签：php, mysql

我在使用 php 的 mysql 中有一个奇怪的问题

我正在使用 PHP 的`mysql_query`函数运行此查询。

假设 view_counter = 30

```
UPDATE cini_gallery_data SET view_counter = view_counter+1 WHERE id = '10' 
```

在这个查询之后

view_counter 是 32 或者有时是 33 而不是 31

我也检查了重复的查询。

这有什么问题？太奇怪了。

编辑：我用过的 php 代码。

```
if(!mysql_query("UPDATE cini_gallery_data SET view_counter = view_counter+1 WHERE id='10'")){
    die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:56:23.900

当你编辑你的问题，并且你说你不能增加计数器时，我猜你已经设置了你的字段`id`或`view_counter``AUTO INCREMENT`

上一个答案：

这是错误的

```
WHERE = '10' 
```

您忘记在`WHERE`子句中添加列名，应该是

```
WHERE column_name = '10' 
```

# .htaccess - .htaccess 将所有子域请求重定向到当前子域

> ID：13323094
> 
> 赞同：0
> 
> 时间：2012-11-10T14:55:06.617
> 
> 标签：.htaccess, redirect, subdomain

我懂了 ：

```
-- root           # example.com 
   profile        # example.com/profile

----- subdomain1  # subdomain1.example.com
----- subdomain2  # subdomain2.example.com
----- subdomain3  # subdomain3.example.com 
```

问题是当来自 subdomain1.example.com/profile 或 subdomain1.example.com/about 的请求时，它们总是重定向到 example.com/profile

我希望来自子域的所有请求，例如：subdomain1.example.com/profile 或 subdomain1.example.com/profile 将重定向到当前请求而不是重定向到根域，例如：example.com/profile

如何使用 .htaccess 制作它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:07:02.187

您必须将子域的 DocumentRoot 更改为该子域的根。例如，/path/to/subdomain1.example.com 应该是 subdomain1 的 DocumentRoot。这可以在您的 httpd.conf 文件中完成。你有什么样的服务器？

```
<VirtualHost subdomain1> 
ServerName subdomain1.example.com
ServerAdmin you@subdomain1.example.com
ServerAlias subdomain1.example.com     
DocumentRoot /path/to/subdomain1.example.com  
</VirtualHost> 
```

# php - 正则表达式从自定义代码创建 html

> ID：13323095
> 
> 赞同：2
> 
> 时间：2012-11-10T14:55:09.950
> 
> 标签：php, html, regex

我有一个文本字段，用户可以在其中编写特定命令来获取一些 html。

例如：

```
Text Text Text Text

[*] first entry
[*] second entry
[*] 3rd...

Text Text 
```

此文本应使用正则表达式转换为如下内容：

```
text text

<ol>
 <li>FirstEntry</li>
 <li>Second</li>
 ..
</ol>

text text 
```

有什么建议吗？

与 entry 匹配的正则表达式是这样的：

```
/\[\*\].+/i 
```

**问题是如何**正确插入`<ol>`和`</ol>`

## 我的解决方案

我在想我可以解析所有文本行，当解析器遇到以 [*] 开头的第一行然后`<ol>`为`</ol>`

到目前为止，我已经制作了将单曲`[*] ...`转换为的脚本`<li> ...`

[http://codepad.org/yzRVupON](http://codepad.org/yzRVupON)

```
preg_replace('/\[\*\](.+)/i','<li>$1</li>',$str); 
```

我需要这个`<ol>`部分

## 我的实现

[http://codepad.org/NNgC6uko](http://codepad.org/NNgC6uko)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:07:02.527

用正则表达式进行这种解析可能不是要走的路；对于非常简单的场景可能没问题，但是您尝试添加的功能越多，它就越难——直到它变得无法维护。

我建议从各种 MarkDown 解析器那里借用解析技术；有关更多信息，请参阅[这些](https://stackoverflow.com/questions/5116187/how-to-parse-markdown-in-php) [问题](https://stackoverflow.com/questions/605434/how-would-you-go-about-parsing-markdown)（还有其他问题）。

回到最初的问题：如果您仅限于使用正则表达式，您可以尝试首先将整个“列表块”与类似的东西匹配

```
/^(\s*\[\*\].*?$)+/m 
```

（多行模式[修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)是必不可少的）

然后，您可以使用当前的正则表达式将匹配的文本分解为单独的列表项，然后用`<ol></ol>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:06:59.643

为什么不用**[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)**把标签放在两边呢？可能像下面这样。

```
$string = <<<EOF
Text Text Text Text

[*] first entry
[*] second entry
[*] 3rd...

Text Text
EOF;

$pattern = '/(\[\*\])([\d\D]+)(\[\*\].*)/';
$replacement = '<ol> ${1}${2}${3} </ol>';
$string = preg_replace($pattern, $replacement, $string);

$pattern = '/\[\*\](.+)/i';
$replacement = '<li>${1}</li>';

echo  preg_replace($pattern, $replacement, $string); 
```

输出：

```
Text Text Text Text

    <ol>
        <li> first entry </li>
        <li> second entry </li>
        <li> tag 3rd... </li>
    </ol>

Text Text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T15:42:20.147

这就是我的实现。工作代码：[http ://codepad.org/NNgC6uko](http://codepad.org/NNgC6uko)

这个脚本很容易定制，可以从命令到 HTML 的任何类型的翻译

```
function parseText($txt) {

    $lines = preg_split('/[\r\n]+/',$txt,null,PREG_SPLIT_NO_EMPTY);
    $newLines = array();

    $lastTag = '';
    foreach($lines as $k=>$v) {

        $currentTag = $v[0];

        //$newLine = $v;
        $newLine = preg_replace('/^\* (.+)$/','<li>$1</li>',$v);

        if ($currentTag=='*' && $lastTag != '*')
            $newLines[] = '<ol>';

        else if ( $lastTag == '*' && $currentTag != '*' )
            $newLines[] = '</ol>';  

        $newLines[] = $newLine;

        $lastTag = $currentTag;

    }

    print_r($newLines);
} 
```

# gps - 使用 GPS (android) 获取空位置

> ID：13323096
> 
> 赞同：0
> 
> 时间：2012-11-10T14:55:36.843
> 
> 标签：gps, locationmanager

我正在编写一个代码，它将通过 GPS 获取手机的位置。但是我得到一个 NULL 位置，这是为什么呢？这是我的代码：

```
final LocationManager manager = (LocationManager) context.getSystemService( Context.LOCATION_SERVICE );

if ( !manager.isProviderEnabled( LocationManager.GPS_PROVIDER ) ) {
                    Toast.makeText(context, "GPS not enabled", 1).show();
                    String provider = Settings.Secure.getString(context.getContentResolver(),Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

                    if(!provider.contains("gps")){ //if gps is disabled
                        final Intent poke = new Intent();
                        poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
                        poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
                        poke.setData(Uri.parse("3")); 
                        context.sendBroadcast(poke);

                        LocationManager locationManager;
                        String ccontext = Context.LOCATION_SERVICE;
                        locationManager = (LocationManager)context.getSystemService(ccontext);

                        String provider1 = LocationManager.GPS_PROVIDER;
                        Location location = locationManager.getLastKnownLocation(provider1);
                        String XYZ = updateWithNewLocation(location);
                        Toast.makeText(context, XYZ, 1).show();

                }

                else Toast.makeText(context, "GPS is enabled", 1).show();

    } 
```

这是 updatewithnewlocation 方法：

```
private String updateWithNewLocation(Location location) {
        // TODO Auto-generated method stub

        String latLongString;
        String myLocationString;
        if(location!=null){
            double lat = location.getLatitude();
            double longi = location.getLongitude();
            latLongString = "Latitude: "+lat+"  Longitude: "+longi;

        }
        else
        {
            latLongString = "Not found!";
        }

        return latLongString;
    } 
```

基本上，我打开 GPS，然后尝试获取手机的当前位置 - 但为什么我得到一个空位置？

请帮忙，我对android比较陌生！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:09:05.897

可能是您的 GPS 存在未知问题。您还可以使用最佳提供商

```
lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

  Criteria criteria = new Criteria();
  criteria.setAccuracy(Criteria.ACCURACY_FINE);
  String provider = lm.getBestProvider(criteria, true);
  Location mostRecentLocation = lm.getLastKnownLocation(provider); 
```

# android - 应用内购买移除广告

> ID：13323097
> 
> 赞同：39
> 
> 时间：2012-11-10T14:55:37.440
> 
> 标签：android, sdk

我已经在我的一个应用程序中实施了广告，我想制作一个应用内购买功能来删除它们。我该怎么做。

我在想一个简单的方法，就是在购买后通过隐藏广告来隐藏广告。那可以工作还是有更简单/更好的方法？

我不知道如何将应用内功能用于任何目的。任何人都可以告诉我编码的方式或阅读此内容的方法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-10T15:12:56.037

这取决于您首先插入广告的方式。如果您是通过代码完成的，那么只需`if(removed ads == false)`在插入广告的代码周围加上一个。

如果您是通过 XML 完成的，那么最好的方法是复制您的 XML，不使用 adview，并在您的代码中使用，如果围绕您的所有`setContentView(R.layout.example)`

这是我的意思的一个例子

```
if (adsDisabled == true){
    setContentView(R.layout.mainNoAds)
} else{
    setContentView(R.layout.main
} 
```

应用内购买 -

[http://developer.android.com/guide/google/play/billing/billing_overview.html](http://developer.android.com/guide/google/play/billing/billing_overview.html)

在这篇文章中，我假设您使用的是 admob，但所有公司都应该如此

最后一件事-使用`adView.View.GONE` **是**不好的做法**不要**这样做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T23:42:02.840

我还没有测试过这个。

看起来您也可以完全删除视图：

[正确禁用 AdMob 广告](https://stackoverflow.com/questions/4549401/correctly-disable-admob-ads)

# ios - 如何检查不可更新收据是否过期（iOS）

> ID：13323098
> 
> 赞同：2
> 
> 时间：2012-11-10T14:55:38.083
> 
> 标签：ios, xcode, in-app

我有一个免费的 iOS 应用程序，它具有一些“专业”功能，可以通过不可续订订阅启用 1 年。我找不到一个好的解决方案来测试许可证是否过期。我有购买日期的收据。我的第一种方法是与当前时间（[NSDate date]）进行非常基本的日期比较。但是如果用户更改设备日期时间，这个值就会改变，这很愚蠢。

有没有办法在不使用互联网连接的情况下测试这种许可证的到期情况？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T14:57:31.550

您始终可以存储购买后 1 年日期的值并对其进行检查，如果更新，则更新该日期。

# c# - Java 继承与 C# 继承

> ID：13323099
> 
> 赞同：15
> 
> 时间：2012-11-10T14:55:45.140
> 
> 标签：c#, java, inheritance, hierarchy

假设 Java 有这些分层类：

```
class A 
{
}
class B extends A
{
    public void m()
    {
        System.out.println("B\n");
    }
}
class C extends B
{
    public void m()
    {
        System.out.println("C\n");
    }
}
class D extends C
{
    public static void main(String[] args)
    {
        A a = new D();
        // a.m(); // doesn't work
        B b = new D();
        b.m();
        C c = new D();
        c.m();
        D d = new D();
        d.m();
    }
} 
```

这是 C# 中相同代码的（盲目）重复：

```
using System;
class A 
{   
}
class B : A
{
    public void M()
    {
        Console.WriteLine("B");
    }
}
class C : B
{
    public void M() // I need to use public new void M() to avoid the warning
    {
        Console.WriteLine("C");
    }
}
class D : C
{
    public static void Main(String[] args)
    {
        A a = new D();
        // a.M(); // doesn't work       
        B b = new D();
        b.M();
        C c = new D();
        c.M();
        D d = new D();
        d.M();
    }
} 
```

当我执行 Java 代码时，我得到了`C-C-C`而 C# 返回`B-C-C`.

对我来说，C# 的结果更有意义，因为引用 B 调用了它自己的方法。

*   Java 设计者决定打印`C-C-C`而不是打印的逻辑是`B-C-C`什么？我的意思是，为什么引用 B 使用 C 中的覆盖方法？这种方法有什么好处？
*   如何`B-C-C`像 C# 一样更改 Java 代码以打印出来？我的意思是，我怎样才能教 java 调用它使用的确切引用的方法？
*   如何更改 C# 代码以打印出来`C-C-C`？我的意思是，我怎样才能教 C# 调用覆盖方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-10T15:03:05.033

它用于[虚函数](http://en.wikipedia.org/wiki/Virtual_function)定义：

> 虚函数或虚方法是一种函数或方法，其行为可以在继承类中被具有相同签名的函数覆盖。这个概念是面向对象编程 (OOP) 的多态部分的一个非常重要的部分。

在 C# 中，您应该将该方法声明为 virtual 以便被覆盖，如 MSDN 中所示：

*   [C# 语言规范。虚拟关键字](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/virtual)
*   [C# 虚拟](http://www.dotnetperls.com/virtual)

由于该`M`方法不是虚拟的，因此`b.M()`即使`b`变量实际上是一个`D`实例，它也会执行。

在 Java 中，默认情况下，每个非静态方法都是虚拟的，因此当您覆盖一个方法（即使没有`@Override`注释）时，其行为`b.M()`将是`d.M()`继承该`c.M()`方法行为的行为。

> 如何像 C# 一样更改 Java 代码以打印 BCC？我的意思是，我怎样才能教 java 调用它使用的确切引用的方法？

你根本无法在 Java 中做到这一点。类中的`M`方法`C`会覆盖中的`M`方法`B`。添加`final`修饰符`B#M`只会使那个`C`或其他`B`孩子无法覆盖该`M()`方法。

> 如何更改 C# 代码以打印出 CCC？我的意思是，我怎样才能教 C# 调用覆盖方法？

`M`将类中的方法更改为并在`B`类中`virtual`覆盖它`C`：

```
class B : A
{
    public virtual void M()
    {
        Console.WriteLine("B");
    }
}
class C : B
{
    public override void M() // I need to use public new void M() to avoid the warning
    {
        Console.WriteLine("C");
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-10T14:59:30.407

1.  在java中，所有方法默认都是虚拟的。派生类中的方法会覆盖基类中的方法。在 C# 中它们不是。

2.  好像你不能这样做。但是您可以通过将其声明为 来防止派生类覆盖此方法`final`。

3.  `virtual`在基类中用关键字声明此方法，`override`在派生中用关键字声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T15:00:42.833

> Java 设计者决定打印 CCC 而不是 BCC 背后的逻辑是什么？

默认情况下，Java 使方法成为虚拟方法。过去有一种理解认为这是一种很好的做法，而在 Java 诞生的时候，可能正处于这种理解的顶峰。

如今——尽管许多人确实坚持它——也有更多的阻力（特别是当虚拟方法向类开放了意想不到的子类实现选择时）。

（注意，这里没有对错之分，每种方法都有其优点和缺点。）

> 如何像 C# 一样更改 Java 代码以打印 BCC？

宣布他们`final`。

> 如何更改 C# 代码以打印出 CCC？

在定义它们的类（在问题中）和子类中`virtual`声明它们。`abstract``B``override`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T14:59:42.777

> Java 设计者决定打印 CCC 而不是 BCC 背后的逻辑是什么？我的意思是，为什么引用 B 使用 C 中的覆盖方法？这种方法有什么好处？

看你从 D 类对象调用方法，它继承了 C 类的 M 方法。引用类型在 Java 中并不重要——重要的是哪个类引用了对象。

# jmeter - 使用 jmeter 测试多个网站

> ID：13323106
> 
> 赞同：1
> 
> 时间：2012-11-10T14:56:26.607
> 
> 标签：jmeter

如何使用 jmeter 测试 100 个不同的网站（来自 DMOZ）？

我认为可以通过将 jmeter 与脚本集成来完成。基本上，该脚本是告诉 jmeter 从文本或 csv 文件中读取 URL，并将 http 请求采样器更改为文件中的 URL 以运行测试，然后将测试结果保存到文件中。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:41:34.437

您可以根据以下几点来实现这一点：

**1.**在 csv 文件中准备您的测试 URL，例如，采用以下格式：

> ```
> url1
> url2
> ...
> urlN 
> ```

**2.**为您的脚本使用架构，如下所示：

```
线程组
    . . .
    While Controller 
    Condition: ${__javaScript("${testURL}"!="<EOF>",)} *// 读取 csv-file 直到 EOF * 
        CSV Data Set Config
        文件名：[带有 test-urls 的 csv 文件的路径]
        变量名称：testURL
        在 EOF 上回收？错误的
        在 EOF 上停止线程？真的
        共享模式：当前线程组
            HTTP 请求 *// 您的 http 调用*
            服务器名称或 IP：${testURL} *// 使用提取 URL 的变量*
        . . .

```

**3.**要保留测试结果，您可以使用例如[将响应保存到文件](http://jmeter.apache.org/usermanual/component_reference.html#Save_Responses_to_a_file)或为任何[jmeter 的开箱即用侦听器配置](http://jmeter.apache.org/usermanual/component_reference.html#listeners)[示例结果保存配置](http://jmeter.apache.org/usermanual/component_reference.html#Sample_Result_Save_Configuration)。

# python - 如何从 Python 制作 .deb 文件

> ID：13323107
> 
> 赞同：2
> 
> 时间：2012-11-10T14:56:34.593
> 
> 标签：python, wxpython, debian, deb

我想从我的 Python 文件中制作 .deb 包并包括图像文件。我的程序是一个使用[wxPython](https://en.wikipedia.org/wiki/WxPython)制作的简单聊天客户端。

如何制作易于制作的 .deb 包？

我的版本是 Ubuntu 12.04（Precise Pangolin），Python 是 2.7.3 版本，wxPython 是 2.8 版本。

我的文件是`wxchat.py`聊天客户端的三个图像 (JPEG) 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:39:21.297

如果您制作的 .deb 文件仅供内部使用（即不将其提交给 Debian 社区等），则有一个名为 stdeb 的工具：[https](https://github.com/astraw/stdeb) ://github.com/astraw/stdeb 。您可以使用`apt-get`:安装它`sudo apt-get install python-stdeb`。

如果你有`setup.py`，你可以通过这些命令创建一个 .deb 文件：

```
python setup.py --command-packages=stdeb.command sdist_dsc
cd deb_dist/packagename-versionname/
debuild -uc -us
cd - 
```

您可以在中指定依赖项`stdeb.cfg`：

```
[DEFAULT]
Depends:
    python-wxgtk2.8
# You can restrict versions of the packages
    python-wxtools (>= 2.8)
# Note that comments should start from the first character of the line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:21:31.280

互联网上有很多资源描述了如何做到这一点：

*   [Debian 的关于打包 Python 软件的 wiki 包](http://wiki.debian.org/Python/Packaging)
*   [关于制作 Python 包的 Ubuntu wiki 页面](https://wiki.ubuntu.com/PackagingGuide/Python)

您必须确保已包含运行包所需的依赖项。在您的情况下，它将是 wxPython 和您需要的任何其他包，它们不属于 Python 标准库的一部分。

如果您只想打包您的软件以进行分发，您可能需要考虑创建一个 Python 包并将其放在[http://pypi.python.org](http://pypi.python.org)上。[您可以在CheeseShopTutorial](http://wiki.python.org/moin/CheeseShopTutorial)中学习如何做到这一点。它往往是一个更简单的过程，这意味着您可以在 Debian 系统之外分发到基于 rpm 的 Linux 安装和 Mac、Windows。

# python - 阻止用户改变焦点（Tkinter）

> ID：13323109
> 
> 赞同：1
> 
> 时间：2012-11-10T14:56:49.717
> 
> 标签：python, tkinter

如何构建一个对话框，将焦点从父窗口中移开并强制用户输入？除非用户提供输入或按下取消按钮，否则父窗口将无法访问。所以它是一种消息框，但有一个输入字段。我找到了创建顶级窗口的顶级方法，但找不到阻止用户访问父窗口的方法。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T15:42:40.220

使窗口瞬态并不是整个解决方案。将焦点集中到自身的窗口称为“模态”窗口。关键是“grab_set()”方法。您可以拥有强制应用程序焦点或强制整个窗口系统焦点的模式窗口。

当您结合“模态”搜索“Tkinter”时，您可以找到更多信息。一击：[http ://tkinter.unpythonic.net/wiki/ModalWindow](http://tkinter.unpythonic.net/wiki/ModalWindow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:09:12.743

我不是很肯定，但看起来如果你创建一个继承自的新类`TopLevel`但将其附加到父类，然后调用`self.transient(parent)`你应该有一些接近你想要的东西。我假设它也会阻止对父窗口的输入。

> 主要的诡计是在构造函数中完成的；首先，transient 用于将此窗口与父窗口（通常是启动对话框的应用程序窗口）相关联。该对话框不会在窗口管理器中显示为图标（例如，它不会出现在 Windows 下的任务栏中），如果您将父窗口图标化，该对话框也将被隐藏

查看[此页面了解更多详情](http://effbot.org/tkinterbook/tkinter-dialog-windows.htm)

# php - Symfony 2 FosUserBundle：“500 内部服务器错误”

> ID：13323111
> 
> 赞同：2
> 
> 时间：2012-11-10T14:56:57.907
> 
> 标签：php, symfony, fosuserbundle

我在尝试使用 Symfony II 生产模式访问我的网站时遇到此错误（它在 DEV 模式下工作）

SF 日志错误：严重

> 在链配置的命名空间 FOS\UserBundle\Entity 中找不到类“Camplica\UserBundle\Entity\User”。我不能让我的网站工作..

当我使用开发模式访问我的网站时效果很好，但在使用生产模式时它不起作用。我无法解决我的问题，我看不到它来自哪里。

**应用程序/配置/路由.yml**

```
camplica_home:
    resource: "@CamplicaHomeBundle/Resources/config/routing.yml"
    prefix:   /CamPlica

fos_user_security:
    resource: "@FOSUserBundle/Resources/config/routing/security.xml"

fos_user_profile:
    resource: "@FOSUserBundle/Resources/config/routing/profile.xml"
    prefix: /CamPlica/profile

fos_user_register:
    resource: "@FOSUserBundle/Resources/config/routing/registration.xml"
    prefix: /CamPlica/register

fos_user_resetting:
    resource: "@FOSUserBundle/Resources/config/routing/resetting.xml"
    prefix: /CamPlica/resetting

fos_user_change_password:
    resource: "@FOSUserBundle/Resources/config/routing/change_password.xml"
    prefix: /CamPlica/change-password
# Internal routing configuration to handle ESI
#_internal:
#    resource: "@FrameworkBundle/Resources/config/routing/internal.xml"
#    prefix:   /_internal 
```

**Camplica/UserBundle/Entity/User.php**

```
<?php
// src/Sdz/UserBundle/Entity/User.php

namespace Camplica\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="Camplica_user")
 */
class User extends BaseUser
{

//....

} 
```

**应用程序/AppKernel.php**

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\AopBundle\JMSAopBundle(),
            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            **new Camplica\UserBundle\CamplicaUserBundle(),**
            new Camplica\HomeBundle\CamplicaHomeBundle(),
            new FOS\UserBundle\FOSUserBundle(),
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    }
} 
```

编辑：我不知道它是否与我的严重错误有关，但我在日志文件中得到了这个。request.INFO：匹配的路由“索引”（参数：“_controller”：“Camplica\HomeBundle\Controller\DefaultController::indexAction”，“_route”：“索引”）[] []

清除缓存后..我仍然得到同样的错误:(

# php - 当我使用一对一和多对一关系时，Doctrine2 严格尝试插入 NULL

> ID：13323118
> 
> 赞同：1
> 
> 时间：2012-11-10T14:58:19.290
> 
> 标签：php, doctrine-orm

**地点.yml**

```
manyToOne:
  excursions:
    targetEntity: Excursions
    inversedBy: places
    inverse: true
    cascade: ["ALL"]
    nullable: false
    joinColumn:
      name: idx
      referencedColumnName: place_id 
```

**游览.yml**

```
oneToOne:
  places:
    targetEntity: Places
    mappedBy: excursions 
```

游览有一个 place_id。所以`$exccursion->getPlaces()`只返回一行。

现在，当我尝试向`Places`表中插入一个值时，Doctrine2 说`Not null violation: 7 ERROR: null value in column "idx" violates not-null constraint`

我不知道为什么会这样。如果我删除`manyToOne`然后插入工作。但这一次`getPlaces()`是行不通的。

**更新**

问题是，我对数据库使用 mappedBy。我应该只这样做：

**地点.yml**

```
manyToOne:
  --remove-- 
```

**游览.yml**

```
oneToOne:
  places:
    targetEntity: Places
    joinColumn:
        name: place_id
        referencedColumnName: idx 
```

这解决了问题。但我通过随机尝试/播放发现了这一点。所以，我不知道为什么 :) 任何人都知道，请取悦`explain`我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T13:24:27.927

首先映射不正确。您不应该将`ManyToOne`in`Places.yml`和反面映射为`OneToOne`in `Excursions.yml`。这很可能是您遇到这些错误的原因。
另外，您希望将`Excursion`一个`Places`对象链接到它，但如果我正确理解您的问题，则`Places`可以有更多对象。`Excursions`所以你的映射应该是这样的：

```
# Places.yml
OneToMany:
    excursions:
        tagertEntity: Excursions
        mappedBy: places 
```

和

```
# Excursions.yml
ManyToOne:
    places:
        targetEntity: Places
        inversedBy: excursions
        joinColumn:
            name: places_id
            referencedColumnName: id 
```

注意：

1.  `ManyToOne`关系应该在只有另一个的实体内
2.  `OneToMany`关系应该在具有另一个对象的实体内部
3.  `joinColumn: name:`应该具有您要在数据库中创建的列的名称
4.  `joinColumn: referencedColumnName:`应该有来自目标实体的字段，用于映射关系（我建议您使用 id，因为它是唯一的）

创建此映射后，运行以下命令：

```
php app/console doctrine:generate:entities BUNDLE_PREFIX 
```

将是您捆绑`BUNDLE_PREFIX`名称的第一部分。这将生成所有正确的 getter 和 setter。不要忘记更新您的数据库模式：

```
php app/console doctrine:schema:update --force 
```

作为最后的建议，我建议（除非您打算这样做）您将实体名称更改为`Excursion`，并且`Place`每个对象应仅保留 1 个位置或游览。

# java - 单击树节点时如何打开新的div

> ID：13323126
> 
> 赞同：1
> 
> 时间：2012-11-10T14:59:26.240
> 
> 标签：java, javascript, jsf, jsf-2

我有这个 Primefaces 树：

***JSF 代码***

```
<h:form id="form">  

    <p:tree id="tree" value="#{TreeViewController.root}" var="node" dynamic="true" cache="true" animate="true">  
        <p:treeNode>  
            <h:outputText value="#{node}"/>  
        </p:treeNode> 
    </p:tree>  

</h:form> 
```

***托管豆***

```
private TreeNode root;  

    public TreeView() {  
        root = new DefaultTreeNode("Root", null);  
        TreeNode node0 = new DefaultTreeNode("Node 0", root);  
        TreeNode node1 = new DefaultTreeNode("Node 1", root);  
        TreeNode node2 = new DefaultTreeNode("Node 2", root);  

        TreeNode node00 = new DefaultTreeNode("Node 0.0", node0);  
        TreeNode node01 = new DefaultTreeNode("Node 0.1", node0);
        TreeNode node02 = new DefaultTreeNode("Node 0.2", node0);  
        TreeNode node03 = new DefaultTreeNode("Node 0.3", node0);
        TreeNode node04 = new DefaultTreeNode("Node 0.4", node0);  
        TreeNode node05 = new DefaultTreeNode("Node 0.5", node0);
        TreeNode node06 = new DefaultTreeNode("Node 0.6", node0);
        TreeNode node07 = new DefaultTreeNode("Node 0.7", node0);  
        TreeNode node08 = new DefaultTreeNode("Node 0.8", node0);  

        TreeNode node10 = new DefaultTreeNode("Node 1.0", node1);  
        TreeNode node11 = new DefaultTreeNode("Node 1.1", node1);  

        TreeNode node000 = new DefaultTreeNode("Node 0.0.0", node00);  
        TreeNode node001 = new DefaultTreeNode("Node 0.0.1", node00);  
        TreeNode node010 = new DefaultTreeNode("Node 0.1.0", node01);  

        TreeNode node100 = new DefaultTreeNode("Node 1.0.0", node10);  
    }  

    public TreeNode getRoot() {  
        return root;  
    } 
```

我很感兴趣如何打开一个包含节点附加信息的新 div。我想给用户浏览节点的机会。当他单击树右侧的节点以查看附加层中的附加信息时。我怎么能做到这一点？

`onNodeClick`我找到了在单击树节点时用于调用 JavaScript的 tag 属性。也许用JS我可以打开一个新的div？

***不工作的解决方案*** 我测试了这段代码，但它不工作：

```
<h:form id="form">  

    <p:tree id="tree" value="#{TreeViewController.root}" var="node" dynamic="true" cache="true" animate="true">  
        <p:ajax event="select" listener="#{TreeViewController.onNodeSelect}" update="outputComponent" />
        <p:treeNode>                            
            <h:outputText value="#{node}"/>  
        </p:treeNode> 
    </p:tree>

    <p:outputPanel id="outputComponent">
        <h:outputText value="#{TreeViewController.onNodeSelect}" />
    </p:outputPanel>

</h:form>  

public String onNodeSelect(NodeSelectEvent event) {
        String node = event.getTreeNode().getData().toString();

        return node;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:35:00.373

一切都在文档中（下面的代码是它的摘录）。您可以使用 onNodeClick 调用自定义 JavaScript 方法来显示您的“div”，或者，这就是我的建议，您使用 ajax 事件。

```
<p:ajax event="select" listener="#{treeBean.onNodeSelect}" update="outputComponent" /> 
```

然后您可以在服务器端处理事件：

```
public void onNodeSelect(NodeSelectEvent event) {
    String node = event.getTreeNode().getData().toString();
    // prepare data you want to show
} 
```

然后有一个输出组件，例如：

```
<p:outputPanel id="outputComponent">
    <!-- reference the bean in which you put your informatnoi in the onNodeSelect listener-->
</p:outputPanel> 
```

# c++ - 2个值的容器（对于每个浮点数一个可操作的整数）

> ID：13323131
> 
> 赞同：0
> 
> 时间：2012-11-10T14:59:44.960
> 
> 标签：c++, arrays, multidimensional-array, double, containers

我需要包含几个（n）个不同浮点值的整数。

*   例如：对于浮点数 1,465658，我需要包含数字 1，并且我需要能够随时操作整数。

在 C++ 中是否有一些容器或者我必须做一些多维数组（如果是的话）？

像：浮动[1,465658]=3；新浮动[1,98978]=0；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:01:07.687

`std::map`? 只要你的钥匙是独一无二的。

```
std::map<double, int> myMap;
myMap[1.2465468] = 1; 
```

请注意，根据值的粒度，您可能会遇到一些浮点舍入不精确，并且最终可能会覆盖现有条目。

# gnu - Gnu autotools 缺少文件 depcomp

> ID：13323132
> 
> 赞同：5
> 
> 时间：2012-11-10T14:59:49.063
> 
> 标签：gnu, autotools, automake

我正在尝试编写一个使用自动工具构建的程序，但是当我尝试制作它时遇到了问题。Automake 似乎依赖于一个名为 depcomp 的文件。我想知道这个文件是做什么的，我应该用什么填充它/我应该如何制作它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T16:19:54.163

`depcomp`在您运行时由 Automake 自己安装`automake --install`（或者更好的是，当您运行时`autoreconf -vfi`）。它用于跟踪**依赖关系，作为****编译**的副作用。

# php - php将变量添加到url而不删除退出

> ID：13323135
> 
> 赞同：0
> 
> 时间：2012-11-10T15:00:13.213
> 
> 标签：php, url, pagination, parameter-passing

> **可能重复：**
> [在分页期间保留 url 参数](https://stackoverflow.com/questions/9666909/keeping-url-parameters-during-pagination)

目前我的分页将变量传递为`"?page=1"`. 例如，url 变量`"?page=1"`是动态变化的`"?page=3"`等等。问题是，当我对我的网站进行一些操作时，例如 as `"?action=show_post`or`?action=show_categories`等​​”。因此，如果我单击我的分页号，该变量`"?action=show_post"`将从我的 url 中删除。

我的问题是：如何将变量添加到一个`url`并且会像这样`"?action=anything&page=anything"`和“任何仅用于术语或寓言的键，并且会动态改变值”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:09:20.440

如果您的链接类似于`<a href="http://domain/page.php?page=2">`...，请这样做：

```
$querystring=$_SERVER['QUERY_STRING'];
<a href="http://domain/page.php?page=2&<?php echo $querystring ?>> 
```

您在当前 URL ( `$_SERVER['QUERY_STRING']`) 中获取查询参数，然后将它们添加到链接中的目标 URL。就这些。那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:32:48.750

是的，您需要使用 Hidden $_POST 方法。输入类型=“隐藏”值= php echo $page['number']; ETC - - ！

# python - 求解二次和三次多项式的三次函数？

> ID：13323140
> 
> 赞同：2
> 
> 时间：2012-11-10T15:00:49.640
> 
> 标签：python, math, python-3.x, polynomial-math

我有一个正在编写的程序，用户可以选择在求解二次或三次多项式的三次函数之间进行选择。选择后，程序会应用许多公式，包括：求解二次判别式、二次公式、二次多项式公式、Cardano 的三次多项式类比方法和标准三次公式（基本上，第一此[页面](http://www.math.vanderbilt.edu/~schectex/courses/cubic/)上的四个公式）。

这是我的代码：

```
import math

def deg3():
    print("This is a third degree polynomial calculator.")
    print("Please enter four numbers.")
    a = int(input())
    b = int(input())
    c = int(input())
    d = int(input())

# Apply Cardano's compressed method to find x root, broken up into different variables.
p = (-1 * b)/(3 * a)
q = p ** 3 + (b * c - (3 * a * d))/ (6 * (a ** 2)) 
r = c / (3 * a)

x = (q + (q**2 + (r - p**2)**3) **1/2) **1/3 + (q + (q**2 + (r - p**2)**3) **1/2) **1/3 + p
print("The root is:", x)

# Applies final cubic formula, and returns.
total = (a * x**3) + (b * x**2) + (c * x) + d
total = round(total, 3)
return total

# If discr > 0, then the equation has three distinct real roots.
# If discr = 0, then the equation has a multiple root and all its roots are real.
# If discr < 0, then the equation has one real root and
# two nonreal complex conjugate roots. 
```

现在它很容易返回一个总数。计算是正确的，但我仍在尝试围绕类似的公式进行思考。等式的判别部分是什么？我如何找到潜在的根，就像我使用二次公式一样？可能是一个简单的问题，但我想更好地理解这个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:28:45.817

首先，您的三次函数与您链接到的网站上的方程之间存在*许多*差异。其中最值得注意的是：

1.  您的操作顺序已关闭：如下行：

    ```
    big = (-1 *( b**3 / 27 * a**3) + (b * c / 6 * a**2) - (d / 2 * a)) 
    ```

    应该：

    ```
    big = (-1 *( b**3 / (27 * a**3)) + (b * c / (6 * a**2)) - (d / (2 * a))) 
    ```

    否则，像这样的术语`27 * a**3`不会出现在分母中 - 它会在分母中被视为 27 以及`a**3`之后。

2.  即使您链接到的方程式中有两个，您也永远不会包含立方根。

3.  你这样做`x * 2 - small`了，但是等式中加在一起的两项并不相同——一项是加号，另一项是减号。

但是，即使您解决了该函数的所有问题，在尝试求解许多三次方程时，您仍然会遇到数学域错误。请注意您的链接中的这一段：

> 但是如果我们将卡尔达诺公式应用到这个例子中，我们使用 a=1, b=0, c=-15, d=-4，我们发现我们需要在结果计算中取 -109 的平方根。最终，负数的平方根将在稍后的计算中抵消，但如果不额外讨论复数，微积分学生将无法理解该计算。

Solving cubic equations requires dealing with complex numbers (though only temporarily- as noted, they'll cancel out), so you can't use `math.sqrt` to solve it. You might be interested in the [cmath](http://docs.python.org/2/library/cmath.html) package.

# python - 在类声明中调用的函数如何？

> ID：13323146
> 
> 赞同：3
> 
> 时间：2012-11-10T15:01:26.283
> 
> 标签：python, metaprogramming, zope, zope.interface

有这个代码：

```
>>> class Foo:
...     zope.interface.implements(IFoo)
...
...     def __init__(self, x=None):
...         self.x = x
...
...     def bar(self, q, r=None):
...         return q, r, self.x
...
...     def __repr__(self):
...         return "Foo(%s)" % self.x 
```

显然，调用`zope.interface.implements`以某种方式改变了类的属性和行为`Foo`。

这是怎么发生的？如何在我的代码中使用这种方法？

示例代码是[zope.interface](http://docs.zope.org/zope.interface/README.html#declaring-implemented-interfaces)模块的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T11:23:05.263

## 详细的“发生了什么”

该`zope.interface.implements()`函数检查帧堆栈并更改构造中的类的`locals()`名称空间（python ）。python 语句中的`dict`所有内容都在该命名空间中执行，结果形成类主体。`class`

该函数为类命名空间添加了一个额外的值，`__implements_advice_data__`其中包含一些数据（您传递给函数的接口和`classImplements`可调用对象，稍后将使用这些数据。

`__metaclass__`然后，它通过在命名空间中添加（或更改预先存在的）键来为所讨论的类添加或链接元类。这样可以确保以后每次创建类的实例时，都会首先调用现在安装的元类。

事实上，这个元类（类顾问）有点狡猾；在您第一次创建实例后，它会再次自行*删除。*它只是在从类中删除键或将其替换为原始键（它调用它以创建第一个类实例）之后，简单地调用在`__implements_advice_data__`您传递给原始函数的接口中指定的回调。回调会自行清理，它会从类中删除属性。`implements()``__metaclass__``__metaclass__``__implements_advice_data__`

## 短版

总之，所做的所有工作`zope.interface.implements()`是：

*   添加传递的接口，以及对类 ( `__implements_advice_data__`) 中特殊属性的回调。
*   确保在您第一次使用特殊元类创建实例时调用回调。

最后，它在道德上等同于像这样定义你的接口：

```
class Foo:
    def __init__(self, x=None):
        self.x = x

    def bar(self, q, r=None):
        return q, r, self.x

    def __repr__(self):
        return "Foo(%s)" % self.x

zope.interface.classImplements(Foo, IFoo) 
```

除了最后一次调用被推迟到您第一次创建`Foo`.

## 但*为什么*要走这么远？

最初开发时`zope.interface`，Python 还没有类装饰器。

`zope.interface.classImplements()`需要在创建类之后作为函数单独调用，并且类主体*内*`zope.interface.implements()`的调用提供了关于类实现哪些接口的更好文档。您可以将它放在类声明的顶部，每个人在查看类时都可以看到这条重要信息。在类声明*之后*进行调用并不是那么明显和清晰，对于长类定义，很容易完全错过它。*`classImplements()`*

 **[PEP 3129](http://www.python.org/dev/peps/pep-3129/)终于在语言中添加了类装饰器，它们被添加到 python 2.6 和 3.0；`zope.interface`最初是在 python 2.3 (IIRC) 时代开发的。

现在我们*确实*有类装饰器，`zope.interface.implements()`但已被弃用，您可以改用`zope.interface.implementer`类装饰器：

```
@zope.interface.implementer(IFoo)
class Foo:
    def __init__(self, x=None):
        self.x = x

    def bar(self, q, r=None):
        return q, r, self.x

    def __repr__(self):
        return "Foo(%s)" % self.x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:17:35.483

[阅读源代码，卢克](http://www.codinghorror.com/blog/2012/04/learn-to-read-the-source-luke.html)：

> [http://svn.zope.org/zope.interface/trunk/src/zope/interface/declarations.py?rev=124816&view=markup](http://svn.zope.org/zope.interface/trunk/src/zope/interface/declarations.py?rev=124816&view=markup)
> 
> ```
> def _implements(name, interfaces, classImplements):
>     frame = sys._getframe(2)
>     locals = frame.f_locals
> 
>     # Try to make sure we were called from a class def. In 2.2.0 we can't
>     # check for __module__ since it doesn't seem to be added to the locals
>     # until later on.
>     if (locals is frame.f_globals) or (
>         ('__module__' not in locals) and sys.version_info[:3] > (2, 2, 0)):
>         raise TypeError(name+" can be used only from a class definition.")
> 
>     if '__implements_advice_data__' in locals:
>         raise TypeError(name+" can be used only once in a class definition.")
> 
>     locals['__implements_advice_data__'] = interfaces, classImplements
>     addClassAdvisor(_implements_advice, depth=3) 
> ```**

# iphone - 通过 UITableView 从 NSMutableArray 中删除项目

> ID：13323147
> 
> 赞同：0
> 
> 时间：2012-11-10T15:01:27.857
> 
> 标签：iphone, objective-c, uitableview, nsmutablearray, plist

***你好***

我想通过 UITableView 从 NSMutableArray 中删除项目，但是应用程序崩溃了。崩溃是“ `0 objc_msgSend`”。

这是我的代码伙计们：

```
- (void)viewDidLoad
{
    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    path = [basePath stringByAppendingPathComponent:@"favoris.plist"];
    dict = [[NSArray arrayWithContentsOfFile:path] mutableCopy];
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    [dict removeObjectAtIndex:indexPath.row];

    [self.tableView reloadData];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:17:38.787

EXEC_BAD_ACCESS 绝对意味着有一个僵尸，所以我认为你的内存管理有一些奇怪的地方，这可能是由于你如何实例化数组而发生的。在 Instruments 中运行 Zombies 工具绝对会为您提供更多信息，但可以尝试以下方法：

（另一个建议，你为什么将 NSArray 的变量命名为 dict？）。

试试这个代码：

```
- (void)viewDidLoad
{
    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    path = [[basePath stringByAppendingPathComponent:@"favoris.plist"] retain];
    dict = [[NSMutableArray alloc] initWithContentsOfFile:path];
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    [dict removeObjectAtIndex:indexPath.row];
    [dict writeToFile:path atomically:YES]; 
    [self.tableView reloadData];
} 
```

这个建议的基础是我怀疑调用`copy`自动释放的对象会产生意想不到的后果。

# django - 需要关于 Django 缓存策略的建议

> ID：13323150
> 
> 赞同：0
> 
> 时间：2012-11-10T15:01:56.797
> 
> 标签：django, caching

我正在部署我的第一个主要 Django 应用程序，并且需要一些缓存建议。

我的站点使用 Google 的分析 API 来显示站点周围的“热门内容”列表。这些 API 调用很慢（2-5 秒），所以我将它们的结果缓存了一个小时。然后我有一个 cron 作业，它每 15 分钟运行一次，并从 Google 重新请求数据。我意识到将它缓存一个小时并每 15 分钟更新一次似乎有点奇怪，我想这是一种愚蠢的故障保护。

我将网站的主要输出缓存了几个小时（它不会比这更频繁地更新）。当然，这意味着无论我多久调用一次 API，呈现“流行内容”的模板部分都不会在该时间段内更新。

我查看了 Django 的`{% cache %}`模板标签并尝试将我的“流行内容”模板视图包装在一个最小缓存的包装器中（1 秒缓存时间，用于测试）。这可行（如果我随后手动调用 Google API 并重新加载我的页面，模板会更改），但我不确定它是否会按我的意图工作：基本上，我不想缓存整个页面几秒钟（而不是几个小时），但我希望它在我从 Google 获取新数据时更新。

任何人都可以在这里给我一个正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:45:07.283

如果我正确地回答了您的问题，那么当获取新数据时，您的异步作业必须使相关的缓存键无效。

在您的模板中，您有以下内容：

```
{% cache 6000 some-page-identifier %} 
```

在您的异步任务中，您使数据无效，如下所示：

```
def fetch_data():
    # Fetch data first
    # Then invalidate the cached item
    cache.delete('some-page-identifier') 
```

# powershell - 通过具有管理员权限的 Start-Process 启动时延迟关闭 PowerShell 窗口

> ID：13323157
> 
> 赞同：1
> 
> 时间：2012-11-10T15:03:07.043
> 
> 标签：powershell, admin, uac, privileges

代码（不是我的实际代码，但它也会产生相同的行为）：

```
If (-NOT ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole(`
    [Security.Principal.WindowsBuiltInRole] "Administrator"))
{
    Write-Warning "The script tries to re-run itself using Administrator privileges.";
    try {
        Start-Process powershell -ArgumentList ($MyInvocation.MyCommand.Path) -Verb runAs;
    }
    catch [InvalidOperationException] {
        Write-Warning "You canceled the privilege request. This script WON'T WORK, please re-run it!";
        Read-Host;
        Exit;
    }
    Exit;
}

# Here comes the code which will be run if started with Admin rights
Read-Host; 
```

当我接受 Windows UAC 并通过 关闭出现的 PS 窗口时`[X]`，窗口会在 3-5 秒内消失，而不是直接关闭！

我使用的是64 位**Windows 8 Pro。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:49:08.593

这是一个`Read-Host`问题。它不仅影响 64 位操作系统，我刚刚在 x86 和 x64 Windows 7 Pro 上进行了验证。要重现，只需`Read-Host`在任何 PowerShell 控制台上运行并关闭窗口。

更新：

我刚刚在各种版本的 Windows 和 bit-ness 上进行了测试，我发现结果并不一致。`Read-Host`有时似乎在每次运行时表现不同。

# java - 使用 SNMP4J 设置对等地址

> ID：13323158
> 
> 赞同：1
> 
> 时间：2012-11-10T15:03:31.617
> 
> 标签：java, ip, spoofing, snmp4j, snmp-trap

我正在尝试使用 SNMP4J 模拟几个虚拟 SNMP 设备。因此，在发送陷阱时，我试图修改始发设备的 IP 地址，但我不确定如何。我知道有一个 setPeerAddress() 方法，但它似乎不起作用。事实上，我什至不确定 SNMP4J 是否可能或支持它。

或者，是否可以使用 Java 虚拟地欺骗和 IP 地址？

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:13:02.630

我几乎 100% 确定 Java 不会允许您欺骗 IP 数据包的发件人地址。

根据操作系统允许的情况，可以使用对 JNI 方法的调用来执行此操作。例如，在 Windows 上运行时，我已经在 J​​Pcap 库中看到过它。

（不是托管在[http://jpcap.sourceforge.net/](http://jpcap.sourceforge.net/)上的流行 jpcap ，而是以前托管在 [http://netresearch.ics.uci.edu/kfujii/Jpcap/doc的 winpcap 的不相关的同名包装器/index.html](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/index.html)。我刚刚注意到它似乎已经从网络上消失了。）

编辑：关于 SNMP4j 的 API，我只能在 CommandResponderEvent 和 ResponseEvent 类中找到 setPeerAddress() 方法。这两个似乎都代表传入数据（对您发送的请求的响应），因此尝试以这种方式更改发件人地址对您没有用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-23T15:06:03.350

代替欺骗，在转发/发送之前将 IP 地址 varbind 添加到陷阱 PDU。

```
String ip_addr = cmdRespEvent.getPeerAddress().toString().split("/")[0];

pdu.add(new VariableBinding(SnmpConstants.snmpTrapAddress,
                    new IpAddress(ip_addr))); 
```

# android - 用相机拍照后intent为null

> ID：13323159
> 
> 赞同：1
> 
> 时间：2012-11-10T15:03:36.167
> 
> 标签：android, android-intent, android-widget

我试图在拍照后通过相机的意图传递文件位置和 ID。

这发生在这段代码中：

```
 btaddphoto.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Integer vraagnr = Integer.parseInt(lblQuestionNr.getText().toString());

                String _path = Environment.getExternalStorageDirectory().toString() + File.separator + "photo_" + vraagnr.toString() + ".png";
                File file = new File(_path);
                Uri outputFileUri = Uri.fromFile(file);

                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
                intent.putExtra("view", newview.Id);

                ((Activity) ctx).startActivityForResult(intent, newview.Id);

            }
        }); 
```

在此代码中存在意图，即不为空。

在此代码中，数据为空：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    } 
```

为什么数据为空？和 OnClick 事件中的 Intent 不是同一个 Intent 吗？

rg，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:25:17.223

**不**，这与`Intent`您在**onClick**事件中发送的不同。这`Intent`作为来自相机活动的响应（即*android.media.action.IMAGE_CAPTURE*）返回。在这里（在**onActivityResult**中），您需要检查**数据**对象是否存在，`null`然后没有从相机活动返回的数据。

# java - 在java中获取子属性

> ID：13323161
> 
> 赞同：0
> 
> 时间：2012-11-10T15:03:57.633
> 
> 标签：java

是否可以在 java 的 main 方法中从子类访问属性？例如，在扩展类中，我有一个属性 height 和一个方法：

```
 public String getName()
 {
 return name;
 } 
```

但是我无法从 main 方法访问名称。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:08:28.637

您必须创建内部类的*实例*`Child`才能获取其`name`字段，因为`main`方法是`static`：

```
public class Parent {

    class Child {
        String name;

        public String getName() {
            return name;
        }
    }

    public static void main(String[] args) {
        String name = new Parent().new Child().getName();
    }
} 
```

`getName()`本身不能声明为`static`静态方法，只能在静态或顶级类型中声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:07:44.947

name 是私人会员吗？您只能访问 Main 中任何类（无论是基类还是子类）的公共成员。

如果您没有访问成员而是访问方法 getName 本身，那么
如果 name 在基类中未定义为私有，则 getName() 应该可以工作。如果是其他东西——受保护的、公共的或默认的包声明，那么它应该可以工作。

# oracle - 主键字段的 Oracle 序列不会检索当前在 Hibernate 中插入的值

> ID：13323165
> 
> 赞同：1
> 
> 时间：2012-11-10T15:04:36.307
> 
> 标签：oracle, spring, hibernate, jsp, oracle10g

我有以下代码尝试为我的 Oracle (10g) 数据库`COUNTRY_ID`中的表的主键列获取生成的序列值。`COUNTRY`

```
Country c=new Country();

c.setCountryName(request.getParameter("txtCountryName"));
c.setCountryCode(request.getParameter("txtCountryCode"));
Zone z=(Zone) session.get(Zone.class, new BigDecimal(request.getParameter("zoneId")));
c.setZone(z);
session.save(c);

session.flush();
//session.refresh(c);
System.out.println(c.getCountryId()); //Attempts to display the sequence value.
session.getTransaction().commit(); 
```

此代码中的此语句`System.out.println(c.getCountryId());`尝试在插入完成后显示当前生成的序列值。

Oracle 表中的序列生成值以~~2 的倍数插入，即~~像这样的 414、416、418、420...，而不是像 414、415、416、417、418、419、420 ​​这样的链中插入它们。 ..

假设Oracle表中当前插入的序列值为`426`，这条语句`System.out.println(c.getCountryId());`显示`425`（而在`COUNTRY_ID`Oracle表的列中，插入的值为`426`）。

**据推测，由于某些原因，该序列似乎被执行了两次**。

* * *

在我的 Hibernate POJO 中，我指定了`countryId`主键列，如下所示，

```
@Id
@Column(name = "COUNTRY_ID")
@SequenceGenerator(name = "CountryIdSequence", sequenceName = "COUNTRY_SEQ")
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "CountryIdSequence")
private long countryId; 
```

在`Country.hbm.xml`映射文件中，该列`countryId`映射如下。

```
<id name="countryId" type="long">
  <column name="COUNTRY_ID" precision="35" scale="0"/>
  <generator class="sequence">
    <param name="sequence">COUNTRY_SEQ</param>
  </generator>
</id> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T18:48:29.040

我确实有一个针对`COUNTRY`由 Oracle GUI 工具自动创建的表的触发器，用于将序列与主键列相关联`COUNTRY_ID`。

The sequence was being executed twice once by Hibernate and again by the trigger. I disabled the trigger temporarily and the approach worked as intended.

# java - 哈希机制真的安全吗？

> ID：13323167
> 
> 赞同：0
> 
> 时间：2012-11-10T15:04:55.107
> 
> 标签：java, passwords, md5, password-hash

好吧，我一直看到（和关注）人们说使用散列机制将密码存储在数据库中。我真的很担心它安全吗？

让我们举个例子。

假设我是黑客，我得到了你的数据库名称、ID 和密码。现在我可以完全访问您的数据库。

人们所说的密码应该被散列，因为如果有人入侵，黑客就可以看到它们。

所以如果我运行查询，`select id, password FROM userDetails`我将得到如下数据

## 选项1：没有哈希

```
++++++++++++++++++++++++++++
+   id    +    password    +
++++++++++++++++++++++++++++
+  id01    +  password01   +
+  id02    +  password02   +
++++++++++++++++++++++++++++ 
```

## 选项 2：使用哈希

```
++++++++++++++++++++++++++++
+   id    +    password    +
++++++++++++++++++++++++++++
+  id01    +  hasValue01   +
+  id02    +  hasValue02   +
++++++++++++++++++++++++++++ 
```

好吧，我还是要说，散列是不安全的。为什么我会在下面用Java代码告诉你。

```
PreparedStatement pst = conn.prepareStatement("SELECT id, password FROM userDetails");
ResultSet rs = pst.executeQuery();
String randomPassword = "";
StringBuffer sb;
boolean myPassCheck = true;
while (rs.next()) {
    myPassCheck = true;
    while (myPassCheck) {
        // this will generate random password
        randomPassword = generateRandomPassword();
        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] array = md.digest(randomPassword.getBytes());
        sb = new StringBuffer();
        for (int i = 0; i < array.length; ++i) {
            sb.append(Integer.toHexString((array[i] & 0xFF) | 0x100).substring(1, 3));
        }
        if (sb.toString().equals(rs.getString(2))) {
            // this is password
            myPassCheck = false;
            System.out.print("id=" + rs.getString(1) + ", password=" + sb.toString());
        }
    }
} 
```

这样，我可以打印用户名和密码。（我知道我必须生成随机密码，直到我没有找到密码）。然而这样一来，散列密码机制也失效了。

**另外我相信这个世界上有解密器可以将散列数据转换为实际数据。**

因此，我在想

## 散列机制是否安全？

* * *

## 编辑 1

**我说的不仅仅是 MD5。我选择 MD5 仅用于示例目的。我说的是任何安全密码机制**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:07:16.180

不，仅使用哈希，尤其是仅将 MD5 应用于密码时，是不安全的，因为：

*   如果您只是转换密码（通常几乎是一个常用词），则使用常用密码数据库很容易对其进行测试。所以总是使用盐，最好是用户记录的其他常量部分的组合。有时您甚至可以通过在 Google 中输入哈希来找到哈希的来源...
*   [MD5 容易发生冲突](http://en.wikipedia.org/wiki/MD5#Collision_vulnerabilities)，因此即使使用哈希，也更喜欢 SHA 256 或更好
*   MD5 计算速度很快，在蛮力攻击中测试速度也很快

使用散列机制但是：

*   采用更好的哈希函数，例如[SHA-256 或 SHA-512](http://en.wikipedia.org/wiki/SHA256)
*   散列一个构造的字符串，例如用户名+[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)+密码（你可以使用一个常量盐，只要它不被其他程序使用，对于大多数用途来说已经足够了）

当您注册某人（或某人更改他的密码）时的过程是

1) 将字符串 s 构建为 s=username+salt+password (或类似函数)

2) 将哈希构建为 SHA256(s)

3) 将用户名、salt（如果不是常量）和哈希值存储在数据库中

在对用户进行身份验证时，您以相同的方式构建哈希（使用用户提供的用户名和密码以及您在数据库中拥有的盐）并将用户名和哈希与您在数据库中的内容进行比较。你不要反转散列函数，因为那是不可行的。

* * *

现在关于您的代码：您的方法似乎是生成所有可能的密码，直到一个具有与您尝试猜测的密码相同的 MD5 为止。这不适用于合理的密码，因为没有足够的时间来测试 15 个字符的所有组合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T15:08:53.067

密码永远不会以明文形式存储。至少他们不应该这样，除非你正在使用世界上最天真的程序员构建世界上最不安全的系统。

相反，密码存储为哈希函数的输出。即使攻击者获得了您密码的散列版本的访问权限，也不可能仅从散列值重构密码。

但是可以使用彩虹表攻击密码的散列值：每个可能的字符组合的巨大的、预先计算的散列值。攻击 PC 肯定可以即时计算所有这些哈希值，但是利用预先计算的大量哈希值表可以使攻击的速度提高几个数量级——假设攻击机有足够的 RAM 来存储整个表（或至少大部分）在内存中。像这样的表称为`rainbow table`

这是一个经典的时间记忆权衡，正是你期望黑帽攻击者采取的那种作弊捷径。

用于以下字符集的数据库：`ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_+=~[]{}|\:;"'<>,.?/` 最大密码长度为 14 的数据库大小为 64GB。

如果您对密码哈希进行了加盐处理，攻击者将无法`rainbow table`对您使用一般攻击，“密码”和“美味咸密码”的哈希结果将不匹配。除非你的黑客不知何故知道你所有的散列都是“美味的咸”。

即使这样，他或她也必须专门为您生成自定义彩虹表。

请阅读 Thomas Ptacek关于此主题的[出色且内容丰富的文章。](http://chargen.matasano.com/chargen/2007/9/7/enough-with-the-rainbow-tables-what-you-need-to-know-about-s.html)它更详细地介绍了密码散列的具体细节。

**最后是您问题的答案：**

**不，它不安全，但您可以尽最大努力使其尽可能安全。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T15:07:29.237

不。散列密码不安全，但比不这样做更安全。如您所见，如果您有足够的时间和硬件资源，此类散列密码可能很容易被解密。这就是为什么我们经常使用盐来使我们的密码更安全。盐是以某种方式与真实密码合并的东西，您存储此类字符串的哈希码。攻击者可能能够破解加密，但他会收到混合了盐的密码。对于使用所谓的“彩虹表”来解密密码的人来说，这是一个很好的保护。不幸的是，它仍然是易碎的。在这里您可以找到更多信息： http: [//arstechnica.com/security/2012/08/passwords-under-assault/](http://arstechnica.com/security/2012/08/passwords-under-assault/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T15:09:03.553

不，它们不是 100% 安全的，特别是如果攻击者有哈希数据库。更好的方法是使用加盐密码，因为这会使哈希数据库变得毫无用处。

使密码更安全的另一种方法是对其进行多次哈希处理，这也会降低哈希数据库的有效性。

正如其他帖子所提到的，选择一种更安全、更昂贵的算法，如 sha-512。

# javascript - 变量没有被 JavaScript 中的 JSON 生成值替换？

> ID：13323168
> 
> 赞同：2
> 
> 时间：2012-11-10T15:04:54.687
> 
> 标签：javascript, json, variables

```
_postData : function ()
{
    var fieldName = "day";

    var day = /*returns an object from the back end business service*/

    var value = day.getValue();

    if (value)
    {
        return {
            fieldName : value
        };
    }
} 
```

问题是，即使 fieldName 实际上是“day”，当 JSON 有效负载被返回并打印时，我看到的字面意思是：

```
{
   fieldName: "16"
} 
```

因此，出于某种原因，正在打印变量的名称，而不是实际的字符串值。我想要的是：

```
{
   day: "16"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:06:51.733

这不是 JSON，它是 Javascript 对象文字。当您在 Javascript 对象文字中的属性左侧放置一个符号时，该符号用作属性名称，而不是该名称的变量可能评估为的任何字符串。换句话说，`{fieldName: 16}`完全等价于`{"fieldName": 16}`

而不是这样做：

```
return {
     fieldName : value
}; 
```

你可以这样做：

```
var obj = {};
obj[fieldName] = value;
return obj; 
```

在第二个中，如果`fieldName`是一个包含字符串的变量`"foo"`，那么生成的对象将如下所示`{foo: 16}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:10:28.057

正如 Kiyura 所说，这不是定义对象的方式。您当前的代码本质上是创建一个具有`fieldName`属性而不是`day`属性的对象。相反，您需要执行以下操作：

```
_postData : function ()
{
    var fieldName = "day";

    var day = /*returns an object from the back end business service*/

    var value = day.getValue();

    if (value)
    {
        var ret={};
        ret[fieldName]=value;
        return ret;
    }
} 
```

# c# - 从 ListBoxItem 中获取选定的值，返回 null

> ID：13323169
> 
> 赞同：0
> 
> 时间：2012-11-10T15:04:56.650
> 
> 标签：c#, windows-8

我正在填充的 LisBox 有问题，当我点击一个项目时，它给了我错误

> “价值不在预期范围内。”

当我在获取所选值的行上放置一个断点时，它说它的值为空，我之前在 xaml 中静态声明了列表项，它没有问题。

有什么可以帮助我的吗？

```
private void listbox_tapped(object sender, TappedRoutedEventArgs e)
    {
        ListBoxItem selected = (lbLetter.SelectedValue as ListBoxItem);

        int listitem = lbLetter.SelectedIndex;

        if (lbLetter.Items.Count != 0)
        {

            lbWord.Items.Add(selected);
        }

    }

   private void RandomizeListbox()
    {
        List<char> values = new List<char>();

        for (int i = 0; i<=MAXLETTERS; i++)
        {
            values.Add(RandomLetter());
        }
        lbLetter.ItemsSource = values;
    }

    public static char RandomLetter()
    {
        return alphabet[random.Next(alphabet.Length)];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:21:47.447

可能会发生这种情况，因为 char 数组中有几个相同的值。尝试这个：

```
for (int i = 0; i <= MAXLETTERS; i++)
{
    var c = RandomLetter();
    if(!values.Contains(c))
        values.Add(c);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:00:59.460

Without testing it, I can assure you that the following line is incorrect:

```
ListBoxItem selected = (lbLetter.SelectedValue as ListBoxItem); 
```

The SelectedValue property does not return a ListBoxItem object, it returns a string. See [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selectedvalue.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selectedvalue.aspx) for more information.

# javascript - 在 Android 浏览器中上传照片

> ID：13323170
> 
> 赞同：1
> 
> 时间：2012-11-10T15:05:03.220
> 
> 标签：javascript, android, html, upload, ios6

问题很简单：我想创建一个网页，当在 Android 设备上的浏览器中查看时，允许用户从现有照片中选择图像或使用相机拍照，然后上传照片（大概是作为多部分表单帖子的一部分）。

iOS6 完全支持 HTML 表单元素的此功能（例如`<input type="file" />`。Android 设备上的浏览器是否可以使用类似的功能？如果是……如何？

# windows - 由 EnumDesktops 命名的所有桌面都无法通过 OpenDesktop 出现错误 2“找不到文件”

> ID：13323174
> 
> 赞同：3
> 
> 时间：2012-11-10T15:05:39.533
> 
> 标签：windows, winapi, desktop

我列举了我系统上的桌面（我正在使用 SysInternals `Desktops`，所以我知道我有额外的）使用：

```
EnumDesktops(Nothing, AddressOf EnumDesktopsProc, Nothing) 
```

使用这些声明：

```
Private Declare Auto Function EnumDesktops Lib "User32" (ByVal hWinSta As IntPtr, ByVal edp As EnumDesktopProc, ByVal lParam As IntPtr) As Boolean
Private Declare Auto Function OpenDesktop Lib "User32" (<MarshalAs(UnmanagedType.LPTStr)> ByVal DesktopName As String, ByVal dwFlags As Integer, <MarshalAs(UnmanagedType.Bool)>ByVal fInherit As Boolean, ByVal dwDesiredAccess As AccessMask) As DesktopHandle

Private desktopNames As New List(Of String)

Private Delegate Function EnumDesktopProc(<MarshalAs(UnmanagedType.LPTStr)>ByVal DesktopName As String, ByVal lParam As IntPtr) As Boolean

Private Function EnumDesktopsProc(
          ByVal DesktopName As String,
          ByVal lParam As IntPtr
        ) As Boolean

    desktopNames.Add(DesktopName)
    Return True
End Function 
```

我检索到：

```
"WinSta0"
"Service-0x0-3e7$"
"Service-0x0-3e4$"
"Service-0x0-3e5$"
"SAWinSta"
"__X78B95_89_IW"
"Service-0x0-119d1e$"
"Service-0x0-4e05f$" 
```

当我试图打开它们时：

```
OpenDesktop(DesktopName, 0, False, AccessMask.DESKTOP_ENUMERATE) 
```

（[这里](http://msdn.microsoft.com/en-us/library/ms682575.aspx)和[这里](http://msdn.microsoft.com/en-us/library/aa379607.aspx)的数据在哪里复制`AccessMask`很大，并且是一个）`Enum``DesktopHandle``SafeHandle`

他们都返回`NULL`（`Nothing`）并`GetLastWin32Error`返回`2 "The system cannot find the file specified."`。为什么？

我检查了没有效果的替代声明`OpenDesktop`和不同的`AccessMask`值（除非声明实际上是错误的）。我注意到在向 中添加“路径”时可能会出现不同的错误`DesktopName`，特别是`161 "The specified path is invalid."`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:05:39.533

的文档`EnumDesktops`至少是误导性的，如果不是错误的话。传递`NULL`( `Nothing`) 作为第一个参数是返回“会话 0”窗口站的桌面。您需要使用`GetProcessWindowStation()`. 即将上面的第一行更改为：

```
Private Declare Auto Function GetProcessWindowStation Lib "User32" () As IntPtr

EnumDesktops(GetProcessWindowStation(), AddressOf EnumDesktopsProc, Nothing) 
```

[`EnumDesktops`（文档](http://msdn.microsoft.com/en-us/library/ms682614.aspx)中添加了一条用户评论，但我错过了，所以我认为其他人也可能。）

请注意，文档`GetProcessWindowStation` [明确表示](http://msdn.microsoft.com/en-us/library/ms683225.aspx)它不需要关闭，因此不需要包装在`SafeHandle`.

# php - 从 db 类访问 PDO 的 execute()

> ID：13323178
> 
> 赞同：0
> 
> 时间：2012-11-10T15:05:42.687
> 
> 标签：php, class, pdo

如何从 db 类中访问 PDO 的 execute() 方法？下面是我的类和方法的片段：

```
class db extends PDO {
        public $memcache;

        function execute($params='') {
            try {$foo=parent::execute($params);}
            catch (PDOException $e) {echo $e->getMessage();}
            return $foo;
        }

        function __construct($db='server_en',$host='localhost',$uz='root',$pw='') {
            try {
                parent::__construct("mysql:dbname=$db;host=$host",$uz,$pw);
                parent::setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
            }
            catch (PDOException $e) {echo $e->getMessage();}
            $this->memcache=new Memcache;
            $this->memcache->connect('127.0.0.1', 11211) or die('Could not connect to Memcache server');
        }
    } 
```

我尝试执行以下代码：

```
var_dump($db->execute('INSERT INTO `foo`(`bar`) VALUES (0)')); 
```

并得到以下错误：`Fatal error: Call to undefined method PDO::execute() in ...`。

谁能提供一个简单的例子来说明如何解决这个问题？我对 PDO 和类都相当缺乏经验，所以答案越简单越好。

PS 我复制*一些*PDO 方法的原因是当 PDO 过时时更容易迁移到新的数据库处理程序。这不是过早的优化；这从一开始就让生活更轻松。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:10:02.740

您只能调用[`::execute()`PDOStatement](http://php.net/manual/en/pdostatement.execute.php)，而不是 PDO 本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:09:54.720

[`PDO`](http://www.php.net/manual/en/class.pdo.php)没有`execute`方法。它被称为[`exec`](http://www.php.net/manual/en/pdo.exec.php)。`PDOStatement`确实有一个[`execute`](http://www.php.net/manual/en/pdostatement.execute.php)方法，但是你需要先创建这样一个对象。

# aptana - 我可以获取 2 天前以前打开的文件的列表吗？

> ID：13323181
> 
> 赞同：1
> 
> 时间：2012-11-10T15:06:12.933
> 
> 标签：aptana, aptana3

我需要知道是否有办法查看过去 2 天内使用 aptana studio 编辑了哪些文件。我一直在尝试使用谷歌，但到目前为止还没有运气。

有谁知道这是否可行以及如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:33:50.950

您的文件是否受版本控制？

使用 Git，可以通过以下命令轻松跟踪更改：

```
git diff ... 
```

或者

```
git whatchanged --since '11/10/2012' --until '11/12/2012' 
```

# html - 下拉文本应该是绿色而不是红色

> ID：13323182
> 
> 赞同：0
> 
> 时间：2012-11-10T15:06:39.343
> 
> 标签：html, css, date-comparison

我有一个下拉菜单，其中显示考试的名称、日期和时间，我想做的是，如果从当前日期或时间过去了考试日期，则文本显示为红色，否则文本显示为绿色。

我遇到的问题是，如果当前日期是 2012 年 10 月 11 日（即今天），并且考试的日期和时间如下：

10-11-2012, 16:00:00

它以红色而不是绿色显示文本。问题是它没有识别当前时间，它认为既然是当前日期，它应该是红色的，但是因为当前时间还没有过去，所以它应该是绿色的。

数据库将日期存储为 2012-11-10，将数据库中的时间存储为 16:00:00。在提到的下拉列表中，它存储为：10-11-2012, 16:00:00

下面是代码：

```
<style>
.red{ color:red; }
.green{ color:green; }
</style> 
```

...

```
 $now = date("Y-m-d h:i:s");
    while ( $sessionqrystmt->fetch() ) {
       if(strtotime($now) > strtotime($dbSessionDate)){
             $class = 'red';
        } else {
             $class = 'green';
        }
        $sessionHTML .= sprintf("<option value='%s' class='%s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), $dbSessionTime) . PHP_EOL;
        } 
```

$now 应该是当前日期和时间，$dbSessionDate 应该是 10-11-2012

**更新：**

```
$sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
$sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

$now = date("Y-m-d H:i:s");
echo strtotime($now).'<br>';
echo strtotime('10-11-2012, 16:00:00');
while ( $sessionqrystmt->fetch() ) {
   if(strtotime($now) > strtotime($dbSessionDate)){
         $class = 'red';
    } else {
         $class = 'green';
    }
    $sessionHTML .= sprintf("<option value='%s' class='%s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL;
    }

$sessionHTML .= '</select>';

$assessmentform = "<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post'>
<p><strong>Assessments:</strong> {$sessionHTML} </p>   
</form>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:55:48.697

代码似乎没问题。尝试：

```
$now = date("Y-m-d h:i:s");
echo strtotime($now).'<br>';
echo strtotime('10-11-2012, 16:00:00'); 
```

并检查服务器时间。

**更新：**

代替：

```
$sessionHTML .= sprintf("<option value='%s' class='%s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL; 
```

和：

```
$sessionHTML .= sprintf("<option value='%s' style='color: %s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL; 
```

以防止css错误。

或更换：

```
strtotime($now) > strtotime($dbSessionDate) 
```

和：

```
strtotime($now) < strtotime($dbSessionDate) 
```

# c - 源注入和程序崩溃

> ID：13323184
> 
> 赞同：1
> 
> 时间：2012-11-10T15:06:57.803
> 
> 标签：c

今天，我读了一篇文章（http://www.codeproject.com/KB/threads/winspy.aspx）来描述源注入，并尝试编写一个程序来做同样的事情。但是我将源注入 winmind 并且它崩溃了。我找不到崩溃的原因。

我的代码：

1.描述注入数据结构

`typedef LRESULT (WINAPI *MESSAGEBOX)(HWND, LPCWSTR, LPCWSTR, UINT);`

 ````
typedef struct {
HWND hwnd;
    UINT type;
    MESSAGEBOX fnMessageBox;            // pointer to user32!SendMessage
    BYTE pbText[64 * sizeof(TCHAR)];    // text param
    BYTE pbTextCap[64 * sizeof(TCHAR)]; // caption param
} INJDATA, *PINJDATA; 
```` 

`2.被注入的代码`

 ````
static int WINAPI ThreadFunc (INJDATA *pData)
{
    int nXferred = 0;

    nXferred = pData->fnMessageBox( pData->hwnd, (LPCWSTR)pData->pbText, (LPCWSTR)pData->pbTextCap, pData->type );
    pData->pbText [63 * sizeof(TCHAR)] = __TEXT('\0');
    pData->pbTextCap [63 * sizeof(TCHAR)] = __TEXT('\0');       

    return nXferred;
}

// This function marks the memory address after ThreadFunc.
// int cbCodeSize = (PBYTE) AfterThreadFunc - (PBYTE) ThreadFunc.
static void AfterThreadFunc (void) {
} 
```

3.将ThreadFunc和INJDATA复制到远程进程，并启动远程ThreadFunc的执行

```
int CallMessageBox (HANDLE hProcess, HWND hWnd, LPCWSTR pbString, LPCWSTR pbStringCap)
{   
    HINSTANCE   hUser32;
    INJDATA     *pDataRemote;   // the address (in the remote process) where INJDATA will be copied to;
    DWORD       *pCodeRemote;   // the address (in the remote process) where ThreadFunc will be copied to;
    HANDLE      hThread = NULL; // the handle to the thread executing the remote copy of ThreadFunc;
    DWORD       dwThreadId = 0;

    int       nCharsXferred = 0; // number of chars retrieved by WM_GETTEXT in the remote thread;
    DWORD dwNumBytesXferred = 0; // number of bytes written/read to/from the remote process;

    __try {
        hUser32 = GetModuleHandle(__TEXT("user32"));
        if (hUser32 == NULL)
            __leave;

        // Initialize INJDATA and then 
        // copy it to the remote process
        INJDATA DataLocal = {
            hWnd,
            MB_OK,
            (MESSAGEBOX) GetProcAddress(hUser32, "MessageBoxW")         
        };

        if( DataLocal.fnMessageBox == NULL )
            __leave;        

        wcscpy((LPWSTR) DataLocal.pbText, (LPCWSTR) pbString);
        wcscpy((LPWSTR) DataLocal.pbTextCap, (LPCWSTR) pbStringCap);

        // 1\. Allocate memory in the remote process for INJDATA
        // 2\. Write a copy of DataLocal to the allocated memory
        pDataRemote = (INJDATA*) VirtualAllocEx( hProcess, 0, sizeof(INJDATA), MEM_COMMIT, PAGE_READWRITE );
        if (pDataRemote == NULL)
            __leave;
        WriteProcessMemory( hProcess, pDataRemote, &DataLocal, sizeof(INJDATA), &dwNumBytesXferred );

        // Calculate the number of bytes that ThreadFunc occupies
        const int cbCodeSize = ((LPBYTE) AfterThreadFunc - (LPBYTE) ThreadFunc);

        // 1\. Allocate memory in the remote process for the injected ThreadFunc
        // 2\. Write a copy of ThreadFunc to the allocated memory
        pCodeRemote = (PDWORD) VirtualAllocEx( hProcess, 0, cbCodeSize, MEM_COMMIT, PAGE_EXECUTE_READWRITE );       
        if (pCodeRemote == NULL)
            __leave;
        WriteProcessMemory( hProcess, pCodeRemote, &ThreadFunc, cbCodeSize, &dwNumBytesXferred );

        // Start execution of remote ThreadFunc
        hThread = CreateRemoteThread(hProcess, NULL, 0, 
                (LPTHREAD_START_ROUTINE) pCodeRemote,
                pDataRemote, 0 , &dwThreadId);
        if (hThread == NULL)
            __leave;

        WaitForSingleObject(hThread, INFINITE);

        }
    __finally {

        if ( pDataRemote != 0 )
            VirtualFreeEx( hProcess, pDataRemote, 0, MEM_RELEASE );

        if ( pCodeRemote != 0 )
            VirtualFreeEx( hProcess, pCodeRemote, 0, MEM_RELEASE );

        if ( hThread != NULL ) {
            GetExitCodeThread(hThread, (PDWORD) &nCharsXferred);
            CloseHandle(hThread);           
        }
    }

    // Return the number of chars retrieved 
    return nCharsXferred;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:21:36.693

不幸的是，这个描述已经过时了。最新版本的 Windows 有一些称为 ASLR（地址空间布局随机化）的保护。它保护它们免受基本代码注入的影响，并确保每个进程都有自己的地址空间。并非所有进程都启用了 ASLR，但在大多数情况下，旧技术不适合。

编辑：注入的代码是否被执行然后你崩溃了？如果是这样，可能是因为 EIP 寄存器增加了，但在注入的 shellcode 中没有更多指令可以执行。您将指令指针设置为分配的内存并执行代码，但在该过程之后只是没有更多有效的指令可以执行。为了防止这种情况，我会分配更多的内存并编写一个简单的 shellcode，它会简单地无限循环并防止 EIP 在内存中执行一些随机的事情。`

# java - 我可以使用本地存储为 ram 运行 java 程序吗？

> ID：13323195
> 
> 赞同：0
> 
> 时间：2012-11-10T15:07:47.797
> 
> 标签：java, amazon-ec2, ram

所以，我的 RAM 非常低，如果我使用它的大部分，程序就会被杀死。我的问题是：我可以使用本地存储为 ram 运行 java 程序吗？我正在使用亚马逊 ec2 托管。它是一个微型服务器。

# vb.net - < .... > 在 VB.NET 中做什么？

> ID：13323198
> 
> 赞同：3
> 
> 时间：2012-11-10T15:08:27.747
> 
> 标签：vb.net

下面的代码有什么作用？什么是 <...> 符号？

```
<Global.System.Serializable(),_  
 Global.System.Xml.Serialization.XmlSchemaProviderAttribute("GetTypedTableSchema")> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T15:14:16.937

它是应用[属性](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)的符号。

> 属性提供了一种将元数据或声明性信息与代码（程序集、类型、方法、属性等）相关联的强大方法。属性与程序实体关联后，可以在运行时使用一种称为反射的技术来查询该属性。

和：

> 属性可以放置在大多数任何声明中，尽管特定属性可能会限制其有效的声明类型。在 C# 中，您可以通过将属性名称（用方括号 ([]) 括起来）放在它所适用的实体的声明上方来指定属性。在 Visual Basic 中，属性用尖括号 (< >) 括起来。它必须出现在应用它的元素之前，在同一行。

* * *

在您的代码中，您将类型（或方法或属性）标记为可序列化，并且该类型的 XmlSchemaProviderAttribute 设置为`"GetTypedTableSchema"`.

这两个是有助于序列化类型的元数据。

# javascript - 如何使用 Windows 商店应用程序 (Javascript) 打开和操作 XML 文件？

> ID：13323200
> 
> 赞同：0
> 
> 时间：2012-11-10T15:08:31.980
> 
> 标签：javascript, xml, windows-8

我正在尝试使用 xml 文件来存储我的 Metro 风格应用程序的用户自定义。我想知道如何加载文件、获取文件中的某些元素并编写新元素。

我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:18:12.807

尝试：

```
function GetXmlHttpObject(){
    var xmlHttp=null;
    try{
        xmlHttp = new XMLHttpRequest();
    }
    catch(e){
        try{
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch(e){
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    return xmlHttp;
} 
```

打开 xml（而不是远程 url，使用本地路径）

```
 function openXML(){
       xmlHttp.onreadystatechange = stateChanged;
        xmlHttp.open("GET", item.url,true);
        xmlHttp.send(null);
    }; 
```

最后在标签上工作

```
 function stateChanged() {
      if(xmlHttp[item.key] != null )
            if (xmlHttp[item.key].readyState == 4 ) {
                var xmlHeader = xmlHttp[.responseXML.documentElement.getElementsByTagName("TAG");
            }
    } 
```

# sql - Oracle SQL 中的终止分号

> ID：13323205
> 
> 赞同：2
> 
> 时间：2012-11-10T15:08:55.397
> 
> 标签：sql, oracle

我最近开始学习 Oracle SQL，对是否需要终止分号（或者，实际上，它是否是您正在使用的特定数据库程序的功能）有点困惑。

在工作中，我必须使用 DBVisualizer，并且总是有一个终止分号，但在“Oracle SQL 示例”一书中，它始终缺乏。有人可以启发我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:30:31.423

[这](https://dba.stackexchange.com/questions/431/what-is-the-significance-of-a-semicolon-at-the-end-of-sqlplus-commands)是来自 dba.stackexchange 的类似问题。接受的答案指出本地实例的命令在返回时执行，而对服务器的多行命令在分号上执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:46:37.693

四十多年来，分号是终止符还是分隔符的问题一直是计算机语言中的一个混乱问题。比较 Pascal 和 Java。

如果您接受分号作为 SQL 中的分隔符，那么在交互式 sql 中可能不需要它，就像在 Oracle 的 SQL/plus 解释器中一样。但是 SQL 解析器确实有它的工作要做。SQL 显然不是为了方便编写解析器而设计的。

考虑一下：

```
select 
    College_Name,
    City
from 
    Colleges 
```

解析器如何知道命令不会继续执行以下操作？

```
where
     State = 'CA' 
```

如果还可以输入由某种开始-结束对括起来的命令序列，那么解析器的工作就会变得更加困难。分号极大地帮助了解析器。

在交互式 SQL 的某些方言中，按两次 Enter 键可以触发执行。在其他情况下，为此目的使用了一个特殊的命令，如“go”。

# binary-tree - 是否可以在此 BST 中添加浮点数

> ID：13323212
> 
> 赞同：0
> 
> 时间：2012-11-10T15:09:58.327
> 
> 标签：binary-tree, binary-search-tree

最近有人问我这个问题，我不得不承认我有点难为情和尴尬。我有一个由来自网络的输入数字列表构成的树说

> 3,2,4,1,5,6,7

. 树长这样

![在此处输入图像描述](../Images/99cf8b32988a6878dae7567cadb0b2c5.png)

问题是如果我现在有输入`3.5`，我应该把它放在哪里？那么我把它放在哪里呢？这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:13:53.050

如果我正确理解您的要求，您将`3.5`作为具有值的节点的左子节点`4`，因为`3.5`大于`3`和小于`4`。

BST 具有以下属性（取自[wikipedia](http://en.wikipedia.org/wiki/Binary_search_tree)）：

1.  节点的左子树仅包含键小于节点键的节点。
2.  节点的右子树只包含键大于节点键的节点。
3.  左右子树也必须是二叉搜索树。
4.  不能有重复的节点。

# javascript - 将 Pikachoose 设置为仅显示缩略图

> ID：13323217
> 
> 赞同：1
> 
> 时间：2012-11-10T15:10:40.003
> 
> 标签：javascript, jquery, jquery-plugins

我想修改[pikachoose](http://www.pikachoose.com/)以仅显示缩略图。我已经稍微修改了代码，这就是我所拥有的：

[http://i.stack.imgur.com/deQdG.png](http://i.stack.imgur.com/deQdG.png)

这是我在 base.css 中修改的

```
/* Style the thumbnails */
.pika-thumbs {
    padding: 0 16px;
    height: 75px;
}

.pika-thumbs li {
    width: 144px;
    height: 74px;
    margin: 10px 0 0 17px;
    padding: 0;
    overflow: hidden;
    float: left;
    list-style-type: none;
    padding: 3px;
    margin: 0 5px;
    background: #fafafa;
    border: 1px solid #e5e5e5;
    cursor: pointer;
}

.pika-thumbs li .clip {
    position: relative;
    height: 100%;
    text-align: center;
    vertical-align: middle;
    overflow: hidden;
}

/*for the tool tips*/
.pika-tooltip {
    font-size: 12px;
    position: absolute;
    color: white;
    padding: 3px;
    background-color: rgba(0,0,0,0.7);
    border: 3px solid black;
}

.pika-counter {
    position: absolute;
    bottom: 45px;
    left: 15px;
    color: white;
    background: rgba(0,0,0,0.7);
    font-size: 11px;
    padding: 3px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}

/* If using user thumbnails there's a pause while the new large image loads. This is the loader for that */      
.pika-loader {
    background: url(loading.gif) 3px 3px no-repeat #000;
    background-color: rgba(0,0,0,0.9);
    color: white;
    width: 60px;
    font-size: 11px;
    padding: 5px 3px;
    text-align: right;
    position: absolute;
    top: 15px;
    right: 15px;
} 
```

我必须在[jquery.pikachoose.js](http://www.pikachoose.com/)中修改什么才能做到这一点？

我正在处理的网站是[http://brassds.com/](http://brassds.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:36:38.713

假设您指的是[http://brassds.com/servicios.html](http://brassds.com/servicios.html)，[Pikachoose](http://www.pikachoose.com/versions/)的文档指出：

> PikaChoose 将为您创建缩略图，但如果您想使用自己的缩略图，这很容易。您将图像的 src 设置为缩略图图像。然后，您将添加一个带有完整尺寸图像的 ref 属性（不是 rel！），如下例所示。PikaChoose 将自动拉入全尺寸图像。

```
<img src="thumbnail.jpg" ref="fullsize.jpg" > 
```

进一步假设`Servicios-pequena1.jpg`指向缩略图并且`Servicos-1.jpg`是全尺寸图像，您应该能够将源修改为如下所示：

```
<ul id="pikame" class="jcarousel-skin-pika">
    <li><a href="#"><img src="images/trabajos/Servicios-pequena1.jpg" ref="images/trabajos/Servicos-1.jpg" alt=""/></a><span></span></li>
    <li><a href="#"><img src="images/trabajos/Servicios-pequena2.jpg" ref="images/trabajos/Servicos-2.jpg" alt=""/></a><span></span></li>
    <li><a href="#"><img src="images/trabajos/Servicios-pequena3.jpg" ref="images/trabajos/Servicos-3.jpg" alt=""/></a><span></span></li>
    ...
</ul> 
```

Pikachoose应该为您[设置](http://www.pikachoose.com/versions/)缩略图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T15:29:37.043

这对我有用：

```
.pika-stage {
    display: none;
} 
```

将它添加到 PikaChoose 库的样式表中，并确保它在 pikachoose() 函数启动之前加载。

.pika-stage 元素是由 PikaChoose 类自动创建的，因此，虽然您可以删除它，但这更容易。

此外，您可能想用旋转木马调用 pikachoose() 来赋予一点天赋......

```
$("#id").PikaChoose({carousel:true}); 
```

# ruby-on-rails - Sass::SyntaxError 未定义变量

> ID：13323220
> 
> 赞同：2
> 
> 时间：2012-11-10T15:11:07.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, sass, asset-pipeline

我是 Asset Pipeline 的新手，所以如果我做错了，请告诉我。

使用带有 SASS 的 Rails 3.2。我有一个配置部分，它定义了一堆我想在我的 scss 文件中使用的 SASS 变量。根据[本指南](http://guides.rubyonrails.org/asset_pipeline.html)，我先导入`configuration`，然后`bonus`。但是，我一直在 bonus.css.scss 中得到`Sass::SyntaxError`说法。`Undefined variable: "$darkRed"`我究竟做错了什么？

应用程序.css.scss

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
*/

@import "configuration";
@import "bootstrap";
@import "bonus"; 
```

_configuration.css.scss

```
//colors
$darkRed: #B94A48;
$controlColor: #777; 
```

奖金.css.scss

```
div.give-inline-help .help-inline
  {
  color: $darkRed;
  font-size: 15px;
  font-family: MuseoSans-300;
  padding-left: 0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-07T20:14:31.697

所以我碰到了这个，想给出一个更准确的答案：

*非下划线*`@import`命名文件下游链中的任何ed 文件都将以.*`Sass::SyntaxError Undefined Variable`*

 *使用 Sass，如果你想覆盖变量，你必须确保使用不间断的下划线文件链。

就这么简单，虽然有时很容易通过！

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-10T15:27:58.480

您在以下位置导入名称错误的 scss 文件`application.css.scss`：

代替：`@import "configuration";`

和：`@import "_configuration";`

或将您的`_configuration.css.scss`文件重命名为`configuration.css.scss`*

# css - 网络字体和使用本地

> ID：13323221
> 
> 赞同：2
> 
> 时间：2012-11-10T15:11:07.497
> 
> 标签：css, fonts, font-face, webfonts

我已经搜索并搜索以尝试找到答案，但似乎找不到答案。

我想知道你是否使用`src: local()`我理解这个检查来查看用户是否在下载之前先安装了字体！？

但是我似乎无法找到的是，当第一次下载字体时，这会将字体永久存储在用户计算机上（因为用户下次不需要再次下载）还是不久之后它会被删除吗？

我想知道，因为人们不太可能在没有从网站下载字体的情况下安装字体，因此如果它不会长时间存储，那么我认为没有必要使用`src: local()`.

我也不确定我是否*真的*`src: local`应该使用“笑脸[”](http://paulirish.com/2010/font-face-gotchas/#smiley)黑客！？

Font Squirrel 似乎不使用它们，所以我觉得这很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:18:19.320

CSS3 字体草案中给出的[定义是`src: local(...)`](http://www.w3.org/TR/css3-fonts/#src-desc)指“本地可用的副本”，没有额外的说明。在实践中显然发生的事情——这可以很简单地测试——它需要是安装的字体，而不是下载的字体，甚至不应该期望它作为系统中的普通文件存在。

与此完全独立的是，字体数据通常会被缓存——但这意味着浏览器会将字体数据的 URL 与其加载的数据相关联。因此，在正常的缓存机制中，浏览器不需要重新加载字体数据，例如，如果在站点的不同页面上使用相同的可下载字体并且用户在那里冲浪。

使用通常仅在用户实际下载字体（通常从其下载站点）*并*安装它以在字处理器中使用它`src: local(...)`的可能性方面才有意义。因此，如果它是一种流行的免费字体可能是有意义的。当本地副本将独立于缓存问题使用时。但是，本地副本可能是比您的可下载字体更旧（或更新）的版本。

 *笑脸黑客是一个令人困惑的问题，但在这方面，我依赖 FontSquirrel 的决定。他们不再使用它，部分原因是据报道它会导致某些 Android 版本出现问题，部分原因是他们认为他们有更好的 hack；查看他们的博客文章[The New Bulletproof @Font-Face Syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:24:14.147

下载字体后，它很可能会存储在 Web 浏览器的缓存中。

可以随时清除此缓存：当用户关闭浏览器时，如果用户使用清理程序等等。

但是，您的字体可能会在缓存中保留一段时间，直到过期或被清除。*

# java - android ping InetAddress 和editText

> ID：13323222
> 
> 赞同：1
> 
> 时间：2012-11-10T15:11:10.173
> 
> 标签：java, android, eclipse, ping, inetaddress

我想在 EditText 框中输入一个 ip，然后通过按钮 ping 在 textView 中给出结果（是否可达）

```
public class MainActivity extends Activity {
Button button;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
            EditText editText = (EditText) findViewById(R.id.editText1);
            TextView textView = (TextView) findViewById(R.id.textView);
             String input= editText.getText().toString();

               InetAddress ip;
                ip = InetAddress.getByName(input);
                boolean reach= ip.isReachable(5000);
                   textView.setText("real ?"+reach);

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }   
        }
    });
}   
} 
```

每当我在真机中按ping按钮时，它就会从应用程序中出来，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-23T03:01:21.057

我猜你对 net 方法有误，试试这个代码，如果它仍然不可行，请告诉我。

```
public class MainActivity extends Activity {
Button button;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
            EditText editText = (EditText) findViewById(R.id.editText1);
            final TextView textView = (TextView) findViewById(R.id.textView);
             final String input= editText.getText().toString();
             new Thread(new Runnable(){
                 InetAddress ip;
                ip = InetAddress.getByName(input);
                final boolean reach= ip.isReachable(5000);
                runOnUiThread(new Runnable() {
                    textView.setText("real ?"+reach);
                });
             }).start(); 

                   textView.setText("real ?"+reach);

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }   
        }
    });
}   
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T20:32:55.313

如果您仍在寻找答案，但您的应用程序崩溃的原因是因为不允许您执行网络操作，例如 ip = InetAddress.getByName(input); 请在 mainactivity 中创建另一个类并让它扩展 AsyncTask 并在那里执行您的网络操作。

谢谢

# xamarin.android - 扩展 shadowbuilder 在 Monodroid 中有编译错误

> ID：13323226
> 
> 赞同：1
> 
> 时间：2012-11-10T15:12:05.420
> 
> 标签：xamarin.android

我想扩展 ShadowBuilder 以便在拖动时更改画布大小。但是，由于下面的编译错误，我无法编译它。

这是我的 ShadowBuilder 的代码

```
public class TileShadow : View.DragShadowBuilder
{
    //private Drawable mShadow;

    public TileShadow()
    {
    }

    public TileShadow(View view)
        : base(view)
    {
    }

    protected TileShadow(IntPtr javaReference, JniHandleOwnership transfer) : base(javaReference, transfer)
    {
    }

    public override void OnDrawShadow(Canvas canvas)
    {
        canvas.Scale(1.8f, 1.8f);
        base.OnDrawShadow(canvas);
        //mShadow.Draw(canvas);
        //View.Draw(canvas);
    }
} 
```

错误 25 找不到符号符号：类 DragShadowBuilder 位置：类 android.view.View 扩展 android.view.View.DragShadowBuilder

![在此处输入图像描述](../Images/00fe9d953abfe23dc87bc13be473360b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:41:24.540

您的目标是什么 API 级别？`DragShadowBuilder`在 11 级以上可用。

我在 Mono for Android 4.2.6 上针对 API 级别 12（最低级别 Android 3.1）测试了您的代码，它编译没有问题并部署到模拟器。

您是否尝试过清理/重建解决方案？

您是否尝试过从头开始创建新项目并实施此类以查看问题是否与您现有的解决方案隔离？

还要检查你的 ACW 在 obj\debug\android\src\wordshuffle\android\shadowbuilders\ 文件夹中的样子。

我的看起来像这样

```
package androidapplication1;

public class TileShadow
    extends android.view.View.DragShadowBuilder
    implements
        mono.android.IGCUserPeer
    {
    static final String __md_methods;
    static {
        __md_methods = 
            "n_onDrawShadow:(Landroid/graphics/Canvas;)V:GetOnDrawShadow_Landroid_graphics_Canvas_Handler\n" +
            "";
        mono.android.Runtime.register ("AndroidApplication1.TileShadow, AndroidApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", TileShadow.class, __md_methods);
    }

    public TileShadow (android.view.View p0)
    {
        super (p0);
        if (getClass () == TileShadow.class)
            mono.android.TypeManager.Activate ("AndroidApplication1.TileShadow, AndroidApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "Android.Views.View, Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd", this, new java.lang.Object[] { p0 });
    }

    public TileShadow ()
    {
        super ();
        if (getClass () == TileShadow.class)
            mono.android.TypeManager.Activate ("AndroidApplication1.TileShadow, AndroidApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "", this, new java.lang.Object[] {  });
    }

    public void onDrawShadow (android.graphics.Canvas p0)
    {
        n_onDrawShadow (p0);
    }

    private native void n_onDrawShadow (android.graphics.Canvas p0);

    java.util.ArrayList refList;
    public void monodroidAddReference (java.lang.Object obj)
    {
        if (refList == null)
            refList = new java.util.ArrayList ();
        refList.add (obj);
    }

    public void monodroidClearReferences ()
    {
        if (refList != null)
            refList.clear ();
    }
} 
```

# vba - 单击 VBA 表单上的重置按钮会导致错误

> ID：13323227
> 
> 赞同：0
> 
> 时间：2012-11-10T15:12:22.823
> 
> 标签：vba

每次我单击表单上的**重置**按钮时。我收到以下错误消息：

```
Run-Time error '380':
Could not set the Value property. Invalid property value. 
```

我试图调试代码，错误似乎来自以下几行：

```
cbo_prefRoom1.Value = "No preference"
cbo_prefRoom2.Value = "No preference"
cbo_prefRoom3.Value = "No preference" 
```

什么可能导致此错误？我检查了表格，并且特别正确地引用了组合框。

下面是整个函数的代码：

```
Private Sub btn_Reset_Click()

    ' Reset form
    Dim ctl As msforms.Control
    For Each ctl In Me.Controls
        Select Case TypeName(ctl)
            Case "TextBox"
                ctl.Text = ""
            Case "CheckBox", "OptionButton", "ToggleButton"
                ctl.Value = False
            Case "ComboBox", "ListBox"
                ctl.ListIndex = -1
        End Select
    Next ctl

    Me.cbo_deptCode = "CO - Computer Science"

    ' Set default value for checkbox
    Me.chk_week1.Value = True
    Me.chk_week2.Value = True
    Me.chk_week3.Value = True
    Me.chk_week4.Value = True
    Me.chk_week5.Value = True
    Me.chk_week6.Value = True
    Me.chk_week7.Value = True
    Me.chk_week8.Value = True
    Me.chk_week9.Value = True
    Me.chk_week10.Value = True
    Me.chk_week11.Value = True

    ' Set default value for round
    Me.cbo_rounds = "Priority"

    ' Set default value for semester
    Me.cbo_semester = "1"

     ' Set default value for priority
    priority_y.Value = 1

    ' Set default value for lectureStyle
    lecturestyle_trad = 1

    ' Set default value from roomStructure
    rs_Tiered = 1

    ' Set default value for fac1,fac2,fac3
    cbo_fac1.Value = "No preference"
    cbo_fac2.Value = "No preference"
    cbo_fac3.Value = "No preference"

    ' Set default value for prefRoom1,prefRoom2,prefRoom3
    cbo_prefRoom1.Value = "No preference"
    cbo_prefRoom2.Value = "No preference"
    cbo_prefRoom3.Value = "No preference"

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:56:34.000

如果您将组合框`Style`设置为`fmListStyleDropDown`并且“无首选项”不是组合框中的项目，您将收到此错误。

# javascript - meteor.js 和backbone.js 是互补的吗？

> ID：13323228
> 
> 赞同：18
> 
> 时间：2012-11-10T15:12:23.217
> 
> 标签：javascript, backbone.js, meteor

我最近一直在使用主干作为我的客户端框架。在我使用 Express.js 的服务器上。尽管如此，我还是在阅读 Meteor 并意识到它是一个相当有趣的“全栈”框架。

Backbone 和 Meteor 的使用是互补的，还是使用 Meteor 可以简单地抛弃 Backbone（或任何其他 MV*）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-10T16:41:49.090

这是正确的。Meteor 的不同部分，如`Meteor.Collection`（也适用于客户端的 Mongo 数据库 API）和`Template`（数据更改时自动重绘的 Handlebars 样式模板）一起工作。因此，每当一个用户进行更改时，所有其他允许访问该数据的选项卡都会自动重绘。如果您正在使用它们，那么您不需要在客户端上有一个单独的库，如主干。

Backbone 是为早期风格的应用程序构建的，在这种应用程序中，您可以使用不同的 API 编写单独的客户端和服务器代码。在该模型中，服务器端公开了一个 REST API，主干的工作是在客户端上提供一些结构，以便如何查询该 API 并根据返回的数据绘制屏幕。但是在你拥有一个实时应用程序之前，你仍然必须手动编写所有的数据同步和模型验证代码，而且你必须这样做两次：一次在客户端，一次在服务器上。

有一个例外：我们中的许多人确实在我们的 Meteor 应用程序中使用骨干网的路由器。下面的代码来自[Todo List 示例](http://www.meteor.com/examples/todos)。

```
////////// Tracking selected list in URL //////////

var TodosRouter = Backbone.Router.extend({
  routes: {
    ":list_id": "main"
  },
  main: function (list_id) {
    Session.set("list_id", list_id);
    Session.set("tag_filter", null);
  },
  setList: function (list_id) {
    this.navigate(list_id, true);
  }
});

Router = new TodosRouter;

Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T14:58:06.980

有一个名为[meteor-router](https://github.com/tmeasday/meteor-router)的现有陨石智能包。也许它可以帮助您迁移现有的主干代码。

# iphone - 从 CocoaAsyncSocket 读取数据

> ID：13323231
> 
> 赞同：1
> 
> 时间：2012-11-10T15:12:26.937
> 
> 标签：iphone, objective-c, ios, cocoaasyncsocket

我正在使用 CocoaAsyncSocket ，我需要创建一个向服务器发送消息并等待服务器回复的函数，在委托方法中它确实接收服务器响应，但我需要发送消息的函数等待服务器回复和返回响应。

```
- (NSString *)sendMessage:(NSString *)message{
    NSError *err = nil;
    if (![socket connectToHost:@"192.168.1.20" onPort:52523 error:&err]) // Asynchronous!
    {
        NSLog(@"Error is : %@", err);
    }

   [socket readDataWithTimeout:-1 tag:1];

    NSData* data =[message dataUsingEncoding:NSUTF8StringEncoding];
    [socket writeData:data withTimeout:-1 tag:1];

    NSString *xmlString = [[NSString alloc] init];
    // Here I need the function wait and receive the response

    return xmlString;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:16:34.633

如果您需要同步发送某些内容，为什么不构建请求并使用 NSURLConnection api，如下所示：

```
NSData* data = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&error]; 
```

这将阻止，直到您得到响应。

如果您想继续使用异步套接字方法但强制使其成为同步调用，您可以通过添加以下方法来做到这一点：

```
@property (nonatomic, assign) BOOL com_private_condition;
@property (nonatomic, assign) NSThread* com_private_theWaitingThread; 
```

...

```
@synthesize com_private_condition;
@synthesize com_private_theWaitingThread; 
```

...

```
 - (BOOL)waitForConditionWithTimeout:(NSTimeInterval)aTimeout
    {
        self.com_private_condition = NO;
        self.com_private_theWaitingThread = [NSThread currentThread];
        NSDate* theStartDate = [NSDate date];
        NSDate* theEndDate = [NSDate dateWithTimeIntervalSinceNow:aTimeout];
        do 
        {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode 
                                 beforeDate:theEndDate];
        NSTimeInterval theElapsedTime = -[theStartDate timeIntervalSinceNow];
        if (theElapsedTime >= aTimeout)
        {
            return NO;
        }
        if (self.com_private_condition)
        {
            return YES;
        }
    } while (YES);
}

- (void)signalCondition
{
    [self performSelector:@selector(com_private_signalCondition:) 
                 onThread:self.com_private_theWaitingThread 
               withObject:nil waitUntilDone:NO];
}

- (void)com_private_signalCondition:(id)aParam
{
    self.com_private_condition = YES;    
} 
```

现在让你的方法像这样

```
- (NSString *)sendMessage:(NSString *)message{
    NSError *err = nil;
    if (![socket connectToHost:@"192.168.1.20" onPort:52523 error:&err]) // Asynchronous!
    {
        NSLog(@"Error is : %@", err);
    }

   [socket readDataWithTimeout:-1 tag:1];

    NSData* data =[message dataUsingEncoding:NSUTF8StringEncoding];
    [socket writeData:data withTimeout:-1 tag:1];

    //make xmlString a variable on your class and set it in your async socket callback when you get the data. once the wait is over just return it.
    //NSString *xmlString = [[NSString alloc] init];
    // Here I need the function wait and receive the response

    //call read and then wait
    [socket readDataWithTimeout:-1 tag:1];
    [self waitForConditionWithTimeout:9999.0]; //or some other wait timeout of your choosing
    //this will block until [self signalCondition] is called by your socket callbacks.

    return self.xmlString;
} 
```

现在在你的 CocoaAsyncSocket 回调 socket:didReadData:withTag: 和 socket:didDisconnectWithError: 中确保你调用

```
[self signalCondition]; 
```

一旦你调用等待方法将继续，你只是使异步调用同步。

# javascript - 匿名函数与正常函数

> ID：13323237
> 
> 赞同：25
> 
> 时间：2012-11-10T15:13:08.783
> 
> 标签：javascript, function, anonymous-function

只是出于兴趣，两者之间是否存在任何速度/功能差异

```
function foo(bar) {
    alert("foo" + bar);
} 
```

和

```
var foo = function(bar) {
    alert("foo" + bar);
}; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-10T15:15:34.087

没有显着的速度差异。（[测试](http://jsperf.com/named-or-anonymous-functions/40)）

存在功能差异。

*   函数声明（如您的第一个）和函数表达式（如您的第二个）在不同时间处理。
*   它们对它们发生的范围有不同的影响。
*   你的第一个函数有一个*真实的名字*，~~你的第二个~~在 ES5 和更早的版本中没有，你的第二个没有；在 ES6/ES2015 中确实如此，因为规范说 JavaScript 引擎在这种情况下必须将变量的名称分配给函数。

如果您四处寻找“函数声明”与“函数表达式”，您会发现**很多**关于该主题的讨论（其中一些甚至是正确的）。

但简而言之：

### 函数声明

当执行游标进入其包含范围（包含函数或全局范围）时，会在执行任何分步代码之前发生像您的第一个示例一样的*函数声明。*因此它们不能出现在非功能块（`if`、`try`等）中，因为在处理它们时没有运行分步代码。函数的名称被添加到它出现的范围内，并且函数对象有一个真实的名称（尽管没有标准的方法来*查询*该名称，但它在堆栈跟踪等中仍然有用）。*（注意：一些 JavaScript 引擎允许在块内声明函数，但这是**无效**的，它们所做的不一定一致。不要这样做。）*

### 匿名函数表达式

像您的第二个示例这样的*函数表达式*与所有表达式一样，在代码的逐步流程中遇到时会发生。您的表达式称为*匿名函数表达式*，因为它没有明确指定函数的名称。在 ES5 及更早版本中，这意味着生成的函数没有名称。在 ES6/ES2015 及更高版本中，许多使用匿名函数表达式创建的函数*确实*具有名称，因为可以从表达式中推断出名称，而您的示例就是这种情况，其中函数以变量具有的名称结束：`foo`. 由于匿名函数表达式是表达式，它们可以出现在任何可能出现表达式的地方，尽管有时您必须警告解析器您正在执行此操作。

### 命名函数表达式

还有第三种方法：*命名*函数表达式，而不是匿名函数表达式。它们看起来像这样：

```
var foo = function bar() {
}; 
```

或者

```
var obj = {
    foo: function bar() {
    }
}; 
```

或者

```
doSomething(function bar() { }); 
```

等等

它们曾经是**真正**有问题的跨浏览器（例如，IE8 和更早的版本[把它们弄乱了](http://blog.niftysnippets.org/2010/09/double-take.html)；Safari 的早期版本有问题，等等；Kangax 有[一个很好的页面](http://kangax.github.com/nfe/)来说明过去比比皆是的问题）。它是一个表达式，所以它在任何有表达式的地方都有效。**兼容的 JavaScript 引擎不会**将*函数名称*（`bar`在我的示例中）添加到包含范围。

# c# - .NET 中的 URL 字符串生成

> ID：13323242
> 
> 赞同：8
> 
> 时间：2012-11-10T15:14:23.637
> 
> 标签：c#, .net

我想知道.NET 是否有任何用于简化 URL 生成的类，类似于**Path.Combine**但用于 URL。

我正在寻找的功能示例：

```
string url = ClassName.Combine("http://www.google.com", "index")
            .AddQueryParam("search", "hello world").AddQueryParam("pagenum", 3);
// Result: http://www.google.com/index?search=hello%20world&pagenum=3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T15:18:18.507

我相信您正在寻找[`UriBuilder`](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)课程。

> 为统一资源标识符 (URI) 提供自定义构造函数并修改 Uri 类的 URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:19:08.253

这是一个链接到两个第三方库的类似问题：

[C# Url 生成器类](https://stackoverflow.com/questions/1759881/c-sharp-url-builder-class)

*据我所知，.NET 中没有任何“开箱即用”的东西允许一个流畅的接口来构造`Url`and `QueryString`。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:15:22.903

```
// In webform code behind: 
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections.Specialized;

namespace testURL
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            NameValueCollection queryString = System.Web.HttpUtility.ParseQueryString(string.Empty);

            queryString["firstKey"] = "a";
            queryString["SecondKey"] = "b";

            string url=GenerateURL(queryString); // call function to get the url
        }

        private string GenerateURL(NameValueCollection nvc)
        {
            return "index.aspx?" + string.Join("&", Array.ConvertAll(nvc.AllKeys, key => string.Format("{0}={1}", HttpUtility.UrlEncode(key), HttpUtility.UrlEncode(nvc[key]))));
        }

    }
}

    // To get information to generate URL in MVC please check the following tutorial:
    http://net.tutsplus.com/tutorials/generating-traditional-urls-with-asp-net-mvc3/ 
```

# android - 使用ZXing使用Android的phonegap扫描后，将QR-Code的照片保存在相册中

> ID：13323244
> 
> 赞同：0
> 
> 时间：2012-11-10T15:14:32.107
> 
> 标签：android, cordova, qr-code, zxing

我正在使用 Android 版 PhoneGap (2.3.7) 通过 ZXing 插件扫描二维码。

扫码后，手机相册无法保存拍摄的照片。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:22:02.247

该应用程序（即使作为 phonegap 插件）不会捕获照片来完成其工作。它从设备的预览流中查看图像并且不将图像记录到存储中——这将非常慢。没有办法从存储中读取图像，例如通过相册，因为它们从未存储在那里。

# javascript - 单击jquery时增加变量

> ID：13323245
> 
> 赞同：2
> 
> 时间：2012-11-10T15:14:46.340
> 
> 标签：javascript, jquery

我正在制作一个交互式信息图。基本上有很多圈子飞来飞去。我尝试通过单击一个按钮来更改圆圈的数量，因此我想在单击时将**变量 d**增加 1，以从数组中获取另一个元素。但它不起作用。有任何想法吗？

```
var leuko = ["167", "143", "134", "96"]; //array

var d = 0; //variable

$("#day").click(function() {

d += 1; 
```

_

```
for (var i = 0; i < leuko[d]; i++) {

var x = 20 + (Math.random() * (canvasWidth - 40));
var y = 20 + (Math.random() * (canvasHeight - 40));

var radius = 5;
var vX = Math.random() * 0.2;
var vY = Math.random() * 0.2; 
```

我希望你能理解我的问题，因为我的英语不是最好的。

这是一个 jsfiddle 链接。版面看起来有点乱。。

[http://jsfiddle.net/JDU6H/](http://jsfiddle.net/JDU6H/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:21:46.540

**无需重写代码的许多部分，**您只需更改点击功能：

```
$("#day").click(function() {
    d += 1;

    var x = 20 + (Math.random() * (canvasWidth - 40));
    var y = 20 + (Math.random() * (canvasHeight - 40));

    var radius = 5;
    var vX = Math.random() * 0.2;
    var vY = Math.random() * 0.2;

    zellen.push(new Zelle(x, y, radius, vX, vY));
}); 
```

[http://jsfiddle.net/JDU6H/2/](http://jsfiddle.net/JDU6H/2/)

尽管如此，我还是建议您为所有单元格创建一个类并添加一个*add()*函数。

# perl - 等待 Thread::Queue 完成的正确方法是什么？

> ID：13323251
> 
> 赞同：1
> 
> 时间：2012-11-10T15:15:13.720
> 
> 标签：perl, loops

我正在尝试构建一个简单的爬虫，但似乎所有线程都没有完成，即使队列是空的：

```
#!/usr/bin/perl

use strict;
use warnings;
use threads;
use Thread::Queue;
use LWP::UserAgent;
use HTML::LinkExtor;

my $ua = new LWP::UserAgent;
my %visited = ();
my $workQueue = new Thread::Queue;

sub work {
    my ($ua, $queue, $hashref) = @_;
    my $tid = threads->self->tid;
    my $linkExtor = new HTML::LinkExtor;

    while (my $next = $queue->dequeue)
    {
        print "Processin ($tid): ", $next, "\n";

        my $resp = $ua->get ($next);
        if ($resp->is_success)
        {
            $linkExtor->parse ($resp->content);
            my @links = map { my($tag, %attrs) = @$_; 
            ($tag eq 'a')
            ? $attrs{href} : () } $linkExtor->links;

            $queue->enqueue (@links);
        }
    }
};

$workQueue->enqueue ('http://localhost');
my @threads = map { threads->create (\&work, $ua, $workQueue, \%visited) } 1..10;
$_->join for @threads; 
```

那么等待这些线程完成的正确方法是什么？它永远不会跳出那个while循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:34:32.283

您`$queue->dequeue`正在阻塞并等待另一个线程`enqueue`。从[perldoc](https://metacpan.org/module/Thread%3a%3aQueue)：

> 从队列的头部删除请求的项目数（默认为 1），并返回它们。如果队列包含的项目数量少于请求的数量，则线程将被阻塞，直到所需数量的项目可用**（即，直到其他线程<enqueue> 更多项目）**。

`dequeue_nb()`如果队列为空，将返回 undef。但在这种情况下，如果一个线程已将第一个 URL 出列，则其余线程将在任何项目排队之前停止。

在我的脑海中，另一种方法可能是保持当前正在从事某些活动的线程计数，并在达到 0 时终止？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:16:37.250

[Thread::Queue 3.01](https://metacpan.org/module/JDHEDDEN/Thread-Queue-3.01/lib/Thread/Queue.pm)刚刚介绍了[这个问题的解决方案](https://rt.cpan.org/Ticket/Display.html?id=79733)。您现在可以声明一个队列已经结束，表明不会再向队列中添加任何项目。这会解除阻塞等待的任何人，`dequeue`并且`dequeue`当队列为空时不会阻塞，从而允许您的线程退出。

```
$workQueue->enqueue('http://localhost');
my @threads = map { threads->create (\&work, $ua, $workQueue, \%visited) } 1..10;
$workQueue->end;
$_->join for @threads; 
```

对您来说不幸的是，结束队列也意味着您不能再将项目添加到队列中，因此在抓取网页中间的线程无法将它找到的页面添加到队列中。我编写了没有此限制的原始 Thread::Queue 补丁。结束的队列不能接受更多项目没有技术原因，限制是 Thread::Queue 作者的设计选择。你可能想[给他一些反馈](https://rt.cpan.org/Ticket/Create.html?Queue=Thread-Queue)，让他知道这会妨碍你。

这是[我的原始补丁](https://github.com/schwern/Thread-Queue)，它定义`done`而不是`end`允许您继续将项目添加到`done`队列中。

# java - 如何使用输入在java中运行bash脚本

> ID：13323256
> 
> 赞同：3
> 
> 时间：2012-11-10T15:16:03.970
> 
> 标签：java

我正在尝试在 Java 程序中运行一个 bash 脚本文件，我正在使用这种方式：

```
Runtime rt = Runtime.getRuntime();

try {           
  Process proc = rt.exec("THE PATH FILE");        
  BufferedReaderinput=newBufferedReader(newInputStreamReader(proc.getInputStream()));
  String line=null;
  while((line=input.readLine()) != null) {
    System.out.println(line);
   }
} catch (IOException ex) {
  System.out.println(ex.toString());
} 
```

但是当我从命令行运行它时，我在我的 bash 脚本中使用输入作为 $1 并且我想在我的 Java 程序中使用它来获取正确的输出。如何在我的 Java 程序中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:44:45.320

正如 Mike Thomsen 所建议的，您可以将命令行参数放入您的 java 应用程序中，并将它们传递给类似这样的脚本文件。

```
StringBuilder cmdLineArgs = new StringBuilder();  

for(String arg:args){   //in case you may have variable number of arguments
    cmdLineArgs.append(arg).append(" ");
} 
```

现在将**cmdLineArgs**中收集的参数传递给您的脚本。

```
Process proc = rt.exec("YOUR SCRIPT " + cmdLineArgs.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:21:40.433

读取 Java 应用程序中的输入，然后启动一个如下所示的新进程：

```
bash myfile.sh arg[0] arg[1] arg[n] 
```

# c# - C#很多URL请求，需要很长时间处理

> ID：13323257
> 
> 赞同：2
> 
> 时间：2012-11-10T15:16:17.320
> 
> 标签：c#, string, multithreading, httpwebrequest

我必须向以下 URL 发送大约 120 个 URL 请求

```
HttpWebRequest r = (HttpWebRequest)WebRequest.Create("https://play.google.com/store/search?q=" + keyword + "&c=apps&hl=en"); 
```

如果每个请求中的关键字不同，我会获取响应页面，处理页面并从响应页面中提取应用程序计数，其中包括字符串操作。但是处理这120个请求需要一分钟多的时间。

我正在考虑多线程，但同时，你能建议一些更有效的东西，所以我将时间减少到最多 1-2 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:21:12.480

您不太可能将处理时间缩短到 1-2 秒。当然，您可能可以通过优化在这里和那里减少一些时间，其中的一部分将受到硬件和互联网连接的限制。

除了拥有多核处理器和使用大量线程之外，时间不会减少那么多。多线程可能是您最好的选择，但这样您不会获得 300-600% 的性能提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:24:40.613

通过调用`GetResponseAsync`而不是`GetResponse`. 这允许您同时发送多个请求。但请记住，可以同时处理的请求数量是有限的。所以你只会获得有限的速度提升，但值得一试。

处理请求的结果只需要总时间的一小部分。通信消耗了很大一部分，因此使用多线程处理结果并没有多大帮助。

# actionscript-3 - AS3 Z-INDEXING 电影剪辑

> ID：13323258
> 
> 赞同：1
> 
> 时间：2012-11-10T15:16:19.473
> 
> 标签：actionscript-3, z-index

**大家好，我在舞台上有 2 个带有实例名称的影片剪辑：绿色和橙色。我正在使用此代码到时间线框架 1 来提前单击每个项目：**

```
MovieClip.prototype.bringForward = function():void{
    var currentDepth = this.parent.getChildIndex(this);
    if(currentDepth<this.parent.numChildren-1){
        this.parent.setChildIndex(this, currentDepth+1); 
    }
}

green.addEventListener(MouseEvent.MOUSE_UP, clicked);
orange.addEventListener(MouseEvent.MOUSE_UP, clicked);

function clicked(e:MouseEvent){
    e.target.bringForward();
} 
```

谁能告诉我如何从外部 .as 文件中加载它：

```
package  {

    public class Main {

        public function Main() {

        }

    }

} 
```

我尝试了很多次，但我没有任何运气。

**我试过这个：**

```
package  {

    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.accessibility.AccessibilityProperties;
    import flash.display.Bitmap;
    import flash.display.DisplayObject;
    import flash.display.DisplayObjectContainer;
    import flash.display.MovieClip;
    import flash.display.Stage;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.KeyboardEvent;

    public class Main {

        public function Main() {

            addListeners();

        }

MovieClip.prototype.bringForward = private final function():void{
    var currentDepth = this.parent.getChildIndex(this);
    if(currentDepth<this.parent.numChildren-1){
        this.parent.setChildIndex(this, currentDepth+1); 
    }
}

        private final function addListeners():void
        {

            green.addEventListener(MouseEvent.MOUSE_UP, clicked);
            orange.addEventListener(MouseEvent.MOUSE_UP, clicked);

        }

    private final function clicked(e:MouseEvent)
    {
    e.target.bringForward();
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:32:00.683

不要使用原型的东西。像这样在类上创建一个函数：

```
private function bringForward(clip:DisplayObject):void{
    var currentDepth:int = getChildIndex(clip);
    ... rest of your swapping logic
}

private function clicked(event:MouseEvent){
    bringForward(event.target as DisplayObject);
} 
```

# r - R中的约束平滑

> ID：13323261
> 
> 赞同：0
> 
> 时间：2012-11-10T15:16:58.117
> 
> 标签：r, curve-fitting, smoothing, bspline

我想根据一些数据生成一条连续的曲线，但是曲线需要满足一些约束：

1.  曲线的所有值都在区间 [0,1] 上。此区间之外的值是不可解释的。
2.  我想指定确切的开始和结束值： f(1) = 1 和 f(last) = 0
3.  f(x) 的导数始终为负数或 0。

数据点也遵循这些规则。

现在，我正在使用 fda 包中的 smooth.monotone 来适应使用 create.bspline.basis 创建的 bspline 基础。这对于保持节点之间的单调性非常有效，但生成的曲线似乎在 1 之上和 0 之下冒险。

有没有办法指定曲线拟合必须经过的点，或者曲线不能离开的区间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:42:31.140

转换您的 0-1 变量，使其渐近 -Inf 到 +Inf，然后进行无约束平滑，然后反转转换。

Logit，或概率或其他东西应该有帮助。为不完整道歉，但你没有提供一个可重复的例子，我有事情要做。

# java - 替代 math.pow 和 math.sqrt

> ID：13323263
> 
> 赞同：2
> 
> 时间：2012-11-10T15:17:26.537
> 
> 标签：java, math, precision

和 有什么好的替代`Math.pow`品`Math.sqrt`？我正在寻找更准确的东西。通常这些是足够准确的，但是当我通过我正在使用的算法加倍时，返回的值只是略微错误。我手工算了算，用java在算法里面一步步计算，发现问题出在`Math.pow`and`Math.sqrt`方法的不准确上。

我在`BigDecimal`课堂上鬼混，但我不确定它在这里的用途。

我重新检查了它，它的 Double 值太不精确了。BigDecimal 类是否有等效的数学方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:21:14.027

您应该看一下[这个答案](https://stackoverflow.com/a/3590314/1814743)，以使用 BigDescimal 提高 Math.pow 的准确性

# c++ - OpenCV 不保存视频

> ID：13323264
> 
> 赞同：5
> 
> 时间：2012-11-10T15:17:28.507
> 
> 标签：c++, opencv, image-processing, video-processing

我正在使用以下代码从文件中读取视频，应用精明边缘算法并将修改后的视频写入文件。代码编译并完美运行。但是，视频没有写！我完全糊涂了。请告诉我错误是什么。该文件根本没有创建！操作系统：Ubuntu 12.10

写入输出文件的代码

打开输出文件

```
bool setOutput(const std::string &filename, int codec=0, double framerate=0.0, bool isColor=true) {

    outputFile= filename;
    extension.clear();

    if (framerate==0.0) 
        framerate= getFrameRate(); // same as input

    char c[4];
    // use same codec as input
    if (codec==0) { 
        codec= getCodec(c);
    }

    // Open output video
    return writer.open(outputFile, // filename
    codec, // codec to be used 
    framerate,      // frame rate of the video
    getFrameSize(), // frame size
    isColor);       // color video?
} 
```

写框架

```
void writeNextFrame (Mat& frame)
{
    writer.write (frame);
} 
```

还有一个单独的运行方法来执行这些

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:17:23.297

每当我在我的应用程序中遇到奇怪的行为时，我都会写一个[简短的、独立的、正确的（可编译的）示例](http://sscce.org/)来帮助我理解发生了什么。

我写了下面的代码来说明你应该做什么。值得注意的是，它在我的 Mac OS X 上完美运行：

```
#include <cv.h>
#include <highgui.h>

#include <iostream>
#include <string>

int main(int argc, char* argv[])
{
    // Load input video
    cv::VideoCapture input_cap("Wildlife.avi");
    if (!input_cap.isOpened())
    {
        std::cout << "!!! Input video could not be opened" << std::endl;
        return -1;
    }

    // Setup output video
    cv::VideoWriter output_cap("output.avi",  
                               input_cap.get(CV_CAP_PROP_FOURCC),
                               input_cap.get(CV_CAP_PROP_FPS), 
                               cv::Size(input_cap.get(CV_CAP_PROP_FRAME_WIDTH), input_cap.get(CV_CAP_PROP_FRAME_HEIGHT)));

    if (!output_cap.isOpened())
    {
        std::cout << "!!! Output video could not be opened" << std::endl;
        return -1;
    }

    // Loop to read frames from the input capture and write it to the output capture
    cv::Mat frame;
    while (true)
    {       
        if (!input_cap.read(frame))             
            break;

        output_cap.write(frame);
    }

    // Release capture interfaces   
    input_cap.release();
    output_cap.release();

    return 0;
} 
```

用 FFmpeg 检查输入文件显示（`ffmpeg -i Wildlife.avi`）：

```
Input #0, avi, from 'Wildlife.avi':
  Metadata:
    ISFT            : Lavf52.13.0
  Duration: 00:00:07.13, start: 0.000000, bitrate: 2401 kb/s
    Stream #0.0: Video: msmpeg4v2, yuv420p, 1280x720, PAR 1:1 DAR 16:9, 29.97 tbr, 29.97 tbn, 29.97 tbc
    Stream #0.1: Audio: mp3, 44100 Hz, 2 channels, s16, 96 kb/s 
```

和输出：

```
Input #0, avi, from 'output.avi':
  Metadata:
    ISFT            : Lavf52.61.0
  Duration: 00:00:07.10, start: 0.000000, bitrate: 3896 kb/s
    Stream #0.0: Video: msmpeg4v2, yuv420p, 1280x720, 29.97 tbr, 29.97 tbn, 29.97 tbc 
```

所以这两个文件之间唯一的显着变化是 OpenCV 生成的输出没有音频流，这是正确的行为，因为 OpenCV 不处理音频。

确保您的用户具有在您运行应用程序的目录中读取/写入/执行的适当权限。此外，我在代码中添加的调试可能会帮助您找到与输入/输出捕获相关的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:19:50.537

你的机器上安装了 FFMPEG 库吗？在 Linux 上 FFMPEG 用于编写视频；在 Windows 上使用 FFMPEG 或 VFW。通过命令检查

```
 ffmpeg -version 
```

尝试安装其他库 `sudo apt-get install libavformat-dev libswscale-dev`。

通过调用 writer.open，您只需初始化或重新初始化视频编写器。您必须调用 void VideoWriter::write(const Mat& image) 将下一个视频帧写入文件。我希望这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-08T02:57:18.200

我遇到了同样的问题，我将编解码器更改为 DIVX。现在视频以 .avi 和 .mp4 格式保存。

# c# - SortedDictionary 以相反的键顺序排列

> ID：13323267
> 
> 赞同：5
> 
> 时间：2012-11-10T15:18:00.273
> 
> 标签：c#, linq, reverse, sorteddictionary

我有以下字典：

```
SortedDictionary<int, string> dictionary = new SortedDictionary<int, string>();
dictionary.add(2007, "test1");
dictionary.add(2008, "test2");
dictionary.add(2009, "test3");
dictionary.add(2010, "test4");
dictionary.add(2011, "test5");
dictionary.add(2012, "test6"); 
```

我想颠倒元素的顺序，这样当我在屏幕上显示项目时，我可以从 2012 年开始。如果可能的话，我想将颠倒的字典重新分配回变量字典。

我试过`dictionary.Reverse`了，但这似乎并不像我想象的那么容易。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-10T17:26:10.063

如果您使用的是最新版本的框架 .NET 4.5 (Visual Studio 2012)，您可以使用`Comparer<>.Create`. 就像这样：

```
var dictionary =
  new SortedDictionary<int, string>(Comparer<int>.Create((x, y) => y.CompareTo(x))); 
```

注意lambda中`x`和的顺序。`y`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-10T15:21:13.980

你可以给出`SortedDictionary`一个`IComparer<TKey>`关于建设。你只需要提供一个颠倒顺序的东西。例如：

```
public sealed class ReverseComparer<T> : IComparer<T>
{
    private readonly IComparer<T> original;

    public ReverseComparer(IComparer<T> original)
    {
        // TODO: Validation
        this.original = original;
    }

    public int Compare(T left, T right)
    {
        return original.Compare(right, left);
    }
} 
```

然后：

```
var dictionary = new SortedDictionary<int, string>(
       new ReverseComparer<int>(Comparer<int>.Default)); 
```

# python - 使用python和eclipse开发网站的框架

> ID：13323268
> 
> 赞同：0
> 
> 时间：2012-11-10T15:18:03.213
> 
> 标签：python, eclipse, web, web-deployment-project

我正在参加一个学生团队，我们将开发一个网站。我有使用 ASP.Net 和 C# 作为代码隐藏（在 Visual Studio 中）开发网站的经验。所以基本上我们想知道我们是否可以用 Eclipse 和 Python 做同样的事情。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:22:31.857

我认为 Eclipse 对 Python Web 框架的支持并不多，只有一个小例外：[PyDev](http://pydev.org/)（Eclipse 的 Python 插件）为[Django](https://www.djangoproject.com/)框架提供了一些[基本工具。](http://pydev.org/manual_adv_django.html)

就框架而言，Django 是一个很好的入门工具（而且它非常受欢迎）。如果您需要更大的灵活性，可以尝试[Pyramid](http://pyramid.readthedocs.org/en/latest/)或[Turbo Gears](http://www.turbogears.org/)。其实有很多可能性，看[这里](http://wiki.python.org/moin/WebFrameworks)。

# jakarta-ee - 调用 POJO 的 EJB 事务

> ID：13323269
> 
> 赞同：5
> 
> 时间：2012-11-10T15:18:17.627
> 
> 标签：jakarta-ee, transactions

假设我有一个实现 REQUIRED 事务方法的会话 bean：

```
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void doTransaction() throws Exception {
    try {
        ...
        // call to non-EJB bean object (not session, stateless or entity bean)
    } catch (Exception e) {
        context.setRollbackOnly();
        throw e;
    }
} 
```

假设 doTransaction() 改变了非 bean 对象的内部状态，并且失败了。回滚是否恢复非bean的原始状态？如果不是，处理这种情况的推荐方法是什么？（或者不允许事务中的 POJO 调用？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T16:16:32.210

EJB 在抛出异常后自动执行的回滚只会影响已加入正在进行的 (JTA) 事务的资源。

有几种方法可以加入这样的交易。最完整的方法是实现[XAResource](http://docs.oracle.com/javaee/5/api/javax/transaction/xa/XAResource.html)接口并让您的代码加入该实现。一种更简单但功能更弱的方法是使用[Synchronizer](http://docs.oracle.com/javaee/5/api/javax/transaction/Synchronization.html)。

严格地说，EJB 容器或事务管理器本身都不回滚任何东西。相反，它为入伍的资源提供了进行此类回滚的机会。因此，它本身永远无法恢复在交易期间碰巧被修改的随机变量的先前值。

为了完整起见，事务中通常（自动）登记的资源*是*数据库连接（如果它们来自容器管理的数据源）、JMS 消息（同样，如果目标是容器管理的）、（分布式）缓存和基于 JCA EIS 资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:44:34.400

JavaEE 不会回滚*非 bean*更改。它唯一会回滚的是实体，但只有在从数据库中再次读取它们之后。

如果您想要这种语义，您将需要使用[软件事务内存](http://en.wikipedia.org/wiki/Software_transactional_memory)产品。

# prolog - 如何在序言中使用 repeat/0 打印一组数字？

> ID：13323271
> 
> 赞同：1
> 
> 时间：2012-11-10T15:18:32.843
> 
> 标签：prolog

在练习中，我必须编写一个使用重复/0 打印数字 < N 的谓词，这是我尝试过的：

```
loop(N) :-
    repeat,
        write(N), nl,
        N is N-1,
        write(N),
        N > 0,
    !. 
```

但它只会无休止地打印给定的数字 N。

任何想法如何使用`repeat/0`？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:36:22.187

您的原始版本由于各种原因无法正常工作，但特别是

```
loop(N) :-
    repeat,
        write(N), nl,
        N is N-1,                <--- no!
        write(N),
        N > 0,
    !. 
```

“is”统一了左边是否是右边的数学结果。左侧将绑定到右侧。一旦你在 Prolog 中设置了它，你就不能改变它的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T16:38:34.320

我终于使用谓词使它工作了，`between/3`这是我的最终代码：

```
loop(N) :-
    repeat,
        between(1, N, X),
        writeln(X),
        X = N,
    !. 
```

编辑：正如@CookieMonster 所说，`repeat/0`不需要，所以这是代码的最后一个版本：

```
loop(N) :-
        between(1, N, X),
        writeln(X),
        false. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T15:58:34.340

您可以使用断言/撤回，例如

```
:- dynamic value/1.
loop(N) :-
    retractall(value(_)),
    assert(value(N)),
    repeat,
            retract(value(V)),
            writeln(V),
            V1 is V - 1,
            assert(value(V1)),
            V = 0,
    !. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-10T17:54:10.463

关于什么：

```
loop(N) :-
        between(1, N, X),
        writeln(X),
        false. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T06:32:25.603

我会介绍一个服务谓词

```
isint(I) :- I = 0 ; isint(T), I is T + 1. 
```

这需要在一个*新*变量的范围内进行（实际上解决了 Anniepoo 在她的第一个回复中强调的点）。

然后我可以写

```
loop(N) :-
  repeat,
  isint(I),
  write(I), nl,
  I >= N, !. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-11T04:00:57.827

Abderrahmane 询问如何减少。

几种方法可以做到这一点。大多数人会做

```
dec(0).
dec(N) :-
   write(N), nl,
   NewN is N - 1,
   dec(NewN). 
```

如果你坚持一个失败驱动的循环，怎么样

```
dec(N) :-
    between(1,N,X),
    Dec is 11 - X,
    write(Dec), nl,
    Dec = 1. 
```

或者，这是丑陋和糟糕的风格（而且像糖蜜一样缓慢）：

```
dec(N) :-
      assert(current_n(N)),
      repeat,
      current_n(Y),
      write(Y), nl,
      NewY is Y - 1,
      retractall(current_n(_)).
      assert(current_n(NewY)),
      Y > 0. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-21T16:41:13.837

A simple way :

```
loop(N) :-
    between(1, N, X),
    writeln(X),
    X >= N, !.
    loop(X). 
```

# asp.net-membership - .NET 4.5 成员资格提供程序数据库

> ID：13323273
> 
> 赞同：3
> 
> 时间：2012-11-10T15:19:22.210
> 
> 标签：asp.net-membership, asp.net-authentication

我正在使用标准的 ASP.NET Webform 模板及其成员资格提供程序。具体来说，我只使用外部 id 服务（Google、Microsoft、Facebook、Twitter）。所有这些都运行良好，直到我决定将数据库从默认的 localdb 指向我自己的数据库。

在 web.config 中，我将`connectionStringName`<profile>、<membership> 和 <roleManager> 中的属性从默认值`DefaultConnection`更改为我自己的连接字符串名称。然后在我的数据库中自动创建了以下表格：`Users`、`Roles`和. 但是，它继续使用并来自localdb！`Profiles``Memberships``UsersOpenAuthAccounts``UsersOpenAuthData`

为了找出谁在使用 localdb，我删除了连接字符串“DefaultConnection”。访问来自`OpenAuth.Login`。错误消息是`"Cannot attach the file d:\....\visual studio 2012\Projects\...\App_Data\DefaultConnection.mdf as database 'DefaultConnection'."`

我很困惑为什么会这样。App_Data 中没有 DefaultConnection.mdf 文件。只有一个aspnet-XXXX-yyyyMMddhhmmss.mdf。

底线是：如何让会员提供者使用我自己数据库中的两个 OpenAuth 表？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:25:34.630

查看 VS 的 OpenAuth 类元数据，有一个名为`ConnectionString`.

而使用Reflector，可以看到OpenAuth的构造函数将`ConnectionString`属性初始化为“DefaultConnection”。

因此，用户可以随时通过简单地更新此属性来更改 OpenAuth 使用的连接字符串。

# windows-runtime - 用于 Windows RT 的 Media Foundation Audio MFT 的最小实现

> ID：13323276
> 
> 赞同：3
> 
> 时间：2012-11-10T15:19:33.160
> 
> 标签：windows-runtime, ms-media-foundation

我已经搜索了网络、不同的论坛和 MS Windows 8 应用程序示例，但我只找到了超出我想象的结果或用户的问题——就像我自己一样——执行非常简单的任务，例如观察原始 PCM 音频（或任何其他样本通过拓扑）进行分析，但除了查看这个或那个样本之外，并没有真正得到任何其他答案。

这些样本的问题是，它们做得太多，像我这样的菜鸟，找不到第一个“简单”进入该主题的条目。

所以我的问题是：有没有人有一个真正的、最小的、通过 MFT 实现，甚至更好的模板可以插入到 MF 拓扑中？

有了这个，我认为很多问第二组问题的用户——比如我自己——可以更容易地掌握这个主题的真正核心，而不必理解一个复杂的样本，将其简化为本质，而不是开始构建他们实际的东西打算做。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-16T17:06:13.107

我知道这已经很老了，但我最近想回答同样的问题，所以：

关于想要一个简单的示例：恐怕我要给出的答案和您发现的一样简单... Microsoft Media Foundation 是一个复杂的 API，您需要了解 C++ 和 COM 开发，以及掌握 API 的异步事件驱动特性。对不起，但这就是野兽的本性。

在 Anton Pollinger 的“开发 Microsoft 媒体基础转换”一书中，第 5 章介绍了一个名为“Image Injector MFT”的示例 MFT，它在视频流的顶部添加了一个图像。本章中有几条评论表明这是一个简单的直通组件开始的好地方，例如在第 108 页：

> 在许多方面，CImageInjectorMFT 是一个传递组件——它不会对通过它的数据进行任何根本性的改变......

本书的示例代码可以从本书的[Microsoft Press 页面](https://www.microsoftpressstore.com/store/developing-microsoft-media-foundation-applications-9780735656598)免费下载。您对第 5 章示例感兴趣。

关于想要一个 Windows RT 解决方案，我相信您总是在 C++ 项目中构建 MFT，其输出是通过 RegSvr32 向 COM 系统注册的 DLL 文件，然后可供 Windows RT 应用程序使用。对此可能有额外的限制，但是当我目前为 Win32 开发时，我不确定。

# c - C中没有自旋锁的非阻塞套接字接受

> ID：13323279
> 
> 赞同：2
> 
> 时间：2012-11-10T15:19:50.763
> 
> 标签：c, sockets, signals, nonblocking, spinlock

> **可能重复：**
> [唤醒线程在 accept() 调用时被阻塞](https://stackoverflow.com/questions/2486335/wake-up-thread-blocked-on-accept-call)

我正在编写一个小型服务器，它监听连接（接受它们并将它们传递给工作线程），直到发送自定义停止信号。

如果我使用阻塞套接字，那么我的主接受循环不能在发送自定义停止信号时中断。但是，我希望避免使用非阻塞套接字进行忙等待/自旋锁循环。

我想要的是让我的主接受循环阻塞，直到接收到连接或发送停止信号。

这在Linux上的C中可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:18:41.737

如果我理解正确，那么您可以使用任何类型的“信号”，不一定是 POSIX 信号。实际上，POSIX 信号是一个糟糕的选择，因为检查您是否在循环中收到了一个不可避免的竞争条件。

您需要使用的是可以通过文件描述符监视的任何内容。它可能是：

*   管道。您的接受循环监视管道的读取端。为了唤醒循环，另一个线程将一些东西写入（不管是什么）写入端。
*   另一个插座。同样，另一个线程通过写入套接字的另一端来唤醒您的接受循环。
*   您使用 inotify 监视的文件系统中的文件。
*   当循环应该被中断时接收一些数据的设备。
*   ETC...

示例列表中后面的条目通常不实用。他们只是为了说明它可以是任何类型的对象，只要它具有可监控的文件描述符。最简单、最便宜和最受欢迎的方法是管道。

如果您已经在使用非阻塞套接字，那么您肯定已经有某种轮询循环来检查它们何时准备好接受连接。我将假设您正在使用`poll()`它来执行此操作。

在开始循环之前，请像这样设置管道：

```
pipe(&pipefd[0]);
read_end = pipefd[0];
write_end = pipefd[1];
fcntl(read_end, F_SETFL, O_NONBLOCK); 
```

就是将`fcntl`管道的读取端设置为非阻塞模式。您将在`poll`调用中将管道的那一端与套接字一起使用，因此它需要是非阻塞的。

然后只需将管道的读取端添加到您在接受循环中监视的图块描述符列表中：

```
for (;;) { /* accept loop, loop forever */
    /* Monitor your socket. You should already have this in your code */
    pollfd[0].fd = your_socket;
    pollfd[1].events = POLLIN;

    /* Add a new entry to monitor the read end of the pipe */
    pollfd[1].fd = read_end;
    pollfd[1].events = POLLIN;

    /* Now call poll, as before, but monitor 2 file descriptors instead of just 1 */
    n = poll(&pollfd[0], 2, -1);

    /* Check if your socket is ready to accept.
       This part, you are already doing. */
    if (pollfd[0].revents) {
        newsocket = accept(your_socket, etc....)
        do_somehting_with(new_socket);
    }

    /* New part: check if anyone has written something for you into your pipe */
    if (pollfd[1].revents) {
        break; /* stop the loop */
    }
} 
```

该示例使用`poll`但您可能正在使用`select`（或什至`epoll`）。`select`有不同的界面，但想法是一样的。

这种技术被称为[自管技巧](http://cr.yp.to/docs/selfpipe.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:02:19.667

如果您不想将解除阻塞的套接字传递给 accpet()，那么发送信号（如ing 线程`man signal`所述是中断阻塞（等待连接）`accept()`的唯一方法）。`accept()`

正如一些评论者已经指出的那样，`accept()`当他们的线程收到信号时，大多数系统调用（包括 ）将被中断。

如果`accept()`返回`-1`并`errno`设置为`EINTR`调用`accept()`被信号中断。

要向进程发送信号，请使用`kill(<pid>, <signal-number>)`.

如果您处于多线程环境中，请阻止您将为所有其他线程使用（典型`SIGUSR1`或`SIGUSR2`）的信号，但调用`accept()`, asit 的线程不确定进程的哪个线程将处理发送到进程的信号（通过流程“解决” `pid`。）

或者，您可以使用`pthread_kill(<pthread>, <signal-number>)`仅将信号发送到特定线程。

# backbone.js - Wtforms在渲染字段时转义包含主干js模板的值参数

> ID：13323280
> 
> 赞同：2
> 
> 时间：2012-11-10T15:19:51.780
> 
> 标签：backbone.js, flask, underscore.js, jinja2, wtforms

我正在使用 Flask、WTForms 和 Backbone.js 来创建我的应用程序。我是第一次使用 Backbonejs。

我创建了一个 Backbone js 模板来显示数据及其相应的表单。

```
 <%= my_field1 %>
    <%= my_field2 %>
    <form>
        <input type="text" value="<%= my_field1 %>"/>
        <input type="text" value="<%= my_field2 %>"/>
    </form> 
```

我正在使用 WTForms 和 Jinja2 来呈现我的表单。为了给出初始值，我正在这样做

```
 {{ field1(value="<%= my_field1 %>") | safe }}
    {{ field1(value="<%= my_field1 %>") | safe }} 
```

这是问题的根源，因为 <% 在渲染时被转义。我怎样才能阻止 wtforms/jinja 逃避这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:52:46.787

我查看了 WTForms 的源代码，是的，它在渲染过程中转义了 HTML 字符，您可以通过调用该字段来执行此操作。所以神社的“安全”参数行动太晚了。

您可以通过创建自定义小部件来呈现您的字段来解决此问题：

[http://wtforms.simplecodes.com/docs/0.6/widgets.html#custom-widgets](http://wtforms.simplecodes.com/docs/0.6/widgets.html#custom-widgets)

我为您编写了一个小部件 - 很抱歉我没有运行此代码，但这应该足以让您朝着正确的方向前进。

如果遇到麻烦，请务必查看 WTForms 的源代码：它的注释很好，内容不多，您可以从那里开始。（我做到了！）

```
from wtforms.widgets.core import HTMLString 

# Custom widget display 
def input_field_with_unescaped_value(field, **kwargs):

  value = kwargs.pop('value', field._value())
  unescaped_output = u' value="%s"' % value if value else ''

  return HTMLString(u'<input %s%s>%s</input>' % \
      (html_params(name=field.name, **kwargs), \
      unescaped_output, \
      unicode(field._value()))

# and here's how you use it in a form
class MyForm(Form):
  field1 = TextField(u'Thingy', widget=input_field_with_unescaped_value) 
```

# java - 在 Java 中使用字符串作为对象的名称

> ID：13323281
> 
> 赞同：0
> 
> 时间：2012-11-10T15:20:10.967
> 
> 标签：java, string, variables

好的，所以我有以下代码：

```
Random rnd = new Random();
int i = 0;
while(i<1000) {
  String name = "event" + i;
  Event name = new Event(rnd.nextInt(100000)); //ERROR duplicate variable
  SimEngine.getScheduler().addEventToQueue(event);
  i++;
}
System.out.println(SimEngine.getScheduler().getQueue().iterator()); 
```

我知道两次声明名字是没有意义的，但我希望你能看到我想要做什么。因为我想要名称为 event1、event2、event3 等的 Event 对象。

我怎样才能让它让我使用字符串名称作为事件对象的名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T15:21:54.367

> 因为我想要名称为 event1、event2、event3 等的 Event 对象。

对象（通常）没有名称。变量有名字。不过，您真的不想使用带有名称等的`event1`变量`event2`。

在这种情况下，如果您确实需要通过索引访问事件，则基本上应该使用数组。

```
Event[] events = new Event[1000];
for (int i = 0; i < 1000; i++) {
    events[i] = new Event(rnd.nextInt(100000));
    SimEngine.getScheduler().addEventToQueue(events[i]);
} 
```

当然，如果您以后不打算使用该变量，那么无论如何这都是没有意义的，而且您也可以：

```
for (int i = 0; i < 1000; i++) {
    SimEngine.getScheduler().addEventToQueue(new Event(rnd.nextInt(100000));
} 
```

如果这种特定类型的类*确实*有一个与每个实例关联的名称，我怀疑你需要将该名称传递给构造函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T15:22:17.253

您不能¹，但可以使用 a[`Map<String,Event>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)代替，并将变量名作为键，将对象作为值。

要访问“变量” - 您可以使用[`Map.get()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#get%28java.lang.Object%29)和[`Map.put()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#put%28K,%20V%29)。类似于以下内容：

```
Map<String,Event> varaibles = new HashMap<String,Event>();
variables.put("event" + i, new Event(...)) //setting new "varaibles"
Event myEvent = variables.get(someString); //getting the objects assigned to a "variable" 
```

* * *

(1) 可以部分通过[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)来完成。如果您已经拥有变量（不声明新变量） - 您可以使用反射 API 通过变量名称访问变量，但不建议这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T15:22:44.740

使用数组或哈希表。

```
Map<String, Event> m = new HashMap<String, Event>(); 
```

您不能（至少不容易）在运行时设置变量名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T15:24:07.373

您不必为每个对象命名即可使用它们中的一系列，这就是数据结构的用途，例如数组或映射，因此您可以执行类似的操作

```
SimEngine.getScheduler().addEventToQueue(new Event(rnd.nextInt(100000))); 
```

那是你要的吗？

# spring - 推土机和弹簧集成

> ID：13323282
> 
> 赞同：7
> 
> 时间：2012-11-10T15:20:33.310
> 
> 标签：spring, dozer

编辑：引入了一个新的库，它阐明了新版本的内容

> 从 5.5.0 版开始，Spring 集成包含在附加模块 dozer-spring 中。

* * *

嗨，我对 Dozer 和 Spring 还比较陌生，对如何将它们实施起来有点困惑。

从推土机网站：[http ://dozer.sourceforge.net/documentation/usage.html](http://dozer.sourceforge.net/documentation/usage.html)

> **弹簧集成** ...

```
<bean id="mapper" class="org.dozer.DozerBeanMapper">
  <property name="mappingFiles">
    <list>
      <value>dozer-global-configuration.xml</value>            
      <value>dozer-bean-mappings.xml</value>
      <value>more-dozer-bean-mappings.xml</value>
    </list>
  </property>
</bean> 
```

现在来自[http://dozer.sourceforge.net/documentation/springintegration.html](http://dozer.sourceforge.net/documentation/springintegration.html)：

```
<bean class="org.dozer.spring.DozerBeanMapperFactoryBean">
    <property name="mappingFiles" value="classpath*:/*mapping.xml"/>
    <property name="customConverters">
        <list>
            <bean class="org.dozer.converters.CustomConverter"/>      
        </list>
    </property>
    <property name="eventListeners">
        <list>
            <bean class="org.dozer.listeners.EventListener"/>
        </list>
    </property>
    <property name="factories">
        <map>
            <entry key="id" value-ref="bean-factory-ref"/>
        </map>
    </property>
</bean> 
```

所以我不确定我应该以哪种方式使用它。我的目标是在我的业务类中有一个映射器对象，它将转换`Business Objects`为`DTO`（和反向）。所以我认为它应该是一个基本的依赖注入？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T17:38:34.773

两者都是有效的方法，只需将此映射器作为依赖项注入负责映射的服务类中，例如：

```
@Service
public class MyMappingService{
 @Autowired DozerBeanMapper dozerBeanMapper;
} 
```

使用 DozerBeanMapperFactoryBean 沿着这些路线的方法应该有效：

```
<bean class="org.dozer.spring.DozerBeanMapperFactoryBean">
....
</bean> 
```

这将返回一个映射器实例，因此只需以这种方式注入一个映射器类型：

```
@Service
public class MyMappingService{
 @Autowired Mapper dozerBeanMapper;
} 
```

# java - 是否可以在 java 中创建 Enum 类型的对象？

> ID：13323296
> 
> 赞同：1
> 
> 时间：2012-11-10T15:22:09.470
> 
> 标签：java

我在项目工作期间在存储库中发现了这种类型的代码。该存储库运行良好......但是当我试图通过独立的测试运行来理解代码时......给出错误！

```
public enum Fruits {
    static {
        APPLE= new Fruits( "APPLE", 0 );
        BANANA = new Fruits( "BANANA", 1 );
       // and so on.
    }
} 
```

我无法理解在枚举中调用枚举构造函数的含义，这也是在没有声明构造函数的情况下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T15:25:29.370

我的猜测是，这*实际上*是反编译真实代码的产物。这不是有效的 Java 源代码，但实际上是编译器将为您创建的枚举：

```
public enum Fruits {
    APPLE, BANANA;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T15:37:09.210

像往常一样，@JonSkeets 的直觉胜出。编译他提供的代码：

```
public enum Fruits {
  APPLE, BANANA;
} 
```

`jad`然后用产量反编译：

```
public final class Fruits extends Enum
{

    public static Fruits[] values()
    {
        return (Fruits[])$VALUES.clone();
    }

    public static Fruits valueOf(String s)
    {
        return (Fruits)Enum.valueOf(Fruits, s);
    }

    private Fruits(String s, int i)
    {
        super(s, i);
    }

    public static final Fruits APPLE;
    public static final Fruits BANANA;
    private static final Fruits $VALUES[];

    static
    {
        APPLE = new Fruits("APPLE", 0);
        BANANA = new Fruits("BANANA", 1);
        $VALUES = (new Fruits[] {
            APPLE, BANANA
        });
    }
} 
```

完整的示例说明了当您声明枚举时编译器为您所做的所有工作。请注意，正如@MarkoTopolnik 指出的那样，您不能自己执行此操作，仅仅是因为编译器不允许这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-10T15:29:08.900

```
 public enum Fruits {
        APPLE("APPLE", 0 ), BANANA("BANANA", 1 );
        String text;
        int value;
        private Fruits(String text, int value){
             this.text = text;
             this.value = value;
        }
        public String getText(){
             return text;
        }
        public int getValue(){
             return value;
        }
    } 
```

当您希望添加更多参数时，此概念很有用。

# c++ - NetBeans 7.2.1 Cpp 错误警告初始化向量

> ID：13323304
> 
> 赞同：2
> 
> 时间：2012-11-10T15:22:47.313
> 
> 标签：c++, netbeans

如果我像下图那样初始化一个向量，我会从 Netbeans 得到这个错误，但 GCC 编译器不会显示错误并成功构建程序。可能是什么原因和解决方案？谢谢![在此处输入图像描述](../Images/f199f3c08a1a60b230b48d3bcde99e1e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:30:50.450

您的代码使用初始化列表来初始化您的`std::vector`. 这是 C++ 2011 引入的一项功能，但不一定支持，但所有系统处理 C++。gcc 在实现新功能方面相当出色，并且最新版本的 gcc 在标准方面相当完整。我不知道 C++ 2011 对 NetBeans 的支持状态，但我认为它尚不支持。

# c - 调试词法分析器问题

> ID：13323307
> 
> 赞同：0
> 
> 时间：2012-11-10T15:23:23.070
> 
> 标签：c, flex-lexer, lexical-analysis

我正在编写一个词法分析器，代码如下：

```
%{
#include <stdio.h>
void showToken(char*);
%}

%%
int main(){
void showToken(char* name){
        printf("<%s,%s>",name,yytext);
}
return 0;
}
%% 
```

我得到以下信息：

```
~/hedor1>cc -c -o lexical.o lexical.c
lexical.l:40: error: expected identifier or â(â before â%â token 
```

我找不到问题出在哪里，而且我必须在代码部分中写：

```
int main(){} 
```

如果我不写上面的 main 函数会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:36:57.027

### 主要问题

Lex (Flex) 分析器中只能有两条`%%`线。

```
...definitions...
%%
...lexical patterns...
%%
...everything else... 
```

Lex 和 Flex 程序只需将第二个`%%`逐字记录后的文件内容复制到生成的 C 代码中。而C在任何时候都不喜欢`%%`。

### 挑剔

您不应该像尝试使用的那样将函数嵌套在彼此内部：

```
int main(){
void showToken(char* name){
        printf("<%s,%s>",name,yytext);
}
return 0;
} 
```

您需要`main()`与`showToken()`. （有一个 GCC 特定的扩展允许嵌套函数。不要使用它。）

* * *

此外，当您在错误消息中有行号时，插入注释以识别源代码中的行会很有帮助。或者描述被识别的线。但是我们不应该计算代码中的行数，即使错误在第 1 行......好吧，也许第 1-3 行不是太关键，但是有一个模糊断点，之后识别行是重要的。到了十几岁的时候，已经接近必不可少了；前 5 行可能并不重要；在 (6-12) 之间，通常最好指明行号。

# android - MapView中的Zoom和onTap混在一起，怎么解决？

> ID：13323308
> 
> 赞同：0
> 
> 时间：2012-11-10T15:23:39.857
> 
> 标签：android, android-mapview, android-maps, android-overlay

我的应用程序中有一个 MapView。我在其中有很多 OverlayItems 带有一点可绘制标记。

如果我触摸一个覆盖项，onTap() 方法就会运行，我会得到一个小对话框。它很好用，但有时当我尝试使用多点触控进行缩放时，我的手指位于覆盖项的顶部，在我完成缩放后会出现对话框。这有点麻烦，因为它不太符合人体工程学，因为您必须在缩放后关闭即将出现的对话框。

我应该如何防止我的应用发生此事件？我根本不想在缩放时运行 onTap()。

我尝试使用 onTouch 事件和 2 个布尔值但不工作：

```
 @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {

         int action = event.getAction() & MotionEvent.ACTION_MASK;

         switch (action) {
                case MotionEvent.ACTION_DOWN: {
                    actionIsDown= true;
                    break;
                }

                case MotionEvent.ACTION_POINTER_DOWN: {

                    pointerIsDown=true;
                        break;
                }
                case MotionEvent.ACTION_POINTER_UP: {

                    pointerIsDown= false;
                        break;
                }
                case MotionEvent.ACTION_UP: {

                    actionIsDown= false;
                        break;
                }
         }

        return super.onTouchEvent(event, mapView);
    } 
```

和 onTap：

```
 @Override
    protected boolean onTap(int index) 
    {

            if(pointerIsDown==false && actionIsDown==false){ //...dialog here 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:25:58.390

您的代码不起作用，因为在发生or时`onTap()`触发了，而不是or 。`MotionEvent.ACTION_POINTER_UP``MotionEvent.ACTION_UP``MotionEvent.ACTION_POINTER_DOWN``MotionEvent.ACTION_DOWN`

要正确测试它，您需要在`UP`操作期间检查移动是否用于缩放地图，然后将其保存为布尔值。

示例代码：

```
Geopoint center = new Geopoint(0,0);
Boolean ignoreTap = false;

@Override
public boolean onTouchEvent(MotionEvent event, MapView mapView) {

     int action = event.getAction() & MotionEvent.ACTION_MASK;

     switch (action) {
            case MotionEvent.ACTION_POINTER_DOWN: {
            case MotionEvent.ACTION_DOWN: {
                center = mapView.getMapCenter();
                ignoreTap = false;
                break;
            }

            case MotionEvent.ACTION_UP: {
            case MotionEvent.ACTION_POINTER_UP: {
                  if(center != mapView.getMapCenter())
                    ignoreTap = true;
                  break;
            }
     }
    return super.onTouchEvent(event, mapView);
} 
```

并在`onTap()`：

```
@Override
protected boolean onTap(int index) 
{
        if(!ignoreTap){ //...dialog here 
```

`Note:`我正在使用地图中心来测试缩放，因为多点触控缩放围绕位于手指中心之间的地图点工作，导致缩放时中心发生变化。您还可以使用地图经度跨度。

# android - 如何使 TableLayout 中的 TableRows 填充所有空间

> ID：13323316
> 
> 赞同：1
> 
> 时间：2012-11-10T15:24:49.120
> 
> 标签：android, xml, tablelayout, tablerow

我有几个 ImageButtons 的 TableLayout。如何使行填充布局中的所有可用空间？

# css - 使用 CSS 而不是图像重新创建此模式？

> ID：13323317
> 
> 赞同：0
> 
> 时间：2012-11-10T15:25:05.000
> 
> 标签：css

我在网上遇到了这种模式，但它是一个图像，我想尽可能避免使用图像作为装饰。

关于如何重新创建这种模式的任何想法？（不包括后面的背景纹理）

![在此处输入图像描述](../Images/aae840bf09e16677306fdd4e458c0835.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:30:46.760

没有跨浏览器，但这里是它的要点：

```
background-color: gray; /* Fallback */
background-image: repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(255,255,255,.5) 35px, rgba(255,255,255,.5) 70px); 
```

取自**[CSS3 模式库](http://lea.verou.me/css3patterns/)**。根据需要进行调整。

# java - 显示正在被拖动的组件 java

> ID：13323318
> 
> 赞同：0
> 
> 时间：2012-11-10T15:25:06.420
> 
> 标签：java, swing, drag-and-drop

我为我的 jlabels 拖放工作，但我想显示被拖动的实际标签。所以我当他们被拖动时，我不想要下面有一个正方形的普通手。所以它应该从它的起始位置消失，并跟随鼠标。我尝试设置位置但它不起作用，鼠标仍然显示通常的图标。我可以让它从它的起始位置消失，但不能完全移动。

如果我使用分层窗格在顶部制作另一个窗格并在那里设置标签的位置，它会起作用吗？

```
private class DragMouseAdapter extends MouseAdapter
    {
        public void mousePressed(MouseEvent e)
        {
            JComponent c = (JComponent)e.getSource();
            TransferHandler handler = c.getTransferHandler();
            c.setLocation(MouseInfo.getPointerInfo().getLocation().x, MouseInfo.getPointerInfo().getLocation().x);
            //c.setOpaque(true);
            handler.exportAsDrag(c, e, TransferHandler.COPY);

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:42:15.423

我会花一些时间看一下 Timothy Wall 的[The Rabbit Hole 的](http://rabbit-hole.blogspot.com.au/)博客，特别是[这个](http://rabbit-hole.blogspot.com.au/2006/04/smooth-jlist-drop-target-animation.html)和[这个](http://rabbit-hole.blogspot.com.au/2006/05/smooth-tree-drop-animation.html)和[这个](http://rabbit-hole.blogspot.com.au/2006/05/my-drag-image-is-better-than-yours.html)和[这个](http://rabbit-hole.blogspot.com.au/2006/06/dead-simple-drags.html)和[这个](http://rabbit-hole.blogspot.com.au/2006/06/fancy-drops.html)和[这个](http://rabbit-hole.blogspot.com.au/2006/07/drag-images-for-everyoneand-we-do-mean.html)还有[这个](http://rabbit-hole.blogspot.com.au/2006/08/drop-target-navigation-or-you-drag.html)和[可能的这个](http://rabbit-hole.blogspot.com.au/2006/08/swing-drag-images-improved.html)

PS - 我会对此发表评论，但它太长了：P

# javascript - 传递特定于函数的变量

> ID：13323325
> 
> 赞同：1
> 
> 时间：2012-11-10T15:25:56.827
> 
> 标签：javascript, jquery, html

假设我有两个看起来像这样的函数：

```
function main(Index)
{
    doStuff();
}

function doStuff()
{
    if(Index == 1)
    {
        document.write("Hello world!")
    }
} 
```

还有一些 HTML：

```
<input type="button" value="Click me" onclick="main(1)" /> 
```

我意识到这是使用特定于函数的变量等的一种非常愚蠢的方式，但这只是出于好奇。那么是否可以将变量`Index`从`main`函数传递给`doStuff`函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:27:30.183

> 那么是否可以将变量 Index 从 main 函数传递给 doStuff 函数？

不，不是没有明确地将其作为参数传递给`doStuff`. 要么`doStuff`需要接受一个参数，要么它可以利用`arguments`集合：

```
function main(index)
{
    doStuff(index);
}

function doStuff()
{
    var index = arguments[0];

    if(index == 1)
    {
        document.write("Hello world!")
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:27:31.953

这是唯一的方法：

```
function doStuff(Index)
{
    if(Index == 1)
    {
        document.write("Hello world!")
    }
} 
```

或使其成为全局变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T16:35:13.340

为什么要将调用转移到`DoStuff`函数？

`Main`对事件做出反应并“做事”不是重点吗？

如果是这种情况，您应该将该功能保留在 中`Main`，如下所示：

```
function Main(index){
    switch (index){
        case 1:
            DoStuff();
            break;
        case 2:
            DoStuff2();
            break;
        default:
            DoStuff(); //Because, why not?
    {
}

function DoStuff(){
    document.write("Hello, world!");
}

function DoStuff2() {//something else happens here} 
```

您没有将`Main`其用作对象，因此不需要持久性（据我所知）。只需切断不必要的电话，您的生活就会变得更简单。但是，如果您一心想要实现这种功能，您可以创建一个简单的闭包。它看起来像这样：

```
<input type="button" onclick="Main(1);" value="Do Something" />

<script type="text/javascript">
function Main(index) {

    //This function only exists within the scope of Main
    function DoStuff() {

        //But now it has the added benefit of knowing about index
        switch (index) {
        case 1:
            alert("Hello, world!");
            break;
        case 2:
            alert("Not, really. I'm mad.");
            break;
        default:
            alert("Hello, world!");
        }
    }

    //Now Main is going to call it's internal function and...
    DoStuff();
}
</script> 
```

由于您`DoStuff`在正文中声明，`Main`这意味着它`DoStuff`存在于的词法范围内，`Main`并且可以访问其所有成员。闭包确实很强大，但很容易被滥用。如果你真的需要这种功能，我建议你走这条路，否则，KISS（保持简单先生）。

# php - 在更新表单中的记录之前获取旧值

> ID：13323331
> 
> 赞同：1
> 
> 时间：2012-11-10T15:26:54.470
> 
> 标签：php, doctrine, symfony-1.4

我有 2 张桌子：照片和相册。在相册表中，我有一个包含该相册照片数量的字段。

当我更改相册时更新照片时，我需要更新相册表的照片数量字段以反映更改。

```
 public function updateObject($values=null)
    {        
        $object = parent::updateObject($values);

        if($this->isNew)
        {
         ...
        }
        else
        {
          $old_album = Doctrine_Core::getTable('Photos')
                        ->find($object->getId())->getAlbums();
          if($old_album != $object->getAlbums()
             //update number of photos
        }
    } 
```

但是`$object->getAlbums()`总是得到相同的值，`$old_album;` 就像我删除`$old_album`得到`$object->getAlbums()`正确的值一样。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:32:40.730

您应该改用该`doUpdateObject()`方法：

```
protected function doUpdateObject($values)
{
  // this is the album object before the update
  $oldAlbum = clone $this->getObject()->getAlbum();

  // refresh the object with the new values
  parent::doUpdateObject($values);

  // it's an update
  if (!$this->isNew())
  {
    // the old album is removed
    if (!$this->getObject()->get('album_id'))
    {
      // decrease the number of pictures in the old album and save it
      $oldAlbum
        ->setNumberOfPictures($oldAlbum->getNumberOfPictures() - 1)
        ->save();
    }
    elseif ($oldAlbum->get('id') != $this->getObject()->get('album_id'))
    {
      // decrease the number of pictures in the old album and save it
      $oldAlbum
        ->setNumberOfPictures($oldAlbum->getNumberOfPictures() - 1)
        ->save();

      // increase the number of pictures in the current album (save not required)
      $this
        ->getObject()
        ->setNumberOfPictures($this->getObject()->getNumberOfPictures() + 1);
    }
  }
  else
  {
    // increase the number of pictures in the current album (save not required)
    $this
      ->getObject()
      ->setNumberOfPictures($this->getObject()->getNumberOfPictures() + 1);
  }
} 
```

这里有很多代码重复，这**不是最好的方法**，因为在更新专辑时你总是必须这样做以保持一致性。

整个逻辑应该移到模型中。**更好的解决方案应该是使用`CountCache`**文档中[此示例中的](http://symfony.com/legacy/doc/more-with-symfony/1_4/en/08-Advanced-Doctrine-Usage#chapter_08_writing_a_doctrine_behavior)**行为。**

# vb.net - 如何使用 Windows 8 RichEditBox 自动缩进新行？

> ID：13323332
> 
> 赞同：1
> 
> 时间：2012-11-10T15:26:56.230
> 
> 标签：vb.net, windows-8

每当在 RichEditBox 中按下键时，我都有以下 VB 代码添加一个 Tab 字符，但我不知道如何做到这一点，所以当最终用户按下返回键时，应用程序将自动缩进，所以你无需多次按 Tab 键即可在每个新行上正确嵌套代码。

任何帮助表示赞赏，谢谢。

KeyDown 上 Tab 插入的当前代码：

```
Private Sub TextBox_KeyDown(sender As Object, e As KeyRoutedEventArgs) Handles TextBox.KeyDown
    If e.Key = Windows.System.VirtualKey.Tab Then
        e.Handled = True
        Dim SelectionText As String = ""
        TextBox.Document.Selection.GetText(Windows.UI.Text.TextGetOptions.None, SelectionText)
        TextBox.Document.Selection.TypeText(vbTab + SelectionText)
    End If
End Sub 
```

# php - 尝试在确认中显示数据时，我不断收到未定义的信息

> ID：13323334
> 
> 赞同：1
> 
> 时间：2012-11-10T15:27:05.247
> 
> 标签：php, javascript, jquery

我在下面有这个 javascript 和 php/html 代码：

```
<script>
          var examInput = document.getElementById('newAssessment').value;
          var dateInput = document.getElementById('newDate').value;
          var timeInput = document.getElementById('newTime').value;

         function showConfirm(){

         var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

         if (confirmMsg==true)
         {
         submitform();   
     }
}

</script> 
```

……

```
<?php

$editsession = "<form action=".htmlentities($_SERVER['PHP_SELF'])." method='post' id='updateForm'>

    <p><strong>New Assessment's Date/Start Time:</strong></p>
    <table>
    <tr>
    <th>Assessment:</th>
    <td><input type='text' id='newAssessment' name='Assessmentnew' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Date:</th> 
    <td><input type='text' id='newDate' name='Datenew' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Start Time:</th> 
    <td><input type='text' id='newTime' name='Timenew' readonly='readonly' value=''/><span class='timepicker_button_trigger'><img src='Images/clock.gif' alt='Choose Time' /></span> </td>
    </tr>
    </table>
    <div id='datetimeAlert'></div>

    </form>
";

echo $editsession;

?> 
```

问题是在确认框中，它没有显示考试名称、日期和时间，这些都显示在 php/html 的文本框中。

例如它应该显示：

您确定要更新以下内容吗： 考试：DFRER 日期：20-02-2013 时间：16:00

相反，它显示：

您确定要更新以下内容吗： 考试：未定义 日期：未定义 时间：未定义

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:30:01.033

`<script>`标签在标记中遇到时立即执行。我们假设您的`<script>`标签出现在它在`getElementById()`调用中引用的 HTML 之前。

由于设置变量的三行发生在任何函数之外，它们会立即执行，因此在加载 DOM 之前，相应的 DOM 元素还不存在并且变量变为`undefined`. 只需将它们移动到函数中即可。这具有额外的好处，即在您随后调用该函数时，这些值都是最新的。

```
 function showConfirm(){
   // Load these variables inside the function
   // If placed outside, their DOM nodes are not yet loaded when the script runs
   var examInput = document.getElementById('newAssessment').value;
   var dateInput = document.getElementById('newDate').value;
   var timeInput = document.getElementById('newTime').value;

   var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

   if (confirmMsg)
   {
     submitform();   
   }
 } 
```

# heroku - Procfile 在哪里？

> ID：13323335
> 
> 赞同：1
> 
> 时间：2012-11-10T15:27:14.607
> 
> 标签：heroku

我正在尝试安装 New Relic，但它说我需要对`Procfile`. 不过，我似乎无法在我的应用程序的本地副本的根目录中找到它。我正在使用 Django。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:36:21.843

Heroku 上的此页面提供了有关 procfile 的更多信息： [https ://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

您不必将一个部署到 Heroku，但您可以手动创建一个以更好地控制 Heroku 如何运行您的应用程序。根据上面链接的摘录：

> 不需要 Procfile 来部署以 Heroku 支持的大多数语言编写的应用程序。该平台会自动检测语言，并创建默认的 Web 进程类型来启动应用程序服务器。
> 
> 建议创建显式 Procfile 以便对您的应用程序进行更好的控制和灵活性。
> 
> 要让 Heroku 使用您的 Procfile，请将 Procfile 添加到应用程序的根目录并推送到 Heroku：

```
$ git add .
$ git commit -m "Procfile"
$ git push heroku
...
-----> Procfile declares process types: web, worker
       Compiled slug size is 10.4MB
-----> Launching... done
       http://strong-stone-297.herokuapp.com deployed to Heroku

To git@heroku.com:strong-stone-297.git
 * [new branch]      master -> master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T11:40:09.147

对于 New Relic 支持，您必须明确告诉 Heroku 在 New Relic 中运行 gunicorn 实例。所以你`Procfile`看起来像这样：

```
newrelic-admin run-program gunicorn --workers 4 --worker-class gevent --timeout 60 mysite.wsgi 
```

`Procfile`您可以通过有条件地在 Heroku 环境变量中查找您的 New Relic 许可证来打开或关闭此功能，而无需更改您的：

```
Procfile:
    web: bash scripts/heroku_run 
```

```
scripts/heroku_run:
    #!/bin/bash

    run_command="gunicorn --workers 4 --worker-class gevent --timeout 60 mysite.wsgi"

    # Run through New Relic monitoring if add-on installed
    if [[ $NEW_RELIC_LICENSE_KEY != '' ]]; then
        newrelic-admin run-program $run_command
    else
        $run_command
    fi 
```

# json - 如何编写一个 Blogger 小部件按字母数字顺序对帖子列表进行排序？

> ID：13323345
> 
> 赞同：1
> 
> 时间：2012-11-10T15:28:45.577
> 
> 标签：json, blogger

您好，我将以下代码作为小部件写入我的博客（Blogger），但是我需要一个字母数字类型的帖子，而不是最新的。谁能帮我？

```
<div id="hlrpsb">
<script style="text/javascript" src="http://helplogger.googlecode.com/svn/trunk/recent-posts-with-titles-only.js"></script>
<script style="text/javascript">
var numposts = 10;
var showpostdate = false;
var showpostsummary = false;
var standardstyling = true;
</script>
<script src="http://myblogaddress.blogspot.com/feeds/posts/default?orderby=published&alt=json-in-script&callback=showrecentposts"></script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T18:24:34.967

我在这方面做了一些研究，除了发布日期之外，无法对帖子进行排序。要按字母顺序排序需要编写自定义代码。无论如何，它只给我们最近的条目，因此基于字母的排序不会给出所有帖子的正确顺序。

# json - 饼图未满

> ID：13323348
> 
> 赞同：0
> 
> 时间：2012-11-10T15:29:28.140
> 
> 标签：json, kendo-ui, kendo-dataviz

我正在尝试用这个 JSON 数据做一个馅饼：

```
[{"status":"Received","number":"2"},{"status":"In Progress","number":"1"}] 
```

这是我的功能：

```
function createChart() {
$("#chart").kendoChart({
    theme: $(document).data("kendoSkin") || "default",
    dataSource: {
        transport: {
            read: {
                url: "http://dev.openbill.co.uk/admin/crud/projects/chart.json.php",
                dataType: "json"
            },
        },
        sort: {
            field: "status",
            dir: "asc"
        },
    },
    chartArea: {
        height: 125,
        width: 125
    },
    legend: {
        visible: false
    },
    seriesDefaults: {
        type: "pie"
    },
    series: [{
        field: "number",
        categoryField: "status",
        padding: 10
    }],
    tooltip: {
        visible: true,
        template: "#= dataItem.status #: #= dataItem.number #"
    }
}); 
```

}

不过有趣的是，馅饼只占了一个圆圈的 1/4。我一直在玩弄这些数字来尝试增长和缩小它们，但我似乎无法让这个东西占据超过 1/4 的馅饼。

有人可以让我知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:24:02.003

在您的图表系列声明中，您已指定该字段为类型编号：

```
 series: [{
        field: "number", 
        categoryField: "status",
        padding: 10
    }], 
```

但实际上在您的 JSON 中，状态字段是一个字符串。将其更改为数字（删除双引号），它应该开始工作。

```
[{"status":"Received","number":2},{"status":"In Progress","number":1}] 
```

# mysql - MySQL 加入表和拉取信息以检查

> ID：13323351
> 
> 赞同：0
> 
> 时间：2012-11-10T15:30:07.697
> 
> 标签：mysql, sql, count

我正在尝试返回在指定日期范围内销售的商品类型的降序列表。

我了解如何获取项目类型的数量并对其进行计数，但我对如何链接到其他表感到困惑。我将把我的工作代码和我认为需要如何完成的伪代码放在一起，非常感谢任何帮助。

```
SELECT Item_Type, COUNT(*) as theAmount
FROM  myDB.Item

//LINK order_ID to item 
//WHERE order_ID includes Item_Type

//Link to session
//Find Ses_Date that order was made

GROUP BY Item_Type
ORDER BY theAmount desc
LIMIT 10 
```

我需要从中提取数据的三个表，显示了所需的字段：

```
Item
PK: Item_ID
Row: Item_Type
FK: Order_ID

Order
PK: Order_ID
FK: Session_ID    

Session
PK: Ses_ID
Row: Ses_date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:37:35.930

```
SELECT   i.Item_Type, COUNT(i.Item_Type) as theAmount
FROM     Item AS i
JOIN     Order AS o ON o.order_ID = i.Order_ID 
JOIN     Session AS s ON s.Ses_ID = o.Session_ID 
WHERE    s.Ses_date between @date1 AND @date2 
GROUP BY i.Item_Type
ORDER BY theAmount DESC
LIMIT    10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:38:13.567

```
SELECT Item_Type, COUNT(*) as theAmount, Session_date
FROM  Item
left outer join Order 
    on Item.Order_id = Order.Order_id
left outer join Session 
    on Order.Session_id = Session.Session_id
GROUP BY Item_Type
ORDER BY theAmount desc
LIMIT 10 
```

上面的查询会给你结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T15:34:28.577

您需要`LEFT JOIN`在这种情况下使用，因此如果您在另一个表上没有匹配的记录，则 for 的值`Item_Type`将为零。

```
SELECT  a.Item_Type, COUNT(c.Ses_ID) theAmount
FROM    Item a
        LEFT JOIN   `Order` b
            ON  a.Order_ID = b.Order_ID
        LEFT JOIN   `Session` c
            ON b.Session_ID = c.Ses_ID
GROUP BY a.Item_Type
-- ORDER BY theAmount DESC
-- LIMIT 10 
```

# javascript - jquery点击和cookies

> ID：13323352
> 
> 赞同：1
> 
> 时间：2012-11-10T15:30:11.040
> 
> 标签：javascript, jquery, html, click, greasemonkey

我有一个可以在特定网站上运行的greasemonkey 脚本。目标是点击特定按钮，删除cookie（**网站在点击时设置cookie，我必须在进行新点击之前删除cookie，但问题是cookie不是用jquery click设置** ）然后重新加载这页纸。并重复该过程。

但是，jquery click 方法不设置 cookie 但人工点击是

这是代码：

```
// ==UserScript==
// @name        name
// @namespace   someName
// @include     http://www.example.com/*
// @version     0.1
// @grant       all
// @require     http://code.jquery.com/jquery-1.8.2.min.js
// ==/UserScript==

function del_cookie(name) {
    document.cookie = name +
    '=; expires=Thu, 01-Jan-70 00:00:01 GMT;path=/;';
} 

function fnc(){

 try{
   $("#elemenID").click();
   del_cookie("elemID");
   location.reload();
  }catch(e){
        alert(e.toString());
   }
}

$(document).ready(function(){

    window.setTimeout(fnc, 10000);   

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:53:35.830

我已经解决了这个问题，问题是时间因素。这是最后的greasemonkey 脚本。

```
// ==UserScript==
// @name        name
// @namespace   someName
// @include     http://www.example.com/*
// @version     0.1
// @grant       all
// @require     http://code.jquery.com/jquery-1.8.2.min.js
// ==/UserScript==

function del_cookie(name) {
            document.cookie = name +
            '=; expires=Thu, 01-Jan-70 00:00:01 GMT;path=/;';
  } 

function fnc(){
 $("#id").click();
}

function fnc2(){
 del_cookie("cookieID");
}

function fnc3(){
    location.reload();
}

$(function(){

        window.setTimeout(fnc2, 10000);   
        window.setTimeout(fnc, 20000);   
        window.setTimeout(fnc3, 30000);
}) 
```

# javascript - 解析错误的 JSON 并能够显示错误的位置

> ID：13323356
> 
> 赞同：12
> 
> 时间：2012-11-10T15:30:22.827
> 
> 标签：javascript, json, node.js, validation, error-handling

这不是关于如何管理或纠正错误 JSON，而是关于如何向用户解释错误在错误 JSON 中的位置。

有没有办法找出解析器在 JSON 中的哪个位置失败。

我想在 node.js 应用程序中解决此问题，因此请尽可能将您的答案保留在该域中。

当我使用内置 JSON 对象和错误 JSON 的 parse 方法时，我只收到异常消息**`SyntaxError: Unexpected string`**。我想知道错误发生在哪里。

首选的`JSON.validate(json)`是返回结果 ok/error 和错误位置。像这样的东西：

```
var faultyJsonToParse = '{"string":"value", "boolean": true"}';
var result = JSON.validate(faultyJsonToParse);
if (result.ok == true) {
   console.log('Good JSON, well done!');
} else {
   console.log('The validator found a \'' + result.error + '\' of type \'' + result.errorType + '\' in your JSON near position ' + result.position);
} 
```

上述想要的结果是：

```
The validator found a 'SyntaxError' of type 'Unexpected string' in your JSON near position 35. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T16:08:13.873

尝试[jsonLint](http://zaach.github.com/jsonlint/)：

```
var faultyJsonToParse = '{"string":"value", "boolean": true"}';

try {
    jsonlint.parse(faultyJsonToParse)
} catch(e) {
    document.write('<pre>' + e)
} 
```

结果：

```
Error: Parse error on line 1:
...ue", "boolean": true"}
-----------------------^
Expecting 'EOF', '}', ',', ']', got 'undefined' 
```

（虽然jsonLint是一个node项目，但是也可以在web中使用：直接抓取[https://github.com/zaach/jsonlint/blob/master/web/jsonlint.js](https://github.com/zaach/jsonlint/blob/master/web/jsonlint.js)）

正如@eh9 所建议的，围绕标准 json 解析器创建一个包装器以提供详细的异常信息是有意义的：

```
JSON._parse = JSON.parse
JSON.parse = function (json) {
    try {
        return JSON._parse(json)
    } catch(e) {
        jsonlint.parse(json)
    }
}

JSON.parse(someJson) // either a valid object, or an meaningful exception 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:48:30.850

的内置版本`JSON.parse()`没有一致的行为。当论证结构良好时它是一致的，如果不是则不一致。这可以追溯到原始 JSON 库实现中此函数的不完整规范。该规范是不完整的，因为它没有为异常对象定义接口。而这种情况直接导致你的问题。

虽然我目前不知道现成的解决方案，但该解决方案需要编写 JSON 解析器并跟踪位置信息以进行错误处理。这可以通过以下方式无缝插入到您现有的代码中：（1）首先调用本机版本，以及（2）如果本机版本抛出异常，调用位置感知版本（它会更慢）让它抛出异常您自己的代码标准化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-14T14:58:55.927

如果您使用的是 NodeJS，clarinet 是一个非常好的基于事件的 JSON 解析器，它将帮助您生成更好的错误消息（行和列或错误）。我使用[单簧管的解析器](https://github.com/dscape/clarinet)构建了一个小实用程序，它返回：

```
snippet (string): the actual line where the error happened
line (number)   : the line number of the error
column (number) : the column number of the error 
message (string): the parser's error message 
```

代码在这里：[https ://gist.github.com/davidrapin/93eec270153d90581097](https://gist.github.com/davidrapin/93eec270153d90581097)

# facebook - 无法设置简单的应用

> ID：13323360
> 
> 赞同：0
> 
> 时间：2012-11-10T15:30:51.650
> 
> 标签：facebook, configuration

我无法设置我的第一个应用程序。

它只是一个'hello world' php，位于：[http ://www.mysite.com/apps/myphp.php](http://www.mysite.com/apps/myphp.php)

显示名称：我的应用程序名称空间：myapp 沙盒模式：是

--

画布网址：[http ://www.mysite.com/apps/](http://www.mysite.com/apps/)

保存更改...

--

然后在我的应用程序选项卡中，我找到了应用程序的详细信息并使用 [https://apps.facebook.com/123645844460042/](https://apps.facebook.com/123645844460042/)我发现找不到该页面。

我错过了什么，我想当我转到上面的 url 时，我会找到我的 Hello 世界。希望任何人都可以帮助我。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:41:42.037

好吧，首先，即使您提供的链接也不存在：[http](http://www.mysite.com/apps/myphp.php) ://www.mysite.com/apps/myphp.php - 我收到“找不到页面”错误。

其次，你为什么将你的画布 URL 设置为不同的 URL？只有在文件夹中有任何 index.php（或 index.html）时它才会起作用，但我也会得到“找不到页面”。

无意冒犯，但在开始使用 Facebook 应用程序之前，您应该了解一些其他方面的知识（Web 服务器、PHP、...）

顺便说一句，还请记住，您需要具有用于 Facebook 应用程序的 SSL 证书的服务器。

# ruby-on-rails - Ruby 2.0 上的 Rails 3-2-stable，捆绑包上的 Psych 错误

> ID：13323363
> 
> 赞同：1
> 
> 时间：2012-11-10T15:31:27.653
> 
> 标签：ruby-on-rails, ruby-2.0

由于[Sprockets 中的一个问题在 Ruby 2.0 中失败](https://stackoverflow.com/questions/13290353/new-rails-3-2-8-app-not-loading-jquery/13309024#comment18172505_13309024)，我需要将我的 Rails 版本更新到最新版本。结果，我的 Gemfile 看起来像这样：

```
gem 'rails', git: 'git://github.com/rails/rails.git', branch: "3-2-stable" 
```

然后导致如下所示的堆栈跟踪。Rails edge 也出现了同样的问题，尽管他们正在针对 Ruby 2.0 运行他们的测试套件，因此它必须兼容。

所以我猜可能存在 Rails 或 Ruby 构建的依赖库与 Ruby 2.0-preview1 不兼容

```
> bundle
Updating git://github.com/rails/rails.git
Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
.rvm/rubies/ruby-2.0.0-preview1/lib/ruby/2.0.0/psych.rb:205:in `parse': (<unknown>): mapping values are not allowed in this context at line 8 column 35 (Psych::SyntaxError)
  from .rvm/rubies/ruby-2.0.0-preview1/lib/ruby/2.0.0/psych.rb:205:in `parse_stream'
  from .rvm/rubies/ruby-2.0.0-preview1/lib/ruby/2.0.0/psych.rb:153:in `parse'
  from .rvm/rubies/ruby-2.0.0-preview1/lib/ruby/2.0.0/psych.rb:129:in `load'
  from .rvm/rubies/ruby-2.0.0-preview1/lib/ruby/site_ruby/2.0.0/rubygems/specification.rb:491:in `from_yaml'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler.rb:294:in `block in load_gemspec_uncached'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler.rb:291:in `chdir'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler.rb:291:in `load_gemspec_uncached'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler.rb:282:in `load_gemspec'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/source.rb:411:in `block in load_spec_files'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/source.rb:410:in `each'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/source.rb:410:in `load_spec_files'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/source.rb:799:in `load_spec_files'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/source.rb:381:in `local_specs'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/source.rb:774:in `specs'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/definition.rb:491:in `block in converge_locked_specs'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/definition.rb:480:in `each'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/definition.rb:480:in `converge_locked_specs'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/definition.rb:166:in `resolve'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/definition.rb:113:in `specs'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/definition.rb:108:in `resolve_remotely!'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/installer.rb:81:in `run'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/installer.rb:14:in `install'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/cli.rb:230:in `install'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/task.rb:27:in `run'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/vendor/thor.rb:275:in `dispatch'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/base.rb:408:in `start'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/bin/bundle:14:in `block in <top (required)>'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
  from .rvm/gems/ruby-2.0.0-preview1@global/gems/bundler-1.2.1/bin/bundle:14:in `<top (required)>'
  from .rvm/gems/ruby-2.0.0-preview1@global/bin/bundle:19:in `load'
  from .rvm/gems/ruby-2.0.0-preview1@global/bin/bundle:19:in `<main>'
  from .rvm/gems/ruby-2.0.0-preview1@album_releases/bin/ruby_noexec_wrapper:14:in `eval'
  from .rvm/gems/ruby-2.0.0-preview1@album_releases/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:37:14.537

这是 Bundler 中的一个错误，如下所述：[https ://github.com/rails/rails/issues/8136](https://github.com/rails/rails/issues/8136)

它已经被修复了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:46:14.160

我有这个问题。这是由于在gemspec（在我的情况下是Prawn）中的heredoc中看到像“this：”这样的代码并认为它​​是一个散列引起的。我相信这是 2.0.0-preview1 的回归，因为我之前有过 ruby​​-head，但没有遇到这个问题。

# meteor - 依赖选择框流星

> ID：13323366
> 
> 赞同：3
> 
> 时间：2012-11-10T15:31:56.620
> 
> 标签：meteor

我试图围绕流星依赖项和反应变量。我有两个选择框。一个列出一个类别（水果、蔬菜、家禽等），第二个将列出子类别（苹果、梨、葡萄等）。

我希望用户更改类别下拉列表以显示和填充子类别下拉列表。

我知道我可以观看 Template.action_form.events ={'change #category'}... 但我不确定从这里采取什么步骤。一种想法（hack）是将所有子类别输出到多维数组并使用 jquery 来管理它。我不得不认为有一种更聪明的方法可以用流星做到这一点。

对于类别下拉列表，我有这样的内容：

```
Template.action_form.category = function(id){
    return Category.find();
} 
```

我不确定如何为子类别设置模板......现在我有这个（不工作）

```
Template.action_form.subcategory = function(parent){
  if (document.getElementById(parent)){
      category = document.getElementById(parent).value;
      return Subcategories.find({category_id:parent}); 
  }
} 
```

HTML/模板如下所示：

```
<template name="action_form">
    <select id="category" class="action-selects">
        {{#each category _id}}
        <option value="{{_id}}">{{name}}</option>
        {{/each}}
    </select>
    <select id="subcategory" class="action-selects">
        {{#each subcategory "category"}}
        <option value="{{_id}}">{{name}}</option>
        {{/each}}
    </select>
<template> 
```

感谢大家提供的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:35:10.580

如果你想为此使用流星的整个反应魔法，你可以在第一个选择发生变化时设置一个 Session 变量。

```
Template.action_form.events = {
  'change #category': function(evt) {
     Session.set("selected_category", evt.currentTarget.value);
  }
} 
```

您的订阅`Subcategories`将所选类别作为参数传递给服务器发布方法。

```
// Client
Meteor.autosubscribe(function () {
  Meteor.subscribe("subcategories",Session.get("selected_category"));
}

// Server
Meteor.publish("subcategories", function(selectedCategory) {
  Subcategories.find({category_id: selectedCategory})  
}); 
```

`Subcategories`如果找到，子类别的模板将显示所有。

```
Template.action_form.subcategory = function(parent){
  Subcategories.find();
}; 
```

当然，您可以一次发布所有子类别（不知道您将拥有多少子类别）并在客户端中过滤子类别，而不是在订阅/发布方法中。

```
Template.action_form.subcategory = function(parent){
  Subcategories.find({category_id: Session.get("selected_category")});
}; 
```

# css - .eot 在 IE 中不起作用

> ID：13323370
> 
> 赞同：10
> 
> 时间：2012-11-10T15:32:46.557
> 
> 标签：css, fonts, font-face

我正在使用 CSS 导入字体。但是，它似乎在 IE 中不起作用。我不知道为什么。

这是我的 CSS 代码：

```
 @font-face {
    font-family: 'bello';
    src: url('../fonts/bello.eot?');
    src: url('../fonts/bello.eot?#iefix') format('embedded-opentype'),
         url('../fonts/bello.woff') format('woff'),
         url('../fonts/bello.ttf') format('truetype'), 
         url('../fonts/bello.svg#bello') format('svg');

    font-weight: normal;
    font-style: normal;
              }
.bello { 
    font-family: "bello", Verdana, Tahoma;
} 
```

我已将 .eot、.svg、.woff、.ttf 和 .otf 添加到文件夹字体中。它在除 IE 之外的所有浏览器中都能正确显示。为了创建 .eot 文件，我使用了这个网站：[http](http://www.kirsle.net/wizards/ttf2eot.cgi) ://www.kirsle.net/wizards/ttf2eot.cgi 。

我不知道为什么它不起作用。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-11T02:31:35.390

解决了问题，不是eot文件的问题。如果家族名称与字体的全名不同，IE 似乎在查找 .eot 文件时遇到问题。在我的例子中，字体名称是bello-script，字体系列是bello。改变了他们两个，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-26T09:34:29.953

我遇到了类似的问题。与其他响应一样，它似乎不是 .eot 文件的问题，而是字体系列值长度的问题。

更改 @font-face 和以下引用：

```
font-family: Titillium Web Extra Light Italic 
```

到：

```
font-family: Titillium Web Light Italic 
```

为我修好了。总是期望 IE 会因为任何原因而崩溃......

# ios - iOS 使用 GPS 设备获取当前位置

> ID：13323373
> 
> 赞同：0
> 
> 时间：2012-11-10T15:33:09.863
> 
> 标签：ios, gps, location

我想使用 CLLocationManager 使用 GPS 天线获取当前用户位置，而不是蜂窝网络。我怎样才能确保这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:03:13.130

您的选择是标准位置服务（例如`startUpdatingLocation`，您可以为其指定`desiredAccuracy`）或低功率显着变化服务（例如，`startMonitoringSignificantLocationChanges`）。但是你一般不会根据硬件来指定定位服务，而是根据你的应用的功能需求来指定定位服务。如果您需要准确的位置，请使用标准服务，如果您不需要相同级别的精度，请尝试使用重大变更服务。

有关详细信息，请参阅[位置感知指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)。

# css - 无法对齐 标签

> ID：13323376
> 
> 赞同：0
> 
> 时间：2012-11-10T15:33:34.770
> 
> 标签：css, html, alignment, center

我有几个对齐`<div>`标签的问题，可以在[这里](http://jsfiddle.net/yotamoo/cr8s8/)看到。布局是这样的：我有一个容器页眉，里面有一个页眉、一个页脚，在它们之间有两个左右 div。我的问题是右侧和页脚，即使它们假设从`<body>`标签继承它，它们也没有与中心对齐。

此外，由于某种原因，页面可以向右滚动一点，并且在那个小部分中，背景没有着色。

这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Rock-paper-scissers</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<script src="rps.js"></script>
<style type="text/css">
body{
    width: 100%;
    font: 100.01% "Trebuchet MS",Verdana,Arial,sans-serif;
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#93e1d1), to(#d4c87c));
    background-image: -webkit-linear-gradient(left, #93e1d1, #d4c87c); 
    background-image: -moz-linear-gradient(top, #93e1d1, #d4c87c);
    background-repeat: no-repeat;
}
div#footer {
    width: 100%;
}
div#container {
    text-align: center;
}
div.InnerLeft {
    width: 50%;
    position: relative;
    float: left;
}
div.InnerRight {
    width: 50%;
    position: relative;
    float: right;
}
select {
    background: transparent;
    width: 220px;
    padding: 5px;
    font-size: 16px;
    border: 0px;
    height: 34px;
}
img#andale {
    margin-left: auto;
    margin-right: auto;
    margin-left: 100px;
}
</style>
</head>
<body>
<div id="container">
<img src="header.png">
<div class="InnerLeft">
<img src="uno.png"><br>
<select id="p1" onchange="change('p1','rpsleft')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="rpsL.png" id="rpsleft"></p>
</div>
<div class="InnerRight">
<img src="dos.png"><br>
<select id="p2" style="margin-left:45%;" onchange="change('p2','rpsright')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="rps.png" id="rpsright" style="margin-left:45%;"></p>
</div>
<div id="footer">
<img src="andale.png" id="andale" onclick="rps(document.getElementById('p1').value,document.getElementById('p2').value)"
onMouseOver="document.getElementById('andale').src='andale2.png'"
onMouseOut="document.getElementById('andale').src='andale.png'">
</div>
</div>
</body> 
```

有什么想法可以解决这两个小问题吗？

谢谢！

Ps 我厌倦了将图像源设置到我的保管箱和谷歌驱动器帐户，以便可以在 jsFiddle 上看到它们，但它不起作用。关于我可以使用哪个网站的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:57:37.617

好的，那么一些小事...

（示例：http: [//jsfiddle.net/mori57/cr8s8/29/](http://jsfiddle.net/mori57/cr8s8/29/)）

```
<!-- for one, without a specified width and height
     the browser doesn't know how to flow the other elements
     around this object ... I used placehold.it to show you what
     happens if you put in an object with actual dimensions -->
<img src="http://www.placehold.it/400x50"> 
```

没有指定尺寸的图片，因为浏览器无法加载图片，浏览器默认为一个很小的图片，第一个浮动包裹在它前面，就像 float:left 所要求的那样。

您/可以/也将这些浮动包装在一个容器中，并强制将其清除：两者，以避免浮动在您的标题图像前面。

第二：

```
 <!-- Your extra space was due to the margin-left you shimmed onto 
         this select tag. If you take it out, the extra horiz
         scrolling goes away -->
    <select id="p2" onchange="change('p2','rpsright')"> 
```

请记住，带有边距的对象 /inside/ 另一个容器 /can/ “戳穿”了容器的边界。因此，它在其容器的边缘添加了它的边缘，并将自己推过它的容器的“墙壁”，增加了所需的水平空间。

# shellcode - Shell代码打印字符（64位）

> ID：13323379
> 
> 赞同：0
> 
> 时间：2012-11-10T15:33:55.210
> 
> 标签：shellcode

我对这个 shell 代码有疑问。当我运行汇编代码时，它会打印字符，但是当我从 c 调用它作为函数时它不会。我使用 gdb 测试了所有执行的指令，它似乎执行了所有指令。这很奇怪，因为我同时调试了 asm 和 c 版本，它们的功能相同，但是在 int 0x80 中，它不会为 C 代码打印任何内容。这是C代码：

```
#include <stdio.h>
#include <sys/mman.h>
#include <string.h>
#include <stdlib.h>

int (*sc)();
/****************************************************************
    0000000000000000 <main>:                                      /
       0:   48 31 c9                xor    %rcx,%rcx              /
       3:   48 31 c0                xor    %rax,%rax              /
       6:   eb 13                   jmp    1b <n>                 /
                                                                  /
    0000000000000008 <et>:                                        /
       8:   59                      pop    %rcx                   /
       9:   48 31 c0                xor    %rax,%rax              /
       c:   48 31 db                xor    %rbx,%rbx              /
       f:   48 31 d2                xor    %rdx,%rdx              /
      12:   b0 04                   mov    $0x4,%al               /
      14:   b3 01                   mov    $0x1,%bl               /
      16:   b2 01                   mov    $0x1,%dl               /
      18:   cd 80                   int    $0x80                  / 
      1a:   c3                      retq                          /
                                                                  /
    000000000000001b <n>:                                         /
      1b:   e8 e8 ff ff ff          callq  8 <et>                 /
                                                                  /
    0000000000000020 <abc>:                                       /
      20:   77                      .byte 0x77                    /
        ...                                                       /
******************************************************************/

char shellcode[] = "\x48\x31\xc9\x48\x31\xc0\xeb\x13\x59\x48\x31\xc0\x48\x31\xdb\x48\x31\xd2\xb0\x04\xb3\x01\xb2\x01\xcd\x80\xc3\xe8\xe8\xff\xff\xffw";
//char shellcode[] = "\x48\x31\xc9\x48\x31\xc0\xeb\x11\x59\xb0\x04\xb3\x01\xb2\x01\xcd\x80\x48\x31\xc0\x48\xff\xc0\xcd\x80\xe8\xea\xff\xff\xffw";

int main(int argc, char **argv) {

    char *ptr = mmap(0, sizeof(shellcode),
            PROT_EXEC | PROT_WRITE | PROT_READ, MAP_ANON
            | MAP_PRIVATE, -1, 0);

    if (ptr == MAP_FAILED) {
        perror("mmap");
        exit(-1);
    }

    memcpy(ptr, shellcode, sizeof(shellcode));
    sc = ptr;

    (void)((void(*)())ptr)();
    printf("\n");

    return 0;
} 
```

这是 nasm 代码：

```
global main

main:                           ; main

xor rcx, rcx            ; eficient way turning register to 0
xor rax, rax            ; exclusive or

jmp n            
et: 
pop rcx

xor rax, rax
xor rbx, rbx
xor rdx, rdx
mov al, 4                      ; Number of system call (write)
mov bl, 1                      ; argument(1=stdout)
mov dl, 1                      ; number of characters
int 0x80

ret

n:
call et
abc:    db 'w' 
```

编辑：我已经解决了这个问题。在这个网页中：[http](http://www.exploit-db.com/papers/13065/) ://www.exploit-db.com/papers/13065/我发现在 64 位中，系统调用必须使用 int 0x80 的 syscall insted 调用，并且参数的寄存器不同。然后我找到了另一个网页：[http](http://cs.lmu.edu/~ray/notes/linuxsyscalls/) ://cs.lmu.edu/~ray/notes/linuxsyscalls/ 。它有一些关于做这些系统调用的例子，认为这是一个很好的网页。

但现在的问题是，为什么它可以与 Nasm 代码一起使用？是否与兼容性有关？可能是因为汇编器检测到 int 0x80 指令而汇编器代码在兼容模式下运行，而在 C 语言中编译器无法解释，因为它无法解释 shellcode？

我把工作的 C 代码留在这里：

```
#include <stdio.h>
#include <sys/mman.h>
#include <string.h>
#include <stdlib.h>

int (*sc)();
/****************************************************************
    0000000000000000 <main>:                                    /
       0:   48 31 c9                xor    %rcx,%rcx            /
       3:   48 31 c0                xor    %rax,%rax            /
       6:   eb 16                   jmp    1e <n>               /
                                                                /
    0000000000000008 <et>:                                      /
       8:   5e                      pop    %rsi                 /
       9:   48 31 c0                xor    %rax,%rax            /
       c:   48 31 db                xor    %rbx,%rbx            /
       f:   48 31 d2                xor    %rdx,%rdx            /
      12:   b0 01                   mov    $0x1,%al             /
      14:   b3 01                   mov    $0x1,%bl             /
      16:   48 89 df                mov    %rbx,%rdi            /
      19:   b2 01                   mov    $0x1,%dl             /
      1b:   0f 05                   syscall                     /
      1d:   c3                      retq                        /
                                                                /
    000000000000001e <n>:                                       /
      1e:   e8 e5 ff ff ff          callq  8 <et>               /
                                                                /
    0000000000000023 <abc>:                                     /
      23:   77                      .byte 0x77                  /
                                                                /
****************************************************************/

char shellcode[] = "\x48\x31\xc9\x48\x31\xc0\xeb\x16\x5e\x48\x31\xc0\x48\x31\xdb\x48\x31\xd2\xb0\x01\xb3\x01\x48\x89\xdf\xb2\x01\x0f\x05\xc3\xe8\xe5\xff\xff\xffw";
//char shellcode[] = "\x48\x31\xc9\x48\x31\xc0\xeb\x13\x59\x48\x31\xc0\x48\x31\xdb\x48\x31\xd2\xb0\x04\xb3\x01\xb2\x01\xcd\x80\xc3\xe8\xe8\xff\xff\xffw";
//char shellcode[] = "\x48\x31\xc9\x48\x31\xc0\xeb\x11\x59\xb0\x04\xb3\x01\xb2\x01\xcd\x80\x48\x31\xc0\x48\xff\xc0\xcd\x80\xe8\xea\xff\xff\xffw";

int main(int argc, char **argv) {

    char *ptr = mmap(0, sizeof(shellcode),
            PROT_EXEC | PROT_WRITE | PROT_READ, MAP_ANON
            | MAP_PRIVATE, -1, 0);

    if (ptr == MAP_FAILED) {
        perror("mmap");
        exit(-1);
    }

    memcpy(ptr, shellcode, sizeof(shellcode));
    sc = ptr;

    (void)((void(*)())ptr)();
    printf("\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:27:34.707

您可能正在将 ELF 文件构建为 32 位文件。即使您的操作系统是 64 位，如果二进制文件是 32 位，它也会以兼容模式运行。

在 Windows 上也会发生同样的事情（称为“Windows-on-Windows-64”或“WOW64”）。

# wordpress - 每个博客页面上的 html 元素

> ID：13323380
> 
> 赞同：0
> 
> 时间：2012-11-10T15:33:56.047
> 
> 标签：wordpress, wordpress-theming

我的自定义首页上有一个选项卡覆盖。选项卡头从屏幕边缘延伸，单击时，选项卡主体延伸到框架中。是否有一个 php 模板页面，我可以将这个 html/javascript 代码导入其中，以便我的标签显示在每个博客页面和帖子上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:06:54.960

这实际上取决于您使用的主题，但假设主题遵循[WP 主题约定](http://codex.wordpress.org/Theme_Development#Template_File_Checklist)，我建议将您的代码粘贴在 header.php 文件中 - 大多数页面和帖子模板调用 wp_head() 因此您的代码应该出现在大多数情况下如果您将其粘贴在标题中，则并非所有博客页面和帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:07:10.283

大多数主题在每个页面上都有一个[`header.php`和一个。`footer.php`](http://codex.wordpress.org/Theme_Development#Basic_Templates)你可以把你的代码放在那里，或者，更好的是，建立一个[子主题](http://codex.wordpress.org/Child_Themes)。您也可以挂接到[`wp_footer`](http://codex.wordpress.org/Function_Reference/wp_footer).

# ant - ant not working：命令的语法不正确

> ID：13323381
> 
> 赞同：3
> 
> 时间：2012-11-10T15:34:03.603
> 
> 标签：ant

几天前，我按照[此处](http://www.youtube.com/watch?v=VlnjT2iSCpk)的说明修复了笔记本电脑上的蓝屏问题 。从那时起，我无法运行 apache ant 工具。至于我的系统变量：

1)ANT_HOME---->C:\Ant\apache-ant-1.8.3

2)JAVA_HOME--->C:\Program Files\Java\jdk1.7.0_03

3)PATH-------->%JAVA_HOME%\bin;C:\Program Files\Java\jre7\bin;C:\Program Files\Android\android-sdk\platform-tools;C:\Program文件\Android\android-sdk\tools;%ANT_HOME%\bin

当我在命令 shell 中键入 ant 时，输出是“命令的语法不正确”。我正在开发 Windows Vista 操作系统。你知道发生了什么吗？它与我修复的蓝屏问题有关吗？请帮我..

# ruby - 与 ruby 实时通信

> ID：13323382
> 
> 赞同：2
> 
> 时间：2012-11-10T15:34:07.147
> 
> 标签：ruby, polling

我即将用 ruby​​ 编写一个游戏服务器。游戏的一项功能包括玩家四处走动，其他人应该能够看到它。

我已经使用事件机编写了一个纯套接字演示。但由于大部分通信都是基于 http 的，所以我正在寻找一些 http 轮询解决方案。当然，我可以用事件机器编写它，但是已经有适合这种工作的宝石了吗？

我尝试过类似 faye 的东西，但其中大部分是用于消息传递系统的，比如订阅和发布到频道，我似乎无法控制我应该推送到哪些客户端。就我而言，我需要能够推动特定客户，例如一个人从 10,10 移动到 20,20，只有他周围的人（可能从 0,0 到 30,30，但不是 40,50 的人) 需要接收消息。

------------ 抽筋前兆

这是一个快速更新。我正在处理抽筋问题，有 5000 个连接，每秒有 100 个客户端移动，CPU 使用率几乎是 100%。当我把这两个数字翻倍时，CPU使用率仍然是100%左右，响应很慢。

显然，我并没有使用我拥有的所有资源，而是只占用了一个 CPU 内核。需要更多的工作。

------------轮到Node.js

@aam1r 实际上 Node.js 比 cramp 做得更好。每秒有 5000 个连接和 100 个客户端移动，CPU 使用率超过 60%。当我翻倍到每秒 10000 个连接和 200 个客户端移动时，CPU 使用率为 100%，响应变慢。同样的问题，无论是 cramp 还是 Node.js，每个进程只能使用一个 cpu 核心。那是个问题。

------------JRuby呢？

由于[GIL](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)的存在，Ruby MRI 没有真正的多线程同时执行。Node.js 也没有。所以我要试试 JRuby。

*   当客户端移动时，使用另一个线程查找所有其他需要通知的客户端（这是一项 CPU 繁重的工作）。然后将结果推送到通道。

*   主线程只是订阅频道。当它得到结果时，将它们推送给客户。

不过需要一些时间来编写演示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:26:33.927

我建议将[Espresso](http://e.github.com/)与服务器发送的事件一起使用。

在服务器端，您定义一个流式操作：

```
class App < E
  map :/

  attr_reader :connections

  def subscribe
    @connections ||= []
    stream :keep_open do |conn|
      connections << conn
      conn.callback { connections.delete conn }
    end
  end

  private
  def communicate_to_clients
    connections.each do |conn|
      conn << 'some message'
    end
end 
```

:keep_open 选项将指示服务器不关闭连接。

然后用 Javascript 打开一个连接：

```
pool = new EventSource('/subscribe');
pool.on_message = function(msg) {
  // here you receive messages sent by server
  // via communicate_to_clients method
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:39:35.617

我建议不要使用轮询。轮询会导致过多的开销，因为每次发出新请求时都会建立新连接。此外，它对您来说不够实时（即您将每 X 秒轮询一次——不是立即）

相反，我建议使用像[Cramp](http://cramp.in/)这样的东西。从他们的网站：

> Cramp 是一个完全异步的 Ruby 实时 Web 应用程序框架。它建立在 EventMachine 之上，主要设计用于处理大量开放连接并提供全双工双向通信。

您的所有客户端都将保持一个持久连接，他们可以通过该连接发送/接收消息。每次建立新连接都不会产生开销，并且消息将实时发送，因为客户端不会“每 X 秒”检查一次。

您也可以使用[Node.js](http://nodejs.org/)代替 Cramp。它是一个 Javascript 框架，可用于开发实时应用程序。

以下是一些可以帮助您的更多资源：

*   [在 Ruby 中使用 Node.js 的幻灯片](http://www.slideshare.net/mbleigh/nodejs-and-ruby)
*   [关于“实时 ruby​​ 应用程序：CRAMP 与 NODE.JS”的讨论](https://stackoverflow.com/questions/2785531/real-time-ruby-apps-cramp-vs-node-js)

# windows-phone - WinPhone 8 AppBar 图标大小

> ID：13323383
> 
> 赞同：9
> 
> 时间：2012-11-10T15:34:19.220
> 
> 标签：windows-phone, windows-phone-8, application-bar

[Windows Phone 8 应用栏指南](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431806%28v=vs.105%29.aspx)指出 AppBar 按钮图标应为 48x48 像素。它还说可以在`C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Icons`.

但是那里的图像是76x76px。他们工作得很好，至少在他们做的模拟器上。

那么合适的尺寸是多少？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-10T23:33:00.470

> 那么合适的尺寸是多少？

76x76，因为那时您支持更高的分辨率。如果您使用 48x48，它会针对 WXGA 和 720p 放大，而不是缩小（针对 WVGA），质量会稍差一些。

该因子大约为 1.6，与[Tile Sizes相同](https://stackoverflow.com/questions/12837720/windows-phone-8-startscreen-tile-sizes-and-margins/12958512)

为了证明这一点，这是我们的应用程序，使用 76x76 应用程序图标：[Skype | Windows 手机商店](http://www.windowsphone.com/en-us/store/app/skype/c3f8e570-68b3-4d6a-bdbb-c0a3f4360a51)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T05:12:19.653

正如上面的人所说，它们是 48x48px，但是您看到的 76x76px 是用于与 Visual Studio 默认设置的屏幕尺寸不同的设备。

如果您正在寻找任何其他图标，请查看 Templarian 的开源图标项目[http://modernuiicons.com/](http://modernuiicons.com/)。.zip 包括浅色和深色主题图标以及初始 Expressions Blend .design 文件和图标的 .xaml 编码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-10T18:08:08.373

它们必须至少为 48x48，您可以有更大的（正方形）尺寸，并且会相应缩小。

# sql - 从 2 表中选择行，其中行 x（在表 a 中）等于某个值

> ID：13323385
> 
> 赞同：1
> 
> 时间：2012-11-10T15:34:21.420
> 
> 标签：sql

我有两张桌子

桌子`login`

```
account_id    |    name
========================
12345         |    thuong1
12346         |    thuong2
12347         |    thuong3 
```

桌子`char`

```
account_id    |    char
========================
12345         |    name1
12345         |    name2
12345         |    name3
12345         |    name4 
```

我要选择...

`SQL 1`

`SELECT account_id FORM char WHERE char='name1'`

我会有结果

`12345`

`SQL 2`

`SELECT login.account_id, login.name, char.char WHERE login.account_id=char .account_id GROUP BY login.account_id , login.name, char.account_id, char.char HAVING login.account_id = 12345`

结果

```
account_id | name    | char  
12345      | thuong1 | name1  
12345      | thuong1 | name2  
12345      | thuong1 | name3 
```

我如何用 1 个 sql 查询选择它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:37:51.437

```
SELECT  a.account_ID,
        a.name, 
        b.char
FROM    login a
        INNER JOIN char b
            ON a.account_ID = b.account_ID
WHERE   a.name='thuong1' 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/80c93/4)

# iphone - Cocos2d：检测精灵上的闪烁状态

> ID：13323388
> 
> 赞同：0
> 
> 时间：2012-11-10T15:34:34.710
> 
> 标签：iphone, objective-c, cocos2d-iphone, blink

我想在一些精灵中使用闪烁效果（这些精灵代表土地）。我虽然通过使用眨眼动画（使用 CCBlink）来做到这一点。但问题是我需要知道何时显示精灵图像，何时不显示，因为如果我的角色踩到土地并且没有显示精灵图像，我的角色应该死（它掉下来） .

那么，有什么方法可以知道图像帧是否显示在 CCBlink 动画中？或者我必须手动模拟眨眼动作？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:23:00.500

*CCBlink*通过多次来回切换 CCSprite 的*可见*属性来工作。

*因此，我认为您可以通过检查该精灵的可见*属性（可能在您的游戏更新循环中）来检查您的角色是否站在当前可见的精灵上：

```
if (playerStandingOnLandPiece && !landPiece.visible)
{
    // player is dead.
} 
```

# sql - 适用于 Mac 的 Oracle 10g/11g

> ID：13323391
> 
> 赞同：1
> 
> 时间：2012-11-10T15:35:11.027
> 
> 标签：sql, macos, oracle

我正在尝试借助“示例 Oracle SQL”一书来学习 Oracle SQL，它建议我下载 Oracle 11g，以便在练习所学技能时能够充分利用本书提供的内容.

但是，Oracle 的网站似乎没有为 Mac 提供 11g，而且我找不到仍然有效的 10g 链接（或者，实际上，在 Oracle 网站上并没有死路一条）。有没有人有什么建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:15:42.257

最简单的方法可能是安装[VirtualBox](http://www.oracle.com/technetwork/community/developer-vm/index.html)和Oracle 提供的[预构建 VM 映像之一。](http://www.oracle.com/technetwork/community/developer-vm/index.html)如果您目前对这些方面不感兴趣，那么上手比浏览数据库软件安装和数据库创建更简单。

数据库应用程序开发 VM 为您提供了一个预安装的数据库，以及 SQL*Plus 和 SQL Developer，以便在您学习时运行示例和您自己的代码。

# php - jQuery Ajax 返回 html 和 json 数据

> ID：13323393
> 
> 赞同：11
> 
> 时间：2012-11-10T15:35:32.540
> 
> 标签：php, jquery, ajax, json

我不确定是否有任何方法可以做到这一点，但如果有一个简单的解决方案，这将解决我的很多问题。

我需要/想要做的是在我成功的 ajax 请求中返回 HTML 和 JSON。原因是，我想请求一个文件并返回该页面的所有内容，但我也希望能够以 json 格式从页面返回一组指定的信息，这样我就可以将它用于其他事情。

这就是我现在正在做的事情：

```
 $.ajax({
    type: "POST",
    url: "inc/"+page+".php",
    data: "id="+encodeURIComponent(pageID),
    success: function(html){

        $("body > .container").html(html);

      }
      }); 
```

这就是我希望能够做到的：

```
 $.ajax({
    type: "POST",
    url: "inc/"+page+".php",
    data: "id="+encodeURIComponent(pageID),
    success: function(html){
        $("body > .container").html(html);
            $("title").html(json.PageTitle)
      }
      }); 
```

在返回的页面上，我会指定我想要的标题。（例如，如果它是个人资料，我会返回用户名）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T16:23:04.963

## 用 JSON 包装的 HTML 和数据

您可以通过返回一个 2 元素 JSON 数组来实现。第一个元素包含 HTML，第二个元素包含另一个 JSON 数组，其中包含数据。你只需要小心地打开它而不破坏任何东西。

**服务器端**

```
$html = '<div>This is Html</div>';
$data = json_encode(array('page_title'=>'My Page'));
$response = array('html'=>$html, 'data'=>$data);
echo json_encode($response); 
```

**客户端**

```
//Ajax success function...

success: function(serverResponse){
    $("body > .container").html(serverResponse.html);
    var data = JSON.parse(serverResponse.data);
    $("title").html(data.page_title)
  } 
```

* * *

*注1：*我认为这就是@hakre 在他对您的问题的评论中的意思。

*注意 2：*此方法有效，但我同意 @jheddings 的观点，即避免混合表示和数据可能是个好主意。编码业力会回来咬人。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-10T15:40:57.433

试图混合 retun 值以包含表示和数据似乎可能会造成混淆。为什么不将它分成两个调用并获取另一个成功的数据？

就像是：

```
 $.ajax({
  type: "POST",
  url: "inc/"+view_page+".php",
  data: "id="+encodeURIComponent(pageID),
  success: function(html) {
    $("body > .container").html(html);
    $.ajax({
      type: "POST",
      url: "inc/"+data_page+".php",
      data: "id="+encodeURIComponent(pageID),
      success: function(json) {
        $("title").html(json.PageTitle);
      }
    });
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T03:32:32.383

您还可以选择将数据包含在 html5 数据属性中

例如，如果您要返回 Animals 列表

```
<ul id="ZeAnimals" data-total-animals="500" data-page="2">
    <li>Cat</li>
   <li>Dog</li>
   ...
</ul> 
```

然后，您可以收集您需要使用的数据

```
$('#ZeAnimals').data('total-animals') 
```

有时将您的请求分成两个不同的 ajax 调用也很有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T03:21:50.290

您可以使用自动执行此操作的库，例如[http://phery-php-ajax.net](http://phery-php-ajax.net)。使用

```
Phery::instance()->set(array(
  'load' => function(){
    /* mount your $html and $json_data */
    return 
      PheryResponse::factory()
      ->json($json_data)
      ->this() // points to the container
      ->html($html); 
  }
))->process(); 
```

```
$(function(){
  var $container = $('body > .container');
  $container.phery('make', 'load'); // or $container.phery().make('load')
  $container.bind('phery:json', function(event, data){
    // deal with data from PHP here
  });
  $container.phery('remote');
}); 
```

您也可以使用`phery.views`自动加载网站的一部分，而不必担心客户端特定的代码。您必须在容器上放置一个唯一 ID，`container`在此示例中：

```
$(function(){
  phery.view({
    '#container': {}
  });
}); 
```

```
Phery::instance()->views(array(
  '#container' => function($data, $params){
    /* do the load part in here */
    return 
      PheryResponse::factory()
        ->render_view($html)
        ->jquery('.title')->text($title);
  }
))->process(); 
```

# google-apps-script - GAS：此应用程序是由其他用户创建的，而不是由 Google 创建的

> ID：13323395
> 
> 赞同：1
> 
> 时间：2012-11-10T15:36:05.767
> 
> 标签：google-apps-script

我制作了一个在 Google 协作平台中作为“应用程序脚本小工具”运行的脚本。该脚本可以访问我的电子邮件和日历等，因为如果有人使用了我的脚本，我需要通知。

当我以“无名”用户身份访问该站点时，我收到消息“此应用程序是由另一个用户创建的，而不是由 Google 创建的。此应用程序可以访问以下个人信息：电子邮件地址。” 我该如何摆脱这种情况，用户对脚本是否向我发送电子邮件不感兴趣。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T01:51:29.370

同样的事情发生在我身上; 我注释掉了对 Session 对象的所有引用，但我仍然收到弹出消息。

当我完全删除注释代码并重新发布时，一切正常。关于访问电子邮件信息的消息消失了。

我猜即使有注释代码，谷歌代码也会保留内部库引用。对我来说没有多大意义。但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T16:13:32.150

如果您的脚本不依赖于任何用户的信息，我建议在部署 Web 应用程序时“以”我的身份执行应用程序。在 Publish > Deploy As Web App... 弹出窗口中，有一个下拉菜单。

# vb.net - 如何处理具有相同 Sub 的多个点击事件

> ID：13323397
> 
> 赞同：4
> 
> 时间：2012-11-10T15:36:29.303
> 
> 标签：vb.net, event-handling, picturebox

我正在为我的视觉基础课程制作游戏。我有多个图片框，单击它们会分别显示隐藏的图像。游戏的重点是找到匹配的图片（很简单）。

在最简单的级别上，我有 16 个图片框。图片框的数量随着难度的增加而增加。

对于每个图片框，我目前有一个事件处理程序如下（默认由 Visual Studio 创建）：

```
Private Sub pictureBox1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles pictureBox1.Click 
```

里面，我打算用这个来改变图片框中的图片，如下：

```
pictureBox1.Image = (My.Resources.picture_name) 
```

我想知道是否有一种方法可以让一个 Sub 处理所有按钮单击，并更改适当的图片框，而不是使用 16 个单独的处理程序。例如：

```
Private Sub pictureBox1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) _
     Handles pictureBox1.Click, pictureBox2.Click, pictureBox3.Click, ... pictureBox16.Click 
```

并执行以下操作：

```
' Change appropriate picture box 
```

这是它的样子（现在）：
![在此处输入图像描述](../Images/4a1d6fc908a7d8fcba1c6aac036dbfc9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T15:53:46.120

要找出点击了哪个 PictureBox，您只需查看 sender 变量。显然你必须将它从 Object 类型转换为 PictureBox 类型：

```
Dim ClickedBox As PictureBox

ClickedBox = CType(sender, PictureBox) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T15:57:01.690

就我个人而言，我会做的是将您的通用 EventHandler 附加到您的 PictureBox，给每个 PictureBox 一个[标签](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)作为索引，除非您想对名称进行选择。然后你做这样的事情。

```
Private Sub PictureBox1_Click(sender As System.Object, e As System.EventArgs) Handles PictureBox1.Click, PictureBox2.Click, ...
    Dim pb As PictureBox = CType(sender, PictureBox)

    Select Case CInt(pb.Tag)
        Case 0
            pb.Image = My.Resources.PictureName1

        Case 1
            pb.Image = My.Resources.PictureName2

            ...
    End Select
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T23:59:03.503

例如，遍历所有控件

```
 For Each ctr As Control In Me.Controls
        If TypeOf ctr Is PictureBox Then
            If ctr Is ActiveControl Then
                ' Do Something here
            End If
        End If
    Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T18:31:57.223

根据我的阅读，DirectCast 优于 CType

DirectCast 可以与“With/End With”结合使用，如下所示：

```
Private Sub PictureBox1_Click(sender As System.Object, e As System.EventArgs) Handles PictureBox1.Click, PictureBox2.Click, ...
    With DirectCast(sender, PictureBox)
        Select Case CInt(.Tag)
            Case 0
                .Image = My.Resources.PictureName1
            Case 1
                .Image = My.Resources.PictureName2
                ...
        End Select
    End With
End Sub 
```

我也尝试了以下方法，但这会导致奇怪的问题（控件消失）。

```
Using cbMe as CheckBox = DirectCast(sender, CheckBox)
    cbMe.Checked = True
End Using 
```

# php - 致命错误：Zend Server CE 更新后未找到 DOMDocument

> ID：13323405
> 
> 赞同：3
> 
> 时间：2012-11-10T15:37:12.003
> 
> 标签：php, windows-7, zend-framework2, domdocument, zend-server-ce

我在 Windows 7（64 位）系统上使用 Zend Server CE。

我正在使用 Zend Framework 2.0 开发一个网站。在这个网站中，我使用 DOMDocument 来分析外部网站（由 URL 给出）。

我使用 Zend Framework 1.12 和 Zend Server CE 4 (PHP 5.2) 开始了这个项目。现在我安装了 Zend Server CE 5.6.0（apache2.2、PHP 5.3.14、ZF2-Support）。我用 ZF2.0 重建我的项目。一切正常……除了一个功能。

当我尝试实例化 DOMDocument 时，我收到此错误消息 (php-error.log)：

```
Fatal error: Class 'Application\Controller\DOMDocument' not found in
_Path_\module\Application\src\Application\Controller\SearchbarController.php on line 81 
```

使用 PHP 5.2 (ZF 1.12) 和 Zend Server CE 4，此功能完美运行。但是现在......没有任何改变，它会抛出这个错误。

dom-extension 和 xml-extension 在 PHP 5.3 中内置。我检查了 phpinfo 和我的 php.ini，这些扩展正在运行。

我读到，我应该安装 php-xml。但是 dom、xml 和 libxml 正在运行……我为什么要重新安装它们？

我不知道，为什么升级 Zend Server CE 后无法实例化 DOMDocument。可能是，ZF2.0 是这个错误的一个可能原因。但我找不到任何指向这一点的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:56:43.580

简而言之，是引入了命名空间（ZF2 大量使用的 PHP 5.3 的特性，但 ZF 1.x 没有）导致了这个错误。有了这条线...

```
$dom = new DOMDocument(...) 
```

... ZF 仅检查当前导入的命名空间是否为此类。它会导致失败，因为`DOMDocument`类实际上属于全局命名空间。

解决方法很简单，当你看到原因时：在类名前面使用`global namespace specifier`-符号-。`\`像这样：

```
$dom = new \DOMDocument(...) 
```

# sql - 按一列分组并选择多列Sql查询

> ID：13323406
> 
> 赞同：1
> 
> 时间：2012-11-10T15:37:11.633
> 
> 标签：sql, sql-server

我需要按多个列分组，但在特殊情况下：

我有一张桌子`(Payment_Type,Year,TotalMoney)`

我只需要得到总分组的总和，`payment_type(cash or credit)`我需要在查询中选择年份我该怎么做？我的查询是：

```
select Payment_Type,Year,SUM(TotalMoney) 
from table 
where 1=1 
group by Payment_Type,Year 
```

我收到一条错误消息：

> 年份不包含在聚合函数或 GROUP BY 子句中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:44:00.717

```
select Payment_Type,Year(YourDateColumn),SUM(TotalMoney) 
from table 
group by Payment_Type,Year(YourDateColumn) 
```

如果您的列名为 year 那么

```
select Payment_Type,[Year],SUM(TotalMoney) 
from table 
group by Payment_Type,[Year] 
```

# jquery - Cherrypy 调度

> ID：13323408
> 
> 赞同：3
> 
> 时间：2012-11-10T15:37:36.137
> 
> 标签：jquery, python, cherrypy

我正在尝试从 jquery 脚本运行一个简单的后端 python 方法。

查询

```
$(document).ready(function(){
    $('#btn').click(function(event){
    event.preventDefault();
    var commit = $("#test_form input[type='radio']:checked").val();
    alert(commit);
          $.ajax({
                type: "POST",
                url: "submitted",
                data: commit,
                success: function(data) {
                    alert(data["title"]);
                    $("#status").html(data["title"]);
                }
          });
     return false;
    });

    $('#update_help').click(function() {
        $('#update_info').toggle('slow', function() {
        // Animation complete.
        });
    });
}); 
```

在我的cherrypy python脚本中，我有以下内容

```
@cherrypy.expose
def submitted(self, commit = 0):
    cherrypy.response.headers['Content-Type'] = 'application/json'
    print"Got here"
    #return simplejson.dumps(dict(title="hello", success=True))
    return "foo" 
```

HTML 文件如下所示

```
<form  id="test_form" method="post">

    <li class = "option">
            <input type="radio" name="commit" value = "0"/> Option 1
        </li>
        <li>
            Option 1

        </li>
        <li class = "option">
                <input type="radio" name="commit" value = "1"/> Option 2 <br>
        </li>
        <li class = "option">
            <input id="btn" type="submit"/>
        </li>
    </ul>        
        </form> 
```

我注意到的是，ajax 帖子从未真正找到“提交”功能。整个页面重新加载，并且没有任何内容返回到 ajax 发布回调。我确信这与我在调度方面做错了什么有关，但我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:31:20.667

尝试将您的 javascript 更新为此...

```
 $.ajax({
            type: "POST",
            url: "/plugins/set_prop/submitted",
            data: commit,
            success: function(data) {
                alert(data["title"]);
                $("#status").html(data["title"]);
            } 
```

希望这可以帮助。安德鲁

# android - 在 Fragment Transaction 中使用 replace() 比 add() 消耗更多内存？

> ID：13323410
> 
> 赞同：2
> 
> 时间：2012-11-10T15:37:36.367
> 
> 标签：android, android-fragments

我对在 Android 中使用 Fragments 非常陌生。我已经使用 Fragments 开发了一个应用程序，但它导致 OutOfMemoryError。我使用 replace() 来更改片段。我的 Fragments 包含昂贵的 UI 组件，并认为使用 replace() 会导致这样的错误，例如当我回到 Fragments 时，它会一次又一次地创建 UI。使用 add() 方法会减少内存消耗吗？我在 android 文档之后得出了这样的结论，它声明 add 方法将添加片段容器，而 replace 将删除早期片段的所有 ui 部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:47:18.683

*添加/替换*方法从头开始破坏和创建片段，从而启动整个片段的生命周期。在您的情况下，我建议您使用导致不保留额外内存的*附加/分离方法。*

[在FragmentTransaction](http://developer.android.com/reference/android/app/FragmentTransaction.html)中阅读有关这些方法的更多信息

# php - 如何从下一个标签中的while函数调用访问PHP变量以获取单独的HTML？

> ID：13323413
> 
> 赞同：-2
> 
> 时间：2012-11-10T15:37:41.307
> 
> 标签：php, mysql

如何从下一个`<?php?>`标签中的 while(mysql_fetch_array($query)) 函数调用访问 PHP 变量以获取单独的 HTML？

```
<body>
<?php
    $sql="select * from $table order by id desc";
    $query=mysql_query($sql) or die(mysql_error());
    while($result=mysql_fetch_array($query)){
    $id=$result[id];
    $subject=$result[subject];
    $subjectpic=$result[subjectpic];
    $content=$result[content];

    //global $id, $subject, $subjectpic, $content; ?
    }
?>
<div class="subject">
<?php
    print"$subject";
?>
</div>
<div class="subjectpic">
<?php
    print"$subjectpic";
?>
</div>
</body> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:48:07.980

只需将花括号向下移动

```
 //global $id, $subject, $subjectpic, $content; ?
?>
<div class="subject">
<?php
    print"$subject";
?>
</div>
<div class="subjectpic">
<?php
    print"$subjectpic";
?>
</div>
<?php
    }
?>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:46:42.183

实际上，您可以简单地将右大括号放在更下方...

```
<body>
<?php
    $sql="select * from $table order by id desc";
    $query=mysql_query($sql) or die(mysql_error());
    while($result=mysql_fetch_array($query)){
      $id=$result['id'];
      $content=$result['content'];
?>
  <div class="subject"><?php print $result['subject']; ?></div>
  <div class="subjectpic"><?php print $result['subjectpic']; ?></div>
<?php } ?>
</body> 
```

但是，此版本更具可读性：

```
<body>
<?php
    $sql="select * from $table order by id desc";
    $query=mysql_query($sql) or die(mysql_error());
    while($result=mysql_fetch_array($query)){
      $id=$result['id'];
      $content=$result['content'];
      sprintf('<div class="subject">%s</div>'."\n",    $result['subject']);
      sprintf('<div class="subjectpic">%s</div>'."\n", $result['subjectpic']);
    }
?>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T15:40:41.990

`$subject`其他变量仅打印最后一行的值。如果您计划在遍历数组时迭代变量的值，请考虑在`while`块本身内打印/回显它们。

# c# - 动态更改图片网址

> ID：13323417
> 
> 赞同：-2
> 
> 时间：2012-11-10T15:38:19.590
> 
> 标签：c#

我在网页中创建了一个图像元素。我正在从数据库中提取图像 url，并希望将图像元素的 url 设置为这些值，每个值间隔 5 秒。

我怎样才能做到这一点？

这是我的示例代码...

```
RollingScreenBAL bal = new RollingScreenBAL();
DetailsForSlideShow[] details = bal.GetDetailsForSlideShow(username);
foreach (DetailsForSlideShow detail in details)
{
    imgSlideShow.Attributes["src"] = ResolveUrl(detail.GraphUrl);
    Thread.Sleep(detail.TimeInterval);
} 
```

通过上面的代码，我只能为我从数据库获取的第一个值设置图像 url....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:53:50.337

您可以将所有图像链接加载到数据表中并将其放入会话中。然后将 ajax 更新面板和 ajax 计时器添加到您的网页。将计时器间隔设置为 5000，并在每个回调中读取 1 行表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T22:32:46.763

您所描述的似乎很像一个客户端-服务器，它使用扩展的永久通信从服务器“推送逻辑”。这是不可能在网络上工作的。最后，在页面处理期间使用睡眠事件并不总是一个好主意，除非有一些特定的原因（即等待特定资源可用）。即使使用 ajax 更新面板，也始终是客户端触发事件，导致服务器。

要制作幻灯片，您有很多选择，我将向您展示其中两个，但您也可以使用现成的插件，网络上有大量示例，只需搜索它们即可。

* * *

1- 一个快速而肮脏的解决方案，但希望用于少量图像。您可以基于 db 内容创建一个 javascript 数组，并像为简单的幻灯片 javascript 静态创建一样使用它，并通过 SetInterval js 函数对其进行更改。

c#代码：

```
//
// ... this is your code
//
RollingScreenBAL bal = new RollingScreenBAL();
DetailsForSlideShow[] details = bal.GetDetailsForSlideShow(username);

string script = "var myimg = new Array();\n";
int i=0;
foreach (DetailsForSlideShow detail in details)
{
  script += "myimg[" + i.ToString() + "] = \"" + ResolveUrl(detail.GraphUrl) + "\";\n";
}
Page.ClientScript.RegisterClientScriptBlock(typeof(string), "arraykey", script, true); 
```

网页：

```
[...]
<div id="mydiv"><img src="" alt="" /></div>
[...] 
```

这将呈现给网页，如下所示：

```
var myimg = new Array();
myimg[0] = "/path/img0.jpg";
myimg[1] = "/path/img1.jpg";
myimg[2] = "/path/img2.jpg";
[...] 
```

您以后可以使用/循环使用 javascript：

```
var curimg=0;
function slideshow() {
    document.getElementById("mydiv").getElementsByTagName("img")[0].src = myimg[curimg];
    curimg++;
    if(curimg >= myimg.length) curimg=0;  //Restart from first image
} 
```

然后开始幻灯片放映，在 html 末尾有一个脚本（或在正文中的 onload 事件）

```
 setTimeout(slideshow, 5000); 
```

**注意**：您也可以在 c# RegisterClientScriptBlock 中生成/附加此脚本，如前所示，只需每次更改“arraykey”值。更多信息在这里：http: [//msdn.microsoft.com/it-it/library/bahh2fef%28v=vs.80%29.aspx](http://msdn.microsoft.com/it-it/library/bahh2fef%28v=vs.80%29.aspx)

* * *

2-更好的解决方案是使用 jquery 的 ajax 方法从 ac# web 方法获取“下一个图像”。

网页：

```
[...]
<div id="mydiv"><img src="" alt="" /></div>
[...] 
```

javascript代码：

```
function slideshow() {
  $.ajax({
    type: "GET",
    contentType: "application/json; charset=utf-8",
    url: "/ajax.aspx/GetNextImage",
    dataType: "json",
    success: function (data) {
      //this changes the image on the web page
      $('#mydiv img').attr("src", data.d);

      //fires another sleep/image cycle
      setTimeout(slideshow(), 5000);
    },
    error: function (result) {
      alert(result.message);
    }
  });
}

$(document).ready(function () {
  //Kicks the slideshow
  slideshow();
}); 
```

cs代码：

```
[WebMethod]
public static string GetNextImage()
{
  //
  // ... this is your code
  //
  RollingScreenBAL bal = new RollingScreenBAL();
  DetailsForSlideShow[] details = bal.GetDetailsForSlideShow(username);

  //Someway get next image you need to display
  //So I assume you get 1 record only (from DB?)
  DetailsForSlideShow detail = details[0];

  //Last you can save last sent image name or index as per user...
  //I.e. you could use a Session variable, or move also this logic
  //to client side
  [...]

  //Send back to jquery call the image url
  return ResolveUrl(detail.GraphUrl);
} 
```

**注意**：如果您缺少 jquery 是什么，请在网上搜索它，我相信它会对您使用 javascript 有很大帮助。

# sql - SQL：连接来自多个表的数据

> ID：13323419
> 
> 赞同：0
> 
> 时间：2012-11-10T15:38:41.510
> 
> 标签：sql

我想做一个 SQL 查询，将两个表中的数据链接起来，然后像这样关联第二个表中的数据

```
SELECT CustNo AS 'Customer No.', CompanyName, LiasonNo AS 'Liason'  
FROM Customer 
```

我想要做的是将联络号码与另一个表上的员工号码相关联，然后让它将该号码列为员工姓氏。

我会使用内部连接来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:40:29.017

```
SELECT  a.CustNo as 'Customer No',
        a.CompanyName,
        b.LastName
FROm    Customer a
        INNER JOIN table2 b 
            ON a.LiasonNo = b.EmployeeNo 
```

# assembly - 弹出组装

> ID：13323424
> 
> 赞同：0
> 
> 时间：2012-11-10T15:39:18.937
> 
> 标签：assembly, x86

如果`ESP`寄存器的值为`0x00050830`并且地址`0x00050830`的值为`0x00002000`。

现在我说`pop eax`，`EAX`寄存器会有一个值`0x00002000`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:41:54.980

它将esp指向的地址的值放入eax，即0x00002000。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T08:49:30.313

此外，它将 esp 增加 4，以指向堆栈上的下一个值。

# wordpress-theming - 网站所有页面的最小高度都没有改变

> ID：13323429
> 
> 赞同：1
> 
> 时间：2012-11-10T15:40:49.883
> 
> 标签：wordpress-theming, css

我使用 css 自定义管理器来更改我`WordPress`网站的最小高度。该网站的底部有太多空白空间。
当我更改最小高度时，它仅适用于`home page`.
我如何让它改变其余页面？
有人告诉我，我必须制作一个子主题才能让经理将其应用于所有页面。这样做对我来说是不可能的。还有其他建议吗？
[campwhiskers](http://www.campwhiskers.com)是网站（不知何故，博客页面也可以？）

这是我放入管理器以更改页面的内容：

```
#main .content, #main .last-content
{ 
    min-height:auto;
    padding-top:50px;
    position:relative;
    clear:both;
}
#main .last-content 
{ 
   min-height:auto!important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:43:03.517

如果您的意思是“底部有很多空白”，那么版权部分

在 style.css 中，第 122 行 - copyright { margin-bottom: 70px;

修改 margin-bottom: 降低值，如 10px；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:40:21.320

您在其他页面上的高度由此属性控制，该属性位于 CSS 的第 117 行：

```
 #main .content, #main .last-content {
        min-height: 1700px;
        padding-top: 50px;
        position: relative;
        clear: both;
} 
```

在第 59 行还有另一个例子，这就是混淆的地方。

只需在第 177 行删除这部分 CSS：

```
min-height: 1700px; 
```

这是一个视觉

![在此处输入图像描述](../Images/02441c7369e5d113bd944b6346aacbb5.png)

这是另一个屏幕截图。这个显示了您的主题正在使用的 css 文件。您需要在 Bluehost 服务器上跟踪此文件并删除 min-height 部分。我无法告诉您如何找到它，尽管 b/c 我看不到您的服务器。它可能在主题文件夹中。如果您为此主题付费，您也许可以让作者指导您（或不指导）。我想如果你四处挖掘，你会发现它。

![在此处输入图像描述](../Images/9b4ab729213af21b44126d1821e90fd6.png)

# android - StrictModeDiskReadViolation 时

> ID：13323431
> 
> 赞同：15
> 
> 时间：2012-11-10T15:41:04.093
> 
> 标签：android

我正在尝试使用 SharedPreferences 来存储我的应用程序的一些用户设置。我的 Activity.onCreate 方法中有这段代码：

```
sharedPreferences = context.getSharedPreferences("MMPreferences", 0);
soundOn = sharedPreferences.getBoolean("soundOn", true); 
```

但它给了我这个错误（它是生成错误的getBoolean）：

```
11-10 16:32:24.652: D/StrictMode(706): StrictMode policy violation; ~duration=229 ms: android.os.StrictMode$StrictModeDiskReadViolation: policy=2079 violation=2 
```

结果是未读取该值，并且当我尝试使用此代码写入 SharedPreferences 时，我也得到相同的错误（它是生成错误的提交）：

```
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.putBoolean("soundOn", soundOn);
editor.commit(); 
```

我能找到的这个错误的唯一答案是关于严格模式警告，但我的代码实际上无法读取/写入 SharedPreferences 键/值数据。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-10T15:43:23.500

您必须在单独的线程上执行文件系统操作，然后错误就会消失。

您也可以关闭 StrictMode（但我不建议这样做）

```
StrictMode.ThreadPolicy old = StrictMode.getThreadPolicy();
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder(old)
    .permitDiskWrites()
    .build());
doCorrectStuffThatWritesToDisk();
StrictMode.setThreadPolicy(old); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-19T02:50:54.100

如果您在 Android 项目中配置了响应式 (RxJava)，则可以利用其属性，例如在特定于 I/O 的调度程序上安排任务，例如：

```
public void saveFavorites(List<String> favorites) {
    Schedulers.io().createWorker().schedule(() -> {
        SharedPreferences.Editor editor = mSharedPreferences.edit();
        Gson gson = new Gson();
        String jsonFavorites = gson.toJson(favorites);
        editor.putString(Constants.FAVORITE, jsonFavorites);
        editor.apply();
    });
} 
```

# web-applications - 具有弹簧安全登录的 Spring mvc Web 应用程序 - 如何将凭据传递给 cxf STS 客户端以进行服务集成？

> ID：13323432
> 
> 赞同：2
> 
> 时间：2012-11-10T15:41:08.033
> 
> 标签：web-applications, spring-security, cxf, sts-securitytokenservice

我有一个使用 Spring Security 登录的 Web 应用程序。我正在尝试使用使用 STSClient 的 cxf 集成支持的服务。是否有集成两者的参考实现？我已经尝试创建自己的身份验证提供程序，它将获取用户名和密码，将它们粘贴到 stsclient 中，然后进行服务调用以验证来自与服务相同的 IDP/SP 的凭据，但我似乎仍然有多个问题会话共享相同的 cxf 凭据。我已经破解了一段时间，还没有一个干净的示例可以发布，但如果有一个教程，我会很感激。

# java - Android GC_CONCURRENT 和 soundbox 应用程序开发

> ID：13323444
> 
> 赞同：1
> 
> 时间：2012-11-10T15:43:11.407
> 
> 标签：java, android

首先，对不起我的英语水平。

我需要一些帮助。我正在尝试开发一个应用程序（您单击按钮并听到声音的音箱）。我没有问题，但是在听了一些歌曲之后，我有记忆问题。这是我的日志：

```
enter code here11-10 15:21:02.446: E/Trace(942): error opening trace file: No such file         or directory (2)
11-10 15:21:03.535: D/dalvikvm(942): GC_CONCURRENT freed 83K, 2% free 8369K/8519K,         paused 83ms+4ms, total 149ms
11-10 15:21:03.535: D/dalvikvm(942): WAIT_FOR_CONCURRENT_GC blocked 24ms
11-10 15:21:03.795: D/dalvikvm(942): GC_CONCURRENT freed 10K, 2% free 8813K/8903K, paused    74ms+17ms, total 134ms
11-10 15:21:04.026: I/Choreographer(942): Skipped 46 frames!  The application may be    doing too much work on its main thread.
11-10 15:21:04.035: D/gralloc_goldfish(942): Emulator without GPU emulation detected.
11-10 15:21:04.276: D/AndroidRuntime(942): Shutting down VM
11-10 15:21:04.276: W/dalvikvm(942): threadid=1: thread exiting with uncaught exception  (group=0x40a13300)
11-10 15:21:04.315: E/AndroidRuntime(942): FATAL EXCEPTION: main
11-10 15:21:04.315: E/AndroidRuntime(942): java.lang.RuntimeException: Expecting menu,   got TabHost
11-10 15:21:04.315: E/AndroidRuntime(942):  at   android.view.MenuInflater.parseMenu(MenuInflater.java:143)
11-10 15:21:04.315: E/AndroidRuntime(942):  at  android.view.MenuInflater.inflate(MenuInflater.java:110)
11-10 15:21:04.315: E/AndroidRuntime(942):  at    com.example.famous.movies.sounds_.MainActivity.onCreateOptionsMenu(MainActivity.java:46)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   android.app.Activity.onCreatePanelMenu(Activity.java:2476)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:393)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:747)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:2913)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   android.os.Handler.handleCallback(Handler.java:615)
11-10 15:21:04.315: E/AndroidRuntime(942):  at  android.os.Handler.dispatchMessage(Handler.java:92)
11-10 15:21:04.315: E/AndroidRuntime(942):  at android.os.Looper.loop(Looper.java:137)
11-10 15:21:04.315: E/AndroidRuntime(942):  at  android.app.ActivityThread.main(ActivityThread.java:4745)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   java.lang.reflect.Method.invokeNative(Native Method)
11-10 15:21:04.315: E/AndroidRuntime(942):  at  java.lang.reflect.Method.invoke(Method.java:511)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-10 15:21:04.315: E/AndroidRuntime(942):  at   com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-10 15:21:04.315: E/AndroidRuntime(942):  at dalvik.system.NativeStart.main(Native Method) 
```

我该如何解决？我已经放了两个标签，但歌曲只在第一个标签上。这是代码java：

```
public class MainActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Gestion des onglets

        // Tout d'abord on récupère les ressources qui seront utilisés plus tard :
        Resources res = getResources();
        // On prépare les éléments nécessaires pour chaque onglet :
        TabHost tabHost = getTabHost();
        TabHost.TabSpec spec;
        Intent intent;

        // on lie nos onglets à la principale activity :
        // ONGLET 1        
        intent = new Intent().setClass(this, Tab1.class);
        spec = tabHost.newTabSpec("Widget").setIndicator("Cinema", res.getDrawable(R.drawable.movies)).setContent(intent);
        tabHost.addTab(spec);

        // ONGLET 2
        intent = new Intent().setClass(this, Tab2.class);
        spec = tabHost.newTabSpec("Form").setIndicator("Infos", res.getDrawable(R.drawable.infos)).setContent(intent);
        tabHost.addTab(spec);

        // On choisit l'onglet par défaut
        tabHost.setCurrentTab(0);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.layout.activity_main, menu);
        return true;
    }
}

public class Tab1 extends Activity {

private MediaPlayer mPlayer = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.onglet1);        

    final int sound11 = R.raw.carjacker;
    final int sound12 = R.raw.petitesoeur;
    final int sound13 = R.raw.cracherlama;
    final int sound14 = R.raw.maitresse;
    final int sound21 = R.raw.gandalfen;
    final int sound22 = R.raw.gandalf;
    final int sound23 = R.raw.gollum;
    final int sound24 = R.raw.gollumen;
    final int sound31 = R.raw.pasdebraspasdechocolat;
    final int sound32 = R.raw.sparta;
    final int sound33 = R.raw.sabre;
    final int sound34 = R.raw.darkvador;
    final int sound41 = R.raw.back;
    final int sound42 = R.raw.fightclub;
    final int sound43 = R.raw.forrestgump;
    final int sound44 = R.raw.iamyourfather;     
    final int sound51 = R.raw.loki;
    final int sound52 = R.raw.dinercon1;
    final int sound53 = R.raw.gollum;
    final int sound54 = R.raw.gollum; 
  /*  final int sound61 = R.raw.dinercondroit4;
    final int sound62 = R.raw.dinerconfemme5;
    final int sound63 = R.raw.dinerconchampion6;
    final int sound64 = R.raw.dinerconsonne7;  
   */
    generateSoundOnButton(sound11, R.id.btn11);
    generateSoundOnButton(sound12, R.id.btn12);
    generateSoundOnButton(sound13, R.id.btn13);
    generateSoundOnButton(sound14, R.id.btn14);
    generateSoundOnButton(sound21, R.id.btn21);
    generateSoundOnButton(sound22, R.id.btn22);        
    generateSoundOnButton(sound23, R.id.btn23);
    generateSoundOnButton(sound24, R.id.btn24);  
    generateSoundOnButton(sound31, R.id.btn31);
    generateSoundOnButton(sound32, R.id.btn32);
    generateSoundOnButton(sound33, R.id.btn33);
    generateSoundOnButton(sound34, R.id.btn34); 
    generateSoundOnButton(sound41, R.id.btn41);
    generateSoundOnButton(sound42, R.id.btn42);
    generateSoundOnButton(sound43, R.id.btn43);
    generateSoundOnButton(sound44, R.id.btn44);
    generateSoundOnButton(sound51, R.id.btn51);
    generateSoundOnButton(sound52, R.id.btn52);
    generateSoundOnButton(sound53, R.id.btn53);
    generateSoundOnButton(sound54, R.id.btn54);  
    /*
    generateSoundOnButton(sound61, R.id.btn61);
    generateSoundOnButton(sound62, R.id.btn62);
    generateSoundOnButton(sound63, R.id.btn63);
    generateSoundOnButton(sound64, R.id.btn64);  
   */
}

    public void generateSoundOnButton(final int soundId, int idButton) {

        final ImageButton btn = (ImageButton) findViewById(idButton);

        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {       
                playSound(soundId);                 
            }

          });
    }

    @Override
    public void onPause() {
        super.onPause();
        if(mPlayer != null) {
            mPlayer.stop();
            mPlayer.release();          
        }
    }

    private void playSound(int resId) {     

        if(mPlayer != null) {
            mPlayer.stop();
            mPlayer.release();
        }
        mPlayer = MediaPlayer.create(this, resId);
        mPlayer.start();
    }

}

public class Tab2 extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.onglet2);          
    }       
} 
```

实际上一开始我删除了方法 mPlayer.stop() 因为有错误并且没有这个方法它工作得很好，所以我认为现在是问题但是当我再次添加这个方法时没有发生任何事情，有同样的错误. 真的有一个好方法可以在android上正确播放声音而不会出现问题吗？

任何帮助和建议将不胜感激。如果您有任何意见或问题，请不要犹豫。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:09:11.343

是的，但它已经很喜欢了。我在 res/menu 中有一个带有以下代码的 activity_main.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:orderInCategory="100" />
</menu> 
```

我在 res/layout 中有三个文件：activity_main.xml，代码如下：

```
<?xml version="1.0" encoding="utf-8"?>

<!-- MISE EN PLACE DE LA BASE DE NOS 3 ONGLETS -->
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="#66FF99">
    <LinearLayout  
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp"
        android:background="#E2F0FF">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#FFFFFF"
             />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp"
            android:background="#E2F0FF" />
    </LinearLayout>
</TabHost> 
```

onglet1.xml 与所有歌曲的 tab1 相等（我认为没有其他解决方案可以编写所有 xml 代码......？）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayoutOnglet1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#E2F2FF"
    android:orientation="vertical"
    android:weightSum="1.0" >
<!--  Ligne 1 -->
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayoutOnglet1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#E2F2FF"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <ImageButton
            android:id="@+id/btn12"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/petitesoeur" />

        <ImageButton
            android:id="@+id/btn11"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/carjacker" />

        <ImageButton
            android:id="@+id/btn13"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
             android:src="@drawable/cracherlama" />

        <ImageButton
            android:id="@+id/btn14"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
             android:src="@drawable/maitresse" />
    </LinearLayout>

<!--  Ligne 2 -->
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayoutOnglet1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#E2F2FF"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <ImageButton
            android:id="@+id/btn21"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/gandalfen" />

       <ImageButton
            android:id="@+id/btn22"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
             android:src="@drawable/gandalf" />

        <ImageButton
            android:id="@+id/btn23"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/gollum" />

        <ImageButton
            android:id="@+id/btn24"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/gollumen" />
    </LinearLayout>

    <!--  Ligne 3 -->
        <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayoutOnglet1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#E2F2FF"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <ImageButton
            android:id="@+id/btn31"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/pasdebraspasdechocolat" />

       <ImageButton
            android:id="@+id/btn32"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
             android:src="@drawable/sparta" />

        <ImageButton
            android:id="@+id/btn33"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/sabre" />

        <ImageButton
            android:id="@+id/btn34"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/darkvador" />
    </LinearLayout>

    <!--  Ligne 4 -->
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayoutOnglet1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#E2F2FF"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <ImageButton
            android:id="@+id/btn41"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/back" />

       <ImageButton
            android:id="@+id/btn42"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
             android:src="@drawable/fightclub" />

        <ImageButton
            android:id="@+id/btn43"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/forrestgump" />

        <ImageButton
            android:id="@+id/btn44"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/darkvadorpereen" />
    </LinearLayout>

    <!--  Ligne 5 -->
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayoutOnglet1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#E2F2FF"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <ImageButton
            android:id="@+id/btn51"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/loki" />

       <ImageButton
            android:id="@+id/btn52"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
             android:src="@drawable/dinercon1" />

        <ImageButton
            android:id="@+id/btn53"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/gollum" />

        <ImageButton
            android:id="@+id/btn54"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/gollum" />
    </LinearLayout>
  </LinearLayout>  
    <!--  Ligne 6 -->
    <!--  
        <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayoutOnglet1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#E2F2FF"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <ImageButton
            android:id="@+id/btn61"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/dinercondroit4" />

       <ImageButton
            android:id="@+id/btn62"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
             android:src="@drawable/dinerconfemme5" />

        <ImageButton
            android:id="@+id/btn63"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/dinerconchampion6" />

        <ImageButton
            android:id="@+id/btn64"
            android:layout_width="90px"
            android:layout_height="110px"
            android:layout_weight="0.25"
            android:src="@drawable/dinerconsonne7" />
    </LinearLayout>
    --> 
```

onglet2.xml 等于 tab2.xml，这现在并不重要......

# python - 为什么我的线程停止？

> ID：13323446
> 
> 赞同：1
> 
> 时间：2012-11-10T15:43:49.957
> 
> 标签：python, multithreading, loops, urllib2

我有一个`list`由ID组成的，每天大约50k。

我必须每天向服务器发出 50k 请求{服务器在同一个城市}，然后获取信息并将其存储到数据库中......我已经使用`loop`并且`Threads` 我注意到在未知时期之后时间它停止获取和存储......

看看我的代码片段

```
import re,urllib,urllib2
import mysql.connector as sql
import threading
from time import sleep
import idvalid

conn = sql.connect(user="example",password="example",host="127.0.0.1",database="students",collation="cp1256_general_ci")
cmds = conn.cursor()

ids=[] #here is going to be stored the ID's

def fetch():
    while len(ids)>0:#it will loop until the list of ID's is finish 
        try:
            idnumber = ids.pop()
            content = urllib2.urlopen("http://www.example.com/fetch.php?id="+idnumber,timeout=120).read()
            if content.find('<font color="red">') != -1:
                    pass
            else:
                    name=content[-20:]
                    cmds.execute("INSERT INTO `students`.`basic` (`id` ,`name`)VALUES ('%s', '%s');"%(idnumber,name))
        except Exception,r:
            print r,"==>",idnumber
            sleep(0.5)#i think sleep will help in threading ? i'm not sure
            pass
        print len(ids)#print how many ID's left

for i in range(0,50):#i've set 50 threads
    threading.Thread(target=fetch).start() 
```

`output`：它将继续打印剩余的 ID 数量，并在未知的时刻停止打印、获取和存储

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:11:04.310

网络和线程都不是微不足道的......最有可能的原因是导致线程挂起的网络事件。我很想知道人们是否对此有解决方案，因为我遇到了同样的线程停止响应的问题。

但是我肯定会在您的代码中更改一些内容：

*   我永远不会抓住“异常”。只需捕获那些您知道如何处理的异常。如果您的一个线程中发生网络错误，您可以重试而不是放弃 id。
*   您的代码中有一个竞争条件：您首先检查是否有剩余内容，然后将其取出。在第二个时间点，剩余的工作可能已经消失，导致异常。如果您发现这很难解决，有一个出色的 python 对象，它可以在线程之间传递对象而不会出现竞争条件和死锁：Queue 对象。一探究竟。
*   “睡眠（0.5）”一般不会帮助线程。应该没有必要。它可能会减少遇到竞态条件的机会，但最好将竞态条件完全编程出来。另一方面，让 50 个线程全速攻击 Web 服务器可能不是一件非常友好的事情。确保保持在服务可以提供的范围内。

# c# - 如何使用 ReadProcessMemory 获取托盘按钮文本

> ID：13323454
> 
> 赞同：2
> 
> 时间：2012-11-10T15:44:48.440
> 
> 标签：c#, readprocessmemory

我想用 C# 获取 windows7（64 位）上的所有托盘图标，但是当我使用 windows api“ReadProcessMemory”时，无法识别托盘按钮文本。下面的代码

```
 IntPtr pid = IntPtr.Zero;
        IntPtr ipHandle = IntPtr.Zero; 
        IntPtr lTextAdr = IntPtr.Zero; 

        IntPtr ipTray = TrayToolbarWindow32();

        WinApiHelper.GetWindowThreadProcessId(ipTray, ref pid);
        if (pid.Equals(0))
            return iconList;

        IntPtr hProcess = WinApiHelper.OpenProcess(WinApiHelper.PROCESS_ALL_ACCESS | WinApiHelper.PROCESS_VM_OPERATION | WinApiHelper.PROCESS_VM_READ | WinApiHelper.PROCESS_VM_WRITE, IntPtr.Zero, pid);

        IntPtr lAddress = WinApiHelper.VirtualAllocEx(hProcess, 0, 4096, WinApiHelper.MEM_COMMIT, WinApiHelper.PAGE_READWRITE);

        int lButton = WinApiHelper.SendMessage(ipTray, WinApiHelper.TB_BUTTONCOUNT, 0, 0);

        for (int i = 0; i < lButton; i++)
        {

            WinApiHelper.SendMessage(ipTray, WinApiHelper.TB_GETBUTTON, i, lAddress);

            WinApiHelper.ReadProcessMemory(hProcess, (IntPtr)(lAddress.ToInt32() + 16), ref lTextAdr, 4, 0);

            if (!lTextAdr.Equals(-1))
            {
                byte[] buff = new byte[ 1024 ];

                WinApiHelper.ReadProcessMemory(hProcess, lTextAdr, buff, 1024, 0);
                string title = System.Text.ASCIIEncoding.Unicode.GetString(buff); 
```

和api声明

```
 [DllImport("kernel32", EntryPoint = "ReadProcessMemory")]
    public static extern int ReadProcessMemory(IntPtr hProcess, IntPtr lpBaseAddress, ref IntPtr lpBuffer, int nSize, int lpNumberOfBytesWritten);

    [DllImport("kernel32.dll", EntryPoint = "ReadProcessMemory")]
    public static extern bool ReadProcessMemoryEx(IntPtr hProcess, IntPtr lpBaseAddress, [In, Out] byte[] buffer, IntPtr size, out IntPtr lpNumberOfBytesRead);

    [DllImport("kernel32", EntryPoint = "ReadProcessMemory")]
    public static extern int ReadProcessMemory(IntPtr hProcess, IntPtr lpBaseAddress, [In, Out] byte[] lpBuffer, int nSize, int lpNumberOfBytesWritten);

    [DllImport("kernel32.dll")]
    public static extern bool ReadProcessMemory(IntPtr hProcess, IntPtr lpBaseAddress, IntPtr lpBuffer, UIntPtr nSize, IntPtr lpNumberOfBytesRead); 
```

问题就在这里

```
string title = System.Text.ASCIIEncoding.Unicode.GetString(buff); 
```

转换后，无法识别字符串“title”，可能像

```
ǎ\0\0\0\0Д\0\0à\0\0ƿ\r\0\0\0\0\0\0\0\0\0\0D:\\Tools\\ESET Smart Security\\egui.exe\0\0\0\0\0\0\0\0\0\0\0\0\0\ 
```

不知道为什么，求助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:26:47.360

你可能要考虑你在做什么。 `ReadProcessMemory`是为需要的调试器设计的调试功能`SeDebugPrivilege`，所以我希望你正在编写一个调试器。忽略我在考虑以非调试能力使用这些功能时的不适，您正在泄漏您分配的缓冲区并要求您的应用程序以管理员身份运行。

如果此应用程序仅用于您自己的目的而没有其他用途，请查看相关问题[Systray Access](https://stackoverflow.com/questions/264281/systray-access)，因为似乎有单独的 TB_GETBUTTONTEXT 消息。我想您实际上是在接收按钮数据，而不是复制内存中的文本，从而导致问题。

# c - linux内核模块分配使指针从没有强制转换的整数

> ID：13323455
> 
> 赞同：1
> 
> 时间：2012-11-10T15:45:03.557
> 
> 标签：c, linux, linux-kernel, linux-device-driver

这是简单的 sys_call_table 挂钩代码

```
#include <asm/unistd.h>
#include <linux/autoconf.h>
#include <linux/in.h>
#include <linux/init_task.h>
#include <linux/ip.h>
#include <linux/kernel.h>
#include <linux/kmod.h>
#include <linux/mm.h>
#include <linux/module.h>
#include <linux/sched.h>
#include <linux/skbuff.h>
#include <linux/stddef.h>
#include <linux/string.h>
#include <linux/syscalls.h>
#include <linux/tcp.h>
#include <linux/types.h>
#include <linux/unistd.h>
#include <linux/version.h>
#include <linux/workqueue.h>

ssize_t *sys_call_table = (ssize_t *)0xc0026e04;

asmlinkage ssize_t (*orig_open)(const char *pathname, int flags);

asmlinkage ssize_t hacked_open(const char *pathname, int flags)
{
    printk(KERN_INFO "SYS_OPEN called : %s\n", pathname);
    return orig_open(pathname, flags);
}

int init_module(void)
{
    orig_open = sys_call_table[__NR_open];      /* line 33 */
    sys_call_table[__NR_open] = hacked_open;    /* line 34 */
    return 0;
}

void cleanup_module(void)
{
    sys_call_table[__NR_open] = orig_open;      /* line 40 */
}

MODULE_LICENSE("GPL"); 
```

我收到如下警告

此代码工作正常，但我想删除警告。我能怎么做？

> /home/tester/tools/lkm/ac：在函数 'init_module' 中：
> /home/tester/tools/lkm/ac:33：警告：赋值从没有强制转换的指针中生成整数
> /home/tester/tools/lkm/ac :34: 警告：赋值从没有
> 强制转换/home/tester/tools/lkm/ac 的指针生成整数：在函数“cleanup_module”中：
> /home/tester/tools/lkm/ac:40：警告：赋值从指针生成整数没有演员表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:48:44.190

如果您想使编译器静音，则必须添加类型转换（即使这通常是一个坏主意，这也是编译器对其进行转换的方式）。

```
ssize_t *sys_call_table = (ssize_t *)0xc0026e04;

typedef ssize_t (*ftype)(const char *, int);

ftype orig_open;

ssize_t hacked_open(const char *pathname, int flags)
{
    printf("SYS_OPEN called : %s\n", pathname);
    return orig_open(pathname, flags);
}

int init_module(void)
{
    orig_open = (ftype)sys_call_table[__NR_open];
    sys_call_table[__NR_open] = (ssize_t)hacked_open;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:49:58.820

当您查看第 33 行时，您会看到问题：

> orig_open = sys_call_table[__NR_open];

您已定义`sys_call_table`为指向整数的指针。这就是警告的原因。其他线路也有同样的问题。如果定义`sys_call_table`正确，警告就会消失。

您至少应该将其定义为指针数组或指向指针的指针，因为如果`ssize_t`在 64 位系统上只有 32 位，您可能会将 64 位地址截断为 32 位整数。

# regex - Grep 模式匹配在输出中省略部分

> ID：13323459
> 
> 赞同：4
> 
> 时间：2012-11-10T15:45:42.607
> 
> 标签：regex, grep

是否可以仅使用一个`grep`和`regexp`组合来实现以下目标。假设我有一个像这样的文件：

```
$ cat f.txt
line 1 foo
line 2 boo
no match
line 3 blank
line X no match 
```

我想匹配所有以单词开头`line`并后跟一个数字的行，但只显示之后的内容，所以匹配的部分是`(.*)`.

```
$ grep -E '^line [0-9]+(.*)' f.txt 
line 1 foo
line 2 boo
line 3 blank 
```

你能说匹配但不要`^line [0-9]+`像做相反的那样 显示这部分`grep -o '^line [0-9]+'`

所以我的预期输出看起来像这样

```
$ grep -E ***__magic__*** f.txt 
foo
boo
blank 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:06:23.950

您可以使用 sed

```
~$ cat 1.txt
line 1 foo
line 2 boo
no match
line 3 blank
line X no match

$ grep -E '^line [0-9]' 1.txt | sed 's/^line [0-9] //'
foo
boo
blank 
```

**更新** ...或不使用 sed

```
$ grep -E '^line [0-9]' 1.txt | grep -oE '[a-z]*$'
foo
boo
blank 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:52:22.847

给定您的示例文件：

```
$ cat cat_1.txt
line 1 foo
line 2 boo
no match
line 3 blank
line X no match 
```

使用 Perl 很容易：

```
perl -lne 'print $1 if /^line \d+ (.*)/' cat_1.txt 
```

或使用[sed](http://www.grymoire.com/Unix/Sed.html#uh-0)：

```
sed -En 's/^line [0-9]+ (.*)/\1/p' cat_1.txt 
```

无论哪种情况，打印：

```
foo
boo
blank 
```

# c++ - 在winform中使用DrawImage

> ID：13323460
> 
> 赞同：3
> 
> 时间：2012-11-10T15:45:47.160
> 
> 标签：c++, winforms, graphics

我正在尝试在winform中使用DrawImage，它在指定位置以指定大小绘制指定Image的指定部分。但是我遇到了某些错误。

```
 error C2039: 'Graphics' : is not a member of 'System::EventArgs'   
  error C2227: left of '->DrawImage' must point to class/struct/union/generic type 
```

以下代码片段取自[此处](http://msdn.microsoft.com/en-us/library/ms142038.aspx)，执行以下操作：

1- 从示例文件夹中的 JPEG 文件 SampImag.jpg 创建图像。

2- 创建定义平行四边形的点，在其中绘制图像。

3- 创建一个矩形来选择要绘制的图像部分。

4- 将图形绘制单位设置为像素。

5- 将图像绘制到屏幕上。

为了在我的应用程序中使用这个代码片段，我创建了一个简单的 winform 应用程序。在表单中我添加了一个按钮。单击按钮时，我希望执行以下代码：

```
private:
  void DrawImageParaRect( PaintEventArgs^ e )
  {

  // Create image.
  Image^ newImage = Image::FromFile( "SampImag.jpg" );

  // Create parallelogram for drawing image.
  Point ulCorner = Point(100,100);
  Point urCorner = Point(325,100);
  Point llCorner = Point(150,250);
  array<Point>^ destPara = {ulCorner,urCorner,llCorner};

  // Create rectangle for source image.
  Rectangle srcRect = Rectangle(50,50,150,150);
  GraphicsUnit units = GraphicsUnit::Pixel;

  // Draw image to screen.
  e->Graphics->DrawImage( newImage, destPara, srcRect, units );
  } 
```

在我创建的应用程序中，我得到了按钮的以下几行：

```
 #pragma endregion
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e)      
 {

  } 
```

所以我把代码放在这个事件里面，如下图：

```
 #pragma endregion
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e)      
 {   

  // Create image.
  Image^ newImage = Image::FromFile( "SampImag.jpg" );

  // Create parallelogram for drawing image.
  Point ulCorner = Point(100,100);
  Point urCorner = Point(325,100);
  Point llCorner = Point(150,250);
  array<Point>^ destPara = {ulCorner,urCorner,llCorner};

  // Create rectangle for source image.
  Rectangle srcRect = Rectangle(50,50,150,150);
  GraphicsUnit units = GraphicsUnit::Pixel;

  // Draw image to screen.
  e->Graphics->DrawImage( newImage, destPara, srcRect, units );
  } 
```

如何摆脱错误？

```
 error C2039: 'Graphics' : is not a member of 'System::EventArgs'  
   error C2227: left of '->DrawImage' must point to class/struct/union/generic type 
```

我已将 system.drawing.dll 放在我的 form1.h 所在的文件夹中。

以下是完整代码：

```
#include "stdafx.h"
#include <stdio.h>
#using <system.drawing.dll>

using namespace System;
 using namespace System::Drawing;

 #pragma once

 namespace Zooming_10Nov {

    using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::Button^  button1;
protected: 

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->button1 = (gcnew System::Windows::Forms::Button());
        this->SuspendLayout();
        // 
        // button1
        // 
        this->button1->Location = System::Drawing::Point(120, 91);
        this->button1->Name = L"button1";
        this->button1->Size = System::Drawing::Size(75, 23);
        this->button1->TabIndex = 0;
        this->button1->Text = L"button1";
        this->button1->UseVisualStyleBackColor = true;
        this->button1->Click += gcnew System::EventHandler(this, &Form1::button1_Click);
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(292, 273);
        this->Controls->Add(this->button1);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->ResumeLayout(false);

    }
 #pragma endregion
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e)  
{

  // Create image.
  Image^ newImage = Image::FromFile( "SampImag.jpg" );

  // Create parallelogram for drawing image.
  Point ulCorner = Point(100,100);
  Point urCorner = Point(325,100);
  Point llCorner = Point(150,250);
  array<Point>^ destPara = {ulCorner,urCorner,llCorner};

  // Create rectangle for source image.
  Rectangle srcRect = Rectangle(50,50,150,150);
  GraphicsUnit units = GraphicsUnit::Pixel;

  // Draw image to screen.
  e->Graphics->DrawImage( newImage, destPara, srcRect, units );

         }
};
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:52:02.657

就像编译器说的：' **Graphics** '：不是' **System::EventArgs** '的成员。唯一具有 Graphics 对象的事件参数是 PaintEventArgs，您只能在 Paint 和 PaintBackground 上获得它。

现在，由于您想在按钮单击事件上绘制图像，因此您必须为要在其上绘制图像的表面区域创建图形对象。

根据提供的代码，我猜您想将图像直接绘制到表单上。您可以通过表单句柄创建图形对象，如下所示：

```
Graphics^ graphicsInstance = Graphics::FromHwnd(this->Handle); 
```

并简单地替换`e->Graphics`为`graphicsInstance`来获得这个电话：

```
graphicsInstance->DrawImage( newImage, destPara, srcRect, units ); 
```

*有关绘画本身的更多详细信息：* 正如您在提供的文章中所见，他们刚刚发布了方法并方便地将**PaintEventArgs**作为参数传递，这是覆盖**OnPaint**和**OnPaintBackground**以减少混乱时使用的典型模式绘制事件代码。因此，只需确保将图形对象从两个绘制事件中的任何一个传递给您的辅助方法，或者如果有必要使用上面的方法创建您自己的（稍微探索一下 Graphics 类型，您将看到您可以从多个源，而不仅仅是表单的句柄）。你可以在这里找到一篇关于代码项目的不错的文章，其中包含一些关于在 WinFroms 中绘图的理论制作：[链接](http://www.codeproject.com/Articles/1355/Professional-C-Graphics-with-GDI)

# debugging - 如何在分段错误后告诉 LLDB 继续？

> ID：13323461
> 
> 赞同：3
> 
> 时间：2012-11-10T15:45:48.500
> 
> 标签：debugging, signals, lldb

上下文：我正在为另一个平台编写解释器，这意味着我的程序通常会从任意整数数据中加载指针。当涉及到分支时，我尝试取消引用以立即读取下一条指令的地址，这样如果地址无效，我就会在分支指令的方法中得到分段错误，而不是稍后。这应该使调试更容易。

但是，这并不像我希望的那样有用。当那里发生段错误时，它应该是完全可恢复的，因为它是由虚拟读取触发的，所以我希望能够将程序的指令指针移回方法的开头并重置段错误。

我可以告诉 LLDB 忽略`SIGSEGV`已经进入我的程序的一个吗？我知道我可以`process handle ...`用来决定哪些信号进入我的程序，但这不适用于进程当前正在处理（或者更确切地说不处理）的信号。

（如果不可能，我想我仍然可以要求 lldb 停止段错误而不将它们传递给程序，但我至少想*知道*它是否可能。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T23:12:09.667

我认为您正在尝试解决`EXC_BAD_ACCESS`问题以正确放置它。例如，听起来您在这个示例程序中描述了 dataptr

```
#include <stdio.h>
int main ()
{
  void (*funcptr)(void) = 0;
  int *dataptr = 0;
  puts ("about to deref dataptr");
  printf ("%d\n", *dataptr);
  puts ("about to call through f ptr");
  funcptr();
  puts ("done");
  return 0;
} 
```

`dataptr`您将在调用中的取消引用中点击第一个 EXC_BAD_ACCESS `printf`。您可以将变量更改为有效值以继续执行。这里的一个技巧是`dataptr`在我编译的示例中变量存在于堆栈中`-O0`，因此您需要设置此时正在读取的*寄存器以通过它。*这里我只是以这个程序中的起始地址`main()`作为有效地址作为一个简单的例子。

```
* thread #1: tid = 0x1f03, 0x0000000100000eb6 a.out`main + 54 at a.c:7, stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
-> 7      printf ("%d\n", *dataptr);

(lldb) disass -c 1 --pc
a.out`main + 54 at a.c:7:
-> 0x100000eb6:  movl   (%rcx), %esi
(lldb) reg read rcx
     rcx = 0x0000000000000000
(lldb) p dataptr
(int *) $0 = 0x0000000000000000

(lldb) p dataptr = (int*) main
(int *) $1 = 0x0000000100000e80
(lldb) reg write rcx `$1`

(lldb) c
Process 77491 resuming
-443987883
about to call through f ptr
* thread #1: tid = 0x1f03, 0x0000000000000000, stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
    #0: 0x0000000000000000 
```

现在我停止了，因为我通过 NULL 函数指针调用。展开这需要一点额外的 x86_64 ABI 知识，但这并不难——将 pc 设置为调用者的返回地址，将堆栈弹出一个单词，然后你就回来了。

```
(lldb) reg write pc `*(unsigned long long *)$sp`
(lldb) reg write sp `$sp + 8`
(lldb) c
Process 77522 resuming
done
Process 77522 exited with status = 0 (0x00000000) 
```

当然，这是非常手动的调整 - 自动化并不容易。您可以使用 python 函数表达空函数指针 deref 并添加一个 lldb 命令来轻松完成，但是空数据指针 deref 要求您知道正在访问哪个寄存器 - 也许反汇编指令的一些巧妙的模式匹配可以做到对于常见情况，与一些 python 扩展相同。

希望有帮助。

# nhibernate - 单独的 NHibernate.SQL 空文件

> ID：13323462
> 
> 赞同：1
> 
> 时间：2012-11-10T15:46:06.877
> 
> 标签：nhibernate, log4net

我正在尝试使用以下配置将 NHibernate 的 sql 重定向到一个单独的文件，但没有成功。一切（带有 SQL 查询）都进入主文件。有人可以帮忙吗？

```
 <log4net>
    <appender name="DebugSQL" type="log4net.Appender.FileAppender">
      <param name="File" value="nhsql.log"/>
      <param name="AppendToFile" value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern
          value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>
    <appender name="Main" type="log4net.Appender.FileAppender">
      <param name="File" value="nh.log"/>
      <param name="AppendToFile" value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern
          value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>

    <logger name="NHibernate.SQL">
      <level value="ALL" />
      <appender-ref ref="DebugSQL" />
    </logger>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="Main" />
    </root>

  </log4net> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:19:59.077

默认情况下，记录器继承其祖先中的所有附加程序。因此记录器`NHibernate.SQL`还将记录到根记录器中的所有附加程序。`additivity`您可以使用以下属性来防止这种情况：

```
<logger name="NHibernate.SQL" additivity="false" >
...
</logger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T08:39:37.417

看起来只有初始 SQL 语句（创建表等）没有记录到单独的文件中。其他的都是。所以我想它必须是这样的，这个配置是可以的。感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T01:07:38.137

除了将 SQL 发送到单独的文件之外，该根配置还将把所有内容发送到 Main appender。如果要防止 SQL 出现在主日志文件中，则需要在 log4net 手册中搜索“过滤器”：http: [//logging.apache.org/log4net/release/manual/configuration.html](http://logging.apache.org/log4net/release/manual/configuration.html)那些应该进入主附加程序的配置。

# java - 如何证明没有区间重叠？

> ID：13323464
> 
> 赞同：3
> 
> 时间：2012-11-10T15:46:34.103
> 
> 标签：java, algorithm, intervals

如果没有间隔重叠，我必须实施。

间隔看起来像这样：

```
0-100
100-200
200-500
500-1000
1000-2000 ect.... 
```

现在，intervalls 分别存储在一个带有 min(0,100,200,500...) 和 max(100,200,500...) 的数组列表中

如果我添加一个新的间隔，我必须检查现有间隔是否没有重叠。前任。：

250-280 可以 300-600 不行

但是，我不知道该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T15:54:42.017

您可以为此任务使用[区间树数据结构，并且仅当区间中没有碰撞/交叉点时才添加元素。](http://en.wikipedia.org/wiki/Interval_tree)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:51:57.707

对于区间 (a,b)

1 循环你的列表

2 如果`a`落在其中一个区间内，则区间重叠。

`a`3 找出应该在哪两个区间

4 重复`b`。同样，如果`b`在它重叠的任何间隔内。

5 如果`a`和`b`在两个相同的区间之间，它们不重叠。否则它们会重叠。

当然，Yob 建议在开始算法之前使用单个数组列表并将间隔作为对象进行管理是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T15:58:30.563

> 现在，intervalls 分别存储在一个带有 min(0,100,200,500...) 和 max(100,200,500...) 的数组列表中

所以 ...

```
bool isCollided = false;
Integer min = 250;
Integer max = 280;
for(Integer intOne: firstList){
  Integer intTwo = secondList.get(firstList.indexOf())
  if( (min >= intOne && <= intTwo) || (max >= intOne && <= intTwo){
    isCollided = true;
    break;
  }
} 
```

但我可能会像其他人建议的那样创建自己的课程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T20:21:36.607

您可以按起点对它们进行排序，例如在[NavigableMap](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html)中。

```
NavigableMap<Integer, Integer> map =
map.put(100, 200);
map.put(300, 500);

// to test for a range.
int start = 300, end = 400;
if (map.floorEntry(start).getValue() >= start && map.ceilingKey(start) <= end)
   // out of existing ranges. 
```

这个操作是 O(ln N)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T16:37:19.987

由于间隔不重叠，因此您可以按下限对它们进行排序。要查找给定间隔是否与某个现有间隔重叠，您可以使用二进制搜索，这样搜索时间将是 log(N)。

我建议创建`class Interval implements Comparable<Interval>`和使用`java.util.TreeMap<Integer, Interval>`. 关键是上下界之和。插入 new`Interval i`时，只检查两个条目的重叠：`map.floorEntry(i.key())`和`map.lowerEntry(i.key())`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-10T15:50:40.407

您可能确实创建了一个包含开始和结束的间隔对象，并将其放入 ArrayList。

您可以轻松地在此类上实现一个可以检测碰撞的方法：

```
public boolean hasCollision(Interval inter){....} 
```

现在在插入之前迭代你的集合并调用 hasCollision() 方法......我想优化结果，你也可以让 Interval 对象实现`Comparable`并使用 Sorted 集合。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-16T22:04:35.103

有一个简单的方法作为实用方法

public static boolean isOverlapping(Date start1, Date end1, Date start2, Date end2) { return start1.before(end2) && start2.before(end1); }

# ios - 在公共服务器上保护应用程序数据的最佳实践

> ID：13323466
> 
> 赞同：0
> 
> 时间：2012-11-10T15:46:56.703
> 
> 标签：ios, security, download

假设我正在构建一个 iOS 应用程序，它需要加载一些不时更新的静态 JSON 数据。创建这个 JSON 数据需要付出很多努力，而且带宽也不是免费的。

**我想防止其他应用程序搭载在我的服务器上并使用我的数据。**

我之前尝试过加密的 zip 文件，这很麻烦。

**最佳实践是什么？**

*我意识到没有办法保证 100% 的安全。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:05:19.330

加密文件是最好的方法。如果安全性不是那么重要，请在 http 请求中添加一个神奇的值，无论是在 URL 中，还是在标头中更好。例如，计算日期的哈希值（在 gmt 时），将其放入请求标头中，并让服务器对其进行检查。它不是很安全，不能在时钟关闭的设备上工作，并且您可能希望接受昨天、今天和明天的时钟值略微关闭，但它会停止随意下载您的文件。

或者，您可以实现一个质询-响应系统，其中设备发出服务器请求，服务器返回 100 个值之一。然后客户端对该值执行一些特殊操作（将其加倍，用一些盐对其进行散列，在表查找中使用它等）并在下一个服务器请求中使用结果。

最简单/最愚蠢的方法是在 http 标头中放置一个固定的魔法值。它不会阻止黑客超过 10 分钟，但会阻止一些最终用户使用 curl 或 wget 下载您的数据。

# python - beautifulsoup 4：分段错误（核心转储）

> ID：13323469
> 
> 赞同：4
> 
> 时间：2012-11-10T15:47:33.727
> 
> 标签：python, screen-scraping, web-scraping, beautifulsoup

我爬取了以下页面：

[http://www.nasa.gov/topics/earth/features/plains-tornadoes-20120417.html](http://www.nasa.gov/topics/earth/features/plains-tornadoes-20120417.html)

但是我在调​​用时遇到了分段错误（核心转储）：BeautifulSoup(page_html)，其中 page_html 是请求库中的内容。这是 BeautifulSoup 的错误吗？有什么办法可以解决这个问题吗？甚至像 try...except 这样的方法也会帮助我运行我的代码。提前致谢。

代码如下：

```
import requests
from bs4 import BeautifulSoup

toy_url = 'http://www.nasa.gov/topics/earth/features/plains-tornadoes-20120417.html'
res = requests.get(toy_url,headers={"USER-Agent":"Firefox/12.0"})
page = res.content
soup = BeautifulSoup(page) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T00:05:49.670

此问题是由 lxml 中的错误引起的，[该错误](https://bugs.launchpad.net/lxml/+bug/984936)已在 lxml 2.3.5 中修复。您可以升级 lxml，或将 Beautiful Soup 与 html5lib 或 HTMLParser 解析器一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:00:20.483

绝对是一个错误。不应该以这种方式进行段错误。我可以重现（4.0.1）：

```
>>> import bs4, urllib2
>>> url = "http://www.nasa.gov/topics/earth/features/plains-tornadoes-20120417.html"
>>> page = urllib2.urlopen(url).read()
>>> soup = bs4.BeautifulSoup(page)
Segmentation fault 
```

经过一些平分后，它看起来是由 DOCTYPE 引起的：

```
>>> page[:page.find(">")+1]
'<!DOCTYPE "xmlns:xsl=\'http://www.w3.org/1999/XSL/Transform\'">' 
```

一个粗略的 hack 允许 bs4 解析它：

```
>>> soup = bs4.BeautifulSoup(page[page.find(">")+1:])
>>> soup.find_all("a")[:3]
[<a href="/home/How_to_enable_Javascript.html" target="_blank">› Learn How</a>, <a href="#maincontent">Follow this link to skip to the main content</a>, <a class="nasa_logo" href="/home/index.html"><span class="hide">NASA - National Aeronautics and Space Administration</span></a>] 
```

了解更多的人可能能够看到真正发生的事情，但这可能会帮助您入门，无论如何。

# xml - 用于简单登录的 WSDL 基本模式

> ID：13323471
> 
> 赞同：0
> 
> 时间：2012-11-10T15:48:08.683
> 
> 标签：xml, wsdl

我正在努力为 WSDL 创建一个基本定义来处理简单的登录。

我正在创建一个我正在调用的服务`uQuizService`。

目前它真的处于起步阶段，我希望创建一个操作。我有一个名为的端口`uQuizMembership`和一个`DoLogin`由 PHP 脚本处理的操作。

所需的输入和输出`DoLogin`：

*   `loginRequest`：我希望这将 USERNAME 和 PASSWORD 作为字符串。
*   `loginResponse`：我希望将生成的 SESSION_ID 作为字符串返回。

目前，输入被指定为单个字符串（我认为：/）。

我不确定如何为操作的`loginRequest`输入指定 USERNAME 和 PASSWORD `DoLogin`。

到目前为止，这是我的 WSDL 文件：

```
<?xml version="1.0"?>

<wsdl:definitions name="uQuizSOAP"
targetNamespace="urn:uQuizSoap"
xmlns:tns="urn:uQuizSoap"
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns="http://schemas.xmlsoap.org/wsdl/">

<wsdl:service name="uQuizService">
    <port name="uQuizPort" binding="uQuizBinding">
        <soap:address location="http://uquiz/soap_server.php" />
    </port>
</wsdl:service>

<wsdl:portType name="uQuizMembership">
    <wsdl:operation name="DoLogin">
        <wsdl:input message="tns:loginRequest" />
        <wsdl:output message="tns:loginResponse" />
    </wsdl:operation>
</wsdl:portType>

<wsdl:message name="loginRequest">
    <part name="username" type="xsd:string"/>
</wsdl:message>

<wsdl:message name="loginResponse">
    <part name="login_session_id" type="xsd:string" />
</wsdl:message>

<wsdl:binding name="uQuizBinding" type="tns:uQuizPortType">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="DoLogin">
        <soap:operation soapAction="urn:xmethods-delayed-quotes#DoLogin" />
        <wsdl:input>
            <soap:body use="encoded" namespace="urn:xmethods-delayed-quotes"
            encodingStyle="http://schemas.xmlsoap.org/soap/encoding/'" />
        </wsdl:input>
        <wsdl:output>
            <soap:body use="encoded" namespace="urn:xmethods-delayed-quotes"
            encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>

</wsdl:definitions> 
```

我的问题：

我不确定输入和输出定义在`binding`当前情况下是否正确。

我不确定如何将其更改为接受用户名和密码字符串，而不仅仅是一个字符串。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:58:21.417

首先，您发布的 WSDL 无效。在服务部分，端口绑定设置为何`uQuizBinding`时应该`tns:uQuizBinding`

```
<port name="uQuizPort" binding="tns:uQuizBinding"> 
```

而在绑定部分，类型属性设置为`tns:uQuizBinding`我认为应该设置的时间`tns:uQuizMembership`

```
<wsdl:binding name="uQuizBinding" type="tns:uQuizMembership"> 
```

并且请求确实被指定为单个字符串（只是`username`），因为您只为消息定义了一个部分：

```
<wsdl:message name="loginRequest">
    <part name="username" type="xsd:string"/>
    <!-- this is missing -->
    <part name="password" type="xsd:string"/>
</wsdl:message> 
```

修复这些项目，您应该会收到如下所示的请求和响应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:xmethods-delayed-quotes">
   <soapenv:Body>
      <urn:DoLogin>
         <username>...</username>
         <password>...</password>
      </urn:DoLogin>
   </soapenv:Body>
</soapenv:Envelope>

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:xmethods-delayed-quotes">
   <soapenv:Body>
      <urn:DoLoginResponse>
         <login_session_id>...</login_session_id>
      </urn:DoLoginResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

另请注意，**您使用的是 RPC/编码样式**，这不是互操作性推荐的样式。请参阅这篇文章以获取一些指导：[我应该使用哪种风格的 WSDL？](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)也许看看一个使用文档/文字样式的工作示例：http: [//www.html2xml.nl/Services/Calculator/Version1/Calculator.asmx](http://www.html2xml.nl/Services/Calculator/Version1/Calculator.asmx)

由于您正在执行登录操作，您可能还希望确保此操作安全:)

# mysql - 使用字符串匹配对查询结果进行重复数据删除

> ID：13323472
> 
> 赞同：2
> 
> 时间：2012-11-10T15:48:13.440
> 
> 标签：mysql, sql

我有一张表格，格式如下：

```
Id     | Loc |
-------|-----|
789-A  | 4   |
123    | 1   |
123-BZ | 1   |
123-CG | 2   |
456    | 2   |
456    | 3   |
789    | 4   | 
```

我想根据是否存在重复从查询结果中排除某些行。但是，在这种情况下，重复行的定义非常复杂：

如果查询返回的**任何**行（让我们将此假设行称为）**在查询结果**中也包含与AND形式相同`ThisRow`的对应行，则应将其视为重复并从查询结果中排除。**`Loc``ThisRow.Loc``Id``<ThisRow.Id>-<an alphanumeric suffix>``ThisRow`**

 **例如，使用上面的表格，`SELECT * FROM table`应该返回下面的结果集：

```
Id     | Loc |
-------|-----|
789-A  | 4   |
123-BZ | 1   |
123-CG | 2   |
456    | 2   |
456    | 3   | 
```

我了解如何编写字符串匹配条件：

```
ThisRow.Id REGEXP '^PossibleDuplicateRow.Id-[A-Za-z0-9]*' 
```

和直接比较`Loc`：

```
ThisRow.Loc = PossibleDuplicateRow.Loc 
```

我不明白的是如何将这些条件形成一个（自引用？）查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:57:41.657

这是一种方法：

```
SELECT *
FROM myTable t1
WHERE NOT EXISTS
(
    SELECT 1
    FROM myTable t2
    WHERE t2.Loc = t1.Loc
    AND t2.Id LIKE CONCAT(t1.Id, '-%')
) 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/06758/1)

或者，使用反连接的相同查询（应该快一点）：

```
SELECT *
FROM myTable t1
LEFT OUTER JOIN myTable t2 
    ON t2.Loc = t1.Loc
    AND t2.Id LIKE CONCAT(t1.Id, '-%')
WHERE t2.Id IS NULL 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/06758/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:30:00.983

在您提供的示例数据中，没有重复位置*不在*重复行上的示例。例如，您没有行“123-AZ, 1”，其中前缀行“123, 1”会与两行冲突。

如果这是数据的真实特征，那么您可以通过使用聚合来消除没有自连接的重复数据：

```
select max(id), loc
from t
group by (case when locate(id, '-') = 0 then id
               else left(id, locate(id, '-') - 1)
          end), loc 
```

我提供这个是因为聚合应该比非等值连接快得多。**

# android - AsyncTask 永远不会在 onPostExecute 方法中结束

> ID：13323474
> 
> 赞同：2
> 
> 时间：2012-11-10T15:48:32.707
> 
> 标签：android, android-asynctask

我创建了一个 AsyncTask，它在 doInBackground 方法中读取 JSONArray 并返回自定义项 (ArrayList) 的 ArrayList。在此之前，在 onPostExecute 方法中，我将 AsyncTask 中的 ArrayList 移动到主线程的另一个 ArrayList，但我认为我的 AsyncTask 永远不会结束并且仍在工作。在这里我把我的代码：

这里是异步任务：

```
private class ReadJSONTask extends AsyncTask<Void, Void, ArrayList<Item>>{

        @Override
        protected ArrayList<Item> doInBackground(Void... params) {
            // TODO Auto-generated method stub
            ArrayList<Item> auxList = new ArrayList<Item>();
            LoadData(auxList); //Method that reads JSON and load information in the ArrayList
            return auxList; // Return ArrayList
        }

        @Override
        protected void onPostExecute(ArrayList<Item> result) {
            // TODO Auto-generated method stub

            Log.i("OnPostExecute", String.valueOf(result.size()));  //The size of the array
            listMain = result; // Move the data of the AsyncTask to the main Thread

            Log.i("OnPostExecute", String.valueOf(listaComic.size()));  //The size of the ArrayList I use in the Main Thread
        }

    } 
```

这里调用主线程中的 AsyncTask：

```
if (isOnline()){    //Return true if there is internet connection
    ReadJSONTask task = new ReadJSONTask();
    task.execute();

    Log.i("Main Thread - listMain Size", String.valueOf(listMain.size())); //Never executed

    //This for loop its only for debug purposes, never executed
    for (Item item : listMain){ 
        Log.i("Items", item.toString());
    }
} 
```

在日志中，我看到 onPostExecute() 方法中的所有日志都已打印，但主线程中没有任何内容。

我不知道要修复它的错误在哪里，我已经研究了 2 天并在论坛中搜索，在 StackOverflow 中，我无法修复它：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:53:25.450

顾名思义，它`AsyncTask`是**asynchronous**，但由于某种原因`execute()`，除非 async 任务结束，否则您希望被阻止，这是错误的。您的代码工作正常，我希望 listMain 简单地为空，并且一旦`execute()`触发 asynctask，`for`将不会显示任何内容，因为异步任务尚未完成。您应该重新设计您的应用程序逻辑，以便异步任务可以告诉“主线程”它完成了。即将你的`for`循环移动到单独的方法并从`onPostExecute()`.

# android - 为什么Android在加载图像时分配的内存比需要的多

> ID：13323477
> 
> 赞同：11
> 
> 时间：2012-11-10T15:48:49.757
> 
> 标签：android, memory-management, heap-dump

伙计们，我不*认为*这是重复的，也不是我如何避免**OOM**问题的其中之一。这是对知识的真正追求，所以请不要投反对票……

想象一下我有一个`JPEG`像素`500x500`。我将`ARGB_8888`其加载为“ `bad as it gets`”。

但是，我希望 Android 进行分配`500x500x4 bytes = a little under 1MB`，查看**堆转储**，您会发现 Android 分配的内存要多得多，通常是`5-10`大几倍。

您经常在这里看到有关**OOMS**的问题，其中**堆栈跟踪**显示 a`heap request of say 15MB`并且它**总是**比仅保存图像字节所需的大得多。OP 通常会收到一些反对票，然后被关于使用更少内存（感谢 Romain！）和扩展的股票答案和评论轰炸。我认为这里有很多东西。

有人知道这是为什么吗？

如果没有明显的答案，如果有帮助，我会整理一个**SSCCE**。

PS。我认为JPEG与PNG等是无关紧要的，因为我们正在谈论支持位图的内存使用情况，它只是x乘以y乘以BPP - 还是我很慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T17:19:58.740

过去，在内存管理中，抓取一个内存池或内存块是很常见的技巧，这些内存被分配到较小的请求中。当我使用嵌入式系统时，维护不同大小的内存池是一种常见的做法，我们只是分配了一个大于从池中请求的数量的块。这是一种防止过多内存碎片的便捷方法。也许这正在发生在这里。

# sql-server-2008 - 如何在sql server中更新以逗号分隔的多行列

> ID：13323478
> 
> 赞同：4
> 
> 时间：2012-11-10T15:49:02.377
> 
> 标签：sql-server-2008

有两个表

```
table stud
id   name  marks1 marks 2
1     X     3      2
2     y     4      2
3     z     5      2 
```

第二表评论

```
comment 
```

使用给定格式的 stud 行更新注释列 预期结果

表注释

```
 comment
 1,X,3,2#2,y,4,2#3,z,5,2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:25:27.317

[SQL小提琴](http://sqlfiddle.com/#!3/cc10f/2)

**MS SQL Server 2008 架构设置**：

```
create table stud
(
  id int,
  name varchar(10),
  marks1 int,
  marks2 int
)

create table comment
(
  comment varchar(max)
)

insert into stud values
(1,     'X',     3,      2),
(2,     'y',     4,      2),
(3,     'z',     5,      2) 
```

**查询 1**：

```
insert into comment(comment)
select
  (
  select '#'+cast(id as varchar(10))+','+
             name+','+
             cast(marks1 as varchar(10))+','+
             cast(marks2 as varchar(10))
  from stud
  for xml path(''), type
  ).value('substring((./text())[1], 2)', 'varchar(max)') 
```

**[结果](http://sqlfiddle.com/#!3/cc10f/2/0)**：

**查询 2**：

```
select *
from comment 
```

**[结果](http://sqlfiddle.com/#!3/cc10f/2/1)**：

```
|                 COMMENT |
---------------------------
| 1,X,3,2#2,y,4,2#3,z,5,2 | 
```

# java - 想要隐藏/删除屏幕菜单栏

> ID：13323479
> 
> 赞同：1
> 
> 时间：2012-11-10T15:49:04.813
> 
> 标签：java, macos, netbeans, screen, menubar

我在 2012 Mac Book Pro 上的 Os X 10.8.2 下使用 NetBeans 7.2 编写了一个 java 应用程序，我决定删除或隐藏屏幕菜单栏，因为没有简单的方法来编辑我的 java 应用程序的屏幕菜单栏。我在屏幕菜单栏上进行了搜索和搜索，但没有找到任何显示如何：编辑或隐藏的内容。在使用 NetBeans 时，我得到的唯一信息是如何将我的 JMenuBar 组合到屏幕菜单栏中，并且示例不起作用。

如果有人能指出我编辑屏幕菜单栏内容的好方向，我会更乐意使用它。但是，如果在不重写源代码的情况下没有简单的方法来实现这一点，那么我将在表单上保留我自己的菜单并隐藏或删除屏幕菜单栏（如果可以的话）。

![在此处输入图像描述](../Images/6c6bc902aa42f56e0eb0bef777f2b1c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:26:49.720

你不能。系统菜单栏是一个共享的用户界面元素——你只能在全屏运行时隐藏它，此时你最终根本没有菜单栏。

您真的应该考虑让应用程序的菜单栏不出现在窗口中，因为这不是 Mac OS X 上预期的用户界面习惯用法。如果您还没有这样做，这段代码可能会有所帮助：

```
System.setProperty("apple.laf.useScreenMenuBar", "true"); 
```

如果这样做不行，“相关”侧边栏中有许多问题可能会有所帮助。

# jquery - 何时使用 CDN 托管，何时不使用？

> ID：13323480
> 
> 赞同：14
> 
> 时间：2012-11-10T15:49:07.730
> 
> 标签：jquery, cdn, bower

这个问题试图找出是否值得权衡 CDN 的好处以支持更有条理和有组织的供应商代码管理。

* * *

我知道建议使用 CDN 来提供像 jquery 这样的供应商库。

然而，我今天正在阅读关于[凉亭](http://twitter.github.com/bower/)的文章，这让我感到好奇。使用 bower，我可以以非常结构化的方式轻松管理我的应用程序的所有依赖项。我最终可以将它们打包在一个`vendor.js`文件中（使用 yeoman、[brunch](http://brunch.io)或简单的[grunt](http://gruntjs.com/)），该文件将作为`script`标签中的 html 中的服务器。

然而，虽然这种方法可以让我的生活更轻松，但它的缺点是什么？我可以想到以下几点：

*   我正在使用的许多库很可能已经缓存在用户的浏览器中。
*   通过将它们全部放在一个`vendor.js`文件中，浏览器最终会缓存这个文件，但是每当我添加新的第三方依赖项时，即当我的供应商文件发生更改时，我就会开始面临问题。浏览器将不得不重新加载该文件（从而失去原始 vendor.sj 文件的缓存）

这么说吧，花时间将 html 中的依赖项作为`<script>`标签来管理，接缝以提供更好的性能/加载时间。

你觉得我的思维方式有问题吗？用 say 组织代码的好处是否`bower`足够令人信服？毕竟，它就像骨干。是的，对于小型应用程序来说，主干应用程序更重，它包含更多代码.. 但从开发人员的角度来看，这是值得的！

干杯（感谢让我重新编辑问题的评论！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T15:56:10.430

如果您可以使用 CDN，并且您的项目要求允许，请使用它。它通常更快，并且浏览器可能已经缓存了来自其他站点的这些文件。

我构建的大多数网站都使用 CDN 中的 jQuery。但是，您会发现有时这些 CDN 会被特定国家/地区阻止。在任何情况下，有一个后备都没有坏处。您可以从 CDN 加载 jQuery，如果失败则回退到您自己的服务器。

# java - 在生成的 list.jspx 中添加自定义列 url - Spring roo

> ID：13323481
> 
> 赞同：2
> 
> 时间：2012-11-10T15:49:35.377
> 
> 标签：java, spring-roo

我为我的一个实体创建了一个查找器，我想在我生成的列表的列中添加一个自定义 URL。例如，我想创建一个像`/custom/idEntity`. 如何创建链接？我必须修改 list.jspx 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:10:20.703

您必须为实体编辑 list.jspx。

这个[stackoverflow](https://stackoverflow.com/q/13273043/1033422)问题（和答案）与您尝试做的类似。

如果您要进行大量 ROO 开发，则值得浏览和理解其中的代码`src/main/webapp/WEB-INF/views/`- 您将找到有关如何做大部分您想做的事情的示例。

如果您想成为 ROO 专家，这本[Spring Roo in Action Book 非常值得一读。](http://www.manning.com/rimple/)

# elmah - 如何在 Visual Studio 非 ASP.Net 库项目中使用 Elmah

> ID：13323488
> 
> 赞同：3
> 
> 时间：2012-11-10T15:51:02.157
> 
> 标签：elmah

我们需要在非 ASP.Net 项目中使用 Elmah。

在这个库项目中，Elmah 应该记录所有未捕获的异常，我们也应该能够记录或引发异常。

我们已经在网络环境中做到了这一点，但不是在图书馆项目中。我们如何才能做到这一点，或者我们在哪里可以找到有关它的信息？

# ruby-on-rails - 已使用永久链接时处理永久链接用户更新 Rails 3.2

> ID：13323491
> 
> 赞同：0
> 
> 时间：2012-11-10T15:51:46.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, permalinks

我想要一些关于如何处理`to_param`的建议`permalinks`

基本上这就是发生的事情。

*   创建新公司
*   然后将公司`:name`参数化并保存为`:permalink`数据库中的
*   更新现有公司使您能够更改`:permalink`
*   有验证以确保用户更新`:permalink`是唯一的

我遇到的问题是在将公司更新为`:permalink`已经存在的东西时发生的。唯一性验证非常有用，但它会将永久链接更改`params[:id]`为无效的永久链接，而不是重置和使用现有的`params[:id]`

当我尝试将其编辑`permalink`为其他内容时，我收到一个 Flash 验证错误，`"Name already taken"`因为它认为我正在编辑现有`:permalink`（公司）的公司。该 URL 反映了`permalink`自从我`companies_controller.rb`使用以来的变化`@company = Company.find_by_permalink[:id])`

我想知道处理这个问题的最佳方法？

```
class Companies < ActiveRecord::Base
  before_create :set_permalink
  before_update :update_permalink

  attr_accessible :name, :permalink

  validates :name, :permalink, uniqueness: { message: 'already taken' }

  def to_param
    permalink
  end

  private

  def set_permalink_url
    self.permalink = name.parameterize
  end

  def update_permalink_url
    self.permalink = permalink.parameterize
  end

end 
```

抱歉，如果我没有太多意义。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:27:53.897

`after_rollback`你可以尝试通过回调来处理这个问题。

```
 after_rollback :restore_permalink

 def restore_permalink
   self.permalink = permalink_was if permalink_changed?
 end 
```

它是这样工作的：Rails 中的每个更新/销毁都包含在一个事务中。如果保存失败，事务回滚并触发回调。`permalink_was`如果在加载记录后发生更改，则回调将恢复旧值 ( )。

有关详细信息，请参阅[ActiveModel::Dirty](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)和[ActiveRecord::Transactions](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html#method-i-after_rollback)。

**编辑**

另一方面，*可能*还有另一种解决方案（未经测试） - 只需像这样定义您的访问器：

```
 def permalink=( value )
   permalink_will_change! unless @permalink == value
   @permalink = value
 end 
```

这样，如果新值与旧值相同，则永久链接不会被标记为脏，因此 AR 不会尝试更新列。

**解释：**

我不知道它是在哪个版本的 Rails 上实现的（它是相对较新的），但这是“脏”的工作原理：

*   您的“标准”（自动生成）属性设置器基本上 `#{your_attribute}_will_change!`在设置关联的实例变量之前调用（即使您设置的值与以前完全相同）
*   当您调用时`save`，ActiveRecords 会查找已更改的属性（“脏”）并仅使用这些属性构建 SQL UPDATE 查询（主要是出于性能原因）
*   因此，如果您想避免您的永久链接在未更改时出现在查询中，我认为您必须覆盖标准设置器 - 或避免批量分配并且仅`permalink`在它已更改时设置

# android - 无法将数据库经纬度与当前位置进行比较

> ID：13323492
> 
> 赞同：0
> 
> 时间：2012-11-10T15:51:46.617
> 
> 标签：android, database, location, background-service

所以我试图获取当前的纬度和经度，并将其与我使用光标存储在数据库中的数据进行比较......但是当我试图在我的单元格上运行这个应用程序时，它会在一段时间后强制关闭......不要'不知道为什么是什么原因......这是获取当前位置并将其与数据库进行比较的代码

```
package com.example.alert;

import java.util.ArrayList;
import java.util.List;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class service extends Service{

LocationManager lm;

DatabaseHelper db=new DatabaseHelper(this);
List<String> arlist=new ArrayList<String>();

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreate() {
    LocationManager lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);

    LocationListener ll=new MyLocationListener();
    //lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5*60*10000, 0, ll);
    lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, ll);

    Toast.makeText(this, "Background Service Created", Toast.LENGTH_LONG).show();

}

public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();

}

public void onStart(Intent intent, int startid) {

    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
//  Intent myIntent=new Intent(service.this,CurrentLocation.class);
    }

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(Location loc)
    {
        if(loc!=null)
        {
            double x;

            SQLiteDatabase y = db.getWritableDatabase();
            String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();
            Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();
        //  String t=loc.getLatitude().toString();
            Cursor cr=null;
            cr=y.rawQuery("SELECT LATITUDE FROM"+ "data",null);
            cr.moveToFirst();
            while(cr.moveToNext()) {

                arlist.add(cr.getString(cr.getColumnIndex("Latitude")));
                }
            for(int i=0;i<arlist.size();i++){
                if(arlist.get(i)==Double.toString(loc.getLatitude())){
                    Intent myIntent=new Intent(service.this,SilVib.class);
                    startActivity(myIntent);
                }
            }

            /*  cr.moveToFirst();
            while(!cr.isAfterLast()) {
                 al.add(cr.getString(cr.getColumnIndex(dbAdapter.KEY_NAME))); //add the item
                 cr.moveToNext();
            }*/
        //  lm.addProximityAlert(loc.getLatitude(), loc.getLongitude(), 10009,, intent)

            //for loop, alerters retrieving one by one
//      x= calcDistance(loc.getLatitude(),loc.getLongitude(),z,y);
    //      if(x<1){
        //        Intent myIntent = new Intent(ViewAlerters.this,CallMode.class);
          //        startActivity(myIntent);
            }

        }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Disabled - @From :Alert Me",Toast.LENGTH_SHORT ).show();

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Enabled - @From :Alert Me",Toast.LENGTH_SHORT).show();

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
    }

/*  public double calcDistance(double latA, double longA, double latB, double longB) {

    double theDistance = (Math.sin(Math.toRadians(latA)) *  Math.sin(Math.toRadians(latB)) + Math.cos(Math.toRadians(latA)) * Math.cos(Math.toRadians(latB)) * Math.cos(Math.toRadians(longA - longB)));
    return new Double((Math.toDegrees(Math.acos(theDistance))) * 69.09*1.6093);
}
*/ 
```

}

# yql - 如何使用类属性查询 html 节点？

> ID：13323496
> 
> 赞同：3
> 
> 时间：2012-11-10T15:52:00.733
> 
> 标签：yql

我正在尝试使用 YQL 查询 html 数据。我想知道当节点有多个类时，如何基于类属性执行 html 节点的查询，例如：

```
<tr class='class1 class2'></tr> 
```

此查询工作正常：

```
select * from html where url="http://soccernet.espn.go.com/scores" and
  xpath='//tr[@class="class1"]' 
```

但是当我尝试查询时`class2`，我得到了空结果：

```
select * from html where url="http://soccernet.espn.go.com/scores" and
  xpath='//tr[@class="class2"]' 
```

所以基本上我想知道当节点具有多个类属性时如何使用 YQL 查询 html 节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T07:12:33.710

可能有更好的方法 - 但这就是我遇到这个问题时的解决方法：

```
select * from html where url="http://soccernet.espn.go.com/scores" and xpath='//tr[contains(@class,"class2")]' 
```

# java - 从java中选择的文件的类中获取方法

> ID：13323497
> 
> 赞同：1
> 
> 时间：2012-11-10T15:52:07.263
> 
> 标签：java, reflection, classloader

我想从文件（.text 或 .java）中获取所有方法，但我还不知道文件的名称（用户可以使用 jFileChooser 选择它）。所以我不知道班级的名字。我有这个代码：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;
import javax.swing.JFileChooser;

public class Test {

   public static void main(String[] args) throws Throwable {

        JFileChooser fc = new JFileChooser();
        File f = null;
        if (fc.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
            f = fc.getSelectedFile();
        }
        int errorCode = com.sun.tools.javac.Main.compile(new String[]{
                    "-classpath", "bin",
                    "-d", "../Tmp",
                    f.getAbsolutePath()});

        System.out.println("errorCode:" + errorCode);
        File classesDir = new File("../Tmp");

        ClassLoader parentLoader = Test.class.getClassLoader();

        URLClassLoader loader1 = new URLClassLoader(
                new URL[]{classesDir.toURL()}, parentLoader);

        BufferedReader br = new BufferedReader(new FileReader(f));
        String load = "";
        while ((load = br.readLine()) != null) {
            if (load.startsWith("package")) {
                load = load.replaceAll("package", "") + "." + f.getName().substring(0, f.getName().indexOf("."));
                load = load.replace(";", "").trim();
                break;
            }
        }
        Class cls1 = loader1.loadClass(load);
        Method[] methods = cls1.getDeclaredMethods();
        for (Method m : methods) {      
            System.out.println(m.getName());
        }
    }
} 
```

如果该类不包含“扩展”或使用另一个类的方法，它可以工作，但如果是这样，我会收到错误。我应该怎么做才能解决这些问题？我认为它与“classpath”和“bin”有关

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:57:05.853

它确实与`-classpath bin`选项有关。编译器需要能够访问目标类所依赖的所有类。如果你想继续使用这种方法，你必须给用户一些方法来定义他们自己的类路径，包括“bin”以外的东西。

目前尚不清楚您的目标是什么，但其他选项包括：

*   使用用户已经编译的类
*   只需解析文件，而不是将其编译成 Java 类

* * *

详细说明第二个选项，您可以使用[Java 解析器](https://www.google.com/search?q=java%20parser&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)来分析文本。通常解析器会创建一个树结构，一个*抽象语法树*，编译器会遍历它，通常会多次执行不同的编译步骤。但是，解析后不一定要编译；你可以在 AST 上做任何你喜欢的分析。

我使用了 ANTLR Java 语法。它生成一个 AST，而 ANTLR 工具包提供了一种语法，您可以使用该语法编写一个“树解析器”，当它在 AST 中找到某些结构时执行您编写的操作。这种“树解析器”概念是 ANTLR 独有的；大多数语法只会以 AST 结束。

# ruby-on-rails-3 - ActiveRecord where 子句错误

> ID：13323500
> 
> 赞同：0
> 
> 时间：2012-11-10T15:52:47.137
> 
> 标签：ruby-on-rails-3

我是 Rails 的新手。我有一个名为 OfflineExport 的模型。在表中我有这样的数据

```
#<OfflineExport id: 2, 
  parameters: 
      {"project_id"=>"3", 
       "type"=>"submissions", 
       "filters"=>{"task_type"=>"", 
       "corrections"=>"", "grade"=>"", 
       "min_duration"=>"", "after"=>"", 
       "max_duration"=>"", "reviews"=>"", 
       "before"=>""}, 
  "send_email"=>"true", 
  "options"=>{"offline_record_id"=>2}}> 
```

我试图在 where 子句中获取参数 [“project_id”]

```
 OfflineExport.where("parameters[project_id] = '3'") 
```

但我收到如下错误：

```
ActiveRecord::StatementInvalid: PGError: ERROR:  cannot subscript type text because it is not an array 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:09:49.803

您的模型中似乎有一个序列化列。像这样的东西：`serialize :parameters`。这意味着数据以不易于阅读的格式存储在数据库中，这导致您无法对其进行查询。[和这里一样](https://stackoverflow.com/questions/9814622/searching-serialized-data-using-active-record)。

解决方案：提取您要查询的字段，并为其创建一个列。

# c - 谁能帮我解决这个结构/指针问题？

> ID：13323503
> 
> 赞同：2
> 
> 时间：2012-11-10T15:53:11.133
> 
> 标签：c, pointers, struct

```
strcpy((*pointeur).caractere, x); 
```

我`strcpy`用来复制 to 的值`x`并`(*pointeur).caractere`定义结构

```
typedef struct cle{
    char caractere;
    int compteur;
    struct cle *suivant;
}cle_t; 
```

并声明指针

```
cle_t *pointeur; 
```

但编译器告诉我

> “从 'char' 到 'char*' 的无效转换”

和

> "初始化 `char* strcpy(char*, const char*)' 的参数 1"

不明白怎么回事。。。谢谢大家~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:55:38.900

*致敬*！

`caractere`是一个字符，`strcpy`适用于字符串。根据您想要做的事情，有两种解决方案（使用您的标识符，我猜您是第一种情况）。

*   如果`x`是 a `char`，则使用`pointeur->caractere = x`（无需`strcpy`复制字符）。
*   如果`x`是 a`char*`或 a `char[]`，则声明`caractere`为具有足够长度的字符串（即使用数组`char`或动态分配的指针`char`），然后您可以调用`strcpy`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:24:13.607

1- 语法：你有一个指向结构的指针，然后访问它的字段：这种情况很常见，以至于 C 提供了 ''syntactic honey'' (du ''miel syntaxique''; en fait l'expression réelle est ''syntactic糖''，je plaisante）：

```
(p_struct*).field
// -->
p_struct->field 
```

在你的情况下：

```
strcpy((*pointeur).caractere, x);
// -->
strcpy(pointeur->caractere); 
```

使用这种形式不仅是因为它更好看，而且因为每个人都使用箭头，所以意思更明显。

2-`strcpy`复制字符串，而不是字符。字符串是字符数组，以 a`0`结尾，或指向它们的指针。因此，如果您想使用 strcpy，您需要将字段替换为包含字符串`caractere`的字段`chaine`，或者在将字符串`caractere`传递给`strcpy`. 但是，如果您只想复制字符，只需使用`=`.

3- 谨防误导性术语“字符”。AC`char`实际上只是一个字节（此外，签名或不签名取决于您的平台）。对于通用文本，即除了 ASCII 之外的任何内容，一个实际字符（在日常、语言或编程意义上）可以用一个或多个代码表示，每个代码占用一个或多个字节 (C `char`s)。（参见维基百科上的[UCS](http://fr.wikipedia.org/wiki/UCS)和[Unicode](http://fr.wikipedia.org/wiki/Unicode)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T16:00:20.527

```
strcpy((*pointeur).caractere, x); 
```

这可以正常工作，但`caractere`应该是`char *`或`char[]`

这是声明`strcpy()`

```
char *strcpy(char *dest, const char *src); 
```

另请注意，如果您正在创建`caractere`，`char*`那么请确保为此分配内存，否则使用`strcpy()`将给出`undefined behaviour`或可能导致`seg fault`

还有一件事：如果您要创建一个指针，`struct`那么您可以直接使用`->`运算符来访问数据成员

# javascript - jQuery .fadeIn() 工作但 .slideDown() 和 .animate() 不工作

> ID：13323504
> 
> 赞同：0
> 
> 时间：2012-11-10T15:53:17.393
> 
> 标签：javascript, jquery, ajax, jquery-animate, slidedown

我正在尝试建立一个网站，通过 ajax 调用加载页面，用 ajax 响应替换当前内容。我在 URL 的末尾添加了 # 和页面名称，以便人们可以为页面添加书签。

*   www.examplesite.com#home
*   www.examplesite.com#examples
*   www.examplesite.com#examples/example1
*   www.examplesite.com#examples/example2

我是 jQuery 新手，在较小程度上是 JavaScript，但是当我转到存储在子文件夹中的页面时，我试图获得不同的页面动画。fadeIn() 在页面和子文件夹中的页面上都可以正常工作，但是我根本无法让 .slideDown() 或 .animate() 工作。这是我的代码的摘录：

```
<script>
//All pages are stored in a folder called 'pages' or a subfolder of 'pages'
    $(document).ready(function(){
        var myUrl = $(location).attr('href');
        var noPage = myUrl.indexOf('#');
        if(noPage == -1) {
            location.hash = 'home';
        }
        window.onhashchange = function() {
            pageChange();
        }
        function pageChange() {
            var myUrl = $(location).attr('href');
            var page = myUrl.substring(myUrl.indexOf('#') + 1, myUrl.length);
            $.get('pages/' + page + '.html', function(pageHtml) {
                if (page.indexOf('/') != -1) {
                    $('.main').hide().html(pageHtml).slideDown(400);
                } else {
                    $('.main').hide().html(pageHtml).fadeIn(400);
                }
            }); 
        };
        pageChange();
    });
</script> 
```

如果我是从完全错误的方向来解决这个问题，这就是它不起作用的原因，请随时通过给我一个它应该如何工作的例子来指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:38:38.710

知道了！

我在我的几个 div 中使用了 css min-height 属性，这样如果页面上有很多内容，页面就会自动扩展。如果我删除 min-height 属性并将其替换为固定高度 .slideDown() 工作正常。

如果其他人有同样的问题，这里有一些链接可以获取更多信息： [http :](http://www.only10types.com/2011/09/jquery-slidedown-doesnt-work-on.html) [//www.only10types.com/2011/09/jquery-slidedown-doesnt-work-on.html http://docs.jquery.com/教程：Getting_Around_The_Minimum_Height_Glitch](http://docs.jquery.com/Tutorials%3aGetting_Around_The_Minimum_Height_Glitch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:09:08.520

我会拿这个...

```
 if (page.indexOf('/') != -1) {
                $('.main').hide().html(pageHtml).slideDown(400);
            } else {
                $('.main').hide().html(pageHtml).fadeIn(400);
            } 
```

并重新排列以确保您的 if 语句是正确的

```
 if (page.indexOf('/') != -1) {
                $('.main').hide().html(pageHtml).fadeIn(400);
            } else {
                $('.main').hide().html(pageHtml).slideDown(400);
            } 
```

如果它现在滑动而不是淡出，则 if 语句已损坏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:31:51.757

那这个呢 ？这行得通吗？

```
 var main_div=$('.main');
 main_div.hide();

 $.get('pages/' + page + '.html', function(pageHtml) {
                if (page.indexOf('/') != -1) {
                    main_div.html(pageHtml)
                } else {
                    main_div.html(pageHtml)
                }
            });

 main_div.slideDown(400); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T12:13:17.400

也许 CSS 中的某些东西一定会阻止它？尝试禁用`main`该类的 CSS 并重试？

# objective-c - 在 App Delegate 中执行初始视图控制器的序列

> ID：13323506
> 
> 赞同：0
> 
> 时间：2012-11-10T15:53:25.903
> 
> 标签：objective-c, ios, cocoa, uistoryboard

我有一个导航控制器，它的根视图是一个简单的视图。它有一个通过序列连接到第二个视图控制器的按钮。序列导致第二个视图控制器显示模式。如果条件不成立，我直接想在应用程序启动后显示第二个视图控制器。我尝试了很多代码，但它不会工作。这是我的场景的截图：![我的场景](../Images/b1e1439f67c0135a4fe3b66fc1502d65.png)

任何想法如何做到这一点？

* * *

我尝试了以下方法：

```
UIStoryboard *storybord = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil]; 
UINavigationController *vc = [storybord instantiateInitialViewController]; 
[[vc.viewControllers objectAtIndex:0] performSegueWithIdentifier:@"simple" sender:self]; 
```

但我收到以下错误消息：

> 尝试呈现`<UINavigationController: 0x71b2ab0>`不在`<UINavigationController: 0x71b12c0>`窗口层次结构中的视图！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:23:23.540

我假设您正在尝试来自应用程序委托的示例代码？您需要确保在加载第一个视图之前不要尝试执行 segue。巧合的是，如果你等到那个时候，它会容易得多，因为你需要做的就是`performSegueWithIdentifier`. 因此，在`viewDidLoad`第一个视图控制器中，例如：

```
if (bShouldAutomaticallyPerformSegueToSecondVC)
    [self performSegueWithIdentifier:@"simple" sender:self]; 
```

显然，替换`bShouldAutomaticallyPerformSegueToSecondVC`为任何合适的逻辑来确定您何时自动想要转到第二个视图控制器。

# git - git 添加正则表达式示例

> ID：13323507
> 
> 赞同：7
> 
> 时间：2012-11-10T15:53:34.830
> 
> 标签：git

我正在尝试使用添加部分提交

```
git add -p 
```

我选择了正则表达式选项

```
/ - search for a hunk matching the given regex 
```

补丁包含这些行

```
+      AMFObject obj2;
+      AMFObjectProperty p;
+      AVal redirect; 
```

但是git似乎没有找到它

```
search for regex? redirect
No hunk matches the given pattern 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T16:14:24.647

问题是这个补丁影响了多个文件。

我需要选择

```
d - do not stage this hunk nor any of the later hunks in the file 
```

直到到达正确的文件，然后正则表达式才会起作用。

# c# - 将字符串中的 \" 替换为 " (C#)

> ID：13323510
> 
> 赞同：0
> 
> 时间：2012-11-10T15:53:47.340
> 
> 标签：c#, json, string, replace, .net-4.5

我有一个像这样的 JSON

```
"{\"jquery\": [[0, 1, \"call\", [\"body\"]] etc 
```

这显然是错误的，我想将 \" 部分替换为 " 以使格式正确。

我已经尝试了很多东西.. "\\""、"\""、System.Environment.Newline，我无法在 String.Replace 中使用任何东西..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:06:39.290

我觉得你很困惑。。

如果您有这样的字符串，请在 C# 项目中的某处定义：

```
String str = "Foo is \"bar is\" Baz!"; 
```

当您查看它时，它将在调试器中以相同的方式显示。转义字符`\`是说，不要在这里结束我的字符串，这`"`是字符串的一部分。

如果您输入以下行，

```
Console.Write(str); 
```

你应该看到这个输出。

```
Foo is "bar is" Baz! 
```

# javascript - 当 onreadystatechange 发现 readState 为 4 时，将 Ajax 调用中的内容提供给单独的方法

> ID：13323512
> 
> 赞同：0
> 
> 时间：2012-11-10T15:53:56.340
> 
> 标签：javascript, ajax

我正在编写一个小型 JavaScript 实用程序库，其关键要求是一种方法：

*   获取 URL 和 ID
*   使用这些参数通过 Ajax（从提供的 URL）获取内容并将其放入 HTML 元素（由 ID 指定）。

我采取的方法是：

1.  创建一个对象来命名库 [不是直接相关，但它确实解释了下面代码的结构]
2.  编写基于传递给它的 URL 返回 ajax 内容的通用方法 [*请求工作正常，但将内容提供给单独的函数是我遇到问题的地方*]
3.  编写一个通用方法，该方法将采用 ajax 方法并将返回的值放入指定的 HTML 元素中[我希望这将非常简单，如果我能解决第 2 点]

**我的问题是，当 onreadystatechange 确定 readyState 为 4 时，我无法找到返回内容的方法。发生这种情况时，我需要能够将 this.returnText 的值传递给一个将其放入HTML。**

相关代码如下（完整包含，但最相关的部分包含在注释中

```
// Init-time branching is used to detect objects and set functions accordingly.
var utilite = {
    addListener: null,
    removeListener: null,
    createAjaxObject: null,
    ajaxReadyStateHandler: function() {
          console.log('Ready state is: ' + this.readyState);
          if (this.readyState === 4) {
              // Check the status code:
              if ( (this.status >= 200 && this.status < 300) || (this.status === 304) ) {
                console.log('Status OK');
                if(this.status === 304){
                    console.log('Using cached version');
                }
                // Here's the problem: 
                // Despite 'testingAjax' being passed to the original calling function
                // I can't access it directly and am forced to hard-code it here.
                utilite.setElementContent({id: 'testingAjax', content: this.responseText});
              } else { // Status error!
                console.log('Status error: ' + this.statusText);
              }
          } // End of readyState IF.
      },
    doAjax: function(passedObject) {
    var ajax = utilite.createAjaxObject();
    ajax.onreadystatechange = utilite.ajaxReadyStateHandler;
    ajax.open(passedObject.requestType, passedObject.resource, true);
    ajax.send(null);
    },
    getElement: function (id) { // Retrieves element by passed id
        'use strict';
        if (typeof id == 'string') {
            return document.getElementById(id);
        }
    },
    setElementContent: function(passedObject){
        'use strict';
        var theElement = utilite.getElement(passedObject.id);
        theElement.textContent = passedObject.content;
    }
}; // This is the end of utilite

// Event listener branches
if (typeof window.addEventListener === 'function') { // W3C and IE9
    utilite.addListener = function (obj, type, fn) {
        obj.addEventListener(type, fn, false);
    };
    utilite.removeListener = function (obj, type, fn) {
        obj.removeEventListener(type, fn, false);
    };
} else if (typeof document.attachEvent === 'function') { // IE
    utilite.addListener = function (obj, type, fn) {
        obj.attachEvent('on' + type, fn);
    };
    utilite.removeListener = function (obj, type, fn) {
        obj.detachEvent('on' + type, fn);
    };
} else { // DOM Level 0
    utilite.addListener = function (obj, type, fn) {
        obj['on' + type] = fn;
    };
    utilite.removeListener = function (obj, type, fn) {
        obj['on' + type] = null;
    };
}

// Ajax object creation branches
utilite.createAjaxObject = function() {
    var ajax = null;
    if(window.XMLHttpRequest){
        ajax = new XMLHttpRequest();
    } else if (window.ActiveXObject) { // Older IE.
        ajax = new Ac
    var utilite = {
        addListener: null,
        removeListener: null,
        createAjaxObject: null,
        ajaxReadyStateHandler: function() {
              if (this.readyState === 4) {
                  if ( (this.status >= 200 && this.status < 300) || (this.status === 304) ) {
                    if(this.status === 304){
                        console.log('Using cached version');
                    }
                  /* -------------------------

                  It is the value of this.responseText here that I need to provide to a separate function

                  */ -------------------------
                  } else { // Status error!
                    console.log('Status error: ' + this.statusText);
                  }
              } // End of readyState IF.
          },
        doAjax: function(passedObject) {
        var ajax = utilite.createAjaxObject();
        ajax.onreadystatechange = utilite.ajaxReadyStateHandler;
        ajax.open(passedObject.requestType, passedObject.resource, true);
        ajax.send(null);
        },
        getElement: function (id) { // Retrieves element by passed id
            'use strict';
            if (typeof id == 'string') {
                return document.getElementById(id);
            }
        }
    }; // This is the end of utilite
    // Event listener branches
    if (typeof window.addEventListener === 'function') { // W3C and IE9
        utilite.addListener = function (obj, type, fn) {
            obj.addEventListener(type, fn, false);
        };
        utilite.removeListener = function (obj, type, fn) {
            obj.removeEventListener(type, fn, false);
        };
    } else if (typeof document.attachEvent === 'function') { // IE
        utilite.addListener = function (obj, type, fn) {
            obj.attachEvent('on' + type, fn);
        };
        utilite.removeListener = function (obj, type, fn) {
            obj.detachEvent('on' + type, fn);
        };
    } else { // DOM Level 0
        utilite.addListener = function (obj, type, fn) {
            obj['on' + type] = fn;
        };
        utilite.removeListener = function (obj, type, fn) {
            obj['on' + type] = null;
        };
    }
    // Ajax object creation branches
    utilite.createAjaxObject = function() {
        var ajax = null;
        if(window.XMLHttpRequest){
            ajax = new XMLHttpRequest();
        } else if (window.ActiveXObject) { // Older IE.
            ajax = new ActiveXObject('MSXML2.XMLHTTP.3.0');
        }
        return ajax;
    };
    init = function(){
        utilite.doAjax({requestType: 'GET', resource: 'test.txt'});
    };
    utilite.addListener(window, 'load', init);
tiveXObject('MSXML2.XMLHTTP.3.0');
    }
    return ajax;
};

init = function(){
    utilite.doAjax({requestType: 'GET', resource: 'test.txt', target: 'testingAjax'});
};

utilite.addListener(window, 'load', init); 
```

任何和所有的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:07:08.210

我将创建两个额外的处理程序，例如`AjaxSuccess`和`AjaxError`. 然后，您可以`AjaxSuccess`从调用作为参数。在绑定处理程序时还要添加目标 DOM 元素作为参数。`ajaxReadyStateHandler``responseText`

为什么不查看[jQuery](http://jquery.com/)或[Zepto](http://zeptojs.com/)的源代码，看看它们是如何处理这些事情的呢？或者为什么不使用这些库，它们是经过验证的框架？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:29:15.947

****更新****

做这个：

把它放在你的ajax之外：

```
this.funcResp= function(resp){ console.log(resp) };
var thisObj=this; 
```

把它放在你的 ajax 函数中：

```
thisObj.funcResp(responseText); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:16:42.343

再次感谢您的回复。我现在已经设法使用范围解决了这个问题。就是这样：

1.  向名为 elementToUpdate 的命名空间对象添加了一个属性。
2.  让 doAjax() 函数更改 elementToUpdate 的值。
3.  从 ajaxReadyStateHandler() 引用 elementToUpdate。

这很好用，但在重复调用 doAjax() 时确实会出现一些问题。我怀疑这是因为 elementToUpdate 被反复引用/更新。下次我会解决这个问题。

再次感谢。代码如下所示。G

```
// Init-time branching is used to detect objects and set functions accordingly.

    var utilite = { 
    addListener: null,
    removeListener: null,
    createAjaxObject: null,
    elementToUpdate: null,
    ajaxReadyStateHandler: function() {
          console.log('Ready state is: ' + this.readyState);
          if (this.readyState === 4) {
              // Check the status code:
              if ( (this.status >= 200 && this.status < 300) || (this.status === 304) ) {
                console.log('Status OK');
                if(this.status === 304){
                    console.log('Using cached version');
                }
                // Note: elementToUpdate is accessible here because of the way scope works
                utilite.setElementContent({id: elementToUpdate, content: this.responseText});
              } else { // Status error!
                console.log('Status error: ' + this.statusText);
              }
          } // End of readyState IF.
      },
    doAjax: function(passedObject) {
    elementToUpdate = passedObject.target;
    var ajax = utilite.createAjaxObject();
    ajax.onreadystatechange = utilite.ajaxReadyStateHandler;
    ajax.open(passedObject.requestType, passedObject.resource, true);
    ajax.send(null);
    },
    getElement: function (id) { // Retrieves element by passed id
        'use strict';
        if (typeof id == 'string') {
            return document.getElementById(id);
        }
    },
    setElementContent: function(passedObject){
        'use strict';
        var theElement = utilite.getElement(passedObject.id);
        if(typeof theElement.innerText !== 'undefined') { theElement.innerText = passedObject.content; }
        if(typeof theElement.textContent !== 'undefined') { theElement.textContent = passedObject.content; }
    }
}; // This is the end of utilite

// Event listener branches
if (typeof window.addEventListener === 'function') { // W3C and IE9
    utilite.addListener = function (obj, type, fn) {
        obj.addEventListener(type, fn, false);
    };
    utilite.removeListener = function (obj, type, fn) {
        obj.removeEventListener(type, fn, false);
    };
} else if (typeof document.attachEvent === 'function') { // IE
    utilite.addListener = function (obj, type, fn) {
        obj.attachEvent('on' + type, fn);
    };
    utilite.removeListener = function (obj, type, fn) {
        obj.detachEvent('on' + type, fn);
    };
} else { // DOM Level 0
    utilite.addListener = function (obj, type, fn) {
        obj['on' + type] = fn;
    };
    utilite.removeListener = function (obj, type, fn) {
        obj['on' + type] = null;
    };
}

// Ajax object creation branches
utilite.createAjaxObject = function() {
    var ajax = null;
    if(window.XMLHttpRequest){
        ajax = new XMLHttpRequest();
    } else if (window.ActiveXObject) { // Older IE.
        ajax = new ActiveXObject('MSXML2.XMLHTTP.3.0');
    }
    return ajax;
};

init = function(){
    utilite.doAjax({requestType: 'GET', resource: 'test.txt', target: 'funky'});
};

utilite.addListener(window, 'load', init); 
```

# objective-c - iOS6 xib 错误“加载了“ViewController”笔尖，但未设置视图出口。'”

> ID：13323514
> 
> 赞同：1
> 
> 时间：2012-11-10T15:54:15.580
> 
> 标签：objective-c, ios, interface-builder, ios6, xib

我已经阅读了关于 SO 的其他几篇关于此的帖子，所有人都说我的视图没有设置在文件所有者上存在问题。这是有道理的，但是我的视图以及我在 XIB 中的所有其他连接都已设置，并且我不断收到此错误。

我尝试使用 loadView 方法而不是 viewDidLoad 方法，它加载得很好，但是它是一个“小部件密集型”应用程序，所以如果可能的话，我更喜欢使用 xib。

它早些时候工作，但后来我做了一些巨大的改变。然而，由于它只是一个简单的娱乐应用程序，我并没有为源代码管理而烦恼，所以我现在不能回去了。

知道如何调试此类问题或从哪里开始寻找吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:02:45.390

您有一个非常具体的错误消息，因此调试起来应该不会太难。

确保您正在查看正确的 XIB -> 尝试删除 XIB 并查看它是否抱怨文件不存在。

检查文件所有者的类类型。它必须与您要启动的 ViewController 匹配。如果没有，请正确设置。

检查视图出口旁边没有黄色警告。如果是这样，请删除插座并重新制作。

检查您用于初始化视图控制器的代码行。检查它的类和笔尖名称是否正确。

检查 XIB 是否包含在目标中。

# xml - 如何忽略响应中的一些标签（B、I、STRONG）？

> ID：13323516
> 
> 赞同：1
> 
> 时间：2012-11-10T15:54:27.890
> 
> 标签：xml, json, xpath, yql

我尝试使用 YQL 抓取一些网站（对于 Appcelerator Titanium 移动应用程序）。

我需要的数据在 A 标签内，但它的格式是：

```
<a href="...">
     <strong>Drugs</strong> and Culture</font>
</a> 
```

所以，当我运行查询时：

```
select * from html where  url='...'  and xpath="//table[2]/tr/td[2]//a" 
```

我得到：

```
 {"strong": "Drugs", "content": "\n and Culture"} 
```

我需要 YQL 忽略那些“强”标签并以文本值响应：

```
{content: "Drugs and Culture"} 
```

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:02:01.810

**我不知道 YQL，但产生所需结果的纯 XPath 表达式是：**

```
normalize-space(//table[2]/tr/td[2]//a) 
```

# asp.net - 如何在浏览器地址栏中隐藏完整的 URL

> ID：13323517
> 
> 赞同：-2
> 
> 时间：2012-11-10T15:54:29.367
> 
> 标签：asp.net

我想从我的 asp.net 网站 URL 中隐藏子目录和页面信息。例如，我不想显示[http://msdn.microsoft.com/en-us/library/aa479015.aspx](http://msdn.microsoft.com/en-us/library/aa479015.aspx) ，而是希望始终在用户的浏览器地址栏中显示类似[http://msdn.microsoft.com/的内容。](http://msdn.microsoft.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:59:44.477

这需要支持 History API 的现代浏览器

```
 history.pushState({}, false, "/"); 
```

如果你在文件加载时调用它，你应该达到预期的效果

更多信息：

[操纵浏览器历史 | MDN](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:08:13.363

一种方法是将您当前的处理程序信息保存在 cookie 中，然后保存在全局 asax BeginRequest 中，并使用`HttpContext.Current.RemapHandler`基于该 cookie 将它们的请求重新映射到不同的处理程序。另一种方法是在您的页面上使用 iframe，这将是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T16:10:19.173

虽然我认为这不是很好的样式，但您可以将页面插入框架（或 iframe）：

您的域的起始页，fe [http://msdn.microsoft.com/](http://msdn.microsoft.com/)：

```
<frameset rows="100%">
    <frame src="/realstartpage.htm">
</frameset> 
```

现在当用户导航到另一个页面时，地址栏不会改变，因为只是更新了框架的内容。请注意，指向您网站外部页面的链接应针对最外层框架：

```
<a href="http://stackoverflow.com" target="_top">Stackoverflow</a> 
```

但是，当用户通过指向 [http://msdn.microsoft.com/en-us/library/aa479015.aspx](http://msdn.microsoft.com/en-us/library/aa479015.aspx)的直接链接进入时，您将需要通过 a转发到[http://msdn.microsoft.com/](http://msdn.microsoft.com/)脚本并通过处理服务器上的 URL 参数来创建框架集（或 iframe）fe。

# java - 带有 URLConnection 的 Java 扫描器

> ID：13323521
> 
> 赞同：1
> 
> 时间：2012-11-10T15:54:42.220
> 
> 标签：java, web

我在阅读与 URL 连接的 InputStream 文本表单时遇到问题。我正在使用扫描仪阅读文本，但看起来没有文本格式。

这是代码

 `````
 connection = new URL(finalURL).openConnection();
 connection.connect();
 inStream =  connection.getInputStream();
 in = new Scanner(inStream);
 while(in.hasNextLine()){
   line = in.nextLine();
   System.out.println(line);
} 
````  `我省略了 try catch 子句。输出如下：
µtÂ÷BPv§2d
ŐüUŘ}ĎÓăR

虽然它应该是这样的：
06MAGNA,20121109,0.26,0.27,0.25,0.27,37820
08OCTAVA,20121109,0.73,0.75,0.73,0.73,12244

当我将它作为 txt 文件保存在磁盘上然后使用 Scanner 时，它工作正常，但通过 URL 却不行。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:12:37.237

我认为它的发生是因为输入流中的字符集和扫描仪的默认字符集不同。尝试`Charset`在`Scanner`构造函数中传递。

```
 in = new Scanner(inStream, "UTF-8");//set the appropriate charset 
```

**编辑：**您可以使用`connection.getContentEncoding()`.

将您的扫描仪实例更新为：

```
 in = new Scanner(inStream, connection.getContentEncoding()); 
```

**EDIT1：**要处理`gzip`输入流，请使用`GZIPInputStream`如下：

```
 inputStream = new GZIPInputStream(connection.getInputStream()); 
`````

# facebook-graph-api - Facebook 应用程序停止在墙上发布更新

> ID：13323523
> 
> 赞同：3
> 
> 时间：2012-11-10T15:54:50.583
> 
> 标签：facebook-graph-api, facebook-wall

自周四以来，我们的 Facebook 应用程序已停止向我们的页面发布更新，而我们方面没有任何更改。我们得到的错误是

> “OAuthException：（＃200）用户没有足够的管理权限来执行此页面上的此操作”

但是权限都设置正确（用户=经理，应用程序可以访问墙等）并且我们的服务器获得了具有发布权限的令牌。

最近有没有人遇到过这个问题，是否有任何解决方案或建议来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:26:37.070

我不确定这是否会对您有所帮助，但为我解决了。使用我在 APP_TOKEN 中找到的图形资源管理器它不起作用，但是将其更改为 USER_TOKEN 效果很好。

# svg - 如何在 d3 中为圆环图中的特定弧线添加自定义颜色？

> ID：13323526
> 
> 赞同：0
> 
> 时间：2012-11-10T15:55:02.970
> 
> 标签：svg, d3.js, crossfilter

我正在尝试构建一个甜甜圈图。如何添加特定于弧的不同颜色。例如，我想要状态“一”的红色，状态“二”的蓝色，状态“三”的绿色等等......

我尝试了以下，

```
var color = d3.scale.ordinal()
 .domain(["one","two","three","four","five"])
 .range(["#013ADF", "#ACFA58", "#DF3A01", "#6b486b", "#a05d56"]);

paths.enter().append("svg:path")
        .attr("stroke", "white")
        .attr("stroke-width", 0.5)
        .attr("fill", function(d, i) {console.log(color(d.name)); return color(d.name); }) 
```

我最初能够得到颜色。但是当任何状态计数减少到 0 时，颜色就会被打乱。当我再次增加状态计数时，我无法恢复特定的颜色......

请帮忙提些建议....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-27T03:36:01.873

您最好每次都更新颜色，而不仅仅是在 enter() 中。

```
paths.enter().append("svg:path")
    .attr("stroke", "white")
    .attr("stroke-width", 0.5)

path.attr("fill", function(d, i) {console.log(color(d.name)); return color(d.name); }) 
```

# persistence.xml - EJB JAR META-INF 中的 tomee persistence.xml 使我的应用程序部署崩溃

> ID：13323527
> 
> 赞同：0
> 
> 时间：2012-11-10T15:55:23.810
> 
> 标签：persistence.xml, apache-tomee

我正在使用 TomEE 部署一个 EAR 文件，其中包含一个 EJB JAR 和一个 WAR。

我想使用默认提供程序添加实体。我在 tomee.xml 中创建了一个资源来使用 MySQL DB。然后我想使用实体管理器，所以我尝试在 EJB JAR META-INF 目录中创建以下 persistence.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">

        <persistence-unit name="MyProjectDataBase" transaction-type="JTA">
                <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
                <jta-data-source>MyProjectDS</jta-data-source>
                <non-jta-data-source>MyProjectDSUnmanaged</non-jta-data-source>
                <properties>
                        <property name="openjpa.jdbc.DBDictionary" value="mysql" />
                        <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema" />
                </properties>
        </persistence-unit>

</persistence> 
```

MyProject & MyProjectUnmanaged 是我在 tomee.xml 中创建的资源 Id。

添加此 persistence.xml 后，我在 catalina.out 中收到以下异常，并且未部署我的应用程序：

```
SEVERE: Application could not be deployed:  /Users/avitale/Development/apache-tomee-jaxrs-1.5.0/apps/projecteam-ear
org.apache.openejb.OpenEJBException: Creating application failed: /Users/avitale/Development/apache-tomee-jaxrs-1.5.0/apps/projecteam-ear: loader (instance of  org/apache/catalina/loader/StandardClassLoader): attempted  duplicate class definition for name: "org/apache/openejb/cdi/CdiPlugin"
        at org.apache.openejb.assembler.classic.Assembler.createApplication(Assembler.java:940)
        at org.apache.openejb.assembler.classic.Assembler.createApplication(Assembler.java:532)
        at org.apache.openejb.assembler.classic.Assembler.buildContainerSystem(Assembler.java:433)
        at org.apache.openejb.assembler.classic.Assembler.build(Assembler.java:341)
        at org.apache.openejb.OpenEJB$Instance.<init>(OpenEJB.java:144)
        at org.apache.openejb.OpenEJB.init(OpenEJB.java:290)
        at org.apache.tomee.catalina.TomcatLoader.initialize(TomcatLoader.java:231)
        at org.apache.tomee.catalina.TomcatLoader.init(TomcatLoader.java:131)
        at org.apache.tomee.catalina.ServerListener.lifecycleEvent(ServerListener.java:113)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:110)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:633)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:658)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: java.lang.LinkageError: loader (instance of  org/apache/catalina/loader/StandardClassLoader): attempted  duplicate class definition for name: "org/apache/openejb/cdi/CdiPlugin"
        at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:295)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at org.apache.openejb.cdi.OptimizedLoaderService.loadWebBeansPlugins(OptimizedLoaderService.java:70)
        at org.apache.openejb.cdi.OptimizedLoaderService.load(OptimizedLoaderService.java:53)
        at org.apache.openejb.cdi.OptimizedLoaderService.load(OptimizedLoaderService.java:47)
        at org.apache.webbeans.plugins.PluginLoader.startUp(PluginLoader.java:75)
        at org.apache.openejb.cdi.OpenEJBLifecycle.startApplication(OpenEJBLifecycle.java:159)
        at org.apache.openejb.cdi.ThreadSingletonServiceImpl.initialize(ThreadSingletonServiceImpl.java:150)
        at org.apache.openejb.cdi.CdiBuilder.build(CdiBuilder.java:44)
        at org.apache.openejb.assembler.classic.Assembler.createApplication(Assembler.java:794)
        ... 20 more 
```

一旦我删除了 persistence.xml，那么应用程序就成功部署了。请帮助我，因为我不明白如何进行:(

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:47:38.360

如果您可以指定您实际使用的版本，将会很有帮助。

此外，您是否检查过您不会在您的 EAR 文件（我的意思是 lib/ 或 WEB-INF/lib）中提供 TomEE 或任何相关的依赖项？

供您参考，TomEE 1.5.1 将很快发布，其中包含一些围绕 EAR 部署的修复。

# ios - 故事板列表数据演示，如何检查条件返回列表序列

> ID：13323541
> 
> 赞同：3
> 
> 时间：2012-11-10T15:57:12.840
> 
> 标签：ios, storyboard

我是新ios，我使用storyboard实现列表数据功能demo，包括添加数据。在我的 AddWrokLogViewController 中，我有一个方法 (IBAction)done:(id)sender 绑定 + 按钮。如下，在我的 do 函数中，我想检查用户输入并通过 http post 保存用户输入数据。当远程保存成功发布数据时，我想返回列表视图。

和之前我搜索苹果文章介绍故事板一样，但在这个演示中，当用户点击添加按钮时，直接转移到列表页面视图：http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/简介/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1

如果我使用 AFHTTPClient 在远程服务器成功保存数据，则返回列表页面视图，或仍在添加页面视图并显示错误消息。

谁能给我一些建议，谢谢！

```
NSString *url = [NSString stringWithFormat:@"%@",api_createworklog];
NSDictionary *params=[NSDictionary dictionaryWithObjectsAndKeys:uname,@"loginname",token,@"token",beginTime
                      ,@"beginTime",content,@"content",address,@"address",projectNameTemp,@"projectName"
                      ,workType,@"workType",workDate,@"workDate",validDate,@"validDate", nil];
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:BASE_URL]];
[client postPath:url parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *responseString = [operation responseString];
    NSDictionary *data = [responseString objectFromJSONStringWithParseOptions:JKParseOptionLooseUnicode];
    NSString *sysCode = [data objectForKey:@"syscode"];
    NSString *businessCode = [data objectForKey:@"businesscode"];
    if(sysCode != nil && ![sysCode isEqualToString:@""] && businessCode != nil && ![businessCode isEqualToString:@""]){
        if([sysCode isEqualToString:ws_access_success] && [businessCode isEqualToString:ws_access_success]){
            //[self.navigationController popViewControllerAnimated:YES];
            addSuccess = true;
        } else{
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"添加失败"                                                            message:responseString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alertView show];
        }
    }
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSString *responseString = operation.responseString;
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"访问服务器异常，添加失败！"                                                            message:responseString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alertView show];
}]; 
```

# regex - 通配符子域重定向

> ID：13323543
> 
> 赞同：-1
> 
> 时间：2012-11-10T15:57:25.740
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-rewriting

我在我的一台服务器上托管了一个通配符域，我期待做的是添加以下 .htaccess 规则：

```
http://www.domain.com/ -> index.php
http://domain.com/ -> index.php
http://*.domain.com/ -> category.php?id=[What ever subdomain is visited]
http://*.domain.com/Some_underscored_Link-123123 -> prodcutdetails.php?id=[What ever subdomain is visited]&id=123213 
```

此外，当重定向发生时，浏览器上的 URL 不应更改。

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:03:42.223

只需使用几个`RewriteCond`'s：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} ^(.*)\.example\.com 
```

然后，您的子域的名称可以在`RewriteRule`'s as`%1`

# css - 如何以开始或值开始有序列表（IE8）？

> ID：13323551
> 
> 赞同：0
> 
> 时间：2012-11-10T15:58:07.257
> 
> 标签：css, internet-explorer, list, html-lists, border

我有一个网站，其中列出了从 1 到 50 的帖子列表。它适用于 Chrome、Firefox 和 IE 10，但不适用于 IE 8 或更低版本....

我有这个：`<ol id="post-list" class="lol" start="1">`

CSS：

```
#entry-list > li:before {
    border-bottom: 1px solid #D9D9D9;
    color: gray;
    content: attr(value);
    width: 100%;
}

#entry-list {
    list-style: none outside none;
    margin-top: 0;
    word-wrap: break-word;
}

    #entry-list .content{margin-bottom:10px}
#entry-list>li{position:relative}
#entry-list>li:not(:last-child){margin-bottom:30px} 
```

问题：IE 8（或更低版本）中没有边框底部，也没有以 1 开头的属性/值/列表。我怎样才能让它工作？为什么我的**IE 特定样式表**没有响应`#entry-list > li:before`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:05:57.227

看看这个答案是否有帮助，对于 :before 问题：[如何让 IE8 接受 CSS :before 标记？](https://stackoverflow.com/questions/2546251/how-can-i-get-ie8-to-accept-a-css-before-tag)

至于“开始”……它应该可以工作。执行此操作时是否使用任何 css 规范化？但是，我们需要查看更多代码来看看。但是，您确实意识到，您发布的 CSS 将针对 id 为 entry-list 而不是 post-list 的对象，对吗？

# java - 修改 step-filter 以仅显示项目类

> ID：13323561
> 
> 赞同：0
> 
> 时间：2012-11-10T15:59:12.153
> 
> 标签：java, android, eclipse, debugging

我正在尝试调试正在运行的 android 应用程序，以查看代码中的问题所在。我现在要做的就是进入我编写的一个方法来检查数据库是否存在，但调试器只是继续处理来自 JAR 的代码，并且只有我不关心的代码。现在，当我尝试进入该方法时，调试器会打开一个名为 DexPathList.findClass(String) 的页面。这是我第一次尝试并进入我的方法时的屏幕截图：

![在此处输入图像描述](../Images/e841056946d60fe4ec70216d2791b099.png)

以及在我点击 Step Into for DexPathList.findClass(String) 后弹出的屏幕： ![在此处输入图像描述](../Images/38deeaf64419f8ba649870dec37f0b75.png)

我怎样才能跳过所有这些多余的信息，只看我自己的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:31:37.973

最简单的方法：使用`Ctrl``Alt``Left mouse`并单击要停止的方法名称。这就是所谓的[超链接调试](http://blog.deepakazad.com/2012/07/eclipse-tip-stepping-into-selection-and.html)。

长期的解决方案是添加从调试器中排除那些不需要的类的[步骤过滤器。](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/debug/ref-usestepfilters.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T13:32:46.067

如果您只想调试您的 Android 项目，请使用步骤过滤器（Windows -> 首选项 -> java -> 调试 -> 步骤过滤器）。这是您必须过滤的软件包列表：

![如何为 Android 设置步骤过滤器](../Images/bfe8cccddba3947f83636e7a8f9f0fbe.png)

现在你可以毫无畏惧地走进去=）

# asp.net-mvc-3 - 想要在布局中显示来自子操作的消息？

> ID：13323562
> 
> 赞同：0
> 
> 时间：2012-11-10T15:59:42.090
> 
> 标签：asp.net-mvc-3, child-actions

我想在布局中显示来自子操作的消息？我怎样才能做到这一点 ？就像在我的布局中一样，我有一个登录表单（呈现为子操作）.. 所以当登录失败时，我想在特定 DIV 的布局中显示一条消息。问题是布局可能在子视图之前呈现。还有另一个问题，布局是由任何控制器呈现的。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:13:01.750

您可以在布局中的某处放置验证摘要。（剃刀语法）：

`<div>@Html.ValidationSummary(false)</div>`

然后只需使用 [Required] 属性装饰正在传递给您的登录的视图模型。

```
public class LoginViewModel
{
    [Required(ErrorMessage="Please enter a your user name.")]
    public string UserName { get; set; }

    [Required(ErrorMessage = "Please your password.")]
    public string Password{ get; set; }
} 
```

或者，如果您想提供更一般的错误消息，只需使用 [Required] 属性装饰您的视图模型属性，然后在您的登录控制器中，在 POST 方法中执行以下操作：

```
[HttpPost]
public ActionResult Login(LoginViewModel viewModel)
{
    if (!ModelState.IsValid)
    {
        ModelState.AddModelError("Error", "Sorry, your login failed, please try again.");
    }
} 
```

然后该错误将显示在验证摘要中。

# html - 使用 Lex 标签解析器代码进行 Google Prettify

> ID：13323565
> 
> 赞同：1
> 
> 时间：2012-11-10T15:59:59.360
> 
> 标签：html, prettify, google-code-prettify

看来 Google Prettify 不喜欢 lex 解析器标签。我已将以下内容添加到使用 prettify 格式化代码的博客文章中：

```
<!-- Content -->
<div id="content" class="grid_8 suffix_1">
    {{ widgets:area slug="above-body" }}
    {{ template:body }}
</div> 
```

两行 lex 代码（在 {{ }} 之间）在帖子中消失了。如果我将它们更改为单括号，它们看起来还可以。我假设 prettify 使用了类似的标记语法，这可以解释这一点。有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:01:43.360

您没有链接到您的博客文章，并且在此页面上看起来很好，所以我无法真正诊断问题，但如果您想在[http://code.google 上用您的 HTML 提交错误。 com/p/google-code-prettify/issues/list](http://code.google.com/p/google-code-prettify/issues/list)我来看看。

# objective-c - 顺序方法执行 obj-c

> ID：13323570
> 
> 赞同：0
> 
> 时间：2012-11-10T16:00:24.023
> 
> 标签：objective-c, ios, xcode, methods

非常初学者的 obj-c 问题。

我的任务是在视图加载时执行简单的序列：

*   暂停 2 秒
*   方法1执行
*   暂停 2 秒
*   方法2执行
*   暂停 2 秒
*   方法3执行

我为 iOS5+ 编写此代码，因此可以使用块或其他功能。我试过

```
[NSThread sleepForTimeInterval:x]; 
```

在方法执行之间进行暂停，但是三个暂停加到一个，我有一个很大的暂停，所以这是错误的部分。如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:06:30.670

休眠 NSThread 绝不是处理定时方法执行的正确方法。您想要[NSTimer](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)，您可以将其设置为在两秒后触发相同的方法（然后让该方法确定接下来要执行哪个选择器），或者将三个计时器设置为在彼此之后触发两秒，每个计时器调用不同的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T16:17:17.963

你可以使用 performSelector:withObject:afterDelay:，或者像 CodaFi 所说的，一个 NSTimer。任何一种方法都允许将对象传递给方法，如果您需要传递多个参数，该对象可以是数组或字典。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T20:15:55.327

我会链接这些方法：

*   调用 1\. 方法并使其调用 2。
*   1.  方法应该调用 3。
*   1.  应该继续 4\. ...

# android - 为listview加载图像时出现Android错误

> ID：13323574
> 
> 赞同：-1
> 
> 时间：2012-11-10T16:01:15.080
> 
> 标签：android, android-listview, android-imageview, android-adapter

我有从服务器加载图像的列表适配器作为图标列表。我想我的适配器没有严重问题，但即使我已经编辑了我的代码，我仍然遇到错误。我使用 asynctask 类从服务器加载数据。这是我的适配器代码：

```
 public class ListAdapterImage extends BaseAdapter{

    private Activity activity;
    private Runnable runnable;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader;

    public ListAdapterImage (Activity a, ArrayList<HashMap<String, String>> data) {
        activity = a;
        this.data=data;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return data.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View v, ViewGroup parent) {

         View vi=v;
            if(v==null)
                vi = inflater.inflate(R.layout.list_row, null);

            TextView Pk_Merchant_ID = (TextView) vi.findViewById(R.id.tv_id);
            TextView Descriptions = (TextView) vi.findViewById(R.id.tv_groupname);
            TextView Address = (TextView) vi.findViewById(R.id.tv_merchantname);
            ImageView imgythumb = (ImageView) vi.findViewById(R.id.list_images);

            HashMap<String, String> datas = new HashMap<String, String>();
                datas = data.get(position);

            Pk_Merchant_ID.setText(datas.get("Pk_Merchant_ID"));
            Descriptions.setText(datas.get("Descriptions"));
            Address.setText(datas.get("Address"));
            imageLoader.DisplayImage(datas.get("Path_PhotoProfile"), imgythumb);
        return vi;
    }

} 
```

在我的 logcat 中出现一些这样的错误：

```
11-10 22:52:02.732: E/AndroidRuntime(26274): FATAL EXCEPTION: main
11-10 22:52:02.732: E/AndroidRuntime(26274): java.lang.NullPointerException
11-10 22:52:02.732: E/AndroidRuntime(26274):    at com.example.adapter.ListAdapterImage.<init>(ListAdapterImage.java:30)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at com.example.main.ResultRestoActivity$LoadData$1.run(ResultRestoActivity.java:271)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at android.app.Activity.runOnUiThread(Activity.java:3743)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at com.example.main.ResultRestoActivity$LoadData.onPostExecute(ResultRestoActivity.java:258)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at com.example.main.ResultRestoActivity$LoadData.onPostExecute(ResultRestoActivity.java:1)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at android.os.AsyncTask.finish(AsyncTask.java:417)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at android.os.Looper.loop(Looper.java:130)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at android.app.ActivityThread.main(ActivityThread.java:3691)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at java.lang.reflect.Method.invokeNative(Native Method)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at java.lang.reflect.Method.invoke(Method.java:507)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-10 22:52:02.732: E/AndroidRuntime(26274):    at dalvik.system.NativeStart.main(Native Method) 
```

在我的活动中，我将适配器设置为`onPostExecute`：

```
 @Override
    protected void onPostExecute(String s) {
        pDialog.dismiss();
        runOnUiThread(new Runnable() {
            @Override
            public void run() {  
                adapter = new ListAdapterImage(null, listData);
                lv.setAdapter(adapter);
            }
        });
    } 
```

立即需要您的所有帮助和评论。感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:25:10.170

你在这里传递 null ..

```
adapter = new ListAdapterImage(null, listData); 
```

然后在这段代码中

```
public ListAdapterImage (Activity a, ArrayList<HashMap<String, String>> data) {
    activity = a;
    this.data=data;
    //Problem
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
} 
```

经过`adapter = new ListAdapterImage(yourActivityName.this, listData);`

# c++ - 我的 operator= 和复制构造函数在我的类中无法正常工作

> ID：13323575
> 
> 赞同：3
> 
> 时间：2012-11-10T16:01:17.423
> 
> 标签：c++, variable-assignment, copy-constructor

主要的：

```
#include <iostream>
#include <cstdlib>
#include "avl_tree.h"

using namespace std;

int main()
{
  AVLTree<int> av1;
  int testarray [10] = { 16, 2, 77, 40, 54 , 1 , 100, 39, 73, 35 };
  AVLTree<int> av3;

  for( unsigned int i = 0; i < 10; i++ )
  {
    av1.insert( testarray[i] );
  }

  AVLTree<int> av2 = av1; //test copy constructor
  av3 = av1;  //test operator=
  av2.printTree();
  av1.printTree();
  av3.printTree();

  exit( 0 );
} 
```

标题：

```
#ifndef AVL
#define AVL

#include <iostream>
using namespace std;
/**
 * An AVL tree class adapted from Weiss.
 * Does NOT allow duplicate elements.
 */
template <typename Comparable>
class AVLTree
{
 public:
  AVLTree( ) : root ( )
  {
  //nothing goes in the main constructor
  }

  AVLTree( const AVLTree & rhs ) : root ()
  {
      copyNodes( rhs.root , root );
  }

  ~AVLTree( )
  {
      makeEmpty( root );
      delete root;
  }

  const AVLTree & operator=( const AVLTree & rhs )
  {

      makeEmpty( root );
      copyNodes( rhs.root , root );
  }

  void printTree( ) const
  {
    printTree( root, 0 );
  }

  void makeEmpty( )
  {
      makeEmpty( root );
  }

  void insert( const Comparable & x )
  {
      insert( x , root );
  }
  // void remove( const Comparable & x );

 private:

  struct AVLNode
  {
    Comparable element;
    AVLNode   *left;
    AVLNode   *right;
    int       height;

  AVLNode( const Comparable & element,
       AVLNode *left,
       AVLNode *right,
       int height = 0 )
  : element( element ), left( left ), right( right ), height( height ) { }
  }; // end of AVLNode

  AVLNode * root;

  void insert( const Comparable & x, AVLNode * & t )
  {

    if( t == NULL )
    {
      //cout << "tnull" <<endl;
      t = new AVLNode( x, NULL, NULL );
    }
    else if( x < t->element )
    {
    //cout << "c1" <<endl;
      insert( x, t->left );
      if( height( t->left ) - height( t->right ) == 2 )
        if( x < t->left->element )
          rotateWithLeftChild( t );
        else
          doubleWithLeftChild( t );
    }
    else if( t->element < x )
    {
     // cout << "c2 " << t->element << " " << x <<endl;
      insert( x, t->right );
      if( height( t->right ) - height( t->left ) == 2 )
        if( t->right->element < x )
          rotateWithRightChild( t );
        else
          doubleWithRightChild( t );
    }
    //cout << "end" << endl;
    // else duplicate; do nothing
    t->height = max( height( t->left ), height( t->right ) ) + 1;
  }

  void makeEmpty( AVLNode * & t )
  {
    if ( t != NULL )
    {
        makeEmpty ( t -> left ) ;
        makeEmpty ( t -> right ) ;
    }
    delete t;
    t = NULL;
  }

  void copyNodes( AVLNode * t , AVLNode * r )
  {
      if ( t != NULL )
      {
          copyNodes( t->left , r );
          copyNodes( t->right, r );
          insert(t->element, r );
          cout << t->element << r->element << endl; //these always print as the same 
      }
  }
#endif 
```

恐怕我的复制构造函数和 operator= 无法正常工作，因为它们不会导致 av2 或 av3 成为 av1 的副本。我知道 copyNodes() 工作正常，因为第 122 行的 cout 反映 t->element 和 r->element 是相同的。为什么测试程序的第 22 行和第 24 行没有输出？

对此的任何帮助将不胜感激。

注意： printTree() 被省略，因为我确定这不是问题，它是一个大函数。

其他注意事项：我一步一步地浏览了代码，并检查了其他类的其他几个复制构造函数/operator= 函数。当我逐步跟踪时，我导致它工作，但是当我实际编译它时它并没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:35:26.387

您可以通过将第二个参数`copy_nodes`作为引用来修复您的代码。在您的代码中，当您`insert`从内部调用时，`copy_nodes`您不会传递对树根节点的引用，而是传递`r`对`copy_node`.

但我认为有一种更简单（更有效，不需要重新平衡）的方法来做到这一点。重写`copy_nodes`为返回复制节点的静态方法。

```
static AVLNode * copyNodes( AVLNode * t)
{
    if ( t != NULL )
    {
        AVLNode* left = copyNodes( t->left );
        AVLNode* right = copyNodes( t->right );
        return new AVLNode(t->element, left, right, t->height);
    }
    else
    {
        return NULL;
    }
} 
```

然后，您可以像这样在复制构造函数中使用此方法

```
AVLTree( const AVLTree & rhs )
{
    root = copyNodes( rhs.root );
} 
```

赋值运算符也是如此。

# c# - DragDropTarget 中的 ItemDroppedOnTarget 应该有目标元素

> ID：13323576
> 
> 赞同：1
> 
> 时间：2012-11-10T16:01:30.230
> 
> 标签：c#, silverlight, drag-and-drop, silverlight-5.0, silverlight-toolkit

我正在使用`DragDropListBoxTarget`control from`Silverlight Toolkit`来支持拖放行为。但我面临着这个控制的问题。

很难抓住项目被丢弃的目标元素。在 ItemDroppedOnTarget 事件参数中必须有东西。

当我拖动一个项目时，我需要当用户放下它时，一个中间事件应该修改目标项目。但我找不到实现它的方法。

我是否使用了正确的控件，或者我还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:59:09.597

我有同样的问题。我最终使用了[这个拖放工具](http://code.google.com/p/silverlightdragdrop/)。我重新编译了 Silverlight 5 的源代码。它让我知道目标。我也很懒惰，仍然想要使用工具包 DragDropTarget 控件时拖动的任何东西的幽灵拖动图片，所以我将源代码保存在其中，并且还包含在新的拖放工具中。

我定义拖动的方式：

```
<toolkit:ListBoxDragDropTarget AllowedSourceEffects="Copy">
    <ListBox ItemsSource="{Binding Path=UnitOfWork.Templates}" Width="130" Height="360" BorderThickness="0">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <dd:DragSource>
                        <TextBlock Text="{Binding Path=Name}" Width="120"/>
                    </dd:DragSource>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</toolkit:ListBoxDragDropTarget>

<dd:DropTarget Grid.Row="2" AllowDrop="True" OnDropped="Target_OnDropped">
    <Border BorderBrush="Black" BorderThickness="1" Width="98" Height="30">                
        <TextBlock Text="Drop Here" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Border>
</dd:DropTarget> 
```

这种方式保留了**ListBoxDragDropTarget**创建的拖动幽灵，同时允许我使用**dd:DragSource**和**dd:DropTarget**控件来允许更细粒度的拖放。

# c# - 为什么按一次键就像重复按一次一样？

> ID：13323581
> 
> 赞同：0
> 
> 时间：2012-11-10T16:02:45.413
> 
> 标签：c#, winforms, input

我正在使用 Winform 在 DirectX 游戏中提供按钮。因此我正在使用这个类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace DirectInput
{
    public class cDirectInput
    {
        [DllImport("user32.dll")]
        static extern UInt32 SendInput(UInt32 nInputs, [MarshalAs(UnmanagedType.LPArray, SizeConst = 1)] INPUT[] pInputs, Int32 cbSize);

        [StructLayout(LayoutKind.Sequential)]
        struct MOUSEINPUT
        {
            public int dx;
            public int dy;
            public int mouseData;
            public int dwFlags;
            public int time;
            public IntPtr dwExtraInfo;
        }

        [StructLayout(LayoutKind.Sequential)]
        struct KEYBDINPUT
        {
            public short wVk;
            public short wScan;
            public int dwFlags;
            public int time;
            public IntPtr dwExtraInfo;
        }

        [StructLayout(LayoutKind.Sequential)]
        struct HARDWAREINPUT
        {
            public int uMsg;
            public short wParamL;
            public short wParamH;
        }

        [StructLayout(LayoutKind.Explicit)]
        struct INPUT
        {
            [FieldOffset(0)]
            public int type;
            [FieldOffset(4)]
            public MOUSEINPUT mi;
            [FieldOffset(4)]
            public KEYBDINPUT ki;
            [FieldOffset(4)]
            public HARDWAREINPUT hi;
        }

        const int KEYEVENTF_EXTENDEDKEY = 0x0001;
        const int KEYEVENTF_KEYUP = 0x0002;
        const int KEYEVENTF_UNICODE = 0x0004;
        const int KEYEVENTF_SCANCODE = 0x0008;

        public void Send_Key(short Keycode, int KeyUporDown)
        {
            INPUT[] InputData = new INPUT[1];

            InputData[0].type = 1;
            InputData[0].ki.wScan = Keycode;
            InputData[0].ki.dwFlags = KeyUporDown;
            InputData[0].ki.time = 0;
            InputData[0].ki.dwExtraInfo = IntPtr.Zero;

            SendInput(1, InputData, Marshal.SizeOf(typeof(INPUT)));
        }

    }
} 
```

然后我用这个发送按钮：

```
DirectInput.cDirectInput d = new DirectInput.cDirectInput();
d.Send_Key(0x11, 0x0008); 
```

但是当我发送它时，它是永久的。当我发送 w 时，玩家将永远向前。我可以通过按键盘上的 w 来停止它。为什么停不下来？当我将它发送给编辑器时，它会在我停止发送时停止，在游戏中它不会停止。问题是什么？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:19:40.193

您正在发送一个按键消息，但没有在它之后发送按键消息。从文档中：

> KEYBDINPUT.dwFlags：
> 
> *   KEYEVENTF_KEYUP (0x0002)
>     如果指定，则正在释放密钥。如果未指定，则正在按下该键。

要前进 1 秒，请尝试：

```
d.Send_Key(0x11, 0x0008);
Thread.Sleep(1000);
d.Send_Key(0x11, 0x000A); 
```

请注意，按下`w`修复问题的原因是它发送一个 keydown 事件（将被忽略），然后是一个 keyup 事件，最后释放该键。

# c# - 顶部的组合框选定项目背景不弹出

> ID：13323587
> 
> 赞同：1
> 
> 时间：2012-11-10T16:03:20.210
> 
> 标签：c#, wpf

我正在寻找一种在那里设置图像背景的方法..因为它是灰色背景上的白色..所选项目触发器不起作用，因为没有父 ComboboxItem..

![在此处输入图像描述](../Images/b2844bac57ccda51324359a185f894c0.png)

```
 <ComboBox.Resources>
                <DataTemplate x:Key="DataTemplate1">
                    <Border x:Name="border"  Padding="10">
                        <Image  Source="{Binding }" Stretch="None"/>
                    </Border>
                </DataTemplate>
                <ItemsPanelTemplate x:Key="ItemsPanelTemplate1">
                    <WrapPanel  Width="{Binding ActualWidth , RelativeSource={RelativeSource Mode=FindAncestor, 
                             AncestorType={x:Type ComboBox }}}"  Background="{StaticResource ListItemSelected}"  Orientation="Horizontal"   IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ComboBox.Resources> 
```

# c# - 获取歌曲标签并添加到 ID3 标签列表

> ID：13323589
> 
> 赞同：0
> 
> 时间：2012-11-10T16:03:57.967
> 
> 标签：c#, json, xml, id3, last.fm

我解决了我的问题^^

以下代码扫描文件夹及其子目录，并为每个 .mp3 和 .wav 使用其 ID3 标签从 last.fm 中查找所有标签。

我需要添加更多文本来解释我的代码：

您可以使用主要的 args 来添加额外的选项，例如自定义位置，不做子目录，...。

使用2个参考：

• lastfm-sharp.dll
• taglib-sharp.dll

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Lastfm.Services;

namespace AddTags {

    /// <summary>
    /// Class made for scanning a folder and giving all mp3s more tags
    /// </summary>
    internal class Program {

        public static void Main(string[] args) {
            Session session = new Session("<api>", "<secret>");

            // Authenticate it with a username and password to be able
            // to perform write operations and access this user's profile
            // private data.
            session.Authenticate("<username>", Lastfm.Utilities.md5("<password>"));

            DirectoryInfo dir = new DirectoryInfo("C:\\Users\\kiwi\\Dropbox\\music\\Mk3");
            Console.WriteLine("Setting genretags for directory: " + dir.FullName);
            foreach (FileInfo file in dir.GetFiles("*.*", SearchOption.AllDirectories).Where(file => file.Extension.Equals(".mp3") || file.Extension.Equals(".wav"))) {
                Console.WriteLine();
                Console.WriteLine(" --- " + file.Name + " ---");
                TagLib.File TagFile = TagLib.File.Create(file.FullName);

                // Create an Artist object.
                if (TagFile.Tag.Performers.Length > 0) {
                    Artist artist = new Artist(TagFile.Tag.Performers[0], session);

                    // Display your current tags for system of a down.
                    List<string> tags = new List<string>();
                    try {
                        foreach (TopTag tag in artist.GetTopTags(20))
                            tags.Add(tag.Item.Name.ToString());
                        if (tags.Count == 0)
                            Console.WriteLine("No tags found");
                    } catch (Exception e) {
                        Console.WriteLine("Artist not found");
                    }

                    TagFile.Tag.Genres = tags.ToArray();
                    TagFile.Save();

                    foreach (string tag in TagFile.Tag.Genres) {
                        Console.Write(" " + tag);
                    }
                } else {
                    Console.WriteLine("No artist found in tags");
                }
                Console.WriteLine();
            }

            Console.Write("press any key to exit");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:48:15.790

相同的东西见第一篇文章 xD

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Lastfm.Services;

namespace AddTags {

    /// <summary>
    /// Class made for scanning a folder and giving al mp3's moar tags
    /// </summary>
    internal class Program {

        public static void Main(string[] args) {
            Session session = new Session("94b659f1b129a3f110a0faa269b4be68", "649461398a675e38870c07b1614085e4");

            // Authenticate it with a username and password to be able
            // to perform write operations and access this user's profile
            // private data.
            session.Authenticate("cskiwi", Lastfm.Utilities.md5("Cskiwi147963"));

            DirectoryInfo dir = new DirectoryInfo("C:\\Users\\kiwi\\Dropbox\\music\\Mk3");
            Console.WriteLine("Setting genretags for directory: " + dir.FullName);
            foreach (FileInfo file in dir.GetFiles("*.*", SearchOption.AllDirectories).Where(file => file.Extension.Equals(".mp3") || file.Extension.Equals(".wav"))) {
                Console.WriteLine();
                Console.WriteLine(" --- " + file.Name + " ---");
                TagLib.File TagFile = TagLib.File.Create(file.FullName);

                // Create an Artist object.
                if (TagFile.Tag.Performers.Length > 0) {
                    Artist artist = new Artist(TagFile.Tag.Performers[0], session);

                    // Display your current tags for system of a down.
                    List<string> tags = new List<string>();
                    try {
                        foreach (TopTag tag in artist.GetTopTags(20))
                            tags.Add(tag.Item.Name.ToString());
                        if (tags.Count == 0)
                            Console.WriteLine("No tags found");
                    } catch (Exception e) {
                        Console.WriteLine("Artist not found");
                    }

                    TagFile.Tag.Genres = tags.ToArray();
                    TagFile.Save();

                    foreach (string tag in TagFile.Tag.Genres) {
                        Console.Write(" " + tag);
                    }
                } else {
                    Console.WriteLine("No artist found in tags");
                }
                Console.WriteLine();
            }

            Console.Write("press any key to exit");
            Console.ReadLine();
        }
    }
} 
```

# php - 如何从 PHP foreach 循环中排除隐藏字段

> ID：13323594
> 
> 赞同：1
> 
> 时间：2012-11-10T16:04:45.717
> 
> 标签：php

我有一个使用 foreach($_POST as $key=>$value) 将数据插入数据库的简单表单 我在表单上有一个隐藏字段

```
<input name="isset" type="hidden" value="true" /> 
```

我使用 if(isset($_POST['isset'])) {

我正在尝试解决如何从循环中排除隐藏字段...？

我看过这篇文章，但不明白我会在哪里使用 if (strpos($key, 'hdn_') == false) // 继续

[如何从 PHP 中的每个循环中排除 <input type="hidden">](https://stackoverflow.com/questions/9780079/how-to-exclude-input-type-hidden-from-a-for-each-loop-in-php)

任何指导将不胜感激....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:12:19.237

如果您知道要排除的键的确切名称，这[`array_diff_key`](http://php.net/manual/en/function.array-diff-key.php)是一个方便的选择：

```
$keysToRemove = array('isset'); // you can add as many as you want
$values = array_diff_key($_POST, array_flip($keysToRemove));

foreach ($values as $k => $v) { ... } 
```

但是，由于`$values`打算进入数据库，因此您应该使用允许密钥的*白名单*而不是黑名单。你可以这样做[`array_intersect_key`](http://www.php.net/manual/en/function.array-intersect-key.php)：

```
$keysToKeep = array('field1', 'field2', 'field3'); // as many as you want
$values = array_intersect_key($_POST, array_flip($keysToKeep));

foreach ($values as $k => $v) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:07:41.373

在 foreach 内部：

```
foreach ($_POST as $key => $value) {
    if ($key != 'isset') {
        //code here
    }
} 
```

（对于我从你的问题中得到的）

或者从您的数组中，您可以`unset()`使用“isset”数组键的元素。

# php - 我可以将数组存储在变量中吗？

> ID：13323597
> 
> 赞同：1
> 
> 时间：2012-11-10T16:05:08.240
> 
> 标签：php, arrays, variables

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

我可以将数组存储在变量中吗？

我有这个数组：

```
$_POST['product'] 
```

当我打印它时：

```
echo "<PRE>";
print_r($_POST['product']);
echo "</PRE>"; 
```

结果是：

```
<PRE>Array
(
    [0] => Array
        (
            [0] => 1
            [1] => cola
            [2] => wwww
            [3] => 1
            [4] => 2.00
            [5] => 0.00
            [6] => 2.00

        )

)
</PRE> 
```

如何将数组的值存储在变量中？例如，我需要插入`[1] => cola`到数据库中的表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:10:53.213

您必须使用 foreach 循环来“扫描”数组并将 INSERT 查询发送到您的数据库，如下所示：

```
<?php
$updateStmt = $pdo->prepare("INSERT INTO table (field) VALUES (:FIELD)");
foreach( $_POST['product'] as $key => $val ){
    $updateStmt->execute(array(
        ':FIELD' => $val
    ));
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:07:20.443

```
if(!empty($_POST['product'])) {
    $colaVar = $_POST['product'][0][1];
    echo $colaVar; // outputs'cola'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T16:13:20.373

您根本不需要它，只需执行以下操作：

```
$arr = $_POST['product']
echo $arr[0][1] 
```

这是访问数组值以执行您想要的任何操作的正常方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:44:06.320

您可以像访问数组一样`$_POST['product'][0][1]`获取可乐的值。

对于多次插入数据库，您应该使用 foreach 循环或 for 循环。

**更新**

好的，Foreach 循环

```
foreach($_POST['product'] as $product) {
   mysql_query("INSERT INTO YOURTABLENAME('FIELD1','FIELD2'....) VALUES('".$product[0]."','".$product[1]."'....)"); 

} 
```

我更喜欢使用 for 循环。

```
$count_array = count($_POST['product']);
for($i=0; $i>= $count_array; $i++){
   mysql_query("INSERT INTO YOURTABLENAME('FIELD1','FIELD2'....) VALUES('".$_POST['product'][$i]."','".$_POST['product'][$i]."'....)"); 
} 
```

这也是一种通过避免在 for/foreach 循环中插入 sql 来插入数据库的优化方式。但现在这应该适合你.. :)

# php - 基于日期节点删除 XML 记录

> ID：13323599
> 
> 赞同：0
> 
> 时间：2012-11-10T16:05:41.067
> 
> 标签：php, xml, xpath

我有一个 XML 文件，其中包含大量我不需要的记录，XML 文件很少通过 XMLRPC 进入 WordPress。我需要做的是根据我不需要的日期删除所有记录，这样我就不会通过 PHP 获得数百个重复的帖子。我的 XML 文件格式如下：

```
<data>
 <in>
   <a>First Name</a>
   <b>Surname </b>
   <c>07:00:00 11/08/2012</c>
 </in>
 <in>
   <a>First Name</a>
   <b>Surname </b>
   <c>08:00:00 11/09/2012</c>
 </in>
 <in>
   <a>First Name</a>
   <b>Surname </b>
   <c>09:00:00 11/10/2012</c>
 </in>
</data> 
```

所以我需要检查是否是昨天，是否保留记录，是否在此之前将其从 XML 文件中删除。从四处打猎到目前为止，我有这个：

```
<?php

$DATE = date( "Y-m-d", mktime(0, 0, 0, date("m"), date("d")-1, date("y")) );
$searchString = '';
$doc = new DOMDocument;
$doc->preserveWhiteSpace = FALSE;
$doc->load('file' . $DATE . '.xml');

$xPath = new DOMXPath($doc);
$query = sprintf('//in[./c[contains(., "%s")]]', $searchString);
foreach($xPath->query() as $node) {
$node->parentNode->removeChild($node);
}
$doc->formatOutput = TRUE;
echo $doc->saveXML();

?> 
```

如果这行得通，那么我想我只需要正确的搜索字符串，对不起，我对 xPath 不是很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:52:28.593

如果`<c>`标签总是包含日期，并且文档的结构总是像您的示例一样，那么 XPath 会不必要地使您的解决方案复杂化。相反，只需使用`getElementsByTagName()`：

```
$lastDt = new DateTime(/* date of the last item you recorded goes here */);

$dom = new DOMDocument();
$dom->load(/* path to your XML file goes here */);

foreach ($dom->getElementsByTagName('c') as $node) {
    $dt = new DateTime($node->nodeValue);

    if ($dt <= $lastDt) {
        $in = $node->parentNode;
        $in->parentNode->removeChild($in);
    }
} 
```

# c++ - 删除 boost::thread 后代

> ID：13323600
> 
> 赞同：3
> 
> 时间：2012-11-10T16:05:45.337
> 
> 标签：c++, destructor, boost-thread

我正在尝试编写一个类，该类将在创建对象时运行线程，并在对象被删除后停止线程。

```
class MyThread : public boost::thread {

public:

    MyThread() : bAlive(true) { 
        boost::thread(&MyThread::ThreadFunction,this);
    }

    ~MyThread() {
        {
            boost::unique_lock<boost::mutex> lock(Mutex);
            bAlive=false;
        }
        ConditionVariable.notify_one();
        join();
    }

private:

    volatile bool bAlive;
    boost::mutex Mutex;
    boost::condition_variable ConditionVariable;

    void ThreadFunction() {
        boost::unique_lock<boost::mutex> lock(Mutex);
        while(bAlive) {
            ConditionVariable.timed_wait(lock,boost::get_system_time()+ boost::posix_time::milliseconds(MAX_IDLE));

            /*******************************************
            * Here goes some code executed by a thread * 
            *******************************************/

        }
    }

}; 
```

从理论上讲，我想在线程需要完成时立即唤醒它，所以我不得不使用 timed_wait 而不是 Sleep。在我尝试删除此类的对象之前，这工作正常。在大多数情况下，它会正常删除，但偶尔会在 condition_variable.hpp、thread_primitives.hpp 或 crtexe.c 中导致错误。有时我会收到通知“释放堆块 3da7a8 在 3da804 被释放后修改”，有时我不是。是的，我知道 timed_wait 的虚假唤醒，在这种情况下它并不重要。你能指出我的问题的根源吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:38:33.913

我看到您正在尝试做的事情，但它没有按您的预期工作：

```
MyThread foo; 
```

默认构造一个 boost::thread（因为 MyThread 是从 boost::thread 派生的）。默认构造函数创建一个引用 Not-a-Thread 的 boost::thread 实例。

```
MyThread() {
    boost::thread(&MyThread::ThreadFunction,this);
} 
```

实际上是在创建一个不同的线程，而您忽略了返回的对象（有效线程）。

```
~MyThread() {
    // ...
    join();
} 
```

**然后尝试加入默认构造的线程（在析构函数**中引发异常），而您永远不会加入实际完成工作的线程。

* * *

首先，不要从 boost::thread 派生。而是创建一个成员变量：

```
class MyThread {
// ...
private:
    // ...
    boost::thread _thread;
}; 
```

在构造函数中，创建一个线程并将其分配给该成员变量：

```
MyThread() {
    _thread = boost::thread(&MyThread::ThreadFunction,this);
} 
```

并在你的析构函数中调用它的 join() 。

```
~MyThread() {
    // ...
    _thread.join();
} 
```

那应该可以解决您的问题。

* * *

但是，如果您只是想在对象被销毁时退出线程（并且不必在其运行时唤醒它），您可以使用不同的方法。删除互斥锁和条件变量并改用中断。这将导致 sleep() 抛出异常，因此您必须捕获它：

```
void ThreadFunction() {
    try {
        for(;;) {
            boost::this_thread::sleep(boost::posix_time::milliseconds(MAX_IDLE));
            // Here goes some code executed by a thread
        }
    } catch( const boost::thread_interrupted& e ) {
        // ignore exception: thread interrupted, exit function
    }
} 
```

当线程中断时，这将立即退出 ThreadFunction。如果您不需要线程在每个周期都休眠，则可以将其替换为`boost::this_thread::interruption_point()`. 如果线程被中断，这只会抛出异常。

现在您可以简单地中断析构函数中的线程：

```
MyThread::~MyThread() {
    _thread.interrupt();
    _thread.join();
} 
```

# c++ - Not fulfilling If condition but the function still return something

> ID：13323616
> 
> 赞同：0
> 
> 时间：2012-11-10T16:08:02.483
> 
> 标签：c++, function, if-statement, return, return-value

Below is the code :

### ****The Code :****

```
`#include <iostream>

using namespace std;

int sum(int ); //To sum up the user input up to 1 , for e.g 4 = 4 + 3 + 2 + 1 = 10

int main(void)
{
    int num;
    int total;

    cin >> num;
    total = sum(num);
    cout << total;
    return 0;
}

int sum(int num)
{
    if(num > 0) // How if num is -1 or -10??
        return num + sum(num - 1);
}` 
```

 **### ****The Question :****

**1.) I try to execute the above code and input value that violate the if condition for e.g `-1` or `-100` . But still when I `cout` the `total` variable I get back the value I've given to the variable `num` .**

 **2.) My question is , is this a standard behavior ? Because I can run this code without getting any warning or error saying there's no `return` statement stated I don't have an extra `return` statement in case the num is violating the condition . So is this *returning- the-original-value-if-the-condition-is-not-true* something normal or it depends on the compiler being used ?

THank you .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:19:55.267

A function that promises to return a value and does not induces **Undefined Behavior** (in C, only if the value is used).

Here your function has two executions paths:

```
int sum(int num) {
    if (sum > 0) 
        return num + sum(num - 1); // code path 1
    // code path 2
} 
```

And in the second code path, it does not return anything.

Undefined behavior means anything can happen. The popular image is that daemons could start flying out of your nose. In practice, you are more likely to get a more or less random value depending on the implementation. Looks like in your case, for your compiler, this program and that set of optimizations (and maybe because the stars aligned, too) you get `num`. Lucky you.

By the way, [my compiler gives a warning](http://liveworkspace.org/code/cf69161560718e622ab6c062fc8e940e):

```
source.cpp: In function 'int sum(int)':
source.cpp:22:1: warning: control reaches end of non-void function [-Wreturn-type] 
```****

# c++ - << 运算符在 C++ 中的作用是什么？

> ID：13323617
> 
> 赞同：0
> 
> 时间：2012-11-10T15:39:38.813
> 
> 标签：c++

> **可能重复：**
> [C++ 中的“<<”运算符是什么？](https://stackoverflow.com/questions/10588748/what-is-the-operator-in-c)

在我正在查看的一段代码中，发生了以下情况：

```
... (header[4] << 8) + header[5] ... 
```

我对编程相当陌生，以前从未见过 << 运算符。谷歌搜索没有提供任何结果。任何快速指示将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T16:04:35.340

`<<`运算符将位*向左*移动N 位，其中 N 在运算符之后。在您的示例中，地址处的位`header[4]`向左移动了 8 位。

这有什么好处是它有效地导致乘以 256，因为 2^8 = 256。如果*向右*移动，则值`header[4]`将*除以*2^8 = 256。

一些真实的位级示例：

*   值 2（二进制的 0010）右移*2*位变为 1000，结果为 8。
*   值 7（二进制的 0111）*向左*移动2 位变为 0001），结果为 1。（7/4 是 1.75，因为无法用整数二进制值表示小数，所以会向下舍入）
*   31 的值（二进制的 11110）*向左*移动3 位变为 00011，这导致值为 3。（实际上它变为 3.785，但它被向下舍入）

所以最后，位移通常意味着乘法（向左移动）或除法（向右移动），因为这就是它的结果。也就是说，您实际上可以用 2 的幂值替换乘法和除法位移，或用乘法替换位移。编译器通常更喜欢用移位次数来代替乘法和除法，因为对于计算机来说，移位比实际进行值的实际乘法或除法要快得多。

# javascript - JQuery 在具有多个列表的页面上针对 Equalheights 的单个列表

> ID：13323621
> 
> 赞同：0
> 
> 时间：2012-11-10T16:08:17.790
> 
> 标签：javascript, jquery, jquery-plugins

我有一个页面会随着类似列表的类别不断增长，我需要为单个给定`<ul>`组设置 Equal Heights。

我的基本 HTML 是：

```
<div class="item-list row-1">
    <h2>Row 1</H2>
<ul>
    <li><img src="http://lorempixel.com/output/nature-h-c-153-256-3.jpg"></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-153-113-5.jpg"></li>
    <li><img src="http://lorempixel.com/output/nature-h-c-153-221-1.jpg"></li>    
</ul>

</div>

<div class="item-list row-2">
<h2>Row 2</H2>
<ul>
    <li><img src="http://lorempixel.com/output/nature-q-c-200-95-2.jpg"></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-169-152-1.jpg"></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-169-96-3.jpg"></li>     
</ul>
</div> 
```

...然后我使用 JQuery Equalheights 插件，如下所示：

```
$(".item-list ul li").siblings().equalHeights(50,400);​ 
```

... 在 UL 组上设置等高。问题是我似乎无法为页面上的每个无序列表指定 Equal Heights。我知道理论上我可以通过定位第 1 行、第 2 行然后等高将特定于每个 UL 组中最高的元素来做到这一点，但是随着 UL 组的增长，这对于 JQuery 来说会变得混乱。

到目前为止，我已经尝试使用`.siblings()`仅尝试针对每个单独的 UL 组，但我仍然看到页面集上最高元素的相同全局高度，`ul > li`无论它在哪里。

我在这里有一个小提琴：http: [//jsfiddle.net/highrockmedia/nDLg5/39/](http://jsfiddle.net/highrockmedia/nDLg5/39/)

...如果您检查`<li>`标签，您会发现它们的高度都设置为 260px，但实际上第 2 行`<li>`标签的高度应该小得多。我也玩过，`.closest()`但也没有运气。如果你不熟悉 EqualHeights，你可以看看[这里的文档。](http://www.cssnewbie.com/equalheights-jquery-plugin/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:20:20.210

你几乎明白了，将 应用`.equalHeights()`到每个 li 中`<ul>`，这样做：

```
$(".item-list ul").each(function() {
    $(this).find('li').equalHeights(50,400);
}); 
```

查看工作[**演示**](http://jsfiddle.net/gnel/nDLg5/21/embedded/result/)（我添加了浅蓝色背景以更好地显示高度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:15:20.713

这就是你所追求的吗？

```
$(".item-list").find('img').css({'height' : '100px'}); 
```

[**小提琴**](http://jsfiddle.net/videsignz/WJ9jS/)

或这个？

```
$(".item-list").find('ul li *').css({'height' : '100px'}); 
```

[**小提琴**](http://jsfiddle.net/videsignz/WJ9jS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T16:16:07.403

你可以使用这样的东西： var itemlists = document.getElementsByClassName('item-list');

这将返回一个数组，其中包含您所有具有 item-list 类的元素。

那么你必须简单地走在这个阵列上。

# java - Web浏览器和java之间的通信

> ID：13323622
> 
> 赞同：1
> 
> 时间：2012-11-10T16:08:24.740
> 
> 标签：java, browser, web, communication

我正在用 PHP-html / Ajax 开发一个私人网站，并用 Java 开发一个客户端程序。

我刚刚看到苹果可以通过 Firefox 或其他方式打开 iTunes 来加载内容。

我想做同样的事情或做得更好：

我尝试制作一个可以与javascript“对话”的程序，或者只编写一个lockFile（tempfile）并通过这个获取数据，我尝试至少获得一个通信Web浏览器-> java，但如果可能的话我宁愿双向通信。

因此，如果有人有任何解决方案，那将是很好的，因为我用谷歌搜索了它，我尝试了 html5 中的本地存储，javascript 中的文件访问……没有什么真正起作用，我不希望程序每次都询问服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:33:06.767

您可以通过多种方式做到这一点，但您必须牢记[跨域限制](http://en.wikipedia.org/wiki/Same_origin_policy)。我一直在用套接字做这个。

1 - 您需要一个网桥来将您的网站与您的服务器通信，这可以使用 java 小程序或 flash 套接字网桥来完成，以便您可以调用您的服务器和您的 javascript 客户端代码。

2 - 您需要在您的服务器中使用 url-redirect 规则，以便当您的客户端发出请求时，它总是在同一个域中进行请求，但最终会到达您的套接字服务器所在的位置。您的客户端不能转到其他域，但您的服务器可以。这是跳过跨域限制所必需的。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T21:42:20.650

您可以查看允许将 Google Chromium 引擎嵌入 Java Swing 应用程序的[JxBrowser库。](http://www.teamdev.com/jxbrowser)您可以使用这个库将浏览器组件嵌入到您的客户端 Java 应用程序中并加载您的 PHP 网页，就像 iTunes 加载 App Store 一样。

它为 Java 到 JavaScript 到 Java 的双向通信提供 API：[http ://www.teamdev.com/downloads/jxbrowser/docs/JxBrowser-PGuide.html#javascript-java-bridge](http://www.teamdev.com/downloads/jxbrowser/docs/JxBrowser-PGuide.html#javascript-java-bridge)

以下代码演示了如何嵌入浏览器组件、加载 URL、在加载的网页上调用 JavaScript 代码以及在 JavaScript 端注册每次 JavaScript 调用时都会调用的 Java 函数：

```
import com.teamdev.jxbrowser.chromium.Browser;
import com.teamdev.jxbrowser.chromium.BrowserFactory;
import com.teamdev.jxbrowser.chromium.BrowserFunction;
import com.teamdev.jxbrowser.chromium.JSValue;
import com.teamdev.jxbrowser.chromium.events.FinishLoadingEvent;
import com.teamdev.jxbrowser.chromium.events.LoadAdapter;

/**
 * The sample demonstrates how to register a new JavaScript function and
 * map it to a Java method that will be invoked every time when the JavaScript
 * function is invoked.
 */
public class JavaScriptJavaSample {
    public static void main(String[] args) {
        Browser browser = BrowserFactory.create();
        // Register "MyFunction" JavaScript function and associate Java callback with it
        browser.registerFunction("MyFunction", new BrowserFunction() {
            public JSValue invoke(JSValue... args) {
                for (JSValue arg : args) {
                    System.out.println("arg = " + arg);
                }
                return JSValue.create("Hello!");
            }
        });

        // Create JFrame and embed Browser component to display web pages
        JFrame frame = new JFrame();
        frame.add(browser.getView().getComponent(), BorderLayout.CENTER);
        frame.setSize(800, 600);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        // Register Load listener to get notification when web page is loaded completely
        browser.addLoadListener(new LoadAdapter() {
            @Override
            public void onFinishLoadingFrame(FinishLoadingEvent event) {
                if (event.isMainFrame()) {
                    Browser browser = event.getBrowser();
                    // Invoke our registered JavaScript function
                    JSValue returnValue = browser.executeJavaScriptAndReturnValue(
                            "MyFunction('Hello JxBrowser!', 1, 2, 3, true);");
                    System.out.println("return value = " + returnValue);
                }
            }
        });
        browser.loadURL("about:blank");
    }
} 
```

# iphone - 对象不确认 协议不给出任何警告

> ID：13323630
> 
> 赞同：0
> 
> 时间：2012-11-10T16:09:30.360
> 
> 标签：iphone, objective-c, ios, ios5

我有一个类“ABC”及其返回该类的非自动释放对象的方法。

```
@interface ABC:NSObject
+(ABC *)aClassMethodReturnsObjectWhichNotAutoreleased;
@end  

@implementation ABC
+(ABC *)aClassMethodReturnsObjectWhichNotAutoreleased{
   ABC *a = [[ABC alloc]init];
   return a;
}
@end 
```

如果我有一个协议 Foo.

```
@Protocol Foo
@required
-(void)abc;
@end 
```

我的 ABC 课程“不”确认 Foo 协议。

第一次通话

```
id<Foo> obj = [ABC aClassMethodReturnsObjectWhichNotAutoreleased]; //show warning 
```

它显示警告“不兼容的指针..”这很好。Abc 没有确认协议 Foo

但是第二次调用

```
id<Foo> obj = [NSArray arrayWithObjects:@"abc",@"def",nil]; // It will "not" show warning as it will return autorelease object.NSArray don't confirm protocol Foo 
```

在第一次调用编译器发出警告，在第二次调用编译器没有发出任何警告。我认为这是因为我没有返回自动释放对象。

为什么编译器在第二次调用中没有发出警告，因为 NSArray 也没有确认 FOO 提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:12:52.870

在您的第一个示例中，返回值是特定类型，因此编译器可以验证分配。

在第二个示例中，该`NSArray arrayWithObjects:`方法的返回类型为`id`. 您可以将类型的对象分配给`id`任何类型的变量。编译器无法验证您所做的事情是否真正正确。

此问题与自动释放的对象无关。这都是关于数据类型的。`id`是一种可以是任何东西的包罗万象的类型。

# node.js - 错误：Procfile 不存在，并且启动 Web 进程时出现问题

> ID：13323633
> 
> 赞同：6
> 
> 时间：2012-11-10T16:09:52.850
> 
> 标签：node.js, heroku

所以，我目前正在关注本教程：[https](https://devcenter.heroku.com/articles/nodejs) ://devcenter.heroku.com/articles/nodejs来启动一个简单的 Node.js 应用程序。我已经到了使用工头在本地运行应用程序的部分（在使用 Procfile 声明进程类型下），并且我收到一个错误，告诉我 Procfile 不存在。我的 Procfile 与我的代码等在同一目录中。到目前为止，所有步骤都很好。我跳过了教程中的这一部分来尝试在 Heroku 上运行该应用程序，但`heroku ps:scale web=1`访问您的应用程序下的这一行告诉我“没有 web 这样的类型”......我正在使用 Windows 来开发我的应用程序。任何帮助将非常感激。:-)

编辑：`web: node web.js`是 Procfile 的内容，我正在关注教程，所以我认为它正在被提交......你能检查一下教程并告诉我是否是吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-05T04:09:11.677

我也收到了`Procfile does not exist`错误。我的问题是我在文件上留下了“.txt”扩展名。一旦我删除了文件扩展名并运行`foreman start`它完美运行，希望这能帮助=）

# android - 输入 Edittext 导致谷歌搜索小部件

> ID：13323642
> 
> 赞同：4
> 
> 时间：2012-11-10T16:11:15.150
> 
> 标签：android, android-edittext

我遇到了一个奇怪的问题。这是我用于 Edittext 的代码

```
<EditText
android:id="@+id/editText1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:inputType="textMultiLine"
android:singleLine="false" /> 
```

每当我运行我的应用程序并开始在编辑文本上输入任何内容时。谷歌搜索小部件出现并开始根据我输入的字符显示结果。我没有为此编写任何代码。

好的，我在这里发布我的活动的 onCreate 方法。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // progress dialog
    progressDialog = ProgressDialog.show(this, "", "Loading. Please wait...", false);
    progressDialog.hide();

    final Spinner spinnerLanguage = (Spinner)this.findViewById(R.id.spinner1);
    final EditText edittextSource = EditText)this.findViewById(R.id.editText1);
    final EditText edittextInput = (EditText)this.findViewById(R.id.editText2);
    final Activity activity = this;
    textOutput = (TextView)this.findViewById(R.id.textView3);
    textResult = (TextView)this.findViewById(R.id.textView4);

    // languages
    spinnerLanguage.setAdapter(new AdapterLanguages(this, 1));

    // execute button
    Button btnExecute = (Button)this.findViewById(R.id.button1);
    btnExecute.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {
           //some code here
                }

    });
} 
```

一旦我在edittext1上输入任何内容，就会导致以下意图

> 开始活动： Intent { act=android.search.action.GLOBAL_SEARCH flg=0x10000000 cmp=com.google.android.googlequicksearchbox/.SearchActivity（有附加功能）}

# c# - 从用户表读取时对象名称“用户”无效

> ID：13323643
> 
> 赞同：0
> 
> 时间：2012-11-10T16:11:28.193
> 
> 标签：c#, asp.net, sql-server

我正在建立一个注册页面，我需要做的一件事是检查提供的电子邮件是否已经存在。这是我的代码：

```
// Check if email already exists in the database
cn.Open();
SqlCommand Command = new SqlCommand("SELECT Email FROM Users WHERE Email = @Email", cn);
Command.Parameters.Add("@Email", SqlDbType.NVarChar).Value = _Email;

SqlDataReader Reader = Command.ExecuteReader(CommandBehavior.CloseConnection);
Reader.Read();
if (Reader.HasRows)
{
    // Email already exists
    Reader.Close();
    Feedback.Text = "That email is already in use, please use another";
}
else
{
    // Doesn't exist, proceed
} 
```

运行此代码时，我得到以下异常，该异常被触发`COmmand.ExecuteReader()`：

`System.Data.SqlClient.SqlException: Invalid object name 'Users'.`

据我所知，这意味着它找不到用户表。它肯定存在，我刚刚创建它，我可以在服务器资源管理器窗口下看到它：

![截屏](../Images/af6f514991c547c3dd861d93d1be0f33.png)

此外，在我的连接字符串中，我`Initial Catalog=db_74;`使用了正确的数据库。

所以，我不知道可能出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:23:26.633

如果您使用的是 SqlExpress，您的连接字符串应该是这样的：

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\db_74.mdf;Integrated Security=True;User Instance=True 
```

# oop - OOP：实现具有更广泛签名的接口方法

> ID：13323644
> 
> 赞同：2
> 
> 时间：2012-11-10T16:11:43.203
> 
> 标签：oop, inheritance, interface, covariance, design-by-contract

假设我有一个界面：

```
INTERFACE `IFace` (
  METHOD `f` (INT) : NIL
) 
```

我想用一个签名更广泛的方法来实现它：

```
CLASS `A` IMPLEMENTS `IFace` (
  METHOD `f` (NUMBER n) : NIL (
    PRINT n
  )
) 
```

（假设 NUMBER 是 INT 的超类型）

为什么这是不可能的？或者什么编程语言支持这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:31:05.997

## 简短的回答：

考虑以下示例：

**第一个示例**（来自您的示例）：

```
INTERFACE `IFace` (
  METHOD `printFibonacci` (INT) : NIL
)

CLASS `A` IMPLEMENTS `IFace` (
  METHOD `printFibonacci` (NUMBER n) : NIL (
    //what if the number is a not an integer? Can we guarantee to the client that we are respecting the method signature?
  )
) 
```

**第二个例子**：

```
public interface Talking {

    public void speak(Human human);

}

public class Employee implements Talking {

    public void speak(Animal animal) {
        // can we speak with a cockroach?
    }
} 
```

在层次结构中上升意味着超类型具有较少的功能和子类型的属性，因此接口有不被尊重的风险：如果可以抽象参数类型，那么就有可能有一个实现接口的类，将方法`METHOD`f重新定义`(ANY_TYPE) : NIL`为`METHOD`f ，`(OBJECT) : NIL`因为所有类型都继承自 Object。

因此，可以定义一个将数字传递给`METHOD`f的类，`(INT) : NIL`但也可以定义另一个将字符串传递给它的类，这可能会破坏接口签名和与客户端的合同（见下文）。

## 长答案：

实现接口的主要目的是将其公开给只知道该接口的客户端，而不是实现它的类。通过这种方式，您可以将实现相同接口的不同类传递给客户端，从而在不更改客户端的情况下更改软件的功能。

与客户端的**合同**在接口中指定，而不是在类中（并且该合同将模拟您的高级黑盒组件设计）。

实际上，接口指定了类方法的**签名**（以几乎合法的方式），并且从[按契约设计](http://en.wikipedia.org/wiki/Design_by_contract)的角度来看，这是设计中最重要的部分。类是需要公开它的接口的**化身。**

因此，接口定义了类的[抽象数据类型](http://en.wikipedia.org/wiki/Abstract_data_type)行为，如果一个类可以更改该定义，那么它可以打破与客户端更改**签名**的“合法”合同。

如果抽象参数，我们也在更改合同，因为更抽象的数据类型将具有更具体的不同的行为和属性。请参阅上面的示例，其中服务的提供者（类）更改了签名并因此更改了合同。合同签订后更改，没有人会高兴。

这并不限制设计，因为接口在 java 中可以具有多重继承。此外，从 JDK5 开始，您可以将[泛型](http://en.wikipedia.org/wiki/Generics_in_Java)与接口一起使用。

所以我们可以使用泛型做以下事情：

```
public interface IFace<T> {
    public void f(T n); 
} 
```

然后在子类中我们对类型没有限制。

请注意，在这种情况下，合同没有指定任何有关参数类型的内容，因此客户不应期待任何事情，也不能起诉我们。

# android - 控制 Android NDK 中的编译器标志？

> ID：13323655
> 
> 赞同：12
> 
> 时间：2012-11-10T16:13:30.450
> 
> 标签：android, android-ndk

我知道我可以`LOCAL_CFLAGS`用来将参数传递给编译器。但是，`ndk-build`在 my 之后插入选项`LOCAL_CFLAGS`，因此它们优先。例如，我想指定`-Ofast`，但在我自己的标志之后`ndk-build`添加`-O2`，并且由于只有最后一个选项是有效的，所以我无法在设置了某些优化标志的情况下测试我的代码。

有什么方法可以强制我`LOCAL_CFLAGS`成为构建命令的最后一个选项，或者禁止`ndk-build`使用某些标志？

例如，我`LOCAL_CFLAGS`的设置为：

```
-Wall -Wno-psabi -Ofast -D CP_USE_DOUBLES=0 -D USE_CHIPMUNK 
```

`g++`对此的呼吁`ndk-build`是：

> `/Library/Android/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi-g++ -MMD -MP -MF ./obj/local/armeabi-v7a/objs/native-activity/Main.o.d -fpic -ffunction-sections -funwind-tables -fstack-protector -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__ -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -fno-exceptions -fno-rtti -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -Ijni -Ijni/Chipmunk/include/chipmunk -I/Library/Android/android-ndk-r8b/sources/android/native_app_glue -I/Library/Android/android-ndk-r8b/sources/cxx-stl/stlport/stlport -I/Library/Android/android-ndk-r8b/sources/cxx-stl//gabi++/include -Ijni -DANDROID -Wall -Wno-psabi -Ofast -D CP_USE_DOUBLES=0 -D USE_CHIPMUNK -Wa,--noexecstack -frtti -O2 -DNDEBUG -g -I/Library/Android/android-ndk-r8b/platforms/android-9/arch-arm/usr/include -c jni/Main.cpp -o ./obj/local/armeabi-v7a/objs/native-activity/Main.o`

里面有很多，但特别注意它首先指定`-Os`，然后是 my `-Ofast`，然后是`-O2`. 为什么它指定`-Os`它是否会稍后说`-O2`，我不知道，但我很沮丧我`-Ofast`被覆盖了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T16:32:17.970

添加

```
APP_CFLAGS += -Ofast 
```

到您的 Application.mk。

它不会阻止 NDK 添加`-O2`，但会将您的标志放在 NDK 之后。这适用于我的 NDK r8b。

# jquery - 如何将参数从 iframe 传递给父级？

> ID：13323660
> 
> 赞同：1
> 
> 时间：2012-11-10T16:14:30.433
> 
> 标签：jquery, iframe

我有一种情况，iframe 触发父窗口的单击事件并将参数传递给父窗口。我试过下面的代码，但参数是未定义的。不知道我做错了什么。

iframe 中的代码

```
jQuery("#add",window.parent.document).trigger('click',"3"); 
```

父窗口中的代码 -

```
jQuery("#add").live('click',function(e,cid){                    
    //cid is undefined
}); 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:18:38.337

仅当 iframe src 来自与父域相同的域时才适用。

父窗口

```
jQuery("#add").live('click',function(e,cid){                    
    //cid is undefined
});
window.eventFromIframe = function(id, eventName value){
   jQuery("#"+id).trigger('click',value); 
}; 
```

在 iframe 里面

```
window.parent.eventFromIframe('add','click', 3); 
```

# javascript - 通过 jQuery UI 自动完成功能包装 Google Places 自动完成服务

> ID：13323661
> 
> 赞同：2
> 
> 时间：2012-11-10T16:14:53.100
> 
> 标签：javascript, jquery-ui, autocomplete, google-places-api

我正在尝试使用 jQuery UI 自动完成功能来制作 Google 自动完成服务的包装器（因为我只想以无法通过 Google API 的方式限制 Google 返回的一些结果）。

假设我有这个代码：

```
$("#address").autocomplete({
  source: function(request, response){
    autoCompleteService = new google.maps.places.AutocompleteService();
    autoCompleteService.getQueryPredictions({input: request.term }, autocompleteCallback);
    //I should somewhere call the "response" object with desired suggestions as arguments
  },
  minLength: 5,
}); 
```

问题是 jQuery UI Autocomplete 迫使我调用“响应”对象（实际上是一个函数），并带有我想向用户显示的建议作为参数。

但是，另一方面，Google API 迫使我定义一个回调函数（在我的例子中是“autocompleteCallback”），它在完成后将请求的建议作为参数提供给它。

当然，我不能在 'autocompleteCallback' 函数中调用 'response' 对象，也不能在此行之后调用响应对象：

```
autoCompleteService.getQueryPredictions({input: request.term }, autocompleteCallback); 
```

因为 JS 是异步的，所以我不能确定我得到了什么，比如说：我用来传递结果的全局变量。

解决方案是什么？对于这样的问题，是否有众所周知的 JS 设计模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T03:48:18.890

先生，您是结合这两个框架的天才！所以我将分享我拥有的解决方案：

```
$("#search").autocomplete({
    source: function (request, response) {
        autoCompleteService.getQueryPredictions({ input: request.term }, function (predictions, status) {
            if (status != google.maps.places.PlacesServiceStatus.OK) {
                alert(status);
                return;
            }
            response($.map(predictions, function (prediction, i) {
                return {
                    label: prediction.description,
                    value: prediction.description
                }
            }));
        });
    },
    select: function (event, ui) {
        var value = ui.item.value;
        searchMap(value);
    }
}); 
```

当然，我有一个实际的函数来执行正确的 Place 查找 ( `searchMap()`)，它包含一个术语。为了让 jQuery UI 自动完成具有适当的`autocompleteCallback`AND`response`处理程序，唯一现实的方法是保持回调实现内联。如果您想在多个地方执行此操作，那就太糟糕了，但我没有想到更好的方法。然而...

# php - 即使 value 是整数，is_int 也会返回 double

> ID：13323663
> 
> 赞同：-2
> 
> 时间：2012-11-10T16:15:05.147
> 
> 标签：php, string, integer

即使值是整数，为什么 is_int() 返回双精度值？

# 示例 1

```
$value = 1555555555;
echo gettype($value); 
```

# 示例 1 返回

```
integer 
```

# 示例 2

```
$value = 15555555552;
echo gettype($value); 
```

# 示例 2 返回

```
double 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:16:57.513

因为您达到了整数的限制，请在此处进一步阅读：

[http://php.net/manual/en/language.types.integer.php](http://php.net/manual/en/language.types.integer.php)

# javascript - 加载后判断元素是否有带有 jQ uery 的 CSS 类

> ID：13323664
> 
> 赞同：1
> 
> 时间：2012-11-10T16:15:13.523
> 
> 标签：javascript, jquery, css, toggle

我进行了研究，发现 .hasClass() 和 .is() 与我需要的相似。但是，它在我的情况下效果不佳。我正在尝试检查一个 DIV 以查看它在页面加载后是否具有特定的类。这会不断变化，因为它基于用户是否滚动..如果用户滚动，jQuery然后将一个类（.ctoggle）添加到.first-div，从那里我希望它“自动”将一个类添加到第二个（。活动）并在从 .firstdiv 中移除时切换。

**以下是用户滚动**的示例：

 **```
<div class="first-div ctoggle"></div>

<div class="shade active"></div> 
```

. 关于如何实现这一目标的任何想法？同样，如果我错了，请纠正我，但似乎 .hasClass() 和 .is() 仅在页面加载之前/期间有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:17:44.267

`.hasClass()``.is()`只要您的目标对象存在，您就可以随时调用它们。但是，他们不会在课程可能发生变化的任何时候继续向您报告——他们不会监控变化。

如果您想在每次滚动页面时检查一个对象以查看其类是否已更改，那么您只需将一些代码连接到滚动事件或在滚动事件上修改页面的代码并检查每次该事件触发时的对象。您可以编写代码来确定何时需要再次检查目标对象。**

# python - 从客户端关闭套接字，以便异步服务器检测到它

> ID：13323665
> 
> 赞同：3
> 
> 时间：2012-11-10T16:15:18.080
> 
> 标签：python, multithreading, sockets, tcp, asyncore

我正在构建一个聊天服务器客户端系统。在客户端创建一个套接字以连接到侦听端口的服务器。问题是当我尝试从客户端关闭套接字时，异步处理句柄关闭没有检测到它。

服务器代码：

```
clients = {}
identity={}
class MainServerSocket(asyncore.dispatcher):
def __init__(self, port):
    asyncore.dispatcher.__init__(self)
    self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
    self.bind(('',port))
    self.listen(5)
def handle_accept(self):
    newSocket, address = self.accept( )
    clients[address] = newSocket
    #try : 
        #hndl=newSocket.recv(1024)
        #print "Connected from", address,hndl
    #except : 
        #e = sys.exc_info()[1]
    print "Connected from", address
    handler=SecondaryServerSocket(newSocket)
    handler.setAddr(address)
    every = clients.values()
    for one in every:
        one.send('Server message:'+str(address)+' joined'+'\n')

class SecondaryServerSocket(asyncore.dispatcher_with_send):
def setAddr(self, addr):
    self.addr = addr

def isid(self,txt):
    pattern=re.compile('\*\$\$\$\*(.+)\*\$\$\$\*')
    match=pattern.search(txt)
    rv=0
    if match :
        self.hndl=match.group(1)
        rv=1
        if self.hndl not in identity.values():
            identity[self.addr]=self.hndl 
            every=clients.values()
            for one in every:
                one.send('Server message:'+str(self.addr)+' is known as '+self.hndl+'\n')
        else:
            clients[self.addr].send("Server message: handle in use, retry. Disconnecting.")
            self.close()
    return rv    #del clients[self.addr]    
def handle_read(self):
    receivedData = self.recv(8192)
    if receivedData:
        if not self.isid(receivedData):
        #self.addr
            every = clients.values()
            for one in every:
                one.send(receivedData)
    else: self.close( )
def handle_close(self):
    print "Disconnected from", self.getpeername( )

    one = self.getpeername( )
    del identity[one]
    del clients[one]
    every=clients.values()
    try:    
        for one in every:
            one.send('server message:'+str(self.addr)+' quit'+'\n')
    except: pass
print "server started"
MainServerSocket(21567)
asyncore.loop( ) 
```

客户端代码（相关位）：

```
 class Application(Frame):
    def __init__(self, master):
        Frame.__init__(self, master)
        self.serv_ip=StringVar()
        self.port=StringVar()
        self.handle=StringVar()
        self.serv_ip.set('127.0.0.1')
        self.port.set('21567')
        self.grid()
        self.create_widgets()
        self.lastname=""
        self.currentname=""
        self.delim=('-'*45)+'\n'
    def connect(self):
        if len(self.handle.get())>0 and not self.handle.get().isspace() :
            HOST = self.serv_ip.get()
            PORT = int(self.port.get())
            #BUFSIZE = 1024
            ADDR = (HOST, PORT)
            try:
                self.tcpCliSock = socket(AF_INET, SOCK_STREAM)
                self.tcpCliSock.connect(ADDR)
                idtext='*$$$*'+self.handle.get()+'*$$$*'
                self.tcpCliSock.send(idtext)
                self.add("sys message: CONNECTED TO "+str(HOST)+':'+str(PORT)+'\n')
                self.socket()
                self.con_button.configure(text="DISCONNECT!",command=self.disconnect)
                self.entry_field.configure(state=NORMAL)
                self.handle_entry.configure(state=DISABLED)
            except: 
                e = sys.exc_info()[1]
                self.add("sys message: ERROR CONNECTING to "+str(HOST)+':'+str(PORT)+"   "+str(e)+'\n')
                #pass
        else : self.add("sys message: Enter handle/nickname and try again."+'\n')

    def disconnect(self):
        #try : self.tcpCliSock.shutdown(2)
        #except: pass
        #self.tcpCliSock.close()
        self.tcpCliSock.send('')
        self.tcpCliSock.close()
        self.closeflag=1
        self.add("sys message: Disconnected."+'\n')
        self.con_button.configure(text="CONNECT!",command=self.connect)
        self.entry_field.configure(state=DISABLED)
        self.handle_entry.configure(state=NORMAL)
        self.closeflag=0
        #self.send_button.configure(state=DISABLED)

    def socket(self):
    def loop0():
        while 1:
            try:
                if self.closeflag==0: 
                    data = self.tcpCliSock.recv(BUFSIZE)

                    if data: self.add(data)
            except:
                e = sys.exc_info()[1]
                self.add("ERROR: "+str(e)+'  disconnecting...'+'\n')
                self.con_button.configure(text="CONNECT!",command=self.connect)
                self.entry_field.configure(state=DISABLED)
                self.handle_entry.configure(state=NORMAL)
                self.closeflag=0
                thread.exit()
                #self.disconnect()
                break
            if self.closeflag==1 :
                self.tcpCliSock.close()
                print "ping"
                thread.exit()

    thread.start_new_thread(loop0, ()) 
```

我知道这是很多代码，但我不确定是哪一点导致了问题，因此决定添加我认为可能负责的所有部分。当调用断开连接函数时，服务器不会检测到断开连接。然后断开连接后，调用connect函数，然后客户端崩溃。

# linux - 如何将输出格式化为列？

> ID：13323666
> 
> 赞同：1
> 
> 时间：2012-11-10T16:15:19.187
> 
> 标签：linux, perl, scripting, output

如何修改以下脚本，使其在相应的列中显示每个值： 脚本的主体如下所示：

```
( $vmdisk, $totalio, $readpercentage, $cachehitpercentage, $currentkbpersecond,
  $maximumkbpersecond, $currentiopersecond, $maximumiopersecond
) = split (",", $line);
$totalio =~ s/\"//g;
$readpercentage =~ s/\"//g;
$cachehitpercentage =~ s/\"//g;
$currentkbpersecond =~ s/\"//g;
$maximumkbpersecond =~ s/\"//g;
$currentiopersecond =~ s/\"//g;
$maximumiopersecond =~ s/\"//g;

print "totalio:$totalio readpercentage:$readpercentage cachehitpercentage:$cachehitpercentage currentkbpersecond:$currentkbpersecond maximumkbpersecond:$maximumkbpersecond currentiopersecond:$currentiopersecond maximumiopersecond:$maximumiopersecond"; 
```

这将显示这种类型的格式化输出：

```
totalio:75.0 readpercentage:20.0 cachehitpercentage:93.3 currentkbpersecond:33.8 maximumkbpersecond:33.8 currentiopersecond:15.0 maximumiopersecond:15.0 
```

一切都在一条线上。我的目标是将输出放入列中并使其更具可读性。例如像这样：

```
totalio readpercentage cachehitpercentage

75.00 20.0 93.0 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:48:58.933

 `````
 printf "%-10s %-10s %-10s\n", $totalio, $readpercentage, $cachehitpercentage; 
````  `应该做你正在寻找的东西。只需根据需要根据模式附加变量。参考： [printf](http://perldoc.perl.org/functions/printf.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:04:28.627

对不起，我只是走出门，否则我会举一个更好的例子。您正在寻找的东西是`formats`. 阅读更多[`perldoc perlform`](http://p3rl.org/perlform)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T05:29:39.527

如果您多次进行这些测量并打印到标准输出或日志文件，则需要考虑格式。 [perldoc 执行](http://perldoc.perl.org/perlform.html "perldoc 执行")

```
$line = "0.0,75.0,20.0,93.3,33.8,33.8,15.0,15.0";

( $vmdisk, $totalio, $readpercentage, $cachehitpercentage, $currentkbpersecond, $maximumkbpersecond, $currentiopersecond, $maximumiopersecond) = split (",", $line);

$totalio =~ s/\"//g;
$readpercentage =~ s/\"//g;
$cachehitpercentage =~ s/\"//g;
$currentkbpersecond =~ s/\"//g;
$maximumkbpersecond =~ s/\"//g;
$currentiopersecond =~ s/\"//g;
$maximumiopersecond =~ s/\"//g;

format REPORT_HEADER = 
-------------------------------------------------------------------------------------------------------
Total IO     Read %     Cache Hit %     Current kB/sec     Max kB/sec     Current IO/sec     Max IO/sec
-------------------------------------------------------------------------------------------------------
.

format REPORT_BODY = 
 @####.#    @###.##         @###.##            @###.##        @###.##            @###.##        @###.##
$totalio, $readpercentage, $cachehitpercentage, $currentkbpersecond, $maximumkbpersecond, $currentiopersecond, $maximumiopersecond
.

select(STDOUT);

$~= "REPORT_HEADER";
write;

$~= "REPORT_BODY";
write; 
```

会给你这样的输出：

```
-------------------------------------------------------------------------------------------------------
Total IO     Read %     Cache Hit %     Current kB/sec     Mac kB/sec     Current IO/sec     Max IO/sec
-------------------------------------------------------------------------------------------------------
    75.0      20.00           93.30              33.80          33.80              15.00          15.00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T00:53:01.493

其中，还有方便的花花公子[Text::Table](http://search.cpan.org/~shlomif/Text-Table/lib/Text/Table.pm)。``

# python - 在 Python 项目中嵌入 Tkinter（以及最终其他）源代码

> ID：13323668
> 
> 赞同：2
> 
> 时间：2012-11-10T16:15:29.637
> 
> 标签：python, unix, tkinter

也许我只是无法在 Google 上找到正确的搜索词组来找到它，但我认为这对其他用户也可能有用。

我为一个用 Fortran 编写的程序编写了一个 Python GUI，但这不是重点（不是重点）。我的 GUI 是使用 Tkinter 界面编写的，但我注意到并非所有 Linux 发行版（实际上我还没有找到）都安装了 python-tk。

如何在我的程序文件夹中包含 python-tk 源代码，以便在我运行程序时可以使用/安装它？

谈到这个，另外两个问题： - 我是否能够在脚本中安装“gfortran”和“gnuplot”（Unix 程序），至少在 apt-get 系统上？还是我需要root权限？- 我也可以将它们包含在我的源代码中吗？为了向人们提供不需要任何进一步安装即可工作的完整应用程序。

先感谢您，

安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:37:19.480

尝试谷歌[Pyinstaller](http://www.pyinstaller.org/)。它能够为您打包库和 python 本身。如果你想要win下的类似功能。试试py2exe

# jquery - Twitter Bootstrap：如何查看切换按钮的状态？

> ID：13323671
> 
> 赞同：26
> 
> 时间：2012-11-10T16:15:47.487
> 
> 标签：jquery, twitter-bootstrap

如何查看切换按钮的状态？

使用复选框，我可以收听复选框的“更改”事件并执行 a`$(this).is(":checked")`查看它的状态。

```
<a id="myId" class="btn" data-toggle="button"/> 
```

但不确定如何使用切换按钮来做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-10T16:21:02.567

你可以看到按钮有哪些类..

```
$(this).hasClass('disabled') // for disabled states
$(this).hasClass('active') // for active states
$(this).is(':disabled') // for disabled buttons only 
```

`is(':disabled')`适用于按钮，但不适用于链接btns

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-27T18:25:54.183

如果你使用 jQuery 来拦截[click](http://api.jquery.com/click/)事件，像这样......

```
$(this).click(callback) 
```

您需要发挥创意，因为`.hasClass('active')`没有报告正确的值。在`callback`函数中输入以下内容：

```
$(this).toggleClass('checked')
$(this).hasClass('checked') 
```

# asp.net - w3wp.exe 中 0x ... 处未处理的异常：0x ...：堆已损坏

> ID：13323675
> 
> 赞同：2
> 
> 时间：2012-11-10T16:16:31.317
> 
> 标签：asp.net, iis-7, heap-corruption, w3wp

我正在 Visual Studio 2012 中构建一个项目。当我按下`F5`运行该应用程序时，它工作得很好，但是当我在我的 Windows Pro 机器上的 IIS7 中加载它时，我第一次调用特定的代码库，我收到以下错误。

> 线程“Win32 线程”(0x4d8) 已退出，代码为 0 (0x0)。
> 
> w3wp.exe 中 0x7797e6c3 处的未处理异常：0xC0000374：堆已损坏。
> 
> w3wp.exe 中 0x778e32a0 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x2039a9f2。
> 
> w3wp.exe 中 0x778e32a0 处未处理的异常：0xC0000005：访问冲突读取位置 0x2039a9f2。

现在我已经`w3wp.exe`将 VS2012 调试器附加到了，但老实说，我不确定如何调试这种类型的崩溃。

作为参考，在 WebAPI 控制器中调用的代码库调用 ActiveHome SDK 以控制一些自动化位。

```
 // GET api/<controller>/5
    public StatusModel Post(CommandModel command)
    {
        var activeHome = new ActiveHomeClass();
        // execute command
        var info = activeHome.SendAction(command.SendAction, String.Format("{0} {1}", command.Device, command.Command));

        // return results
        var status = new StatusModel { Device = command.Device, Status = info };

        activeHome = null;

        return status;
    } 
```

*注意：我正在编译所有内容以使用 x86*

# turbo-prolog - 试图学习Prolog，无法弄清楚什么是错的

> ID：13323678
> 
> 赞同：1
> 
> 时间：2012-11-10T16:16:44.377
> 
> 标签：turbo-prolog

做一个小例子，我想在某个位置的列表中插入一个符号

```
domains
    element = symbol
    list = element*
    position = integer
predicates
    insert (element, position, list, list) %(input,input,input,output)
clauses 
    insert (E,_,[],[E]). 
    insert (E, 1,[H|T],[E|[H|T]]).       %(I insert E on the "first" position)
    % I get errors how E and T are not bound. I have no idea how to make them bound
    insert (E,P,[H|T],[H1|T1]) :-
           P > 1,
           P1 = P - 1,
           insert (E,P1,T,T1). 
```

它不起作用......但我不知道为什么。嗯，它有点工作。我希望它向我展示，`outputList = [NEW_LIST]`而不是时不时地展示。`symbolName=_``outputList = [_,_,_,_]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:22:37.073

显然符号数据类型存在一些问题，如果我使用整数，它会自行修复。

此外，这是必不可少的：

```
domains
    element = integer
     list = element*
     position = integer
predicates
     insert (element, position, list, list) %(input,input,input,output)
clauses 
     insert (E,_,[],[E]). 
     insert (E, 1,[H|T],[E|[H|T]]).
     insert (E,P,[H|T],[H|T1]) :-  % has to be "H" (or anything else) in both
          P > 1,                   % so prolog understands what we are trying to do
          P1 = P - 1,              % don't really understand why though
          insert (E,P1,T,T1).      % I might be wrong 
```

# c++ - 根据键的类型选择 map 或 unordered_map

> ID：13323683
> 
> 赞同：3
> 
> 时间：2012-11-10T16:17:15.950
> 
> 标签：c++, algorithm, boost, data-structures, c++11

一个普遍被问到的问题是我们是否应该使用 unordered_map 或 map 来加快访问速度。这个问题最常见（相当古老）的答案是：如果您想直接访问单个元素，请使用 unordered_map 但如果您想迭代元素（很可能以排序方式）使用 map。

在做出这样的选择时，我们不应该考虑密钥的数据类型吗？由于一种数据类型（比如 int）的哈希算法可能比其他（比如字符串）更容易发生冲突。

如果是这种情况（哈希算法很容易发生冲突），那么即使直接访问我也可能会使用 map，因为在这种情况下，unordered_map 映射的 O(1) 常数时间（可能是大量输入的平均值）是即使对于相当大的 N 值，也超过 lg(N)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:43:36.663

你提出了一个很好的观点......但你关注的是错误的部分。

问题本身不在于密钥的类型，而在于用于为该密钥派生哈希值的哈希函数。

字典排序很**简单**：如果你告诉我你想根据它的 3 个字段来排序一个结构（并且它们已经支持自己排序）那么我就写：

```
bool operator<(Struct const& left, Struct const& right) {
    return boost::tie(left._1,  left._2,  left._3)
         < boost::tie(right._1, right._2, right._3);
} 
```

我完成了！

然而写一个散列函数是**困难**的。你需要一些关于你的数据分布（统计）的知识，你可能需要防止特制的攻击等等......老实说，我不希望很多人能够制作一个好的散列函数。但最糟糕的是，*作曲也很困难*！给定两个独立的字段，将它们的哈希值*正确*组合是很困难的（提示：）`boost::hash_combine`。

因此，确实，如果您不知道自己在做什么并且正在处理用户制作的数据，那么请坚持使用`map`. 它可能更慢（不确定），但它更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T16:21:11.890

没有真正的*冲突对象*这样的东西，因为这个东西取决于你使用的散列函数。假设对象不相同 - 有一些功能可用于创建要使用的信息散列函数。

假设您对您的数据有一些了解——并且您知道某些散列函数可能会发生很多冲突`h1()`——那么您应该找到并使用`h2()`更适合此任务的不同散列函数。

* * *

也就是说，还有其他问题以及为什么偏爱基于树的数据结构而不是哈希库（例如延迟和集合的大小），[我在这个线程中的回答](https://stackoverflow.com/a/10033515/572670)涵盖了一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:07:58.463

试图对此过于聪明是没有意义的。与往常一样，分析、比较、优化（如果有用）。涉及的因素很多——其中相当多的因素没有在标准中指定，并且会因编译器而异。有些事情在特定硬件上可能会更好或更差。如果您对这些东西感兴趣（或付费假装感兴趣），您应该更系统地了解这些东西。您可以先了解一些实际的散列函数及其特征。很难找到一个哈希函数——对于所有实际目的——不比随机但可重复的值更容易发生冲突——只是有时接近那个点比处理一些额外的冲突要慢。

# youtube - YouTube API 浏览器上传失败并出现 500 内部错误

> ID：13323693
> 
> 赞同：1
> 
> 时间：2012-11-10T16:17:52.987
> 
> 标签：youtube, youtube-api

[https://gdata.youtube.com/action/GetUploadToken](https://gdata.youtube.com/action/GetUploadToken)过去可以正常工作，但现在已停止工作并每次都返回 500 错误，除非授权令牌已超时，否则它会返回“Authorize = true”。所以服务器正在响应并且可以告诉我我的令牌何时不再有用。使用 OAUth2，我得到一个令牌没有问题。有任何想法吗？

```
** Headers Sent **

[headers] => array(
    [Authorization] => Bearer ********
    [X-GData-Key] => key=*************
    [GData-Version] => 2
    [Content-Type] => application/atom+xml; charset=UTF-8
)

** Body sent **

<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <media:group>
    <media:title type="plain">Wildlife</media:title>
    <media:description type="plain">Wildlife</media:description>
    <media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">Travel</media:category>
    <media:keywords>wildlife</media:keywords>
    <media:license type="text/html"/>
  </media:group>
</entry>

** Response data **

Array
(
    [headers] => Array
        (
            [x-gdata-user-country] => US
            [content-type] => text/html; charset=UTF-8
            [date] => Sat, 10 Nov 2012 15:45:34 GMT
            [expires] => Sat, 10 Nov 2012 15:45:34 GMT
            [cache-control] => private, max-age=0
            [x-content-type-options] => nosniff
            [x-frame-options] => SAMEORIGIN
            [x-xss-protection] => 1; mode=block
            [server] => GSE
        )

    [body] => <HTML>
<HEAD>
<TITLE>Internal Error</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Internal Error</H1>
<H2>Error 500</H2>
</BODY>
</HTML>

    [response] => Array
        (
            [code] => 500
            [message] => Internal Server Error
        )

    [cookies] => Array
        (
        )
) 
```

# ios - Xcode中标签文本的对齐方式

> ID：13323694
> 
> 赞同：1
> 
> 时间：2012-11-10T16:18:01.643
> 
> 标签：ios, xcode

我想稍微改变标签中的文字。我已经通过在属性检查器中对齐将文本放在右侧。但我想将它稍微向左移动。不知道该按什么按钮。我已经查看了属性检查器中的所有功能，但仍然无法找到它。

这是它现在的样子：![在此处输入图像描述](../Images/d772352d66de737a8dc844e1c8f4d4c1.png)

喜欢将零稍微向左移动一些。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:30:55.310

如果要在标签中移动文本，则必须继承 UILabel 并覆盖 drawTextInRect: ，如下所示：

```
@implementation RDLabel

- (void)drawTextInRect:(CGRect)rect {
    CGRect newRect = CGRectMake(0, 0, rect.size.width - 10, rect.size.height);
    [super drawTextInRect:newRect];
}
@end 
```

如果文本右对齐，这会将文本向左移动 10 点。

# matlab - 使用矩阵函数和运算符是否会使 Matlab 中的代码相当快？

> ID：13323697
> 
> 赞同：3
> 
> 时间：2012-11-10T16:19:00.513
> 
> 标签：matlab, matrix

我正在编写机器学习代码，我很难找到使用矩阵操作进行一些操作的方法，而不是使用基本 for 循环的迭代方法。您认为使用迭代以外的矩阵会产生如此大的差异还是可以忽略的性能差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:40:26.733

从历史上看，matlab 中的循环非常慢。但是，在具有新 JIT 编译循环的 Matlab 版本中，速度可能非常快。

在 Matlab 中，建议尽可能避免循环，因为整个语言都是为基于向量的操作而设计的。在编写 matlab 代码时，它认为循环遍历向量而不是使用基于向量的数学是不好的风格。

好的matlab代码：

```
[a b] = deal( rand(10,1) );
c = a+b; 
```

错误的matlab代码：

```
[a b] = deal( rand(10,1) );
c = zero(10,1);
for i = 1:10
  c(i) = a(i) + b(i); 
```

这两个实现都是“正确的”，但是 99% 的 matlab 程序员会使用第一个实现。此外，任何 matlab 程序员都会看到第一个实现并确切地知道代码的含义。

关于性能，很难事先说向量操作是否比循环快，因为它实际上取决于实现细节。但是，根据我的经验，向量函数很少比循环慢。我遇到了没有循环就无法解决的算法问题。当我发现基于向量的解决方案时，它将计算时间从几分钟减少到不到一秒：[如何优化这个索引算法](https://stackoverflow.com/questions/12392061/how-can-i-optimize-this-indexing-algorithm)

# .net - 使用 Fluent NHibernate 映射许多实体使用的本地化实体集合

> ID：13323698
> 
> 赞同：1
> 
> 时间：2012-11-10T16:19:12.173
> 
> 标签：.net, nhibernate, orm, fluent-nhibernate, mapping

我正在使用旧数据库，并且正在尝试使用 Fluent NHibernate 映射某种本地化表。

该表如下所示：

```
DataName
[PK] TableName
[PK] FieldName
[PK] Id
[PK] LangId
Description 
```

此表通过此实体映射：

```
公共类 DataName : EntityBase
{
    公共虚拟字符串表名 { 获取；放; }
    公共虚拟字符串字段名 { 获取；放; }
    公共虚拟 int Id { 获取；放; }
    公共虚拟语言语言{get; 放; }
    公共虚拟字符串描述{get; 放; }

    ...
}

公共类 DataNameMap : ClassMap
{
    公共数据名称映射（）
    {
        表（“zDataName”）；

        CompositeId().KeyProperty(x => x.TableName)
            .KeyProperty(x => x.FieldName)
            .KeyProperty(x => x.Id)
            .KeyProperty(x => x.Language, "LangId").CustomType();

        Map(x => x.Description).Column("Descr").Length(2000);
    }
}

```

为了本地化，我有多个实体映射到“DataName”实体，映射如下所示：

```
公共类运营商
{

    公共虚拟 int CarrId { 获取；放; }
    公共虚拟字符串 CarrCode { get; 放; }
    公共虚拟列表 DataNameList { 获取；放; }

    ...
}

公共类 CarrierMap : ClassMap
{
    公共运营商地图（）
    {
        表（“运营商”）；

        Id(x => x.CarrId).GeneratedBy.Identity();
        Map(x => x.CarrCode).Not.Nullable().Length(8);

        HasMany(x => x.DataNameList)
            .KeyColumn("Id")
            .Where("TableName = 'carriers' AND FieldName = 'name'")
            。逆（）
            .Cascade.AllDeleteOrphan();

        ...
    }
}

```

“DataName”表包含如下所示的记录：

```
表名 字段名 Id LangId 描述
--------- --------- -- ------ ------------
运营商名称 1000 1 英文描述
运营商名称 1000 2 法语描述

```

我可以毫无问题地从数据库中检索这些信息，但是当需要将新实体（插入或更新）保存到数据库时，NHibernate 不会以正确的顺序执行操作。

```
INSERT INTO DataName (TableName, FieldName, LangId, Id, Description) VALUES ('Carriers', 'Name', 1, NULL, 'English description')
INSERT INTO DataName (TableName, FieldName, LangId, Id, Description) VALUES ('Carriers', 'Name', 2, NULL, 'French description')

插入载体....

```

**就本例而言，假设数据库生成的 id 为 2000。**

```
更新数据名称集 ID = 2000
WHERE TableName = 'Carriers' AND FieldName = 'Name' AND LangId = 1 AND Id IS NULL
更新数据名称集 ID = 2000
WHERE TableName = 'Carriers' AND FieldName = 'Name' AND LangId = 2 AND Id IS NULL

```

我曾尝试使用 DataNameList 集合的 HasMany 映射的 Inverse() 选项，但它似乎对这种特殊情况没有任何影响。

如何告诉 NHibernate 持久化“Carrier”实体，然后收集“DataName”，而无需在插入“Carrier”实体后发出额外的 UPDATE 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:29:54.300

在这种情况下（可能与遗留数据库有关）*NHibernate*正常工作，正如预期的那样。我会尝试解释原因。我们必须观察 FLUSH 排序和一列的双重使用：

### 首先，会话刷新的顺序。

NHibernate 文档说：

> 9.6 刷新（[http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-flushing](http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-flushing)）
> 
> ...
> 
> SQL 语句按以下顺序发出
> 
> *   所有实体插入，以相同的顺序使用 ISession.Save() 保存相应的对象
> *   所有实体更新
> *   所有集合删除
> *   所有集合元素的删除、更新和插入
> *   所有集合插入
> *   所有实体删除，以相同的顺序使用 ISession.Delete() 删除相应的对象

### 其次，双列映射。

上面显示的片段使用一列：（**`Id`**在表 DataName 中）有两个目的： **I.**作为主键（这将在 INSERT 语句期间处理）

```
CompositeId().KeyProperty(x => x.TableName)
  .KeyProperty(x => x.FieldName)
  .KeyProperty(x => x.Id)
  ... 
```

**二、**作为参考的两个实体载体

```
HasMany(x => x.DataNameList)
.KeyColumn("Id")
... 
```

### 最后：会发生什么

鉴于此，答案是：*NHibernate*必须在第一轮中插入所有实体。如果会有一些多对一的映射，它也可以作为 INSERT 的一部分来完成。所以`DataName`s 也被插入`Carrier`。

但在我们的示例中，我们还需要持久化 Collection (the `DataNameList`)。所以现在*NHibernate*更新所有（刚刚插入的）集合项以提供参考所有者（`Carrier`）

### 建议

所以这就是为什么我会将这种观察到的行为标记为“预期的行为”。为了避免更新，我们可以将列表映射设置为`cascade="none"`并手动管理持久性（例如，调用 Session.Save(Carrier) 然后将 Carrier 分配给每个 DataName 并调用 Session.Save(DataName)，

...

## 编辑：扩展建议

**一、产生INSERT和UPDATE的设置**

使用此设置，我能够重复您所经历的 C# 类载体映射到 DataName 的行为

```
private IList<DataName> _dataNames;
public virtual IList<DataName> DataNames
{
  get { return _dataNames ?? (_dataNames = new List<DataName>()); }
  set { _dataNames = value; }
} 
```

XML 映射（与您的 fluent 相同，但反转它的**false**）

```
<bag name="DataNames" inverse="false" cascade="all-delete-orphan"
  where="TableName = 'carriers' AND FieldName = 'name'" >
  <key column="Id" />
  <one-to-many class="DataName" />
</bag> 
```

以及导致相同问题的代码，您在上面已经描述过：

```
// create 2 DataNames
DataName dn1 = CreateNew(LangId = 1, "English");
DataName dn2 = CreateNew(LangId = 2, "French");

// insert them into collection
carrier.DataNames.Add(dn1);
carrier.DataNames.Add(dn2);

// persist them all
session.Save(carrier); 
```

这导致 INSERTS with UPDATES

**二、工作设置，只需使用 INSERT**

如果我进行这些更改：1）将反转更改为**true** `inverse="true"` 2）根据其持有者（运营商）显式设置 DataName.Id

```
// carrier ID must be get from the server, because of identity
session.Save(carrier);

// explicity setting of the ID
dn1.Id = carrier.ID;
dn2.Id = carrier.ID;

// inverse set to false 
carrier.DataNames.Add(dn1);
carrier.DataNames.Add(dn2);

// Update via the carrier entity, will trigger INSERT
session.Update(carrier); 
```

然后只应用 INSERTS 语句。这有帮助吗？

*注意：如果 ID 不会在 SQL Server（身份）上生成，而是由 NHibernate (HiLo) 分配，则可以减少往返行程。*

# actionscript-3 - AS3：公共变量与 .this

> ID：13323699
> 
> 赞同：0
> 
> 时间：2012-11-10T16:19:12.970
> 
> 标签：actionscript-3, public-method

如果有一个使用 Chan 类的主类，给定两个代码，例如

```
public class Chan extends Sprite
{

    public function Chan():void
    {
       this.graphics.beginFill(0x123456); 
       this.graphics.drawRect(100,100,30,30);
    }
} 
```

和

```
public class Chan extends Sprite
{
    public static var rect:Sprite=new Sprite(); 
    public function Chan():void
    {
       rect.graphics.beginFill(0x123456); 
       rect.graphics.drawRect(100,100,30,30);
    }
} 
```

为什么一个似乎工作，而另一个没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:39:53.913

范围。在第一个示例中，您正在绘制已经在舞台上的精灵实例本身。第二个示例中的 rect 是静态的，属于该类。所以虽然你在画它，但它是不可见的……它只存在于内存中。如果您在第二个示例中再添加一行，它也将是可见的。

```
public class Chan extends Sprite
{
    public static var rect:Sprite=new Sprite(); 
    public function Chan():void
    {
        rect.graphics.beginFill(0x123456); 
        rect.graphics.drawRect(100,100,30,30);
        this.addChild(rect);
    }
} 
```

编辑：

我想详细说明一下。rect 是静态变量这一事实并不是主要问题。我在回答中提到它是静态的，但不想让您感到困惑。它不起作用的原因是您绘制的范围不在视图中......它只是一个变量。所以即使它说：

```
public var rect:Sprite = new Sprite(); 
```

在您调用 addChild(rect) 将其实际添加到视图中之前，它是不可见的。

# java - 使用 Java Graphics2D API 在 TextLayout 中将文本右对齐

> ID：13323701
> 
> 赞同：3
> 
> 时间：2012-11-10T16:19:36.263
> 
> 标签：java, graphics2d

所以，我正在使用 Java 教程中的代码来绘制一段文本，但我不知道如何将文本对齐到右边距。

我只是包含`attstring.addAttribute(TextAttribute.RUN_DIRECTION, TextAttribute.RUN_DIRECTION_RTL);`在该案例的代码中，但它不起作用。

```
protected float drawParagraph (Graphics2D g2, String text, float width, float x, float y, Boolean dir){
        AttributedString attstring = new AttributedString(text);
        attstring.addAttribute(TextAttribute.FONT, font);
        if (dir == TextAttribute.RUN_DIRECTION_RTL){
            attstring.addAttribute(TextAttribute.RUN_DIRECTION, TextAttribute.RUN_DIRECTION_RTL);
        }
        AttributedCharacterIterator paragraph = attstring.getIterator();
        int paragraphStart = paragraph.getBeginIndex();
        int paragraphEnd = paragraph.getEndIndex();
        FontRenderContext frc = g2.getFontRenderContext();
        LineBreakMeasurer lineMeasurer = new LineBreakMeasurer(paragraph, frc);

        // Set break width to width of Component.
        float breakWidth = width;
        float drawPosY = y;
        // Set position to the index of the first character in the paragraph.
        lineMeasurer.setPosition(paragraphStart);

        // Get lines until the entire paragraph has been displayed.
        while (lineMeasurer.getPosition() < paragraphEnd) {
            // Retrieve next layout. A cleverer program would also cache
            // these layouts until the component is re-sized.
            TextLayout layout = lineMeasurer.nextLayout(breakWidth);
            // Compute pen x position. If the paragraph is right-to-left we
            // will align the TextLayouts to the right edge of the panel.
            // Note: drawPosX is always where the LEFT of the text is placed.
            float drawPosX = (float) (layout.isLeftToRight()
                        ? x : breakWidth - layout.getAdvance());

            // Move y-coordinate by the ascent of the layout.
            drawPosY += layout.getAscent();

            // Draw the TextLayout at (drawPosX, drawPosY).
            layout.draw(g2, drawPosX, drawPosY);

            // Move y-coordinate in preparation for next layout.
            drawPosY += layout.getDescent() + layout.getLeading();
        }
        return drawPosY;
    } 
```

请帮忙，我迷路了^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:11:34.800

错误是在计算中`drawPosX`。工作公式是`drawPosX = (float) x + breakWidth - layout.getAdvance();`

我最终做了一个小修复来支持中心对齐，这里是代码：

```
public abstract class MyClass extends JPanel implements Printable{

    [...]

    public static enum Alignment {RIGHT, LEFT, CENTER};

    [...]

    /**
 * Draw paragraph.
 * Pinta un parrafo segun las localizaciones pasadas como parametros.
 *
 * @param g2 Drawing graphic.
 * @param text String to draw.
 * @param width Paragraph's desired width.
 * @param x Start paragraph's X-Position.
 * @param y Start paragraph's Y-Position.
 * @param dir Paragraph's alignment.
 * @return Next line Y-position to write to.
 */
protected float drawParagraph (Graphics2D g2, String text, float width, float x, float y, Alignment alignment){
    AttributedString attstring = new AttributedString(text);
    attstring.addAttribute(TextAttribute.FONT, font);
    AttributedCharacterIterator paragraph = attstring.getIterator();
    int paragraphStart = paragraph.getBeginIndex();
    int paragraphEnd = paragraph.getEndIndex();
    FontRenderContext frc = g2.getFontRenderContext();
    LineBreakMeasurer lineMeasurer = new LineBreakMeasurer(paragraph, frc);

    // Set break width to width of Component.
    float breakWidth = width;
    float drawPosY = y;
    // Set position to the index of the first character in the paragraph.
    lineMeasurer.setPosition(paragraphStart);

    // Get lines until the entire paragraph has been displayed.
    while (lineMeasurer.getPosition() < paragraphEnd) {
        // Retrieve next layout. A cleverer program would also cache
        // these layouts until the component is re-sized.
        TextLayout layout = lineMeasurer.nextLayout(breakWidth);
        // Compute pen x position. 
        float drawPosX;
        switch (alignment){         
        case RIGHT:
            drawPosX = (float) x + breakWidth - layout.getAdvance();
            break;
        case CENTER:
            drawPosX = (float) x + (breakWidth - layout.getAdvance())/2;
            break;
        default: 
            drawPosX = (float) x;
        }
        // Move y-coordinate by the ascent of the layout.
        drawPosY += layout.getAscent();

        // Draw the TextLayout at (drawPosX, drawPosY).
        layout.draw(g2, drawPosX, drawPosY);

        // Move y-coordinate in preparation for next layout.
        drawPosY += layout.getDescent() + layout.getLeading();
    }
    return drawPosY;
}
} 
```

# actionscript-3 - Actionscript 3 - 旋转符号？

> ID：13323707
> 
> 赞同：0
> 
> 时间：2012-11-10T16:20:01.410
> 
> 标签：actionscript-3, actionscript, rotation, symbols

我正在 youtube 上编写一个教程来学习一些动作脚本 3。我已经完成了我的成品，它基本上是一个`symbol`被称为的`ball`，它有一个名为`_ball`. 教程中的成品显示在这里。

[教程视频 - Youtube](http://www.youtube.com/watch?v=28qCfn2lS6o&feature=autoplay&list=PL656C91AE69045127&playnext=1)

所以基本上我想要实现的是球旋转，这取决于球的移动方式，我将如何实现这一目标？我是动作脚本的新手，所以一些代码示例将不胜感激或深入解释。

万一有人想要一份代码的副本——就是这样——我已经以某种方式对其进行了编辑，但效果并不大。

```
package
{
    import flash.display.MovieClip
    import flash.text.TextField
    import flash.events.Event
    import flash.events.MouseEvent

    public class DocumentMain extends MovieClip
    {
        public const GRAVITY:Number = 2; // Declaring a const variable known as gravity
        public const BOUNCE:Number = 0.8;
        public const HIT:Number = 15;

        public var _bounces:TextField;
        public var _highscore:TextField;
        public var _ball:Ball;

        private var _vx:Number; // Declaring a variable known as _vx
        private var _vy:Number; // Declaring a variable knwon as _vy

        public function DocumentMain(): void
        {
            _vx = Math.random(); // Initalising _vx
            _vy = Math.random(); // Initalising _vy

            _ball.buttonMode = true;

            addEventListener(Event.ENTER_FRAME, enterFrameHandler);
            addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
        }

        private function enterFrameHandler (e:Event):void
        {
            // Gravitate the Ball
            _vy += GRAVITY; // The ball is effected by gravity each frame

            // Move The Ball
            _ball.x += _vx;
            _ball.y += _vy;

            // Check Stage Boundaries For Collisions
            checkBoundaryCollision();
        }

        private function mouseDownHandler (e:MouseEvent):void
        {
            // Hit the ball if it has been clicked
            if (e.target == _ball)
            {
                hit(e.target.mouseX, e.target.mouseY);
            }
        }

        private function checkBoundaryCollision():void
        {
            var left:Number;
            var right:Number;
            var bottom:Number;
            var top:Number;

            left = _ball.x - (_ball.width / 2);
            right = _ball.x + (_ball.width / 2);
            bottom = _ball.y + (_ball.height / 2);
            top = _ball.y - (_ball.height / 2);

            if (left < 0 && _vx < 0)
            {
                _ball.x = (_ball.width / 2)
                _vx  *= -1;
            }
            else if (right > stage.stageWidth && _vx > 0)
            {
                _ball.x = stage.stageWidth - (_ball.width / 2)
                _vx  *= -1;
            }

            if (top <= 42.70 && _vy < 0)
            {
                _ball.y = (_ball.height / 2)
                _vy  *= -1;
            }
            else if (bottom > stage.stageHeight && _vy > 0)
            {
                _ball.y = stage.stageHeight - (_ball.height/2)
                _vy *= -BOUNCE;
                _vx *= BOUNCE;

                if (Number(_bounces.text) > Number(_highscore.text))
                {
                    _highscore.text = _bounces.text;
                }

                _bounces.text = "0";
            }
        }

        private function hit(hitX:Number, hitY:Number):void
        {
            // increment bounces
            _bounces.text = String(Number(_bounces.text) + 1);
            // Adjust vertical velocity
            if (_vy > 0)
            {
                _vy *= -BOUNCE / 2;
            }

            _vy -= HIT;

            //adjust horizontal veloity
            if (_vx * hitX > 0)
            {
                _vx *= -BOUNCE;
            }

            _vx -= (hitX / _ball.width * HIT);
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:00:50.967

我现在无法对此进行测试，但它应该像更新您`enterFrameHandler`以在每一帧上将球旋转乘以球的 x 速度的基值一样简单：

```
 public const ROTATION:Number = 1;

    private function enterFrameHandler (e:Event):void
    {
        // Gravitate the Ball
        _vy += GRAVITY; // The ball is effected by gravity each frame

        // Move The Ball
        _ball.x += _vx;
        _ball.y += _vy;

        // Rotate the ball each frame at a speed and direction 
        // related to the ball's current x velocity. A negative
        // x velocity will result in a negative rotation.
        _ball.rotation += ROTATION * _vx;

        // Check Stage Boundaries For Collisions
        checkBoundaryCollision();
    } 
```

# c++ - 一种用于对等值条目进行排序和改组的快速算法（最好由 STL 提供）

> ID：13323711
> 
> 赞同：3
> 
> 时间：2012-11-10T16:20:42.220
> 
> 标签：c++, algorithm, sorting, stl, shuffle

我目前正在开发随机优化算法并遇到以下问题（我想这也出现在其他地方）：它可以称为**完全不稳定的部分排序**：

> 给定一个大小为 n 的容器和一个比较器，这样条目的值可能相等。返回最好的 k 个条目，但如果值相等，则应该（几乎）同样有可能收到其中的任何一个。

*（输出顺序与我无关，即最好的 k 中完全相等的值不需要被打乱。然而，即使将**所有**相等的值打乱也是一个相关的、有趣的问题，就足够了！）*

一种非常（！）低效的方法是使用`shuffle_randomly`then `partial_sort`，但实际上只需要在“选择边界”处*打乱等值条目块（分别是所有等值条目块，两者都快得多）*。也许观察是从哪里开始......

如果有人可以提供带有 STL 算法（或至少大部分）的解决方案，我会非常喜欢，因为它们通常非常快、封装良好且 OMP 并行化。

提前感谢任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:26:09.077

你想`partial_sort` *先*。然后，当元素不相等时，返回它们。如果遇到大于剩余 k 的相等元素序列，则打乱并返回第一个 k。否则全部返回并继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T16:45:59.733

不完全理解你的问题，但如果你是我解决这个问题（如果我没看错的话）......

由于看起来您无论如何都必须遍历给定的对象，因此您不妨为结果构建它的副本，在插入时对其进行排序，并在插入时随机化您的“相等”项目。

换句话说，将给定容器中的项目复制到 STL 列表中，但重载比较运算符以创建 B-Tree，如果插入时两个项目相等，则随机选择在当前项目之前或之后插入它。

通过这种方式，它被最优地遍历（因为它是一棵树），并且每次构建列表时，您都会获得相等的项目的随机顺序。

这是内存的两倍，但我正在阅读此内容，因为您不想更改原始列表。如果您不在乎丢失原件，请在插入新列表时从原件中删除每个项目。最糟糕的遍历将是您第一次调用函数，因为传入的列表可能未排序。但是，由于您正在用排序后的副本替换列表，因此未来的运行应该会更快，并且您可以通过将根节点分配为 length() / 2 处的元素来为树选择更好的枢轴点。

希望这是有帮助的，听起来像一个整洁的项目。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:56:22.343

如果您真的是说输出顺序无关紧要，那么您需要`std::nth_element`，而不是`std::partial_sort`，因为它通常会更快一些。请注意，`std::nth_element`将第 n^个元素放在正确的位置，因此您可以执行以下操作，这是 100% 的标准算法调用（警告：没有很好地测试；fencepost 错误可能性比比皆是）：

```
template<typename RandomIterator, typename Compare>
void best_n(RandomIterator first,
            RandomIterator nth,
            RandomIterator limit,
            Compare cmp) {
  using ref = typename std::iterator_traits<RandomIterator>::reference;
  std::nth_element(first, nth, limit, cmp);
  auto p = std::partition(first, nth, [&](ref a){return cmp(a, *nth);});
  auto q = std::partition(nth + 1, limit, [&](ref a){return !cmp(*nth, a);});
  std::random_shuffle(p, q);  // See note
} 
```

该函数采用三个迭代器，例如`nth_element`，其中`nth`是第 n^个元素的迭代器，这意味着它是`begin() + (n - 1))`。

**编辑**：请注意，这与大多数 STL 算法不同，因为它实际上是一个*包含*范围。特别是 UB if `nth == limit`，因为它必须`*nth`是有效的。此外，没有办法请求`best 0`元素，就像没有办法请求第 0^个元素一样`std::nth_element`。您可能更喜欢使用不同的界面；随意这样做。

或者你可以这样称呼它，在要求之后`0 < k <= n`：

```
best_n(container.begin(), container.begin()+(k-1), container.end(), cmp); 
```

它首先用于`nth_element`将“最佳”`k`元素放在 position`0..k-1`中，以保证第 k^个元素（或其中一个）位于 position `k-1`。然后它重新划分 position 前面的元素`k-1`，使相等的元素位于末尾，并重新划分 position 后面的元素`k-1`，使相等的元素位于开头。最后，它打乱相等的元素。

`nth_element`是`O(n)`；这两个`partition`操作的总和为`O(n)`; 并且`random_shuffle`是`O(r)`其中`r`是混洗的相等元素的数量。我认为所有的总结都是`O(n)`如此，它具有最佳的可扩展性，但它可能是也可能不是最快的解决方案。

* * *

注意：您应该使用`std::shuffle`而不是`std::random_shuffle`，将统一随机数生成器传递给`best_n`。但是我懒得写所有的样板来做这件事并测试它。对不起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T19:46:07.473

如果您不介意对整个列表进行排序，那么有一个简单的答案。随机化比较器中等效元素的结果。

```
 std::sort(validLocations.begin(), validLocations.end(),
        [&](const Point& i_point1, const Point& i_point2)
          {
              if (i_point1.mX == i_point2.mX)
              {
                  return Rand(1.0f) < 0.5;
              }
              else
              {
                  return i_point1.mX < i_point2.mX;
              }
          }); 
```

# java - Android Bundle putStringArray 不起作用

> ID：13323719
> 
> 赞同：2
> 
> 时间：2012-11-10T16:21:32.793
> 
> 标签：java, android, bundle

我想将三个字符串从一个活动传递到另一个活动，但它不起作用。我已经尝试了很多，但我就是不明白为什么它不起作用这是第一个活动

**第一项活动**

```
 String[] g = new String[3];
                  g[0] = "information 1";
                g[1] = "information 2";
                g[2] = "information 3";
                Intent intent = new Intent(Entradas.this,Informacoes.class);
                Bundle bundle = new Bundle();
                bundle.putStringArray("some string",g);
                intent.putExtras(bundle);
                startActivity(intent); 
```

**第二次活动**

```
 Bundle bundle = getIntent().getExtras();
    String[] abc = bundle.getStringArray("some string");
    TextView txtInfo= (TextView) findViewById(R.id.textViewInfo);
    txtInfo.setText(abc[0]);
    TextView txtNome= (TextView) findViewById(R.id.textViewNome);
    txtNome.setText(abc[1]);
    TextView txtPreco= (TextView) findViewById(R.id.textViewPreco);
    txtPreco.setText(abc[2]); 
```

它只是不起作用，有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:23:33.510

您有 3 个元素，但为 2 个元素分配了空间。尝试先解决这个问题？

# javascript - 如何在包含 iframe 的页面中检索滚动位置

> ID：13323720
> 
> 赞同：1
> 
> 时间：2012-11-10T16:21:40.663
> 
> 标签：javascript, asp.net, scroll-position

我的代码在具有 iframe 更改的页面中不起作用 `(document.cookie)`！回发后！代码是：

```
$(window).scroll(function() {
oldScroll = $(this).scrollTop();
if (oldScroll >15) {
document.cookie = pathname + oldScroll+'@'; }
}); 

$(window).load(function() {
load();
}); 

function load() {
var pathname = window.location.pathname;var newScroll;
var starPos = document.cookie.indexOf('aspx')+4;
var endPos = document.cookie.indexOf('@');
newScroll = document.cookie.search(";");
var oldPage=document.cookie.substring(0,pathname.length);
$(window).scrollTop(document.cookie.substring(starPos, endPos));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:06:36.313

我找到了答案，我可以在页面回发中返回滚动

```
$(document).ready(function () {
var pathname = window.location.pathname;
$(window).ready(function () {
    $(this).scroll(function () {
        oldScroll = $(this).scrollTop();
        if (oldScroll > 100) {
            setCookie("scroll", pathname + oldScroll + "@", '2020');
        }
    });
});

$('#tabContainer').load(function () {
    load();
});
});

function load() {
var pathname = window.location.pathname;
var newScroll;
var starPos = document.cookie.indexOf("aspx") + 4;
var endPos = document.cookie.indexOf("@") ;

if (endPos != -1 && starPos != -1) {
    $(window).scrollTop(document.cookie.substring(starPos, endPos));
}
}

function setCookie(c_name, value, exdays) {
var exdate = new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
document.cookie = c_name + "=" + c_value;
} 
```

# php - preg_replace 如何在 PHP 中用 " 包围字符串的 html 属性

> ID：13323723
> 
> 赞同：2
> 
> 时间：2012-11-10T16:21:55.730
> 
> 标签：php, regex, string, replace, preg-replace

我在 PHP 中有一个字符串变量，它的内容是：

```
$var='<SPAN id=1 value=1 name=1> one</SPAN>
<div id=2 value=2 name=2> two</div >';
 .... 
```

我需要一个带有“”的环绕html属性的函数我需要为所有元标记执行此操作

等结果应该是这样的：

```
$var='<SPAN id= "1" value="1" name="1"> one </SPAN>
<div id="2" value="2" name="2" > two</div >';
 ... 
```

我需要将所有 =[az][AZ][1-9] 替换为 ="[az][AZ][1-9]"。我需要 preg_replace 的正则表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:27:37.557

您需要将其全部用单引号括起来，如下所示：

```
$myHtml='<SPAN id="1" value="1" name="1"> one </SPAN>
    <div id="2" value="2" name="2" > two</div >'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:18:44.130

它是[解决方案](https://stackoverflow.com/questions/13325320/php-use-preg-replace-for-replacing-word-with-double-quotes/13325389#13325389)

```
$var = preg_replace('/(?<==)(\b\w+\b)(?!")(?=[^<]*>)/', '"$1"', $var); 
```

感谢 Ωmega，它适用于 IE8

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T16:32:47.680

使用一个[heredoc](http://php.net/heredoc)，它消除了大多数东西的需要，除了`$`：

```
$var = <<<EOL
<span id="1" value="1" name="1">one</span>
etc...
EOL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T17:32:42.100

我将通过以下方式运行字符串[`DOMDocument`](http://docs.php.net/manual/en/class.domdocument.php)：

```
$var='<SPAN id=1 value=1 name=1> one</SPAN>
<div id=2 value=2 name=2> two</div >';

// Create a new DOMDocument and load your markup.
$dom = new DOMDocument();
$dom->loadHTML($var);

// DOMDocument adds doctype and <html> and <body> tags if they aren't
// present, so find the contents of the <body> tag (which should be
// your original markup) and dump them back to a string.
$var = $dom->saveHTML($dom->getElementsByTagName('body')->item(0));

// Strip the actual <body> tags DOMDocument appended.
$var = preg_replace('#^<body>\s*(.+?)\s*</body>$#ms', '$1', $var);

// Here $var will be your desired output:
var_dump($var); 
```

输出：

```
string(85) "<span id="1" value="1" name="1"> one</span>\n<div id="2" value="2" name="2"> two</div>" 
```

请注意，如果`$var`有可能包含实际`<body>`标签，则需要对此代码进行修改。我把它作为练习留给 OP。

# java - 访问数组中的元素

> ID：13323726
> 
> 赞同：0
> 
> 时间：2012-11-10T16:22:12.440
> 
> 标签：java, arrays

这是Java代码片段。

```
class Test{  
    public static void main(String[ ] args){
        int[] a = { 1, 2, 3, 4 };       
        int[] b = { 2, 3, 1, 0 };     
        System.out.println( a [ (a = b)[3] ] );  
    }
} 
```

为什么打印 1？这不是家庭作业！我正在尝试理解 Java。这与 OCA Java 7 考试有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:31:43.127

在您引用的那一刻`a[ ... ]`，`a`仍然指向第一个数组。`b`当索引本身被评估时，有一个to的赋值`a`。所以在那一刻，`a`变为`b`，其中第三项被提取，即`0`。

这`0`用作之前已经找到的数组的索引。这是`a`指向的数组，虽然`a`同时它本身已经改变了。因此它会打印`1`，即使您可能期望`2`.

我认为这就是这个例子试图展示的内容：数组引用已经被评估，并且一旦你在评估索引期间修改数组变量就不会改变。

但我不会在生产代码中使用这个“功能”。很不清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T16:24:23.287

```
System.out.println( a [ (a = b)[3] ] ); 
```

首先，`a`评估 的值 ( `{1, 2, 3, 4}`)。接下来，`a = b`被执行；这将 的值分配`b`给`a`并*返回*的值`b`。`b[3] = { 2, 3, 1, 0 }`是`0`，所以，最终，。`{1,2,3,4}[b[3]] = {1,2,3,4}[0] = **1**`

* * *

要看到这一点，请考虑以下事项：

```
public static void main(String[] args) throws FileNotFoundException {
    int[] a = { 1, 2, 3, 4 };            
    System.out.println( a() [ (a = b())[c()] ] );
}

public static int[] a() {
    System.out.println('a');
    return new int[]{ 1, 2, 3, 4 };
}

public static int[] b() {
    System.out.println('b');
    return new int[]{ 2, 3, 1, 0 };
}

public static int c() {
    System.out.println('c');
    return 3;
} 
```

输出：

```
a
b
c
1 
```

# ruby - 如何在 Ruby 中正确关闭 HTTP 连接

> ID：13323727
> 
> 赞同：4
> 
> 时间：2012-11-10T16:22:17.260
> 
> 标签：ruby, http

我一直在寻找关闭 HTTP 连接的正确方法，但还没有找到任何东西。

```
require 'net/http'
require 'uri'

uri = URI.parse("http://www.google.com")

http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Get.new("/")

http.start
resp = http.request request

p resp.body 
```

到目前为止一切顺利，但现在当我尝试关闭连接时猜测使用哪种方法：

```
http.shutdown   # error
http.close      # error 
```

当我检查时`ri Net::HTTP.start`，文档明确说明

> 调用者负责在完成后关闭它（连接）

我不想使用块形式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T16:32:04.363

关闭连接的方法是`http.finish`。

API使用`net/http`起来特别混乱。使用更高级别的库通常更容易，例如[HTTParty](https://github.com/jnunemaker/httparty)或[REST Client](https://github.com/archiloque/rest-client)，它们将提供更直观的 API 并为您处理较低级别的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T16:29:23.267

> 如果给出了可选块，则将新创建的 Net::HTTP 对象传递给它并在块完成时关闭。

[来自 ruby​​-doc.org](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-start)

# xcode - 在构建时更新 dSYM 中的 CFBundleShortVersionString？

> ID：13323728
> 
> 赞同：6
> 
> 时间：2012-11-10T16:22:23.277
> 
> 标签：xcode

我在我的项目中使用它作为构建阶段：

```
export PLISTBUDDY="/usr/libexec/PlistBuddy"

export INFO="${CODESIGNING_FOLDER_PATH}/Info.plist"
export RXREVISION=`git describe --tags | perl -pi -E "s/[^-]+\-([^-]+).*/\1/"`
export RXVERSION=`git describe --tags | perl -pi -E "s/([^-]+)\-[^-]+.*/\1/"`
$PLISTBUDDY $INFO -c "add CFBundleVersion string $RXREVISION"
$PLISTBUDDY $INFO -c "set :CFBundleVersion $RXREVISION"
$PLISTBUDDY $INFO -c "add CFBundleShortVersionString string $RXVERSION"
$PLISTBUDDY $INFO -c "set :CFBundleShortVersionString $RXVERSION" 
```

这非常适合更新已构建应用程序的 Info.plist 中的构建修订版，并且不会改变我的源代码树。

我尝试将我的更新版本脚本放在最后和链接阶段之前。无论哪种方式，它都能够影响对已构建应用程序的更改，但 dSYM 是从原始源代码树构建的。

构建的应用程序和构建的 dSYM 之间的版本号不匹配是一个问题。（HockeyApp 在这里抛出错误。）

如果我在源代码树中更新 Info.plist，我需要处理它的变化。这给我留下了两个我可以看到的选择：

1.  将 Info.plist 置于源代码管理之下，并让脚本直接对其进行编辑。但这意味着我需要在每次构建后检查更改。
2.  忽略 Info.plist，让脚本直接编辑它。但是在 Info.plist 中还有很多我**想要**在源代码控制下的东西。

我怎样才能让 dSYM 中的版本也自动更新，而不必处理我的源代码树中的 Info.plist 更改每个构建？

另外，切线：我如何查看 dSYM 中的版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-28T10:06:28.397

接受的答案是正确的，但没有提供有关如何修改 dsym 的 plist 的实际详细信息。将以下行添加到构建脚本中修改 dsym 中的 plist：

```
cd "$BUILT_PRODUCTS_DIR/$PRODUCT_NAME.app.dSYM/Contents"
$PLISTBUDDY -c "Set CFBundleVersion $RXREVISION" Info.plist 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-30T14:33:35.737

这是我正在使用的“从 git 设置 CFBundleVersion”构建阶段的完整脚本：

```
APP_INFO_PLIST="${TARGET_BUILD_DIR}/${INFOPLIST_PATH}"
DSYM_INFO_PLIST="${DWARF_DSYM_FOLDER_PATH}/${DWARF_DSYM_FILE_NAME}/Contents/Info.plist"

BUILD_NUMBER=`git rev-list HEAD --count`

/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $BUILD_NUMBER" "$APP_INFO_PLIST"
if [ -f "$DSYM_INFO_PLIST" ] ; then
    /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $BUILD_NUMBER" "$DSYM_INFO_PLIST"
fi 
```

（注意它必须在 Xcode 6+ 中的“Copy Bundle Resources”*之后*运行。在 Xcode 10 的新构建系统中，确保将 Info.plist 文件指定为其输入文件的一部分。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T13:59:39.673

dSYM 包在根文件夹中也有一个 info.plist，具有相似的值。你也可以用类似的方式修改它。

另一种选择是在额外`.xcconfig`文件中定义版本号，并将 info.plist 中的版本号包含在其中，请参见[此处](http://support.hockeyapp.net/kb/how-tos/how-to-do-versioning-for-beta-versions-on-ios-or-mac)。

`info.plist`然后，您还可以通过使用多个独立文件并在构建设置中引用不同文件来决定您想要哪种版本控制或发布或测试构建，`.xcconfig`并且不包括在源代码控制下用于测试构建的文件。

一般来说，我建议对每个版本更改进行提交，因为这使得代码真正可重现并且在源代码控制系统中唯一地标识它。

除此之外，Apple 指定设置`CFBundleVersion`为“单调增加的字符串，由一个或多个句点分隔的整数组成”，请参见[此处](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW1)。`CFBundleShortVersionString`是您的营销版本，例如您的目标是在版本上工作`3.0`。

那么如何为发布构建执行以下操作：`CFBundleVersion`使用新的构建号和`CFBundleShortVersion`新的营销版本进行更新，`3.0 Beta 1`并提交它们，然后标记该提交以进行发布。版本号与任何其他元数据一样是您的源的一部分，特别是如果版本号还用于触发特定代码以实现兼容性、数据库升级或其他事情（通常会这样做）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T20:31:32.257

我创建了一个脚本，我可以将其放入任何 Xcode 项目文件夹并从运行脚本调用，该脚本将更新应用程序的 Info.plist 和 dSYM，以便内部版本号匹配。然后可以将其上传到 HockeyApp 和 iTunes Connect for TestFlight 和 App Store 等服务。

我更喜欢在 Xcode 的 Run Script 之外管理脚本，因为我可以更轻松地编辑它并保持项目文件的内容更小。我还可以独立于项目文件对脚本进行版本控制。

此`Build Number`脚本中的 仅使用当前日期设置。还有其他方法可以生成唯一的内部版本号。Jared Sinclair 的博客介绍了一种方法，该博客使用 Git 哈希进行最新提交。我正在使用的脚本使用的时间戳可以缩短到一分钟。我发现知道何时创建构建并将构建号加倍作为时间戳很有用，我可以立即看到日期。就我的目的而言，它足够独特。

[http://blog.jaredsinclair.com/post/97193356620/the-best-of-all-possible-xcode-automated-build](http://blog.jaredsinclair.com/post/97193356620/the-best-of-all-possible-xcode-automated-build)

```
#!/bin/sh
set -e

# Purpose: Updates Info.plist for app and dSYM to a unique value for each build.

# Usage:
# Add as a Run Script in Xcode Build Phases

# UPDATE_SCRIPT=${PROJECT_DIR}/update_build_number.sh
# if [ -f ${UPDATE_SCRIPT} ]; then
#     sh ${UPDATE_SCRIPT}
# fi

BUILD_NUMBER=`date "+%Y.%m.%d.%H%M"`
APP_INFO_PLIST=${TARGET_BUILD_DIR}/${INFOPLIST_PATH}
DSYM_INFO_PLIST=${DWARF_DSYM_FOLDER_PATH}/${DWARF_DSYM_FILE_NAME}/Contents/Info.plist

if [ -f ${APP_INFO_PLIST} ]; then
    /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $BUILD_NUMBER" "${APP_INFO_PLIST}"
    echo "Updated ${APP_INFO_PLIST}"
else
    echo "Could not find ${APP_INFO_PLIST}"
fi

# Only the Release Configuration creates the dSYM
if [ "${CONFIGURATION}" = 'Release' ]; then
    if [ -f ${DSYM_INFO_PLIST} ]; then
        /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $BUILD_NUMBER" "${DSYM_INFO_PLIST}"
        echo "Updated ${DSYM_INFO_PLIST}"
    else
        echo "Could not find ${DSYM_INFO_PLIST}"
    fi  
fi 
```

# javascript - 使用全文匹配未找到匹配项

> ID：13323736
> 
> 赞同：0
> 
> 时间：2012-11-10T16:23:16.087
> 
> 标签：javascript, jquery, mysql, post

我正在使用 $.post 函数来获取数据

```
var dropbox = $('#dropbox').text(); 
```

匹配我的查询。

```
if(dropbox ){
        $.post("account_main.php", 

          {dropbox: dropbox},
          function(data) {

               $('#demo').html(data);
          });       
        $("#alert_team").show();
        } 
```

从发布请求中获得的数据只是名字姓氏和头衔，仍然不完全匹配。这意味着我在运行查询时得到其他结果，我正在使用 FULLTEXT 匹配，见下文

```
 $query1 = mysql_query("SELECT * FROM `users`WHERE MATCH (firstname, lastname, title) 
            AGAINST ('$dropbox' IN BOOLEAN MODE) LIMIT 1"); 
```

我该怎么做才能使从 $.post 请求中提取的名字、姓氏和标题中的值与我的数据库中包含相同值的列相匹配？

# java - GWT HTMLPanel UiBinder XML 的规范在哪里？

> ID：13323738
> 
> 赞同：1
> 
> 时间：2012-11-10T16:23:27.597
> 
> 标签：java, gwt, xsd, uibinder

我正在尝试查找可以添加到哪些子元素和属性：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder" xmlns:gwt="urn:import:com.google.gwt.user.client.ui">
    <gwt:HTMLPanel whatAttribsGoHere="???">
        <!-- ??? -->
    </gwt:HTMLPanel>
</ui:UiBinder> 
```

我发现[了这个*类似*的问题](https://stackoverflow.com/questions/10497965/xml-schema-for-gwt-uibinder)，但是当我转到[推荐的链接](http://code.google.com/p/google-web-toolkit/source/browse/releases/2.0/user/src/com/google/gwt/uibinder/resources/UiBinder.xsd?r=6837)时，我没有看到任何提及`HTMLPanel`。谁能指出我正确的方向？提前致谢！

**编辑**：我不是在寻找任何 GWT 专家/谷歌员工来简单地*告诉*我哪些元素/属性适合这里，我正在寻找我可以自己去哪里找到这些东西*！*我这样说是因为我可以很容易地对任何其他小部件提出相同的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:01:23.843

我已经发布了关于解释一般规则的[链接问题的答案。](https://stackoverflow.com/questions/10497965/xml-schema-for-gwt-uibinder)`HTMLPanel`虽然可能是 UiBinder 中没有记录使用的罕见小部件之一，但它是 UiBinder 最强大的小*部件*。

如果您想了解可以放入哪些特定属性和内容`HTMLPanel`（除了*bean setter 属性*），您可以查看`HTMLPanelParser`. 你会看到你可以使用一个`tag`与类似命名的构造函数参数匹配的属性，并且内容是 HTML 和小部件的混合（UiBinder 会将小部件替换为传递给`HTMLPanel`构造函数的 HTML 字符串中的占位符 HTML 元素，然后调用`addAndReplaceElement`将子小部件放在面板中）。

# matlab - 及时评估 matlab 代码特定部分的性能？

> ID：13323740
> 
> 赞同：1
> 
> 时间：2012-11-10T16:23:35.680
> 
> 标签：matlab, performance-testing

我希望能够测量我的代码的性能并找到缺少的部分。在Matlab中这样做的正确方法是什么？我知道我可以只使用 tic: 和 toc; 功能来查看时间流逝，但可能有更方便的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:45:06.230

最方便的方法是使用 GUI 分析器工具。您可以在下拉菜单中找到它（Desktop->Profiler），或者您可以通过键入从命令行启动它`profile viewer`。然后在窗口顶部输入函数的名称，点击“运行”，然后等待代码运行完毕。单击链接将带您进入相应的功能，您可以在其中逐行查看运行时。

请注意，运行速度非常快且仅进行少量迭代的时序代码可能会很棘手；对于这些情况，您可能需要使用[`timeit`](http://www.mathworks.com/matlabcentral/fileexchange/18798)Matlab File Exchange 中的函数。

![在此处输入图像描述](../Images/dd04d038e1d9f57a62c59fbfcb55dcf1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:27:43.593

[分析工具](http://www.mathworks.fr/fr/help/matlab/ref/profile.html)报告每个函数和程序中每一行代码所花费的时间。

实现需要更长的时间，因此如果您正在分析一小段代码，tic-toc 会做得更好。

# html - 注册表 - 注意：未定义索引

> ID：13323742
> 
> 赞同：1
> 
> 时间：2012-11-10T16:23:51.687
> 
> 标签：html, forms, registration, php

这是我的注册表：

```
<p>Please fill out all fields</p><br>

<form method="POST" action="login/login.php">   
<!-- name is the VARIABLE -->
Username: <input type="text" name="username"></br>
Password: <input type="password" name="password"></br>
Email: <input type="text" name="email"></br>    
</form> 

</br>
</br>
<form method="POST" action="login/process.php" "> </br>
<input type='submit' value='submit registration'/>
</form> 
```

这是我的 process.php 文件：

```
<?php 
print "<center>";
$Username = $_POST["username"]; 
$Password = $_POST["password"];
$Email  = $_POST["email"];
?>

<?php
include "../shopdb/connection.php";

$query="INSERT INTO USERS (ID, Username, Password, Email) VALUES ('','$Username','$Password','$Email')";

mysql_query($query,$connect);

?> 
```

我不断收到此错误：

> 注意：未定义索引：第 3 行 C:\xampp\htdocs\IIS\login\process.php 中的用户名
> 
> 注意：未定义索引：第 4 行 C:\xampp\htdocs\IIS\login\process.php 中的密码
> 
> 注意：未定义索引：第 5 行 C:\xampp\htdocs\IIS\login\process.php 中的电子邮件
> 
> 您已成功连接到数据库。

（底部消息是我添加的连接脚本的一部分，以显示我已连接到数据库）..

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:28:16.497

您的提交按钮与您的文本字段所在的表单不同。这应该有效：

```
<form method="POST" action="login/process.php">
    <!-- name is the VARIABLE -->
    Username: <input type="text" name="username"></br>
    Password: <input type="password" name="password"></br>
    Email: <input type="text" name="email"></br>
    <input type='submit' value='submit registration'/>
</form> 
```

顺便说一句，您应该在使用变量**之前**检查它们是否存在：

```
if(isset($_POST['username'])){
    echo 'Variable is set and I can use it!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:28:06.590

您的`submit`输入需要与`<form>`其他输入相同。

# visual-studio - 用于显示选项卡列表的 Visual Studio 快捷方式

> ID：13323743
> 
> 赞同：4
> 
> 时间：2012-11-10T16:24:13.917
> 
> 标签：visual-studio, keyboard-shortcuts

我不知道是否有更好的方法来问这个问题。但是，我的意思是使用键盘快捷键打开显示选项卡列表（见下文）的小向下箭头

![当前打开的文件列表](../Images/247265ac76069e1a86bccd307413099a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T17:38:43.977

您正在寻找的命令是`Window.ShowEzMDIFileList`，它可以通过++访问（*至少在我的机器上*）`Ctrl``Alt``Down Arrow`

![在此处输入图像描述](../Images/6331ad6fde4e2f8a8fb313e239c93914.png)

# javascript - Phonegap、jQueryMobile 和 Web 服务

> ID：13323747
> 
> 赞同：5
> 
> 时间：2012-11-10T16:24:23.520
> 
> 标签：javascript, android, cordova, jquery-mobile

我使用我创建的 ASP.Net Web 服务，使用 Android SDK 和 java 包创建了一个原生 Android 应用程序，它运行良好。但现在我想做这个跨平台的。我听说 Phonegap 和 jQuery Mobile 会对此有所帮助，但我还是有点困惑。

1.  是否需要托管使用 Javascript 的 HTML 文件才能正常工作？或者
2.  我可以在我的应用程序中包含 HTML 和 js 文件并调用 Web 服务方法吗？

有人可以指导我吗？

我的演示代码是

JAVA脚本

```
<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
 <script src="jquery-1.7.2.min"></script>
 <script src="jquery.mobile-1.1.1.min.js"></script>
<script type="text/javascript" charset="utf-8"/></script>

<link rel="stylesheet" src="jquery.mobile-1.1.1.min.css"/>
  <script type="text/javascript">

function onDeviceReady() {}
document.addEventListener("deviceready", onDeviceReady, false);

function LoginButton_onclick() {
    $.ajax({
type: "POST",
contentType: "application/json; charset=utf-8",
dataType: "json",
    url:    "http://182.72.192.18/webservicedemo/service.asmx/HelloWorld",
    data: '{}',
    success: function(msg) {
   jsonArray = $.parseJSON(msg.d);
    var $ul = $( '<ul id="details">' );
    for(i=0; i < jsonArray.length; i++)
    {
  $("#details").append('<li id="'+i+'" name="head" >'+jsonArray[i].name+'</li>' );
} $('#details').listview('refresh');
    },
    error: function(msg) {
         alert("Error");
    }
});

</script> 
```

HTML

```
<div data-role="page" id="Page1">
<h1>DEMO PAGE</h1>

<div id="DEMO"> 
<input id="LoginButton" type="button" value="GET DATA" onclick="LoginButton_onclick()" /></div>

<div id="divList" data-role="content">
<ul id="details" data-role="listview" data-inset="true"></ul>
</div>

</div>     
</body> 
```

我的 ASP.NET Web 服务是

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class Service : System.Web.Services.WebService{
JavaScriptSerializer serializer = new JavaScriptSerializer();
public Service () {}

[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string HelloWorld() {

    List<clsDetails> deailsList = new List<clsDetails>{
    new clsDetails(1,"BOY","SCHOOL"),
    new clsDetails(2,"GIRL","COLLEGE"),
    new clsDetails(3,"MAN","OFFICE")};

    string detail = serializer.Serialize(deailsList);
    return detail;
}
} 
```

如果我将 html 文件与我的网络服务一起托管，它会为我提供结果。但是当我尝试使用来自 android 应用程序的本地 html 文件进行调用时，它失败了。我不知道出了什么问题。

谁能告诉我这里出了什么问题？看这里是我从网络服务获得的响应，我将其解析为 JSON

![与 WEBSERVICE 一起托管的 HTML](../Images/a0073a4d458f572a5ee710351c8c4b15.png)

phonegap.xml

```
<phonegap>  
<access origin="http://182.72.192.18" /> 
</phonegap> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T16:40:33.770

您必须使用本地 html 并使用 XHR 调用您的 Web 服务来获取服务器数据，然后在您的 html 中显示您的 Web 服务的数据。

看到代码后编辑：

问题是网址。你不能使用localhost，因为如果你在一个设备上测试，localhost是设备，而设备没有webservice，你必须使用你机器的本地iP。[http://192.168.1.XXX:1000/WebSite2/Service.asmx/HelloWorld](http://192.168.1.XXX:1000/WebSite2/Service.asmx/HelloWorld)

编辑2：我刚刚测试了你的代码并让它为我工作，只需改变它。jsonArray[i].Result 对我不起作用，它返回未定义，但您可以访问 json 对象的每个属性，在示例中我使用了名称。并且把refresh放在for外面，你只需要在完成的时候刷新，而不是每次都刷新，把the`;`放在最后。

```
for(i=0; i < jsonArray.length; i++)
    {
  $("#details").append('<li id="'+i+'" name="head" >'+jsonArray[i].name+'</li>' );

}
$('#details').listview('refresh'); 
```

如果它仍然不起作用，请检查您是否将域[phonegap 白名单指南列入白名单](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)

完整的工作代码

```
<!DOCTYPE html>
<html>
    <head>
        <title>DEMO</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <title>DEMO</title>
        <script type="text/javascript" charset="utf-8">

            function LoginButton_onclick() {
                $.ajax({
                       type: "POST",
                       contentType: "application/json; charset=utf-8",
                       dataType: "json",
                       url:    "http://182.72.192.18/webservicedemo/service.asmx/HelloWorld",
                       data: '{}',
                       success: function(msg) {
                       jsonArray = $.parseJSON(msg.d);
                       var $ul = $( '<ul id="details">' );
                       for(i=0; i < jsonArray.length; i++)
                       {
                       $("#details").append('<li id="'+i+'" name="head" >'+jsonArray[i].name+'</li>' );
                       }
                       $('#details').listview('refresh');
                       },
                       error: function(msg) {
                       alert("Error");
                       }
                       });

            }

            </script>
        </head>
        <body>
            <div data-role="page" id="Page1">
                <h1>DEMO PAGE</h1>

                <div id="DEMO">
                    <input id="LoginButton" type="button" value="GET DATA" onclick="LoginButton_onclick()" /></div>

                <div id="divList" data-role="content">
                    <ul id="details" data-role="listview" data-inset="true"></ul>
                </div>

            </div>
        </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T08:45:46.547

您遇到的问题是您无法从移动设备访问您的网络服务，只有当您使用计算机的模拟器运行程序时。你必须这样做：

*   将您的网络服务放在服务器中，而不是在本地主机中。
*   编辑 res/xml/cordova.xml 没有跨域问题。

    ```
    <!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
    <!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
    <!-- <access origin=".*"/> Allow all domains, suggested development use only --> 
    ```

通过这些步骤，您的程序将完美运行。

**编辑**

我已经看到您在 WS 中返回的类型不是 JSON 样式。您的响应介于 XML 和 JSON 之间。当您获得 WebMethod 的正确返回值时，一切都会好起来的。

您必须使用最新版本的 Cordova 和 jQM。看到您的 jQM CSS 和 JS 在版本中不匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T23:35:28.200

您需要包含显示数据的 HTML 文件 + 使用您的应用程序调用 Web 服务的 JS。通过数据注入（例如通过 XHR 调用的 JSON 或 XML），您可以从 Web 服务中提取数据。这意味着您的 Web 服务应该以 JSON 或 XML 格式输出请求的数据，以便您的 HTML + JS 能够处理和显示来自您的 Web 服务的数据。您可以使用 PhoneGap SDK 甚至是 PhoneGap Build 来做到这一点。

我个人喜欢的一个简单示例可以在这里找到：[http](http://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/) ://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/ 。它不是 ASP.NET，而是与 PHP / MySQL 一起工作，但我认为概念基本相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T09:06:57.563

这是我发现的一个很好的例子[http://www.idesigncity.co.uk/how-to-fetch-json-data-from-phonegap](http://www.idesigncity.co.uk/how-to-fetch-json-data-from-phonegap) 通常 JSON 或 XML 调用将是你的答案。在那里下载zip

# css - CSS - 选择第三个 DL

> ID：13323750
> 
> 赞同：1
> 
> 时间：2012-11-10T16:24:40.980
> 
> 标签：css, css-selectors

我的标记是

```
<div class="gallery">
 <dl class="item">content 1</dl>
 <dl class="item">content 2</dl>
 <dl class="item">content 3</dl>

 <br style="clear: both">

 <dl class="item">content 4</dl>
 <dl class="item">content 5</dl>
 <dl class="item">content 6</dl>
</div> 
```

现在我想选择列表中的第三个 DL。**content 3**和**content 6**，但是这个 css 只选择**content 3**而不是**content 6**。“dl”之间的“br”使某些东西损坏。

```
.gallery :nth-child(3) {
    margin-right: 0;
} 
```

有任何想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:28:41.223

`dl:nth-of-type(3n)`改为使用排除`br`：

```
.gallery dl:nth-of-type(3n) {
    margin-right: 0;
} 
```

或者，在此之后使用另一条`:nth-child()`规则将许可应用于下一个`dl`，并删除它，`br`因为它不需要：

```
.gallery dl:nth-child(3n) {
    margin-right: 0;
}

.gallery dl:nth-child(3n+1) {
    clear: both;
} 
```

# windows-8 - MessageDialog 关闭弹出窗口

> ID：13323752
> 
> 赞同：0
> 
> 时间：2012-11-10T16:24:53.337
> 
> 标签：windows-8, popup, microsoft-metro, windows-store-apps, messagedialog

在我的**弹出**窗口（包含游戏选项控件）中，我有“重置高分”按钮。按钮触发一个带有文本块“你确定...”和两个按钮“是”和“否”的**MessageDialog 。**但是，当 MessageDialog 打开时，Popup 会关闭。你知道如何让弹窗还活着吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T20:44:45.450

我能够使用`Action`委托作为`MessageDialog`关闭时的回调来解决这个问题。

关键是在函数中的`await`on之后调用 Action 。`MessageDialog``ShowAsync``async`

另一个关键是关闭并打开您的弹出窗口以`IsLightDismissEnabled`实际控制。

XAML：

```
<Popup
    IsLightDismissEnabled="{Binding IsLightDismiss, Mode=TwoWay}"
    IsOpen="{Binding IsPopupOpen, Mode=TwoWay}"> 
```

视图模型：

```
private bool isPopupOpen;
public bool IsPopupOpen
{
    get { return this.isPopupOpen; }
    set { this.SetProperty(ref this.isPopupOpen, value); }
}

private bool isLightDismiss;
public bool IsLightDismiss
{
    get { return this.isLightDismiss; }
    set { this.SetProperty(ref this.isLightDismiss, value); }
}

protected void ShowDialog()
{
    this.IsLightDismiss = false;
    this.IsPopupOpen = false;
    this.IsPopupOpen = true;
    Action showPopup = () => {
        this.IsLightDismiss = true;
        this.IsPopupOpen = false;
        this.IsPopupOpen = true;
    };
    ShowMessageDialog("message", "title", showPopup);
} 
```

```
private async void ShowMessageDialog(string message, string title, Action callback)
{
    var _messageDialog = new MessageDialog(message, title);
    await _messageDialog.ShowAsync();
    callback();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:51:21.657

设置你`Popup`的`IsLightDismissEnabled`属性`false`来实现这一点。

```
popup.IsLightDismissEnabled = false; 
```

# recursion - 我可以在方案中使这个迭代过程递归吗？

> ID：13323753
> 
> 赞同：3
> 
> 时间：2012-11-10T16:25:18.357
> 
> 标签：recursion, process, scheme, procedure, iteration

我在 Scheme 中有这个迭代过程。（其实我真的不知道它到底是个什么样的过程）

```
(define (contains-double? lst)
 (cond
  ((or (null? lst) (null? (cdr lst))) #f)
  ((eq? (car lst) (cadr lst)) #t)
  (else (contains-double? (cdr lst))))) 
```

它检查是否有 2 个相同的数字彼此相邻。例如：

```
(contains-double? '(1 2 3 3 3 5 2))    => #t
(contains-double? '(1 2 3 5 3 2))      => #f
(contains-double? '(1 2 3 2 2))        => #t 
```

我可以使这个过程递归吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:30:23.183

问题中的过程是递归的（`contains-double?`正在调用自身），但是它生成的过程是迭代的，因为该过程是用尾递归风格编写的——这意味着在过程从递归调用返回后，除了 return 之外，没有什么可做的它的价值。

此过程生成的过程可以通过删除尾递归来进行递归：

```
(define (contains-double? lst)
  (if (or (empty? lst) (empty? (rest lst)))
      #f
      (or (contains-double? (rest lst))
          (= (first lst) (second lst))))) 
```

# git - git 有效替换邮箱地址

> ID：13323759
> 
> 赞同：3
> 
> 时间：2012-11-10T16:25:50.153
> 
> 标签：git, privacy, git-filter-branch

我在 git 存储库上工作了一段时间，并选择与其他人共享它。在将存储库公开之前，我已使用我的个人电子邮件地址进行提交，并尝试将其设置为另一个地址。我已经阅读了一些线程，例如[SO 750172](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)并且它适用于`git log`，但我仍然能够在 grep`.git/logs/HEAD`和中找到我的旧电子邮件`.git/logs/refs/heads/master`。

有没有办法从那里删除它，也不会丢失我的历史记录？

目前只有一个存储库副本，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T17:40:20.303

reflogs 将包含指向旧版本提交的指针，从您重写历史记录以更改您的电子邮件地址之前开始，这就是旧电子邮件地址在其中仍然可见的原因。这些引用在您的存储库中是本地的，这些引用和它们指向的提交都不会被推送到远程存储库。因此，您已经清理了将要公开的历史记录。

如果您确实确定不需要返回并且还想清理 reflog，则可以运行：

```
git reflog expire --expire=now --all 
```

但这将删除一个为了安全而存在的功能，并且绝对没有必要。

# networking - Spymemcached 客户端和超时错误

> ID：13323760
> 
> 赞同：3
> 
> 时间：2012-11-10T16:25:58.997
> 
> 标签：networking, spymemcached

我遇到了 spymemcached 客户端的一个奇怪问题。假设我在一个公共 ip 为 x 且 memcache 正在此框中运行的盒子中，当我在同一个盒子上运行 spymemcached 客户端并使用它的 ip 作为 x 连接到 memcache 时，我收到超时错误。当我将 x 替换为 127.0.0.1 时，一切正常。同时，如果我从另一个盒子运行代码并以 x 身份连接到 memcache 盒子，一切正常。这里发生了什么？

# php - PhP 验证未正确退出

> ID：13323763
> 
> 赞同：0
> 
> 时间：2012-11-10T16:26:08.900
> 
> 标签：php, html

我正在尝试整理我的验证，下面是我的代码，我已经尝试了很多东西，包括将它变成一个`if else`结构，但是无论我用它测试什么总是返回没有电子邮件的错误，我不知道为什么。我什至尝试`exit;`从第一个 if 中删除，但仍然没有显示任何电子邮件。

```
if(!$reg_username){

     $reg_error = "You have not entered a Username.";
      $_SESSION['error'] = $reg_error;
      header("Location: register.php");
      exit;
 }

 if (!$reg_email){

     $reg_error = "You have not entered an Email.";
      $_SESSION['error'] = $reg_error;
      header("Location: register.php");
      exit;

 }
 if (!$reg_password){

     $reg_error = "You have not entered a Password.";
      $_SESSION['error'] = $reg_error;
      header("Location: register.php");
      exit;
 }
 if (!$reg_password_1){

     $reg_error = "You have not entered your Verification Password.";
      $_SESSION['error'] = $reg_error;
      header("Location: register.php");
      exit;
 } 
```

有任何想法吗？

谢谢

编辑：这是其余的代码

```
$reg_username = $_POST['reg_username'];
     $reg_email = $_POST['reg_email'];
     $reg_password = $_POST['reg_password'];
     $reg_password_1 = $_POST['reg_password_1'];
     $reg_dob_day = $_POST['reg_dob_day'];
     $reg_dob_month = $_POST['reg_dob_month'];
     $reg_dob_year = $_POST['reg_dob_year'];

     include_once "connect_to_mysql.php";
     $reg_username_length = "";
     $reg_password_length = "";
     $reg_dob_day_length = "";
     $reg_dob_year_length = "";

     $reg_email = stripslashes($reg_email); 
     $reg_password = stripslashes($reg_password); 
     $reg_password_1 = stripslashes($reg_password_1); 
     $reg_dob_day = stripslashes($reg_dob_day); 
     $reg_dob_month = stripslashes($reg_dob_month); 
     $reg_dob_year = stripslashes($reg_dob_year); 

     $reg_email = strip_tags($email);
     $reg_password = strip_tags($password);
     $reg_password_1 = strip_tags($reg_password_1);
     $reg_dob_day = strip_tags($reg_dob_day); 
     $reg_dob_month = strip_tags($reg_dob_month); 
     $reg_dob_year = strip_tags($reg_dob_year);

     $reg_username = mysql_real_escape_string($reg_username);
     $reg_email = mysql_real_escape_string($reg_email);
     $reg_password = mysql_real_escape_string($reg_password);
     $reg_password_1 = mysql_real_escape_string($reg_password_1);
     $reg_dob_day = mysql_real_escape_string($reg_dob_day);
     $reg_dob_month = mysql_real_escape_string($reg_dob_month);
     $reg_dob_year = mysql_real_escape_string($reg_dob_year);

     if(!$reg_username){

         $reg_error = "You have not entered a Username.";
          $_SESSION['error'] = $reg_error;
          header("Location: register.php");
          exit;
     }

     if (!$reg_email){

         $reg_error = "You have not entered an Email.";
          $_SESSION['error'] = $reg_error;
          header("Location: register.php");
          exit;
     }
     if (!$reg_password){

         $reg_error = "You have not entered a Password.";
          $_SESSION['error'] = $reg_error;
          header("Location: register.php");
          exit;
     }
     if (!$reg_password_1){

         $reg_error = "You have not entered your Verification Password.";
          $_SESSION['error'] = $reg_error;
          header("Location: register.php");
          exit;
     }
     if ($reg_password != $reg_password_1){

         $reg_error = "Your Verification Passwords do no match.";
          $_SESSION['error'] = $reg_error;
          header("Location: register.php");
          exit;
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:37:32.497

您的以下行：

```
$reg_email = strip_tags($email); 
```

应该是这样的：

```
$reg_email = strip_tags($reg_email); 
```

看来您只是输错了变量名。

# ruby - 编写没有重复的 x 数字的随机数组的代码

> ID：13323766
> 
> 赞同：1
> 
> 时间：2012-11-10T16:26:49.433
> 
> 标签：ruby

> **可能重复：**
> [如何在 Ruby 中生成一个包含 n 个唯一随机数的列表？](https://stackoverflow.com/questions/119107/how-do-i-generate-a-list-of-n-unique-random-numbers-in-ruby)

我正在尝试创建一个随机生成的 x 数字数组，没有重复。我选择数字——一次一个——然后将它们与第一个数字进行比较，然后再与数组中的所有其他数字进行比较。我看过其他问题，但我是初学者，解释有点过头了——但我正在学习。

这是我的代码。我认为“希望”正在发生的事情用大写字母解释。我的问题在最后。

```
array = []
array[0] = rand(10)  #THIS CHOOSES FIRST NUMBER (FN) AND PUTS IT IN THE FIRST ARRAY SPOT
p "fn = #{array[0]}"

for i in 1..6  #START OF FOR LOOP TO GET 6 NUMBERS IN THE ARRAY - WHY 6?  THE FIRST NUMBER THAT POPPED IN MY HEAD
  p "Iteration #{i} -------------------------"  # THIS IS JUST SO I KNOW WHERE I AM IN THE LOOPS

  @x = rand(10)  #THIS CHOOSES THE NEXT NUMBER AND ALL NUMBERS AFTER
  array.each do |uc|  # THIS IS THE LOOP THAT COMPAIRS ALL NUMBERS
    @type = @x == uc ? "yes" : "no"  #DOES THE CHOOSEN NUMBER EQUAL ANY NUMBER IN THE ARRAY
    p "does #{uc} = #{@x}? #{@type}"
    if @type == "yes"  # IF THE COMPAIR IS TRUE, I DONT WANT ANY THING DONE.  IT WILL CYCLE THRU AND GET A NEW NUMBER
      i = 1 
      p "YES #{@x} = #{uc}"
      break
    end  #END OF IF YESS
  end  #END OF ARRAY EACH

  if @type == "no"  #IF NO, PUT NEXT NUMBER (@X) INTO THE NEXT ARRAY SPOT.
    p "in last if type= #{@type}"  #THESE STATMENTS JUST PRINT OUT THE DIFFERENT VARIABLES SO I KNOW I AM GETTING WHAT I EXPECT
    p "in last if x = #{@x}"
    p "in last if i = #{i}"
    @x = array[i]  #THIS "SHOULD" FILL THE NEXT ARRAY SPOT - BUT DOESNT SEEM TO
    p "#{array[i]} is in the array"  #THIS PRINT OUT IS BLANK - STATEMENT ABOVE DID NOT WORK.
    p array[i]
  end  #END OF IF NO
end  #END OF FOR LOOP 
```

# ember.js - 带有reopenClass 的Ember.js 模型上的Jasmine 测试

> ID：13323767
> 
> 赞同：2
> 
> 时间：2012-11-10T16:26:53.990
> 
> 标签：ember.js, jasmine

我的模型看起来像：

```
 App.MyUser = Ember.Object.extend();
  App.MyUser.reopenClass({
    attribute1: '',
    attribute2: '',
    getFunction: function() {
       ...
    },
    setFunction: function(foo) {
       ...
    }
  }); 
```

如何测试茉莉花中的功能？

```
 describe( "The user model", function () {  
               var user = null;
            App = Ember.Application.create();
            beforeEach(function(){
                user = App.MyUser.create();      
            });

            afterEach(function(){
                user = null;
            });

            it("should have an get function", function(){
                expect(user.getFunction).toBeDefined();
            });
        }); 
```

但我总是得到：

```
 Expected undefined to be defined. 
```

如果我这样做我的模型：

```
 App.MyUser = Ember.Object.extend({...... 
```

没有reopenClass 它工作正常。但我需要使用reopenClass。那么它是怎样工作的？

# iphone - 如何从 airprint 获得打印支持不启用打印机

> ID：13323771
> 
> 赞同：1
> 
> 时间：2012-11-10T16:27:19.027
> 
> 标签：iphone, objective-c, ios, ipad, airprint

我有[Posiflex](http://www.posiflex.com/english/01_products/02_detail.php?pid=92&xid=232)打印机。据我所知，它没有启用 AirPrint。而且它也没有wifi。我需要做的是连接到打印机并使用安装在我的 iPad (IOS 5) 中的启用 AirPrint 的应用程序进行打印。

我在网上搜索，但找不到任何有希望的解决方案。

我发现[xPrintServer](http://www.pcworld.com/article/248441/airprint_to_almost_any_printer.html)可以用来解决我的问题。但不幸的是它不[支持](http://www.lantronix.com/it-management/xprintserver/xprintserver-supported-printers.php)Posiflex 打印机。

还有另一种[解决方案](http://www.aramistech.com/tips-tricks/enable-airprint-in-windows-and-use-any-printer/)也需要 PC。使用该 iPad 可以通过 PC 连接到打印机，并且 PC 需要启动并运行才能进行打印，这是不可接受的。有人可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:30:08.377

这样的打印机不需要任何特殊的驱动程序，您可以轻松地手动制作它们（定义纸张宽度，每行字符等）。本打印机使用 Epson 标准转义码 - ESC/POS。您需要了解过去我们使用优质点阵打印机时的打印方式。由于打印机有以太网端口，它允许您将纯 ascii 文本（加上一些转义码）发送到 tcp/ip 端口，您将打印它。

在[文档](http://www.posiflex.com/upfiles/USPP8KA0.pdf)中，您会发现：

> 任何连接在同一网络中的 PC 都可以使用 TCP/IP 来使用 PP-8000L，就像直接连接本地打印机一样。因此，对于通过“超级终端”等工具进行直接 I/O 控制，所有适用于串行或并行接口模型的命令都可以在 PP-8000L 上以与 PP-8000 相同的方式工作，除了端口必须是 TCP/IP 和 IP 地址打印机的。

编辑：对于 ESC/POS，您可以使用 Epson 高级 API： http: [//pos.epson.com/mobilesdks/index.htm](http://pos.epson.com/mobilesdks/index.htm) 我不确定它是否适用于其他 ESC/POS 兼容打印机。

# google-chrome - 如何在 Chromium Embedded Framework (CEF) 中启用桌面通知？

> ID：13323772
> 
> 赞同：3
> 
> 时间：2012-11-10T16:27:26.297
> 
> 标签：google-chrome, chromium, chromium-embedded

如何在[Chromium Embedded Framework (CEF)中启用](http://code.google.com/p/chromiumembedded/)[桌面通知](http://www.chromium.org/developers/design-documents/desktop-notifications)？

当我在 Google Chrome 中加载我的网址时，window.webkitNotifications 是非空的。当我在嵌入式 CEF 浏览器中加载我的 url 时，window.webkitNotifications 为空。

```
 if(!window.webkitNotifications) {
    alert("You need to use The Google Chrome Browser to get this feature!");
    return false;
 } 
```

CEF 是否支持桌面通知？如果是这样，我该如何启用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:01:00.727

据我所知，当前的 CEF 版本不支持此功能。
我的项目中也需要这个功能。我最终自己实现了它，在一个不同的命名空间下，功能略有不同。

所以你可以使用[JS Extensions](http://code.google.com/p/chromiumembedded/wiki/JavaScriptIntegration)自己实现它。可能需要一些工作，但它会给你你需要的东西。

您也可以尝试在[CEF 支持论坛](http://magpcss.org/ceforum/viewforum.php?f=6)中提出该问题，您可能会得到比“自己动手”更好的答案。

我很想听到一个更好的解决方案。

# bash - Bash脚本如何从变量执行命令

> ID：13323778
> 
> 赞同：4
> 
> 时间：2012-11-10T16:28:01.567
> 
> 标签：bash

我正在尝试更改下面的 Bash 函数以执行每个命令参数。但是当我运行这个脚本时，第一个回显按预期工作，但尝试附加到*scratch.txt*文件的第二个回显实际上并没有执行。它只是在提示中回显。

```
#!/bin/sh
clear

function each(){
  while read line; do
    for cmd in "$@"; do
      cmd=${cmd//%/$line}
      printf "%s\n" "$cmd"
      $cmd
    done
  done
}

# pipe in the text file and run both commands
# on each line of the file
cat scratch.txt | each 'echo %' 'echo -e "%" >> "scratch.txt"'

exit 0 
```

如何让 $cmd 变量作为命令执行？

我在这里找到了答案 2 的原始代码： *[Running multiple commands with xargs](https://stackoverflow.com/questions/6958689/xargs-with-multiple-commands-as-argument)*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T16:31:36.520

你想要`eval`。这是邪恶的。或者至少，很危险。[在BashFAQ #48](http://mywiki.wooledge.org/BashFAQ/048)阅读所有相关信息。

# php - PHP CodeIgniter 获得最高价格

> ID：13323781
> 
> 赞同：0
> 
> 时间：2012-11-10T16:28:09.323
> 
> 标签：php, codeigniter

我这里有这个数组

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
) 
```

数字 1、2 和 3 代表一个值的 id....在数据库中，我所有这些 id 都有一个价格（费用）并且所有费用都不同...我想要做的是最高费用并返回一个值...

$query = $this->db->get_where($this->tbl_name, array('id' => $id)); $data = $query->row();

我将如何调整上面的代码以找到最高费用并返回该行？

谢谢，J

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:34:01.377

```
$this->db->get_where($this->tbl_name, array('id' => $id))->order_by("fee", "DESC")->row(); 
```

# math - 如何有效地将几个字节转换为范围之间的整数？

> ID：13323790
> 
> 赞同：4
> 
> 时间：2012-11-10T16:29:58.853
> 
> 标签：math, integer

我正在写一些`List<int>`从非常慢的远程随机数生成源读取字节（只是 a ）的东西。为此和我的个人要求，我想**从源中检索尽可能少的字节**。

现在我正在尝试实现一个签名看起来像的方法：

```
int getRandomInteger(int min, int max) 
```

我有两种理论如何从我的随机源中获取字节，并将它们转换为整数。

方法#1 是幼稚的。获取`(max - min) / 256`字节数并将它们相加。它可以工作，但它会从我拥有的慢速随机数生成器源中获取大量字节。例如，如果我想获得一百万到零之间的随机整数，它将获取近 4000 个字节......这是不可接受的。

方法 #2 对我来说听起来很理想，但我无法提出算法。它是这样的：

让我们以 min: 0, max: 1000 为例。

*   计算`ceil(rangeSize / 256)`在这种情况下是`ceil(1000 / 256) = 4`。现在从源中获取一 (1) 个字节。
*   将此字节从 0-255 范围缩放到 0-3 范围（或 1-4），并让它确定我们使用哪个组。例如，如果字节为 250，我们将选择第 4 组（代表最后 250 个数字，在我们的范围内为 750-1000）。
*   现在获取另一个字节并从 0-255 缩放到 0-250 并让它确定我们在组中的位置。因此，如果第二个字节是例如 120，那么我们的最终整数是`750 + 120 = 870`。

在那种情况下，我们总共只需要获取 2 个字节。然而，如果我们的范围是 0-1000000，我们需要几个“组”，这要复杂得多。

我该如何实现这样的事情？我可以使用 Java/C#/JavaScript 代码或伪代码。

我还想保持结果不会丢失熵/随机性。所以，我有点担心缩放整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:59:09.513

不幸的是，您的方法 1 被破坏了。例如，如果 min 为 0，max 为 510，您将添加 2 个字节。只有一种方法可以得到 0 结果：两个字节都为零。发生这种情况的机会是 (1/256)^2。但是有很多方法可以获得其他值，比如 100 = 100+0、99+1、98+2...所以 100 的机会要大得多：101(1/256)^2。

做你想做的或多或少的标准方法是：

```
Let R = max - min + 1   -- the number of possible random output values
Let N = 2^k >= mR, m>=1  -- a power of 2 at least as big as some multiple of R that you choose.
loop
   b = a random integer in 0..N-1 formed from k random bits
while b >= mR -- reject b values that would bias the output
return min + floor(b/m) 
```

这称为拒绝方法。它会丢弃随机选择的二进制数，这些二进制数会影响输出。如果`min-max+1`恰好是 2 的幂，那么您将有零拒绝。

如果你有`m=1`并且`min-max+1`只是 2 的大幂次方多一倍，那么拒绝率将接近一半。在这种情况下，您肯定想要更大的`m`.

一般来说，更大的 m 值会导致更少的拒绝，但当然它们每个数字需要更多的位数。有一个概率最优算法可供选择`m`。

这里介绍的其他一些解决方案存在问题，但很抱歉，我现在没有时间发表评论。如果有兴趣，可能会在几天内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:41:56.420

```
range 1 to r
256^a >= r

first find 'a' 

get 'a' number of bytes into array A[]

num=0
for i=0 to len(A)-1
    num+=(A[i]^(8*i))
next

random number = num mod range 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T16:42:30.490

您的随机源每次调用为您提供 8 个随机位。对于 [min,max] 范围内的整数，您需要 ceil(log2(max-min+1)) 位。

假设您可以使用某些函数从源中获取随机字节：

```
bool RandomBuf(BYTE* pBuf , size_t nLen); // fill buffer with nLen random bytes 
```

现在您可以使用以下函数在给定范围内生成随机值：

```
// --------------------------------------------------------------------------
// produce a uniformly-distributed integral value in range [nMin, nMax]
// T is char/BYTE/short/WORD/int/UINT/LONGLONG/ULONGLONG
template <class T> T RandU(T nMin, T nMax)
{
    static_assert(std::numeric_limits<T>::is_integer, "RandU: integral type expected");

    if (nMin>nMax)
        std::swap(nMin, nMax);

    if (0 == (T)(nMax-nMin+1)) // all range of type T
    {
        T nR;
        return RandomBuf((BYTE*)&nR, sizeof(T)) ? *(T*)&nR : nMin;
    }

    ULONGLONG nRange    = (ULONGLONG)nMax-(ULONGLONG)nMin+1        ; // number of discrete values
    UINT      nRangeBits= (UINT)ceil(log((double)nRange) / log(2.)); // bits for storing nRange discrete values
    ULONGLONG nR                                                   ;

    do
    {
        if (!RandomBuf((BYTE*)&nR, sizeof(nR)))
            return nMin;

        nR= nR>>((sizeof(nR)<<3) - nRangeBits); // keep nRangeBits random bits
    }
    while (nR >= nRange);                       // ensure value in range [0..nRange-1]

    return nMin + (T)nR;                        // [nMin..nMax]
} 
```

由于您总是得到 8 位的倍数，因此您可以在调用之间节省额外的位（例如，您可能只需要 16 位中的 9 位）。它需要一些位操作，并且由您决定是否值得付出努力。

如果您使用“半位”，您可以节省更多：假设您要生成范围 [1..5] 内的数字。每个随机值都需要 log2(5)=2.32 位。使用 32 个随机位，您实际上可以在此范围内生成 floor(32/2.32)= 13 个随机值，尽管这需要一些额外的努力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T16:39:18.907

3 个字节（一起）为您提供 0..16777215 范围内的随机整数。您可以使用该值的 20 位来获取范围 0..1048575 并丢弃大于 1000000 的值

# php - preg_match 和换行符

> ID：13323794
> 
> 赞同：2
> 
> 时间：2012-11-10T16:30:31.653
> 
> 标签：php, regex, multiline

我有以下字符串

```
№ покупки(OrderId) : 12345
Доп.Информация 1 : Имя
Доп.Информация 2 : Уставная деятельность 
```

我想抓住以`Доп.Информация 1`.

这个有效：

```
Доп\.Информация 1\W*:\W*(\w*) 
```

这个没有：

```
^Доп\.Информация 1\W*:\W*(\w*)$ 
```

只有这个有效：

```
^№ 
```

怎么了？据我所知，该`^`符号不仅用于在字符串本身的开头进行搜索，还用于在`\n`符号之后进行搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:40:21.960

我建议使用 multiline mode `/m`，因此`^`并且`$`将适用于每一行文本。

```
/^.* 1 : .*$/m 
```

* * *

其他选择是：

```
/(?:^|(?<=\n)).* 1 : .*/ 
```

在哪里`(?:^|(?<=\n))`匹配行首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:32:15.143

仅当您使用多行模式时。您可以像这样激活它：

```
'/^Доп\.Информация 1\W*:\W*(\w*)$/m' 
```

只需将其放在定界符之后（无论您使用哪个字符）。[这部分](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)文档展示了如何使用这些修饰符。

或者，可以在正则表达式中设置这些选项，甚至只针对其中的各个部分（尽管在您的情况下可能不需要这样做）。以下是它的工作原理：

```
'/(?m:^Доп\.Информация 1\W*:\W*(\w*)$)/' 
```

或者您可以从某个点开始设置修饰符，如下所示：

```
'/(?m)^Доп\.Информация 1\W*:\W*(\w*)$/' 
```

对于这种风格，请查看[这](http://www.php.net/manual/en/regexp.reference.internal-options.php)部分文档。

# java - 关联的级联删除混淆

> ID：13323799
> 
> 赞同：0
> 
> 时间：2012-11-10T16:31:40.827
> 
> 标签：java, hibernate

我正在使用 HIbernate 3.2.5。我在 Dept 和 Training 表之间有一个一对多的关联。一个部门能够接受不止一种培训。

```
<id name="deptId" type="integer" column="DEPT_ID">
      <generator class="assigned"></generator>
  </id>
  <property name="deptName">
      <column name="DEPT_NAME"></column>
  </property>
  <map name="trainingDetails" inverse="false" cascade="delete" lazy="false">
      <key column="DEPT_ID"></key>
      <map-key formula="ID" type="integer"></map-key>
      <one-to-many class="model.Training"/>
  </map> 
```

当我尝试删除条目时：

```
SessionFactory sf = new Configuration().configure("trial.cfg.xml").buildSessionFactory();
    Session session = sf.openSession();
    Dept department = new Dept();
    department.setDeptId(2);        
    session.delete(department);
    session.flush();
    session.close(); 
```

我可以看到，对于子表，更新查询正在控制台中打印，而不是删除查询：

```
update training set DEPT_ID=null where DEPT_ID=? 
```

但是由于级联`delete`因此子表也应该执行`delete`操作而不是`update`正确的？

请让我知道我的错误在哪里。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:34:13.700

`DELETE_ORPHAN`如果您使用 cascade声明子对象不能独立存在，它会这样做。

此外，您在删除之前没有加载对象图。执行删除如下：

```
SessionFactory sf = new Configuration().configure("trial.cfg.xml")
                                       .buildSessionFactory();
    Session session = sf.openSession();
    //load the object before deleting
    Dept department = session.get(Dept.class, new Integer(2));
    session.delete(department);
    session.flush();
    session.close(); 
```

# css - css 属性 - 它们都一样吗？

> ID：13323818
> 
> 赞同：-2
> 
> 时间：2012-11-10T16:33:38.943
> 
> 标签：css, colors, web, background, background-color

以下页脚属性的每一行有什么区别？

他们不都一样吗？如果是这样，为什么要多次声明？

```
#footer {   
    background: #1b1b1b;
    color: #5b5b5a;
    background-color: #cccccc;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:37:08.767

`color`设置文本颜色。 `background-color`设置背景颜色。 `background`是许多其他属性的简写，例如：`background: url("topbanner.png") #00D repeat-y fixed;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:39:30.573

`color`用于文本的颜色。 `background-color`定义文本后面的背景颜色。 `background`只是一个快捷方式，允许您同时声明颜色+图像+其他属性（而不是使用`background-color`, then`background-image`等）。所以在这里，唯一多余的行是`background`and `background-color`。`background-color`在您的示例中实际上是覆盖`background`的，因此您的页脚将具有浅灰色（ccc）背景，带有较深的灰色文本。

# c# - c#中的线程？

> ID：13323824
> 
> 赞同：1
> 
> 时间：2012-11-10T16:34:37.090
> 
> 标签：c#

```
class Form1
{ 
    private void sendemail_Click(object sender, EventArgs e)
    {           
        totalproxy=10;

        for (int i = 0; i < totalproxy; i++)
        {
            ThreadStart ts1 = new ThreadStart(sendmail());
            Thread thread1 = new Thread(ts1);
            thread1.Start();
            while (thread1.IsAlive) ;
        }            

    }

    public void sendmail()
    {
        //some code goes here
    }
} 
```

is 给了我一个错误，这里需要方法名称

```
new ThreadStart(xxxxx); 
```

但`sendmail()`已经写在那里了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T16:36:43.117

代替

```
new ThreadStart(sendmail()); 
```

和

```
new ThreadStart(sendmail); 
```

因为您不想调用方法，而是将方法委托给线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:01:37.153

ThreadStart 需要一个委托（[http://msdn.microsoft.com/fr-fr/library/system.threading.threadstart(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.threading.threadstart(v=vs.80).aspx)），它是一个函数地址，与另一个变量的地址完全一样。

在您的代码中，您使用 sendmail 而不是仅通过其名称给出其地址`ThreadStart ts1 = new ThreadStart(sendmail);`

# c# - 找到足够远的位置

> ID：13323825
> 
> 赞同：2
> 
> 时间：2012-11-10T16:34:38.057
> 
> 标签：c#, position, unity3d, distance

我正在制作一个有多个行星的游戏。现在我想随机生成它们的位置，所以我需要确保它们彼此不会太近，这样它们就不会发生碰撞，也不会彼此相距太远，因为你应该能够看到它们。

每个行星都有一个半径，所以每个行星之间的距离应该是：它自己的半径+任何其他行星的半径+一个小的偏移量。如果它们彼此之间的距离不太远，尽可能靠近，那就太好了。

我只是从将第一个行星放置在 0,0,0 开始。然后第二个很容易计算（只是一个随机方向，然后是距离）。第三个也是可行的，尽管在那之后我很难过。

这里有什么帮助吗？我正在使用 Unity，所以位置是 Vector3，我正在使用 c#。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:35:49.620

我不使用统一，但我认为这个问题不是统一/c# 特定的。

考虑到您想要放置的每个行星都“依赖”于父级，您可以实施它，以某种方式，太阳被排除并放置在原点。

所以说，太阳它位于（0,0,0），Planet1 属于太阳并且它位于一定的半径距离，所以它有自己的半径和旋转角度（总是与它的父级相关）。行星 2 可能有太阳作为父母，所以它是一颗“行星”，或者来自行星 1，成为它的月亮。等等...

使用这个简单的方案，您总是需要管理 4 个可以轻松实现为类的东西，即（未经测试，我在这里没有编译器就编写了它，检查可能的语法错误）：

```
public class Planet
{
  public Planet Parent;     //if null, I'm the first in chain
  public float OrbitRadius; //From my parent
  public float OrbitAngle;  //0-360 around my parent
  public float Radius;      //Planet size

  //EDIT:
  public Vector3 Position;

  public void CalculatePosition()
  {
    if(Parent == null) this.Position = new Vector(0, 0, 0);
    this.Position = Parent.Position + OrbitRadius + Math.Sin(OrbitAngle * Math.PI / 180.0f);  //Check if it has to be done for each vector component
  }

} 
```

此外，您可以轻松实现太阳、行星、卫星、卫星的卫星 :-)

每次创建行星时，都会分配其父级，随机化类值，仅关注 OrbitRadius >> Radius（>> 我的意思是真的“真的更大”，而不仅仅是“更大”）

这也应该给你一个最强的“行星链”来处理，也许是递归函数。

作为最后一步，您可以“渲染”他们在整个链条中的位置，以增量方式将 PlanetX 位置添加到父位置，仅处理 OrbitAngle；你在这里需要一些正弦/余弦数学，但你不会因为比例因子而松懈。

希望这可以帮助

**编辑**：我添加了一种CalculatePosition，现在无法验证，它只是为了澄清概念并且肯定可以改进。

# android - 如何在 ImageButton 上设置 OnClickListener

> ID：13323826
> 
> 赞同：1
> 
> 时间：2012-11-10T16:34:42.427
> 
> 标签：android, android-intent

我在我的 XML 中定义了一个 ImageButton，我试图在我的 Java 代码中设置一个 OnClickListener。但是当我点击它时，什么都没有发生，好像它不可点击......有人可以帮助我吗？

```
<ImageButton
        android:id="@+id/facebook_link"
        android:layout_width="35dp"
        android:layout_height="40dp"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="70dp"
        android:background="@drawable/facebook_icon" /> 
```

```
ImageButton facebook=(ImageButton)findViewById(R.id.facebook_link);
final WebView webview=new WebView(this);
facebook.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        setContentView(webview);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setPluginsEnabled(true);
        webview.loadUrl("https://www.facebook.com");
        setContentView(webview);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:13:20.597

这样做，

```
public class YourWebViewActivity extends Activity {

private ImageButton mFacebook;
private WebView mWebView;

@Override
public void onCreate(Bundle savedInstance) {
  super.onCreate(savedInstance);
  setContentView(R.layout.web_view_layout);

 mFacebook=(ImageButton)findViewById(R.id.facebook_link);
 mWebView=new WebView(this);
 mFacebook.setOnClickListener(new OnClickListener()
{
    public void onClick(View v)
    {
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setPluginsEnabled(true);
        mWebView.loadUrl("https://www.facebook.com");
        setContentView(mWebView);

    }
}); 
}
} 
```

在 web_view_layout.xml 中，应用这个

```
 <ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/facebook_link"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/> 
```

# python - 我不明白 Python 的主要部分。那是什么东西？

> ID：13323827
> 
> 赞同：17
> 
> 时间：2012-11-10T16:35:03.543
> 
> 标签：python

> **可能重复：**
> [<if __name__==“__main__”:> 做什么？](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)

所以我启动了 pyscripter，我得到了一个文件，里面有这个：

```
def main():
    pass

if __name__ == '__main__':
    main() 
```

那是什么？为什么我的程序没有它也能工作？无论如何，这样做的目的是什么？我的代码会去哪里？让我们说一个打印 hello world 的函数。那会去哪里？我会在哪里称呼它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T16:38:03.260

目的基本上是您可以定义一个中央入口点，当且仅当脚本直接自行运行。因为只有在它自己运行时`__name__`才会等于。`'__main__'`将脚本的实际内容放入单独的函数中，可以让其他脚本导入该函数并在需要时运行它，因此在导入脚本时它不会立即运行。

这也经常用于库模块中，以便在您快速需要某些东西时具有一些默认行为。例如，该`http.server`模块提供了广泛的功能来创建您自己的 HTTP 服务器，具有您能想到的任何功能。如果您只想快速让一个简单的服务器侦听并静态传​​递文件，则可以在从命令行运行时使用模块的默认行为。

在命令行上运行`python3 -m http.server`将完全做到这一点；运行该`http.server`模块，它本身将在其`__name__ == '__main__`块中启动一个简单的 HTTP 服务器。

回应您的评论：

对于充当库、包含类型或函数的普通模块，您的应用程序需要，您不需要`main`函数或主块。对于直接调用的脚本，例如实际启动应用程序的启动脚本，您将拥有某种未封装在函数或类中但直接运行的代码。那将是一些东西，您可以放入一个 main 函数，然后单独调用该函数。这使您可以更自由地放置该代码。例如，您可以将`main`函数直接放在文件的开头，而在其中调用的其他函数则在文件中进一步定义。脚本的最后一部分是`main()`. 您不一定需要将其放入`if __main__ == '__main__':`条件，你可以直接调用它。例如，您的脚本可能如下所示：

```
def main ():
    # doing something
    utilityFunction(...)
    otherUtilityFunction(...)

def utilityFunction (...):
    ...
def otherUtilityFunction (...):
    ...

main() 
```

如果您不将代码放入单独的函数中，则必须在底部进行所有处理（在函数定义之后），如果您只想快速查看当直接调用脚本。

现在，正如我所说，您不需要将其放入 main-condition 块；你可以直接调用它。但是，如果出于某种原因您需要包含该文件，例如因为您想将它封装到其他东西中，或者如果您想从交互式 shell（IDLE 或其他东西）重复调用它，您可能不会想要`main()`在您只导入模块时运行，但仅在您想要实际执行其功能时运行。那就是您应该将其`main()`放入条件的地方；这样除非您直接执行模块，否则它不会被执行。

一般来说，总是将`main()`调用置于这种条件下并不是一个坏主意，因为它永远不会受到伤害，但通常会在以后的某个时候变得有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T16:39:20.817

当你执行一个 python 文件时，`__name__`全局设置为`__main__`，而当你导入文件时，它设置为它的名称。

该结构允许您仅在执行文件时执行某些代码。例如，如果您有文件`mymain.py`：

```
def main():
    print('Hello, World!')

if __name__ == '__main__':
    main() 
```

你得到这个结果：

```
$ python mymain.py
Hello, World!
$ python
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import mymain    # main() *not* executed
>>> mymain.main()
Hello, World! 
```

能够在不执行代码的情况下导入文件通常很有用。通过这种方式，第三方软件可以调用 main 函数，而无需创建新进程并允许他们在运行之前更改一些内容。

因此，这不是必需的，但使用它是一种好习惯。通常您会意识到程序的某些函数/类可能对其他程序有用，因此能够在不执行主程序的情况下导入文件是一种好习惯。

与 Java 相比，拥有一个`if __name__ == '__main__':`块就像拥有一个只有一个`main`方法并使用其他类来完成他的工作的类，而不使用它就像`main`在一个类中拥有一个还提供其他功能的方法（例如某种容器或其他还有一个`main`执行主程序的方法）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T16:40:26.360

Python 中的一切都是语句，没有声明之类的东西（例如，a`def`是创建函数对象并将其绑定到名称的语句）。导入模块意味着（在一些簿记之后）执行模块中的语句。同样，执行 Python 文件意味着将其作为模块导入。因此，只需将程序编写为模块级语句即可。

但当然，这是不可重复使用的。当“程序”也应该可以导入其他模块时，您可以将它放在一个函数中（还有一些其他的小优点）。但随后执行文件 ( `python file.py`) 只会定义该函数。

Enter `__name__`，这是模块名称，等于`'__main__'`“入口点”模块。所以条件检查模块是否被导入或作为脚本运行，并在后一种情况下完成它的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:38:28.843

对于“Hello world”，您实际上并不需要这个技巧，但它在您编写模块时很有用。该`if __name__ == '__main__'`子句`main()`仅在脚本直接执行时才运行，而不是在用作从另一个脚本的导入时运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T16:45:14.820

这个想法很简单：您可以将文件用作包（要在某处导入的东西）或纯脚本。如果文件用作脚本，Python 的解释器变量“ `__name__`”包含“ `__main__`”而不是包的名称。

因此，我们测试是否`__name__`设置为`__main__`，这意味着我们处于脚本模式，如果是，我们执行“if”块中的代码。

您必须了解 Java 和 Python 之间的一个主要区别：在 Python 中，当解释器读取文件时，它会被执行 --> 声明和代码都被解释，Python 的许多特性都基于此。

# matlab - 连续求解微分方程

> ID：13323830
> 
> 赞同：0
> 
> 时间：2012-11-10T16:35:32.653
> 
> 标签：matlab, neural-network, differential-equations

对于上下文，我正在尝试在 Matlab 中建模和模拟时空神经网络。我已经确定了一个微分方程，它将代表我的神经元的动态。

现在，我希望这个微分方程“连续”求解，这意味着我的模拟应该运行，做一些事情，同时我的神经元应该根据微分方程更新。

目前，我有两种方法：

首先，我可以这样做：

```
ode45(@diffEquation, [0, inf], nn.U); % where nn.U is the initial (usually randomized) neuron state

function dUdt = diffEquation(t,U)
   nn.U = U;
   dUdt = % the equation
end 
```

所以想法是在后台启动一个并行任务，它将无限运行 ode45 并直接更新我的神经元状态`nn.U`。但是，据我所知，ode45 通常会为每个值存储一个“历史记录”，`t`并在计算完成时返回这些值（例如`t`at `TFINAL`）。我对这些值不感兴趣，我希望通过这种方式运行 ode45，我很快就会耗尽内存。

另一个想法是无限地一遍又一遍地调用 ode45（也在异步后台任务中）：

```
while 1 % i.e. simulation not over yet
    [~,y] = ode45(@diffEquation, [0, 0.001], nn.U);
    nn.U = y(end,:); 
end 
```

就像第一种方法一样，这对我来说似乎非常笨拙和尴尬。我有一种感觉，必须有一个更优雅的解决方案来解决我的问题。

也许 ode45 在这里不是正确的选择？

编辑：只是为了澄清，差异。方程是一个随时间变化的常方程，没有什么花哨的和可以被 ode45 解决的（即`dUdt = -U + some-stuff * networkoutput`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:33:56.193

如果你的颂歌足够简单。您可以提供分析解决方案，而无需使用 odesolve。任何状况之下。你想运行一个模拟，在虚拟时间内求解 ode。Simulink 可能是一个更好的选择。

# mysql - ERROR 2006 (HY000) at line 1: MySQL server has gone away

> ID：13323833
> 
> 赞同：19
> 
> 时间：2012-11-10T16:35:55.980
> 
> 标签：mysql, mysql-python

ERROR 2006 (HY000) at line 1: MySQL server has gone away

我面临同样的问题。我正在尝试将 mysqldump 文件恢复到我的机器。该文件的大小为 2.7 MB。我在第 1 行收到“ERROR 2006 (HY000): MySQL server has gone away”错误。我增加了 max_allowed_pa​​cket 和 wait_timeout 的大小。但没有任何效果。

以下是我的文件（my-medium.ini）的内容，请建议我哪里错了。我的安装有各种ini文件，我修改了my-large、my-medium、my-small、my-huge、my-innodb-heavy-4G。提前致谢！！

* * *

```
# Example MySQL config file for medium systems.
#
# This is for a system with little memory (32M - 64M) where MySQL plays
# an important part, or systems up to 128M where MySQL is used together with
# other programs (such as a web server)
#
# You can copy this file to
# /etc/my.cnf to set global options,
# mysql-data-dir/my.cnf to set server-specific options (in this
# installation this directory is C:\mysql\data) or
# ~/.my.cnf to set user-specific options.
#
# In this file, you can use all long options that a program supports.
# If you want to know which options a program supports, run the program
# with the "--help" option.

# The following options will be passed to all MySQL clients
[client]
#password   = your_password
port        = 3306
socket      = /tmp/mysql.sock

# Here follows entries for some specific programs

# The MySQL server
[mysqld]
port        = 3306
socket      = /tmp/mysql.sock
skip-locking
key_buffer_size = 16M
max_allowed_packet = 512M
table_open_cache = 64
sort_buffer_size = 512K
net_buffer_length = 8K
read_buffer_size = 256K
read_rnd_buffer_size = 512K
myisam_sort_buffer_size = 8M
wait_timeout = 6000

# Don't listen on a TCP/IP port at all. This can be a security enhancement,
# if all processes that need to connect to mysqld run on the same host.
# All interaction with mysqld must be made via Unix sockets or named pipes.
# Note that using this option without enabling named pipes on Windows
# (via the "enable-named-pipe" option) will render mysqld useless!
# 
#skip-networking

# Replication Master Server (default)
# binary logging is required for replication
log-bin=mysql-bin

# binary logging format - mixed recommended
binlog_format=mixed

# required unique id between 1 and 2^32 - 1
# defaults to 1 if master-host is not set
# but will not function as a master if omitted
server-id   = 1

# Replication Slave (comment out master section to use this)
#
# To configure this host as a replication slave, you can choose between
# two methods :
#
# 1) Use the CHANGE MASTER TO command (fully described in our manual) -
#    the syntax is:
#
#    CHANGE MASTER TO MASTER_HOST=<host>, MASTER_PORT=<port>,
#    MASTER_USER=<user>, MASTER_PASSWORD=<password> ;
#
#    where you replace <host>, <user>, <password> by quoted strings and
#    <port> by the master's port number (3306 by default).
#
#    Example:
#
#    CHANGE MASTER TO MASTER_HOST='125.564.12.1', MASTER_PORT=3306,
#    MASTER_USER='joe', MASTER_PASSWORD='secret';
#
# OR
#
# 2) Set the variables below. However, in case you choose this method, then
#    start replication for the first time (even unsuccessfully, for example
#    if you mistyped the password in master-password and the slave fails to
#    connect), the slave will create a master.info file, and any later
#    change in this file to the variables' values below will be ignored and
#    overridden by the content of the master.info file, unless you shutdown
#    the slave server, delete master.info and restart the slaver server.
#    For that reason, you may want to leave the lines below untouched
#    (commented) and instead use CHANGE MASTER TO (see above)
#
# required unique id between 2 and 2^32 - 1
# (and different from the master)
# defaults to 2 if master-host is set
# but will not function as a slave if omitted
#server-id       = 2
#
# The replication master for this slave - required
#master-host     =   <hostname>
#
# The username the slave will use for authentication when connecting
# to the master - required
#master-user     =   <username>
#
# The password the slave will authenticate with when connecting to
# the master - required
#master-password =   <password>
#
# The port the master is listening on.
# optional - defaults to 3306
#master-port     =  <port>
#
# binary logging - not required for slaves, but recommended
#log-bin=mysql-bin

# Point the following paths to different dedicated disks
#tmpdir     = /tmp/     
#log-update     = /path-to-dedicated-directory/hostname

# Uncomment the following if you are using InnoDB tables
#innodb_data_home_dir = C:\mysql\data/
#innodb_data_file_path = ibdata1:10M:autoextend
#innodb_log_group_home_dir = C:\mysql\data/
# You can set .._buffer_pool_size up to 50 - 80 %
# of RAM but beware of setting memory usage too high
#innodb_buffer_pool_size = 16M
#innodb_additional_mem_pool_size = 2M
# Set .._log_file_size to 25 % of buffer pool size
#innodb_log_file_size = 5M
#innodb_log_buffer_size = 8M
#innodb_flush_log_at_trx_commit = 1
#innodb_lock_wait_timeout = 50

[mysqldump]
quick
max_allowed_packet = 512M

[mysql]
no-auto-rehash
# Remove the next comment character if you are not familiar with SQL
#safe-updates

[myisamchk]
key_buffer_size = 20M
sort_buffer_size = 20M
read_buffer = 2M
write_buffer = 2M

[mysqlhotcopy]
interactive-timeout 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-08-24T11:01:43.973

更改 my.cnf 文件中的 3 个设置

在 [mysqld] 下

```
max_allowed_packet = 64M
wait_timeout = 6000 
```

在 [mysqldump] 下

```
max_allowed_packet = 64M 
```

那应该解决它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T02:50:43.373

这通常意味着您“与 MySQL 服务器的当前版本不兼容”，请参阅[mysql_upgrade](http://dev.mysql.com/doc/refman/5.0/en/mysql-upgrade.html)。我遇到了同样的问题，只需要运行：

```
mysql_upgrade --password 
```

该文档指出，“每次升级 MySQL 时都应执行 mysql_upgrade”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T12:43:10.913

我刚刚发现这个错误正在发生，因为我使用的是“windows power-shell”而不是命令提示符:)) 解决了！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-06T15:03:12.650

根据`[mysqld]`我尝试了以下方法：

```
max_allowed_packet = 2096M 
```

重新启动mysqld但它没有工作，但是对我有用的`max_allowed_packet`是从命令行全局设置，然后从转储运行导出，它没有任何问题。

您可以根据数据库从较小的数据包大小开始，我也确实重新导入了相同大小的数据库。

**出口：-**

```
mysqldump --opt --user=confluenceUser --password='<passwd>' --max_allowed_packet=2147483648 confluencedb | gzip > confluencedb.sql.gz 
```

**进口：-**

```
mysql> SET GLOBAL max_allowed_packet=2147483648;

Query OK, 0 rows affected, 1 warning (0.00 sec)

zcat confluence.sql.gz | mysql -uconfluence -p<passwd> confluencedb 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-11T06:07:56.850

上面的答案可以提供帮助，只需添加我的建议，因为您可以通过使用 source 命令直接导入来绕过限制。作为 mysql -u username -p database_name < file.sql 的替代方案，您可以先登录到 mysql，选择数据库，然后按源导入，如下所示。

```
mysql -u username -p    
mysql> use db_name;
mysql> source path-to/file.sql; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-11T12:26:14.187

我在恢复更大的表时遇到了同样的问题：“SQL Fehler (2006): MySQL server has gone away”。

解决方案：使用较小的查询。不要用逗号分隔的行导出大查询。将其更改为每行单个“插入”或“替换”。

# java - LWJGL - 动态发送 VBO 数据？

> ID：13323834
> 
> 赞同：-1
> 
> 时间：2012-11-10T16:35:56.833
> 
> 标签：java, opengl, rendering, lwjgl, vbo

在我正在制作的体素游戏中，我使用 VBO 来渲染世界。我使用这样的东西将顶点发送到 GPU：

```
 FloatBuffer vertexData = BufferUtils.createFloatBuffer(..?);

    float[] vertices = new float[..?];

    //vertex calculations go here

    vertexData.put(vertices);
    vertexData.flip();

    //send the vertices
    int vboVertexHandle = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
    glBufferData(GL_ARRAY_BUFFER, vertexData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

但是，顶点是动态计算的，无法预先知道我将渲染多少个。所以我不知道要为 FloatBuffer 和数组分配多少空间。

我想使用 ArrayList，但它似乎缓慢且效率低下。有什么方法可以在不指定大小的情况下制作数组或 FloatBuffer？还是在计算顶点时将数据发送到 GPU，而不是最终将它们全部发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:06:42.147

> 有什么方法可以在不指定大小的情况下制作数组或 FloatBuffer？

为什么不直接使用 a[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)来生成数据，将顶点复制到 a`FloatBuffer`中，然后使用它呢？

# ruby-on-rails-3 - rails 3 link_to #tabname 用于简单标签 - 使用foundation.zurb

> ID：13323836
> 
> 赞同：0
> 
> 时间：2012-11-10T16:36:03.790
> 
> 标签：ruby-on-rails-3, zurb-foundation

所以在我的幻想中，基础代码可以在 Rails 中轻松运行......当然，它不会。看来我所有的基础javascript都被加载了，样式也是如此。我没有安装基础 gem，我手动添加了文件。

选项卡的基础说明：

```
<dl class="tabs">
  <dd class="active"><a href="#simple1">Simple Tab 1</a></dd>
  <dd><a href="#simple2">Simple Tab 2</a></dd>
  <dd class="hide-for-small"><a href="#simple3">Simple Tab 3</a></dd>
</dl>
<ul class="tabs-content">
  <li class="active" id="simple1Tab">This is simple tab 1s content. Pretty neat, huh? </li>
  <li id="simple2Tab">This is simple tab 2s content. Now you see it!</li>
  <li id="simple3Tab">This is simple tab 3s content.</li>
</ul> 
```

我在我的 Rails 应用程序中尝试了以下操作：

```
<dl class="tabs">
  <dd class="active"> <%= link_to "Edit Trail Info", "#simple1" %></dd>
  <dd><%= link_to "Reorder Chapters", "#simple2" %></dd>
</dl>
<ul class="tabs-content">
  <li class="active" id="simple1Tab">
      <%= render 'form' %>      
  </li>
  <li id="simple2Tab">  
      <%= render :partial => 'shared/chapterSort', :locals => { :trail => @trail } %>
  </li>
</ul> 
```

但是当我单击选项卡时，浏览器中的 URL 只是更改为这个并且不会隐藏/显示数据：“http://localhost:3000/trails/7/edit#simple2”

我应该从哪里开始？它是路由事物、Java 事物还是 link_to 的不同语法。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:14:39.203

看起来 javascript 没有正确安装，或者页面中有一些 javascript 错误，阻止了 onclick 事件被触发。检查浏览器的 JavaScript 控制台是否有错误。

# c# - 使用 WPF 在 C# 中创建动态菜单

> ID：13323838
> 
> 赞同：0
> 
> 时间：2012-11-10T16:36:15.637
> 
> 标签：c#, wpf, mvvm

我想知道是否可以做这样的事情-

我有一个名为“投资组合”的菜单项，其中有两个子菜单项“加载投资组合”和“查看投资组合”。当您单击加载投资组合时，它会提示打开一个包含投资组合名称的文件，然后我希望查看投资组合将这些名称添加为子菜单项，如下所示 ->

```
Portfolios:
   Load Portfolios
       View Portfolios:
           Portfolio1
           Portfolio2
           Portfolio3 
```

老实说，我不知道该怎么做，也没有遇到任何可以提供帮助的教程，因此非常感谢任何帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:49:42.130

您的问题有点宽泛，所以我将总结您需要做的事情：

*   遵循 MVVM 模式
*   在“主”视图模型中，创建一个`ObservableCollection<Portfolio>`名为 SubMenuItems
*   在您的视图 (XAML) 中，从这个开始并在它之上构建：

    ```
    <Menu>
        <MenuItem Header="Main Menu" ItemsSource="{Binding SubMenuItems}" />
    </Menu> 
    ```

    .

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T16:44:01.767

这很简单：

```
// Create MenuItem
MenuItem mnuFile = new MenuItem();
mnuFile.Name = "mnuFile"; // The x:Name
mnuFile.Header = "_File";

// Add to mnuMain's Items
mnuMain.Items.Add(mnuFile); 
```

# php - 当我尝试在 php 中使用存储用户信息的会话时遇到服务器错误

> ID：13323839
> 
> 赞同：1
> 
> 时间：2012-11-10T16:36:35.367
> 
> 标签：php

```
 // first page
    session_start();
    $_SESSION['email']=$_POST['email2'];

    // second page
    session_start();
    echo "Welcome Admin User: ".$_SESSION['email']; 
```

我的代码不起作用，当我尝试登录时遇到服务器错误。在我添加会话之前它正在工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:28:08.703

这可能是很多事情，但首先要这样做，查看您的 php 设置，即打印出 phpinfo 并查看 session.save_path，确保该目录与 phpinfo 中一样存在。

# ios - 如何识别 NSString 中的特殊字符？

> ID：13323843
> 
> 赞同：1
> 
> 时间：2012-11-10T16:36:43.493
> 
> 标签：ios, nsstring, nsjsonserialization, nsrange

有一个小问题如何识别字符串中的特殊字符，如 {} * & ^ % $ # @ ！_ . Nsrange 没有帮助我。

这是我的问题，我有一个 json 数组

```
enter code here{contacts:[{name:xyz,phone:123},{name:abc,phone:123},{name:{},phone:{}}]} 
```

这是我的问题，json 中的最后一个对象给了我 {}，这使我的 tableview 向我抛出了一个 sigbart。我怎样才能跳过这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:12:34.143

我同意@MaxGabriel 的观点，这不是*您的*具体问题:)

* * *

但是关于问题的答案：

测试是否有无效字符：

```
[NSCharacterSet symbolCharacterSet]
rangeOfCharacterFromSet == YES if the array contains a char from the set 
```

把他们全部 rm：

```
id s = @"$bla++$bleb+$blub-$b";
NSCharacterSet *ch = [NSCharacterSet symbolCharacterSet]
s = [[s componentsSeparatedByCharactersInSet:ch] componentsJoinedByString:@""];
NSLog(@"%@ - %@",ch, s); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T16:56:05.680

问题不在于字符无效。{} 是 JSON 中的空字典。您应该检查字典为空的情况，而不是将其传递给您的 tableview-controller。

# image - Symfony 2 资产图像

> ID：13323844
> 
> 赞同：9
> 
> 时间：2012-11-10T16:36:44.137
> 
> 标签：image, symfony, assets

我想在我的视图中添加资产图像。但是如果我加载页面图像将不会加载..

配置：

```
framework:
    esi:             ~
    translator:      { fallback: "%locale%" }
    secret:          "%secret%"
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: "%kernel.debug%"
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'], assets_version: "1.0.0" }
    default_locale:  "%locale%"
    trust_proxy_headers: false # Whether or not the Request object should trust proxy headers (X_FORWARDED_FOR/HTTP_CLIENT_IP)
    session:         ~

# Twig Configuration
twig:
    debug:            "%kernel.debug%"
    strict_variables: "%kernel.debug%"

# Assetic Configuration
assetic:
    debug:          "%kernel.debug%"
    read_from:      %kernel.root_dir%/../public_html
    write_to:       %kernel.root_dir%/../public_html
    use_controller: false
    #bundles:        [ ]
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        #closure:
        #    jar: "%kernel.root_dir%/Resources/java/compiler.jar"
        #yui_css:
        #    jar: "%kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar" 
```

index.html.twig

```
<img src="{{ asset('images/menu-park.gif') }}"> 
```

要安装我运行的资产：

```
php app/console assets:install public_html --env=dev --symlink 
```

我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-10T17:05:26.877

该`assets:install public_html`命令将目录复制`src/Acme/DemoBundle/Resources/public/`到`public_html/bundles/acmedemo/`目录中。所以你需要参考那个网址。

例如：您有一个名为*MvParkBundle*`menu-park.gif`的包，并且您在目录中创建了一个图像`Resources/public/images`，您应该在 twig 中使用此代码，假设前端控制器`public_html`也在里面：

```
<img src="{{ asset('bundles/mvpark/images/menu-park.gif') }}"> 
```

如果你运行`assets:install public_html`命令，一切都应该是正确的。

# python - 该数据使用什么数据结构？

> ID：13323846
> 
> 赞同：3
> 
> 时间：2012-11-10T16:36:47.040
> 
> 标签：python, class, design-patterns, data-structures

我对数据结构非常陌生，我真的很想知道 SO 经验丰富的负责人的意见。我有一些分层的数据，基本上就像一棵树。我曾经将它存储在存储为数组的有序点 (x,y) 中，但现在这样做变得越来越麻烦。

假设我有两个属性，开和关。对于每个属性，我想存储 5 个数据值。但是这些数据值中的每一个都有一个相应的数据值，需要与它一起存储。我也需要能够轻松地绘制这些图。

我想到了一个元组字典，但它并不能很好地工作，特别是在轻松绘制值时。

有任何想法吗？

* * *

一个例子就是这样。假设我有 3 个球，质量分别为 5、10 和 15 公斤。我以不同的速度投掷每个球，例如 1m/s、2m/s、3m/s、4m/s 和 5m/s。我测量每个球的高度和每个速度。所以每个速度点都耦合到相应的高度。

我曾经将它存储在不同的数组中，这样说：

球_5公斤：

```
v5=[1,2,3,4,5]
h5=[h1,h2,h3,h4,h5] 
```

球_10kg

```
v10=[1,2,3,4,5]
h10=[h1,h2,h3,h4,h5] 
```

但我不认为这是否真的很理想，或者存储这些数据的最佳方式，特别是当球的质量和速度的数量变得非常大时。有没有更好的方法来存储这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:58:58.377

您的数据似乎是多维的，而不是分层的（即像矩阵而不是像树），它可以使用嵌套容器或一个容器中的对象来表示。

嵌套容器示例：

```
container = {
    "ball_5kg" : ((1, h1), (2, h2), (3, h3), (4, h4), (5, h4)),
    "ball_10kg" : ((1, h1), (2, h2), (3, h3), (4, h4), (5, h4))
} 
```

一个容器中的对象示例：

```
class DataPair():
    __init__(self, velocity, height):
        self.velocity = velocity
        self.height = height
class DataSeries()
    __init__(self, name, series):
        self.name = name
        self.series = series
container = [
    DataSeries("ball_5kg", (DataPair(1, h1), DataPair(2, h2), DataPair(3, h3), DataPair(4, h4), DataPair(5, h4)))
    DataSeries("ball_10kg", (DataPair(1, h1), DataPair(2, h2), DataPair(3, h3), DataPair(4, h4), DataPair(5, h4)))
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:10:41.880

你想做的是这样的事情吗？

```
data = [
  { # OFF
    'val0': 'data0',
    'val1': 'data1',
    'val2': 'data2',
    'val3': 'data3',
    'val4': 'data4',
  },
  { # ON
    'val5': 'data5',
    'val6': 'data6',
    'val7': 'data7',
    'val8': 'data8',
    'val9': 'data9',
  }
]

data[0] # the `off` dict
data[1] # the `on` dict

list( data[0].keys() ) # ['val0', 'val1', 'val2', 'val3', 'val4']
list( data[1].keys() ) # ['val5', 'val6', 'val7', 'val8', 'val9']

data[0]['val0'] # 'data0' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:23:02.877

我不明白您对数据的描述，但是一棵树很容易递归地表示。象征性地，树：= [节点，[树]]。也就是说，树是一个列表，其第一个元素是根，第二个元素是树的列表，即根的子树（子树）。或者，您可以编写 Tree := [Node, Tree_1, Tree_2, ... Tree_N]。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-10T17:05:46.037

也许您可以使用泡菜和自定义类。您可以在课堂上编写自己的 setter 和 getter。

# android - Android：联系人的数据库结构

> ID：13323847
> 
> 赞同：1
> 
> 时间：2012-11-10T16:36:52.407
> 
> 标签：android

我可以在 Android 上为每个电话存储 n 个电话号码。电话号码是可变的，因此每个联系人的电话号码肯定没有固定大小的结构。那么谁能告诉我他们如何为每个联系人的电话号码构建数据库？

谢谢是提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:57:35.540

照着这个结构就好了

![联系人数据库结构](../Images/d5f4c66778e3967ed9cc977dbceda053.png)

在联系人表中，您使用 _id 用于记录 id 并用作主键，然后 contact_name 是一个人的姓名。

在phone_details中，_id是记录id，也是一个主键，然后contact_id是contacts表的_id值，是外键，然后指定contact_type如手机/工作/家庭号码，contact_no是有效的电话号码

# python - Python 3 - 计算两个列表中的匹配项（包括重复项）

> ID：13323851
> 
> 赞同：8
> 
> 时间：2012-11-10T16:37:13.287
> 
> 标签：python, python-3.x

首先，我是编程和python的新手，我看过这里但找不到解决方案，如果这是一个愚蠢的问题，请原谅我！

我有两个列表，我正在尝试确定第二个列表中的项目出现在第一个列表中的次数。

我有以下解决方案：

```
 list1 = ['black','red','yellow']
    list2 = ['the','big','black','dog']
    list3 = ['the','black','black','dog']
    p = set(list1)&set(list2)
    print(len(p)) 
```

除了第二个列表包含重复项之外，它工作正常。

即上面的list1和list2返回1，但list1和list3也是如此，理想情况下应该返回2

任何人都可以提出解决方案吗？任何帮助，将不胜感激！

谢谢，

亚当

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T16:57:11.390

您看到此问题是因为您使用[集合](http://docs.python.org/3.3/library/stdtypes.html?highlight=frozensets#set-types-set-frozenset)作为集合类型。集合有两个特征：它们是无序的（在这里无关紧要），并且它们的元素是唯一的。因此，当您将它们转换为集合时，您甚至会在找到它们的交集之前丢失列表中的重复项：

```
>>> p = ['1', '2', '3', '3', '3', '3', '3']
>>> set(p)
set(['1', '2', '3']) 
```

您可以通过多种方式在此处执行您想要执行的操作，但您需要从查看 list`count`方法开始。我会做这样的事情：

```
>>> list1 = ['a', 'b', 'c']
>>> list2 = ['a', 'b', 'c', 'c', 'c']
>>> results = {}
>>> for i in list1:
        results[i] = list2.count(i) 
>>> results
{'a': 1, 'c': 3, 'b': 1} 
```

这种方法创建一个字典 ( `results`)，并为 中的每个元素`list1`创建一个键`results`，计算它在 中出现的次数`list2`，并将其分配给键的值。

*编辑：*正如 Lattyware 指出的那样，这种方法解决的问题与您提出的问题略有不同。一个真正基本的解决方案看起来像这样

```
>>> words = ['red', 'blue', 'yellow', 'black']
>>> list1 = ['the', 'black', 'dog']
>>> list2 = ['the', 'blue', 'blue', 'dog']
>>> results1 = 0
>>> results2 = 0
>>> for w in words:
        results1 += list1.count(w)
        results2 += list2.count(w)

>>> results1
1
>>> results2
2 
```

这与我的第一个建议类似：它遍历主列表中的每个单词（这里我使用`words`），将它出现的次数添加`list1`到 counter`results1`和`list2`to `results2`。

如果您需要的信息不仅仅是重复的数量，您将需要使用字典，或者更好的是模块`Counter`中的专用类型。`collections`Counter 旨在使我在上面的示例中所做的一切变得容易。

```
>>> from collections import Counter
>>> results3 = Counter()
>>> for w in words:
        results3[w] = list2.count(w)

>>> results3
Counter({'blue': 2, 'black': 0, 'yellow': 0, 'red': 0})
>>> sum(results3.values())
2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-10T16:50:06.370

清单 1 和清单 2 不应该返回 0 吗？或者你的意思是

```
list1 = ['black', 'red', 'yellow'] 
```

我想你想要的是

```
print(len([w for w in list2 if w in list1])) 
```

使用集合的问题在于集合没有重复项。事实上，使用集合的通常原因是消除重复。当然，这只是你不想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-12T18:07:57.727

我知道这是一个老问题，但如果有人想知道如何从一个或多个列表中获取匹配项或匹配项的长度。你也可以这样做。

```
a = [1,2,3]
b = [2,3,4]
c = [2,4,5] 
```

要在两个列表中获得匹配，假设 a 和 b 将是

```
d = [value for value in a if value in b] # 2,3 
```

对于这三个列表，将是

```
d = [value for value in a if value in b and value in c] # 2
len(d) # to get the number of matches 
```

另外，如果您需要处理重复项。这将是预先将列表转换为集合的问题，例如

```
a  = set(a) # and so on 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T02:38:47.927

如果您的意思是要计算 list2 中 list1 元素的频率，也许这个解决方案可以为您工作：

```
list1 = ['black', 'red', 'yellow']
list2 = ['the', 'big', 'black', 'dog']
list3 = ['the', 'black', 'black', 'dog'] 
```

首先我们可以计算元素的频率`list2`并构造一个dict，然后我们可以根据dict从dict构造一个subdict `list1`，并得到总频率你可以计算sub_dct的值：

```
# count the frequency of elements of list1 in list2
def cntFrequency(lst1,lst2):
    dct=dict(Counter(lst2))
    sub_dct={k:dct.get(k,0) for k in lst1}
    return sub_dct 
```

结果是这样的：

```
from collections import Counter

cnt_dct=cntFrequency(list1,list2)
print cnt_dct
print sum(cnt_dct.values())

# Output
{'black': 1, 'yellow': 0, 'red': 0}
1 
```

# android - Android文本字符串没有出现（getStringExtra）

> ID：13323853
> 
> 赞同：-1
> 
> 时间：2012-11-10T16:37:23.723
> 
> 标签：android, text, output

我已经解析了数据，需要将它和一些“文本”保存为字符串。这有效：

```
 String abb = in.getStringExtra(KEY_PAST) + " in past"; 
```

但是对于这个字符串，我需要它之前的“文本”，即：

```
 String acc = in.getStringExtra("Go to" + (KEY_PRESENT)); 
```

字符串 acc 根本没有出现，没有错误消息 - System.out.println(acc) 不输出任何内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:25:25.593

您需要使用 = 获得额外的字符串`KEY`，`KEY_PRESENT`而不是使用`key`=" `go to KEY_PRESENT`" 所以使用：

```
String acc = "Go to" + in.getStringExtra(KEY_PRESENT) ; 
```

代替：

```
 String acc = in.getStringExtra("Go to" + (KEY_PRESENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:59:14.433

您正在更改*密钥*，而不是字符串。试试这个：

```
String acc = "Go to " + in.getStringExtra(KEY_PRESENT);
//    Add a space  ^  as well 
```

您还应该检查是否`in.getStringExtra(KEY_PRESENT)`返回真实值，而不仅仅是`null`在使用它之前。

# ruby-on-rails - 根据页面结构或 REST 操作组织集成测试？

> ID：13323857
> 
> 赞同：1
> 
> 时间：2012-11-10T16:37:57.127
> 
> 标签：ruby-on-rails, rspec

我对如何组织我的集成测试有点困惑。现在，它们是根据页面结构组织的：

**post_pages_spec.rb：**

```
require 'spec_helper'

describe "Post pages" do

  describe "show page" do

    describe "post destruction" do

    end

    describe "edit" do

    end

  end

  describe "post creation" do

  end

end 
```

如您所见，删除和编辑在显示操作中，因为它们出现在显示页面中。

这是组织它们的另一种方式（基于 REST 操作）：

**post_pages_spec.rb：**

```
require 'spec_helper'

describe "Post pages" do

  describe "show page" do

  end

  describe "post destruction" do

  end

  describe "post creation" do

  end

  describe "edit" do

  end
end 
```

哪种结构更清晰、更易于维护？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:49:50.947

假设您确实在询问集成测试而不是控制器测试，我喜欢从用户的角度和用户类型来组织集成测试。前任。一份给注册用户的文件，一份给管理员的文件，一份给未注册用户的文件，等等。

这样做的理由是，作为一般启发式，我发现相同的用户类型具有相同的功能先决条件，因此可以很好地结合在一起。例如，查看帖子的注册用户可能有很多专注于对现有帖子内容进行 CRUD 的场景，而未注册用户可能有专注于帖子推荐的场景。由于这些不同的视角可能会有不同的设置和拆卸，因此它们也可能更容易（即 DRY-er 等）单独维护。

此外，它读起来很好:) 例如：

```
describe "Registered User" do
  context 'creating a Post' do
    it "succeeds given all fields are filled out"
    it "displays errors to the author if a field is missing"
  end
end 
```

# javascript - 为什么我的 if 语句总是评估为真？

> ID：13323858
> 
> 赞同：1
> 
> 时间：2012-11-10T16:38:01.993
> 
> 标签：javascript, if-statement

我需要查看一年中的几个月，看看该月的最后一天是 28、29、30 还是 31。我的问题是第一个 if 语句总是评估为真：

```
MOIS_I = 31
if (mois == "Janvier" || "Mars" || "Mai" || "Juillet" || "Août" || "Octobre" || "Décembre" || "1" || "3" || "5" || "7" || "8" || "10" || "12" || "01" || "03" || "05" || "07" || "08") {
            window.alert("Le mois " + mois + " de l'année " + annee + " compte " + MOIS_I + " jours ");
} 
```

此外，似乎有必要这样做`if (mois == "Janver" || mois == "Février" || ... )`，但我想知道是否有更好的方法来做到这一点。

这是完整的代码：

```
 var mois, annee, test4, test100, test400;
    const MOIS_P = 30;
    const MOIS_I = 31;
    const FEV_NORM = 28; 
    const FEV_BISSEX = 29;
    const TEST_4 = 4;
    const TEST_100 = 100;
    const TEST_400 = 400;

    mois = window.prompt("Entrez un mois de l'année", "");
    annee = window.prompt("Entrez l'année de ce mois", "");
    /* MOIS IMPAIRS */
    if (mois == "Janvier" || "Mars" || "Mai" || "Juillet" || "Août" || "Octobre" || "Décembre" || "1" || "3" || "5" || "7" || "8" || "10" || "12" || "01" || "03" || "05" || "07" || "08") {
            window.alert("Le mois " + mois + " de l'année " + annee + " compte " + MOIS_I + " jours ");
    /* MOIS PAIRS */
    } else if (mois == "Février" || "Avril" || "Juin" || "Septembre" || "Novembre" || "2" || "4" || "6" || "9" || "11" || "02" || "04" || "06" || "09") { 
        if (mois == "Février") {
            test4 = parseInt(annee) % TEST_4;
            test100 = parseInt(annee) % TEST_100;
            test400 = parseInt(annee) % TEST_400;
            if (test4 == 0) {
                if (test100 != 0) {
                    window.alert("Le mois " + mois + " de l'année " + annee + " compte " + FEV_BISSEX + " jours ");
                } else {
                    window.alert("Le mois " + mois + " de l'année " + annee + " compte " + FEV_NORM + " jours ");
                }
            } else if (test400 == 0) {
                    window.alert("Le mois " + mois + " de l'année " + annee + " compte " + FEV_BISSEX + " jours ");
            } else {
                window.alert("Le mois " + mois + " de l'année " + annee + " compte " + FEV_NORM + " jours ");
            }
        } else {
            window.alert("Le mois " + mois + " de l'année " + annee + " compte " + MOIS_P + " jours ");
        }           
    } else {
        window.alert("Apocalypse!");
    } 
```

TEST_4、TEST_100、TEST_400 用于测试年份是否为闰年（这意味着 2 月有 29 天而不是 28 天）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:57:57.427

这样做（简单的方法）

```
var last_day=new Date(year,month,-1).getDate() 
```

这将给出一个月的最后一天

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:42:03.283

就`if`语句而言，是的，您总是需要添加`mois ==`部分，否则您将检查字符串“Fevrier”的布尔值，而不是将其与`mois`变量值进行比较。

就您试图达到的一般结果而言，标准库中可能有很多更简单的方法可供您使用。如果这是 JavaScript，请参见例如[这篇文章](http://www.dzone.com/snippets/determining-number-days-month)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T16:50:23.953

以下是我将如何去做：

1.  获取月份并将其转换为数字。您可能需要使用哈希来执行此操作。
2.  获取年份并将其转换为数字，`parseInt()`就像您所做的那样使用。
3.  如果`month % 2 == 1`，则为奇数月：
    *   如果`year % 400 == 0 || year % 100 == 0 || year % 4 == 0`：适当处理闰年。
    *   否则：返回 30。
4.  否则：偶数月，返回 31。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T17:24:36.753

这是针对您的`if()`条件的缩短建议：**RegExp 对象**（尽管这不会回答您的问题）。

```
/^(Janvier|Mars|Mai|Juillet|Août|(Octo|Décem)bre|0?[13578]|1[02])$/.test(mois))
// append i after the last forward slash if you want it not to respect case 
```

是一样的

```
if (
mois == "Janvier" || mois == "Mars" || mois == "Mai" || mois == "Juillet" ||
mois == "Août" || mois == "Octobre" || mois == "Décembre" || mois == "1" ||
mois == "3" || mois == "5" || mois == "7" || mois == "8" || mois == "10" ||
mois == "12" || mois == "01" || mois == "03" || mois == "05" || mois == "07" ||
mois == "08"
) 
```

和

```
if (/^(Février|Avril|Juin|(Sept|Nov)embre|0?[2469]|11)$/.test(mois))
// same thing about the case-insensitive (i) flag here... 
```

是一样的

```
if (
mois == "Février" || mois == "Avril" || mois == "Juin" || mois == "Septembre" ||
mois == "Novembre" || mois == "2" || mois == "4" || mois == "6" || mois == "9" ||
mois == "11" || mois == "02" || mois == "04" || mois == "06" || mois == "09"
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T17:47:02.440

这似乎在没有棘手的日期数学的情况下工作：

```
var SomeDate = new Date(2012, 10);  // November, 2012

SomeDate.setDate(SomeDate.getDate() - 1);  // go back one day

var DaysInMonth = SomeDate.getDate(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-10T17:15:50.840

这是检查一大堆字符串的更好方法。您将所有允许的名称放在一个对象（通常称为地图）中，然后您可以使用一行代码检查该名称是否在地图中：

```
var names = {
    "Janvier": true, "Mars": true, "Mai": true, "Juillet": true, 
    "Août": true, "Octobre": true, "Décembre": true, 
    "1": true, "3": true, "5": true, "7": true, "8": true, "10": true, "12": true, 
    "01": true, "03": true, "05": true, "07": true, "08": true
};

if (names[mois] === true) {
     window.alert("Le mois " + mois + " de l'année " + annee + " compte " + MOIS_I + " jours ");
} 
```

# xcode - Xcode 存档 - 没有应用商店分发配置文件

> ID：13323860
> 
> 赞同：1
> 
> 时间：2012-11-10T16:38:11.583
> 
> 标签：xcode, upload, submit, option

我想将应用上传到应用商店，产品 --> 存档，但是没有“提交到 iOS 应用商店”选项，只有：1.）保存构建的产品 2.）导出为 Xcode 存档

为什么没有选项？这是我第一次遇到这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:39:23.547

确保您已在构建设置屏幕中将所有链接库配置为“跳过安装”为“是”。您也可以单击“验证”以查找潜在问题

# scala - 从文件创建 Vector[Vector[Char]]

> ID：13323862
> 
> 赞同：3
> 
> 时间：2012-11-10T16:38:19.813
> 
> 标签：scala

我是一个新手，试图读取一个文件并创建一个 Vector[Vector[Char]]。文件的每一行都应该产生一个不同的向量。

这是我想出的：

```
val empty: Vector[Vector[Char]]       = Vector()
lazy val lines: List[String]          = Source.fromFile("test.txt").getLines.toList
lazy val vecList: List[Vector[Char]]  = lines.map(str => Vector(str: _*))
lazy val vector: Vector[Vector[Char]] = vecList.foldRight(empty) (_ +: _) 
```

该文件永远不会很大，因此可伸缩性不是问题。上面的代码似乎可以工作，但我觉得它在谷仓里到处都是。有没有更简单、更直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T16:54:50.260

以下是使用 Scala 2.10 的解决方案：

```
source.getLines.to[Vector].map(_.to[Vector]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:02:14.920

正如我在上面的评论中指出的那样，`IndexedSeq`在您需要能够在恒定时间内抓取特定索引处的元素的情况下使用它更为惯用。当前的默认实现`IndexedSeq`是`Vector`，因此如果您编写以下内容：

```
val xs = IndexedSeq(1, 2, 3) 
```

您实际上会`Vector[Int]`在幕后得到 a ，但这只是一个实现细节，因为它是静态类型为`IndexedSeq[Int]`. 如果将来引入新的、性能更高的默认实现，您将免费从更改中受益。

Using`IndexedSeq`还允许您非常简洁地编写此操作，而无需依赖 Scala 2.10 的新`to`方法。假设我们有一个`s`我们正在其他地方打开和关闭的来源，这就是您所需要的：

```
val lines: IndexedSeq[IndexedSeq[Char]] = s.getLines.map(wrapString).toIndexedSeq 
```

Where`wrapString`是一种[`scala.Predef`](http://www.scala-lang.org/api/current/scala/Predef%24.html)支持将字符串视为字符序列的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:16:38.227

```
import scala.io.Source 
```

2.9 或更早版本：

```
Vector() ++ Source.fromFile("test.txt").getLines.map(Vector() ++ _) 
```

2.10 及之后：

```
Source.fromFile("test.txt").getLines.map(_.to[Vector]).to[Vector] 
```

（首先在迭代器上映射，这样您就不必创建两次向量。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:52:18.747

一点改进，避免`foldLeft()`：

```
Vector(Source.fromFile("test.txt").getLines.toSeq: _*) map {l => Vector(l: _*)} 
```

但是请记住，您实际上必须关闭`Source.fromFile("test.txt")`对象。

# sql - 如何获得最多的行程执行次数

> ID：13323865
> 
> 赞同：0
> 
> 时间：2012-11-10T16:38:29.570
> 
> 标签：sql, oracle11g

查找执行次数最多的所有司机的执照号码 (LicenseCardNo)。我无法编写 SQL 选择语句来实现这一点。如果你们能提供帮助将不胜感激。下面是关于我的表格和表格内的值的示例数据？我还附上了我到目前为止所做的代码。

```
 DRIVER(OwnerNo, LicenseCardNo,STATUS,)
 PRIMARY KEY(OwnerNo)
 UNIQUE(LicenseCardNo)
 FOREIGN KEY(OwnerNo) REFERENCES EMPLOYEE(OwnerNo)
 CHECK ( STATUS IN ('MAIN DRIVER', 'DRIVER', 'TAXI DRIVER')) )

 ( A29, DR1, 'MAIN DRIVER' )
 ( A28, DR2, 'MAIN DRIVER' )
 ( A25, DR3, 'TAXI DRIVER' )
 ( A25, DR22, 'DRIVER' )
 ( A20, DR6, 'DRIVER' )
 ( A23, DR7, 'TAXI DRIVER' )
 ( A30, DR8, 'TAXI DRIVER' )

TRIP( TripNo,LicenseCardNo,CarReg,TRIP_DATE,)
PRIMARY KEY (TripNo),
FOREIGN KEY (LicenseCardNo) REFERENCES DRIVER(LicenseCardNo),
FOREIGN KEY (CarReg) REFERENCES TRUCK(CarReg)

( 1, DR1, 'SJG123', ADD_MONTHS(TRUNC(SYSDATE),0)-135 )
( 2, DR2, 'GBC222', ADD_MONTHS(TRUNC(SYSDATE),0)-135 )
( 3, DR1, 'GBC270', ADD_MONTHS(TRUNC(SYSDATE),0)-133 )
( 4, DR3, 'SJG123', ADD_MONTHS(TRUNC(SYSDATE),0)-130 )
( 5, DR22, 'SJG123', ADD_MONTHS(TRUNC(SYSDATE),0)-130 )
( 6, DR22, 'GBC222', ADD_MONTHS(TRUNC(SYSDATE),0)-124 )
( 7, DR7, 'KKK007', ADD_MONTHS(TRUNC(SYSDATE),0)-123 )
( 8, DR1, 'SJG123', ADD_MONTHS(TRUNC(SYSDATE),0)-123 )
( 9, DR2, 'QRT834', ADD_MONTHS(TRUNC(SYSDATE),0)-123 )
(10, DR22, 'GBC270', ADD_MONTHS(TRUNC(SYSDATE),0)-122 ) 
```

这就是我能走多远。不知道如何继续。在互联网的帮助下，我设法实现了这一目标。请指教。

```
SELECT DRIVER.LicenseCardNo AS LICENSE_NO, COUNT(TRIP.TripNo) AS TOTAL_NO_TRIPS
FROM DRIVER LEFT OUTER JOIN TRIP ON DRIVER.LicenseCardNo = TRIP.LicenseCardNo
GROUP BY DRIVER.LicenseCardNo
ORDER BY DRIVER.LicenseCardNo; 
```

此代码列出了每位司机的行程次数。

所以现在我需要找到执行次数最多的所有司机的驾照号码（LicenseCardNo）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:42:21.067

你已经快到那里了。这是使用 Oracle 中的分析函数的一种方法：

```
with q as (
    SELECT DRIVER.LicenseCardNo AS LICENSE_NO, COUNT(TRIP.TripNo) AS TOTAL_NO_TRIPS
    FROM DRIVER LEFT OUTER JOIN TRIP ON DRIVER.LicenseCardNo = TRIP.LicenseCardNo
    GROUP BY DRIVER.LicenseCardNo
)
select licenseCardNo
from (select q.*, rank() over (order by Total_No_Trips order by 1 desc) as ranking
      from q
     ) q1
where ranking = 1
ORDER BY LicenseCardNo; 
```

实际上，我也意识到您的原始查询是不必要的复杂。您不需要重新加入 DRIVER，因为您有许可证号。您可以将其表示为：

```
select licenseCardNo
from (select q.*, rank() over (order by Total_No_Trips order by 1 desc) as ranking
      from (select LicenseCardNo, count(*) as Total_No_Trips
            from trips t
            group by LicenseCardNo
           ) q
     ) q1
where ranking = 1
ORDER BY LicenseCardNo; 
```

此外，如果您只想在输出中首先查看最大数量，那么您可以执行以下操作：

```
order by 2 desc 
```

在您的原始查询中。这将按计数而不是许可证卡号排序。

另一种（通常效率较低）的方法是使用 group by/join 方法：

```
with q as (
    select LicenseCardNo, count(*) as Total_No_Trips
    from trips t
    group by LicenseCardNo
)
select q.*
from q
where Total_No_Trips = (select max(Total_No_Trips) from q) 
```

# mysql - SQL查询获取用户排名

> ID：13323867
> 
> 赞同：0
> 
> 时间：2012-11-10T16:38:45.083
> 
> 标签：mysql, sql, ranking

我正在尝试在 Mysql 中执行查询以获取用户的所有时间排名。对于当月的排名，我设法通过以下要求做到了：

```
SELECT MAX(x.rank) AS rank
  FROM (SELECT 
               t.id_user,
               @rownum := @rownum + 1 AS rank
          FROM screengame_points t
          JOIN (SELECT @rownum := 0) r
          WHERE month = $month
      ORDER BY t.points DESC) x
 WHERE x.id_user = 4 
```

一直以来，我都需要计算所有点的总和，所以我尝试了：

```
SELECT MAX(x.rank) AS rank
  FROM (SELECT 
               t.id_user,
               @rownum := @rownum + 1 AS rank
          FROM screengame_points t
          JOIN (SELECT @rownum := 0) r
    GROUP BY id_user
      ORDER BY sum(t.points) DESC) x
 WHERE x.id_user = 4 
```

（注意“id_user 分组”和“sum(t.points)”）。

但它不起作用。我认为第二个请求中的排名结果是从一个月内得分最高的一个到最差的一个。它不是整个月所有点的总和。

我怎么能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:30:38.507

我怀疑问题是`ORDER BY`在这两种情况下都被优化掉了。在第一种情况下，您可能只是幸运。

MySQL 文档确实说`ORDER BY`在子查询中是允许的。然而，这里有[一个](https://dev.mysql.com/doc/refman/5.5/en/union.html)关于`UNION`.

> 但是，对单个 SELECT 语句使用 ORDER BY 并不意味着行在最终结果中出现的顺序，因为默认情况下 UNION 会产生一组无序的行。因此，在此上下文中使用 ORDER BY 通常与 LIMIT 结合使用，因此它用于确定要为 SELECT 检索的所选行的子集，即使它不一定影响这些行在最终的 UNION 结果。如果 ORDER BY 在 SELECT 中出现时没有 LIMIT，则它会被优化掉，因为无论如何它都没有效果。

我强调这是关于`UNION`条款的；关于简单的子查询，我找不到任何东西。但是，`ORDER BY`在标准 SQL 中是不允许的，除了最外层。原因很简单。. . 表和子查询是无序的。

您可以通过`LIMIT`在子查询中包含子句来欺骗 MySQL。放入足够大的数量以获取所有用户（尽管理论上可以优化掉）。

您有两个其他选项来获取此信息。如果您的表不是太大，您可以使用自连接来获取排名信息。您还可以插入具有自动增量列的临时表；我认为`order by`将在那里工作。（而且我不考虑切换数据库，因为几乎所有其他数据库都支持该`rank`功能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:41:23.863

我找到了一个解决方案，但我认为查询我的执行速度很慢，有很多记录！

```
SELECT WrappedQuery.rank 
FROM (SELECT @rownum := @rownum +1 as rank, id_user
      FROM ( select @rownum := 0 ) sqlvars,
           (SELECT  t.id_user
            FROM screengame_points t
        GROUP BY id_user
            ORDER BY sum(t.points) DESC
        ) x 
     ) WrappedQuery
WHERE id_user = 4 
```

# python - 提取头部标签

> ID：13323870
> 
> 赞同：1
> 
> 时间：2012-11-10T16:39:11.493
> 
> 标签：python, beautifulsoup

我尝试了很多东西，但我无法提取`head`. 有人帮忙吗？

**原始 XML：** [https ://dl.dropbox.com/u/3482709/English_sense_induction.xml.zip](https://dl.dropbox.com/u/3482709/English_sense_induction.xml.zip)

以下是正文：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE corpus SYSTEM "sense-induction.dtd">
<corpus lang="en">
  <lexelt item="explain.v">
    <instance id="explain.v.4" corpus="wsj">
For OPEC , that 's ideal . The resulting firm prices and stability `` will allow both producers and consumers to plan confidently , '' says Saudi Arabian Oil Minister Hisham Nazer . OPEC Secretary-General Subroto <head> explains </head> : Consumers offer security of markets , while OPEC provides security of supply . `` This is an opportune time to find mutual ways { to prevent } price shocks from happening again , '' he says . To promote this balance , OPEC now is finally confronting a long-simmering internal problem .
</instance>
    <instance id="explain.v.10" corpus="wsj">
and given the right conditions , sympathetic to creating some form of life . Surely at some other cosmic address a Gouldoid creature would have risen out of the ooze to <head> explain </head> why , paleontologically speaking , `` it is , indeed , a wonderful life . '' Mr. Holt is a columnist for the Literary Review in London .
</instance>
    <instance id="explain.v.76" corpus="wsj">
`` You ca n't build on your hit-and-miss five-seventeen '' . `` What are you playing '' ? ? Owen asked . `` I 'm just logging '' , the cowboy <head> explained </head> . `` I keep all these plays in this little black book , and I watch over a twelve-hour period to find out what numbers are repeating . But roulette 's not my game .
</instance>
  </lexelt>
  <lexelt item="position.n">
    <instance id="position.n.288" corpus="wsj">
But not everybody was making money . The carnage on the Chicago Board Options Exchange , the nation 's major options market , was heavy after the trading in S&amp;P 100 stock-index options was halted Friday . Many market makers in the S&amp;P 100 index options contract had bullish <head> positions </head> Friday , 
</instance>
    <instance id="position.n.123" corpus="wsj">
An explosion at the Microbiology and Virology Institute in Sverdlovsk released anthrax germs that caused a significant number of deaths . Since Mr. Shevardnadze did not address this topic before the Supreme Soviet , the Soviet Union 's official <head> position </head> remains that the anthrax deaths were caused by 
</instance>
  </lexelt>
</corpus> 
```

**编辑**

问题是我忘记了`xml`第二个论点：解决方案是`soup = BeautifulSoup(xml_data, 'xml')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:44:21.427

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(xml_data, 'xml')
head_datas = [head.get_text() for head in soup.find_all('head')]

head_datas
>>> [' explains ', ' explain ', ' explained ', ' positions ', ' position '] 
```

如果仅包含一个子字符串，您也可以使用该`.string`属性：`<head>`

```
head_datas = [head.string for head in soup.find_all('head')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:50:54.927

```
>>> t = '''<?xml ...'''
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup(t)
>>> soup.find('head')
<head> explains </head>
>>> _.text
' explains ' 
```

当您使用有效的 XML 结构时，您还可以使用不同的 XML 解析器，例如 ElementTree：

```
>>> from xml.etree import ElementTree
>>> tree = ElementTree.fromstring(t)
>>> tree.find('.//head')
<Element 'head' at 0x00000000031226D8>
>>> _.text
' explains ' 
```

# javascript - 如何将隐藏元素移动到另一个元素上并平滑淡入？

> ID：13323872
> 
> 赞同：1
> 
> 时间：2012-11-10T16:39:17.797
> 
> 标签：javascript, css, events

我有两个主要元素 - 一些文本在一行上有一个选择框，一个 div 在另一行上有一个 gif 微调器图像。最初，我将微调器设置为显示：无。

即使这是一个更大的企业应用程序的一部分（所以事件处理等在这里并不是一个真正的问题）。但是每当发生某些事件（即单击按钮）时，我想做的事情是：

1.  隐藏的微调器元素移动以保证用文本 + 选择框完全覆盖该行，而不会使线条整体变大 - 理想情况下，它应该恰好适合文本 + 选择框覆盖的确切空间
2.  平滑淡入微调器并将背景元素淡出为 100% 白色

[http://jsfiddle.net/Dh4vb/15/](http://jsfiddle.net/Dh4vb/15/)
代码：

```
<div id="wrapper">
    on the <select id="select"></select> of the Month
<div id="spinner"></div>
</div>​

#wrapper {
    margin: 50px;
}

#spinner {
    width: 150px;
    height: 25px;
    background-image: url('http://fedoraproject.org/w/uploads/2/29/Artwork_DesignService_fedora-spinner.gif');
    background-repeat:no-repeat;
    background-size:contain;
    background-position:center; 

    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;
    transition: opacity .5s ease-in-out;
    display:none;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:01:25.913

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/8MJH4/](http://jsfiddle.net/jfriend00/8MJH4/)。我在演示中延长了过渡时间，以便您可以更清楚地看到过渡工作。这是一个稍微高级一点的版本，可以用作切换：http: [//jsfiddle.net/jfriend00/kwr4m/](http://jsfiddle.net/jfriend00/kwr4m/)。

这个想法是你用绝对位置定位微调器（所以它在文本的顶部），但最初`opacity: 0`是不可见的。然后，您将文本的不透明度更改为`0`和微调器的不透明度，`1`两者都设置为不透明度 CSS 过渡。这是代码：

JS：

```
function run() {
    var spinner = document.getElementById("spinner");
    var fadeText = document.getElementById("fadeText"); 

    // make spinner visible
    spinner.style.opacity = 1;

    // make text not visible
    fadeText.style.opacity = 0;
}​ 
```

HTML：

```
<button id="go" onclick="run()">Go</button>
<div id="wrapper">
    <div id="fadeText" class="fadeTransition">
    on the <select id="select"></select> of the Month
    </div>
    <div id="spinner" class="fadeTransition"></div>
</div>​ 
```

CSS：

```
#wrapper {
    margin: 50px;
    position: relative;
}

#spinner {
    position: absolute;
    top: 0;
    bottom: 0;
    opacity: 0;
    width: 150px;
    height: 25px;
    background-image: url('http://fedoraproject.org/w/uploads/2/29/Artwork_DesignService_fedora-spinner.gif');
    background-repeat:no-repeat;
    background-size:contain;
    background-position:center; 
}

.fadeTransition {
    -webkit-transition: opacity 2s ease-in-out;
    -moz-transition: opacity 2s ease-in-out;
    -o-transition: opacity 2s ease-in-out;
    transition: opacity 2s ease-in-out;
}
​ 
```

# sharepoint - Sharepoint 的协作图表中的交换轴

> ID：13323879
> 
> 赞同：0
> 
> 时间：2012-11-10T16:39:45.043
> 
> 标签：sharepoint, fusioncharts

我是 Collabion Charts 的超级新手。话虽如此，有没有办法为任何图表交换轴？

例如，我不希望柱形图成为条形图。我只想交换轴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:38:40.797

无法使用 Collabion 图表交换轴。

# java - 将数据从类传递到活动

> ID：13323880
> 
> 赞同：1
> 
> 时间：2012-11-10T16:39:53.327
> 
> 标签：java, android, interface, touch, getter

我有一个活动和一个扩展的 View 类，它们都使用相同的 xml 布局。在扩展视图中，我通过触摸在屏幕上进行了一些绘图，并且希望在用户点击屏幕时将触摸的坐标 x 传递给 Activity。

到目前为止，我已经使用了一个 getter 方法并从 Activity 内部调用它，但它只传递了构造函数 X 的初始化值，而不是用户触摸的实际 X 坐标。

我很确定我错过了一些东西。你能给我一些方向吗？

**编辑：** 正如建议的那样，我尝试使用公共接口，而不是 getter 实践，但 X 仍然没有改变。这是我的代码：

我的自定义类：

```
public class ImageView1 extends View  {

 Context context;

 ArrayList<ViewWasTouchedListener> listeners = new 
                                   ArrayList<ViewWasTouchedListener>();
 ImageView1 img = (ImageView1) findViewById (R.id.imageView1);

 public float x=0;
 public float y=0;

 public ImageView1(Context context) {
        super(context);
        this.context=context;
        setFocusable(true);
    }

public ImageView1(Context context, AttributeSet attrs) {
    super(context, attrs); 
    this.context=context;
    setFocusable(true);

} 

@Override
public boolean onTouchEvent(MotionEvent event){
        switch (event.getAction()){
        case (MotionEvent.ACTION_DOWN): {

                 x = event.getX();
                 y = event.getY();
     for (ViewWasTouchedListener listener:listeners){
         Log.d("Touchpoint", String.valueOf(x) +"," + String.valueOf(y));
         listener.onViewTouched(x);
        }
    }

    return true;

   }  

@Override
public void onDraw(Canvas canvas){
    super.onDraw(canvas);

    ....
}

public void setWasTouchedListener(ViewWasTouchedListener listener){
    listeners.add(listener);
}   
} 
```

我的主要活动：

```
 public class TargetPractise extends Activity implements ViewWasTouchedListener  {
 @Override

 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.target_form);

    ImageView1 value = new ImageView1(TargetPractise.this);
    value.setWasTouchedListener(TargetPractise.this);   

 }

  public void onViewTouched(float x){
     Log.d("x",String.valueOf(x));

  }   
  } 
```

我的界面：

```
 public interface ViewWasTouchedListener {
void onViewTouched(float x);
 } 
```

我的xml布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

 <android.archer.test.ImageView1
  android:id="@+id/imageView1"
  android:layout_width="300dip"
  android:layout_height="300dip"
  android:layout_gravity="center_horizontal"
  android:background="@drawable/target" >
</android.archer.test.ImageView1> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:56:26.643

定义一个接口并使用回调让活动知道 x 已更改。我喜欢这种方法，因为它适用于任何有兴趣知道 x 何时发生变化的班级，而不仅仅是您的活动。想象一下，您添加了一种新类型的视图类，但它还需要知道您的自定义视图何时被触摸（我使用图形以及可以拖动的水平和垂直刻度来执行此操作 - 刻度告诉任何感兴趣的人他们已经改变） .

```
public Interface ViewWasTouchedListener {
    void onViewTouched(float x);
} 
```

在您的自定义视图中

```
ArrayList<ViewWasTouchedListener> listeners = new ArrayList<ViewWasTouchedListener>();

...

public void setWasTouchedListener(ViewWasTouchedListener listener){
    listeners.add(listener);
} 
```

在你的触摸事件中

```
for (ViewWasTouchedListener listener:listeners){
   listener.onViewTouched(x);
} 
```

在您的活动中：

```
public class Test extends Activity implements ViewWasTouchedListener {

...

@Override
public void onCreate(Bundle savedInstanceState) 
{
    ...
    MyExtendedView customView = (MyExtendedView)findViewById(R.id.myCustomeView);
    customView.setWasTouchedListener(this);
    ...
}

public void onViewTouched(float x){
   // do whatever you need to do
} 
```

全部来自记忆，所以请原谅拼写错误，您应该通过添加 removeViewWasTouchedListener 并检查您没有在 setViewWasTouchedListener 中添加两次相同的侦听器来改进视图类。

您可能也需要 y ，因此只需将其添加到接口定义中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:48:07.267

你应该覆盖 onTouch() 试试这个，

```
 @Overrride
   public boolean onTouch(View v, MotionEvent event) {

   int xPoint = event.getX();
   int yPoint = event.getY();
   return true;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T10:52:34.600

在获得一些帮助并改变了一些事情之后，我的代码可以做我想做的事情：

我的活动：

```
 public class TargetPractice extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            final View viewMain; 

            setContentView((viewMain = View.inflate(this, R.layout.main, null))); 

            new MyImageView(this, viewMain,
                            new TargetInterface() {

                                    @Override
                                    public void OnTouchEventDown(float x, float y) {                                                
                                            Log.w("MYPRG", String.format("%f, %f", x, y));
                                    }
                            });
    }        
 } 
```

我的自定义类：

```
 public class MyImageView extends View implements View.OnTouchListener {

    Context context;

            private TargetInterface iTarget = null;

            public float x=0;
            public float y=0;                       

            public float getx() { 
              return this.x;
                             }

            public MyImageView(Context context, View view, TargetInterface iTarget) 
            {
                            super(context);
                            this.context=context;                           
                            this.iTarget=iTarget;   // bind TargetInterface

                            setFocusable(true);
                            view.setOnTouchListener(this);
            }               

            @Override               
            public boolean onTouchEvent(MotionEvent event)  
            {
                    switch (event.getAction())
                    {
                              case MotionEvent.ACTION_DOWN: 
                              {
                                            x = event.getX();
                                            y = event.getY();

                                            return true;
                              }                               
                    }

               return false;
            }
                @Override
                public void onDraw(Canvas canvas){
                super.onDraw(canvas);

                 ....
              }
          public boolean onTouch(View v, MotionEvent event) {
              x = event.getX();
              y = event.getY();
             iTarget.OnTouchEventDown(x, y);
            return false;
}                               
   } 
```

我的界面：

```
 public interface TargetInterface {

          public void OnTouchEventDown(float x, float y);

    } 
```

# ruby-on-rails-3 - Sqlite3 参考部署简单的 Heroku Rails 应用程序

> ID：13323887
> 
> 赞同：3
> 
> 时间：2012-11-10T16:40:28.137
> 
> 标签：ruby-on-rails-3, postgresql, heroku, sqlite

我在 Heroku 上部署一个非常简单的示例 Rails 应用程序时遇到问题。这个应用程序使用一个数据库。

在使用 sqlite3 的本地（OSX）中没有问题，但我无法推送到 Heroku，因为有些丢失了对 sqlite3 的引用。

我在 Gemfile 中区分了测试、开发和生产环境：

```
#gem 'sqlite3'
group :development, :test do
    gem 'sqlite3'
end
group :production do
   gem 'pg'
end 
```

并捆绑没有问题：

```
bundle install --without production 
```

但是当我部署到 Heroku 时：

```
git push heroku master 
```

我有一些对 sqlite3 的参考并得到一个错误。

我已经尝试在我的 OSX 上安装 postgresql，并在 Gemfile 上仅捆绑“gem 'pg'”，但我也参考了 sqlite3

我应该怎么办？我需要在 Heroku 上进行一些额外的配置才能使用 postgre 数据库吗？

这是我在 git push 到 heroku master 时遇到的常见错误：

```
 git push heroku master
Counting objects: 87, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (76/76), done.
Writing objects: 100% (87/87), 30.32 KiB, done.
Total 87 (delta 2), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.1
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from https://rubygems.org/.........
       Fetching gem metadata from https://rubygems.org/..
       Installing rake (0.9.2.2)
       Installing i18n (0.6.1)
       Installing multi_json (1.3.7)
       Installing activesupport (3.2.8)
       Installing builder (3.0.4)
       Installing activemodel (3.2.8)
       Installing erubis (2.7.0)
       Installing journey (1.0.4)
       Installing rack (1.4.1)
       Installing rack-cache (1.2)
       Installing rack-test (0.6.2)
       Installing hike (1.2.1)
       Installing tilt (1.3.3)
       Installing sprockets (2.1.3)
       Installing actionpack (3.2.8)
       Installing mime-types (1.19)
       Installing polyglot (0.3.3)
       Installing treetop (1.4.12)
       Installing mail (2.4.4)
       Installing actionmailer (3.2.8)
       Installing arel (3.0.2)
       Installing tzinfo (0.3.35)
       Installing activerecord (3.2.8)
       Installing activeresource (3.2.8)
       Installing coffee-script-source (1.4.0)
       Installing execjs (1.4.0)
       Installing coffee-script (2.2.0)
       Installing rack-ssl (1.3.2)
       Installing json (1.7.5) with native extensions
       Installing rdoc (3.12)
       Installing thor (0.16.0)
       Installing railties (3.2.8)
       Installing coffee-rails (3.2.2)
       Installing jquery-rails (2.1.3)
       Using bundler (1.2.1)
       Installing rails (3.2.8)
       Installing sass (3.2.2)
       Installing sass-rails (3.2.5)
       Installing sqlite3 (1.3.6) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_28i7zx40b8bao/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_28i7zx40b8bao/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !     
 !     Detected sqlite3 gem which is not supported on Heroku.
 !     http://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:pure-reaches-4621.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:pure-reaches-4621.git' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T15:17:59.160

我已经解决了这个问题。这是对 git 的不好使用。

我需要更新 Gemfile 和 Gemfile.lock 中的更改：

首先编译：

```
$ bundle 
```

然后：

```
$ git add Gemfile
$ git add Gemfile.lock

$ git commit -m 'Added pg adapter gem'
$ git push heroku master 
```

现在 Heroku 更新正常

现在运行 postgresql 数据库：

```
$ heroku run rake db:migrate 
```

再见！

# actionscript-3 - 发布到网站后，AS3 rpc 调用似乎无法正常工作

> ID：13323890
> 
> 赞同：0
> 
> 时间：2012-11-10T16:41:07.637
> 
> 标签：actionscript-3

所以这真的很奇怪。我有一个 SWF，可以进行一些 Web 服务调用。当通过 flash builder 运行它，甚至双击 swf 并让它在 IE 中运行时，它工作正常。但是一旦我真正将它发布到我们的网站，似乎 rpc 调用失败但没有调用失败处理程序。似乎什么都没有发生。

我尝试调试它，但它只能进行调用，然后没有别的，因为代码的重置是基于调用的成功。

还有其他调试方法吗？

编辑：事实证明我遇到了一个错误。错误：由于缺少策略文件权限，来自 http://localhost:58432 /xxxx/xxx.swf 的请求者对[https://xxxx.asmx?WSDL的资源请求被拒绝。](https://xxxx.asmx?WSDL)

我确实有以下 crossdomain.xml

```
<?xml version="1.0" ?>
<cross-domain-policy>
  <site-control permitted-cross-domain-policies="master-only"/>
  <allow-access-from domain="*" secure="false"/>
  <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

我正在使用 Security.loadPolicyFile("https://www.xxx.com/crossdomain.xml");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:02:23.807

我将我的跨域更改为此，现在它可以工作了：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM
"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-http-request-headers-from domain="*" headers="*" secure="false" />
  <allow-access-from domain="*" secure="false" to-ports="80, 8080, 443"/>
</cross-domain-policy> 
```

# android - NotificationManager.notify 锁定手机和模拟器

> ID：13323892
> 
> 赞同：5
> 
> 时间：2012-11-10T16:41:26.450
> 
> 标签：android, android-notifications

**问题：**

手机/模拟器会锁定重复的通知更新。让模拟器在锁定后恢复响应的唯一方法是按给定顺序按 Home => Menu => Lock => Home => Menu Button。

**代码：**

通知推送代码：

```
 // Set up notifcation views
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
        NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE); // Get notification manager
        RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.service_notification);
        contentView.setViewVisibility(R.id.current_error_text, View.GONE);
        contentView.setViewVisibility(R.id.error_text, View.GONE);
        contentView.setViewVisibility(R.id.info_error_text, View.GONE);
        contentView.setViewVisibility(R.id.info_text, View.GONE);
        contentView.setViewVisibility(R.id.next_check_in_text, View.VISIBLE);
        contentView.setViewVisibility(R.id.current_profile_text, View.VISIBLE);
        contentView.setViewVisibility(R.id.profile_name_text, View.VISIBLE);
        contentView.setTextViewText(R.id.next_check_in_text, mainText);
        // Set profile text now
        contentView.setTextViewText(R.id.profile_name_text, miniText);
        // Set up a new notification
        Notification notif = new Notification(R.drawable.service_logo_small, "Service is running", System.currentTimeMillis());
        notif.contentView = contentView; // Set content view
        // Create and plug in the PendingIntent
        Intent notifIntent = new Intent(this, EntryPointActivity.class);
        PendingIntent pIntent = PendingIntent.getActivity(this, 0, notifIntent, 0); // Set up the Pending Intent
        notif.contentIntent = pIntent;
        // Now set up notification flags
        notif.flags |= Notification.FLAG_NO_CLEAR;
        notif.flags |= Notification.FLAG_ONGOING_EVENT;
        notif.flags |= Notification.FLAG_FOREGROUND_SERVICE;
        if(sp.getBoolean("UpdateLights", true)) notif.flags |= Notification.DEFAULT_LIGHTS;
        if(sp.getBoolean("UpdateVibrate", true)) notif.flags |= Notification.DEFAULT_VIBRATE;
        if(sp.getBoolean("UpdateSound", true)) notif.flags |= Notification.DEFAULT_SOUND;

        notificationManager.notify(R.string.app_name, notif); 
```

所有对象都存在并且项目编译完美。我没有遇到 NullPointerExceptions！

调用通知创建函数的代码：

```
final Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask(){
@Override
public void run() {
    if(( nextUpdateIn - System.currentTimeMillis() ) > 0) {
        long milliseconds = (nextUpdateIn - System.currentTimeMillis());
        int seconds = (int) (milliseconds / 1000) % 60 ;
        int minutes = (int) ((milliseconds / (1000*60)) % 60);
        String toShow = "Next Check In: " + minutes + " minute" + ((minutes != 1) ? "s" : "") + " " + seconds + " second" + ((seconds != 1) ? "s" : "");
        pushNotification(STATE_LOADEDSUCCESSFULLY, currentProfile.getProfileName(), toShow);
    } else {
        currentState = STATE_RELOADING;
        pushNotification(STATE_RELOADING, null, "Refreshing..");
        timer.cancel();
    }
}
}, 1, 999); 
```

同样，所有对象都存在！通知在上述过程中已**更新**，但如上所述锁定了**模拟器和电话**！

**目标：**

更新状态栏中的通知以基本上显示倒计时，直到下一次刷新。

请帮助我尽快摆脱这个错误！

提前致谢 ：）

问候，

阿克希特·苏塔

**编辑：**

我正在尝试通过**SERVICE**运行此代码，并且我已经尝试过运行 Android 2.2、2.3.3、4.1 的模拟器，它们都给了我同样的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:14:05.450

您用于显示和更新通知的代码工作正常。

在我看来，唯一的原因可能是同时构建了许多计时器。`timer.scheduleAtFixedRate()`由于初始延迟为 1 毫秒，如果通过某个意外循环调用，您可能会使用数百个通知更新锁定系统。我建议在该行上放置一个断点并找出发生这种情况的原因。

我有两个额外的建议：

1.  请记住，`Notification`现在不推荐使用构造函数，您可能应该考虑使用通知构建器，例如 Jake Wharton 的[NotificationCompat2](https://github.com/JakeWharton/NotificationCompat2)。
2.  建议使用[`ScheduledThreadPoolExecutor`](http://developer.android.com/reference/java/util/concurrent/ScheduledThreadPoolExecutor.html)而不是`Timer`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:56:50.767

我同意@Paul Lammertsma 的观点，假设您的代码会产生很大的负载。但是，每 999 毫秒执行一次计时器任务不会有问题，我想问题出在您的“通知推送代码”中。无论如何，您应该使用[方法分析](http://developer.android.com/tools/debugging/debugging-tracing.html)来确定瓶颈是什么。

PS我认为，您的代码中有一个小错误：

```
if (( nextUpdateIn - System.currentTimeMillis() ) > 0) {
    long milliseconds = (nextUpdateIn - System.currentTimeMillis());
    // milliseconds may still be negative here
    ... 
```

你可能想要这个：

```
long milliseconds = nextUpdateIn - System.currentTimeMillis();
if (milliseconds > 0) {
    ... 
```

PPS 为什么要用`Notification.FLAG_FOREGROUND_SERVICE`flag？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T13:39:15.987

好吧，我终于知道问题出在哪里了。

您可能也对此链接感兴趣：[http ://code.google.com/p/android/issues/detail?id=13941#c12](http://code.google.com/p/android/issues/detail?id=13941#c12)

因此，根据上面的链接，每次调用通知推送函数时，我都会停止创建一个新的**Notification对象。**现在，我创建了一次对象并继续重复使用它！这已经停止了模拟器锁定！

以下是**通知推送代码**的修改：

```
 // Set up notifcation views
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.service_notification);
    contentView.setViewVisibility(R.id.current_error_text, View.GONE);
    contentView.setViewVisibility(R.id.error_text, View.GONE);
    contentView.setViewVisibility(R.id.info_error_text, View.GONE);
    contentView.setViewVisibility(R.id.info_text, View.GONE);
    contentView.setViewVisibility(R.id.next_check_in_text, View.VISIBLE);
    contentView.setViewVisibility(R.id.current_profile_text, View.VISIBLE);
    contentView.setViewVisibility(R.id.profile_name_text, View.VISIBLE);
    contentView.setTextViewText(R.id.next_check_in_text, mainText);
    // Set profile text now
    contentView.setTextViewText(R.id.profile_name_text, miniText);
    // Set up a new notification
    notif.contentView = contentView; // Set content view
    // Create and plug in the PendingIntent
    Intent notifIntent = new Intent(this, EntryPointActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, notifIntent, 0); // Set up the Pending Intent
    notif.contentIntent = pIntent;
    // Now set up notification flags
    notif.flags |= Notification.FLAG_NO_CLEAR;
    notif.flags |= Notification.FLAG_ONGOING_EVENT;
    notif.flags |= Notification.FLAG_FOREGROUND_SERVICE;
    if(sp.getBoolean("UpdateLights", true)) notif.flags |= Notification.DEFAULT_LIGHTS;
    if(sp.getBoolean("UpdateVibrate", true)) notif.flags |= Notification.DEFAULT_VIBRATE;
    if(sp.getBoolean("UpdateSound", true)) notif.flags |= Notification.DEFAULT_SOUND;

    notificationManager.notify(R.string.app_name, notif); 
```

您可能会看到**NotificationManager**和**Notification**不再在通知推送代码中创建。

以下是我对计时器所做的更改：

```
NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE); // Get notification manager
Notification notif = new Notification(R.drawable.service_logo_small, "Service is running", System.currentTimeMillis());
final Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask(){
@Override
public void run() {
    if(( nextUpdateIn - System.currentTimeMillis() ) > 0) {
        long milliseconds = (nextUpdateIn - System.currentTimeMillis());
        int seconds = (int) (milliseconds / 1000) % 60 ;
        int minutes = (int) ((milliseconds / (1000*60)) % 60);
        String toShow = "Next Check In: " + minutes + " minute" + ((minutes != 1) ? "s" : "") + " " + seconds + " second" + ((seconds != 1) ? "s" : "");
        pushNotification(STATE_LOADEDSUCCESSFULLY, currentProfile.getProfileName(), toShow);
    } else {
        currentState = STATE_RELOADING;
        pushNotification(STATE_RELOADING, null, "Refreshing..");
        timer.cancel();
    }
}
}, 1, 999); 
```

如您所见，我在计时器中重用了对象**notificationManager**和**notif**，因此 CPU 不会在每次执行 Timer 时重新创建 Notification 对象。

因此，通过上述代码更改，我的代码现在可以完美运行！

谢谢你帮助我。

# android - 使用基于填充的阴影定位缩放的图像视图的正确 .xml 是什么？

> ID：13323893
> 
> 赞同：1
> 
> 时间：2012-11-10T16:41:36.110
> 
> 标签：android, imageview, scale, padding, shadow

我已经按照[此处](https://stackoverflow.com/questions/3693234/custom-imageview-with-drop-shadow)的 Stackoverflow 帖子使用 9_patch 添加阴影。但是，它要么在我的布局中有趣地缩放，要么没有在我的手机上呈现。

布局由根水平线性布局组成。第一项是带有我的图片的图像视图。第二项是带有按钮的表格视图。图像和表格应该缩放到屏幕的一半，所以我将两个权重都设置为 1。我将图像视图比例设置为 width=fit_content 和 height=match_parent 并相应地缩放。但是，无论我尝试什么，都错误地应用了背景图像和填充。每边的单独填充被忽略，我只能应用统一的填充，但图像视图的背景从上到下延伸。实际上，虽然我可以将图像缩放到所需的大小，但 imageview 背景似乎适合不同的尺寸。

我需要使用包含布局吗？

编辑：这是 .xml 代码。我尝试了各种变化，但都没有成功。

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:background="@drawable/dropshadowt"
    android:paddingBottom="10dp"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingTop="10dp"
    android:scaleType="fitCenter"
    android:src="@drawable/x2c2" />

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/sgfill" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>
</TableLayout> 
```

# javascript - 我的 jQuery Cookie 在 DIV 上不起作用

> ID：13323894
> 
> 赞同：1
> 
> 时间：2012-11-10T16:41:40.180
> 
> 标签：javascript, jquery, cookies

所以我有这个功能来关闭消息警报（弹出模型）。这可以正常工作。非常简单的 jQuery。但是，我正在尝试添加一个 cookie，当用户关闭弹出模型时，如果他们在同一会话中再次访问该页面，该模型将不会再次弹出。我希望 cookie 在浏览器关闭后过期或删除。虽然无法让它工作......我做错了什么？

我正在使用这个脚本： [https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

```
// Update Prompt: Hide on 'X' click
function setsomecookie(){ // adds cookie 1 day
    $.cookie('message_prompt', 'prompt_closed');
}    
$('.updateCloseBTN').click(function () {
    $('.upgradeWrap').fadeOut(400, setsomecookie);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:53:55.033

我将从 .css 中的“#message_alert_box”设置为 {display:none;} 开始

然后，当用户从一个页面转到另一个页面时，您需要验证 cookie 是否具有特定值

```
$(document).ready( function(){

    if($.cookie('message_prompt') != 'prompt_closed') {

        $('#message_alert_box').show(); // If the cookie isn't set to 'prompt_close' , then show the alert box

    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:51:54.893

确保您的文档包含在`document.ready()`函数中。

```
$(document).ready(
   //all body code within here. 
}); 
```

# javascript - CSS3 比例变换和定位

> ID：13323902
> 
> 赞同：1
> 
> 时间：2012-11-10T16:42:30.170
> 
> 标签：javascript, css

所以我正在做一个项目，我需要在窗口调整大小时缩放 div（及其包含的所有元素）。我的想法是使用 CSS3 比例变换。但是，当我调整大小时，我发现 div 缩小到窗口的中间，而不是停留在我放置它的位置。

这是一个（非常）简单的例子，我希望在我的意思时能说明：http: [//jsfiddle.net/hmY9q/3/——](http://jsfiddle.net/hmY9q/3/)我想看到的是蓝色框与结果框的边框齐平和红色框的底部。

我解决问题的第一个想法是计算我希望 div 所在的位置与它实际出现的位置之间的差异，并使用变换矩阵同时缩放和平移。我无法让它正常工作，这似乎是一个低效且不优雅的解决方案。

这是代码（显然不会让我发布没有代码的问题）：

```
var yShift = (container.height() * scale) - container.height();
var xShift = (container.width() * scale) - container.width();
container.css(browserID + "transform", "matrix("+ scale + ",0,0," + scale + "," + -xShift + "," + -yShift + ")"); 
```

注意：我正在用 haxe 编程并编译为 js，所以这就是代码有点不同的原因。'container' 是一个 JQuery 对象，可以视为一个对象。

那么，有没有人能想到一些神奇的 CSS 或 javascript 来简化这一点？我是不是在吃疯狂的药片而错过了一些非常愚蠢的东西？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:52:06.547

这很简单[`transform-origin`。](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)

例如：`transform-origin: top left;`

[演示](http://jsfiddle.net/hmY9q/4/)

# javascript - 如何将自定义搜索组件嵌套在主面板中？

> ID：13323906
> 
> 赞同：0
> 
> 时间：2012-11-10T16:43:18.773
> 
> 标签：javascript, sencha-touch

嗨，我想知道如何获得：

```
Ext.define("GS.view.search", {
extend : 'Ext.form.Panel',
xtype : 'fieldsetform',
requires : [ 'Ext.form.FieldSet' ],

config : {
    width : 350,
    pack : 'start',
    align : 'start',
    items : [ {
        xtype : 'fieldset',

        items : [ {
            xtype : 'searchfield',
            name : 'query',
            placeHolder : 'Beneficios, premios o lugares',
            border : 1
        }, {
            xtype : 'searchfield',
            name : 'query',
            placeHolder : 'Beneficios, premios o lugares',
            border : 1
        } ]

    } ]
}
}); 
```

在以下面板内（Ext.create，不工作）：

```
var search = Ext.create("GS.view.search");
Ext.define("GS.view.Home", {
        extend : 'Ext.Panel',
        xtype : "panelhome",
        fullscreen : true,
        layout : 'vbox',
        requires : ['GS.view.search'],

        config : {
            title : 'Home',
            iconCls : 'home',
            cls : 'home',
            scrollable : true,
            stylehtmlContent : true,
            contentEl:'searchid',

            items : [{
                        xtype : 'panel',
                        width : '100%',
                        flex : 1,
                        style : 'background-color: #FFFFF',
                        layout : 'hbox',
                        items : [search]
                    }]
        }
    }); 
```

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:15:05.717

咕咕咕！

```
Ext.define("GS.view.search", {
extend : 'Ext.Panel',
id : 'searchid',
alias: "widget.search",

requires : [ 'Ext.form.FieldSet' ],

config : {
    width : 350,
    pack : 'start',
    align : 'start',
    items : [ {
        xtype : 'fieldset',

        items : [ {
            xtype : 'searchfield',
            name : 'query',
            placeHolder : 'Beneficios, premios o lugares',
            border : 1
        }, {
            xtype : 'searchfield',
            name : 'query',
            placeHolder : 'Beneficios, premios o lugares',
            border : 1
        } ]

    } ]
}
});

var search = new Ext.create('GS.view.search');

Ext.define("GS.view.Home", {
extend : 'Ext.form.Panel',
xtype : "panelhome",
fullscreen : true,
layout : 'vbox',
requires : ['GS.view.search'],

config : {
    title : 'Home',
    iconCls : 'home',
    cls : 'home',
    scrollable : true,
    stylehtmlContent : true,

    items : [{
        xtype : 'panel',
        width : '100%',
        flex : 1,
        style : 'background-color: #FFFFF',
        layout : 'hbox',
        items : [search]
        }]
}
}); 
```

# java - 无法将对象添加到数组列表中

> ID：13323909
> 
> 赞同：-2
> 
> 时间：2012-11-10T16:43:50.800
> 
> 标签：java, list, struts2, arraylist

我正在尝试将一个对象添加到存储在会话中的 ArrayList 中。

该对象似乎没有被添加。

请检查我的以下代码并为此建议我一个正确的答案。

在调试时，我的调试器会一直运行到这段代码`books.add(book);`，然后它会跳过剩余的代码。我知道问题就在这里`books.add(book);`。书籍详细信息未添加到我的 arraylist`books`中。

AddBookToSession.java

```
 public class AddBookToSession extends ActionSupport {
         Bookdetails book=new Bookdetails();
            List<Bookdetails> books = new ArrayList<Bookdetails>();

            BookdetailsDAO dao = new BookdetailsDAO(); 
      Map session = ActionContext.getContext().getSession();

        public String execute()
        { 
            HttpServletRequest request = ServletActionContext.getRequest();  
            String bookid = request.getParameter("bid");    
            books = (List) session.get( BillTransactionBooksConstants.BOK ); 
          for(int i=1;i<=1;i++)
        {
          book = dao.listBookDetailsById(Integer.parseInt(bookid));    
          books.add(book); //problem is here obj book is not adding into books list

          books = new ArrayList<Bookdetails>();

          System.out.println("---------------Bookid-"+book); 
        }
        ....................
                ............... 
```

struts.xml

```
 <package name="testwithrowselect" extends="struts-default" >  
                    <action name="InsertbooksToSession" class="v.esoft.actions.booktransaction.AddBookToSession">
                        <result name="success">/jspHomepage/bookstransaction/shortBill.jsp</result>  
                    </action>
         </package> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:00:46.690

您向会话添加一个新的空列表：

```
for (int i = 1; i <= 1; i++) {
    book = dao.listBookDetailsById(Integer.parseInt(bookid));    
    books.add(book);
    books = new ArrayList<Bookdetails>(); // <-- Now it's a new, empty list?!
}
session.put(BillTransactionBooksConstants.BOK, books); 
```

也就是说，您的操作代码应该看起来更接近这个（未经测试）：

```
public class AddBookToSession extends ActionSupport implements SessionAware {

    private Integer bid;
    private Map<String, Object> session;

    private BookdetailsDAO dao = new BookdetailsDAO(); 

    public String execute() { 
        BookDetails book = dao.listBookDetailsById(Integer.parseInt(bookid));
        if (book != null) {
            List<Bookdetails> books = sessionBooks();
            books.add(book);
        }

        return SUCCESS;
    } 

    private List<Bookdetails> sessionBooks() {
        List<Bookdetails> books = (List) session.get(BillTransactionBooksConstants.BOK);
        if (books == null) {
            books = new ArrayList<BookDetails>();
            session.put(BillTransactionBooksConstants.BOK, books);
        }
        return books;
    }

    public void setSession(Map<String, Object> session) {
        this.session = session;
    }

    public Integer getBid() {
        return this.bid;
    }

    public void setBid(Integer bid) {
        this.bid = bid;
    }
} 
```

请注意，像这样实例化书籍 DAO 可能会使测试变得比必要的更困难。

# ruby-on-rails - Ruby on Rails 与 Postgis

> ID：13323914
> 
> 赞同：0
> 
> 时间：2012-11-10T16:44:44.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, migration

我想在我的 postgres 数据库中创建一个表，其中一列是 multipolgyon。我怎么做？

我所做的事情因此失败了 `undefined method multipolygon for #<ActiveRecord::ConnectionAdapters::PostgreSQLTableDefinition:0x4ac6f70>`：

使用此迁移：

```
class CreateBezirkes < ActiveRecord::Migration
  def change
    create_table :bezirkes do |t|
      t.string :NameK
      t.integer :BezNr
      t.string :Bez_Rz
      t.string :Namek_Num
      t.string :Namek_Rz
      t.string :NameG
      t.string :Label
      t.integer :Bez
      t.integer :District_Code
      t.integer :StatAustria_Bez_Code
      t.integer :StatAustria_Gem_Code
      t.float :Flaeche
      t.float :Umfang
      t.timestamp :Akt_Timestamp
      t.multipolygon :Koordinaten
      t.integer :main_id
    end
    execute <<-SQL
      ALTER TABLE bezirkes
          ADD CONSTRAINT fk_bezirkes_mains
          FOREIGN KEY (main_id)
          REFERENCES mains(id)
    SQL
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:13:42.110

你可以使用[postgis gem](https://github.com/dazuma/activerecord-postgis-adapter)。它基于[Rgeo](https://github.com/dazuma/rgeo)，它提供了一些不错的空间方法。

否则就这样做：

```
 t.column :koordinaten, :multipolygon 
```

注意：根据 Rails 约定，您的列名不应以大写字母开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:13:25.647

首先，让我们确认您已经安装了[activerecord-postgis-adapter](https://github.com/dazuma/activerecord-postgis-adapter) gem，并且您的 Postgresql 数据库已正确配置了 postgis（根据[本教程](http://postgis.refractions.net/documentation/manual-1.5/ch02.html)）。我想强调一下，postgis 安装是针对每个模式的，而不是全局的，因此将它安装在模式 A 中并不意味着它将为同一台机器上的任何其他模式安装。

接下来，看起来某些版本的 postgit 适配器没有创建多多边形列的方法（至少我的没有），所以您有 2 个选项：使用 geomerty/geography 列（您将有相应的方法，但会丢失数据检查 PostgreSQL 端）或使用通用 t.column 方法创建列，例如：

```
t.column :Koordinaten, :multipolygon 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T04:16:12.710

确保你有你的`adapter`设置`postgis``config/database.yml`

# excel - VBA 剪切和粘贴错误

> ID：13323915
> 
> 赞同：4
> 
> 时间：2012-11-10T16:44:51.613
> 
> 标签：excel, vba

我正在尝试剪切单元格**K7** (100) 的内容并使用 VBA 将其粘贴到**M7**中（见下文），但我不断收到错误消息（见下文）。我哪里错了？：

```
Sub CutPaste()    
    Worksheets("Sheet2Test").Activate
    Range("K7").Select
    Selection.Cut
    Range("M7").Select
    Selection.Paste   
End Sub 
```

![在此处输入图像描述](../Images/02c90e4662ea3d3b5ed3d97eb8a608b9.png)

![在此处输入图像描述](../Images/c0feefc6a254c6ebd34cd48a8d7db8f8.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T21:53:29.597

最好完全避免`Select`。用这个

```
Worksheets("Sheet2Test").Range("K7").Cut Worksheets("Sheet2Test").Range("M7") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T16:55:38.023

只需替换`Selection.Paste`for `ActiveSheet.Paste`，它将是：

```
Sub CutPaste()    
    Worksheets("Sheet2Test").Activate
    Range("K7").Select
    Selection.Cut
    Range("M7").Select
    ActiveSheet.Paste
End Sub 
```

这将按照您的意愿进行粘贴。

# javascript - Javascript递归数据结构定义

> ID：13323916
> 
> 赞同：1
> 
> 时间：2012-11-10T16:44:58.647
> 
> 标签：javascript, recursion

我需要在 Javascript 中递归地定义一个数据结构。下面是一个循环链表的简单示例：

```
// List a very simplified example of what the actual (non list) code does.
function List(f, r) {
    return function(){ return [f, r]; };
}

var first = function (l){ return l()[0]; }
var rest = function (l){ return l()[1]; }

var head = List('a', List('b', List('c', head))); 
```

执行此操作时，列表'c'中的头被解析为未定义，而不是我需要的列表'a'。List 是一个返回函数的示例函数（它不是我可以附加到的 Javascript 列表）。

我试图将 head 的定义包装为一个自执行的命名函数，但是当 head 被解析时这会破坏堆栈。

我忽略的 Javascript 样式解决方案是什么？

* * *

**试图**

鬼鬼祟祟，我想出了一些可能有效的代码：

```
var f = function(){
    var value;
    return function(v){
        if (value === undefined)
            value = v
        return value.apply(undefined, arguments);
    };
};

var tempHead = f();
var head = List('a', List('b', List('c', tempHead)));
tempHead(head);

first(head); // a
first(rest(head)) // b
first(rest(rest(head))) // c
first(rest(rest(rest(head)))) // a
first(rest(rest(rest(rest(head))))) // b
... 
```

但这真的很丑。有更好的解决方案吗？

* * *

**解决方案**

user1689607 提出了一个很好的解决方案，我封装了它以隐藏一些实现：

```
var def = function(name, impl) {
    var value;
    return value = impl.apply(Object.defineProperty({}, name, {
       'value': function() { return value.apply(this, arguments); }
    }));
};

function List(f, r) {
    return function(){ return [f, r]; };
}

function first(l){ return l()[0]; }
function rest(l){ return l()[1]; }

var circle = def('head', function() {
    return List('a', List('b', List('c', this.head)));
});

first(circle); // 'a'
first(rest(circle)); // 'b'
first(rest(rest(circle))); // 'c'
first(rest(rest(rest(circle)))); // 'a'
first(rest(rest(rest(rest(circle))))); // 'b' 
```

* * *

又一次更新，我最终明确地传递了自我引用，而不是改变范围：

```
var def = function(impl) {
    var value;
    return (value = impl(function() { return value.apply(this, arguments); }));
};

var circle = def(function(self) {
    return List('a', List('b', List('c', self)));
}); 
```

此代码在[parse.js](https://github.com/mattbierner/parse.js)中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:42:56.513

这就是你想要的？

```
var headCaller = function() { return head.apply(this, arguments); };

var head = List('a', List('b', List('c', headCaller))); 
```

它给出了你似乎想要的结果......

***演示：http:*** [//jsfiddle.net/ruNY3/](http://jsfiddle.net/ruNY3/)

```
var results = [
    first(head), // a
    first(rest(head)), // b
    first(rest(rest(head))), // c
    first(rest(rest(rest(head)))), // a
    first(rest(rest(rest(rest(head))))) // b
]; 
```

* * *

```
[
    "a",
    "b",
    "c",
    "a",
    "b"
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:26:30.577

当您提供`head`参数时，它尚未分配。您需要使用两个步骤。此外，不需要使用嵌套函数。

```
function List(f, r) {
    return { value: f, next: r};
}

var head = List('a', List('b', List('c', null)));
head.next.next.next.next = head; 
```

在 Javascript 中，没有指针，但所有的`Array`or`Object`都是通过引用分配的。

* * *

**编辑：**

使其更简单的解决方案：

```
function List(f) {
    var list = { value: f, next: null };
    list.next = list;
    return list;
}

function insert(list, elm) {
    list.next = { next: list.next, value: elm };
}

function forward(list, nb) {
    for (var current = list; nb > 0; nb--)
        current = current.next;
    return current;
}

var head = List('a');
insert(head, 'b');
insert(head.next, 'c');

console.log(head.value); //a
console.log(head.next.value); //b
console.log(head.value); //c

console.log(forward(head, 3));//a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:37:20.673

我不确定这是否是您想要的，请检查：

```
function List(f, r) {
    var fr = [f, r];
    var func = function() {
        return fr;
    };
    func.fr = fr; // because that is a reference we can trick it
    return func;
}

var head = List('a', List('b', List('c', null)));
head.fr[1].fr[1].fr[1] = head; // make a loop 
```

**补充：**一个更容易做到的功能

```
// Or this method for lazy people
function createCircularList(f) {
    var head = List(f[f.length - 1], null);
    var firstfr = head.fr;
    for (var i = f.length - 2; i >= 0; i--) {
        head = List(f[i], head);
    }
    firstfr[1] = head;
    return head;
}

var head = createCircularList(['a', 'b', 'c']); 
```

演示：http: [//jsfiddle.net/alvinhochun/5nmpR/](http://jsfiddle.net/alvinhochun/5nmpR/)

在 JavaScript 中，事情很有趣。一切都是引用，但引用本身就是一个值。

```
var a = [0, 0];    // `a` is set to the reference of `[0, 0]`
var b = a;         // `b` refers to the same thing as `a`
console.log(b[0]); // shows 0
a[0] = 1;          // it modifies the object that it references to
console.log(b[0]); // shows 1
a = [2, 0];        // a new reference is assigned to `a`
console.log(b[0]); // still shows 1 
```

# facebook - Facebook linter 没有读取 url

> ID：13323919
> 
> 赞同：0
> 
> 时间：2012-11-10T16:45:29.607
> 
> 标签：facebook, url, facebook-graph-api, facebook-like

我想弄清楚为什么 facebook 的[linter](http://developers.facebook.com/tools/debug/og/object?q=http://tapawaydemo.atwebpages.com/tapaway_game.html)不能抓取我的网址。网址是[http://tapawaydemo.atwebpages.com/tapaway_game.html](http://tapawaydemo.atwebpages.com/tapaway_game.html)。结果是：

`Error Parsing URL: Error parsing input URL, no data was scraped.`

甚至 url [http://tapawaydemo.atwebpages.com](http://tapawaydemo.atwebpages.com)返回相同的结果。

我猜问题是我的主机阻止了对 facebook 服务器的访问，因为它是免费层，或者我缺少一些必需的设置。谁能指出我正确的方向？

[我在http://tapawaydemo.atwebpages.com/fb_test.html](http://tapawaydemo.atwebpages.com/fb_test.html)添加了一个简单的测试页面。linter 也[无法抓取](http://developers.facebook.com/tools/debug/og/object?q=http://tapawaydemo.atwebpages.com/fb_test.html)此页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:02:13.883

您的源代码中有一些错误。例如，您打开一个按钮标签，但在末尾使用锚标签而不是`</button>`.

编辑：

现在问题已经解决，我在自己的网络服务器上尝试了代码，因为 FB 调试器刚刚告诉我无法抓取 URL。我知道现在的问题是什么：

> URL 被阻止：无法抓取 URL，因为它已被阻止。

因此，您的域似乎在 facebook 上被阻止：“atwebpages.com” - 尝试在您的 facebook 墙上发布您的 URL，您会看到。然后在错误弹出窗口中也会有一个链接，如果您认为该链接正常，您可以使用它。

# c++ - 比较具有相同值的两个 TCHAR 的结果为 false

> ID：13323924
> 
> 赞同：5
> 
> 时间：2012-11-10T16:46:16.737
> 
> 标签：c++, compare, tchar, getmodulefilename

我正在尝试检查我的应用程序路径，如果它不是指定路径，则移动它。我觉得我的代码很可靠，但它不能正常工作。

```
TCHAR pCheck[MAX_PATH];
TCHAR xPath[MAX_PATH];

GetModuleFileName(NULL,xPath,MAX_PATH);

if(SHGetSpecialFolderPath(HWND_DESKTOP, pCheck, CSIDL_DESKTOP, FALSE)){
    wcscat(pCheck,L"\\NewFile.exe");
    MessageBox(NULL,pCheck,NULL,NULL);
    MessageBox(NULL,xPath,NULL,NULL);
    if(pCheck!=xPath){  
        CopyFile(xPath,pCheck,0);
        ShellExecute(0,L"open",pCheck,NULL,NULL,SW_SHOW);
        return 0;
    }else{
        MessageBox(NULL,L"New Location",NULL,NULL); 
        return 0;
    }
} 
```

即使文件位于新路径中，它仍然会导致 pCheck != xPath

我从来没有收到“新位置”消息框。当显示前两个消息框时，路径是相等的......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T16:48:25.593

您只是在比较数组的地址（显然它们永远不会相同）。如果要比较数组中保存的两个字符串，则应使用`_tcscmp();`

```
if(_tcscmp(pCheck, xPath) != 0){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T16:48:52.357

您的 TChar 数组衰减为**指向第一个字符的指针。**您当前正在检查指针是否相等，这就是您永远不会得到**TRUE**的原因。

对于 TChar，使用`strcmp`等价物，例如**[`_tcscmp`](http://msdn.microsoft.com/en-us/library/e0z9k731%28v=vs.80%29.aspx)**.

_tcscmp 是一个**宏**，它可以调用`wcscmp`或`strcmp`取决于字符的类型。

# ruby - 如何在 Sinatra 模块化应用程序中从模块路径重定向到根应用程序路径？

> ID：13323928
> 
> 赞同：0
> 
> 时间：2012-11-10T16:46:38.613
> 
> 标签：ruby, module, sinatra

我有 Sinatra 基础应用程序，例如：

```
class MyApp < Sinatra::Base
  get '/' do
    ..
  end
  get '/login' do
    ..
  end
end 
```

和一些子模块，如

```
class Protected < MyApp

  before '/*' do
    redirect('/login') unless logged_in
  end

  get '/list' do
    ...
  end
end 
```

我的 config.ru 如下所示

```
map "/" do
  run MyApp
end

map "/protected" do
  run Protected
end 
```

尝试访问时出现重定向循环，`/protected/list`因为它尝试从主应用程序重定向到**/protected/login**而不是**/login 。**我怎样才能强迫它做正确的重定向？我知道我可以使用`redirect to('../login')`，但它似乎很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:10:24.327

imo 使用 Sinatra，您只能将 URL 分配给常量，然后引用它们。

喜欢：

```
MAIN_URL = '/'
PROTECTED_URL = '/protected'

class Protected < MyApp

before '/*' do
  redirect( MAIN_URL + 'login') unless logged_in
end

get '/list' do
  ...
end

map MAIN_URL do
  run MyApp
end

map PROTECTED_URL do
  run Protected
end 
```

够丑的。

我建议改用[Espresso](http://e.github.com)。

在路由以及其他框架糟糕的其他方面非常明智。

路由部分在这里：[http ://e.github.com/Routing.html](http://e.github.com/Routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-12T17:19:07.407

从 /config/application.rb 中的我的一个应用程序

```
class MyApp < Sinatra::Base

  configure do

    APP_ROOT = Pathname.new(File.expand_path('../../', __FILE__))
    # By default, Sinatra assumes that the root is the file that
    # calls the configure block.
    # Since this is not the case for us, we set it manually.
    set :root, APP_ROOT.to_path
    ... 
```

您还可以在 config.ru 中定义该常量，就像这里的第一个答案一样。

# python - 试图理解嵌套循环，单位矩阵

> ID：13323929
> 
> 赞同：2
> 
> 时间：2012-11-10T16:46:54.533
> 
> 标签：python

所以我被困在嵌套循环中，我觉得我理解它们的时间大约有一半，然后我开始处理不同的问题，然后我就不再理解它们了。也许我把事情复杂化了。无论如何回到我的问题，我有一个单位矩阵

```
lst = [[1,0,0], [0,1,0], [0,0,1]] 
```

我正在尝试编写一个程序来检查它是否是一个单位矩阵，所以我知道 i 和 j 的索引具有相同的索引（即 i 在位置 0 和 j 在位置 0；i 在位置 1和 j 在位置 1；i 在位置 2 和 j 在位置 2) 并且等于 1，则矩阵是单位矩阵。现在我的问题是我觉得我很难把它表达到电脑上。或者换句话说，`lst[0][0], lst[1][1] and lst[2][2]`应该都等于 1，而所有其他值都应该等于 0。如果不给我答案，有人可能会把我推向正确的方向吗？我一直在尝试解决这个问题大约 2 周，现在我感到很沮丧，因为我做不到，因为它看起来很简单......

谢谢。

```
def identity(lst):
for i in lst:
    for j in i:
        if i == j and lst[i][j] == 1:
                if i != j and lst[i][j] == 0:
                    return True

return False 
```

我错了我哪里错了？

我想我明白了！！

```
def identity(lst):
size = len(lst)
for i in range(len(lst)):
    if len(lst[i]) != size:
        return False
    for j in range(len(lst)):
        if i == j and lst[i][j] != 1:
            return False
        elif i != j and lst[i][j] != 0:
            return False

return True 
```

打印 i 和 j：

```
for i in range(len(lst)):
     for j in range(len(lst)):
         print("i:", i, "j:", j) 
```

导致：

```
i: 0 j: 0
i: 0 j: 1
i: 0 j: 2
i: 1 j: 0
i: 1 j: 1
i: 1 j: 2
i: 2 j: 0
i: 2 j: 1
i: 2 j: 2 
```

这真的帮了我很多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:18:25.143

因为它是你要经常使用的东西，你可以把它变成一个类。

```
class Identity3(object):
  matrix = [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
  def __eq__(self, other):
    return self.matrix == other
  def __new__(self):
    return [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
  def __init__(self):
    pass 
```

尝试像这样使用它，

```
>>> translate = [[1, 0, 0], [0, 1, 0], [1, 1, 1]]
>>> translate == Identity()
False
>>> idmatrix = Identity()
>>> idmatrix
[[1, 0, 0], [0, 1, 0], [0, 0, 1]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:15:32.267

首先，你的缩进似乎坏了。您应该始终正确缩进，尤其是在 python 中。它应该是：

```
def identity(lst):
    for i in lst:
        for j in i:
            if i == j and lst[i][j] == 1:
                if i != j and lst[i][j] == 0:
                    return True
    return False 
```

其次，您没有以您认为的方式访问元素。如果我继续在你的循环中打印：

```
for i in lst:
    for j in i:
        print "i:", i, "j:", j
    print 
```

我得到：

```
i: [1, 0, 0] j: 1
i: [1, 0, 0] j: 0
i: [1, 0, 0] j: 0

i: [0, 1, 0] j: 0
i: [0, 1, 0] j: 1
i: [0, 1, 0] j: 0

i: [0, 0, 1] j: 0
i: [0, 0, 1] j: 0
i: [0, 0, 1] j: 1 
```

如果需要迭代矩阵的索引，可以使用[range](http://docs.python.org/2/library/functions.html#range)（或[xrange](http://docs.python.org/2/library/functions.html#xrange)）和[len函数的组合。](http://docs.python.org/2/library/functions.html#len)

最后你的条件这样没有意义

```
if i == j and lst[i][j] == 1:
    if i != j and lst[i][j] == 0: # you never reach below here 
        return True               # because i == j is always true in here
                                  # provided by the first conditional 
```

你需要分开这些条件。即使你这样做了，你也会得到一个错误的答案，因为`return True`即使只有一个元素满足条件（即只有一个元素在正确的位置），它也会得到错误的答案。我相信您需要以相反的方式思考，`return False`在条件句中（并且ofc不要忘记分别更改它们）以及`return True`最后如果您没有发现任何错误。

让我知道你的进步，我可以给你更多的提示..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:19:37.860

因为您不想要完整的答案，只想要一个提示：对角线上的所有元素都应该是 1；并且矩阵中所有元素的总和需要等于对角线的大小。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-10T16:56:26.283

更具体一点，不要忘记检查 if i != j, lst[i][j] == 0。

# java - Phonegap + sencha touch 动画闪屏

> ID：13323930
> 
> 赞同：1
> 
> 时间：2012-11-10T16:47:09.177
> 
> 标签：java, javascript, cordova, sencha-touch-2, cordova-2.0.0

所以我有一个喷气发动机的PNG，我希望它成为我的应用程序的启动画面，可以与静态PNG一起正常工作，但是我如何为这个喷气发动机设置动画，使其顺时针旋转，然后淡出或消失应用程序准备好了吗？

目前我使用 phonegap 闪屏，并在我的 index.html 中检查设备何时准备就绪并隐藏闪屏。效果很好。

我正在使用cordova 2.0.1 + Android SDK + Sencha Architect

是否可以做任何类型的平滑动画？

谢谢

# google-app-engine - gae:run 没有错误，但访问应用程序或管理控制台最终出现 404 未找到

> ID：13323933
> 
> 赞同：2
> 
> 时间：2012-11-10T16:47:22.560
> 
> 标签：google-app-engine, jsf, maven-gae-plugin

我正在尝试在应用引擎开发服务器上运行一个 jsf 项目。

我在带有 jdk 1.6.32 的 Windows 7 上使用 Eclipse Juno、maven-gae-plugin 0.9.5、jsf 2.1 和 gae-jdk 1.7.3。

到目前为止我所做的（除其他外，但这次尝试是最成功的，希望如此）：

*   在 Eclipse 中使用 gae-jsf 原型创建了一个 maven 项目
*   pom中检查的版本
*   覆盖 WebConfiguration.java
*   将日志级别设置为 FINE
*   ...

最后，它似乎有效，如果我运行 mvn gae:run，整个过程将毫无例外地直接运行。它以 uf 结尾

```
FINE: File added: C:\ws_eclipse\myapp\target\myapp-0.0.1-SNAPSHOT\WEB-INF\appengine-web.xml
Nov 10, 2012 4:05:34 PM com.google.appengine.tools.development.AbstractBackendServers startupAll
FINE: Got null backendsXml config.
Nov 10, 2012 5:05:34 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at http://localhost:8080/
Nov 10, 2012 5:05:34 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at http://localhost:8080/_ah/admin 
```

如果我随后尝试通过浏览器访问我的应用程序或管理控制台，我总是会收到 404 Not Found”。

有人提示吗？

# postgresql - PostgreSQL 中的 pgAgent 安装

> ID：13323936
> 
> 赞同：-2
> 
> 时间：2012-11-10T16:48:17.660
> 
> 标签：postgresql, installation

我已经在 ubuntu 12.04 64 位上安装了 PostgreSQL 9.1。我尝试运行 Aplication Stack Builder 并安装 pgAgent。

在我选择端口 5433 上的 PostgreSQL 9.1 作为唯一选项后，首先我被要求输入我提供的 root 密码。在下一个屏幕上，我勾选 pgAgent 并单击 Next 几次以进入 Setup 屏幕并验证 postgradeSQL 安装详细信息。主机是本地的，用户名是 postgres，我输入我在打开 pgAdmin III 时使用的 postgrade 密码。当我单击下一步时，我有一个警告：

`psql.bin: could not connect to server: Connection refused Is the server running on host "localhost" (127.0.0.1) and accepting TCP/IP connection on port 5432?`

当我尝试 pgAdmin 时，它确实可以使用我提供的密码，但它看起来像 Stack Builder 不接受这个密码。我还在开始时提供了我的管理员密码，因此它应该能够以特权执行所有`sudo`操作。我不知道现在该怎么办，有什么问题。我应该在 Stack Builder 之前运行其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:47:33.390

默认 postgres 端口号是 5432。您在开始时声明您的服务器在 5433 上运行，但错误消息显示它无法连接到 localhost:5432。

通常，自动选择 5433 的唯一情况是当您安装 PostgreSQL 9.1 时，安装并运行某个先前版本（8.4 或 9.0）。要解决您的问题，您可能需要删除旧安装并确保您需要的安装正在侦听端口 5432。

除此之外，默认情况下 PostgreSQL 可能根本不监听网络 - 您可能需要调整 postgresql.conf 以具有此选项：

```
listen_addresses = '*' 
```

# c# - 将字节数组插入 SQL Server 数据库表

> ID：13323939
> 
> 赞同：2
> 
> 时间：2012-11-10T16:48:25.767
> 
> 标签：c#, asp.net, sql-server

我正在对密码使用 PBKDF2 哈希算法，它从我的用户提供的密码中生成一个字节数组，如下所示：

```
var DeriveBytes = new Rfc2898DeriveBytes(_Password, 20);
byte[] _Salt = DeriveBytes.Salt;
byte[] _Key = DeriveBytes.GetBytes(20);  // derive a 20-byte key 
```

我想将这些保存到我的数据库中，但我不确定要使用什么数据类型。据我所知，字节数组没有使用数据类型，我很确定我不能将它转换为字符串并将其存储在 中`varchar`，或者我可以吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T16:49:49.757

`binary`并且`varbinary`非常明确地设计用于存储字节数组。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms188362.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T14:51:54.850

您将 SQL 表中的列定义为`binary`or `varbinary`，然后使用需要`SqlDbType`参数来传达二进制值的重载之一将其添加到 ado 命令对象的参数属性中。

选项2：

您将 SQL 表中的列定义为`nvarchar(max)`，将字节数组转换为 base 64 字符串，即`System.Convert.ToBase64String(mybytes)`。当需要从数据库中检索它时，

```
mybytes = System.Convert.FromBase64String((byte[])dr[i]); 
```

# iphone - 检查数据库中现有数据的最佳方法（iOS）

> ID：13323940
> 
> 赞同：2
> 
> 时间：2012-11-10T16:48:39.217
> 
> 标签：iphone, objective-c, ios, core-data

我正在开发一个管理消息的应用程序，我希望该应用程序连接到服务器，获取消息并将它们保存在数据库（coredata）中。如果消息已经存在，则不执行任何操作，如果不存在，则将它们添加到数据库中。

我正在考虑一些方法来做到这一点，但我不知道该怎么做。有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:01:42.657

我建议使用 Restkit 框架[http://restkit.org](http://restkit.org)
Reskit 提供与核心数据的集成。

使用 Restkit 的优点：
- 将 HTTP 请求/响应 API，以及对象映射、离线/缓存支持与 Core Data 结合在一个框架中
- 对象映射意味着您正在编写干净的代码，您定义您的类以及它们如何映射到 JSON 属性，然后使用几行代码进行 GET/POST/DELETE
- 核心数据支持意味着您的项目可以离线工作，在线工作时数据是同步的，但在您需要离线时保持持久
- 框架很好缺点

：
- 仅适用于 JSON REST API
- 某些方面可能存在陡峭的学习曲线
- 如果您使用不完全“标准”的 REST API，可能会很有挑战性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:13:21.153

最简单的方法是将*guid*属性（例如 type 的标识符`NSString`）添加到您感兴趣的实体，并在导入数据时检查该 guid。

在这里，您有两种方法：让服务器为您生成 guid 或在客户端（iPhone、iPad 等）实现您自己的算法。在这两种情况下，您都需要确保每条消息的 guid 都是唯一的。

因此，例如，假设服务器生成消息（并且每条消息都有自己的 guid）。导入数据时，您还会保存每个消息对象的 guid。如果您已经有带有特定 guid 的消息，则不要添加它，否则添加它。这可以使用**Find-or-Create**模式来完成（请参阅[实现 Find-or-Create Efficiently](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1)）。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:29:08.930

这很简单，我花了一些时间来学习这个，我在我的大多数应用程序中都使用它。

首先，您需要获取项目的 ID，例如 messageID。当您获取包含所有项目的 JSON 时，例如使用 AFNetworking，您将收到 NSDictionaries 中的对象数组。

在解析项目之前，将存储项目的所有 ID 加载到 NSMutableDictionary 中（key => messageID，value objectID，这与 Core Data 故障有关）。

不要忘记在某处初始化 NSMutableArray：

```
_dictionaryOfEventIDAndObjectID = [NSMutableDictionary dictionary]; 
```

* * *

```
- (void)prepareDictionaryOfMessageIDs
{
    [self.dictionaryOfEventIDAndObjectID removeAllObjects];

    NSError *error = nil;
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Message"];
    [fetchRequest setResultType:NSDictionaryResultType];
    NSExpressionDescription *objectIDDescription = [[NSExpressionDescription alloc] init];
    objectIDDescription.name = @"objectID";
    objectIDDescription.expression = [NSExpression expressionForEvaluatedObject];
    objectIDDescription.expressionResultType = NSObjectIDAttributeType;
    [fetchRequest setPropertiesToFetch:@[objectIDDescription, @"messageID"]];

    NSArray *objectsDict = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
    for (NSDictionary *objectDict in objectsDict) {
        [self.dictionaryOfMessageIDAndObjectID setObject:[objectDict valueForKeyPath:@"objectID"] forKey:[objectDict valueForKeyPath:@"messageID"]];
    }
} 
```

然后在获取的数据完成块中添加如下内容：

```
 for (NSDictionary *objectDict in objectsDict) {

        NSString *fetchedID = [objectDict objectForKey:@"id"];

        if ([self.dictionaryOfMessageIDAndObjectID objectForKey:fetchedID]) {
            continue;
        }

        [self parseMessageFromDictionary:objectDict];
    } 
```

# ruby-on-rails - 关于删除嵌套资源的 RESTful 路由的意见？

> ID：13323941
> 
> 赞同：1
> 
> 时间：2012-11-10T16:48:51.247
> 
> 标签：ruby-on-rails, rest

给定带有评论的照片的典型嵌套资源，创建评论的路径如下所示：

```
POST /photos/{photo_id}/comments 
```

现在，为了删除评论，你还会使用“嵌套”路由吗？前任：

```
DELETE /photos/{photo_id}/comments/{comment_id} 
```

或者

```
DELETE /comments/{comment_id} 
```

嵌套路由的优点是它反映了创建 URL，并且不需要 routes.rb 中的任何其他条目。使用顶级 URL 的优点是您在技术上不需要 photo_id 来获取要删除的评论。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:07:13.310

您如何为资源建模在`comments`很大程度上取决于您如何看待该资源`comments`。

如果评论可能在没有照片的情况下存在并且可能与 0 到 N 资源相关联，`photo`那么您应该像这样对您的评论建模

```
GET    /comments/{comment_id}
DELETE /comments/{comment_id}

PUT    /comments/

POST   /comments/{comment_id}/associations/photo/{photo_id} 
```

如果评论总是与资源相关联并且不与资源相关联就无法存在，那么您应该坚持使用

```
POST   /photos/{photo_id}/comments

DELETE /photos/{photo_id}/comments/{comment_id} 
```

`photo_id`我猜想如何为评论建模的困惑是由数据库模型驱动的，其中每个评论都有一个唯一的 id，该 id 在所有评论中都是唯一的，而不仅仅是在`comment_id`组合键中唯一。我建议不要让数据库模型泄漏到资源模型中，而是选择适合您对资源的概念理解的模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T19:20:49.017

你`GET`这个可以吗？

```
GET /comments/{comment_id} 
```

我猜不是。但是，如果您不能`GET`获得资源，那么您也不能获得`DELETE`。

所以只有你的第二个选择是 RESTful。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:48:54.107

就个人而言，我只是使用嵌套路由进行删除，这意味着我使用了：

```
DELETE /photos/{photo_id}/comments/{comment_id} 
```

删除照片的评论。如果我使用：

```
DELETE /comments/{comment_id} 
```

所以我必须为此再创建一条路线？我没有找到任何理由为删除创建单独的路线，我认为没有必要。嵌套资源已经为我们创建了 url 和 path，它们是遵循约定的，我们为什么不使用它们呢？我只想保持简单，不会为已经拥有的东西做额外的工作。

# python - 函数输出

> ID：13323942
> 
> 赞同：-3
> 
> 时间：2012-11-10T16:48:50.993
> 
> 标签：python

> **可能重复：**
> [函数中的函数](https://stackoverflow.com/questions/13308553/function-in-function)

我怎样才能使功能。显示所有不好的值，而不仅仅是一个？

```
def get_bad_results(person_results):
        for i in person_results:
                if i[1]>i[3] or i[1]<i[2]:
                    return i[0]

test_results = [["White blood cells",8.5,2,7],
                ["Neutrophils",5.3,2.5,5],
                ["Red blood cells", 12.4, 9,15]]

a = get_bad_results(test_results)
print a 
```

显示`White blood cells`

代替

```
White blood cells, Neutrophils 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:58:32.707

您正在寻找`yield`生成生成器的关键字：

```
def get_bad_results(person_results):
        for i in person_results:
                if i[1]>i[3] or i[1]<i[2]:
                    yield i[0] 
```

然后，您可以迭代函数的结果（例如，调用`list()`以创建列表）。生成器比直接生成列表更可取，因为这意味着值是延迟生成的，这在很多情况下更节省内存。

作为旁注，索引`i`有点难看，在这种情况下，解包值将使您的代码更具可读性：

```
def get_bad_results(person_results):
        for name, age, height, weight in person_results:
                if age > weight or age < height:
                    yield name 
```

（当然，我在这里编了名字，因为我不知道上下文）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T16:51:03.570

该函数将返回符合该语句的第一个匹配项。要全部返回，您可以将它们保存在列表中，当循环完成时，返回列表。

```
for i in person_results:
    bads = []
    if i[1]>i[3] or i[1]<i[2]:
        bads.append(i[0])
return bads 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T16:51:50.450

如果您不想使用生成器，可以将坏元素附加到列表中，然后将其返回：

```
def get_bad_results(person_results):
    bad_results = []
    for i in person_results:
        if i[1] > i[3] or i[1] < i[2]:
            bad_results.append(i[0])
    return bad_results 
```

或使用列表推导：

```
def get_bad_results(person_results):
    return [i[0] for i in person_results if i[1] > i[3] or i[1] < i[2]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:55:58.873

为什么不从已经进行比较的函数中打印？然后你不需要任何额外的东西来跟踪

```
def get_bad_results(person_results):
        for i in person_results:
                if i[1]>i[3] or i[1]<i[2]:
                    print i[0] 
```

# php - Codeigniter - 在自定义页面上实现 Ion_auth

> ID：13323944
> 
> 赞同：0
> 
> 时间：2012-11-10T16:48:55.860
> 
> 标签：php, codeigniter, ion-auth

我是 CI 新手，Ion_auth 是我尝试的第一个库。安装 Ion_auth 很简单……完全没有问题，我可以导航到 /auth 并且所有示例功能都运行良好。

所以现在我想在我的自定义页面上实现一个登录表单（我不想使用示例视图结构），我将以下代码复制到我自己的视图中：

```
<p>Please login with your email address and password below.</p>

<div id="infoMessage"><?php echo $message;?></div>

<?php echo form_open("auth/login");?>

  <p>
    <label for="email">Email:</label>
    <?php echo form_input($email);?>
  </p>

  <p>
    <label for="password">Password:</label>
    <?php echo form_input($password);?>
  </p>

  <p>
      <label for="remember">Remember Me:</label>
      <?php echo form_checkbox('remember', '1', FALSE);?>
  </p>

  <p><?php echo form_submit('submit', 'Login');?></p>

<?php echo form_close();?> 
```

但这给了我以下错误：

> 消息：未定义变量：消息
> 
> 消息：未定义的变量：身份
> 
> 消息：未定义变量：密码

我知道我的视图没有加载这些变量，但是它们是如何在示例视图中加载的？

我只是在寻找有关该库如何工作以及我需要做什么才能使其在示例之外工作的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:04:42.480

您还必须复制控制器调用，因为您需要在显示视图之前加载 Ion_auth 和 auth_helper 以使其工作。

在你的控制器中添加这个，就在输出视图之前：

```
$this->load->library('ion_auth'); 
```

并在 Ion_Auth 的演示控制器中查看您可能需要加载以使其工作的其他元素。另外，将表单中的默认值设置为空，原因`$message`和其他不存在。

我的建议是复制 Ion_auth 的演示控制器正在做的事情。

# php - PHPStorm 不会读取 php 解释器的整个路径

> ID：13323947
> 
> 赞同：3
> 
> 时间：2012-11-10T16:49:00.513
> 
> 标签：php, windows, phpstorm

您好我刚刚安装了 PHPStorm 5 第一次尝试一下，我似乎在运行 PHP 应用程序时遇到了问题。我已经安装了 xampp 并且 PHP 解释器的路径已设置为：

```
D:\Program Files\xampp\php\php.exe 
```

当我尝试运行我的 php 文件时，我收到此错误：

```
"D:\Program Files\xampp\php\php.exe" D:\Program Files\xampp\php\php.exe "D:\Program Files\xampp\htdocs\PHPStorm\Project\index.php"

Could not open input file: D:\Program

Process finished with exit code 1 
```

由于某种原因，PHPStorm 似乎没有读取路径的其余部分，它在 D:\Program 处停止。

除了更改文件夹的名称之外，我该如何解决这个问题，因为这需要我重新在我的计算机上重新安装几乎所有的东西？

**编辑运行配置**

![在此处输入图像描述](../Images/d4705437e92b40f85de35b077fbe4ff8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T17:09:21.003

查看完整的命令行：

```
"D:\Program Files\xampp\php\php.exe" D:\Program Files\xampp\php\php.exe ⤦ 
  "D:\Program Files\xampp\htdocs\PHPStorm\Project\index.php" 
```

您正在使用以下命令：

```
 "D:\Program Files\xampp\php\php.exe" 
```

使用以下三个参数：

1.  D:\程序
2.  文件\xampp\php\php.exe
3.  "D:\Program Files\xampp\htdocs\PHPStorm\Project\index.php"

然后您`php.exe`尝试打开“文件”

```
D:\Program 
```

并且自然失败。相反，您的命令应该是：

```
"D:\Program Files\xampp\php\php.exe" c:\path\to\your\script.php 
```

显然，您确实将文本*D:\Program Files\xampp\php\php.exe*输入到它所属的太多文本框中。如果您是 PHPStorm 的新手，我建议您阅读在线手册：

*   [解释器 - PhpStorm 5.0 Web 帮助](http://www.jetbrains.com/phpstorm/webhelp/interpreters.html)
*   [运行/调试配置：PHP 脚本 - PhpStorm 5.0 Web 帮助](http://www.jetbrains.com/phpstorm/webhelp/run-debug-configuration-php-script.html)

在对话框中按 F1 也可以使用它。

* * *

**编辑：**清除名为*解释器选项的字段*

# android - 广播接收器没有被报警呼叫

> ID：13323952
> 
> 赞同：1
> 
> 时间：2012-11-10T16:49:23.083
> 
> 标签：android

我试图通过设置警报在某个时间呼叫广播接收器。它似乎根本没有被调用。我正在尝试使用 logcat 进行调试。

我的闹钟设置是这样的：

```
 AlarmManager alarm = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    Calendar notifyAlarm = Calendar.getInstance();

    notifyAlarm.set(Calendar.HOUR, 17);
    notifyAlarm.set(Calendar.MINUTE, 00);
    Intent intent = new Intent(this, AlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 2378530, intent, 0);
    alarm.set(AlarmManager.RTC_WAKEUP, notifyAlarm.getTimeInMillis(), pendingIntent); 
```

我的接收器如下：

```
 public class AlarmReceiver extends BroadcastReceiver {

private static final String TAG ="test receiver";
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    Log.v(TAG, "receiver called");

}

    } 
```

在清单中我也有：

```
 </activity>
    <receiver android:name="AlarmReceiver"></receiver>
</application> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T17:46:52.750

考虑一下，我不确定您是否可以在执行此操作时`BroadcastReceiver`使用显式发送广播`Intent`...

```
Intent intent = new Intent(this, AlarmReceiver.class); 
```

试着给这个`<receiver`部分举个`<intent-filter>`例子......

```
<receiver android:name=".AlarmReceiver">
    <intent-filter>
        <action android:name="com.mypackage.ACTION_DO_SOMETHING" />
    </intent-filter>
</receiver> 
```

然后，当您创建您的 时`Intent`，请执行以下操作...

```
Intent intent = new Intent("com.mypackage.ACTION_DO_SOMETHING"); 
```

# wpf - 将视图模型/模型绑定到真实数据模型

> ID：13323953
> 
> 赞同：1
> 
> 时间：2012-11-10T16:49:27.237
> 
> 标签：wpf, mvvm, data-binding

我是 MVVM 和 WPF 本身的新手。我需要在 WPF 中做一些原型设计并达到概念性问题。

假设您有向您发送数据的服务器。无论您是否显示当前是否需要将其存储在缓存中，这都是您的“真实数据”，有时您需要将其放在 UI 上（当用户打开特定屏幕时），这就是您的视图模型。

我的问题很明显——我应该将 UI 绑定到存储在某个服务中的真实数据，还是应该围绕该数据做一个 viewmodel 包装器并绑定到它？在第一种情况下，除非我使用 Dispatcher，否则我会收到“调用线程无法访问此对象”异常，但在模型中调用 Dispatcher 看起来不正确

在后一种情况下，我将需要：

1.  将 90% 的数据从“真实模型”复制到包装器
2.  手动观察底层“真实数据”的变化以更新视图模型，以防万一实现 INotifyPropertyChanged。

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:09:54.670

我确实更喜欢将数据缓存放在我称之为“服务层”的地方（客户端代码实际上通过 WCF 或任何通信机制与服务器交互）。

数据缓存实际上是几个`List<T>`，我不在那里收听更改通知，因为实际上不需要。

相反，您从 ViewModel 中使用这些“客户端服务”，并在`List<T>`ViewModel 中检索和存储项目`ObservableCollection<T>`。这样，您可以从 View 到 ViewModel 进行两种方式的绑定，而无需 View 与存储在“服务层”中的“较低级别”数据缓存进行交互。

执行 ViewModel 操作时不需要使用 Dispatcher，因此这是一种更好的可扩展方法，因为您可以执行任何需要的多线程来检索数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T00:23:51.093

最合适的方式是让您的 ViewModel 与您的 View 需求非常相似。这意味着如果您的 View 有一个列表，那么您很可能在 ViewModel 上至少需要 2 个属性，一个用于 ItemSource，另一个用于选定的 Items。

关于存储的真实数据，我想说的是，您的服务可以访问它。也许您使用 WPF 或 Silverlight，因此您将保护您的真实物理数据。并且可以交换视图所需的正确信息。

我希望它有所帮助。如果您想分享您项目的一些建筑方面，我们可能会给您更多建议。

# asp.net-mvc-4 - 我的 MVC 控制器没有从 Html.dropdownlist 获得正确的值

> ID：13323962
> 
> 赞同：0
> 
> 时间：2012-11-10T16:50:22.103
> 
> 标签：asp.net-mvc-4, html-select

我正在开发一个 MVC 应用程序。

我有 2 个控制器，一个用于创建风险，一个用于创建测试。

我必须首先创建一个风险，当我创建一个测试时，我必须使用创建的风险作为新测试的一个字段。我有一个下拉列表可供选择。

现在我应该在同一页面中创建两者，因为一个测试将有一个风险，即，当我创建一个测试时，我必须创建自己的风险，它属于该测试并且不能被任何其他测试使用. 商业规则。

因此，我创建了一个包含测试和风险的新模型，更改了创建页面的模型，在创建页面中包含了风险创建。

好的，它似乎工作正常，但是当我回到控件时，所有下拉列表都失去了价值。其他一切都很好，除了那个。

这是我的模型

```
using CTTModel; 

namespace MvcApplication1.ViewModels
{
    public class CreateTestWithRisk
    {
        public Test Tests { get; set; }
        public Risk Risks { get; set; }
    }
} 
```

有趣的是，如果我尝试在第一个版本中使用这个模型，风险和测试是分开创建的，它适用于风险而不是测试，这意味着风险中的所有下拉列表都会返回值，而在创建测试时，它们不会。奇怪的。

这是来自控制器的代码

```
//
    // GET: /Test/Create

    public ActionResult Create()
    {
        // Risk
        ViewBag.SubProcessId = new SelectList(_db.SubProcesses, "Id", "Name");
        ViewBag.RiskSeverityId = new SelectList(_db.RiskSeverities, "Id", "Name");
        ViewBag.RiskFrequencyId = new SelectList(_db.RiskFrequencies, "Id", "Name");
        ViewBag.RiskRatingId = new SelectList(_db.RiskRatings, "Id", "Name");
        ViewBag.RiskType1Id = new SelectList(_db.RiskType1, "Id", "Name");
        ViewBag.RiskType2Id = new SelectList(_db.RiskType2, "Id", "Name");

        // Test
        ViewBag.RegionLevelId = new SelectList(_db.RegionLevels, "Id", "Name");

        return View();
    }

    //
    // POST: /Test/Create

    [HttpPost]
    public ActionResult Create(CreateTestWithRisk test)
    {
        if (ModelState.IsValid)
        {
            _db.Risks.Add(test.Risks);

            Risk iD = _db.Risks.OrderByDescending(id => id.Id).FirstOrDefault();

            if (iD != null)
            {
                test.Tests.RiskId = iD.Id;
                test.Tests.Risk = test.Risks;
            }

            _db.Tests.Add(test.Tests);

            _db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.RegionLevelId = new SelectList(_db.RegionLevels, "Id", "Name");
        //ViewBag.RiskId = new SelectList(_db.Risks, "Id", "Name", test.Tests.RiskId);
        ViewBag.SubProcessId = new SelectList(_db.SubProcesses, "Id", "Name");
        ViewBag.RiskSeverityId = new SelectList(_db.RiskSeverities, "Id", "Name");
        ViewBag.RiskFrequencyId = new SelectList(_db.RiskFrequencies, "Id", "Name");
        ViewBag.RiskRatingId = new SelectList(_db.RiskRatings, "Id", "Name");
        ViewBag.RiskType1Id = new SelectList(_db.RiskType1, "Id", "Name");
        ViewBag.RiskType2Id = new SelectList(_db.RiskType2, "Id", "Name");
        return View(test);
    } 
```

这是视图中的部分代码

```
@model  MvcApplication1.ViewModels.CreateTestWithRisk

@{
    ViewBag.Title = "Create New Test";
}
<h2>
    Create New Test</h2>

    @using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)

        <div style="display:inline-block">
                <fieldset style="float:left">
                    <legend>Test</legend>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.Tests.RegionLevelId, "RegionLevel")
                    </div>
                    <div class="editor-field">
                        @Html.DropDownList("RegionLevelId", String.Empty)
                        @Html.ValidationMessageFor(model => model.Tests.RegionLevelId)
                    </div>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.Tests.Code)
                    </div>
                    <div class="editor-field">
                    </div>
                    <div>
                        @Html.EditorFor(model => model.Tests.Code)
                        @Html.ValidationMessageFor(model => model.Tests.Code)
                    </div>
                </fieldset>

                <fieldset style="float:left;margin-left:10px">
                    <legend>Risk</legend>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.Risks.SubProcessId, "SubProcess")
                    </div>
                    <div class="editor-field">
                        @Html.DropDownList("SubProcessId", String.Empty)
                        @Html.ValidationMessageFor(model => model.Risks.SubProcessId)
                    </div>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.Risks.RiskSeverityId, "Severity")
                    </div>
                    <div class="editor-field">
                        @Html.DropDownList("RiskSeverityId", String.Empty)
                        @Html.ValidationMessageFor(model => model.Risks.RiskSeverityId)
                    </div>
                 </fieldset>
               </div>
               <p>
                <input type="submit" value="Create" />
                </p>
    }
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

![测试结果。 RegioLevelId 为 0，应为 1 或 2](../Images/32a422b418e2c67a9b3fb88a69cee2f2.png)

![风险的结果。 从 RiskFrequencyId 到 RiskType2Id 是 0，应该是 1 或 2](../Images/b409acad1a1f942f3304d7fc68061c7e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:31:29.457

如果我有足够的代表，我会将此作为评论。然而，作为一个在黑暗中射击作为答案：

您的控制器是否正确地将 CreateTestWithRisk 模型传递给视图？即您是否仍在使用 TestController 并期望它使用新模型？很难看到，因为您没有在问题中指定控制器名称等。

这可以解释为什么没有 CreateTestWithRisk 类型的数据被传回控制器。

# textfield - 如何为不同的文本字段设置不同的最大长度？

> ID：13323965
> 
> 赞同：0
> 
> 时间：2012-11-10T16:50:35.240
> 
> 标签：textfield, maxlength

我的 WordPress 主题中有一个选项面板，其中包含几个文本字段，例如项目标题、项目描述等。

```
case 'text':
        $val = $value['std'];
        $std = get_option($value['id']);
        if ( $std != "") { $val = $std; }
        $output .= '<input class="" maxlength="12" name=""'. $value['id'] .'" id="'. $value['id'] .'" type="'. $value['type'] .'" value="'. $val .'" />';
    break; 
```

如上面的代码所示......我目前将文本字段的最大长度设置为 12，但我希望每个文本字段的最大长度都不同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:13:17.267

定义一个包含字段及其对应的最大长度值的数组。（我使用了字段名称，但您也可以使用 ID 号）

*例如：* field_name => max_length_for_that_field

```
$maxFieldLengths = array(
    'project_title' => 12,   //project title has 12 max length
    'project_description' => 100   //project description has 100 max length
); 
```

确定您当前正在构建的文本字段（输入）并使用该标识符来引用您的 maxFieldLengths 数组。

```
case 'text':
    ...
    $field_name = // Identify the current field here;
    $output .= '<input class="" maxlength="'. $maxFieldLengths[$field_name] .'" etc .....' />
break; 
```

* * *

注意：从您的代码示例中，您如何识别当前正在构建的字段并不是 100% 清楚的。例如，您可以使用以下内容：

```
...
$field_name = getFieldFromId($value['id']); 
```

# php - Javascript字符串小写以匹配数据库字段

> ID：13323969
> 
> 赞同：0
> 
> 时间：2012-11-10T16:50:57.710
> 
> 标签：php, javascript, html, mysql

我有一个表格

```
<form action="_orders.php" method="get" autocomplete="off" name="cerca_db">
 <tr>
  <td class="main" width="170">Ricerca Cliente</td>
  <td><input type="hidden" name="action" value="check_sped_data" /></td>
  <td class="main"><p class="ciao" id="auto"><input id="searchField" name="searchField" type="text" onKeyPress="return disableEnterKey(event)"></p></td>
  <td width="25"></td>
  <td class="main"><input type="submit" value="Cerca"></td>
 </tr>
</form> 
```

这用于在 mysql 数据库表中进行搜索。单击按钮后，它会根据刚刚找到的数据库记录自动完成另一个表单的所有字段。

现在我的问题是自动完成部分，因为区分大小写。我已经设法以小写形式提取数据，但是在发送到 java 函数以匹配 db 记录之前，我无法将输入 *searchField*转换为小写。

我实际上发现 javascipt 函数具有自动完成功能。我只更改了 html 和 php 部分以满足我的需要，我没有触及 java 本身的任何内容，因为我完全是一个菜鸟。

所以现在表单像这样将输入发送到javascript

```
$(function(){
  setAutoComplete("searchField", "results", "autocomplete.php?part=");
}); 
```

automcomplete.php 需要根据输入从数据库中提取数据并放入数组中以显示在输入下：

```
$result = mysql_query("SELECT a.customers_firstname, a.customers_lastname, a.customers_id, b.entry_company FROM customers a left join address_book b on a.customers_id = b.customers_id GROUP BY b.entry_cf");
while ($row = mysql_fetch_assoc($result)) 
{
  $ricerca = array(strtolower($row['customers_firstname']) => strtolower($row['customers_lastname']));

  foreach ($ricerca as $key=>$data)
  {
    $edata[]=$data . ' ' . $key;
    $edata[].=$key .' ' . $data;
  } 

  $edata[].=(strtolower($row['entry_company']));
} 
```

现在我们已经准备好名称和公司的数组，所有小写字母都可以匹配字段中输入的内容。如果输入为小写，一切正常，但如果输入为大写，则根本不匹配任何内容。

你们对此有任何解决方案或任何想法我可以解决区分大小写的问题吗？

编辑：这是数据从 db 推送到 java 脚本的方式：

```
if(isset($_GET['part']) and $_GET['part'] != '')
{
         $results = array();

     $count = 0;
     foreach($extracted_data as $edata)
     {
         if( strpos($edata, $_GET['part']) === 0 )
            {
                 $results[] = $edata;
                 $count++;
                 if ($count == 10) break;
             }
     }
     echo json_encode($results);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:18:31.760

这应该让你走上正确的轨道：

```
document.getElementById('foo').addEventListener('keypress', function(e) {
    e.preventDefault();
    this.value += String.fromCharCode(e.keyCode).toLowerCase(); 
});​ 
```

演示：http: [//jsfiddle.net/m66c2/](http://jsfiddle.net/m66c2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:16:30.737

在提交或发送信息之前，调用一个将所有字符转换为小写的 javascript 函数。如果您的元素名为“YourInputID”，示例：

```
function convert()
{
    var a = document.getElementById("YourInputID").value;
    a = a.toString().toLowerCase();
    document.getElementById("YourInputID").value = a;
} 
```

您可以在此处使用 javascript 字符串函数[参考](http://www.w3schools.com/jsref/jsref_tolowercase.asp)str.toLowerCase() 将字符串字符转换为小写字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:20:33.907

好的，首先你的 PHP 会有一些问题。你说的地方：

```
$edata[]=$data . ' ' . $key;
$edata[].=$key .' ' . $data; 
```

这将访问数组中的两个不同项目，我假设您不想这样做。那是因为`$array[]`使用该方法的语法（有点）短`array_push()`——每次访问它时，它都会添加到数组中。语法`$array[].=$value`的含义与`$array[]=$value`您无法有效地连接到空数组项相同。

```
$edata_this='';
foreach ($ricerca as $key=>$data)
{
  $edata_this=$data . ' ' . $key;
  $edata_this.=$key .' ' . $data;
} 

$edata_this.=(strtolower($row['entry_company']));
$edata[]=$edata_this; 
```

现在，如果您的问题只是将 JavaScript 项目转换为小写，请使用该`String.toLowerCase()`方法。

但是，对于您实际上需要更改或进行比较的问题，我并不完全确定，因此更多的解释可能会有用。

此外，您应该始终避免使用内联 JavaScript，例如 onKeypress；当您使用 jQuery 时，请尝试使用它的`$().keypress()`绑定：

```
$('input[name="YOUR_NAME"]').keypress(function(){
  // your actions go here
}); 
```

# java - Java SQL 数据库和对象存储

> ID：13323974
> 
> 赞同：0
> 
> 时间：2012-11-10T16:51:09.403
> 
> 标签：java

我想创建一个 Java GUI 程序。

该程序应允许用户添加项目（标题、价格）。当他们添加一个项目时，该项目必须添加到一个 mySql 数据库以及一个项目对象。然后需要将此项目对象存储在集合中。

Java 项目对象：

```
 import java.util.*;
import java.io.Serializable;

class Items implements Serializable{

  private String title;
  private String price;

  public Items(String t, String p) {

     title = t;
     price = p;
  }

  public void setTitle(String t) {
    title = t;
  }
  public String getTitle() {
    return title;
  }

  public void setPrice(String p) {
    price = p;
  }
  public String getPrice() {
    return price;
  }
} 
```

店铺

```
import java.util.*;
import java.io.Serializable;
import java.rmi.*;
import java.rmi.server.*;
import java.sql.*;

    class Shop extends UnicastRemoteObject implements ShopInterface, Serializable {

        //Create Array to Store Items and Users
        ArrayList<Items> arrayItems;

        //Database connection data
        Connection conn = null; // connection object

        private final String database = "Shop";
        private final String user = "";
        private final String password = "";
        private final String url = "jdbc:mysql:///" + database;

        protected Shop() throws RemoteException {

            arrayItems = new ArrayList<Items>();

            //Load the driver
            try {
                Class.forName("com.mysql.jdbc.Driver").newInstance();
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }

            //Establish Connection  
            try {
                conn = DriverManager.getConnection(url,user,password);
            } catch (SQLException e) {
                e.printStackTrace();
            }
            System.out.println("Shop Created and Database Connection Completed");

        }
        //Add Items to Shop
        public void additems(String t, String p)
                throws RemoteException {

            //SQL Insert Statement
            String insertSQL = "INSERT INTO ShopItems(title, price) VALUES('" +
                    t + "','" + p + "')";

            //Try Insert
            try {
            Statement stmt = conn.createStatement();
            int res = stmt.executeUpdate(insertSQL);
                    arrayItems.add(new Items(t, p));

            }
            catch(SQLException se) {
                System.err.println(se);
            }
        }
    } 
```

这是正确的方法吗？像这样的东西会起作用吗？（没有测试过这个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:05:35.943

我绝对不会直接做 SQL。通过自己解析 SQL 插入字符串，您正在向 SQL 注入攻击敞开大门。

如果你想使用 JDBC，我会推荐使用[Prepared Statements](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。更改当前代码以使用它不会产生很大影响，并且可以保护您免受 SQL 注入攻击。

```
PreparedStatement stmt = conn.createStatement("INSERT INTO ShopItems(title, price) VALUES(?,?)");
stmt.setString(1, t);
stmt.setString(2, p); 
```

如果这是您第一次做任何类型的 SQL 工作，我还建议您简要了解一下 JPA。虽然一开始可能会让人望而生畏，但它会让从数据存储中序列化和反序列化对象变得非常容易。

# python - 如何使用 Python 提取在 HTML 页面 javascript 块中定义的 JSON 对象？

> ID：13323976
> 
> 赞同：18
> 
> 时间：2012-11-10T16:51:24.660
> 
> 标签：python, html-parsing, beautifulsoup, headless-browser

我正在通过以下方式下载其中定义了数据的 HTML 页面：

```
... <script type= "text/javascript">    window.blog.data = {"activity":{"type":"read"}}; </script> ... 
```

我想提取在“window.blog.data”中定义的 JSON 对象。有没有比手动解析更简单的方法？（我正在研究 Beautiful Soap 但似乎找不到一种无需解析即可返回确切对象的方法）

谢谢

**编辑：** 使用 python 无头浏览器（例如，Ghost.py）执行此操作是否可能且更正确？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T19:46:10.393

BeautifulSoup 是一个 html 解析器；您还需要一个 javascript 解析器。顺便说一句，一些javascript对象文字不是有效的json（尽管在您的示例中文字也是有效的json对象）。

在简单的情况下，您可以：

1.  `<script>`使用 html 解析器提取的文本
2.  假设它`window.blog...`是单行或`';'`对象内部没有，并使用简单的字符串操作或正则表达式提取 javascript 对象文字
3.  假设字符串是一个有效的 json 并使用 json 模块解析它

例子：

```
#!/usr/bin/env python
html = """<!doctype html>
<title>extract javascript object as json</title>
<script>
// ..
window.blog.data = {"activity":{"type":"read"}};
// ..
</script>
<p>some other html here
"""
import json
import re
from bs4 import BeautifulSoup  # $ pip install beautifulsoup4
soup = BeautifulSoup(html)
script = soup.find('script', text=re.compile('window\.blog\.data'))
json_text = re.search(r'^\s*window\.blog\.data\s*=\s*({.*?})\s*;\s*$',
                      script.string, flags=re.DOTALL | re.MULTILINE).group(1)
data = json.loads(json_text)
assert data['activity']['type'] == 'read' 
```

如果假设不正确，则代码将失败。

为了放宽第二个假设，可以使用 javascript 解析器代替正则表达式，例如[`slimit`](http://slimit.readthedocs.org/)（[@approximatenumber 建议](https://ru.stackoverflow.com/questions/501556/%d0%9a%d0%b0%d0%ba-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b8%d1%82%d1%8c-%d0%b8%d0%bd%d1%84%d0%be%d1%80%d0%bc%d0%b0%d1%86%d0%b8%d1%8e-%d0%b8%d0%b7-%d1%81%d1%82%d1%80%d0%be%d0%ba%d0%b8-json-%d0%ba%d0%be%d1%82%d0%be%d1%80%d0%b0%d1%8f-%d1%83%d0%ba%d0%b0%d0%b7%d0%b0%d0%bd%d0%b0-%d0%b2-javascript-%d0%ba%d0%be%d0%b4%d0%b5-%d0%b2%d0%bd%d1%83%d1%82%d1%80%d0%b8/501630#comment598944_501562)）：

```
from slimit import ast  # $ pip install slimit
from slimit.parser import Parser as JavascriptParser
from slimit.visitors import nodevisitor

soup = BeautifulSoup(html, 'html.parser')
tree = JavascriptParser().parse(soup.script.string)
obj = next(node.right for node in nodevisitor.visit(tree)
           if (isinstance(node, ast.Assign) and
               node.left.to_ecma() == 'window.blog.data'))
# HACK: easy way to parse the javascript object literal
data = json.loads(obj.to_ecma())  # NOTE: json format may be slightly different
assert data['activity']['type'] == 'read' 
```

无需将对象文字 ( `obj`) 视为 json 对象。要获取必要的信息，`obj`可以像其他 ast 节点一样递归访问。它将允许支持任意 javascript 代码（可以通过 解析[`slimit`](http://slimit.readthedocs.org/)）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-10T19:40:29.270

像这样的东西可能会起作用：

```
import re

HTML = """ 
<html>
    <head>
    ...
    <script type= "text/javascript"> 
window.blog.data = {"activity":
    {"type":"read"}
    };
    ...
    </script> 
    </head>
    <body>
    ...
    </body>
    </html>
"""

JSON = re.compile('window.blog.data = ({.*?});', re.DOTALL)

matches = JSON.search(HTML)

print matches.group(1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T07:49:24.023

我遇到了类似的问题，最终将 selenium 与 phantomjs 一起使用。这有点笨拙，我无法弄清楚正确的等待方法，但隐式等待到目前为止对我来说似乎工作得很好。

```
from selenium import webdriver
import json
import re

url = "http..."
driver = webdriver.PhantomJS(service_args=['--load-images=no'])
driver.set_window_size(1120, 550)
driver.get(url)
driver.implicitly_wait(1)
script_text = re.search(r'window\.blog\.data\s*=.*<\/script>', driver.page_source).group(0)

# split text based on first equal sign and remove trailing script tag and semicolon
json_text = script_text.split('=',1)[1].rstrip('</script>').strip().rstrip(';').strip()
# only care about first piece of json
json_text = json_text.split("};")[0] + "}"
data = json.loads(json_text)

driver.quit() 
```

```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-08-17T03:01:25.500

快速而简单的方法是（'这里把开始（。*？）和结束在这里'）就是这样！

```
import re
import json
html = """<!doctype html>
<title>extract javascript object as json</title>
<script>
// ..
window.blog.data = {"activity":{"type":"read"}};
// ..
</script>
<p>some other html here
""" 
```

而不是简单地

```
re.search('{"activity":{"type":"(.*?)"', html).group(1) 
```

或完整的 json

```
jsondata = re.search('window.blog.data = (.*?);', html).group(1)
jsondata = json.loads(jsondata)
print(jsondata["activity"]) 
```

#输出{'类型'：'读取'}

# c# - 安装后无法编译：Mcv.Mailer 1.0 版使用 Mvc 4.0 版，其版本高于引用的程序集 Mvc 3.0 版

> ID：13323977
> 
> 赞同：0
> 
> 时间：2012-11-10T16:51:30.283
> 
> 标签：c#, visual-studio-2010, web-config, asp.net-mvc-4

我为 MvcMailer 安装了 nuget 包，在[此处](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)找到。虽然它没有（正如它在教程中所说的那样）将 smtp 配置添加到 web.config，但我在[这里](http://www.hanselman.com/blog/NuGetPackageOfTheWeek2MvcMailerSendsMailsWithASPNETMVCRazorViewsAndScaffolding.aspx)找到了正确的 smtp 配置。

我在 VS2010 中使用 MVC4。

编译时，错误列表中出现以下错误：

> 错误 1 ​​程序集 'Mvc.Mailer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 使用 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 版本高于引用程序集“System.Web.Mvc，版本=3.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”c:\Users\Home\Desktop\MVCMusicStore - Copy\packages\MvcMailer.4.0\lib\40\Mvc.Mailer。 dll MVCMusicStore

我还收到以下警告：

> 警告 2 发现同一依赖程序集的不同版本之间存在冲突。MVC音乐商店

我删除了 MvcMailer 引用并再次添加它，但它没有解决问题。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:05:54.037

我正在使用 Mvc 4，并且正在通过包管理器安装 MvcMailer，其中包含以下内容：

```
install-package MvcMailer 
```

因为我使用的是 Mvc 4，所以应该使用以下内容：

```
install-package MvcMailer3 
```

这已经解决了这个问题。

# .net - 如何创建新闻组索引器和下载器？

> ID：13323978
> 
> 赞同：0
> 
> 时间：2012-11-10T16:51:32.547
> 
> 标签：.net, newsgroup

一直在谷歌上搜索，可能是我在寻找错误的东西。

如何索引新闻组服务器？如果我已经有一个 nzb 文件列表，那么编写一个下载它们的小命令行工具有多难？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:37:07.877

一个模糊的问题。

NZB 文件列表对您没有帮助。

索引新闻组服务器意味着您必须编写一个小库来下载 usenet 服务器的所有帖子。只是标题（主题）需要大量的千兆字节来存储。我相信您必须有几个 TB 可用才能存储所有标头。

少一点存储空间将是仅索引最后 X 天，但无论如何可能会变大。

拥有所有帖子标题后，您将不得不使用一些逻辑将所有帖子组合在一起，这些帖子将是任何类型的一个版本（电影/节目/ISO）。对于您创建的每个组，您将它们组合成一个 NZB xml 文件，您可以将其用于您最喜欢的 usenet 下载器。

但是，如果您的问题是您有多个要下载的 NZB 文件的 URL，那么有一个名为[webget](http://www.websitescreenshots.com/Utilities.aspx "网络获取")的好工具，您可以使用它来下载任何 URL 文件。

# python - 如何在python中使用迭代器

> ID：13323990
> 
> 赞同：1
> 
> 时间：2012-11-10T16:52:53.067
> 
> 标签：python, string, list, iteration

我正在学习 Python，但我不明白如何使用迭代器。

我需要写代码。在 C 中它会是这样的：

```
list_node *cp = list_of_chars;
char dp = '>'; int flag = 0;
while (cp != NULL)
{ if( isdigit(cp->val) ) 
  { printf("%c",cp->val);
    if( cp->val == '0' )
    { cp->prev->next = cp->next; cp->next->prev = cp->prev; }
    else cp->val--;
  }
  else if( (cp->val == '>') || (cp->val == '<') )
  { dp = cp->val; flag = 1; }

       if( dp == '>' ) cp = cp->next;
  else if( dp == '<' ) cp = cp->prev;
  else return ERR;

  if( flag && ( (cp->val == '>') || (cp->val == '<') ))
  { cp->prev->prev->next = cp;
    cp->prev = cp->prev->prev;
  }
} 
```

你能帮我把这段代码翻译成python吗？我开始写作，但有一些错误，我不确定我是否理解文档。

```
 ip = {'cp' : iter(program), 'dp' : '>'}
  flag = 0

  while ip['cp'] != []:

    if ('0' <= ip['cp']) & (ip['cp'] <= '9'):
      print ip['cp']
      if ip['cp'] == '0': ip['cp']  = []
      else:               ip['cp'] -= 1

    elif (ip['cp'] == '>') | (ip['cp'] == '<'):
      ip['dp'] = ip.['cp']
      flag = 1

    else: raise NameError('incorrect cp-value')

    if   ip['dp'] == '>': ip['cp'].next()
    elif ip['dp'] == '<': ip['cp'].prev()
    else: raise NameError('incorrect dp-value')

    if flag & ( (ip['cp'] == '>') | (ip['cp'] == '<') ):
      ip['cp'].prev()
      ip['cp'] = [] 
```

问题是如何在没有函数 next() 的情况下获取迭代器的值。

具有高级迭代器使用的 python 专家代码示例也很高兴看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:28:29.700

好的，您的python代码中有很多问题。

那么从简单的开始

```
while ip['cp'] != []: 
```

可以简单地写成

```
while ip['cp']: 
```

`ip['cp']`虽然不是一个错误的值，但它会做。`[], None, ''`例如，是一个错误的值。

代替：

```
if   ip['dp'] == '>': ip['cp'].next()
elif ip['dp'] == '<': ip['cp'].prev()
else: raise NameError('incorrect dp-value') 
```

写

```
if ip['dp'] == '>': 
    ip['cp'].next()
elif ip['dp'] == '<':
    ip['cp'].prev()
else: 
    raise NameError('incorrect dp-value') 
```

即使在某些情况下，编写内联代码也是可行的。考虑可读性。内联代码几乎从来都不是让代码可读和易于调试的好开始。它还将使 90% 的语法错误易于修复。

这就是乐趣开始的地方......

```
 if( cp->val == '0' )
  { cp->prev->next = cp->next; cp->next->prev = cp->prev; }
  else cp->val--; 
```

和

```
 if ip['cp'] == '0': ip['cp']  = []
  else:               ip['cp'] -= 1 
```

在 python 中，'0' 是字符串`0`。在 python 中，当你有一个字符串对象时，你正在使用字符串。当你有数字时，你正在使用数字......换句话说，你试图用 python 编写的代码不能纯粹翻译成 python。python 字符串中的最后一个字符不是'\0'。它是字符串中的最后一个字符。换句话说，您真的可以像在 C 中那样测试最后一个字符。

# 现在让我们谈谈迭代器

也就是说，忽略代码中的所有其他问题，这里是如何使用迭代器。

`iter()`是一个返回迭代器的内置函数。在大多数情况下，您不必自己调用它。有一些结构可以为你做到这一点。

例如，您可以编写：

```
iterable = iter('string')
iterable.next() == 's'
iterable.next() == 't'
... Until StopIteration is raised

for i in iter('string'): 
```

是相同的：

```
for i in 'string': 
```

也就是说，迭代器用于迭代某些东西。您真正要寻找的不是迭代器。因为迭代器是一种方式。你可以走到尽头，你不能回去。没有以前的。您的`C`代码实现了一个可与迭代一起使用的链表，但在您的代码中，您正在更改某些节点的位置。

# 如果你想写python代码，不要在python中写C代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T17:22:53.903

Python 中的迭代器只能前进。它们唯一支持的操作是 next()，它要么返回下一个值，要么引发 StopIteration 异常。它们不适合这个问题，你需要前进和后退。

您的原始代码令人困惑，但我会使用列表和整数索引在 Python 中解决此问题。

# microsoft-metro - 关闭 Popup 后出现奇怪的边框

> ID：13323991
> 
> 赞同：0
> 
> 时间：2012-11-10T16:52:58.433
> 
> 标签：microsoft-metro, windows-runtime, border, windows-store-apps

关闭 Popup 后，一个奇怪的边框出现在 Page 元素之一。（页面是弹出窗口的父级）你知道原因吗？或者也许知道触发此边界的属性名称？

![奇怪的边界](../Images/5ca09b741c8e78eb12c436d2dd73f82e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:06:09.200

后退按钮具有焦点。那就是专注的状态。它是标准 Windows 应用商店 XAML 模板的一部分。它包含在 StandardStyles.xaml 文件中。

```
<Style x:Key="BackButtonStyle" TargetType="Button"> 
```

一些关键部分（例如，这将用于黑暗主题）：

```
<Rectangle
    x:Name="FocusVisualWhite"
    IsHitTestVisible="False"
    Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
    StrokeEndLineCap="Square"
    StrokeDashArray="1,1"
    Opacity="0"
    StrokeDashOffset="1.5"/>

<VisualStateGroup x:Name="FocusStates">
    <VisualState x:Name="Focused">
        <Storyboard>
            <DoubleAnimation
                Storyboard.TargetName="FocusVisualWhite"
                Storyboard.TargetProperty="Opacity"
                To="1"
                Duration="0"/>
            <DoubleAnimation
                Storyboard.TargetName="FocusVisualBlack"
                Storyboard.TargetProperty="Opacity"
                To="1"
                Duration="0"/>
        </Storyboard>
    </VisualState>
    <!-- ... etc... -->
</VisualStateGroup> 
```

虽然您可以禁用或删除它，但您可能只想在弹出窗口关闭时将焦点移动到其他位置，因为它是键盘/辅助控制用户的视觉指示器，后退按钮具有焦点。您应该能够在不使用弹出窗口的情况下按几次 TAB 键以使其显示。

# php - PHP 5.4：禁用警告“从空值创建默认对象”

> ID：13323993
> 
> 赞同：10
> 
> 时间：2012-11-10T16:53:47.767
> 
> 标签：php, error-reporting

我想将代码从 PHP 5.2 迁移到 5.4。到目前为止，这工作得很好，除了我使用的所有代码都广泛使用了只使用带有成员的对象而没有任何初始化，例如：

```
$MyObject->MyMember = "Hello"; 
```

这会导致警告：“从空值创建默认对象”

我知道解决方案是使用：

```
$MyObject = new stdClass();
$MyObject->MyMember = "Hello"; 
```

但是在我的所有代码中更改它会做很多工作，因为我在不同的项目中多次使用它。我知道，这不是很好的风格，但不幸的是，我无法在接下来的几周内将其添加到我的所有代码中。

我知道我可以将 php error_reporting 设置为不报告警告，但我希望仍然能够获得其他警告和通知。此警告似乎根本不受启用或禁用 E_STRICT 的影响。那么有没有办法禁用这个警告？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T16:57:38.097

从技术上讲，您*可以*通过[安装自己](http://php.net/manual/en/function.set-error-handler.php)的警告错误处理程序来做到这一点。从处理程序内部检查字符串错误消息；如果它是你想要抑制的那个`return true`，否则`return false`让默认的错误处理程序来做它的事情。

但是，我仍然建议您做正确的事情并在出现这种滥用的任何地方手动修复您的代码，因为如果不出意外，它会让您养成正确的习惯。除非这是有偿工作（在这种情况下，通常会出现超越实施纯度的担忧），否则请将此视为教训并做正确的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T17:05:07.657

> 我知道我可以将 php error_reporting 设置为不报告警告，但我希望仍然能够获得其他警告和通知。

不要禁用错误报告，将其保留在适当的级别，但禁用[`display_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)指令：

```
ini_set('display_errors', 0); 
```

没有理由在生产中将通知打印到屏幕上。

然后正如乔恩所说，如果您还没有使用自定义错误处理程序，例如：

```
function my_error_handler($error_level, $error_message)
{
    // write error message to log file
}
set_error_handler('my_error_handler'); 
```

您可以将错误报告级别传递给`set_error_handler`. 这样您就可以花时间做正确的事情，即修复代码以停止生成通知。

如果您将很多站点迁移到 5.4，您可能可以在 php.ini 中关闭服务器管理员`display_errors`，直到您有足够的时间来修复所有问题。更好的是，在升级之前暂存所有内容并修复它，但这可能不是一个选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T21:27:37.167

你真的可以为 php 使用 IDE 并尝试这样做：

搜索`$MyObject->MyMember = "Hello";`

寻找结果，如果它带来了正确的东西，请尝试将其替换为：

```
$MyObject = new stdClass();
$MyObject->MyMember = "Hello"; 
```

所以也许IDE会为你做长时间的工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T18:28:12.533

# php - 将多个 jQuery $.POST .php 文件合并为一个

> ID：13323994
> 
> 赞同：-3
> 
> 时间：2012-11-10T16:53:51.963
> 
> 标签：php, jquery

我不想拥有多个 PHP 文件（每个 jQuery post 脚本一个），而是想尝试将我的 PHP 脚本合并为一个。

所以而不是拥有

```
$.post('script_one.php', function(data) {
  $('.result').html(data);
});

$.post('script_two', function(data) {
  $('.result').html(data);
}); 
```

我只想拥有：

```
$.post('jqueryscripts.php', function(data) {
  $('.result').html(data);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:56:59.880

### 你可以这样做：

```
$.post('jqueryscripts.php?method=one', function(data) {
  $('.result').html(data);
});

$.post('jqueryscripts.php?method=two', function(data) {
  $('.result').html(data);
}); 
```

在 PHP 文件中，您可以这样做：

```
<?php
    if ($_GET["method"] == "one")
    {
        // Method One Handler
    }
    elseif ($_GET["method"] == "two")
    {
        // Method Two Handler
    }
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T16:57:54.400

你可以有一个文件**'jqueryscripts.php'**，然后在文件里面有一个参数**"operation"**。

然后你只需调用：

```
$.post('jqueryscripts.php', {operation:"some_operation"}, function(data) {
  $('.result').html(data);
}); 
```

在**jqueryscripts.php**中，您必须声明：

```
$operation = $_POST['operation']; 
```

接着：

```
if($operation == "some_operation") {
    ...
    echo "something";
} 
```

# c++ - opencv中最好的立体对应算法

> ID：13323995
> 
> 赞同：3
> 
> 时间：2012-11-10T16:53:53.067
> 
> 标签：c++, algorithm, opencv, stereo-3d, disparity-mapping

好吧，我有一个立体设置，它使用 SGBM（半全局块匹配）、BM（块匹配）和使用 OpenCV 库的变分匹配算法计​​算立体图像对的差异。但这种差异不如地面实况差异好。

我想知道的是，opencv 是否提供了任何可以计算地面真实差异的函数或程序。根据 Daniel Scharstein 和 Richard Szeliski 的“A Taxonomy and Evaluation of Dense Two-Frame Stereo Correspondence Algorithms”等论文，Belief Propagation 算法是最好的立体对应算法。

是否有任何现有代码使用图切割算法或opencv中的信念传播算法计算差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:53:52.220

我认为 OpenCV 中没有，但您确实有其他选择。有可用的 C++ 代码，并且不难让它与 OpenCV 交互：

*   在[Middlebury 立体](http://vision.middlebury.edu/stereo/code/)网站中，包括立体图切割和信念传播
*   还有来自 [西安大略大学的](http://vision.csd.uwo.ca/code/)Graphcut 代码，非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T14:05:35.867

我认为 Hirshmuller 的半全局块匹配算法是最好的立体对应算法之一。

该算法在 OpenCV 库中提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T14:29:41.640

信念传播的 OpenCV 实现仅适用于 GPU（[CUDA](http://docs.opencv.org/modules/gpu/doc/camera_calibration_and_3d_reconstruction.html#gpu-stereobeliefpropagation)和[OpenCL](http://docs.opencv.org/modules/ocl/doc/camera_calibration_and_3D_reconstruction.html#ocl-stereobeliefpropagation)），不适用于 CPU 实现。他们也有信念道具的恒定空间变体。

Middlebury 网站不断更新这些算法的最新技术，因此请留意新条目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-19T10:30:38.020

是的，TSGO 不是开源的，它的文章（“Accurate Stereo Matching by Two-Step Energy Minimization”）也不是免费的。有人评价过吗？

GraphCut 有一个 opencv 实现，看起来相当不错，值得一试。[http://daily-tech.hatenablog.com/entry/2016/06/25/233203](http://daily-tech.hatenablog.com/entry/2016/06/25/233203)

# javascript - Google Geochart 缩放到特定的加拿大省份

> ID：13323999
> 
> 赞同：1
> 
> 时间：2012-11-10T16:54:22.643
> 
> 标签：javascript, google-visualization

经过研究，我发现目前还不可能在 GeoChart 中仅显示特定省份，但我问自己是否可以放大到特定省份？我找不到任何关于它的信息。

这是我能得到的最接近的（显示加拿大和其中的所有省份）：

```
 <html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
     google.load('visualization', '1', {'packages': ['geochart']});
     google.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country', 'Popularity'],
          ['Germany', 200],
          ['United States', 300],
          ['Brazil', 400],
          ['Canada', 500],
          ['France', 600],
          ['RU', 700]
        ]);

        var options = {'region':'CA','resolution':'provinces'};

        var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    };
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>​ 
```

请注意，国家列表不相关，我只是在测试缩放。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:42:59.563

不幸的是，无法使用 API 中的选项来执行此操作。我能做的是用 CSS 做了一些 tweeks，以达到类似的结果。

我在 div 周围创建了另一个 div，它将显示地图，具有特定的大小和隐藏的溢出。然后我以大比例创建了地图，并使用 css 边距值将其放置在父 div 内，仅显示我想要的区域。

例如：

```
#canvas {
    width:250px;
    height:300px;
    overflow:hidden;
}
#visualization {
    top:-150px;
} 
```

这是一个工作示例：

[http://jsfiddle.net/cmoreira/njB6m/](http://jsfiddle.net/cmoreira/njB6m/)

希望能帮助到你！干杯