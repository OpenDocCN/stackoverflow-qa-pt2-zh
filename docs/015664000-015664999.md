# StackOverflow 问答 15664000-15664999

# python - 如何使用 python 以编程方式测量 HTML 源代码中元素的大小？

> ID：15664000
> 
> 赞同：7
> 
> 时间：2013-03-27T16:23:23.737
> 
> 标签：python, html, dom

我正在用python进行网页布局分析。一项基本任务是以编程方式测量给定 HTML 源代码的元素大小，以便我们可以获得网页语料库的内容/广告比率、广告块位置、广告块大小的统计数据。

一个明显的方法是使用宽度/高度属性，但它们并不总是可用的。此外，`width: 50%`需要在加载到 DOM 后进行计算。所以我猜想将 HTML 源代码加载到 window-size-predefined-browser 中（比如[mechanize](http://wwwsearch.sourceforge.net/mechanize/)虽然我不确定是否可以设置窗口的大小）是一个很好的尝试方法，但是 mechanize 不支持返回无论如何元素大小。

是否有任何通用方法（没有宽度/高度属性）在 python 中执行此操作，最好使用一些库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:26:59.043

我建议你看看[Ghost](https://ghost-py.readthedocs.io) - 用 python 编写的 webkit web 客户端。它支持 JavaScript，因此您可以轻松调用 JavaScript 函数并获取其返回值。示例显示了如何找出谷歌文本框的宽度：

```
>>> from ghost import Ghost
>>> ghost = Ghost()
>>> ghost.open('https://google.lt')
>>> width, resources = ghost.evaluate("document.getElementById('gbqfq').offsetWidth;")
>>> width
541.0  # google text box width 541px 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:05:34.020

要正确获得所有最终尺寸，您需要渲染内容，同时考虑所有 CSS 样式表，可能还有所有 javascript。因此，从 Python 程序中获取大小的唯一方法是在 Python 中实现完整的 Web 浏览器，使用可以执行此操作的库，或者远程引导浏览器脱离进程。

后一种方法可以使用 Selenium 工具来完成 - 在此处检查如何从 Python 程序中获取 javascript 表达式的结果：[Selenium Web 驱动程序可以访问 javascript 全局变量吗？](https://stackoverflow.com/questions/10455130/can-selenium-web-driver-have-access-to-javascript-global-variables)

# iphone - 如何在整个 XML 文档中获取具有特定名称的第 n 个元素？

> ID：15664001
> 
> 赞同：0
> 
> 时间：2013-03-27T16:23:24.420
> 
> 标签：iphone, objective-c, xpath, hpple

使用 Hpple Xpath 的类似工作也会如此

```
//a[4] 
```

html 树中的第四个标签？还是我需要通过在 for() 循环中计数来以编程方式完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:32:52.450

`<a>`HTML 文档中第四个的 XPath是：

```
(//a)[4] 
```

您的示例`//a[4]`将生成一组所有s，它们是各自父级`<a>`中的第四个，这不是您想要的。`<a>`

另请参阅：[https ://stackoverflow.com/a/14209492/1945651](https://stackoverflow.com/a/14209492/1945651)

# c - C 中的包含和链接

> ID：15664006
> 
> 赞同：0
> 
> 时间：2013-03-27T16:23:33.197
> 
> 标签：c, compilation, linker, pthreads, header-files

我正在解决一个简单的读者/作家问题。我有 3 个`.c`文件和 3 个`.h`文件。

`parent.c`：

```
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>
#include <semaphore.h>
#include "parent.h"
#include "reader.h"
#include "writer.h"

 int main(){
      printf("Aeeeee ");
      globalVariable = 0;
      readers = 0;  
      max = 25;
      sem_init(&waitSema, 0, 0);
      sem_init(&globalSema, 0, 0);
      sem_init(&rdSema, 0, 0);
      pthread_t * array [max];  
      int mda = 0;
      int i;
      for(i = 0; i < max; i++){
        pthread_t * thr = malloc(sizeof(pthread_t));
        array[i] = thr;
        mda = rand()%100;
        if(mda > 50){
          pthread_create(array[i], NULL, writer, NULL);
        }else{
          pthread_create(array[i], NULL, reader, NULL);
        }
      }

      for(i=0; i<max; i++){
        pthread_join(*array[i], NULL);
      }

   } 
```

`reader.c`：

```
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>
#include <semaphore.h>
#include "reader.h"
#include "parent.h"

void * reader (void * param){
  sem_wait(&waitSema);
  sem_wait(&rdSema);
  if(readers == 0){
    sem_wait(&globalSema);
  }
  readers++;
  sem_post(&rdSema);
  sem_post(&waitSema);
  printf("Reader : %d\n", globalVariable);
  sem_wait(&rdSema);
  readers--;
  if(readers == 0){
    sem_post(&globalSema);
  }
  sem_post(&rdSema);
} 
```

`writer.c`：

```
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>
#include <semaphore.h>
#include "writer.h"
#include "parent.h"

void * writer (void * param){
  sem_wait(&waitSema);
  sem_wait(&globalSema);
  sem_post(&waitSema);
  globalVariable++;
  printf("Writer : %d\n", globalVariable);
  sem_post(&globalSema);
} 
```

`parent.h`：

```
sem_t waitSema;         
sem_t globalSema;       
sem_t rdSema;

int globalVariable;     
int readers;        
int max; 
```

`reader.h`：

```
void * reader (void * param); 
```

`writer.h`：

```
void * writer (void * param); 
```

我用这个命令编译代码： `gcc -pthread parent.c reader.c writer.c -o out`，但是当我运行时`./out`没有任何反应。`main`函数 from`parent.c`不执行。

我想要做的是声明一些全局变量，`parent.h`以便在所有 3 个`.c`文件中使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:25:51.023

使用[`extern`](http://en.wikipedia.org/wiki/External_variable)关键字。

header.h 文件：

```
 /* notify code that this symbol exists, but isn't declared yet */
  extern int someInt; 
```

.c 文件 1：

```
 /* declare symbol */
  int someInt = 0; 
```

.c 文件 2：

```
 #include <header.h>
  /* you can use `someInt` now */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:24:58.237

问题出在信号量初始化中。起初，我将`0`s 作为信号量的值，因此所有线程最终都无法加入。但是在我将值更改为`1`s 之后，一切都按原样进行。

```
sem_init(&waitSema, 0, 1);
sem_init(&globalSema, 0, 1);
sem_init(&rdSema, 0, 1); 
```

谢谢大家的回答。

# asp.net-mvc - 从 IIS 上的 ASP.NET 应用程序中删除 .pdb 会中断应用程序

> ID：15664008
> 
> 赞同：2
> 
> 时间：2013-03-27T16:23:34.933
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4, pdb-files

我正在尝试将 ASP.NET MVC 4 应用程序部署到 IIS 8。当在 VS 2012 中选择调试模式构建时，应用程序在 IIS 上运行良好。However, when Release mode is selected, the application gives a yellow screen with a 404 error and something about the path not implementing IController.

我发现将 .pdb 调试符号添加到 IIS 上的 bin/ 文件夹中，应用程序开始正常工作。

有谁知道为什么会这样？我在 VS 中使用了发布模式构建设置，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:09:43.330

原来我使用的是 StackFrame 类，如果没有调试符号，它当然无法工作。切换到使用 .NET 4.5 中的 CallerMemberName 属性，现在一切正常！

# ruby-on-rails - 未定义的方法`sent_messages'

> ID：15664009
> 
> 赞同：1
> 
> 时间：2013-03-27T16:23:35.130
> 
> 标签：ruby-on-rails

当我转到 /messages?mailbox=sent 时，我得到一个“未定义的方法 `sent_messages'” 在我在 def index @user.sent_messages 下的消息控制器中。所以我不确定为什么它是未定义的。

消息模型：

```
attr_accessible :subject, :body, :sender_id, :recepient_id, :read_at,:sender_deleted,:recepient_deleted
validates_presence_of :subject, :message => "Please enter message title"

belongs_to :sender,
:class_name => 'User',
:foreign_key => 'sender_id'
belongs_to :recepient,
:class_name => 'User',
:foreign_key => 'recepient_id'

# marks a message as deleted by either the sender or the recepient, which ever the user that was passed is.
# When both sender and recepient marks it deleted, it is destroyed.
def mark_message_deleted(id,user_id)
    self.sender_deleted = true if self.sender_id == user_id and self.id=id
    self.recepient_deleted = true if self.recepient_id == user_id and self.id=id
    self.sender_deleted && self.recepient_deleted ? self.destroy : save!
end

# Read message and if it is read by recepient then mark it is read
def self.readingmessage(id, reader)
    message = find(id, :conditions => ["sender_id = ? OR recepient_id = ?", reader, reader])
    if message.read_at.nil? && (message.recepient.user_id==reader)
        message.read_at = Time.now
        message.save!
    end
    message
end

# Based on if a message has been read by it's recepient returns true or false.
def read?
    self.read_at.nil? ? false : true
end 
```

用户模型：

```
 def unread_messages?
   unread_message_count > 0 ? true : false
 end

 # Returns the number of unread messages for this user
 def unread_message_count
   eval 'messages.count(:conditions => ["recepient_id = ? AND read_at IS NULL", self.user_id])'
 end

  def to_s; username
  end

  def has_role?(role_name)
    role.present? && role.to_sym == role_name.to_sym
  end

  def send_password_reset
    generate_token(:password_reset_token)
    self.password_reset_sent_at = Time.zone.now
    save!
    UserMailer.password_reset(self).deliver
  end

  def generate_token(column)
    begin
      self[column] = SecureRandom.urlsafe_base64
    end while User.exists?(column => self[column])
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:28:51.273

我认为您在模型中没有`sent_messages`方法。`User`在您的`user.rb`.

```
 def sent_messages
    #Your code
  end 
```

你能准确地提供你正在寻找的东西吗？所以很容易帮助，你可以获得更合适的答案。

**编辑：**

如我所见，您没有`sent_messages`在`User`模型中调用任何实例级方法。

# android - 用于 AES/ECB/PKCS7Padding 的自定义字符串填充，从零到 256 位大小的密钥

> ID：15664011
> 
> 赞同：1
> 
> 时间：2013-03-27T16:23:43.277
> 
> 标签：android, ios, encryption, aes

# 问题描述

我最近遇到了一种情况，在这种情况下，我需要使用这样的预定义`String`密钥在 iOS 和 Android 之间进行 256-AES 跨平台加密/解密`PreDefinedKey`。

AES 实现是在 iOS 上使用[此代码](http://pastie.org/426530)完成的，我需要做的就是更改 Android 上的代码，以便我可以进行“跨平台”加密/解密。

*注意：我知道 iOS 上的 AES 代码存在严重的安全/内存问题，但目前我不关心 :-)*

我能够分别在 Android 和 iOS 上进行加密/解密。然而，这里的两个 AES 实现似乎有一个微不足道的差异，这阻止了我进行“跨平台”加密/解密。例如，我将 Android 加密的 String 放到 iOS 中，它无法返回预期的结果（在这种情况下，它返回 null）。

**问题：**

`AES/ECB/PKCS7Padding`在 iOS 和 Android 平台上，我确信算法是`128-Rijndael`AES 实现的算法。

两个平台都应使用 256 位大小的密钥。通过深入了解 iOS AES 代码，我发现它实际上用于`zeroes`将密钥填充到 256 位。

这是 iOS 上与零填充相关的代码片段：

```
// 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding) 
```

这是该代码中的 AES 参数（它使用 Rijndael-128 算法，256 位密钥大小，初始向量为 NULL）：

```
CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                     keyPtr, kCCKeySizeAES256,
                                     NULL /* initialization vector (optional) */,
                                     [self bytes], dataLength, /* input */
                                     buffer, bufferSize, /* output */
                                     &numBytesEncrypted); 
```

但是在Android上我不知道如何做类似的事情，所以有人可以为我指出正确的方法吗？

* * *

# 我正在使用的代码

在**Android**平台上，我使用下面的代码来做AES实现：

```
private static final String AES_SECRET = "PreDefinedKey";

/**
 * Method for AES encryption
 * @param raw
 * @param plain
 * @return
 * @throws Exception
 */
private static byte[] encrypt(byte[] raw, byte[] plain) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES/ECB/PKCS7Padding");
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS7Padding");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(plain);
    return encrypted;
}

/**
 * AES decryption
 * @param encryptMsg
 * @return
 * @throws Exception
 */
public static String AESDecrypt(String encryptMsg)
        throws Exception {          
    byte[] rawKey = getRawKey(AES_SECRET.getBytes());
    //byte[] enc = toByte(encryptMsg);
    byte[] enc = Base64.decode(encryptMsg, 0);
    byte[] result = decrypt(rawKey, enc);
    return new String(result);

}

/**
 * Method for AES decryption
 * @param raw
 * @param encrypted
 * @return
 * @throws Exception
 */
private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
    SecretKeySpec keySpec = new SecretKeySpec(raw, "AES/ECB/PKCS7Padding");
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS7Padding");
    cipher.init(Cipher.DECRYPT_MODE, keySpec);
    byte[] decrypted = cipher.doFinal(encrypted);
    return decrypted;

}

public static byte[] getRawKey(byte[] seed) throws Exception {

    KeyGenerator kgen = KeyGenerator.getInstance("AES");
    SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
    sr.setSeed(seed);
    //Init for 256bit AES key
    kgen.init(256);
    SecretKey secret = kgen.generateKey();
    //Get secret raw key
    byte[] raw = secret.getEncoded();

    return seed;

} 
```

在 的方法中`getRawKey()`，它使用`SHA1PRNG`生成随机填充以使 AES 密钥为 256 位大小，这与 iOS 实现不同（它使用零将密钥填充为 256 位）。

那么，如何更改此方法以便可以使用预定义的字符串键，该键用零填充到 256 位？

如果您需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:00:11.687

找到提出这个零填充方案的人，然后解雇他们。然后审查应用程序。

至于您的问题，只需创建一个长度为 32 的字节数组，然后将密钥字节复制到开头，然后使用它来初始化`SecretKeySpec`. 这`KeyGenerator`将生成一个随机密钥，整个“固定种子”的想法是有缺陷的，并且不适用于最新的 Android 版本。这是一些代码：

```
// zeros by default
byte[] rawKey = new byte[32];
// if you don't specify the encoding you might get weird results
byte[] keyBytes = AES_SECRET.getBytes("ASCII");
System.arraycopy(keyBytes, 0, rawKey, 0, keyBytes.length);
SecretKey key = new SecretKeySpec(rawKey, "AES");
Cipher cipher = ...
// rest of your decryption code 
```

# django - Django 模型的测试样板：寻求一种可移植的单文件解决方案

> ID：15664015
> 
> 赞同：3
> 
> 时间：2013-03-27T16:23:55.317
> 
> 标签：django, django-models

我正在尝试为 Django 制作一个[最小的工作示例](https://tex.meta.stackexchange.com/questions/228/ive-just-been-asked-to-write-a-minimal-example-what-is-that)。这应该是一个文件，它允许在内存数据库中定义和实例化模型，然后可以将其用于 stackoverflow 问题。如果可能的话，我希望它使用 django/unittest 框架，因为这样可以很容易地演示模型行为的问题。

Stackoverflow 上有很多问题可以从这样的事情中受益。

到目前为止我所管理的：

```
# Django Minimal Working Example
# (intended) usage: save as `mwe.py` and run `python mwe.py`

# Settings
from django.conf import settings
settings.configure(DATABASES = {
        'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': ':memory:'}
        })

# Models
# with help from http://softwaremaniacs.org/blog/2011/01/07/django-micro-framework/en/
from django.db import models
import sys

sys.modules['mwe.mwe'] = sys.modules[__name__]
sys.modules[__name__].__name__ = 'mwe.mwe'
__package__ = 'mwe.mwe'

class Book(models.Model):
    isbn = models.IntegerField()

# Make a database and do things to it
from django.utils import unittest
from django.test import TestCase

class TestCreateObjects(TestCase):

    def setUp(self):
        book = Book.objects.create(isbn='9780470467244')

    def test_sanity(self):
        self.assertEqual(Book.objects.count(), 1)

unittest.main() 
```

该脚本可以运行单元测试，但会引发错误`django.db.utils.DatabaseError: no such table: mwe_book`。

**编辑**我还尝试将这些行替换为`from django.utils import unittest`：

```
from django.core.management import call_command
call_command('syncdb', interactive=False)
book = Book.objects.create(isbn='9780470467244') 
```

在引发与上述相同的 DatabaseError 之前，这会给出以下反馈：

```
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s) 
```

**摘要**感谢 Pavel 的帮助，这很有效。作为参考，这里是一个精简版的脚本减去无关的单元测试内容：

```
# Django Minimal Working Example
#   usage: save as `mwe.py` and run `python mwe.py`

# Setup django with an in-memory sqlite3 database
#   Thanks to Pavel Anossov http://stackoverflow.com/a/15824108/188595
import sys
from django.conf import settings
from django.core.management import call_command
settings.configure(
        DATABASES = {
            'default': {'ENGINE': 'django.db.backends.sqlite3',
                        'NAME': ':memory:'}
        },
        INSTALLED_APPS = ('mwe',),
    )
from django.db import models
sys.modules['mwe.models'] = sys.modules['mwe.mwe'] = sys.modules['mwe'] = sys.modules[__name__]
sys.modules[__name__].__name__ = __package__ = 'mwe.mwe'

# YOUR MODEL DEFINITIONS HERE

class Book(models.Model):
    isbn = models.IntegerField()

# The call_command line has to appear after all model definitions
call_command('syncdb', interactive=False)

# YOUR CODE HERE

Book.objects.create(isbn='9780470467244')
assert Book.objects.count() == 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:40:16.857

您缺少的是实际安装应用程序：

```
settings.configure(
        DATABASES = {
            'default': {'ENGINE': 'django.db.backends.sqlite3',
                        'NAME': ':memory:'}
        },
        INSTALLED_APPS = ('mwe',),
    ) 
```

这意味着该模块也将作为`mwe.models`by`syncdb`和 as `mwe`by translation 导入：

```
sys.modules['mwe.models'] = sys.modules[__name__]
sys.modules['mwe'] = sys.modules[__name__] 
```

我的最终版本：

```
from django.conf import settings
import sys

settings.configure(
        DATABASES = {
            'default': {'ENGINE': 'django.db.backends.sqlite3',
                        'NAME': ':memory:'}
        },
        INSTALLED_APPS = ('mwe',),
    )

from django.core.management import call_command
from django.utils import unittest
from django.db import models
from django.test import TestCase

sys.modules['mwe.models'] = sys.modules[__name__]
sys.modules['mwe.mwe'] = sys.modules[__name__]
sys.modules['mwe'] = sys.modules[__name__]
sys.modules[__name__].__name__ = 'mwe.mwe'
__package__ = 'mwe.mwe'

class Book(models.Model):
    isbn = models.IntegerField()

class TestCreateObjects(TestCase):
    def setUp(self):
        book = Book.objects.create(isbn='9780470467244')

    def test_sanity(self):
        self.assertEqual(Book.objects.count(), 1)

call_command('syncdb', interactive=False)
unittest.main() 
```

* * *

```
$ python mwe.py
Creating tables ...
Creating table mwe_book
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)
.
----------------------------------------------------------------------
Ran 1 test in 0.002s

OK 
```

我确信这以一些可怕的方式被破坏并且依赖于 django 版本，但我们必须尝试看看。

# android - 应用引擎连接的android项目不工作

> ID：15664017
> 
> 赞同：0
> 
> 时间：2013-03-27T16:23:58.500
> 
> 标签：android, google-app-engine, google-cloud-messaging, google-eclipse-plugin

我已经按照向导生成了一个“应用引擎连接的 android 项目”，并使用了[https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)中的说明。

我对自动生成的内容所做的唯一补充是设置 api 密钥、设置进程号、设置`LOCAL_ANDROID_RUN`为 true。

Appengine 开发服务器启动正常，一切正常，应该在 localhost:8888

Android 应用程序可以很好地部署到模拟器（运行 google apis 作为目标）。

但是当我点击注册时，我得到

> '对不起！应用程序 VillageTest（进程 com.villagetest）意外停止。请再试一次。'

带有“强制关闭”的按钮。

Logcat如下：

```
03-27 16:19:02.098: D/dalvikvm(422): GC_FOR_MALLOC freed 5074 objects / 389216 bytes in 75ms
03-27 16:19:02.288: V/GCMBaseIntentService(422): Releasing wakelock
03-27 16:19:02.288: W/dalvikvm(422): threadid=9: thread exiting with uncaught exception (group=0x4001d800)
03-27 16:19:02.298: E/AndroidRuntime(422): FATAL EXCEPTION: IntentService[GCMIntentService-405986951973-1]
03-27 16:19:02.298: E/AndroidRuntime(422): java.lang.NullPointerException
03-27 16:19:02.298: E/AndroidRuntime(422):  at com.villagetest.GCMIntentService.onRegistered(GCMIntentService.java:144)
03-27 16:19:02.298: E/AndroidRuntime(422):  at com.google.android.gcm.GCMBaseIntentService.handleRegistration(GCMBaseIntentService.java:251)
03-27 16:19:02.298: E/AndroidRuntime(422):  at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:153)
03-27 16:19:02.298: E/AndroidRuntime(422):  at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
03-27 16:19:02.298: E/AndroidRuntime(422):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 16:19:02.298: E/AndroidRuntime(422):  at android.os.Looper.loop(Looper.java:123)
03-27 16:19:02.298: E/AndroidRuntime(422):  at android.os.HandlerThread.run(HandlerThread.java:60) 
```

请帮忙。这让我疯狂！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:29:12.720

这已在今天发布的最新版 GPE (3.2.2) 中得到修复。在您之前从未向端点注册过您的设备的情况下，该问题与缺少空检查有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:52:16.573

问题似乎出在您的 GCMIntentService 实现中（在 GCMIntentService.java 第 144 行）。我建议您在代码中发布或查看该行。

您是否按照说明在您的应用程序中实施 GCM：http:
[//developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)
最具体地说，第 3 步？

另外，请注意，昨天有人发布了几乎完全相同的问题...
[app engine(eclipse): can't register device from android emulator to endpoint](https://stackoverflow.com/questions/15638377/app-engineeclipse-cant-register-device-from-android-emulator-to-endpoint#comment22190879_15638377)

您似乎遇到了完全相同的问题，他现在已经发布了他的第 144 行。我将在那里跟进。

# d3.js - 使用 json 和逗号分隔数组构建 D3 表

> ID：15664018
> 
> 赞同：0
> 
> 时间：2013-03-27T16:24:00.053
> 
> 标签：d3.js, html-table

我正在尝试从二维数组构建一个 html 表，其中每个数组元素使用一行，行中每个字符串使用一个单元格。我得到了每个字符的单元格。我已经尝试了一些用逗号分割字符串的组合，但没有一种有效。如何得到

一二三

[http://jsfiddle.net/johnpoole/BfTWP/](http://jsfiddle.net/johnpoole/BfTWP/)

```
var json_data = ["one,two,three","red,green,blue"];
var table = d3.select("body").append("table");
var rows = table.selectAll("tr").data(json_data).enter().append("tr");
rows.selectAll("td").data(function(d){return d;}).enter().append("td").text(function(d)   {return d;}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:58:18.403

最后一行需要返回`d.split(",")`以将字符串分解为一个数组。否则，JS 会遍历字符串中的字符。

或者，您可以保持代码不变并将数据更改为：

```
var json_data = [["one","two","three"],["red","green","blue"]]; 
```

[jsFiddle 双向更新](http://jsfiddle.net/chriswilsondc/BfTWP/1/)。

# maven - Maven、Flexmojos 和生成目标：选择目标包而不是源包

> ID：15664020
> 
> 赞同：0
> 
> 时间：2013-03-27T16:24:01.347
> 
> 标签：maven, flexmojos

我想知道是否有一种方法可以生成另一个包而不是源包`Flexmojos`？`generate`例如，如果我有一个 Java 类`foo.bar.A.java`，我想生成例如`bar.foo.A.as`not `foo.bar.A.as`。

我的问题是我使用：

```
<baseOutputDirectory>${project.build.sourceDirectory}/com/sim/gas3/base</baseOutputDirectory>
<outputDirectory>${project.build.sourceDirectory}/com/sim/gas3/</outputDirectory> 
```

所以一个生成的类必须有类似的包，`com.sim.gas3.foo.bar`而这个插件只在`com/sim/gas3`包下生成类`foo.bar`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:39:20.463

好的，只要找到它：

```
<translators>
    <translator>the.older.package=the.new.package</translator>
</translators> 
```

# php - 如果从 iPhone 设备查看，更改网站的标题？

> ID：15664026
> 
> 赞同：1
> 
> 时间：2013-03-27T16:24:24.620
> 
> 标签：php, iphone, mobile

我有一个在移动设备（iPhone 设备）上看起来不错的网站。但唯一令人反感的是在移动设备上查看时的标题！

该网站是用 PHP 编写的。并且网站的标题是基于模板的。它在模板文件夹中称为 header.php。

如果有人从手机查看网站而不是为移动设备创建整个网站（移动友好网站），我是否可以只更改网站的 header.php？

我知道如果我愿意，我可以将用户转移到网站的移动版本，但如果有人从手机查看它，我宁愿只更改 header.php。

谢谢

**编辑**

哇，伙计们，我现在被宠坏了。非常感谢您的所有回答。

我可以在这里选择多个答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:27:54.833

试试这个

```
<?php
if(strstr($_SERVER['HTTP_USER_AGENT'],'iPhone') || strstr($_SERVER['HTTP_USER_AGENT'],'iPad')) {
  include "mobile_header.php";
} else {
  include "desktop_header.php";
}

?> 
```

**编辑**感谢@silentboy 指出我的错误。改变了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:27:46.473

您可以为此使用设备检测库并有条件地显示正确的头文件。这是一个很好的： [http](http://code.google.com/p/php-mobile-detect/) ://code.google.com/p/php-mobile-detect/ 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:28:07.673

解析`$_SERVER["HTTP_USER_AGENT"];`iPhone 相关的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T16:28:17.783

你听说过[php-mobile-detect](https://code.google.com/p/php-mobile-detect/)吗？

做这种事情真的很容易。

```
include 'Mobile_Detect.php';
$detect = new Mobile_Detect;
if($detect->isiPhone()){
    // require different header
} else {
    // require standard header
} 
```

我会将它插入一个`$_SESSION`变量并检查它，`if(!isset($_SESSION['iPhone']))`所以它只被调用一次。我也为不同的移动操作系统版本做这种事情，它非常方便并且他们保持最新。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T16:32:17.650

```
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
{
// display mobile header
}   
else{
// display standard header
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T16:30:49.883

您可以使用刚刚提出的服务器端解决方案，也可以使用媒体查询来更改标头的样式以适应移动设备。

```
@media only screen and (max-device-width: 480px) {
  ...
} 
```

使用它来添加针对移动设备优化的样式。要么更改宽度、填充、大小等，要么您可以隐藏某些您不希望在移动设备上可见的标记。

只是另一种选择。:)

# wpf - 调整其父窗口大小时的 WPF GridSplitter 行为

> ID：15664027
> 
> 赞同：2
> 
> 时间：2013-03-27T16:24:24.823
> 
> 标签：wpf, resize, window, gridsplitter

我已经定义了我的 GridSplittler XAML，如下所示。

```
<Window>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
    </Grid>

    <Border Grid.Column="0" Background="Red" />
    <GridSplitter Grid.Column="1" ResizeDirection="Columns" Width="3" Height="Auto" HorizontalAlighment="Stretch" VerticalAlignment="Stretch" />
    <Border Grid.Column="0" Background="Green" />

</Window> 
```

这将创建两列，它们之间有一个网格拆分器，并且它会在左右拖动网格拆分器时正确调整列的大小。现在，如果您调整整个窗口的大小，我希望左侧红色列的宽度保持固定，并且右侧绿色列的宽度会发生变化（随着窗口大小的调整）。它与调整整个 Visual Studio 应用程序的大小时效果相同，并且解决方案资源管理器的宽度保持固定，但代码选项卡的宽度会发生变化。也与 SQL Server Management Studio 相同；对象资源管理器宽度保持固定，但 SQL 选项卡宽度发生变化。我意识到这两个示例使用了更复杂的停靠控件，但我希望通过使用 WPF GridSplitter 来获得相同的结果。

**编辑**：根据 mathieu 的建议，所有必要的就是给第一列定义一个初始宽度（下面使用 200 显示）。

```
<Grid Name="GridName">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Border Grid.Column="0" Background="Red" />
    <GridSplitter Name="SplitterName" Grid.Column="1" ResizeDirection="Columns" Width="3" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    <Border Grid.Column="2" Background="Green" />
</Grid> 
```

现在，当窗口重新调整大小时，它只会改变绿色边框的宽度，而红色边框的宽度保持不变。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:39:20.077

如果您不介意后面的一些代码，您可以通过对拆分器的 DragDelta 事件做出反应并调整第一列的宽度、移除星形宽度并根据拖动增量固定宽度来实现此行为。

xml:

```
<Grid Name="GridName">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Border Grid.Column="0" Background="Red" />
    <GridSplitter Name="SplitterName" Grid.Column="1" ResizeDirection="Columns" Width="3" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    <Border Grid.Column="2" Background="Green" />
</Grid> 
```

背后的代码

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        SplitterName.DragDelta += SplitterNameDragDelta;
    }

    private void SplitterNameDragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
    {
        GridName.ColumnDefinitions[0].Width = new GridLength(GridName.ColumnDefinitions[0].ActualWidth + e.HorizontalChange);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-28T13:13:36.400

我使用了 mathieu 的片段 - 并对其进行了修改以供使用后面的代码。在我的情况下，我需要由 GridSplitter 调整大小的动态项目数。

我使用拇指控件来完全控制动作

```
private Thumb GetNewThumbAsGridSplitter(int column)
    {
        var gs = new Thumb();
        gs.SetValue(Grid.ColumnProperty, column);
        // gs.SetValue(Grid.RowSpanProperty, 2);
        // gs.SetValue(Grid.RowProperty, 1);
        gs.Width = 5;
        gs.MouseEnter += (o, i) =>
        {
            Mouse.OverrideCursor = Cursors.ScrollWE;
        };
        gs.MouseLeave += (o, i) =>
        {
            Mouse.OverrideCursor = Cursors.Arrow;
        };
        gs.DragDelta += (o, i) =>
        {
            var grid = (Grid)gs.Parent;
            var previous = (YourControl)((grid.Children[column - 1]));
            var next = (YourControl)(grid.Children[column + 1]);

            if (next.MinWidth >= (next.ActualWidth - i.HorizontalChange))
            {
                return;
            }

            if (previous.MinWidth >= (previous.ActualWidth + i.HorizontalChange))
            {
                return;
            }

            previous.Width = previous.ActualWidth + i.HorizontalChange;
            next.Width = next.ActualWidth - i.HorizontalChange;
        };

        return gs;
    } 
```

# reference - 你能创建 Typescript 包吗？像 c# dll

> ID：15664032
> 
> 赞同：4
> 
> 时间：2013-03-27T16:24:35.193
> 
> 标签：reference, typescript

目前是否有任何打包打字稿文件的概念？

在尝试将纯 javascript 项目迁移到 typescript 时，我发现一件痛苦的事情是引用，在某些情况下，我有复杂的对象，我不得不编写几个引用语句从各地提取文件。

这部分取决于我的项目布局，因为它是一个非常大且模块化的布局，所以我有一个这样的系统：

```
- modules
  |- module1
     |- models
     |- services
     |- controllers
  |- module2
     |- models
     |- services
     |- controllers
  |- core
     |- models
     |- services
        |- data
        |- validation 
```

还有更多，但你明白了，现在每个模块都使用核心，但是使用 javascript 我只希望它在运行时加载，这仍然需要发生，但是因为打字稿问题只是在编译时间我想知道是否有将所有打字稿文件打包到某个打字稿库或其他东西的概念，然后可以从项目中引用，而不是让 module1 模型引用核心模型等。

问题目前围绕目录结构展开，因为命名空间工作正常，但如果我移动一个文件，我需要转到引用该移动文件的每个文件并更新它。这很烦人，而如果有某种包的想法，那么我可以在它的输出时引用它，所以我不再担心文件系统和目录，我只担心包和命名空间。

我认为这与 C# 的工作方式非常相似，你有一个有引用的项目。然后该项目中的每个文件都可以使用引用中的任何类，因此代码公开由引用和命名空间管理。

我正在考虑让我的构建脚本只创建一个本地 references.ts 文件，然后循环遍历相关模块中的每个 *.ts 文件并将它们放入一个大文件中：

```
///<reference path="core/models/some-model.ts"/>
///<reference path="core/models/some-model-2.ts"/>
///<reference path="core/services/some-service.ts"/> 
```

如上所示，然后在所有需要核心文件的打字稿文件中使用这个参考文件，所以这作为一种项目级别的参考，这可能意味着一些文件有他们不需要的参考，但它的编译时间所以我真的不在乎。 ..

如果已经存在好的方法，我不想手动解决这个问题，希望这是有道理的......

== 编辑 ==

我只是想把这个贴在这里，因为我的场景节省了我大量的时间，也减少了我的参考资料 99%，但这不适用于没有构建脚本的人。

现在假设您确实有一个构建脚本，我采取了在我的脚本中执行一个步骤的路径，该步骤遍历根级目录中的每个文件（在本例中为模块 1、模块 2 等），然后它会输出一个 local.references。 ts 到该目录中的引用文件夹中。然后我手动编写了一个 external.references.ts，它在需要的地方引用外部描述符或其他模块引用。

这部分完成后，当我编译我的打字稿时，我基本上将它再次指向根目录并告诉它将它们全部编译（* */* .ts）成一个大的 js 文件（即 module1.js）。现在因为这将自动包含本地和外部引用，所以我不需要在各个类中放置任何引用声明。

因此，通过这种方式提供本地和外部参考文件（local.reference.ts、external.reference.ts）包含在文件的批量处理中，您只需担心命名空间，使其与 C# 的方式几乎相同操作。

但是，如果您没有能够进行本地参考生成和打字稿编译的构建脚本，那么给出的评论链接将是一个不错的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:13:17.403

目前没有正式的流程可以将您的源打字稿文件打包为您所描述的预构建库。

目前使用了几种不同的解决方案，就像评论中链接的那样，它允许您将所有引用放入中央打字稿文件中，然后只需从您的各个脚本中引用它们，或者您提出的方法进行相同排序的方法，而不是手动编写它，而是让您的构建脚本为您生成引用并让编译过程将引用注入而不是在每个文件中显式引用它们。

随着 Typescript 变得越来越成熟，可能会有更正式的方法来执行此操作，但目前只要考虑到您的工具和使用 Typescript 开发的方法，选择最有效的解决方案即可。

# ios - 如何在 iPhone 上本地存储 openstreetmap 数据

> ID：15664033
> 
> 赞同：6
> 
> 时间：2013-03-27T16:24:39.620
> 
> 标签：ios, ios6, openstreetmap

我正在为大学做一个项目，其中一部分我遇到了很大的困难。

简而言之，我希望做以下 5 件事：

1.  下载我所在城市的开放街道地图数据

2.  将该数据本地存储在手机的硬盘上。

3.  在我的 iOS 应用程序中以地图的形式查看该数据

4.  在地图上放置标记。

5.  沿着这些路径之间的道路绘制路径。

我已经在这个项目的这个特定部分上工作了好几个星期，但我一无所获。我什至无法弄清楚如何在手机上存储地图，更不用说查看地图数据了。我尝试使用“Route-Me”库，但无法使其正常工作（尽管它似乎是使用 openstreetmap 数据的最佳库之一，所以我正在学习如何使用它）。我觉得该死的被打败了。

如果有人完成了我正在尝试做的任何任务，请您将我链接到您使用过的教程/指南/视频。

我不是在找人给我代码或为我做工作，我想学习如何做到这一点，但如果有人能指出我可以学习的正确网站方向，我将非常感激。

任何建议或反馈将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T01:57:58.993

这就是我最终解决问题的方法。

由于 Tilemill 本身不读取`.osm/.o5m/.pbf`文件，因此我使用 Osmosis 将`.osm`文件转换为`.shp`文件。

然后我在 Tilemill 中创建了一个新项目，并将`.shp`我想要的特定文件作为图层添加到新项目中。需要进行一些修改才能使地图看起来像您想要的那样，但它与 css 非常相似，并且在您使用时很容易拿起。

一旦我的地图看起来像我想要的那样，我就把它导出为一个`.mbtiles`文件。这需要很长时间才能制作，并且文件可能非常大，具体取决于图块的详细程度。我做了一张爱尔兰地图，缩放级别在 7 到 14 之间，我做了一张都柏林城市的地图，缩放级别在 11 到 17 之间。尽管仅都柏林市的地图上的图块要少得多，但它们的大小都约为 200MB。

然后我在网上找到了这个教程，它解释了如何`.mbtiles`在你的应用程序中存储文件以及如何阅读它： [http ://martinsikora.com/creating-mbtiles-db-for-ios-mapbox-from-hi-res-map-图片](http://martinsikora.com/creating-mbtiles-db-for-ios-mapbox-from-hi-res-map-image)

以下是我发现有用的其他一些链接：

[http://www.kindle-maps.com/blog/using-tilemill-with-openstreetmap-data.html](http://www.kindle-maps.com/blog/using-tilemill-with-openstreetmap-data.html)

[http://mapbox.com/developers/mbtiles/](http://mapbox.com/developers/mbtiles/)

[http://mapbox.com/mapbox-ios-sdk/api/](http://mapbox.com/mapbox-ios-sdk/api/)

[http://mapbox.com/developers/api/#static_api](http://mapbox.com/developers/api/#static_api)

[http://support.mapbox.com/discussions](http://support.mapbox.com/discussions)

我希望这对某人有用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T08:25:56.377

我建议尝试[MapBox iOS SDK](http://mapbox.com/mobile/)。它实际上是从 Route-Me 库中派生出来的，可以让你完成清单上的所有事情。

需要记住的一个关键点是，在下载 OSM 数据并将其存储在 iOS 设备本地之间还有一个步骤，即生成地图图块并将它们存储在某种数据库中。

[这](https://github.com/mapbox/mapbox-ios-example)是一个使用 MapBox SDK 的示例 iOS 应用程序，它具有在线和离线地图源，是一个很好的起点。

# sqlite - 通过索引更快地访问数据库

> ID：15664034
> 
> 赞同：0
> 
> 时间：2013-03-27T16:24:50.427
> 
> 标签：sqlite, xamarin.android

我有这个代码

```
using (var contents = connection.CreateCommand())
{
    contents.CommandText = "SELECT [subject],[note] FROM tasks";
    var r = contents.ExecuteReader();
    int zaehler = 0;
    int zielzahl = 5;
    while (r.Read())
    {
        if (zaehler == zielzahl)
        {
            //access r["subject"].ToString()
        }
        zaehler++;
    }
} 
```

我想通过像 r[zielzahl] 一样直接访问 zielzahl 而不是遍历所有条目来使其更快。但

```
r[zielzahl]["subject"] 
```

不起作用

```
r["subject"][zielzahl] 
```

如何访问结果编号*zielzahl的列**主题*？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:32:00.480

要仅获取第六条记录，请使用[`OFFSET`子句](http://www.sqlite.org/lang_select.html#orderby)：

```
SELECT subject, note
FROM tasks
LIMIT 1 OFFSET 5 
```

`ORDER BY`请注意，除非您使用该子句，否则无法保证返回记录的顺序。*

# javascript - Webkit 在 WinCE 上崩溃

> ID：15664037
> 
> 赞同：2
> 
> 时间：2013-03-27T16:25:00.810
> 
> 标签：javascript, c, webkit, windows-ce

我正在为 WinCE 6 (ARM) 开发 Webkit 端口，并且遇到了 Javascript 问题。

*   代码库：[https ://github.com/masali-hp/webkit](https://github.com/masali-hp/webkit)
*   Javascript 引擎：JavascriptCore

我正在使用 Masali 的代码库。加载包含 jQuery 的页面时，应用程序崩溃（无法获得完整的崩溃日志），并且已将问题跟踪到代码命中与 JIT 和 ctiTrampoline 相关的部分时。

在 JITCode.h 中的解码调用中，它在未检测的代码中出现异常，并且以下错误代码从 OS 0xDFFF0123 中吐出。

# c - gcc __builtin_expect 似乎没有生成正确的代码

> ID：15664043
> 
> 赞同：1
> 
> 时间：2013-03-27T16:25:16.603
> 
> 标签：c, optimization, gcc, built-in

以下两个代码片段生成完全相同的汇编代码，即使分支包含不同的分支预测。

假设我们有**test0.c**

```
#define likely(x)       __builtin_expect((x), 1)
#define unlikely(x)     __builtin_expect((x), 0)

int bar0();
int bar1();
int bar2();
int bar3();

int foo(int arg0) {
  if (likely(arg0 > 100)) {
    return bar0();
  } else if (likely(arg0 < -100)) {
    return bar1();
  } else if (likely(arg0 > 0)) {
    return bar2();
  } else {
    return bar3();
  }
} 
```

和**test1.c**

```
#define likely(x)       __builtin_expect((x), 1)
#define unlikely(x)     __builtin_expect((x), 0)

int bar0();
int bar1();
int bar2();
int bar3();

int foo(int arg0) {
  if (unlikely(arg0 > 100)) {
    return bar0();
  } else if (unlikely(arg0 < -100)) {
    return bar1();
  } else if (unlikely(arg0 > 0)) {
    return bar2();
  } else {
    return bar3();
  }
} 
```

正如您通过比较两个片段所看到的那样，这两个片段对每个分支都有不同的分支预测（likely() vs. notible()）。

但是，当它是从 linux 机器（ubuntu 12.04 32bit，gcc 4.6.3）编译时。这两个来源产生几乎相同的输出。

```
$gcc  -c -S -o test0.s test0.c
$gcc  -c -S -o test1.s test1.c
$ diff test0.s test1.s
1c1
<   .file   "test0.c"
---
>   .file   "test1.c" 
```

如果有人能解释这一点，那将是一个很大的帮助。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:42:42.437

您发布的两个文件是相同的——我认为这不是您真正所做的。

编译为`-O2`或更高，需要开启优化。这应该会生成不同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-02T12:31:35.280

我在 ARM7 (Allwinner sun71 A20) 和 gcc 6.3 (-O3) 上进行了一些测量，#likely 和 #unlikely 之间没有性能差异，尽管从其他测试中很明显，采用分支比不采用更昂贵它，即使在完美的分支预测的情况下。

# android - 在不同手机上安装的同一应用程序之间传递信息的最简单方法

> ID：15664049
> 
> 赞同：0
> 
> 时间：2013-03-27T16:25:35.750
> 
> 标签：android, push-notification

正如主题名称所暗示的那样，我正在寻找的是添加我的 android 应用程序以将数据发送到运行相同应用程序的不同手机的选项，以便接收手机将相应地处理它。

对我来说显而易见的选择是使用应用程序引擎并使用电话号码作为标识符的推送通知。

是否存在更简单的解决方案？

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:32:18.723

最好和最强大的解决方案是拥有类似于您的消息传递客户端的东西，其中设备 A 将数据发送到服务器，服务器将其推送到设备 B。设备 B 向服务器发送回复，服务器将其推送到设备 A。

此过程的优势在于无需用户保持连接即可重试发送，如果 A 发送消息时设备 B 处于脱机状态，则可能需要此过程。

一个不太简单的解决方案是让服务器充当中间人，并获取每个设备的 IP 地址，然后在它们之间打开一个直接套接字。在此解决方案中，您将丢失任何无法通过的数据。

如果设备在同一网络或蓝牙范围内，您可以尝试蓝牙或 WiFi 直连。

# c# - Linq to Sql 超时问题

> ID：15664050
> 
> 赞同：1
> 
> 时间：2013-03-27T16:25:44.970
> 
> 标签：c#, sql-server, linq-to-sql, asp.net-web-api

我有一种使用 linq to sql 类提取用户信息的方法。该方法使用调用现有存储过程的 linq 语句执行三个查询。这是我如何布置 linq 语句的示例。

```
 using (var db = new TestDataContext(connection)))
            {
                var user = db.proc_UserInfo(userId);

                foreach (var x in user)
                {
                    string FullName = x.FirstName + " " + x.LastName;
                    string Address = x.Addr1;
                    string City = x.City;                        
                }
            } 
```

这个方法是通过一个从 jquery ajax 请求触发的 web api 控制器调用的。它工作得很好，但是当我通过匆忙更改下拉列表中的用户进行 ajax 请求时，我注意到如果我能足够快地做到这一点，似乎去数据库的一批查询被取消并且调用暂停几分钟，下一个查询超时并返回空对象。需要注意的一点是，这些查询并没有返回几行数据。我仍在试图弄清楚发生了什么，并对建议持开放态度。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:45:32.340

首先，我认为人们可能需要更多信息。我假设的数据库类型是 SQL Server，但您还没有列出一个版本。无论如何，它可能是一些事情。请记住，AJAX 调用作为 http 请求/发布运行，因此可能存在 IIS 超时或其他各种 IIS 限制。此外，您的调用是否异步等。Jquery 有一些您可能想要验证的设置。表锁定是 SQL Server 也是一种可能。还要检查您的浏览器 ram / w3wp 使用情况，以确保它没有耗尽资源。

首先我建议运行 SQL Profiler 来验证发生了什么，然后检查这些查询的执行计划。如果存在大量数据，您可能需要一些索引。

# ios - UIDocumentInteractionController 在 iBooks 中打开 pdf 崩溃

> ID：15664058
> 
> 赞同：2
> 
> 时间：2013-03-27T16:26:04.313
> 
> 标签：ios, objective-c, cocoa-touch, ibooks, uidocumentinteraction

我有一个测试 PDF 文件，我想通过我的应用在 iBooks 中打开它。我将它保存在我的临时目录中，并使用此代码将其加载到 iBooks：

```
NSURL *targetURL = [NSURL fileURLWithPath:tempFullPath];
NSLog(@"Path is %@", tempFullPath);
UIDocumentInteractionController *controller = [UIDocumentInteractionController interactionControllerWithURL:targetURL];
controller.delegate = self;
controller.UTI = @"com.adobe.pdf";

[controller presentOpenInMenuFromRect:self.view.bounds inView:self.view animated:YES]; 
```

菜单弹出得很好，但是当我点击 iBooks 按钮时，应用程序崩溃并挂起我的 Xcode。

我在 NSLog 输出中得到的文件的路径是这样的：

```
Path is /private/var/mobile/Applications/65EC4182-A79B-431C-9E74-BD72D91A31AB/tmp/TestFile.pdf 
```

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T16:41:34.577

使用 a`UIDocumentInteractionController`要求您保留一个参考，直到它完成。这意味着您应该使用实例变量，而不是局部变量。实现正确的委托方法，以便在完成控制器后重置 ivar。

启用僵尸将有助于调试此类问题。您很可能会看到一条消息正在发送到已释放的对象（您的控制器）。

# java - 添加组件时JScrollPane触发奇怪的AdjustmentEvent

> ID：15664059
> 
> 赞同：0
> 
> 时间：2013-03-27T16:26:08.063
> 
> 标签：java, swing, jscrollpane

我正在使用 a`JScrollPane`和 a `BoxLayout`（a `Box`，尽管我也尝试过 a `GridLayout`），它显示了一个分页元素列表，每个页面有 5 个元素，每个元素有 5 个可视组件。实现元素的数据是从 Web 服务中检索的，在每次页面更改时加载，删除列表中的当前元素并添加新元素（我知道这可以优化，但这就是我现在所拥有的）。

这里奇怪的是，无论是在加载时还是在更改页面时，垂直滚动条都会移动到中间的某个位置，而不是顶部，不是底部，也不是确切的中心。添加组件后，我尝试以编程方式将其向上移动，但是在数据表示方法完成后，滚动又被放置在该位置。然后，我可以正常使用滚动条，直到下一页更改。

实际上，我已经附加了一个`AdjustmentListener`，`JScrollBar`并且我可以计数 25 次（5 * 5，duh！）`AdjustmentEvent`触发将滚动条移动到该位置的事件 - 是的，如果我添加更少的组件，则触发事件的次数更少.

在移动滚动条之前，我尝试在窗口上调用`revalidate()`和`repaint()`，但似乎没有任何效果，每个添加的组件它都会移动到该特定位置一次。

有任何想法吗？很抱歉没有发布一些代码，但它有点乱，很难提取可能导致问题的基本部分。

非常感谢。

**更新**

*回应@kleopatra*，我将尝试编写一些类似于我正在做的代码，尽管也许我正在跳过*一些*导致奇怪行为的东西。

 *```
public class MyUI extends JPanel {

    List<Data> data;
    JPanel dataItemsPanel;
    JScrollPane scrollPane;

    // ...

    /**
     * Method to build the UI.
     */
    void createUI() {

        this.setLayout(new BorderLayout());

        // ...

        JPanel left = new JPanel();
        JPanel right = new JPanel(new BorderLayout());

        // ...

        dataItemsPanel = new JPanel(new GridLayout(0, 1));
        // this is the scroll pane that behaves weird
        scrollPane = new JScrollPane(dataItemsPanel);

        //...

        right.add(scrollPane, BorderLayout.CENTER);
        JSplitPane splitPane = new JSplitPane(JSPlitPane.HORIZONTAL_SPLIT,
            left, right);
        splitPane.setResizeWeight(0);
        splitPane.setOneTouchExpandable(true);
        splitPane.setContinuousLayout(true);
        this.add(splitPane, BorderLayout.CENTER);

        // ...

        loadPage(0);

    }

    /**
     * Method to load a data page. Called when the program starts (to load
     * the first page) and whenever the data page is changed.
     */
    void loadPage(int page) {

        data = retrievePageDataFromWebService(page);

        // remove previous data
        dataItemsPanel.removeAll();
        // add new data
        for (Data d : data) {
            // build complex data item representation
            JPanel description = new JPanel(new FlowLayout(FlowLayout.LEFT));
            description.add(new JEditorPane(/*...*/));

            JPanel options = new JPanel(new FlowLayout(FlowLayout.LEFT));
            options.add(new JButton(/*...*/));
            options.add(new JButton(/*...*/));

            JPanel leftDataPanel = new JPanel(new BorderLayout());
            leftDataPanel.add(new JEditorPane(/*...*/));

            JPanel rightDataPanel = new JPanel(new BorderLayout());
            rightDataPanel.add(new JEditorPane(/*...*/));
            rightDataPanel.add(options, BorderLayout.CENTER);

            JPanel data = new JPanel(new GridLayout(1, 2));
            data.add(leftDataPanel);
            data.add(rightDataPanel);

            JPanel dataItemContainer = new JPanel(new BorderLayout());
            dataItemContainer.add(description, BorderLayout.NORTH);
            dataItemContainer.add(data, BorderLayout.CENTER);

            // finally add it to the data panel
            dataItemsPanel.add(dataItemContainer);

        }

        /*
        After this method finishes, an AdjustmentEvent is called once per
        added component (25 times). Trying to set the scroll bar position
        at this point has no effect, as the events are triggered after the
        method. I have tried to call revalidate() and repaint() here and
        then move the scroll bar but the result is the same.
         */
    }
} 
```*

# css - 如何在 Chrome 中调试 LESS？

> ID：15664064
> 
> 赞同：11
> 
> 时间：2013-03-27T16:26:21.153
> 
> 标签：css, debugging, google-chrome, less, source-maps

从一年前开始，LESS 调试似乎已经取得了长足的进步，我想知道有多少人有使用 Chrome/Canary 中的开发人员工具进行调试的经验。

我试图确保在调试文件时，元素的 CSS 显示为 LESS 文件，而不是 CSS 文件。当我需要知道 LESS 文件的必要行号时，显示 CSS 行号没什么用。我可以在 firefox 中使用 firebug 和 fireless 执行此操作，但它不适用于 chrome

我尝试按照[此处](http://robdodson.me/blog/2012/12/28/debug-less-with-chrome-developer-tools/)的步骤操作，但是即使在仔细按照说明操作后，它似乎也无法正常运行。

我正在运行 OSX，通过 node.js 安装了 LESS，并且正在使用 ST2 插件 Less2CSS 来处理保存时的 less 文件。使用该命令`lessc --line-numbers=mediaquery style.less style.css`按预期工作并将其写入我的 css 文件的顶部`@media -sass-debug-info{filename{font-family:file\:\/\/\/Applications\/XAMPP\/xamppfiles\/htdocs\/sandbox\/lessDebug\/style\.less}line{font-family:\000035}}`，但是在检查元素时，它仍然只捕获 CSS 文件，而不是 LESS 文件。

我打开了必要的 Chrome 首选项（支持 SASS 和启用源地图）

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-12T11:32:54.127

这现在可以与 less.js 1.5b4 和 Chrome 30.0.1599.69 完美配合

基本上，您需要确保 lessc 在您的 css 文件末尾生成有效的源映射 url：

```
/*# sourceMappingURL=/templates/lwks/css/template.css.map */ 
```

并且浏览器正在加载**.css.map文件。**如果由于某种原因这仍然不适合您，请检查 chrome://flags **Enable Developer Tools Experiment**是否已开启

![在此处输入图像描述](../Images/6d61d83e14e72d450631c87c0e9638e7.png)

更多细节在这里：[https ://github.com/less/less.js/issues/1050](https://github.com/less/less.js/issues/1050)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T15:47:01.653

博客文章作者在这里...我已经返回并更新了我的帖子，因此它现在可以与常规 Chrome 26 一起使用。刚刚签入 Canary，**它似乎不再工作了**。所以 Chrome 24 - 26 很好，但 Canary 被破坏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:50:39.600

我认为你提到的问题不相关。

据我了解，您在服务器端编译 LESS 文件，您要做的就是检索新的 css 文件而不是缓存的文件？我对吗？

你试过[在谷歌浏览器上禁用缓存](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)吗？

# javascript - 创建在 IE 中工作的文件上传

> ID：15664069
> 
> 赞同：15
> 
> 时间：2013-03-27T16:26:31.517
> 
> 标签：javascript, ajax, html, file-upload

我想编写一个在 IE 中工作的文件上传脚本，但是我正在编写的两种类型的代码在 IE 中存在问题。

请帮忙。如何编写在 IE 中工作的文件上传脚本？

**Type 1**
Problem Not Support File Api In IE（不使用的诀窍是什么？）

```
 <!DOCTYPE html>

<html>
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.6.2.js" type="text/javascript"></script>
    <script type="text/javascript">
        function updateSize() {
            var nBytes = 0;
            var nFiles=0;
            oFiles = document.getElementById("uploadInput").files;
            nFiles = oFiles.length;
            for (var nFileId = 0; nFileId < nFiles; nFileId++) {
                nBytes += oFiles[nFileId].size;
            }
            var sOutput = nBytes + " bytes";
            // optional code for multiples approximation
            for (var aMultiples = ["KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"], nMultiple = 0, nApprox = nBytes / 1024; nApprox > 1; nApprox /= 1024, nMultiple++) {
                sOutput = nApprox.toFixed(3) + " " + aMultiples[nMultiple] + " (" + nBytes + " bytes)";
            }
            document.getElementById("fileNum").innerHTML = nFiles;
            document.getElementById("fileSize").innerHTML = sOutput;
        }
        // end of optional code
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <p><input id="uploadInput" type="file" name="myFiles" onchange="updateSize();" multiple /> selected files: <span id="fileNum">0</span>; total size: <span id="fileSize">0</span></p>
<p><input type="submit" value="Send file"></p>
    </form>
</body>
</html> 
```

**类型 2**
问题不支持 document.getElementById('fileToUpload') **.files[0]**（不是获取文件 [0] 的诀窍吗？）

```
 <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <script type="text/javascript">
        function fileSelected() {
            var file = document.getElementById('fileToUpload').files[0];
            if (file) {
                var fileSize = 0;
                if (file.size > 1024 * 1024)
                    fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
                else
                    fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

                document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
                document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
                document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
            }
        }

        function uploadFile() {
            var fd = new FormData();
            fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
            var xhr = new XMLHttpRequest();
            xhr.upload.addEventListener("progress", uploadProgress, false);
            xhr.addEventListener("load", uploadComplete, false);
            xhr.addEventListener("error", uploadFailed, false);
            xhr.addEventListener("abort", uploadCanceled, false);
            $.post("UploadHandler.ashx");
            //xhr.open("POST", "UploadHandler.ashx");
            xhr.send(fd);
        }

        function uploadProgress(evt) {
            if (evt.lengthComputable) {
                var percentComplete = Math.round(evt.loaded * 100 / evt.total);
                document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
                document.getElementById('prog').value = percentComplete;
            }
            else {
                document.getElementById('progressNumber').innerHTML = 'unable to compute';
            }
        }

        function uploadComplete(evt) {
            /* This event is raised when the server send back a response */
            alert(evt.target.responseText);
        }

        function uploadFailed(evt) {
            alert("There was an error attempting to upload the file.");
        }

        function uploadCanceled(evt) {
            alert("The upload has been canceled by the user or the browser dropped the connection.");
        }
    </script>

</head>
<body>
    <form id="form1">
    <div>
        <label for="fileToUpload">
            Select a File to Upload</label>
        <input type="file" name="fileToUpload[]" id="fileToUpload" onchange="fileSelected();" />
    </div>
    <div id="fileName">
    </div>
    <div id="fileSize">
    </div>
    <div id="fileType">
    </div>
    <div>
        <input type="button" onclick="uploadFile()" value="Upload" />
    </div>
    <div id="progressNumber">
    </div>
    <progress id="prog" value="0" max="100.0"></progress>
    </form>
</body> 
```

请帮忙 ：（

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-27T17:52:20.267

除非您使用的是 IE10 或其他现代浏览器，否则您无法使用这些功能。早期版本的 Internet Explorer（和其他浏览器）可以使用变通方法，但您也需要调整后端代码。

### 为什么它不起作用

直到版本 10 的 Internet Explorer 不支持其中的许多功能，关键是[FormData](http://caniuse.com/#search=formdata)和[FileReader](http://caniuse.com/#feat=filereader) API。您的两个代码片段都依赖于`FileReader`API，第二个也依赖于`FormData`动态上传文件。

### 如何判断是否执行代码

我最近编写了一个文件上传小部件，它检测到这些功能并根据支持提供不同的代码。我使用了[Modernizr](http://modernizr.com/)的功能检测，因为它的测试经常由开源社区进行测试：

```
var support  = {
  // Are files exposed to JS?
  // As used by Modernizr @
  // https://github.com/Modernizr/Modernizr/blob/master/feature-detects/file/api.js
  'fileReader'  : (function testFileReader(){
    // Test: look for global file class.
    return !!(window.File && window.FileList && window.FileReader);
  }()),

  // AJAX file upload via formData?
  'formData'    : window.FormData !== void 0
}; 
```

对于您的`fileSelected`功能，您需要`support.fileReader`评估`true`; 因为`uploadFile`，你需要`support.formData`。

### 不支持这些功能的浏览器的解决方法

如果没有这些功能，就不可能从前端读取文件或使用 AJAX 发送文件。但是，您可以做的是通过隐藏`<iframe/>`在当前页面中的方式发送文件，`UploadHandler.ashx`并对非 XHR 请求做出不同的响应。

这个解决方案在技术上是同步的（只是发生在另一个隐藏的页面中），所以你不会得到更新——唯一的反馈是上传完成并且服务器已经响应。因此，只有在用户完全上传文件后，您才能通知用户文件名、大小和成功 - 这可能需要一段时间！

无论如何，它的 HTML 如下所示：

```
<form 
  id="form1" 
  runat="server" 
  action="UploadHandler.ashx"
  target="fileIframe">
  <iframe 
    name="fileIframe"
    style="display:none"
    onload="parseIframeResponse"
    tabindex="-1">
  </iframe>
  <p>
    <input id="uploadInput" type="file" name="myFiles" onchange="updateSize();" multiple />
    selected files: 
    <span id="fileNum">
      0
    </span>
    ; total size: 
    <span id="fileSize">
      0
    </span>
  </p>
  <p>
    <input type="submit" value="Send file">
  </p>
</form> 
```

一些变化：

1.  表单现在有一个`target`，这意味着当它将其内容发布到 URI 中时`action`，它将在那里加载响应，而不是在当前页面上。
2.  目标是`name`对我们包含的 iframe 的引用。它用 隐藏`display:none`，并给出一个否定值`tabindex`，以确保用户不会偶然发现它。它还具有`onload`指定的属性。这是在旧版本的 IE 中将函数绑定到 load 事件的唯一方法。

所以当表单提交时，我们停留在当前页面，服务器响应加载到我们隐藏的 iframe 中。发生这种情况时，浏览器将执行该`onload`属性中命名的函数。可悲的是，这意味着函数需要在全局范围内！

### 后端的东西

我不知道你的后端是如何工作的，但是如果 iframe 是加载响应而不是下载它，它需要是 HTML 或纯文本（并且需要在 mime 类型中指定）。您可以通过查找标头来判断表单是否从后端通过 AJAX 发布，该`X-Requested-With`标头的值应为`XMLHttpRequest`- 如果不存在，则 iframe 正在请求响应，您需要发送文本或HTML。您可能想要对 JSON 响应进行字符串化，该响应公开您想要反馈给用户的值，例如`fileName`, `fileSize`& `fileType`。我希望你可以自己做这件事，或者让一个同事来处理它。

### 捕获 iframe 响应

如前所述，响应处理函数需要在全局范围内`onload`才能绑定到属性，因为旧的 IE 非常古怪。我看到你正在使用 jQuery，所以如果你沿着字符串化服务器响应的路线走，你可以这样编写这个函数：

```
function parseIframeResponse(){
  var response = $('#fileIframe').contents().find('body').text();
  var object   = $.parseJSON(response);
} 
```

> **iframe`load`事件绑定的问题**
> 
> 如前所述，iframe 加载事件需要内联绑定为 iframe 本身的属性——这是因为 IE 将无法注册它，否则。但这本身就是有问题的，因为即使是空的 iframe（空的或不存在的`src`将默认为`about:blank`）也会触发加载事件。为了缓解这种情况，您需要丢弃任何`response`评估为空字符串作为误报的内容，并确保您的后端即使遇到错误也会响应某些内容。

大概，然后您会想要使用其中的任何信息来执行您当前在 functions , 等中获得的一些`fileSelected`代码`uploadProgress`。

希望这可以帮助。

### 编辑 1：开箱即用的解决方案

事后看来，尽管在开发了我自己的问题解决方案的背景下写了这篇文章，但它可能被认为是疏忽，更不用说[Fine Uploader](http://fineuploader.com/)了，这是一个经过大量测试（[超过 700 个已关闭问题！](https://github.com/Widen/fine-uploader/issues?page=1&state=closed)）且维护良好的独立插件，旨在为 IE7 及更高版本实现最佳文件上传体验。还有[一个很好的后端服务器组件选择](https://github.com/Widen/fine-uploader-server/tree/master/)——包括 ASP.NET——来解析上传。您可能会发现调整它比自己滚动更容易！

### 编辑 2：忽略提及 iframe`load`事件的问题。修改后的答案到位。

# c# - 如何在其他类中使用方法？

> ID：15664076
> 
> 赞同：2
> 
> 时间：2013-03-27T16:26:53.147
> 
> 标签：c#, wpf, methods, code-reuse

我有一个方法，我想在同一个 c# 项目中的几乎所有类中使用它。

```
public void Log(String line)
{
   var file = System.IO.Path.GetPathRoot(Environment.SystemDirectory)+ "Logs.txt";

   StreamWriter logfile = new StreamWriter(file, true);

   // Write to the file:
   logfile.WriteLine(DateTime.Now);
   logfile.WriteLine(line);
   logfile.WriteLine();

   // Close the stream:
   logfile.Close();
} 
```

在项目的其他类中重用此方法的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:27:40.447

如果你想在**所有**类中使用它，那么就让它`static`.

你可以有一`static` `LogHelper`堂课来更好地组织它，比如：

```
public static class LogHelper
{
    public static void Log(String line)
    {
        var file = System.IO.Path.GetPathRoot(Environment.SystemDirectory)+ "Logs.txt";

        StreamWriter logfile = new StreamWriter(file, true);

        // Write to the file:
        logfile.WriteLine(DateTime.Now);
        logfile.WriteLine(line);
        logfile.WriteLine();

        // Close the stream:
        logfile.Close();
    }
} 
```

然后通过做调用它`LogHelper.Log(line)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T16:27:54.127

您可以创建一个静态类并将此函数放在该类中。

```
public static MyStaticClass
{
    public static void Log(String line)
    {
        // your code
    }
} 
```

现在你可以在别处调用它。（不需要实例化，因为它是一个静态类）

```
MyStaticClass.Log("somestring"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:30:50.623

您可以`Extrension method`在统计类中使用

字符串扩展示例

```
public static class MyExtensions
    {
        public static int YourMethod(this String str)
        {
        }
    } 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/bb383977.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/bb383977.aspx)

# ruby-on-rails - 在 Rails 3 中的何处以及如何放置模型查询方法？

> ID：15664077
> 
> 赞同：2
> 
> 时间：2013-03-27T16:26:57.507
> 
> 标签：ruby-on-rails, model, controller, where

我正在寻找一种优雅的方式来进行模型方法调用。这是我的查询：

```
where("order_id = ?", argument).first 
```

由于 first() 方法链接在 where() 方法之后，我无法在范围内使用此查询。

所以我尝试创建以下类方法：

```
 def self.find_order(value)
    where("order_id = ?", value).first
  end 
```

当我在控制器操作中使用此方法两次时，我从 IDE 收到警告，我应该将此查询移动到范围中。当我在开始时重命名没有“find”的方法时，我的控制器中也会收到警告，除了 find() 或 new() 之外，我不应该调用多个方法（我有另一个模型方法在此调用控制器动作）。我知道，这不是一个真正的问题，因为它可以工作，但我对编写漂亮而枯燥的代码很感兴趣。我希望这不是一个烦人的问题，我应该公平地说我对编程比较陌生。提前致谢！

# sql-server - SQL Server 2012 开发人员默认实例不起作用

> ID：15664085
> 
> 赞同：2
> 
> 时间：2013-03-27T16:27:26.313
> 
> 标签：sql-server, sql-server-2012, sql-server-2012-express

我刚刚安装了带有默认 MSSQLSERVER 实例的 SQL Server 2012 开发人员版。

我面临的问题是，当我启动 Management Studio 并使用服务器名称进行连接时`(LocalDb)\v11.0`- 它运行良好，但是当我尝试`MSSQLSERVER`输入服务器名称时，它会出现与网络相关或特定于实例的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:53:39.967

服务器上的**默认实例**始终可以使用

*   `.`
*   `(local)`
*   机器名称，例如`YOURPC`

*连接到 SQL Server Management Studio 时，在“服务器名称”*字段中输入其中任何一项（或在连接字符串的`server=`或`data source=`元素中使用这三项中的任何一项）。

但它绝对**无法**使用`MSSQLSERVER`...

我不知道你从哪里得到的——但这不起作用——**不适**用于我知道的任何版本的 SQL Server。

`MSSQLSERVER`是您计算机上的 SQL Server **Windows 服务**的名称，是的 - 但它**不能**用作实例名称来连接！

# jquery-ui - jQuery UI 可排序：容差“相交”不能按预期工作（错误 #8342）

> ID：15664090
> 
> 赞同：1
> 
> 时间：2013-03-27T16:27:42.453
> 
> 标签：jquery-ui, jquery-ui-sortable

9 天前（在撰写本文时）以下错误已重新打开： [可排序：可排序选项容差的错误行为（或错误文档）：“相交”](http://bugs.jqueryui.com/ticket/8342)

不幸的是，我等不及 jQuery 来解决这个问题。

我有一个容器，其中包含可以垂直排序的项目（所有`<div>`s）。这些项目具有不同的高度（并且这些高度都不是预定义的）。

有没有合适的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:27:42.453

我自己写了一个解决方法，灵感来自[dioslaska](https://stackoverflow.com/users/480191/dioslaska)对他自己的问题的解决方案： [jQuery UI sortable tolerance option not working as expected](https://stackoverflow.com/a/10699339/1237411)

它工作得非常顺利:)

删除该`tolerance`选项并使用以下函数作为`sort`选项：

```
function( e, ui ) {
    var container   = $( this ),
        placeholder = container.children( '.ui-sortable-placeholder:first' );

    var helpHeight  = ui.helper.outerHeight(),
        helpTop     = ui.position.top,
        helpBottom  = helpTop + helpHeight;

    container.children().each( function () {
        var item = $( this );

        if( !item.hasClass( 'ui-sortable-helper' ) && !item.hasClass( 'ui-sortable-placeholder' )) {
            var itemHeight = item.outerHeight(),
                itemTop    = item.position().top,
                itemBottom = itemTop + itemHeight;

            if(( helpTop > itemTop ) && ( helpTop < itemBottom )) {
                var tolerance = Math.min( helpHeight, itemHeight ) / 2,
                    distance  = helpTop - itemTop;

                if( distance < tolerance ) {
                    placeholder.insertBefore( item );
                    container.sortable( 'refreshPositions' );
                    return false;
                }

            } else if(( helpBottom < itemBottom ) && ( helpBottom > itemTop )) {
                var tolerance = Math.min( helpHeight, itemHeight ) / 2,
                    distance  = itemBottom - helpBottom;

                if( distance < tolerance ) {
                    placeholder.insertAfter( item );
                    container.sortable( 'refreshPositions' );
                    return false;
                }
            }
        }
    });
} 
```

# ios - MKUserTrackingModeFollowWithHeading 的 iOS 6 地图问题

> ID：15664092
> 
> 赞同：4
> 
> 时间：2013-03-27T16:27:44.743
> 
> 标签：ios, iphone, mkmapview, mapkit, core-location

我正在尝试解决`MKUserTrackingModeFollowWithHeading`iOS 6 中的两个问题：

*   `MKUserTrackingModeFollowWithHeading`工作短暂，但它很紧张，几乎立即恢复`MKUserTrackingModeFollow`，尤其是在高缩放级别时。

*   该应用程序在反复更改时偶尔会崩溃`MKUserTrackingMode`：我进入`EXC_BAD_ACCESS`主线程，没有更多信息。这很难重现，但它已经反复发生。

关于可能导致这种情况的任何想法？这感觉像是一个错误，但苹果自己的“地图”应用程序没有表现出这种行为。

为了隔离问题，我创建了一个单视图应用程序，其中包含一个`MKMapView`和一个`UIToolbar`（在 .xib 中设置），我将在其中添加一个`MKUserTrackingBarButtonItem`. `UIViewController`充当`<MKMapViewDelegate>`. _ 下面是完整的实现代码：

```
#import "ViewController.h"

@implementation ViewController

@synthesize mapView, toolbar;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Add MKUserTrackingBarButtonItem to toolbar
    MKUserTrackingBarButtonItem *trackButton = [[MKUserTrackingBarButtonItem alloc] initWithMapView:self.mapView];
    [toolbar setItems:[NSArray arrayWithObjects:trackButton, nil] animated:YES];
}

- (void)mapView:(MKMapView *)mapView didChangeUserTrackingMode:(MKUserTrackingMode)mode animated:(BOOL)animated
{
    // Log MKUserTrackingMode change
    NSString *modeType = (mode == 0) ? @"None" : ((mode == 1) ? @"Follow" : @"FollowWithHeading");
    NSLog(@"MKUserTrackingMode changed to: %@", modeType);
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T19:08:12.570

这是 MapKit 中的一个[错误](http://openradar.appspot.com/13546745)。它也可以在使用 MapKit 的 Apple Maps 中观察到，例如 Find My Friends 应用程序。请注意，Apple Maps 应用程序没有使用 MapKit（至少不是同一版本），因此它不受此错误的影响。

我也确实`EXC_BAD_ACCESS`在 MapKit 中看到了零星的崩溃。事实上，与 MapKit 相关的崩溃占我应用程序崩溃的绝大部分。:(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T16:48:56.317

我还注意到 MKUserTrackingModeFollowWithHeading 工作短暂，它几乎立即更改为 MKUserTrackingModeFollow，尤其是在高缩放级别时。

我试过

```
- (void)mapView:(MKMapView *)mapView didChangeUserTrackingMode:(MKUserTrackingMode)mode animated:(BOOL)animated {
    if (mapView.userTrackingMode != MKUserTrackingModeFollowWithHeading) {
        [mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading];
    }
} 
```

但这会创建一个永久循环，因为在我更改为 MKUserTrackingModeFollowWithHeading 之后，某些内容会更改回 MKUserTrackingModeFollow。这真的很烦人，因为我不知道是什么不断将跟踪模式更改为 MKUserTrackingModeFollow。

对不起，我的回答没有用，但我在这里发布以确认问题。

# jquery - 显示和隐藏选项卡

> ID：15664094
> 
> 赞同：1
> 
> 时间：2013-03-27T16:27:47.843
> 
> 标签：jquery, css

我正在尝试让一个基本的 jQuery 选项卡解决方案正常工作。我希望仅在单击链接时才呈现选项卡。[按照这里](http://jqueryui.com/tabs/)的 jQuery 示例， 我可以让选项卡在我的 localhost 上显示没有问题，但是一旦我引入指向页面的链接，选项卡就不再呈现，而是显示底层选项卡内容。

通过 Stackoverflow，我看到建议使用 hide() 方法的答案，但我不知道：

*   如果这是这样做的方法 - 即在页面加载时创建标签然后隐藏它们？
*   我是否正确使用它？

*   是否也可以在选项卡组上有一个关闭按钮（即单击按钮，所有选项卡都会消失）？

我的 jsFiddle 在[这里](http://jsfiddle.net/cvh2013/wYKVy/)。

Javascript：

```
$("#tabs").hide();
$("#link").click(function () {
    $("#tabs").tabs();
}); 
```

HTML：

```
<a href="#" id="link">Link text</a>
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Tab 1</a></li>
            <li><a href="#tabs-2">Tab 2</a></li>
            <li><a href="#tabs-3">Tab 3</a></li>
        </ul>
        <div id="tabs-1">
            <p>Tab 1 text.</p>
        </div>
        <div id="tabs-2">
            <p>Tab 2 text.</p>
        </div>
        <div id="tabs-3">
            <p>Tab 3 text.</p>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:32:01.370

您从未实际实例化选项卡。尝试：

```
$("#tabs").tabs().hide();
$("#link").click(function () {
    $("#tabs").show();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/SukBm/)**

请注意，您还可以执行以下操作：

```
$("#tabs").hide();
$("#link").click(function () {
    $("#tabs").tabs().show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:42:23.013

# 试试这个： -

**[http://jsfiddle.net/adioo7/wYKVy/3/](http://jsfiddle.net/adiioo7/wYKVy/3/)**

# JS：-

```
jQuery(function () {

    $("#tabs").tabs();
    $("#ShowTabs").click(function () {
        $("#tabs").show();
    });

    $("#HideTabs").click(function () {
        $("#tabs").hide();
    });
}); 
```

# HTML:-

```
<a href="#" id="ShowTabs">ShowTabs</a><br/>
<a href="#" id="HideTabs">HideTabs</a>

<div id="tabs" style="display:none;">
    <ul>
        <li><a href="#tabs-1">Tab 1</a>

        </li>
        <li><a href="#tabs-2">Tab 2</a>

        </li>
        <li><a href="#tabs-3">Tab 3</a>

        </li>
    </ul>
    <div id="tabs-1">
        <p>Tab 1 text.</p>
    </div>
    <div id="tabs-2">
        <p>Tab 2 text.</p>
    </div>
    <div id="tabs-3">
        <p>Tab 3 text.</p>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:44:50.300

我会建议尝试 Tabbable nav from

[引导导航](http://twitter.github.com/bootstrap/components.html#navbar)

这会更好，更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:31:14.650

`$("tabs").show();`创建选项卡后，因为您首先将它们隐藏起来。

有关关闭选项卡的按钮，请参[见此 http://jsfiddle.net/wYKVy/2/](http://jsfiddle.net/wYKVy/2/)。

# jquery - 在ajax成功时调用表单提交到动态创建的表单

> ID：15664095
> 
> 赞同：1
> 
> 时间：2013-03-27T16:27:52.190
> 
> 标签：jquery, ajax, forms, dynamic, jquery-on

在我的 JQuery 文件中，我在一个空的 DIV 标记内动态创建一个表单。当用户单击表单的按钮时，我调用 e.PreventDefault() 以允许我将 AJAX 调用传递给 php 脚本。在 AJAX 调用成功后，我想继续提交表单。一切正常，我想继续提交表单。

由于表单是动态的，因此针对表单我使用以下内容：

```
 $('#empty_div').on('click', '#submit_button', function (e) {... 
```

一切正常，AJAX 调用正常工作并完成了它应该做的事情，但无法弄清楚如何提交将我重定向到 Paypal 的原始表单。那么在 AJAX 调用之后，我该如何调用 .submit() 函数呢？

$('#form-name').submit() 不起作用，我似乎也无法让 .trigger() 工作。

抱歉，如果这有点啰嗦，我只是想提供我能提供的所有信息来帮助解决问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:14:53.997

尝试使用触发表单提交

```
$('#form-name')[0].submit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:44:45.097

我感谢所有的帮助。`async: false`最后发现，当我可以使用AJAX 调用中的选项同步运行 AJAX 和表单提交时，无需尝试重​​新提交表单。

# ios - #define和枚举的简单代码理解

> ID：15664098
> 
> 赞同：4
> 
> 时间：2013-03-27T16:27:58.690
> 
> 标签：ios, objective-c, xcode

下面的代码是什么意思？

```
#define kSelectedTabDefaultsKey @"Selected Tab"

 enum {
    kByName,
    kBySecretIdentity,
    }; 
```

#define kSelectedTabDefaultsKey @"Selected Tab" 是否意味着我们正在定义一个名为“kSelectedTableTabKey”的常量，其值为“SelectedTab”？有点像 NSDictionary 一个键/值对？

我认为枚举只是翻译 kByName 值 = 0 和 kBySecretIdentity 值 = 1。#define kSelectedTabDefaultsKey 和枚举是否绑定在一起？

我认为我没有正确理解它，因为稍后在代码中：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSInteger selectedTab = [defaults integerForKey:kSelectedTabDefaultsKey];
// How does "selectedTab" get back an integer?  I thought "kSelectedTabDefaultsKey"
// was a  key with a String value of @"Selected Tab ?

UITabBarItem *item = [self.tabBar.items objectAtIndex:selectedTab]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:34:09.523

```
#define kSelectedTabDefaultsKey @"Selected Tab" 
```

这只是告诉编译器它看到的任何地方都`kSelectedTabDefaultsKey`应该将其扩展为`@"Selected Tab"`.

所以这：

```
NSInteger selectedTab = [defaults integerForKey:kSelectedTabDefaultsKey]; 
```

变成这样：

```
NSInteger selectedTab = [defaults integerForKey:@"Selected Tab"]; 
```

`selectedTab`在默认值管理器在默认值数据库中`integerForKey:`查找键之后，将返回任何值。`@"Selected Tab"`据推测，它将是 0 或 1 对应于您的枚举中的两个值。

* * *

枚举与默认键无关，但很方便。

```
 enum {
    kByName,
    kBySecretIdentity,
    }; 
```

这告诉编译器在遇到 kByName 时用 0 替换，并用 1 替换 kBySecretIdentity。不多也不少。

因此，据推测，写入数据库的值将是 0 或 1 之一。枚举的存在使得在代码中，为了清楚起见，您可以说“kByName”而不是 0。在您发布的代码中，没有直接提及枚举，因为默认数据库中的值只是传递给选择一个选项卡。

检查默认数据库的结果是明智的。将枚举重新定义为：

```
 enum {
    kByName,
    kBySecretIdentity,
    kByUnusedSentinal
    }; 
```

然后：

```
NSInteger selectedTab = [defaults integerForKey:kSelectedTabDefaultsKey];
if ((selectedTab < 0) || (selectedTab >= kByUnusedSentinal))
    selectedTab = kByName; 
```

这样，如果一个 bogon 曾经被写入默认数据库，您的应用程序将默认使用 kByName 选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:39:33.570

`#define kSelectedTabDefaultsKey @"Selected Tab"`表示您正在为 kSelectedTabDefaultsKey 定义替换文本`@"Selected Tab"`（不是`"Selected Tab"`或`Selected Tab`）。

您可以将其定义为`if (x==`，并且无论您使用定义的名称（无论是否有意义），它都会替换该文本。它的“值”是（有一些令人困惑的例外）*正是*以第一个非空白字符开头并以行尾结束的文本（没有空格）。

（在使用`begin`/`end`而不是你的语言中，`{/}`你可以通过#defining "begin" 来制造一些真正的恶作剧。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:38:00.660

将#define 视为在编译器运行之前由预处理器在源代码中执行的文本替换。上面来自@bbum 的示例说明了这一点。

枚举是编译器理解的一种新类型。它本质上将一个符号映射到一个整数（即一个常量），但比使用#define 时具有更强的类型检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:33:55.647

define 就像一个 const （但由预编译器而不是编译器处理）。

kSelectedTabDefaultsKey 是存储所选选项卡的默认首选项的（字符串）名称。读取首选项后，在选项卡栏上再次选择先前选择的选项卡。可能这是在应用重启时完成的。

枚举似乎不相关。

# python - 如何用长字符串干净地保持低于 80 字符的宽度？

> ID：15664101
> 
> 赞同：22
> 
> 时间：2013-03-27T16:28:04.200
> 
> 标签：python, coding-style, readability, code-readability

我现在正试图将我的代码保持在 80 个字符或更少，因为我认为它在大多数情况下看起来更美观。但是，有时，如果我不得不在奇怪的地方放置换行符，代码最终会看起来更糟。

我还没有弄清楚如何很好地处理的一件事是长字符串。例如：

```
#0.........1........2........3........4.........5.........6.........7.........8xxxxxxxxx9xxxxxx
def foo():
    if conditional():
        logger.info("<Conditional's meaning> happened, so we're not setting up the interface.")
        return

    #..... 
```

结束了！把它放在下一行也无济于事：

```
#0.........1........2........3........4.........5.........6.........7.........8xxxxxxxxx9xxxxxx
def foo():
    if conditional():
        logger.info(
            "<Conditional's meaning> happened, so we're not setting up the interface.")
        return

    #..... 
```

我可以使用换行符，但这看起来很糟糕：

```
#0.........1........2........3........4.........5.........6.........7.........8
def foo():
    if conditional():
        logger.info(
            "<Conditional's meaning> happened, so we're not setting \
up the interface.")
        return

    #..... 
```

该怎么办？缩短字符串是一种选择，但我不希望我的消息的可读性受到代码当时恰好有多少缩进级别这样任意的影响。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-27T16:28:54.903

您可以将字符串分成两部分：

```
def foo():
    if conditional():
        logger.info("<Conditional's meaning> happened, so we're not "
                    "setting up the interface.") 
```

[在编译时，](http://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation)同一表达式中的多个连续字符串会自动连接成一个：

```
>>> def foo():
...     if conditional():
...         logger.info("<Conditional's meaning> happened, so we're not "
...                     "setting up the interface.")
... 
>>> import dis
>>> dis.dis(foo)
  2           0 LOAD_GLOBAL              0 (conditional)
              3 CALL_FUNCTION            0
              6 POP_JUMP_IF_FALSE       25

  3           9 LOAD_GLOBAL              1 (logger)
             12 LOAD_ATTR                2 (info)
             15 LOAD_CONST               1 ("<Conditional's meaning> happened, so we're not setting up the interface.")
             18 CALL_FUNCTION            1
             21 POP_TOP             
             22 JUMP_FORWARD             0 (to 25)
        >>   25 LOAD_CONST               0 (None)
             28 RETURN_VALUE 
```

注意第`LOAD_CONST`3 行，函数的字节码包含*一个*字符串，已经连接起来。

如果要将 a 添加`+`到表达式中，则会创建两个单独的常量：

```
>>> def foo():
...     if conditional():
...         logger.info("<Conditional's meaning> happened, so we're not " + 
...                     "setting up the interface.")
... 
>>> dis.dis(foo)
  2           0 LOAD_GLOBAL              0 (conditional)
              3 CALL_FUNCTION            0
              6 POP_JUMP_IF_FALSE       29

  3           9 LOAD_GLOBAL              1 (logger)
             12 LOAD_ATTR                2 (info)
             15 LOAD_CONST               1 ("<Conditional's meaning> happened, so we're not ")

  4          18 LOAD_CONST               2 ('setting up the interface.')
             21 BINARY_ADD          
             22 CALL_FUNCTION            1
             25 POP_TOP             
             26 JUMP_FORWARD             0 (to 29)
        >>   29 LOAD_CONST               0 (None)
             32 RETURN_VALUE 
```

在字节编译器的窥孔优化中，Python 确实在编译时对常量（so 、 等）折叠二进制操作`+`。因此，对于某些字符串连接，编译器*还*可以用连接结果替换常量的字符串连接。请参阅，对于序列（包括字符串），仅当结果限制为 20 个项目（字符）或更少时才应用此优化。`*``-`*`+`[`peephole.c`](http://hg.python.org/cpython/file/2.7/Python/peephole.c#l465)*

# ios - 带有 UIImageView 的自定义 UITableViewCell 不为某些单元格加载图像

> ID：15664104
> 
> 赞同：0
> 
> 时间：2013-03-27T16:28:07.920
> 
> 标签：ios, objective-c, uitableview, uikit

我有这个非常奇怪的问题。

基本上我有一个 UITableViewCell 子类，我编写了一些插座并将其链接到一个 Nib。

Cell.h 的子类

```
@property (weak, nonatomic) IBOutlet UIImageView *myImageView; 
```

Cell.m 的子类

```
@synthesize myImageView = _myImageView; // do i need this?

- (void) setUpCell... image:(UIImage*)image
{
       if(image)
        self.myImageView.image = image;
    else
        self.myImageView.image = nil;
} 
```

在管理单元格的表格视图的视图控制器中，

我已使用以下代码向 Nib 注册：

```
[self.tableView registerNib:[UINib nibWithNibName:pathToNibForBaseMenuCell bundle:nil] forCellReuseIdentifier:identifierForBaseMenuCell]; 
```

在 cellForRowAtIndexPath 中，我将单元格出列并设置图像...

```
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:identifierForBaseMenuCell];

switch (indexPath.section) {

    case 2:
        [cell setUpCell...image:self.cogWheelImageForSettingsIcon];
        break;

    default:
        break;
}

return cell; 
```

}

奇怪的是，假设我在第 2 部分中有 10 个单元格（如上），我以相同的方式设置它们，有些单元格显示齿轮图标，有些则没有！将这些单元格滚动进出视图似乎会改变哪些单元格显示图标而哪些不显示。

这意味着注册单元格，包括设置重用标识符，在 nib 文件中设置子类，所有这些都很好（常见的陷阱）。

在我看来，这种行为模式与内存有关 - 好像某处正在释放某些东西......

这是一张图片来说明我的意思：

![在此处输入图像描述](../Images/f7e20d2c345c27a93561c9616112e7cd.png)

请帮忙！

谢谢

维生素B

编辑：

好吧，明确一点，我还没有在这张表上使用任何数据，但尽管如此，我没有理由不应该出现这些齿轮！

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 3;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
switch (section) {
    case 0:
        return 1;
        break;

    case 1:
        return 10;
        break;

    case 2:
        return 10;
        break;

    default:
        return 0;
        break;
}
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:identifierForBaseMenuCell];

switch (indexPath.section) {
    case 0:
        [cell setUpCell... text:@"Username" image:nil];
        break;

    case 1:
        [cell setUpCell... text:@"Magazine" image:nil];
        break;

    case 2:
    {
        NSString* str = [NSString stringWithFormat:@"Settings: %d",indexPath.row];
        [cell setUpCell... text:str image:self.cogWheelImageForSettingsIcon];
        break;
    }

    default:
        break;
}

return cell;
} 
```

它的输出是......

![在此处输入图像描述](../Images/a118f0316303e94a53f74318196ace36.png)

我的观点是，如果我为第二部分“设置”中的所有单元格设置相同的图像，为什么只有其中一些单元格显示图像？

自定义单元类：

```
@interface CustomCell : UITableViewCell
@property (weak, nonatomic) IBOutlet UIImageView *backgroundImageView;
@property (weak, nonatomic) IBOutlet UILabel *mainLabel;
@property (weak, nonatomic) IBOutlet UILabel *arrowView;
@property (weak, nonatomic) IBOutlet UIImageView *myImageView;
- (void) setUpCelltext:(NSString*)text image:(UIImage*)image;

@implementation CustomCell

- (void) setUpCelltext:(NSString*)text image:(UIImage*)image
{
self.backgroundImageView.image = [UIImage imageNamed:pathForBackgroundImage];
self.myImageView.layer.cornerRadius = kCornerRadiusOfImageView;
self.myImageView.layer.masksToBounds = YES;

if(image)
    self.myImageView.image = image;
else
    self.myImageView.image = nil;

NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObject:self.fontForText forKey:NSFontAttributeName];
NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:text attributes:attrsDictionary];
self.mainLabel.attributedText = attrString;
}
@end 
```

单元格有自定义字体、箭头视图、背景视图——它们都可以正常工作！它们根据部分而变化。它只是不起作用的图像。您可以看到 cellForRowAtIndexPath 调用的此函数将设置图像（如果提供），或者将 imageview 设置为 nil（如果不提供）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:10:59.950

事实证明，问题与在我的笔尖中使用“imageView”作为我的 imageView 的名称有关。这后来被改变了，但原来的关系是 UITableViewCell 的实例变量而不是自定义单元格。

故事的寓意：不要将自定义表格视图单元格的图像视图称为“imageView”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:32:14.837

`UITableViewCell`s 使用 . 从旧单元格中重绘`dequeueReusableCellWithIdentifier:`。如果您不希望重复使用单元格，那么您将需要每次在`tableView:cellForRowAtIndexPath:`函数中初始化一个新单元格。

但是，如果您想重用单元格（推荐），那么您应该`- (void) setUpCell... image:(UIImage*)image`每次都在您的内部调用您的函数`tableView:cellForRowAtIndexPath:`，以确保图像仅设置为正确的单元格。

您似乎也在使用存储在`UITableViewCell`子类中的数据，但是当单元格在不同的行上重用时，它仍然会认为它是与原始行相同的单元格。

例如：在第 2 行中创建了一个单元格，并具有一个图标图像。单元格 2 不在屏幕上，现在正用于第 16 行。第 16 行不应该有图像，但单元格仍然认为它与第 2 行中的单元格相同，并继续显示其图像。

如果您希望重复使用每个单元格并为每个单元格提供唯一数据，请仅使用外部数据集（例如： an `NSArray`），该数据集提供绘制单元格所需的信息并将该信息每次传递给单元格，而不是依赖于您在创建单元格时提供的信息。

# android - Android 文件：方案 cookie

> ID：15664106
> 
> 赞同：0
> 
> 时间：2013-03-27T16:28:15.003
> 
> 标签：android, cookies, webview, webkit, cookiemanager

我有一个希望从 Android 设备本地托管的网络应用程序。它需要设置某些 cookie。我正在使用 CookieManager 在 webview 上设置 cookie，但它似乎仅适用于设备 > Android API 11。是否可以使用 file:// URL 方案为页面设置 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T03:16:02.253

您必须实现 API 级别 12 提供的方法 setAcceptFileSchemeCookies。

为文件方案 URL 设置 cookie。

有关详细信息，请参阅[http://developer.android.com/reference/android/webkit/CookieManager.html](http://developer.android.com/reference/android/webkit/CookieManager.html)

# jekyll - Jekyll IF 语句用于“IF 索引（主页）而不是分页”？

> ID：15664110
> 
> 赞同：4
> 
> 时间：2013-03-27T16:28:21.787
> 
> 标签：jekyll, liquid

您可能知道 Jekyll 使用 Liquid 标签，并且 Liquid 模板引擎支持[`If / Else / Unless`statements](http://wiki.shopify.com/UsingLiquid#If_.2F_Else_.2F_Unless)。有谁知道如何仅在“主页”（&未分页）上显示特定内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:13:32.940

知道了！

* * *

***更新：如果您还****没有**足够的帖子进行分页，这不起作用。也就是说，它仅在您至少有`page1`和时才有效`page2`。*

你可能已经知道，[Jekyll 支持分页](https://github.com/mojombo/jekyll/wiki/Pagination)。因此，要仅针对索引/主页（特别是仅第一页，即`page1`和 NOT `page2`，`page3`...），您可以使用以下命令：

```
{% if paginator.next_page == 2 %}

    <div id="welcome">Hello, welcome to my blog!</div>

{% endif %} 
```

`{% if paginator.next_page == 2 %}`告诉 Jekyll 检查分页的下一页是否为`page2`（即当前页为`page1`）并显示指定的内容。

* * *

**这最有效：**

```
{% if paginator.previous_page %}
{% else %}

    <div id="welcome">Hello, welcome to my blog!</div>

{% endif %} 
```

* * *

未经测试，但`{% if paginator.previous_page == 0 %}` *也可能*有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-15T20:35:38.050

最好的方法是：

```
{% if paginator.page==1 %}
  // Do something here
{% endif %} 
```

# asp.net - iis 应用程序在第一个和第二个请求时加载缓慢

> ID：15664111
> 
> 赞同：1
> 
> 时间：2013-03-27T16:28:24.330
> 
> 标签：asp.net, iis

我在一个 IIS 网站/应用程序中遇到了这个奇怪的问题：

问题是当我在某些设备上打开网络浏览器并访问应用程序时，第一个和第二个请求非常慢。每次加载最多需要 30 秒。

之后一切顺利。

只有在某些设备上打开 Web 浏览器后才会发生这种情况。我将命名问题持续存在的设备和不存在的设备。

有问题的设备：Galaxy S 1（氰基 Mod 10）Iphone 4S（库存）ViewSonic VSD220（运行 android ICS）东芝笔记本电脑（win vista，我手头没有规格）

未显示问题的设备：4 台 PC 运行 win xp 戴尔笔记本电脑（win 7，我也没有相关规格）

我发现的唯一共同因素是问题仅存在于移动设备上的此 APP 中。在笔记本电脑场景中，我尝试使用两种网卡（有线和无线），结果是相同的。

我已经尝试过使用 2 个不同的 IIS 服务器和不同的版本（5.1 和 6.0）。在不同的机器上... 在 6.0 IIS 服务器上创建一个新的应用程序池... APP 池回收计时器...

这也是我唯一使用 .net framework 4.0 的 APP

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:06:42.783

根据我们上面的故障排除，确定应用程序的某些设备只有局域网连接，因此无法访问应用程序中引用的外部资源。

# javascript - JQuery 验证引擎无法在 Firefox 或 IE 上运行

> ID：15664119
> 
> 赞同：0
> 
> 时间：2013-03-27T16:28:47.217
> 
> 标签：javascript, jquery, validation, jquery-validation-engine

我正在尝试使用 jQuery 验证引擎插件验证表单，但它不适用于最新的 firefox 或 IE。

这是我在表单页面上的：

```
<script src="js/jquery-1.9.1.min.js" type ="text/javascript"></script>
<script src="js/jquery-ui-1.10.2.custom.js" type ="text/javascript"></script>
<script src="js/jquery.validationEngine.js"></script>

<script type="text/javascript">
     jQuery(document).ready( function() {
        // binds form submission and fields to the validation engine
        jQuery("#formID").validationEngine();
    });

            function checkHELLO(field, rules, i, options){
        if (field.val() != "HELLO") {
            // this allows to use i18 for the error msgs
            return options.allrules.validate2fields.alertText;
        }
    }
  </script> 
```

以下是一些供参考的表单字段：

```
<form action ="enviar.jsp" method="post" name="seguimiento" id="seguimiento">
<label>GolTV:</label>
<input name="Gol" type="number" id="Gol" title="Gol" min="0" class="validate[custom[number],min(0)]">
<br>
<label>Bajas:</label>
<input name="Bajas" type="number" id="Bajas" title="Bajas" min="0" class="validate[custom[number],min(0)]">
<br>
<label>Preinst teléfono:</label>
<input name="Preinstalaciones" type="number" id="Preinstalaciones" title="Preinstalaciones" min="0" class="validate[custom[number],min(0)]">
<input type="submit" value="Enviar"> 
```

这在 Chrome 上工作得很好，如果有人在字段中输入负数或字母，则会弹出一条消息并说这是​​错误的，但在 Firefox 上没有发生任何事情。

JavaScript 控制台只是抱怨这个：

```
Fecha y hora: 27/03/2013 16:45:11
Advertencia: Error al interpretar el valor para 'filter'.  Declaración rechazada.
Archivo de origen: http://<myhost>/Tecnicos/css/jquery-ui-1.10.2.custom.css 
```

这转化为解释“过滤器”值的错误。声明被拒绝。

其中有一些，但都与 css 相关，与 javascript 完全无关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:30:29.327

```
jQuery("#formID").validationEngine(); 
```

那不应该

```
jQuery("#seguimiento").validationEngine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:56:47.407

问题是没有添加本地化规则。

添加后

```
 <script src="js/jquery.validationEngine-es.js"></script> 
```

有用。

# ios - 如何使用私有 API 在 iOS 上禁用通知中心？

> ID：15664121
> 
> 赞同：1
> 
> 时间：2013-03-27T16:28:50.900
> 
> 标签：ios, iphone-privateapi

我有一个处于前台的应用程序，我想在其中禁用通知中心 UI（因此用户无法打开它）。我正在寻找一个 API（或至少是搜索方向）来禁用通知中心 UI 或阻止用户打开它。

几个重要的注意事项：

*   我正在寻找一种在应用程序中完全禁用它的方法。

    仅将[状态栏设置为隐藏并将其移至左侧](https://stackoverflow.com/questions/9519654/disable-ios-5-notification-center-gesture-in-app)对我不起作用。它仍然可以访问。

*   我只想禁用它并且不修改任何行为。

    所以，[kiosk 模式](https://stackoverflow.com/questions/13938571/trying-to-initate-guided-access-from-within-an-ios6-app)也不适合我。

*   私有 API（不是越狱调整）很好。

# svn - Subversion：检测重命名的文件夹

> ID：15664132
> 
> 赞同：2
> 
> 时间：2013-03-27T16:29:09.230
> 
> 标签：svn, directory, rename, move

这是我的情况：我有一个从 svn 签出的项目的本地副本。我正在使用 linux 服务器。我在工作日开始时执行结帐，然后我和其他人编辑项目中包含的文件/文件夹。在一天结束时，我必须提交对 svn 的更改。

我正在使用命令`svn status .`进行修改，然后执行`svn add [filename]`新`svn delete [filename]`文件/文件夹和删除的文件/文件夹。

我只有重命名文件夹的问题。我知道在 svn 中重命名文件夹的正确方法是命令`svn move [from-folder] [to-folder]`。但是，如果有人使用 重命名文件夹`mv [from-folder] [to-folder]`怎么办？

如果我做：

```
svn delete [from-folder] 
```

接着

```
svn add [to-folder] 
```

我没有收到“删除命令”的错误，但收到“添加命令”的错误，说“[to-folder] 已经在版本控制之下”。

如何检查文件夹是否已重命名？以及如何正确提交更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T18:29:29.000

您在这里有几个问题：

1.  您有多个人共享一个工作副本。这是一个坏主意。当您这样做时，人们很容易踩到彼此的更改并提交尚未准备好提交的内容。你失去了所有责任——谁改变了什么？每个人都在处理相同的文件，所以现在不可能知道谁做了什么。每个人都应该有自己的工作副本，在他们自己的工作站上（或在他们自己的主目录下，如果您必须在远程系统上工作）。
2.  上述要点的附录：您的提交消息描述了您为什么要进行更改。如果每个人都共享一个工作副本，并且只有一个人提交，那么您如何记录您的更改历史（“为什么”）？
3.  你有人没有正确使用这些工具。如果您在工作副本中，则必须使用`svn`子命令完成所有操作。句号。
4.  你每天都查吗？在适当的 Subversion 工作流程中没有必要这样做。

回答核心问题：`svn st -u`用于在本地或服务器上查找任何更改。`svn update`经常运行以尽快获取更改以防止出现此类问题，并在更改目录结构后尽快提交更改（假设它不会破坏其他内容）是一个好习惯，以便每个人都知道变化。

但是，团队成员之间的良好沟通和正确使用工具是不可替代的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:59:01.193

`svn -u status`为您提供本地和远程更改的列表，因此您将提前知道是否有任何此类更改。

此外，svn 具有文件锁定功能，因此如果您的团队无法就不跨过他人的工作达成协议，此功能可以提供帮助：)。`svn lock [[your file]]`给你一些安全，虽然锁可能被盗。请参阅[文档](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html "文件锁定"):)

# ios - 是否可以在单个视图控制器中激活和停用凹凸 API？

> ID：15664139
> 
> 赞同：0
> 
> 时间：2013-03-27T16:29:39.997
> 
> 标签：ios, api, uiviewcontroller, bump

我正在使用[此处](https://github.com/bumptech/bump-api-ios)提供的凹凸 api 。我在我的应用程序中完成了这个设置，但我想做的只是在单个视图控制器中激活它。我注意到，无论您在凹凸中的视图如何，它仍然处于激活状态。

我没有在 AppDelegate.m 文件中安装代码，它在 ViewController.m 文件中。在我最后一次测试之后，很明显我把代码放在哪里并不重要。

所以我想知道是否有办法将其关闭（断开连接）？当用户切换视图时，我想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:35:14.420

只要你觉得合适`disconnect`就打电话给`connect`你……见[这里](https://github.com/bumptech/bump-api-ios/blob/master/libBump/BumpClient.h)。`BumpClient`

# ruby - 在执行期间将 STDOUT 输出到带有 ruby 的文件

> ID：15664140
> 
> 赞同：0
> 
> 时间：2013-03-27T16:29:47.577
> 
> 标签：ruby, sidekiq

在进程运行时将 STDOUT 输出到文件的最佳方法是什么？我制作了一个名为“runMyScript”的测试脚本，它有一些回声语句，中间有一些睡眠。

我正在使用 Rails 和 Sidekiq 来运行这个工作者：

```
class RunBuildWorker

  include Sidekiq::Worker

  sidekiq_options retry: false, backtrace: true

  def perform(file_name)
    IO.popen('runMyScript blah blah blah blah') do |io|
      File.open(FILE_MANAGER.configuration_directory + file_name, 'a') do |file|
        while (line = io.gets)
            file.write line
        end
      end
    end
  end

end 
```

不幸的是，在该过程完成之前它不会写入文件。在执行期间我将如何写入文件？

更新：

这是当前的脚本。

```
COUNTER=0
while [ $COUNTER -le 5 ]                                                                                                                                    
do
    echo "The counter is $COUNTER"
    sleep 1
    COUNTER=$(( $COUNTER + 1 ))
done 
```

我应该提到这只是一个测试脚本，所以我可以尝试重定向输出，还有另一个由另一个团队编写的脚本，我将来会实际使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:31:47.783

关于什么

```
system("runMyScript blah blah blah blah > #{FILE_MANAGER.configuration_directory + file_name}") 
```

这会将打印到 stdout 的任何输出重定向到您的文件（重定向在控制台级别完成）。如果要附加到文件，只需替换`>`为`>>`.

# c# - 使用 XSLT 和 C# 将图像 (Byte[]) 插入 word doc

> ID：15664143
> 
> 赞同：0
> 
> 时间：2013-03-27T16:29:56.737
> 
> 标签：c#, xslt, bytearray, xslcompiledtransform

我有一个看起来像这样的 xml 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
    <Job>
       <ID>1</ID>
       <Name>Front Window<Name>
       <Image>/9j/4AAQSkZJRgABAQ..(etc)</windowImage>
    </job>
    <Job>
       <ID>2</ID>
       <Name>BackWindow<Name>
       <Image>/9j/4BAQSkZJRgABAQ..(etc)</windowImage>
    </job>
</xml> 
```

还有一个循环遍历每个作业的 XSLT 文件。我的问题是如何插入保存为 byte[] 的图像？它们仅保存在数据库中，并且不会为它们创建文件，因为它们是在应用程序中生成的。我的 C# 代码如下所示。

```
Job jobClass = new ReportSQL().createXMLclass(_jobID);
new ReportSQL().createXMLFile(jobClass);
XslCompiledTransform xslt = new XslCompiledTransform();
xslt.Load(@"Code\quoteTemplate.xslt");
xslt.Transform("xmlfile.xml", "doc.doc"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:01:24.420

我认为您要生成的 XML 将图像保存为文本。这可以通过将字节数组编码为 Base64 来实现：

```
String s = Convert.ToBase64String(byte[]) 
```

和

```
byte[] b = Convert.FromBase64String(String) 
```

# java - Websphere Application Server 上的负载测试导致“连接被拒绝”

> ID：15664147
> 
> 赞同：0
> 
> 时间：2013-03-27T16:30:13.113
> 
> 标签：java, websphere

我在 websphere 8 上运行了两个 webapp，第一个是接受传入请求，从第二个 webapp 检索数据并将响应发送到客户端。通过 HTTP (Axis2) 使用 W3C SOAP WebServices 实现通信。

在使用 loadUI 进行负载测试时，我发现了以下行为：顺序请求允许高负载，而并行请求几乎立即失败，第二个 Web 应用程序显示“连接被拒绝”消息。

Tomcat 上的相同设置在这两种情况下都允许高负载。

最大打开连接数配置为 500，默认线程池最大 20 个线程，默认 web 容器有 10 个线程。

有谁知道任何可以帮助我的 websphere 设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:22:49.750

我找到了我想与您分享的问题的解决方案。

每个请求都会导致在 Websphere Application 服务器中使用两个线程，一个线程在第一个 Web 应用程序中，另一个线程在第二个 Web 应用程序中。

当我尝试使用 5 个客户端（WAS 中的 10 个线程）并行执行负载测试时，它仍然可以工作，但是使用 10 个客户端（WAS 中的 20 个线程）并行调用它，它不再工作了。所以我检查了 websphere 的设置，发现我在 websphere 中最多配置了 10 个线程。因此，当 10 个客户端使用所有线程时，他们永远等待让另一个线程联系第二个 Web 应用程序。

所以我给大家的建议是：
当你执行负载测试时，请注意可以通过以下路径访问的 Websphere 线程设置：服务器 -> 应用程序服务器 -> 服务器名称 -> 线程池 -> Web 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T16:22:24.793

这种情况下的真正问题不一定与线程池有关。这些情况下的问题是 WS（代码）没有使用线程安全功能开发。

线程安全是问题所在。

# perl - 打印重定向到多个输出目的地

> ID：15664153
> 
> 赞同：0
> 
> 时间：2013-03-27T16:30:26.897
> 
> 标签：perl, io-redirection, filehandle

我正在寻找一种方法来减少`print`我的一些脚本中的一些混乱。我想要一些输出到文件，一些到屏幕，还有一些到两者。是“两者兼得”让我望而却步。有没有办法打开一个*FILEHANDLE*将同时转到 STDOUT 和一个已经`open`编辑的文件？

像这样的东西：

```
open ($file_only, ">", "$logfile");
open ($file_and_term, .....);

print $file_and_term "Nice stuff for the user to see\n";
print $file "$some_command\n";
print $file `$some_command`;   
$debug && print $file "some debug info goes here, too\n";
print "Hey, good job! You're done!\n" 
```

我的目标是发送到的行`$file_and_term`不会是双行，一个去`$file`，一个去 STDOUT。并且还为了使其更加动态，基于调试级别，也许使用`select`由调试级别控制的语句。

* * *

因此，在编写上述内容时，我确实想出了一个适合我需要但不符合我愿望的解决方案。:) 所以我会在实施我不同的优雅解决方案时发布这个问题。

* * *

我最终这样做了`print`......

```
sub printit {
    my ($opt, $text) = @_;
    if ($opt == $FILE || $opt == $BOTH) {print $LOG $text}
    if ($opt == $TERM || $opt == $BOTH) {print $text}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:17:14.880

正如[对较早问题的回答](https://stackoverflow.com/a/10519990/168657)所建议的那样，您可以使用[`IO::Tee`](http://search.cpan.org/perldoc?IO::Tee)并说

```
my ($file, $file_and_term);
open $file, '>', $logfile;
$file_and_term = IO::Tee->new( $file, \*STDOUT ); 
```

# asp.net-mvc - 在来自 3rd 方库的每个 MVC 操作之前/之后执行代码

> ID：15664158
> 
> 赞同：2
> 
> 时间：2013-03-27T16:30:32.813
> 
> 标签：asp.net-mvc

我正在尝试在执行来自 3rd 方库的控制器上的每个操作之前和之后执行一段代码。

出于技术原因，我不能使用在每个页面请求的开始/结束时执行的 HttpModule - 它需要更加精细并针对 MVC 操作本身。

我知道可以创建并添加到 Actions 的 ActionAttributes，但是如果我无法修改原始代码，我该怎么办？

谢谢

# c# - 事件订阅者的对象重置方法或新参考？

> ID：15664159
> 
> 赞同：2
> 
> 时间：2013-03-27T16:30:33.167
> 
> 标签：c#, events, default-value

（使用 VS2010。假设性能不是问题）。

我有一个特定的对象，它为其所有属性更改实现事件。有时需要将对象“重置”为其所有默认属性值。最简单的方法是简单地构造一个新对象：

`Object1= New MyObject`

但是，对于原始对象的任何事件订阅者来说，这等价于更改所有属性值。例如，如果订阅者只监听属性的更新`A`，那么现在它也必须意识到新对象构造的可能性。这似乎为订阅者增加了额外的努力。（例如，也许我必须创建一个“NewObjectAssigned”事件，并且属性更改的订阅者也需要处理它。）

因此，我正在考虑使用 Reset 方法来装备对象，因此上面的代码更改为：

`Object1.Reset`

这样 Object1 引用永远不会改变，并且`Reset`会手动将所有属性更改为默认值，从而触发所有 propertychanged 事件。但这也感觉不太对劲，与仅仅声明一个新对象相比也很麻烦。我想我需要一种方法来手动重置所有属性或引发所有更改的事件，这让我很恼火——我必须记住在向类中添加新属性时更新此方法。或者也许这并不像我想象的那样有问题。

这是一个足够简单的场景，我确信有一个最佳实践，无论是哪种方式。哪个更可取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:40:42.263

如果您需要事件处理程序保持连接，那么您将希望使用重置而不是创建新实例。如果您的对象实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/ms133020.aspx)了 ，那么您可以发送一个[`PropertyName`](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertychangedeventargs.propertyname.aspx)设置为 null 的重置事件。

来自 MSDN：

> propertyName 参数的空值或 null 表示所有属性都已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T19:52:53.053

我想我同意彼得里奇的第一条评论，即我最初的问题缺乏确定“首选”方法所需的细节。就目前而言，我可能会接受他关于包装类的建议，该类将负责处理新的对象引用并将事件公开给订阅者。

# ruby-on-rails-3 - 如何使用 Rails Vacuum Gem 并从响应中获取 XML

> ID：15664162
> 
> 赞同：1
> 
> 时间：2013-03-27T16:30:40.260
> 
> 标签：ruby-on-rails-3

我试图与[Vacuum gem](https://github.com/hakanensari/vacuum)混在一起，但我对这个例子有一些问题。当我按照首页上的描述运行代码时：

```
req = Vacuum.new

req.configure key:    'foo',
              secret: 'secret',
              tag:    'biz-val'

params = { 'Operation'   => 'ItemSearch',
           'SearchIndex' => 'Books',
           'Keywords'    => 'Architecture' }

res = req.get query: params # XPath is your friend. 
```

我在从响应中获取 XML 时遇到问题。我可以看到对象类型是`Excon::Response`并且实际上包含数据，但是如何检索它包含的 XML？

我尝试过使用 res.to_xml 和 res.xml，甚至将其加载到 Nokogiri 中，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:00:57.553

我发现。XML 被保存在响应中的对象 Body 中。

# linux - 在 Linux 上运行 .jar 文件

> ID：15664164
> 
> 赞同：3
> 
> 时间：2013-03-27T16:30:42.333
> 
> 标签：linux, jar, directory, java

我有一个 .jar 文件，它从当前文件夹中读取两个文件，并生成一个 .txt 文件和一个包含多个其他 .txt 文件的单独文件夹作为输出。这在 Windows 中完美运行，使用此代码创建目录：

```
static String dir = System.getProperty("user.dir"); 
```

我在这里使用了说明：[https](https://askubuntu.com/questions/192914/how-run-a-jar-file-with-a-double-click) ://askubuntu.com/questions/192914/how-run-a-jar-file-with-a-double-click设置我的 .jar 文件以在简单的双击中运行，但截至目前，双击时它什么也不做。我的猜测是上面的代码行不能很好地转换为 Linux。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T16:33:23.083

首先，尝试在命令行上运行它，使用

`java -jar <file.jar>`

该`user.dir`属性是跨平台的（请参见[此处](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)），因此应该不是问题。但是，您是否使用了正确的文件分隔符？请记住，在 UNIX 上是“/”，在 Windows 上是“\”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:35:16.220

尝试**java -jar Jarname.jar**并在此命令之后将其他文件作为参数传递

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:35:36.070

您提供的代码行在 linux 上运行良好。

我最好的猜测是，您随后尝试通过添加不适合 linux 的特定于 Windows 的路径分隔符（如路径 +“\subdir”）来使用此目录路径（您应该构建一个新的 File 对象）。

要么，要么你的 jar 文件根本没有被执行。你有没有试过在你的 jar 文件中做一些非常简单的事情来查看是否有任何东西正在运行？您是否尝试过运行 jar`java -jar myapp.jar`以查看是否抛出任何异常或显示错误消息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:38:11.390

您将需要手动调整构建过程以将 jar 文件标记为可执行文件。在您的构建 xml 文件中，有一个目标“-post-jar”，它在构建 jar 后调用。您需要创建该目标并使用 Ant 的 chmod 任务来修改您的 jar。一旦你这样做了，每次你在该项目中创建一个 jar 文件时都会发生这种情况。

只要您安装了 JRE，它就会运行良好。

[阅读本文以了解更多信息](http://www.java-forums.org/awt-swing/11673-executing-jar-double-click-style-linux.html)。

# ios - iOS Core Plot 使 x 轴可滚动

> ID：15664170
> 
> 赞同：1
> 
> 时间：2013-03-27T16:30:52.803
> 
> 标签：ios, core-plot

我有一个与 Core Plot 图形对象中的实现滚动相关的问题。

我使用 CPTGraphHostingView 和 CPTGraph 来显示我的图。

当我的图表视图中有很多图时，我遇到了问题，因为它们被拉伸到当前的矩形。

我需要有能力制作一个间隔（例如每个图之间有 50 个点），如果图的总宽度大于 rect，则使图形视图可滚动。

我添加了这个代码来创建点之间的范围

```
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xMin) length:CPTDecimalFromFloat(xMax)]; 
```

但这只是抽象范围，将为图形视图的当前宽度重新计算。我想要与下一个数据对应的范围：

开始于：0

终点：xMax * 50 + 偏移量（例如 xMax = 10 * 50 点 + 每个图的 15 点偏移量）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:33:32.913

所有绘图都绘制在绘图区域图层中。构建图形并将其添加到托管视图后，调用`-layoutIfNeeded`它以更新所有图形层。使用绘图区域图层的大小来决定要显示多少个绘图点。设置 的长度`xRange`以显示那么多点。如果需要，在绘图空间上设置`allowsUserInteraction`为`YES`启用滚动。

# jquery - 所有ajax调用中的xhr.setrequestheader？

> ID：15664179
> 
> 赞同：1
> 
> 时间：2013-03-27T16:31:32.690
> 
> 标签：jquery, ajax, dojo, xmlhttprequest

我的网站有一些页面使用 jquery 和一些 dojo（我们实际上正在转向 jquery）。我需要在所有 ajax 请求上设置一个通用的自定义标头，无论它使用 jquery 还是 dojo。我可以这样做：

```
$.ajaxSetup({
    headers: {
        'X-app':'ios'
    }
});
dojo._xhr_orig = dojo.xhr;
    dojo.xhr = function(/*String*/ method, /*dojo.__XhrArgs*/ args, /*Boolean?*/ hasBody){
        args = args || {};
        args.headers = args.headers || {};

        args.headers['X-app'] = 'ios';

        return dojo._xhr_orig.apply(this, arguments);
    } 
```

但我需要在整个站点上执行此操作。有什么地方我可以改变 XMLHTTPrequest 原型上的东西来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:23:14.580

你可以尝试这样的事情：

```
$("body").bind("ajaxSend", function(elm, xhr, s){
          if (s.type == "POST") {
              xhr.setRequestHeader('X-app', 'ios');
          }
}); 
```

顺便说一句，使用大写设置请求标头时要小心，我在 IE6、IE7 和 IE8 设置不正确时遇到了一些问题。

编辑：

这更好（不必担心不区分大小写）：

```
$.ajaxSetup({
          beforeSend: function (jqXHR, settings) {
            jqXHR.setRequestHeader('X-app', 'ios');
          }
}); 
```

希望这对您有所帮助。问候。

# c# - 在 C# 字典中获取相似值的最快方法

> ID：15664181
> 
> 赞同：2
> 
> 时间：2013-03-27T16:31:34.360
> 
> 标签：c#, algorithm, sorting, generics

我在 C# 中有一个空间哈希类来检测 3D 数据。每个顶点位置都有一个空间散列并`Vector3`存储在`Dictionary<float, Vector3>`浮点数是我计算的实际空间散列中。我理解空间散列的方式是将散列排序到桶中，然后获取彼此处于阈值（例如 0.0001f）内的值。我所做的大多数研究都实现了桶排序，我无法弄清楚如何用`Dictionary`我拥有的来实现。

所以，我的问题是，我应该如何在这样的字典中获得类似的值？到目前为止，在我看来，我需要将哈希值排序到大小为 的桶中，`threshold`并以某种方式维护到`Vector3`. 我是否以完全错误的方式接近这个？比如说，有没有更适合这个特定用例的不同泛型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:45:20.043

实现接口

```
IEqualityComparer<float> 
```

处理模糊匹配并将其传递给 Dictionary 的构造函数

[http://msdn.microsoft.com/en-us/library/ms132151.aspx](http://msdn.microsoft.com/en-us/library/ms132151.aspx) [http://msdn.microsoft.com/en-us/library/ms132072.aspx](http://msdn.microsoft.com/en-us/library/ms132072.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:54:57.717

如果您想避免麻烦，请重新考虑使用空间哈希。虽然绝对可以实现，但 3D 散列函数非常复杂（如果你想要一个完美的散列，那就是）并且可以很容易地被一些智能的“足够接近”的函数替换。

所以，选择权在你：

[完美哈希](http://research.microsoft.com/en-us/um/people/hoppe/perfecthash.pdf)

或者

[巧妙使用 'Close-Enough' 函数](http://oglsuperbible5.googlecode.com/svn/trunk/Src/GLTools/include/math3d.h)（取自 OpenGL SuperBible 的源代码，请查找 'm3dCloseEnough'）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:12:39.690

该类`Dictionary`不允许键冲突，因此如果您希望多个向量与相同的空间散列相关联（即它们存储在同一个桶中），您需要存储向量列表而不是个体。本质上，您将自己的存储桶存储在字典中：

```
Dictionary<float, List<Vector3>> Buckets; 
```

接下来，您需要确保您的空间哈希函数为需要位于同一存储桶中的每个项目返回*相同的值。*考虑到这一点，您最好使用整数作为空间散列。

最后，为了从字典中获取相似的项目，您将不得不使用以下步骤：

1.  确定获取相似项目的边界框（例如<X-delta, Y-delta, Z-delta>, <X+delta, Y+delta, Z+delta>）
2.  遍历所有可能与边界框相交的桶
    1.  对于每个相交的桶，计算桶内一个点的空间哈希，并使用字典获取桶中的项目列表
    2.  将存储桶中的项目添加到结果列表中

如果您的存储桶大小相对于您的边界框较小，则上述操作可能会产生很多不必要的工作。如果是这种情况，那么您应该考虑使用不同的数据结构，例如八叉树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:45:23.133

为了使 a`Dictionary`工作，必须为每个项目分配一个存储桶，以便可以盲目地假设每个项目与不同存储桶中的任何项目不等效。因此，不可能`Dictionary`直接使用 a 来定位靠近给定点的对象，因为这些对象可能落入多个桶中。

如果您希望能够定位距离给定点严格小于半个单位的所有对象，我建议您分配整数坐标的桶组合，然后将每个点放在每个（通常是八个）桶中其坐标表示与所讨论的点相比的下一个更大或下一个较小的整数。要查找集合是否包含距离给定点严格小于半个单位的点，请在桶中查找最近的点。

根据所讨论点的密度，使用较粗的网格可能会有所帮助，在这种情况下，许多对象只需要存储在一个存储桶中。关键要求是每个点都必须存储在每个可能“最近”到它应该匹配的任何点的存储桶中。

# java - 带有面板的 IE 中的 GWT 性能问题

> ID：15664183
> 
> 赞同：0
> 
> 时间：2013-03-27T16:31:45.600
> 
> 标签：java, gwt

即使加载 60 条记录 IE8/9 也需要很长时间，而 Firefox 加载它们的速度非常快。在本模块中，使用 GWT 面板构建网格外观。任何人都面临类似的性能问题，例如使用 GWT 的 IE 速度慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:42:29.457

IE6 有很老的 JavaScript 解释器。所以它总是很慢。最好的你能做什么 - 优化你的代码，减少客户端计算，等等。

尝试`-optimize 9`编译器参数。它也可以提供帮助。

您也可以尝试应用[GWT 官方文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideOptimizing)中的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:35:19.800

**相对于其他浏览器ie速度很慢**，单单句子是不能让你满意的。

但事实是ie9以下版本非常慢`JAVASCRIPT Parser`。所以显然需要更多时间来渲染时间。

微软人如何从他们的 IE9 版本中想出一个更快的解析器。

[http://blogs.msdn.com/b/ie/archive/2010/03/18/the-new-javascript-engine-in-internet-explorer-9.aspx](http://blogs.msdn.com/b/ie/archive/2010/03/18/the-new-javascript-engine-in-internet-explorer-9.aspx)

由于在所有浏览器中从服务器加载的数据都是相同的，因此我们通过减少创建次数来加快速度的机会更少`DOM ELEMENT`。例如让 dom 元素设置值而不是创建新元素。

# pdf - iText 通过 servlet 从带有输入数据的动态映射 jsp 页面生成 pdf

> ID：15664186
> 
> 赞同：0
> 
> 时间：2013-03-27T16:31:55.180
> 
> 标签：pdf, web-applications, servlets, itext, bytearrayoutputstream

我已经使用字节数组输出流来生成pdf，但是输入是jsp页面和基于web的数据的映射，这个映射的文档将用于生成pdf

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PdfWriter.getInstance(document, baos);
document.open();
document.add(new Paragraph(webDoc));
document.close();
response.setHeader("Expires", "0");
response.setHeader("Cache-Control","must-revalidate, post-check=0, pre-check=0");
response.setHeader("Pragma", "public");
response.setContentType("application/pdf");
OutputStream os = response.getOutputStream();
baos.writeTo(os);
os.flush(); 
```

document.add() 中使用的 webdoc 是来自 jsp 的映射数据和一些数据输入的输出，但是页面后面的 pdf 被显示

%PDF-1.4 %2 0 obj <>流 x@<ńĤpٶB>SAa]"1zo&"k0;(\pxՃe#z,G%SQS^]P/@h |\" Ȉ[`JJrf6$m}M Ʉ :+t$j- y HBt: uR؞{bz{yK 3CZ"Uy2i>>/MediaBox[0 0 595 842]>> endobj 1 0 obj <> endobj 3 0 obj <> endobj 5 0 obj <> endobj 6 0 obj <> endobj xref 0 7 0000000000 65535 f 0000000555 00000 n 0000000015 00000 n 0000000643 00000 n 0000000398 00000 n 0000000706 00000 n 0000000751 00000 n trailer <<1715206131a4d7dfbf6cef534ceaa665>]/Info 6 0 R/Size 7>> startxref 887 %%EOF

我的 web.xml 也有 servlet 映射，但对 url 模式有疑问，因为生成的 pdf 将是动态的，所以在 url-pattern 部分我有 /servlet/servlet_name。

使用 *.pdf 没有帮助。

# asp.net-mvc-3 - 什么取代了 MVC 中的 ClientScriptManager？

> ID：15664193
> 
> 赞同：2
> 
> 时间：2013-03-27T16:32:09.423
> 
> 标签：asp.net-mvc-3, clientscriptmanager

我正在将 ASP.NET Forms 应用程序（我没有编写）转换为 MVC 3 应用程序。ClientScriptManager 在旧应用程序中使用。MVC 3 中不存在 ClientScriptManager。什么取代了 ClientScriptManager？我已经阅读了足够多的内容，知道 CSM 与 ASP.NET 中的 AJAX 功能有关；它注册 js 脚本和函数的“集”，有点类似于 EditorTemplates 如何为类似控件集工作。我不一定要在 MVC 中实现 CSM；我只想知道微软采取了哪些实践使 CSM 过时了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T01:05:22.987

ASP.Net MVC 旨在让您完全控制 HTML 和 js，而不是像 ASP.Net 那样让框架为您呈现这些。所以，没有什么能真正“取代” ClientScriptManager。因此，如何处理 js 完全取决于您。

你可以做一些简单的事情，比如包含`<script ...>`标签来引用文件中的内联脚本或 js 文件`_Layout.cshtml`，或者你可以使用某种 JavaScript 加载器，比如[RequireJS](http://requirejs.org/)，或者完全使用“Html Helpers”或其他东西来提出你自己的方案。

MVC 4 引入了[捆绑](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)的概念，它允许您将脚本集合定义为“捆绑”，当您在视图中引用它们时，MVC 会自动为您缩小并将它们合并在一起，如下所示：

`@Scripts.Render("~/bundles/jquery")`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T05:23:20.327

**下面是从 Controller 渲染 JavaScript(Function) 的示例。**

**控制器**

```
public ActionResult Index(int? id)
{
    ViewBag.MyAlert = "<script type='text/javascript'>MyAlert();</script>";
} 
```

**看法**

```
<script src="Your Path" type="text/javascript"></script>
@Html.Raw(ViewBag.MyAlert) 
```

**JS**

```
function MyAlert() {
    alert('Hi');
} 
```

**下面是从 Controller 渲染 JavaScript(File) 的示例。**

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    StringBuilder sb = new StringBuilder();
    sb.Append("<script src='Your Path' type='text/javascript'></script>");
    filterContext.HttpContext.Response.Write(sb.ToString());
} 
```

因此，使用这种方法您不需要在 View 中提及以下代码。

```
<script src="Your Path" type="text/javascript"></script> 
```

# r - 如何解释不同的 ggplot2 密度？

> ID：15664202
> 
> 赞同：21
> 
> 时间：2013-03-27T16:32:24.097
> 
> 标签：r, ggplot2

我对`geom_density`ggplot中以下变体的含义感到困惑：

有人可以解释这四个电话之间的区别：

1.  `geom_density(aes_string(x=myvar))`
2.  `geom_density(aes_string(x=myvar, y=..density..))`
3.  `geom_density(aes_string(x=myvar, y=..scaled..))`
4.  `geom_density(aes_string(x=myvar, y=..count../sum(..count..)))`

我的理解是：

*   `geom_density`单独将产生一个密度，其曲线下面积之和为 1
*   `geom_density`with`..density..`基本上是一样的...？
*   会将峰高归一化，`..count../sum(..count..)`使其更像归一化直方图，确保所有高度总和为 1
*   没有分母的`..count..`它本身只会将每个 bin 乘以其中的项目数
*   该`..scaled..`参数将使密度的最大值为1。

我觉得`..scaled..`非常违反直觉，如果我对它的解释是正确的，我从未见过它被使用过，所以我想忽略它。我主要是在寻找`geom_density`一种归一化密度图之间的差异的澄清，我假设它需要`...count../...`参数。谢谢。

（相关：[ggplot2 将变量映射到 y 并使用 stat="bin" 时出错](https://stackoverflow.com/questions/15651084/ggplot2-mapping-variable-to-y-and-using-stat-bin)）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T01:20:14.233

的默认美学`stat_density`是，因此默认使用`..density..`的调用将默认绘制。`geom_density``stat_density``y = ..density..`

[通过查看源代码](https://github.com/hadley/ggplot2/blob/master/R/stat-density.r)可以看到各个列是如何计算的

`..scaled..`定义为

```
densdf$scaled <- densdf$y / max(densdf$y, na.rm = TRUE) 
```

如果您愿意，请随意忽略它。

[查看 stat_bin](https://github.com/hadley/ggplot2/blob/master/R/stat-bin.r)的源代码

结果是这样计算的

```
res <- within(results, {
    count[is.na(count)] <- 0
    density <- count / width / sum(abs(count), na.rm=TRUE)
    ncount <- count / max(abs(count), na.rm=TRUE)
    ndensity <- density / max(abs(density), na.rm=TRUE)
  }) 
```

因此，如果您想比较`geom_histogram`（使用默认值`stat = 'bin'`）的结果，那么您可以设置`y = ..density..`它会`count / sum(count)`为您计算（考虑 bins 的宽度）

如果你想与 比较`geom_density(aes(y=..scaled..))`，`stat_bin`那么你会使用`geom_histogram(aes(y = ..ndensity..))`

您也可以通过使用`..count..`两者来获得相同的比例，但是您需要调整`adjust`参数`stat_density`以获得曲线的适当详细近似。

# authentication - Powershell BitsTransfer https 基本身份验证语法

> ID：15664210
> 
> 赞同：4
> 
> 时间：2013-03-27T16:32:56.733
> 
> 标签：authentication, powershell, https, passwords, microsoft-bits

我是 PowerShell 脚本的新手。我在 MS 文档中苦苦挣扎，找不到几个可以使用的示例。

我正在尝试使用 BitsTransfer 脚本自动从 ntis.gov 每周下载一个大型 txt 文件。我正在使用 .ps1 脚本，因为显然 SSIS 在不编写 .NET 代码的情况下无法做到这一点。

通过 https: 使用 NTIS 发布的用户名和密码访问此文本文件。如何在身份验证字符串中指定（硬编码）密码？我知道这是不好的做法。有一个更好的方法吗？

我的脚本看起来像这样-

```
 $date= Get-Date -format yyMMdd
    Import-Module BitsTransfer
    $Job = Start-BitsTransfer `
    -DisplayName DMFweeklytrans `
    -ProxyUsage AutoDetect `
    -Source https://dmf.ntis.gov/dmldata/weekly/WA$date `
    -Destination D:\Test.txt `
    -Authentication Basic `
    -Credential "myIssuedUsername" `
    -Asynchronous

While (($Job.JobState -eq "Transferring") -or ($Job.JobState -eq "Connecting")) {sleep 5}
Switch($Job.JobState)
    {
        "Transfer Completed" {Complete-BitsTransfer -BitsJobs $Jobs}
        default {$Job | Format-List} 
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T21:56:53.033

当您必须在非交互模式下提供凭据时，您可以通过以下方式创建 PSCredential 对象。

```
$secpasswd = ConvertTo-SecureString "PlainTextPassword" -AsPlainText -Force
$yourcreds = New-Object System.Management.Automation.PSCredential ("username", $secpasswd)

$Job = Start-BitsTransfer `
    -DisplayName DMFweeklytrans `
    -ProxyUsage AutoDetect `
    -Source https://dmf.ntis.gov/dmldata/weekly/WA$date `
    -Destination D:\Test.txt `
    -Authentication Basic `
    -Credential $yourcreds `
    -Asynchronous 
```

# c# - ASP.Net C# 助手，返回一个数组

> ID：15664211
> 
> 赞同：2
> 
> 时间：2013-03-27T16:33:00.417
> 
> 标签：c#, asp.net, razor-2

简单的问题：我需要从辅助函数返回一个数组：

```
@helper arrayBuilder(){
      string pages = System.Configuration.ConfigurationManager.AppSettings["siteNav"];
      pages = pages.Replace(" ", string.Empty);
      string[] pagesTable = pages.Split(',');

   return pagesTable;
} 
```

为什么这不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:37:40.547

此方法不应该是辅助函数。这应该在您的控制器中并在您的模型中返回。辅助函数仅用于显示。一个线索是因为你在打电话`System.Configuration.ConfigurationManager.AppSettings`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:38:16.603

也许在这里使用[@function](http://blogs.msdn.com/b/timlee/archive/2010/07/30/using-functions-in-an-asp-net-page-with-razor-syntax.aspx)语法会有所帮助？

[@helper](http://www.mikesdotnetting.com/Article/173/The-Difference-Between-@Helpers-and-@Functions-In-WebMatrix)返回一个要渲染的项目，例如一些 HTML，但我认为 @function 应该允许你返回一个值

# c# - jquery 仅用于代码隐藏 boolean = true

> ID：15664213
> 
> 赞同：0
> 
> 时间：2013-03-27T16:33:11.690
> 
> 标签：c#, jquery, asp.net

我有一个模式弹出 div，在单击文本框时显示。但是，如果用户有权使用此功能，我只需要此功能，否则我想完全忽略与被单击的文本框相关的所有代码（即，用户只需在文本框中键入值）。如何设置文本框单击的 JQuery 代码，仅基于从数据库的代码隐藏中检索到的布尔变量发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:57:20.450

您可以使用文字控件扭曲脚本，并在具有以下权限的情况下打开/关闭它：

```
<asp:Literal runat="server" id="MoreScript" EnableViewState="false">
<script>
  functions MoreToDo(){

  }
</script>
</asp:Literal> 
```

并且在您背后的代码上，只需`MoreScript.Visible`根据您的权限进行设置。我选择 Literal 是因为您可以将其添加到标题中并且不会留下任何标记，并且您可以直接查看页面上的 javascript 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:38:01.573

我可能会做这样的事情

```
<script>
       if ("<%= CodeBehindProperty %>" == "true")
       {
             //Attach click events
       }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:55:08.627

您可以尝试使用 RegisterStartupScript 方法从代码隐藏中注册 jQuery 函数。

```
public void Page_Load(Object sender, EventArgs e)
{
    String scriptString = @"<script type='text/javascript'>
    $(document).ready(function($){
       $('#Element').click(function(){
       //open popup
       });
    }
    </script>";
    if(hasPermission())
        this.RegisterStartupScript("PopUpScript", scriptString);
 } 
```

# c++ - 按下按钮时使用 QTimer 在 Qt 中暂停功能

> ID：15664218
> 
> 赞同：1
> 
> 时间：2013-03-27T16:33:28.280
> 
> 标签：c++, qt, opengl, game-engine, qtimer

我正在尝试为我在 Qt + OpenGL 中开发的游戏实现暂停按钮。

我想使用 QTimer 来实现它。基本上我每 100 毫秒更新一次屏幕。所以为了暂停游戏，我会在按钮按下时停止计时器。当再次按下按钮时，我将再次启动计时器

这是我的 pauseOrPlay SLOT：

```
void Window::pauseOrPlay()
{
  GLWidget::modifyTimer = TRUE;
  GLWidget::isPaused = !GLWidget::isPaused;

  GLWidget  timerUpdater;
  timerUpdater.timerFunc();
} 
```

这是我的 timerFunc()

```
GLvoid GLWidget::timerFunc()
{
  static    QTimer *timer = new QTimer(this);
  connect(timer, SIGNAL(timeout()), this, SLOT(update()));

  if( GLWidget::isPaused)
 timer->start(100);
  else 
 timer->stop();

} 
```

但我没有得到这个功能。我在这个特定的代码上暂停了屏幕，并且在这里和那里尝试了一些*调整，有时我的屏幕更新非常快，*[这](https://stackoverflow.com/questions/12528184/qtimer-becomes-faster-with-each-start-stop)指向了我，但我无法以某种方式找到解决我的问题的方法

任何帮助或指针？

PS：在这个问题中没有关于 OpenGL 的内容，但我认为那些可能已经处理过类似想法的人，添加 OpenGL 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:39:25.710

这种联系很糟糕。您已将其设置为在每次暂停或恢复游戏时进行连接。但是，如果您多次连接，您的插槽将被称为每个信号发射的多个瓦片。

确保只创建计时器并连接一次。我建议将计时器构造和信号连接移到 GLWidget 的构造函数中。将指向计时器的指针存储为类的成员变量，以便您可以在类的成员函数中启动和停止它。

# java - 使用两点作为参考绘制圆弧

> ID：15664219
> 
> 赞同：1
> 
> 时间：2013-03-27T16:33:31.760
> 
> 标签：java, graphics, drawing, label, points

我已经在 stackoverflow 上搜索了类似的问题，并尝试使用来自其他答案的一些建议来实现，例如：

```
Point p1 = prop.getDisplayPoint();
Point p2 = prop2.getDisplayPoint();

int xCenter = p1.x - 50;
int yCenter;

if(p1.y > p2.y)
        yCenter = p1.y - ((p1.y-p2.y)/2);
else
        yCenter = p2.y - ((p2.y-p1.y)/2);

int r = (int)Math.sqrt((p1.x-xCenter)*(p1.x-xCenter) + (p1.y-yCenter)*(p1.y-yCenter));
int x = xCenter-r;
int y = yCenter-r;
int width = 2*r;
int height = 2*r;
int startAngle = (int) ((180/Math.PI)*Math.atan2(p1.y-yCenter, p1.x-xCenter));
int endAngle = (int) ((180/Math.PI)*Math.atan2(p2.y-yCenter, p2.x-xCenter));
g.drawArc(x, y, width, height, startAngle, endAngle); 
```

但这仍然没有帮助我。我试图计算我的两点的中心，但弧的结果不是我在等待的。

结果是这样的：

![在此处输入图像描述](../Images/16ac2f10c7da3e82c82433e1e8a17da5.png)

这就是我要找的：

![预期结果](../Images/53a7d79b3ce91f7cbca018e4e7b0d7c1.png)

我有我想连接的每对点的坐标，比如“汽车”点和“公共汽车”点，然后我想在它们之间画一条弧线。角度永远是这样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T18:19:28.640

查看图片，您似乎有两个问题。

首先是您的原点不正确。我没有尝试过具体的值，但我认为这是因为您正在根据第一个点计算任意中心，然后根据该中心点（而不是实际的文本位置）计算弧的起点和终点。

然而，我认为更大的问题是弧线并不适合这项任务。使用弧线，您可以选择半圆形（或半椭圆形），或者可能是圆形的 1/3，但这些看起来不太好。它们肯定不会像您想要的示例。

相反，您需要一个[Bezier Curve](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)，这样您就可以加深“弧”的两侧。[这是](https://stackoverflow.com/questions/9562992/java-swing-drawing-curved-lines)一个 SO question，它将您指向 Java2D 中贝塞尔曲线函数的文档。如果你用谷歌搜索“java draw bezier”，还有很多例子。

# c# - 回发时继续显示可见的 div

> ID：15664221
> 
> 赞同：0
> 
> 时间：2013-03-27T16:33:36.993
> 
> 标签：c#, jquery, html, razor, ispostback

我得到了一些在我的页面上隐藏元素的 JQuery 代码。但是，我想在`page_load`事件出现时继续显示可见元素。

我使用 cshtml(razor) 代码，在那里我有一个`IsPost`电话，我想知道是否可以调用 JQuery `.hide`。

jQuery 代码：

```
<script>
    $().ready(function () {
        $(".btn").click(function () {
            $(".Hide").hide("fast");
            $("#" + $(this).data('type')).show("fast");
        });
    });
</script> 
```

C# 代码：

```
if(IsPost)
{
    if(Request["btn"] == "btn1")
    {
         // Do some code
    }

    if(Request["btn"] == "btn2")
    {
         // Do some other code
    }
} 
```

html代码：

```
<div id="button1" class="Hide">
    <form action="" method="post">
        <input type="submit" name="btn" value="btn1" />
    </form>
</div>
<div id="button2" class="Hide">
    <form action="" method="post">
        <input type="submit" name="btn" value="btn2" />
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:20:37.030

我最终使用的答案是这样的：

```
<script>
$().ready(function () {
    $(".btn").click(function () {
        $(".Hide").hide("fast");
        $("#" + $(this).data('type')).show("fast");
    });

    @{
        if(IsPost)
        {
            <text>
                $("#btn1).show("fast");
            </text>
        }
    }
});
</script> 
```

# javascript - 如果事件也需要作为参数，如何将参数传递给函数？

> ID：15664223
> 
> 赞同：0
> 
> 时间：2013-03-27T16:33:38.020
> 
> 标签：javascript, jquery

我有 2 个函数`addData()`，并且`diplayInfoBox(e)`在 addData 中我有一个单击处理程序，单击时我需要获取一些事件详细信息，因此需要该事件作为 的参数`displayInfoBox`，我还需要将另一条信息传递给，`displayInfoBox`但我不确定如何在有活动的情况下做到这一点。如果我这样做`displayInfoBox(e, pin)`是行不通的。谁能建议我需要做些什么来解决这个问题？

**JSFiddle** [http://jsfiddle.net/kyllle/upej8/7/](http://jsfiddle.net/kyllle/upej8/7/)

**JS**

```
addData: function() {
  //code

  //click handler
  Microsoft.Maps.Events.addHandler(pin, 'click', instance.displayInfoBox); //need to be able to pass variable pin to displayInfoBox
},

displayInfoBox: function(e) { //need to accept additional param for pin

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:34:46.657

尝试

```
 Microsoft.Maps.Events.addHandler(pin, 'click', function(e){instance.displayInfoBox(e, pin);}); 
```

所以你基本上调用了一个匿名函数 onclick 反过来调用你的函数传递你想要的任何参数 - 记住也要包括事件（在这种情况下是'e'）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:35:03.993

你可以这样做：

```
Microsoft.Maps.Events.addHandler(pin, 'click', function (event) {
    instance.displayInfoBox(event, pin);
}); 
```

# c++ - 纯虚函数和继承

> ID：15664225
> 
> 赞同：0
> 
> 时间：2013-03-27T16:33:44.260
> 
> 标签：c++, polymorphism, abstract-class, pure-virtual

我遇到了多态性和纯虚函数的问题。我的主要课程

```
#include<memory>

class Shape
{
  public:
  Gdiplus::Point start; 
  Gdiplus::Point end;

  std::shared_ptr<Gdiplus::Pen> m_pen;

  virtual void Draw(Gdiplus::Graphics & m_GraphicsImage) = 0;

  void setPen(std::shared_ptr<Gdiplus::Pen> pen2);

  void setStart(int xPos, int yPos);

  void setEnd(int xCor, int yCor);

}; 
```

然后我有这个派生自Shape的类。线.h

```
 #pragma once

 #include<memory>

class Line: public Shape
{
public:
  void Draw(Gdiplus::Graphics & m_GraphicsImage);
} 
```

这是我的line.cpp。

```
#include "stdafx.h"
#include "Line.h"
#include "ShapeMaker.h"

void Line::Draw(Gdiplus::Graphics & m_GraphicsImage)
{

  m_GraphicsImage.DrawLine(m_pen.get(),start.X,start.Y,end.X,end.Y);
} 
```

由于多态性的原因，在我的主要声明中，我声明了一个 Shape 类型的共享指针

```
 std::shared_ptr<Shape> m_shape; 
```

然后尝试调用 Line.cpp 的函数，但它不起作用，

```
LRESULT CDrawView::OnLButtonDown(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)

{
int xPos= GET_X_LPARAM(lParam);
int yPos = GET_Y_LPARAM(lParam);
start.X = xPos;
start.Y = yPos;

//Line line;
auto line = std::make_shared<Shape> (m_shape);
std::shared_ptr<Gdiplus::Pen> myPen(pen.Clone());
line->setPen(myPen);
line->setStart(xPos,yPos);
return 0;
}

LRESULT CDrawView::OnLButtonUp(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
{
int xPos= GET_X_LPARAM(lParam);
int yPos = GET_Y_LPARAM(lParam);
end.X = xPos;
end.Y = yPos;

//Pen pen(Color(0, 0, 255));
//Line line;
auto line = std::make_shared<Shape> (m_shape);
line->setEnd(xPos,yPos);
line->Draw(m_GraphicsImage);
m_shape.reset();

RedrawWindow();

return 0; 
```

现在我得到 drawview.cpp(54): error C2371: 'line' : redefinition; 不同的基本类型 1> \draw\drawview.cpp(53) : 见'line'的声明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:41:53.227

我相信问题是你的构造函数

```
std::make_shared<Shape> (m_shape); 
```

这本质上是新的 Shape （一个抽象类）。相反，您应该使用

```
std::make_shared<Line> (m_shape); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:09:48.090

错误是用于实例化 Shape，它是抽象类。

上面的语法'auto line = std::make_shared (m_shape);' 是罪魁祸首。

在此语句中，您尝试实例化 Shape 类。

参考这个 [http://www.cplusplus.com/reference/memory/dynamic_pointer_cast/](http://www.cplusplus.com/reference/memory/dynamic_pointer_cast/)

正确使用 shared_ptr 之间的转换

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:34:58.850

线

```
void Draw(Gdiplus::Graphics & m_GraphicsImage) 
```

应该读

```
void Line::Draw(Gdiplus::Graphics & m_GraphicsImage) 
```

如果没有，`Line::`您将定义一个名为的自由函数`Draw()`，该函数恰好具有与它相同的签名，`Line::Draw()`但在其他方面与之无关。

# eclipse - ubuntu eclipse beaglebone 调试不起作用

> ID：15664226
> 
> 赞同：1
> 
> 时间：2013-03-27T16:33:53.917
> 
> 标签：eclipse, debugging, ubuntu, beagleboard

我通过 VMware 将 beaglebone 连接到运行虚拟 Ubuntu (12.10) 的 PC。我尝试使用 Eclipse（版本 3.8）在 beaglebone 上调试我的 C++ 代码。

我关注了 youtube 视频：[http](http://www.youtube.com/watch?v=vFv_-ykLppo) ://www.youtube.com/watch?v=vFv_-ykLppo 。但我无法让调试正常工作。有人可以帮助我吗？

以下是我所做的和得到的。注意：我的主机 PC 的 IP 是 192.168.1.105。beaglebone 的 IP 是 192.168.102。

1.  Beaglebone 通过 USB 和以太网连接到 PC。我能够在 Eclipse 的嵌入式终端中打开与 Beaglebone 的连接。
2.  通过在 PC 的终端中输入以下命令，我在本地 PC 中成功安装了 gdb-multiarch：sudo apt-get install gdb-multiarch。
3.  通过在 beaglebone 的终端中输入以下命令，我在 beaglebone 上成功安装了 gdbserver：sudo apt-get install gdbserver
4.  我 CD 到应用程序文件夹并在 beaglebone 的终端中输入此命令： gdbserver [hostPC's IP]:12346 HelloWorldTest4 我得到了这个响应： Processing HelloWorldTest4 created; pid=1035 监听 12346 端口
5.  在 Eclipse 中，我转到 Run->Debug Configurations->，下面是我配置的内容，它们也显示在附加的屏幕截图中。Main -> Build（如果需要）在启动之前：构建配置：调试；使用 workspacesettings Debugger-> Main-> GDB debugger: gdb-multiarch GDB command file : .gdbinit Debugger-> Gdbserver Settings-> Gdbserver name: [beaglebone's IP address] 端口号:12346
6.  然后我点击调试，我得到以下错误。弹出窗口：“启动 HelloWorldTest4 调试”遇到问题。最终启动序列中的错误：在控制台中：警告：架构拒绝了目标提供的描述

问题： 1\. 这个问题与 gdb-multiarch 有关吗？如何解决？2\. 我的IP地址指定正确吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T09:14:29.873

I fixed the same problem by creating a .gdbinit file with the following content in my project folder:

set architecture arm

then point the Debug Configuration -> Debugger -> GDB command file entry to this new .gdbinit file and debug

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T07:33:55.310

我也有同样的问题，我下载了 gdb 源代码，为目标 arm 重新编译，并将 gdb 复制到`arm-linux-gnueabi-gdb`eclipese 中，我将 gdb 更改为`arm-linux-gnueabi-gdb`. 一切都开始起作用了。

获取 gdb (7.8) 源并提取它们

```
./configure --target=arm-none-linux-gnueabi --with-expat=/usr/local/lib/
make
cd gdb/gdbserver
/configure --host=arm-none-linux-gnueabi --with-expat=/usr/local/lib/
make 
```

# jquery - 如何“修复”jQuery中的幻灯片功能

> ID：15664230
> 
> 赞同：1
> 
> 时间：2013-03-27T16:33:56.300
> 
> 标签：jquery, slide

我遇到了 jquerys 本机幻灯片功能的问题，我真的很喜欢它的功能和一切，但由于某种原因，它似乎计算了你将鼠标悬停在它上面的次数（当你使用`.hover`as aposed 来确定你是否还在悬停在它上面。例如：[现场演示](http://jsbin.com/oyower/2/edit)。你会注意到，如果你将鼠标悬停在上面，删除，然后快速连续再次悬停，就会出现延迟时间的问题，有没有人知道解决这个问题的方法? 我似乎找不到任何专门解决这个问题的东西。

继承人的代码，让那些怀疑点击链接的人，或其他东西：

html:

```
<div id="click">
    <div id="box"></div>
</div> 
```

CSS：

```
 #box { 
    background:#de9a44;
    width:80px; 
    height:60px; 
    display:none; 
    position:absolute;
    left: 0;
    bottom: 0;
}

#click {
    width:80px; 
    height:60px; 
    border:1px solid #cc0001; 
    background:transparent; 
    position:absolute; 
    top:0; 
} 
```

jQuery：

```
$("#click").hover(function () {
    $("#box").slideToggle("slow");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:35:50.387

试试这个：

```
$("#click").hover(function () {
    $("#box").stop().slideToggle("slow");
}); 
```

# jquery - 页面内容不居中，css，jquery

> ID：15664233
> 
> 赞同：0
> 
> 时间：2013-03-27T16:34:10.367
> 
> 标签：jquery, css, web, visual-web-developer, word-wrap

我正在处理一个页面，出于某种原因，我很难将页面中的所有内容集中起来：我已经使用了网络上提到的所有内容。

我对css很陌生，所以任何帮助将不胜感激：

**这是HTML：**

```
<div id="wrapper">

    <!-- Codrops top bar -->           

       <section class="rw-wrapper"><h2 width: 100%;">
       <div style="text-align: center;" id="me"><img src="images/me.png" alt="me"></div>

        <div style="float: left; text-align: center;">This is X,&nbsp;</div>
            <div style=" float: left; text-align: center;" class="rw-words rw-words-1"> <span>Hello</span> <span>Hi</span> <span>Hola</span> <span>Bonjour</span> <span>Ciao</span> <span>Salam</span> </div><br>
            <br>

        </h2> 
```

```
 <div style="text-align: center;">

        <blockquote>
        <p> 
```

1

```
 </h2> 
```

由于某种原因，我无法发布 css ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:42:53.900

你的 HTML 中有 CSS，所以我会把它拿出来和你的 CSS 的其余部分放在一起。要按原样解决，尽管您需要提供使宽度居中所需的任何内容，然后使用 margin:0 auto; 例如：

```
 <div id="wrapper" style="width:50%; margin:0 auto;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:38:22.100

您可以`div`使用`margin: 0 auto;`. 如果您使用`float`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:39:31.927

您是要使文本或容器居中吗？

使容器居中通常相当容易：

```
div#wrapper {
  margin:auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:47:24.173

您需要从 HTML 中外部化您的样式，这将使事情变得更加清晰。您发布的内容中还有一些无效标记。

如果需要，谷歌一个基本的 CSS 教程，或者前往[W3Fools](http://www.w3schools.com/css/)。

但是，快速浏览一下，您需要使用：

`magin: 0 auto`在你的`wrapper`div 上。0 涵盖了底部和顶部边距的边距，并且我希望你能猜到，自动会自动在 div 的任一侧提供均匀的边距。因此将您的 div 居中。

请参阅我的[示例](http://jsfiddle.net/FY7UR/)，我对您的 HTML 进行了一些更改，我认为这些更改是不必要的，只是您尝试获得您想要的结果：

# php - PHP - SSH2 SFTP 下载进度

> ID：15664234
> 
> 赞同：7
> 
> 时间：2013-03-27T16:34:13.093
> 
> 标签：php, sftp, libssh2

我觉得这值得一个问题，因为 StackOverflow 似乎没有足够的主题。

# 我想使用带有进度条的 PHP 进行 SFTP

[我喜欢进度条](https://stackoverflow.com/questions/11441517/ffmpeg-progress-bar-encoding-percentage-in-php)。然而，这一次我想做一些不同的事情。我想用 PHP 做以下事情，这个看起来比上一个要困难得多：

*   通过 SFTP（通过 SSH？）执行下载
*   为用户提供下载进度的可见指示
*   启用暂停和继续下载

想想[FileZilla](http://filezilla-project.org/)，但在浏览器中，用 PHP 构建。我不想破解 Apache 或添加任何 Apache 模组。

* * *

### 实际下载的选项

对于基本的 SFTP 下载，[这里](https://stackoverflow.com/questions/1767117/how-to-sftp-upload-files-from-php)、[这里](https://stackoverflow.com/questions/4689540/how-to-sftp-with-php)、[这里](http://www.webvamp.co.uk/blog/coding/using-php-to-connect-to-sftp/)和[这里](http://phpmaster.com/using-ssh-and-sftp-with-php/)有很多问题。

这些文档[PHP 的 SSH2 扩展](http://php.net/manual/en/function.ssh2-sftp.php)（我目前正在使用 - 你通过 pecl 安装它）和替代[PHPSecLib](http://phpseclib.sourceforge.net/)，我没有使用，但可能会在以后查看。
*我的界面允许轻松换入/换出 - 对接口进行编码而不是实现等*......

这很好，但他们只是执行实际下载，仅此而已。

### 下载进度

PHP 有一个非常有趣的回调函数`stream_notification_callback`，[您可以在此处了解更多信息](http://php.net/manual/en/function.stream-notification-callback.php)。

这看起来很棒，并且是一个很有希望的步骤，直到有人查看了 PHP 的源代码并发现不幸的是，SSH2 / SFTP[不允许与此集成](https://stackoverflow.com/questions/14831620/stream-context-set-params-not-works-with-ssh2-sftp-wrapper)。
*感谢 hek2mgl 努力研究这个*。

这个想法`stream_notification_callback`是在每次检索数据时传递当前下载大小的通知；因此给出了使用当前下载量和总文件大小计算百分比所需的数据。但这不适用于 SSH2 和 SFTP ......

### 那么暂停/继续呢？

在我看来，这将是最难完成的。将数据下载到临时文件是可能的......这是我设法挖掘的内容：[http](http://ee.php.net/manual/en/function.fread.php#84115) ://ee.php.net/manual/en/function.fread.php#84115 - 但是将这种代码与进度条似乎很疯狂。

### 最后

还有cURL，但是我没有看到通过SFTP尽可能暂停/恢复下载。如我错了请纠正我。

那么，我将如何使用 PHP 在浏览器中集成上述要求？忘记客户端的东西，只需将数据发送到浏览器就足够了，因此执行此操作的建议会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T01:55:41.807

这是我从[该站点](http://randomdrake.com/2012/02/08/listing-and-downloading-files-over-sftp-with-php-and-ssh2/)获取的示例：

```
 // Write from our remote stream to our local stream
    $read = 0;
    $fileSize = filesize("ssh2.sftp://$sftp/$fileName");
    while ($read < $fileSize && ($buffer = fread($remoteStream, $fileSize - $read))) {
        // Increase our bytes read
        $read += strlen($buffer);

        // Write to our local file
        if (fwrite($localStream, $buffer) === FALSE) {
            throw new Exception("Unable to write to local file: /localdir/$fileName");
        }
    } 
```

由于您有文件的大小并且您使用 fread 从文件中读取，因此确定您的进度是微不足道的。

如果用户单击“暂停”按钮，可以通过检查您设置的 APC 中的值来完成暂停（在 iframe 中执行此操作，这样您就不会停止主脚本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:25:26.913

使用 PHP 下载大文件时检查[服务器失败](https://stackoverflow.com/q/15570922/569976)。可能会给你一些想法。

总结一下......其中一个答案建议修改 phpseclib 以在每次收到块时回显数据。另一个答案建议只下载块并在下载块时输出它们。

似乎这与您使用 stream_notification_callback 的想法非常一致。

祝你好运！

# php - PhpUnit 检查输出文本

> ID：15664236
> 
> 赞同：1
> 
> 时间：2013-03-27T16:34:23.540
> 
> 标签：php, phpunit

我开始编写 phpUnit 测试并面临这样的问题。我 80% 的函数都以这样的行结尾

```
 $data["res"] = $this->get_some_html($this->some_id);
    echo my_json_encode($data);
    return true; 
```

我怎样才能在我的课堂上对这类功能进行测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:00:29.833

您需要将代码隔离为可测试的“块”。您可以测试该函数在给定指定文本的情况下返回 TRUE/FALSE，然后在给定固定信息的情况下测试 JSON 返回数据。

```
function my_json_encode($data)
{
    return ...;
}

function get_some_html($element)
{
    return ...;
}

function element_exists($element)
{
    return ..;
}

function display_data($element)
{
    if(element_exists($element)
    {
        $data = get_some_html($element);
        $json = my_json_encode($data);
        return true;
    }
    else
    {
        return false;
    }
} 
```

测试：

```
public function test_my_json_encode()
{
    $this->assertEquals($expected_encoded_data, my_json_encode($text));
}

public function test_get_some_html()
{
    $this->assertEquals($expected_html, get_some_html('ExistingElementId'));
}

public function test_element_exists()
{
    $this->assertTrue(element_exists('ExistingElementId');
    $this->assertFalse(element_exists('NonExistingElementId');
}

function test_display_data()
{
    $this->assertTrue(display_data('ExistingElementId'));
    $this->assertFalse(element_exists('NonExistingElementId');
} 
```

这是一个简单、抽象的更改和测试示例。正如上面的评论所指出的，您可能希望将返回更改为 JSON 文本，错误时返回 FALSE，然后在代码中使用 === 测试来决定是否显示文本。

下一步是模拟元素，这样您就可以在不需要真正的 HTML 页面的情况下获得预期的数据。

# python-3.x - 将金字塔应用程序滚动到生产站点

> ID：15664239
> 
> 赞同：0
> 
> 时间：2013-03-27T16:34:36.437
> 
> 标签：python-3.x, pyramid, production

我正在尝试将金字塔应用程序推广到生产站点。

到目前为止，我已经在 public_html 之外创建了应用程序所在的 env 文件，如下所示：

```
 [~/env] $ 
```

所以我输入了

```
 $ ../bin/pserve production.ini, 
```

但是，当我访问 www.mydomain.com 时，它仍然显示 index.html。我应该如何解决这个问题？

我正在使用 CentOS 64 位 + Apache + mod_wsgi。

设置如下：

```
 Apache/2.2.24 (Unix) 
    mod_ssl/2.2.24 
    OpenSSL/1.0.0-fips 
    mod_wsgi/3.3 
    Python/2.6.6 
    mod_auth_passthrough/2.1 
    mod_bwlimited/1.4 
    FrontPage/5.0.2.2635 configured -- resuming normal operations 
```

* * *

在我的production.ini文件中，如下

```
 [app:main]
    use = egg:ECommerce
    reload_templates = false
    debug_authorization = false
    debug_notfound = false
    debug_routematch = false
    debug_templates = false
    default_locale_name = en
    mongodb.url = mongodb://my.ip.address
    mongodb.db_name = mycart_demo

    [filter:weberror]
    use = egg:WebError#error_catcher
    debug = false
    ;error_log = 
    ;show_exceptions_in_wsgi_errors = true
    ;smtp_server = localhost
    ;error_email = janitor@example.com
    ;smtp_username = janitor
    ;smtp_password = "janitor's password"
    ;from_address = paste@localhost
    ;error_subject_prefix = "Pyramid Error"
    ;smtp_use_tls =
    ;error_message =

    #[pipeline:main]
    #pipeline =
    #    weberror
    #    ECommerce

    [server:main]
    use = egg:waitress#main
    host = 0.0.0.0
    port = 8080

    # Begin logging configuration

    [loggers]
    keys = root, ecommerce

    [handlers]
    keys = console

    [formatters]
    keys = generic

    [logger_root]
    level = WARN
    handlers = console

    [logger_ecommerce]
    level = WARN
    handlers =
    qualname = ecommerce

    [handler_console]
    class = StreamHandler
    args = (sys.stderr,)
    level = NOTSET
    formatter = generic

    [formatter_generic]
    format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s

    # End logging configuration 
```

* * *

我已经设法在生产站点上推出，但是，现在，它显示 500 内部服务器错误...

在 apache error_log 中，它显示：

```
 [Sun Apr 07 23:17:47 2013] [alert] [client <ip_address>] 
        /home/vretnet9/public_html/.htaccess: WSGIScriptAlias not allowed here 
```

所以我继续看一下 .htaccess

.htaccess

```
 Options +ExecCGI
    AddHandler cgi-script .cgi
    AddHandler wsgi-script .wsgi

    WSGIScriptAlias ECommerce /home/vretnet9/modwsgi/env/pyramid.wsgi
    WSGIDaemonProcess root processes=5 threads=1 display-name=%{GROUP}
    WSGIProcessGroup root
    WSGIApplicationGroup %{GLOBAL} 
```

我不知道它是否真的应该调用 .htaccess 或者脚本别名是否应该与位于我的 .conf 中的相同

```
 /usr/local/apache/conf/userdata/std/1/$user/$domain/modwsgi.conf 
```

modwsgi.conf 的内容如下：

```
 WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    WSGIDaemonProcess pyramid user=vretnet9 group=vretnet9 threads=4 \
    python-path=/home/vretnet9/modwsgi/env/lib/python3.3/site-packages
    WSGIScriptAlias /ECommerce /home/vretnet9/modwsgi/env/pyramid.wsgi

    <Directory /home/vretnet9/modwsgi/env>
         WSGIProcessGroup pyramid
         Order allow,deny
         Allow from all
    </Directory> 
```

**编辑** 在 apache error_log 中，正在记录以下内容：

```
 [Mon Apr 08 02:17:22 2013] [error] Traceback (most recent call last):
    [Mon Apr 08 02:17:22 2013] [error] File 
          "/home/vretnet9/modwsgi/env/pyramid.wsgi", line 5, in <module>
    [Mon Apr 08 02:17:22 2013] [error] from pyramid.paster import get_app, 
          setup_logging
    [Mon Apr 08 02:17:22 2013] [error] File "/home/vretnet9/modwsgi/env/
          lib/python3.3/site-packages/pyramid/paster.py", line 1, in <module>
    [Mon Apr 08 02:17:22 2013] [error]     import os
    [Mon Apr 08 02:17:22 2013] [error] ImportError: No module named os 
```

**编辑#2**

这是我在 shell 中运行时的结果：

```
 [~/modwsgi/env]# python
    Python 3.3.0 (default, Mar 27 2013, 09:31:49) 
    [GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux
    Type "help", "copyright", "credits" or "license" for more information.
    >>> import os
    >>> print (os.getcwd())
    /home/vretnet9/modwsgi/env 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:32:15.040

这不是您使用 mod_wsgi + Apache 将金字塔项目投入生产的方式。我推荐阅读[官方文档](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/tutorials/modwsgi/index.html)

当您运行它时，它会在端口 8080（在 中定义）`../bin/pserve production.ini`启动一个粘贴 HTTP 服务器`production.ini`

理想情况下，您将希望在新的虚拟环境中安装金字塔，然后配置 mod_wsgi 以使用*该*python 实例。您必须在`.wsgi`项目中添加一个脚本并配置 mod_wsgi 以在 Apache 启动时运行该脚本。

**编辑**

ScriptAlias（和所有相关部分）应该在您的 modwsgi.conf 中（确保您在实际的 apache conf 中导入 modwsgi.conf）。

在该文件中，您应该定义您的 PYTHONPATH 和 PYTHONHOME（尤其是如果您有 virtualenv）以及您已经定义的其余内容（WSGIApplicationGroup、WSGIScriptAlias 等）

*重要*- 确保您的 apache 用户 (apache) 一直具有对 .wsgi 脚本的读取执行权限。这意味着即使您的 /home 目录也应该可供 apache 访问。

我建议创建一个单独的目录（例如 /opt/proj）来托管应用程序和另一个（例如 /opt/env 用于环境）。

这是我的 pyramid.conf 的样子。我有**Python 2.6**并将我的项目（只有静态的东西，如 css、图像、js 和 .wsgi 脚本）保存在 /opt/save_project 中。我的 virtualenv 是 /opt/pyra

```
WSGIPythonHome /opt/pyra
WSGIPythonPath /opt/pyra/lib/python2.6
<VirtualHost 31.1.1.22:8005>
    DocumentRoot /opt/save_project
    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    WSGIProcessGroup %{GLOBAL}
    WSGIDaemonProcess pyramid user=apache group=apache \
      python-path=/opt/pyra/lib/python2.6
    WSGIScriptAlias / /opt/save_project/pyramid.wsgi
   # Get the static and favicon.ico pages working by properly aliasing them
   Alias /favicon.ico /opt/save_project/static/images/favicon.ico
   Alias /static /opt/save_project/static
   <Directory /opt/save_project>
       AllowOverride all
       Options -MultiViews
   </Directory>
</VirtualHost> 
```

您可以查看[mod_wsgi 文档](http://code.google.com/p/modwsgi/wiki/IntegrationWithPylons)以获取更多信息

# java - Php AES ECB加密java解密不起作用

> ID：15664240
> 
> 赞同：1
> 
> 时间：2013-03-27T16:34:39.773
> 
> 标签：java, php, android, encryption, aes

我正在编写一个连接到 php web 服务的 android 应用程序。实际上有一个类似的 ios 应用程序运行良好，我正在克隆它。

在 php 和 ios 之间，它们使用 AES 加密/解密。它运作良好。但是使用 java 加密是可以的，但解密不起作用。Java 加密并且 php 可以理解，但是当 php 进行加密时，我的 java 代码还不够好。我正在写下面的代码。

任何人都可以指导我，帮助我吗？

PHP加密：

```
 echo base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128,
                                $key,
                                outputstring,
                                MCRYPT_MODE_ECB,
                                nil)); 
```

IOS解密：

```
ccStatus = CCCrypt( encryptOrDecrypt,
                   kCCAlgorithmAES128,
                   kCCOptionECBMode,
                   (const void *)[symmetricKey bytes],
                   kCCKeySizeAES256,
                   nil,
                   (const void *) [plainText bytes],
                   plainTextBufferSize,
                   (void *)bufferPtr,
                   bufferPtrSize,
                   &movedBytes
                   ); 
```

Java 解密 - 不能正常工作 - 不能正常工作意味着，使用相同的数据、相同的加密、相同的密钥我无法获得相同的输出。

```
 SecretKeySpec skey = new SecretKeySpec(key, "AES");
                Cipher cipher = Cipher.getInstance(AES/ECB/NoPadding, "BC");
                cipher.init(Cipher.DECRYPT_MODE, skey);
                result = decrypt(cipher, input); 
```

我正在寻找 java 解密的理想解决方案？欢迎所有帮助？

# php - 依赖注入和/或工厂模式

> ID：15664243
> 
> 赞同：3
> 
> 时间：2013-03-27T16:34:55.083
> 
> 标签：php, design-patterns, dependency-injection, factory

不确定我的标题是否正确，因为我什至不确定我使用的术语是否正确。

我有一个类，它的属性是一个对象。设置此属性时，必须创建对象。我的问题是如何在没有紧密耦合的情况下做到这一点？

例子：

```
class A
{
    protected $_depending;

    protected $_somePropertyObject;

    public function __construct(\Lib\Dependency $depending)
    {
        $this->_setDepending($depending);
    }

    protected function _setDepending(\Lib\Dependency $depending)
    {
        $this->_depending = $depending;
    }

    public function setSomeProperty($someProperty)
    {
        // I want to prevent this
        $this->_somePropertyObject = new \Lib\some\Object($someProperty);
    }
} 
```

我可以通过构造传递所需的对象，但还需要发生什么？

如果我正确理解工厂模式，这会发生什么变化？我还需要在某处创建对象吗？不是对象本身，而是工厂。又是紧耦合？对我来说似乎无穷无尽。然而，当重构类时，它在哪里以及如何制作类是孤立的。

如果我将 setSomeProperty 函数设置为仅接受 \Lib\some\Object 那么仍然需要由传递它的父对象创建。似乎只是改变创建位置的位置？

希望我对我要问的问题足够清楚。

提前致谢！

**编辑**我要问的是何时、何地、为什么创建的顺序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T17:20:55.810

依赖注入模式中工厂的目的是为另一个实例生成实例，而另一个实例不需要知道如何生成它。

在其核心，“工厂”只是一个对象返回器：调用时返回一个实例的东西。

这在功能更强大的语言中更容易看到。例如，在 Python 中，类是可调用的（没有`new`运算符），调用一个类会产生该类的一个实例。因此，如果类不需要参数，则类可以是它们自己的工厂。同样，任何返回实例的零参数函数都可以被视为工厂。这使得依赖注入非常清晰且没有样板。

在更严格的语言中（Java/C++/C# 静态类型的传统，或者类或函数不像 PHP 那样完全是一流的），您需要掩盖“模式”背后的依赖注入，因为[缺少“设计模式”语言特点](http://www.c2.com/cgi/wiki?AreDesignPatternsMissingLanguageFeatures)。在 PHP 5.3+ 中，您可以将闭包用作工厂，或者您可以采用 Java/C# 方式并为`FactoryInterface`每个工厂定义一个新类。

例如，在您的班级中，您可以这样做：

```
class Aprime extends A
{
    public function setSomeProperty($somePropertyFactory)
    {
        $this->_somePropertyObject = $somePropertyFactory();
    }
} 
```

在这个类中，`setSomeProperty`需要一个零参数的可调用“工厂”，您可以像这样生成它：

```
$other_dep_factory = function(){ return new SomeOtherClass(); }; 
```

或者像这样：

```
class ClassFactory {
    function __construct($classname, $args=array()) {
        $this->class = new ReflectionClass($classname);
        $this->args = $args;
    }

    function __invoke() {
        return $this->class->newInstanceArgs($this->args);
    }
}

$other_dep_factory = new ClassFactory('SomeOtherClass'); 
```

在 PHP 5.3 之前，您需要像 Java 那样做：

```
interface IObjectFactory {
    function getObject();
}

// this B-and-D interface is optional
// it has no body because PHP doesn't support
// type-hinting return values
interface ISomeOtherClassFactory {}

class SomeOtherClassFactory implements ISomeOtherClassFactory {
    function getObject() {
        return new SomeOtherClass();
    }
}

class Aprime extends A
{
    public function setSomeProperty(ISomeOtherClassFactory $somePropertyFactory)
    {
        $this->_somePropertyObject = $somePropertyFactory->getObject();
    }
}

$other_dep_factory = new SomeOtherClassFactory();
$myAprimeObject->setSomeProperty($other_dep_factory); 
```

那么什么时候使用工厂呢？每当一个对象需要创建另一个对象时。如果对象只需要*使用*另一个对象，只需传入一个实例即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:52:39.647

当您需要收集“信息”来创建存储在 $_somePropertyObject 中的对象时，我喜欢使用工厂模式。例如，假设您必须为某些属性分配值以实例化它，或者在实例化它之后立即运行几个方法。

此外，您还需要考虑以后是否需要更改继承树。如果您现在可能将 $_somePropertyObject 分配给 \Lib\some\Object，您可能会发现自己希望以后可以轻松地将其换成 \Lib\some\FancyObject。如果您使用依赖注入，您可以轻松地交换子类型。

这是一个入门： http: [//net.tutsplus.com/tutorials/php/the-whens-and-whys-for-php-design-patterns/](http://net.tutsplus.com/tutorials/php/the-whens-and-whys-for-php-design-patterns/)

另外：[https ://stackoverflow.com/a/2083455/1121827](https://stackoverflow.com/a/2083455/1121827)

# javascript - JavaScript 在第一次运行时没有在 IE 中运行

> ID：15664248
> 
> 赞同：0
> 
> 时间：2013-03-27T16:35:01.777
> 
> 标签：javascript, internet-explorer

在 IE 中有一个相当奇怪的问题。当我启动 IE 并加载页面（从本地域，我们称之为“ [http://amazing.dev/](http://amazing.dev/) ”）时，站点上的 JavaScript 不会运行。

我知道你在想什么，打开你的 JS（[http://goo.gl/FnzoW](http://goo.gl/FnzoW)）。它打开了，我知道它打开的原因是当我启动开发人员工具并重新加载页面时，JS 会运行。

这个站点中有很多 JS，所以它可以是任何东西。但是没有错误，没有警告，什么都没有。重新加载时，完美运行！

这方面的任何想法/经验都会有很大帮助！它可能只是我的机器！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:38:07.907

如果问题仅在您不启动开发人员工具时出现，则可能是对`console.log`代码中某处的调用。在您打开这些工具之前，控制台不可用。

您可以使用此代码（我不是作者）来防止崩溃：

```
if (!window.console) {
    var names = ["log", "debug", "info", "warn", "error", "assert", "dir", "dirxml",
    "group", "groupEnd", "time", "timeEnd", "count", "trace", "profile", "profileEnd"];
    window.console = {};
    for (var i = 0; i < names.length; ++i) {
        window.console[names[i]] = function() {};
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:43:02.720

问题是当调试器未打开时，在 IE 上没有控制台对象。这就是为什么打开调试器后一切正常。

只需将其添加到页面的开头，它可能会起作用。

```
if (typeof console == "undefined") {
    this.console = {log: function() {}};
} 
```

# c# - 在 C# 中添加延迟的最佳方法

> ID：15664252
> 
> 赞同：0
> 
> 时间：2013-03-27T16:35:07.440
> 
> 标签：c#, web-crawler

我目前正在构建一个网络爬虫，并希望根据请求添加延迟，这样我就不会对网络服务器造成太大影响。

添加此延迟的最合适方法是什么？

此外，对于爬虫来说，适当的延迟量是多少？我在想 0.5-1 秒。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:35:47.040

您可以使用

```
Thread.Sleep(TimeSpan.FromSeconds(1)) 
```

搜索引擎可能会使用 10-15 甚至 60 秒的更大延迟。礼貌的爬虫尊重网站在 robots.txt 中提供的“爬取延迟”。有关详细信息，请查看[http://en.wikipedia.org/wiki/Web_crawler#Politeness_policy](http://en.wikipedia.org/wiki/Web_crawler#Politeness_policy)

# c++ - 使用 clang 和 gcc 编译时代码不调用 Move 构造函数

> ID：15664254
> 
> 赞同：3
> 
> 时间：2013-03-27T16:35:12.463
> 
> 标签：c++, visual-c++, gcc, c++11, clang

因此，这在 GCC、CLANG 和 MSVC 上编译得很好，但输出不同：

```
#include <iostream>
using namespace std;

class A {
 public:
    A() {
        cout << this << " def" << endl;
    }
    A(const A&) {
        cout << this << " copy" << endl;
    }
    A(A&&) {
        cout << this << " move" << endl;
    }
    A& operator= (const A&) {
        cout << this << " copy=" << endl;
        return *this;
    }
    A& operator= (A&&) {
        cout << this << " move=" << endl;
        return *this;
    }

    ~A() {
        cout << this << " ~A" << endl;
    }
};

A f() { 
    A a;
    return a; 
}

int main(){
    A a = f();
} 
```

使用 GCC 和 CLANG 输出：

*   0xbfad67cf 定义
*   0xbfad67cf ~A

虽然 MSVC out 符合预期（C++11 标准）：

*   0039FA3B 定义
*   0039FA3B 移动
*   0039FA3B ~A

因此，使用 MSVC 编译的代码调用移动构造函数，而使用 GCC 和 CLANG 编译的代码不会调用移动构造函数。我还尝试禁用优化，但仍然得到相同的输出。更奇怪的是，当我将 f() 更改为返回 A() 时，即使在 MSVC 上也不会调用移动构造函数。

**编译器版本：**

*   **gcc：**版本 4.7.2 (GCC)
*   **clang：**版本 3.2（标签/RELEASE_32/final）目标：i386-pc-linux-gnu

**平台：** Linux/ArchLinux

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T16:51:52.490

那就是返回值优化

[http://en.wikipedia.org/wiki/Return_value_optimization](http://en.wikipedia.org/wiki/Return_value_optimization)

编译器优化的返回对象不被复制而不是被删除

# codeigniter - 如何通过codeigniter在javascript文件上描述图像文件？

> ID：15664256
> 
> 赞同：2
> 
> 时间：2013-03-27T16:35:24.457
> 
> 标签：codeigniter

我是使用codeigniter的新手。我使用codeigniter 2.X。我对codeigniter的基本课程有一些疑问。

1.  我们外部**css** / **js** / **image** /another 的文件夹位置的最佳建议是什么？现在，我将 js/css/ 或另一个文件放在根目录下，即`site url/css`
2.  如何在 css 和 javascript 文件上描述图像的路径？在 php 上它很容易使用`<?php echo base_url(); ?>`，但在 css 和 javascript 中如何？

这两个问题，我都需要最好的和经验丰富的答案，因为答案将是我使用 codeigniter 的知识库。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:42:09.240

将您的 css/js/image 存储在 assets 文件夹中或根据需要存储

```
/www
/code_igniter
    /application
    /assets
        +img
        +css
        +js
    /controllers
    /system 
```

然后在您的视图中使用它作为包含它

```
<link type="text/css" rel="stylesheet" href='<?php echo base_url()?>assets/css/mystyle.css'>
<script type="text/javascript" src='<?php echo base_url()?>assets/js/myjs.js'></script> 
```

在您的`.htacess`文件中添加此代码

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

将`.htaccess`文件放在应用程序文件夹之外

# hibernate - 使用注释的休眠映射关联@ManytoOne

> ID：15664257
> 
> 赞同：0
> 
> 时间：2013-03-27T16:35:28.353
> 
> 标签：hibernate, jakarta-ee, associations

嗨，我有两个实体 Spectacle 和 Representation，Spectacle 包含一个 Representation 列表，所以对于表格，我制作了一个 table spectacle 和一个包含外键 spectacle id 的 table Representation。这是我在实体文件表示中所做的

```
 package ca.etsmtl.gti525.entity.presentation;

    import ca.etsmtl.gti525.commun.CommunService;
    import java.io.Serializable;
    import java.util.Date;
    import javax.persistence.Column;
    import javax.persistence.Entity;
    import javax.persistence.GeneratedValue;
    import javax.persistence.GenerationType;

    import javax.persistence.Id;
    import javax.persistence.ManyToOne;
    import javax.persistence.OneToOne;
    import javax.persistence.Table;
    import javax.persistence.Temporal;
    import javax.persistence.TemporalType;

    /**
     * Remarque : peu importe la date et l'heur une représantation ce fait que dans une seul salle a la fois. (pour un même spectacle)
     * @author REDOUANE
     *
     */
    @Entity
    @Table(name = "SHOW_REPRESENTATION")
    public class Representation implements Serializable {
        private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    private Long id;
    @Column(name = "DATE_DEBUT")
    @Temporal(TemporalType.DATE)
    private Date dateDebut;
//    @Column(name = "HEURE_DEBUT")
//    @Temporal(TemporalType.TIME)
//    private Calendar heureDebut;

    /*@Column(name = "DATE_FIN")
    @Temporal(TemporalType.DATE)
    private Date dateFin;*/
    /*@Column(name = "IS_ANNULATION")
    private Boolean isAnnulation;*/
    @Column(name = "NB_BILLETS_DISPO")
    private Integer nbBilletsDispo;
    @Column(name = "QTE_SELECTED")
    private Integer QTE;
    @Column(name = "PRIX")
    private Float prix;
//    private Map <Integer, Integer> optionsQte = new HashMap<Integer, Integer>();
  /*  private List<Integer> optionsQte2 = new ArrayList<Integer>();

    public List<Integer> getOptionsQte2() {
        return optionsQte2;
    }

    public void setOptionsQte2(List<Integer> optionsQte2) {
        this.optionsQte2 = optionsQte2;
    }*/
//
//    public Calendar getHeureDebut() {
//        return heureDebut;
//    }
//
//    public void setHeureDebut(Calendar heureDebut) {
//        this.heureDebut = heureDebut;
//    }

    @OneToOne
    private Salle salle;

    @ManyToOne
    private Spectacle spectacle;

    @OneToOne(mappedBy = "representation")
    private Billet billet;

    public Representation(){

    }
    public Integer getQTE() {
        return QTE;
    }

    public void setQTE(Integer QTE) {
        this.QTE = QTE;
    }

    public Billet getBillet() {
        return billet;
    }

    public void setBillet(Billet billet) {
        this.billet = billet;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Spectacle getSpectacle() {
        return spectacle;
    }

    public void setSpectacle(Spectacle spectacle) {
        this.spectacle = spectacle;
    }

    public Integer getNbBilletsDispo() {
        return nbBilletsDispo;
    }

    public void setNbBilletsDispo(Integer nbBilletsDispo) {
        this.nbBilletsDispo = nbBilletsDispo;

        //int min_ticket_allowed = nbBilletsDispo;
       // if (nbBilletsDispo >= 6)
        //{
        //min_ticket_allowed = 6;
       // }
       // optionsQte2.clear();
       //         for (int i=0; i< min_ticket_allowed +1; i++) {
        //    optionsQte2.add(i);
       // }

    }

    public Float getPrix() {
        return prix;
    }
    public void setPrix(Float prix) {
        this.prix = prix;
    }

    public Date getDateDebut() {
        return dateDebut;
    }

    public void setDateDebut(Date dateDebut) {
        this.dateDebut = dateDebut;
    }

    /*public Date getDateFin() {
        return dateFin;
    }

    public void setDateFin(Date dateFin) {
        this.dateFin = dateFin;
    }*/

    /*public Boolean getIsAnnulation() {
        return isAnnulation;
    }

    public void setIsAnnulation(Boolean isAnnulation) {
        this.isAnnulation = isAnnulation;
    }*/

    public Salle getSalle() {
        return salle;
    }

    public void setSalle(Salle salle) {
        this.salle = salle;
    }
    public void verfierDispo(){

        if(this.nbBilletsDispo<this.QTE){

        }
            CommunService.addWarn("ATTENTION !", "Le nombre de billets disponible est insuffisant");
    }
} 
```

注释 @ManyToOne 是否足够？我尝试设置按字段映射以指示 Spectacle 的 ID，但这在 @ManyToOne 关联中是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:59:06.043

是的 manyToOne 是可能的。默认情况下，它采用字段的列名

@ManyToOne 私人奇观奇观；

将存储在列名“spectacle”中

尽管使用 JoinColumn 注释提供列名有时很有用。@ManyToOne @JoinColumn(name = "my_spec_col")

请享用 ：）

# windows-8 - 在 VB6 表单中显示动画 GIF 需要具有 UAC 的管理员权限

> ID：15664259
> 
> 赞同：0
> 
> 时间：2013-03-27T16:35:34.100
> 
> 标签：windows-8, vb6, uac, animated-gif

我添加了一个 activeX 控件，它允许我在 Visual Basic 6 表单上显示动画 gif，以显示 ajax 样式进度微调器。当我在 Windows 8 Pro x64 上运行此应用程序时，不会出现微调器图像。如果我以管理员身份运行我的应用程序，它就会出现。我确实有一个作为调用者执行的程序的清单，我不想要求这个应用程序具有管理员权限。

关于为什么动画 gif activeX 控件需要管理员权限以及是否有更好的方法来显示类似简单微调器动画 gif 的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:39:31.507

谢谢 Euro Micelli - Process Monitor 是个好主意。这是一个 UAC 冲突，我可以通过修改 ActiveX 控件的源来解决，我发现我在使用的组件中拥有该控件。该组件被编程为使用 App.Path，当安装在 Windows System32 文件夹中时，它显然不起作用。我将它编码为使用 Windows Temp 文件夹，它现在可以工作了。

# oracle - 使用集合作为表定义的一部分

> ID：15664264
> 
> 赞同：2
> 
> 时间：2013-03-27T16:35:37.527
> 
> 标签：oracle, database-design, plsql, user-defined-types

我通常对收藏本身的全部内容了解很多，但我没有得到一点。为什么要在数据库中存储集合（作为嵌套表和可变数组）？

我发现通常在编程语言中使用数组很有用，但我不明白它们在成为表格的一部分时有什么用处。难道一切都不能作为两个实体之间的简单关系来实现吗？

为什么/我应该在哪里使用嵌套表或数组作为表的一部分，它们有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:06:20.400

作为长期废弃的品牌重塑活动的一部分，Oracle 开始支持数据库中的对象。Oracle8 被定位为一个 ORDBMS 而不仅仅是一个 RDBMS。然后拉里发现了互联网，他们将 Java 放入数据库中，并谨慎地将 Oracle8i 重新命名为 RDBMS。

尽管如此，SQL 类型仍然存在。他们是一件好事。正如您所说，数组是一种出色的编程设备，在 PL/SQL 中非常有用。在继承和多态中，我们可以构建可爱的 API。

但是，对于您的关键点：

> “我不明白为什么要以这种方式将它们存储在数据库中”

正是如此。几乎没有充分的理由在数据库表定义中使用 SQL 类型。从理论上讲，它们可以用来定义*域类型*，但是语法太笨重，无法让它发挥作用。这对于将列定义为嵌套表来说是双倍的。这使得难以实施规范化和关系完整性。

我遇到了几个非常小众的案例，但它们不是核心数据库表。相反，它们是诸如日志表之类的实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:49:49.073

尽管大多数表操作都可以使用连接来执行，但有时可变数组和嵌套表变得非常有用。我们曾经做过的一种情况是，将逗号分隔的字符串从 jdbc 发送到 pl/sql，然后使用函数将字符串转换为 varray，然后将其用于 IN 子句中的进一步操作。在这一点上，可变数组变得有用了。

这个链接提供了很好的解释...... [http://www.indicthreads.com/9429/plsql-collections-associative-arrays-nested-tables-varray-collection-methods/](http://www.indicthreads.com/9429/plsql-collections-associative-arrays-nested-tables-varray-collection-methods/)

请享用 ：）

# .htaccess - 虚拟子域加上附加参数

> ID：15664265
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:35:38.690
> 
> 标签：.htaccess, mod-rewrite

我有以下规则可以正常工作。它只是让我能够制作虚拟子域：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([^.]+)\.domain\.com$ [NC]
RewriteRule ^(.*)$ /projects/index.php?project=%2 [L,QSA] 
```

但是，当它`project.domain.com`完全没问题时，我需要掩盖`project.domain.com/first/`to`domain.com/index.php?project=%2&a=first`和`project.domain.com/first/second/`to `domain.com/index.php?project=%2&a=first&b=second`。

我已经尝试了几件事，但都没有奏效。我可以列出它们，但所有描述都会有点长。如果有人可以提供帮助，那就太好了，否则请发表评论以用我已经尝试过的任何内容及其结果来更新我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:53:02.733

你可以试试这个：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([^.]+)\.domain\.com$ [NC]
RewriteCond %{REQUEST_URI} !index\.php  [NC]
RewriteRule ^([^/]+)/?([^/]+)?/? /projects/index.php?project=%2&a=$1&b=$2  [L,QSA,NC] 
```

### 选项

如果重定向是：

`http://domain.com/index.php?project=%2&a=first&b=second`

与上一个示例一样，将之前的重写规则替换为以下规则：

```
RewriteRule ^([^/]+)/?([^/]+)?/?  http://domain.com/index.php?project=%2&a=$1&b=$2 [L,QSA,NC] 
```

# sql - SQL Server 2012 -> CTRL F - 快速替换正则表达式

> ID：15664266
> 
> 赞同：1
> 
> 时间：2013-03-27T16:35:43.057
> 
> 标签：sql, sql-server-2012

使用 SQL Server 2012 II 有一个使用数字作为我的 where 子句的查询，例如：

```
Select *
from abcTable
where code IN (1, 2, 20, 40, 50) 
```

想象一下，标准中有很多`IN`，不仅仅是我的例子中的 5 个项目。现在当我运行时，我的列`CODE`是`abcTable`一个 varchar，它抱怨转换。很公平。

有没有办法快速查找和替换（`CTRL`+ `F`）查找所有数字并在数字之间添加双码？

我尝试使用正则表达式，通配符一切，但它不起作用。

最后，我必须手动进行编辑：

```
where code IN ('1', '2', '20', '40', '50') 
```

您知道如何在这种情况下最好地使用查找和替换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:45:46.073

真的没有什么可以做的。

我想一个快速而肮脏的方法是`,`用`', '`

这会给你：

`where code IN (1', '2', '20', '40', '50)`

因此，您只需将第一个和最后一个添加`'`到您的查询中即可：

`where code IN ('1', '2', '20', '40', '50')`

# android - 在我的应用程序中启动另一个应用程序

> ID：15664269
> 
> 赞同：0
> 
> 时间：2013-03-27T16:35:46.927
> 
> 标签：android, android-intent

我想启动一个显示在我的应用程序中的应用程序。目前我只是在我的上启动另一个应用程序

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage(app.getAppID());
startActivity(LaunchIntent); 
```

这很好用，但我想让用户知道，我的应用程序仍在后台。以彩色框架为例。我想在 HTML 中的 iframe 之类的片段中加载新应用程序，但找不到方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:36:19.020

这在 Android 上是不可能的，抱歉。

每个应用程序都在自己的进程中运行，无法像 iframe 那样在另一个进程中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:38:47.543

我认为您将应用程序与活动混淆了。

您可以在应用程序中运行共享活动，但不能在整个应用程序中运行。所以这在很大程度上取决于你想要做什么。

# css - 为什么这个 div 的计算高度大于它的内容？

> ID：15664275
> 
> 赞同：3
> 
> 时间：2013-03-27T16:35:58.293
> 
> 标签：css

我是一名 CSS 新手，在 WordPress 网站上工作，使用[菜单栏插件](http://wordpress.org/extend/plugins/menubar/)进行导航。我已经能够对我的 CSS 进行颜色方案、居中和字体的更改，但我一生都无法弄清楚为什么围绕`<ul>`菜单的 div 在底部有额外的 6 个像素。我尝试在几个地方将边距设置为 0，更改了`line-height`...但没有任何效果。

![在此处输入图像描述](../Images/7b989ad5b30fe75ffe378872a1697ad6.png)

[您可以在此处](http://classaction.halunenlaw.net)查看该站点。我使用的主题是 21 岁的孩子。这是（我认为）重要的CSS：

```
#access div {
    margin: 0 0 0 0;
}
#access {
    background: #773736; 
    clear: both;
    display: block;
    margin: 0 auto; 
    width: 100%;
    text-align: center;
}
#access ul {
    font-size: 13px;
    list-style: none;
    margin: 0 0 0 -0.8125em;
    padding-left: 0;
    display: inline-block;
    font-weight: normal;
}
#access li {
    float: left;
    position: relative;
    text-align: left;
}
#access a {
    color: #eee;
    display: inline-block;
    line-height: 3.333em;
    padding: 0 1.2125em;
    text-decoration: none;
    font-weight: normal;
} 
```

我该怎么做才能摆脱这个额外的高度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T16:44:15.153

原来这是一个`line-height`问题：

```
#access {
background: #773736;
clear: both;
display: block;
margin: 0 auto;
width: 100%;
text-align: center;
line-height: 12px;/*this fixes it*/
} 
```

还应该指出它从 1.625 的主体继承了行高（这里应该是单位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:42:27.397

在黑暗中刺...

```
#access a {
   color: #eee;
   display: inline-block;
   line-height: 3.333em; <-- this might be causing it
   padding: 0 1.2125em;
   text-decoration: none;
   font-weight: normal;
} 
```

# c# - 从模型 MVC 4 动态加载列表

> ID：15664285
> 
> 赞同：1
> 
> 时间：2013-03-27T16:36:46.303
> 
> 标签：c#, javascript, html, ajax, asp.net-mvc

所以我在 ASP.net MVC 设计中还是很新的。我面临一个小问题，可能已经得到解答，但似乎没有找到适合我目的的答案。这是正在发生的事情：

假设我有一个带有 2 个链接的模型：类别和项目，它是一对多的关系。我想要做的是生成一个包含 Category.Title 的列表（我已经完成，使用下面的代码）并单击每个列表项将生成该类别的所有 Item.Title 值的列表。html的基本思想是：

```
<div id="cat"><!--float = left-->
    <ul>
        <li>List<li>
    </ul>
</div>

<div id="item"> <!--float = right -->
    <ul>
        <li>List<li>
    </ul>
</div> 
```

到目前为止，这是所有内容的链接方式：

```
public ActionResult Equipment()
{

    ViewBag.Cat= getCat(1); // Will return a list of categories of ID 1
    return View();
} 
```

至于观点：

```
@{ List<X.Models.Category> catX = ViewBag.Cat; }

BODY:

<div id="pl_categories">
    <ul id="pl_ec_ul">

        @foreach (X.Models.Category item in catX)
        {
            <li id="pl_ec_li">
                <div id="pl_ec_liItem">
                    @item.catTitle
                </div>
            </li>
        }

    </ul>
</div>

<div id="pl_values">

    <ul id="pl_ev_ul">
        <li id="pl_ev_li">
            <div id="pl_ev_liItem">
                ???
            </div>
        </li>
    </ul> 
```

我看过很多例子，但它们都涉及下拉菜单或其他什么。这是我要完成的工作的快速清单：

1.  在页面 laod 上，默认选择的类别将是列表中的第一个。如果列表为空，则显示一个简单的“无类别”。编辑：如果类别为空，它将显示类别中没有项目。
2.  单击类别中的项目时，它将在 pl_values 下显示该类别的项目。

我试图让它尽可能小，但我需要考虑更多的因素。但是，如果我能解决这个问题，我肯定会弄清楚其余的。但是，如果有不清楚的地方，请告诉我，我可以尝试澄清。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:42:08.703

对于您的项目 1，您可以尝试这样的事情（假设您可以使用`jQuery`）：

```
$(document).ready(function() {

    var count = $("#pl_ec_ul li").length;

    if(count <= 0) {
        $("#pl_categories").html("<p>No Categories</p>");
    }
}); 
```

# spring - Spring 应用程序未得到保护

> ID：15664286
> 
> 赞同：0
> 
> 时间：2013-03-27T16:36:47.560
> 
> 标签：spring, spring-security

***嗨，我正在尝试保护我的 Spring MVC 应用程序。问题是 myurl/myapp /viewAllPersons.do 没有得到保护。

在此先感谢您的帮助。***

这是我的配置

```
Here is my web.xml
---------------------

<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
          version="2.5">

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
      <filter-name>springSecurityFilterChain</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping>    

    <!--  we've already configured Spring-MVC for you - nothing to do here! -->         
    <servlet>
       <servlet-name>Dispatcher</servlet-name>
       <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
       <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
       <servlet-name>Dispatcher</servlet-name>
       <url-pattern>*.do</url-pattern>
    </servlet-mapping>

</web-app> 
```

**这是我的 Dispatcher-servlet.xml** ----------------------------

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"    

    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

        <!--  Message bundle -->
        <bean id="messageSource" 
            class="org.springframework.context.support.ResourceBundleMessageSource">
           <property name="basename" value="messages"/>
        </bean>

        <import resource="/application.xml"/>

        <import resource="/spring-security.xml"/>

        <bean class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
            <property name="basename" value="views"/>
            <property name="order" value="1"/>
        </bean>

        <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
            <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
            <property name="prefix" value="/"/>
            <property name="suffix" value=".jsp"/>
            <property name="order" value="2"/>
        </bean>

        <context:component-scan base-package="com.bookme.control"/>

        <mvc:annotation-driven/>

</beans>

Here is my spring-security.xml
-------------------------
<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http auto-config='true' use-expressions="true">
        <intercept-url pattern="/index.jsp" access="permitAll" />
        <intercept-url pattern="/secure/extreme/**" access="hasRole('administrator')" />    
        <intercept-url pattern="/secure/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <intercept-url pattern="/viewAllPersons" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <intercept-url pattern="/viewCalendar" access="hasAnyRole('administrator','staff')" />
        <intercept-url pattern="/**" access="denyAll" />
        <form-login />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="sanju" password="sanju" authorities="staff, user" />
                <user name="admin" password="admin" authorities="administrator" />
                <user name="peter" password="opal" authorities="user" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:05:52.263

添加以下内容解决了问题

```
<context-param>
        <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/spring-security.xml
        </param-value>
    </context-param> 
```

# highcharts - Highcharts - IE 中的格式化程序问题

> ID：15664288
> 
> 赞同：0
> 
> 时间：2013-03-27T16:36:51.063
> 
> 标签：highcharts

我无法让我的 yaxis 中的格式化程序函数在 IE 7 和 8 中工作。如果值大于零，它用于更改颜色。在其他浏览器和 IE 9 中运行良好。

我使用格式化程序来更改工具提示的颜色，并且在 IE 中有效，但 Y 轴中的以下内容无效。有任何想法吗？

```
yAxis: {
labels: {
        formatter: function() {
    if(this.value > 0 ){
        return  '<span style="fill: #4572a7;font-weight:800;">' + '$' + this.value + '</span>';
    }
    else {
        return  '<span style="fill: red;font-weight:800;">' + '-$' + Math.abs(this.value) + '</span>'
    }
    }
    },
    alternateGridColor: '#F5F5F5',
    minorTickInterval: 'auto',
    lineWidth: 1,
    tickWidth: 1
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:51:56.380

我相信这是因为 highcharts 在 IE7/8 中使用 VML，因为 svg 不受支持，而 fill CSS 属性是 svg 样式且不受支持。尝试使用颜色而不是填充。它应该和每个人都玩得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:12:32.697

我建议将 useHTML 设置为 true，并用颜色 css 声明替换填充：

```
yAxis: {
        labels: {
            useHTML:true,
            formatter: function () {
                if (this.value > 0) {
                    return '<span style="color: #4572a7;font-weight:800;">' + '$' + this.value + '</span>';
                } else {
                    return '<span style="color: red;font-weight:800;">' + '-$' + Math.abs(this.value) + '</span>'
                }
            }
        },
        alternateGridColor: '#F5F5F5',
        minorTickInterval: 'auto',
        lineWidth: 1,
        tickWidth: 1
    }, 
```

# php - 选择动态创建使用 php 变量 昨天我学习了如何使用 javascript 动态创建选择选项：var dateformat = document.getElementById('dateformat'); dateformat.options[dateformat.options.lengt

> ID：15664289
> 
> 赞同：0
> 
> 时间：2013-03-27T16:36:52.830
> 
> 标签：php, javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:44:53.577

您可以重写代码以使其更优雅：

```
var dateformat = document.getElementById("dateformat"),
    options = [{
        text: month + "/" + day + "/" + fullyear,
        value: "M/d/yyyy"
    }, {
        text: monthwz + "/" + daywz + "/" + fullyear,
        value: "MM/dd/yyyy"
    }, {
        text: day + "/" + month + "/" + fullyear,
        value: "d/M/yyyy"
    }];

for (var i = 0, len = options.length; i < len; i++) {
    var option = options[i],
        element = new Option(option.text, option.value);

    dateformat.options[dateformat.options.length] = element;
}

// one way to set the selected value:
dateformat.value = <?php print json_encode($value); ?>; 
```

**演示：http:** [//jsfiddle.net/vPerj/](http://jsfiddle.net/vPerj/)

# c - 进程和线程之间的选择，以及进程间（线程）通信

> ID：15664290
> 
> 赞同：0
> 
> 时间：2013-03-27T16:37:00.530
> 
> 标签：c, linux, multithreading, process, network-programming

我想编写一个简单的 UDP 服务器程序，它使用 recvfrom() 接收每个接收到的数据包的数据包，程序将处理它我的原始源代码如下：

```
for(;;){
n = recvfrom(sockfd, mesg, 10000, 0 ptr_sockaddr, &len);
process(mesg);
} 
```

但是这样一来，如果`process()`函数需要的时间有点长，就会影响`recvfrom()`. 所以我需要创建一个新进程或新线程，

1.  哪个更适合这种情况？线程还是进程？为什么？
2.  如何处理进程间或线程间通信，我的意思是我需要将字符串`mesg`传递给新进程（或线程）。如果数据包接收比处理快得多，我应该使用什么样的缓冲方法？

如果能提供一些源代码片段就更好了！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:45:44.963

我建议有一个循环的线程`recvfrom`。当它接收到一个数据报时，让它将该数据报放在一个队列中。然后，您可以拥有一个线程池，从队列中提取数据报并对其进行处理。

通常的解决方案是拥有一个互斥锁和一个保护队列的条件变量。将项目添加到队列中的工作方式如下：

1.  获取互斥锁。

2.  将项目添加到队列中。

3.  给条件变量发信号。

4.  释放互斥锁。

池中的线程这样做：

1.  获取互斥锁。

2.  如果队列中有项目，请跳至步骤 5。

3.  阻止释放互斥锁的条件变量。

4.  转到第 2 步。

5.  从队列中删除项目。

6.  释放互斥锁。

7.  处理我们从队列中删除的项目。

8.  转到步骤 1。

不过，您可能希望防止队列无限增长。接收数据报的速度总是可能比处理它们的速度更快，并且让队列的内存使用量不断增长并不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:56:10.100

过程。然后一个编程错误会破坏一个连接，而不是整个服务器。

对于通信，您可以在父进程和所有子进程之间的 fork() 之前建立一个共享内存区域并同步。使用互斥体/信号量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:45:40.673

使用线程更简单，因为线程可以看到其父进程的内存。因此它可以访问变量和内存，读取它们并更改它们。

使用进程将不允许您直接访问父进程内存，您必须使用其他方式更改父进程的变量和内存，如共享内存（mmap）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:53:44.913

声明一些结构来包含数据。马洛克一个。在消息中阅读。将 *struct 排队并立即 malloc（或 depool），另一个用于下一条消息。在消费者处理后释放或重新池化 *struct。

您可以通过以下任一方式进行流量控制：

1) 使用有界阻塞队列，处理后释放消费者端的*struct。

2) 使用两个无界阻塞队列 - 一个预填充 *struct 作为池，另一个用于线程之间的通信。当 recvFrom 线程需要一个 *struct 时，将其从池中弹出。当消费者处理完一个 *struct 后，将其推回池中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T12:13:51.697

如果函数 process() 没有向父级返回任何内容，则为每条消息创建一个进程要容易得多。您需要做的就是添加 if (fork()<=0) return; 在 process() 的开头，您无需担心覆盖 mesg 和 ptr_sockaddr。

# mysql - brew install mysql 在山狮上遵循此 SO 失败

> ID：15664299
> 
> 赞同：1
> 
> 时间：2013-03-27T16:37:22.613
> 
> 标签：mysql, macos, homebrew

我遵循了这个答案；[在 mac os 上冲泡安装 mysql](https://stackoverflow.com/questions/4359131/brew-install-mysql-on-mac-os)

在输入后的第 3 步，`mysql.server start`我收到以下错误；

`Starting MySQL .. ERROR! The server quit without updating PID file (/usr/local/var/mysql/Oubliette.local.pid).`

我不知所措..我已经尝试了在网上找到的几十种不同的建议，但我似乎无法让它发挥作用..

请任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:03:32.213

当您使用 brew 安装 mysql 时，它将为您提供一些正确安装的说明。我不记得那些指令是什么，但你可以通过命令`brew info mysql`或在[这篇](https://stackoverflow.com/questions/4963171/mysql-server-startup-error-the-server-quit-without-updating-pid-file)文章中找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:10:51.993

好的，所以我发现了问题.. 显然我有一个旧的 mysql.sock 文件导致启动时发生冲突.. 删除那个旧的 .sock 文件删除了这个问题..

# lithium - Lithium Validator 不处理数组？

> ID：15664300
> 
> 赞同：2
> 
> 时间：2013-03-27T16:37:27.483
> 
> 标签：lithium

我似乎无法正确验证数组：在我的示例中，每个音乐家都必须至少拥有一种乐器（$musician->instruments 是乐器数组）。我尝试通过以下方式设置验证规则，但在任何情况下（包括当数组至少有一个值时）它们都不能验证。

一种

```
public $validates = array(
    'name' => 'Required',
    'instruments' => 'Required'
); 
```

乙

```
public $validates = array(
    'name' => 'Required',
    'instruments' => array(
        array(
            'notEmpty',
            'message' => 'Required'
        )
    )
); 
```

甚至 C 也无法验证

```
Validator::add('hasAtLeastOne', function($value) {
    return true;
});

...

public $validates = array(
    'name' => 'Required',
    'instruments' => array(
        array(
            'hasAtLeastOne',
            'message' => 'Required'
        )
    )
); 
```

你如何设置它，以便如果验证器在数组为空时失败，并且在 count($musician->instruments) >= 1 时通过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:45:23.500

锂文档：

```
`notEmpty`: Checks that a string contains at least one non-whitespace character. 
```

当您要验证数组时，该规则不适用于您的情况。

第三个示例 desont' 工作是因为您正在测试数组是否存在，而不是它是否包含任何元素。

试试这个，它应该工作：

```
Validator::add('hasAtLeastOne', function($data) {
    return count($data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T17:12:47.260

This checks for the presence of the first instrument in the array, which implies that there is at least one.

```
public $validates = array(
    'name' => 'Required',
    'instruments.0' => 'Required',
); 
```

This will not associate the error with the 'instruments' field, so to make it play nice with the form, it needs to be copied over:

```
$errors = $binding->errors();
if ($errors['instruments.0']) {
    $errors['instruments'] = $errors['instruments.0'];
    unset($errors['instruments.0']);
    $binding->errors($errors);
} 
```

This was unobvious and not intuitive for me, but it seems to be the most "built-in" way of dealing with validating arrays.

# sql - 具有最小值和依赖列的 SQL/Linq GroupBy

> ID：15664301
> 
> 赞同：1
> 
> 时间：2013-03-27T16:37:27.903
> 
> 标签：sql, linq, tsql

我有一个包含这些示例行的表：

```
优惠券ID ShopID ShopLongitude ShopLatitude
365 1881 55,5574105 9,9613295
365 23550 55,5510846 9,9936818
365 33550 55,6220936 10,0663895
365 33551 55,5573436 9,9611765
366 1881 55,5574105 9,9613295
366 23550 55,5510846 9,9936818
367 1881 55,5574105 9,9613295
533 1881 55,5574105 9,9613295
533 23550 55,5510846 9,9936818
533 33550 55,6220936 10,0663895
533 33551 55,5573436 9,9611765
354 1881 55,5574105 9,9613295
354 23550 55.5510846 9,9936818
354 33550 55,6220936 10,0663895
354 33551 55,5573436 9,9611765

```

因此，我希望每个 CouponID 都有最近的 ShopID

我已经有一个查询：

```
SELECT CouponID, MIN (dbo.DistanceBetween (53.54613,9.98537,ShopLatitude,ShopLongitude)) as distance
FROM Table
GROUP BY CouponID
ORDER BY CouponID, distance ASC 
```

它为每个优惠券输出 CouponID 和到 ShopID 的最小距离：

```
优惠券ID距离
354 0,778524633472375
365 0,778524633472375
366 0,778524633472375
367 2,02548179145764

```

在 LINQ 中，语句如下所示：

```
var coupon = (from c in dbContext.table
                      group c by c.CouponID into cgrp
                      select new
                      {
                        CouponID = cgrp.Key,
                        Distance = cgrp.Min(c => DistanceBetween(latitude, longitude, c.ShopLatitude, c.ShopLongitude))
                      })
                      .OrderBy(c => c.CouponID).ThenBy(c => DistanceBetween(latitude, longitude, c.ShopLatitude, c.ShopLongitude)); 
```

我怎样才能从查询和 Linq 语句中获取最小距离的相关 ShopID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:34:41.900

```
SELECT c.CouponID, c.ShopID, nearest.distance
FROM
Coupons C JOIN
(
    SELECT CouponID, MIN (dbo.DistanceBetween (53.54613,9.98537,ShopLat,ShopLon)) as distance
    FROM Coupons
    GROUP BY CouponID   
) nearest on c.CouponID = nearest.CouponID
          AND dbo.DistanceBetween (53.54613,9.98537,ShopLat,ShopLon) = nearest.distance
ORDER BY CouponID, distance ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:58:00.377

只需修改您的 sql 查询以执行您想要的分组和加入。

创建一个表格来保存距离，然后选择 couponid 和 shopid 匹配的最小值。

# ruby-on-rails - Rails 接受_nested_attributes_for。使用reject_if 通过使用父对象的属性来拒绝对象

> ID：15664306
> 
> 赞同：2
> 
> 时间：2013-03-27T16:37:48.610
> 
> 标签：ruby-on-rails, ruby

我在轨道上有两个模型。首先是患者模型

```
class Patient

attr_accessible :name, :age, :sex, :female_attributes
has_one :female, dependent => :destroy
accepts_nested_attributes_for :female, allow_destroy => true

end 
```

第二个模型为女性患者提供额外信息

```
class Female
belongs_to :patient
attr_accessible :patiend_id, :pregrnant_now: :childbirths
end 
```

注意：我没有创建数据库架构，也无法更改它。

所以我的问题是：如何通过检查患者对象中的 :sex 属性来拒绝将女性对象保存在数据库中？

我试过

```
reject_if => lambda { |a| a['sex'].to_i == 0 ) } 
```

但它没有用。（性别是一个整数，男性为 0，女性为 1）

有什么想法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-11T23:45:23.063

我知道这很旧，但我刚刚遇到了同样的问题。您可以`reject_if`在患者模型中使用和传递符号。

```
class Patient

  attr_accessible :name, :age, :sex, :female_attributes
  has_one :female, dependent => :destroy
  accepts_nested_attributes_for :female,
    reject_if: :female_patient?, 
    allow_destroy => true

  def female_patient?
    self.sex.to_i == 1
  end
end 
```

# cocoa - Apple 文档图表约定

> ID：15664307
> 
> 赞同：0
> 
> 时间：2013-03-27T16:37:57.700
> 
> 标签：cocoa, documentation

我正在阅读 Apple 的文档和 API 参考。我在哪里可以阅读文档中用于绘制对象图的图表约定？图表示例： ![图表](../Images/ff1d0498a02d20a12f58a49d968379ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:13:52.803

如果这是一个正式的约定，我会感到惊讶——该图只是说明了各种（模型、控制器和视图）**对象****之间的关系**。

 **关系的种类由标签描述。

不太清楚你的问题的背景是什么？
您想编写类似于 Apple 的文档吗？？**

# powershell-3.0 - 将用户数据移动到另一个磁盘后的powershell波浪号/桌面

> ID：15664311
> 
> 赞同：1
> 
> 时间：2013-03-27T16:38:10.000
> 
> 标签：powershell-3.0

我的用户帐户文件已移动到它自己的磁盘（即 D:\foo），我使用了推荐的做法，即通过使用 Windows 资源管理器中的属性/位置功能来移动桌面等特殊目录。现在在powershell中，找不到~/Desktop、~/Document等。

我认为重新映射波浪号可以工作，但我找不到如何做到这一点，无论如何，我不确定这是否是最佳做法。

Powershell 大师，你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:32:26.363

感谢您的回答。事后看来，我并不清楚我的意思是这个问题是在交互式设置的上下文中，例如当你在做诸如“cd ~/Desktop”或“cp ~/Desktop/foo.txt”之类的事情时。在 Powershell 窗口中。我认为收到的关于环境变量的答案（谢谢！）更适合 Powershell 脚本（即 foo.ps1）。

无论如何，我在这篇文章中找到了答案，并将这两个衬垫添加到我的启动脚本中。现在 "cd ~/Desktop" 转到 D:\foo\Desktop

[http://www.vistax64.com/powershell/31790-override-filesystem-providers-treatment-tilde.html](http://www.vistax64.com/powershell/31790-override-filesystem-providers-treatment-tilde.html)

```
$provider = get-psprovider filesystem
$provider.Home = 'D:\foo' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:47:00.837

我喜欢你的回答，hlo，但我不喜欢用不必要的变量污染我的个人资料。我将其简化为我的个人资料：

```
(get-psprovider filesystem).Home = "C:\Users\fez" 
```

现在，如果我能弄清楚为什么`~`并且`$HOME`不解决与和相同的`$env:home`位置`%HOME%`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T17:54:31.647

默认情况下，PowerShell 配置为将“~”解析为您的用户配置文件文件夹。通常，这是“c:\users\”。

但是，如果您在机器或环境中运行，其 home/user-profile 文件夹已移动到“c:\users...”以外的其他位置，则 PowerShell 可能无法找到用户配置文件文件夹.

将您的用户配置文件文件夹移动到不同的位置可能会破坏许多应用程序，事实上，在 Win8.1 中，除了导致 PowerShell 无法正常工作外，还被认为是导致大量应用程序崩溃、系统不稳定等的原因.

Ed Bott 最近就这个问题撰写了微软最新更新的官方指南：

**[不要将您的 Windows 用户配置文件文件夹移动到另一个驱动器](http://www.zdnet.com/dont-move-your-windows-user-profiles-folder-to-another-drive-7000022142/)**

您可以使用 Fez & HLO 给出的答案告诉 PowerShell 它应该在哪里查找您的主文件夹：

```
(get-psprovider filesystem).Home = "C:\Users\<user>" 
```

您可能需要将上面的命令添加到您的默认 PowerShell 用户配置文件中，这样您就不必继续输入上面的行：

```
C:\Users\<user>\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1 
```

如果您想移动文档、照片等的位置，将新文件夹的位置添加到相应的库中可能更有意义。那样。任何需要写入用户配置文件根目录的东西（例如 Git、SSH 等）都可以这样做，而任何需要写入 doc/photo/music 文件的东西都可以透明地重定向到备用位置。

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:22:03.310

Powershell 将接受`~`用户的主目录，但由于我不记得使用它不是一个好主意的原因。

此处其他答案中链接的环境变量可从 PowerShell 获得，但不要使用`%VARNAME%`语法 - 那是批处理。使用`Env:`PSProvider - 因此用户主目录`$Env:USERPROFILE`位于 PowerShell 中。您可以使用 . 查看所有当前定义的环境变量`get-childitem env:`。

# regex - Groovy 正则表达式模式匹配中是否有命名组？

> ID：15664318
> 
> 赞同：24
> 
> 时间：2013-03-27T16:38:19.930
> 
> 标签：regex, groovy

就像是：

```
def match = "John 19" =~ /(&name&)\w+ (&age&\d+)/
def name = match.name
def age = match.age 
```

是否有一种时髦的语法允许这样的事情（而不是`&`我虚构的运算符？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-27T16:59:21.820

假设您在 Java 7+ 上使用，您可以执行以下操作：

```
def matcher = 'John 19' =~ /(?<name>\w+) (?<age>\d+)/
if( matcher.matches() ) {
  println "Matches"
  assert matcher.group( 'name' ) == 'John'
  assert matcher.group( 'age' ) == '19'
}
else {
  println "No Match"
} 
```

如果您还没有使用 java 7，则需要[第三方正则表达式库](https://code.google.com/p/named-regexp/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-16T04:31:08.443

这不会命名组，但闭包会参数化匹配：

```
("John 19" =~ /(\w+) (\d+)/).each {match, name, age ->
  println match
  println name
  println age
} 
```

输出：

```
John 19
John
19 
```

这是一个有用的参考： http: [//naleid.com/blog/2008/05/19/dont-fear-the-regexp/](http://naleid.com/blog/2008/05/19/dont-fear-the-regexp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T11:37:36.863

选择：

```
def foo = '''(id:(1 2 3)) OR (blubb)
(id:(4 5 6)) OR (fasel)
'''
​def matcher =  (foo =~ /\(id:\((.+)\)\) OR (.*)/)
def (whole, bar, baz) = matcher[0]
assert whole == '(id:(1 2 3)) OR (blubb)'
assert bar == '1 2 3'
assert baz == '(blubb)'

(whole, bar, baz) = matcher[1]
assert whole == '(id:(4 5 6)) OR (fasel)'
assert bar == '4 5 6'
assert baz == '(fasel)' 
```

# php - Chrome 和 PHP 5.4 服务器

> ID：15664321
> 
> 赞同：1
> 
> 时间：2013-03-27T16:38:23.457
> 
> 标签：php, google-chrome, laravel, laravel-4

我正在使用 laravel 4 和“php artisan serve --port 3000”命令来利用 PHP 5.4 cli 服务器。我在 FireFox 中访问 localhost:3000/ 并得到“Hello World”，这意味着一切正常。当我在 Chrome 中执行相同操作时，我收到错误“糟糕！Google Chrome 无法连接到 localhost:3000”

我已经尝试过基本的“php -S localhost:3000 -t public/”，但也只在 Chrome 中失败。任何人都知道的 chrome 和 localhost:[port] 的任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:21:44.980

这是一个 Chrome 错误，请参阅[chrome 错误](https://code.google.com/p/chromium/issues/detail?id=224215)
您必须在 chrome 标志中禁用“内置异步 DNS”：在地址栏中键入 chrome://flags/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:51:05.617

哦！各位大神来找我！！

我找到了我的解决方案。尝试使用 ipv6 所以你应该检查 http://[::1]:3000 而不是 http://localhost:3000

我不能告诉你为什么这很好用，但是它会很好用！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:24:25.977

同样的事情发生在我身上！

我使用 localhost:80 但仅在 Chrome 中失败（firefox 运行良好）。

并通过 Apache Chrome 显示正确的页面。

所以 PHP5.4 Cli Sever + chrome（可能是 26.0.1410.43:Mar 27 发布）是糟糕的一对......我想。

# html - IE 8 中不显示 CSS 菜单

> ID：15664322
> 
> 赞同：0
> 
> 时间：2013-03-27T16:38:27.830
> 
> 标签：html, css, internet-explorer-8

我在 IE 8 中遇到以下 CSS 菜单的问题，它不会显示 - 它显示默认列表 - 而不是其他浏览器中显示的菜单 ( [http://interclub.org.uk](http://interclub.org.uk) )

请就在 IE 8 中显示的 CSS 或文档提出任何更正、支持或替代建议

HTML 文档类型：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"> 
```

用于包含脚本的 HTML：

```
<link href="../default.css" rel="stylesheet" type="text/css" media="all" /> 
```

用于菜单的 CSS：

```
#menu {
float: right;
width: 1200px;
height: 15px;
padding: 0px 10px 0px 20px;
}

#menu ul {
float: none;
margin: 0;
padding: 10px 0px 0px 50px;
list-style: none;
line-height: normal;

#menu li {
float: left;
}

#menu a {
display: block;
margin-left: 1px;
padding: 7px 8px 7px 8px;
letter-spacing: 1px;
text-decoration: none;
text-align: center;
font-family: 'Passion One', sans-serif;
font-size: 17px;
font-weight: lighter;
color: #fff;
background-color:#009900
}

#menu a:hover, #menu .current_page_item a {
text-decoration: none;
background: #A0190A;
box-shadow: inset 0px 0px 10px 5px rgba(0,0,0,.1);
border-radius: 5px;
color: #fff;
} 
```

菜单 HTML DIV

```
<div id="menu">
        <ul>
            <li><a href="../draw.htm" accesskey="1" title="">Draw &amp; Results</a></li>
            <li><a href="http://blog.interclub.org.uk" accesskey="9" title="">the 19th</a></li>
            <li><a href="../userarea/contact.php" accesskey="2" title="">Team Directory</a></li>
            <li><a href="../userarea/submit-result.php" accesskey="2" title="">Submit Result</a></li>
            <li><a href="../rules.htm" accesskey="4" title="">Rules</a></li>
            <li><a href="../faq.htm" accesskey="5" title="">FAQ</a></li>
            <li><a href="../supporting-junior-golf.htm" accesskey="3" title="">Supporting Junior Golf</a></li>
            <li><a href="../about.htm" accesskey="2" title="">About the Comp</a></li>
            <li><a href="../contactus.htm" accesskey="6" title="">Contact Us</a></li>
            <li><a href="http://ladies.interclub.org.uk" accesskey="7" title=""><img src="../images/ladieslogo.png" alt="" width="16" height="16" align="top" />Ladies Inter-Club</a></li>

        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:53:20.883

**浏览器支持**

*   `border-radius`IE8 或更早版本不[支持](http://caniuse.com/#search=border-radius)。
*   `box-shadow`IE8 或更早版本不[支持](http://caniuse.com/#search=box-shadow)。

**HTML**

验证 HTML 显示[42 个错误](http://validator.w3.org/check?uri=http%3A%2F%2Finterclub.org.uk%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)。主要问题可能是由无效的 HTML 引起的。不同的浏览器对不良 HTML 的反应不同。

`</div>`标题末尾似乎有一个额外的标签。如果 IE8 通过创建不同的 DOM 结构对此做出反应，则可能不会应用标题的 CSS 选择器。

此外，许多图像标签都有一个额外的双引号字符。这也可能导致不可预测的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T13:21:05.753

使用库 1.4.2 尝试此 jquery 以进行边界半径工作

```
// This adds 'placeholder' to the items listed in the jQuery .support object. 
jQuery(function() {
   jQuery.support.placeholder = false;
   test = document.createElement('input');
   if('placeholder' in test) jQuery.support.placeholder = true;
});
// This adds placeholder support to browsers that wouldn't otherwise support it. 
$(function() {
   if(!$.support.placeholder) { 
      var active = document.activeElement;
      $(':text').focus(function () {
         if ($(this).attr('placeholder') != '' && $(this).val() == $(this).attr('placeholder')) {
            $(this).val('').removeClass('hasPlaceholder');
         }
      }).blur(function () {
         if ($(this).attr('placeholder') != '' && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
            $(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');
         }
      });
      $(':text').blur();
      $(active).focus();
      $('form:eq(0)').submit(function () {
         $(':text.hasPlaceholder').val('');
      });
   }
}); 
```

# java - 使用 Amazon AWS SDK 时遇到 NoClassDefFoundError

> ID：15664325
> 
> 赞同：0
> 
> 时间：2013-03-27T16:38:35.680
> 
> 标签：java, jsf-2, amazon-web-services, noclassdeffounderror

目前，在我的测试**`EJB project`**中，我有以下`Stateless`bean：

```
@WebService(serviceName = "TestService")
@Stateless()
public class TestService {

    @WebMethod(operationName = "testUpload")
    public void testUpload() {
        // DUMMY LINE
        Log log = LogFactory.getLog(AmazonS3Client.class);
        // END DUMMY LINE

        File file = new File("path_to_test_file");
        AWSCredentials credentials = new BasicAWSCredentials(AMAZON_KEY_ID, AMAZON_SECRET_KEY);
        AmazonS3 conn = new AmazonS3Client(credentials);
        conn.setEndpoint("https://s3-ap-southeast-1.amazonaws.com");
        PutObjectRequest por = new PutObjectRequest(AMAZON_BUCKET_NAME, "test.txt", file);
        conn.putObject(por);
    }

} 
```

在我的测试**`WAR project`**中，我有以下内容`ManagedBean`：

```
@Named(value = "mrBean")
@RequestScoped
public class MrBean {
    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/TestService/TestService.wsdl")
    private TestService_Service service;
    private TestService port;

    @PostConstruct
    public void test() {
        port = service.getTestServicePort();
        port.testUpload();
    }
} 
```

当我部署**`EJB project`**并运行`test.xhtml`页面时，我总是在以下行遇到错误：

```
AmazonS3 conn = new AmazonS3Client(credentials); 
```

一开始，错误看起来像这样：

```
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at com.amazonaws.services.s3.AmazonS3Client.<clinit>(AmazonS3Client.java:193)
...
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354) 
```

经过几次试运行，错误变为：

```
Caused by: java.lang.NoClassDefFoundError: Could not initialize class com.amazonaws.services.s3.AmazonS3Client 
```

有一些奇怪的事情：

1.  最奇怪的是，如果我将整个`testUpload()`函数复制并粘贴到 中`ManagedBean`，该函数**可以完美运行**。我 100% 确定我已经导入了两个项目的所有库。但是，该功能`testUpload()`只能在 内部工作**`WAR project`**，而不能在**`EJB project`**.
2.  正如您在上面的代码中看到的那样，我尝试添加一个虚拟行`Log log = LogFactory.getLog(AmazonS3Client.class);`，但该行从未引发错误。

如果您能告诉我如何解决这个问题，我将不胜感激:(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:17:11.987

为了解决这个问题，我不得不把`EJB Project`里面的`EAR Project`. 只有当我部署`EAR Project`而不是`EJB Project`直接部署时，库才会正确加载。

我还没有找到这个问题的原因。如果可能的话，如果有人能给我一个解释，我将不胜感激:)

# c++ - 不同长度的线垫

> ID：15664327
> 
> 赞同：0
> 
> 时间：2013-03-27T16:38:38.667
> 
> 标签：c++, opencv, image-processing

我想找到两个 Mat 描述符之间的相似性。然后，我有两个矩阵（Mat）要使用其中一种匹配方法进行匹配，即：FlannBasedMatcher 匹配器，

```
Matcher.match(descriptors1, descriptors2, matches) 
```

但实际上我自己对每行 Mat 的描述符并不总是具有相同的长度。例如：我的矩阵结构如下：

> Elem1: desc_1 desc_2 .. desc_n
> 
> 1：22 33 44 13 33
> 
> 2：12 1 13 10
> 
> 3：11 33 55 16 15 13 33

我应该用零填充吗？我确信相似性度量会受到这种填充的影响。或者我可以让它们保持原样？在这里，我们遇到了创建不同长度线的 Mat 的问题？据我所知，这是不可能的！任何人都可以提出解决方案吗？或者可能是另一种方法来找到相应的行

**补充说明：**

我的描述符是一个不变的值，由四个共线点（交叉比）计算得出。我开始从图像中检测一些关键点，然后重新组合所有共线点。我得到了一组不同大小的重新组合的共线点。假设其中一组由 n = 4 个点组成，那么我将得到一个不变描述符值，如果 n = 5 个点，我将得到 5 个不变描述符，计算每 4 个点之间所有可能描述符的公式由 5 个点组成的集合是：

```
 5!
C(5,4) = --------------
           4! (5 - 4)! 
```

所以，假设我有 3 个重新组合的点集，我将有一个 3 行的矩阵 (Mat)，每行将包含其不变描述符，具体取决于为每个集合找到的共线点的数量。所以每行 Mat 可能有不同数量的描述符（代表 cols 的数量）我希望能帮助你理解我的想法。

# php - 为什么我可以在 XAMPP 中使用 PHP 连接到 MySQL 服务器，但不能使用 Uniform Server？

> ID：15664332
> 
> 赞同：0
> 
> 时间：2013-03-27T16:38:48.723
> 
> 标签：php, mysql

我是 PHP、MySQL 和基于服务器的语言的完全新手。我正在通过一个简单的 localhost (127.0.0.1) 服务器学习。这段代码：

```
$dbc=mysqli_connect('127.0.0.1','root','aPassword','aDatabase') or die('Could not connect: '.mysqli_error()); 
```

与 XAMPP 的基本配置连接良好，但不是统一服务器的。没有错误信息。知道为什么 - 或者我会在哪里找到答案？...我对这一切都太陌生了，甚至不知道从哪里开始寻找！

谢谢，一如既往。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:20:46.377

空白页意味着您的脚本正在抛出错误，但您尚未配置 PHP 以显示错误消息。这是您在更进一步之前需要解决的问题；没有错误消息的帮助是不可能编码的。这是一个[简短的解释](https://stackoverflow.com/a/5680885/13508)。

我有根据的猜测是您尚未启用`mysqli`扩展程序。如果是这种情况，一旦您获得错误报告工作，您就会收到警告。

# ruby-on-rails - 格式错误

> ID：15664335
> 
> 赞同：0
> 
> 时间：2013-03-27T16:38:55.610
> 
> 标签：ruby-on-rails, error-handling, internationalization

我们为我们的应用程序使用一些自写的验证。这些不使用已翻译的内容之一，例如“空”或“无效”。它们以默认方式格式化`%{attribute} %{message}`

但是，我们的客户要求将它们格式化为`%{attribute}: %{message}.`，只需添加一些标点符号。

这些是从 gitub 下载的基本 i18n 中的错误消息：

```
 errors: &errors
    format: "%{attribute} %{message}"

  activemodel:
    errors:
      <<: *errors
  activerecord:
    errors:
      <<: *errors 
```

每当我改变`format`时，它什么都不做。我们正在使用表格。

# css - 在悬停时更改图像的灰度属性

> ID：15664337
> 
> 赞同：1
> 
> 时间：2013-03-27T16:38:56.980
> 
> 标签：css, grayscale

到目前为止，我已经完成了我所做的事情：http: [//jsfiddle.net/U5pQs/](http://jsfiddle.net/U5pQs/)

我试图让悬停在蓝色框（#prompt）上做两件事：1）将房子的图像（#picbw）更改为黑白2）显示一个带有文本的div（#text）图片

这是我用于此转换的代码：

```
#prompt:hover ~ #picbw {filter: grayscale(100%);
-webkit-filter: grayscale(100%);
-moz-filter: grayscale(100%);
-ms-filter: grayscale(100%);
            -o-filter: grayscale(100%);} 
```

2）工作，但我不能让1）发生，我不明白为什么！

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:00:22.090

我找到的示例：http: [//jsfiddle.net/KDtAX/487/](http://jsfiddle.net/KDtAX/487/)具有悬停状态和关闭状态的过滤器，但是“#prompt:hover ~ #picbw”对我没有任何作用。当我将其更改为“#picbw:hover”并将其与我链接的示例相结合时，它起作用了。

1）您的 css 选择器不起作用：#prompt:hover ~ #picbw
2）您的 css 不起作用，使用示例中的 css
* 并且您需要 css3 的所有浏览器前缀

```
#picbw {
    ...
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/></filter></svg>#grayscale");
    -webkit-filter: grayscale(0%);
    -webkit-transition: all .6s ease; /* Fade to color for Chrome and Safari */
    -webkit-backface-visibility: hidden; /* Fix for transition flickering */
}
#picbw:hover {
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+ */
    filter: gray; /* IE6-9 */
    -webkit-filter: grayscale(100%); /* Chrome 19+ & Safari 6+ */
    -moz-filter: grayscale(100%)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:56:06.973

**我认为这个线程对 U.Image** **[Greyscale 和 CSS 和鼠标悬停时重新着色很有用？](https://stackoverflow.com/questions/7273927/image-greyscale-with-css-re-color-on-mouse-over)** **读这个。** 检查此链接。 **[http://webexplorar.com/creating-grayscale-images-with-css/](http://webexplorar.com/creating-grayscale-images-with-css/)** **[http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/](http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/)**

**读这个：**

过去，我们使用了各种技巧来将图像从黑白转换为浏览器中的彩色。一种技术要求将两张图像堆叠在一起。另一种选择是使用画布。或者……我们可以使用灰度滤镜。

```
 img {
   -webkit-filter: grayscale(100%);
 } 
```

在对灰度函数应用百分比时，想想自己，“在 0 到 100% 的范围内，我希望这张图像有多灰度？

当与 CSS3 过渡一起使用时，我们可以应用一个漂亮而干净的悬停效果。

```
 img {
   -webkit-transition: -webkit-filter 1s;
     }
 img:hover {
  -webkit-filter: grayscale(100%); 
     } 
```

将来，您将希望为其他浏览器提供前缀，但是，此时没有必要。无需应用 Mozilla 转换来适应仅在 Webkit 中实现的过滤器（到目前为止）。

# php - LIMIT 和 OFFSET 可以帮助减少大型表的执行时间

> ID：15664338
> 
> 赞同：0
> 
> 时间：2013-03-27T16:39:01.933
> 
> 标签：php, mysql

我正在尝试从 PHP 访问 MySql 中非常大的表，但执行时间非常大（有时超过 10 分钟），我尝试使用限制和偏移来减少执行时间，但他们没有帮助。我将限制设置为 1，这样一旦找到该行，它就会停止搜索更多行，并且我使用了 Offset 以便下次它搜索行时，从到达的最后一行开始搜索：

```
$offset1 = 0; 

for ($date = mktime($hour_i,$minute_i,0,$month_i,$day_i,$year_i); $date <= mktime($hour_f,$minute_f,0,$month_f,$day_f,$year_f); $date = mktime($hour,$minute+$time_step,0,$month,$day,$year)) 
{
$hour = date('H',$date);
$minute = date('i',$date);
$second = date('S', $date);
$day = date('d',$date);
$month = date('m',$date);
$year = date('Y',$date);
?>

<?php

$Ensoleillement_Query = mysql_query("SELECT Moyenne, @row := @row + 1 AS ROW FROM mesure_ensoleillement,(SELECT @row := 0) r WHERE IdMesure  IN(SELECT IdMesures FROM mesures WHERE IdPasserelle='".$PERSIL."' and  ColonneEnregistrement='IdEnsoleillement')
and hour(DateMesure)= ".$hour."
and minute(DateMesure) = ".$minute."
and year(DateMesure)= ".$year."
and month(DateMesure)= ".$month."
and day(DateMesure)= ".$day." LIMIT 1 OFFSET ".$offset1." ");

if (!$Ensoleillement_Query) {
    die('Query failure Query: ' . mysql_error());
} 

if(mysql_num_rows($Ensoleillement_Query) == 0)  die("There is no Data in the Database corresponding to that date or site");

$Ensoleillement[$i] = mysql_result($Ensoleillement_Query,0,0);
$offset1 = mysql_result($Ensoleillement_Query,0,1);
$offset1 = $offset1-1;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:42:23.447

`LIMIT`影响*读取*数据的性能。让我们举个例子：

有人给你一张报纸，说*“读完所有的，然后告诉我第三页是什么”*。或者他可以说*“只读第三页然后告诉我”*。最后一个是限制的工作原理。你会很快完成，因为你不会试图阅读你最终不需要的东西。

现在想象那个人就在你的房间对面，他需要走到你身边把报纸递给你。阅读多少报纸并不重要，走过去需要同样多的时间。`LIMIT`对此没有影响。为了使人走得更快（完成类比），您可以添加索引或以其他方式优化查询。

# sql - SQL Server 2005 中的复杂串联

> ID：15664353
> 
> 赞同：1
> 
> 时间：2013-03-27T16:39:30.983
> 
> 标签：sql, sql-server, database, sql-server-2005, query-optimization

我正在研究两个系统之间的集成。在我的课程系统中，有一个对应该是工作人员的讲师的引用。问题是 Courses 系统允许在本地创建讲师记录（我已经有一份工作从我们的 Staff 系统馈送到 Courses 系统）。

一门课程可以有不止一位讲师，出于商业原因，有时会创建本地讲师记录作为占位符。我需要将所有“真正的”讲师连接成一个字符串，但如果为课程设置的任何讲师不是“真正的”讲师，那么我需要输出一个空字符串。也有可能创建课程时没有分配任何讲师。

**课程系统**

```
Courses instructorID InstructorName  InstructorOrder
-----------------------------------------------------
ach01   1            Smith           1
ach01   2            Brown           2
phy01   3            James           1
sci01   1            Smith           1
sci01   4            Doe             2
acc01   NULL         NULL            NULL 
```

**人员制度**

```
ID   LastName
--------------
1    Smith
2    Brown
3    James 
```

**输出**

```
Course  Instructors
-------------------------
arc01   'Smith, Brown'
phy01   'James'
sci01   ''
acc01   '' 
```

这是我想出的 SQL，但我想知道是否有更好的方法来获得相同的结果

```
select courseID,
       isnull(case max(case when x.rn = 1 then isnull(lastname, '-|-') else '' end) when '-|-' then NULL else max(case when x.rn = 1 then lastname else '' end) end +
              case max(case when x.rn = 2 then isnull(lastname, '-|-') else '' end) when '-|-' then NULL else max(case when x.rn = 2 then ', ' + lastname else '' end) end +
              case max(case when x.rn = 3 then isnull(lastname, '-|-') else '' end) when '-|-' then NULL else max(case when x.rn = 3 then ', ' + lastname else '' end) end +
              case max(case when x.rn = 4 then isnull(lastname, '-|-') else '' end) when '-|-' then NULL else max(case when x.rn = 4 then ', ' + lastname else '' end) end
              , '') Instructors
from (select courseID, s.lastname,
             ROW_NUMBER() over(partition by courseID order by InstructorOrder) rn
      from Courses c left join  
           Active_Staff s on c.instructorID = s.ID 
      ) x
group by courseID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:06:10.127

这使用了一些不同的语法，但查询基本上与您已有的查询完全相同。我不认为会有性能差异。

```
select P.Courses,
       case when S.Instructors like '%NOSTAFF%' then '' else S.Instructors end as Instructors
from (
     select C.Courses,
            isnull(S.LastName, 'NOSTAFF') as LastName,
            row_number() over(partition by C.Courses order by C.InstructorOrder) as rn
     from Courses as C
       left outer join Staff as S
         on C.instructorID = S.ID
     ) as T
pivot (
      max(T.LastName) for T.rn in ([1],[2],[3],[4])
      ) as P
cross apply
      (
      select isnull(P.[1], '')+isnull(P.[2], '')+isnull(P.[3], '')+isnull(P.[4], '') as Instructors
      ) as S 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:10:07.373

这看起来有点复杂（也许确实如此），但它完成了工作：

```
;WITH CTE1 AS 
(
    SELECT * FROM Courses c
    LEFT JOIN dbo.Active_Staff s ON c.instructorID = s.ID
)
,CTE2 AS
(  
    SELECT  CourseID, 
        STUFF((SELECT ', ' + LastName 
              FROM   CTE1 c2 
              WHERE  c2.CourseID = c1.CourseID 
              ORDER BY c2.InstructorOrder
              FOR XML PATH('')), 1, 2, '')  LastNames
    FROM  CTE1 c1 
    GROUP BY CourseID
)
SELECT
    CourseID,
    CASE WHEN EXISTS (SELECT * FROM CTE1  WHERE LastName IS NULL AND CTE1.CourseID = Cte2.CourseID) THEN '' ELSE LastNames END AS Instructors
FROM CTE2 
```

基本上，我们首先将所有字符串连接起来——使用 STUFF 和 FOR XML PATH 组合，然后用空字符串替换那些至少有一个“虚拟”讲师的字符串。

这是[SQL Fiddle 演示](http://sqlfiddle.com/#!6/3035e/1)

# ruby - 发送带有两个附件的电子邮件，每个附件都有不同的编码

> ID：15664355
> 
> 赞同：0
> 
> 时间：2013-03-27T16:39:33.050
> 
> 标签：ruby, ruby-on-rails-3, actionmailer

我想用 ActionMailer 发送电子邮件。我想以 ISO-8859-1 和 UTF-8 发送相同的 csv 编码

我的邮递员：

```
class MyMailer < ActionMailer::Base
  default :from => "Me <contact@me.com>"

  # ===========
  # = Reports =
  # ===========

  # report is in UTF-8
  def send_report(email, report, subject, filename, campaign_id)
    attachments[filename + '.utf_8.csv']= { :data => report, :encoding => 'base64',  :mime_type => "text/csv" }
    attachments[filename + '.latin1.csv']= { :data => report.encode('ISO-8859-1'), :encoding => 'base64', :mime_type => "text/csv; charset=ISO-8859-1" }

    @campaign_id = campaign_id
    mail(to: email, subject: subject)
  end
end 
```

我得到了错误：

```
incompatible character encodings: ISO-8859-1 and UTF-8 
```

如果我尝试单独发送它们中的每一个，它工作正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:35:03.337

ActionMailer 文档规定

> 如果你想使用不同于 Base64 的编码，你可以传入一个编码，但是你可以传入预编码的内容

所以看起来你想对你的附件进行双重编码。我将首先删除 :encoding 选项。其次，您没有向我们展示发生编码错误的位置。也许您的文档中有无法编码为 ISO 的 UTF-8？

第三，您传入`report`附件哈希。可能是有什么东西`force_encoding`在召唤它。但是，由于 Ruby 是通过引用传递的，这也会影响您的第二个附件。

失败了，我会尝试将 mime 类型切换为`application/octetstream`

最后，我将深入研究 AM 源。此外，我会向要求拥有 ISO 编码文件的人发出强烈的仇恨。

# css - 背景图片被切成两半

> ID：15664357
> 
> 赞同：0
> 
> 时间：2013-03-27T16:39:44.413
> 
> 标签：css, image, image-processing, background, background-image

我有一个使用以下代码应用的背景图像：

```
#paint-bg{
    background: url(../_img/contacto/paint.png) no-repeat center center fixed;
    width: 970px;
    height: 670px;
    display:block;
} 
```

没什么特别的。和我的html一样：

```
<?php include('header.php'); ?>
    <body class="bg">
        <?php include('nav.php'); ?>
        <div id="wrapper">
                <div id="paint-bg">
                    <section class="contacto">
                        <h2>Contacto</h2>
                        <p class="p1">c/ Manuel Pombo Angulo nº 18 ,planta 1ª 16</p>
                        <p class="p2">28055 Madrid</p>
                        <p class="p3">+34 629 413 049</p>
                        <p class="p4"><a href="mailto:info@rosasusaeta.com">info@rosasusaeta.com</a></p>
                    </section>
                </div>
        </div>
<?php include('footer.php'); ?> 
```

没什么特别的。但是当有人访问这个网页时，他们会看到图像从左侧切成两半。我玩过不同的参数，但由于它很简单，我不知道出了什么问题......请让我知道如何遵循......

这里有网站的链接，您可以自己查看，[链接到网站](http://rosasusaeta.com/contacto.php)。

![在此处输入图像描述](../Images/0e029a4bdad5a600877cf187606a5de0.png)

# xpath - tesseract hocr 输出的 Hpple XPath 查询问题

> ID：15664358
> 
> 赞同：0
> 
> 时间：2013-03-27T16:39:45.023
> 
> 标签：xpath, hpple

我有以下 html 片段

```
 <span class='ocr_line' id='line_11' title="bbox 0 482 377 539">
<span class='ocrx_word' id='word_34' title="bbox 0 484 51 539"><em>WORD1</em></span> 
<span class='ocrx_word' id='word_35' title="bbox 56 482 119 528">WORD2</span> 
<span class='ocrx_word' id='word_35' title="bbox 56 482 119 528"><em></em></span> 
<span class='ocrx_word' id='word_36' title="bbox 137 483 171 528"><strong><em>WORD3</em></strong></span> 
<span class='ocrx_word' id='word_37' title="bbox 176 482 244 528"><h1>WORD4</h1></span> 
</span> 
```

我希望 xpath 查询字符串能够提取 bbox 字符串和单词 1-4 的节点内容。我遇到了麻烦，因为单词嵌套在`<em>`s 和`<strong>`s 中，也可能是空的！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:00:39.070

这也许：`//@title | //text()`

# django - django tables2 加入

> ID：15664361
> 
> 赞同：0
> 
> 时间：2013-03-27T16:39:55.257
> 
> 标签：django, django-tables2

我希望在 django 中使用 tables2 进行几次连接

```
 --- models.py (abbrev.)

from django.db import models
import django_tables2 as tables2

class Architecture (models.Model):
    architecture_id = models.AutoField(primary_key=True)
    architecture_name = models.CharField("Architecture",max_length=20)
    architecture_comment =models.CharField("Comments",null=True,blank=True,max_length=200)

class Server (models.Model):
    server_id  = models.AutoField(primary_key=True)
    server_name = models.CharField("Server Name",max_length=200,unique=True)
    server_ip = models.IPAddressField("Server IP")
    server_serial = models.CharField("Serial No.",max_length=25,null=True,blank=True)
    server_mem = models.PositiveIntegerField("Mem (MB)",null=True,blank=True)
    server_architecture = models.ForeignKey(Architecture)

class ServersTable(tables2.Table):
    architecture = tables2.Column(accessor='architecture.architecture_name')

--- views.py

from django.http import HttpResponse
from servers.models import Server
from django.shortcuts import render

def index(request):
    return render(request, "index.html", {"server": Server.objects.all()})

--- index.html 
{% load render_table from django_tables2 %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />

<link rel="stylesheet"     href="http://myhost/django_tables2/themes/paleblue/css/screen.css" />
<title>myhost</title>
</head>
<body>
 {% render_table server %}
</body> 
```

结果：

在“架构”列中，它显示....“**架构对象**”对于每个应该有架构名称的实例

我怎样才能让“JOINS”工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:47:51.793

为了让架构模型返回架构名称，添加类似

```
def __unicode__(self): 
    return self.architecture_name 
```

在建筑类下。我认为这应该有效。另外，如果您想返回多列

```
def __unicode__(self): 
    return "%s, %s" % (self.architecture_name, self.architecture_comment) 
```

请记住，您可以返回任何格式化的字符串

# reporting-services - SSRS 中每天处于“打开”状态的图表记录

> ID：15664362
> 
> 赞同：0
> 
> 时间：2013-03-27T16:39:57.900
> 
> 标签：reporting-services

我的记录有“开始”和“结束”日期。仍然“打开”的记录缺少结束日期。我想创建一个图表，显示每天“打开”的记录数。

我首先为 x 轴设置开始日期和结束日期参数并将间隔设置为 1。例如，我将参数设置为 3/27 到 3/30。图表 x 轴显示 3/27、3/28、3/29。我想我可能需要做类似的事情，计算每个 x 轴值满足以下条件的真实语句数：“打开日期”> = x 轴值和“关闭日期”<= x 轴值（意思是该 x 轴值的记录是“打开的”）。

这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:22:51.897

我不知道在生成图表数据的进一步计算中使用图表中生成的标签的任何本机方式。

假设你的**数据源**是一个数据库，我认为你最好的选择是使用一个存储过程，它根据你的`start`和`end`参数在内部生成一个日期列表，然后使用这个日期列表来创建你想要的数据集，即每个日期一行具有打开记录值。然后数据集完全符合您的图表要求。

如果您在报告中的其他地方使用数据，这可能意味着多个数据集，但就复杂性和实际获得所需结果而言，它似乎是最简单和最快的选择。

# sybase - Sybase 聚集索引

> ID：15664365
> 
> 赞同：1
> 
> 时间：2013-03-27T16:40:05.370
> 
> 标签：sybase, clustered-index

我在 sybase 指南中阅读了以下似乎相互矛盾的陈述。由于我是数据库调优的新手，在协调这些方面提供任何帮助将不胜感激。

1.如果您的环境需要大量插入，请不要将聚集索引键放置在稳步增加的值上，例如 IDENTITY 列。

2.聚集索引在范围查询中key与搜索参数匹配时提供了非常好的性能，例如：where colvalue >= 5 and colvalue < 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:29:45.323

这些陈述并不相互矛盾。

第一条语句将**INSERTS**处理到表中。如果您有一个自动递增的 IDENTITY 列，则聚集索引会增加开销而没有太多好处。（请记住，聚集索引根据索引键保持数据有序...如果您的索引键是*IDENTITY*列，那么它已经保持有序）

第二个语句处理**SEARCHES**。在检索数据以进行读取/更新时，如果搜索键与聚集索引匹配，则索引可以提高性能。

这就是为什么重要的是要了解您希望在数据库中看到什么样的活动，以了解您是否需要针对插入、更新或搜索进行调整，因为这将影响您是使用集群索引还是非集群索引或它们的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T16:48:11.017

那是因为如果您在标识列上创建聚集索引，则插入只会发生在一页。如果有多个进程，那么这些进程将相互阻塞，因为每个进程都会尝试在最后一页上获得 LOCK。

聚集索引的优点之一是它们将 INSERTS 分散到整个表中，这对于防止在这种多进程环境中的阻塞非常有利。

# web-services - 带有 Weblogic 10.3.3 的 CXF 服务器 - Apache ActiveMQ 异常

> ID：15664366
> 
> 赞同：1
> 
> 时间：2013-03-27T16:40:05.523
> 
> 标签：web-services, apache, weblogic, cxf, activemq

我将 Eclipse Indigo 与 Oepe 一起使用，并制作了一个 CXF 服务器。配置是正确的：它是一个带有 WAR 的 EAR，WAR 包含 CXF 2.5.5 库并提供一些 Web 服务。我已按照 cxf 指南为 weblogic 进行配置，这是我的 application-weblogic.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.1/weblogic-application.xsd">
<!--weblogic-version:10.3.3-->
<wls:application-param>
    <wls:param-name>webapp.encoding.default</wls:param-name>
    <wls:param-value>UTF-8</wls:param-value>
</wls:application-param>
<wls:prefer-application-packages>
    <wls:package-name>antlr.*</wls:package-name>
    <wls:package-name>org.apache.*</wls:package-name>
    <wls:package-name>org.joda.time.*</wls:package-name>
    <wls:package-name>javax.jws.*</wls:package-name>
</wls:prefer-application-packages>
</wls:weblogic-application> 
```

我知道配置是正确的，因为它适用于我的 weblogic 10.3.3 服务器；但是，在其他 weblogic 10.3.3 服务器上，有时我会遇到以下异常：

```
java.lang.Exception: Exception received from deployment driver. See Error Log view for more detail.
    at oracle.eclipse.tools.weblogic.server.internal.DeploymentProgressListener.watch(DeploymentProgressListener.java:190)
    at oracle.eclipse.tools.weblogic.server.internal.WlsJ2EEDeploymentHelper.deploy(WlsJ2EEDeploymentHelper.java:506)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishWeblogicModules(WeblogicServerBehaviour.java:1466)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishToServer(WeblogicServerBehaviour.java:898)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishOnce(WeblogicServerBehaviour.java:686)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publish(WeblogicServerBehaviour.java:539)
    at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:774)
    at org.eclipse.wst.server.core.internal.Server.publishImpl(Server.java:3153)
    at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Server.java:345)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: weblogic.application.WrappedDeploymentException: org.apache.activemq.advisory.ConsumerListener
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:280)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:253)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:177)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:37)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:787)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at weblogic.utils.classloaders.GenericClassLoader.defineClass(GenericClassLoader.java:328)
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:285)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:253)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:177)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:37)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:787)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at weblogic.utils.classloaders.GenericClassLoader.defineClass(GenericClassLoader.java:328)
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:285)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:253)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:177)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:37)
    at weblogic.servlet.internal.WebAnnotationProcessorImpl.processAnnotations(WebAnnotationProcessorImpl.java:85)
    at weblogic.servlet.internal.WebAppServletContext.processAnnotations(WebAppServletContext.java:1359)
    at weblogic.servlet.internal.WebAppServletContext.<init>(WebAppServletContext.java:440)
    at weblogic.servlet.internal.WebAppServletContext.<init>(WebAppServletContext.java:484)
    at weblogic.servlet.internal.HttpServer.loadWebApp(HttpServer.java:418)
    at weblogic.servlet.internal.WebAppModule.registerWebApp(WebAppModule.java:976)
    at weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:381)
    at weblogic.application.internal.flow.ScopedModuleDriver.prepare(ScopedModuleDriver.java:176)
    at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
    at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:507)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:41)
    at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:149)
    at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:45)
    at weblogic.application.internal.BaseDeployment$1.next(BaseDeployment.java:1221)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:41)
    at weblogic.application.internal.BaseDeployment.prepare(BaseDeployment.java:367)
    at weblogic.application.internal.EarDeployment.prepare(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java:154)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.prepare(AppContainerInvoker.java:60)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.createAndPrepareContainer(ActivateOperation.java:207)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:98)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
    at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

如异常所示，**org.apache.activemq.advisory.ConsumerListener**类存在问题；我不明白的是我根本不使用apache activemq，cfx需要它吗？为什么它适用于某些 weblogic 安装而不适用于其他安装？我还需要修复它以适用于任何 weblogic 安装。

我没有足够的时间来查看安装之间的所有差异，因为我安装的 weblogic 没有问题，而其他人安装的 weblogic 有这个问题，但我可以看出工作的 weblogic 是 windows 上的开发模式，其他的是开发或生产模式，但在centos linux上。

我不认为问题出在 application-weblogic.xml 上，因为我尝试了很多选项都没有成功，但我希望有人已经遇到了这个问题并且知道如何解决它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T15:38:10.440

在 OTN 中，我看到了这个线程，它可以帮助您解决这个问题： [https ://forums.oracle.com/message/4302193#4302193](https://forums.oracle.com/message/4302193#4302193)

所以也许命名的包在你的类路径中的两个位置？

# php - PHP按值重新排序数组

> ID：15664367
> 
> 赞同：3
> 
> 时间：2013-03-27T16:40:08.323
> 
> 标签：php, arrays, associative-array

我有一个数组，我想按值诉诸数组。这是现有的数组：

```
 1 => Array (9)
  OrgID => "XXXX"
  DOB => "1970-01-01"
  PersonID => "111111"
  ExpDate => "2013-07-31"
  Level => "WELITE"
  Status => "Active"
  FName => "Jane"
  LName => "Doe"
  Checked => null
2 => Array (9)
  OrgID => "XXXX"
  DOB => "1970-01-01"
  PersonID => "222222"
  ExpDate => "2013-07-31"
  Level => "WELITE"
  Status => "Active"
  FName => "Jane"
  LName => "Doe"
  Checked => null
3 => Array (9)
  OrgID => "XXXX"
  DOB => "1970-01-01"
  PersonID => "22222"
  ExpDate => "2013-07-31"
  Level => "WELITE"
  Status => "Active"
  FName => "Jane"
  LName => "Doe"
  Checked => null 
```

我正在尝试将数组转换为以下内容，并根据名为 level 的值创建一个键：

```
 WELITE  => (3)
  1 => Array (9)
  OrgID => "XXXX"
  DOB => "1970-01-01"
  PersonID => "111111"
  ExpDate => "2013-07-31"
  Status => "Active"
  FName => "Jane"
  LName => "Doe"
  Checked => null
2 => Array (9)
  OrgID => "XXXX"
  DOB => "1970-01-01"
  PersonID => "222222"
  ExpDate => "2013-07-31"
  Status => "Active"
  FName => "Jane"
  LName => "Doe"
  Checked => null
3 => Array (9)
  OrgID => "XXXX"
  DOB => "1970-01-01"
  PersonID => "22222"
  ExpDate => "2013-07-31"
  Status => "Active"
  FName => "Jane"
  LName => "Doe"
  Checked => null 
```

这是我到目前为止所尝试的：

```
 $sort = array();
foreach($WlevelArray as $k=>$v) {
    $sort['Level'][$k] = $v['Level'];
    $sort['OrgID'][$k] = $v['OrgID'];
}
array_multisort($sort['Level'], SORT_DESC, $sort['OrgID'], SORT_ASC, $WlevelArray); 
```

但这会产生两个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:34:36.677

根据我认为您的目标，我对您具体寻找的内容有些困惑，我在下面包含了代码。

**设置数组：**

```
$example1 = array(
  "OrgID" => "XXXX",
  "DOB" => "1970-01-01",
  "PersonID" => "111111",
  "ExpDate" => "2013-07-31",
  "Level" => "WELITE",
  "Status" => "Active",
  "FName" => "Jane",
  "LName" => "Doe",
  "Checked" => null
);

$example2 = array(
  "OrgID" => "XXXX",
  "DOB" => "1970-01-01",
  "PersonID" => "222222",
  "ExpDate" => "2013-07-31",
  "Level" => "WELITE",
  "Status" => "Active",
  "FName" => "Jane",
  "LName" => "Doe",
  "Checked" => null
);

$example3 = array(
  "OrgID" => "XXXX",
  "DOB" => "1970-01-01",
  "PersonID" => "22222",
  "ExpDate" => "2013-07-31",
  "Level" => "WELITE",
  "Status" => "Active",
  "FName" => "Jane",
  "LName" => "Doe",
  "Checked" => null
);

// Initial array
$initArray = array($example1, $example2, $example3); 
```

**现在让我们“排序”：**

```
$finalArray = array();
$i = 0;
foreach ($initArray as $key => $value) {
    (isset($value['Level'])) ? $finalArray[$value['Level']][$i] = $value : NULL;
    unset($finalArray[$value['Level']][$i]['Level']);
    $i++;
}

echo '<pre>', print_r($finalArray, true), '</pre>'; 
```

**输出：**

```
Array
(
    [WELITE] => Array
        (
            [0] => Array
                (
                    [OrgID] => XXXX
                    [DOB] => 1970-01-01
                    [PersonID] => 111111
                    [ExpDate] => 2013-07-31
                    [Status] => Active
                    [FName] => Jane
                    [LName] => Doe
                    [Checked] => 
                )

            [1] => Array
                (
                    [OrgID] => XXXX
                    [DOB] => 1970-01-01
                    [PersonID] => 222222
                    [ExpDate] => 2013-07-31
                    [Status] => Active
                    [FName] => Jane
                    [LName] => Doe
                    [Checked] => 
                )

            [2] => Array
                (
                    [OrgID] => XXXX
                    [DOB] => 1970-01-01
                    [PersonID] => 22222
                    [ExpDate] => 2013-07-31
                    [Status] => Active
                    [FName] => Jane
                    [LName] => Doe
                    [Checked] => 
                )

        )

) 
```

* * *

**编辑**

我在更改“级别”值时确实发现了一个问题，因为我使用的是自动递增变量，所以索引会不断增加`$i`。所以我添加了`sort($finalArray[$value['Level']]);`它并重置了索引值。

```
foreach ($initArray as $key => $value) {
    (isset($value['Level'])) ? $finalArray[$value['Level']][$i] = $value : NULL;
    unset($finalArray[$value['Level']][$i]['Level']);
    // Add this line to fix indexes
    sort($finalArray[$value['Level']]);
    $i++;
} 
```

# ruby-on-rails - Ruby on Rails JQuery 未在适当的时间加载

> ID：15664371
> 
> 赞同：0
> 
> 时间：2013-03-27T16:40:21.620
> 
> 标签：ruby-on-rails, ajax, jquery

我有我无法弄清楚的问题。这是代码

```
$('.new').click(function(e){
    e.preventDefault();
    $('#y').load('/y/y #x'), function(e) {};             
    showadd(); // function to call modal
    $("#x").attr("data-remote","true"); // making :remote => true 
}); 
```

现在问题是我想在我加载了上面代码的表单上绑定成功。唯一的问题是它不起作用！它仅在我从控制台添加后才有效。

所以我的绑定功能

```
$('#x').bind('ajax:success', function(evt, data, status, xhr){
    alert("YES");
}); 
```

现在，如果我将提到的代码放在 $('.new').click( ... 只有当我通过控制台添加时，它就不起作用了。

有没有办法删除与一个元素关联的所有其他绑定事件，并在每次调用函数时添加一个？

例如，我想做这样的事情

```
function makingAjaxRespond() {
// remove all associated binding with the form
// add one binding
// confirm that binding has been added
} 
```

我很难弄清楚第一个提到的问题。有什么我想念的非常简单的方法吗？

感谢您的帮助和提前考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:47:39.620

您是否在控制台中看到任何错误？问题就像您在`$`包含 jQuery 之前尝试使用，或者您尝试在 DOM 准备好之前选择元素。解决方案是使用`$(function () { ... })`并确保在包含 jQuery*之后*将其输出到您的文档中。`<script src=...>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:44:39.717

您可能想改用该[`on`](http://api.jquery.com/on/)方法，听起来您的方法可能没有被绑定，因为该对象当时不存在？

尝试类似：

```
$(document).on('ajax:success', '#x', function(evt, data, status, xhr){
    alert("YES");
}); 
```

# javascript - 将字符串传递给函数是按值复制还是按引用传递？

> ID：15664372
> 
> 赞同：13
> 
> 时间：2013-03-27T16:40:22.973
> 
> 标签：javascript

由于 JavaScript 中的字符串是基本类型，将字符串传递给函数会创建它的本地副本吗？我想知道这一点，因为您无法在创建字符串后对其进行修改，因此 JavaScript VM 不只是在内部将字符串的地址传递给函数似乎不合逻辑。

如果有人要告诉我我不应该担心这个（在与 Web 开发人员交谈时经常发生这种情况），我正在开发 HTML5 游戏，垃圾收集是一个主要问题，所以我真的需要知道。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T16:48:49.833

该字符串将通过引用传递。

字符串是不可变的，因此每当您尝试更改它时，您都会得到一个新字符串（例如，通过做`value+="more"`）。

另请参阅：[不可变是什么意思？](https://stackoverflow.com/questions/3200211/what-does-immutable-mean)

@TJ Crowder：按价值与按参考-如果您正在查看语言定义，那么您是正确的。但是我不认为有一个实现可以实际创建字符串的副本，因为它会非常慢。此外，由于字符串是不可变的原语，因此无需复制它们，因为它们无法更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T16:53:47.260

我相信规范在这一点上保持沉默。然而，传递字符串的实际内容而不是在内存中传递对该内容的引用将是一个真正愚蠢的实现，即使字符串在理论上是“原语”。我怀疑大多数实现都像对待对象引用一样对待“原始”字符串（在这方面，显然不是在其他一些方面，例如`===`），但只是不带有`Object`陷阱。

# sql - PostgreSQL - 按数组排序

> ID：15664373
> 
> 赞同：6
> 
> 时间：2013-03-27T16:40:24.197
> 
> 标签：sql, postgresql, sql-order-by, aggregate, set-returning-functions

我有 2 个表 - course 包含课程的 ID 和名称，tagCourse 包含每个课程的标签。

```
course                    tagcourse
------------            ----------------
PK id_course            PK tag
   name                 PK, FK id_course 
```

我想编写一个函数，通过给定的标签数组搜索课程并返回按匹配标签数量排序的课程。但是我不知道如何正确有效地编写它。请帮我。

IE。

```
CREATE OR REPLACE FUNCTION searchByTags(tags varchar[])
RETURNS SETOF.....
  RETURN QUERY SELECT * FROM course c INNER JOIN tagcourse tc ON c.id_course = tc.id_course
  WHERE ???  ORDER BY ???

END.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:00:09.397

```
CREATE OR REPLACE FUNCTION search_by_tags(tags varchar[])
  RETURNS TABLE (id_course integer, name text, tag_ct integer) AS
$func$
   SELECT id_course, c.name, ct.tag_ct
   FROM  (
      SELECT tc.id_course, count(*)::int AS tag_ct
      FROM   unnest($1) x(tag)
      JOIN   tagcourse tc USING (tag)
      GROUP  BY 1                      -- first aggregate ..
      ) AS ct
   JOIN   course c USING (id_course)   -- .. then join
   ORDER  BY ct.tag_ct DESC            --  more columns to break ties?
$func$  LANGUAGE sql; 
```

*   用于[`unnest()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)从您的输入数组生成一个表格，就像[@Clodoaldo 已经演示的那样](https://stackoverflow.com/a/15664810/939860)。

*   为此，您不需要 plpgsql。使用简单的 SQL 函数更简单。

*   我使用`unnest($1)`(with positional parameter) 而不是`unnest(tags)`，因为后者仅对 SQL 函数中的 PostgreSQL 9.2+ 有效（与 plpgsql 不同）。[我在这里引用手册](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html#XFUNC-SQL-FUNCTION-ARGUMENTS)：

> 在较旧的数值方法中，使用语法引用参数`$n`：`$1`指第一个输入参数，`$2`第二个输入参数，依此类推。无论是否使用名称声明了特定参数，这都将起作用。

*   `count()`返回[`bigint`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)。您需要将其强制转换`int`为匹配声明的返回类型或声明返回的列作为`bigint`开头。

*   使用[`USING`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)(equi-joins):`USING (tag)`而不是`ON tc.tag = c.tag`.

*   *首先*聚合*然后*加入另一个表通常更快。减少所需的连接操作。[根据评论中@Clodoaldo 的](https://stackoverflow.com/questions/15664373/postgresql-order-by-an-array/15674585#comment22260804_15674585)
    问题，这里有一个[**SQL Fiddle**](http://www.sqlfiddle.com/#!15/5e86a/1)来演示差异。[](http://www.sqlfiddle.com/#!15/5e86a/1)

***   OTOH，如果您在加入后进行聚合，则不需要子查询。更短，但可能更慢：** 

 **```
SELECT c.id_course, c.name, count(*)::int AS tag_ct
FROM   unnest($1) x(tag)
JOIN   tagcourse tc USING (tag)
JOIN   course     c USING (id_course)
GROUP  BY 1
ORDER  BY 3 DESC;  --  more columns to break ties? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:59:42.367

```
create or replace function searchByTags(tags varchar[])
returns table (id_course integer, name text, quantitiy integer)
as $$
    select *
    from (
        select c.id_course, c.name, count(*) quantity
        from
            course c
            inner join
            tagcourse tc on c.id_course = tc.id_course
            inner join
            unnest(tags) s(tag) on s.tag = tc.tag
        group by c.id_course, c.name
    ) s
    order by quantity desc, name
    ;
$$ language sql; 
```**

# python - 在python中覆盖一个实例（覆盖/复制自我）

> ID：15664374
> 
> 赞同：0
> 
> 时间：2013-03-27T16:40:25.657
> 
> 标签：python, instance, self

在**elif**之后的行中，我将参数**文本**分配给 **self**。尝试覆盖/复制当前实例是徒劳的。

```
class Someclass(object):
    def __init__(self, text):
        if type(text) == type(""):
            self._get_lines(text)
            self._parse_stats()
        elif type(text) == type(self):
            self = text
        else:
            raise TypeError() 
```

**self**被赋值，但只在**init** ()范围内

是否可以以这种方式（或类似方式）复制一个实例，或者我是否需要通过并将每个实例变量复制到一个新实例。还是怎么退货？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:55:51.080

覆盖`self`不会影响实例本身。您可以通过覆盖从构造函数返回不同的对象`__new__`。

```
def SomeClass(object):
    def __new__(cls, text):
        if isinstance(text, SomeClass):
            #return a copy of text. maybe..
            return copy.copy(text) 
        elif isinstance(text, basestring):
            #return a new instance. __init__ will handle the rest
            return super(SomeClass, cls).__new__(text)  
        else:
            raise TypeError

    def __init__(self, text):
        .... 
```

# ruby - 正则表达式修改文本

> ID：15664376
> 
> 赞同：3
> 
> 时间：2013-03-27T16:40:30.300
> 
> 标签：ruby, regex

我可以使用正则表达式将文本连接到其他文本吗？

我有一个字符串，包括：

```
"bird dog fish" 
```

我想输出：

```
"bird catdog fish" 
```

我会用它`gsub`来完成这个吗？我很困惑，因为如果我使用匹配“狗” `gsub`，我将不得不用“猫狗”替换“狗”，而不是仅仅在它的前面添加“猫”。如何将一些文本添加到特定匹配项？我必须使用扫描或其他东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:43:41.243

换货有什么问题？

```
>>> "bird dog fish".gsub(/(dog)/, 'cat\1')
=> "bird catdog fish" 
```

这`\1`是对`(dog)`捕获组的引用。当然，`(dog)`可以是任何有效的正则表达式，所以这个例子可以很容易地用于更复杂的情况。

如果需要，您可以拥有多个捕获组。

```
>>> "bird dog fish".gsub(/(dog)(.*)(sh)/, 'cat\1\3\2')
=> "bird catdogsh fi" 
```

Ruby 1.9 引入了*命名捕获组*：

```
>>> "bird dog fish".gsub(/(?<mydog>dog)/, 'cat\kmydog')
=> "bird catdog fish" 
```

这是鲁比。**总是**有很多方法可以做到这一点。更多可以在标准文档中找到。

# ruby-on-rails - Include_blank : 编辑视图中的错误值

> ID：15664377
> 
> 赞同：0
> 
> 时间：2013-03-27T16:40:33.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的表单中有一个非强制性的选择字段。所以我写了这个：

```
<% = f.select :company_id, options_from_collection_for_select(@companies, "id", "name"), :include_blank => true %> 
```

当它是“新”视图时，它可以工作。但是当我想修改现有对象时，即使有 company_id 值，该字段也是空白的。

正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:24:10.003

需要一个选定的`product_from_collection_for_select`元素。

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_from_collection_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_from_collection_for_select)

你可以这样写：

```
<% = f.select :company_id, options_from_collection_for_select(@companies, "id", "name", f.object.company_id), :include_blank => true %> 
```

# sql - sql查询组合

> ID：15664379
> 
> 赞同：0
> 
> 时间：2013-03-27T16:40:40.220
> 
> 标签：sql

我有下面的三个查询，我想将它们组合成一个查询，所以我得到三列按县列出的结果。我尝试对所有表进行内部连接，但我得到了错误的数据。如何结合这三个查询并按县分组？

```
select co.Description
from Counties as co
group by co.Description

select [Total DLL Children] = SUM(cd.NumberOfLanguageSpeakers)
from ClassroomDLL as cd
  inner join Classrooms as c on cd.Classroom_Id = c.Id
  inner join Sites as s on c.Site_Id = s.Id
  inner join Profiles as p on s.Profile_Id = p.Id
  inner join Counties as co on p.County_Id = co.Id
group by co.Description

select
  [Total Children] = (SUM(demo.NumberOfPreschoolers)
     + SUM(demo.NumberOfToddlers) + SUM(demo.NumberOfInfants))
from ClassroomDemographics as demo
  inner join Classrooms as c on demo.Classroom_Id = c.Id
  inner join Sites as s on c.Site_Id = s.Id
  inner join Profiles as p on s.Profile_Id = p.Id
  inner join Counties as co on p.County_Id = co.Id
group By co.Description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:28:44.660

你可以使用子查询来做到这一点

```
 select co.Description, demo.[Total Children], cd.[Total DLL Children]
 from Classrooms as c
 left outer join (select SUM(NumberOfPreschoolers) + SUM(NumberOfToddlers) + SUM(NumberOfInfants) as [Total Children], Classroom_id 
                    from ClassroomDemographics group by Classroom_id) as demo on demo.Classroom_id = c.Id
 left outer join (select SUM(NumberOfLanguageSpeakers) as [Total DLL Children], Classroom_id 
                    from ClassroomDLL group by Classroom_id) as cd on cd.Classroom_id = c.Id
 inner join Sites as s on c.Site_Id = s.Id
 inner join Profiles as p on s.Profile_Id = p.Id
 inner join Counties as co on p.County_Id = co.Id
 group By co.Description 
```

# ios - ios - 尝试使用 UrbanAirship 创建推送通知时，如何指定要登陆的屏幕？

> ID：15664385
> 
> 赞同：3
> 
> 时间：2013-03-27T16:40:59.787
> 
> 标签：ios, push-notification, apple-push-notifications, urbanairship.com

我正在使用 UrbanAirship 添加推送通知。我的 AppDelegate.m 中有这两种方法

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //Create Airship options dictionary and add the required UIApplication launchOptions
    NSMutableDictionary *takeOffOptions = [NSMutableDictionary dictionary];
    [takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

    // Call takeOff (which creates the UAirship singleton), passing in the launch options so the
    // library can properly record when the app is launched from a push notification. This call is
    // required.
    //
    // Populate AirshipConfig.plist with your app's info from https://go.urbanairship.com
    [UAirship takeOff:takeOffOptions];

    // Set the icon badge to zero on startup (optional)
    [[UAPush shared] resetBadge];

    // Register for remote notfications with the UA Library. This call is required.
    [[UAPush shared] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                                         UIRemoteNotificationTypeSound |
                                                         UIRemoteNotificationTypeAlert)];

    // Handle any incoming incoming push notifications.
    // This will invoke `handleBackgroundNotification` on your UAPushNotificationDelegate.
    [[UAPush shared] handleNotification:[launchOptions valueForKey:UIApplicationLaunchOptionsRemoteNotificationKey]
                       applicationState:application.applicationState];

    // Override point for customization after application launch.
    return YES;
} 
```

这个方法：

```
// Implement the iOS device token registration callback
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    UALOG(@"APN device token: %@", deviceToken);

    // Updates the device token and registers the token with UA. This won't occur until
    // push is enabled if the outlined process is followed.
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSString *alias = [defaults objectForKey:@"user_id"];
    [[UAPush shared] setAlias:@"test-alias"];
    [[UAPush shared] registerDeviceToken:deviceToken];
} 
```

我从这里的 UrbanAirship 说明中得到它们：[https ://docs.urbanairship.com/display/DOCS/Getting+Started:+iOS:+Push](https://docs.urbanairship.com/display/DOCS/Getting+Started:+iOS:+Push)

但我很困惑如何指定我希望推送通知登陆的屏幕。这是在哪里做的？而且，我的服务器会在推送的同时发送一些 JSON。我在哪里以及如何从该 JSON 中提取数据？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:34:26.227

您正在将 JSON 传递给该`handleNotification`方法。这是您编写的方法，还是`urbanairship`代码的一部分？（我不确定他们是否提供除了服务器代码之外的客户端代码）。如果它是您编写的方法，您可以在该方法中访问 JSON 中的数据。如果没有，您可以编写自己的方法并将相同的数据传递给它。

仅当通知到达时应用程序未运行并且用户点击通知打开应用程序时，您才可以通过这种方式访问​​通知 JSON。如果用户点击应用程序启动图标，该数据将丢失。

您可以使用 JSON 中的自定义属性来指定登录屏幕。您有责任解析该属性并确定要显示的视图。

如果应用程序在前台运行时通知到达，您还应该实现`application:didReceiveRemoteNotification:`以处理通知数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:34:40.957

您必须在应用程序委托中处理远程推送通知：

```
- (void)application:(UIApplication *)app didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

您可以从这里访问您的根视图控制器并触发其他视图控制器的显示。

从文档：

> 如果应用正在运行并收到远程通知，应用会调用此方法处理通知。您对此方法的实现应使用通知来采取适当的行动。例如，您可以将其用作连接服务器并下载正在等待应用程序的数据的信号

userInfo 字典包含您通过城市飞艇发送的附加数据。

您可以在[参考资料中找到更多信息](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T17:36:36.283

简短的回答是：您没有（因为没有为您提供该功能。）

如果在您的应用程序运行时收到推送，`-[UIApplicationDelegate application:didReceiveRemoteNotification:]`将被调用。在您实施此方法时，您有责任采取适当的行动（例如显示消息、导航到应用程序的特定区域。）

* * *

[从文档中](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3adidReceiveRemoteNotification%3a)：

> 如果应用正在运行并收到远程通知，应用会调用此方法处理通知。您对此方法的实现应使用通知来采取适当的行动。例如，您可以将其用作连接服务器并下载正在等待应用程序的数据的信号。
> 
> userInfo 字典包含其值是另一个字典的 aps 键。虽然您不需要 aps 字典中的信息，但您可以使用以下键检索其内容：
> 
> userInfo 字典也可能有提供者根据 JSON 模式定义的自定义数据。自定义数据的属性应与 aps 字典在同一级别指定。但是，不应将自定义属性用于海量数据传输，因为每个通知有严格的大小限制（256 字节）并且无法保证交付。

# sql - 更新语句中的 VB.NET 语法错误

> ID：15664388
> 
> 赞同：0
> 
> 时间：2013-03-27T16:41:08.943
> 
> 标签：sql, vb.net, oledb

我目前正在做一个简单的项目，显示人员列表，基本上表明他们是在办公室还是在办公室。人们还可以编辑列表以指示他们是在办公室还是在外面，并更新一条消息，说明他们什么时候回来。

我的问题是，当我更新列表时，我收到一条错误消息，指出我的更新语句中存在语法错误，但我找不到它。我正在使用 Visual Studio 2012，在 VB.NET 中开发，并使用访问数据库，通过 OleDB 连接访问。

这是有问题的VB代码

```
 Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    If InOutComboBox.SelectedItem = "IN" Then
        MessageTextBox.Text = ""
    End If
    con = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=..\..\People.mdb")
    con.Open()
    If ListView1.SelectedIndices.Count > 0 Then
        Dim comStr As String = "UPDATE tblStaffNames SET OutIn = '" & InOutComboBox.SelectedItem & "', Note = '" & MessageTextBox.Text & "' WHERE recid = " & ListView1.SelectedItems(0).SubItems(0).Text
        cmd = New OleDbCommand(comStr, con)
        Try
            cmd.ExecuteNonQuery()
        Catch ex As Exception
            MessageBox.Show(ex.Message & " - " & ex.Source)
        End Try
    End If
    ListView1.Clear()
    LoadList()

End Sub 
```

这是我运行代码时 comStr 的示例值

```
UPDATE tblStaffNames SET OutIn = 'OUT', Note = 'on vacation' WHERE recid = 26 
```

任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:53:31.687

[NOTE](http://support.microsoft.com/kb/321266)是 Jet-MsAccess 的保留关键字。
在将命令提交给数据库引擎之前，您需要用方括号进行封装

您的查询中还有另一个大问题。不能信任用户输入使用字符串连接直接发送到数据库。您应该使用参数化查询（[Sql Injection](https://stackoverflow.com/questions/332365/how-does-this-sql-injection-work)）

```
Using con = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=..\..\People.mdb")
    con.Open()
    If ListView1.SelectedIndices.Count > 0 Then
        Dim comStr As String = "UPDATE tblStaffNames SET OutIn = ?, [Note] = ?" & _ 
               " WHERE recid = ?"
        cmd = New OleDbCommand(comStr, con)
        cmd.Parameters.AddWithValue("@p1", InOutComboBox.SelectedItem)
        cmd.Parameters.AddWithValue("@p2", MessageTextBox.Text)
        cmd.Parameters.AddWithValue("@p3", ListView1.SelectedItems(0).SubItems(0).Text)
        Try
            cmd.ExecuteNonQuery()
        Catch ex As Exception
            MessageBox.Show(ex.Message & " - " & ex.Source)
        End Try
    End If
End Using 
```

注意参数顺序，在 OleDb 中是位置性的，因此每个参数都应该按照`?`占位符预期的确切顺序出现在 Parameters 集合中。

此外，如您所见，我还添加了 Using 语句，以确保在您完成使用连接对象后正确关闭和处置连接对象。

# vb.net - 在异步事件中更改文本框的文本时，为什么传递的参数应该放在方括号中？

> ID：15664389
> 
> 赞同：0
> 
> 时间：2013-03-27T16:41:09.610
> 
> 标签：vb.net, visual-studio-2010, .net-4.0

我不明白为什么子程序语法是这样的：

```
Private Sub SetText(ByVal [text] As String)
    ' InvokeRequired required compares the thread ID of the
    ' calling thread to the thread ID of the creating thread.
    ' If these threads are different, it returns true.
    If Me.textBox1.InvokeRequired Then
        Dim d As New SetTextCallback(AddressOf SetText)
        Me.Invoke(d, New Object() {[text]})
    Else
        Me.textBox1.Text = [text]
    End If
End Sub 
```

原文链接为： [MSDN上的Thread Safe calls](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:01:29.680

`Text`是[语言关键字](http://msdn.microsoft.com/en-us/library/ksh7h19t.aspx)。它与[`Option Compare`](http://msdn.microsoft.com/en-us/library/ms172930.aspx)

它不是*保留*字，因为它只有有限的用途，所以你必须往下看第二张表，但它仍然是一个关键字。这意味着您要将其括在方括号中，以防止编译器将其视为关键字。

# c++ - 主包含文件 - 好的或坏的做法

> ID：15664393
> 
> 赞同：9
> 
> 时间：2013-03-27T16:41:27.750
> 
> 标签：c++, c

我见过不少项目（通常是游戏引擎），其中所有头文件都放在一个头文件中，有时还包含宏等，例如

```
// Master.h

#include "header1.h"
#include "header2.h"
#include "header3.h"
.
.
#include "headerN.h" 
```

然后在使用代码时，标准是只包含 Master.h 文件。

其他项目的工作基础是源文件应该只包含他们需要的头文件。

我想知道的是，是否有关于最佳实践的明确答案，最好是可衡量的结果，还是个人偏好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:51:09.110

大多数答案都提到了编译时间，而忽略了头文件的预编译具有巨大的编译时间优势这一事实，并且与主头文件技术一起工作得更好。

最好，如果在没有主头文件的情况下直接包含您的头文件（这使测试更容易），您的头文件应该可以工作。现代编译器已经优化了“如果多次包含则跳过头文件”逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:47:49.987

从编译时间的角度来看，这绝对是一种不好的做法，因为每次修改文件或触及任何包含的标头时，都必须从头开始重新编译您的项目。

根据经验，您应该在源文件中包含尽可能少的标头。但是，我可以看到一些可能会派上用场的情况，第三方库不会经常更改

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:47:57.717

由于编译 C++ 很昂贵并且可能特别慢，我想说如果有很多头文件（或者有很多实现文件），您可以通过避免不必要地包含未使用的头文件来避免一些额外的预处理和解析时间这又包括标题）。

那是为了实现库（你提到游戏引擎让我觉得我们在这里谈论的是库）。现在，为了方便起见，您绝对可以制作一个“主”包含文件，以方便那些使用该库并希望将所有内容放在一个地方（并且不会同时拥有数千个文件）的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T17:18:44.510

我还要补充一点，当库提供主文件时，只包含需要的标题是相当糟糕的主意。经常发生这样的标题不包含它需要的所有内容，而是取决于主标题将包含之前所有必需的标题的事实。所以，如果你是图书馆的用户，你通常没有太多选择，应该按照作者建议的方式。

这也是为什么拥有主标头可能被认为是不好的做法的原因——它使得更难检测到我上面描述的这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T16:48:38.943

在我看来，由于没有输入正确的头文件的名称而获得的 5 秒肯定不值得由这种方法引起的编译时间的潜在巨大增加。

我会说这是不好的做法。

然而，正如 H2CO3 所说，为框架的最终用户提供使用主头文件的可能性会非常有帮助。如果我没记错的话，GTK 会这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T18:26:13.033

我认为 C++ 中的一些问题——还有这个问题——你可以通过记住 C++“口头禅”来回答自己

> 不要为你不使用的东西付费。

尽可能节省您的用户（即您的代码/库的消费者）计算成本（运行时和编译时）。不要污染命名空间并在编译器（也在语法荧光笔等处）抛出比需要更多的东西。我认为这是 C++ 的礼貌方式 :)

# xml - Google maps api v3：对多个地址进行地理编码和创建地图标记

> ID：15664395
> 
> 赞同：1
> 
> 时间：2013-03-27T16:41:38.580
> 
> 标签：xml, google-maps-api-3, geocoding

我试图在[http://www.geocodezip.com/v3_SO_multipleGeocodedMarkersFromXml.html上做这个教程](http://www.geocodezip.com/v3_SO_multipleGeocodedMarkersFromXml.html)

我已经在我的服务器上包含了 downloadxml.js，但它仍然不起作用。地图加载但没有地图标记。谁能帮忙，因为我不明白为什么它不起作用。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>Google Maps Multiple Markers</title>
<script src="http://maps.google.com/maps/api/js?sensor=false"
type="text/javascript"></script>
<script type="text/javascript" src="scripts/downloadxml.js"></script>
<script type="text/javascript">
var map = null;
var geocoder = new google.maps.Geocoder();
var info_window = new google.maps.InfoWindow();
var bounds = new google.maps.LatLngBounds();
function geocodeAddress(xmldata)
{
    var address = xmldata.getElementsByTagName('address')[0].firstChild.data;
    var city = xmldata.getElementsByTagName('city')[0].firstChild.data;
    var address_google_map = address + ', ' + city + ', ON';
    var info_text = address + '<br />' + city + ' ON';

    geocoder.geocode
    ({'address': address_google_map},
    function (results, status)
    {
      if (status == google.maps.GeocoderStatus.OK) {
        createMarker(results[0].geometry.location, info_text);
      } else { 
        alert("geocode of "+ address +" failed:"+status);
      }
    });
}
 function createMarker(latlng, html)
{
 var marker = new google.maps.Marker
        ({
            map: map, 
            position: latlng
        });
google.maps.event.addListener(marker, 'click', function() {
            info_window.setContent(html);
            info_window.open(map, marker);
        });
bounds.extend(latlng); // Here we tell what are next viewport bounds
}
function initialize ()
{
var myLatLng = new google.maps.LatLng(45.2340684, -75.6287287);
var myOptions =
{
    zoom: 10,
    mapTypeControl: true,
    center: myLatLng,
    zoomControl: true,
    zoomControlOptions:
    {
        style: google.maps.ZoomControlStyle.SMALL
    },
    StreetViewControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById('map'), myOptions);
google.maps.event.addListener
(map, 'click',
function ()
{
    info_window.close();
});

downloadUrl('listings.xml',
function (listings_data)
{
    listings_data = xmlParse(listings_data);
    var markers = listings_data.documentElement.getElementsByTagName('listing');
    var geocoder = new google.maps.Geocoder();
    for (var i = 0; i < markers.length; i++)
    {
        geocodeAddress(markers[i]);
    }
google.maps.event.addListenerOnce(map, 'idle', function() {map.fitBounds(bounds);});
});
}
</script>
</head>
<body onload="initialize();">
<div id="map" style="width: 500px; height: 400px;"></div>

</body>
</html> 
```

和我的 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<listings>
<listing>
<address>4123 Rideau Valley Rd</address>
<city>MANOTICK</city>
</listing>
<listing>
<address>4456 Rideau Valley Rd</address>
<city>MANOTICK</city>
</listing>
<listing>
<address>111 Bridge St</address>
<city>MANOTICK</city>
</listing>
<listing>
<address>777 Bridge St</address>
<city>Ottawa</city>
</listing>
<listing>
<address>1333 Bridge Street</address>
<city>Manotick</city>
</listing>
</listings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:03:36.740

我看到一些问题..您缺少函数的`function`声明..因此将第 14 行更改为：`geocodeAddress(xmldata)`

```
function geocodeAddress(xmldata)
{
... other code continues here ... 
```

然后它应该可以工作，我还注意到`var bounds = new google.maps.LatLngBounds();`当你添加标记时你没有扩展你的对象，所以记得添加你的`createMarker`函数来包含它，像这样：

```
 function createMarker(latlng, html)
{
  var marker = new google.maps.Marker
            ({
                map: map, 
                position: latlng
            });
 google.maps.event.addListener(marker, 'click', function() {
                info_window.setContent(html);
                info_window.open(map, marker);
            });
    bounds.extend(latlng); // Here we tell what are next viewport bounds
} 
```

经过测试，之后一切正常：）干杯！

**编辑：**

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>Google Maps Multiple Markers</title>
<script src="http://maps.google.com/maps/api/js?sensor=false"
type="text/javascript"></script>
<script type="text/javascript" src="scripts/downloadxml.js"></script>
<script type="text/javascript">
var map = null;
var geocoder = new google.maps.Geocoder();
var info_window = new google.maps.InfoWindow();
var bounds = new google.maps.LatLngBounds();
function geocodeAddress(xmldata)
{
    var address = xmldata.getElementsByTagName('address')[0].firstChild.data;
    var city = xmldata.getElementsByTagName('city')[0].firstChild.data;
    var address_google_map = address + ', ' + city + ', ON';
    var info_text = address + '<br />' + city + ' ON';

    geocoder.geocode
    ({'address': address_google_map},
    function (results, status)
    {
      if (status == google.maps.GeocoderStatus.OK) {
        createMarker(results[0].geometry.location, info_text);
      } else { 
        alert("geocode of "+ address +" failed:"+status);
      }
    });
   }
 function createMarker(latlng, html)
{
  var marker = new google.maps.Marker
            ({
                map: map, 
                position: latlng
            });
 google.maps.event.addListener(marker, 'click', function() {
                info_window.setContent(html);
                info_window.open(map, marker);
            });
    bounds.extend(latlng); // Here we tell what are next viewport bounds
}
function initialize ()
{
var myLatLng = new google.maps.LatLng(45.2340684, -75.6287287);
var myOptions =
{
    zoom: 10,
    mapTypeControl: true,
    center: myLatLng,
    zoomControl: true,
    zoomControlOptions:
    {
        style: google.maps.ZoomControlStyle.SMALL
    },
    StreetViewControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP
   }
   map = new google.maps.Map(document.getElementById('map'), myOptions);
   google.maps.event.addListener
   (map, 'click',
  function ()
  {
    info_window.close();
  });

  downloadUrl('listings.xml',
  function (listings_data)
  {
    listings_data = xmlParse(listings_data);
    var markers = listings_data.documentElement.getElementsByTagName('listing');
    var geocoder = new google.maps.Geocoder();
    for (var i = 0; i < markers.length; i++)
{
geocodeAddress(markers[i]);
}
google.maps.event.addListenerOnce(map, 'idle', function() {map.fitBounds(bounds);});
});
}
</script>
</head>
<body onload="initialize();">
<div id="map" style="width: 500px; height: 400px;"></div>
</body>
</html> 
```

请记住在您放置 downloadxml.js 的位置创建脚本文件夹，因为它使用路径为：`<script type="text/javascript" src="scripts/downloadxml.js"></script>`另外不要忘记添加`listings.xml`

因此，您需要的文件组织为：

```
index.html
scripts/downloadxml.js
listings.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T16:36:14.847

受 Mauno 解决方案的启发，如果有人提供帮助，我按如下方式解决了这个问题：

```
function initialize() {
    geocoder = new google.maps.Geocoder();
    info_window = new google.maps.InfoWindow();
    var mapOptions = {
      center: new google.maps.LatLng(40.388397, 0.235348),
      zoom: 6,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
}

function codeAddress(data){
    var content = 
            '<div class="bocadillo">' +
                '<div class="titulo">'+
                    '<a href="tienda.php?id='+data.id+'">'+data.nombre+'</a>' +
                '</div>'+
                '<div class="content">'+
                    '<span>Ciudad: </span>'+data.ciudad+'<br />'+
                    '<span>Dirección: </span>'+data.direccion+'<br />'+
                    '<span>Teléfono: </span>'+data.telefono+'<br />'+
                    '<span>Email: </span>'+data.mail+'<br />'+
                '</div>'+
            '</div>'
            ;
    var direccion = data.direccion+", "+data.ciudad+", Spain";
    geocoder.geocode( { 'address': direccion}, function(results, status) 
        {
            if(status == google.maps.GeocoderStatus.OK)
            {
                createMarker(results[0].geometry.location, content);
            }
        });
}

function createMarker(latlng, html){
   var image = "img/general/map_icon.png";
   var marker= new google.maps.Marker(
       {
               map: map, 
               position: latlng,
               icon: image
       });
   google.maps.event.addListener(marker, 'click', function() {
        info_window.setContent(html);
        info_window.open(map, marker);
    });
} 
```

然后，给他们打电话：

```
$(document).ready(function(){
           initialize();
           for(var i=0;i<markers.length;i++){
               codeAddress(markers[i]);
           }
}); 
```

# java - 给定列表时，Java containsAll 不返回 true

> ID：15664396
> 
> 赞同：3
> 
> 时间：2013-03-27T16:41:43.540
> 
> 标签：java, contains, subset, hashset

我想检查一个数组是另一个数组的子集。

该程序打印错误，但我希望是真的。为什么 containsAll 不返回 true？

```
int[] subset;
subset = new int[3];
subset[0]=10;
subset[1]=20;
subset[2]=30;

int[] superset;
superset = new int[5];
superset[0]=10;
superset[1]=20;
superset[2]=30;
superset[3]=40;
superset[4]=60;
HashSet sublist = new HashSet(Arrays.asList(subset));
HashSet suplist = new HashSet(Arrays.asList(superset));
boolean isSubset = sublist.containsAll(Arrays.asList(suplist));
System.out.println(isSubset); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T16:43:30.200

有一个微妙的错误：

```
new HashSet(Arrays.asList(subset)); 
```

上面的行并*没有*像您预期的那样创建一组整数。`HashSet<int[]>`相反，它使用单个元素创建一个`subset`数组。

这与泛型不支持原始类型有关。

如果您声明`sublist`and `suplist`as ，您的编译器会告诉您错误`HashSet<Integer>`。

最重要的是，你在电话`suplist`中`sublist`走错了路`containsAll()`。

以下按预期工作：

```
 Integer[] subset = new Integer[]{10, 20, 30};
    Integer[] superset = new Integer[]{10, 20, 30, 40, 60};
    HashSet<Integer> sublist = new HashSet<Integer>(Arrays.asList(subset));
    HashSet<Integer> suplist = new HashSet<Integer>(Arrays.asList(superset));
    boolean isSubset = suplist.containsAll(sublist);
    System.out.println(isSubset); 
```

一个关键的变化是它使用`Integer[]`了`int[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:43:17.350

撇开您的初始化问题（由 NPE 确定）*不谈*，您已经混合了两组并且您实际上想要：

```
boolean isSubset = suplist.containsAll(Arrays.asList(sublist)); 
```

即`{10,20,30,40,60}`包含`{10,20,30}`？（当然，确实如此）

# java - 使用 SAX 解析超过 2 GB 的 XML 文件：异常：内部错误：fPreviousChunk == NULL

> ID：15664404
> 
> 赞同：1
> 
> 时间：2013-03-27T16:42:04.203
> 
> 标签：java, xml-parsing, saxparser

我们在解析 2 GB XML 文件时得到以下异常，我们发现这是 apache 的一个已知问题。解析大型 XML 的其他可用选项是什么？

```
java.lang.RuntimeException: Internal Error: fPreviousChunk == NULL
at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1094)
at javax.xml.parsers.SAXParser.parse(SAXParser.java:345)
at javax.xml.parsers.SAXParser.parse(SAXParser.java:223) 
```

Sax 版本是 2009 xercesImpl-2.2.1.jar 2009 xerces.jar

斯塔克斯呢？DOM 与流式处理

[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP2.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP2.html)

参考资料 [http://www.velocityreviews.com/forums/t165629-any-parser-can-handle-2-1gb-file.html](http://www.velocityreviews.com/forums/t165629-any-parser-can-handle-2-1gb-file.html)

那么我们可以假设以下吗？SAX 解析器不会处理大小超过 2 GB 的文件。对或错？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-18T21:09:05.610

今天，我也遇到了这个问题。这是我解决它的方法。首先，我从 Xerces 1.2.3 版中发现了这个错误弹出窗口。所以我尝试升级到 1.4.4，这是版本 1 的最新版本。但是，它在解析大约 80,000 条记录时会弹出此错误。后来，我刚刚删除了这个依赖，这意味着它将使用带有 JDK 的 Xerces 包。它有效。所以根本原因是过时的`xerces`库。

# ruby-on-rails - Rails - 嵌套模型：无法批量分配受保护的属性

> ID：15664405
> 
> 赞同：0
> 
> 时间：2013-03-27T16:42:07.127
> 
> 标签：ruby-on-rails, ruby, model, associations, nested-attributes

我有两个模型，`Car`和`Manufacturer`。这些模型非常简单：

```
class Car < ActiveRecord::Base
  attr_accessible :manufacturer_id, :car_name, :descr, ...
  belongs_to :manufacturer
  ...
end 
```

和

```
class Manufacturer < ActiveRecord::Base
  attr_accessible :name, :url
  has_many :cars
  ...
end 
```

`views/cars/_form.html.haml`用于输入数据的视图 ( )：

```
= form_for @car do |f|
  .field
  = f.label :car_name
  = f.text_field :car_name
  ...
  = f.fields_for @manufacturer do |m|
    .field
    = m.label :name
    = m.text_field :name
    ... 
```

当我发送用于保存输入信息的表单（转到`CarsController`）时，我收到此错误：

> 无法批量分配受保护的属性：制造商

我试图添加

> 接受嵌套属性：制造商

到`Car`模型，但它没有帮助我......

哪里有问题？

**编辑：** 我如何在控制器中保存数据：

```
@manufacturer = Manufacturer.new(params[:car][:manufacturer])
@car = @manufacturer.cars.build(params[:car]) 
```

**EDIT2：** 来自日志的数据：

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"4vcF5NV8D91DkxpCsqCzfbf05sOYsm7ssxZvPa3+kXo=",
 "car"=>{"car_name"=>"...",
 "descr"=>"...",
 "categroy_ids"=>["2",
 "3",
 "4"],
 "manufacturer"=>{"name"=>"Company",
 "url"=>"..."}},
 "commit"=>"Save",
 "id"=>"..."} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:22:07.787

你能通过汽车拯救制造商吗？

添加到**汽车**模型：

```
accepts_nested_attributes_for :manufacturer 
```

将**制造商**属性以及其他汽车属性添加到汽车模型中的**attr_accessible**调用：

```
attr_accessible :manufacturer_attributes, :car_name, :descr, ... 
```

将其保存在您的控制器操作（标准方式）中，如下所示：

```
def create
  @car = Car.new(params[:car])
  if @car.save
    redirect_to @car
  else
    render :new
 end
end 
```

确保您在**manufacturer_attributes**散列中发送的所有内容都在制造商模型（：名称，：url 等）中使用attr_accessible 调用列入白名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:20:03.673

您需要添加

> attr_accessible :manufacturer_id, :car_name, :descr, :manufacturer_attributes

在汽车模型。不要在处理它的汽车控制器中的保存方法中使用@manufacturer。

你应该阅读这篇文章：[Active Record 嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:30:13.170

您的 params[:car] 包含制造商属性.. 试试这个：

```
@manufacturer = Manufacturer.new(params[:car].delete(:manufacturer)) 
@car = @manufacturer.cars.build(params[:car]) 
```

你这样做并没有利用`has_many`关系。你可以通过[这个](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)

# node.js - node.js 的连接路由获取错误的参数信息

> ID：15664408
> 
> 赞同：0
> 
> 时间：2013-03-27T16:42:09.487
> 
> 标签：node.js, socket.io

我的 node.js 应用程序有问题。我正在使用包**connection**、**connection-route**、**socket.io**和**ejs**。

我的应用程序向 html 页面（通过 socket.io 连接）提供信息，这些信息由 ejs 模板管理。当我使用参数到达目的地时，例如`http://localhost:5001/machine/:id2`，会发生一些奇怪的事情。连接路由代码如下：

```
router.get('/machine/:mac_id', function (req, res, next) {
    var mac_index = req.params.mac_id.slice(1,req.params.mac_id.length);
    console.log(mac_index);
    res.writeHead(200, { 'Content-Type': 'text/html' });
    var str = mod_fs.readFileSync(mac_route + '/index.html', 'utf8') ;
    var ret = mod_ejs.render(str, { 
        filename: mac_route,
        title: "Machine Overview",
        /* other informations */
    });
    res.end(ret);
} 
```

该变量包含正确加载`mac_route`的文件的路径。`index.html`问题在于`mac_index`变量。在控制台上打印 3 行：

```
id2
unctions.js
query-1.9.1.js 
```

第一行显然是正确的，最后两行显然是不正确的，事实上这是两个 javascript 文件（我的文件`functions.js`和 jquery 的文件`jquery-1.9.1.js`）。这些文件包含在 index.html 文件的标头中。

HTML结构：

**header.html**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title> <%= title %> </title>
        <link rel='stylesheet' href='/style.css' type="text/css"/>
        <script src="http://localhost:5001/socket.io/socket.io.js"></script>
        <script language="javascript" type="text/javascript" src="functions.js"></script>
        <script language="javascript" type="text/javascript" src="jquery-1.9.1.js"></script>
    </head>
    <body>  
        <div id="header">
            ...
        </div>
        <div id="page"> 
```

**索引.html**

```
<% include /header.html %>
<div id="commands">
    ...
</div>
<div id="main">
    ... code of the page, manage informations received ...
</div>
<% include /footer.html %> 
```

**页脚.html**

```
 <div id="footer">
            ...
        </div>
    </div> <!-- Close the "page" div opened in the header //-->
</body>
</html> 
```

我找不到错在哪里。为什么将文件名作为`req`对象的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:47:37.510

这些文件的规范化 URL 是：

```
http://localhost:5001/machine/functions.js
http://localhost:5001/machine/jquery-1.9.1.js 
```

那些匹配你的路线（`/machine/:mac_id`），所以他们将被它处理。

尝试在路由 *之前*`connect.static`包含中间件：

 *```
app.use(connect.static(__dirname)); 
```

（假设您的 Connect 应用程序存储在`app`变量中，并且 JS 文件与您的 Node 脚本位于同一目录中；如果没有，请更改`__dirname`为指向 JS 文件所在的目录）。*

# c# - C#：调用事件时如何退出方法

> ID：15664415
> 
> 赞同：0
> 
> 时间：2013-03-27T16:42:29.027
> 
> 标签：c#, multithreading, smpp

我有一个附加事件，例如：

```
mySmppClient.evDeliver_Sm += new SmppClient.Deliver_SmEventHandler(mySmppClient_evDeliver_Sm);

mySmppClient_evDeliver_Sm(){
// have some code here.
} 
```

和另一种方法，如：`check_outbox();`

应用程序总是检查`check_outbox()`方法。

现在，如果代码调试指针进入 `check_outbox()`方法并同时触发事件，则应用程序将挂起。因为它开始为`mySmppClient_evDeliver_Sm()`.

我的问题是：如果事件触发，则 check_outbox 完成它的当前任务，然后它将调用`mySmppClient_evDeliver_Sm()`.

可能吗？或者有任何其他方法吗？或者我可以同步场景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:08:46.653

创建一个在线程之间共享的布尔变量（例如名为 KeepRunning）。在您的方法中循环，定期检查布尔变量，如果它为假则退出该方法。在控制线程中，当您希望方法退出时，将布尔变量设置为 false。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T16:55:52.707

你也许应该`mySmppClient_evDeliver_Sm()`在一个新线程中运行，你可以随时中止它。

# jquery - 一键更改链接文本和隐藏链接

> ID：15664418
> 
> 赞同：0
> 
> 时间：2013-03-27T16:42:35.537
> 
> 标签：jquery, text, hyperlink

我真的需要一些指导。

我有 3 个具有 3 个不同 ID 的链接：btn1、btn2 和 btn3。当我点击 btn2 时，我想更改 btn2 & btn3 上的链接文本，并隐藏 btn1。当我再次点击 btn2 时，我想恢复到 btn2 & btn 3 上的原始文本，并显示 btn1。

我已经在 jsfiddle 中开始了这个并尝试了各种选项，但我真的很难过。有人可以给我一些指导吗？谢谢！

http://jsfiddle.net/squirc77/EQFRY/>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:52:05.227

试试下面的，你没有说 btn3 中的文本应该是什么所以我在我的例子中换掉了“重置”和“清除”：

```
$('#btn2').click(function () {
    var $this = $(this);
    if ($this.text() == 'Search & Save Filter'){
        $this.text('Filter Saved');
        $('#btn3').text('Reset');
        $('#btn1').hide();
    } else {
        $this.text('Search & Save Filter');
        $('#btn3').text('Clear');
        $('#btn1').show();
    }
}); 
```

[你的jsFiddle](http://jsfiddle.net/EQFRY/3/)的更新版本

# matrix - 三.js父子目标跟踪

> ID：15664436
> 
> 赞同：0
> 
> 时间：2013-03-27T16:43:35.010
> 
> 标签：matrix, rotation, three.js, tracking, quaternions

所以，这里有一道向量、矩阵、旋转、四元数的题供three.js高手们答疑解惑！

我有一个父对象`position(0,0,275)`with `direction(0,0,-1)`, +y up 和`rotation(0,0,0)`.

附加到父对象的是具有关系的子对象：

```
 rel_position(.5, 0, 0)
 rel_rotation(0, 0, 0) 
```

我在场景中也有一个目标：

```
 position(0, 100, 0) 
```

考虑一艘具有俯仰、偏航和横滚的船（母船）。它有一个带有俯仰和偏航的炮塔（子）。炮塔需要以给定的转速 (rad/s) 跟踪目标。

我花了 5 天时间试图获得一个合适的跟踪算法。我能做的最好的事情是删除手动更新矩阵的父子节点上的 matrixAutoUpdate 功能。然后使用 child.matrixWorld 为当前子旋转创建旋转矩阵或四元数。然后我可以创建一个从子位置查看目标的辅助 Object3D。我可以区分孩子和次要 Object3D 之间的差异，并在 rad/s 的基础上对四元数进行分析。但是，当我将滚动添加到父对象或目标旋转到八分圆之外时`(+, +, +)`，子旋转（或四元数）计算会崩溃，从而导致疯狂旋转。

对于子 Object3D 的跟踪算法的任何方向将不胜感激。我即将进行的项目中将引用您的努力。

感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:04:21.283

所以这就是答案！@Stemkoski，感谢您的指导。我对昨天曝光的最终解决方案采取了类似的方法。由于反转矩阵，它的计算能力有点昂贵，但它工作得很好。首先，创建一个新矩阵，如下所示：

```
var m = new THREE.Matrix4().getInverse(parent.matrix).multiply(target.matrix); 
```

这会根据父对象的旋转将 XYZ 轴的参考系旋转到新坐标 X'Y'Z'。结果是 X'Y'Z' 参考框架中目标的 Object3D 矩阵。现在通过从矩阵“m”创建一个新的 Vector3，我们可以使用以下方法获得一个相对位置：

```
var rel_pos = new THREE.Vector3().getPositionFromMatrix(m, 'XYZ'); 
```

现在创建一个 Faux 对象，从孩子（炮塔）的位置直接看目标

```
var child_faux = new THREE.Object3D();  //can be created outside the loop
child_faux.position.copy(child.position);   //copy the child local position
child_faux.lookAt(rel_pos);     //look at the target 
child_faux.updateMatrix();     //Update the Matrix4 element for use in a second 
```

最后，通过将 child_fuax 设置为 lookAt 对象，我们自动设置了 child_faux.rotation。我们可以使用以下方法获得当前 child.rotation 和 child_faux.rotation 之间的相对旋转：

```
var diff = turret_target.rotation.sub(turret.rotation); 
```

从这里我们可以设置一个简单的算法来旋转炮塔（+ 或 -）（x 和 y），直到 diff（x 和 y）变为 0。

```
var trackrate = .2 * delta;
var diff = turret_target.rotation.sub(turret.rotation);
turret.rotation.x += diff.x/Math.abs(diff.x) * trackrate;
turret.rotation.y += diff.y / Math.abs(diff.y) * trackrate;
turret.updateMatrix(); 
```

我们有它......在父组中旋转的子对象的目标跟踪算法！谢谢阅读！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:07:22.870

`lookAt`也许和方法的某种组合`worldToLocal`会起作用？由于需要将目标物体的位置转换为炮塔的局部坐标，然后相应地改变炮塔的旋转，这样如何：

```
turret.lookAt(  turret.worldToLocal( target.position.clone() )  ) 
```

# ruby-on-rails - 死锁后数据丢失 - SQL Server 2008、Ruby on Rails、Apache、Phusion Passenger、Linux、FreeTDS

> ID：15664441
> 
> 赞同：1
> 
> 时间：2013-03-27T16:43:42.557
> 
> 标签：ruby-on-rails, sql-server-2008, passenger, freetds

死锁后数据丢失 - SQL Server 2008、Ruby on Rails、Phusion Passenger、Linux、FreeTDS

我遇到了一个神秘问题，该问题导致我负责的 Ruby on Rails 内部网应用程序中的数据丢失。如果这不是严格意义上的编程问题，我深表歉意——至少我维护了应用程序的 Ruby 代码。迄今为止，该问题已在两年内发生了 3 次。

环境：

*   Linux - 红帽企业服务器 5.2
*   Apache 2 网络服务器 (httpd-2.2.3-11.el5_2.4.rpm)
*   Phusion 乘客 2.2.15
*   Ruby 1.8.7，Rails 2.3.8，带有宝石：
    *   actionmailer (2.3.8)
    *   动作包 (2.3.8)
    *   活动记录（2.3.8）
    *   activerecord-sqlserver-适配器 (2.3.8)
    *   主动资源（2.3.8）
    *   主动支持 (2.3.8)
    *   阿卡米 (1.2.0)
    *   建设者（3.0.0）
    *   异常通知（2.3.3.0）
    *   快速线程（1.0.7）
    *   玉 (0.4.6)
    *   httpi (1.1.1)
    *   哑剧类型 (1.16)
    *   nokogiri (1.4.4)
    *   海苔 (1.1.3)
    *   乘客 (2.2.15)
    *   机架 (1.1.0)
    *   导轨 (2.3.8)
    *   耙子 (0.8.7)
    *   ruby-net-ldap (0.0.4)
    *   rubyjedi-actionwebservice (2.3.5.20100714122544)
    *   萨翁 (1.1.0)
    *   芥末 (2.5.1)
    *   will_paginate (2.3.14)
*   SQL Server 2008 数据库服务器
*   通过 ActiveRecord 访问数据库
*   数据库驱动：freetds-0.82、unixODBC-2.3.0.tar.gz、ruby-odbc-0.99991.tar.gz

症状：

*   请求锁定数据库资源的用户操作涉及死锁情况。
*   SQL Server 通过杀死死锁所涉及的进程来解决死锁，这样至少其中一些进程可以成功完成。
*   在 Rails 应用程序端，死锁导致未处理的异常（我通过 exception_notification gem 得到通知）
*   死锁之后，活动 Rails 进程的数量在增加（这触发了我们监控系统的另一个通知），进程似乎挂起
*   发生这种情况的原因尚不清楚。这些进程似乎挂在数据库操作中（根据 Rails 日志）。通常我会期望 SQL Server 的死锁解决功能不会留下阻塞进程。
*   在前两种情况下，我重新启动了 Web 服务器作为对异常/挂起进程的反应。在第三种情况下（我正在度假），没有人对通知做出反应，但周末运行的 cronjob 显然也停止了进程（通过触摸“restart.txt”通过乘客软重启，效果相同）
*   网络服务器重启后，用户报告数据丢失。在 Web 服务器重新启动之前，从用户的角度来看，数据已按预期处理。与我们通信的其他系统中的 Rails 日志和数据似乎表明事务已正确提交。Web 服务器重新启动后，突然间，自死锁发生以来的所有数据库更改都丢失了。例如，我们有一个“users”表，其中有一个“last_access”列，该列在每个用户操作时都会更新。Web 服务器重新启动后，最新的“last_access”值是一天前的。所有事务似乎都丢失了，只有 @@IDENTITY 值继续使用数据丢失之前设置的值。
*   我从我们的 IT（维护数据库服务器）那里收到的信息似乎表明所有丢失的数据库操作都是一个巨大事务的一部分，该事务缺少最终的 COMMIT。当然，我期望的是每个 Rails 用户操作都会运行一个或多个单独的事务，但 SQL Server 事务日志将所有操作显示为一个巨大事务的一部分。

在我看来，好像发生了这样的事情：

*   其中一个涉及的组件（例如 Phusion Passenger、FreeTDS、SQL Server）中的错误导致并行运行的 Rails 进程共享数据库连接，并且可能还导致进程挂起。
*   涉及的进程之一是在事务中并在提交之前挂在某处
*   由于其他进程共享相同的连接（正如我假设的那样），它们也在同一个事务中
*   由于进程共享连接，因此用户能够看到数据更改（在 Web 服务器重新启动之前），即使 COMMIT 处于未决状态。
*   Web 服务器重新启动迫使连接中止并回滚事务。

这有意义吗？我想知道是否有人有类似的经历或提示我可以进一步研究。我怀疑Passenger中的一个错误可能已经分叉了数据库连接的文件描述符，但我无法重现它。乘客似乎在每个分叉上正确地创建了新的数据库连接。

我正在考虑将数据库的隔离模型更改为“读取提交的快照”以减少死锁的数量，但我知道这并不能解决根本原因，而且这可能会给我带来其他问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:04:10.743

我现在已经能够自己追踪问题，并希望与现在或将来可能面临类似问题的任何人分享解决方案。

发生了以下情况：

*   作为事务的一部分运行的 UPDATE 操作涉及死锁
*   SQL Server 选择了 UPDATE 操作作为死锁牺牲品并回滚了事务
*   导致`ActiveRecord::StatementInvalid`这样的异常：

    ```
    A ActiveRecord::StatementInvalid occurred in (...):

    ODBC::Error: 37000 (1205) [FreeTDS][SQL Server]Transaction (Process ID 55) was deadlocked on lock resources with another process and has been chosen as the deadlock victim. Rerun the transaction.: UPDATE [(....tablename....)] SET [position] = 1 WHERE [id] = 795419
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract_adapter.rb:221:in `log' 
    ```

*   在`ActiveRecord::ConnectionAdapaters::DatabaseStatements.transaction()`中，异常处理方式如下：

    ```
    rescue Exception => database_transaction_rollback
      if transaction_open && !outside_transaction?
        transaction_open = false
        decrement_open_transactions
        if open_transactions == 0
          rollback_db_transaction
        else
          rollback_to_savepoint
        end
      end
      raise unless database_transaction_rollback.is_a?(ActiveRecord::Rollback)
    end 
    ```

*   `transaction_open`是`true`在这一点上。该方法`outside_transaction?`在 SQL Server 适配器中以这种方式实现：

    ```
    def outside_transaction?
      info_schema_query { select_value("SELECT @@TRANCOUNT") == 0 }
    end 
    ```

*   `@@TRANCOUNT`此时为 0，因为 SQL Server 已经回滚了事务 - 如我的调试输出所示：

    ```
    SQL (1.0ms)   SELECT @@TRANCOUNT
    => TRANCOUNT=0 
    ```

*   因此`outside_transaction?`返回`true`，并且上面显示的异常处理代码不执行回滚。到现在为止还挺好。

*   异常由上面显示的代码重新抛出，并被我捕获，`ApplicationController`因为：

    ```
    class ApplicationController < ActionController::Base
      rescue_from Exception, :with => :render_error 
    ```

*   该`render_error`方法将异常消息存储在 flash 变量中：

    ```
    flash[:exception_message] = exception.message 
    ```

*   flash 变量存储在会话中。而且由于我使用的是`active_record_store`，会话数据将存储在数据库表中`sessions`。（我实际上正在使用`smart_session_store`，但这在这方面没有区别）。于是另一笔交易开始了……

    ```
    EXECUTE (1.2ms)   BEGIN TRANSACTION
    SQL (1.1ms)   SELECT session_id, data,id FROM sessions WHERE id=150091
    EXECUTE (1.3ms)   UPDATE sessions SET updated_at=CURRENT_TIMESTAMP, data='BAh7FDoWdW9faGlk(........)' WHERE id=150091
    CACHE (0.0ms)   SELECT @@TRANCOUNT
    => TRANCOUNT=0 
    ```

*   虽然事务已经开始，但`SELECT @@TRANCOUNT`返回 0 - 该值是从缓存中获取的！这就是灾难发生的地方。

*   该`transaction`方法现在认为事务不再处于活动状态，因此不**执行**COMMIT：

    ```
    if outside_transaction? # (this does the SELECT @@TRANCOUNT)
      @open_transactions = 0      # Getting here!
    elsif transaction_open
      decrement_open_transactions
      begin
        if open_transactions == 0
          commit_db_transaction   # NOT getting here!
        else
          release_savepoint
        end
      rescue Exception => database_transaction_rollback
        if open_transactions == 0
          rollback_db_transaction
        else
          rollback_to_savepoint
        end
        raise
      end
    end 
    ```

    结尾

*   由于数据库连接保持打开状态（这似乎只在生产模式下完成，而不是在开发模式下完成），由同一工作进程处理的后续 Rails 操作都附加到此处保持打开状态的事务中。对于用户来说，看起来数据仍在正常处理中，因为他们通过交易的眼睛看到了一切。只有这一个工作进程保持活动状态 - 任何其他启动的工作进程都挂起，因为打开的事务锁定了各种数据库资源。当我重新启动 Web 服务器时，一个响应式工作进程被停止并且它的事务被回滚。这是数据丢失在应用程序中变得可见的地方。

我简要查看了上面显示的代码的较新（Rails 3.x）版本，在我看来，问题可能不再出现。该`transaction`方法似乎不再调用`outside_transaction?`，而是依赖于内部维护的事务状态。但是，由于我目前无法升级，我将在本地解决问题，可能通过`transaction`以与 Rails 3.x 类似的方式更改方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:41:47.273

首先，我承认我没有仔细阅读这个问题，但我有直觉和建议。我见过这样的问题，它们通常发生在具有许多模型的大型遗留应用程序中，其中一些模型具有到另一个数据库的连接池。在上述场景中，很容易在 ActiveRecord 的回调阶段引用使用另一个连接的模型。这会导致 ActiveRecord 开箱即用不支持的跨数据库事务。

如果您认为这可能是原因，请查看以下代码。确保您从不使用#establish_connection，如果使用，请仅在其他人继承的基类或连接类中使用它一次。我在这里有一个 github 要点（[https://gist.github.com/metaskills/4065702](https://gist.github.com/metaskills/4065702)），它显示了我在说什么。其次，确保您的模型在保存/事务期间没有与另一个连接池中的另一个模型通信。

# html - 单击时禁用隐藏标题工具提示文本？

> ID：15664445
> 
> 赞同：1
> 
> 时间：2013-03-27T16:43:55.993
> 
> 标签：html, css

如果我将标题属性设置为图像，那么当您将鼠标悬停在它上面时会出现一个工具提示。如果您单击（悬停时）它会消失。有没有办法在你点击时阻止它消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:56:28.660

我认为没有 javascript 解决方案，所以我使用了这个：http: [//jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T19:11:57.803

不知道如何通过 HTML/CSS 做到这一点，但您可以使用 Javascript 来代替？

这里有一个解释：

[http://www.w3schools.com/jsref/event_onclick.asp](http://www.w3schools.com/jsref/event_onclick.asp)

希望这对您有所帮助。

# ruby-on-rails - ruby on rails 中的简单关联架构和实现

> ID：15664449
> 
> 赞同：0
> 
> 时间：2013-03-27T16:44:03.673
> 
> 标签：ruby-on-rails, ruby, associations, nested-attributes, simple-form

关于我面临的一个简单问题的快速问题（我想以此作为一种方式来更深入地了解有关关联和导轨的一些事情）。开始：

两个相关的模型是

```
class Employee < ActiveRecord::Base
  attr_accessible :name
  attr_accessible :age

  belongs_to :role
  attr_accessible :role_id
end

class Role < ActiveRecord::Base
  attr_accessible :title
  attr_accessible :salary

  has_many :employees
end 
```

这样每个新员工都有固定的工资，根据他的角色（大多数情况下都是如此）。但是，如果我想为特定员工设置不同的工资怎么办？

到目前为止`simple_form`，我已经写了以下内容：

```
<%= f.input :name, label: 'Employee Name', :required => true %>
<%= f.association :role, as: :radio_buttons, :required => true %>
<%= f.input :salary, label: 'Employee Salary', :input_html => { :value => 0 }, :required => true %> 
```

这当然给了我一个`can't mass assign protected attributes: salary`错误。

为了解决这个问题，我添加`attr_accessible :salary`到`Employee`模型中，但这只是将错误更改为`unknown attribute: salary`.

据我了解，我必须首先在新员工中进行更改，然后在员工模型和控制器中进行更改，以便它接受工资值并知道如何处理它，对吗？

我也见过`accepts_nested_attributes_for`使用过的，但我不完全确定它应该放在关联的哪一边——因为我也不完全确定关联是以最佳方式构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:55:31.050

如果您实际上`salary`希望允许**在**. 在您的终端中，创建一个新的迁移并应用它`employees`**`Employee`**

 **```
rails generate migration AddSalaryToEmployees salary:integer
RAILS_ENV=development rake db:migrate 
```

顺便说一句，您不需要`attr_accessible`多次调用；它接受任意#的符号

```
attr_accessible :name, :age, :role_id, :salary 
```

另外，既然你提到了它，我会评论它：`accepts_nested_attributes_for`目前在你的模型中没有位置（鉴于你到目前为止显示的代码）。

* * *

要回答您在评论中提出的问题：

> 那不是代码重复（我的意思是两种模型都有薪水）吗？

不，它们有两个不同的目的。`:salary`in`Role`是适用于所有`Employees`与 that 相关联的默认薪水`Role`。`:salary`on`Employee`是一种“覆盖”，用于特殊情况下`Employee`的薪水不符合`Role`他们所关联的模式。

*   `Role`仅仅为此目的创建自定义是没有意义的（假设自定义薪水是唯一的区别`Employee`）
*   您不能更改`Role`自己的薪水，因为这会影响`Employees`与之相关的其他人的薪水`Role`

> 并且不需要另一种方法（如果没有专门设置，则确保将角色薪水设置为员工的薪水）？

另一种方法？否。如果尚未设置“覆盖” ，则自定义现有 attr_reader`salary`以`Employee`返回默认值？`Role`如果你想

```
def salary
  return role.salary if read_attribute(:salary).blank?
  read_attribute(:salary)
end 
```**

# java - 尝试使用容器，ArrayList 类

> ID：15664451
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:44:05.377
> 
> 标签：java

我正在尝试学习如何使用 java 的容器类。我在编程容器上找到了以下网址：[link](http://vapvarun.com/study/softE/john%20wiley%20and%20sons%20-%20programming%20with%20object-oriented%20programming/5399final/lib0041.html)

我无法让他们的示例代码工作，他们有

```
class ListOps {
    public static void main( String[] args )
    {
        List animals = new ArrayList();                                     //(A)
        animals.add( "cheetah" );                                           //(B)
        animals.add( "lion" );
        animals.add( "cat" );
       ....
       .... 
```

我无法让添加工作，我在令牌“猎豹”上收到语法错误删除这个令牌，我的代码：

```
public class cStringContainer {

    ArrayList animals = new ArrayList();                                     //(A)
    animals.add( "cheetah" ); // error hear, syntex error

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:49:14.520

您需要在类中使用方法，不能简单地将代码直接放在类中，除非它位于静态块中。从示例中复制 main 方法，它将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:49:16.773

主线怎么了？

```
public class cStringContainer {
public static void main( String[] args ) { 
ArrayList animals = new ArrayList();                                     //(A)
animals.add( "cheetah" ); // error hear, syntex error
}
} 
```

# javascript - $(' 是什么意思？ ').parent() 返回？

> ID：15664453
> 
> 赞同：2
> 
> 时间：2013-03-27T16:44:14.370
> 
> 标签：javascript, jquery

我正在开发一个 jQuery 小部件，它将事件附加到小部件的父级，但我无法判断它是否有父级。

例如;

```
var x = $('<div>');
x.mywidget();

........... in mywidget
_create : function () {
    var y = this.element.parent() === undefined ? this.element : this.element.parent();
    y.bind(....);
} 
```

在执行绑定语句之前，我需要检查小部件是否已添加到 DOM。如果它还没有被添加到 DOM 中，那么我将`this.element.bind(....)`改为绑定。

问题是`$('<div>').parent()`返回一个 jQuery 对象！我期待它会回来`undefined`。

所以我想知道当它不应该有父母时它会返回哪个父母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:45:07.547

您可以使用`myDiv.parent().length`来知道 jQuery 集是否为空。

但是，如果对象没有直接从 DOM 中删除，但它的父对象是，这将产生误报。

如果你想要一个可靠的检测，那么，你应该使用`jQuery.contains(document.documentElement, myDiv)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:45:23.110

它**总是**会返回一个对象。如果您想查看对象中是否有任何内容，您可以检查 ，您的检查也是`.length == 0`如此`$("<div>").parent().length == 0`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:45:03.187

检查返回的 jQuery 对象的长度。如果您的 div 没有父级，则返回的 jQuery 对象`.parent`将包装零个元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T16:47:20.360

所有 jQuery DOM 搜索和操作方法都返回一个包含 0 个或更多元素的 jQuery 集合。 `$("<div>").parent()`返回一个没有元素的集合（一个空集合）。您仍然可以在其上调用任何 jQuery 方法，但不受 DOM 元素的束缚，您可以做的事情非常有限。它将`.length`为零，并且在使用 迭代时不会到达回调`.each`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T16:48:20.330

我会检查 jQuery 对象的长度，因为 jQuery 总是会返回一个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T16:49:07.663

它将永远是父母，例如可以是身体

例如使用 jquery 数据来设置你的初始化标记

```
var wasInit = ( $(this).data("mypluginwasinit") !== undefined );
if(wasInit) return;
$(this).data("mypluginwasinit","yes"); 
```

# coldfusion - 对于连接，ColdFusion 使用 & JavaScript 使用 +

> ID：15664455
> 
> 赞同：0
> 
> 时间：2013-03-27T16:44:16.497
> 
> 标签：coldfusion

现在我在 cf10 服务器上，我更频繁地使用 cfscript。我的 JavaScript 代码中有一些使用 & 运算符的连接，而我应该使用加号连接字符串。

当您在 JavaScript 和 cfScript 之间来回切换时，有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:12:05.917

文档中提到了一些关于 CFScript 和[与 JavaScript 的区别](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec0a0e0-7ffa.html#WSc3ff6d0ea77859461172e0811cbec0a0e0-7ff2)：

> **与 JavaScript 的区别**
> 
> 尽管 CFScript 和 JavaScript 相似，但它们有几个关键区别。以下列表标识了与 JavaScript 不同的 CFScript 功能：
> 
> *   CFScript 使用 ColdFusion 表达式，它不是 JavaScript 表达式的超集或子集。特别是，ColdFusion 表达式不支持位运算符，并且 ColdFusion MOD 或 % 运算符的运行方式与相应的 JavaScript % 运算符不同：在 ColdFusion 中，运算符执行整数运算并忽略小数部分。ColdFusion 表达式还支持 JavaScript 中不支持的 EQV、IMP、CONTAINS 和 DOES NOT CONTAIN 运算符。
> *   变量声明（var 关键字）仅用于用户定义的函数和线程。
> *   CFScript 不区分大小写。
> *   所有语句都以分号结尾，代码中的换行符被忽略。
> *   赋值是语句，而不是表达式，因此不能在需要评估赋值操作的情况下使用。
> *   JavaScript 对象（例如 Window 和 Document）不可用。
> *   只有 ColdFusion 服务器处理 CFScript。没有客户端 CFScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T17:05:03.800

我可以感觉到这个问题很快就会结束，特别是如果您添加 javascript 标签并吸引人群。:)

有很多不同之处。这里有几个。

*   关联数组~=结构，但结构键默认都是大写的
*   数组索引从 1 开始
*   字符串没有以相同的方式转义。例如`\n`在 CF 中没有什么特别的
*   struct 文字只能`=`用于键值对，而不是`:`在 CF10 之前
*   正则表达式差异

# html - 在 IE6 CSS 中的锚标记内设置跨度样式时遇到问题

> ID：15664459
> 
> 赞同：0
> 
> 时间：2013-03-27T16:44:24.460
> 
> 标签：html, css, internet-explorer, sharepoint-2007, internet-explorer-6

我工作的公司仍然使用 IE6，因此我需要确保我的网站可以在 IE6 浏览器中运行。由于通过 SharePoint 2007 完成的代码设计的限制，我在样式设置方面遇到了问题。

当您将鼠标悬停在非活动选项卡上时，文本应从蓝色变为橙色。

```
<div class="webpartBody">
<div class="tabsWrapper">
    <a class="quickLinkTabs activeTab" href="#">
        <span class="tab0">Clinical</span>
    </a>
    <a class="quickLinkTabs" href="#">
        <span class="tab1">Business Services</span>
    </a>
    <a class="quickLinkTabs" href="#">
        <span class="tab2">Employees</span>
    </a>
    <a class="quickLinkTabs" href="#">
        <span class="tab3">Projects</span>
    </a>
    <a class="quickLinkTabs" href="#">
        <span class="tab4">Web Links</span>
    </a>
</div>
<!-- links -->
</div> 
```

jQuery 用于创建类，`quickLinkTabs`以便将 firstTab 和 lastTab 标记为此类，并且当前选择的选项卡是 activeTab。

在 SharePoint 环境之外仅使用此代码，我应用以下 CSS 来实现我正在寻找的效果。

```
.quickLinkTabs:hover
{
    color: #ff6600;
}
.quickLinkTabs span:hover
{
    color: #ff6600;
} 
```

一旦我将它应用到开发环境并在 SharePoint 生成的代码上尝试它，它就不再起作用了。我无法弄清楚障碍是什么 - 是 SharePoint 吗？是我的 CSS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:55:46.443

首先，SPAN 没有任何目的。您应该调整 A 标记的样式以执行相同的功能。

然后使用：

```
.tabsWrapper a { .... }
.tabsWrapper a:hover { ... } 
```

# asp.net - 根据用户 ASP.NET MVC 3 修改 Site.Master 内部的部分视图

> ID：15664460
> 
> 赞同：0
> 
> 时间：2013-03-27T16:44:26.247
> 
> 标签：asp.net, asp.net-mvc-3, partial-views, master-pages

我的问题类似于这个问题：[access database info in a partial view, .ascx that is included in Site.Master in asp.net mvc](https://stackoverflow.com/questions/5521466/access-database-info-in-a-partial-view-ascx-that-is-included-in-site-master-in)

我的 Site.Master 未绑定到视图模型或控制器。如何访问加载在我的 Site.Master 文件中的部分视图内的用户上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:10:45.800

您可以为此目的使用操作过滤器。在 Action 过滤器中，您需要覆盖`OnActionExecuting`方法并将 UserContext 传入`filterContext.Controller.ViewBag.UserContext`

您可以在任何地方的主文件中使用此动态视图包。

这回答了你的问题了吗？

编辑：

您需要一个继承自`ActionFilterAttribute` 您的类，然后可以覆盖它的`OnActionExecuting`方法，如下所示：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
      {           
         //Your implementation here
         base.OnActionExecuting(filterContext);
      } 
```

# ms-access - 添加具有旧 ID 的记录，这些记录是在访问中使用自动编号生成的

> ID：15664462
> 
> 赞同：1
> 
> 时间：2013-03-27T16:44:31.017
> 
> 标签：ms-access, autonumber

我有一个访问数据库。在这个我有一个表，其中有一个创建 ID 的自动编号字段。我以某种方式删除了表中的这些 ID。现在我已经删除了这些记录，我需要一个相同的序列来继续（我希望删除的 id 回到表中），但我不能这样做，因为自动编号功能永远删除了 id。我尝试将字段数据类型更改为仅数字并手动输入 id，但它不会改变，因为数据库给我一个警告说它与其他功能有关，我需要先删除它们，这与关系有关。请帮我找出一种方法来获取表中的旧 ID。数据库非常复杂，它不只是一张表，它有很多表格和报告，而且它们都交织在一起。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:58:04.887

Access 将允许您执行一条`INSERT`语句，该语句添加一个*未使用*的自动编号值的行。

```
INSERT INTO MyTable (auto_num_field, text_field)
VALUES (27, 'foo'); 
```

但是，如果由于已定义关系而访问对象，则需要首先删除关系，添加数据，执行满足关系约束所需的任何其他操作，最后重新创建关系。

OTOH，如果您已经将字段的数据类型从自动编号更改为其他类型，并且您没有表格的备份副本，那么这可能更具挑战性。我们需要更多信息来找出解决方案。

# php - 使用 MySQL/PHP 进行搜索，但不区分大小写

> ID：15664463
> 
> 赞同：0
> 
> 时间：2013-03-27T16:44:32.573
> 
> 标签：php, mysql, search, search-engine

我在学校学习使用 MySQL 和 PHP 编写搜索程序。

我的 search.php 有以下代码：

```
<?php
mysql_connect("localhost", "root", "");
mysql_select_db("db1");

$sql = "SELECT * from tuser";
$Namen = mysql_query ($sql);
$user_id = $_GET['user_id'];
$search = $_GET['search'];

while ($ergebnis_datensatz = mysql_fetch_array($Names)){
    $user_id = $ergebnis_datensatz['user_id'];
    $name = $ergebnis_datensatz['name'];
    $surname = $ergebnis_datensatz['surname'];

    if ($name == "$search") {
        echo "$name $surname";
    }

    else {
        echo "";
    }

    if ($surname == "$search") {
        echo "$name $surname";
    }

    else {
        echo "";
    }

}

?> 
```

在我的搜索输入网站上，我有一个简单的输入，带有“name=search”

如果我现在使用这个搜索，它是区分大小写的。示例：我搜索“* *k* *elvin”，但没有出现任何内容。但是，如果搜索“* *K* *elvin”，我会得到我的结果。

我怎样才能使它不区分大小写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:47:27.610

检查表的排序规则。默认情况下（取决于您的配置）MySQL 将使用`utf8_general_ci`where`ci`不区分大小写。`utf8_bin`另一方面，如果您使用，您将获得区分大小写的排序规则，并且您的所有搜索都将区分大小写。

其他常见的排序规则是`latin1_general_ci`(and `*_cs`, and `latin1_bin`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:48:45.240

您确实应该优化您的查询并仅搜索相关选项。

尽管您可以通过将两个参数都转换为小写来搜索不区分大小写（例如）。这样，您的代码将变为：`if (strtolower($name) == strtolower($search)) {`和`if (strtolower($surname) == strtolower($search)) {`

但是，我会将您的查询限制为： `SELECT * from tuser WHERE name LIKE $search OR surname LIKE $search`，这将产生与您的搜索参数匹配的所有结果。

**不要忘记转义 $search**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:51:28.530

如前所述，大多数常见的 MySQL 排序规则不区分大小写。但是，如果您不想修改排序规则，则可以使用 BINARY 运算符解决此问题。

[http://dev.mysql.com/doc/refman/5.0/en/charset-binary-op.html](http://dev.mysql.com/doc/refman/5.0/en/charset-binary-op.html)

IE

```
SELECT * 
FROM tuser 
WHERE BINARY $search IN (name,surname) 
```

所以给予

```
$sql = 'SELECT * FROM tuser WHERE BINARY "'.$search.'" IN (name,surname)'; 
```

**重要事项**请注意这一点。目前，这可能会使您的 SQL 易于注入。这将比选择所有内容然后在 PHP 中循环它更有效，但您首先需要对代码进行一些改进。

Here's an answer on here about SQL injection [How can I prevent SQL injection in PHP?](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php/60496#60496)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:50:48.283

您可以使用[strcasecmp()](http://www.php.net/manual/en/function.strcasecmp.php)函数比较两个字符串并忽略区分大小写。

```
if ($name == "$search") { 
```

至：

```
if (strcasecmp($name, $search)) { 
```

# c# - 工具提示未正确显示

> ID：15664465
> 
> 赞同：3
> 
> 时间：2013-03-27T16:44:37.180
> 
> 标签：c#, wpf, xaml, textbox, tooltip

我是新手`WPF`。我想在`TextBox`. 所以我使用`Style`了如下图：

```
<Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">                   
                <Setter Property="ToolTip">
                    <Setter.Value>
                        <ToolTip Placement="Top">                            
                            <Border Margin="-4,0,-4,-3" Padding="2" Background="Red">
                                <Border.BitmapEffect>
                                    <OuterGlowBitmapEffect></OuterGlowBitmapEffect>
                                </Border.BitmapEffect>
                                <Label Foreground="White" FontWeight="Bold" Content="{Binding RelativeSource={RelativeSource AncestorType={x:Type TextBox}}, Path=(Validation.Errors)[0].ErrorContent}"></Label>
                            </Border>
                        </ToolTip>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

上面的代码没有显示错误信息`ToolTip`。你能在这方面帮助我吗？任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:29:25.363

[您应该使用以下样式 ( msdn](http://msdn.microsoft.com/en-us/library/ms752347.aspx#data_validation) )更改当前样式：

```
<Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
    <Style.Triggers>  
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

您应该为以下内容创建样式`ToolTip`：

```
<Style TargetType="ToolTip">
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="HasDropShadow" Value="True"/>
    <Setter Property="Placement" Value="Top" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToolTip">
                <Border Name="Border" Margin="-4,0,-4,-3" Padding="2" Background="Red">
                    <Border.BitmapEffect>
                        <OuterGlowBitmapEffect></OuterGlowBitmapEffect>
                    </Border.BitmapEffect>
                    <ContentPresenter
                        Margin="4" 
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top" 
                        TextElement.Foreground="White" TextElement.FontWeight="Bold"                                      
                        />                                    
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasDropShadow" Value="true">
                        <Setter TargetName="Border" Property="CornerRadius" Value="4"/>
                        <Setter TargetName="Border" Property="SnapsToDevicePixels" Value="true"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

使用示例：

```
<TextBox Text="{Binding MyText, ValidatesOnDataErrors=True, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged}" 
         Style="{StaticResource textBoxInError}"                     
         /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T18:53:24.533

您还应该更换

```
Path=(Validation.Errors)[0].ErrorContent 
```

和

```
Path=(Validation.Errors).CurrentItem.ErrorContent} 
```

因为在您的情况下，当没有验证错误时，您将收到一个静默 ArgumentOutOfRangeException 。不要忘记实现 IDataErrorInfo 或 INotifyDataErrorInfo。

# regex - 使用变量指定要匹配的字符数

> ID：15664466
> 
> 赞同：1
> 
> 时间：2013-03-27T16:44:38.677
> 
> 标签：regex, r, text-extraction

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:54:15.907

你可以这样做：

```
part <- sub(paste(sep="","(^[a-zA-Z]{",var,"}).*$"), "\\1", "My String", perl=T) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:07:27.363

我喜欢用`sprintf`这个。`var`如果不是数字，它将引发错误。

```
var <- 2
pat <- "(^[a-zA-Z]{%d}).*$"
pat <- sprintf(pat, var) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:05:16.427

如果我们使用 gsubfn 包中的命令`fn$`开头，[那么](http://gsubfn.googlecode.com)我们可以使用`$var`来引用要替换的变量：

```
library(gsubfn)
var <- 2
fn$sub("(^[a-zA-Z]{$var}).*$", "\\1", "My String") 
```

或`strapplyc`从同一个包中使用，在这种情况下，可以简化正则表达式：

```
fn$strapplyc("My String", "^[a-zA-Z]{$var}", simplify = TRUE) 
```

我认为这只是一个例子，真正的问题更复杂，但如果这是真正的问题，那么它更容易并且可能足以使用`substring`：

```
var <- 2
substring("My String", 1, var) 
```

# .net - WCF Odata 实体中的自定义方法

> ID：15664467
> 
> 赞同：0
> 
> 时间：2013-03-27T16:44:38.933
> 
> 标签：.net, wcf, api, rest, odata

我想向我的 WCF OData 项目中的一个实体添加一个自定义方法。目前我已经启动并运行了我的服务。

对于所有票：[http](http://local.host/api/TicketService.svc/Ticket) ://local.host/api/TicketService.svc/Ticket 对于一张票：[http](http://local.host/api/TicketService.svc/Ticket(guid) ://local.host/api/TicketService.svc/Ticket(guid '9b265742-b1a0-41bd-8623-041a6a154b92 ')

这些网址运行良好。现在我需要为我的服务实现打印功能。（会触发一些与Ticket相关的流程）

我想创建一个在实体级别打印的函数，我将通过 POST 请求触发。例如像这个网址

[http://local.host/api/TicketService.svc/Ticket(guid](http://local.host/api/TicketService.svc/Ticket(guid) '9b265742-b1a0-41bd-8623-041a6a154b92')/打印

是否可以在 DataService 类中创建自定义方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:01:00.750

对于 WCF 数据服务 5.0 及更高版本，您可以实施操作来完成此操作。

[http://blogs.msdn.com/b/astoriateam/archive/2012/04/10/actions-in-wcf-data-services-part-1-service-author-code.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/04/10/actions-in-wcf-data-services-part-1-service-author-code.aspx)

[http://efactionprovider.codeplex.com/](http://efactionprovider.codeplex.com/)

# java - 为什么不能在赋值运算符中增加变量？

> ID：15664471
> 
> 赞同：3
> 
> 时间：2013-03-27T16:44:49.263
> 
> 标签：java, compiler-construction, variable-assignment, modulus

作为前言，我在 Mint 12x64 上使用 eclipse 3.7.2

假设您有给定的字段：

```
tail = 10;
capacity = 10; 
```

现在假设你要执行这个语句：

```
tail++ %= capacity; 
```

为什么声明是非法的？陈述是否模棱两可？对我来说，它似乎会按以下顺序进行评估：

*   尾部 = 模量容量
*   尾部加一

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T16:46:51.773

表达式的结果`tail++`是一个*值*，而不是一个变量。来自 JLS，第[15.14.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2)节：

> 后缀增量表达式的结果不是一个变量，而是一个值。

您不能分配给一个值，只能分配给一个变量（或字段）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T16:47:44.983

您的示例无法编译的原因是因为`tail++`它是一个**值**，而不是一个**变量**。`++`运算符接受一个变量（并增加它），然后返回一个value **，**然后您尝试分配给它。您只能分配给变量，因此会出现编译器错误。如果您想让您的示例工作，您可以尝试：

```
tail %= capacity;
tail++; 
```

# java - 奇怪的“18 个字符”LOGBack 行为

> ID：15664472
> 
> 赞同：3
> 
> 时间：2013-03-27T16:44:49.537
> 
> 标签：java, logging, configuration, log4j, logback

这是我第一次使用 Logback - 通常使用 log4j - 被依赖项强制进入它。

我将在线转换器用于`log4j.properties`--> `logback.xml`。

当我运行应用程序时，我得到的只是任何日志行的前 18 个字符，最后没有换行符。控制台和日志文件中的结果输出是：

```
16:32:00.537 (main16:32:00.537 (main16:32:00.537 (main16:32:00.537 
(main16:32:00.537 (main16:32:00.537 (main16:32:00.537 (main16:32:00.537 (main 
```

到底是什么原因造成的？

logback.xml 是

```
<configuration>
  <appender name="xyzzy" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <File>xyzzy.log</File>
    <encoder>
      <charset>UTF-8</charset>
      <pattern>%d{HH:mm:ss.SSS} (%t) %-5p [%c{36}] - %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <fileNamePattern>xyzzy.log.%d</fileNamePattern>
    </rollingPolicy>
  </appender>
  <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <charset>UTF-8</charset>
      <pattern>%d{HH:mm:ss.SSS} (%t) [%c{36}] %msg%n</pattern>
    </encoder>
  </appender>
  <logger name="com.package" level="DEBUG"/>
  <logger name="org.apache.http.client.protocol.ResponseProcessCookies" level="ERROR"/>
  <root level="WARN">
    <appender-ref ref="xyzzy"/>
    <appender-ref ref="console"/>
  </root>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:53:16.230

我不知道 LOGBack 但是，[根据文档](http://logback.qos.ch/manual/configuration.html)，我很确定

```
(%t) 
```

应该

```
[%t] 
```

这正是你的模式打破的地方......

然后尝试：

```
<pattern>%d{HH:mm:ss.SSS} [%t] %-5p [%c{36}] - %msg%n</pattern>

[...]

<pattern>%d{HH:mm:ss.SSS} [%t] [%c{36}] %msg%n</pattern> 
```

假设其他一切都很好......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T18:18:29.953

在 logback 中，模式字符串中的括号用作[分组标记](http://logback.qos.ch/manual/layouts.html#Parentheses)。他们需要逃脱。

# jquery - Jquery 的 Ajax 自动完成：无法使用 setOptions 或禁用等方法

> ID：15664475
> 
> 赞同：0
> 
> 时间：2013-03-27T16:44:56.280
> 
> 标签：jquery, ajax, autocomplete

我正在为 Jquery 使用 Ajax 自动完成（[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)）。在 1.1 版中，您可以将自动完成实例声明为变量，然后使用 setOptions、enable 或 disable 等方法来动态更改自动完成：

```
var ac = $('#query').autocomplete(options);
ac.disable();
ac.enable();
ac.setOptions({ zIndex: 1001 }); 
```

这在最新版本 (1.2.4) 中对我不起作用，并且我收到以下示例错误消息：`Uncaught TypeError: Object [object Object] has no method 'disable'`.

我可以使用旧版本，但我想使用 v1.2 中的一些新功能。任何想法如何在 v1.2 中动态更改自动完成选项？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:10:53.637

要禁用/启用，您需要使用[.prop()](http://api.jquery.com/prop/)

```
ac.prop('disabled', true);
ac.prop('disabled', false); 
```

要设置样式，您需要使用[.css()](http://api.jquery.com/css/)

```
ac.css({ zIndex: 1001 }); 
```

# java - 休眠中带小数的金额字段

> ID：15664485
> 
> 赞同：0
> 
> 时间：2013-03-27T16:45:14.733
> 
> 标签：java, hibernate, hibernate-mapping

我有一个带有金额字段的 SQl，例如，

to_char(ERR_VW.GROSS_AMT,'$999,999,999.99') GROSS_AMT,

但是当我通过hibenrate执行这个时，我得到了foll异常

```
Wrapped exception:
java.sql.SQLException: Fail to convert to internal representation
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:138)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:175)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:240)
    at oracle.jdbc.driver.CharCommonAccessor.getBigDecimal(CharCommonAccessor.java:325)
    at oracle.jdbc.driver.OracleResultSetImpl.getBigDecimal(OracleResultSetImpl.java:1513)
    at oracle.jdbc.driver.OracleResultSet.getBigDecimal(OracleResultSet.java:2099)
    at org.hibernate.type.BigDecimalType.get(BigDecimalType.java:46)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:184)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:210)
    at org.hibernate.loader.custom.CustomLoader$ScalarResultColumnProcessor.extract(CustomLoader.java:501)
    at org.hibernate.loader.custom.CustomLoader$ResultRowProcessor.buildResultRow(CustomLoader.java:447)
    at org.hibernate.loader.custom.CustomLoader.getResultColumnOrRow(CustomLoader.java:344)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:647)
    at org.hibernate.loader.Loader.doQuery(Loader.java:745)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.doList(Loader.java:2294)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2172)
    at org.hibernate.loader.Loader.list(Loader.java:2167)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1832)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:179) 
```

我该如何处理它们？

# wpf - 在 ItemsControl 中突出显示项目

> ID：15664487
> 
> 赞同：2
> 
> 时间：2013-03-27T16:45:20.763
> 
> 标签：wpf, itemscontrol

我想使用 渲染几个元素`ItemsControl`，并突出显示其中一个

我的视图模型：

```
public class ViewModel
{
    public List<Item> Items;
    public Item HighlightedItem;
} 
```

我的 XAML：

```
<ItemsControl ItemsSource="{Binding Items}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <myUserControl Background="{?}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

我想通过将背景属性设置为特定的东西来突出显示该项目，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:03:43.843

首先有一个转换器，它将比较两个对象的引用说`ObjectEqualsConverter`

```
public class ObjectEqualsConverter : IMultiValueConverter
{
    #region IMultiValueConverter        

    public object Convert(object[] values, Type targetType, object parameter,
                          CultureInfo culture)
    {
        return values[0] == values[1];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, 
                                CultureInfo culture)
    {
        throw new NotImplementedException();
    } 
    #endregion
} 
```

在`XAML`文件中，使用转换器检查转换器是否`current item is same as highlighted item in ViewModel`返回真设置`color`控制使用`trigger`-

```
 <ItemsControl ItemsSource="{Binding Items}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <myUserControl x:Name="myControl" />
                <DataTemplate.Triggers>
                    <DataTrigger Value="True">
                        <DataTrigger.Binding>
                            <MultiBinding Converter="{StaticResource ObjectEqualsConverter}">
                                <Binding/>
                                <Binding Path="DataContext.HighlightedItem" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}"/>
                            </MultiBinding>
                        </DataTrigger.Binding>
                        <Setter TargetName="myControl" Property="Background" Value="Red"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

确保`resource`在 xaml 文件中添加转换器。

# c# - 覆盖方法中访问修饰符的目的是什么？

> ID：15664490
> 
> 赞同：1
> 
> 时间：2013-03-27T16:45:22.747
> 
> 标签：c#, overriding, language-design

如果我不更改它，为什么在 C# 中我需要指定要覆盖的方法的访问修饰符？在这种情况下根本不指定任何访问修饰符不是更简单、更合乎逻辑吗？

（澄清一下：我写这个问题不是因为我认为我比语言设计师更聪明，而是因为我确信他们有一个我还不能理解的充分理由。）

编辑：我不是在问为什么我们不能更改访问修饰符，而是在问为什么我们必须冗余地指定它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T16:48:26.370

虽然我不是语言设计者之一，但我认为强迫你指定它是完全合理的：

*   任何*阅读*代码的人都会立即知道访问权限，而无需检查原始声明
*   对原始声明的访问的更改是这种方式的重大更改，使覆盖代码更加明显
*   它使一个方法恰好覆盖了与非覆盖方法一致的更高声明。（如果一个没有访问修饰符的方法有时是公共的，有时是私有的，这会很奇怪，这取决于覆盖。）

基本上，冗余有时是一件好事:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:53:49.703

为了说明 Jon 在代码中的观点，请考虑以下内容：

```
class LevelOne
{
    public virtual void SayHi()
    {
        Console.WriteLine("Hi!");
    }
}
class LevelTwo : LevelOne
{
    override void SayHi()
    {
        Console.WriteLine("Hi!");
    }
}
class LevelThree : LevelTwo
{
    override void SayHi()
    {
        Console.WriteLine("Hi!");
    }
} 
```

无穷无尽。现在假设您处于派生类的 n 深度，您必须一直遵循继承层次结构回到原始基类以找出方法的访问修饰符。这简直太烦人了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:48:18.220

为了便于其他不编写代码的开发人员理解代码。当您阅读覆盖时，您知道您进行了多态性

# mysql - 仅限 MySQL 中的活动提要

> ID：15664492
> 
> 赞同：1
> 
> 时间：2013-03-27T16:45:24.783
> 
> 标签：mysql, android-activity, feed

我想创建一个仅使用 mysql 的 activity_feed 系统。该活动将显示给进行该活动的用户的关注者。活动本身将被写入另一个缓存表中（经过对其他数据库的一些询问，例如“帖子”）。

```
**ACTIVITY_FEED** <- fixed/length
-----------------
AID - INT, PRIMARY KEY, A_I <- *id of activity*
UID - INT <- *id of user* 
TYPE - ENUM(post,comment,like,etc) <- *type of activity*
RID - INT <- *id relative to activity type (for example "posts" table id)*
TIMESTAMP - DATETIME

**ACTIVITY_FEED_INDEX** <- fixed/length
------------------
UID - INT <- *id of the user that request the activity feed. (the follower)*
AID - INT <- *ID of the activity that the follower will seen*
TIMESTAMP - DATETIME <- *same timestamp of activity*
PRIMARY KEY uid,aid

**ACTIVITY_FEED_CACHE**
------------------
AID - INT <- *if of activity*
CACHE_DATA - TEXT <- *json string of activity parameters* //no search needed 
```

这个想法是在 ACTIVITY_FEED_INDEX 中插入一行，每个人都在关注进行活动的用户。（推送模式）

然后，使用这样的查询：

```
SELECT cache.cache FROM activity_feed_index as index INNER JOIN activity_feed_cache AS cache ON cache.aid = index.aid WHERE index.uid = 'USER_ID' 
```

用户将获得他关注的用户的所有活动。

它是可扩展的吗？它是标准化的吗？没关系？

PS：目前我无法使用 REDIS 或其他 NoSQL 系统。所以，只有MYSQL。

PS：对不起我的英语不好：O

# php - 使用 PHP 将数组从 PHP 传递到 javascript

> ID：15664493
> 
> 赞同：0
> 
> 时间：2013-03-27T16:45:26.420
> 
> 标签：php, javascript, ajax, jquery

有人可以帮助我如何从 PHP 传递一组值并使用 AJAX 检索它。我发现只是从 PHP 传递一个值。当我尝试传递数组的值时，我不知道如何在 AJAX 端接收它

这是我的 PHP 代码：

```
$success[];
$timeout[];
$fail[];

while($row1 = mysql_fetch_array($masterresult))
{
    $success[]=$row1[1];
    $timeout[]=$row1[2];
    $fail[]=$row1[3]; 
}

echo json_encode(array("a"=>$success,"b"=>$timeout,"c"=>$fail)); 
```

下面是通过 AJAX 调用：

```
var channel;
 function overall(){
    $(".one").show();
    $(".two").hide();
    $(".three").hide();
    $(".four").hide();
    window['channel']="overall";
     $.ajax({
             type:"GET",
             url:"dash2.php",
             data:{channel:channel},
             dataType:'json',
             success:function(data){
                    console.log(data.a);
                    console.log(data.b);
                    console.log(data.c);
                    }
            });
    } 
```

我应该如何将这些 php 数组值传递给这个 ajax 调用？有人可以帮我写代码吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:47:19.260

您要做的是将[其编码为 JSON](http://php.net/manual/en/function.json-encode.php)。

```
$yourArray = array('asdf', 'qwer', 'zxcv');
echo 'var yourJavaScriptArray = ' . json_encode($yourArray) . ';'; 
```

这使得您的所有任意数据也可以在 JavaScript 中安全使用。

如果您只使用 AJAX 执行此操作，则不需要该`var`部分。直接输出就好了`json_encode()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:47:31.007

例如，无论是数组中的一个值还是多个值，您都应该始终使用：

```
json_encode($your_php_var) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:48:38.147

1.  `json_encode`你在 PHP 端的数组。
2.  在 JavaScript 中使用该 JSON 对象无需任何额外努力，它是 JavaScript 的一部分。
3.  当您将其发送回 PHP 时，只需`json_decode`使用 PHP 即可。

参考：[PHP手册](http://php.net/json_encode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:55:59.897

为此，您可以将 JSON 与 jQuery 结合使用。

```
<?php

    $myArray = array('a', 'b');
    echo json_encode($myArray);

?> 
```

阿贾克斯

```
$.get('http://localhost/index.php',
    function(data) {
        var response = jQuery.parseJSON(data);
        console.log(response);
    }
); 
```

在您的代码中：

```
 var channel;
 function overall(){
    $(".one").show();
    $(".two").hide();
    $(".three").hide();
    $(".four").hide();
    window['channel']="overall";
    $.ajax({
             type:"GET",
             url:"dash2.php",
             data:{channel:channel},
             dataType:'json',
             success:function(data){
                    console.log(data["a"]);
                    console.log(data["b"]);
                    console.log(data["c"]);
            }
    });
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T16:57:40.230

希望这个例子对你有所帮助。想象一下，如果您在 html 表单上有一些输入数据并且需要通过 AJAX 发送它们，在服务器端对它们做一些事情，然后在客户端接收结果并用它做一些事情。

```
 <form id="my_form" method="post" action="<?=$ServerSideUrl?>">
   <input type="text" name="field_1" value="">
   <input type="text" name="field_2" value="">
   <input type="text" name="field_3" value="">
 </form> 
```

这是你的 AJAX 脚本，我在这个例子中使用了 JQuery

```
$('#my_form').ajaxSubmit({
        dataType: 'html',
        error: function() {
          alert('some error text');
        },
        complete: function(data) {
          //data this is the result object which returned from server side
          //for example you shpold alert the sum of thouse 3 field
          alert(data.sum);
        }
}); 
```

这是您的服务器端代码

```
 <? 
   $data = array();
   $data["sum"] = $_POST["field_1"] + $_POST["field_2"] + $_POST["field_3"];
   echo my_json_encode($data);
   return true;
 ?> 
```

因此，当您的 AJAX 完成时，它会提醒您表单上三个字段的总和，

# delphi - DELPHI - 如何在 VCL 表单应用程序中更改 TButton 背景颜色？

> ID：15664495
> 
> 赞同：2
> 
> 时间：2013-03-27T16:45:34.550
> 
> 标签：delphi, button, colors, vcl

在我的 Delphi VCL 表单应用程序中，我必须更改 TButton 的背景颜色。有没有办法在不使用第三方组件的情况下应用此更改？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:57:58.423

您不能[`TButton`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.StdCtrls.TButton)直接更改组件的颜色，而必须使用第三方组件或所有者绘制按钮（[`BS_OWNERDRAW`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775951%28v=vs.85%29.aspx)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-21T10:28:53.833

1.  创建一个面板。
2.  将面板的颜色更改为任何颜色。
3.  空面板的标题。
4.  在面板内创建一个 SpeedButton。
5.  **将 SpeedButton 的 Flat 属性设置为 True。**
6.  设置 SpeedButton 的 Align 属性 alClient。
7.  瞧！这是您的颜色按钮！

原文来源：[https ://engineertips.wordpress.com/2020/07/21/delphi-button-background-color/](https://engineertips.wordpress.com/2020/07/21/delphi-button-background-color/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-14T03:30:32.560

很好的提示，谢谢你，Xel Naga！

您还可以在面板上放置图像，以使您的按钮更加美观。在这里，我添加了一个黄色玻璃按钮的图像。要获得圆角，您可以像这样塑造面板 >>

```
SetWindowRgn(Panel1.Handle, CreateRoundRectRgn(0, 0, Panel1.Width, Panel1.Height, 65, 40), True); 
```

[![在此处输入图像描述](../Images/67ae607c026f6a27cc840f7dd8570c90.png)](https://i.stack.imgur.com/YoQUp.jpg) [![在此处输入图像描述](../Images/3ade9ba0e6bf3256df839a709001c840.png)](https://i.stack.imgur.com/LHi5H.jpg) [![在此处输入图像描述](../Images/a9462278400cfe1909511631a0a8bdae.png)](https://i.stack.imgur.com/r1UKz.jpg) [![在此处输入图像描述](../Images/cb22d3b67d42f273bb706b6df4afac5c.png)](https://i.stack.imgur.com/eEvUq.jpg)

在那之后的下一个级别，您可以为按钮状态添加另外 3 个图像（彼此叠加）：鼠标悬停 (OnMouseEnter)、按钮按下 (OnMouseDown) 和按钮禁用。只需更改图像的可见状态以显示您想要查看的图像...

# c# - 使用 MAF C# 时是否可以从内存中删除插件

> ID：15664502
> 
> 赞同：0
> 
> 时间：2013-03-27T16:45:52.353
> 
> 标签：c#, asp.net-mvc, maf

我正在开发一个管理员需要能够添加/删除/编辑插件的项目。插件由 3 个不同的 dll 和 2 个配置文件组成。当插件尚未加载时，我可以将其删除。但是，当用户当前正在使用或已经使用插件时，我无法再删除它而不会出现未经授权的访问异常。

我可以删除配置文件，但不能删除 dll。

是否可以在不重新启动 IIS 或站点的情况下完全删除插件？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:53:51.800

由于 dll 正在使用中，可能会引发未经授权的访问异常。即使不是这样，删除它也会重新启动您的应用程序，因为 ASP.NET 会监视程序集和配置文件的更改并自动重新启动应用程序。

# java - Jackrabbit Lucene 索引

> ID：15664505
> 
> 赞同：0
> 
> 时间：2013-03-27T16:45:55.733
> 
> 标签：java, linux, caching, lucene, jackrabbit

我在 Red Hat 6 64 位机器上安装了 Jackrabbit 2.4.0（作为 rar 部署到 JBoss AS 7.1.0 中）。JBoss JVM 将最大堆大小设置为 8 GB。该机器具有 24GB 的 RAM。奇怪的是，当 JBoss 启动时，它有将近 20 GB 的虚拟大小（从顶部获取的统计数据）。Linux 页面缓存（交换缓存）大约为 10 GB，因此系统实际上将有大约 5 GB 的可用内存。我不确定为什么页面缓存如此之大，我正在尝试与保存 Lucene 索引的 jackrabbit 数据目录的大小建立链接。目录的大小约为 10 GB。我的问题是：Lucene 是否对索引文件使用内存映射？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:49:33.540

> 我的问题是：Lucene 是否对索引文件使用内存映射？

[Lucene 仅在您要求](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/store/MMapDirectory.html)时才使用内存映射。您可能还想阅读[这篇](http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:50:35.067

JBOSS 总常驻内存由几个因素组成，并非所有因素都是堆：

1.  堆
2.  烫发
3.  JAR 和 JVM
4.  映射字节数组
5.  线程堆栈（每个线程约 1MB）

有您的应用程序和应用程序服务器本身。

因此，您当然应该使用 Visual VM 之类的工具进行分析，以查看正在发生的事情的详细信息，但它只会对堆和 perm gen 有所帮助。你需要像 Linux 上的 nmap 这样的工具来找出其余的东西。

# c# - 在 DirectX 中旋转后如何获取网格的一个向量？

> ID：15664508
> 
> 赞同：0
> 
> 时间：2013-03-27T16:46:07.057
> 
> 标签：c#, 3d, directx, direct3d, coordinate-systems

在我的项目中，我在 3D 坐标系中显示了一些球体。见下图。

![在此处输入图像描述](../Images/6fda2a44dbfaebff2f9411c419fc0a9d.png)

每个球体显示一个实验室颜色值。要创建一个球体，我使用 DirectX 中的 Meshfunction：

```
// Radius der Kugel
private const float radius = 4f;
// Die Anzahl der Ebenen einer Kugel
private const int slices = 8;
// Die Anzalh der Flächen einer Ebene
private const int stacks = 8;

// Das Mesh zum Darstellen der Kugel
private Mesh mesh = null;
private Vector3 vec;
public Vector3 min;
public Vector3 max;

public void createMesh(Device device, Color color, params float[] labValues)
{
    // Erstellt die Kugel mit der Anbindung an das Device
    mesh = Mesh.Sphere(device, radius, slices, stacks);
    // Kopiert das Mesh zum Erstellen des VertexArrays
    Mesh tempMesh = mesh.Clone(mesh.Options.Value, Vertex.FVF_Flags, device);
    // Erstellt den VertexArray
    Vertex[] vertData = (Vertex[])tempMesh.VertexBuffer.Lock(0, typeof(Vertex), LockFlags.None, tempMesh.NumberVertices);

    // Weist jedem Vertex die Farbe und die Position zu
    for (int i = 0; i < vertData.Length; ++i)
    {
        vertData[i].color = color.ToArgb();
        vertData[i].x += labValues[1];
        vertData[i].y += labValues[0] - 50f;
        vertData[i].z += labValues[2];
    }
    min = new Vector3(labValues[1], labValues[0] + 100f, labValues[2]);
    max = new Vector3(labValues[1], labValues[0] - 100f, labValues[2]);

    // Gibt den VertexBuffer in der Kopie frei
    tempMesh.VertexBuffer.Unlock();
    // Löscht den Mesh aus dem Speicher
    mesh.Dispose();
    // Legt die Kopie in der Meshinstanz ab
    mesh = tempMesh;

    Vector3 vTemp = new Vector3(labValues[1], labValues[0], labValues[2]);
    vec = vTemp;
}

struct Vertex
{
    public float x, y, z; // Position of vertex in 3D space
    public int color;     // Diffuse color of vertex

    /// <summary>
    /// Konstruktor der Vertex
    /// </summary>
    /// <param name="_x">X(A) - Position</param>
    /// <param name="_y">Y(L) - Position</param>
    /// <param name="_z">Z(B) - Position</param>
    /// <param name="_color">Die Farbe</param>
    public Vertex(float _x, float _y, float _z, int _color)
    {
        x = _x; y = _y; z = _z;
        color = _color;
    }

    // Das Format des Vertex
    public static readonly VertexFormats FVF_Flags = VertexFormats.Position | VertexFormats.Diffuse;
} 
```

对于设备旋转，我选择鼠标移动坐标并将它们用于渲染。所以我不改变相机的位置。我只旋转设备对象：

```
Matrix MX = Matrix.RotationX(impValue.ObjektRotationY);
impValue.ObjektRotationY = 0;
Matrix MY = Matrix.RotationY(impValue.ObjektRotationX);
impValue.ObjektRotationX = 0;

Matrix Rotation = device.Transform.World;
Rotation *= MY;
Rotation *= MX;

device.Transform.World = Rotation; 
```

现在我添加一个函数来单击球体（[Picking - Tutorial](https://stackoverflow.com/a/15225277/2046466)）以显示实验室值：

```
public Sphere getSphereByCoordinates(Device device, List<Sphere> meshList, Vector3 cameraVec, float x, float y)
{
    // Temporäre Liste für die Kugeln
    List<Sphere> tempSphereList = new List<Sphere>();
    Sphere closestSphere = null;

    // Instanz des dichten und fernen Vektors
    Vector3 v3Near = new Vector3(x, y, 0);
    Vector3 v3Far = new Vector3(x, y, 1);

    // Wandelt den 2D Vektor in einen 3D Vektor um
    v3Near.Unproject(device.Viewport, device.Transform.Projection, device.Transform.View, device.Transform.World);
    v3Far.Unproject(device.Viewport, device.Transform.Projection, device.Transform.View, device.Transform.World);
    // Subtrahiert die beiden Vektoren
    v3Far.Subtract(v3Near);

    // Geht jede einzelne Kugel durch
    foreach(Sphere tempSphere in meshList)
    {
        // Prüft ob sich die Punkte schneiden und fügt es ggf. einer Liste hinzu
        if(tempSphere.labMesh.Intersect(v3Near, v3Far))
            tempSphereList.Add(tempSphere);
        }

        // Die nächste Distanz
        double closestDistance = -1.0;
        // Geht alle zutreffenden Kugeln durch und sucht sich die nahste Kugel zur Kamera aus
        foreach(Sphere tempSphere in tempSphereList)
        {
            //VertexBuffer haha = tempSphere.labMesh.
            double theDistance = Distance(cameraVec, tempSphere.labVector);

            if (theDistance < closestDistance || closestDistance == -1d)
            {
                closestDistance = theDistance;
                closestSphere = tempSphere;
            }
        }

        return closestSphere;
    }

private double Distance(Vector3 v1, Vector3 v2)
{
    // Erstellt einen Differenzvektor
    Vector3 difference = new Vector3(   v1.X - v2.X, 
                                        v1.Y - v2.Y, 
                                        v1.Z - v2.Z);
    // Gibt die berechnete Distanz zurück
    `return Math.Sqrt(Math.Pow(difference.X, 2f) + Math.Pow(difference.Y, 2f) + Math.Pow(difference.Z, 2f));
} 
```

您如何看到我将与 MouseWorldCoordinates 相交的所有网格设置为临时列表。该算法正常工作。我的问题是现在获得正确的距离。因为我计算了相机向量和静态实验室值向量的距离。在单击球体之前旋转设备时，如何将静态实验室值转换为设备世界？你知道解决办法吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:31:34.220

我怀疑您的交集代码是否有效，因为它没有考虑设备转换。无论如何，您都应该对交叉点进行分析计算。`Mesh.Intersect`可能会变得非常慢，因为它必须检查每个三角形。你有球体的位置和半径。您应该根据这些值检查相交（请参阅光线/点的距离）。

如果要使用`Mesh.Intersect`，则必须变换光线，因为该方法仅考虑未变换的网格。因此，您需要一个转换来恢复设备的旋转，这正是 World 矩阵的倒数。请参阅[TransformCoordinate](http://msdn.microsoft.com/en-us/library/windows/desktop/bb324382.aspx)、[TransformNormal](http://msdn.microsoft.com/en-us/library/windows/desktop/bb324386.aspx)和[Invert](http://msdn.microsoft.com/en-us/library/windows/desktop/bb281706%28v=vs.85%29.aspx)。然后，您可以执行与变换光线的交集。

至于距离计算，您有两个选择。您可以使用逆世界矩阵变换相机位置，也可以使用（非逆）世界矩阵变换球体位置。

# jquery - 如何使用 jquery 定位嵌套强

> ID：15664510
> 
> 赞同：0
> 
> 时间：2013-03-27T16:46:09.600
> 
> 标签：jquery, jquery-selectors

我正在尝试使用此处的方法实现星级评分系统：[https](https://stackoverflow.com/a/1987545/1543310) ://stackoverflow.com/a/1987545/1543310我已经能够让它成功工作，但我正在尝试根据输出对其进行调整woocommerce 星级评分系统，因此我可以轻松更改输出的图像。

基本上我想知道如果没有`<strong>`附加类，是否有一种方法可以在下面的 html 中定位和更改标签的内容，因为还有一些其他的如何输出以下内容的版本，但它们都包括一个中的强标签`<div class="star-rating">`。

**HTML：**

```
<div class="star-rating">
    <span>
        <strong class="rating">3.5</strong> 
    </span>
</div> 
```

我在这里设置了一个我正在尝试做的小提琴：http: [//jsfiddle.net/AwCLm/](http://jsfiddle.net/AwCLm/)包含 woocommerce html 输出。

这是我设置的一个工作示例，但它需要为以下设置一个类：http `<strong>`: [//jsfiddle.net/YYWQx/1/](http://jsfiddle.net/YYWQx/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:52:58.973

编辑了我的答案，因为我误解了 OP。

如果你的意思是你想要定位`<strong>`元素而不管它是否有一个`rating`类，你可以`$('.star-rating strong').stars();`在你的 JS 中使用，并修改 CSS 选择器：

```
.star-rating > span strong {
    display: block;
    background: url(http://testing.wpovernight.com/wp-content/uploads/2013/03/stars.png) 0 -16px repeat-x;
    width: 80px;
    height: 16px;
}   
.star-rating > span strong > strong{
    background-position: 0 0;
} 
```

[http://jsfiddle.net/YYWQx/5/](http://jsfiddle.net/YYWQx/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:03:51.857

这是我为您提供的解决方案。

那是你要找的吗？

[http://jsfiddle.net/migontech/YYWQx/6/](http://jsfiddle.net/migontech/YYWQx/6/)

```
$.fn.stars = function() {
    return $(this).each(function() {
        // Get the value
        var val = parseFloat($(this).html());
        // Make sure that the value is in 0 - 5 range, multiply to get width
        var size = Math.max(0, (Math.min(5, val))) * 16;
        // Create stars holder
        var $span = $('<span />').width(size);
        // Replace the numerical value with stars
        $(this).html($span);
    });
}
$(function() {
    $('div.star-rating strong').stars();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:04:54.217

在您的小提琴中，您的目标是直接子代`>`，`div.star-rating`这将不起作用，而是您应该尝试以下一个：

我认为这可以帮助你：

```
 $('div.star-rating strong').stars(); 
```

因为在`$('<strong />').width(size);`_`<strong>``<strong.rating>`

和css的变化：

```
strong.rating, strong.rating strong {
  //-----------^^^^^^^^^^^^^^^^^^^^---------You have to include this too. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:07:48.547

除非我遗漏了什么，否则我不明白为什么选择器`div.star-rating strong`不起作用。如果我理解你的问题，`<div class='star-rating'>`总是存在，你只是不知道嵌套`<strong>`是否有一个类。在这个更新的小提琴中，星级似乎已经更新。

[http://jsfiddle.net/AwCLm/6/](http://jsfiddle.net/AwCLm/6/)

# bash - Bash 循环和 if 语句

> ID：15664517
> 
> 赞同：1
> 
> 时间：2013-03-27T16:46:30.520
> 
> 标签：bash, sed, awk

我需要查看一行，并根据第 3 列的内容对其执行快速 if/then->echo。

该文件如下所示：

```
name network subnetmask
net_A 192.168.0.0 24
net_b 10.10.0.0 16 
```

有些列也有一个空白的第 3 列，我也需要为这些列设置一个 if/then。

在我看来，伪代码应该是这样的：

```
snet_mask=`cat $filename | grep -i net | awk '{print $3}`
if [ $snet_mask = 24 ]
then
awk '{print "something"$1,"something else"}'
fi
if [ $snet_mask = 23 ] 
then
awk '{print "something"$1,"something else"}'
fi 
```

ETC

这似乎不起作用，因为 $snet_mask 成为 $3 的“全部”的值，所以我认为我需要一个基于 grep -i net 的 for 循环，但我真的不知道。

正确答案是什么？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:52:12.223

试试这个单线：

```
awk '$1 ~ "^net" && $3==24{print "something", $3, "something else"} $1 ~ "^net" $3==23{print "something", $3, "something else"}' file.txt 
```

或多行（更易于阅读）：

```
awk '
     $1 ~ "^net" && $3==24{print "something", $3, "something else"}
     $1 ~ "^net" && $3==23{print "something", $3, "something else"}
' file.txt 
```

我们也可以这样做（取决于您的需要）：

```
awk '
     $1 ~ "^net" && ($3==24 || $3==23) {print "something", $3, "something else"}
' file.txt 
```

或者更简单和最短的正则表达式：

```
awk '
     $1 ~ "net" && $3 ~ "^2[34]$" {print "something", $3, "something else"}
' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:52:28.237

你可以在 awk 语句中完成你需要的，因为你已经在使用 awk

```
cat $filename | grep -i net | awk '{if($3==24) print $1; else print $0;}' 
```

在 if 语句中（如果第 3 列是 23），我只打印第一列，否则我打印所有内容。显然，您可以将其扩展为适用于您的所有案例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:58:29.857

在没有外部工具的情况下留在 bash 中，您可以执行以下操作：

```
while read name network netmask ; do
    if [[ "$name" == net* ]] ; then
        case "$netmask" in
            "") echo "It's empty" ;;
            24) echo "It's 24" ;;
            23) echo "It's 23" ;;
             *) echo "None of the above" ;;
        esac
    fi
done < "$filename" 
```

# java - 手动创建 GUI 表单

> ID：15664518
> 
> 赞同：-4
> 
> 时间：2013-03-27T16:46:38.363
> 
> 标签：java, swing

我有一个 jframe，其中包含三个文本字段和两个单选按钮（用于选择是或否）。

它应该是这样的： ![在此处输入图像描述](../Images/68dd9eb84c7f4775f9fd32774c653d6e.png)

但是，使用我的代码，它是这样的： ![在此处输入图像描述](../Images/03df80b80611bcb0dca6219ca6be57c7.png)

我的代码：

```
public class editFrame extends JFrame {

JButton saveButton;
JButton cancelButton;
JRadioButton radioB1;
JRadioButton radioB2;

public editFrame() {

    JPanel wrapper = new JPanel();
    wrapper.add(createForm());
    add(wrapper, BorderLayout.WEST);

    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setBounds(100, 50, 500, 600);
    this.setVisible(true);
}

public JPanel createForm() {
    String[] labels = {"ID", "Name", "Date"};
    JPanel panel = new JPanel();

    JTextField idtf = new JTextField(10);
    JTextField nametf = new JTextField(10);
    JTextField datetf = new JTextField(10);
    panel.add(idtf);
    panel.add(nametf);
    panel.add(datetf);

    radioB1 = new JRadioButton("Yes");
    radioB2 = new JRadioButton("No");
    ButtonGroup group = new ButtonGroup();
    group.add(radioB1);
    group.add(radioB2);
    panel.add(radioB1);
    panel.add(radioB2);
    saveButton = new JButton("update");
    cancelButton = new JButton("Cancel");
    panel.add(saveButton);
    panel.add(cancelButton);

    SpringLayout sL = new SpringLayout();
    panel.setLayout(sL);
    SpringUtilities.makeCompactGrid(panel, 3, 2, 100, 50, 15, 20);

    return panel;
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            editFrame edF = new editFrame();
        }
    });
} 
```

借用状态文本不显示在单选按钮旁边。我的第二个主要问题是使用此代码，我无法访问文本字段。我需要稍后访问文本字段...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:28:12.213

首先，没有显示收音机的标签，因为您没有创建它并将其添加到面板中。创建它并将其添加到 radioB1 之前的面板中。此外，您应该在 radioB2 之前添加一些不可见（空）标签（或使用其他填充组件来填充单元格 - 也许这会有所帮助：[http://docs.oracle.com/javase/tutorial/uiswing/layout/box。 html#filler](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html#filler)）。

此外，您可以将另一个填充组件添加到面板而不是 saveButton。然后我将创建另一个面板 (buttonPane)，它包含保存和取消按钮，并将此 buttonPane 添加到主面板而不是 cancelButton。按钮面板可以使用 BoxLayout 并且在按钮之间可以是水平胶水（如您在上面的链接中所见）。

应该是这样的。但这里有一个警告。您正在以这种方式在循环中创建 JTextFields，您以后无法引用它们，即。当您需要获取文本时。您应该将它们的引用保留为单独的变量，或将它们添加到数组中，以便在按下更新按钮时获取值。

# coldfusion - 在 CF 本地主机上映射显示 404

> ID：15664519
> 
> 赞同：0
> 
> 时间：2013-03-27T16:46:42.723
> 
> 标签：coldfusion, coldfusion-9

我设置了一个映射以在我的机器上运行 Canvas（基于 CF 的 wiki）。我在 CF 管理员中有以下映射；文件夹的物理位置正确，端口号准确。

```
Logical Path     Directory Path
------------     --------------
/canvaswiki      C:\ColdFusion9\canvaswiki 
```

当我输入时`http://localhost:8500/canvaswiki/`，我得到一个 404

> java.io.FileNotFoundException: /canvaswiki/

我重新启动了 CF 的服务以确保这不是问题，但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:25:08.343

要从`http://localhost:8500/canvaswiki/`浏览器访问，请将`canvaswiki`文件夹放在`C:\ColdFusion9\wwwroot`. 完整路径将是`C:\ColdFusion9\wwwroot\canvaswiki`.

[使用内置 Web 服务器](http://help.adobe.com/en_US/ColdFusion/9.0/Installing/WSc3ff6d0ea77859461172e0811cdec18c28-7ffc.html)

# javascript - Jquery Mobile - 导航到另一个页面时保持 Javascript

> ID：15664520
> 
> 赞同：1
> 
> 时间：2013-03-27T16:46:46.490
> 
> 标签：javascript, jquery, jquery-mobile

嘿伙计们，我有一个 javascript 函数，即使在 Jquery Mobile 中导航到另一个页面（单页模板而不是多页）时也会持续存在

```
 <script type="text/javascript">
       setInterval("window.location.reload();", 5000);
    </script> 
```

如何确保这只发生在调用它的页面上，而不是在我使用基于 ajax 的导航链接到的每个页面上调用它？

我正在使用 Jquery Mobile 1.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:51:06.093

将其绑定到您希望它发生的页面。替换*`$('.selector')`*为 pageID，例如`$('#home')`. 你也可以更具体`$('div[data-role="page"]#PageID')`。

```
// Trigger interval
$('.selector').bind('pageinit', function () {
 setInterval("window.location.reload();", 5000);
});

// Stop interval when navigating away
$('.selector').bind('pagehide', function () {
 clearInterval();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:49:53.183

> 如何确保这只发生在调用它的页面上，而不是在我使用基于 ajax 的导航链接到的每个页面上调用它？

不叫吗？目前，您的代码设置为在页面包含时*始终*运行。要么不包含它，要么阻止它以其他方式运行（例如 if 语句）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:54:15.510

您可以在导航之前清除间隔。

首先，您需要在创建间隔时获得对间隔的引用：

```
var intervalRef = setInterval("window.location.reload();", 5000); 
```

然后你可以像这样清除它：

```
clearInterval(intervalRef);
// Navigate 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T16:55:11.173

只需在其他页面加载或当前页面退出时取消超时（其他页面以 ajax 加载，因此定时间隔保持不变）。

```
// trigger
myInterval = setInterval("window.location.reload();", 5000);

// stop
clearInterval(myInterval); 
```

# javascript - 登录多个帐户时无法使 Google Drive API 共享对话框工作

> ID：15664523
> 
> 赞同：18
> 
> 时间：2013-03-27T16:46:51.550
> 
> 标签：javascript, google-drive-api

使用 Google Drive API 在 Javascript 应用程序中打开共享对话框时出现 JS 错误。错误是：未捕获的错误：语法错误：DOM 异常 12。

但是，当我退出所有 Google 帐户然后只登录一个帐户时，共享对话框可以正常工作。一旦我在新选项卡中登录第二个帐户，共享对话框就不再起作用并因上述错误而失败。

[这与在 Google Drive SDK 上调用 showSettingsDialog() 会抛出 Refused to display document 因为 X-Frame-Options 禁止显示](https://stackoverflow.com/questions/12081816/calling-showsettingsdialog-on-the-google-drive-sdk-throws-a-refused-to-display)非常相似。但是，我已经完成了接受响应中显示的调试，但无济于事，即：

*   您在 Google API 控制台的 Google Drive SDK 设置中设置的“打开方式”URL 必须与您使用共享对话框的页面具有相同的域。
*   目前，您还需要将您的应用程序安装在您的 Google Drive 上，以使可嵌入的小部件工作。我们目前正在努力消除此限制，因为自从我们推出了 API 的 v2 以来，它并不总是有意义的。

相关代码为：

```
var shareClient = new gapi.drive.share.ShareClient(rtpg.realTimeOptions.appId);
shareClient.setItemIds([rtclient.params['fileId']]);
shareClient.showSettingsDialog(); 
```

有什么方法可以让登录的多个帐户正常工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-25T14:17:10.120

您可能需要仔细阅读有关 x-frame 问题的内容：

[Google Drive API，无法通过 JS 打开标准共享对话框（x-frame-options 错误）](https://stackoverflow.com/questions/22344055/google-drive-api-cant-open-standard-sharing-dialog-via-js-x-frame-options-err)

但是我认为不可能一次对所有帐户进行身份验证，但是`setOAuthToken`每次您想要这样做时，可能会对每个帐户进行解决方法。

它在谷歌文件中说明：

> 重要提示：setOAuthToken 函数允许应用使用当前身份验证令牌来确定选择器使用哪个 Google 帐户来显示文件。如果用户登录到多个 Google 帐户，这允许选择器显示相应授权帐户的文件。

资源：

[https://developers.google.com/drive/web/integrate-open](https://developers.google.com/drive/web/integrate-open)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-04T12:57:56.263

We just recently added a `setOAuthToken()` method to the `ShareClient` that allows you to specify which user the dialog should use. More details in the Drive SDK [release notes](https://developers.google.com/drive/release-notes#multi-login_support_in_the_sharing_dialog).

# jquery-ui - 单击时保持 jQuery 工具提示打开？

> ID：15664526
> 
> 赞同：4
> 
> 时间：2013-03-27T16:46:57.817
> 
> 标签：jquery-ui

我想使用 jQuery UI 的工具提示功能，但是我需要它，因此当您单击一个元素（在我的情况下为图像）时，工具提示保持打开状态。这可以做到吗？我看不到任何选项。

[http://api.jqueryui.com/tooltip/](http://api.jqueryui.com/tooltip/)

更新这里是我的代码。我认为第 4 行应该可以工作，但遗憾的是没有：

HTML

```
<img class="jqToolTip" src="/query.gif" title="Text for tool tip here"> 
```

Javascript

```
$('.jqToolTip').tooltip({
    disabled: false    
}).click(function(){    
    $(this).tooltip( "open" );
//  alert('click');
}).hover(function(){
    // alert('mouse in');
}, function(){
    // alert('mouse out');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-06T19:22:00.347

我试图解决同样的问题，但在任何地方都找不到答案。经过 4 个多小时的搜索和试验，我终于想出了一个可行的解决方案。

我所做的是这样的：

1.  如果单击状态，则立即停止传播
2.  添加了一个点击处理程序来跟踪状态

```
//This is a naive solution that only handles one tooltip at a time
//You should really move clicked as a data attribute of the element in question
var clicked;
var tooltips = $('a[title]').on('mouseleave focusout mouseover focusin', function(event) {
  if (clicked) {
    event.stopImmediatePropagation();
  }
}).tooltip().click(function() {
  var $this = $(this);
  var isOpen = $this.data('tooltip');
  var method = isOpen ? 'close' : 'open';
  $this.tooltip(method);
  //verbosity for clarity sake, yes you could just use !isOpen or clicked = (method === 'open')
  if (method === 'open') {
    clicked = true;
  } else {
    clicked = false;
  }
  $this.data('tooltip', !isOpen);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/themes/redmond/jquery-ui.css" rel="stylesheet" />
<a href="#" title="That's what this widget is">Tooltips</a>
```

希望这将有助于未来的谷歌用户。

部分感谢[这篇文章](https://forum.jquery.com/topic/prevent-tooltip-close-on-focusout#14737000003633832)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:06:31.103

[http://api.jqueryui.com/tooltip/#method-open](http://api.jqueryui.com/tooltip/#method-open)

```
$('img.my-class').click(function() {
    $(this).tooltip( "open" );
} 
```

# jsp - 响应已经提交错误发生

> ID：15664530
> 
> 赞同：3
> 
> 时间：2013-03-27T16:47:06.513
> 
> 标签：jsp, servlets, atg

我正在尝试使用 Servlet 将数据下载为 CSV，并且 JSP 包含在`flush=true`. 下面提供了堆栈跟踪。该报告正在按预期保存，但我可以在后面看到一个异常。你能帮我弄清楚为什么吗？我已经关闭`OutputStream`并尝试刷新缓冲区，但仍然没有运气。

```
1:36:38,304 ERROR [[jsp]] Servlet.service() for servlet jsp threw exception
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    at org.apache.catalina.connector.Response.getWriter(Response.java:619)
    at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
    at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
    at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
    at org.apache.jasper.runtime.JspWriterImpl.flush(JspWriterImpl.java:173)
    at atg.taglib.dspjsp.IncludeTag.flushOut(IncludeTag.java:873)
    at atg.taglib.dspjsp.IncludeTag.doEndTag(IncludeTag.java:773) 
```

* * *

```
pResponse.setContentType(MS_EXCEL);
pResponse.setHeader(CONTENT,FILENAME);

outputStream = pResponse.getOutputStream();
pResponse.flushBuffer();
workbook.write(outputStream);
outputStream.flush();
outputStream.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:23:29.863

你打电话`pResponse.getOutputStream();`是非法的。你应该使用任何一个`ServletResponse.getOutpustStream()`for `ServletResponse.getWriter()`。您不能在同一响应中同时使用两者。

`ServletResponse.getWriter()`由于默认使用 JSP 。你应该写信`ServletResponse.getWriter()` 给`ServletResponse.getOutpustStream()`

这就是 Java Doc 所说的：

> ## 获取输出流...
> 
> ServletOutputStream getOutputStream() 抛出 IOException
> 
> 返回适合在响应中写入二进制数据的 ServletOutputStream。servlet 容器不对二进制数据进行编码。
> 
> 在 ServletOutputStream 上调用 flush() 会提交响应。可以调用此方法或 getWriter() 来编写正文，而不是两者。
> 
> 返回：用于写入二进制数据的 ServletOutputStream 抛出：**IllegalStateException - 如果已在此响应上调用 getWriter 方法**

# binary - 与二进制相比，将密码存储为十六进制的安全风险

> ID：15664531
> 
> 赞同：0
> 
> 时间：2013-03-27T16:47:07.167
> 
> 标签：binary, hex, password-encryption

我刚刚完成了一个教程，该教程告诉我使用 hash_hmac 来散列我的密码，并将设置“true”以二进制格式输出。然后将其保存为我的 MySql 数据库中的 varbinary(32) 格式。

我花了最后一个小时处理用户登录表单，我一直难以比较输入中的散列密码和数据库中的散列密码，因为我认为我对十六进制/二进制的差异感到困惑某处。

我的问题是：以二进制格式存储密码有什么好处？它仅仅是一种节省空间的措施吗？或者它是否以某种方式提高了安全性？

如果这只是一种节省空间的措施，我想我会将它们存储为十六进制，因为对我来说它更容易使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:50:55.420

> 它仅仅是一种节省空间的措施吗？或者它是否以某种方式提高了安全性？

将其以二进制形式存储在 a 中，`varbinary(32)`而不是将文本存储在 a 中，无疑是一种节省空间的措施`char()`。以一种或另一种方式存储它不会影响安全性。

# facebook - Facebook 集成 iOS 6 社交/帐户框架

> ID：15664538
> 
> 赞同：1
> 
> 时间：2013-03-27T16:47:22.963
> 
> 标签：facebook, ios6, frameworks, social, account

我想编写一个用于 facebook 与 iOS 6 集成的单例。我使用社交和帐户框架。

这是我的 FacebookData.h ：

```
@class FacebookData;

@protocol FacebookDataDelegate <NSObject>
@optional
- (void)FacebookDataDidLoadRequest:(NSDictionary *)result;
- (void)FacebookDataDidFailToLoadRequest:(NSError *)error;
@end

@interface FacebookData : NSObject{
    NSString *facebookAppID;
    ACAccountStore *facebookAccountStore;
    ACAccountType *facebookAccountType;
    ACAccount *facebookAccount;
    BOOL readPermissionsGranted;
    BOOL RequestPermissionsGranted;
}

@property (nonatomic) id delegate;

+ (FacebookData*)sharedFacebookData;

- (void)setAppID:(NSString *)appID;
- (NSString *)currentAppID;
- (void)requestPermissions:(NSArray*)Permissions andLoadRequest:(NSString*)theRequest;
- (void)loadRequest:(NSString*)theRequest;

@end 
```

我的 FacebookData.m 最重要​​的方法：

```
 - (void)requestPermissions:(NSArray*)Permissions andLoadRequest:(NSString*)theRequest{

    if(!readPermissionsGranted){

    __block NSArray *facebookPermissions = @[@"read_stream", @"email"];

    __block NSDictionary *facebookOptions = @{   ACFacebookAppIdKey : facebookAppID,
                                         ACFacebookAudienceKey : ACFacebookAudienceFriends,
                                         ACFacebookPermissionsKey : facebookPermissions};

    [facebookAccountStore requestAccessToAccountsWithType:facebookAccountType options:facebookOptions completion:^(BOOL granted, NSError *error)
     {
         if (granted) {

             readPermissionsGranted = YES;
             [self requestPermissions:Permissions andLoadRequest:theRequest];

         }

         // If permission are not granted to read.
         if (!granted)
         {
             NSLog(@"Read permission error: %@", [error localizedDescription]);
             [self.delegate FacebookDataDidFailToLoadRequest:error];
             readPermissionsGranted = NO;

             if ([[error localizedDescription] isEqualToString:@"The operation couldn’t be completed. (com.apple.accounts error 6.)"])
             {
                 [self performSelectorOnMainThread:@selector(showError) withObject:error waitUntilDone:NO];
             }
         }

     }];

    }else{

        __block NSArray *facebookPermissions = [NSArray arrayWithArray:Permissions];        
        __block NSDictionary *facebookOptions = @{   ACFacebookAppIdKey : facebookAppID,
                                                     ACFacebookAudienceKey : ACFacebookAudienceFriends,
                                                     ACFacebookPermissionsKey : facebookPermissions};

        [facebookAccountStore requestAccessToAccountsWithType:facebookAccountType options:facebookOptions completion:^(BOOL granted2, NSError *error)
         {
             if (granted2)
             {
                 RequestPermissionsGranted = YES;
                 // Create the facebook account
                 facebookAccount = [[ACAccount alloc] initWithAccountType:facebookAccountType];
                 NSArray *arrayOfAccounts = [facebookAccountStore accountsWithAccountType:facebookAccountType];
                 facebookAccount = [arrayOfAccounts lastObject];
                 [self loadRequest:theRequest];
                 NSLog(@"Permission granted");
             }

             if (!granted2)
             {
                 NSLog(@"Request permission error: %@", [error localizedDescription]);
                 [self.delegate FacebookDataDidFailToLoadRequest:error];
                 RequestPermissionsGranted = NO;
             }

         }];

    }
}

- (void)loadRequest:(NSString*)theRequest{

    __block NSDictionary *result= [[NSDictionary alloc]init];
    // Create the URL to the end point
    NSURL *theURL = [NSURL URLWithString:theRequest];

    // Create the SLReqeust
    SLRequest *slRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:theURL parameters:nil];

    // Set the account
    [slRequest setAccount:facebookAccount];

    // Perform the request
    [slRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (error)
        {
            // If there is an error we populate the error string with error
            __block NSString *errorString = [NSString stringWithFormat:@"%@", [error localizedDescription]];
            NSLog(@"Error: %@", errorString);
            [self.delegate FacebookDataDidFailToLoadRequest:error];

        } else
        {
            NSLog(@"HTTP Response: %i", [urlResponse statusCode]);
            NSDictionary *jsonResponse = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
            result = jsonResponse;
            [self.delegate FacebookDataDidLoadRequest:jsonResponse];
        }

    }];
} 
```

我像这样使用这个单例：

```
FacebookData *data = [FacebookData sharedFacebookData];
data.delegate = self;
[data setAppID:APPIDKEY];
[data requestPermissions:@[@"friends_location"]     andLoadRequest:@"https://graph.facebook.com/me/friends?fields=id,name,location"]; 
```

具有此权限的此请求失败，而具有权限的相同方法 :@[@"email"] 和请求：[https://graph.facebook.com/me/friends](https://graph.facebook.com/me/friends)完美运行。

这是我可以在控制台中看到的错误：

```
error =     {
        code = 2500;
        message = "An active access token must be used to query information about the current user.";
        type = OAuthException;
    }; 
```

我找不到错误在哪里，我不知道如何在这些框架中使用令牌。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T14:23:48.010

IMO 您的 LoadRequest URL 不正确

**andLoadRequest:@" [https://graph.facebook.com/me/friends?fields=id,name,location](https://graph.facebook.com/me/friends?fields=id,name,location) "];**

SLRequest 给出了一个 oauth 错误，即使它的 URL 确实存在问题。SLRequest 不直接在 URL中支持**"?fields=id,name,location" 。**您需要将它们作为参数传递给 SLRequest

请参见下面的示例：

```
NSString* queryString = NULL;
queryString = [NSString stringWithFormat:@"https://graph.facebook.com/me/friends", nil];
NSURL *friendsRequestURL = [NSURL URLWithString:queryString];
    SLRequest *friendsRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                         requestMethod:SLRequestMethodGET URL:friendsRequestURL
                                                          parameters:@{@"fields":@"id,name,location"}]; 
```

PS：昨晚我遇到了类似的问题，并诅咒Facebook给出了错误的错误声明。但最后终于能够解决它。:)

# c# - 使用 ASP.NET 登录后如何获取用户名和角色？（将 aspnetdb 集成到我的数据库中）

> ID：15664540
> 
> 赞同：0
> 
> 时间：2013-03-27T16:47:25.570
> 
> 标签：c#, asp.net

我用 ASP.NET 做了一个网站，它管理学生。我已经建立了一个学生数据库和 aspnetdb 数据库集成。当我登录时获取用户名和角色，但不知道如何。我需要每个成员，他们将有一个单一的功能，看时间表和他们自己的信息......我想早点知道这个。希望有人会帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:53:02.103

您可以在连接到当前线程的身份中获取您的登录，身份实现`IIdentity`接口

链接：http: [//msdn.microsoft.com/fr-fr/library/system.security.principal.iidentity.aspx](http://msdn.microsoft.com/fr-fr/library/system.security.principal.iidentity.aspx)

首先你得到你的`CurrentPrincipal`，解析你的委托人并返回你的身份

链接：http: [//msdn.microsoft.com/fr-fr/library/system.threading.thread.currentprincipal.aspx](http://msdn.microsoft.com/fr-fr/library/system.threading.thread.currentprincipal.aspx)

链接：http: [//msdn.microsoft.com/fr-fr/library/system.security.principal.iprincipal.aspx](http://msdn.microsoft.com/fr-fr/library/system.security.principal.iprincipal.aspx)

注意：您可以覆盖您的身份和主体，但这假设您已将具有身份的主体添加到当前线程

# flash - 包含多个 IP 摄像机流的网页

> ID：15664543
> 
> 赞同：0
> 
> 时间：2013-03-27T16:47:29.010
> 
> 标签：flash, applet, ffmpeg, streaming, xuggler

我有一些来自 IP 摄像机的实时 RTSP 流，带有 H.264 视频和 g-729 声音编解码器。我需要将它们显示在网页上，该网页可以在 Windows、Linux 和 Mac 中的任何流行浏览器中打开。此外，必须有一个选项来录制并将视频从任何流到 flv 文件保存到用户的 PC，使用开始/停止录制按钮。问题是，我不知道选择什么技术：我想出的所有解决方案都有几个问题。

第一个变体是使用FFmpeg将流转码为RTMP，将音频编解码器更改为MP3。这样就可以用一个小的Flash应用程序播放。它可以工作，但我不知道如何保存视频，因为 .flv-writing 库需要位图和 ByteArray 声音数据块作为输入。从 Video 类获取图像不是问题，但我对声音一无所知：SoundMixer 类无法使用它的 computeSpectrum 方法从 Video（或 NetStream）接收任何数据。因此，无法将声音写入 .flv 是此解决方案的唯一问题。

另一个变体是使用基于 Xuggler 库的 java 小程序。它工作得很好，但是库非常大，“applet”的大小接近 40mb！

我还尝试了 Silverlight（问题是，它不受欢迎，所以每个人都必须为 1 个应用程序下载它）和 HTML5（它不允许从传入的实时流中捕获声音，如 Flash），但它们也没有给出解决方案. 所以我不知道，如何实现这个项目，你能给我任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:45:57.373

您是否考虑过使用 Wowza 作为代理？它有很多附加组件和内置功能，可以让你提到的事情。您可以提取这些摄像头流，将流并行记录到文件中，然后使用您想要的任何播放器将其推送到您的网页中。

这个想法是，一旦你的流在 Wowza 中，你可以做任何事情。

[http://www.wowza.com/](http://www.wowza.com/)

它还有一个不错的论坛，在线支持团队可以回答您的问题。

# c# - RabbitMQ 将消息传递回调用客户端

> ID：15664546
> 
> 赞同：1
> 
> 时间：2013-03-27T16:47:31.117
> 
> 标签：c#, .net, wcf, interface, rabbitmq

这是我第一次尝试在 stackoverflow 上发布问题。如果问题或方法有问题，请多多包涵。我做了很多搜索以找到我的问题的答案，但无法弄清楚。这就是我想要做的。我编写了一个连接到 RabbitMQ localhost 以检索消息的 WCF 服务。我编写了一个使用 WCF 服务的控制台程序。现在，我希望 WCF 从 RabbitMQ 接收到的任何消息都被传递回控制台程序，而 WCF 仍在等待接收任何即将到来的消息。我看到的示例是使用委托和事件将消息传递回 Windows 窗体应用程序。我很难为控制台程序实现这个。下面是我的 WCF 代码。

```
public class MessageQueueSvc : IService1
{
    public string HOST_NAME = "localhost";
    public string EXCHANGE_NAME = "MyExchange";
    public string QUEUE_NAME = "MyMessageQ1";
    public string ROUTING_KEY = "";

    protected bool isConsuming;
    public delegate void onReceiveMessage(byte[] message);
    public event onReceiveMessage onMessageReceived;

    public IModel Model { get; set; }
    public IConnection Connection { get; set; }
    public Subscription mSubscription { get; set; }

    public string Hello(string name)
    {
        return "Hello";
    }

    public void StartConsuming()
    {
        isConsuming = true;

        var connectionFactory = new ConnectionFactory();
        connectionFactory.HostName = "localhost";
        Connection = connectionFactory.CreateConnection();

        //connect the model, exchange, queue and bind them together
        bool durable = true;

        //after connection create a channel so that you can communicate with the broker thru this channel. 
        IModel channel = Connection.CreateModel();

        //after this declare an exchange and a queue and bind them together to this channel 
        if (!String.IsNullOrEmpty(EXCHANGE_NAME))
            channel.ExchangeDeclare(EXCHANGE_NAME, ExchangeType.Direct, durable);

        if (!String.IsNullOrEmpty(QUEUE_NAME))
        {
            channel.QueueDeclare(QUEUE_NAME, false, false, false, null);
            channel.QueueBind(QUEUE_NAME, EXCHANGE_NAME, ROUTING_KEY, null);
        }

        //once model,exchange, queue is created then start cosuming it. 
        bool autoAck = false;

        //create a subscription
        mSubscription = new Subscription(Model, QUEUE_NAME, autoAck);

        while (isConsuming)
        {
            BasicDeliverEventArgs e = mSubscription.Next();
            byte[] body = e.Body;
            String tempStr = System.Text.Encoding.UTF8.GetString(body);
            tempStr = "Processed message = " + tempStr;
            body = System.Text.Encoding.UTF8.GetBytes(tempStr);
            if (onMessageReceived != null)
            {
                //this is not working. I have to write an event handler or some sort of delegate to pass the message back to the calling program
                //and still waiting here for further messages from the server. 
                onMessageReceived(body);
            }
            mSubscription.Ack(e);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:51:35.110

我认为你的方法有点错误。

在实例化 MessageQueueSvc 类时，您需要创建连接、通道和使用者，就像您当前在`StartConsuming`方法中所做的一样。但是，我不会创建一个无限循环来进行消息消费。

相反，当控制台应用程序调用 WCF 客户端时，您应该从队列中使用。

```
public string GetMessage()
{
  BasicDeliverEventArgs e = mSubscription.Next();
  byte[] body = e.Body;
  String tempStr = System.Text.Encoding.UTF8.GetString(body);
  tempStr = "Processed message = " + tempStr;
  body = System.Text.Encoding.UTF8.GetBytes(tempStr);
  mSubscription.Ack(e);

  if (onMessageReceived != null)
  {
    return tempStr;
  } 
  else
  {
    return null; //or throw some kind of exception...
  }
} 
```

# php - 在不更改键的情况下对数组进行排序

> ID：15664547
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:47:35.500
> 
> 标签：php, arrays

如何对下面的数组进行排序，以便顶部的较大值和键不会更改。

```
Array
(
    [8] => 2
    [9] => 2
    [10] => 1
    [12] => 1
    [16] => 1
    [17] => 1
    [18] => 1
    [19] => 1
    [20] => 2
    [23] => 1
    [24] => 2
    [25] => 2
    [27] => 1
    [50] => 2
    [4] => 1
    [14] => 1
) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:51:48.197

您应该可以使用`asort`/ `arsort`。`arsort`来自 PHP.net ( [http://www.php.net/manual/en/function.arsort.php](http://www.php.net/manual/en/function.arsort.php) )的示例用法：

```
<?php
    $fruits = array("d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple");
    arsort($fruits);
    foreach ($fruits as $key => $val) {
        echo "$key = $val\n";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:52:06.317

直接来自[PHP 手册](http://www.php.net/manual/en/function.asort.php)

`This function sorts an array such that array indices maintain their correlation with the array elements they are associated with. This is used mainly when sorting associative arrays where the actual element order is significant.`

```
<?php
$fruits = array("d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple");
asort($fruits);
foreach ($fruits as $key => $val) {
    echo "$key = $val\n";
}
?> 
```

# android - 如何创建绘画位图？

> ID：15664550
> 
> 赞同：0
> 
> 时间：2013-03-27T16:47:43.487
> 
> 标签：android, canvas, bitmap, save

好的，这是我没有创建位图的完整 CanvasView，我真的不知道该怎么做。如果你理解它，如果你能帮助我，请这样做。先感谢您！保存功能在 FirstActivity 中，它表示位图为空。

```
public class CanvasView extends View{

private static final float STROKE_WIDTH = 5f;
private static final float HALF_STROKE_WIDTH = STROKE_WIDTH/2;
Paint erasePaint = new Paint();
Paint paint = new Paint();
Path path = new Path();

float lastTouchX,lastTouchY;

AlertDialog.Builder alert;

RectF ovalRectangle = new RectF();
RectF dirtyRect = new RectF();

MyRectangle myRectangle;
MyOval myOval;
MyCircle myCircle;
MyFreehand myFreehand; 
MyLine myLine;
MyEraser myEraser;

List<MyEraser> eraserList = new ArrayList<MyEraser>();
List<MyLine> lineList = new ArrayList<MyLine>();
List<MyFreehand> freehandList  = new ArrayList<MyFreehand>();
List<MyCircle> circleList = new ArrayList<MyCircle>();
List<MyOval> ovalList = new ArrayList<MyOval>();
List<MyRectangle> rectangleList = new ArrayList<MyRectangle>();

public boolean dashedLine = false;
public DashPathEffect dashEffect = new DashPathEffect(new float[]{20,30}, 0);
private Paint mBitmapPaint;
private Bitmap mBitmap; 

public String textValue;

public CanvasView(Context context, AttributeSet attrs) {
    super(context, attrs);
    setBackgroundColor(Color.WHITE);

    if (android.os.Build.VERSION.SDK_INT >= 11) 
    {
        turnOffHardwareAcc();
    }

    erasePaint.setColor(Color.WHITE);
    //erasePaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

    erasePaint.setAntiAlias(true);
    erasePaint.setStyle(Paint.Style.STROKE);
    erasePaint.setStrokeJoin(Paint.Join.ROUND);
    erasePaint.setStrokeWidth(12);

    paint.setColor(Color.BLACK);
    paint.setStyle(Paint.Style.STROKE);

    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(STROKE_WIDTH);
    paint.setTextSize(34);

    setMode(7);//default = 7 - free hand;

    mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    /* input dialog*/

     //setInputDialog();

}
EditText input;
public void setInputDialog(){

    alert = new AlertDialog.Builder(getContext());
    alert.setTitle("Title");
    alert.setMessage("Write text");

    // Set an EditText view to get user input 
    input = new EditText(getContext());
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
         textValue= input.getText().toString();
         Toast.makeText(getContext(), textValue, Toast.LENGTH_SHORT).show();
      // Do something with value!
      }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
      }
    });

    //alert.show();

}

public void setDashLine(){

    dashedLine = true;
    paint = new Paint();
    paint.setPathEffect(dashEffect);
    paint.setStyle(Paint.Style.STROKE);
    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(STROKE_WIDTH);
}

public void setNormalLine(){
    //paint.setColor(Color.BLACK);
    dashedLine = false;

    paint.setPathEffect(null);
    paint.setStyle(Paint.Style.STROKE);
    paint.setPathEffect(null);
    paint.setAntiAlias(true);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeWidth(STROKE_WIDTH);
}

@TargetApi(11)
public void turnOffHardwareAcc() // to enable dashed lines
{

    this.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
}

//public void setPaint(int color,)

@TargetApi(11)
protected void onDraw(Canvas canvas) {

    if(dashedLine){
        paint.setPathEffect(dashEffect);
    }
    else {
        paint.setPathEffect(null);
    }

    if(bitmap!=null){

        canvas.drawBitmap(bitmap, 0, 0, paint);
         for(MyCircle circle:circleList){// draw circles

             myCanvas.drawCircle(getCircleMidPointX(circle.firstX, circle.lastX),getCircleMidPointY(circle.firstY, circle.lastY),circle.radius,myPaint);
         }

    }

    for(MyLine line:lineList){ //draw lines
         if(dashedLine)
             line.paint.setPathEffect(dashEffect);
         else
             line.paint.setPathEffect(null);
            canvas.drawLine(line.xStart, line.yStart, line.xEnd, line.yEnd, line.paint);
      }

     for(MyCircle circle:circleList){// draw circles

         canvas.drawCircle(getCircleMidPointX(circle.firstX, circle.lastX),getCircleMidPointY(circle.firstY, circle.lastY),circle.radius,paint);
     }

     for(MyOval oval:ovalList){
         if(dashedLine)
             oval.paint.setPathEffect(dashEffect);
         else oval.paint.setPathEffect(null);

           ovalRectangle.set(oval.getX1(),oval.getY1(),oval.getX2(),oval.getY2());
           canvas.drawOval(ovalRectangle, oval.paint);
     }

     for(MyRectangle rectangle:rectangleList){
         if(dashedLine)
             rectangle.paint.setPathEffect(dashEffect);
         else rectangle.paint.setPathEffect(null);

           canvas.drawRect(rectangle.getX1(),rectangle.getY1(),rectangle.getX2(),rectangle.getY2(),rectangle.paint);
     }  

     for(MyEraser e:eraserList){
            canvas.drawPath(e.p,erasePaint);
            invalidate();
     }
     if(textValue!= null)
         canvas.drawText(textValue, xStart, yStart, paint);
     canvas.drawPath(path, paint);
     //path.reset();

}

final OnTouchListener drawLineListener = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
              myLine = new MyLine();
              myLine.xStart = event.getX();
              myLine.yStart = event.getY();

            return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
            myLine.xEnd = event.getX();
            myLine.yEnd = event.getY();
            invalidate();
            lineList.add(myLine); 
            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }
        return true;

    }
};

final OnTouchListener drawDashedLineListener = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
             return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:

            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }
        return true;

    }
};

final OnTouchListener drawCircleListener = new OnTouchListener(){

    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
           //  path.moveTo(eventX, eventY);
              Toast.makeText(getContext(), "action down - circle",Toast.LENGTH_SHORT).show();
              myCircle = new MyCircle();
              myCircle.firstX = eventX;
              myCircle.firstY = eventY;

            // There is no end point yet, so don't waste cycles invalidating.
            return true;

          case MotionEvent.ACTION_MOVE:

          case MotionEvent.ACTION_UP:
            myCircle.lastX = eventX;
            myCircle.lastY = eventY;

            myCircle.radius = getRadius(myCircle.firstX,myCircle.firstY,myCircle.lastX,myCircle.lastY);

            circleList.add(myCircle);

            invalidate();
            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }
  return true;
    }

};

final OnTouchListener drawOvalListener = new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {

            FirstActivity.ll.setVisibility(LinearLayout.GONE);

            switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                myOval = new MyOval();
                myOval.setX1(event.getX());
                myOval.setY1(event.getY());
                // There is no end point yet, so don't waste cycles invalidating.
                return true;

              case MotionEvent.ACTION_MOVE:
              case MotionEvent.ACTION_UP:

                  myOval.setX2(event.getX());
                  myOval.setY2(event.getY());

                  invalidate();
                  ovalList.add(myOval);

              default:
                Log.d("mock it up", "Unknown touch event  " + event.toString());
                return false;
            }

        }
    };

final OnTouchListener drawRectangleListener = new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

            FirstActivity.ll.setVisibility(LinearLayout.GONE);

            switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                  myRectangle = new MyRectangle();
                  myRectangle.setX1(event.getX());
                  myRectangle.setY1(event.getY());
                return true;

              case MotionEvent.ACTION_MOVE:

              case MotionEvent.ACTION_UP:

                  myRectangle.setX2(event.getX());
                  myRectangle.setY2(event.getY());
                  invalidate();
                  rectangleList.add(myRectangle);

                break;

              default:
                Log.d("mock it up", "Unknown touch event  " + event.toString());
                return false;
            }

            return true;
        }
};

final OnTouchListener eraseListener = new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {

    //  erasePaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
        //FirstActivity.ll.setVisibility(LinearLayout.GONE);

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
             myEraser = new MyEraser();
              lastTouchX = event.getX();
              lastTouchY = event.getY();
              myEraser.mouseDown(event.getX(), event.getY());
              return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
              resetDirtyRect(event.getX(),event.getY());
              int historySize = event.getHistorySize();
              for(int i=0;i<historySize;i++){
                  float historicalX = event.getHistoricalX(i);
                  float historicalY = event.getHistoricalY(i);
                  expandDirtyRect(historicalX, historicalY);

                  myEraser.mouseUp(historicalX, historicalY);
            }
              myEraser.mouseUp(event.getX(), event.getY());
              eraserList.add(myEraser);
             break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }

        invalidate(
                (int) (dirtyRect.left - HALF_STROKE_WIDTH),
                (int) (dirtyRect.top - HALF_STROKE_WIDTH),
                (int) (dirtyRect.right + HALF_STROKE_WIDTH),
                (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

            lastTouchX = event.getX();
            lastTouchY = event.getY();
       return true;
    }
};

final OnTouchListener drawFreeHandListener = new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {

        FirstActivity.ll.setVisibility(LinearLayout.GONE);

        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
             // path.reset();
            path.moveTo(eventX, eventY);
            lastTouchX = eventX;
            lastTouchY = eventY;
            // There is no end point yet, so don't waste cycles invalidating.
            return true;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
            // Start tracking the dirty region.
            resetDirtyRect(eventX, eventY);

            // When the hardware tracks events faster than they are delivered, the
            // event will contain a history of those skipped points.
            int historySize = event.getHistorySize();
            for (int i = 0; i < historySize; i++) {
              float historicalX = event.getHistoricalX(i);
              float historicalY = event.getHistoricalY(i);
              expandDirtyRect(historicalX, historicalY);
              path.lineTo(historicalX, historicalY);
            }

            // After replaying history, connect the line to the touch point.
            path.lineTo(eventX, eventY);
            //path.reset();
            break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }

        // Include half the stroke width to avoid clipping.
        invalidate(
            (int) (dirtyRect.left - HALF_STROKE_WIDTH),
            (int) (dirtyRect.top - HALF_STROKE_WIDTH),
            (int) (dirtyRect.right + HALF_STROKE_WIDTH),
            (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

        lastTouchX = eventX;
        lastTouchY = eventY;

        return true;
    }
};

float xStart,yStart;
final OnTouchListener textListener = new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        FirstActivity.ll.setVisibility(LinearLayout.GONE);

    //  Toast.makeText(getContext(), "add some text", Toast.LENGTH_SHORT).show();

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
              //
              setInputDialog();
              xStart = event.getX();
              yStart = event.getY();
              alert.show();
            break;

          case MotionEvent.ACTION_MOVE:
          case MotionEvent.ACTION_UP:
            //  setInputDialog();
                  break;

          default:
            Log.d("mock it up", "Unknown touch event  " + event.toString());
            return false;
        }

        return true;
    }
};

/**
 * Called when replaying history to ensure the dirty region includes all
 * points.
 */
private void expandDirtyRect(float historicalX, float historicalY) {
  if (historicalX < dirtyRect.left) {
    dirtyRect.left = historicalX;
  } else if (historicalX > dirtyRect.right) {
    dirtyRect.right = historicalX;
  }
  if (historicalY < dirtyRect.top) {
    dirtyRect.top = historicalY;
  } else if (historicalY > dirtyRect.bottom) {
    dirtyRect.bottom = historicalY;
  }
}

/**
 * Resets the dirty region when the motion event occurs.
 */
private void resetDirtyRect(float eventX, float eventY) {

  // The lastTouchX and lastTouchY were set when the ACTION_DOWN
  // motion event occurred.
  dirtyRect.left = Math.min(lastTouchX, eventX);
  dirtyRect.right = Math.max(lastTouchX, eventX);
  dirtyRect.top = Math.min(lastTouchY, eventY);
  dirtyRect.bottom = Math.max(lastTouchY, eventY);
}

public void setMode(int mode){
    switch(mode){
    case 1://draw line
        Toast.makeText(getContext(), "draw line", Toast.LENGTH_SHORT).show();
        setOnTouchListener(drawLineListener);
        break;
    case 2://draw dashed line
        Toast.makeText(getContext(), "dashed line", Toast.LENGTH_SHORT).show();
        break;
    case 3:// draw circle
        setOnTouchListener(drawCircleListener);
        break;
    case 4: //draw oval
        setOnTouchListener(drawOvalListener);
        break;
    case 5: //draw rectangle
        setOnTouchListener(drawRectangleListener);
        break;
    case 6: //erase
        setOnTouchListener(eraseListener);
        break;
    case 7: //free-hand
        setOnTouchListener(drawFreeHandListener);
        break;
    case 8:
        setOnTouchListener(textListener);
        break;
    }
}

private Bitmap bitmap;
private Canvas myCanvas;
public Paint myPaint;

public void setImage(Bitmap b){
    Toast.makeText(getContext(), "set Bitmap",Toast.LENGTH_SHORT).show();
    bitmap = b.copy(Bitmap.Config.ARGB_8888, true);
    myCanvas = new Canvas(bitmap);

    myPaint = new Paint();
    myPaint.setColor(Color.YELLOW);
    myPaint.setAntiAlias(true);
    myPaint.setStrokeWidth(8);

    invalidate();
}

public void changeColor(int color){
    paint = new Paint(paint);
    paint.setColor(color);
    //myPaint.setColor(color);
}

public float getRadius(float x1,float y1,float x2,float y2){
      float r = (float) (Math.sqrt((double)(Math.pow((y2-y1), 2.0)+Math.pow((x2-x1), 2.0)))/2);
      return r;
  }

public float getCircleMidPointX(float x1,float x2){
      return (x1+x2)/2;
  }

public float getCircleMidPointY(float y1,float y2){
      return (y1+y2)/2;
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:57:26.103

您必须就地创建位图，就在您将其保存到文件的位置。然后您必须根据位图创建自己的 Canvas 并将其传递给 View 的 draw 方法。像这样的东西：

```
public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()) {
    case R.id.tools:
    ll.setVisibility(LinearLayout.VISIBLE);
    return true;
    case R.id.import_pics:
    getPhotos();
    return true;
    case R.id.save:
    {
        Bitmap bitmap = Bitmap.createBitmap(theView.getWidth(),theView.getHeight,Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        theView.draw(canvas);
        storeImage(bitmap);
        bitmap.recycle();
    }
    return true;
    case R.id.trash:
    return true;
    }
    return false;
} 
```

将绘图代码移动到绘图方法。

我想这就是你要问的。这个问题并不是最清楚的。

# c# - 为一种方法覆盖 MVC 中的全局过滤器

> ID：15664553
> 
> 赞同：7
> 
> 时间：2013-03-27T16:47:47.590
> 
> 标签：c#, asp.net-mvc-4

在我的 filterConfig 中，我注册了一个全局属性过滤器，它需要对我的每个方法进行授权。

但是，我有一种特殊的方法，我想应用不同的授权过滤器属性。如果可能的话，如何做到这一点？

注意：我不想使用 [AllowAnonymous] 属性（它无缝地工作并且完全忽略我的过滤器），因为我希望通过方法上的一组不同的授权逻辑来授权请求​​。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:13:22.280

`AllowMultiple = true`您可以通过在属性类上设置属性来更改过滤器以允许多个过滤器`AttributeUsage`，并添加一个检查，以便如果过滤器多次出现，则不会执行全局应用的过滤器。`ActionExecutingContext`传入的`OnActionExecuting()`允许您通过 应用过滤器`filterContext.ActionDescriptor.GetCustomAttributes()`，因此您可以在此处使用它。

然后，更改构造函数，以便您可以传入一个参数（可能是一个枚举），它可以用来决定使用哪种授权方法 - 普通方法或其他方法。给该参数一个默认值，使其选择正常的身份验证方法。然后，在需要不同身份验证方法的那个方法上，您可以将过滤器与参数的其他值一起应用。所以它可能看起来像这样：

```
public class CustomAuthAttribute : AuthorizeAttribute
{
    public CustomAuthAttribute(AuthMethod method = AuthMethod.StandardAuth)
    {
        //stuff
    }
}

[CustomAuth(AuthMethod.WeirdAuth)]
public ActionResult MethodThatNeedsDifferentAuth()
{
    //stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:59:38.680

您可以编写自己的授权属性版本并将特定参数传递给具体取决于您希望属性执行的操作，例如

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
   {
        public string currentAction { get; set; }
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
           if (currentAction != "notallowed")
            {
                HandleUnauthorizedRequest(filterContext);
            }
        }
    }

 protected override void HandleUnauthorizedRequest(AuthorizationContext context)
    {
        context.Result = new RedirectResult("/home/login");
    } 
```

然后将其应用于您的课程或行动

```
[CustomAuthorize(currentAction = "notallowed")]
public class HomeController : Controller 
```

# for-loop - python 'for' 子句是否以与存储对象相同的顺序迭代对象？

> ID：15664556
> 
> 赞同：1
> 
> 时间：2013-03-27T16:47:54.697
> 
> 标签：for-loop, python-2.7

这听起来像是一个愚蠢的问题，但如果我有这个

```
fruits = ['apple', 'banana', 'pear', 'orange']

for fruit in fruits:
  print fruit 
```

我会一直得到这个结果吗？（我的意思是，按这个顺序）

```
apple
banana
pear 
orange 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:03:01.743

是的，它将按照相同的顺序。

“Python 中的 for 语句与您在 C 或 Pascal 中可能使用的有点不同。而不是总是迭代数字的算术级数（如在 Pascal 中），或者让用户能够定义迭代步骤和停止条件（如 C），Python 的 for 语句迭代任何序列（列表或字符串）的项目，按照它们在序列中出现的顺序。”

[http://docs.python.org/2/tutorial/controlflow.html#for-statements](http://docs.python.org/2/tutorial/controlflow.html#for-statements)

# c# - 如何调试具有异步数据访问且没有调用堆栈的 WPF 应用程序？

> ID：15664558
> 
> 赞同：2
> 
> 时间：2013-03-27T16:47:58.230
> 
> 标签：c#, wpf, debugging, asynchronous, data-access

我有一个使用 MVVM 设计模式和异步数据访问方法的大型 WPF 应用程序。它使用带有回调处理程序和接口的旧式异步代码`IAsyncResult`......这是一个典型的例子：

```
function.BeginInvoke(callBackMethod, asyncState); 
```

然后，在视图模型中，我有以下回调处理程序：

```
private void GotData(GetDataOperationResult<Genres> result)
{
    UiThreadManager.RunOnUiThread((Action)delegate
    {
        if (result.IsSuccess) DoSomething(result.ReturnValue);
        else FeedbackManager.Add(result);
    });
} 
```

`RunOnUiThread`方法基本如下：

```
public object RunOnUiThread(Delegate method)
{
    return Dispatcher.Invoke(DispatcherPriority.Normal, method);
} 
```

此问题仅影响一种视图模型，即允许用户编辑`Release`对象的视图模型。在相关视图上，填充 es 的某些集合`ComboBox`在首次加载时会从数据库中请求。让我们简化这个说法，即只有一个名为 的集合`Genres`。数据到达视图模型后，处理如下：

```
private void GotGenres(GetDataOperationResult<Genres> result)
{
    UiThreadManager.RunOnUiThread((Action)delegate
    {
        if (result.IsSuccess) Genres.AddEmptyItemBefore(result.ReturnValue);
        else FeedbackManager.Add(result);
    });
} 
```

当集合存在并且`Release`在 UI 中选择了一个对象时，我有以下代码`Release.Genre`从集合中选择当前值：

```
if (!Release.Genre.IsEmpty && Genres.ContainsItemWithId(Release.Genre.Id)) 
    Release.Genre = Genres.GetItemWithId(Release.Genre); 
```

在这一点上，我应该注意到这一切都很好，这是*唯一*`Release.Genre`从视图模型中引用属性的行。

我的特殊问题是，有时该`Release.Genre`属性设置为`null`，我无法弄清楚如何或从哪里开始。>> 编辑 >> 当我在属性设置器上放置一个断点时，<< 编辑 <<`Call Stack`没有提供关于设置`null`值的真正线索，因为只有`[Native to Managed Transition]`一行。从窗口中选择`Show External Code`选项后`Call Stack`，我可以看到基本的异步代码调用：

![调用堆栈](../Images/ed515ab456f834b8ad60ad7a2a8f8262.png)

现在，我可以确认在尝试解决此问题时发现的以下事实：

1.  `Release.Genre`引用该属性的一行**未**将其设置为`null`.
2.  对 Genres.AddEmptyItemBefore(result.ReturnValue) 的调用**未**将其设置为`null`... 这只是`Genres`在添加 'empty' 后将结果集合添加到集合中`Genre`。
3.  该`Release.Genre`属性有时被设置为`null`在调用 Genres.AddEmptyItemBefore(result.ReturnValue) 时或之后，但**不是**因为它......在几次单步执行时，执行已经跳到（以不相关的方式）到中断我在输入参数`Release.Genre`所在的属性设置器上设置的点，但这**并不是**每次都发生。`value``null`
***   它通常发生在从相关视图模型到`Release`视图模型时，但**不是**每次都发生。*   相关视图模型没有对该`Release.Genre`属性的引用。**

 **需要明确的是，我并不是要求任何人从我提供的稀疏信息中调试我的问题。我也没有就进行异步数据调用征求意见。相反，我真的在努力寻找我还没有想到的新方法。我知道某处的某些代码（几乎可以肯定是我的代码）将属性设置为`null`...我的问题是如何检测此代码的位置？它似乎不在`Release`视图模型中。在没有更多线索的情况下，如何继续调试此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:33:50.623

我通常使用平面文件、XML 或数据库日志来进行调试。我创建了这些 Log 类用于记录目的，以便我可以从我开发的每个应用程序中调用它。

对于数据库日志记录，您可以简单地执行以下操作：

```
void WriteLog(string log){
  // Your database insert here
} 
```

也许您需要日期时间和其他支持信息，但这取决于开发人员。对于简单的平面文件日志记录是：

```
void WriteLog(string log){
  using(TextWriter tx = new StreamWriter("./Log/" + DateTime.Now.ToString() + ".txt", false)){
    tx.WriteLine(log);
  }
} 
```

您可以通过两种方式在应用程序中使用日志记录：

1：方法调用

```
WriteLog((Release.Genre == null).ToString());
if (!Release.Genre.IsEmpty && Genres.ContainsItemWithId(Release.Genre.Id)) 
    Release.Genre = Genres.GetItemWithId(Release.Genre); 
```

2：将其添加到您的 Release.Genre 设置（或获取）属性中

```
public class Release{
  private Genre _genre=null;
  public Genre Genre{
    get{
      WriteLog((_genre == null).ToString());
      return _genre;
    }
    set{
      WriteLog((_genre == null).ToString());
      _genre = value;      
    }
  }
} 
```

有了这个，你可以尝试获取调用顺序，Release.Genre是否在其他地方设置过之前，调用中等。

请注意，我只是给出了构建日志的一般图像。请期待错误。但是，开发记录活动以满足要求是开发人员的责任。**

# jquery - 使用fancybox时内存耗尽

> ID：15664559
> 
> 赞同：1
> 
> 时间：2013-03-27T16:47:58.493
> 
> 标签：jquery, fancybox

我在 IE8/9 上注意到，每次我单击一个花式框链接时，它都会使用更多内存，并且在框关闭时不会将其归还。这应该发生吗？

我正在使用 fbox 2.1.4 和 jquery 1.9.1

我有一些用户点击了 30 多个 fbox 链接，然后开始耗尽内存

# android - WebView + ActionBarSherlock = 网站未加载，空白页，为什么...？

> ID：15664560
> 
> 赞同：1
> 
> 时间：2013-03-27T16:48:06.917
> 
> 标签：android, android-webview, actionbarsherlock

这可能有一些前兆，所以我最好也解释一下。我只希望 webview 显示一个操作栏。因此，在 sytles.xml 中，我将其称为基本主题：

```
parent="android:style/Theme.Holo.Light.NoActionBar" 
```

我将该主题分配给我的 MainActivity，而不是整个应用程序。

由于我想要在我的 WebView 活动中使用操作栏，因此我在清单中为该活动分配了以下内容：

```
<activity 
    android:name=".WebViewActivity"
    android:theme="@style/Theme.Sherlock.Light">
</activity> 
```

我确保在我的清单中调用互联网权限，这里是 webview 的 Activity 代码和布局文件：

```
package com.name.here; //Removed for this question

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

import android.os.Bundle;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class WebViewActivity extends SherlockActivity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webster);

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
    //webView.loadUrl("http://www.google.com");

    webView.setWebViewClient(new WebViewClient(){

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url){
            url ="http://google.com";
          view.loadUrl(url);
          return true;
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case R.id.AboutMenuItem:
            return true;
        default: 
            return super.onOptionsItemSelected(item);

    }
}
} 
```

和布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <WebView 
        android:id="@+id/webView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />
</LinearLayout> 
```

如您所见，我已尝试打开 Google。问题是它加载了一个空白页面。好吧，操作栏加载得很好，但是应该加载 Google 的 WebView 的其余活动是空的。这就是我剩下的：

![在此处输入图像描述](../Images/5eff7a08e2e24dec0fab9f9efd2cd07c.png)

我应该注意到操作栏确实填充了项目和应用程序的名称。我只是在这张图片中取出了那些。操作栏加载得很好，但仅此而已。

Logcat 什么都不提供，没有错误或警告。任何帮助表示赞赏。我认为设置 webview 会很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:53:19.180

您的代码`shouldOverrideUrlLoading`已损坏。它应该返回 true 或 false，而*不是*自己加载。这`view.loadUrl()`只会触发一个回调，`shouldOverrideUrlLoading`然后你就会崩溃。

改为这样做：

```
 public boolean shouldOverrideUrlLoading(WebView view, String url) {
      // do something to the url here if needed
      return false;
    } 
```

# git - SSH Key 要求输入密码

> ID：15664561
> 
> 赞同：20
> 
> 时间：2013-03-27T16:48:10.777
> 
> 标签：git, ssh, gitolite, ssh-keys, gitlab

我现在每周呆在这里~~两天。~~

我有一台带有 Gitlab4 和 gitolite 的 CentOs 机器。几个星期以来一切正常，但上周末突然发生了一些奇怪的事情，所有的二进制文件都从 mashine 中消失了（比如 yum、python、ruby、mysql 等。）我真的不知道这是怎么发生的......经过数小时的重新安装和编译 gitlab 又开始工作了。

但我无法让*gitlab*和*git*用户之间的 ssh 密钥正常工作。我已经删除并重新创建了 git 用户，再次设置了所有权限，重新创建了 ssh 密钥，重新安装了 gitolite 等。但没有任何效果，我不断收到同样的错误。

**git 用户 .ssh 文件夹**

```
-rwx------ 1 git git  557 Mar 27 16:46 authorized_keys 
```

**gitlab 用户 .ssh 文件夹**

```
-rw------- 1 gitlab gitlab 1671 Mar 27 16:45 id_rsa
-rw-r--r-- 1 gitlab gitlab  406 Mar 27 16:45 id_rsa.pub
-rw-r--r-- 1 gitlab gitlab  391 Mar 27 16:50 known_hosts 
```

**SSH 错误：**

```
ssh -vvvT git@localhost
OpenSSH_4.3p2, OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to localhost [127.0.0.1] port 22.
debug1: Connection established.
debug1: identity file /home/gitlab/.ssh/identity type -1
debug3: Not a RSA1 key file /home/gitlab/.ssh/id_rsa.
debug2: key_type_from_name: unknown key type '-----BEGIN'
debug3: key_read: missing keytype
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug2: key_type_from_name: unknown key type '-----END'
debug3: key_read: missing keytype
debug1: identity file /home/gitlab/.ssh/id_rsa type 1
debug1: identity file /home/gitlab/.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_4.3p2
debug1: match: OpenSSH_4.3p2 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_4.3p2
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib
debug2: kex_parse_kexinit: none,zlib
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib
debug2: kex_parse_kexinit: none,zlib
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: mac_init: found hmac-md5
debug1: kex: server->client aes128-cbc hmac-md5 none
debug2: mac_init: found hmac-md5
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug2: dh_gen_key: priv key bits set: 132/256
debug2: bits set: 502/1024
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug3: check_host_in_hostfile: filename /home/gitlab/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 1
debug1: Host 'localhost' is known and matches the RSA host key.
debug1: Found key in /home/gitlab/.ssh/known_hosts:1
debug2: bits set: 505/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /home/gitlab/.ssh/identity ((nil))
debug2: key: /home/gitlab/.ssh/id_rsa (0x848ba50)
debug2: key: /home/gitlab/.ssh/id_dsa ((nil))
debug1: Authentications that can continue: publickey,password
debug3: start over, passed a different list publickey,password
debug3: preferred publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /home/gitlab/.ssh/identity
debug3: no such identity: /home/gitlab/.ssh/identity
debug1: Offering public key: /home/gitlab/.ssh/id_rsa
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
debug1: Authentications that can continue: publickey,password
debug1: Trying private key: /home/gitlab/.ssh/id_dsa
debug3: no such identity: /home/gitlab/.ssh/id_dsa
debug2: we did not send a packet, disable method
debug3: authmethod_lookup password
debug3: remaining preferred: ,password
debug3: authmethod_is_enabled password
debug1: Next authentication method: password 
```

**身份验证日志给了我：**

```
Apr  2 10:19:13 venus sshd[15693]: User git not allowed because account is locked
Apr  2 10:19:13 venus sshd[15693]: Failed none for illegal user git from ::ffff:127.0.0.1 port 56906 ssh2 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-02T10:37:51.033

你提到：

```
Apr 2 10:19:13 venus shd[15693]: User git not allowed because account is locked 
Apr 2 10:19:13 venus sshd[15693]: Failed none for illegal user git from ::ffff:127.0.0.1 port 56906 ssh2 
```

[这篇文章](http://grid.ncsa.illinois.edu/ssh/ts_server.html)提到：

> OpenSSH 现在默认检查锁定的帐户。
> **在 Linux 系统上，锁定的帐户被定义为`!!`在密码字段中具有`/etc/shadow`**.
> **这是使用 useradd 命令创建的帐户的默认条目**。
> 即使您使用 GSI 身份验证并且不需要本地密码，`sshd`也不会让用户使用此消息登录：

```
Too many authentication failures for username 
```

> 在`sshd`调试信息中，它将表明该帐户已被锁定：

```
User username not allowed because account is locked 
```

> 以下是 sshd 手册中的一些附加信息：
> 
> > 无论身份验证类型如何，都会检查帐户以确保其可访问。
> > 如果帐户被锁定、在 DenyUsers 中列出或其组在 DenyGroups 中列出，则无法访问该帐户。
> > 锁定帐户的定义取决于系统。
> > 有些平台有自己的帐户数据库（例如 AIX），有些平台修改 passwd 字段（`*LK*`在 Solaris 和 UnixWare 上为“ `*`”，在 HP-UX 上包含“ `Nologin`”，在 Tru64 上包含“”，在 FreeBSD 上包含前导“ `*LOCKED*`”，在 FreeBSD 上包含前导“ `!!`”，在Linux）。
> > 如果需要在仍然允许公钥的同时禁用帐户的密码验证，则该`passwd`字段应设置为这些值以外的其他值（例如“ `NP`”`*NP*`
> 
> ### 修复：替换！！在 /etc/shadow 中使用（例如）NP。

* * *

正如[jszakmeister](https://stackoverflow.com/users/683080/jszakmeister)（[评论](https://stackoverflow.com/questions/15664561/ssh-key-asks-for-password/15761971?noredirect=1#comment22577876_15761971)）和Yongcan [-Frank-Lv](https://stackoverflow.com/users/2219150/yongcan-frank-lv)（[评论](https://stackoverflow.com/questions/15664561/ssh-key-asks-for-password/15761971?noredirect=1#comment22403938_15678933)）所提到的：

```
sudo passwd -u git 
```

将足以**[解锁帐户](http://www.cyberciti.biz/faq/tag/passwd-u-unlock/)**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-28T03:48:55.570

这个**完全相同的问题**在**gitlab 5.2** (bitnami) 中杀死了我。

我终于找到了它，`/var/log/auth.log`其中显示：

```
May 28 11:32:10 ml115 sshd[27779]: User git not allowed because account is locked
May 28 11:32:10 ml115 sshd[27779]: input_userauth_request: invalid user git [preauth] 
```

之后，没过多久我就发现里面的`git`条目`/etc/shadow`有 a`!`需要替换为`*`.

`*`设置好所有密钥后，我就可以从另一台机器上 ssh 进入（注意这也`ssh -vvT git@gitserver`有助于诊断）。

`git push -u origin master`

现在工作。

我的系统是 Ubuntu 13.04。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T10:04:33.980

你应该把 ~gitlab/.ssh/id_rsa.pub 放到 ~git/.ssh/authorized_keys

-rwx------ 1 git git 557 Mar 27 16:46 authorized_keys

-rw-r--r-- 1 gitlab gitlab 406 Mar 27 16:45 id_rsa.pub

我可以看到大小不匹配，您是否在authorized_keys 中添加了一些 ssh 密钥选项？您还应该检查 sshd 的错误日志（例如：/var/log/auth 或 /var/log/secure 等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-02T21:15:36.127

尽管接受的答案可能有效，但它可能不是解决此问题的首选方法。

至少在 Ubuntu 12.04 上，`passwd -u git`将导致此警告：

```
passwd: unlocking the password would result in a passwordless account.
You should set a password with usermod -p to unlock the password of this account. 
```

听起来不错...除了手册页`usermod`警告不要使用该`-p`选项。

```
Note: This option is not recommended because the password (or encrypted password)
will be visible by users listing the processes. 
```

而不是所有这些，调用`passwd -d gitlab`将通过删除用户的密码来解决问题（它将 passwd 字段设置为空字符串）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-19T22:10:27.050

解锁用户的最简单解决方案：`usermod -p '*' username`

# android - 不幸的是，*应用名称*已停止

> ID：15664562
> 
> 赞同：0
> 
> 时间：2013-03-27T16:48:11.207
> 
> 标签：android, eclipse, android-intent, android-emulator

我刚刚开始编程，正在制作瑞典法律书籍的安卓版本。我的代码没有错误，但是当我尝试在模拟器中运行它时，它会启动，但只要按下一个按钮，它就会显示“不幸的是，*应用程序的名称*已停止。”

我查看了许多其他类似的线程，但它们都是特定于代码的，因此对我没有用。

我正在使用 Eclipse。

所以，我想知道是否有任何善良的灵魂可以通过我所做的事情来帮助我找到错误？

这是“Activity_Main_activity.xml”编码：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".HuvudMeny" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Kapitel 1, Om Brott och Brottspåföljder"
    android:onClick = "kapett" /> 
```

如您所见，它非常简单。

这是 MainActivity.java 编码：

```
 import com.example.brottsbalken.Kap1;

    import android.os.Bundle;
    import android.app.Activity;
    import android.content.Intent;
    import android.view.Menu;
    import android.view.View;

    public class HuvudMeny extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_huvud_meny);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_huvud_meny, menu);
    return true;
}

    public void kapett(View view) {
Intent intent1 = new Intent(this, Kap1.class);
startActivity(intent1); 
```

编辑：添加了 LogCat。不知道你需要这个，对不起！

日志猫：

```
 03-27 16:33:46.371: E/Trace(795): error opening trace file: No such file or  directory (2)
    03-27 16:33:46.371: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:46.371: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:46.371: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:46.491: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:46.491: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:47.311: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:47.311: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:47.341: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:47.411: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:47.541: D/libEGL(795): loaded /system/lib/egl/libEGL_emulation.so
    03-27 16:33:47.611: D/(795): HostConnection::get() New Host Connection established          0x2a14b468, tid 795
    03-27 16:33:47.623: D/libEGL(795): loaded /system/lib/egl/libGLESv1_CM_emulation.so
    03-27 16:33:47.680: D/libEGL(795): loaded /system/lib/egl/libGLESv2_emulation.so
    03-27 16:33:47.861: W/EGL_emulation(795): eglSurfaceAttrib not implemented
    03-27 16:33:47.901: D/OpenGLRenderer(795): Enabling debug mode 0
    03-27 16:33:47.901: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:47.910: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:47.921: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.021: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.021: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.071: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.091: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.091: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.101: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.110: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.331: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.331: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.351: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.370: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.712: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:48.973: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:33:49.110: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.451: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.451: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.505: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.781: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.781: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.821: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.821: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:24.831: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:25.215: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:25.215: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.907: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.910: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.921: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.940: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.940: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.951: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.951: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.960: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.960: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:26.990: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:27.090: D/dalvikvm(795): GC_CONCURRENT freed 73K, 7% free 2718K/2908K,                          paused 5ms+4ms, total 164ms
    03-27 16:36:27.191: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:27.191: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:27.201: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:27.221: W/Trace(795): Unexpected value from nativeGetEnabledTags: 0
    03-27 16:36:27.260: D/AndroidRuntime(795): Shutting down VM
    03-27 16:36:27.260: W/dalvikvm(795): threadid=1: thread exiting with uncaught  exception (group=0x40a70930)
    03-27 16:36:27.321: E/AndroidRuntime(795): FATAL EXCEPTION: main
    03-27 16:36:27.321: E/AndroidRuntime(795): java.lang.IllegalStateException: Could not execute method of the activity
    03-27 16:36:27.321: E/AndroidRuntime(795):  at  android.view.View$1.onClick(View.java:3597)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.view.View.performClick(View.java:4202)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.view.View$PerformClick.run(View.java:17340)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.os.Handler.handleCallback(Handler.java:725)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.os.Handler.dispatchMessage(Handler.java:92)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.os.Looper.loop(Looper.java:137)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.app.ActivityThread.main(ActivityThread.java:5039)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at java.lang.reflect.Method.invokeNative(Native Method)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at java.lang.reflect.Method.invoke(Method.java:511)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at dalvik.system.NativeStart.main(Native Method)
    03-27 16:36:27.321: E/AndroidRuntime(795): Caused by: java.lang.reflect.InvocationTargetException
    03-27 16:36:27.321: E/AndroidRuntime(795):  at  java.lang.reflect.Method.invokeNative(Native Method)
<?xml version="1.0" encoding="utf-8"?>
    03-27 16:36:27.321: E/AndroidRuntime(795):  at java.lang.reflect.Method.invoke(Method.java:511)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.view.View$1.onClick(View.java:3592)
    03-27 16:36:27.321: E/AndroidRuntime(795):  ... 11 more
    03-27 16:36:27.321: E/AndroidRuntime(795): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {nackagymnasium.brottsbalken2/com.example.brottsbalken.Kap1}; have you declared this activity in your AndroidManifest.xml?
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.app.Activity.startActivityForResult(Activity.java:3370)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.app.Activity.startActivityForResult(Activity.java:3331)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at android.app.Activity.startActivity(Activity.java:3566)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at   android.app.Activity.startActivity(Activity.java:3534)
    03-27 16:36:27.321: E/AndroidRuntime(795):  at                       nackagymnasium.brottsbalken2.HuvudMeny.kapett(HuvudMeny.java:30)
    03-27 16:36:27.321: E/AndroidRuntime(795):  ... 14 more
    03-27 16:41:28.431: I/Process(795): Sending signal. PID: 795 SIG: 9 
```

这是清单，对我来说看起来很正确...

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="nackagymnasium.brottsbalken2"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="nackagymnasium.brottsbalken2.HuvudMeny"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="nackagymnasium.brottsbalken2.Kap1"
        android:label="@string/title_activity_kap1" >
    </activity> 
```

我将“主要活动”的名称更改为“Huvud Meny”。

我想这一定是意图（天才）有问题，但我不知道它是什么。

如果有人花时间帮助我，我会非常高兴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:40:07.503

> 您是否在 AndroidManifest.xml 中声明了此活动？

嗯，是吗？

请参阅[向 AndroidManifest 添加新活动？](https://stackoverflow.com/questions/3832619/add-a-new-activity-to-the-androidmanifest)

# java - 文本文件字典 Java

> ID：15664563
> 
> 赞同：0
> 
> 时间：2013-03-27T16:48:11.717
> 
> 标签：java, file, text

我在 java 中编写了一个字典，用户输入单词并按字母顺序存储在 .txt 文件中。当我单独使用 SortWords 方法时，它可以正常工作，但是当我将它与 Option1Method 结合使用时，它将单词添加到字典中，它就不起作用了。它就像它改变了文本文件的文件类型之类的？任何帮助将不胜感激

```
public static void Option1Method() throws IOException {
    FileWriter aFileWriter = new FileWriter("wordlist.txt", true);
    PrintWriter out = new PrintWriter(aFileWriter);
    String word = JOptionPane.showInputDialog(null, "Enter a word");

    out.println(word);
    out.close();

    aFileWriter.close();

    String inputFile = "wordlist.txt";
    String outputFile = "wordlist.txt";
    FileReader fileReader = new FileReader(inputFile);
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    String inputLine;
    List<String> lineList = new ArrayList<String>();
    while ((inputLine = bufferedReader.readLine()) != null) {
        lineList.add(inputLine);
    }
    fileReader.close();

    Collections.sort(lineList);

    FileWriter fileWriter = new FileWriter(outputFile);
    PrintWriter out1 = new PrintWriter(fileWriter);
    for (String outputLine : lineList) {
        out.println(outputLine);
    }
    out1.flush();
    out1.close();
    fileWriter.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:43:58.603

好的，因为我不能让这个问题得不到回答，这里有一个简单的例子，说明你如何使用一些内置类来做到这一点：

```
import java.io.*;
import java.util.*;

public class q15664563 {
  public static void main(String[] args) throws IOException {
    String wordlist = "wordlist.txt";
    if(args.length == 1 && args[0].toLowerCase().charAt(0) == 'l') {
      //List Words
      SortedSet<String> dictionary = load(wordlist);
      for(String word : dictionary) {
        System.out.println(word);
      }
    } else if(args.length == 2 && args[0].toLowerCase().charAt(0) == 'a') {
      //Add Word
      SortedSet<String> dictionary = load(wordlist);

      dictionary.add(args[1].toLowerCase());

      save(dictionary, wordlist);
    } else {
      System.err.println("Correct usage:");
      System.err.println(" q15664563 LIST       --lists all words");
      System.err.println(" q15664563 ADD [word] --adds word to list");
    }
  }

  private static void save(SortedSet<String> dictionary, String wordlist) throws IOException {
    FileWriter file = new FileWriter(wordlist);
    BufferedWriter writer = new BufferedWriter(file);

    for(String word : dictionary) {
      writer.append(word);
      writer.newLine();
    }

    writer.close();
    file.close();
  }

  private static SortedSet<String> load(String wordlist) throws IOException {
    SortedSet<String> dictionary = new TreeSet<String>();
    FileReader file = new FileReader(wordlist);
    BufferedReader reader = new BufferedReader(file);
    String word;

    while((word = reader.readLine()) != null) {
      dictionary.add(word);
    }

    reader.close();
    file.close();
    return dictionary;
  }
} 
```

这段代码需要指出的一些事情，读取和写入是两个独立的操作，因此为了保持清洁，将它们放在自己的函数中会有所帮助（这当然是见仁见智）。此外，通常情况下，有一些数据类型会对您有所帮助，这[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)就是一个很好的例子。它实现了[`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)接口，并且每次迭代 ti 时都是按字母顺序排列的（实际上每次插入它时它都是按字母顺序排列的，随着集合长度的增加要记住这一点）。鉴于此属性，如果您想优化，您可能只需要`TreeSet`在列表可能更改其字母顺序（插入时）时使用。列出时，您会逐行读取文件，知道它的顺序正确。如果你这样做了，那么你将不再有一个通用的`load()`您可以在这两种情况下使用的方法（在以设计简单性换取性能时要考虑的事情）。

# c# - 更新数据网格视图

> ID：15664564
> 
> 赞同：0
> 
> 时间：2013-03-27T16:48:15.473
> 
> 标签：c#, winforms, datagridview, visual-studio-2012

我有以下代码，当我从一个单独的表单向我的表中添加新记录时，它要做的是更新，此时我正在获取所有表数据，但是如果我添加新数据，它在这里不可见，但是保存在表中，我必须关闭程序并再次运行它才能使保存的数据在 datagridview 中可见。我的问题是如何更新datagridview，以便表格信息始终存在。我的代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace project
{
    public partial class frmViewBookings : Form
    {
        public frmViewBookings()
        {
            InitializeComponent();
        }

        private void btnClose_Click(object sender, EventArgs e)
        {
            Form3 mainpage = new Form3();
            mainpage.Show();
            this.Close();
        }

        private void frmViewBookings_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'usersDataSet1.Booking' table. You can move, or remove it, as needed.
            this.bookingTableAdapter.Fill(this.usersDataSet1.Booking);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:50:49.007

在 frmViewBookings 中添加/编辑您现有的方法：

```
private void frmViewBookings_Load(object sender, EventArgs e)
{
    // TODO: This line of code loads data into the 'usersDataSet1.Booking' table. You can move, or remove it, as needed.
    UpdateData();

}

public void UpdateData()
{
    this.bookingTableAdapter.Fill(this.usersDataSet1.Booking);
} 
```

然后`UpdateData()`从您的其他表格调用

在您的另一个表单中，添加一个包含第一个表单的属性：

```
public partial class frmBooking : Form
{
    public frmViewBookings myBookingsFrm = null;
} 
```

然后，当您创建 frmBooking 表单时，请执行以下操作：

```
frmBooking frmNewBookingFrm = new frmBooking();
frmNewBookingFrm.myBookingsFrm = this;//or whatever reference to the first frmViewBookings is 
```

因此，在 frmBooking 中插入新记录后，调用：

```
myBookingsFrm.UpdateData(); 
```

# python - 如何使用 paramiko 更改当前工作目录并设置环境变量？

> ID：15664569
> 
> 赞同：3
> 
> 时间：2013-03-27T16:48:24.667
> 
> 标签：python, ssh, paramiko

我想 ssh 到另一台服务器来运行一些脚本。

但是在运行脚本之前，我需要将目录更改为脚本所在的路径并设置一些环境变量。

在我的本地主机中，可以通过

```
os.chdir(path)
os.environ["xxx"] = "xxx" 
```

但是在 paramiko 中，我不确定是否有任何方法可以完成上述事情。我发现的最接近的是

```
ssh.exec_command("cd /xxx/yyy;xxx.sh") 
```

但我不想执行几个命令连接在一起**;** .

想问一下ssh使用paramiko时有没有其他方法可以改变目录/设置环境变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T19:48:58.623

对于环境变量，我无法设置它们，但是使用交互式 shell 将加载用户的环境变量。您可以在 .bashrc 文件中更改这些内容。

有关如何设置交互式 shell： [http ://snipplr.com/view/12940/](http://snipplr.com/view/12940/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T21:29:13.000

我还没有找到如何更改主机目录的解决方案；像你一样，我一直在尝试使用`sshClient.exec_command("cd " + directory_name)`，但没有效果。

但是，我可以帮助您解决发出多个命令的问题。您可以简单地调用`sshClient.exec_command("command1; command2; command3;")`. 或者，您可以创建一个辅助方法，例如：

```
def execCmd(ssh_client, *commands):
    for command in commands:
        stdin, stdout, stderr = ssh_client.exec_command(command)
        for line in stdout.readlines():
            print line
        for line in stderr.readlines():
            print line

cmds = [command1,command2,command3]
execCmd(SSH_Client,*cmds) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T07:06:22.750

你可以使用'|' 管道来组合不同的命令。它将与 ssh.exec_command() 一起使用。

# r - 如何获得格子 xyplot 的 y 轴以将分数显示为百分比？

> ID：15664577
> 
> 赞同：4
> 
> 时间：2013-03-27T16:48:38.717
> 
> 标签：r, lattice

我希望能够以百分比单位（例如 0.45 = 45%）显示我的格子 xyplot 的 y 轴。

这是一个带有一些虚假工业过程产量数据的示例：

```
library(lattice)
set.seed(1234)
my.df <- data.frame(period=c(1:20),
                    n=floor(runif(n=20,min=40,max=80)),
                    d=rpois(n=20,lambda=5))
my.df$yield <- (my.df$n-my.df$d)/my.df$n
xyplot(yield~period,data=my.df) 
```

![示例图](../Images/1489e0869dddaeedd3fb8760cbbbbfcd.png)

我希望上面的 y 轴标签改为 80%、85%、90%、95%

我的`yield`变量是一个分数，表示为范围内的小数（0 <= yield <= 1）。我不想对 data.frame 中的数据进行预处理（例如乘以 100），我希望通过绘图操作来处理这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:48:38.717

您可以为`yscale.components`xyplot 的参数提供一个函数（参见`?xyplot`和`?xscale.components.default`）。用于`sprintf()`添加百分比符号，您可以在线执行 100 倍乘法。

```
xyplot(yield~period,data=my.df,
       yscale.components=function(...){
           yc <- yscale.components.default(...)
           yc$left$labels$labels <-
               sprintf("%s%%",yc$left$labels$at*100) ## convert to strings as pct
           return(yc) 
       }) 
```

![示例图](../Images/ec4e574551707f183c84a12aa6beb9fb.png)

# python - Python/Django“if 语句”语法不正确？

> ID：15664584
> 
> 赞同：0
> 
> 时间：2013-03-27T16:48:45.817
> 
> 标签：python, django, if-statement, syntax-error

```
for cart_item in cart_products:
    if **cart_item.**product.id = p.id:
        # update the quantity if found
        cart_item.augment_quantity(quantity)
        product_in_cart = True
if not product_in_cart:  
    # create and save a new cart item
    ci = CartItem()
    ci.product = p
    ci.quantity = quantity
    ci.cart_id = _cart_id(request)
    ci.save() 
```

我刚刚把我的购物车放在一起，这是一个简单的逻辑，它检查以确保该项目尚未在某人的购物车中，以防他们错误地再次尝试添加它。错误出现在粗体部分...a`:`是预期的，而不是 a`.` 服务器抛出错误并且 eclipse 正在捕获语法错误。

为什么点语法会破坏 if 语句？如果需要更多上下文，请告诉我，但我猜我只是没有正确理解 if 语句的语法要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:51:35.360

Python 中的比较运算符是`==`，不是`=`。

# android - 同一应用程序在同一设备上的不同行为

> ID：15664588
> 
> 赞同：0
> 
> 时间：2013-03-27T16:49:01.623
> 
> 标签：android

我会尽量准确。我写了一个应用程序，完整的代码本身并不重要

```
public void onWindowFocusChanged(boolean hasFocus){
    super.onWindowFocusChanged(hasFocus);

    if(hasFocus){
        globalWidth = mainLayout.getWidth();
        refillData();
    }
} 
```

它在我的设备上完美运行（sgs2 DarkyROM hd2.1 android 版本 4.0.3 也在基于 sgs2 的 2.3 版本的系统上检查过它），另一个带有 PilotX2.1 的 sgs2，它也适用于 ASUS Transformer (android v4.2.1) 和许多其他具有不同屏幕尺寸的设备。我必须说它具有不同的外观，具体取决于它运行的设备（它动态构建主布局，因此如果应用程序运行正确，它确实值得注意）。

但在某些设备上它有奇怪的行为。例如，在运行 android 版本 2.3.5 的 HTC (htc sense 2.1) 上，它以某种方式在 getWidth() 行返回一半或实际屏幕的宽度。或者 sgs2 4.2.1 android 版本它也返回奇怪的结果。

我试图在谷歌和堆栈溢出中查找，以了解是否有任何特定的系统差异应该考虑对应用程序有如此大的影响，但没有。我不使用任何可以由系统开发人员以不同方式实现的设备的特定硬件。

什么问题是我没有考虑到的？不同的内核会不会对我的应用程序造成“有问题”的行为？我以为可能是不同的 ROM，但我检查了至少 6-8 个不同的 ROM，没有问题。

如果有人熟悉该主题或遇到类似情况，我什至会很高兴提供网页链接。我真的很沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:58:25.797

也许您可以使用[View.makeMeasureSpec更正您的措施](http://developer.android.com/reference/android/view/View.MeasureSpec.html#makeMeasureSpec%28int,%20int%29)

```
mainLayout.measure(
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

int height = mainLayout.getMeasuredHeight();
int width = mainLayout.getMeasuredWidth(); 
```

# symfony - 自动完成 + 弹性搜索 + symfony2

> ID：15664590
> 
> 赞同：0
> 
> 时间：2013-03-27T16:49:10.257
> 
> 标签：symfony, elasticsearch

我在 symfony 2.2 + FoqElasticaBundle

我尝试从结果查询弹性搜索中使用自动完成

```
<input type="text" class="span3" id="search" data-provide="typeahead" data-items="4" />

var subjects = ['PHP', 'MySQL', 'SQL', 'PostgreSQL', 'HTML', 'CSS', 'HTML5', 'CSS3', 'JSON'];
$('#search').typeahead({source: subjects}) 
```

自动完成功能是这样的，但是......

如何让我的 elasticsearc url 替换这样的主题？

```
var subjects = "http://myhost:9200/_search?pretty=true"; 
```

我希望我的自动完成的来源是我的查询弹性搜索的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:06:45.953

通过 typeahead，您可以使用来自服务器的数据，例如：

```
function search() {
    $('#search').typeahead({
        source: function (query, process) {
            return $.get("{{path("url_to_fetch_from_server", {_format: "json"})}}", { "query" : query }, function (data) {
                return process(data);
            });
        }
    });
};

$(function(){
    search();
}); 
```

如您所见，typeahead 源函数采用 2 个参数。

*   query 是预输入框中的文本类型。你需要把它传递给服务器
*   过程是回调。

服务器应以 JSON 格式响应。您可以将 "{{path("url_to_fetch_from_server", {_format: "json"})}}" 替换为您的真实网址。

```
public function queryAction(){
    $query = $this->getRequest()->query->get("query");
    $gType = $this->container->get('foq_elastica.finder.search_db');

    $results = $gType->find($query, 20);

    $tools = [];
    foreach($results as $result){
         $tools[] = $result->getTool();
    }

    return new Response(json_encode($tools));

} 
```

# generics - 将反射对象投射到反射通用接口

> ID：15664592
> 
> 赞同：2
> 
> 时间：2013-03-27T16:49:12.397
> 
> 标签：generics, reflection, entity-framework-5, .net-4.5, entityframework.extended

我正在开发一个基于 .NET 4.5、EF5 和 GenericRepository.EntityFramework 的项目。我正在尝试创建一个发布服务，该服务将对专门用于创作和移动的数据库中的记录执行一些操作

第一个问题是我的类型转换`(IBaseRepository<BaseEntity>)`失败。通过使用直接转换...

```
object myRepository = p.GetValue(entity, null);  
IBaseRepository<MRClassification> risk = myRepository; 
```

因为 myRepository 采用“MRClassification”对象类型

问题是每个存储库的签名不同，是否可以返回一个列表，`IBaseRepository<p.PropertyType.GetInterfaces()[0].GenericTypeArguments[0]>`该列表将返回每个存储库作为类型的实体？

我考虑过使用协方差，但我在 BaseRepository 中有将 T 作为参数的方法，例如

```
public virtual new void Add(T entity) { do something; } 
```

发布应用代码

```
 public static void DeactivateNonTransversableExpiredRecords()
    {
            IEnumerable<Tuple<IBaseRepository<BaseEntity>, Type>> nonTransversableList =
                GetNonTransversableRepositories(Databucket);

            foreach (var repository in nonTransversableList)
            {
                ////IQueryable recordsToExpire =
                    ////((IBaseRepository<BaseEntity>)repository).FindBy(
                    ////    p => Convert.ToDateTime(p.ExpirationDate).Date <= DateTime.Now.Date && p.IsActive);
                IQueryable recordsToExpire = repository.Item1.FindBy(p => p.IsActive);

                foreach (var row in recordsToExpire)
                {
                    ((BaseEntity)row).IsActive = false;
                    ((IBaseRepository<BaseEntity>)repository).Edit((BaseEntity)row);
                }
            }
        }

        private static IEnumerable<Tuple<IBaseRepository<BaseEntity>, Type>> GetNonTransversableRepositories(object entity)
        {

            PropertyInfo[] properties =
                entity.GetType().GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Public | BindingFlags.Instance);

            List<Tuple<IBaseRepository<BaseEntity>, Type>> list = new List<Tuple<IBaseRepository<BaseEntity>, Type>>();
            foreach (PropertyInfo p in properties)
            {
                if (!typeof(ITransversableRepository).IsAssignableFrom(p.PropertyType))
                {
                    if (OpenGenericIsAssignableFrom(typeof(IBaseRepository<>), p.PropertyType))
                    {
                        list.Add(
                            new Tuple<IBaseRepository<BaseEntity>, Type>(
                                (IBaseRepository<BaseEntity>)Activator.CreateInstance(p.PropertyType),
                                p.GetValue(entity, null)));
                    }
                }
            }
            return list;
        } 
```

DataModel 解决方案中的 POCO 实体和存储库

```
 --- DataBucket
public class DataBucket : Audit, IDataBucket
{
    private IMRClassificationRepository mrClassCodeRepository;

    public IMRClassificationRepository MRClassificationRepository
    {
        get { return this.mrClassCodeRepository ?? (this.mrClassCodeRepository = new MRClassificationRepository(this.dataContext)); }
    }
    ...
}

--- Repository Class Headers
public class MRClassificationRepository : BaseRepository<MRClassification>, IMRClassificationRepository
{
    ...
}

public interface IMRClassificationRepository : IBaseRepository<MRClassification>
{
    ...
}   

public abstract class BaseRepository<T> : CoreRepository<T>, IBaseRepository<T> where T : BaseEntity, IBaseEntity
{
    ...
}
public interface IBaseRepository<T> : ICoreRepository<T> where T : BaseEntity
{
    ...
}   

--- Entity Class Headers
public class MRClassification : RiskClassification
{
    ...
}
public abstract class RiskClassification : Revisionable
{
    ...
}

public abstract class Revisionable : BaseEntity, IRevisionableEntity
{
    ...
}

public class BaseEntity : IBaseEntity
{
    ...
}

public interface IBaseEntity : IEntity<Guid>
{
    ...
} 
```

# ctypes - 使用 Ctypes 将 CPP 函数加载到 Python 中

> ID：15664595
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:49:24.343
> 
> 标签：ctypes

我对 Ctypes 有一个问题，不知道我做错了什么。是的，我是 Python 的新手，在这里搜索了其他帖子。因此，任何建议都值得赞赏。

我想做什么：

我只是想将 FXCM C++ APP 资金加载到 Python 3.3 中，这样我就可以调用它们来连接到他们的服务器。看起来 Ctypes 似乎是最好的工具。所以一个简单的 Python 代码：

```
import os
dirlist = os.listdir('ForexConnectAPIx64/bin')
from pprint import pprint
pprint(dirlist)

from ctypes import  *
myDll = cdll.LoadLibrary ("ForexConnectAPIx64/bin/ForexConnect.dll") 
```

给出一个结果：

```
Traceback (most recent call  File "C:\Users\scaberia3\Python_Projects      \FTC\ListDir_Test.py", line 20, in <module>
myDll = cdll.LoadLibrary ("ForexConnectAPIx64/bin/ForexConnect.dll")
File "C:\Python33\lib\ctypes\__init__.py", line 431, in LoadLibrary
return self._dlltype(name)
File "C:\Python33\lib\ctypes\__init__.py", line 353, in __init__
self._handle = _dlopen(self._name, mode)
OSError: [WinError 126] Das angegebene Modul wurde nicht gefunden  (Module not found)

['ForexConnect.dll',
'fxmsg.dll',
'gsexpat.dll',
'gslibeay32.dll',
'gsssleay32.dll',
'gstool2.dll',
'gszlib.dll',
'java',
'log4cplus.dll',
'msvcp80.dll',
'msvcr80.dll',
'net',
'pdas.dll'] 
```

意味着路径是正确的 ForextConnect.dll 存在，我可能会做一些非常简单的错误，但不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:05:50.147

您可以使用 Dependency Walker 找出手动加载 DLL 的正确顺序，或者简单地将目录添加到系统搜索路径：

```
dllpath = os.path.abspath('ForexConnectAPIx64/bin')
os.environ['PATH'] += os.pathsep + dllpath
myDLL = CDLL('ForexConnect.dll') 
```

# ios - 来自 Interface Builder 的视图大小为 0

> ID：15664599
> 
> 赞同：0
> 
> 时间：2013-03-27T16:49:34.957
> 
> 标签：ios

这让我永远困惑！

当我在 Interface builder 中调整某些东西的大小并给它一个宽度，比如说 200 和高度 100。然后我将它连接到控制器中的一个属性。当我访问该视图的边界时，我总是得到 0。那是什么？

它不应该返回我在界面生成器中设置的内容吗？

# php - 在单个警报中显示来自多个文件输入的所有文件名

> ID：15664605
> 
> 赞同：0
> 
> 时间：2013-03-27T16:50:02.753
> 
> 标签：php, javascript, jquery, ajax, json

我有这个函数来检查选定的文件名是否已经在数据库中。它会提醒一条消息，说明数据库中有哪些文件。问题是它是一个多文件输入，所以如果数据库中有超过 1 个文件名，它将为每个文件名发出单独的警报。我该如何更改它，以便它只发出 1 个列出所有文件名的警报（最好在每个文件名之后有一个空格或逗号）？谢谢

```
 var file = $('#file')[0];
 $.get('all_filenames.php', function(data){
       for (var i=0; i<file.files.length; i++) {
       var fname = file.files[i].name;
       if(~data.indexOf(fname)){

          alert("these files already exist:" + fname);
       }
    }
 },'json'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:53:54.107

试试这个，我将文件名推送到一个数组中。

### JS

```
var file = $('#file')[0];
$.get('all_filenames.php', function (data) {
    var alreadyThere = [];
    for (var i = 0; i < file.files.length; i++) {
        var fname = file.files[i].name;
        if (~data.indexOf(fname)) {
            alreadyThere.push(fname);
        }
    }
    alert("These files already exist:" + alreadyThere.join(", ");
}, 'json'); 
```

# wpf - WPF：如果 Xaml 资源尚未在其他地方定义，如何定义它（本地）？

> ID：15664609
> 
> 赞同：0
> 
> 时间：2013-03-27T16:50:16.723
> 
> 标签：wpf, wpf-controls, wpf-4.0

我正在为自定义 WPF 控件编写样式设置器，并希望将值设置为*理想情况下*（阅读“希望”）在应用程序级别定义的资源（例如画笔）（以便启用应用程序范围的主题）。一个示例如下所示：

```
<Style.Triggers>      
    <DataTrigger Binding="{Binding IsInteresting}" Value="True">
        <Setter Property="FontWeight"   Value="Bold" />
        <!-- Use the brush that is (hopefully) defined at the application-level -->
        <Setter Property="Foreground"   Value="{StaticResource InterestingBrush}" />
    </DataTrigger>
</Style.Triggers> 
```

现在，为了在资源尚未在应用程序级别定义的情况下使样式可用，我希望能够在 Xaml 中本地定义画笔，并且***如果***具有相同键的资源是，则使用该定义在别处找不到。从概念上讲，它类似于使用“[如果未定义](http://www.cprogramming.com/reference/preprocessor/ifndef.html)”预处理器指令，例如`#ifndef`.

也许已经存在这样做的机制。如果没有，如何实施？附加属性/行为可以以某种方式做到这一点吗？如果是这样，我设想它的用法看起来像这样：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:HopefulBehaviors="clr-namespace:HopefulBehaviors"
                xmlns:My_Controls="clr-namespace:My_Controls"
                >
    <!-- IDEA:
         Attached property being used to "use the brush that is defined elsewhere
         if it was found, if not use this locally-defined one" -->
    <SolidColorBrush x:Key="InterestingBrush" 
                     HopefulBehaviors:UseExternalIfFound="True" Color="Red"  />

    <Style TargetType="{x:Type My_Controls:AwesomeControl}">

        <Style.Triggers>
            <DataTrigger Binding="{Binding IsInteresting}" Value="True">
                <Setter Property="FontWeight" Value="Bold" />
                <!-- now this brush would be defined (at least locally
                       but an external definition is used if it is found) -->
                <Setter Property="Foreground" Value="{StaticResource InterestingBrush}" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</ResourceDictionary> 
```

我意识到一种解决方法可能是让通用自定义控件 Style 相当平淡，然后为每个使用对该应用程序中存在的资源的引用的应用程序编写继承的 Styles。但我希望有一种更优雅的方法可以更好地概括应用程序。

# file - 确定该文件没有被任何其他进程使用

> ID：15664611
> 
> 赞同：0
> 
> 时间：2013-03-27T16:50:21.217
> 
> 标签：file, powershell-2.0

在我的场景中，我正在检查特定文件夹中的文件并检查它是否存在。如果它存在，我正在对其进行一些操作。但我的问题是这些文件是由其他进程生成的[通常需要 20-30 分钟来生成文件]，因此例如在任何情况下，当我检查文件夹中的文件并找到它时。现在，我需要确保它现在不在处理中，以便我可以继续对其进行操作。下面是我正在使用的代码片段：

*编辑* 我的问题是，我如何识别该文件未被其他进程使用（或正在生成）。

```
 $Filesitems = Get-ChildItem -Path "D:\SomeFolder\Sub_Folder"

foreach ($objItem in $Filesitems)
{

      if ($objItem.Name.Contains("Process"))
      {
            Write-Host $objItem.Name
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:53:10.500

我可能会尝试使用“锁定”文件来避免这种行为。

确保每当进程处理文件时，进程也会生成一个（空的）file.lock 文件，并在进程完成文件处理时将其删除。

在这种情况下，您可以检查是否存在锁定文件，因此您知道另一个进程仍在处理该特定文件

# ios - UIWebView 加载属性永远不会改变

> ID：15664612
> 
> 赞同：1
> 
> 时间：2013-03-27T16:50:24.320
> 
> 标签：ios, objective-c, uiwebview, key-value-observing

我有一个 UIWebView 正在加载一个简单的请求，如下所示：

```
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"derp.com"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:15.0];
[webView loadRequest:theRequest]; 
```

我有另一种在 webView 上执行一些 JavaScript 的方法。此方法可能会从不同的来源（包括 webViewDidFinishLoad 和 viewDidAppear）多次调用。为了防止出现错误，我将其包装在 if 语句中，如下所示：

```
if (!self.webView.loading) {
     ... do stuff....
} 
```

问题是 self.webView.loading 始终为 0。我什至尝试设置一个观察者（尝试了一些不同的变化......不是 100% 确定 sytnax）：

```
[self addObserver:self forKeyPath:@"webView.loading" options:0 context:NULL]; 
```

但是 observeValueForKeyPath:ofObject:change:context: 永远不会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:59:16.593

更好地实现 UIWebViewDelegate 方法......

在 viewDidLoad 中设置委托：

```
[webView setDelegate:self]; 
```

您可以使用

`- (void)webViewDidFinishLoad:(UIWebView *)webView {` //加载后执行操作 }`

在加载完成后获得回电，这比搞乱 KVO 可靠得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:02:39.010

通过查看[UIWebView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

isLoading = YES 如果接收方仍在加载内容；否则，否。那么，此时您的 Web 视图的加载是否可能已经完成？

# url - 更改 gerrit 的规范网址

> ID：15664614
> 
> 赞同：1
> 
> 时间：2013-03-27T16:50:37.003
> 
> 标签：url, web, gerrit, canonical-link

我在设置我的 gerrit 服务器时遇到了问题。该机器上安装了 Ubuntu 12.04 LTS Server 64 位。我正在设置 git 和 gerrit 作为管理源代码和代码审查的一种方式。我需要对其进行内部和外部访问。我设置了一个可以在外部工作的 DNS。但是，在初始设置期间，我将 canonicalWebUrl 保留为默认值。它通常是机器的主机名（在本例中是 vmserver）。我遇到的问题与此处解释的完全一样[https://stackoverflow.com/questions/14702198/the-requested-url-openid-was-not-found-on-this-server](https://stackoverflow.com/questions/14702198/the-requested-url-openid-was-not-found-on-this-server)，在尝试登录后/用 OPEN ID 注册账号，提示找不到 url。

出于某种原因，它正在将地址栏中的 url 从我设置的 DNS 更改为 CanonicalWebURL。

我试图更改在 gerrit 站点的 etc 中找到的 gerrit.conf 文件中的规范网址。然而，在重新启动服务器后，我们能够看到应该存在的 git 项目文件，但是管理员帐户似乎不再注册，并且通过 gerrit 看不到任何项目。

我想知道是否有特殊程序可以在不中断对服务器的访问的情况下更改 gerrit 中的规范网址？

任何有关规范 url 的帮助或信息将不胜感激，因为我找不到太多关于它们的信息。

编辑：深入研究，我发现了一些关于“子模块”的信息，我不明白这是否是我正在寻找的东西。 [https://gerrit-review.googlesource.com/#/c/36190/](https://gerrit-review.googlesource.com/#/c/36190/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:45:48.013

必须设置规范的 web url，听起来你已经正确地做到了。

我怀疑您看到的问题是由更改规范网址引起的 - 一些 OpenID 提供者（谷歌是大的）将根据请求的 URL 返回不同的用户 ID。这是隐私问题，无法更改。因此，以前的用户现在将显示为新用户，并且不会在他们的旧组中（在这种情况下为管理员组）。

如果您没有很多用户，手动迁移它们可能是最简单的。您可以修改数据库以将新用户 ID 映射到旧用户帐户。

# android - 显示动画 .gif 时 Android 中的重型 GC

> ID：15664615
> 
> 赞同：0
> 
> 时间：2013-03-27T16:50:41.393
> 
> 标签：android, animation, memory-management, garbage-collection, gif

在我的游戏中，我使用了动画 gif（来自 android 的标准电影解码器对我不起作用），但这段代码在我测试的所有 Android 版本上都能完美运行：

这是解码器：

```
import java.util.Vector;
import java.io.InputStream;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
public class GIFDecode {

    public static final int STATUS_OK = 0;
    public static final int STATUS_FORMAT_ERROR = 1;
    public static final int STATUS_OPEN_ERROR = 2;

    protected InputStream in;
    protected int status;

    protected int width; // full image width
    protected int height; // full image height
    protected boolean gctFlag; // global color table used
    protected int gctSize; // size of global color table
    protected int loopCount = 1; // iterations; 0 = repeat forever

    protected int[] gct; // global color table
    protected int[] lct; // local color table
    protected int[] act; // active color table

    protected int bgIndex; // background color index
    protected int bgColor; // background color
    protected int lastBgColor; // previous bg color
    protected int pixelAspect; // pixel aspect ratio

    protected boolean lctFlag; // local color table flag
    protected boolean interlace; // interlace flag
    protected int lctSize; // local color table size

    protected int ix, iy, iw, ih; // current image rectangle
    protected int lrx, lry, lrw, lrh;
    protected Bitmap image; // current frame
    protected Bitmap lastImage; // previous frame
    protected int frameindex=0;

    public int getFrameindex() {
            return frameindex;
    }

    public void recycle(){
            if(image != null){
                    image.recycle();
                    image = null;
            }
            if(lastImage != null){
                    lastImage.recycle();
                    lastImage = null;
            }

    }

    public void setFrameindex(int frameindex) {
            this.frameindex = frameindex;
            if(frameindex>frames.size()-1){
                    frameindex=0;  
            }
    }

    protected byte[] block = new byte[256]; // current data block
    protected int blockSize = 0; // block size

    // last graphic control extension info
    protected int dispose = 0;
    // 0=no action; 1=leave in place; 2=restore to bg; 3=restore to prev
    protected int lastDispose = 0;
    protected boolean transparency = false; // use transparent color
    protected int delay = 0; // delay in milliseconds
    protected int transIndex; // transparent color index

    protected static final int MaxStackSize = 4096;
    // max decoder pixel stack size

    // LZW decoder working arrays
    protected short[] prefix;
    protected byte[] suffix;
    protected byte[] pixelStack;
    protected byte[] pixels;

    protected Vector<GifFrame> frames; // frames read from current file
    protected int frameCount;

    static class GifFrame {
            public GifFrame(Bitmap im, int del) {
                    image = im;
                    delay = del;
            }

            public Bitmap image;
            public int delay;
    }

    /**
    * Gets display duration for specified frame.
    *
    * @param n
    *            int index of frame
    * @return delay in milliseconds
    */
    public int getDelay(int n) {
    delay = -1;
    if ((n >= 0) && (n < frameCount)) {
    delay = ((GifFrame) frames.elementAt(n)).delay;
    }
    return delay;
    }

    public int getFrameCount() {
            return frameCount;
    }

    public Bitmap getImage() {
            return getFrame(0);
    }
    public int getLoopCount() {
            return loopCount;
    }
    protected void setPixels() {
            int[] dest = new int[width * height];
            // fill in starting image contents based on last image's dispose code
            if (lastDispose > 0) {
                    if (lastDispose == 3) {
                            // use image before last
                            int n = frameCount - 2;
                            if (n > 0) {
                                    lastImage = getFrame(n - 1);
                            } else {
                                    lastImage = null;
                            }
                    }
                    if (lastImage != null) {
                            lastImage.getPixels(dest, 0, width, 0, 0, width, height);
                            // copy pixels 
                            if (lastDispose == 2) {
                                    // fill last image rect area with background color
                                    int c = 0;
                                    if (!transparency) {
                                            c = lastBgColor;
                                    }
                                    for (int i = 0; i < lrh; i++) {
                                            int n1 = (lry + i) * width + lrx;
                                            int n2 = n1 + lrw;
                                            for (int k = n1; k < n2; k++) {
                                                    dest[k] = c;
                                            }
                                    }
                            }
                    }
            }

            // copy each source line to the appropriate place in the destination
            int pass = 1;
            int inc = 8;
            int iline = 0;
            for (int i = 0; i < ih; i++) {
                    int line = i;
                    if (interlace) {
                            if (iline >= ih) {
                                    pass++;
                                    switch (pass) {
                                            case 2:
                                                    iline = 4;
                                                    break;
                                            case 3:
                                                    iline = 2;
                                                    inc = 4;
                                                    break;
                                            case 4:
                                                    iline = 1;
                                                    inc = 2;
                                    }
                            }
                            line = iline;
                            iline += inc;
                    }
                    line += iy;
                    if (line < height) {
                            int k = line * width;
                            int dx = k + ix; // start of line in dest
                            int dlim = dx + iw; // end of dest line
                            if ((k + width) < dlim) {
                                    dlim = k + width; // past dest edge
                            }
                            int sx = i * iw; // start of line in source
                            while (dx < dlim) {
                                    // map color and insert in destination
                                    int index = ((int) pixels[sx++]) & 0xff;
                                    int c = act[index];
                                    if (c != 0) {
                                            dest[dx] = c;
                                    }
                                    dx++;
                            }
                    }
            }
            image = Bitmap.createBitmap(dest, width, height,Config.ARGB_8888);
    }

    public Bitmap getFrame(int n) {
            Bitmap im = null;
            if ((n >= 0) && (n < frameCount)) {
                    im = ((GifFrame) frames.elementAt(n)).image;
            }
            return im;
    }
    public Bitmap next(){
            frameindex++;
            if(frameindex>frames.size()-1){
                    frameindex=0;  
            }
    return  ((GifFrame) frames.elementAt(frameindex)).image;
    }
    public int read(InputStream is) {
            init();
            if (is != null) {
                    in = is;
                    readHeader();
                    if (!err()) {
                            readContents();
                            if (frameCount < 0) {
                                    status = STATUS_FORMAT_ERROR;
                            }
                    }
            } else {
                    status = STATUS_OPEN_ERROR;
            }
            try {
                    is.close();
            } catch (Exception e) {
                    e.printStackTrace();
            }
            return status;
    }
    protected void decodeImageData() {
            int NullCode = -1;
            int npix = iw * ih;
            int available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, count, i, datum, data_size, first, top, bi, pi;

            if ((pixels == null) || (pixels.length < npix)) {
                    pixels = new byte[npix]; // allocate new pixel array
            }
            if (prefix == null) {
                    prefix = new short[MaxStackSize];
            }
            if (suffix == null) {
                    suffix = new byte[MaxStackSize];
            }
            if (pixelStack == null) {
                    pixelStack = new byte[MaxStackSize + 1];
            }
            // Initialize GIF data stream decoder.
            data_size = read();
            clear = 1 << data_size;
            end_of_information = clear + 1;
            available = clear + 2;
            old_code = NullCode;
            code_size = data_size + 1;
            code_mask = (1 << code_size) - 1;
            for (code = 0; code < clear; code++) {
                    prefix[code] = 0;
                    suffix[code] = (byte) code;
            }

            // Decode GIF pixel stream.
            datum = bits = count = first = top = pi = bi = 0;
            for (i = 0; i < npix; ) {
                    if (top == 0) {
                            if (bits < code_size) {
                                    // Load bytes until there are enough bits for a code.
                                    if (count == 0) {
                                            // Read a new data block.
                                            count = readBlock();
                                            if (count <= 0) {
                                                    break;
                                            }
                                            bi = 0;
                                    }
                                    datum += (((int) block[bi]) & 0xff) << bits;
                                    bits += 8;
                                    bi++;
                                    count--;
                                    continue;
                            }
                            // Get the next code.
                            code = datum & code_mask;
                            datum >>= code_size;
                            bits -= code_size;

                            // Interpret the code
                            if ((code > available) || (code == end_of_information)) {
                                    break;
                            }
                            if (code == clear) {
                                    // Reset decoder.
                                    code_size = data_size + 1;
                                    code_mask = (1 << code_size) - 1;
                                    available = clear + 2;
                                    old_code = NullCode;
                                    continue;
                            }
                            if (old_code == NullCode) {
                                    pixelStack[top++] = suffix[code];
                                    old_code = code;
                                    first = code;
                                    continue;
                            }
                            in_code = code;
                            if (code == available) {
                                    pixelStack[top++] = (byte) first;
                                    code = old_code;
                            }
                            while (code > clear) {
                                    pixelStack[top++] = suffix[code];
                                    code = prefix[code];
                            }
                            first = ((int) suffix[code]) & 0xff;
                            // Add a new string to the string table,
                            if (available >= MaxStackSize) {
                                    break;
                            }
                            pixelStack[top++] = (byte) first;
                            prefix[available] = (short) old_code;
                            suffix[available] = (byte) first;
                            available++;
                            if (((available & code_mask) == 0)&& (available < MaxStackSize)) {
                                    code_size++;
                                    code_mask += available;
                            }
                            old_code = in_code;
                    }

                    // Pop a pixel off the pixel stack.
                    top--;
                    pixels[pi++] = pixelStack[top];
                    i++;
            }
            for (i = pi; i < npix; i++) {
                    pixels[i] = 0; // clear missing pixels
            }
    }

    protected boolean err() {
            return status != STATUS_OK;
    }

    protected void init() {
            status = STATUS_OK;
            frameCount = 0;
            frames = new Vector<GifFrame>();
            gct = null;
            lct = null;
    }
    protected int read() {
            int curByte = 0;
            try {
                    curByte = in.read();
            } catch (Exception e) {
                    status = STATUS_FORMAT_ERROR;
            }
            return curByte;
    }
    protected int readBlock() {
            blockSize = read();
            int n = 0;
            if (blockSize > 0) {
                    try {
                            int count = 0;
                            while (n < blockSize) {
                                    count = in.read(block, n, blockSize - n);
                                    if (count == -1) {
                                            break;
                                    }
                                    n += count;
                            }
                    } catch (Exception e) {
                            e.printStackTrace();
                    }
                    if (n < blockSize) {
                            status = STATUS_FORMAT_ERROR;
                    }
            }
            return n;
    }
    protected int[] readColorTable(int ncolors) {
            int nbytes = 3 * ncolors;
            int[] tab = null;
            byte[] c = new byte[nbytes];
            int n = 0;
            try {
                    n = in.read(c);
            } catch (Exception e) {
                    e.printStackTrace();
            }
            if (n < nbytes) {
                    status = STATUS_FORMAT_ERROR;
            } else {
                    tab = new int[256]; // max size to avoid bounds checks
                    int i = 0;
                    int j = 0;
                    while (i < ncolors) {
                            int r = ((int) c[j++]) & 0xff;
                            int g = ((int) c[j++]) & 0xff;
                            int b = ((int) c[j++]) & 0xff;
                            tab[i++] = 0xff000000 | (r << 16) | (g << 8) | b;
                    }
            }
            return tab;
    }

    protected void readContents() {
            // read GIF file content blocks
            boolean done = false;
            while (!(done || err())) {
                    int code = read();
                    switch (code) {        
                    case 0x2C: // image separator
                            readImage();
                            break;
                    case 0x21: // extension
                            code = read();
                            switch (code) {
                                    case 0xf9: // graphics control extension
                                            readGraphicControlExt();
                                            break;
                                    case 0xff: // application extension
                                            readBlock();
                                            String app = "";
                                            for (int i = 0; i < 11; i++) {
                                                    app += (char) block[i];
                                            }
                                            if (app.equals("NETSCAPE2.0")) {
                                                    readNetscapeExt();
                                            } else {
                                                    skip(); // don't care
                                            }
                                            break;
                                    default: // uninteresting extension
                                            skip();
                            }
                            break;
                    case 0x3b: // terminator
                            done = true;
                            break;
                    case 0x00: // bad byte, but keep going and see what happens
                            break;
                    default:
                            status = STATUS_FORMAT_ERROR;
                    }
            }
    }

    protected void readGraphicControlExt() {
            read(); // block size
            int packed = read(); // packed fields
            dispose = (packed & 0x1c) >> 2; // disposal method
            if (dispose == 0) {
                    dispose = 1; // elect to keep old image if discretionary
            }
            transparency = (packed & 1) != 0;

            delay = readShort() * 10; // delay in milliseconds
            transIndex = read(); // transparent color index
            read(); // block terminator
    }

    protected void readHeader() {
            String id = "";
            for (int i = 0; i < 6; i++) {
                    id += (char) read();
            }
            if (!id.startsWith("GIF")) {
                    status = STATUS_FORMAT_ERROR;
                    return;
            }
            readLSD();
            if (gctFlag && !err()) {
                    gct = readColorTable(gctSize);
                    bgColor = gct[bgIndex];
            }
    }

    protected void readImage() {
            ix = readShort(); // (sub)image position & size
            iy = readShort();
            iw = readShort();
            ih = readShort();
            int packed = read();
            lctFlag = (packed & 0x80) != 0; // 1 - local color table flag
            interlace = (packed & 0x40) != 0; // 2 - interlace flag
            // 3 - sort flag
            // 4-5 - reserved
            lctSize = 2 << (packed & 7); // 6-8 - local color table size   
            if (lctFlag) {
                    lct = readColorTable(lctSize); // read table
                    act = lct; // make local table active
            } else {
                    act = gct; // make global table active
                    if (bgIndex == transIndex) {
                            bgColor = 0;
                    }
            }
            int save = 0;
            if (transparency) {
                    save = act[transIndex];
                    act[transIndex] = 0; // set transparent color if specified
            }
            if (act == null) {
                    status = STATUS_FORMAT_ERROR; // no color table defined
            }
            if (err()) {
                    return;
            }
            decodeImageData(); // decode pixel data
            skip();
            if (err()) {
                    return;
            }
            frameCount++;
            // create new image to receive frame data
            image = Bitmap.createBitmap(width, height,Config.ARGB_8888 );// Config.RGB_565);
            //createImage(width, height);  
            setPixels(); // transfer pixel data to image   
            frames.addElement(new GifFrame(image, delay)); // add image to frame
            // list
            if (transparency) {
                    act[transIndex] = save;
            }
            resetFrame();
    }

    protected void readLSD() {
            // logical screen size
            width = readShort();
            height = readShort();  
            // packed fields
            int packed = read();
            gctFlag = (packed & 0x80) != 0; // 1 : global color table flag
            // 2-4 : color resolution
            // 5 : gct sort flag
            gctSize = 2 << (packed & 7); // 6-8 : gct size 
            bgIndex = read(); // background color index
            pixelAspect = read(); // pixel aspect ratio
    }

    protected void readNetscapeExt() {
            do {
                    readBlock();
                    if (block[0] == 1) {
                            // loop count sub-block
                            int b1 = ((int) block[1]) & 0xff;
                            int b2 = ((int) block[2]) & 0xff;
                            loopCount = (b2 << 8) | b1;
                    }
            } while ((blockSize > 0) && !err());
    }

    protected int readShort() {
            // read 16-bit value, LSB first
            return read() | (read() << 8);
    }

    protected void resetFrame() {
            lastDispose = dispose;
            lrx = ix;
            lry = iy;
            lrw = iw;
            lrh = ih;
            lastImage = image;
            lastBgColor = bgColor;
            dispose = 0;
            transparency = false;
            delay = 0;
            lct = null;
    }

    /**
    * Skips variable length blocks up to and including next zero length block.
    */
    protected void skip() {
            do {
                    readBlock();
            } while ((blockSize > 0) && !err());
    } 
```

}

这是我如何使用它：

```
 decode = new GIFDecode();

 decode.read(getAssets().open(path));

            while (true) {
                            framepos = decode.getFrameindex();
                            delay = decode.getDelay(framepos);
                            try {
                                    Thread.sleep(delay);
                            } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                            }
                        bitmap = decode.next();
                            bitmap = Bitmap.createScaledBitmap(bitmap, bitmap.getWidth()*scale,bitmap.getHeight()*scale, false);
            }
    } 
```

我唯一的问题是大量垃圾收集它使我的游戏从 30 fps 减慢到几乎 17-18 fps 谁能告诉我如何避免这些收集？（它们仅在使用此 gif 解码器时出现）

gc如下：

```
...
03-27 16:29:34.904: D/dalvikvm(1792): GC_FOR_ALLOC freed 1084K, 10% free 21750K/24007K, paused 7ms, total 7ms
03-27 16:29:35.172: D/dalvikvm(1792): GC_FOR_ALLOC freed 1228K, 10% free 21751K/24007K, paused 9ms, total 17ms
03-27 16:29:35.493: D/dalvikvm(1792): GC_FOR_ALLOC freed 1226K, 10% free 21750K/24007K, paused 21ms, total 40ms
03-27 16:29:35.791: D/dalvikvm(1792): GC_FOR_ALLOC freed 1222K, 10% free 21752K/24007K, paused 7ms, total 15ms
03-27 16:29:36.062: D/dalvikvm(1792): GC_FOR_ALLOC freed 1339K, 10% free 21751K/24007K, paused 7ms, total 7ms
03-27 16:29:36.402: D/dalvikvm(1792): GC_FOR_ALLOC freed 1339K, 10% free 21751K/24007K, paused 19ms, total 26ms
03-27 16:29:36.701: D/dalvikvm(1792): GC_FOR_ALLOC freed 1348K, 10% free 21751K/24007K, paused 7ms, total 16ms
03-27 16:29:37.014: D/dalvikvm(1792): GC_FOR_ALLOC freed 1215K, 10% free 21752K/24007K, paused 0ms, total 0ms
03-27 16:29:37.301: D/dalvikvm(1792): GC_FOR_ALLOC freed 1221K, 10% free 21751K/24007K, paused 9ms, total 9ms
03-27 16:29:37.582: D/dalvikvm(1792): GC_FOR_ALLOC freed 1289K, 10% free 21750K/24007K, paused 18ms, total 24ms
03-27 16:29:37.863: D/dalvikvm(1792): GC_FOR_ALLOC freed 1168K, 10% free 21752K/24007K, paused 7ms, total 7ms
03-27 16:29:38.164: D/dalvikvm(1792): GC_FOR_ALLOC freed 964K, 10% free 21750K/24007K, paused 0ms, total 0ms
03-27 16:29:38.503: D/dalvikvm(1792): GC_FOR_ALLOC freed 1354K, 10% free 21751K/24007K, paused 25ms, total 25ms
03-27 16:29:38.851: D/dalvikvm(1792): GC_FOR_ALLOC freed 1342K, 10% free 21752K/24007K, paused 30ms, total 49ms
03-27 16:29:39.151: D/dalvikvm(1792): GC_FOR_ALLOC freed 1228K, 10% free 21752K/24007K, paused 10ms, total 26ms
03-27 16:29:39.483: D/dalvikvm(1792): GC_FOR_ALLOC freed 967K, 10% free 21750K/24007K, paused 20ms, total 40ms
03-27 16:29:39.781: D/dalvikvm(1792): GC_FOR_ALLOC freed 965K, 10% free 21750K/24007K, paused 23ms, total 24ms
03-27 16:29:40.102: D/dalvikvm(1792): GC_FOR_ALLOC freed 1350K, 10% free 21752K/24007K, paused 23ms, total 23ms
03-27 16:29:40.411: D/dalvikvm(1792): GC_FOR_ALLOC freed 1352K, 10% free 21752K/24007K, paused 8ms, total 17ms
... 
```

我怎样才能重用分配的内存而不是每次都扔掉它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:21:26.240

我怀疑你的问题是这一行：

```
bitmap = Bitmap.createScaledBitmap(bitmap, bitmap.getWidth()*scale,bitmap.getHeight()*scale, false); 
```

导致分配，（我认为）很快就会变成垃圾。也许您最好在开始动画之前将这些对象创建为图像数据的单次传递。然后，只需通过引用使用这些 Bitmap 对象，而不是每帧重新创建一个新对象。

# imagemagick - ImageMagick 与 Visual Studio

> ID：15664624
> 
> 赞同：4
> 
> 时间：2013-03-27T16:51:11.297
> 
> 标签：imagemagick, imagemagick-convert, node-imagemagick, imagemagick.net

我正在尝试在 Visual Studio 2010 中编写一个示例 ImageMagick 程序。我的系统上已经安装了 ImageMagick 的二进制分发，因为我可以使用 ImageMagick 的命令行界面。

但是，当我尝试在我的 C++ 程序中包含“Magick++.h”时，它说它无法打开源文件。

我找到了从源代码编译和构建 ImageMagick 的说明，但是是否可以更改我的 Visual Studio 项目设置，以便它可以从已安装的 ImageMagick 版本中选择必要的参考/库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T10:21:22.830

我绝不是专家，但这对我有用：

使用 Windows7 Professional 和 Visual C++ Express 2010...

我检查了`Install development headers and libraries for C and C++`

![安装](../Images/bf053e33957259db0d26e0c808a7f884.png)

在安装结束时，我得到了这两个文件夹。`Magick++.h`位于里面`include`。

![在此处输入图像描述](../Images/c8c44dce38ec0a1c2c9719b56dd84b27.png)

请务必设置您的项目`Additional Library Locations`，`Additional Include Directories`并且您应该能够编译您的程序。

另外：手册建议您需要这样做才能使您的程序正常工作，但我没有这样做，它仍然有效：

```
InitializeMagick(path_to_ImageMagick_DLLs); 
```

在我的简短测试中，我发现`Magick::Image::Magick()`更改图像格式的方法在调试模式下不起作用。它确实在发布模式下工作。

# less - Grunt、Less 和文件监视

> ID：15664628
> 
> 赞同：29
> 
> 时间：2013-03-27T16:51:21.720
> 
> 标签：less, gruntjs

我正在努力让 grunt 工作做某事。我的项目如下所示：

```
/app
    /assets
        /components
        /stylesheets
            /less
                /file1.less
                /file2.less
                /file3.less
                /importAll.less
            /css 
```

我想要它，以便在保存、 或时`file1`，将文件编译成 css 并放入. 这是我得到的。`file2``file3``importAll.less``/css/style.css`

```
less: {
    development: {
        options: {
            paths: ["./assets/stylesheets/less"],
            yuicompress: true
        },
        files: {
            "./assets/stylesheets/css/style.css": "./assets/stylesheets/less/importAll.less"
        }
    }
} 
```

我不确定如何让文件观察器工作。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-27T17:07:07.537

我得到它与以下工作！

```
module.exports = function(grunt) {
    grunt.initConfig({
        less: {
            development: {
                options: {
                    paths: ["./assets/stylesheets/less"],
                    yuicompress: true
                },
                files: {
                    "./assets/stylesheets/css/style.css": "./assets/stylesheets/less/style.less"
                }
            }
        },
        watch: {
            files: "./assets/stylesheets/less/*",
            tasks: ["less"]
        }
    });
    grunt.loadNpmTasks('grunt-contrib-less');
    grunt.loadNpmTasks('grunt-contrib-watch');
}; 
```

# facebook - Facebook喜欢按钮重定向？

> ID：15664631
> 
> 赞同：0
> 
> 时间：2013-03-27T16:51:23.483
> 
> 标签：facebook, redirect

我试图在我的页面上安装 Facebook Like 按钮（[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)），但是在我输入代码（HTML5 版本）之后，有一些奇怪的重定向会更改地址的页面添加“ `_FB_f2af6423b6fd064xd_action=proxy_ready&data`”到它？

您知道可能导致问题的原因吗？

我可以安装类似框的 iframe 版本，但前段时间我收到了有关类似问题的信息，而 Web 浏览器中安装了一些工具栏。url 中的字符串不同但结果相同 - 错误 404。

你可以在这里看到问题：www.keeeper.voyagersblog.com/en/ 和正常工作的页面（没有喜欢按钮）在这里：www.bea.trvblog.com/en/。

谢谢你的帮助！

最好的问候， 巴特克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:05:27.533

问题是我有自己的名为“消息”的 js EventListener，而且 facebook 似乎使用相同的名称。我的事件侦听器由 fb 脚本触发，然后我的函数进行重定向（参数不正确，因此它无处可去）。当我更改侦听器名称时没问题，似乎是 fb 错误。还是非常感谢！

# html - plupload：过滤器对象属性不会过滤 Google Chrome 中的文件类型

> ID：15664639
> 
> 赞同：0
> 
> 时间：2013-03-27T16:51:52.157
> 
> 标签：html, google-chrome, file-upload, plupload

此页面中的以下代码片段不会过滤 Google Chrome 中的文件类型，但它似乎过滤了 Mozilla 和 Internet Explorer 中的文件类型。它使用 plupload API。过滤器在 Internet Explorer 和 Mozilla Firefox 中显示“我的文件类型”，但在 Google Chrome 中显示“自定义文件”。Google Chrome 的文件上传对话框有什么不同？如何使用 plupload 解决此问题？我的解决方法是完全删除“过滤器”，或者在 Google Chrome 中将“文件类型”下拉选项从“自定义文件”更改为“所有文件”。

[http://www.west-wind.com/weblog/posts/2013/Mar/12/Using-plUpload-to-upload-Files-with-ASPNET](http://www.west-wind.com/weblog/posts/2013/Mar/12/Using-plUpload-to-upload-Files-with-ASPNET)

....点击“GitHub上这篇文章的源代码”下载源代码。我修改了一些东西。

代码：

```
$("#Uploader").pluploadQueue({
    runtimes: 'html5,silverlight,flash,html4',
    url: 'UploadHandler.ashx',
    max_file_size: '2mb',  
    chunk_size: '64kb',
    unique_names: false,
    filters: [{ title: "My File Types", extensions: "xlsx,xls,docx,doc"}],
    flash_swf_url: 'scripts/plupload/plupload.flash.swf',
    silverlight_xap_url: 'scripts/plupload/plupload.silverlight.xap',
    multiple_queues: true
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T06:57:12.067

这可能是由于您正在使用的运行时。由于`'html5,silverlight,flash,html4'`您指定的设置，HTML5 运行时在可用时首先使用（在 Chrome 上必须是这种情况）。这个运行时是罪魁祸首。

如果文件扩展名对您来说是一个严重的问题，您可以优先使用 Flash 或 SilverLight `'silverlight,flash,html5,html4'`：. HTML5 仍可使用，但前提是 SilverLight 和 Flash 均不可用。

# php - 启用 php_apc 的 CentOS 上的 Symfony2 应用程序很慢

> ID：15664641
> 
> 赞同：0
> 
> 时间：2013-03-27T16:51:53.080
> 
> 标签：php, apache, symfony, apc, vps

我有一个具有以下配置的 VPS：

*   512兆
*   2 个 CPU
*   CentOS 是操作系统，它运行典型的 LAMP 堆栈（Apache、MySQL 和 PHP 5.3）。
*   启用 php_apc。-缓存文件夹是可写的。

symfony2 应用程序在**加载之前很**慢。

与服务器的初始连接大约需要 3-10 秒，但是一旦加载了 symfony2 应用程序，它就会运行得很好。

另一个问题是，在注册帐户时，我使用 swift mailer 访问 SMTP 服务器，注册页面成功处理大约需要 20 秒。

我还在服务器上运行其他软件（Fork CMS、CodeIgniter 应用程序等），它们的运行速度要快得多。

生产作为开发配置都有这个加载缓慢的问题。

我采取的其他措施：

*   使用 mod_deflate 并且服务器成功测试了在提供网页时使用 Gzip 压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-08T20:23:49.060

您可以使用 BlackFire 来查找问题。仅启用 APC 无济于事。您需要将 Doctrine Queries 和 Meta 添加到 APC 缓存中，这会对性能产生巨大影响。Blackfire 会告诉您路由是否也存在问题。也许您还需要在前端控制器中启用 APC 以优化加载类。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-27T17:16:18.310

我也有这个问题，有一些方法可以加快框架的速度，比如使用 Apc、HTTP 缓存和一些用于学说的缓存配置，我几乎尝试了所有这些，但我认为真正的问题是 symfony2！这是一个有很多工具的大框架，所以最初阅读这些资源需要很长时间，所以我发现最好的方法是使用其他框架，如 codeigniter，它非常快速和可爱。

# web - 使用远程文件更新网站数据/信息

> ID：15664642
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:51:53.703
> 
> 标签：web

您如何建议我可以使用计算机中的远程文件或单独的文件来更新网站。我将要实现的网站是使用 html/css 制作的，我想使用我计算机中的远程文件（比如文本文档）更新网站上的内容。

基本上将会发生的是网站将从文件中提取数据，我将能够轻松更新这些数据，并且数据将显示在网站上。

我正在尽我所能解释这一点，如果不够清楚，请原谅我。非常感谢您提出的任何建议:) 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:53:24.070

搜索阿贾克斯。这命名了一种技术，使您能够获取和解析远程内容并将其显示在现有的 html 结构中。

# security - ActiveMQ 保护队列

> ID：15664643
> 
> 赞同：1
> 
> 时间：2013-03-27T16:51:55.297
> 
> 标签：security, jms, activemq, spring-jms

我正在寻找一种机制来保护 ActiveMQ 上的队列访问。我们使用 Spring JMS 将 JMS 消息发送到 ActiveMQ 队列。现在这些队列在公司内部是公开可用的，我们不希望任何人都可以访问这些队列并发布和接收来自它们的消息。相反，我们希望通过身份验证机制来保护它们 - 最好是用户名/密码机制。任何有关相同的提示都将非常有帮助。

ActiveMQ - 5.5.1 Spring 3.X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-16T12:25:25.850

身份验证在代理级别而不是队列。您对代理进行身份验证，就像您对数据库服务器进行身份验证一样。

就像数据库中的表一样，然后您可以为每个队列/主题的用户和组分配*权限*（用户 FOO 可以接收有关主题 A 的消息，用户 BAR 可以发布到主题 A 等）。

不幸的是，这并不像在其他系统中那样直接。数据库支持这种任务，AMQ 只是提供了一个 API，插件可以使用它来配置安全性。

这是一个示例配置： [https ://github.com/apache/activemq/blob/master/activemq-unit-tests/src/test/resources/org/apache/activemq/security/jaas-broker.xml](https://github.com/apache/activemq/blob/master/activemq-unit-tests/src/test/resources/org/apache/activemq/security/jaas-broker.xml)

为此的 login.config： [https ://github.com/apache/activemq/blob/master/activemq-unit-tests/src/test/resources/login.config](https://github.com/apache/activemq/blob/master/activemq-unit-tests/src/test/resources/login.config)

基本单元测试： [https ://github.com/apache/activemq/blob/master/activemq-unit-tests/src/test/java/org/apache/activemq/security/XBeanSecurityTest.java](https://github.com/apache/activemq/blob/master/activemq-unit-tests/src/test/java/org/apache/activemq/security/XBeanSecurityTest.java)

那应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-28T16:55:18.050

如果您还没有，请看这里：[ActiveMQ 授权](https://stackoverflow.com/questions/11494795/activemq-authorization/31344110#31344110)

正如 Aaron Digulla 所提到的，您可以直接在 xml 配置中管理您的授权，或者您可以在 java 级别进行一些调整。我们稍微修饰了现有的授权插件，它允许我们从文件中动态加载授权和组——如果您不希望任何停机时间，这很重要。

我们对 ActiveMQAuthenticationPlugin 应用了相同的技术，允许我们加密我们的用户/密码文件。

# checkbox - Jqm Knockout 复选框不绑定

> ID：15664648
> 
> 赞同：0
> 
> 时间：2013-03-27T16:52:05.397
> 
> 标签：checkbox, knockout.js, bind, jquery-mobile

我正在尝试绑定复选框，但它似乎无法识别绑定。

我以这种方式应用绑定：

```
$("#crearFicha").live('pagebeforeshow', (event)->
    event.preventDefault();
    ko.applyBindings(CrearFichaVMI, $('#crearFicha')[0]);
)
$('#crearFicha').live('pageshow', (event)->
    $('#groupList5').listview(
                autodividers: true
                autodividersSelector: (li)->
                    oficial_id = li.context.dataset.oficial
                    out = ""
                    switch oficial_id
                        when "12" then out = "Independencia"
                        when "11" then out = "Huachipa"
                        else out = ""
                    out)
    $('#groupList5').listview('refresh')
    $('.seccion select').selectmenu('refresh')
    $('.seccionsli select').slider('refresh')
    $('input[type="radio"]').checkboxradio()
    $('input[type="checkbox"]').checkboxradio()
    return
) 
```

我的 html 如下

```
<fieldset data-role="controlgroup" data-type="horizontal" id="pregunta-5-2" class="infoFicha">                  
    <input data-theme="e" data-content-theme="e"  id="pregunta-5-2-1" name="pregunta-5-2-1" type="checkbox" value="Luz" data-bind="checked:$root.serv_basic().respuestas"/>
    <label for="pregunta-5-2-1">Luz</label> 
    <input data-theme="e" data-content-theme="e"  id="pregunta-5-2-2" name="pregunta-5-2-2" type="checkbox" value="Agua" data-bind="checked:$root.serv_basic().respuestas"/>
    <label for="pregunta-5-2-2">Agua</label>    
    <input data-theme="e" data-content-theme="e"  id="pregunta-5-2-3" name="pregunta-5-2-3" type="checkbox" value="Desague" data-bind="checked:$root.serv_basic().respuestas"/>
    <label for="pregunta-5-2-3">Desag�e</label> 
</fieldset> 
```

# gdb - 在 64 位机器上执行的 32 位编译应用程序中的 gdb 断点未命中

> ID：15664653
> 
> 赞同：1
> 
> 时间：2013-03-27T16:52:23.397
> 
> 标签：gdb, nasm

我正在运行一个在 64 位机器上的 32 位机器上编译的基本汇编程序。我知道有一个名为_start 的断点。当我发出`break _start`命令时，我收到：

```
Breakpoint 1 at 0x8048080 
```

当我运行应用程序时，应用程序不会在设置的断点处中断，而是继续运行。

代码的一小段摘录：

```
global _start           

section .text
_start:

    jmp Begin 
```

我的断点没有被命中的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T17:39:49.077

您需要添加一个 nop 作为第一条指令。然后你可以做

```
breakpoint *_start+1 
```

这是由于 gdb 中的一个错误。你可以做

```
disassemble _start 
```

查看可以使用 *_start+offset 格式设置的所有断点。

# c - scanf 正则表达式 - C

> ID：15664664
> 
> 赞同：10
> 
> 时间：2013-03-27T16:52:51.300
> 
> 标签：c, regex, scanf

我需要读取一个字符串，直到写入以下序列： \nx\n ：

```
(.....)\n
x\n 
```

\n 是换行符， (.....) 可以是任何可能包含其他 \n 字符的字符。

据我所知，scanf 允许正则表达式，但在这种模式之前，我无法让它读取字符串。你能帮我处理scanf格式字符串吗？

* * *

我正在尝试类似的东西：

```
char input[50000];
scanf(" %[^(\nx\n)]", input); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-27T16:57:33.823

> `scanf`据我所知，允许正则表达式

不幸的是，它不允许正则表达式：语法很接近，但在`scanf`. 所有这些都支持正则表达式的[*字符类*](http://www.regular-expressions.info/charclass.html)，因此`%[<something>]`被隐式视为`[<something>]*`. 这就是为什么您的调用`scanf`转换为读取由 . 以外的字符组成的字符串`'(', ')', 'x', and '\n'`。

为了解决您手头的问题，您可以设置一个循环来逐字符读取输入。每次你得到一个`'\n'`，检查一下

*   到目前为止，您在输入中至少有三个字符，
*   前面的字符`'\n'`是`'x'`, 和
*   之前的字符`'x'`是另一个`'\n'`

如果以上所有都为真，那么您已经到达预期输入序列的末尾；否则，您的循环应该继续。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T17:00:00.257

`scanf` *不*支持正则表达式。它对字符类的支持有限，但这根本不是一回事。

**永远不要使用`scanf`, `fscanf`, or`sscanf`**，因为：

1.  数值溢出会触发*未定义的行为*。允许 C 运行时仅仅因为某人输入了太多数字而使*您的程序崩溃。*
2.  一些格式说明符（特别是`%s`）是不安全的，其方式与不安全完全相同`gets`，即它们会愉快地写到所提供缓冲区的末尾并导致程序崩溃。
3.  它们使得稳健地处理格式错误的输入变得极其困难。

在这种情况下，您不需要正则表达式；一次读取一行，[`getline`](http://linux.die.net/man/3/getline)并在读取的行只是“x”时停止。但是，标准（不是 ISO C，而是 POSIX）正则表达式库例程被称为[`regcomp`和`regexec`](http://linux.die.net/man/3/regcomp).

# android - 从 Android backstack 中删除一个特定的 Fragment

> ID：15664670
> 
> 赞同：21
> 
> 时间：2013-03-27T16:53:03.293
> 
> 标签：android, android-layout, android-fragments

对于 android 平板电脑应用程序，我使用 2 个片段。一个在屏幕左侧，一个在右侧。当您单击右侧片段的按钮时，将在右侧片段的顶部添加另一个片段。这个片段被添加到后台堆栈。

```
FragmentTransaction ft = getFragmentManager().beginTransaction(); 
ft.add(R.id.fragmentlayout, fragment2);
ft.addToBackStack("Fragment2");
ft.commit(); 
```

后台现在是：

[片段 1] -> [片段 2]

左侧还有一个按钮，用于打开左侧片段顶部的片段（与 fragment2 相同）并将其添加到 backstack。后台是现在

[片段 1] -> [片段 2] -> [片段 3]

在片段 2 上是一个关闭该片段的按钮。

```
getFragmentManager().popBackStack("Fragment2", FragmentManager.POP_BACK_STACK_INCLUSIVE); 
```

问题是当我只想关闭[fragment 2]时，[fragment 3]也会被销毁。我可以通过调用手动删除片段

```
FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
ft.remove(fragment2).commit(); 
```

但后堆将保留

[片段 1] -> [（幽灵）片段 2] -> [片段 3]

因此，您需要再按一次以关闭应用程序。

有没有办法只从后台删除 [fragment 2] 并将 [fragment 3] 留在屏幕上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T05:20:42.363

您可以简单地制作自己的后台堆栈并`onBackPressed()`以您认为合适的任何方式覆盖和处理它。我认为没有其他方法可以实现所需的行为。

您自己的后台堆栈可能只是`ArrayList`您片段的一个标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-02T09:46:13.803

我刚刚回答了一个类似的问题，所以[这里是该答案的链接](https://stackoverflow.com/a/22125826/471073)。

该实现允许您`Fragment`从 backstack 中的任何位置删除 a ，这是通过使用 refrection 修改将 backstack 信息存储在 and 中的内部变量来实现`FragmentManagerImpl`的`BackStackRecord`。

虽然我不鼓励使用它，但我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T04:02:52.827

此解决方案仅适用于您的情况。您不需要将 Fragment2 放入 backstack。您可以做的是删除代码 'ft.addToBackStack("Fragment2");'。Fragment2 不在堆栈中。因此您关闭 Fragment2，并将 [fragment 3] 留在屏幕上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T22:48:29.843

您可以创建自己的片段管理器/观察器。它只是一个简单的列表或内部地图。使用标签或简单的类名 (getClass) 跟踪它们。这样，您将能够避免创建新的片段并重用缓存的片段，从而控制您的内存消耗。您还可以按照您想要的方式操作片段（覆盖 onBackPressed 并推送您喜欢的片段），而不是仅使用 Google 所说的应该/可以完成的方式。

# php - PHP - 使用会话、cookie 或数据库登录/注销/过期

> ID：15664680
> 
> 赞同：1
> 
> 时间：2013-03-27T16:53:25.860
> 
> 标签：php, session, cookies, login

我试图在与数据库连接的 php 中创建一个用户类这是我到目前为止编写的类！

```
class db {
    private function conn(){
        set_exception_handler(create_function('$e','db::db_error($e);'));
        return new PDO('mysql:host=localhost;dbname=mydb','admin','pass');  //Persistent connection without closing conn: ....$user, $pass, array(PDO::ATTR_PERSISTENT=>true));
    }
    public static function db_error($log){
        $mylog=$_SERVER['REMOTE_ADDR']." - ".$_SERVER['PHP_SELF']." - ".date("d/m/Y h:i:s")." - ".$log;
        $showlog=$_SERVER['REMOTE_ADDR']." - Internal Server Error!";
        // $mylog > error information log on db or file!
        exit($showlog);
    }
    public function dbconstruction(){
        $pdo=$this->conn();
        $pdo->query("CREATE TABLE IF NOT EXISTS `users` (
                `uid` text NOT NULL,
                `sid` text NOT NULL,
                `did` text NOT NULL,
                `username` text NOT NULL,
                `password` text NOT NULL,
                `fullname` text NOT NULL,
                `email` text NOT NULL,
                `birthday` text NOT NULL,
                `expire` text NOT NULL
            ) DEFAULT CHARSET=latin1;");
        $pdo->query("CREATE TABLE IF NOT EXISTS `unverified` (
                `uid` text NOT NULL,
                `token` text NOT NULL,
                `expire` text NOT NULL
            ) DEFAULT CHARSET=latin1;");
        $pdo->query("CREATE TABLE IF NOT EXISTS `sessions` (
                `uid` text NOT NULL,
                `session` text NOT NULL,
                `expire` text NOT NULL
            ) DEFAULT CHARSET=latin1;");
        $pdo=null;
        return true;
    }
    public function send($a,$t){ // usage:  $db->send(array('username'=>'boss'),'users');
        if(empty($a)||count($a)<1){return false;}
        $keys=array_keys($a);
        $keys2=array_keys($a);
        foreach($keys2 as &$k){$k=':'.$k;} // ":key"
        $params=array_combine($keys2,array_values($a));
        $st=$this->conn()->prepare("INSERT INTO `$t`(".(count($keys)>1?implode(",",$keys):$keys[0]).") VALUES (".(count($keys2)>1?implode(",",$keys2):$keys2[0]).")");
        $st->execute($params);
        if($st){$st=null;return true;}
        $st=null;
        return false;
    }
    public function receive($a,$t){ // usage:  $db->receive(array('username'=>'boss'),'users');
        if(empty($a)||count($a)<1){return false;}
        $keys=array_keys($a);
        $keys2=array_keys($a);
        foreach($keys as &$k){$k=$k.' = :'.$k;} // "key = :key"
        foreach($keys2 as &$k){$k=':'.$k;} // ":key"
        $params=array_combine($keys2,array_values($a));
        $st=$this->conn()->prepare("SELECT * FROM $t WHERE ".(count($keys)>1?implode(" AND ",$keys):$keys[0]));
        $st->execute($params);
        $result=$st->fetchAll();
        $st=null;
        return $result;
    }
    public function remove($a,$t){ // usage:  $db->remove(array('token'=>'boss'),'unverified');
        if(empty($a)||count($a)<1){return false;}
        $keys=array_keys($a);
        $keys2=array_keys($a);
        foreach($keys as &$k){$k=$k.' = :'.$k;} // "key = :key"
        foreach($keys2 as &$k){$k=':'.$k;} // ":key"
        $params=array_combine($keys2,array_values($a));
        $st=$this->conn()->prepare("DELETE FROM $t WHERE ".(count($keys)>1?implode(" AND ",$keys):$keys[0]));//DELETE FROM `unverified` WHERE token = 'asd'
        $st->execute($params);
        $c=$st->rowCount();
        if($c>0){$st=null;return true;}
        $st=null;
        return false;
    }
    public function update($a,$b,$t){ // usage:  $db->update(array('password'=>'boss'),array('uid'=>$uid),'users'); // update password where uid=$uid
        if(empty($a)||count($a)<1||empty($b)||count($b)<1){return false;}
        $a_keys=array_keys($a);
        foreach($a_keys as &$k){$k=$k.'=?';} // "key=?"
        $set_params=array_values($a);       
        $b_keys=array_keys($b);
        foreach($b_keys as &$k){$k=$k.'=?';} // "key=?"
        $where_params=array_values($b);
        $params=array_merge($set_params,$where_params);
        $set=(count($a_keys)>1?implode(", ",$a_keys):$a_keys[0]);
        $where=(count($b_keys)>1?implode(" AND ",$b_keys):$b_keys[0]);
        $st=$this->conn()->prepare("UPDATE $t SET $set WHERE $where");
        $st->execute($params);
        $c=$st->rowCount();
        if($c>0){$st=null;return true;}
        $st=null;
        return false;
    }
    public function check($a,$t){ // usage:  $db->check(array('username'=>'boss'),'users');
        if(empty($a)||empty($t)||count($a)<1){return false;}
        $keys=array_keys($a);
        $keys2=array_keys($a);
        foreach($keys as &$k){$k=$k.' = :'.$k;} // "key = :key"
        foreach($keys2 as &$k){$k=':'.$k;} // ":key"
        $params=array_combine($keys2,array_values($a));
        $st=$this->conn()->prepare("SELECT * FROM $t WHERE ".(count($keys)>1?implode(" AND ",$keys):$keys[0]));
        $st->execute($params);
        $c=$st->rowCount();
        if($c>0){$st=null;return true;}
        $st=null;
        return false;
    }
}

//$user = new user;
//echo $user->verifyemail('boss','2391cc263bdf0fcf6e69872608ee05fdde7dbdc4');
//echo $user->login('1234567','boss');
//echo $user->register('boss','ad min','1234567','waw1@law.bau','1955');
//$db = new db;
//echo $db->dbconstruction();
//print_r(  $db->update(array('username'=>'thoi'),array('username'=>'asd'),'users')  );

class user { // uid | sid | did | username | password | fullname | email | birthday
    public $settings=array(
                'expire_cookie'=>'4m', // cookie expire time
                'expire_account'=>'3M', // inactivity account expire time
                'expire_verification'=>'1d' // unverified email account expire time
            );
    public function register($username,$fullname,$password,$email,$birthday){  // to add : if is expired register it
        if(empty($username)||empty($fullname)||empty($password)||empty($email)||empty($birthday)
            ||!preg_match('/[a-z0-9\-_]{4,31}/i',$username)
            ||!preg_match('/[a-z\s]{5,64}/i',$fullname)
            ||!preg_match('/(.){7,25}/i',$password)
            ||!preg_match('/([\w\-\._]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})/i',$email)
            ||!preg_match('/(19|20)([0-9]{2})/i',$birthday)
          ){return false;}
        $username=strtolower($username);
        $email=strtolower($email);
        $db=new db;
        if($db->check(array('username'=>$username),'users')===true){return 'registered username!';}
        if($db->check(array('email'=>$email),'users')){return 'registered email!';}
        $shadow = $this->shadow($password);
        $id=$this->gen(md5($username.$fullname.$password.$email.$birthday.$shadow)); // $id['uid']  , $id['sid']  , $id['did']
        $register=$db->send(array('uid'=>$id['uid'],'sid'=>$id['sid'],'did'=>$id['did'],'username'=>$username,'password'=>$shadow,'fullname'=>$fullname,'email'=>$email,'birthday'=>$birthday,'expire'=>time_ahead($this->settings['expire_account'])),'users');
        if($register){
            $expire_verify=time_ahead($this->settings['expire_verification']);
            $db->send(array('uid'=>$id['uid'],'token'=>$id['token'],'expire'=>$expire_verify),'unverified');
            // SEND EMAIL WITH url http://site.com/?u=$uid&t=$token  OR  http://site.com/verify  to input manually token
            return 'Success registration! Time to verify is until '.date('d/M/Y H:i:s',$expire_verify);
        }
        return false;
    }
    public function login($password,$user){
        if(empty($password)||empty($user)){return false;}
        $user=strtolower($user);
        $db=new db;
        $user_check=$db->check(array('username'=>$user),'users');
        $email_check=$db->check(array('email'=>$user),'users');
        if(!$user_check&&!$email_check){return 'Invalid username/email';}
        $user_details=$db->receive(array(($user_check?'username':'email')=>$user),'users')[0];
        if($this->pass_verify($password,$user_details['password'])){  //**********   set some cookies with expire time_ahead('2h')
            $uid=$user_details['uid'];
            if($user_details['expire']<time()){
                if(!$this->remove_user($uid)){return 'int err!';}
                return 'Account has been expired on '.date('d M Y h:i',$user_details['expire']).'! Click HERE to register!';
            }else{
                $db->update(array('expire'=>time_ahead($this->settings['expire_account'])),array('uid'=>$uid),'users');
                $session=$this->gen(md5($uid.'18.1"8-18\'18'))['session'];  //$_SERVER["SSL_SESSION_ID"] if $ssl true
                $expire=time_ahead($this->settings['expire_cookie']);

                /*
                session_set_cookie_params ( $lifetime , $path , $domain , $secure , $httponly  );
                setcookie('auth','sdaasdasa',time()+'120',WWW,DOMAIN,$GLOBALS['ssl'],true);

                define('DOMAIN','example.com',true);
                define('WWW',$_SERVER['DOCUMENT_ROOT'],true);
                $ssl=((isset($_SERVER['HTTPS'])&&$_SERVER['HTTPS']=='on')?true:false);

                session_set_cookie_params ( 20 , WWW , DOMAIN , $GLOBALS['ssl'] , true  );
                session_name('auth');
                session_start();
                */
                //   setcookie('auth',$session,$expire);  <---- (-_-)!

                if($db->send(array('uid'=>$uid,'session'=>$session,'expire'=>$expire),'sessions')){
                    print 'session set!';
                }
            }
            $unverified=$db->check(array('uid'=>$uid),'unverified');//check if is in unverifided db
            if($unverified){
                $expire_verify=$db->receive(array('uid'=>$uid),'unverified')[0]['expire'];
                if($expire_verify<time()){ //expired verification via email!
                    if(!$this->remove_user($uid)){return 'int err!';}
                    return 'Verification has expired! Account has been deleted :(';
                }else{
                    //$rem=($expire_verify-time());
                    return 'success login! Unverified account! Remaining time to verify your account is until '.date('d/M/Y H:i:s',$expire_verify).' !!!';
                }
            }else{
                return 'success login! Verified account :)';
            }
            return false;
        }else{
            return 'invalid password!';
        }
        return false;
    }
    public function verifyemail($user,$token){
        if(empty($token)||empty($user)){return false;}
        $user=strtolower($user);
        $db=new db;
        $user_check=$db->check(array('username'=>$user),'users');
        $email_check=$db->check(array('email'=>$user),'users');
        if($user_check||$email_check){
            $uid=$db->receive(array(($user_check?'username':'email')=>$user),'users')[0]['uid'];
            if(!$db->check(array('uid'=>$uid),'unverified')){return 'Already verified!';}
            if($db->check(array('token'=>$token),'unverified')){
                $db->remove(array('token'=>$token),'unverified');
                return 'Verified successfully.';
            }else{return 'invalid token!';}
        }else{return 'invalid user!';}
        return false;
    }
    public function remove_user($uid){
        if(!empty($uid)){
            $db=new db;
            $db->remove(array('uid'=>$uid),'users');
            $db->remove(array('uid'=>$uid),'unverified');
            return true;
        }
        return false;
    }
    public function gen($params){ // generate ids ,  USAGE   gen('user123123123')['did']
        $a = $params.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_HOST'].$_SERVER['HTTP_USER_AGENT'];
        $r = array(
            'sid' => strtolower( sha1(uniqid(md5($a.time()))) ) , // secret id
            'uid' => strtolower( sha1(md5(uniqid($a.time()))) ) , // public id
            'did' => strtolower( sha1(md5(uniqid($a).time())) ) , // download id
            'token' => strtolower( sha1(md5(uniqid($a).(time()*29.06))) ) , // token id for unverified accounts
            'session' => strtolower( sha1(md5(uniqid($a).(time()*19.91))) ) // login session id
        );
        return $r;
    }
    private function shadow($i){ // usage  shadow('mypass')
        $s='';for($n=0;$n<16;$n++){$s.=chr(rand(1,128));}
        $s='$1$'.md5($s).'$';
        return crypt($i,$s);
    }
    private function pass_verify($pass,$hash){ // usage if($this->pass_verify('Zmypass',$s)){echo 'yes';}else{echo 'no';}
        return ((crypt($pass,$hash)==$hash)?true:false);
    }
}

function time_ahead($t,$c=true){
    if(preg_match('/(\d+)([y|M|d|h|m|s])/',$t,$ti)){
        switch($ti[2]){//1year=365.242144days <-maya says so
            case'y':$r=60*60*24*30.43684991666667*12*$ti[1];break;
            case'M':$r=60*60*24*30.43684991666667*$ti[1];break;
            case'd':$r=60*60*24*$ti[1];break;
            case'h':$r=60*60*$ti[1];break;
            case'm':$r=60*$ti[1];break;
            case's':$r=$ti[1];break;
        }
        return ($c?time()+$r:$r);
    }
    return false;
} 
```

您可以在 dbconstruct func 的代码中看到 db 结构。

我的问题是我应该使用登录/注销：

*   会话和cookie

*   mysql with table:sessions[uid|session|expire] 和 pcntl_fork 用于清理会话表中的过期会话，称为每次页面重新加载或类似的东西！

我正在考虑使用 ajax 进行登录并刷新

也欢迎任何其他建议。
提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:57:05.213

我的建议是：使用会话。

一个会话仅使用 1 个 cookie: `PHPSESSID`。所有会话数据都存储在服务器端（因此不可能被篡改）。

用于[`session_set_save_handler`](http://php.net/manual/en/function.session-set-save-handler.php)覆盖 PHP 存储其会话数据的位置。让它将数据存储在 MySQL 表中。

会话表中没有`uid`as 字段。即使是未经身份验证的客人也可以进行会话。`uid`是会话数据的一部分。而不是`uid`你想要的`sess_id`，即。会话的 ID。另一个原因是一个用户可能有两个会话，您不希望它们干扰，因为这可能会打破您对会话如何工作的假设。

`expire`没问题，用它来实现垃圾回收回调。

次要：考虑使用`utf8_general_ci`而不是`latin1`.

# jquery-ui - 操作 jQuery 数据表

> ID：15664688
> 
> 赞同：0
> 
> 时间：2013-03-27T16:53:48.703
> 
> 标签：jquery-ui, jquery

`mDataProp`我不确定&之间有什么区别`fnRender`。在第一种情况下，我们按原样声明属性，但在第二种情况下，我们这样写

```
oObj.aData['prop2'] . 
```

我在这里有两个问题。

1.  根据 prop1 的值，我想修改 prop2 的值，例如，如果 prop1 在第一列中为 1，则只有 prop2 应在第二列中显示其值，否则应显示为空白。

2.  我们能否根据 prop1 的值启用/禁用 dataTable 中的 prop2 列。

    ```
    {
       "mDataProp": "prop1",
       "bSortable": true,
       "sClass": "prop1Class"
    },
    {  "mDataProp": "prop2",
       "fnRender": function (oObj) { return oObj.aData['prop2'] ;},
       "bSortable": true,
       "sClass": "prop2Class"
    }, 
    ```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:49:19.883

mDataProp 定义您尝试使用的数据。

fnRender 是您分配自定义函数以与默认方式不同的方式呈现数据的地方。您的示例只是按原样返回数据。

顺便说一句，两者都已弃用。

对于另一个问题，也许您可​​以使用 fnRender 或 mRender。添加自定义函数以显示带有值或空白的第二列。

像这样的东西...

```
"fnRender": function (oObj) { return fnXYZ(oObj, 'prop1', 'prop2') ;}

...

function fnXYZ(oObj, col1, col2) {
    if (oObj.aData[col1] == 1) {
        return oObject.aData[col2];
    }
    return "";
} 
```

# javascript - javascript中的减等于 - 这是什么意思？

> ID：15664696
> 
> 赞同：13
> 
> 时间：2013-03-27T16:53:59.030
> 
> 标签：javascript, jquery, operators

下面的减号等于什么`-=`意思/做什么？

```
$('#wrapper').animate({
    backgroundPosition: '-=2px'
})(); 
```

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-27T17:00:33.760

Adil 已经回答了这个问题，但我始终认为将问题可视化并将其与他人联系起来很有用。

以下两段代码具有相同的效果：

```
var a = 20;
a = a - 5; 
```

和

```
var a = 20;
a -= 5; 
```

在这两种情况下，`a`现在都等于 15。

这是一个**赋值运算符**，这意味着它将运算符右侧的任何内容应用于左侧的变量。有关赋值运算符及其功能的列表，请参见下表：

```
Operator |  Example |  Same as    |  Result
______________________________________________
  =      |  a = 20  |             |  a = 20
  +=     |  a += 5  |  a = a + 5  |  a = 25
  -=     |  a -= 5  |  a = a - 5  |  a = 15
  *=     |  a *= 5  |  a = a * 5  |  a = 100
  /=     |  a /= 5  |  a = a / 5  |  a = 4
  %=     |  a %= 5  |  a = a % 5  |  a = 0 
```

您还具有递增和递减运算符：

`++``--`其中和分别等于 21 和 19 `++a`。`--a`你会经常发现这些用于迭代`for loops`。

根据顺序，您将做不同的事情。

与**后缀**( `a++`) 表示法一起使用，它首先返回数字，然后递增变量：

```
var a = 20;
console.log(a++); // 20
console.log(a); // 21 
```

与**前缀**( `++a`) 一起使用，它增加变量然后返回它。

```
var a = 20;
console.log(++a); // 21
console.log(a); // 21 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T16:54:42.450

运算符`-=`（*减法赋值*）将从已设置`value`的变量中减去给定值。

例如：

```
var a = 2;
a -= 1;
//a is equal to 1 
```

# drupal-7 - Drupal：捕获在用户设置表单中更改的字段

> ID：15664697
> 
> 赞同：0
> 
> 时间：2013-03-27T16:53:59.870
> 
> 标签：drupal-7, drupal-forms

我的 Drupal 网站上有一个外部数据库（oracle）。当用户更改电子邮件和密码（存​​储在内部数据库中）时，我需要获取此更改以将此信息更新到我的外部数据库中的特定表

我认为可以将 form_alter 用于用户设置表单，但我不知道如何。我需要的密码没有加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:48:29.617

我用这段代码解决了这个问题

```
function mymodule_form_alter(&$form, &$form_state, $form_id) {   
  if ($form_id == "user_profile_form") {

    $form['#submit'][] = 'mymodule_form_submit';

  }
}

function mymodule_form_submit(&$form, &$form_state){

  // Some code and access to values like $form_state['values']['fieldXXXX']);

} 
```

# sql - 拦截从我的浏览器到 SQL Server 数据库的请求

> ID：15664704
> 
> 赞同：1
> 
> 时间：2013-03-27T16:54:20.597
> 
> 标签：sql, sql-server, request, toad, intercept

我正在开发一个应用程序，我需要向我的 ERP 的数据库（SQLServer）发出一些请求。

当我在 ERP（在浏览器中）询问某些内容时，我想拦截发送到数据库的 SQL 请求，这样我就可以用我自己的应用程序重现这个请求。

我查看了 Toad for SQL Server，但看不到我想要的是否可能

ps：我只有数据库的读取权限用户

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:56:42.840

如果您有许可证，则可以使用**[SQL Server Profiler 。](http://msdn.microsoft.com/en-gb/library/ms181091.aspx)**

如果你没有它，有一些免费的 SQL 分析器。检查此[问题](https://stackoverflow.com/questions/9111811/sql-server-profiler-free-tool)以获取列表。

我推荐你**[sqlprofiler](https://sites.google.com/site/sqlprofiler/)**。如果您知道如何使用 SQL Server Profiler，我已经使用过它，并且安装和使用起来非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T03:11:12.573

另一种可能性是[Gallium Data——](https://www.galliumdata.com)它是一个智能数据库代理，可以让您完全访问传入（和传出）流量，如果需要，您甚至可以更改它。它是免费的。

# css - 使用边距/填充与其余部分隔开

> ID：15664706
> 
> 赞同：45
> 
> 时间：2013-03-27T16:54:28.667
> 
> 标签：css, margin, padding, html

我有一个文本块，我想用小斜体写下作者的姓名和日期，所以我把它放在一个`<span>`块中并设置样式，但我想把名字隔开一点，所以我应用了边距（还尝试了填充）到块，但它不能让它工作。

我已经解决了这个问题 -[这里](http://jsfiddle.net/BqTUS/)

html看起来像

```
<p><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ipsa omnis obcaecati dolore reprehenderit praesentium.
<br><span>Author Name, Year</span>
</p> 
```

CSS

```
p       {font-size:24px; font-weight: 300; -webkit-font-smoothing: subpixel-antialiased;}
p span  {font-size:16px; font-style: italic; margin-top:50px;} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-27T17:00:34.213

总体只需添加*display:block;* 到你的跨度。您可以保持 html 不变。

[**演示**](http://jsfiddle.net/ps6fjLwk/)

您可以使用以下 css 来做到这一点：

```
p {
    font-size:24px; 
    font-weight: 300; 
    -webkit-font-smoothing: subpixel-antialiased; 
    margin-top:0px;
}

p span {
    font-size:16px; 
    font-style: italic; 
    margin-top:20px; 
    padding-left:10px; 
    display:inline-block;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-27T16:59:45.980

将此样式添加到您的跨度：

```
position:relative; 
top: 10px; 
```

演示：http: [//jsfiddle.net/BqTUS/3/](http://jsfiddle.net/BqTUS/3/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-25T07:36:48.817

在 html 中尝试：

```
style="display: inline-block; margin-top: 50px;" 
```

或在 CSS 中：

```
display: inline-block;
margin-top: 50px; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T17:00:15.583

使用`div`代替`span`，或添加`display: block;`到`span`标签的 CSS 样式中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T17:03:40.470

`line-height`像我在这里所做的那样 尝试：http: [//jsfiddle.net/BqTUS/5/](http://jsfiddle.net/BqTUS/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T16:59:54.820

[JSFiddle](http://jsfiddle.net/BqTUS/2/)

HTML：

Lorem ipsum dolor sit amet, consectetur adipisicing elit。Ipsa omnis obcaecati dolore reprehenderit praesentium。Nisi eius deleniti voluptates quis esse deserunt magni eum commodi nostrum facere pariatur sed eos voluptatum？

```
</p><span class="small-text">George Nelson 1955</span> 
```

CSS：

```
p       {font-size:24px; font-weight: 300; -webkit-font-smoothing: subpixel-antialiased;}
p span  {font-size:16px; font-style: italic; margin-top:50px;}

.small-text{
font-size: 12px;
font-style: italic;
} 
```

# ruby - 平面文件、文本解析、字符串方法

> ID：15664707
> 
> 赞同：1
> 
> 时间：2013-03-27T16:54:30.160
> 
> 标签：ruby, string, parsing, methods

我是 ruby​​ 新手，我正在尝试 Programming Ruby-The Pragmatic Programmer's Guide。我正在尝试使用一些 String 类方法来创建基于歌曲列表的歌曲对象，该歌曲列表存储为平面文件中的行：

我的两个问题是： 1\. 如何在平面文件中创建我的歌曲列表？2\. get ruby​​ 将如何运行并理解该特定文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:45:55.760

保留歌曲的文本文件。

```
Westfall
I Am the Walrus
Hey Jude 
```

打开文件。

```
$song_file = open('songs.txt') 
```

创建一个空的歌曲列表。

```
$song_list = [] 
```

遍历文本文件的每一行，使用文件中的信息创建对象并将它们添加到列表中。

```
$song_file.each_line do |line|
    $song_list << Song.new(line)
end 
```

现在你有了你的歌曲对象。

如果您想了解有关在 Ruby 中使用文件 I/O 的更多信息，请查看文档。 [http://ruby-doc.org/core-2.0/IO.html](http://ruby-doc.org/core-2.0/IO.html)

# git - 克隆一个 Github 存储库

> ID：15664708
> 
> 赞同：0
> 
> 时间：2013-03-27T16:54:31.310
> 
> 标签：git, github, moodle

我从一个原始官方 repo 分叉了一个 repo `moodle`。它有超过15个分支机构`master`作为分支机构。然后我将它克隆到我的本地机器上。假设我将它克隆到一个文件夹中`project`，它创建了一些 50 `folders`。

做 `git remote -v`给了以下内容：

```
origin  https://github.com/ps/moodle.git (fetch)
origin  https://github.com/ps/moodle.git (push)
upstream    https://github.com/moodle/moodle.git (fetch)
upstream    https://github.com/moodle/moodle.git (push) 
```

所以，我有一个`origin`和一个`upstream`。

现在，我想`fork`和`clone`另一个用户的另一个分支。可以说分支是`gs`. 因此，该用户`gs`在`master`来自`moodle`. 现在，为了在我的本地机器上克隆它，我创建了一个远程`otheruser`并克隆了它。

所以，现在做 `git remote -v`给出了以下内容：

```
origin  https://github.com/ps/moodle.git (fetch)
origin  https://github.com/ps/moodle.git (push)
otheruser   https://github.com/otheruser/moodle.git (fetch)
otheruser   https://github.com/otheruser/moodle.git (push)
upstream    https://github.com/moodle/moodle.git (fetch)
upstream    https://github.com/moodle/moodle.git (push) 
```

我的问题是这样的：

当我克隆分支`gs`时，它创建了额外的子目录。所以，我的意思是我无法从物理上理解它是如何工作的？如果我在这些额外的子目录中做任何更改，然后将其推送到`master`分支下的我的 Github 帐户，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:48:10.697

这`otheruser`是一个完全不同的 git repo。它是从原来的分支中分离出来的，但现在它是独立的。它可以从原始内容中提取和合并更改，但就对原始内容进行更改而言，它可以做的最好的事情是请求原始内容[提取](https://help.github.com/articles/using-pull-requests)它所做的更改。

您不清楚您是否有直接推送到`otheruser`'s fork 的权限。我会回答这两种情况：

**如果你分叉：**

当你分叉 this`otheruser`时，你正在从那个叉子上分叉。因此，您将再次基于该回购创建一个全新的回购，并且最多可以拉取请求以更改该分叉。至于推送到你的分叉，绝对没问题，在你想要的任何分支上，你想要的任何子目录上；现在是你的了。

**如果您有直接许可：**

这很简单，只需推送到`otheruser`'s master 因为你有权限，就像你通常自己做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:01:21.997

只要您在提交之前索引子目录中的更改，就可以。但是，没有任何内容会自动编入索引。

# excel - Excel 日期格式

> ID：15664709
> 
> 赞同：17
> 
> 时间：2013-03-27T16:54:36.953
> 
> 标签：excel, date

我有一个包含美国日期的大型导入 csv 文件。我想`(dd/mm/yyyy)`使用代码将这些日期更改为英国格式。问题是美国日期`"mm/dd/yyyy"`和`"m/dd/yyyy"`格式-后者不响应excel中的任何“可点击”选项-包括“文本到列”程序。是否有代码在相邻列中运行时会进行转换？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-27T17:28:22.850

您也可以`TEXT()`很容易地使用该功能（注意：源数据必须是 excel 日期值）

```
TEXT(value, format_text) 
```

`value`参考单元格在哪里，`format_text`以及您希望如何格式化文本 - 在您的情况下为 dd/mm/yyyy。

假设：

```
A1 = 3/17/2013
A2 = 12/27/2013 
```

在 B1 & B2 中只需输入：

```
B1 = TEXT(A1, "dd/mm/yyyy")
B2 = TEXT(A2, "dd/mm/yyyy") 
```

结果应该是

```
 A              B
3/17/2013      17/03/2013
12/27/2013     27/12/2013 
```

希望有帮助。

**使用文本时的更新建议：**

`mid()`使用,`left()`和函数拆分字符串，`right()`然后使用函数检查月份 mm 的长度是 1 个字符还是 2 个字符`LEN()`。最后使用 & 和 / 运算符将字符串连接在一起。

尝试将其粘贴到 B1 中，它应该可以正常工作：

`=MID(A1,FIND("/",A1,1)+1,2)&"/"&IF(LEN(LEFT(A1,FIND("/",A1)-1))=1,0&LEFT(A1,FIND("/",A1)-1),LEFT(A1,FIND("/",A1)-1))&"/"&RIGHT(A1,4)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T17:17:54.270

您可以使用 DATEVALUE 函数将日期字符串转换为 Excel 数据值，然后创建自定义日期格式以以英国格式显示日期值。

假设第一个日期字符串在单元格 A1 中，以下函数调用会将字符串转换为日期值。

```
 =DATEVALUE(A1) 
```

您可以`dd/mm/yyyy;@`通过右键单击单元格，选择“设置单元格格式”、“数字”、“自定义”并在“类型”字段中输入格式来创建自定义格式。

使用日期值而不是日期字符串将允许您更改显示的格式，而无需执行字符串操作来重新排列日期元素。如果需要，它还可以进行日期算术。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T17:36:13.777

这是一个可以帮助你的子。使用 QueryTables 方法，您可以指定 Excel 将某些数据列解释为字符串。

```
Sub ImportExternalCSVAsText()
'
Dim sFileName As String
sFileName = Application.GetOpenFilename("CSV files, *.csv")

    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;" & sFileName _
        , Destination:=Range("$A$1"))
        .Name = "CSV"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = False
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(1, 2, 2) '2 denotes STRING
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

在示例中，我导入了一个 3 列宽的 CSV 文件，并指定第 2 列和第 3 列包含字符串类型的数据。

`.TextFileColumnDataTypes = Array(1, 2, 2) '2 denotes STRING`

如果此方法不起作用，请告诉我。我之前不得不处理这个问题（作为英国合同工作的美国承包商），我很确定我有一些我当时使用的功能。

这会将所有值作为字符串引入。

**您很可能必须解析它们**，因为像“12/30/2011”这样的美国日期输入将使`DATEVALUE()`您的系统区域设置上的功能失败，并且像“07/05/2012”（2012 年 7 月 5 日）这样的美国日期输入将被解释您所在地区的“2012 年 5 月 7 日”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T17:00:01.353

这个函数应该可以解决问题：

```
=CONCATENATE(MID(B2,SEARCH("/", B2,1)+1,2), "/",LEFT(B2,SEARCH("/", B2,1)-1), "/", RIGHT(B2,4)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-17T17:44:06.510

奇怪的是，要做到这一点，您需要将一列文本转换为一列文本。

选择包含您的日期的列：mm/dd/yyyy

*   在数据下，选择文本到列
*   选择固定宽度
*   下一个
*   设置年份后的列宽分隔符（yyyy）
*   列数据格式
*   下拉选择 mm/dd/yyyy（源格式）
*   选择目的地
*   结束

源数据将转换为系统的日期格式。

```
Sub USUKDateFormat()

    ' USUKDateFormat Macro

    Selection.TextToColumns Destination:=ActiveCell.Offset(0, 2).Range("A1"), _
        DataType:=xlFixedWidth, OtherChar:="/", FieldInfo:=Array(Array(0, 4), Array _
        (10, 1)) 
End Sub 
```

# http - multipart/form-data 中的二进制行（文件上传）

> ID：15664712
> 
> 赞同：7
> 
> 时间：2013-03-27T16:54:42.813
> 
> 标签：http, multipartform-data

我正在用 python 编写一个简单的网络服务器，它允许用户使用 multipart/form-data 上传文件。据我所知，多部分 MIME 数据应该是基于行的。例如，边界必须在一行的开头。

我无法弄清楚在这方面如何处理二进制数据。我的客户端（Firefox）*没有*将其编码为 7 位 ASCII 或任何内容，它只是发送的原始二进制数据。它是否将数据拆分为任意位置的行？是否为多部分数据指定了最大行长度？我尝试通过 RFC 查看 multipart/form-data，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T12:02:57.367

在深入研究了 RFC 之后，我想我终于明白了。正文部分（即消息中单个部分的正文内容`multipart/*`）只需要基于行，因为部分末尾的边界以a开头`CR+LF`。但除此之外，数据不必是基于行的，如果内容中恰好有换行符，则它们之间没有最大距离，也不需要转义（好吧，除非可能`Content-Transfer-Encoding`是引用字符串）。的 7 位、8 位和二进制选项`Content-Transfer-Encoding`实际上并不表示已对数据进行任何编码（因此无需撤消编码），它们只是表示您的数据类型可以期待在身体部位看到。

我在[表达不佳]问题中真正得到的是如何从套接字读取/缓冲数据，以便我可以确保我抓住了边界，而不必有一个任意大的缓冲区（例如，如果发生了内容中没有换行符，因此`readline`最终缓冲了整个内容）。

我最终做的是`readline`使用最大长度从套接字缓冲，所以缓冲区永远不会超过这个长度，但如果遇到换行符，也会确保终止。这确保了当边界到达时（在 a 之后`CR+LF`），它将位于缓冲区的开头。我不得不做一些额外的工作以确保我没有`CR+LF`在实际的正文内容中包含该 final，因为根据 RFC，它需要在边界之前，因此不是内容本身的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T17:43:25.690

尝试查看[RFC 2045](https://www.rfc-editor.org/rfc/rfc2045)。通常，二进制内容由您的应用程序转换为[BASE64](http://en.wikipedia.org/wiki/Base64) ，并使用“Content-Transfer-Encoding : Base64”包含在多部分消息中。还有其他传输二进制数据的机制，但这很常见。二进制数据被转换为八位字节并以任意长度的字符串分块（取决于编码变体 - 请参阅上面的 BASE64 链接）。然后接收应用程序将其解码为原始二进制内容。

我不是 python 程序员，但如果你真的必须自己编写任何代码，我会感到惊讶。我怀疑有预构建的 python 库函数可以为您执行此操作。

# wpf - 在 SplashScreen 实施后未加载 WPF 资源

> ID：15664713
> 
> 赞同：0
> 
> 时间：2013-03-27T16:54:43.003
> 
> 标签：wpf, mvvm, resources

我想在我的 wpf 应用程序中实现一个闪屏，我可以在其中显示一些状态消息。我找到了一个关于如何做到这一点的好教程。

我正在使用 mvvm 工具包。我的 App.xaml 将 StartupUri 设置为“View/Shell.xaml”。这一切都很好。现在我想在 StartupUri 被“调用”之前启动 Splashscreen。

在 App.xaml.cs 我实现了这样的主要方法：

```
[STAThread()]
    static void Main()
    {
        Splasher.Splash = new IPA.Merlin.View.ViewSplashScreen();
        Splasher.ShowSplash();

        for (int i = 0; i < 1000; i++)
        {
            MessageListener.Instance.ReceiveMessage(string.Format("Load module {0}", i));
            Thread.Sleep(1);
        }

        new App();
    }
    /// <summary>
    /// 
    /// </summary>
    public App()
    {
        StartupUri = new System.Uri("View/Shell.xaml", UriKind.Relative);

        Run();
    } 
```

为此，我必须将项目首选项中的启动对象更改为此主要方法。

所以现在我的 Splashscreen 被调用并显示测试消息，并且在这个 App() 被调用之后。我收到以下错误：在“System.Windows.StaticResourceExtension”上提供值引发内部错误异常：“找不到名为 {Locator} 的资源

如果我将 StartupUri 更改为另一个窗口，则也找不到此窗口资源。仅当我更改启动对象然后自己调用 app.run 时才会发生这种情况。如果没有启动画面，所有资源都可以毫无问题地找到。

谁能帮我解决这个问题，因为它让我发疯

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:35:15.427

而不是创建`Main()`方法，您可以`override OnStartup`调用被调用的方法`before main window gets initialized (App.xaml.cs)`-

```
protected override void OnStartup(StartupEventArgs e)
{
   base.OnStartup(e);

   Splasher.Splash = new IPA.Merlin.View.ViewSplashScreen();
   Splasher.ShowSplash();

   for (int i = 0; i < 1000; i++)
   {
      MessageListener.Instance.ReceiveMessage(string.Format("Load module {0}", i));
      Thread.Sleep(1);
   }

   Splasher.CloseSplash();
} 
```

# java - 打开同一个 wav 文件给我一个 javax.sound.sampled.LineUnavailableException

> ID：15664722
> 
> 赞同：1
> 
> 时间：2013-03-27T16:55:10.877
> 
> 标签：java, javasound, clip

我有两个类似的波（类似的格式），我用这段代码预加载它们

```
Clip click1;
Clip click2;

File soundFile = new File("click1.wav");
AudioInputStream sound = AudioSystem.getAudioInputStream(soundFile);
DataLine.Info info = new DataLine.Info(Clip.class, sound.getFormat());
click1 = (Clip) AudioSystem.getLine(info);
click1.open(sound);

soundFile = new File("click2.wav");
sound = AudioSystem.getAudioInputStream(soundFile);
info = new DataLine.Info(Clip.class, sound.getFormat());
click2 = (Clip) AudioSystem.getLine(info);
click2.open(sound); 
```

第一个文件被加载，但第二个文件抛出异常：

```
javax.sound.sampled.LineUnavailableException: line with format PCM_SIGNED 44100.0 Hz, 16 bit, mono, 2 bytes/frame, little-endian not supported.
    at com.sun.media.sound.DirectAudioDevice$DirectDL.implOpen(DirectAudioDevice.java:492)
    at com.sun.media.sound.DirectAudioDevice$DirectClip.implOpen(DirectAudioDevice.java:1278)
    at com.sun.media.sound.AbstractDataLine.open(AbstractDataLine.java:107)
    at com.sun.media.sound.DirectAudioDevice$DirectClip.open(DirectAudioDevice.java:1059)
    at com.sun.media.sound.DirectAudioDevice$DirectClip.open(DirectAudioDevice.java:1149) 
```

我尝试在 click2 的剪辑上设置 click1.wav，但我遇到了同样的错误。

我有 Ubuntu 11.04，这是 java -version 的结果

```
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01)
Java HotSpot(TM) Client VM (build 20.14-b01, mixed mode 
```

**编辑**

这是 DataLine.Info 的 System.out.println 的结果

click1 = interface Clip 支持格式 PCM_SIGNED 11025.0 Hz, 16 bit, mono, 2 bytes/frame, little-endian

click2 = interface Clip 支持格式 PCM_SIGNED 11025.0 Hz, 16 bit, mono, 2 bytes/frame, little-endian

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:50:19.853

两个故障排除思路：

1) 切换文件。错误是否切换到第一次加载？如果不是，那么问题可能是由于下一个建议。

2）不要试图重用“信息”或“声音”，创造新的变量。

错误发生在哪一行？我认为 Java 不允许您重用声音变量。我不清楚原因。我只记得当我尝试重用变量时，我必须一直回到“soundFile”变量，然后 Java 才会让我这样做。

# ejb - 在有状态 EJB 中设置值

> ID：15664724
> 
> 赞同：0
> 
> 时间：2013-03-27T16:55:16.003
> 
> 标签：ejb, stateful-session-bean

我想开始使用有状态 EJB 来保存登录用户的信息，我有以下 EJB：

```
@Stateful
public class CurrentUserBean {
    private User currentU;

    @PostConstruct
    public void init(){
        System.out.println("Init CU EJB");
    }

    public User getCurrentU() {
        return currentU;
    }

    public void setCurrentU(User currentU) {
        this.currentU = currentU;
    }
} 
```

当我的用户成功登录时，我尝试从 ManageBean 中像这样介绍用户，基本代码是：

```
@EJB CurrentUserBean cUserB;

//.. validate user
cUserB.setCurrentU(userServ.findByEmail(user)); 
```

我重定向到其他 xhtml，其中 managedBean init 方法是：

```
@PostConstruct
    public void init(){
        System.out.println("I am Bean: "+ cUserB.getCurrentU().getNick());
} 
```

我有这个错误：

```
SEVERE: Error Rendering View
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean productController
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:229)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:64)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:77)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:51)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeRow(PanelGridRenderer.java:143)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeStaticBody(PanelGridRenderer.java:107)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeBody(PanelGridRenderer.java:63)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeEnd(PanelGridRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting invoke lifecycle  method public void com.garagesalelive.controllers.admin.ProductController.init()
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:231)
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    ... 67 more
Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting invoke lifecycle  method public void com.garagesalelive.controllers.admin.ProductController.init()
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokeLifecycleMethod(GlassFishInjectionProvider.java:393)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:306)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:229)
    ... 68 more
Caused by: java.security.PrivilegedActionException: java.lang.reflect.InvocationTargetException
    at java.security.AccessController.doPrivileged(Native Method)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokeLifecycleMethod(GlassFishInjectionProvider.java:376)
    ... 70 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.faces.integration.GlassFishInjectionProvider$2.run(GlassFishInjectionProvider.java:382)
    ... 72 more
Caused by: java.lang.NullPointerException
    at com.garagesalelive.controllers.admin.ProductController.init(ProductController.java:47)
    ... 77 more

INFO: Exception when handling error trying to reset the response.
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean productController
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:229)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:64)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:77)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:51)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeRow(PanelGridRenderer.java:143)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeStaticBody(PanelGridRenderer.java:107)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeBody(PanelGridRenderer.java:63)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeEnd(PanelGridRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting invoke lifecycle  method public void com.garagesalelive.controllers.admin.ProductController.init()
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:231)
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    ... 67 more
Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting invoke lifecycle  method public void com.garagesalelive.controllers.admin.ProductController.init()
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokeLifecycleMethod(GlassFishInjectionProvider.java:393)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:306)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:229)
    ... 68 more
Caused by: java.security.PrivilegedActionException: java.lang.reflect.InvocationTargetException
    at java.security.AccessController.doPrivileged(Native Method)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokeLifecycleMethod(GlassFishInjectionProvider.java:376)
    ... 70 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.faces.integration.GlassFishInjectionProvider$2.run(GlassFishInjectionProvider.java:382)
    ... 72 more
Caused by: java.lang.NullPointerException
    at com.garagesalelive.controllers.admin.ProductController.init(ProductController.java:47)
    ... 77 more

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at com.garagesalelive.controllers.admin.ProductController.init(ProductController.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.faces.integration.GlassFishInjectionProvider$2.run(GlassFishInjectionProvider.java:382)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokeLifecycleMethod(GlassFishInjectionProvider.java:376)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:306)
    at org.glassfish.faces.integration.GlassFishInjectionProvider.invokePostConstruct(GlassFishInjectionProvider.java:229)
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:64)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:77)
    at org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:51)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeRow(PanelGridRenderer.java:143)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeStaticBody(PanelGridRenderer.java:107)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeBody(PanelGridRenderer.java:63)
    at org.primefaces.component.panelgrid.PanelGridRenderer.encodeEnd(PanelGridRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

**我想在需要时注入用户值**

# tsql - 两个表在查找后将一列设置为无产品

> ID：15664725
> 
> 赞同：0
> 
> 时间：2013-03-27T16:55:16.757
> 
> 标签：tsql, sql-update, set

我有两个包含多列的表。Product 是其中之一。如果产品不在 table1 上，则使 product='noproduct'。有人可以帮我解决这个问题吗？表 1 列名称、地址、产品 表 2 列产品 如果产品不在表 2 中，则产品='无产品'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:00:21.433

听起来你在谈论左连接。如果答案为空，您可以使用合并表达式返回自定义文本。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms190349.aspx](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:16:13.823

希望这可以帮助 ：

```
update table1 set product  = ISNULL(table2.product , 'no product') from
table1 left join table2 on table1.product  = table2.product 
```

# java - 优化 docx4j 性能

> ID：15664726
> 
> 赞同：1
> 
> 时间：2013-03-27T16:55:21.313
> 
> 标签：java, docx4j

我正在使用 docx4j 2.8.1 替换 word 文件中的文本和徽标。现在我想提高性能，因为大约 50 个文档的处理速度很慢。建议使用哪些选项来提高 docx4j 的性能？

替换字符串（不是徽标）的代码如下所示：

```
 String xml = XmlUtils.marshaltoString(documentPart.getJaxbElement(), true);
 HashMap<String, String> mappings = buildReplaceMap(userData);

 Object obj = XmlUtils.unmarshallFromTemplate(xml, mappings);
 documentPart.setJaxbElement(obj); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:46:00.940

请尝试[http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar](http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar)

它包含一个实验变量替换方法。根据您的问题假设 documentPart 和映射，您可以致电：

```
documentPart.variableReplace(mappings); 
```

您不需要 documentPart.setJaxbElement。

在我对 175 页文档的测试中，处理时间为 1/3 秒（大约快 3 倍）。

任何进一步的性能改进将最容易通过提供更多资源（更多内核，如果您想同时进行）和更多 RAM 来实现。

让我知道你的想法。

# java - Java Jung 将圆的大小设置为其字符串（标签）的宽度

> ID：15664730
> 
> 赞同：2
> 
> 时间：2013-03-27T16:55:29.990
> 
> 标签：java, size, jung, vertices

我开始使用 java jung。由于缺乏好的教程，我遇到了一些问题。我想我需要一些时间来了解它。

那么我的问题是：

我创建了一个带有带有文本（字符串）标签的顶点（圆圈）的网络。我的问题是使圆圈的大小（宽度）适合字符串。

我想动态设置它，但不知道如何遍历顶点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:25:55.190

任何有相同问题的人的解决方案：

```
FontMetrics fm = vv.getFontMetrics(vv.getFont());
int width = fm.stringWidth(i); 
```

vv 是 VisualizationViewer

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:55:20.940

对于`vv`, a `VizualizationViewer`，您可以添加一个`VertexShapeTransformer`。下面的 Scala 代码很容易翻译成 Java。

```
vv.getRenderContext().setVertexShapeTransformer(
new org.apache.commons.collections15.Transformer[String,java.awt.Shape]() {
  def transform(label: String): java.awt.Shape = {
    val width = label.length * 10.0
    val circle = new java.awt.geom.Ellipse2D.Double(-(width/2), -12.5, width, 25);
    circle // return circle
  }
}) 
```

# c# - 如何显示保存对话框

> ID：15664734
> 
> 赞同：1
> 
> 时间：2013-03-27T16:55:40.033
> 
> 标签：c#, asp.net, syncfusion

嗨，我想在我的 asp.net 网页中显示一个保存文件对话框，用户单击一个按钮并出现一个保存文件对话框，允许用户将图表保存在他的硬盘中，我该怎么做？

为了在服务器上保存图表，我使用了

```
string AppPath = Server.MapPath(string.Empty);
DiagramWebControl1.SaveBinary(AppPath + @"\Test.edd"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:15:39.247

你应该在回发按钮事件上做这样的事情：

```
 string filepath = AppPath + @"\Test.edd";
     HttpContext.Current.Response.ContentType = "application/octet-stream";
     HttpContext.Current.Response.AddHeader("Content-Disposition",
              "attachment; filename=" + "Test.edd");
     HttpContext.Current.Response.Clear();
     HttpContext.Current.Response.WriteFile(filepath);
     HttpContext.Current.Response.End(); 
```

# sql-server-2008 - 关闭 SSRS 运行 Procs

> ID：15664743
> 
> 赞同：0
> 
> 时间：2013-03-27T16:56:07.413
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我对 SSRS 很陌生，但我拥有的是一个 proc，它执行一系列将数据加载到工作表中的事件，并根据它加载不同数据的参数。我想将参数传递给 proc，以便运行正确的代码块。然后从工作台上运行报告

我一直在尝试不同的方法来实现这一点，但没有一个奏效。我用我想要传入的值设置了参数，但我不断收到一条错误消息

> “过程 p_TAT_Reports 没有提供参数和参数”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:31:34.513

根据您的需要，有两种方法可以做到这一点。如果您只想执行 proc，然后使用 select 语句跟随它，您可以使用以下格式：

```
exec MyProc @Parameter1, @Parameter2 
```

如果您只想运行 proc 并且它将返回数据集，则可以使用以下格式，但您必须在文本模式下的查询设计器中将命令类型更改为 StoredProcedure：

```
MyProc @Parameter1, @Parameter2 
```

# cakephp - Cakephp 在子目录和超链接中

> ID：15664747
> 
> 赞同：0
> 
> 时间：2013-03-27T16:56:31.553
> 
> 标签：cakephp

我已经在我的域（非根文件夹）中安装了 cakephp，它的工作完美，但我看到它生成所有超链接为 [http://www.mysite.com/mywebsite/anypage]。任何想法如何强制它不生成这样的，而只是指向所需的部分，就好像它在根目录上一样？我相信其他人在过去没有任何运气的情况下问过这个问题，我希望这次能找到解决方案:)

恢复：Index.php 正在生成

```
<a href= directory/page.php> 
```

我想拥有它

```
<a href= page.php> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:19:16.567

使用 html helper 生成 url。$this->webroot 也有帮助 [http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::url](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::url)

# c++ - 反向映射值c ++

> ID：15664749
> 
> 赞同：1
> 
> 时间：2013-03-27T16:56:32.773
> 
> 标签：c++, map, reverse

我创建了一张地图：

```
map<int, int> mapOriginal; 
```

填充数据后，如下所示：

```
mapOriginal[0] = 3;
mapOriginal[1] = 2;
mapOriginal[2] = 1; 
```

而 mapOriginal 输出是：

```
 0->  3
  1->  2
  2->  1 
```

我想创建另一个地图：

```
map<int, int> mapReverse; 
```

但是如何将 mapOriginal 值反转为 mapReverse：

mapReverse 输出将是：

```
 0-> 1
  1-> 2
  2-> 3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:15:04.720

您可以同时向前和向后迭代您的地图：

```
std::map<int, int>::const_iterator forwardIt = mapOriginal.begin();
std::map<int, int>::const_reverse_iterator reverseIt = mapOriginal.rbegin();
for ( ;
    forwardIt != mapOriginal.end() ;
    ++forwardIt, ++reverseIt)
{
    mapReverse[forwardIt->first] = reverseIt->second;
} 
```

然而，这似乎是一种不寻常的地图使用方式。您确定向量不能满足您的需求吗？

```
std::vector<int> vec { 3, 2, 1 };

std::vector<int> reverseVec;
std::reverse_copy(vec.begin(), vec.end(), std::back_inserter(reverseVec));
// or, if you want to reverse in-place:
std::reverse(vec.begin(), vec.end()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:08:36.497

STL 为遍历容器类型的内容提供了迭代器的概念。所有 STL 容器都应该支持迭代器。这种使用反向迭代器的方法应该是最直接的

```
map<int, int> mapOriginal;

mapOriginal[0] = 3;
mapOriginal[1] = 2;
mapOriginal[2] = 1;

map<int, int>reverseMap;

auto reverseIT = mapOriginal.rbegin();

for(auto forwardIT = mapOriginal.begin(); forwardIT != mapOriginal.end(); forwardIT++, reverseIT++)
{
    reverseMap[forwardIT->first] = reverseIT->second;        
} 
```

注意， rbegin() 返回一个指向最后一个元素的迭代器，增加一个反向迭代器会减少它的位置，将它移向容器的开头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:00:37.060

你想要一个 ReverseMap 还是一个有序的地图？如果你想反转一个解决方案是

```
int size=3;
for(int i=0;i<2;i++)
mapReverse(i)=mapOriginal(size-i); 
```

否则，您可以按阵列订购。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:03:17.040

如果您的地图是一对一的（每个唯一键都有一个唯一值），只需像这样迭代：

```
for (auto&& p : initial_map)
    reverse_map[p.second] = p.first; 
```

在一般情况下，可能会构造一个从整数到整数列表的映射，并按如下方式构造它：

```
std::map<int, std::list<int>> reverse_map;
for (auto&& p : initial_map)
    reverse_map[p.second].push_back(p.first); 
```

这假设您有一个 C++11 编译器。您可以将基于范围的 for 循环替换为 C++98/03 的常规 for 循环和迭代器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T17:06:19.527

*   按排序顺序获取您的键列表：（`sorted_keys`大小`n`）
*   对于原始地图中的每个 ( `key`, `value`) 对：
    *   确定`key`'`i`在`sorted_keys`
    *   将键值对插入到新映射中： ( `sorted_keys[n - i - 1]`, `value`)

# ssl - 带有客户端证书的 GlassFish Metro 出站 Web 服务调用失败

> ID：15664751
> 
> 赞同：1
> 
> 时间：2013-03-27T16:56:39.537
> 
> 标签：ssl, glassfish, java-metro-framework, client-certificates

我正在尝试使用带有 Metro JAX-WS 的 GlassFish 3.1.2.2 连接到合作伙伴 Web 服务，但我收到 HTTP 错误 403.7 - 禁止：需要 SSL 客户端证书。

我已将合作伙伴提供的私钥导入 GlassFish 的密钥库：

```
$ keytool -importkeystore -srckeystore XXX.pfx -srcstoretype pkcs12 -destkeystore keystore.jks
$ keytool -changealias -alias "le-75e085d7-0ceb-4734-ac52-0e64646924c8" -destalias "XXX" -keystore keystore.jks
$ keytool -keypasswd -alias XXX -keystore keystore.jks 
```

然后我将 GlassFish 的 domain.xml 中的 httpsOutboundKeyAlias 属性设置为这个新键：

```
$ grep sas domains/dev/config/domain.xml
        <jvm-options>-Dcom.sun.enterprise.security.httpsOutboundKeyAlias=XXX</jvm-options> 
```

然后，当我拨打 WS 电话时：

```
[#|2013-03-26T17:58:30.888-0700|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=137;_ThreadName=Thread-2;|#.: ---[HTTP request - https://XXX]---
Accept: text/xml, multipart/related
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://XXX"
User-Agent: Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown
<?xml version='1.0' encoding='UTF-8'?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Body>[...]</S:Body></S:Envelope>--------------------
|#]

[#|2013-03-26T17:58:31.847-0700|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=137;_ThreadName=Thread-2;|#.: ---[HTTP response - https://XXX - 403]---
null: HTTP/1.1 403 Forbidden
Content-Length: 1913
Content-Type: text/html
Date: Wed, 27 Mar 2013 00:58:31 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
[...]
<h2>HTTP Error 403.7 - Forbidden: SSL client certificate is required.<br>Internet Information Services (IIS)</h2> 
```

我有此配置可用于其他 Web 服务，但由于某种原因不适用于此配置...不确定 IIS 的行为是否不同？

我似乎能够使用 curl 提供使用 openssl 从合作伙伴的 pfx 文件转换而来的 pem 客户端证书来正常连接：

```
$ openssl pkcs12 -in XXX.pfx -out XXX.pem -nodes
$ curl -vk -E XXX.pem -H "Accept: text/xml, multipart/related" -H "Content-Type: text/xml; charset=utf-8" -H "SOAPAction: \"http://XXX\"" -d @req.xml  https://XXX 
```

所以不确定为什么 GlassFish/Metro 没有以预期的方式呈现客户端证书。

关于我可能遗漏的内容或如何排除故障的任何想法/建议？

我尝试设置 -Djavax.net.debug=ssl，但字节在 GlassFish 日志中显示为单独的日志条目，因此非常难以阅读。我还尝试从容器外部的独立 Java 程序运行它，但后来我遇到了[类路径问题](https://stackoverflow.com/questions/7580803/jax-ws-and-version-conflicts)。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:32:55.887

好的，为了后代，以防它在未来对其他人有所帮助：我们将其缩小为 GlassFish 中的一个错误。

我们使用 javax.net.ssl 库使连接正常工作，因此无论出于何种原因，GlassFish 都拒绝向该特定服务器提供配置的 httpsOutboundKeyAlias。不清楚它适用于其他人的具体原因，但从 ssl 日志来看，看起来可能是因为 IIS 服务器为客户端证书提供了一长串接受的 CA？列表可能比预期的要长，或者 GlassFish 在将客户端证书 CA 与提供的列表匹配时遇到问题？如果 GlassFish 开发人员愿意修复此错误，欢迎直接与我联系。

无论如何，与此同时，这是使其工作的代码：

首先，使用提供的客户端证书密钥库创建自定义 SSL 套接字工厂：

```
 KeyStore ebKeyStore = KeyStore.getInstance("PKCS12");
  try (InputStream clientCertKeyInput = new FileInputStream(pfxFilePath)) {
      ebKeyStore.load(clientCertKeyInput, passwdChars);
  }
  KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
  keyManagerFactory.init(ebKeyStore, passwdChars);

  SSLContext sslCtx = SSLContext.getInstance("TLS");
  sslCtx.init(keyManagerFactory.getKeyManagers(), 
              null, // default javax.net.ssl.trustStore
              new SecureRandom());

  sslSocketFactory = sslCtx.getSocketFactory(); 
```

然后通过端口的 RequestContext 中的一个属性让 SOAP 堆栈使用这个 sslSocketFactory：

```
 Map<String, Object> ctxt = ((BindingProvider) port).getRequestContext();
    ctxt.put(JAXWSProperties.SSL_SOCKET_FACTORY, sslSocketFactory); 
```

一线希望是，如果您需要连接到多个出站方，GlassFish 提供客户端证书的这种方法无法扩展，所以现在至少这个解决方案也解决了这个问题。:)

# php - 如何使用递归方法创建 PHP 菜单？

> ID：15664756
> 
> 赞同：0
> 
> 时间：2013-03-27T16:56:51.810
> 
> 标签：php, list, recursion, foreach

我正在创建一个显示年份和问题编号的递归菜单。不知何故，它只是为每个数组元素打印一次。

这就是我需要的： **请选择一年 -> 2013 -> Issue#1, Issue# 2, Issue# 3, Issue# 4**。

我得到的是： **请选择一年 -> 2013 ->问题#1**

到目前为止，这是我的代码：

```
<?php
echo "<div id='cssmenu'>";
echo "<ul>";
echo "<li class='has-sub'><a href='#'><span>Please select a Year</span></a>";
echo "<ul>";
$dir = new DirectoryIterator('/usr/apps/webdata/backend/assets/newsletters/temp');
$list = array();
foreach($dir as $file)
{
    if ($file->isDot()) {
        continue;
    }

    $string = $file;
    if (preg_match_all("#(\d{1,})#", $string, $matches, PREG_SET_ORDER)) {
        foreach($matches as $match)
        {
            $issue = $match[0];

            while (list($key, $value) = each($match)) {
                //YEAR
                if (strlen($value) == 4) {
                    $uyear = $value;
                    //echo "Year: $uyear \n";
                }
                // ISSUE#
                elseif (strlen($value) == 1) {
                    $uissue = $value;
                    //echo "Issue: $uissue \n";
                }
            }
        }
    }

    if (!isset($list[$uyear])) {
        $list[$uyear] = array();
        echo "<li class='has-sub'><a href='#'><span>" . $uyear . " </span></a>";
        echo "<ul>";
    }

    if (!in_array($uissue, $list[$uyear])) {
        $list[$uyear][] = $uissue;
        $a = count($uissue);
        for ($i=0; $i<$a; $i++) {
            echo " <a class=fancypdf href='#' onclick=myPDF('".$file."')> Issue# ".$uissue."   </a>";
            echo "</li>";
        }
        echo "</ul>";
        echo "</li>";
    }
}

echo "</ul>";
echo "</ul>";
echo "</ul>";
echo "</div>";
////IM USING THIS PRINT JUST TO VERIFY IF THE FUNCTIONS GOES THROUGH ALL THE ELEMENTS
print_r($list);
?> 
```

***更新*** 我能够找到问题；我的递归函数不正确，这就是它只打印第一个元素的原因。但是，我不知道如何实际打印第二个元素。

```
$a = count($uissue);
for($i=0;$i<$a; $i++)
{
    echo " <a class=fancypdf href='#' onclick=myPDF('".$file."')> Issue# ".$uissue."   </a>";
    echo "</li>";
} 
```

可能使用 For-Each 函数？我仍在努力解决这个问题。

# c# - 相同的方法在本机代码中有不同的入口地址？

> ID：15664758
> 
> 赞同：1
> 
> 时间：2013-03-27T16:56:57.717
> 
> 标签：c#, .net, assembly, jit

我在 .NET 4.5 中编写了以下 C#：

```
public struct DisposableStruct : IDisposable {
    private readonly int _i, _j;

    public DisposableStruct(int i, int j) {
        _i = i;
        _j = j;
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    void IDisposable.Dispose() {
        Console.WriteLine(_i + _j);
    }
}

internal class Program {

    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    private static void Dispose<T>(ref T obj) where T : IDisposab
        obj.Dispose();
    }

    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    private static void Dispose<T>(T obj) where T : IDisposable {
        obj.Dispose();
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    private static void Test() {
        var ds = new DisposableStruct(1, 2);
        Dispose(ref ds);
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    private static void TestNoRef() {
        var ds = new DisposableStruct(1, 2);
        Dispose(ds);
    }

    private static unsafe void Main() {
        Test();
        TestNoRef();

        Console.WriteLine(Process.GetCurrentProcess().Id);
        Console.ReadLine();
    }
} 
```

暂停后我用打印的进程ID转储内存，但发现了一些奇怪的东西。这是本机代码`Test`：

```
0:000> !u 000007fd85c30120 
Normal JIT generated code
SimpleConsole.Program.Test()
Begin 000007fd85c30120, size 40
*** WARNING: Unable to verify checksum for SimpleConsole.exe

c:\projects\SimpleConsole\SimpleConsole\Program.cs @ 40:
>>> 000007fd`85c30120 4883ec38        sub     rsp,38h
000007fd`85c30124 48c744242800000000 mov   qword ptr [rsp+28h],0
000007fd`85c3012d 48c744242000000000 mov   qword ptr [rsp+20h],0
000007fd`85c30136 488d442420      lea     rax,[rsp+20h]
000007fd`85c3013b 488d4c2428      lea     rcx,[rsp+28h]
000007fd`85c30140 c70001000000    mov     dword ptr [rax],1
000007fd`85c30146 c7400402000000  mov     dword ptr [rax+4],2
000007fd`85c3014d 488b442420      mov     rax,qword ptr [rsp+20h]
000007fd`85c30152 488901          mov     qword ptr [rcx],rax
000007fd`85c30155 e83ebfeeff      call    000007fd`85b1c098 (SimpleConsole.DisposableStruct.System.IDisposable.Dispose(), mdToken: 0000000006000017)
000007fd`85c3015a 90              nop
000007fd`85c3015b 4883c438        add     rsp,38h
000007fd`85c3015f c3              ret 
```

这是方法的本机代码`TestNoRef`：

```
0:000> !u 000007fd85c301b0 
Normal JIT generated code
SimpleConsole.Program.TestNoRef()
Begin 000007fd85c301b0, size 42

c:\projects\SimpleConsole\SimpleConsole\Program.cs @ 46:
>>> 000007fd`85c301b0 4883ec38        sub     rsp,38h
000007fd`85c301b4 48c744242800000000 mov   qword ptr [rsp+28h],0
000007fd`85c301bd 48c744242000000000 mov   qword ptr [rsp+20h],0
000007fd`85c301c6 488d442428      lea     rax,[rsp+28h]
000007fd`85c301cb c70001000000    mov     dword ptr [rax],1
000007fd`85c301d1 c7400402000000  mov     dword ptr [rax+4],2

c:\projects\SimpleConsole\SimpleConsole\Program.cs @ 47:
000007fd`85c301d8 488b442428      mov     rax,qword ptr [rsp+28h]
000007fd`85c301dd 4889442420      mov     qword ptr [rsp+20h],rax
000007fd`85c301e2 488d4c2420      lea     rcx,[rsp+20h]
000007fd`85c301e7 e894ffffff      call    000007fd`85c30180 (SimpleConsole.DisposableStruct.System.IDisposable.Dispose(), mdToken: 0000000006000017)
000007fd`85c301ec 90              nop
000007fd`85c301ed 4883c438        add     rsp,38h
000007fd`85c301f1 c3              ret 
```

我们可以很容易地发现相同的入口地址`Dispose`是不同的：

*   测试：`000007fd 85b1c098`
*   测试编号：`000007fd 85c30180`

但只有地址`TestNoRef`是正确的：

```
0:000> !u 000007fd`85c30180
Normal JIT generated code
SimpleConsole.DisposableStruct.System.IDisposable.Dispose()
Begin 000007fd85c30180, size 19

c:\projects\SimpleConsole\SimpleConsole\Program.cs @ 22:
>>> 000007fd`85c30180 4883ec28        sub     rsp,28h
000007fd`85c30184 488bc1          mov     rax,rcx
000007fd`85c30187 8b08            mov     ecx,dword ptr [rax]
000007fd`85c30189 8b4004          mov     eax,dword ptr [rax+4]
000007fd`85c3018c 03c8            add     ecx,eax
000007fd`85c3018e e85d8dda5e      call    mscorlib_ni+0xce8ef0 (000007fd`e49d8ef0) (System.Console.WriteLine(Int32), mdToken: 000000000600098d)
000007fd`85c30193 90              nop
000007fd`85c30194 4883c428        add     rsp,28h
000007fd`85c30198 c3              ret 
```

但是里面的那个是什么`Test`？

```
0:000> !u 000007fd`85b1c098
Unmanaged code
000007fd`85b1c098 e89360765f      call    clr+0x2130 (000007fd`e5282130)
000007fd`85b1c09d 5e              pop     rsi
000007fd`85b1c09e 05009048b1      add     eax,0B1489000h
000007fd`85b1c0a3 85fd            test    ebp,edi
000007fd`85b1c0a5 07              ???
000007fd`85b1c0a6 0000            add     byte ptr [rax],al
000007fd`85b1c0a8 0000            add     byte ptr [rax],al
000007fd`85b1c0aa 0000            add     byte ptr [rax],al
000007fd`85b1c0ac 0000            add     byte ptr [rax],al
000007fd`85b1c0ae 0000            add     byte ptr [rax],al 
```

程序的结果显然是正确的，但是本机代码对`Test`方法的表现如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:24:12.973

这个不同`000007fd 85b1c098`的地址实际上是 Jit 存根代码的地址，因为方法`SimpleConsole.DisposableStruct.System.IDisposable.Dispose()`之前没有经过 Jit 编译`Test`。存根代码在第一次调用时调用 Jit 编译器，并在编译后修补自身以调用已编译的方法。

这里的一些信息：[http ://codeidol.com/csharp/net-framework/Inside-the-CLR/Just-In-Time-(JIT)-Compilation/](http://codeidol.com/csharp/net-framework/Inside-the-CLR/Just-In-Time-(JIT)-Compilation/)

# javascript - JQuery：如何为元素分配字体

> ID：15664759
> 
> 赞同：9
> 
> 时间：2013-03-27T16:56:59.697
> 
> 标签：javascript, jquery, css, fonts

是否可以在 jQuery 中检索元素的指定字体？

假设有css：

```
#element
{
font-family: blahblah,Arial;
} 
```

在上面的示例中，Arial 字体将分配给#element。有没有办法通过 JS/JQuery 获取这些信息？

就像是：

```
$('#element').css('font-family'); 
```

只返回`blahblah,Arial;`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T17:32:50.140

```
(function($) {
    $.fn.detectFont = function() {
        var fonts = $(this).css('font-family').split(",");
        if ( fonts.length == 1 )
            return fonts[0];

        var element = $(this);
        var detectedFont = null;
        fonts.forEach( function( font ) {
            var clone = element.clone().css({'visibility': 'hidden', 'font-family': font}).appendTo('body');
            if ( element.width() == clone.width() )
                detectedFont = font;
            clone.remove();
        });

       return detectedFont;
    }
})(jQuery); 
```

**编辑**：必须从 dom 中删除克隆的项目。

刚才又把它搞定了，它仍然依赖于元素宽度——所以你的里程可能会有所不同。

`$('#element').detectFont(); //outputs Arial`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T17:24:08.953

您可以使用 Detector 库来做到这一点：[http ://www.lalit.org/lab/javascript-css-font-detect/](http://www.lalit.org/lab/javascript-css-font-detect/)

当浏览器从列表中获取第一个找到的字体时，您应该查看字体列表并尝试检查您的系统中是否有此字体。

这是 JS/JQuery 代码：

```
$(function() {
    var detectFont = function(fonts) {
        var detective = new Detector(), i;
        for (i = 0; i < fonts.length; ++i) {
           if (detective.detect(fonts[i]) !== true) {
               continue
           }
           return fonts[i];
        }    
    }
    var fonts = $('#abcde').css('font-family');
    fonts = fonts.split(',');
    console.log(detectFont(fonts));
}); 
```

这是现场演示，我已经准备好了：http: [//jsfiddle.net/netme/pr7qb/1/](http://jsfiddle.net/netme/pr7qb/1/)

希望，这种方法会对你有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-08T09:53:44.677

修改了 kmfk 的答案，使其适用于所有元素。块元素具有固定或动态宽度将不起作用，因此使用内联元素：

```
/**
 * Detects the font of an element from the font-family css attribute by comparing the font widths on the element
 * @link http://stackoverflow.com/questions/15664759/jquery-how-to-get-assigned-font-to-element
 */
(function($) {
    $.fn.detectFont = function() {
        var fontfamily = $(this).css('font-family');
        var fonts = fontfamily.split(',');
        if ( fonts.length == 1 )
            return fonts[0];

        var element = $(this);
        var detectedFont = null;
        fonts.forEach( function( font ) {
            var clone = $('<span>wwwwwwwwwwwwwwwlllllllliiiiii</span>').css({'font-family': fontfamily, 'font-size':'70px', 'display':'inline', 'visibility':'hidden'}).appendTo('body');
            var dummy = $('<span>wwwwwwwwwwwwwwwlllllllliiiiii</span>').css({'font-family': font, 'font-size':'70px', 'display':'inline', 'visibility':'hidden'}).appendTo('body');
            //console.log(clone, dummy, fonts, font, clone.width(), dummy.width());
            if ( clone.width() == dummy.width() )
                detectedFont = font;
            clone.remove();
            dummy.remove();
        });

       return detectedFont;
    }
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-03-27T19:05:32.500

```
$('#element').css("font-family", "Arial"); 
```

尝试这个。

# lua - 在 lua 中测量经过的时间 (+love2D)

> ID：15664760
> 
> 赞同：3
> 
> 时间：2013-03-27T16:57:03.573
> 
> 标签：lua, love2d

我正在尝试使用 os.time() 函数测量我的代码执行时间并使用 LOVE 框架显示它。但是，令我惊讶的是，显示的时间正在改变......我的代码是：

```
function foo()
    start_time = os.time()
        <some code>
    end_time = os.time()
    elapsed_time = os.difftime(end_time-start_time)
    love.graphics.print('start time: '   .. start_time .. 's', 12, 12)
    love.graphics.print('end time: '     .. end_time .. 's', 12, 22)
    love.graphics.print('time elapsed: ' .. elapsed_time .. 's', 12, 32)
end 
```

当我在打开图形的情况下离开窗口时，时间正在变化（开始和结束增长，并且差异在 1 和 2 之间变化） - 所以第一个问题是，如果 os.time() 返回一个数字，这将如何发生。而且 - 这是衡量我的应用程序执行时间的好方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:23:05.120

`start`并且`end`应该一直在增长，除非时间停止，在这种情况下，我们都有麻烦了。

它们之间的增量将`<some code>`根据执行所需的时间而变化。

`os.time`通常从过去的某个任意时间点返回秒数（通常是 1/1/1970 00:00:00）。这是不能保证的（它是根据 C 的`time`函数实现的[，它没有做出这样的保证](http://www.cplusplus.com/reference/ctime/time/)）。但它绝对应该一直在推进，或者它并没有真正给你时间，对吧？

* * *

顺便说一句，你用`difftime`错了。您应该将两个值传递给它，它会为您提供它们之间的差异。您正在传递一个值。它*应该*对此嗤之以鼻，但它似乎正在返回第一个值，在你的情况下它意外地起作用，因为你碰巧在一台`difftime`实际上是 t2-t1 的机器上。在其他系统上，这可能会中断。您应该将调用更改为：

```
elapsed_time = os.difftime(end_time,start_time) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T18:39:43.543

```
function foo()
    start_time = os.time()
        <some code>
    end_time = os.time()
    elapsed_time = os.difftime(end_time, start_time)
    love.graphics.print('start time: '   .. start_time .. 's', 12, 12)
    love.graphics.print('end time: '     .. end_time .. 's', 12, 22)
    love.graphics.print('time elapsed: ' .. elapsed_time .. 's', 12, 32)
end 
```

一、有关资料[`os.time()`](http://www.lua.org/manual/5.2/manual.html#pdf-os.time)

> 返回值是一个数字，其含义取决于您的系统。在 POSIX、Windows 和其他一些系统中，**此数字计算自给定开始时间（“纪元”）以来的秒数**。在其他系统中，没有指定含义，时间返回的数字只能用作日期和差异时间的参数。

逐步迭代：

1.  `start_time`将时间存储为数字。
2.  您的代码执行需要一些时间。
3.  `end_time`现在存储时间的数值。它将是一个大于或等于 的数字`start_time`。
4.  时间差是通过`os.difftime()`调用计算的（[这在语法上是错误的](http://www.lua.org/manual/5.2/manual.html#pdf-os.difftime)）。

* * *

`start`和的值`end`将随着您的系统自 epoch 以来向未来发展一点点而随着每次迭代而改变。此外， 的值`elapsed_time`被报告为 1 或 2 秒，这是您的代码执行自身所花费的时间。

* * *

您也可以使用 Lua[`os.clock()`](http://www.lua.org/manual/5.2/manual.html#pdf-os.clock)返回执行代码所花费的时间（以秒为单位）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-16T22:10:00.253

试试[love.timer.getTime](https://love2d.org/wiki/love.timer.getTime)，它从 0.9.0 开始返回微秒精度的时间。该链接有一个如何计时的例子。

相对时间可以（减去比较）。如果您想要更多绝对时间，请尝试以下操作：

```
do
    local _getTime = love.timer.getTime
    local initialTime = _getTime()

    function appTime()
        return _getTime() - initialTime
    end
end 
```

# regex - 从两种类型的列表中提取 URL

> ID：15664773
> 
> 赞同：0
> 
> 时间：2013-03-27T16:57:49.390
> 
> 标签：regex, linux, shell, grep

我必须从两种类型的列表中提取一个特殊的 URL。

**wav_list_01.txt：**

```
http://www.example.com/3277rdsh6721vs2981fg66_453.wav?ID=8572145"
http://www.example.com/3277rdsh6721vs2981fg66_1234.wav?ID=8572145"
http://www.example.com/3277rdsh6721vs2981fg66_89.wav?ID=8572145"
http://www.example.com/3277rdsh6721vs2981fg66_356.wav?ID=8572145" 
```

在这种类型的列表中，正确的 URL 始终是下划线后有 4 位数字的 URL：

```
http://www.example.com/3277rdsh6721vs2981fg66_1234.wav?ID=8572145" 
```

我可以使用以下 grep 命令完成此操作：

```
grep -o 'http[^"]*_[0-9]\{4\}.wav?ID=[0-9]\{1,\}' wav_list_01.txt 
```

现在来解决问题。我还必须从另一种类型的列表中提取一个特殊的 URL。

**wav_list_02.txt：**

```
http://www.example.com/83d72jd72bnx27887f2s34_9.wav?ID=0942145"
http://www.example.com/83d72jd72bnx27887f2s34.wav?ID=0942145"
http://www.example.com/83d72jd72bnx27887f2s34_5.wav?ID=0942145" 
```

在这种类型的列表中，正确的 URL 始终是*没有*下划线和单个数字的 URL：

```
http://www.example.com/83d72jd72bnx27887f2s34.wav?ID=0942145" 
```

有什么方法可以修改上述 grep 命令以与 wav_list_02.txt 一起使用？如果不是，在同一脚本中处理两个列表的下一个最佳解决方案是什么？

该脚本将在 dash shell 中运行，因此该解决方案需要符合 POSIX，最好也是干净和简单的。

提前致谢。

**解决方案：**

在 Thalmann 的帮助下，找到了解决方案：

```
grep -o 'http[^"]*_[0-9]\{4\}.wav?ID=[0-9]\{1,\}\|\|http[^_]*?ID=[0-9]\{1,\}' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:15:07.600

您可以只使用 not 运算符 '^' 并说它可以是所有内容，但不能是下划线 - 如果匹配你有你的 URL - 它类似于 '[^_]*' 所有不是下划线的东西。

在 grep 命令上方使用“或”运算符插入它，它会同时使用四位数字的文件，如果它们不包含下划线。记得像这样转义 or 运算符：'\|'

# .net - Metro 应用程序字形图标自定义大小

> ID：15664774
> 
> 赞同：0
> 
> 时间：2013-03-27T16:57:51.310
> 
> 标签：.net, button, microsoft-metro, winrt-xaml, appbar

如何覆盖我定义`AppBarButtonStyle` `Width/Height`的自`Button`定义？

是否可以在除 之外的控件中表示**Segoe UI 字体符号**`Button`？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:16:04.467

您可以简单地创建一个`TextBlock`并将其设置`FontFamily`为*Segoe UI Symbol*并将文本设置为您想要显示的字形代码，您可以在字符映射应用程序中找到，例如`Text="&#xE101;"`. 然后更改`TextBlock`您想要的任何其他属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:38:38.197

您甚至可以在这样的代码中执行此操作， `textblock1.Text = ((char)0xE101).ToString();`并将字体系列指定为 Segoe UI Symbol

# sql-server - SQL Azure - 确定联合了哪些表

> ID：15664776
> 
> 赞同：2
> 
> 时间：2013-03-27T16:57:57.923
> 
> 标签：sql-server, visual-studio-2012, azure-sql-database, federated-table

我是 SQL Azure 的新手，并且处于开发应用程序的早期阶段，因此我的架构经常更改。我首先创建了根数据库并像这样对它执行查询

```
CREATE TABLE [dbo].[Clients] (
    [ClientId]    UNIQUEIDENTIFIER NOT NULL primary key clustered default newid(),
    [ClientName]  NVARCHAR (MAX)   NULL
);

go

create federation ClientFederation(cid uniqueidentifier range)
 go

use federation ClientFederation(cid='00000000-0000-0000-0000-000000000000') WITH RESET, FILTERING=OFF
 go

CREATE TABLE [dbo].[Stuff] (
    [StuffId]   uniqueidentifier not null default newid(),
    [ClientId] UNIQUEIDENTIFIER NOT NULL default federation_filtering_value('cid'),
    [StuffName] NVARCHAR (50)    NOT NULL,
    -- bunch (20+) of other fields
    primary key clustered (StuffId, ClientId ASC)
) FEDERATED ON (cid=ClientId); 
```

这在大多数情况下效果很好。`Stuff`只是联邦中许多类似表中的一个表（也不是真名）

好吧，就像我说的那样，我的架构变化非常频繁，所以要更改架构，我连接到 VS2012 中的联邦成员并右键单击表并选择“查看代码”，呈现如下内容：

```
CREATE TABLE [dbo].[Stuff] (
    [StuffId]   uniqueidentifier not null default newid(),
    [ClientId] UNIQUEIDENTIFIER NOT NULL default federation_filtering_value('cid'),
    [StuffName] NVARCHAR (50)    NOT NULL,
    -- bunch (20+) of other fields
    primary key clustered (StuffId, ClientId ASC)
) 
```

请注意，唯一不同的是，在右括号之后，它不再显示`FEDERATED ON (cid=ClientId);`. 我认为这是因为我已经连接到特定的联盟成员，所以它已经知道该信息。奇怪的部分是当我试图针对它运行一些 .net 代码时。我将从我的应用程序中执行以下代码：

```
cn.Execute(string.Format("USE FEDERATION {0}({1}='{2}') WITH RESET, FILTERING={3}", federationName, distributionName, key, filtered ? "ON" : "OFF")); 
```

然后使用小巧玲珑：

```
cn.Query("INSERT Stuff(StuffId, StuffName) VALUES (@StuffId, @stuffName); SELECT * FROM Stuff WHERE StuffId=@stuffId", p); // p has the parameters 
```

但随后我会收到以下错误消息：

```
DML statements are not supported on non-federated tables in a filtered connection. 
```

呜？我的表是联合的，记得吗？此外，类似的代码在其他表中也能很好地工作。奇怪的`Stuff`是它的架构最近发生了很多变化，所以在我看来，也许我直接在 VS2012 中连接到联合成员并在那里进行更改以某种方式使其不再是联合表（有 3 种类型的表联合数据库：[http](http://convective.wordpress.com/2012/03/05/introduction-to-sql-azure-federations/) ://convective.wordpress.com/2012/03/05/introduction-to-sql-azure-federations/ ）。

因此，由于我处于开发的早期阶段，`Stuff`因此我继续复制其 CREATE TABLE 代码并将其完全从该成员中删除，返回根数据库并重新执行列出的代码在顶部再次声明*该`FEDERATED ON (ClientId=cid)`*语句，然后从我的应用程序重新运行插入语句，它工作得非常好！

因此，显然发生了一些事情，使我的表不再“联合”。最后我的问题很简单：

*   是否有可以在根数据库或联合成员上运行的查询来告诉我哪些表是联合的，哪些不是？
*   另外，谁能告诉我为什么我曾经联合的表不再联合？因为很明显，我可能会在遥远的将来进行架构更改，并且不能只是删除表并重新开始，所以很高兴知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:45:42.937

1 您可以查看`sys.federated_table_columns`以了解哪些表在成员中是联合的。

2 我的猜测是您正在丢失该属性，因为 VS 正在重新创建没有 federated on 子句的表。不幸的是，vs 没有完全集成到 SQLazure 中，所以你需要注意这些场景。否则，没有理由丢失或更改表的联合属性。您可以更改联合表上的所有其他属性，例如发展您的模式等，但是您可以创建联合表并保持这种方式，或者将其创建为参考表并保持这种方式。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:52:30.697

Tsql 是编辑模式的最安全选择。只需在喂食的桌子上使用好旧的 alter table。没什么特别的。模式在根和成员之间不以任何方式共享，因此所有模式对象都是数据库的本地对象。因此，在您需要它们、根或成员的地方编辑创建/编辑对象。当您拆分时，您正在创建更多成员，系统将克隆模式并正确移动数据等，但是一旦拆分完成，每个成员都会再次独立于模式更改......因此，出于所有实际目的，这些都是单独的数据库只是被组合在一起。用于工具、门户或 ssms 的作品。只要您记得在对成员进行操作之前使用 USE FED 将游览连接导航到正确的数据库，任何 tsql 编辑器都可以工作。您还可以使用数据库名称连接到成员并跳过使用 fed 但不太方便。

# api - ember-data REST 服务器 API 应该返回什么？

> ID：15664781
> 
> 赞同：2
> 
> 时间：2013-03-27T16:58:10.207
> 
> 标签：api, http, rest, ember.js, ember-data

我在某些路线上遇到了奇怪的更新错误，所以我只是想确定这不是这个级别的基本问题。

目前我这样做：

```
Create   POST       /plural        201    {"singular": {"id":"1", ...}} 
FindAll  GET        /plural        200    {"plural": [{"id":"1",... },{"id":"2", ...    
Find     GET        /plural/1      200    {"singular": {"id":"1", ...}} 
Update   PUT/PATCH  /plural/1      200    {"singular": {"id":"1", ...}} 
Delete   DELETE     /plural/1      200    (empty) 
```

我提供 404 或 400 取决于路线是否看起来不错。

就您所见，这是规范吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-28T10:55:33.117

您应该为您的案例使用正确的 http 状态代码。[这个页面](http://racksburg.com/choosing-an-http-status-code/)有很好的解释。

404：如果路径（例如/复数）不可用。

422：如果请求错误。 [Ember 数据指南](http://emberjs.com/api/data/classes/DS.Errors.html)说它与 422 配合得很好。同时在[这个站点](http://emberjs.com/blog/2015/06/18/ember-data-1-13-released.html)中搜索 422 。

204 No Content：如果没有返回数据。（如删除。）

此外，如果您想要检查[JSON API Specs](http://jsonapi.org/format/#error-objects)：

# android - Android 保存绘图 /

> ID：15664782
> 
> 赞同：0
> 
> 时间：2013-03-27T16:58:13.560
> 
> 标签：android, image, save, drawing2d

API Demos 中有一个名为 FingerPaint 的绘图示例。

```
package com.example.android.apis.graphics;

import android.content.Context;
import android.graphics.*;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;

public class FingerPaint extends GraphicsActivity
        implements ColorPickerDialog.OnColorChangedListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new MyView(this));

        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFF0000);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);

        mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                       0.4f, 6, 3.5f);

        mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
    }

    private Paint       mPaint;
    private MaskFilter  mEmboss;
    private MaskFilter  mBlur;

    public void colorChanged(int color) {
        mPaint.setColor(color);
    }

    public class MyView extends View {

        private static final float MINP = 0.25f;
        private static final float MAXP = 0.75f;

        private Bitmap  mBitmap;
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;

        public MyView(Context c) {
            super(c);

            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            canvas.drawColor(0xFFAAAAAA);

            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

            canvas.drawPath(mPath, mPaint);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }
    }

    private static final int COLOR_MENU_ID = Menu.FIRST;
    private static final int EMBOSS_MENU_ID = Menu.FIRST + 1;
    private static final int BLUR_MENU_ID = Menu.FIRST + 2;
    private static final int ERASE_MENU_ID = Menu.FIRST + 3;
    private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
        menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
        menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
        menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
        menu.add(0, SRCATOP_MENU_ID, 0, "SrcATop").setShortcut('5', 'z');

        /****   Is this the mechanism to extend with filter effects?
        Intent intent = new Intent(null, getIntent().getData());
        intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
        menu.addIntentOptions(
                              Menu.ALTERNATIVE, 0,
                              new ComponentName(this, NotesList.class),
                              null, intent, 0, null);
        *****/
        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        mPaint.setXfermode(null);
        mPaint.setAlpha(0xFF);

        switch (item.getItemId()) {
            case COLOR_MENU_ID:
                new ColorPickerDialog(this, this, mPaint.getColor()).show();
                return true;
            case EMBOSS_MENU_ID:
                if (mPaint.getMaskFilter() != mEmboss) {
                    mPaint.setMaskFilter(mEmboss);
                } else {
                    mPaint.setMaskFilter(null);
                }
                return true;
            case BLUR_MENU_ID:
                if (mPaint.getMaskFilter() != mBlur) {
                    mPaint.setMaskFilter(mBlur);
                } else {
                    mPaint.setMaskFilter(null);
                }
                return true;
            case ERASE_MENU_ID:
                mPaint.setXfermode(new PorterDuffXfermode(
                                                        PorterDuff.Mode.CLEAR));
                return true;
            case SRCATOP_MENU_ID:
                mPaint.setXfermode(new PorterDuffXfermode(
                                                    PorterDuff.Mode.SRC_ATOP));
                mPaint.setAlpha(0x80);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

我想将绘图作为图像（例如 png 文件）保存到手机中。我添加了这段代码：

```
 case SAVE_MENU_ID:
        String filename = "signature.png";
        getWindow().getDecorView().getRootView()
                .setDrawingCacheEnabled(true);
        Bitmap b = getWindow().getDecorView().getRootView()
                .getDrawingCache();

        OutputStream stream = null;
        try {
            stream = new FileOutputStream("/sdcard/signature.png");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        /*
         * Write bitmap to file using JPEG or PNG and 80% quality hint for
         * JPEG.
         */
        // bitmap.compress(CompressFormat.PNG, 80, stream);
        try {
            stream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

图像 signature.png 正在保存到手机中，但大小为 0 字节。我已添加到我的清单中。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:30:50.650

不应该

```
 stream = new FileOutputStream(file);

              than

      stream = new FileOutputStream("/sdcard/signature.png");  

      FileOutputStream(File file)
      Constructs a new FileOutputStream that writes to file. 
```

[http://developer.android.com/reference/java/io/FileOutputStream.html](http://developer.android.com/reference/java/io/FileOutputStream.html)。

也取消注释下面

```
 bitmap.compress(CompressFormat.PNG, 80, stream); 
```

您可以使用警报对话框来允许用户为正在保存的抽奖命名。

一旦用户输入名称并单击“确定”，您就可以将抽奖以该名称保存在您的 sdcard 中。

在我的代码内容中是rootview；

```
 case SAVE_MENU_ID:

                AlertDialog.Builder editalert = new AlertDialog.Builder(DrawingRoomScreen.this);
                editalert.setTitle("Please Enter the name with which you want to Save");
                final EditText input = new EditText(DrawingRoomScreen.this);
                LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.FILL_PARENT,
                        LinearLayout.LayoutParams.FILL_PARENT);
                input.setLayoutParams(lp);
                editalert.setView(input);
                editalert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        content.setDrawingCacheEnabled(true);
                        String name= input.getText().toString();
                        Bitmap bitmap = content.getDrawingCache();

                     String path = Environment.getExternalStorageDirectory().getAbsolutePath(); 
                        File file = new File("/sdcard/"+name+".png");           
                        try 
                        {
                            if(!file.exists())
                        {
                            file.createNewFile();
                        }
                            FileOutputStream ostream = new FileOutputStream(file);
                            bitmap.compress(CompressFormat.PNG, 10, ostream);
                            System.out.println("saving......................................................"+path);
                            ostream.close();
                            content.invalidate();                           
                        } 
                        catch (Exception e) 
                        {
                            e.printStackTrace();
                        }finally
                        {

                            content.setDrawingCacheEnabled(false);                          
                        }
                    }
                });

                editalert.show();

   break; 
```

# c# - 在带有值和文本的组合框中添加更多组合框项

> ID：15664785
> 
> 赞同：0
> 
> 时间：2013-03-27T16:58:18.077
> 
> 标签：c#, combobox

我创建了一个名为 ComboBoxitem 的自己的类，它有两个道具：值和文本。

```
public class ComboBoxItem
{
    public string Value;

    public string Text;

    public ComboBoxItem(string val, string text)
    {

        Value = val;

        Text = text;
    }
    public override string ToString()
    {
        return Text;
    }

} 
```

现在我想每次都向组合框项添加一个值和一个文本

像这样的东西：

```
public ComboBoxItem busstops;

        private void Form1_Load(object sender, EventArgs e)
        {
            lblText.Text = "Timetable Bushours for " + "New Bridge Street-St Dominics";

            busstops = new ComboBoxItem("410000015503", "New Bridge Street-St Dominics");
            busstops = new ComboBoxItem("410000015552", "Bothal Street (N-Bound), Byker ");

        /*    comboBox1.Items.Add(new ComboBoxItem ("410000015503", "New Bridge Street-St Dominics"));
            comboBox1.Items.Add(new ComboBoxItem("410000015552", "Bothal Street (N-Bound), Byker "));*/

            comboBox1.Items.Add(busstops);
        } 
```

但问题是只添加了最后一项（正常，因为我总是说新的 ComboboxItem）但是如何更改他总是可以添加新的组合框项的代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:00:01.473

两个 ComboBox 项都是不同的对象，因此您需要两个 ComboBox 变量来存储它们。

```
 busstops1 = new ComboBoxItem("410000015503", "New Bridge Street-St Dominics");
 busstops2 = new ComboBoxItem("410000015552", "Bothal Street (N-Bound), Byker ");

 comboBox1.Items.Add(busstops1);
 comboBox1.Items.Add(busstops2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:01:02.890

`comboBox1.Items`每次更新`busstops`实例 时将其添加到。

```
 private void Form1_Load(object sender, EventArgs e)
        {
            lblText.Text = "Timetable Bushours for " + "New Bridge Street-St Dominics";

            busstops = new ComboBoxItem("410000015503", "New Bridge Street-St Dominics");
            comboBox1.Items.Add(busstops);

            busstops = new ComboBoxItem("410000015552", "Bothal Street (N-Bound), Byker ");
            comboBox1.Items.Add(busstops);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:01:07.663

您应该在每次分配后添加。

```
 busstops = new ComboBoxItem("410000015503", "New Bridge Street-St Dominics");

        comboBox1.Items.Add(busstops); // Add this line

        busstops = new ComboBoxItem("410000015552", "Bothal Street (N-Bound), Byker ");
        comboBox1.Items.Add(busstops); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:01:43.280

制作一个 ComboBoxItems 列表，将项目添加到列表中，并将 comboBox1 的 DataSource 设置为列表：

```
 List<ComboBoxItem> Items = new List<ComboBoxItem>();
    comboBox1.DataSource = Items; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T17:02:05.483

```
 private void Form1_Load(object sender, EventArgs e)
    {
        lblText.Text = "Timetable Bushours for " + "New Bridge Street-St Dominics";

        busstops = new ComboBoxItem("410000015503", "New Bridge Street-St Dominics");
        comboBox1.Items.Add(busstops);//add this line here

        busstops = new ComboBoxItem("410000015552", "Bothal Street (N-Bound), Byker ");
        comboBox1.Items.Add(busstops);//and again here
    } 
```

由于您要添加相同的值，因此每次更改时都必须添加该值。通过声明`new`，您实际上是在替换和覆盖旧值。

# java - 从数组列表中获取对象

> ID：15664786
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:58:20.520
> 
> 标签：java, arrays, list, jakarta-ee, data-structures

我有一个对象数组列表，例如

```
 List arr has 
 object[0]
 object[1]
 .
 .
 .
 object[n] 
```

其中每个对象数组有四个元素，如

对象[0] 有 1,2,a,4

如何获取列表的第一个数组的第一个元素？

我想从上面的例子中检索“1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:00:03.667

> 如何获取列表的第一个数组的第一个元素？

```
 list.get(0)[0]; 
```

`list.get(0)`将在列表中的第零个索引处获取数组。即，`Object[]`数组，您在第零索引处访问数组的第一个元素。

```
List<Object[]> arr = new ArrayList<>();
arr.add(new Object[] {1,2,'a', 4});
System.out.println(arr.get(0)[0]); 
```

产生 1 作为输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:01:44.203

首先，用`get`方法获取列表的第一个元素。假设`arr`没有使用泛型声明，将其转换为`Object[]`（对象数组），因为它是一个对象数组。然后使用数组语法从数组中获取第一个元素。

```
Object desired = ((Object[]) arr.get(0))[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:01:17.997

尝试：

```
List<Object[]> list = //filled in somewhere

if(list.size() > 0) {
    if(list.get(0).length > 0) {
        System.out.prinln(list.get(0)[0].toString());
    }
} 
```

我假设 Object[] 数组包含数字和字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:00:10.273

您可以将第一个元素转换为这样的数组：

```
 String[] arr1 = (String[]) object[0]; 
```

然后使用 arr1 从 arr1 中提取第一个元素`arr1[0]`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-27T17:00:02.417

您可以通过这种方式获得第一个数组的第一个元素：

```
object[0][0] 
```

编辑：我假设你有一个数组数组。如果您有数组的 java.util.List，请查看 PermGenError 的答案。

# ide - 在 REDHAWK IDE 中，当我尝试将波形导出到目标 SDR 时收到错误消息。

> ID：15664787
> 
> 赞同：2
> 
> 时间：2013-03-27T16:58:22.720
> 
> 标签：ide, redhawksdr

尝试将波形导出到目标 SDR 时，我收到一条错误消息，指出“将项目导出到 SDR 根时出错”。

我在 Centos 6 64 位上使用 REDHAWK 1.8.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:03:20.507

此错误是由 $SDRROOT 的所有权问题引起的。它需要由用户拥有（或可写）。一种选择如下：

```
$ sudo chown -R <user name>.<user name> $SDRROOT 
```

您引用的错误已在最新文档 - [http://redhawksdr.github.com/Documentation/mainch2.html](http://redhawksdr.github.com/Documentation/mainch2.html)中得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:18:34.967

我使用的选项是创建自己的`SDRROOT`目录，然后从`/var/redhawk/sdr`. 如果您有多个人`Redhawk development`在同一台计算机上工作，或者如果您使用不同的计算机体系结构，这是一件非常好的事情。我还没有使用过`version 1.8`，但在过去，如果你`SDRROOT`在你的主目录中并试图在具有不同架构（32 位与 64 位）的计算机上使用它，就会发生不好的事情。解决方法是在切换架构和/或创建单独的 32 位和 64 位时复制正确的二进制文件`SDRROOTs`...

您也可以查看此[链接](http://www.axiosengineering.com/redhawk/cookbook/01-installing-and-running/alternate-sdrroot.html)。

# java - 使用在运行时确定的动态原始值的构造函数依赖注入

> ID：15664791
> 
> 赞同：0
> 
> 时间：2013-03-27T16:58:37.720
> 
> 标签：java, dependency-injection, spring-ioc

我有在朗姆酒时需要动态值的构造函数，并且想知道它是否
仍然可以使用依赖注入。请让我知道在这种情况下如何使用 spring 进行依赖注入。

```
public class User { 

    private String username;
    private int userid;

    User(String username, int userid) {
        this.username = username;
        this.userid = userid;
    }

    public String toString() {
        return "username" + userid;
    }
}

public class Superuser {

    private User user;

    public daomethod() {
        //some data access code that gets the username and id ......
        // now i need to pass this username and user id to the User constructor        
        user.toString();**     
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:06:37.727

像这样使用@javax.inject.Inject：

```
 @Inject
    User(String username, int userid) {
        this.username = username;
        this.userid = userid;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T18:28:13.257

如果这仍然是人们的问题，Spring 有别名，您可以使用这些别名命名注册：[http ://springframework.net/doc/sdk/2.0/html/Spring.Core~Spring.Context.Support.TypeRegistry~RegisterType%28String ,字符串%29.html](http://springframework.net/doc/sdk/2.0/html/Spring.Core~Spring.Context.Support.TypeRegistry~RegisterType%28String,String%29.html)

然后，如果您将抽象工厂与这些命名注册和命名约定结合使用，您可以以非常干净的方式解决这些依赖注入。我写了一个简单的 .NET + Unity 示例（基础相同）：[https ://dannyvanderkraan.wordpress.com/2015/06/29/real-world-example-of-dependency-injection-based-on -运行时值/](https://dannyvanderkraan.wordpress.com/2015/06/29/real-world-example-of-dependency-injection-based-on-run-time-values/)

也许它可以帮助人们。

# c# - 从 C# 项目调用 c 本机函数

> ID：15664792
> 
> 赞同：1
> 
> 时间：2013-03-27T16:58:40.357
> 
> 标签：c#, c, wpf, dll, encryption

我正在开发一个 C# 项目，我必须在文件中存储一些密码。我想用sha1加密那些。我已经在 C 项目中加密/解密 sha1 prog。我想从我的 C# 项目中调用“password_sha1_build”，它是加密密码 extern "C" __declspec(dllexport) char * Password_SHA1_Build(char *Password)) 的 C 函数。

我从有“Password_SHA1_Build”函数的文件中构建了一个 dll，我尝试从我的 C# 项目中调用它，如下所示：

```
[DllImport("Pass.dll")]
public static extern string Password_SHA1_Build(string Password);

... 

string password = "iamlee";
string hashedpwd = "";
hashedpwd = Password_SHA1_Build(password); 
```

我收到一个关于 Pinvoke 与签名不匹配的错误（法语）......不平衡。我坚持认为问题可能来自我使用字符串/字符 * 的事实，但如果是这种情况，我可以处理吗？

如果需要，请询问更多信息 谢谢大家

* * *

嗨，感谢大家的回答。

我注意到我的主题不够清楚。有一个用作“服务器”的 C 程序，它将读取名为 infos.cfg 的文件，其中存储了在 C# 程序中写入的加密密码。C程序不是我自己开发的，但它包含一个名为“int Password_SHA1_Check(char *Password, char *Hash)”的函数，它能够读取由函数“char * Password_SHA1_Build(char *Password)”构建的sha1密码.

因此，起初我尝试使用 sha1 将密码存储在 c# 中，如下所示：

```
System.Security.Cryptography.SHA1 hash = System.Security.Cryptography.SHA1.Create();
System.Text.ASCIIEncoding encoder = newS ystem.Text.ASCIIEncoding();
byte[] combined = encoder.GetBytes(password);
hash.ComputeHash(combined);
//rethash = Convert.ToBase64String(hash.Hash);
System.Security.Cryptography.SHA1CryptoServiceProvider sha1 = new System.Security.Cryptography.SHA1CryptoServiceProvider();
byte[] hash = sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(password));
string delimitedHexHash = BitConverter.ToString(hash);
string hexHash = delimitedHexHash.Replace("-", "");
rethash = hexHash; 
```

密码像这样存储在文件中：“。”之前的“密码：sha1：576295.49880ab837e9179dd68dfb142342f368e821de43”。是盐，之后是哈希

但是当 C 程序执行他的 Password_SHA1_Check 时，他告诉我我输入的密码与存储的密码不同。我在加密方面有点弱，并且忙于其他工作，所以我只是问自己“为什么不使用已经存在并且有效的“Password_SHA1_Build”函数”所以这就是为什么我试图从我的 C# 程序中调用这个函数。我希望这很清楚，对不起，我的英语很糟糕。

致 Reed Copsey：谢谢我试过了，至少 Pinvoke 异常消失了，但现在我得到了一个“AccessViolationException”。所以任何更多的想法都会受到欢迎，再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:01:17.570

这可能是由于调用约定不匹配造成的。PInvoke`StdCall`默认使用，但 VC 编译器`CDecl`默认使用。

尝试更改为：

```
[DllImport("Pass.dll", CallingConvention=CallingConvention.Cdecl)] 
```

其他潜在问题是字符串编组技术。您可能需要指定要使用的编码，和/或`StringBuilder`作为第二个参数传递并使用它来“填充”结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:02:49.033

.Net 框架内置了很多加密算法，包括 SHA256。尝试使用[SHA256Managed](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha256managed.aspx)类。如果你想最终解密你的密码，你需要对称加密功能，而 SHA 不是其中之一。

看看这篇文章：[密码检索和存储](https://stackoverflow.com/questions/15640051/password-retrieval-and-storage/15640080#15640080)

# javascript - 如何使用 jquery animate 滚动到元素跨浏览器

> ID：15664799
> 
> 赞同：3
> 
> 时间：2013-03-27T16:59:04.680
> 
> 标签：javascript, jquery, cross-browser, scroll, jquery-animate

这段代码：

```
jQuery('body').animate({scrollTop: target.offset().top}, 300); 
```

适用于Firefox，但不适用于chrome。

这段代码：

```
jQuery('html').animate({scrollTop: target.offset().top}, 300); 
```

适用于chrome，但不适用于firefox。

我还没有在 IE 中测试过。

跨浏览器的正确方法是什么？如果从上面的片段中不清楚，我的目标是页面上的一个 div，我想慢慢地向下滚动到它，所以他们完全按照我的意愿去做......只是不是跨浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:02:45.317

同时指定`html`和`body`：

```
$("html,body").animate({scrollTop: target.offset().top}, 300); 
```

# cocoa-bindings - 目标动作与 Cocoa 绑定

> ID：15664806
> 
> 赞同：1
> 
> 时间：2013-03-27T16:59:28.780
> 
> 标签：cocoa-bindings, target-action

我正在阅读 Apple 文档中的“什么是 Cocoa 绑定”。

> 请注意，此实现不使用目标操作模式。滑块不会向控制器发送操作消息。相反，当滑块移动时，**它会直接通知控制器**其内容编号的值已更改以及该值是什么。控制器更新模型，然后通知文本字段和滑块它们显示的值已更改。

“直接通知”是什么意思？它与发送消息有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:06:11.863

这意味着它无需编写任何逻辑即可更新模型的值。因此，如果您有一个没有绑定的滑块，您可以将它连接到一个方法，并在该方法中处理修改模型的逻辑。绑定将为您更改它，如果有其他任何东西绑定到该值，它将自动更新。那有帮助吗？

# core-data - AFIncrementalStore 和大量核心数据获取

> ID：15664807
> 
> 赞同：1
> 
> 时间：2013-03-27T16:59:30.530
> 
> 标签：core-data, afnetworking, nsfetchrequest, afincrementalstore

我一直在使用 AFIncrementalStore 并决定分析我的核心数据获取请求。我不知道为什么请求的数量会这么大。我可能搞砸的任何基本面？

![在此处输入图像描述](../Images/4211b9eba24a76344ca7f161b55870d2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:35:47.620

我相信我已经找到了问题所在。我使用服务[Parse](http://parse.com)作为后端，但没有覆盖 -requestForFetchRequest: 添加 where 子句。我只想要与当前登录用户关联的项目。这似乎已经解决了问题。

```
- (NSURLRequest *)requestForFetchRequest:(NSFetchRequest *)fetchRequest withContext:(NSManagedObjectContext *)context {
    NSMutableURLRequest *request = [[super requestForFetchRequest:fetchRequest withContext:context] mutableCopy];
    NSString *whereUserId = [NSString stringWithFormat:@"where={\"userId\":\"%@\"}",[PFUser currentUser].objectId];
    [request setHTTPBody:[whereUserId dataUsingEncoding:NSUTF8StringEncoding]];
    return request;
} 
```

现在，我收到了初始加载和选择每个项目时的获取请求。更合适。

# hibernate - 如何在 Tapestry 依赖项目中测试 DAO 层

> ID：15664815
> 
> 赞同：2
> 
> 时间：2013-03-27T16:59:58.643
> 
> 标签：hibernate, unit-testing, tapestry

我有一个tapestry5 + hibernate 应用程序，我正在尝试为其编写单元测试。我正在寻找一些指导或最佳实践来测试此类项目中的 DAO 层。我使用 testng 尝试了下面的测试用例，但它没有用。

```
@Test
public void createOrderTest() {
    IOCUtilities.buildDefaultRegistry();
    OrderManager orderManager = new OrderManager();
    Order o1 = new Order();
    Date date = new Date(System.currentTimeMillis());
    o1.setOrderDate(date);
    o1.setOrderStatus(OrderStatus.BILLED.toString());
    orderManager.createOrder(o1);
} 
```

当我尝试运行测试用例时收到错误消息。

```
java.lang.IllegalArgumentException: Contribution org.apache.tapestry5.yuicompressor.services.YuiCompressorModule.contributeMinimizers(MappedConfiguration) (at YuiCompressorModule.java:42) is for service 'interface org.apache.tapestry5.services.assets.ResourceMinimizer' qualified with marker annotations [interface org.apache.tapestry5.ioc.annotations.Primary], which does not exist.
at org.apache.tapestry5.ioc.internal.RegistryImpl.validateContributeDefs(RegistryImpl.java:246)
at org.apache.tapestry5.ioc.internal.RegistryImpl.<init>(RegistryImpl.java:205)
at org.apache.tapestry5.ioc.RegistryBuilder.build(RegistryBuilder.java:177)
at org.apache.tapestry5.ioc.IOCUtilities.buildDefaultRegistry(IOCUtilities.java:51)
at com.vc.xpressor.testng.OrderManagerTest.createOrderTest(OrderManagerTest.java:21) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:49:08.263

如果您在 DAO 中使用构造函数注入，则在 DAO 测试中根本不需要挂毯。我是否正确，您的 DAO 所需的唯一依赖项是休眠会话，也许还有几个 @Symbols？

如果是这样，您只需建立与内存数据库（例如 h2）的连接并将其包装在休眠会话中。然后将休眠会话传递给您的 DAO 构造函数。

我为我的 DAO 使用了一个基本测试类，它在 @Before 方法中设置连接和会话

这是一个示例 DAO

```
public class ItemDAOImpl implements ItemDAO {
    private final Session session;

    public ItemDAOImpl(Session session) {
        this.session = session;
    }

    public List<Item> findAll() {
        return session.createCriteria(Item.class).list();
    }

    ....
} 
```

在 Tapestry 中，这是在 AppModule 中声明的

```
public static void bind(ServiceBinder binder) {
    binder.bind(ItemDAO.class, ItemDAOImpl.class);
} 
```

但在我的测试用例中，我不需要 Tapestry

```
public class ItemDAOImplTest extends AbstractHibernateTest {
    private ItemDAO itemDAO;

    @Override
    protected void before() {
        itemDAO = new ItemDAOImpl(session);
    }

    @Override
    protected void after() {}

    @Test
    public void testFindAll() {
        session.save(new Item(...));
        session.save(new Item(...));
        session.save(new Item(...));
        assertEquals(3, itemDAO.findAll().size());
    }
}

public abstract class AbstractHibernateTest {
    protected SessionFactory sessionFactory;
    protected Session session;

    @Before
    public void abstractBefore() throws Exception {
        Configuration config = new Configuration();

        // see PackageNameHibernateConfigurer source code to dynamically add all
        // classes in the entities package
        config.addAnnotatedClass(Item.class);
        config.addAnnotatedClass(...);

        config.setProperty("hibernate.dialect", "org.hibernate.dialect.H2Dialect");
        config.setProperty("hibernate.connection.driver_class", "org.h2.Driver");
        config.setProperty("hibernate.connection.url", "jdbc:h2:mem:test");
        config.setProperty("hibernate.hbm2ddl.auto", "create");
        config.setProperty("hibernate.show_sql", "true");
        config.setProperty("hibernate.format_sql", "true");

        sessionFactory = config.buildSessionFactory();
        session = sessionFactory.openSession();
        session.beginTransaction();
        before();
    }

    protected abstract void before() throws Exception;

    @After
    public void abstractAfter() throws Exception {
        Exception exception = null;
        try {
            after();
        } catch (Exception e) {
            exception = e;
        }

        session.getTransaction().rollback();
        session.close();
        sessionFactory.close();

        if (exception != null) {
            throw exception;
        }
    }

    protected abstract void after() throws Exception;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:12:57.597

如果您想通过 IoC 运行 DAO，另一种选择是将 AppModule 分为两个：一个用于定义 Hibernate 实体和 DAO 的模块，其余的在 AppModule 中。您可以使用 DAOModule 和 HibernateCoreModule 初始化您的测试（如果您注意到，Tapestry 的 Hibernate 支持同样分为两部分：一个在 Tapestry-ioc 之上工作的非可视部分，以及一个为 Tapestry-ioc 提供附加挂钩的可视部分-核）。

# command-line - redgate sql比较结果不同使用gui到命令行

> ID：15664822
> 
> 赞同：1
> 
> 时间：2013-03-27T17:00:06.680
> 
> 标签：command-line, redgate, sqlcompare

使用 SQL Compare 10，我创建了一个 .scp 文件，它将本地数据库（在本地构建服务器上）与源代码控制中的内容（通过 redgate SQL 源代码控制的 TFS）进行比较

使用 GUI 列出了许多不同之处。

从命令行运行 .scp 文件时，根本没有列出任何差异。- “选择的对象相同或在比较中没有选择对象”

命令行是

```
"C:\Program Files (x86)\Red Gate\SQL Compare 10\sqlcompare.exe" /project:"C:\Users\CIUser\Documents\SQL Compare\SharedProjects\MyDBName v MyDBName (Head).scp" /scriptfile:deploy_MyDBName.sql /include:identical /force 
```

注意

```
The /include:/identical switch means the compare will not report an error if no changes are detected
The /force switch forces an overwrite of the sql script, rather than causing an error 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T12:51:25.760

好的，解决了这个问题，虽然它对我来说似乎有点迟钝，至少可以这么说。

在保存项目文件之前（或至少在从命令行运行它之前），您需要：

a）您必须运行比较-但是..比较需要找出一些差异

b) 由于已经发现了一些差异，当显示结果时，在标题行中，您需要选中 2 个“对象名称”列之间的复选框，然后

c) 保存您的项目。

虽然项目文件是一个文本/XML 文件，但执行上述步骤会在文件中添加一些加密的 guff，这似乎使其工作 - 即它不仅仅是将其中一个 xml 值更改为 True 是 False。

希望这对*某人*有所帮助......肯定有更好的方法来解决这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-22T17:38:22.187

遇到了同样的问题，并且即将对我一直在处理的代码变得无用感到绝望，但是我使用了以下开关来修复：

/包括：相同的 /ReportAllObjectsWithDifferences

# php - 使用允许 POST 请求的表单创建小部件

> ID：15664823
> 
> 赞同：2
> 
> 时间：2013-03-27T17:00:08.320
> 
> 标签：php, post, yii, widget

在几页上，我需要包含一个框和一个提交按钮。视图文件使用 DatePicker 允许用户填写输入框。点击“开始”（提交）按钮后，我将根据日期更改以下内容。

我目前正在尝试使用小部件，因为此代码将在多个页面上使用。我现在的问题是我想知道如何从表单中获取 POST 请求并使用它。我需要一个模型吗？我将在下面附上我当前的代码，但现在我收到 $date 未定义的错误。我知道这会出错，但我对我到底需要做什么感到有点困惑。

小部件的当前代码：

> /protected/views/dateWidget.php

```
<div class="form">

    <?php $form=$this->beginWidget('CActiveForm', array(
            'id'=>'date-form',
            'enableAjaxValidation'=>false,
            'enableClientValidation' => true,
)); ?>

    <p class="note">
        Fields with <span class="required">*</span> are required.
    </p>

    <?php echo $form->errorSummary($date); ?>

    <div class="row">
        <?php echo $form->labelEx($date,'date'); ?>
        <?php
        $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                'model' => $model,
                'attribute' => 'date',
                'language' => 'ja',
                'i18nScriptFile' => 'jquery.ui.datepicker-ja.js',
                'options' => array(
                    'showOn' => 'both',             // also opens with a button
                    'dateFormat' => 'yy-mm-dd',     // format of "2012-12-25"
            ),
            'htmlOptions' => array(
                'size' => '10',         // textField size
                'maxlength' => '10',    // textField maxlength
            ),
        ));
        ?>
        <?php echo $form->error($date,'date'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Add'); ?>
    </div>

    <?php $this->endWidget(); ?>

</div>
<!-- form --> 
```

> /protected/components/DateWidget.php

```
<?php 
class DateWidget extends CWidget
{
    /**
     * @var CFormModel
     */
    public $form;

    public function run()
    {
//      if (! $this->form instanceof CFormModel) {
//          throw new RuntimeException('No valid form available.');
//      }
        $this->render('application.views.dateWidget', array('form'=>$this->form));
    }
}
?> 
```

那么问题是：我如何使用 DateForm 中的 $_POST 来影响其他视图/模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:08:32.160

`$form`由于变量在您看来是不明确的，因此不清楚您想要根据所选日期更改哪些数据`dateWidget.php`。开始日期的表单小部件就像`$form = $this->beginWidget('CActiveForm', array(...))`您替换`CFormModel`从实例传递`DateWidget`的`CActiveForm`实例一样。这就是令人困惑的......你想将你的日期字段`DateWidget`用作其他表单的一部分还是单独的嵌套表单？

无论如何，要在表单提交之前更改任何数据，可以将`onSubmit`处理程序附加到该表单：

```
jQuery('#date-form').submit(function(event) {
    // Any actions before submission
} 
```

考虑嵌套表单的更一般情况并假设这`$form`是`CActiveForm`您视图中的实例，我们可以在视图脚本的末尾（或在您的单独 JS 文件中`DateWidget`- 以您喜欢的任何方式）注册以下脚本，如下所示。

请注意，您必须编写自己的 JavaScript 函数`collectFormData`（这将收集主表单的字段值并将它们放置在生成的纯 JavaScript 对象中）和`populateFormData`（这将设置字段的新值）。这是因为某些字段`CActiveForm`是自定义的，并且包含多个输入元素（例如复选框或单选按钮列表）。您可以将这些函数放在小部件的单独 JS 文件中。

此外，为了`DateWidget`适用于任何具有任何数据的表单，我们使用代码片段来限制它，这些代码片段会改变表单的数据，将这些片段移动到单独的 PHP 脚本中，该脚本可以`$url`由`DateWidget`.

```
Yii::app()->clientScript->registerScript("alterPost", "
    jQuery('#" . $form->id . "').submit(function(event, submit) {

        // Checking whether form's submission has been requested
        if (submit) {

            // Allowing form submission
            return;
        }

        // Preventing form submission
        event.preventDefault();
        event.stopPropagation();

        // Getting selected date
        var dateString = jQuery(this).find('input[name$=\"[date]\"]').val();

        // Collecting data of main form...
        var jqMainForm = jQuery(this).parents('form');
        var mainFormData = collectFormData(jqMainForm.attr('id'));

        var self = jQuery(this);
        jQuery.ajax('" . $this->url . "', {
            'type': 'POST',
            'data': jQuery.extend({'dateString': dateString}, mainFormData),
            'dataType': 'json',
            'success': function(data, textStatus, jqXHR) {

                // Populating main form by new values
                if (data['result'] === true)
                    populateFormData(jqMainForm.attr('id'), data['alteredFormData']);
                self.trigger('submit', true);
            }
        });
    })
", CClientScript::POS_READY); 
```

更改表单数据的 PHP 脚本必须以 JSON 格式返回结果：

```
<?php
$response = array(
    'result' => false
);
if (isset($_POST))
{
    // Analyzing dateString and form data, altering form data
    // $response['alteredFormData'] = ...;
    $response['result'] = true;
}
header("Content-Type: application/json");
print json_encode($response); 
```

# javascript - jplayer在暂停时更改背景

> ID：15664829
> 
> 赞同：0
> 
> 时间：2013-03-27T17:00:30.070
> 
> 标签：javascript, jquery, if-statement, jplayer

我的音频播放器 Jplayer 遇到了一些问题。我无法访问 isPaused。我需要发生的是当播放器播放时需要更改 div 的背景图像。我有两个测试脚本，都不能正常工作。

我的播放器

```
var myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
    {
        mp3: "/media/audio/RelaxSeg.mp3",
    }, {
        supplied: "mp3",
        cssSelectorAncestor: "#cp_container_1",
        swfPath: "/jQuery.jPlayer.2.2.0/v11/js",
        wmode: "window"
}); 
```

我的容器。

```
 <div id="jquery_jplayer_1" class="cp-jplayer"></div>
  <div id="cp_container_1" class="cp-container" style="background:none;">
    <img id="bg_image" class="bg_image1"  src="/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_img.png" height="60"  />
        <div class="cp-progress-holder"> <!-- .cp-gt50 only needed when progress is > than 50% -->
            <div class="cp-progress-1"></div>
            <div class="cp-progress-2"></div>
        </div>

    <div class="cp-circle-control"></div>
         <ul class="cp-controls">
             <li><a id="play1"  class="cp-play" tabindex="1">play</a></li>
             <li><a id="pause1"  class="cp-pause" style="display:none;" tabindex="1">pause</a></li> <!-- Needs the inline style here, or jQuery.show() uses display:inline instead of display:block -->
         </ul>

  </div> 
```

这应该有效，但由于某种原因没有。

```
if($("#jquery_jplayer_1").data("jPlayer").status.isPlaying) { 
    $(".bg_image1").attr("src", "/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_image_green.png"); 
    } 
    else { 
    $(".bg_image1").attr("src", "/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_img.png");
    } 
```

我也有这段代码不起作用，当播放器不播放时，暂停按钮不显示，当播放器播放时，它的样式变为 display=block。

```
if(document.getElementById("pause1").style.display = "block") { 
    $(".bg_image1").attr("src", "/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_image_green.png"); 
    } 

if(document.getElementById("pause1").style.display = "none") { 
    $(".bg_image1").attr("src", "/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_img.png");
    } 
```

我为代码块道歉，但我不想遗漏任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:05:51.140

您可以通过执行以下操作连接到 jPlayer 中的`play`,`pause`​​ 和事件：`end`

```
var myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
{
    mp3: "/media/audio/RelaxSeg.mp3",
}, {
    supplied: "mp3",
    cssSelectorAncestor: "#cp_container_1",
    swfPath: "/jQuery.jPlayer.2.2.0/v11/js",
    wmode: "window",
    play: function () {
        $(".bg_image1").attr("src", "/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_img.png");
    },
    pause: function () {
        $(".bg_image1").attr("src", "/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_image_green.png");
    },
    ended: function () {
        $(".bg_image1").attr("src", "/jQuery.jPlayer.2.2.0/v11/circle.skin/jplayer_bg_image_green.png");
    }
   }); 
```

# datatables - 如何在流星集合上的 datatables.net 中设置数据源？

> ID：15664830
> 
> 赞同：1
> 
> 时间：2013-03-27T17:00:31.597
> 
> 标签：datatables, meteor

如何使用 Meteor Collection 在数据表中设置数据[源](http://datatables.net)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:18:34.407

使用 Meteor，它与 C#/.NET 有点不同。我不确定数据表是否明确地从数组/实际数据变量中获取数据源。但是可以从 minimongo 查询中创建一个表，例如`People.find()`

你有你要转换成数据表的表。`{{#each}}`为每个“行/文档”制作一个循环的基本表格

```
<template name="data">
    <table id="datatable">
        <thead>
            <th>Name</th>
            <th>Address</th>
        </thead>
        <tbody>
        {{#each person}}
          <tr>
              <td>{{name}}</td>
              <td>{{address}}</td>
          </tr>
        {{/each}}
        </tbody>
    </table>
</template> 
```

然后使用连接到数据库的模板助手将数据附加到此：

```
 Template.data.person = function() {
     return People.find()  //Return the data containing name/addresses of people
 } 
```

最后将普通的普通表转换为数据表

```
 Template.data.rendered = function() {
     $('#datatable').dataTable()
 } 
```

# hadoop - Hadoop namenode 在调用 setSafeMode 时出现异常，未能离开安全模式

> ID：15664838
> 
> 赞同：1
> 
> 时间：2013-03-27T17:00:51.043
> 
> 标签：hadoop

我正在运行一个 hadoop 集群（版本：cdh4.1.1）。我设置了两个 HA 名称节点。

**第1步。**

当我尝试启动我的名称节点时，我得到了这个异常：

```
2013-03-27 16:52:21,282 FATAL org.apache.hadoop.hdfs.server.namenode.NameNode: Exception in namenode join
java.io.IOException: Cannot start an HA namenode with name dirs that need recovery. Dir: Storage Directory /data/dfs/nn state: NOT_FORMATTED
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverStorageDirs(FSImage.java:288)
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:201)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFSImage(FSNamesystem.java:534)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFromDisk(FSNamesystem.java:424)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.loadFromDisk(FSNamesystem.java:386)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.loadNamesystem(NameNode.java:398)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:432)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:608)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:589)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1128)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1192)
2013-03-27 16:52:21,285 INFO org.apache.hadoop.util.ExitUtil: Exiting with status 1 
```

**第2步。**

然后我尝试运行 : `sudo hdfs namenode -recover`，我得到了：

```
13/03/27 16:53:37 INFO hdfs.StateChange: STATE* Safe mode is ON. 
Use "hdfs dfsadmin -safemode leave" to turn safe mode off. 
```

**步骤 3。**

按照说明，我做了`sudo hdfs dfsadmin -safemode leave`，我得到了：

```
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.
13/03/27 16:55:17 WARN retry.RetryInvocationHandler: Exception while invoking setSafeMode of class ClientNamenodeProtocolTranslatorPB after 1 fail over attempts. Trying to fail over after sleeping for 996ms.
13/03/27 16:55:18 WARN retry.RetryInvocationHandler: Exception while invoking setSafeMode of class ClientNamenodeProtocolTranslatorPB after 2 fail over attempts. Trying to fail over after sleeping for 2085ms.
......retrying......
Not retrying because failovers (15) exceeded maximum allowed (15)
java.net.ConnectException: Call From namenode-01.local/10.**.**.24 to namenode-02.local:8020 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused 
```

任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:17:16.853

除非发生了某种奇怪的魔法，否则您会忘记格式化名称节点（正如例外情况已经说明的那样）。如果您还没有这样做，请运行`hadoop -namenode format`. 请注意，如果您**已**格式化您的名称节点，这是破坏性的。

# javascript - 照片滑动/使用关闭按钮作为历史返回按钮

> ID：15664840
> 
> 赞同：0
> 
> 时间：2013-03-27T17:00:59.603
> 
> 标签：javascript, gallery, history, back, photoswipe

我不是一个好的 Javascript 程序员，所以我来回答这个问题。我正在为项目中的一些画廊使用Photoswipe。有些画廊我不使用缩略图预览，我直接打开它们。现在，当我单击关闭按钮时，图像会消失，您只能看到一个空白页面。现在我想使用关闭按钮作为返回历史功能。我正在使用 jquery 和 photoswipe 插件，没有 jquery mobile 或 sansa touch。

感谢您的帮助迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:57:54.453

将以下内容添加到按钮：

```
onclick="history.go(-1) 
```

现在你的按钮看起来像

```
<a href="#" onclick="history.go(-1)">Close</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T04:47:37.780

您应该添加到您的自定义 script.js

```
var options = {
                ...,
                history: false,
                ...
}; 
```

然后初始化图库

```
var gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);
gallery.init(); 
```

# jsf-2 - 保存可编辑的数据表最终会导致所有属性都相同

> ID：15664842
> 
> 赞同：0
> 
> 时间：2013-03-27T17:01:00.700
> 
> 标签：jsf-2, datatable

我的 JSF 2.0 应用程序中的一个页面使用来自特定学校（数据库操作）的教师数量（以教师 ID 的形式）填充数据表。针对每一行，我需要分配两个属性，一个整数值 (intValue) 和一个字符串值 (strValue)。当我提交页面以将其保存到数据库时，我最终为teacherList 中的所有教师保存了相同的strValue 和intValue。也许我不知道如何使用数据表，我有点关注“ [http://www.primefaces.org/showcase/ui/datatableRowEditing.jsf](http://www.primefaces.org/showcase/ui/datatableRowEditing.jsf) ”。任何人都可以提出任何其他替代方案或解决方案。我的代码粘贴在下面。谢谢！

豆子

```
@ManagedBean(name="myBean")
@SessionScoped
public class MyBean implements Serializable{

    private Integer indId;
    private Integer teacherId;
    private Integer schoolId;
    private String strValue;
    private Integer intValue;
    private List<Teacher> teacherList;
    private List<Att> tList;

    public myBean(){
        tList = new ArrayList<Att>();

        // Some database operations to load the att.xhtml page
        indId = findId();
        teacherList = teacherDataProvider(schoolId);    
    }

    public void attEntry(){

        for (int i = 0;i<teacherList.size();i++){

            tList.add(new Att(this.teacherList.get(i).getTeacherId(),
                                                            this.indId,
                                                            this.strValue,
                                                            this.intValue,
                                                            );
            dataProvider.addAtt(tList.get(i)); // call for database archival from the DAO   
        }
    }

    // getters & setters

} 
```

`att.xhtml`

```
<h:dataTable id="teachers" class="table table-condensed" 
    value="#{myBean.teacherList}" var="t">
    <h:column>
        <f:facet name="header">
            <h:outputText value="Teacher Id" />
        </f:facet>
        <h:outputText value="#{t.teacherId}" />
    </h:column> 

    <h:column>
        <f:facet name="header">
            <h:outputText value="Att" />
        </f:facet>
        <h:inputText value="#{myBean.intValue}" />
    </h:column>

    <h:column>
        <f:facet name="header">
            <h:outputText value="Comments" />
        </f:facet>
        <h:inputTextarea value="#{myBean.strValue}" />
    </h:column>
</h:dataTable>      
<div>
    <h:commandButton action="#{myBean.attEntry}" value="Submit" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:17:50.653

您的问题不在于数据表，而在于未能掌握 JSF 基础知识。JSF 正在做你告诉它做的事情。你所说的基本上是在一个对象列表旁边拥有*一个**和****一个******bean****属性****，***这显然会产生不一致。 *`Integer` **`String`********`Teacher`*****

 ****您的问题隐含的结果恰恰相反：您希望将一个整数字符串对附加到您的类的*每个*实例。这假定您希望将这两个值存储在一个`Teacher`类中，或者将一个`Teacher`对象与这两个值一起包含在一个包装类中：

1.  在类中添加两个字段`Teacher`：

    ```
    public class Teacher {

        private int intValue;//getter+setter
        private String stringValue;//getter+setter

    } 
    ```

2.  将对象封装在包装类中：

    ```
    public class TeacherWrapper {

        private int intValue;//getter+setter
        private String stringValue;//getter+setter
        private Teacher teacher;//getter+setter

    } 
    ```

当然`Teacher`，如果您在 Servlet 3.0 和 EL 2.2 上，您也可以将这两个值对存储在 bean 中的两个单独列表中，就在 list of 旁边，并使用带参数的 EL 方法调用。

这样，如果您将必要的绑定添加到输入组件，您的命令按钮将执行您想要的操作。

作为旁注，请务必检查使用会话范围来处理最可能属于视图/请求范围的数据的原因。此外，您可能希望保留每行数据（如单个`Teacher`对象），您可以在每个数据表行中添加一个命令按钮来处理作业，但这是一个不同的问题。****

# java - Spring中的Bean实例化通知

> ID：15664843
> 
> 赞同：0
> 
> 时间：2013-03-27T17:01:01.230
> 
> 标签：java, spring

我知道 Spring 框架并在其中工作过，并且习惯于`ApplicationContext`实例化和加载 bean。

假设我写了以下代码

```
ApplicationContext context=new ClassPathXmlApplicationContext("appContext.xml"); 
```

现在，在上述语句之后，我如何知道定义在 中的 bean`appContext.xml`是否已被 Spring 实例化和加载？

注意：我想在访问任何 bean 之前知道它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:04:10.293

尝试检索一个：

```
MyClass myClass = (MyClass) context.getBean("MyBean"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:06:28.900

我同意 Reimeus 和 @jbx 的评论。如果没有抛出任何东西，你应该很高兴。但是，如果您真的想确定，请考虑使用记录器，甚至是某种 AOP 在创建 bean 时触发事件。

我想我知道你在做什么，这对我们程序员来说是很难做到的。依赖注入（spring 通过在应用程序上下文中创建 bean 所做的）消除了显式创建 bean 的步骤（即“Thing something = new Thing()”），这可能会令人恐惧，尤其是在早期开发中，当并非一切正常时，你不知道为什么。

您的对象已实例化。你只需要相信 Spring 正在做这件事——它会让你知道它是否不是：D

（还可以查看 BeanFactoryPost 处理器[http://javasourcecode.org/html/open-source/spring/spring-3.0.5/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html](http://javasourcecode.org/html/open-source/spring/spring-3.0.5/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html)，它可以让您看到是什么如果你真的想要的话）

# asp.net - 从网络摄像头捕获图像并保存

> ID：15664850
> 
> 赞同：0
> 
> 时间：2013-03-27T17:01:12.230
> 
> 标签：asp.net, image, save, webcam

大家好，我正在尝试保存从我的网络摄像头拍摄的照片。我实际上使用这段代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;

public partial class ImageConversions : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        CreatePhoto();
    }

    void CreatePhoto()
    {
        try
        {

            string strPhoto = Request.Form["imageData"]; //Get the image from flash file
            byte[] photo = Convert.FromBase64String(strPhoto);

           FileStream fs = new FileStream("C:\\Webcam.jpg", FileMode.OpenOrCreate, FileAccess.Write);
            BinaryWriter br = new BinaryWriter(fs);
            br.Write(photo);
            br.Flush();
            br.Close();
            fs.Close();
        }
        catch (Exception Ex)
        {

        }
    }
} 
```

应用程序运行，我看到图像，我单击捕获按钮它没有给出任何错误，直到这里但是但是......没有图像被保存我从这里下载了示例：http: [//www.dotnetspider.com/资源/38150-Capture-save-images-from-Web-camera.aspx](http://www.dotnetspider.com/resources/38150-Capture-save-images-from-Web-camera.aspx) （检查附件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:44:21.143

试试这篇文章。它工作得很好。但是当未连接网络摄像头时，我无法使用自定义消息。它给出了一个自动生成的错误消息。

[网络摄像头图书馆dotnet](https://sites.google.com/site/webcamlibrarydotnet/winfrom-and-csharp-sample-code-and-download)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T06:38:29.897

更改路径..我也遇到了同样的问题..您的 C 驱动器安全级别很高，将路径更改为“D:\Webcam.jpg”，它将起作用

# google-apps-script - 带有谷歌应用脚 本的第三方短信

> ID：15664854
> 
> 赞同：0
> 
> 时间：2013-03-27T17:01:19.630
> 
> 标签：google-apps-script, sms-gateway

我想使用邮件列表通过第三方提供商发送短信。以下是他们提供的代码示例：

```
<%
' This simple ASP Classic code sample is provided as a starting point. Please extend your
' actual production code to properly check the response for any error statuses that may be
' returned (as documented for the send_sms API call).

username = "your_username"
password = "your_password"
recipient = "44123123123"
message = "This is a test SMS from ASP"
postBody = "username=" & Server.URLEncode(username) & "&password=" &     Server.URLEncode(password) & "&msisdn=" & recipient & "&message=" & Server.URLEncode(message)

set httpRequest = CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.open "POST", "http://bulksms.2way.co.za/eapi/submission/send_sms/2/2.0", false
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.send postBody
Response.Write (httpRequest.responseText)
%> 
```

我不知道如何在 GAS 中做到这一点（我真的是一个业余程序员......）。从谷歌搜索看来，我需要使用“UrlFetchApp.fetch”之类的东西。任何帮助或相关链接将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:42:33.267

下面的函数创建一个格式正确的`POST`. 如果没有有效的凭据，我可以确认它会收到 200 OK HTTP 响应，并且服务器会报告`23|invalid credentials (username was: your_username)|`. 所以看起来它应该可以工作，并填写了正确的细节。

我已经包含`application/x-www-form-urlencoded`了 contentType，虽然这不是必需的，因为它是默认值。

如果您使用一组测试值进行此操作，那么下一步就是将其更改为接受和使用参数 - 我将把它留给您。

```
/*
 * Sends an HTTP POST to provider, to send a SMS.
 *
 * @param {tbd} paramName To be determined.
 *
 * @return {object} Results of POST, as an object. Result.rc is the
 *                  HTTP result, an integer, and Result.serverResponse
 *                  is the SMS Server response, a string.
 */
function sendSMS() {
  var url = "http://bulksms.2way.co.za/eapi/submission/send_sms/2/2.0";
  var username = "your_username";
  var password = "your_password";
  var recipient = "44123123123";
  var message = "This is a test SMS from ASP";
  var postBody = {
    "username" : encodeURIComponent(username),
    "password" : encodeURIComponent(password),
    "msisdn" : encodeURIComponent(recipient),
    "message" : encodeURIComponent(message)
  };

  var options =
  {
    "method" : "post",
    "contentType" : "application/x-www-form-urlencoded", 
    "payload" : postBody
  };

  // Fetch the data and collect results.
  var result = UrlFetchApp.fetch(url,options);
  var rc = result.getResponseCode();     // HTTP Response code, e.g. 200 (Ok)
  var serverResponse = result.getContentText(); // SMS Server response, e.g. Invalid Credentials
  debugger;  // Pause if running in debugger
  return({"rc" : rc, "serverResponse" : serverResponse});
} 
```

## 参考

*   [UrlFetchApp](https://developers.google.com/apps-script/reference/url-fetch/url-fetch-app)和[HTTPResponse](https://developers.google.com/apps-script/reference/url-fetch/http-response)的 Google Apps 脚本文档
*   [你什么时候应该使用转义而不是 encodeURI / encodeURIComponent？](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)

# visual-studio-2010 - 在目标目录中包含产品版本

> ID：15664855
> 
> 赞同：1
> 
> 时间：2013-03-27T17:01:21.263
> 
> 标签：visual-studio-2010, setup-project

我正在尝试为应该能够与自己的旧版本一起安装的产品创建一个安装项目。我试图添加`[Version]`到应用程序文件夹的默认位置，但这似乎不起作用。也就是说，当我设置这个时：

`DefaultLocation: [ProgramFilesFolder][Manufacturer]\[ProductName]-x-[Version]-y`

安装程序完全忽略了`Version`变量，并建议

`C:\Program Files\<company>\<product>-x--y`

作为默认位置。在设置项目属性中`[Version]`设置为。`<number>.<number>.<number>`

我或 VS 有什么问题？如何将版本控制添加到我的默认位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:09:18.673

回答我自己的问题。

显然，在这种情况下使用的正确变量 is`[ProductVersion]`和 not `[Version]`。我不知道它应该如何被知道。我通过查看安装日志、搜索“版本”一词并尝试我发现的内容来解决这个问题。

# python - 如何将矩阵中的每一行乘以Python中第二个矩阵中的每一列？

> ID：15664857
> 
> 赞同：1
> 
> 时间：2013-03-27T17:01:23.450
> 
> 标签：python, matrix, row, multiplication

我知道将两个矩阵相乘的步骤如下

第 1 步：确保第一个中的列数等于第二个中的行数。

第二步：将第一个矩阵的每一行的元素乘以第二个矩阵的每一列的元素。

第三步：添加产品。

第二步怎么做？

例如

```
A = [[3,4,5],[5,0,6],[5,7,1]]

B = [[2,1,3],[2,6,4]] 
```

到目前为止，我有一个函数可以找到第二列的每一列

```
def column(B,j):
    col = []
    for column in B:
        col.append(column[j])
    return col 
```

接下来我必须创建一个函数来查找第一行的每一行

```
def rows(A,i): 
```

但是我不知道如何创建一个将它们相乘的函数

```
row(A,0) • col(B,0)

row(A,0) • col(B,1)

row(A,1) • col(B,0)

row(A,1) • col(B,1)

row(A,2) • col(B,0)

row(A,2) • col(B,1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:07:57.407

您可能应该使用 numpy：

```
import numpy as np
np.dot(row(A,0), col(B,0)) 
```

但是，假设您不想使用它，您可以这样做：

```
def dot(arr1, arr2):
    return sum([x*y for x,y in zip(arr1, arr2)])

dot(row(A,0), col(B,0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:07:32.733

如果您坚持为此使用列表....

对于 C = AB，你需要

C_{ij} = sum(A_{ik} * B_{kj})

这里，i、j 和 k 是下标，第一个下标表示行，第二个下标表示列。i、j、k 在矩阵的行和列（即列表索引）上运行，因此您可以只在 i、j 和 k 上编写 for 循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T17:24:20.087

A 有 3 列，而 B 有 2 行。因此，您的示例似乎与步骤 1 中所述的要求相矛盾。不过，这可能与您要查找的内容相近。

```
In [1]: A = [[3,4,5],[5,0,6],[5,7,1]]

In [2]: B = [[2,1,3],[2,6,4]]

In [3]: [[sum(r*c for r,c in zip(row, col)) for col in B] for row in A]
Out[3]: [[25, 50], [28, 34], [20, 56]] 
```

* * *

顺便说一句，这是一个有用的技巧，您可能会觉得它很有用：如果您想转置矩阵，请使用`zip(*B)`：

```
In [4]: zip(*B)
Out[4]: [(2, 2), (1, 6), (3, 4)] 
```

这可能对您有用，因为它允许您轻松地遍历`B`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:10:54.800

这是一个解决的例子：

```
>>> from pprint import pprint
>>> def mmul(A, B):
        nr_a, nc_a = len(A), len(A[0])
        nr_b, nc_b = len(B), len(B[0])
        if nc_a != nr_b:
            raise ValueError('Mismatched rows and columns')
        return [[sum(A[i][k] * B[k][j] for k in range(nc_a))
                 for j in range(nc_b)] for i in range(nr_a)]

>>> A = [[1, 2, 3, 4]]
>>> B = [[1],
         [2],
         [3],
         [4]]

>>> pprint(mmul(A, B))
[[30]]

>>> pprint(mmul(B, A), width=20)
[[1, 2, 3, 4],
 [2, 4, 6, 8],
 [3, 6, 9, 12],
 [4, 8, 12, 16] 
```

# cordova - 创建新项目时出现Phonegap错误

> ID：15664860
> 
> 赞同：0
> 
> 时间：2013-03-27T17:01:27.453
> 
> 标签：cordova

当我尝试使用 Phonegap 创建项目时出现此错误

```
MacBook-Pro-de-Pedro-2:bin pedro$ ./create /Users/pedro/Dropbox/work/app/teste1 br.com.becodigital.teste1 teste1

./create: line 1: syntax error near unexpected token `newline'

./create: line 1: '!DOCTYPE html>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T11:52:23.107

我认为您应该键入此命令，例如

```
MacBook-Pro-de-Pedro-2:bin pedro$ ./create /Users/pedro/Dropbox/work/app/teste1 org.apache.cordova.teste1 teste1 
```

并且您的应用程序文件夹中的文件夹 teste1 不应该存在

试试这个，然后把你的结果发回给我；）希望这能解决你的问题

# ajax - _escape_fragment_ 的重写规则

> ID：15664861
> 
> 赞同：0
> 
> 时间：2013-03-27T17:01:29.767
> 
> 标签：ajax, .htaccess, seo

我想为

[http://www.site.com/noticia/​​?_escaped_fragment_=noticia=/279/beto-cuevas3er-sencillo-dej-de-pensar](http://www.site.com/noticia/?_escaped_fragment_=noticia=/279/beto-cuevas3er-sencillo-dej-de-pensar)

到：

[http://www.site.com/noticia/​​#!noticia=/279/beto-cuevas3er-sencillo-dej-de-pensar](http://www.site.com/noticia/#!noticia=/279/beto-cuevas3er-sencillo-dej-de-pensar)

我已经尝试过了，但离我需要的还很远，对吧？

```
# Enable Rewrite Engine
RewriteEngine on

#Create friendly URL
RewriteRule ^index.php?_escaped_fragment=something=yes$ 
index.php/#!something=yes [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:24:39.023

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^_escaped_fragment_=([^=]+)=([^&]+) [NC]
RewriteRule ^$ /%1/#!%1=%2? [L,R,NE] 
```

# regex - awk 中的多个字段分隔符

> ID：15664862
> 
> 赞同：11
> 
> 时间：2013-03-27T17:01:41.030
> 
> 标签：regex, string, awk

我有这个字符串

```
-foo {{0.000 0.000} {648.0 0.000} {648.0 1980.0} {0.000 1980.0} {0.000 0.000}} 
```

我想将它分隔为数字并对其进行迭代，感谢尝试使用字段分隔符但没有成功我如何使用 awk 来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T17:14:52.367

尝试这样做：

```
awk -F'}+|{+| ' '{for (i=1; i<=NF; i++) if ($i ~ "[0-9]") print $i}' file.txt 
```

字段分隔符`FS`（`-F`开关）可以是一个字符、一个词、一个正则表达式或一类字符。

您也可以使用它：

```
awk 'BEGIN{FS="}+|{+| "} {for(i=1;i<=NF;i++) if($i ~ "[0-9]")print $i}' file.txt 
```

## 解释

*   `foo|bar|base`是一个正则表达式，它可以匹配任何由`|`
*   在 中`}+|{+|`，我们可以选择匹配一个文字`}`至少一个 : `+`，或者一个文字`{`至少一个 : `+`，或者一个空格。
*   您也可以使用一类角色来做同样的事情：`[{} ]`，两者都有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:17:12.610

使用 awk 的一种方法：

```
awk -F'[{} ]' '{ for( i=1; i<=NF; i++ ) if( $i ~ /[0-9.]+/ ) print $i }' file 
```

在上面的行中，我们检查了这些数字，但我没有做任何特别的事情，只是打印了它们。您可以将逻辑添加到该部分。

输出：

```
0.000
0.000
648.0
0.000
648.0
1980.0
0.000
1980.0
0.000
0.000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:23:55.077

如果您只想在新行上显示每个数字，则只需使用`grep`：

```
$ egrep -o '[0-9]+\.[0-9]+' file
0.000
0.000
648.0
0.000
648.0
1980.0
0.000
1980.0
0.000
0.000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T19:47:48.900

诚然，我的想法很简单。根据我的经验，字段分隔符的正则表达式示例是最值得学习的，尤其是当您必须处理 XML 等时。但是在这种情况下，我们必须记住，当遇到不相关的字符时，UNIX 为您提供了*许多*选择. 一个简单的解决方法是删除不需要的字符。有多种方法，但我会这样使用`tr -d '{}'`：

```
tr -d '{}' file.txt | awk '{ for( i=2; i<=NF; i++ ) print $i }' 
```

从 2 开始循环计数器`i`只是跳过第一个参数 ( `-foo`)的快速方法

# html - 使用 CSS，当您最终必须指定 'min-width' 和 'max-width' 时，'width' 有什么好处？

> ID：15664865
> 
> 赞同：1
> 
> 时间：2013-03-27T17:01:42.673
> 
> 标签：html, css

我知道我不理解 CSS 不时做的一些事情，但是，我经常将“宽度”样式设置为一个元素（比如一个输入元素），但如果有空间，它会增长以填充它（就好像它被设置为自动）和（比如对于一个选择元素）如果没有选项元素，它会缩小到最小的尺寸（当'宽度'仍然设置时）。

我意识到这些场景很容易用'min-width'和'max-width' CSS样式处理，但我的问题是：为什么在它并没有真正设置任何东西的情况下甚至有一个'width'样式（似乎）？在这种情况下到底发生了什么？

我正在寻找一个有助于我理解 CSS 在这种情况下的行为方式的答案。

--------------------------**更新**----------- ----------------------------------

正如这里的其他人向我展示的那样，我观察到的行为一定是由其他一些因素引起的（可能是因为输入元素在 td 元素中？有时表格确实看起来做奇怪的事情），显然这里显示的 jsFiddles 没有t复制我的场景。不知道我是如何误解 CSS 这样的，但无论如何，这个问题仍然很有帮助，因为我从关于何时/为什么应该使用“min-width”和“max-width”而不是简单地使用的答案/解释中受益设置“宽度”。

简而言之，“width”、“max-width”和“min-width”在正确的场景下肯定有它们的用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:39:44.190

原因是这样的：

*   宽度 - 将其翻译为“这是我想要的元素的宽度”。
*   min-width - 将其翻译为“请不要让我的元素宽度小于此值”。
*   max-width - 将其翻译为“请不要让我的元素宽度大于此值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:48:00.057

如果您不知道`original width`容器的名称，并希望将其限制为某个宽度，则`max-width`使用

如果您想在容器中展开内容，但又不想超过 200px，则使用 max-width,,,,,,,,

考虑这种情况

1.您正在使用`width`

2.（你不知道容器的宽度）

3.你不希望它超过200px

如果你盲目地放`width="200px"`，那么容器可能只有 150px，而 50px 被浪费在屏幕上。因此使用了 max-width

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:38:29.170

所以我为你做了一些挖掘。97ldave 是正确的，它与浏览器兼容性和用户之间的屏幕分辨率差异有关。

查看[w3schools - Width 属性](http://www.w3schools.com/cssref/pr_dim_width.asp)，然后查看[w3schools- Max-width 属性](http://www.w3schools.com/cssref/pr_dim_max-width.asp)。滚动到名为“浏览器兼容性”的部分。看起来`Width-min max`在 IE 中的支持比其他支持更远。

希望对您有所帮助，该网站可以作为快速参考。

# javascript - 将多个值传递给 JS 函数并返回给 c#

> ID：15664869
> 
> 赞同：0
> 
> 时间：2013-03-27T17:01:50.280
> 
> 标签：javascript, jquery, asp.net, html

用户单击按钮，按钮加载 JQuery 对话框，用户单击“删除”并将 2 个值传递给 WorkItemMgr.cs 上的 DeleteInvoice()

```
 <input id="RemoveInvoice" type="button" value="Remove Invoice" onclick="ConfirmDeleteInvoice('<%:TempInvoiceId%>', '<%:InvoiceId %>')" />                                                           

        $("#RemoveInvoice").click(ConfirmDeleteInvoice);

        function ConfirmDeleteInvoice(InvoiceId, SiteIdentifier) {
            $("#dialog-confirm").dialog({
                resizable: false,
                height: 180,
                modal: true,
                buttons: {
                    Delete: function () {
                        WorkItemMgr.DeleteInvoice(InvoiceId, SiteIdentifier);
                        $(this).dialog("close");
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }
            });
        } 
```

我已经通过断点完成了它，并且正在传递 2 个正确的值，但是 `WorkItemMgr.DeleteInvoice(InvoiceId, SiteIdentifier); 出现错误

错误：JavaScript 运行时错误：对象不支持属性或方法“DeleteInvoice”

DeleteInvoice 是一种网络方法...

```
[WebMethod]
protected string DeleteInvoice(int InvoiceId, int SiteIdentifier)
{ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:16:49.937

据我所知，C# 确实支持可变参数。根据这个链接[http://msdn.microsoft.com/en-us/library/ms182366(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms182366(v=vs.80).aspx)你唯一要做的就是添加一个可变参数并直接从你的javascript发送功能。

希望能帮助到你 （：

# javascript - jslint - 不要在循环中创建函数

> ID：15664873
> 
> 赞同：5
> 
> 时间：2013-03-27T17:02:01.773
> 
> 标签：javascript, jslint

参考这个主题：[不要在循环中创建函数。- jslint 错误](https://stackoverflow.com/questions/6865798/dont-make-functions-within-a-loop-jslint-error)

您将如何处理 for 循环中的 jquery .each(function () {...}？知道我需要“每个”函数中“for”的上下文。当然，我可以将每个所需的参数映射到function 在循环之外声明的函数，但从我的角度来看，它会影响可读性。

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T22:54:10.247

好吧，您可以在循环中保留 for 的上下文，因为 for 中的所有内容实际上与开始时声明的函数处于相同的上下文中。

所以让我们以 Frits 的例子为例，但首先让我们先让这个 JSLint 完全快乐（减去循环错误中调用的函数）。

```
/*global console*/
var my_func, i, list;
for (i = 0; i < list.length; i+= 1) {
    my_func = function (i) {
        console.log(i);
    };
    my_func(i);
} 
```

**请注意，*每次*迭代循环时，您都在重新*声明*`my_func`函数。这不酷！为什么一遍又一遍地重新声明相同的功能？**

提前声明它，像这样：

```
/*global console*/
var my_func, i, list;

my_func = function (i) {
    console.log(i);
};

for (i = 0; i < list.length; i+= 1) {
    my_func(i);
} 
```

成功。现在您不必为每次迭代创建一个函数。而且，由于 JSLint 通过将所有声明推到顶部来帮助您实现`var`，您仍然可以获得相同的上下文。

* * *

**编辑：**正如[@Flame 指出的那样](https://stackoverflow.com/questions/15664873/jslint-dont-make-functions-within-a-loop/15671104?noredirect=1#comment49862855_15671104)，您不必使用 jQuery 提前声明函数`each`并且可以使用匿名函数，但提前声明并不是一个坏主意，特别是如果您要在多个`each`调用中重用逻辑. 主要的收获是理解 1.) 早期声明实践仍然有优势，并且 2.) jQuery 仍然会向您的函数发送参数（这里是我们所调用的`index`），尽管 JSLint*不会*（并且不应该）抱怨`each`s 中使用的匿名函数（[这里是 jQuery 酱](https://github.com/jquery/jquery/blob/bb026fc12c3c2ad37f47f0919e484bddcdc3d291/src/core.js#L270)）。

如果您习惯了匿名`$.each(function() {});`构造，它最初会有点不直观，但它同样简单。

```
/*global alert, $ */
$( "li" ).each(function( index ) {
    alert( index + ": " + $(this).text() );
}); 
```

... 变成...

```
/*global $, alert */
var fnOutside = function(index) {
    alert( index + ": " + $(this).text() );
};
$( "li" ).each(fnOutside); 
```

这可能会造成短暂的混淆，因为函数调用没有参数，但 jQuery 将“索引”参数推送到函数。`arguments`如果您想省略命名，您可以抓取上下文数组以查看它仍然被推入其中。

[小提琴色](http://jsfiddle.net/9fdPb/1/)

也就是说，`for`构造不会创建新的闭包。这可能让你担心。没问题！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T17:05:50.123

循环中的函数的问题是：this,

```
for (var i = 0; i < list.length; i+= 1) {
    function my_func(i) {
        console.log(i);
    }
    my_func(i);
} 
```

将被解释为：

```
var my_func;
for (var i = 0; i < list.length; i+= 1) {
    my_func = function (i) {
        console.log(i);
    }
    my_func(i);
} 
```

因为可变提升。所有声明都将移到范围的顶部（即函数）。因此，在 for 循环中定义函数实际上没有意义。

如果您想在 for 循环中绑定到计数器，只需关闭即可。

只是要清楚：

```
$("..").each(function () {
    for(..) {
    }
}); 
```

很好。

```
for(..) {
    $("..").each(function () {

    });
} 
```

不好，因为它相当于：

```
var my_func;
for(..) {
    my_func = function () {
        // ..
    }
    $("..").each(my_func);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T17:12:57.457

听起来问题更多的是警告而不是您的代码。是的，在没有警告的情况下通过 JSLint 测试会很好，但其中一些可能是不合理的，并导致不必要的代码重构。

此问答中的讨论是相关的：[我应该使用 JSLint 还是 JSHint JavaScript 验证？](https://stackoverflow.com/a/6803574/1022333)其他 lint 工具比 JSLint 更灵活，因此您可以继续使用您的个人编码偏好，而不一定是 Crockford 的个人编码偏好。

我建议您考虑使用其他工具来检查您的 JavaScript，并且不要牺牲代码的可读性或可维护性。

# php - MVC 和 codeigniter 中的正确架构是什么？

> ID：15664874
> 
> 赞同：1
> 
> 时间：2013-03-27T17:02:03.423
> 
> 标签：php, codeigniter, architecture

我知道这种类型的问题被问了很多，我自己也问过一次这个问题，但是似乎没有答案适合我的问题。我认为，通过采用“一般”方法而不是特定方法，它对自己和他人都会更有帮助。

诸如“从视图加载控制器”“从控制器加载控制器”“从另一个视图加载带有控制器的视图”之类的问题经常被问到，到目前为止我得出的结论是，并不是没有办法做到这一点（我自己找到了一个解决方案）它只是一个糟糕的架构问题。

所以，我的问题是，什么是好的架构？

如果您想加载不同的视图并帮助您组织，模板方法很有用。那太棒了。我认为问题是这样的：

-模型1，控制器1，视图1

-模型2，控制器2，视图2

-view3

-view4

您可以找到一种在视图 1 或 2 中加载视图 3 和 4 的方法。但是当您想在视图 1 中加载视图 2 时会发生什么？无法在其中包含 controller2。

我不是在问一种包含它的方式，我是在问正确的做法是什么？我已经看到了很多“重用模型”的答案。但我不太明白那是什么意思。

我认为回答这个问题并不能解决我迄今为止遇到的问题（因为该项目是如此先进，我不得不重做），但它会帮助我在未来的项目中从一开始就做到这一点。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:32:09.150

视图的最佳实践之一是设计它，例如三个文件夹

*   常见的
*   内容
*   布局

**Common :**将有许多 html 片段，如菜单、侧边栏、页眉、页脚...等，甚至还有一些较小的部分，如评论框或其他

**内容：**类似于常见但更多与内容相关的视图，在除常见之外的大多数网站中都很有用

**布局：**此文件夹将包含您网站的可能布局，其中包含常见和内容视图

this 对于更多理解 MVC 的观点，请查看这篇[文章](http://www.bennadel.com/blog/2379-A-Better-Understanding-Of-MVC-Model-View-Controller-Thanks-To-Steven-Neiland.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:13:18.440

我喜欢保持简单...

模型与我的数据库或其他数据源交互。这就是他们所做的一切。它们将数据作为输入并返回数据。

控制器充当请求端点并控制应用程序流/条件。他们获得正确的数据（来自模型），验证数据（来自用户），决定做什么。然后，他们用正确的数据加载正确的视图。

视图只是显示控制器交给它们的任何数据的 HTML 模板。我的观点中唯一的“处理”是迭代数组以产生可重复的元素、格式化和有条件地显示元素/数据。

我能想到的唯一真实实例是一个视图在其中加载另一个视图，例如导航元素或其他在多个（但不是所有）页面上重复的常见 HTML 元素。

# javascript - Javascript 按钮 ID 选择

> ID：15664877
> 
> 赞同：1
> 
> 时间：2013-03-27T17:02:10.580
> 
> 标签：javascript, jquery

我是 Javascript 的新手，似乎我在这里遗漏了一些简单的东西。我只想返回我正在单击的按钮的 ID，但我却得到“未定义”。

HTML

```
<div class="btn-group" id="{{user.get('name')}}">
    <button class="btn" id="voteup">^^</button>
    <h4>{{user.get('vote')}}</h4>
    <button class="btn" id="votedown">vv</button>    
</div> 
```

JAVASCRIPT

```
$(document).ready(".btn").click(function() {
    var id = this.id;
    alert(id);
)}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:03:49.883

试试这个

```
$(document).ready(function() {
    $(".btn").click(function() {
        alert($(this).attr("id"));
    });

}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T17:03:27.307

你把事情搞混了。[`$(document).ready()`](http://api.jquery.com/ready/)接受 DOM 树完全加载时执行的处理函数。正确的解决方案是：

```
$(document).ready(function() {
    $(".btn").click(function() {
        var id = this.id;
        alert(id);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:03:38.043

如果您使用的是 jQuery，您可以`id`像这样读取属性：

```
$(this).attr('id'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:04:28.387

绑定点击监听器的正确方法是

```
$(function(){
    $(document).on("click",".btn",function(e){
          alert($(this).prop("id"));
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T17:05:49.350

我认为您应该尝试这种方式：

```
jQuery(document).ready(function(){
  jQuery('.btn').live('click', function(){
    var id = jQuery(this).attr('id');
    alert(id);
  });
}); 
```

试试看，告诉我们是否有效（：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T17:12:25.470

当然，您的 javascript 中有错误：

```
$(document).ready(".btn").click(function() { //<----here in doc ready handler
   var id = this.id;
   alert(id);
)}; //<---------------closing of the handler 
```

这应该改为：

```
$(document).ready(function(){
   $(".btn").click(function() {
      var id = this.id;
      alert(id);
   });
}); 
```

# android - GetFieldID：找不到字段 Ljava/util/HashMap;.loadFactor:F

> ID：15664882
> 
> 赞同：2
> 
> 时间：2013-03-27T17:02:31.017
> 
> 标签：android, serialization, objectoutputstream, objectinputstream

我的 Android 应用程序序列化对象（使用`ObjectOutputStream`）。每次我对一个（使用`ObjectInputStream`）进行反序列化时，我都会收到很多这样的调试消息：

```
01-20 06:44:22.274: D/dalvikvm(2204): GetFieldID: unable to find field Ljava/util/HashMap;.loadFactor:F 
```

这发生在 Android 2.3 但不是 4.2。巧合的是，Android 2.3 的性能非常糟糕，应用程序很快就会耗尽内存。

这个警告到底是什么意思？我能做些什么来避免它吗？

# sql - 返回具有最早和最新时间 戳的行

> ID：15664883
> 
> 赞同：0
> 
> 时间：2013-03-27T17:02:32.587
> 
> 标签：sql, teradata

我现在正在 TERADATA 中处理一个 sql 脚本以及我试图获取它的内容，因此当我搜索特定的 USERID 时，它将返回 USERID 并具有`RSLVD_DTTM`与该 USERID 关联的 OLDEST 和 LATEST 时间戳。

```
USERID     RSLVD_DTTM
USER1      12/06/2012  
USER1      08/01/2013  
USER1      06/11/2012  
USER1      03/04/2012 
```

如您所见，它会射出一堆日期......我希望它只是最旧的日期和最新的日期。

这就是我试图让它看起来像的样子，另外，如果可能的话，我试图让它加入一条线。我对 TERADATA 相当陌生，可以使用一些帮助。

```
 USERID     RSLVD_DTTM(OLDEST) RSLVD_DTTM(LATEST)
USER1      03/04/2012         08/01/2013 
```

这是我的查询，

```
select 
 USERID,
 RSLVD_DTTM
from 
symmktg.VREMEDY_SYM_TICKET
where 
USERID IS IN ('USER1') 
```

请记住，我是这个领域的新手，请解释一下您的遮阳篷。

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:06:47.637

你应该能够做这样的事情：

```
SELECT USERID, MIN(RSLVD_DTTM) MinDate, MAX(RLSVD_DTTM) MaxDate
FROM symmktg.VREMEDY_SYM_TICKET
GROUP BY USERID 
```

这将为您提供每个用户的数据。如果您一次只需要一个用户的数据，应该这样做：

```
SELECT USERID, MIN(RSLVD_DTTM) MinDate, MAX(RLSVD_DTTM) MaxDate
FROM symmktg.VREMEDY_SYM_TICKET
WHERE USERID = 'USER1' 
```

做一个`IN`让我觉得你可能有多个用户；如果是这种情况，则将该`WHERE`子句添加到第一个示例中。

# flash - 使用 JSFL 检查库项目的“使用计数”

> ID：15664899
> 
> 赞同：1
> 
> 时间：2013-03-27T17:03:09.050
> 
> 标签：flash, jsfl

我做了一些研究，从我读过的内容来看，JSFL 中似乎没有与 Flash IDE 中的“选择未使用的项目”相同的东西。

有谁知道至少能够通过循环浏览整个图书馆来检查该项目是否被使用的属性？像 item.useCount...

我正在检查 adobe 文档，但找不到任何东西...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:18:45.420

编辑：所以我刚刚遇到了这个简洁的小菜单项，它可以选择未使用的项目……不需要 JSFL。它隐藏在库面板标题的上下文下拉菜单中。单击该下拉菜单，然后单击“选择未使用的项目”。Flash 将选择所有未使用的库项目，它甚至会跳过具有链接名称的库项目以进行动态实例化。所以这真的取决于你......你可以使用这个方法或下面的脚本。

我不能完全相信您在下面看到的代码，因为我正在使用一些我从位于此处的现有脚本中遇到的代码：

[燃料 - 更好的使用计数](https://code.google.com/p/fueljsfl/source/browse/trunk/%5B+FUEL+%5D+-+Better+Use+Count.jsfl?r=2)

存在的脚本会检查以查看手动选择的库项目的使用计数。它的设计非常智能，它甚至会检查项目是否包含链接名称，但不一定在舞台上。这是为了确保您不会删除任何可能被动态实例化的项目。我所做的是将现有代码放在一个 for 循环中，该循环根据循环的当前项运行检查。

```
// Remove Unused Library Symbols

var dom = fl.getDocumentDOM();
if (dom == null)
{
    alert('Please open a file.');
}
else
{
    var lib = dom.library;
    var activeItem;
    var isFound;
    var item;
    var libItems = lib.items;

    fl.outputPanel.clear();

    for ( var i = 0; i < libItems.length; i++ )
    {
        var curLibItemName = libItems[i].name;
        var curLibItemSelection = lib.selectItem(curLibItemName, true, true);
        var selectedItem = lib.getSelectedItems();

        function scanTimeline(_timeline, _mainTimeline)
        {
            var timeline = _timeline;
            var layerCount = timeline.layerCount;

            while (layerCount--)
            {
                var frameCount = timeline.layers[layerCount].frameCount;

                while (frameCount--)
                {
                    if (timeline.layers[layerCount].frames[frameCount] == undefined)
                    {
                        continue;
                    }

                    var elems = timeline.layers[layerCount].frames[frameCount].elements;
                    var p = elems.length;

                    while (p--)
                    {
                        // Check if it's an instance in the library
                        if (elems[p].elementType == 'instance')
                        {
                            // Check if it's the same clip as our active check
                            if (elems[p].libraryItem.name == activeItem.name)
                            {
                                found = true;
                                var where;

                                if(_mainTimeline == true)
                                {
                                    where = 'Located in the main timeline.';
                                }
                                else
                                {
                                    where = 'Located in the library item: ' + item.name;
                                }

                                frameCount = 0;
                            }
                        }
                    }
                }
            }
        }

        function scanLibrary()
        {
            var items = lib.items;

            for (var i = 0; i < items.length; i++)
            {
                item = items[i];

                if(item.itemType == 'movie clip')
                {
                    scanTimeline(item.timeline, false);
                }
            }
        }

        // Safety check
        if (selectedItem.length == 0)
        {
            alert('Please make a selection in the library.');
        }
        else
        {
            activeItem = selectedItem[0];
            found = false;

            // Scan the main timeline first
            scanTimeline(dom.getTimeline(), true);

            // Scan the library
            scanLibrary();

            if (found == false)
            {
                if (activeItem.linkageClassName != undefined)
                {
                    fl.trace(curLibItemName + ' was not found on the stage, but it does have a linkage name so it may be instantiated dynamically.  Use caution before deleting.');
                }
                else
                {
                    fl.trace(curLibItemName + ' was not found on the stage and will be removed.');
                    lib.deleteItem(curLibItemName);
                }
            }
        }   
    }
} 
```

正如我所提到的，我不能为此获得所有功劳，因为脚本的原始开发人员为此命令完成了大部分繁重的工作。在包含原始代码的 FUEL 页面中，Julian Dolce 似乎负责这项工作。原始的代码许可证是麻省理工学院许可证（MIT）。

您可以将上面的代码复制到一个新的 JSFL 文档中并将其保存在您的 commands 文件夹中，或者从下面的链接下载 jsfl 文件并将其放置在您的 commands 文件夹中。

[下载：删除未使用的库 Symbols.jsfl](http://andrewdollanimation.squarespace.com/storage/downloads/Remove%20Unused%20Symbols.jsfl)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T20:55:09.403

选择未使用的库项目 - Flash Pro CC

```
var unusedArr = fl.getDocumentDOM().library.unusedItems;

for(var i=0;i<unusedArr.length;i++) 
    fl.getDocumentDOM().library.selectItem(unusedArr[i].name,false,true);

fl.trace(unusedArr.length+' Items selected'); 
```

# javascript - 仅在 Chrome 中未捕获的 TypeError

> ID：15664904
> 
> 赞同：2
> 
> 时间：2013-03-27T17:03:23.353
> 
> 标签：javascript, google-chrome, typeerror

我有一个非常奇怪的问题，在 JavaScript 中调用一个简单的函数。

举个例子，即使是一个简单的：

```
<a href='#' onclick="javascript:alert(123);">click</a> 
```

或者：

```
<a href='#' onclick="alert(123);">click</a> 
```

给我一个**Uncaught TypeError: object is not a function**。但仅在 Chrome 中且仅在我的笔记本上。在我的工作站（相同的系统，完全相同的 Chrome 版本）和其他所有浏览器中，这条线按预期工作。

几年以来我一直在使用 JS，但是这个错误让我从几天开始就发疯了。

该网站带有 scriptaculous 和一些手写 JS，但没有什么特别之处。scriptaculous 运行良好，JS-Console 没有显示任何错误，除了我笔记本上的@Chrome。

你们中的任何人以前有过这种情况吗？我真的不知道发生了什么。

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T07:00:21.903

利用

```
window.alert('msg)'; 
```

它会工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:11:49.967

我的建议是通过 javascript 分配它，而不是像内联属性。有时您会遇到奇怪的行为，将其设置为属性。

你可以使用 jQuery：

```
jQuery('.myClickableLink').click(function(){ alert(123) }) 
```

我认为这是一种更简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:16:49.487

我打赌你在劫持window.alert的那台机器上安装了一个弹出窗口阻止程序。禁用插件，看看它是否正常工作。[通常弹出窗口阻止程序会这样做]

# cookies - 无法使用自定义域名解密 cookie

> ID：15664907
> 
> 赞同：0
> 
> 时间：2013-03-27T17:03:25.770
> 
> 标签：cookies, azure, forms-authentication

我正在使用 Windows Azure 云服务，当我使用我的域名而不是 [CLOUDSERVICENAME].cloudapp.net 访问它时，我遇到了身份验证 cookie 的问题。

我正在创建 cookie

```
 FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(
                     1,
                     serializeModel.Username,
                     DateTime.Now,
                     DateTime.Now.AddMinutes(15),
                     false,
                     userData);

        string encTicket = FormsAuthentication.Encrypt(authTicket);
        System.Web.HttpCookie faCookie = new System.Web.HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
        Response.Cookies.Add(faCookie); 
```

但是当我尝试解密它时，我得到一个空值。

```
 HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];

            if (authCookie != null)
            {
                FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

                JavaScriptSerializer serializer = new JavaScriptSerializer();

                if (!String.IsNullOrEmpty(authTicket.UserData))
                { 
```

这很奇怪，因为这只发生在使用我的域名访问它的情况下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:21:01.930

我发现当我使用我的自定义域（在 SSL 证书下运行）时，cookie 大小会增加。我相信这与证书加密有关。

为了解决这个问题，我必须从 cookie 用户数据中删除一些参数，以保证它不会增长到超过 4096 字节（浏览器 Cookie 限制：[http](http://browsercookielimits.x64.me/) ://browsercookielimits.x64.me/ ）

# ios - cocos2d 定位

> ID：15664915
> 
> 赞同：0
> 
> 时间：2013-03-27T17:03:45.080
> 
> 标签：ios, cocos2d-iphone

[这里是源](http://dl.dropbox.com/u/8352276/GridWars.zip)

问题是我的射弹的开始和结束位置都偏离了。我已经知道了`NSLog`所有的内容，`CGPoints`并且从我可以看到输入的点`CCSequence`是正确的。但从我在屏幕上看到的情况来看，情况有所不同。

我认为错误的一个重要线索是，如果创建一个新的 CCSprite 并像我使用射弹一样使用它，那么路径就会起作用。

这里是游戏关卡层的addProjectile方法（GameLevels:Level1Layer）

```
-(void)addProjectile:(Projectiles*)projectile
{
    NSLog(@"projectile position %@",NSStringFromCGPoint(projectile.position));
    NSLog(@"wizard position %@",NSStringFromCGPoint(self.wizardHero.position));
    NSLog(@"wizard position worldspace %@",NSStringFromCGPoint([self convertToWorldSpace:self.wizardHero.position]));
    NSLog(@"destination position %@",NSStringFromCGPoint(projectile.destination.position));

    [self addChild:projectile];

    // Determine where we wish to shoot the projectile to
    int realX;

    CGPoint diff = ccpSub(projectile.destination.position,projectile.position);
    if (diff.x > 0)
    {
        realX = (self.tileMap.mapSize.width * self.tileMap.tileSize.width) +
        (projectile.contentSize.width/2);
    } else {
        realX = -(self.tileMap.mapSize.width * self.tileMap.tileSize.width) -
        (projectile.contentSize.width/2);
    }
    float ratio = (float) diff.y / (float) diff.x;
    int realY = ((realX - projectile.position.x) * ratio) + projectile.position.y;
    CGPoint realDest = ccp(realX, realY);

    // Determine the length of how far we're shooting
    int offRealX = realX - projectile.position.x;
    int offRealY = realY - projectile.position.y;
    float length = sqrtf((offRealX*offRealX) + (offRealY*offRealY));
    float velocity = 280/1; // 280pixels/1sec
    float realMoveDuration = length/velocity;

    // Move projectile to actual endpoint
    id actionMoveDone = [CCCallFuncN actionWithTarget:self
                                             selector:@selector(projectileMoveFinished:)];
    [projectile runAction:
     [CCSequence actionOne:
      [CCMoveTo actionWithDuration: realMoveDuration
                          position: realDest]
                       two: actionMoveDone]];

    [self.projectiles addObject:projectile];
} 
```

这些`NSLog`语句的输出将是（仅供参考：射弹是从添加的`self.wizardHero`，因此这是它的起始位置；目的地是`self.redEnemy`）：

> 2013-03-27 10:41:57.295 GridWars[13025:c07] 弹丸位置 {105, 178}
> 
> 2013-03-27 10:41:57.296 GridWars[13025:c07] 向导位置 {105, 178}
> 
> 2013-03-27 10:41:57.297 GridWars[13025:c07] 向导位置世界空间 {105, 178}
> 
> 2013-03-27 10:41:57.298 GridWars[13025:c07] 目标位置 {299, 174}
> 
> 2013-03-27 11:34:46.608 GridWars[13344:c07] realDest {650, 166}
> 
> 2013-03-27 11:34:46.608 GridWars[13344:c07] 长度 545.132080
> 
> 2013-03-27 11:34:46.610 GridWars[13344:c07] realMoveDuration 1.946900

我意识到，对于超级类，我很难说出发生了什么（有点为什么我包含了源代码）。基本上虽然我有三个主要的超类，它们是从`CCNode`

```
Projectiles : CCNode
        sprite : CCSprite
        destination : GameCharacters
        damage : int

GameLevels : CCNode
        hud : HudLayer
        tileMap : CCTMXTiledMap
        enemies : NSMutablArray
        projectiles : NSMutablArray

GameCharacters : CCNode
        hp : int
        juice : int
        sprite : CCSprite
        selectedTargets : NSMutablArray
        hostLayer : GameLevels 
```

那么实际实现这些的三个类

```
 BasicProjectile : Projectiles
        Level1Layer : GameLevels
        WizardHero : GameCharacter
        RedEnemy : GameCharacter 
```

尽管问题略有发展，但我已将其发布在[cocos2d 论坛上](http://www.cocos2d-iphone.org/forum/topic/281826?replies=8#post-447746)并获得了一些帮助，这使我达到了这一点（看到弹丸，但路径错误而不是根本看不到它们）。但是已经有几天了，所以希望得到更多帮助。

**GameProjectiles:CCNode**

```
#import "CCNode.h"

//forward declaration because we just need to hold a reference
@class GameCharacters;

@interface GameProjectiles : CCNode

@property(nonatomic, strong) CCSprite * sprite;
@property(nonatomic,strong) GameCharacters * destination;
@property(nonatomic) int damage;
-(id)initWithDestination:(GameCharacters*)Destination;
-(CGSize)contentSize;

@end

#import "GameProjectiles.h"

@implementation GameProjectiles

-(id)initWithDestination:(GameCharacters*)Destination
{

    if (self = [super init]) {
        _damage = 0;
        _destination = Destination;
    }
    return self;
}

-(CGSize)contentSize{
    return self.sprite.contentSize;
}

-(void)setPosition:(CGPoint)position
{
    [super setPosition:position];
    self.sprite.position = position;
}
@end 
```

**基本弹丸**

```
#import "GameProjectiles.h"

@interface BasicProjectile : GameProjectiles

@end

#import "BasicProjectile.h"

@implementation BasicProjectile

-(id)initWithDestination:(GameCharacters*)Destination
{
    if (self = [super init]) {
        self.damage = 25;
        self.sprite = [CCSprite spriteWithFile:@"Projectile.png"];
        [self addChild:self.sprite z:1000 ];
        self.destination = Destination;
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:36:37.253

由于您的射弹和目标位于单独的 CCNode 内，因此它们的边界框返回它们在其父级内的位置，而不是在实际的屏幕坐标中（在您的情况下您想要）。

要转换 pos 你可以这样做

```
 CGPoint targetPos = [basicProjectile.destination.sprite.parent convertToWorldSpace:basicProjectile.destination.sprite.position];
    NSLog(@"targetPos  %@",NSStringFromCGPoint(targetPos));
    CGRect targetRect = [self boundingRectForSprite:basicProjectile.destination.sprite andPos:targetPos];

    CGPoint projectilePos = [basicProjectile.sprite.parent convertToWorldSpace:basicProjectile.sprite.position];
    NSLog(@"projectilePos  %@",NSStringFromCGPoint(projectilePos));
    CGRect projectileRect = [self boundingRectForSprite:basicProjectile.destination.sprite andPos:projectilePos]; 
```

该`boundingRectForSprite`方法使用精灵边界框和位置，然后计算最终的矩形取锚点（0.5,0.5）。

现在`targetRect`和`projectileRect`是实际的屏幕坐标。

# vb6 - VB6 应用程序：WebBrowser.Navigate 每 3 分钟刷新一次

> ID：15664916
> 
> 赞同：1
> 
> 时间：2013-03-27T17:03:46.680
> 
> 标签：vb6, timer, browser, browser-refresh

我正在使用 VB6 制作一个应用程序，其中使用以下代码启动 WebBrowser 窗口：

```
 Private Sub Form_Load()
     WebBrowser1.Navigate ("http://google.com")
     End Sub 
```

如何让窗口每隔 3 分钟刷新一次相同的 url？我知道它应该是众所周知的，但我仍在通过 VB 编程寻找我的方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:20:25.620

您不需要 2 个计时器。只需有一个全局变量`globalTimer As Date`来保存您上次导航的时间您可以将 Timer1 设置为每秒或每分钟运行一次。为了更准确，我建议每秒。

```
Dim globalTimer As Date
...
Private Sub Timer1_Timer()
    If Now >= DateAdd("n", 3, globalTimer) Then    ' its been at least 3 minutes since last Navigation
        WebBrowser1.Navigate ("http://google.com") ' Navigate
        globalTimer = Now                          ' store the new navigation time
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:08:24.813

您可以使用计时器定期运行代码。由于 VB6 定时器的最大间隔约为 65 秒，您可以将其设置为 60,000 毫秒的间隔，并保留一个单独的计数器，当它达到 3 时，将其重置回 0 并执行刷新。

```
Private Sub Timer_Timer
  'Increment minute count
  FireCount = FireCount + 1

  If FireCount = 3 then
    'Reset to 0 for next time
    FireCount = 0

    'Refresh web browser
  End If
End Sub 
```

# vb.net - DirectoryInfo.Exists 使用 UNC 路径返回 false

> ID：15664921
> 
> 赞同：0
> 
> 时间：2013-03-27T17:03:52.560
> 
> 标签：vb.net, dns, directory, tablet, unc

好吧，我有一个在非域平板电脑上的应用程序。

在启动应用程序外壳命令正确的凭据到网络 unc 路径

```
Shell("net use \\mypath\destloca password username") 
```

这个命令是正确的，并且做了它应该做的事情。

接下来，我打电话

```
 Dim dir As New IO.DirectoryInfo(loca)

 If Not dir.Exists Then
        MessageBox.Show("There are no records for loca", "Alert", MessageBoxButtons.OK, MessageBoxIcon.Asterisk, MessageBoxDefaultButton.Button1, MessageBoxOptions.ServiceNotification)
        Exit Sub
    End If 
```

这通常可以正常工作，但是每隔一段时间它就会返回 false。网络已连接，但我无法访问域资源。

但是，在我再次 Shell 之后，我能够访问 UNC 路径。

有人有什么想法吗？

# oracle - 删除 Oracle 数据库中的已连接用户

> ID：15664924
> 
> 赞同：56
> 
> 时间：2013-03-27T17:03:54.620
> 
> 标签：oracle

我想使用 sqlplus 删除 Oracle DB 中的一些用户，但出现错误：

```
SQL> DROP USER test CASCADE;
DROP USER test CASCADE
*
ERROR at line 1:
ORA-01940: cannot drop a user that is currently connected 
```

我按照 SO 中的链接查找会话 - [Dropping a connected user from an Oracle 10g database schema](https://stackoverflow.com/questions/85804/dropping-a-connected-user-from-an-oracle-10g-database-schema)

但是当我运行命令时，我没有得到任何结果：

```
SQL> select sid,serial# from v$session where username = 'test';

no rows selected 
```

请帮助我在这种情况下如何删除用户。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-27T17:40:52.493

用户都是`v$session`（和数据字典视图）中的大写字母。如果您与大写字母匹配，您应该找到要杀死的会话。

```
SELECT s.sid, s.serial#, s.status, p.spid 
  FROM v$session s, v$process p 
 WHERE s.username = 'TEST' --<<<--
  AND p.addr(+) = s.paddr
 / 
```

为用户 TEST 传递实际 SID 和 SERIAL# 值，然后删除用户...：

```
ALTER SYSTEM KILL SESSION '<SID>, <SERIAL>'
/ 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-02-11T11:18:50.570

解决方案 ：

以 sysdaba 身份登录：

```
sqlplus  / as sysdba 
```

然后：

```
sql>Shutdown immediate;

sql>startup restrict;

sql>drop user TEST cascade; 
```

如果要正常重新激活数据库，请重置服务器或：

```
sql>Shutdown immediate;

sql>startup; 
```

:)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-06-06T03:30:43.557

问题已使用以下程序修复：

```
DECLARE
  v_user_exists NUMBER;
  user_name CONSTANT varchar2(20) := 'SCOTT';
BEGIN
  LOOP
    FOR c IN (SELECT s.sid, s.serial# FROM v$session s WHERE upper(s.username) = user_name)
    LOOP
      EXECUTE IMMEDIATE
        'alter system kill session ''' || c.sid || ',' || c.serial# || ''' IMMEDIATE';
    END LOOP;
    BEGIN
      EXECUTE IMMEDIATE 'drop user ' || user_name || ' cascade';
      EXCEPTION WHEN OTHERS THEN
      IF (SQLCODE = -1940) THEN
        NULL;
      ELSE
        RAISE;
      END IF;
    END;
    BEGIN
      SELECT COUNT(*) INTO v_user_exists FROM dba_users WHERE username = user_name;
      EXIT WHEN v_user_exists = 0;
    END;
  END LOOP;
END;
/ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-23T13:41:03.190

做一个查询：

`SELECT * FROM v$session s;`

找到您的用户并执行下一个查询（使用适当的参数）：

`ALTER SYSTEM KILL SESSION '<SID>, <SERIAL>';`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-08T22:12:58.627

转到管理工具中的服务并选择 oracleserviceSID 并重新启动它

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-02T18:49:54.977

我试图按照这里描述的流程 - 但没有运气完全终止会话。然后我喜欢这里的额外步骤：
[http ://wyding.blogspot.com/2013/08/solution-for-ora-01940 -cannot-drop-user.html](http://wyding.blogspot.com/2013/08/solution-for-ora-01940-cannot-drop-user.html)

我做了什么：
1\. `select 'alter system kill session ''' || sid || ',' || serial# || ''';' from v$session where username = '<your_schema>';`- 如下所述。
输出将是这样的：
`alter system kill session '22,15' immediate;`
2\. `alter system disconnect session '22,15' IMMEDIATE ;`- 22-sid, 15-serial - 对从上一个命令返回的每个会话重复该命令
3\. 重复步骤 1-2，但`select...`不返回空表
4\. 调用 `drop user...`

错过了什么 -`alter system disconnect session '22,15' IMMEDIATE ;`为每个返回的会话调用`select 'alter system kill session '..`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-19T10:27:07.053

如果您使用 RAC，那么您需要使用`GV$*`视图来代替`V$*`。尝试通过以下方式找到您的会话

```
select * from gv$session where username = 'test'; 
```

然后你可以通过

```
alter system kill session 'sid, serial#, @inst_id' immediate; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-01T12:14:32.813

这可以很简单：

```
SQL> ALTER SYSTEM ENABLE RESTRICTED SESSION;

SQL> DROP USER test CASCADE;

SQL> ALTER SYSTEM DISABLE RESTRICTED SESSION; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-15T05:50:17.893

我有同样的问题，默认的 Oracle 配置会影响字母寄存器。确切地说，我的 Scheme_Name 全部是大写字母。如果您使用的是 Oracle S，您可以在“其他用户”选项卡上看到您的 Scheme_Name

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-21T13:26:09.530

基本上我认为杀死所有会话应该是解决方案，但是......

我发现了类似的讨论 - [https://community.oracle.com/thread/1054062](https://community.oracle.com/thread/1054062)解决了我的问题，那是我没有针对该用户的会话，但我仍然收到错误消息。我也尝试了第二个最佳答案：

```
sql>Shutdown immediate;

sql>startup restrict;

sql>drop user TEST cascade; 
```

最后对我有用的是以用户身份登录，手动删除所有表 - 选择创建删除语句是

```
select 'drop table ' || TABLE_NAME || ';'  from user_tables; 
```

（因引用需要重新运行多次）

我不知道这有什么关系，我还删除了函数和序列（因为这就是我在模式中所拥有的全部）

当我这样做并注销时，我在`v$session`表中有几个会话，当我杀死这些会话时，我能够删除用户。

我的数据库仍然以受限模式启动（不确定是否重要）。

可能会帮助别人。

顺便说一句：我的 Oracle 版本是`Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-21T19:53:17.600

有时[Oracle 删除用户](https://orahow.com/how-to-drop-user-in-oracle/)需要很长时间才能执行。在这种情况下，用户可能已连接到数据库。更好的是，您可以终止用户会话并删除用户。

`SQL> select 'alter system kill session ''' || sid || ',' || serial# || ''' immediate;' from v$session where username ='&USERNAME';`

`SQL> DROP USER barbie CASCADE;`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-19T04:29:15.023

```
//'SYS' is username from where you wanted to kill session'
SELECT * FROM DBA_TAB_PRIVS WHERE GRANTEE = 'SYS';

**Step 1:**

CREATE OR REPLACE PROCEDURE sys.kill_session(p_sid NUMBER, p_serial NUMBER)
AS
v_user VARCHAR2(30);
BEGIN
SELECT MAX(username)
INTO v_user
FROM v$session
WHERE sid = p_sid
AND serial# = p_serial;
**Step 2**
create or replace procedure kill_session( p_sid in number, p_serial# in number)
 is v_count pls_integer;
 BEGIN
 select count(*) into v_count
 from V$session
 where username = 'SYS'
 and sid = p_sid
 and serial# = p_serial# ;
 if ( v_count = 1 )
 then
 execute immediate '
 alter system kill session ''' ||
 to_char(p_sid,'999999')||','||
 to_char(p_serial#,'999999')||'''';
 else
 raise_application_error( -20001,
 'You do not own session ''' ||
 p_sid || ',' || p_serial# ||
 '''' );
end if;
 END;
 /

**Step 3**
 grant execute on kill_session to SYS;
**Step 4**
select inst_id, sid, serial#, username, action, program, service_name, con_id from gv$session where username like 'FCM_469';
Check there will be no sessions now
**Step 5**
DROP USER USER_345 CASCADE;
Output:User Dropped 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-03-23T16:02:25.490

以下是我在 Oracle 数据库中“自动”删除连接用户的方法：

```
# A shell script to Drop a Database Schema, forcing off any Connected Sessions (for example, before an Import) 
# Warning! With great power comes great responsibility.
# It is often advisable to take an Export before Dropping a Schema

if [ "$1" = "" ] 
then
    echo "Which Schema?"
    read schema
else
    echo "Are you sure? (y/n)"
    read reply
    [ ! $reply = y ] && return 1
    schema=$1
fi

sqlplus / as sysdba <<EOF
set echo on
alter user $schema account lock;
-- Exterminate all sessions!
begin     
  for x in ( select sid, serial# from v\$session where username=upper('$schema') )
  loop  
   execute immediate ( 'alter system kill session '''|| x.Sid || ',' || x.Serial# || ''' immediate' );  
  end loop;  
  dbms_lock.sleep( seconds => 2 ); -- Prevent ORA-01940: cannot drop a user that is currently connected
end;
/
drop user $schema cascade;
quit
EOF 
```

# sql - 选择内连接column2 NULL

> ID：15664926
> 
> 赞同：0
> 
> 时间：2013-03-27T17:03:58.807
> 
> 标签：sql, sql-server-2008, inner-join

> 表已关闭
> 
> id cls_id users_id
> 
> 1----1---------1
> 
> 2----1---------2

sql

```
select cls_id,
cls_name,
MAX(case when rn = 1 then users_id end) user_id1,
MAX(case when rn = 2 then users_id end) user_id2
from
(
SELECT cr.cls_id, 
    cr.cls_name, 
    u1.users_id,
    ROW_NUMBER() over(partition by cr.cls_id order by u1.users_id) rn
FROM classroom cr
INNER JOIN clsown co
    ON co.cls_id = cr.cls_id 
INNER JOIN users AS u1 
    ON co.users_id = u1.users_id and u1.users_id =1
) d
group by cls_id, cls_name; 
```

我明白了

```
cls_id cls_name users_id1 users_id2
  1     room1       1        NULL 
```

我想看

```
cls_id cls_name users_id1 users_id2
  1     room1       1         2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:12:53.147

您的代码中有一个`and u1.users_id =1`，这就是您获得所看到结果的原因。bluefeet 的 SQL Fiddle 显示了没有它的结果，看起来它工作正常。

```
select cls_id,
    cls_name,
    MAX(case when rn = 1 then users_id end) user_id1,
    MAX(case when rn = 2 then users_id end) user_id2
from
(
    SELECT cr.cls_id, 
        cr.cls_name, 
        u1.users_id,
        ROW_NUMBER() over(partition by cr.cls_id order by u1.users_id) rn
    FROM classroom cr
    INNER JOIN clsown co
        ON co.cls_id = cr.cls_id 
    INNER JOIN users AS u1 
        ON co.users_id = u1.users_id 
) d
group by cls_id, cls_name; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/87e1c/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:13:31.143

`and ul.users_id = 1`从`on`子句中删除：

```
select cls_id,
cls_name,
MAX(case when rn = 1 then users_id end) user_id1,
MAX(case when rn = 2 then users_id end) user_id2
from
(
SELECT cr.cls_id, 
    cr.cls_name, 
    u1.users_id,
    ROW_NUMBER() over(partition by cr.cls_id order by u1.users_id) rn
FROM classroom cr
INNER JOIN clsown co
    ON co.cls_id = cr.cls_id 
INNER JOIN users AS u1 
    ON co.users_id = u1.users_id
) d
group by cls_id, cls_name; 
```

# knockout.js - 使用 Jasmine 和 Knockout 模拟计算字段

> ID：15664927
> 
> 赞同：0
> 
> 时间：2013-03-27T17:04:01.440
> 
> 标签：knockout.js, jasmine, stubbing

我正在尝试为`ko.computed`依赖于其他两个复杂计算的字段编写测试（在此处删除以进行演示）。

```
function PositionsViewModel(options) {
  var self = this;
  self.computed1 = ko.computed(function() { return 1; });
  self.computed2 = ko.computed(function() { return 2; });
  self.computedIWantToTest = ko.computed(function() { 
    return self.computed1() + self.computed2();
  });
} 
```

在我的茉莉花测试中，我在 beforeEach 中创建了一个 VM 实例，如下所示：

```
this.subject = new PositionsViewModel(); 
```

我希望能够存根`computed1`，`computed2`以便我可以单独测试`computedIWantToTest`。到目前为止，我这样做的尝试都失败了。

我试过直接在 vm 实例上存根。但是，似乎即使方法被覆盖，计算的缓存也会以某种方式缓存函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:10:49.127

一种方法是注入前两个计算函数。

[http://jsfiddle.net/kevincollins/RwKAD/](http://jsfiddle.net/kevincollins/RwKAD/)

```
var PositionsViewModel = function (computedService1, computedService2, options) {

  this.defaultComputed1 = ko.computed(function() { return 1; });
  this.defaultComputed2 = ko.computed(function() { return 2; });

  this.computed1 = computedService1 || this.defaultComputed1;
  this.computed2 = computedService2 || this.defaultComputed2;

  var self = this;
  this.computedIWantToTest = ko.computed(function() { 
    return self.computed1() + self.computed2();
  });

};

var vm1 = new PositionsViewModel();
ko.applyBindings(vm1, document.getElementById("o1"));

var ComputedServiceMock1 = ko.computed(function() { return 100; });
var ComputedServiceMock2 = ko.computed(function() { return 200; });       

var vm2 = new PositionsViewModel(ComputedServiceMock1, ComputedServiceMock2);
ko.applyBindings(vm2, document.getElementById("o2")); 
```

# hibernate - 我正在尝试更新 DATA 但此查询与插入一起使用

> ID：15664928
> 
> 赞同：-1
> 
> 时间：2013-03-27T17:04:01.860
> 
> 标签：hibernate, jakarta-ee, spring-mvc

```
Query quer = sess.createQuery("update materialrate  set materialId=:MaterialId, subWorkId=:SubWorkId,unitId=:UnitId ,rate=:Rate, lastUpdatedUserId=:LastUpdatedUserId  where materialRateId=:MaterialRateId");
 quer.setInteger("materialId", n.getMaterialId());
        quer.setInteger("subWorkId", n.getSubWorkId());
        quer.setInteger("unitId", n.getUnitId());
        quer.setInteger("rate",n.getRate());
       // quer.setDate("lastUpdatedDate", current_timestamp());//lastUpdateDate=:current_timestamp() ,
        quer.setInteger("lastUpdatedUserId", n.getLastUpdatedUserId());
        quer.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:28:46.617

由于您使用的是命名参数，因此在设置这些参数的值时需要使用相同的名称。用以下行替换您的代码：

```
Query quer = sess.createQuery("update materialrate  set materialId=:MaterialId, subWorkId=:SubWorkId,unitId=:UnitId ,rate=:Rate, lastUpdatedUserId=:LastUpdatedUserId  where materialRateId=:MaterialRateId");
 quer.setInteger("MaterialId", n.getMaterialId());
        quer.setInteger("SubWorkId", n.getSubWorkId());
        quer.setInteger("UnitId ", n.getUnitId());
        quer.setInteger("Rate",n.getRate());
       // quer.setDate("lastUpdatedDate", current_timestamp());//lastUpdateDate=:current_timestamp() ,
        quer.setInteger("LastUpdatedUserId ", n.getLastUpdatedUserId());
        quer.executeUpdate(); 
```

# ftp - SSIS FTP 任务 - 下载源文件方法

> ID：15664929
> 
> 赞同：0
> 
> 时间：2013-03-27T17:04:02.213
> 
> 标签：ftp, ssis

我要开发一个 SSIS 包，它必须从 FTP 位置下载文件列表。尽管检索生成的文件的频率和时间已与客户端达成一致。

我多次注意到，在连接时，正在创建用户文件 (CSV)（大小逐渐增加），并且下载的文件内容部分完整。我收到的一个建议是有一个*“检查文件”*，该文件将被创建，并且客户端创建文件的结束会通知我该文件已准备好下载，如果找不到，则不会发生下载.

但是，我想知道是否有其他选项可用，可以集成到 SSIS 中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:45:17.330

我会遵循“检查文件”模式。我不会介绍一种新的通信模式（例如电子邮件），这意味着进一步的复杂性和配置。

最近对于 FTP 任务，我一直在调用 WinSCP 而不是使用 SSIS FTP 任务。它具有更好的功能。这是他们关于这个主题的信息：

[http://winscp.net/eng/docs/script_checking_file_existence](http://winscp.net/eng/docs/script_checking_file_existence)

# javascript - JSfiddle：我的小提琴的 javascript (*.js) url 是什么？所以我可以通过 src 重用它

> ID：15664930
> 
> 赞同：12
> 
> 时间：2013-03-27T17:04:07.417
> 
> 标签：javascript, jquery, src, jsfiddle, web-ide

**要获取的 url 是什么，并且只能获取[这个 fiddle](http://jsfiddle.net/hugolpz/QUTcW/37/#id_code_js)的 javascript 代码？**

所以稍后，我可以通过使用`<script rel="" src=""></script>`链接调用它来进行测试，例如：

```
<script rel="script" src="http://jsfiddle.net/.../.../myFiddleScrip.js"></script> 
```

JSfiddle 存储我们的脚本版本，而我的 IDE 没有。

* * *

**编辑：**我知道 /show/ 页面，我的问题是**有独立的 .js 页面吗？**

* * *

**编辑：**截至 2013 年 3 月，以下模式有效！（请+1丹尼的回答！）

*   [http://jsfiddle.net/username/c0dE5/dd/show_js/ **_**](http://jsfiddle.net/hugolpz/QUTcW/37/show_js/)
*   [http://jsfiddle.net/hugolpz/QUTcW/37/show_css/ **_**](http://jsfiddle.net/hugolpz/QUTcW/37/show_css/)
*   [http://jsfiddle.net/hugolpz/QUTcW/37/show_html/ **_**](http://jsfiddle.net/hugolpz/QUTcW/37/show_html/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T17:47:41.510

看起来您可以使用以下内容将其添加到您的页面：

```
<script type="text/javascript" src="http://jsfiddle.net/hugolpz/QUTcW/37/show_js/"></script> 
```

但是，该网址看起来没有正式记录，并且可能会更改。更多信息[在这里](https://github.com/jsfiddle/jsfiddle-issues/issues/180#issuecomment-5817729)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T17:08:25.370

看到这个：查看源： http: [//fiddle.jshell.net/hugolpz/QUTcW/37/show/](http://fiddle.jshell.net/hugolpz/QUTcW/37/show/)

他们不创建单独`.js`的文件，他们只是将您的脚本放在`script`标签中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:43:15.663

**编辑：**丹尼的新解决方案要容易得多！

* * *

从 BrianDHall 的评论中出现了这个沉重的方向

1.  获取源[http://jsfiddle.net/userName/CODE/DD/](http://jsfiddle.net/userName/CODE/DD/)
2.  获取 js 面板的内容（例如：）`$('textarea#id_code_js').value()`，
3.  清理并使用它。

有兴趣可以进一步探索。

**如果您精通 JS，请随时分享解决此问题的脚本。我会验证它。**

# angularjs - AngularJS：基本的 $watch 不起作用

> ID：15664933
> 
> 赞同：17
> 
> 时间：2013-03-27T17:04:27.093
> 
> 标签：angularjs, watch

我正在尝试在 AngularJS 中设置手表，但我显然做错了，但我无法弄清楚。手表在立即页面加载时触发，但是当我更改观察值时它不会触发。作为记录，我还在匿名函数上设置了监视以返回监视变量，但我得到了完全相同的结果。

我在下面搭建了一个最小的例子，在控制器中做所有事情。如果它有所作为，我的实际代码与指令挂钩，但两者都以同样的方式失败。我觉得我必须缺少一些基本的东西，但我只是看不到它。

HTML：

```
<div ng-app="testApp">
    <div ng-controller="testCtrl">
    </div>
</div> 
```

JS：

```
var app = angular.module('testApp', []);

function testCtrl($scope) {
    $scope.hello = 0;

    var t = setTimeout( function() { 
        $scope.hello++;
        console.log($scope.hello); 
    }, 5000);

    $scope.$watch('hello', function() { console.log('watch!'); });
} 
```

超时有效，`hello`增加，但手表不触发。

演示在[http://jsfiddle.net/pvYSu/](http://jsfiddle.net/pvYSu/)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-27T17:10:32.930

这是因为您在 Angular 不知道的情况下更新了值。

您应该使用该`$timeout`服务而不是`setTimeout`，您无需担心该问题。

```
function testCtrl($scope, $timeout) {
    $scope.hello = 0;

    var t = $timeout( function() { 
        $scope.hello++;
        console.log($scope.hello); 
    }, 5000);

    $scope.$watch('hello', function() { console.log('watch!'); });
} 
```

或者你可以调用 $scope.$apply(); 强制角度重新检查值并在必要时调用手表。

```
var t = setTimeout( function() { 
    $scope.hello++;
    console.log($scope.hello); 
    $scope.$apply();
}, 5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T06:31:00.773

您可以在没有 $interval 和 $timeout 的情况下使用

```
$scope.$watch(function() {
            return variableToWatch;
        }, function(newVal, oldVal) {
            if (newVal !== oldVal) {
                //custom logic goes here......
            }
        }, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T14:58:40.050

它也可能发生，因为 div 未向控制器注册。如下向您的 div 添加一个控制器，您的手表应该可以工作：

```
<div ng-controller="myController"> 
```

# javascript - 在javascript中关闭子窗口onunload事件

> ID：15664935
> 
> 赞同：0
> 
> 时间：2013-03-27T17:04:30.963
> 
> 标签：javascript, window.open

我正在开发一个具有 onload 事件的项目

```
var opsWin = window.open ('url','_blank', 'options);
var preWin= window.open ('url','_blank', 'options);
var pkgWin= window.open ('url','_blank', 'options);
var apcWin= window.open ('url','_blank', 'options);

opsWin.focus();
preWin.focus();
pkgWin.focus();
apcWin.focus(); 
```

这些弹出窗口显示用户在继续之前需要查看的 4 个不同的 PDF。我的问题出现在我的 onunload 事件上：

```
function unLoadDocs(){
alert(opsWin) 
opsWin.close();
preWin.close();
pkgWin.close();
apcWin.close();
} 
```

我的警报是出于调试目的，以确保我在那里并看到 opsWin 确实存在（它确实在那里并且它确实存在并且在范围内）。我的问题是 Internet Explorer 10 中的文档没有关闭。我在 Mozilla Firefox 中尝试了相同的脚本，它运行良好。

关于为什么这些窗口不会在 Internet Explorer 10 上关闭的一些见解会很棒。（我也尝试过 IE9，但没有成功）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T17:50:24.670

弹出窗口是 PDF 的，因此 adobe 阅读器将其打开/具有不同的句柄。最终，我打开了另一个具有 100% 宽度和高度 i-Frame 的窗口，并将 PDF 嵌入到 i-Frame 中。然后我可以使用上面的卸载功能关闭窗口。

# php - 从 wp_posts 中删除 post_author = $userID;

> ID：15664937
> 
> 赞同：-1
> 
> 时间：2013-03-27T17:04:43.543
> 
> 标签：php, mysql, sql, wordpress

我的functions.php中有这段代码

```
global $current_user;
$userid = $current_user->ID;
$args = array(
    'post_type' => 'listings',
    'post_status' => 'publish',
    'author' => $userid
);
$the_posts = get_posts ( $args ); // get the published posts for that author
$post_count = count($the_posts); // count the number of published posts for the author
$N = 2; // set number for max posts per user
if ($post_count > $N) {
    if (current_user_is('s2member_level1')) {   

       // This is where I want to delete from wp_post where post_author = $userID

    }
} 
```

我对 SQL 查询不够熟悉，无法弄清楚它为什么不起作用。我试过了

```
$wpdb = "DELETE FROM wp_posts WHERE post_author = $userID;" 
```

和

```
$wpdb->query("DELETE FROM wp_posts WHERE post_author = $userID;"); 
```

全球 $wpdb; 在我的 php 文件中较早地定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:06:41.900

删除应不带 * 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:45:25.470

尝试使用 $user_ID = get_current_user_id(); 在全局 $current_user; 之后。或声明 $current_user 后的 get_currentuserinfo()；然后通过 $user_ID = $current_user->ID 获取当前用户 id。有关获取当前用户登录的更多信息，请参阅[http://codex.wordpress.org/Function_Reference/get_currentuserinfo](http://codex.wordpress.org/Function_Reference/get_currentuserinfo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:07:01.637

查询应该是这样的：

```
DELETE FROM table WHERE ....; 
```

在你的情况下：

```
"DELETE FROM wp_posts WHERE post_author = $userID;" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:07:22.960

您应该用 ' 将值括起来

像这样：

```
$wpdb = "DELETE FROM wp_posts WHERE post_author = '$userID';" 
```

# regex - 正则表达式重音不出现

> ID：15664939
> 
> 赞同：0
> 
> 时间：2013-03-27T17:04:46.973
> 
> 标签：regex, diacritics

我有这个简单的代码，我需要将一些带有重音的单词匹配，但它不像我需要的那样工作。这是代码

```
<?
    $ab=("BÉLICA HOL");
    preg_match_all("/[A-ZÑÁÉÍÓÚ\.]+\b/", $ab,$match_mayusculas);
    print_r($match_mayusculas);

?> 
```

结果是这样的： Array ( [0] => Array ( [0] => BÃ‰LICA [1] => HOL ) ) 为什么？

如果我这样做 $ab=utf8_decode("BÉLICA HOL"); 结果是 Array ( [0] => Array ( [0] => B [1] => LICA [2] => HOL ) ) 我的错误在哪里？

真的谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:16:39.407

这有效 utf8_decode($match_mayusculas[0][0]) 谢谢 sp00m

# ruby-on-rails-3 - 'Expected to define' 错误通过模型调用 lib，直接在控制台中调用时很好（自动加载）

> ID：15664940
> 
> 赞同：-2
> 
> 时间：2013-03-27T17:04:53.393
> 
> 标签：ruby-on-rails-3

我的结构类似于（基于[此](https://stackoverflow.com/questions/10948779/expected-to-define-when-calling-class-inside-a-module)）：

```
# lib/myapp/uploader.rb
require 'uploader/base'

# lib/myapp/uploader/base.rb
module MyApp
  module Uploader
    class Base
    end
  end
end

# app/models/model.rb
class Model < ActiveRecord::Base
  def test
    MyApp::Uploader::Base
  end
end 
```

直接在控制台调用：

```
$ MyApp::Uploader::Base #> MyApp::Uploader::Base 
```

通过控制台中的模型：

```
$ Model.new.test
LoadError: Expected <snip>/lib/myapp/uploader.rb to define Uploader 
```

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:14:29.097

更新答案：

在这种情况下，您缺少模型中的要求

所以在你的`app/models/model.rb`

```
# app/models/model.rb
class Model < ActiveRecord::Base

  require Rails.root.join('lib').join('myapp').join('uploader').join('base').to_s 

  def test
    MyApp::Uploader::Base
  end
end 
```

# entity-framework - 实体框架 - 按 ID 插入

> ID：15664943
> 
> 赞同：0
> 
> 时间：2013-03-27T17:04:55.753
> 
> 标签：entity-framework, bulkinsert

我正在从 XML 文件中导入大量“链接”记录，并且我想使用实体框架将它们插入到我的 SQL 链接表中。我的链接表实际上只有 2 列，它们都是 FK 并构成 PK：

```
[UserAssessmentId] [int] NOT NULL
[AnswerId] [int] NOT NULL 
```

我习惯于插入的方式涉及以下内容：

1.  从数据库中获取`UserAssessment`实体`userAssessmentId`。
2.  从数据库中获取`Answer`实体`answerId`。
3.  将实体添加`Answer`到`UserAssessment`实体的`Answers`集合中。
4.  重复 2 和 3 为每个`answerId`添加。
5.  打电话`context.SaveChanges()`。

问题在于，在添加数百个答案时，这非常耗费数据库；EF 必须获取它添加到链接表的*每个答案的记录！*我只想插入一条带有 given`userAssessmentId`和 a given的记录`answerId`，而不是先遇到获取实体的麻烦。EF 不必担心我插入的 ID 是否有效；只是假设他们是。有没有办法让 EF 做到这一点，还是我只需要使用普通 SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:35:33.470

最简单的选择可能是创建一个单独的上下文和一个简单的实体来表示您的链接表。

```
[Table("Name of the link table")]
public class UserAssessmentAnswer
{
   public int UserAssessmentId { get; set; }
   public int AnswerId { get; set; }
}

public class UserAssessmentAnswerContext : DbContext
{
   public UserAssessmentAnswerContext() 
      : base("Connection string for the real context")
   {
   }

   public IDbSet<UserAssessmentAnswer> UserAssessmentAnswers
   {
      get { return Set<UserAssessmentAnswer>(); }
   }
} 
```

然后你可以使用新的上下文和实体来插入你的数据：

```
using (var context = new UserAssessmentAnswerContext())
{
   context.UserAssessmentAnswers.Add(new UserAssessmentAnswer
   {
      UserAssessmentId = ...,
      AnswerId = ...
   });
   ...
   context.SaveChanges();
} 
```

* * *

**编辑**
您需要为新上下文关闭数据库初始化。在您的配置文件中，添加：

```
<entityFramework>
   <contexts>
      <context 
         type="YourNamespace.UserAssessmentAnswerContext, YourAssembly" 
         disableDatabaseInitialization="true"
      />
   </contexts>
</entityFramework> 
```

或者，您可以将以下代码添加到您的启动中：

```
Database.SetInitializer<UserAssessmentAnswerContext>(null); 
```

# php - 试图将数据库行插入对象

> ID：15664944
> 
> 赞同：-3
> 
> 时间：2013-03-27T17:04:59.330
> 
> 标签：php, sql

我正在尝试将数据库行插入到对象中，但我不明白这里有什么问题：（我看不到输出）。

```
<body>
<?php header('Content-Type: text/html; charset=utf-8');
include("dash_class.php");
mysql_connect("localhost", "root", "") or
    die("Could not connect: " . mysql_error());
mysql_select_db("msordash");
mysql_query("SET NAMES 'utf8'");
$dashim=mysql_query("SELECT * FROM dash");

while ($row = mysql_fetch_array($dashim)) { 
    $dash=new dash($row["name"],$row["msg"],$row["msg_date"]);

    echo $dash->name;
}
?>

</body> 
```

**类代码：**

```
class dash
{
public $name;
public $msg;
public $msg_date;

function __constractor($name,$msg,$msg_date){
$this->name=$name;
$this->msg=$msg;
$this->msg_date=$msg_date;}

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:09:25.630

什么是 constraaaaaaaaaactor？:) 对不起，`constractor`准确的说是什么？

```
function __constractor($name,$msg,$msg_date){ 
```

它应该是

```
__construct() 
```

像

```
function __construct($name,$msg,$msg_date){ 
```

# java - 将所有子目录合并到一个 jar 中

> ID：15664945
> 
> 赞同：2
> 
> 时间：2013-03-27T17:04:59.700
> 
> 标签：java, ant

我有一个这样的目录结构（在 Netbeans 中几乎是标准的）

```
src/
build/generated/gen-1
build/generated/gen-2
...
build/generatad/gen-n 
```

我使用以下 ant 命令将所有源打包在一个 jar 中：

```
<jar destfile="sources.jar" compress="true">
    <fileset dir="src"/>
    <fileset dir="build/generated/gen-1"/>
    <fileset dir="build/generated/gen-2"/>
    ...
    <fileset dir="build/generated/gen-n"/>
</jar> 
```

有没有一种简洁的方式可以说我想将 的所有子目录组合在一起`build/generated`，但避免使用 gen *-i*前缀？

我尝试摆弄`<dirset>`，但无法将其与`<jar>`.

我想要一种避免将所有内容复制到临时目录的方法（就像在[这个答案](https://stackoverflow.com/a/2794365/472393)中一样）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:15:13.523

假设您至少有 Ant 1.8，您可以使用`<mappedresources>`

```
<jar destfile="sources.jar" compress="true">
    <fileset dir="src"/>
    <mappedresources>
        <fileset dir="build/generated"/>
        <regexpmapper from="^gen-\d*/(.*)$$" to="\1" handledirsep="true"/>
    </mappedresources>
</jar> 
```

（注意属性中的双美元符号，`from`由于 Ant 在属性中进行属性扩展的方式，它实际上是正则表达式中的单美元）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:10:46.417

我怀疑这在 Ant 中是可能的。您可以查看[一个 jar](http://one-jar.sourceforge.net/index.php?page=build-tools&file=ant)库，但该库还需要指定所有文件集。

如果您有机会使用其他构建工具，那么我会推荐[Gradle](http://www.gradle.org/)，这绝对是可能的。

# php - 服务器端应用程序的 Google+ 登录身份验证不起作用

> ID：15664950
> 
> 赞同：10
> 
> 时间：2013-03-27T17:05:22.250
> 
> 标签：php, javascript, wordpress, google-plus

我试图为 wordpress 网站添加 Google+ 身份验证。我想要什么：如果用户未在网站上注册，则在 Google+ 中进行身份验证后 - 我将他重定向到他输入用户名的页面；如果用户已经注册 - 它将登录。这里是我的 js 代码：

```
function doGooglePlusLogin(authResult) {
    if (authResult['code']) {
        jQuery('#signinButton').attr('style', 'display: none');
        jQuery.ajax({
            url: '<?php echo site_url(); ?>/wp-admin/admin-ajax.php',
            type: 'get',
            dataType: 'json',
            data: {
                action: 'login_gplus',
                code: authResult['code']
            },
            success: function(result) {
            },
        });
    } else if (authResult['error']) {
    }
} 
```

这是我的php代码：

```
function login_gplus() {
$response = array();

if (isset($_GET['code']) && !empty($_GET['code'])) {
    @session_start();
    $client = new Google_Client();
    $client->setApplicationName('Test');
    $client->setAccessType('offline');
    $client->setClientId(get_option(SOCIAL_GPLUS_CLIENT_ID));
    $client->setClientSecret(get_option(SOCIAL_GPLUS_CLIENT_SECRET));
    $client->setDeveloperKey(get_option(SOCIAL_GPLUS_API_KEY));
    $client->setRedirectUri(get_option(SOCIAL_GPLUS_REDIRECT_URIS));
    $client->setApprovalPrompt('auto');

    $code = $_GET['code'];
    $client->authenticate($code);

    $token = json_decode($client->getAccessToken());
    $reqUrl = 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=' . $token->access_token;
    $req = new Google_HttpRequest($reqUrl);

    $tokenInfo = json_decode(
            $client->getIo()
                    ->authenticatedRequest($req)
                    ->getResponseBody());

    if ($tokenInfo->error) {
        $response['test'] = $tokenInfo->error;
        send_json_response($response);
        die();
    }
    if ($tokenInfo->audience != get_option(SOCIAL_GPLUS_CLIENT_ID)) {
        $response['test'] = "Token's client ID does not match app's.";
        send_json_response($response);
        die();
    }
    $response['test'] = 'Succesfully connected with token: ' . print_r($token, true);
}
send_json_response($response);
die();
} 
```

用户在 Google+ 中成功授权，但在 php 中我得到了这个：

致命错误：在 /var/www/html/v4/wp-content/plugins/social/google-plus/google-api/auth 中带有消息“获取 OAuth2 访问令牌时出错，消息：'redirect_uri_mismatch'”的未捕获异常“Google_AuthException” /Google_OAuth2.php:113堆栈跟踪：#0 /var/www/html/v4/wp-content/plugins/social/google-plus/google-api/Google_Client.php(131): Google_OAuth2->authenticate(Array, ' 4/ScmpTqEIWt0SJ...')#1 /var/www/html/v4/wp-content/plugins/social/google-plus/functions.php(35): Google_Client->authenticate('4/ScmpTqEIWt0SJ... ')#2 [内部函数]: login_gplus('')#3 /var/www/html/v4/wp-includes/plugin.php(406): call_user_func_array('login_gplus', Array)#4 /var/www /html/v4/wp-admin/admin-ajax.php(74): do_action('wp_ajax_nopriv_...')#5 {main} 在第 113 行抛出 /var/www/html/v4/wp-content/plugins/social/google-plus/google-api/auth/Google_OAuth2.php

在应用程序设置重定向 URI 中指定为[http://example.com/wp-admin/admin-ajax.php](http://example.com/wp-admin/admin-ajax.php)。我做错了什么？

**编辑**：

Google+ 登录按钮定义：

```
<span id="signinButton">
  <span class="g-signin"
   data-callback="doGooglePlusLogin"
   data-clientid="<?php echo $this->gplus_client_id; ?>"
   data-cookiepolicy="single_host_origin" data-accesstype="offline"
   data-requestvisibleactions="http://schemas.google.com/AddActivity"
   data-scope="https://www.googleapis.com/auth/plus.login">
  </span>
</span> 
```

SOCIAL_GPLUS_REDIRECT_URIS 是`example.com/wp-admin/admin-ajax.php?action=login_gplus`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T13:46:38.737

您的代码基本上是正确的，但是有一个小怪癖，我可以看到没有很好的记录！您必须将 redirectURI 设置为 postmessage 而不是您使用的 URL。

```
$client->setRedirectUri('postmessage'); 
```

因此，它与按钮在 Javascript 交换期间为令牌设置的 URI 匹配。查看以下示例代码：[https](https://github.com/googleplus/gplus-quickstart-php/blob/master/signin.php) ://github.com/googleplus/gplus-quickstart-php/blob/master/signin.php以查看它的实际效果。我会确保我们在文档中添加注释。

# django - 配置不当：导入中间件 app.middleware 时出错：“无法导入名称 get_host”

> ID：15664951
> 
> 赞同：8
> 
> 时间：2013-03-27T17:05:23.223
> 
> 标签：django

我刚刚升级到 Django 1.5，当我尝试访问页面时，出现以下错误：

```
ImproperlyConfigured: Error importing middleware app.middleware: "cannot import name get_host" 
```

在 shell 中，我尝试了类似的事情：

```
>>> from app import middleware
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File ".../middleware.py", line 2, in <module>
    from django.http import HttpResponseRedirect, HttpResponsePermanentRedirect, get_host
ImportError: cannot import name get_host 
```

导入失败`get_host`。这似乎没有被弃用，这是怎么回事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T17:25:42.343

在 Django 1.5`django.http.get_host()`中被替换为`request.get_host()`. 请参阅[此处](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.get_host)`HttpRequest`的对象方法。

# bash - 强制仅符号链接

> ID：15664957
> 
> 赞同：0
> 
> 时间：2013-03-27T17:05:49.803
> 
> 标签：bash

所以，我脑洞大开，删除了一些硬链接（以及链接的文件）。我通常不使用硬链接，所以有没有比默认强制符号链接更好的方法

```
alias ln='ln -s' 
```

在我的`~/.bashrc`

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:30:38.987

在这种情况下，我建议您使用另一个名称创建别名，否则当您真的想创建硬链接时，您必须输入`\ln ...` (或`link`)

如果你有

```
alias lns='ln -s' 
```

您通常可以键入`lns ...`符号链接，当您需要创建硬链接时，您可以键入`ln...`. 此外，您仍然可以`ln -s ...`手动练习打字....

希望能帮助到你

# algorithm - 这七个点在寻找最近的点对的解释

> ID：15664962
> 
> 赞同：6
> 
> 时间：2013-03-27T17:05:55.767
> 
> 标签：algorithm, computational-geometry

我试图掌握各种文献中最近对点问题的解释。尽管它们的基本方法都是相同的，即分而治之（分而治之）和线性时间合并（合并/征服），但实际实现在文章和书籍之间略有不同。

线性时间合并是这里的关键，它试图限制要比较的点数。

[Kleinberg 书中](https://rads.stackoverflow.com/amzn/click/com/0321295358)考虑点的方式与这篇[Wikipedia 文章](https://en.wikipedia.org/wiki/Closest_pair_of_points_problem)或[Cormen 书中](https://rads.stackoverflow.com/amzn/click/0262033844)考虑点的方式有点不同。

[无论如何，对于后两者，我们可以很好地解释此处](https://stackoverflow.com/questions/12437201/closest-pair-of-points)和[此处](http://www.cs.mcgill.ca/~cs251/ClosestPair/ClosestPairDQ.html)要考虑的点数，包括许多其他点。

对于手头的问题，请查看[Kleinberg book的](https://rads.stackoverflow.com/amzn/click/com/0321295358)[这些幻灯片](http://www.cs.princeton.edu/~wayne/kleinberg-tardos/05DivideAndConquer.pdf)（幻灯片 32）。的声明在同一张幻灯片中。更详细的解释可以[在](http://courses.engr.illinois.edu/cs473/w/lec/06_notes.pdf)第 6 页第 6.2.5.6 节中找到。`11 point gap`

然而，在[上述幻灯片](http://www.cs.princeton.edu/~wayne/kleinberg-tardos/05DivideAndConquer.pdf)的同一页（幻灯片 32）中，我们发现类似*“如果我们将 12 替换为 7 仍然正确”的声明。*

我未能找到对上述主张的解释。

请看下图，

![在此处输入图像描述](../Images/0ca11734bcc0558bf129ad692f09181c.png)

如果我们考虑将红点与右半部分的点进行比较，则右半部分的点应该在阴影半圆中。我试图把极端的放在蓝色。它们仍然是 |5-(-2)|+1 = 8 和 |5-15|+1 = 11。

我可能在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T08:51:02.077

实际上，您不需要计算下半部分点的距离，因为在您的范围内，如果您考虑根据 y 轴排序的点，那么您从底部开始，只考虑其上方区域中的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:31:23.670

实际上，您可以在网格上放置 9 个点。如果 (0,0) 为中心并假设 delta=1，则在 (-1,-1)、(-1,0)、...、(1,1) 处可以有 9 个点。

证明它最多只有 9：

即使在最佳包装下，您也只能有 3 层圆，每个圆的半径为 (1/2)，所有中心都在 2X2 正方形内。

因此，在此之后差异下降到 8。要达到七，你必须假设它不是一个特殊情况（我忘记了它的技术术语，但它是计算几何中的一个流行假设。它还指出 3 个点不能在同一条线上。它被称为“一般性假设”或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T14:13:27.110

根据[CLRS](https://en.wikipedia.org/wiki/Introduction_to_Algorithms) 33.4：

[![在此处输入图像描述](../Images/67ef576de8c7f1bd075a583ca5c2a7ec.png)](https://i.stack.imgur.com/5WNgy.png)

l 线左边有**2**个点（见最左边的2个点）， l线右边有**2**个点（见最右边的2个点），l线有**4**个点（PL和PR都开相同的点）。

`2 + 2 + 4 = 8`

不包括自我，所以它是`8 - 1 = 7`

例如，我们正在计算 PL（l 上的上点）和其他点之间的距离，让我们逆时针计算：

*   第一个点（PL）是最左边的点，
*   第二个（PL）在左下角，
*   3rd (PL) 是 l 的底点，
*   4th (PR) 也是 l 的底点，
*   5th（PR）是右下角，
*   6th（PR）是右上角的，
*   7th (PR) 是 l 的上点。

# android - Android Media Player 中的事件是什么意思？

> ID：15664963
> 
> 赞同：0
> 
> 时间：2013-03-27T17:06:03.453
> 
> 标签：android, android-mediaplayer

我正在尝试分析在 Android 中播放视频时交换的消息流。我在这样做时遇到了这张图片。

[http://img521.imageshack.us/img521/3585/capturehb.png](http://img521.imageshack.us/img521/3585/capturehb.png)

然后我浏览了 AwesomePlayer 和 TimedEventQueue 的源文件。我无法理解这些文件中事件的含义。对此的任何帮助表示赞赏。
谢谢你。

TimedEventQueue 源文件的链接附在下面。

[https://github.com/cozybit/aosp-frameworks-base/blob/master/media/libstagefright/TimedEventQueue.cpp](https://github.com/cozybit/aosp-frameworks-base/blob/master/media/libstagefright/TimedEventQueue.cpp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T01:47:12.867

一般来说，`TimedEventQueue`是一种将 an`event`推入`queue`具有特定的机制`timeout`。在 结束时，将**调用**`timeout`与 相关联的函数，该函数`event`将执行一些功能。来到 和 的关系，请在下面找到该关系的概述。**`AwesomePlayer``TimedEventQueue`**

 **在 Android 中，`AwesomePlayer`是播放器引擎的核心实现，它产生`video`和`audio`跟踪相关路径，并有助于`player`引擎的整体运行。

除此之外，它还用作轨道`AwesomePlayer`的**SINK** ，即ie实现和显示管道 ie之间的桥梁。在进入之前，简单的操作总结如下。`video``OMXCodec``video decoder``SurfaceTexture``TimedEventQueue`

该`player`引擎在`pull`模型中工作，并通过调用`AwesomePlayer`从解码器中提取视频帧。`read`一旦*视频帧*可用，`AV Synchronization`逻辑就会进入画面，决定何时`render`播放该帧。一旦准备好渲染帧，就会通过调用将其传递给`SurfaceTexture`模块`mVideoRenderer->render`。

Coming to `TimedEventQueue`，`AwesomePlayer`使用这个概念来实现上述功能。当`start`调用 a时`postVideoEvent_l()`，调用 a。默认情况下，在 android 树中实现了一个时间延迟，之后触发此事件。当该事件被触发时，相应的函数被调用。在这种情况下，`onVideoEvent`被调用，然后将继续进行阻塞`read`调用。

接收到视频缓冲区后，如果*视频帧*比*音轨时间戳*早10 毫秒，则`postVideoEvent_l(10000)`触发另一个，这将迫使该线程再休眠 10 毫秒，之后`onVideoEvent`再次触发。

类似地，在一个视频帧`rendered`之后，`AwesomePlayer`将触发另一个视频帧，该帧将**默认**`postVideoEvent_l()`休眠一段时间并返回并再次阻塞呼叫。**`read`****

# jquery-ui - jquery 自动完成渲染项

> ID：15664964
> 
> 赞同：12
> 
> 时间：2013-03-27T17:06:06.743
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我有以下代码。它不会产生 js 错误。无法自动完成以显示任何结果：

```
$(function() {
    $.ajax({
    url: "data.xml",
    dataType: "xml",
    cache: false,
    success: function (xmlResponse) {
        var data_results = $("Entry", xmlResponse).map(function () {
            return {
                var1: $.trim($("Partno", this).text()),
                var2: $.trim($("Description", this).text()),
                var3: $.trim($("SapCode", this).text()),
                var4: $("Title", this).text(),
                var5: $.trim($("File", this).text()),
                var6: $.trim($("ItemID", this).text())
            };
        }).get();

        $("#searchresults").autocomplete({
            source: data_results,
            minLength: 3,
            select: function (event, ui) {
                ...
            }
        }).data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" ).data("item.autocomplete", item)
                    .append( "<a>" + item.var1 + "<br>" + item.var2 + "</a>")
                    .appendTo( ul );
        };

    }
}); 
```

有什么想法我可能会错过吗？提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-18T10:37:53.940

似乎`.data('autocomplete')`就是现在`.data('ui-autocomplete')`。

来源： http: [//jqueryui.com/upgrade-guide/1.10/#re​​moved-data-fallbacks-for-widget-names](http://jqueryui.com/upgrade-guide/1.10/#removed-data-fallbacks-for-widget-names)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-30T00:41:33.727

默认情况下，自动完成希望您的源数组包含具有**`label`**属性、**`value`**属性或两者兼有的对象。

考虑到这一点，您有两种选择：

1.  当您处理来自 AJAX 调用的数组时，将标签或值属性添加到源对象：

    ```
    var data_results = $("Entry", xmlResponse).map(function () {
        return {
            var1: $.trim($("Partno", this).text()),
            var2: $.trim($("Description", this).text()),
            var3: $.trim($("SapCode", this).text()),
            var4: $("Title", this).text(),
            var5: $.trim($("File", this).text()),
            var6: $.trim($("ItemID", this).text()),
            value: $.trim($("Description", this).text())
        };
    }).get(); 
    ```

    您分配的`value`将用于`focus`、`select`和 搜索。

2.  更改`source`函数以执行自定义过滤逻辑：

    ```
    $("#searchresults").autocomplete({
        source: function (request, response) {
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");

            response($.grep(data, function (value) {
                return matcher.test(value.var1) || 
                       matcher.test(value.var2);
                /* etc., continue with whatever parts of the object you want */
            }));
        },
        minLength: 3,
        select: function (event, ui) {
            event.preventDefault();
            this.value = ui.var1 + ui.var2;
        },
        focus: function (event, ui) {
            event.preventDefault();
            this.value = ui.var1 + ui.var2;
        }
    }).data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" ).data("item.autocomplete", item)
                .append( "<a>" + item.var1 + "<br>" + item.var2 + "</a>")
                .appendTo( ul );
    }; 
    ```

    请注意，使用此策略，您必须实现自定义`select`和`focus`逻辑。

# powershell - 以管理员身份运行，但仍然“不允许请求的注册表访问”

> ID：15664968
> 
> 赞同：8
> 
> 时间：2013-03-27T17:06:18.807
> 
> 标签：powershell

我有一个 Windows PowerShell 脚本。我以管理员身份登录到 Windows 并以管理员身份运行 PowerShell 并运行脚本，它可以工作；我可以看到运行此脚本后发生的所有更改。

但我仍然收到红色错误消息：

> 不允许请求的注册表访问

这让我发疯。

为什么我会收到这个错误，我怎样才能让它消失？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:34:08.870

如果您运行 regedit 并导航到您尝试使用脚本访问的密钥，则可以右键单击它并查看权限。您可以在该键上查看管理员拥有的权限（完全控制、读取、特殊权限）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-27T11:24:29.497

这个 PowerShell 技巧对我有用：

```
$Path = "SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.jpeg\UserChoice"
$SubKey = [Microsoft.Win32.Registry]::CurrentUser.OpenSubKey($Path, [Microsoft.Win32.RegistryKeyPermissionCheck]::ReadWriteSubTree, [System.Security.AccessControl.RegistryRights]::ChangePermissions)
$Acl = $SubKey.GetAccessControl()
$RemoveAcl = $Acl.Access | Where-Object {$_.AccessControlType -eq "Deny"}
$Acl.RemoveAccessRule($RemoveAcl)
$SubKey.SetAccessControl($Acl)
$SubKey.Close() 
```

**in $Path ==> 将其更改为您的路径（根文件夹后的路径）

**in $SubKey ==> [Microsoft.Win32.Registry]::CurrentUser ：将其更改为您需要的根注册表路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-07T11:06:39.603

# 通过 psexec 尝试作为本地系统

这对我有用：

*   从这里获取 psexec.exe：[https ://docs.microsoft.com/en-us/sysinternals/downloads/psexec](https://docs.microsoft.com/en-us/sysinternals/downloads/psexec)
*   用于`psexec.exe -i -s powershell.exe`以用户本地系统（参数）启动新的交互式（`-i`参数）powershell.exe 窗口`-s`。
*   在那个新的 powershell 窗口中再次尝试您的命令。

# c# - VSTO Excel：检测 ListObject 的最后一行已删除

> ID：15664975
> 
> 赞同：1
> 
> 时间：2013-03-27T17:06:31.730
> 
> 标签：c#, excel, vsto

所以我正在开发一个 VSTO Excel 应用程序，需要检测用户何时删除了 ListObject。

例如，在 Excel 中给出这样的表格

![在此处输入图像描述](../Images/f030680ce11ec06f759a4d6e03c7c961.png)

和一些像这样的代码

```
this.listObject.Change += (s,e) =>
{
   Debug.Print("Changed!);
}; 
```

删除最后一行时不会触发 ListObject.Change 事件！

有没有办法检测 ListObject 最后一行被删除，或者 ListObject 本身从工作表中删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:54:47.517

只是为了说清楚：您是删除整个电子表格行还是只删除表格行？从屏幕截图中，您似乎选择了整行。尝试只选择表格的一行（不是表格行之外的其他空单元格），然后右键单击 -> 删除 -> 删除行。这会触发您的活动吗？

您还可以在 Worksheet 上捕获 Change 事件并检查该行是否包含任何 ListObject 数据。

# ios - CAAnimationGroup 的最大持续时间值 (CFTimeInterval) 是多少？

> ID：15664976
> 
> 赞同：6
> 
> 时间：2013-03-27T17:06:36.630
> 
> 标签：ios, objective-c, ipad, core-animation, caanimation

我的 中有两个旋转动画`CAAnimationGroup`，一个从零开始，另一个从该状态重复和自动反转：

```
- (void)addWobbleAnimationToView:(UIView *)view amount:(float)amount speed:(float)speed
{
    NSMutableArray *anims = [NSMutableArray array];

    // initial wobble
    CABasicAnimation *startWobble = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    startWobble.toValue = [NSNumber numberWithFloat:-amount];
    startWobble.duration = speed/2.0;
    startWobble.beginTime = 0;
    startWobble.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [anims addObject:startWobble];

    // rest of wobble
    CABasicAnimation *wobbleAnim = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    wobbleAnim.fromValue = [NSNumber numberWithFloat:-amount];
    wobbleAnim.toValue = [NSNumber numberWithFloat:amount];
    wobbleAnim.duration = speed;
    wobbleAnim.beginTime = speed/2.0;
    wobbleAnim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    wobbleAnim.autoreverses = YES;
    wobbleAnim.repeatCount = INFINITY;
    [anims addObject:wobbleAnim];

    CAAnimationGroup *wobbleGroup = [CAAnimationGroup animation];
    wobbleGroup.duration = DBL_MAX; // this stops it from working
    wobbleGroup.animations = anims;

    [view.layer addAnimation:wobbleGroup forKey:@"wobble"];
} 
```

由于 CFTimeInterval 被定义为双精度，我尝试将动画组的持续时间设置为`DBL_MAX`，但这会阻止动画组运行。但是，如果我将其设置为较大的数字，例如 10000，则运行良好。在 a 的持续时间内我可以使用的最大数字是多少`CAAnimationGroup`，以确保它尽可能接近无穷大？

**更新：**似乎如果我输入一个非常大的值，例如`DBL_MAX / 4.0`它会冻结一秒钟，然后开始动画。如果我输入这个值`DBL_MAX / 20.0`，那么一开始的冻结就会小很多。似乎具有如此大的持续时间值导致它冻结。除了使用非常大的持续时间值之外，还有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T20:22:25.873

我现在面临着完全相同的问题......我希望有人证明我错了，但我认为处理这种情况的唯一合理方法是将第一个动画移动到 a `CATransaction`，并将其与自动反转动画链接使用：

```
[CATransaction setCompletionBlock:block]; 
```

这并不理想，但可以完成工作。

关于您关于从后台返回时暂停动画的问题，这是 CoreAnimation 框架的经典限制，已为此提出了许多解决方案。我解决它的方法是简单地在动画的随机点重置动画，通过随机化`timeOffset`属性。用户无法准确判断动画状态应该是什么，因为应用程序在后台。这是一些可以提供帮助的代码（查找`//RANDOMIZE!!`评论）：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(startAnimating)
                                             name:UIApplicationWillEnterForegroundNotification
                                           object:[UIApplication sharedApplication]];

...

for (CALayer* layer in _layers) 
{
    // RANDOMIZE!!!
    int index = arc4random()%[levels count];
    int level = ...;
    CGFloat xOffset = ...;

    layer.position = CGPointMake(xOffset, self.bounds.size.height/5.0f + yOffset * level);

    CGFloat speed = (1.5f + (arc4random() % 40)/10.f);
    CGFloat duration = (int)((self.bounds.size.width - xOffset)/speed);

    NSString* keyPath = @"position.x";
    CABasicAnimation* anim = [CABasicAnimation animationWithKeyPath:keyPath];

    anim.fromValue      = @(xOffset);
    anim.toValue        = @(self.bounds.size.width);
    anim.duration       = duration;
    anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    // RANDOMIZE!!
    anim.timeOffset     = arc4random() % (int) duration;
    anim.repeatCount    = INFINITY;

    [layer removeAnimationForKey:keyPath];
    [layer addAnimation:anim forKey:keyPath];
    [_animatingLayers addObject:layer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T21:08:07.013

使用单个关键帧动画而不是一组两个单独的动画要简单得多。

```
- (void)addWobbleAnimationToView:(UIView *)view amount:(CGFloat)amount speed:(NSTimeInterval)speed {
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
    animation.duration = 2 * speed;
    animation.values = @[ @0.0f, @(-amount), @0.0f, @(amount), @0.0f ];
    animation.keyTimes = @[ @0.0, @0.25, @0.5, @0.75, @1.0 ];
    CAMediaTimingFunction *easeOut =[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    CAMediaTimingFunction *easeIn =[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
    animation.timingFunctions = @[ easeOut, easeIn, easeOut, easeIn ];
    animation.repeatCount = HUGE_VALF;
    [view.layer addAnimation:animation forKey:animation.keyPath];
} 
```

# visual-studio-2012 - VS 2012 断点问题

> ID：15664981
> 
> 赞同：1
> 
> 时间：2013-03-27T17:06:56.153
> 
> 标签：visual-studio-2012, iis-7.5, breakpoints, iis-express

我遇到了一个问题，VS 2012 在我的数据库播种过程中没有遇到断点。我在使用 EF 5 的 Svr 2008 R2 上。这类似于[这个断点问题](https://stackoverflow.com/questions/13931640/visual-studio-2012-debug-for-asp-net-not-working-using-iis7)，但不完全相同。一旦我通过了播种过程，我的断点在控制器中就可以正常工作（我假设在其他任何地方）。

我可以让断点与 IIS Express 一起工作，但不能与 IIS 7 一起工作。由于我想打的断点位于 Application_Start 和 Seed 进程中，我没有时间使用 Ctrl-Alt-P 附加进程并尝试那样调试。我确实检查了 iis 的 windows 身份验证和注册，这些并没有影响断点。

我可以验证播种是否使用日志记录以及如何创建数据库。不过，我不希望回到使用日志进行调试的黑暗时代。我也希望不需要在 IIS Express 和 IIS 7 之间来回切换。

为了重新创建它，我启动了一个新的 VS 2012 项目，选择了 MVC4 和 Internet 应用程序。我手动将 web.config 更改为指向 SQLEXPRESS。然后我将项目属性 > web 更改为不使用 IIS Express。我在 Application_Start 中创建了一个断点，并在 homecontroller/index 中创建了一个断点并运行了该项目。唯一命中的断点是索引断点。重新检查 IIS Express 允许命中两个断点。

如果您已经看到此问题并有解决方法，请告诉我。谢谢， TJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:19:07.713

我最近似乎遇到了很多这类问题。我清除了复制它们的方法，然后我将它们单独放置了几天，它们就消失了。我无法再重新创建它了。我什至使用了相同的项目，我只是将复选框更改为使用 IIS Express。

所以，当有疑问时，不要拔掉你的头发，做些别的事情，要有耐心。谁知道，也许把它关掉再打开就行了（尽管我确实试过了，谢谢罗伊）。

# android - 等待字符串返回值

> ID：15664984
> 
> 赞同：0
> 
> 时间：2013-03-27T17:07:02.707
> 
> 标签：android, string, android-asynctask

我正在尝试使用 HttpManager 从 url 检索字符串

```
public String request(Context context, String url){
        page_requested = "empty";
        HttpQuery query = new HttpQuery(context, mHttpClient);
        query.execute(url);
        return page_requested;
    } 
```

并在 MainActivity 中使用它

```
public void onClick(View v) {
        Toast.makeText(MainActivity.this, HttpManager.getInstance().request(MainActivity.this, "http://myurl"), Toast.LENGTH_SHORT).show();
    } 
```

但`public String request`不等待执行查询并返回“空”，但如果我等待 10 秒显示 toast，它会返回正确的值。

显示预期值的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:14:18.967

使用 AsyncTask 显示您的文本。我认为这将是一种有效的方式..您可以在加载操作时显示进度条。

```
public class DisplayString extends AsyncTask<Void, Void, Void>
{  
@Override
protected void onPreExecute()
{  
    super.onPreExecute();
    dialog.setMessage("Please wait...");
    dialog.setCancelable(false);
    dialog.show();

} 
@Override 
protected void onProgressUpdate(Void... values) {
    super.onProgressUpdate(values);
    // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
 }

@Override 
protected void onPostExecute(Void result)

{ 
      //Post Execute
       dialog.cancel();
     //Display your string here
}
@Override
protected Void doInBackground(Void... params) {

  // Your operation..Dont Edit Any Views here

    return null;
} 
```

}

希望能帮助到你

# php - facebook like 和 twitter 按钮的哈希刘海

> ID：15664985
> 
> 赞同：0
> 
> 时间：2013-03-27T17:07:06.107
> 
> 标签：php, jquery, wordpress

我目前有一个 wordpress 网站，它以 ajax 模式加载帖子，并带有自己的 hash bang (#!) url。每个帖子都有一个 Facebook 喜欢和 twitter 按钮，但是每当我尝试使用任一按钮发布帖子的 url 时，它都不会发布 hash bang url。Facebook 使用很长的代码，而 twitter 只使用网站的基本 url 而没有 hash bang。有没有办法用 hash bang 输出正确的 url？

谢谢。

# javascript - 为什么我使用 Web Performance API 测量渲染时间的尝试总是导致负值

> ID：15664991
> 
> 赞同：4
> 
> 时间：2013-03-27T17:07:25.263
> 
> 标签：javascript, html, performance, benchmarking, navigation-timing-api

我正在构建一个使用 Web Performance API 的基于 Web 的页面渲染基准应用程序。它所做的基本上是测量浏览器在命令渲染一堆 div 元素时需要多少时间，然后构建一个隐藏的表单，将计算结果放入其中，然后将表单提交到另一个 PHP 页面进行处理。问题是，计算结果一直是负数并且在几万亿范围内（即十四位数字：-1364403484035）。这是代码：

```
window.onload=function(){
            results=(performance.timing.loadEventEnd-performance.timing.responseEnd);
            var browserData = document.createElement("form");
            browserData.setAttribute("method","post");
            browserData.setAttribute("action","results.php");

            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", "res");
            hiddenField.setAttribute("value", results);
            browserData.appendChild(hiddenField);

            document.body.appendChild(browserData);
            browserData.submit();` 
```

**更新 1：**

我对我的代码做了一些调整，如下所示：

```
 window.onload=function(){
        // My edits
        beginning=performance.timing.responseEnd;
        ending=performance.timing.loadEventEnd;
        results=(ending-beginning);
        // End of my edits
        var browserData = document.createElement("form");
        browserData.setAttribute("method","post");
        browserData.setAttribute("action","results.php");

        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", "res");
        hiddenField.setAttribute("value", results);
        browserData.appendChild(hiddenField);

        document.body.appendChild(browserData);
        browserData.submit();` 
```

并使用浏览器的 JavaScript 控制台查看变量的值，我发现`ending = 0`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:10:41.010

## 原因

这是因为在 window.load 完成时设置了 loadEventEnd。您在加载事件中调用它！

**[来自 MSDN 文档：](http://msdn.microsoft.com/en-us/library/ie/ff974721%28v=vs.85%29.aspx)**

> loadEventEnd 属性必须返回当前文档的加载事件完成的时间。当加载事件未触发或未完成时，它必须返回零。

**怎么修：**

使用 setTimeout 以便 onload 可以结束。

```
window.onload = function () {
     window.setTimeout(function () {
         results = (performance.timing.loadEventEnd - performance.timing.responseEnd);
         var browserData = document.createElement("form");
         browserData.setAttribute("method", "post");
         browserData.setAttribute("action", "results.php");

         var hiddenField = document.createElement("input");
         hiddenField.setAttribute("type", "hidden");
         hiddenField.setAttribute("name", "res");
         hiddenField.setAttribute("value", results);
         browserData.appendChild(hiddenField);

         document.body.appendChild(browserData);
         browserData.submit();
     }, 0);
 } 
```

另一种选择是轮询`loadEventEnd`，直到它不为零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T22:01:32.220

使用 Boomerang ( [https://github.com/lognormal/boomerang](https://github.com/lognormal/boomerang) )。生命太短暂，无法编写自己的 Navigation Timing 库

# java - 在 Spring 3.1 中实例化 bean 时出错

> ID：15664996
> 
> 赞同：3
> 
> 时间：2013-03-27T17:07:40.273
> 
> 标签：java, spring, aop, spring-aop

我有以下课程：

```
public abstract class AbstractBusinessModule {

}

public class MS3BusinessModule extends AbstractBusinessModule 
{
    public MS3BusinessModule(SomeOtherClass value)
    {

    }
} 
```

以及以下 bean 声明：

```
<bean id="ms3BusinessModule" class="com.hba.MS3BusinessModule" >
    <constructor-arg index="0">
        <ref bean="someOtherBeanID"/>
    </constructor-arg>
    <aop:scoped-proxy />
</bean> 
```

在我的应用程序启动时，我收到以下错误：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ms3BusinessModule' defined in BeanDefinition defined in class path resource [spring.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.hba.MS3BusinessModule]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.hba.EhCacheTest.main(EhCacheTest.java:16)
Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.hba.MS3BusinessModule]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given
    at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:212)
    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:112)
    at org.springframework.aop.scope.ScopedProxyFactoryBean.setBeanFactory(ScopedProxyFactoryBean.java:109)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1439)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1408)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 11 more
Caused by: java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given
    at net.sf.cglib.proxy.Enhancer.emitConstructors(Enhancer.java:721)
    at net.sf.cglib.proxy.Enhancer.generateClass(Enhancer.java:499)
    at net.sf.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)
    at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
    at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
    at net.sf.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)
    at net.sf.cglib.proxy.Enhancer.create(Enhancer.java:285)
    at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:200)
    ... 16 more 
```

可能出了什么问题？

如果我`<aop:scoped-proxy/>`从 bean 声明中删除它就可以了。

更新：如果我将默认构造函数放入`MS3BusinessModule`，它可以工作。我不明白为什么需要默认构造函数。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:28:48.653

> 如果我在 MS3BusinessModule 中放置一个默认构造函数，它就可以工作。我不明白为什么需要默认构造函数。有人可以解释一下吗？

可行的方法`<aop:scoped-proxy/>`是以不同的名称隐藏“真实”bean，并创建一个 CGLIB 代理类，它是真实 bean 类的子类，并将所有方法调用委托给目标 bean 的正确实例。所以你在这里有两种不同的对象：

*   *`com.hba.MS3BusinessModule`每个会话/请求/无论范围是什么的*n 个*实例，以及*
**   动态生成的代理类的一个单例实例。*

 **n 个*目标 bean 是使用带有参数的构造函数构造的，并将您的`<constructor-arg>`值传递给它，但是代理类需要一个无参数的超类构造函数来调用（当然可以声明`protected`而不是声明`public`）。代理机制实际上不会调用代理实例上的任何超类方法，因为所有调用都转到目标实例，但是代理类需要扩展目标 bean 类才能使代理成为`instanceof`正确的类型。

另一种解决方法是提供一个实现的*接口*，`M3BusinessModule`并使其他 bean 对这个接口的所有引用都使用接口类型而不是具体的类类型。这将允许 Spring 使用`java.lang.reflect`代理而不是 CGLIB 代理，实现接口而不需要扩展具体类。*

# android - 带有 Android 应用程序的 ProGuard -> 重复定义

> ID：15664998
> 
> 赞同：2
> 
> 时间：2013-03-27T17:07:43.360
> 
> 标签：android, intellij-idea, proguard

我试图在编译我的 Android 应用程序时启用 ProGuard。

下面是 ProGuard 配置。

我遇到的问题是我收到很多关于重复定义的警告（几乎所有类，在我的应用程序或基本 java 类中），更糟糕的是，当我对代码进行更改时，这些不会得到反映我在设备上运行。

我正在使用 IntelliJ IDEA 11.1.5 编译（和开发）（并且只是在项目结构中启用 ProGuard，我没有将其设置为使用系统 proguard 配置）。

我看到[了另一个问题](https://stackoverflow.com/questions/8805704/android-proguard-duplicate-definition)，但它根本没有帮助，我不认为我的问题仅限于 3rd 方库，我想这更多的是设置正确的输入/输出......？

```
-injars      bin/classes
-outjars     bin/classes-processed.jar
-libraryjars /home/matthieu/android/platforms/android-17/android.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*,SourceFile,LineNumberTable,*Annotation*
-renamesourcefileattribute SourceFile
-dontwarn java.awt.**,javax.security.**,java.beans.**,com.sun.**

-keep public class my.package.MainMenuActivity

-keep public class * extends android.app.Activity

-keep public class * extends android.app.Application

-keep public class * extends android.app.Service

-keep public class * extends android.content.BroadcastReceiver

-keep public class * extends android.content.ContentProvider

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context,android.util.AttributeSet);
    public <init>(android.content.Context,android.util.AttributeSet,int);
    public void set*(...);
}

-keep public class * extends android.view.ViewGroup
-keep public class * extends android.support.v4.app.Fragment

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-keepclasseswithmembers class * {
    public <init>(android.content.Context,android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context,android.util.AttributeSet,int);
}

-keepclassmembers class * extends android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

#ACRA specifics

# keep this class so that logging will show 'ACRA' and not a obfuscated name like 'a'.
# Note: if you are removing log messages elsewhere in this file then this isn't necessary
-keep class org.acra.ACRA {
    *;
}

# keep this around for some enums that ACRA needs
-keep class org.acra.ReportingInteractionMode {
    *;
}

-keepnames class org.acra.sender.HttpSender$** {
    *;
}

-keepnames class org.acra.ReportField {
    *;
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
    public void addCustomData(java.lang.String,java.lang.String);
    public void putCustomData(java.lang.String,java.lang.String);
    public void removeCustomData(java.lang.String);
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
    public void handleSilentException(java.lang.Throwable);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:26:30.763

假设您在 IntelliJ IDEA 中使用 Ant 进行构建，则不能添加 -injars、-outjars 或 -libraryjars 选项；Ant 脚本已经为您做到了。这解释了有关重复的警告。

请注意，最好删除 proguard-project.txt 中配置的通用部分并依赖 Android SDK 的配置。后者部分由 aapt 生成（针对您的项目进行了调整），部分由 SDK 内部维护。

# java - 创建一个所有相邻颜色不同的随机颜色网格

> ID：15664999
> 
> 赞同：0
> 
> 时间：2013-03-27T17:07:46.610
> 
> 标签：java

所以我有以下问题：编写一个程序，它接受一个整数命令行参数 N，并使用两个嵌套的 for 循环来打印一个 N×N 板，该板在 6 种颜色之间交替，由空格隔开。颜色用字母表示（如“r”代表红色，“b”代表蓝色）。你不能有两个相同颜色的相邻。

所以，我知道我可能需要数组来解决这个问题。我尝试了几种方法都出错了。以下是我最近的尝试之一，但我不确定现在如何通过网格并更正它。代码所做的是使每一行随机化，左右没有颜色相同，但列不固定。

请注意，我是一年级 CS 学生，没有编程历史。我猜这个问题的解决方案不是太复杂，但是，我看不到一个简单的解决方案......

```
 int N = StdIn.readInt();
    int array1[] = new int[N];
    for (int column = 0; column < N; column++) {
        int x = 0;

        for (int row = 0; row < N; row++) {

            int c = (int) (Math.random() * 6 + 1);

            while (x == c) {
                c = (int) (Math.random() * 6 + 1);
                array1[row] = c;
            }
            if (c == 1) {
                System.out.print("R ");
            }
            if (c == 2) {
                System.out.print("O ");
            }
            if (c == 3) {
                System.out.print("Y ");
            }
            if (c == 4) {
                System.out.print("G ");
            }
            if (c == 5) {
                System.out.print("B ");
            }
            if (c == 6) {
                System.out.print("I ");
            }

            x = c;

        }

        System.out.println();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T11:30:52.040

这是我解决问题的方法。虽然很复杂，但背后的逻辑很简单。每次为二维数组分配新颜色时，只需检查要分配新颜色的位置的顶部和左侧的数组值。您只能在将颜色分配给数组的第一行之后才能执行此操作，但是您需要为第一行创建单独的条件。

```
public class ColourGrid {
    public static void main(String[] args) {
        int N = Integer.parseInt(args[0]);
        char[][] clrGrid = new char[N][N];
        char colours[] = {'r','b','y','w','o','g'} ;
        for (int counter = 0 ; counter < N; counter++) {
            for (int counter2 = 0 ; counter2 < N; counter2++) {
                if (counter == 0 && counter2 == 0) {
                    clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                }
                else if (counter != 0 && counter2 == 0) {
                    clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                    while (clrGrid[counter][counter2] == clrGrid[(counter)-1][counter2]) {
                        clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                    }
                }
                else if (counter == 0 && counter2 != 0) {
                    clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                    while (clrGrid[counter][counter2] == clrGrid[(counter)][counter2-1]) {
                        clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                    }
                }
                else if (counter != 0 && counter2 != 0) {
                    clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                    while (clrGrid[counter][counter2] == clrGrid[(counter)-1][counter2] || clrGrid[counter][counter2] == clrGrid[counter][(counter2)-1]) {
                        clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                    }
                }
                else {
                    clrGrid[counter][counter2] = colours[(int)(Math.random()* 5 + 1)] ;
                }
            }
        }
        for (int counter = 0 ; counter < N; counter++) {
            System.out.println("");
            for (int counter2 = 0 ; counter2 < N; counter2++) {
                System.out.print(clrGrid[counter][counter2] + " ");
            }
        }
    }
} 
```